# StackOverflow 问答 11366000-11366999

# jquery - jquery 与@data-rel 的链接和与@data-transition 的链接指向同一页面

> ID：11366004
> 
> 赞同：1
> 
> 时间：2012-07-06T16:16:40.283
> 
> 标签：jquery, jquery-mobile

我有下面的代码，或者你可以在 jsfiddle ( [http://jsfiddle.net/HzGDm/](http://jsfiddle.net/HzGDm/) ) 上查看我不确定我做错了什么。如果单击链接#1，然后单击#2 和#3，则链接#2 和#3 都变成对话框。

```
<div data-role="page" id="page1">
    <div data-role="header"><h1>Page 1</h1></div>
    <div data-role="content">
        <h2>
            <a href="#page2" data-rel="dialog" >1\. Click this link first: Display Dialog</a></h2>

        <h2>Then let's try some transitions!</h2>
        <p>2\. <a href="#page2" data-transition="fade">Fade to second page</a></p>
        <p>3\. <a href="#page2" data-transition="flip">Flip to second page</a></p>
    </div>
    <div data-role="footer"><h1>footer</h1></div>
</div>

<div id="page2" data-role="page">
    <div data-role="header"><h1>page 2</h1></div>
    <div data-role="content">
        <p>This is page 2</p>
        <p><a href="#page1">Go back to first page</a></p>
    </div>
    <div data-role="footer">Page Transitions</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:33:08.383

当 jQuery Mobile 初始化一个伪页面时，它会添加特定于伪页面将如何显示的类（伪页面是`data-role="page"`和`data-role="dialog"`元素）。因此，如果您初始化为对话框，那么它将获得对话框类，对于常规页面也是如此。

但是，您可以通过手动更改伪页面的类来解决这个问题。例如：

```
//wait for first page to initialize to bind to its links
$(document).delegate('#page1', 'pageinit', function () {

    //find links in the first page and bind a click event handler to them
    $(this).find('a').bind('click', function () {

        //this link is opening a regular page
        if ($(this).attr('data-rel') !== 'dialog') {

            //update the necessary attributes/classes to show a regular page
            $('#page2').attr('data-role', 'page').removeClass('ui-dialog')
                       .find('.ui-header').removeClass('ui-corner-top')
                       .end().find('.ui-footer').removeClass('ui-corner-bottom')
                       .end().find('.ui-dialog-contain').children().unwrap();
        } else {

            //this link is opening a dialog
            $('#page2').attr('data-role', 'dialog').addClass('ui-dialog')
                       .find('.ui-header').addClass('ui-corner-top')
                       .end().find('.ui-footer').addClass('ui-corner-bottom')
                       .end().children().wrapAll('<div role="dialog" class="ui-dialog-contain ui-corner-all ui-overlay-shadow" />');
        }
    });
});​ 
```

这是一个演示：http: [//jsfiddle.net/jasper/HzGDm/9/](http://jsfiddle.net/jasper/HzGDm/9/)

这不是一个完整的解决方案。您会注意到，如果您将第二个页面作为常规页面打开，然后将其作为对话框打开，它将看起来很像一个对话框，但不会有“X”图标来关闭对话框。这本身并没有太大的障碍，但您可能会遇到类似的其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:35:34.630

另一种解决方案是通过多页文档，将单个 page.html 拆分为两个页面，并为每个导航重新加载页面。通过重新加载页面，使用新属性再次增强页面。

```
<!------ page1.html -------->

<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Demo</title>  
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.js"></script>    
  <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css">        
<script type="text/javascript" src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.js"></script>        
    <script>

var pageChange =  function(event){
    var target = event.target;
    var transition = $(target).jqmData( "transition" ) || $.mobile.defaultPageTransition;
    var role = $(target).jqmData( "rel" );
    $.mobile.changePage('page2.html', {reloadPage:true, transition:transition, role:role});
}

$(document).delegate('#page1 #fadeAnchor', 'click', pageChange);
$(document).delegate('#page1 #flipAnchor', 'click', pageChange);
$(document).delegate('#page1 #dialogAnchor', 'click', pageChange);

    </script>
</head>

<body>
<div data-role="page" id="page1">
    <div data-role="header"><h1>Page 1</h1></div>
    <div data-role="content">
             <h2><a id="dialogAnchor" href="javascript:void(0);" data-rel="dialog" >Click this link first: Display Dialog</a></h2>

        <div style="margin-top:2em"></div>

            <h2>Then let's try some transitions!</h2>
            <p><a id="fadeAnchor" href="javascript:void(0);" data-transition="fade">Fade to second page</a></p>
            <p><a id="flipAnchor" href="javascript:void(0);" data-transition="flip">Flip to second page</a></p>

    </div>
    <div data-role="footer"><h1>footer</h1></div>
</div>
</body></html>

<!--------------------page2.html ------------------>

<div id="page2" data-role="page">
    <div data-role="header"><h1>page 2</h1></div>
    <div data-role="content">
        <p>This is page 2</p>
        <p><a href="page1.html">Go back to first page</a></p>
    </div>
    <div data-role="footer">Page Transitions</div>
</div> 
```

# mysql - MySQL 加入与使用？

> ID：11366006
> 
> 赞同：311
> 
> 时间：2012-07-06T16:16:49.843
> 
> 标签：mysql, join, using

在 MySQL中，和`JOIN`有什么区别？据我所知，只是更方便的语法，而当列名不相同时允许更多的灵活性。但是，这种差异是如此之小，您会认为他们会取消.`ON``USING()``USING()``ON``USING()`

还有比眼前所见的更多吗？如果是，在特定情况下我应该使用哪个？

* * *

## 回答 #1

> 赞同：500
> 
> 时间：2012-07-06T17:32:51.777

它主要是语法糖，但有几个值得注意的区别：

**ON**是两者中更通用的一个。可以在一个列、一组列甚至一个条件上连接表。例如：

```
SELECT * FROM world.City JOIN world.Country ON (City.CountryCode = Country.Code) WHERE ... 
```

**当两个表共享一个与它们连接的名称完全相同的列时，**USING很有用。**在这种情况下，有人可能会说：**

 **```
SELECT ... FROM film JOIN film_actor USING (film_id) WHERE ... 
```

另一个不错的选择是不需要完全限定连接列：

```
SELECT film.title, film_id -- film_id is not prefixed
FROM film
JOIN film_actor USING (film_id)
WHERE ... 
```

**为了说明，要使用ON**执行上述操作，我们必须编写：

```
SELECT film.title, film.film_id -- film.film_id is required here
FROM film
JOIN film_actor ON (film.film_id = film_actor.film_id)
WHERE ... 
```

注意子句`film.film_id`中的限定。`SELECT`只说是无效的，`film_id`因为这会产生歧义：

> 错误 1052 (23000)：字段列表中的列“film_id”不明确

至于**`select *`**，连接列在结果集中出现两次，`ON`而它只出现一次`USING`：

```
mysql> create table t(i int);insert t select 1;create table t2 select*from t;
Query OK, 0 rows affected (0.11 sec)

Query OK, 1 row affected (0.00 sec)
Records: 1  Duplicates: 0  Warnings: 0

Query OK, 1 row affected (0.19 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> select*from t join t2 on t.i=t2.i;
+------+------+
| i    | i    |
+------+------+
|    1 |    1 |
+------+------+
1 row in set (0.00 sec)

mysql> select*from t join t2 using(i);
+------+
| i    |
+------+
|    1 |
+------+
1 row in set (0.00 sec)

mysql> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-12T11:15:59.727

当我发现`ON`它比`USING`. 它是在`OUTER`查询中引入连接的时候。

`ON`允许在`OUTER`保持连接的同时限制查询连接到的表的结果集`OUTER`。尝试通过指定`WHERE`子句来限制结果集将有效地将`OUTER`连接更改为`INNER`连接。

当然，这可能是一个相对的极端情况。值得放在那里虽然......

例如：

```
CREATE TABLE country (
   countryId int(10) unsigned NOT NULL PRIMARY KEY AUTO_INCREMENT,
   country varchar(50) not null,
  UNIQUE KEY countryUIdx1 (country)
) ENGINE=InnoDB;

insert into country(country) values ("France");
insert into country(country) values ("China");
insert into country(country) values ("USA");
insert into country(country) values ("Italy");
insert into country(country) values ("UK");
insert into country(country) values ("Monaco");

CREATE TABLE city (
  cityId int(10) unsigned NOT NULL PRIMARY KEY AUTO_INCREMENT,
  countryId int(10) unsigned not null,
  city varchar(50) not null,
  hasAirport boolean not null default true,
  UNIQUE KEY cityUIdx1 (countryId,city),
  CONSTRAINT city_country_fk1 FOREIGN KEY (countryId) REFERENCES country (countryId)
) ENGINE=InnoDB;

insert into city (countryId,city,hasAirport) values (1,"Paris",true);
insert into city (countryId,city,hasAirport) values (2,"Bejing",true);
insert into city (countryId,city,hasAirport) values (3,"New York",true);
insert into city (countryId,city,hasAirport) values (4,"Napoli",true);
insert into city (countryId,city,hasAirport) values (5,"Manchester",true);
insert into city (countryId,city,hasAirport) values (5,"Birmingham",false);
insert into city (countryId,city,hasAirport) values (3,"Cincinatti",false);
insert into city (countryId,city,hasAirport) values (6,"Monaco",false);

-- Gah. Left outer join is now effectively an inner join 
-- because of the where predicate
select *
from country left join city using (countryId)
where hasAirport
; 

-- Hooray! I can see Monaco again thanks to 
-- moving my predicate into the ON
select *
from country co left join city ci on (co.countryId=ci.countryId and ci.hasAirport)
; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-07-21T00:25:13.340

[维基百科](https://en.wikipedia.org/wiki/Join_(SQL)#Equi-join)有以下信息`USING`：

> 然而，USING 构造不仅仅是语法糖，因为结果集不同于具有显式谓词的版本的结果集。具体来说，USING 列表中提到的任何列都只会出现一次，名称不合格，而不是为连接中的每个表出现一次。在上述情况下，将有一个 DepartmentID 列，并且没有employee.DepartmentID 或department.DepartmentID。

它正在谈论的表格：

![在此处输入图像描述](../Images/18561b0514d9e20df3e92d16c88b451f.png)

[Postgres](http://www.postgresql.org/docs/9.5/static/queries-table-expressions.html)文档也很好地定义了它们：

> ON 子句是最通用的连接条件：它采用与 WHERE 子句中使用的相同类型的布尔值表达式。如果 ON 表达式的计算结果为真，则 T1 和 T2 中的一对行匹配。
> 
> USING 子句是一种速记，它允许您利用连接双方对连接列使用相同名称的特定情况。它采用逗号分隔的共享列名称列表，并形成一个连接条件，其中包括每个列的相等比较。例如，使用 USING (a, b) 连接 T1 和 T2 会产生连接条件 ON T1.a = T2.a AND T1.b = T2.b。
> 
> 此外，JOIN USING 的输出抑制了冗余列：不需要打印两个匹配的列，因为它们必须具有相同的值。虽然 JOIN ON 生成 T1 中的所有列，然后是 T2 中的所有列，但 JOIN USING 为每个列出的列对（按列出的顺序）生成一个输出列，然后是 T1 中的任何剩余列，然后是 T2 中的任何剩余列.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-07-28T09:47:49.063

## 数据库表

为了演示 USING 和 ON 子句如何工作，假设我们有以下`post`和数据库表，它们通过表中的外键列引用表中的主键列`post_comment`形成一对多的表关系：`post_id``post_comment``post_id``post`

[![SQL USING vs ON 子句表关系](../Images/9c5de74982863f10763bd902807d35ab.png)](https://i.stack.imgur.com/9XH7O.png)

父`post`表有 3 行：

```
| post_id | title     |
|---------|-----------|
| 1       | Java      |
| 2       | Hibernate |
| 3       | JPA       | 
```

子`post_comment`表有3条记录：

```
| post_comment_id | review    | post_id |
|-----------------|-----------|---------|
| 1               | Good      | 1       |
| 2               | Excellent | 1       |
| 3               | Awesome   | 2       | 
```

## 使用自定义投影的 JOIN ON 子句

传统上，在编写[`INNER JOIN`](https://vladmihalcea.com/sql-inner-join/)或[`LEFT JOIN`](https://vladmihalcea.com/sql-left-join/)查询时，我们碰巧使用 ON 子句来定义连接条件。

例如，要获取评论及其相关的帖子标题和标识符，我们可以使用以下 SQL 投影查询：

```
SELECT
   post.post_id,
   title,
   review
FROM post
INNER JOIN post_comment ON post.post_id = post_comment.post_id
ORDER BY post.post_id, post_comment_id 
```

而且，我们得到以下结果集：

```
| post_id | title     | review    |
|---------|-----------|-----------|
| 1       | Java      | Good      |
| 1       | Java      | Excellent |
| 2       | Hibernate | Awesome   | 
```

## 使用自定义投影的 JOIN USING 子句

当外键列和它引用的列同名时，我们可以使用 USING 子句，如下例所示：

```
SELECT
  post_id,
  title,
  review
FROM post
INNER JOIN post_comment USING(post_id)
ORDER BY post_id, post_comment_id 
```

而且，这个特定查询的结果集与之前使用 ON 子句的 SQL 查询相同：

```
| post_id | title     | review    |
|---------|-----------|-----------|
| 1       | Java      | Good      |
| 1       | Java      | Excellent |
| 2       | Hibernate | Awesome   | 
```

> USING 子句适用于 Oracle、PostgreSQL、MySQL 和 MariaDB。SQL Server 不支持 USING 子句，因此您需要改用 ON 子句。
> 
> USING 子句可以与 INNER、LEFT、RIGHT 和 FULL JOIN 语句一起使用。

## SQL JOIN ON 子句与`SELECT *`

现在，如果我们将前面的 ON 子句查询更改为使用以下命令选择所有列`SELECT *`：

```
SELECT *
FROM post
INNER JOIN post_comment ON post.post_id = post_comment.post_id
ORDER BY post.post_id, post_comment_id 
```

我们将得到以下结果集：

```
| post_id | title     | post_comment_id | review    | post_id |
|---------|-----------|-----------------|-----------|---------|
| 1       | Java      | 1               | Good      | 1       |
| 1       | Java      | 2               | Excellent | 1       |
| 2       | Hibernate | 3               | Awesome   | 2       | 
```

> 如您所见，由于和表都包含一列，所以`post_id`是**重复的。**`post``post_comment``post_id`

## SQL JOIN USING 子句与`SELECT *`

另一方面，如果我们运行一个`SELECT *`查询，其中包含用于 JOIN 条件的 USING 子句：

```
SELECT *
FROM post
INNER JOIN post_comment USING(post_id)
ORDER BY post_id, post_comment_id 
```

我们将得到以下结果集：

```
| post_id | title     | post_comment_id | review    |
|---------|-----------|-----------------|-----------|
| 1       | Java      | 1               | Good      |
| 1       | Java      | 2               | Excellent |
| 2       | Hibernate | 3               | Awesome   | 
```

> 您可以看到，这一次，该`post_id`列被删除了重复数据，因此`post_id`结果集中包含一个列。

## 结论

如果数据库模式设计为​​外键列名与它们引用的列匹配，并且 JOIN 条件仅检查外键列值是否等于其在另一个表中的镜像列的值，那么您可以使用 USING条款。

否则，如果外键列名称与引用列不同，或者您想包含更复杂的连接条件，则应改用 ON 子句。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-07T21:10:58.557

对于那些在 phpMyAdmin 中进行实验的人，只需一句话：

phpMyAdmin 似乎有一些问题`USING`。作为记录，这是在 Linux Mint 上运行的 phpMyAdmin，版本：“4.5.4.1deb2ubuntu2”，数据库服务器：“10.2.14-MariaDB-10.2.14+maria~xenial - mariadb.org 二进制发行版”。

我已经在 phpMyAdmin 和终端（命令行）中`SELECT`使用`JOIN`and运行命令，`USING`而 phpMyAdmin 中的命令产生了一些令人费解的响应：

1）`LIMIT`末尾的一个子句似乎被忽略了。
2) 页面顶部报告的带有结果的假定行数有时是错误的：例如返回 4，但顶部显示“显示第 0 - 24 行（总共 2503 行，查询耗时 0.0018 秒。） "

正常登录 mysql 并运行相同的查询不会产生这些错误。在 phpMyAdmin 中使用`JOIN ... ON ...`. 大概是一个 phpMyAdmin 错误。**

# c++ - 为什么 pangram 缺少字母函数不返回任何内容？

> ID：11366008
> 
> 赞同：1
> 
> 时间：2012-07-06T16:16:51.017
> 
> 标签：c++, string, compare

我必须编写一个函数，它接受一个字符串并返回字符串中所有缺失的字母。下面的函数看起来很简单，但它没有返回任何东西。有什么提示吗？

```
string getMissingLetters(const string& sentence)
{
    string alphabet = "abcdefghijklmnopqrstuvwxyz";
    string sent = sentence;
    transform(sent.begin(), sent.end(), sent.begin(), ::tolower);

    for(unsigned int i = 0; i < sent.size(); i++)
        for(unsigned int j = 0; j < alphabet.size(); j++)
        {
            if(sent[i] == alphabet[j])
            {
                alphabet.erase(i);
                j--;
            }
        }
    return alphabet;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:22:23.683

你需要

字母表擦除（j，1）；

擦除位置 j 处的单个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:21:50.403

`alphabet.erase(i)`应该是`alphabet.erase(j)`

看看你当前的代码做了什么：

外部循环检查句子的第一个字母，然后，如果内部循环在字母表中找到它，它会从字母表中删除“a”。如果它仍在字母表中，则删除“b”，依此类推。如果您的句子中有“z”，则将始终删除整个字母表。

# google-apps-script - 如何解码 HTML 实体

> ID：11366021
> 
> 赞同：8
> 
> 时间：2012-07-06T16:17:43.793
> 
> 标签：google-apps-script, html-entities, e4x

我有带有 HTML 实体的字符串变量：

`var str = 'Some text &#x26; text';`

我想将其转换（解码）为原始字符：

`Some text & text`.

JavaScript 没有内置函数来实现想要的结果。我不能使用 jQuery 或 DOM 对象，因为我需要它在 Google Apps 脚本中工作。

我怎样才能以简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T16:17:45.900

您可以使用内置的 Xml 服务（[参考](https://developers.google.com/apps-script/reference/xml-service/xml-service)）：

```
var str = 'Some text &#x26; text';
var decode = XmlService.parse('<d>' + str + '</d>');
var strDecoded = decode.getRootElement().getText(); 
```

或者您可以使用内置的 E4X XML 类。

```
var str = 'Some text &#x26; text';
var decode = new XML('<d>' + str + '</d>');
var strDecoded = decode.toString(); 
```

# performance - 计算最小值 - 使用 maxflow 算法在有向加权图中切割

> ID：11366027
> 
> 赞同：2
> 
> 时间：2012-07-06T16:18:29.423
> 
> 标签：performance, algorithm, graph, graph-algorithm, network-flow

我已经使用福特富尔克森算法计算了最大流量，现在我想实现需要计算最大值的项目选择问题。不。可行的项目。我需要找到一个包含 no 的 min.cut。具有最大利润的可行项目。找到最小值的算法应该是什么。cut *在知道图中的最大流量之后。*我如何使用最大流量来确定包含即否的切割。对最大流量有贡献的节点数。我需要选择最佳节点集，以使收入最大化。在我的应用程序中，每个节点都与一个收入相关联，它也可以是正数和负数。并且也有优先级限制，例如，如果选择 a 比选择 b&c 也必须选择 有人能告诉我如何实现吗？

* * *

我在最大流图中将其转换如下：如果收入（节点）> 0 从源-> 节点添加一条边，否则从节点-> 接收器添加一条边，我为优先约束创建了一个无限容量的 egde

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:14:52.687

Ford Fulkerson 在某种程度上是一种元算法，因为它可以以几种不同的方式实现（Edmonds-Karp 是 FF 算法的实例化）。如果不知道您实施它的方式或您拥有什么信息，您的问题很难回答。

理想情况下，您正在使用某种残差图在算法中进行某种类型的广度优先搜索。当你这样做时，当你的 BFS 找不到接收器时，算法应该停止。一旦发生这种情况，您的剪辑的第一组是您能够通过 BFS 找到的所有节点，另一组是您找不到的所有节点。

如果您使用算法的标记版本，则形成切割的集合是标记集和未标记集。

我希望这有帮助。诚然，您的问题对我来说有点难以解析。如果您无法在此处找到足够的帮助，我会提供与 matcheek 相同的建议（如果您有该书，请查看 Wikipedia 或 CLRS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:18:44.427

我们可以通过从源顶点运行 dfs/bfs 来计算 min.cut (A,B)，然后在最终残差图中找到饱和边，即在没有增广路径之后

# asp.net - 将数据绑定到 gridview 时的事件

> ID：11366028
> 
> 赞同：0
> 
> 时间：2012-07-06T16:18:47.873
> 
> 标签：asp.net, gridview

将数据绑定到 Gridview 时会发生哪些事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:21:49.593

有很多，下面列出的很少。您可以在此处阅读 GridView 事件的完整列表并检查您需要什么。[**网格视图事件**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview_events.aspx)

```
DateBinding 
DataBound
RowCreated
RowDataBound 
```

# iphone - 当我将 HTML 字符串（大量数据）加载到 WebView 时，iPhone 应用程序崩溃

> ID：11366032
> 
> 赞同：3
> 
> 时间：2012-07-06T16:18:51.577
> 
> 标签：iphone, ios, objective-c, uiwebview

我有一个 Webview，我尝试在其中发布大量数据，比如大约 20 MB，其中包括图像。我已将所有内容收集到一个字符串中，并将该特定字符串传递给 webview。当字符串大小增加时会出现问题。如果字符串的大小较小，它可以正常工作。

我确实通过调试检查了控件是否到达了 WebViewDidFinishLoading 委托方法。完全加载的字符串被上传，但应用程序在几秒钟内崩溃。可能是什么原因？请帮帮我！我一直在敲马头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:23:48.623

您可能正在使用过多的内存。iOS 会杀死这样的应用程序。除了加载如此庞大的 HTML 之外，`UIWebView`它本身还有内存问题。它被指控在缓存数据（图像等）时占用过多内存

也许清空缓存会有所帮助。在`didFinishLaunchingWithOptions`尝试这个 -

```
 NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
 [NSURLCache setSharedURLCache:sharedCache];
 [sharedCache release]; 
```

此外，当您收到内存警告时，请执行此操作 -

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    [[NSURLCache sharedURLCache] removeAllCachedResponses];
} 
```

您只是在清除缓存以释放内存。

如果这也不起作用，那么我建议您想办法将 HTML 拆分为多个页面或其他方式来呈现数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-03T10:10:38.887

我在我的一个应用程序中遇到了这个问题。请检查以下链接以获取解决方案。我希望它运作良好。 [https://stackoverflow.com/a/56424953/8259188](https://stackoverflow.com/a/56424953/8259188)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:22:57.330

使用 Instruments 来分析您的应用程序。很有可能您只是内存不足——对于 iOS 应用程序来说，20MB 是相当多的，如果您从部分构建该字符串，您可能会复制许多较小的字符串。了解您的应用程序在崩溃时使用了多少内存会很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:44:07.527

你是在应用程序启动时做的吗？如果是这样，启动应用程序可能需要很长时间，并导致看门狗计时器终止应用程序。

# oracle - Oracle 11g 第 1 版与第 2 版 — LEFT OUTER JOIN 的不同行为

> ID：11366039
> 
> 赞同：7
> 
> 时间：2012-07-06T16:19:25.917
> 
> 标签：oracle, oracle11g, left-join

我在从 Oracle 11g 第 1 版升级到第 2 版后发现了这一点。

我现在可以总结的最好的是，`LEFT OUTER JOIN`针对具有恒定“假”列和`WHERE`子句的查询在两个 Oracle RELEASES 中生成不同的结果。在第 2 版中，“假”列显示在不匹配的行中：

```
TEST1      TEST2
=====      =====
A B        A B 
- ---      - ---
1 bar      1 hello
2 baz

> SELECT * FROM test1 LEFT OUTER JOIN test2 ON test1.a = test2.a;
  A B   A_1 B_1
  - --- --- -----
  1 bar   1 hello
  2 baz 
```

到现在为止还挺好。以上所有内容在 Rel 上都相同。1和2。现在，添加一个“假”常量列X，事情按预期工作：

```
> SELECT * 
    FROM test1 
    LEFT OUTER JOIN (SELECT test2.*, 'X' AS X 
                       FROM test2) test3 
      ON test1.a = test3.a;

  A B   A_1 B_1   X
  - --- --- ----- -
  1 bar   1 hello X
  2 baz 
```

现在，`WHERE`在第一个表上添加一个子句并得到**不同**的结果：

```
> SELECT * 
    FROM test1 
    LEFT OUTER JOIN (SELECT test2.*, 'X' AS X 
                       FROM  test2) test3 
      ON test1.a = test3.a
   WHERE test1.b LIKE 'ba%';

  Release 11.1.0.7.0        Release 11.2.0.2.0    
  ==================        ==================
  A B   A_1 B_1   X         A B   A_1 B_1   X
  - --- --- ----- -         - --- --- ----- -
  1 bar   1 hello X         1 bar   1 hello X
  2 baz                     2 baz           X  <--- WHAT'S THIS?! 
```

进一步的困惑：如果 WHERE 条件是数字的（例如，`WHERE test1.a < 5`结果是一样的！

**更新（澄清我的实际问题）：** 我做错了什么？我的最终查询是否以某种方式调用了未定义的行为，从而使 Oracle 可以将返回的内容从一个版本更改为下一个版本？如果不是，这是 Oracle 错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:22:52.517

所以我要回答我自己的问题，即：“我做错了什么还是这是一个 Oracle 错误？” 这是**一个 Oracle 错误**。

我让你来导航被称为*support.oracle.com*的疯狂，但是，正如@AdamHawkes 所指出的，这个错误*可能*在最近的 Oracle 补丁集中得到了解决。11.2.0.3 的发行说明中的​​一些错误似乎与我的问题相似，但并不完全相同。

当我应用最新的补丁时，我会尝试回到这里并更新答案（我处于无法控制的环境中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:22:16.177

只是为其他读者链接一些相关的帖子..

[https://forums.oracle.com/forums/thread.jspa?threadID=1113096](https://forums.oracle.com/forums/thread.jspa?threadID=1113096)

[Oracle 中完全外连接的奇怪行为 - 如何解释？](https://stackoverflow.com/questions/9717697/strange-behaviour-of-full-outer-join-in-oracle-how-it-could-be-explained)

主要建议更改会话以关闭特定优化。更改会话集“_optimizer_join_elimination_enabled”= false；更改会话集“_optimizer_native_full_outer_join”=off；

我宁愿他们有自动化测试，证明简单的事情是有效的，而不是一开始就引入这些错误。

# java - Java PathIterator 顺时针还是逆时针？

> ID：11366040
> 
> 赞同：2
> 
> 时间：2012-07-06T16:19:26.133
> 
> 标签：java, path-iterator

Java PathIterator 是否以顺时针或逆时针顺序为您提供多边形的点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:35:10.813

它按照点在多边形中定义的顺序“行走”。考虑一下我刚刚编写的以下代码示例：

```
c:\files\j>java ShapeTest
Walking clockwise
Currently at: 2.0 5.0
Currently at: 4.0 4.0
Currently at: 4.0 1.0
Currently at: 0.0 1.0
Currently at: 0.0 3.0
Walking counter-clockwise
Currently at: 0.0 3.0
Currently at: 0.0 1.0
Currently at: 4.0 1.0
Currently at: 4.0 4.0
Currently at: 2.0 5.0 
```

由

```
import java.awt.Polygon;
import java.awt.geom.PathIterator;
class ShapeTest {
    /**
     * Use points to make a pentagon
              . 2,5
        0,3 .   . 4,3
        0,1 .   . 4,1

     */
    public static void main(String...args) {
        // from the top clockwise
        int[] xClock = new int[] { 2,4,4,0,0 };
        int[] yClock = new int[] { 5,4,1,1,3 };

        // the reverse order from the clockwise way
        int[] xCounter = new int[] { 0,0,4,4,2 };
        int[] yCounter = new int[] { 3,1,1,4,5 };

        Polygon clock = new Polygon(xClock, yClock, 5);
        Polygon counter = new Polygon(xCounter, yCounter, 5);

        int index = 0;

        System.out.println("Walking clockwise");
        PathIterator clockIter = clock.getPathIterator(null);

        while(!clockIter.isDone() && index < clock.npoints) {
            float[] coords = new float[6];
            clockIter.currentSegment(coords);
            System.out.println("Currently at: " + coords[0] + " " + coords[1]);
            clockIter.next();
            index++;
        }

        index = 0;

        System.out.println("Walking counter-clockwise");
        PathIterator counterIter = counter.getPathIterator(null);
        while(!counterIter.isDone() && index < counter.npoints) {
            float[] coords = new float[6];
            counterIter.currentSegment(coords);
            System.out.println("Currently at: " + coords[0] + " " + coords[1]);
            counterIter.next();
            index++;
        }

    }
} 
```

# javascript - SAEF 中的参数是什么意思？

> ID：11366043
> 
> 赞同：0
> 
> 时间：2012-07-06T16:19:28.613
> 
> 标签：javascript

我是 javascript 的新手。我曾经读过 SAEF 的文章，但我仍有疑问，代码如下：

```
var addEvent =（函数（窗口，文档）{
    如果（文档.addEventListener）{
        返回函数（元素，类型，回调）{
            //如果 elem 存在并且是单个节点。
            if ( elem && !elem.length || elem === window ) {
                elem.addEventListener（类型，回调，假）；
            } else if ( elem && elem.length ) { //elem 是数组的一个节点
                for ( var i = 0; i < elem.length; i++ ) {
                    addEvent(elem[i], 类型, 回调);
                }
            }
        }
    } 否则 if ( document.attachEvent ) {
        返回函数（元素，类型，回调）{
            //如果elem存在并且是单个节点
            if ( elem && !elem.length || elem === window ) {
                elem.attachEvent('on'+type,
                    功能 （） {
                        callback.call(elem, window.event);
                });
            } else if ( elem && elem.length ){
                for ( var i = 0; i < elem.length; i++ ) {
                    addEvent(elem[i], 类型, 回调);
                }
            }
        }
    }
}）（ 这个文件 ）;

```

我的问题是这个和文档的参数是什么意思？它们都是真正的参数，将替换匿名函数中包含的窗口和文档的参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:26:29.683

这是一种称为即时函数的 JavaScript 模式。它采用以下形式：

```
 (function(param1, param2, ...) {
    /* ...  function body  ... */
 }(var1, var2)); 
```

你是对的，它涉及创建一个匿名函数，然后用一组变量调用它。

它允许开发人员创建一个没有变量泄漏的范围。JavaScript 只有全局和函数范围。在函数体之外声明的任何变量都自动在全局范围内。

立即函数避免了这个问题。

在这种情况下，与许多情况一样，立即函数将返回包含闭包内的一些内部变量的内容。这保护了它们，但使它们的值以受保护的方式可用。

在这种情况下，您将返回一个允许调用者将事件添加到 HTML 元素的函数。您通常会看到用于创建跨浏览器方法的即时函数。对立即函数的调用将执行所有浏览器方法嗅探，然后生成适当的跨浏览器方法。这意味着只进行一次嗅探。这使您不必在每次调用该方法时嗅探浏览器。

# c++ - C++ 错误处理模式

> ID：11366047
> 
> 赞同：3
> 
> 时间：2012-07-06T16:19:58.940
> 
> 标签：c++, error-handling

我们有一个庞大的代码库，其中包含大量执行此类操作的代码：

```
bool DoSomething(CString Value)
{
   if(Value == "bad")
   {
       AfxMessageBox("description of error");
       return false;
   }
   return true;
} 
```

甚至只是这个：

```
bool DoSomething(CString Value)
{
   if(Value == "bad")
   {
      return false;
   }
   return true;
} 
```

我们考虑了各种替代方案：

*   例外 - 基本上我们在此处描述的缺点出售：http: [//www.codeproject.com/Articles/38449/C-Exceptions-Pros-and-Cons](http://www.codeproject.com/Articles/38449/C-Exceptions-Pros-and-Cons)
*   传递一个用错误文本填充的附加字符串 ref parm - 但它需要在调用之前预先实例化错误字符串，并将批量添加到 parm 列表
*   填充“last_error”成员变量 - 这似乎遭受（imo）这里表达的缺点：[GetLastError() 是一种设计模式吗？是好的机制吗？](https://stackoverflow.com/questions/9099981/is-getlasterror-kind-of-design-pattern-is-it-good-mechanism)
*   传回一个枚举（或类似的），它可以映射到使用其他函数的错误描述 - 但这对于小函数和对象来说感觉“沉重”，并且还在发生错误的地方和发生错误的地方之间创建空间消息得到维护（尽管我想在多语言环境中他们会欣赏文本的集中化）。

所以我想知道我们是否可以创建一组如下所示的类：

```
class CResult
{
protected:
   CResult()
   {
      // Don't have to initialize because the derived class will do it
   }
public:
   operator bool() { return m_Result; };

   bool m_Result;
   CString m_Message;
};

class CSuccess : public CResult
{
public:
   CSuccess()
   {
       m_Result = true;
   }
};

class CFailure : public CResult
{
public:
   CFailure(const CString & Message)
   {
      m_Result = false;
      m_Message = Message;
   }
}; 
```

那么上面的代码可能如下所示：

```
CResult DoSomething(CString Value)
{
   if(Value == "bad")
   {
      return CFailure("description of error");
   }
   return CSuccess();
} 
```

我喜欢它的地方：

*   代码仍然可读并且错误信息保持在错误条件附近
*   程序员将更加被迫在错误条件下实际提供错误字符串（是的，他们可以提供空白，但这似乎是一个更严重的错误，imo）
*   调用者不必在函数调用之前创建任何专门的变量，并且仍然可以将函数结果视为布尔值 - 或者在错误未被忽略的情况下，轻松检索解释
*   下一个程序员可以通过查看函数定义来了解正在使用的错误模型

我看到的主要缺点是成功的开销更高，因为一个对象、一个字符串和一个布尔值都将被实例化——但在我们的应用程序中，很多时候有问题的代码对性能不敏感，例如验证用户输入等

我错过了其他一些大缺点吗？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:35:27.897

*将“错误*”分为两类会很有用：

**致命错误**

这些是恢复毫无意义的错误。

```
void check(bool cond, const string& msg)
{
  if (!cond)
  {
    // eventually log it somewhere
    std::cerr << "Fatal: " << msg << std::endl;
    exit(1);
  }
} 
```

* * *

**异常错误**

这些是您可以从中恢复并使程序保持运行状态的错误类型。

```
void check_ex(bool cond, const string& msg)
{
  if (!cond)
  {
    // eventually log it somewhere
    throw std::runtime_error(msg);
  }
} 
```

# php - 在 magento 的 pdo_mysql 适配器中缺少“超过锁定等待超时”处理？

> ID：11366048
> 
> 赞同：6
> 
> 时间：2012-07-06T16:20:08.580
> 
> 标签：php, mysql, magento, timeout

如果我比较两个 Magento 适配器类**Varien_Db_Adapter_Mysqli**和**Varien_Db_Adapter_Pdo_Mysql我可以发现方法****raw_query**的查询异常处理的一些差异。

```
<?php

class Varien_Db_Adapter_Mysqli extends Zend_Db_Adapter_Mysqli
{

//....

/**
 * Run RAW Query
 *
 * @param string $sql
 * @return Zend_Db_Statement_Interface
 */
public function raw_query($sql)
{
    $timeoutMessage = 'SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded;      try restarting transaction';
    $tries = 0;
    do {
        $retry = false;
        try {
            $this->clear_result();
            $result = $this->getConnection()->query($sql);
            $this->clear_result();
        } catch (Exception $e) {
            if ($tries < 10 && $e->getMessage() == $timeoutMessage) {
                $retry = true;
                $tries++;
            } else {
                throw $e;
            }
        }
    } while ($retry);

    return $result;
}

//....

} 
```

如果我将此与 Varien_Db_Adapter_Pdo_Mysql 中的 equal 方法进行比较，我会发现另一个错误处理。它不是检查超时，而是检查丢失的连接。

```
<?php

class Varien_Db_Adapter_Pdo_Mysql  extends Zend_Db_Adapter_Pdo_Mysql implements Varien_Db_Adapter_Interface
{

//....

/**
 * Run RAW Query
 *
 * @param string $sql
 * @return Zend_Db_Statement_Interface
 * @throws PDOException
 */
public function raw_query($sql)
{
    $lostConnectionMessage = 'SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query';
    $tries = 0;
    do {
        $retry = false;
        try {
            $result = $this->query($sql);
        } catch (Exception $e) {
            // Convert to PDOException to maintain backwards compatibility with usage of MySQL adapter
            if ($e instanceof Zend_Db_Statement_Exception) {
                $e = $e->getPrevious();
                if (!($e instanceof PDOException)) {
                    $e = new PDOException($e->getMessage(), $e->getCode());
                }
            }
            // Check to reconnect
            if ($tries < 10 && $e->getMessage() == $lostConnectionMessage) {
                $retry = true;
                $tries++;
            } else {
                throw $e;
            }
        }
    } while ($retry);

    return $result;
}

//....

} 
```

那是对的吗？检查两个失败案例不是更好吗？

例子：

```
/**
 * Run RAW Query
 *
 * @param string $sql
 * @return Zend_Db_Statement_Interface
 * @throws PDOException
 */
public function raw_query($sql)
{
    $lostConnectionMessages = array(
        'SQLSTATE[HY000]: General error: 2013 Lost connection to MySQL server during query',
        'SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction',
    );
    $tries = 0;
    do {
        $retry = false;
        try {
            $result = $this->query($sql);
        } catch (Exception $e) {
            // Convert to PDOException to maintain backwards compatibility with usage of MySQL adapter
            if ($e instanceof Zend_Db_Statement_Exception) {
                $e = $e->getPrevious();
                if (!($e instanceof PDOException)) {
                    $e = new PDOException($e->getMessage(), $e->getCode());
                }
            }
            // Check to reconnect
            if ($tries < 10 && in_array($e->getMessage(), $lostConnectionMessages)) {
                $retry = true;
                $tries++;
            } else {
                throw $e;
            }
        }
    } while ($retry);

    return $result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:56:36.537

我会说，是的，他们也应该检查一下。在[Magento2 中，他们甚至删除了 lost-connection reconnect](https://github.com/magento/magento2/blob/3330e258c428b08d5e5e64a4fedbd2acb0cf1396/lib/Varien/Db/Adapter/Pdo/Mysql.php#L342)，但在 MysqlI 适配器中它仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T09:55:48.243

这取决于（总是一个很好的答案:)

我认为丢失的连接应该被视为系统设置中的错误。解决它的方法`Varien_Db_Adapter_Pdo_Mysql`隐藏了缓慢查询时间的根源。我宁愿看到真正的异常，然后让 Magento 尝试自动重新建立连接。

锁定等待超时也是如此。我想知道是否发生此类超时。用自动重试掩盖它们可能会使错误“消失”，但不能解决真正的问题。

这样的自动恢复代码至少应该可以通过系统配置中的某个选项进行配置，例如“启用数据库查询恢复模式”或类似的东西，并且默认为“禁用”。

# python - 如何将一个 URL 的请求分派给多个线程？

> ID：11366050
> 
> 赞同：4
> 
> 时间：2012-07-06T16:20:11.057
> 
> 标签：python, multithreading, flask

这是一个测试应用程序：

```
#!/usr/bin/env python

from flask import Flask
from time import sleep

application = Flask(__name__)
application.debug = True

@application.route('/a')
@application.route('/b')
@application.route('/c')
def a():
    sleep(10)
    return 'Hello world.'

if __name__ == '__main__':
    application.run() 
```

此应用程序部署在 Apache 上：

```
WSGIDaemonProcess Test processes=2 threads=15 display-name=%{GROUP}
WSGIProcessGroup Test 
```

如果你

*   在 00:00 请求 /a
*   在 00:01 请求 /b
*   在 00:02 请求 /c

， 你会

*   在 00:10 收到 /a 的响应
*   在 00:11 收到来自 /b 的响应
*   在 00:12 收到来自 /c 的响应

但是如果你

*   在 00:00 请求 /a
*   在 00:01 请求 /a
*   在 00:02 请求 /a

， 你会

*   在 00:10 收到 /a 的响应
*   在 00:20 收到 /a 的回复
*   在 00:30 收到 /a 的回复

所以我猜想对一个 URL 的每个请求都在一个线程中处理。现在我打算开发一个长拉服务器，我想我需要将每个请求分派到一个独立的线程，以避免阻塞后续请求。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:09:32.603

这个问题已经解决了。我的猜测是不正确的，事实是：
在 Chrome 浏览器中，如果两个请求由相同的协议、主机名、端口和路径组成，那么后面的请求将不会发送，直到前面的请求关闭。
被阻止的东西不是服务器，而是浏览器。

# html - 浮动元素可以从其包装元素继承背景颜色吗？

> ID：11366051
> 
> 赞同：1
> 
> 时间：2012-07-06T16:20:15.040
> 
> 标签：html, css

```
<html>
<head>  
    <style>
        #wrap{
            width: 800px;
            background-color: black;
            color: red;
        }

        #right{
            float: right;
        }
    </style>
</head>
<body>
    <div id="wrap">
        <div id="right">
            <h1>RIGHT</h1>
        </div>
    </div>
</body> 
```

因为在这个例子中，只有文本颜色被继承，而不是背景颜色。有人可以解释我为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:23:57.037

如果未设置，该`color`属性在[CSS 标准](http://www.w3.org/TR/CSS21/colors.html#colors)中定义为从父级继承（请注意“*继承：*是”部分）。该[`background-color`属性](http://www.w3.org/TR/CSS21/colors.html#background-properties)不是（默认为`transparent`，并且具有“*继承：*否”）。不过，您总是可以这样做：

```
#right
{
    float: right;
    background-color: inherit;
} 
```

当您设置`background-color`为 时`inherit`，它会执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:23:05.850

您可以添加`overflow:auto;`到 #wrap 来完成此操作：

```
#wrap{
    width: 800px;
    background-color: black;
    color: red;
    overflow:auto;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/VREHZ/)**

# android - 对 property_get 的未定义引用

> ID：11366054
> 
> 赞同：3
> 
> 时间：2012-07-06T16:20:34.153
> 
> 标签：android, android-ndk

我的目标是进行微调以找到适当的线程优先级。

我关注的线程位于 /hardware/my_company/codec/openmax_il/ 下

我修改了2个文件

1.  安卓.mk

    在 LOCAL_C_INCLUDES 列表中添加“$(TOP)/system/core/include”，如下所示

    ```
    LOCAL_C_INCLUDES:= \

        blur blur blur
        $(TOP)/hardware/my_company/camera/v4l2_camerahal \
        $(TOP)/system/core/include 
    ```

2.  在我的源文件中。

    ```
    #include <cutils/properties.h>

    int componentInit(blur blur blur)
    {
       int ret = 0;

       blur blur blur

       // To find proper thread priority
       char value[92];
       property_get("omx.video_enc.priority", value, "0");
       setVideoEncoderPriority(atoi(value));

       return ret;
    } 
    ```

但是，我遇到了链接错误

```
 error: undefined reference to 'property_get'
 collect2: ld returned 1 exit status 
```

如果有人对此有所帮助，那对我有好处。:)

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T15:16:35.193

听起来您想`__system_property_get()`使用`<sys/system_properties.h>`. 从那个标题：

```
/* Look up a system property by name, copying its value and a
** \0 terminator to the provided pointer.  The total bytes
** copied will be no greater than PROP_VALUE_MAX.  Returns
** the string length of the value.  A property that is not
** defined is identical to a property with a length 0 value.
*/
int __system_property_get(const char *name, char *value); 
```

此签名并不完全是您想要使用的，因为在未定义属性的情况下您有一个默认值。由于`__system_property_get()`在未定义属性的情况下返回 0，因此您可以轻松地自行补充。

这是我在自己的本机代码中解决问题的方法，它对我来说效果很好（尽管它缺少缓冲区溢出检查，这将是一个更好的解决方案）：

```
#include <sys/system_properties.h>
int android_property_get(const char *key, char *value, const char *default_value)
{
    int iReturn = __system_property_get(key, value);
    if (!iReturn) strcpy(value, default_value);
    return iReturn;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T07:59:50.170

您必须在源文件中添加

```
#include <cutils/properties.h> 
```

并链接到 android.mk 中的 libcutils：

```
LOCAL_STATIC_LIBRARIES := libcutils libc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-14T12:17:58.957

您需要添加：

```
 #include <cutil/properties.h> 
```

并链接 Andorid.mk 中的 libcutils

```
LOCAL_WHOLE_STATIC_LIBRARIES := libcutils` 
```

# ios - 在 UISplitViewController 顶部显示模态？

> ID：11366058
> 
> 赞同：0
> 
> 时间：2012-07-06T16:21:09.207
> 
> 标签：ios, modal-dialog, uisplitviewcontroller

这个问题以前被问过，但我找到的答案都不是正确的，或者至少它们在 iOS 5 上不起作用

我试图在我的 UISplitViewController 上显示一个模式（在 iOS 5 上），到目前为止我没有运气。大多数帖子都提到从我的 mainViewController 呈现模式，这似乎对我不起作用。

我尝试从 UISplitViewController 和我的主 UIViewController 使用 segue 或在代码中手动呈现模态，它总是给我以下错误：

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图以模态方式呈现拆分视图控制器**

这个错误是错误的，我没有尝试以模态方式显示 splitView，我试图从 splitView 显示模态

还有其他解决方案吗？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   NSLog(@"%@", self.window.rootViewController);
   // It prints out UISplitViewController

    // I tried this
    UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *viewController = [storyBoard instantiateViewControllerWithIdentifier:@"LoginViewController"];
    [self.window.rootViewController presentModalViewController:viewController animated:NO];

    // Also tried this
    [self.window.rootViewController performSegueWithIdentifier:@"LoginSegue"];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:33:24.050

错误消息提示您`loginViewController`是`UISplitViewController`. 那行不通，因为您无法以模态方式显示拆分视图。

否则我在您的代码中看不到任何错误，并且我使用`presentModalViewController:animated:`.

# python - 处理生成器中抛出的异常

> ID：11366064
> 
> 赞同：67
> 
> 时间：2012-07-06T16:21:29.633
> 
> 标签：python, exception, generator

我有一个生成器和一个使用它的函数：

```
def read():
    while something():
        yield something_else()

def process():
    for item in read():
        do stuff 
```

如果生成器抛出异常，我想在消费者函数中处理它，然后继续使用迭代器，直到它耗尽。请注意，我不想在生成器中有任何异常处理代码。

我想到了类似的东西：

```
reader = read()
while True:
    try:
        item = next(reader)
    except StopIteration:
        break
    except Exception as e:
        log error
        continue
    do_stuff(item) 
```

但这对我来说看起来很尴尬。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-06T16:26:30.520

当生成器抛出异常时，它会退出。您无法继续使用它生成的物品。

例子：

```
>>> def f():
...     yield 1
...     raise Exception
...     yield 2
... 
>>> g = f()
>>> next(g)
1
>>> next(g)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in f
Exception
>>> next(g)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration 
```

如果控制了生成器代码，就可以在生成器内部处理异常；如果没有，您应该尽量避免发生异常。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-01-13T14:07:00.883

这也是我不确定我是否正确/优雅地处理的事情。

我所做的是`yield`从`Exception`发电机中取出，然后将其提升到其他地方。喜欢：

```
class myException(Exception):
    def __init__(self, ...)
    ...

def g():
    ...
    if everything_is_ok:
        yield result
    else:
        yield myException(...)

my_gen = g()
while True:
    try:
        n = next(my_gen)
        if isinstance(n, myException):
            raise n
    except StopIteration:
        break
    except myException as e:
        # Deal with exception, log, print, continue, break etc
    else:
        # Consume n 
```

这样我仍然可以在不引发异常的情况下继承异常，这会导致生成器函数停止。主要缺点是我需要`isinstance`在每次迭代时检查产生的结果。我不喜欢可以产生不同类型结果的生成器，但将其用作最后的手段。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-04T02:27:57.743

我需要解决这个问题几次，并在搜索其他人做了什么后发现了这个问题。

* * *

# 投掷而不是举起

一个选项 - 需要稍微重构一些东西 - 将是`throw`生成器中的异常（到另一个错误处理生成器）而不是`raise`它。这可能是这样的：

```
def read(handler):
    # the handler argument fixes errors/problems separately
    while something():
        try:
            yield something_else()
        except Exception as e:
            handler.throw(e)
    handler.close()

def err_handler():
    # a generator for processing errors
    while True:
        try:
            yield
        except Exception1:
            handle_exc1()
        except Exception2:
            handle_exc2()
        except Exception3:
            handle_exc3()
        except Exception:
            raise

def process():
    handler = err_handler()
    handler.send(None)  # initialize error handler
    for item in read(handler):
        do stuff 
```

这并不总是最好的解决方案，但它肯定是一种选择。

* * *

# 广义解

你可以用装饰器让它变得更好一点：

```
class MyError(Exception):
    pass

def handled(handler):
    """
    A decorator that applies error handling to a generator.

    The handler argument received errors to be handled.

    Example usage:

    @handled(err_handler())
    def gen_function():
        yield the_things()
    """
    def handled_inner(gen_f):
        def wrapper(*args, **kwargs):
            g = gen_f(*args, **kwargs)
            while True:
                try:
                    g_next = next(g)
                except StopIteration:
                    break
                if isinstance(g_next, Exception):
                    handler.throw(g_next)
                else:
                    yield g_next
        return wrapper
    handler.send(None)  # initialize handler
    return handled_inner

def my_err_handler():
    while True:
        try:
            yield
        except MyError:
            print("error  handled")
        # all other errors will bubble up here

@handled(my_err_handler())
def read():
    i = 0
    while i<10:
        try:
            yield i
            i += 1
            if i == 3:
                raise MyError()
        except Exception as e:
            # prevent the generator from closing after an Exception
            yield e

def process():
    for item in read():
        print(item)

if __name__=="__main__":
    process() 
```

输出：

```
0
1
2
error  handled
3
4
5
6
7
8
9 
```

然而，这样做的缺点是您仍然必须`Exception`在生成器中进行通用处理，这可能会产生错误。不可能解决这个问题，因为在生成器中引发任何异常都会关闭它。

* * *

# 一个想法的核心

最好有某种`yield raise`声明，它允许生成器在引发错误后继续运行（如果可以的话）。然后你可以写这样的代码：

```
@handled(my_err_handler())
def read():
    i = 0
    while i<10:
        yield i
        i += 1
        if i == 3:
            yield raise MyError() 
```

...`handler()`装饰器看起来像这样：

```
def handled(handler):
    def handled_inner(gen_f):
        def wrapper(*args, **kwargs):
            g = gen_f(*args, **kwargs)
            while True:
                try:
                    g_next = next(g)
                except StopIteration:
                    break
                except Exception as e:
                    handler.throw(e)
                else:
                    yield g_next
        return wrapper
    handler.send(None)  # initialize handler
    return handled_inner 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-19T19:00:11.310

在 Python 3.3 之后，用于从原始生成器捕获异常的代码将非常简单：

```
from types import GeneratorType

def gen_decorator(func):
    def gen_wrapper(generator):
        try:
            yield from generator  # I mean this line!
        except Exception:
            print('catched in gen_decorator while iterating!'.upper())
            raise

    def wrapper():
        try:
            result = func()

            if isinstance(result, GeneratorType):
                result = gen_wrapper(result)

            return result
        except Exception:
            print('catched in gen_decorator while initialization!'.upper())
            raise

    return wrapper 
```

以及使用示例：

```
@gen_decorator
def gen():
    x = 0
    while True:
        x += 1

        if x == 5:
            raise RuntimeError('error!')

        yield x

if __name__ == '__main__':
    try:
        for i in gen():
            print(i)

            if i >= 10:
                print('lets stop!')
                break
    except Exception:
        print('catched in main!'.upper())
        raise 
```

# javascript - Javascript str_replace 一次

> ID：11366073
> 
> 赞同：2
> 
> 时间：2012-07-06T16:21:54.393
> 
> 标签：javascript

是否有任何直接的方法可以在一条指令中替换多个字符的 javascript 中的字符，并且每个指令都有不同的替换，就像在 PHP 中一样？

我的意思是，类似：

```
replace('áéíóú', 'aeiou'); 
```

将 á 替换为 a，将 é 替换为 e，将 í 替换为 i，以此类推...

非常感谢提前，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:26:21.550

使用带有全局标志的正则表达式：

```
var map = {
    "á": "a",
    "é": "e",
    "í": "i",
    "ó": "o",
    "ú": "u"
};

"áéíóú".replace(/[áéíóú]/g, function(m){
    return map[m];
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T16:26:55.617

并不真地。试试这个：

```
var map = {'á': 'a', 'é': 'e', 'í': 'i', 'ó': 'o', 'ú': 'u'};
var result = 'áéíóú'.replace(/./g, function(m) { return map[m] ? map[m] : m; }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T16:27:43.527

是的，你可以在 JavaScript 中做到这一点：

```
var str = "áéíóú";
var result = str.replace(/[áéíóú]/g, function(m) {
    switch (m) {
        case "á":
            return "a";
        case "é":
            return "e";
        case "í":
            return "i";
        case "ó":
            return "o";
        case "ú":
            return "u";
    }
}); 
```

另一种方法是查找表：

```
var replacements = {
    "á": "a",
    "é": "e",
    "í": "i",
    "ó": "o",
    "ú": "u"
};

var str = "áéíóú";
var result = str.replace(/[áéíóú]/g, function(m) {
    return replacements[m];
}); 
```

那些工作是因为`replace`可以接受正则表达式，并且“替换”可以是一个函数。该函数接收匹配的字符串作为参数。如果函数没有返回任何东西，或者返回`undefined`，则保留原来的；如果它返回其他东西，则使用它来代替。正则表达式`/[áéíóú]/g`是一个“字符”类，意思是“这些字符中的任何一个”，`g`末尾的 表示“全局”（整个字符串）。

# django - 南多对多迁移

> ID：11366080
> 
> 赞同：0
> 
> 时间：2012-07-06T16:22:49.610
> 
> 标签：django, django-south

我有一个现有的 Django 模型，它引用代理模型 users.User 作为 ManyToMany 字段。我最近为模型创建了一个初始的南迁移，并使用 --fake 标志毫无问题地应用它。

现在，如果我重新克隆我的存储库，运行 syncdb，然后尝试应用我的迁移，当它使用 ManyToMany 字段处理模型时，我会收到这个 South 错误：

```
Running migrations for <app>:
 - Migrating forwards to 0001_initial.
 > <app>:0001_initial
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
... (traceback)
raise KeyError("The model '%s' from the app '%s' is not available in this migration." %    (model, app))
KeyError: "The model 'user' from the app 'users' is not available in this migration." 
```

对于这个特定的应用程序，我是否需要每次都伪造迁移？有人有这个错误的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:39:34.437

为什么 users.User 是代理模型？我认为，您必须在克隆存储库中仅使用不带 syncdb 的南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T20:55:07.430

这是因为 South（在当前版本 0.8.4 中）无法为与代理模型的多对多关系创建正确的迁移。[这个问题有一张公开的票](http://south.aeracode.org/ticket/1070)。尽管您可以使用具有直通类的 ManyToMany 关系来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T13:08:45.420

因为它仍然是一个未解决的问题（在 South 存储库中，就像在我们的程序员生活中一样 :)），这是我通常的解决方法：

## 1\. 新装置

```
django-admin.py syncdb --all
django-admin.py migrate --fake 
```

## 2\. 修复迁移（手动）

（前）

```
 db.create_table(m2m_table_name, (
        ('id', models.AutoField(verbose_name='ID', primary_key=True, auto_created=True)),
        ('message', models.ForeignKey(orm[u'email.message'], null=False)),
        ('avcpuser', models.ForeignKey(orm[u'profiles.avcpuser'], null=False)) # this is the troublesome proxy model (profiles.avcpuser is my proxy towards auth.User
    )) 
```

（后）

```
 db.create_table(m2m_table_name, (
        ('id', models.AutoField(verbose_name='ID', primary_key=True, auto_created=True)),
        ('message', models.ForeignKey(orm[u'email.message'], null=False)),
        ('avcpuser', models.ForeignKey(orm[u'auth.User'], null=False)) # replace it with a ForeignKey to the original model
    )) 
```

老实说，我不是 100% 确定这个修复是“合法的”并且可以被列为“最佳实践”，但到目前为止，它并没有给我带来任何维护现有和新项目的问题。为了我的辩护，我想到了这个想法，注意到当 South 为代理模型生成一对多的 ForeignKey 时，它会针对原始模型执行此操作。

# asp.net - IIS 7.5 中的 .NET 编译引发与 web.config 相关的错误

> ID：11366085
> 
> 赞同：1
> 
> 时间：2012-07-06T16:23:02.213
> 
> 标签：asp.net, web-config, windows-server-2008, iis-7.5

> **可能重复：**
> [无法识别的元素“folderLevelBuildProviders”？](https://stackoverflow.com/questions/4274083/unrecognized-element-folderlevelbuildproviders)

我已经使用 Windows 2008 RC2 在 Amazon AWS 上设置了一个新的 EC2 Windows 实例。我已经安装了 IIS 7.5 角色和所需的模块。我通过 ftp 上传了我的网站。现在我在 IIS 管理器中单击“默认网站主页”的“.NET 编译”按钮，但出现错误：

```
Filename: \\?\C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\web.config
Line number: 141
Error: Unrecognized element 'folderLevelBuildProviders' 
```

我遇到了几个建议，但仍然无法解决这个问题。我所做的是将应用程序池更改为 FrameWork 4 而不是 2。

我在 ASP.NET 4 框架中开发了我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:17:08.553

这听起来像 4.0 没有正确安装。您引用的 web.config 文件不是您的应用程序配置，而是 .NET 它本身。请检查 4.0 是否安装正确，或重新安装。确保您使用 IIS 注册 .net 4.0（如果您不这样做，您将无法选择您的 APP 池）

# internet-explorer-9 - 带有 FireBug 的 IE9

> ID：11366091
> 
> 赞同：0
> 
> 时间：2012-07-06T16:23:29.997
> 
> 标签：internet-explorer-9, firebug

我很难让 IE9 与 FireBug 一起工作。我在网上查看了许多资源，但无法正常工作。

有人可以提供有关如何让 FireBug 在 IE9 上运行的分步指南。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:33:23.043

查看用于 IE9 的 IE 开发人员工具栏：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=18359) 18359，或 firebug lite： http: [//getfirebug.com/firebuglite](http://getfirebug.com/firebuglite)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:17:35.283

更好的是，如果您尝试调试 jsp 或 html 页面，只需将此标记粘贴到文件中：

```
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> 
```

# iphone - UIViewControllerContainment 中的 viewDidLoad 和设置帧大小

> ID：11366099
> 
> 赞同：1
> 
> 时间：2012-07-06T16:23:49.903
> 
> 标签：iphone, objective-c, ios, ipad, uiviewcontroller

所以我有一个`UIViewController`inside a`UIViewController`和 inside a `UIViewController`，我正在尝试调整它的框架。但是，当我调用时`setFrame:`，它会调用`viewDidLoad`我正在尝试调整框架的特定视图控制器。但是当时`frameSize`不是我设置的那个。在此`viewDidLoad`我还调用了一个名为 的私有方法`loadDataFromServer`，它首先从内存中提取数据，然后调用服务器。因为它是从内存中加载数据，所以速度非常快，基本上是在 viewDidLoad 完成之前，因此还没有调整帧大小。因此，我首先看到大小/布局错误的视图，然后在从服务器获取数据后进行调整，此时`viewDidLoad`已完成并且框架调整良好。

如果我将`loadDataFromServer`呼叫移至，`viewDidAppear`那么一切看起来都很好。问题是我不确定何时`viewDidAppear`被调用。是否调用`viewDidLoad`过一次？或者它是在之后调用的`viewWillAppear`？有什么想法/解决方法吗？

```
 ContainerViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"ContainerViewController"];
    vc.delegate = self;

    UINavigationController *newsfeedNavController = [[UINavigationController alloc] initWithRootViewController:vc];

    [self addChildViewController:newsfeedNavController];
    newsfeedNavController.view.frame = CGRectMake(0, 0, self.view.frameWidth, self.view.frameHeight);
    [self.view addSubview:newsfeedNavController.view];
    [newsfeedNavController didMoveToParentViewController:self];
    [newsfeedNavController release]; 
```

# windows - 从目录中获取 x 个文件（批处理、windows）

> ID：11366105
> 
> 赞同：0
> 
> 时间：2012-07-06T16:24:06.327
> 
> 标签：windows, file, batch-file, directory, cmd

我有一个包含数千个文件的目录。

有没有办法只获取 x 文件？（最好用于批处理文件）

但是（这就是为什么它不是我已经找到答案的相同问题之一）

无需“dir”命令处理整个目录内容或使用“for”循环。

尽管“for”循环（即 for %%a in ( *.txt) do [something]）与计数器相结合会起作用，但这样做需要相当长的时间。我只能假设*“for”循环中的文件“集”（即（.txt））首先获取整个内容并对其进行迭代。

如果我可以在 x 返回值之后停止“dir”命令，那会很好，但我想不出办法来做到这一点（甚至可能还是我只是回答我的问题但缺乏编码的知识它？）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:15:38.123

您对 FOR 循环有误。只要您不使用 /R 选项，它就非常快。（我在 XP、Vista 和 Windows 7 上测试过）

我创建了一个包含 20,000 个文件的测试目录并运行以下脚本 - 它打印出第 10 个文件并在眨眼间完成：

```
@echo off
set n=0
for %%F in (*) do (
  echo %%F
  set /a "n+=1, 1/(10-n)" 2>nul || goto :break
)
:break 
```

我通过故意除以 0 来检测何时达到 10 个文件以生成错误。我本可以使用延迟扩展并测试计数器的值，但`%%F`如果文件名包含`!`字符并且启用了延迟扩展，则无法正确打印。

因此，与您的看法相反，一个简单的 FOR 不会*在*迭代循环之前收集所有值。

您可能对 FOR /F 变体感到困惑：`for /f "delims=" %%F in ('dir /b /a-d *') do ...`. 在这种情况下，DIR 命令在其自己的 shell 中执行，并且在任何 FOR 迭代之前获得整个结果*集。*

使用 FOR 解决方案需要注意的一件事 - FOR /R 选项似乎有可能减慢速度。我修改了上面的脚本以使用 /R 选项，然后在我的`C:\`根目录上运行它。它很快打印了它找到的前 10 个文件，但随后似乎挂了很长时间，然后终于完成了。我不知道如何证明这一点，但我认为 FOR 循环正在浪费时间迭代我`C:`驱动器上的所有目录，即使它没有对它们做任何事情。

***编辑***

我刚刚阅读了 PA. 对原始问题的评论。他有一个很好的观点——在某种程度上，FOR 和 DIR 都必须读取整个目录，以便执行隐式排序操作以正确顺序返回文件。但是，他也指出这是在非常低的水平上完成的。我的观点是 FOR 命令在开始迭代之前不需要等待所有值都返回（或为此而跳出循环）。

***编辑 2*** FOR /F 行为可能是福也可能是祸。对于这个应用程序，这是一个诅咒。但有时您在处理目录时会更改目录的内容。FOR /F 变体可防止您看到命令启动后发生的任何更改。简单的 FOR 命令有时可以在开始迭代后看到目录内容的变化。

FOR 命令以块的形式缓冲迭代 - 它会迭代它在缓冲区中的所有文件，但是当缓冲区为空并返回操作系统以获取下一个块时，它可以看到目录发生的更改. 这是一个演示该行为的测试脚本：

```
@echo off
md myTemp
for /l %%N in (1001 1 6000) do echo a>myTemp\%%N.txt
for /f %%N in ('dir /b myTemp\* ^| find /c /v ""') do Echo Starting with %%N files
set cnt=0
(
  for %%F in (myTemp\*) do (
    echo %%F
    del /q myTemp\* 2>nul
    set /a cnt+=1
  )
)> test_for.out
echo Only %cnt% files were listed by FOR
echo(

for /l %%N in (1001 1 6000) do echo a>myTemp\%%N.txt
for /f %%N in ('dir /b myTemp\* ^| find /c /v ""') do Echo Starting with %%N files
set cnt=0
(
  for /f %%F in ('dir /b /a-d myTemp\*') do (
    echo %%F
    del /q myTemp\* 2>nul
    set /a cnt+=1
  )
)> test_for_f.out
echo All %cnt% files were listed by FOR /F

rd myTemp 
```

结果如下：

```
Starting with 5000 files
Only 743 files were listed by FOR

Starting with 5000 files
All 5000 files were listed by FOR /F 
```

两个循环都从 5000 个文件开始，并在第一次迭代后删除所有文件。FOR /F 仍会处理启动时目录中的所有 5000 个文件名。FOR 仅处理适合缓冲区的 743 个文件名。

注意：我在 Windows 7 上获得了上述结果。我还在 Vista 和 XP 上进行了测试，除了在 FOR 循环中仅列出 35 个文件而不是 743 个文件之外，结果都相同。

# php - 在 PHP 中转义电子邮件中的危险字符

> ID：11366106
> 
> 赞同：-1
> 
> 时间：2012-07-06T16:24:08.673
> 
> 标签：php, email, escaping

有没有办法逃避可被利用来破坏通过 Web 表单发送的电子邮件的危险字符？我正在制作一个带有注册脚本的系统，并希望保护电子邮件字段不被注入庞大的邮件列表。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T16:27:09.117

我相信`htmlspecialchars()`应该做的伎俩。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T16:35:37.377

无视我的其他回答。我读错了你的问题。

这是我一直用来验证电子邮件是否符合 RFC 标准的函数：

```
preg_match("/^([a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*)@((?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9]))?$/i",$email) 
```

# javascript - 在 C# 端动态更改脚本标记源

> ID：11366110
> 
> 赞同：3
> 
> 时间：2012-07-06T16:24:37.517
> 
> 标签：javascript, asp.net-4.0

如何动态更改`<script>` `src`属性`Page_Load`？

当我说动态时，我的意思是它是同一个页面`Default.aspx`，但每次刷新`js`都会引用不同的源。选择哪个文件背后的逻辑无关紧要`js`，只关心设置它的机制。

我试过：

`<script id="script1" runat="server" language="javascript" src="a.js" type="text/javascript"></script>`

但在侧面`script1`不可用。`.cs`我知道我可以`.aspx`通过使用`<% %>`标签来改变它，但我不想让我的逻辑像这样嵌入到我的`.aspx`. 必须有办法做到这`.cs`一点`Page_Load`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T16:30:45.483

在您的页面加载处理程序上，您可能会有这样的东西

```
string csurl = null;
string csname = "myscript";
if (condition)
{
    csurl = "~/a.js";
}
else    
{  
    csurl = "~/b.js";
}

if (!Page.ClientScript.IsClientScriptIncludeRegistered(cstype, csname))
{
    Page.ClientScript.RegisterClientScriptInclude(
        this.GetType(), 
        csname, 
        ResolveClientUrl(csurl));
} 
```

或者

```
 string csurl = null;
 if (condition)
 {
     csurl = "a.js";
 }
 else    
 {  
     csurl = "b.js";
 }
 Literal script = new Literal();
 script.Text = string.Format(
     @"<script src=""{0}"" type=""text/javascript""></script>",csurl);
 Page.Header.Controls.Add(script); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T16:28:46.590

有几种方法可以做到这一点。一种方法是在您的代码隐藏中创建一个`protected`or方法，该方法返回 a ，该方法根据您的标准将正确的 URL 返回到您的 Javascript。然后，只需从您的标记中调用该方法，如下所示：`public``string`

```
<script language="javascript" src="<%=GetJavaScriptUrl() %>" type="text/javascript"></script> 
```

此示例假定您在代码隐藏中调用该方法`GetJavaScriptUrl`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:28:34.960

不幸的是，我认为除了使用`<%= %>`.

除非有人知道不同（如果有，请发表评论，我会更改）`runat="server"`在块上使用属性`<script>`将意味着该块将在服务器端*执行*。

**更新**

对不起，稍微误解了你的问题。

我以为你是说你不想用来`<% %>`设置块的`src`属性`<script>`。我现在明白你的意思是`<script>`为每个文件创建单独的块，通过逻辑`<%If x Then%><%Else%><%End If%>`块显示。

正如其他人已经说过的那样（我已经暗示过），您可以在代码隐藏中使用 GetSrcPath 方法中的逻辑来设置`src`属性。`<%=GetSrcPath()%>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:45:51.450

只需使用脚本管理器：

例如，

```
string jsName = condition ? "a.js" : "b.js";

ScriptManager.GetCurrent(this).Scripts.Add(new ScriptReference(jsName)); 
```

# java - “contentId 是必需的！” 使用 ZK 框架

> ID：11366121
> 
> 赞同：1
> 
> 时间：2012-07-06T16:25:24.837
> 
> 标签：java, tomcat, jetty, zk

我正在使用 ZK Framework (v6.0.1) 开发具有文件上传功能的 Web 应用程序。

在我将war文件部署到Tomcat后，点击按钮并将文件上传到Web服务器，它显示“ **contentId is required！** ”错误消息，但**Tomcat的catalina.out上没有显示任何错误**，我期待看到堆栈跟踪，我无法从 Tomcat 的日志中得到任何线索。

我使用的部署环境：

*   太阳 JDK 6u29
*   雄猫 7.0.28
*   ZK EE 6.0.1

注意：够奇怪的。我无法获得“需要 contentId！” **使用run-jetty-run** Eclipse 插件时出错，**这是否意味着仅当我使用 Tomcat 作为 Web 容器时才会出现此问题**？

# oracle - 在多列搜索中获得独特的结果

> ID：11366123
> 
> 赞同：0
> 
> 时间：2012-07-06T16:25:38.220
> 
> 标签：oracle, plsql

在查询中正确限制我的结果时遇到问题。我有一个用户表，其中包含用户名、密码、名字/姓氏等字段。该字段中的主键是 user_id。我还有一张禁止用户表，其中还有一个主键 user_id。我的查询理想地显示所有用户数据，然后根据他们的 user_id 是否显示在“禁止用户”表中显示他们的“禁止状态”。我目前对此进行的查询如下：

```
select APEX_ITEM.CHECKBOX(1,gs_users.user_id) checkbox,
 "GS_USERS"."USERNAME" as "USERNAME",
 "GS_USERS"."FIRST_NAME" as "FIRST_NAME",
 "GS_USERS"."LAST_NAME" as "LAST_NAME",
 "GS_USERS"."ADMIN_FLAG" as "ADMIN",
 "GS_USERS"."EMAIL" as "EMAIL",
    CASE
      WHEN "GS_USERS"."USER_ID" = "GS_BANNED_USERS"."USER_ID" then 'Banned'
       else 'Unbanned'
    END status
from     
 "GS_USERS" "GS_USERS",
     "GS_BANNED_USERS" "GS_BANNED_USERS" 
```

不幸的是，这会导致大量重复值。在过去的情况下，我能够使用 ROWID 获得我独特的结果，但我不确定当 case 语句中的自定义列时如何工作。有没有办法得到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:31:29.693

没有 WHERE 子句，因此您在两个表之间进行笛卡尔积。

试试这个外连接：

```
select APEX_ITEM.CHECKBOX(1,gs_users.user_id) checkbox,
 "GS_USERS"."USERNAME" as "USERNAME",
 "GS_USERS"."FIRST_NAME" as "FIRST_NAME",
 "GS_USERS"."LAST_NAME" as "LAST_NAME",
 "GS_USERS"."ADMIN_FLAG" as "ADMIN",
 "GS_USERS"."EMAIL" as "EMAIL", 
 DECODE("GS_BANNED_USERS"."USER_ID",NULL,'Unbanned','Banned') as status
from     
 "GS_USERS" "GS_USERS",
     "GS_BANNED_USERS" "GS_BANNED_USERS"
where GS_USERS.USER_ID = GS_BANNED_USERS.USER_ID (+); 
```

# flash - Flash CS6 项目面板错误 Error #2032: Stream Error

> ID：11366127
> 
> 赞同：2
> 
> 时间：2012-07-06T16:25:51.660
> 
> 标签：flash

卸载 CS5.5 并安装 CS6 后，我的项目选项卡坏了！这是它显示的内容：

```
Error #2032: Stream Error. URL: file:///C|/Users/Eric/AppData/Local/Adobe/Flash CS6/en_US/Configuration/WindowSWF/framework_4.5.1.21328.swz 
```

有谁知道如何在 Flash 中重置项目的东西？我找不到它的地方一定有一个配置文件！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T10:16:20.327

[您可以在 URL http://download.cnet.com/Adobe-Flex-SDK/3000-2383_4-10644675](http://download.cnet.com/Adobe-Flex-SDK/3000-2383_4-10644675.html)的 Adob​​e Flex SDK 4.5.1 中找到 framework_4.5.1.21328.swz 和另一个文件 mx_4.5.1.21328.swz [.html](http://download.cnet.com/Adobe-Flex-SDK/3000-2383_4-10644675.html)。只需将这两个文件复制到您显示的路径即可。

# php - 学生成绩报告

> ID：11366128
> 
> 赞同：0
> 
> 时间：2012-07-06T16:25:53.987
> 
> 标签：php, mysql

请帮我写这段代码我想显示这样的表格 [http://imageshack.us/photo/my-images/443/reportw.jpg/](http://imageshack.us/photo/my-images/443/reportw.jpg/)

从三个数据库表生成取决于学生证

[http://img51.imageshack.us/img51/1272/tablesh.jpg](http://img51.imageshack.us/img51/1272/tablesh.jpg)

所以我想在没有任何固定值的考试或科目的情况下显示此表..我是通过这种方式完成的，效果很好，但我希望知道这是否是最好的方式

```
 <? 

$con = mysql_connect("localhost","root","123"); 
if (!$con) 
  { 
  die('Could not connect: ' . mysql_error()); 
   } 
mysql_select_db("test", $con); 

//////////////////////// 

///////////////// Select the exams and put it in array  
$ex = mysql_query("SELECT * FROM exams");  
$dc=1; 
while ($rowex= mysql_fetch_array($ex)){ 
$exn[$dc]=$rowex['Exam_Title']; 
$exid[$dc]=$rowex['Exam_ID']; 
$dc++; 
} 

/////////////////////////// Select the subjects and put it in array  
$sj = mysql_query("SELECT * FROM subjects");  
$dsj=1; 
while ($rowsj= mysql_fetch_array($sj)){ 
$sjn[$dsj]=$rowsj['Subj_Title']; 
$sjid[$dsj]=$rowsj['Subj_ID']; 
$dsj++; 
} 

////////////////Select the student marks and put it in array with subject id and exam id 

$result = mysql_query("SELECT * FROM stu_marks");  
while ($row= mysql_fetch_array($result)){ 
$arr[$row['Subj_ID']][$row['Exam_ID']]=$row['Grade']; 

} 
/////////////////////// count the exams and the subjects to draw the table 
 $exc=count($exn); 
 $sjc=count($sjn); 
 ?> 

 <table width="400" border="1"> 
  <tr> 

    <? 
///////// display subjects in table rows 
for ($d=0;$d<=$sjc;$d++){ 

if ($d==0){ 
    echo '<td>-</td>'; 
}else{ 
    echo ' <tr><td>'.$sjn[$d].'</td>'; 
} 

 ///////// display exams in table head tds  

for ($p=1;$p<=$exc;$p++){ 
if ($d==0){ 
    echo '<td> '.$exn[$p].'</td>'; 
}else{ 
?> 
 <td> 

 <?=$arr[$sjid[$d]][$exid[$p]]?> 

 </td> 
  <?} 
  } 
 }?> 

  </table> 
```

我问这是否是一个好方法

对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:00:54.070

如果代码按原样运行，并且您只想知道是否有更好的方法，那么[Code Review: Stack Exchange](https://codereview.stackexchange.com/ "代码审查：堆栈交换")比这里更适合。

# java - 通过 LLVM 在 iPhone/iOS 上使用 Java

> ID：11366129
> 
> 赞同：0
> 
> 时间：2012-07-06T16:25:57.287
> 
> 标签：java, xcode, llvm

那么，LLVM 可以将 java 字节码编译成 llvm IF，对吧（通过工具 class2llvm）？LLVM IF 可以翻译成任何类型的目标机器。那么，既然 Xcode 有一个 llvm“堆栈”，那么是否可以很容易地获取从 java 类生成的 IF，并将其链接到一个不错的 iPhone 应用程序中？任何人有任何经验或想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:16:52.893

这是可能的，但并非微不足道。将 Java 代码编译为 llvm 位码是最少的问题。更大的问题是您需要支持以使代码运行的所有 Java 运行时（如标准库、类型、垃圾收集器等）。

# jquery - 触控设备上的 jQuery 可选插件

> ID：11366132
> 
> 赞同：-1
> 
> 时间：2012-07-06T16:26:10.603
> 
> 标签：jquery, touch, jquery-ui-selectable

我编写了一个使用 jQuery 选择日期范围的小部件，因为[可选](http://jqueryui.com/demos/selectable/)插件易于使用，但发现它不适用于 iPad 和 iPhone（可能还有其他触摸设备。

是否有任何插件/补丁或*任何*我可以用来让代码在触摸设备上运行的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:40:14.797

[http://touchpunch.furf.com/](http://touchpunch.furf.com/)

jQuery UI 触摸打孔。这是一种将触摸事件转换为点击事件的技巧。应该非常适合您正在做的事情。文档非常清晰，实现很简单：

```
<script type="text/javascript" src="jquery.ui.touch-punch.js"></script> 
```

试试看！

编辑：修复了拼写错误

# performance - Google Closure 的图形模块太慢了。goog.graphics.CanvasGraphics

> ID：11366146
> 
> 赞同：0
> 
> 时间：2012-07-06T16:27:20.967
> 
> 标签：performance, html, canvas, google-closure

最近，我使用 Google Closure 研究 HTML Canvas。

但是 Google Closure 的性能非常缓慢。

当我运行我的代码时.. 它几乎崩溃了 Chrome 浏览器。

当然，我在不使用 Google Closure 的 HTML Canvas 代码中做了同样的事情；它超级快。

这是我使用 Google Closure (goog.graphics.CanvasGraphics) 的画布代码

由于我只是这个模块（goog.graphics.CanvasGraphics）的初学者，我不确定我做得对。我做错了什么吗？为什么这么慢？？！！

这太令人沮丧了。

```
/** 
 * @param {Document} doct
 */
test.main = function(doct){
var dom = new goog.dom.DomHelper(doct);

/**
 * goog.graphics.CanvasGraphics(width, height, opt_coordWidth, opt_coordHeight, opt_domHelper)
 * @type {goog.graphics.CanvasGraphics} 
 */
var canvas = new goog.graphics.CanvasGraphics(500, 500, null, null, dom);
canvas.render(dom.getElement('canvasTest2'))
canvas.balls = [];

 function  drawScreen () {
    canvas.clear()

    for (var i =0; i <canvas.balls.length; i++) {
        ball = canvas.balls[i];
        ball.x += ball.xunits;
        ball.y += ball.yunits;
        var ellipse = canvas.drawEllipse(ball.x, ball.y, ball.radius, ball.radius, null, ball.solidFill);

        if (ball.x > canvas.width || ball.x < 0 ) {
            ball.angle = 180 - ball.angle;
            updateBall(ball);
        } else if (ball.y > canvas.height || ball.y < 0) {
            ball.angle = 360 - ball.angle;
            updateBall(ball); 
        }
    }

}

function updateBall(ball) {

    ball.radians = ball.angle * Math.PI/ 180;
    ball.xunits = Math.cos(ball.radians) * ball.speed;
    ball.yunits = Math.sin(ball.radians) * ball.speed;

}

var numBalls = 80;
var maxSize = 15;
var minSize = 5;
var maxSpeed = maxSize+5;

for (var i = 0; i < numBalls; i++) {

    var tempRadius = Math.floor(Math.random()*maxSize)+minSize;
    var tempX = tempRadius*2 + (Math.floor(Math.random()*canvas.width)-tempRadius*2);
    var tempY = tempRadius*2 + (Math.floor(Math.random()*canvas.height)-tempRadius*2);
    var tempSpeed = maxSpeed-tempRadius;
    var tempAngle =  Math.floor(Math.random()*360);
    var tempRadians = tempAngle * Math.PI/ 180;
    var tempXunits = Math.cos(tempRadians) * tempSpeed;
    var tempYunits = Math.sin(tempRadians) * tempSpeed;

    var stroke = new goog.graphics.Stroke(3, '#333');
    var solidFill = new goog.graphics.SolidFill('#333');

    tempBall = {x:tempX,y:tempY,radius:tempRadius, speed:tempSpeed, stroke:stroke, solidFill:solidFill, angle:tempAngle, xunits:tempXunits, yunits:tempYunits}

    canvas.balls.push(tempBall);

}

setInterval(drawScreen, 32);    

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:09:03.647

每次使用闭包库渲染帧时都不应该调用“drawEllipse”，因为这会创建一个元素并将其作为子元素添加到画布中。相反，您应该创建一次省略号，然后使用“forEachChild”函数循环它们。上述代码的性能很糟糕，因为它在每个循环中为画布创建了越来越多的子代。

以下是“drawEllipse”的代码供参考：

```
/**
 * Draw an ellipse.
 *
 * @param {number} cx Center X coordinate.
 * @param {number} cy Center Y coordinate.
 * @param {number} rx Radius length for the x-axis.
 * @param {number} ry Radius length for the y-axis.
 * @param {goog.graphics.Stroke} stroke Stroke object describing the
 *    stroke.
 * @param {goog.graphics.Fill} fill Fill object describing the fill.
 * @param {goog.graphics.GroupElement=} opt_group The group wrapper
 *     element to append to.  If not specified, appends to the main canvas.
 *
 * @return {goog.graphics.EllipseElement} The newly created element.
 * @override
 */
goog.graphics.CanvasGraphics.prototype.drawEllipse = function(cx, cy, rx, ry,
    stroke, fill, opt_group) {
  var element = new goog.graphics.CanvasEllipseElement(null, this,
      cx, cy, rx, ry, stroke, fill);
  this.append(element, opt_group);
  return element;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:40:21.663

也许很明显，但您是否尝试过使用高级编译？这将删除死代码并优化您的代码。请参阅[https://developers.google.com/closure/compiler/docs/api-tutorial3](https://developers.google.com/closure/compiler/docs/api-tutorial3)它可能使性能可以接受......

问候，

雷内

# javascript - IE：以编程方式选择文件后无法提交表单

> ID：11366154
> 
> 赞同：1
> 
> 时间：2012-07-06T16:28:09.437
> 
> 标签：javascript, html, internet-explorer, file-upload

我发现以编程方式触发“选择文件”对话框的唯一方法是在隐藏的输入文件控件上调用 click() 函数。在 Chrome 中试过这个，效果很好。在IE中，显示选择文件对话框，但选择文件后无法提交表单。这是简化的代码（输入文件在此示例中未隐藏）：

```
<html>
<body>
<form id="myform" action="test.html" method="post" enctype="multipart/form-data">
<input type="file" name="file" id="myfile" onchange="submit();"/>
<input type="button" value="Browse File" onclick="document.getElementById('myfile').click()" />
</form>
</body>
</html> 
```

看起来很简单，看不出 IE 不喜欢这里...

# javascript - 从零开始的 Javascript 动画

> ID：11366158
> 
> 赞同：2
> 
> 时间：2012-07-06T16:28:24.810
> 
> 标签：javascript, animation

首先：是的，我确实知道我想重新发明轮子。但这不是重点。我是 Javascript 新手（我在学校接受过一些基本培训），我想了解的不仅仅是复制和粘贴用 Javascript 制作的动画。我希望能够更改某些参数以使我的网页看起来更好。

所以这是我的问题（这可能是非常愚蠢的问题，但无论如何）。我找到了这个 Javascript 动画教程：http: [//javascript.info/tutorial/animation#the-basics-of-the-animation](http://javascript.info/tutorial/animation#the-basics-of-the-animation)

这正是我一直在寻找的，只是它写得不好（在我看来（我是一个完美主义者）），而且有时有点难以理解。所以我真正没有得到的是第 7 行和第 8 行（粗体）：

```
function animate(opts) {
    var start = new Date
    var id = setInterval(function () {
        var timePassed = new Date - start
        var progress = timePassed / opts.duration
        if (progress > 1) progress = 1
        var delta = opts.delta(progress)
        opts.step(delta)
        if (progress == 1) {
            clearInterval(id)
        }
    }, opts.delay || 10)
} 
```

其他的一切都可以理解。我也没有得到Deltas（我了解数学概念和东西），但我不明白如何使用它们（使用它们的正确方法）。

如果有人足够好心，纠正这个代码并解释我必须在以下代码的第 7 行写什么，如果我想要线性 Delta，我将非常感激。而且我还想知道如何正确调用函数进行动画处理（在本例中为函数 move()）。

```
function move(element, delta, duration) {
    var to = 500
    animate({
        delay:10,
        duration:duration || 1000, // 1 sec by default
        delta:delta,
        step:function (delta) {
            element.style.left = to * delta + "px"
        }
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:45:23.920

我看了一下教程，在我看来 delta 只是一个用于跟踪动画在其运动中的距离的属性。该数字将始终介于 0 和 1 之间，因此在动画开始时 element.style.left = 0px 并且在结束时等于 500px。根据您的输入，该值可以设置为线性或指数（具有缓动）。

你的代码现在不工作吗？或者你只是想知道三角洲是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:53:21.290

```
function move(element, delta, duration) {
    var to = 500
    animate({
        delay: 10,
        duration: duration || 1000, // 1 sec by default
        delta: delta,
        step: function(delta) {
            element.style.left = 100*delta + "px"    
        }
    }) 
} 
```

在您提到的页面上，在 delta 部分，有这个映射：

*   进度 = 0 -> 高度 = 0%
*   进度 = 0.2 -> 高度 = 20%
*   进度 = 0.5 -> 高度 = 50%
*   进度 = 0.8 -> 高度 = 80%
*   进度 = 1 -> 高度 = 100%

他们将 delta 定义为：

> delta(progress) 是将时间进度“进度”映射到动画进度“增量”的函数。

这意味着线性增量应该是遵循这些规则的函数：

*   增量（0）->“0%”
*   增量（0.2）->“20%”
*   增量（0.4）->“50%”
*   增量（0.8）->“80%”
*   增量（1）->“100%”

在您的示例中，这是由以下行定义的：“delta: delta”。

step 函数会将此增量应用于您的代码。在这种情况下，您使用：

```
element.style.left = to*delta + "px" 
```

delta 为 0 意味着该属性将为“0px”。delta 为 1 意味着该属性将为“500px”。进度为 0 表示动画开始，进度为 1 表示动画结束。在此示例中，增量等于进度。在动画中间，进度为 50%。由于 delta(0.5) = 0.5，传递给 step 的参数将为 0.5，属性将为“250px”。

我建议您使用可用的开发人员控制台来测试您应用于元素的属性的值。

# ios - 将 Facebook-iOS-SDK 与 Rubymotion 一起使用时出错

> ID：11366159
> 
> 赞同：0
> 
> 时间：2012-07-06T16:28:30.683
> 
> 标签：ios, ruby, facebook-ios-sdk, rubymotion, cocoapods

我已经将一个现有的 XCode 项目转换为 Rubymotion，但我一直遇到 Facebook-iOS-SDK 集成的问题。

在我的 Rakefile 中：

```
$:.unshift("/Library/RubyMotion/lib")

require 'motion/project'
require 'motion-cocoapods'

require File.join(File.dirname(__FILE__), 'version')

Motion::Project::App.setup do |app|
  app.name = "My App"  
  app.pods do
    dependency 'Facebook-iOS-SDK', '~> 1.2'
  end
end 
```

在我的应用程序委托中，我为 Facebook 对象定义了一个属性：

```
def facebook
  @facebook ||= Facebook.alloc.initWithAppId(FACEBOOK_APP_ID, andDelegate:self)
end 
```

虽然我可以`facebook.authorize()`毫无问题地调用 ，但当我询问 Facebook 会话是否有效时：

```
appDelegate = UIApplication.sharedApplication.delegate
if appDelegate.facebook.sessionValid?
  # do something here...
end 
```

我得到这个例外：

```
(main)> Objective-C stub for message `isSessionValid' type `c@:' not precompiled. Make sure you properly link with the framework or library that defines this message. 
```

有没有人遇到过这个？关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:14:58.407

您使用的是哪个版本的 RubyMotion？我认为最新版本（1.23）解决了这个问题。尝试运行`sudo motion update`

# mysql - 如何恢复 my.ini 文件？

> ID：11366162
> 
> 赞同：0
> 
> 时间：2012-07-06T16:28:44.780
> 
> 标签：mysql

我将应用程序更改为通过“打开方式”命令打开 my.ini 文件。
现在我的 my.ini 文件不可读（没有换行符）并且 mysqld 服务无法启动。
是否可以恢复文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:49:27.963

永远不要使用注册表手动删除程序。您唯一的希望是卸载 mysql 并重新安装它。如果您遇到这方面的问题，您可能需要联系客户支持。

如果您在更改注册表之前对其进行了备份，请将其还原。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:10:15.287

如果您弄乱了注册表，您可能无法使用 MSI 重新安装 MySQL

然而，并不是所有的希望都落空了。

谈到 Windows，我非常讨厌 MSI 安装。我总是下载免安装的 zip 文件。早在 2011 年 2 月 10 日，我写了一篇[**关于如何配置免安装 MySQL 设置的 ServerFault 帖子**](https://serverfault.com/a/234125/69271)。

关于 my.ini，也许您可​​以使用另一个可以读取基于 Linux/Unix 的文件的文本编辑器。[我有时使用 Windows 版本`vi`来读取 Windows 中的 Linux 文件](http://www.winvi.de/winvi302.zip)。看看能不能用WinVi打开my.ini。

# c++ - 如何读取 .rc 文件中 DLGINIT 结构中定义的字符串？

> ID：11366175
> 
> 赞同：4
> 
> 时间：2012-07-06T16:29:46.567
> 
> 标签：c++, visual-studio-2010, visual-c++, mfc, visual-c++-2010

简而言之，如何在运行时以编程方式访问已编译资源以从`DLGINIT`结构中提取字符串？

再详细一点...

在 MFC 应用程序中，可以在 .rc 文件中将组合框定义为对话框描述中的一行，使用`COMBOBOX`并具有相应的 DLGINIT 结构，如下所示：

```
IDD_COMBOBOXTEST_DIALOG DIALOGEX 0, 0, 320, 200
STYLE DS_SETFONT | DS_FIXEDSYS | WS_POPUP | WS_VISIBLE | WS_CAPTION | WS_SYSMENU |     WS_THICKFRAME
EXSTYLE WS_EX_APPWINDOW
CAPTION "ComboBoxTest"
FONT 8, "MS Shell Dlg", 0, 0, 0x1
BEGIN
    DEFPUSHBUTTON   "OK",IDOK,209,179,50,14
    PUSHBUTTON      "Cancel",IDCANCEL,263,179,50,14
    COMBOBOX        IDC_COMBO1,22,20,132,30,CBS_DROPDOWN | CBS_SORT | WS_VSCROLL | WS_TABSTOP
    EDITTEXT        IDC_EDIT1,22,42,132,134,ES_MULTILINE | ES_AUTOHSCROLL | ES_READONLY
    PUSHBUTTON      "Load",IDC_BUTTON1,159,42,50,14
END

//...

IDD_COMBOBOXTEST_DIALOG DLGINIT
BEGIN
    IDC_COMBO1, 0x403, 4,  0    0x6e4f, 0x0065, 
    IDC_COMBO1, 0x403, 4,  0    0x7754, 0x006f, 
    0
END 
```

我了解到 Visual C++ 资源文件使用资源文件顶部的给定代码页以单字节文本编码进行编码。我还了解到，`DLGINIT`结构中的行分解如下：

```
<CONTROL ID>, 0x403, <STRING LENGTH>, 0    <STRING BYTES ENCODED FOR CODE PAGE> 
```

我想要做的是进入这个编译的资源并拉出那个字符串。有一些此类使用的 API `AfxFindResourceHandle`，但我不确定这是我需要走的路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:54:20.120

据我所知，资源部分中对话框的布局方式反映了您如何使用[`DLGTEMPLATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645394.aspx)和在内存中手动创建对话框[`DLGITEMTEMPLATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644997.aspx)。因此，请查阅 MSDN 文档的那部分来解析它们。到目前为止，我只做了相反的事情（即从头开始在内存中创建了这样的对话框模板）。

没有功能可以做到这一点，您必须手动完成。

此外，据我所知，`DLGINIT`它甚至没有存储在 PE 文件中。我认为它只是用于资源编辑器本身，但我不是 100% 确定。

# excel - 使用 Sumproduct 计算 Excel 中日期范围之间的数量

> ID：11366176
> 
> 赞同：0
> 
> 时间：2012-07-06T16:29:50.367
> 
> 标签：excel

工作表在这里：[https ://dl.dropbox.com/u/3327208/Excel/PAERTO.xlsm](https://dl.dropbox.com/u/3327208/Excel/PAERTO.xlsm)

这就是我想要做的，我试图“计算”在一组日期之间有多少迟到的工作。据我记得， Sumproduct() 就是为了做到这一点，当然会加入一些计算。

我这样使用它：`=SUMPRODUCT((H23:H29>='Raw Data'!K2)*(H23:H29<='Raw Data'!K3))`

这个公式**应该**计算今天和之前之间的时间，然后返回一个响应。应该有 1。至少在发布时。如果没有，那么到明天就没有了。它应该与其他一些人一起落入两周内范围内。

如果有人可以帮助我，将不胜感激，因为据我所知，这并没有按应有的方式工作……顺便说一句，我正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:51:17.760

我对您的工作簿进行了更改，可以在此处下载： [https ://dl.dropbox.com/u/19599049/PAERTO_v2.xlsm](https://dl.dropbox.com/u/19599049/PAERTO_v2.xlsm)

因为您使用的是 Excel 2010，所以您可以使用 sumifs 函数，这可能更易于您使用和编辑。

在绿色单元格中添加了公式 (F5:F7)

一周内：在“原始数据”K2 中的日期和之后的 7 天之间 两周内：在“原始数据”K2 中的日期和之后的 14 天之间 两周以上：在 K2 日期之后的 15 天之后。

# java - Java 应用程序使用系统中的最大可用内存

> ID：11366177
> 
> 赞同：5
> 
> 时间：2012-07-06T16:29:58.243
> 
> 标签：java, jvm, jnlp

有 -Xmx 和 max-heap-size (jnlp) 选项来设置 Java 应用程序可以使用的最大内存。
如果未指定这些选项，则允许应用程序仅使用系统中少量可用的物理内存。
这就是人们使用 -Xmx 以允许应用程序使用更多内存的原因。但这对我来说真的是一场噩梦，因为客户端机器上可能有不同的内存量，甚至应该考虑操作系统。

有没有办法让java应用程序使用系统中的最大可用内存？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T18:35:21.660

```
-XX:DefaultMaxRAMFraction=1 
```

[bugs.sun.com](http://bugs.sun.com/view_bug.do?bug_id=4408373)
[Sun 的 1.5 JVM](http://coding.derkeiler.com/Archive/Java/comp.lang.java.programmer/2006-12/msg01658.html)
[默认堆大小](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#par_gc.ergonomics.default_size)

不适用于网络启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T16:33:03.123

不幸的是，我知道的最好方法是编写一个简单的启动器（可能是一个 shell 脚本或批处理文件）来检查系统，确定 -Xmx 的适当值，然后启动 Java 应用程序。JVM 初始化后，就无法更改这些值。

# syntax - 列表上的 Groovy 点表示法

> ID：11366183
> 
> 赞同：5
> 
> 时间：2012-07-06T16:30:12.603
> 
> 标签：syntax, groovy

我不理解 Groovy 中以下构造的目的。

每当你有一个东西的集合时，调用它`items`，你可以通过访问集合上的属性来映射一个属性，也就是说，

```
items.prop == items.collect { it.prop } 
```

这对我来说看起来很奇怪，因为我认为第一个符号实际上意味着我想访问集合对象本身的属性。例如，可能会发生模棱两可的真实案例

```
[[1,2,3],['cat', 'elephant']].size == 2 
```

但根据前面的符号，它应该等于`[3, 2]`。

此外，如果收集符号不够短，还有一个`*.`点运算符，它的目的就是以这种方式使用：

```
[[1,2,3],['cat', 'elephant']]*.size = [3, 2] 
```

> 模棱两可的点符号的目的是什么？它是否只是为了节省字符而添加的，`*.`或者它有合法的使用案例，在那里`*.`不起作用并且`collect`很麻烦？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:05:17.827

不久前，我写了一篇名为[“Groovy Spread Operator Optional For Properties”](http://naleid.com/blog/2008/12/24/groovy-spread-operator-optional-for-properties-plus-a-peek-into-the-sausage-factory/)的博客文章，深入探讨了在这种情况下发生了什么。

简短的回答是，它更像是语法糖，并最终调用[DefaultGroovyMethods.getAt(Collection, String)](http://groovy.codehaus.org/api/org/codehaus/groovy/runtime/DefaultGroovyMethods.html#getAt%28java.util.Collection,%20java.lang.String%29)。

它没有任何巨大的优势，但它可以使一些 DSL 更容易编写，因为无论对象是集合还是单个对象，它们都可以正确操作。

# bash - 在 Bash 中循环查找输出，其中文件名包含空格

> ID：11366184
> 
> 赞同：19
> 
> 时间：2012-07-06T16:30:20.560
> 
> 标签：bash, find, while-loop

我尝试搜索可能包含我尝试使用的空格的文件`-print0`并`IFS`在此处设置是我的脚本

```
IFS=$'\0';find people -name '*.svg' -print0 | while read file; do
    grep '<image' $file > /dev/null && echo $file | tee -a embeded_images.txt;
done 
```

我尝试对所有包含嵌入图像的 svg 文件进行精细处理，它在没有 -print0 的情况下工作，但一个文件失败，所以我停止了脚本。这是一个更简单的例子，它也不起作用

```
IFS=$'\0';find . -print0 | while read file; do echo $file; done 
```

它不显示任何内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-05-19T23:16:31.777

尽管[丹尼斯威廉姆森的回答](https://stackoverflow.com/a/11366230/1426891)是绝对正确的，但它[会创建一个 subshel​​l](https://stackoverflow.com/q/13726764/1426891)，这将阻止您在循环内设置任何变量。您可以考虑使用进程替换，如下所示：

```
while IFS= read -d '' -r file; do
    grep '<image' "$file" > /dev/null && echo "$file" | tee -a embeded_images.txt
done < <(find people -name '*.svg' -print0) 
```

第一个`<`表示您正在从文件中读取，并且`<(find...)`被替换为`find`直接返回输出的文件名（通常是管道的句柄）。因为`while`从文件而不是管道读取，所以您的循环可以设置可从范围外访问的变量。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-06T16:34:40.857

仅在 的上下文中使用`read -d '' -r file`和设置：`IFS``read`

```
find people -name '*.svg' -print0 | while IFS= read -d '' -r file; do
    grep '<image' "$file" > /dev/null && echo "$file" | tee -a embeded_images.txt;
done 
```

并引用你的变量。

# python - PyTidyLib 的 HTML Tidy.dll

> ID：11366190
> 
> 赞同：1
> 
> 时间：2012-07-06T16:30:47.337
> 
> 标签：python, html, htmltidy

我正在尝试查找 Tidy.dll 或 Windows 安装程序来使用 PyTidyLib，但所有正确的链接[http://tidy.sourceforge.net/#source](http://tidy.sourceforge.net/#source)似乎都已失效。任何想法在哪里可以找到这些？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:35:48.717

您可能会发现以下链接很有用。

**安装程序： http:** [//www.paehl.com/open_source/? download=tidy.zip](http://www.paehl.com/open_source/?download=tidy.zip)

**DLL：** [http ://www.paehl.com/open_source/?download=libtidy.7z](http://www.paehl.com/open_source/?download=libtidy.7z)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T11:24:10.070

您可以在官方页面获取二进制文件： [HTML Tidy Binary Releases](http://binaries.html-tidy.org)

# jquery - 为什么 Tipsy jQuery 插件对我不起作用？

> ID：11366193
> 
> 赞同：0
> 
> 时间：2012-07-06T16:30:52.307
> 
> 标签：jquery, html, css, jquery-plugins, tipsy

我从这里使用最新版本的 Tipsy：https://github.com/jaz303/tipsy

我包括`jquery.tipsy.js`and `tipsy.css`，这是我的 html，这`a href`是一张图片：

```
<div class="social">
    <ul id="social">
        <li class="vimeo" title="Vimeo">
        <a href="#" class="vimeo" title="Vimeo"></a>
    </li>
    </ul> 
```

和 jQuery：

```
$(function() {
    $('.vimeo').tipsy({
        trigger: 'hover', 
        fade: true, 
        gravity: 'n'}
    );
}); 
```

为什么这根本没有显示任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:40:43.737

因为您没有在锚标签中使用任何文本

```
<div class="social">
<ul id="social">
    <li class="vimeo" title="Vimeo">
<a href="#" class="vimeo" title="Vimeo"></a>
</li>
</ul> 
```

在这里放一些东西>>

```
 <a href="#" class="vimeo" title="Vimeo">HERE</a> 
```

你需要检查这个：http: [//jsfiddle.net/f4RTs/](http://jsfiddle.net/f4RTs/)

此外，您的**li**和**a** tag 具有相同的类，因此您将在悬停时看到两个标题

# wcf - 将 CRUD 与 Ext JS 4 动态表单一起使用

> ID：11366194
> 
> 赞同：1
> 
> 时间：2012-07-06T16:30:58.757
> 
> 标签：wcf, forms, extjs, crud, ashx

我想构建一个简单的表单，可用于创建记录（C=Create）、从数据库读取记录数据（R=Read）、从数据库更新记录（U=Update）并删除从数据库中记录（D=删除）。我不想在 Ext JS 示例中使用 PHP。我更喜欢在 ASP.NET 中使用 WCF 或 HTTP 处理程序（*.ashx 文件）。有人可以帮我写代码吗？我不需要有关数据库访问的详细信息。我只是在努力获取客户端代码方面，以及我应该在服务器代码方法上使用哪些参数和返回类型。

**我想模仿这种架构，但使用 Ext JS 客户端代码： http:** [//www.codeproject.com/Articles/283976/CRUD-Create-Read-Update-Delete](http://www.codeproject.com/Articles/283976/CRUD-Create-Read-Update-Delete)

**如果您选择 WCF，我使用的是 REST，而不是 SOAP：**
[http ://www.dotnetcurry.com/ShowArticle.aspx?ID=728](http://www.dotnetcurry.com/ShowArticle.aspx?ID=728)

*我在 Amazon.com 上订购了用于 Web 应用程序的 Ext JS 4 Cookbook，但它已经缺货 2 个月了。*

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <title>...</title>

    <!-- ExtJS -->
    <link rel="stylesheet" type="text/css" href="../../resources/css/ext-all.css" />
    <script type="text/javascript" src="../../ext-all.js"></script>

    <!-- Shared -->
    <link rel="stylesheet" type="text/css" href="../shared/example.css" />

    <!-- GC -->

    <!-- Example -->
    <script type="text/javascript" src="dynamic.js"></script>
</head>
<body>

<h1>CRUD example with Ext JS 4 dynamic form</h1>

</body>
</html> 
```

**JavaScript**

```
Ext.require([
//'Ext.form.*',
//'Ext.layout.container.Column',
//'Ext.tab.Panel'
    '*'
]);

Ext.onReady(function () {
    Ext.QuickTips.init();

    var bd = Ext.getBody();

    /*
    * ================  Simple form  =======================
    */
    bd.createChild({ tag: 'h2', html: 'Form 1 - Very Simple' });

    var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';

    var simple = Ext.widget({
        xtype: 'form',
        layout: 'form',
        collapsible: true,
        id: 'simpleForm',
        url: 'save-form.php',
        frame: true,
        title: 'Simple Form',
        bodyPadding: '5 5 0',
        width: 350,
        fieldDefaults: {
            msgTarget: 'side',
            labelWidth: 75
        },
        defaultType: 'textfield',
        items: [{
            fieldLabel: 'First Name',
            afterLabelTextTpl: required,
            name: 'first',
            allowBlank: false
        }, {
            fieldLabel: 'Last Name',
            afterLabelTextTpl: required,
            name: 'last'
        }, {
            fieldLabel: 'Company',
            name: 'company'
        }, {
            fieldLabel: 'Email',
            afterLabelTextTpl: required,
            name: 'email',
            vtype: 'email'
        }, {
            fieldLabel: 'DOB',
            name: 'dob',
            xtype: 'datefield'
        }, {
            fieldLabel: 'Age',
            name: 'age',
            xtype: 'numberfield',
            minValue: 0,
            maxValue: 100
        }, {
            xtype: 'timefield',
            fieldLabel: 'Time',
            name: 'time',
            minValue: '8:00am',
            maxValue: '6:00pm'
        }],

        buttons: [{
            text: 'Save'
        }, {
            text: 'Cancel'
        }]
    });

    simple.render(document.body);

}); 
```

![在此处输入图像描述](../Images/2e9b4a3f2d22e7986bb1a4dcc7f20c64.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:33:24.463

你的问题有点模糊，这可能是你没有得到任何答案的主要原因。在 6 个月的开发周期后，我刚刚推出了相当大的 Web 应用程序，其中 ExtJs 作为前端，实体框架和 SQL Server 作为后端。

与使用 PHP 相比，从 ExtJs 的角度来看并没有太大的区别——当然这里和那里都有一些怪癖，但是在你配置 WCF 为你提供 JSON 数据之后——它们非常相似。

您可以从在代理类中指定不同的 URL 开始（因为 WCF 将在一个 SubmitChanges 处理程序中处理 CRUD 的 UCD 部分：

```
read: 'GetData',
update: 'SubmitChanges',
create: 'SubmitChanges',
destroy: 'SubmitChanges' 
```

如果您有任何具体问题，我很乐意提供帮助。

# xcode - Git-svn rebase 失败告诉我更新索引失败

> ID：11366196
> 
> 赞同：1
> 
> 时间：2012-07-06T16:31:05.027
> 
> 标签：xcode, git, svn, git-svn, rebase

超级奇怪的错误，我环顾四周，发现了这些类似的问题，但我不确定它是否相同：

[错误变基/更新 git-svn 存储库](https://stackoverflow.com/questions/5367734/error-rebaseing-updating-a-git-svn-repository)

[git-svn rebase 错误](https://stackoverflow.com/questions/9494341/git-svn-rebase-error)

`update-index --refresh: command returned error: 1`

这部分错误看起来是一样的，但是正如您在下面看到的，我的工作目录中没有任何内容（我在输入 git status 之前运行了一个 git status `git svn rebase`）。我尝试做一个`git reset --hard`并再次运行它，但没有运气。

```
mac-jd:IPhone jd$ git status
# On branch master
nothing to commit (working directory clean)
mac-jd:IPhone jd$ git svn rebase
branches/TechDev/MySecretProj/MySecretProj.xcodeproj/project.pbxproj: needs update
update-index --refresh: command returned error: 1

mac-jd:IPhone jd$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   branches/TechDev/MySecretProj/MySecretProj.xcodeproj/project.pbxproj
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

这似乎是一个微妙的错误，任何帮助将不胜感激。非常感谢。

编辑：

**弄清楚了：**

我要把这个留给其他犯了这个愚蠢、愚蠢、错误的人。在运行 rebase 之前关闭 XCode -_-

很抱歉浪费了那些帮助答案的人的时间。

我正在使用 Mac。差异，当我运行它时，在我尝试了 rebase 后显示了一行更改：

变基之前： `6A31D44715A5B64700AF77D8 /* libDevUtils.a */ = {isa = PBXFileReference; lastKnownFileType = file; name = libDevUtils.a; path = "Classes/Tools/SiteCodes/DevUtils/build/Release-iphoneos/libDevUtils.a"; sourceTree = "<group>"; };`

变基后： `6A31D44715A5B64700AF77D8 /* libDevUtils.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; name = libDevUtils.a; path = "Classes/Tools/SiteCodes/DevUtils/build/Release-iphoneos/libDevUtils.a"; sourceTree = "<group>"; };`

为了提供帮助，两行之间唯一改变的是 lastKnownFileType 从 'file' 更改为 'archive.ar'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:36:38.843

我不知道那个 project.pbxproj 文件是什么，但它可能是在您调用`git status`的那一刻和您调用的那一刻之间被某些应用程序更改了`git svn rebase`吗？

在这种情况下，您应该考虑将其从存储库中删除并将其添加到您的 .gitignore 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:38:33.737

我不确定这是否会有所帮助。但是我曾经碰巧创建了一个新分支，然后我尝试在创建分支之前重新设置为提交，从而无法重新设置基础。我想我通过删除分支条目来解决这个问题。

# spring - Tomcat设置错误页面后返回403

> ID：11366198
> 
> 赞同：1
> 
> 时间：2012-07-06T16:31:26.073
> 
> 标签：spring, tomcat

好的，所以我想替换 Tomcat 7 默认错误页面。因此，我在我的 web.xml 中为我们的应用程序设置了 error-page 元素。

完成此操作后，我注意到我们的一些集成测试失败并且所有 40x 状态都返回为 HTTP 403。例如，通常我们的一个测试应该返回 404，但是当启用错误页面时返回 403。

我们的大多数集成测试都是通过 GET 或 POST。但是，失败的测试都是 PUT。当没有错误页面定义时，这些测试再次正常工作。

有人有想法么？

我尝试在 init-parameters 中为 servlet 设置 readonly 参数，但这没有任何区别。

这是一个 Spring-Mvc 3.0.5 应用程序。

# jquery - IE 中的 jQuery Cycle 插件位置问题

> ID：11366208
> 
> 赞同：0
> 
> 时间：2012-07-06T16:32:25.247
> 
> 标签：jquery, internet-explorer, position, cycle

该问题出现在[本页](http://www.nba.com/warriors/season-ticket-holders-sth-page-test)的“客户服务团队”部分。

Internet Explorer 9 似乎很好，但是如果您打开[兼容性视图](http://windows.microsoft.com/en-us/windows7/How-to-use-Compatibility-View-in-Internet-Explorer-9)，您会注意到通过[Cycle Plugin](http://jquery.malsup.com/cycle/)淡入和淡出的图像现在位于包含 div 的中间，而不是在左侧的适当位置。

我尝试将包含的 div 定位为浮动元素、内联块元素，现在定位为绝对定位，但同样的问题仍然存在。

这是有问题的代码块（请注意，一旦找到适当的修复程序，我将删除难看的内联样式）：

```
 <div id="accountservicereps_sth">
        <div style="position: absolute; left: 10px; top: 14px; width: 150px; height: 150px;">
            <div class="slideshow_accountservicesteam">
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_brandonschneider_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_jeffbarnet_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_donmoffett_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_joelkretzinger_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_melissaviceral_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_daniellehallam_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_staceybaca_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_tenleyblock_150.jpg" width="150" height="150" alt="" border="0" /></a>
                <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam"><img src="http://i.cdn.turner.com/nba/nba/.element/media/2.0/teamsites/warriors/images/sth_accountservices_tamarastanten_150.jpg" width="150" height="150" alt="" border="0" /></a>
            </div>
        </div>

        <div style="position: absolute; left: 175px; top: 60px; width: 120px; height: 150px; vertical-align: middle;">
            <a href="http://www.nba.com/warriors/seasonticketholders/accountservicesteam">Meet Your<br />Account Service<br />Representatives!</a>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:05:39.230

看起来**slideshow_accountservicesteam**内的锚标签也被绝对定位。尝试在 CSS 中添加 left:0。

# java - 在 Android 4 上设置 FrameLayout 的背景时出错

> ID：11366209
> 
> 赞同：0
> 
> 时间：2012-07-06T16:32:26.323
> 
> 标签：java, android

这是我正在使用的代码：

```
progressFrame = (FrameLayout) findViewById(R.id.progressFrame);
progressFrame.setBackgroundResource(R.drawable.startprogress); 
```

在 Android 2.3.3 上一切正常，但在 Android 4 上，它在尝试运行“setBackgroundResource”行时崩溃。这是 logcat 消息：

```
07-06 17:31:28.159: W/dalvikvm(11848): threadid=1: thread exiting with uncaught exception (group=0x40be81f8)
07-06 17:31:28.167: E/AndroidRuntime(11848): FATAL EXCEPTION: main
07-06 17:31:28.167: E/AndroidRuntime(11848): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bosi.sweetsmell/com.bosi.sweetsmell.activity.RubActivity}: java.lang.NullPointerException
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.os.Looper.loop(Looper.java:137)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.ActivityThread.main(ActivityThread.java:4514)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at java.lang.reflect.Method.invokeNative(Native Method)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at java.lang.reflect.Method.invoke(Method.java:511)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at dalvik.system.NativeStart.main(Native Method)
07-06 17:31:28.167: E/AndroidRuntime(11848): Caused by: java.lang.NullPointerException
07-06 17:31:28.167: E/AndroidRuntime(11848):    at com.bosi.sweetsmell.activity.RubActivity.onCreate(RubActivity.java:35)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.Activity.performCreate(Activity.java:4465)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
07-06 17:31:28.167: E/AndroidRuntime(11848):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
07-06 17:31:28.167: E/AndroidRuntime(11848):    ... 11 more 
```

在此希望有人可以提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:11:14.160

检查您是否有多个合格的布局文件夹（例如 layout-land、layout-hdpi、layout-xhdpi）。如果这样做，您的 4.0 模拟器很可能是从一个单独的布局文件夹中提取的，您可能没有在其中正确地为您的`FrameLayout`.

# charts - 如何从 JavaFX2 中的 AreaChart 中删除符号

> ID：11366210
> 
> 赞同：2
> 
> 时间：2012-07-06T16:32:30.887
> 
> 标签：charts, javafx-2

有没有办法从 AreaChart 中删除符号？LineChart 和 ScatterChart 具有该功能，但在 AreaChart 中没有可用的功能。

或者，如果我可以在 LineChart（如 AreaChart 中）的下方区域“填充”绘画，我也可以使用它。

我的目标是构建一个没有符号的 AreaChart——无论是使用 lineChart（以某种方式填充它下面的区域）还是 AreaChart——都没有关系......

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:25:44.140

通过反复试验，我发现您可以使用此 css 代码来关闭 AreaChart 上的符号

```
.chart-area-symbol { -fx-background-color: null, null; } 
```

通常第一种颜色是符号笔划的颜色，第二种颜色是填充的颜色。将它们都设置为 null，并且不绘制符号。

或者，将形状设置为无操作：

```
.chart-area-symbol { -fx-shape: ""; } 
```

# database - 使用多种数据库类型

> ID：11366211
> 
> 赞同：0
> 
> 时间：2012-07-06T16:32:58.607
> 
> 标签：database, delphi, bde

我目前正在构建一个主要使用 ABSDatabase 的程序，但是我正在尝试从 BDE 配置中返回别名列表，我目前正在使用以下代码：

```
 Session.GetDatabaseNames(gvAliasList);
  Session.GetTableNames(gvAliasList[0], gvTableList); 
```

这只会带回 ABSDatabase 集的数据库名称，我怎样才能让它返回 BDE 别名？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:00:09.023

您可以使用以下代码检索所有 BDE 别名：

```
uses DBTables;

procedure LoadAliases();
var
  CurrentAliases: TStringList;
begin
  CurrentAliases := TStringList.Create;
  try
    Session.GetAliasNames(CurrentAliases);
    ComboBox1.Items:= CurrentAliases;
  finally
    CurrentAliases.Free;
  end;
end; 
```

请记住，BDE 已被 Embarcadero 弃用，并且自多年前以来就没有积极开发。尝试迁移到更新的数据库访问库，例如 DBX。

# iphone - 这个 iOS 控件是什么？

> ID：11366215
> 
> 赞同：-6
> 
> 时间：2012-07-06T16:33:07.540
> 
> 标签：iphone, ios

我似乎在文档中找不到对此用户控件（IP 地址组合框）的任何引用。它是私有的，还是有开源的替代方案？

![iOS 用户控制](../Images/8a1460d3e096bdcd93a2d22b8ed56e06.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:37:01.727

那是一个 UISegmentedControl。来自文档“显示多个段，每个段都用作离散按钮。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:41:55.343

它是一个包含 3 个部分的 UITableView。第一部分在 UITableViewCell 中包含一个带有 UIButton 的行。第二部分包含一行在 UITableViewCell 中带有 UiSegmentedControl 的行。第三部分仅由标准 UITableViewCells 组成。

阅读 UITableView 委托和数据源协议以了解如何实现。

祝你好运

吨

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:38:50.090

它是一个分段控制。（可以将分段控件拖到您的笔尖上，然后在配置中它可以让您配置控件中有多少段以及每个段的文本）。有关 UISegmentedControl 类，请参见 doco。

# android - 'Android Package Builder' builder - 输出文件名？

> ID：11366217
> 
> 赞同：1
> 
> 时间：2012-07-06T16:33:16.737
> 
> 标签：android, eclipse, environment-variables, apk, builder

在 Eclipse 中运行时，有没有办法从“Android Package Builder”步骤获取输出文件名？

我创建了一个在“Android Package Builder”之后运行的自定义构建器步骤，并且我必须对 apk 文件名进行硬编码。第一个问题是次要的，我不能重用项目之间的步骤（我有一个库项目和几个项目）。第二个更大的问题是导出应用程序时这不起作用，因为 apk 的目标路径完全不同。

是否有一个由“Android Package Builder”步骤或前面的任何步骤设置的变量，我可以在我的自定义构建器中使用？类似于 ${project_path} 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:21:01.310

我挖了`android-sdks/tools/ant/build.xml`一遍，看起来`${out.packaged.file}`很可能是您要查找的变量？

# c# - 比较 2 个整数时无法转换 lambda 表达式

> ID：11366218
> 
> 赞同：3
> 
> 时间：2012-07-06T16:33:18.390
> 
> 标签：c#, linq-to-entities

无法将 lambda 表达式转换为类型“bool”，因为它不是委托类型

**在 if 语句“if (UserLevelID => dbMinimunlevelID)”中比较 2 个整数时**

如何将包含计数的变量与另一个整数进行比较？

```
 //Check if user has enough credits to create ClassCharacter       
        public bool CheckMinimunCreditforClassCharacter(Guid UserID, int ClassCharacterID, int Levelid)
        {

        bool Results = true;

        //Check Character Creation Rules
        int dbMinimunlevelID = 0;
        bool AdditionalCharactersRequired = false;
        int AdditionalCharactersPoints = 0;

        var query = (from o in db.ClassCharacters
                     where o.ClassCharacterID == ClassCharacterID
                     select o);   

        foreach (var v in query)
        {
            dbMinimunlevelID = v.MinimumPoints;
            AdditionalCharactersRequired = v.AdditionalCharactersRequired;
            AdditionalCharactersPoints = v.AdditionalCharactersPoints;
        }

        if (dbMinimunlevelID > 0)
        {
            //Check User existing Characters
            int UserLevelID = db.Characters.Where(o => o.UserId == UserID)
                         .Max(o => o.LevelID);

            //************ Here is where the error appears
            if (UserLevelID => dbMinimunlevelID)
            {
                Results = true;
            }
            else
            {
                Results = false;
            }

        }

        return Results;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T16:34:32.950

代替：

```
if (UserLevelID => dbMinimunlevelID) 
```

和：

```
if (UserLevelID >= dbMinimunlevelID) 
```

`=>`是 lambda 运算符，而`>=`(大于或等于) 用于比较

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T16:35:48.390

您正在使用`=>`... 创建一个 lambda 表达式，它是一个向右的箭头。

`>=`改为用于比较。

# air - 如何在 qnx.fuse.ui.listClasses.SectionList 中设置所选项目？

> ID：11366223
> 
> 赞同：0
> 
> 时间：2012-07-06T16:33:53.030
> 
> 标签：air, blackberry-playbook

因此，当用户单击 SectionList 时，很容易选择 ICellRenderer 并将其状态更改为选中：

```
this.messagesList.addEventListener(ListEvent.ITEM_CLICKED, messageSelected);    

//Skip some lines...

private function messageSelected(event:ListEvent):void {
    event.cell.state = SkinStates.SELECTED;
} 
```

在我的应用程序中，我将子索引和当前所选项目的部分索引保存在列表中。问题是我无法在该位置访问 ICellRenderer。使用

```
this.messagesList.selectedItem = selectedMessage; 
```

也不行。

有什么建议么？理想情况下，我想要一个类似的功能

```
this.messagesList.getCellRendererAt(section:int, child:int) 
```

但我在 API 中找不到任何此类方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:39:35.303

好吧，我是个假人。

```
this.messagesList.selectedItem = foo; 
```

工作得很好。原来我在我的代码中做了一些其他愚蠢的事情，后来清除了选定的项目。

# rally - Web 服务 API - 自定义 browser.xsl

> ID：11366235
> 
> 赞同：0
> 
> 时间：2012-07-06T16:35:05.147
> 
> 标签：rally

如何在我的 REST 查询中使用我自己的自定义 XSL 样式表。本质上，我想编辑 Rally 在其 Web 服务 API 站点上提供的示例 browser.xsl。我是否要复制他们的 browser.xsl，对其进行编辑并将其托管在其他地方？

我可以用我自己的 xsl URL 替换 REST URL 中的样式表参数吗？

&stylesheet=https://community.rallydev.com/slm/doc/webservice/browser.xsl

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:46:29.047

您需要下载和自定义/编辑：

`/slm/doc/webservice/browser.xsl`和`/slm/doc/webservice/browser.css`

Rally 不提供在 Rally 托管服务器上保存和引用自定义样式表的方法，因此您所做的任何自定义都需要在您注意的其他地方托管。

但是，正如您在此 Stackoverflow 帖子中所见：

[使用外部 XSL 样式表呈现本地下载的 XML 文件的后备策略](https://stackoverflow.com/questions/10411647/fallback-strategy-for-rendering-locally-downloaded-xml-files-with-external-xsl-s)

许多浏览器会拒绝访问外部样式表。

您可能希望在[Rally Ideas](http://ideas.rallydev.com)上发布一个自定义 Rally 样式表的想法，以获得其他 Rally 用户的投票和可见性，以此作为增强功能。

# iphone - 具有“不可选择”行的 UIPickerView

> ID：11366237
> 
> 赞同：0
> 
> 时间：2012-07-06T16:35:11.497
> 
> 标签：iphone, ios, ios5, uipickerview

我有一个与 tableView 一起使用的pickerview。当用户在选择器中选择一行时，该值将发送回当前 selectedCell 中的 tableview。对于这部分，这很好。但棘手的是，我希望当用户在选择器中选择一个值时，这个值不应该是“可选择的”，除非用户通过在选择器中选择另一个值来更改 tableview 中的值。

=> 选择器旨在更新表格视图中的字段。每个选择器行只能使用一次，但通过复选标记或其他东西保持可见。

不幸的是，我找不到这样做的方法。

有人有想法吗？

提前致谢，

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:03:22.400

您是否尝试过将`userInteractionEnabled`选择器的属性设置为`NO`不需要更改值？您可以将其设置为何`YES`时需要启用它。

# java - FileOutputStream 上的 java.io.EOFException

> ID：11366238
> 
> 赞同：0
> 
> 时间：2012-07-06T16:35:18.427
> 
> 标签：java, arrays, fileinputstream, objectinputstream, eofexception

我有一个类可以读取 Student[] 数组对象的书面输出

这是代码

```
import java.io.*;

// I use this class to read the final ouput "students_updated.dat"
public class StudentArrayObjectFileReader {

public static void main(String[] args) {
    try {
        ObjectInputStream fileReader = new ObjectInputStream(new FileInputStream("students_updated.dat"));
        Student[] studs = (Student[]) fileReader.readObject();
        fileReader.close();

        // List the records in console
        for (int i = 0; i < studs.length; i++) {
            System.out.printf("%7d %-35s %-5s %1d %-6s%n",studs[i].getID(), studs[i].getName(), studs[i].getCourse(), studs[i].getYr(), studs[i].getGender());
        }
    } catch (FileNotFoundException fnfe) {

        fnfe.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
 }
} 
```

问题是读取时出现错误`Student[] studs = (Student[]) fileReader.readObject();`

如此处所述

```
java.io.EOFException
at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2571)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1315)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at StudentArrayObjectFileReader.main(StudentArrayObjectFileReader.java:9) 
```

关于可能是什么问题的任何想法？提前致谢..

这就是`students_updated.dat`写的

```
 public void saveStudentArray() { // studs print to student_updated.dat
    try{
        output.writeObject(studs); // write the final studs
        output.close();
    }catch(Exception e){
        e.printStackTrace();
    }
} 
```

`ObjectInputStream`在此方法所在的构造函数中声明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:40:25.017

移动这一行：

```
fileReader.close(); 
```

在你的`for`循环之后。

在 Java 中，创建变量只是创建对内存中某个位置的引用。将读取的对象`fileReader`转换为学生数组的行为只会创建一个指向内存中正确位置的指针。如果您随后通过关闭 fileReader 来删除该位置，那么您将删除该位置`studs`所指向的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:00:40.310

检查 students_updated.dat 文件的内容。readObject() 函数期望文件包含序列化对象。

该文件是否包含序列化对象？检查序列化是否成功而没有任何问题？

如果您尝试从纯文本文件构造数组，则不应使用 readObject()。

访问此链接以获取有关如何序列化和反序列化数组的示例 -[我可以直接序列化数组吗...](http://www.jguru.com/faq/view.jsp?EID=34789)

# python - Python：生成器中的多个 yield 语句

> ID：11366246
> 
> 赞同：0
> 
> 时间：2012-07-06T16:35:46.907
> 
> 标签：python, yield

**问题：**

如何添加`x.replace(".0",".")`到函数 rem0.

我需要有两个 yield 语句，但只能让其中一个工作。

```
def rem0(data):
    for x in data:
        yield x.lstrip('0')

lGrid = []

for i in rem0(grid):
    lGrid.append(i) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:38:46.067

使用以下构造将解决您的问题。

```
def rem0(data):
    for x in data:
        yield x.lstrip('0').replace(".0", ".") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:46:29.997

你甚至都不想要一个生成器，因为结果是一个列表，直接构建列表并写下更有效：

```
grid = [el.lstrip('0').replace('.0', '') for x in some_data] 
```

# text-editor - 在 sublime text 2 中退出命令模式

> ID：11366250
> 
> 赞同：83
> 
> 时间：2012-07-06T16:35:54.760
> 
> 标签：text-editor, sublimetext2

我刚开始使用 sublime text 2，当我进入命令模式时，我无法退出。

我该如何退出？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-09-21T16:56:41.940

`Escape`让你进入命令模式；`i`带你出去。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-02-26T09:32:40.010

...而且，如果您想避免在按 ESC 键时输入命令 mod，请在您的 sublime 首选项中添加以下忽略的包：

```
"ignored_packages":
[
    "Vintage"
] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-21T10:35:50.007

默认情况下，Preferences > Settings 中看起来像 - 默认情况下已启用

```
"ignored_packages": ["Vintage"] 
```

但随后它在设置中被覆盖 - 用户由

```
"ignored_packages": [
] 
```

所以将设置从设置 - 默认复制到设置 - 对我有用的用户。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-08T06:34:39.053

与在 Vim 中一样，要退出命令模式，请按`i` `insert`将光标保持在它所在的位置。

但是，由于它需要大量的手部动作，我个人讨厌`i`每次都按。

所以，在摆弄 Sublime 的同时，我发现按下`a`也会让你回到正常模式，尽管光标前进了一个字符（`append`正如 Chris 正确指出的那样），我想我会接管它`i`。

所以，`ESC`要进入，`a`要退出命令模式。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-06T16:40:16.533

使用 Escape 键或 Ctrl/Command + ~（波浪号）

# nginx - 从源 nginx + 乘客安装构建失败

> ID：11366254
> 
> 赞同：1
> 
> 时间：2012-07-06T16:36:13.320
> 
> 标签：nginx, passenger, ubuntu-10.04, ld

操作系统：Ubuntu 10.04 LTS

乘客：passenger-3.0.13

Nginx：nginx-1.2.1

尝试使用许多配置从源 nginx + 乘客安装，除了“默认”之外没有任何工作。

**这有效：**

```
 --prefix=/opt/host/nginx --with-http_ssl_module --with-http_gzip_static_module --with-cc-opt=-Wno-error --add-module=/usr/local/src/passenger-3.0.13/ext/nginx 
```

**这失败了：**

```
 --prefix=/opt/host/nginx --with-http_ssl_module --with-http_gzip_static_module --with-cc-opt=-Wno-error --add-module=/usr/local/src/passenger-3.0.13/ext/nginx --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --pid-path=/var/run/nginx.pid --lock-path=/var/lock/nginx.lock --http-log-path=/var/log/nginx/access.log 
```

**------------- 错误输出 --------------**

```
 objs/ngx_modules.o \
    -lpthread -lcrypt /usr/local/src/passenger-3.0.13/ext/nginx/../common/libpassenger_common.a /usr/local/src/passenger-3.0.13/ext/nginx/../common/libboost_oxt.a -lstdc++ -lpthread -lm /usr/local/src/passenger-3.0.13/ext/nginx/../common/libpassenger_common.a /usr/local/src/passenger-3.0.13/ext/nginx/../common/libboost_oxt.a -lstdc++ -lpthread -lm -lpcre -lssl -lcrypto -ldl -lz -lGeoIP \
    -Wl,-E -fstack-protector -L/usr/local/lib -L/usr/lib/perl/5.10/CORE -lperl -ldl -lm -lpthread -lc -lcrypt
    objs/addon/nginx/ngx_http_passenger_module.o: In function `shutdown_helper_server':
    /usr/local/src/passenger-3.0.13/ext/nginx/ngx_http_passenger_module.c:385: multiple definition of `passenger_agents_starter'
    objs/addon/nginx/ngx_http_passenger_module.o:/usr/local/src/passenger-3.0.13/ext/nginx/ngx_http_passenger_module.c:385: first defined here
    objs/addon/nginx/ngx_http_passenger_module.o: In function `ngx_str_null_terminate':
    /usr/local/src/passenger-3.0.13/ext/nginx/ngx_http_passenger_module.c:100: multiple definition of `ngx_str_null_terminate'
    objs/addon/nginx/ngx_http_passenger_module.o:/usr/local/src/passenger-3.0.13/ext/nginx/ngx_http_passenger_module.c:100: first defined here
    objs/addon/nginx/ngx_http_passenger_module.o:(.data+0x0): multiple definition of `ngx_http_passenger_module'
    objs/addon/nginx/ngx_http_passenger_module.o:(.data+0x0): first defined here
    objs/addon/nginx/Configuration.o: In function `union_station_filter':
    /usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:955: multiple definition of `union_station_filter'
    objs/addon/nginx/Configuration.o:/usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:955: first defined here
    objs/addon/nginx/Configuration.o: In function `passenger_create_loc_conf':
    /usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:263: multiple definition of `passenger_create_loc_conf'
    objs/addon/nginx/Configuration.o:/usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:263: first defined here
    objs/addon/nginx/Configuration.o: In function `passenger_create_main_conf':
    /usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:67: multiple definition of `passenger_create_main_conf'
    objs/addon/nginx/Configuration.o:/usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:67: first defined here
    objs/addon/nginx/Configuration.o: In function `passenger_init_main_conf':
    /usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:115: multiple definition of `passenger_init_main_conf'
    objs/addon/nginx/Configuration.o:/usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:115: first defined here
    objs/addon/nginx/Configuration.o: In function `passenger_merge_loc_conf':
    /usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:382: multiple definition of `passenger_merge_loc_conf'
    objs/addon/nginx/Configuration.o:/usr/local/src/passenger-3.0.13/ext/nginx/Configuration.c:382: first defined here
    objs/addon/nginx/Configuration.o:(.rodata+0x0): multiple definition of `passenger_commands'
    objs/addon/nginx/Configuration.o:(.rodata+0x0): first defined here
    objs/addon/nginx/ContentHandler.o: In function `passenger_content_handler':
    /usr/local/src/passenger-3.0.13/ext/nginx/ContentHandler.c:1341: multiple definition of `passenger_content_handler'
    objs/addon/nginx/ContentHandler.o:/usr/local/src/passenger-3.0.13/ext/nginx/ContentHandler.c:1341: first defined here
    objs/addon/nginx/StaticContentHandler.o: In function `passenger_static_content_handler':
    /usr/local/src/passenger-3.0.13/ext/nginx/StaticContentHandler.c:51: multiple definition of `passenger_static_content_handler'
    objs/addon/nginx/StaticContentHandler.o:/usr/local/src/passenger-3.0.13/ext/nginx/StaticContentHandler.c:51: first defined here
    collect2: ld returned 1 exit status
    make[1]: *** [objs/nginx] Error 1
    make[1]: Leaving directory `/usr/local/src/nginx-1.2.1'
    make: *** [build] Error 2 
```

**------------------------------------------**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:20:44.003

虽然它可能没有完全有用，但我能够通过使用来避免编译错误`nginx-1.0.14`- 但是，在启动 nginx 时，我确实遇到了分段错误.. 我确实让它完美地工作`nginx-1.2.2`

# exchangewebservices - EWS 自动发现不可接受的超时

> ID：11366255
> 
> 赞同：0
> 
> 时间：2012-07-06T16:36:13.367
> 
> 标签：exchangewebservices

如果我执行以下操作

```
var autodiscoverService = new AutodiscoverService{
    // Timeout = 100,  // Appears to have no impact
    EnableScpLookup = false,
    RedirectionUrlValidationCallback =
        delegate { return true; },
    PreAuthenticate = true,
    TraceEnabled = true,
    TraceFlags = TraceFlags.All,
    TraceListener = listener,
    Credentials =
        new WebCredentials("billg@microsoft.com", "anything", null)
}; 
```

我得到的第一条跟踪消息是：

```
<Trace Tag="AutodiscoverConfiguration" Tid="19" Time="2012-07-06 16:05:09Z">
   Determining which endpoints are enabled for host microsoft.com
</Trace> 
```

注意时间 (:09)。下一个事件大约是 40 秒后：

```
<Trace Tag="AutodiscoverConfiguration" Tid="19" Time="2012-07-06 16:05:51Z">
   Determining which endpoints are enabled for host autodiscover.microsoft.com
</Trace> 
```

此后很快（如预期的那样，身份验证失败）。

[如果我在https://www.testexchangeconnectivity.com/](https://www.testexchangeconnectivity.com/)上使用 Exchange 连接测试仪，即使我使用了无效的身份验证信息，我也几乎可以立即得到答案。

我没有要测试的有效 MS 帐户，但我请一个人对其进行测试，即使使用有效的用户名/密码，他们也看到相同的 40 秒超时。

我*发誓*就在几周前，我对此进行了测试，并没有发现 Microsoft 的自动发现设置有任何问题；我怀疑最近发生了一些变化。

虽然这个问题以 microsoft.com 为例，但我担心可能还有其他配置不当的 Exchange 设置会产生同样的延迟，这对我的用户来说会很糟糕。

我试过设置`autodiscoverService.Timeout = 100`，但没有帮助。

有什么方法可以更精细地控制 EWS 的自动发现功能？

我还能如何解决/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T04:55:31.373

我认为问题在于域“microsoft.com”没有在预期的庄园中实现自动发现。结果，自动发现服务会尝试所有可能的端点，最终失败。

我使用我的电子邮件地址/凭据尝试了您的代码，并根据 MS 在[AutodiscoverService.GetUserSettings Method](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.autodiscover.autodiscoverservice.getusersettings%28v=exchg.80%29)提供的示例发出了 GetUserSettings 请求。

我同时使用了 onprem Exchange 和 Office 365 进行测试，onprem Exchange 在大约 2 秒内完成，Office 365 从开始到完成需要 7 秒。

然后我更改了我的代码以使用您使用的电子邮件地址/凭据，我看到了相同的 40 超时。

您是否尝试过针对 microsoft.com 之外的另一个域进行测试？

# java - 有效数字字符串上的 NumberFormatException

> ID：11366257
> 
> 赞同：18
> 
> 时间：2012-07-06T16:36:15.143
> 
> 标签：java, android, string, encryption, base64

我已经看到了一些关于此的其他问题，但错误与字符串中的前导 0 有关。不幸的是，这不是我的情况。

我从外部源接收 base64 格式的加密数据，然后对其进行解码（使用包含的 Base64 库，因为 android sdk 版本为 7），解密消息，毕竟我有一个数字格式的简单字符串。

当我尝试将其转换为`Long`或`Integer`出现此错误时：

```
java.lang.NumberFormatException: Invalid long: "2551122"
    at java.lang.Long.invalidLong(Long.java:125)
    at java.lang.Long.parse(Long.java:362)
    at java.lang.Long.parseLong(Long.java:353)
    at java.lang.Long.parseLong(Long.java:319)
    at com.nzn.lol.LoginActivity$LoginTask.doInBackground(LoginActivity.java:98)
    at com.nzn.lol.LoginActivity$LoginTask.doInBackground(LoginActivity.java:1)
    at android.os.AsyncTask$2.call(AsyncTask.java:264)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 
```

为了检查我使用打印的输入，它确实是字符串“2551122”。当我尝试检查是否相等时，它也不正确

```
"2551122".equals(numberAsString) // Gives me false 
```

我认为这是一个编码问题，并尝试获取解码后的字节并以几种编码创建字符串，还尝试使用这些相同的几种编码解码 base64 字符串中的字节，但仍然不知道是什么导致了这个错误。

请任何帮助表示赞赏

**更新**

这是解密字符串的代码（加密器类）：

```
private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
    Cipher cipher = Cipher.getInstance(encryptionAlgorithim);
    cipher.init(Cipher.DECRYPT_MODE, skeySpec, new IvParameterSpec(iVector));
    byte[] decrypted = cipher.doFinal(encrypted);
    return decrypted;
}

public String decrypt(String encryptedString, String key) {

    byte[] keyBytes = key.getBytes();
    byte[] decoded = Base64.decode(encryptedString); // Decodes the string from base64 to byte[]
    byte[] result = decrypt(keyBytes, decoded);
    return new String(result);
} 
```

这是引发错误的方式：

```
Encryptor encryptor = new Encryptor();
Long.parseLong(encryptor.decrypt(base64String, secretKey)) // Throws me the error 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-06T16:58:40.463

明文可能包含看起来像 ASCII 数字但不是 ASCII 数字的字符。有关非 ASCII 数字的数字列表，请参阅[http://www.fileformat.info/info/unicode/category/Nd/list.htm 。](http://www.fileformat.info/info/unicode/category/Nd/list.htm)

要确认这一点，请对解密的文本和硬编码的 long as 字符串执行以下方法，并比较结果：

```
public static String displayCharValues(String s) {
    StringBuilder sb = new StringBuilder();
    for (char c : s.toCharArray()) {
        sb.append((int) c).append(",");
    }
    return sb.toString();
} 
```

编辑：明文似乎以不可见字符的 BOM（[字节顺序标记）开头。](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T09:39:02.167

注意前面或后面的空格，使用 trim() 来处理它们。

# spring-mvc - 在 Spring 3.1.1 中使用 javax.validation API

> ID：11366260
> 
> 赞同：2
> 
> 时间：2012-07-06T16:36:27.630
> 
> 标签：spring-mvc, validation, weblogic11g

我正在使用

*   春天 3.3.1
*   网络逻辑 11g
*   JDK 1.60_29

我决定要做基于 Java 的表单验证。当我去编译我的代码时，我发现我需要**javax.validation**库。所以，我把这些标签放在我的 pom.xml 中：

```
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.0.CR5</version>
</dependency> 
```

我得到了一个额外的罐子：

```
validation-api-1.0.CR5.jar 
```

我把它放到我的战争/WEB-INF/lib

我启动了 WebLogic 11g，Spring 咳出了血：

```
 [ERROR] - 2012-Jul-06 12:31:13 -  servlet.DispatcherServlet:initServletBean(): Context initialization failed
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.validation.beanvalidation.LocalValidatorFactoryBean#0': Invocation of init method failed; nested exception is javax.validation.ValidationException: Unable to find a default provider
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:283)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:64)
    at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:58)
    at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:48)
    at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:539)
    at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1981)
    at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1955)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1874)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3154)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1518)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:484)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:671)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:212)
    at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:44)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.BasicDeployment.activate(BasicDeployment.java:184)
    at weblogic.deploy.internal.targetserver.BasicDeployment.activateFromServerLifecycle(BasicDeployment.java:361)
    at weblogic.management.deploy.internal.DeploymentAdapter$1.doActivate(DeploymentAdapter.java:51)
    at weblogic.management.deploy.internal.DeploymentAdapter.activate(DeploymentAdapter.java:200)
    at weblogic.management.deploy.internal.AppTransition$2.transitionApp(AppTransition.java:30)
    at weblogic.management.deploy.internal.ConfiguredDeployments.transitionApps(ConfiguredDeployments.java:240)
    at weblogic.management.deploy.internal.ConfiguredDeployments.activate(ConfiguredDeployments.java:169)
    at weblogic.management.deploy.internal.ConfiguredDeployments.deploy(ConfiguredDeployments.java:123)
    at weblogic.management.deploy.internal.DeploymentServerService.resume(DeploymentServerService.java:180)
    at weblogic.management.deploy.internal.DeploymentServerService.start(DeploymentServerService.java:96)
    at weblogic.t3.srvr.SubsystemRequest.run(SubsystemRequest.java:64)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221)
Caused by: javax.validation.ValidationException: Unable to find a default provider
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:265)
    at org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:184)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 57 more 
```

谷歌搜索我一直看到 javax.validation API 提到 hibernate。鉴于此和错误消息，我猜测我需要休眠来提供一些东西，所以我在我的 war/WEB-INF/lib 中添加了一个休眠 jar，但这会导致更多错误。

关于如何让 Spring 3.1.1 和 javax.validation API 发挥出色的任何想法？

非常感谢提前

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:13:22.663

Weblogic 11G 与 Java EE 5 兼容，因此不实现 JSR-303、javax.validation 规范，该规范是作为 Java EE 6 的一部分添加的。因此，您必须为此添加*默认提供程序*，例如[Hibernate Validator](http://www.hibernate.org/subprojects/validator.html)：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.3.0.Final</version>
</dependency> 
```

或者，如果您升级到与 Java EE 6 兼容的应用程序服务器，则可以忽略此依赖关系，因为它已经包含在内。

顺便说一句，您可能需要考虑将您的 javax.validation 依赖更新为 version `1.0.0.GA`。

# php - 使用 SimpleXML 和没有 dom_import_simplexml() 将 CDATA 添加到 XML 元素

> ID：11366261
> 
> 赞同：0
> 
> 时间：2012-07-06T16:36:31.853
> 
> 标签：php, dom, simplexml

我有这个项目的最后期限（星期一）。它在 localhost 上运行良好，但是当我将它上传到我们的 Web 服务器时，我发现我们没有启用所有 DOM 包，并且我无法使用函数 dom_import_simplexml()。我的服务器管理员忽略了我的请求，可能是因为通知时间太短，而且我不可能那么快地将 XML 系统重写为数据库系统。

这似乎是我遇到的唯一错误。拜托，如果你有任何替代的想法，我很想听听。我很茫然，因为我找不到任何其他解决方案。我所要做的就是创建一些 XML 元素并用 CDATA 值填充它们，我不敢相信这不受 SimpleXML 支持！

请问，你有什么替代方案吗？我很开放，因为我不知道我能做什么。

```
 // Add a <pages /> element
  $xml->addChild('pages');
  // Populate it with data 
  foreach($pages as $page){
   $new = $xml->pages->addChild('page');
   $new->addAttribute('pid', $page['pid']);
   $new->addAttribute('title', $page['title']);
   if(isset($page['ancestor']))
    $new->addAttribute('ancestor', $page['ancestor']);
   $node = dom_import_simplexml($new);
   $no = $node->ownerDocument;
   $node->appendChild($no->createCDATASection($page['content']));
  } 
```

最后三行显然行不通，我不知道我还能用它们做什么！

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T19:39:52.093

他们不支持这一点令人费解。你必须破解流。

```
$xml->node = '<![CDATA[character data]]>'; 
echo preg_replace('/\]\]&gt;</', ']]><', preg_replace('/&lt;!\[CDATA/','<![CDATA',  $xml->asXML())); 
```

这是有问题的，也许这些字符串可能会出现在您的 cdata 中的某个地方。你必须承担的风险。

抱歉，我无法帮助您完成最后期限，但至少任何对使用 DOM 或无法使用 DOM 感到恼火的人都会有某种解决方案。

# javascript - jQuery(userInput) 对最终用户“安全”吗？

> ID：11366262
> 
> 赞同：2
> 
> 时间：2012-07-06T16:36:37.080
> 
> 标签：javascript, jquery, security

我正在开发一个小的 jQuery 选择器游戏。本质上，您得到了一些 HTML 代码，并且您必须编写 jQuery 选择器来选择突出显示的项目。

例如，假设您有：

```
<body>
  <p id="winner">Select this paragraph</p>
  <p> But not this one </p>
</body> 
```

正确的选择器之一是 $('#winner')

我目前计划在 "$(' ... ') " （...'s 所在的位置）中抓取字符串并执行以下操作：

```
var userInput = ...
var userSelectedItems = new Array();
userSelectedItems = $(userInput)

// Check if userSelectedItems == the array of elements supposed to be selected
// Change screen to green and allow users to press enter and continue to next challenge. 
```

现在，我知道如果您允许用户直接输入一些 PHP 或其他东西，可能会发生各种不好的事情，但是本质上允许用户输入/执行这种 javascript 命令有什么用吗？如果是这样，你建议我如何解决这种情况。我真的很喜欢制作这个教育游戏，所以非常感谢任何帮助。我真的看不出它有任何危险，因为它都在客户端的计算机上运行，​​对吧..？我不知道，也许我错过了什么

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:38:19.893

如果您允许用户使用其他用户的 Javascript，则可能会出现安全问题，但是如果执行代码的唯一人是输入代码的人，那么您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:40:37.713

客户端上的任何东西总是容易受到最终用户所做的更改的影响。

但是，如果您没有将任何信息保存到数据库中，并且该游戏没有任何竞争条件，我不会担心可能出现的任何安全问题。您始终可以在自己的 Javascript 中清理客户端输入，以确保非技术用户在此过程中不会更改游戏状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:40:14.167

它与 Javascript 没有什么不同，唯一的漏洞是如果有人能够将一些代码注入您的应用程序或数据库，从而显示在您的 Web 服务器上提供的内容。只要您的应用程序受到 XSS 和 SQL 注入的保护，您应该没问题，这将是相同的概念。

# android - 尝试切换活动时强制关闭

> ID：11366272
> 
> 赞同：0
> 
> 时间：2012-07-06T16:37:34.180
> 
> 标签：android

我试图使用一个按钮来切换我的应用程序中的活动，但它一直强制关闭。这是我的 AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.idiedastyear"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".tabView"
        android:label="@string/title_activity_tab_view" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".calculator"
        android:label="Calculator"  >
    </activity>
</application> 
```

这是具有按钮的活动：

```
 package com.idiedastyear;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.support.v4.app.NavUtils;

public class tabView extends Activity {

    Button calculator;

    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tab_view);
        calculator = (Button)findViewById(R.id.calculatorButton);

        calculator.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent calculatorIntent = new Intent(v.getContext(), calculator.class);
                startActivityForResult(calculatorIntent, 0);
            }
        });
    }

} 
```

如果有人可以提供帮助，那就太好了！谢谢！

编辑 [Logcat]：

> 07-06 17:38:06.683: D/memalloc(25668): ion: 映射缓冲区基数:0x5ce6c000 大小:3768320 偏移量:0 fd:53 07-06 17:38:08.885: D/memalloc(25668): ion:映射缓冲区基数：0x5d304000 大小：3768320 偏移量：0 fd:60 07-06 17:38:08.985：D/CLIPBOARD(25668)：在开始输入时隐藏剪贴板对话框：由其他人完成...！07-06 17:38:11.738: D/memalloc(25668): ion: 映射缓冲区基数:0x5d69c000 大小:3768320 偏移量:0 fd:63 07-06 17:38:12.168: D/AndroidRuntime(25668): 关闭VM 07-06 17:38:12.168: W/dalvikvm(25668): threadid=1: 线程以未捕获的异常退出 (group=0x40c72a68) 07-06 17:38:12.178: E/AndroidRuntime(25668): 致命异常：主要 07-06 17:38:12.178：E/AndroidRuntime(25668)：java.lang.RuntimeException：无法启动活动 ComponentInfo{com.idiedastyear/com.idiedastyear.calculator}：android.view。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:05:30.480

你不应该使用

```
 startActivityForResult(calculatorIntent, 0); 
```

而不是上面使用

```
startActivity(calculatorIntent); 
```

startActivityForResult(calculatorIntent, 0); 用于从您开始的活动中获得结果。如果你只想切换活动 startActivity 就足够了。尽管您应该发布 logcat 以获得更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:49:02.827

您的代码具有以下内容：

`Intent calculatorIntent = new Intent(v.getContext(), calculator.class);`

第二个参数应该是活动类名称。您似乎也将计算器实例名称与您正在启动的calculator.class 混淆了。

我建议如下：

1.  创建一个名为 CalculatorActivity 的 Activity 类。
2.  确保您已在 AndroidManifest.xml 中定义
3.  使用以下行启动 Activity：

`Intent calculatorIntent = new Intent(getBaseContext(), CalculatorActivity.class);`

此外，为了准确地帮助您，还请提供 LogCat 输出。

# c# - aspx 页面中的单值绑定

> ID：11366274
> 
> 赞同：0
> 
> 时间：2012-07-06T16:37:38.580
> 
> 标签：c#, asp.net, data-binding

我需要用数据库查询中的几十个属性填充一个 aspx 页面。我知道如何做的是在后面的代码中将属性分配给控件的 Text 属性，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    string param = Request.QueryString["param"];
    // p will have dozens of properties
    M.P p = new M.P(param);
    aLabel.Text = p.aProperty;
    anotherLabel.Text = p.anotherProperty; 
```

在 aspx 代码中：

```
<asp:Label ID="aLabel" runat="server"></asp:Label>
<asp:Label ID="anotherLabel" runat="server"></asp:Label> 
```

我想做的是直接在aspx页面中绑定属性，而不需要在后面的代码中进行赋值，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    string param = Request.QueryString["param"];
    M.P p = new M.P(param);
    this.DataBind();

Value of the aProperty: <%# p.aProperty %>
Value of the anotherProperty: <%# p.anotherProperty #> 
```

但是我错过了一些重要的东西，因为编译器给了我错误`The name 'p' does not exist in the current context`。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:44:43.350

你可以有这样的东西（`p`作为财产移动）

**C＃**

```
protected M.P p {get; set;}

protected void Page_Load(object sender, EventArgs e)
{
    string param = Request.QueryString["param"];
    p = new M.P(param);
} 
```

**ASPX**

```
<asp:Label ID="aLabel" runat="server"><%= p.aProperty %></asp:Label>
<asp:Label ID="anotherLabel" runat="server"><%= p.anotherProperty %></asp:Label> 
```

# php - 如何在 SonataAdminBundle 的上传字段上方显示当前图片？

> ID：11366278
> 
> 赞同：19
> 
> 时间：2012-07-06T16:38:03.990
> 
> 标签：php, file-upload, symfony, symfony-sonata

我正在使用**SonataAdminBundle**（带有 Doctrine2 ORM），并且我已经成功地将文件上传功能添加到我的图片模型中。

我想在**显示**和**编辑**`<img src="{{ picture.url }} alt="{{ picture.title }} />`页面上，在相关表单字段上方显示一个简单的标签（当然，前提是正在编辑的图片不是新的），以便用户可以看到当前照片，并决定是否改变与否。

经过数小时的研究，我一直无法弄清楚如何做到这一点。我想我需要覆盖一些模板，但我有点迷茫......有人可以给我一个提示吗？

*谢谢！*

这是我的 PictureAdmin 类的相关部分。

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('category', NULL, ['label' => 'Catégorie'])
        ->add('title', NULL, ['label' => 'Titre'])
        ->add('file', 'file', ['required' => false, 'label' => 'Fichier']) // Add picture near this field
        ->add('creation_date', NULL, ['label' => 'Date d\'ajout'])
        ->add('visible', NULL, ['required' => false, 'label' => 'Visible'])
        ->add('position', NULL, ['label' => 'Position']);
}

protected function configureShowFields(ShowMapper $showMapper)
{
    $showMapper
        ->add('id', NULL, ['label' => 'ID'])
        ->add('category', NULL, ['label' => 'Catégorie'])
        ->add('title', NULL, ['label' => 'Titre'])
        ->add('slug', NULL, ['label' => 'Titre (URL)'])
        ->add('creation_date', NULL, ['label' => 'Date d\'ajout'])
        ->add('visible', NULL, ['label' => 'Visible'])
        ->add('position', NULL, ['label' => 'Position']);
        // Add picture somewhere
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T18:26:12.617

我设法将图像放在编辑表单中的字段上方。但我的解决方案有点具体，因为我使用[Vich Uploader Bundle](https://github.com/dustin10/VichUploaderBundle/)来处理上传，所以由于 bundle helpers，图片 url 的生成稍微容易了一些。

让我们看一下我的示例，电影实体中的电影海报字段。这是我的管理课程的一部分：

```
//MyCompany/MyBundle/Admin/FilmAdmin.php

class FilmAdmin extends Admin {

protected function configureFormFields(FormMapper $formMapper)
{
 $formMapper
     ->add('title')
 ....
     ->add('poster', 'mybundle_admin_image', array(
                'required' => false,
                ))
} 
```

`mybundle_admin_image`由自定义字段类型处理，它只是文件类型的子类型，通过设置它的`getParent`方法：（不要忘记将您的类型类注册为服务）

```
//MyCompany/MyBundle/Form/Type/MyBundleAdminImageType.php

public function getParent()
{
    return 'file';
} 
```

然后我有一个扩展 Sonata 默认样式的模板，并将它包含在管理类中：

```
//MyCompany/MyBundle/Admin/FilmAdmin.php

public function getFormTheme() {
    return array('MyCompanyMyBundle:Form:mycompany_admin_fields.html.twig');
} 
```

最后，我有一个用于扩展基本文件类型的自定义图像类型的块：

```
//MyCompany/MyBundle/Resources/views/Form/mycompany_admin_fields.html.twig

{% block mybundle_admin_image_widget %}
{% spaceless %}
    {% set subject =  form.parent.vars.value %}
    {% if subject.id and attribute(subject, name) %}
        <a href="{{ asset(vich_uploader_asset(subject, name)) }}" target="_blank">
            <img src="{{ asset(vich_uploader_asset(subject, name)) }}" width="200" />
        </a><br/>
    {% endif %}
    {% set type = type|default('file') %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{% endspaceless %}
{% endblock %} 
```

这会导致上传字段上方显示 200 像素宽的图像预览（如果存在），链接到在新选项卡中打开的完整尺寸版本。您可以根据需要对其进行自定义，例如添加灯箱插件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T00:22:49.967

您可以通过助手（FormMapper->setHelps）或选项“帮助”在 FormMapper 上轻松地在编辑页面上执行此操作

```
protected function configureFormFields(FormMapper $formMapper) {
    $options = array('required' => false);
    if (($subject = $this->getSubject()) && $subject->getPhoto()) {
        $path = $subject->getPhotoWebPath();
        $options['help'] = '<img src="' . $path . '" />';
    }

    $formMapper
        ->add('title')
        ->add('description')
        ->add('createdAt', null, array('data' => new \DateTime()))
        ->add('photoFile', 'file', $options)
    ;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-06T21:32:33.253

您可以通过模板属性传递轻松地在显示页面上执行此操作`$showmapper`

```
->add('picture', NULL, array(
    'template' => 'MyProjectBundle:Project:mytemplate.html.twig'
); 
```

在您的模板中，您将获得当前对象，因此您可以调用 get 方法并拉取图像路径

```
<th>{% block name %}{{ admin.trans(field_description.label) }}{% endblock %}</th>
<td>
    <img src="{{ object.getFile }}" title="{{ object.getTitle }}" />
    </br>
    {% block field %}{{ value|nl2br }}{% endblock %}
</td> 
```

要在编辑模式下显示图像，您必须覆盖`fileType`或者您必须在顶部创建自己的 customType`fileType`

还有一些具有这种功能的包查看这个[GenemuFormBundle](http://knpbundles.com/genemu/GenemuFormBundle)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-10T11:28:32.603

# Symfony3 的解决方案

@kkochanski 的答案是迄今为止我发现的最干净的方法。这里是移植到**Symfony3**的版本。我还修复了一些错误。

为您的新表单类型创建一个新模板`image.html.twig`（完整路径：）`src/AppBundle/Resources/views/Form/image.html.twig`：

```
{% block image_widget %}
    {% spaceless %}
        {% set type = type|default('file') %}
        <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
        {% if image_web_path is not empty %}
            <img src="{{ image_web_path }}" alt="image_photo"/>
        {% endif %}
    {% endspaceless %}
{% endblock %} 
```

在您的中注册新的表单类型模板`config.yml`：

```
twig:
    form_themes:
        - AppBundle::Form/image.html.twig 
```

创建一个新的表单类型并将其保存为`ImageType.php`（完整路径：）`src/AppBundle/Form/Type/ImageType.php`：

```
<?php

namespace AppBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolver;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormBuilderInterface;

/**
 * Class ImageType
 *
 * @package AppBundle\Form\Type
*/
class ImageType extends AbstractType
{
    /**
     * @return string
     */
    public function getParent()
    {
        return 'file';
    }

    /**
     * @return string
     */
    public function getName()
    {
        return 'image';
    }

    /**
     * @param OptionsResolver $resolver
     */
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array(
            'image_web_path' => ''
        ));
    }

    /**
     * @param FormView $view
     * @param FormInterface $form
     * @param array $options
     */
    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars['image_web_path'] = $options['image_web_path'];
    }

    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->setAttribute('image_web_path', $options['image_web_path'])
        ;
    }
} 
```

如果你已经这样做了。您可以`ImageType`在实体管理类中导入新的：

```
use AppBundle\Form\Type\ImageType 
```

然后，最后使用没有任何 inline-html 或样板代码的新表单类型`configureFormFields`：

```
$formMapper
    ->add('imageFile', ImageType::class, ['image_web_path' => $image->getImagePath()])
; 
```

而不是`$image->getImagePath()`您必须调用自己的方法来将 URL 返回到您的图像。

## 截图

使用奏鸣曲管理员创建一个新的图像实体：

[![在此处输入图像描述](../Images/04a70a89d49aefd9675a4125ff3e7d22.png)](https://i.stack.imgur.com/TNovi.png)

使用奏鸣曲管理员编辑图像实体：

[![在此处输入图像描述](../Images/f16ab94d74441383ad42ddd7f3d733f9.png)](https://i.stack.imgur.com/a6wRW.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-21T07:02:08.620

你可以通过这种方式简单地做到

```
 $image = $this->getSubject();
    $imageSmall = '';

    if($image){
        $container = $this->getConfigurationPool()->getContainer();
        $media = $container->get('sonata.media.twig.extension');
        $format = 'small';
        if($webPath = $image->getImageSmall()){
            $imageSmall = '<img src="'.$media->path($image->getImageSmall(), $format).'" class="admin-preview" />';
        }
    }

   $formMapper->add('imageSmall', 'sonata_media_type', array(
      'provider' => 'sonata.media.provider.image',
      'context' => 'default',
      'help' => $imageSmall
   )); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-28T16:52:40.353

有一种简单的方法 - 但您会在上传按钮下方看到图片。SonataAdmin 允许将原始 HTML 放入任何给定表单字段的“帮助”选项中。您可以使用此功能嵌入图像标签：

```
protected function configureFormFields(FormMapper $formMapper) {

    $object = $this->getSubject();

    $container = $this->getConfigurationPool()->getContainer();

    $fullPath =     $container->get('request')->getBasePath().'/'.$object->getWebPath();

    $formMapper->add('file', 'file', array('help' => is_file($object->getAbsolutePath() . $object->getPlanPath()) ? '<img src="' . $fullPath . $object->getPlanPath() . '" class="admin-preview" />' : 'Picture is not avialable')

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-20T10:29:07.307

Teo.sk 使用 VichUploader 编写了显示图像的方法。我找到了一个选项，它允许您在没有此捆绑包的情况下显示图像。

首先，我们需要创建我们的 form_type。有教程：[symfony_tutorial](http://symfony.com/doc/2.0/cookbook/form/create_custom_field_type.html)

在主管理类中：

```
namespace Your\Bundle;

//.....//

class ApplicationsAdmin extends Admin {

//...//

public function getFormTheme() {
    return array_merge(
        parent::getFormTheme(),
        array('YourBundle:Form:image_type.html.twig') //your path to form_type template
    );

protected function configureFormFields(FormMapper $formMapper)
{
     $formMapper->add('file_photo', 'image', array(
            'data_class' => 'Symfony\Component\HttpFoundation\File\File',
            'label' => 'Photo',
            'image_web_path' => $this->getRequest()->getBasePath().'/'.$subject->getWebPathPhoto()// it's a my name of common getWebPath method
        ))
        //....//
        ;
}

} 
```

下一部分是 ImageType 类的代码。

```
namespace Your\Bundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\OptionsResolver\Options;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormBuilderInterface;

class ImageType extends AbstractType
{

    public function getParent()
    {
        return 'file';
    }

    public function getName()
    {
        return 'image';
    } 

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'image_web_path'         => ''
        ));
    }

    public function buildView(FormView $view, FormInterface $form, array $options)
    {
        $view->vars['image_web_path'] = $options['image_web_path'];
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
             ->setAttribute('image_web_path', $options['image_web_path'])
        ;
    }
} 
```

以及 image_type 树枝模板的结束时间。

```
{% block image_widget %}
{% spaceless %}
    {% set type = type|default('file') %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    <img src="{{ image_web_path }}" alt="image_photo"/>
{% endspaceless %}
{% endblock %} 
```

对我来说，它的工作！我还使用雪崩包来调整图像大小。

# jsf - Primefaces 3.3.1 选项列表性能很慢

> ID：11366280
> 
> 赞同：6
> 
> 时间：2012-07-06T16:38:21.400
> 
> 标签：jsf, jsf-2, primefaces

我最近将我的 primefaces 项目更新为新版本的 primefaces。

一切似乎都工作正常，但单击“全部添加”按钮时选择列表非常慢。我在列表中有一个巨大的数据集（大约 130 个项目）。[此论坛帖子](http://forum.primefaces.org/viewtopic.php?f=3&t=14393)中也描述了该问题。

**更新：** 一个非常基本的例子应该证明这个问题：

```
<p:pickList value="#{testForm.dualList}"
            var="id"
            itemLabel="#{id}"
            itemValue="#{id}" /> 
```

表格（在会话范围内）：

```
@Component("testForm")
@Scope("session")
public class TestForm implements Serializable {
     private DualListModel<Integer> dualList;
     //getter & setter methods
} 
```

创建 DualListModel 的方法：

```
prepareForm() {
    List<Integer> source = Lists.newLinkedList();
    List<Integer> target = Lists.newLinkedList();
    //add 100 integers as source:
    for(int i = 0; i <= 99; i++) {
       source.add(i);
    }

    DualListModel<Integer> model = new DualListModel<Integer>(source, target);
    testForm.setDualList(model);
} 
```

有什么我可以做的让它更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:00:29.867

这似乎是 primefaces-version 中的一个错误。我在 primefaces 论坛上找到了一些关于这个主题的其他帖子。

我已经实现了自己的选择列表，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:30:00.160

根据您在此处发布的代码量，我无法告诉您确切的问题。但根据您的意见，我可以建议您以下几点：

*   检查同一表单内的必填字段不会阻止提交。
*   不要使用嵌套表单
*   确保您的 ajax 请求序列（actionListener、action、onclick...等）
*   确保你的代码写得很好并且有意义。因为有时如果您的代码导致错误，您会注意到 primefaces 组件中的奇怪行为（不触发，不更新）。

希望这可以帮助你。

# google-api - 使用 Google Maps V3 保存多边形的纬度/经度

> ID：11366288
> 
> 赞同：5
> 
> 时间：2012-07-06T16:38:51.697
> 
> 标签：google-api, latitude-longitude, polygons

对于服务提供商网站，我使用下面的代码（从[这里](http://gmaps-samples-v3.googlecode.com/svn/trunk/drawing/drawing-tools.html)窃取）来显示地图并绘制每个提供商所覆盖的区域。如何返回和存储我绘制的每个形状的纬度/经度数组？我需要将其保存到数据库中，以便以后在搜索特定区域内的提供者时用于搜索查询。

```
<script type="text/javascript">
  var drawingManager;
  var selectedShape;
  var colors = ['#1E90FF', '#FF1493', '#32CD32', '#FF8C00', '#4B0082'];
  var selectedColor;
  var colorButtons = {};

  function clearSelection() {
    if (selectedShape) {
      selectedShape.setEditable(false);
      selectedShape = null;
    }
  }

  function setSelection(shape) {
    clearSelection();
    selectedShape = shape;
    shape.setEditable(true);
    selectColor(shape.get('fillColor') || shape.get('strokeColor'));
  }

  function deleteSelectedShape() {
    if (selectedShape) {
      selectedShape.setMap(null);
    }
  }

  function selectColor(color) {
    selectedColor = color;
    for (var i = 0; i < colors.length; ++i) {
      var currColor = colors[i];
      colorButtons[currColor].style.border = currColor == color ? '2px solid #789' : '2px solid #fff';
    }

    // Retrieves the current options from the drawing manager and replaces the
    // stroke or fill color as appropriate.
    var polylineOptions = drawingManager.get('polylineOptions');
    polylineOptions.strokeColor = color;
    drawingManager.set('polylineOptions', polylineOptions);

    var rectangleOptions = drawingManager.get('rectangleOptions');
    rectangleOptions.fillColor = color;
    drawingManager.set('rectangleOptions', rectangleOptions);

    var circleOptions = drawingManager.get('circleOptions');
    circleOptions.fillColor = color;
    drawingManager.set('circleOptions', circleOptions);

    var polygonOptions = drawingManager.get('polygonOptions');
    polygonOptions.fillColor = color;
    drawingManager.set('polygonOptions', polygonOptions);
  }

  function setSelectedShapeColor(color) {
    if (selectedShape) {
      if (selectedShape.type == google.maps.drawing.OverlayType.POLYLINE) {
        selectedShape.set('strokeColor', color);
      } else {
        selectedShape.set('fillColor', color);
      }
    }
  }

  function makeColorButton(color) {
    var button = document.createElement('span');
    button.className = 'color-button';
    button.style.backgroundColor = color;
    google.maps.event.addDomListener(button, 'click', function() {
      selectColor(color);
      setSelectedShapeColor(color);
    });

    return button;
  }

   function buildColorPalette() {
     var colorPalette = document.getElementById('color-palette');
     for (var i = 0; i < colors.length; ++i) {
       var currColor = colors[i];
       var colorButton = makeColorButton(currColor);
       colorPalette.appendChild(colorButton);
       colorButtons[currColor] = colorButton;
     }
     selectColor(colors[0]);
   }

  function initialize() {
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 10,
      center: new google.maps.LatLng(22.344, 114.048),
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      disableDefaultUI: true,
      zoomControl: true
    });

    var polyOptions = {
      strokeWeight: 0,
      fillOpacity: 0.45,
      editable: true
    };
    // Creates a drawing manager attached to the map that allows the user to draw
    // markers, lines, and shapes.
    drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.POLYGON,
      markerOptions: {
        draggable: true
      },
      polylineOptions: {
        editable: true
      },
      rectangleOptions: polyOptions,
      circleOptions: polyOptions,
      polygonOptions: polyOptions,
      map: map
    });

    google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
        if (e.type != google.maps.drawing.OverlayType.MARKER) {
        // Switch back to non-drawing mode after drawing a shape.
        drawingManager.setDrawingMode(null);

        // Add an event listener that selects the newly-drawn shape when the user
        // mouses down on it.
        var newShape = e.overlay;
        newShape.type = e.type;
        google.maps.event.addListener(newShape, 'click', function() {
          setSelection(newShape);
        });
        setSelection(newShape);
      }
    });

    // Clear the current selection when the drawing mode is changed, or when the
    // map is clicked.
    google.maps.event.addListener(drawingManager, 'drawingmode_changed', clearSelection);
    google.maps.event.addListener(map, 'click', clearSelection);
    google.maps.event.addDomListener(document.getElementById('delete-button'), 'click', deleteSelectedShape);

    buildColorPalette();
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T07:36:49.417

这是你需要的东西。我对其进行了测试，并且效果很好。只需复制然后享受它。

```
<html>

<!--Here you will create a polygon by tools that Google maps "drawingManager" gives to you and then you have an array named "coordinates" as an output. This array saves all latLng of the polygon. When you edit the polygon it also edit this variable too.
!-->

<head>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true&libraries=drawing"></script>

<!--Global variables!-->
<script>
//This variable gets all coordinates of polygone and save them. Finally you should use this array because it contains all latitude and longitude coordinates of polygon.
var coordinates = [];

//This variable saves polygon.
var polygons = [];
</script>

<script>
//This function save latitude and longitude to the polygons[] variable after we call it.
function save_coordinates_to_array(polygon)
{
    //Save polygon to 'polygons[]' array to get its coordinate.
    polygons.push(polygon);

    //This variable gets all bounds of polygon.
    var polygonBounds = polygon.getPath();

    for(var i = 0 ; i < polygonBounds.length ; i++)
    {
        coordinates.push(polygonBounds.getAt(i).lat(), polygonBounds.getAt(i).lng());
        alert(i);
    }   
}
</script>

<script>
function initialize()
{
    //Create a Google maps.
    var map = new google.maps.Map(document.getElementById('map'), {zoom: 12, center: new google.maps.LatLng(32.344, 51.048)});

    //Create a drawing manager panel that lets you select polygon, polyline, circle, rectangle or etc and then draw it.
    var drawingManager = new google.maps.drawing.DrawingManager();
    drawingManager.setMap(map);

    //This event fires when creation of polygon is completed by user.
    google.maps.event.addDomListener(drawingManager, 'polygoncomplete', function(polygon) {
        //This line make it possible to edit polygon you have drawed.
        polygon.setEditable(true);

        //Call function to pass polygon as parameter to save its coordinated to an array.
        save_coordinates_to_array(polygon);

        //This event is inside 'polygoncomplete' and fires when you edit the polygon by moving one of its anchors.
        google.maps.event.addListener(polygon.getPath(), 'set_at', function () {
            alert('changed');
            save_coordinates_to_array(polygon);
            });

        //This event is inside 'polygoncomplete' too and fires when you edit the polygon by moving on one of its anchors.
        google.maps.event.addListener(polygon.getPath(), 'insert_at', function () {
            alert('also changed');
            save_coordinates_to_array(polygon);
            });
    });
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
<div style="width:1024px; height:768px;" id="map"></div>
</body>

</html> 
```

# emacs - 缺少 emacs 版本控制模式行

> ID：11366289
> 
> 赞同：1
> 
> 时间：2012-07-06T16:38:55.567
> 
> 标签：emacs, visual-c++

最终从 emacs 21.x 升级到 23.x 后，我的模式行中丢失了版本控制状态信息。

[emacs 手册](http://www.gnu.org/software/emacs/manual/html_node/emacs/VC-Mode-Line.html#VC-Mode-Line)没有显示任何内容，因为它只是说明状态信息应该存在并且没有提供有关打开/关闭它的信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:07:09.510

`vc-handled-backends`如果这是空白或不包含源代码控制工具，您设置了什么，将不会为该工具启用 vc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T00:54:31.543

你没有说你使用什么操作系统或版本控制系统，但可能是 emacs 无法找到正确的命令行程序。在带有 emacs 24.3（来自[http://emacsformacosx.com/](http://emacsformacosx.com/)）的 OSX 上，我能够通过设置正确的路径来恢复 vc 模式行。就我而言，使用来自 macports 的 mercurial 二进制文件：

```
(setq-default vc-hg-program "/opt/local/bin/hg") 
```

其他 vcs 有类似的变量`vc-git-program`,`vc-svn-program`等。

# linq - 使用 EF 和 lambda 全选

> ID：11366293
> 
> 赞同：0
> 
> 时间：2012-07-06T16:39:06.920
> 
> 标签：linq, entity-framework, lambda

我写了这段很棒的代码，但现在我无法使用。

当前**工作**示例：

```
complete item = ReliableExecution.RetryWithExpression<complete, complete>(u => u.FirstOrDefault(x => x.str_en == segment)); 
```

这是 RetryWithExpression 代码的一部分：

```
public static TValue RetryWithExpression<T, TValue>(Func<ObjectSet<T>, TValue> func, Int32 retryInfiniteLoopGuard = 0)
     where T : class
{
    RetryPolicy policy = RetryPolicyProvider.GetSqlAzureRetryPolicy();
    using (DDEntities dataModel = new DDEntities())
    {
        var entitySet = dataModel.CreateObjectSet<T>();

              ...

                var query = policy.ExecuteAction(() => (func(entitySet)));

              ... 
```

**现在我的问题是如何将上述选择查询更改为 SELECT * ？**

我确实尝试过，但它告诉我一些我不明白的错误：

```
complete item = ReliableExecution.RetryWithExpression<complete, complete>(u => u.Select(x => x.str_en != "")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:19:18.440

`IQueryable<complete> items = ReliableExecution.RetryWithExpression<complete, IQueryable<complete>>(u => u.Where(x => x.str_en != ""));`?

# python - sqlalchemy引擎多个数据库与mysql

> ID：11366294
> 
> 赞同：0
> 
> 时间：2012-07-06T16:39:10.683
> 
> 标签：python, sql, sqlalchemy

我尝试了一些不同的事情，但我无法成功，所以也许这是不可能的。

当我创建一个 sqlalchemy 引擎时

```
 create_engine('mysql://user@host/database') 
```

看起来数据库是强制性的，而它没有使用 sqlite 后端。但是由于我必须在同一台服务器上操作许多不同的数据库，所以我想避免创建多个引擎..

有办法吗？否则我可以创建一个超级引擎来创建所有需要的引擎，然后根据请求的数据库名称重定向到正确的引擎......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:50:09.340

为您的每个数据库创建一次引擎将是我的方式。您将能够根据需要访问它们，而不是创建引擎然后销毁它然后重新创建等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:49:08.943

一个引擎几乎等于一个可连接的数据库。[请参阅 SQLAlchemy 文档](http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html)。您可以拥有任意数量的引擎，也可以丢弃不再需要的引擎。

# php - 根据值将字符串拆分为变量

> ID：11366295
> 
> 赞同：0
> 
> 时间：2012-07-06T16:39:17.560
> 
> 标签：php

我有以下 PHP 代码，并希望将字符串拆分为单独的变量：

```
$names = "login1,login2,login3,login4,...loginN"; 
```

示例结果：

```
$login1 = "login1";

$login2 = "login2";

$login3 = "login3";

$login4 = "login4"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T16:42:10.497

```
foreach (explode(',', $names) as $name) {
    $$name = $name;
} 
```

但说真的，你到底为什么要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:53:34.323

如果需要更灵活的提取，那么您可以通过[preg_split()](http://us2.php.net/manual/en/function.preg-split.php)使用正则表达式：

```
foreach(preg_split('/,/', $names) as $login){
    $$login = $login;
}; 
```

# php - Yii php Paypal 信用卡支付集成

> ID：11366297
> 
> 赞同：6
> 
> 时间：2012-07-06T16:39:30.807
> 
> 标签：php, yii

我知道这听起来很模糊，但我正在寻找一种方法来为基于信用的购买系统构建 Yii paypal 信用卡支付方法。有没有一个好的 yii php 库可以做到这一点？有什么好的资源来学习如何做吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T09:21:34.783

试试这个扩展[http://www.yiiframework.com/extension/paypal/](http://www.yiiframework.com/extension/paypal/)

它具有 PayPals Direct Payment API 集成使用组件的“DoDirectPayment”方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T17:47:53.190

您可能想看看这些扩展
[http://www.yiiframework.com/extension/tiny-paypal-shop/](http://www.yiiframework.com/extension/tiny-paypal-shop/)
[http://www.yiiframework.com/extension/ppext/](http://www.yiiframework.com/extension/ppext/)

以及与 ppext
[http相关的论坛主题://www.yiiframework.com/forum/index.php/topic/12696-ppext-paypal-extension/](http://www.yiiframework.com/forum/index.php/topic/12696-ppext-paypal-extension/)

教程
[http://alanhollis.com/yii-using-ppextbuttonmanager/](http://alanhollis.com/yii-using-ppextbuttonmanager/)

编辑：维基文章[http://www.yiiframework.com/wiki/433/paypal-integration-and-ipn-instant-payment-notification/](http://www.yiiframework.com/wiki/433/paypal-integration-and-ipn-instant-payment-notification/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T16:49:45.620

贝宝像其他支付服务一样提供两种支付系统。

一种是异地，用户从您单击的 iframe（通常）重定向到父页面。

另一个选项是集成的，您的交易无缝地进入您的网站，因此您永远不会离开页面。

您的第一步是决定您想要其中的哪一个、成本、您愿意处理的支付网关费用。如果您足够大，需要一个商家帐户。

# java - 图标比较

> ID：11366300
> 
> 赞同：0
> 
> 时间：2012-07-06T16:39:48.393
> 
> 标签：java

我正在尝试做名为 TicTacToe 的游戏，但现在我停在了一点上：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

    if (player==true){
        jButton1.setIcon(new javax.swing.ImageIcon("x2.png"));
        player=false;
    } else {
        jButton1.setIcon(new javax.swing.ImageIcon("o2.png"));
        player=true;
    }

    if (this.jButton1.getIcon()==this.jButton2.getIcon()){
        JOptionPane.showMessageDialog(null,"Win!");
    }
} 
```

我已经为所有按钮做了这个。

当我有这三个具有相同图标的按钮时，不会出现该消息。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:43:18.307

检查 和 的`==`差异`equals`。我怀疑你有不同的对象。和`==`你一起检查它是否是同一个对象。你应该有一个你应该比较的“玩家变量”。实现一个方法`jButton1.getTeamName()`并比较该值。

# java - Java 单一继承和异常/可抛出类

> ID：11366307
> 
> 赞同：1
> 
> 时间：2012-07-06T16:40:29.323
> 
> 标签：java, inheritance

我知道语言规范只声明了单一继承，但我对这个例子*似乎*违反了规则感到困惑。

如果我写一个`Exception`类，我会写：

```
public class MyException extends Exception {
    //class body
} 
```

只是，如果你[看这里](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html)，你会注意到类`Exception`extends `Throwable`。

所以在我看来，我们有（理论代码示例）

```
 public class MyException extends Throwable, Exception {
    //class body
 } 
```

为什么*不是*这样？

我想这与每个类扩展`Object`但也可以子类化一次的方式相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:42:45.297

层次结构中可以有多个级别。一个类可以扩展一个本身扩展另一个类（或实现接口）的类。这与一个类扩展两个类本身不同（在理论上或实践中）。

Java 中的接口确实提供了与其他语言中的多重继承相同的功能（因为一个类*可以*实现多个接口），但这不是您在这里看到的。这是具有多个祖先类的标准单继承。

描绘一个（生物学上奇怪的）家谱可能会有所帮助，其中每个孩子都有一个父母。这些孩子也可能有一个祖父母，但在结构的任何级别上都不会超过一个节点。

您正在想象一个看起来像这样的结构：

```
A   B
 \ /
  C 
```

但实际上是这样的：

```
A
|
B
|
C 
```

最明显的区别是更改`A`不会影响`B`第一个图中的实例，但会影响`B`第二个图中的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:46:09.010

> 我想这与每个类扩展 Object 的方式相同，但也可以子类化一次？

不完全的。这样想：

```
class A { } 
```

可以认为是

```
class A extends Object { } 
```

但

```
class A extends B { } 
```

应该是

```
class B extends Object { }
class A extends B { } 
```

并不是

```
class A extends B, Object { } 
```

在类继承层次结构（不包括接口的实现）中，每个类都可以有一个父级，除了`Object`树的根。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T16:46:53.127

这是一个继承链

对象 -> Throwable -> 异常 -> MyException

请参阅此处[http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:50:04.690

因此，在您的示例`MyException`中`Throwable`，除了是`Exception`. 因此层次结构是这样的：

```
Throwable -> Exception -> MyException 
```

因此，可以说层次结构实际上是这样的：

```
Throwable -> MyException  
Exception -> MyException 
```

虽然仍然`MyException`是 a`Throwable`和 an `Exception`。有关多重继承带来的解释，请看[这里](http://en.wikipedia.org/wiki/Diamond_problem)：

“在具有多重继承的面向对象编程语言中，菱形问题（有时称为“致命的死亡菱形” [1](http://en.wikipedia.org/wiki/Diamond_problem)）是当两个类 B 和 C 继承自 A，而类 D 继承自两个 B 时出现的歧义和 C。如果 D 调用在 A 中定义的方法（并且没有覆盖该方法），并且 B 和 C 以不同方式覆盖了该方法，那么它从哪个类继承：B 还是 C？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T16:52:02.593

一个类可以扩展一个可以扩展另一个类的类。但是一个类不能继承两个类。会造成**歧义**。这就是java**不支持多重继承**的原因。

MyException 扩展 Exception 扩展 Throwable。那就是继承链。它不会引起歧义。

# c++ - QtT如何在QMainWindow中更改中央小部件时保存数据/状态

> ID：11366314
> 
> 赞同：0
> 
> 时间：2012-07-06T16:40:50.057
> 
> 标签：c++, qt, user-interface

我继承了 QmainWindow 类，用作我正在构建的应用程序的主窗口。
我已将中央小部件设置为指向我创建的另一个类的指针。

```
//main window constructor
postEntryWidget = 0; // null pointer to another class that extends QWidget
dataEntryWidget = new Data_Entry_Widget; //extends QWidget
setCentralWidget(dataEntryWidget); //set the widget in the main window 
```

当用户点击一个动作时，这会将中央小部件设置为另一个指向另一个小部件类的指针。

```
/*
 *this is the implementation of the slot that would be connected to the QAction
 *connected to the postEntryWidget slot
 */
if(!postEntryWidget)
    postEntryWidget = new Post_Entry_Widget;
setCentralWidget(postEntryWidget);

/*
 *this is the implementation of the slot that would be connected to the QAction
 *connected to the dataEntryWidget slot
 */
if(!dataEntryWidget)
    dataEntryWidget = new Post_Entry_Widget;
setCentralWidget(dataEntryWidget); 
```

在视图之间来回切换时会中断。如果我在前面的视图中添加一个空点，当我回到那个视图时，我会丢失数据。

```
 /*
 *this is the implementation of the slot that would be connected to the QAction
 *connected to the postEntryWidget slot
 */
dataEntryWidget = 0; //set the previous widget to a null pointer but loses data
if(!postEntryWidget)
    postEntryWidget = new Post_Entry_Widget;
setCentralWidget(postEntryWidget); 
```

如何在不创建自定义数据结构的情况下保持两个视图之间的状态，或者这是一种不好的做法。我最熟悉 php 和 web 开发，所以我不确定这是否是最好的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:48:21.347

它比看起来更复杂。问题是，当`setCentralWidget()`被调用时，当前`centralWidget()`被删除。为了保留其内容，您需要通过将其重新设置为`NULL`or来将其从窗口中删除`0`。尝试将您的代码更改为：

```
if(!postEntryWidget)
    postEntryWidget = new Post_Entry_Widget;
if (centralWidget()) centralWidget()->setParent(0); //reparent if exists
setCentralWidget(postEntryWidget);

/*
...
*/

if(!dataEntryWidget)
    dataEntryWidget = new Post_Entry_Widget;
if (centralWidget()) centralWidget()->setParent(0); //reparent if exists
setCentralWidget(dataEntryWidget); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:15:59.840

不完全确定你的目标是什么。但是，如果您试图让某人能够回到他们正在从事的工作，那么也许您最好使用选项卡小部件而不是隐藏该工作的存在？

[QTabWidget 文档](http://doc.qt.nokia.com/4.7-snapshot/qtabwidget.html)

[Qt 选项卡式对话框示例](http://doc.qt.nokia.com/4.7-snapshot/dialogs-tabdialog.html)

所以你要把它作为你的中心小部件，并在它下面插入`Post_Entry_Widget`和`Data_Entry_Widget`实例。这样做的一个优点是 Qt 为您管理选项卡切换。

如果您不想要选项卡，还有一个[QStackedWidget](http://doc.qt.nokia.com/4.7-snapshot/qstackedwidget.html)，它只允许您以编程方式在一组小部件之间切换。

# java - Java WebDriver：如何获取 Coordinates 类的实例？

> ID：11366318
> 
> 赞同：0
> 
> 时间：2012-07-06T16:41:34.880
> 
> 标签：java, mouse, webdriver, coordinates, selenium-webdriver

我正在尝试自动化 GWT Web 应用程序，但对按钮的标准点击不起作用。因此，我正在模拟鼠标事件。网上找到的代码示例：

```
Mouse mouse = ((HasInputDevices)driver).getMouse();
mouse.mouseDown((Coordinates)myButton.getLocation());
mouse.mouseUp((Coordinates)myButton.getLocation()); 
```

但后来我得到：

```
Exception in thread "main" java.lang.ClassCastException: Point cannot be cast to Coordinates 
```

如何获得坐标对象的有效实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:15:52.427

这就是你的做法。。

```
Locatable button = (Locatable) myButton;
Mouse mouse = ((HasInputDevices)driver).getMouse();
mouse.mouseDown(button.getCoordinates());
mouse.mouseUp(button.getCoordinates()); 
```

# php - 正则表达式适用于某些服务器而不适用于其他服务器

> ID：11366321
> 
> 赞同：0
> 
> 时间：2012-07-06T16:42:08.493
> 
> 标签：php, regex

我在调试正则表达式时遇到问题。首先，代码（这是完整的文件......抱歉缺少换行符 - 请参阅[http://pastebin.com/h5CeiY5F](http://pastebin.com/h5CeiY5F)以获取 pastebin）：

```
<?php
$matches = null;
$returnValue = preg_match('#" FirstDownType="[A-Z][0-9]+"/><Play PlayDescription="Penalty[^<]+/>#', '<Play DownDistanceYardline="3-1-GB 7" EarnedFirstDown="False" PlayDescription="(3:40) 71-C.Brown reported in as eligible. 28-M.Ingram left guard to GB 7 for no gain (94-J.Wynn; 95-H.Green)."/><Play DownDistanceYardline="4-1-GB 7" EarnedFirstDown="False" PlayDescription="(3:10) 9-D.Brees pass incomplete short left to 23-P.Thomas."/><Play Header="Green Bay Packers at 3:02"/><Play DownDistanceYardline="1-10-GB 7" EarnedFirstDown="False" PlayDescription="(3:02) 44-J.Starks right tackle to GB 11 for 4 yards (94-C.Jordan)."/><Play DownDistanceYardline="2-6-GB 11" EarnedFirstDown="False" PlayDescription="(2:26) 12-A.Rodgers pass deep right to 85-G.Jennings pushed ob at GB 33 for 22 yards (33-J.Greer)." FirstDownType="P17"/><Play PlayDescription="Penalty on NO-33-J.Greer, Defensive Pass Interference, declined."/><Play DownDistanceYardline="1-10-GB 33" EarnedFirstDown="True" PlayDescription="(2:01) (Shotgun) 12-A.Rodgers pass short left to 85-G.Jennings to GB 47 for 14 yards (21-P.Robinson)." FirstDownType="P18"/><Play DownDistanceYardline="1-10-GB 47" EarnedFirstDown="True" PlayDescription="(1:22) 12-A.Rodgers pass short right to 87-J.Nelson pushed ob at NO 44 for 9 yards (27-M.Jenkins)."/><Play DownDistanceYardline="2-1-NO 44" EarnedFirstDown="False" PlayDescription="(:47) 44-J.Starks right tackle to NO 42 for 2 yards (51-J.Vilma; 94-C.Jordan)." FirstDownType="R19"/><Play DownDistanceYardline="1-10-NO 42" EarnedFirstDown="True" PlayDescription="(:07) 25-R.Grant right tackle to NO 40 for 2 yards (51-J.Vilma, 58-S.Shanle)."/><QuarterSummary Team="New Orleans Saints" Score="27" TimeOfPossession="10:47" FirstDownsRushing="3" FirstDownsPassing="5" FirstDownsPenalty="1" FirstDownsTotal="9" ThirdDownEfficiency="1/3" FourthDownEfficiency="0/1"/><QuarterSummary Team="Green Bay Packers" Score="35" TimeOfPossession="4:13" FirstDownsRushing="1" FirstDownsPassing="2" FirstDownsPenalty="0" FirstDownsTotal="3" ThirdDownEfficiency="0/1" FourthDownEfficiency="0/0"/>', $matches);
print_r($matches); 
```

当我在几个沙箱（如[http://sandbox.onlinephpfunctions.com/](http://sandbox.onlinephpfunctions.com/)或 functions-online.com/preg_match.html ）上运行它时，它返回：

```
Array ( [0] => " FirstDownType="P17"/><Play PlayDescription="Penalty on NO-33-J.Greer, Defensive Pass Interference, declined."/> ) 
```

这就是我正在寻找的预期输出。

但是，当我在我的服务器上运行它时（并且我已经在两台不同的服务器上对其进行了测试），我得到：

```
Array ( [0] => " FirstDownType="P17"/> ) 
```

我能想到的只是 preg_match 在 PHP 5.3.10（沙盒上的版本）和 PHP 5.3.6（我们的版本）之间发生了变化，或者我们的 Ubuntu 版本配置错误？

我真的很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:08:42.590

您需要使用正则表达式匹配吗？改用 XML 解析器怎么样？

尝试使用[`SimpleXML`](http://php.net/manual/en/book.simplexml.php)来获取您需要的节点。

```
$sXML = new SimpleXMLElement('<xml>'.$xml.'</xml>'); 
```

然后您可以使用[XPath](http://www.w3schools.com/xpath/xpath_syntax.asp)找到您需要的元素。

```
$play = $sXML->xpath('//Play[starts-with(@PlayDescription, "Penalty")]/preceding-sibling::Play[@FirstDownType]'); 
```

这将选择以开头的`Play`元素之前的`Play`元素。`PlayDescription``"Penalty"`

演示：[http ://codepad.viper-7.com/ECQKcB](http://codepad.viper-7.com/ECQKcB)

# sql - 使用 SQL 组合和随机化列

> ID：11366328
> 
> 赞同：0
> 
> 时间：2012-07-06T16:42:48.013
> 
> 标签：sql, sql-server-2008-r2

我有一列数据需要并排随机复制 X 次。随机化是为了进行一项调查，其中列表混杂在一起以进行无偏见的选择，并且手动进行会花费相当长的时间。

我是 SQL 新手，所以请多多包涵。以我有限的知识，这就是我认为查询应该如何工作的方式。

```
SELECT MAKEMODEL, (SELECT MAKEMODEL FROM BWMM ORDER BY NEWID())
FROM BWMM
ORDER BY NEWID() 
```

本质上这会给我这样的东西

```
A E 
B D 
C B 
D A
E C 
```

你明白了。我很感激你能给我的任何反馈或指导。

PS：从概念上讲，它很像这篇关于 VBA 解决类似问题[Randomize Columns的帖子](https://stackoverflow.com/questions/10651553/randomize-columns)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:16:19.373

我将从显示我的测试数据开始：

```
create table BWMM
(
    makemodel   char(1)
)
insert into BWMM(makemodel)
select 'A' union
select 'B' union
select 'C' union
select 'D' union
select 'E' 
```

以下应为您提供唯一列中随机选择的前 n 行（在本例中为 n = 5）的单行数据：

```
;with cte as (
    select *,
        [row] = row_number() over(order by newID())
    from BWMM
)
select min(case when row=1 then makemodel else null end),
    min(case when row=2 then makemodel else null end),
    min(case when row=3 then makemodel else null end),
    min(case when row=4 then makemodel else null end),
    min(case when row=5 then makemodel else null end)
from cte 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:22:35.450

```
WITH
  set_a
AS
(
  SELECT ROW_NUMBER() OVER (ORDER BY NEWID()) AS rand_id, * FROM BWWM
)
,
  set_b
AS
(
  SELECT ROW_NUMBER() OVER (ORDER BY NEWID()) AS rand_id, * FROM BWWM
)
SELECT
  *
FROM
  set_a
INNER JOIN
  set_b
    ON set_a.rand_id = set_b.rand_id 
```

您实际上不需要随机化两组的顺序。如果一个是随机的，则配对是随机的。在这种情况下，可以按表的主键对一组进行排序*（以最快的方式生成顺序 ID）*。

# c++ - 在 C++ 中实现一个事件并定期驱动“脚本语言”？

> ID：11366329
> 
> 赞同：1
> 
> 时间：2012-07-06T16:42:49.600
> 
> 标签：c++, architecture, mpi

**背景：**
我想在 C++ 中创建一个自动化框架，一方面“传感器”和“参与者”，另一方面“逻辑引擎”可以连接到“核心”。
“传感器”和“执行器”可能连接到运行“核心”的机器，但有些也可以通过现场总线或普通计算机网络访问。有些可能连续或周期性工作（例如每 100 毫秒一个新值），其他可能工作事件驱动（例如，仅当开关被 [de] 激活时，消息才会带有新状态）。
“逻辑引擎”可以插入到内核中，例如由嵌入式众所周知的脚本语言（Perl、Python、Lua、...）组成。
“核心”将传感器/参与者信息路由到订阅的脚本并调用它们。有些是在事件发生之后，有些是在调度程序中定义的周期性的。

**其他要求：**

*   运行此自动化应用程序的系统（“服务器”）也可能非常小（500MHz x86 和 256 MB RAM），或者可能甚至很小（基于 OpenWRT 的路由器），因为功耗是一个问题
    => 效率很重要
    => 多核支持不目前，但我相信它很快就会变得重要 - 所以设计必须支持它
*   某种故障保存模式必须是可能的，例如两个系统互相监视
*   应用程序/框架将是 GPL => 所有使用的库必须兼容
*   服务器将运行 Linux，但跨平台会很好

**最大的问题：**
这种应用程序/框架的最佳架构是什么？

**我的理由：**
不要重新发明轮子，我想使用 MPI 来完成所有的事件处理。
这将使我能够专注于相关的东西而不是消息处理，尤其是当两个或多个“服务器”一起工作时（相互看门狗以及每个都有一些传感器和参与者连接）。每个传感器和参与者处理程序以及逻辑引擎本身只需要实现一个预定义的基于 MPI 的接口，因此可以保存崩溃。当核心不再响应时，核心可以重新启动。

**附加问题：**

*   使用 MPI 甚至可能吗？（它会被使用有点脱离上下文......）
*   MPI的开销会不会太大？我应该使用套接字和线程自己编写吗？
*   在这种情况下是否有其他可能更适合的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:30:43.890

您应该能够使用 MPI 构建您的系统，但我认为 MPI 过于关注高性能计算。此外，由于它是为 C 设计的，它并不真正适合面向对象的编程方式。IMO 还有其他更适合您需求的方法：

*   [Boost ASIO](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio.html)可能非常适合设计您的系统。它既包括网络功能，又有助于事件驱动编程（这可能是设计系统的好方法）。您可以查看[Think-Async](http://blog.think-async.com/)网页，了解一些使用 ASIO 进行事件驱动编程的示例。

*   您还可以使用普通线程并从 ASIO 借用网络功能（不使用事件驱动的编程部分）。如果您可以使用 C++11，那么您可以直接使用`std::thread`所有其他可用的功能（互斥锁、条件变量、期货等）。如果你不能使用 C++11，你总是可以使用[Boost Thread](http://www.boost.org/doc/libs/1_50_0/doc/html/thread.html)。

*   最后，如果你真的想去 MPI，你可以看看[Boost MPI](http://www.boost.org/doc/libs/1_50_0/doc/html/mpi.html)。至少您将拥有一种更加 C++ 友好的方式来使用 MPI。

# java - 等待多个 SwingWorker

> ID：11366330
> 
> 赞同：12
> 
> 时间：2012-07-06T16:42:52.573
> 
> 标签：java, multithreading, swing, wait, swingworker

请考虑以下代码片段：

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.InvocationTargetException;
import javax.swing.*;

public class TestApplet extends JApplet
{
    @Override
    public void init()
    {
        try
        {
            SwingUtilities.invokeAndWait(new Runnable()
            {
                @Override
                public void run()
                {
                    createGUI();
                }
            });
        }
        catch(InterruptedException | InvocationTargetException ex)
        {
        }
    }

    private void createGUI()
    {
        getContentPane().setLayout(new FlowLayout());
        JButton startButton = new JButton("Do work");
        startButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                JLabel label = new JLabel();
                new Worker(label).execute();
            }
        });
        getContentPane().add(startButton);
    }

    private class Worker extends SwingWorker<Void, Void>
    {
        JLabel label;

        public Worker(JLabel label)
        {
            this.label = label;
        }

        @Override
        protected Void doInBackground() throws Exception
        {
            // do work
            return null;
        }

        @Override
        protected void done()
        {
            getContentPane().remove(label);
            getContentPane().revalidate();
        }
    }
} 
```

这是向小程序添加一个标签，显示 Worker 线程的一些中间结果（使用发布/处理方法）。最后，标签从小程序的窗格中删除。我的问题是，如何创建多个标签，每个标签都有自己的 Worker 线程，并在它们全部完成后删除它们？

提前致谢。

**更新：**

我希望这能澄清我的问题。我希望在所有工人完成任务后立即移除标签，而不是在每个工人完成后立即移除。

**更新 2：**

以下代码似乎正在做我需要的事情。请评论我是否以正确的方式做到了。我有一种感觉有什么不对劲。一个问题是按钮右侧的标签虽然被移除，但仍然可见。setVisible(false) 似乎解决了这个问题。这是这样做的方法吗？

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.lang.reflect.InvocationTargetException;
import java.util.LinkedList;
import java.util.List;
import java.util.Queue;
import java.util.Random;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import javax.swing.*;

public class TestApplet extends JApplet
{
    private Queue<JLabel> labels = new LinkedList<>();
    private static final Random rand = new Random();

    @Override
    public void init()
    {
        try
        {
            SwingUtilities.invokeAndWait(new Runnable()
            {
                @Override
                public void run()
                {
                    createGUI();
                }
            });
        }
        catch(InterruptedException | InvocationTargetException ex){}
    }

    private void createGUI()
    {
        getContentPane().setLayout(new FlowLayout());
        JButton startButton = new JButton("Do work");
        startButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                ExecutorService executor = Executors.newFixedThreadPool(10);
                for(int i = 0; i < 10; i++)
                {
                    JLabel label = new JLabel();
                    getContentPane().add(label);
                    executor.execute(new Counter(label));
                }
            }
        });
        getContentPane().add(startButton);
    }

    private class Counter extends SwingWorker<Void, Integer>
    {
        private JLabel label;

        public Counter(JLabel label)
        {
            this.label = label;
        }

        @Override
        protected Void doInBackground() throws Exception
        {
            for(int i = 1; i <= 100; i++)
            {
                publish(i);
                Thread.sleep(rand.nextInt(80));
            }

            return null;
        }

        @Override
        protected void process(List<Integer> values)
        {
            label.setText(values.get(values.size() - 1).toString());
        }

        @Override
        protected void done()
        {
            labels.add(label);

            if(labels.size() == 10)
            {
                while(!labels.isEmpty())
                    getContentPane().remove(labels.poll());

                getContentPane().revalidate();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-07T06:50:53.037

> 我打算在所有工人完成任务后将所有标签一起移除。

[如此处](https://stackoverflow.com/a/3588523/230513)所述， a`CountDownLatch`在这种情况下效果很好。`latch.countDown()`在下面的示例中，每个工作人员在完成时调用，并且`Supervisor`工作人员阻塞`latch.await()`直到所有任务完成。出于演示目的，`Supervisor`更新标签。评论中显示的批发删除在技术上是可行的，但通常没有吸引力。相反，考虑一个`JList`or `JTable`。

![工人闩锁测试](../Images/a7585729e4775cca501e5533358ef6e2.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.util.LinkedList;
import java.util.List;
import java.util.Queue;
import java.util.Random;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import javax.swing.*;

/**
* @see https://stackoverflow.com/a/11372932/230513
* @see https://stackoverflow.com/a/3588523/230513
*/
public class WorkerLatchTest extends JApplet {

    private static final int N = 8;
    private static final Random rand = new Random();
    private Queue<JLabel> labels = new LinkedList<JLabel>();
    private JPanel panel = new JPanel(new GridLayout(0, 1));
    private JButton startButton = new JButton(new StartAction("Do work"));

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setTitle("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new WorkerLatchTest().createGUI());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    @Override
    public void init() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                add(new WorkerLatchTest().createGUI());
            }
        });
    }

    private JPanel createGUI() {
        for (int i = 0; i < N; i++) {
            JLabel label = new JLabel("0", JLabel.CENTER);
            label.setOpaque(true);
            panel.add(label);
            labels.add(label);
        }
        panel.add(startButton);
        return panel;
    }

    private class StartAction extends AbstractAction {

        private StartAction(String name) {
            super(name);
        }

        @Override
        public void actionPerformed(ActionEvent e) {
                startButton.setEnabled(false);
                CountDownLatch latch = new CountDownLatch(N);
                ExecutorService executor = Executors.newFixedThreadPool(N);
                for (JLabel label : labels) {
                    label.setBackground(Color.white);
                    executor.execute(new Counter(label, latch));
                }
                new Supervisor(latch).execute();
        }
    }

    private class Supervisor extends SwingWorker<Void, Void> {

        CountDownLatch latch;

        public Supervisor(CountDownLatch latch) {
            this.latch = latch;
        }

        @Override
        protected Void doInBackground() throws Exception {
            latch.await();
            return null;
        }

        @Override
        protected void done() {
            for (JLabel label : labels) {
                label.setText("Fin!");
                label.setBackground(Color.lightGray);
            }
            startButton.setEnabled(true);
            //panel.removeAll(); panel.revalidate(); panel.repaint();
        }
    }

    private static class Counter extends SwingWorker<Void, Integer> {

        private JLabel label;
        CountDownLatch latch;

        public Counter(JLabel label, CountDownLatch latch) {
            this.label = label;
            this.latch = latch;
        }

        @Override
        protected Void doInBackground() throws Exception {
            int latency = rand.nextInt(42) + 10;
            for (int i = 1; i <= 100; i++) {
                publish(i);
                Thread.sleep(latency);
            }
            return null;
        }

        @Override
        protected void process(List<Integer> values) {
            label.setText(values.get(values.size() - 1).toString());
        }

        @Override
        protected void done() {
            label.setBackground(Color.green);
            latch.countDown();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:07:50.547

您拥有的代码已经在一定程度上做到了这一点。单击按钮时，您需要将标签实际添加到内容窗格。像这样的东西：

```
 JLabel label = new JLabel();
 getContentPane().add(label);
 getContentPane().validate();
 new Worker(label).execute(); 
```

在标签中放置一些文本可能是个好主意，以便在将其添加到屏幕时实际看到它。

```
 JLabel label = new JLabel("Hello...I am here"); 
```

最后在 doInBackground() 方法中，您可以添加一些代码以在某些任务运行时更新标签：

```
 for(int i = 0;i < 100; i++){
            Thread.sleep(20);
            label.setText("Counting..." + i);
  } 
```

通过这种方式，您实际上可以看到任务正在运行。如果您多次单击该按钮，您会看到多个标签，并且在任务完成后它们都会消失。

# android - 制作警报程序 - 不工作

> ID：11366332
> 
> 赞同：0
> 
> 时间：2012-07-06T16:42:58.057
> 
> 标签：android

我正在尝试制作警报程序。到目前为止，我已经编写了一个活动，用户可以在其中选择他希望闹钟响起的时间。这工作正常。现在我需要使用警报管理器来告诉操作系统在将来的某个时间点调用我的一些代码。为了以粗略的方式测试这一点，我添加了以下代码，当我在主要活动中按下测试按钮时会执行该代码：

```
Intent intent = new Intent(getApplicationContext(), to_call_when_alarm_goes_off.class);
PendingIntent pIntent = PendingIntent.getBroadcast(getApplicationContext(),0, intent, 0);
AlarmManager alarms = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarms.cancel(pIntent);

alarms.setRepeating(
        AlarmManager.RTC_WAKEUP,
        System.currentTimeMillis()+1000, 
        AlarmManager.INTERVAL_DAY, 
        pIntent); 
```

这应该意味着一些名为 to_call_when_alarm_goes_off 的代码将在我按下按钮后一秒钟被执行......现在这是我有点困惑的地方。我不太确定如何/在哪里设置“to_call_when_alarm_goes_off”。我所做的只是在我的项目中添加一个新类，如下所示：

```
package com.mycompany.alarmprogram;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class to_call_when_alarm_goes_off extends BroadcastReceiver
{

    @Override
    public void onReceive(Context arg0, Intent arg1) 
    {
        // TODO Auto-generated method stub
        Log.i("ALARM","TIME TO WAKE UP!!!");

    }

} 
```

所有代码都会编译，当我按下按钮时，第一个代码片段中的所有代码都会执行而不会崩溃 - 但一秒钟后，广播接收器代码不会执行。显然我误解了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T16:53:04.443

我假设您缺少使用适当的操作字符串在清单文件中注册您的接收器。如下所示。

```
 <receiver android:name=".to_call_when_alarm_goes_off" > 
               <intent-filter>
                  <action android:name="com.android.whatever.WHAT_EVER_NAM_YOU_WANNA_GIVE" />
                </intent-filter>// can change name/action string as par ur requirement.
        </receiver> 
```

`intent.setAction("com.android.whatever.WHAT_EVER_NAM_YOU_WANNA_GIVE");`你需要在你的意图中设置相同的动作字符串，记住动作字符串在 Manifest 和java中必须相同。那么只有它会触发接收器。

您的代码可以更改如下。

```
Intent intent = new Intent(getApplicationContext(), to_call_when_alarm_goes_off.class);
intent.setAction("com.android.whatever.WHAT_EVER_NAM_YOU_WANNA_GIVE");// added line

PendingIntent pIntent = PendingIntent.getBroadcast(getApplicationContext(),0, intent, 0);

AlarmManager alarms = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

alarms.cancel(pIntent);

alarms.setRepeating(
        AlarmManager.RTC_WAKEUP,
        System.currentTimeMillis()+1000, 
        AlarmManager.INTERVAL_DAY, 
        pIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:51:24.883

您需要将`to_call_when_alarm_goes_off`类注册`AndroidManifest.xml`为接收者：

`<receiver android:name=".to_call_when_alarm_goes_off"></receiver>`

请参阅[API 文档](http://developer.android.com/guide/topics/manifest/receiver-element.html)中的详细信息。

# firefox-addon - setTimeout 不适用于插件

> ID：11366333
> 
> 赞同：0
> 
> 时间：2012-07-06T16:42:59.117
> 
> 标签：firefox-addon, settimeout, firefox-addon-sdk

我正在使用 builder.addons.mozilla 制作插件，我在下面发布了 main.js 代码。这个想法是，当我单击插件的小部件时，它会通过将 disableWebIQ 变量设置为 true 来禁用在 panelist-webiq-cdn.appspot.com/warptest 上运行的脚本。设置变量有效，但无论何时安装插件，页面脚本中的 setTimeout 调用都不起作用。将 PageMod 添加到页面是否会禁用 setTimeout？

按钮脚本和 myScript.js 的代码并没有做太多事情，而且当您单击小部件时 myScript.js 也不会运行，所以我怀疑这是在页面中禁用 setTimeout 的原因。

```
var ss = require("simple-storage");
ss.storage.enabled = true;
ss.storage.panelIdList = [];
const widgets = require("widget");
const data = require("self").data;

var player = widgets.Widget({
    id: "player",
    width: 16,
    label: "PanelistWebIQ",
    contentURL: data.url("buttons.html"),
    contentScriptFile: data.url("buttonScript.js"),
    onClick: function(){
        if(ss.storage.enabled){
            ss.storage.enabled = false;
            pageMod.destroy();
        }
        else{
            ss.storage.enabled = true;
            pageMod = pageModModule.PageMod({
                include: "*",
                contentScriptWhen: 'start',
                contentScriptFile: data.url('myScript.js')
            });
        }
    }
});

var pageModModule = require("page-mod");
var pageMod = pageModModule.PageMod({
    include: "*",
    contentScriptWhen: 'start',
    contentScriptFile: data.url('myScript.js'),
    onAttach: function(worker){
        var url = worker.url;
        var newPanelId = '';

        if(url.match(/^https?:\/\/panelist-webiq-cdn.appspot.com.*panelId=.*$/)){
            var pattern = 'panelId=';
            var index = url.indexOf(pattern);
            var sub = url.substring(index + pattern.length);
            index = sub.indexOf('&');
            if(index==-1){
                newPanelId = sub;
            }
            else{
                newPanelId = sub.substring(0, index);
            }
        }

        var list = ss.storage.panelIdList;
        if(newPanelId){
            var matchFound = false;
            for(var ctr=0; ctr<list.length; ctr++){
                var panelId = list[ctr];
                if(panelId==newPanelId){
                    matchFound = true;
                    break;
                }
            }
            if(!matchFound){
                list.push(newPanelId);
            }
        }
        worker.postMessage(list + '');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:07:56.417

显然，如果您的脚本中有警报，则该警报可以禁用将来对 setTimeout 的调用。我从我的插件中删除了所有警报，它工作正常。

# c++ - C++：有没有办法创建一个模板化的命名空间？

> ID：11366336
> 
> 赞同：3
> 
> 时间：2012-07-06T16:43:17.393
> 
> 标签：c++, templates, namespaces, c++11

我想知道是否可以执行以下操作：

```
template <typename T>
namespace basic_foo {
    struct str {
        T value;
    };
}

basic_foo<char>::str s1;
namespace foo = basic_foo<char>;
foo::str s2; 
```

是否可以在任何 c++ 编译器中执行此操作？
是否正在开展工作来实现这一点？
我认为这将是对语言的一个很好的补充。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T16:45:37.540

不，您不能定义命名空间模板。`basic_foo`但是，您可以通过制作类模板几乎完全实现您想要的（只是语法略有不同） ：

```
template <typename T>
struct basic_foo {
    struct str {
        T value;
    };
};

basic_foo<char>::str s1;
typedef basic_foo<char> foo;
foo::str s2; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T16:45:48.493

不，但您可以使用模板结构：

```
template<typename T>
struct basic_foo
{
    struct str
    {
        T value;
    };
};

typedef basic_foo<char> foo;
foo::str s1; 
```

您也可以使用`class`而不是，但在这种情况下`struct`您必须记住 about 。`public:`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:46:15.567

不，不可能，命名空间模板是不真实的，但你可以制作类模板。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T19:26:48.440

其他答案解释了如何执行您可能想要的操作。但听起来您对命名空间的用途与它的真正设计用途有不同的想法。

namespace 解决了两个不相关的 C++ 代码库能够相互通信的问题。C 没有名称空间，因此更加冗长。尝试在 C 中使用 3rd 方库，例如 openssl 或 oauth。您会发现很多这样的函数调用：

```
openssl_create
openssl_connect 
```

等等。这真的非常重要。因为我很可能想编写一个名为`connect`. 我使用的 ZMQ 库的作者也是如此。等等。试图在同一个地方调用两个具有相同名称的函数是一个主要的、主要的痛苦......

命名空间纯粹是一种软件工程构造，而不是编程构造。它让前缀`openssl_`简单地成为命名空间，因此像上面这样的代码可以更自由地混合。为什么命名空间不冲突？这就是软件工程变得更加人性化和社会化的地方，因为本质上全球编程社区必须确保这种情况不会发生。通常外部命名空间通常是公司；我猜所有 Google 内部代码都在 namespace 中`Google`。Java 通过促进互联网域名命名包（如命名空间）的约定来解决这个问题，这可能是一个不能冲突的现实世界实体，例如谷歌代码应该存在于包中`com.google...`

我还应该注意，在组织内，名称空间用于应用程序、产品或团队级别 - 例如，Google Drive 可能像 Google Mail 一样在某处具有“上传”功能，并且这些团队通常可能不会相互交谈。 .但仍然需要编写混合代码。这就是命名空间的作用。不多也不少。

# c - C 代码的实时 linting

> ID：11366345
> 
> 赞同：14
> 
> 时间：2012-07-06T16:43:41.410
> 
> 标签：c, lint

我正在寻找类似于 JavaScript linting 工具 JSHint 或 JSLint for C 的东西。我的文本编辑器（Sublime Text 2）有一个 JSHint 插件，可以实时反馈我的 JavaScript 代码。

获得有关我的 C 代码质量的反馈的最佳方式是什么？有什么工具可以给我实时的 linting？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T04:23:01.120

我编造了一种方法，将一些为 SublimeText 2 编写的用户制作的 linter 放入混合中，以使 linting 与 SublimeLinter 和 ANSI C 一起工作。另请注意，这是一种让它工作的稍微“hacky”的方式。

*   您*必须*安装 clang（对于 OS X，您可以使用[Apple 的命令行工具](https://developer.apple.com/downloads/index.action?=command%20line%20tools)安装 clang/LLVM 编译器，它只需要一个免费的开发人员帐户），您还必须在 Sublime Text 2 中安装[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)

*   导航到[该用户的](https://github.com/M4T1A5/SublimeLinter)SublimeLinter 分支并继续从模块文件夹下载“c.py”模块

*   将此模块复制到位于下的 SublimeLinter 的工作模块目录中`**your SublimeText 2 data directory**\Packages\SublimeLinter\sublimelinter\modules\`（有关数据目录的更多信息，[请参阅此内容）](http://sublimetext.info/docs/en/basic_concepts.html#the-data-directory)

*   重启 Sublime Text 2 ^(†</sup>)

* * *

![](../Images/1f7def643d1fb6da39e2b81754ff8a22.png)
^(†确保窗口右下角的当前语言设置为“C”，而不是“C++”、“Python”等。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T00:57:19.817

看看[Clang 静态分析器](http://clang-analyzer.llvm.org/)和 Gimpel 的[PC-lint 和 FlexeLint](http://www.gimpel.com/html/index.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T01:00:35.313

另外，请看一下[cppcheck](http://cppcheck.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T23:59:49.843

通过带有完整警告的编译器传递它是一个非常好的基本 lint。它会捕获诸如拼写错误的变量之类的东西。关闭优化的铿锵声足够快，可以用作实时插件的基础，但我不知道这种崇高文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T01:18:00.270

你有足够的代表，我觉得这可能是一个太明显的建议，但听起来你基本上会从 IDE 中受益？例如，日食。我在 Eclipse/Java 中开发，它在错误/警告方面非常激进，当然比我见过的编译器要多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-03T01:35:43.893

由于提出并回答了这个问题，现在`C/C++`在 Sublime 中有一些 linting 选项，这些选项比公认的答案更加用户友好。所有这些都是 SublimeLinter 的插件。我建议使用[Package Control](https://packagecontrol.io)作为 Sublime Text 的包管理器（插件作者也是如此）。

首先，如果您还没有[Sublime Linter ，请安装它（它是一个非常流行的多语言 linting 框架）。](https://github.com/SublimeLinter)正如作者所推荐的，它最容易通过包控制安装，但更多信息在 github 站点上。一旦安装了 Sublime Linter，就会有两到四个不同的附件包用于 linting`C`和`C++`code。

其中两个使用`C/C++`编译器本身进行检查；这些是[SublimeLinter-gcc](https://github.com/SublimeLinter/SublimeLinter-gcc)和[SublimeLinter-clang](https://github.com/SublimeLinter/SublimeLinter-clang)。两者都可以通过 Package Control 安装，并为 SublimeLinter 提供到相关底层编译器的接口。gcc 包可以很容易地指定您想要使用的编译器可执行文件，以防您可能想要检查代码以进行交叉编译。

另外两个分别是[cpplint](https://github.com/SublimeLinter/SublimeLinter-cpplint)和[cppcheck](https://github.com/SublimeLinter/SublimeLinter-cppcheck)的接口。这两个在包控制上也可用，尽管名称似乎都将 lint C 和 C++ 代码。

Note that you probably only want one of these options enabled at a time, although the SublimeLinter setup allows you to have multiple options installed and only one enabled via the `"linters": {...}` option stanza.

# asp.net-mvc-3 - 如何为 Azure 创建返回 503 的自定义维护页面？

> ID：11366346
> 
> 赞同：1
> 
> 时间：2012-07-06T16:43:42.080
> 
> 标签：asp.net-mvc-3, azure, http-status-code-503

我正在尝试在 MVC 3 上设置自定义维护页面，但特别是在 Azure 上。基本上为了保持它对 SEO 友好，我需要返回 503（服务不可用）。我的所有其他自定义错误页面都在 Azure（例如 404）中正常工作

```
<customErrors mode="On">
  <error statusCode="404" redirect="404.htm"/>
  <error statusCode="503" redirect="503.htm"/>
</customErrors> 
```

404 页面有效，但没有遵循 503，我只是得到一个丑陋的服务不可用页面。我通过 error.cshtml 和标准 HandleErrorAttribute 使 500 错误工作正常。

我什至尝试使用以下方法从 ActionFilter 返回我自己的 ActionResult

```
public class SiteDownForTestingResult : ActionResult
{
    public SiteDownForTestingResult() : base()
    {
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var path = System.Web.Hosting.HostingEnvironment.MapPath("~/app_testing.htm");

        var response = context.HttpContext.Response;

        response.Clear();
        response.StatusCode = (int)HttpStatusCode.ServiceUnavailable;
        response.StatusDescription = "Service Unavailable.";
        response.WriteFile(path);
        response.End();
    }

} 
```

app_testing 是我的自定义页面，然后设置`filterContext.Result = new SiteDownForTestingResult();`从 OnActionExecuting 的 ActionFilter 仍然受到普通 503“服务不可用”页面的欢迎

这是否与 Azure 上的 application.config 锁定某些我不知道的东西有关。这在 IIS7 和我的本地机器上运行良好，但模拟器和云都没有带来任何乐趣。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:31:50.530

根据我的理解，自定义 503 错误是直接从 https.sys 生成的，主要是在应用程序池不可用时。现在，当没有应用程序池时，您的任何设置都不会在您的自定义错误设置中起作用，这将特定于应用程序池。此外，大多数搜索引擎都依赖 503 错误代码作为回报，因此可以正确显示搜索结果，这就是为什么通常不在应用程序级别自定义此错误的原因。

当您引用 Windows Azure 模拟器时，我相信您使用的是 Windows Azure Web 角色。使用 Windows Azure Web 角色，您可以在启动任务中使用 AppCmd.exe 自定义 IIS，这是您的最高自定义级别。您无法在 Windows Azure 中达到 HTTP.sys 自定义级别，因此自定义 503 错误可能无法在 Windows Azure 上运行。

# tkinter - 禁用按钮/禁用选项菜单的 tkinter 颜色

> ID：11366349
> 
> 赞同：2
> 
> 时间：2012-07-06T16:43:49.280
> 
> 标签：tkinter, imagebutton

我正在为 Unity (Ubuntu) 开发一个快速列表编辑器。（初始）界面包含禁用的选项菜单按钮（右下，“+”和编辑按钮，右上角）和禁用的“正常”按钮。然而，tkinter 并没有平等对待这两种禁用的图标；禁用的选项菜单图标比“正常”禁用的按钮图标要暗一些。除了复杂的解决方法之外，是否有解决方案，在禁用事件上仅用图像替换图标？

![带有禁用按钮和选项菜单图标的编辑器窗口](../Images/bedee5df8270535f0b8430195583f73b.png)

![解决方法； 使用我自己的图标而不是 tkinter 的默认禁用图标](../Images/a130934991a508a8a61a8a88c51d84bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T07:20:56.323

....事实证明，除了使用 DISABLED 状态之外，没有其他解决方案，而是将按钮替换为另一个完全没有按钮功能的图像，只要该按钮被禁用即可。尽管它需要几行额外的编码，但它也使您可以控制禁用按钮的外观。同时，我认为禁用*选项*按钮的颜色与其他禁用按钮的颜色略有不同是一种错误。

# itext - iText，Font、BaseFont 和 createFont() 是怎么回事？

> ID：11366354
> 
> 赞同：12
> 
> 时间：2012-07-06T16:44:24.383
> 
> 标签：itext

关于 font 和 basefont 发生了什么对我来说有很多谜团。尤其是在涉及到构造函数时。iText 网站将此行作为新字体的示例代码

```
 BaseFont unicode = BaseFont.createFont("c:/windows/fonts/arialuni.ttf", 
                        BaseFont.IDENTITY_H, 
                        BaseFont.EMBEDDED); 
```

我可以得到这个电话工作：

```
BaseFont bf = BaseFont.createFont(BaseFont.COURIER, BaseFont.CP1257, 
                  BaseFont.EMBEDDED); 
```

但是，如果我将 BaseFont.CP1257 替换为 BaseFont.HELVETICA 则它不起作用，并且我得到一个页面显示“无法加载 pdf 文档”。

我尝试查看类文件，但似乎无法弄清楚第二个参数是什么（我假设它类似于备用字体，以防第一个字体不起作用，例如在 HTML 中），我可以'不知道为什么有些字体会起作用而其他字体不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-17T20:29:34.787

**要从jar**中加载它，请使用前导斜杠，**否则**，只需使用字体的绝对路径（“C:[...]\fonts\Sansation_Regular.ttf”）。例如：

```
Font font = FontFactory.getFont("/fonts/Sansation_Regular.ttf",
    BaseFont.IDENTITY_H, BaseFont.EMBEDDED, 0.8f, Font.NORMAL, BaseColor.BLACK);
BaseFont baseFont = font.getBaseFont(); 
```

*   字体的相对路径是：'src/main/resources/fonts'
*   使用 Itext 5.4.5

*   示例：[https ://code.google.com/p/jhocr/source/browse/trunk/src/main/java/com/googlecode/jhocr/converter/HocrPageProcessor.java](https://code.google.com/p/jhocr/source/browse/trunk/src/main/java/com/googlecode/jhocr/converter/HocrPageProcessor.java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T14:37:32.543

第二个参数是编码。

[有关详细信息，请参阅此处的文档。](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/BaseFont.html#createFont%28java.lang.String,%20java.lang.String,%20boolean%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-08T12:51:19.043

这对我有用。旧帖子，但我找不到简单的答案。

```
//Here you setup the font that you want. I put it under the root/Content/fonts folder in my project
Font font = FontFactory.GetFont("~/Content/fonts/ARIALN.ttf", BaseFont.CP1252,false, 9);

//Here I create the paragraph then assign the font to it at the end
var addressAttn = new Paragraph("Attn:  Manager, Billing Services", font); 
```

# css - 具有特定类的 div 内的样式链接

> ID：11366357
> 
> 赞同：11
> 
> 时间：2012-07-06T16:44:36.567
> 
> 标签：css

我想知道如何使用给定的类在给定的 div 中设置链接的样式，例如

```
.navigation-div : a:link,a:visited {
  color:red;
  } 
```

一些html

```
 <div class="navigation-div">
  <a href="home.php">Home</a>
  <a href="home.php">List</a>
  <a href="home.php">Download</a>
  <a href="home.php">Files Used</a>
  <a href="home.php">Documentation</a>
  </div>

  <div class="client-header">
  <h1><a href="home.php">CRUD Application</a></h1>
  </div> 
```

这种东西有选择器吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-06T16:46:20.480

```
.navigation-div a:link, .navigation-div a:visited {
    color:red;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZjmYT/)**

# javascript - 动态请求跨域请求权限

> ID：11366358
> 
> 赞同：0
> 
> 时间：2012-07-06T16:44:36.737
> 
> 标签：javascript, google-chrome, google-chrome-extension, xss

是否可以在不静态列出域的情况下从 Chrome 扩展程序发出跨域请求`manifest.json`（可能是通过动态提示访问者获得许可）？

对于一个用例，假设我想让访问者提供一个 RSS 提要地址，然后我会在我的应用程序仪表板屏幕中查询该地址。我无法在其中列出该域，`manifest.json`因为在访问者在运行时输入之前我显然无法知道该域。

我希望有一些动态请求访问域的机制（“这个扩展想要浏览你在 www.example.com 上的数据；你想允许这个吗？”）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:52:56.393

我认为您需要指定以下[匹配模式](http://code.google.com/chrome/extensions/match_patterns.html)：`http://*/*`

# iphone - 动画无法通过切换标签恢复

> ID：11366362
> 
> 赞同：1
> 
> 时间：2012-07-06T16:44:53.923
> 
> 标签：iphone, animation

我在这里看到了很多类似的问题，但没有一个有我想要的。无论如何：

我正在为地图上的注释设置动画以上下移动。我通过在它的drawRect中调用这个函数来做到这一点：

```
 - (void) wiggle {
      [UIView animateWithDuration:0.45 delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^{
          [self.subView setFrame:CGRectMake(self.subView.frame.origin.x, self.subView.frame.origin.y+WIGGLE_DISTANCE, self.subView.frame.size.width, self.subView.frame.size.height)];
      } completion:^(BOOL finished) {
        if (finished)
          [UIView animateWithDuration:0.45 delay:0.0 options:UIViewAnimationCurveEaseInOut animations:^{
            [self.subView setFrame:CGRectMake(self.subView.frame.origin.x, self.subView.frame.origin.y-WIGGLE_DISTANCE, self.subView.frame.size.width, self.subView.frame.size.height)];
          } completion:^(BOOL finished) {if (finished) [self wiggle]; }];
      }];
    } 
```

简而言之，它正在为“子视图”设置动画，当它完成时，动画向下，当它完成时，调用自身（继续摆动）。

这工作正常，直到我切换标签。当我返回此选项卡时，没有动画。我尝试在 viewController 的“viewDidAppear”中的每个视图上调用“setNeedsDisplay”，但调用 drawRect 失败。于是我尝试直接从 viewController 的 'viewDidAppear' 调用 'wiggle'，并且该函数确实被调用了，但它只是没有动画。有任何想法吗？

谢谢！

# python - 如何强制 Python 在循环内创建新变量/新范围？

> ID：11366375
> 
> 赞同：6
> 
> 时间：2012-07-06T16:45:52.243
> 
> 标签：python, variables, for-loop, parameters, closures

今天我探索了 Python 的一个*奇怪*的行为。一个例子：

```
closures = []
for x in [1, 2, 3]:
    # store `x' in a "new" local variable
    var = x

    # store a closure which returns the value of `var'
    closures.append(lambda: var)

for c in closures:
    print(c()) 
```

上面的代码打印

```
3
3
3 
```

但我希望它打印

```
1
2
3 
```

我为自己解释了这种行为，`var`它始终是相同的局部变量（并且 python 不会像其他语言那样创建一个新变量）。如何修复上述代码，以便每个闭包返回另一个值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T16:50:00.813

最简单的方法是为您的 lambda 使用默认参数，这样当前值将`x`绑定为函数的默认参数，而不是`var`在每次调用时在包含范围内查找：

```
closures = []
for x in [1, 2, 3]:
    closures.append(lambda var=x: var)

for c in closures:
    print(c()) 
```

或者，您可以创建一个闭包（您拥有的不是闭包，因为每个函数都是在全局范围内创建的）：

```
make_closure = lambda var: lambda: var
closures = []
for x in [1, 2, 3]:
    closures.append(make_closure(x))

for c in closures:
    print(c()) 
```

`make_closure()`也可以这样写，这样可以使其更具可读性：

```
def make_closure(var):
    return lambda: var 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T16:49:01.157

您不能在循环内的本地范围内创建新变量。无论您选择什么名称，您的函数将始终是该名称的闭包并使用其最新值。

最简单的方法是使用关键字参数：

```
closures = []
for x in [1, 2, 3]:
    closures.append(lambda var=x: var) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T16:51:51.353

在您的示例中，`var`始终绑定到循环的最后一个值。您需要使用 将其绑定到 lambda 中`closures.append(lambda var=var: var)`。

# jakarta-ee - Struts2 应用程序部署时的常见异常

> ID：11366380
> 
> 赞同：0
> 
> 时间：2012-07-06T16:46:22.133
> 
> 标签：jakarta-ee, struts2, struts

我使用 NetBeans IDE 7.0.1 和 Apache Tomcat 7.0.14.0。我用 IDE 构建了一个 Struts2 应用程序，构建效果很好，没有例外。但是，对于所有 Struts2 应用程序，IDE 的服务器日志在每次部署时都会给出相同的异常。应用程序如何运行良好，没有其他例外。

这是一个例外：

```
 Jul 6, 2012 9:40:31 AM org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet [jsp] in context with path [/OnlineBooking] threw exception [Unable to compile class for JSP] with root cause
    java.io.UTFDataFormatException: Invalid byte 1 of 1-byte UTF-8 sequence.  
at org.apache.jasper.xmlparser.UTF8Reader.invalidByte(UTF8Reader.java:623)
    at org.apache.jasper.xmlparser.UTF8Reader.read(UTF8Reader.java:488)
    at org.apache.jasper.xmlparser.XMLEncodingDetector.load(XMLEncodingDetector.java:1017)
    at org.apache.jasper.xmlparser.XMLEncodingDetector.skipString(XMLEncodingDetector.java:968)
    at org.apache.jasper.xmlparser.XMLEncodingDetector.scanXMLDecl(XMLEncodingDetector.java:1224)
    at org.apache.jasper.xmlparser.XMLEncodingDetector.getEncoding(XMLEncodingDetector.java:124)
    at org.apache.jasper.xmlparser.XMLEncodingDetector.getEncoding(XMLEncodingDetector.java:112)
    at org.apache.jasper.compiler.ParserController.determineSyntaxAndEncoding(ParserController.java:334)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:190)
    at org.apache.jasper.compiler.ParserController.parseDirectives(ParserController.java:119)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:192)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:372)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:352)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:339)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:428)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我怎样才能避免这种情况？问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:42:57.703

```
java.io.UTFDataFormatException    xmlparser 
```

我想问题是xml文件。

它是从其他文件复制的吗？可能是编码不同，你应该自己输入。尝试将以下内容添加到您的 xml 文件中：

```
 <?xml version="1.0" encoding="UTF-8"?> 
```

顺便说一句，我是一名中国学生，英语不好，对不起。

# tsql - 为什么我重构的 SQL 比原来的版本效率低？

> ID：11366381
> 
> 赞同：1
> 
> 时间：2012-07-06T16:46:22.383
> 
> 标签：tsql, optimization

我正在尝试优化存储过程，在查看执行计划和执行时间后，我对结果感到惊讶。谁能解释一下。

我编写的原始 SQL 有 2 个*几乎相同*的选择，然后我将它们放在 CTE 中，我尝试对其进行重构，以便主要工作完成一次，填充一个表变量，这样我就可以有 2 个较小的选择，以这种方式过滤数据我需要。2 个 select 语句之间的唯一区别是在第一个 select 中传递给 TVF_GetChildGroups 的值 @AreaID 表示当前上下文的报告区域，而在第二个 select 中 @RootReportLevelID 只是所有区域。所以它是用户上下文的同龄人，目的是让你的分数与其他人的平均值进行比较。

```
DECLARE @Scores TABLE
(
  ShortName VARCHAR(50) ,
  PCTMax INT ,
  PCTAvg INT ,
  PCTMin INT ,
  ALLAvg INT ,
  AllMax INT ,
  AllMin INT
)
INSERT  INTO @Scores
    SELECT  T2.ShortName ,
            MAX(T1.MeridianScore) AS PCTMax ,
            CAST(( CAST(SUM(T1.contribution) AS DECIMAL) / CAST(SUM(T1.maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS PCTAvg ,
            MIN(T1.MeridianScore) AS PCTMin ,
            CAST(( CAST(SUM(T2.contribution) AS DECIMAL) / CAST(SUM(T2.maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS AllAvg ,
            MAX(T2.MeridianScore) AS AllUpperScore ,
            MIN(T2.MeridianScore) AS AllLowerScore
    FROM    ( SELECT    US.PKID ,
                        PT.ShortName ,
                        CAST(( CAST(SUM(RES.contribution) AS DECIMAL) / CAST(SUM(RES.maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS MeridianScore ,
                        SUM(Contribution) AS Contribution ,
                        SUM(MaxValue) AS MaxValue
              FROM      tblUploadedScorecards AS US
                        INNER JOIN tblUploadedScoreCardResults AS RES ON US.PKID = RES.FKUploadedScoreCardID
                        INNER JOIN tblUploadedScorecardHeaders AS USH ON USH.FKUploadedScorecardID = US.PKID
                        INNER JOIN @ProviderTable AS PT ON USH.HeaderValue = PT.FullName
                        INNER JOIN TVF_GetChildGroups(@AreaID) AS TGCG ON TGCG.GroupName = US.Branch
              WHERE     US.FKScoreCardID = 185
                        AND reviewed = 1
                        AND ShopDate BETWEEN @StartDate AND @EndDate
                        AND RES.Rating <> 'I'
                        AND USH.FKScorecardHeaderID = 71
              GROUP BY  US.PKID ,
                        PT.ShortName ) AS T1
            RIGHT JOIN ( SELECT US.PKID ,
                                PT.ShortName ,
                                CAST(( CAST(SUM(RES.contribution) AS DECIMAL) / CAST(SUM(RES.maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS MeridianScore ,
                                SUM(Contribution) AS Contribution ,
                                SUM(MaxValue) AS MaxValue
                         FROM   tblUploadedScorecards AS US
                                INNER JOIN tblUploadedScoreCardResults AS RES ON US.PKID = RES.FKUploadedScoreCardID
                                INNER JOIN tblUploadedScorecardHeaders AS USH ON USH.FKUploadedScorecardID = US.PKID
                                INNER JOIN @ProviderTable AS PT ON USH.HeaderValue = PT.FullName
                                INNER JOIN TVF_GetChildGroups(@RootReportLevelID) AS TGCG ON TGCG.GroupName = US.Branch
                         WHERE  US.FKScoreCardID = 185
                                AND reviewed = 1
                                AND ShopDate BETWEEN @StartDate AND @EndDate
                                AND RES.Rating <> 'I'
                                AND USH.FKScorecardHeaderID = 71
                         GROUP BY US.PKID ,
                                PT.ShortName ) AS T2 ON T1.ShortName = T2.ShortName
    GROUP BY T2.ShortName 
```

因此，我将共性重构为一个表变量，稍后我可以将连接应用于 TVF，希望不需要太多地访问表并最终得到以下结果：

```
DECLARE @PreHierarchyResults TABLE 
(
PKID INT ,
Branch VARCHAR(150) ,
ShortName VARCHAR(50) ,
Contribution DECIMAL(20,3),
MaxValue DECIMAL(20,3)
)

INSERT INTO @PreHierarchyResults
    ( PKID ,
      Branch ,
      ShortName ,
      Contribution ,
      MaxValue )
SELECT  US.PKID ,
    US.Branch ,
    PT.ShortName ,
    Contribution AS Contribution ,
    MaxValue AS MaxValue
FROM    tblUploadedScorecards AS US
    INNER JOIN tblUploadedScoreCardResults AS RES ON US.PKID = RES.FKUploadedScoreCardID
    INNER JOIN tblUploadedScorecardHeaders AS USH ON USH.FKUploadedScorecardID = US.PKID
    INNER JOIN @ProviderTable AS PT ON USH.HeaderValue = PT.FullName
WHERE   US.FKScoreCardID = 185
    AND reviewed = 1
    AND ShopDate BETWEEN @StartDate AND @EndDate
    AND RES.Rating <> 'I'
    AND USH.FKScorecardHeaderID = 71

INSERT  INTO @Scores
    SELECT  T2.ShortName ,
            MAX(T1.MeridianScore) AS PCTMax ,
            CAST(( CAST(SUM(T1.contribution) AS DECIMAL) / CAST(SUM(T1.maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS PCTAvg ,
            MIN(T1.MeridianScore) AS PCTMin ,
            CAST(( CAST(SUM(T2.contribution) AS DECIMAL) / CAST(SUM(T2.maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS AllAvg ,
            MAX(T2.MeridianScore) AS AllUpperScore ,
            MIN(T2.MeridianScore) AS AllLowerScore
    FROM    ( SELECT    PHR.PKID ,
                        ShortName ,
                        CAST(( CAST(SUM(contribution) AS DECIMAL) / CAST(SUM(maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS MeridianScore ,
                        SUM(Contribution) AS Contribution ,
                        SUM(MaxValue) AS MaxValue
              FROM      @PreHierarchyResults AS PHR 
                        INNER JOIN TVF_GetChildGroups(@AreaID) AS TGCG ON TGCG.GroupName = PHR.Branch 
              GROUP BY PHR.PKID , ShortName) AS T1
            RIGHT JOIN ( SELECT PHR2.PKID ,
                                ShortName ,
                                CAST(( CAST(SUM(Contribution) AS DECIMAL) / CAST(SUM(Maxvalue) AS DECIMAL) * 100 ) AS DECIMAL(5, 2)) AS MeridianScore ,
                                SUM(Contribution) AS Contribution ,
                                SUM(MaxValue) AS MaxValue
                         FROM   @PreHierarchyResults AS PHR2
                                INNER JOIN TVF_GetChildGroups(@RootReportLevelID) AS TGCG ON TGCG.GroupName = PHR2.Branch 
                         GROUP BY PHR2.PKID , ShortName) AS T2 ON T1.ShortName = T2.ShortName
    GROUP BY T2.ShortName 
```

对于原始 SQL，我得到执行时间：

> SQL Server 执行时间：
> CPU 时间 = 16 毫秒，经过时间 = 11 毫秒。
> 表“#012F94F2”。扫描计数 0，逻辑读取 3，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUploadedScoreCardResults'。扫描计数 4456，逻辑读取 13943，物理读取 40，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。表“工作表”。扫描计数 6，逻辑读取 29800，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUserGroups'。扫描计数 2，逻辑读取 118，物理读取 1，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表“tblUploadedScorecards”。扫描计数 0，逻辑读取 29496，物理读取 8，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUploadedScorecardHeaders'。扫描计数 192，逻辑读取 746，物理读取 5，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 '#7D5F040E'。扫描计数 186，逻辑读取 372，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。

重构后我得到：

> SQL Server 执行时间：
> CPU 时间 = 0 毫秒，经过时间 = 10 毫秒。
> 表“#48563EF2”。扫描计数 0，逻辑读取 5106，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUploadedScoreCardResults'。扫描计数 185，逻辑读取 614，物理读取 41，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUploadedScorecards'。扫描计数 0，逻辑读取 370，物理读取 8，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUploadedScorecardHeaders'。扫描计数 7，逻辑读取 23，物理读取 5，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表“#439189D5”。扫描计数 1，逻辑读取 2，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> （受影响的 5059 行）
> （受影响的 1 行)
> 
> SQL Server 执行时间：
> CPU 时间 = 16 毫秒，经过时间 = 199 毫秒。
> 表“#47621AB9”。扫描计数 0，逻辑读取 3，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表“工作表”。扫描计数 114，逻辑读取 1770，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 'tblUserGroups'。扫描计数 112，逻辑读取 998，物理读取 1，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。
> 表 '#48563EF2'。扫描计数 112，逻辑读取 5376，物理读取 0，预读读取 0，lob 逻辑读取 0，lob 物理读取 0，lob 预读读取 0。

查看输出我认为很明显第一个版本更有效，但我只是不明白为什么会这样，因为它似乎两次击中 4 个表，而在第二个版本中，这些表只被击中一次.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:02:15.023

我还将比较您的原始查询和修改后的查询之间的实际执行计划。

还要检查 、 和 上`tblUploadedScorecards`的`tblUploadedScoreCardResults`索引`tblUploadedScorecardHeaders`。将这些表中的数据缓存到 @PreHierarchyResults 后，您可能会失去第二个查询中连接列上的某些覆盖索引的好处。

# javascript - 为什么 redirect_to _path 提供的是 HTTP 而不是 HTTPS url？

> ID：11366382
> 
> 赞同：1
> 
> 时间：2012-07-06T16:46:23.413
> 
> 标签：javascript, ruby-on-rails-3

在 Rails 3.0 应用程序中，我有一个控制器，其中包含许多类似这样的方法，

```
class ReviewsController
  # POST "/reviews/new_submit_form"
  def new_submit_for
    # some logic
    redirect_to new_subject_reviews_url(:format => "js")
  end
end

** terminal output **  

Started POST "/reviews/new_submit_form" for 127.0.0.1 at 2012-07-06 11:40:00 -0400
Processing by ReviewsController#new_submit_form as 
Parameters: {"question_sheet_id"=>"23"}
Existing local CAS session detected for "MYNAME@GMAIL.COM". Previous ticket "XX-1111-CjtSMaVpmiqBPsBoufke-plidma41" will be re-used.
Redirected to http://website.org/reviews/new_subject.js
Completed 302 Found in 1ms 
```

问题是`redirect_to new_subject_reviews_url(:format => "js")`返回 HTTP url 而不是 HTTPS url。

我找到了一个解决方案， `redirect_to new_subject_reviews_url(:format => "js", :protoco => "https://")`但这需要我通过 Rails 应用程序编辑该方法。我怎样才能在我的 Rails 应用程序中全局修复这个问题，而无需主要破解 Rails？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:20:06.093

我没有找到原因，但我找到了解决方案。

```
Ccc360::Application.configure do

   # all the other configs

   # so that redirect_to will have, "https://www.mywebsite.org/xxxxxx"
  config.action_controller.default_url_options = { :protocol => "https" } 
end 
```

# java - 使用 gwt 和 Eclipse 编译 java 文件

> ID：11366383
> 
> 赞同：0
> 
> 时间：2012-07-06T16:46:27.010
> 
> 标签：java, eclipse, google-app-engine, gwt

我对 GWT 和 Java 一无所知。按照文档，我尝试从以前使用 GWT 开发的 Web 项目编译 Java 文件。我使用推荐的 IDE Eclipse 安装了正确的插件。使用命令 GWT Compile 运行编译器时，出现以下消息错误：

```
6 juil. 2012 18:21:32 
at com.google.gwt.dev.util.DiskCache.transferFromStream(DiskCache.java:155)
at com.google.gwt.dev.javac.SourceFileCompilationUnit.asCachedCompilationUnit(SourceFileCompilationUnit.java:59)
at com.google.gwt.dev.javac.CompilationUnit.writeReplace(CompilationUnit.java:392)
at sun.reflect.GeneratedMethodAccessor25.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597) 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:10:06.360

DataNucleus 是 JDO 的一部分。这很可能是您正在尝试编译的 appengine 项目。

# tridion - 如何调试 Tridion 模板和工作流程？

> ID：11366385
> 
> 赞同：3
> 
> 时间：2012-07-06T16:46:30.467
> 
> 标签：tridion, tridion-2011

我是 SDL Tridion 世界的新手，我被分配了几项活动：

创建页面模板 (PT)、组件模板 (CT) 和示例工作流程。基本上我在 .NET 方面经验丰富。

我有一些启动代码要开始，我想知道有没有办法从 Visual Studio 2010 调试 PT、CT、工作流？

您的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:55:19.077

对于 CT 或 PT 复合模板，这里是 Tridion 文档（需要登录），其中包含有关如何调试的明确说明。 [http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-259229208](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-259229208)

对于 Workflow，这取决于您所遵循的实现类型（VBScript 或事件系统（TOM .net）或核心服务），但通常与上述没有什么不同。您附加到进程并进行调试。 [http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_BC70576958F3420CA4FC87B27CB0FC38](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_BC70576958F3420CA4FC87B27CB0FC38)

# f# - 加载 F# 源文件

> ID：11366388
> 
> 赞同：2
> 
> 时间：2012-07-06T16:46:50.373
> 
> 标签：f#

如何将另一个 F# 源文件 ( `*.fs`) 加载到项目中？预`#load "path/to/file"`处理器指令仅在您使用的文件是 F# 脚本文件或 F# 交互式文件时才有效。

我认为这可能与makefile有关，对吗？

编辑：另外，我没有使用任何 IDE；只有 Emacs 和 Mono。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:09:55.440

如果您在命令行手动编译，则必须按顺序列出您希望 F# 编译器使用的所有文件。

否则，与 makefile 等效的 .NET 是[MSBuild](http://msdn.microsoft.com/en-us/library/ms171452%28v=vs.90%29.aspx)，而 MSBuild 的 Mono 版本是[XBuild](http://www.mono-project.com/Microsoft.Build)。

# vim - 如何枚举vim中的选项卡？

> ID：11366390
> 
> 赞同：9
> 
> 时间：2012-07-06T16:46:54.640
> 
> 标签：vim, tabs

Vim 是一个非常高效的编辑器，我每天都喜欢使用它，但我发现在选项卡之间移动花费的时间比它应该的要多。

当我想切换到另一个选项卡时，我经常重复`gt`或`gT`多次。Vim 提供了一种更好的方法来访问所需的选项卡 - `n`+ `gt`，其中`n`是选项卡编号。但是要使用它，您应该先计算标签号。如果您打开十几个标签，它很快就会变得无聊。

我认为枚举选项卡会很好。文件名前面每个选项卡上的单个数字，如下所示：

```
1 Readme | 2 main.c | 3 main.h | 4 process.h 
```

我希望可以通过编辑配置或使用一些插件来配置 vim 来做到这一点。

有没有办法实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T18:22:19.687

您可以使用该`tabline`选项在 vim 的控制台模式下设置选项卡的标签。请参阅帮助，`:h setting-tabline`其中还显示了一个非常基本的最小示例，您可以根据需要对其进行调整，例如，对于您想要的，我会使用这样的东西：

```
fu! MyTabLabel(n)
let buflist = tabpagebuflist(a:n)
let winnr = tabpagewinnr(a:n)
let string = fnamemodify(bufname(buflist[winnr - 1]), ':t')
return empty(string) ? '[unnamed]' : string
endfu

fu! MyTabLine()
let s = ''
for i in range(tabpagenr('$'))
" select the highlighting
    if i + 1 == tabpagenr()
    let s .= '%#TabLineSel#'
    else
    let s .= '%#TabLine#'
    endif

    " set the tab page number (for mouse clicks)
    "let s .= '%' . (i + 1) . 'T'
    " display tabnumber (for use with <count>gt, etc)
    let s .= ' '. (i+1) . ' ' 

    " the label is made by MyTabLabel()
    let s .= ' %{MyTabLabel(' . (i + 1) . ')} '

    if i+1 < tabpagenr('$')
        let s .= ' |'
    endif
endfor
return s
endfu
set tabline=%!MyTabLine() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:50:22.750

如果您正在使用`gvim`：

```
set guitablabel=(%N)\ %t\ %M 
```

* * *

输入`:help tabline`和`:help guitablabel`阅读更多内容。

文档中有一个`function MyTabLine()`。

# perl - WWW::Mechanize 给出损坏的上传文件名

> ID：11366391
> 
> 赞同：2
> 
> 时间：2012-07-06T16:47:00.723
> 
> 标签：perl, encoding, www-mechanize

在使用[`WWW::Mechanize`](https://metacpan.org/module/WWW%3a%3aMechanize). 该文件已正确上传，但名称已损坏（我仅`??????`在目标站点上看到）。

代码很简单：

```
use WWW::Mechanize;
use Encode qw(from_to);

my $config = {

    login         => "login",
    password      => "pass",
    source_folder => "$Bin/source_folder",
};

my $mech = WWW::Mechanize->new( autocheck => 1 );
$mech->agent_alias("Windows IE 6");

$mech->get("http://www.antiplagiat.ru/Cabinet/Cabinet.aspx?folderId=689935");
authorize($mech);

$mech->submit_form(

    form_number => 1,
    fields      => {},
    button =>
'ctl00$ctl00$Body$MainWorkSpacePlaceHolder$FolderControl_StdFolder_0$DocumentsGrid$btnAddItem',
);

find( \&wanted, $config->{source_folder} );

sub wanted {

    return unless -f;

    say $config->{source_folder} . "/" . $_;

    #from_to($_, "CP1251", "UTF8"); doesn't work too :-(

    my $mech = $mech->clone();
    $mech->submit_form(

        form_number => 1,
        fields      => {

            'ctl00$ctl00$Body$MainWorkSpacePlaceHolder$fuDocumentUpload' =>
              $config->{source_folder} . "/" . $_,
        },
        button => 'ctl00$ctl00$Body$MainWorkSpacePlaceHolder$btnCommitUpload',
    );
} 
```

如果我将文件名从 CP1251 编码为 UTF8，则上传不起作用。请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T00:20:56.570

这是我使用的解决方案：

```
 my $filename = $_;
    from_to( $filename, "CP1251", "UTF8" );

    my $mech = $mech->clone();

    my $form = $mech->form_number(1);
    $mech->field( 'ctl00$ctl00$Body$MainWorkSpacePlaceHolder$fuDocumentUpload',
        $config->{source_folder} . "/" . $_ );
    $form->find_input(
        'ctl00$ctl00$Body$MainWorkSpacePlaceHolder$fuDocumentUpload')->filename($filename);
    $mech->submit_form(

        form_number => 1,
        button => 'ctl00$ctl00$Body$MainWorkSpacePlaceHolder$btnCommitUpload',
    ); 
```

# c# - 一棵树是否应该只有一个根节点

> ID：11366394
> 
> 赞同：3
> 
> 时间：2012-07-06T16:47:05.823
> 
> 标签：c#, treeview, hierarchy, root-node

我想显示一个树结构。我真的需要给用户/树一个预定义的硬编码根节点，比如“RootUnit”，他可以在其中添加他的孩子或后代吗？

在添加节点时这是否有意义或只会造成麻烦？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:52:36.600

如果你有两个根，那么你就有两棵树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T16:50:42.407

一棵树应该只有一个根。但是您不需要对根进行硬编码。只需将第一个创建的树节点视为根。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T17:01:43.507

根据定义，一棵树只有一个根，并且每个子节点都只有一个父节点（没有父节点的根除外）。如果不满足这些限制，那么您的树就不再是树而是图（定向与否）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T17:03:36.550

这取决于上下文。从严格的数学定义来看，一棵树不能有多个根节点。但是，有些树的实现忽略了这一点并且无论如何都有多个顶级节点（例如`TreeView`您标记此问题的控件）。您只需要问自己，如果您的特定程序使用多个顶级节点会更好或更差。鉴于我们对您的计划一无所知，因此我们无法真正为您做出决定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T16:56:01.640

与其对每个节点使用相同的构造函数，不如提供一个用于根节点的默认构造函数和一个用于其他所有节点的构造函数。它并不难看，而且有效。

```
public Node()
{
  // Set properties if you'd like.
  // such as having no children yet or whatnot.
}

public Node(Node parent)
{
  // Similar to Node()
} 
```

看！干净整洁。

# java - 如何 git-checkout 在 OpenShift 上创建的第一个应用程序？

> ID：11366396
> 
> 赞同：0
> 
> 时间：2012-07-06T16:47:33.000
> 
> 标签：java, git, openshift

我是 git 新手（来自 Subversion）。我正在探索[OpenShift](https://openshift.redhat.com)并创建了一个帐户以及第一个应用程序。据我了解，已经创建了一些[代码。](https://demo-firmflows.rhcloud.com/)

我已经安装了 TortoiseGit（我在 Windows 7 下），我想检查为我的应用程序创建的代码。我相信我必须执行 git clone，但是使用哪个 URL？如何在本地 PC 上签出代码？

**更新**

我删除了我的应用程序，安装了客户端工具集并从那里重新创建了应用程序。我面临另一个问题，但我会提出一个单独的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T16:54:12.530

[当您按照他们的https://openshift.redhat.com/app/getting_started](https://openshift.redhat.com/app/getting_started)页面中的说明安装他们的客户端工具集并创建一个新应用程序时，它已经执行了 git clone 并为您设置了远程存储库。该目录将与您在设置域和项目时提供的应用程序名称相同。

从那里开始，发布只是提交到主分支并推送（这是通用的基本 git）。对于添加或更新的单个文件，您可能应该从“git add”开始，然后：

```
git commit -m "your message"
git push 
```

# eclipse-rcp - 如何将文件添加到 Eclipse RCP 应用程序的根目录？

> ID：11366399
> 
> 赞同：2
> 
> 时间：2012-07-06T16:47:41.033
> 
> 标签：eclipse-rcp

我想知道是否可以（以及如何）将文件添加到 Eclipse RCP 应用程序的根目录。

我有一个 AppManual.pdf，我想在应用程序的根目录中分发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:38:34.683

查看[http://help.eclipse.org/galileo/topic/org.eclipse.pde.doc.user/tasks/pde_rootfiles.htm](http://help.eclipse.org/galileo/topic/org.eclipse.pde.doc.user/tasks/pde_rootfiles.htm)

# delphi - 如何制作具有透明背景的 TScrollBox？

> ID：11366400
> 
> 赞同：1
> 
> 时间：2012-07-06T16:47:50.490
> 
> 标签：delphi, user-interface, delphi-2006

我有一个`TFrame`背景`TImage`。

这个框架作为我在 main 中有限空间放置的其他框架的祖先`TForm`。所以它只是其他框架的用户界面基础。

我需要在这些框架内放置许多控件，因为它们将处理大型数据库表单。

由于主窗体的空间有限，我需要在除标题栏之外的`TScrollBox`所有空间中放置一个。`TFrame`但这涵盖了背景图像。

**如何使此 ScrollBar 成为背景透明？**

**还是制作具有该功能的新组件更好，以及如何做到这一点？**

*我在其他网站上看到了一些例子，但它们在运行时有问题*

谢谢你！

**编辑2：**

我`TElScrollBox`从 LMD Inovative 的 ElPack 中找到了。这是背景透明的，允许我们将图像作为背景。但同样的问题发生了：当我们在运行时滚动它时，它会将祖先的背景移动到它的效果区域中。

**编辑1：**

我试图创建一个后代，但滚动条仅在我们将鼠标悬停在它应该在的位置时才显示，并且当我们滚动它时，表单的背景会在滚动框内移动。而且，它内部的控件会出现一些油漆错误......

```
interface

uses
  Windows, SysUtils, Messages, Classes, Graphics, Controls, Forms,
  Dialogs, Menus, StdCtrls, ExtCtrls;

type
  TTransScrollBox = class(TScrollBox)
  private
    { Private declarations }
  protected
    procedure CreateParams(var params: TCreateParams); override;
    procedure WMEraseBkGnd(var msg: TWMEraseBkGnd); message WM_ERASEBKGND;
  public
    { Public declarations }
  published
    { Published declarations }
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Eduardo', [TTransScrollBox]);
end;

procedure TTransScrollBox.CreateParams(var params: TCreateParams);
begin
  inherited CreateParams(params);
  params.ExStyle := params.ExStyle or WS_EX_TRANSPARENT;
end;

procedure TTransScrollBox.WMEraseBkGnd(var Msg: TWMEraseBkGnd); 
begin
  SetBkMode (Msg.DC, TRANSPARENT);
  Msg.Result := 1;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:38:13.923

如果您不希望图像滚动，则必须滚动自己的滚动条，这并不太难（英格兰这里还在下雨，所以我很无聊！）

要进行测试，请创建框架，将图像放在上面并与客户端对齐。在设置为垂直并右对齐的框架上放置一个滚动条。在设计时放大框架。将控件放在任何地方，然后将其缩小，使某些控件不可见（在底部下方）。在表单显示的主表单上（用于测试），或者在创建新框架时调用 Frame.BeforeShow 进行设置。

**[稍后] 编辑**下雨了，仍然很无聊所以我为你完成了它！

```
unit ScrollingBaseFrameU;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, jpeg, ExtCtrls, StdCtrls, contnrs, Generics.Collections, Grids,
  DBGrids;

const
  MaxLargeSteps = 5; // maximum large scroll clicks to scroll to max
  IgnoreTag = 99;   // Controls with this tag value are igored for scrolling
  TitleHeight = 23; // Height of title bar as we are dealing with the image mouse co-ordinates
  RightMargin = 25; // space after right-most control
  BottomMargin = 25; // space after bottom-most control
  StrControl = 'ControlName';  // prefix for controls with no name

type
  TControlPos = class(Tobject) // Little object to save initial control positions
  public
    Name: string;
    X,
    Y: Integer;
  end;

  TScrollingBaseFrame = class(TFrame)
    BackGroundImage: TImage;
    HorzScrollBar: TScrollBar;
    VertScrollBar: TScrollBar;
    pnlTitle: TPanel;
    procedure VertScrollBarChange(Sender: TObject);
    procedure BackGroundImageMouseMove(Sender: TObject; Shift: TShiftState; X,
      Y: Integer);
    procedure FrameResize(Sender: TObject);
    procedure HorzScrollBarChange(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    ShowHScroller,
    ShowVScroller : Boolean;       // scroller needed at all?
    PosList: TList<TControlPos>;   // list of initial positions
    procedure BeforeShow; virtual; // override in descendants for specific behaviour
    procedure BeforeClose; virtual; // override in descendants for specific behaviour
    function IndexOfPos(AName:string): Integer;
  end;

implementation

{$R *.dfm}

procedure TScrollingBaseFrame.BeforeClose;
// Clean up
var
  p: TControlPos;
begin
  for p in PosList do
    p.free;
  PosList.Free;
end;

procedure TScrollingBaseFrame.BeforeShow;
//Setup scroller and save initial control positions
var
  i,XMax,YMax,Idx: Integer;
  AControl: TControl;
begin
  pnlTitle.Height := TitleHeight;
  PosList := TList<TControlpos>.Create;
  XMax := 0;
  YMax := 0;
  for i := 0 to ComponentCount - 1 do
  begin
    if Components[i] is TControl then
    begin
      AControl := TControl(Components[i]);
      if Acontrol.Tag <> IgnoreTag then
      begin
        Idx := PosList.Add(TcontrolPos.Create);
        if AControl.Name = '' then  // deal with empty names
          AControl.Name :=  StrControl + IntToStr(i);
        PosList[Idx].Name := AControl.Name;
        PosList[Idx].X := AControl.Left;
        PosList[Idx].Y := AControl.Top;
        if YMax < AControl.Top + AControl.Height then
         YMax := AControl.Top + AControl.Height;
        if XMax < AControl.Left + AControl.Width then
         XMax := AControl.Left + AControl.Width;
      end; // Ignored
    end; // is control
  end; // count
   VertScrollBar.Max := (YMax + BottomMargin) - Height; // bit of a bottom margin :)
   VertScrollBar.LargeChange := VertScrollBar.Max div MaxLargeSteps;
   ShowVScroller := VertScrollBar.Max > BottomMargin;
   VertScrollBar.Visible := ShowVScroller;
   HorzScrollBar.Max := (XMax + RightMargin) - Width; // bit of a Right margin :)
   HorzScrollBar.LargeChange := HorzScrollBar.Max div MaxLargeSteps;
   ShowHScroller := HorzScrollBar.Max > RightMargin;
   HorzScrollBar.Visible := ShowHScroller;
end;

procedure TScrollingBaseFrame.FrameResize(Sender: TObject);
begin
  BackGroundImage.Width := Width;
  BackGroundImage.Height := Height;
end;

procedure TScrollingBaseFrame.HorzScrollBarChange(Sender: TObject);
// Move the controls left and right relative to thier initail positions
var
  i,j: Integer;
  AControl: TControl;
begin
  for i := 0 to ComponentCount - 1 do
   begin
     if Components[i] is TControl then
     begin
       AControl :=  TControl(Components[i]);
       j := IndexOfPos(AControl.Name);
       if j >= 0 then  // could be ignored or the background image
         Acontrol.Left := PosList[j].X  - HorzScrollBar.Position;
     end;
   end;
end;

procedure TScrollingBaseFrame.BackGroundImageMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
// Show/Hide the scrollbars using mouse position
var
  ScrollBarWidth: Integer;
begin
  ScrollBarWidth := GetSystemmetrics(SM_CXVSCROLL);  // assume the same for horizontal
  VertScrollBar.Visible := (X > Width - ScrollBarWidth) and ShowVScroller;
  HorzScrollBar.Visible := (Y > (Height - TitleHeight) - ScrollBarWidth) and ShowHScroller;
end;

function TScrollingBaseFrame.IndexOfPos(AName:string): Integer;
// Find a control position in the list by name
var
  Idx: Integer;
begin
  Result := -1;
  Idx := 0;
  while (Result < 0) and (Idx < PosList.Count) do
  begin
    if PosList[idx].Name = AName then
      Result := idx;
    inc(idx);
  end;
end;

procedure TScrollingBaseFrame.VertScrollBarChange(Sender: TObject);
// Move the controls Up and down relative to thier initail positions
var
  i,j: Integer;
  AControl: TControl;
begin
  for i := 0 to ComponentCount - 1 do
   begin
     if Components[i] is TControl then
     begin
       AControl :=  TControl(Components[i]);
       j := IndexOfPos(AControl.Name);
       if j >= 0 then  // could be ignored
         Acontrol.Top := PosList[j].Y  - VertScrollBar.Position;
     end;
   end;
end;

end. 
```

和 DFM 的完整性：

```
object ScrollingBaseFrame: TScrollingBaseFrame
  Left = 0
  Top = 0
  Width = 830
  Height = 634
  DoubleBuffered = True
  ParentDoubleBuffered = False
  TabOrder = 0
  OnResize = FrameResize
  object BackGroundImage: TImage
    Tag = 99
    Left = 0
    Top = 23
    Width = 813
    Height = 594
    Align = alClient
    Picture.Data = { **Removed as it was so big!**}
    Transparent = True
    OnMouseMove = BackGroundImageMouseMove
    ExplicitTop = 0
    ExplicitWidth = 1600
    ExplicitHeight = 1200
  end
  object HorzScrollBar: TScrollBar
    Tag = 99
    Left = 0
    Top = 617
    Width = 830
    Height = 17
    Align = alBottom
    PageSize = 0
    TabOrder = 0
    OnChange = HorzScrollBarChange
    ExplicitLeft = 231
    ExplicitTop = 293
    ExplicitWidth = 121
  end
  object VertScrollBar: TScrollBar
    Tag = 99
    Left = 813
    Top = 23
    Width = 17
    Height = 594
    Align = alRight
    Kind = sbVertical
    PageSize = 0
    TabOrder = 1
    OnChange = VertScrollBarChange
    ExplicitTop = 29
  end
  object pnlTitle: TPanel
    Tag = 99
    Left = 0
    Top = 0
    Width = 830
    Height = 23
    Align = alTop
    Caption = 'pnlTitle'
    TabOrder = 2
    ExplicitLeft = 184
    ExplicitTop = 3
    ExplicitWidth = 185
  end
end 
```

**[第二次编辑]**好吧，不想浪费我的空闲时间，下面的内容应该适用于 Delphi 6 及更高版本。

```
unit ScrollingBaseFrameU;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, jpeg, ExtCtrls, StdCtrls, contnrs, Grids,
  DBGrids;

const
  MaxLargeSteps = 5; // maximum large scroll clicks to scroll to max
  IgnoreTag = 99;   // Controls with this tag value are igored for scrolling
  TitleHeight = 23; // Height of title bar as we are dealing with the image mouse co-ordinates
  RightMargin = 25; // space after right-most control
  BottomMargin = 25; // space after bottom-most control
  StrControl = 'ControlName';  // prefix for controls with no name

type
  TControlPos = class(Tobject) // Little object to save initial control positions
  public
    Name: string;
    X,
    Y: Integer;
  end;

  TControlPosList = class(TObject)
  private
    function GetCount: Integer;
    function GetItems(Index: Integer): TControlPos;
    procedure SetItems(Index: Integer; const Value: TControlPos);
  public
   TheList: TObjectList;
   Constructor Create; virtual;
   Destructor Destroy; override;
   function Add(APos: TControlPos): Integer;
   function IndexOfPos(AName: string): Integer;
   property Count: Integer read GetCount;
   property Items[Index: Integer]: TControlPos read GetItems write SetItems; default;
  end;

  TScrollingBaseFrame = class(TFrame)
    BackGroundImage: TImage;
    HorzScrollBar: TScrollBar;
    VertScrollBar: TScrollBar;
    pnlTitle: TPanel;
    procedure VertScrollBarChange(Sender: TObject);
    procedure BackGroundImageMouseMove(Sender: TObject; Shift: TShiftState; X,
      Y: Integer);
    procedure FrameResize(Sender: TObject);
    procedure HorzScrollBarChange(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    ShowHScroller,
    ShowVScroller : Boolean;       // scroller needed at all?
    PosList: TControlPosList;   // list of initial positions
    procedure BeforeShow; virtual; // override in descendants for specific behaviour
    procedure BeforeClose; virtual; // override in descendants for specific behaviour
  end;

implementation

{$R *.dfm}

procedure TScrollingBaseFrame.BeforeClose;
// Clean up
begin
  PosList.Free;
end;

procedure TScrollingBaseFrame.BeforeShow;
//Setup scroller and save initial control positions
var
  i,XMax,YMax,Idx: Integer;
  AControl: TControl;
begin
  pnlTitle.Height := TitleHeight;
  PosList := TControlPosList.Create;
  XMax := 0;
  YMax := 0;
  for i := 0 to ComponentCount - 1 do
  begin
    if Components[i] is TControl then
    begin
      AControl := TControl(Components[i]);
      if Acontrol.Tag <> IgnoreTag then
      begin
        Idx := PosList.Add(TcontrolPos.Create);
        if AControl.Name = '' then  // deal with empty names
          AControl.Name :=  StrControl + IntToStr(i);
        PosList[Idx].Name := AControl.Name;
        PosList[Idx].X := AControl.Left;
        PosList[Idx].Y := AControl.Top;
        if YMax < AControl.Top + AControl.Height then
         YMax := AControl.Top + AControl.Height;
        if XMax < AControl.Left + AControl.Width then
         XMax := AControl.Left + AControl.Width;
      end; // Ignored
    end; // is control
  end; // count
   VertScrollBar.Max := (YMax + BottomMargin) - Height; // bit of a bottom margin :)
   VertScrollBar.LargeChange := VertScrollBar.Max div MaxLargeSteps;
   ShowVScroller := VertScrollBar.Max > BottomMargin;
   VertScrollBar.Visible := ShowVScroller;
   HorzScrollBar.Max := (XMax + RightMargin) - Width; // bit of a Right margin :)
   HorzScrollBar.LargeChange := HorzScrollBar.Max div MaxLargeSteps;
   ShowHScroller := HorzScrollBar.Max > RightMargin;
   HorzScrollBar.Visible := ShowHScroller;
end;

procedure TScrollingBaseFrame.FrameResize(Sender: TObject);
begin
  BackGroundImage.Width := Width;
  BackGroundImage.Height := Height;
end;

procedure TScrollingBaseFrame.HorzScrollBarChange(Sender: TObject);
// Move the controls left and right relative to thier initail positions
var
  i,j: Integer;
  AControl: TControl;
begin
  for i := 0 to ComponentCount - 1 do
   begin
     if Components[i] is TControl then
     begin
       AControl :=  TControl(Components[i]);
       j := PosList.IndexOfPos(AControl.Name);
       if j >= 0 then  // could be ignored
         Acontrol.Left := PosList[j].X  - HorzScrollBar.Position;
     end;
   end;
end;

procedure TScrollingBaseFrame.BackGroundImageMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
// Show/Hide the scrollbars using mouse position
var
  ScrollBarWidth: Integer;
begin
  ScrollBarWidth := GetSystemmetrics(SM_CXVSCROLL);  // assume the same for horizontal
  VertScrollBar.Visible := (X > Width - ScrollBarWidth) and ShowVScroller;
  HorzScrollBar.Visible := (Y > (Height - TitleHeight) - ScrollBarWidth) and ShowHScroller;
end;

procedure TScrollingBaseFrame.VertScrollBarChange(Sender: TObject);
// Move the controls Up and down relative to thier initail positions
var
  i,j: Integer;
  AControl: TControl;
begin
  for i := 0 to ComponentCount - 1 do
   begin
     if Components[i] is TControl then
     begin
       AControl :=  TControl(Components[i]);
       j := PosList.IndexOfPos(AControl.Name);
       if j >= 0 then  // could be ignored
         Acontrol.Top := PosList[j].Y  - VertScrollBar.Position;
     end;
   end;
end;

{ TcontrolPosList }

function TControlPosList.Add(APos: TControlPos): Integer;
begin
  Result := TheList.Add(APos);
end;

constructor TControlPosList.Create;
begin
  TheList := TObjectList.Create;
  TheList.OwnsObjects := True;
end;

destructor TControlPosList.Destroy;
begin
  TheList.Free;
  inherited;
end;

function TControlPosList.GetCount: Integer;
begin
  Result := TheList.Count;
end;

function TControlPosList.GetItems(Index: Integer): TControlPos;
begin
  Result := TControlPos(TheList[Index]);
end;

function TControlPosList.IndexOfPos(AName: string): Integer;
// Find a control position in the list by name
var
  Idx: Integer;
begin
  Result := -1;
  Idx := 0;
  while (Result < 0) and (Idx < TheList.Count) do
  begin
    if Items[idx].Name = AName then
      Result := idx;
    inc(idx);
  end;
end;

procedure TControlPosList.SetItems(Index: Integer; const Value: TControlPos);
begin
  TheList[Index] := Value;
end;

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:48:56.320

颠倒基础框架上的顺序:)

把ScrollBox放在上面，然后把图片放在Scrollbox上（对齐客户端），让它透明。然后将控件放在上面，它允许滚动......

我相信你会尝试过这个，所以你有什么问题......

# javascript - PHP表单输出通过jquery保存在excel表中

> ID：11366403
> 
> 赞同：0
> 
> 时间：2012-07-06T16:47:59.053
> 
> 标签：javascript, jquery, json

在我的网站中，有一个启用 PHP 的地址详细信息表单。输出张贴在我的电子邮箱中。我喜欢通过 Jquery /json 将输出保存在我的外部 excel 文件“address.xls”中。PHP 表单的输入字段为“NAME”、“ADDRESS”、“CITY”、“PHONE”、“FAX”、“EMAIL”。在这种情况下，任何身体都有帮助。

通过网站表单，姓名、地址、城市、电话、传真、电子邮件被保存在启用 PHP 的电子邮件中。但我喜欢将其保存在 Excel 表中，这样更适合排序或数据库。

默认情况下还会自动重新打开并附加最后一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:58:11.387

将数据发布到 php 脚本，就像我相信你正在做的那样。然后让脚本看起来像这样

```
<?php
  header("Content-type: application/ms-excel");
  header("Content-Disposition: attachment; filename=myTable.xls"); 

  $name = $_POST['name'];
  $address = $_POST['address'];
  $city = $_POST['city'];
  $phone = $_POST['phone'];

  echo "name \t address \t city \t phone \n";
  echo "$name \t $address \t $city \t $phone";

?> 
```

# c# - Neo4jClient/Cypher 查询返回对象但不设置属性

> ID：11366406
> 
> 赞同：1
> 
> 时间：2012-07-06T16:48:27.820
> 
> 标签：c#, neo4j, neo4jclient

我只是无法通过 Neo4jClient 和 Cypher 从 Neo4j 中获取对象。

```
var client = new GraphClient(new Uri("http://mymachine:7474/db/data"));
client.Connect();
var myList = client.RootNode.StartCypher("root")
    .Match("root-[:RELATED_TO]->(user)")
    .Return<User>("user").Results; 
```

我在 myList[0] 中得到了一个用户对象，但它的属性是空的。

我得到相同的（具有空属性的对象）通过

```
client.ExecuteGetCypherResults<User>(
    new CypherQuery("start n=node(1) return n;",null, CypherResultMode.Set)
); 
```

我忽略了什么明显的事情？

（Neo4j 1.8 MS5，Neo4jClient 1.0.0.388）

/Neo4jClient/Neo4j 菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:25:30.487

耶！我像这样更改为Node：

```
var myList = client.RootNode.StartCypher("root")
    .Match("root-[:RELATED_TO]->(user)")
    .Return<Node<User>>("user").Results; 
```

最后

```
var myList = client.RootNode.StartCypher("root")
    .Match("root-[:RELATED_TO]->(user)")
    .Return<Node<User>>("user").Results
    .Select( nu => nu.Data ); 
```

最简单的例子应该是：

```
var myList = client.ExecuteGetCypherResults<Node<User>>(
    new CypherQuery("start n=node(1) return n;", null, CypherResultMode.Set))
.Select(un => un.Data); 
```

其中 1 是用户节点的 ID。

# c++ - 来自主线程的 C++ 调用方法

> ID：11366408
> 
> 赞同：1
> 
> 时间：2012-07-06T16:48:35.147
> 
> 标签：c++, multithreading, user-interface, synchronization

在我的一个班级中，我正在使用以下方法启动一个线程：

```
HANDLE hThread;
unsigned threadID;
hThread = (HANDLE)_beginthreadex( NULL, 0, &myThread, NULL, 0, &threadID ); 
```

我想从这个线程调用一个必须从主线程调用的方法（该方法正在与 UI 交互）但我真的不知道该怎么做，因为主线程不能等到“ myThread”通知它。

我见过很多

```
while(true){
  //wait something from myThread
} 
```

但我不能这样等！

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:02:05.927

由于您的主线程是 UI，因此您可以向它发送消息。

```
#define WM_USER_EXECUTE_MY_CODE (WM_USER + 1000) 
```

您的 UI 消息循环应该处理消息：

```
// API code
// LRESULT CALLBACK WndProc(HWND hwnd, UINT iMsg, WPARAM wParam, LPARAM lParam)
// create message map yourself if you're using MFC

if (iMsg == WM_USER_EXECUTE_MY_CODE)
{
    // execute your code must run in main thread
} 
```

在您的工作线程中，向 UI 发送一条消息

```
// HWND hwnd = handle to main UI window
// if you need some parameters, send them through WPARAM or LPARAM
SendMessage(hwnd, WM_USER_EXECUTE_MY_CODE, 0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:53:26.913

您应该能够使用 WaitForMultipleObjects 等待一个或多个线程。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025(v=vs.85).aspx)

例子：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687055(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687055(v=vs.85).aspx)

# c# - 通过其中的子节点值定位 XML 节点，并更改另一个值

> ID：11366409
> 
> 赞同：3
> 
> 时间：2012-07-06T16:48:47.977
> 
> 标签：c#, xml

三部分问题。

是否可以通过其中的子节点定位特定的 XML 节点以检索父节点的其他子节点？例子：

```
<House>
    <Kitchen>
        <Appliance>
            <Name>Refrigerator</Name>
            <Brand>Maytag</Brand>
            <Model>F2039-39</Model>
        </Appliance>
        <Appliance>
            <Name>Toaster</Name>
            <Brand>Black and Decker</Brand>
            <Model>B8d-k30</Model>
        </Appliance>
    </Kitchen>
</House> 
```

因此，为此，我想通过搜索“冰箱”或“烤面包机”来定位合适的设备节点，并从中检索品牌。

这个问题的第二部分是这样的：这是一种愚蠢的做法吗？在 Appliance 标签中使用属性会使这更容易吗？如果是这样，我将如何找到它？

至于第三部分，一旦我找到了设备，我将如何更改那个特定设备的型号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:05:39.183

好吧，如果您使用的是 XmlDocument

```
foreach(XmlNode applianceNode in 
          myDocument.DocumentElement.SelectNodes("Kitchen/Applicance[Name='Refrigerator']")
{
   XmlNode modelNode = applicianceNode.SelectSingleNode("Model").InnerText = SomeOtherValue;
} 
```

如果您将名称标签设为属性 (applicanceName)，则对此几乎没有什么区别。

```
foreach(XmlNode applianceNode in 
          myDocument.DocumentElement.SelectNodes("Kitchen/Applicance[@applianceName='Refrigerator']")
{
// ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T16:56:13.543

使用[Xlinq](http://msdn.microsoft.com/en-us/library/bb299195)，您可以非常自然地执行此查询：

```
// Given:
//   var xdoc = XDocument.Load(...);
//   string applianceName = "Toaster";

// Find the appliance node who has a sub-element <Name> matching the appliance
var app = xdoc.Root
              .Descendants("Appliance")
              .SingleOrDefault(e => (string)e.Element("Name") == applianceName);

// If we've found one and it matches, make a change
if (app != null)
{
    if (((string)app.Element("Model")).StartsWith("B8d-k30"))
    {
        app.Element("Model").Value = "B8d-k30 Mark II";
    }
}

xdoc.Save(@"output.xml"); // save changes back to the document 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:53:18.523

```
 string xml = @"<House>
    <Kitchen>
        <Appliance>
            <Name>Refrigerator</Name>
            <Brand>Maytag</Brand>
            <Model>F2039-39</Model>
        </Appliance>
        <Appliance>
            <Name>Toaster</Name>
            <Brand>Black and Decker</Brand>
            <Model>B8d-k30</Model>
        </Appliance>
    </Kitchen>
</House>";

    XDocument xdoc = XDocument.Parse(xml);

    string newModel = "B8d-k45";

    var matchingElement = (from appliance in xdoc.Descendants("Appliance")
                           where appliance.Element("Name").Value == "Toaster"
                           select appliance).FirstOrDefault();

    if (matchingElement != null)
    {
        matchingElement.Element("Model").Value = newModel;
    }

    Console.WriteLine(xdoc.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T15:05:02.607

死灵术。
是的，使用 XPath 更简单，并且完全没有 Linq 工作：
只需使用 .. 到达父节点（再想一想，使用“ordinalignorecase”时 Linq 会更容易）

```
public static void CreateNewHouse()
{
    System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
    doc.XmlResolver = null;
    doc.Load(@"d:\House.xml");

    foreach (System.Xml.XmlNode modelNode in doc.DocumentElement
.SelectNodes("/House/Kitchen/Appliance/Name[text()='Refrigerator']/../Model"))
    {
        modelNode.InnerText = "A New Value";
    }

    doc.Save(@"d:\MyHouse.xml");
} 
```

我的房子.xml：

```
<House>
  <Kitchen>
    <Appliance>
      <Name>Refrigerator</Name>
      <Brand>Maytag</Brand>
      <Model>A New Value</Model>
    </Appliance>
    <Appliance>
      <Name>Toaster</Name>
      <Brand>Black and Decker</Brand>
      <Model>B8d-k30</Model>
    </Appliance>
  </Kitchen>
</House> 
```

如果您需要它不区分大小写，请将 text() 替换为：

```
translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') 
```

（仅适用于 ASCII/英语），当然也将“冰箱”更改为小写（“冰箱”）

如果 XML 文档有默认命名空间，则需要在 Select*Node 中提供它，例如

```
 xnImageTag.SelectSingleNode("./dft:Source", nsmgr); 
```

在哪里

```
System.Xml.XmlNamespaceManager nsmgr = GetReportNamespaceManager(doc);

public static System.Xml.XmlNamespaceManager GetReportNamespaceManager(System.Xml.XmlDocument doc)
{
    if (doc == null)
        throw new ArgumentNullException("doc");

    System.Xml.XmlNamespaceManager nsmgr = new System.Xml.XmlNamespaceManager(doc.NameTable);

    // <Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner">

    if (doc.DocumentElement != null)
    {
        string strNamespace = doc.DocumentElement.NamespaceURI;
        System.Console.WriteLine(strNamespace);
        nsmgr.AddNamespace("dft", strNamespace);
        return nsmgr;
    }

    nsmgr.AddNamespace("dft", "http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition");
    // nsmgr.AddNamespace("dft", "http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition");

    return nsmgr;
} // End Function GetReportNamespaceManager 
```

# mercurial - 文件在早期提交删除后不断消失

> ID：11366410
> 
> 赞同：2
> 
> 时间：2012-07-06T16:48:48.607
> 
> 标签：mercurial

关于回购中（二进制）文件的另一个问题。

我需要它们进行本地访问（它们是数据库二进制文件）。有人在早期提交中将它们从存储库中删除。我将它们放回仓库，但在提交后，它们又消失了。

在我的 bitbucket 仪表板中，早期删除说`Binary file removed.`所以我相信它是通过`hg remove`.

我忽略了这个目录。但是为什么文件总是消失？

```
syntax: glob
... more rules

project/directory/mongodb-linux/* 
```

我忽略了其他目录，但它们很好......

我怎样才能防止它们消失，并且任何再次从这个 repo 中提取的人（已经有二进制文件）也可以保留他们的？

谢谢。

# css - 如何将代码区域css样式添加到HTML

> ID：11366411
> 
> 赞同：0
> 
> 时间：2012-07-06T16:48:51.597
> 
> 标签：css

我正在尝试在 wordpress 中创建一个博客。由于我可能需要在我的帖子中添加一些代码块，我想知道是否有任何 CSS 样式来表示代码块。

一个非常简单的例子是 stackoverflow 代码标签（如下所示）

```
 <script type="text/javascript">
   alert('this is example of what i need to do ') ; 
    </script> 
```

![在此处输入图像描述](../Images/f25286f6f1a00bf87daeb300460085d7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T16:52:45.833

由于您使用的是 wordpress，因此有插件可以做到这一点。只需查看[http://wordpress.org/extend/plugins/tags/syntax-highlighting](http://wordpress.org/extend/plugins/tags/syntax-highlighting)似乎就有很多可供选择。

# php - 如何在PHP中获取变量内容的大小

> ID：11366412
> 
> 赞同：28
> 
> 时间：2012-07-06T16:48:54.483
> 
> 标签：php

如果我在 PHP 中有以下变量：

```
$Message='Hello, this is just test message'; 
```

如何获取其内容的大小（以字节为单位）？例如，要打印如下内容：

```
<p>Message size is 20KB</p> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-06T17:30:44.587

[`strlen`](http://php.net/manual/en/function.strlen.php)返回字符串中的字节数，而不是字符长度。[在此处](http://php.net/manual/en/function.strlen.php)查看 PHP 手册。

仔细看：

> **笔记：**
> 
> strlen() 返回字节数而不是字符串中的字符数。

如果将结果乘以 8，则可以得到位。

这是一个可以轻松为您计算数学的函数。

```
function strbits($string){
    return (strlen($string)*8);
} 
```

**请注意**，如果您使用,，`memory_get_usage()`您将返回错误的值。内存获取使用量是 PHP 脚本分配的内存量。这意味着，在其解析器中，它为字符串和字符串的值分配内存。因此，设置 var 前后 this 的值会高于预期。

例如，字符串:`Hello, this is just test message`产生以下值：

```
Memory (non-real): 344 bytes
Strlen: 32 Bytes
Strlen * 8bits: 256 bits 
```

这是代码：

```
<?php
$mem1 = memory_get_usage();
$a = 'Hello, this is just test message';

echo "Memory (non-real): ". (memory_get_usage() - $mem1)."\n";
echo "Strlen: ". strlen($a)."\n";
echo "Strlen * 8bits: ". (strlen($a) * 8)."\n"; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T16:54:12.993

一个字符是一个字节，所以只需检查字符串长度。如果需要以 KB 为单位除以 1024（准备小数点）。

```
<?php echo "Message size is ".strlen($Message)."B"; ?> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-06T16:53:16.703

```
$start_memory = memory_get_usage();
$foo = "Some variable";
echo memory_get_usage() - $start_memory; 
```

如果您正在使用任何类型的 var，这很好。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T16:50:59.550

**[`strlen()`](https://www.php.net/manual/en/function.strlen.php)**返回字符串中的字节数。

编辑：（来自 PHP 手册页）

> **注意：
> strlen()**返回字节数而不是字符串中的字符数。
> 
> **注意：
> strlen()**在数组上执行时返回 NULL，并发出 E_WARNING 级别的错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T16:52:07.473

您应该使用字符串长度函数：

```
strlen($Message) 
```

您还应该查看 php 手册： http: [//php.net/manual/en/function.strlen.php](http://php.net/manual/en/function.strlen.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-18T21:23:35.083

您可以使用[https://github.com/mrsuh/php-var-sizeof](https://github.com/mrsuh/php-var-sizeof)
它提供`var_sizeof()`了以字节为单位获取任何 PHP 变量大小的函数。
计算 PHP 变量总大小的工具必须比`memory_get_usage()`.

```
<?php

require_once __DIR__ . '/vendor/autoload.php';

$message='Hello, this is just test message';

printf("\$message size is %d bytes\n", var_sizeof($message)); 
```

```
$message size is 48 bytes 
```

# android - Android SDK 压缩包

> ID：11366418
> 
> 赞同：0
> 
> 时间：2012-07-06T16:49:41.517
> 
> 标签：android, sdk

我尝试从提供的安装程序安装 android SDK，但它显示：“找不到 JDK”。但是，我安装了最新版本的 JDK。我还通过转到“计算机 > 属性 > 高级系统设置 > 环境变量 > 新系统变量 > 名称：JAVA_HOME > 路径：C:\Program Files\Java\jdk1.7.0_05\bin 来创建一个指向它的环境变量。

当我在命令提示符下键入 javac 时，它工作得很好。javac -version 产生：javac 1.7.0_5

谷歌搜索后，我看到有人通过 zip 存档安装 SDK。我下载并提取了它。有一个名为“SDK Manager.exe”的 .exe。我点击它，没有任何反应。命令提示符会快速闪烁几秒钟然后消失。而已。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:54:28.050

您已经添加了一个系统环境变量 JAVA_HOME，这很好。

您还需要将 %JAVA_HOME%\bin 添加到 PATH 变量中。并启动一个新的命令窗口，您可以从中试用“SDK Manager.exe”

# c# - 如何测试一个没有返回值的函数？

> ID：11366420
> 
> 赞同：6
> 
> 时间：2012-07-06T16:49:41.563
> 
> 标签：c#, unit-testing, .net-2.0, mstest

我让 Visual Studio 为班上的每个成员创建了一个测试。这是一个例子：

```
/// <summary>
///A test for CloseCurrentTextLogFile
///</summary>
[TestMethod()]
public void CloseCurrentTextLogFileTest()
{
  Logger.CloseCurrentTextLogFile();
  Assert.Inconclusive( "A method that does not return a value cannot be verified." );
} 
```

基于断言字符串，我想知道如何测试这个......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:04:53.913

静态方法自然会使自己相当难以测试，所以我的建议是基于将代码从静态方法中重构出来。

我会把 Logger 变成一个实例类，它在构造函数中接受一个 IO 对象。这将允许您存根 IO 对象，并且您可以断言您的 IO 对象的`Close`方法已被调用。

仅当您想让您的代码 100% 可测试时。否则，我会同意 Mo 的观点，即如果它不可测试，则不要编写强制测试……那些往往非常脆弱。最后，你需要对你的代码务实。通常，记录器对于保持静态很有用，但是正如我已经提到的，这些往往是非常不可测试的......所以对你的工作要务实，不要仅仅为了获得 100% 的代码覆盖率而编写测试...... .that 100% will come with a price...

**更新**

这就是为什么这不能从单元测试的教条 POV 中真正测试的原因。您不是在测试一个工作单元，而是在测试 Logger**和**Logger 的依赖项（在本例中为 IO 对象）。它还使您的测试变慢并且需要环境设置和状态（您必须先打开一个实际文件才能关闭它，对吗？）。这些对于单元测试都是不利的，但对于集成测试来说还可以……所以这也取决于你正在编写什么样的测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:00:02.917

我会假设，如果它真的不可测试，那么它实际上根本不会做任何事情，也不应该存在；）类似这样的东西可能会起作用......

```
Assert.IsNotNull( Logger.File );
Logger.CloseCurrentTextLogFile();
Assert.IsNull( Logger.File ); 
```

或检查状态`Logger.FileOpenStatus`或检查是否`Logger.OpenFile(fname)`在关闭之前引发异常，但不是在之后。一定有某种东西`Logger`的行为取决于所`CloseCurrentTextLogFile()`执行的任何行动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T16:53:54.600

您可以检查`Logger`logger 的状态，也可以调用其他不会产生错误的方法，因为您调用了此方法，如果您没有调用该方法，则应该会成功。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T16:54:05.120

我也不确定，但您可以尝试以下操作： 函数应该做某事（写入文件、设置一些变量等） 也许您可以检查变量是否已写入，或者文件是否已创建。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T16:57:21.560

您可以模拟`Logger`该类并断言`CloseCurrentTextLogFile`正在调用该类。有些人可能会争辩说您需要检查所有打开的日志文件是否已关闭，我个人不同意这一点，因为这会测试`Logger`本身而不是您的方法。这是开发人员在开始设计系统时应该问自己的问题，我如何测试我的应用程序。

# latex - 在 org-mode 中取消 \hypersetup 后有什么影响？

> ID：11366425
> 
> 赞同：2
> 
> 时间：2012-07-06T16:50:03.747
> 
> 标签：latex, org-mode

我用自己的序言在 org 模式下制作 pdf，但生成的 PDF 或 tex 文件总是出现以下信息：

```
(format "\\hypersetup{\n  pdfkeywords={%s},\n  pdfsubject={%s},\n  pdfcreator={%s}}\n"
(org-export-latex-fontify-headline keywords)
(org-export-latex-fontify-headline description)
(concat "Emacs Org-mode version " org-version)) 
```

这些鳕鱼位于 ~/.emacs.d/org-7.8.11/lisp/org-latex.el

我取消了它以防止其 PDF 文件的第一页出现无用的信息。但是可以删除这些代码而不丢失任何功能吗？

这个动作会造成什么影响？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:05:48.893

好的，我知道它是怎么回事。

将代码添加到您的序言中：

```
\usepackage{hyperref} 
```

一切都解决了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-30T21:08:25.620

在您提到的同一个文件中，（`lisp/org-latex.el`），它建议

```
org-latex-hyperref-template...
Set it to the empty string to ignore the command completely. 
```

所以以下应该工作

```
(setq org-latex-hyperref-template "") 
```

唉，我已经阅读了与我当前`org`版本不同的下载源代码，所以这不起作用。`apropos`可能很容易解决，所以

```
M-x apropos RET hyperref RET 
```

将我引向变量`org-latex-with-hyperref`，所以现在我尝试

```
(setq org-latex-with-hyperref nil) 
```

这对我有用。

# git - 在 Git 存储库中创建一个文件

> ID：11366428
> 
> 赞同：2
> 
> 时间：2012-07-06T16:50:15.197
> 
> 标签：git

我正在开发一个 R 项目，该项目目前具有以下目录布局：

```
项目1
  |-- 文件.r

```

`file.r`用于构建特定于项目 1 的统计模型（因此`proj1`）。

在开发过程中，我们将为众多项目构建大量模型：

```
工作
  |-- 项目1
  | └-- 文件.r
  |-- 项目2
  | └-- 文件.r
  ：
  └-- 项目
        └-- 文件.r

```

`file.r`每个项目之间将有 90% 相似，但会有差异。我的问题是，**有没有办法创建一个主`file.r`文件并为每个项目简单地分叉它？**这样，对 master 的错误修复/增强可以简单地重新定位到 fork，并且文件特定的更改将简单地应用于顶部。我的第一个想法是使用子模块，但我不确定如何在这里应用它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:58:04.960

为每个项目使用“主题分支”：

```
git checkout master
git add file.r ;# this is your master template upon which others are based
git commit -m "Committed the master file" 
```

然后对于每个项目：

```
git checkout -B <project> master ;# create and checkout <project> branch
<hack away on file.r, commit when you want>
git push origin <project> ;# to share <project> with others 
```

所以在实践中，你最终会得到`master`，比如说，，`project1`等等都是基于它的。应该完全按照您的意愿行事，并保持一切正常。`project2``project3`

与其他鼓励多个存储库的解决方案相比，此解决方案的优势：

1.  更容易管理。您只有一个存储库，实际上最多有 20-30 个分支？听起来很多，但通过清晰的标签很容易知道你在哪里，特别是如果你只管理一个小文件集。
2.  如果你很懒（就像我一样），那么容易区分。`file.r`您可以看到两个项目之间的文件差异`git diff projectA projectB -- file.r`。您可以对多个存储库执行相同的操作，但它需要一个存储库规范，例如`git diff projectA/master projectB/master -- file.r`. 如果您有 20-30 个项目存储库或使用子模块，可能会感到困惑。
3.  轻松更新。获取更新就像发布`git fetch origin`和观察输出一样简单。
4.  轻松克隆。设置新的本地存储库时，您克隆了一个远程。无需克隆原点，然后再克隆`git remote add <project>`存储库，直到您拥有它们为止。

缺点（不完整的列表）：

1.  此方法依赖于您密切关注已签出的分支。有关目录结构的任何内容都不会提示您，因此`file.r`在任何给定时刻您正在查看的内容可能都不那么明显。这可能会破坏交易。我不知道。我想这取决于您的工作流程。
2.  正如 KurzedMetal 在评论中指出的那样，如果您需要将所有项目合并为一个，这可能会很快变得一团糟。因此，我不建议将它用于源代码。然而，对于不同的`R`项目，这可能不是一个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:00:44.660

IMO 实现这一目标的最佳方法是：

1.  创建共享代码的库和存储库
2.  为每个项目创建一个 repo
3.  用于`git submodule`将共享代码集成到每个项目中
4.  导入 r 库并添加项目特定代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-07T14:41:06.980

There are ways described in the other answers.

For example,

*   use object-oriented-patterns or templates to increase reuse and reduce code.
*   use git branch
*   use git submodule
*   Finally, when no other way, **I use comments in the file header, that it is a fork of another file.**

    ```
     Date          | Author              | Description
     ------------- | ------------------- | --------------
     05/18/2018    | You                 | Forked from Other/file.r 
    ```

# javascript - jquery - 是否可以查看缓存的元素是否隐藏

> ID：11366433
> 
> 赞同：1
> 
> 时间：2012-07-06T16:50:31.280
> 
> 标签：javascript, jquery, caching

我在 jquery 中缓存了一个 DOM 元素，想知道如何查看它是否隐藏。

我用普通的选择器没有问题。使用普通的选择器，我会做这样的 if 语句：

```
if('.someClass:hidden') {
    console.log('hidden')
} 
else {
    console.log('not hidden');
} 
```

但不是 .someClass 我有缓存的元素。像这样，细节是缓存的元素：

```
$this = $(this);
details = $this.find(".details"); 
```

非常感谢

乙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:51:54.543

对于缓存元素，您可以使用[is()](http://api.jquery.com/is/)

```
var $cachedElement = $('#cachedElement');
if($cachedElement.is(':hidden')){
   console.log('hidden')
}else {
   console.log('not hidden');
} 
```

# html - Chrome扩展的奇怪设置/选项页面

> ID：11366435
> 
> 赞同：1
> 
> 时间：2012-07-06T16:50:36.143
> 
> 标签：html, google-chrome-extension, html-select

我正在阅读 Chrome 扩展代码。在它的一个html文件中（用来设置），源码显示有这样一个`select`元素

```
<select id="hostselect"></select> 
```

请注意，没有`option`元素作为元素的子`select`元素。但是，如果我在 Chrome 中打开扩展程序的设置页面，有一个与该元素对应的下拉列表`select`，而且，如果我使用 Chrome 开发人员工具查看此设置页面，它会显示该`select`元素有`option`子元素：

```
<select id="hostselect">
  <option value="host1">host1</option>
  <option value="hots2">host2</option>
</select> 
```

`option`如果我在文本编辑器中查看设置页面的源代码，我不明白为什么没有子项，而`option`当我使用 Chrome 开发人员工具查看页面的 DOM 时出现子项。最可能的原因是什么？扩展中的一些内容脚本会改变设置页面的 DOM 吗？另外，写这样的代码有什么好处？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T02:25:25.093

我这样做是为了延长工作时间。我正在使用 Javascript 将额外的选项加载到选择中。我这样做是因为选项的数量是动态的。我现在没有可用的资源，但如果您愿意，我可以稍后发布一个示例

**更新**

下面是一些可能会填充您的`select`元素的 javascript 示例。我正在使用 jQuery 附加选项并使用 jQuery 的`each`. 我有两个静态选项“默认”和“无”生成的动态列表`getHosts()`

```
var hosts = getHosts();
if(hosts) {
    var selectElement = $("#hostSelect");
    selectElement.append($("<option></option>").attr("value", "0").text("-- Default Host --"));
    selectElement.append($("<option></option>").attr("value", "-1").text("-- No Host Selected --"));
    $.each(hosts, function(key, host) {
        selectElement.append($("<option></option>").attr( "value", host.getHostID() ).text( host.getName() ));
    })
} 
```

# ruby - 如何匹配包含忽略数组元素顺序的数组的哈希？

> ID：11366441
> 
> 赞同：7
> 
> 时间：2012-07-06T16:50:59.957
> 
> 标签：ruby, rspec2

我有两个包含数组的哈希。就我而言，数组元素的顺序并不重要。有没有一种简单的方法来匹配 RSpec2 中的此类哈希？

```
{ a: [1, 2] }.should == { a: [2, 1] } # how to make it pass? 
```

附言

有一个数组匹配器，它忽略了顺序。

```
[1, 2].should =~ [2, 1] # Is there a similar matcher for hashes? 
```

**解决方案**

该解决方案对我有用。最初由 tokland 建议，有修复。

```
RSpec::Matchers.define :match_hash do |expected|
  match do |actual|
    matches_hash?(expected, actual) 
  end
end

def matches_hash?(expected, actual) 
  matches_array?(expected.keys, actual.keys) &&
    actual.all? { |k, xs| matches_array?(expected[k], xs) }
end   

def matches_array?(expected, actual)
  return expected == actual unless expected.is_a?(Array) && actual.is_a?(Array)
  RSpec::Matchers::BuiltIn::MatchArray.new(expected).matches? actual
end 
```

要使用匹配器：

```
{a: [1, 2]}.should match_hash({a: [2, 1]}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:31:12.687

我会写一个自定义匹配器：

```
RSpec::Matchers.define :have_equal_sets_as_values do |expected|
  match do |actual|
    same_elements?(actual.keys, expected.keys) && 
      actual.all? { |k, xs| same_elements?(xs, expected[k]) }
  end

  def same_elements?(xs, ys)
    RSpec::Matchers::BuiltIn::MatchArray.new(xs).matches?(ys)
  end
end

describe "some test" do
  it { {a: [1, 2]}.should have_equal_sets_as_values({a: [2, 1]}) }  
end

# 1 example, 0 failures 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-01T08:41:41.000

[Rspec 3]
我最终对散列值（数组）进行了排序，如下所示：

```
hash1.map! {|key, value| [key, value.sort]}.to_h
hash2.map! {|key, value| [key, value.sort]}.to_h
expect(hash1).to match a_hash_including(hash2) 
```

我敢肯定它不会在相当大的阵列上表现出色......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T19:09:41.467

== on Hashes 不关心顺序，{1 => 2, 3=>4} == {3=>4, 1=>2}。但是，它将检查值是否相等，当然 [2,1] 不等于 [1,2]。我不认为 ~= 是递归的：[[1,2],[3,4]] 可能与 [[4,3],[2,1]] 不匹配。如果是这样，您只需编写两项检查，一项针对键，一项针对值。看起来像这样：

```
hash1.keys.should =~ hash2.keys
hash1.values.should =~ hash2.values 
```

但正如我所说，这可能行不通。因此，您可能希望扩展 Hash 类以包含自定义方法，例如：

```
class Hash
  def match_with_array_values?(other)
    return false unless self.length == other.length
    return false unless self.keys - other.keys == []
    return false unless self.values.flatten-other.values.flatten == []
    return true
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T19:33:13.760

如果顺序不重要，您可以使用集合而不是数组：

```
require 'set'
Set.new([1,2]) == Set.new([2,1])
=> true 
```

# linq - Left Outer Join 在 LINQPad 中工作（使用 EF 4.3 连接）但在应用程序中失败

> ID：11366443
> 
> 赞同：2
> 
> 时间：2012-07-06T16:51:19.887
> 
> 标签：linq, entity-framework-4, left-join, linqpad

我有一个应用程序成功地利用 LINQ 执行 LEFT OUTER JOINs 几个实例；但是，在一种情况下，它无法按预期工作。

在 LINQPad 中进行测试（使用 LINQ-to_SQL）产生了正确的结果；但是，为了确保我更改为 LINQPad beta 版本 4.42.05 并使用我的应用程序的 DLL 和其 web.config 文件中的 connectionString 成功连接（根据添加连接对话框）。同样，LINQPad 成功返回了正确的结果，并在 TSQL 中清楚地生成了预期的左外连接，但应用程序中的相同代码失败了。

在调试函数时，我得到“对象引用未设置为对象的实例”。错误。请参阅以下代码和相关 TSQL 后的附加说明。请注意，这种关系涉及拥有一家或多家商店的客户以及拥有零个或多个部门的商店。因此，一些返回的记录不会有部门（因此需要左外连接）。

以下代码在 LINQPad 中完美运行：

```
var model = (from h in SalesOrderHeaders
        join c in Customers on h.CustomerId equals c.CustomerId
        join s in Stores on h.StoreId equals s.StoreId
        join d in Departments on h.DepartmentId equals d.DepartmentId into outer
        from o in outer.DefaultIfEmpty()
        select new 
        {
            OrderId = h.SalesOrderHeaderId,
            OrderDetailId = 1,
            SalesOrderDate = h.SalesOrderDate,
            DeliveryDateTime = h.DeliveryDateTime,
            Customer = c.Customer,
            Store = s.Store,
            Department = (o.Department == null) ? "None" : o.Department,
            FullDescription = "None",
            Qty = 0,
            UoM = "None",
        }).OrderBy (m => m.OrderId); 
```

在应用程序中使用以下代码时，它会失败：

```
var model = from h in headers
        join c in customers on h.CustomerId equals c.CustomerId
        join s in stores on h.StoreId equals s.StoreId
        join d in departments on h.DepartmentId equals d.DepartmentId into outer
        from o in outer.DefaultIfEmpty()
        select new  SalesOrderGridViewModel
        {
            OrderId = h.SalesOrderHeaderId,
            OrderDetailId = 1,
            SalesOrderDate = h.SalesOrderDate,
            DeliveryDateTime = h.DeliveryDateTime,
            Customer = c.Name,
            Store = s.Name,
            Department = (o.Name == null) ? "None" : o.Name,
            FullDescription = "None",
            Qty = 0,
            UoM = "None",
        }; 
```

但是，当我更改应用程序中的代码时，结果的部门字段分配中的布尔值引用 headers 变量 (h.DepartmentId == null) 中的连接元素，如下面的代码所示：

```
var model = from h in headers
        join c in customers on h.CustomerId equals c.CustomerId
        join s in stores on h.StoreId equals s.StoreId
        join d in departments on h.DepartmentId equals d.DepartmentId into outer
        from o in outer.DefaultIfEmpty()
        select new  SalesOrderGridViewModel
        {
            OrderId = h.SalesOrderHeaderId,
            OrderDetailId = 1,
            SalesOrderDate = h.SalesOrderDate,
            DeliveryDateTime = h.DeliveryDateTime,
            Customer = c.Name,
            Store = s.Name,
            Department = (h.DepartmentId == null) ? "None" : o.Name,
            FullDescription = "None",
            Qty = 0,
            UoM = "None",
        }; 
```

返回预期的结果。

有趣的是，最初从原始代码生成的 TSQL 的细微差别：

```
SELECT [t4].[SalesOrderHeaderId] AS [OrderId], [t4].[SalesOrderDate], 
   [t4].[DeliveryDateTime], [t4].[Customer], [t4].[Store], 
   [t4].[value] AS [Department]
FROM (
    SELECT [t0].[SalesOrderHeaderId], [t0].[SalesOrderDate], 
       [t0].[DeliveryDateTime], [t1].[Customer], [t2].[Store], 
        (CASE 
            WHEN [t3].[Department] IS NOT NULL THEN [t3].[Department]
            ELSE CONVERT(NVarChar(50),@p0)
         END) AS [value]
    FROM [SalesOrderHeaders] AS [t0]
    INNER JOIN [Customers] AS [t1] ON [t0].[CustomerId] = [t1].[CustomerId]
    INNER JOIN [Stores] AS [t2] ON [t0].[StoreId] = ([t2].[StoreId])
    LEFT OUTER JOIN [Departments] AS [t3] 
      ON [t0].[DepartmentId] = ([t3].[DepartmentId])) AS [t4]
ORDER BY [t4].[SalesOrderHeaderId] 
```

从修改后的代码来看，布尔值已更改以测试原始标题表中 DepartmentId 的值（[t3].[Department] 与 [t0].[DepartmentId] ），似乎是解决方案：

```
SELECT [t4].[SalesOrderHeaderId] AS [OrderId], [t4].[SalesOrderDate], 
   [t4].[DeliveryDateTime], [t4].[Customer], [t4].[Store], 
   [t4].[value] AS [Department]
FROM (
    SELECT [t0].[SalesOrderHeaderId], [t0].[SalesOrderDate], 
       [t0].[DeliveryDateTime], [t1].[Customer], [t2].[Store], 
        (CASE 
            WHEN [t0].[DepartmentId] IS NOT NULL THEN [t3].[Department]
            ELSE CONVERT(NVarChar(50),@p0)
         END) AS [value]
    FROM [SalesOrderHeaders] AS [t0]
    INNER JOIN [Customers] AS [t1] ON [t0].[CustomerId] = [t1].[CustomerId]
    INNER JOIN [Stores] AS [t2] ON [t0].[StoreId] = ([t2].[StoreId])
    LEFT OUTER JOIN [Departments] AS [t3] 
      ON [t0].[DepartmentId] = ([t3].[DepartmentId])) AS [t4]
ORDER BY [t4].[SalesOrderHeaderId] 
```

虽然我找到了一种方法来完成这项工作；因为它在 LINQPad 中以两种方式工作，并在分散在我的应用程序中的许多其他 LINQ 查询中成功，所以它在这个位置的原始形式失败让我担心。

最终，当我测试左外连接的返回值时，它似乎在应用程序中失败了。然而，这是许多书籍和文章中记录的做法。所以我的最后一个问题是，有没有人知道为什么会发生这种情况和/或它如何在 LINQPad 中工作（使用应用程序 DLL 并针对同一个数据库）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T00:43:35.767

这是一个如何不编写 LINQ 查询的经典示例 -在 SQL 中*思考*，然后[音译为 LINQ](http://www.linqpad.net/WhyLINQBeatsSQL.aspx)。

使用 LINQ，您可以完全避免连接并将查询公式化如下：

```
from h in SalesOrderHeaders
orderby h.OrderId
select new
{
    OrderId = h.SalesOrderHeaderId,
    OrderDetailId = 1,
    SalesOrderDate = h.SalesOrderDate,
    DeliveryDateTime = h.DeliveryDateTime,
    c.Customer.Customer,
    s.Store.Store,
    Department = (h.Department == null) ? "None" : h.Department.Department,
    FullDescription = "None",
    Qty = 0,
    UoM = "None"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:58:28.877

看来 [t0].DepartmentID（来自 SalesOrderHeaders）可以为空。您的 LEFT OUTER JOIN 依赖于这个值。这最终将 [t3].DepartmentID 与 null 进行比较（在某些情况下）。

您可能还需要在 JOIN 中使用 select 中的 CASE 语句。

# floating-point - 截断浮点会产生额外的错误？(AS3)

> ID：11366446
> 
> 赞同：1
> 
> 时间：2012-07-06T16:51:30.267
> 
> 标签：floating-point, truncate, deterministic

我正在尝试构建一个**确定性模拟**，其中浮点数通过以下函数被截断：（我在这里找到它：http: [//joshblog.net/2007/01/30/flash-floating-point-number-错误](http://joshblog.net/2007/01/30/flash-floating-point-number-errors)）

```
return Math.round(10000 * float) / 10000; 
```

我的问题是：我**将它除以 10000 的事实本身不是浮点错误的来源吗？** IE 每次发生除法时，都会产生一个新的浮点数，并可能产生更多不确定的结果。

编辑：这个怎么样？仅使用 2 的幂

```
return Math.round(float* 1024) / 1024; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T21:43:59.023

当您说确定性时，我假设您想要一个**可重现**的模拟，每次运行模拟时都会得到完全相同的结果。

要做到这一点，您需要找到可能变化的来源并消除它。

唯一的方法是编译为特定架构的二进制文件。

浮点运算本身是完全指定的。所有现代处理器都遵循浮点标准 (IEEE-754)，并且没有歧义。

主要有两种变化：

1.  **指令集的差异。**这是最明显的一个。如果您将应用程序编译为 32 位或 64 位，您可能会得到略有不同的结果。32 位应用程序倾向于使用使用 80 位中间值的旧式 x87 指令。这会导致某些结果以不同的方式四舍五入。即使在 x86 上也存在差异，如果您使用 SSE 指令，它可以同时处理多个操作数。一些编译器生成的代码可能取决于操作数在内存中的对齐方式。

2.  **指令顺序的差异。**在数学上，`(a+b)+c`和`a+(b+c)`是等价的（加法是*关联*的）。在浮点计算中，情况并非如此。如果`a`是一、`b`负一和`c`一个很小的数字以便`1+c`四舍五入为`1`，则表达式的计算结果分别为`c`和`0`。编译器决定使用哪些指令。根据您的语言和平台，它可能是语言编译器或即时 IL/字节码编译器。无论哪种方式，编译器都是一个黑匣子，它可能会在我们不知情的情况下改变它编译代码的方式。最小的差异可能导致不同的最终结果。

舍入方法在理论上看起来不错，但它不起作用。无论您如何四舍五入，总有两种不同但等效的指令集产生的结果会以不同的方式四舍五入。

核心原因是四舍五入是不可组合的，从四舍五入到`a`数字，然后四舍五入到`b (< a)`数字不等于`b`从头开始四舍五入。例如：1.49 四舍五入为 1.5，四舍五入为 0 为 2。但四舍五入为 0 则直接为 1。

因此，在基于 x87 的系统上，它使用 80 位“扩展”精度作为中间值，从 64 位有效位开始。您可以将其直接向下舍入到所需的精度。如果你有双精度中间值，你会得到*相同的中间结果，但四舍五入到 53 个有效位*，然后四舍五入到你想要的精度。

您唯一的选择是为特定架构生成机器代码。

现在，如果您的目标只是最小化差异而不是完全消除差异，那么答案很简单：除以或乘以 2 的幂（如 1024）不会在您使用的范围内引入任何额外的舍入误差应用程序，同时乘以和除以 1000 之类的数字。

如果您将累积错误视为随机游走，那么使用 1000 进行舍入比使用 1024 需要更多的步骤。乘法和除法都可能引入额外的错误。因此，平均而言，总误差会更大，因此舍入操作出错的可能性更大。当您对每个操作进行四舍五入时，这甚至是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T14:05:32.763

我的目标是跨平台（C# / AS3 和 32/64 位）实现**更高的**一致性，而我接受 100% 的一致性是不可能的。（由于 AS3 不能进行真正的整数数学运算，因为所有内部运算都是通过浮点数执行的）

到目前为止我收集的内容（感谢 Eric Postpischil 和 Jeffrey Sax）：

```
Math.round(1024 * float) / 1024; 
```

除上述之外，“ **Math.round(1024 * float)** ”操作可能不会在所有平台上产生相同的结果，如果“*错误已累积到量子的一半以上*”，即使“*在单个操作中*”也是可能的.

*   虽然这在数学上是可能的，但它可能非常罕见，因此总体而言，此操作仍将**消除比它产生的更多的不一致性**，因此值得执行它，因为它将减少跨平台的不一致性（尽管无法消除它们）

.

至于**“/ 1024”**部分，因为 1024 是 2 的幂，即*直接位移*，它不会引入额外的错误，而如果我除以 1000 会引入额外错误的可能性很小，因为 1000 无法完美表示。因此，除以 1000 可能会在舍入后引入另一个错误，而除以 1024 则不会。

.

*结论：* **Math.round(1024 * float) / 1024; 优于**Math.round(1000 * float) / 1000; 尽管它们都不是完美的。

这是一个准确的说法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T11:01:47.233

假设 IEEE 754 二进制浮点算法在舍入到最近模式下，除以 10,000 会导致舍入误差等于精确数学结果与可表示为双精度的最接近数之间的差。此误差最多为结果的 1/2 ULP（最低精度单位）。

乘以 2 的幂，舍入为整数，除以 2 的相同幂不会导致舍入操作中的任何错误，除了： 乘以 2 ^(1024)左右的精确结果（精确阈值稍慢）或更大将产生浮点无穷大。（一般而言，当结果下溢浮点范围时，即当精确的数学结果在 (0, 2 ^(-1022) ) 中时，乘以或除以 2 的幂会产生舍入误差。但是，在以下情况下不会发生下溢为 p 计算 round(x*p)/p 的某个正幂 2 小于 2 ^(1023)。）

以这种方式量化数字通常不会产生确定性的结果。当预量化值有错误可能跨越量子之间的中点时，可能会出现两个平台之间的偏差。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-08T13:53:26.297

这里的代码展示了四舍五入到量子的倍数不会产生确定性的结果，即使缩放没有错误。

我得到的输出是：

```
Machine 0 produces 0x1p+0 (1).
Machine 1 produces 0x1.004p+0 (1.0009765625).
The results differ. 
```

源代码是：

```
#include <stdio.h>
#include <math.h>

// Round a value to the nearest multiple of the quantum.
static double Quantize(double x)
{
    static const double Quantum = 1024., InverseQuantum = 1/Quantum;

    return round(x * Quantum) * InverseQuantum;
}

int main(void)
{
    /*  For this example, we are in the middle of some calculation, where we
        have some value a from earlier operations.  a0 and a1 represent the
        calculated values of a on two different platforms.  Observe that the
        difference is as small as possible, just a single ULP.
    */
    double a0 = 0x1.cbd9f42000000p0;
    double a1 = 0x1.cbd9f42000001p0;

    // Define a constant that the calculation uses.
    double b = 0x1.1d2b9fp-1;

    // Calculate the pre-quantization result on each machine.
    double x0 = a0 * b;
    double x1 = a1 * b;

    // Quantize the result on each machine.
    double y0 = Quantize(x0);
    double y1 = Quantize(x1);

    // Display the results.
    printf("Machine 0 produces %a (%.53g).\n", y0, y0);
    printf("Machine 1 produces %a (%.53g).\n", y1, y1);
    printf("The results %s.\n", y0 == y1 ? "are identical" : "differ");

    return 0;
} 
```

# ruby-on-rails - 如何使用 % 运算符使用 Ruby On Rails 验证数字

> ID：11366448
> 
> 赞同：1
> 
> 时间：2012-07-06T16:51:33.677
> 
> 标签：ruby-on-rails, ruby

我想确保进入这个对象的数字可以被 3 整除。如何使用模型上的验证来防止无效输入？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T16:57:26.927

尝试这个：

```
# your_model.rb
validate :only_valid_numbers

private

    def only_valid_numbers
        if (self.number % 3) != 0
            self.errors[:base] << "Number must be divisible by 3!"
        end
    end 
```

请记住，这`0 % 3`将为 0，因此，如果您不想允许，请将 if 语句更改为：

```
if self.number != 0 and ...etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:01:29.443

您可以为此编写自己的简单验证方法，如下所示：

```
validate :divisible_by_three

def divisible_by_three
  unless attribute%3 == 0
    self.errors.add(:attribute, "is not divisible by 3")
  end
end 
```

我不认为任何内置的 rails 方法，所以这可能是最好的解决方案。

汤姆

# asp.net - 长时间运行请求期间的 ASP.NET 会话超时

> ID：11366449
> 
> 赞同：2
> 
> 时间：2012-07-06T16:51:36.260
> 
> 标签：asp.net, http, session-timeout

我有一个应用程序，会话超时为一小时。但是，我希望用户能够上传可能需要更多时间的大文件，因此我将执行超时设置为 1 天（即大于会话超时）。

ASP.NET 是否保证会话在长时间运行的请求期间不会超时？我已经对此进行了测试，它似乎可以正常工作，但是当然有许多可能的环境因素可能会导致它在我的测试环境中工作，但在其他部署方案中却不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:38:01.240

如果您将其设置为 1 天（24 小时），那么会话将持续那么长时间。当您执行以下操作时，会话将重置：

IIS重置

回收应用程序池

小心，如果你这样做，每个人的会话都会很长。如果您的网站使用量很大，您将遇到内存问题。会话存储在它自己的服务器中。此外，您可以选择在“上传页面”上扩展用户会话，并且只有该页面上的用户才会有长时间的会话。上传完成后，您可以结束会话，让它更干净一些。

# eclipse - 自动完成的基本原理

> ID：11366451
> 
> 赞同：2
> 
> 时间：2012-07-06T16:51:46.633
> 
> 标签：eclipse, language-agnostic, code-completion

他们如何在 eclipse 或其他 ide 中执行代码的自动完成？其背后的基本原理是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:16:44.863

您知道如何将源代码显式附加到您在 Eclipse 中导入的非标准库吗？当您这样做时，文本搜索索引会在该源上构建，这样 IDE 就会知道为您提供自动完成功能。粗略地说，我想它是一种关联数组，其中 key 是您键入的方法的前缀，而 value 是该方法的描述。

现在，重要的是要在时间和内存消耗方面有效地实现此功能。为某个方法的每个可能的前缀存储相同的条目是非常低效的。（或者甚至存储每个前缀！）

可能适合此问题的有趣结构之一是 Trie，它本质上针对前缀搜索进行了优化，同时保持可接受的内存使用量。

在这里看一个简单的例子： http: [//www.sarathlakshman.com/2011/03/03/implementing-autocomplete-with-trie-data-structure/](http://www.sarathlakshman.com/2011/03/03/implementing-autocomplete-with-trie-data-structure/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:52:03.363

除了 Tries，用于已经键入方法/var 名称开头的情况，我认为它还对尝试调用方法并且 IDE 建议您的情况使用某种类型比较/分析作为参数传递给该方法调用的局部/全局变量。

# delphi - OmnithreadLibrary 是否支持“工作窃取”？

> ID：11366454
> 
> 赞同：5
> 
> 时间：2012-07-06T16:51:59.253
> 
> 标签：delphi, fork-join, omnithreadlibrary

例如，在 Java 平台上的 Fork / Join 框架中可以使用工作窃取。（请参阅Fork [/join framework 如何比线程池更好？](https://stackoverflow.com/questions/7926864/how-is-the-fork-join-framework-better-than-a-thread-pool)） - OmniThreadLibrary 是否有类似的可能？

* * *

> **工作窃取：**无事可做的工作线程可以从其他仍在忙碌的线程中窃取任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T19:17:07.790

我不知道我是否会将这种技术称为“工作窃取”，但确实 OmniThreadLibrary 在执行 Fork/Join 抽象时让所有核心都处于忙碌状态。

当您使用 Fork/Join 时，您通过调用将任务发送到计算池中`Compute`。当您调用`Value`以获取子计算的结果或`Await`等待子计算完成并且子计算尚未完成其工作时，`Value`/`Await`将从计算池中获取另一个任务并执行它。当这个新任务完成时，它会再次检查子计算是否完成了它的工作，如果没有，它会处理下一个子任务。

[OmniThreadLibrary wiki](http://otl.17slon.com/book/doku.php?id=book%3ahighlevel%3aforkjoin)上进一步描述了这种机制。

* * *

编辑

我不认为 Fork/Join 方法应该被称为“工作窃取”。在 OmniThreadLibrary 实现中，工作项永远不会分配给线程，直到线程开始执行它。一旦线程开始执行它，没有人可以窃取它，因为这样做没有任何目的。

# sencha-touch-2 - Sencha Touch 2 中的垂直按钮组？

> ID：11366457
> 
> 赞同：2
> 
> 时间：2012-07-06T16:52:13.320
> 
> 标签：sencha-touch-2

希望创建一个看起来与 Twitter 自己的按钮组非常相似的垂直按钮组（例如[http://mobile-patterns.com/#/i/10](http://mobile-patterns.com/#/i/10)）

我已经尝试将 Touch 的代码更改为，`layout: 'vbox'`但它完全调整了每个按钮的圆度，并将它们的角圆度保留为它们在水平格式中的样子。

下面的代码：

```
var segmentedButton = new Ext.SegmentedButton({
    allowMultiple: true,
    layout: 'vbox',
    items: [
        {
            text: 'Option 1'
        },
        {
            text   : 'Option 2',
            pressed: true
        },
        {
            text: 'Option 3'
        }
    ]
});
Ext.Viewport.add({ xtype: 'container', padding: 10, items: [segmentedButton] }); 
```

我是否需要添加自己的 CSS 样式才能使其正常工作？还是有内置配置？

我也想知道是否最好使用 a`List`而不是 a `SegmentedButton`...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:51:26.480

蒂姆是对的，我最终用它`container`来按住一组按钮。

通过执行以下操作，我能够达到相同的效果：

## Javascript

```
{
    xtype: 'container',
    cls: 'btn-grouped ui-shadow ui-rd-soft ui-margin',
    items: [
        {
            xtype: 'button',
            docked: 'top',
            cls: 'btn btn-seg',
            text: 'Active relays'
        },
        {
            xtype: 'button',
            docked: 'top',
            cls: 'btn btn-seg',
            text: 'Relay history'
        },
        {
            xtype: 'button',
            docked: 'top',
            cls: 'btn btn-seg',
            text: 'About'
        }
    ]
} 
```

## CSS

```
/**
 *  Buttons
 */
.btn-grouped {}
.btn-grouped .btn {background:#FFFFFF;color:#303030; border-color:#DEDEDE; border-bottom-width: 1px;border-top-width: 0px; text-shadow:none;}
.btn-grouped .btn .x-button-label {background:url(../img/btn-arrow-right.png) 97% 15% no-repeat;}
.btn-grouped .btn-seg {-webkit-border-radius:0px;border-radius:0px;}
.btn-grouped .btn-seg:first-child {-webkit-border-radius: 7px 7px 0px 0px;border-radius: 7px 7px 0px 0px;}
.btn-grouped .btn-seg:last-child {-webkit-border-radius: 0px 0px 7px 7px;border-radius: 0px 0px 7px 7px;}

.btn {
padding: .6em 0;
font-size:110%;
display:block;
font-weight:bold;
}
.btn .x-button-label {text-align:left; padding-left:1em;}

/**
 *  Utilities
 */
.ui-shadow {
-webkit-box-shadow: 0px 0px 3px 1px #858585;
box-shadow: 0px 0px 3px 1px #858585;
}
.ui-rd-soft {
    -webkit-border-radius: 7px;
    -moz-border-radius: 7px;
    border-radius: 7px;
}
.ui-margin {
    margin:17px 0;
} 
```

## 结果

这是最终结果的图像！

![垂直按钮组](../Images/6a6c95daf1d8ddb4f0cdf02f27a6ad65.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:38:44.547

为了轻松创建、自定义和最小化与其他组件的冲突，您应该定义一些东西作为您的按钮容器，例如：

```
{
  xtype: 'container',
  items: [
    {xtype: 'button', text: '1', docked: 'top'},
    {xtype: 'button', text: '2', docked: 'top'},
    {xtype: 'button', text: '3', docked: 'top'},
  ]
} 
```

`docked`配置确保您的按钮不会与容器的最大高度重叠。

最后一件事是将 CSS 属性添加到您的容器和内部按钮中，以“伪造”它，就像一个带有按钮的列表。据我所知，最简单的方法。

注意：您可以删除`docked: 'top'`配置，它仍然可以正常工作。所有这些都取决于您的 CSS。

# assembly - 汇编操作系统输出文本不可靠

> ID：11366459
> 
> 赞同：-1
> 
> 时间：2012-07-06T16:52:34.270
> 
> 标签：assembly, nasm, kernel, qemu

我一直在尝试通过使用 BIOS 中断在 OS/内核实模式环境中输出硬编码文本字符串来增加我对 Intel x86 Nasm 的基本知识。

这是我的代码：

```
top:
[BITS 16]
[ORG 7C00h]
resb 56 ; Just for testing
outStr db "This is a test string!", 10, 0
resb 56

.main:
main:
mov edi, outStr
again:
mov BYTE al, [edi]
mov ah,0Eh
int 10h
inc edi

cmp BYTE [edi], 0
jg again

leaving:
mov ah, 0Eh

mov al,13
int 10h
mov al,10
int 10h

mov al,'Q' ; Using the distinct character Q to show that the code executed to this point
int 10h

complete:
hlt

times (510-($-top)) db 0 ; Pad the executable to act as the boot sector
dw 0xAA55 
```

我实际上已经让它工作了，但只有某些字符串。更改 的内容`outStr`有时会导致代码根本无法执行。起初我以为是长度，但事实证明这不是决定因素；一小部分随机字符，例如“Gfd”，输出很好，但“Gfd 太棒了！” 神秘地不起作用。另一方面，“ABCDEFGH...Z”（全大写字母）确实有效。更奇怪的是，完整的小写字母不起作用。

任何时候它不起作用时，都不会输出末尾的确认字符（“Q”），并且没有观察到其他预期的行为，进一步让我相信这与我的可执行代码无关，但与别的东西。

**重要提示：**我一直在使用 QEMU 进行测试。它似乎是一个非常常用的工具，对我有用（除了上述例外），但我很想看看这是否会对输出产生一些影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:21:48.780

你显然正在执行你的字符串。在开始处跳转到 main，或者在代码之后声明您的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T17:28:38.470

你正在执行你的 resb 和字符串！“jmp”超过他们。

初始化 ds... 或许还有 es... 并在已知（安全！）地址处设置一个有效堆栈。可能 QEMU 正在以可接受的值启动您，但您不应该指望它。假设您仅在 0x7C00 加载并且引导驱动器号在 dl 中。

“hlt”只会暂停 CPU，直到发生中断（定时器中断每 18.2 秒一次），此时您正在执行随机代码。如果要保持 CPU 凉爽，请将“hlt”放入无限循环中......

快乐开机，

坦率

# c++ - 关于如何在 2 个演员之间同步的建议 - 一个从列表中添加/删除，另一个是干净的列表

> ID：11366476
> 
> 赞同：1
> 
> 时间：2012-07-06T16:53:31.493
> 
> 标签：c++, multithreading

我需要设计和 c++ 实现方面的建议（我是一个 java 人，不熟悉 c++）。

我有进程列表。一个线程向列表添加/删除进程，第二个线程在 10 毫秒内运行一次并收集所有已超时的进程（并将它们从列表中删除）。每个进程在添加到列表时都有一个创建时间戳。如果 3 秒过去了，并且该进程仍在列表中（未被第一个线程删除），则清理进程将其从列表中删除。

这必须具有低开销。

所以我有 3 种方法的 processListContainer：添加、删除、清理

需要在 add/removeById 和 clean 之间进行同步。这可以通过巧妙的思考来完成，例如在清理时创建一个新列表，并处理多个列表。

列表大小约为 100K，每秒添加数千

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:40:28.010

您可以将进程列表组织成子列表列表。每个子列表都是进程的集合，这些进程将在相同的 5 毫秒间隔内到期。这将允许您的`cleaner`线程在决定删除陈旧进程时清除整个子列表，而不是遍历单个进程。

该列表最初包含一个空的子列表。

该`clean`操作是一个循环，退出条件是头子列表为空或头子列表不可过期。如果头子列表已过期，它将清除该列表。如果列表有超过 1 个子列表，它会删除生成的空子列表。循环重复。

因此，`add`将检查该进程是否属于最后一个子列表。如果是这样，它将自己添加到该子列表中。如果没有，它会创建一个新的子列表，并将自己添加到其中，并将子列表添加到列表中。

该`remove`元素从子列表中删除提供的元素。如果子列表为空，并且列表中有多个子列表，则删除空子列表。

在这个方案中，`add`应该不需要加锁，因为它只操作尾部，或者一个不可过期的子列表。`clean`并且`remove`两者都需要锁，因为它们都可能操纵列表的头部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:12:04.417

您只需要保留一个列表，并使用互斥锁保护它。此外，我会避免使用“更清洁”的流程，并让流程在完成后将其从列表中删除。

# mysql - 如何在没有 CFadmin 访问权限的情况下远程调试 Coldfusion AJAX 应用程序？

> ID：11366477
> 
> 赞同：2
> 
> 时间：2012-07-06T16:53:34.190
> 
> 标签：mysql, ajax, debugging, coldfusion

我必须从远程访问点调试 Ajax Coldfusion8 应用程序，并且正在努力让任何工作正常工作。

系统在我的本地主机上运行良好，但在生产服务器上，我无处可去，页面加载无处可寻，但所有 Ajax 请求都被遗忘（提交错误）而不会触发 Coldfusion 错误。

我的 AJAX 设置如下：

1）。设置

```
$(document).on( "click", '.su, .cu' , function() {      
     var form = $(this).closest('form'),
         switcher = form.find('input[name="form_sub"]').val(),
         service = "../serve/form_user.cfc",
         method = "process",
         returnformat = "JSON",
         targetUrl = "",
         formdata = form.serialize()+"&method="+method+"&returnformat="+returnformat,
         successHandler = function() {
              alert("hello")
              };
    ajaxFormSubmit( form, service, formdata, targetUrl, successHandler, "no" );
    return false;
    }); 
```

1.  进行 AJAX 调用

    ```
    var ajaxFormSubmit = 
        function ( form, service, formdata, targetUrl, successHandler, dataHandler ){
          $.ajax({  async: false, type: "post", 
                    url: service, data: formdata, dataType: "json",
             success: function( objResponse ){
            if (objResponse.SUCCESS){
              alert("success!");
              successHandler( objResponse )
              }
        })
    } 
    ```

2.  服务器端
    在服务器端，我有一个“主从”cfc 设置。有 type-cfcs （用户，随便），它们是主 form_switch 的扩展，如下所示：

这两个文件都是从 application.cfc 映射的，如下所示：

```
THIS.mappings["/controllers"] = GetDirectoryFromPath( GetCurrentTemplatePath() ) & "controllers";
THIS.mappings["/serve"] = GetDirectoryFromPath( GetCurrentTemplatePath() ) & "services"; 
```

cfc 类型扩展到 form_switch

```
// user cfc
<cfcomponent extends="controllers.form_switch" output="false"> 
...
</cfcomponent> 
```

form_switch 本身会完成所有基本工作，例如验证和调用 type.cfc 中的数据库提交。看起来像这样：

```
<cfcomponent output="false" hint="switchboard for form handling">
...
   // function called by AJAX
   <cffunction name="Process" access="remote" returntype="struct" output="false">

       <cfset var LOCAL = {} />
       <cfset LOCAL.Response = { Success = true, Errors = [], Data = "" } />

       // set form data
       <cfif IsStruct( ARGUMENTS[ 1 ] )>
           <cfset THIS.SetFormData( ARGUMENTS[ 1 ] ) />
       <cfelse>
           <cfset THIS.SetFormData( ARGUMENTS ) />
       </cfif>

       // validate
       <cfset LOCAL.Response.Errors = THIS.Validate() />

       // commit
       <cfif ArrayLen( LOCAL.Response.Errors )>
           <cfset LOCAL.Response.Success = false />
           <cfset LOCAL.Response.Errors = serializeJSON(LOCAL.Response.Errors)>
       <cfelse>
           <cftry>               
           <cfset LOCAL.Response = THIS.Commit() />
           <cfcatch>
                  <cfset LOCAL.Response.Success = false />
                  <cfset LOCAL.Response.Errors = [["server_error","commit error"]] />
           </cfcatch>
           </cftry> 
       </cfif>
      <cfreturn LOCAL.Response />
   </cffunction>
</cfcomponent> 
```

我不知道为什么它不起作用，更糟糕的是我猜是为什么？

ajax 返回“提交错误”，所以我到达 *form_switch* 好了。

问题： **我该如何调试？**
我试过：
转储到屏幕 > 不起作用，因为我正在使用 AJAX。
转储到文件（我有服务器的完整路径，我可以访问服务器，所以我设置了一个 dump.txt 并尝试了

```
 <cfdump output="F:\full\path\to_root\dump.txt" label="catch" var="hello"> 
```

但这给了我一封 505 错误电子邮件

```
 Diagnose: An error occurred when performing a file operation write on file F:\full\path\to_root\dump.txt 
```

我无法使用 CF admin AJAX 调试，因为我无法从远程访问 CFAdmin。

我还可以做些什么？此外，如果有人知道问题可能是什么......也欢迎回答......必须是基本的东西，比如搞砸的映射或在服务器上没有某种用户权限......我假设？

谢谢！

它是 Coldfusion8 和 MySql 5.0.88 .... 生产是 MySQL 5.5，但这是我认为的另一个问题。

**编辑**：
好的。我必须使用 e:\ 和 E:\ 从 application.cfc 写入 dump.txt。但它仍然不能从 form_switch 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:16:15.947

您是否尝试过使用 url 参数直接在浏览器中调用您的 cfc 方法，而不是使用 AJAX 发布的帖子？

使用 cfabort 将 cfdump 粘贴到 catch 中。

像这样调用你的 cfc：http: [//yourdomain.com/serve/forms](http://yourdomain.com/serve/forms) users.cfc?method=process&arg1=qwe&arg2=963

这应该为您提供方法的结果或错误转储

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:11:12.933

确实是基本问题......

```
 E:\ != e:\ 
```

# java - 全屏独占模式和双显示器设置

> ID：11366484
> 
> 赞同：1
> 
> 时间：2012-07-06T16:53:58.607
> 
> 标签：java, swing

首先我应该注意到我的双显示器处于自定义位置，而不是默认的从左到右。

我试图创建一个全屏独占模式游戏，但在测试中我注意到当我使用 EXIT_ON_CLOSE（以及在 System.exit 中）时，显示器设置将重置为默认的从左到右。但是当我使用 DISPOSE_ON_CLOSE （并且只是一个 dispose() ）时，返回我的桌面是完全正常的。这是可以接受的做法，还是我遗漏了什么？

相关部分：

```
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class FullScreenTest extends JFrame {

    public FullScreenTest() {
        GraphicsDevice screen = GraphicsEnvironment.
              getLocalGraphicsEnvironment().getDefaultScreenDevice();
        add(new JLabel("Test"));
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        screen.setFullScreenWindow(this);
    }

    public static void main(String[] args) {
        FullScreenTest test = new FullScreenTest();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:01:26.667

*   看官方教程[Full-Screen Exclusive Mode API](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)

*   [包括示例](http://docs.oracle.com/javase/tutorial/extra/fullscreen/example.html)

*   `GraphicsEnvironment`关于和的教程方法的[几个例子](http://www.java2s.com/Code/JavaAPI/java.awt/GraphicsDevicesetFullScreenWindowWindoww.htm)`GraphicsDevice`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:19:32.913

> 但是当我使用`DISPOSE_ON_CLOSE`（并且只是一个 dispose（））返回我的桌面时会完全正常

那很好。坚持下去。许多开发人员`EXIT_ON_CLOSE`在完全没有必要时使用。

如果`DISPOSE_ON_CLOSE`无法结束 JRE，则意味着其他 GUI 元素仍然可见，或者其他非守护线程正在运行。在这种情况下，通常最好明确结束其他线程，或者检查它们是否可以安全地结束。

# javascript - 动态更改动画时的CSS3平滑过渡

> ID：11366495
> 
> 赞同：3
> 
> 时间：2012-07-06T16:55:07.233
> 
> 标签：javascript, css, css-transitions, html5-animation

我有两个关键帧动画“Bounce-In”和“Bounce-Out”，Bounce-In 动画需要 1.2 秒才能完成，但是如果用户在完成之前触发 Bounce-Out 功能，它将跳转到 100% 的比例并且不会t 从当前动画位置优雅地向外扩展。

关键帧动画可以做到这一点吗？我已经看到它使用转换属性完成，但没有使用 scale()。

```
@-webkit-keyframes Bounce-In 
{
0% { -webkit-transform: scale(0) }
40% { -webkit-transform: scale(1.0) }
60% { -webkit-transform: scale(0.7) }
80% { -webkit-transform: scale(1.0) }
90% { -webkit-transform: scale(0.9) }
100% { -webkit-transform: scale(1.0) }
}

@-webkit-keyframes Bounce-Out 
{
0% { -webkit-transform: scale(1.0) }
40% { -webkit-transform: scale(0.1) }
60% { -webkit-transform: scale(0.4) }
80% { -webkit-transform: scale(0.1) }
90% { -webkit-transform: scale(0.2) }
100% { -webkit-transform: scale(0) }
} 
```

我在 JSFiddle 上有一个演示：http: [//jsfiddle.net/Vn3bM/98/](http://jsfiddle.net/Vn3bM/98/) *如果您在动画完成之前单击“游戏”圆圈，您会注意到其他两个跳转到 100% 然后动画出来（就是这样我正在努力使平滑）。

我什至尝试从 Bounce-Out 中删除 0% 关键帧，但这并没有帮助......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T07:58:53.430

在您的情况下，您在动画中注意到的“跳跃”来自您在 onmouseup 上安装的动画的更改。“Bounce-Out”动画的初始比例为 1（第一个关键帧），这是安装动画时两个圆圈立即设置的值。

有两种解决方案，我可以详细解释一下：

## 简单的方法

您可以通过 'webkitAnimationEnd' 事件等待初始动画结束，然后使用递归函数安装 onmouseup 事件以等待动画完成：

```
var initAnimationEnded = false;
document.getElementById('sports').addEventListener('webkitAnimationEnd', function() {
 initAnimationEnded = true;
}, false);​ 
```

这是 onmouseup 处理程序：

```
document.getElementById('games').onmouseup = function() {
  function bounceOut() {
    if (initAnimationEnded) {
        events.style.webkitAnimationName = "Bounce-Out";
        sports.style.webkitAnimationDelay = "0.2s";
        sports.style.webkitAnimationName = "Bounce-Out";
    } else {
        setTimeout(bounceOut, 20);
    }
  }
  bounceOut();
} 
```

我在这里安装了一个**[jsfiddle，](http://jsfiddle.net/GPMta/)**所以你可以看到它工作。Bounce Out 动画仅在动画完成后触发，这没有什么不寻常的。

## 艰难的道路

您可以暂停动画并解析转换的当前值，然后安装临时关键帧动画以反弹。但是，这变得更加冗长：

首先，您必须停止动画：

```
events.style.webkitAnimationPlayState = "paused";
sports.style.webkitAnimationPlayState = "paused"; 
```

然后，您设置了一个助手来插入新的 css 规则：

```
var addCssRule = function(rule) {
  var style = document.createElement('style');
  style.innerHTML = rule;
  document.head.appendChild(style);
} 
```

然后动态创建 css 关键帧规则并插入它们：

```
 // get the current transform scale of sports and events

    function getCurrentScaleValue(elem) {
      return document.defaultView.
      getComputedStyle(elem, null).
      getPropertyValue('-webkit-transform').
      match(/matrix\(([\d.]+)/)[1];
    }

    var currentSportsScale = getCurrentScaleValue(sports);
    var currentEventsScale = getCurrentScaleValue(events);

     // set up the first string for the keyframes rule

    var sportsTempAnimation = ['@-webkit-keyframes Sports-Temp-Bounce-Out {'];
    var eventsTempAnimation = ['@-webkit-keyframes Events-Temp-Bounce-Out {'];

     // basic bounce out animation

    var bounceOutAnimationBase = {
        '0%': 1,
        '40%': 0.1,
        '60%': 0.4,
        '80%': 0.1,
        '90%': 0.2,
        '100%': 0
    };

     // scale the animation to the current values

    for (prop in bounceOutAnimationBase) {
        sportsTempAnimation.push([
          prop, ' 
          { -webkit-transform: scale(', 
          currentSportsScale * bounceOutAnimationBase[prop], 
          ') } '].join(''));
        eventsTempAnimation.push([
           prop, 
           ' { -webkit-transform: scale(', 
           currentEventsScale * bounceOutAnimationBase[prop], 
           ') } '
         ].join(''));
    }

     // add closing brackets

    sportsTempAnimation.push('}');
    eventsTempAnimation.push('}');

     // add the animations to the rules

    addCssRule([sportsTempAnimation.join(''), 
                eventsTempAnimation.join('')].join(' ')); 
```

然后，您使用以下规则重新启动动画：

```
 events.style.webkitAnimationName = "Events-Temp-Bounce-Out";
    events.style.webkitAnimationDelay = "0s";
    sports.style.webkitAnimationDelay = "0s";
    sports.style.webkitAnimationName = "Sports-Temp-Bounce-Out";
    events.style.webkitAnimationPlayState = "running";
    sports.style.webkitAnimationPlayState = "running"; 
```

等等瞧。我在这里做了一个**[jsfiddle](http://jsfiddle.net/stJFd/)**，所以你可以玩它。

## 更多的糖

*   **在您的示例中，圆圈以交替方式弹跳出弹跳**。通过对所有运动圈动画使用 setTimeout，您可以轻松地将其恢复为使用第二个解决方案。我不想在这里包含它，因为它会使示例代码不必要地复杂化。

*   **我知道所提供的示例并不是真正的 DRY**，例如，您可以使用一半的代码行（具有元属性）使所有事件和运动的东西都工作，但就可读性而言，我认为这个示例很好用。

*   **要让这个示例在所有支持 css3 动画的浏览器中工作**，您需要规范化过渡属性。要在 javascript 中执行此操作，[请查看此处](https://stackoverflow.com/questions/5023514/how-do-i-normalize-css3-transition-functions-across-browsers)示例也适用于动画和其他属性，只需将 'transition' 替换为您想要的属性

*   **为了进一步了解动态修改 css3 动画**，我发现[这篇文章](http://blog.joelambert.co.uk/2011/09/07/accessing-modifying-css3-animations-with-javascript/)非常有用，也可以看看它。

# css - CSS左列和标题固定并居中

> ID：11366496
> 
> 赞同：0
> 
> 时间：2012-07-06T16:55:10.423
> 
> 标签：css

我有一个与能够保持标题和左列固定和居中有关的问题。此类任务的标题 css 工作正常，但我无法将左列固定并居中。如果我将位置属性设置为固定，它会自动保持在左侧并且不居中。

我在这里有我工作的示例代码[http://jsfiddle.net/hvN7Q/3/](http://jsfiddle.net/hvN7Q/3/)

正如您在示例中看到的那样，如果您调整窗口大小，左列会保持在左侧，并且不会居中。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:01:55.583

您可以使用左栏宽度一半的位置`left: 50%;`。`margin-left: -whatever`这将使其保持在中心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:16:45.233

这是关于以下查询的解决方案。链接是：http: [//jsfiddle.net/hvN7Q/4/](http://jsfiddle.net/hvN7Q/4/)

希望，这个帮助！

# objective-c - IOS/Objective-C 我可以将对象存储在本地声明的 NSMutableArray 中。为什么我不能将它们存储在另一个类的对象中的相同类型的数组中？

> ID：11366497
> 
> 赞同：1
> 
> 时间：2012-07-06T16:55:14.350
> 
> 标签：objective-c, ios, object, nsmutablearray, accessor

我发现的最佳相关讨论：[在 Objective-C 中制作对象数组。](https://stackoverflow.com/questions/3646787/makin-an-array-of-objects-in-objective-c). 浏览了我准备这篇文章时出现的链接。

自学模式，创建迷你应用程序来强化和扩展我在书籍教程中获得的想法。………………。

目标：将一些对象（例如类“Trip”）存储在一个可变数组中，包含在另一个对象（例如类“TourCompany”）中。

（两个不同的类接口文件的一部分）

```
 @interface Trip : NSObject
    @property (strong, nonatomic) NSString *travelToLocation; 
```

……</p>

```
 @interface TourCompany : NSObject
        @property (strong, nonatomic) NSMutableArray *trips ; 
```

...... 代码和目标......

1) 证明我创建了 3 个行程对象并且可以访问 travelToLocation ivar ....

```
 Trip *trip0 = [[Trip alloc] init];
        Trip *trip1 = [[Trip alloc] init];
        Trip *trip2 = [[Trip alloc] init];

        [trip0 setTravelToLocation:@"Vienna"];
        [trip1 setTravelToLocation:@"Mt. St. Helens"];
        [trip2 setTravelToLocation:@"Tenochtitlan"];

        NSString *somePlace1 = trip1.travelToLocation;

        NSLog(@" %@ %@, \n \t Let's LOOK at one particular trip ivar %@.", twoBlanks, nuLn, somePlace1);

     //  CONSOLE RESULTS
      //     Let's LOOK at one particular trip ivar Mt. St. Helens. 
```

.... 2) 证明我
i) 可以将这 3 个行程对象存储在本地声明的 NSMutable 数组中 ii) 可以访问 travelToLocation ivar ....

```
 // put trip objects into a LOCALLY DECLARED mutable array
        NSMutableArray *localTripsArray = [NSMutableArray array ];

      //[myArray addObject: someOtherPerson]; - compare to a STackOverflow discussion

        [localTripsArray addObject:trip0];
     [localTripsArray addObject:trip1];
        [localTripsArray addObject:trip2];

        for (Trip *t in localTripsArray) {

            NSLog(@"\n \t ^^^Trip location in LOCAL TRIPS Mutable ARRAY is %@", t.travelToLocation );

     }

    /*
        CONSOLE RESULTS
     objectInMutableArrayMiniAppChallenge[521:f803] 
        ^^^Trip location in LOCAL TRIPS Mutable ARRAY is Vienna
2012-07-05 13:47:17.172 objectInMutableArrayMiniAppChallenge[521:f803] 
        ^^^Trip location in LOCAL TRIPS Mutable ARRAY is Mt. St. Helens
        2012-07-05 13:47:17.172 objectInMutableArrayMiniAppChallenge[521:f803] 
         ^^^Trip location in LOCAL TRIPS Mutable ARRAY is Tenochtitlan

        */ 
```

.... 3) 但我不知道为什么我不将这 3 个对象存储在我的 TourCompany 类 ('friendlySkiesTourCo') 的实例中的 NSMutable 数组 ('trips') ... // 现在在我的实例中实例化一个对象旅游公司类

```
 TourCompany *friendlySkiesTourCo = [[TourCompany alloc] init];

 // put those same objects into the trips ivar in that object
 //[myArray addObject: someOtherPerson]; 
    //     - compare to a STackOverflow discussion
    //only difference I see is that instead of locally declared 'myArray'
    //   I'm using an ivar that's a member of an object
 // I know there's are values in those objects, because I displayed them above

 [friendlySkiesTourCo.trips addObject:trip0];
    [friendlySkiesTourCo.trips addObject:trip1];
    [friendlySkiesTourCo.trips addObject:trip2];

    for (Trip *t in friendlySkiesTourCo.trips) { 
```

NSLog(@"\n \t +++ TourCompany 类对象 'friendlySkiesTourCo' 对象中的 'trips' 可变数组中的行程位置是 %@", t.travelToLocation );

```
 }

    /* Console NON-Results

    I never get any output from this NSLog directive
     I'll bet there is something pretty basic I don't understand
     No doubt, it's in the Gol Durned Manual online , but I'm not seeing it
     */ 
```

.... 4\. 让我们仔细检查一下问题是否可能是设置类型问题 ....
// 我认为我并没有正确地将对象放入友好天空对象中的这个特定可变数组中 // 让我们只是检查

```
 int howManyTripsInMutableArray = [friendlySkiesTourCo.trips count];

 NSLog(@"\n \tThere are %d trips for the friendlySkiesTour Co ", howManyTripsInMutableArray);

        /*

     Sure enough...

     2012-07-05 13:53:53.235 objectInMutableArrayMiniAppChallenge[555:f803] 
    There are 0 trips for the friendlySkiesTour Co 

    */ 
```

感谢您提供任何线索。我希望我简洁地完成了这篇文章，并且您不会认为我只是没有 RTGDM（如果您想知道的话，那是'gol durn'），因为我确实尝试过。

月桂树

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:02:44.240

我敢打赌你没有初始化`friendlySkiesTourCo.trips`。IE

```
friendlySkiesTourCo.trips = [[NSMutableArray alloc] init]; 
```

**编辑**

正如@Chuck 在下面的评论中指出的那样，这种分配实际上应该在类的初始化方法中完成：

```
@implementation TourCompany

-(id) init
{
    self = [super init];

    self.trips = [[NSMutableArray alloc] init];

    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:02:20.287

这有帮助吗？

```
trips =  [NSMutableArray arrayWithCapacity:3];
trip *trip1 = [[trip alloc] init];
trip *trip2 = [[trip alloc] init];
trip *trip3 = [[trip alloc] init];

trip1.traveltolocation = @"vienna";

[trips addObject:trip1];
[trips addObject:trip2];
[trips addObject:trip3]; 
```

# javascript - jQuery AJAX 跨模块通信（模块模式）

> ID：11366498
> 
> 赞同：0
> 
> 时间：2012-07-06T16:55:15.907
> 
> 标签：javascript, ajax, jquery, module-pattern

我最近重构了我的 javascript/jquery 应用程序代码以使用模块模式。

我有两个模块，比如说 A 和 B。

模块 B 包含一个公共方法（例如，Bmethod），它进行 jQuery AJAX JSONP 调用（$.ajax）并在回调中传递响应。

在模块 A 中有一个对 B.Bmethod() 的调用，其中包含一个回调函数来处理返回的响应。

这是模块B的定义：

```
var B = (function()
{
  var obj = {};
  obj.Bmethod = function(data, callback)
                {
                  //do JSONP AJAX call
                  callback(response);
                }
  return obj;
}()); 
```

现在，这是模块 A 的定义以及模块 B 上的方法调用

```
var A = (function()
{
  var doAjax = function(data)
  {
    B.Bmethod(data, function(response)
    {
       //Do something with the response
    });
  }    
}()); 
```

这是我加载模块 A 并开始执行代码的方式：

```
$(document).ready(function()
{
   A.doAjax(data);   
}); 
```

这里的问题是，我在 Chrome 和 Firefox 上有不同的行为。在 Chrome 上，根本没有执行 AJAX 调用。没有发送请求。但是，在 Firefox 上，我可以看到发出的请求并得到响应，但我没有收到成功回调。

如果我将所有这些代码放在模块之外，只放在一个文件中，一切似乎都可以正常工作。

我已经看到很多人（也在 StackOverflow 上）成功使用模块模式和 AJAX 调用，但无法弄清楚我做错了什么。

有什么想法/解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:40:30.103

Fixed the problem.

I was actually having a duplicate copy of the same AJAX request($.ajax) in a different file. So, when the request was being made, I am assuming the duplicate was (also)being called, and maybe this was causing inconsistency issues. However, on Chrome, setting a breakpoint showed no signs of the duplicate being called.

For now, I removed the duplicate request and it works fine. But, I still don't understand why there was an inconsistent behavior between Chrome and Firefox.

# html - 忽略用 y 关闭 x 的尝试

> ID：11366502
> 
> 赞同：0
> 
> 时间：2012-07-06T16:55:37.270
> 
> 标签：html, ruby-on-rails, ruby, testing

Ruby on Rails 有时会给您带来令人讨厌的“忽略用 y 关闭 x 的尝试”[警告，这些警告来自 assert_select](https://stackoverflow.com/questions/1671221/rails-assert-selects-annoying-warnings)。这些警告通常是无效 HTML 的结果，但有时即使 HTML 有效，它们也会出现。我的错误在运行时看起来像这样`ruby test/functional/my_controller_test.rb`：

```
..ignoring attempt to close div with h2
  opened at byte 8551, line 207
  closed at byte 9554, line 243
  attributes at open: {"class"=>"my_css_class", "id"=>"object_1"}
  text around open: "  \r\n  \r\n  \r\n  \r\n\r\n  <div class=\"my_css_class"
  text around close: "</a>\r\n      </h2>\r\n\r\n      <span" 
```

但是没有尝试关闭带有 h2 标签的 div。我尝试了一个 HTML 验证器，但没有成功。[Giles 提到的 -W0 参数似乎有帮助](http://gilesbowkett.blogspot.de/2009/10/ignoring-attempt-to-close-foo-with-bar.html)-`ruby -W0 test/functional/my_controller_test.rb`不再发出警告，但这不适用于`rake test:whatever`. -W0 有什么作用，如何避免使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T01:18:02.990

在测试助手中：

```
class ActionController::TestCase  
  include Devise::TestHelpers
  Paperclip.options[:log] = false
  Mocha::Deprecation.mode = :disabled

  #
  # kill verbsity
  #
  verbosity = $-v
  $-v = nil

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T08:38:50.317

[Ruby 单元测试](http://scottpatten.ca/2007/10/ruby-unit-test-command-line-options.html)有多种命令行选项。-W 不属于它们，它是纯 Ruby 的命令行选项。如前所述`ruby --help`，ruby`-W[level]`命令行选项设置 Ruby 的警告级别；0=静音，1=中等，2=详细（默认）。`ruby -W0`将警告级别设置为静音。

```
$ ruby --help
  [...]
  -w              turn warnings on for your script
  -W[level]       set warning level; 0=silence, 1=medium, 2=verbose (default) 
```

-W 标志还激活 Ruby 的“详细”模式。Mislav[对详细模式](http://mislav.uniqpath.com/2011/06/ruby-verbose-mode/)有很好的解释。在 Ruby 代码中，可以使用 $VERBOSE 全局变量的值设置和测试详细程度，该变量可以有 3 种状态：nil ("0")、false ("1") 和 true ("2")。因此，您可以通过设置来抑制 Test::Unit 测试的警告

```
$VERBOSE = nil 
```

在你的`test_helper.rb`. 对于运行 RSpecs 测试，您可以[类似地抑制 ruby​​ 警告](https://stackoverflow.com/questions/5591509/suppress-ruby-warnings-when-running-specs)。

# javascript - 如何在具有溢出的元素上禁用鼠标拖动滚动：滚动

> ID：11366504
> 
> 赞同：0
> 
> 时间：2012-07-06T16:55:47.893
> 
> 标签：javascript, html, css, scroll

我有一个包含图表的容器，我想让用户单击并拖动以平移图表。它工作正常，直到用户将鼠标拖到容器外，然后图表以错误的方向快速滚动。这似乎是由默认滚动行为引起的，例如，如果您单击并拖动带有滚动条的任何其他元素并将鼠标拖出它，它将开始滚动。

有没有办法禁用此行为或一些可以使其工作的解决方法？

我只需要它在 chrome 中工作（至少现在）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:17:07.373

看看[这个网站](http://hitconsultants.com/dragscroll_scrollsync/scrollpane.html)。他们正在使用一个 jQuery 插件 dragscrollable，您可以从该页面上的视图源中查找或获取它。

# javascript - 永久删除 html 内容以减少浏览器负载

> ID：11366505
> 
> 赞同：0
> 
> 时间：2012-07-06T16:55:57.053
> 
> 标签：javascript, ajax

我使用**.hide**通过向左滑动来隐藏 html 内容。

但我对隐藏的内容有疑问！我可以在使用**.hide函数时删除那些****.empty**函数之类的 html 内容吗，因为我听说**.empty**函数会永久（永久）删除 html 内容，所以浏览器不会尝试崩溃或卡住，我听说**.hide**函数只是隐藏了 html 内容如果我通过 AJAX 加载其他内容，则有可能导致浏览器崩溃或卡住浏览器。

有什么解决办法吗？我可以在使用 .hide 函数时像 .empty 函数**一样****永久**删除那些 html 内容吗？

 **```
$(".more").click(function () {
      $('#ss').hide("slide", { direction: "left" }, 10000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:05:13.897

尝试使用 .remove() 方法并将其分配给如下变量：

var $element = $('#ss').remove();

.remove() 方法返回被删除的元素，因此当您将其分配给变量时，您可以轻松地稍后将其添加回来。**

# bash - 将所有标准错误记录到文件和控制台

> ID：11366510
> 
> 赞同：2
> 
> 时间：2012-07-06T16:56:14.193
> 
> 标签：bash

这里有很多线程讨论如何为脚本或 cmdline 执行此操作（主要涉及管道、重定向、三通）。我没有找到一种解决方案，它可以设置一次，然后在全局范围内工作，无需操作单个脚本或向每个命令行添加一些内容。

我想要实现的是类似于 [如何在使用“tee”和管道时将标准错误写入文件的最佳答案中所述的内容？](https://stackoverflow.com/questions/692000/how-do-i-write-stderr-to-a-file-while-using-tee-with-a-pipe)

是否可以配置 bash 会话，以便将所有 stderr 输出记录到文件中，同时仍将其写入控制台？我可以添加到 .bashrc 并因此在我每次登录时自动设置的东西？

软件：Bash 4.2.24(1)-release (x86_64-pc-linux-gnu)、xterm、Ubuntu 12.04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:01:15.680

在@0xC0000022L 以前的解决方案上尝试这个变体（把它放在你的`.bash_profile`）：

```
exec 2> >( tee log.file > /dev/tty ) 
```

几个警告：

1.  提示和您在命令行键入的任何内容都会打印到 stderr，因此将记录在您的文件中。

2.  终止未显示在终端中的命令的换行符可能存在问题；我在我的 Linux 主机上观察到它，但在我的 Mac OS X 笔记本电脑上没有。也许其他人可以解释和/或解决问题。例如，如果我输入“echo stdout”，我会看到以下内容：

    ```
    $ echo stdoutstdout
    $ 
    ```

# mod-rewrite - 将 /sub 重定向到端口的 apache2 重写规则是什么？

> ID：11366512
> 
> 赞同：0
> 
> 时间：2012-07-06T16:56:20.447
> 
> 标签：mod-rewrite, configuration, url-rewriting, apache2

我在同一台服务器上安装了 2 个 Web 应用程序，并希望为两者使用相同的域。

我已经有一个 apache2 在端口 80 上运行，两个应用程序分别在端口 8081 和 8082 上运行。

我在配置重写规则以完成以下操作时遇到问题：

当用户转到 ://domain/aaa 时，我想（默默地）重写为 ://localhost:8082/aaa，当用户转到 ://domain/sub/aaa 时，我想重写为：/ /本地主机：8083/aaa

我怎样才能做到这一点？（当然，用户不应该知道重定向，例如，浏览器中的 url 应该保持不变）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:13:52.573

你需要的不仅仅是 mod_rewrite 来做到这一点。一种方法是使用 mod_proxy 为两个虚拟主机（每个应用一个）设置反向代理，其中包括：

```
ProxyPreserveHost Off
ProxyPass / http://domain:8082/app/
ProxyPassReverse / http://domain:8083/app/ 
```

# javascript - 检测 jQuery 旋钮值

> ID：11366513
> 
> 赞同：2
> 
> 时间：2012-07-06T16:56:25.273
> 
> 标签：javascript, jquery

大家好，我花了几个小时试图解决这个小问题，我想使用这个[jQuery 旋钮](http://anthonyterrien.com/knob/)在每个点触发不同的 jQuery 动画。我似乎无法检测到价值？

```
<script>
    $(document).ready(function(){
        $('.knob').bind('change', function(){
            var newvalue = $(this).val();
            if (newvalue == 50) {
                alert("newvalue is 50!");
            }; 
        });
    });
</script>

<input class="knob" data-width="530" data-min="0" data-max="67" data-angleOffset="0" data-thickness=".1" data-displayPrevious="true"> 
```

我怎么能这样做？希望你能帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:06:15.860

```
$(".knob").knob({
    change: function (value) {
        console.log("changed to: " + value);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T21:44:38.633

有点晚了，但遇到了同样的问题，我最终得到了这个：

```
$('.dial').trigger('configure', {
    'change': function (v) {
        console.log('new value' + v);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:06:58.187

[查看此处](https://github.com/aterrien/jQuery-Knob/blob/master/index.html)的示例，它将值作为第一个参数传递。

```
$('.knob').bind('change', function(val){ console.log(val); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T14:03:22.117

您可以通过以下方式控制标签的字体大小：-

```
$(".knob").css('font-size','15px');
you can set the font size of your own choice like 20px,30px,etc.

if you are getting the chart build dynamically then here is the javascript/jquery code for you

********javascript**************
var a = document.getElementsByClassName("knob");
for (var i = 0; i
if (a[i].value > 400) a[i].style.fontSize = "15px";
}
again here you can set the font - size of your choice.

* * * * * * * jquery * * * * * * * * * * * * * * * * * * * * *
var a = $('.knob');
a.each(function () {
    if (this.value > 99999) this.style.fontSize = "15px";
    if (this.value > 9999 && this.value <= 99999) this.style.fontSize = "17px";
    else if (this.value > 999 && this.value <= 9999) this.style.fontSize = "20px";
});

apply as many conditions as you want and change the font size. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-26T20:42:17.717

用这个：

```
 $('.dial').knob({
                change: function (value) {
                    this.$.attr('value',Math.round(value))
                },
                release : function (value) {
                    this.$.attr('value',Math.round(value))
                }
            }) 
```

现在您可以随时获取 $input.val 来获取值。Smart 不是吗？

# multithreading - GTK+ Toggle动作

> ID：11366514
> 
> 赞同：1
> 
> 时间：2012-07-06T16:56:35.050
> 
> 标签：multithreading, gtk, gtkmm

我正在为我正在从事的项目开发一个带有 gtkmm/C++ 的 UI。我对 GTK 完全陌生。对于这个程序，我需要多线程，为此我使用 Glib::Threads 对象。第二个线程将被打开和关闭，以便用户可以控制程序的执行；自然地，Gtk::ToggleAction 这个名字让我很好奇，但我一直没能弄清楚这到底是*做*什么的。是否可以从处理我的线程的 ToggleAction 派生一个类？

谢谢！克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:47:33.713

Gtk::ToggleAction 是用于“基于动作的菜单和工具栏”的类集的一部分：http: [//developer.gnome.org/gtk3/stable/Actions.html](http://developer.gnome.org/gtk3/stable/Actions.html)

特别是， GtkToggleAction 表示具有开/关切换状态的动作。这更多是关于抽象“动作”的概念，可以同时由任意数量的 UI 元素（菜单检查项、切换按钮等）可视化。您当然可以使用由更改 Gtk::ToggleAction 触发的事件来决定暂停/取消暂停线程，方法是子类化 Gtk::ToggleAction 或使用引用 Gtk::ToggleAction 实例的新类组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-09T14:24:53.637

与所有其他 UI 系统一样，GTK 对其非阻塞 UI 使用事件驱动架构。执行此操作的标准方法是拥有一个用于事件处理的主线程和一个用于绘制的第二个线程。像“另存为”对话框这样的大多数窗口都以不同的方式处理，因此您无需为此使用线程。如果您正在开发新应用程序，请考虑使用 GTK3 接口。GtkAction 已被弃用。请改用 GAction 和 GMenu 界面。

[https://developer.gnome.org/gio/stable/GAction.html#GAction-struct](https://developer.gnome.org/gio/stable/GAction.html#GAction-struct)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T22:37:19.717

或者，您可以在 Advanced Gtk+ Sequencer 的 gobject 中使用我的线程实现：

*   [http://ags.sf.net](http://ags.sf.net)
*   [http://ags.sourceforge.net/api/ags/ags-AgsThread.html](http://ags.sourceforge.net/api/ags/ags-AgsThread.html)

此实现提供挂起和恢复线程。当然，您可以扩展 GtkToggleButton 对象。

这可能是最重要的功能

```
g_type_class_peek_parent(klass); 
```

# windows - 在 Cygwin 中查看 windows 环境变量

> ID：11366519
> 
> 赞同：14
> 
> 时间：2012-07-06T16:56:42.213
> 
> 标签：windows, cygwin, environment-variables

有没有办法将 windows 环境变量与 Cygwin 同步？

例如，在 CMD 中`echo %inetroot%`给出了项目构建的路径。是否可以将此环境变量传输到 Cygwin 以`echo $inetroot`提供相同的路径？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T16:58:31.620

使用该`env`程序以使 ... 或`echo "$inetroot"`. 不过，我认为变量名是**区分大小写的**（在 Bash 和 MinGW 中）。

这些变量在 Windows 的 MinGW 中都可用（用户配置文件和全局）。同样，用于`env`列出它们或例如`env|grep -i inetroot`查找变量名称的正确大写版本。

# objective-c - 在我的游戏中使用 SneakyInput 的奇怪错误

> ID：11366520
> 
> 赞同：0
> 
> 时间：2012-07-06T16:56:46.740
> 
> 标签：objective-c, cocos2d-iphone

我在[http://www.cocos2dbook.com](http://www.cocos2dbook.com)上关注这本书，目前，我正在制作一个操纵杆。虽然当我运行我的游戏时，我在编译时收到了这个错误：

```
Undefined symbols for architecture armv7:
"_OBJC_CLASS_$_SneakyJoystick", referenced from:
  objc-class-ref in GameplayLayer.o
"_OBJC_CLASS_$_SneakyJoystickSkinnedBase", referenced from:
  objc-class-ref in GameplayLayer.o
ld: symbol(s) not found for architecture armv7
collect2: ld returned 1 exit status 
```

这是我的头文件：

```
// foundation
#import <Foundation/Foundation.h>

// cocos2D and GameCenter
#import "cocos2d.h"
#import <GameKit/GameKit.h>

// Joystick and buttons
#import "SneakyJoystick.h"
#import "SneakyButton.h"

#import "SneakyJoystickSkinnedBase.h"
#import "SneakyButtonSkinnedBase.h"

// sound fx
#import "SimpleAudioEngine.h"

#import "Helpers.h"
#import "GameScene.h"

@interface GameplayLayer : CCLayer {

    // initial player sprite
    CCSprite *player;

    // player health
    int playerStartHealth;

    // joystick
    SneakyJoystick *leftJoystick;

}

@end 
```

还有我的`.m`文件（只有操纵杆方法）：

```
- (void) initJoystickAndButtons {
    CGSize screen = [CCDirector sharedDirector].winSize;       
    CGRect joystickBaseDimensions = 
    CGRectMake(0, 0, 128.0f, 128.0f);                      
    CGPoint joystickBasePosition;                                  

    joystickBasePosition = ccp(screen.width*0.0625f,
                           screen.height*0.052f);

    SneakyJoystickSkinnedBase *joystickBase =
    [[[SneakyJoystickSkinnedBase alloc] init] autorelease];        
    joystickBase.position = joystickBasePosition;                  
    joystickBase.backgroundSprite = 
        [CCSprite spriteWithFile:@"dpadDown.png"];
    joystickBase.thumbSprite = 
        [CCSprite spriteWithFile:@"joystickDown.png"];                 // 8
    joystickBase.joystick = [[SneakyJoystick alloc]
                     initWithRect:joystickBaseDimensions]; // 9
    leftJoystick = [joystickBase.joystick retain];                // 10
    [self addChild:joystickBase];
}

- (void) applyJoystick:(SneakyJoystick *)aJoystick toNode:(CCNode *)tempNode forTimeDelta (float)deltaTime {
    CGPoint scaledVelocity = ccpMult(aJoystick.velocity, 1024.0f); // 1

    CGPoint newPosition = 
    ccp(tempNode.position.x + scaledVelocity.x * deltaTime, 
        tempNode.position.y + scaledVelocity.y * deltaTime);       // 2

    [tempNode setPosition:newPosition];                            // 3
}

#pragma mark -
#pragma mark Update Method
- (void) update:(ccTime)deltaTime {
    [self applyJoystick:leftJoystick toNode:player forTimeDelta:deltaTime];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:18:27.653

这些是链接错误而不是代码错误。您需要包含定义缺失符号的文件（作为代码或库）：SneakyJoystick 和 SneakyJoystickSkinnedBase。

（我对这些特性并不特别熟悉，所以我不确定它们是以代码形式还是作为 .a 文件提供的。）

# php - 基本数学的 PHP 浮点错误

> ID：11366522
> 
> 赞同：6
> 
> 时间：2012-07-06T16:57:05.180
> 
> 标签：php, math

> **可能重复：**
> [为什么十进制数不能用二进制精确表示？](https://stackoverflow.com/questions/1089018/why-cant-decimal-numbers-be-represented-exactly-in-binary)
> [浮动值的问题](https://stackoverflow.com/questions/6503994/problem-with-floating-values)

```
$var1 = 1;

for ( $i=0; $i<30; $i++ ) {
  $var1 += 0.1;
  $var2 = floor($var1);
  $var3 = $var1-$var2;
  if ( $var3 == 0.5 ) {
    $var1 = $var2+1;
  }
} 
```

这个循环的目的是计数1.0、1.1、1.2、1.3、1.4，然后跳转到2.0、2.1、2.2等

我遇到的问题是该`if`陈述永远不会正确。此外，每十分之一的计算都会得出一些疯狂的科学答案。

我该如何解决？请帮忙！

编辑：我有点沮丧地匆忙写了这个问题，而且不止一个，我现在明白了。

问题的第一部分确实是“我怎样才能绕过这个浮点怪癖来完成这项工作”和“为什么会发生这种怪癖！”

感谢您的所有出色回复，我将答案投票为正确，这很容易回答了“如何使这项工作”这一核心问题。

使用 0.49 代替 0.5 和 > 代替 == 就可以了。粗糙而不是世界上最好的代码，但它确实解决了最初的问题。感谢大家的其他回复，我将阅读并跟进以改进我的编码。

再次，非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:03:53.920

计算机无法准确表示浮点数，因为它们以二进制（以 2 为基数）存储。所有花车都会有一点点调整 +/-。

见这里：[http ://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T17:12:12.793

这给出了预期的结果：

```
$var1 = 1;
for ( $i=0; $i<30; $i++ ) {
    $var1 += 0.1;
    $var2 = (int)($var1);
    $var3 = $var1-$var2;
    if ( $var3 >= 0.45 ) {
        $var1 = $var2+1;
    }
    echo $var1.' '.$var2.' '.$var3.'<br/>';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T17:15:31.887

二进制浮点将选择近似值来表示它无法表示的以 10 为底的浮点数。因此，将浮点数与浮点数进行比较是不准确的（因为您无法确定其行为）。

您需要发明自己的以 10 为底的浮点数。如果您知道自己想要哪种精确度，发明起来并不难。在您的情况下，您只需要一位精确的数字。我们的以 10 为底的整数的公式是： value / 10 到我们精确数字的幂，即 1，因此您的公式是 = **value / 10**。

执行算术运算与执行普通算术一样容易。只需将普通表示（指计算机使用的表示）转换为我们发明的表示。在你的情况下，`$var1 += 0.1`会转向`$var1 += 1`.

输出就像将您的表示转换为正常表示一样简单。在你的情况下，`echo $var1 . '<br>';`会转向`echo $var1 / 10 . '<br>';`

```
$var1 = 10;

for ( $i=0; $i<30; $i++ ) {
  echo $var1 / 10 . '<br>';
  $var1 += 1;
  if ($var1 % 10 == 5) {
    $var1 = $var1+5;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-06T17:27:12.247

很多关于为什么会发生这种情况的好信息以及一些解决方案。PHP 的基本设计目标之一是其松散类型设计和隐式转换。本着这种精神，我认为解决这个问题的最简单的方法之一就是使用字符串比较。在您的情况下，这是一个很好的解决方案：

```
<?php
$var1 = 1;

for ( $i=0; $i<30; $i++ ) {
  $var1 += 0.1;
  $var2 = floor($var1);
  $var3 = $var1 - $var2;
  echo "$var1 | $var2 | $var3 \n";
  if (number_format($var3, 1) == '0.5') {
    echo "It's true\n";
    $var1 = $var2 + 1;
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T17:19:16.743

一个合适的解决方案是使用[bcmath](http://php.net/bcmath)包：

```
$var1 = '1.0'; bcscale(1);

for ( $i = 0; $i < 30; $i++) {
    $var2 = $var1;
    for( $j = 0; $j < 5; $j++) {
        echo $var2 . "\n"; 
        $var2 = bcadd( $var2, '0.1');
    }
    $var1 = bcadd( $var1, '1');
} 
```

这将[输出正确的结果](http://viper-7.com/h3Y5Ik)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T17:05:09.977

通常，由于浮点运算，if 语句可能永远不会执行 - 用浮点值测试严格相等总是会带来这种风险。为什么不更改条件以检查变量是否位于以 0.5 为中心的小区间内，以确保您抓住它？？？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-06T17:08:45.067

保持简单、愚蠢并使用整数运算。

例如，您从 1.1 开始

为什么不：

```
for ( $i=1; $i<4; $i++ ) {
  for ( $j=0; $j<5; $j++ ) {
    $v = $i + ($j/10);
    # ...
  }
} 
```

# ios - 审查您的企业应用程序到苹果。是必需的吗？

> ID：11366523
> 
> 赞同：10
> 
> 时间：2012-07-06T16:57:10.233
> 
> 标签：ios, iphone, ios5, app-store

我开发了一个企业应用程序，并准备好供我的客户使用。

我的公司购买了一个帐户并向我提供了凭据。因此，我创建了临时分发配置文件，以便在使用 testflight 进行开发期间将应用程序分发给我客户的测试团队。

但是当我在某处读到时，该帐户类型`iOS developer program`无法将应用程序分发给任何人，

如果您想分发您的应用程序，您需要注册`iOS developer [enterprise] program`帐户。但这不是我的情况，我能够使用 iOS 开发人员计划帐户将我的应用程序分发给客户端。

我知道，如果你想将你的应用提交到应用商店，你需要有一个**iOS 开发者计划**，并且，

**iOS Developer Enterprise Program**仅允许您通过 Ad Hoc 分发将您的应用程序分发给您组织的员工或成员。

现在我`doubt`的是，

> 是否真的必须将我们的应用程序提交给苹果进行审查，以确保我们的应用程序没有明确的内容，或者我们可以在没有审查的情况下使用它？**当我们不提交到应用商店时，为什么我们需要苹果的批准**。客户告诉他们只是想获得批准，然后他们可以在内部或 B2B 使用中出售它。

因为我的客户要求我将我们的应用提交给苹果进行**审核**，但不想放在应用商店。一旦他们批准，他们将使用临时分发配置文件进行分发。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T20:34:47.913

您无需将企业应用提交到应用商店进行审核。

您的客户的要求很奇怪。这没有意义。您可以告诉您的客户，Apple 不会审查企业应用程序。

更新：您的疑问：

> 是否真的必须将我们的应用程序提交给苹果进行审查，以确保我们的应用程序没有明确的内容，或者我们可以在没有审查的情况下使用它？

答案：没有。它不是强制性的

> 当我们不提交到应用商店时，为什么我们需要苹果的批准。

答：不需要批准。

现在，您的客户的请求肯定会失败：假设（为了解释）这个应用程序是一个色情视频查看器应用程序，它永远不会被 Apple App Store 审查员批准。如果企业构建部署取决于 AppStore 的批准，那么即使这样也不会发生（因为客户很固执）

注意：企业帐户并非旨在规避 Apple 的付费墙。即，您不应该在您的组织之外分发该应用程序。

希望这能回答你的问题。（如果不能随意在原始帖子中添加更具体的问题。）

第三次更新：FYI Enterprise Developer 帐户不容易获得。如果 Apple 开发者中心认为您的客户是阴暗的，他们可能不得不使用常规开发者帐户进行管理。您提出的问题没有可靠的答案来源，因为没有人会坚持做这样的事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-11T07:11:54.387

> 是否真的必须将我们的应用程序提交给苹果进行审查，以确保我们的应用程序没有明确的内容，或者我们可以在没有审查的情况下使用它？当我们不提交到应用商店时，为什么我们需要苹果的批准。客户告诉他们只是想获得批准，然后他们可以在内部或 B2B 使用中出售它。

您不需要批准，一旦您注册了企业计划，您将无需获得 Apple 的批准来创建任何作为企业应用程序创建的应用程序。

但是，如果您想在正常的应用市场上出售它，则需要从一个完全独立的帐户完成，并且需要获得批准。

企业许可证是一种确保流氓应用程序不会开始流行的方法，因为它们不需要通过 iTunes 安装，它们可以托管在网站上并直接从那里下载到设备。

我假设您的客户*可能*担心您不会提供稳定的、无恶意软件的应用程序，并希望苹果首先对其进行授权和测试，即使它没有进入应用商店，所以他们放心如果它对苹果来说足够好，对他们来说就足够了。或者 MD 曾经听说 Apple 必须授权它，而他们只是为他们跳过篮球。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-06T20:28:38.957

注册了 iOS 开发者企业计划（目前为 299 美元/年）的公司不需要将应用程序提交给 Apple 以供批准或分发。这些公司可以托管和无线分发他们的内部应用程序，而无需 Apple 充当看门人。

如果您是受雇为应用程序编写代码的外部承包商，您可能需要将应用程序移交给他们，以便他们使用企业密钥进行签名，以便他们可以在内部分发。

企业计划成员将他们的应用程序提交给 Apple 审查是（非常）不寻常的，因为这是不必要的。据我所知，如果不在 iTunes Connect 中设置所有应用程序详细信息并假装您要出售该应用程序，则无法执行此操作。

```
Update 1: 
```

@Praveen-K：有什么疑问？如果您想让 Apple “测试和批准”您的企业应用程序（一个非常糟糕的主意），那么您需要：

1.  创建一个虚假的 Apple Store 应用程序
2.  在 iTunes Connect 中填写虚假信息
3.  提供未来很长的销售日期
4.  提供真实应用程序所需的所有登录信息和对服务器的访问权限
5.  协助 Apple 应用审批者访问您自己的数据以获得批准
6.  然后，在获得批准后，从 iTunes Connect 和 App Store 中删除该应用程序

如果这不能回答您的问题，那么您可能需要确保您的问题非常清楚。

# php - 在日志文件中查找时间戳 - 从那里读取和存储值

> ID：11366524
> 
> 赞同：1
> 
> 时间：2012-07-06T16:57:18.450
> 
> 标签：php, parsing

所以我有这个脚本可以解析文件并将数据插入我的数据库。但是现在我正在查看的文件在我需要的东西之前有一堆随机文本（基本上是日志其余部分的关键）。所以我需要在文件中找到时间戳，然后像往常一样从那里操作，忽略时间戳之前的所有内容。日志看起来像这样-

```
(Blah blah, random stuff)

'2004-05-12 15:45:00',0,0,0,141713,,123.288,122.449,123.2... 
```

这是我的代码，一旦我“点击”时间戳，将值存储在数组中 -

```
// read and store the values in an array
while (($buffer = gzgets($fp, 8192)) !== false)
        {
        $val[$i] = $buffer;
        $i++;
    }
    $qry = "insert into afeed 

    set time_stamp='".$val[0]."', 
    error_value='".$val[1]."',
    firstThing='".$val[2]."',
    ...
    otherstuff='".$val[12]."',
    lastThing='".$val[13]."'";

} 
```

所以要么寻找时间戳并从那里开始，或者我在想，因为每次我能找出它的大小并“跳过那么多字节”时，所有无用的东西都是一样的？

这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:11:53.120

您的两种潜在解决方案都是可能的。“跳过那么多字节”的解决方案可能是最直接的。如果您提前知道无用内容的长度将是，例如，每个文件开头的 64 个字节，您可以使用类似`gzseek($fp, 64)`将文件指针移过无用内容的方法。

既然你说没用的东西每次都是一样的，这应该行得通。如果无用的东西不是预定的长度，一旦你确定了无用的东西有多长，这个方法仍然可以使用（我需要看看无用的东西是什么来决定最好的方法）。

# php - 单击“添加”按钮后如何更改答案按钮？

> ID：11366527
> 
> 赞同：1
> 
> 时间：2012-07-06T16:57:21.967
> 
> 标签：php, javascript, jquery

我有一个应用程序 [here][1]，用户可以在其中选择他们的选项和答案。请按照以下步骤申请。

*   步骤1：当你打开应用程序时，你会看到“打开网格”链接，点击它并选择一个选项类型，选择一个选项后，它会在底部显示答案按钮。例如，如果您选择的选项是“5”，它将显示 5 个答案按钮“A - E”，如果选择的选项是 8，它将显示 8 个答案按钮“AH”。

现在这很好。如您所见，答案按钮的正确数量取决于从网格中选择的选项。但我遇到的问题是用户是否想添加以前的选项。请看以下步骤：

*   第2步：您会在左侧看到一个绿色的加号按钮，单击它，这将打开一个模式窗口。
*   第 3 步：在搜索框中键入“AAA”，然后单击“提交”按钮，它将显示数据库中的行。
*   第 4 步：如果您查看第一行，您可以在“选项类型”列下看到它是 AD。通过单击“添加”按钮选择该行。

将会发生的是模式窗口将关闭，如果您查看右侧的答案和选项控件，您可以看到选项类型文本框包含数字 4（这是因为选项类型是“AD”所以有是 4 个选项“A、B、C、D”），所以它应该显示答案按钮 AD 但它没有，它根本不会改变答案按钮，它们保持不变。

所以我的问题是如何在用户单击“添加”按钮后显示正确的答案按钮？

下面是从网格中选择选项后导入答案按钮的代码：

```
 $('.gridBtns').on('click', function()

            {

    var clickedNumber = this.value;

        $(this).closest('.option').siblings('.answer').find('.answers').each(function(index) {
    if (!isNaN(clickedNumber) && index < clickedNumber) {
    $(this).show();

    } else {

    $(this).hide();
    $(this).removeClass('answerBtnsOn');
    $(this).addClass('answerBtnsOff');

    }

    var $this = $(this);
    var context = $this.parents('.optionAndAnswer');
    console.log($this);

                });

if (clickedNumber === 'True or False') {

  $(this).closest('.option').siblings('.answer').find('input[name=answerTrueName]').show();
   $(this).closest('.option').siblings('.answer').find('input[name=answerFalseName]').show();

} else if (clickedNumber === 'Yes or No') {

      $(this).closest('.option').siblings('.answer').find('input[name=answerYesName]').show();
      $(this).closest('.option').siblings('.answer').find('input[name=answerNoName]').show();  

 }

                getButtons();

            });

        });

    function getButtons()
    {
        var i;
        if (initClick == 0) {
for (i = 65; i <= 90; i++) { // iterate over character codes for A to Z
$("#answer" + String.fromCharCode(i)).removeClass("answerBtnsOn").addClass("answerBtnsOff");

            }

            initClick = 1;
        }
// code above makes sure all buttons start off with class answerBtnsOff, (so all button are white).
    } 
```

以下是控制单击“添加”按钮后发生的情况的函数：

```
 function addwindow(numberAnswer,gridValues) { 

        if(window.console) console.log();

        if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 

            $('#mainNumberAnswerTxt').val(numberAnswer);
            $('#mainGridTxt').val(gridValues);
            } else { 
$(plusbutton_clicked).closest('tr').find('input.numberAnswerTxtRow').val(numberAnswer);
$(plusbutton_clicked).closest('tr').find('input.gridTxtRow').val(gridValues);
                }

        $.modal.close(); 
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:45:14.080

在分析了您上面的代码以及您提供的链接的 HTML 源代码之后，看起来您只是落后了一步。您只在 mainGridTxt 输入框中分配网格值（在上述情况下为 4）。您需要触发网格按钮上的单击事件。

将下面的代码放在 $model.close 之后

```
$('#btn'+gridValues).trigger('click'); 
```

上面的代码将触发 id 为“btn4”的网格按钮上的点击事件。

# javascript - jQuery - .on('click', ...) 事件在 Firefox 中触发两次

> ID：11366532
> 
> 赞同：1
> 
> 时间：2012-07-06T16:57:43.383
> 
> 标签：javascript, jquery

我有一个搜索字段，用户在其中输入一个字母，后台的 ajax 脚本执行搜索。结果实时显示在 ul-li 列表中。用户可以点击类是'search_list_item'的li。单击后，用户名/ID 被复制到另一个 div（msg-receiver div）中。

我有一个奇怪的行为，因为在 Safari 中一切正常。在 Firefox 中，点击事件似乎被触发了两次，因为我在 #msg_receiver-div 中看到了两次用户名。

代码如下所示：

```
$(document).ready(function(){
    $('#searchresult').on('click', 'li.search_list_item', function(){

    var msg_receiver_content = $('#msg_receiver').html();

    $('#msg_receiver').html(msg_receiver_content + ' <li class="single_receiver" id="single_receiver_'+$(this).attr('id')+'">'+$(this).find('span').html()+'</li>');

    $('#single_receiver_'+$(this).attr('id')).hide().fadeIn(500);

    });
}); 
```

有谁知道为什么代码在 FF 中被调用两次，在 Safari 中被调用一次 - 我只在搜索结果中的 li 上单击一次。

编辑：在初始状态下，#msg_receiver-div 是空的，但似乎语句`$('#msg_receiver').html(`是在变量`msg_receiver_content`有一些内容之前执行的，然后变量有应该在之后添加的内容......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-29T14:43:37.387

我一直在努力解决同样的问题。所有事件似乎都可以正常工作，`click`但是该事件似乎多次触发。添加`.off()`之前`.on()`似乎可以解决此问题。

这导致了多个`click`事件：

```
$("#select").on("click", function(event){
    //do something
}); 
```

这恰好触发了一个`click`事件。到目前为止，我无法通过以下方式触发多个事件：

```
$("#select").off().on("click", function(event){
    //do something
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:04:41.480

您可能需要`event.stopPropagation()`防止事件冒泡（这可能正在发生）。

```
$(document).ready(function(){
    $('#searchresult').on('click', 'li.search_list_item', function(event){

        event.stopPropagation(); // stop event bubbling

        var msg_receiver_content = $('#msg_receiver').html();

        $('#msg_receiver').html(msg_receiver_content + ' <li class="single_receiver" id="single_receiver_'+$(this).attr('id')+'">'+$(this).find('span').html()+'</li>');

        $('#single_receiver_'+$(this).attr('id')).hide().fadeIn(500);

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T18:07:20.323

您可以设置一个锁定变量，因为此操作需要时间，它应该锁定第二次点击事件。

```
$(document).ready(function(){

    var blockClick = false;

    $('#searchresult').on('click', 'li.search_list_item', function(){

    if(blockClick){
    }else{

        blockClick = true;

        var msg_receiver_content = $('#msg_receiver').html();

        $('#msg_receiver').html(msg_receiver_content + ' <li class="single_receiver" id="single_receiver_'+$(this).attr('id')+'">'+$(this).find('span').html()+'</li>');

        $('#single_receiver_'+$(this).attr('id')).hide().fadeIn(500);

        blockClick=false;
    }
    });
}); 
```

# sql - 使用 SQL 查询计算从一条记录到下一条记录的百分比变化

> ID：11366535
> 
> 赞同：0
> 
> 时间：2012-07-06T16:57:49.883
> 
> 标签：sql, join, null

我正在使用此查询来计算从当前学期到上一学期的入学总数百分比变化。我需要对此查询进行哪些更改以避免空值？我尝试过使用非常缓慢的子查询。

```
SELECT E2.Term AS Prev_Term, 
       E2.[Enrollment Total] AS Prev_Enrl_Tot, 
       E1.Term,
       E1.Location, 
       E1.milestone_description, 
       E1.polling_date,
       Round(((E1.[Enrollment Total] - [Prev_Enrl_Tot]) 
                                   / [Prev_Enrl_Tot]) * 100,2) AS Percent_Change
FROM EnrollmentsByLocation E1 
LEFT OUTER JOIN EnrollmentsByLocation E2
ON E1.Location = E2.Location 
AND E1.milestone_description = E2.milestone_description 
AND E1.Term - E2.Term = 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:30:26.930

什么味道的SQL？避免空值是什么意思？您是要避免除以零错误，还是不显示空值？使用`ISNULL`，但环绕`NULLIF`除数以避免除以零错误。这两者都处理。或者您是否试图阻止他们返回？如果是这样，请查看您的`LEFT`联接或`WHERE`子句。您需要将别名放在 [Prev_Enrl_Tot] 上。

```
 ISNULL(Round(((E1.[Enrollment Total] - [Prev_Enrl_Tot]) / NULLIF([Prev_Enrl_Tot],0)) * 100,2),0) AS Percent_Change 
```

# android - Android 动态壁纸不显示

> ID：11366537
> 
> 赞同：1
> 
> 时间：2012-07-06T16:57:56.927
> 
> 标签：android, live-wallpaper, ondestroy

我刚开始学习动态壁纸，我做了这个小东西。

问题是我的应用程序编译没有任何问题。

当我在手机中打开它时，它会在预览中显示壁纸，但是当我单击“设置为壁纸”时，它会以某种方式崩溃，并返回前屏幕，我的壁纸变黑，但它不运行它。

我的猜测是问题出在 onDestory() 的某个地方。

```
public class Strips extends WallpaperService {

private StripsEngine engine;

@Override
public void onCreate() {
    super.onCreate();
    engine = new StripsEngine();
    engine.resume();

}

@Override
public void onDestroy() {
    super.onDestroy();
    engine.pause();
}

@Override
public Engine onCreateEngine() {

    return engine;
}

class StripsEngine extends Engine implements Runnable {
    private Thread t = null;
    private SurfaceHolder holder;
    private boolean clearToRun = false;
    private Paint paint = new Paint();
    private Paint paint2 = new Paint();
    private int frame;
    private float endX,endY;
    private int height, width;
    private Canvas c;

    StripsEngine() {
        holder = getSurfaceHolder();
        paint.setColor(Color.WHITE);
        paint.setStrokeWidth(30);
        paint.setAntiAlias(true);
        paint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStyle(Paint.Style.STROKE);
        paint2 = paint;
        paint2.setColor(Color.BLACK);
        paint2.setStrokeWidth(40);
        frame = 0;
    }

    void drawStrips() {

    }

    public void run() {
        // TODO Auto-generated method stub
        while (clearToRun) {
            if (!holder.getSurface().isValid()) {
                continue;
            }
            height = 800;
            width = 480; 

            endX = (frame) % (width + 10);
            endY = (frame / 3) % (height + 10);

            if (endX == 0)
                paint.setARGB(255,(int)(Math.random()*255), (int)(Math.random()*255),(int)(Math.random()*255));
            if (endY ==0)
                paint.setARGB(255,(int)(Math.random()*255), (int)(Math.random()*255),(int)(Math.random()*255));

            c = holder.lockCanvas();
            c.drawLine(endX-30, endY-10, endX , endY,paint);
            c.drawLine(endX-30, endY-10, endX , endY,paint);
            holder.unlockCanvasAndPost(c);
            frame = frame +2;
            }
    }
    public void pause() {
        clearToRun = false;
        while (true) {
            try {
                t.join();
            }
            catch (InterruptedException e) {
                e.printStackTrace();    
            }
            break;
        }
        t = null;
    }

    public void resume() {
        clearToRun = true;
        t = new Thread(this);

        t.start();
    }
}

} 
```

> 07-06 17:14:43.869：E/Surface(478)：出队缓冲区出错（未知错误：-19） 07-06 17:14:43.869：E/Surface(478)：dequeueBuffer 失败（没有这样的设备） 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 异常锁定表面 07-06 17:14:43.869: E/BaseSurfaceHolder(478): java.lang.IllegalArgumentException 07-06 17:14:43.869: E /BaseSurfaceHolder(478): 在 android.view.Surface.lockCanvasNative(Native Method) 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 在 android.view.Surface.lockCanvas(Surface.java:288) 07 -06 17:14:43.869: E/BaseSurfaceHolder(478): 在 com.android.internal.view.BaseSurfaceHolder.internalLockCanvas(BaseSurfaceHolder.java:132) 07-06 17:14:43.869: E/BaseSurfaceHolder(478):在 com.android.internal.view.BaseSurfaceHolder.lockCanvas(BaseSurfaceHolder.java:112) 07-06 17:14:43.869: E/BaseSurfaceHolder(478):在 com.mendel.strips.Strips$StripsEngine.run(Strips.java:81) 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.972: W/dalvikvm(478): threadid=15: 线程以未捕获的异常退出 (group=0x4001b188) 07-06 17:14:43.979: E/AndroidRuntime(478): 未捕获的处理程序：线程线程 8 由于未捕获的异常而退出 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel。 strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): at java.lang.Thread.run(Thread.java:1096) 07-06 17: 14:43.999: I/dalvikvm(478): threadid=7: 对信号 3 做出反应 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr/traces.txt '： 没有权限Strips$StripsEngine.run(Strips.java:81) 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14: 43.972: W/dalvikvm(478): threadid=15: 线程退出未捕获异常 (group=0x4001b188) 07-06 17:14:43.979: E/AndroidRuntime(478): 未捕获处理程序：线程 Thread-8 由于未捕获而退出异常 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel.strips.Strips$StripsEngine.run (Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.999: I/dalvikvm (478): threadid=7: 响应信号 3 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr/traces.txt': 权限被拒绝Strips$StripsEngine.run(Strips.java:81) 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14: 43.972: W/dalvikvm(478): threadid=15: 线程退出未捕获异常 (group=0x4001b188) 07-06 17:14:43.979: E/AndroidRuntime(478): 未捕获处理程序：线程 Thread-8 由于未捕获而退出异常 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel.strips.Strips$StripsEngine.run (Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.999: I/dalvikvm (478): threadid=7: 响应信号 3 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr/traces.txt': 权限被拒绝81) 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.972: W/dalvikvm(478): threadid =15：线程以未捕获的异常退出（组=0x4001b188）07-06 17:14:43.979：E/AndroidRuntime（478）：未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出 07-06 17:14:43.990： E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): 在 com.mendel.strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.999: I/dalvikvm(478): threadid=7: 反应信号 3 07-06 17:14:43.999：E/dalvikvm(478)：无法打开堆栈跟踪文件“/data/anr/traces.txt”：权限被拒绝81) 07-06 17:14:43.869: E/BaseSurfaceHolder(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.972: W/dalvikvm(478): threadid =15：线程以未捕获的异常退出（组=0x4001b188）07-06 17:14:43.979：E/AndroidRuntime（478）：未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出 07-06 17:14:43.990： E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): 在 com.mendel.strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): 在 java.lang.Thread.run(Thread.java:1096) 07-06 17:14:43.999: I/dalvikvm(478): threadid=7: 反应信号 3 07-06 17:14:43.999：E/dalvikvm(478)：无法打开堆栈跟踪文件“/data/anr/traces.txt”：权限被拒绝java:1096) 07-06 17:14:43.972: W/dalvikvm(478): threadid=15: 线程以未捕获的异常退出 (group=0x4001b188) 07-06 17:14:43.979: E/AndroidRuntime(478):未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel.strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): at java.lang.Thread.run(Thread.java:1096) 07 -06 17:14:43.999: I/dalvikvm(478): threadid=7: 响应信号 3 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr /traces.txt'：权限被拒绝java:1096) 07-06 17:14:43.972: W/dalvikvm(478): threadid=15: 线程以未捕获的异常退出 (group=0x4001b188) 07-06 17:14:43.979: E/AndroidRuntime(478):未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel.strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): at java.lang.Thread.run(Thread.java:1096) 07 -06 17:14:43.999: I/dalvikvm(478): threadid=7: 响应信号 3 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr /traces.txt'：权限被拒绝未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel.strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): at java.lang.Thread.run(Thread.java:1096) 07 -06 17:14:43.999: I/dalvikvm(478): threadid=7: 响应信号 3 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr /traces.txt'：权限被拒绝未捕获的处理程序：线程 Thread-8 由于未捕获的异常而退出 07-06 17:14:43.990: E/AndroidRuntime(478): java.lang.NullPointerException 07-06 17:14:43.990: E/AndroidRuntime(478): at com.mendel.strips.Strips$StripsEngine.run(Strips.java:82) 07-06 17:14:43.990: E/AndroidRuntime(478): at java.lang.Thread.run(Thread.java:1096) 07 -06 17:14:43.999: I/dalvikvm(478): threadid=7: 响应信号 3 07-06 17:14:43.999: E/dalvikvm(478): 无法打开堆栈跟踪文件'/data/anr /traces.txt'：权限被拒绝运行（Thread.java:1096）07-06 17:14:43.999：I/dalvikvm（478）：threadid=7：对信号 3 做出反应 07-06 17:14:43.999：E/dalvikvm（478）：无法打开堆栈跟踪文件'/data/anr/traces.txt'：权限被拒绝运行（Thread.java:1096）07-06 17:14:43.999：I/dalvikvm（478）：threadid=7：对信号 3 做出反应 07-06 17:14:43.999：E/dalvikvm（478）：无法打开堆栈跟踪文件'/data/anr/traces.txt'：权限被拒绝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:27:03.853

这可能是因为您请求的画布`holder.lockCanvas()`尚不可用，所以它为空，并且您得到 NullPointerException。

参见文档`lockCanvas()`

> 返回的 Canvas 可用于绘制到表面的位图中。如果尚未创建曲面或无法编辑曲面，则返回 null。您通常需要实现 Callback.surfaceCreated 以了解 Surface 何时可用。

更新：

根据您之前调用的 isValid() 的文档 - `Does this object hold a valid surface? Returns true if it holds a physical surface, so lockCanvas() will succeed. Otherwise returns false.`

此时画布不应为空。但我发现这个，似乎是Android的一个错误：

[http://code.google.com/p/android/issues/detail?id=19245](http://code.google.com/p/android/issues/detail?id=19245)

因此，您可能必须尝试该`Callback.surfaceCreated`方法，或者，如果没有其他方法，请尝试像海报（谁删除了帖子）那样的超时，建议，但这确实是您应该避免的事情，因为它不可靠且混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:30:05.163

我得到了答案！

我查看了立方体动态壁纸示例并复制了结构，这里是代码：

```
public class Strips extends WallpaperService {

private final Handler mHandler = new Handler();   
@Override
public void onCreate() {
    super.onCreate();

}

@Override
public void onDestroy() {
    super.onDestroy();
}

@Override
public Engine onCreateEngine() {

    return new StripsEngine();
}

class StripsEngine extends Engine   {
    private Thread t = null;
;
    private boolean clearToRun = false;
    private Paint paint = new Paint();
    private Paint paint2 = new Paint();
    private int frame;
    private float endX,endY;
    private int height, width;
    private Canvas c;

    private final Runnable mDrawStrip = new Runnable() {
        public void run() {
            drawFrame();
        }
    };

    StripsEngine() {
        paint.setColor(Color.WHITE);
        paint.setStrokeWidth(30);
        paint.setAntiAlias(true);
        paint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStyle(Paint.Style.STROKE);
        paint2 = paint;
        paint2.setColor(Color.BLACK);
        paint2.setStrokeWidth(40);
        frame = 0;
    }

     @Override
        public void onDestroy() {
            super.onDestroy();
            mHandler.removeCallbacks(mDrawStrip);
        }

     @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            super.onSurfaceCreated(holder);
        }

     @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            super.onSurfaceDestroyed(holder);
            clearToRun = false;
            mHandler.removeCallbacks(mDrawStrip);
        }

     @Override
        public void onVisibilityChanged(boolean visible) {
            clearToRun = visible;
            if (visible) {
                drawFrame();
            } else {
                mHandler.removeCallbacks(mDrawStrip);
            }
        }

    public void drawFrame() {
        // TODO Auto-generated method stub
     final SurfaceHolder holder = getSurfaceHolder();
       Canvas c = null;
       try {
           c = holder.lockCanvas();
           if (c != null) {
               // draw something
            height = 800;
            width = 480; 

            endX = (frame) % (width + 10);
            endY = (frame / 3) % (height + 10);

            if (endX == 0)
                paint.setARGB(255,(int)(Math.random()*255), (int)(Math.random()*255),(int)(Math.random()*255));
            if (endY ==0)
                paint.setARGB(255,(int)(Math.random()*255), (int)(Math.random()*255),(int)(Math.random()*255));

            c.drawLine(endX-30, endY-10, endX , endY,paint);
            frame = frame +2;
           }
       } finally {
           if (c != null) holder.unlockCanvasAndPost(c);
       }
         mHandler.removeCallbacks(mDrawStrip);
            if (clearToRun) {
                mHandler.postDelayed(mDrawStrip, 1000 / 25);
            }
    }

}

} 
```

# python - 无法将全局变量传递给 Python 模块内的多个函数

> ID：11366538
> 
> 赞同：1
> 
> 时间：2012-07-06T16:58:02.647
> 
> 标签：python, global-variables, maya

在浏览了所有可能的资源之后，我得出的结论是，我需要紧急帮助才能将全局变量从函数传递给 Python 模块中的其他函数。

其实我是在 Autodesk Maya2010 中写一个小的 UI，这里简单介绍一下这个问题。

在下面的代码中，我有两个模块级全局变量，我在一个函数中为它们赋值。现在，如果我直接传递这些变量（即不转换函数调用并将其分配为字符串），那么代码可以正常工作，但是由于按钮函数的命令**标志****只**允许字符串或函数名，因此我坚持这个调用函数的方式。

 **我得到的结果是：

temp_var=无

a_Window=无

我对此一无所知。

当我使用字符串值作为函数调用时，谁能指出到底发生了什么？

```
**The sample code**:

import maya.cmds;
temp_var=None;
a_Window=None;
def im_PrimaryFunc():
    imSecondary_func();

def imSecondary_func():
    global a_Window;
    global temp_var;
    a_Window=maya.cmds.window(title="Something");
    a_layout=maya.cmds.columnLayout(adj=1,rs=10);
    temp_var=maya.cmds.createNode("polySphere");
    func_call="a_calledFunc(a_Window,temp_var)";
    maya.cmds.button(label="call_aFunc",align="center",command=func_call);
    maya.cmds.showWindow(a_Window);

def a_calledFunc(arg00,arg01):
    print(arg00);
    print(arg01); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:35:46.293

试试这个代码

```
import maya.cmds
from functools import partial
temp_var=None
a_Window=None
def im_PrimaryFunc():
    imSecondary_func()

def imSecondary_func():
    global a_Window
    global temp_var
    a_Window=maya.cmds.window(title="Something")
    a_layout=maya.cmds.columnLayout(adj=1,rs=10)
    temp_var=maya.cmds.createNode("polySphere")
    maya.cmds.button(label="call_aFunc",align="center",command = partial(a_calledFunc,temp_var, a_Window))
    maya.cmds.showWindow(a_Window)

def a_calledFunc(arg00,arg01, part):
    print(arg00)
    print(arg01)

im_PrimaryFunc() 
```

请记住，您正在编写 python 代码，因此无需添加 ; 在你的代码中:)**

# .net - 并行和线程安全串行模式

> ID：11366539
> 
> 赞同：2
> 
> 时间：2012-07-06T16:58:04.353
> 
> 标签：.net, thread-safety, task-parallel-library

是否有一种模式可以将并行与并行上的线程安全计算相结合？

需要计算一个结果，其中第一步将受益于并行，第二个是对并行结果的串行过程。

一种选择是并行运行并将输出保存到一个集合中，然后串行处理该集合，我就可以工作了。存在内存管理的问题，因为集合可能非常大。

下面是串行版本。基本上我想并行 TableQueryGetRowKeys 并以线程安全的方式使用该结果。尝试仅并行化 for 并锁定最终结果，但 rowKeys 可能已关闭。尝试过聚合，但我无法弄清楚如何将集合传递给聚合，更不用说在聚合中执行线程安全的相交了。

```
IEnumerable<string> finalResults = null;
if (partitionKey.Length == 0) return finalResults;
object lockObject = new object();
finalResults = TableQueryGetRowKeys(partitionKey[0], 0);
HashSet<string> rowKeys;
for(int i = 1; i < partitionKey.Length; i++)
{
    // IO operation to Azure Table Storage against the PartitionKey
    // so very amenable to parallel
    rowKeys = TableQueryGetRowKeys(partitionKey[i]);
    // a memory and CPU operation 
    // this should be much faster than TableQueryGetRowKeys
    // going parallel and wrapping this in a lock did not properly synch rowKeys
    finalResults = finalResults.Intersect(rowKeys); 
}
return finalResults; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:04:52.820

假设这`TableQueryGetRowKeys`是线程安全的：

```
var final = partitionKey.AsParallel()
                        // By returning AsParallel we can get parallel intersect
                        .Select(k => TableQueryGetRowKeys(k).AsParallel())
                        .Aggregate((x, y) => x.Intersect(y));

// Using fake-ish data I see about a 30% speed-up on a 4-core machine:
// static HashSet<string> TableQueryGetRowKeys(string prefix)
// {
//     // Simulate 1s of IO round-trip
//     if (useSleep) Thread.Sleep(1000);
//
//     return new HashSet<string>(
//         Enumerable.Range(0, 500)
//                   .Select(_ => random.Value.Next(0, 500).ToString()));
// } 
```

该算法以逐步方式工作，如下所示：

1.  `partitionKey.AsParallel()`将常规`IEnumerable<string>`转换为`ParallelQuery<string>`允许并行处理序列的 a。
2.  接下来，`ParallelEnumerable.Select`用于`TableQueryGetRowKeys`并行调用。
3.  然后将每次调用的结果`TableQueryGetRowKeys`包装在`ParallelQuery<T>`using 中`AsParallel()`。
4.  `ParallelEnumerable.Intersect`用作由 . 返回的每个“并行启用”枚举的聚合函数`TableQueryGetRowKeys`。

* * *

实际上，这可以通过删除调用*以串行*方式替换您以前的代码，如下所示：`AsParallel`

```
var serialEquivalent = partitionKey.Select(k => TableQueryGetRowKeys(k))
                                   .Aggregate((x,y) => x.Intersect(y)); 
```

当您查看实现的肉和土豆时，您可以“说服”自己这等同于您的方法：

```
IEnumerable<string> results = SomeMethod(0);
for (int ii = 1; ii < count; ++ii)
{
    results = results.Intersect(SomeMethod(ii));
} 
```

`+`使用而不是重写上述内容`Intersect`：

```
int results = SomeMethod(0);
for (int ii = 1; ii < count; ++ii)
{
    results = results + SomeMethod(ii);
} 
```

现在很明显，它`Intersect`可以用来代替其他更“常见”的聚合函数（例如数学运算符）。

# asp.net - Html.ActionLink 未正确呈现

> ID：11366545
> 
> 赞同：0
> 
> 时间：2012-07-06T16:58:17.827
> 
> 标签：asp.net, asp.net-mvc

当我尝试在 razor 中渲染一个动作链接时，它奇怪地出现了。

例如，当我执行以下操作时：

```
@Html.ActionLink("Edit", "Edit", "Sites", new {itm.Id}, null) 
```

在屏幕上，我得到的链接如下所示：

```
Edit (/Sites/Edit/1) 
```

在 HTML 中，它看起来像这样：

```
<a href="/Sites/Edit/1">Edit</a> 
```

这就像一场噩梦。我不知道这垃圾是从哪里来的。它也在 Firefox 中执行（我通常使用 Chrome）。有趣的是，您无法选择显示的文本。我以前从未见过这个问题，而且该文本甚至不在页面中，除了 url 路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:31:58.463

好的，这对我来说很好，很愚蠢。我在这些页面上使用 BluePrint.css。出于某种原因，蓝图样式表的打印版本正在输出到页面。这将通过文本打印出超链接，如下所示： a:link:after, a:visited:after {content:" (" attr(href) ")";font-size:90%;}

我什至不知道你可以用 css 做到这一点。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:04:49.653

尝试这个

```
@Html.ActionLink("Edit", "Edit", "Sites", new { @id=itm.Id }, null) 
```

# java - 使用不同 SQL 语句的 PreparedStatement 批处理

> ID：11366547
> 
> 赞同：1
> 
> 时间：2012-07-06T16:58:29.507
> 
> 标签：java, sql, oracle

我想知道Java中是否有可能

```
String A = "UPDATE blah set x=? y=? z=?"
String B = "UPDATE blah set a=? b=? c=? d=?" 
```

我想有一个准备好的声明，主要是为了速度，其次是为了安全。我希望能够为 A 填写绑定变量，执行 A，为 B 绑定变量，然后执行 B，然后提交整个事务。有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:25:41.000

你确定你不能只用一个语句来实现同样的事情：

UPDATE blah set x=?, y=?, z=?, a=?, b=?, c=?, d=?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:10:42.437

您可以使用多个 PreparedStatement 来获得所需的结果：

```
// Prepare code for PreparedStatement #1
String varOne = "A";
String varTwo = "B";
String varThree = "C";

String queryOne = "UPDATE blah set x=? y=? z=?"
PreparedStatement firstStmt = conn.prepareStatement(queryOne);

firstStmt.setString(1, varOne);
firstStmt.setString(2, varTwo);
firstStmt.setString(3, varThree);

firstStmt.executeUpdate();
conn.commit();

// Prepare code for PreparedStatement #2
String varOneB = "X";
String varTwoB = "Y";
String varThreeB = "Z";
String varFourB = "A";

String queryOne = "UPDATE blah set a=? b=? c=? d=?"
PreparedStatement secondStmt = conn.prepareStatement(queryTwo);

secondStmt.setString(1, varOneB);
secondStmt.setString(2, varTwoB);
secondStmt.setString(3, varThreeB);

secondStmt.executeUpdate();
conn.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:30:34.423

您可以创建一个具有匿名 PL/SQL 块的字符串，该块在同一事务中运行两个更新语句，并将该字符串与 PreparedStatement 一起使用来设置绑定变量。

我知道您说过您要 1) 填写 A 的绑定变量，2) 执行 A，3) 填写 B 的绑定变量，4) 执行 B，5) 提交事务。

我的建议并不完全遵循这个顺序。我建议您有一个大的 PL/SQL 匿名块，其中包含 A 和 B 的语句。您将在执行之前填写整个块的所有绑定变量。您可以从 PL/SQL 块中控制是否提交/回滚或您想要的任何其他逻辑（包括更复杂的异常处理）。

这基本上就像拥有一个不存储在数据库中的存储过程。老实说，对于不需要在某个代码的上下文之外可用的东西，这是我的首选方法。所以你的业务逻辑没有保存在数据库中（很多人会争论几个小时来争论这是好事还是坏事；我个人讨厌数据库级别的业务逻辑，但这取决于你的项目）。

此外，请查看 PreparedStatement 继承自 Statement 的文档。

[http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html)

如果你真的想用同一个 PreparedStatement 对象来执行一个 SQL 语句，你可以调用 clearBatch 和 addBatch，然后换出 SQL 并执行一个完全不同的语句。

# asp.net - 当我从 DataTable 检索值时，Ajax 扩展（计时器）停止工作

> ID：11366552
> 
> 赞同：0
> 
> 时间：2012-07-06T16:59:01.840
> 
> 标签：asp.net, ajax, vb.net, asp.net-ajax

目前我有一个`Ajax Timer`每隔几秒执行一个函数。在我尝试从`DataTable`. 我不知道为什么。我试过调试。我什至在页面上放了标签来检查。

例如`Ajax Timer`：

```
Protected Sub Timer1_Tick(sender As Object, e As System.EventArgs) Handles Timer1.Tick

    Label1.Text = DateTime.Now.ToLongTimeString()

End Sub 
```

数据列表（给出问题的那个）：

```
Protected Sub dlOrgProfile_ItemCreated(sender As Object, e As System.Web.UI.WebControls.DataListItemEventArgs) Handles dlOrgProfile.ItemCreated
    Dim bizLayerMgmt As BlOrganizations
    Dim dt As DataTable

    bizLayerMgmt = New BlOrganizations()
    dt = bizLayerMgmt.getOrgDetails(userId).Tables(0)

    ddl = CType(e.Item.FindControl("ddlCoType"), DropDownList)
    Dim value As Integer = Convert.ToInt32(dt.Rows(0)(3)) 'I have narrowed the problem to this line, if I comment this line.. everything works perfectly
    ddl.SelectedValue = value
End Sub 
```

问题在于 dt.Rows(0)(3)。我不知道为什么。我需要用它从数据库中检索一些数据。

以防万一它是前端..这是该站点的标记。

```
<div class="content">
            <asp:ScriptManager ID="ScriptManager1" runat="server">
            </asp:ScriptManager>
            <asp:Timer ID="Timer1" runat="server" Interval="1000">
            </asp:Timer>
            <asp:DataList ID="dlOrgProfile" runat="server" DataSourceID="odsOrgDetails" 
                EnableTheming="True" RepeatLayout="Flow" ShowFooter="False" ShowHeader="False">
                <ItemTemplate>
                    <h3>
                        <asp:TextBox ID="txBxCoName" runat="server" Text='<%# Eval("OrgName") %>'></asp:TextBox>

                        <div class="ddlSelect">
                            <asp:DropDownList ID="ddlCoType" runat="server" DataSource='<%# listOrgType() %>' DataTextField="OrganizationType" DataValueField="OrgTypeID" >
                            </asp:DropDownList>
                        </div>

                        <h3>
                        </h3>
                        <a id="linkCoImg" href="upload_co_logo.aspx">
                        <asp:Image ID="CoImg" runat="server" ImageUrl="~/logo/org/default.png" />
                        <span>Change</span> </a>
                        <br />
                        <div id="description">
                            <textarea id="taCoDesc" rows="2" cols="1"><%# Eval("Description") %></textarea>
                        </div>
                        <br />
                        <asp:Label ID="lblContacts" runat="server" Text="Contacts:"></asp:Label>
                        <br />
                        <div id="contacts">
                            <asp:TextBox ID="tbContactOffice" runat="server" CssClass="tbContacts"></asp:TextBox>
                            <asp:TextBox ID="tbContactFax" runat="server" CssClass="tbContacts"></asp:TextBox>
                            <asp:TextBox ID="tbContactMail" runat="server" CssClass="tbContacts2"></asp:TextBox>
                        </div>
                        <br />
                        <asp:Button ID="btnSave" runat="server" CommandArgument='<%# Eval("OrgID") %>' 
                            CommandName="save" Text="Save" />

                    </h3>

                </ItemTemplate>
            </asp:DataList>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
            </Triggers>
            <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ContentTemplate>
            </asp:UpdatePanel>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T10:16:23.597

好的，我已经解决了自己的问题.. 仍然不明白为什么，但这就是我所做的.. 我没有使用 ItemCreated，而是使用了 ItemDataBound。

```
Protected Sub dlOrgProfile_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.DataListItemEventArgs) Handles dlOrgProfile.ItemDataBound
    Dim bizLayerMgmt As BlOrganizations
    Dim dt As DataTable

    bizLayerMgmt = New BlOrganizations()
    dt = bizLayerMgmt.getOrgDetails(userId).Tables(0)

    ddl = CType(e.Item.FindControl("ddlCoType"), DropDownList)
    Dim value As Integer = Convert.ToInt32(dt.Rows(0)(3))
    ddl.SelectedValue = value
End Sub 
```

# python - 如何检查线程当前是否持有 GIL？

> ID：11366556
> 
> 赞同：16
> 
> 时间：2012-07-06T16:59:16.067
> 
> 标签：python, multithreading, gil

我试图找到一个函数来告诉我当前线程是否具有全局解释器锁。

Python/C-API 文档似乎不包含这样的功能。

我当前的解决方案是`PyGILState_Ensure()`在释放它之前使用获取锁`PyEval_SaveThread`，而不是尝试释放当前线程未获取的锁。

（顺便说一句。“发出致命错误”是什么意思？）

这个问题的背景：我有一个嵌入 Python 的多线程应用程序。如果一个线程在没有释放锁的情况下关闭（这可能由于崩溃而发生），其他线程将无法再运行。因此，在清理/关闭线程时，我想检查该线程是否持有锁并在这种情况下释放它。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-04T13:20:47.053

如果您正在使用（或可以使用）Python 3.4，则有一个用于完全相同目的的新函数：

```
if (PyGILState_Check()) {
    /* I have the GIL */
} 
```

[https://docs.python.org/3/c-api/init.html?highlight=pygilstate_check#c.PyGILState_Check](https://docs.python.org/3/c-api/init.html?highlight=pygilstate_check#c.PyGILState_Check)

> 如果当前线程持有 GIL，则返回 1，否则返回 0。可以随时从任何线程调用此函数。只有当它的 Python 线程状态已初始化并且当前持有 GIL 时，它才会返回 1。这主要是一个帮助/诊断功能。例如，当知道 GIL 被锁定时，它在回调上下文或内存分配函数中很有用，可以允许调用者执行敏感操作或以其他方式表现不同。

在 python 2 中，您可以尝试以下操作：

```
int PyGILState_Check2(void) {
    PyThreadState * tstate = _PyThreadState_Current;
    return tstate && (tstate == PyGILState_GetThisThreadState());
} 
```

在我尝试过的情况下，它似乎运作良好。 [https://github.com/pankajp/pygilstate_check/blob/master/_pygilstate_check.c#L9](https://github.com/pankajp/pygilstate_check/blob/master/_pygilstate_check.c#L9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:10:39.177

我不知道你在找什么......但你应该考虑使用这两个宏`Py_BEGIN_ALLOW_THREADS`，并且`Py_END_ALLOW_THREADS`使用这个宏，你可以确保它们之间的代码没有 GIL 锁定并且它们内部的随机崩溃将是当然。

# java - Jconsole 实时线程数和 java ExecutorService

> ID：11366562
> 
> 赞同：2
> 
> 时间：2012-07-06T17:00:02.363
> 
> 标签：java, executorservice, jconsole

在一段时间内使用 JConsole 监控我们的应用程序表明“活动线程”计数在不断增加。增加线程数对我来说听起来像是一件坏事，还是我错了？

概要：在我们的应用程序中，我们使用 Executors.newFixedThreadPool、Executors.newSingleThreadScheduledExecutor 为各种收集器创建线程池。这些收集器每隔几分钟就会被调用一次。还有一个其他服务，在每次收集期间，上述收集器都会调用 n 次。此服务生成执行 FutureTask 的单个线程 (Executors.newFixedThreadPool(1);)。对于上述所有 ExecutorServices，我们仅在捕获到异常时才调用 shutdownNow()，并将其余部分留给 GC。

1) 进程完成后是否需要关闭执行程序，还是可以依赖 GC？

感谢您的建议和见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:30:52.613

线程池的目的是避免在处理过程中产生新线程的开销。你不应该产生新的线程*池*！（这就是你在这里做的`Executors.newFixedThreadPool(1);`）

您应该在应用程序启动时设置线程池，并将它们注入到您的处理对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:06:55.767

应该在执行程序服务上显式调用关闭 - executor.shutdown() 以有序关闭和回收资源（执行旧任务，不接受新任务）。

shutdownNow() 尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表（不能保证正在执行的任务 - 它们可能会或可能不会执行 - 这是最好的试图）。

# php - CakePhp：下拉重复选项

> ID：11366564
> 
> 赞同：0
> 
> 时间：2012-07-06T17:00:07.280
> 
> 标签：php, cakephp

我正在使用 CakePHP 2.1.1，并升级到 2.2.0，两者都存在问题。我正在使用 FormHelper 生成一个 Select 下拉列表，其中包含在数组中定义的选项。当它生成选项时，它会重复其中的一些选项。哪些和多少重复取决于我正在编辑的记录。

在我看来使用以下代码：

```
debug($advisors);
echo $this->Form->input('advisor',array('options'=>$advisors)); 
```

我懂了：

```
/app/View/Students/edit.ctp (line 38)

array(
    'K-1' => 'K-1',
    'K-2' => 'K-2',
    '2-3' => '2-3',
    '3-5n' => '3-5n',
    '3-5s' => '3-5s',
    '4-5' => '4-5',
    '6-8' => '6-8'
) 
```

然后是带有以下选项的下拉菜单：

```
<option selected="selected" value="K-1">K-1</option>
<option value="K-2">K-2</option>
<option value="2-3">2-3</option>
<option value="3-5n">3-5n</option>
<option value="3-5s">3-5s</option>
<option value="4-5">4-5</option>
<option value="6-8">6-8</option>
<option value="K-1">K-1</option>
<option value="K-2">K-2</option>
<option value="2-3">2-3</option> 
```

我还应该检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:44:16.913

好的不要紧。这是我不久前写的一个 javascript 函数，它弄乱了生成的选项。

# mysql - 挑战：MySQL 用户表默认设置

> ID：11366565
> 
> 赞同：0
> 
> 时间：2012-07-06T17:00:07.937
> 
> 标签：mysql, default

# 更新：

从那以后，我意识到我这样做的方式不是最理想的，并且永远无法正常工作，现在我使用两个表而不是三个，这似乎有效。

如果您有解决方案，欢迎您回答，但如果他们有类似的问题，只能帮助其他人。

* * *

我有一个包含 uid、名称和基本信息的用户表。我有一个带有 sid、设置名称和设置默认值的设置表。

我还有一个包含 sid、uid 和值的 users_settings 表，将用户的设置链接到设置的名称和用户的名称。

在一个查询中，我将如何选择一个用户，并“循环”通过设置表，为每个设置选择 users_settings 中的用户设置（如果存在），或者该设置的默认值（如果不存在）？

每个设置最好在结果集中显示为一列（列的名称是设置的名称，值是设置的值）。

如果这是难以理解的，这里有一个例子：

用户表：

```
uid name   email
1   Maria  maria@example.com
4   George george@example.com 
```

设置表：

```
sid name     default_value
1   uicolour #f00
2   language en 
```

users_settings 表：

```
uid sid value
4   1   #000
1   2   es 
```

MySQL 查询 uid 4 的期望结果：

```
uid name   email              setting_colour setting_language
4   George george@example.com #000           en 
```

MySQL 查询 uid 1 的所需结果：

```
uid name   email             setting_colour setting_language
1   Maria  maria@example.com #f00           es 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:37:31.370

好的，在使用它并了解有关左连接的更多信息之后，这似乎可行：

```
SELECT t_users.*, t_users_settings.*, t_settings.*
FROM t_users 
LEFT JOIN t_users_settings ON t_users.uid = t_users_settings.t_uid  
LEFT JOIN t_settings ON t_settings.t_sid != t_users_settings.t_sid
WHERE t_users_settings.t_sid IS NOT NULL 
AND t_users_settings.t_uid IS NOT NULL 
AND t_users.uid = '<input user id here>'; 
```

# ssis - 如何在ssis中合并两个表

> ID：11366573
> 
> 赞同：0
> 
> 时间：2012-07-06T17:00:43.550
> 
> 标签：ssis

我在一个数据库中有两个表客户表有客户坐标信息客户类型有关于客户类型的信息

我想要一个目标表

```
destination customer table
key
name
adress
...
type 
```

我确实创建了客户表 + 客户类型的数据库 vue，但结果查询仅向我显示了客户类型中具有客户表键 = 客户表外键的字段

并且客户表中也有没有类型的字段。我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:57:54.780

您在数据流任务中使用了哪些类型的转换？

我宁愿在 SQL Server 上使用 INNER JOIN 和 SELECT INTO 之类的东西来执行此操作。如果要在 SSIS 上连接两个表，请使用[Merge Join Transformation](http://msdn.microsoft.com/en-us/library/ms141775.aspx)。但是，必须对合并连接转换的输入进行排序，以便在使用 OLE DB 源适配器获取数据时可以使用排序转换或仅使用 ORDER BY。

希望这可以帮助。

# linux - 如何通知用户空间应用程序驱动程序已收到 linux 中的中断？

> ID：11366583
> 
> 赞同：2
> 
> 时间：2012-07-06T17:01:09.263
> 
> 标签：linux, signals, driver, pid, pci-e

我有一个 PCIe 设备，它会在数据缓冲区准备好读取时发送硬件中断。我相信最好的方法是使用信号，但我不完全确定如何。我认为我需要做的是：

1.  保存用户空间应用程序的 PID，以便驱动程序知道将信号发送到哪里
2.  在 PCIe 设备驱动程序的中断处理程序中，向用户空间应用程序发送信号
3.  在用户空间应用程序中实现一个信号处理函数来处理信号

我不知道该怎么做。如何/在哪里保存用户空间应用程序的 PID？如何从驱动程序的中断处理程序向该特定 PID 发送信号（我相信我应该使用 kill 命令，但我对获取 PID 的语法更感兴趣）？如何让用户空间应用程序在保存其 PID 后等待信号？是否可以让用户空间应用程序在保存其 PID 后继续运行，在收到信号时运行信号处理函数，并在信号到达之前继续运行？（类似于 ISR 的工作方式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:07:23.440

不要为此使用信号。实现一个字符设备。用户空间应用程序将`open`调用它，然后调用`read`并将被阻止，直到您的驱动程序确定有可用数据。

我认为请参阅[Linux 设备驱动程序](http://lwn.net/Kernel/LDD3/)第 3 章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T17:20:42.500

必须直接在内核中处理中断。为了将 PID 传递给内核，必须使用设备文件抽象（例如`ioctl()`调用），但它也通过读取/选择提供异步通知，因此信号解决方案被替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-13T10:00:53.857

这是一个老问题，但要从应用程序用户空间管理 IRQ，现在更好的方法是使用 UIO 驱动程序并在 /dev/uioX 上进行轮询/选择调用。

# ruby - Ruby 循环中管道的使用

> ID：11366584
> 
> 赞同：4
> 
> 时间：2012-07-06T17:01:11.777
> 
> 标签：ruby

所以，也许我把一些不那么难的事情复杂化了，但是就这样吧。

在 Ruby 中，有一种称为 .each 的循环方法。我认为这很酷——但我发现不太酷的是关于它之后的管道（或任何其他 Ruby 中的 do-type 循环，看起来）的东西的数量。有时管道中只有一件事：

```
basket.each do |fruit|
    puts "This is a #{fruit}.\n"
end 
```

但有时，这个管道中有两件事，就像这样：

```
contacts.each do |name, profession|
    puts "#{name} is a #{profession}.\n"
end 
```

所以我现在想知道的是，该管道中是否有可能有两个以上的项目？就像我有一个巨大的、又大又丑的多暗阵列？

如果我将东西添加到我的管道并且它们不存在怎么办？它会在管道中给出零​​值吗？还是会抛出错误？

再说一次，对不起，如果这对长期的 Ruby 爱好者来说是显而易见的，但我来自严格类型变量的领域，我现在也离开 PHP 领域。:)

**编辑**

那么，如果我有这样的事情怎么办：

```
categories = [["Bathroom", "Bathroom Fixtures", "Plumbing"],
                      ["Ceiling Fixtures", "Chandeliers", "Flush Mounts", "Mini Chandeliers", "Semi-Flush Mounts", "Pendants", "Track Lighting", "Mini Pendants", "Directional", "Island/Pool Table", "Recessed Lighting"],
                      ["Outdoor", "Exterior", "Landscape Lighting"],
                      ["Fans", "Fans", "Fan Accessories"],
                      ["Lamps", "Lamps", "Shades"],
                      ["Wall Fixtures", "Sconces", "Foyer/Hall Lanterns"],
                      ["Specialty", "Undercabinet", "Light Bulbs", "Lighting Controls", "Glass", "Specialty Items", "Utility"],
                      ["Home Decor", "Decor/Home Accents", "Furniture"]] 
```

我可以这样循环吗？

```
categories.each do |category, subcats|
    puts "The main category is #{category} and the sub categories are: "
    subcats.each do |subcat|
        puts "#{subcat}, "
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:14:53.963

让我们从方法的分解开始`each`。

```
a = [1,2,3,4,5]

a.each do |num|
  puts num
end

# 1
# 2
# 3
# 4
# 5 
```

该`do ... end`部分称为`block`

该块接受一个参数（数组中的一个元素）

将参数传递给块的方式是使用`|`'s

如果您向块提供多个参数：

```
a.each do |num, x|
  puts num
  puts x
end

# 1
# 
# 2
# 
# 3
# 
# 4
# 
# 5 
# 
```

`x`是`nil`每次迭代。

让我们自己编写一个使用块的方法，以便您了解它们是如何工作的。

```
def my_each(a=[])
  a.each do |x|
    yield x if block_given?
  end
end

my_each(a) do |num|
  puts num
end 
```

这`yield x`就是说，执行提供的块并传递`x`给它。

如果您将另一个参数传递给您的`block`，它是`nil`. 为什么？

我们的实现对`my_each`第二个参数一无所知，所以它什么都不知道，`yield`所以它仍然存在`nil`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T17:21:16.310

当你有一个简单的数组时，会发生以下事情：

```
arr = [1,2,3,4]

arr.each do |x|
  p x
end
1
2
3
4
=> [1,2,3,4]

arr.each do |x,y|
  p x
  p y
end
1
nil
2
nil
3
nil
4
nil
=> [1,2,3,4] 
```

因此，如果 ruby​​ 不知道将什么放入 block 参数中，它只是将其设置为`nil`. 现在考虑一个嵌套数组：

```
arr = [[1,2],[3,4],[5,6]]

arr.each do |x|
  p x
end
[1, 2]
[3, 4]
[5, 6]
=> [[1,2],[3,4],[5,6]]

arr.each do |x,y|
  p x
  p y
end
1
2
3
4
5
6
=> [[1,2],[3,4],[5,6]] 
```

在这种情况下，ruby 假设您要将内部数组的两个元素分配给块变量`x`和`y`。同样的事情也适用于哈希，其中 Ruby 将键和值分配给`x`and `y`：

```
hash = {1 => 2, 3 => 4, 5 => 6}

hash.each do |x,y|
  p x
  p y
end
1
2
3
4
5
6
=> {1=>2,3=>4,5=>6} 
```

当嵌套数组中没有足够的元素时`nil`，确实会分配块变量。当它们太多时，它们被简单地丢弃：

```
arr = [[1,2,3],[4,5],[6]]

arr.each do |x,y|
  p x
  p y
end
1
2
4
5
6
nil
=> [[1,2,3],[4,5],[6]] 
```

很简单！

**编辑**：

至于您编辑的问题：不，您不能将此 1:1 应用于 Ruby 代码，您必须手动将 splat 运算符 ( `*`) 应用于`subcats`. 这样，ruby 将所有剩余元素分配给 'splatted' 块变量：

```
categories.each do |category,*subcats|
    puts "The main category is #{category} and the sub categories are: "
    subcats.each do |subcat|
        puts "#{subcat}, "
    end
end 
```

虽然我会生成一个逗号分隔的子类别列表，如下所示：

```
categories.each do |category,*subcats|
    puts "The main category is #{category} and the sub categories are: "
    puts subcats.join(', ')
end 
```

**编辑 2**：

哦，你不会通过为它的元素定义很多块参数来处理一个巨大的丑陋邪恶的多维数组。您可能会像在几乎所有其他语言中一样使用嵌套循环遍历它，只是因为您永远不知道它包含多少元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:12:08.373

您正在谈论的管道是块“变量”的参数列表。实际上那是某种函数指针，管道标记了参数列表。

检查[array.each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)的描述。

这不是魔术，参数的数量是在块中定义的，你不能添加更多，如果你这样做了，它们将不会得到一个值。原因是“有时”可能不止一个，因为它可能是一个 hash.each，它有两个参数，一个键和一个值。

您可以使用块参数创建自己的函数，[请阅读此](http://www.skorks.com/2009/09/using-ruby-blocks-and-rolling-your-own-iterators/)。

对于您的迭代问题，您可以使用哈希，也可以编写自己的迭代器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T19:13:44.640

### 一个块的多个参数

[Array#each](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-each)遍历一个数组对象，并将单个对象传递到块中或返回一个枚举器。您可以重新定义此行为，但如果您一次需要多个值，#each 是错误的方法；请参阅[Enumerator#each_slice](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)以获取替代方案。

### 数据结构

使用正确的数据结构会更容易解决您的问题。您应该考虑使用散列而不是数组。例如：

```
categories = 
  {"Bathroom"=>["Bathroom Fixtures", "Plumbing"],
   "Ceiling Fixtures"=>["Chandeliers", "Flush Mounts", "Mini Chandeliers"]}

categories.each do |key, value|
  puts "#{key}:"
  value.each { |v| puts "\t%s" % v }
end 
```

这将返回：

```
Bathroom:
    Bathroom Fixtures
    Plumbing
Ceiling Fixtures:
    Chandeliers
    Flush Mounts
    Mini Chandeliers 
```

# objective-c - 停止执行并在 iPad 应用程序上获得用户的选择

> ID：11366585
> 
> 赞同：1
> 
> 时间：2012-07-06T17:01:18.233
> 
> 标签：objective-c, ios, cocoa-touch, ipad, user-interface

我正在编写一个具有同步功能的应用程序。每当应用程序发现两个对象之间存在冲突时，我想显示一些内容供用户选择正确的值。

我的第一个想法是使用`UIAlertView`，但是在我创建警报对象并显示它之后，程序会继续执行，并且最终可能会在用户有时间解决第一个冲突之前发现其他冲突。

我的问题是：有没有更好的方法？或者有没有办法停止应用程序并等待警报的选择？

非常感谢任何链接、进一步阅读或建议。感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:04:00.790

这取决于你如何设置它。您应该做的是在发现冲突时终止同步的执行，然后从 alertview 调用的方法重新启动它。

# spring - 使用 Spring XML

> ID：11366586
> 
> 赞同：0
> 
> 时间：2012-07-06T17:01:21.930
> 
> 标签：spring, spring-security

这是一个非常简单的问题，我正在学习一个教程，并且已经到了将密码编码器添加到我的 spring 安全性的地步，我有以下 XML ......

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/static/**" security="none" />
    <http use-expressions="true">
        <intercept-url pattern="/login" access="permitAll" />
        <intercept-url pattern="/*" access="isAuthenticated()" />
        <!-- <intercept-url pattern="/secure/extreme/**" access="hasRole('supervisor')" 
            /> -->
        <!-- <intercept-url pattern="/listAccounts.html" access="isAuthenticated()" 
            /> -->
        <!-- <intercept-url pattern="/post.html" access="hasAnyRole('supervisor','teller')" 
            /> -->
<!--        <intercept-url pattern="/*" access="denyAll" /> -->
        <form-login />
        <logout invalidate-session="true" logout-success-url="/"
            logout-url="/logout" />
    </http>

    <authentication-manager>
        <authentication-provider user-service-ref="customUserDetailsService">
          <password-encoder ref="passwordEncoder"/>
        </authentication-provider>
</authentication-manager>

<bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/>

</beans:beans> 
```

问题是`<bean class="org.spr..`底部的行错误地说安全命名空间不允许

我确实理解这一点，但是有没有一种方法可以使用该参考而无需添加`<security:`到其他所有内容中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:23:28.053

在您的 XML 声明中，您声明“security:”是默认命名空间：

```
xmlns="http://www.springframework.org/schema/security" 
```

你必须在安全命名空间中找不到的所有元素加上它们的前缀......在这种情况下，bean 在 beans 命名空间中......所以你需要说，beans:bean

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:25:45.513

本声明：

```
<bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/> 
```

应该：

```
<beans:bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/> 
```

# simple-framework - 如何在 simpleframework 中定义一个空元素

> ID：11366589
> 
> 赞同：2
> 
> 时间：2012-07-06T17:01:34.050
> 
> 标签：simple-framework

我对 simpleframework 很陌生这是我的 xml 文件：

```
<Resource>
  <attribute>
    <vegetable>
    <fruit xsi:nil="true"/>
    <flowers>
  </attribute>
</Resource> 
```

我使用简单框架的带注释的java类如下：Resource.java

```
 @Root (name="Resource")
public static class Attribute {

    @Element(required=false)
    public String vegetable;
    @Element( required=false)
    public String fruit;
    @Attribute (name="xsi:nil",  required=false)
            ---
    @Element(required=false)
    public String flowers;

  } 
```

我不确定在属性中写什么以使水果值为空。有人可以帮我吗？

# visual-c++ - 如何测试 Visual C++ Redistributable？

> ID：11366593
> 
> 赞同：0
> 
> 时间：2012-07-06T17:01:53.363
> 
> 标签：visual-c++, testing, windows-7, redistributable

我们公司正准备在全公司范围内升级到 Windows 7 64 位。运行升级项目的人员已经汇总了需要在每台机器上安装的应用程序列表，我和我的同事正在负责在新操作系统中测试所有这些应用程序。

我们的应用程序主列表中有三个不同版本的 Visual C++ Redistributable，但似乎没有人确切知道哪些应用程序使用这些库，他们希望我们对其进行测试。仅仅验证它们是否已安装是不够的。

我怀疑是否有任何好方法可以查看应用程序是否引用了 Visual c++ redist，但如果有，请告诉我。我想知道是否有任何可用的可视 C++“测试应用程序”可以让我从库中执行一些代码。或者也许我必须开发一些东西，但我是一个 C# 人，所以我不太熟悉。如果这被证明太难了，或者我可以很好地解释为什么我们不需要这样做，那么也许我可以说服项目经理这没有必要。

那么...有人可以建议我*测试*Visual C++ Redistributable 的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:20:22.343

[运行使用匹配工具链和“将库用作 DLL”( `/MD`) 编译器选项](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.100%29.aspx)构建的简短但非平凡的 C++ 应用程序应该足以确定库是否实际可用。

# parsing - 根据通过文件名解析收集的信息对文件进行分组

> ID：11366596
> 
> 赞同：0
> 
> 时间：2012-07-06T17:02:10.590
> 
> 标签：parsing, awk, ksh

我正在使用 KSH 编写一个流程。我将不得不浏览单个目录中的大量文件，并根据通过文件名解析收集的信息将这些文件组合在一起。问题是文件名中没有“分隔符”（例如句点或下划线）。

以下是其中一个文件的示例：0997dept4fec81ae.dcn

0997 是商店编号。文件首先需要按商店分组。我可以处理那部分。商店编号后面的文本是文件“类型”。我想我可以通过并解析出文件类型。接下来的 6 个字符确实是我需要解析的。我应该能够根据这 6 个字符将文件“分组”在一起。

那么，最好的方法是什么？一个警告：一旦我将这些文件组合在一起，我需要让它们首先处理每个商店最旧的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:00:02.670

似乎您可以使用 awk 拆分内容，例如：

```
ls *.dcn |awk 'BEGIN{FS=".";a[0]=0;a[1]=4;a[2]=9;a[3]=16}{for(i=0;i<3;i++){printf("%s\t",substr($1,a[i]+1,a[i+1]-a[i]));}printf("\n");}' 
```

这非常不雅，并假设您要分隔的字段具有恒定的宽度（否则您没有提供信息）。您可以在此处查找其他字符串操作函数：

[awk 字符串操作](http://docstore.mik.ua/orelly/unix/sedawk/ch09_02.htm)

在你用上面的东西分开之后，你可能可以将它传送到另一个脚本或命令并排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:55:49.423

我可能不会在这里添加任何东西，但我倾向于发现命令行 perl 对这样的事情很有用。

```
print "0997dept4fec81ae.dcn 
0997dept4fec81ae.dcz
0997dept5fec81ae.dcn 
0997dept5fec81ae.dcz" | perl -ne '
chomp ;

if (/\d+\w{4}(.{6})/) {
    my $group = $1 ;

    push @{$h{$group}}, $_ ;
}

END { 
    for (sort keys %h) {
        print "Group: $_\n" ;

        print "\t$_\n" for sort @{$h{$_}} ;
    } 
} ' 
```

显示了这个想法。

就像上一篇文章一样 - 你可以将它传递给类似的东西

查找命令 | perl 内联位 | 而读组文件名做

打印 "$Group, $Filename"

其他事情

完毕

这个 bod 的网页非常适合作为 cmd line perl 的指南：[http ://wwwx.cs.unc.edu/~jsterrel/articles/perl-cli.php](http://wwwx.cs.unc.edu/~jsterrel/articles/perl-cli.php)

但我想这取决于你发现 awk 或 perl 的清晰程度。

# c# - 创建 C# 类，在 DLL 内部是公共的，但在外部不可访问

> ID：11366599
> 
> 赞同：7
> 
> 时间：2012-07-06T17:02:29.717
> 
> 标签：c#, .net, class

对不起，如果这个问题令人困惑。我的项目中有一个公共静态类，我希望在我的应用程序中的任何地方都可以访问它。但是，当其他人在另一个项目中引用我的 DLL 时，我不希望此类暴露。

是否有可能做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T17:05:03.987

在类上使用 internal 修饰符而不是 public。`assembly:[InternalsVisibleTo("SomeOtherAssembly")]`如果您想让该类可被另一个特定的 DLL 访问，您也可以 make 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T17:05:41.260

使用链接中描述的[内部类。](http://msdn.microsoft.com/en-us/library/7c5ka91b%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T17:05:31.463

请阅读 MSDN 上的 C# 文档，或者如果您可以阅读一些关于 .net 基础的好书。您可以指定说明`internal`符以使类在命名空间内可见。

# c# - 你如何判断一个 Windows 窗体是否打开但在另一个窗口后面？

> ID：11366600
> 
> 赞同：5
> 
> 时间：2012-07-06T17:02:29.983
> 
> 标签：c#, .net, winforms, .net-2.0, form-control

无论窗体是最大化、最小化还是 FormWindowState 为 Normal，调用 Form.Visible 都将返回 true。

我想知道的是如何判断表单是否打开但“隐藏”在另一个应用程序的窗口后面。

如果是这样的话，我想把它放在前面，让用户真正看到它。

我尝试了 BringToFront() 方法，但没有奏效。我也尝试调用 Show() 方法，但如果表单位于另一个应用程序的窗口后面，它仍然是这样。

我发现该问题的唯一解决方法是将表单的 FormWindowState 设置为最小化/最大化然后正常，但这有点小技巧，看起来不太好。

有人能告诉我如何判断表格是否在另一个窗口后面以及如何将其带到前面吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T17:24:09.700

奇怪的。

`this.Activate()`应该做的伎俩。

你总是可以尝试一种“可怕的黑客方法”，我对传播这种方法感到内疚。但如果`this.Activate()`不起作用，为了测试，您可以尝试：

```
this.TopMost = true;
this.Focus();
this.BringToFront();
this.TopMost = false; 
```

我从未将其推荐为解决方案，但它可能会向您展示功能。如果上述代码起作用，我会更担心为什么`this.Activate()`不起作用。

至于检测窗口，您不能使用命令通过 C# 来检测它。检查以下问题的答案以获取更多信息： [如何检查窗口在 Windows 窗体中是否真的可见？](https://stackoverflow.com/questions/1649959/how-to-check-if-window-is-really-visible-in-windows-forms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:32:26.700

尝试在下面接线，

```
private void frmMyForm_Deactivate(object sender, EventArgs e)
    {
        // Raise your flag here.
    } 
```

通过连接以上事件，它会在表单最小化、部分/完全被另一个表单隐藏时告诉您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-06T17:19:16.530

好吧，如您所知，Windows 可能有也可能没有`Focus`. 如果一个窗口被聚焦，那么用户点击了它。你可以试试`Focused`楼盘。否则，我认为没有属性可以告诉您是否有另一个窗口在您的上方。您可以“给予”焦点，因此使用该方法
“弹出”窗口。`Focus()`

注意：一个窗口既可以聚焦*，也*可以位于另一个窗口下。
要确定您的窗口是否不在另一个窗口下，恐怕您必须更深入。

# objective-c - 检查浮点数的长度

> ID：11366601
> 
> 赞同：0
> 
> 时间：2012-07-06T17:02:32.067
> 
> 标签：objective-c, ios, xcode

我正在尝试检查浮点变量的长度（以数字为单位），但我不知道要使用的正确语法。我已经查过了，我找不到答案。

我的代码是一个简单的 if 语句：

```
if (currentNumber.digits < 3) {  //If the number has less that three digits, I don't know what to put here to get it working

    //code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:07:05.013

```
#include <math.h>

//...

int digits = (int) ceil(log10(number)); 
```

负数的额外逻辑留给读者作为练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:15:23.650

因为似乎没有正确的答案：

```
int digits = (int) ceil(log10(currentNumber)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:05:56.430

你可以用你的值创建一个 NSString 并检查它的长度：

```
NSString *stringNumber = [NSString stringWithFormat:@"%g", currentValue];
int length = stringNumber.length 
```

您可能可以从长度中减去 1 来考虑小数点。

[这是](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)文档的参考，`NSString`因此您可以检查这些方法的作用，以防您不理解它们。

编辑：如果你想要小数点之前的数字，你可以在我发布之后这样做：

```
[stringNumber substringToIndex:[stringNumber rangeOfString:@"."].location].length 
```

然后在程序的条件中使用这个值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:06:14.833

```
int digits = [[NSString stringWithFormat:@"%g", variable] length] 
```

# gcc - printf 中的长度修饰符参数 - GCC 4.7.0 MinGW

> ID：11366603
> 
> 赞同：0
> 
> 时间：2012-07-06T17:02:48.607
> 
> 标签：gcc, arguments, printf

我在 Windows 7 上。

我的问题与用于指定调用 printf 时要输出的数字类型的“百分​​比代码”有关。例如：%d 通常用于 'int's，%f 用于 'float's 等等。

在哪里可以找到这些的最终清单？我仔细阅读了 MinGW 文件夹中的所有 printf 文件，但无济于事。我也浏览了 GCC 手册，但似乎找不到我要找的东西。

此外，是否有特定名称或与我的问题主题相关的任何内容？如果不确切知道如何提出问题，很难在 Internet 上找到答案。

任何对相关资源的引用以供继续阅读也将受到高度赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:08:43.660

它们被称为格式字符串。`printf`您可以在手册页中找到您要查找的信息：http: [//linux.die.net/man/3/printf](http://linux.die.net/man/3/printf)

它是一个标准的 C 函数，因此 Linux 和 Windows 之间的一切基本相同。但是请注意指定每个标志/转换/等的标准，Windows 的 C 库仅支持 C89。

实际指定所有内容的地方是[C 规范](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)。

# grails - 在我的控制器中访问域类的特定属性

> ID：11366617
> 
> 赞同：0
> 
> 时间：2012-07-06T17:03:45.037
> 
> 标签：grails, grails-orm, grails-domain-class, grails-controller

嗨，我有一个程序，其中有两个域类。一个具有我的数据对象（例如人）的不同属性，另一个是用户域类，它检查登录 ID 和密码以查看用户是否有权对数据库进行更改。在我的“People”域类中，我有一个名为“createdID”的属性字段。我想将在数据库中创建新条目的人的登录 ID 设置为此字段。我已经能够从我的用户控制器类获取人员的登录 ID 到我的人员控制器类，但是如何将我的人员域类的 createdID 字段设置为此值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:12:30.363

```
def peopleInstance = new People()   
peopleInstance.createdId = <whatever value you want to set>
peopleInstance.save() 
```

# c# - 如何在 c# 的 set 语句中使用 i++ 运算符

> ID：11366623
> 
> 赞同：1
> 
> 时间：2012-07-06T17:04:13.757
> 
> 标签：c#

如果对属性进行 i++ 类型的操作，是否可以添加特殊方法？

这是我正在尝试做的一个例子。我知道这行不通，但这让您了解我在说什么。实际上，我正在使用两个内部组件，我想在 + 上增加一个，在 - 上增加另一个。

```
int mynum;
int yournum 
{
    get{ return mynum; }
    set{ mynum = value; }
    set++{ mynum = mynum + 5; return mynum; } //this is what I want to do
}
// elsewhere in the program
yournum++; //increases by 5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:06:13.750

听起来您想覆盖在`++`属性上调用时发生的行为`yournum`。如果是这样，那么对于您在示例中概述的代码，在 C# 中是不可能的。`++`运算符应该递增，并且`1`每个用户调用`yournum++`都会期望这种行为。默默地改成`5`肯定会导致用户混淆

通过使用自定义`++`运算符`+ 5`而不是`+1`. 例如

```
public struct StrangeInt
{
    int m_value;

    public StrangeInt(int value)
    {
        m_value = value;
    }

    public static implicit operator StrangeInt(int i)
    {
        return new StrangeInt(i);
    }

    public static implicit operator int(StrangeInt si)
    {
        return si.m_value;
    }

    public static StrangeInt operator++(StrangeInt si)
    {
        return si.m_value + 5;
    }
} 
```

如果您现在定义`yourname`为，`StrangeInt`那么您将获得您正在寻找的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:07:25.847

是但是（总是一个但是）...属性类型不能是`int`，您需要返回一个自定义代理类型，它隐式转换为 int 但覆盖运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:07:34.277

没有办法直接做到这一点。提供此功能的一种方法（如果您真的需要它）是提供您自己的类型，而不是`int`使用[运算符重载](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)来实现您需要的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:07:53.943

如果您想覆盖`++`整数运算符，那么不幸的是，这是不可能的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-06T17:11:54.177

创建自己的结构并重载运算符：

```
 public static YourType operator++(YourType t)
    {
            // increment some properties of t here
            return t;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-06T18:27:49.947

非常感谢 JaredPar[的出色回答](https://stackoverflow.com/a/11366656/258482)。如果有人感兴趣，这是最终结果。它是根据两个数字计算百分比，以便随着更多数字的出现而增加权重（因此得名）。

```
public struct Weight
{
    int posWeight;
    int negWeight;
    int Weight
    {
        get
        {
            if (posWeight + negWeight == 0) //prevent div by 0
                return 0;
            else return posWeight / (posWeight + negWeight);
        }
    }
    public static Weight operator ++(Weight num)
    {
        num.posWeight++;
        if (num.posWeight > 2000000) //prevent integer overflow
        {
            num.posWeight = num.posWeight / 2;
            num.negWeight = num.negWeight / 2;
        }
        return num;
    }
    public static Weight operator --(Weight num)
    {
        num.negWeight++;
        if (num.negWeight > 2000000) //prevent integer overflow
        {
            num.posWeight = num.posWeight / 2;
            num.negWeight = num.negWeight / 2;
        }
        return num;
    }
    public static explicit operator int(Weight num) 
    { // I'll make this explicit to prevent any problems.
        return num.Weight;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-06T18:14:14.587

不可能使用原始类型。我会做的是向 int 添加一个扩展方法——比如：

```
public static int plusFive(this int myInt)
{
    return myInt + 5;
} 
```

然后，要使用它，您可以执行以下操作：

```
int a,b;
a = 5;
b = a.plusFive(); 
```

# xml - 有xml循环引用可以吗？

> ID：11366624
> 
> 赞同：1
> 
> 时间：2012-07-06T17:04:16.683
> 
> 标签：xml, xsd

我正在创建一个 XML 模式，它跟踪有关文件源/来源的信息。

我想像下面的示例一样设置一个子父结构，这样我就不必跟踪元元素线性列表上的关系。

**这个可以吗？有什么理由不建议这样做吗？**，如果没有，正确的方法是什么？

# XML 结构

```
<meta> <!-- root -->
<info/>
    <sources>
        <source>
            <meta> <!-- circular reference -->
            <info/>
                <sources>
                    <source>
                           <meta>...</meta> <!-- circular reference -->
                    </source>
                </sources>
            </meta>     
        </source>
        <source>
            <meta> <!-- circular reference -->
            <info/>
                <sources>
                    <source>
                        <meta>...</meta> <!-- circular reference -->
                    </source>
                </sources>
            </meta>     
        </source>
    </sources>
</meta> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:43:19.713

我想你的意思是，一个元素可以有一个具有相同元素类型名称的后代吗？

当然; 许多 XML 词汇表使用递归元素。(X)HTML *div*元素是您可能熟悉的示例。

递归的优点通常是它简化了词汇表。主要缺点是它需要处理器（以及编写它们的人）来跟踪递归。在许多情况下这很容易，但在其他情况下可能会很尴尬。

您确实需要确保递归元素不需要作为其自身的子元素或后代；否则不可能有任何有效的有限文件。

# mysql - 不能使 LEFT 和 RIGHT JOIN 的 UNION 工作。（试图模拟外连接）

> ID：11366626
> 
> 赞同：1
> 
> 时间：2012-07-06T17:04:25.427
> 
> 标签：mysql, trac

### `At the bottom of the post you can find a simplify query of what I am trying to do`

我正在尝试创建一个查询来显示我们`TRAC`系统中所有用户的生产力。我需要知道他们输入的所有评论（每张票每周唯一）、触碰的票数、关闭的票数和修订数（接下来我还要添加此类修订中的文件数检查节点）。我创建了一个几乎可以满足我需要的查询，只要该人在那周至少触摸了一张票。我有用户在没有参考票证的情况下提交修订（错误，我知道，但我也需要抓住它们）并且我尝试添加`RIGHT JOIN`and an`UNION`来模拟`OUTER JOIN` MySQL 不支持的，而不是我收到此错误：

`1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 't LEFT JOIN ( SELECT CONCAT( ' at line 65`

如果我注释掉它的两个部分之一，`UNION`它就可以工作。

我已经尝试为表格提供不同的别名

```
SELECT
   t.`author` __group__,
   t.`month-week`,
   t.changes,
   t.tickets,
   t.closed,
   r.`revisions`
FROM
(
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(tc.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(tc.`time`/1000000))
         ) `month-week`,
         COUNT(IF(tc.`field` = "comment",tc.ticket,NULL)) `changes`,
         COUNT(DISTINCT tc.`ticket`) `tickets`,
         COUNT(DISTINCT IF(tc.`field` = "status" AND tc.`newvalue` = "closed",tc.`ticket`,NULL)) `closed`,
         tc.`author`
      FROM `ticket_change` tc
      WHERE
         tc.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         tc.`author`,
         YEARWEEK(FROM_UNIXTIME(tc.`time`/1000000))
   ) `t`
   LEFT JOIN
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(r.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(r.`time`/1000000))
         ) `month-week`,
         COUNT(DISTINCT r.`rev`) `revisions`,
         r.`author`
      FROM `revision` r
      WHERE
         r.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         r.`author`,
         YEARWEEK(FROM_UNIXTIME(r.`time`/1000000))
   ) `r` ON `t`.`month-week` = `r`.`month-week` AND `t`.`author` = `r`.`author`
)
UNION
(
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(tc.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(tc.`time`/1000000))
         ) `month-week`,
         COUNT(IF(tc.`field` = "comment",tc.ticket,NULL)) `changes`,
         COUNT(DISTINCT tc.`ticket`) `tickets`,
         COUNT(DISTINCT IF(tc.`field` = "status" AND tc.`newvalue` = "closed",tc.`ticket`,NULL)) `closed`,
         tc.`author`
      FROM `ticket_change` tc
      WHERE
         tc.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         tc.`author`,
         YEARWEEK(FROM_UNIXTIME(tc.`time`/1000000))
   ) `t`
   LEFT JOIN
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(r.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(r.`time`/1000000))
         ) `month-week`,
         COUNT(DISTINCT r.`rev`) `revisions`,
         r.`author`
      FROM `revision` r
      WHERE
         r.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         r.`author`,
         YEARWEEK(FROM_UNIXTIME(r.`time`/1000000))
   ) `r` ON `t`.`month-week` = `r`.`month-week` AND `t`.`author` = `r`.`author`
)

WHERE r.revisions > 0 OR t.closed > 0
ORDER BY
   t.`author`,
   t.`month-week` 
```

MySQL 服务器/客户端版本：5.0.33

--

```
SELECT
   t.fields,
   r.fields
FROM
(
   (
      SELECT    tc.fields
      FROM      tc
      WHERE     tc.field > NOW() - INTERVAL 2 MONTH
      GROUP BY  tc.field
   ) t
   LEFT JOIN
   (
      SELECT    rev.fields
      FROM      rev
      WHERE     rev.field > NOW() - INTERVAL 2 MONTH
      GROUP BY  rev.field
   ) r ON t.field = rev.field
)
UNION
(
   (
      SELECT    tc.fields
      FROM      tc
      WHERE     tc.field > NOW() - INTERVAL 2 MONTH
      GROUP BY  tc.field
   ) t
   RIGHT JOIN
   (
      SELECT    rev.fields
      FROM      rev
      WHERE     rev.field > NOW() - INTERVAL 2 MONTH
      GROUP BY  rev.field
   ) r ON t.field = rev.field
)
WHERE t.field > 0 OR r.field > 0
ORDER BY t.field 
```

希望能帮助到你

* * *

感谢您`pst`的帮助，我忘记`SELECT * FROM`在表格周围添加`UNION`

这是任何想要使用跟踪用户生产力的人的工作查询`TRAC`

```
SELECT
   `author` __group__,
   `month-week`,
   changes,
   tickets,
   closed,
   `revisions`
FROM
(
(
   SELECT
      t.`author`,
      t.`month-week`,
      t.changes,
      t.tickets,
      t.closed,
      r.`revisions`
   FROM
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(tc.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(tc.`time`/1000000))
         ) `month-week`,
         COUNT(IF(tc.`field` = "comment",tc.ticket,NULL)) `changes`,
         COUNT(DISTINCT tc.`ticket`) `tickets`,
         COUNT(DISTINCT IF(tc.`field` = "status" AND tc.`newvalue` = "closed",tc.`ticket`,NULL)) `closed`,
         tc.`author`
      FROM `ticket_change` tc
      WHERE
         tc.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         tc.`author`,
         YEARWEEK(FROM_UNIXTIME(tc.`time`/1000000))
      ORDER BY NULL
   ) `t`
   LEFT JOIN
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(r.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(r.`time`/1000000))
         ) `month-week`,
         COUNT(DISTINCT r.`rev`) `revisions`,
         r.`author`
      FROM `revision` r
      WHERE
         r.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         r.`author`,
         YEARWEEK(FROM_UNIXTIME(r.`time`/1000000))
      ORDER BY NULL
   ) `r` ON t.`month-week` = r.`month-week` AND t.`author` = r.`author`
) 
UNION
(
   SELECT
      t.`author`,
      t.`month-week`,
      t.changes,
      t.tickets,
      t.closed,
      r.`revisions`
   FROM
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(tc.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(tc.`time`/1000000))
         ) `month-week`,
         COUNT(IF(tc.`field` = "comment",tc.ticket,NULL)) `changes`,
         COUNT(DISTINCT tc.`ticket`) `tickets`,
         COUNT(DISTINCT IF(tc.`field` = "status" AND tc.`newvalue` = "closed",tc.`ticket`,NULL)) `closed`,
         tc.`author`
      FROM `ticket_change` tc
      WHERE
         tc.`time`> UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         tc.`author`,
         YEARWEEK(FROM_UNIXTIME(tc.`time`/1000000))
      ORDER BY NULL
   ) `t`
   RIGHT JOIN
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(r.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(r.`time`/1000000))
         ) `month-week`,
         COUNT(DISTINCT r.`rev`) `revisions`,
         r.`author`
      FROM `revision` r
      WHERE
         r.`time`> UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         r.`author`,
         YEARWEEK(FROM_UNIXTIME(r.`time`/1000000))
      ORDER BY NULL
   ) `r` ON t.`month-week` = r.`month-week` AND t.`author` = r.`author`
) 
) mtb
WHERE revisions > 0 OR closed > 0
ORDER BY
   `author`,
   `month-week` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T22:03:09.850

答案就在问题本身中，但在这里以防其他人需要它：

```
SELECT
   `author` __group__,
   `month-week`,
   changes,
   tickets,
   closed,
   `revisions`
FROM
(
(
   SELECT
      t.`author`,
      t.`month-week`,
      t.changes,
      t.tickets,
      t.closed,
      r.`revisions`
   FROM
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(tc.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(tc.`time`/1000000))
         ) `month-week`,
         COUNT(IF(tc.`field` = "comment",tc.ticket,NULL)) `changes`,
         COUNT(DISTINCT tc.`ticket`) `tickets`,
         COUNT(DISTINCT IF(tc.`field` = "status" AND tc.`newvalue` = "closed",tc.`ticket`,NULL)) `closed`,
         tc.`author`
      FROM `ticket_change` tc
      WHERE
         tc.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         tc.`author`,
         YEARWEEK(FROM_UNIXTIME(tc.`time`/1000000))
      ORDER BY NULL
   ) `t`
   LEFT JOIN
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(r.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(r.`time`/1000000))
         ) `month-week`,
         COUNT(DISTINCT r.`rev`) `revisions`,
         r.`author`
      FROM `revision` r
      WHERE
         r.`time` > UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         r.`author`,
         YEARWEEK(FROM_UNIXTIME(r.`time`/1000000))
      ORDER BY NULL
   ) `r` ON t.`month-week` = r.`month-week` AND t.`author` = r.`author`
) 
UNION
(
   SELECT
      t.`author`,
      t.`month-week`,
      t.changes,
      t.tickets,
      t.closed,
      r.`revisions`
   FROM
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(tc.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(tc.`time`/1000000))
         ) `month-week`,
         COUNT(IF(tc.`field` = "comment",tc.ticket,NULL)) `changes`,
         COUNT(DISTINCT tc.`ticket`) `tickets`,
         COUNT(DISTINCT IF(tc.`field` = "status" AND tc.`newvalue` = "closed",tc.`ticket`,NULL)) `closed`,
         tc.`author`
      FROM `ticket_change` tc
      WHERE
         tc.`time`> UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         tc.`author`,
         YEARWEEK(FROM_UNIXTIME(tc.`time`/1000000))
      ORDER BY NULL
   ) `t`
   RIGHT JOIN
   (
      SELECT
         CONCAT(
            MONTH(FROM_UNIXTIME(r.`time`/1000000)),
            '-',
            WEEK(FROM_UNIXTIME(r.`time`/1000000))
         ) `month-week`,
         COUNT(DISTINCT r.`rev`) `revisions`,
         r.`author`
      FROM `revision` r
      WHERE
         r.`time`> UNIX_TIMESTAMP(NOW()-INTERVAL 2 MONTH)*1000000
      GROUP BY
         r.`author`,
         YEARWEEK(FROM_UNIXTIME(r.`time`/1000000))
      ORDER BY NULL
   ) `r` ON t.`month-week` = r.`month-week` AND t.`author` = r.`author`
) 
) mtb
WHERE revisions > 0 OR closed > 0
ORDER BY
   `author`,
   `month-week` 
```

# javascript - 将类添加到链接单击并添加延迟重定向（淡出页面）

> ID：11366627
> 
> 赞同：2
> 
> 时间：2012-07-06T17:04:40.760
> 
> 标签：javascript, jquery, transition, fade, css-transitions

我正在尝试添加页面转换。使用 WebFont 加载器和 CSS 动画完成淡入过渡。我想要的是`html`在链接单击时向标签添加一个类并等待 1 秒（对于 CSS fadeOut 动画），然后重定向到链接。

这是[此 jQuery 代码](http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/)的修改版本：

```
$(document).ready(function() {

  $("a").click(function(event){
    event.preventDefault();
    redirectLink = this.href;
    $("body").fadeOut(1000, redirectToLink);      
  });

  function redirectToLink() {
    window.location = redirectLink;
  }
}); 
```

我已经对其进行了自定义，但我认为它存在问题`.delay(1000, redirectToLink)`并且无法正常工作。我对 JS 了解不多，因此非常感谢您的帮助。

```
$(document).ready(function() {

  $("a").click(function(event){
    event.preventDefault();
    redirectLink = this.href;
    $("html").addClass('wf-next').removeClass('wf-active wf-inactive wf-loading').delay(1000, redirectToLink);      
  });

  function redirectToLink() {
    window.location = redirectLink;
  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:13:24.703

.delay() 旨在与动画一起使用，但您已将动画移动到 css 过渡。我会像这样使用 setTimeout ：

```
 $(document).ready(function() {

    $("a").click(function(event){
      event.preventDefault();
      redirectLink = this.href;
      $("html").addClass('wf-next').removeClass('wf-active wf-inactive wf-loading');
      setTimeout(function(){
        redirectToLink(redirectLink);
      }, 1000);
    });

    function redirectToLink(url) {
      window.location = url;
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:07:59.113

尝试这个：

```
 $(document).ready(function() {

    $("a").click(function(event){
      event.preventDefault();
      redirectLink = this.href;
      $("html").addClass('wf-next').removeClass('wf-active wf-inactive wf-loading').fadeIn(1000, function(){ redirectToLink(redirectLink) } );      
    });

    function redirectToLink(url) {
      window.location = url;
    }
  }); 
```

# ruby-on-rails-3 - 防止 Rails 生产日志交错来自不同请求的日志记录的最佳方法是什么？

> ID：11366635
> 
> 赞同：4
> 
> 时间：2012-07-06T17:04:59.560
> 
> 标签：ruby-on-rails-3, logging, ruby-on-rails-3.2

在 rails 3.2 之前，默认情况下会阻止这种情况。对于 rails 3.2，似乎没有明确的解决方案。在提交更改的评论中，Aaron 建议使用进程 pid 和/或请求 uuid 标记日志行，这不满足我们的运营人员。我已经看到了一些随机的解决方案，但目前还不清楚它们解决问题的效果如何。这似乎是每个人都会遇到的一个相当平庸的问题。其他人推荐什么解决方案？其他人是否只是依靠 NewRelic 来记录他们关心的数据？

[亚伦的承诺](https://github.com/rails/rails/commit/04ef93dae6d9cec616973c1110a33894ad4ba6ed)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:09:16.767

我们最终编写了一个稍微可怕的补丁来恢复旧的行为：

```
config.after_initialize do

  # Reverse the deprecation of flush in BufferedLogger
  module ActiveSupport
    class BufferedLogger
      def flush
        @log_dest.flush
      end
      def respond_to?(method, include_private = false)
        super
      end
    end
  end

  # Let the OS buffer the log
  Rails.logger.instance_variable_get(:@logger).instance_variable_get(:@log_dest).sync = false
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T12:57:03.030

更多信息：[https ://github.com/rails/rails/issues/5388](https://github.com/rails/rails/issues/5388)

上面的答案没有在每个请求之后刷新日志行（Rails 3.2.18）。所以我使用了[基于这篇文章](http://developer.zendesk.com/blog/2013/09/23/buffer-rails3-logs-for-uninterleaved-requests/)的初始化程序：

```
class NonInterleavedLoggingMiddleware
  def initialize(app, options = {})
    @log = Rails.logger
      .instance_variable_get(:@logger)
      .instance_variable_get(:@log)
      .instance_variable_get(:@logdev)
      .instance_variable_get(:@dev)
    @log.sync = false
    @app = app
  end

  def call(env)
    @app.call(env)
  ensure
    @log.flush # Rails.logger.flush has no effect / is deprecated
  end
end

YourAppName::Application.config.middleware.insert_before(Rails::Rack::Logger, NonInterleavedLoggingMiddleware) 
```

# mobile - 随着浏览器窗口缩小，标题不会溢出省略号

> ID：11366641
> 
> 赞同：0
> 
> 时间：2012-07-06T17:05:17.220
> 
> 标签：mobile, css, overflow, whitespace

[http://jsbin.com/oqotew/edit#html,live](http://jsbin.com/oqotew/edit#html,live)

如果您在浏览器窗口较宽的情况下访问上面的链接，则文本将显示在图像的右侧。如果缩小窗口，文本会跳到图像下方。

目标：我希望文本始终保留在图像的右侧，并在窗口变得太窄而无法包含它时溢出“...”，而不是将其撞到图像下方。那可能吗？

我的 CSS 看起来像这样：

```
img { float: left; margin-right: 10px; }
.details { float: left; }
a { display: block; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; color: #39C; font-size: 16px; text-decoration:none; } 
```

html:

```
<img src="http://placehold.it/130x65" />
<div class="details">
  <a href="#">Kind of a long title for a url. This should overflow with ellipsis if the browser gets narrower.</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:12:06.203

尝试从`.details`

```
img { float: left; margin-right: 10px; }
a { display: block; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; color: #39C;
font-size: 16px; text-decoration:none; } 
```

更新[的演示](http://jsbin.com/enivun/edit#html,live)

# javascript - 如何在 setInterval 和 setTimeout 函数中更改“this”的范围

> ID：11366643
> 
> 赞同：2
> 
> 时间：2012-07-06T17:05:23.820
> 
> 标签：javascript, object, settimeout, setinterval

如何使用`this`inside of`setInterval`和`setTimeout`调用？

我想像这样使用它：

```
function myObj() {
  this.func = function(args) {
    setTimeout(function() { 
      this.func(args);
    }, 1000);
  }
} 
```

前段时间我是这样为`.onclick`事件做的：

```
this.click = function(func) {
  this.elem.onclick = (function(func, obj) {return function(){func.apply(obj)} })(func,this);
}; 
```

但我不知道如何为`intervals`and做到这一点`timeouts`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T17:08:02.407

最简单的方法是保存`this`到本地。调用和回调`self`的上下文不会更改本地。相反，它将保持原始值`setInterval``setTimeout``this`

```
function myObj() {
  var self = this;
  this.func = function(args) {
    setTimeout(function() { 
      self.func(args);
    }, 1000);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T12:12:25.817

**从理论上讲**，您可以继续使用`this`无处不在并避免`that`等，`self`如下所示：

```
setTimeout.call(this, function() { 
  this.func(args);
}, 1000); 
```

...或者...

```
setTimeout.apply(this, [function() { 
  this.func(args);
}, 1000]); 
```

...**但是**，这样做会在 Firefox 22+ 中导致以下[错误：](https://stackoverflow.com/questions/16846445/ns-error-xpc-bad-op-on-wn-proto-exception-in-firefox-22)

> **NS_ERROR_XPC_BAD_OP_ON_WN_PROTO** : WrappedNative 原型对象的非法操作

* * *

如果您使用的是 jQuery 1.4+，则可以通过使用`jQuery.proxy()`而不是`call`或来避免这种情况`apply`：

```
setTimeout( $.proxy(function() {
  this.func(args);
}, this), 50); 
```

[在 this other answer](https://stackoverflow.com/a/8800171/568458)有[更多细节，以及使用**原生 ECMAScript 5**、**Underscore.js**和 **prototype.js**](https://stackoverflow.com/a/8800171/568458)的替代方案。

# javascript - 有什么方法可以检测 Swiffy 动画何时完成？

> ID：11366652
> 
> 赞同：5
> 
> 时间：2012-07-06T17:05:49.023
> 
> 标签：javascript, flash, dom-events, google-swiffy

Swiffy 动画完成后会触发事件吗？或者有没有办法获取当前帧与总帧？

如另一篇 Stack Overflow 帖子中所述，我尝试对 runtime.js 进行去最小化，但我无法破译它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T21:11:53.387

对于遇到此帖子的任何人，我都找到了解决方案。我最终在我的 FLA 结束时使用了 getURL() 调用。它看起来像这样：

```
getURL("javascript:animationIsComplete();"); 
```

将您想要的任何内容放入 animationIsComplete() 函数中，现在它将在 Swiffy 动画结束时触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T23:07:39.680

Flash时间线框架脚本：

```
 import flash.net.navigateToURL;
   import flash.net.URLRequest;

   navigateToURL(new URLRequest("javascript:document.dispatchEvent(new CustomEvent('animation_done', {detail:{name:'sparkle'}}))"), "_self");
   stop(); 
```

Javascript：

```
 document.addEventListener("animation_done", animationDone, false);

 function animationDone(e /* Event */){
     console.log('animation done ' + e.detail.name);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:25:18.980

万一其他人偶然发现了这个问题并且正在使用 ActionScript 3 - 最佳答案对他们不起作用，因为 getURL() 函数仅在 ActionScript 2 和更早版本中可用。

对 ActionScript 3 使用以下内容：

```
navigateToURL(new URLRequest("javascript:your_function()"), "_self"); 
```

将其作为动作添加到 Flash 中动画的最后一帧，然后使用 Swiffy 进行转换。然后，您可以从 Swiffy 获取输出并将其处理到网页中。只需确保在显示 Swiffy 动画的页面源中的某处定义 JavaScript 函数即可。

# objective-c - 如何从另一个 NSString 中删除 NSString 的文本

> ID：11366660
> 
> 赞同：0
> 
> 时间：2012-07-06T17:06:16.700
> 
> 标签：objective-c, ios, nsstring

例如：

```
NSString *sentence = @"My name is Roman";
NSString *name  = @"Roman"; 
```

有没有办法从字符串中删除`name`的文本？`sentence`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T17:10:03.467

```
NSString* result = [sentence stringByReplacingOccurrencesOfString:name withString:@""]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T17:11:01.180

是的

```
sentence = [sentence stringByReplacingOccurrencesOfString:name withString:@""]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:33:16.537

或者，您可以`substringWithRange:`像这样使用：

> NSString *finalString = [句子 substringWithRange:NSMakeRange(3, 16)];

# ruby-on-rails - 祖先 - 如何让所有父母都没有孩子？

> ID：11366663
> 
> 赞同：2
> 
> 时间：2012-07-06T17:06:21.843
> 
> 标签：ruby-on-rails, ancestry

我这样做是这样的：

```
@disabled_options = []
Category.where('ancestry is NULL').each do |cat|
  @disabled_options << cat.id if cat.has_children?
end 
```

有没有更优雅的方法让所有父母都没有孩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-09T13:10:06.890

这个单线可以帮助你。

```
Category.where(id: Category.pluck(:ancestry).compact.map { |e| e.split('/') }.flatten.uniq) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T18:32:39.043

```
Category.where("id IN (SELECT parent_id FROM categories)") 
```

假设`parent_id`是一个指向父类别的字段。

这将选择那些使用“parent_id”指向的类别，所以如果有一个孩子，孩子将设置“parent_id”，因此“parent_id”引用的类别有孩子。

# c# - 如何在 C# .NET 中为子类设置特定属性？

> ID：11366664
> 
> 赞同：2
> 
> 时间：2012-07-06T17:06:30.277
> 
> 标签：c#, .net

首先，让我声明一下我是 .NET 的新手，所以如果我的问题太天真或答案太简单，我提前道歉。我做了一些研究并测试了不同的东西，但我无法让它发挥作用。我正在尝试做的事情：

我的表单中有很多不同的工具提示，我希望它们具有相同的属性。例如：

```
mySampleTooltip.ShowAlways = true;
mySampleTooltip.IsBalloon = true;
mySampleTooltip.AutomaticDelay = 750;
mySampleTooltip.AutoPopDelay = 32767; 
```

我认为可能有一个更优雅的解决方案，而不是对每个工具提示都这样做并粘贴代码 100 次。我的想法是创建一个名为 PermaToolTip 的类 ToolTip 的子类，并从这个特定的类创建对象（顺便说一句，这是正确的方法还是有更好的方法？）。

我的代码如下所示：

```
public class PermaToolTip : ToolTip
{
    private bool _ShowAlways;
    private bool _IsBalloon;
    private int _AutomaticDelay;
    private int _AutoPopDelay;

    // SET ShowAlways Property for subclass
    public bool ShowAlways
    {
        get
        {
            return _ShowAlways;
        }
        set
        {
            _ShowAlways = true;
        }
    }
    // SET IsBalloon Property for subclass
    public bool IsBalloon
    {
        get
        {
            return _IsBalloon;
        }
        set
        {
            _IsBalloon = true;
        }
    }
    // SET AutomaticDelay Property for subclass
    public int AutomaticDelay
    {
        get
        {
            return _AutomaticDelay;
        }
        set
        {
            _AutomaticDelay = 750;
        }
    }
    // SET AutoPopDelay Property for subclass
    public int AutoPopDelay
    {
        get
        {
            return _AutoPopDelay;
        }
        set
        {
            _AutoPopDelay = 32767;
        }
    }
} 
```

但它不起作用。具体来说：

1) 我在属性名称下方看到一条绿线和一条警告：警告：“ResellerRatingsGUI.PermaToolTip.ShowAlways”隐藏了继承的成员“System.Windows.Forms.ToolTip.ShowAlways”。如果打算隐藏，请使用 new 关键字。

2) 我实例化了 PermaToolTip 类的一个对象，但它没有我想要的属性。

回复评论：它不是用户定义的控件。它是 .NET 控件。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T17:13:10.367

基类已经具有这些属性。做你正在做的事情应该会导致编译器抱怨（因为你隐藏了基类成员而不使用`new`来表示你想要隐藏它）。

您不需要创建新属性 - 只需在构造函数中设置基类*默认值即可：*

```
public class PermaToolTip : ToolTip
{
     public PermaToolTip()
     {
        // Define defaults differently now
        this.ShowAlways = true;
        this.IsBalloon = true;
        this.AutomaticDelay = 750;
        this.AutoPopDelay = 32767;
     }
} 
```

这将导致您的类使用`ToolTip`属性，但具有不同的默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:28:56.727

首先，正如另一个答案中所述，您的子类不应具有与基类中的成员同名的成员，除非您的意图是覆盖他们的行为。在这种情况下，您应该只覆盖**虚拟**或**抽象**成员。

从设计的角度来看，我会建议一种不同的方法。看来子类的唯一目的是创建一个填充有默认值的 ToolTip 实例。不必使用继承来完成此操作。相反，您应该考虑某种帮助器，它会为您提供一个填充有默认值的 ToolTip 实例。这样你就不会被你不一定想要或不需要的具体类型所困。

示例类：

```
public static class DefaultToolTip 
{
  public static void Create()
  {
    ToolTip tip = new ToolTip();
    tip.ShowAlways = true;
    tip.IsBalloon = true;
    tip.AutomaticDelay = 750;
    tip.AutoPopDelay = 32767;
    return tip;
  }
} 
```

用法：

```
ToolTip toolTip = DefaultToolTip.Create(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:17:29.397

创建您的工具提示，然后使用 SetToolTip，这样您就不需要 100 个，只需要少数甚至一个。

直接来自 MSDN

```
 private void Form1_Load(object sender, System.EventArgs e)
  {
     // Create the ToolTip and associate with the Form container.
     ToolTip toolTip1 = new ToolTip();

     // Set up the delays for the ToolTip.
     toolTip1.AutoPopDelay = 5000;
     toolTip1.InitialDelay = 1000;
     toolTip1.ReshowDelay = 500;
     // Force the ToolTip text to be displayed whether or not the form is active.
     toolTip1.ShowAlways = true;

     // Set up the ToolTip text for the Button and Checkbox.
     toolTip1.SetToolTip(this.button1, "My button1");
     toolTip1.SetToolTip(this.checkBox1, "My checkBox1");
  } 
```

# c# - 在 C# 示例中调用基类

> ID：11366665
> 
> 赞同：0
> 
> 时间：2012-07-06T17:06:30.073
> 
> 标签：c#, inheritance, constructor

考虑下面的代码：

```
public class Analyzer {
        protected Func f,fd;
        public delegate double Func( double x );
        public Analyzer( Func f, Func fd ) {
            this.f = f;
            this.fd = fd;
        }
        public Analyzer( Func f ) {
            this.f = f;
            fd = dx;
        }
        public Analyzer( ) { }
        protected double dx( double x ) {
            double h = x / 50.0;
            return ((f(x + h) - f(x - h)) / (2 * h)); 
        }
        public double evaluate(double x) {
            return f( x );
        }
        public double evaluateDerived( double x ) {
            return fd( x );
        }
        public double solve(double x0) {
            double eps = 1, x1 = f(x0), x2 = fd(x0);
            do x0 = x0 - ( f( x0 ) / fd( x0 ) );
            while ( f( x0 ) > eps );
            return x0;
        }
    }
    public class PolyAnalyzer : Analyzer {
        private double[] coefs;
        public PolyAnalyzer( params double[] coef ) {
            coefs = coef;
            f = poly;
            fd = dx;
        }
        private double poly( double x ) {
            double sum = 0;
            for ( int i = 0 ; i < coefs.Length ; i++ ) {
                sum += coefs[i] * Math.Pow(x,coefs.Length-1-i);
            }
            return sum;
        }
    } 
```

我试图想办法将 poly 发送到构造函数 Analyser(Func f)，这里有没有办法做到这一点？尝试过类似的东西：

```
public PolyAnalyzer( params double[] coef ) : base(new Func(poly)){
            coefs = coef;
        } 
```

但它不编译...编译错误:: 非静态字段、方法或属性“成员”需要对象引用

Id appriciate 一个很好解释的答案，而不仅仅是它是如何完成的...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:26:44.720

你得到的错误：

```
An object reference is required for the non-static field, method, or property... 
```

这是由于 poly 是您正在创建的对象的成员，它取决于`PolyAnalyzer`类中的变量。

通常，您可以通过添加一个`object reference`类似它调用的 (ie `new Func(this.poly)`) 来解决此问题，但是当前类 ( `this`) 的实例在上下文中尚不可用。（您的实例尚未完全实现）。

您可以像在`PolyAnalyzer`构造函数中所做的那样，自己设置值，这将是我的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:30:00.553

在我看来，您正在尝试将面向对象的继承和函数式编程结合起来，但在这种情况下效果不佳。

我会写

```
public abstract class Analyzer {
    protected abstract double Fd(double x);
    // ...
} 
```

并在后代类中覆盖它（如果您想坚持使用 OO 层次结构）。这是经典的策略模式实现。

要解决您的评论，如果您希望 Analyzer 可实例化，请使用：

```
public class Analyzer {
    protected virtual double Fd(double x)
    {
        // provide default implementation
    }
    // ...
} 
```

如果你想坚持函数式编程，我会使用组合而不是继承：

```
// Does not descend from Analyzer. Could implement IAnalyzer.
public class PolyAnalyzer {
    private readonly Analyzer analyzer;
    private double[] coefs;

    public PolyAnalyzer( params double[] coef ) {
        coefs = coef;

        analyzer = new Analyzer(poly);
    }

    public double evaluate(double x) {
        return analyzer.evaluate(x);
    }

    // Implement evaluateDerived and solve through delegation

    private double poly( double x ) {
        double sum = 0;
        for ( int i = 0 ; i < coefs.Length ; i++ ) {
            sum += coefs[i] * Math.Pow(x,coefs.Length-1-i);
        }
        return sum;
    }
} 
```

或者，如果您接受@Reed Copsey 的建议并切换到`Func<double, double>`，您可以在工厂方法中使用闭包：

```
public static class PolyAnalyzerFactory {
    public static Analyzer Create( params double[] coef ) {
        var coefs = coef.ToArray();  // protect against mutations to original array

        return new Analyzer(
            x =>
            {
                double sum = 0;
                for ( int i = 0 ; i < coefs.Length ; i++ ) {
                    sum += coefs[i] * Math.Pow(x,coefs.Length-1-i);
                }
                return sum;
            });
    }
} 
```

# java - 设置微调器的可见性

> ID：11366666
> 
> 赞同：0
> 
> 时间：2012-07-06T17:06:32.503
> 
> 标签：java, android, spinner, visibility

所有-我有两个并排的微调器。我希望这样，如果选择了 spinner1 中的项目，则 spinner2 是不可见的，反之亦然。换句话说，用户应该只能选择一个微调器。这是我关于微调器的代码：

```
 //Spinner 1
    List<String> spin1= new ArrayList() ;
    spin1.add("Select");
    spin1.add("1");
    spin1.add("2");
    spin1.add("3" );
    spin1.add("4");

    Spinner spinner1 = (Spinner) findViewById(R.id.houses);
    ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(this,
                R.layout.spinnerlayout, spin1);

    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1.setAdapter(adapter1);

    //Spinner 2
    List<String> spin2 = new ArrayList() ;
    spin2.add("Select");
    spin2.add("1");

    Spinner spinner2 = (Spinner) findViewById(R.id.hotels);
    ArrayAdapter<String> adapter2 = new ArrayAdapter<String>(this,
                R.layout.spinnerlayout, spin2);

    adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2.setAdapter(adapter2); 
```

欢迎使用示例代码。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:11:13.327

这个想法很简单：

```
 spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
            if(position != 0)
                spinner2.setVisibility(View.GONE);
            else
                spinner2.setVisibility(View.VISIBLE);
        }

        public void onNothingSelected(AdapterView<?> parent) {}
    }); 
```

反之亦然`spinner2`。您需要更改 和 的定义，`spinner1`以便`spinner2`它们对整个班级可见：

```
public class ... {
    Spinner spinner1;
    Spinner spinner2;

    @Override
    public void onCreate() {
        spinner1 = ... 
```

# c# - 在 Visual C# 中需要一个类似 Java 的 StringTokenizer hasTokens() 方法的方法

> ID：11366673
> 
> 赞同：0
> 
> 时间：2012-07-06T17:06:58.280
> 
> 标签：c#, stringtokenizer

我在这里进行了一些搜索，但找不到我确切需要的答案。我有一个结构，其中包含我需要发送到 Web 服务的搜索参数，而我要填写的字段之一是列表。编写原始代码来填充此参数。当它是 string[] 类型时，它看起来像这样，改变了变量名，

```
 searchParams.someParam= (new List<string>(txtboxInput.Text.Split(';'))).ToArray(); 
```

（ ; 界定了用户可以输入的不同选项）

所以我想用 List.Add() 填充 List '同时'有可用的令牌。我搜索了 .NET 中是否有类似 StringTokenizer 的实现。大多数答案都说使用 string.Split，但没有提及 Java 的 StringTokenizer 也具有的其他有用方法。

感谢您的任何深思熟虑的答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:11:34.550

从问题来看，您似乎只想：

```
List<string> list = txtboxInput.Text.Split(';').ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:18:58.133

**我在这里看到了一些我认为是您正在寻找的东西（这更多****的**是关于如何**使用**`Split()`. 由.返回**`nextToken``hasMoreTokens`**`Split`

```
// From the question searchParams.someParam appears to be an array of strings, so you
// can simplify to this vs what is in your above question
searchParams.someParam = txtboxInput.Text.Split(';');

// Looping through and adding to a list of string
var myTokens = txtboxInput.Text.Split(';');
var myTokenList = new List<string>();
for(int index = 0; index < myTokens.length; index++) {
  myTokenList.Add(myTokens[index]);
}

// Total amount of tokens returned
var length = myTokens.length; 
```

此外，RegEx 在这里没有多大意义，因为您只是在拆分字符串。根据字符串的大小，您可能可以获得性能增强，但最终拆分更简单。如果您没有性能问题，那么我不会改变您目前所拥有的。

# python - my_thread_global_end() 中的 Python 错误：xxx 线程未退出

> ID：11366674
> 
> 赞同：0
> 
> 时间：2012-07-06T17:07:04.747
> 
> 标签：python, multithreading

收到此错误。在带有 python 2.7 的 linux 64 位上

```
 Error in my_thread_global_end(): xxx threads didn't exit 
```

在代码末尾尝试过，但对打开的线程一无所知。关闭所有连接...

```
 import pdb; pdb.set_trace() 
```

# jsf - 未定义 targetAttributeName 属性

> ID：11366676
> 
> 赞同：0
> 
> 时间：2012-07-06T17:07:06.050
> 
> 标签：jsf, jsf-2, composite-component

为什么我的复合组件中无法识别 targetAttributeName

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:cc="http://java.sun.com/jsf/composite">

    <!-- INTERFACE -->
    <cc:interface componentType="myComponentExample">
      <cc:targetAttributeName..../>
    </cc:interface>
.. 
```

我看到这个： **“组件库复合组件不包含组件 targetAttributeName”**

如我所见，我没有 targetAttributeName 和 clientBehaviour 属性，为什么？

**我正在使用 Netbeans 7.1、MyFaces 2.1.8 和 TomEE 1.0（主干更新）**

这个属性是从 JSF 2.1 开始的，但我不能使用它

pom.xml：

```
<dependency>
            <groupId>org.apache.myfaces.core</groupId>
            <artifactId>myfaces-api</artifactId>
            <version>2.1.8</version>
            <scope>provided</scope>
        </dependency>

         <!--Apache MyFaces-->
        <dependency>
            <groupId>org.apache.myfaces.core</groupId>
            <artifactId>myfaces-impl</artifactId>
            <version>2.1.8</version>
            <scope>provided</scope>
        </dependency> 
```

我只能看到这个属性：

*   姓名
*   班级
*   默认
*   显示名称
*   专家
*   ID
*   方法签名
*   父母
*   首选
*   渲染
*   渲染类型
*   必需的
*   简短的介绍
*   目标
*   短暂的
*   类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:23:32.187

这个标签根本不存在。您很可能会混淆作为`<cc:attribute>`单独标签的属性。

```
<cc:attribute targetAttributeName="..." /> 
```

要了解 JSF 2.1 中可用的所有标签（和属性！），请访问[VDL 文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)。

# vb.net - VB.NET 创建了一个包含 Web 浏览器的表单实例~如何访问在新实例上完成的文档？

> ID：11366682
> 
> 赞同：0
> 
> 时间：2012-07-06T17:07:41.587
> 
> 标签：vb.net, browser

我已经创建了一个带有 Web 浏览器的表单。我创建了一个包含 Web 浏览器的表单实例。

如何编辑在新实例上完成的 Web 浏览器文档？

谢谢

-编辑

我正在做的是创建一个表单，其中包含我在对象中想要的所有元素。网页浏览器、按钮等。

我正在创建一个正在创建对象的表单的实例。从我读到的每当你创建一个对象的实例时，你也可以调用创建它的所有项目的实例，比如网络浏览器。

我可以在新表单上设置网络浏览器的导航，但我无法访问新表单的网络浏览器已完成部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T23:03:25.190

如果您的意思是如何将事件处理程序与全新表单中的特定 webbrowser 实例相关联，请在设计器中将 webbrowser 设置为 PUBLIC，然后您将能够看到该实例，因此也可以看到它的所有事件和属性。请注意，您必须驻留在创建表单以访问 webBrowser 的同一线程上，因此您可能必须 1）创建一个线程，2）让该线程实例化表单（其中包含公共 webbrowser），3）访问webbrowser 形成相同的线程来设置 DocumentCompleted 事件的处理程序。

如果这与您的意图不符，请重新措辞该问题，因为这有点难以理解您的目标。

干杯

# ios - 删除 CGContextAddPath 之后的路径

> ID：11366689
> 
> 赞同：2
> 
> 时间：2012-07-06T17:08:01.563
> 
> 标签：ios, cocoa, cgcontext

我想知道在我使用 CGContextAddPath 添加它之后是否有办法从我的上下文中删除它，这样我的绘图命令就不再局限于路径尺寸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-30T20:22:47.920

您应该使用`CGContextBeginPath(...)`从指定上下文中删除先前添加的路径。

讨论[Apple 文档](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGContext/index.html#//apple_ref/c/func/CGContextBeginPath)中的方法：

> 一个图形上下文在任何时候都只能有一个使用的路径。如果调用此函数时指定的上下文已经包含当前路径，Quartz 会丢弃旧路径以及与之关联的任何数据。
> 
> 当前路径不是图形状态的一部分。因此，保存和恢复图形状态对当前路径没有影响。

类似于下面：

```
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextAddPath(context, ellipsePath);
CGContextDrawPath(context, kCGPathFill);

CGContextBeginPath(context);

CGContextAddPath(context, strokePath);
CGContextDrawPath(context, kCGPathStroke); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:37:15.987

一旦路径位于上下文中，就无法删除它。只需在没有特定路径的情况下重绘即可。

# c# - 跨 dll 中的编译指示使用

> ID：11366690
> 
> 赞同：0
> 
> 时间：2012-07-06T17:08:01.820
> 
> 标签：c#, pragma

我有一个调用 dllB 方法的主程序 A。

dllB 是在发布模式下构建的。根据程序 A 的构建模式（发布/调试），应该适当地返回结果，但它总是返回“releaseMode”。

那么有没有一种方法可以让我在发布模式下引用 dllB 并根据主程序首选项（发布/调试）获得结果。

```
Program A---
main ()
{
  var dllbObj = new dllB();
  var response = dllObj.CallMethod();
 //Release mode should return "releaseMode" 
 //and debug mode should return "debugMode"
}

dll B---
public string CallMethod()
{
 string res;
#if DEBUG
            res = "debugMode";
#endif
            res = "releaseMode";

            return res;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:09:27.450

没有办法用 pragma 实现这一点，因为它们在编译时被烘焙到程序集中。如果第二个程序集是在发布模式下编译的，则它不包含任何可能已放置在 DEBUG 部分中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:11:03.810

没有办法做到这一点，因为 A.exe 和 B.dll 是相互独立编译的。当`B`在 Release 中编译时，`"debugMode"`字符串根本不会以任何形状或形式存在于 B.dll 中。它被编译器完全忽略。

`A.exe`获得调试或发布字符串的唯一方法`B.dll`是让它们在编译时都匹配。要么在 Debug 中编译它们，要么在 Release 中编译它们，但不要混合使用。

# javascript - 当我们点击更多按钮时放置文本

> ID：11366692
> 
> 赞同：0
> 
> 时间：2012-07-06T17:08:02.710
> 
> 标签：javascript, jquery

我写了以下内容，用于显示文本，当我单击更多链接时，它必须显示剩余的段落。我已经尝试过，但我不知道为什么它不起作用，有什么帮助可以解决这个问题。

这是我的以下代码

```
 <style>
    p span {
        display:none;
    }

</style>

<script type="javascript">
$('a').click(function() {
    $(this).next().show();
    return false;
});

</script>

<table cellpadding:0px;cellspacing:0px;border=0px; width="100%">
<tr>
<td style="width:20%"><a><button class="choosesub_but comingsoon"> list</button></a></td>

<td style="width:47%;"><p style="font:13px verdana;">A written work—be it an essay or a story—is about an idea or concept. An essay explains it; a story narrates it.<a href="#" style="text-decoration:underline;">More...</a>
<span>all to entertain the reader. All paragraphs support each other, leading the reader from the first idea to the final resolution of the written piece of work.</span></p>
</td>
<td style="width:30%;"><ul class="choosesub_ul"><li><a href="#">Community event</a></li></ul></td>
</tr>
</table> 
```

当我单击更多链接时，它必须将输出显示为

书面作品——无论是文章还是故事——都是关于一个想法或概念的。一篇文章解释了它；一个故事讲述了它。更多......一切都是为了娱乐读者。所有段落相互支持，引导读者从最初的想法到书面作品的最终解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:19:00.417

```
<script type="text/javascript">
$(function() {
    $('a').click(function() {
        $(this).next().show();
        return false;
    });
});
</script> 
```

如果链接尚未加载，则无法绑定到链接单击事件。所以我们将该代码放在`document.ready`块中，以便在所有内容加载后执行。

脚本类型也应该是`type="text/javascript"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:22:46.027

```
<script>

        $('a').on('click',function () {
            alert("123");
            $(this).siblings().show()
        });
    </script> 
```

# memory-management - Lua - 数一数。对表的引用

> ID：11366693
> 
> 赞同：3
> 
> 时间：2012-07-06T17:08:10.220
> 
> 标签：memory-management, reference, garbage-collection, lua

Lua 文档说

> 当程序没有对剩余表的引用时，Lua 内存管理最终会删除该表并重用其内存。

我的问题是：是否可以在运行时计算对特定表的引用数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:22:16.010

您可以使用调试库找到对 Lua 值的所有引用。查看这些消息：

*   [http://lua-users.org/lists/lua-l/2012-03/msg00479.html](http://lua-users.org/lists/lua-l/2012-03/msg00479.html)
*   [http://lua-users.org/lists/lua-l/2012-04/msg00758.html](http://lua-users.org/lists/lua-l/2012-04/msg00758.html)

以下链接中的 luatraverse 库很好地解决了这个问题！ [http://code.matthewwild.co.uk/luatraverse/summary](http://code.matthewwild.co.uk/luatraverse/summary)

# c# - 如何从 .NET 使用 Oracle？

> ID：11366695
> 
> 赞同：26
> 
> 时间：2012-07-06T17:08:14.863
> 
> 标签：c#, .net, oracle

不幸的是，我正在尝试使用 .NET 中的 Oracle，这就像回到 1997 年一样。正确解释事情是弱点的标志，注册表和环境变量似乎很重要。

所以这就是我已经走了多远。

我在 Oracle.com 上填写了一份关于我的生活的巨大表格并下载了

**ODBC Windows 64-bit Instance Client, 11.2.0.3.0**并将其解压缩到一个文件夹中。 **Basic Windows 64-bit Instant Client, 11.2.0.3.0**并将其解压缩到与上述相同的文件夹中。

我运行了 install .exe（没有 MSI，记住这是 1997 年）。

我在网络共享上添加了一个指向公司 TNSNames.ora 文件的 TNS_NAMES 环境变量，并在控制面板中设置了一个快速 DSN 并运行了测试——它成功了！

然后，我下载了适用于 .NET 4.0 的最新 ODP.NET 的 XCOPY 版本，并将其复制到我的源代码控制工作区下的 Dependencies 文件夹中。

我从我的项目中添加了对**Dependencies\odp.net4\odp.net\bin\4\Oracle.DataAccess.dll的引用**

我读过我需要让托管 ODP.NET 的东西知道它在哪里可以找到它的非托管 Oracle 库，我猜是**Dependencies\odp.net4\bin\OraOps11w.dll**但它可能是其他一些 Oracle 二进制文件某处？

现在我正在设置一个名为 DllPath 的配置文件参数。遗憾的是，Oracle 文档似乎没有意识到 .NET 配置文件需要将它们的部分连接到 configSections 部分。

这是配置文件部分。

```
<oracle.dataaccess.client>
  <add key="DllPath" value="D:\Trunk\Dependencies\odp.net4\bin" />
</oracle.dataaccess.client> 
```

configSection 中有什么内容？我在此找到的几个线程举了一个例子，然后说“我不知道 type= 应该是什么”，这是主要的一点！

谁能给我建议？有谁知道从 .NET 查询 Oracle 视图的傻瓜指南的链接？

在 1997 年我能做些什么来阻止自己在 2012 年使用 Oracle 吗？

**更新**

只是快速更新。我已将 OraOps11w.dll 复制到我的输出 bin 文件夹中，并删除了我之前添加的所有 web.config 文件更改。

我现在收到以下错误，我正在研究。

> 无法加载文件或程序集“Oracle.DataAccess”或其依赖项之一。试图加载格式不正确的程序。

其他一些论坛谈论在 GAC 中注册 Oracle.DataAccess.dll，我很想避免这种情况——无论如何我看不出有什么区别，但我会试一试。

**更新 2**

在 GAC 中注册 Oracle.DataAccess.dll 库没有任何区别，我已经取消注册它。

一周工作即将结束，我必须赶火车，但我已经在这里给另一个开发团队发了电子邮件，希望他们之前已经打过这场仗（而不是像其他人一样使用夜间提取物）。

**更新 3**

今天早上我下载并安装了 64 位版本的 IIS Express 8.0 RC。VS2010 不支持 64 位版本，因此需要从命令行运行。这相当简单，通过查看任务管理器，我能够看到 VS 用于 iisexpress.exe *32 的命令行。

不幸的是，当我浏览由 6​​4 位 IIS Express 托管的网站时，我收到了这个错误。

> 处理程序“ExtensionlessUrl-Integrated-4.0”在其模块列表中有一个错误模块“ManagedPipelineHandler”

这个问题太远了，所以我将尝试使用 32 位版本的 ODP.NET。

**更新 4**

我下载了 32 位版本的完整安装，但是当我看到 Oracle Universal Installer 时我很害怕。它看起来太 90 年代了，无法信任我珍贵的开发盒。所以我使用的是 32 位的“XCopy”客户端，这让我可以打开我网站的主页，所以参考是有效的。感谢那些提出架构不匹配 32/64 问题的人。

现在我在实例化一个新的 OracleConnection 时正在调查这个错误。

> > 提供者与Oracle客户端版本不兼容

**更新 5**我想我已经做到了。

所以我下载了 32 位最新的 11g “Instant Client”，然后把它放在我的 \Dependencies 文件夹中作为解决方案主干代码库。我将此文件夹添加到 %PATH% 系统环境变量中，并将 OraOps11w.dll 文件放入其中。

最后， _oracleConnection = new OracleConnection(connectionString) 没有抛出！现在，当我开始部署到 prod 时，我需要确保桌子上有一瓶 Laphroaig。

因此，回顾一下，对于 Windows 7、64 上的 IIS Express 7.5（这是一个 32 位进程）：

*   下载 32 位 11g “Instant Client”并将其解压缩到某个文件夹，然后将此位置添加到您的 PATH。Oci.dll 是主要的 Oracle 客户端非托管库。

*   下载 32 位 ODP.NET 并将其解压缩到某个文件夹。

*   将 OraOps11w.dll 复制到 Instant Client 所在的主文件夹（上图）。

*   添加指向 TNSNames.ora 文本文件所在文件夹的 TNS_ADMIN 环境变量。这就像一个 hosts 文件，将 Oracle 服务名映射到服务器主机名。

*   关闭并重新打开 Visual Studio 以确保选择新的环境变量，并在 ODP.NET 文件夹中添加对 Oracle.DataAccess.dll 托管程序集的引用。

应该是这样的。当您知道如何操作时，这听起来相当简单。

**更新 5.1**

调查下面的错误，我最初没有报告，因为我确定这是防火墙问题。我所在的公司在每个工作站上都​​有两个，但我只是为 Oracle 服务器打开了一个原始套接字，所以它不可能。

> > ORA-12541: TNS: 没有监听器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T00:50:57.740

解释该问题的最简单方法是指出 Oracle 客户端和 ODAC 客户端库之间的区别。

在 64 位计算机 (Windows 7+) 上，您需要安装 64 位 Oracle 客户端。这是您的机器将用来连接到本地部署在您机器上的 Oracle 数据库的客户端。对于托管在 Web 服务器或其他终端服务器上的应用程序，规则是相同的。

诀窍是……作为开发人员，我们的机器还必须具有 .Net IDE 工具。Oracle 有一个蹩脚的命名约定，但基本上有两部分：ODT（工具）和 ODAC（数据访问）。ODP.Net 数据提供程序是 ODAC 库的一部分。

所以……回到 IDE……Vis​​ual Studio 是 32 位的，因此我们必须在 32 位中安装上面的工具。

在开发、调试等过程中，VS.Net 使用 32 位客户端库和数据访问库与 Oracle 一起工作。

一旦您将此应用程序部署到机器上，它就会使用机器上加载的任何客户端，除非针对特定平台。

这意味着如果您以 32 为目标并部署到 64，它将中断……反之亦然。最好的办法是把它放在任何平台部分，记住你到底在做什么:)

另一件需要注意的事情是确保您的客户端和 ODAC 软件包的版本相同……您不希望拥有 11g R2 客户端和 11g R5 ODAC，因为一旦您部署，垃圾就会再次中断。

* * *

这里需要注意的是，如果您希望将 oracle 客户端“嵌入”到您的应用程序中，在这种情况下，OraOps 与其他几个库一起部署在应用程序中 - 这称为 Oracle 的 Instant Client，它也是 ODAC 包的一部分并包含在内在他们完整的客户端包中也是如此。

* * *

### 好消息...

Oracle 即将（2013 年第一季度）发布他们的下一个 ODP.Net 包......这将是一个完全托管的代码库......意味着不再有单独的客户端或 ODAC 包可以匹配，并且平台将不知道 32和 64 位的区别......它的功能很像旧的 microsoft 库，只是它将由 oracle 构建和维护，具有更强大的功能集。我只希望它早点到来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T19:06:42.990

过去我花了*几天时间*尝试在 Windows 7 中连接 Oracle。

我遇到的问题是我有一个安装了 32 位 Oracle ODP.NET 驱动程序的 32 位 ASP.NET 应用程序。我不知道，即使 ASP.NET 应用程序作为 32 位进程运行并需要 32 位 ODP.NET，IIS 是 64 位进程并导致 ODP.NET 访问 64 位注册表键。您没有提到您是否尝试为 ASP.NET 设置 Oracle，但我将分享我的修复~~（尽管它是针对 Oracle 10.2 安装的）~~。

（*我从[我的博客文章](http://www.ipreferjim.com/2011/08/system-data-oracleclient-and-windows-7-love-at-first-sight/)*中逐字复制此内容）

**注意：这会强制 Oracle 11.2.0.1 仅在 64 位环境中使用 32 位。**

我犯的第一个错误是在 Windows 7 上安装 Oracle 10g 客户端。这将不起作用。如果你安装它，你将不得不在之后执行一些清理。

*   转到 Oracle 的站点并下载/安装 11g 32 位和 64 位客户端。
*   [转到此处](http://www.attunity.com/forums/microsoft-ssis-oracle-connector/ora-12154-tns-could-not-resolve-1369.html#post2054)并按照“虚拟注册表项”步骤操作。
*   打开 regedit 并验证是否`HKLM\SOFTWARE\Wow6432Node\ORACLE\inst_loc`指向正确的位置（可能是 C:\oracle\Inventory）
*   将注册表项`HKLM\SOFTWARE\Wow6432Node\ORACLE\VOBHOME2.0`指向 32 位 Oracle 文件夹
*   创建一个`ORACLE_HOME`环境变量并将其指向 32 位文件夹。

现在你应该在重新启动后设置好。

如果您尝试安装 Oracle 10g 客户端，则必须执行一些清理工作。首先，确保完全卸载 Oracle 10g，从您的 PATH 变量中取消引用，并删除该目录。然后，找到 GAC 中引用的程序集：

```
gacutil /l | find /i "Oracle" > c:\[some directory]\oracle.txt 
```

找到引用 Oracle.DataAccess 版本 10.2 的行并将它们从 GAC 中删除。举个例子（除非您安装了相同的版本，否则这将不起作用）：

```
gacutil /u "Oracle.DataAccess, Version=10.2.0.100, Culture=neutral, PublicKeyToken=89b483f429c47342" 
```

当我这样做时，我要删除三个程序集：

1.  Oracle.DataAccess
2.  Policy.10.1.Oracle.DataAccess
3.  Policy.9.2.Oracle.DataAccess

同样，您可能需要重新启动（嘿，它是 Windows）。

* * *

如果您需要执行任何清理工作，我也在[博客中对此进行了介绍](http://www.ipreferjim.com/2010/04/oracle-exception-could-not-load-file-or-assembly-oracle-dataaccess-version2-111-7-20/)

**供参考**
如果“虚拟注册表项”步骤的链接失效，以下是 Gadi 的帖子中的文本：

“”嗨，本，

在设计时，使用 SQL Server Business Intelligence Development Studio 时，Oracle 连接器在 32 位模式下运行，因此它加载 32 位 Oracle 客户端。

很可能，您收到错误是因为连接器加载了错误的 Oracle 客户端 (oci.dll)，其中未定义 TNS 服务。

要解决此问题，您有两种选择：

1.  在 Oracle Connection Manager Editor 中指定 Oracle 连接字符串，而不是 TNS 服务名称，例如，采用以下格式：`host:port/service_name`

2.  定义一个虚拟注册表项 ( `Z_SSIS`)，如下所示：

    *   打开 regedit 实用程序。
    *   找到以下键：`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\ORACLE`。
    *   右键单击 ORACLE 节点并单击 New -> Key。
    *   调用新密钥`Z_SSIS`（以确保它是最后一个条目）。
    *   右键单击`Z_SSIS`节点并单击新建 -> 字符串。
    *   命名属性`ORACLE_HOME`。
    *   双击`ORACLE_HOME`并将其设置为您要使用的 Oracle 32Bit 安装主目录的位置。

问候，

加迪“”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:47:56.620

我不相信这是一个路径问题。 *“试图加载格式不正确的程序。”* 是一个错误，几乎总是意味着您在 .NET 中混合了 32 位和 64 位程序集和 DLL。

我注意到您安装了 64 位 Oracle 客户端，我假设自从 DSN 创建工作以来您使用的是 64 位版本的操作系统？您的问题可能来自许多相关场景：

*   您的 OraOps11w.dll 副本可能是 32 位程序集，并且您在 64 位应用程序中使用它
*   您的 OraOps11w.dll 副本可能是 64 位程序集，而您正尝试从 32 位应用程序中使用它
*   Oracle Data Provider for .NET 的非托管依赖项之一是 32 位，无法加载到您的 32 位应用程序中（反之亦然）

我相信如果您的应用程序专门针对 x86，则无论底层操作系统平台如何，您都必须安装 32 位 Oracle 客户端包（例如，即使您使用的是 64 位应用程序，32 位应用程序仍然需要 32 位 Oracle 客户端位版本的 Windows）

有几件事要检查：

*   检查调用 Oracle 提供程序的程序集中的“平台目标”设置：x64 将始终尝试以 64 位运行，x86 将始终尝试以 32 位运行，并且“任何平台”将 JIT 编译为目标操作系统架构在运行时（x86 系统上为 32 位，x64 系统上为 64 位）
*   **通过corflags.exe**运行 OraOps11w.dll （请参阅**[此 SO 帖子](https://stackoverflow.com/questions/270531/how-to-determine-if-a-net-assembly-was-built-for-x86-or-x64)**中的详细信息）以查看它是 32 位、64 位还是“任何 CPU”

最后，您是否尝试过为 Oracle 内置 .NET 数据提供程序（System.Data.OracleClient 命名空间？）

这是我能做的最好的事情，因为我不知道更多关于你的应用程序的项目设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:20:53.457

首先，+1 感谢您对 Oracle 的纯粹热爱，并意识到他们是最好的公司，拥有最好的产品！;)

* * *

是的，下载和安装过程很荒谬。我通常什至在他们的网站上都找不到合适的客户端下载，而且 Oracle 通用产品安装程序的事情很糟糕。

* * *

有时您需要`OraOps11w.dll`在您的`\bin`目录中复制一份。有时不是。我从来没有弄清楚什么时候需要它，什么时候不需要，但我认为如果您引用的版本与安装的 Oracle 客户端的版本`Oracle.DataAccess.dll`不*完全相同*，那么您需要`OraOps11w.dll`.

* * *

你能解释一下你想在你的配置文件中做`DllPath`什么吗？`machine.config`Oracle 安装应该已经为您的 .NET 运行时注册了它需要的所有内容。自从我设置 ODP.NET 以来已经有一段时间了，但我不记得 app.config 中除了连接字符串之外还有很多内容。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-27T06:23:17.083

我遇到了同样的问题，发现在Oracle.DataAccess.dll 11.x软件安装的副本版本中运行取消配置和配置bat文件可能会解决或帮助解决问题。

EG configure.bat xxx.netx xxx\product\11.2.0\client_1

# ios - 在 iOS 应用程序中运行应用程序？

> ID：11366696
> 
> 赞同：0
> 
> 时间：2012-07-06T17:08:17.460
> 
> 标签：ios, networking

是否可以将带有 libssl 的 Stunnel 之类的应用程序编译到 iOS 应用程序中，当应用程序启动时，它会使用 conf 参数运行 Stunnel？Stunnel 将打开一个 TCP 端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T23:04:57.707

你不能完全按照你所说的去做，因为 iOS 不允许分叉一个进程。但是您可以做的是将`main`Stunnel 的过程重命名为`stunnel_main`，将 stunnel 的源代码编译到您的应用程序中（通过将相关的源文件添加到您的项目中）。当您的应用程序开始执行时，创建一个新线程，该线程`stunnel_main`使用您想要的任何参数进行调用。

它不漂亮，但它会起作用。

# objective-c - 从 CVImageBufferRef 获取内存所有权

> ID：11366697
> 
> 赞同：5
> 
> 时间：2012-07-06T17:08:20.177
> 
> 标签：objective-c, ios, memory-management, avcapturesession

我正在制作一个简单的管道，从 AVCaptureSession 获取图像，在 OpenCV 中处理它们，然后在 OpenGL 中渲染它们。它基于 RosyWriter，但没有音频和录音功能。OpenCV 处理看起来像

```
- (void)processPixelBuffer: (CVImageBufferRef)pixelBuffer 
{
CVPixelBufferLockBaseAddress( pixelBuffer, 0 );
int bufferWidth = CVPixelBufferGetWidth(pixelBuffer);
int bufferHeight = CVPixelBufferGetHeight(pixelBuffer);
unsigned char *pixel = (unsigned char *)CVPixelBufferGetBaseAddress(pixelBuffer);

cv::Mat image = cv::Mat(bufferWidth,bufferHeight,CV_8UC4,pixel);
//do any processing
[self setDisplay_matrix:image];
CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 );
} 
```

到目前为止，在这个函数中，我没有复制任何内存，我想保持这种状态。问题是 pixelBuffer 可能仍然拥有 display_image 中包含的内存。处理代码可能会也可能不会分配新内存并将其存储在图像中。如果处理没有分配新内存，我必须将 pixelBuffer 与 display_matrix 一起传递，以防止数据被擦除。有没有办法让我拥有记忆的所有权？我想在不破坏它指向的内存的情况下破坏 pixelBuffer。

在相关说明中，LockBaseAddress 究竟做了什么？如果我传递一个 cv::Mat，CVImageBufferRef 对，每次我想用 cv::Mat 修改/使用数据时，我是否必须锁定基地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-27T14:42:36.580

您可以从基地址数据创建数据提供者而无需复制，然后从该数据提供者创建 UIImage。为避免在引用此图像时重复使用缓冲区，您需要保留样本缓冲区并锁定基地址。当您忘记此图像对象时，它们应该被自动解锁和释放：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{
    // Retain sample buffer and lock base address
    CFRetain(sampleBuffer);
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer, 0);

    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    void *baseAddress = (void *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);

    UIImage *image = imageFromData(baseAddress, width, height, bytesPerRow, sampleBuffer);

    // Now you can store this UIImage as long as you want
} 
```

我`imageFromData`从这个项目中得到了[https://github.com/k06a/UIImage-DecompressAndMap/blob/master/UIImage%2BDecompressAndMap.m](https://github.com/k06a/UIImage-DecompressAndMap/blob/master/UIImage%2BDecompressAndMap.m)并采用了一点：

```
UIImage *imageFromData(void *data, size_t width, size_t height, size_t bytesPerRow, CMSampleBufferRef sampleBuffer)
{
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGDataProviderRef provider = CGDataProviderCreateWithData((void *)sampleBuffer, data, bytesPerRow * height, munmap_wrapper);
    CGImageRef inflatedImage = CGImageCreate(width, height, 8, 4*8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst, provider, NULL, NO, kCGRenderingIntentDefault);

    CGColorSpaceRelease(colorSpace);
    CGDataProviderRelease(provider);

    UIImage *img = [UIImage imageWithCGImage:inflatedImage scale:scale orientation:UIImageOrientationUp];
    CGImageRelease(inflatedImage);
    return img;
} 
```

您还需要提供`unlock_function`：

```
void unlock_function(void *info, const void *data, size_t size)
{
    // Unlock base address release sample buffer
    CMSampleBufferRef sampleBuffer = (CMSampleBufferRef)info;
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferUnlockBaseAddress(imageBuffer, 0);
    CFRelease(sampleBuffer);
} 
```

# android - Android中后台栈的修改

> ID：11366700
> 
> 赞同：6
> 
> 时间：2012-07-06T17:08:33.170
> 
> 标签：android, back-stack

我想修改我的Android应用程序中的后台堆栈：

现在，这是流程：

A -> B -> C -> D -> E -> F

我希望能够修改返回堆栈，以便当用户进入活动 F、D 和 E 时从堆栈中删除。因此，如果用户击中背部，则流程为 F -> C。

此外，用户可以从 F 转到活动 B，这也应该删除 C、D、E 和 F。

我已经看到了一些关于能够清除堆栈或删除顶部项目的信息，但我想在触发活动时从堆栈中删除一些项目。

任何帮助表示赞赏，非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T17:35:55.030

您可以使用从 F 到 C 的标志构建一个意图`intent.FLAG_ACTIVITY_CLEAR_TOP`。然后您必须使用该意图调用 startActivity() 并触发它在 onBackPressed 或类似的情况下发生。

```
Intent i = new Intent(this, C.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(i) 
```

请参阅此答案，该答案还涉及确保当您导航回 C 时不会重新启动它：[https ://stackoverflow.com/a/11347608/1003511](https://stackoverflow.com/a/11347608/1003511)

要做`FLAG_ACTIVITY_CLEAR_TOP`的是回到堆栈上最近的活动 C 实例，然后清除它上面的所有内容。但是，这可能会导致重新创建活动。如果你想确保它是同一个活动实例，也可以使用`FLAG_ACTIVITY_SINGLE_TOP`。从文档中：

> 上面示例中当前运行的活动 B 实例将在其 onNewIntent() 方法中接收您在此处启动的新意图，或者自身完成并使用新意图重新启动。如果它已声明其启动模式为“multiple”（默认）并且您没有在同一意图中设置 FLAG_ACTIVITY_SINGLE_TOP，那么它将完成并重新创建；对于所有其他启动模式，或者如果设置了 FLAG_ACTIVITY_SINGLE_TOP，则此 Intent 将被传递到当前实例的 onNewIntent()。

编辑：这是一个类似于您想要做的代码示例：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Intent a = new Intent(this, C.class);
        a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);
        startActivity(a);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

代码示例来源：[https ://stackoverflow.com/a/9398171/1003511](https://stackoverflow.com/a/9398171/1003511)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:14:55.877

您需要的是 `android:excludeFromRecents="true"`必须在清单文件的 Activity 标记中添加哪个。它停止所有活动进入堆栈，该堆栈具有此标记到清单中的 Activity 标记中。

示例代码

```
 <activity
            android:name="com.xx.xx.ActivityName"
            android:excludeFromRecents="true"

        </activity> 
```

并确保`finish()`在您不想在活动堆栈上的那些活动中调用（在启动另一个活动之后）方法。

# customization - Windows 7 语音识别的自定义训练短语？

> ID：11366708
> 
> 赞同：0
> 
> 时间：2012-07-06T17:08:56.017
> 
> 标签：customization, speech-recognition

Windows 7 语音识别需要说出以下训练短语才能启用：“Peter 对他的计算机进行口述。他更喜欢它而不是打字，尤其喜欢它而不是笔和纸。”

我想使用 Windows 语音识别来批量处理单个人的大量 MP3 讲座文件。所以我想做的是从这些预先存在的听写中选择一个类似的短语，并使用我选择的短语来训练它，而不是内置的训练短语。

主要是因为我没有录音说“彼得对他的电脑听写。他更喜欢打字，尤其是笔和纸。” 但我有 50 个小时的时间让他说很多其他的事情。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:17:03.207

使用语音识别工具的api，[使用SAPI 5.3 Speech API进行声学训练](https://stackoverflow.com/questions/299799/acoustic-training-using-sapi-5-3-speech-api)的人和你有同样的问题，可能

# r - （慢边着色）如何避免循环所有tip.labels（包猿）

> ID：11366711
> 
> 赞同：0
> 
> 时间：2012-07-06T17:09:24.167
> 
> 标签：r

我正在用“猿”的一些功能生成的系统树中的边缘着色

由于我一直使用 C 进行编程，我仍然发现很难停止以类似循环的方式进行思考。

我能想到的唯一方法是（1）循环所有的tip.labels（ID），（2）找出哪些边缘属于它们，（3）设置所需的颜色。

这是一一完成的，因此对于大树来说非常慢：

```
tsampltime.rooted=structure(list(edge = structure(c(24L, 24L, 24L, 24L, 24L, 25L, 
26L, 26L, 27L, 27L, 28L, 28L, 25L, 29L, 29L, 30L, 30L, 30L, 30L, 
24L, 31L, 31L, 32L, 32L, 32L, 33L, 33L, 34L, 35L, 35L, 34L, 36L, 
36L, 34L, 37L, 37L, 1L, 2L, 12L, 23L, 25L, 26L, 6L, 27L, 5L, 
28L, 3L, 4L, 29L, 7L, 30L, 8L, 9L, 10L, 11L, 31L, 13L, 32L, 21L, 
22L, 33L, 20L, 34L, 35L, 14L, 15L, 36L, 16L, 17L, 37L, 18L, 19L
), .Dim = c(36L, 2L)), Nnode = 14L, tip.label = c("0", "2325", 
"55304", "124953", "72254", "66507", "85089", "110256", "123265", 
"97350", "123721", "36770", "48692", "110612", "97224", "104337", 
"124625", "128499", "120928", "88404", "73335", "75059", "17928"
), edge.length = c(0, 0.953297, 8.054944, 4.4120893, 9.173083, 
1.409346, 3.752752, 0.483517, 4.620875, 0.582417, 0.510989, 12.4862723, 
6.291209, 1.920329, 3.071429, 4.5027528, 5.497248, 2.777472, 
5.5274749, 8.414843, 2.5467017, 3.79121, 3.824171, 3.961538, 
3.804944, 2.126375, 1.75275, 1.93956, 3.3516546, 1.57418, 2.31319, 
2.22528, 4.0384651, 3.898348, 2.722523, 1.87088)), .Names = c("edge", 
"Nnode", "tip.label", "edge.length"), class = "phylo", order = "cladewise")
   ... 
#distValuesPerId[,] has [LABELID,COLOR]
distValuesPerId=source('http://ubuntuone.com/5y7ZYCWfE73T5lhnUpmeXc')
...
uniqueIDs=unique(tree$tip.label)
distTrdsampledcol <-rep("black", length(tree$edge)) #init in black
for(i in uniqueIDs) { #(1)
    a= c(which(tree$tip.label==i)) 
    b= which(tree$edge[,2]== a) #(2)
    distTrdsampledcol [ b ] <- distValuesPerId[i,2] #(3)
}
...
#plot(tree, edge.color=distTrdsampledcol) 
```

谁能帮我重新考虑一下？这样做有没有更有效的方法？

![在此处输入图像描述](../Images/6a7b2762c7eb10a9766d86fe06341a96.png)

提前致谢！

j

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:43:43.870

这个你可能想多了。只需从您的巨型颜色中选择您需要的颜色`data.frame`。

```
plot(tree,edge.color=distValuesPerId[tree$tip.label,2]) 
```

试试 上的示例列表`?plot.phylo`，他们有很多非常酷的例子，你可以用你的树做一些很酷的事情，包括着色。它可能会给你一些想法。

* * *

看到你的评论后，我意识到我误解了这个问题。这应该可以在没有循环的情况下执行您想要的操作：

```
cols=distValuesPerId[match(tree$tip.label[tree$edge[,2]],distValuesPerId[,1]),2]
my.cols=ifelse(is.na(cols),'black',cols)
plot(tree, edge.color=my.cols) 
```

分解它：

```
# Find the tip labels associated with each edge, NA if it is not an edge to a tip
edge.tip.labels=tree$tip.label[tree$edge[,2]]
# Match each of those tip labels to the label column in your colur data frame
edge.rows=match(edge.tip.labels,distValuesPerId[,1])
# Find the colour for each of those rows
cols=distValuesPerId[edge.rows,2]
# Where it is NA, convert it to 'black' (where it is not a 'tip edge')
my.cols=ifelse(is.na(cols),'black',cols) 
```

# java - JFreeChart - XYBarChart 为每个系列显示单独的条形图

> ID：11366717
> 
> 赞同：5
> 
> 时间：2012-07-06T17:09:55.453
> 
> 标签：java, jfreechart, bar-chart

我正在使用 JFreeChart 创建一个 XYBarChart 并向其添加多个系列。目前，对于给定的 x 值和系列中的不同 Y 值，所有这些都堆叠在一起。

对于给定的 x 值，是否可以将每个系列显示为不同的条形？

**编辑**：我发布了我的代码的相关部分，用于创建图表供您参考。

**请注意，**我不能使用*CategoryDataset*，因为它不提供域轴上的缩放功能。这是我实施的基本要求。

```
XYSeriesCollection intervalXYDataSet  = new XYSeriesCollection();
int countPlotPoints = populateBandData(intervalXYDataSet, optionList); //optionList is a HashMap<Integer,ArrayList<Integer>> where key = seriesKey, and ArrayList<Integer> builds up the value for each series

if (countPlotPoints == 0) {
    print("No options selected.\n");
    JOptionPane.showMessageDialog(this, "No Plot Points Were Selected!", "Warning", JOptionPane.WARNING_MESSAGE);
    return;
}

/**
 * Chart Creation Section
 */
JFreeChart chart = ChartFactory.createXYBarChart(tabTitle, "Frequency Bands", false, "rxlev", intervalXYDataSet, PlotOrientation.VERTICAL, true, true, false);
XYPlot plot = (XYPlot) chart.getPlot();
plot.getRangeAxis().setStandardTickUnits(NumberAxis.createIntegerTickUnits());
plot.getDomainAxis().setAutoRange(true);

//        
final XYBarRenderer renderer = (XYBarRenderer) plot.getRenderer();
renderer.setDrawBarOutline(false);
renderer.setShadowVisible(false);
renderer.setMargin(0.2);
renderer.setDefaultShadowsVisible(false);

ChartPanel chartpanel = new ChartPanel(chart);
chartpanel.setDefaultDirectoryForSaveAs(new File(lastAnalyzedPath));

JFrame frame = new JFrame();
frame.setTitle(plotTitle);
frame.add(new JScrollPane(chartpanel));
frame.pack();
frame.setVisible(true);

frame.addWindowListener(new java.awt.event.WindowAdapter() {
    @Override
    public  void windowClosing(java.awt.event.WindowEvent evt) {
        try {
            System.out.println(":: Clearning Memory ::");
            System.out.println("\tFree Memory (Before cleanup): "+Runtime.getRuntime().freeMemory());
            Component component = getComponent(0);
            if(component instanceof ChartPanel){
                JFreeChart chart = ((ChartPanel) component).getChart();
                XYPlot plot = (XYPlot) chart.getPlot();
                plot        = null;
                chart       = null;
                component   = null;
            }
        } finally {
            System.runFinalization();
            System.gc();
            System.out.println("\tFree Memory (Post cleanup): "+Runtime.getRuntime().freeMemory());
        }
    }
}); 
```

这是当前显示方式 [的屏幕截图](https://i.stack.imgur.com/0kEk8.png)![](../Images/a59e33852d5ef333e8791a106f4ddab2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T19:19:54.913

**编辑**使用`ClusteredXYBarRenderer`而不是`XYBarRenderer`. 这会绘制相邻的条形图（而不是 StackedBars）并提供缩放功能。

`ChartFactory`create中没有工厂方法`ClusteredXYBarRenderer`。

使用以下方法创建条形图。

```
private static JFreeChart createClusteredChart(String title, String categoryAxisLabel, String valueAxisLabel, IntervalXYDataset dataset) {

  NumberAxis domainAxis = new NumberAxis(categoryAxisLabel);
  domainAxis.setAutoRangeIncludesZero(false);

  ValueAxis valueAxis = new NumberAxis(valueAxisLabel);

  XYBarRenderer renderer = new ClusteredXYBarRenderer();

  XYPlot plot = new XYPlot(dataset, domainAxis, valueAxis, renderer);
  plot.setOrientation(PlotOrientation.VERTICAL);

  JFreeChart chart = new JFreeChart(title, JFreeChart.DEFAULT_TITLE_FONT, plot, true);

  return chart;
} 
```

`XYBarRenderer`您使用的是正确的。但我认为你应该使用`CategoryDataSet`而不是`XYSeriesCollection`. 尝试使用下面的数据集而不是`XYSeriesCollection`. 这将产生相邻的条而不是堆叠的条。

```
private static CategoryDataset createDataset() {
  String series1 = "First";
  String series2 = "Second";
  String series3 = "Third";

  String category1 = "Category 1";
  String category2 = "Category 2";
  String category3 = "Category 3";
  String category4 = "Category 4";
  String category5 = "Category 5";

  DefaultCategoryDataset dataset = new DefaultCategoryDataset();

  dataset.addValue(1.0D, series1, category1);
  dataset.addValue(4.0D, series1, category2);
  dataset.addValue(3.0D, series1, category3);
  dataset.addValue(5.0D, series1, category4);
  dataset.addValue(5.0D, series1, category5);

  dataset.addValue(5.0D, series2, category1);
  dataset.addValue(7.0D, series2, category2);
  dataset.addValue(6.0D, series2, category3);
  dataset.addValue(8.0D, series2, category4);
  dataset.addValue(4.0D, series2, category5);

  dataset.addValue(4.0D, series3, category1);
  dataset.addValue(3.0D, series3, category2);
  dataset.addValue(2.0D, series3, category3);
  dataset.addValue(3.0D, series3, category4);
  dataset.addValue(6.0D, series3, category5);

  return dataset;
} 
```

# javascript - 使 var 值在按钮单击中可用

> ID：11366723
> 
> 赞同：0
> 
> 时间：2012-07-06T17:10:13.347
> 
> 标签：javascript, jquery-ui, jquery

我将如何获得 var mydomain = collectDomains[i].email_domain 中的域值在稍后的按钮单击事件中可用

```
$(document).ready(function() {
$('#email_address').blur(function(){

        var emailAddress = $('#email_address').val().split('@');
        var domain = emailAddress[1];
        var tagMap = {};
           var i = null;
        for (i = 0; collectedDomains.length > i; i += 1) {
            var mydomain = collectedDomains[i].email_domain;               
        }

        var hasTag = function(tagName) {
            return tagMap[tagName];
        };  

    $('#Button1').click(function(){
        //need the value of var mydomain available here
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:17:00.567

这是一个范围问题。您只需在引用它的两个函数之外定义要使用的变量。像这样：

```
$(document).ready(function() {
    var mydomain = null;

    $('#email_address').blur(function(){

        var emailAddress = $('#email_address').val().split('@');
        var domain = emailAddress[1];
        var tagMap = {};
        var i = null;

        for (i = 0; collectedDomains.length > i; i += 1) {
            mydomain = collectedDomains[i].email_domain;               
        }

        var hasTag = function(tagName) {
            return tagMap[tagName];
        };  
    });

    $('#Button1').click(function(){
        //mydomain equals whatever you set it to in the .blur call
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:17:35.980

```
$(document).ready(function() {

var domain;
// domain is now available in all the functions inside ready block
$('#email_address').blur(function(){

        var emailAddress = $('#email_address').val().split('@');
        var tagMap = {};
        var i = null;
        //See here its without var
        domain = emailAddress[1];
        for (i = 0; collectedDomains.length > i; i += 1) {
            var mydomain = collectedDomains[i].email_domain;               
        }

        var hasTag = function(tagName) {
            return tagMap[tagName];
        };  
   });
    $('#Button1').click(function(){
        //need the value of var mydomain available here
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:11:58.637

只需将其作为变量放入范围内的某个位置即可：

```
$('#email_address').blur(function(){

        var emailAddress = $('#email_address').val().split('@'),
            domain = emailAddress[1],
            tagMap = {},
            i = null,
            mydomain; //VIOLA!

        for (i = 0; collectedDomains.length > i; i += 1) {
            mydomain = collectedDomains[i].email_domain;               
        }

        var hasTag = function(tagName) {
            return tagMap[tagName];
        };  

        $('#Button1').click(function(){
            //need the value of var mydomain available here
        });
}); 
```

# javascript - 如何使用 putImageData 和 Canvas 绘制一个点？

> ID：11366727
> 
> 赞同：1
> 
> 时间：2012-07-06T17:10:22.303
> 
> 标签：javascript, html, graphics, canvas

我正在处理复杂的任务，所以我的问题不应该真正有意义，但问题是如何使用`putImageData`以前通过`getImageData`.

假设我有一条 200 像素的水平线*A (0, 0) - B (199, 0)*。我可以使用读取它的像素颜色信息

```
var pixels = ctx.getImageData(0, 0, 200, 1); // horizontal line :: 200 pixels 
```

但是一旦我有了`pixels`数组*(pixel.length = 800)*，我想在不同的地方从这条线上画一些点。只是点，不是线。

这将绘制整条线：

```
ctx.putImageData(pixels, 20, 20); 
```

但是我怎样才能从线*A - B***的第 n 个**点用像素颜色信息绘制**一个点** *C (20, 20)*？

 ***如何使用来自的数据`putImageData`与 rgba 数组*（array.lenght = 4）*一起使用`pixels`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:36:47.123

`putImageData`有另一组参数，一个脏矩形：

`putImageData(imagedata, dx, dy, dirtyX, dirtyY, dirtyWidth, dirtyHeight)`

有了这个，您可以在图像数据中指定一个矩形来复制回来。它只会将该矩形中的像素复制回画布。

因此，正如您所说，这将为您提供水平线：

```
var pixels = ctx.getImageData(0, 0, 200, 1); // horizontal line :: 200 pixels 
```

这会将`(20,0)`图像数据中的一个像素放在`(20,0)`画布中的位置：

```
ctx.putImageData(pixels, 0, 0, 20, 0, 1, 1) 
```

请注意，您仍然必须从 0,0 开始 x/y 偏移，这是因为脏矩形的工作方式。您不会将 (20,0) 处的一个像素放回 (0,0) 处，而是将整个图像数据放回 (0,0) 处，但除了脏矩形。这使得***

# r - R - 用 x 和 y 数据绘制幂律线

> ID：11366732
> 
> 赞同：6
> 
> 时间：2012-07-06T17:10:45.970
> 
> 标签：r

我正在尝试绘制一条幂律线来拟合数据框中已有的 x 和 y 数据。我在 igraph 库中尝试过 power.law.fit 但它不起作用。数据框为：

```
dat=data.frame(
  x=1:8,
  ygm=c( 251.288, 167.739, 112.856, 109.705, 102.064, 94.331, 95.206, 91.415)
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:23:27.260

我通常在这里使用两种策略之一，我采用对数并拟合线性模型，或者我使用`nls`. 我认为您可以根据需要找出记录的模型，因此我将`nls`在此处显示该方法。

```
 nls1=nls(ygm~i*x^-z,start=list(i=-3,z=-2),data=dat) 
```

仔细检查您想要的公式，此方法接受相当广泛的公式类别。花一些时间愚弄起始值。尤其要尝试考虑似然面可以做奇怪事情的边界。在奇怪的地方尝试两边的值，这样你就可以确定你不是局部最优的。

```
> nls1
Nonlinear regression model
  model:  ygm ~ i * x^-z 
   data:  dat 
       i        z 
245.0356   0.5449 
 residual sum-of-squares: 811.4

 ... 

> predict(nls1)
[1] 245.03564 167.95574 134.66070 115.12256 101.94200  92.30101  84.86458
[8]  78.90891
> plot(dat)
> lines(predict(nls1)) 
```

# ruby-on-rails - 在 Rails 应用程序中管理模型所有权时遇到问题

> ID：11366739
> 
> 赞同：1
> 
> 时间：2012-07-06T17:11:04.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

在我的 Rails 应用程序中，用户和学校可以创建课程，每门课程都有一个教学大纲。

在我的课程模型中：

```
belongs_to :hostable, polymorphic: true
has_one  :syllabus 
```

教学大纲：

```
belongs_to :course 
```

学校（和用户）：

```
has_many :courses, as: :hostable, :dependent => :destroy 
```

我的路线目前设置如下：

```
resources :users do
  resources :courses 
  member do
   get :attending, :memberships
  end
end

resources :schools do 
  resources :courses 
  member do
    put :apply, :enroll
  end
end

resources :syllabuses 
```

在我的教学大纲控制器中，我有：

```
def create
  @course = Course.find(params[:id])
  @syllabus = @course.build_syllabus(params[:syllabus])
  if @syllabus.save
    redirect_to @course, notice: 'Syllabus was successfully created.' 
  end
end 
```

我的课程控制器有这个：

```
def show
  @course = Course.find(params[:id])
  @school = Course.find(params[:school_id])
  @title = @course.title
  unless @course.syllabus
    @syllabus = @course.build_syllabus
  end
end 
```

我的课程查看页面有

```
<%= form_for (@syllabus) do |f| %>

  <div> <%= f.label :syllabus %> </div>
  <%= f.label :name %> 
  <%= f.text_field :name %> </br>
    ....

  <%= f.submit "Save Changes" %>
<% end %> 
```

但是当我尝试从学校内部的课程页面创建教学大纲时，我得到：

“找不到没有 ID 的课程”

我究竟做错了什么？我如何重新配置​​我的路线/模型，以便用户和学校都可以创建课程，然后可以在课程中创建教学大纲？我尝试使用 javascript 在课程模型下嵌套教学大纲模型，但遇到了一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:38:44.077

尝试在路由中嵌套教学大纲，

```
 resources :courses do 
     resource :syllabus 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T18:43:14.407

```
@school = Course.find(params[:school_id]) 
```

看起来我很怀疑。

应该是

```
@school = School.find(params[:school_id]) 
```

或者更容易

```
@school = @course.school 
```

# excel - Excel 中的模数不一致 (=MOD()) 行为

> ID：11366743
> 
> 赞同：0
> 
> 时间：2012-07-06T17:11:17.403
> 
> 标签：excel, excel-formula

我在 Excel 电子表格中遇到了一些令人困惑的行为。两列，我们称为 A 和 B。A 包含“时间小数”，例如 0.15 或 0.30（十五或三十分钟）。我需要将其转换为“普通小数”，例如 0.25 或 0.5。其中的值来自表中的其他列。

在进行转换之前，我需要确定时间是否应该四舍五入到一刻钟。我想我会使用 =MOD() 来检查“时间小数”* 100 是否可以被 15 整除。

但是：我得到的结果不一致。在 AI 列中有“时间小数”，在 BI 列中有公式：

```
=MOD(A1*100,15) 
```

在下面的屏幕截图中，我希望它在两行中都给出 0，但事实并非如此： ![电子表格截图](../Images/c11f2c6193e0d36f250d296c941a2d9f.png)

据我所知，A1 和 A2 中的数据是相同的。所有四个可见单元格都是“数字”类型。

幕后有什么我不知道的事情吗？有没有办法可以强制正确的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:14:40.650

最可能的原因是第一个不完全是 0.30，而是例如 0.299999。这将使结果为`MOD(xx*100,15)`14.99999，如果您只显示 2 个小数，则显示为 15.00。

# asp.net - 从模型中提取信息到局部视图中

> ID：11366744
> 
> 赞同：2
> 
> 时间：2012-07-06T17:11:22.733
> 
> 标签：asp.net, asp.net-mvc-3

我正在设计一个 Web 应用程序。该应用程序最初不是由我编写的，我正在努力在设计时不修改任何控制器或模型。

目前，该应用程序是一个标题，应该显示您当前正在查看的项目的名称以及项目的完成日期。这个头是布局调用的局部视图，也是局部视图。因为标题是一个单独的视图，然后是项目详细信息视图，所以我很难将这些信息提取出来。

我尝试将控制器的@model 引用添加到 Header，但收到错误，我传递了错误的类型（请参阅下面的错误）。

我还尝试将模型传递给 Layout 视图中的 @Html.Partial 调用，该调用调用标题（也是[this](https://stackoverflow.com/questions/2775860/how-to-pass-model-from-a-view-to-a-partial-view "这个")）。一般来说，我尝试过的所有事情都会让我遇到这个错误：

```
The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[OST.Pride.Business.Models.Project]', but this dictionary requires a model item of type 'OST.Pride.Web.Models.AdminProjectUserEdit'. 
```

我不能只将标题移动到项目详细信息视图，因为标题是整个应用程序布局的一部分。我会感谢任何人的帮助，我已经坚持了一段时间。

**在布局中调用标题**

```
<header id="main-header">
  @Html.Partial("LayoutTemplates/Header")
</header> 
```

**标题：**

```
<div class="navbar" style="padding-top:15px;">
    <div class="navbar-inner">  
        <div class="container" style="width:auto;">           
            <div class="project-navbar"> 
                 <h3><ul class="nav pull-left">Customer: TEST </ul></h3>
                 <h3><ul class="nav" style="padding-left:40%;">Project: //This is where the project name needs to be//</ul></h3>
                 <h3><ul class="nav pull-right" align="center">Project Completion Date: //Again, I need to pull the completion date here// </ul></h3>

            </div>
        </div>
    </div>  
</div> 
```

**控制器方法**

```
public ActionResult Details(int? projectid, int? ProjectID, int? projectuserid) // based on the project id, populates the view with the roles, project users, and the roles for the screen.
        {
            var model = new Models.AdminProjectUserEdit();

            model.Project = storeDB.Projects.Find(ProjectID);
            model.Users = storeDB.Users.ToList();

            model.Surveys = storeDB.Surveys.Include("SurveyType").ToList();
            model.ProjectUsers = storeDB.ProjectUsers.Include("Project").Include("User").Where(x => x.ProjectID == projectid).ToList();
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:19:38.447

这里很少考虑。由于您将其放在布局中，这意味着应用程序中的每个视图都将显示项目详细信息。但要显示项目详细信息，您必须先有一个项目。要拥有一个项目，您必须有一个项目 ID。按照这个逻辑，这反过来意味着您必须在每个请求的任何地方都有项目 ID。此项目 ID 可以是请求查询字符串或路由的一部分。出于本演示的目的，我假设它是路线数据的一部分。

因此，您可以使用[子操作](http://haacked.com/archive/2009/11/18/aspnetmvc2-render-action.aspx)在布局中显示项目详细信息，而不是局部视图：

```
<header id="main-header">
    @Html.Action("Header", "SomeController", new { projectid = ViewContext.RouteData["projectid"] })
</header> 
```

注意我们是如何`projectId`从路由数据中传递参数的。如果项目 id 在查询字符串、cookie 或您决定保留它的任何地方，您显然必须修改此代码。这条路线似乎是个好地方。

所以我们调用控制器的`Header`子动作动作`Some`，它将获取项目并将其传递给相应的局部视图：

```
[ChildAction]
public ActionResult Header(int? projectId)
{
    if (projectId == null)
    {
        return PartialView();
    }
    var project = storeDB.Projects.Find(projectID);
    return PartialView(project);
} 
```

然后在相应的`Header.cshtml`局部视图中我们渲染项目细节：

```
@model Project
@if (Model == null)
{
    // there wasn't any project selected => display some default stuff
    <div>No project to display</div>
}
else
{
    <div class="navbar" style="padding-top:15px;">
        <div class="navbar-inner">  
            <div class="container" style="width:auto;">           
                <div class="project-navbar"> 
                     <h3>
                         <ul class="nav pull-left">
                             Customer: TEST
                         </ul>
                     </h3>
                     <h3>
                         <ul class="nav" style="padding-left:40%;">
                             Project:  
                             @Html.DisplayFor(x => x.Name)
                         </ul>
                     </h3>
                     <h3>
                         <ul class="nav pull-right" align="center">
                             Project Completion Date: 
                             @Html.DisplayFor(x => x.CompletionDate)
                         </ul>
                     </h3>
                </div>
            </div>
        </div>  
    </div>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T19:15:55.960

虽然达林的回答非常好，并且在不同的情况下可能会更好地工作，但我决定接受主管的建议并使用 ViewBag。使用这种方法意味着我不需要将模型传递到标题中，这是一个共享视图。

以下是我在代码中实现此方法的方式：

**在布局中调用标题**

```
<header id="main-header">
    @Html.Partial("LayoutTemplates/Header")
</header> 
```

**标题**

```
<div class="navbar" style="padding-top:15px;">
    <div class="navbar-inner">  
        <div class="container" style="width:auto;" >

        @if (@ViewBag.projectName == null)
        { /**do nothing**/ }
        else
        {

            <div class="project-navbar"> 
                 <h3><ul class="nav pull-left">Customer: TEST </ul></h3>
                 <h3><ul class="nav" style="padding-left:40%;">Project: @ViewBag.projectName</ul></h3>
                 <h3><ul class="nav pull-right" align="center">Project Completion Date: @ViewBag.projectCompletion </ul></h3>

           </div>
        } 
        </div>
    </div> 
```

**控制器方法**

```
 public ActionResult Details(int? projectid, int? ProjectID, int? projectuserid) // based on the project id, populates the view with the roles, project users, and the roles for the screen.
    {
        var model = new Models.AdminProjectUserEdit();

        model.Project = storeDB.Projects.Find(ProjectID);
        model.Users = storeDB.Users.ToList();

        model.Surveys = storeDB.Surveys.Include("SurveyType").ToList();
        model.ProjectUsers = storeDB.ProjectUsers.Include("Project").Include("User").Where(x => x.ProjectID == projectid).ToList();
        ViewBag.projectName = storeDB.Projects.Find(ProjectID).ProjectName;
        ViewBag.projectCompletion = storeDB.Projects.Find(ProjectID).ProjectCompletion;
        return View(model);
    } 
```

# windows-phone-7 - 使用 Zune Web API 检索 Windows Phone 应用评论和评级

> ID：11366747
> 
> 赞同：0
> 
> 时间：2012-07-06T17:11:42.897
> 
> 标签：windows-phone-7

我正在开发旨在帮助我跟踪我的 Windows Phone 应用程序评论和评级的桌面应用程序。为此，我正在使用 Zune Web API。为了查看评分和评论，我使用以下提要 URL：

> [http://catalog.zune.net/v3.2/en-US/apps/MY_APP_ID/reviews/?store=Zest&chunkSize=100](http://catalog.zune.net/v3.2/en-US/apps/MY_APP_ID/reviews/?store=Zest&chunkSize=100)

`MY_APP_ID`我的应用在市场中的 GUID在哪里。

问题在于我正在检索的评论数量。它总是只返回最后 100 个。无论我是删除`chunkSize=100`还是替换为`chunkSize=150`. 有没有办法检索所有评论或评论的自定义片段/页面？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:59:22.277

我用 fiddler 看了看，似乎 URL 中有标记：`beforeMarker`和`afterMarker`，即每个响应还包含指向下一页和上一页评论的 URL。

# ruby-on-rails - 在 Rails 中更新后发送电子邮件

> ID：11366748
> 
> 赞同：1
> 
> 时间：2012-07-06T17:11:45.963
> 
> 标签：ruby-on-rails, activerecord

调用回调`:after_update`后，您将丢失所有更改，因此`*_changed?`方法返回 false。

当一个或多个属性发生更改时，我需要在更新后发送电子邮件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:15:46.630

如何在 before_update 上准备您的电子邮件并将其保存到实例变量中，如果更新成功（after_update）发送电子邮件？

# content-management-system - TYPO3中扩展安装如此复杂的原因？

> ID：11366749
> 
> 赞同：-4
> 
> 时间：2012-07-06T17:11:46.660
> 
> 标签：content-management-system, typo3

我只是在决定选择什么 CMS，所以我正在尝试 TYPO3。我决定安装 yag 扩展（又一个画廊）。第一个惊喜是我必须手动安装依赖项。安装成功后，我在左侧窗格中选择了“图库”，在右侧窗格中出现此错误

> 在所选页面上未找到 YAG 库的设置。请选择包含 YAG 静态模板的页面。或者在这个页面包含 YAG 的静态模板。

中文对我来说。如何“包含静态模板”？我为此搜索了几个教程（[#1](http://typo3tutorials.com/index.php?id=109)，[#2](http://typo3.org/extension-manuals/mm_forum/1.9.2/view/1/2/)，[#3](http://wiki.typo3.org/Extension_Development,_add_static_extension_templates)），没有一个有效（版本 4.7.2）。最后我找到[了这个对我有帮助的视频](http://www.youtube.com/watch?v=c4V5Y7ARdz0)。但是还没有解决问题！我收到另一个错误告诉我，我应该以某种方式更新配置（WTH？）。另一个谷歌搜索，我终于设法通过扩展管理器，配置选项卡，更新来做到这一点。

为什么像安装扩展这样简单的事情如此复杂？为什么会给用户带来如此复杂的情况？如果包需要安装一些模板和更新配置，为什么它不是安装过程的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:03:59.953

答案很明确，20k+ 版本中有 5k+ 扩展，为许多不同的 TYPO3 版本编写，经历了漫长的岁月，经历了数千名开发人员的不同编程模式。

如果没有连接它们的“接口”，TYPO3 将毫无用处。

如果你期望几天后会有好结果，我一定会让你失望，TYPO3 的学习曲线很长，我认为你至少需要浪费 3、4 周的时间才能更适应它。

BTW`including statics from extension`是 TYPO3 存储库中几乎所有好的 ext 的第一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T07:31:13.557

如果设置是自动完成的，这取决于扩展名。但如果你有特殊需要，这样的自动设置可能会带来很多麻烦。所以我个人不喜欢使用自动设置（旧的扩展经常这样做！）。这取决于扩展，从长远来看，自动设置是否会受到伤害。

请记住，安装扩展不是编辑任务，而是管理员任务。

# ios - 根据构建配置定义设置包

> ID：11366751
> 
> 赞同：7
> 
> 时间：2012-07-06T17:11:53.713
> 
> 标签：ios, xcode, cocoa-touch, settings.bundle

我已经在设备设置中出现的设置包中定义了我的 Root.plist。现在，我希望它根据我构建项目的环境类型显示不同的选项。

我在 XCode 中定义了一个 TEST 和 PROD 方案（不同的构建配置），我希望 Root.plist 为这些构建配置定义不同的。如何才能做到这一点？

我们是否可以定义 2 个 plist 并将它们与不同的构建配置链接，或者我们可以在编译时根据选择的构建配置或方案修改 root.plist。

请指教。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T23:12:41.687

我是这样解决的：

1) 将 2 个设置包（一个用于测试，一个用于生产）添加到项目并将它们添加到目标。

2) 在 Runner 目标上添加一个 Run 脚本，以选择性地将所需的设置包复制到构建文件中。

```
if [IS_PRODUCTION]; then
cp -r ${PROJECT_DIR}/Settings/Prod/Settings.bundle ${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app
fi

if [IS_TEST]; then
cp -r ${PROJECT_DIR}/Settings/Test/Settings.bundle ${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app
fi 
```

3) 完成后，只需在不同的方案上运行即可查看所需的结果。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-21T21:38:49.543

我做了一些类似于@Abhinav 的事情，但我没有使用运行脚本，而是使用文件检查器的目标成员资格部分来确定哪个目标使用哪个 Settings.bundle。

![设置捆绑目标成员资格](../Images/2791d9a4bf50f4edaf96ea9efd8d8fdd.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-26T16:12:34.370

我使用了@abhinav 方法，但稍作修改以适应我的项目需求。我们有两个目标，**但**都用于构建单独的应用程序。

## 脚步

在项目目录中的*文件系统*上创建文件夹结构：

```
<project_folder>/Settings/debug
<project_folder>/Settings/production 
```

在*项目*中创建这些组：

```
Settings
  debug
  production 
```

创建一个`Settings.bundle`，将其添加到**调试组**并保存到**调试文件夹**。（不要将其添加到任何目标）

`.plist`以您希望最*宽*设置页面看起来的方式编辑（通常，调试版本有更多设置）。

将包从**调试文件夹复制**到**生产文件夹**

`Settings.bundle`从**生产文件夹**添加到项目中的**生产组**（不要添加到任何目标），所以你有这个结构

[![项目组结构](../Images/f0083d5c432d10b3d01e14cc0ff75ec6.png)](https://i.stack.imgur.com/Nwb2l.png)

确保**没有**`Settings.bundle`s 被添加到**任何**目标

从生产中删除`.plist`您不希望随 App Store 版本一起提供的设置项。

**在Copy Bundle Resources**阶段之后添加**Run Script**阶段

 **```
if [ "${CONFIGURATION}" = "Release" ]; then
cp -r ${PROJECT_DIR}/Settings/production/Settings.bundle "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app"
fi

if [ "${CONFIGURATION}" = "Debug" ]; then
cp -r ${PROJECT_DIR}/Settings/debug/Settings.bundle "${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app"
fi 
```

**注意：**我有两个构建方案：发布和调试。我将路径用引号括起来，因为我的目标名称带有空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T20:42:10.037

有条件地捆绑项目（例如不同版本中的设置捆绑）的唯一方法是复制您的目标。只需将正确的包添加到正确的目标，并保持所有代码相同。这是不同的，但从长远来看，它应该对你更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-03T09:41:05.290

简单的方法是，

1 -- 使用现有目标的副本创建不同的目标， 2 -- 在新目标构建阶段 elif [ ${CONFIGURATION} == "Release" ]; 然后 cp -r ${PROJECT_DIR}/Settings/ReleaseHHAppStore/Settings.bundle ${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.app fi

如果需要，这将允许您进行一些更可定制的设置**

# objective-c - 在Objective C中没有调用Setter方法

> ID：11366753
> 
> 赞同：1
> 
> 时间：2012-07-06T17:11:55.937
> 
> 标签：objective-c, methods, overriding, setter

当我为我的类覆盖 getter 和 setter 并在`miles`其他地方设置属性时，不会调用 setter 方法。我究竟做错了什么？

我打电话给`miles`这里的物业

```
// "entry" is an object that has a property of type CYDistance

if ([unitLabel.text isEqualToString:@"Miles"]) {
    entry.distance.miles = s.floatValue;
}
else if ([unitLabel.text isEqualToString:@"Kilometers"]) {
    entry.distance.kilometers = s.floatValue;
}
NSLog(@"Miles: %.2f", entry.distance.miles);
NSLog(@"Kilometers: %.2f", entry.distance.kilometers); 
```

距离.h

```
#import <Foundation/Foundation.h>

@interface CYDistance : NSObject {
    float miles, kilometers;
}

@property float miles;
@property float kilometers;

@end 
```

距离.m

```
#import "Distance.h"

@implementation CYDistance

- (float)miles {
    return miles;
}

- (float)kilometers {
    return kilometers;
}

- (void)setMiles:(float)m {
    miles = m;
    kilometers = m * 1.609344;
    NSLog(@"Set miles");
}

- (void)setKilometers:(float)k {
    kilometers = k;
    miles = k / 1.609344;
    NSLog(@"Set kilometers");
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:22:37.280

鉴于以下代码...

```
entry.distance.miles = s.floatValue; 
```

...如果值为`entry.distance`is `nil`，则`miles`不会调用访问器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T18:06:34.997

尝试编写如下实现：

```
#import "Distance.h"

@implementation CYDistance

@synthesize miles = _miles;
@synthesize kilometers = _kilometers;

- (void)setMiles:(float)m {
    _miles = m;
    _kilometers = m * 1.609344;
    NSLog(@"Set miles");
}

- (void)setKilometers:(float)k {
    _kilometers = k;
    _miles = k / 1.609344;
    NSLog(@"Set kilometers");
}

@end 
```

这样在引用 ivars 时就不会出错。

# javascript - Google Direction API 方向信息的语言翻译

> ID：11366757
> 
> 赞同：-1
> 
> 时间：2012-07-06T17:11:59.900
> 
> 标签：javascript, google-maps-api-3, google-translate, google-directions-api, google-translator-toolkit

以下是我获取方向详细信息的代码..

```
<html> 
<head> 
   <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
   <title>Google Maps API v3 Directions Example</title> 
   <script type="text/javascript" 
           src="http://maps.google.com/maps/api/js?sensor=false"></script>
</head> 
<body style="font-family: Arial; font-size: 12px;"> 
   <div style="width: 600px;">
     <div id="map" style="width: 280px; height: 400px; float: left;"></div> 
     <div id="panel" style="width: 300px; float: right;"></div> 
   </div>

   <script type="text/javascript"> 

     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom:7,
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));

     var request = {
       origin: 'Chicago', 
       destination: 'New York',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     });
   </script> 
</body> 
</html> 
```

您可以在浏览器中运行此代码。

![在此处输入图像描述](../Images/14c49b0265f233bfbc7f7154cd98a680.png)

现在我想将这些方向信息翻译成其他语言，如希腊语、德语、俄语等。方向 API 中是否有任何选项可以提供语言代码并基于它给出响应。我知道谷歌翻译器可用但我不知道如何使用它。

请帮忙 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:16:56.247

如果您在显示地图之前已经知道所需的语言，则可以[加载特定的语言地图](https://developers.google.com/maps/documentation/javascript/basics#Localization)：

```
<script type="text/javascript" 
        src="http://maps.googleapis.com/maps/api/js?sensor=false&language=ja"> 
```

[每个 API 版本](https://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1)还有一个支持的语言列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:26:03.240

查看本地化文档：[https ://developers.google.com/maps/documentation/javascript/basics#Localization](https://developers.google.com/maps/documentation/javascript/basics#Localization)

但基本上，您必须使用 GET HTTP 请求指定语言：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&language=ja"> 
```

这是支持语言的电子表格：[https ://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1](https://spreadsheets.google.com/pub?key=p9pdwsai2hDMsLkXsoM05KQ&gid=1)

如果您在运行时不知道用户的语言，您可以`$.getScript`在提示用户选择要使用的语言后，使用 jQuery 函数请求使用正确语言的脚本。

# html - 确保使用 IIS 的浏览器不缓存缓存清单

> ID：11366762
> 
> 赞同：0
> 
> 时间：2012-07-06T17:12:17.457
> 
> 标签：html, iis

我将向我的网络应用程序添加缓存清单。但是，我将把应用程序添加到 IIS，我不确定如何确保“缓存清单文件不能被 HTTP 语义缓存” - 参考[http://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)

任何人都知道如何确保带有 .appcache 扩展名的文件永远不会被浏览器或中间代理缓存？

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:22:55.750

查看 IIS 管理器，

然后为输出缓存选择站点设置 (IS)。为 .appcache 添加规则

转到操作，然后添加..

![在此处输入图像描述](../Images/40edeb31a7fca205f333b4463bed8525.png)

# ms-access - MS Access 文本框更新/追加

> ID：11366767
> 
> 赞同：1
> 
> 时间：2012-07-06T17:12:45.493
> 
> 标签：ms-access, vba

我有一些代码填充了一个名为`text5 Forms!Form3!text5`. 但是每次我单击更新此文本框的按钮时，它都会刷新它。

我希望文本保持固定，并在每次单击按钮时添加新数据。我已经附上了我到目前为止所做的代码

```
Option Compare Database

Private Sub Command0_Click()

  Set db = CurrentDb

  Dim I As Integer
  Dim varNumber As Integer  ' this takes the number for how many times to loop
  Dim strQueryName As String  ' this is for the sql to find lowest rack number
  Dim P  As Integer  'this value is the prod number
  Dim x As Integer   'value from lowestrackSQL

  varNumber = Me.Quantity 'box from form me means this form
  prodnumber = Me.ProdNo  'box from form

  strQueryName = "SQLToFindLowestRackNumber"   'this will be used to execute the query

  strSQL = CurrentDb.QueryDefs(strQueryName).sql   ' this stores the sql but does not run it

  Forms!form3!txtPrint = strResult
  'Stop

  For I = 1 To varNumber  ' uses the quntity value to count how many times to loop

    x = DLookup("locationrack", strQueryName)  'puts value of query into value x
    prod# = prodnumber

    'below puts into imediate view box
    Debug.Print "Line number = " & I; ";  Rack Location = " & x; ";   Product Number = " & prod#; ";"
    'below puts it into form3 text box
    strResult = strResult & " Line Number = " & I & " Rack Location = " & x & "   Product Numner = " & prod# & vbCrLf & ""
    Forms!form3!Text5 = strResult

    'below executes the SQL
    DoCmd.SetWarnings False
    DoCmd.RunSQL "UPDATE [Location] SET [Location].ID = 0 WHERE [Location].RackID =" & x
    DoCmd.SetWarnings True

 Next I

End Sub 
```

正如您所看到的，值`strResult`被传递到文本框，我只想继续将值添加到文本框，即使在我再次重新启动循环后也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:25:19.293

尝试使用其他变量在循环之外声明 strResult：

```
Dim I As Integer
Dim varNumber As Integer  ' this takes the number for how many times to loop
Dim strQueryName As String  ' this is for the sql to find lowest rack number
Dim P  As Integer  'this value is the prod number
Dim x As Integer   'value from lowestrackSQL
Dim strResult as String 
```

因为我认为它每次都会清除它，因为它的范围仅限于 for 循环内

另外，你说的地方

```
Forms!form3!txtPrint = strResult 
```

在下面添加

```
strResult = Forms!form3!text5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T22:25:52.607

```
Forms!Form3!Text5 = strResult 
```

...用变量的值*覆盖文本框的内容。*

要*附加值*而不是覆盖它，您需要执行以下操作：

```
Forms!Form3!Text5 = Forms!Form3!Text5 & strResult 
```

# c# - 表单在运行时可见，但在设计时不可见

> ID：11366768
> 
> 赞同：6
> 
> 时间：2012-07-06T17:12:47.293
> 
> 标签：c#, winforms, visual-studio-2010, windows-forms-designer

我的项目没有错误，我可以通过 F5 运行它，但我无法查看我的“主”表单，因为 [设计] 选项卡告诉我，“为了防止在加载设计器之前可能丢失数据，必须解决以下错误：类名“？”不是该语言的有效标识符。”

但是包含该描述的错误列表显示它位于第 0 行和第 0 列。

构建 | 清洁解决方案没有帮助。

[设计] 页面中的调用堆栈是：

```
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomParser.CodeTypeDeclarationFromCodeClass(CodeClass vsClass)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomParser.OnNamespacePopulateTypes(Object sender, EventArgs e)
at System.CodeDom.CodeNamespace.get_Types()
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomParser.Parse(TextReader codeStream)
at Microsoft.VisualStudio.Design.Serialization.CodeDom.MergedCodeDomParser.System.CodeDom.Compiler.ICodeParser.Parse(TextReader stream)
at System.CodeDom.Compiler.CodeDomProvider.Parse(TextReader codeStream)
at Microsoft.VisualStudio.Shell.Design.Serialization.CodeDom.CodeDomDocDataAdapter.get_CompileUnit()
at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
at System.ComponentModel.Design.Serialization.BasicDesignerLoader.BeginLoad(IDesignerLoaderHost host) 
```

## 更新

关闭VS2010并重新启动解决了它。

这里： http: [//msdn.microsoft.com/query/dev10.query ?appId=Dev10IDEF1&l=EN-US&k=k(WHYDTELPAGE)%3bk(TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22)&rd=真的](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(WHYDTELPAGE)%3bk(TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22)&rd=true)

我找到了一些建议，包括这个（但我不需要尝试，因为让 VS 在回来工作之前去它的房间一两分钟）：

*“从您之前的会话中删除包含设计器布局信息的 [solutionname].suo 文件，然后启动项目并重新构建..”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:18:48.727

我记得我以前看过这个。据此，[这](http://connect.microsoft.com/VisualStudio/feedback/details/497218/the-class-name-is-not-a-valid-identifier-for-this-language-can-reproduce-w-vs-2008)可能是在 VS2008 中发生的编译问题（括号太多），如果它也发生在 VS2010 中，我也不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T15:56:11.703

只需关闭项目并重新打开。

问题已解决 我的项目

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-10T04:50:14.830

重新启动 Visual Studio 2010 对我有用，但它确实看起来像一个错误。

# grails - Grails 管理员（类似于 Django 的）

> ID：11366770
> 
> 赞同：3
> 
> 时间：2012-07-06T17:12:59.650
> 
> 标签：grails, groovy, django-admin, admin

我想知道 Grails 是否存在某种等效的 Django 管理员。如果我理解正确（我是 Groovy 和 Grails 的新手），您应该在 Grails 中生成管理区域的方式是通过脚手架，这最终只是自动代码生成。

相比之下，像 Django 和 Symfony1 这样的框架为管理任务提供了一个应用程序。可以自定义此应用程序（在 Python 中用于 Django 和在 Symfony 中的 YAML）以更改项目的显示方式、列表视图中存在哪些字段、它们出现的顺序、哪些字段是可搜索的等等。

与这种方法相比，自动代码生成有一些缺点。首先，它增加了代码重复。因此，有更多的地方可以编辑来自定义管理员。完成自定义后，您将无法再生成代码，例如，如果您更改模型的字段，则必须手动更改其管理员以反映这一点：再次执行脚手架将覆盖您的自定义。

> 是否存在不依赖代码生成而生成管理区域的 Grails 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:33:45.530

您在寻找动态脚手架吗？

[http://grails.org/doc/latest/guide/scaffolding.html](http://grails.org/doc/latest/guide/scaffolding.html)

（您可以使用[http://grails.org/plugin/angular-scaffolding](http://grails.org/plugin/angular-scaffolding)使其更热）

# spring - 在 Tomcat 中热部署类文件

> ID：11366771
> 
> 赞同：3
> 
> 时间：2012-07-06T17:13:06.747
> 
> 标签：spring, grails, deployment, tomcat6

忘记为什么我需要这样做一分钟......

我需要将一些类文件部署到现有/正在运行的 webapp 中。我无法为此构建和部署整个 WAR。我已将类文件复制到正确的位置。确保文件的权限是正确的。我已经清除了 Tomcat 的工作文件夹。我已经反弹了Tomcat。但它仍在提供旧类文件的结果。

如果重要的话，这些类文件与 Grails 服务类相关，该服务类在 spring 上下文中作为单例加载。我一定错过了一些东西，但不确定它是什么。

更新：我尝试将现有的 WAR 提取到一个目录中并替换其中的类文件，然后将其重新打包到 WAR 中并部署应用程序。仍然没有喜悦。这真是令人费解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:57:59.937

我不确定您使用的是什么操作系统，但我遇到了与此类似的问题，即使在启动 Tomcat 之后，Web 应用程序也不会死机。我在 Windows 上运行我的应用程序，并且`netstat -a`在我试图杀死该应用程序后必须检查 cmd 以查看该端口是否仍在使用中。然后在 Component Services 下检查以杀死 tomcat 服务。重新启动tomcat后应用程序更新正常......我希望这会有所帮助

# android - 为什么我的游戏在 LogCat (Android) 中崩溃且没有错误？

> ID：11366774
> 
> 赞同：1
> 
> 时间：2012-07-06T17:13:21.853
> 
> 标签：android, box2d, andengine

我正在使用 AndEngine 和 Box2D 为 Android 操作系统制作游戏。我遇到了最奇怪的错误，我一辈子都无法弄清楚是什么原因造成的。当它发生时它是相对随机的（尽管它发生在代码中的位置不是随机的），但是我的游戏不可避免地在 LogCat 中崩溃了：

```
 07-06 09:56:56.383: V/AndEngine(14907): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 1 item not yet recycled. Allocated 1 more.
07-06 09:56:56.391: V/AndEngine(14907): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 1 item not yet recycled. Allocated 1 more.
07-06 09:56:56.462: V/AndEngine(14907): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 2 item not yet recycled. Allocated 1 more.
07-06 09:56:56.465: V/AndEngine(14907): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 2 item not yet recycled. Allocated 1 more.
07-06 09:56:56.524: V/AndEngine(14907): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 3 item not yet recycled. Allocated 1 more.
07-06 09:56:56.524: V/AndEngine(14907): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 3 item not yet recycled. Allocated 1 more.
07-06 09:56:56.567: V/AndEngine(14907): org.andengine.input.touch.TouchEvent$TouchEventPool<TouchEvent> was exhausted, with 4 item not yet recycled. Allocated 1 more.
07-06 09:56:56.567: V/AndEngine(14907): org.andengine.util.adt.pool.PoolUpdateHandler$1<TouchEventRunnablePoolItem> was exhausted, with 4 item not yet recycled. Allocated 1 more.
07-06 09:57:00.700: I/dalvikvm(14907): threadid=3: reacting to signal 3
07-06 09:57:00.715: I/dalvikvm(14907): Wrote stack traces to '/data/anr/traces.txt' 
```

顺便说一句，traces.txt 不存在。这是执行此方法后代码崩溃的地方：

```
private void destroyFiller(){ //Deletes filler
    if(filler[fillerNum].active){
        Log.e("destroyFiller","Destroying filler");
        filler[fillerNum].body.setActive(false);
        scene.detachChild(filler[fillerNum].sprite);
        filler[fillerNum].active=false;
        fillerCount--;
        fillersLeftText.setText("Balls left: "+Integer.toString(fillerCount));

        if(fillerCount==0)
            gameOver();
        Log.e("destroyFiller","Destroyed");
    }
} 
```

从这里调用该方法：

```
private ContactListener createContactListener() {
    ContactListener contactListener = new ContactListener()
    {
        @Override
        public void beginContact(Contact contact) {
            if(fillerNum>-1 && contact.getFixtureA().getBody().getUserData()!=null && contact.getFixtureB().getBody().getUserData()!=null){
                String x1 = (String) contact.getFixtureA().getBody().getUserData();
                String x2 = (String) contact.getFixtureB().getBody().getUserData();
                if((x1.equals("fill")&&!x2.equals("dest"))||(x2.equals("fill"))&&!x1.equals("dest")){ //If a filler hits a stationary
                    createStationaryFiller();
                }
                if((x1.equals("dest")&&x2.equals("fill"))||(x1.equals("fill")&&x2.equals("dest"))){ //If a destroyer hits a filler
                    destroyFiller();
                }
            }
        } 
```

我无法弄清楚是什么导致它崩溃。我知道问题可能出在任何地方，但有 500 行代码，我无法全部发布。任何人有任何想法或建议或他们想看到的部分代码？

刚刚检查了未过滤的 LogCat 并找到了这个。对任何人都意味着什么？

```
 07-06 11:21:23.696: V/WindowManager(2480): Dsptch > Window{486f5230 com.prattia.webs.testgfx5/com.prattia.webs.testgfx5.TestGFX5Activity paused=false}
07-06 11:21:23.696: V/InputDevice(2480): ID[0]=0(0) Up(1=>0)
07-06 11:21:23.696: I/PowerManagerService(2480): Ulight 3->7|0
07-06 11:21:23.794: I/DEBUG(10312): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
07-06 11:21:23.794: I/DEBUG(10312): Build fingerprint: 'TMOUS/SGH-T959V/SGH-T959V/SGH-T959V:2.2.1/FROYO/VUVKD1:user/release-keys'
07-06 11:21:23.794: I/DEBUG(10312): pid: 17226, tid: 17256  >>> com.prattia.webs.testgfx5 <<<
07-06 11:21:23.797: I/DEBUG(10312): signal 11 (SIGSEGV), fault addr deadbaad
07-06 11:21:23.797: I/DEBUG(10312):  r0 00000000  r1 afd14921  r2 00000027  r3 00000070
07-06 11:21:23.797: I/DEBUG(10312):  r4 afd42328  r5 00000000  r6 00000000  r7 43095e58
07-06 11:21:23.797: I/DEBUG(10312):  r8 447d7b7c  r9 43095e44  10 43095e2c  fp 00000064
07-06 11:21:23.801: I/DEBUG(10312):  ip 00001730  sp 447d7a60  lr deadbaad  pc afd11f74  cpsr 60000030
07-06 11:21:23.801: I/DEBUG(10312):  d0  643a64696f72646e  d1  6472656767756265
07-06 11:21:23.801: I/DEBUG(10312):  d2  65473a3a6565726e  d3  4242414174614673
07-06 11:21:23.801: I/DEBUG(10312):  d4  6e412f73656e6967  d5  2f656e69676e4564
07-06 11:21:23.801: I/DEBUG(10312):  d6  6e69676e45646e41  d7  7363697379685065
07-06 11:21:23.801: I/DEBUG(10312):  d8  43f0000043988ca5  d9  431d03c843988ca5
07-06 11:21:23.801: I/DEBUG(10312):  d10 408ee46043cf0f5e  d11 408ee4603f800000
07-06 11:21:23.805: I/DEBUG(10312):  d12 408ee46000000000  d13 3f80000000000000
07-06 11:21:23.809: I/DEBUG(10312):  d14 0000000000000000  d15 3faebd1440000000
07-06 11:21:23.809: I/DEBUG(10312):  d16 447d777843f00000  d17 3f78b8603e39a634
07-06 11:21:23.813: I/DEBUG(10312):  d18 3f78fea6d7751d87  d19 3fd5561e206f6f3e
07-06 11:21:23.813: I/DEBUG(10312):  d20 bfc99ad1f3789aec  d21 3fc24a24221605f5
07-06 11:21:23.817: I/DEBUG(10312):  d22 bfbc737776d3846a  d23 3fb7474448cda1bc
07-06 11:21:23.817: I/DEBUG(10312):  d24 bfb3b23aa8f96cd7  d25 3fb10e7e68f17086
07-06 11:21:23.821: I/DEBUG(10312):  d26 bfaddfc803465b60  d27 3fa97c023a66406c
07-06 11:21:23.821: I/DEBUG(10312):  d28 bfa2b4442c6a6c2f  d29 3ff0000000000000
07-06 11:21:23.825: I/DEBUG(10312):  d30 0000000000000000  d31 3ff0000000000000
07-06 11:21:23.829: I/DEBUG(10312):  scr 80000012
07-06 11:21:23.977: I/DEBUG(10312):          #00  pc 00011f74  /system/lib/libc.so
07-06 11:21:23.977: I/DEBUG(10312):          #01  pc 0001921e  /system/lib/libc.so
07-06 11:21:23.981: I/DEBUG(10312):          #02  pc 00023368  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:23.981: I/DEBUG(10312):          #03  pc 000233d0  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:23.981: I/DEBUG(10312):          #04  pc 000239cc  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:23.981: I/DEBUG(10312):          #05  pc 000282c4  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:23.981: I/DEBUG(10312):          #06  pc 00014940  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:23.985: I/DEBUG(10312):          #07  pc 00016e34  /system/lib/libdvm.so
07-06 11:21:23.985: I/DEBUG(10312): code around pc:
07-06 11:21:23.985: I/DEBUG(10312): afd11f54 2d00682d e029d1fb b12b68db c05cf8df
07-06 11:21:23.985: I/DEBUG(10312): afd11f64 f8442001 4798000c e054f8df 26002227
07-06 11:21:23.985: I/DEBUG(10312): afd11f74 2000f88e eec2f7fb f7fc2106 f04feff8
07-06 11:21:23.985: I/DEBUG(10312): afd11f84 91035180 460aa901 96012006 f7fc9602
07-06 11:21:23.989: I/DEBUG(10312): afd11f94 a905eb7e 20024632 eb88f7fc eeaef7fb
07-06 11:21:23.989: I/DEBUG(10312): code around lr:
07-06 11:21:23.989: I/DEBUG(10312): deadba8c ffffffff ffffffff ffffffff ffffffff
07-06 11:21:23.989: I/DEBUG(10312): deadba9c ffffffff ffffffff ffffffff ffffffff
07-06 11:21:23.989: I/DEBUG(10312): deadbaac ffffffff ffffffff ffffffff ffffffff
07-06 11:21:23.989: I/DEBUG(10312): deadbabc ffffffff ffffffff ffffffff ffffffff
07-06 11:21:23.989: I/DEBUG(10312): deadbacc ffffffff ffffffff ffffffff ffffffff
07-06 11:21:23.989: I/DEBUG(10312): stack:
07-06 11:21:23.989: I/DEBUG(10312):     447d7a20  447d7a4c  
07-06 11:21:23.993: I/DEBUG(10312):     447d7a24  00000000  
07-06 11:21:23.993: I/DEBUG(10312):     447d7a28  afd425a0  /system/lib/libc.so
07-06 11:21:23.993: I/DEBUG(10312):     447d7a2c  afd4254c  /system/lib/libc.so
07-06 11:21:23.993: I/DEBUG(10312):     447d7a30  00000000  
07-06 11:21:23.993: I/DEBUG(10312):     447d7a34  afd1596b  /system/lib/libc.so
07-06 11:21:23.993: I/DEBUG(10312):     447d7a38  afd14921  /system/lib/libc.so
07-06 11:21:23.993: I/DEBUG(10312):     447d7a3c  afd14921  /system/lib/libc.so
07-06 11:21:23.997: I/DEBUG(10312):     447d7a40  00000070  
07-06 11:21:23.997: I/DEBUG(10312):     447d7a44  afd42328  /system/lib/libc.so
07-06 11:21:23.997: I/DEBUG(10312):     447d7a48  00000000  
07-06 11:21:23.997: I/DEBUG(10312):     447d7a4c  447d7a74  
07-06 11:21:23.997: I/DEBUG(10312):     447d7a50  43095e58  
07-06 11:21:23.997: I/DEBUG(10312):     447d7a54  afd14bc3  /system/lib/libc.so
07-06 11:21:23.997: I/DEBUG(10312):     447d7a58  df002777  
07-06 11:21:24.001: I/DEBUG(10312):     447d7a5c  e3a070ad  
07-06 11:21:24.001: I/DEBUG(10312): #00 447d7a60  00000000  
07-06 11:21:24.001: I/DEBUG(10312):     447d7a64  43095e40  
07-06 11:21:24.001: I/DEBUG(10312):     447d7a68  43095e58  
07-06 11:21:24.001: I/DEBUG(10312):     447d7a6c  afd14f29  /system/lib/libc.so
07-06 11:21:24.001: I/DEBUG(10312):     447d7a70  afd4254c  /system/lib/libc.so
07-06 11:21:24.001: I/DEBUG(10312):     447d7a74  fffffbdf  
07-06 11:21:24.004: I/DEBUG(10312):     447d7a78  0000008d  
07-06 11:21:24.004: I/DEBUG(10312):     447d7a7c  00000000  
07-06 11:21:24.004: I/DEBUG(10312):     447d7a80  43095e40  
07-06 11:21:24.004: I/DEBUG(10312):     447d7a84  afd19223  /system/lib/libc.so
07-06 11:21:24.004: I/DEBUG(10312): #01 447d7a88  0000008d  
07-06 11:21:24.004: I/DEBUG(10312):     447d7a8c  82140c18  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:24.004: I/DEBUG(10312):     447d7a90  82145aa8  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:24.004: I/DEBUG(10312):     447d7a94  8212336c  /data/data/com.prattia.webs.testgfx5/lib/libandenginephysicsbox2dextension.so
07-06 11:21:24.563: I/BootReceiver(2480): Copying /data/tombstones/tombstone_03 to DropBox (SYSTEM_TOMBSTONE)
07-06 11:21:24.590: I/DEBUG(10312): dumpstate /data/log/dumpstate_app_native.txt
07-06 11:21:24.614: I/dumpstate(17307): begin
07-06 11:21:24.622: I/dalvikvm(2480): threadid=3: reacting to signal 3
07-06 11:21:24.688: D/dalvikvm(2480): GC_FOR_MALLOC freed 1289 objects / 326416 bytes in 122ms
07-06 11:21:24.688: D/dalvikvm(15145): GC_EXPLICIT freed 43 objects / 1608 bytes in 826ms
07-06 11:21:24.739: I/dalvikvm(2480): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.747: I/dalvikvm(2604): threadid=3: reacting to signal 3
07-06 11:21:24.747: I/dalvikvm(2604): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.754: I/dalvikvm(2610): threadid=3: reacting to signal 3
07-06 11:21:24.774: I/dalvikvm(2610): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.813: I/dalvikvm(2613): threadid=3: reacting to signal 3
07-06 11:21:24.817: I/dalvikvm(2613): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.821: I/dalvikvm(2621): threadid=3: reacting to signal 3
07-06 11:21:24.829: I/dalvikvm(2621): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.833: I/dalvikvm(2630): threadid=3: reacting to signal 3
07-06 11:21:24.836: I/dalvikvm(2630): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.840: I/dalvikvm(2636): threadid=3: reacting to signal 3
07-06 11:21:24.872: I/dalvikvm(2636): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.879: I/dalvikvm(2691): threadid=3: reacting to signal 3
07-06 11:21:24.883: I/dalvikvm(2691): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.915: I/dalvikvm(2744): threadid=3: reacting to signal 3
07-06 11:21:24.934: I/dalvikvm(2744): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.942: I/dalvikvm(2767): threadid=3: reacting to signal 3
07-06 11:21:24.946: I/dalvikvm(2767): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.954: I/dalvikvm(3339): threadid=3: reacting to signal 3
07-06 11:21:24.958: I/dalvikvm(3339): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:24.965: I/dalvikvm(5990): threadid=3: reacting to signal 3
07-06 11:21:24.969: I/dalvikvm(5990): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.004: I/dalvikvm(13294): threadid=3: reacting to signal 3
07-06 11:21:25.028: I/dalvikvm(13294): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.028: I/dalvikvm(13691): threadid=3: reacting to signal 3
07-06 11:21:25.040: I/dalvikvm(13691): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.051: I/dalvikvm(13737): threadid=3: reacting to signal 3
07-06 11:21:25.059: I/dalvikvm(13737): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.122: I/dalvikvm(13930): threadid=3: reacting to signal 3
07-06 11:21:25.133: I/dalvikvm(13930): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.137: I/dalvikvm(14722): threadid=3: reacting to signal 3
07-06 11:21:25.141: I/dalvikvm(14722): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.172: I/dalvikvm(15145): threadid=3: reacting to signal 3
07-06 11:21:25.176: I/dalvikvm(15145): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.180: I/dalvikvm(15266): threadid=3: reacting to signal 3
07-06 11:21:25.192: I/dalvikvm(15266): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.196: I/dalvikvm(15684): threadid=3: reacting to signal 3
07-06 11:21:25.196: I/dalvikvm(15684): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.200: I/dalvikvm(16472): threadid=3: reacting to signal 3
07-06 11:21:25.204: I/dalvikvm(16472): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.208: I/dalvikvm(16506): threadid=3: reacting to signal 3
07-06 11:21:25.211: I/dalvikvm(16506): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.239: I/dalvikvm(16523): threadid=3: reacting to signal 3
07-06 11:21:25.243: I/dalvikvm(16523): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.274: I/dalvikvm(16649): threadid=3: reacting to signal 3
07-06 11:21:25.278: I/dalvikvm(16649): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.278: I/dalvikvm(16695): threadid=3: reacting to signal 3
07-06 11:21:25.282: I/dalvikvm(16695): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.286: I/dalvikvm(16701): threadid=3: reacting to signal 3
07-06 11:21:25.290: I/dalvikvm(16701): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.290: I/dalvikvm(16711): threadid=3: reacting to signal 3
07-06 11:21:25.309: I/dalvikvm(16711): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.321: I/dalvikvm(16761): threadid=3: reacting to signal 3
07-06 11:21:25.321: I/dalvikvm(16761): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.325: I/dalvikvm(16767): threadid=3: reacting to signal 3
07-06 11:21:25.340: I/dalvikvm(16767): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.340: I/dalvikvm(16782): threadid=3: reacting to signal 3
07-06 11:21:25.344: I/dalvikvm(16782): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.348: I/dalvikvm(16791): threadid=3: reacting to signal 3
07-06 11:21:25.352: I/dalvikvm(16791): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.352: I/dalvikvm(16797): threadid=3: reacting to signal 3
07-06 11:21:25.360: I/dalvikvm(16797): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.364: I/dalvikvm(16817): threadid=3: reacting to signal 3
07-06 11:21:25.364: I/dalvikvm(16817): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.368: I/dalvikvm(16892): threadid=3: reacting to signal 3
07-06 11:21:25.376: I/dalvikvm(16892): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.379: I/dalvikvm(16926): threadid=3: reacting to signal 3
07-06 11:21:25.379: I/dalvikvm(16926): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:25.383: I/dalvikvm(17226): threadid=3: reacting to signal 3
07-06 11:21:25.387: I/dalvikvm(17226): Wrote stack traces to '/data/anr/traces.txt'
07-06 11:21:26.758: W/PowerManagerService(2480): Timer 0x7->0x3|0x3
07-06 11:21:26.758: I/PowerManagerService(2480): Ulight 7->3|0
07-06 11:21:28.895: D/dalvikvm(13930): GC_EXPLICIT freed 995 objects / 32992 bytes in 46ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T22:46:10.820

这不是一个真正的问题。问题是处理触球的池跟不上触球的速度。例如，如果您有一个可触摸的区域，并且您疯狂地点击它，最终您会说触摸池已用尽。如果您对此感到害怕，请在特定时间内触摸某物的次数加一个很酷的数字。这是冷却代码`import java.util.Timer; 导入 java.util.TimerTask；

```
public class CoolDown{

    private boolean valid;
    private Timer timer;
    private long delay = 2680;
    private static CoolDown instance = null;

public static CoolDown getSharedInstance() {
    if (instance == null) {
        instance = new CoolDown();
    }
    return instance;
}

private CoolDown() {
    timer = new Timer();
    valid = true;
}

public boolean checkValidity() {
    if (valid) {
        valid = false;
        timer.schedule(new Task(), delay);
        return true;
    }
    return false;
}

class Task extends TimerTask {

    public void run() {
        valid = true;
    }

} 
```

}` 你需要做的就是在触摸事件中实现这个

```
 if(!CoolDown.getSharedInstance().checkValidity())
                return false; 
```

这将允许您一次只处理几个事件，因此它不会触发该消息。要更改时间，只需更改以毫秒为单位的延迟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T01:32:21.560

这是一个老问题，但我刚刚遇到了这个问题。

对我来说，这是由于陷入了无限循环。从技术上讲，没有错误，但它可以防止任何事情发生。触摸事件不断堆积，因为它们无法处理。

# javascript - 迭代 JSON 对象以获取自动完成建议

> ID：11366778
> 
> 赞同：0
> 
> 时间：2012-07-06T17:13:33.300
> 
> 标签：javascript, jquery, json, autocomplete, jquery-autocomplete

我收到以下我从源收到的对象 -

```
["road",[["road",53,"0E"],["roadtrip",53,"1E"],["roadrunner",53,"2E"],["roadster",53,"3E"],["roadside",53,"4E"],["roadrage",53,"5E"],["roadcycling",53,"6E"],["roadsideamerica",53,"7E"]],{"k":1,"q":"lpxvQlflqTsJ-2_PMBLImSpu1PU"}] 
```

我想从对象中获取的值：

```
road, roadtrip, roadrunner, roadster and so on. 
```

这是代码

```
 $('#query').autocomplete({
        source: function( request, response ) {
        $.ajax({
        type: "GET",
        url: , // url for the source
        dataType: "json",
        data: { 
            "tags" : request.term
        },
        success: function( data ) {
            related = data[1];
            response(data[1][0]);
        }
        });
    } 
```

但是我只从对象的第一个数组中得到值？例如。`road OE`

应该如何迭代来获取它的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:19:30.467

那是一个数组而不是一个对象，如果你[JSONLint](http://jsonlint.com)它：

```
[
    "road",
    [
        [
            "road",
            53,
            "0E"
        ],
        [
            "roadtrip",
            53,
            "1E"
        ],
        [
            "roadrunner",
            53,
            "2E"
        ],
        [
            "roadster",
            53,
            "3E"
        ],
        [
            "roadside",
            53,
            "4E"
        ],
        [
            "roadrage",
            53,
            "5E"
        ],
        [
            "roadcycling",
            53,
            "6E"
        ],
        [
            "roadsideamerica",
            53,
            "7E"
        ]
    ],
    {
        "k": 1,
        "q": "lpxvQlflqTsJ-2_PMBLImSpu1PU"
    }
] 
```

可以看到第一个键是字符串“road”，第二个是数组，最后一个是对象。

您要查找的项目是主数组的第二个键中的数组的第一个键。

尝试类似：

```
$('#query').autocomplete({
    source: function( request, response ) {
    $.ajax({
    type: "GET",
        url: , // url for the source
        dataType: "json",
        data: { 
            "tags" : request.term
        },
        success: function( data ) {
            var terms = [];

            for (var i=0; i < data[1].length; i++) {
                terms.push(data[1][i][0]);
            }

            respond(terms);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:46:39.523

这应该为您提供您正在寻找的所有元素。然后如何迭代它们取决于您：

```
jQuery.map(data[1], function(item) {return item[0];});
// output: ["road", "roadtrip", "roadrunner", "roadster", ... ] 
```

顺便说一句，对于那些说“这不是一个对象，它是一个数组”的人来说，数组是 JS 中的一种对象。

——斯科特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:19:35.487

提供的数据不是对象。你有一个数组，用括号'[..]'表示。此外，对象具有属性和值，即`{ "road": 53 }`.

假设您有一个格式正确的对象，那么您可以使用 jQuery 中的[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)函数。

然后，您可以遍历有效对象并相应地访问所需的属性。

**HTML**：

```
<div></div> 
```

**jQuery：**

```
var obj = {     
    "road": [
        {
            "name": "roadtrip"
        },
        {
            "name": "roadrunner"
        }
    ]
};

var data = obj.road;

for(var i=0; i < data.length; i++){
    $('div').append(data[i].name + '<br>');
} 
```

演示：http: [//jsfiddle.net/6S6DJ/](http://jsfiddle.net/6S6DJ/)

# windows - 自动为我的数据找到最准确的分类器

> ID：11366786
> 
> 赞同：1
> 
> 时间：2012-07-06T17:14:43.597
> 
> 标签：windows, machine-learning, classification, weka

我正在使用 Weka，并且正在尝试为我的数据集找到最准确的分类器。

选择分类器的界面如下所示：

![在此处输入图像描述](../Images/4d096b1edf1ab6bb72bc0ccae49a29ad.png)

它工作得很好，但它只能让我一次选择一个分类器，这不是很实用。

我能否以某种方式让它在我的数据上运行所有可用的分类器，以便我可以轻松找到最准确的分类器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:38:39.797

您需要使用 weka Experimenter。见下图。我选择了一个数据集和两种不同的分类算法。有关详细信息，请参阅以下教程， [WEKA 实验者教程](http://www.unimaas.nl/datamining/experimenter.pdf)。

![Weka 实验者样本图像](../Images/d926f789c6fcec216fa9010ffd8181a7.png)

# sql-server-2008-r2 - 如何获取 SQL 中每个后续行之间的时间差？

> ID：11366788
> 
> 赞同：0
> 
> 时间：2012-07-06T17:14:52.847
> 
> 标签：sql-server-2008-r2

我需要第 1 行和第 2 行之间的时间差。然后对于第 2 行和第 3 行。是否有可以执行此操作的查询？我的同事已经认为这是不可能的。非常感谢您提前提供的帮助。

```
2012-03-08 15:08:02.260
2012-03-08 15:08:07.180
2012-03-08 15:15:09.220
2012-03-08 15:15:09.330
2012-03-08 15:15:09.457
2012-03-23 13:06:19.913
2012-03-23 13:06:20.980
2012-03-23 13:06:21.440
2012-03-23 13:06:21.480
2012-03-23 13:06:21.550
2012-03-23 13:06:21.567 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:25:18.957

您不清楚粒度，但您可以根据需要调整日期部分。您还应该告诉您的同事有关 Internet 的信息。:-)

```
;WITH x AS 
(
  SELECT col, rn = ROW_NUMBER() OVER (ORDER BY col)
  FROM dbo.table
)
SELECT x.col, 
  s = DATEDIFF(SECOND, x2.col, x.col),
  m = DATEDIFF(MINUTE, x2.col, x.col),
  d = DATEDIFF(DAY,    x2.col, x.col)   
FROM x LEFT OUTER JOIN x AS x2
ON x.rn = x2.rn + 1; 
```

结果：

```
col                      s        m        d
-----------------------  -------  -------  ----
2012-03-08 15:08:02.260  NULL     NULL     NULL
2012-03-08 15:08:07.180  5        0        0
2012-03-08 15:15:09.220  422      7        0
2012-03-08 15:15:09.330  0        0        0
2012-03-08 15:15:09.457  0        0        0
2012-03-23 13:06:19.913  1288270  21471    15
2012-03-23 13:06:20.980  1        0        0
2012-03-23 13:06:21.440  1        0        0
2012-03-23 13:06:21.480  0        0        0
2012-03-23 13:06:21.550  0        0        0
2012-03-23 13:06:21.567  0        0        0 
```

# css - 如何使所有浏览器都兼容css

> ID：11366792
> 
> 赞同：0
> 
> 时间：2012-07-06T17:15:06.170
> 
> 标签：css, internet-explorer, cross-browser

我正在开发一个像这样的标题：

![标题](../Images/90bbbfd928b3ab84eb02b4d5a58986ae.png)

这是代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="css/base1.css">
        <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="lib/js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="lib/js/jquery-ui-1.8.21.custom.min.js"></script>
        <title>Crociere sul web - Ricerca avanzata</title>
    </head>
    <body>
        <div id="header">
            <div id="header_content">
                <div id="text">
                    NAME OF COMPANY
                </div>
                <div id="header_prenotazioni">
                    My prenotation
                </div>
                <div id="header_phone">
                    <img id="phone" src="images/logo/logo_phone.png" /><b>xxxxxxxxxx</b>
                </div>
                <script>
                    ( function(d, s, id) {
                            var js, fjs = d.getElementsByTagName(s)[0];
                            if (d.getElementById(id))
                                return;
                            js = d.createElement(s);
                            js.id = id;
                            js.src = "//connect.facebook.net/it_IT/all.js#xfbml=1";
                            fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));
                </script>
                <div class="fb-like" data-href="https://www.facebook.com/xxxx" data-send="true" data-layout="button_count" data-width="20" data-show-faces="false" data-font="verdana"></div>
                <div id="area_agenzie">
                    <div align="center">
                        AGENCY AREA
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

这是CSS：

```
html, body {
    margin: 0;
    padding: 0
}

div#header {
    width: 100%;
    background-color: #0170a8;
    color: white;
    font-size: 9px;
    font-family: Verdana;
    overflow: hidden;
}
div#header_content {
    margin: 0 auto;
    width: 90em;
    overflow: hidden;

    padding-bottom: 4px;
    padding-top: 4px;

}
div#text{
    float:left;
}

div#header_prenotazioni {
    margin-left: 100px;
    border-left: 1px dotted white;
    border-right: 1px dotted white;
    padding-left: 6px;
    float:left;
    padding-right: 6px;

}
div#header_phone {
    margin-left: 10px;
    font-size: 11px;
    border-right: 1px dotted white;
    padding-right: 6px;
    float:left;
}
div#header_phone img {
    vertical-align: middle;
}
div#area_agenzie {
    background-color: #b5c85f;
    color: #0170a8;
    height: 20px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    font-size: 11px;
    display: inline-block;
    vertical-align: top;
}
div#area_agenzie div {
    margin-top: 3px;
    padding-left:2px;

    padding-right:2px;

} 
```

我的问题是与 IE 不兼容..`AGENCY AREA`下一行继续...我该如何解决？有人能帮我吗？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:18:31.410

您似乎正在使用`float: left`它们中的大多数，以及`display: inline-block`最后一个。由于您有一个固定宽度的容器，因此 IE 的字体渲染似乎足以将最后一个块发送到下一行。

相反，尝试将所有这些替换`float: left`为`display: inline-block`，而不是拥有`width: 90em`，尝试`text-align: center;`。这应该使所有内容都出现在一行上。

# css - 简单的全屏 CSS 滑块

> ID：11366794
> 
> 赞同：0
> 
> 时间：2012-07-06T17:15:07.857
> 
> 标签：css, slider, fullscreen

我正在尝试制作一个非常简单的全屏 CSS 滑块。

[http://jsfiddle.net/Sy4hz/](http://jsfiddle.net/Sy4hz/)

这通常是我做一个非常简单的事情的方式，我想我永远不会有超过五件我想要的东西。我很难弄清楚如何使其全屏显示。使用固定宽度，您可以告诉它照片大小并说移动那么多像素，我正在考虑用百分比来做，并且只是让包含 div 的高度为 100%，如果它是 4 张图像，则将其滑动百分比，25 ,75, 100%。问题是如果图像更宽然后它又很高，那么这个想法就会消失在屏幕上。

有人对如何做到这一点有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:18:39.930

试试[Supersized](http://buildinternet.com/project/supersized/) ;) 它很棒，而且非常可定制。

# matlab - 直方图中的颜色特定箱

> ID：11366796
> 
> 赞同：1
> 
> 时间：2012-07-06T17:15:14.753
> 
> 标签：matlab, histogram

假设我有类似的东西：

```
A = randi(30, [10, 1]);
hist(A) 
```

并且我想将低于某个值（例如 3）的垃圾箱的颜色更改为红色，而将其他垃圾箱的颜色保留为蓝色或其他深色（不重要）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:51:01.900

您可以[`bar`](http://www.mathworks.com/help/techdoc/ref/bar.html)用来帮助您：

```
A = randi(30, [10, 1]);
[N, X] = hist(A);                      %# Extract bin values and positions
idx = N < 3;                           %# Indices of values less than threshold
figure, bar(X, N), hold on             %# Plot histogram in default color
bar(X(idx), N(idx), 'facecolor', 'r')  %# Plot red bars on top 
```

例子：

![在此处输入图像描述](../Images/20328d13688a53669d080093565e71e7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:33:01.433

最简单的方法是创建自己的[颜色图](http://www.mathworks.com/help/techdoc/ref/colormap.html)以用于绘制数据。这样您就可以定义何时需要使用什么颜色。

您应该能够弄清楚如何制作自己的颜色图矩阵，但如果您稍后仍然卡住，只需将代码弹出此处，我们可以看一看。

# android - 启动 SMS 消息意图不再适用于新的 Droid RAZR ICS 操作系统

> ID：11366797
> 
> 赞同：6
> 
> 时间：2012-07-06T17:15:14.733
> 
> 标签：android, sms, android-4.0-ice-cream-sandwich

启动 SMS 消息意图（撰写预填充文本）不再适用于新的 Droid RAZR ICS 操作系统。还有其他方法可以完成这项任务吗？

我都试过了：

```
 Intent sendIntent = new Intent(Intent.ACTION_VIEW); 
    sendIntent.putExtra("sms_body", smsBody); 
    sendIntent.setType("vnd.android-dir/mms-sms"); 
    startActivity(sendIntent); 
```

也试过，

```
Uri.parse(uri); 
```

据我所知，文本消息的正文没有预先填充，同时它对于所有其他设备和操作系统的行为都是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:17:10.720

`ACTION_SENDTO`与 a 一起用于`smsto:` `Uri`您要将消息发送到的电话号码。

您使用的 MIME 类型未记录在案，因此核心 Android 团队或设备制造商可以随意更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T20:00:33.113

我也遇到了这个问题，最终得出结论“sms_body”字符串不再适用于Android 4；而是使用更符合逻辑的 Intent.EXTRA_TEXT 键。

```
 String text = "Hello world";
    i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse("sms:"));
    // i.setType("vnd.android-dir/mms-sms");
    i.putExtra(Intent.EXTRA_TEXT, text);
    i.putExtra("sms_body", text);
    startActivity(i); 
```

这段代码似乎在 Android 2.x 和 Android 4.0 中都有效，尽管我找不到支持它的文档。我选择使用“sms:”URI 而不是使用 mime 类型，因为不幸的是 mime 类型似乎是非标准化的。

# asp.net-mvc - 在其他文件夹上添加控制器/视图

> ID：11366802
> 
> 赞同：1
> 
> 时间：2012-07-06T17:15:35.113
> 
> 标签：asp.net-mvc, visual-studio-2010

> ***最初的旁注**：我正在开发一个作为 WebForms 应用程序启动的混合 WebForms+MVC 应用程序，因此我添加了将其转换为 MVC 的项目 GUID。这意味着我直接在应用程序根目录`Controllers`和文件夹中获取上下文菜单。`Views`这样可行。*

我想知道是否有可能说服 Visual Studio（和 Asp.net MVC 工具）将*Add controller...*和*Add View...*上下文菜单项添加到其他文件夹，而不仅仅是项目根目录上的那些默认菜单项？

原因是我正在开发一个现在与 MVC 混合的 Asp.net WebForms 应用程序。而且由于它在根目录中已经有很多文件夹，我宁愿将新的 MVC 部分分开并将其完全包含在`mvc`文件夹中，因此所有与 MVC 相关的文件都将位于该特定文件夹中。

但是右键单击`mvc\Controllers`并没有给我向导，也没有`mvc\Views`......从控制器代码导航到视图也不起作用......

**有没有办法在 Visual Studio 中自定义它？**用于 VS 的 Asp.net MVC 工具是否有某种可以配置的配置文件？或者在注册表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:32:34.777

如果您希望将 MVC 内容与应用程序的其余部分分开，您可能希望将其放在单独的`Area`. 您将拥有上下文菜单并与现有混乱分开。

# ios - 居中时 UIView 的内容模糊

> ID：11366803
> 
> 赞同：2
> 
> 时间：2012-07-06T17:15:46.683
> 
> 标签：ios, uiview

我有`UIView`它不像整个屏幕那么大，我希望它出现在屏幕中间。我使用以下代码做到了这一点：

```
 self.dialogView.center = CGPointMake(self.view.bounds.size.width / 2.0, self.view.bounds.size.height / 2.0); 
```

不幸的是，当我这样居中时，`UIView`的内容显得模糊。 ![在此处输入图像描述](../Images/43c46650bd2281e97243105c91df9ffa.png)

我已经用这个修复了它：

```
 self.dialogView.center = CGPointMake(self.view.bounds.size.width / 2.0 + 0.5, self.view.bounds.size.height / 2.0); 
```

现在 UIView 的内容应该会出现:)

![在此处输入图像描述](../Images/aa4fabc6aac2853c88b6d47ef3db5b20.png)

你能告诉我为什么那个内容变得模糊，为什么我需要在左边的位置偏移上加上 0.5 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T17:22:15.533

新中心导致控件视图的原点落在半像素上，例如 { 20.5, 20.5 }。由于屏幕不能只绘制半个像素，因此渲染引擎试图通过尽可能扩散图像来获得相同的效果，从而导致图像模糊。

您需要确保所有视图的来源都是整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:22:01.003

好吧，我认为那是由于如何将`UIView`其放置在屏幕的像素网格上。如果您在常规屏幕（72 像素/英寸）上考虑它，0.5 点意味着 0.5 像素，这可能会导致您看到的内容......至少这是我的理论：P

# c# - 如何左右对齐控件？

> ID：11366806
> 
> 赞同：2
> 
> 时间：2012-07-06T17:15:49.647
> 
> 标签：c#, asp.net

我正在使用 ASP.NET 制作动态单选按钮。哪里有一个验证控件，我想对齐这个单选按钮的一侧。

代码：

```
<asp:RadioButtonList
                ID="tiposeg"
                runat="server"
                RepeatColumns="3">
                <asp:ListItem>a</asp:ListItem>
                <asp:ListItem>b/asp:ListItem>
            </asp:RadioButtonList> 
               <asp:RequiredFieldValidator ID="RequiredFieldValidator15" 
                ControlToValidate="tiposeg" 
                ErrorMessage='<% # foo.ErrorMessages.EmptyField %>'
                runat="server"
                /> 
```

问题是：如果使用 进行制作`<asp:RadioButtonList`，`<asp:RequiredFieldValidator`则显示到下一行，不像我使用“HTML pure”来制作，它显示在控件的一侧（无需使用 CSS）。我希望这很清楚。提前感谢。

**编辑** 换句话说，有可能把`<span>`生成的`asp:RequiredFieldValidator`内部`<table>`生成`<asp:RadioButtonList`？

**编辑 2**

我当前的**ASP.NET**代码；

```
 <asp:RadioButtonList 
    ID="RadioButtonList1"
    runat="server"
    RepeatColumns="3">
    <asp:ListItem>abcd</asp:ListItem>
    <asp:ListItem>xyz</asp:ListItem>
    </asp:RadioButtonList>

     </li>
     <li style="display:inline">

    <asp:RequiredFieldValidator 
    ID="ReqiredFieldValidator1"
    runat="server"
    ControlToValidate="RadioButtonList1"
    ErrorMessage="select atleast one radiobutton!"
    /> 
```

表格：

我得到了什么：

![在此处输入图像描述](../Images/23c629fb92ddeb95214373d72ef9654f.png)

我所期待的：

![在此处输入图像描述](../Images/2d41e84097feab45fb31001778b7426e.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T23:34:25.143

您真的想将单选按钮排列在具有多行和多列的网格中吗？如果没有，请删除该`RepeatColumns`属性并添加`RepeatLayout="Flow"`and `RepeatDirection="Horizontal"`：

```
<asp:RadioButtonList runat="server" ID="RadioButtonList1"
    RepeatLayout="Flow" RepeatDirection="Horizontal"> 
```

这将呈现没有包含的单选按钮`<table>`，因此验证器将出现在最后一个单选按钮的右侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:20:13.047

您可以通过将控件放在 DIV 中并将它们都向左浮动来实现您想要的吗？

# php - PHP：创建唯一的目录名称

> ID：11366808
> 
> 赞同：1
> 
> 时间：2012-07-06T17:15:58.200
> 
> 标签：php, dynamic, directory

```
if(!empty($_POST['newdir'])) {
    $dir_base= preg_replace("/[^a-zA-ZÀ-ÿ0-9\s]/",'',$_POST['newdir']);
    $dir_path=$pattern.$dir_base;
    $dir_path_lwr = strtolower($dir_path);

    $old_dirs = glob($pattern.'*', GLOB_ONLYDIR);
    $old_dirs_lwr = array_map('strtolower', $old_dirs);

    $i = 1;
    $cond = true;
    while($cond) {

        if(in_array($dir_path_lwr, $old_dirs_lwr)) {
            $i++;
            $new_base=$dir_base.' '.$i.'';
            $new_path= $pattern.$new_base;
            $dir_path_lwr = strtolower($new_path);
        }
        elseif(!in_array($dir_path_lwr, $old_dirs_lwr)) {
            mkdir($dir_path, 0755);
            $cond = false;
        }
    }
} 
```

**编辑**已将上述内容更改为最新版本。为了测试，我现在只是简单地回显`$cond`var，而不是到处创建目录。'Not In' 参数可以正常工作 - 当发现重复名称时，页面需要大约 10 到 12 秒才能加载，然后才会出现白屏。我认为我的while循环有问题......

我想做的是：

*   向脚本提交新的目录名称
*   清理并转义该名称
*   对照该位置的现有目录检查它 ( `$pattern`)
*   如果没有冲突，则创建目录（works）
*   如果有冲突，附加一个数字（例如，我的目录 2）然后创建目录（不起作用）

因此，基本上如何检查现有文件名，并动态创建唯一名称目录。所有帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:30:20.493

修复它 - 我混淆了循环中的变量。

发布以供将来参考：

```
if(!empty($_POST['newdir'])) {
    $dir_base= preg_replace("/[^a-zA-ZÀ-ÿ0-9\s]/",'',$_POST['newdir']);
    $dir_path=$pattern.$dir_base;
    $dir_path_lwr = strtolower($dir_path);

    $old_dirs = glob($pattern.'*', GLOB_ONLYDIR);
    $old_dirs_lwr = array_map('strtolower', $old_dirs);

    $i = 1;
    $cond = true;
    while($cond) {

        if(in_array($dir_path_lwr, $old_dirs_lwr)) {
            $i++;
            $new_base=$dir_base.' '.$i.'';
            $dir_path= $pattern.$new_base;
            $dir_path_lwr = strtolower($dir_path);
        }
        elseif(!in_array($dir_path_lwr, $old_dirs_lwr)) {
            mkdir($dir_path, 0755);
            $cond = false;
        }
    }
} 
```

# c - 在 Win32 窗口中使用 SDL

> ID：11366811
> 
> 赞同：0
> 
> 时间：2012-07-06T17:16:07.000
> 
> 标签：c, winapi, sdl

我在 Codeblocks 中使用 gcc 在 Windows Xp 上进行 c 编程。

在学习 c 时，我创建了一个基本程序，该程序获取书籍文本文件并计算字母频率。

几个月后，在学习 SDL 基础知识时，我认为创建一个条形图来显示 c 程序的结果是个好主意。

我现在有 2 个工作程序，但不知道如何组合它们。

搜索网络已经产生了许多关于允许 SDL 在 Win32 窗口中显示的 Windows hack 的提及，但我一直无法找到实际的代码例程。

我知道在某些时候我将不得不学习 Windows 编程，但希望我能同时找到一个简短的快速修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:43:18.487

我最终改变了我的方法并编写了一个纯 SDL 程序。

# vba - 如何包装Excel光标以使其保持在特定范围内

> ID：11366823
> 
> 赞同：5
> 
> 时间：2012-07-06T17:17:02.620
> 
> 标签：vba, excel

在 Excel 中，我有三列：

```
column1, column2, column3 
```

我正在使用连接到 IPAD 的条形码扫描仪将数据输入到 Excel 中。条形码扫描仪`ENTER`在每次扫描后发送。我相信我可以设置 excel 这样`ENTER`会导致选择下一列（而不是下一行）

但是，我不知道在`ENTER`检测到`column3`. 现在我有这个：

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    If Target.Column = 3 Then
        If Target.Value = "{enter}" Then
            MsgBox "SDf"
        End If
    End If
End Sub 
```

但`Target.Value` 仅检测单元格内的字符串，它不检测已按下的内容。

**`ENTER`在中检测到后如何获得要选择的下一行`column 3`？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T17:33:00.727

您不需要 vba 代码。

最简单的方法是解锁这三列中的单元格并锁定其余单元格。完成后，保护整张纸。但是，在保护时，请确保取消选中名为“`Select Locked Cells`查看屏幕截图”的选项。黄色列不受保护。

![在此处输入图像描述](../Images/73bf09f7e24349d46c5aa738087182de.png)

下一步是设置excel，以便在输入数据并按下回车键后，光标移动到下一列。您可以从`File TAB | Options | Excel Options | Advanced`

![在此处输入图像描述](../Images/237c7004b0dce0e0092daafa14da6bbc.png)

当光标到达最后一列并输入数据并按下回车键时，光标会自动移动到下一行。见快照。

![在此处输入图像描述](../Images/0f0e03d87d029faee74150fbe7ed7094.png)

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T19:25:03.260

除了 Siddharth 的出色建议之外，还有一种基于事件的方法：

```
Private Sub Worksheet_Change(ByVal Target As Range)

    'named (contiguous) range on input sheet
    Const DATA_NAME As String = "DATA"
    Dim rngData As Range, numCols As Long

    If Target.Cells.Count > 1 Then Exit Sub

    Set rngData = Me.Range(DATA_NAME)
    numCols = rngData.Columns.Count

    If Not Intersect(rngData, Target) Is Nothing Then
        If Target.Column < rngData.Columns(numCols).Column Then
            Target.Offset(0, 1).Select
        Else
            Target.Offset(1, -(numCols - 1)).Select
        End If
    End If

End Sub 
```

# jquery - jQuery Parent 或 Find 方法

> ID：11366825
> 
> 赞同：1
> 
> 时间：2012-07-06T17:17:03.363
> 
> 标签：jquery, parent

我有一个照片库。每张照片都有一个列表，当用 CSS 格式化时，看起来像三个大方块（这是我的评分系统）。当用户将鼠标悬停在方块上时，列表下方会显示说明。这适用于单张照片，但是当我将鼠标悬停在第一张照片的方块上时，会显示所有照片的描述。

```
<div class="ratingContainer">
    <ul class="rating">
        <li class="one"></li>
        <li class="two"></li>
        <li class="three"></li>
    </ul>

    <div class="ratingDesc1">Bad</div>
    <div class="ratingDesc2">Normal</div>
    <div class="ratingDesc3">Good</div>
</div> 
```

我的 jQuery...

```
$(".rating li.one").hover(function(){
    $(".ratingDesc1").show();
}, function(){
    $(".ratingDesc1").hide();
});

$(".rating li.two").hover(function(){
    $(".ratingDesc2").show();
}, function(){
    $(".ratingDesc2").hide();
}); 
```

我已经阅读了这个，看来我需要使用 .parent 或 .find 方法，但所有尝试都没有奏效。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:24:33.410

您需要上移然后再下移 DOM：

```
$(".rating li.one").hover(function() {
    $(this).parents('.ratingContainer').find(".ratingDesc1").show();
}, function() {
    $(this).parents('.ratingContainer').find(".ratingDesc1").hide();
});​ 
```

您还可以使用更通用的方法，而不是为每个评级编写单独的案例，使用以下方法：

```
$(".rating li").hover(function() {
    $(this).parents('.ratingContainer').find('div:eq(' + $(this).index() + ')').show();
}, function() {
    $(this).parents('.ratingContainer').find('div:eq(' + $(this).index() + ')').hide();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:30:35.820

用通用方法做到这一点试试这个

```
$(".rating li").hover(function(){
    $(".ratingDesc:eq(" + $(".rating li").index(this) + ")").show();
}, function(){
    $(".ratingDesc:eq(" + $(".rating li").index(this) + ")").hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:32:00.943

您可以重用代码，而不是根据元素的索引对名称进行硬编码。我设置了一个 JSFiddle 给你看。

[http://jsfiddle.net/3pLr5/6/](http://jsfiddle.net/3pLr5/6/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-06T17:24:21.993

查看这个[Demo](http://jsfiddle.net/hDtJm/)，希望它是您正在寻找的，并且比您的示例更轻量级。

# java - 从 IType 实例化对象

> ID：11366826
> 
> 赞同：1
> 
> 时间：2012-07-06T17:17:05.053
> 
> 标签：java, eclipse, eclipse-jdt

我想知道 Eclipse JDT 是否提供任何 API 函数来从`IType`.

我们正在使用 Eclipse JDT 搜索引擎来检索具有特定接口的类，`Application`例如：

```
public interface Application {
    void launch();
} 
```

使用 JDT 搜索引擎，我们能够得到一个`IType`对象，该对象表示实现该`Application`接口的类。假设实现类有一个无参数构造函数。

我们试图实现的是`Object`从`IType`. 所以，我想知道 JDT 是否提供任何 API 函数来做到这一点。

如果是这样，我们将使用它来实例化`IType`. 如果没有，我们将找到包含的项目，`ClassLoader`从中构建一个，然后使用反射直接实例化该类。

提前谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:29:42.410

没有。反思是要走的路。

# java - 为什么我得到 java.lang.ClassNotFoundException: org.openqa.selenium.chrome.ChromeDriver？

> ID：11366827
> 
> 赞同：1
> 
> 时间：2012-07-06T17:17:06.567
> 
> 标签：java, selenium, junit, webdriver, selenium-chromedriver

我正在使用 Win XP、Selenium webDriver 2.21 和 Maven 3.0.3。我对为什么在一种情况下而不是另一种情况下得到 ClassNotFoundException 感到困惑。在 JUnit 测试中，当我使用此代码实例化 WebDriver ...

```
final Class<?> c = Class.forName(webDriverClass);
driver = (WebDriver) c.newInstance(); 
```

代码因以下异常而死...

```
java.lang.ClassNotFoundException: org.openqa.selenium.chrome.ChromeDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at org.myco.myproject.contractgenerator.ContractGenerator.<init>(ContractGenerator.java:51)
        at org.myco.myproject.contractgenerator.ContractGeneratorTest.setUp(ContractGeneratorTest.java:51)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
java.lang.ClassNotFoundException: org.openqa.selenium.chrome.ChromeDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at org.myco.myproject.accesscodes.pat.AccessCodeGenerator.<init>(AccessCodeGenerator.java:56)
        at org.myco.myproject.contractgenerator.ContractGeneratorTest.setUp(ContractGeneratorTest.java:56)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
        at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
        at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
        at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
        at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
        at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
        at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
        at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
        at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
        at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:53)
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
        at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
        at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68) 
```

但是，如果我将代码替换为

```
driver = new ChromeDriver(); 
```

浏览器生成。我想使用前一种方法，因为它允许我在属性文件中更改驱动程序类。为什么第一种方法失败了，我该如何解决？我在我的 pom.xml 文件中声明我的 Selenium 驱动程序，就像这样......

```
 <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.21.0</version>
    </dependency> 
```

# android - 使用 java 代码创建自定义状态栏通知布局

> ID：11366835
> 
> 赞同：1
> 
> 时间：2012-07-06T17:17:42.167
> 
> 标签：android, android-layout, android-notifications

我正在尝试使用 java 而不是 xml 创建自定义状态栏通知布局。我创建了一个线性布局，设置了所需的参数，在通知远程视图中设置它，但它给了我 FC。（“发布了错误通知”）

这是我的测试代码：

```
LinearLayout layoutTest;
layoutTest = new LinearLayout(this);
layoutTest.setOrientation(LinearLayout.VERTICAL);

LayoutParams paramTest = new LinearLayout.LayoutParams(
             LayoutParams.FILL_PARENT,
             LayoutParams.FILL_PARENT, 1.0f); 

layoutTest.setLayoutParams(paramTest);
layoutTest.setId(R.id.mlinearlayout);

contentView = new RemoteViews(this.getPackageName(), R.id.mlinearlayout);
nbuilder.setContent(contentView);
// and all the other notification builder good stuff 
```

我对 setId() 不是很熟悉，这可能是问题所在吗？对于我创建的 id /res/values/ids.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<item type="id" name="mlinearlayout" />
</resources> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:54:31.770

这可能与`RemoteViews`构造函数期望 XML 文件的标识符有关，而您正在传递元素的标识符。

也许它可以让您更深入地了解 RemoteView 方法的来源，例如`public View apply(Context context, ViewGroup parent)`使用布局 id 在哪里膨胀视图。

您真的必须以编程方式进行吗？XML 似乎是要走的路，至少是记录在案的方法，而且我看不到您的代码中的原因，为什么您需要以编程方式进行操作。

# java - 非侵入式集成测试

> ID：11366836
> 
> 赞同：3
> 
> 时间：2012-07-06T17:17:44.253
> 
> 标签：java, integration-testing

我正在为消息传递系统编写集成测试。大多数测试在流程的各个阶段收集消息及其端到端的各种代码路径的计数。我目前进行的测试变得过于侵入性，因为我`public static AtomicInteger`在这些消息传递组件中有很多 s - 我在处理消息时增加它们 - 然后测试对这些计数进行断言。

更糟糕的是，在部署产品时，我将不得不删除这些计数器——这很容易添加错误。

如何设计我的测试，以便获得通过这些组件的消息计数，而实际上不需要在我的类中填充计数器？我正在考虑对真实组件进行子类化并覆盖方法，并在子类方法中移动计数器 - 并在我的测试中使用这些子类 - 关于更好的设计还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:38:55.113

前段时间我不得不处理完全相同的情况。我有几个组件处理一些消息，然后将它们传递给其他组件。我想出了这个设计：

*   每个组件都实现了一个接口，该接口具有`notify`用于通知并将接收到的消息传递给其他组件的方法
*   每个组件都包含一个在收到消息时需要通知的其他组件的列表
*   在您的测试中，您所要做的就是创建一个虚拟处理器来实现上面定义的接口并在您的所有组件中注册。这样，每当有新消息流入您的系统时，虚拟处理器就会收到通知。在生产中，不会有虚拟处理器，这应该使您的代码适合测试和生产版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:28:30.813

`AtomicInteger`用仅在测试中使用的 static 分散您的代码肯定是一个坏主意。以下是我推荐的几种方法：

*   使用中间件中可用的[jmx](/questions/tagged/jmx "显示标记为“jmx”的问题")或其他监控机制以非侵入方式读取消息计数

*   添加在所有组件中安装侦听器的可能性。在生产环境中使用`null`或空对象模式，而在测试中安装一些简单的侦听器来计算调用/消息。[迪](/questions/tagged/di "显示标记为“di”的问题")会帮助你。

*   使用[aop](/questions/tagged/aop "显示标记为“aop”的问题")或其他仪器技术，类似于上面。

*   测试副作用和输出！不要对流中的确切消息做出假设，只看整体结果是否正确。这样，您的测试就更加灵活，并专注于正在测试的内容。不幸的是，当出现问题时，调试将需要更多时间。

# php - 检测文章中的趋势“反应”（一个或多个）（如 Buzzfeed 等）

> ID：11366837
> 
> 赞同：1
> 
> 时间：2012-07-06T17:17:55.980
> 
> 标签：php, mysql, algorithm

我有一个反应投票系统，可以用以下内容“标记”我的文章：LOL、WTF、OMG 等等……

我想知道在该文章中检测哪些“反应”是“趋势”的最佳解决方案是什么。

例如：[http](http://www.buzzfeed.com/mjs538/pug-stroller-and-a-baby) ://www.buzzfeed.com/mjs538/pug-stroller-and-a-baby它被标记为 WIN、CUTE、LOL

![标记为 WIN, 可爱, LOL](../Images/58e7f0d535b280e64af8363631793627.png)

有了这张票：

![在此处输入图像描述](../Images/06df5c1346bce0223b9fde59b3f803e3.png)

但是这个：[http ://www.buzzfeed.com/daves4/11-animals-having-their-hearts-tickled-out](http://www.buzzfeed.com/daves4/11-animals-having-their-hearts-tickled-out)

只被标记为可爱

![在此处输入图像描述](../Images/49c2299350faa2acbc2e4acd4bc959e3.png)

因为 CUTE 和其他选项之间的差异非常大，无论票数本身。

![在此处输入图像描述](../Images/cb414f274c272bf8a60641f706320a2c.png)

**我已经在我的数据库中为每个反应投票......所以......**

**我想知道什么是最好的方法（php或mysql查询？）来检测什么是最重要的反应......**

**我正在使用 PHP 和 MySQL**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T21:04:44.550

你要这样做的方式完全是个人的——也就是说，它将反映你分析反应的方式。例如，我认为第一个示例不应该被标记为 WIN（但这只是我的意见，当然）。

我会尝试使用模糊逻辑。您可以根据投票百分比定义模糊集，并根据它们定义您的规则。该解决方案的最佳内在品质是您可以微调您的规则库，以便根据您的需要执行分析。

如果您不熟悉模糊集，三角集是更简单的一种，它只是一条从下限到最大值的线，以及另一条从最大值到上限的下降线（请查看[此处](http://www.graco.unb.br/alvares/DOUTORADO/omega.enm.unb.br/pub/doutorado/disco2/ai.iit.nrc.ca/IR_public/fuzzy/fuzzyJDocs/FuzzySet.html)的示例）。

可以根据您的想法临时定义模糊规则。例如：如果百分比非常高，则趋势为高 如果百分比为低，则趋势为低。

之后，你可以对你的“趋势”结论进行去模糊化，并建立一个切割限制，以确定该元素是否存在趋势。

它可能看起来有点压倒性，但实现起来很简单（在互联网上快速搜索让我找到了[这个站点](http://webscripts.softpedia.com/script/Scientific-Engineering-Ruby/Controls-and-Systems-Modeling/Fast-Fuzzy-Implementation-32708.html)），并且您将拥有一个强大的工具，可用于您可能发现的任何后期用途。

# c# - C# Asp.net Membership.GetAllUsers 通过电子邮件订购

> ID：11366838
> 
> 赞同：4
> 
> 时间：2012-07-06T17:18:00.140
> 
> 标签：c#, asp.net, asp.net-mvc-2

我正在使用 Membership.GetAllUsers() 来获取我的用户列表。我希望返回的列表按电子邮件地址排序，因为我需要标记一些具有重复电子邮件的帐户。

Membership.GetAllUsers() 似乎默认按用户名排序。有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T17:23:36.747

如果您可以使用通用列表而不是`MembershipUserCollection`：

```
Membership.GetAllUsers().Cast<MembershipUser>().OrderBy(x => x.Email).ToList(); 
```

如果`OrderBy(x => x.Email, StringComparer.OrdinalIgnoreCase)`您想要不区分大小写的电子邮件地址，请使用此选项。

成员资格代码实际上早于泛型（它是从 .NET 1.1 开发集成到 .NET 2.0 中的），因此`MembershipUserCollection`不实现泛型接口。

鉴于[您之前的问题](https://stackoverflow.com/q/11350949/13087)，您可能对其他 LINQ 样式的操作感兴趣。例如，以下将为您提供一个字典，其键是电子邮件地址（不区分大小写），其值是相应`MembershipUser`对象的列表，按上次活动日期降序排序：

```
var dictionary = Membership.GetAllUsers().Cast<MembershipUser>()
    .GroupBy(x => x.Email, StringComparer.OrdinalIgnoreCase)
    .ToDictionary(
                  x => x.Key, 
                  x =>x.OrderByDescending(u => u.LastActivityDate).ToList()
                 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:30:38.963

下面的代码应该可以做到，但它可能没有最好的性能。

```
Membership.GetAllUsers().Cast<MembershipUser>().OrderBy(m => m.Email); 
```

它在内存中进行排序，而不是作为数据库查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:21:11.067

```
Membership.GetAllUsers().OrderBy(user => user.Email).ToList(); 
```

# php - 如何使用 msqli 防止 mysql 注入 1=1？

> ID：11366839
> 
> 赞同：0
> 
> 时间：2012-07-06T17:18:04.207
> 
> 标签：php, mysql, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

在我的网站中，用户可以提交帖子并删除他们的帖子。

要删除帖子，他们点击链接`/posts.php?deletid=X`，其中 X 是数据库中帖子的 id（例如：1）。

单击后，它将运行以下命令：

```
if(isset($_GET['deleteid'])) { 
    $deleteid = $_GET['deleteid'];
        $sql = "DELETE from `posts` WHERE `id`=".mysql_real_escape_string($deleteid).";";
        $query = mysql_query($sql);
        header('Location: posts.php');
        exit(); 
} 
```

问题是它容易受到 1=1 SQL 注入的攻击。如果他们在地址栏中输入`/posts.php?deletid=1 OR 1=1;` ，它将删除数据库上的所有帖子。

在这个问题中：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)，我意识到我需要使用 mysqli 语句，我试图让它工作但没有成功..

有人可以告诉我如何用mysqli防止这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:21:06.540

使用 MySQLi 和准备好的语句，您无需担心这一点，因为参数不能被替换`1 OR 1=1`（或者如果它作为参数值提供，则它被解释为字符串）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-06T17:19:40.630

您需要使用引号中的值`mysql_real_escape_string`才能产生任何有用的效果。

```
$sql = "DELETE from `posts` WHERE `id`='".mysql_real_escape_string($deleteid)."'"; 
```

或者，代替`mysql_real_escape_string`用于字符串的 ，尝试`intval`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-06T17:33:53.790

通过使用准备好的语句， mysql_* 函数即将被弃用，不应该用这些函数编写新代码，重构你的代码。

## PDO

```
<?php 
$db = new PDO("mysql:host=localhost;dbname=yourDB", $username, $password);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

/*** prepare the SQL statement ***/
$query = $db->prepare("DELETE from `posts` WHERE `id`=:id;");

/*** bind the paramaters ***/
$query->bindParam(':id', $deleteid, PDO::PARAM_INT);

/*** execute ***/
$query->execute();

header('Location: posts.php');
exit(); 
?> 
```

## mysqli

```
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");
/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}
/* create a prepared statement */
if ($stmt = $mysqli->prepare("DELETE from `posts` WHERE `id`=?")) {

    /* bind parameters for markers */
    $stmt->bind_param("i", $deleteid);

    /* execute query */
    $stmt->execute();

    /* close statement */
    $stmt->close();
}
/* close connection */
$mysqli->close();
header('Location: posts.php');
exit(); 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:25:14.097

首先是一件事：如果可以的话，最好不要使用 mysql_* 而是使用 mysqli_* 函数或 PDO，因为第一个函数已经过时了。在那里，您可以使用占位符 ( `?`) 代替字符串连接。你不必关心在那里引用自己的话。

示例代码中最简单的选项是通过整数解析运行所有数字（使用 intval）。

```
if(isset($_GET['deleteid'])) { 
    $deleteid = $_GET['deleteid'];
            $sql = "DELETE from `posts` WHERE `id`=".intval($deleteid).";";
            $query = mysql_query($sql);
            header('Location: posts.php');
            exit(); 
} 
```

# ruby - 如何在红宝石字符串中制作白色字符？

> ID：11366843
> 
> 赞同：1
> 
> 时间：2012-07-06T17:18:29.640
> 
> 标签：ruby, whitespace

我将此查询用于数据库：

```
Category.all.each { |c| c.ancestry = c.ancestry.to_s + (c.ancestry != nil ? "/" : '') + c.id.to_s 

   }.sort {|x,y| x.ancestry <=> y.ancestry 
   }.map{ |c| [" A " * (c.depth - 1) + c.name,c.id]} 
```

在字母**A**之前，我想添加一些白色字符（因为缩进），但是如果我尝试仅添加`" "`(空格) or `\t`，它就不起作用。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:28:48.573

我假设这是在网页上。如果是这样，HTML 中超过 1 个空格将被忽略。相反，您需要使用 CSS 来分隔每个类别，或者使用`&nbsp;`代替空格。

# android - 如何在煎茶的底部标签栏中制作更大的图标？

> ID：11366845
> 
> 赞同：0
> 
> 时间：2012-07-06T17:18:38.063
> 
> 标签：android, cordova, sencha-touch-2, tabbar

在我的应用程序中，我使用 iconCls 添加了带有主页图标和反馈图标的底部标签栏。但当我为安卓平板电脑开发时，它变得非常小。我怎样才能使这些图标变大？以及如何正确对齐？表示左侧一个图标，中间一个图标，右侧另一个图标..

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T08:15:10.310

尝试将 1.65em 值更改为更大的值。但是在任何地方都保持相同的值。

```
.x-tabbar .x-tab .x-button-icon {
  -webkit-mask-size: 1.65em;
  width: 1.65em;
  height: 1.65em;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:33:06.373

对于对齐，使用`iconAlign`

有关尺寸调整，请参阅[sencha 中标签的尺寸](https://stackoverflow.com/questions/10210114/size-of-tab-in-sencha)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T09:41:57.313

这样我就可以增加图标大小：

```
.x-tabbar.x-docked-bottom .x-tab .x-button-icon { -webkit-mask-size: 2.5em; width: 2.5em; height: 2.5em; margin: 0 auto; position: relative; background-color:#D7E4BD; } 
```

# c# - 等级宽恕函数中的条件函数

> ID：11366847
> 
> 赞同：1
> 
> 时间：2012-07-06T17:18:43.710
> 
> 标签：c#, visual-studio-2010

在这段代码中，我认为我几乎是正确的，但它并没有按照我需要的方式计算。代码应该忽略第一个等级，只有当第二个等级更高时。

这是我为它构建的代码，但是当我运行程序时，它总是会计算二年级而不管它的价值。

```
double ComputeGPA()
    {
        if (Count == 0) return 0;
        bool bForgiven = false;
        int nCourseCount = 0;
        int i;
        double gpa = 0.0;
        double gpaToAdd;
        for (i = 0; i < this.Count; i++)
        {
            gpaToAdd = 0.0; 
            Course c = this[i]; 
            gpaToAdd = GradePoints(c.Grade);
            if (c.Grade == null || c.Grade == "W") continue;
            if (bForgiven == false)
            {
                int nRep = FindCourse(c.Number, i + 1);
                if (nRep > 0)
                {
                    Course x = this[i + 1];
                    if(GradePoints(this[nRep].Grade > GradePoints(c.Grade)))
                        gpaToAdd = GradePoints(x.Grade); 
                    // This means we forgive only one grade
                    bForgiven = true;
                    continue;
                }
            }
        gpa = gpa + GradePoints(c.Grade);
        nCourseCount++;
    }
    //If we've forgiven a grade , we divide by one less course
    gpa = (nCourseCount > 0) ? gpa / nCourseCount : 0.0;
    return gpa;
} 
```

我也有这些功能可以使用它：

```
public int FindCourse(int Number, int nStart)
       {
           int i;
           for (i = nStart; i< this.Count; i++)
           {
               Course c = this[i];
               if (c.Number == Number) return i;
           }
           return -1; // Signifies no course was found
       }

public int FindCourse(int Number)
{
    return FindCourse(Number, 0);
} 
```

什么结构可以让它发挥作用？

谢谢你，特拉维斯

以下是一些测试输入：

```
TestTranscript();
    }
    static void TestTranscript()
    {
        Transcript trans = new Transcript();
        trans.Add(new Course(1, 3113, "A", false));
        trans.Add(new Course(1, 3232, "A", false));
        trans.Add(new Course(1, 4212, "A", false));
        trans.Add(new Course(1, 3113, "F", false));
        trans.Add(new Course(1, 4220, "A", false));
        trans.Add(new Course(1, 4234, "A", false));
        trans.Add(new Course(1, 4300, "A", false));
        TranscriptForm frm = new TranscriptForm("Test Transcript", trans);
        frm.ShowDialog();
        MessageBox.Show("GPA is computed to be " + trans.GPA.ToString());
    } 
```

这些是每个字母对应的值：

```
 public static double GradePoints(string grade)
    {
        switch (grade)
        {
            case "A":
            case "A+":
                return 4.0;
            case "A-":
                return 3.7;
            case "B+":
                return 3.3;
            case "B":
                return 3.0;
            case "B-":
                return 3.7;
            case "C+":
                return 2.3;
            case "C":
                return 2.0;
            case "C-":
                return 1.7;
            case "D+":
                return 1.3;
            case "D":
                return 1.0;
            case "D-":
            default:
                return 0.0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:43:15.727

除了 Chris Shain 的评论之外，这部分对我来说看起来很奇怪：

```
 Course x = this[i + 1];
 if(GradePoints(this[nRep].Grade > GradePoints(c.Grade)))
   gpaToAdd = GradePoints(x.Grade); 
```

为什么在这里 i+1 - 这不是列表中的下一个，不一定是相同的课程编号？gpaToAdd 不应该是更好的成绩（this[nRep].Grade）吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:47:25.047

有两个问题导致错误的计算发生。

1）正如其他人所提到的， continue 语句是一个问题。这里的问题是，当您跳过该项目时，您只希望它继续（并设置 bForgiven）。换句话说，它需要包含在 if 语句中，如下所示：

```
if (GradePoints(trans[nRep].Grade) > GradePoints(c.Grade))
{
    gpaToAdd = GradePoints(x.Grade);
    // This means we forgive only one grade
    bForgiven = true;
    continue;
} 
```

2）你正在用这条线循环“这个”

```
for (i = 0; i < this.Count; i++) 
```

稍后您将使用此行搜索相同“c.Number”的另一个成绩

```
int nRep = FindCourse(c.Number, i + 1); 
```

问题是您正在寻找后面的（在列表中）数字并且从不与早期的记录进行比较，因此当它到达第一个“3113”（记录 0）时，它会找到并与第二个（记录 3）进行比较，但是当它到达记录 3 时，它永远不会找到第一个，因为它是从记录 4 开始搜索的。

解决此问题的方法是 FindCourse 从头开始​​搜索到当前，因此在您的示例中，它会触发记录 3 而不是像这样的记录 0 的命中。

```
public int FindCourse(int Number, int nCurrent)
{
    int i;
    for (i = 0; i < nCurrent; i++)
    {
        Course c = this[i];
        if (c.Number == Number) return i;
    }
    return -1; // Signifies no course was found
} 
```

注意：这将需要像这样使用 i 而不是 i+1 调用。

```
int nRep = FindCourse(c.Number, i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:34:56.957

看起来像一个流量控制问题。请参阅我在声明中的`continue`说明：

```
for (i = 0; i < this.Count; i++)
    {
        gpaToAdd = 0.0; 
        Course c = this[i]; 
        gpaToAdd = GradePoints(c.Grade);
        if (c.Grade == null || c.Grade == "W") continue;
        if (bForgiven == false)
        {
            int nRep = FindCourse(c.Number, i + 1);
            if (nRep > 0)
            {
                Course x = this[i + 1];
                if(GradePoints(this[nRep].Grade > GradePoints(c.Grade)))
                    gpaToAdd = GradePoints(x.Grade); 
                // This means we forgive only one grade
                bForgiven = true;

                // This will restart the for loop at the next item, 
                // presumably skipping whatever code you left out
                // below
                continue; 
            }
        }

    // Something else is going on down here that you didnt show us-
    // my guess is something like:
    gpa = gpaToAdd + gpa;
    // but it is getting skipped when a grade is forgiven 
```

此处记录了继续：http: [//msdn.microsoft.com/en-us/library/923ahwt1 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/923ahwt1(v=vs.80).aspx)

# android - Xsd2Code 使用 Mono for Android

> ID：11366848
> 
> 赞同：0
> 
> 时间：2012-07-06T17:18:44.050
> 
> 标签：android, mono, xamarin.android

我正在尝试使用 xsd 读取 XML-> POCO，所以我使用 Xsd2Code 生成器，给我一个简单的 Xml Serializer 代码。当我在常规 Windows 世界中对此进行干测试时，使用我的 XML 从 xml 文件中获取大约 18 个 POCO 没有问题。

乐趣始于 Android 世界。我看到 XML 文件的加载非常完美，没有问题，我有一个完美的 XML 字符串。反序列化完成后，我只得到 xml 文件中的第一个元素，缺少 17 个 POCO。

这里有什么问题？Xml 序列化器/反序列化器在 Mono 中的工作方式不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:03:36.603

我想你应该找到一个在 .NET 上工作但在 MonoDroid 中失败的简化测试用例（简单程序），并将它附加到[http://bugzilla.xamarin.com/中的一个新错误中](http://bugzilla.xamarin.com/)

# wpf - 后面代码中的wpf datagrid行前景

> ID：11366851
> 
> 赞同：2
> 
> 时间：2012-07-06T17:18:51.010
> 
> 标签：wpf, datagrid, foreground

我不想使用 MVVM 并想在后面的代码（在 SelectionChanged EventHandler 函数中）更改我的数据网格上的选定行前景，但我找不到可靠的方法。

我的行可以是黑色、蓝色和红色，但根据某些条件显示具有更高优先级的颜色。选择我应该删除的当前行后，从我的优先级列表中选择黑色。

我有一些课：

```
public class TempClass{ public string cell1 { get; set; }; public string cell2 { get; set; };} 
```

和

```
TempClass[] collection; 
```

与我的数据网格绑定：

```
datagrid.ItemsSource = collection; 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T18:51:10.630

```
var rowStyle = new Style {TargetType = typeof (DataGridRow)};
rowStyle.Setters.Add(new Setter(ForegroundProperty, Brushes.Green));
var rowTrigger = new Trigger {Property = DataGridRow.IsSelectedProperty, Value = true};
rowTrigger.Setters.Add(new Setter(ForegroundProperty, Brushes.Red));
rowTrigger.Setters.Add(new Setter(BackgroundProperty, Brushes.Orange));
rowStyle.Triggers.Add(rowTrigger);

var cellStyle = new Style {TargetType = typeof (DataGridCell)};
var cellTrigger = new Trigger {Property = DataGridCell.IsSelectedProperty, Value = true};
cellTrigger.Setters.Add(new Setter(ForegroundProperty, Brushes.Red));
cellTrigger.Setters.Add(new Setter(BackgroundProperty, Brushes.Orange));
cellStyle.Triggers.Add(cellTrigger);

datagrid.RowStyle = rowStyle;
datagrid.CellStyle = cellStyle; 
```

# c++ - 'PyCObject_Import("cairo", "CAPI")' C++ 调用产生段错误，'import cairo' 在 python 上工作

> ID：11366852
> 
> 赞同：2
> 
> 时间：2012-07-06T17:18:54.207
> 
> 标签：c++, python, segmentation-fault, python-c-api, pycairo

我正在运行 OSX Lion 并尝试使用 python2.7为[goocanvas导入 python 模块。](https://wiki.gnome.org/PyGoocanvas)

我设法成功编译了 pygoocanvas-0.14.1，但是当我尝试`import goocanvas`通过 python2.7 控制台时，我得到了一个段错误。经过一些调试，我被引导到这段代码：

```
DL_EXPORT (void)
initgoocanvas (void)
{
    PyObject *m, *d;
    fprintf(stderr,"init<< \n");

//    Pycairo_IMPORT; // XXX removed, it expands to the line below, anyways
    Pycairo_CAPI = (Pycairo_CAPI_t*) PyCObject_Import("cairo", "CAPI"); // ADDED XXX

    fprintf(stderr,"after import<< \n");
    if (Pycairo_CAPI == NULL) {
        return;
    } 
```

我发现当 goocanvas python 模块的 C++ 代码尝试通过`PyCObject_Import("cairo", "CAPI")`. 但是，如果我尝试通过 python2.7 控制台直接导入 cairo 模块`import cairo`，它可以工作。

我应该如何进行？我有一个盲目的段错误，不知道为什么会发生。记住我设法编译了 python goocanvas 模块，但是在尝试将它导入 python 时它会出现段错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:15:42.547

你使用什么样的控制台？我认为 gtk/glib 有一些钩子可以让主循环与 REPL 同时运行。这意味着线程正在使用中，如果未调用 glib.threads_init() 可能会导致崩溃。

恕我直言，这在设计上被破坏了，因为只需导入 glib 或任何 g* 模块，一个使用任何线程的理智 Python 程序就会突然开始出现段错误。支持线程应该是默认设置。

在我们的例子中，崩溃是由 glib 的日志系统引起的，该系统在没有保存 GIL 的情况下被转发到 Python。

# sql-server-2008 - SQL SERVER 2008 日期差异

> ID：11366858
> 
> 赞同：0
> 
> 时间：2012-07-06T17:19:20.917
> 
> 标签：sql-server-2008

**我有一个列名 logdate，它的日期格式如下**

2011-01-04 23:35:44.000

我想选择 2011 年 6 月 1 日至 2011 年 6 月 30 日之间的其他列，因此查询应该是

```
select * from abc where logdate = ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:22:05.900

您可以使用`>=`和`<`：

```
SELECT *
FROM abc
WHERE logdate >= '20110601' AND logdate < '20110701' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:28:03.237

有许多方法可以操作 SQL 日期时间和表示 SQL 日期时间的字符串：

[http://msdn.microsoft.com/en-us/library/ms186724(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186724(v=sql.105).aspx)

一个非常直接的方法是使用 >= < 运算符。

```
SELECT *
FROM abc
WHERE logdate >= '20110601'
    AND logdate < '20110701' 
```

您要使用 < 7 月 1 日而不是 <= 6 月 30 日的原因是，对日期的字符串解析假定它是该日期的午夜，并且它将排除 6 月 30 日凌晨 12 点之后的任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:22:15.650

假设这`LogDate`是一`DateTime`列，您可以使用以下查询来获取月份的完整范围：

```
WHERE logdate >= '2011-06-01' AND logdate < '2011-07-01' 
```

# objective-c - 如何在 Objective-c 中设计一个经常访问的类

> ID：11366859
> 
> 赞同：2
> 
> 时间：2012-07-06T17:19:22.027
> 
> 标签：objective-c, restkit

所以我有这个服务类，它利用 Restkit 来使用 REST Web 服务。它经常在我的应用程序中使用。我没有在每次使用之前都对其进行初始化，而是创建了一个此类的对象并在 appDelegate 中对其进行了初始化。但这是最好的方法吗？

我想过使用单例，但在多线程环境中有点担心。任何建议将不胜感激。谢谢！

编辑：我应该提到我在 ARC 环境中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:37:00.770

只要对象数据是只读的或受保护的，即使在多线程或 ARC 环境中，单例模式也没有任何问题。当我编写这样的类时，我使用单例并使用 GCD 来保护对它使用的极少数可变数据结构的访问（例如当前正在执行的请求列表以及完成时要执行的完成块）。

如果您支持 iOS 5+ 或 Mac OS X 10.7+，那么新的私有并发队列和屏障会使这更加高效。我不知道 RestKits 多线程，所以你可能需要检查一下，但我仍然推荐一个单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T07:53:41.323

ARC并不重要。只要您了解单例[的消极](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)方面并准备好接受或处理它，该模式就可以正常工作。

我建议的替代方法是设计一个静态类并使用提供者模式。这是我与 RESTKit 一起使用的典型接口（这个接口访问 facebook graph API）。

```
@interface FBProvider : NSObject

+ (BOOL) canMakeRequests;
+ (id) login;
+ (id) logout;

+ (BOOL) application: (UIApplication*) application 
             openURL: (NSURL*) url 
   sourceApplication: (NSString*) sourceApplication 
          annotation: (id) annotation;

+ (id) perform: (RKRequestMethod) method friends: (Friend*) frien;
+ (id) perform: (RKRequestMethod) method boasts: (id) obj;
+ (id) perform: (RKRequestMethod) method invites: (id)obj;
+ (id) perform: (RKRequestMethod) method likes: (id)obj;

@end 
```

没有单例，一切都是静态的，如果您将界面设计为从应用程序数据模型进行操作，而不是您的 Web 服务 UI 更新会自动发生。

或者，如果您觉得必须使用单例，为什么不使用真正的单例应用程序委托。为了扩展，我建议您的 Web 服务或数据提供者成为现有单例的成员，您将永远不必自己担心线程问题，因为希望这些由 Cocoa 处理。

# python - 从检索到的记录中填充 Django 模板

> ID：11366860
> 
> 赞同：0
> 
> 时间：2012-07-06T17:19:29.577
> 
> 标签：python, django, google-app-engine

我很熟悉使用模板来收集数据，但是在显示时是否有一种聪明的方式让 Django 显示字段并用正确的值填充它们。我当然可以手动完成，但模型知道字段类型。我没有看到任何关于此的文档。例如，我从模板中收集数据：

```
 <strong>Company Name</strong>
   <font color="red">{{ form.companyname.errors }}</font>
   {{ form.companyname }} 
```

其中 form 是我的公司模型，包含所有字段。我将如何确保我可以使用这种类型的方法，以便 Django 呈现文本字段并填充当前值。例如，有没有一种方法可以通过以下方式发送值：

```
 myid = int(self.request.get('id'))
    myrecord = Company.get_by_id(myid)
    category_list = CompanyCategory.all()
    path = os.path.join(os.path.dirname(__file__), 'editcompany.html')
    self.response.out.write(template.render(path, {'form': myrecord, 'category_list': category_list})) 
```

我可以对记录执行相同的操作吗？模板是否会填充发送的值？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:00:41.707

听起来您可能对`Form`vs的区别和正确用法感到困惑`ModelForm`

无论您使用哪种类型的表单，表单的模板方面都保持不变：注意：表单中的所有值（只要它绑定到 POST 或具有实例）都将在渲染时预填充。

```
<form class="well" action="{% url member-profile %}" method="POST" enctype="multipart/form-data">{% csrf_token %}
    <fieldset>
        {{ form.non_field_errors }}

        {{ form.display_name.label_tag }}
        <span class="help-block">{{ form.display_name.help_text }}</span>
        {{ form.display_name }}
        <span class="error">{{ form.display_name.errors }}</span>

        {{ form.biography.label_tag }}
        <span class="help-block">{{ form.biography.help_text }}</span>
        {{ form.biography }}
        <span class="error">{{ form.biography.errors }}</span>

        <input type="submit" class="button primary" value="Save" />
    </fieldset>
</form> 
```

如果您想从记录中填充表单（或提交表单作为记录），最好使用`ModelForm`

EX 不显示 User FK 下拉列表的配置文件表单：

```
class ProfileForm(forms.ModelForm):
    """Profile form"""      
    class Meta:
        model = Profile
        exclude = ('user',) 
```

风景：

```
def profile(request):
    """Manage Account"""
    if request.user.is_anonymous() :
        # user isn't logged in
        messages.info(request, _(u'You are not logged in!'))
        return redirect('member-login')

    # get the currently logged in user's profile
    profile = request.user.profile

    # check to see if this request is a post
    if request.method == "POST":
        # Bind the post to the form w/ profile as initial
        form = ProfileForm(request.POST, instance=profile)
        if form.is_valid() :
            # if the form is valid
            form.save()
            messages.success(request, _(u'Success! You have updated your profile.'))
        else :
            # if the form is invalid
            messages.error(request, _(u'Error! Correct all errors in the form below and resubmit.'))
    else:
        # set the initial form values to the current user's profile's values
        form = ProfileForm(instance=profile)

    return render(
        request, 
        'membership/manage/profile.html', 
        {
            'form': form, 
        }
    ) 
```

请注意，外部`else`使用实例初始化表单：`form = ProfileForm(instance=profile)`并且表单提交使用 post 初始化表单，但仍然绑定到实例`form = ProfileForm(request.POST, instance=profile)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T17:51:14.170

[如果您正在查看表单，那么从 Django 的表单框架](https://docs.djangoproject.com/en/1.4/topics/forms/)开始似乎是个好主意，特别[是模型的表单](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)。

# objective-c - 在日期更改时触发重新显示

> ID：11366876
> 
> 赞同：0
> 
> 时间：2012-07-06T17:20:18.757
> 
> 标签：objective-c, date, graphics, drawrect, setneedsdisplay

这可能是一个简单的问题，但我是新手，所以我画了一个空白。

我有一个 2D 图形应用程序，其图形（在 drawRect 中实现）取决于日期。当日期改变时，图形改变，所以我想我需要打电话

```
[myView setNeedsDisplay: YES]; 
```

当日期改变时。我看过计时器的代码，但这似乎不是计时器类型的场景。我将如何检查本地日期是否已更改，以及将该代码放入哪个类？我认为它会在我的主视图中放入 .m 文件中。

除了在日期更改时自动触发之外，最终，应用程序还需要在用户输入时触发（可能是某一天前进或后退的按钮或日期选择器选择时）。

图形渲染得很好，但我没有编写任何日期触发器，因此虽然 drawRect 代码是特定于日期的，但它不会在日期更改时更改。

PS我上面的基本问题已经得到解答，但是现在我去实施它，我意识到我还有另一个问题。我应该在某处有一个属性来跟踪当前显示其配置的日期。显而易见的想法是向持有 NSDate 对象的主视图添加一个属性。但是按照我编写代码的方式，计算是通过子视图类中的方法完成的。那么问题来了，如何从子视图更新主视图的 NSDate 属性。另一种方法是将 NSDate 属性添加到子视图，但是有多个这样的子视图，这似乎是多余的。对此有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T20:22:07.587

您可以`NSTimer`为此使用一个。但是，首先，您需要弄清楚何时`NSTimer`应该触发。您可以使用`NSDate`,`NSCalendar`和`NSDateComponents`为此：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *todayComponents = [calendar components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];
NSDate *today = [calendar dateFromComponents:todayComponents];
// today is the start of today in the local time zone.  Note that `NSLog`
// will print it in UTC, so it will only print as midnight if your local
// time zone is UTC.

NSDateComponents *oneDay = [[NSDateComponents alloc] init];
oneDay.day = 1;
NSDate *tomorrow = [calendar dateByAddingComponents:oneDay toDate:today options:0]; 
```

拥有`tomorrow`后，您可以设置一个在该日期触发的计时器：

```
NSTimer *timer = [[NSTimer alloc] initWithFireDate:tomorrow interval:0 target:self selector:@selector(tomorrowTimerDidFire:) userInfo:nil repeats:NO];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes];
// The run loop retains timer, so you don't need to. 
```

并在`tomorrowTimerDidFire:`：

```
- (void)tomorrowTimerDidFire:(NSTimer *)timer {
    [myView setNeedsDisplay:YES];
} 
```

# c - 如何在 C 中打开文件（fopen/fread）

> ID：11366881
> 
> 赞同：2
> 
> 时间：2012-07-06T17:20:55.043
> 
> 标签：c, fopen

我有一个运行 ubuntu 12.04 的嵌入式板 (beagleboard-xm)，如果它是逻辑 1 或 0，我想读取一个 GPIO 输入。如何`cat /sys/class/gpio/gpio139/value`在 C 中实现？（**值**文件存储 0 或 1）
我通过以下方式打开文件：

```
FILE *fp;
fp = fopen("/sys/class/gpio/gpio139/value", "rb"); 
```

接下来我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:23:46.507

如果你想读一个字符，试试这个：

```
int value = fgetc(fp);
/* error checking */
value = value - '0'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:24:29.680

尝试打开文件后，您检查是否`fopen()`成功。

然后您可以使用任何`stdio`函数来读取数据：

*   `getc()`
*   `fgetc()`
*   `fgets()`
*   `fread()`

可能还有其他人。例如，您可能正在查看`scanf()`家庭，但很可能不会使用它们。哪个最合适取决于读取的数据；是文本还是二进制。如果是单个字符，则`getc()`; 如果它是文本和面向行的，也许`fgets()`；如果是二进制，可能`fread()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T17:25:18.443

您可以读取一个字节，或者直到 eof：

```
 char buffer[32]; // Very long number!

 if (NULL == (fp = fopen(FILENAME, "rb")))
 {
     // TODO: return a suitable error/perror
     return -1;
 }
 bytesread = fread(buffer, sizeof(char), sizeof(buffer)-1, fp);
 fclose(fp);
 if (!bytesread)
 {
     // Nothing at all was read
     // TODO: return error
     return -2;
 }
 // This is in case you want the byte interpreted from ASCII
 // otherwise you'd just return buffer[0], or (*(DATATYPE *)buffer)[0].
 buffer[bytesread] = 0x0;
 return atol(buffer); 
```

这段代码实际上并不那么通用，因为许多硬件设备将实现阻塞数据通道 - 也就是说，如果您尝试读取的数据多于那里的数据，则 fread 将阻塞，直到数据可用。在这种情况下，只需将缓冲区的大小调整为您需要的最大字节数加一。

fread 中的加一和相应的 -1 仅适用于您读取的数据呈现为 ASCII 的情况，即“128”是三个 ASCII 字节“1”、“2”、“8”甚至可能是回车，而不是二进制 0x80。在这种情况下，缓冲区以零结尾，以使其成为 C 字符串，atol 可以在该字符串上操作以检索十进制数。

如果需要的是二进制值，则不需要进行这种转换，无需调整即可读取整个缓冲区，避免将最后一个加一个字节设置为零，只需从缓冲区返回一个强制转换值；如果只需要一个字节，则为 buffer[0]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:37:39.653

如果您可以访问您的 Linux 标头，那么我建议您使用 Linux API 访问 GPIO。

将此包含在您的文件中：

`#include <linux/gpio.h>`

现在您可以访问以下功能：

*   `int gpio_is_valid(int number);`
*   `int gpio_get_value(unsigned gpio);`
*   `void gpio_set_value(unsigned gpio, int value);`

在您的情况下，您可以这样写：

```
int io_ret = -1;
if (gpio_is_valid(139))
    io_ret = gpio_get_value(139); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-18T18:31:33.397

我认为如果你使用它会更好：

```
system("echo  /sys/class/gpio/gpio139/value >> temp.txt "); 
```

之后很容易你可以从中`temp.txt`提取`0`值`1`

# wordpress - wordpress 中的外观菜单选项

> ID：11366890
> 
> 赞同：1
> 
> 时间：2012-07-06T17:21:30.570
> 
> 标签：wordpress, wordpress-theming

我是 wordpress 主题设计的新手。我创建了一个新主题，但在外观菜单中它只显示

*   主题
*   小部件
*   编辑

就像预先构建的 wp 主题（二十和二十一文）一样，我想要所有其他菜单选项。

*   主题
*   小部件
*   菜单
*   主题选项
*   标题
*   背景
*   编辑

我在谷歌上搜索，只找到了如何添加菜单选项，但没有找到其他选项的解决方案。请帮助我并告诉我它的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:53:37.133

**更新的答案**

自定义背景：[http ://codex.wordpress.org/Custom_Backgrounds](http://codex.wordpress.org/Custom_Backgrounds)

你需要添加主题支持

[http://codex.wordpress.org/Function_Reference/add_theme_support](http://codex.wordpress.org/Function_Reference/add_theme_support)

对于小部件[http://codex.wordpress.org/Function_Reference/register_sidebar](http://codex.wordpress.org/Function_Reference/register_sidebar)

实际上玩一下二十一或**二十一**，你会在那里看到代码。大多数在functions.php中，然后是sidebar.php

快乐编码:)

* * *

您确定您当前登录的用户是管理员吗？

如果是，可能您的functions.php 或其他php 文件中有一些代码，或者某些插件禁用了这些选项。

你能检查是否有这样的代码

```
remove_submenu_page('themes.php', 'theme_options'); 
```

参考： [http ://codex.wordpress.org/Function_Reference/remove_submenu_page](http://codex.wordpress.org/Function_Reference/remove_submenu_page)

# ruby-on-rails - Ruby on rails 使用 post 方法重定向到另一个视图

> ID：11366891
> 
> 赞同：0
> 
> 时间：2012-07-06T17:21:31.993
> 
> 标签：ruby-on-rails, http-post

正如你们中的一个人在我[之前](https://stackoverflow.com/questions/11365768/ruby-on-rails-password-is-visible-in-url-as-parameter)的问题中所说的那样，我试图提出一个帖子请求。

这是我的登录视图

```
<%= form_for :check_validity, :method => "post", :url => {:action => "check_validity"} do |f| %>            
              <%= f.label :username %>
                  <%= f.text_field :username %><br />
                  <%= f.label :password %>
                  <%= f.password_field (:password)%><br />
                  <%= f.submit "Submit"%>
                <% end%> 
```

由于`check_validity`是一种`post`方法，我在我的 post 方法中编写了以下代码

```
def check_validity
     @USER = params[:display_command_list][:username]
     @PASS = params[:display_command_list][:password]      
     @HOST = 'hostname'
     Net::SSH.start( @HOST, @USER, :password => @PASS ) do|ssh|
     @result = ssh.exec!("command")
     end
         if(@result =~ /somestring/)
          redirect_to display_command_list_path({:username => @USER, :password => @PASS})
         else
          redirect_to denied_access_path
         end
  end 
```

但是当我在登录页面输入用户名和密码并单击提交按钮时，它会转到此发布方法并给我`"Missing template authorization/check_validity"`错误。我包括`post "authorization/check_validity"`在我的`routes.rb`. 看来我在这里遗漏了一些非常基本的东西:(。请让我知道为什么它不能重定向到我提到的路径而不是寻找`check_validity.html.erb`

我记得当我们脚手架时，点击新帖子并提交它，它重定向到创建方法，这是一个帖子请求，然后自动重定向到显示方法，它是`'get'.`如何理解创建后它应该去“显示”的? 我试图在这里复制它但失败了。请帮忙。

更新：我在[这里](https://stackoverflow.com/questions/985596/redirect-to-using-post-in-rails)看到并理解我们不应该在 POST 方法中使用重定向。但是我将如何使用这些信息并去`denied_acess_path`或`display_command_list_path`来自这个`check_validity`方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:04:41.753

我想我解决了这个问题。

在登录方法中，我使用了以下代码

```
 def login

  respond_to  do |format|   
  format.html
  end

  end 
```

当我删除 respond_to 块时，我能够执行代码。但我仍然不知道为什么会这样。对标签的响应是否在寻找 check_validity.html.erb 而不是 login.html.erb？

# python - 在其消费者中处理生成器异常

> ID：11366892
> 
> 赞同：36
> 
> 时间：2012-07-06T17:21:34.007
> 
> 标签：python, exception-handling, generator

[这是处理生成器中抛出的异常](https://stackoverflow.com/q/11366064/989121)的后续内容，并讨论了一个更普遍的问题。

我有一个读取不同格式数据的函数。所有格式都是面向行或面向记录的，并且对于每种格式都有一个专用的解析功能，作为生成器实现。所以主读取函数得到一个输入和一个生成器，它从输入中读取其各自的格式并将记录传递回主函数：

```
def read(stream, parsefunc):
    for record in parsefunc(stream):
        do_stuff(record) 
```

`parsefunc`类似的东西在哪里：

```
def parsefunc(stream):
    while not eof(stream):
        rec = read_record(stream)
        do some stuff
        yield rec 
```

我面临的问题是虽然`parsefunc`可以抛出异常（例如从流中读取时），但它不知道如何处理它。负责处理异常的函数是main`read`函数。请注意，异常发生在每条记录的基础上，因此即使一条记录失败，生成器也应继续其工作并返回记录，直到整个流耗尽。

在上一个问题中，我尝试放入`next(parsefunc)`一个`try`块，但事实证明，这是行不通的。所以我必须添加`try-except`到`parsefunc`自身，然后以某种方式向消费者提供异常：

```
def parsefunc(stream):
    while not eof(stream):
        try:
            rec = read_record()
            yield rec
        except Exception as e:
            ????? 
```

我不太愿意这样做，因为

*   `try`在不打算处理任何异常的函数中使用是没有意义的
*   我不清楚如何将异常传递给消费函数
*   会有很多格式和很多`parsefunc`'s，我不想用太多的帮助代码弄乱它们。

有没有人建议更好的架构？

googlers 的注意事项：除了最佳答案之外，还要注意[senderle](https://stackoverflow.com/a/11419139/989121)和[Jon 的](https://stackoverflow.com/a/12655987/989121)帖子——非常聪明和有见地的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-07T11:20:14.223

您可以在 parsefunc 中返回记录和异常的元组，并让使用者函数决定如何处理异常：

```
import random

def get_record(line):
  num = random.randint(0, 3)
  if num == 3:
    raise Exception("3 means danger")
  return line

def parsefunc(stream):
  for line in stream:
    try:
      rec = get_record(line)
    except Exception as e:
      yield (None, e)
    else:
      yield (rec, None)

if __name__ == '__main__':
  with open('temp.txt') as f:
    for rec, e in parsefunc(f):
      if e:
        print "Got an exception %s" % e
      else:
        print "Got a record %s" % rec 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-29T19:57:05.287

更深入地思考在更复杂的情况下会发生什么证明了 Python 选择避免从生成器中冒泡异常的选择是正确的。

如果我从流对象中得到 I/O 错误，那么在不以某种方式重置生成器本地结构的情况下，简单地能够恢复并继续读取的几率会很低。为了继续，我必须以某种方式使自己与阅读过程相协调：跳过垃圾，推回部分数据，重置一些不完整的内部跟踪结构等。

只有生成器有足够的上下文来正确地做到这一点。即使您可以保留生成器上下文，让外部块处理异常也会完全违反得墨忒耳法则。周围块需要重置和继续前进的所有重要信息都在生成器函数的局部变量中！尽管可能，获取或传递这些信息是令人作呕的。

产生的异常几乎总是在清理后抛出*，*在这种情况下，读取器生成器将已经有一个内部异常块。非常努力地在脑死亡简单的情况下保持这种清洁，只是让它在几乎所有现实情况下都崩溃是愚蠢的。所以只要*在*生成器中，无论如何`try`你都需要块的主体，在任何复杂的情况下。`except`

不过，如果异常情况看起来像异常，而不像返回值，那就太好了。所以我会添加一个中间适配器来实现这一点：生成器将产生数据或异常，如果适用，适配器将重新引发异常。适配器应该在 for 循环中首先被调用，这样我们就可以选择在循环中捕获它并清理以继续，或者跳出循环以捕获它并放弃该过程。我们应该在设置周围放置某种蹩脚的包装器，以表明技巧正在发生，并在函数正在适应时强制调用适配器。

这样一来，每一层都会出现它具有要处理的上下文的错误，代价是适配器有点侵入性（而且可能也很容易忘记）。

所以我们会有：

```
def read(stream, parsefunc):
  try:
    for source in frozen(parsefunc(stream)):
      try:
        record = source.thaw()
        do_stuff(record)
      except Exception, e:
        log_error(e)
        if not is_recoverable(e):
          raise
        recover()
  except Exception, e:
    properly_give_up()
  wrap_up() 
```

（这两个`try`块是可选的。）

适配器看起来像：

```
class Frozen(object):
  def __init__(self, item):
    self.value = item
  def thaw(self):
    if isinstance(value, Exception):
      raise value
    return value

def frozen(generator):
    for item in generator:
       yield Frozen(item) 
```

`parsefunc`看起来像：

```
def parsefunc(stream):
  while not eof(stream):
    try:
       rec = read_record(stream)
       do_some_stuff()
       yield rec
    except Exception, e:
       properly_skip_record_or_prepare_retry()
       yield e 
```

为了更难忘记适配器，我们还可以将 freeze 从一个函数更改为 parsefunc 上的装饰器。

```
def frozen_results(func):
  def freezer(__func = func, *args, **kw):
    for item in __func(*args, **kw):
       yield Frozen(item)
  return freezer 
```

在这种情况下，我们将声明：

```
@frozen_results
def parsefunc(stream):
  ... 
```

而且我们显然不会费心声明`frozen`或将其包装在对`parsefunc`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-10T17:58:01.707

如果不了解该系统的更多信息，我认为很难判断哪种方法最有效。但是，没有人建议的一种选择是使用*回调*。鉴于只`read`知道如何处理异常，这样的事情可能会奏效吗？

```
def read(stream, parsefunc):
    some_closure_data = {}

    def error_callback_1(e):
        manipulate(some_closure_data, e)
    def error_callback_2(e):
        transform(some_closure_data, e)

    for record in parsefunc(stream, error_callback_1):
        do_stuff(record) 
```

然后，在`parsefunc`：

```
def parsefunc(stream, error_callback):
    while not eof(stream):
        try:
            rec = read_record()
            yield rec
        except Exception as e:
            error_callback(e) 
```

我在这里对可变本地使用了闭包；你也可以定义一个类。另请注意，您可以通过回调内部访问`traceback`信息。`sys.exc_info()`

另一种有趣的方法*可能*是使用`send`. 这会有点不同。基本上，`read`可以检查 的结果，而不是定义回调，`yield`执行许多复杂的逻辑和`send`替代值，然后生成器将重新生成（或执行其他操作）。这有点异国情调，但我想我会提到它以防万一它有用：

```
>>> def parsefunc(it):
...     default = None
...     for x in it:
...         try:
...             rec = float(x)
...         except ValueError as e:
...             default = yield e
...             yield default
...         else:
...             yield rec
... 
>>> parsed_values = parsefunc(['4', '6', '5', '5h', '22', '7'])
>>> for x in parsed_values:
...     if isinstance(x, ValueError):
...         x = parsed_values.send(0.0)
...     print x
... 
4.0
6.0
5.0
0.0
22.0
7.0 
```

就其本身而言，这有点无用（“为什么不直接从 打印默认值`read`？”你可能会问），但你可以`default`在生成器内部做更复杂的事情，重置值，后退一步，等等。您甚至可以根据收到的错误等待此时*发送回调。*但请注意，`sys.exc_info()`一旦生成器 s，它就会被清除，因此如果您需要访问回溯，则`yield`必须发送所有内容。`sys.exc_info()`

这是一个如何组合这两个选项的示例：

```
import string
digits = set(string.digits)

def digits_only(v):
    return ''.join(c for c in v if c in digits)

def parsefunc(it):
    default = None
    for x in it:
        try:
            rec = float(x)
        except ValueError as e:
            callback = yield e
            yield float(callback(x))
        else:
            yield rec

parsed_values = parsefunc(['4', '6', '5', '5h', '22', '7'])
for x in parsed_values:
    if isinstance(x, ValueError):
        x = parsed_values.send(digits_only)
    print x 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T18:06:01.203

一个可能的设计示例：

```
from StringIO import StringIO
import csv

blah = StringIO('this,is,1\nthis,is\n')

def parse_csv(stream):
    for row in csv.reader(stream):
        try:
            yield int(row[2])
        except (IndexError, ValueError) as e:
            pass # don't yield but might need something
        # All others have to go up a level - so it wasn't parsable
        # So if it's an IOError you know why, but this needs to catch
        # exceptions potentially, just let the major ones propogate

for record in parse_csv(blah):
    print record 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-28T16:02:29.130

我喜欢给定的答案`Frozen`。基于这个想法，我想出了这个，解决了我还不喜欢的两个方面。首先是写下来所需的模式。第二个是在产生异常时丢失堆栈跟踪。我尽我所能通过使用尽可能好的装饰器来解决第一个问题。`sys.exc_info()`我尝试通过使用而不是单独使用异常来保持堆栈跟踪。

我的生成器通常（即没有应用我的东西）看起来像这样：

```
def generator():
  def f(i):
    return float(i) / (3 - i)
  for i in range(5):
    yield f(i) 
```

如果我可以将其转换为使用内部函数来确定要产生的值，我可以应用我的方法：

```
def generator():
  def f(i):
    return float(i) / (3 - i)
  for i in range(5):
    def generate():
      return f(i)
    yield generate() 
```

这还没有改变任何东西，像这样调用它会引发一个带有正确堆栈跟踪的错误：

```
for e in generator():
  print e 
```

现在，应用我的装饰器，代码将如下所示：

```
@excepterGenerator
def generator():
  def f(i):
    return float(i) / (3 - i)
  for i in range(5):
    @excepterBlock
    def generate():
      return f(i)
    yield generate() 
```

光学变化不大。你仍然可以像以前使用版本一样使用它：

```
for e in generator():
  print e 
```

并且在调用时您仍然可以获得正确的堆栈跟踪。（现在只剩下一帧了。）

但现在你也可以像这样使用它：

```
it = generator()
while it:
  try:
    for e in it:
      print e
  except Exception as problem:
    print 'exc', problem 
```

通过这种方式，您可以在消费者中处理生成器中引发的任何异常，而不会带来太多的语法麻烦，也不会丢失堆栈跟踪。

装饰器的拼写如下：

```
import sys

def excepterBlock(code):
  def wrapper(*args, **kwargs):
    try:
      return (code(*args, **kwargs), None)
    except Exception:
      return (None, sys.exc_info())
  return wrapper

class Excepter(object):
  def __init__(self, generator):
    self.generator = generator
    self.running = True
  def next(self):
    try:
      v, e = self.generator.next()
    except StopIteration:
      self.running = False
      raise
    if e:
      raise e[0], e[1], e[2]
    else:
      return v
  def __iter__(self):
    return self
  def __nonzero__(self):
    return self.running

def excepterGenerator(generator):
  return lambda *args, **kwargs: Excepter(generator(*args, **kwargs)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-04T02:46:02.593

（我回答了 OP 中链接的另一个问题，但我的回答也适用于这种情况）

我需要解决这个问题几次，并在搜索其他人做了什么后发现了这个问题。

一个选项（可能需要稍微重构一些东西）是简单地创建一个错误处理生成器，以及生成器中`throw`的异常（到另一个错误处理生成器）而不是`raise`它。

下面是错误处理生成器函数的样子：

```
def err_handler():
    # a generator for processing errors
    while True:
        try:
            # errors are thrown to this point in function
            yield
        except Exception1:
            handle_exc1()
        except Exception2:
            handle_exc2()
        except Exception3:
            handle_exc3()
        except Exception:
            raise 
```

为函数提供了一个附加`handler`参数，`parsefunc`因此它可以放置错误：

```
def parsefunc(stream, handler):
    # the handler argument fixes errors/problems separately
    while not eof(stream):
        try:
            rec = read_record(stream)
            do some stuff
            yield rec
        except Exception as e:
            handler.throw(e)
    handler.close() 
```

现在几乎只使用原始`read`函数，但现在使用错误处理程序：

```
def read(stream, parsefunc):
    handler = err_handler()
    for record in parsefunc(stream, handler):
        do_stuff(record) 
```

这并不总是最好的解决方案，但它肯定是一种选择，并且相对容易理解。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-06T19:20:47.383

关于将异常从生成器传播到消费函数的观点，您可以尝试使用错误代码（错误代码集）来指示错误。虽然不优雅，但这是您可以想到的一种方法。

例如，在下面的代码中产生一个像 -1 这样的值，您期望一组正整数会向调用函数发出错误信号。

```
In [1]: def f():
  ...:     yield 1
  ...:     try:
  ...:         2/0
  ...:     except ZeroDivisionError,e:
  ...:         yield -1
  ...:     yield 3
  ...:     

In [2]: g = f()

In [3]: next(g)
Out[3]: 1

In [4]: next(g)
Out[4]: -1

In [5]: next(g)
Out[5]: 3 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-05T10:54:51.867

实际上，生成器在几个方面非常有限。您发现了一个：引发异常不是其 API 的一部分。

你可以看看 Stackless Python 的东西，比如 greenlets 或 coroutines，它们提供了更多的灵活性；但是在这里深入研究有点超出了范围。

# android - 我的应用程序的主目录是否有文件 url 快捷方式？

> ID：11366898
> 
> 赞同：3
> 
> 时间：2012-07-06T17:21:51.790
> 
> 标签：android

您可以使用“android_asset”引用带有文件 url 的资产文件，如`file:///android_asset/whatever`. 应用程序的主目录是否有等价物？我将在静态 html 文件中使用引用，所以我不想调用`getFilesDir()`. 我很确定该目录将始终为`/data/data/[package]/files`，但如果在奇怪的设备上有所不同，我想知道是否有文件 url 快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:28:15.570

您可以将文件放入`res/raw`文件夹中。例如，您的文件是`page1.html`，要在您的活动中使用它：

```
InputStream is = getResources().openRawResource(R.raw.page1); 
```

更多参考资料：[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)。

# jstl - 如何包含来自另一个文件的 JSTL 变量？

> ID：11366906
> 
> 赞同：3
> 
> 时间：2012-07-06T17:22:12.453
> 
> 标签：jstl

我想要一个“常量”的 JSTL 文件并在其他文件中引用它们。

例如

常量.jsp：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<c:set var="colour" value="blue"/>
<c:set var="car">Audi</c:set> 
```

* * *

其他文件：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<c:import url="constants.jsp"/>
<p>I drive an ${car} which is ${colour}</p> 
```

* * *

上面的代码（显然）不起作用。我怎样才能得到类似工作的东西？

如果我也可以使用命名空间，则可以加分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T17:59:06.340

您可以使用包含指令：

```
<%@include file="/constants.jsp" %> 
```

或者您可以使用动态包含，但是变量必须存储在请求中，而不是页面范围：

```
<jsp:include page="/constants.jsp" />

<c:set var="colour" value="blue" scope="request"/>
<c:set var="car" scope="request">Audi</c:set> 
```

但最好的方法可能是将所有这些常量放在一个对象中，并将该对象存储在来自 servlet 或过滤器的请求（或会话或应用程序）中：

```
private class Constants {

    private String color = "blue";
    private String car = "Audi";

    public String getColor() {
        return color;
    }

    public String getCar() {
        return car;
    }
}

...

request.setAttribute("constants", new Constants());

...

<p>I drive an ${constants.car} which is ${constants.color}</p> 
```

# c++ - 如何传递一个常量对象

> ID：11366908
> 
> 赞同：0
> 
> 时间：2012-07-06T17:22:15.487
> 
> 标签：c++, constants

我有一个配置类，我想在构造函数中传递给另一个类（称为 Use）。我想将配置类存储在 Use 类中作为私有成员变量。我希望它是常量。

到目前为止，我有这个代码：

```
class Configuration{
private:
    int value1_;
public:
    Configuration();
    Configuration(int value1){value1_=value1;}
    int value1() const {
        return value1_;
    }
};

class Use{
private:
    //const me
    Configuration config_;
    int something_;
public:
    Use(Configuration &config){
        config_=config;
    }

    void doSomething(){
        something_+=config_.value1();
    }
}; 
```

我想 const `Use::config_`，但我尝试的每一种方式都以令人困惑的编译错误告终。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:25:00.447

由于成员是`const`，因此您的构造函数无法分配给它。但是，它可以直接从它的初始化器列表中初始化它：

```
Use(Configuration const & config) : config_(config) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:25:13.017

支持这一点的最佳方法是使用参考

```
class Use{
private:
    const Configuration& config_;
    int something_;
public:
    Use(const Configuration &config) : 
      config_(config), 
      something_(0) {

    }

    void doSomething(){
        something_+=config_.value1();
    }
}; 
```

问题中需要更清楚的一项是实例之间`Configuration`的关系。`Use`如果有一个`Configuration`要在所有`Use`实例之间共享，那么参考（如我所述）是最合适的选择。在那种情况下，尽管您需要确保它比`Configuration`所有`Use`引用它的实例都长。

另一方面，如果`Configuration`每个实例都是一个，`Use`那么非参考解决方案可能更合适

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:25:16.117

您应该在构造函数中使用初始化程序为 cons 成员赋值

```
Use(Configuration &config)
: config_(config)
{
     ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T17:26:13.250

如果`config`被声明为`const`您的类的成员，您将无法在创建后对其进行修改。这包括在成员初始化列表中以外的任何尝试为其分配值。此外，当您尝试在其上调用其任何非成员函数时，`const`您将收到编译器错误。由于您尚未发布我在这里猜测的显式错误，这可能是您所拥有的，因为您的示例代码在它的实例上调用了该类的成员函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T17:29:17.503

您不能分配给，`const`但可以在基本成员初始化程序列表中对其进行初始化：

```
class Use{
private:
    const Configuration config_;
public:
    Use(const Configuration & config)
        : config_(config)
    {
    }
}; 
```

# c# - 为组合框中的每个项目分配一个字符串

> ID：11366919
> 
> 赞同：0
> 
> 时间：2012-07-06T17:23:05.843
> 
> 标签：c#, string, combobox

我的应用程序中有一个组合框，它有 17 个不同的选项。在我的代码中，我对所有 17 个选项都有一个 if 语句。

```
int colorchoice = colorSelect.SelectedIndex;
if (colorchoice == 0)
{
textBox1.AppendText("the color is black");
}
if (colorchoice == 1)
{
textBox1.AppendText("the color is dark blue");
}
and so on... 
```

我已经能够打印在组合框中选择的内容，即黑色或深蓝色，但是，我需要打印的内容没有空格或大写字母。

```
if (colorchoice == 0)
{
textBox1.AppendText("the color is " + colorSelect.SelectedText);
} 
```

所以结果应该是黑色或深蓝色。我怎么能在不改变组合框中的大写和空格的情况下做到这一点，所以它看起来仍然不错，但会打印出我需要的内容。

我的想法是为 17 个选项中的每一个分配一个字符串，但我无法弄清楚如何做到这一点。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:24:59.380

**第一季度** `however, I need what is printed to have no spaces or caps.`

**答案1**

```
textBox1.AppendText("the color is " 
        + colorSelect.SelectedText.ToLower().Replace(" ", "")); 
```

**Q2：** `How could I do this without changing the caps and spaces in my combo box so it still looks nice but will print out what I need?`

**Ans 2:**上面的代码不会对你的组合框产生任何影响。

**问题 3：** `My idea was to assign a string to each of the 17 options, but I have not been able to figure out how to do this.`

**Ans3：**你为什么不创建一个你的项目数组，比如

```
string[] myarray = new string[]{ "Black", "Dark Blue" , ....}; 
```

然后将其用作

```
textBox1.AppendText("the color is " + 
     myarr[colorSelect.SelectedIndex].ToLower().Replace(" ", "")); 
```

# c++ - 多重继承解决抽象类

> ID：11366921
> 
> 赞同：6
> 
> 时间：2012-07-06T17:23:07.997
> 
> 标签：c++, multiple-inheritance

假设我有 4 节课：

```
class I { public: virtual void X() = 0; };
class A : public virtual I { public: virtual void X() { } };
class B : public I {  };
class C : public A, public B { }; 
```

`I`，`B`并且`C`是抽象的，而 as`A`不是。如果我只是简单地添加到for的`virtual`继承，则在.`I``B``A::X()``I::X()``C`

但是，我无法更改`B`.

**我的问题**：我可以在无法改变的情况下`A::X()`解决问题吗？我尝试过声明和虚拟化无济于事。我试图没有多余的代码（例如，让 C 声明 X() { A::X(); }）。有什么巧妙的技巧吗？`I::X``C``B``A``B``C`

另外 - 有一些非常像这样的问题，但我找不到任何关于使用`virtual`继承的讨论。如果我错过了，请指给我一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:39:53.453

您的问题出在 vtable 上。在您当前的代码中，您有两个 - 一个 in `A`'s`I`和一个 in `B`'s `I`。只要仅`A`虚拟继承`I`，您就可以使用常规继承并节省开销。如果两者实际上都继承了`I`，那么您将只有一个`I`in实例`C`，因此只有一个 vtable，并且`A::X`确实可以覆盖纯 virual `I::X`。

鉴于您无法更改`B`，您唯一可以处理这两个 vtable 的地方是`C`. 在我看来，要走的路就是你提到的 - 只需`C::X`将电话转发到`A::X`. 那里没有代码重复，而且它`C`不抽象：

```
class C : public A, public B {
public:
    virtual void X() { A::X(); }
}; 
```

至于虚拟继承，这里肯定[有一些](https://stackoverflow.com/questions/tagged/virtual-inheritance)。但欢迎你问...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T17:40:09.963

这很好：[什么时候虚拟继承是一个好的设计？](https://stackoverflow.com/questions/4605556/when-virtual-inheritance-is-a-good-design)

这里的问题是，在 C 中你有两个接口 I。这就是为什么 A::x() 满足它的接口 I - 但它不能从类 B 中抽象出接口 I。对于 C 来说，只有一个接口I - 是将 B 更改为虚拟地从 I 派生 - 这样，来自 A 和来自 B 的 I 接口都将合并为 C 中的一个。你不能更改 B - 所以唯一的方法是添加你正在尝试的冗余代码避免。我的意思是定义 C::X()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T17:35:15.397

我能想到的唯一方法是将一个`B*`（或智能变体）组合成`C`而不是从它继承，并转发适当的方法。在维护继承的同时你不能这样做，因为编译器不知道`I`要遵循哪个继承链。

# php - 将文件读入php中的数组

> ID：11366926
> 
> 赞同：1
> 
> 时间：2012-07-06T17:23:45.603
> 
> 标签：php, arrays, file

我是 php 新手。我有一个文本文件，其中包含类似这样的文本

```
<??blah blahh blah
   blah blah blah
   .......
??>

<??blah blahh blah
   blah blah blah
   .......
??>

<??blah blahh blah
   blah blah blah
   ...... .
??> 
```

这意味着我的主要数据介于两者之间`<?? and ??>`我想创建一个包含数组中所有主要数据的数组（删除这些`<?? & ??>`字符）。这样我就可以在 MySql 表中插入数据项。我不知道如何从文件 lile 这个创建一个数组。

感谢帮助！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:37:22.460

希望这会有所帮助。

首先，您需要查看与 PHP 关联的文件库。

**参考**：[http ://www.php.net/manual/en/ref.filesystem.php](http://www.php.net/manual/en/ref.filesystem.php)

使用 fopen 和 fread，您可以打开有问题的文件并从那里解析它。

```
<?php
// get contents of a file into a string
$filename = "something.txt";
$handle = fopen($filename, "r");
$contents = fread($handle, filesize($filename));
fclose($handle);
?> 
```

接下来，我们将使用一些简单的字符串操作来获取您的重要信息。使用`split`，我们可以将您的文件内容切割成好东西。

**参考**： http: [//php.net/manual/en/function.split.php](http://php.net/manual/en/function.split.php)

```
<?php
// sanitize content headers
$contents = split("<\?\?", $contents);
foreach($contents as $content) {
   // remove content footers
   str_replace("??>", "", $content);
}
?> 
```

最后，我们将遍历刚刚使用 split 创建的数组中的所有元素，并将它们插入到我们的数据库中。

**参考**： http: [//php.net/manual/en/book.mysql.php](http://php.net/manual/en/book.mysql.php)

```
<?php
// sanitize content headers
$contents = split("<\?\?", $contents);
foreach($contents as $content) {
   if (empty($content)) {
       continue;
   }
   // remove content footers
   str_replace("??>", "", $content);

   // insert into database
   mysql_query("INSERT INTO `something` VALUES ('" . $content . "')");
}
?> 
```

总体而言，最终代码应如下所示：

```
<?php
// get contents of a file into a string
$filename = "something.txt";
$handle = fopen($filename, "r");
$contents = fread($handle, filesize($filename));
fclose($handle);

// sanitize content headers
$contents = split("<\?\?", $contents);
foreach($contents as $content) {
   if (empty($content)) {
       continue;
   }
   // remove content footers
   str_replace("??>", "", $content);

   // insert into database
   mysql_query("INSERT INTO `something` VALUES ('" . $content . "')");
}
?> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T17:40:58.310

您应该能够通过爆炸和一点点创造力来做到这一点，如下所示：

```
$str = file_get_contents( 'yourfile.txt');
$array = explode( '<??', $str);
array_shift( $array); // first element is empty
array_walk( $array, function( &$el) { $el = str_replace( '??>', '', $el); });
var_dump( $array); 
```

现在，您的数组看起来像：

```
array(3) {
  [0]=>
  string(52) "blah blahh blah
   blah blah blah
   .......

"
  [1]=>
  string(52) "blah blahh blah
   blah blah blah
   .......

"
  [2]=>
  string(49) "blah blahh blah
   blah blah blah
   ...... .
"
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T18:02:29.493

```
<?php    
preg_match_all("/(?:<\?\?)(.+?)(?:\?\?>)/sm",file_get_contents("test.txt"),$result);
print_r($result[1]);
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T17:51:16.107

尝试：

```
<?php

$filestring = file_get_contents('YOUR_FILE_TO_PARSE');
$pattern = '/<\?\?[\w\s.]*\?\?>/';
preg_match($pattern, $filestring, $matches);

?> 
```

$matches 将是您的数组

# ios - 强制旋转 UIViewController

> ID：11366929
> 
> 赞同：2
> 
> 时间：2012-07-06T17:23:56.530
> 
> 标签：ios, uinavigationcontroller, rotation

因此，我已经放弃尝试解决我一直遇到的一个问题，即我的控制器将在不调用我的`shouldAutorotateToInterfaceOrientation:`方法的情况下旋转，因为几年来每个人都将其称为 iOS 错误。

现在我只需要强制旋转我的`UIViewController`. 有没有办法可以做到这一点，因为`UIDevice`实例方法现在已被删除，我不知道该怎么做才能强制旋转我的控制器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T20:04:08.483

我不确定`UIDevice`您说的哪种方法已被删除，但以下方法对我有用（这确实使用了该`UIDevice` `orientation`方法）。底线，如果您有一个只接受横向的视图，您可以使用以下命令强制 iOS 更改方向。这很奇怪，但它有效。抱歉，我不能将功劳归功于原作者，但曾经在 StackOverflow 的其他地方遇到过这个问题：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

- (void)forceLandscape
{
    // make sure shouldAutorotateToInterfaceOrientation is configured to accept only landscape

    if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))
    {
        UIWindow *window = [[UIApplication sharedApplication] keyWindow];
        UIView *view = [window.subviews objectAtIndex:0];
        [view removeFromSuperview];
        [window addSubview:view];
    }
} 
```

相当于强制肖像模式（当然，假设您`shouldAutorotateToInterfaceOrientation`只接受肖像）：

```
- (void)forcePortrait
{
    // make sure shouldAutorotateToInterfaceOrientation is configured to accept only portrait

    if (UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation]))
    {
        UIWindow *window = [[UIApplication sharedApplication] keyWindow];
        UIView *view = [window.subviews objectAtIndex:0];
        [view removeFromSuperview];
        [window addSubview:view];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-09T16:05:04.450

使用xcode7.3 ios9。一个多星期以来，我一直在尝试强制打开和关闭景观视图，没有留下任何头发:(。对于其他任何人发现这个问题并且没有一个答案有效，或者任何其他关于强制景观的无数答案，我终于找到了在这里工作的东西：http: [//www.btday.com/how-to-force-view-controller-orientation-in-ios-8/](http://www.btday.com/how-to-force-view-controller-orientation-in-ios-8/)

建议将操作放在 viewDidAppear 中，但它似乎也可以在 viewWillAppear 中工作，并且稍微不那么难看。

```
override func viewWillAppear(animated: Bool) {
    UIDevice.currentDevice().setValue(UIInterfaceOrientation.LandscapeLeft.rawValue, forKey: "orientation")
} 
```

如果这是错误的/不好的，请说出来，我只有一个多月的 mac，所以我完全是 nuub！

另请注意，我使用的是 UITabBarController ，无论您将它放在标签栏控制器还是它的一个孩子中，这似乎都无关紧要

# php - nl2br 将 br 放在 html 标签之间

> ID：11366930
> 
> 赞同：0
> 
> 时间：2012-07-06T17:24:06.043
> 
> 标签：php

我有一个 PHP 网络邮件脚本，我今天收到了来自 gmail 的消息，如下所示：

```
$content='
<p>This is just example for MessageContent</
p>Test...<span>Test</span>Test..<span
>Test</span>'; 
```

我怎样才能打印它`nl2br`？

如果我使用`echo nl2br($content);`，我会得到以下结果：

```
<br />
<p>This is just example for MessageContent</<br />
p>Test...<span>Test</span>Test..<span<br />
>Test</span> 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:00:50.320

我个人认为在消息中接受 html 是不好的，你应该去掉任何 html，为什么？

因为如果您接受要呈现的 html。例如：不使用`htmlentities($content)`来自未知来源的恶意软件可能会添加 javascript 和[XSS](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)攻击您，或者添加一个狡猾的链接和[CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)攻击您，甚至只是一个 1px 的图像并获取您的 IP。

但是，如果您接受风险，您可以按原样呈现消息。

```
<?php 
$content='
<p>This is just example for MessageContent</
p>Test...<span>Test</span>Test..<span
>Test</span>';

//Or at least sanitise abit - Remove all tags except p's an a's
$content = strip_tags($content,'<p><a>');
?> 
```

nl2br 适用于您希望其中没有 html 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:19:23.950

您可以将 $content 更改为

```
$content='
<p>This is just example for MessageContent</p>
Test...<span>Test</span>Test..
<span>Test</span>'; 
```

或者你可以使用

```
echo $content; 
```

# hibernate - Hibernate 逆向工程文件

> ID：11366933
> 
> 赞同：3
> 
> 时间：2012-07-06T17:24:24.567
> 
> 标签：hibernate

我可以在 Hibernate 的逆向工程文件（hibernate.reveng.xml）中关闭下面父字段的生成吗？

```
Class Parent {
    private Set children = new HashSet(0);
}

Class Child {
    private Parent parent;  // don't want this
} 
```

# c - 为什么打印 unsigned char 有时有效，有时无效？在 C 中

> ID：11366939
> 
> 赞同：3
> 
> 时间：2012-07-06T17:24:51.970
> 
> 标签：c, char, printf, unsigned, unsigned-char

对于一个学校项目，我正在编写河豚加密（只是加密，而不是解密）。我已经完成了加密本身，我决定为了好玩而进行解密（在 Blowfish 中这很容易）。

我使用无符号字符来表示字节（尽管我认为 uint8_t 会更便携）。当我试图打印出解密的字节时，我遇到了这个问题。我正在加密纯文本消息。我已经能够打印出我加密的实际短信，但仅限于一个非常特定的位置。相同的确切代码似乎在其他任何地方都不起作用。这里是：

```
int n;
for(n = 0; n < numBlocks; n++) // Blocks are 32-bit unsigned ints (unsigned long)
{
     // uchar is just a typedef for unsigned char
     // message is an array of uchars
     message[n] = (uchar) ((blocks[n]>>24));
     message[n+1] = (uchar) ((blocks[n]>>16));
     message[n+2] = (uchar) ((blocks[n]>>8));
     message[n+3] = (uchar) ((blocks[n]));
     // Printing works here; exact message comes back
     printf("%c%c%c%c", message[n], message[n+1], message[n+2], message[n+3]); 
} 
```

但是当我尝试在两行之后使用完全相同的代码时，*它不起作用*。

```
for(n = 0; n < numBlocks; n++)
{
     // Printing doesn't work here.
     // Actually, the first letter works, but none of the others
     printf("%c%c%c%c", message[n], message[n+1], message[n+2], message[n+3]); 
} 
```

我也试过以数字格式打印出字符，我可以看到它们实际上已经改变了。

这里到底发生了什么？这是未定义的行为吗？有没有人有可靠的解决方案？我没有做任何事情来更改两个调用之间的消息数组的值。

我正在使用 sparc 处理器在 Sun 5.10 上运行和编译它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T17:30:35.787

```
for(n = 0; n < numBlocks; n++) // Blocks are 32-bit unsigned ints (unsigned long)
{
     message[n] = (uchar) ((blocks[n]>>24));
     message[n+1] = (uchar) ((blocks[n]>>16));
     message[n+2] = (uchar) ((blocks[n]>>8));
     message[n+3] = (uchar) ((blocks[n]));
} 
```

每次执行此循环时，您设置`message[n]`为`message[n+3]`，然后将**n 增加 1**。这意味着您的第一次迭代设置`message[0]`、和`message[1]`，然后您的第二次设置、和。因此，基本上，您在每次迭代时都会覆盖消息中除第一个字符之外的所有字符。`message[2]``message[3]``message[1]``message[2]``message[3]``message[4]`

很可能您需要`message`放大 4 倍，然后执行以下操作：

```
message[n*4] = ...
message[n*4 + 1] = ... 
```

# c# - magento 的 SOAP V2 出现问题

> ID：11366943
> 
> 赞同：0
> 
> 时间：2012-07-06T17:25:06.307
> 
> 标签：c#, magento, soap

我正在尝试使用 c# 连接到 magentos Web 服务。我创建了一个角色，然后创建了一个具有该角色的用户。之后，我创建了 Web 服务引用，当尝试连接到 Web 服务时，出现下一个错误：

```
WebException was unhandled
HTTP 401: Unauthorized. 
```

会是什么呢？这是我使用的 c# 代码，它在标签中显示登录结果：

```
MagentoService ms = new MagentoService();

        String mlogin = ms.login("testUser", "xxxxxx");

        label1.Text=mlogin; 
```

提前致谢！

# java - Java 窗口事件 - 最大化。如何硬编码？

> ID：11366962
> 
> 赞同：0
> 
> 时间：2012-07-06T17:26:07.637
> 
> 标签：java, swing, jframe, jinternalframe, jdesktoppane

我有一个 JDesktopPane 和一个 JInternalFrame。我希望 JInternalFrame 在完成后自动最大化。如何对“最大化窗口”事件进行硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:32:30.513

[`JInternalFrame.setMaximum(true)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JInternalFrame.html#setMaximum%28boolean%29)创建框架后使用。

以下是最大化框架的方法：

```
JInternalFrame frame = ...
frame..setMaximum(true); // Maximize this window to fill up the whole desktop area 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T17:35:36.743

将**JInternalFrame的****setMaximum(boolean b)**方法设置为**"true"**，将使其最大化。

 ******例如：**

```
JInternalFrame.setMaximum(true) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:17:25.937

*   上面已经建议：[JInternalFrame#setMaximum(boolean)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JInternalFrame.html#setMaximum%28boolean%29)
*   另一种选择：[DesktopManager#maximizeFrame(JInternalFrame)](http://docs.oracle.com/javase/7/docs/api/javax/swing/DesktopManager.html#maximizeFrame%28javax.swing.JInternalFrame%29)
    *   JDesktopPane 调整大小时的行为有点不同。

* * *

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class JInternalFrameMaximumTest {
  public JComponent makeUI() {
    final JDesktopPane desktop = new JDesktopPane();
    Action a1 = new AbstractAction("JInternalFrame#setMaximum") {
      @Override public void actionPerformed(ActionEvent e) {
        JInternalFrame f = new JInternalFrame("#",true,true,true,true);
        desktop.add(f);
        f.setVisible(true);
        try {
          f.setMaximum(true);
        } catch(java.beans.PropertyVetoException ex) {
          ex.printStackTrace();
        }
      }
    };
    Action a2 = new AbstractAction("DesktopManager#maximizeFrame(f)") {
      @Override public void actionPerformed(ActionEvent e) {
        JInternalFrame f = new JInternalFrame("#",true,true,true,true);
        desktop.add(f);
        f.setVisible(true);
        desktop.getDesktopManager().maximizeFrame(f);
      }
    };
    JToolBar toolbar = new JToolBar("toolbar");
    toolbar.add(new JButton(a1));
    toolbar.add(new JButton(a2));

    JPanel p = new JPanel(new BorderLayout());
    p.add(desktop);
    p.add(toolbar, BorderLayout.NORTH);
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new JInternalFrameMaximumTest().makeUI());
    f.setSize(640, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```****

# objective-c - 我应该如何处理包中的头文件？

> ID：11366963
> 
> 赞同：4
> 
> 时间：2012-07-06T17:26:07.920
> 
> 标签：objective-c, nsbundle

我想开发一个依赖插件（这里：可加载包）工作的程序。要求多个插件使用相同的`AFNetworking`资源来发出网络请求。但是，我不知道在哪里放置`AFNetworking`和`CustomPluginProtocol`标题。

这是我的程序结构现在的样子：

```
MyApp.xcodeproj
  - AFNetworking
    - Header.h
  - Plugins
    - Plugin1.xcodeproj
      - PrincipalClass.m
    - Plugin2.xcodeproj
      - PrincipalClass.m
  - Classes
    - CustomPluginProtocol.h
    - MainClass.m 
```

当然，每一个`principalClass`从`PluginN`遵守到`CustomPluginProtocol`.

*   是否必须在每个捆绑包中复制标头？
*   我可以只包含插件中的主程序`AFNetworking`头吗？如果是这样（这就是我现在所做的），我没有任何完成。我怎么才能得到它 ？

* * *

### 编辑

好的，所以也许我的问题不清楚。

我希望我的插件使用来自主应用程序的源代码，比如说`CommonClass.m`和`CommonClass.h`. 插件`CommonClass.h`在它们的包中是否需要，如果不需要，当我在插件范围内时如何启用完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:11:44.563

您有 2 个选项：

1）产生一个框架，其中包括标题`<Your Framework>/Headers/`

2) 只需将标题提供给开发人员

我更喜欢选项 1，因为它更容易理解和跟踪所有内容，但是像 Photoshop 这样的应用程序一直使用选项 2，所以它是完全可行的。使用选项 1，开发人员会将您制作的框架添加到他们的 Xcode 项目中，而`#include <FrameworkName/HeaderName.h>`. 使用选项 2，您将为他们提供一个标题文件夹，他们会将其放在对他们方便的地方，然后将其添加到他们的标题搜索路径和`#include "FolderName/HeaderName.h"`.

# r - 有没有办法改变ggplot2中图例项之间的间距？

> ID：11366964
> 
> 赞同：150
> 
> 时间：2012-07-06T17:26:08.367
> 
> 标签：r, ggplot2, legend

有没有办法改变ggplot2中图例项之间的间距？我目前有

```
legend.position ="top" 
```

它会自动生成一个水平图例。但是，项目的间距非常接近，我想知道如何将它们分开更远。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2018-05-31T02:39:23.513

[`ggplot2 v3.0.0`](https://www.tidyverse.org/articles/2018/07/ggplot2-3-0-0/)2018 年 7 月发布的工作选项有修改`legend.spacing.x`和.`legend.spacing.y``legend.text`

2021 年 12 月更新 - 要开始`legend.spacing.y`工作，您需要`byrow = TRUE`在相应的 guide_legend 中进行设置。[另请参阅此线程](https://stackoverflow.com/a/70526027/7941188)。下面的例子。

**示例：增加图例键之间的水平间距**

```
library(ggplot2)

ggplot(mtcars, aes(factor(cyl), fill = factor(cyl))) + 
  geom_bar() +
  coord_flip() +
  scale_fill_brewer("Cyl", palette = "Dark2") +
  theme_minimal(base_size = 14) +
  theme(legend.position = 'top', 
        legend.spacing.x = unit(1.0, 'cm')) 
```

![](../Images/783b71c84e456a362caf3b45a5352f72.png)

注意：如果您只想扩大图例文本右侧的间距，请使用[`stringr::str_pad()`](https://stackoverflow.com/questions/50883294/increasing-whitespace-between-legend-items-in-ggplot2/50885122#50885122)

**示例：增加垂直间距 (mind `byrow = TRUE`)**

```
library(ggplot2)

ggplot(mtcars, aes(y = factor(cyl), fill = factor(cyl))) + 
  geom_bar() +
  theme(legend.spacing.y = unit(1.0, 'cm'))  +
  ## important additional element
  guides(fill = guide_legend(byrow = TRUE)) 
```

![](../Images/28aaca70c475b864f3edc4de61f9ba48.png)

**示例：将图例键标签移动到底部并增加垂直间距**

```
ggplot(mtcars, aes(factor(cyl), fill = factor(cyl))) + 
  geom_bar() +
  coord_flip() +
  scale_fill_brewer("Cyl", palette = "Dark2") +
  theme_minimal(base_size = 14) +
  theme(legend.position = 'top', 
        legend.spacing.x = unit(1.0, 'cm'),
        legend.text = element_text(margin = margin(t = 10))) +
  guides(fill = guide_legend(title = "Cyl",
                             label.position = "bottom",
                             title.position = "left", title.vjust = 1)) 
```

![](../Images/94f58a7802056b6fb079786023e93853.png)

**示例：对于`scale_fill_xxx`&`guide_colorbar`**

```
ggplot(mtcars, aes(mpg, wt)) +
  geom_point(aes(fill = hp), pch = I(21), size = 5)+
  scale_fill_viridis_c(guide = FALSE) +
  theme_classic(base_size = 14) +
  theme(legend.position = 'top', 
        legend.spacing.x = unit(0.5, 'cm'),
        legend.text = element_text(margin = margin(t = 10))) +
  guides(fill = guide_colorbar(title = "HP",
                               label.position = "bottom",
                               title.position = "left", title.vjust = 1,
                               # draw border around the legend
                               frame.colour = "black",
                               barwidth = 15,
                               barheight = 1.5)) 
```

![](../Images/2daa60bcda5bb589c3ecd18390dde047.png)

* * *

**以下已过时，但留给好奇的人。**

**对于垂直图例**，设置`legend.key.size`只会增加图例键的大小，而不是它们之间的垂直空间

```
ggplot(mtcars) +
  aes(x = cyl, fill = factor(cyl)) +
  geom_bar() +
  scale_fill_brewer("Cyl", palette = "Dark2") +
  theme_minimal(base_size = 14) +
  theme(legend.key.size = unit(1, "cm")) 
```

![](../Images/30aa21b0f9d14d9a4b7e5136ff10c229.png)

为了增加图例键之间的距离，`legend-draw.r`需要修改函数。有关更多信息，请参阅此[问题](https://github.com/tidyverse/ggplot2/issues/2844)

```
# function to increase vertical spacing between legend keys
# @clauswilke
draw_key_polygon3 <- function(data, params, size) {
  lwd <- min(data$size, min(size) / 4)

  grid::rectGrob(
    width = grid::unit(0.6, "npc"),
    height = grid::unit(0.6, "npc"),
    gp = grid::gpar(
      col = data$colour,
      fill = alpha(data$fill, data$alpha),
      lty = data$linetype,
      lwd = lwd * .pt,
      linejoin = "mitre"
    ))
}

### this step is not needed anymore per tjebo's comment below
### see also: https://ggplot2.tidyverse.org/reference/draw_key.html
# register new key drawing function, 
# the effect is global & persistent throughout the R session
# GeomBar$draw_key = draw_key_polygon3

ggplot(mtcars) +
  aes(x = cyl, fill = factor(cyl)) +
  geom_bar(key_glyph = "polygon3") +
  scale_fill_brewer("Cyl", palette = "Dark2") +
  theme_minimal(base_size = 14) +
  theme(legend.key = element_rect(color = NA, fill = NA),
        legend.key.size = unit(1.5, "cm")) +
  theme(legend.title.align = 0.5) 
```

![](../Images/e26bf301bdb5a4502cb8a083c10b2435.png)

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2015-07-15T06:03:59.647

我认为最好的选择是使用`guide_legend`within `guides`：

```
p + guides(fill=guide_legend(
                 keywidth=0.1,
                 keyheight=0.1,
                 default.unit="inch")
      ) 
```

注意使用`default.unit`，无需加载`grid`包。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2015-03-07T14:45:45.340

我用来在水平图例中添加空格的简单修复，只需在标签中添加空格（请参阅下面的摘录）：

```
 scale_fill_manual(values=c("red","blue","white"),
                    labels=c("Label of category 1          ",
                             "Label of category 2          ",
                             "Label of category 3")) 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2017-03-21T22:36:01.313

要在图例中的条目之间添加间距，请调整主题元素的边距`legend.text`。

在每个图例标签的右侧添加 30pt 的空间（可能对水平图例有用）：

```
p + theme(legend.text = element_text(
    margin = margin(r = 30, unit = "pt"))) 
```

在每个图例标签左侧添加 30pt 的空间（可能对垂直图例有用）：

```
p + theme(legend.text = element_text(
    margin = margin(l = 30, unit = "pt"))) 
```

对于一个`ggplot2`对象`p`。关键字是`legend.text`和`margin`。

[关于编辑的注意事项：首次发布此答案时，存在错误。该错误现已修复]

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2014-11-17T11:29:51.360

Now that `opts` is deprecated in `ggplot2` package, function `theme` should be used instead:

```
library(grid) # for unit()
... + theme(legend.key.height=unit(3,"line"))
... + theme(legend.key.width=unit(3,"line")) 
```

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2018-05-29T22:40:19.160

看起来最好的方法（2018 年）是`legend.key.size`在`theme`对象下使用。（例如，见[这里](https://stackoverflow.com/a/32277045/4581200)）。

```
#Set-up:
    library(ggplot2)
    library(gridExtra)

    gp <- ggplot(data = mtcars, aes(mpg, cyl, colour = factor(cyl))) +
        geom_point() 
```

**如果您使用的**是，这真的很容易**：****`theme_bw()`**

```
 gpbw <- gp + theme_bw()

#Change spacing size:

  g1bw <- gpbw + theme(legend.key.size = unit(0, 'lines'))
  g2bw <- gpbw + theme(legend.key.size = unit(1.5, 'lines'))
  g3bw <- gpbw + theme(legend.key.size = unit(3, 'lines'))

  grid.arrange(g1bw,g2bw,g3bw,nrow=3) 
```

[![在此处输入图像描述](../Images/893fb36844a633db6da649f09546b7a1.png)](https://i.stack.imgur.com/Work8.png)

但是，**否则效果不太好**（例如，如果您需要图例符号上的灰色背景）：

```
 g1 <- gp + theme(legend.key.size = unit(0, 'lines'))
  g2 <- gp + theme(legend.key.size = unit(1.5, 'lines'))
  g3 <- gp + theme(legend.key.size = unit(3, 'lines'))

  grid.arrange(g1,g2,g3,nrow=3)

#Notice that the legend symbol squares get bigger (that's what legend.key.size does). 

#Let's [indirectly] "control" that, too:
  gp2 <- g3
  g4 <- gp2 + theme(legend.key = element_rect(size = 1))
  g5 <- gp2 + theme(legend.key = element_rect(size = 3))
  g6 <- gp2 + theme(legend.key = element_rect(size = 10))

  grid.arrange(g4,g5,g6,nrow=3)   #see picture below, left 
```

请注意，白色方块开始阻挡图例标题（如果我们不断增加值，最终会阻挡图形本身）。

```
 #This shows you why:
    gt <- gp2 + theme(legend.key = element_rect(size = 10,color = 'yellow' )) 
```

[![在此处输入图像描述](../Images/f943eaad051e88c9d0d8001d2f34aca1.png)](https://i.stack.imgur.com/jH4Y5.png)

我还没有找到解决上述问题的解决方法...如果您有任何想法，请在评论中告诉我，我会相应地更新！

*   我想知道是否有某种方法可以使用`$layers`...

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2012-07-06T18:36:42.353

来自 Koshke 在 ggplot2 上的工作和他的博客（[Koshke 的博客](http://kohske.wordpress.com/2010/12/25/adjust-key-width-and-key-height-of-legend-in-ggplot2/)）

```
... + theme(legend.key.height=unit(3,"line")) # Change 3 to X
... + theme(legend.key.width=unit(3,"line")) # Change 3 to X 
```

在控制台中输入`theme_get()`以查看其他可编辑的图例属性。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-11-26T09:30:02.857

使用其中任何一个

```
legend.spacing = unit(1,"cm")
legend.spacing.x = unit(1,"cm")
legend.spacing.y = unit(1,"cm") 
```

# jquery - 这个正则表达式（rinlinejQuery）在 jQuery 中是什么意思？

> ID：11366970
> 
> 赞同：1
> 
> 时间：2012-07-06T17:26:43.643
> 
> 标签：jquery

```
var rinlinejQuery = / jQuery\d+="(?:\d+|null)"/g,

html: function( value ) {
        if ( value === undefined ) {
            return this[0] && this[0].nodeType === 1 ?
                this[0].innerHTML.replace(rinlinejQuery, "") :
                null;

        // See if we can take a shortcut and just use innerHTML
        } 
```

它是否匹配代码，例如`jQuery11="11"`？

为什么在`html()`函数中需要它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:57:54.323

好的，所以首先我们有`jQuery\d+`它只是 'jQuery' 后跟一个或多个数字（`\d`与 相同`[01-9]`）。

然后我们`="`这里只是文字，所以我们匹配任何有“jQuery”的东西，然后是至少一个数字，然后是“=”。

接下来，`(...|...)`构造是一个 Or，因此它匹配竖线之前的表达式或竖线`|`之后的表达式。在这种情况下，这些表达式是`\d+`and `null`，因此我们的查询匹配任何包含“jQuery”、至少一个数字、“=”、然后是至少一个数字或字符串“null”的字符串。接下来是按`"`字面意思。

作为表达式本身的一部分，唯一剩下的就是在左`?:`括号之后找到的。*通常，*正则表达式中括号中的任何内容都会被保存，因此您可以在替换字符串中引用它，`$n`其中 where`n`是一个数字，表示您所指的匹配项。在这种`?:`情况下，开始括号*可防止这种情况发生，*因此括号可用于对 Or 的选项进行分组，而不会浪费时间或记忆来记住匹配的值。

最后，正则表达式用正斜杠括起来`/`，这个有`g`开关，表示全局搜索。

所以我们有'jQuery'，一个或多个数字，'="'，一个或多个数字*或*'null'，'"'。

要回答您的第二个问题，是的，此模式将匹配该字符串。

恐怕我不知道为什么 jQuery 的 html 函数需要从中删除该特定字符串`this[0].innerHTML`（这是该`replace`函数正在执行的操作），但根据评论，看起来他们正在使用该字符串来测试是否`innerHTML`有效并且功能（不是在所有浏览器上）？

# yui - 如何从 freemarker 和 YUI javascript 文件中的 alfresco-global.properties 访问值

> ID：11366978
> 
> 赞同：0
> 
> 时间：2012-07-06T17:27:15.743
> 
> 标签：yui, freemarker, alfresco

我在 Alfresco 的 alfresco-global.properties 文件中有许多自定义变量，我想在各种 freemarker ftl 文件以及各种 YUI 文件中使用它们，这将极大地改变 Share 的行为及其显示信息的方式。

我可以通过各种 javascript 调用访问属性值（例如，`getNetworkName()`将返回`app.network.name`属性中设置的自定义变量），但我不确定如何将这些 javascript 函数公开给 freemarker 或 YUI 文件，或者我什至需要，而不是直接访问变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T02:01:40.737

如果你已经定义了全局变量和函数，你不需要做任何特别的事情来从 YUI 访问它们。

你可以选择做这样的事情来利用 YUI 的*沙箱*能力，这样每个沙箱就不会通过更改全局配置来影响另一个沙箱：

```
YUI_config = {
    app: {
      network: {
        name: 'foo' // or getNetworkName()
      }
    }
};

YUI().use('node', function (Y) {
    console.log(Y.config.app.network.name); // foo
    Y.config.app.network.name = 'bar';
});
YUI().use('tabview', function (Y) {
    console.log(Y.config.app.network.name); // still foo!
}); 
```

# google-docs - 任何方式以编程方式共享谷歌文档？

> ID：11366979
> 
> 赞同：3
> 
> 时间：2012-07-06T17:27:19.073
> 
> 标签：google-docs, google-apps-script

我有一个程序可以从融合表中获取数据，将其放入谷歌文档中（使用我制作的模板），使其成为 pdf，然后显示指向它的链接（指向 pdf）。我的问题是它适用于我的帐户，但如果其他人试图点击它，他们会不断收到“404 Not Found”错误。我的猜测是出现错误是因为我是唯一允许查看文件的人。我的问题是：有没有办法以编程方式与组织中的每个人共享文件，或者有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T17:55:11.370

您可以使用`DocsList.addViewers(viewersEmails[])`

这是一个示例，它将查看器列表作为参数，将它们添加为查看器并发送带有链接的电子邮件：

```
function addviewers(viewers) { // pass emails as a string in CSV
  var viewerssArray = viewers.replace(/, /g,",").split(",");// the 'replace' is there to remove any spaces that could be in the string
  Logger.log(viewersArray.length+'  :  '+viewersArray);
  var file = DocsList.getFileById('your doc ID').addViewers(viewersArray);
  var docurl=file.getUrl();    
      for (nn=0;nn<viewersArray.length;++nn){
        MailApp.sendEmail(viewersArray[nn], 'your document', docurl);
          }
} 
```

*我最初使用“编辑器”作为变量名，现在改为“查看器”以避免混淆。*

如果您确实需要将域中的每个人都包括在内以获取访问权限，我想最好的解决方案是创建一个包含所有用户的组以简化流程。

**编辑**：可能有一个更简单的解决方案是将文件移动到共享文件夹中：文件夹中的所有项目都具有与文件夹本身相同的共享参数。

例子 ：

```
function sharebyFolder(){
    var file = DocsList.getFileById('docId');
    var folder = DocsList.getFolderById('shared folder Id');
    file.addToFolder(folder)
      } 
```

# ruby-on-rails - 功能测试不适用于嵌套参数

> ID：11366981
> 
> 赞同：0
> 
> 时间：2012-07-06T17:27:22.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, functional-testing

第一次在stackoverflow上发帖，事先为任何类似菜鸟的事情道歉。

我在一项功能测试中收到错误，几个小时后，我似乎无法弄清楚如何通过它。

简而言之，一个`invoice_schedule`which `has_many` `invoice_milestones`。然后，`invoice_milestones`有一个属性，`estimate_percentage`（一个整数）。我的模型`models/invoice_schedule.rb`有一个验证，要求所有的总和`estimate_percentages`必须等于 100。

create 操作的功能测试`invoice_schedule`每次都失败。在下面我当前的代码中，它一直在出错。我看不出我传递的参数会如何出错。

我还要注意`estimate has_one :invoice_schedule`

任何帮助或建议表示赞赏:)

模型/invoice_schedule.rb：

```
class InvoiceSchedule < ActiveRecord::Base
    belongs_to :estimate
    has_many :invoice_milestones, :dependent => :destroy

    accepts_nested_attributes_for :invoice_milestones, :allow_destroy => true

    validate :total_must_equal_one_hundred_percent

    def total_must_equal_one_hundred_percent
        if total_percent != 100
            errors.add(:invoice_milestones, "Total must equal 100%")
        end
    end

    def total_percent
        invoice_milestones.to_a.sum { |item| item.estimate_percentage || 0 }
    end
end 
```

模型/invoice_milestone.rb：

```
class InvoiceMilestone < ActiveRecord::Base
    belongs_to :invoice_schedule
    belongs_to :invoice

    validates :estimate_percentage, :numericality => {:only_integer => true, :greater_than_or_equal_to => 0, :less_than_or_equal_to => 100}
end 
```

控制器/invoice_schedules_controller.rb

```
 def create
    @invoice_schedule = InvoiceSchedule.new(params[:invoice_schedule])
    @estimate = Estimate.find_by_id(params[:estimate_id])

    respond_to do |format|
      if @invoice_schedule.save
        format.html { redirect_to invoice_schedule_path(@invoice_schedule), :flash => {:notice => 'Invoice schedule was successfully created.', :status => 'success'} }
        format.json { render json: @invoice_schedule, status: :created, location: @invoice_schedule }
      else
        format.html { render action: "new" }
        format.json { render json: @invoice_schedule.errors, status: :unprocessable_entity }
      end
    end
  end 
```

测试/功能/invoice_schedules_controller_test.rb

```
 setup do
    @account = accounts(:lorem)
    @estimate = estimates(:lorem_one)
    @user = users(:lorem_vendor)
    @request.host = "#{@account.subdomain}.myapp.local"
    session[:user_id] = @user.id
    @invoice_schedule = invoice_schedules(:lorem_one)
    @invoice_milestone = invoice_milestones(:lorem_one)
    @data_estimate = estimates(:lorem_two)
    @data_invoice_schedule = @invoice_schedule.attributes.merge({estimate_id: @data_estimate.id})
  end

  test "should create invoice_schedule" do
    assert_difference('InvoiceSchedule.count') do
        post :create, :invoice_schedule => { estimate_id: @data_estimate, :invoice_milestone => {estimate_percentage: 100}}
    end

    assert_redirected_to estimate_invoice_schedule_path(@estimate, assigns(:invoice_schedule))
  end 
```

配置/路由.rb

```
require 'subdomain'

    Accountimize::Application.routes.draw do

      resources :invoices do
        member do
          get 'generateInvoiceFromMilestone'
        end
      end

      resources :users
      resources :sessions

      get "sign_up" => "accounts#new", :as => "sign_up"

      resources :accounts

      resources :clients do
        get :client_address, on: :member
      end

      resources :estimates do
        resources :invoice_schedules, :shallow => true
      end

      resources :line_items

      constraints(Subdomain) do
        match '/' => 'accounts#show'
        get "log_in" => "sessions#new", :as => "log_in"
        get "log_out" => "sessions#destroy", :as => "log_out"
        get "register" => "users#new", :as => "register"
      end
      root :to => 'site#index', :as => 'site'
    end 
```

我得到的错误痕迹：

```
InvoiceSchedulesControllerTest
     test_should_create_invoice_schedule                                 ERROR
        No route matches {:invoice_schedule=>{:estimate_id=>"706507935", :invoice_milestones_attributes=>{"0"=>{:description=>"test", :estimate_percentage=>"100"}}}, :controller=>"invoice_schedules", :action=>"create"}
        STDERR:
        Exception `ActionController::RoutingError' at /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:465:in `raise_routing_error'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:461:in `rescue in generate'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:453:in `generate'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:494:in `generate'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:490:in `generate_extras'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_dispatch/routing/route_set.rb:486:in `extra_keys'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_controller/test_case.rb:145:in `assign_parameters'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_controller/test_case.rb:438:in `process'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_controller/test_case.rb:49:in `process'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/actionpack-3.1.1/lib/action_controller/test_case.rb:370:in `post'
        test/functional/invoice_schedules_controller_test.rb:35:in `block (2 levels) in <class:InvoiceSchedulesControllerTest>'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.1.1/lib/active_support/testing/assertions.rb:55:in `assert_difference'
        test/functional/invoice_schedules_controller_test.rb:30:in `block in <class:InvoiceSchedulesControllerTest>'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.1.1/lib/active_support/testing/setup_and_teardown.rb:35:in `block in run'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:444:in `_run_setup_callbacks'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
        /Users/Matt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-3.1.1/lib/active_support/testing/setup_and_teardown.rb:34:in `run' 
```

我已经尝试了很多其他方法来完成在功能测试中将 invoice_milestone 添加到新创建的 invoice_schedule 中，但似乎没有什么对我有用。如果添加了accepts_nested_attributes_for，为什么会收到上述路由错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:37:43.993

这有两个部分。首先，您需要正确设置路由端。因为您已将发票计划嵌套在您需要`estimate_id`在顶层（而不是内部`params[:invoice_schedules]`）提供的估计中，即

```
post :create, :estimate_id => @data_estimate.id, :invoice_schedule => {...} 
```

然后期望您的控制器按照以下方式执行某些操作

```
estimate = Estimate.find(params[:estimate_id])
@invoice_schedule = estimate.invoice_schedules.build params[:invoice_schedule] 
```

第二部分与嵌套属性有关——您需要提供与 Rails 期望相匹配的 params 哈希。第一部分是哈希中的键应该是`:invoice_milestones_attributes`. 由于这是 a `has_many`，因此相应的值需要是一个哈希数组，或者一个哈希哈希（键被忽略 - 这主要是因为在 rails 的参数传递中数组和哈希之间的交互），例如

```
post :create, :estimate_id => @data_estimate.id, 
              :invoice_schedule => {
                :invoice_milestones_attributes => [
                  {:estimate_percentage => 100}
                ]
              } 
```

# python - 将代码转换为语法突出显示的 html

> ID：11366983
> 
> 赞同：5
> 
> 时间：2012-07-06T17:27:35.580
> 
> 标签：python, html, syntax-highlighting

我正在寻找一个 python 模块，它可以让我从用任何流行语言编写的代码中生成“语法突出显示”的 HTML 代码。

类似于 stackoverflow 对代码标签所做的事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T17:31:33.523

你可能想要[pygments](http://pygments.org/)。

它突出显示了最流行的语言和 HTML、RDF、LaTeX 等的输出。

# r - 图形堆积条形图

> ID：11366984
> 
> 赞同：-1
> 
> 时间：2012-07-06T17:27:41.187
> 
> 标签：r

```
>  dput( Data )
structure(list(Returns = c(0.121898279, 0.13033722, 0.11481841, 
0.12036003, 0.114993592, 0.116188981, 0.121428867, 0.116709471, 
0.113210859, 0.113742848, 0.124184601, 0.115356057, 0.125204291, 
0.117456978, 0.105081626, 0.123955248, 0.108180176, 0.111982742, 
0.132430977, 0.11152048), A1 = c(0.001031969, 0.193967087, 0.080503515, 
0.040900369, 0.128328153, 0.156476201, 0.048047382, 0.095172939, 
0.165000886, 0.139207956, 0.053872589, 0.169413566, 0.075855391, 
0.194366833, 0.133996857, 0.087135623, 0.080431244, 0.145167653, 
0.109174761, 0.081604545), A2 = c(0.182100642, 0.182546906, 0.059195585, 
0.009377251, 0.078005805, 0.08951651, 0.041001956, 0.118467842, 
0.029851143, 0.164142907, 0.086745647, 0.062815491, 0.082917106, 
0.09218272, 0.009404369, 0.15153962, 0.052633842, 0.047654575, 
0.079980146, 0.07219003), A3 = c(0.033056468, 0.087089492, 0.071264136, 
0.032798067, 0.019900855, 0.068364162, 0.069405509, 0.066614578, 
0.05927698, 0.06150865, 0.118761761, 0.042341323, 0.06985265, 
0.056424585, 0.150445259, 0.043649925, 0.200761741, 0.038495841, 
0.058851104, 0.09678647), A4 = c(0.021989301, 0.14545256, 0.107609311, 
0.185294736, 0.107569414, 0.158398108, 0.010904275, 0.101427346, 
0.244391281, 0.001602613, 0.287120228, 0.082441453, 0.05741112, 
0.192793953, 0.186004376, 0.068749145, 0.196215868, 0.011002487, 
0.191050661, 0.142595017), A5 = c(0.079539686, 0.020485934, 0.156813654, 
0.180583799, 0.141910462, 0.143301472, 0.070897956, 0.122073368, 
0.12648414, 0.142742235, 0.05958849, 0.101874328, 0.053101605, 
0.18900444, 0.128629094, 0.007964965, 0.108247074, 0.187977017, 
0.021135936, 0.13692728), A6 = c(0.137558641, 0.058878856, 0.057730616, 
0.173227343, 0.128805897, 0.003212655, 0.013149668, 0.084112434, 
0.185654794, 0.166019731, 0.026406227, 0.187874107, 0.131080607, 
0.007525933, 0.016701075, 0.211947448, 0.143373161, 0.006260184, 
0.019667588, 0.142785301), A7 = c(0.096798666, 0.020255346, 0.036631967, 
0.113572471, 0.066622146, 0.079201897, 0.162091846, 0.114793711, 
0.016046429, 0.059351521, 0.040903589, 0.179164483, 0.160024011, 
0.127164369, 0.098604135, 0.124456001, 0.01027736, 0.275310865, 
0.034592344, 0.119706601), A8 = c(0.17643876, 0.02094711, 0.176338819, 
0.036208556, 0.137081653, 0.138326121, 0.192935751, 0.118875655, 
0.079709374, 0.074445331, 0.146749357, 0.009426806, 0.044459923, 
0.029539617, 0.196739901, 0.072512659, 0.118745585, 0.08939199, 
0.122734574, 0.099545584), A9 = c(0.181715746, 0.120409476, 0.005084759, 
0.139632432, 0.104908432, 0.12579961, 0.206737524, 0.091384469, 
0.020795676, 0.093603564, 0.133020593, 0.015143574, 0.145968537, 
0.077011395, 0.023159646, 0.197495552, 0.076733114, 0.107117743, 
0.208629473, 0.077884951), A10 = c(0.089770122, 0.149967232, 
0.248827638, 0.088404975, 0.086867182, 0.037403265, 0.184828133, 
0.087077656, 0.072789296, 0.097375493, 0.046831518, 0.149504869, 
0.179329052, 0.033986156, 0.056315287, 0.034549063, 0.012581012, 
0.091621645, 0.154183412, 0.029974221)), .Names = c("Returns", 
"A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8", "A9", "A10"), row.names = c("prtf1", 
"prtf2", "prtf3", "prtf4", "prtf5", "prtf6", "prtf7", "prtf8", 
"prtf9", "prtf10", "prtf11", "prtf12", "prtf13", "prtf14", "prtf15", 
"prtf16", "prtf17", "prtf18", "prtf19", "prtf20"), class = "data.frame") 
```

我需要一些帮助来绘制这个数据框。我正在查看一个条形图，其中一个堆叠条的高度将对应于一行（该条中将有 10 个分区）

并且条形图在 x 轴上的位置将取决于数据的第 1 列，即返回因此将形成 x 轴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:14:34.667

```
barplot(t(Data[order(Data[,1]),])[2:11,]) 
```

但我不知道我是否正确解释了你的问题。

# xslt - 将匹配的元素属性合并为单个元素

> ID：11366986
> 
> 赞同：2
> 
> 时间：2012-07-06T17:27:49.610
> 
> 标签：xslt, merge

我有以下标记。

```
<para><span class="bidi"/><span class="ind"/>1</para> 
```

我正在努力实现这一目标...

```
<para><span style="direction:rtl; text-indent:10pt;">1</span></para> 
```

然而，我得到这个...

```
<para><span style="direction:rtl">1</span><span style="text-indent:10pt">1</span></para> 
```

这是我的 XSLT。

```
 <xsl:template match="span" name="spans">
        <span>
            <xsl:attribute name="style">
        <xsl:choose>                
            <xsl:when test="@class eq 'bidi'">
                <xsl:text>direction:rtl</xsl:text>                
            </xsl:when>
            <xsl:when test="@class eq 'ind'">
                <xsl:text>text-indent:10pt;</xsl:text>                
            </xsl:when>
            <xsl:otherwise/>
        </xsl:choose>
            </xsl:attribute>
            <xsl:apply-templates/>
        </span>
    </xsl:template> 
```

如何将多个跨度与其所有类属性值合并为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:54:56.480

**这种转变：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="para[span]">
     <para>
       <span>
          <xsl:attribute name="style">
           <xsl:apply-templates select="span"/>
          </xsl:attribute>
          <xsl:apply-templates select="node()[not(self::span)]"/>
       </span>
     </para>
 </xsl:template>

 <xsl:template match="span[@class='bidi']">
  <xsl:if test="position() >1"><xsl:text> </xsl:text></xsl:if>
  <xsl:text>direction:rtl;</xsl:text>
 </xsl:template>

 <xsl:template match="span[@class='ind']">
  <xsl:if test="position() >1"><xsl:text> </xsl:text></xsl:if>
  <xsl:text>text-indent:10pt;</xsl:text>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<para><span class="bidi"/><span class="ind"/>1</para> 
```

**产生想要的正确结果：**

```
<para><span style="direction:rtl; text-indent:10pt;">1</span></para> 
```

# javascript - Webgl 无法运行示例（黑屏）

> ID：11366987
> 
> 赞同：1
> 
> 时间：2012-07-06T17:27:51.633
> 
> 标签：javascript, google-chrome, 3d, webgl

我在我的电脑上放了一个 wamp 服务器，然后从 webgl 示例中下载了所有内容（有一些问题，但我设法解决了它们）。

webGL 示例无法在我的本地 URL ( [http://localhost/mypage.htm](http://localhost/mypage.htm) )上播放

一切似乎都很好，chrome 检查员说一切都正确，并且使用 GL 调试器扩展，我什至设法获得了正确渲染的示例的一些屏幕截图。

问题是：渲染区域仍然是黑色的。它发生在我的本地 WAMP 服务器和远程 Web 服务器上，整个页面正确加载并且模拟似乎正在运行（我可以看到 FPS 仪表在屏幕的左上角运行），但我看不到动画

这是一个屏幕截图，可以更好地解释它 ![在此处输入图像描述](../Images/6f33b57b4c2ee7c60a4bbeb2ce13005d.png)

更新：这是 webGL 调试器的屏幕截图，您可以看到渲染已正确使用着色器和其他所有内容（找到并加载了纹理），但屏幕仍然是黑色的。我还附上了我正在使用的 html 文件（其他只是从网页上下载的库） ![在此处输入图像描述](../Images/667aaf767f7fc9d498f4e98380d68d66.png)

[http://nopaste.info/76792079d5.html](http://nopaste.info/76792079d5.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T10:15:43.870

解决了：你永远不会相信这个......

线

```
<div style="cursor: pointer; width: 80px; opacity: 0.9; z-index: 10001; position: absolute; top: 0px; "> 
```

由于某些奇怪的原因，webgl 演示被渲染到比可见区域向下的页面（即我只需要向下滚动才能找到正在运行的渲染）

还是要谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T00:19:02.747

注释掉这一行：

```
gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord ); 
```

如果你在圆圈所在的地方得到正方形，这意味着问题在于加载纹理。

WebGL（或者浏览器）非常挑剔，只让您在从适当的 Web 服务器运行时获得纹理（我不确定您在本地运行什么）。