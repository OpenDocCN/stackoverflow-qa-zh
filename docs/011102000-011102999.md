# StackOverflow 问答 11102000-11102999

# iphone - 识别iphone中两个字符串之间的字符串

> ID：11102005
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:29:34.457
> 
> 标签：iphone

> **可能重复：**
> [根据条件从 iphone 中的字符串中检索子字符串](https://stackoverflow.com/questions/11100379/retrieving-the-substring-based-on-condition-from-a-string-in-iphone)

我是 iphone 新手。我遇到了一些问题，那就是，我有一个字符串，它代表 xml 格式的某个网站（[http://www.audiotreasure.com/indexKJV.htm](http://www.audiotreasure.com/indexKJV.htm)）的源代码

请查看上述网站的查看源，查看源是我现在的字符串

在上面的字符串中，我想搜索以 (href =") 开头并以 (.zip) 结尾的字符串之间的字符串，然后我们得到这两个字符串之间的所有字符串，然后我必须放置所有这些字符串成数组..

如果有人知道这一点怎么可能，请逐步解释这一点并帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:46:27.113

使用 NSRegularExpression：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"href=\"(.*)\.zip\"" options:NSRegularExpressionCaseInsensitive error:&error];

NSRange rangeOfFirstMatch = [regex rangeOfFirstMatchInString:yourText options:0 range:NSMakeRange(0, [yourText length])];

if (!NSEqualRanges(rangeOfFirstMatch, NSMakeRange(NSNotFound, 0))) {

    NSString *substringForFirstMatch = [yourText substringWithRange:rangeOfFirstMatch];
    NSLog(@"Extracted URL: %@",substringForFirstMatch);
} 
```

# xmlhttprequest - JSCallback 服务器已关闭：在 Android Cordova 应用程序中停止回调

> ID：11102007
> 
> 赞同：1
> 
> 时间：2012-06-19T13:29:41.317
> 
> 标签：xmlhttprequest, cordova

我正在开发一个具有 XMLHttprequest 的应用程序。我正在为 Android 使用cordova-1.7。当我发送同步请求时，我可以让应用程序正常工作，但是当我异步发送请求时，它似乎丢失了。发送同步请求（正在工作）不允许其他一些功能工作。我从 cordova.js 文件中得到的错误是

06-19 12:14:58.100：D/CordovaLog(816)：JSCallback 服务器已关闭：停止回调。
06-19 12:14:58.100：D/CordovaLog(816)：file:///android_asset/www/cordova-1.7.0rc1.js：第 3560 行：JSCallback 服务器已关闭：停止回调。
06-19 12:14:58.100：I/Web 控制台（816）：JSCallback 服务器已关闭：停止回调。在文件：///android_asset/www/cordova-1.7.0rc1.js:3560

异步请求曾经在 iPhone(iOS) 上正常工作。任何人有任何想法，都会对我有所帮助。如果需要更多详细信息，请告诉我。

谢谢

部分代码如下：- { xmlhttp.onreadystatechange = getXmlDoc; xmlhttp.open("GET", 'URL', 'true', uid, pwd); xmlhttp.send(null); }

其余的是，它正在用于Android。我正在使用 Cordova-1.7 来实现设备功能的可访问性。同样的请求也适用于 iPhone。在 Android 中，只有同步有效，异步无效。使用的 URL 也是 Https 之一。有什么见解吗？

谢谢

# web-services - 如何访问 REST Web 服务的方法

> ID：11102008
> 
> 赞同：0
> 
> 时间：2012-06-19T13:29:42.970
> 
> 标签：web-services, rest

我创建了一个 REST Web 服务并成功地将它与客户端一起使用。我面临的问题是，当我调用服务的任何方法时，我必须向客户端提供该方法的“路径”。但是对于实时服务，如何知道服务公开的方法是什么以及它们的“路径”是什么。

在基于 SOAP 的服务中，可以在 WSDL 文件中指定相同的内容，并且只需访问 WSDL 文件，客户端就可以确定服务公开的方法是什么。

REST Web 服务是否有任何类似的方式，如果客户端只知道服务的 URL，那么它可以找到服务中存在的方法以及它们的路径，从而可以通过将它们的路径附加到 URL 来使用它们的服务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:38:32.173

不，Rest Web 服务应遵循对象模式，其中对 www.../company 的 GET 请求将返回所有公司，对 www.../company 的 POST 带有一些数据会将新公司添加到列表中/ db，DELETE 将删除，依此类推。

因此开发人员应该能够弄清楚如何使用每个 URL，但就像您必须找到一个网站或知道它的 URL 一样，您必须被告知这些服务的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:41:31.710

有 WADL。但我发现没有什么可以替代好的文档。

# java - Java 中的 EXCEPTION_ACCESS_VIOLATION

> ID：11102010
> 
> 赞同：1
> 
> 时间：2012-06-19T13:29:50.133
> 
> 标签：java

我可能在 Java 中遇到了一个奇怪的错误。当我运行以下代码时，我得到“EXCEPTION_ACCESS_VIOLATION”异常。

我知道代码没有意义（就逻辑而言），因为它是我最初编写的代码的子集。如果我删除几行，错误就会消失。

谁能弄清楚这个错误的原因是什么？

```
public static void main(String[] args) {
    for (int i=0; i < 4000; i++) {
        System.out.println("item " + i);
        test1();
    }

    //runBatch();   
    System.out.println("Done! bye bye..");
}

public static int test1() {
    int     count;
    int     allMiddleCount;
    int[]   b = new int[0];

    allMiddleCount  = 0;
    for (int i = 1; i < 64; i++)
    {
        // evaluating the size of the subset
        count = 0;
        for (int j = 0; j < 6; j++)
            count++;

        allMiddleCount++;
    }

    for (int i=0; i < allMiddleCount; i++) {

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:32:41.677

> 谁能弄清楚这个错误的原因是什么？

如果进程正在死亡而不是正常的 Java 异常，那么它基本上是 JVM 错误。您还没有说您在哪个平台上或您正在使用哪个版本，但请尝试更新到更高版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:37:00.463

谷歌搜索让`EXCEPTION_ACCESS_VIOLATION`我在 Oracle 网站上发现该 JVM 存在一些仍在调查中的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-07T19:09:35.127

我在使用 java 在我的项目中运行一些特定的 dll 时遇到了这个异常，经过几个月调查我们所有的环境后，它得到了解决，如果有人仍然需要它，这里是链接。 [Jacob dll 中的 EXCEPTION_ACCESS_VIOLATION 在 Jenkins 管道中使用 VM](https://stackoverflow.com/questions/65125191/exception-access-violation-in-jacob-dll-using-vm-in-jenkins-pipeline)

那里有我们尝试过的所有东西的描述，也许它会有用。不仅回到了 java 版本，而且回到了特定的构建版本，这个问题得到了解决。（在我们的例子中是 java 8 build 141）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T10:02:16.133

好的，我可以确认java中存在错误。我刚收到他们发来的确认新错误的邮件。

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7178093](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7178093) （网站两天后更新..）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:35:13.390

我测试了你的代码；工作正常。

我的猜测是，这是由硬件或软件平台问题引起的。

# c# - 我如何 GroupBy 这个 LINQ 查询？

> ID：11102022
> 
> 赞同：5
> 
> 时间：2012-06-19T13:30:38.793
> 
> 标签：c#, .net, linq

这是我的代码：

```
objectList = (from MyObject obj in MyObjects
             select r).ToList(); 
```

我想用“不同的”obj.ID 返回每条记录的列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:33:31.520

听起来您可能想要[`ToLookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)：

```
var lookup = MyObjects.ToLookup(x => x.ID); 
```

这使您可以获取任何特定 ID 的所有值，或迭代分组。它是热切评估的，而不是`GroupBy`惰性评估，这可能是您在这种情况下想要的。

那是假设我正确理解了您的要求-我完全有可能没有……如果您能澄清一下，那将很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:33:47.010

这为您提供了类型列表`IGrouping<int, MyObject>`（注意，我假设它`ID`具有 type `int`）：

```
groupedList = (from obj in MyObjects
             group obj by obj.ID into grouped
             select grouped).ToList(); 
```

# shell - Windows批处理：杀死进程

> ID：11102023
> 
> 赞同：0
> 
> 时间：2012-06-19T13:30:44.610
> 
> 标签：shell, batch-file

我有几个同名的进程正在运行。我想有一个从批处理脚本中杀死它们的选项。我需要一些与 unix shell 命令非常相似的东西：

```
kill -9 `ps -axuw | grep MY_PROCESS_NAME | awk '{print $2}'` 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T13:35:11.173

您可以使用`taskkill`.

`taskkill /im MY_PROCESS_NAME /f`

这将杀死您指定的名称下的所有进程，即`iexplore.exe`

`taskkill /?`在 cmd 提示符下键入所有选项。

# c# - C# 从目录下载文件并运行它

> ID：11102027
> 
> 赞同：4
> 
> 时间：2012-06-19T13:31:08.553
> 
> 标签：c#, download, directory

使用此代码，我可以下载文件，但我应该知道文件名。有没有办法下载目录中的任何文件（目录链接：[https](https://www.dropbox.com/sh/koao8dlfpcao8sk/XzDZMfejiF) ://www.dropbox.com/sh/koao8dlfpcao8sk/XzDZMfejiF ）并运行它？

```
private void Update_Load(object sender, EventArgs e)
{
        WebClient webClient = new WebClient();
        webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
        webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(ProgressChanged);
        webClient.DownloadFileAsync(new Uri("https://www.dropbox.com/s/6o5kvzr7s0c6mne/Test.txt"), @"C:\Users\Admin\Downloads\Test.txt");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:55:30.167

Dropbox 有一个 REST API，因此您只需在适当的 URL 上执行 HTTP GET 即可获取文件夹的内容。查看[Dropbox API 参考](https://www.dropbox.com/developers/reference/api#metadata)中的 /metadata 。如果您传递 list=true，这将为您提供文件夹的内容，并且您可以解析响应以获取文件名。然后就可以下载文件了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:49:45.207

当您通过[DownloadFileAsync](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfileasync.aspx)开始下载时，无论如何您都需要指定一个文件名。只需按照 MusiGenesis 的建议使用该名称并将其传递给[Process.Start即可。](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:38:02.250

您似乎已经涵盖了下载部分。[假设这是您正在下载的 Windows EXE，下载后您可以使用Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)运行它。

**编辑：** [这个问题](https://stackoverflow.com/q/124492/14606)似乎提供了一些关于如何做到这一点的想法。基本上，您使用您拥有的目录 URL 创建一个 HttpWebRequest，然后您必须解析此处返回的内容，以便获取该目录中包含的文件列表（可能只是一个文件）。一旦你有了它，你可以以正常方式下载该文件。

# c++ - 如何在 C++ 中将数组的一部分复制到另一个数组？

> ID：11102029
> 
> 赞同：18
> 
> 时间：2012-06-19T13:31:20.227
> 
> 标签：c++

这是在 C# 中提出的相同问题，但我需要 C++

如何将数组的一部分复制到另一个数组？

考虑我有

```
 int[] a = {1,2,3,4,5}; 
```

现在，如果我给出数组 a 的起始索引和结束索引，它应该被复制到另一个数组。

就像我将起始索引设为 1 并将结束索引设为 3 一样，元素 2、3、4 应该被复制到新数组中。

在 C# 中，它按以下方式完成

```
 int[] b = new int[3];
    Array.Copy(a, 1, b, 0, 3); 
```

有没有像这样的简单方法在 C++ 中完成相同的任务？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-19T13:34:02.737

是的，使用[`std::copy`](https://en.cppreference.com/w/cpp/algorithm/copy)：

```
std::copy(a + src_begin_index,
          a + src_begin_index + elements_to_copy,
          b + dest_begin_index); 
```

您的 C# 示例的等价物是：

```
std::copy(a + 1, a + 4, b); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T13:48:51.420

假设您想要像 C# 示例中那样动态分配的数组，最简单的方法是：

```
std::vector<int> b(a.begin() + 1, a.begin() + 4); 
```

这还有一个好处是它会在销毁时自动释放分配的内存；如果您`new`自己使用，那么您还需要使用`delete`以避免内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:34:35.440

有`C` [`memcpy`](http://www.cplusplus.com/reference/clibrary/cstring/memcpy/)命令，您可以像这样使用它：

```
memcpy(destinationArray, sourceArray, sizeof(*destinationArray) * elementsToCopy); 
```

还有[`std::copy`](http://www.cplusplus.com/reference/algorithm/copy/)，这是一种更多`C++`的方法：

```
std::copy(source, source + elementsInSource, destination); 
```

请注意，这些函数都不会检查以确保已分配足够的内存，因此使用风险自负！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:34:47.327

是的，使用 st 标准库算法`copy`：

```
#include <algorithm>

int main()
{
  int array[5] = { 1,2,3,4,5 }; // note: no int[] array
  int *b = new int[3];
  std::copy(array+1, array+4, b); 
  // copies elements 1 (inclusive) to 4 (exclusive), ie. values 2,3,4
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:34:20.783

对于简单的 C 样式数组，您可以使用`memcpy`：

```
memcpy(b, &a[1], sizeof(int) * 3); 
```

此行从 的索引 1 复制`sizeof(int) * 3`字节（即 12 个字节）`a`，并将`b`其作为目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-19T23:11:59.703

如果您在 CPP 中使用矢量，您可以这样做 -

假设您想将**arr**中的元素从索引**A**复制到索引**B**，您可以这样做 -

```
vector<int>nums(arr.begin()+A, arr.begin()+B+1); 
```

**注意 - nums 将被创建为 A[start, end) 所以我们需要添加额外的 1**

# c# - 将事件委托给表单而不创建循环引用

> ID：11102031
> 
> 赞同：1
> 
> 时间：2012-06-19T13:31:39.400
> 
> 标签：c#, vb.net, winforms

由于我目前正在从事的其他项目需要，我有一个在程序集中的课程。一个类可以称之为类工厂，创建一组需要附加单击事件处理程序的控件，我有基于某些特性确定多态行为的算法，但这相对无关紧要。由于事件处理程序必须打开一个不属于我的程序集的特定表单，并且该表单需要这个“工厂”类。在不创建循环引用的情况下，有什么方法可以本质上“委托”处理程序事件以定义表单？

作为一项简单的工作，我必须维护两个单独的类，一个在项目中使用表单，一个在程序集中。这显然是错误的做法。

不是 100% 确定标题，因为我知道我正在尝试做什么，但不确定如何去做。

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.Width = 1500
    Dim panel As New Panel
    panel.Location = New Point(0, 0)
    panel.Size = New Size(1000, 200)
    panel.BackColor = Color.Yellow
    Me.Controls.Add(panel)
    Dim factory As New DrawFactory
    factory.DrawPanel(panel, 5)
End Sub 
```

以上与类库中的以下代码在一个单独的项目中：

```
Public Class DrawFactory
Private xOffset As Integer = 0
Private Const widthConst As Integer = 50
Public Sub DrawPanel(ByRef panel As Panel, ByVal drawPanels As Integer)
    Application.DoEvents()
    For i As Integer = 0 To drawPanels
        Dim childPanel As New Panel
        childPanel.Location = New Point(xOffset, 0)
        childPanel.Size = New Size(widthConst, panel.Height)
        If i < 1 Then
            childPanel.BackColor = Color.Blue
        Else
            childPanel.BackColor = Color.Pink
        End If
        xOffset = xOffset + widthConst
        ''want to add a handler here to open say form5 which is unknown and undefined in the scope of this class
        panel.Controls.Add(childPanel)
    Next
End Sub
End class 
```

这不是我的实际代码，但它描述了我面临的问题的要点，我不介意用 C# 或 VB.NET 给出答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:41:25.733

在 .NET 中，循环引用在技术上不是问题。这是 COM 中的一个问题，因为 COM 使用引用计数来确定何时需要销毁对象。如果您有两个相互引用的对象，则循环引用将导致两个对象的引用计数均不为零，因此它们永远不会被销毁（导致内存泄漏）。然而，在 .NET 中，CLR 使用垃圾收集而不是引用计数。垃圾收集器会定期搜索所有对象以查找应用程序不再引用的任何对象。然后它会销毁所有如果找到的死对象。垃圾收集器足够聪明，可以知道两个或多个仅被彼此引用而没有其他对象的对象都是死的。因此，在 .NET 托管代码中，

但是，话虽如此，是的，您可以将事件处理程序方法作为委托传递给另一个项目中的 DrawFactory 类。然后 DrawFactory 类可以将该事件处理程序添加到它想要的任何事件中。例如：

```
Public Sub DrawPanel(ByVal panel As Panel, ByVal drawPanels As Integer, ByVal handler As EventHandler)
    For i As Integer = 0 To drawPanels
        Dim childPanel As New Panel
        '...
        AddHandler panel.Click, handler
        panel.Controls.Add(childPanel)
    Next
End Sub 
```

然后，在您的表单上，您需要一个与 EventHandler 签名匹配的方法，例如：

```
Private Sub Panel_Click(ByVal sender As Object, ByVal e As EventArgs)
    Form2.Show()
End Sub 
```

然后你可以这样调用工厂：

```
factory.DrawPanel(panel, 5, New EventHandler(AddressOf Panel_Click)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:41:41.210

是的，我相信你可以做到这一点。点击事件签名如下所示：

```
private void ButtonOkClicked(object sender, RoutedEventArgs e)
{

} 
```

你的类工厂 Create 方法可以接受一个动作，所以：

```
void Create(Action<object, RoutedEventArgs> clickAction)
{
  var btn = new Button();
  btn.OnClick += clickAction;
} 
```

我希望这会有所帮助，如果没有，请告诉我。

# java - Java super() 继承

> ID：11102034
> 
> 赞同：2
> 
> 时间：2012-06-19T13:31:45.610
> 
> 标签：java, oop, inheritance

问题的简短摘要：我有一个由子类扩展的父类。

```
 public class Parent{

        public Parent(){
          //constructor logic
        }
     } 
```

这个子类使用 super 调用 Parent 的构造函数：

```
 public class Child extends Parent{

         public Child(){
            super();
         }
     } 
```

如果我可以在 Grandchild 类的构造函数中调用 super() 方法，我想知道是否要扩展 Child 类：

```
 public class Grandchild extends Child{

         public Grandchild(){
            super();
         }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T13:32:45.440

这将调用`Child`类构造函数，而后者又将调用`Parent`类构造函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T13:36:55.730

super() 在继承的上一层调用构造函数，如果存在无参数构造函数，它会被隐式调用。

对象从继承的顶层初始化，在您的情况下，它是 Object > Parent > Child > Grandchild。

从[文档](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)中：

```
If a constructor does not explicitly invoke a superclass constructor, the Java compiler
automatically inserts a call to the no-argument constructor of the superclass. If the super 
class does not have a no-argument constructor, you will get a compile-time error. Object does 
have such a constructor, so if Object is the only superclass, there is no problem. 
```

# c# - POCO 实体中的关系

> ID：11102035
> 
> 赞同：0
> 
> 时间：2012-06-19T13:31:46.623
> 
> 标签：c#, asp.net-mvc-3, entity-framework, poco

我刚刚为我的项目设置了 EF4Templates 并生成了 POCO 实体。在生成 POCO 实体之前，我使用的是普通的 EF 实体。我是 POCO 实体的新手，我确信我在某处错过了一步。我的 POCO 实体没有获取我的数据库模型的关系。当我使用 EF 模型时，它们运行良好。例如，我有两个名为 Appointments 和 Services 的表。在使用 POCO 实体之前，我可以像这样访问约会服务：

```
var svc = appointment.Service; 
```

但现在它使用 POCO 返回 null。我究竟做错了什么？将不胜感激一些帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:35:03.457

您需要有一个代理跟踪导航属性。如果声明了导航属性，这将自动完成`public virtural`。

```
class Dog{
  public int Id {get; set;} //CF will automatically recognise this as a primary key
  public virtual <List>Leg Legs{get; set;} //automagical navigation property
}

class Leg{
  public int Id {get; set;} //idem
  public virtual Dog PartOf {get; set;} //automagical navigation property
} 
```

# django - 按模型类型查找 haystack 结果的数量？

> ID：11102036
> 
> 赞同：4
> 
> 时间：2012-06-19T13:31:48.243
> 
> 标签：django, django-haystack, whoosh

假设我想使用 django-haystack 搜索 3 个模型（注释、评论、文章），并设置了 3 个这样的索引。

```
class NoteIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    author = CharField(model_attr='user', faceted=True)
    pub_date = DateTimeField(model_attr='pub_date')

class CommentIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    author = CharField(model_attr='user', faceted=True)
    pub_date = DateTimeField(model_attr='pub_date')

class ArticleIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    author = CharField(model_attr='user', faceted=True)
    pub_date = DateTimeField(model_attr='pub_date') 
```

当我得到我的结果时，我可以使用作者方面来显示作者的结果数量。

```
>>> from haystack.query import SearchQuerySet
>>> sqs = SearchQuerySet().facet('author')
>>> sqs.facet_counts()
{
    'dates': {},
    'fields': {
        'author': [
            ('john', 4),
            ('daniel', 2),
            ('sally', 1),
            ('terry', 1),
        ],
    },
    'queries': {}
} 
```

但是我怎样才能找出模型类型有多少结果呢？例如。

注释：4 评论：2 文章：1

理想情况下，我想过滤它，就像一个正常的方面。我现在正在使用 FacetedModelSearchForm，我可以看到模型类型，只是无法获取计数值。这可能吗？如果是这样，怎么做？

**类似问题：**

看起来其他人也问过这个问题，但可能没有问得足够清楚。

[模型类型上的 Django Haystack 刻面](https://stackoverflow.com/questions/6809811/django-haystack-faceting-on-the-model-type)

这个类似，但他们只想按内容类型排序，我想按内容类型计数。

[使用 django-haystack，如何按内容类型对结果进行排序](https://stackoverflow.com/questions/5414632/using-django-haystack-how-do-i-order-results-by-content-type)

这是另一个类似的问题，但不完全相同，同样也没有答案。

[Django Haystack 分面示例](https://stackoverflow.com/questions/10862539/django-haystack-faceting-examples)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:14:41.047

您是否尝试过为此创建另一个方面？唯一可能困难的部分是获取模型名称。大多数情况下，你会想要使用`verbose_name`它，这样它就更具可读性，你可以从`_meta.verbose_name`. 但是，类似以下代码的内容可能*不起作用*：

```
model = CharField(model_attr='_meta.verbose_name', faceted=True) 
```

因此，您可以简单地向模型添加一个方法来返回此值：

```
def get_model_name(self):
    return self._meta.verbose_name 
```

然后：

```
model = CharField(model_attr='get_model_name', faceted=True) 
```

不过，所有这些都未经测试，因为我自己从来不需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-11T11:08:42.983

最好的解决方案是通过与 dictsort django 的模板过滤器关联的 regroup django'stemplatetag 重新组合 django 模板中的对象（r​​egroup 仅适用于有序查询集）：

```
{% with page.object_list as results %}

   {% regroup results|dictsort:"model_name" by model_name as grouped_objects %}

   {% for ct in grouped_objects %}

      {{ ct.grouper }} (Total: {{ct.list|length}}

      {% for result in ct.list %}

      <p><a href="{{ result.object.get_absolute_url }}">{{ result.object }}</a></p>

      {% endfor %}

   {% empty %}

      <p>No results found.</p>

   {% endfor %}

{% endwith %} 
```

如果您不想丢失原始订单，请务必通过 ('model_name',*your_order_fields) 排序的 SearchQueryset

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:37:54.697

尝试以下操作：

```
sqs1 = SearchQuerySet().models(Note).facet('author')
print sqs1.facet_counts()

sqs2 = SearchQuerySet().models(Comment).facet('author')
print sqs2.facet_counts()

sqs3 = SearchQuerySet().models(Article).facet('author')
print sqs3.facet_counts()

# multiple models are allowed as well:
sqs4 = SearchQuerySet().models(Note, Article).facet('author')
print sqs4.facet_counts() 
```

`SearchQuerySet`这将在计算方面计数之前限制为一个或多个模型。

# symfony - Symfony2 - 将 Sonata 集成到现有项目中

> ID：11102043
> 
> 赞同：0
> 
> 时间：2012-06-19T13:32:20.457
> 
> 标签：symfony, fosuserbundle, symfony-sonata

Symfony2 的新手。

我按照几个教程使用[FOSUser安装和配置](https://github.com/FriendsOfSymfony/FOSUserBundle)[Sonata](http://sonata-project.org/about) ，并生成了一个 SonataUser 包。

SonataAdmin 似乎被设计为在模板方面独立运行。

现在我有一个现有项目，**我想在我当前项目的界面中使用 Sonata 的某些部分（用户列表/编辑、组列表/编辑……）**。

我想知道最好的方法。

我首先考虑使用奏鸣曲模板扩展我的布局以保持可维护性的优势，但有很多我不需要的东西（如顶部导航栏、面包屑......）。

我也想调用奏鸣曲的部分，但我真的不知道怎么做，我不确定这是一个好主意。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:25:57.017

您可以覆盖捆绑包功能的任何和所有部分。对于模板更改，您只需将模板复制到 app/Resources（使用正确的目录结构），Symfony2 将首先在那里查找模板。要覆盖包的类/方法，只需扩展包的类并添加您喜欢的任何代码。您的路由只需要设置为指向您的类而不是捆绑包。

这一切都在这里解释得很好：

[http://symfony.com/doc/current/cookbook/bundles/inheritance.html](http://symfony.com/doc/current/cookbook/bundles/inheritance.html)

[http://symfony.com/doc/current/book/templating.html#overriding-bundle-templates](http://symfony.com/doc/current/book/templating.html#overriding-bundle-templates)

# java - 如何在 XML 中为 XStream 使用常量

> ID：11102044
> 
> 赞同：4
> 
> 时间：2012-06-19T13:32:29.447
> 
> 标签：java, xml, converter, xstream

请问，如何在 XML 中定义像 Integer.MAX_VALUE 这样的 java 常量？我知道如何使用枚举，但我有第三方库并且必须使用常量进行操作。例如，在 xml 文件中存在一些值，我希望在生成的 java 类中应该将其声明为常量。

XML:

```
 <person>
  <firstname>Joe</firstname>
  <lastname>Walnes</lastname>
  <phone>
    <code>123</code>
    <number>1234-456</number>
  </phone>
  <fax>
    <code>123</code>
    <number>9999-999</number>
  </fax>
 </person> 
```

爪哇：

```
 public class Person {
 private String firstname;
 private String lastname;
 private PhoneNumber phone;
 private PhoneNumber fax;
 // ... constructors and methods
}

public class PhoneNumber {
private int code;
private String number;
// ... constructors and methods
 } 
```

这行得通。但应该是这样的：

XML:

```
 <person>
  <firstname>Joe</firstname>
  <lastname>Walnes</lastname>
  <phone>
    **<const>**PnoneNumber.LOCAL**</const>**
  </phone>
  <fax>
    <code>123</code>
    <number>9999-999</number>
  </fax>
 </person> 
```

Java应该是：

```
 public class Person {
 private String firstname;
 private String lastname;
 private PhoneNumber phone;
 private PhoneNumber fax;
 // ... constructors and methods
}

public class PhoneNumber {
public static final PnoneNumber LOCAL=new PhoneNumber(123,"1234-456");
private int code;
private String number;
// ... constructors and methods
 } 
```

我可以在没有自定义转换器的情况下以简单的方式做到这一点吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T21:05:12.857

我研究了几个 XML-POJO 生成器，尤其是那些使用 XML Schema (XSD) 定义类的生成器，令我惊讶的是，没有一个提供修改属性的能力。

如果您想保留当前的解决方案，我认为最简洁的方法是通过您自己的自定义转换器扩展转换，正如您自己所说的那样。

如果您使用使用 XML Schema 的东西，您总是可以使用该属性`fixed="constant"`作为标准初始化，尽管它当然不会保留语义。

然而，用另一种方式解决这个问题可能会更好。这些是常量，它们不应该改变，所以也许最好将它们定义在一个单独的文件中。

# ruby-on-rails - 嵌套资源的路径

> ID：11102046
> 
> 赞同：0
> 
> 时间：2012-06-19T13:32:31.067
> 
> 标签：ruby-on-rails, routes

我正在尝试通过嵌套资源获取 rails 路由路径。我使用以下链接查看了导轨指南：

[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

例如，

```
 resources :users do
    resources :weekly_progress_charts
    resources :calories_journals
  end 
```

我知道并且可以使用 :users 路径。例如，calories_journals 的路径是什么？

例如，user_calories_journals_path 没有通过“users/1/calories_journals”给我一个索引列表

通过选定用户获取卡路里日志的正确 Rails RESTFUL 路径是什么：

新编辑更新创建销毁显示索引

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:47:09.107

你可以打电话

```
user_calories_journals_path(user) OR
user_calories_journal_path(user, calories_journal) 
```

它将在`app/views/caleries_journals/index.erb.html`OR中显示索引视图`app/views/caleries_journals/show.erb.html`

EricM 是对的，`rake routes`在终端中使用可以查看所有路线。

请注意，您也可以拥有`resources :calories_journal`并且它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:37:54.190

用于`rake routes`查看路径。

# c# - 我可以将用户从一个 ASP .Net 成员数据库移动到另一个具有不同应用程序 ID 的数据库吗？

> ID：11102047
> 
> 赞同：0
> 
> 时间：2012-06-19T13:32:35.450
> 
> 标签：c#, asp.net, sql-server-2008, asp.net-membership, membership-provider

是否可以将用户从一个 ASP .Net 成员数据库移动到另一个具有不同应用程序 ID 的数据库？两个系统都使用 passwordformat = hashed。只有大约 100 个用户帐户将被移动到包含大约 20,000 个帐户的另一个数据库中。用户名是唯一的。如果这 100 个用户需要重置他们的密码，那很好。

如果可能的话，我的计划是为 aspnet_Membership 和 aspnet_Users 表创建插入语句，可能在插入之前将 ApplicationID 更改为目标值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:28:16.453

我曾经遇到过类似的问题，

我创建了一个 asp.net 页面，并在单击按钮时放置了与此类似的代码：

```
protected void Button_addMedicacao0_Click(object sender, EventArgs e){
String strConnection1 = "conectionstring1";
String strConnection2 = "conectionstring2";
try
{
    OleDbConnection dbConn = null;
    OleDbCommand dbCmd = null;
    OleDbDataReader dr = null;
    String strSQL = null;
    dbConn = new OleDbConnection(strConnection1);
    dbConn.Open();
    strSQL = "select * from TABLE1";
    dbCmd = new OleDbCommand(strSQL, dbConn);
    dr = dbCmd.ExecuteReader();

    if (dr.HasRows)
    {
        while (dr.Read())
        {
            try
            {
                OleDbConnection dbConn2 = null;
                OleDbCommand dbCmd2 = null;
                String strSQL2 = null;
                dbConn2 = new OleDbConnection(strConnection2);
                dbConn2.Open();
                strSQL = "INSERT INTO TABLE2 (Field1, Field2) VALUES (?, ?)";
                dbCmd2 = new OleDbCommand(strSQL2, dbConn2);
                // dr[0] = id_table1
                dbCmd2.Parameters.Add(new OleDbParameter("Field1", dr[1].ToString()));
                dbCmd2.Parameters.Add(new OleDbParameter("Field2", dr[2].ToString()));                       
                dbCmd2.ExecuteNonQuery();
                dbConn2.Close();
            }
            catch (Exception err)
            { 
            }
        }
    }
    dbConn.Close();
}
catch (Exception err)
{  
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:38:19.740

只需使用新的 applicationId 复制详细信息即可。

# c# - CSV 下载为 HTM

> ID：11102050
> 
> 赞同：5
> 
> 时间：2012-06-19T13:32:43.347
> 
> 标签：c#, asp.net, csv, web

我在所有浏览器中都遇到了很大的问题。

我有一个网站，客户可以在其中下载包含他们需要的详细信息的 csv 文件。

我遇到的问题是 csv 文件要么下载没有扩展名，要么作为 htm 文件下载。

在我用 .csv 指定文件名的代码中，服务器上的文件也是 .csv。

代码如下

```
context.Response.Buffer = true;
context.Response.Clear();
context.Response.ClearHeaders();                    
context.Response.ContentType = "text/csv";
context.Response.AppendHeader("Content-Disposition", @"attachment,     
     filename=" + ((string)Path.GetFileName(downloadFilePath)));
context.Response.WriteFile(downloadFilePath);
context.Response.Flush();
context.Response.Close(); 
```

我试过`context.Response.ContentType = "text/html";`和`context.Response.ContentType = "application/octet-stream";`.

它在 IIS6 上运行。

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:08:25.247

假设您的[逐字字符串文字](http://dotnetslackers.com/CSharp/re-51752_The_Chash_String_Literal.aspx)在源代码中的单行上，您是否尝试将`,`标题`Content-Disposition`中的 替换为`;`? 我发现的例子总是在那里使用分号。

在文件名周围使用引号来保护标题免受特殊字符的影响也可能更安全：

```
context.Response.AppendHeader(
    "Content-Disposition",
    string.Format(
        "attachment; filename=\"{0}\"",
        Path.GetFileName(downloadFilePath))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:01:30.220

好的，我已经弄清楚为什么文件没有以 CSV 格式下载。

这是因为文件名中有空格，所以我需要将文件名括起来，这样它就不会在空格处被截断。

谢谢你的帮助

# c# - 在 Telerik 的 radgrid 中获取行标题和列标题

> ID：11102057
> 
> 赞同：0
> 
> 时间：2012-06-19T13:33:13.187
> 
> 标签：c#, asp.net, grid, telerik

我在使用 Telerik 的 radgrid 时遇到了问题。到目前为止，我一直在使用只有列标题的简单网格。我需要知道获取行标题。

我正在尝试使用这或多或少我正在寻找的东西：http: [//demos.telerik.com/aspnet-ajax/grid/examples/programming/pivot/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/programming/pivot/defaultcs.aspx)

问题行/列标题不是我表中的列名。我需要直接在代码中编写它们。欢迎提供一些帮助！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:18:06.223

不知道这是否正是你喜欢的，但是......

可以在网格（aspx）中声明列：

```
<MasterTableView>
    <Columns>
        <telerik:GridTemplateColumn UniqueName="RowHeader"></telerik:GridTemplateColumn> 
```

并在 ItemCreated 事件中分配值：

```
if (e.Item is GridDataItem)
{
    ((GridDataItem)e.Item)["RowHeader"].Text = "nononono"; 
```

# swagger - Swagger UI 当前是否支持模型？

> ID：11102058
> 
> 赞同：3
> 
> 时间：2012-06-19T13:33:15.463
> 
> 标签：swagger

Swagger Spec 提供了[描述模型的](http://swagger.wordnik.com/spec#appendix-b)规定。

但是，现有的 Swagger-UI 项目似乎没有使用它或显示模型。查看[Petstore Demo](http://petstore.swagger.wordnik.com/)，我看到提供了一个[模型](http://petstore.swagger.wordnik.com/api/pet.json)，但看不到它显示。

我错过了什么吗？还是只是还不支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:23:06.903

[更新：在swagger-ui](https://github.com/wordnik/swagger-ui)的 build 1.1.5 中可见的 swagger 模型。

这些模型现在未显示在 UI 中，但用于 swagger 代码生成器 [ [1](https://github.com/wordnik/swagger-ui) ]。它们很快就会出现在 UI 中，并用于 POST、PUT 和 DELETE 等操作，以及一种更简洁的方式来可视化 GET 响应。

# c# - 响应 Gridview 内的 UserControl 内的 OnClick

> ID：11102059
> 
> 赞同：0
> 
> 时间：2012-06-19T13:33:16.103
> 
> 标签：c#, asp.net, events

***更新***

我应该学会更仔细地阅读错误信息。我忘记在我的列规范中为 gridview 更改一些相同的 ID，这导致了“多个相同的 ID”错误。

感谢您阅读我的问题以及曾经试图帮助我的所有人。免费拍我的脸

* * *

我试图从 GridView 内的用户控件内的 ImageButton 中获取 OnClick 或 OnCommand 事件。我尝试创建 imagebutton 所以它抛出一个命令：

```
<asp:ImageButton runat="server" ID="exchanceButton" 
        Visible="False" ImageUrl="../Images/Icons/Exchange.png" 
        CommandName="exchanceCommand" CommandArgument="1"> 
```

并在 GridView OnRowCommand 中捕获它，但我收到以下错误：**找到具有相同 ID 'userControlPlan' 的多个控件。FindControl 要求控件具有唯一的 ID。** 我尝试调试，但它根本没有到达我的 OnRowCommand。

我尝试了以下指南，但没有成功：http: [//msdn.microsoft.com/en-us/library/bb907626.aspx](http://msdn.microsoft.com/en-us/library/bb907626.aspx)

我还尝试通过在 UserControl 中创建自己的事件来执行该事件，然后为每个 UserControl 分配一个侦听器：

```
public delegate void OnExchanceClickDelegate(int id);

public event OnExchanceClickDelegate OnExchangeClick;

protected void exchanceButton_Click(object sender, ImageClickEventArgs e)
{
    if (OnExchangeClick != null)
    OnExchangeClick(1);
} 
```

但我得到关于多个控件的相同错误。

你们中的任何人对我如何正确地将事件从 UserControl 内的 ImageButton 引发到 Gridview 或其他东西有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:41:47.380

不确定这是否有帮助。但这就是我为我的网站所做的：

```
<asp:ImageButton ToolTip="Download File" ID="lbDownload" ImageUrl="/images/btn_download.gif" 
CommandArgument='<%# Eval("DocumentName") %>' runat="server" CommandName="DownloadDoc"/> 
```

重要的部分是命令名称。

当然在您的 gridview 标签中使用 OnItemCommand 参数。然后在服务器端：

```
protected void itemCommand(object sender, GridCommandEventArgs e)
{
    if (e.CommandName == "DownloadDoc")
    // Do something...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:28:25.863

我解决了这个问题。我的 UserControl 中确实有重复的 ID。我更新了我原来的问题。

# java - 在 Java 中，如何写入我最近读取的文件？

> ID：11102060
> 
> 赞同：5
> 
> 时间：2012-06-19T13:33:18.723
> 
> 标签：java, file-io, text-files

我正在创建一个记事本类型的程序。以下是我从文件中读取和写入的方法：

```
BufferedWriter out = null;
try {

    System.out.println("Saving to " + saveFile.getName());
    out = new BufferedWriter(new FileWriter(saveFile));
    out.write(box.getText());

} catch (IOException ex) {
    Logger.getLogger(INoteView.class.getName()).log(Level.SEVERE, null, ex);
    setStatus("ERROR o1");
} finally {
    try {
        out.close();
    } catch (IOException ex) {
        Logger.getLogger(INoteView.class.getName()).log(Level.SEVERE, null, ex);
        setStatus("ERROR o2");
    }
} 
```

和

```
private static String readFile(File f) throws IOException {
    FileInputStream stream = new FileInputStream(f);
    try {
        FileChannel fc = stream.getChannel();
        MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
        /* Instead of using default, pass in a decoder. */
        return Charset.defaultCharset().decode(bb).toString();
    } finally {
        stream.close();
    }
} 
```

当我尝试保存到之前打开的文件时，我得到了`Error o1`和 a 。`FileNotFoundException`

完全错误：

```
Jun 19, 2012 9:27:34 AM inote.INoteView jButton2ActionPerformed
SEVERE: null
java.io.FileNotFoundException: D:\My Documents\1.txt (The requested operation cannot be performed on a file with a user-mapped section open)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
    at java.io.FileWriter.<init>(FileWriter.java:90)
    at inote.INoteView.jButton2ActionPerformed(INoteView.java:324)
    at inote.INoteView.access$500(INoteView.java:41)
    at inote.INoteView$5.actionPerformed(INoteView.java:173)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at inote.INoteView.jButton2ActionPerformed(INoteView.java:332)
    at inote.INoteView.access$500(INoteView.java:41)
    at inote.INoteView$5.actionPerformed(INoteView.java:173)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Saving to 1.txt
Jun 19, 2012 9:28:04 AM inote.INoteView jButton2ActionPerformed
SEVERE: null
java.io.FileNotFoundException: D:\My Documents\1.txt (The requested operation cannot be performed on a file with a user-mapped section open)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
    at java.io.FileWriter.<init>(FileWriter.java:90)
    at inote.INoteView.jButton2ActionPerformed(INoteView.java:324)
    at inote.INoteView.access$500(INoteView.java:41)
    at inote.INoteView$5.actionPerformed(INoteView.java:173)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at inote.INoteView.jButton2ActionPerformed(INoteView.java:332)
    at inote.INoteView.access$500(INoteView.java:41)
    at inote.INoteView$5.actionPerformed(INoteView.java:173)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
BUILD SUCCESSFUL (total time: 1 minute 18 seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-15T11:57:28.463

“FileChannel 的 Java 5.0 文档声明“缓冲区和它所代表的映射将保持有效，直到缓冲区本身被垃圾回收”。当我们尝试重新打开文件存储并且映射的字节缓冲区没有时发生错误一直是 GC。由于没有用于映射字节缓冲区的 unmap() 方法（请参阅错误 4724038），我们在缓冲区何时释放时受底层操作系统的支配。该问题不会在 Solaris 上发生；可能是由于在 Solaris 上实现共享内存的方式。因此，Windows 的解决方法是不为事务信息表使用内存映射文件。

[https://answers.yahoo.com/question/index?qid=20090927164148AAOdJmE](https://answers.yahoo.com/question/index?qid=20090927164148AAOdJmE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:01:39.197

该错误表示您无法在已打开并被您的应用程序阻止的文件上写入（有关更多信息：[System.IO.Exception 错误：“无法在打开用户映射部分的文件上执行请求的操作。”](https://stackoverflow.com/questions/1302698/system-io-exception-error-the-requested-operation-cannot-be-performed-on-a-fil)）。我认为您必须使用缓冲区，当用户按下按钮保存您直接写入文件时，您可以不断检查文件以检查其他用户或应用程序是否进行了更改以通知用户您的应用程序。

如果您需要一个示例，您可以查看 Stylepad 应用程序，它随您的 JDK 安装一起提供，通常安装在

C:\Program Files\Java\jdk1.6.0_31\demo\jfc\Stylepad

源代码在文件夹 src 中，您可以通过双击文件 Stylepad.jar 来执行应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T21:06:32.177

这就是你的做法。确保将文本文件放在 src 文件夹和 bin 文件夹所在的同一文件夹中。（我使用 eclipse）如果您希望它位于 bin 文件夹中，则需要使文本文件相对。

```
package read;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.OutputStreamWriter;
import java.io.UnsupportedEncodingException;

public class read {
    public static void main(String[] args) throws UnsupportedEncodingException{

        //READ

        String line;
        try {
            BufferedReader reader = new BufferedReader(new FileReader("TEST.txt"));
            do{
                line = reader.readLine();
                if(line != null){
                System.out.println(line);
                }
            }
            while(line != null);
        } catch (IOException e) {
            System.out.println("NO FILE IS THERE");
            e.printStackTrace();
        }

        //WRITE

        try {
            BufferedWriter write = new BufferedWriter(new OutputStreamWriter(
                    new FileOutputStream("TEST.txt")));
            write.newLine();
            write.write("HELLO");
            write.close();
        } catch (FileNotFoundException e) {
            System.out.println("NO FILE IS THERE");
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("Unable To Write");
            e.printStackTrace();
        }
    }
} 
```

# java - finally 子句总是会执行吗？

> ID：11102063
> 
> 赞同：2
> 
> 时间：2012-06-19T13:33:24.843
> 
> 标签：java

```
try {
    if (myBoolean) {
        while (true) ;
    } else {
        System.exit(1);
    }
} finally {
    code.to.cleanup();
} 
```

我不完全确定，但我觉得上面的代码片段可能会导致 finally 子句不执行，无论 myBoolean 的值如何

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T13:34:15.780

不，`System.exit(1)`阻止 finally 子句运行。

`try`基本上，finally 块在/之后执行，`catch`无论是正常返回`try`还是`catch`异常返回。

然而，A完全`System.exit`阻止了块返回*。*

（然而，正如彼得指出的那样，`while(true) ;`显然会无限期地阻塞。A 只是假设它`while (true) ;`是一个更有意义的东西的存根:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:35:42.237

因为如果**myBoolean**值为 true，就会进入无限循环。我认为您在 while 语句后放错了分号。

在第二种情况下，如果**myBoolean**为 false，则**System.exit(1)**使程序退出而不运行任何进一步的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:26:01.940

请注意，因为其他人已经很好地回答了这些细节：`finally`本质上是保证如果执行离开该`try`块，则在该块运行之前不会运行*其他*代码`finally`。它不保证该`finally`块**将**被运行。后者是不可能的；在极端情况下考虑停电或硬件故障。

`finally`旨在使您能够在执行离开 try/finally 块后向程序的其余部分提供有关事物状态的保证。`finally`并非旨在为您的程序之外的世界提供保证。在“程序的其余部分”没有继续运行的情况下，操作系统更有责任在死进程之后清理它已分发的资源，以及与您的程序交互的其他系统的责任有办法处理你的过程突然失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:50:22.220

在您的示例中，`finally`不会执行 if 块中的代码是一个无限循环，而在 else 块中它会导致 JVM 关闭。但是对于任何其他正常情况，即使您的 try 块中有 return 关键字，最终也会始终执行。

```
try {
  System.out.println("Returning from here....");
  return;
} finally {
  System.out.println("Inside finally....");
} 
```

输出将是：

```
从这里归来......
终于进去了……

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:52:06.143

System.exit(1) 执行应用程序的残酷退出，忽略调用堆栈上的任何内容，包括 finally 块。
请记住，GC 也不会运行，因此应用程序使用的资源可能会处于“挂起”或“僵尸”状态（未关闭的文件等）。
如果这只是一个问题为了理论，忽略我的评论。

# java - Java替换功能

> ID：11102067
> 
> 赞同：-2
> 
> 时间：2012-06-19T13:33:32.470
> 
> 标签：java

在我目前的工作中，我必须编写一个替换函数。一个替换函数，它将文件路径（例如，`/sim/device`）作为输入并生成输出 - `sim.device`。

在 java 中，我尝试过使用`replace("/", ".")`. 但是，这个函数产生输出`.sim.device`。

我的问题是“在 Java 中，是否有任何函数可以解决我的目的，或者我应该自己编写函数？” 你也可以建议高效的java代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T13:36:50.657

```
String s = "/sim/device";
System.out.println( s.replace("/", ".").substring( 1)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T13:38:22.047

如果要忽略第一个字符，可以使用子字符串。

```
String text = "/my/sim/device";
String text2 = text.substring(1).replace('/','.');
System.out.println(text2); 
```

印刷

```
my.sim.device 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T13:37:20.843

使用这个有尝试：

```
replaceAll("(?<=\\S+)/", ".").substring(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:39:47.117

replace 函数用第二个字符串替换第一个字符串的所有实例。在这种情况下...

```
Input:  /sim/device
Output: .sim.device 
```

如果你注意到，你有一个'/'的每个位置，你现在都有一个'.'。如果您的目标是删除字符串的第一个字符，请查看 String.substring() 方法。

哦，作为一般建议，通读 Java 教程。它是免费的，可从 Oracle 的 Web 上获得，并且对如何使用 Java 提供了很好的解释。如果你完成了它，它已经为你回答了这个问题:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:44:21.473

不是单个函数调用，而是解决您的需求。

```
public static void main(String[] args) {
    String path = "/sim/device";
    System.out.println(path.replace("/",".").substring(1,path.length()));

} 
```

# php - 使用 mod_rewrite 将 PHP 变量 URL 转换为干净的 URL

> ID：11102071
> 
> 赞同：0
> 
> 时间：2012-06-19T13:33:41.517
> 
> 标签：php, .htaccess, variables, mod-rewrite

我需要将包含 php 变量的链接转换为可以被 Google 提取和索引的干净链接。我已经研究了执行此操作的方法，并且显然使用 mod_rewrite 是处理此问题的最佳方法。

目前我的网址如下所示：

```
 http://mysite.com/jobs/view/?j=senior-model-validator-groep-risk-management 
```

我想最终看起来像这样

```
http://mysite.com/jobs/view/senior-model-validator-groep-risk-management 
```

这可能真的很容易，但遗憾的是我对.htaccess 一无所知。我尝试了一些东西，但最终没有任何东西接近:-)

提前致谢！

编辑：这是我目前基于帮助的完整 .htaccess 文件：

```
<IfModule mod_rewrite.c>  
RewriteEngine On  
RewriteRule ^jobs/view/(.*)$   jobs/view/?j=$1 [L]  
RewriteBase /  
RewriteRule ^index\.php$ - [L]  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . /index.php [L]  
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:39:37.460

您可以在您的网站根目录使用 .htaccess 文件，并遵循以下规则：

```
RewriteEngine on
RewriteRule ^jobs/view/(.*)$   jobs/view/?j=$1 [L] 
```

不要忘记在处理数据的脚本中过滤/验证 GET 输入...

# objective-c - UIImagePickerController：在没有快门动画的情况下调用 takePicture

> ID：11102073
> 
> 赞同：0
> 
> 时间：2012-06-19T13:33:44.110
> 
> 标签：objective-c, ios

我正在调用 UIImagePickerController 的方法 takePicture 方法来以编程方式使用 iPhone 拍摄图片

但是，我想禁用快门动画，并在拍摄照片时让屏幕保持原样（并禁用声音）。

**更新** 我现在使用 AVFoundation API 来获取图像，但相机的内容不再显示在屏幕上。我应该初始化一个 UIImagePickerController 只是为了在屏幕上显示相机的内容吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:42:34.937

UIImagePickerController 有一些选项，但不是很多。 [This other question](https://stackoverflow.com/questions/3138502/hide-show-iphone-camera-iris-shutter-animation)有一些俗气但可能有效的禁用它的想法。

为了完全控制，您需要使用 AVFoundation API。这是一个捕获示例： [https ://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:44:57.887

查看此示例：它使用 AVCaptureSession 和 ImagePicker 从视频中捕获图像。 [http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Classes_AVCamCaptureManager_m.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Classes_AVCamCaptureManager_m.html)

还有这个：[https ://github.com/jj0b/AROverlayExample](https://github.com/jj0b/AROverlayExample)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T13:53:23.893

我认为这对 3.0 有用

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info  
{  

    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if ([mediaType isEqualToString:@"public.image"])
    {
        UIImage *selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];

        UIImage * cameraimage= [self scaleAndRotateImage:selectedImage];

        CGRect rect =CGRectMake(0, 0,640,875);        
        CGImageRef imageRef = CGImageCreateWithImageInRect([selectedImage CGImage], rect);
        UIImage *img = [UIImage imageWithCGImage:imageRef]; 
        CGImageRelease(imageRef); 
        self.captureimage.image=cameraimage;

        NSLog(@"selectedimage width:%f ht:%f",img.size.width,img.size.height);
    }
    [picker dismissModalViewControllerAnimated:YES];
} 
```

# css - 打包时 CSS 中断

> ID：11102080
> 
> 赞同：0
> 
> 时间：2012-06-19T13:34:00.633
> 
> 标签：css, packing

假设我的网站上有大约 10 个 css 文件。我想把它们合二为一。但是当我组合它们（只是“连接”文件，以便将它们包含到 html 中）时，我的样式/布局会中断。这不是路径或其他问题的问题，只是选择器不像以前那样工作。

我是否遗漏了什么，或者我的文件太大了？可能是什么问题呢？我认为只要保留顺序，样式是在一个文件中还是在多个文件中（它们不应该是）没有区别...

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:36:11.223

确保您的文件中没有`@import`指令。根据 CSS 规范，它只能放在其他规则之前。所有其他导入都将被忽略。

例如：

1.css：

```
BODY {background: #fff; } 
```

2.css：

```
@import "foobar.css"; 
```

1+2.css：

```
BODY {background: #fff; }
@import "foobar.css"; /* This import won't work. */ 
```

# javascript - 处理跨域xml

> ID：11102081
> 
> 赞同：0
> 
> 时间：2012-06-19T13:34:02.547
> 
> 标签：javascript, jquery, jsp, cross-domain, yql

在使用 jsp 的 web 项目中，我有以下要求

将文件（例如图像）上传到不同的域，该域会返回一个 xml，其中包含上传文件的详细信息（例如：上传图像的路径等）。

如何捕获此 xml 以将详细信息保存在数据库中？

我无法进行正常的 html 表单提交，因为在那之后我失去了控制。所以我尝试通过将表单目标设置为 iframe 来实现这一点。但我无法处理 iframe 的内容？

有什么建议我可以如何做到这一点？

我可以使用 yql 处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:55:31.637

是的，您可以使用 YQL 做到这一点。不过这并不容易，您需要设置自己的 YQL 表。

每个 YQL 表都是一个 XML 文件，描述如何对数据进行操作。YQL XML 规范允许您定义一个`<execute>`元素，您可以使用它来[编写几乎可以执行任何操作的 JavaScript 代码](http://developer.yahoo.com/yql/guide/yql-execute-chapter.html)。

在此`<execute>`块内，您可以使用[y.rest](http://developer.yahoo.com/yql/guide/yql-javascript-objects.html#yql-execute-yrestobject)对象在其他地方发布数据。

您可能必须使用 base64 对文件进行编码，才能使用 YQL 语法实际发布数据，例如`INSERT INTO mywebsite.files (name, data) VALUES ('foo.png', 'KBB987987JJBHBGV==')`（第二个参数是一个说明性的 base64 编码文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:47:31.183

假设您将文件提交到的服务器不受您的控制（因此您不能使用 CORS），您可以通过自己的服务器代理请求。

你不能使用 YQL，因为你不能用它发出 post 请求。

# asp.net - 在本地部署 ASP.NET MVC3 网站

> ID：11102090
> 
> 赞同：1
> 
> 时间：2012-06-19T13:34:21.473
> 
> 标签：asp.net, asp.net-mvc-3

我一直在 VS2010 下的 ASP.NET MVC3 网站上工作，我想知道如何在 IIS7 上的 Windows 7 电脑上本地部署它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:45:31.570

伙计，它很简单。

第 1 步：发布它。
第 2 步：将其添加为网站
第 3 步：将当前的 asp.net 版本更改为应用程序池的 4.0
第 4 步：欢欣鼓舞！完成 ！

好吧，如果没有，那么就会出现一些错误的问题，那么这是由于 .net 4.0 没有在 iis 中注册。所以试试这个：

```
  %windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -ir for 32 bit windows 

```

和

```
  %windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir for 64 bit windows 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:39:55.680

您可以使用与 ASP.NET Web 应用程序相同的方式来执行此操作。没有显着差异。

右键单击您的项目并`Publish`从上下文菜单中选择“”选项。您可以指定要发布的方式（FTP、文件系统等）。让我们选择 FileSystem 并选择一个文件夹，然后单击发布按钮会将所需的文件放到该文件夹​​中。

您可以在 IIS 下创建站点/虚拟目录，并将文件位置指定为我们发布的同一文件夹。

![在此处输入图像描述](../Images/f21be6b95c67712b7e67db568d14a3e4.png)

# c# - 在 aspx 页面之间传递 C# 对象

> ID：11102092
> 
> 赞同：2
> 
> 时间：2012-06-19T13:34:27.460
> 
> 标签：c#, asp.net, .net

我正在创建一个从用户那里收集数据的 ASPX 应用程序，可以根据这些数据创建一个文件。根据用户类型收集不同类型的数据。另外，我必须检查数据库以查看数据库中是否已有数据。我正在寻找一种简单的方法来跟踪数据，同时在所有收集数据的 ASPX 页面之间进行遍历。我知道我可以在 URL 中传递数据，如果我找不到替代方法，那么我将使用它。

我的问题是，是否可以将数据放入 C# 对象并以某种方式在 ASPX 页面之间传递该对象的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:36:08.553

最简单的就是使用Session包。

```
Session["FirstName"] = FirstNameTextBox.Text;
Session["LastName"] = LastNameTextBox.Text; 
```

从会话状态中检索对象时，将其转换为适当的类型。

```
ArrayList stockPicks = (ArrayList)Session["StockPicks"]; 
```

这是 MSDN 上关于会话状态的更详尽的文章：http: [//msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)（从中无耻地复制了简短的代码示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:36:10.770

假设数据不是太大，我会将数据放入`Session`并逐页检索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:36:24.807

您可以为此使用 Session 对象。

# c# - c# 即使我向所有人授予权限，也不允许请求的注册表访问

> ID：11102097
> 
> 赞同：0
> 
> 时间：2012-06-19T13:34:40.893
> 
> 标签：c#, permissions, remote-access, securityexception

我正在读取远程计算机上的注册表项，如下所示：

```
RegistryKey regKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, pc1, RegistryView.Registry64).OpenSubKey("SOFTWARE\\ODBC\\ODBC.INI\\NetworkTP_DB"); 
```

我去了远程计算，我把完全控制权交给了每个人，我仍然得到：

> 未处理 SecurityException 不允许请求的注册表访问。

我什至关闭了远程计算机上的所有防火墙以确保它不会影响任何东西，现在我真的不知道该怎么办。

请问有什么想法吗？

# salesforce - 如何通过 SQL 查询从 Visualforce 页面获取 KnowledgeArticleViewStat 数据？

> ID：11102103
> 
> 赞同：0
> 
> 时间：2012-06-19T13:35:04.983
> 
> 标签：salesforce, apex-code, visualforce

我正在尝试在我的页面上显示有关知识文章的信息。我想要显示的一件事是查看次数最多的文章统计信息。

我有一个如下所示的 Visualforce Apex 组件：

```
<apex:component controller="Component_Query" access="global">
  <apex:attribute name="QueryString" type="String" required="true" access="global" assignTo="{!queryString}"
    description="A valid SOQL query in string form." />

    <apex:variable value="{!results}" var="results"/>
    <apex:componentBody />
</apex:component> 
```

我有一个如下所示的 Visualforce 页面：

```
<apex:page >
    <table id="articles">
        <knowledge:articleList articleVar="article" sortBy="mostViewed" pageSize="5">
        <tr>
            <td>{!article.articlenumber}</td>
            <td><a target="_parent" href="{!URLFOR($Action.KnowledgeArticle.View, article.id)}">{!article.title}</a></td>
            <td>{!article.articletypelabel}</td>
            <td>{!article.lastpublisheddate}</td>
            <td>
                <c:Query_component queryString="SELECT NormalizedScore FROM KnowledgeArticleViewStat WHERE ParentId = '{!article.id}'">
                <apex:repeat value="{!results}" var="result">
                </apex:repeat>
                </c:Query_component>
            </td>
        </tr>
        </knowledge:articleList>
    </table>
</apex:page> 
```

我将 Visualforce 页面放入选项卡中。当我查看该页面时，除了有关查看次数最多的统计信息的信息外，所有有关知识文章的信息都会显示出来。我如何看到这个统计数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:51:44.367

您忘记为视图统计添加输出。您必须`<apex:outputText>`在重复中添加一个标签以显示该值。

`<apex:outputText>{!result.NormalizedScore}</apex:outputText>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:19:28.627

这就是我最终在 Visualforce 页面中使用的内容：

```
 <c:Query_component queryString="SELECT NormalizedScore, Id, ParentId FROM KnowledgeArticleViewStat WHERE Channel='Csp'">
        <apex:variable value="{!results[articleid]}" var="result"/>
            <span class="inlinesparkline">100, {!result}</span>
    </c:Query_component> 
```

# c# - 最小化 SqlDataReader 循环上的表锁定？

> ID：11102104
> 
> 赞同：1
> 
> 时间：2012-06-19T13:35:07.650
> 
> 标签：c#, .net, sql-server, dapper

我有以下场景（删除了异常处理，简化了代码）：

```
SqlDataReader rdr = executeQuery(query);
while (rdr.Read()) {
   //There are thousands of records, so this happens thousands of times
   handleRecord(rdr); //Takes a couple of seconds
}
rdr.Close(); 
```

因此，查询涉及的表（在过度拥挤的 Sql Server 2000 上运行）具有几个小时或更长时间的共享锁，具体取决于记录的数量。

这些锁有时会影响查询该数据库的其他应用程序，因此我被要求尽快移除这些锁。

所以，没有明显的

```
List<Record> rList = new List<Record>();
SqlDataReader rdr = executeQuery(query);
while (rdr.Read()) {
   //There are thousands of records, so this happens thousands of times
   storeRecord(rList,rdr); //Takes milliseconds
}
rdr.Close();
foreach (Record r in rList) {
    handleRecord(r);
} 
```

这会限制我可以在机器内存上处理的记录数量，还有其他选择吗？

（这个应用程序我正在慢慢迁移到 Dapper.NET，所以它已经是代码其他部分的依赖项，以防 Dapper 中的某些东西可以帮助解决这种情况。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-18T14:09:18.557

这是一个古老的话题，但这是我有时使用的一个技巧：

1.  在主键上订购您的 sql 查询。
2.  阅读前 ## 条记录。
3.  读取/缓冲那些 ## 记录。
4.  使用您的缓冲区进行处理。
5.  记住最高的id。

通过一项修改返回到 2：您读取顶部 ## 记录 WHERE id > 最高 id。

通过这种方式，您可以读取和处理批量数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:31:14.997

将尝试我的评论作为答案，因为没有最近的评论。

选择到#temp 表中。并对您的锁进行一般审查。也许一些行锁。确保以相同的顺序更新表。handleRecord 是什么样的？

# java - 如何在Java中获取所有网络接口并将信息存储在Java Map中

> ID：11102108
> 
> 赞同：4
> 
> 时间：2012-06-19T13:35:20.990
> 
> 标签：java

我是 Java 编程新手。我需要一种方法来使用 java 获取 Linux 中的所有网络接口并将该信息存储在 Java 中`Map`。我在 Google 中找到了很多方法，如何以静态方式执行此操作 - 只是如何获取`eth0`和显示信息。我的代码需要可移植 - 代码必须显示部署在具有 2 个或 4 个网络端口的服务器上的配置。

我认为最好的方法是使用 Java`Map`获取信息，然后再显示它。你能帮帮我吗？

最良好的祝愿

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T14:09:08.290

`

```
Enumeration<NetworkInterface> interfaces = NetworkInterface.getNetworkInterfaces();

while (interfaces.hasMoreElements())
{
NetworkInterface networkInterface = interfaces.nextElement();

Enumeration<InetAddress> inetAddresses = networkInterface.getInetAddresses();

}
} 
```

`

看看NetworkInterface，InterfaceInfo

更多细节在这里：http: [//java.dzone.com/news/network-interface-details-java](http://java.dzone.com/news/network-interface-details-java)

# javascript - 使用 RichFaces 4 从 JavaScript 获取 DOM 元素

> ID：11102109
> 
> 赞同：5
> 
> 时间：2012-06-19T13:35:22.670
> 
> 标签：javascript, dom, richfaces, getelementbyid

我目前正在研究迁移到 RichFaces 4。从我的 JS 中，我必须使用 DOM 元素

```
document.getElementById('myParent:myElement'). 
```

从 JBoss 迁移指南中，我了解到不能再使用“document.getElementById”：[https](https://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration-CommonComponentsChanges) ://community.jboss.org/wiki/RichFacesMigrationGuide33x-4xMigration-CommonComponentsChanges 。

**有人能解释一下为什么吗？我怎么能（简单地）把我对这个函数的所有调用——超过一千个——改成别的东西？**

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T08:54:02.963

我建议你阅读这篇文章： [RichFaces built-in client functions](http://planet.jboss.org/post/richfaces_built_in_client_functions)

总而言之，有 4 个内置函数：

1.  `#{rich:clientId('id')}`
2.  `#{rich:element('id')}`
3.  `#{rich:component('id')}`
4.  `#{rich:findComponent('id')}`

解释：

*   第一个允许将richfaces id 转换为字符串。
*   第二个是用来`getElementById`（HTML Element）
*   第三个是用来`getElementById`（JavaScript组件）
*   在不调用 managedBean 的情况下最后获得价值

# javascript - 检查css类是否包含在div中

> ID：11102111
> 
> 赞同：1
> 
> 时间：2012-06-19T13:35:24.403
> 
> 标签：javascript, jquery

对于这个 div：

```
<div class="table room"> </div> 
```

是否可以使用该`attr`参数来检查 div 是否包含 CSS 类“房间”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T13:36:33.653

使用hasclass：

```
$('div.table').hasClass('room') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T13:35:57.740

试试这个：

```
$('div.table').hasClass('room');

if($('div.table').hasClass('room')) {
  alert('Yes');
} 
```

查看更多关于**[`.hasClass()`](http://api.jquery.com/hasClass/)**

### 根据评论

你也可以用ie`id`代替`class`

```
$('div#someId').hasClass('room') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:39:30.907

```
$('.table').hasClass('room') 
```

更粗略的方法使用`attr`

```
if ($('.table').attr('room') != undefined) 
```

# java - 如何清除字符串？

> ID：11102114
> 
> 赞同：8
> 
> 时间：2012-06-19T13:35:29.587
> 
> 标签：java, string, jtextfield

在我正在处理的程序中，文本字段必须在某些时候显示一些文本。

```
output.setText( outputString );
outputString = ""; 
```

输出是一个 JTextField。这些代码行在一个方法中，当它第一次被调用时，它工作得非常好。但是，当它再次被调用时，原始的 outputString 文本仍然存在。为什么会发生这种情况，我该如何解决？

好的，我认为这是因为字符串是不可变的。问题是， outputString 永远不会改变，所以它仍然有来自初始方法调用的文本。

我如何以某种方式更改字符串中的文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:38:36.460

将文本设置为变量的内容不会在该变量和该文本字段之间建立永久关系，如果要清除文本，可以使用

```
output.setText(""); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T13:36:59.130

您必须从 JTextField 对象中清除文本。使用 setText() 将变量作为参数发送**不会**将该变量绑定到对象。它只是复制字符串。

```
output.setText(""); 
```

> 如果文本为空或为空，则具有简单删除旧文本的效果。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T13:55:15.657

我认为你误解了一些非常重要的事情。Java 字符串是不可变的，这意味着您无法更改它们。

> *“我如何以某种方式更改字符串中的文本？”*

你不能。字符串中的文本不能更改。它是不可变的。任何涉及更改字符串中文本的“解决方案”在 Java 中都不起作用。（了解？）

当你这样做时：

```
output.setText(outputString);
outputString = ""; 
```

分配不会更改文本字段中显示的值。它只是改变了局部变量所`outputString`引用的字符串。

当你这样做时：

```
output.setText(""); 
output.setText(outputString); 
```

它不会导致`outputString`改变。它只是将显示的文本更改为空，然后立即将其更改为`outputString`当前引用的任何内容。

如果您想将文本字段中显示的值更改为空，您只需执行以下操作：

```
output.setText(""); 
```

也许您的想法有误的另一件事是您认为：

```
output.setText(outputString); 
```

建立文本字段`output`和变量之间的关系`outputString`......这样当用户输入字段时，`outputString`变量会神奇地更新。事实并非如此。事实上，不能这样，因为你不能传递变量的地址。

实际上，`output.setText(outputString);`只是将 的*值*传递`outputString`给文本框对象。**如果并且当用户在框中键入内容时，这些字符**将存储在其他位置，并且仅在您的代码调用`output.getText()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:42:37.613

您的代码所做的是首先将文本字段的内容设置为 outputString 变量 in: 的内容`output.setText( outputString );`。

您的后续代码行不会更改 String 对象，这是您的文本字段的内容，而是将您的 outputString 变量设置为引用空字符串变量。字符串在 Java 中是不可变的，不可能将一个字符串变量的更改反映到另一个字符串变量。

正如许多人所说，您需要通过调用来设置文本字段内容：`jTextFieldVar.setText("");`或`jTextFieldVar.setText(null);`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T13:39:53.863

```
output.setText(""); 
```

会解决这个问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T13:40:01.923

> 为什么会这样？

**字符串是不可变的。**

总是有一个对字符串的新引用。因此，当您调用 时`outputString = "";`，会创建新的 String。

> 我该如何解决？

打电话`output.setText("");`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T13:43:01.380

我认为您正在寻找的是：

```
 output.setText(""); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-19T13:39:06.950

尝试设置 JTextField 的文本后，是否将输出字符串设置为“”？如果是这样，您应该尝试执行以下操作：

```
 output.setText(""); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-19T14:40:10.637

这会很好的。

输出.setString("");

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-23T17:58:29.360

其他指向字符串不可变这一事实的答案是准确的。

但是如果你想拥有“清除字符串”的功能，你可以[使用 StringBuffer 来代替它并调用它](http://www.mkyong.com/java/how-to-clear-delete-the-content-of-stringbuffer/)：

```
stringBuffer.delete(0, stringBuffer.length()); 
```

# c# - 为字符串编写器保存对话框

> ID：11102116
> 
> 赞同：0
> 
> 时间：2012-06-19T13:35:36.353
> 
> 标签：c#, asp.net, savefiledialog

我正在使用以下代码将数据导出为 csv 格式。通常它存储在系统桌面中。我想保存各种位置，这就是为什么需要保存对话框。但是我做不到，请帮我做..

## 我的部分代码在这里：

```
 StringBuilder sb = new StringBuilder();
        var columnNames = dt.Columns.Cast<DataColumn>().Select(column => column.ColumnName).ToArray();
        sb.AppendLine(string.Join(",", columnNames));
        foreach (DataRow row in dt.Rows)
        { var fields = row.ItemArray.Select(field => field.ToString().Replace(","," "));
        sb.AppendLine(string.Join(",", fields));
        }
        File.WriteAllText(Environment.GetFolderPath(Environment.SpecialFolder.Desktop) +"/test.csv", sb.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:46:07.697

如果您需要打开一个保存对话框，您需要将 content-disposition 标头添加到您的响应中，如下所示：

```
Response.AddHeader("content-disposition", "attachment;filename=test.csv"); 
```

现在您可以将字符串写入响应：

```
Response.Write(sb.ToString());
Response.End(); //VERY IMPORTANT 
```

# c# - 如何在 Unity 3D 中将球体移动一段距离？

> ID：11102117
> 
> 赞同：0
> 
> 时间：2012-06-19T13:35:41.740
> 
> 标签：c#, unity3d, geometry, physics, collision

我只想与球体发生碰撞。我有两个球体，其中一个球体移动到另一个球体。一开始它们之间有一个距离，假设距离为 5。（假设 sphere1 和 sphere2）。当 sphere1 撞击到 sphere2 时，sphere2 必须仅移动 5 个单位。并且这种碰撞必须根据物理规则实现。如何我可以这样做吗？我尝试了很多东西，但我对统一 3D 很陌生。因此我找不到方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:52:52.630

为了让物理学有意义，并在任何距离做同样的事情，我认为你需要 sphere1 向 sphere2 加速，（或者以足够的能量开始 10 个单位加上它所经历的任何摩擦）转移所有立即停止时释放其能量，然后您需要 sphere2 在被击中后以相同的速度减速。

自己移动它可能更简单，使用简化或卡通化的物理，比如球体以恒定的速度移动，直到它们移动到必要的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:37:26.887

您是否尝试过类似的方法：

```
using UnityEngine;
using System.Collections;

public class MovingSphere : Monobehavior // Attatch to sphere1
{
    public GameObject sphere1, sphere2; // Set these in the inspector
    // Say sphere1 is at (-2, 0, 0)
    // Say sphere2 is at ( 0, 0, 0)

    void Update( )
    {
        if(sphere2.transform.position.x < 5) // If x-position of sphere2 < 5
        {
            sphere1.transform.Translate(0.1f, 0, 0); // Moves the first sphere
        }                                            // positively on the x-plane
    }
} 
```

我刚刚写了这个，所以它没有经过测试......但是它应该是这样的：

```
START SCENE:

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
(s1)           (s2)

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
     (s1)      (s2)

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
          (s1) (s2)

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
               (s1) (s2)

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
                    (s1) (s2)

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
                         (s1) (s2)

 [x] [-2] [-1] [00] [+1] [+2] [+4] [+5]
                              (s1) (s2) <Stop> 
```

如果第二个球体在被击中时变得疯狂，您可能需要锁定 y 轴和 z 轴，这可以通过检查器窗口中的一个小复选框来完成。

如果您需要更多信息，请告诉我们！

# c# - 系统正常运行时间和内存屏障

> ID：11102123
> 
> 赞同：4
> 
> 时间：2012-06-19T13:36:06.433
> 
> 标签：c#, multithreading, memory-barriers

我需要一种可靠的方法来获得系统正常运行时间，并最终使用如下方法。添加了一些评论以帮助人们阅读它。我不能使用 Task，因为它必须在 .NET 3.5 应用程序上运行。

```
// This is a structure, can't be marked as volatile
// need to implement MemoryBarrier manually as appropriate
private static TimeSpan _uptime;

private static TimeSpan GetUptime()
{
    // Try and set the Uptime using per counters
    var uptimeThread = new Thread(GetPerformanceCounterUptime);
    uptimeThread.Start();

    // If our thread hasn't finished in 5 seconds, perf counters are broken
    if (!uptimeThread.Join(5 * 1000))
    {
        // Kill the thread and use Environment.TickCount
        uptimeThread.Abort();
        _uptime = TimeSpan.FromMilliseconds(
            Environment.TickCount & Int32.MaxValue);
    }

    Thread.MemoryBarrier();
    return _uptime;
}

// This sets the System uptime using the perf counters
// this gives the best result but on a system with corrupt perf counters
// it can freeze
private static void GetPerformanceCounterUptime()
{
    using (var uptime = new PerformanceCounter("System", "System Up Time"))
    {
        uptime.NextValue();
        _uptime = TimeSpan.FromSeconds(uptime.NextValue());
    }
} 
```

我正在努力的部分是应该`Thread.MemoryBarrier()`放在哪里？我在读取值之前放置它，但是当前线程或不同的线程可能已经写入它。以上看起来正确吗？

**编辑，根据丹尼尔回答**

这就是我最终实现的，谢谢你们的洞察力。

```
private static TimeSpan _uptime;

private static TimeSpan GetUptime()
{
    var uptimeThread = new Thread(GetPerformanceCounterUptime);
    uptimeThread.Start();

    if (uptimeThread.Join(5*1000))
    {
        return _uptime;
    }
    else
    {
        uptimeThread.Abort();
        return TimeSpan.FromMilliseconds(
            Environment.TickCount & Int32.MaxValue);
    }
}

private static void GetPerformanceCounterUptime()
{
    using (var uptime = new PerformanceCounter("System", "System Up Time"))
    {
        uptime.NextValue();
        _uptime = TimeSpan.FromSeconds(uptime.NextValue());
    }
} 
```

**编辑 2**

根据 Bob 的评论更新。

```
private static DateTimeOffset _uptime;

private static DateTimeOffset GetUptime()
{
    var uptimeThread = new Thread(GetPerformanceCounterUptime);
    uptimeThread.Start();

    if (uptimeThread.Join(5*1000))
    {
        return _uptime;
    }
    else
    {
        uptimeThread.Abort();
        return DateTimeOffset.Now.Subtract(TimeSpan.FromMilliseconds(
            Environment.TickCount & Int32.MaxValue));
    }
}

private static void GetPerformanceCounterUptime()
{
    if (_uptime != default(DateTimeOffset))
    {
        return;
    }

    using (var uptime = new PerformanceCounter("System", "System Up Time"))
    {
        uptime.NextValue();
        _uptime = DateTimeOffset.Now.Subtract(
            TimeSpan.FromSeconds(uptime.NextValue()));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:48:53.587

`Thread.Join`已经确保 uptimeThread 执行的写入在主线程上可见。您不需要任何显式的内存屏障。（如果没有 执行的同步`Join`，您将需要两个线程上的障碍 - 在写入之后和读取之前）

但是，您的代码存在一个潜在问题：写入`TimeSpan`结构不是原子的，主线程和 uptimeThread 可能同时写入它（`Thread.Abort`只是发出中止信号，但不等待线程完成中止)，导致写入撕裂。我的解决方案是在中止时根本不使用该字段。此外，多个并发调用`GetUptime()`可能会导致相同的问题，因此您应该改用实例字段。

```
private static TimeSpan GetUptime()
{
    // Try and set the Uptime using per counters
    var helper = new Helper();
    var uptimeThread = new Thread(helper.GetPerformanceCounterUptime);
    uptimeThread.Start();

    // If our thread hasn't finished in 5 seconds, perf counters are broken
    if (uptimeThread.Join(5 * 1000))
    {
        return helper._uptime;
    } else {
        // Kill the thread and use Environment.TickCount
        uptimeThread.Abort();
        return TimeSpan.FromMilliseconds(
            Environment.TickCount & Int32.MaxValue);
    }
}

class Helper
{
    internal TimeSpan _uptime;

    // This sets the System uptime using the perf counters
    // this gives the best result but on a system with corrupt perf counters
    // it can freeze
    internal void GetPerformanceCounterUptime()
    {
        using (var uptime = new PerformanceCounter("System", "System Up Time"))
        {
            uptime.NextValue();
            _uptime = TimeSpan.FromSeconds(uptime.NextValue());
        }
    }
} 
```

但是，我不确定中止性能计数器线程是否会正常工作 -`Thread.Abort()`只会中止托管代码执行。如果代码在 Windows API 调用中挂起，线程将继续运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:56:49.963

.NET 中的 AFAIK 写入是易失性的，因此您需要内存栅栏的唯一地方是在每次读取之前，因为它们需要重新排序和/或缓存。引用[Joe Duffy 的帖子](http://www.bluebytesoftware.com/blog/2007/11/10/CLR20MemoryModel.aspx)：

> 作为参考，以下是我所理解的规则，尽可能简单地说明：
> 
> ```
> Rule 1: Data dependence among loads and stores is never violated.
> Rule 2: All stores have release semantics, i.e. no load or store may move after one.
> Rule 3: All volatile loads are acquire, i.e. no load or store may move before one.
> Rule 4: No loads and stores may ever cross a full-barrier. 
> Rule 5: Loads and stores to the heap may never be introduced.
> Rule 6: Loads and stores may only be deleted when coalescing adjacent loads and 
> stores from/to the same location. 
> ```
> 
> 请注意，根据这个定义，非易失性负载不需要有任何类型的障碍与其相关联。因此负载可以自由地重新排序，并且写入可以在它们之后移动（尽管不是在之前，由于规则 2）。使用此模型，您真正需要规则 4 提供的完整屏障强度的唯一真实情况是在存储后跟易失负载的情况下防止重新排序。没有障碍，说明可能会重新排序。

# r - ggplot2：如何拥有不同颜色的 geom_vline()

> ID：11102129
> 
> 赞同：18
> 
> 时间：2012-06-19T13:36:18.647
> 
> 标签：r, statistics, ggplot2

我的情节中有这五 (5) 个 geom_vline()，我希望它们具有不同的颜色。有没有办法做到这一点？

这是我的代码，

```
library(ggplot2)

x <- seq(-7, 8, length = 90)
tvalues <- dt(x,15)

qplot(x, tvalues) + geom_polygon(fill = "purple", colour = "purple", alpha = 0.5) + 
  geom_point(fill = "purple", colour = "purple", alpha = 0.2, pch = 21) +
  geom_vline(xintercept = c(a <- c(-2.27685371,  0.01661155,  
  0.33598194,  1.92426022), mean(a)), linetype = "dashed", colour = "red") + theme_bw() + xlab(bquote(bold('Average Tensile Strength (lb/in'^'2'*')'))) +
  ylab(expression(bold(P(x)))) +
  opts(title = expression(bold("Student t Distribution")), plot.title = theme_text(size = 20, colour = "darkblue"),
       panel.border = theme_rect(size = 2, colour = "red")) 
```

这是输出，

![在此处输入图像描述](../Images/7b7f2b62f6c3faba5bed9f77d61c72a8.png)

注意图中的五条垂直线，我希望每条线都有不同的颜色，

我试过这个

```
library(colorRamps)
geom_vline(xintercept = c(a <- c(-2.27685371,  0.01661155,  
   0.33598194,  1.92426022), mean(a)), linetype = "dashed", colour = matlab.like(5)) 
```

但没用，再试一次

```
geom_vline(xintercept = c(a <- c(-2.27685371,  0.01661155,  
   0.33598194,  1.92426022), mean(a)), linetype = "dashed", colour = c("red","blue","green","yellow","orange")) 
```

仍然不成功。

提前致谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-19T14:09:19.317

因此，您有点错过了**ggplot2**背后的基本思想，即您始终将所有数据放入一个`data.frame`映射中，并且映射的每个美学都对应于数据框中的一个变量。

你可以得到 5 条垂直线，每条线都有不同的颜色，有 5 次单独的调用，`geom_vline`但这错过了整个包的要点。相反，您创建一个数据框：

```
a <- c(-2.27685371,0.01661155,0.33598194,1.92426022)
vlines <- data.frame(xint = c(a,mean(a)),grp = letters[1:5]) 
```

我已经明确创建了一个分组变量`grp`来映射到`colour`. 然后我们添加图层并将美学映射到这些变量，使用`aes`：

```
qplot(x, tvalues) + 
  geom_polygon(fill = "purple", colour = "purple", alpha = 0.5) + 
  geom_point(fill = "purple", colour = "purple", alpha = 0.2, pch = 21) +
  geom_vline(data = vlines,aes(xintercept = xint,colour = grp), linetype = "dashed") + 
  theme_bw() + 
  xlab(bquote(bold('Average Tensile Strength (lb/in'^'2'*')'))) +
  ylab(expression(bold(P(x)))) +
  opts(title = expression(bold("Student t Distribution")), 
       plot.title = theme_text(size = 20, colour = "darkblue"),
       panel.border = theme_rect(size = 2, colour = "red")) 
```

（颜色很难区分，因为它们是虚线，其中两个几乎在彼此之上。）

如果您从向过渡并开始将数据放入数据框而不是向量中，您将从**ggplot2**中获得更多收益。`qplot``ggplot()`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-04-18T16:32:37.273

如果您只想放置一条线，添加以下内容将在红色和虚线`geom`处添加一条垂直线。`x=1`

```
+ geom_vline(aes(xintercept=1), colour="#BB0000", linetype="dashed") 
```

# c# - 如何检查 HttpContext.Current.Response 是否有现有的 Header？

> ID：11102130
> 
> 赞同：2
> 
> 时间：2012-06-19T13:36:24.563
> 
> 标签：c#, asp.net, vb.net, iis, http-headers

我正在处理一个必须将标头添加到响应标头的场景。

我添加了一个这样的响应标头：- `HttpContext.Current.Response.AddHeader("key1", "value1")`

经过一些功能流程后，我需要为相同的**“key1”**添加值：`HttpContext.Current.Reponse.AddHeader("key1, "value2")`

因此响应标头中的值如下所示：- **key1** : **value1, value2**

我想避免**value2**添加到相同的关键字**key1**。

如何解决这个问题？

我试过了：-

```
If HttpContext.Current.Response.Headers("key1") Then
    HttpContext.Current.Reponse.AddHeader("key1, "value2")
EndIf 
```

但我得到了错误：此**操作需要 IIS 集成管道模式**`HttpContext.Current.Response.Headers("key1")`

我正在运行 IIS6。这个[http://forums.asp.net/post/2676139.aspx](http://forums.asp.net/post/2676139.aspx)说如果它不是 IIS7 它就不起作用

如果我可以在 IIS6 中做到这一点，请提供帮助。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:24:19.707

您可以使用此行检查它是否有键

```
HttpContext.Current.Response.Headers.HasKeys() 
```

所以在你的例子中你会这样做

```
If Not HttpContext.Current.Response.Headers.HasKeys() Then
    HttpContext.Current.Reponse.AddHeader("key1, "value2")
EndIf 
```

希望这可以帮助

# c# - 从名称调用属性或类型

> ID：11102134
> 
> 赞同：2
> 
> 时间：2012-06-19T13:36:30.880
> 
> 标签：c#, c#-4.0

我正在尝试动态设置资源字符串。根据从 Web 服务返回的代码，资源的名称略有不同。不同的代码应该向用户显示不同的消息。

除了巨大的 if 结构或字典之外，有没有一种很好的方法可以使用反射或其他一些黑魔法来做到这一点。这种事情：

```
var message = Something.Invoke("HostedResources.MESSAGE_CODE_" + code); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:46:16.800

是的，您可以使用反射按名称获取属性：

```
HostedResources hostedResourceInstance = GetHostedResources();

PropertyInfo info = typeof(HostedResources).GetProperty("MESSAGE_CODE_" + code);
var message = (string)info.GetValue(hostedResourceInstance, null); 
```

# haskell - 使用 Reactive-banana 和 SDL 的完整 Click/KeyPress 事件

> ID：11102137
> 
> 赞同：4
> 
> 时间：2012-06-19T13:36:37.053
> 
> 标签：haskell, sdl, reactive-banana

据我所知，完整的单击事件是一个按钮向下和向上，没有鼠标移动。SDL 只给我 Button Up 和 Down 事件。

有什么[`reactive-banana`](http://www.haskell.org/haskellwiki/Reactive-banana)方法可以表达“先按下然后再按下”吗？

顺便说一句，如果我想要一个显示“key still down”的事件，我必须启用 SDL，`enableKeyRepeat`以便再次触发 keyDown 事件。如何在 FRP 中正确表达？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:12:46.570

我会尝试这样的事情：

定义一个效用函数（未经测试）：

```
successive :: (a -> a -> Maybe b) -> Event t a -> Event t b
successive f e = filterJust (b <@> e)
  where b = stepper (const Nothing) (f <$> e) 
```

然后使用类似的东西

```
successive (\previous current -> if previous == buttonDown && current == buttonUp
                                   then Just ()
                                   else Nothing)
           buttonEvents 
```

（伪代码，因为我不熟悉 SDL）。

这应该有效，因为在事件触发后行为会部分更新。

# c# - C# - ExpandoObject 定义

> ID：11102138
> 
> 赞同：1
> 
> 时间：2012-06-19T13:36:41.220
> 
> 标签：c#, .net, dynamic, expandoobject

查看 System.Dynamic.ExpandoObject 的定义我遇到了这个：

```
public sealed class ExpandoObject : IDynamicMetaObjectProvider, IDictionary<string, object>, ICollection<KeyValuePair<string, object>>, IEnumerable<KeyValuePair<string, object>>, IEnumerable, INotifyPropertyChanged
{
    public ExpandoObject();
} 
```

为什么 ExpandoObject 类不实现接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:40:59.080

`ExpandoObject`具有接口的显[式实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)。显式实现允许它仅在转换为接口本身时才可访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:44:46.483

[使用.Net Reflector](http://www.reflector.net/)之类的东西，您可以看到每个接口的实现。代码太长，无法在此处发布，但都在其中。只需在反射器中搜索 ExandoObject，您就会看到成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:44:38.703

我使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)并 `System.Core 4.0.0.0` 得到

![在此处输入图像描述](../Images/f0cc39bbf0fa72ff1a37ba9700bd9608.png)

所以实际上存在实现......

# c# - 从任务栏中隐藏我的应用程序

> ID：11102139
> 
> 赞同：1
> 
> 时间：2012-06-19T13:36:48.707
> 
> 标签：c#, vb.net, taskbar

是否可以从任务栏中隐藏我的应用程序？

我试过了：

```
Me.Hide() 
```

但这从任务栏中隐藏了表单而不是应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:37:23.420

试试这个：

```
Me.ShowInTaskbar = False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:38:32.813

使用[ShowInTaskbar](http://msdn.microsoft.com/en-en/library/system.windows.forms.form.showintaskbar%28v=vs.80%29.aspx)属性并将其设置为`False`您的`Form`.

您也可以在设计器中执行此操作：

![在此处输入图像描述](../Images/261c4b96584d752792f57d157841cfd2.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T06:27:28.473

使用[ShowInTaskbar](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showintaskbar.aspx)属性并设置为`false`.

例如：

```
Me.ShowInTaskbar = False 
```

# javascript - 延迟执行 JavaScript

> ID：11102141
> 
> 赞同：3
> 
> 时间：2012-06-19T13:36:53.607
> 
> 标签：javascript, delay

我从我的 PHP 代码中调用了一些 JavaScript，但我希望第二部分保持 5 秒。

我发现了`setTimeOut(something, time)`（JS）和`.delay(time)`（JQuery）之类的东西，但它们似乎都不适用于我的情况。

这是我的PHP：

```
$feedback = '<script>
               $(document).ready(function() {
                 noty({"text": "Yep, you did it",
                   "closeButton": true, "closeOnSelfClick": true,
                   "closeOnSelfOver": false, "modal": false
                 });
               });
             </script>

             <script>
                window.location = "http://www.mysite.be/new/index.php";        
             </script>'; 
```

`window.location`这是我想暂停 5 秒的第二部分（the ）。但我不知道该怎么做。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T13:39:15.683

将第二部分替换为：

```
<script>
  window.setTimeout( function() {
    window.location = "http://www.mysite.be/new/index.php";
    }, 5 * 1000 );
</script> 
```

这会在 5 秒后执行匿名函数（参见[MDN 文档`setTimeout()`](https://developer.mozilla.org/en/DOM/window.setTimeout)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:40:10.250

`setTimeout`适合您的需求：

```
setTimeout('window.location = "http://www.mysite.be/new/index.php";', 5000); 
```

由于不是每个人都可以接受，如果不适合您`eval`，也可以通过函数调用来完成：`eval`

```
var redirect = function(){
  window.location = "http://www.mysite.be/new/index.php"
}
setTimeout(redirect, 5000) 
```

顺便说一句，虽然[`delay`](http://api.jquery.com/delay/)jQuery 可用于实现您想要的，但它不适合：

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的原生 setTimeout 函数，这可能更适合某些用例。

# facebook - 如何在 Facebook 或 Google+ 上分享嵌入式本地服务器的视频或远程服务器的视频？

> ID：11102143
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:36:56.247
> 
> 标签：facebook, video, google-plus

如果我们的网站中有一个带有任何播放器或视频标签的嵌入式视频（不是 YouTube 视频），或者视频可以托管在另一台服务器上，如果我们想在 Facebook 或 Google+ 上分享它，我们该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:48:59.500

您可能会发现[这篇文章](http://www.longtailvideo.com/blog/19150/publish-your-videos-to-facebook-with-a-jw-player)值得您花点时间。注意：您可能需要在服务器上安装有效的 SSL 证书才能正常工作。

# c++ - 链接时CMake错误

> ID：11102151
> 
> 赞同：4
> 
> 时间：2012-06-19T13:37:29.643
> 
> 标签：c++, qt, cmake, kde4

我对 CMake 很陌生，我正在尝试用它来构建一个小的 KDE 应用程序。我必须使用 QTXml 模块，我的程序编译没有问题，但是在链接阶段，ld 找不到 QXml 组件...

主文件

```
#include "test.h"

int main(int argc, char **argv)
{
    return 0;
} 
```

测试.h

```
#ifndef TEST_H
#define TEST_H

#include <QXmlResultItems>
#include <QString>
#include <QBuffer>
#include <QXmlQuery>

class test {
public:
    test(){}
    ~test(){}
    QXmlResultItems* find ( const QString& node, const QString& xpath );
private:
    QBuffer device_;
};

#endif // TEST_H 
```

测试.cpp

```
#include "test.h"

QXmlResultItems* test::find ( const QString& node, const QString& xpath )
{
    QXmlResultItems* result = new QXmlResultItems;
    QXmlQuery query;
    query.bindVariable ( "device",&device_ );
    query.setQuery ( "doc($device)/"+node+"/"+xpath );
    query.evaluateTo ( result );
    return result;
} 
```

CMakeLists.cmake

```
project(qtcmakepb)

find_package(KDE4 REQUIRED)
include (KDE4Defaults)

include_directories( ${KDE4_INCLUDES} ${QT_INCLUDES} )
#Supposed to be useless because of KDE4 REQUIRED and ${QT_INCLUDES}
find_package(Qt4 COMPONENTS QtCore QtXml REQUIRED )

# In this CMakeLists.txt we define which files
# are used to compile the application
set(qtcmakepb_SRCS main.cpp test.cpp)

# Set the name of the application
kde4_add_executable(qtcmakepb ${qtcmakepb_SRCS})

# Select which libraries we need to link to
target_link_libraries(qtcmakepb ${KDE4_KDEUI_LIBS})
target_link_libraries(qtcmakepb ${QT_QTCORE_LIBS})
target_link_libraries(qtcmakepb ${QT_QTXML_LIBS})

# Tell cmake to install the application binary
install(TARGETS qtcmakepb ${INSTALL_TARGETS_DEFAULT_ARGS})

# Install the .desktop file
install( PROGRAMS qtcmakepb.desktop  DESTINATION ${XDG_APPS_INSTALL_DIR} ) 
```

make 的输出：

```
Linking CXX executable qtcmakepb
CMakeFiles/qtcmakepb.dir/test.o: In function `test::find(QString const&, QString const&)':
/home/zelwina/projects/QtCmakePb/src/test.cpp:5: undefined reference to `QXmlResultItems::QXmlResultItems()'
/home/zelwina/projects/QtCmakePb/src/test.cpp:6: undefined reference to `QXmlQuery::QXmlQuery()'
/home/zelwina/projects/QtCmakePb/src/test.cpp:7: undefined reference to `QXmlQuery::bindVariable(QString const&, QIODevice*)'
/home/zelwina/projects/QtCmakePb/src/test.cpp:8: undefined reference to `QXmlQuery::setQuery(QString const&, QUrl const&)'
/home/zelwina/projects/QtCmakePb/src/test.cpp:9: undefined reference to `QXmlQuery::evaluateTo(QXmlResultItems*) const'
/home/zelwina/projects/QtCmakePb/src/test.cpp:10: undefined reference to `QXmlQuery::~QXmlQuery()'
collect2: erreur: ld a retourné 1 code d'état d'exécution
make[2]: *** [src/qtcmakepb] Erreur 1
make[1]: *** [src/CMakeFiles/qtcmakepb.dir/all] Erreur 2
make: *** [all] Erreur 2 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:06:52.643

要使用 CMake 的[FindQt4 模块](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:FindQt4)，请执行以下操作：

```
find_package(Qt4 COMPONENTS QtCore QtXml REQUIRED)
include(${QT_USE_FILE})
include_directories(${KDE4_INCLUDES} ${QT_INCLUDES})
target_link_libraries(qtcmakepb ${KDE4_KDEUI_LIBS} ${QT_LIBRARIES}) 
```

如果要指定单个包含目录和库，请将上面的最后 2 行替换为：

```
include_directories(${KDE4_INCLUDES}
                    ${QT_QTCORE_INCLUDE_DIR}
                    ${QT_QTXML_INCLUDE_DIR})
target_link_libraries(qtcmakepb
                      ${KDE4_KDEUI_LIBS}
                      ${QT_QTCORE_LIBRARY}
                      ${QT_QTXML_LIBRARY}) 
```

你的问题是你没有打电话`include(${QT_USE_FILE})`，那`QT_QTCORE_LIBS`应该是`QT_QTCORE_LIBRARY`（对于 QtXml 库也是如此）。此外，您需要在调用`include_directories` *FindQt4*模块`include`并将`QT_USE_FILE`.

有关随您的 CMake 版本提供的 FindQt4 模块的完整信息，请运行：

```
cmake --help-module FindQt4 
```

**编辑**

事实证明，根本原因实际上是未定义的函数是 QtXmlPatterns 库的一部分，因此`find_package`调用应该包含`QtXmlPatterns`在列表中。

完成后，变量`${QT_QTXMLPATTERNS_INCLUDE_DIR}`和`${QT_QTXMLPATTERNS_LIBRARY}`由调用设置，`include(${QT_USE_FILE})`并且可以根据需要添加。

**如果您使用的是 QT5**

使用 Qt5，使用 CMake 变得更简单。

为了包含和链接 QtXml 和 QtXmlPatterns，你只需要这些行：

```
find_package(Qt5Xml REQUIRED)
find_package(Qt5XmlPatterns REQUIRED) 
```

并链接如下：

```
target_link_libraries(qtcmakepb Qt5::Xml Qt5::XmlPatterns) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:53:26.733

您是否启用了 QT_USE_QTXML？

尝试：`set(QT_USE_QTXML TRUE)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:38:08.647

不知道这是否有帮助，但是：

```
target_link_libraries(qtcmakepb ${QT_QTCORE_LIBS})
target_link_libraries(qtcmakepb ${QT_QTXML_LIBS}) 
```

你应该使用这个：

```
target_link_libraries(qtcmakepb ${QT_LIBRARIES}) 
```

这会将您选择的所有内容`COMPONENTS`与`find_package(Qt4)`. 警告：如果您将多个目标与不同的 Qt 组件集链接，这将不起作用。

# jquery - 使用 jQuery 拆分并加入每个以在逗号后添加空格

> ID：11102155
> 
> 赞同：3
> 
> 时间：2012-06-19T13:37:47.863
> 
> 标签：jquery, split, each

尝试获取此内容：

```
<div class="content">one,two,three</div>
<div class="content">four,five,six</div>
<div class="content">seven,eight,nine</div> 
```

和 .split 和 .join 分别使用 jQuery。

```
$('.content').each(function() {
    var mydata = $(this).text().split(',').join(", ");
    $(this).text(mydata);
}); 
```

小提琴：http: [//jsfiddle.net/ZXgx2](http://jsfiddle.net/ZXgx2)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T13:39:19.447

当然你可以使用`split`and `join`：

```
$(".content").text(function(i, val) {
    return val.split(",").join(", ");
}); 
```

但我建议改用正则表达式：

```
$(".content").text(function(i, val) {
    return val.replace(/,/g, ", ");
}); 
```

**演示：http:** [//jsfiddle.net/ZXgx2/6/](http://jsfiddle.net/ZXgx2/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:41:35.710

你的解决方案很好，你的小提琴错了：`split(', ')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:42:48.300

没有理由拆分、加入或调用`.each`。`.content`只需通过快速正则表达式修改所有元素的文本：

```
​$(".content").text(function(i,v){
    return v.replace(/,/g, ", ");
});​​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/uAHBU/](http://jsfiddle.net/jonathansampson/uAHBU/)

# javascript - 使用 .load() 函数

> ID：11102156
> 
> 赞同：1
> 
> 时间：2012-06-19T13:37:51.797
> 
> 标签：javascript, jquery

我正在寻找使用 jQuery`.load()`或`.get()`函数来替换 AJAX，我有这个：

```
var counter = 0;
timeInterval(changeStock(counter), 2000);

function changeStock(number) {
  $(document).ready(function () {
    $('#stocks').load('/stock.php?symbol=number')
    counter++;
    if (counter == <? php echo $count1; ?> ) {
      counter = 0;
    }
  } 
```

但什么都没有发生。有任何想法吗？？我`<div id="stocks">`的好像还好。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:41:23.170

您想`number`作为参数传递给`load`，而不是字符串。

```
$('#stocks').load('/stock.php?symbol=' + number); 
```

另外，我假设您想在成功回调中更新您的计数器：

```
$('#stocks').load('/stock.php?symbol=' + number, function () {
    counter++;

    if (counter == <? php echo $count1; ?> ) {
        counter = 0;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:42:35.110

您的脚本中有几行不正确：

```
timeInterval(changeStock(counter), 2000); 
```

应该是`setInterval()`

```
$('#stocks').load('/stock.php?symbol=number') 
```

应该`$('#stocks').load('/stock.php?symbol='+number)`

并`$(document).ready(function() {})`在函数内 ?!?!?!

试试这个 ：

```
$(document).ready(function () {
  var counter = 0;
  setInterval(function () {
    $('#stocks').load('/stock.php?symbol=' + counter, function () {
      counter++;
      if (counter == <? php echo $count1; ?> ) {
        counter = 0;
      }
    });
  }, 2000);
}); 
```

这将每 2000 毫秒执行一次内部函数——该函数将加载 url（将计数器作为参数传递），然后执行回调函数——它增加计数并检查它是否等于`$count1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:46:26.030

我想你的意思是`setInterval`你写的地方`timeInterval`。你可能想拥有

```
$('#stocks').load('/stock.php?symbol=' + number); 
```

这个文件也是由php解析的吗？因为`<? php echo $count1; ?>`如果它的 .js 可能不是。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T13:45:01.467

你有一个语法错误“;” 错过了：

```
 $('#stocks').load('/stock.php?symbol=number') 
```

jQuery 默认情况下不显示错误，所以似乎什么也没发生。

# c# - WPF 布尔触发器

> ID：11102164
> 
> 赞同：6
> 
> 时间：2012-06-19T13:38:06.353
> 
> 标签：c#, .net, wpf, xaml, triggers

我的 WPF 应用程序的 Window 类中有一个布尔值。如何根据此布尔值是真还是假来定位触发器？

```
<Grid>
  <Grid.Triggers>
    <Trigger ... />
  </Grid.Triggers>
</Grid> 
```

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T13:57:04.003

在 *.cs 文件中：

```
public partial class MainWindow : INotifyPropertyChanged
{
    public MainWindow()
    {
        DataContext = this;
        InitializeComponent();
    }

    public event PropertyChangedEventHandler PropertyChanged = delegate { };

    public bool Flag { get; set; }

    private void ButtonClick(object sender, RoutedEventArgs e)
    {
        Flag = true;
        OnPropertyChanged("Flag");
    }

    protected void OnPropertyChanged(string property)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

以 xaml 形式：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Width="525"
        Height="350">

    <Window.Resources>
        <Style TargetType="Grid">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Flag}" Value="True">
                    <Setter Property="Background" Value="Red" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Button Click="ButtonClick" Content="Click Me" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:56:18.947

您可以使用[DataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)。我认为您需要在样式或模板中使用它。

或者，您可以捕获后面代码中的更改。

# caching - weblogic + eclipselink + 2 个不同的线程 = 延迟加载不起作用

> ID：11102166
> 
> 赞同：0
> 
> 时间：2012-06-19T13:38:19.213
> 
> 标签：caching, weblogic, lazy-loading, eclipselink

我有两个线程，其中一个将文本字段写入数据库，另一个尝试读取此字段，但它不能。

领域有以下分析：

```
@Lob
    @Column(name = "response_soap")
    @Basic(fetch = FetchType.LAZY)
    public String getResponseSoap() {
        return responseSoap;
    } 
```

两个线程都是 Web 应用程序的一部分。两者都运行在同一个 weblogic 服务器上。所有事务都已提交。数据库中有字段。每次我创建新的实体管理器时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:05:45.240

你得到什么错误？

尝试使用刷新，em.refresh(object)

你在序列化对象吗？因为它是 LAZY，所以当你序列化它时它将为空，除非你在序列化它之前访问它。尝试使它渴望。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T04:09:37.270

我相信只有Many-to_many和One-to-many是可以设置为lazyload的

一对一、多对一和Basic都是Egar

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Lazy_Basics](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Lazy_Basics)

# wpf - WPF ProgressBar 未更新其进度状态

> ID：11102170
> 
> 赞同：0
> 
> 时间：2012-06-19T13:38:29.330
> 
> 标签：wpf, wpf-4.0

我正在使用 wpf UserControl 替换 AutoCAD 选定图形文件中的文件中的文本。wpf 控件将显示一个状态（ProgressBar），指示在任何给定时间处理的文件数。所以我提出了以下代码，但 ProgressBar 根本没有显示任何进度。这是相关代码的一部分。

XAML：

```
<ProgressBar HorizontalAlignment="Stretch" Name="pgrSearch" Minimum="0" Maximum="{Binding Path=ProgressBarMaximum}"
                 Value="{Binding Path=ProgressBarCurrent}" Height="20" Margin="10"  /> 
```

代码隐藏：

```
public partial class ReplaceUserControl : UserControl, INotifyPropertyChanged {
    public ReplaceUserControl() {
        InitializeComponent();
        this.DataContext = this;
    }
    ....

    private int _progressBarMaximum;
    public int ProgressBarMaximum {
        get { return _progressBarMaximum; }
        set { _progressBarMaximum = value; RaisePropertyChanged("ProgressBarMaximum"); }
    }

    private int _progressBarCurrent;
    private int ProgressBarCurrent {
        get { return _progressBarCurrent; }
        set { _progressBarCurrent = value; RaisePropertyChanged("ProgressBarCurrent"); }
    }

    private void ReplaceTextInFiles() { //Called from Button_Click Handler
        ....

        ProgressBarMaximum = filesList.Count - 1;

        SearchReplaceWorker replaceWorker = new SearchReplaceWorker(); //The Work Horse
        replaceWorker.FileProcessed += new FileProcessedEventHandler(worker_FileProcessed); //Raised by Work Horse when each file is processed

        BackgroundWorker workerThread = new BackgroundWorker(); //The Background Worker Thread
        workerThread.DoWork += (o, e) => {
            replaceWorker.ReplaceTextInFiles(SearchText, ReplaceText, filesList, ReportFolderPath, MatchCase, MatchSubstring);
        };
        workerThread.RunWorkerAsync(); //Start the Background Thread Async
    }

    void worker_FileProcessed(object sender, EventArgs e) {
        ProgressBarCurrent = ProgressBarCurrent + 1; //Update the ProgressBar status
    } 
```

当 ProgressBarCurrent 递增时，为什么 ProgressBar 不自行更新，如代码中所示。

**编辑：** 为了处理 UI 线程上的 ProgressBar 更新代码，我将代码更改为使用 BackgroundWorker.ReportProgress()，如下所示。

**用户控件的代码隐藏：**

```
private void ReplaceTextInFiles() { //Called from Button_Click()
    if (!Directory.Exists(SearchFolderPath)) {
        MessageBox.Show("Invalid Directory Selected for Search");
        return;
    }

    if (!Directory.Exists(ReportFolderPath)) {
        MessageBox.Show("Invalid Directory Selected for Report File");
        return;
    }

    List<string> filesList = null;
    try {
        if (LookInSubFolders) {
            filesList = Directory.GetFiles(@SearchFolderPath, "*.dwg", SearchOption.AllDirectories).ToList();
        }
        else {
            filesList = Directory.GetFiles(@SearchFolderPath, "*.dwg", SearchOption.TopDirectoryOnly).ToList();
        }
    }
    catch (Exception ex) {
        MessageBox.Show("Error Occurred getting the files list. Contact Admin");
    }

    pgrSearch.Visibility = Visibility.Visible;
    ProgressBarMaximum = filesList.Count - 1;

    SearchReplaceWorker replaceWorker = new SearchReplaceWorker(); 

    BackgroundWorker workerThread = new BackgroundWorker(); 
    workerThread.WorkerReportsProgress = true;
    workerThread.ProgressChanged += (o, e) => { //This event handler gets called correctly.
        ProgressBarCurrent++; 
    };
    workerThread.RunWorkerCompleted += new RunWorkerCompletedEventHandler(workerThread_RunWorkerCompleted);
    workerThread.DoWork += (o, e) => {
        replaceWorker.ReplaceTextInFiles(workerThread, SearchText, ReplaceText, filesList, ReportFolderPath, MatchCase, MatchSubstring);
    };
    workerThread.RunWorkerAsync(); 
} 
```

**背景工作者：**

```
public void ReplaceTextInFiles(BackgroundWorker workerThread, string searchText, string replaceText, List<string> filesList, string reportPath,
                                      bool MatchCase, bool MatchSubstring) {
    ...
    workerThread.ReportProgress(50);
} 
```

ProgressBar 仍然不会自行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:04:44.380

我用您的初始代码创建了一个测试项目。过了一会儿，我发现您已将 ProgressBarCurrent 属性声明为**private**。更改为公开后，它对我有用。所以似乎没有必要更新 UI 线程上的属性。读回更新的属性值时，看起来像是在内部进行了 Dispatcher.Invoke 调用。

# uitableview - 核心数据按格式化日期排序表格视图

> ID：11102174
> 
> 赞同：1
> 
> 时间：2012-06-19T13:38:35.867
> 
> 标签：uitableview, core-data, ios5, nsdate, nsdateformatter

我知道如何通过 NsDate 在 tableview 中对 Core Data 对象进行排序，但默认情况下这似乎为每个对象创建了一个新部分。我想用 NSDateFormatter 按中等格式的日期对它们进行排序。我该怎么做？

例如，如果我在同一天创建了 3 个对象，我希望它们位于同一节中，节标题为当天，不需要时间。

每个对象都有一个 NSDate 属性。谢谢你的帮助。

这是我在 fetchedResultsController 中的代码以及 rgeorge 的建议。我在这里想念什么？

```
- (NSFetchedResultsController *)fetchedResultsController {

if (fetchedResultsController != nil) {
    NSLog(@"get old fetched controller");

    return fetchedResultsController;
}

else{
    NSLog(@"get new fetched controller");
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"InTextEntity" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];
[fetchRequest setFetchBatchSize:20];

NSSortDescriptor *dateDescriptor = [[NSSortDescriptor alloc] initWithKey:@"dateModified" ascending:NO];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:dateDescriptor, nil];
[fetchRequest setSortDescriptors:sortDescriptors];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:@"mediumFormattedDate" cacheName:@"Root"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

NSError *error = nil;
if (![fetchedResultsController performFetch:&error]) {

    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);

}

return fetchedResultsController; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:31:36.107

（假设您使用 an`NSFetchedResultsController`来驱动您的 tableview，我会写下来。如果不是，我建议您检查一下。）

的分区功能的一个有趣特性`NSFetchedResultsController`：虽然您*排序*的属性必须是模型属性（因为 sqlite 进行实际排序），但您*对部分进行分组的*属性不必是。唯一的要求是分组与排序一致。（即，按 sort 属性排序会将具有匹配组属性的对象彼此相邻。）

因此，只需在您的建模对象类中添加类似这样的内容：

```
// in interface
@property (nonatomic, readonly) NSString *mediumFormattedDate;

// in impl
-(NSString *)mediumFormattedDate
{
  // this can be fancier if you need a custom format or particular timezone: 
  return [NSDateFormatter localizedStringFromDate:self.date
                                        dateStyle:NSDateFormatterMediumStyle
                                        timeStyle:NSDateFormatterNoStyle];
} 
```

（根本不需要在 .xcdatamodel 中提及 mediumFormattedDate。）

然后继续按日期属性对对象进行排序，但按新属性对它们进行分组。当您创建您的`NSFetchedResultsController`时，请按照以下方式进行操作：

```
NSFetchRequest *fr = [NSFetchRequest fetchRequestWithEntityName:@"MyFancyEntity"];
NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"date"
                                                     ascending:YES];
[fr setSortDescriptors:[NSArray arrayWithObject:sd]];
NSFetchedResultsController *frc =
[[NSFetchedResultsController alloc] initWithFetchRequest:fr
                                    managedObjectContext:myManagedObjectContext
                                      sectionNameKeyPath:@"mediumFormattedDate"
                                               cacheName:nil];
// then do stuff with frc 
```

仅此而已！我已经在一些应用程序中完成了此操作以获取日期分组，并且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:26:34.157

听起来您正在将获取的结果控制器上的部分索引设置为您的日期属性，这似乎是不可取的。

相反，您可能应该自己计算部分索引，并按日期排序。您可以在数据模型中或通过在代码中手动计算部分来完成此操作。

例如，您可以向托管对象模型添加一个名为“Day”的属性，并将其设置为您想要使用的任何值（您无需指定它是像星期一还是像 21 这样的实际日期）。

然后，您可以将该属性传递给 fetched results 控制器。

或者，您可以自己实施这些部分，日子很容易，周一至周日。日期有点难，1-28,30,31 取决于月份。然后使用适当的 NSPredicate / NSFetchRequest 来获取每个部分中项目的计数。

# hadoop - 安装 hadoop 2.0.0

> ID：11102178
> 
> 赞同：2
> 
> 时间：2012-06-19T13:38:37.413
> 
> 标签：hadoop

我是 Hadoop 的新手，我坚持在 mac 中安装 hadoop-2.0.0-alpha。在这个版本中没有找到“conf”文件夹，但谷歌的大部分安装说明都指向 conf。谁能指出我最近的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T19:57:49.463

我今天也尝试了同样的方法，但最终得到了坚持使用 1.0.3 的好建议，因为 2.0.0 处于 alpha 阶段。我找到了非常好的 Mac OS X Lion 1.0.3 说明，这让我很快就启动并运行了。

[http://www.jdxyw.com/?p=2030](http://www.jdxyw.com/?p=2030)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T06:22:49.397

hadooop 2.0.0 中的配置文件位于 hadoop/etc/hadoop 文件夹中，下面给出了安装链接。请看一看。

[http://raseshmori.wordpress.com/2012/09/23/install-hadoop-2-0-1-yarn-nextgen/](http://raseshmori.wordpress.com/2012/09/23/install-hadoop-2-0-1-yarn-nextgen/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T08:20:56.497

您可以自己创建它，只需执行即可。

# spring-roo - 向多个实体或存储库公开服务接口

> ID：11102181
> 
> 赞同：1
> 
> 时间：2012-06-19T13:38:44.777
> 
> 标签：spring-roo

我已经运行了以下 ROO 命令以将服务接口公开给实体类，一对一映射。

```
service --entity ~.model.Course --interface ~.service.CourseService 
```

问题：我希望将一个服务接口暴露给多个实体（或 jpa），例如 CourseService 暴露给实体 model.Course 和 model.Student

1.  对于多个实体，ROO 命令应该是什么样的？

2.  另外，我可以运行什么 ROO 命令来将上述服务公开给存储库类（jpa）而不是实体类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T09:01:33.777

据我所知，这是无法通过命令行实现的，但以下方法有效。

考虑你想用 ~.model.Course 和 ~.model.Student 创建一个服务

1.  使用命令行创建与单个域实体关联的服务。

    `service --entity ~.model.Course --interface ~.service.CourseService`

2.  打开 CourseService 接口，在 @RooService 注解中添加 Student.class。代码应该是

    ```
    @RooService(domainTypes = { Course.class, Student.class })

    public interface CourseService {

      ..........

      ..........

    } 
    ```

Spring roo 会自动将与 Student 类相关的所需方法添加到 CourseService 本身中。

# asp.net - 对象数据源更新问题

> ID：11102186
> 
> 赞同：0
> 
> 时间：2012-06-19T13:39:13.027
> 
> 标签：asp.net, entity-framework, objectdatasource

大家好，我正在使用 objectdatasource 创建更新功能。实际上它工作正常，直到我没有更改 UpdateMethod 的参数。我有两个参数，但它需要三个参数。给我以下错误。

```
 ObjectDataSource 'ODSConfig' could not find a non-generic method 'UpdatePagedDataSet' that has parameters: CONFIG_VALUE, configKey, configValue. 
```

C#代码：

```
protected void ODSConfig_Updating(object sender, ObjectDataSourceMethodEventArgs e)
  {
    TextBox val = (TextBox)GVConfig.Rows[GVConfig.EditIndex].Cells[2].Controls[0];
    Parameter objKeyConfig = new Parameter("configKey", DbType.String, GVConfig.Rows[GVConfig.EditIndex].Cells[1].Text);
    Parameter objKeyValueConfig = new Parameter("configValue", DbType.String, val.Text);
    e.InputParameters["configKey"] = objKeyConfig.DefaultValue;
    e.InputParameters["configValue"] = objKeyValueConfig.DefaultValue;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:55:13.857

添加参数后只需添加`ODSConfig.Update()`;

在此之后，您的代码将如下所示：

```
protected void ODSConfig_Updating(object sender, ObjectDataSourceMethodEventArgs e)
  {
    TextBox val = (TextBox)GVConfig.Rows[GVConfig.EditIndex].Cells[2].Controls[0];
    Parameter objKeyConfig = new Parameter("configKey", DbType.String, GVConfig.Rows[GVConfig.EditIndex].Cells[1].Text);
    Parameter objKeyValueConfig = new Parameter("configValue", DbType.String, val.Text);
    e.InputParameters["configKey"] = objKeyConfig.DefaultValue;
    e.InputParameters["configValue"] = objKeyValueConfig.DefaultValue;
ODSConfig.Update();
  } 
```

谢谢

# javascript - 如何在 JSP 和/或 Javascript 中更新用户的评分

> ID：11102189
> 
> 赞同：2
> 
> 时间：2012-06-19T13:39:17.573
> 
> 标签：javascript, jsp, jakarta-ee, spring-mvc, radio-button

我对这两种技术都不是很熟悉，所以请耐心等待。我的 jsp 页面上有一组单选按钮。它们的价值为 1-5。我想将该新评级更新到数据库中。我知道我必须以某种方式利用“onselect”事件，但我没有找到任何有帮助的东西。有谁知道如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:52:39.520

假设它不是一种形式：

1.  在javascript中检测变化
2.  将其发布到您的服务器端脚本
3.  也许处理它并更新数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:59:46.293

您最好的选择是使用`onchange`并将其设置为将读取`select`标签的函数。该函数应如下所示。

```
function ratingChange(ele){
   var opt = sel.options[sel.selectedIndex].value;  
   var txt = sel.options[sel.selectedIndex].text; 
   //process values and test
   //assuming the form is not submitting use AJAX
} 
```

然后`onchange`看起来像这样。

`<select name="rating" onchange="ratingChange(this)">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:20:04.003

由于您在标签中包含了 spring-mvc，我假设您想要更多关于从客户端发送信息到服务器的信息。

如果您只是使用 JSP 和标准表单，如果您在 spring 中将“commandName”和“方法”与控制器匹配，控制器将捕获通过表单发送的参数：

```
<form id="form" commandName="interceptedPath" method="post">
    <input id="rating1" type="radio" name="rating" value="1" checked><label for="rating1">1</label>
    <input id="rating2" type="radio" name="rating" value="2"><label for="rating2">2</label>
    <input id="rating3" type="radio" name="rating" value="3"><label for="rating3">3</label>
    <input id="rating4" type="radio" name="rating" value="4"><label for="rating4">4</label>
    <input id="rating5" type="radio" name="rating" value="5"><label for="rating5">5</label>
</form> 
```

```
 @RequestMapping(value = "/interceptedPath/", method = RequestMethod.POST)
 public String submit(Model model, HttpServletRequest request) {
     Map<String, String[]> parameterMap = request.getParameterMap();
     String[] strings = parameterMap.get("rating")
     return "detailedCalc";
 } 
```

除非您在做一些动态的事情，比如 Ajax 调用，否则不需要 JavaScript。如果您决定使用 Javascript，我建议您使用[jQuery](http://jquery.com/ "jQuery")库：

```
$(document).ready(function () {
    $("form").submit(function () {
        $.post('/spring/locationOfAjaxController', $(this).serialize(),
            function (data) {
        }
    }
} 
```

对于上面的代码，在文档加载到客户端之后。创建一个事件，该事件将捕获“表单”对象上的所有“提交”操作（注意表单的 id 是“表单”）。一旦发生这种情况，jQuery 将向指定的 URL 提交一个 POST。`$(this).serialize()`将表单数据序列化为 JSON，这将需要由服务器处理。

**如果您想使用change**做某事，请参阅[此参考](http://api.jquery.com/change/)。

您可以使用 maven 原型找到一个很好的 spring-mvc（没有 js）示例：`org.fluttercode.knappsack:spring-mvc-jpa-demo-archetype`。它将生成一个已经设置好 spring-mvc 并准备就绪的基本项目。

# c# - 将字母类型转换为 int 时，C# 会做什么？

> ID：11102194
> 
> 赞同：1
> 
> 时间：2012-06-19T13:39:24.137
> 
> 标签：c#, php, casting

我们必须为外部接口实现加密。接口的所有者提供了有关如何在我们这边执行相同加密的文档。但是，此文档使用 C# 编写，而我们使用 PHP。

我们理解的大部分部分，除了它们似乎将哈希类型转换为 int 的地方。他们的代码如下：

```
// hashString exists and is a md5 a like string
int[] keyBuffer = new int[hashString.length];
for (int i=0; i<hashString.length; i++) {
    keyBuffer[i] = (int)hashString[i];
} 
```

在 PHP 中，当将一个字母转换为 int 时，会得到 0（int）。由于我们无法想象这就是第三方的意思，我们相信 C# 做了其他事情。

**C# 是否也转换为 int 0，或者可能转换为 char？**

其次，原始的 hashString 是 320 长。这意味着代码将创建一个 320 长的 int？在 PHP 中，您没有像 C# 那样保留内存的想法。但是当我们尝试将一个 320 长的字符串类型转换为一个 int 时，我们得到一个长度为 19 个“字符”的 int。

**在字符串中键入一个非常长的“数字”时，C# 是否也会创建一个较短的 int？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T13:41:34.573

您正在将 a 转换`char`为`int`. A`char`是一个 UTF-16 代码单元 - 一个无符号的 16 位整数（范围是`[0, 65535]`）。你得到的值，基本上，扩大到一个 32 位有符号整数。`'A'`例如，以 65 结尾，欧元符号 (U+20AC) 以 8364 (0x20ac) 结尾。

至于您的第二部分-您正在创建一个`int`，您正在创建一个`int` *数组*。是的，您将创建一个包含 320 个元素的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:42:02.807

C# 字符串是 UTF16。当您将 UTF16 字符转换为 int 时，它只是将 16 位 UTF16 字符值复制到 32 位 int 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:47:00.980

C# 可以将字符转换为 int 并为您提供字符代码。上面的代码将字符串 ,`hashString`转换为整数数组`keybuffer`. `[]`C# 能够使用索引器语法将字符串视为字符数组。上面的代码将产生一个整数数组，哈希字符串中每个字符一个，每个整数都是对应字符的字符代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:47:09.917

为了扩展 Jon Skeet 的帖子，您的“十进制”**整**数值将映射到对应的**char**值，如下图所示（我在开发 PC 上使用了多年）。

因此，将`integer`值 0 转换为 a`char`将返回 a `NULL`。

![ASCII 表](../Images/c54def74ff5a03d1f9b4b6079ee086b1.png)

**编辑：**查看您的原始问题，您可能会更好地查看[MD5 示例](http://blogs.msdn.com/b/csharpfaq/archive/2006/10/09/how-do-i-calculate-a-md5-hash-from-a-string_3f00_.aspx)，而不是将字符串转换为整数数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T13:48:44.347

代码实际上将`char`（通常是 ASCII）转换为`int`0，而不是 '0'。因此，如果原始字符串是“d131dd02c5e6eec4”，则结果数组将为 int[]{100, 49, 51, 49, 100, 100, 48、50、99、53、101、54、101、101、99、52}。

所以我想你需要`ord`PHP 脚本中的函数。

**编辑：**

稍微说明一下，在 PHP 中将 a`string`转换为`int`实际上可能会将其转换为`int`，并且最大的`int`PHP 句柄是 32 位或 64 位，具体取决于操作系统，这就是为什么你会得到一个 19 字符长的 int，这是最大值64 位整数。

在 C# 中，还有另一种变量类型叫做`char`，它表示一个 unicode 字符，并且可以直接转换为整数。您不能将`string`C# 中的 a`int`直接转换为 C# 中的 a。

**EDIT2：** 我想你的 PHP 脚本看起来像这样：

```
<?php
$keyBuffer = new array();
for ($i=0; $i<strlen($hashString); $i++) {
    $keyBuffer[$i] = ord($hashString[i]);
}
?> 
```

# iphone - iPhone 关闭蓝牙 GKPeerPickerController

> ID：11102216
> 
> 赞同：9
> 
> 时间：2012-06-19T13:40:31.437
> 
> 标签：iphone, ipad, bluetooth, gkpeerpickercontroller

我同意这个问题是重复的。请多多包涵。我也和你们一样相信以编程方式打开/关闭蓝牙是不可能的。

但是`GKPeerPickerController`如果蓝牙未打开，用户将被提示打开它。足够公平，可以打开蓝牙。

我打赌我相信我们不能以编程方式关闭蓝牙，因为没有办法。但是[这个应用程序](http://itunes.apple.com/us/app/bluetooth/id532403238?mt=8)这样做了，所以我没有选择拒绝。

我只是想确认它是否可能，如果是，如何使用`GKPeerPickerController`或任何其他公共 api 方式关闭蓝牙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:49:57.783

我知道这不是您想要的答案，但是**不**，您不能使用 Apple 批准的 API 以编程方式关闭蓝牙。

[今年在 App Store 上批准](http://appadvice.com/appnn/2012/05/another-direct-bluetooth-control-app-has-been-approved-in-the-form-of-bluetooth-manager)了许多应用程序已经做到了这一点。

但是，一旦他们（Apple）意识到发生了什么，他们就会在发布后不久被Apple删除。他们肯定在使用私有 API。

要么开发者愚蠢地认为他们不会被注意到，要么他们只是希望在苹果下架应用程序之前获得几周的收入，这可能足以偿还他们的成本，并获得一些利润。

问题是有多种方法可以检查应用程序是否使用私有 API。如果开发人员以正常方式使用 Objective-C 框架，这很容易检查。事实上，当您使用 Xcode 将应用程序二进制文件上传到 iTunes Connect 时， [Xcode 会自动执行其中的一些操作。](https://stackoverflow.com/a/10661383/119114)但是，这不是一个完整的检查。到了 Apple 之后，审阅者又进行了一次检查，我可以推断出这比 Xcode 所做的更复杂。

但是，该检查仍然不完美，我*认为*这不一定是懒惰的审阅者忘记执行检查的问题。Objective-C 为您提供了一些[混淆](http://en.wikipedia.org/wiki/Obfuscation_(software))方法调用的技术。根据您使用这些技术的方式，您*可能*会通过审阅者。以我的经验，我有充分的理由（眨眼，眨眼）相信 Apple 并没有在完​​全仪器化的 iOS 版本上运行每个应用程序，它可以记录**所有**函数调用，甚至挫败通过混淆隐藏私有 API 使用的最佳尝试技巧。

因此，我几乎可以向您保证，这解释了您在 App Store 上找到的关闭蓝牙的应用程序。公共 GameKit API 可让您打开蓝牙，但不能关闭。

免责声明：我从未为 Apple 工作过，也没有 Apple 内部人员向我提供信息。但是，我通过审查过程获得了私有 API。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-29T13:16:22.563

请尝试以下代码，我认为它也适合您。

```
Class BluetoothManagerClass = objc_getClass( "BluetoothManager" );
    BluetoothManager *btCont; = [BluetoothManagerClass sharedInstance];

 [btCont setPowered:NO]; 
```

您需要在项目中添加 BluetoothManager 类/框架。

谢谢

# mercurial - 结帐本地，我应该使用哪个路径

> ID：11102225
> 
> 赞同：2
> 
> 时间：2012-06-19T13:40:59.750
> 
> 标签：mercurial, continuous-integration, windows-server-2008, bamboo

我有一个 Http 无法访问的 mercurial 存储库。在我的 repo 托管在同一地点之前，我无法弄清楚我应该如何在我的持续集成工具（bamboo）中配置路径，我必须访问它 bij http（这很容易）

文档指出路径应采用以下格式：

```
file://local/filesystem/path[#revision] 
```

我的回购在`d:\Repository\myproject`。我试过像`file://local/D:/Repository/myproject`,和`file://D:/Repository/myproject`,但我得到了错误`file://D:/Repository/myproject#default``"file://local/D/project/myproject"`

```
abort: file:// URLs can only refer to localhost stdout: 
```

我的路径应该如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:47:49.607

我在 Windows 上想通了，你应该使用以下格式：

```
"file://localhost/C:/path/to/my svn repo" 
```

# html - 使用镀铬框架时遇到问题

> ID：11102231
> 
> 赞同：1
> 
> 时间：2012-06-19T13:41:10.647
> 
> 标签：html, google-chrome, google-chrome-frame

我通过将其放置在我的页面正文中来检测用户是否有 chrome 框架：

```
<script type="text/javascript"
src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"> </script>

<div id="placeholder"></div>

<script>
 CFInstall.check({
    node: "placeholder",
destination: "http://www.waikiki.com"
  });
</script> 
```

在我的样板页面的标题中，我有：

```
 <meta http-equiv="X-UA-Compatible" content="chrome=1"> 
```

我设法让网站提示我安装 chrome 框架，我这样做了，但页面仍然呈现 IE 错误，有什么想法吗？

使用 IE7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T02:33:49.320

您可以通过右键单击页面来判断页面是否使用 chrome 框架。如果上下文菜单列出“关于 Chrome 框架..”，则它通过 chrome 框架插件呈现页面。

此外，您还需要在加载正文后调用 CFInstall.check。

# apache-flex - 在数据网格的不同列中显示对象的不同属性

> ID：11102232
> 
> 赞同：0
> 
> 时间：2012-06-19T13:41:11.000
> 
> 标签：apache-flex, object, datagrid

谁能告诉我如何在 flex 的 datagrid 的不同列中显示对象的不同属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:19:08.500

您是否尝试过阅读 flex DataGrid 的基本帮助页面？

[http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_6.html](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_6.html)

这是来自实时文档的示例：

```
<?xml version="1.0"?>
<!-- dpcontrols/DataGridVisibleColumn.mxml -->
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" >
   <mx:DataGrid id="myDG" width="350"> 
      <mx:dataProvider>
         <mx:ArrayCollection>
            <mx:source>
               <mx:Object Artist="Pavement" Price="11.99" 
                  Album="Slanted and Enchanted" />
               <mx:Object Artist="Pavement" 
                  Album="Brighten the Corners" Price="11.99" />
            </mx:source>
         </mx:ArrayCollection>
      </mx:dataProvider>
      <mx:columns>
         <mx:DataGridColumn dataField="Artist" />
         <mx:DataGridColumn dataField="Album" />
         <mx:DataGridColumn id="price" dataField="Price" visible="false"/>
      </mx:columns>
   </mx:DataGrid>

   <!-- The column id property specifies the column to show.-->
   <mx:Button label="Toggle Price Column" 
      click="price.visible = !price.visible;" />
</mx:Application> 
```

# java - proguard 不适配 jar 文件中的资源

> ID：11102236
> 
> 赞同：5
> 
> 时间：2012-06-19T13:41:14.470
> 
> 标签：java, jar, obfuscation, proguard

我像这样使用proguard：

```
<proguard configuration="${proguard.config}" ignorewarnings="true">
        <libraryjar dir="${build.lib}" filter="!some**.jar"/>
        <injar file="${build.dir.result}/some.jar"/>
        <injar>
            <fileset refid="another.jars"/>
        </injar>
        <outjar file="${build.dir.result}/some_obf.jar"/>
        <keep name="${entrypoint.class}">
            <method name="main"/>
        </keep>
 </proguard> 
```

在配置中我也有选项（还有更多-keep）：

```
-adaptresourcefilenames    **.properties
-adaptresourcefilecontents 
```

在 jars 中，我编译了类和 spring xml 配置。位于 META-INF/spring/ 中的配置。所有类名都被正常混淆（检查），来自 xml 的所有类都被混淆并具有新名称。我想用混淆的类替换spring xml中的完全限定类名。这就是我添加adapterresourcefilecontents 参数的原因，但xml 没有改变。怎么了？

# asp.net-mvc-3 - 在局部视图中：“传入字典的模型项是类型”

> ID：11102239
> 
> 赞同：2
> 
> 时间：2012-06-19T13:41:24.590
> 
> 标签：asp.net-mvc-3

尽管我进行了所有搜索，但我对一些基本的 MVC 概念缺乏理解。

我在 Visual Studio 中创建了一个 MVC 项目，其中包含部分视图 _LogOnPartial.shtml。我只想访问与用户有关的视图中的信息，以放入用户下拉菜单。当我尝试将其放在部分视图 cshtml 页面的顶部时，出现上述错误：

```
@model MyProject_MVC.Models.UserRepository 
```

当我尝试这个时，我也得到一个错误：

```
@Html.Partial("_LogOnPartial", MyProject_MVC.Models.UserRepository) 
```

“MyProject_MVC.Models.UserRepository”是一个“类型”，在给定的上下文中无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:46:29.780

`@model _LogOnPartial.Models.UserRepository`应该是：`@model MyProject_MVC.Models.UserRepository`

对于最后一部分，您必须提供类型 UserRepository 的实例作为第二个参数，而不是类型本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T13:47:47.640

`MyProject_MVC.Models.UserRepository`您必须为局部视图提供一个实例。`_LogOnPartial`是该类型的强类型。它允许您在编译时访问其公共成员并决定如何在视图中显示它。

如果你想在那个视图中使用你自己的类型，首先你必须改变它的强类型。

```
@model MyProject_MVC.Models.UserRepository 
```

然后您必须在您的操作方法中创建该类型的实例并将其作为模型或模型的属性传递给视图。

```
public ActionResult LogOn()
{
    return View(new UserRepository());
} 
```

现在，您可以在视图中将此实例作为模型对象访问。

```
@Html.Partial("_LogOnPartial", Model); 
```

# c# - 使用 DirectShow.net 从 .mov 文件中抓取帧

> ID：11102241
> 
> 赞同：1
> 
> 时间：2012-06-19T13:41:30.040
> 
> 标签：c#, .net, directshow.net

如何使用 DirectShow.net 从 c#.net 中的 .mov 文件中抓取帧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T16:00:14.117

DirectShow 和 DirectShow.NET 对文件没有任何特殊要求`.MOV`。您通常使用您管理的 Sample Grabber 过滤器创建过滤器图，它的回调为您提供通过的视频流帧。

您可能想查看 DirectShow.NET 中的 DxScan 示例，\Samples\Editing\DxScan。它从给定的电影文件中抓取帧。

> 扫描媒体文件以查找黑框的示例应用程序
> 
> 大部分工作是在 ISampleGrabberCB.BufferCB 中完成的。见那里的评论。此外，用于扫描黑帧的算法也没有达到应有的效率。但是，这些示例让您了解如何做到这一点。

# java - Java剪贴板调用粘贴操作

> ID：11102245
> 
> 赞同：1
> 
> 时间：2012-06-19T13:41:36.990
> 
> 标签：java, clipboard, paste

我想用我的 java 应用程序调用粘贴操作。不使用机器人这可能吗？

例如，应用程序会经常调用粘贴操作，所以当我在记事本中书写时，我会看到剪贴板的内容。

```
JAVA APP                       Notepad
clipboard.paste()  -------->   clipboardContents 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:45:00.330

听起来好像您正在尝试使用 Java 交互或部分驱动另一个应用程序（例如 Windows NotePad）并粘贴到该应用程序，如果是这样，有几种可能的解决方案，一个是使用 Robot，另一个是使用 Java 进行操作系统调用，尽管这不能直接使用核心 Java 完成，并且需要使用 JNI、JNA 或其他特定于平台的非核心实用程序，例如 AutoIt（如果这是用于 Windows）。

为什么你死心塌地不使用机器人？你能更详细地解释你的需求吗？

**编辑**
关于您的评论：

> 我想探索机器人的替代品，因为我的客户不合理地拒绝机器人。

由于这似乎适用于 Windows 平台，因此您可能会考虑探索 Windows API 和您尝试驱动的任何非 Java 程序的 API（如果存在），然后使用 JNA 与之交互。Windows User32.dll 将允许您获取您尝试驱动的应用程序的窗口句柄 (hWnd)，这可能是此工作所必需的。

但是，如果没有您提供有关您的问题的更具体信息，很难给出更具体的建议。

**编辑 2**
关于您的评论：

> 我希望该应用程序独立于平台。

那么，机器人就会浮现在脑海中。您可能想与您的客户坐下来，了解他们非常不喜欢 Robot 的哪些方面，然后温和地解释说它可能是实现独立于平台的解决方案的最佳途径。

> 是否有 JNA 和/或 JNI 的示例？我也不熟悉。

是的，在这个网站和其他网站上有很多例子，谷歌会帮助你找到更多。JNA 使用起来更容易一些，因为它不需要您创建 C 桥接程序，但它可能比 JNI 慢一点，并且不能直接使用 C++ 代码（据我所知）。

**编辑 3** 关于您的评论：

> 我有一个串行端口侦听器（java 应用程序）。我需要将其内容提供到网络浏览器上。剪贴板似乎是一种方法。

这就是为什么提供问题的上下文而不是您认为的代码解决方案应该是什么对您来说如此重要的原因。

在应用程序之间进行通信并不是一件容易的事，而且 Java 通常不是最好的工具，因为它被设计为尽可能与平台无关，它不提供允许与低级 OS 功能轻松集成的工具. 我不知道解决您的问题的最佳方法，但我的直觉告诉我，使用剪贴板可能不是要走的路。很大程度上可能取决于您正在谈论的网络浏览器，它是否具有某种允许与其他程序交互的 API，我对此知之甚少。还有你的程序在哪里？在用户的计算机上？您是否考虑过使用某种类型的 Java Web 浏览器库，创建自己的专用 Web 浏览器程序，并直接从您的串行端口侦听器获取数据（同样，我自己没有这样做，

> 我不明白桥接到 C 程序对我有什么帮助。

我不是在建议这个。仅当您使用 JNI 时才需要这样做，我避免这样做，因为 JNA 更容易（至少对我而言）。

# c# - 基于数据库值的更改控制

> ID：11102246
> 
> 赞同：3
> 
> 时间：2012-06-19T13:41:37.100
> 
> 标签：c#, asp.net

**问题：**

我在数据库表中有一个值。该值可以包含一个数字，也可以为空。如果它为空，我想显示一组控件。如果它不为空，我想展示另一组控件。

* * *

**以前的尝试：**

我尝试根据数据库的值在后面的代码中创建控件。这行得通。但是，在回发时，我得到一个空引用异常。回发时控件不存在，因为页面是无状态的。我正在`page_load`处理程序中构建控件（取决于表列的值）。由于我正在创建控件，`page_load`它们不应该存在于回发中吗？

我还尝试在按钮的事件处理程序中重新创建控件。我得到一个“已经有一个具有此 id 的控件”异常（可能是因为我已经在`page_load`方法中创建了它）。

我阅读了一些关于如何在会话中存储控件的帖子。这似乎比应该做的工作更多。

**问题：**

1.  我会以错误的方式解决这个问题吗？这看起来应该很简单，但现在变得一团糟。
2.  如果这是正确的方法，我在哪里添加会话信息？我一直在阅读其他帖子，我有点迷路了

**代码：**

```
 int bookId;
    string empName;

    protected void Page_Load(object sender, EventArgs e)
    {
        if(int.TryParse(Request.QueryString["id"], out bookId))
        {
            //This is where the value in the database comes into play. If its null Book.GetCopyOwner
            // returns a string with length 0

            empName = Book.GetCopyOwner(bookId, Request.QueryString["owner"]);
            if (empName.Trim().Length > 0)
            {
                CreateReturnControls();
            }
            else
            {
                CreateCheckoutControls();
            }
        }
    }

    protected void ReturnButton_Click(object sender, EventArgs e)
    {
    }

    protected void CheckOut_Click(object sender, EventArgs e)
    {
        int bookId;
        if (int.TryParse(Request.QueryString["id"], out bookId))
        {
            TextBox userId = (TextBox)this.Page.FindControl("UserId");

            //WHEN I TRY TO USE THE TEXTBOX userId HERE, I GET NULL REFERENCE EXCEPTION

            BookCopyStatusNode.Controls.Clear();
            CreateReturnControls();
        }
    }

    protected void CopyUpdate_Click(object sender, EventArgs e)
    {
    }

    private void CreateCheckoutControls()
    {
        TextBox userId = new TextBox();
        //userId.Text = "Enter Employee Number";
        //userId.Attributes.Add("onclick", "this.value=''; this.onclick=null");
        userId.ID = "UserId";

        Button checkOut = new Button();
        checkOut.Text = "Check Out";
        checkOut.Click += new EventHandler(CheckOut_Click);

        TableCell firstCell = new TableCell();
        firstCell.Controls.Add(userId);

        TableCell secondCell = new TableCell();
        secondCell.Controls.Add(checkOut);

        BookCopyStatusNode.Controls.Add(firstCell);
        BookCopyStatusNode.Controls.Add(secondCell);
    }

    private void CreateReturnControls()
    {
        Label userMessage = new Label();
        userMessage.Text = empName + " has this book checked out.";

        Button returnButton = new Button();
        returnButton.Text = "Return it";
        returnButton.Click += new EventHandler(ReturnButton_Click);

        TableCell firstCell = new TableCell();
        firstCell.Controls.Add(userMessage);

        TableCell secondCell = new TableCell();
        secondCell.Controls.Add(returnButton);

        BookCopyStatusNode.Controls.Add(firstCell);
        BookCopyStatusNode.Controls.Add(secondCell);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:49:14.393

看起来您正在根据数据库值创建一组静态控件。为什么不简单地拥有 2 个[Panel](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.aspx)包含您想要的控件并简单地将它们设置`visibility`为 true 或 false：

```
if (!Page.IsPostBack)
{
    if (int.TryParse(Request.QueryString["id"], out bookId))
    {
        empName = Book.GetCopyOwner(bookId, Request.QueryString["owner"]);
        var display = (empName.Trim().Length > 0);

        panelReturnControls.Visible = display;
        panelCheckoutControls.Visible = !display;
    }
} 
```

# c# - 即使指定了值，TryUpdateModel 在插入时也将属性设置为 null，使用 MVC4 和实体框架

> ID：11102248
> 
> 赞同：1
> 
> 时间：2012-06-19T13:41:41.007
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-4.1, asp.net-mvc-4

我希望这是一件容易的事。

将 MVC4 与 Entity Framework 4.1 一起使用。

我正在尝试使用从具有自定义视图模型属性的视图传递的某些属性来更新模型。

我有这堂课。

```
public class SitePage
{
    public System.Guid PageID { get; set; }
    public int PageTypeID { get; set; }
    public string PageTitle { get; set; }
    public Nullable<int> RegionId { get; set; }
    public Nullable<int> LockLevelId { get; set; }
    public System.DateTime UpdatedDate { get; set; }
    public System.Guid UpdatedById { get; set; }
    public System.Guid CreatedById { get; set; }
    public System.DateTime CreatedDate { get; set; }
    public string Url { get; set; }
    public int PageStateId { get; set; }
    public string SummaryImage { get; set; } 
```

}

我的控制器

```
public ActionResult Update(AddPageViewModel model)
{
 if (ModelState.IsValid)
{
  var g = new Guid(model.PageId);
  SitePage UpdatePage = dbSite.SitePages.FirstOrDefault(m => m.PageID == g);

           //This is a page update. Not updating all properties
            UpdatePage.PageTitle = model.PageTitle;
            UpdatePage.GetFirstSection.PageSectionText.PageText = model.PageText;
            UpdatePage.PageTypeID = (int)SitePageType.PageTypes.CommunityPage;
            UpdatePage.RegionId = model.Region
            UpdatePage.CreatedById = userId;
            UpdatePage.CreatedDate = DateTime.UtcNow;
            UpdatePage.UpdatedById = userId;
            UpdatePage.UpdatedDate = DateTime.UtcNow;

 TryUpdateModel(UpdatePage);
 dbSite.Save();

 return RedirectToAction("Community_test", "Community", new { id = UpdatePage.Url });

}
else
{
     return RedirectToAction("Community_test", "Community");
}
} 
```

将此页面视图模型传递给控制器

```
public class AddPageViewModel
{
   public string PageTitle { get; set; }
   public string PageText { get; set; }
   public int Region { get; set; }
   public string TagString { get; set; }
   public string ParentPageId { get; set; }
   public string PageId { get; set; }
} 
```

如果我调试我可以看到 SitePage 实例 UpdatePage 在调用 TryUpdateModel 时具有所有正确的值。但是，除了 RegionId 之外的所有值都在数据库中正确更新。RegionId 被设置为空。如果我在服务器上运行跟踪，则 sql 实体框架生成的确实将 RegionId 设置为 null，即使我的模型具有值。这个问题是间歇性的！有时它可以工作，有时它不会。四分之一的人会正确更新，我看不出我哪里出错了。我对这些东西真的很陌生。

我们的类是从数据库生成的，我们使用的是 edmx 文件。我不确定我是否可以对这些类进行任何更改，而不会在下次我们从数据库更新模型时被覆盖。

需要任何想法或更多信息，请给我留言。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:44:25.670

TryUpdateModel 从表单中获取值并填充给定的模型。这意味着`UpdatePage`不需要设置任何值。

```
if (ModelState.IsValid)
{
    var updatePage = dbSite.SitePages.FirstOrDefault(m => m.PageID == model.PageId);

    TryUpdateModel(updatePage);
    dbSite.Save();

    //...
} 
```

最好还指定应更新的属性。

```
TryUpdateModel(updatePage, new string[] { "PageTitle", "RegionId", etc.. }); 
```

关于 RegionId 设置为 Null。

> 如果我调试我可以看到 SitePage 实例 UpdatePage 在调用 TryUpdateModel 时具有所有正确的值。

*之前* `TryUpdateModel`或之后？

# locking - SVN：如何锁定文件以使任何人都无法修改它？

> ID：11102250
> 
> 赞同：2
> 
> 时间：2012-06-19T13:41:41.513
> 
> 标签：locking, tortoisesvn

我们正在为一个项目使用 TortoiseSVN。此项目中的一个文件具有特殊状态。本地可以修改，但SVN版本不能修改。

所以，我已经锁定了这个文件，所以除了我之外，没有人可以修改这个文件。现在我正在寻找一种方法，即使我也无法修改此文件。你知道这是否可能以及如何？

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:48:27.220

添加一个服务器端 pre-commit 钩子，拒绝接触该文件的提交。

见[http://wordaligned.org/articles/a-subversion-pre-commit-hook](http://wordaligned.org/articles/a-subversion-pre-commit-hook)

有一个示例函数列出了所有受影响的文件。要使脚本拒绝提交，请将“您无法修改 THENAMEOFTHEFILE”写入 STDERR 并以错误代码退出。例如`sys.stderr.write("ProjectThingyFile.txt is read-only.\n"); sys.exit(1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:52:55.020

它是否需要成为 SVN 存储库的一部分，因为您可以**忽略**它，这样它就不会被提交，并且可以在每个用户机器上保持唯一。

找到文件右键单击它转到tortoiseSVN菜单Unversion并添加到忽略列表或添加到忽略列表

此过程将停止任何用户对该文件的任何更改

[关于这个的乌龟 SVN 文档](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)

希望这可以帮助

杰森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-04T14:32:19.407

您可以创建一个没有人登录的虚拟用户，并让该用户而不是您自己锁定文件。

# java - 运行 jQuery getJSON 时出现 Ajax 错误

> ID：11102255
> 
> 赞同：0
> 
> 时间：2012-06-19T13:41:47.893
> 
> 标签：java, javascript, jquery, json, jsp

我在 jQuery 中运行这个 getJSON 异步调用，以将数据取回然后从我的 Java 代码中取出。无论出于何种原因，我不断收到错误：

```
"Ajax Error: Error invoking generateSearchQuery([object Object])" 
```

我已经调试了 jQuery 和 Java 代码。Java 代码接收 JSON 数据，对其进行处理，然后毫无问题地将其写回。jQuery 代码在进入内部 getJson 方法并尝试时会触发错误`if(json.successful)`。

回应是：`{"error":{"message":"","title":"Error Generating Search Query"},"data":[Ljava.lang.String;@1e40c9f,"successful":"successful"}`

我已经在这个异步调用上工作了几天，但仍然无法让它工作。有任何想法吗？

jQuery函数：

```
generate : function(){

    getJson(
        Search.guid,
        "generateSearchQuery",
        {
            "data": [
                "val0",
                "val1",
                "val2",
                "val3",
                "val4"
            ]
        }, function(json) {
            Search.data = $.parseJSON(json.data);

            $.each(Search.data, function(k, v){
                $('#searchQuery').append(v + "\n");
            });
        });
}, 
```

Java函数：

```
 @AsyncService(name = "generateSearchQuery", permission = "")
    public void generateSearchQuery(HttpServletRequest req, HttpServletResponse res) {
        res.setHeader("Cache-Control", "no-cache");
        JSONResult result = new JSONResult("Error Generating Search Query");

        String[] arr = req.getParameterValues("data[]");

        for(int i = 0; i< arr.length; i++){
            arr[i] = "success"+i+"!";
        }

        result.put("data", arr);

        try {
            res.getWriter().print(result);
        } catch (IOException e) {
            // whatever
        }
    }
} 
```

获取JSON：

```
function getJson(guid, service, parms, callback) {
    beginWork();
    $
            .ajax( {
                url : document.URL,
                type : 'GET',
                data : parms,
                cache : 'false',
                dataType : 'json',
                headers : {
                    'framework-guid' : guid,
                    'async-service' : service
                },
                success : function(json) {
                    endWork();
                    if (json.successful) {
                        callback(json);
                    } else {
                        error(json.error && json.error.title ? json.error.title
                                : 'No Title Provided', json.error
                                && json.error.message ? json.error.message
                                : 'No message provided for service ' + service);
                    }
                },
                error : function(jqXHR, textStatus, errorThrown) {
                    endWork();
                    error('Ajax Error', 'Error invoking ' + service + '('
                            + parms + ')');
                }
            });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:18:05.850

似乎服务器响应的内容不是 json 格式。因为你将$.ajax的响应类型指定为json，所以需要将object result转换为json。您可以使用 google gson [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)，并执行以下操作。

```
Gson gson = new Gson();
res.getWriter().print(gson.toJson(result)); 
```

在 getJson 中，您应该进行以下更改。

```
//before
Search.data = $.parseJSON(json.data);
//after
Search.data = json.data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:19:21.387

响应似乎无效！

我检查了一下，你有一个无效的标签**Ljava.lang.String;@1e40c9f**，我在解析你的代码时得到的错误是：

```
SyntaxError: invalid label 
```

# wix - Wix 安装程序无法删除安装文件夹

> ID：11102256
> 
> 赞同：1
> 
> 时间：2012-06-19T13:41:50.420
> 
> 标签：wix, uninstallation

我有一个 Wix 安装程序，旨在安装（卸载）Windows 服务和另一个 .exe 文件。当我使用此安装程序卸载软件并启用额外日志时，我看到一些关于无法删除我的安装文件夹的错误消息，尽管它确实是空的。日志上出现的第一条消息是这样的：

调试：错误 2911：无法删除文件夹 MY_INSTALLATION_FOLDER。

以下错误都是关于同一个问题。我的第一个猜测当然是在卸载过程中使用了一些资源。然而，就像我提到的，这个文件夹中的所有组件确实都被删除了，现在这是一个空文件夹。此外，此错误是日志中的第一个错误，这意味着在删除此文件夹之前没有错误。例如，从日志中我可以看到在删除文件夹之前采取了一系列 FileRemove 操作，并且它们都成功了。所以肯定是这个文件夹本身被使用了。但我真的无法弄清楚为什么以及保存这个文件夹的原因。顺便说一句，软件确实被卸载了，因为最终产品删除返回 0 并且与我们的软件相关的所有东西都被删除了（Windows 服务列表、快捷方式、注册表...... ) 这个空文件夹除外。这并不重要，但我们绝对不想听到客户询问此类错误（他们使用自动安装，并且默认情况下启用并检查日志）

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:26:34.623

可能的原因：

*   其他进程正在锁定该文件夹。使用[Unlocker](http://www.emptyloop.com/unlocker/)来验证是否是这种情况。
*   某些文件夹的权限受限于 Windows（例如 C:\Windows\system32）。通常，您应该避免在 Windows 自己的文件夹下创建文件（除非需要，即：您正在安装设备驱动程序）。
*   您是否正确设置了[文件夹权限](http://blogs.msdn.com/b/cjacks/archive/2008/12/04/how-to-set-directory-permissions-at-install-time-using-an-msi-created-using-windows-installer-xml-wix.aspx)？

# xml - xslt 检查条件的有效方法

> ID：11102259
> 
> 赞同：1
> 
> 时间：2012-06-19T13:42:06.613
> 
> 标签：xml, xslt-1.0

我只是想检查是否有任何方法可以避免在 xslt1.0 中像下面这样的冗长编码，其中我们有多个检查条件，输出元素要根据某些条件进行复制。如果条件不成立，则元素本身将不存在于输出中。我问的原因是，我们在 xsl 文件中有很多元素。

我的 xslt

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    >
  <xsl:output omit-xml-declaration="yes" indent="yes" />
  <xsl:strip-space elements="*" />
  <xsl:template match="/">
    <Root>
    <xsl:if test="Root/a/text() = '1'">
      <first>present</first>   
    </xsl:if>
    <xsl:if test="Root/b/text() = '1'">
      <second>present</second>
    </xsl:if>
    <xsl:if test="Root/c/text() = '1'">
      <third>present</third>
    </xsl:if>
    <xsl:if test="Root/d/text() = '1'">
      <fourth>present</fourth>
    </xsl:if>
    </Root>
  </xsl:template>
</xsl:stylesheet> 
```

我的输入xml

```
<Root>
  <a>1</a>
  <b>1</b>
  <c>0</c>
  <d>1</d>  
</Root> 
```

我的输出

```
<Root>
  <first>present</first>
  <second>present</second>
  <fourth>present</fourth>
</Root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:37:45.890

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:ord>
   <first>first</first>
   <second>second</second>
   <third>third</third>
   <fourth>fourth</fourth>
 </my:ord>

 <xsl:variable name="vOrds" select="document('')/*/my:ord/*"/>

 <xsl:template match="Root/*[. = 1]">
  <xsl:variable name="vPos" select="position()"/>

  <xsl:element name="{$vOrds[position()=$vPos]}">present</xsl:element>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<Root>
  <a>1</a>
  <b>1</b>
  <c>0</c>
  <d>1</d>  
</Root> 
```

**产生了想要的正确结果：**

```
<Root>
  <first>present</first>
  <second>present</second>
  <fourth>present</fourth>
</Root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:37:45.997

一种方法是在 output-template.xml 中为输出创建一个模板：

```
<Root>
  <first>present</first>
  <second>present</second>
  <third>present</third>
  <fourth>present</fourth>
</Root> 
```

然后处理这个：

```
<xsl:variable name="input" select="/"/>

<xsl:template match="Root/*">
  <xsl:variable name="p" select="position()"/>
  <xsl:if test="$input/Root/*[$p] = '1'">
    <xsl:copy-of select="."/>
  </xsl:if>
</xsl:template>

<xsl:template match="/">
  <Root>
    <xsl:apply-templates select="document('output-template.xml')/Root/*"/>
  </Root>
</xsl:template> 
```

# nservicebus - 同一台机器中的分配器和工作器端点队列

> ID：11102261
> 
> 赞同：3
> 
> 时间：2012-06-19T13:42:33.213
> 
> 标签：nservicebus

我正在使用 NServiceBus 3.2.2.0，试图在同一台机器上测试分销商和工人。我注意到分销商正在创建以下队列

*   端点队列
*   EndPointQueue.distributor.control
*   EndPointQueue.distributor.storage
*   EndPointQueue.retries
*   EndPointQueue.timeouts

工人正在创建一个新队列，例如：

*   EndPointQueue.5eb1d8d2-8274-45cf-b639-7f2276b56c0c

有没有办法指定工作人员端点队列名称而不是工作人员通过在端点队列中添加随机字符串前缀来创建队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:56:59.540

由于在与主服务器（分发服务器）相同的机器上运行工作程序并没有真正意义，NServiceBus 假设您这样做只是为了测试目的并生成这种队列名称。

在真正的分布式场景中，worker 在自己的机器上运行，它将与 master 具有相同的队列名称。整个想法是，您不必进行任何代码或配置更改即可从单台机器转到横向扩展的部署。

# magento - Magento 重复订单

> ID：11102268
> 
> 赞同：7
> 
> 时间：2012-06-19T13:42:43.650
> 
> 标签：magento, magento-1.6, opayo

我有一个 Magento 网站，使用的版本`1.6.2.0`在重复订单时遇到问题。

在研究了这个主题后，我发现大多数论坛帖子都解释`1.4.x`了重复订单的问题，并且提到的解决方案（即使是我发现的 SO 上的解决方案）只是建议用户将 Magento 更新为`>1.4`.

我也在[这里](http://www.kassner.com.br/en/2011/01/07/magento-slow/)找到了一个建议的解决方案，但不愿意删除会阻止可下载购买工作的观察者。

我还发现了几次提到的 Array Of Death 修复程序（例如[这里](http://www.magentocommerce.com/boards/viewthread/113901/P75/)），但是这个问题在 中不存在`1.6.x`，Zend 似乎已经解决了它。

有一些 Javascript 黑客建议，其中确认订单按钮在提交时被隐藏，但 Magento`1.6.x`已经这样做了。

我已将支付网关超时配置变量增加到 120 秒，我还想看看它是否会产生结果。我无法测试它，因为问题是间歇性的（因此可能是由支付网关和 Magento 之间的通信或缺乏通信引起的）。

我使用 Sagepay 作为支付网关。

我该如何进一步调试呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:24:48.553

The link you posted is correct, but I wouldn't use their fix, I would just disable the Mage_Rss module.

Mage_Rss has several observers in it that call Mage::app()->cleanCache(...) in the checkout process, which is extremely expensive if your installation is using the default filesystem cache and it's gotten large.

I found the best thing for troubleshooting Magento performance problems is to wire up [Xhgui](http://phpadvent.org/2010/profiling-with-xhgui-by-paul-reinheimer "xhgui") and do some profiling. Reading call stacks will help your understanding of Magento immensely also.

Oh, and I don't know if this is true for Sagepay, but I went and fixed this problem completely for PayflowPro by rewriting the method that generates transaction IDs to use the quoteID instead of generating unique IDs on every invocation. I started down the path of committing this back, but I'm on 1.4.2 still and don't have time to test in later versions and it's a pretty significant rewrite. Guess I could just put it out there for someone else to run pass Moses...

# python - 在 Python 中使用 C 类型

> ID：11102269
> 
> 赞同：1
> 
> 时间：2012-06-19T13:42:44.140
> 
> 标签：python, c, dll, ctypes

我需要 Python 中的以下 C 函数：

```
int func(Uint8 *bytRecvBuffer, int *iRecvLen); 
```

我在 Python 中尝试过：

```
mydll = cdll.LoadLibrary("my.dll")

recvBuffer = None
recvLength = None

funcFunction = getattr(mydll, "func")
funcFunction(POINTER(c_ubyte(recvBuffer)), POINTER(c_int(recvLength))) 
```

错误信息：

> TypeError：需要一个整数

这里的参数有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:10:23.470

None 不是整数。

c_int(None) 导致 TypeError

用 0 初始化变量，而不是 None

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:44:30.100

您需要分配一个实际的缓冲区和整数：

```
from ctypes import *
mydll = CDLL("my")
recvBuffer = create_string_buffer(1000)
recvLength = c_int(1000)
mydll.func(recvBuffer,byref(recvLength)) 
```

您也可以声明 func 支持的具体参数，但是您还必须对传递的参数更加明确：

```
mydll.func.argtypes = [POINTER(c_ubyte),POINTER(c_int)]
mydll.func.restype = c_int
recvBuffer = (c_ubyte*1000)()
recvLength = c_int(1000)
mydll.func(recvBuffer,byref(recvLength)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:55:22.797

您是否尝试使用 windll 而不是 cdll 加载 dll？还有....不是指针而不是 POINTER 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:55:08.750

从您的初始化猜测`recvBuffer`并且`recvLength`您想要创建空指针。

在这种情况下，您应该创建一个没有特定类型参数的实例，请执行以下操作：

```
recvBuffer = POINTER(c_ubyte)()   
recvLength = POINTER(c_int)()

funcFunction(recvBuffer, recvLength) 
```

如果您在 python 中获得了缓冲区，则需要将固定大小的数组转换为正确的指针类型。

# c# - 比较 HKEY_USER 和 HKEY_CURRENT_USER

> ID：11102275
> 
> 赞同：0
> 
> 时间：2012-06-19T13:42:59.360
> 
> 标签：c#

有什么简单的方法可以比较两个注册表项吗？

我想比较 Windows 注册表中的用户和当前用户密钥。

如果值发生了变化，我想在 HKEY_USER.Default 中选择并使用默认值进行更正。

请指导我..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:46:39.170

在代码中？您可以使用 regedit 工具导出密钥，然后使用 winmerge 比较文件。

# jquery - 这是处理 jQuery Mobile/PhoneGap 页面更改事件的好方法吗？

> ID：11102277
> 
> 赞同：0
> 
> 时间：2012-06-19T13:43:00.717
> 
> 标签：jquery, cordova, jquery-mobile, initialization, jquery-events

`head`我的 index.html中有这个脚本。我希望在显示不同页面时运行不同的脚本，因为我以编程方式填充页面。页面有 ID`page1`等`page2`。特定于页面的函数被调用`page1init()`，`page2init()`等等。

```
document.addEventListener('deviceready', function(){
    $("div[data-role=page]").on('pageshow', function(){
        eval(this.id + 'init()')
    })

    $('#page1').trigger('pageshow')
}) 
```

这是合理的`eval()`吗？在此处使用是否会引入安全问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:18:32.933

由于没有人回答，我想我必须默认为“是”？如果您不满意，请随时编辑此/答案。

# c++ - C++ - 我们如何在 linux 中获得毫秒时间戳？

> ID：11102282
> 
> 赞同：3
> 
> 时间：2012-06-19T13:43:08.563
> 
> 标签：c++, gcc, c++11, unix-timestamp, chrono

如何转换`std::chrono::monotonic_clock::now()`为毫秒并将其转换为长？

使用来自 chrono 的 stable_clock 或 high_resolution_clock 也是一样的。我已经看到了`std::chrono::duration_cast<std::chrono::milliseconds>`，但我只想要当前的时间戳而不是任何持续时间间隔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T17:44:27.467

当前时间戳是相对于某个时间点定义的（因此它是一个持续时间）。例如，“典型的”是获取关于纪元开始的时间戳（1970 年 1 月 1 日，在 Unix 中）。您可以通过使用来做到这一点[`time_since_epoch()`](http://en.cppreference.com/w/cpp/chrono/time_point/time_since_epoch)：

```
namespace chr = std::chrono;

chr::time_point<chr::steady_clock> tp = chr::steady_clock::now();
std::cout << "hours since epoch: "
          << chr::duration_cast<chr::hours>(tp.time_since_epoch()).count()
          << '\n'; 
```

要以毫秒为单位获取值，您需要将其转换为`std::chrono::milliseconds`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:36:15.977

所有内置时钟都有一个相关的“纪元”，这是它们的基准时间。未指定纪元的实际日期/时间，并且可能因时钟而异。

如果您只想要一个数字进行比较，那么*some-clock*`::now().time_since_epoch()`会给您一个`duration`自该时钟的纪元以来的时间，您可以使用`count()`该类型的成员将其转换为整数`duration`。其单位将取决于`period`时钟。如果您想要特定单位，`duration_cast`请先使用：

```
typedef std::chrono::steady_clock clk;
unsigned long long milliseconds_since_epoch=
    std::chrono::duration_cast<std::chrono::milliseconds>(
        clk::now().time_since_epoch()).count(); 
```

正如我所说，这仅用于比较，而不是作为绝对时间戳，因为未指定时代。

如果您需要 UNIX 时间戳，则需要使用`std::chrono::system_clock`，它具有`to_time_t()`将 a 转换为`time_point`a的功能`time_t`。

或者，您可以在程序中的特定点获取基线计数，以及相应的时间`gettimeofday`，然后使用它将相对计数转换为绝对时间。

# css - Retina 分辨率屏幕的转换站点

> ID：11102285
> 
> 赞同：6
> 
> 时间：2012-06-19T13:30:16.520
> 
> 标签：css

Apple 的新[Macbook Pro](http://www.apple.com/uk/macbook-pro/)有一个 15 英寸的屏幕，分辨率为 2880x1800。目前它正在缩放网站，导致图像像素翻倍，并且布局也出现双倍缩放。

作为一名 Web 开发人员，我如何着手转换我现有的 PHP/XHTML/CSS 网站以利用高 DPI 屏幕？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:08:05.063

以下页面提供了一个不错的贯穿：

[http://www.webmonkey.com/2012/06/make-sure-your-site-looks-good-on-the-new-retina-macbook-pro/](http://www.webmonkey.com/2012/06/make-sure-your-site-looks-good-on-the-new-retina-macbook-pro/)

图标字体提供了一种解决方案，@media 类型允许使用其他样式：

例子：

```
@media only screen and (min--moz-device-pixel-ratio: 2),
only screen and (-o-min-device-pixel-ratio: 2/1),
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (min-device-pixel-ratio: 2) {
    .logo {
        background: url(/path/to/my/highreslogo.png) no-repeat;
        background-size: 100px 100px;
        /* rest of your styles... */
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T15:42:35.673

该脚本可能会有所帮助 - [http://retinajs.com/](http://retinajs.com/)。您将@2x 添加到为视网膜显示而剪切的图像名称中，其余的由脚本完成。剪切图像时的一个陷阱是，所有内容都必须能被 2 整除——你已经知道了，但这让我感到困惑，因为我完美地制作了我的按钮，但忽略了它们周围的 1px 阴影/线条，doh！:(

编辑：刚刚看到一篇关于这个主题的非常好的文章/教程：

[http://benfrain.com/how-to-serve-high-resolution-website-images-for-retina-displays-new-ipadiphone4/](http://benfrain.com/how-to-serve-high-resolution-website-images-for-retina-displays-new-ipadiphone4/)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-19T15:14:04.103

也许视网膜 iPhone/iPad 的解决方案可以在视网膜 Mac 上运行。指示更高分辨率的图像，例如：

```
background-image: url(your-image@2x.png); 
```

# php - 使用图像作为文本

> ID：11102287
> 
> 赞同：0
> 
> 时间：2012-06-19T13:43:29.000
> 
> 标签：php, javascript, html, photoshop

我的老板想使用 Photoshop、paint 或 illustrator 创建自己的自定义字体。他希望每个字母都是彩色的或改变颜色，并且可能有阴影，并希望在他的网站中使用它，这样当人们输入文本时，它就不是您通常看到的简单的黑白文本。我已经研究并知道您可以使用字体创建器创建自定义字体，但是是否可以使用代码（java 脚本或 php）将单个字母/符号图像插入文本框中，或者使用 Dreamweaver 中的事件处理程序或使用 CSS . 如果是这样，是否有人有可能的示例或您知道的网站可以这样做。所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:55:49.697

您可以使用**@font-face** (http://www.font-face.com/) 将您的自定义字体嵌入到网页中，然后使用一些 javascript（一种为其他字母着色的算法）+ CSS3（自定义颜色）以获得老板想要的效果。

出于性能原因，我建议使用 @font-face 或 google web 字体而不是 Cufon。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:54:54.947

我同意 Dale 的观点，即您应该创建一个实际字体并将其包含在您的 CSS 中。与其使用用于照片编辑和一般图形设计的 Adob​​e 产品，不如使用专门为字体设计的工具，如[FontForge](http://fontforge.sourceforge.net/)或许多可用的商业应用程序之一。

对于特殊效果，您可以使用[jQuery 插件（](http://archive.plugins.jquery.com/)如[textgrad](http://www.si-les-idees-suffisaient.net/jquery/textgrad.html)或[wrapSelection](http://archive.plugins.jquery.com/project/wrapSelection)或其他[“动画和效果”插件）](http://archive.plugins.jquery.com/projects/plugins?type=48)来实现您想要的效果。

如果您想用图像替换文本，有一些涵盖该主题的 StackOverflow 问题。看看[这个](https://stackoverflow.com/questions/5972119/jquery-replace-text-with-image-help)或[这个](https://stackoverflow.com/questions/740765/how-to-replace-the-currently-selected-text-inside-an-html-textarea)。

如果您在将这些与 HTML 表单集成时遇到问题，您应该提出一个新的 StackOverflow 问题，其中包含您尝试的代码（最好以易于复制的方式，以便回答您问题的人可以测试事物）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T14:29:39.490

您可以使用@font-face 轻松地将自定义字体添加到网站。注意：您需要将字体转换为几种不同的格式以支持所有主要浏览器。幸运的是，有一种免费的自动化方式：

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

祝创建多色字体好运！:)

# ios - 集成 Brad Larson 的 GPUImage 时崩溃

> ID：11102290
> 
> 赞同：0
> 
> 时间：2012-06-19T13:43:31.677
> 
> 标签：ios, opengl-es, objective-c-blocks

我试图将[Brad Larson 的 GPUImage 框架](https://github.com/BradLarson/GPUImage)集成到我的项目中。示例代码工作正常。在我集成之后，它构建得很好，但我在运行它时面临崩溃。`AVCaptureVideoDataOutputSampleBufferDelegate`它在方法上崩溃，

`- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection;`

特别是在 `runOnMainQueueWithoutDeadlocking`街区。我试图找出崩溃区域，但即使在看到崩溃日志几个小时后也找不到它。我对坠机一无所知。下面是我上它的崩溃日志。有人可以指出其中的问题吗？我也有疑问，我可以用来继续名义上的队列`com.sunsetlakesoftware.GPUImage.processingQueue`吗？

```
Date/Time:       2012-06-19 17:46:28.449 +0530
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xb00566c0
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x344faf78 objc_msgSend + 16
1   GPUTest                         0x0017d16a __74-[GPUImageVideoCamera captureOutput:didOutputSampleBuffer:fromConnection:]_block_invoke_0118 (GPUImageVideoCamera.m:415)
2   libdispatch.dylib               0x35b03b24 _dispatch_barrier_sync_f_slow_invoke + 72
3   libdispatch.dylib               0x35b02e8a _dispatch_main_queue_callback_4CF$VARIANT$up + 190
4   CoreFoundation                  0x3247d2a6 __CFRunLoopRun + 1262
5   CoreFoundation                  0x3240049e CFRunLoopRunSpecific + 294
6   CoreFoundation                  0x32400366 CFRunLoopRunInMode + 98
7   GraphicsServices                0x31557432 GSEventRunModal + 130
8   UIKit                           0x31effcce UIApplicationMain + 1074
9   GPUTest                         0x000b0714 main (main.m:10)
10  GPUTest                         0x000b06cc start + 32

Thread 1 name:  Dispatch queue: com.sunsetlakesoftware.GPUImage.processingQueue
Thread 1:
0   libsystem_kernel.dylib          0x35b4b054 semaphore_wait_trap + 8
1   libdispatch.dylib               0x35b0447e _dispatch_thread_semaphore_wait$VARIANT$up + 6
2   libdispatch.dylib               0x35b0265e _dispatch_barrier_sync_f_slow + 82
3   libdispatch.dylib               0x35b025dc dispatch_barrier_sync_f$VARIANT$up + 16
4   libdispatch.dylib               0x35b02238 dispatch_sync_f$VARIANT$up + 12
5   libdispatch.dylib               0x35b028ee _dispatch_sync_slow + 46
6   libdispatch.dylib               0x35b028ae dispatch_sync$VARIANT$up + 18
7   GPUTest                         0x00172796 runOnMainQueueWithoutDeadlocking (GPUImageOutput.m:13)
8   GPUTest                         0x0017d0a6 -[GPUImageVideoCamera captureOutput:didOutputSampleBuffer:fromConnection:] (GPUImageVideoCamera.m:414)
9   AVFoundation                    0x32dd0244 __74-[AVCaptureVideoDataOutput _AVCaptureVideoDataOutput_VideoDataBecameReady]_block_invoke_0 + 220
10  libdispatch.dylib               0x35af7c52 _dispatch_call_block_and_release + 6
11  libdispatch.dylib               0x35b02ca4 _dispatch_queue_drain + 268
12  libdispatch.dylib               0x35b02b12 _dispatch_queue_invoke$VARIANT$up + 30
13  libdispatch.dylib               0x35b03784 _dispatch_worker_thread2 + 208
14  libsystem_c.dylib               0x30d40df4 _pthread_wqthread + 288
15  libsystem_c.dylib               0x30d40cc8 start_wqthread + 0

Thread 2:
0   libsystem_kernel.dylib          0x35b5bcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x30d40f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x30d40cc8 start_wqthread + 0

Thread 3 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 3:
0   libsystem_kernel.dylib          0x35b4b3a8 kevent + 24
1   libdispatch.dylib               0x35b03ea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x35b03bc2 _dispatch_mgr_thread + 30

Thread 4:
0   libsystem_kernel.dylib          0x35b5bcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x30d40f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x30d40cc8 start_wqthread + 0

Thread 5:
0   libsystem_kernel.dylib          0x35b5bcd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x30d40f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x30d40cc8 start_wqthread + 0

Thread 6 name:  WebThread
Thread 6:
0   libsystem_kernel.dylib          0x35b4b004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35b4b1fa mach_msg + 50
2   CoreFoundation                  0x3247e3ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x3247d124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3240049e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x32400366 CFRunLoopRunInMode + 98
6   WebCore                         0x35c1dc9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x30d4672e _pthread_start + 314
8   libsystem_c.dylib               0x30d465e8 thread_start + 0

Thread 7 name:  com.apple.coremedia.player.async
Thread 7:
0   libsystem_kernel.dylib          0x35b5b068 __psynch_cvwait + 24
1   libsystem_c.dylib               0x30d46a46 _pthread_cond_wait + 634
2   libsystem_c.dylib               0x30d467c2 pthread_cond_wait + 34
3   CoreMedia                       0x32ec3868 FigSemaphoreWaitRelative + 268
4   MediaToolbox                    0x309fb3e6 fpa_AsyncMovieControlThread + 22
5   CoreMedia                       0x32ee28b4 figThreadMain + 168
6   libsystem_c.dylib               0x30d4672e _pthread_start + 314
7   libsystem_c.dylib               0x30d465e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00541c20    r1: 0x00190b4f      r2: 0x0056f240      r3: 0x00190b4f
    r4: 0xb00566b8    r5: 0x00000000      r6: 0x00000000      r7: 0x2feace34
    r8: 0x2feace4c    r9: 0x000642d3     r10: 0x2feace4c     r11: 0x3e47dde0
    ip: 0x3f3c22c8    sp: 0x2feace24      lr: 0x0017d171      pc: 0x344faf78
  cpsr: 0x20000030 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:47:29.373

最后，我找到了解决方案。我刚刚替换了为 ARC 设置的目标编译源中 AppDelegate 的编译器标志。即我删除了`-fno-objc-arc`标志并将其替换`-fobjc-arc`为导致崩溃的 AppDelegate 类的标志。

# wcf - HttpClient 将 byte[] 发布到 WCF 服务产生错误：最大数组长度配额 (16384) 或最大项

> ID：11102297
> 
> 赞同：3
> 
> 时间：2012-06-19T13:43:59.587
> 
> 标签：wcf, wcf-client

我有一个可以接受`byte[]`. 我正在使用创建客户端`HttpClient`并收到以下错误。我在网上读到，您必须`readerQuotas`在服务器和客户端上都设置，但是如何在 上设置这些设置`HttpClient`？

### 错误：

> 反序列化 RTM.API.Resources.UGCRequest 类型的对象时出错。读取 XML 数据时，已超出最大数组长度配额 (16384) 或对象图中的最大项目配额。这些配额可以通过更改 XmlDictionaryReaderQuotas 上的 MaxArrayLength 属性或 MaxItemsInObjectGraph 设置来增加。

### 服务器配置：

```
 <standardEndpoints>
        <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647" maxBufferSize="2147483647"/>
            <standardEndpoint name="DirectoryEndpoint"/>
        </webHttpEndpoint>
    </standardEndpoints>
    <services>
        <service name="API.Service.UGCService" behaviorConfiguration="DataServiceBehavior">
            <endpoint contract="API.Service.UGCService" kind="webHttpEndpoint" endpointConfiguration="" binding="webHttpBinding" bindingConfiguration="BigHttpBinding"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="DataServiceBehavior">
                <serviceDebug includeExceptionDetailInFaults="true"/>
                <dataContractSerializer maxItemsInObjectGraph="2147483644"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <webHttpBinding>
            <binding name="BigHttpBinding" transferMode="Buffered" maxReceivedMessageSize="2147483647" >
                <readerQuotas maxArrayLength="2147483647" maxDepth="2147483647" maxStringContentLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
            </binding>
        </webHttpBinding>
    </bindings> 
```

### 客户端代码：

```
using (HttpClient client = new HttpClient(apiPath))
            {
                using (HttpRequestMessage request = new HttpRequestMessage(method, finalUrl))
                {
                    request.Headers.Accept.AddString("application/json");
                    request.Headers.Add("Authorization", sb.ToString());

                    if (method == "POST" || method == "PUT")
                    {
                        if (requestBody.Count() == 0)
                            request.Headers.ContentLength = 0;
                        else
                        {
                            request.Content = HttpContent.Create(APM6.Utils.Serialize(requestBody), "application/json");
                        }
                    }

                    using (HttpResponseMessage response = client.Send(request))
                    {
                        return response.Content.ReadAsString();
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:50:44.067

`readerQuotas`是一组额外的约束，WCF 实施以提供对拒绝服务 (DOS) 攻击的保护。

`HttpClient`不实施该保护，因此您无需担心额外的客户端配置。

您会看到该错误，因为由于`<readerQuotas maxArrayLength="2147483647" />`某种原因未应用于您的服务器端点。您可以使用`svcutil.exe`or`wcftestclient.exe`来证明这一点。

尝试使用这些工具生成配置文件，您可能会`<readerQuotas maxArrayLength="16384" />`在该配置文件中看到。这意味着服务器部分没有将扩展值应用于`maxArrayLength`.

如果是这样，请使用服务器端配置或代码以确保应用该配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:26:14.867

尝试这个：

```
 <endpointBehaviors>
    <behavior name ="namespace1.namespace1Behavior">
      <dataContractSerializer maxItemsInObjectGraph ="2147483647"/>
    </behavior>
    <behavior name="mybehavior">
      <transactedBatching maxBatchSize="2147483647"/>
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>
    <behavior name="namespace1.namespace1Behavior">
      <dataContractSerializer maxItemsInObjectGraph ="2147483647"/>
      <!-- To avoid disclosing metadata information, 
      set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="True"/>
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="True" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T20:50:43.083

在这种情况下，您需要在客户端上的唯一设置是`MaxResponseContentBufferSize`.

但是，您的问题是在服务器反序列化期间发生的。您可能需要添加`maxBufferPoolSize="2147483647" maxBufferSize="2147483647"`为绑定参数

这似乎仍然与错误消息不完全对应。确保服务行为与问题中显示的配置文件相对应，而不是与某些不同的副本相对应。

# c# - WP7 如何使用 httpwebrequest/httpwebresponse 加载完整的网页（目前只显示部分）

> ID：11102298
> 
> 赞同：0
> 
> 时间：2012-06-19T13:44:05.507
> 
> 标签：c#, windows-phone-7.1

我在加载网页时遇到问题。不知何故，我得到的响应似乎不完整，因为只显示了页面的第一部分。使用 ReadToEnd 写出响应流时，无论我尝试浏览哪个网页，它都只会在字符串中显示大约 700 个字符。请参阅下面的代码：

```
public class GetServerResponse
{
    private Uri url;

    public GetServerResponse(Uri uri)
    {
        this.url = uri;
        HttpWebRequest h = (HttpWebRequest)WebRequest.Create(this.url);
        StartRequest(this.url);
    }

    private void StartRequest(Uri url)
    {
        HttpWebRequest internalRequest = (HttpWebRequest)WebRequest.Create(url);
        GetServerResponseState responseState = new GetServerResponseState();
        responseState.AsyncRequest = internalRequest;

        internalRequest.BeginGetResponse(new AsyncCallback(HandleServerResponse), responseState);

    }

    private void HandleServerResponse(IAsyncResult asyncResult)
    {
        GetServerResponseState responseState = (GetServerResponseState)asyncResult.AsyncState;
        HttpWebRequest internalRequest = (HttpWebRequest)responseState.AsyncRequest;
        internalRequest.AllowAutoRedirect = false;

        responseState.AsyncResponse = (HttpWebResponse)internalRequest.EndGetResponse(asyncResult);

        Stream streamResult;
        try
        {
            streamResult = responseState.AsyncResponse.GetResponseStream();
            using (StreamReader reader = new StreamReader(streamResult, Encoding.UTF8))
            {
                System.Diagnostics.Debug.WriteLine(reader.ReadToEnd());
            }
        }
        catch (FormatException)
        {
            return;
        }
    }

}
public class GetServerResponseState
{
    public HttpWebRequest AsyncRequest { get; set; }
    public HttpWebResponse AsyncResponse { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:21:56.620

我认为您正在尝试加载 ajax 网页。

出现此问题的原因是因为`httpwebrequest`不理解 JavaScript 并且无法跟踪 JavaScript 以获取其中的网页。

要检查它，请转到您想要的网页并右键单击以查看源代码，在源代码中您找不到网页的缺失部分，但如果您使用的是 Chrome，您可以使用检查元素找出缺失的部分部分。然后它使用ajax。

请参阅此[MSDN 线程](http://social.msdn.microsoft.com/Forums/is/netfxnetcom/thread/201b81fa-2f2f-4b84-8e1d-3008477f7306)。

# javascript - 从 iframe 调用父窗口方法

> ID：11102299
> 
> 赞同：0
> 
> 时间：2012-06-19T13:44:08.063
> 
> 标签：javascript, jquery, iframe, same-origin-policy

我知道这是跨浏览器通信或同源策略的问题，浏览器不允许此类通信。

我需要解决这个用例。我在 HTTP 中有一个父页面，从那里我将表单提交到 HTTPS，我的要求是不要离开页面并且表单在覆盖中打开。

这是我当前的 JSP 设置

```
<form:form action="https://localhost:9002/myApp/springSecurity/login" class="login-form error-info"  id="loginForm"  method="post" commandName="loginForm" target="guestFrame">

 <iframe width="0" frameborder="0" scrolling="no" name="guestFrame" > 
```

从服务器我在响应中发送 java 脚本以附加到 Iframe 上，这是从服务器发送的 java 脚本

```
<html><body>"+ "<script type=\"text/javascript\">parent.handleResponse('error',securityLoginStatus.getLoginFailedException());</script>"+ "</body></html>") 
```

我已经在父窗口中定义了一个方法，`handle-response`但是我在浏览器中遇到了以下错误

```
Permission denied to access property 'handleResponse' 
```

我什至尝试过`parent.wwindow.handleResponse`但得到同样的错误。有什么办法可以从 iframe 与父窗口通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:41:02.250

`http://localhost:9002`正如您之前所说，除非 html 来源和命运都在域下，否则无法避免交叉来源权限被拒绝。

为方便起见，我建议使用带有 javascript/json/jsonp 文档的 http 通信。你可以尝试 jQuery 类似的东西：

```
<script type="text/javascript">
function sendPost () {
    $.ajax({
      type: 'POST',
      url: 'https://localhost:9002/myApp/springSecurity/login',
      data: $("#guestFrame").serialize(),
      error: function(data, status) {
        // alert('Error ' + status);
      }
    });
}
function handleResponse(obj) {
    if (obj.type==="error") {
        alert("Error: " + obj.mssg);
    }
}
</script>

<form ...>
 ...
 <input type="submit" value="send" onclick="sendPost();return(false)"/>
</form> 
```

并且为了避免 CORS 限制，`https://localhost:9002/myApp/springSecurity/login`html 响应必须是 javascript 代码并包含以下标头：

```
<% 
response.setHeader("Content-type", "application/x-javascript");
response.setHeader("Access-Control-Allow-Origin", "*");
%> 
```

Javascript 示例响应将能够调用其父调用者的“handleResponse”：

```
handleResponse({'type':'error', 'mssg': 'your_login_failed_exception'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T21:49:39.183

您还可以使用[http://easyxdm.net/wp/](http://easyxdm.net/wp/)等框架进行跨域调用

# php - 仅填写字段的 PHP 表单处理

> ID：11102304
> 
> 赞同：0
> 
> 时间：2012-06-19T13:44:28.367
> 
> 标签：php

我有一个 PHP 类，它有 8 个属性和一个 HTML 表单，它有 40 个（8*5）文本框，每个对象 8 个，所以用户可以一次输入 5 个对象的数据。

对于每组框，我想创建一个类的对象并将其保存到我的数据库中。例如，如果用户填写了 10 个框（两组），则应创建并保存两个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:59:40.053

如果我理解正确，这里是 HTML 表单示例：

```
<form action="" method="post">
  <fieldset>
    <legend>Group 1</legend>
    <div>
      <input type="text" name="groups[0][first_name]" />
    </div>
    <div>
      <input type="text" name="groups[0][last_name]" />
    </div>
  </fieldset>

  <fieldset>
    <legend>Group 2</legend>
    <div>
      <input type="text" name="groups[1][first_name]" />
    </div>
    <div>
      <input type="text" name="groups[1][last_name]" />
    </div>
  </fieldset>

  <fieldset>
    <legend>Group 3</legend>
    <div>
      <input type="text" name="groups[2][first_name]" />
    </div>
    <div>
      <input type="text" name="groups[2][last_name]" />
    </div>
  </fieldset>
</form> 
```

注意字段名称，字段是如何组合的。像这样提交表单后，您的 $_POST 超全局数组将包含以下结构的 $_POST['groups'] 数组：

```
Array
(
    [0] => Array
        (
            [first_name] => 
            [last_name] => 
        )

    [1] => Array
        (
            [first_name] => 
            [last_name] => 
        )

    [2] => Array
        (
            [first_name] => 
            [last_name] => 
        )

) 
```

您可以使用如下代码轻松处理此类数据：

```
foreach ($_POST['groups'] as $group) {
  $group = array_filter($group);

  if (!empty($group)) {
    // do something with group
  }
} 
```

这个小例子循环遍历所有提交的组。array_filter() 函数将丢弃每个 $group 数组中的所有空值，并且 !empty(...) 将确保 $group 不为空。

# javascript - jQuery：将参数传递给ajax错误函数

> ID：11102309
> 
> 赞同：3
> 
> 时间：2012-06-19T13:44:41.647
> 
> 标签：javascript, jquery

这些天我一直在做一些 ajax 功能，我面临一个小问题。我有一个调用 ajax 的函数。我想给它一个值，并在请求完成时返回该函数。我该怎么做：

*   触发ajax子函数的返回
*   等待“answer” var 改变，然后返回

这是精神（确实，它行不通）：

```
var answer = null;
    $.ajax({
        url: "validate/"+id,
        type: 'POST',
        data: {'field' : value},
        success: function(data) {
            //noty({text: data, type: 'success'});
        },
        error:function (xhr, ajaxOptions){
            noty({text: xhr.status + " : " + xhr.responseText, type: 'error'});
            answer = "error";
        } 
    });

return answer; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:51:02.323

您不能`return`从 AJAX 函数中取值，因为 AJAX 请求是*异步*发生的（想想检索远程网页需要多长时间）。

相反，您需要提供一个回调（请求完成*时执行的函数）：*

```
function ajaxFunction(onComplete) {
    $.ajax({
        url: "validate/"+id,
        type: 'POST',
        data: {'field' : value},
        success: function(data) {
            //noty({text: data, type: 'success'});
            onComplete(data);
        },
        error:function (xhr, ajaxOptions){
            noty({text: xhr.status + " : " + xhr.responseText, type: 'error'});
            onComplete(error);
        }
    }
} 
```

然后将一个函数作为参数传递给`ajaxFunction`，它将接收来自 AJAX 请求的响应。

```
ajaxFunction(function (answer) {
    // do something with answer
}); 
```

当您需要一个`id`和`value`参数时，您可以将它们添加到`ajaxFunction`方法的参数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:54:29.837

使用`async: false`标志 - 请参阅[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档以供参考。

请注意，在 jQuery 1.8 中，`async`将不推荐使用 。

```
var answer = null;

$.ajax({
    url: "validate/"+id,
    type: 'POST',
    data: {'field' : value},
    success: function(data) {
        //noty({text: data, type: 'success'});
    },
    error:function (xhr, ajaxOptions){
        noty({text: xhr.status + " : " + xhr.responseText, type: 'error'});
        answer = "error";
    },
    async: false
});

return answer; 
```

# ruby-on-rails - 这两个测试有什么不同（一个失败，一个通过）

> ID：11102314
> 
> 赞同：0
> 
> 时间：2012-06-19T13:44:57.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing

这是通过的测试：

```
test "should create user" do
        assert_difference('User.count') do
        post :create, user: { name: "John Doe", 
                              email: "example@example.com",
                              password: "foobar3",
                              password_confirmation: "foobar3" }
end 
```

这是失败的测试：

```
def setup
  @user = User.new(name: "John Doe", 
               email: "example@example.com",
               password: "foobar3",
               password_confirmation: "foobar3")
end

test "should create user" do
        assert_difference('User.count') do
        post :create, user: @user 
end 
```

为什么第二次测试失败？以及如何使它使用@user 变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:49:10.443

使用该`.attributes`方法仅获取用户属性的散列，因此您发送这些而不是实际的用户对象。

```
test "should create user" do
    assert_difference('User.count') do
    post :create, user: @user.attributes
end 
```

# java - Jenkins 不在构建过程中运行 maven 插件（checkstyle）

> ID：11102316
> 
> 赞同：0
> 
> 时间：2012-06-19T13:44:58.300
> 
> 标签：java, maven, build, jenkins, checkstyle

我正在使用 Jenkins 运行一个 Maven 项目。该项目正在使用 checkstyle 插件来验证 java 代码，如果发现错误，则构建失败。我已将该插件添加到我的父 pom 文件中，并将其添加到“验证”阶段。在该 POM 上从命令行运行“mvn validate”时，“checkstyle”插件会运行并检查代码。从 Jenkins 运行时，checkstyle 插件不会运行。这是父 pom 构建标签：

```
<build>
<plugins>
    <plugin>
        <executions>
            <execution>
                <goals>
                    <goal>check</goal>
                </goals>
                <phase>validate</phase>
            </execution>
        </executions>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.9.1</version>
        <configuration>
            <configLocation>http://10.2.3.4/CheckStyle/checkstyle.xml</configLocation>
            <failsOnError>true</failsOnError>
        </configuration>
    </plugin>
</plugins> 
```

如何让 Jenkins 不忽略构建标签，以便在验证阶段运行 checkstyle 插件？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T06:55:31.883

对不起。有一个奇怪的源代码控制问题导致我的旧版本的 pom 运行。上面的代码也可以与 Jenkins 完美配合。

# vpn - 窗口 7 的 nortel VPN 客户端，处理器类型不支持错误

> ID：11102321
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:45:05.267
> 
> 标签：vpn

我正在尝试在我的机器上安装 Nortel VPN Client V 10.04.016。

机器配置：Intel Core i5 处理器 64 位。Windows 7 家庭基础版

运行安装程序时，它给我一个错误，提示“此处理器类型不支持安装程序包 (NVC32)。”

请帮助我如何安装相同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T18:17:09.483

如果下面的对话框与您描述的相似（Win 7 样式），那么再加上错误中包含 NVC **32**的事实，我猜您在 64 位 Machine+ 上使用的是 32 位版本的 VPN 客户端视窗版。

![](../Images/a5accea44f27502fff6771867e0817d9.png)

我发现[这个](http://web.archive.org/web/20110209184808/http://blog.michaelfmcnamara.com/2010/03/nortel-vpn-client-release-10-04-016-for-windows-7/#comment-3187)链接表明（尽管介绍性段落的措辞相互矛盾）每个位都有两个单独的安装程序。

# java - 为什么 Spring 在 Tomcat 与独立运行时不注入 @PersistenceContext entityManager

> ID：11102325
> 
> 赞同：4
> 
> 时间：2012-06-19T13:45:24.207
> 
> 标签：java, spring, tomcat, jpa, spring-annotations

我正在尝试使用 Spring 注入`@PersistenceContext entityManager`我的服务。以下配置独立工作，但在 Tomcat 上部署时不起作用。在 Tomcat 上部署时，entityManager 保持为空。我的 JPA 配置在 persistence.xml 中。

```
<context:annotation-config />
<tx:annotation-driven/>

<bean id="entityManagerFactory"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod">
        <value>javax.persistence.Persistence.createEntityManagerFactory</value>
    </property>
    <property name="arguments">
        <list>
            <value>persistenceUnit</value>
        </list>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
  <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean> 
```

我需要对注入进行哪些配置更改才能在 Tomcat 6 和独立版本上运行？

编辑：我能够在服务中获取工厂并从中获取 entityManager，因此 persistence.xml 设置似乎工作正常。

**解决方案：** 我启用了 Spring 日志记录来查找问题——缺少库。`transactionManager`显然，如果无法创建上述 bean，Spring 会悄悄地失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:55:31.320

如果我理解正确，您必须确保persistence.xml 存在于您的tomact 上的正确路径中，或者更准确地存在于您的类路径中。
至少我在处理企业应用程序时遇到了类似的问题，所以我想这是开始寻找答案的好地方。
你检查过日志吗？他们对此有什么有趣的事情吗？

# python - Python - CSV 到嵌套字典

> ID：11102326
> 
> 赞同：-3
> 
> 时间：2012-06-19T13:45:27.470
> 
> 标签：python, csv

我需要导入具有此类数据的 CSV 文件，

```
 January February March
              Amy      4     3      4
              Ben      5     2      0 
              Clara    0     3.5    4 
```

具有月份（名称）的第一行，具有名称（销售额）的第一列以及对应于月份的每月预订。

寻找一种方法来获得像这样的 Dictionary 输出，它需要用 0 删除月份

```
 {"Amy": {"January ": 4, "February": 3, "March": 4},
                  "Ben": {"January": 5, "February": 2},
                  "Clara": {"February": 3.5, "March": 4}} 
```

任何帮助将不胜感激。

谢谢 ，

拉胡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:16:41.160

让我们假设您如何从 csv 获取数据到变量，检查唯一名称、无效数据……，并且您正在努力排除`0`值：

***更新**：读取我的代码中现在包含的 csv 文件：*

```
# Python 3.2
import csv
delimiter = ','
result = {}
with open("data.csv", 'r') as data_file:
    data = csv.reader(data_file, delimiter=delimiter)
    headers = next(data)[1:] # month names starting from 2nd column in csv
    for row in data:
        temp_dict = {}
        name = row[0]
        values = []
        # converting each value from string to int / float
        # (as suggested by OP's example)
        for x in row[1:]:
            try:
                values.append(int(x))
            except ValueError:
                try:
                    values.append(float(x))
                except ValueError:
                    print("Skipping value '{}' that cannot be converted " +
                          "to a number - see following row: {}"
                          .format(x, delimiter.join(row)))
                    values.append(0)
        for i in range(len(values)):
            if values[i]: # exclude 0 values
                temp_dict[headers[i]] = values[i]
        result[name] = temp_dict    
print(result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:09:40.610

如果您知道 CSV 的分隔符，您可以执行以下操作：

```
tokens = line.split(delimiter)
tokens = [token.strip() for token in tokens] 
```

...对于 CSV 的每一行。您需要从解析的第一行中提取适当的值以获取内部字典的键。之后，要获取最外层字典的键，您将使用`tokens[0]`等等。

现在，话虽如此，在我看来，您的 CSV 更像是一个固定宽度的文件，而不是 CSV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:24:56.873

```
import csv
ifile = open('test.csv', "rb")
reader = csv.reader(ifile)
rownum = 0
td = {'j': 0, 'f': 0, 'm': 0}
d = {}
for row in reader:
    # Save header row.
    if rownum == 0:
        header = row
    else:
        for c, col in enumerate(row):
            if c != 0:
                td[header] = col
        d[row[0]] = td 
```

# codeigniter - 一个不受欢迎的 url 在 CodeIgniter 中工作

> ID：11102330
> 
> 赞同：2
> 
> 时间：2012-06-19T13:45:38.977
> 
> 标签：codeigniter, routes, dns, subdomain, zero

我的问题是一个不受欢迎的 url 像 www.domain.com/0 一样工作并向我显示主页。

此外，页面 subdomain.domain.com/0 也像子页面一样工作。

我正在使用代码点火器。我检查了 routes.php 并没有与零相关的内容。跟CI有关系吗？0后缀有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:28:42.680

这是因为`0`是一个空值。Codeigniter 检查 uri 是否为空。如果为空，则加载默认控制器。

真正的问题是，这对你有什么影响？

```
$uri = '0';
if (empty($uri))
    echo 'Oh my! Lets load default controller!'; 
```

# jquery - jquery ui 对话框不会“关闭”

> ID：11102332
> 
> 赞同：2
> 
> 时间：2012-06-19T13:45:50.703
> 
> 标签：jquery, user-interface, dialog

我有一个 jquery 对话框，我想制作 JIT（及时），对我来说，这是迄今为止最优雅的工作方式，但我已经花了大约 2 天的时间来解决这个错误，但我一辈子都做不到想办法。

我知道它应该可以工作，因为角落里的 X 点击效果很好

所以。你能 a) 帮我解决这个问题还是 b) 告诉我如何将取消按钮绑定到 X 的点击事件（我以前在出现此类问题时使用过这个技巧，但是我在这个控件上没有 id可以找到，现在很明显的方式（我知道如何找到）使用 parents() 浏览层次结构。

```
 $(function() {
     var popUrl = 'pop.php?jscriptpopup=true';
     $("#button").click( function () { 
         JQueryDialog(popUrl); 
         return false;
     });        
 });

var dialog;  //<--added in desperation

function JQueryDialog(url){

    $("#dialog").remove();

    $("body").append("<div id='dialog'></div>"); 

    dialog = $("#dialog").dialog({
        resizable: false,
        draggable: false,
        width: 770,
        height: 470,
        context: that,
        modal: true,
        autoOpen: false,
        buttons: {
            "Cancel" : function (){
                $(dialog).("close");    //<--this will not work
                                    //$(this).dialog("close"); <<-- hopeless
                                    //$("#dialog").dialog("close"); <<-- hopeless
                                    //$("#dialog").remove(); <<-- hopeless
            }
        }
    });     

    $.get(url, function(data) {
        $("#dialog").html(data);
        $("#dialog").dialog('open');        
    });     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:49:40.297

在这样做到死之后，我发布的那一刻我在几秒钟内偶然发现了它 - 通常是这样

这有效..不知道为什么

```
function JQueryDialog(url){

    $("#dialog").remove();

    $("body").append("<div id='dialog'></div>"); 

    that = $("#dialog");

    dialog = $("#dialog").dialog({
        resizable: false,
        draggable: false,
        width: 770,
        height: 470,
        context: that,
        modal: true,
        autoOpen: false,
        buttons: {
            "Cancel" : function (){
                that.dialog("close");
            }
        }
    });     

    $.get(url, function(data) {
        $("#dialog").html(data);
        $("#dialog").dialog('open');        
    });     
} 
```

# asp.net - 如何在iis中刷新缓存数据？

> ID：11102334
> 
> 赞同：1
> 
> 时间：2012-06-19T13:46:03.137
> 
> 标签：asp.net, iis, caching, browser

我有一个处于开发阶段的网站。我每周在服务器上部署它。但是缓存数据对我来说是一个大问题。例如，部署后，Default.aspx 页面仍然保持不变。所以css，js或其他文件..我怎样才能解决这个问题？我检查了 iis 配置，在 HTTP 响应标头或缓存菜单下没有任何记录或检查选项。

编辑：在 web.config 文件中：

```
<staticContent>
    <clientCache cacheControlMode="DisableCache" />
</staticContent>
<caching enabled="true" enableKernelCache="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:17:06.060

一种可能性是您需要回收应用程序池以确保没有任何内容保留在内存中。

# android - 您可以同时进行两个活动吗？

> ID：11102337
> 
> 赞同：5
> 
> 时间：2012-06-19T13:46:12.860
> 
> 标签：android, android-activity, runnable

我所拥有的是一个更严重的活动，以及另一个具有不同信息的活动。但是，当我打开非服务器活动时，服务器会关闭。有没有办法让我停下来？如果您需要查看任何代码，我很乐意展示它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T13:48:18.577

您不能同时运行多个活动。如果您希望代码在后台运行，您需要使用`Service`. 有关更多信息，请查看文档：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

您应该将您的服务器编程为一个`Service`，然后编写一个`Activity`与服务器通信并显示相关信息的。这样，当您导航到新`Activity`服务器时，服务器将继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:49:37.340

> 你可以同时运行两个活动吗

不是你所期待的。在 Android 活动中，活动存储在堆栈中，只有堆栈顶部的活动显示在屏幕上。虽然不在顶部的其他活动不一定一直“死”，但它们还不够活跃，无法为您完成这项工作。

你应该把你的服务器变成一个服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-15T08:51:09.750

您可以尝试多窗口，也许不是您的预期： [https ://developer.android.com/guide/topics/ui/multi-window](https://developer.android.com/guide/topics/ui/multi-window)

# symfony - Symfony2：在树枝过滤器扩展中使用翻译器

> ID：11102344
> 
> 赞同：4
> 
> 时间：2012-06-19T13:46:31.213
> 
> 标签：symfony, filter, translation

我正在尝试在这样的自定义树枝过滤器中使用翻译

```
public function formatTime($timestamp)
{
    $str = date('j %\m%',$timestamp);
    $str = str_replace($str, '%m%', $this->get('translator')->trans('month'.date('m', $timestamp) ) );
    return $str;
} 
```

offcourse get 是未知功能。我应该让我的扩展了解环境还是简单地请求翻译类以使其可用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T13:59:53.387

您可以将`translator`服务注入您的课程：

```
<service id="acme.extension" class="Acme\Twig\Extensions\FormatterExtension">
    <tag name="twig.extension"/>
    <argument type="service" id="translator"/>
</service> 
```

然后将翻译器的实例存储在受保护的字段中并稍后使用：

```
public function formatTime($timestamp)
{
    $str = date('j %\m%',$timestamp);
    $str = str_replace($str, '%m%', $this->translator->trans('month'.date('m', $timestamp) ) );
    return $str;
} 
```

**UPD1：** YAML 服务定义的配置：

```
acme.extension:
    class: Acme\Twig\Extensions\FormatterExtension
    arguments: [@translator]
    tags:
        - name: twig.extension 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:59:51.990

我会使用服务容器将您的类定义为服务。然后，您可以将翻译服务作为参数传入，如下所示：

在 services.yml 中：

```
services:
    your.class.identification.key:
       class: \your\class\name
       arguments: [@translator] 
```

之后，翻译器将通过您上面提供的代码提供。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-01T13:02:53.313

只是为了更新@Alexander 的答案。别忘了放

```
private $translator;
public function __construct(TranslatorInterface $translator) {
   $this->translator = $translator;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:26:44.353

在控制器层内部`$this->get()`调用翻译服务的 get 方法。

为了模仿这种行为，您可以设置依赖注入并将依赖容器注入到您的构造函数中。完成此操作后，您可以使用以下内容获取翻译器：`$this->container->get('translator')`.

# c# - 是否有 .Net4 BackgroundCopyManager.dll？

> ID：11102346
> 
> 赞同：3
> 
> 时间：2012-06-19T13:46:32.010
> 
> 标签：c#, dll, .net-4.0, microsoft-bits, bits-service

我有想要升级到 .Net4 的项目，它使用 BackgroundCopyManager.dll。

任何人都知道我在哪里可以下载它的.Net4 版本？

谢谢

你可以在这里看到 BackgroundCopyManager.dll 清单：

```
// Metadata version: v2.0.50727
.assembly extern mscorlib
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .ver 2:0:0:0
}
.assembly BackgroundCopyManager
{
  .custom instance void [mscorlib]System.Runtime.InteropServices.TypeLibVersionAttribute::.ctor(int32,
                                                                                                int32) = ( 01 00 01 00 00 00 00 00 00 00 00 00 ) 
  .custom instance void [mscorlib]System.Runtime.InteropServices.GuidAttribute::.ctor(string) = ( 01 00 24 31 64 65 65 62 37 34 66 2D 37 39 31 35   // ..$1deeb74f-7915
                                                                                                  2D 34 35 36 30 2D 62 35 35 38 2D 39 31 38 63 38   // -4560-b558-918c8
                                                                                                  33 66 31 37 36 61 36 00 00 )                      // 3f176a6..
  .custom instance void [mscorlib]System.Runtime.InteropServices.ImportedFromTypeLibAttribute::.ctor(string) = ( 01 00 15 42 61 63 6B 67 72 6F 75 6E 64 43 6F 70   // ...BackgroundCop
                                                                                                                 79 4D 61 6E 61 67 65 72 00 00 )                   // yManager..
  .hash algorithm 0x00008004
  .ver 1:0:0:0
}
.module BackgroundCopyManager.dll
// MVID: {328E2CCE-D921-47C0-8344-CEF41B018FDF}
.imagebase 0x00400000
.file alignment 0x00000200
.stackreserve 0x00100000
.subsystem 0x0003       // WINDOWS_CUI
.corflags 0x00000001    //  ILONLY
// Image base: 0x004F0000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:08:11.697

您从哪里获得类型库不是很清楚，它不是作为 Windows 的一部分提供的。你可以创建一个。从 Visual Studio 2010 命令提示符执行此操作，这样您将获得与 .NET 4 兼容的程序集。导航到您的项目目录并执行以下命令：

```
midl.exe "c:\program files (x86)\microsoft sdks\windows\v7.0a\include\bits.idl" /tlb BackgroundCopyManager.tlb
tlbimp.exe BackgroundCopyManager.tlb 
```

您现在将拥有一个互操作程序集 BackgroundCopyManager.dll，您可以使用 Project + Add Reference, Browse 选项卡将其添加到您的项目中。将 dll 检查到源代码管理中，这样您就不必重复这些步骤。如果有的话，它不会在很长一段时间内改变。

请在错误数据库中记录如何重新创建程序集，大概这是上次完成并忘记了。那个会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-08T02:04:10.773

有一个新的[docs.microsoft.com页面讨论了使用 BITS 和 C#，以及](https://docs.microsoft.com/en-us/windows/desktop/Bits/bits-dot-net)[GitHub 上](https://github.com/microsoft/bits-manager)的一个全新的 c#/WPF 示例。这些演示了使用 BITS 和 C#/.NET 的一种方法

# c# - 使用不同的界面使用 Web 服务

> ID：11102353
> 
> 赞同：9
> 
> 时间：2012-06-19T13:46:58.057
> 
> 标签：c#, .net, wcf, web-services

我有一个 wsdl 文件，它以一种非常无用的方式构建。它很大，在某些情况下有几兆字节，当我使用各种 Visual Studio 工具从中生成包装器时，生成的代码库非常大，以至于它往往会在较弱的机器上使 Visual Studio 崩溃。编译时间很可笑，并且生成的类使用了绝对需要更动态的访问模式的属性（即某种索引器）。服务器端没有任何更改的选项。

wsdl 文件比手工处理的要大得多，而且它们的数量是任意的。到目前为止，我采用的解决方案是对生成的自动生成的类使用反射或后期绑定。但是，由于我在这里处理的是一个*包装器*，它*包装*了基本上是 SOAP 消息客户端的东西，如果有另一种方法，那将是有意义的。

本质上，我想创建一个包装器，它公开一个更动态的界面，尤其是在涉及字段的地方。该任务并不完全简单，因此我正在寻找有关做什么的建议，以及各种类、可定制的代码生成器、WSDL 浏览器/解析器等，这将减少任务的耗时。我应该构建自己的 SOAP 客户端吗？我会以什么为依据？哪些 .NET 功能可以帮助我完成这项任务？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T22:33:51.967

您可以手工制作一个支持 WebService 上可用方法子集的接口，而无需生成服务引用。

您必须为包括 dto 和命名空间在内的方法创建正确的肥皂签名。这样做的缺点是您将被迫手动管理对服务的任何更改。

这是一个简单的示例，它显示了一个代理客户端，它`ISubsetInterface`通过与公开`IServiceInterface`. 为此，Name 属性必须与 IServiceInterface 协定的名称相匹配，在这种情况下默认为“IServiceInterface”，但您的实现可能需要对命名空间和操作进行操作。了解您需要操作什么的最简单方法是查看生成的 wsdl。

```
[TestFixture]
public class When_using_a_subset_of_a_WCF_interface
{
    [Test]
    public void Should_call_interesting_method()
    {
        var serviceHost = new ServiceHost(typeof(Service));

        serviceHost.AddServiceEndpoint( typeof(IServiceInterface), new BasicHttpBinding(), "http://localhost:8081/Service" );
        serviceHost.Description.Behaviors.Find<ServiceDebugBehavior>().IncludeExceptionDetailInFaults = true;

        serviceHost.Open();

        using( var channelFactory = new ChannelFactory<ISubsetInterface>( new BasicHttpBinding(), "http://localhost:8081/Service") )
        {
            var client = channelFactory.CreateChannel();

            client.InterestingMethod().Should().Be( "foo" );
        }

        serviceHost.Close();
    }

    [ServiceContract]
    interface IServiceInterface
    {
        [OperationContract]
        string InterestingMethod();
        [OperationContract]
        string UninterestingMethod();
    }

    [ServiceContract(Name = "IServiceInterface")]
    interface ISubsetInterface
    {
        [OperationContract]
        string InterestingMethod();
    }

    class Service : IServiceInterface
    {
        public string InterestingMethod() { return "foo"; }

        public string UninterestingMethod() { throw new NotImplementedException(); }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:04:42.043

我建议使用包含`DataContracts`.

然后使用[`ChannelFactory<T>`](http://msdn.microsoft.com/de-de/library/system.servicemodel.channelfactory.aspx)该类创建服务器接口的实例。然后，您可以在没有任何 WSDL 的情况下调用服务器。

# iphone - 应用程序在 7 分钟后无法正常工作？

> ID：11102355
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:00.117
> 
> 标签：iphone, ios, memory-leaks, crash

我正在开发 iPhone 应用程序。该应用程序在前 6 或 7 分钟内运行良好，但之后我的应用程序的某些功能不起作用。例如，我在我的应用程序中使用 NSTimer 使用时钟音效，它可以工作 6 或 7 分钟，然后它会自动静音和 Second EXp 这段代码，

```
 -(IBAction)retryagain
   {    
    PlistDemoViewController *sec=[[PlistDemoViewController alloc] initWithNibName:@"PlistDemoViewController" bundle:nil];
    [self presentModalViewController:sec animated:YES];
    [sec release];
    } 
```

此代码在 6 或 7 分钟之前运行良好。但在那之后它崩溃了，我的控制台看起来像这样。

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:
'Could not load NIB in bundle: 'NSBundle </Users/moon/Library/Application
Support/iPhone Simulator/4.1/Applications/B4AA89F7-E4C8-47D1-B50E-291236543EBF
/PlistDemo.app> (loaded)' with name 'PlistDemoViewController''

              *** Call stack at first throw:
(
0   CoreFoundation                      0x029cbb99 __exceptionPreprocess + 185
1   libobjc.A.dylib                     0x027c040e objc_exception_throw + 47
2   CoreFoundation                      0x02984238 +[NSException raise:format:arguments:] + 136
3   CoreFoundation                      0x029841aa +[NSException raise:format:] + 58
4   UIKit                               0x004c84f8 -[UINib instantiateWithOwner:options:] + 2024
5   UIKit                               0x004c9eb5 -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:] + 168
6   UIKit                               0x0037f95f -[UIViewController _loadViewFromNibNamed:bundle:] + 70
7   UIKit                               0x0037d675 -[UIViewController loadView] + 120
8   UIKit                               0x0037d54f -[UIViewController view] + 56
9   UIKit                               0x0037ede3 -[UIViewController viewControllerForRotation] + 36
10  UIKit                               0x0037b026 -[UIViewController _visibleView] + 90
11  UIKit                               0x006411d2 -[UIClientRotationContext initWithClient:toOrientation:duration:andWindow:] + 269
12  UIKit                               0x002f9d17 -[UIWindow _setRotatableClient:toOrientation:duration:force:] + 921
13  UIKit                               0x0056c67b -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 768
14  UIKit                               0x0038110d -[UIViewController presentModalViewController:withTransition:] + 2937
15  PlistDemo                           0x00002cd3 -[PlistDemoViewController retryagain] + 115
16  UIKit                               0x002d37f8 -[UIApplication sendAction:to:from:forEvent:] + 119
17  UIKit                               0x0035ede0 -[UIControl sendAction:to:forEvent:] + 67
18  UIKit                               0x00361262 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
19  UIKit                               0x0035fe0f -[UIControl touchesEnded:withEvent:] + 458
20  UIKit                               0x002f73d0 -[UIWindow _sendTouchesForEvent:] + 567
21  UIKit                               0x002d8cb4 -[UIApplication sendEvent:] + 447
22  UIKit                               0x002dd9bf _UIApplicationHandleEvent + 7672
23  GraphicsServices                    0x03516822 PurpleEventCallback + 1550
24  CoreFoundation                      0x029acff4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
25  CoreFoundation                      0x0290d807 __CFRunLoopDoSource1 + 215
26  CoreFoundation                      0x0290aa93 __CFRunLoopRun + 979
27  CoreFoundation                      0x0290a350 CFRunLoopRunSpecific + 208
28  CoreFoundation                      0x0290a271 CFRunLoopRunInMode + 97
29  GraphicsServices                    0x0351500c GSEventRunModal + 217
30  GraphicsServices                    0x035150d1 GSEventRun + 115
31  UIKit                               0x002e1af2 UIApplicationMain + 1160
32  PlistDemo                           0x00002a5e main + 84
33  PlistDemo                           0x00002a01 start + 53
34  ???                                 0x00000001 0x0 + 1
    )

terminate called after throwing an instance of 'NSException'
Program received signal:  “SIGABRT”.
Data Formatters unavailable (Error calling dlopen for: "/Developer/Applications    /Xcode.app/Contents/PlugIns/GDBMIDebugging.xcplugin/Contents/Resources/PBGDBIntrospectionSupport.A.dylib": "dlopen(/Developer/Applications/Xcode.app/Contents/PlugIns/GDBMIDebugging.xcplugin/Contents/Resources/PBGDBIntrospectionSupport.A.dylib, 10): no suitable image found.  Did find:
/Developer/Applications/Xcode.app/Contents/PlugIns/GDBMIDebugging.xcplugin/Contents/Resources/PBGDBIntrospectionSupport.A.dylib: open() failed with errno=24")
 (gdb) 
```

任何人都可以指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:50:45.457

编辑2：

你会尝试使用这段代码吗？

```
PlistDemoViewController *sec= [[PlistDemoViewController alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:sec animated:YES]; 
```

由于您的笔尖以您的控制器命名，因此应该这样做；我只希望，不要崩溃...

编辑：

如果您仔细阅读错误消息：

> '无法在包中加载NIB：'NSBundle（已加载）'，名称为'PlistDemoViewController

它说找不到 PlistDemoViewController。

你能检查名字拼写是否正确吗？

旧答案：

您正在`PlistDemoViewController` `retryagain`方法中呈现模态视图，但它失败了。我的建议是让您检查您传入的所有参数，并仔细检查您尝试显示的 xib 的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:00:56.403

您用来安排计时器的时间间隔是多少。

实际上以动画方式呈现视图控制器需要一些时间。

请在您的时间间隔上再增加 5 秒，或者在没有动画的情况下向您展示视图控制器。我认为这可以帮助你。

# asp.net-mvc-3 - 使用序列化视图结果的 mvc3 单元测试最佳实践

> ID：11102357
> 
> 赞同：1
> 
> 时间：2012-06-19T13:47:01.713
> 
> 标签：asp.net-mvc-3, testing, serialization, viewresult

我正在寻找对我的 MVC 3 控制器进行单元测试的最佳方法。我正在考虑在使用一堆不同的参数执行控制器操作时获取 viewresult 的结果，将其序列化并保存到文件作为未来测试的基础。

2个问题：

1.  这是一个坏主意吗？对于以前的应用程序，这似乎是检查更改是否破坏任何东西的最安全方法之一。我可以反序列化我存储的结果，进行任何必要的更改，然后与实时结果进行比较。
2.  如果它是一种很好的测试方式，我该如何序列化视图结果？在下面的代码中，我收到了 ActionResult 无法序列化的错误。

```
//create viewresult to return to view
ActionResult viewResult = View(dv);

//save viewresult for future unit test comparisons.
//Save data as name of controller action and param value used
string fileName = logDir + "\\" + controllerActionName + tradeDate.ToString("MMddyyyy") + ".viewresult";

//serialze and save to file
System.IO.Stream stream = System.IO.File.Open(fileName,System.IO.FileMode.Create);
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter bFormatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
bFormatter.Serialize(stream, viewResult);
stream.Close();

//send viewresult to mvc3 view
return viewResult; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:22:07.193

测试控制器操作的最简单方法是检查视图模型。您真的不需要将内容写到文件等中。

你可以做类似的事情

给定一个动作：

```
public ViewResult AddNewDocument(int documentFolderId)
    {
        var documentFolder = documentFolderRepository.Get(documentFolderId);

        return View("AddNewDocument",
                    new AddNewDocumentView { DocumentFolderId = documentFolder.Id, DocumentFolderName = documentFolder.Name });
    } 
```

编写一个单元测试（在 mspec 中，尽管 NUnit 或 MSTest 也是如此：

```
public class when_AddNewDocument_GET_is_requested : given_a_DocumentController
{
    Because of = () => result = documentController.AddNewDocument(documentFolderId);

    It should_return_a_view_result_with_the_view_name_AddDocument = () => result.ViewName.ShouldEqual("AddNewDocument");

    It should_have_a_view_model_of_type_AddNewDocumentView = () => result.ViewData.Model.ShouldBeOfType<AddNewDocumentView>();
    It should_have_return_document_folder_id_in_view_model = () => ((AddNewDocumentView)result.ViewData.Model).DocumentFolderId.ShouldEqual(documentFolderId);
    It should_have_return_document_folder_name_in_view_model = () => ((AddNewDocumentView)result.ViewData.Model).DocumentFolderName.ShouldEqual(documentFolderName);

    static ViewResult result;
} 
```

关键是您传递给视图的视图模型包含您需要测试的所有数据。这可以直接从 result.ViewData.Model 中获取。

# c# - 如何将数组传递到 SQL Server 存储过程

> ID：11102358
> 
> 赞同：338
> 
> 时间：2012-06-19T13:47:01.980
> 
> 标签：c#, sql-server, tsql, stored-procedures

如何将数组传递给 SQL Server 存储过程？

例如，我有一个员工列表。我想将此列表用作表格并将其与另一个表格连接。但是员工列表应该作为 C# 的参数传递。

* * *

## 回答 #1

> 赞同：485
> 
> 时间：2012-06-19T16:35:39.167

## SQL Server 2008（或更新版本）

首先，在您的数据库中，创建以下两个对象：

```
CREATE TYPE dbo.IDList
AS TABLE
(
  ID INT
);
GO

CREATE PROCEDURE dbo.DoSomethingWithEmployees
  @List AS dbo.IDList READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT ID FROM @List; 
END
GO 
```

现在在您的 C# 代码中：

```
// Obtain your list of ids to send, this is just an example call to a helper utility function
int[] employeeIds = GetEmployeeIds();

DataTable tvp = new DataTable();
tvp.Columns.Add(new DataColumn("ID", typeof(int)));

// populate DataTable from your List here
foreach(var id in employeeIds)
    tvp.Rows.Add(id);

using (conn)
{
    SqlCommand cmd = new SqlCommand("dbo.DoSomethingWithEmployees", conn);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter tvparam = cmd.Parameters.AddWithValue("@List", tvp);
    // these next lines are important to map the C# DataTable object to the correct SQL User Defined Type
    tvparam.SqlDbType = SqlDbType.Structured;
    tvparam.TypeName = "dbo.IDList";
    // execute query, consume results, etc. here
} 
```

## SQL 服务器 2005

如果您使用的是 SQL Server 2005，我仍然建议使用 XML 上的拆分函数。首先，创建一个函数：

```
CREATE FUNCTION dbo.SplitInts
(
   @List      VARCHAR(MAX),
   @Delimiter VARCHAR(255)
)
RETURNS TABLE
AS
  RETURN ( SELECT Item = CONVERT(INT, Item) FROM
      ( SELECT Item = x.i.value('(./text())[1]', 'varchar(max)')
        FROM ( SELECT [XML] = CONVERT(XML, '<i>'
        + REPLACE(@List, @Delimiter, '</i><i>') + '</i>').query('.')
          ) AS a CROSS APPLY [XML].nodes('i') AS x(i) ) AS y
      WHERE Item IS NOT NULL
  );
GO 
```

现在您的存储过程可以是：

```
CREATE PROCEDURE dbo.DoSomethingWithEmployees
  @List VARCHAR(MAX)
AS
BEGIN
  SET NOCOUNT ON;

  SELECT EmployeeID = Item FROM dbo.SplitInts(@List, ','); 
END
GO 
```

在您的 C# 代码中，您只需将列表传递为`'1,2,3,12'`...

* * *

我发现传递表值参数的方法简化了使用它的解决方案的可维护性，并且与包括 XML 和字符串拆分在内的其他实现相比，通常具有更高的性能。

输入是明确定义的（没有人必须猜测分隔符是逗号还是分号），并且我们不依赖于其他处理函数，这些函数在不检查存储过程的代码的情况下并不明显。

与涉及用户定义的 XML 模式而不是 UDT 的解决方案相比，这涉及相似数量的步骤，但根据我的经验，管理、维护和读取代码要简单得多。

> 在许多解决方案中，您可能只需要这些 UDT（用户定义类型）中的一个或几个，这些 UDT（用户定义的类型）可以重复用于许多存储过程。与这个例子一样，常见的要求是传递一个 ID 指针列表，函数名称描述了这些 Id 应该代表什么上下文，类型名称应该是通用的。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-12-02T15:16:24.850

根据我的经验，通过从employeeIDs 创建一个分隔的表达式，这个问题有一个棘手而好的解决方案。您应该只创建一个字符串表达式，例如`';123;434;365;'`in-which `123`，`434`并且`365`是一些employeeID。通过调用以下过程并将此表达式传递给它，您可以获取所需的记录。您可以轻松地将“另一个表”加入此查询。此解决方案适用于所有版本的 SQL Server。此外，与使用表变量或临时表相比，它是非常快速和优化的解决方案。

```
CREATE PROCEDURE dbo.DoSomethingOnSomeEmployees  @List AS varchar(max)
AS
BEGIN
  SELECT EmployeeID 
  FROM EmployeesTable
  -- inner join AnotherTable on ...
  where @List like '%;'+cast(employeeID as varchar(20))+';%'
END
GO 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-06-19T13:53:17.790

为您的存储过程使用表值参数。

当您从 C# 中传递它时，您将添加数据类型为 SqlDb.Structured 的参数。

见这里：http: [//msdn.microsoft.com/en-us/library/bb675163.aspx](http://msdn.microsoft.com/en-us/library/bb675163.aspx)

例子：

```
// Assumes connection is an open SqlConnection object.
using (connection)
{
// Create a DataTable with the modified rows.
DataTable addedCategories =
  CategoriesDataTable.GetChanges(DataRowState.Added);

// Configure the SqlCommand and SqlParameter.
SqlCommand insertCommand = new SqlCommand(
    "usp_InsertCategories", connection);
insertCommand.CommandType = CommandType.StoredProcedure;
SqlParameter tvpParam = insertCommand.Parameters.AddWithValue(
    "@tvpNewCategories", addedCategories);
tvpParam.SqlDbType = SqlDbType.Structured;

// Execute the command.
insertCommand.ExecuteNonQuery();
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-06-19T13:49:37.750

您需要将其作为 XML 参数传递。

**编辑：**我的项目中的快速代码给你一个想法：

```
CREATE PROCEDURE [dbo].[GetArrivalsReport]
    @DateTimeFrom AS DATETIME,
    @DateTimeTo AS DATETIME,
    @HostIds AS XML(xsdArrayOfULong)
AS
BEGIN
    DECLARE @hosts TABLE (HostId BIGINT)

    INSERT INTO @hosts
        SELECT arrayOfUlong.HostId.value('.','bigint') data
        FROM @HostIds.nodes('/arrayOfUlong/u') as arrayOfUlong(HostId) 
```

然后你可以使用临时表加入你的表。我们将 arrayOfUlong 定义为内置 XML 模式以维护数据完整性，但您不必这样做。我建议使用它，因此这里有一个快速代码，可确保您始终获得带有 long 的 XML。

```
IF NOT EXISTS (SELECT * FROM sys.xml_schema_collections WHERE name = 'xsdArrayOfULong')
BEGIN
    CREATE XML SCHEMA COLLECTION [dbo].[xsdArrayOfULong]
    AS N'<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="arrayOfUlong">
        <xs:complexType>
            <xs:sequence>
                <xs:element maxOccurs="unbounded"
                            name="u"
                            type="xs:unsignedLong" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema>';
END
GO 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-09-13T22:00:16.557

上下文总是很重要的，例如数组的*大小*和*复杂性。*对于中小型列表，此处发布的几个答案都很好，但应进行一些澄清：

*   对于拆分分隔列表，基于 SQLCLR 的拆分器是最快的。如果您想自己编写，周围有很多示例，或者您可以下载免费的 CLR 函数[SQL#](https://SQLsharp.com/)库（我编写的，但 String_Split 函数和许多其他函数是完全免费的）。
*   拆分基于 XML 的数组*可能*很快，但您需要使用基于属性的 XML，而不是基于元素的 XML（这是此处答案中显示的唯一类型，尽管@AaronBertrand 的 XML 示例是最好的，因为他的代码使用`text()`XML 函数。有关使用 XML 拆分列表的更多信息（即性能分析），请查看Phil Factor 的[“使用 XML 将列表作为 SQL Server 中的参数传递” 。](https://www.simple-talk.com/blogs/2012/01/05/using-xml-to-pass-lists-as-parameters-in-sql-server/)
*   使用 TVP 非常棒（假设您至少使用 SQL Server 2008 或更高版本），因为数据会流式传输到 proc 并显示为预解析和强类型的表变量。但是，在大多数情况下，将所有数据`DataTable`存储在内存中意味着复制内存中的数据，因为它是从原始集合中复制的。因此，使用`DataTable`传入 TVP 的方法不适用于较大的数据集（即不能很好地扩展）。
*   与简单的 Int 或 String 分隔列表不同，XML 可以处理多个一维数组，就像 TVP 一样。但也与`DataTable`TVP 方法一样，XML 不能很好地扩展，因为它需要将内存中的数据大小增加一倍以上，因为它需要额外考虑 XML 文档的开销。

综上所述，如果您使用的数据很大或不是很大但一直在增长，那么`IEnumerable`TVP 方法是最佳选择，因为它将数据流式传输到 SQL Server（如该`DataTable`方法），但不是需要在内存中复制任何集合（与任何其他方法不同）。我在这个答案中发布了一个 SQL 和 C# 代码示例：

[将字典传递给存储过程 T-SQL](https://stackoverflow.com/a/25815939/577765)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2020-01-28T20:20:25.487

正如上面其他人所指出的，一种方法是将数组转换为字符串，然后在 SQL Server 中拆分字符串。

从 SQL Server 2016 开始，有一种内置的方法来拆分字符串，称为

> STRING_SPLIT()

它返回一组可以插入到临时表（或真实表）中的行。

```
DECLARE @str varchar(200)
SET @str = "123;456;789;246;22;33;44;55;66"
SELECT value FROM STRING_SPLIT(@str, ';') 
```

会产生：

```
价值
-----
  123
  456
  789
  246
   22
   33
   44
   55
   66

```

如果你想变得更漂亮：

```
DECLARE @tt TABLE (
    thenumber int
)
DECLARE @str varchar(200)
SET @str = "123;456;789;246;22;33;44;55;66"

INSERT INTO @tt
SELECT value FROM STRING_SPLIT(@str, ';')

SELECT * FROM @tt
ORDER BY thenumber 
```

会给你与上面相同的结果（除了列名是“thenumber”），但已排序。您可以像使用任何其他表一样使用表变量，因此您可以根据需要轻松地将其与数据库中的其他表连接起来。

请注意，您的 SQL Server 安装必须为兼容级别 130 或更高，才能`STRING_SPLIT()`识别该功能。您可以使用以下查询检查您的兼容性级别：

```
SELECT compatibility_level
FROM sys.databases WHERE name = 'yourdatabasename'; 
```

大多数语言（包括 C#）都有一个“join”函数，可用于从数组创建字符串。

```
int[] myarray = {22, 33, 44};
string sqlparam = string.Join(";", myarray); 
```

然后你`sqlparam`作为你的参数传递给上面的存储过程。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-06-19T13:54:52.273

sql server 中不支持数组，但有几种方法可以将集合传递给存储的 proc。

1.  通过使用数据表
2.  通过使用 XML。尝试将您的集合转换为 xml 格式，然后将其作为输入传递给存储过程

以下链接可能对您有所帮助

[将集合传递给存储过程](http://vyaskn.tripod.com/passing_arrays_to_stored_procedures.htm)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-12-20T11:46:05.070

这将对您有所帮助。:) 按照接下来的步骤，

1.  打开查询编辑器

2.  复制粘贴下面的代码，它将创建将字符串转换为 Int 的函数

    ```
    CREATE FUNCTION dbo.SplitInts
    (
       @List      VARCHAR(MAX),
       @Delimiter VARCHAR(255)
    )
    RETURNS TABLE
    AS
      RETURN ( SELECT Item = CONVERT(INT, Item) FROM
          ( SELECT Item = x.i.value('(./text())[1]', 'varchar(max)')
            FROM ( SELECT [XML] = CONVERT(XML, '<i>'
            + REPLACE(@List, @Delimiter, '</i><i>') + '</i>').query('.')
              ) AS a CROSS APPLY [XML].nodes('i') AS x(i) ) AS y
          WHERE Item IS NOT NULL
      );
    GO 
    ```

3.  创建以下存储过程

    ```
     CREATE PROCEDURE dbo.sp_DeleteMultipleId
     @List VARCHAR(MAX)
     AS
     BEGIN
          SET NOCOUNT ON;
          DELETE FROM TableName WHERE Id IN( SELECT Id = Item FROM dbo.SplitInts(@List, ',')); 
     END
     GO 
    ```

4.  执行此 SP 使用`exec sp_DeleteId '1,2,3,12'`这是您要删除的 Id 字符串，

5.  您可以在 C# 中将数组转换为字符串并将其作为存储过程参数传递，如下所示，

    ```
    int[] intarray = { 1, 2, 3, 4, 5 };  
    string[] result = intarray.Select(x=>x.ToString()).ToArray(); 
    ```

    ```
    SqlCommand command = new SqlCommand();
    command.Connection = connection;
    command.CommandText = "sp_DeleteMultipleId";
    command.CommandType = CommandType.StoredProcedure;
    command.Parameters.Add("@Id",SqlDbType.VARCHAR).Value=result ; 
    ```

这将删除单个存储过程调用中的多行。祝一切顺利。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2014-07-17T16:34:16.907

我一直在搜索如何将任何数组传递给 sql server 而无需创建新的 Table 类型的所有示例和答案，直到我找到这个[链接](http://www.kodyaz.com/articles/t-sql-convert-split-delimeted-string-as-rows-using-xml.aspx)，下面是我如何将它应用到我的项目中：

--以下代码将获取一个数组作为参数并将该数组的值插入到另一个表中

```
Create Procedure Proc1 

@UserId int, //just an Id param
@s nvarchar(max)  //this is the array your going to pass from C# code to your Sproc

AS

    declare @xml xml

    set @xml = N'<root><r>' + replace(@s,',','</r><r>') + '</r></root>'

    Insert into UserRole (UserID,RoleID)
    select 
       @UserId [UserId], t.value('.','varchar(max)') as [RoleId]

    from @xml.nodes('//root/r') as a(t)
END 
```

希望你喜欢它

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-08-03T17:07:52.817

从 SQL Server 2016 开始，您可以简单地使用拆分字符串

例子：

```
WHERE (@LocationId IS NULL OR Id IN (SELECT items from Split_String(@LocationId, ','))) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-12-05T04:39:02.757

我花了很长时间才弄清楚这一点，所以以防万一有人需要...

这是基于 Aaron 回答中的 SQL 2005 方法，并使用他的 SplitInts 函数（我刚刚删除了 delim 参数，因为我将始终使用逗号）。我正在使用 SQL 2008，但我想要一些适用于类型化数据集（XSD、TableAdapters）的东西，并且我知道字符串参数适用于这些。

我试图让他的函数在“where in (1,2,3)”类型的子句中工作，并且没有运气直接的方式。所以我先创建了一个临时表，然后做了一个内部连接而不是“在哪里”。这是我的示例用法，就我而言，我想获取不包含某些成分的食谱列表：

```
CREATE PROCEDURE dbo.SOExample1
    (
    @excludeIngredientsString varchar(MAX) = ''
    )
AS
    /* Convert string to table of ints */
    DECLARE @excludeIngredients TABLE (ID int)
    insert into @excludeIngredients
    select ID = Item from dbo.SplitInts(@excludeIngredientsString)

    /* Select recipies that don't contain any ingredients in our excluded table */
   SELECT        r.Name, r.Slug
FROM            Recipes AS r LEFT OUTER JOIN
                         RecipeIngredients as ri inner join
                         @excludeIngredients as ei on ri.IngredientID = ei.ID
                         ON r.ID = ri.RecipeID
WHERE        (ri.RecipeID IS NULL) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-30T09:43:08.217

```
CREATE TYPE dumyTable
AS TABLE
(
  RateCodeId int,
  RateLowerRange int,
  RateHigherRange int,
  RateRangeValue int
);
GO
CREATE PROCEDURE spInsertRateRanges
  @dt AS dumyTable READONLY
AS
BEGIN
  SET NOCOUNT ON;

  INSERT  tblRateCodeRange(RateCodeId,RateLowerRange,RateHigherRange,RateRangeValue) 
  SELECT * 
  FROM @dt 
END 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-06-15T17:03:38.767

从 SQL Server 2016 开始，您可以将列表作为 NVARCHAR() 并使用 OPENJSON

```
DECLARE @EmployeeList nvarchar(500) = '[1,2,15]'

SELECT * 
FROM Employees
WHERE ID IN (SELECT VALUE FROM OPENJSON(@EmployeeList )) 
```

# image - 优化在 MATLAB 中给出不正确的图像

> ID：11102359
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:02.307
> 
> 标签：image, matlab, optimization, vectorization

我正在处理图像双（800x450x3），如果它符合某些条件，我想更改像素的值。然而，我第一次拥有的代码可以工作并给我一个很好的形象。当我尝试优化它时，当我在前一种情况下根本没有它们时，图像会得到非常奇怪的颜色（红色/紫色/蓝色等）。

首先我有代码：

```
diff = abs(double(rgbimage) - double(backgroundImage));
fusion = zeros(size(currentFrame));
 for i=1:size(backgroundImage,1)
    for j = 1:size(backgroundImage,2)

       if diff(i,j) > 20

        fusion(i,j, :) = double(rgbimage(i,j, :));

       else
         fusion(i,j, :) = 0;  

       end
    end 
 end 
```

我将其优化为：

```
 diff = abs(double(rgbimage) - double(backgroundImage));
    fusion = zeros(size(currentFrame));    
    indexes = diff > 20;
    fusion(indexes) = double(rgbimage(indexes)); 
```

...我只是在情节之后

```
 subplot(2,1,1), subimage(uint8(fusion));
    title('Fusion'); 
```

有什么区别，为什么会出现此错误？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:25:57.637

您的两种方法不同的原因是因为您在 for-loop 版本中仅使用差异图像的第一个“层”（我猜是红色组件？）。您的行`if diff(i,j) > 20`被解释为`if diff(i,j,1) > 20`. 如果第三个坐标未在查找中定义，则默认为`1`。

优化后的代码逐个元素地比较 3 维数据结构的所有元素。这就是为什么你会得到“奇怪”的颜色。因此，差异检查是在每个像素中局部进行的，并且不考虑颜色分量。

尝试使用您的优化版本执行此操作：

```
diff = abs(double(rgbimage) - double(backgroundImage));
fusion = zeros(size(currentFrame));
indexes = cat( ...
   3, ...
   diff(:,:,1) > 20, ...
   diff(:,:,1) > 20, ...
   diff(:,:,1) > 20 ...
);
fusion(indexes) = double(rgbimage(indexes)); 
```

这现在应该给出与 for 循环版本相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:56:59.170

1.  我建议不要手动使用减去图像，而是使用 imsubtract internal function 。（从另一个图像中减去一个图像或从图像中减去常数）。Z = imsubtract(X,Y) 从数组 X 中的对应元素中减去数组 Y 中的每个元素，并返回输出数组 Z 中对应元素的差值。X 和 Y 是具有相同大小和类的实数、非稀疏数值数组, 或 Y 是双标量。返回的数组 Z 与 X 具有相同的大小和类，除非 X 是逻辑的，在这种情况下 Z 是双精度数。

2.  并且不要手动将图像转换为双精度类型并使用 im2double 内部函数：I2 = im2double(I) 将强度图像 I 转换为双精度，必要时重新缩放数据。

3.  您也可以使用 find 函数， [row,col,v] = find(X, ...) 返回 X 中非零条目的列或行向量 v 以及行和列索引。如果 X 是逻辑表达式，则 v 是逻辑数组。输出 v 包含通过计算表达式 X 获得的逻辑数组的非零元素。

    [r,c,v]= find(diff>20);

# linux - 从 bash 脚本中的行号开始读取行

> ID：11102360
> 
> 赞同：12
> 
> 时间：2012-06-19T13:47:06.457
> 
> 标签：linux, bash, sed, grep

我正在尝试从 bash 中的特定行开始逐行读取文件。我已经使用 while 命令通过增加计数来读取文件的每一行。我可以让它从特定的行开始吗？

```
let count=0
declare -a ARRAY

while read LINE; do
ARRAY[$count]=$LINE 
vech=${ARRAY[$count]}
    if [...blah ..]
     then
    ...blah..
    fi 
sleep 2 
((count++)) 
done < filec.c 
```

欢迎任何形式的建议或算法帮助。

*编辑：我正在尝试将行号作为变量传递。我正在寻找特定模式，如果找到，应该从模式开始传递行号。*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-19T15:22:46.457

我会使用`sed`'s[地址](http://www.gnu.org/software/sed/manual/sed.html#Addresses)从特定行号开始并打印到文件末尾：

```
lineNumber=10
sed -n "$lineNumber"',$p' |
while read line; do
  # do stuff
done 
```

要么，或者按照弗雷德里克的建议，使用`awk`：

```
lineNumber=10
awk "NR > $lineNumber" |
while read line; do
  # do stuff
done 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T14:34:34.353

这样的事情呢？

```
while read -r line
do
    echo "$line"
done < <(tail -n +number file.name) 
```

它与 POSIX 不兼容，但请尝试使用您的 Bash。当然，在 while 循环中使用 $line 做你想做的事。
PS：用你想要的数字行更改数字，用文件名更改文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T13:58:56.107

许多方法中的一些：http: [//mywiki.wooledge.org/BashFAQ/011](http://mywiki.wooledge.org/BashFAQ/011)

亲自：

```
printf '%s\n' {1..6} | { mapfile -ts 3 x; declare -p x; } 
```

另外，不要使用全部大写的变量名。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T14:11:12.437

只保留一个柜台。要打印某一行之后的所有行，您可以这样做：

```
#!/bin/bash

cnt=0
while read LINE
do
    if [ "$cnt" -gt 5 ];
    then
        echo $LINE
    fi
    cnt=$((cnt+1))
done < lines.txt 
```

或者，为什么不使用 awk：

```
awk 'NR>5' lines.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T20:21:44.147

只需阅读一定数量的行，直到你想要的数量，然后开始你的逻辑来阅读其余的。

没有办法节省“文本”文件，你不能在不实际阅读的情况下跳过行。这些行由 0x0a 分隔并且长度可变。因此，必须扫描和计数每个分隔符以达到某个“行号”。有些噱头让您认为您没有阅读它们，但您确实阅读了它们。

# android - 如何在底部显示相对布局？

> ID：11102363
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:13.407
> 
> 标签：android, layout

我创建了一个线性布局，并添加了两个相对布局。我希望在顶部显示一个布局，在底部显示另一个布局。我的问题是布局显示在顶部。如何更改 1layout 顶部另一个是底部请帮助我。

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:background="@drawable/blue"
    android:orientation="horizontal" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="settings"
            android:textColor="@color/white"
            android:textSize="20sp" />

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="image" />

    </RelativeLayout>

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true" 
        android:layout_gravity="bottom"
        >

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Return" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:56:27.043

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:background="@drawable/blue"

   >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:orientation="horizontal" 

        >

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="settings"
            android:textColor="@color/white"
            android:textSize="20sp" 
            android:layout_centerInParent="true"/>

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="image" 
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"/>

    </RelativeLayout>

     <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true" 
        android:layout_gravity="bottom"
        >

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Return" />
    </LinearLayout>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/133e42fb4eccbd529b29900c5f382956.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:55:14.733

只需更改您的`LinearLayout`with `RelativeLayout`，然后创建两个内部相对布局，一组 with`android:layout_alignParentTop="true"`和第二个 with `android:layout_alignParentBottom="true"`，然后它将按照您的意愿工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:50:33.363

尝试使用相对布局的 Parentallayout。请参阅下面的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:background="@drawable/blue"
    android:orientation="horizontal" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="55px"
        android:layout_alignParentTop="true" 
        android:background="@drawable/testheader"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="settings"
            android:textColor="@color/white"
            android:textSize="20sp" />

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="image" />

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true" 
        android:layout_gravity="bottom"
        >

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Return" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:50:49.197

将您的 linearLayout 方向更改为`vertical`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:background="@drawable/blue"
    android:orientation="vertical" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:53:54.843

父布局应该是一个 RelativeLayout ，所以你可以像这样在顶部和底部放置其他布局：

```
 <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:alignParentTop ="true" >

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="settings"
            android:textColor="@color/white"
            android:textSize="20sp" />

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="image" />

    </RelativeLayout>

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="55px"
        android:background="@drawable/testheader"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true" 
        android:layout_gravity="bottom"
        >

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Return" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T13:54:51.813

![在此处输入图像描述](../Images/3c0874a73deb7586187d3cd4caacf6de.png)

```
<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="#F0F" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="90dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout>

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:background="#F0F" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Button" />
</RelativeLayout> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-19T13:52:50.893

在线性布局中，将方向更改为垂直。

# .net - RichTextBox 点击选择下面的行

> ID：11102369
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:31.857
> 
> 标签：.net, select, click, richtextbox

如何选择我单击的行下方的行？到目前为止，我有这个[如何通过鼠标单击在 RichTextBox 中选择一行？](https://stackoverflow.com/questions/10746121/richtextbox-select-line-on-click) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:12:56.807

```
private void richTextBox1_MouseClick(object sender, MouseEventArgs e)
{
   SendKeys.Send("{DOWN}");//Move cursor to next line
   SendKeys.Send("{HOME}+{END}");//Select the line
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:27:33.160

这个答案是您的第二个问题，即：如何将此选择分配给变量？:| 我需要将选定的行分配给 X，将下面的行分配给 Y。

```
 private void richTextBox1_MouseClick(object sender, MouseEventArgs e)
    {
        RichTextBox richTextBox = ((RichTextBox)sender);

        SendKeys.Send("{HOME}+{END}");
        SendKeys.Flush();

        string X = richTextBox.SelectedText;

        SendKeys.Send("{DOWN}");
        SendKeys.Send("{HOME}+{END}");
        SendKeys.Flush();

        string Y = richTextBox.SelectedText;
    } 
```

# objective-c - 验证 OSX 绑定中的值

> ID：11102370
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:32.503
> 
> 标签：objective-c, cocoa, binding

我从苹果文档中读到，我可以使用该函数对 KVC 进行某种验证，`validate<Key>:error:`但我不明白如何为来自 IB 的值绑定调用此函数。

我已经`validateMyKey:error`在使用 xib 的控制器中添加了我在键上定义了绑定`myKey`但每当我从接口更改值时，都不会调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:59:33.873

我不知道这是否是您的问题中的错字，但应该是：

```
validateMyKey:error: 
```

带有小写的“e”。这符合正常的 Cocoa 命名惯例。

# ios - 无法在 ios 应用程序中解析 xml

> ID：11102373
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:47:41.583
> 
> 标签：ios, xml, parsing

任何人都可以帮助我如何解析这些数据。由于我是解析新手，请任何人帮助我。

```
 <?xml version="1.0" encoding="UTF-8"?>
  <Tricon Type="Login">
          <Result>Invalid_Email_Password</Result>
   </Tricon> 
```

我的解析器代码是

```
 #import "ResponseXmlParser.h"

  @implementation ResponseXmlParser
  @synthesize myParser;

 -(void)parserDidStartDocument:(NSXMLParser *)parser
 {
        printf("\n This is in parserDidStartDocument");
        response = @"";
        type = @"";
 } 
```

ParseXMLFileWithData 方法

```
 -(void)parseXMLFileWithData:(NSData*)data
 {
        isRootNode = NO;
        isResponse=NO;

            myParser = [[NSXMLParser alloc] initWithData:data];
        [myParser setDelegate:self];
        [myParser setShouldProcessNamespaces:NO];
        [myParser setShouldReportNamespacePrefixes:NO];
        [myParser setShouldResolveExternalEntities:NO];
        [myParser parse];
        [myParser release];
  } 
```

didStartElement 方法

```
 - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:       (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
   {
         printf("\n This is in didStartElement");
             if (qName)
            {
                    elementName = qName;
             }
             if([elementName isEqualToString:@"Tricon"])
         {
          printf("\n This is in didStartElement Tricon");
          if(responseObj != nil)
          {
             [responseObj release];
          }
          responseObj = [[Response alloc] init] ;
          isRootNode= YES;
          isResponse=NO;
          response=@"";
          type = @"";
          type=(NSString*)[attributeDict objectForKey:@"Type"];
     }
         if([elementName isEqualToString:@"Result"])
         {
         printf("\n This is in didStartElement Result");
         isResponse = YES;
         }
       } 
```

didEndElement 方法

```
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
       {  
         printf("\n This is in didEndElement Result");
         if (qName)
         {
         elementName = qName;
         }
         if([elementName isEqualToString:@"Result"])
         {
         printf("\n the element name is :%s",[elementName UTF8String]);
         printf("\n the element name is :%s",[response UTF8String]);

         [responseObj setResponse:response];
          printf("\n the element name is :%s",[responseObj.response UTF8String]);
          isResponse=NO;
         }
         if([elementName isEqualToString:@"Tricon"])
         {
            isRootNode = NO;
            responseObj.type = type;
            printf("\n The type is :%s\n",[responseObj.type UTF8String]);
         }
    } 
```

foundCharacters 方法

```
 - (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
       {    
        printf("\n This is in foundCharacters ");
        if(isRootNode == YES)
        {
         if(isResponse == YES  )
         {
        string = [string stringByReplacingOccurrencesOfString:@"\n" withString:@" "];
            string = [string stringByReplacingOccurrencesOfString:@"\t" withString:@" "];
            string = [string stringByReplacingOccurrencesOfString:@"           " withString:@" "];
            string = [string stringByReplacingOccurrencesOfString:@"         " withString:@" "];
            string = [string stringByReplacingOccurrencesOfString:@"      " withString:@"\n\n\t"];
            string = [string stringByReplacingOccurrencesOfString:@"<p>" withString:@""];
            string = [string stringByReplacingOccurrencesOfString:@"</p>" withString:@"\n"];
          }
          if(isResponse == YES)
           {
           response = [response stringByAppendingString:string];
           }

           }
          } 
```

parserDidEndDocument 方法 - (void)parserDidEndDocument:(NSXMLParser *)parser { printf("\n This is in parserDidEndDocument ");

```
 } 
```

我在这里返回对象

```
 -(Response*)getMessageFromResponseParser
         {
       printf("\n the response value is :%s\n",[responseObj.response UTF8String]);
        return responseObj;
         }

        -(void)dealloc
       {
     [responseObj release];
     [super dealloc];
        }

   @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:59:17.713

看起来您在解析器委托中做了很多额外的工作。您可能希望从一个干净、简洁的示例开始，如下所示：

[简单简洁的桌面 Cocoa NSXMLParser 示例？](https://stackoverflow.com/questions/7576593/simple-and-concise-desktop-cocoa-nsxmlparser-example)

并改变你所需要的

# javascript - if(){do{};while();} 是否与 while{} 完全一样

> ID：11102374
> 
> 赞同：6
> 
> 时间：2012-06-19T13:47:46.097
> 
> 标签：javascript, while-loop, do-while

是

```
if(a)
{
    do
    {
        b();
    }
    while(a);
} 
```

完全一样

```
while(a)
{
    b();
} 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:49:41.927

它们是相同的，我将提供一个示例，您可能实际上想要使用“Do-While”而不是 while 循环。

```
do{
    x = superMathClass.performComplicatedCalculation(3.14);
}
while (x < 1000); 
```

与

```
x = superMathClass.performComplicatedCalculation(3.14);
while ( x < 1000);
{
      x = superMathClass.performComplicatedCalculation(3.14);
} 
```

**使用 Do-While 的论据如上所示。**假设该行`x = superMathClass.performComplicatedCalculation(3.14);` 不只是一行代码，而是 25 行代码。如果您需要更改它，在执行过程中您只需更改一次。在 while 循环中，您必须更改它两次。

我确实同意休息时间，你应该避免他们，但也有对他们有利的论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:49:41.663

是的，它们是一样的。
您创建了一种非常难以理解的方式来`while`使用`do-while`loop +模拟循环`if`。

您应该阅读以下内容：
[测试循环在顶部还是底部？（同时与做同时）](https://stackoverflow.com/q/224059/601179)

> 如果您想在循环的第一次迭代之前测试条件，请使用**while**循环。
> 
> 如果您想在运行循环的第一次迭代后测试条件，请使用**do-while**循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:51:45.643

是的，它们是等价的。
如果`a`是`false`，`b`则根本不会执行。
如果`a`是`true`，`b`将执行直到`a`成为`false`。
这对于两种构造同样适用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-17T02:00:11.500

在这种情况下，这些结构几乎可以互换，但我认为 if do while 循环在某些情况下很有用，例如，如果某些变量需要在循环的所有迭代中保留，但如果循环从未执行则不需要. （并且假设它可能不是。）例如

```
 if (condition) {
            LargeComplexObject object = new LargeComplexObject();
            do {
                some action
                ...
                object.someMethod();
                ...
                more actions
            }
            while (condition);
        } 
```

如果该对象的初始化是时间或内存密集型的，这可能是一个有用的优化，并且预计此循环只会偶尔触发，并且会在相关方法的大多数执行中被跳过。当然，在其他情况下它也可能有用，基本上我认为如果在循环开始之前应该执行一些事情，那么应该使用 if-do-while，只有当你进入循环时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T13:49:40.133

**是**的，但你应该更喜欢后者。

# android - 在eclipse中制作android图标的透明背景

> ID：11102377
> 
> 赞同：6
> 
> 时间：2012-06-19T13:47:50.493
> 
> 标签：android, user-interface, icons, imageview, transparent

如何使用 eclipse 制作具有透明背景的 android 图标。我知道我们可以通过 eclipse->new->other->android 图标集制作图标，但是如何使它们具有透明背景？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:15:52.737

如果您的图标是透明背景，并且您希望在使用 Android Eclipse 创建新图标时保留它，则单击“无形状”即可。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T13:59:08.150

Eclipse 不是图像编辑程序。如果它内置了一些基本功能，我不建议将它用于设计。如果您有 Photoshop，或者可以下载 GIMP，请使用它们来进行图标设计。

此外，请务必将它们保存为 PNG 而不是 JPG，因为 JPG 不支持透明度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T14:03:33.880

实际创建图像后，可以使用将背景设置为透明

```
@android:color/transparent 
```

# visual-studio-2012 - VS 2012 私有 NuGet 服务器

> ID：11102378
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:50.993
> 
> 标签：visual-studio-2012, nuget-server

我按照 NuGet 网站 ( [http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds) ) 中关于如何创建 NuGet 服务器的说明进行操作。

我部署了网站并显示了主页，但是当我单击 Packages 链接时，我得到了

> 无法加载文件或程序集“Elmah”或其依赖项之一。该系统找不到指定的文件。

我对 web.config 所做的唯一更改是删除了一个额外的编译标签（它在文件中放置了 4.5 和 4.0 的标签）并添加了一个 API 密钥。

我正在使用 .net 4.5 的 VS 2012 RC。注意：我在 VS 2010 中尝试了完全相同的东西并且它有效，所以这个过程可能还没有为 VS 2012 准备好？还是我必须手动做一些事情才能让它工作。

谢谢。

# ruby-on-rails - 如何从查询字符串中删除空白值参数

> ID：11102379
> 
> 赞同：9
> 
> 时间：2012-06-19T13:47:56.423
> 
> 标签：ruby-on-rails, ruby, query-string, querystringparameter

我有一个搜索表单，有很多选项，提交到带有获取请求的路线。网址是这样的：

```
http://localhost:3000/restaurants/search?utf8=%E2%9C%93&city=&cuisine=&number_of_people=&query=hello 
```

有更多的参数。我想让它更干净，比如删除所有空白的参数。

像这样：（基本上删除所有空白的参数）

```
http://localhost:3000/restaurants/search?query=hello 
```

**这个怎么做？**

一种方法可以使用

```
CGI::parse("foo=bar&bar=foo&hello=hi") 
```

给你

```
{"foo"=>["bar"], "hello"=>["hi"], "bar"=>["foo"]} 
```

首先在中间动作和中间动作中重定向用户，检查哪些参数为空白并删除它们，然后最终将他重定向到实际的搜索动作。但这听起来很蹩脚的事情。我怎样才能以更好的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-05T03:09:42.773

在您的控制器方法中，调用`remove_empty_query_params`

然后作为私有方法：

```
 def remove_empty_query_params
    # Rewrites /projects?q=&status=failing to /projects?status=failing
    require 'addressable/uri'
    original = request.original_url
    parsed = Addressable::URI.parse(original)
    return unless parsed.query_values.present?
    queries_with_values = parsed.query_values.reject { |_k, v| v.blank? }
    if queries_with_values.blank?
      parsed.omit!(:query)
    else parsed.query_values = queries_with_values
    end
    redirect_to parsed.to_s unless parsed.to_s == original
  end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-04T22:07:46.833

我的解决方案是禁用空白输入并选择：

```
$('form').submit (e) ->
  $(@).find('select,input').map( (i, e) -> e.disabled = !$(e).val() ) 
```

关于删除`utf8`我发现[了这个](https://stackoverflow.com/q/4487796/1197775)。所以我最好继续发送它。

在使用 redirect_to 时，在服务器上执行所有这些操作会导致额外的请求，因此我更喜欢使用客户端代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:00:35.723

只是用普通的红宝石......

```
require 'uri'
a = "http://localhost:8080/path/search?foo=&bar=&baz=2&bat=thing"
u = URI.parse(a)
params = u.query.split("&").select {|param| param =~ /=./}.join("&")
# Returns "baz=2&bat=thing" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:11:39.293

我建议，如果只是看普通的旧红宝石，一个简单的 gsub 可能就足够了：

```
url.gsub(/[^\?&=]+=(?:&|$)/, '') 
```

注意：这可能会在末尾留下一个＆符号，可以用

```
url.chomp('&') 
```

# jquery - 在选择时关闭 JQuery DropdownChecklist

> ID：11102380
> 
> 赞同：0
> 
> 时间：2012-06-19T13:47:59.250
> 
> 标签：jquery, jquery-plugins

我正在使用此处提供的 JQuery DropdownChecklist：

[http://code.google.com/p/dropdown-check-list/](http://code.google.com/p/dropdown-check-list/)

基本上我使用一些 javascript 来创建 DropDownList，如下所示：

```
$("#broadbean_reg_jobSector").dropdownchecklist( 
     { emptyText: "Job Sector*" }
);
$("#broadbean_reg_jobSector").change(function() { 
      //Close Options Pop Up List  
}); 
```

真的是快速的问题。通常该列表是单选的，在这种情况下，我希望在选择新选项后关闭弹出选项列表。相反，它保持打开状态，直到您单击弹出选项的边界之外。

任何使用过此列表的人都会知道我的意思。我正在寻找一种在选择选项时关闭弹出窗口的方法。我听说`$("#broadbean_reg_jobSector").close()`应该做这项工作，但它对我没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:20:22.733

```
$('#s7').bind('change',function(){
    $(this).click();
    $('#ddcl-s7-ddw').css({left:'-33000px',top:'-33000px'});
}); 
```

如果您访问您发布的网站，`http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html` 然后将其输入您的控制台并转到示例，它会在您选择并像往常一样重新打开后关闭。元素是 S7，所以只需搜索它即可找到我正在谈论的元素。

# iscroll - 对于 iScroll，如何在 veiwport 中获取项目

> ID：11102381
> 
> 赞同：1
> 
> 时间：2012-06-19T13:48:02.557
> 
> 标签：iscroll

我有一个 iScroll 的 div 如下，我想在滚动时获取当前视口中的项目，我该怎么做？请帮助我，谢谢你。

```
<div id="wrapper">
  <ul>
    <li id='a'>A</li>
    <li id='b'>B</li>
    <li id='c'>C</li>
    <li id='d'>D</li>
    <li id='e'>E</li>
    <li id='f'>F</li>
    <li id='g'>G</li>
   </ul>
</div> 
```

# javascript - Google Analytics 如何导出 PDF？

> ID：11102382
> 
> 赞同：0
> 
> 时间：2012-06-19T13:48:03.057
> 
> 标签：javascript, google-analytics

有谁知道 Google Analytics 如何导出他们的 PDF？当您单击导出时，他们似乎没有回叫他们的服务器，这让我相信它已经在客户端完成了。但老实说，我不知道。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:50:03.430

他们确实调用了服务器：[https](https://www.google.com/analytics/web/exportReport?ef=PDF) ://www.google.com/analytics/web/exportReport?ef=PDF （POST 中的参数）

使用 Chrome 控制台的网络选项卡查看请求。

因此，由于我们没有 Google 代码，您无法获得有关他们如何执行此操作的更多信息（但有很多方法可以生成 PDF 服务器端，尤其是在 Google 最常用的语言 Java 中）。

# c - 标准标头/库中是否包含保护？

> ID：11102385
> 
> 赞同：0
> 
> 时间：2012-06-19T13:48:25.080
> 
> 标签：c, include-guards

事实上，如果我包含`stdlib.h`到我的程序的每个文件中并且我没有得到重新定义错误。所以，答案是肯定的。正确的？

我正在阅读`libxml2`源代码，`HTMLparser.c`其中有这一部分：

```
#include <string.h>
#ifdef HAVE_CTYPE_H
#include <ctype.h>
#endif
#ifdef HAVE_STDLIB_H
#include <stdlib.h>
#endif 
```

我的问题是：为什么`include guards`在这里使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:51:35.090

这些不包括警卫。如果系统中存在相应的标头，则设置这些宏。在配置过程中检测到。如果它们被无条件包含并且它们不存在，则编译将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:58:17.020

是的，系统标头中有包含防护。看看例如“string.h”：

```
/* Excerpt from GCC string.h */
/*
 *  ISO C99 Standard: 7.21 String handling  <string.h>
 */

#ifndef _STRING_H
#define _STRING_H   1 
```

定义为

```
HAVE_CTYPE_H
HAVE_STDLIB_H 
```

通常来自配置头文件，该头文件可以使用`./configure`检查头文件可用性的脚本生成。

# iis-7 - 如何在 WiX 中初始化 IIS Web 应用程序的物理路径凭据属性

> ID：11102389
> 
> 赞同：4
> 
> 时间：2012-06-19T13:48:30.897
> 
> 标签：iis-7, wix, wix3.5, wix-extension

*更新：可能是 IIS 或 MSI 版本依赖项*

问题出现在此配置上：

Windows Server 2008 R2 标准版 6.1（内部版本 7600）、IIS 7.5.7600.16385、MSI v5.0.7600.16385

在第二个配置中，相同的 MSI 工作得很好：

Vista Enterprise SP2、IIS 7.0.6000.16386、MSI v4.5.6002.18005

*原始问题：*

我已经为我正在处理的新项目创建了 WiX 安装程序包，并且在将 Web 应用程序正确注册到 IIS7 中存在一些未解决的问题。

问题是我的 Web 应用程序注册了不正确的物理路径凭据属性值（可以通过 IIS7 通过聚焦 Web 应用程序节点然后打开其高级设置对话框来访问此属性）。安装我的应用程序后，该值设置为用户名为“name”的“特定用户”。这样的用户在我的环境中当然不存在，这导致 Web 应用程序在尝试在浏览器中打开它时在 500.19 上失败。

因此，在安装应用程序后，我必须打开 IIS 并将物理路径凭据属性重置为“应用程序用户（传递身份验证）”，以强制 Web 应用程序使用应用程序池的身份访问其虚拟目录。该属性的此手动更改解决了问题..

有谁知道如何更改 WiX 行为，以便直接将物理路径凭据设置为“应用程序用户”，而无需手动修复该值？

这是我用于配置解决方案的 IIS 部分的片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
 xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension"
      xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">

  <Fragment>
    <!-- Install to default web site -->
    <iis:WebSite Id="DefaultWebSite" Description='Default Web Site'>
      <iis:WebAddress Id="AllUnassigned" Port="80" />
    </iis:WebSite>

    <DirectoryRef Id="WebSiteContentDir">
      <!-- Configuring app pool -->
      <Component Id="ApplicationPoolComponent" Guid="{MY-GUID}" KeyPath="yes">
        <util:User Id="ApplicationPoolUser" CreateUser="no"
               Domain="MYDOMAIN" Name="MYUSER"
               Password="MYPWD" />

        <iis:WebAppPool Id="ApplicationPool" Name="MyApp" Identity="other" User="ApplicationPoolUser"
                    ManagedPipelineMode="classic" ManagedRuntimeVersion="v4.0" />
      </Component>

      <!-- Configuring virtual dir -->
      <Component Id="VirtualDirComponent" Guid="{MY-GUID}" KeyPath="yes" >
        <iis:WebVirtualDir Id="VirtualDir" Alias="MyApp" Directory="WebSiteContentDir" WebSite="DefaultWebSite">
          <iis:WebDirProperties Id="VirtualDirProperties" WindowsAuthentication="yes" />
          <iis:WebApplication Id="WebApplication" Name="MyApp" WebAppPool="ApplicationPool" />
        </iis:WebVirtualDir>        
      </Component>

    </DirectoryRef>
  </Fragment>
</Wix> 
```

Ww 已经在其他项目上遇到过这个问题，并且总是使用一个 powershell 脚本来解决，该脚本修复了在安装过程中自动执行的属性值。我相信一定有办法让WiX按照要求的方式安装它，并希望找到答案。提前致谢。

# html - 如何使用户界面适应 OWL 本体

> ID：11102391
> 
> 赞同：1
> 
> 时间：2012-06-19T13:48:38.290
> 
> 标签：html, interface, semantics, ontology, owl

例如考虑本体描述一个家谱

我想在网络上以图形方式表示这一点。例如，“母亲”类将具有女性形象，而“父亲”类将具有男性形象。

诸如 childOf 之类的关系将由绿色箭头表示，而 parentOf 箭头将在相反方向但由红色箭头表示。

用户应该能够导航此图形模型呈现的树本体。

任何人都可以建议任何学习资源。有人建议我使用 HTML5，但我不确定如何去做。所以基本上，主要问题是如何以图形方式表示本体。

任何答案我将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:23:05.650

您是否尝试过使用图形可视化 - [http://graphviz.org/content/kennedyanc](http://graphviz.org/content/kennedyanc)，此示例与您的情况非常相似。你试图画的是一个有向无环图 - 谷歌搜索图书馆应该给你更多类似的工具 - 希望它没有必要自己写

# scala - 如何按字典顺序比较scala元组？

> ID：11102393
> 
> 赞同：18
> 
> 时间：2012-06-19T13:48:46.330
> 
> 标签：scala, tuples

给定两个相同元组的元组，我如何按字典顺序比较它们？看起来这应该像下面的代码片段一样简单，但事实并非如此。有什么简单的例子来说明如何做到这一点？

```
var x = (1,2,3) < (1,2,4) 
```

如果它们是列表，我可以定义一个递归函数来比较列表的头部，直到发现差异或列表结尾，但我认为我不能为元组做到这一点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T15:41:37.213

这并不简单，因为虽然

```
var x = (1,2,3) < (1,2) 
```

看起来很简单，

```
var x = (1,false,3) < (1,2) 
```

不是。你如何处理无序类型？您如何处理同一元组位置中的不同类型？

您是否要求所有类型都相同？在这种情况下，您没有元组。元组的全部意义在于它的数量是固定的（你静态地知道它有多大）并且每个元素可以是不同的类型。

如果我发现自己有这个问题——而且我会非常努力地不这样做——我会抓住 Shapeless，将元组转换为 HLists 之类的东西，然后尝试对此进行比较。

**编辑**

啊，现在容易多了：

```
import scala.math.Ordering.Implicits._
var x = (1,2,3) < (1,2,4) 
```

这些额外的隐式不是自动可用的，因为它们在某些情况下会导致不同的隐式。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-05T22:03:54.443

如果您想使用 Daniel 的解决方案，`<`但如果您需要一种`compare`方法，您可以执行以下操作（例如）。

```
implicitly[Ordering[Tuple2[Int, Int]]].compare((1,2), (2,3)) 
```

为具有可比部分的所有元组定义了排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T13:54:09.870

最简单的方法是在它们上定义一个隐式 Ordering[T]，但是你必须将此排序传递给排序函数（或任何其他想要比较它们的函数）。也可以隐式传递它。

另一种方法是，通过 < 运算符通过隐式转换扩展元组类：

```
implicit def compareTuple[T](lhs: (T,T)) = new {
   def <(rhs: (T,T)) = lhs._1<rhs._1 || (lhs._1==rhs._1 && lhs._2<rhs._2)
} 
```

**编辑：** 如果您也想拥有其他比较运算符，您可以通过从 Ordered[T] 继承来获得它们：

```
implicit def compareTuple[T](lhs: (T,T)) = new Ordered[(T,T)] {
   def compare(rhs: (T,T)) = ...
} 
```

**edit2：** 如果您还需要比较不同大小的元组，您可以使用在所有元组类中定义的 productIterator 函数（[请参阅文档](http://www.scala-lang.org/api/current/scala/Tuple2.html)）并允许您获取元组上的迭代器。通过这种方式，您可以像使用列表一样编写函数。

**编辑3：** 这将是这样的：

```
implicit def compareTuple[T <: Product](lhs: T) = new Ordered[T] {
    def compare[U <: Product](rhs: U) = {
        def compare(lhs: Any, rhs: Any) = ...
        def iteratorCompare(lhs: Iterator[Any], rhs: Iterator[Any]):Int = 
            if(!lhs.hasNext)
                if(!rhs.hasNext)
                    0
                else
                    -1
            else if(!rhs.hasNext)
                1
            else
                compare(lhs.next,rhs.next)
        iteratorCompare(lhs.productIterator,rhs.productIterator)
    }
} 
```

但是使用这种方法，您必须注意类型。因为该函数不知道元组元素的类型（它们在同一个元组中可以不同），所以它只能为您提供一个 Iterator[Any]。所以你必须定义一个 compare(Any,Any) 函数来处理你想要的。

# c# - 在 System.Timers.Timer 事件中调用 UdpClient.Send() 不起作用

> ID：11102397
> 
> 赞同：0
> 
> 时间：2012-06-19T13:48:52.177
> 
> 标签：c#, sockets, timer, udpclient

在我的应用程序中，我收到一个 UDP 流，并将其转发到另外两个 UDP 端点。我的问题是我需要在两个流之间设置延迟，所以我想使用 Timer。这是我的代码（我只显示相关方法）：

```
public void Start()
{      
  Socket udpSocket = m_udpLocalClient.Client;

  udpSocket.ReceiveBufferSize = BUFFER_SIZE;

  // Enable broadcast
  udpSocket.SetSocketOption(SocketOptionLevel.Socket,
                            SocketOptionName.Broadcast,
                            1);
  // Enable reusing address
  udpSocket.SetSocketOption(SocketOptionLevel.Socket,
                            SocketOptionName.ReuseAddress,
                            true);

  // Bind the socket to the local endpoint and listen for incoming connections.
  udpSocket.Bind(new IPEndPoint(IPAddress.Any, m_ListenPort));

  m_udpLocalClient.JoinMulticastGroup(IPAddress.Parse(m_ListenIP));

  udpSocket.BeginReceiveFrom(m_data,
                             0,
                             m_data.Length,
                             SocketFlags.None,
                             ref m_ListenEndPoint,
                             new AsyncCallback(ReceiveData), 
                             m_udpLocalClient);
}

public void TimerCallback(object sender, ElapsedEventArgs e)
{
  byte[] Data = new byte[m_BytesReceived];

  m_Timer.Stop();

  m_Mutex.WaitOne();
  m_Buffer.Get(Data);
  m_Mutex.ReleaseMutex();

  //Send Packets lo LocalHost EndPoint
  m_udpLocalClient.Send(Data, Data.Length, m_LocalEndPoint);

}    

void ReceiveData(IAsyncResult iar)
{
  int recv = 0;

  try
  {
    UdpClient udpReceiver = (UdpClient)iar.AsyncState;

    recv = udpReceiver.Client.EndReceiveFrom(iar, ref m_ListenEndPoint);
    if (recv == 0)  return;

    //Forward packets on the FwEndpoint
    m_udpFwClient.Send(m_data, recv, m_FwEndPoint);

    //Send Packets lo LocalHost EndPoint
    //m_udpLocalClient.Send(m_data, recv, m_LocalEndPoint);

    m_Mutex.WaitOne();
    m_Buffer.Put(m_data);
    m_Mutex.ReleaseMutex();

    if (!m_Timer.Enabled) m_Timer.Start();

    udpReceiver.Client.BeginReceiveFrom(m_data, 
                                        0,
                                        m_data.Length, 
                                        SocketFlags.None,
                                        ref m_ListenEndPoint,
                                        new AsyncCallback(ReceiveData),
                                        udpReceiver);
  }
  catch (Exception e)
  {
     //...handle....
  }

} 
```

笔记。m_Buffer 成员是[CodePlex](http://circularbuffer.codeplex.com/)的 CircularBuffer 。

这里的问题是调用

```
m_udpLocalClient.Send(Data, Data.Length, m_LocalEndPoint); 
```

进入 TimerCallBack 似乎没有效果，而如果我在 ReceiveData 中取消注释同一个，它可以工作。

我也尝试使用异步方法 BeginSend() 但没有成功。我哪里错了？

问候，
丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:27:41.007

我在想，因为您在收到一些数据后会立即返回 Receive 状态，所以不允许您在计时器回调中使用同一个套接字发送数据。在计时器执行时，您已经告诉套接字等待更多数据进入。

您需要使用不同的套接字/UdpClient 在计时器回调中发送数据。

# c# - 在 C# 中将基类转换为子类

> ID：11102402
> 
> 赞同：2
> 
> 时间：2012-06-19T13:49:00.633
> 
> 标签：c#, asp.net-mvc-3

我对 OOP 和 C# 真的很陌生，我试图理解，我如何才能尽可能地编写我的代码。在我的 ASP.NET MVC 3 应用程序中，我在一个控制器中有多个操作（在此示例代码中为两个），它们都返回一个不同的`ViewModel`，它们都继承了相同的`BaseViewModel`. 这是因为我在每个动作上都需要相同的数据，但每个动作都有额外的属性。

我知道我可以简单地创建一个`ActionOneViewModel`接收`ViewModel`对象的构造函数。但这是常见的方法吗？或者有其他选择吗？

**查看型号：**

```
class BaseViewModel 
{
    public string Name { get; set; }
    public List<User> Users { get; set; }
}

class ActionOneViewModel : BaseViewModel 
{
    public bool FooBar { get; set; }
}

class ActionTwoViewModel : BaseViewModel 
{
    public string PingPong { get; set; }
} 
```

**控制器动作：**

```
public ActionResult ActionOne () 
{
    // this doesn't work (of course)
    ActionOneViewModel model = (ActionOneViewModel)createViewModel();
    model.FooBar = true;

    return View(model);
}

public ActionResult ActionTwo () 
{
    // this doesn't work (of course)
    ActionTwoViewModel model = (ActionTwoViewModel)createViewModel();
    model.PingPong = "blub";

    return View(model);
}

private BaseViewModel createViewModel()
{
    BaseViewModel model = new BaseViewModel();

    //
    // doing a lot of stuff here
    //

    return model;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:52:48.763

怎么样：

```
ActionTwoViewModel model = new ActionTwoViewModel();
model = createViewModel(model);

private BaseViewModel createViewModel(BaseViewModel model)
{
    //
    // doing a lot of stuff here
    //

    return model;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:55:17.747

您可以在方法或构造函数中执行此操作

有了那个，不需要特殊的“createViewModel”方法。

```
class BaseViewModel 
{
    public BaseViewModel() {
     //stuff here
     }
    public string Name { get; set; }
    public List<User> Users { get; set; }
}

class ActionOneViewModel : BaseViewModel 
{
    public ActionOneViewModel (bool fooBar) : base() {
         FooBar = fooBar;
    }
    public bool FooBar { get; set; }
}

class ActionTwoViewModel : BaseViewModel 
{
    public ActionTwoViewModel(string pingPong) :base() {
      PingPong = pingPong;
    }
    public string PingPong { get; set; }
} 
```

用法

```
public ActionResult ActionTwo () 
{
    // this doesn't work (of course)
    var model = new ActionTwoViewModel("blub");

    return View(model);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:54:28.273

使用[base](http://msdn.microsoft.com/en-us/library/ms173115%28v=vs.80%29.aspx)（在 MSDN 上），您可以调用超类构造函数，然后为您的类添加您的东西。

```
public class ActionOneViewModel : BaseViewModel 
{
    public ActionOneViewModel (bool fooBar) : base()
    {
        //other stuff here
        model.FooBar = fooBar;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T13:58:38.853

有了一点通用性，这将起作用：

```
private T CreateViewModel<T>()
    where T : BaseViewModel, new()
{
    BaseViewModel model = new T();
    //doing a lot of stuff here
    return (T)model;
} 
```

你可以像这样使用它：

```
ActionOneViewModel  model1 = CreateViewModel<ActionOneViewModel>();
ActionTwoViewModel  model2 = CreateViewModel<ActionTwoViewModel>(); 
```

# ruby-on-rails - 如何在 Rails 中模拟缓慢的响应时间

> ID：11102403
> 
> 赞同：1
> 
> 时间：2012-06-19T13:49:03.257
> 
> 标签：ruby-on-rails

我有一个调用 API 的应用程序，它可能需要很长时间才能响应（有时超过 10 秒）。我已采取措施使此非阻塞并显示加载图标，但是当我在本地运行该站点时，响应时间非常快，因此我无法测试我的加载 ui 是否正常工作。有没有在 Rails 中模拟这个的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:59:26.343

添加`sleep`到您的控制器操作中，例如

```
def show
  if Rails.env.development?
    #Makes the request pause 5 seconds
    sleep 5
  end
  ...
end 
```

# javascript - jQuery插件和图像有问题

> ID：11102407
> 
> 赞同：-2
> 
> 时间：2012-06-19T13:49:17.120
> 
> 标签：javascript, jquery, image

我正在开发一个 jquery 插件，在网格中创建列，但我在处理图像时遇到了困难。我不确定是否需要更改某种 css 或者 javascript 是否运行得太快。这是html：

```
 <!DOCTYPE html>
    <html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">        </script>
    <script src="gridilizer.js"></script>
    <script>
            $(document).ready(function() {
                    $(this).gridilizer();
            });
    </script>
    <style>
    body, html {
        padding:0;
        margin:0;
    }
    header {
        background:#dcd;
        height:200px;
        font-size:100px;
        text-align:center;
        line-height:200px;
    }
    [data-rows] {
        background:#dcdcdc;
    }
    </style>
    </head>
    <body>
    <header>
            GRIDILIZER.JS
    </header>

    <div class="row">
        <div data-rows="7">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean congue aliquam lorem quis varius. Ut ac libero vel purus ultricies ultricies. Curabitur diam leo, consequat vel volutpat ut, auctor vehicula est. Sed lorem arcu, fermentum sed aliquam et, sollicitudin vitae tellus. Vivamus purus urna, vehicula ut euismod nec, dapibus ut lorem. Ut magna lorem, volutpat ut hendrerit ac, fringilla vitae nibh. Ut tempor elit non libero pellentesque dignissim. Nunc tincidunt ornare lorem, id porttitor leo varius ut.
        </div>
        <div data-rows="5">
            test8
        </div>
    </div>

    <div class="row">
        <div data-rows="12">
            <img width="50%" src="http://images.wikia.com/powerlisting/images/b/b9/Mountain_wallpaper_005_1024.jpg" />
            <p>Image</p>
        </div>
    </div>

    <div class="row">
        <div data-rows="3">
            <h1>Headline</h1>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean congue aliquam lorem quis varius. Ut ac libero vel purus ultricies ultricies. Curabitur diam leo, consequat vel volutpat ut, auctor vehicula est. Sed lorem arcu, fermentum sed aliquam et, sollicitudin vitae tellus. Vivamus purus urna, vehicula ut euismod nec, dapibus ut lorem. Ut magna lorem, volutpat ut hendrerit ac, fringilla vitae nibh. Ut tempor elit non libero pellentesque dignissim. Nunc tincidunt ornare lorem, id porttitor leo varius ut.
        </div>
        <div data-rows="3">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean congue aliquam lorem quis varius. Ut ac libero vel purus ultricies ultricies. Curabitur diam leo, consequat vel volutpat ut, auctor vehicula est. Sed lorem arcu, fermentum sed aliquam et, sollicitudin vitae tellus. Vivamus purus urna, vehicula ut euismod nec, dapibus ut lorem. Ut magna lorem, volutpat ut hendrerit ac, fringilla vitae nibh. Ut tempor elit non libero pellentesque dignissim. Nunc tincidunt ornare lorem, id porttitor leo varius ut.
        </div>
        <div data-rows="3">
            test4
        </div>
        <div data-rows="3">
            test4
        </div>
    </div>
    </body>
    </html> 
```

还有我的 javascript：

```
(function($){
$.fn.extend({
    gridilizer:function(){
        // Style Row Here
        $(".row").css({
            'width':'95%',
            'margin':'2% 2.5%',
            'display':'block',
            'float':'left'
            //'min-height':'200px'
            //'height':'auto',
            //'overflow':'hidden'
        });
        //Get Elements with data-rows property
        elem=$("[data-rows]");
        // Set background color for border hack
        color=$('body').css("background-color");
        if(color='rgba(0,0,0,0)'){
            $('body').css('background-color','#fff')
        }
        // Style each grid element
        return elem.each(function(){
        $this=$(this);
        //Get number of rows
        rows=$this.attr('data-rows');
        //Math to find number of rows in a 12-grid area
        width=(rows/12*100);
        //Set border to background color
        background=$this.parents(":not(.row)").css("background-color");
        $this.css({
            'width':width+'%',
            'display':'block',
            'float':'left',
            'padding':'2% 5%',
            'border':'10px solid '+background,
            '-webkit-box-sizing':'border-box',
            '-moz-box-sizing':'border-box',
            'box-sizing':'border-box'
            });
        console.log($this.parent('.row').height());
        height = $this.parent().height();
        $this.height(height);
            });
        }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:55:06.110

这可能是因为您在 DOM 完全加载之前调用了您的插件。浏览器解析html代码的方式是从上到下。所以它首先命中你的函数调用，然后渲染 DOM。根据执行插件功能所需的时间，整个页面加载时 DOM 可能尚未完全加载。尝试，将调用移动到底部，就在结束正文标记 () 之前。您仍然可以在 . 让我知道事情的后续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:56:25.593

在里面

```
this.css({
        'width':width+'%',
        'height':100%
        'display':'block',
        'float':'left',
        'padding':'2% 5%',
        'border':'10px solid '+background,
        '-webkit-box-sizing':'border-box',
        '-moz-box-sizing':'border-box',
        'box-sizing':'border-box'
        });** 
```

尝试添加 'height':100% 以使其适合父 div 的范围。

# c - 欧拉计划编号 16

> ID：11102424
> 
> 赞同：3
> 
> 时间：2012-06-19T13:50:08.343
> 
> 标签：c

> 2^15 = 32768，它的位数和是3 + 2 + 7 + 6 + 8 = 26。数字2^1000的位数和是多少？

我想解决 Project Euler 问题 16。我试图将 2 的幂保存在一个数组中。假设`2 ^ 6 = 128`。然后

```
int arr[1000];
arr[0] = 1 // or 8 (In other way also)
arr[1] = 2
arr[2] = 8 // or 1
// and so on.... 
```

但现在的问题是如何解决这个问题。

我在将数字移动到下一个数组位置时遇到问题。现在假设，

```
arr[0] = 8; 
```

在下一次迭代中

```
arr[0] = 1; and array[1] = 6; 
```

这里`arr[0]`包含 1 和`arr[1]`包含 6。下一步

```
arr[0] = 3;
arr[1] = 2;
....
....
//2 ^ 6
arr[0] = 1;
arr[1] = 2;
arr[2] = 8;
...
...
//2 ^ 10
arr[0] = 1;
arr[1] = 0;
arr[2] = 2;
arr[3] = 4;
.....
..... 
```

等等。请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:42:30.193

您应该遍历每个数字，从最低有效位开始，将其加倍并添加前一个数字的进位，将结果模 10 存储为新数字值，如果结果大于 9，则将进位设置为 1将其设置为 0（或仅将结果除以 10）：

```
carry = 0
for i = 0 to MAX_DIGITS-1:
   tmp = 2 * digits[i] + carry
   digits[i] = tmp % 10
   carry = tmp / 10 
```

（这是伪代码 - 将其转换为 C 以供您自己使用）

* * *

顺便说一句，二进制的计算`2^1000`非常容易——`1`后面跟着 1000 `0`。将结果转换为十进制表示有点棘手，但存在一种有效的二进制到 BCD 转换方法。但我仍然建议您改用 GNU MP 库。使用 GNU MP 计算 2^1000 只需要 6 行（`#define`不计算行和所有空白行）：

```
#include <gmp.h>

#define MAX_DIGITS 302

mpz_t bignum;
char str[MAX_DIGITS+2];

mpz_init2(bignum, 1001);
mpz_ui_pow_ui(bignum, 2, 1000);  // set the integer object to 2^1000
mpz_get_str(str, 10, bignum);    // convert to base 10 
```

请注意，这`2^1000`是 1001 个二进制数字和大约 302（等于 1001*log(2)）十进制数字。根据 的要求，为可能的符号字符和`NULL`终止符添加两个字符`mpz_get_str()`。

现在您只需检查 中的结果数字`str`，将它们转换为整数并将它们全部相加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:01:06.070

```
#include <stdio.h>

void mul2(int *n){
    int c = 0, v;
    while(*n>=0){
        v  = c + *n * 2;
        c  = v / 10;
        *n++ = v % 10;
    }
    if(c) *n++ = c;//1
    *n = -1;//stopper
}

int sum(int *n){
    int sum=0;
    while(*n>=0)
        sum += *n++;
    return sum;
}

int main(void){
    int arr[1000] = {1, -1};//need 302 + 1, -1 is stoper
    int i;
    for(i=0;i<1000;i++)
        mul2(arr);
    printf("%d\n", sum(arr));
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T00:51:41.263

```
#include <stdio.h>

#define POWER 1000

int digits[(POWER * 302 + 999)/1000] = {1}; // > log10(2 ** POWER)
int ndigits = 1;

int main(void)
{
    for (int i = 0; i < POWER; i++)
        for (int n = 0, j = 0;; j++)
        {
            n += digits[j] * 2;
            digits[j] = n % 10;
            n /= 10;
            if (j == ndigits - 1)
            {
                if (!n) break;
                ndigits++;
            }
        }

    int sum = 0;
    for (int i = 0; i < ndigits; i++)
        sum += digits[i];

    printf("%d\n", sum);

    return 0;
} 
```

编辑：一个可能更快但更模糊的内部块：

```
 n += digits[j] * 2;
            if (n >= 10)
            {
                digits[j] = n - 10;
                n = 1;
                if (j == ndigits - 1)
                    ndigits++;
            }
            else
            {
                 digits[j] = n;
                 if (j == ndigits - 1)
                     break;
                 n = 0;
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-15T13:27:29.207

这是我的 Python 代码：

```
b = 2**1000
c = str(b)

d = [ ]

for dig in c :

    d.append(int(dig))

e = sum(d)

print e 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T06:54:10.780

```
 //Finally I did it.

    #include <stdio.h>
#include <stdlib.h>
//2 ^ 1000
int main()
{
   int array[1000] = { 0 };
   array[0] = 1;
   int i, j, cnt, div, carry, temp, sum;
   for(i = 0, cnt = 1; i < 1000; i++)
   {
       div = carry = 0;
       for(j = 0; j < 1000; j++)
       {
           if(carry != 0)
           {
               array[j] = (array[j] * 2) + carry;
               div = array[j] % 10;
               temp = array[j] / 10;
               array[j] = div ;//+ carry;
               carry = temp;
               //array[j] = (array[j] * 2) + 1;
               //carry = 0;
           }
           else
           {
               array[j] = array[j] * 2;
               if (array[j] > 9)
               {
                   div = array[j] % 10;
                   carry = array[j] / 10;
                   array[j] = div;
               }
           }

       }

   }
   sum = temp = 0;
   printf("The value of 2 ^ 1000 is : ");
for(i = 999; i >= 0; i--)
{
    if(array[i] || (temp))
    {
        temp++;
        sum = sum + array[i];
        printf("%d", array[i]);
    }

}
   printf("\nThe sum is : %d \n", sum);
   printf("\nThe number of digits are : %d \n", temp);
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-03T09:01:42.277

这是我的代码

```
#include <iostream>
#include <cstdio>
using namespace std;

int main() {

int a[10000]={0};
int m=1;
int carry=0;
a[0]=1;
long long int sum=0;
for(int i=1;i<=1000;i++)
{
    for(int j=0;j<m;j++)
    {
        int x=a[j]*2+carry;
        a[j]=x%10;
        carry=x/10;
    }
    while(carry!=0)
    {
        a[m++]=carry%10;
        carry/=10;
    }
  }
  for(int i=m-1;i>=0;i--)
   sum+=a[i];
  printf("%lld",sum);
  return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-14T04:42:33.087

[这是我解决问题 16 的 java 代码](https://i.stack.imgur.com/xYbQ2.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-18T01:03:01.060

在这个问题中，我们可以从先前数字的计算中受益。例如要计算`pow(2,1000)`我们可以使用的位数`pow(2,999)`，我们可以将前一个号码的位数存储在队列中。当前数字可以通过将前一个数字的数字一一乘以2来获得。

在下面的代码中使用了上面的方法：

```
using namespace std; 
#include<bits/stdc++.h>

int main() {

    queue<int> q;
    q.push(2);
    queue<int> q2;

    for (int i = 2; i <= 1000;i++) {

        int carry = 0;
        while (!q.empty())
        {
            int first = q.front();
            q.pop();
            int digit = (first * 2 + carry) % 10;
            carry = (first*2) / 10;
            q2.push(digit);
        }
        if(carry!=0) {
            q2.push(carry);
        }
        swap(q, q2);
    }

    int sum = 0;
    while(!q.empty()) {
        sum += q.front();
        q.pop();
    }
    cout << sum << endl;
} 
```

# c++ - 将 BSTR 存储在 std::vector 中？

> ID：11102426
> 
> 赞同：2
> 
> 时间：2012-06-19T13:50:13.913
> 
> 标签：c++, stl, vector, bstr

我有一个 ATL COM 组件方法，它将 BSTR 作为 in 参数。我需要在一个数组中添加对该方法的每个调用。我不能使用 SAFEARRAY，因为它是固定大小的，所以我认为 std::vector 将是最简单的选择。当然，我需要为向量的每个添加调用 SysAllocString。这意味着在销毁向量之前，需要为每个条目调用 SysFreeString。

我正在寻找一个更简单/更清洁的解决方案，并考虑将向量声明为 vector<_bstr_t> ，其中包括自动清理。然而，在我的脑海里，有一些事情正在引发警报，因为它实际上是一个标准容器中的智能指针。我的担心是合理的还是我可以安全地做到这一点？如果没有，还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:08:07.917

> [关于`vector< _bstr_t >`]我的担心是否合理，或者我可以安全地这样做吗？

是的。虽然您*可以*放心使用，但请`_bstr_t`记住，它不仅是一个智能指针，而且还是一个*引用计数*的智能指针。这意味着额外的费用。

> 如果没有，还有其他更好的解决方案吗？

我通常会使用 a[`CComBSTR`](http://msdn.microsoft.com/en-us/library/zh7x9w3f%28v=vs.80%29.aspx)而不是`BSTR`or `_bstr_t`。如果您需要引用计数，那么您必须依靠`_bstr_t`. 例如：如果您还使用 ATL，您可能只需要`CComBSTR`s。

> CComBSTR 类是 BSTR 的包装器，它是长度前缀字符串。长度以整数形式存储在字符串中数据之前的内存位置。
> 
> BSTR 在最后一个计数字符之后以空字符结尾，但也可能包含嵌入在字符串中的空字符。字符串长度由字符数决定，而不是第一个空字符。

因此，在做出选择之前，请考虑以下几点：

1.  `_bstr_t`是一个引用计数的智能指针包装器，*而不*`BSTR`提供任何引用计数。`CComBSTR`
**   `_bstr_t` *不会*重新定义地址操作符，因此可以安全地存储在 STL 容器中。与`CComBSTR`您将需要使用`CAdapt`.*

 *关于[`CAdapt`](http://msdn.microsoft.com/en-us/library/bs6acf5x%28v=vs.80%29.aspx)对象：

> CAdapt 是一个简单的模板，用于包装重新定义地址运算符（运算符 &）以返回对象地址以外的其他内容的类。此类类的示例包括 ATL 的 CComBSTR、CComPtr 和 CComQIPtr 类，以及编译器 COM 支持类 _com_ptr_t。这些类都重新定义了地址运算符以返回其数据成员之一的地址（在 CComBSTR 的情况下为 BSTR，在其他类的情况下为接口指针）。

然后你可以使用：

```
typedef std::vector< CAdapt< CComBSTR > > MyString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:53:06.360

我认为你可以安全地做到这一点。被禁止的一件事是使用`auto_ptr`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:30:18.147

由于 _bstr_t 不会重载 operator& 你在 stl 容器中使用它没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:46:09.750

`BSTR`是一个你必须调用的 C 结构`SysAllocString`体`SysFreeString`。 `_bstr_t`是一种 C++ 类型，它为你调用`SysAllocString`和调用，并且在. 在处理对象时，您不必也不应该调用或调用。`SysFreeString``std::vector``SysAllocString``SysFreeString``_bstr_t`

如果您正在处理 C 结构`BSTR`对象：
(1) 您可以安全地将智能指针存储在容器中，除了`auto_ptr`，它只是假装是智能的。
(2) A`vector`可以存储`_bstr_t`，但它不理解`SysFreeString`，你将不得不手动调用它。就像您必须`delete`使用原始指针一样，因为`_bstr_t`它*不是*智能指针。
(3) a`std::unique_ptr<BSTR, HRESULT (*)(BSTR)>(mybstr, SysFreeAlloc)`是一个智能指针，它可以安全而神奇地为你做所有事情，包括完全安全地存储在向量中，没有开销。但是，这很难写，所以大多数人使用：

```
template<class T, class F>
std::unique_ptr<T, F> make_unique(T t, F f)
{return std::unique_ptr<T,F>(std::move(t), std::move(f));}

typedef decltype(make_unique(declval<BSTR>(), SysFreeAlloc)) bstr_ptr;
std::vector<bstr_ptr> container;
container.push_back(make_unique(mybstr, SysFreeAlloc)); 
```*

# python - 持久化 Tf-Idf 数据

> ID：11102429
> 
> 赞同：3
> 
> 时间：2012-06-19T13:50:20.950
> 
> 标签：python, machine-learning, scikit-learn, pickle

我想存储 TF-IDF 矩阵，这样我就不必一直重新计算它。我正在使用 scikit-learn 的`TfIdfVectorizer`. 腌制或将其存储在数据库中更有效吗？

一些背景：我正在使用 k-means 聚类来提供文档推荐。由于经常添加新文档，因此我想存储文档的 TF-IDF 值，以便重新计算集群。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T14:04:58.097

酸洗（尤其是使用[joblib.dump](http://packages.python.org/joblib/generated/joblib.dump.html)）有利于短期存储，例如在交互式会话中保存部分结果或将模型从开发服务器发送到生产服务器。

然而，酸洗格式取决于模型的类定义，这些模型可能会从一个版本的 scikit-learn 更改为另一个版本。

如果您计划长时间保留该模型并使其可以在未来版本的 scikit-learn 中加载，我建议您编写自己的独立于实现的持久性模型。

我还建议使用 HDF5 文件格式（例如在 PyTables 中使用）或其他支持有效存储数值数组的数据库系统。

还可以查看 scipy.sparse 的稀疏矩阵表示的内部 CSR 和 COO 数据结构，以找到一种将它们存储在数据库中的有效方法。

# python - Pyramid - 为文件上传表单编写单元测试

> ID：11102432
> 
> 赞同：3
> 
> 时间：2012-06-19T13:50:22.340
> 
> 标签：python, unit-testing, python-2.7, pyramid

我正在努力为负责上传从页面上的表单收到的图片的功能创建单元测试。

主要问题是我无法弄清楚如何将图片添加到虚拟请求的发布参数中，并因此将其传递给函数。

这是我正在尝试测试的代码。

谢谢

```
@view_config(route_name='profile_pic')
def profilePictureUpload(request):
 if 'form.submitted' in request.params:
    #max picture size is 700kb
    form = Form(request, schema=PictureUpload)

    if request.method == 'POST' and form.validate():
        upload_directory = 'filesystem_path'
        upload = request.POST.get('profile')
        saved_file = str(upload_directory) + str(upload.filename)

        perm_file = open(saved_file, 'wb')
        shutil.copyfileobj(upload.file, perm_file)

        upload.file.close()
        perm_file.close()

    else:
        log.info(form.errors)
 redirect_url = route_url('profile', request)
 return HTTPFound(location=redirect_url) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T05:35:34.243

在您的文件系统上使用客户端提供的名称`upload.filename`（

顺便说一句，我在您的代码中看到您调用`request.params`,`request.POST.get('profile')`和. 我们可以模拟所有这些，最终为.`upload.file``upload.filename``upload.file`

```
class MockCGIFieldStorage(object):
    pass

upload = MockCGIFieldStorage()
upload.file = StringIO('foo')
upload.filename = 'foo.html'

request = DummyRequest(post={'profile': upload, 'form.submitted': '1'})

response = profilePictureUpload(request) 
```

# html - Javascript 以 html 形式显示可选格式

> ID：11102433
> 
> 赞同：0
> 
> 时间：2012-06-19T13:50:26.547
> 
> 标签：html, css

我有一个注册表单，其中有一个字段，该字段仅在选择下拉框中的某些行后才显示。这一切都很好，但是我无法让盒子适应当前的设计，一旦选择了盒子，它就会显得格格不入。要查看出现的框，请从 sia 许可证类型字段中选择字段安全防护。可以在此处找到该页面的链接：[http ://www.security-vacancies.net/regsitration/index.php](http://www.security-vacancies.net/regsitration/index.php)

任何建议我如何使它适合当前的设计将不胜感激。

```
<p>
<label for="postcode">SIA License Type</label>
<select id='sia_question' onchange='displayoptional()' select="select" name="sia_question">
    <option value='' selected="selected">Please S elect</option>
    <option value='1'>Do Not Have A License</option>
    <option value='2'>Have Appied for a License </option>
    <option value='3'>Security Guarding</option>
    <option value='4'>Door Supervision</option>
    <option value='5'>Close Protection</option>
    <option value='6'>Key Holding</option>
    <option value='7'>Public Space Surveillance</option>
    <option value='8'>Vehicle Immobilisation</option>
    <option value='9'>Cash In Transit</option>
    <option value="10">Non Frontline</option>
</select>
<div style='display:none' id='optional'>
    <span class="style204"> Please Enter an SIA License Number: <input id='sia_license' type='text' name="sia_license" value=""/></span>
</div>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:23:45.837

好吧，只需像代码中的所有其他字段一样设置它的样式：

```
<p>
    <label for="postcode">SIA License Type</label>
    <select id='sia_question' onchange='displayoptional()' select="select" name="sia_question">
        <option value='' selected="selected">Please S elect</option>
        <option value='1'>Do Not Have A License</option>
        <option value='2'>Have Appied for a License </option>
        <option value='3'>Security Guarding</option>
        <option value='4'>Door Supervision</option>
        <option value='5'>Close Protection</option>
        <option value='6'>Key Holding</option>
        <option value='7'>Public Space Surveillance</option>
        <option value='8'>Vehicle Immobilisation</option>
        <option value='9'>Cash In Transit</option>
        <option value="10">Non Frontline</option>
    </select>
</p>
<p style='display:none' id='optional'>
    <label for="postcode">SIA License Number</label>
    <input id='sia_license' type='text' name="sia_license" value=""/>
</p> 
```

就是这样，我猜。

# c# - 数据网格列绑定

> ID：11102434
> 
> 赞同：2
> 
> 时间：2012-06-19T13:50:26.807
> 
> 标签：c#, wpf, xaml, binding, datagrid

我正在使用基于 MVVM、MEF 等的 WAF（WPF 应用程序框架）开发应用程序。

我目前有几个具有类似结构的域对象，如下所示（为简洁起见缩短）：

```
public class MyBaseClass : INotifyPropertyChanged
{
    private DateTime? _firstDateTime;
    protected DateTime? firstDateTime
    {
        get { return _firstDateTime; }
        set
        {
            _firstDateTime = value;
            OnPropertyChanged(new PropertyChangedEventArgs("FirstDateTime"));
    }

    private DateTime? _secondDateTime;
    protected DateTime? secondDateTime
    {
        get { return _secondDateTime; }
        set
        {
            _secondDateTime = value;
            OnPropertyChanged(new PropertyChangedEventArgs("SecondDateTime"));
    }

    public DateTime? FirstDateTime
    {
        get { return firstDateTime; }
        set { firstDateTime = value; }
    }

    public DateTime? SecondDateTime
    {
        get { return secondDateTime; }
        set { secondDateTime = value; }
    }
} 
```

* * *

```
public class MyBaseCollectionClass : INotifyPropertyChanged
{
    private ObservableCollection<MyBaseClass> _baseClassObjectCollection;
    protected ObservableCollection<MyBaseClass> baseClassObjectCollection
    {
        get { return _baseClassObjectCollection; }
        set
        {
            _baseClassObjectCollection = value;

            OnPropertyChanged(new PropertyChangedEventArgs("BaseClassObjectCollection"));
        }
    }        

    public ObservableCollection<MyBaseClass> BaseClassObjectCollection
    {
        get { return baseClassObjectCollection; }
        set { baseClassObjectCollection = value; }
    }
} 
```

然后，在我的 ApplicationController 中，我有一个方法可以在视图模型中加载 ObservableCollection，如下所示：

```
for (int i = 0; i <= 9; i++)
{
    detailsViewModel.MyBaseClassObjects.Add( new MyBaseClass()
                                            {
                                                FirstDateTime = Convert.ToDateTime("05/2" + i + "/2012 09:00:00 AM"),
                                                SecondDateTime = Convert.ToDateTime("05/2" + i + "/2012 04:30:00 PM")
                                            });
} 
```

另一种按日期将大集合分组为较小分组集合的方法：

```
detailsViewModel.MyBaseClassObjects
                .GroupBy(baseObject => ((DateTime)baseObject.FirstDateTime).Date)
                .Select(group => group.ToList())
                .ToList()
                .ForEach(list => detailsViewModel.BaseObjectCollections
                        .Add(
                              new MyBaseCollectionClass()
                              { BaseClassObjectCollection = new ObservableCollection<MyBaseClass>(list)}
                             )
                         ); 
```

然后，在我的视图的 XAML 中，我有一个 ItemsControl 绑定，如下所示：

```
<ItemsControl ItemsSource="{Binding BaseObjectCollections}" ItemTemplate="{StaticResource ItemsTemplate}">                    
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

在视图的 ResourceDictionary 中，我有一个这样声明的 DataTemplate（为清楚起见省略了一些项目）：

```
<DataTemplate x:Key="ItemsTemplate">
    <Grid DataContext="{Binding MyBaseClassObjects}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>            

        <DataGrid Grid.Row="1"
                      Background="Transparent"
                      Style="{DynamicResource DataGridStyle}"
                      AlternatingRowBackground="Gainsboro"
                      AlternationCount="2"
                      AutoGenerateColumns="False"
                      HeadersVisibility="None"
                      ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Grid}}, Path=DataContext}">
            <DataGrid.Columns>
                <DataGridTextColumn Width=".25*">
                    <DataGridTextColumn.Binding>
                        <MultiBinding Converter="{x:Static myConvNS:MultiValueTESTCONVERTER.Retrieve}">
                            <Binding Path="FirstDateTime"/>
                            <Binding Path="SecondDateTime"/>
                        </MultiBinding>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>                    
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</DataTemplate> 
```

注意：在上面的 DataTemplate 中，我目前有一个多重绑定，所以我可以看到哪些值被传递到转换器中。我意识到我将无法达到预期的效果（如下所述），但我希望能够逐步完成绑定并查看转换器正在接收的内容——此时仅此而已。最终，我想要完成的（如果可能的话）是我希望能够以这样的方式绑定我的 Datagrid，即 FirstDateTime 和 SecondDateTime 值可以交替显示在同一列中。有关视觉帮助，请参见下图：

[所需效果](http://img521.imageshack.us/img521/5576/33405812.jpg)

我最初的想法是让一些其他通用对象公开单个 DateTime 属性并将我的基础对象（具有两个 DateTime 属性）分解为该通用对象的实例，然后绑定到这些通用对象的集合。不过，我不喜欢这个主意。当我的基础对象上的任一 DateTime 属性发生更改时，我需要了解它，我担心通过将此对象拆分为两个通用对象，我将失去正确发送/接收通知的能力。

有人有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:56:56.467

DataGridTemplateColumn 和你的两个文本框一起使用 StackPanel 怎么样？

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBox Text="{Binding FirstDateTime}"/>
                <TextBox Text="{Binding SecondDateTime}"/>
            </StackPanel>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

# ios - 如何裁剪图像？

> ID：11102439
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:50:43.333
> 
> 标签：ios, ipad

我正在开发一个 iPad 应用程序，我通过它使用图像上下文进行绘制。我在绘图上下文之上再添加一个图像视图以调整图像大小。当我完成缩放图像时，我需要为两个图像中的公共区域裁剪缩放图像并将裁剪图像绘制到基本绘图图像。

任何帮助都是不言而喻的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:52:44.657

尝试以下方法：

```
-(UIImage *)cropImage:(UIImage *)img fromRect:(CGRect)rect
{
    CGFloat scale = [[UIScreen mainScreen] scale];
    if (scale > 1.0f) {
        rect = CGRectMake(rect.origin.x * scale,
                          rect.origin.y * scale,
                          rect.size.width * scale,
                          rect.size.height * scale);
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect(img.CGImage, rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:scale orientation:img.imageOrientation];
    CGImageRelease(imageRef);
    return result;
} 
```

# jqgrid - 对jqGrid进行排序时，在自定义格式列中保持复选框的选中状态

> ID：11102440
> 
> 赞同：2
> 
> 时间：2012-06-19T13:50:43.350
> 
> 标签：jqgrid

我有一个加载一次 jqgrid，它使用自定义格式化程序来显示 bool 值的复选框，这些复选框**仅**在单击保存按钮时才会保留。但是，无论何时单击排序，都不会保留所有复选框的选中状态。

```
jQuery("#list2").jqGrid({
    url:myurl,
    datatype: "json",
    loadonce: true,
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
    colModel:[
        {name:'id',index:'id', width:55},
        {name:'isChecked',index:'isChecked', width:90, formatter:chkFmatter},
        {name:'name',index:'name asc, invdate', width:100},
        {name:'amount',index:'amount', width:80, align:"right"},
        {name:'tax',index:'tax', width:80, align:"right"},      
        {name:'total',index:'total', width:80,align:"right"},       
        {name:'note',index:'note', width:150, sortable:false}       
    ],
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"JSON Example"
});
jQuery("#list2").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false});

function chkFmatter(cellvalue, options, rowObject) {
    // do something here to format column
    return new_format_value
} 
```

无论如何，我可以保留在排序、分页等时单击了哪些复选框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:50:44.223

这是因为绑定到网格的数据没有被更新，所以任何新的请求（分页、排序等）都会反映属性绑定到的原始状态。您最好的选择是复选框的状态随时更改以更新实际数据以反映这一点。

[您可以使用getGridParam](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)检索绑定到网格的数据：

```
var data = $('#' + gridid).jqGrid('getGridParam', 'data'); 
```

然后使用您的 rowid、列名和值来更新它来更新数据对象：

```
data[row - 1][columnname] = value; 
```

# iphone - 系统库中的内存泄漏

> ID：11102442
> 
> 赞同：0
> 
> 时间：2012-06-19T13:50:45.330
> 
> 标签：iphone, ios, memory-management, memory-leaks

我一直在使用使用 sqlite 数据库的 iPhone 应用程序。我检查了 iPad、iPhone 4 中的内存泄漏，但没有。但同样的代码显示了 iPhone-3GS 中的内存泄漏。所以：

*   如果我单击泄漏参考，它将向我显示一条不可用的消息。
*   如果我检查隐藏系统库选项，它不会显示泄漏。

我认为以下图片足以理解我的问题。

![在此处输入图像描述](../Images/9073b9e6722128a181038da5fc3132b5.png)

![在此处输入图像描述](../Images/d51086fa3259c63d3c47cc9ec74e5dab.png)

![在此处输入图像描述](../Images/e2f2a1232e33aeca347222635a87c27e.png)

![在此处输入图像描述](../Images/7f6320260a04fa92d8286a638ddb8566.png)

![在此处输入图像描述](../Images/3f89716afdf433d4fd5ac0529e314c7b.png)

![在此处输入图像描述](../Images/81053a8e59e10696dce4f72a66efe3a0.png)

# css - 如何将 Bootstrap 的容器 div 调整为距左视口边缘 100 像素？

> ID：11102446
> 
> 赞同：5
> 
> 时间：2012-06-19T13:50:52.490
> 
> 标签：css, html, twitter-bootstrap

我正在使用容器`div`具有的 Twitter Bootstrap 固定布局：

```
margin-left: auto;
margin-right: auto; 
```

所以它总是停留在中心。

我想要做的是定位容器，使左侧浏览器窗口边框和容器之间有 100px 的间隙。当窗口变小时，我希望容器移动到窗口的边框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-07T15:32:28.237

更改容器边距的另一种方法是`container-fluid`在大屏幕上仅使用 12 列中的 8 列（或 10 列）...

```
<div class="container-fluid">
    <div class="row">
        <div class="col-md-8">
         .. page layout here
        </div>
    </div>
</div> 
```

[http://www.bootply.com/SRnhM22tPr](http://www.bootply.com/SRnhM22tPr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:01:29.243

覆盖 twitter 引导 css 文件`.container`以`margin-left: 100px`解决将其定位得更近的问题。

至于当窗口变小时将其移近，我不知道如何使用 css 来完成，以便最大值为 100px。但是如果没有最大值，它是可行的，`margin-left: x%`其中 x 是您认为合适的数字。这样，当浏览器窗口大小发生变化时，左边距也会发生变化。

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:03:58.850

使用[流体布局](http://twitter.github.com/bootstrap/examples/fluid.html)并为主体添加填充。

```
body { padding-left: 100px; } 
```

这样，内容将始终从左侧填充窗口最多 100 像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:48:05.620

好的，这就是我所做的：

```
.container {
  padding-left: 10px;
  padding-right: 250px;
} 
```

并没有给出我想要的结果，但非常接近。我的第一个 span 3 是侧边栏，最后一个 span9 是主要内容区域。主要内容区域现在始终居中，旁边的侧边栏与窗口边框的最小间隙为 10 像素。

# encryption - 如何为 DES3 加密找到正确的 OpenSSL EVP 密钥长度

> ID：11102449
> 
> 赞同：1
> 
> 时间：2012-06-19T13:51:01.990
> 
> 标签：encryption, openssl, rsa, des

我正在尝试实现一个[混合密码系统](http://en.wikipedia.org/wiki/Hybrid_cryptosystem)（密钥信封为**RSA ，数据信封为****DES3（带有两个密钥选项**））。因此，我首先尝试使用 Openssl 的`EVP`功能实现 DES3。因为看起来我可以很容易地使用 EVP 来结合 RSA 和 DES3 加密。

我从 Openssl 书中得到了这个示例代码（更改了数据类型以修复 gcc 警告并将片段放在一个文件中）：

```
#include <stdio.h>
#include <openssl/ssl.h>
#include <openssl/evp.h>
#include <openssl/rand.h>

unsigned char *encrypt_example(EVP_CIPHER_CTX *ctx, unsigned char *data, int inl, int *rb);
unsigned char *decrypt_example(EVP_CIPHER_CTX *ctx, unsigned char *ct, int inl);
void select_random_key(unsigned char *key, int b);
void select_random_iv(unsigned char *iv, int b);
int seed_prng(int bytes);

int main(int argc, char *argv[])
{
    EVP_CIPHER_CTX ctx;
    EVP_CIPHER_CTX_init(&ctx);

    unsigned char key[EVP_MAX_KEY_LENGTH];
    unsigned char iv[EVP_MAX_IV_LENGTH];
    unsigned char *ct, *out;
    unsigned char final[EVP_MAX_BLOCK_LENGTH];
    unsigned char str[] = "123456789abcdef";
    int i = 0;

    if (!seed_prng(16))
    {
        printf("Fatal Error! Unable to seed the PRNG!\n");
        abort();
    }

    select_random_key(key, EVP_MAX_KEY_LENGTH);
    select_random_iv(iv, EVP_MAX_IV_LENGTH);

    /* EVP_des_ede3()       :three-key DES3 with ECB
     * EVP_des_ede()        :two-key DES3 with ECB
     * EVP_des_ede_cbc()    :two-key DES3 with CBC 
     * EVP_des_ede3_cbc()   :three-key DES3 with CBC */

    EVP_EncryptInit(&ctx, EVP_des_ede_cbc(), key, NULL);
    ct = encrypt_example(&ctx, str, strlen((const char*)str), &i);
    printf("Ciphertext is %d bytes.\n", i);

    EVP_DecryptInit(&ctx, EVP_des_ede_cbc(), key, NULL);
    out = decrypt_example(&ctx, ct, 8);
    printf("Decrypted: >>%s<<\n", out);
    out = decrypt_example(&ctx, ct + 8, 8);
    printf("Decrypted: >>%s<<\n", out);

    if (!EVP_DecryptFinal(&ctx, final, &i))
    {
        printf("Padding incorrect.\n");
        abort();
    }

    final[i] = 0;
    printf("Decrypted: >>%s<<\n", final);
    return 0;
}

int seed_prng(int bytes)
{
    if (!RAND_load_file("/dev/random", bytes))
        return 0;
    return 1;
}

void select_random_key(unsigned char *key, int b)
{
    int i;

    RAND_bytes(key, b);
    for (i = 0; i < b - 1; i++)
        printf("%02X:",key[i]);
    printf("%02X\n\n", key[b - 1]);
}

void select_random_iv (unsigned char *iv, int b)
{
    RAND_pseudo_bytes (iv, b);
}

unsigned char *encrypt_example(EVP_CIPHER_CTX *ctx, unsigned char *data, int inl, int *rb)
{
    unsigned char *ret = (unsigned char *)malloc(inl + EVP_CIPHER_CTX_block_size(ctx));
    int i, tmp, ol;

    ol = 0;
    for (i = 0; i < inl /100; i++)
    {
        EVP_EncryptUpdate(ctx, &ret[ol], &tmp, &data[ol], 100);
        ol += tmp;
    }

    if (inl % 100)
    {
        EVP_EncryptUpdate(ctx, &ret[ol], &tmp, &data[ol], inl%100);
        ol += tmp;
    }

    EVP_EncryptFinal(ctx, &ret[ol], &tmp);
    *rb = ol + tmp;
    return ret;
}

unsigned char *decrypt_example(EVP_CIPHER_CTX *ctx, unsigned char *ct, int inl)
{

    /* We're going to null-terminate the plaintext under the assumption it's
     * non-null terminated ASCII text. The null can be ignored otherwise.
     */
    unsigned char *pt = (unsigned char *)malloc(inl + EVP_CIPHER_CTX_block_size(ctx) + 1);
    int ol;

    EVP_DecryptUpdate(ctx, pt, &ol, ct, inl);
    if (!ol) /* there's no block to decrypt */
    {
        free(pt);
        return NULL;
    }

    pt[ol] = 0;
    return pt;
} 
```

我正在用这个编译它

```
gcc -g -O0 -Wall evp_encrypt_decrypt.c  -o evp_encrypt_decrypt -lssl -lcrypto 
```

现在如果我执行这个我得到这个输出：

```
13:98:EB:64:D5:8B:1E:0A:70:1D:28:9D:25:3A:13:40:FE:C1:81:3C:C5:8F:4B:F6:66:1A:07:F8:17:D6:10:B6:4E:BC:45:96:00:A1:9F:59:44:A0:43:D9:9D:DD:C8:A9:0B:22:EC:7B:F2:5F:78:01:D1:58:6D:0B:B4:CB:5F:CD 

Ciphertext is 16 bytes.
Decrypted: >>(null)<<
Decrypted: >>12345678<<
Decrypted: >>9abcdef<< 
```

这里它说芯片文本是 16 个字节（没关系）。但是密钥本身（上面打印的十六进制代码）是**64 字节长！**

但是，具有两个密钥选项的 DES3 的密钥长度应为 128 位（包括奇偶校验位）。但是**EVP_MAX_KEY_LENGTH**定义默认为**64**。我还尝试打印芯片密钥长度、变量大小`key`和 ctx 密钥大小，如下所示：

```
printf("Key length DES3: %d\n", EVP_CIPHER_key_length(EVP_des_ede3_cbc()));
printf("Key size: %d\n", sizeof(key));
printf("Cipher CTX key length: %d\n\n", EVP_CIPHER_CTX_key_length(&ctx)); 
```

这将输出：

```
Key length DES3: 24
Key size: 64
Cipher CTX key length: 16 
```

我在这里有点困惑。DES3（双键）密钥大小不应该是 128 位吗？为什么 DES3 密钥的长度打印为 24（这是位、字节等）？为什么所有这些密钥长度和大小都不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T12:12:50.110

> 但是，具有两个密钥选项的 DES3 的密钥长度应为 128 位（包括奇偶校验位）

是的。2-key 3DES 的密钥大小为 64x2 = 128 位；3-key 3DES 的密钥大小为 64x3 = 192 位（如 Greg S 所述）。

> 但是 EVP_MAX_KEY_LENGTH 定义默认为 64

这是它可以达到的最大值（对于所有 EVP 对称密码），而不仅仅是 DES/3DES/AES 等。该值甚至可能在未来发生变化。

> DES3（双键）密钥大小不应该是 128 位吗？

是的。

> 为什么 DES3 密钥的长度打印为 24（这是位、字节等）？

谁知道......但它以字节为单位，而不是位。

> 为什么所有这些密钥长度和大小都不同？

大小基于算法或密码系统。

2-key 3DES 执行加密-解密-加密并使用两个密钥。所以其中一个键被使用了两次。3-key 3DES 执行加密-解密-加密并使用三个独立的密钥。他们就是这样设计的。

# c# - MVVM - 退出确认

> ID：11102455
> 
> 赞同：5
> 
> 时间：2012-06-19T13:51:27.390
> 
> 标签：c#, wpf, mvvm

我正在尝试学习 MVVM，但有些东西我还不明白。

目前，我有这个事件处理程序：

```
private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    if (MessageBox.Show("Are you sure you want to close this application?", "Close??", MessageBoxButton.YesNo, MessageBoxImage.Question) == MessageBoxResult.No)
    {
        e.Cancel = true;
    }
} 
```

好简单。但是，我想在这个应用程序中应用 MVVM 模式。

我想知道，我是否应该将此逻辑放在 ViewModel 中而不是直接放在视图代码中？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:02:36.590

您可以使用自己的 ViewsService，它可以在 ViewModel 中使用并与 View 交互。例如，您可以编写 ViewsService.CloseActiveWindow() 方法。在这种情况下，您不需要直接从 ViewModel 与 View 交互，而是通过服务类。

另一种方式：使用全局发布/订阅服务。ViewModel 将发送事件，View 将订阅此事件。如果有多个窗口，您可以检查窗口是否处于活动状态并仅关闭活动窗口。

# java - 缩放后更改视口元数据时如何正确显示页面？

> ID：11102458
> 
> 赞同：0
> 
> 时间：2012-06-19T13:51:28.807
> 
> 标签：java, ios, gwt, mobile-safari

我们正在创建一个移动应用程序（在 GWT 中），它将在页面上显示为叠加层。页面本身包含我们无法控制的内容，并且没有 viewport 元标记。页面上的内容没有针对移动视图进行优化，但我们在叠加层中的应用程序会。所以页面很可能会被缩放，但是对于我们的应用程序来说，需要更改视口才能完全显示。

为了优化显示并使应用程序显示为全屏，在应用程序启动阶段，视口元标记被更改/添加以下内容
`width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes`
这非常有效，除非用户首先放大或缩小页面。当用户第一次放大（在本例中为缩小）时，视口会发生变化，但视口不会缩小到浏览器视口。

为了说明这个问题，我创建了一个屏幕录制：首先我缩小，但由于整个页面已经可见，它会跳回来。然后我单击按钮，1 秒后，添加了视口元标记。现在显示浏览器背景。
[看法](http://www.webdebugger.nl/viewport_actual.mov)

当我在单击按钮之前不缩放时，它可以正常工作。

我试过调用调整大小，推迟视口元标记，更改视口标记的内容。到目前为止没有任何帮助。

当设备旋转或用户缩放操作完成时，内容将与浏览器视口匹配。

我为它创建了一些示例代码（GWT/Java）：
[GWT 示例代码](https://gist.github.com/2954228)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:35:40.043

据我所知（并且在构建[http://www.m-gwt.com/](http://www.m-gwt.com/)时构建了很多关于此的知识），不支持动态更改视口。我玩弄了它（大约两年前），但我无法按预期工作。

也许这同时已经改变了......

# python - 需要原始页面上的表单值响应，而不是重定向页面

> ID：11102463
> 
> 赞同：2
> 
> 时间：2012-06-19T13:51:40.510
> 
> 标签：python, google-app-engine

当我打算更新具有 GqlQuery 代码的后续帖子时，我无意中发布了对上一篇帖子的修订。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:02:01.713

你还没有理解网络请求是如何工作的。您不能“停留在同一页面上”，因为 POST - 即使是到同一个 URL - 也是对新页面的*请求*。由您的代码来呈现*整个*页面，包括标题和格式，包括新值。

这当然是您应该使用适当的模板引擎而不是手动构建 HTML 的原因。Jinja2 在 GAE 中可用，您应该使用它在 GET 和 POST 上呈现您的模板。

# notifications - 如何从我的 Google Play apk 禁用用户通知？

> ID：11102467
> 
> 赞同：0
> 
> 时间：2012-06-19T13:51:47.203
> 
> 标签：notifications, google-play

我已经在 Google Play 中放了一个 apk 并对原始版本进行了一些更改，但有些用户已经下载了它。我想知道是否可以在 Google Play 中更新实际版本，但不通知用户此更新。

# iphone - 警报框xcode iphone dev中的多个值

> ID：11102472
> 
> 赞同：0
> 
> 时间：2012-06-19T13:52:14.227
> 
> 标签：iphone, ios, xcode

我试图在警报框中显示多个值，但最后一个到 pars dosnt 似乎显示，这是我已经拥有的代码，

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Lose" message:[NSString stringWithFormat: @"Unlucky you only made it to       Level : %d" ,fred,@" and scored %i",score ] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil]; 
```

任何人都可以建议一种更好的方式来表现这种行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:56:02.773

试试这个：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Lose" message:[NSString stringWithFormat: @"Unlucky you only made it to Level : %d  and scored %i",fred,score ] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil]; 
```

# objective-c - 使用 xcode 4 和 cocos2d 创建存档文件的问题

> ID：11102474
> 
> 赞同：0
> 
> 时间：2012-06-19T13:52:24.503
> 
> 标签：objective-c, cocos2d-iphone

我正在尝试使用 xcode 4 和 cocos2d 的最新稳定版本创建一个 .ipa 文件，当我尝试归档我的项目时，我不断收到此错误，在`CCAtlasNode.m`：

```
CC_NODE_DRAW_SETUP();
Too many arguments provided to function like macro invocations
Use of undeclared identifier NSAssert 
```

其他人遇到过这个问题吗？我的项目在模拟器中编译得很好。我已经在 cocos2d 论坛上问过了，没有人能够提供帮助。

我正在使用本教程为 TestFlight 创建一个 .ipa：[http ://help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4](http://help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4)

当它到达您实际归档文件的部分时，我会遇到很多编译错误，而这些错误在我为模拟器测试时并不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:25:28.210

我通常`ipa`通过添加二进制文件、为设备构建、ti`zip`存档和重命名为`*.ipa`. 这有点hacky，但有效。

# mysql - MySQL 查询 - 看似奇怪的行为。这与浮点值有关吗？

> ID：11102475
> 
> 赞同：2
> 
> 时间：2012-06-19T13:52:24.827
> 
> 标签：mysql, database

我有一个表`sellerparams`，其中包含许多列，其中一个名为`probabilityinc`. 此列的类型是`float`。

我不明白为什么第二个查询没有按我的预期工作。

**第一次查询和结果**

```
mysql> select id,probabilityinc from temp.sellerparams;
+----+----------------+
| id | probabilityinc |
+----+----------------+
|  1 |            0.3 |
|  2 |            0.3 |
|  3 |            0.3 |
|  4 |            0.4 |
+----+----------------+
4 rows in set (0.01 sec) 
```

**第二次查询和结果（意外？）**

```
mysql> select id from temp.sellerparams where probabilityinc=0.4;
Empty set (0.00 sec) 
```

如您所见，有一排带有`probabilityinc=0.4`. 为什么第二个选择返回空？这是否与浮点值的内部表示有关？如果是这样，我如何根据浮点类型的列进行选择？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:55:35.473

为您的列使用更准确的数据类型可能会更好，因为浮点数的精度相当有限。也就是说，在比较浮点值时始终使用容差值是一种很好的做法

```
select id from temp.sellerparams 
where probabilityinc between (0.4 - epsilon) AND (0.4 + epsilon); 
```

其中 epsilon 代表您的容差，例如 0.0001

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T13:55:36.310

您应该将列类型更改为`numeric`. `float`设计上是不准确的。像 0.4 这样的数字可能会略有不同。这就是为什么`0.4`如果数字存储为`0.39999999`

例如，您可以使用`numeric(10,5)`。

查看[文档](http://dev.mysql.com/doc/refman/5.0/en/fixed-point-types.html)

# django-views - Django中的对象html表示

> ID：11102485
> 
> 赞同：0
> 
> 时间：2012-06-19T13:52:52.143
> 
> 标签：django-views

我编写了一个 python 应用程序，结果创建了一个 Result 对象列表。我编写了一个方法，该方法使对象 Result 的 html 表示，显示其主要属性。

```
class Result():

    def to_html(self):
        num_of_exp = "Number of exponentials: %s"% self.number_of_exponentials
        function = "Function: %s"% self.function
        par_of_exp = "Parameters of exponentials: <br /> %s "% pprint.pformat(self.parameters_of_exponentials)
        chunk = "Chunk: <br /> %s"% pprint.pformat(self.chunk)
        backgrnd = "Background <br /> %s" % pprint.pformat(self.background)
        raw_par_of_exp = "Raw parameters of exponentials: <br /> %s"% pprint.pformat(self.raw_parameters)
        non_phy = "Non physical solution:  %s" % pprint.pformat(self.non_physical_solution)
        user_choice = "User choice:  %s" %  pprint.pformat(self.user_choice)

        output = (function + r"<br /><br />" + num_of_exp + r"<br /><br />"+ par_of_exp + r"<br /><br />" + 
              backgrnd+ r"<br /><br />" + non_phy + r"<br /><br />"
              )

        return output 
```

我正在使用 Django 为应用程序创建 Web 界面。

我制作了一个 Django 模板：

```
...
<body>

{% for result in result_list %}
{{result.to_html}}
{% endfor %}

</body> 
```

并添加了 return render_to_response('result_pick.html',{'result_list': rp.parsed_output_data })

其中 rp.parsed_output_data 是 Result 对象的列表（列表的大小不固定）。

我得到的输出完全忽略了 to_html() 中的 html 标签。输出的 HTML 源代码：

```
Function: 98.627732*2.71828182845905**(-0.016052058*t)&lt;br /&gt;&lt;br /&gt;Number of exponentials: 1&lt;br ... ... 
```

作为最终结果，我必须得到的是 Result 对象的表示，它以一种很好的人类可读格式显示，每个对象都有自己的 div 和带有下一步按钮的表单。因此，当用户选择一个结果时，他将被转移到另一个页面，其中显示了其他详细信息。

我正在寻找有关如何以正确和最干净的方式执行此操作的建议。任何评论表示赞赏。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:58:44.627

为了安全起见，Html 标签被忽略/自动转义，请参见[此处](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std%3atemplatefilter-escape)和[此处](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#autoescape)。

正确的方法是通过 django 模板系统而不是对象本身构建 html 输出，例如：

```
<body>

{% for result in result_list %}
Function: {{ result.function }}<br /><br />
Number of exponentials: {{ result.number_of_exponentials }}<br /><br />
...
{% endfor %}

</body> 
```

# continuous-integration - 在 Jenkins for Windows 中创建管理员帐户时遇到问题

> ID：11102498
> 
> 赞同：1
> 
> 时间：2012-06-19T13:53:30.130
> 
> 标签：continuous-integration, hudson, jenkins

您好，我刚刚在 Jenkins 中启用了传统模式授权，现在它似乎已将我锁定在所有管理权限之外。

我需要创建一个管理员帐户，以便我可以继续进行 Jenkins 配置。我可以直接访问服务器并尝试从命令行运行此行： `java -jar jenkins.war --argumentsRealm.passwd.jenkins=swordfish --argumentsRealm.roles.jenkins=admin`Jenkins 启动，但从命令行启动时我无法从 Web 访问它。

我还尝试通过 services.msc 启动 Jenkins，这是我通常启动它的方式，并将参数传递给它`--argumentsRealm.passwd.jenkins=swordfish --argumentsRealm.roles.jenkins=admin`。Jenkins 启动，我可以通过网络访问它，但无法使用用户名登录。

任何想法如何获得管理员访问权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:05:21.623

我删除了config.xml中与安全和身份验证相关的条目，重新启动，我可以再次访问。我能够使用基于矩阵的安全性将自己添加为管理员。仍然不确定如何处理遗留问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T16:53:41.233

最近，我遇到了同样的问题。我会尝试登录到 jenkins（托管在 glassfish 上），并且会遇到同样的事情。基本上得到应用程序不可用的 glassfish 错误。如果我从浏览器中清除所有临时 Internet 文件，浏览到 jenkins 主页，我将看到 Jenkins 登录，当我提供正确的用户 ID 和密码时，WHAMMO！返回应用程序不可用.... 这也是使用基于矩阵的管理。

修理：

1.  在“users”目录下找到遇到问题的用户 ID 的 config.xml。
2.  删除了“jenkins.security.ApiTokenProperty”标签下的“apiToken”标签。
3.  弹起 glassfish 并能够再次登录。

# java - 如何找到 KEY_TYPED 事件的输入位置？

> ID：11102500
> 
> 赞同：3
> 
> 时间：2012-06-19T13:53:36.563
> 
> 标签：java, swing, keylistener

我有一个`KeyboardFocusManager`带有覆盖的`dispatchKeyEvent()`方法来处理箭头键的导航并输入。只要按键被按下，我就需要处理按键事件。不幸的是，按住 enter 会导致`KEY_TYPED`不包含关键位置的事件。有没有办法找出当前正在按下哪个输入？或者我可以抑制`KEY_TYPED`事件以支持`KEY_PRESSED`事件吗？

编辑：我无法告诉您使用 KeyboardFocusManager 而不是 KeyListeners 完成的原因，但我确信这样做是有原因的。到目前为止，已经不可能再改变它了。问题是，对于我们的系统（一个旧的终端模拟器），左回车键是一个导航键。按下回车键将焦点移动到当前行之后的下一个文本字段。右回车键是将用户输入发送到服务器的命令键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:09:52.633

使用[*How to Write a Key Listener*](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)`KeyEventDemo`中的内容，我无法重现您为or描述的效果。当然，“事件没有一个”。[](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)*`KEY_PRESSED``KEY_RELEASED`[`KEY_TYPED`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html)`keyLocation`*

 *目前尚不清楚为什么要使用[*Focus Listener*](http://docs.oracle.com/javase/tutorial/uiswing/events/focuslistener.html)，因为许多组件已经将某些键[绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)到定义的[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html). 该[示例](https://stackoverflow.com/a/5797965/230513)绑定了箭头键，这些箭头键响应由主机偏好调节的自动重复事件。*

# ios - 响应字符串为空

> ID：11102501
> 
> 赞同：0
> 
> 时间：2012-06-19T13:53:39.617
> 
> 标签：ios, iphone, objective-c

我的 web 服务返回带有新行的 json 字符串，因此它会导致 responseString 始终为 null 的问题。

```
NSString *responseString=[[NSString alloc] initWithData:kampanyadata encoding:NSUTF8StringEncoding];

NSLog(@"%@",[NSString stringWithFormat:@"responsestring:%@",responseString]); 
```

> ----响应字符串：空

如何替换 JSON 字符串中的换行符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T18:24:07.553

你得到了一些 NSData，并试图将其转换为 NSString。此时不涉及 JSON。任何错误都与 JSON 或换行符无关。可能性： 1\. 你收到的 NSData 是 nil。2\. 您收到的 NSData 不是 UTF-8 格式。

您的 NSLog 声明很有趣。看 NSLog 的定义——第一个参数是一个格式字符串。代替

```
NSLog(@"%@",[NSString stringWithFormat:@"responsestring:%@",responseString]); 
```

你应该写

```
NSLog (@"responseString:%@", responseString); 
```

您可以将 JSON 文档*直接*传递给 NSJSONSerializer。无需将其转换为 NSString。实际上，如果数据很大，只是浪费宝贵的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:24:15.840

```
 soapResults = [[NSString alloc]
                    initWithBytes: [webData mutableBytes]
                    length:[webData length]
                    encoding:NSUTF8StringEncoding]; 
```

试试这个，这对我来说很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T13:57:55.187

```
NSString *tempString = [tempString stringByReplacingOccurrencesOfString:@"\n" withString:@" "]; 
```

我认为你需要这样做:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:30:02.350

你确定 kampanyadata 不为空吗？如果它不是 null 尝试`NSASCIIStringEncoding`像这样使用：

```
NSString *responseString=[[NSString alloc] initWithData:kampanyadata encoding:NSASCIIStringEncoding];. 
```

无关

顺便说一句，该`NSLog();`方法采用已经格式化的 NSString 作为参数，因此您可以使用：

```
NSLog(@"responsestring:%@",responseString); 
```

# javascript - 带有加载图标的切换元素

> ID：11102502
> 
> 赞同：0
> 
> 时间：2012-06-19T13:53:41.860
> 
> 标签：javascript, jquery

我想要做的是当用户单击按钮时，将按钮的图像更改为加载图标。

我的 javascript 函数看起来像这样 -

```
function GenerateDetail() {
    var resBtn = $('ctl00_cpMain_cntnrRoot').find("btn_generateDetail");
    if (resBtn != null) {
        toggleElement(resBtn);
    }
}

function toggleElement(aRelEle) {
    if ($(aRelEle).css("display") != "none") {
        addImage(aRelEle);
        $(aRelEle).css("display", "none");
    }
    else {
        $(aRelEle).prev().remove();
        $(aRelEle).css("display", "inline");
    }
}

function addImage(aParEle) {
    var aImage = document.createElement("img");
    var aSrc = "App_Themes/Images/activityloader.gif";
    aImage.border = "0";
    aImage.src = aSrc;
    aParEle.appendChild(aImage);
} 
```

在 toggleElement 中，$(aRelEle).css("display") 是未定义的。为什么？'ctl00_cpMain_cntnrRoot' 是一个 div，我在页面上的所有元素周围都有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:03:01.020

我认为问题出在这一行：

```
 var resBtn = $('ctl00_cpMain_cntnrRoot').find("btn_generateDetail"); 
```

什么是 ctl00_cpMain_cntnrRoot？是一门课吗？那么它应该是 .ctl00_cpMain_cntnrRoot 还是一个 id？那么应该是：#ctl00_cpMain_cntnrRoot

同样对于您的 find()。btn_generateDetail 是一个 id 还是一个类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T13:59:54.983

您是否使用 html 按钮标签。如果是这样，您可以将图像放在按钮中并为其设置 display="none" 的样式，然后您可以在单击按钮时切换此样式。例子：

```
<button>
    <img id="loadingIcon" src="" style="display:none"/> Button Text Here
</button> 
```

# wsdl - wsdl 生成的 Web 服务客户端无法与已部署的 Web 服务一起使用

> ID：11102509
> 
> 赞同：1
> 
> 时间：2012-06-19T13:54:07.607
> 
> 标签：wsdl, axis2, ws-client

我使用axis2 java2wsdl实用程序从java类生成了一个WSDL，如下所示；

```
java2wsdl -o C:\temp -cn com.temenos.webservices.customer.CustomerServiceWS 
```

然后我在axis2的应用服务器（比如jBoss）中部署了相同的Web服务，我可以在http://127.0.0.1:8080/axis2/services/CustomerServiceWS?wsdl上浏览wsdl并通过调用该服务的方法标准客户端，如 SoapUI 等。

现在的问题是，当我使用标准 java 工具“ **wsimport** ”通过将 WSDL 位置提供为**C:\temp**（从 java2wsdl 实用程序生成的 WSDL）生成客户端时，我的客户端无法与已部署的 Web 服务通信。我正在使用以下代码访问 Web 服务；

```
// Initialise WS
CustomerServiceWS service = null;
CustomerServiceWSPortType servicePort = null;
try {
URL wsdlLocation  = new URL("http://127.0.0.1:8080/axis2/services/CustomerServiceWS?wsdl");  
QName serviceName = new QName("http://customer.webservices.temenos.com", "CustomerServiceWS");
service = new CustomerServiceWS(wsdlLocation, serviceName);
servicePort = service.getCustomerServiceWSHttpSoap12Endpoint();
} catch (MalformedURLException murle) {
murle.printStackTrace();
    return;
} 
```

但是在创建（服务端口）端点时，我遇到了以下错误；

```
Exception in thread "main" javax.xml.ws.WebServiceException: An attempt was made to construct the ServiceDelegate object with an service name that is not valid: {http://customer.webservices.temenos.com}CustomerServiceWS.
    at org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:173)
    at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:70)
    at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:118)
    at org.apache.axis2.jaxws.spi.ServiceDelegate.<init>(ServiceDelegate.java:218)
    at org.apache.axis2.jaxws.spi.Provider.createServiceDelegate(Provider.java:59)
    at javax.xml.ws.Service.<init>(Service.java:56)
    at com.temenos.webservices.customer.CustomerServiceWS.<init>(CustomerServiceWS.java:42)
    at com.temenos.services.customer.client.Client.testGetLanguage(Client.java:32)
    at com.temenos.services.customer.client.Client.main(Client.java:21) 
```

我尝试了很多东西，但它似乎不喜欢任何东西。我错过了什么吗？

谢谢，

--

SJunejo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-25T19:42:35.973

请参阅 WSDL 文件的描述并检查 targetNamespace 以获取在 QName() 中给出的 url。还要导入必要的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:10:24.300

问题是我在 lib 路径中有axis2，因为调用发生在org.apache.axis2.jaxws.spi.Provider.createServiceDelegate（Axi2 Provider）而不是Java WS Provider。我从类路径中删除了axis2库，现在它似乎工作正常。（虽然我仍然无法通过客户端调用我的网络服务）

# http-headers - 删除服务器头tomcat

> ID：11102511
> 
> 赞同：18
> 
> 时间：2012-06-19T13:54:11.103
> 
> 标签：http-headers, tomcat7

我可以将**org.apache.coyote.http11.Http11Protocol.SERVER**的值重命名为其他任何值，因此 HTTP-Response-Header 包含以下内容：

服务器：阿帕奇

而不是默认的

服务器：Apache-Coyote/1.1

对 org.apache.coyote.http11.Http11Protocol.SERVER 使用空值不会删除 Server-Header。

如何从我的共鸣中删除 Server-Header？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-11T13:58:44.627

您可以修改您的 tomcat server.xml 并添加“服务器”选项并将其设置为您想要的任何内容。应该为您正在运行的任何 http 或 ssl 连接器设置服务器选项。例如，下面是来自示例 server.xml 文件的示例 HTTP 连接器配置

```
<Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" enableLookups="false" xpoweredby="false" server="Web"/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T16:08:32.683

简短的回答 - 您不能删除标题，但您应该修改它（请参阅其他答案）。

服务器标头在 RFC 中定义，它是强制性的。（未在规范中定义为可选）

取自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.38](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.38)

> **14.38 服务器**
> Server response-header 字段包含有关源服务器用于处理请求的软件的信息。
> 该字段可以包含多个产品令牌（第 3.8 节）和标识服务器和任何重要子产品的注释。产品令牌按其识别应用程序的重要性顺序列出。
> 
> 如果响应是通过代理转发的，代理应用程序不能修改服务器响应头。相反，它应该包含一个 Via 字段（如第 14.45 节所述）。
> 
> ```
>  Note: Revealing the specific software version of the server might
>   allow the server machine to become more vulnerable to attacks
>   against software that is known to contain security holes. Server
>   implementors are encouraged to make this field a configurable
>   option. 
> ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-30T09:24:57.250

从 Tomcat 5.5 开始应该可以。查看此讨论：[https](https://mail-archives.apache.org/mod_mbox/tomcat-users/200508.mbox/%3C42FBE8AA.1060401@joedog.org%3E) ://mail-archives.apache.org/mod_mbox/tomcat-users/200508.mbox/%3C42FBE8AA.1060401@joedog.org%3E 和此链接： [https ://tomcat.apache.org /tomcat-4.1-doc/config/coyote.html](https://tomcat.apache.org/tomcat-4.1-doc/config/coyote.html)

因此，以下应将服务器标头设置为`TEST`. 空应该使其为空。

```
<Connector className="org.apache.coyote.tomcat4.CoyoteConnector" port="8180" inProcessors="5" maxProcessors="75" enableLookups="true" acceptCount="10" debug="0" connectionTimeout="20000" useURIValidationHack="false" server="TEST"/> 
```

在大多数情况下，将 Server 标头设置为 Apache 在安全方面应该足够好。仅凭此，就无法推断出哪个操作系统或哪个确切版本与哪些模块以及正在运行的模块的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-23T06:53:05.973

如果您使用的是嵌入式 tomcat，那么您可以尝试以下代码。

```
import org.apache.catalina.startup.Tomcat;

final Tomcat server = new Tomcat();
server.getConnector().setXpoweredBy(false);
server.getConnector().setAttribute("server", ""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-21T08:36:24.347

用于 Web 应用程序。从代码中设置服务器标头。它在 Java Spring boot 项目中对我有用。

```
response.setHeader("Server", "none"); 
```

如果它部署在 tomcat 中，请尝试从代码中添加。

[![在此处输入图像描述](../Images/2f5b592483421a4911ee3e1e075721df.png)](https://i.stack.imgur.com/tOH00.png)

# ios - 来自 XIB 文件的 UIView：高度为 NULL

> ID：11102512
> 
> 赞同：0
> 
> 时间：2012-06-19T13:54:11.410
> 
> 标签：ios, cocoa-touch, ios5, uiview, xib

我已经使用 XIB 文件创建了一个自定义视图，并将 XIB 作为 UIView 多次加载到我的项目中。

但我想知道使用 XIB 文件创建的 UIView 的大小。（不是我知道的最好的主意，但只是为了确保我使用正确的大小，即使稍后调整了 XIB 文件的大小）

我的 UIViewController 中的 viewDidLoad 中的代码：

```
NSArray *nibObjects = [NSBundle.mainBundle loadNibNamed:nibName owner:self options:nil];
coverArticle *pageView = [nibObjects objectAtIndex:0];
[coverArticlesScrollView addSubview:pageView];
NSLog(@"View size: %@",pageView.frame.size.width); 
```

“pageView.frame.size.width”返回 NULL。为什么是这样 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:58:48.917

`NSLog(@"View Size: %f", pageView.frame.size.width);`宽度/高度是 CGFloat 类型

# perl - 如何在 Perl 中进行字母数字排序？

> ID：11102518
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:54:32.320
> 
> 标签：perl, sorting, alphanumeric

我有一个看起来像这样的文件：

```
80,1p21
81,19q13
82,6p12.3
83,Xp11.22
84,3pter-q21
86,3q26.33
87,14q24.1-q24.2|14q24|14q22-q24
88,1q42-q43
89,11q13.1
90,2q23-q24
91,12q13
92,2q22.3
93,3p22
94,12q11-q14
95,3p21.1
97,14q24.3
98,2p16.2 
```

我想根据第二列对它们进行排序。第一列也应该相应改变。当您在 Perl 中使用“排序”命令时，它不会这样做，因为它说它不是数字。有没有办法在 Perl 中对事物进行 alpha 数字排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:43:51.030

如果您阅读[sort 的文档](http://perldoc.perl.org/functions/sort.html)，您会发现您不需要在 Perl 中进行数字排序。您也可以进行字符串比较。

```
@sorted = sort { $a cmp $b } @unsorted; 
```

但这仍然会给您留下一个问题，例如，19q 将在 6p 之前排序。因此，您可以编写自己的排序函数，该函数可以在进行比较之前进行任何您想要的转换。

```
@sorted = sort my_complex_sort @unsorted;

sub my_complex_sort {
  # code that compares $a and $b and returns -1, 0 or 1 as appropriate
  # It's probably best in most cases to do the actual comparison using cmp or <=>

  # Extract the digits following the first comma
  my ($number_a) = $a =~ /,(\d+)/;
  my ($number_b) = $b =~ /,(\d+)/;

  # Extract the letter following those digits
  my ($letter_a) = $a =~ /,\d+(a-z)/;
  my ($letter_b) = $b =~ /,\d+(a-z)/;

  # Compare and return
  return $number_a <=> $number_b or $letter_a cmp $letter_b;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:14:39.513

我实际上找到了这个问题的答案。虽然代码看起来有点复杂。

```
#!/usr/bin/env perl

use strict;  
use warnings;

sub main {   
my $file;  
if (@ARGV != 1) {   
    die "Usage: perl hashofhash_sort.pl <filename>\n";
}   
else {  
    $file = $ARGV[0];   
}  

open(IN, $file) or die "Error!! Cannot open the $file file: $!\n";
my @file = <IN>;
chomp @file;
my ($entrez_gene, $loci, $chr, $band, $pq, $band_num);
my (%chromosome, %loci_entrez);

foreach my $line (@file) {
    if ($line =~ /(\d+),(.+)/) {
        # Entrez genes
        $entrez_gene = $1;

        # Locus like 12p23.4
        $loci = $2;

        if ($loci =~ /^(\d+)(.+)?/) {
            # chromosome number alone (only numericals)
            $chr = $1;
            if ($2) {
                # locus minus chromosome number. If 12p23.4, then $band is p23.4
                $band = "$2";
                if ($band =~ /^([pq])(.+)/) {
                    # either p or q
                    $pq = $1;
                    # stores the numericals. for p23.4, stores 23.4
                    $band_num = $2;
                }

                if (exists $chromosome{$chr}) {
                    if (exists $chromosome{$chr}{$pq}) {
                        push (@{$chromosome{$chr}{$pq}}, $band_num);
                    }
                    else {
                        $chromosome{$chr}{$pq} = [$band_num];
                    }
                }

                else {
                    $chromosome{$chr}{$pq} = [$band_num];
                }
            }
        }
    }
} # End of foreach loop

foreach my $key (sort {$a <=> $b} keys %chromosome) {
    my %seen = ();
    foreach my $key2 (sort {$a cmp $b } keys %{$chromosome{$key}}) {
        my @unique = grep { ! $seen{$_}++ } @{$chromosome{$key}{$key2}};
        my @sorted = sort @unique;
        foreach my $element (@sorted) {
            my $sorted_locus = "$key$key2$element";
            if (exists $loci_entrez{$sorted_locus}) {
                foreach my $element2 (@{$loci_entrez{$sorted_locus}}) {
                        print "$element2,$sorted_locus\n";

                }
            }
        }
    }

}

} # End of main

main(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:02:29.900

```
#!/usr/bin/env perl

use strict;
use warnings;

my @datas   = map { /^(\d+),(\d*)(.*)$/; [$1, $2, $3]; } <DATA>;
my @res     = sort {$a->[1] <=> $b->[1] or $a->[2] cmp $b->[2]} @datas;
foreach my $data (@res) {
    my ($x, $y, $z) = @{$data};
    print "$x,$y$z\n";
}

__DATA__
80,1p21
81,19q13
82,6p12.3
83,Xp11.22
84,3pter-q21
86,3q26.33
87,14q24.1-q24.2|14q24|14q22-q24
88,1q42-q43
89,11q13.1
90,2q23-q24
91,12q13
92,2q22.3
93,3p22
94,12q11-q14
95,3p21.1
97,14q24.3
98,2p16.2 
```

# c++ - JPEG 标头结构

> ID：11102519
> 
> 赞同：0
> 
> 时间：2012-06-19T13:54:32.380
> 
> 标签：c++, visual-studio-2010, header, format, jpeg

我正在尝试编写 JPEG 文件。

在我获取原始图像并通过 DCT、量化和霍夫曼编码对其进行处理后，我想以正确的格式保存它。我找不到任何库可以帮助我编写正确的头文件，插入我使用的两个表（霍夫曼和量化），所以我开始自己编写所有内容。

我从 SOI 标记、帧头等开始，但是当我尝试用查看器打开 JPEG 图像时，它什么也没有显示，即使在属性中也是如此。没有显示任何信息（例如图像尺寸），即使我像官方文档中所写的那样插入此信息。

如何编写正确的 JPEG 标头？

PS
我使用 C++ 和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:23:36.277

简单的答案 - 这很复杂。

我将从[libjpeg](http://sourceforge.net/projects/libjpeg/)开始并使用它来为您提供适当的标题。您还可以将其用作内部标头结构外观的参考

# javascript - jquery神秘'this'元素

> ID：11102525
> 
> 赞同：0
> 
> 时间：2012-06-19T13:54:55.737
> 
> 标签：javascript, jquery, this

> **可能重复：**
> [jQuery/JavaScript “this” 指针混淆](https://stackoverflow.com/questions/710542/jquery-javascript-this-pointer-confusion)

```
var timeOut = 1000;

$('#'+form +' :input').each(function() {

    thisObj = "";
    if ($(this).parent().parent().find(".incorrect").css('display') == "inline-block" || $(this).attr('value') == "") {
        if ($(this).attr('id') != "submitbtn") {
            thisObj = $(this);
            submit_this++;
            colourfading(this, 'rgba(56, 183, 0, 1)', 'rgba(255, 30, 0, .2)', 'rgb(210,210,210)', 'rgb(250,250,250)');
        }
    }

    var delaySubmit = (function(){
        var timer = 0;
        return function(callback, ms){
            setTimeouts(callback, ms, thisObj);
        };
    })();

    delaySubmit(function(){
        do_sendRequest(ajaxObj, thisObj, true);
    }, timeOut );
    timeOut = timeOut + 1000;
}); 
```

这是我在表单上按下提交按钮时使用的一些代码。

您可以看到函数 colourFading 使用“... (this, ' ...”。this 元素是来自 '.each(function() {' 调用的输入元素。

它在我编写的褪色功能中做得很完美，每个输入元素都会变成漂亮的红色，表明它有问题，然后又变回白色。

有趣的来了。如您所见，我已将“thisObj”变量链接为相同的“this”，这将传递给 colourFading，

然而，当我查看 thisObj 的 .attr('id') 时，它表明“this”实际上是我单击的提交按钮的表示。

这很奇怪，因为当我从发送到 colourfading（在 colourfading 函数中）的“this”中询问 id 时，它很好地显示了输入元素的 id。

我试过设置 thisObj = this, thisObj = $(this), 就在 .each(function() { 部分开始之后，就在褪色之前，它似乎有正确的元素，它只是不工作。

我在这里做错了吗？不应该这样工作吗？？？

# android - 如何将数据存储到android中的安全元件中

> ID：11102526
> 
> 赞同：10
> 
> 时间：2012-06-19T13:54:59.493
> 
> 标签：android, nfc, nexus-s, secure-element

我想在 android 中创建一个类似谷歌钱包的应用程序。据说“所有支付凭证都存储在手机中称为**安全元件的芯片中”。**如何访问此*安全元素*并将我的卡凭据存储到其中。我的目标是在结账柜台使用我的手机（Nexus）而不是我的卡。

所以我想要将一些数据存储到安全元件芯片并在我点击 NFC 阅读器时访问数据。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T14:12:12.640

如果您查看[Google 电子钱包常见问题解答](http://www.google.com/wallet/faq.html)，您会发现以下内容：

*   > 您的支付凭证存储在您手机中称为安全元件的芯片中。安全元件与手机的主要操作系统和硬件隔离。只有像谷歌钱包这样的授权程序才能访问安全元件来发起交易。

*   > 甚至谷歌钱包本身对安全元件的访问也非常有限，并且无法从其内存中读取或写入数据。存储在安全元件上的数据有多个级别的保护，并且在硬件级别受到保护，不会被窥探或篡改。

所以基本上......你无权访问 this `SecureElement`。也许与电话制造商交谈以向您提供访问权限/访问方式`SecureElement`将使您能够做到这一点……但我认为这超出了您的范围。

**编辑：** 另一种解决方案可以将您的数据存储在`SQLite`数据库中，也可以`encryption`在该数据库上使用，例如`AES`...或任何您喜欢的。您仍然需要注意如何保存/分发`encryption/decryption keys`.

如果您担心有人丢失了他的手机，而“创始人”试图窃取数据，您还可以对您实施密码保护`Application`，如果密码连续输入错误 3 次，则删除`SQLite`数据所在的数据库被储存了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T18:52:52.120

您不能在安全加密芯片中存储任何内容，因为它在设计上是与操作系统分离的硬件。

# java - 带有 SQLite 数据库随机选择的 Android 测验应用程序

> ID：11102527
> 
> 赞同：1
> 
> 时间：2012-06-19T13:55:01.370
> 
> 标签：java, android, sqlite

我正在编写一个简单的多项选择测验应用程序。SQLite 数据库表如下所示：

```
1 Question1 RightAnswer1
2 Question2 RightAnswer2
3 Question3 RightAnswer3 
and so on. 
```

活动布局如下所示。

```
Question TextView
Wrong Answer ListViewItem
Right Answer ListViewItem
Wrong Answer ListViewItem
Wrong Answer ListViewItem 
```

我将选择 Java random 从表中选择一个随机问题。我的问题是 - 我应该如何从同一张表中选择错误的答案，以使它们与正确的答案不一致。另一个问题是如何将正确答案随机放置在四个 TextView 之一？我应该使用 Java Collections.shuffle 来打乱这四个位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:03:32.987

您可以为您的 sqlite 数据构建一个类。

```
public class name{
     private String question;
     private String answer;
     public name(String q,String a){
             question=q;
             question=a;
       }
     public String getQuestion{return question;}
     public String getAnswer {return answer;}
} 
```

在定义了这个类之后，您可以在从 Sqlite db 检索数据后将数据放入 ArrayList 中。

```
ArrayList<your class name> list=new ArrayList<your class name>();
Cursor c=db.query(tablename,new String[]{your columns},null,null,null,null,null);
if(c.moveToFirst(){
    do{
       String question=c.getString(columnName);
       String answer=c.getString(ColumnBame);
       className cls=new className(question,answer);
       list.add(cls);
       }while(c.MoveToNext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:22:40.387

我的英语写得不太好，但看看我的解决方案。

创建一个呼叫问题类的列表视图。在该类中包含：
1 - 问题的一个字段字符串。
2 - 一个字段字符串作为答案。
3 - 一个字段布尔值表示错误或正确。

我希望这会有所帮助。

祝你好运！

# kendo-ui - 如何直接为剑道数据绑定赋值

> ID：11102532
> 
> 赞同：1
> 
> 时间：2012-06-19T13:55:14.940
> 
> 标签：kendo-ui

如何直接为剑道数据绑定赋值

这是代码

```
<script type="text/x-kendo-template" id="add-new-user-template">
<li>
    <a class="user-result">
        <span class="row-name">Create New User</span>
        <br/>
        <input type="hidden" class="hf-user-role-id" data-bind="value: 0"/>
        <input type="hidden" class="row-party-id" data-bind="value: "/>
            </a>
</li>
</script> 
```

必须将第一个输入字段值设置为 0，第二个设置为空字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:00:04.870

如果我理解正确你想这样做：

```
$('.hf-user-role-id').attr('data-bind', "value: 0");
$('.row-party-id').attr('data-bind', "value:"); 
```

jquery 属性方法允许您更改属性的值。如果您使用的是 kendo ui，那么您几乎肯定会包含 jquery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:09:29.167

好的，我真的不知道我是否理解您试图实现的目标，但是如果您想设置`static`值，为什么不直接做，`<input type="hidden" name="user-id" value="0" class="hf-user-role-id" />`因为（在我看来）没有`binding`静态值的感觉。
该`data-bind`属性需要一个变量或一些 JSON 才能绑定到非静态值。

干杯

# android - 方法未定义：manageConnectedSocket()

> ID：11102533
> 
> 赞同：3
> 
> 时间：2012-06-19T13:55:15.293
> 
> 标签：android, bluetooth

我们想通过蓝牙远程遥控机器人。现在我们正在使用 android 示例。我们想作为客户端连接。这部分之前的代码正在运行。现在我们得到一个错误：

> manageConnectedSocket(mmSocket);

“方法未定义”。我们能做些什么来解决这个问题？感谢您的回答。

```
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        // Use a temporary object that is later assigned to mmSocket,
        // because mmSocket is final
        BluetoothSocket tmp = null;
        mmDevice = device;

        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            // MY_UUID is the app's UUID string, also used by the server code
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) { }
        mmSocket = tmp;
    }

    public void run() {
        // Cancel discovery because it will slow down the connection
        mBluetoothAdapter.cancelDiscovery();

        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)
        manageConnectedSocket(mmSocket);
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:31:35.783

[据此](http://developer.android.com/guide/topics/wireless/bluetooth.html)，`manageConnectedSocket`不存在。

> manageConnectedSocket() 是应用程序中的一个虚构方法，它将启动用于传输数据的线程，这在有关管理连接的部分中进行了讨论。

而且您还没有在代码中定义它。您需要自己创建方法，或按照 Android 教程的其余部分进行操作。

# java - Java中的copyValueOf？

> ID：11102537
> 
> 赞同：3
> 
> 时间：2012-06-19T13:55:20.193
> 
> 标签：java, string

```
import java.util.Scanner;
public class CourseSplitter {
public static void main(String args[]){
    Scanner keyboard = new Scanner(System.in);
    char[] course; //course code format: ABCDE##
    String code;
    //int num; 
    System.out.println("Input Course: ");
    course = keyboard.next();
    System.out.println(course);
    code = String.copyValueOf(course, 0, 4);
    System.out.println(code);       
   }    
} 
```

当我使用字符数组而不是字符串时，我不知道应该如何让用户输入课程。简而言之，如何在字符数组上使用“扫描仪”？

指令是用户将输入格式为：ABCDE##的课程代码，然后程序必须将其拆分为课程名称和课程编号。因此，我不得不使用 copyValueOf 方法，但它似乎不起作用，因为从我在线阅读的所有文章中，他们使用了一个 char[] 数组，但用一些值初始化了该数组。所以我想知道如何在字符数组上使用扫描仪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:57:31.977

为什么不从扫描仪中读取一个字符串然后调用`String.toCharArray`呢？甚至不清楚为什么在这里*需要*一个 char 数组......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T13:58:40.553

为什么不直接用 读取字符串`scanner.nextLine`？

```
import java.util.Scanner;
public class CourseSplitter {
public static void main(String args[]){
    Scanner keyboard = new Scanner(System.in);

    System.out.println("Input Course: ");
    String course = keyboard.nextLine();
    System.out.println(course);
    String code = course.substring(0, 5); //You put 4 but it left out the last letter in the course name. I changed it to 5 and it worked but I'm confused since the index always start with 0.
    System.out.println(code);    
    String num = course.substring(5, 6);
    System.out.println(num);   
   }    
} 
```

# java - 如何用java中的另一个类关闭一个实例

> ID：11102539
> 
> 赞同：1
> 
> 时间：2012-06-19T13:55:24.637
> 
> 标签：java, oop

我遇到了这个问题，因为我开始进行 OOP 编程我想从另一个类中关闭一个类，这些类已经被我想关闭的这个类调用。

前任：

班级校长调用班级菜单和内部菜单我关闭校长

```
//Im inside of Principal

Menu mnu = new Menu();

//Now im inside of Menu

public void closePrincipal(){

principal.close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T13:58:31.630

您可以将对主体类的引用传递给菜单；

// 在你的主体中

```
Menu mnu = new Menu(this); 
```

您必须在 Menu 类中定义该构造函数：

```
class Menu{
    private Principal principal;

    public Menu(Principal principal){
      this.principal = principal;
    }
...
} 
```

所以当你想在你的菜单中使用它时，就去做吧。

```
principal.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:03:30.550

当您说“我在 Principal 类的代码中”时，您可能想认为“我已经基于 Class 主体创建了一个变量，并且我正在为该变量执行一些代码”。

您已将定义（“类”）转换为特定对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:04:24.967

创建菜单并传递主体

```
Menu mnu = new Menu(this); 
```

在菜单中：

```
private Principal principal;

public Menu(Principal principal) {
    this.principal = principal;
}

//You can close the menu's principal any time by calling this...
public void closePrincipal() {
    principal.close();
} 
```

您可以通过这种方式关闭主体

```
mnu.closePrincipal() 
```

或者在菜单的构造函数中关闭它。

# oracle - 如何使用 XMLTABLE 返回多个结果？

> ID：11102544
> 
> 赞同：0
> 
> 时间：2012-06-19T13:55:45.707
> 
> 标签：oracle

我想在 Oracle 中使用 xmltable 进行查询。
一切正常，但 xml 节点“article_title”有多个 (n) 结果。对于每一行，`"<string>Article Name1</string><string>Article Name 2</string>...`都返回结果。但我希望每个文章名称都作为单行返回。
我怎么能意识到这一点？

```
SELECT 
  X.* 
FROM 
  myTable C, 
                          xmltable (
                           '$cust//member' PASSING C.STAT_XML as "cust"
                           COLUMNS 
                           name VARCHAR(25) PATH '/member/name',
                           article_title XMLTYPE PATH '//string/text()'
                          ) as X

WHERE X.name = 'articles'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-27T18:01:31.253

我也有这个问题。我有一个 XML，它应该将货物数据从我们的仓库管理系统发送回我们的订单管理系统，它有各种不同的东西，有多个。整个 XML 消息有一个 ShipConfirmHeader 部分，因此很容易取出。我遇到麻烦的地方是它有一个 ShipConfirmDetail/Orders 部分，并且可能列出任意数量的订单。在每个订单中，可以有任意数量的订单行。我可以将 ShipConfirmHeader 和 ShipConfirmDetail/Orders 拉在一起，或者我可以将 ShipConfirmHeader 和 ShipConfirmDetail/Orders/OrderLineItem 拉在一起，但是当我尝试将 Orders 与 OrderLineItem 拉在一起时，我看不到加入这些，所以我最终得到一个笛卡尔积。

我在下面包含了我的 XML 示例。在这个示例中，只有一个 Order、一个 OrderLine 和一个 Carton（在 XML 中称为 LPN），因为我已经删除了所有其他内容（原始 XML 超过 4000 行长）。

从 ShipConfirmHeader 中提取内容相对容易，如下所示：

```
xmltable('/tXML/Message/ShipConfirm/ShipConfirmSummary/ShipConfirmHeaderInfo/'
        passing xmltype(msg_xml.full_xml)
        columns
          invoice_batch       varchar2(20)      path 'InvcBatchNbr'
        ) sc_hdr 
```

但是当我想包含任何倍数时，它会给我带来问题。我尝试了各种各样的事情：

```
-- This gives the error "ORA-22950: cannot ORDER objects without MAP or ORDER method"
xmltable('/tXML/Message/ShipConfirm'
  passing xmltype(msg_xml.full_xml)
  columns
    invoice_batch       varchar2(20)      path 'ShipConfirmSummary/ShipConfirmHeaderInfo/InvcBatchNbr',
    order_dtl           xmltype           path 'ShipConfirmDetails/Orders'
  ) sc_hdr

-- This doesn't like the "../" in the XPATH
xmltable('/tXML/Message/ShipConfirm/ShipConfirmDetails/Orders/OrderLineItem'
  passing xmltype(msg_xml.full_xml)
  columns
    invoice_batch       varchar2(20)      path '../../../ShipConfirmSummary/ShipConfirmHeaderInfo/InvcBatchNbr',
    order_id            varchar2(20)      path '../TcOrderId',
    order_line_id       varchar2(20)      path 'TcOrderLineId',
    item_name           varchar2(20)      path 'ItemName'
  ) sc_hdr

-- This gives a cartesian product.
xmltable('/tXML/Message/ShipConfirm/ShipConfirmSummary/ShipConfirmHeaderInfo'
  passing xmltype(msg_xml.full_xml)
  columns
    invoice_batch       varchar2(20)      path 'InvcBatchNbr'
  ) sc_hdr,
xmltable('/tXML/Message/ShipConfirm/ShipConfirmDetails/Orders'
  passing xmltype(msg_xml.full_xml)
  columns
    order_id            varchar2(20)      path 'TcOrderId'
  ) sc_ord_hdr,
xmltable('/tXML/Message/ShipConfirm/ShipConfirmDetails/Orders/OrderLineItem'
  passing xmltype(msg_xml.full_xml)
  columns
    order_line_id       varchar2(20)      path 'TcOrderLineId',
    item_name           varchar2(20)      path 'ItemName'
  ) sc_ord_dtl 
```

这是示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<tXML>
  <Header>
    <Source>warehouse management system</Source>
    <Action_Type></Action_Type>
    <Sequence_Number></Sequence_Number>
    <Batch_ID></Batch_ID>
    <Reference_ID></Reference_ID>
    <User_ID>CRONUSER</User_ID>
    <Password></Password>
    <Message_Type>ShipConfirm</Message_Type>
    <Company_ID>1</Company_ID>
    <Msg_Locale>English (United States)</Msg_Locale>
    <Msg_Time_Zone>America/Denver</Msg_Time_Zone>
    <Version>2018</Version>
  </Header>
  <Message>
    <ShipConfirm>
      <ShipConfirmSummary>
        <CompanyName>Blah</CompanyName>
        <FacilityName>Blah</FacilityName>
        <ShipConfirmHeaderInfo>
          <InvcBatchNbr>123456</InvcBatchNbr>
          <LastInvcDttm>5/27/21 05:45</LastInvcDttm>
          <ShippedDttm>5/27/21 05:45</ShippedDttm>
          <DateCreated>5/27/21 05:45</DateCreated>
          <StoreNbr></StoreNbr>
          <ShipVia>ST</ShipVia>
          <SchedDeliveryDate></SchedDeliveryDate>
          <ProNbr></ProNbr>
          <AppointmentNbr></AppointmentNbr>
          <ManifestNbr></ManifestNbr>
          <SealNbr></SealNbr>
          <AppointmentDate></AppointmentDate>
          <PartialShipConfirmStatus>5</PartialShipConfirmStatus>
          <PreBillStatus>0</PreBillStatus>
          <ApptMadeByID></ApptMadeByID>
          <BillOfLading></BillOfLading>
          <CancelQuantity>0.0</CancelQuantity>
          <NbrOfLpns>26</NbrOfLpns>
          <NbrOfPlts>0</NbrOfPlts>
          <NbrOfOrders>26</NbrOfOrders>
          <TotalWt>61.72</TotalWt>
          <UserID>USER</UserID>
        </ShipConfirmHeaderInfo>
      </ShipConfirmSummary>
      <ShipConfirmDetails>
        <Orders>
          <BatchCtrlNbr>123456</BatchCtrlNbr>
          <DistributionShipVia>ST</DistributionShipVia>
          <DoType>Customer Order</DoType>
          <DsgShipVia>ST</DsgShipVia>
          <OriginalShipVia>ST</OriginalShipVia>
          <IncotermLocAvaTimeZoneId>America/New_York</IncotermLocAvaTimeZoneId>
          <InvcBatchNbr>123456</InvcBatchNbr>
          <IsBackOrdered>1</IsBackOrdered>
          <MajorOrderCtrlNbr></MajorOrderCtrlNbr>
          <OrderType>ECOMM_ORDER</OrderType>
          <ShipDate>5/27/21 05:45</ShipDate>
          <OrderStatus>Unplanned</OrderStatus>
          <DoStatus>Shipped</DoStatus>
          <TcCompanyId>1</TcCompanyId>
          <TcOrderId>MYORDERID</TcOrderId>
          <TotalNbrOfLpn>1</TotalNbrOfLpn>
          <TotalNbrOfPlt>0</TotalNbrOfPlt>
          <TotalNbrOfUnits>1</TotalNbrOfUnits>
          <LineHaulShipVia>ST</LineHaulShipVia>
          <PartialShipConfirmStatus>5</PartialShipConfirmStatus>
          <PreBillStatus>0</PreBillStatus>
          <OrderBillToInfo>
            <BillToAddress1>Snip</BillToAddress1>
            <BillToAddress2></BillToAddress2>
            <BillToAddress3></BillToAddress3>
            <BillToCity>Snip</BillToCity>
            <BillToContact></BillToContact>
            <BillToContactName></BillToContactName>
            <BillToCountryCode>CA</BillToCountryCode>
            <BillToCounty></BillToCounty>
            <BillToFacilityName></BillToFacilityName>
            <BillToName>Snip</BillToName>
            <BillToPhoneNumber>Snip</BillToPhoneNumber>
            <BillToPostalCode>Snip</BillToPostalCode>
            <BillToStateProv>ON</BillToStateProv>
          </OrderBillToInfo>
          <OrderDestInfo>
            <DestAddress1>Snip</DestAddress1>
            <DestAddress2></DestAddress2>
            <DestAddress3></DestAddress3>
            <DestCity>Snip</DestCity>
            <DestContact>Snip</DestContact>
            <DestCountryCode>CA</DestCountryCode>
            <DestCounty></DestCounty>
            <DestDockDoorId>0</DestDockDoorId>
            <DestFacilityAliasId></DestFacilityAliasId>
            <DestFacilityId>0</DestFacilityId>
            <DestFacilityName></DestFacilityName>
            <DestName>Snip</DestName>
            <DestPhoneNumber>Snip</DestPhoneNumber>
            <DestPostalCode>Snip</DestPostalCode>
            <DestStateProv>ON</DestStateProv>
          </OrderDestInfo>
          <OrderOriginInfo>
            <OriginAddress1>Snip</OriginAddress1>
            <OriginAddress2></OriginAddress2>
            <OriginAddress3></OriginAddress3>
            <OriginCity>Snip</OriginCity>
            <OriginContact></OriginContact>
            <OriginCountryCode>CA</OriginCountryCode>
            <OriginFacilityAliasId>Snip</OriginFacilityAliasId>
            <OriginFacilityId>1</OriginFacilityId>
            <OriginFacilityName>Snip</OriginFacilityName>
            <OriginPhoneNumber></OriginPhoneNumber>
            <OriginPostalCode>Snip</OriginPostalCode>
            <OriginStateProv>AB</OriginStateProv>
          </OrderOriginInfo>
          <OrderInfoFields>
            <SplInstrCode1>MW</SplInstrCode1>
            <SplInstrCode2>MW</SplInstrCode2>
          </OrderInfoFields>
          <OrderLineItem>
            <InvcBatchNbr>123456</InvcBatchNbr>
            <ItemId>159331</ItemId>
            <ItemName>MYITEMNAME</ItemName>
            <LineItemId>12053970</LineItemId>
            <OrderQty>1</OrderQty>
            <OrderQtyUom>Unit</OrderQtyUom>
            <OrigItemId>159331</OrigItemId>
            <OrigItemName>MYITEMNAME</OrigItemName>
            <OrigOrderLineItemId>1</OrigOrderLineItemId>
            <OrigOrderQty>1</OrigOrderQty>
            <OrigOrderQtyUom>Unit</OrigOrderQtyUom>
            <OutptOrderLineItemId>3782033</OutptOrderLineItemId>
            <Price>15.39</Price>
            <PriceTktType></PriceTktType>
            <RetailPrice>0.0</RetailPrice>
            <ShippedQty>1</ShippedQty>
            <TcCompanyId>1</TcCompanyId>
            <TcOrderLineId>1</TcOrderLineId>
            <UnitVol>0.0744</UnitVol>
            <UnitWt>0.58</UnitWt>
            <Uom>Unit</Uom>
            <UserCanceledQty>0</UserCanceledQty>
            <OrderLineItemDefn>
              <ItemStyle>Snip</ItemStyle>
              <ItemStyleSfx>Snip</ItemStyleSfx>
            </OrderLineItemDefn>
          </OrderLineItem>
          <Lpn>
            <BillOfLadingNumber></BillOfLadingNumber>
            <CFacilityAliasId>Snip</CFacilityAliasId>
            <EstimatedWeight>0.58</EstimatedWeight>
            <FinalDestFacilityAliasId></FinalDestFacilityAliasId>
            <InvcBatchNbr>123456</InvcBatchNbr>
            <LoadedDttm></LoadedDttm>
            <ManifestNbr></ManifestNbr>
            <MasterBolNbr></MasterBolNbr>
            <NonInventoryLpnFlag>0</NonInventoryLpnFlag>
            <NonMachineable></NonMachineable>
            <OutptLpnId>730888</OutptLpnId>
            <PackerUserid>USER</PackerUserid>
            <ProcDttm>5/27/21 05:45</ProcDttm>
            <ProcStatCode>0</ProcStatCode>
            <QtyUom>Unit</QtyUom>
            <ServiceLevel></ServiceLevel>
            <ShipVia>ST</ShipVia>
            <ShippedDttm>5/27/21 05:45</ShippedDttm>
            <StaticRouteId></StaticRouteId>
            <TcCompanyId>1</TcCompanyId>
            <TcLpnId>98765</TcLpnId>
            <TcOrderId>Snip</TcOrderId>
            <TcParentLpnId></TcParentLpnId>
            <TcShipmentId></TcShipmentId>
            <TotalLpnQty>1</TotalLpnQty>
            <TrackingNbr>Snip</TrackingNbr>
            <VolumeUom>cu ft</VolumeUom>
            <Weight>0.58</Weight>
            <WeightUom>Lbs</WeightUom>
            <LoadSequence>0</LoadSequence>
            <oLPNXRefNbr></oLPNXRefNbr>
            <LpnDetail>
              <InvcBatchNbr>123456</InvcBatchNbr>
              <ItemId>159331</ItemId>
              <ItemName>MYITEMNAME</ItemName>
              <LpnDetailId>20153787</LpnDetailId>
              <OutptLpnDetailId>3689518</OutptLpnDetailId>
              <QtyUom>Unit</QtyUom>
              <SizeValue>1</SizeValue>
              <TcCompanyId>1</TcCompanyId>
              <TcLpnId>98765</TcLpnId>
              <DistroNumber></DistroNumber>
              <TcOrderLineId>1</TcOrderLineId>
              <MinorOrderNbr>Snip</MinorOrderNbr>
              <MinorPoNbr></MinorPoNbr>
            </LpnDetail>
          </Lpn>
        </Orders>
      </ShipConfirmDetails>
    </ShipConfirm>
  </Message>
</tXML> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:21:27.370

尝试这样的事情：

```
SELECT X.*
FROM my_table C,
     xmltable('for $i in $cust//string , $j in $cust//member[./string=$i]/name return <member>{$j}{$i}</member>' 
    passing c.stat_xml AS "cust" 
    columns name varchar2(25) path '/member/name', 
    article_title xmltype path '//string') AS X
WHERE X.name = 'articles'; 
```

[这](http://www.sqlfiddle.com/#!4/d41d8/932)是一个小提琴

我假设对于每一个`member`你有一个`name`但可能有很多`string`s

# iphone - 感知（或平均）图像散列

> ID：11102545
> 
> 赞同：1
> 
> 时间：2012-06-19T13:55:45.920
> 
> 标签：iphone, objective-c, ios, xcode

我需要计算图像的感知散列，并且应该在不使用任何外部库的情况下进行。

我尝试使用 pHash (http://phash.org/) 但我无法为 iOS (5) 编译它，而且我还没有找到关于如何做到这一点的真正教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T22:47:57.250

一种（依赖于库的）解决方案是使用在 6.8.8.3 版本中添加到 ImageMagick 的 pHashing 功能，该版本具有可用的[iOS 二进制文件](http://www.imagemagick.org/download/iOS/ "iOS 二进制文件")。[此处](http://www.fmwconcepts.com/misc_tests/perceptual_hash_test_results_510/index.html)记录了使用示例。

这里还有一个简单的参考函数（在 C# 中），用于生成您自己的可比较图像平均散列，可在[此博客](http://01101001.net/programming.php)上找到。

```
public static ulong AverageHash(System.Drawing.Image theImage)
// Calculate a hash of an image based on visual characteristics.
// Described at http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html
{
    // Squeeze the image down to an 8x8 image.
    // Chant the ancient incantations to create the correct data structures.
    Bitmap squeezedImage = new Bitmap(8, 8, PixelFormat.Format32bppRgb);
    Graphics drawingArea = Graphics.FromImage(squeezedImage);
        drawingArea.CompositingQuality = CompositingQuality.HighQuality;
        drawingArea.InterpolationMode = InterpolationMode.HighQualityBilinear;
        drawingArea.SmoothingMode = SmoothingMode.HighQuality;
        drawingArea.DrawImage(theImage, 0, 0, 8, 8);

    byte[] grayScaleImage = new byte[64];

    uint averageValue = 0;
    ulong finalHash = 0;

    // Reduce to 8-bit grayscale and calculate the average pixel value.
    for(int y = 0; y < 8; y++)
    {
        for(int x = 0; x < 8; x++)
        {
            Color pixelColour = squeezedImage.GetPixel(x,y);
            uint grayTone = ((uint)((pixelColour.R * 0.3) + (pixelColour.G * 0.59) + (pixelColour.B * 0.11)));

            grayScaleImage[x + y*8] = (byte)grayTone;
            averageValue += grayTone;
        }
    }
    averageValue /= 64;

    // Return 1-bits when the tone is equal to or above the average,
    // and 0-bits when it's below the average.
    for(int k = 0; k < 64; k++)
    {
        if(grayScaleImage[k] >= averageValue)
        {
            finalHash |= (1UL << (63-k));
        }
    }

    return finalHash;
} 
```

# apache - 如何在 PLESK 中修改 Apache LogFormat？

> ID：11102548
> 
> 赞同：1
> 
> 时间：2012-06-19T13:55:59.817
> 
> 标签：apache, logging

我想更改日志格式以包含网站主机，但我不知道如何在 PLESK 中更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:56:00.517

安装了 Plesk 的 Web 服务器使用 Plesk 配置文件 /etc/httpd/conf.d/zz010_psa_httpd.conf 中定义的日志记录格式

在查看了 PLESK 论坛上的一些帖子后，有效的解决方案是在包含 plesk 配置之后重新定义 plesklog 格式。

为此，我必须编辑 /etc/httpd/conf/httpd.conf 并转到显示以下内容的部分：

```
#
# Load config files from the config directory "/etc/httpd/conf.d".
#
Include conf.d/*.conf 
```

然后为 plesklog 添加新的日志格式：

```
# Redefine plesk log format
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %{Host}i" plesklog 
```

之后，我重新启动了 apache：

```
service httpd restart 
```

现在我可以检查我的网站日志是否以新定义的格式保存：

```
tail -f /var/www/vhosts/<your-domain-here>/statistics/logs/access_log 
```

希望它可以帮助某人！

# intersystems-cache - 使用缓存 sql 存储创建类时如何包含全局的扩展引用？

> ID：11102552
> 
> 赞同：0
> 
> 时间：2012-06-19T13:56:05.483
> 
> 标签：intersystems-cache

我正在创建一个映射到现有全局的类，因此它使用缓存 sql 存储而不是默认存储。此类具有扩展引用（UCKE、SYKE），其值在运行时设置。如何在 sql 存储映射中包含扩展引用？我似乎找不到任何有关此的 Intersystmes 文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:35:42.043

好吧，尚不清楚您遇到了什么具体问题。我刚刚测试了一个打开 Cache Studio 的类，转到 Object Inspector，选择 Storage，下到显示 SQL Storage Map 的行，单击选择该行时出现的省略号，选择主映射，然后全局名称将其设置为 ^[UCKE]MyGlobal。这为 SQL 语句生成了正确的 .INT 代码。

您是否在确保 SQL 运行时设置了局部变量时遇到问题？我只是不明白你在做什么吗？

# php - array('category') : 类 stdClass 的对象无法转换为字符串

> ID：11102554
> 
> 赞同：1
> 
> 时间：2012-06-19T13:56:19.367
> 
> 标签：php, codeigniter

> 类 stdClass 的对象无法转换为字符串

```
public function get($id = null)
{
    $terms                  = array('id' => $id);
    $blog                   = $this->model->getBy($terms); 

    // $blog => (object) [id => 1, category_id => 3]

    $fix->id                = $blog->id;
    // $fix->category       = $this->getCategory($blog->category_id); // Not work
    $fix->cat_or_something = $this->getCategory($blog->category_id); // Work

    return $fix;

    // $fix => (object) [id => 1, cat_or_something => [name => Some Category]]
} 
```

如果我更改`$fix->category`为`$fix->cat_or_something`，它将起作用。有一些奇怪的东西`$fix->category`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:15:03.370

问题出在代码中的其他地方。您很可能正在尝试在某处回显 $fix->category，并且由于它包含一个对象，因此您会收到错误。

**编辑2：**

再看一遍之后，我仍然坚持我最初的答案。如果您在屏幕截图 ( [http://d.pr/i/4Hn7](http://d.pr/i/4Hn7) ) 中查看代码的第 3 版，您会发现错误发生在 print_r 之后，因此在将其分配给 $fix->category 之后也是如此 -所以这不是问题

错误发生在**DB_active_rec.php**中。这就是我的版本（2.0）中的 _where() 方法。因此，这意味着您正在尝试在某处的 where 子句中使用 $fix->category ...尝试调查一下。

# c++ - 移动 std::vector 到 T*

> ID：11102557
> 
> 赞同：4
> 
> 时间：2012-06-19T13:56:28.197
> 
> 标签：c++, stl, vector, c++11, move-semantics

所有我有一个遗留代码，它在草稿中做了这样的事情：

```
// sadly I have to use this structure
struct LegacyStruct {
  int* values;
}
LegacyStruct* LgStr;
....
    std::vector<int> vec;
    // fill vector in some way here  

    size_t sz = vec.size();
    LgStr->values = new int[sz];
    std::copy(vec.begin(), vec.end(), &LgStr->values[0]); 
```

vec 可能很大，我需要避免将其复制到 int*。有没有办法做到这一点？我试过以下：

```
// type of new operator explained in More Effective C++
LgStr->values = new (&vec[0])int[vec.size()]; 
```

好的，`values`指向 vec 内部数组的开头，**但是当 vec 超出范围时它被破坏了。**但我必须保持它..

```
&vec[0] = nullptr; // does not compile of course 
```

所以问题是：在这种情况下是否可以应用移动语义？或者也许是其他一些技巧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:20:47.360

简短的回答是不，没有任何方法可以将 a`vector`缓冲区的所有权转移到`vector`.

我认为你最好的选择是通过使用包装来确保`vector`just 不会死：

```
class LegacyStructWrapper : private boost::noncopyable  // Or declare private copy constructor/copy assignment or use `= delete` in C++11.
{
private:
    std::vector<int> vec_;
    LegacyStruct wrapped_;
} 
```

然后任何时候你需要使用`values`，只需将其分配给`&vec_[0]`. 如果/直到您向其中添加更多项目，这将保持不变`vector`（因此您*必须*小心确保矢量调整大小不会导致问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T14:25:44.407

是的，你可以这样做——用一个小技巧：

```
struct LegacyStruct {
  std::vector<int> backingStore;
  int* values;
  LegacyStruct(std::vector<int>& aSource) {
    // Steal memory
    aSource.swap(backingStore);
    // Set pointer
    values = &backingStore[0];
  };
} 
```

该`vector.swap`操作不会复制整数。

# css - CSS 右负边距

> ID：11102563
> 
> 赞同：1
> 
> 时间：2012-06-19T13:56:46.923
> 
> 标签：css, overflow, margin

请帮我解决 CSS 边距的一个小问题。

HTML：

```
<body>
   <div id="wrapper">
      <div id="content"></div>
   </div>
</body> 
```

CSS：

```
* { margin:0; padding:0; }
body {
    background-image: url('/images/pat_1.gif'); 
    background-repeat: repeat;
}
#wrapper {  
        background-color: #fff;
        margin: 0 auto;
        width: 960px;
}
#content {
    background-color: #fff;
    margin: 0 -50px;
} 
```

里面`#content`有很多带有`width: 960px;`. 我在这里写的是负边距`background-color: #fff;`，因为我的`#wrapper`. 一切都很好，直到我将浏览器的窗口大小调整为 960px - 主要问题是窗口边框的右负边距不会消失，它不会像左边距一样隐藏。

我已经尝试过`overflow: hidden`，但它没有帮助。

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:19:02.603

尝试这个。将此行复制粘贴到`<head>`. 只有当用户的屏幕分辨率满足您的设置时，这才会加载一个 css 文件。

```
<link rel="stylesheet" type="text/css" href="css/q900.css" media="only screen and (min-width : 640px) and (max-width: 999px)" /> 
```

# c# - wpf自定义控件获取/设置不触发

> ID：11102570
> 
> 赞同：0
> 
> 时间：2012-06-19T13:57:15.110
> 
> 标签：c#, wpf, xaml, custom-controls

我正在学习 WPF，并且来自 Flex 和 AS，有时它似乎过于复杂。除了意见，我的问题如下。

我创建了一个自定义控件 ToolBarButton，它基本上是一个注定要包含在自定义工具栏中的图像按钮。我已经向这个控件添加了一些属性，我希望能够从 XAML 中设置它们。尽管该属性出现在 XAML 端的 AutoCompletion 中，但从未触发 Set 方法并且该属性保持为空。所以这里是 ToolBarButton 背后的代码：

```
 public static readonly DependencyProperty ImgSrcProperty = DependencyProperty.RegisterAttached("ImgSource", typeof(string), typeof(ToolBarButton));

    public static readonly DependencyProperty OnClickProperty = DependencyProperty.Register("OnClick", typeof(RoutedEventHandler), typeof(ToolBarButton));

    public ToolBarButton(RoutedEventHandler OnClick, string imgSrc, Map map = null, string ConfigFile = null) :
        base(ConfigFile, map)
    {
        if (OnClick != null) SetValue(OnClickProperty, OnClick);

        if (imgSrc != null) SetValue(ImgSrcProperty, imgSrc);

        this.AddChild(CreateButton());

        InitializeComponent();
    }

    public ToolBarButton() : this(null, null) { }

    private Button CreateButton()
    {
        BitmapImage icon = new BitmapImage();
        icon.BeginInit();
        icon.UriSource = new Uri(ImgSource, UriKind.Relative);
        icon.EndInit();

        Image img = new Image();
        img.Stretch = Stretch.Fill;
        img.Source = icon;

        Button BtnToAdd = new Button();
        BtnToAdd.Width = 35;
        BtnToAdd.Height = 35;
        BtnToAdd.Content = img;
        BtnToAdd.Background = new ImageBrush(icon);

        BtnToAdd.Click += OnClick;

        return BtnToAdd;
    }

    public string ImgSource
    {
        get { return (string)GetValue(ImgSrcProperty); }
        set { SetValue(ImgSrcProperty, value); }
    }

    public RoutedEventHandler OnClick
    {
        get { return (RoutedEventHandler)GetValue(OnClickProperty); }
        set { SetValue(OnClickProperty, value); }
    } 
```

您会注意到两个构造函数，一个用于在运行时创建控件，另一个用于从 XAML 创建它。

这是使用自定义控件但不触发 set 方法的 XAML 代码：

```
<BaseControls:ToolBar 
         x:Class="Basic_Mapping.Widgets.NavigationToolBar"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:BaseControls="clr-namespace:Basic_Mapping.Base_Controls"
         mc:Ignorable="d" >

<BaseControls:ToolBarButton Width="35" Height="35" ImgSource="Assets/i_zoomin.png"  ConfigFileName="ZoomIn.xml" /> 
```

任何帮助，将不胜感激！

吉尔曼

**编辑 ：**

这是用于 ToolBarButton 的基类，它的属性也有同样的问题。

```
public partial class ConfigurableUserControl : UserControl
{
    private XmlDocument configXML;

    public static readonly DependencyProperty XmlProperty = DependencyProperty.Register("ConfigFileName", typeof(string), typeof(ConfigurableUserControl));

    public static readonly DependencyProperty MapProperty = DependencyProperty.Register("Map", typeof(Map), typeof(ConfigurableUserControl));

    public ConfigurableUserControl(string configFile, Map map)
    {
        if (configFile != null) SetValue(XmlProperty, configFile);

        if (map != null) SetValue(MapProperty, map);

        string file = (string)GetValue(XmlProperty);

        if (file != null)
        {
            configXML = new XmlDocument();

            string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "..\\..\\Config\\" + configFile);

            if (File.Exists(path)) configXML.Load(path);
        }
    }

    public ConfigurableUserControl() : this(null, null) { }

    public string ConfigFileName
    {
        //get { return (string)GetValue(XmlProperty); }
        set { SetValue(XmlProperty, value); }
    }

    public Map Map
    {
        get { return (Map)GetValue(MapProperty); }
        set { SetValue(MapProperty, value); }
    }

    public XmlDocument ConfigXML
    {
        get { return configXML; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:09:37.900

尝试将其放在`InitializeComponent();`构造函数的开头，而不是当前所在的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:34:46.573

我的猜测是，这个问题以及您对基类的问题是由于您没有实现 INotifyPropertyChanged 并进行适当的调用。

# android - yuv到rgb在汇编程序中

> ID：11102576
> 
> 赞同：0
> 
> 时间：2012-06-19T13:57:33.410
> 
> 标签：android, android-ndk

在

```
public void onPreviewFrame(byte[] data, Camera camera) 
```

我们得到 YUV 格式的数据。现在为了转换为 RGB，我在 NDK 中使用了转换器。但它仍然不够快。

所以我发现了这个： [http ://www.roman10.net/effective-color-conversion-yuv-rgb-in-android-in-assembly/](http://www.roman10.net/effective-color-conversion-yuv-rgb-in-android-in-assembly/)

有这个 NDK 方法： [https ://github.com/roman10/roman10-android-tutorial/blob/master/colorConversion/jni/test.c](https://github.com/roman10/roman10-android-tutorial/blob/master/colorConversion/jni/test.c)

但我不知道如何更改它，以便它接受 YUV 字节数组“数据”并返回一个 RGB int 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:48:57.810

您必须编写一个类似于 的 JNI 函数[`naGetConvertedFrame()`](https://github.com/roman10/roman10-android-tutorial/blob/master/colorConversion/jni/test.c)。新函数将具有以下声明：

```
JNIEXPORT void JNICALL Java_<name>_convert(JNIEnv * pEnv, jobject pObj, jobject pBitmap, jbyteArray jData, jint jWidth, jint jHeight) 
```

函数的名称应该反映将该函数声明为`native`方法的 Java 类的名称（参见[RenderView.java](https://github.com/roman10/roman10-android-tutorial/blob/master/colorConversion/src/roman10/tutorial/media/colorconversion/RenderView.java)示例）。在 Roman 的示例中，*共享库*是从[Main.java](https://github.com/roman10/roman10-android-tutorial/blob/master/colorConversion/src/roman10/tutorial/media/colorconversion/Main.java)中的另一个类加载的——但这`loadLibrary()`可以很容易地转移到[RenderView.java](https://github.com/roman10/roman10-android-tutorial/blob/master/colorConversion/src/roman10/tutorial/media/colorconversion/RenderView.java)文件中。

```
private static native void convert(Bitmap _bitmap, byte[] data, int _width, int _height); 
```

您的函数将类似于原始示例，只是它不会读取文件，而是使用[GetByteArrayElements()](https://stackoverflow.com/questions/2237147/copying-a-byte-buffer-with-jni)获取转换器的**y**、**u**和**v**指针。

# actionscript-3 - firefox 不会将 xml 加载到由 html 代码中的参数调用的 swf 中（在 IE 中工作正常）

> ID：11102577
> 
> 赞同：-1
> 
> 时间：2012-06-19T13:57:36.730
> 
> 标签：actionscript-3, firefox, loaderinfo

我在 flash cs5/as3 中建立了一个练习。它从 xml 文件中提取其内容。因为我想让其他人更容易基于这个 swf 创建自己的练习，所以我希望 actionscript 加载 xml，文件名基于 html 代码中的参数。

在这种情况下，xml 称为**oef01.xml**

链接如下所示：**BoFlitsOefening.swf?id=oef01**

像这样的动作脚本：

```
public function Main ()
{
    //myFile is a string I declared earlier     
    myFile = LoaderInfo(this.root.loaderInfo).parameters["id"];
    myFile +=  ".xml";

    loadXml ();         
}

function loadXml ():void
{
    xmlLoader = new URLLoader(new URLRequest(bestand));
    xmlLoader.addEventListener (Event.COMPLETE,xmlLoaded);
}

function xmlLoaded (event:Event):void
{
    myList = new XML(event.target.data);
    myList.ignoreWhite = true;
} 
```

该构造在 Internet Explorer 中运行良好，但在 Firefox 中运行良好。我已经进行了互联网研究，但我找不到我能够应用的解释或解决方案，尽管这个问题是已知的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:43:09.473

您是在服务器上还是在本地测试它 - 浏览器中的 URL 应该以`http://`not开头`file:///`？

它应该可以在 Internet 上正常工作，而在本地包含的 URL`?`可能无法正确解析。
在这种情况下，您可以改用 FlashVars - 您无需更改 AS 代码，只需更改 HTML/JS。

附带说明：您可以尝试使用 SWFObject 嵌入 SWF 文件 - 一些跨浏览器问题是由错误/错误的嵌入代码引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:52:23.433

此外，FireFox 还喜欢缓存外部资源，因此它很可能正在加载旧文件。确保在更新 xml 后清除缓存。

有一种方法可以通过添加一些垃圾来欺骗它每次都重新加载它，比如

`.../my.xml?rand=001820018`

如果我没记错的话，您每次都会随机生成数字

# javascript - flowplayer html验证

> ID：11102578
> 
> 赞同：0
> 
> 时间：2012-06-19T13:57:45.950
> 
> 标签：javascript, jquery, html, flowplayer

好的，我正在尝试重建一个客户网站，该网站早就应该在后端和引擎盖下进行清理了。该客户端在任何网站上看到的大多数视频都使用 flowplayer，并且在尝试通过 w3c 验证器验证我的代码时，我注意到在这种情况下验证器抛出了 2 个与 flowplayer 相关的错误。

[http://validator.w3.org/check?uri=http%3A%2F%2Fv2.newyorkbarshow.com%2Fhome&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3](http://validator.w3.org/check?uri=http%3A%2F%2Fv2.newyorkbarshow.com%2Fhome&charset=%28detect+automatically%29&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.3)

我正在使用最新的 flowplayer，并按照那里的示例（我不知道这是否有效）。所以我想知道它是否没有开箱即用的验证，是否有人碰巧知道纠正它的方法，所以它会验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:13:17.130

您需要在对象标签中添加值为“/static/imgs/static/VidAd4BarShow.swf”的数据属性。

注意：我看到这发生在流播放器在您的源中执行任何内容之前......

# php - 在 Opencart 中自动填充元描述

> ID：11102584
> 
> 赞同：0
> 
> 时间：2012-06-19T13:58:04.593
> 
> 标签：php, automation, meta-tags, opencart

我正在尝试在我正在使用 Opencart 的网站上为 700 多种产品添加元描述，我希望我不必手动执行此操作。每个产品都已经有了产品描述，我遇到了一个在一定程度上实现这一点的脚本，但我需要稍微调整一下。不在 PHP 大师附近，我希望 SO 上的人可以提供帮助。

这是代码：

```
// Registry
$registry = new Registry();

// Loader
$loader = new Loader($registry);
$registry->set('load', $loader);

// Config
$config = new Config();
$registry->set('config', $config);

function get_meta_desc($string){
    return substr(strip_tags($string), 0, 255); 
}

// Database 
$db = new DB(DB_DRIVER, DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE);
$registry->set('db', $db);

$query = $db->query("SELECT * FROM `" . DB_PREFIX . "product_description` Order By product_id ASC");

foreach ($query->rows as $row){
    $query2 = $db->query("UPDATE `" . DB_PREFIX . "product_description` SET meta_description = '". mysql_real_escape_string(get_meta_desc($row['description'])) ."' WHERE product_id = '".$row['product_id']."'");
}

echo 'done';
@unlink('runonce.php'); 
```

但问题是它没有去除 HTML 标签。我不太了解PHP，但在我看来它应该可以工作，我不知道为什么不这样做。

我希望添加到脚本中的另一件事是检查元描述中是否已有内容，如果有，则不做任何事情并跳到下一个。

谢谢，evu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T03:51:18.700

描述通常在放入数据库之前进行 html 编码。

所以你的功能应该是：

```
function get_meta_desc($string){
    return substr(strip_tags(html_entity_decode($string)), 0, 255); 
} 
```

要检查元描述是否存在，您需要检查 meta_description 列：

```
function get_meta_desc($string, $meta){
    if(!empty($meta))
        return $meta;

    return substr(strip_tags(html_entity_decode($string)), 0, 255); 
}

get_meta_desc($row['description'], $row['meta_description']); 
```

# algorithm - 什么是算法的摊销分析？

> ID：11102585
> 
> 赞同：91
> 
> 时间：2012-06-19T13:58:10.883
> 
> 标签：algorithm, analysis, amortized-analysis

它与渐近分析有何不同？你什么时候使用它，为什么？

我读过一些似乎写得很好的文章，比如：

*   [http://www.ugrad.cs.ubc.ca/~cs320/2010W2/handouts/aa-nutshell.pdf](http://www.ugrad.cs.ubc.ca/~cs320/2010W2/handouts/aa-nutshell.pdf)

*   [http://www.cs.princeton.edu/~fiebrink/423/AmortizedAnalysisExplained_Fiebrink.pdf](http://www.cs.princeton.edu/~fiebrink/423/AmortizedAnalysisExplained_Fiebrink.pdf)

但我仍然没有完全理解这些概念。

那么，任何人都可以为我简化它吗？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-06-19T14:13:44.477

摊销分析不会天真地将调用次数乘以一次调用的最坏情况。

例如，对于一个在需要时大小翻倍的动态数组，正常的渐近分析只会得出结论，向其中添加一个项目的成本为 O(n)，因为它可能需要增长并将所有元素复制到新数组中。摊销分析考虑到，为了必须增长，必须添加 n/2 个项目而不会导致自上次增长以来的增长，因此添加一个项目实际上只需要 O(1)（O(n) 的成本是按n/2 次行动*摊销）。*

摊销分析与“平均绩效”不同 - 摊销分析对执行如此多操作时的绩效提供了*硬性保证。*

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-06-19T17:37:29.610

“什么”有很多答案，但“为什么”没有答案。

正如其他人所说，渐近分析是关于给定操作的性能如何扩展到大型数据集。摊销分析是关于大型数据集上所有操作的平均性能如何扩展。摊销分析从未给出比渐近的界限更差的界限，有时会给出更好的界限。

如果您关心较长作业的总运行时间，则摊销分析的更好界限可能是您关心的。这就是为什么脚本语言（例如）通常乐于以某种因素增长数组和哈希表，即使这是一项昂贵的操作。（增长可以是一种`O(n)`操作，但摊销是`O(1)`因为你很少这样做。）

如果您正在进行实时编程（单个操作必须在可预测的时间内完成），那么摊销分析的更好界限并不重要。平均而言，操作是否快速并不重要，如果您未能及时完成操作以在带锯切得太远之前返回并调整带锯......

在您的情况下，哪一个重要取决于您的编程问题到底是什么。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-06-19T14:38:42.813

## 渐近分析

该术语是指在假设算法操作的数据（*输入*）是“足够大，使其变大不会改变结论”的假设下对算法性能的分析。虽然不需要指定输入的确切大小（我们只需要一个上限），但必须指定数据集*本身*。

请注意，到目前为止，我们只讨论了分析*方法*；我们没有具体说明我们正在分析哪个*量*（时间复杂度？空间复杂度？），也没有指定我们感兴趣的*指标（最坏情况？最好情况？平均？）。*

在实践中，渐近分析一词通常指算法的*上限时间复杂度*，即由总运行时间衡量的最坏情况性能，它由大哦符号表示（例如，排序算法可能是`O(nlogn)`）。

## 摊销分析

该术语是指基于针对最坏情况的特定操作序列对算法性能的分析*——*也就是说，摊销分析确实意味着该指标是最坏情况的性能（尽管它仍然没有说明正在测量的量）。要执行此分析，我们需要指定输入的*大小*，但我们不需要对其形式做出任何假设。

用外行的话来说，摊销分析是为输入选择任意大小，然后“玩转”算法。每当必须做出取决于输入的决定时，都会采取最坏的路径¹。在算法运行完成后，我们将计算的复杂度除以输入的大小以产生最终结果。

¹注意：准确地说，*是理论上可能*的最坏路径。如果您有一个向量在每次容量耗尽时动态加倍，“最坏情况”并不意味着假设它在*每次*插入时都需要加倍，因为插入是作为序列处理的。我们被允许（并且确实必须）使用已知*状态*在数学上尽可能多地消除“更糟糕”的情况，即使输入仍然未知。

## 最重要的区别

渐近分析和摊销分析之间的关键区别在于前者取决于输入本身，而后者取决于算法将执行的操作序列。

所以：

*   渐近分析允许我们断言，*当给定大小接近 N 的最佳/最差/平均情况输入时，*算法的复杂性受某个函数 F(N) 的限制——其中 N 是一个变量
*   摊销分析允许我们断言，*当给定一个未知特征但已知大小 N 的输入时，算法的复杂性并不*比函数 F(N) 的值差——其中 N 是一个已知值

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-02-28T08:09:54.850

本书“摊销分析”一章的第一句话简洁地定义了这个问题的答案——算法简介：

> *在**摊销分析**中，执行一系列数据结构操作所需的时间是所有执行操作的平均时间。*

我们通过渐近分析来表示程序增长的复杂性——它通过一个函数来限制程序的增长，并定义最坏、最好或平均的情况。

但是，在只有一种情况下程序的复杂性达到峰值的情况下，这可能会产生误导，但一般来说，程序不需要太多的计算。

因此，在一系列操作中平均成本更有意义，即使单个操作可能很昂贵。这是摊销分析！

摊销分析是用于计算复杂性的渐近技术的替代方法。它帮助我们在实用性方面计算出更真实的复杂度，以便在两种或多种算法之间进行比较和决定。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-19T14:14:20.703

到目前为止，我找到的关于算法摊销分析的最佳参考资料，在《[算法简介》](https://rads.stackoverflow.com/amzn/click/com/0262033844)，第三版，第 17 章：“摊销分析”一书中。一切都在那里，解释得比 Stack Overflow 帖子中的内容要好得多。你会在任何像样的大学的图书馆里找到这本书。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-19T17:02:25.910

常规渐近分析渐近地查看单个操作的性能，作为问题大小的函数。O() 符号表示渐近分析。

摊销分析（也是一种渐近分析）着眼于*共享*数据结构上多个操作的*总体*性能。

 *不同之处在于，摊销分析通常证明，M 次操作所需的总计算量比单个操作的最坏情况的 M 倍具有更好的性能保证。

例如，对大小为 N 的[展开树](http://en.wikipedia.org/wiki/Splay_tree)的单个操作可能需要 O(N) 时间。然而，在大小为 N 的树上的一系列 M 操作的边界为 O( M(1+log N) + N log N ) 时间，每个操作大约是 O(log N)。但是，请注意，摊销分析比“平均情况”分析严格得多：它证明*任何可能*的操作序列都将满足其渐近最坏情况。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-19T14:19:24.403

摊销分析处理例行程序多次运行的总成本，以及从中可以获得的收益。例如，在一个未排序的 n 项数组中搜索单个匹配项可能需要进行 n 次比较，因此复杂度为 o(n)。但是，如果我们知道要在同一个数组中搜索 m 个项目，那么重复整个任务将具有 O(m*n) 的复杂度。但是，如果我们提前对数组进行排序，则成本为 O(n log(n))，并且连续搜索对排序后的数组只需 O(log(n))。因此，采用这种方法的 m 个元素的总摊销成本为 O(n*log(n) + m*log(n))。如果 m >= n，这相当于 O(n log(n)) 通过预排序与 O(n^2) 相比不排序。因此，摊销成本更便宜。

简而言之，通过在早期多花一点，我们可以在以后节省很多。*

# javascript - 无法在 javascript 中枚举对象的所有属性

> ID：11102590
> 
> 赞同：0
> 
> 时间：2012-06-19T13:58:27.980
> 
> 标签：javascript

我是使用 javascript 的新手，并且有以下代码：

```
<html>
    <body>
    <object classid="clsid:f6D90f11-9c73-11d3-b32e-00C04f990bb4" id="abc">
    </object>
    <script>
    var b=document.getElementById("abc");
    for (a in b){
        document.write(a+"<br>");
    }
    alert(b.object);
    </script>
    </body>
</html> 
```

现在，我的问题是为什么这段代码不枚举对象 b 的所有属性。更具体地说，这段代码没有枚举“对象”属性。但是代码 alert(b.object) 告诉我这是一个对象。

我做的一切都正确吗？有人可以澄清我的疑问。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:06:14.933

要枚举对象的所有属性（无论是拥有的还是继承的，可枚举的或不可枚举的），请执行以下操作：

```
do {
    Object.getOwnPropertyNames( obj ).forEach(function ( prop ) {
        // process prop       
    });
} while ( obj = Object.getPrototypeOf( obj ) ); 
```

**现场演示：http:** [//jsfiddle.net/L899Z/3/](http://jsfiddle.net/L899Z/3/)

# azure - 虚拟机无法重新启动。当前虚拟机状态为 RoleStateUnknown

> ID：11102593
> 
> 赞同：1
> 
> 时间：2012-06-19T13:58:36.860
> 
> 标签：azure

如果有人能对我遇到的这个问题有所了解，我将不胜感激。

使用 VirtualBox 成功创建了一个 Windows 2008 VHD 并使用 csupload 上传到 Azure，创建了一个图像，我遇到了以下问题。

首次提供 VM 时，VM 进入“已停止”并出现以下错误。

“虚拟机无法重启。当前虚拟机状态为 RoleStateUnknown。

浏览器：5.0（兼容；MSIE 9.0；Windows NT 6.1；WOW64；Trident/5.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；Media Center PC 6.0；InfoPath.3 ; .NET4.0C; .NET4.0E)”。

我尝试重新启动 VM，但状态仍为 Provisioning (running)。

我是否因为预览版而遇到这些问题，您是否建议 Azure 在此阶段不适合用于预配虚拟机？

任何帮助、建议或指导将不胜感激。

问候，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:16:29.680

虽然您已正确完成所有操作，但您可能在平台中遇到了可能导致此问题的已知问题。问题描述如下：

[由于 RoleStateUnknown，机器无法重新启动](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/5b7063d7-51b4-4258-bff5-2269dd385f85)

我的建议是尝试上面链接中给出的建议，并将您的故障排除详细信息发布到适用于 Windows 的[Windows Azure 虚拟机，](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/threads)以便有人进一步帮助您。

或者，为了加快您的分辨率，您可以尝试使用图库中的图像并安装您的东西以使其适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:06:26.510

你对机器进行了系统准备吗？如果您上传图片，这是一项要求：

> [第 4 步：准备要上传](https://www.windowsazure.com/en-us/manage/windows/common-tasks/upload-a-vhd/#prepimage)的映像：在将映像上传到 Windows Azure 之前，必须使用 Sysprep 命令对其进行概括。

如果您仍然遇到问题，我建议您查看此主题，该主题描述了上传您自己的图像时最常见的问题：[常见问题 - 上传的 VHD](http://social.msdn.microsoft.com/Forums/en/WAVirtualMachinesforWindows/thread/66c8c2d3-19bb-4248-a36f-d2dfe9742dd3)

# c# - 更改代码生成的模型命名约定

> ID：11102597
> 
> 赞同：0
> 
> 时间：2012-06-19T13:58:49.943
> 
> 标签：c#, oracle, entity-framework, inheritance

当我使用子表和父表创建 EF 模型时，代码生成模型 - > 数据库会创建一个我不喜欢的命名约定。

如果我有 Parent 表，并且 Child 表继承自 Parent 表，那么对于数据库脚本，它会生成 Parent1 表和 Parent1_Child 表，而不是 Parent 表和 Child 表。

如何修复它，以便在使用“从模型生成数据库”时生成我想要的命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:38:36.417

您可以更改 DDL 生成模板。根据文章，您制作了自己的 T4 模板，只需指向 EF 以使用您的自定义 T4 来生成 DDL，而不是原来的。我个人从未这样做过，但这篇文章应该给你一些指导：http: [//msdn.microsoft.com/en-us/library/dd560887.aspx](http://msdn.microsoft.com/en-us/library/dd560887.aspx)

本质上，您可以只复制原始 T4 文本并替换您自己的命名约定。只需确保您还更改了类生成模板以遵循映射部分中的相同命名约定。

# c++ - 如何更改 shm_open 路径？

> ID：11102599
> 
> 赞同：3
> 
> 时间：2012-06-19T13:58:56.920
> 
> 标签：c++, linux, boost, shared-memory

我目前正在ubunto上开发一个应用程序并调用shm_open，目前默认路径在/var/run/shm内。但是我需要将其更改为 /tmp。简单地尝试以下方法不起作用：

fd = shm_open("/tmp/test", O_RDWR | O_CREAT, 0777);

谁能给点建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T14:36:25.180

从手册页`shm_open(3)`：

> `name`指定要创建或打开的共享内存对象。对于可移植使用，共享内存对象应该由一个形式的名称来标识`/somename`；也就是说，一个以空字符结尾的字符串，最多`NAME_MAX`包含（即 255 个）字符，由一个初始斜杠组成，后跟一个或多个字符，*其中没有一个是斜杠*。

的`name`参数`shm_open(3)`是对象名，不是文件路径！碰巧 GLIBC 将所有共享内存对象放在对象名称的路径中`/dev/shm`或`/var/run/shm`通过在路径前面加上对象名称并调用`open()`结果名称。如果您指定`/tmp/test`为共享对象名称，那么 Linux 将尝试打开或创建`/var/run/shm/tmp/test`. 打开方式`O_CREAT`创建新文件但*不创建新目录*。

如果您`/var/run/shm/tmp`在调用`shm_open("/tmp/test", ...)`. 请记住在完成共享内存对象后将其删除。另请注意，使用内部带有两个斜杠的对象名称可能无法移植到其他 Unix 系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:01:35.567

为此，您需要安装一个`tmpfs`文件系统`/tmp`：

```
mihai@keldon:~$ mount | grep shm
shm on /dev/shm type tmpfs (rw,nosuid,nodev,relatime) 
```

否则，这是不可能的。

# javascript - JavaScript 我的密码测试功能不起作用

> ID：11102600
> 
> 赞同：0
> 
> 时间：2012-06-19T13:59:04.873
> 
> 标签：javascript, regex

```
function demoMatchClick() {
  var validString = /^[a-z](?=[a-z]*[0-9])[a-z0-9]{0,6}[a-z]$/
  var re = new RegExp(validString);
  if (document.form1.subject.value.test(re)) {
    alert("Successful match");
  } else {
    alert("No match");
  }
}

<INPUT TYPE=SUBMIT VALUE="Replace" ONCLICK="demoReplaceClick()"> 
```

我无法让它弹出一个弹出警报

我希望这些规则得到执行

```
•没有大写字母。
•以字母开头。
• 至少有1 个数字不在开头和结尾。
•最多有 8 个字母数字
•没有像@#$ 字符这样的符号（像!@#$%^&*()-+ 这样的符号）。
```

我现在正在使用一个按钮来执行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:24:54.520

这是修改后的代码：

```
function demoMatchClick(input) {
  var validString = /^[a-z](?=[a-z]*[0-9])[a-z0-9]{0,6}[a-z]$/;
  if (validString.test(input)) {
    alert("Successful match");
  } else {
    alert("No match");
  }
}

demoMatchClick("hello world"); 
```

validString 变量已经是一个 RegExp 对象，您可以直接使用它，另外 .test() 方法属于 regex 对象而不是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:30:29.833

好吧，我想这个正则表达式适合你的规则......

```
var rules = /^[a-z](?=[a-z]*[0-9])[a-z0-9]{0,6}[a-z]$/; 
```

但我认为您的代码存在几个问题，我想指出。请不要将其视为个人冒犯：相信我，我实际上为您节省了很多时间和精力。

首先，有一个标准规则：每个函数应该只做一件事——但要做得非常好（或者他们说，这些完美主义者！）。您的代码与 DOM 提取的耦合过于紧密：当粘贴到我的环境中时它无法工作时，我真的很惊讶！直到那时我才注意到那个`document.forms`电话。这里并不真正需要它：构建一个带一个参数的函数就足够了，然后用在其他地方提取的值调用这个函数。这样，顺便说一句，您可以轻松区分错误的原因：它可能在 DOM 部分，或者在函数中。

其次，正则表达式在 JavaScript 中确实非常接近于被视为一等公民（在 Perl 中不是这样，但仍然比在其他一些语言中更接近）。这意味着您可以按原样编写正则表达式文字，并在以后使用它 - 无需新的 Regexp 构造。

说了这么多，我会把你的代码写成......

```
function validatePassword(password) {
  var rules = /^[a-z](?=[a-z]*[0-9])[a-z0-9]{0,6}[a-z]$/;
  return rules.test(password);
} 
```

...然后通过类似...的方式使用它

```
var password = document.form1.subject.value;
alert( validatePassword(password) ? 'Success! :)' : 'Failure... :(' ); 
```

PS 是的，Riccardo 是对的：对密码设置过于严格的规则 - 并遭受缩小攻击者搜索范围的后果。并且很容易看到 Javascript 中设置的验证规则：即使是混淆器也无济于事。

# c# - ASP.NET MVC 应用程序最佳实践中的服务层类

> ID：11102608
> 
> 赞同：0
> 
> 时间：2012-06-19T13:59:36.117
> 
> 标签：c#, asp.net-mvc, architecture, asp.net-mvc-4

您能否提供一个代码示例，其中包含用于创建服务层类（应该由 Web 前端、Web API 等使用）的基本架构指南？

你认为这是一个很好的教程吗？[http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validating-with-a-service-layer-cs)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:32:23.353

我个人不喜欢那篇文章如何描述将错误从服务层传递回控制器（使用 IValidationDictionary），我会让它更像这样工作：

```
[Authorize]
public class AccountController : Controller
{
    private readonly IMembershipService membershipService;

    // service initialization is handled by IoC container
    public AccountController(IMembershipService membershipService)
    {
        this.membershipService = membershipService;
    }

    // .. some other stuff ..

    [AllowAnonymous, HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (this.ModelSteate.IsValid)
        {
            var result = this.membershipService.CreateUser(
                model.UserName, model.Password, model.Email, isApproved: true
            );

            if (result.Success)
            {
                FormsAuthentication.SetAuthCookie(
                    model.UserName, createPersistentCookie: false
                );

                return this.RedirectToAction("Index", "Home");
            }

            result.Errors.CopyTo(this.ModelState);
        }

        return this.View();
    }
} 
```

或者..正如 mikalai 提到的，让服务抛出验证异常，在全局过滤器中捕获它们并插入模型状态。

# xcode - 从命令行复制 Xcode Cmd + R

> ID：11102610
> 
> 赞同：0
> 
> 时间：2012-06-19T13:59:38.230
> 
> 标签：xcode, vim, makefile

我想要实现的是在`vim`运行时编辑代码，这将调用与 Xcode 中的+`make`相同的功能：构建并启动具有最新更改的模拟器。`Cmd``R`

在这个过程中调用了哪些实际命令以及使用了哪些参数？有没有办法从 Xcode 中查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:03:14.973

尝试`xcodebuild`从项目目录运行。使用`--help`参数运行将显示您需要的所有内容 - 要构建的项目、要运行的目标、要使用的 sdk（iphoneos 或 iphonesimulator）。通常调用如下所示：

```
xcodebuild -project MyProject -target MyApplication -configuration Release -sdk iphonesimulator5.1 
```

# javascript - Javascript - 使用字符串作为对象引用

> ID：11102611
> 
> 赞同：1
> 
> 时间：2012-06-19T13:59:39.863
> 
> 标签：javascript, javascript-objects

如果我有一堆对象，并且在这些对象中是字符串“id”（与对象名称相同），我如何使用该字符串来引用对象？

例子：

```
//These objects are tests - note the id's are the same as the object name

var test1 = {
    id : "test1",
    data : "Test 1 test 1 test 1"
}

var test2 = {
    id : "test2",
    data : "Test 2 test 2 test 2"
}

/* ----- My Function   ----- */

var myObj = null;

function setMyObj(obj){
   myObj = obj;
}

setMyObj(test1);

/* ----- My Function   ----- */ 
```

现在，如果我调用以下命令：

```
myObj.id; 
```

结果是“test1”（一个字符串）。如果我想用它从 test1 中获取数据，我该怎么做？

```
"myObj.id".data
[myObj.id].data 
```

^^^

这些都不行！

干杯，有钱

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:02:30.707

如果您的变量是在全局范围内定义的，则以下工作

```
window[ myObj.id ].data 
```

如果你在一个函数的范围内，事情会变得更加困难。最简单的方法是在 window 上的特定命名空间中定义您的对象并检索类似于上述代码的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:02:59.760

将 test1 和 test2 存储在键值集合（也称为对象）中。然后像这样访问它：

```
collection[myObj.id].data 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T14:04:15.840

如果你想使用一个变量来引用某个东西，那么就让它成为一个对象属性，而不是一个变量。如果它们足够相关，可以以这种方式访问​​，那么它们就足够相关，可以有适当的数据结构来表达这种关系。

```
var data = {
    test1: {
        id: "test1",
        data: "Test 1 test 1 test 1"
    },
    test2: {
        id: "test2",
        data: "Test 2 test 2 test 2"
    }
}; 
```

然后您可以访问：

```
alert( data[myObj.id] ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:17:25.993

很好的答案，感谢您的帮助，以防将来有人发现它，这就是我将要使用它的方式：

```
var parent = {}

parent.test1 = {
    id : "test1",
    data : "Test 1 test 1 test 1"
}

parent.test2 = {
    id : "test2",
    data : "Test 2 test 2 test 2"
}

var myObj = null;

function setMyObj(obj){
   myObj = obj;
}

setMyObj(parent.test1);

parent[myObj.id] = null;
//Test1 object is now null, not myObj! 
```

# web-services - 在一个 POST 命令中卷曲多个数据

> ID：11102614
> 
> 赞同：6
> 
> 时间：2012-06-19T13:59:51.257
> 
> 标签：web-services, post, curl

谁能告诉我是否可以（在命令行中）发出包含文件和其他参数的 POST 命令？

我正在尝试做类似的事情：

```
curl -X POST -F "key=myKey&file=@myfile.txt"  http://localhost:8080/myRestService/ 
```

我在这个领域真的很新，所以请原谅我的基本问题。但它似乎效果不佳。有什么建议吗？非常喜欢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T14:05:59.660

你应该使用 -d 参数

检查手册页 [http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

> 如果您以字母 @ 开始数据，则其余部分应该是从中读取数据的文件名，或者 - 如果您希望 curl 从标准输入中读取数据。文件的内容必须已经是 URL 编码的。也可以指定多个文件。因此，将使用 --data @foobar 从名为“foobar”的文件发布数据。

尝试指定文件的完整路径。

# python - (ValueError) 使用 python 读取串口响应

> ID：11102617
> 
> 赞同：0
> 
> 时间：2012-06-19T13:59:54.190
> 
> 标签：python, serial-port, pyserial

我正在尝试读取串行端口的响应。（我正在使用 RFID 模块）这是我的代码：

```
import serial
ser = serial.Serial()
ser.port = "/dev/ttyUSB0"
ser.baudrate = 9600
ser.timeout = 3
ser.open()
if ser.isOpen():
    ser.write("\xFF\x01\x03\x10\x02\x02\x18")
    print("command written")
while ser.isOpen():
    response = ser.read(5)
    print("trying to read")
    print(int(response,16)) 
```

起初我直接使用 print(response) 得到的是：

```
trying to read
�#�� 
```

因此我使用 print(int(response,16)) 将响应转换为整数，现在我收到错误：

```
Traceback (most recent call last):
  File "serialread.py", line 13, in <module>
    print(int(response,16))
ValueError: invalid literal for int() with base 16: '\x94#\xdb\xff' 
```

我应该怎么办？我对python很陌生，不知道问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:09:19.633

您的字符串已经是十六进制文字：

```
>>> x = '\x94#\xdb\xff'
>>> x.encode('hex')
'9423dbff'
>>> int(x.encode('hex'),16)
2485378047L 
```

# javascript - 按行名编辑一行中的值

> ID：11102620
> 
> 赞同：0
> 
> 时间：2012-06-19T14:00:13.953
> 
> 标签：javascript, sql, appcelerator

标题有点模糊；不知道该怎么说。

无论如何，我想要做的是使用一个按钮，当按下时，它会得到当前窗口的名称（这部分不是问题），然后它会在 SQLite 数据库中查找该行具有与窗口标题相同的“实体名称”列值，然后它将进入该行并将“收藏夹”列值更改为 1。

所以，这就是我想要它做的事情，而我实际上无法弄清楚的部分只是检查具有正确名称值的行的所有行，然后只在该行中进行一个更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:04:18.880

就像是：

```
Update [table name] Set favorite= '1' Where ColumName = 'entity_name' 
```

# iphone - 如何在 iOS 相机中添加浮动按钮？

> ID：11102622
> 
> 赞同：1
> 
> 时间：2012-06-19T14:00:21.597
> 
> 标签：iphone, ios

我正在为我的相机使用 UIImagePickerController 并添加了一个叠加视图控制器来拍摄快照并转到相册（如 PhotoPicker 示例中所述）。但现在我想像普通相机一样添加两个浮动按钮（一个用于闪光灯，另一个用于切换相机）。您能告诉我如何添加这些浮动按钮，或者如果不是浮动按钮，它们到底叫什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:48:02.417

以编程方式添加`UIButtons`，然后`Overlay View Controller`使用`[overlayView addSubView:yourButton];`

# hibernate - 休眠空 NOT 表达式

> ID：11102623
> 
> 赞同：0
> 
> 时间：2012-06-19T14:00:22.690
> 
> 标签：hibernate, hibernate-criteria, logical-operators

我需要将 IConditionTree 表示形式转换为 Criterion。

目前我已经实现了逻辑运算符 AND 和 OR，现在我还需要添加 NOT。但是这种类型的标准不表示为 Junction，需要通过 Restrictions.not(Criterion criteria) 创建。在处理我的条件树期间，我不知道必须作为输入参数插入的以下标准。

```
//initial call
criteria.add(generateNodeCriteria(conditionTree.getRoot(), conditionTree));

private Criterion generateNodeCriteria(IConditionTreeNode node, IConditionTree conditionTree) throws SomeException {
    // Create criteria for condition
    if (node.getCondition() != null) {
        return createConditionCriterion(node.getCondition());
    }

    // Create criteria for logical operator
    if (node.getLogicalOperator() != null) {
        // What logical operator to use?
        Junction junction = null;
        switch (node.getLogicalOperator()) {
        case AND:
            junction = Restrictions.conjunction();
            break;
        case OR:
            junction = Restrictions.disjunction();
            break;
        }

        // Add all direct children of logical operator into conjunction
        for (IConditionTreeNode childNode : conditionTree.getOneLevelChildren(node)) {
            junction.add(generateNodeCriteria(childNode, conditionTree));
        }
        return junction;
    }
    throw new SomeException();
} 
```

有什么办法，如何将 NOT 逻辑运算符实现到 switch 部分？如果我希望 NOT 逻辑运算符的行为与 AND/OR 运算符相同，我应该改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:26:03.207

我想你的树里只有一个孩子，所以这里是：

```
//initial call
criteria.add(generateNodeCriteria(conditionTree.getRoot(), conditionTree));

private Criterion generateNodeCriteria(IConditionTreeNode node, IConditionTree    conditionTree) throws SomeException {
    // Create criteria for condition
    if (node.getCondition() != null) {
    return createConditionCriterion(node.getCondition());
}

// Create criteria for logical operator
if (node.getLogicalOperator() != null) {

    boolean addChildren = false;

    // What logical operator to use?
    Junction junction = null;
    switch (node.getLogicalOperator()) {
    case AND:
        junction = Restrictions.conjunction();
        addChildren = true;
        break;
    case OR:
        junction = Restrictions.disjunction();
        addChildren = true;
        break;
    case NOT:
        junction = Restrictions.not(generateNodeCriteria(conditionTree.getOneLevelChildren(node).get(0), conditionTree));
    }

    if (addChildren)
      // Create all children first
      for (IConditionTreeNode childNode : conditionTree.getOneLevelChildren(node)) {
          junction.add(generateNodeCriteria(childNode, conditionTree));
      }

    return junction;
}
throw new SomeException();
} 
```

# node.js - 骨干网/节点 CORS：选项 200 OK，POST 不起作用（Access-Control-Allow-Origin）

> ID：11102624
> 
> 赞同：0
> 
> 时间：2012-06-19T14:00:24.717
> 
> 标签：node.js, post, backbone.js, express, cors

我正面临当前的问题，这对我来说似乎很奇怪。我在前面使用主干来处理我的应用程序，在后面使用 Node/Express。

OPTIONS 请求导致 200 OK（我在节点上添加了一个中间件以允许 CORS 请求）但 POST 请求没有触发。OPTIONS 也是 200 但它仍然在我的控制台中引发错误......

我拍了一些截图：

选项请求： ![选项确定](../Images/e7ffbedba6e2e112053e5b77a2465a60.png)

发帖请求： ![发布错误](../Images/7a32b3a49dbb661026476a97def9d66d.png)

控制台中的错误 ![错误](../Images/b34098e9647d8cad96ad956a37af0760.png)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:10:13.543

`http://localhost`Access-Control-Allow-Origin在请求时授权`http://localhost:5000` 您也需要允许。

# javascript - 预加载脚本而不执行

> ID：11102625
> 
> 赞同：14
> 
> 时间：2012-06-19T14:00:29.133
> 
> 标签：javascript, performance, browser, requirejs

## 问题

为了提高页面性能**，我需要预加载**需要**在底部页面上运行的**脚本。

我想控制脚本何时被解析、编译和执行。

我必须**避免使用 script 标签**，因为它会[阻碍常见的渲染引擎](http://developer.yahoo.com/performance/rules.html#js_bottom)（geeko 等）。

我无法使用**defer**属性加载它，因为我需要控制脚本何时执行。此外，**异步**属性是不可能的。

样本：

```
<html><head>
//preload scripts ie: a.js  without use the script
</head><body> ..... all my nice html here
//execute here a.js
</body></html> 
```

这使我可以最大限度地提高页面的渲染性能，因为浏览器将开始下载脚本内容，并且将同时并行渲染页面。最后，我可以添加脚本标签，这样浏览器就会解析、编译和执行代码。

我能做到这一点的唯一方法是使用隐藏的图像标签。[（这是Stoyan](http://www.phpied.com/preload-cssjavascript-without-execution/)的简化版本）

IE

```
 <html><head>
 <img src="a.js" style=display:none;>
</head><body> ..... all my nice html here
 <script src="a.js">  
</body></html> 
```

## 问题

使用这种技术我没有发现任何问题，但是有人知道更好的方法吗？是否有任何元预取？

## 附加信息

我正在使用**requirejs**，所以我尝试预加载模块代码，而不执行它，因为此代码取决于 DOM 元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:25:26.873

使用类似的技术，您可以`img`为 Internet Explorer预加载脚本和样式表，并`object`为其他所有浏览器添加标签。

```
var isMSIE = /*@cc_on!@*/false;

var resources = ['a.js', 'b.js', 'c.css'];

for (var i=0; i<resources.length; i++){
  if (isMSIE){
    new Image().src = resources[i];
  } else {
    var o = document.createElement('object');
    o.data = resources[i];
    document.body.appendChild(o);
  }
} 
```

有一篇博客文章描述了这种技术并概述了注意事项：[Preload CSS/JavaScript without execution](http://www.phpied.com/preload-cssjavascript-without-execution/)。

但是，为什么您不想像其他答案中建议的那样只使用动态添加的脚本，这可能会导致更清洁的解决方案，并具有更多的控制权。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-10T13:25:40.300

您可以使用`prefetch`链接标签的属性来预加载任何资源，包括 javascript。截至撰写本文时（2016 年 8 月 10 日），Safari 不支持它，但几乎在其他任何地方都支持它：

`<link rel="prefetch" href="(url)">`

有关支持的更多信息：http: [//caniuse.com/#search=prefetch](http://caniuse.com/#search=prefetch)

请注意，IE 9,10 未在`caniuse`矩阵中列出，因为 Microsoft 已停止对它们的支持。

[此处提供更多信息](https://developer.mozilla.org/en-US/docs/Web/HTTP/Link_prefetching_FAQ)以及[更多预加载选项，例如预渲染等](https://css-tricks.com/prefetching-preloading-prebrowsing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-27T13:32:36.220

对于您想在不执行的情况下下载的每个脚本，创建一个包含名称和 url 的对象，并将这些对象放入一个数组中。

遍历数组，使用`jQuery.ajax`with`dataType: "text"`将脚本下载为文本。在`done`ajax 调用的处理程序中，将文件的文本内容（在第一个参数中传递）存储在适当的对象中，增加一个计数器，并在该计数器等于您的文件数时调用“alldone”函数正在以这种方式下载。

在“alldone”函数（或更高版本）中执行以下操作：再次循环遍历您的数组，并为每个条目使用`document.createElement("script")`,`document.createTextNode(...)`和`(...scriptNode...).appendChild(...)`动态生成具有预期源代码的脚本，而不是通过“src”属性。最后， do `document.head.appendChild(...scriptNode...)`，这是执行该脚本的时间点。

我在需要使用框架的项目中使用了这种技术，其中几个框架和/或框架集需要相同的 JavaScript 文件，以确保每个文件只从服务器请求一次。

代码（测试和工作）如下

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>
    <head>
        <script id="scriptData">
            var scriptData = [
                { name: "foo"    , url: "path/to/foo"    },
                { name: "bar"    , url: "path/to/bar"    }
            ];
        </script>
        <script id="scriptLoader">
            var LOADER = {
                loadedCount: 0,
                toBeLoadedCount: 0,
                load_jQuery: function (){
                    var jqNode = document.createElement("script");
                    jqNode.setAttribute("src", "/path/to/jquery");
                    jqNode.setAttribute("onload", "LOADER.loadScripts();");
                    jqNode.setAttribute("id", "jquery");
                    document.head.appendChild(jqNode);
                },
                loadScripts: function (){
                    var scriptDataLookup = this.scriptDataLookup = {};
                    var scriptNodes = this.scriptNodes = {};
                    var scriptNodesArr = this.scriptNodesArr = [];
                    for (var j=0; j<scriptData.length; j++){
                        var theEntry = scriptData[j];
                        scriptDataLookup[theEntry.name] = theEntry;
                    }
                    //console.log(JSON.stringify(scriptDataLookup, null, 4));
                    for (var i=0; i<scriptData.length; i++){
                        var entry = scriptData[i];
                        var name = entry.name;
                        var theURL = entry.url;
                        this.toBeLoadedCount++;
                        var node = document.createElement("script");
                        node.setAttribute("id", name);
                        scriptNodes[name] = node;
                        scriptNodesArr.push(node);
                        jQuery.ajax({
                            method   : "GET",
                            url      : theURL,
                            dataType : "text"
                        }).done(this.makeHandler(name, node)).fail(this.makeFailHandler(name, node));
                    }
                },
                makeFailHandler: function(name, node){
                    var THIS = this;
                    return function(xhr, errorName, errorMessage){
                        console.log(name, "FAIL");
                        console.log(xhr);
                        console.log(errorName);
                        console.log(errorMessage);
                        debugger;
                    }
                },
                makeHandler: function(name, node){
                    var THIS = this;
                    return function (fileContents, status, xhr){
                        THIS.loadedCount++;
                        //console.log("loaded", name, "content length", fileContents.length, "status", status);
                        //console.log("loaded:", THIS.loadedCount, "/", THIS.toBeLoadedCount);
                        THIS.scriptDataLookup[name].fileContents = fileContents;
                        if (THIS.loadedCount >= THIS.toBeLoadedCount){
                            THIS.allScriptsLoaded();
                        }
                    }
                },
                allScriptsLoaded: function(){
                    for (var i=0; i<this.scriptNodesArr.length; i++){
                        var scriptNode = this.scriptNodesArr[i];
                        var name = scriptNode.id;
                        var data = this.scriptDataLookup[name];
                        var fileContents = data.fileContents;
                        var textNode = document.createTextNode(fileContents);
                        scriptNode.appendChild(textNode);
                        document.head.appendChild(scriptNode); // execution is here
                        //console.log(scriptNode);
                    }
                    // call code to make the frames here
                }
            };
        </script>
    </head>
    <frameset rows="200pixels,*" onload="LOADER.load_jQuery();">
        <frame src="about:blank"></frame>
        <frame src="about:blank"></frame>
    </frameset>
</html> 
```

与上述方法密切相关的 [其他问题](https://stackoverflow.com/questions/148441/how-can-i-get-the-content-of-the-file-specified-as-the-src-of-a-script-tag#)[其他相关问题](https://stackoverflow.com/questions/8843132/what-are-the-ways-to-load-javascript-or-css-without-executing-them)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:30:28.690

您应该查看以下链接：

[http://calendar.perfplanet.com/2011/lazy-evaluation-of-commonjs-modules/](http://calendar.perfplanet.com/2011/lazy-evaluation-of-commonjs-modules/)

[http://tomdale.net/2012/01/amd-is-not-the-answer/](http://tomdale.net/2012/01/amd-is-not-the-answer/)

以及 ember.js 如何使用名为 minispade 的工具和使用 ruby​​ 进行预处理来加快加载、解析和运行 javascript 模块的过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T14:08:27.867

为什么不试试这个？

```
var script = document.createElement('script');
script.src = 'http://path/to/your/script.js';
script.onload = function() {
  // do something here
}

document.head.appendChild(script); 
```

您可以使用 .onload 事件来控制它何时加载。一个警告是 .onload() 在 IE 中不起作用，您可以使用它：

```
script.onreadystatechange = function() {
  if (/^loaded|complete$/i.test(this.readyState)) {
    // loaded
  };
} 
```

此外，通过 DOM 添加脚本是非阻塞的，我相信您可以使用这种方法完美地实现您的目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-08T17:09:23.820

我在那里回答了同样的问题：

[https://stackoverflow.com/a/46121439/1951947](https://stackoverflow.com/a/46121439/1951947)

只需使用`<link>`标签预加载您的脚本，然后您可以将其与`<script>`标签一起使用

例如：`<link href="/js/script-to-preload.js" rel="preload" as="script">`

# iphone - 释放 CFString

> ID：11102629
> 
> 赞同：2
> 
> 时间：2012-06-19T14:00:36.513
> 
> 标签：iphone, objective-c, ios, memory-management, cfstring

我使用此代码获取 ABPerson 的姓氏

```
CFStringRef lastNameRef = ABRecordCopyValue((ABRecordRef)personRecordRef, kABPersonLastNameProperty);
NSString *friendLastName = (NSString*)lastNameRef;
CFRelease(lastNameRef); 
```

当姓氏的值不等于 NULL 时它工作正常但是当这个值为 NULL 时应用程序在第三行崩溃，因为我尝试释放 NULL

问题是女巫是在这种情况下释放 CFString 而不会导致应用程序崩溃的最佳方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:07:45.353

只需使用 if 来检查 NULL。

```
if (lastNameRef != NULL)
    CFRelease(lastNameRef); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:18:56.223

`CFRelease`需要一个非 NULL 指针。您可以使用`if`语句进行检查，但更容易简单地释放或自动释放`friendLastName`：

```
CFStringRef lastNameRef = ABRecordCopyValue((ABRecordRef)personRecordRef, kABPersonLastNameProperty);
NSString *friendLastName = (NSString*)lastNameRef;
// use friendLastName
[friendLastName release]; 
```

或者

```
CFStringRef lastNameRef = ABRecordCopyValue((ABRecordRef)personRecordRef, kABPersonLastNameProperty);
NSString *friendLastName = (NSString*)lastNameRef;
[friendLastName autorelease];
// use friendLastName 
```

由于您似乎没有使用`lastNameRef`，您也可以内联该变量：

```
NSString *friendLastName = (NSString*)ABRecordCopyValue((ABRecordRef)personRecordRef, kABPersonLastNameProperty);
// use friendLastName
[friendLastName release]; 
```

或者

```
NSString *friendLastName = (NSString*)ABRecordCopyValue((ABRecordRef)personRecordRef, kABPersonLastNameProperty);
[friendLastName autorelease];
// use friendLastName 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T14:13:18.363

CFRelease 是旧的 C 风格代码。在调用 CFRelease 之前应该检查 NULL，因为在调用 CFRelease 之后也将 lastNameRef 设置为 NULL。

`if (lastNameRef != NULL) { CFRelease(lastNameRef); lastNameRef = NULL; }`

# javascript - 如何删除字段中的字符javascript

> ID：11102632
> 
> 赞同：0
> 
> 时间：2012-06-19T14:00:52.007
> 
> 标签：javascript, decimalformat

我尝试使用以下代码将文本字段值从 to 格式化`(N50,000.00 NGN)`，`(50000)`但结果不是生成，而是`50000`生成`5000000`.

有人可以帮忙吗？

```
<script type="text/javascript" language="javascript">

    function doWork() {
        var amount = document.getElementsByName('amount');
        var str = amount[0].value;
        var temp = '';
        for (i = 0; i < str.length; i++) {
            if (!isNaN(str[i]))
                temp += str[i];
        }
        amount[0].value = temp;
    }
</script>

<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit" onclick="doWork();"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:07:15.307

获得所需内容的最简单方法可能是在 for 循环中添加另一个条件：

```
if (str[i] === '.')
    break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:08:02.983

让我们看一下您尝试格式化的值。

在`N50,000.00 NGN`所有数字中*都不是 NaN*。所以你的结果是 5000000 ( `50 000 00`)。解决方案是在点符号处停止，例如

```
function doWork() {
    var amount = document.getElementsByName('amount');
    var str = amount[0].value;
    var temp = '';
    for (i = 0; i < str.length; i++) {
        if (str[i] === '.') break; // there it is
        if (!isNaN(str[i]))
            temp += str[i];
    }
    amount[0].value = temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:27:00.890

这是使用正则表达式的一种方法。请注意，如果用户在输入字段中有多个小数点，则可能会出现奇怪的行为。

```
<script type="text/javascript" language="javascript">

    function doWork() {
        var amount = document.getElementsByName('amount');
        amount[0].value = amount[0].value.replace(/[^0-9.]/g, "");
        amount[0].value = amount[0].value.replace(/[.][0-9]*/g, "");
    }
</script>

<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit" onclick="doWork();"> 
```

第一行删除除数字和小数点以外的所有字符。
第二个，删除所有小数点和它们右侧的任何数字。

不过，使用 parseInt 和 toFixed 可能会更好：

```
<script type="text/javascript" language="javascript">

    function doWork() {
        var amount = document.getElementsByName('amount');
        amount[0].value = parseInt(amount[0].value.replace(/[^0-9.]/g, "")).toFixed(0);
    }
</script>

<input type="text" name="amount" value="N50,000.00 NGN" />
<input type="button" value="submit" onclick="doWork();"> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-19T14:03:31.767

你跳过了小数点。采用：

```
if (!isNaN(str[i]) || str[i]=='.') 
```

# c# - WPF ListBox - 如何显示具有多列的数据表中的值？

> ID：11102634
> 
> 赞同：0
> 
> 时间：2012-06-19T14:01:03.500
> 
> 标签：c#, wpf, data-binding

我遇到了问题，我有一个包含 3 列（ID、NAME、QUANTITY）的**数据**表数据，我想将它与 ListBox 绑定，并使 ListBox 显示列 NAME 和 QUANTITY 中的值，否则当我双击选定的项目，它将发送 ID 值，这是我的 XAML：

```
<ListBox  HorizontalAlignment="Left" Margin="6,0,0,0" Name="ListBox1" VerticalAlignment="Top" Height="600" Width="321">
                        <ListBox.ItemContainerStyle>
                            <Style TargetType="{x:Type ListBoxItem}">
                                <EventSetter Event="MouseDoubleClick" Handler="ListBox1Item_DoubleClick" />
                            </Style>
                        </ListBox.ItemContainerStyle>
                        <ListBox.Resources>
                            <DataTemplate x:Key="listBoxTemplate">
                                <DockPanel >
                                    <TextBlock FontWeight="Bold" Text="{Binding NAME}"
                  DockPanel.Dock="Left"
                  Margin="5,0,10,0" Width="100"/>

                                    <TextBlock Text="{Binding QUANTITY} "   Foreground="Green" FontWeight="Bold" />
                                </DockPanel>
                            </DataTemplate>
                        </ListBox.Resources>
                    </ListBox> 
```

这是我背后的代码：

```
...
            ListBox1.ItemsSource = data.DefaultView;
            ListBox1.SelectedValuePath = "ID";
... 
```

但它没有显示任何东西，有什么问题吗？请帮忙！感谢您阅读本文！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:06:37.187

您需要设置 ListBox.ItemTemplate。目前，您正在使用密钥定义模板，该模板并未在任何地方使用。

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <DockPanel >
            <TextBlock Text="{Binding NAME}" FontWeight="Bold"
                       DockPanel.Dock="Left"
                       Margin="5,0,10,0" Width="100" />
            <TextBlock Text="{Binding QUANTITY}" FontWeight="Bold"
                       Foreground="Green" />
        </DockPanel>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

# php - 在同一页面上发送sql请求但缺少WHERE子句中的变量

> ID：11102637
> 
> 赞同：1
> 
> 时间：2012-06-19T14:01:19.523
> 
> 标签：php, sql

我正在尝试更新数据库中的一行。问题是我从 mySQL 收到错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''' WHERE activiteitID = ''' at line 4 
```

所以它没有得到“activiteitID”，我不知道为什么。有人可以告诉我问题是什么吗？

这是两个页面：

“公鸡_wijzigen.php”

```
 <?php 
    include ("html_start.php"); 

    $activiteitID = $_GET["activiteitID"];
    $datum = $_POST["datum"];
    $tijd = $_POST["tijd"];
    $vrijwilligerID = $_POST["vrijwilligerID"];
    $werkzaamheid = $_POST["werkzaamheid"];

echo '

<div id="registreer">
    <table cellpadding="5" align="center">
            <tr><th colspan="2" align="left">Activiteit wijzigen:</th></tr>
            <form name="roosters_wijzigen"  method="get" action="roosters_wijziging.php"> ';    

            $query = "SELECT * FROM activiteit WHERE activiteitID = '$activiteitID'; ";
            $result = mysql_query($query); 

            while($row = mysql_fetch_array($result)){           
    echo'       <tr>
                <td>Datum</td>
                <td><input type="text" size="50" name="datum" value="'.$row['datum'].' "></td>
            </tr>
            <tr>
                <td>Tijd</td>
                <td><input type="text" size="50" name="tijd" value="'.$row['tijd'].' "></input></td>
            </tr> ';
            }
            ?>
            <tr>
            <td>Vrijwilliger</td>
            <td>
                <select name="vrijwilligerID">
                    <?php

                        $vrijwilligerID = $_POST["vrijwilligerID"];

                        $query ="   SELECT voornaam, achternaam, vrijwilligerID
                                    FROM vrijwilliger;";

                        $result = mysql_query($query);

                        while($row=mysql_fetch_array($result)){
                        echo "<option value=".$row['vrijwilligerID'].">".$row["voornaam"]." ".$row["achternaam"]."</option>";
                        }
                        ?>              
            </select>
            </td>
            </tr>
            <tr>
                <td>Werkzaamheid</td>
                <?php

                $query = "SELECT werkzaamheid FROM activiteit WHERE activiteitID = '$activiteitID'; ";
                $result = mysql_query($query); 
                while($row = mysql_fetch_array($result)){           
                echo '<td><textarea rows="6" cols="39" type="text" name="werkzaamheid">'.$row["werkzaamheid"].'</textarea></td>';}

                ?>
            </tr>
            </tr>
            <tr align="right">
            <td></td>
            <td><input type="reset" value="Wissen">
            <input type="submit" name="verzenden" value="verzenden">
            </td>
            </tr>
            <tr>
            </tr>
            <tr>
            Ga <a href="roosters_aanpassen.php" MEDIA=screen>hier</a></br> terug. </br>
            </tr>
            </form>
    </table></br>

<div>
<?php
include ("html_end.php");
?> 
```

“roosters_wijziging.php”

```
<?php   
    include ("html_start.php");

    $activiteitID = $_GET["activiteitID"];
    $datum = $_POST["datum"];
    $tijd = $_POST["tijd"];
    $vrijwilligerID = $_POST["vrijwilligerID"];
    $werkzaamheid = $_POST["werkzaamheid"];

    $query ="UPDATE vrijwilliger SET datum = '$datum', 
                                     tijd = '$tijd', 
                                     vrijwilligerID = '$vrijwilligerID', 
                                     werkzaamheid '$werkzaamheid'
                                        WHERE activiteitID = '".$activiteitID."'";
    mysql_query($query) or die ( mysql_error());

    echo '<div id="registreer"> 
    Uw activiteit is succesvol toegevoegd.
    Ga <a href="roosters_aanpassen.php" MEDIA=screen>hier</a></br> terug. 
    </div> ';

    include ("html_end.php");   
?>
<?
/*

if(preg_match("/^[0-9]{4}-[0-9]{1,2}-[0-9]{1,2}$/", $datum) === 0 || preg_match("/^([0-9])"."([0-9])"."(\:([0-9])"."([0-9]))$/", $tijd) === 0 || $werkzaamheid !== '') 
    {
    echo '<div id="registreer">';
    echo '<font>datum moet op dit formaat ingevoerd worden: JJJJ-MM-DD<br><font>';
    echo '<font>Tijd moet op dit formaat ingevoerd worden: HH:MM <br><font>';
    echo '<font>U heeft de werkzaamheid niet aangegeven<br><font>';
    }
else{   */
?> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:05:11.833

您缺少`=`after `werkzaamheid`：

```
...
werkzaamheid = '$werkzaamheid'
WHERE activiteitID ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:05:14.127

它可能不起作用，但尝试在表属性和表名周围添加 ` 字符......就像这样：

```
$query = "SELECT * FROM `activiteit` WHERE `activiteitID` = '$activiteitID'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:05:14.530

```
"UPDATE vrijwilliger SET datum = '$datum', 
tijd = '$tijd', 
vrijwilligerID = '$vrijwilligerID', 
werkzaamheid '$werkzaamheid'
WHERE activiteitID = '".$activiteitID."'"; 
```

您在最后一行缺少一个等于：

```
werkzaamheid = '$werkzaamheid' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:06:53.233

您在更新 sql 中缺少一个 =：

```
werkzaamheid '$werkzaamheid' 
```

改成：

```
werkzaamheid = '$werkzaamheid' 
```

但是，您将 _GET 参数直接传递给 SQL，这是一个禁忌。

改用 PDO 和参数化查询： [http ://www.php.net/manual/en/pdo.prepare.php](http://www.php.net/manual/en/pdo.prepare.php)

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
$sth = $dbh->prepare('SELECT * FROM activiteit WHERE activiteitID = ?');
$sth->execute(array($activiteitID));

while($row = $sth->fetch()) {

} 
```

更新类似于上面的代码，它会工作。对其余查询执行相同操作。

# python - python lxml查找 标签

> ID：11102640
> 
> 赞同：3
> 
> 时间：2012-06-19T14:01:30.507
> 
> 标签：python, lxml

我正在使用 lxml 解析一个 html，该 html 具有如下所示的 facebook 评论标签：

```
<fb:comments id="fb_comments"  href="http://example.com" num_posts="5" width="600"></fb:comments> 
```

我正在尝试选择它来获取 href 值，但是当我这样做时，`cssselect('fb:comments')`我收到以下错误：

```
The pseudo-class Symbol(u'comments', 3) is unknown 
```

有没有办法做到这一点？

**编辑：** 代码：

```
from lxml.html import fromstring
html = '...'
parser = fromstring(html)
parser.cssselect('fb:comments')  #raises the exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:30:50.287

该[`cssselect()`](http://lxml.de/cssselect.html)方法使用给定的[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)表达式解析文档。在您的情况下，冒号字符 ( `:`) 是 XML 名称空间前缀分隔符 (ie `<namespace:tagname/>`)，它与 ​​CSS 伪类语法 (ie `tagname:pseudo-class`) 混淆。

根据[lxml 手册](http://lxml.de/cssselect.html#namespaces)，您应该使用`namespace-prefix|element`语法 in`cssselect()`来查找`comments`带有命名空间前缀 ( ) 的标记 ( `fb`)。所以：

```
from lxml.html import fromstring
html = '...'
parser = fromstring(html)
parser.cssselect('fb|comments') 
```

# php - PDO 异常问题 - 如何捕捉它们

> ID：11102644
> 
> 赞同：24
> 
> 时间：2012-06-19T14:01:41.177
> 
> 标签：php, sql, exception-handling, pdo

我正在使用 PDO 为数据库重写网站界面。我曾经使用 mysql 扩展，但我从来没有为错误处理而烦恼，我拥有的少数错误处理程序基本上是复制粘贴。

现在我想正确地做到这一点。但是，我在捕捉我想要的错误时遇到了问题（MySQL 中的“重复条目”、“空值”等错误）。有多少我的语句需要在 try 块中？所有的东西都应该在那里吗？我正在使用 an`Include()`连接到我的数据库（它有自己的错误处理），所以只有查询执行在这段代码中有错误。我无法弄清楚为什么在执行以下代码时它没有捕获错误：

```
try {
  $stmt = $db->prepare("INSERT INTO tbl_user (id, name, password, question, answer)    VALUES (NULL, :name, :password, :question, :answer)");
  $stmt->bindValue(":name", $_POST['name']);
  $stmt->bindValue(":password", $_POST['password']);
  $stmt->bindValue(":question", $_POST['question']);
  $stmt->bindValue(":answer", $_POST['answer']);
  $stmt->execute();
  echo "Successfully added the new user " . $_POST['name'];
} catch (PDOException $e) {
  echo "The user could not be added.<br>".$e->getMessage();
} 
```

所以我的问题是：所有这些都必须在 try 块中吗？我可以将执行放在 try 块中吗？它应该捕获错误`Duplicate value "John" in key "name"`，但会显示成功消息。（尝试添加两个“John”用户时）。我检查了 PHPMyAdmin；该索引是唯一的，并且会按预期抛出错误，只是不使用此代码。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-19T14:20:35.510

您应该查看文档。但如果你没有找到任何东西，你可以添加另一个 catch ：

```
<?php
try {
  $stmt = $db->prepare("INSERT INTO tbl_user (id, name, password, question, answer)    VALUES (NULL, :name, :password, :question, :answer)");
  $stmt->bindValue(":name", $_POST['name']);
  $stmt->bindValue(":password", $_POST['password']);
  $stmt->bindValue(":question", $_POST['question']);
  $stmt->bindValue(":answer", $_POST['answer']);
  $stmt->execute();
  echo "Successfully added the new user " . $_POST['name'];
} catch (PDOException $e) {
  echo "DataBase Error: The user could not be added.<br>".$e->getMessage();
} catch (Exception $e) {
  echo "General Error: The user could not be added.<br>".$e->getMessage();
}
?> 
```

这必须有效，因为 PHP 插件的所有异常都继承自 Exception 本机 PHP 类。（如果我的记忆好的话，从 5.0 开始）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-05-05T15:12:03.997

> PDO 异常问题 - 如何捕捉它们

通常——

# [不要抓住他们](https://phpdelusions.net/pdo#errors)。

比如你这里的代码应该这样写

```
$stmt = $db->prepare("INSERT INTO tbl_user (id, name, password, question, answer) VALUES (NULL, :name, :password, :question, :answer)");
$stmt->bindValue(":name", $_POST['name']);
$stmt->bindValue(":password", $_POST['password']);
$stmt->bindValue(":question", $_POST['question']);
$stmt->bindValue(":answer", $_POST['answer']);
$stmt->execute();
echo "Successfully added the new user " . $_POST['name']; 
```

没有任何 try 或 catch 调用。**因为您在这里没有处理异常的特定场景**（简单的回显几乎不能算作处理场景）。

相反，让它冒泡到应用程序范围的错误处理程序（不要被这个术语吓到，PHP 已经有一个内置的）。

> 但是，我在捕捉我想要的错误时遇到了问题（MySQL 中的“重复条目”、“空值”等错误）。

只有在遇到**某种情况**时，您才必须使用 try-catch 运算符，但您必须始终检查您遇到的错误是否是您预期的错误。否则必须重新抛出异常：

```
try {
    $pdo->prepare("INSERT INTO users VALUES (NULL,?,?,?,?)")->execute($data);
} catch (PDOException $e) {
    if ($e->getCode() == 1062) {
        // Take some action if there is a key constraint violation, i.e. duplicate name
    } else {
        throw $e;
    }
} 
```

当然（因为它被证明是这个问题的真正问题），你必须在异常模式下设置 PDO，或者在构造函数参数中简单地添加代码

```
$db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

连接后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-15T11:51:20.627

你可以做的是从重复条目之类的东西中捕获错误代码，然后`if(str_contains($e, '1062 Duplicate entry')) {`在你的内部使用类似的东西`catch (PDOException $e) {`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-01T13:53:01.447

**建立新的 PDO 连接时正确抛出错误**

```
 try{  try{
            $this->pdo = new \PDO($this->dsn,$this->options);
            $this->pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES,false);
            //Display PDO Errors
            $this->pdo->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);

        }catch (\PDOException $e) {

            throw new CustomException ($e->getMessage());
        }

    }catch (CustomException $e)
    {

        $e->render();
    } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2019-09-08T23:35:09.247

```
<?php
    $stmt = $db->prepare("INSERT INTO tbl_user (id, name, password, question, answer) VALUES (NULL, :name, :password, :question, :answer)");

    $stmt->bindValue(":name", $_POST['name']);
    $stmt->bindValue(":password", $_POST['password']);
    $stmt->bindValue(":question", $_POST['question']);
    $stmt->bindValue(":answer", $_POST['answer']);
    $inserted = $stmt->execute();

    if($inserted)
        echo "Successfully added the new user " . $_POST['name'];
    else
        echo "Somethig get wrong";
?> 
```

# java - Java 序列化 vs JSON vs XML

> ID：11102645
> 
> 赞同：41
> 
> 时间：2012-06-19T14:01:44.577
> 
> 标签：java, json, serialization, xml-serialization, data-serialization

我想知道在处理通过网络传输的对象时我们应该选择哪种序列化机制。优缺点都有什么 ？

我知道我们大部分时间都使用`JSON`or `XML`，`AJAX`因为传输格式几乎都是`Javascript`格式，而且加上`JSON`它的占用空间很小，而且非常轻巧，因此`Java`序列化完全不在表中吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-19T14:50:59.547

一般来说，重要的问题是哪个客户端将接收序列化对象 - 浏览器/JavaScript 引擎，如（node-js）、Java 客户端、未知/多个客户端。

JSON - JSON 语法基本上是 JavaScript，因此任何带有 JS 引擎的组件都可以很好地处理它的解析——即使是复杂的数据结构也可以有效地转换为“活”对象。JSON 解析器几乎适用于任何语言，即使不使用 JS 引擎也很容易使用（以 Google Gson 为例，它能够轻松地将 JSON 转换为相应的对象），这使得它是跨语言通信的良好候选者- 例如在[消息传递架构](http://en.wikipedia.org/wiki/Messaging_pattern)中。

XML - 共享 JSON 的许多优点 - 跨语言、轻量级等。例如，Adobe Flex 可以很好地处理 XML，甚至比 JSON 更好。它绝对是 JSON 的合适替代品。我个人更喜欢 JSON，因为它的语法类似于 JS，但 XML 也不错。

Java 序列化 - 仅应考虑用于 Java 到 Java 通信。一个重要的注意事项是*类定义*应该在发送端和接收端，通过传递整个对象通常不会有太多好处。我不排除 RMI 作为通信协议，它确实简化了开发。然而，由此产生的应用程序组件将是硬耦合的，这将使其非常难以替换。

还有一点需要注意——序列化通常有它的开销。然而，当通过网络执行通信时，瓶颈通常是网络而不是序列化/反序列化本身。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T14:10:45.213

我认为这取决于。如果您要发送 http 请求或其他内容，那么 JSON 或 XML 显然是一个不错的选择。如果您只是通过 tcp 套接字为某些分布式算法发送 java 对象，或者我认为 java 序列化更容易/更好

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T14:46:32.560

虽然通过网络进行序列化，但 XML 和 JSON 都可以工作。这取决于这些信息的消费者。

*   如果消费者是使用 Ajax 来请求某些信息并在屏幕上呈现某些内容的浏览器，那么通常 JSON 是最好的选择，因为它已经是 Javascript 对象格式，并且没有转换为 Javascript 兼容对象的开销。事实上，许多 Ajax 库（例如 jQuery）对 JSON 有很好的支持。

*   如果您的消费者是另一个应用程序，它可能在也可能不在 java 中，那么 XML 是首选的序列化机制。Web 服务大量使用 XML。

*   如果您的消费者是另一个 Java 程序，那么 Java 序列化绝对是首选选项（例如 RMI）。所以它还没有出来:-)。

但是是的，XML 和 JSON 之间的界限很模糊。我在这里提到的是一般做法。这是一篇[很好的文章](http://web2.sys-con.com/node/203935)，将所有方面都放在了 XML 与 JSON 上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-09-21T23:07:12.287

我曾经参加过安全工程师培训，由于 Java 原生反序列化方面存在一些安全漏洞，它可以接受任何（可能注入的恶意）字节流，因此不建议使用 Java 原生序列化。当定义/模式定义不正确时，XML 还存在一个已知的安全问题，称为 XXE（XML 内部实体）。可能会引起消费端的“十亿笑”攻击。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T14:14:29.393

我认为作为开发人员，我们不需要处理响应对象的序列化。但是如果我们考虑 JSON ，它比 XML 具有不错的优势。

1.  JSON 响应不像 XML 那样需要编码响应。
2.  与 XML 相比，JSON 的处理和处理速度更快，因为它没有被解析。
3.  AJAX 的 XML 响应总是被编码，因此处理需要时间。
4.  JSON 最适合用于 UI 相关编码的 Jquery，并且速度更快。
5.  处理海量数据 例如：从服务器获取索引数据，JSON 处理更快。

# grails - Grails 使用来自 POST 请求的 XML 填充参数

> ID：11102646
> 
> 赞同：2
> 
> 时间：2012-06-19T14:01:50.863
> 
> 标签：grails

我有一个通过 grails 控制器公开的 RestFull grails api。我需要自动绑定 POST 请求中发送的 xml 数据。我不认为使用 groovy`bindData(object,params)`作品作为`params`参考似乎没有 xml 元素。我`parseRequest=true`在 UrlMappings 中使用，但`params`对象没有 xml 元素。

我是否缺少其他一些配置，以便我的 params 对象自动填充 xml 正文元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:37:58.743

似乎正确的方法是使用：

```
request.reader.text 
```

获取原始 xml。其他方法对我来说并不成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:12:37.227

`request.XML`是持有从 XML 请求解析的元素的对象

查看控制器可用的[请求](http://grails.org/doc/latest/ref/Servlet%20API/request.html)变量。

# android - 在android的listview中显示数据库的内容

> ID：11102653
> 
> 赞同：-1
> 
> 时间：2012-06-19T14:02:28.243
> 
> 标签：android, android-layout, sqlite, android-listview

我的数据库中有数据，我打算使用列表视图向用户显示。这是我为显示内容而编写的函数

```
public class List_View extends ListActivity {

ListView lv; 

Databasehelp db = new Databasehelp(this);

public void onCreate(Bundle icicle)
{
    super.onCreate(icicle);
     setContentView(R.layout.displayitems);

     List<String> items = new ArrayList<String>();

     lv = (ListView)findViewById(android.R.id.list);

     Cursor cursor = db.getAllTable1(); cursor.moveToFirst();
     //startManagingCursor(cursor);

     lv.setAdapter(new ArrayAdapter<String>(this,
            R.layout.displayitems, items));
        lv.setTextFilterEnabled(true);

       ListAdapter adapter=new SimpleCursorAdapter(this,
               R.layout.list_example_entry, cursor,
               new String[] {"name"},
               new int[] {R.id.name_entry});
       setListAdapter(adapter); 
          }             
     } 
```

布局是 displayitems.xml，其中包含一个 ID 为“list”的列表视图和 list_example_entry.xml，其中包含一个线性布局内的文本视图，ID 为 name_entry

显示项目.xml

```
 <ListView
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:id="@+id/list"
android:layout_width="match_parent"
android:layout_height="match_parent">

</ListView> 
```

list_example_entry

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
<TextView
    android:id="@+id/name_entry"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="28dip" />
   </LinearLayout> 
```

你们中的任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:07:49.520

您调用一个游标，然后尝试设置一个数组适配器。然后是光标适配器...

摆脱 ArrayAdapter 调用，这不是必需的。`moveToFirst()`当您将光标输入适配器时，您也不需要调用，适配器会处理这个问题。

它应该如下所示：

```
public void onCreate(Bundle icicle) 
{ 
    super.onCreate(icicle); 
    setContentView(R.layout.displayitems); 

    Cursor cursor = db.getAllTable1();
    startManagingCursor(cursor); 

    SimpleCusrorAdapter adapter = new SimpleCursorAdapter(this, 
           R.layout.list_example_entry, cursor, 
           new String[] {"name"}, 
           new int[] {R.id.name_entry}); 
    setListAdapter(adapter);  
 } 
```

**编辑**

错误的意思正是它所说的。当您使用 ListActivity 时，它希望您的列表具有 id `@id/android:list`。因此，将您的 ListView xml 更改为如下所示：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"  
    android:orientation="vertical"  
    android:id="@id/android:list"
    android:layout_width="match_parent"  
    android:layout_height="match_parent">  
</ListView> 
```

如果您评论中的最后一个问题与您为什么不必执行 a 相关`findViewById`，那是因为您使用的是 ListActivity，并且它做出了某些假设。主要是您的布局中有一个 ListView 并且它具有上面提到的特定 id（这就是您收到该错误的原因）。由于只有一个而且它知道 id 是什么，所以没有必要专门调用它。

# string - 读取文件搜索字符串并打印其路径

> ID：11102657
> 
> 赞同：2
> 
> 时间：2012-06-19T14:02:42.143
> 
> 标签：string, perl, file, search

我正在尝试在 Perl 中编写一个在特定目录和所有子目录中搜索的脚本。这样做的目的是脚本必须读取目录中的所有文件和所有子目录以查找特定的文本字符串（我定义的任何字符串）。如果在文件中找到该字符串，则脚本将在新文本文件中打印文件的路径和名称，并继续处理目录树中的所有文件。

我有类似的东西，但我不确定如何继续。我是 Perl 的初学者，对所有选项一无所知。

```
#!/usr/bin/perl
use strict;
use File::Find;

my $dir = 'C:\PATH\TO\DIR';
my $string = "defined";

find(\&printFile, $dir);
sub printFile {
   my $element = $_;
   open FILE, "+>>Results.txt";
   if(-f $elemento && $elemento =~ /\.txt$/) {
       my $boolean = 0;
       open CFILE, $elemento;
       while(<CFILE>) {  
           if ($string) {
               print FILE "$File::Find::name\n"; 
           }
           close CFILE;
      }
   }
   close FILE;
}

sleep(5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:23:51.203

你离得并不远，但是有些事情你需要改变。

```
#!/usr/bin/perl
use strict;
use warnings;  # never go without warnings
use File::Find;

my $dir = 'C:\PATH\TO\DIR';
my $string = "defined";
open my $out, ">>", "Results.txt" or die $!;  # move outside, change mode, 
                                              # 3-arg open, check return value
find(\&printFile, $dir);

sub printFile {
   my $element = $_;
   if(-f $element && $element =~ /\.txt$/) { # $elemento doesn't exist
       open my $in, "<", $element or die $!;
       while(<$in>) {
           if (/\Q$string\E/) {  # make a regex and quote metachars 
               print $out "$File::Find::name\n"; 
               last;             # stop searching once found
           }
      }
   }  # lexical file handles auto close when they go out of scope
} 
```

更好的是放弃硬编码值并跳过特定的输出文件：

```
my $dir = shift;
my $string = shift; 
```

然后只需将输出打印到 STDOUT。

```
print "$File::Find::name\n"; 
```

用法：

```
perl script.pl c:/path/to/dir > output.txt 
```

正如其他人在评论中指出的那样，这很容易通过递归解决[`grep`](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)。但不幸的是，您似乎使用的是 Windows，在这种情况下，它不是一个选项（据我所知）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:44:06.787

如果这确实是您需要做的所有事情，您可以查看[`ack`](http://betterthangrep.com). 默认情况下，它将搜索子目录，以及对 grep 的其他增强。当然，如果这是一个更大的 Perl 脚本，那么您可以使用它，或者使用其他发布的答案之一。

```
$ ack include 
```

会返回类似的东西

```
src/draw.c
27:#include <stdio.h>
28:#include <stdlib.h>
29:#include "parsedef.h"
31:#include "utils.h"
32:#include "frac.h"
33:#include "sscript.h"

src/utils.c
27:#include <stdio.h>
28:#include <stdlib.h>
29:#include <string.h> 
```

... 等等

相反，如果您只想要匹配的文件的名称，请使用该`-l`标志

```
$ ack -l include

lib/Text/AsciiTeX.xs
src/limit.c
src/sscript.c
src/dim.c
src/frac.c
src/brace.c
src/symbols.c
src/sqrt.c
src/array.c
src/ouline.c
src/draw.c
src/utils.c
src/asciiTeX.c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:25:29.573

该`#!`行在 Windows 平台上无关紧要，在 Unix 上只是一种方便。最好在这里省略它。

您的程序大部分是正确的，但避免了 Perl 提供的许多便利，以使代码更简洁和易于理解。

您应该始终添加`use warnings`到您的`use strict`，因为它会拾取您可能会忽略的简单错误。

您的文件打开应该使用词法文件句柄和 的三参数形式`open`，并且您应该检查它们是否成功，因为打开文件失败会使大多数后续代码无效。一个惯用的 open 看起来像这样

```
open my $fh, '<', 'myfile' or die $!; 
```

还值得指出的是，`+>>`打开文件以*进行*读取*和*追加的打开模式很难做到。在这种情况下，您的意思只是`>>`，但最好打开文件一次，并在程序运行期间保持打开状态。

这是对您的程序的修改，希望对您有所帮助。它使用正则表达式来检查字符串是否出现在文件的当前行中。`/\Q$string/`与 相同`$_ =~ /\Q$string/`，即`$_`默认测试变量。正`\Q`则表达式中的 是 a `quotemeta`，它转义字符串中的任何字符，否则这些字符可能在正则表达式中表现为特殊字符并改变搜索的含义。

请注意，在`File::Find` `wanted`子例程中，`$_`当前工作目录设置为包含当前报告的文件的目录。`$_`设置为文件名（没有路径）并`$File::Find::name`设置为完整的绝对文件和路径。因为当前目录是包含文件的目录，所以打开文件很容易，`$_`因为不需要路径。

```
use strict;
use warnings;

use File::Find;

my $dir = 'C:\path\to\dir';
my $string = 'defined';

open my $results, '>', 'results.txt' or die "Unable to open results file: $!";

find (\&printFile, $dir);

sub printFile {

  return unless -f and /\.txt$/;

  open my $fh, '<', , $_ or do {
    warn qq(Unable to open "$File::Find::name" for reading: $!);
    return;
  };

  while ($fh) {
    if (/\Q$string/) {
       print $results "$File::Find::name\n";
       return;
    }
  }
} 
```

# php - 在 Jquery UI datepicker 字段中从数据库中预过滤日期

> ID：11102658
> 
> 赞同：2
> 
> 时间：2012-06-19T14:02:43.577
> 
> 标签：php, jquery, mysql, jquery-ui-datepicker

我有一个编辑表单，其中的值是从数据库中填充的。我有一个`date`格式的字段`yyyy-mm-dd`。我已经设置了[jQuery Datepicker](http://docs.jquery.com/UI/Datepicker)及其在日期字段上的工作，但是，当我检查 HTML 源时，当表单首次加载时，即使输入类型具有来自数据库的值，日期字段也是空的。

如何让我的日期字段显示数据库中的日期？

编辑：

我希望我的输入值在文本字段中可见，而不是从数据库中获取值并再次将其插入到 jQuery/javascript 变量/函数中（默认日期，显示之前什么不）。

我可以做些什么来禁止`datepicker`隐藏我的价值观？并且仅在我单击并选择日期时才替换值。

**HTML 代码：**

```
<input type="text" id="date" name="reg_date" value="2012-01-30" /> 
```

实际代码在 PHP 中，从数据库中检索值并插入到值字段中。这些值是正确生成和插入的，因为我通过查看 Firefox 中的 HTML 源代码对其进行了验证。

**日期选择器设置：**

```
$(function() {
    $( "#date" ).datepicker({
        changeMonth: true,
        changeYear: true
});
    $( "#date" ).datepicker({ dateFormat: "yy-mm-dd" });
    $( "#date" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:18:58.023

Datepicker 是覆盖值。我建议您在关注日期字段时触发日期选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:44:38.090

您需要在 datepicker 设置代码中设置默认日期。

示例：`$( ".selector" ).datepicker({ defaultDate: +7 });`将默认日期设置为从现在起 7 天。

真实的故事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:31:31.117

为此改变：

```
$(function() {
    $( ".date" ).datepicker({
        dateFormat: "yy-mm-dd",                 
        changeMonth: true,
        changeYear: true
    });
}); 
```

如果您的浏览器已缓存...按 CTRL + F5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:44:54.397

好吧，现在您已经发布了代码，这非常明显。

您的数据库日期格式是 YYYY-MM-DD 您的 jQuery UI 格式是 yy-mm-dd 看看有什么问题？您缺少至少 2 位数字。

要解决此问题，只需在代码中输入正确的格式。

例子：

```
$( "#date" ).datepicker({ dateFormat: "dd-MM-yyyy" });
$( "#date" ).datepicker( "option", "dateFormat", "dd-MM-yyyy" ); 
```

# python - python 3的路由库

> ID：11102659
> 
> 赞同：0
> 
> 时间：2012-06-19T14:02:45.077
> 
> 标签：python, python-3.x, routes, porting

熟练的人可以查看 python 中的 Routes 库并告诉我为什么不支持 python 3 吗？我需要在 python 3 上与 Cherrypy 一起使用的 Routes 功能。我很好奇尝试将 Routes 移植到 python 3 或从头开始为 python 3 编写我自己的调度程序是否会更好。

我知道一些 python 2to3 的移植基础知识，但是如果有任何重大问题或缺点（除了方法名称、语法等），我想在开始移植之前了解它们。

非常感谢您的任何提示！

编辑：不要误解我的意思！我并不懒惰自己去检查它，但有些方面我直到我尝试才发现。也许，这里有人以前试过:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:48:17.090

我尝试将 Routes 移植到 python 3。经过一天的工作，我通过了所有单元测试。但是代码开始变得丑陋，我没有成功使用带有 Cherrypy 的移植路由（可能是单元测试未涵盖的东西）。我没有足够的耐心来调试它。

所以我决定编写我自己的版本，我可能会作为开源共享。它还没有准备好，我稍后会更新这个答案（对于可能感兴趣的人:-)

感谢上面的评论者

# php - 如果字符串是......然后用图像替换它？

> ID：11102661
> 
> 赞同：2
> 
> 时间：2012-06-19T14:02:53.977
> 
> 标签：php, wordpress

我有以下代码：

```
<?php echo get_custom_field('Services'); ?> 
```

为此有三种可能的字符串输出：“food”、“drink”、“food & Drink”。

我想用小图标替换这些字符串（例如“饮料”的玻璃杯）。

有没有一种简单的方法可以用 PHP 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:11:03.153

您可以通过数组映射值：

```
$items = array(
    "Food" => "plate.png",
    "Drink" => "glass.png",
    "Food & Drink" => "tray.png"
); 
```

然后在回显图像时执行查找：

```
<img src="<?php echo $items[ get_custom_field('Services') ]; ?>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:09:18.317

你可以使用开关：

```
<?php
        switch (get_custom_field('Services')) {
                case "glass":
                        echo '<img src="glass.jpg" />';
                break;
                case "drink":
                        echo '<img src="food.jpg" />';
                break;
                case "food & drink":
                        echo '<img src="food-drink.jpg" />';
                break;
                default:
                        echo '<img src="noicon.jpg" />';
        }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:27:06.953

不是直接的答案，但我会向（包含...）元素添加一个类并使用 css 删除文本并显示背景图像：

php:

```
<?php echo '<span class="' . $SERVICES_ID_OR_SOMETHING . '">' . get_custom_field('Services') . '</span>'; ?> 
```

CSS：

```
.SERVICES_ID_OR_SOMETHING {
  background: url(/path/to/image) no-repeat left center;
  text-indent: -9999em;
} 
```

# c# - RegisterClientScriptBlock 上的无用错误

> ID：11102665
> 
> 赞同：3
> 
> 时间：2012-06-19T14:03:11.630
> 
> 标签：c#, asp.net, registerclientscriptblock

当用户在gridview上进入编辑模式时，我正在使用RegisterClientScriptBlock向用户发送JS警报，但是由于某种原因它会导致我的页面出错，我不知道为什么......

这是导致问题的方法。错误发生在注册脚本的最后一行。（如果我评论这个页面工作正常！）

```
 protected void EditRecord(object sender, GridViewEditEventArgs e)
    {

        gvStockItems.EditIndex = e.NewEditIndex;
        // Gather current Search info
        string strPartNo = Session["currentSearchTerm"].ToString();
        BindData();
        gvStockItems.SelectedIndex = gvStockItems.EditIndex;
        Page.ClientScript.RegisterClientScriptBlock(typeof(Page), "thisIsTest", "<script language=\"text/javascript\">alert(\"oops\");</script>");
    } 
```

在 JS 控制台中抛出的错误是

```
Uncaught Sys.WebForms.PageRequestManagerServerErrorException: Sys.WebForms.PageRequestManagerServerErrorException: Object reference not set to an instance of an object. 
```

它还说这个错误发生在 ScriptResource.axd 的 Error$Create 中，但我认为这是在报告真正问题时发生的错误，所以我完全被难住了。

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:26:59.340

删除`Page.ClientScript.RegisterClientScriptBlock`并尝试使用`RegisterStartupScript`

```
// Define the name and type of the client scripts on the page.
String csname1 = "thisIsTest";
Type cstype = this.GetType();

// Get a ClientScriptManager reference from the Page class.
ClientScriptManager cs = Page.ClientScript;

// Check to see if the startup script is already registered.
if (!cs.IsStartupScriptRegistered(cstype, csname1))
{
    StringBuilder cstext1 = new StringBuilder();
    cstext1.Append("<script type=text/javascript> alert('oops!') </");
    cstext1.Append("script>");

    cs.RegisterStartupScript(cstype, csname1, cstext1.ToString());
} 
```

或者如果你`ScriptManager`有

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "thisIsTest", "alert('oops!');", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:45:42.373

当只在更新面板中进行部分更新时，这似乎与从后面的代码中调用注册脚本有关。如果我`EnablePartialRendering="false"`在脚本管理器中设置它一切正常。好像我允许部分渲染错误发生。

# javascript - 许多选择器和添加类

> ID：11102668
> 
> 赞同：4
> 
> 时间：2012-06-19T14:03:21.580
> 
> 标签：javascript, jquery, internet-explorer, jquery-selectors

我正在使用 jQuery 来处理 IE7 和 8 中不受支持的选择器（主要是`:nth-child`和`:last-child`）。我读过它`addClass`比使用 jQuery 的`css`方法性能更高，所以我正在重构我的 JS 来做到这一点。

将同一个类添加到多个（有时很多！）不同的选择器的最佳方法是什么？将它们全部放入同一个语句并在列表末尾使用 addClass 是否安全？

例如：

```
$('.selector1:nth-child(3),
   .diff-selector2:last-child,
   #another-selector:nth-child(2),
   tr.highlighted td:last-child,
   h2.job-title:last-child').addClass('fallback-class'); 
```

选择器列表是否有限制或某个点变慢？我应该为这些选择器列表创建变量吗？有更好的方法吗？

最后一点：不幸的是，使用 Selectivizr 使 IE7 停止运行。这就是为什么我决定使用上述方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:12:16.773

我想到了两种方法

1）你可以为你的元素设置一个通用类并将它们添加一个类

```
<p class="addThis">1</p>
<p>2</p>
<span class="addThis">3</span>
<a>4</a>
<p>5</p>
<a class="addThis">6</a>

$('.addThis').addClass('fallback-class'); //1,3,6 will be added classes 
```

2）你可以使用父/子方法

```
<p>
    <a>1</a>
    <span>2</span><!-- wont be added class -->
</p>
<p>
    <a>3</a>
</p>
<a>3</a><!-- wont be added class -->
<p>4</p><!-- wont be added class -->

$('p').children('a').addClass('fallback-class');
//this will adds class which got "a" selector inside "p"

$('a').parent('p').addClass('fallback-class');
//this will adds class "p" selector which got children "a" 
```

# mysql - 多个 MySQL 表 JOIN / id-to-value 替换 / 别名

> ID：11102669
> 
> 赞同：0
> 
> 时间：2012-06-19T14:03:25.357
> 
> 标签：mysql, database, optimization, select, join

我有两个表，我想从中创建一个选择，这样第一个表中的引用 id 被第二个表中的值替换。首选针对大型数据库的优化查询。以下说明了我的目标：

```
TABLE_KINGDOMS
==============
kid     kingdom      id_king      id_queen      id_prince      id_princess
--      -------      -------      --------      ---------      -----------
1       red          1            2             3              4
2       blue         5            6             7              8
...

TABLE_PLAYERS
=============
pid     username      points      gold
--      --------      ------      ----
1       Jack          34789       35667
2       Jill          2312        23887
3       Walt          8756        23112
4       Winnie        587         255
5       Eric          76521       34678
6       Alice         6799        7549
7       Ned           5565        9009
8       Rose          2312        3429
...

DESIRED_SELECTION (Replace id with username)
=================
kid     kingdom      king      queen      prince      princess
--      -------      ----      -----      ------      --------
1       red          Jack      Jill       Walt        Winnie
2       blue         Eric      Alice      Ned         Rose
... 
```

我尝试了以下方法，但它不起作用：

```
SELECT *
FROM table_kingdoms
LEFT JOIN table_users ON id_king = tu.id
LEFT JOIN table_users ON id_queen = tu.id
LEFT JOIN table_users ON id_prince = tu.id
LEFT JOIN table_users ON id_princess = tu.id 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:11:41.953

只需为连接的表提供不同的别名。

```
SELECT k.kid, k.kingdom,
   uk.username AS king,
   uq.username AS queen,
   up.username AS prince
   ups.username AS princess
FROM table_kingdoms k
LEFT JOIN table_users uk ON k.id_king = uk.pid
LEFT JOIN table_users uq ON k.id_queen = uq.pid
LEFT JOIN table_users up ON k.id_prince = up.pid
LEFT JOIN table_users ups ON k.id_princess = ups.pid; 
```

此外，`LEFT JOIN`可以省略，因为我假设`id_...`字段不能是`NULL`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:18:15.060

我用 替换了你`LEFT JOINS`，`INNER`因为你在 table_kingdoms 中的 ID 都不是 null，`LEFT`如果 id 可以为 null，则将其放在后面，否则`INNER`更好。您的查询列和表名与结构中的不同，所以我不确定使用哪个。因此，如果这不能满足您的需求，请指定您所说的*不起作用*，我们可以解决具体问题。

```
SELECT K.kid,K.Kingdom, P.Username as King,PQ.Username as Queen,
PP.Username as Prince,PS.Username as Princess
FROM table_kingdoms K
INNER JOIN TABLE_PLAYERS PK ON K.id_king = PK.pid --replace TABLE_PLAYERS  with table_users depending on the actual table name
--LEFT JOIN table_users ON id_king = tu.id REPLACE WITH ABOVE
INNER JOIN TABLE_PLAYERS PQ ON K.id_queen = PQ.pid --replace TABLE_PLAYERS  with table_users depending on the actual table name
--LEFT JOIN table_users ON id_queen = tu.id  REPLACE WITH ABOVE
INNER JOIN TABLE_PLAYERS PP ON K.id_prince = PP.pid --replace TABLE_PLAYERS  with table_users depending on the actual table name
--LEFT JOIN table_users ON id_prince = tu.id  REPLACE WITH ABOVE
INNER JOIN TABLE_PLAYERS PS ON K.id_princess = PS.pid --replace TABLE_PLAYERS  with table_users depending on the actual table name
--LEFT JOIN table_users ON id_princess = tu.id  REPLACE WITH ABOVE 
```

就您的原始查询而言，它非常接近。最重要的是您说的是 tu.id 但从未将其声明为别名并且您不能重用相同的别名然后，您必须按照您想要的方式定义列，但这不是错误。这是我上面提到的实际错误的编辑：

```
SELECT *
FROM table_kingdoms
LEFT JOIN table_users tu ON id_king = tu.id
LEFT JOIN table_users  tu2 ON id_queen = tu2.id
LEFT JOIN table_users tu3 ON id_prince = tu3.id
LEFT JOIN table_users  tu4 ON id_princess = tu4.id 
```

就像一个注释，我个人也会给 table_kingdoms 起别名，这里也包括列显示：

```
SELECT K.kid,K.Kingdom, tu.Username as King, tu2.Username as Queen,
tu3.Username as Prince,tu4.Username as Princess
FROM table_kingdoms k
LEFT JOIN table_users tu ON k.id_king = tu.id
LEFT JOIN table_users  tu2 ON k.id_queen = tu2.id
LEFT JOIN table_users tu3 ON k.id_prince = tu3.id
LEFT JOIN table_users  tu4 ON k.id_princess = tu4.id 
```

# java - linux上的verdana字体

> ID：11102675
> 
> 赞同：0
> 
> 时间：2012-06-19T14:03:35.840
> 
> 标签：java, linux, fonts

我正在尝试使用该`verdana.ttf`字体使用 Java 创建 RTF 报告，但它不适用于 Linux。

有人知道我是怎么做到的吗？

```
 String contextPath = FacesUtil.getServletContext().getRealPath("\\");
     try {
          FontFactory.register(contextPath + "WEB-INF\\Fonts\\verdana.ttf");
     } catch (Exception e) {
          e.printStackTrace();
     }

     if (negrito) {
          font = FontFactory.getFont("Verdana", 8, Font.BOLD, new Color(0, 0, 0));
     }
     cell = new Cell(new Paragraph(paragraph, font));
            cell.setBackgroundColor(new Color(255, 255, 255));
            cell.setBorderColor(new Color(255, 255, 255));
            if (center)
                cell.setHorizontalAlignment(Cell.ALIGN_LEFT);

            cell.setRowspan(1);
            cell.setColspan(1);
            return cell; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:27:58.450

我想如果它不能在 Linux 上运行，那是因为你硬编码文件分隔符......

`\\`仅适用于 Windows。将那些替换为由[`System.getProperty("file.separator")`](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html).

例子 ：

```
String separator  = System.getProperty("file.separator");
FontFactory.register(contextPath + "WEB-INF"+separator+"Fonts"+separator+"verdana.ttf"); 
```

# performance - Yii 框架 UrlManager 性能

> ID：11102676
> 
> 赞同：0
> 
> 时间：2012-06-19T14:03:39.350
> 
> 标签：performance, yii, url-routing

我有带有路由规则（（1000+））的路由表，可以在初始化时加载到 UrlManager。但是瓶颈是foreach循环，太慢了。

可能的答案：NoSQL 数据库、内存缓存？你能给点建议吗？

```
 $oldRules = $this->rules;
    $this->rules = array();
    $dependency = new CDbCacheDependency('SELECT MAX(created_at) FROM route');
    $routes = Route::model()->cache(Yii::app()->params['cache_expire_time'], $dependency)->findAll();

    Yii::app()->cache->set('routes', $routes, Yii::app()->params['cache_expire_time'], $dependency);

    // @todo Bottle neck on 1000+ rows (~1.3s on 1000 rows)
    foreach ($routes as $route) {
        $rule = array($route->routeable_controller . '/' . $route->routeable_action);
        if ($route->routeable_id) {
            $rule['defaultParams'] = array('id' => $route->routeable_id);
        }
        $this->rules[$route->pattern] = $rule;
    }

    $this->rules += $oldRules; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:18:27.893

你是运动员吗？你读过 Yii 权威指南吗？他们已经明确提到，在解析请求时，urlManager 规则中的每个规则都会应用于请求 URL，直到找到匹配规则。在 memcache 中加载所有规则将不起作用。
同样，这些规则在正则表达式的帮助下匹配，这本身就是一个昂贵的代码。我会说尝试重写您的规则，以便单个规则与多个 url 匹配。尝试将其中一些移动到 .htaccess 中（用于丢失操作或重定向）

# javascript - Onclick 事件不适用于视频

> ID：11102677
> 
> 赞同：1
> 
> 时间：2012-06-19T14:03:42.393
> 
> 标签：javascript, jquery

我被添加`Youtube video`到我的网站中。在我的网站上，当我们`click`在任何元素上时

`image, text etc`一个 jquery ui 对话框打开，其中包含该元素属性。但是这个

行为不起作用`youtube video`，当我点击视频时它才开始

播放视频。我想在点击嵌入视频时打开一个对话框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:06:56.883

视频本身不是 DOM 中的元素。并且视频嵌入容器元素要么与视频大小不同（可能只有 0 像素），要么位于视频“后面”。

因此，嵌入标签做了某种工作（我不知道细节），将包含控件的视频播放器弹出到该空间中。

如果你想修改视频的控制方式，你需要查看它的 API（因为我刚刚注意到 gdoron 的评论在我打字的时候弹出了！）。您可以在视频顶部放置一个元素来监听点击，但在我看来，这是一种黑客行为，可能会破坏其他交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:07:34.870

也许这可以帮助： http: [//progproblems.blogspot.it/2009/08/javascript-onclick-for-flash-embeded.html](http://progproblems.blogspot.it/2009/08/javascript-onclick-for-flash-embeded.html)

并且还以某种方式在这里复制：[javascript onclick event over flash object](https://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object)

# c# - IE 9 在回发后更改表格元素的样式

> ID：11102678
> 
> 赞同：0
> 
> 时间：2012-06-19T14:03:42.610
> 
> 标签：c#, asp.net, css, internet-explorer-9

我要做的是显示日期列表，当用户选择他可以启用\禁用和更新后的日期时，用户可以选择它们（复选框带有回发）`monthListView.DataBind();`所以主要问题是我附加了两张图片的样式，一张之前选择 ![前](../Images/fe0df75ee8ac92b02fa4606b5e704fd8.png) 和其他选择后 ![后](../Images/c2080a329f95a3b32d34b6628d18f6f5.png)

如您所见，问题是某些值转到新列，但在源中它们是相同的。如何解决这个 IE9 问题？用chrome，firefox测试过，效果很好。并且总是相同的值不在他们的表中。我选择哪个值并不重要。

后：

```
<tr class='enabledTrue'>

    <td>
        <span class="LayoutTemplateStyle"><input id="MainContent_monthListView_MonthState_CheckBox_46" type="checkbox" name="ctl00$MainContent$monthListView$ctrl46$MonthState_CheckBox" onclick="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$MainContent$monthListView$ctrl46$MonthState_CheckBox\&#39;,\&#39;\&#39;)&#39;, 0)" /></span>
    </td>
    <td >
        <span id="MainContent_monthListView_MonthName_Label_46" class="LayoutTemplateStyle">November 2012</span>
    </td>

</tr> 
```

前：

```
<tr class='enabledTrue'>

    <td>
        <span class="LayoutTemplateStyle"><input id="MainContent_monthListView_MonthState_CheckBox_46" type="checkbox" name="ctl00$MainContent$monthListView$ctrl46$MonthState_CheckBox" onclick="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$MainContent$monthListView$ctrl46$MonthState_CheckBox\&#39;,\&#39;\&#39;)&#39;, 0)" /></span>
    </td>
    <td >
        <span id="MainContent_monthListView_MonthName_Label_46" class="LayoutTemplateStyle">November 2012</span>
    </td>

</tr> 
```

PS：在新标签中打开图像可以清楚地看到代码。

# node.js - 用快递裁剪和上传图像的最佳方式？

> ID：11102679
> 
> 赞同：5
> 
> 时间：2012-06-19T14:03:43.507
> 
> 标签：node.js, express, jcrop

我将图像上传到 S3 服务器上，并在 express上使用[knox 。](https://github.com/LearnBoost/knox)

我希望用户可以裁剪此个人资料图片的图像（例如在 facebook 上）

我听说过用于用户界面的[Jcrop](https://github.com/tapmodo/Jcrop)和用于服务器的[imagemagick 。](http://imagemagick.org)对您来说，最好的方法是什么？

*对不起，我的英语不好。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T14:37:22.407

您可以尝试为 node.js [https://github.com/aheckmann/gm使用不错的库 GraphicsMagick](https://github.com/aheckmann/gm)

这是一个测试某些功能的链接，等等 [http://aheckmann.github.com/gm/](http://aheckmann.github.com/gm/)

```
var gm = require('gm')
  , resizeX = 200
  , resizeY = 400

gm('/path/to/image.jpg')
.resize(resizeX, resizeY)
.write(response, function (err) {
  if (err) ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T01:05:37.450

我知道这个答案有点晚了，但我一直在研究一个可以做到这一点的模块（称为 Picsee），请在[此处查看](http://dlochrie.github.io/picsee/)。它上传照片、裁剪照片（您需要一个客户端库），并根据您的配置保存多个版本。它使用`GD`，而不是 Image- 或 GraphicsMagick。

还有一个[演示应用程序](https://github.com/dlochrie/picsee-looksee)，演示如何上传、裁剪和保存图像的多个版本。这个例子是使用`JCrop`. 最终，我希望添加 S3 支持以及其他几个功能。

# ruby-on-rails - 向资源的路线添加第二个“新”操作

> ID：11102683
> 
> 赞同：0
> 
> 时间：2012-06-19T14:03:53.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, routes, action

我需要向名为*Things*的资源添加第二个“新”操作（称为 *different_new*） 。我希望它解决：

```
things/different_new 
```

我在我的 *things_controller.rb* 上定义了一个 different_new 操作

按照[rails guide to routing](http://guides.rubyonrails.org/routing.html)，我看到了这个添加自定义操作作为路由的示例：

```
resources :photos do
  member do
    get 'preview'
  end
end 
```

但是，像这样添加的任何操作都会添加到特定资源中。例如，上面将导致这样的路线：

照片/:photo_id/预览

所以这对我不起作用，因为我希望该操作是创建新资源的位置，而不是针对已创建资源的操作。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:08:00.973

与member类似，还有一个collection选项：

```
resources :photos do
  collection do
    get 'preview'
  end
end 
```

或者对于您的情况：

```
resources :things do
  collection do
    get 'different_new'
  end
end 
```

这在导轨布线指南的第 2.9.2 节中进行了描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:07:18.023

新操作（在这种情况下是您的`different_new`操作）与任何现有资源无关，因此它应该是一个收集路线：

```
resources :things do
  get :different_new, :on => :collection
end 
```

它会生成一个类似的路径`things/different_new`。但是，与预定义的`new`操作 url 帮助器不同，它将是复数 - `different_new_things_path`。

# python - UnboundLocalError：分配前引用的局部变量“resp”

> ID：11102685
> 
> 赞同：1
> 
> 时间：2012-06-19T14:04:00.557
> 
> 标签：python, tweepy

这似乎是一个非常常见的错误，有几个不同的解决方案， [python: UnboundLocalError: local variable 'open' referenced before assignment](https://stackoverflow.com/questions/10623093/python-unboundlocalerror-local-variable-open-referenced-before-assignment)

[Python：UnboundLocalError 帮助：赋值前引用的局部变量](https://stackoverflow.com/questions/2256056/python-help-with-unboundlocalerror-local-variable-referenced-before-assignment)

我的问题不同的是，我正在运行的代码中没有变量“resp”。大多数其他问题被发布是因为发布者对类和变量使用了相同的名称，或者他们未能将其声明为全局变量。

编码

```
import tweepy
auth = tweepy.OAuthHandler('75VSSMGC4pfUB5u0Zt5G3Q', '2olQeiquDg71uwnGoU2c9e2u3qy2LrKkn2p6KWBIdI')
auth.set_access_token('122095773-cCrYa4FWFoBkx44LES8yeBlt8DTG0jnZivJ79k2J', 'p1Nmp9DaPUIThpTamzIMfdvJu0wgdfxmghdwsSagM')
api = tweepy.API(auth)

print api.rate_limit_status()
#print tweepy.api.rate_limit_status() 
```

错误

```
Traceback (most recent call last):
  File "/Users/brendan/Documents/workspace/Tweeter/src/rate_limit.py", line 6, in <module>
    print api.rate_limit_status()
  File "build/bdist.macosx-10.5-fat3/egg/tweepy/binder.py", line 185, in _call
  File "build/bdist.macosx-10.5-fat3/egg/tweepy/binder.py", line 147, in execute
UnboundLocalError: local variable 'resp' referenced before assignment 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T14:13:52.950

升级你的`tweepy`图书馆。

请求失败时存在一个错误，会导致您看到的特定错误，但[此后已得到纠正](https://github.com/tweepy/tweepy/commit/9a4d1c49a69d0f84a67b5897dc2647148bb7de00)。该修复程序是 1.6 及更高版本的一部分。

# ruby-on-rails-3 - 带有 Highcharts 的实时图表

> ID：11102686
> 
> 赞同：0
> 
> 时间：2012-06-19T14:04:04.297
> 
> 标签：ruby-on-rails-3, highcharts

我正在使用[lazy_highcharts](https://github.com/michelson/lazy_high_charts) gem 并尝试配置实时图表。[按照此实时图表](http://www.highcharts.com/documentation/how-to-use#live-charts)指南，我在控制器中添加了一个函数，以这种格式呈现 JSON 输出`[1340051521000,8]`

```
def live
    x = Time.now.to_i * 1000
    y = Random.rand(11)
    #create an array and echo to JSON
    ret =[x,y]
    x=ActiveSupport::JSON
    @j=x.encode(ret)
    render :json => @j
  end 
```

接下来我有一个名为 live_update.js 的新 JS 文件，我在其中粘贴了步骤 2\. 和 3\. 包含“requestData()”

我从视图中进行了回调：

```
 = high_chart("my_id", @h) do |c|
        requestData(); 
```

注意：我无法从我的控制器调用它：`f.options[:chart][:events][:load] = 'requestData'`

当我运行它时，我得到一个错误：chart is not defined，显然它是在 JS 文件中全局定义的。

这是我在浏览器源视图中看到的：

```
<script type="text/javascript">
            jQuery(function() {
                  // 1\. Define JSON options
                  var options = {
                                chart: {"defaultSeriesType":"column","renderTo":"my_id","zoomType":"xy"},
                                        title: {"text":"Test"},
                                        legend: {"layout":"horizontal","style":{}},
                                        xAxis: {"type":"datetime"},
                                        yAxis: {"title":{"text":"Agents"},"labels":{},"min":"0","allowDecimals":false,"gridLineDashStyle":"LongDash"},
                                        tooltip:  {"enabled":true},
                                        credits: {"enabled":false},
                                        plotOptions: {"areaspline":{}},
                                        series: [{"name":"test","data":[]}],
                                        subtitle: {}
                                };

                  // 2\. Add callbacks (non-JSON compliant)                
                  requestData();

                  // 3\. Build the chart
                    var chart = new Highcharts.Chart(options);
              });
              </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:53:25.033

适用于版本 1.1.6

```
f.options[:chart][:events] = {
  :load => %| function requestData(){
    $.ajax({
      url:"live",
      success: function(a){
        var c=chart.series[0], d=c.data.length>20;
        chart.series[0].addPoint(a,true,d);
        setTimeout(requestData,16e3)
      }, cache:false
    })
  }|.js_code
} 
```

# resharper - C# 循环和范围变量的 Resharper 命名样式

> ID：11102688
> 
> 赞同：0
> 
> 时间：2012-06-19T14:04:09.710
> 
> 标签：resharper

我正在尝试为 C# 局部变量命名约定不同于循环和范围变量命名约定的项目配置 ReSharper。

方法体内的局部变量应该是 UpperCamelCase，除了循环和范围变量应该是 lowerCamelCase。

例子：

```
int[] SomeArray;

for(int i=0; i<SomeArray.Length; i++)
{
}

foreach(var someValue in SomeArray)
{
}

return  from someValue in SomeArray
        where someValue > 0
        select someValue; 
```

是否可以在 ReSharper 中配置此约定？据我所知，可用的 C# 命名样式规则似乎都没有涵盖循环/范围变量。

我正在使用 ReSharper 6.1 和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:43:04.620

你是对的，Resharper 无法区分局部变量和循环/范围变量（它们也是局部变量）。

我建议要么对 lowerCamelCase 的所有局部变量坚持 Microsoft 命名方案，要么只取消该检查或将其设置为“不显示”。

# xml - 如何编写通过调用 XQuery 来检查 XML 数据的 XForms？

> ID：11102692
> 
> 赞同：0
> 
> 时间：2012-06-19T14:04:19.117
> 
> 标签：xml, orbeon, xforms

我是 XForms 技术的新手，我发现很难实现以下功能。

我的目标是：在单击链接或按钮编辑资源（通常是 XML）时，必须进行一些检查（例如通过调用 XQuery，检查资源中的元素），并且基于我需要的 XQuery 的返回值抛出错误对话框或编辑窗口。

如果有人指导我完成上述功能，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:57:15.483

如果您提出一个更具体的问题，您将在此处获得更有用的答案，描述您实现它的尝试，如果可能的话，包括最少但有效的代码，并说明它到底在哪里失败。

但我知道，如果您是 XForms 技术的新手，这很难做到。因此，我建议您从[阅读 Orbeon XForms 教程](http://wiki.orbeon.com/forms/doc/developer-guide/orbeon-forms-xforms-tutorial)开始。你应该在那里学习实现这一点所需的所有成分。当然，如果您在此过程中有任何问题，请随时将它们发布在 Stack Overflow 上。

# r - 计算R中的移动多数

> ID：11102695
> 
> 赞同：3
> 
> 时间：2012-06-19T14:04:25.027
> 
> 标签：r

我正在尝试计算 R 中栅格上的移动多数值。栅格包中的焦点函数仅提供平均值、最小值和最大值。我有一个具有 3 个值（1、2 和 3）的栅格，我希望在中心设置的 3x3 窗口中具有最丰富的值。

我怎样才能在 R 中最有效地做到这一点？谢谢！

```
library(raster)

# create data
r <- raster(nrows = 120, ncol = 120, xmn=0)
r[] <- sample(3, ncell(r), replace=TRUE) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:34:46.243

你可以这样做：

```
f <- function(x){
 tab <- table(x)
 # I am using the first value here, maybe you want to use the mean, 
 # if 2 or more values occur equally often.
 names(tab)[which.max(tab)][1]
}

r <- raster(nrows = 120, ncol = 120, xmn=0)
r[] <- sample(3, ncell(r), replace=TRUE)

r <- focal(r, w=3, f) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T07:34:40.980

也许我有点晚了，但它可能对未来的读者有用：

现在在 R 中，您可以找到大多数（模式）的焦点函数，因此：

```
library(raster)

# create data
r <- raster(nrows = 120, ncol = 120, xmn=0)
r[] <- sample(3, ncell(r), replace=TRUE)

a<-focal(r, w=matrix(1,3,3), fun=modal)    # 3x3 moving window
plot(a) 
```

*（注意：使用 NA 值时要注意——最好将它们转换为整数）*

结果：

![焦点分析结果](../Images/8d599bfac920e0bb81140ec9b346b673.png)

# shell - zsh 并不总是扩展路径

> ID：11102699
> 
> 赞同：5
> 
> 时间：2012-06-19T14:04:37.710
> 
> 标签：shell, zsh

如果我输入`rpm --root=/`ZSH 然后按 TAB 没有任何反应。这适用于许多其他命令。我怎样才能让 ZSH 总是像 BASH 一样扩展路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-07T20:43:46.427

看起来您仍在使用 Zsh 的遗留完成系统。要升级到“新”完成系统（2000 年发布），请将其添加到您的`.zshrc`文件中：

```
autoload -Uz compinit
compinit 
```

然后你会看到按下`Tab`之后`rpm --root=/`会给你文件完成就好了。

# javascript - 无法在 Magento 中启动简单的 Supersized

> ID：11102701
> 
> 赞同：0
> 
> 时间：2012-06-19T14:04:38.243
> 
> 标签：javascript, jquery, html, magento, supersized

我正在尝试使用超大的 Jquery 插件，但我不能。我正在与 Magento 合作。我已经用 jQuery 替换了超大型库中的所有 $。我已经添加了这个：jQuery.noConflict(); 就在函数开始之前。这是我的代码，我复制脚本和 html。我不知道为什么它不起作用，有人可以帮助我吗？

```
<script type="text/javascript"> 
jQuery.noConflict();
jQuery(function(){
  jQuery.fn.supersized.options = {
      startwidth: 1440,
      startheight: 900,
      vertical_center: 1,
      slideshow: 1,
      navigation: 1,
      thumbnail_navigation: 0,
      transition: 1, //0-None, 1-Fade, 2-slide top, 3-slide right, 4-slide bottom, 5-slide left
      pause_hover: 1,
      slide_counter: 1,
      slide_captions: 1,
      slide_interval: 3000,
      slides : [
         {image : "<?php echo $this->getSkinUrl('images/portada_slider/slider1.jpg') ?>"} ,
         {image : "<?php echo $this->getSkinUrl('images/portada_slider/slider2.jpg') ?>"} 

      ]
   };

 });

</script>

<div id="supersized"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:05:55.357

## 笔记

我没有看到任何命名的函数`supersized()`，那么它将如何工作？你的过程是错误的。阅读有关 jQuery 插件制作过程的信息。

* * *

你用过

```
jQuery('document').ready(function() {.. 
```

和

```
jQuery(function(){.. 
```

两者都使用任何一个，因为它们是相同的，并确保：

*   你首先添加了 jQuery 库

**完整代码**

```
jQuery(function(){
  jQuery.fn.supersized.options = {
      startwidth: 1440,
      startheight: 900,
      vertical_center: 1,
      slideshow: 1,
      navigation: 1,
      thumbnail_navigation: 0,
      transition: 1, //0-None, 1-Fade, 2-slide top, 3-slide right, 4-slide bottom, 5-slide left
      pause_hover: 1,
      slide_counter: 1,
      slide_captions: 1,
      slide_interval: 3000,
      slides : [
         {image : 'photo1.jpg'} ,
         {image : 'photo2.jpg'} 

      ]
   };
  jQuery('#supersized').supersized(); 
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:07:27.200

尝试 ：

```
jQuery(function() {
    jQuery.fn.supersized.options = {
        startwidth: 1440,
        startheight: 900,
        vertical_center: 1,
        slideshow: 1,
        navigation: 1,
        thumbnail_navigation: 0,
        transition: 1,
        //0-None, 1-Fade, 2-slide top, 3-slide right, 4-slide bottom, 5-slide left
        pause_hover: 1,
        slide_counter: 1,
        slide_captions: 1,
        slide_interval: 3000,
        slides: [
            {image: 'photo1.jpg'},
            {image: 'photo2.jpg'}
        ]
    };
    jQuery('#supersized').supersized();
});​ 
```

无需同时包含两者：

```
jQuery('document').ready(function() {
jQuery(function(){ 
```

他们是一样的东西

# smalltalk - 导出和共享 Smalltalk 项目

> ID：11102702
> 
> 赞同：4
> 
> 时间：2012-06-19T14:04:38.743
> 
> 标签：smalltalk

我正在尝试与远程位置的朋友一起调试 Smalltalk (Squeak) 项目。除了我的项目，它是 Squeak 4.3 的股票图像。

有没有办法只把我做过的项目而不是整个图像发送给他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:29:20.567

在 World 菜单中，有“Save project on file...”和“Load project from file...”，但它们似乎已损坏。加载一个简单的项目导致错误“找不到密钥：MorphicModel4”。我会将其转发到开发人员列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:17:34.653

使用蒙蒂塞洛。它非常易于使用，并且可以进行版本控制、合并和冲突解决。它也（某种程度上）独立于平台。

# fckeditor - FCKEditor：单击 CMS 区域中的链接时显示消息框

> ID：11102706
> 
> 赞同：0
> 
> 时间：2012-06-19T14:05:04.843
> 
> 标签：fckeditor

在我使用 FCKEditor 的 cms 控件中，我需要显示一个消息框，上面写着：您将离开当前页面。这可能吗？如果是，那怎么办？

# php - 将 7 天添加到 PHP 日期并立即更改格式

> ID：11102708
> 
> 赞同：2
> 
> 时间：2012-06-19T14:05:06.633
> 
> 标签：php, date, datetime, strtotime

我的代码中有一个日期，就像这样。

```
date("F j", strtotime($dateEnd)) 
```

我想改变它来做类似的事情......

```
date("+7 day", "F j", strtotime($dateEnd)) 
```

但是添加 +7 天会阻止它工作，但在其他情况下添加天数是有效的。是否可以将格式更改为“F j”并一次添加 7 天？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T14:06:35.933

试试这个：

```
 date("F j", strtotime($dateEnd . "+ 7 day")); 
```

基本上，您需要先调整日期，然后*再将*其转换为时间戳，然后将其传递给`date()`进行格式化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:15:07.613

就像是：

```
$d = new DateTime( $dateEnd );
$d->modify( '+7 days' );
echo $d->format( 'F j' ); 
```

(PHP >= 5.2 )

# perl - 为 Net::LDAP 设置连接超时

> ID：11102713
> 
> 赞同：2
> 
> 时间：2012-06-19T14:05:17.553
> 
> 标签：perl, sockets, timeout, ldap, nonblocking

我在 mod_perl 下运行 perl 代码，它使用 Net::LDAP 模块连接到 openldap 服务器 slapd。

我正在尝试像这样设置连接超时：

```
my $ldap = Net::LDAP->new($server, timeout => 120); 
```

但是当 slapd 负载很重时，我会在大约 20 秒后连接尝试超时。

Net::LDAP 使用 IO::Socket 和 IO::Select 来实现其连接处理，特别是 IO::Socket 中的这段代码（注意我添加了一些额外的调试代码）：

```
sub connect {
    @_ == 2 or croak 'usage: $sock->connect(NAME)';
    my $sock = shift;
    my $addr = shift;
    my $timeout = ${*$sock}{'io_socket_timeout'};
    my $err;
    my $blocking;

    my $start = scalar localtime;
    $blocking = $sock->blocking(0) if $timeout;
    if (!connect($sock, $addr)) {
    if (defined $timeout && ($!{EINPROGRESS} || $!{EWOULDBLOCK})) {
        require IO::Select;

        my $sel = new IO::Select $sock;

        undef $!;
        if (!$sel->can_write($timeout)) {
        $err = $! || (exists &Errno::ETIMEDOUT ? &Errno::ETIMEDOUT : 1);
        $@ = "connect: timeout";
        }
        elsif (!connect($sock,$addr) &&
                not ($!{EISCONN} || ($! == 10022 && $^O eq 'MSWin32'))
            ) {
        # Some systems refuse to re-connect() to
        # an already open socket and set errno to EISCONN.
        # Windows sets errno to WSAEINVAL (10022)
                my $now = scalar localtime;
        $err = $!;
        $@ = "connect: (1) $! : start = [$start], now = [$now], timeout = [$timeout] : " . Dumper(\%!);
        }
    }
        elsif ($blocking || !($!{EINPROGRESS} || $!{EWOULDBLOCK}))  {
        $err = $!;
        $@ = "connect: (2) $!";
    }
    }

    $sock->blocking(1) if $blocking;

    $! = $err if $err;

    $err ? undef : $sock;
} 
```

我看到这样的日志输出：

```
connect: (1) Connection timed out : start = [Tue Jun 19 14:57:44 2012], now = [Tue Jun 19 14:58:05 2012], timeout = [120] : $VAR1 = {
          'EBADR' => 0,
          'ENOMSG' => 0,
<snipped>
          'ESOCKTNOSUPPORT' => 0,
          'ETIMEDOUT' => 110,
          'ENXIO' => 0,
          'ETXTBSY' => 0,
          'ENODEV' => 0,
          'EMLINK' => 0,
          'ECHILD' => 0,
          'EHOSTUNREACH' => 0,
          'EREMCHG' => 0,
          'ENOTEMPTY' => 0
        };
 : Started attempt at Tue Jun 19 14:57:44 2012 
```

20 秒连接超时从何而来？

编辑：我现在找到了罪魁祸首：/proc/sys/net/ipv4/tcp_syn_retries，默认设置为 5，重试 5 次大约需要 20 秒。 [http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout](http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:05:45.433

## 更新：有些内核是这样的

简短的回答是，一些 Linux 内核对 connect() 施加了 20 秒的超时。 [这是一个错误](https://bugzilla.kernel.org/show_bug.cgi?id=18952)。

请注意，链接的[sekuda](http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout)显然是模棱两可的：默认值`tcp_syn_retries`(5) 和重试退避将给出远大于 20 秒的超时。上面链接的错误讨论中给出了缺失的细微差别。

## 原始答案

尝试升级。

`connect`IO::Socket 版本 1.34（例如 perl 5.16）中的sub，`select()`用于写入*和*错误的 s 套接字。`getsockopt()`然后使用/SO_ERROR检查错误的套接字是否存在真正的错误情况。

我怀疑您遇到了[TCP '软错误'](https://www.rfc-editor.org/rfc/rfc1122#page-103)（例如，一个 ICMP 主机不时无法访问）。但是，您的 IO::Socket 版本错过了要点，因为它从不查看 SO_ERROR。

如果升级不能解决问题，那么正确的解决方法是在 IO::Socket::connect 内部确定逻辑以[执行 Linux connect(2) 手册页建议](http://linux.die.net/man/2/connect)的操作，即在非阻塞、`connect()`ing 套接字之后检查 SO_ERROR `select()`s*可写*。

## 廉价的解决方法

与此同时，类似...

```
# untested!
use Errno;

...

my $relative_to = 120; 
my $absolute_to = time() + $relative_to;

TRYCONN: {
  $ldap = Net::LDAP->new($server, timeout => $relative_to);
  if (! $ldap and $!{ETIMEDOUT}) {
    $rel_to = $absolute_to - time();
    redo TRYCONN if $relative_to > 0;
  }
}

die "Aaaaargh" unless $ldap; 
```

...或类似的东西应该可以解决问题。

# android - 在android中动画片段时的白色背景

> ID：11102715
> 
> 赞同：6
> 
> 时间：2012-06-19T14:05:17.980
> 
> 标签：android, android-fragments, android-animation

我正在尝试在 Android 中滑入一个片段。过渡和滑动按预期工作，它准确地滑动到我想要的位置。但是，在视图到位之前，视图将处于其最终位置的位置是白色背景。就好像它已经为它分配了空间。但我希望它滑过我当前的视图，所以不显示白色背景。对此有什么想法吗？我在 res/anim 中使用带有 xml 文件的视图动画器。

这是一个小代码：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<translate
    android:duration="100"
    android:fromYDelta="100%"
    android:toYDelta="0" />

<alpha
    android:duration="100"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" /> 
```

```
android.support.v4.app.FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();

fragmentTransaction.setCustomAnimations(R.anim.slide_in_down, 0);
fragmentTransaction.show(fragmentToSlideIn);
fragmentTransaction.commit(); 
```

那么，为什么视图的最终位置在到达该位置之前会有白色背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:31:42.387

[http://developer.android.com/guide/topics/graphics/prop-animation.html#object-animator](http://developer.android.com/guide/topics/graphics/prop-animation.html#object-animator) 你应该使用objectAnimator，这里是从右向左滑动片段的示例代码：

```
 private View mPanel1;
    private View mPanel2;
    private View mLayout;
    boolean isCollapsed;
    private int LayoutWidth;
    private int Panel1Width;
    private int Panel2Width;
    private static final TimeInterpolator sCollapseInterpolator = new DecelerateInterpolator(2.5F);
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mLayout = findViewById(R.id.linearlayout);
    mPanel1 = findViewById(R.id.fragment1);
    mPanel2 = findViewById(R.id.fragment2);
}
    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
     super.onWindowFocusChanged(hasFocus);
        // Measure width of layout and mPanel1 which is FragmentList. This is needed for ObjectAnimator
        // to create transition animation
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        LayoutWidth = size.x;
        Panel1Width = mPanel1.getWidth();
        Panel2Width = mPanel2.getWidth();

    }
    public void slide(){
        if(isCollapsed){
                        PropertyValuesHolder[] arrayOfPropertyValuesHolder = new PropertyValuesHolder[2];
                        arrayOfPropertyValuesHolder[0] = PropertyValuesHolder.ofInt("PanelLeft", Panel1Width * -1, 0);
                        arrayOfPropertyValuesHolder[1] = PropertyValuesHolder.ofInt("Panel2W", LayoutWidth, LayoutWidth - Panel1Width);
                        ObjectAnimator localObjectAnimator = ObjectAnimator.ofPropertyValuesHolder(this, arrayOfPropertyValuesHolder).setDuration(400);
                        localObjectAnimator.setInterpolator(sCollapseInterpolator);
                        localObjectAnimator.start();
                    }
                    else{
                        PropertyValuesHolder[] arrayOfPropertyValuesHolder = new PropertyValuesHolder[2];
                        arrayOfPropertyValuesHolder[0] = PropertyValuesHolder.ofInt("PanelLeft", 0, Panel1Width / -1);
                        arrayOfPropertyValuesHolder[1] = PropertyValuesHolder.ofInt("Panel2W", LayoutWidth - Panel1Width, LayoutWidth);
                        ObjectAnimator localObjectAnimator = ObjectAnimator.ofPropertyValuesHolder(this, arrayOfPropertyValuesHolder).setDuration(400);
                        localObjectAnimator.setInterpolator(sCollapseInterpolator);
                        localObjectAnimator.start();
                    }
                    isCollapsed = !isCollapsed;
    }

        public int getPanelLeft() {
            return ((ViewGroup.MarginLayoutParams) mLayout.getLayoutParams()).leftMargin;
        }

        public void setPanelLeft(int paramInt) {
             ViewGroup.MarginLayoutParams lp = (ViewGroup.MarginLayoutParams) mLayout.getLayoutParams();
             lp.leftMargin = paramInt;
             mLayout.setLayoutParams(lp);
         }

        public int getPanel2W() {
             return ((ViewGroup.MarginLayoutParams) mPanel2.getLayoutParams()).width;
        }

        public void setPanel2W(int paramInt) {
             ViewGroup.MarginLayoutParams lp = (ViewGroup.MarginLayoutParams) mPanel2.getLayoutParams();
             lp.width = paramInt;
             mPanel2.setLayoutParams(lp);
        } 
```

布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/linearlayout" >

    <fragment
        android:id="@+id/fragment1"
        android:name="package.your.fragment1"
        android:layout_width="320dp"
        android:layout_height="match_parent"/>

<fragment
        android:id="@+id/fragment2"
        android:name="package.your.fragment2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</LinearLayout> 
```

# apache - VirtualHost 通配符子域

> ID：11102716
> 
> 赞同：1
> 
> 时间：2012-06-19T14:05:29.740
> 
> 标签：apache, redirect, subdomain, virtualhost

我想要一个虚拟主机文件来显示网络服务器上的网站，这样如果 url 是[http://site1.example.com](http://site1.example.com)，那么文件夹是 /var/www/html/site1，另一个可能是[http://myblog。 example.com](http://myblog.example.com)，文件夹是 /var/www/html/myblog 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:10:38.820

您可能需要[mod_vhost_alias](http://httpd.apache.org/docs/2.4/mod/mod_vhost_alias.html)。

# c# - 无法静默嵌入互操作警告

> ID：11102718
> 
> 赞同：6
> 
> 时间：2012-06-19T14:05:38.073
> 
> 标签：c#, visual-studio-2010, activex, stdole

首先，我需要使用第三方 ActiveX 控件。

接下来，我必须使用 stdole 库来为第三方控件提供一些图像。当我在默认设置下编译时，我收到了一些警告：

```
warning CS1762: A reference was created to embedded interop assembly 'c:\Windows\assembly\GAC\stdole\7.0.3300.0__b03f5f7f11d50a3a\stdole.dll' because of an indirect reference to that assembly created by assembly 'XXX\obj\x86\Release\Interop.ThirdPartyControl.dll'. Consider changing the 'Embed Interop Types' property on either assembly.
warning CS1762: A reference was created to embedded interop assembly 'c:\Windows\assembly\GAC\stdole\7.0.3300.0__b03f5f7f11d50a3a\stdole.dll' because of an indirect reference to that assembly created by assembly 'XXX\obj\x86\Release\AxInterop.ThirdPartyControl.dll'. Consider changing the 'Embed Interop Types' property on either assembly. 
```

很简单，我将遵循该建议并将 Embed Interop Types 设置为 false 以获取 stdole 参考。一切看起来都很好，直到我现在去客户端机器，突然应用程序抛出这个：

```
Could not load file or assembly 'stdole, Version=7.0.3300.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified. 
```

所以，我想这不会发生（尽管我不确定为什么删除 stdole 上的嵌入互操作会导致库完全无法找到）。

好吧，让我们换一种方式，用 Embed Interop 将所有内容标记为 true。哎呀！编译错误：

```
Error   2   Cannot embed interop types from assembly 'XXX\obj\x86\Release\AxInterop.ThirdPartyControl.dll' because it is missing either the 'ImportedFromTypeLibAttribute' attribute or the 'PrimaryInteropAssemblyAttribute' attribute XXX\obj\x86\Release\AxInterop.ThirdPartyControl.dll XXX
Error   1   Cannot embed interop types from assembly 'XXX\obj\x86\Release\AxInterop.ThirdPartyControl.dll' because it is missing the 'GuidAttribute' attribute  XXX\obj\x86\Release\AxInterop.ThirdPartyControl.dll XXX 
```

那么，关于如何摆脱警告并拥有可以构建和运行的东西的任何建议？

**更新**

Hans Passant 作为评论发布了一个确实解决问题的答案。如果他将其转发为答案，我会接受。不幸的是，我也遇到了标准问题，即设置为 Copy Local 的 DLL 被很好地复制到其项目的发布文件夹中，但不会移动到解决方案的最终发布文件夹（单独的可执行文件）。我现在通过在我的可执行文件中添加对 stdole 的引用解决了这个问题。我想这可能已经足够好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T04:29:48.663

汉斯·帕桑特的回答：

您不能为 ActiveX 组件嵌入类型。目标机器缺少 stdole 的 PIA，尝试将 Copy Local 属性设置为 true 并复制生成的 stdole.dll。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-08T08:18:58.647

如果你在 VS10 中新建一个项目，它可能默认使用 .NET Framework 4 客户端配置文件，你可以在*项目属性-->应用程序*标签页中将目标框架设置为 .NET Framework 4。

# sql - 需要对具有不同字段名称的 Access 表进行 SQL 查询

> ID：11102719
> 
> 赞同：1
> 
> 时间：2012-06-19T14:05:40.393
> 
> 标签：sql, ms-access-2003

我需要一个 SQL 查询来搜索具有更改字段名称的 Access 表中的逗号，并显示其中有一个带有逗号的字段值的整个记录​​。该表将始终称为“Scrubbed”，但数据库用于查询导入并重命名为“Scrubbed”的各种表。字段名称并不总是相同的。如果我知道字段名称，这是一个示例。

```
SELECT *
FROM Scrubbed
WHERE (((Scrubbed.FirstName) Like '*,*')) OR (((Scrubbed.LastName) Like '*,*')); 
```

在此先感谢您的任何建议

# python-3.x - 在pyparsing中使用token作为变量

> ID：11102725
> 
> 赞同：5
> 
> 时间：2012-06-19T14:05:59.117
> 
> 标签：python-3.x, pyparsing

我最近开始使用 python/pyparsing 来处理一串十六进制值，但我遇到了麻烦：考虑这个字符串：

```
string = "10020304059917368584304025326" 
```

我希望最终结果是这样的：

```
['10', '02', '03', ['04', '05', '9917365843'], ['04', '02', '5326']] 
```

假设 04 是表示数据的标签（与 ASN.1 中的概念相同），而 05 是该数据的大小。我没有看到如何在 pyparsing 代码上使用 size 变量。我能做的最好的是：

```
byte = Word(hexnums, exact=2)
process = byte + byte + byte + Word(hexnums)
newstring = process.parseString(string)
print (newstring.dump()) 
```

任何帮助将不胜感激。

* * *

**PS**：在 Hooked 的帮助下，我的最终代码是：

```
from pyparsing import *

string = "10 02 03 04 05 99 17 36 58 43 04 02 53 26"

tag = Word(hexnums, exact=2)
size =  Word(hexnums)
array = Group(tag + countedArray(size))

process = tag + tag + tag + ZeroOrMore(array)

newstring = process.parseString(string)
print (newstring.dump()) 
```

哪个打印：

```
['10', '02', '03', ['04', ['99', '17', '36', '58', '43']], ['04', ['53', '26']]] 
```

希望这对将来有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:37:56.080

我从更一般的意义上问了同样的问题，[BNF 可以处理前向消费吗？](https://stackoverflow.com/questions/10030526/can-a-bnf-handle-forward-consumption). 这个问题的答案是否定的，因为上下文无关语法不知道会发生什么。[值得庆幸的是，正如包的作者指出](https://stackoverflow.com/a/10038639/249341)的那样，pyparsing 不仅仅是一种上下文无关的语法：

> Pyparsing 包括`countedArray`完全按照您的要求执行的助手。它接受一个参数 expr，并将解析一个整数，后跟“n”个 expr 实例

他的回答中提供了一个更完整的解决方案和一个最小的工作示例。问题：[PyParsing 前瞻和贪婪表达式](https://stackoverflow.com/questions/9242561/pyparsing-lookaheads-and-greedy-expressions)也是您尝试做的一个很好的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:11:01.333

这行得通吗？它不使用 pyparsing，但它会在看到“04”时记录可变长度的子列表。

```
def func( s ):
    d = []
    # while s isn't empty
    while len(s) != 0:
        b = s[0:2]
        if b != '04':
            # if b isn't '04' append it to d
            d.append( b )   
            # shorten s
            s = s[2:]
        else:
            # take the length, as a string
            l = s[2:4]
            # take the length, as an integer
            n = int(s[2:4])
            # record b='04', the length, and then the next values
            d.append( [ b, l, s[4:4+n*2] ] )
            # shorten s
            s = s[4+n*2:]
    return d 
```

# wix - 检查 .MSI 中的 Visual Studio 补丁 (SP/KB/HF) 版本（通过 Wix）

> ID：11102728
> 
> 赞同：0
> 
> 时间：2012-06-19T14:06:00.177
> 
> 标签：wix, windows-installer

我们正在通过使用 Wix 创建的 .msi 包部署我们的软件，并且部署的功能/软件需要 Visual Studio 的某个 (>=) 补丁级别（在这个特定阶段，所有最新的累积更新 3 / KB2662296 都是我们的目标版本）。

是否有任何（Wix 内置）方法来检查 VS(2010) 是否具有一定的补丁级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:02:21.693

如果它不在[这些预定义属性](http://wix.sourceforge.net/manual-wix3/wixvsextension.htm)中，则必须执行注册表搜索才能找到它，保存到属性并在您的条件下使用它。

# c# - 如何防止 iOS Safari 输入标签中的自动大写？

> ID：11102729
> 
> 赞同：15
> 
> 时间：2012-06-19T14:06:01.163
> 
> 标签：c#, asp.net, html, ipad

我正在制作一个带有登录站点的网站，人们可以在其中做不同的事情。使用 iPad 登录时，密码中的第一个字母自动设置为大写，如何更改它，使第一个字母不是大写，而是标准小写或他们输入的任何内容？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-19T14:11:50.687

试试这个：

```
<input type="password" ... autocapitalize="off"> 
```

这直接来自苹果：http: [//developer.apple.com/library/safari/#codinghowtos/mobile/userExperience/_index.html](http://developer.apple.com/library/safari/#codinghowtos/mobile/userExperience/_index.html)

编辑：

尝试将 autocapitalize 标签添加到您的 asp:textbox 中，看看是否有效。

```
<asp:TextBox ID="txbPassWord" runat="server" TextMode="Password" autocapitalize="off"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T14:10:13.673

在你的输入标签中试试这个（[在这个问题中找到](https://stackoverflow.com/questions/1580793/how-can-i-avoid-iphone-safari-first-letter-in-caps)）：

```
autocapitalize="off" 
```

注意：如果您不使用纯 HTML（只是注意到 ASP.NET 标记），则需要根据您使用的控件样式以某种方式将其添加为 html 参数。

我假设你已经这样做了：

您需要将输入框指定为`"password"`.

```
<input type="password" name="password" /> 
```

我认为 iOS Safari 足够聪明，不会对密码标签执行此操作，但也许不是！

# maven - 冻结对 maven 版本的传递依赖，以获得完全可重现的构建

> ID：11102731
> 
> 赞同：5
> 
> 时间：2012-06-19T14:06:02.753
> 
> 标签：maven, dependencies, release, maven-release-plugin, transitive-dependency

一个与基本 maven 概念相关的问题：

一旦发布，我想保证项目构建是完全可重现的。因此，所有项目和插件依赖项，包括传递依赖项，都应该始终以相同的方式解决。

不幸的是，如果依赖关系以版本范围表示，情况并非如此。即使设置了项目的直接依赖项（使用[versions:use-releases](http://mojo.codehaus.org/versions-maven-plugin/use-releases-mojo.html)），也可能发生传递依赖项将来仍可以通过其他方式解决的情况。

如何解决问题？有已知的解决方案吗？

我在想（只是一个想法），关于创建一个插件，它在发布时会将项目的所有依赖项转储到一个单独的文件中，然后一旦在未来构建，从文件中读取的依赖项将优先于标准maven 用来解决依赖关系的方式。但恐怕没有插件api。所以它需要一些黑客攻击，我想避免。还有其他方法吗？

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:34:25.823

使用 . 冻结工件版本`<dependencyManagement>`。即使您不使用版本范围（如您所说），而是使用 3rd 方库（您的依赖项），您`<dependencyManagement>`在指定任何工件的版本时将具有更高的优先级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:12:49.830

简单的解决方案是：不要使用版本范围。这是不好的做法，因为它会导致所描述的问题。

# magento - 第 11 行 app/code/local/Aitoc/Aitoptionstemplate/Model/Observer.php 中未定义的 AITOC 函数

> ID：11102734
> 
> 赞同：1
> 
> 时间：2012-06-19T14:06:13.110
> 
> 标签：magento

我将实时 magento 网站的网站文件复制到我的本地机器上。我尝试打开主页，然后出现一个空白的白色屏幕。在 apache2 错误日志中，我找到以下行：

PHP 致命错误：在第 11 行的 .../httpdocs/app/code/local/Aitoc/Aitoptionstemplate/Model/Observer.php 中调用未定义函数 kYESppcDEoBrEZyw()

罪魁祸首是：

```
if(Aitoc_Aitsys_Abstract_Service::initSource(__FILE__,'Aitoc_Aitoptionstemplate'))
{ kYESppcDEoBrEZyw('e71e3cbbed8235b2be55dfb8db045b91'); 
```

另一个括号在文件末尾关闭。

似乎安装了一个名为 Aitoc 自定义选项模板的扩展。这很好，但是这个奇怪命名的函数的目的是什么？它在实时站点上的工作情况如何？

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:37:45.810

我们需要在这里小心，因为该网站使用 3rd 方扩展并且该扩展保护其许可证 - 它不允许在未先安装许可证的情况下使用扩展并引发上述错误。因此，在开始在网站上工作之前，您需要先在本地/开发服务器上安装许可证。您还可以禁用扩展（用于 AITOC）并按照以下说明使网站正常运行： [http ://www.aitoc.com/en/magenomods_custom_options_templates.html#docs](http://www.aitoc.com/en/magentomods_custom_options_templates.html#docs)

我确实禁用了它，并且能够在开发服务器上运行该网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:28:45.833

我有同样的问题。在我的网站“自定义产品预览”中安装了另一个扩展。因此在安装扩展程序时丢失了一些文件。

当我们上传相同的丢失文件时。然后刷新管理部分。它在提供许可证信息后询问许可证信息，一切正常。因此，在安装扩展程序时要小心。还要小心安装许可证。

对我来说，“/app/code/local/Aitoc/Aitsys/etc/compilation.xml”也不见了。

# c# - ASP.net 4 C# localhost 子域路由

> ID：11102737
> 
> 赞同：0
> 
> 时间：2012-06-19T14:06:16.607
> 
> 标签：c#, asp.net, routing, subdomain, localhost

几乎所有网络上可用的信息都仅适用于 MVC。我的网站“bar.com”有一个名为“foo”的子域。文件夹结构为 /Account/login.aspx 和 /Account/foo.aspx

因此，当我输入 foo.bar.com 时，我需要路由到 login.aspx（如果未登录）或 foo.aspx（如果已登录）。

我正在使用 asp.net 网络服务器。请不要 IIS。

在 global.cs 文件中：

```
Route Admin = new Route("admin.localhost", new CustomRouteHandler("~/Account/foo.aspx"));
routes.Add(Admin); 
```

在我的 web.config

```
<location path="Account">
 <system.web>
  <authorization>
    <deny users="?"/>
    <allow users ="*" />        
  </authorization>
</system.web> 
```

和

```
<authentication mode="Forms">
        <forms loginUrl="~/Account/Login.aspx" name=".SAKKU" protection="All" path="/" timeout="30"/>
    </authentication>
<authorization>
  <!--<deny users ="?" />-->
  <allow users = "*" />
</authorization> 
```

我的主机文件

```
 127.0.0.1       admin.localhost 
```

现在，每当我键入 foo.bar.com 时，它都会将我带到 Default.aspx 页面，而不是登录或 foo 页面。

谢谢，开发

# jquery - 列表需要可点击并引入新内容。使用 iframe。有没有更好的办法

> ID：11102743
> 
> 赞同：0
> 
> 时间：2012-06-19T14:06:41.087
> 
> 标签：jquery, html, iframe

我有它的工作......有点。内容加载到 DIV 中，但它是静态的。被拉入的内容使用的是 smoothDicScroll 库。它适用于 iframe，但不适用于 iframe。这是我正在使用的调整后的代码。

```
<script type="text/javascript">          
    function loadcontent (url) {
    $("#makeMeScrollable").load(url) ;
    };
</script> 
```

和

```
<div class="scroll-list">
    <ul id="site-nav">
        <li> <a href="javascript:loadcontent('iframeinsertA.html', 'makeMeScrollable')"> This link </a> </li>
        <li> <a href="javascript:loadcontent('iframeinsertB.html', 'makeMeScrollable')"> That link </a> </li>
    </ul>
</div> 
```

和

```
<div class="scroll-container">
       <div id="makeMeScrollable">
       </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:17:33.573

制作一个 JS 函数，例如

```
 function Loadcontent (url) {
  $("#makeMeScrollable").load(url , new function (){ alert ('Content loaded')}) ;
 } 
```

并称它为

```
 <li> <a href="javascript: LoadContent('iframeinsertS.html');return false;" >That link</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:22:03.770

Furqan 关于 js 实现的回答是对的。

关于 li 换行，这是 a 的正常行为。如果您希望链接位于同一行，则应更改 CSS。就像是：

```
ul li {
float: left; clear: none; width: auto;
} 
```

# ruby-on-rails - Ruby on Rails 3父母和孩子只找到特定的孩子，与父母

> ID：11102751
> 
> 赞同：0
> 
> 时间：2012-06-19T14:07:04.843
> 
> 标签：ruby-on-rails, parent-child

我有两个模型，程序和事件，一个程序有很多事件。我需要找到具有特定日期的事件的程序。

```
 @programmes = Programme.joins(:events).where(:events => {:date => params[:date]}).uniq 
```

这可以正常工作。但是使用的时候

```
programme.events 
```

它当然会获取与程序相关的所有事件，我如何才能仅获取与原始语句中的条件匹配的事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:10:39.957

最简单的方法是在程序上创建一个方法

```
class Programme < ActiveRecord::Base
  def events_for_date(date)
    events.where(:date => date).uniq
  end
end 
```

然后你会这样称呼：

```
@programme.events_for_date(params[:date]) 
```

您还可以向 Event 类添加范围，但这可能更容易理解。

# sql-server - 如何找到在 SQL Server 中注册的程序集？

> ID：11102754
> 
> 赞同：4
> 
> 时间：2012-06-19T14:07:11.240
> 
> 标签：sql-server, sql-server-2008-r2, sqlclr

我在 SQL Server 中注册了一个程序集：

```
CREATE ASSEMBLY [CLRFunctions]
AUTHORIZATION [dbo]
FROM  0x4D5A90000300000...
WITH PERMISSION_SET = SAFE 
```

我怎样才能找到这个程序集的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T14:10:56.870

它不是 SQL Server 中的程序集引用，程序集实际上是加载到数据库中的。因此，没有典型的“路径”。

如果您正在寻找 SQLPS (PowerShell) 路径，那么它将是：

```
SQLSERVER:\SQL\YourServerName\YourInstanceName\Databases\YourDatabaseName\Assemblies\ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-23T14:54:25.150

已弃用的（自引入 SQLCLR 的 SQL Server 2005 版本起）扩展存储过程 API / 功能（即 XP）确实指向外部 DLL。这意味着它们可能会被删除并且不会包含在数据库的备份中。使用 SQLCLR，程序集被导入数据库并可以通过`sys.assembly_files`. 将程序集包含在数据库中可确保它们包含在所有数据库备份中（在您不知情的情况下不会神奇地消失或被替换等其他好处）。

执行以下操作以查看您已加载哪些程序集、它们的原始路径（仅当它们是从外部 DLL 加载而不是从`VARBINARY`文字/十六进制字节加载时）及其完整内容/字节：

```
SELECT asm.[name] AS [Assembly], afl.[name] AS [PathOrAltName], afl.[content]
FROM   sys.assembly_files afl
INNER JOIN sys.assemblies asm
        ON asm.[assembly_id] = afl.[assembly_id]
ORDER BY asm.[name]; 
```

如果程序集是从`VARBINARY`文字/十六进制字节（即`0x4D5A9000...`）加载的，则`[name]`in 列`sys.assembly_files`应与in`[name]`列相同`sys.assemblies`（这是`CREATE ASSEMBLY`语句中使用的名称）。

有关一般使用 SQLCLR 的更多信息，请访问：[SQLCLR 信息](https://sqlclr.org/)

# jquery - jQuery 组合选择器

> ID：11102766
> 
> 赞同：-2
> 
> 时间：2012-06-19T14:07:54.127
> 
> 标签：jquery, html, jquery-selectors

如何组合这两个选择器：

```
$("td.listas select:last option:selected") 
```

这不行！

我想要实现的是：

*   使用类**listas从****td**获取**选择**输入
*****   获取**选中**的**选项******

 ********笔记：**

*   在这个**td**中，我有两个**选择**输入。

**代码工作：**

```
 var selectprimeiro = $('td.listas select:first');
    var selectsegundo = $('td.listas select:last option');
    selectsegundo.prop("selected",true);
    var selected = $("td.listas select:last option:selected");
    selected.each(function(){
        selectprimeiro.append("<option value='"+$(this).val()+"'>"+$(this).text()+"</option>");
        selected.remove();
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:10:40.020

我想你想要

```
var lastSelectedOptionElement = $("td.listas select option:selected").last(); 
```

首先，您获得所有选定的选项，然后选择最后一个。[无偿的活生生的例子](http://jsbin.com/uharot)| [来源](http://jsbin.com/uharot/edit)

您可能很想这样做`option:last:selected`，但这不起作用（除非碰巧选择了列表中的最后一个选项），因为`option`必须*同时是* `:last` *and* `:selected`。

* * *

**更新**：

重新编辑：

> 在这个 td 中，我有两个选择输入。

如果它们不是多选`select`元素，则要获取被选`option`元素：

```
opt = $("td.listas select:first option:selected"); // The first one
// or
opt = $("td.listas select:last option:selected");  // The last one -- this is your original selector 
```

如果它们是多选的，请结合上述两种技术：

```
// The *last* selected option in the *first* select list:
opt = $("td.listas select:first option:selected").last();

// The *last* selected option in the *last* select list:
opt = $("td.listas select:last option:selected").last();

// The *first* selected option in the *first* select list:
opt = $("td.listas select:first option:selected").first();

// The *first* selected option in the *last* select list:
opt = $("td.listas select:last option:selected").first(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:15:49.580

您的选择器看起来正确，您可能出错的地方是获取值，您只需要`.val()`在它的末尾添加即可。

```
var lastSelVal = $("td.listas select:last option:selected").val(); 
```

**粗略演示：** [jsfiddle.net/Marcel/4m3jG/](http://jsfiddle.net/Marcel/4m3jG/4/)******

# safari - $facebook->getUser() 在 safari 中总是返回 0，有时在 firefox 中返回

> ID：11102767
> 
> 赞同：0
> 
> 时间：2012-06-19T14:07:54.323
> 
> 标签：safari, facebook-php-sdk

我有一个 facebook 应用程序，它在一个主机上运行得非常好。我们仍然在另一个主机中迁移应用程序，但我们对以下代码存在问题：

```
header('P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"');
session_start();
require "facebook-facebook-php-sdk-5ba36bc/src/facebook.php";

$facebook = new Facebook(array(
  'appId' => $app_id,
  'secret' => $app_secret,
  'cookie' => true,
));

$user = $facebook->getUser(); 
```

一直在 Safari 中，有时在 Firefox 和 Windows7 中，getUser() 返回 0！

你知道为什么吗？解决方案是什么？

谢谢！

编辑：

更改 P3P 并不能解决任何问题。

前：

```
header('P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"'); 
```

后：

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

甚至这个：

```
 header('P3P: CP="ALL IND DSP COR ADM CONo CUR CUSo IVAo IVDo PSA PSD TAI TELo OUR SAMo CNT COM INT NAV ONL PHY PRE PUR UNI"'); 
```

不解决这个问题:(。

另一个想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:13:09.660

我有一个类似的问题，我通过手动将域添加到**getloginURL**来解决它（在你的应用程序配置中相同的 facebook 开发人员）。Facebook 不知何故对 cookie 感到厌烦。希望能帮助到你！。

**PHP SDK**

```
$this->fb->getLoginUrl( array( 
    'domain'=>'http://mysite.com',
    'scope' => $this->scope,
    'redirect_uri' => $endpoint,
    'display' => 'popup' 
    ) 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:06:20.613

只需将您的 php 标头更改为

```
header('P3P: CP="NOI ADM DEV COM NAV OUR STP"'); 
```

# xml - xslt 中的递归调用

> ID：11102773
> 
> 赞同：1
> 
> 时间：2012-06-19T14:08:14.313
> 
> 标签：xml, xslt-1.0

我读到使用带有分而治之方法的递归是有效的。谁能建议我如何改进下面的递归调用。它所做的只是将元素“a”重复 80 次到输出。然而，它只是重复了八十次，没有任何算法。还有它如何提高性能（任何链接或指针？）

```
<xsl:variable name="maxcount" select="'80'" />
<xsl:variable name="count" select="'1'" />
<xsl:if test="$count &gt; 0">
  <xsl:call-template name="copyrec">
    <xsl:with-param name="index" select="'1'" />
  </xsl:call-template>
</xsl:if>
<xsl:template name="copyrec">
  <xsl:param name="index" />
  <xsl:if test="$index &lt;= $maxcount">
    <xsl:variable name="tmpind" select="$index"/>
    <a>this element repeats 80 times</a>
    <xsl:call-template name="copyrec">
      <xsl:with-param name="index" select="$tmpind + 1" />
    </xsl:call-template>
  </xsl:if>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:29:03.740

分而治之将减少此代码使用的堆栈空间量，但不会使其更快。对于 80 次重复，几乎肯定有足够的堆栈空间，所以你不妨使用它。对于 10000 次重复，如果处理器实现尾调用优化，您的代码仍然可以正常运行。但是，如果您想确保即使进行 10000 次迭代并且使用不进行此基本优化的处理器也不会耗尽堆栈空间，那么对于这种情况，D+C 也非常简单：

```
<xsl:template name="copyrec">
  <xsl:param name="count" />
  <xsl:choose>
    <xsl:when test="$count = 0"/> <!-- do nothing -->
    <xsl:when test="$count = 1">
      <a>this element repeats 80 times</a>
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="copyrec">
        <xsl:with-param name="count" select="floor($count div 2)" />
      </xsl:call-template>
      <xsl:call-template name="copyrec">
        <xsl:with-param name="count" select="$count - floor($count div 2)" />
      </xsl:call-template>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

# cqrs - 带有传统系统的 CQRS

> ID：11102774
> 
> 赞同：8
> 
> 时间：2012-06-19T14:08:21.003
> 
> 标签：cqrs, legacy-code, legacy-database

我希望将具有清晰域模型的相对较新的基于 Web 的应用程序转换为更多的 CQRS 样式系统。我的新应用程序本质上是对旧的现有系统的增强替代。

我组织中的现有系统共享一组通用数据库，这些数据库由整个公司孤岛中存在的无数应用程序（通过混沌方法开发）进行更新。（就目前而言，我相信公司中没有一个人可以识别出他们所有人。）

因此，我的问题是关于我的应用程序的读取模型。由于各种状态变化、一般用户数据等都是由我无法控制的其他应用程序更新的，那么以我可以处理外部更新但仍然保持相对简单的方式来处理构建读取模型的最佳方法是什么？

到目前为止，我已经考虑了以下内容：

1.  在数据库中为读取模型创建视图，读取所有表，旧的和新的
2.  向现有表添加触发器以更新新的读取模型表
3.  将一些代码添加到数据库（CLR Stored proc/etc [sql server]）以更新外部数据存储以用于读取模型
4.  放弃希望

关于如何处理这个问题的普遍共识是什么？认为我可以在不从头开始完全重写所有内容的情况下为遗留系统带来秩序是愚蠢的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T04:56:45.240

我曾经遇到过类似的情况，以下步骤是我的做法：

要改进遗留系统并实现更清洁的代码库，关键是接手编写责任。但不要太雄心勃勃，因为这可能会引入接口/合同更改，从而使最终部署存在风险。

1.  如果所有写入都是通过除直接 sql 更新之外的任何方式触发的，请尽可能保持它们向后兼容。将它们作为新开发的命令处理程序的适配器/客户端。

2.  一些写入是直接的 sql 更新，但您无法控制
    询问负责团队是否可以更改为您的新接口/合同？
    如果不是，请参见步骤 3。

3.  问他们是否可以容忍最终的一致性并愿意用数据库过程替换 sql 更新？
    如果是，请将所有 sql 更新放入过程中并安排部署，然后查看步骤 4。
    如果不是，也许您应该将它们包含在重构中。

4.  修改过程，用插入事件替换sql更新。并开发一个后端作业来滚动事件并发布它们。让您的新应用程序订阅这些事件以向您的命令处理程序触发命令。

5.  从您的命令处理程序发出事件并使用它们来更新其他应用程序曾经使用的表。

6.  移至遗留系统的下一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-24T02:51:42.137

我已经成功使用了选项#1。根据写入数据库的复杂性，创建视图以降低数据的士气以创建读取模型是一个可行的选择。意思是，如果它是大多数开发人员可以理解的相对直接的连接，那么我会仔细看看它是否适合您。我会小心在这些视图中过于复杂。

要考虑的另一件事是定期轮询以构建和更新类似于传统的报告数据库。尽管与通知相比不是最佳的，但取决于您的读取模型的陈旧程度，这也可能是一个可供选择的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-05T12:18:43.347

如果我们有一个无限强大的服务器，我们就不会为视图模型而烦恼，而只会从基本实体表中读取。视图模型旨在通过准备和维护适当的数据集进行显示来提高性能。如果您使用数据库视图作为视图模型，那么与即席查询相比，您实际上并没有获得太多的性能提升（如果您忽略了 sql 解析器可以为视图执行的预先计划）。

我的解决方案比@Hippoom 的解决方案侵入性更小，但比@Derek 的响应更快。如果您有权访问遗留系统并且可以进行少量代码更改，则可以添加异步队列写入以在遗留系统存储库中的队列系统（RabbitMQ、Kafka 或其他）中或任何数据被持久化的地方生成事件。使这些写入异步不应引入任何显着的性能成本，并且如果队列写入失败，它不会影响遗留系统。这种变化也很容易通过 QA。

然后编写一个事件驱动的片段来更新您的读取模型。在遗留系统更新阶段（可能需要一段时间），或者如果您只能访问一些写入这些数据库的遗留系统，您可以使用一个小实用程序将新的“UpdateViewModel”事件放入队列中几分钟。然后，当遗留系统保存重要内容时，您将获得及时的事件，但也涵盖您无法更新的系统。

# ruby-on-rails - Ruby on Rails 中的百分比数

> ID：11102779
> 
> 赞同：-2
> 
> 时间：2012-06-19T14:08:33.607
> 
> 标签：ruby-on-rails, ruby, percentage

我有一个优惠券模型，我正在尝试计算您从原始交易中节省了多少。

**优惠券.rb**

```
def original_deal
  original_price
end

def our_deal
  deal_price
end

def percentage_off
  original_deal / our_deal * 100.ceil
end 
```

**显示.html**

```
<%= number_to_percentage(@coupon.percentage_off, :precision => 2) %> 
```

**优惠券信息**

```
original_price = £100.00
deal_price = £90.00 
```

**结果。**

我得到 111.11% 作为答案。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T14:13:40.030

您的折扣百分比计算已关闭。您需要找到原始价格和新价格之间的差异。并除以原价得到折扣百分比：

```
def percentage_off
   (Float(original_deal - our_deal) / original_deal * 100).ceil
end 
```

您的输入示例现在将返回`(100 - 90) / 100 * 100 = 10`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T14:15:08.970

这是一个替代的逐步计算:)

```
original = 100.0
our = 90.0

our_relative = our / original # => 0.9
you_save = (1.0 - our_relative).round(2) # => 0.1
you_save_percents = (you_save * 100).round # => 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:13:57.680

计算结果是正确的。如果您查看您提供的值并进行数学运算，您会得出以下等式：

```
100.00 / 90.00 = 1.11
then you do
1.11 * 100 = 111.11 
```

如果你想计算你的储蓄百分比，试试这个：

```
(original_price - deal_price) / original_price * 100.ceil 
```

希望对您有所帮助。

# maven - 多项目设置中的 Maven maven-glassfish-plugin

> ID：11102781
> 
> 赞同：1
> 
> 时间：2012-06-19T14:08:44.950
> 
> 标签：maven, glassfish, maven-glassfish-plugin

***短版***：

我希望`maven-glassfish-plugin`仅在分层（基于继承）maven 多项目设置的根项目中执行。

***长版***：

以下设置：

```
project-root
|
+-pom.xml
|
+ ear-module
|  |
|  +-pom.xml
|
+ jar-module
   |
   +-pom.xml 
```

所有子模块都包含在根项目中`<modules>...</modules>`，所有子模块都继承根项目 pom.xml。在我的根项目 pom 中，我包括`maven-glassfish-plugin`：

```
...
<plugin>
    <groupId>org.glassfish.maven.plugin</groupId>
    <artifactId>maven-glassfish-plugin</artifactId>
    <version>2.1</version>
    <inherited>false</inherited>
    <configuration>
            <glassfishDirectory>${glassfish.home}</glassfishDirectory>
            <passwordFile>${glassfish.home}/masterpassword.txt</passwordFile>
            <domain>
                    <name>${project.name}</name>
                    <adminPort>4848</adminPort>
                    <httpPort>8080</httpPort>
                    <httpsPort>8443</httpsPort>
                    <iiopPort>3700</iiopPort>
                    <jmsPort>7676</jmsPort>
            </domain>
            <components>
                    <component>
                    <name>poc.vermittler</name>
                    <artifact>${project.basedir}/ear-module/target/ear-project-1.0-SNAPSHOT.ear</artifact>
                    </component>
    </configuration>
</plugin>
... 
```

（**注意**：这只是我的 pom 的简化版本。它可能无法运行 :)

我只想将`ear-module`模块部署到 glassfish，这就是我添加 `<inherited>false</inherited>`部分的原因，并将要部署的模块描述为`<components>...</components>`根 pom.xml 中的模块。

现在命令：

```
mvn glassfish:deploy 
```

将耳朵部署到glassfish，到目前为止一切都很好......但是maven将递归地递归到所有子模块，这些子模块都会失败：

```
No plugin found for prefix 'glassfish' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories 
```

我可以告诉 maven 仅使用该选项运行根项目，`-pl`但出于我的兴趣，部署不应依赖于此类附加信息。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:22:43.437

似乎没有很好的解决这个问题的方法：

*   插件支持“NOP”/静默丢弃功能
*   否则它将在所有子项目中失败

另一种方法可能是创建一个新的子项目（它不包含在根项目中，`<modules>...</modules>`但从根项目继承）并仅将依赖项添加到具有部署工件的项目。

该插件现在可以包含在此子项目中，而无需运行任何子项目。

或者对于任何懒惰的人：`mvn clean package glassfish:redeploy -pl .`选择性地只运行根项目而不进入子项目。

# jquery - 更改对话框中的内容

> ID：11102789
> 
> 赞同：1
> 
> 时间：2012-06-19T14:09:10.970
> 
> 标签：jquery, jquery-ui, jquery-plugins, modal-dialog, jquery-ui-dialog

当您单击“注册或登录”链接然后单击“问号”（用于重置密码）时，我正在尝试生成与 www.inkling.com 相同的功能......我认为他们用一个对话框来实现他们的，它的内容可以根据用户的选择而改变。

任何帮助不胜感激！

太和

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:13:23.513

只需隐藏两个 div。当您单击链接时显示一个，如果您然后单击问号，则隐藏该链接，然后显示另一个...

这是一个小提琴来说明 - [http://jsfiddle.net/Dj8xG/](http://jsfiddle.net/Dj8xG/)

**jQuery**

```
$('#signup').click(function(){
    $('#login').show();
});

$('#forgot').click(function(){
    $('#login').hide();
    $('#reset').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:23:57.747

如果你知道一些 CSS，你应该有这个基本结构：

```
<div id="float_content" style="position:absolute">
    <div id="login">
        <a href="#" class="first_mark">?</a>        
    </div>

    <div id="forgot" style="display:none">
        <a href="#" class="second_mark">?</a>   
    </div>
</div> 
```

首先，您必须接收主 div“float_content”，然后将 show() hide() 播放到内部 div

```
$(".first_mark").live('click', function(e)
       {
                e.preventDefault();
        $(this).closest("div").hide();
                $("#forgot").show();
    });

$(".second_mark").live('click', function(e)
       {
                e.preventDefault();
        $(this).closest("div").hide();
                $("#login").show();
    }); 
```

# java - Native2Ascii API

> ID：11102794
> 
> 赞同：2
> 
> 时间：2012-06-19T14:09:26.930
> 
> 标签：java, ant

我正在尝试使用 API 执行 Native2Ascii 任务。我的代码看起来像这样：

```
public static void main(String[] args) {
    File sourceDir = new File("c://temp//");        
    File targetDir = new File("c://temp1//");
    Native2Ascii n2a = new Native2Ascii();
    n2a.setSrc(sourceDir);
    n2a.setDest(targetDir);
    n2a.setEncoding("utf8");
    n2a.execute();
} 
```

不幸的是，我在 n2a.execute() 行中得到以下异常：

```
java.lang.NullPointerException
    at org.apache.tools.ant.types.AbstractFileSet.setupDirectoryScanner(AbstractFileSet.java:529)
    at org.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(AbstractFileSet.java:492)
    at org.apache.tools.ant.taskdefs.MatchingTask.getDirectoryScanner(MatchingTask.java:192)
    at org.apache.tools.ant.taskdefs.optional.Native2Ascii.execute(Native2Ascii.java:239)
    at Native2AsciiTest.main(Native2AsciiTest.java:27)
Exception in thread "main" 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:46:37.477

从 Ant 源码中可以看到发现 Project 为 null：

```
public synchronized void setupDirectoryScanner(FileScanner ds, Project p) {
    if (isReference()) {
        getRef(p).setupDirectoryScanner(ds, p);
        return;
    }
    if (ds == null) {
        throw new IllegalArgumentException("ds cannot be null");
    }
    ds.setBasedir(dir);

    PatternSet ps = mergePatterns(p);
    p.log(getDataTypeName() + ": Setup scanner in dir " + dir
        + " with " + ps, Project.MSG_DEBUG); 
```

NullPointerException 位于`p.log`。

所以你可以尝试这个来开始克服 NullPointerException：

```
Project project = new Project();
n2a.setProject(project); 
```

然后继续下一个问题...

**1\. 跟进您的评论**

您是否需要在应用程序运行时进行此文件转换？您可以使用 ant build（使用[native2ascii](http://ant.apache.org/manual/Tasks/native2ascii.html)任务）或 JDK 的[native2ascii](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/native2ascii.html) CLI 来“离线”转换文件吗？

**2.添加tools.jar到classpath**

您需要`tools.jar`从 JDK 获得运行时类路径。有了它，我就可以运行它了。

# html - d3 节点标签

> ID：11102795
> 
> 赞同：60
> 
> 时间：2012-06-19T14:09:28.243
> 
> 标签：html, svg, d3.js, label

我一直在使用[这个 d3 项目](http://bl.ocks.org/2926502)中的示例代码来学习如何显示 d3 图表，但我似乎无法在圆圈中间显示文本（类似于[这个例子](http://mbostock.github.com/d3/ex/bubble.html)和[这个例子](http://mbostock.github.com/d3/ex/pack.html)）。我查看了其他示例并尝试添加

```
node.append("title").text("Node Name To Display") 
```

和

```
node.append("text")
    .attr("text-anchor", "middle")
    .attr("dy", ".3em").text("Node Name To Display") 
```

在定义节点之后，但当我将鼠标悬停在每个节点上时，我看到的唯一结果是“要显示的节点名称”。它没有在圆圈内显示为文本。我是否必须编写自己的 svg 文本对象并根据圆的半径坐标确定它需要放置的坐标？从另外两个例子来看，d3 似乎已经以某种方式处理了这个问题。我只是不知道调用/设置的正确属性。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-19T21:35:05.950

有[很多示例](https://github.com/mbostock/d3/wiki/Gallery)展示了如何为图形和树可视化添加标签，但我可能会从最简单的这个开始：

*   [http://bl.ocks.org/950642](http://bl.ocks.org/950642)

您尚未发布指向您的代码的链接，但我猜这`node`指的是 SVG 圆形元素的选择。您不能将文本元素添加到圆形元素，因为**圆形元素不是[容器](http://www.w3.org/TR/SVG/intro.html#TermContainerElement)**；将文本元素添加到圆圈将被忽略。

通常，您使用 G 元素对每个节点的圆形元素（或图像元素，如上所述）和文本元素进行分组。生成的结构如下所示：

```
<g class="node" transform="translate(130,492)">
  <circle r="4.5"/>
  <text dx="12" dy=".35em">Gavroche</text>
</g> 
```

使用[数据连接](http://bost.ocks.org/mike/join/)为每个节点创建 G 元素，然后使用[selection.append](https://github.com/mbostock/d3/wiki/Selections#wiki-append)为每个节点添加一个圆圈和一个文本元素。像这样的东西：

```
var node = svg.selectAll(".node")
    .data(nodes)
  .enter().append("g")
    .attr("class", "node")
    .call(force.drag);

node.append("circle")
    .attr("r", 4.5);

node.append("text")
    .attr("dx", 12)
    .attr("dy", ".35em")
    .text(function(d) { return d.name }); 
```

这种方法的一个缺点是您可能希望将标签绘制在圆圈的顶部。由于 SVG 还不支持 z-index，所以元素是按文档顺序绘制的；因此，上述方法会导致将标签绘制*在其 circle 上方*，但它可能会绘制*在其他*circle 下方。您可以通过使用两个数据连接并为圆圈和标签创建单独的组来解决此问题，如下所示：

```
<g class="nodes">
  <circle transform="translate(130,492)" r="4.5"/>
  <circle transform="translate(110,249)" r="4.5"/>
  …
</g>
<g class="labels">
  <text transform="translate(130,492)" dx="12" dy=".35em">Gavroche</text>
  <text transform="translate(110,249)" dx="12" dy=".35em">Valjean</text>
  …
</g> 
```

以及相应的 JavaScript：

```
var circle = svg.append("g")
    .attr("class", "nodes")
  .selectAll("circle")
    .data(nodes)
  .enter().append("circle")
    .attr("r", 4.5)
    .call(force.drag);

var text = svg.append("g")
    .attr("class", "labels")
  .selectAll("text")
    .data(nodes)
  .enter().append("text")
    .attr("dx", 12)
    .attr("dy", ".35em")
    .text(function(d) { return d.name }); 
```

[移动专利诉讼](http://bl.ocks.org/1153292)示例中使用了此技术（带有用于创建白色阴影的附加文本元素）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T22:22:44.373

我发现本指南在尝试完成类似的事情时非常有用：

[https://www.dashingd3js.com/svg-text-element](https://www.dashingd3js.com/svg-text-element)

基于上面的链接，此代码将生成圆形标签：

```
<!DOCTYPE html>
<html>
  <head>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
   </head>
<body style="overflow: hidden;">
<div id="canvas"  style="overflow: hidden;"></div>

<script type="text/javascript">

    var graph = {
        "nodes": [
            {name: "1", "group": 1, x: 100, y: 90, r: 10 , connected : "2"},
            {name: "2", "group": 1, x: 200, y: 50, r: 15, connected : "1"},
            {name: "3", "group": 2, x: 200, y: 130, r: 25, connected : "1"}
        ]
    }

    $( document ).ready(function() {

        var width = 2000;
        var height = 2000;

        var svg = d3.select("#canvas").append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g");

        var lines = svg.attr("class", "line")
                .selectAll("line").data(graph.nodes)
                .enter().append("line")
                .style("stroke", "gray") // <<<<< Add a color
                .attr("x1", function (d, i) {
                    return d.x
                })
                .attr("y1", function (d) {
                    return d.y
                })
                .attr("x2", function (d) {
                    return findAttribute(d.connected).x
                })
                .attr("y2", function (d) {
                    return findAttribute(d.connected).y
                })

        var circles = svg.selectAll("circle")
                .data(graph.nodes)
                .enter().append("circle")
                .style("stroke", "gray")
                .style("fill", "white")
                .attr("r", function (d, i) {
                    return d.r
                })
                .attr("cx", function (d, i) {
                    return d.x
                })
                .attr("cy", function (d, i) {
                    return d.y
                });

        var text = svg.selectAll("text")
                                .data(graph.nodes)
                                .enter()
                               .append("text");

        var textLabels = text
          .attr("x", function(d) { return d.x; })
          .attr("y", function(d) { return d.y; })
          .text( function (d) { return d.name })
          .attr("font-family", "sans-serif")
          .attr("font-size", "10px")
          .attr("fill", "red");

    });

    function findAttribute(name) {
        for (var i = 0, len = graph.nodes.length; i < len; i++) {
            if (graph.nodes[i].name === name)
                return graph.nodes[i]; // Return as soon as the object is found
        }
        return null; // The object was not found
    }

</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-25T20:10:35.973

如果您想扩大节点以适应大标签，您可以在绘制完 SVG 文本节点后使用它的 getBBox 属性。对于具有固定坐标和两种可能形状的节点列表，我是这样做的：

```
nodes.forEach(function(v) {
  var nd;
  var cx = v.coord[0];
  var cy = v.coord[1];

  switch (v.shape) {
    case "circle":
      nd = svg.append("circle");
      break;
    case "rectangle":
      nd = svg.append("rect");
      break;
  }

  var w = 10;
  var h = 10;
  if (v.label != "") {
    var lText = svg.append("text");

    lText.attr("x", cx)
         .attr("y", cy + 5)
         .attr("class", "labelText")
         .text(v.label);

    var bbox = lText.node().getBBox();
    w = Math.max(w,bbox.width);
    h = Math.max(h,bbox.height);
  }

  var pad = 4;

  switch (v.shape) {
    case "circle":
      nd.attr("cx", cx)
        .attr("cy", cy)
        .attr("r", Math.sqrt(w*w + h*h)/2 + pad);
      break;
    case "rectangle":
      nd.attr("x", cx - w/2 - pad)
        .attr("y", cy - h/2 - pad)
        .attr("width", w + 2*pad)
        .attr("height", h + 2*pad);
      break;
  }

}); 
```

请注意，添加了形状，添加了文本，*然后*定位了形状，以便让文本显示在顶部。

# unix - 改变配色方案vim

> ID：11102796
> 
> 赞同：1
> 
> 时间：2012-06-19T14:09:28.103
> 
> 标签：unix, vim

我在 red hat 5 中使用 VIM，黑色背景和绿色字母。但是，我不喜欢字符串 ("") 的颜色模式，也不喜欢保留的 C++ 键变量（`int`例如它是深绿色）。有人可以给我一些建议，我该如何更改这些默认颜色？例如，我知道要更改我所做的评论颜色

`hl Comment ctermfg=yellow`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:30:16.230

键入`:hi`，然后点击`Enter`。将显示突出显示定义列表。
组`C++`以`c`.

* * *

`int`是一个`cType`。尝试：

```
:hi cType ctermfg=yellow 
```

* * *

您可以将自定义突出显示命令放入`vimrc`（之后`colorscheme name`和`syntax on`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:43:02.623

如果您想自定义当前的配色方案，请查看此[Vivify](http://bytefluent.com/vivify/)。将颜色编辑器调整为您的特定语言，然后将颜色方案文件保存到您的 vim 文件中。

# asp.net - 如何从页面打印 PDF 或图像

> ID：11102797
> 
> 赞同：0
> 
> 时间：2012-06-19T14:09:28.977
> 
> 标签：asp.net

我有一个 ASP.NET 应用程序（它使用 DevExpress v 10.2）。页面上有一个名为 PRINT 的按钮。单击按钮时，应用程序应： 1\. 从其数据库中提取文件。文件是 PDF 或 JPEG（应用程序仅在运行时知道其类型） 2\. 打印文件。在此期间应向用户显示一些“预览”

问题是——如何实现这个（项目'2'）？有一种众所周知的方法可以使用 JavaScript 打印出图像，如下所示：

```
function DisplayPrintPopup(html) {
    var win = window.open('', 'popup', 'toolbar=no,menubar=no,width=500,height=500,scrollbars=yes');
            self.focus();
            win.document.open();
            win.document.write('<head><style></style></head><body>' + html + '<style></style></head><body>');
            win.document.close();
            win.print();
            win.close();
} 
```

这对我来说可能没问题。但是当文件是 PDF 时该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:55:22.787

这只是从您的页面打印一个元素，其中 strid=id 您要打印的元素，

在打印之前可以查看预览：

```
function CallPrint(strid) {

    var prtContent = document.getElementById(strid);
    var WinPrint = window.open('', '', 'letf=0,top=0,width=800,height=600,toolbar=0,scrollbars=0,status=0');
    WinPrint.document.write(prtContent.innerHTML);
    WinPrint.document.close();
    WinPrint.focus();
    WinPrint.print();
    WinPrint.close();
} 
```

[http://forums.asp.net/t/1034884.aspx/1](http://forums.asp.net/t/1034884.aspx/1)

# java - 在java中协调保存在数据库和磁盘中

> ID：11102798
> 
> 赞同：1
> 
> 时间：2012-06-19T14:09:36.367
> 
> 标签：java, database, file, transactions, system

在我的任务中，我需要将文件保存在磁盘上并更新数据库中的信息。保存文件和更新数据库中的信息时可能会发生异常。是否存在一些现成的开源解决方案，或者它需要从头开始编写？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:16:46.077

[XADisk](http://xadisk.java.net/)提供对文件系统的事务访问。从他们的网站：

> XADisk（发音为“xa-disk”）通过提供 API 来执行文件/目录操作，实现对现有文件系统的事务性访问。通过简单的步骤，它可以部署在任何 JVM 上，然后可以开始为在任何地方运行的各种 Java/JavaEE 应用程序提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:25:29.807

在 Java 中，企业事务管理由Java EE 中使用的[JTA 规范管理。](http://www.oracle.com/technetwork/java/javaee/jta/index.html)

JTA 允许创建多个具有不同实现的 TransactionManager（一个用于数据库，一个用于文件）并使它们一起工作以定义交叉事务我认为这可能是您做您想做的事情的一种方式

在容器之外，可以集成 JTA。你应该看看[Spring](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/transaction.html)或[JBoss](http://www.jboss.org/jbosstm)的实现

查看[这篇博文](http://blog.springsource.org/2011/08/15/configuring-spring-and-jta-without-full-java-ee/)以获取有关 Spring 和事务使用的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:19:57.210

Java EE 不直接支持文件系统，但您可以实现/搜索文件系统的***资源适配器***。

[http://docs.oracle.com/javaee/6/tutorial/doc/gipgl.html](http://docs.oracle.com/javaee/6/tutorial/doc/gipgl.html)

[http://docs.oracle.com/javaee/6/tutorial/doc/giqjk.html](http://docs.oracle.com/javaee/6/tutorial/doc/giqjk.html)

# c - 在 c 编程中标记所需长度的字符串？

> ID：11102812
> 
> 赞同：0
> 
> 时间：2012-06-19T14:10:18.880
> 
> 标签：c

如何将字符串（存储在`fgets()`函数中）标记为各种所需的大小？这些值之间没有任何分隔符（`\n,,,:,:,`等）。字符串是

> “ABCD 1234 EFG56H1.223.445.66 J”

我希望生成的令牌应该看起来像

> “ABCD”“1234”“”/*将空格读作字符*/“EF”“56”“H”“1.22”/ *（.）点也是一个字符*/“3.44”“5.66”

如何用`strtok`功能做到这一点？

这个问题实际上是用于使用 C 从 PDB 文件中提取 ATOM 记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:22:20.590

我不认为你可以使用中风。您需要编写自己的子字符串函数，但这样的事情会起作用：

```
int position = 0;
int i = 0;

for (int i = 0; i < lengthOfColumnWidths; i++) {
    if (columnWidths[i] <= 0) {
        # Error, column width must be greater than 0.
    }

    char* columnVal = substring(lineOfText, position, position + columnWidths[i]);
    # store columnVal in some final array, e.g. finalArray[i] = columnVal

    position = position + columnWidths[i];
} 
```

columnWidths 是一个整数数组，其中第 i 个值是第 i 列的宽度。所以对你来说是：

```
[4, 5, 1, 2, 2, 1, 4, etc...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:38:34.263

你可以简单地使用 sscanf

```
char a[100],b[100],c[100],d[100],e[100],f[100],g[100],h[100];
sscanf("ABCD 1234 EFG56H1.223.445.66 J","%s%s%2s%*1s%2s%1s%4s%4s%4s",a,b,c,d,e,f,g,h); 
```

# xquery - 如何从 Marklogic 中的其他 .xqy 页面调用 .xqy 页面？

> ID：11102813
> 
> 赞同：0
> 
> 时间：2012-06-19T14:10:21.283
> 
> 标签：xquery, marklogic

我可以从 Marklogic 中的另一个 .xqy 页面调用 .xqy 页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:03:50.077

有几种方法可以执行另一个 .xqy，但最明显的可能是使用 .xqy `xdmp:invoke`。这会调用 .xqy，等待其结果并在您的代码中当场返回它们。`xdmp:function`您还可以使用和的组合调用单个函数`xdmp:apply`。你也可以乱用`xdmp:eval`，但这通常是最后的手段。

另一种策略可能是使用`xdmp:http-get`，但随后执行在不同的事务中运行，因此将始终提交。您还需要知道另一个 .xqy 的 url，这需要一些关于是否以及如何在应用服务器中重写 url 的知识（默认情况下不是）。

也可以使用 .xqy 运行其他 .xqy 而不等待结果`xdmp:spawn`。对于调度例如内容处理的重负载特别有用。分批分批 100 到 1000 个文档是很常见的。不过请注意任务队列的大小..

！

# php - 出现请求对话框，但未发送请求

> ID：11102815
> 
> 赞同：0
> 
> 时间：2012-06-19T14:10:24.933
> 
> 标签：php, javascript, facebook-graph-api

我正在尝试使用以下代码使用“apprequest”对话框发送应用请求

但在此出现请求对话框但未发送请求

> ```
> var 邀请朋友；
>        window.fbAsyncInit = function() {
>    FB.init({
>      appId : '112312312312321',
>      状态：真，
>      channelUrl : '//mysite.com/include/fb/channel.php',
>      饼干：真的，
>       无摩擦请求：真
>    });
> 
>    // 这里额外的初始化代码
>    FB.getLoginStatus（函数（响应）{
> 
> if (response.status === '已连接') {
>    // 用户已登录并连接到您的
>    // app 和 response.authResponse 提供
>    // 用户的 ID、有效的访问令牌、签名的
>    // 请求，以及访问令牌的时间
>    // 并且签名的请求每个都过期
>    console.log('授权');
> 
>    FB.api('/me', function(response) {
>      console.log(response.name);
> });
> 
> ```
>  inviteFriends=function(){
>          var l="";
>    FB.api('/me/friends',function(response){
> 
>        console.warn(response.data.length);
> 
>            for (var i=0; i<20;i++){
>                //alert(o.id);
>                    l=l+','+response.data[i].id;
>                }
>                console.log(l);
> 
>          FB.ui({method: 'apprequests',
>              message: 'Hey send me a pic usign picinchat.com in fb chat!',
>              to: l
>            }, function(response){
>                console.log(response.toSource());
> 
>            });
>       }
> 
> }); 
> ```
> 
>   
>     }
>   邀请朋友（）;
>   
> ```

# regex - 正则表达式 - 如何防止任何空格，包括字符串的第一个字符

> ID：11102818
> 
> 赞同：0
> 
> 时间：2012-06-19T14:10:30.020
> 
> 标签：regex

目前我有这个： `@"(\S)+"`，但它只是防止任何完整字符后的空格，那么我怎样才能防止第一个字符中的空格呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:15:39.273

如果要确保字符串中没有空格，请使用以下命令：

```
^\S+$ 
```

*   `^`将匹配锚定到字符串的开头。

*   `\S+`匹配一个或多个非空白字符。

*   `$`将匹配锚定到字符串的末尾。

如果你真的在 Apple 的 Objective-C 开发者框架中使用 NSRegularExpression 类，它应该是这样的：

```
@"^\\S+$" 
```

但是，如果（我怀疑）您使用的是 C# Regex，它应该如下所示：

```
@"^\S+$" 
```

（“regex”是正则表达式的通用标签。我将删除其他标签。）

# python - 在分隔符列表上编写一个循环？

> ID：11102829
> 
> 赞同：2
> 
> 时间：2012-06-19T14:10:54.750
> 
> 标签：python, regex

我必须在 html 文件中隔离部分字符串。我以为我可以成功，但是数据结构真的很混乱。我是一个非常初学者，所以正则表达式可能是一个坏主意。我可以补充一点，逗号或分号不一致，不能选择作为分隔符。无论如何，在这里我做了什么，让我从一个例子开始。假设这是放在变量中的 html

*示例 = d1 d2 一些东西 一些东西 一些东西 d3 d4 d5 一些东西*

如果分隔符是一致的，我可以使用以下脚本恢复我感兴趣的“一些东西”：

```
for url in open("url-repository.csv", "rt").readlines():
    variable1 = urllib2.urlopen(url[:-1]).read()
    a = re.compile('d1(.*?)\"d2')
    b = a.search(vqriable1)
    if b:
        c = b.group(1)
        list_of_d1.append(c) 
```

但是在我要分析的不同页面中，分隔符并不总是相同的，也不总是相同的顺序。

*Example2 = d2 一些东西 d3**没有**d4 一些东西 d5*

因此，我想问你两件事。假设我创建了我在 html 页面中找到的所有分隔符的列表，

```
Delimiters_list = [d1, d2, d3] 
```

1 是否可以确保脚本查找所有可能的配置，例如 d1 + d2、d2 + d6、dn + dn？

2或至少，指示第一项，并使脚本停止选择链到它遇到的列表的第一项？

这对我来说是一个非常困难的问题，我知道我可能不清楚，但我提前感谢那些试图检查它并帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:18:59.670

以下 Python 示例应该可以解决您的问题。

```
dels = [d1, d2, d3]
combs = []
for d1 in dels:
    for d2 in dels:
        combs.append(re.compile(d1 + '(.*?)\"' + d2)
for comb in combs:
    check_for_matches(comb, string) 
```

我希望你觉得这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:15:48.453

如果您使用交替运算符，问题并不难，`|`.

```
 (d1|d2|d3|d4|d25)(.*?)(?=d1|d2|d3|d4|d25) 
```

这边走，

1.  如果需要，您将在第 1 组中捕获起始分隔符；
2.  您将不贪婪地在第 2 组中捕获“一些东西”；
3.  并且通过使用前瞻断言，您还不会“吃掉”下一个分隔符，因此您可以继续使用相同的正则表达式匹配其余数据。

在此处查看此正则表达式的演示：[http](http://rubular.com/r/DJVegfD3Ul) ://rubular.com/r/DJVegfD3Ul 。

***注意：**遗憾的是我不懂 Python，所以我不会尝试编写任何代码。但是将所有分隔符加入到上面的表格中应该是一项微不足道的任务。请参阅下面评论中的警告。*

**更新**

这是我第一次写 Python，所以请原谅我的错误。

```
 # start with an array of delimeters
    delimeters = [d1, d2, d3]

    # start with a blank string
    regex_delim = ''

    # build the "delimiters regex" using alternation
    for delimeter in delimeters:
        regex_delim += re.escape(delimeter) + '|'

    # remove the extra '|' at the end
    regex_delim = regex_delim[:-1]

    # compile the regex
    regex_obj = re.compile('(' + regex_delim + ')(.*?)(?=' + regex_delim + ')')

    # and that should be it!
    for match in regex_obj.finditer(html_str):
        print match.group(2) 
```

`re.escape(delimiter)`如果您的分隔符中有特殊字符，则这是必需的。例如，如果您的分隔符是`*`，则`re.escape(...)`返回`\*`，这样您的分隔符就不会被翻译为正则表达式量词。

# java - 在另一个方面上下文中调用方面 - Spring AOP

> ID：11102834
> 
> 赞同：1
> 
> 时间：2012-06-19T14:11:04.980
> 
> 标签：java, spring, aop, aspect

是否可以在代码上调用方面，它由另一个方面动作包装。例如，我调用事务中的服务方法。事务的管理由自己的事务方面提供。我想在这个服务方法中调用日志方面

是否可以在 Spring AOP 中调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:47:44.573

是的，方面是可级联的，这意味着您可以将多个方面放在一个方法上。

这是方面的顺序开始发挥作用的时候（例如，您想在开始事务之前还是之后记录？）。这就是 spring 文档所说的：[第 6.2.4.7 节。建议订购](http://static.springsource.org/spring/docs/2.0.x/reference/aop.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:42:08.180

如果你想调用一个方面，你就表明你不知道一个方面是什么。代码绝不能知道方面！方面可能永远不会被手动触发！

也许你应该阅读这篇关于 AOP 的文章来开始掌握这个概念：[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)

也就是说：使用真正的 AspectJ，方面可以相互提供建议。使用 Spring AOP，我认为没有办法做到这一点。

# windows-7 - 网络共享上的 Windows 7 兼容模式

> ID：11102837
> 
> 赞同：2
> 
> 时间：2012-06-19T14:11:12.717
> 
> 标签：windows-7, admin, compatibility, elevated-privileges, compatibility-mode

我有一个网络文件共享，其中包含许多快捷方式，每个快捷方式都运行几个应用程序之一，这些应用程序从该特定文件共享将数据加载到其中。网络文件共享和应用程序位于运行 Server 2003 的系统上，并且对该文件共享的所有权限均未更改。

当从运行 Windows XP 的系统中执行时，应用程序运行良好。一个系统刚刚更改为 Windows 7。在 Windows 7 上运行应用程序时，用户（当时）是该 Windows 7 系统上的本地管理员。最初，它们都运行正常，我能够从一个特定的应用程序进行打印。但是，当用户现在不再是该系统的本地管理员时，应用程序将不会打印，因为它需要本地管理员权限才能执行此操作。您可以通过右键单击并在快捷方式上使用提升的权限运行来解决它 - 应用程序将打印并正常运行。

但是，记住右键单击并以提升的权限运行并不容易记住，尤其是当您在应用程序中向下导航了几个级别却发现您无法从应用程序中打印时。

通过使用 UNC 名称或映射驱动器（取决于用户）来定位快捷方式。在我的测试中，我使用的是 UNC 名称 -

```
\\servername\datafolder\content\myshortcut.lnk 
```

如果我在快捷方式上转到“属性”，则“兼容模式”灰显且无法更改。但是，如果我转到兼容性疑难解答并接受推荐的设置 - 应用程序运行良好。但是，当它尝试保存疑难解答建议的更改时，它会说应用程序不兼容。（FWIW，Fix Application 设置 CompatMode = #WINXPSP2 和 UserVerifySolution = Verify_YES）。

缺乏：

1.  记住以提升的权限运行快捷方式，或者
2.  使用户成为本地系统的管理员

有没有办法在网络共享上的多个快捷方式上应用兼容性模式的更改，而不会造成更多混乱，或者以提升的权限打开这些快捷方式？

谢谢，

SC

# c++ - 关闭应用程序而不显示控制台窗口

> ID：11102840
> 
> 赞同：2
> 
> 时间：2012-06-19T14:11:35.447
> 
> 标签：c++, windows, command-line-arguments

我编写了非常简单的控制台应用程序，它支持一些命令行选项。如果没有命令行参数（这意味着只有1个参数）应用程序关闭而不显示黑窗，目前如果你运行下面的代码，因为它没有命令行参数，它会立即关闭，但它会显示黑窗一秒钟，我想避免它。那么我怎样才能以简单的方式做到这一点呢？

```
#include <iostream>
using namespace std;

int main(int argc,char** argv)
{
    if (argc==1) return 0;
    if (argc!=1)
    for (int i=2; i<=argc; i++)
        cout << argv[i] << endl;
    cin.sync();cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:42:45.513

为了使程序运行，Windows 需要一个控制台窗口。创建控制台窗口后，控件进入main。您只能在 main 内部检查命令行参数。这意味着，不可能做你想做的事。

*但是，您可以使用CreateProcess* API在不显示控制台窗口的情况下运行程序。因此，如果您可以从另一个程序运行控制台应用程序，那么您可以检查是否有命令行参数，然后决定是否应该使用*CreateProcess*来显示控制台窗口。

*要使用CreateProcess*不显示控制台窗口，请将*STARTUPINFO的**dwFlags*参数设置为 STARTF_USESHOWWINDOW 并在*wShowWindow*参数中指定 SW_HIDE 。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:03:41.857

**如果您创建控制台应用程序**，您将无法从控制台窗口创建中逃脱。

但是您可以使用入口点[WinMain创建](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)**win32 应用程序**，并且不创建窗口，只是作为控制台程序工作。**

# perl - 使用 sed、awk 或 perl 从行中提取特定模式

> ID：11102846
> 
> 赞同：7
> 
> 时间：2012-06-19T14:11:52.577
> 
> 标签：perl, sed, awk, grep, nawk

`sed`如果我需要提取由特定模式包围的模式，如果它存在于一行中，我可以使用它吗？

假设我有一个包含以下几行的文件：

> 有很多人因为[/fear/]邻居会说什么而不敢自杀。
> 
> `/*`当我们已经知道答案`*/`但希望我们不知道时，我们会寻求建议。

在这两种情况下，我必须在各自的情况下扫描第一个出现的模式，即'[ `/`'或' '，并存储以下模式，直到退出模式，即' ]'或' '分别。`/*``/``*/`

简而言之，我需要`fear`和`answer`。如果可能，是否可以将其扩展到多行；从某种意义上说，如果退出模式出现在与同一行不同的行中。

欢迎任何形式的建议或算法帮助。提前感谢您的回复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:37:53.900

```
use strict;
use warnings;

while (<DATA>) {
    while (m#/(\*?)(.*?)\1/#g) {
        print "$2\n";
    }
}

__DATA__
There are many who dare not kill themselves for [/fear/] of what the neighbors will say.
Advice is what we ask for when we already know the /* answer */ but wish we didn’t. 
```

作为一个单行：

```
perl -nlwe 'while (m#/(\*?)(.*?)\1/#g) { print $2 }' input.txt 
```

内部 while 循环将在所有带有`/g`修饰符的匹配项之间进行迭代。反向引用`\1`将确保我们只匹配相同的打开/关闭标签。

如果您需要匹配跨越多行的块，则需要 slurp 输入：

```
use strict;
use warnings;

$/ = undef;
while (<DATA>) {
    while (m#/(\*?)(.*?)\1/#sg) {
        print "$2\n";
    }
}

__DATA__
    There are many who dare not kill themselves for [/fear/] of what the neighbors will say. /* foofer */ 
    Advice is what we ask for when we already know the /* answer */ but wish we didn’t.
foo bar /
baz 
baaz / fooz 
```

单线：

```
perl -0777 -nlwe 'while (m#/(\*?)(.*?)\1/#sg) { print $2 }' input.txt 
```

`-0777`开关 和将`$/ = undef`导致文件 slurping，这意味着所有文件都被读入一个标量。我还添加了`/s`修饰符以允许通配符`.`匹配换行符。

正则表达式的解释：`m#/(\*?)(.*?)\1/#sg`

```
m#              # a simple m//, but with # as delimiter instead of slash
    /(\*?)      # slash followed by optional *
        (.*?)   # shortest possible string of wildcard characters
    \1/         # backref to optional *, followed by slash
#sg             # s modifier to make . match \n, and g modifier 
```

这里的“魔力”在于，`*`只有在它之前找到一个星号时，反向引用才需要一个星号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:57:44.010

快速而肮脏的方式`awk`

```
awk 'NF{ for (i=1;i<=NF;i++) if($i ~ /^\[\//) { print gensub (/^..(.*)..$/,"\\1","g",$i); } else if ($i ~ /^\/\*/) print $(i+1);next}1' input_file 
```

### 测试：

```
$ cat file
There are many who dare not kill themselves for [/fear/] of what the neighbors will say.

Advice is what we ask for when we already know the /* answer */ but wish we didn't.
$ awk 'NF{ for (i=1;i<=NF;i++) if($i ~ /^\[\//) { print gensub (/^..(.*)..$/,"\\1","g",$i); } else if ($i ~ /^\/\*/) print $(i+1);next}1' file
fear

answer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:53:02.113

### 单行匹配

如果你真的想在 sed 中这样做，你可以相对容易地提取你的分隔模式，只要它们在同一行。

```
# Using GNU sed. Escape a whole lot more if your sed doesn't handle
# the -r flag.
sed -rn 's![^*/]*(/\*?.*/).*!\1!p' /tmp/foo 
```

### 多行匹配

如果你想用 sed 执行多行匹配，事情会变得有点难看。但是，它肯定可以做到。

```
# Multi-line matching of delimiters with GNU sed.
sed -rn ':loop
         /\/[^\/]/ { 
             N
             s![^*/]+(/\*?.*\*?/).*!\1!p
             T loop
         }' /tmp/foo 
```

诀窍是寻找一个起始分隔符，然后在循环中不断追加行，直到找到结束分隔符。

只要您确实*有*一个结束分隔符，这就会非常有效。否则，文件的内容将继续附加到模式空间，直到 sed 找到一个，或者直到它到达文件的末尾。这可能会导致某些版本的 sed 或模式空间大小失控的非常非常大的文件出现问题。

有关更多信息，请参阅[GNU sed 的限制和非限制](http://www.gnu.org/software/sed/manual/sed.html#Limitations)。

# sql - SQL：如何将结果限制为 start_date 最早且 end_date 为空的结果？

> ID：11102847
> 
> 赞同：1
> 
> 时间：2012-06-19T14:12:03.827
> 
> 标签：sql, oracle10g

我有一个包含以下列的表格：

> ref_year、ref_no、inv_id、start_date、end_date

前两列（ref_year 和 ref_no）在其他表中组合形成一个主键，从现在开始我将它们称为“引用”，但在这个表中它们可以出现多次。第三个（inv_id）是外键。最后两列表示 inv_id 附加到引用的日期，以及在适当情况下停止附加到该引用的日期。

我想**为每个引用准确返回一行，**这将反映附加到该引用的最早 inv_id ，其中**end_date 为 null**。这是导致我出现问题的 end_date 部分。这是我到目前为止所得到的：

```
SELECT
    t1.*
FROM
    involvements t1
LEFT OUTER JOIN
    involvements t2
    ON
        (t1.ref_year = t2.ref_year
    AND
        t1.ref_no = t2.ref_no
    AND
        t1.start_date < t2.start_date)
WHERE
    t2.ref_year IS NULL
AND
    t2.ref_no IS NULL 
```

这完美地选择了具有最早 start_date 的 inv_id，但我不知道如何解释具有最早 start_date 的 inv_id 的 end_date**不**为空的情况，在这种情况下，我希望脚本检查取而代之的是该引用的下一个最旧的 inv_id，依此类推，直到它返回一个带有空 end_date 的值。我尝试创建一个只有 null end_dates 的临时表，然后将其作为子查询内部加入，但当然不能，因为该`WHERE`子句位于子查询之前。有没有一种有效的方法来获得我想要的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:21:56.440

我会使用 ROW_NUMBER() 为每个参考选择最早的记录。

```
WITH
  sequenced_data
AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY ref_year, ref_no ORDER BY start_date ASC) AS sequence_id,
    *
  FROM
    involvements
  WHERE
    end_date IS NULL
)
SELECT
  *
FROM
  sequenced_data
WHERE
  sequence_id = 1 
```

如果引用没有任何记录 where `end_date IS NULL`，则它不会为该引用返回任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:23:34.613

尝试这样的事情：

```
SELECT
    t2.*
FROM
(SELECT
    ref_year, 
    ref_no,
    min(start_date) start_date
FROM
    involvements t1
where
    end_date is null
GROUP BY
    ref_year,
    ref_no
) as subq
INNER JOIN involvements t2 on 
    t2.ref_year - subq.ref_year 
    and t2.ref_no = subq.ref_no 
    and subq.start_date = t2.start_date 
```

# android - 由 loadUrl() 加载的 WebView 内容。然后 goBack() 关闭对话框而不是返回上一页

> ID：11102848
> 
> 赞同：0
> 
> 时间：2012-06-19T14:12:07.353
> 
> 标签：android, webview, android-webview, android-alertdialog

我正在为我的应用程序编写帮助系统。我在 AlertDialog 中使用 WebView。HTML 帮助页面存储在 assets/ 目录中，并具有相互链接引用。重现问题的最少代码：

```
package qa.so.wv;

import android.content.Context;
import android.app.AlertDialog;
import android.webkit.WebView;
import android.content.DialogInterface;
import android.view.ContextThemeWrapper;
import android.webkit.WebSettings;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class DialogInformation {

    public void showFile(Context context, String file) {

        AlertDialog.Builder dialog = new AlertDialog.Builder(new ContextThemeWrapper(context, R.style.InformationDialogStyle));

        final Context ctx = context;    
        final WebView wv = new WebView(context);
        wv.setWebViewClient(
            new WebViewClient(){
                    public boolean shouldOverrideUrlLoading(WebView view, String url) {
                        view.loadUrl(url);
                        return true;
                    }
            }
        );
        WebSettings settings = wv.getSettings();
        settings.setDefaultTextEncodingName("utf-8");
        wv.loadUrl(
            "file:///android_asset/"+file
            );

        dialog.setView(wv);

        dialog.setPositiveButton(
            context.getString(R.string.cont),
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            }
        ); 
        dialog.setNeutralButton(
            "Back",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    if (wv.isFocused() && wv.canGoBack()) {
                        wv.goBack();
                    } else {
                        Toast.makeText(
                            ctx, 
                            "No go back for Back button", 
                            Toast.LENGTH_LONG
                        ).show();
                    }
                }
            }
        );
        dialog.setOnCancelListener(
            new DialogInterface.OnCancelListener() {         
                @Override
                    public void onCancel(DialogInterface dialog) {
                    if (wv.isFocused() && wv.canGoBack()) {
                        wv.goBack();
                    } else {
                        Toast.makeText(
                            ctx, 
                            "No go back for system return 'hardware' button",
                            Toast.LENGTH_LONG
                        ).show();
                    }
                    }
            }
        );
        dialog.show();
    }

} 
```

此类在此处使用：

```
package qa.so.wv;

import android.os.Bundle;
import android.app.ListActivity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.view.MenuItem;
import android.view.Menu;
import android.widget.Toast;
import android.webkit.WebView;

public class ShowArchive extends ListActivity
{

    // options menu items constants
    protected static final int MENU_HELP = Menu.FIRST+11;
    protected static final int MENU_QUIT = Menu.FIRST+16;

    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
    }

    /* Create Menu Items */
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(0, MENU_HELP, 0, R.string.menu_help);
        menu.add(0, MENU_QUIT, 0, R.string.menu_quit);
        return true;
    }

    /* Handles Menu Item Selection */
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case MENU_HELP:
                DialogInformation dn = new DialogInformation();
                dn.showFile(    
                    this,
                    getString(R.string.help_file)
                );
                return true;    

            case MENU_QUIT:
                finish();
                return true;

        }
        return false;
    }

} 
```

以及 assets/ 目录页面一中的两个示例页面：

```
<html>
<a href="second.html">link to 2-nd file"</a>
<p>
Some text.
</p>
</html> 
```

第二页：

```
<html>
<p>2-nd file</p>
</html> 
```

我从菜单中调用“帮助”。显示第一页。我点击链接。第二页正确加载。 **当我单击“返回”按钮或硬件“取消”按钮时，帮助对话框消失，而不是加载先前显示的页面。**

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:58:11.237

尝试这个

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event.getAction() == KeyEvent.ACTION_DOWN) {
        switch (event.getKeyCode()) {
        case KeyEvent.KEYCODE_BACK:
            if(webView.canGoBack()) {
                 webView.goBack();
            } else {
                finish();
            }
            return true;
        }
    }
    return super.dispatchKeyEvent(event);
} 
```

# android - 文字转语音安卓

> ID：11102855
> 
> 赞同：0
> 
> 时间：2012-06-19T14:12:49.877
> 
> 标签：android, token, stringtokenizer, text-to-speech

我正在尝试创建一个文本转语音应用程序，该应用程序将记住应用程序暂停时逗号后的最后一个句子或句子的一部分。下面是我的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    pitch = (EditText) findViewById(R.id.pitch);
    words = (EditText) findViewById(R.id.wordsToSpeak);
    words.setText("This message is intended only for the use of the individual or entity to which it is addressed and may contain information that is privileged, confidential or exempt from disclosure by law.");
    speakBtn = (Button) findViewById(R.id.speak);

    // Check to be sure that TTS exists and is okay to use
    Intent checkIntent = new Intent();
    checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
    startActivityForResult(checkIntent, REQ_TTS_STATUS_CHECK);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == REQ_TTS_STATUS_CHECK) {
        switch (resultCode) {
        case TextToSpeech.Engine.CHECK_VOICE_DATA_PASS:
            // TTS is up and running
            mTts = new TextToSpeech(this, this);
            Log.v(TAG, "Pico is installed okay");
            break;
        case TextToSpeech.Engine.CHECK_VOICE_DATA_BAD_DATA:
        case TextToSpeech.Engine.CHECK_VOICE_DATA_MISSING_DATA:
        case TextToSpeech.Engine.CHECK_VOICE_DATA_MISSING_VOLUME:
            // missing data, install it
            Log.v(TAG, "Need language stuff: " + resultCode);
            Intent installIntent = new Intent();
            installIntent
                    .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
            break;
        case TextToSpeech.Engine.CHECK_VOICE_DATA_FAIL:
        default:
            Log.e(TAG, "Got a failure. TTS apparently not available");
        }
    } else {
        // Got something else
    }
}

@Override
public void onInit(int status) {
    // Now that the TTS engine is ready, we enable the button
    if (status == TextToSpeech.SUCCESS) {
        speakBtn.setEnabled(true);
        mTts.setOnUtteranceCompletedListener(this);

    }
}

public void doSpeak(View view) {
    mTts.setPitch(new Float(pitch.getText().toString()));

    StringTokenizer st = new StringTokenizer(words.getText().toString(),
            ",.");

    while (st.hasMoreTokens()) {

        params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,
                String.valueOf(uttCount++));
        mTts.speak(st.nextToken(), TextToSpeech.QUEUE_ADD, params);
    }

    // mTts.speak(words.getText().toString(), TextToSpeech.QUEUE_ADD, null);
};

@Override
public void onPause() {
    super.onPause();
    // if we're losing focus, stop talking
    if (mTts != null)
        mTts.stop();
}

@Override
public void onDestroy() {
    super.onDestroy();
    mTts.shutdown();
}

@Override
public void onUtteranceCompleted(String utteranceId) {
    Log.v(TAG, "Got completed message for uttId: " + utteranceId);
    lastUtterance = Integer.parseInt(utteranceId);

} 
```

}

我能够让机器人说话并跟踪它最后说话的令牌。但是，当您按下 speakBtn 时，我不确定如何从上次停止的地方恢复。**如果没有成功地大声读出所有令牌，是否无论如何要返回到令牌生成器中的某个令牌？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:03:21.260

怎么样：

```
for(int i=0; i<successfulUtterances; ++i)
  tokenizer.nextToken();
String nextUnspokenUtterance = tokenizer.nextToken(); 
```

如果你问是否有直接的方法，没有。但是这种方式将摆脱所有您不需要的令牌并让您继续进行。

# postgresql - 如何连接两个查询结果？

> ID：11102858
> 
> 赞同：1
> 
> 时间：2012-06-19T14:13:07.630
> 
> 标签：postgresql, join, postgresql-9.0

我想在某个时间跨度内检索所有 ID。然而，时间戳存储在不同的表中：

```
Table A has column  my_id
Table B has columns my_id, timestamp 
```

我想要类似的东西

```
SELECT
  id,
  time
FROM
  (SELECT my_id AS id FROM A) q1,
  (SELECT timestamp AS time FROM B WHERE my_id = id) q2
; 
```

但是我怎样才能`id`在不同的子查询中得到值呢？这个问题有一个优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:14:17.550

我看到在第二个子查询中，您尝试链接两个表：

```
(SELECT my_id AS id FROM A) q1,
(SELECT timestamp AS time FROM B WHERE my_id = id) q2 
```

如果两个 id 必须相等：

```
SELECT a.my_id as id, b.timestamp as time
FROM A a
JOIN B b ON (a.my_id = b.my_id); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:13:42.703

更简单：

```
SELECT my_id AS id, b.my_ts
FROM   a
JOIN   b USING (my_id); 
```

*   `FROM A a`（就像有人建议的那样）是胡说八道，因为我引用[了手册](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)：

> 引用标识符也使其区分大小写，而未引用的名称总是折叠为小写。

*   虽然在 PostgreSQL 中被允许，但类型名称`time`和`timestamp`是每个 SQL 标准中的保留字，不应用作标识符。

*   `USING`是一种[句法速记，主要是](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM).

# ruby-on-rails - Rails / Assets 管道：动态列出清单中包含的资产

> ID：11102861
> 
> 赞同：5
> 
> 时间：2012-06-19T14:13:11.157
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets, yepnope

我已经成功使用资产管道几个月了。现在我想异步加载我的一些 JS 文件（使用 yepnope 库）。当`config.assets.debug`is时效果很好`false`。

但是在开发模式下（`config.assets.debug`通常是`true`），对我来说最好的选择是动态获取清单中包含的所有 js 文件的列表（我有 2 个清单：application.js 和 externals.js），以将它们提供给 yepnope异步加载。

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T15:07:40.343

终于找到了答案，我创建了这个助手（阅读[这篇](https://stackoverflow.com/questions/7602173/add-custom-methods-to-rails-3-1-asset-pipeline/8560160#8560160)文章了解如何在资产编译期间声明助手方法可见）

```
# given a list of Sprockets manifests, returns a flattened array of dependency paths
def paths_for_manifests(manifests = [])
  manifests.map do |manifest|
    Rails.application.assets[manifest].dependencies.map{|d| "/assets/#{d.logical_path}"}
  end.flatten
end 
```

我像这样使用它（来自 JS / CoffeeScript 文件）：

```
paths = <%= paths_for_manifests(%w(externals.js application.js)) %> 
```

# matlab - 对非整数 MATLAB 数组值使用 find

> ID：11102862
> 
> 赞同：0
> 
> 时间：2012-06-19T14:13:14.310
> 
> 标签：matlab, floating-point, comparison

我有大量的值，全部或远小于 1，因此使用向上/向下舍入函数是无用的。无论如何我可以在这些非整数值上使用/制作“查找”功能吗？

例如

```
ind=find(x,9.5201e-007) 
```

FWIW 所有值都在数组中按顺序排列。

非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:21:23.093

您使用的语法不正确。

```
find(X,k) 
```

返回`k`非零值，这就是为什么`k`必须是整数。你要

```
find(x==9.5021e-007);
%#   ______________<-- logical index: ones where condition is true, else zeros
%#   the single-argument of find returns all non-zero elements, which happens
%#   at the locations of your value of interest. 
```

请注意，这需要是浮点数的精确表示，否则会失败。如果您需要公差，请尝试以下示例：

```
tol = 1e-9; %# or some other value
val = 9.5021e-007;
find(abs(x-val)<tol); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:41:46.470

从您的评论中听起来您想要的是

```
`[b,m,n] = unique(x,'first'); 
```

then`b`将是 x 中元素的排序版本，没有重复，并且

```
x = b(n); 
```

因此，如果 中有 4 个 '1' `n`，则表示该值`b(1)`出现了`x`4 次，并且它在`x`中的位置`find(n==1)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:33:51.810

当我想在某个容差范围内找到实数时，我通常会将它们全部四舍五入到该容差水平，然后进行查找、排序等。

如果`x`是我的真实数字，我会做类似的事情

```
xr = 0.01 * round(x/0.01); 
```

那么 xr 都是 0.01 的倍数，即四舍五入到最接近的 0.01。然后我可以做

```
t = find(xr=9.22) 
```

然后`x(t)`将是`x`9.2144444444449 和 9.225 之间的每个值。

# android - 如何禁用 ScrollView

> ID：11102864
> 
> 赞同：0
> 
> 时间：2012-06-19T14:13:15.213
> 
> 标签：android, android-layout, android-widget

我有一个布局，其中有一个 ScrollView 和一些东西。看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/welcome_scrol_lay"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:background="@drawable/bg">
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"  
        android:background="@drawable/bg"
        android:weightSum="100" >
        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="250dp"
            android:orientation="vertical" 
            android:weightSum="100"
            android:background="@drawable/specialmapholder">
            <android.support.v4.view.ViewPager
                android:id="@+id/welcomeViewPager"
                android:layout_width="match_parent"
                android:layout_height="0dp" 
                android:layout_marginTop="15dp"
                android:layout_marginLeft="15dp"
                android:layout_marginRight="15dp"
                android:layout_weight="90"
                android:clickable="true" />
            <LinearLayout
                android:id="@+id/welcome_indicatorLayout"
                android:layout_width="match_parent"
                android:layout_height="0dp" 
                android:layout_weight="10"
                android:gravity="center" >
            </LinearLayout>
        </LinearLayout>
        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:orientation="vertical">
            <TextView
                android:id="@+id/welcome_header"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="15dp"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:text="Large Text"
                android:textColor="@color/white"
                android:textStyle="bold"
                android:textSize="26dp"
                android:textAppearance="?android:attr/textAppearanceLarge" />
            <TextView
                android:id="@+id/welcome_body"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20dp"
                android:layout_marginRight="20dp"
                android:text="Medium Text"
                android:textColor="@color/white"
                android:textSize="14dp"
                android:textStyle="bold"
                android:layout_marginTop="20dp"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

As you can see I have a Viewpager in the ScrollView. I want to disable scroll when I touch ViewPager, because when I want to change picture page is scrolled. How can I disable the scroll function when I touch the ViewPager?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:37:42.447

在 Android 中，父母可以使用孩子的 TouchEvents。在这种情况下，ScrollView 使用 ViewPager 组件的 TouchEvents。为了避免这种行为，Android 框架提供了 onInterceptTouchEvent(MotionEvent)。

在您的情况下，您必须继承 ScrollView 并更改 onInterceptTouchEvent(MotionEvent) 方法。您应该更改 onInterceptTouchEvent(MotionEvent)，以便 ScrollView 仅在用户垂直滚动 ScrollView 时才使用子事件。

ListView 的示例实现：

```
public class VerticalListView extends ListView {

private float mLastX;
private float mLastY;
private float mDiffX;
private float mDiffY;

public VerticalListView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public VerticalListView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public VerticalListView(Context context) {
    super(context);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // reset difference values
            mDiffX = 0;
            mDiffY = 0;

            mLastX = ev.getX();
            mLastY = ev.getY();
            break;

        case MotionEvent.ACTION_MOVE:
            final float curX = ev.getX();
            final float curY = ev.getY();
            mDiffX += Math.abs(curX - mLastX);
            mDiffY += Math.abs(curY - mLastY);
            mLastX = curX;
            mLastY = curY;

            // don't intercept event, when user tries to scroll horizontally
            if (mDiffX > mDiffY) {
                return false;
            }
    }

    return super.onInterceptTouchEvent(ev);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:22:14.450

```
// Get the ScrollView
final ScrollView myScroll = (ScrollView) findViewById(R.id.welcome_scrol_lay);

// Disable Scrolling by setting up an OnTouchListener to do nothing
    myScroll.setOnTouchListener( new OnTouchListener(){ 

        public boolean onTouch(View v, MotionEvent event) {
            return true; 
        }
    });

// Enable Scrolling by removing the OnTouchListner
    tvDisplayScroll.setOnTouchListener(null);  ` 
```

但问题是，这可能会完全禁用滚动效果

# matlab - opencv中sub2ind的等效函数

> ID：11102868
> 
> 赞同：0
> 
> 时间：2012-06-19T14:13:23.153
> 
> 标签：matlab, opencv

我在理解 matlab 代码并将其转换为 opencv 时面临问题。我想知道在 opencv 的 matlab 中是否有 sub2ind 的等效功能。或者如何在 opencv 中实现这个特定的功能。

sub2ind 函数的链接是

[http://www.mathworks.in/help/techdoc/ref/sub2ind.html](http://www.mathworks.in/help/techdoc/ref/sub2ind.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:27:09.300

一个简单的例子来说明。考虑：

```
>> v = (1:4*3)
v =
     1     2     3     4     5     6     7     8     9    10    11    12
>> M = reshape(v,[4 3])
M =
     1     5     9
     2     6    10
     3     7    11
     4     8    12 
```

现在以下所有内容都是等价的：

```
sz = size(M);

i = 3; j = 2;
M(i,j)
v( sub2ind(sz,i,j) )
v( sz(1)*(j-1)+i ) 
```

请记住，MATLAB 使用列优先顺序，而 C 是[行优先顺序](http://en.wikipedia.org/wiki/Row-major_order)

# c# - 在一个查询中查找一个节点及其匹配的后代节点

> ID：11102872
> 
> 赞同：0
> 
> 时间：2012-06-19T14:13:42.763
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我有以下 xml，我需要从同一个查询中获取 2 个值（请参阅注释中的 *）：这两个值是关联的，我可以获得一组（`) or the other () but not using a single query.`

 `**Update** I updated the xml below to include 2 nodes that exist under the node and added the namespace

Ideally I would like to get them both in a single query into a Dictionary` 

```
<root xmlns="http://www.blah.net/xsd/layout/2003-10-16">
    <header/>
    <movement>
        <movementHeader>
            <desc>xyz</desc>
        </movementHeader>
        <detailHeader>
            <desc>abc</desc>
        </detailHeader>
        <detail>
            <!-- * need this value -->
            <code>90125</code>
            <subDetail>
                <!-- * and need this value at same time -->
                <amount>1200.00</amount>
            </subDetail>
        </detail>
        <detail>
            <!-- * need this value -->
            <code>90126</code>
            <subDetail>
                <!-- * and need this value at same time -->
                <amount>1300.00</amount>
            </subDetail>
        </detail>
        <detail>
            <!-- * need this value -->
            <code>9012</code>
            <subDetail>
                <!-- * and need this value at same time -->
                <amount>1400.00</amount>
            </subDetail>
        </detail>
    </movement> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:17:13.860

您可以投影到包含所需属性的匿名类型：

```
var results = xdoc.Descendants("detail")
                  .Select( x => new 
                   {
                       Code = x.Element("code").Value,
                       Amount = x.Element("subDetail")
                                 .Element("amount").Value 
                   });

foreach (var item in results)
{
    Console.WriteLine("Code = {0}, Amount = {1}", item.Code, item.Amount);
} 
```

经过测试并正常工作，按预期返回 3 个结果。

要将其添加到字典中，只需添加`ToDictionary()`：

```
var dict = xdoc.Descendants("detail")
               .Select(x => new
                {
                   Code = x.Element("code").Value,
                   Amount = x.Element("subDetail")
                             .Element("amount").Value
                }).ToDictionary(x => x.Code, x => x.Amount); 
```

**编辑：**

要考虑 XML 命名空间，您必须声明和使用它，更新示例如下：

```
XNamespace ns = "http://www.blah.net/xsd/layout/2003-10-16";
var dict = xdoc.Descendants(ns + "detail")
               .Select(x => new
               {
                  Code = x.Element(ns + "code").Value,
                  Amount = x.Element(ns + "subDetail")
                            .Element(ns + "amount").Value
               }).ToDictionary(x => x.Code, x => x.Amount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:19:43.977

```
var r = from d in doc.Root.Element("movement").Elements("detail")
        let amount = (string)d.Element("subDetail").Element("amount")
        select new 
        {
            Code = (string)d.Element("code"),
            Amount = Decimal.Parse(amount)
        }; 
```

# android - 具有自定义布局的操作栏向我显示图标

> ID：11102875
> 
> 赞同：1
> 
> 时间：2012-06-19T14:13:45.137
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个带有自定义布局的操作栏，但这向我显示了右侧的图标，我将 texttitle、description 和 uselogo 设置为 false。

照片：

[![一只忙碌的猫](../Images/0245f640437e04e322838b75d26a1235.png)](https://i.stack.imgur.com/TR4E6.png)

这是我的代码：

```
 // Gestion del ActionBar y contexto
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setDisplayUseLogoEnabled(false);
        actionBar.setDisplayHomeAsUpEnabled(false);
        actionBar.setDisplayShowCustomEnabled(true);
        View cView = getLayoutInflater().inflate(R.layout.actionbar, null);
        actionBar.setCustomView(cView); 
```

这是actionbar.xml，只有一个图像，2个textview和其他图像。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="54dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/header_bg" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="100dp"
            android:text="Nº de Usuario: "
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/blanco"
            android:textSize="12sp" android:shadowColor="#232323" android:shadowDx="0" android:shadowDy="-1"/>

        <TextView
            android:id="@+id/tvABCodigoUsuario"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textView1"
            android:layout_alignBottom="@+id/textView1"
            android:layout_toRightOf="@+id/textView1"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/blanco"
            android:textSize="12sp" android:shadowColor="#232323" android:shadowDx="0" android:shadowDy="-1"/>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:src="@drawable/header_logo" android:layout_marginLeft="14dp"/>

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:src="@drawable/header_bt_off" android:layout_marginRight="14dp"/>

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@+id/textView1"
            android:layout_alignLeft="@+id/textView1"
            android:paddingRight="9dp"
            android:text="Nombre: "
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="@color/blanco"
            android:textSize="12sp" android:layout_marginLeft="45dp" android:layout_marginBottom="1dp" android:shadowColor="#232323" android:shadowDx="0" android:shadowDy="-1"/>

    </RelativeLayout>

</RelativeLayout> 
```

我使用 actionbar sherlock 和 2.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T15:05:04.907

您可以使用`actionbar.setDisplayShowHomeEnabled(false)`隐藏图标。

# java - 交换功能：Java Pass-By-Value 代码失败

> ID：11102878
> 
> 赞同：0
> 
> 时间：2012-06-19T14:13:54.043
> 
> 标签：java, pass-by-value

```
 public void swap(Point var1, Point var2)
 {
  var1.x = 100;
  var1.y = 100;
  Point temp = var1;
  var1 = var2;
  var2 = temp;
 }

public static void main(String [] args)
{
  Point p1 = new Point(0,0);
  Point p2 = new Point(0,0);
  System.out.println("A: " + p1.x + " B: " +p1.y); 
  System.out.println("A: " + p2.x + " B: " +p2.y);
  System.out.println(" ");
  swap(p1,p2);
  System.out.println("A: " + p1.x + " B:" + p1.y); 
  System.out.println("A: " + p2.x + " B: " +p2.y);  
} 
```

运行代码会产生：

```
A: 0 B: 0
A: 0 B: 0
A: 100 B: 100
A: 0 B: 0 
```

我了解该函数如何更改 p1 的值，因为它是按值传递的。我不明白为什么 p1 和 p2 的交换失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:20:46.863

*Java始终*是按值传递的。这是*原*语和对象的*唯一*机制。

 *关键是要知道为对象传递了什么。这不是对象本身；存在于堆上。它是按值传递的对该对象 的*引用。*

您不能修改传递的引用并将新值返回给调用者，但您可以修改它所引用的对象的状态 - 如果它是可变的并公开适当的方法供您调用。

类与指针的交换，类似于 C 中的可能，不起作用，因为您无法更改传递的引用所指的内容并将新值返回给调用者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T14:17:18.397

`myFunction()`只是交换对函数内部两个对象的引用（与外部对象不同），但不*交换*函数外部的引用或对象实例本身！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T14:16:01.763

在形式参数位置会生成一个引用的副本，因此会有一个指向 Point 实例的新引用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:18:13.663

对象是通过引用分配的，而不是克隆的，但是参数仍然作为对实际对象的引用，它们不会变成“对引用的引用”。

我的意思是引用与最初`var1`相同的对象，但随后您更改为引用另一个对象。这不会影响对象引用的内容，因为不是对 的引用，只是对与引用相同的对象的引用。`p1``var1``p1``var1``p1``p1`*

# ruby - 制作哈希方法

> ID：11102879
> 
> 赞同：0
> 
> 时间：2012-06-19T14:13:54.760
> 
> 标签：ruby

所以我有一个关于扩展常见 Ruby 数据类型功能的最佳实践的问题。

因此，Rails 当然有一个很好的方法`pluralize`，它接受一个字符串并将其复数。我特别感兴趣的是你可以打电话

```
"square".pluralize 
```

并收到

```
=> "squares" 
```

作为回报。我想做的是类似的事情——除了哈希。为了这个问题，假设我有一个方法`pluralize_each`可以将每个`key`和`value`的散列复数。

```
def pluralize_each hash
  hash.each {|key,value| puts key.pluralize + "=>" + value.pluralize }
end 
```

我怎样才能操纵这个方法，以便我可以只在一个哈希上调用它？例如，我希望能够调用

```
{"cat" => "dog"}.pluralize_each
#=> {"cats" => "dogs"} 
```

（让我们忘记这个特殊的方法现在还不能完全发挥作用，有嵌套的哈希等。）

除了扩展 Hash 类之外，还有什么方法可以做到这一点？我想会有办法的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:18:41.947

使用模块：

```
module HashPluralize
  def pluralize
    each { |key,value| puts "#{key.pluralize} => #{value.pluralize}" }
  end
end

Hash.send(:include, HashPluralize)

# Usage example:
{'user' => 'product'}.pluralize
users => products 
```

* * *

# 编辑：为什么？

@KL-7 合法地要求类编辑与模块扩展。这是我的意见：

如果您正在编写一些有机的东西，模块对于优化重构/代码组织可能很有用。例子：

```
module Pluralization

  def self.included(klass)
    klass.send :include, Pluralization.const_get(klass.to_s)
  rescue TypeError
    raise NotImplementedError.new("A pluralization method for the #{klass}" +
            " class is not supported at the moment")
  end

  module Array
    def pluralize
      'array pluralization implementation'
    end
  end

  module Hash
    def pluralize
      'hash pluralization implementation'
    end
  end

end

Array.send :include, Pluralization
Hash.send :include, Pluralization

puts Array.new.pluralize
puts Hash.new.pluralize 
```

该模块允许您定义一种干净的方式来定义各种类的复数形式；您可以添加配置，将复数方法分离到各个文件中，等等。

无论如何，如果您只是想向`pluralize`Hash 类添加一个方法，那么编辑 Hash 类没有问题（只要确保您没有覆盖另一个方法，并`method_defined?`检查 fe）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:23:08.217

鉴于 Ruby 的面向对象范式，制作 Hash 的子方法绝对是最好的方法。但是如果你出于某种原因想要创建一个全局方法，那么有两种方法可以检查参数类。

一个是“instance_of？” （测试参数是否属于特定类）或“kind_of”？（允许子类；通常是个好主意）。例如：

```
{a: 1, b: 2, c: 3}.kind_of? Hash 
```

是真的。

所以你可以用这种方式检查你的论点。另一个选项是“duck-typing”来查看对象是否像哈希一样，例如查看它是否具有“.keys”方法：

```
{a: 1, b: 2, c: 3}.respond_to? :keys 
```

但是，我会坚持在 Hash 类中插入方法：

```
class Hash
  def ...
  end
end 
```

或定义 Hash 的子类并将方法放在那里：

```
class Hash_with_plural < Hash
  def ...
  end
end 
```

因为它更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:16:29.173

```
class Hash
  def pluralize_each
    each { |key,value| puts "#{key.pluralize} => #{value.pluralize}" }
  end
end 
```

如果您想在实例上调用自己的方法，`Hash`我怀疑除了重新打开类之外还有其他方法。

# facebook - Facebook 页面访问令牌的有效性？

> ID：11102882
> 
> 赞同：-2
> 
> 时间：2012-06-19T14:14:11.690
> 
> 标签：facebook, facebook-graph-api, oauth

**facebook“页面**访问令牌”在多长时间内有效？

此外，facebook“**应用程序**访问令牌”是否允许您在页面上发布（用户是管理员），即我们可以执行 Http Post 以使用应用程序访问令牌更新页面/用户状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:36:56.927

Facebook recently removed un-expiring access tokens for users, so long-lived access tokens last 60 days. Short lived ones last two hours.

But it does appear that they are leaving them un-ending for pages.

See the notice on the [deprecation of offline_access](https://developers.facebook.com/roadmap/offline-access-removal/), specifically the section on Page Access. Also, take a look at the [server side auth process](https://developers.facebook.com/docs/authentication/server-side/).

When you go through the server side access, you'll need to request the '[manage_pages](https://developers.facebook.com/docs/authentication/permissions/#page_perms)' permission.

# windows-8 - Windows 8：不同设备的全屏图像

> ID：11102885
> 
> 赞同：2
> 
> 时间：2012-06-19T14:14:23.563
> 
> 标签：windows-8, microsoft-metro

我正在学习 Windows 8 Metro 风格的应用程序开发，我想在我的应用程序中设置一张背景照片，它将适合全屏，我是否应该提供不同尺寸的这张图片以便它适合所有设备？如果我应该提供，我应该提供哪些详细尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:49:46.690

> 我应该提供不同的尺寸以便它可以归档所有设备吗？是的
> 
> 详细尺寸：您应该提供可缩放以适应不同分辨率和尺寸的图像。常见尺寸包括（这些来自 Windows 8 模拟器 - 您可以使用这些尺寸测试您的应用程序）：

*   1024 x 768
*   1366 x 768
*   1920 x 1080

还有一些建议以提供不同分辨率（100、140、180 dpi）的图像。

请确保您签出：

[缩放到屏幕的指南](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780612.aspx)

[缩放到像素密度的指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)

# vba - 将图像添加到工作表达到了任意限制

> ID：11102887
> 
> 赞同：2
> 
> 时间：2012-06-19T14:14:25.990
> 
> 标签：vba, excel, image

我一直在根据每个查询的结果将图像添加到 Excel 工作表中。我尝试了一个返回 1000 个结果的查询（每个结果都在一个新行中），但只显示了 405 个相关图片。一张纸上有最大数量的图片还是我做错了什么？

```
Sub insertLocalPicture(localPicFileDir As String, PictureFileName As String)
Dim pic As Shape
Dim xTop As Integer
xTop = ActiveCell.Top + 1
Set pic = ActiveSheet.Shapes.AddPicture(localPicFileDir + PictureFileName + ".jpg", msoFalse, msoTrue, 0, 0, 100, 100)

With pic
    .Top = xTop
    .Left = 0
    .Width = 107
    .Height = 80
End With
Set pic = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:47:58.763

根据用户1466660，

发生在***单元格*32,768**的错误已通过重铸修复

```
Dim xTop As Integer 
```

作为

```
Dim xTop As Long 
```

正如 Scott Holtzman 所指出的，整数变量只能保存 -32,768 和 32,768 之间的值。出于这个原因，Jimmy Pena 建议强制转换变量，`As Long`除非宏设计者知道它们应该以不同的方式使用。

# php - 使用 xpath 或 ->nextSibling 使用 curl 读取 html 文件

> ID：11102888
> 
> 赞同：0
> 
> 时间：2012-06-19T14:14:25.947
> 
> 标签：php, mysql, curl

请帮助如何使用 DOMDocument 函数从下面的示例 html 代码中提取数据，如 15、教学期 1 和 2.、Max 150\. 等？我试图解决它，但是在我想提取的文本之前有多个标签使我更难一次提取所有内容，因为我必须将所有提取的数据保存到 mysql 数据库中。

```
<P><SPAN STYLE="font-size: 16pt; font-weight: bold"><a name="CS1050"class="modtitle">CS1050 Fundamentals of Internet Computing</a></SPAN></p>
<P><B>Credit Weighting: </B>15<BR><BR>
<B>Teaching Period(s): </B>Teaching Periods 1 and 2.<BR><BR>
<B>No. of Students: </B>Max 150.<BR><BR>
<B>Pre-requisite(s): </B>None<BR><BR>
<B>Co-requisite(s): </B>None<BR><BR>
<B>Teaching Methods: </B>72 x 1hr(s) Lectures; 18 x 2hr(s) Practicals.<BR><BR>
<B>Module Co-ordinator: </B>Professor Gregory Provan, Department of Computer Science.     <BR><BR>
<B>Lecturer(s): </B> Mr Gavin Russell, Department of Computer Science.<BR><BR>
<B>Module Objective: </B>To introduce students to Internet computer systems, web design, and<BR>client-side programming.<BR><BR>
<B>Module Content: </B>This module provides an introduction to the key concepts of Internet computing. Starting with the fundamentals of computer systems and the Internet, students progress to learn how to design web sites and how to utilize simple client-side programming. Issues related to user interface design and human-computer interfacing (HCI) are covered. Broader issues related to the use of the Internet for Blogging and Social Networks are discussed. The practical element of the module allows students to develop skills necessary for web site design using simple client side programming.<BR><BR>
<B>Learning Outcomes: </B>On successful completion of this module, students should be able to:<BR>&middot; Understand the fundamental principles of computer systems and the Internet;<BR>&middot; Design web sites;<BR>&middot; Use simple client-side programming;<BR>&middot; Understand the principles of user interface design and human-computer interfaces.<BR><BR>
<B>Assessment: </B>Total Marks 300: End of Year Written Examination 240 marks; Continuous Assessment 60 marks (Departmental Tests; Assignments).<BR><BR>
<B>Compulsory Elements: </B>End of Year Written Examination; Continuous Assessment.<BR<BR>
<B>Penalties (for late submission of Course/Project Work etc.): </B>Work which is submitted late shall be assigned a mark of zero (or a Fail Judgement in the case of Pass/Fail modules).<BR><BR>
<B>Pass Standard and any Special Requirements for Passing Module: </B>40%.<BR><BR>
<B>End of Year Written Examination Profile: </B>1 x 3 hr(s) paper(s).<BR><BR>
<B>Requirements for Supplemental Examination: </B>1 x 3 hr(s) paper(s) to be taken in Autumn. The mark for Continuous Assessment is carried forward.</P>

                   MY SAMPLE CURL CODE

$content3= $dom->getElementsByTagname('p');
$content4 = $dom->getElementsByTagname('b');

        //===========================================
        //=====  EXTRACT P STUFF ====================
        //===========================================

        foreach ($content3 as $value) {
            $contentnew[]= $value;
        print_r($value); 

        echo "Attribute Value = ";
        echo $value->getAttribute('value');
        echo "<br />";

        // let's get hold of the text value from the node
        $mytempvariable=$value->nodeValue;
        print "CONTENT OF P NODE: \n\n$mytempvariable <br /> <br />\n\n\n";
        }
        echo "<br /> <br /> <br />";

        //===========================================
        //===== EXTRACT B STUFF =====================
        //===========================================
        foreach ($content4 as $value) {
            $contentnew[]= $value;

        echo "Attribute Value = ";
        echo $value->getAttribute('value');
        echo "<br />";

        print_r($value); 
        // let's get hold of the text value from the node
        $mytempvariable=$value->nodeValue;
        print "CONTENT OF B NODE: \n\n$mytempvariable <br /> <br />\n\n\n";
        }
        echo "<br /> <br /> <br />"; 
```

我听说我可以使用 ->nextSibling 或 xpath 来提取所有 b 节点之后的所有数据，但我似乎无法使用 xpath 来提取我需要的所有相关数据。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:01:36.123

你非常接近：

```
$result = array();
foreach($dom->getElementsByTagName('b') as $node){
    $result[preg_replace('/:\s+$/','',$node->textContent)] = trim($node->nextSibling->textContent);
}
var_dump($result); 
```

# postgresql - 在 Postgresql 中创建运算符

> ID：11102892
> 
> 赞同：1
> 
> 时间：2012-06-19T14:14:58.610
> 
> 标签：postgresql

任何人都知道如何在 postgresql 中调用自定义运算符？
我有以下运算符：

```
CREATE OR REPLACE FUNCTION algo.fun_temp(IN exp BOOLEAN)
RETURNS INTEGER AS $$
BEGIN
    RETURN NOT exp;
END;
$$ LANGUAGE plpgsql;

CREATE OPERATOR algo.~
(
PROCEDURE = algo.fun_temp,
RIGHTARG = BOOLEAN
); 
```

当我尝试用 打电话给这个运营商时`SELECT algo.~ TRUE`，客户抱怨

```
"ERROR:  syntax error at or near "~"
LINE 1: SELECT algo.~ TRUE" 
```

任何人都知道问题是什么？任何帮助表示赞赏。

程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:17:56.947

该函数应该返回`INTEGER`，你写的返回`BOOLEAN`：

```
CREATE OR REPLACE FUNCTION algo.fun_temp(IN exp BOOLEAN)
RETURNS INTEGER AS $$
BEGIN
    RETURN (NOT exp)::INTEGER;
END;
$$ LANGUAGE plpgsql; 
```

然后将架构添加`algo`到`search_path`：

```
SET search_path = public, algo; 
```

# jquery - 如何防止多个 Ajax 请求

> ID：11102893
> 
> 赞同：3
> 
> 时间：2012-06-19T14:15:02.797
> 
> 标签：jquery, ajax, json

我想将页面向下滚动到某个点（#first_column DIV 的高度），将从服务器端获取 json 并将内容添加到 #first_column。

现在的问题是当我向下滚动到#first_column 的高度时，几乎同时有许多 Ajax 调用。我想要的是向下滚动到#first_column 的高度，调用服务器并获取json 数据并将内容添加到#first_column。#first_column 的高度发生变化。然后我向下滚动到#first_column 的高度，将获得第二个Ajax 请求。

有什么建议么？

```
<script>
   $(window).scroll(function(){
   column_height = $("#first_column").height();
   screenTop = $(window).scrollTop();
   window_height = $(window).height();

if((screenTop+window_height)>=column_height){
      $.ajax({
            url: "/service/article_json.php",
            type: 'GET',
            async: false,
            cache: false,
            timeout: 30000,
            error: function(){
                return true;
            },
            success: function(data){ 
                $.each($.parseJSON(data), function(key,item) {

                  //Add content to #first_column

                });
            }
        });
  }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:23:28.477

尝试使用标志，例如：

```
var ajaxInProgress = false;

$(window).scroll(function() {
  if(ajaxInProgress) return;
  ajaxInProgress = true;

  $.ajax({
    // setup here
    success: {
      // ...
      ajaxInProgress = false;
    },
    error: {
      // ...
      ajaxInProgress = false;
    }
  });
}); 
```

在此示例中，当`ajaxInProgress`设置为`true`window.scroll 时，回调将简单地返回并且不执行任何操作，否则标志将设置为 true，将执行调用，并且`success`在回调时或`error`回调时，标志将被重置为`false`允许另一个 ajax 调用.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T14:17:24.230

您可以取消绑定事件作为您在 if 语句中执行的第一件事，然后如果您愿意，可以在 Success 方法中重新绑定它。

```
$(window).unbind('scroll'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T18:33:46.390

```
var ajaxcallrunning;  //flag for ajax call

$(window).scroll(function() {

    if(ajaxcallrunning)
    {
      return;  // if a ajax call is running then return
    } 

    ajaxcallrunning = 1;      // otherwise set flag and execute ajax call

    $.ajax({
      // setup here
      success: {
         // ...
          ajaxInProgress = 0;    //reset flag after request complete
       },
       error: {
        // ...
         ajaxInProgress = 0;   //reset flag if error occurs
      }
    });
}); 
```

# sql - 存储过程中的 HH:MM:SS:Msec 到 HH:MM:SS

> ID：11102895
> 
> 赞同：2
> 
> 时间：2012-06-19T14:15:04.107
> 
> 标签：sql, sql-server-2008

我有一个存储过程，它根据此类计算更新表，计算作为列名 ( `Calendatedate`) - ( `Current System Date Time`) 完成，并将此信息更新为列 ( ) 并以格式`TimeSpent`显示值 。`Hh:Mm:SS:Msec`

查询工作正常，但我想以这样的方式更新它，以便花费的时间应该只是`HH:MM:SS`格式。请帮助我了解如何`Msec`从所花费的时间中删除它。

```
CREATE procedure St_Proc_UpdateTimeSpent        
@timeEntryID int,        
@status int output        
as begin         
set nocount on;        
declare @Date dateTime;        
set @Date=GETDATE(); 
    update Production set TimeSpent=(SELECT CONVERT(VARCHAR(20),DateAdd(SS,Datediff(ss,CalendarDate, @Date)%(60*60*24),0),114)),  
    IsTaskCompleted=1       
    where productionTimeEntryID=@timeEntryID         
    set @status=1;        
    return @status;        
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:18:58.627

您可以在`CONVERT`函数中使用样式 108 而不是 114 来仅获取`hh:mm:ss`：

```
CREATE PROCEDURE dbo.St_Proc_UpdateTimeSpent        
     @timeEntryID int,        
     @status int output        
AS BEGIN
   SET NOCOUNT ON;

   DECLARE @Date DATETIME;
   SET @Date = GETDATE(); 

   UPDATE dbo.Production 
   SET TimeSpent = CONVERT(VARCHAR(20), DATEADD(SS, DATEDIFF(ss, CalendarDate, @Date)%(60*60*24),0), 108),  
       IsTaskCompleted = 1
   WHERE  
       productionTimeEntryID = @timeEntryID         

   SET @status = 1;

   RETURN @status;        
END 
```

请参阅[关于 CAST 和 CONVERT 的优秀 MSDN 文档，](http://msdn.microsoft.com/en-us/library/ms187928.aspx)`DATETIME`以获取转换为`VARCHAR`（和返回）时所有支持样式的完整列表

顺便说一句：SQL Server 2008 还引入了一种[`TIME`数据类型](http://msdn.microsoft.com/en-us/library/bb677243.aspx)，它可能比 a 更适合`VARCHAR`存储您的`TimeSpent`值……看看吧！

# java - System.currentTimeMillis 是否代表 UTC 时间？

> ID：11102897
> 
> 赞同：17
> 
> 时间：2012-06-19T14:15:05.967
> 
> 标签：java

`System.currentTimeMillis()`代表UTC时间还是本地系统时间？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T14:16:36.663

UTC - 它是自 1970 年 1 月 1 日 UTC 午夜以来的毫秒数（可能是模闰秒）。

显然它依赖于本地系统*时钟*，但它不依赖于本地系统*时区*。

（诚​​然，Javadoc 对此并不清楚，这很遗憾。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T14:28:58.133

根据 oracle.com 的 UTC。 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#currentTimeMillis](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#currentTimeMillis)

“当前时间米利斯

回报：

当前时间与 UTC 1970 年 1 月 1 日午夜之间的差异，以毫秒为单位。”

# c# - 获取 C# 应用程序在非开发机器上崩溃的堆栈跟踪

> ID：11102901
> 
> 赞同：4
> 
> 时间：2012-06-19T14:15:14.727
> 
> 标签：c#, debugging, clr, windbg

我在未安装 Visual Studio 的客户端计算机上安装了 C# windows 窗体应用程序。

当应用程序运行时，它会立即崩溃并显示一个对话框

> ProgramX 已停止工作。一个问题导致程序停止正常工作。请关闭程序。”

对话框上唯一的按钮是“关闭程序”。

我想查看异常消息和堆栈跟踪，以便诊断问题。

我尝试安装“windbg”附带的.Net SDK。我已经在 windbg 中运行了该程序，并设法让它说出“CLR 异常”。但是，我无法让 windbg 打印异常消息或堆栈跟踪。由于 DLL 加载消息，即使经过大量摆弄，它也不会加载 SOS 或 PSSCOR2。一定有更简单的方法！

（如果您的答案涉及windbg，请提供详细的分步说明，因为我已经尝试过这种方法但失败了。）

该应用程序是一个 .Net 3.5 应用程序。该机器安装了 .Net 3.5 和 .Net 4。事件日志中没有任何内容（我可以找到）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T14:19:58.267

**如果您无权访问源代码**，那么您就有问题了。异常应该在 Windows 事件中结束。也许异常被抑制了。

**如果您确实有权访问源代码**，则可以使用 TRY\CATCH 和 CATCH 包围起始代码并将异常信息打印到文件中：

*   留言
*   ex.InnerException.Message
*   ex.StackTrace

代码

```
 try
        {
            //Your code
        }
        catch (Exception ex)
        {
            //Log info to a file in same directory
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T21:09:22.177

*   通过将处理程序添加到以下事件，您可以在代码中的一处捕获未处理的异常。然后，您可以记录或执行一些其他操作。

    [AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

*   您可以从任务管理器生成故障转储（右键单击`Processes`选项卡中的条目并选择`Create Dump File`）并使用 WinDbg 加载它。运行该`!pe`命令应显示异常。您将需要构建中的 PDB 文件和崩溃机器中正确版本的 SOS DLL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T14:25:42.537

使用 ADPlus 获取应用程序的故障转储，并将故障转储加载到开发计算机上的 WinDbg 中：

[http://blogs.msdn.com/b/webdav_101/archive/2008/09/04/howto-generating-a-crash-dump-with-adplus.aspx](http://blogs.msdn.com/b/webdav_101/archive/2008/09/04/howto-generating-a-crash-dump-with-adplus.aspx)

[http://support.microsoft.com/kb/286350](http://support.microsoft.com/kb/286350)

您也可以尝试设置远程调试（假设您有源代码）：

[http://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx](http://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx)

# iphone - 将 NSDictionaries 数组写入文档？

> ID：11102904
> 
> 赞同：0
> 
> 时间：2012-06-19T14:15:35.633
> 
> 标签：iphone, objective-c, cocoa-touch, nsarray, foundation

我正在尝试将 NSDictionaries 的 NSArray 写入文档文件夹。我正在使用

```
BOOL fileWritten = [favoritesArray writeToFile:fullFileName atomically:NO];
    if (fileWritten == NO) {
        NSLog(@"Writing favoritesFileFailed");
    } 
```

以上不断返回NO。知道为什么这不会写吗？真正奇怪的是几天前同样的代码还在工作。我读到一些东西说 writeToFile 不能处理复杂的对象。NSDictionary 会是 writeToFile 无法保存的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:27:38.933

是的，如果您有自定义对象，我会做一些 NSCoding 魔术，然后您可以使用`[NSKeyedArchiver archivedDataWithRootObject:favoritesArray]`

因此，您需要确保该数组中的每个自定义类都符合`NSCoding` [Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)并且应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:33:19.783

将`NSDictionary`自身写入文件不是问题，但它保存的对象可能是。

通过使用简单的属性列表相关的 I/O 方法，您可以写出类的对象`NSArray`、`NSDictionary`、`NSData`、`NSString`、`NSNumber`、`NSDate`以及它们的任意组合（例如，字典数组）。

此外，它不会覆盖现有文件，所以你检查过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:35:18.507

首先检查`fullFileName`实际指向文档目录。

然后请记住，`[NSArray: writeToFile:atomically:]`只能写入可以保存在 plist 文件中的数据类型：NSString、NSData、NSDictionary 和 NSArray - 这些将被递归验证！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:20:17.420

尝试用一个简单的对象保存一个简单的数组。也许只有一个数字，看看问题是否仍然存在。如果没有，那么数组中的对象可能需要考虑保存在其他地方。

您是否尝试将其保存到`NSUserDefaults`? 如果一切都失败了，为什么不尝试呢？

# c# - 将外部（可删除）事件保存到数据库

> ID：11102914
> 
> 赞同：0
> 
> 时间：2012-06-19T14:16:10.593
> 
> 标签：c#, asp.net-mvc-3, fullcalendar

我正在尝试使用[FullCalendar](http://arshaw.com/fullcalendar/)，它显示得很好，并带有来自数据库和谷歌日历的提要更新事件。

但是我的问题是如何在页面上有一个保存按钮，当按下该按钮时，我可以将日历中的所有事件传回我的控制器，以便我可以将它们保存到数据库中？

一些代码（查看）：

```
$(document).ready(function () {
    /* initialize the external events
    -----------------------------------------------------------------*/
    $('#external-events div.external-event').each(function () {
        // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
        // it doesn't need to have a start or end
        var eventObject = {
            title: $.trim($(this).text()) // use the element's text as the event title
        };

        // store the Event Object in the DOM element so we can get to it later
        $(this).data('eventObject', eventObject);
        // make the event draggable using jQuery UI
        $(this).draggable({
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });
    });

    // -------- Calendar set up ...
    $('#calendar').fullCalendar({
        eventSources:
        [
            { // Uk holidays
                url: 'http://www.google.com/calendar/feeds/uk__en%40holiday.calendar.google.com/public/basic',
                color: 'blue',
                textColor: 'white'
            },
            { // booked availability
                url: '/avalibility/GetAvail',
                color: 'red'
            }
     ],
    //... more set up
}); 
```

控制器代码：

```
public JsonResult GetAvail(double start, double end)
{
    var startDateTime = FromUnixTimestamp(start);
    var endDateTime = FromUnixTimestamp(end);

    var events   = from e in db.PROJECT_CALENDAR
                        select e;

    var AvilList = new List<object>();
    foreach (var e in events)
    {
        AvilList.Add(
            new
            {
                id = e.ID,
                title = e.Title,
                description = e.Title,
                start = e.DateStart,
                end = e.DateEnd
            });
    }
    return Json(AvilList.ToArray(), JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:41:16.730

您是否尝试过使用`clientEvents`回调？像这样的东西：

```
var eventsFromCalendar = $('#calendar').fullCalendar( 'clientEvents'); 
```

这将返回一个包含所有 fullCalendar 事件对象的 JSON 数组。您可以将此数组传递给您的控制器，然后将它们存储到数据库中。

希望有帮助！

# linux - 流量整形工具

> ID：11102915
> 
> 赞同：1
> 
> 时间：2012-06-19T14:16:16.107
> 
> 标签：linux, ip, delay, traffic, trafficshaping

我必须执行一项测试，根据目标端口和 IP 地址的组合区分（延迟或部分丢弃）我的一些传出流量。

我正在考虑在我进行测试的 linux 机器上进行本地操作。

有什么工具可以做到这一点？它们有多灵活？

# backup - 无法启动 TFS 2010 备份计划向导

> ID：11102916
> 
> 赞同：0
> 
> 时间：2012-06-19T14:16:22.370
> 
> 标签：backup, tfs-power-tools

我们安装了 TFS 2010 和 SP1 以及 TFS 电动工具 2011 年 12 月。当我尝试从 TFS 管理控制台运行备份计划向导时，向导窗口永远不会显示。管理控制台冻结了一会儿，但当我关闭管理控制台时，会弹出一个对话框询问我是否要关闭向导。

有人遇到过这个问题吗？有没有办法在 TFS 管理控制台之外运行备份向导？

**编辑：**

重新安装 Power Tools 没有帮助，我也尝试过其他用户（同样的事情发生）。事件日志中没有报告错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:54:33.043

有一个开始菜单快捷方式：

> "C:\Program Files (x86)\Microsoft Team Foundation Server 2010 Power Tools\Team Foundation Server Backup Plan\TfsConfigPT.exe" 还原

如果它没有启动 UI，请尝试通过添加/删除程序修复 TFS Power Tools 安装。

还要检查[备份/恢复电动工具的已知问题](http://blogs.msdn.com/b/bharry/archive/2010/09/29/known-issues-with-the-backup-restore-power-tool.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:12:19.557

检查所有 SharePoint Web 应用程序设置是否正确。在 TFS 管理控制台中，转到 SharePoint Web 应用程序，然后为设置窗口中的每个 Web 应用程序单击验证路径。

[这个](http://social.msdn.microsoft.com/Forums/en-US/tfspowertools/thread/6674fe72-2c2e-4892-a3eb-2d75093c73af/)论坛帖子让我解决了我的问题。在我的情况下，问题不在于 Web 应用程序 URL，而在于中央管理 URL 的端口。我最近恢复了 TFS 和 SharePoint，旧端口号在这些设置中。正确设置端口号后，备份计划向导就能够成功启动。

# c# - 有没有办法从 Func 转换 功能 ?

> ID：11102919
> 
> 赞同：0
> 
> 时间：2012-06-19T14:16:29.820
> 
> 标签：c#, .net, generics

我有一个`Func<T, string>`我想转换为`Func<dynamic, string>`. 可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:23:58.297

干得好。当您的动态值不是 type 时，只需要决定您想要做什么`T`：

```
public Func<dynamic, string> ConvertToDynamicFunc<T>(Func<T, string> typedFunc)
{
    Func<dynamic, string> dynamicFunc = (input) =>
    {
        if (input is T)
            return typedFunc((T)input);

        return null; //or throw?
    };

    return dynamicFunc;
}

Func<int, string> typedFunc = (input) => input.ToString();
Func<dynamic, string> dynamicFunc = ConvertToDynamicFunc(typedFunc);
System.Console.WriteLine(dynamicFunc(10));//outputs "10";
System.Console.WriteLine(dynamicFunc(10.5));//outputs null since a double isn't an int (type T) or throw if you prefer; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T14:22:42.133

当然：

```
Func<T, string> input = ...
Func<dynamic, string> output = x => input(x); 
```

当然，如果你使用不兼容的类型执行委托，你会得到一个`RuntimeBinderException`.

# c++ - Visual Studio 2010 Live555

> ID：11102920
> 
> 赞同：0
> 
> 时间：2012-06-19T14:16:34.073
> 
> 标签：c++, visual-studio-2010, live555

我在使用 live555 开发时遇到问题。我已经使用 make 文件构建了 lib 文件和示例项目。但是，如果我尝试自己开发一些东西，那是行不通的。在包含头文件 liveMedia.hh、BasicUsageEnvironment.hh GroupsockHelper.hh（我将包含路径设置为所有 .hh 文件并将 libary-ath 设置为所有 lib 文件）后，我收到以下错误：

```
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(91): warning C4005: 'AF_IPX': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(460): Siehe vorherige Definition von 'AF_IPX'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(131): warning C4005: 'AF_MAX': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(479): Siehe vorherige Definition von 'AF_MAX'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(168): warning C4005: 'SO_DONTLINGER': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(402): Siehe vorherige Definition von 'SO_DONTLINGER'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(212): error C2011: 'sockaddr': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(485): Siehe Deklaration von 'sockaddr'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(390): error C2059: Syntaxfehler: 'Konstante'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(390): error C3805: 'Konstante': unerwartetes Token, es wurde entweder '}' oder ein ',' erwartet
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(524): warning C4005: 'IN_CLASSA': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(287): Siehe vorherige Definition von 'IN_CLASSA'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(530): warning C4005: 'IN_CLASSB': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(293): Siehe vorherige Definition von 'IN_CLASSB'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(536): warning C4005: 'IN_CLASSC': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(299): Siehe vorherige Definition von 'IN_CLASSC'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(547): warning C4005: 'INADDR_ANY': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(304): Siehe vorherige Definition von 'INADDR_ANY'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(549): warning C4005: 'INADDR_BROADCAST': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(306): Siehe vorherige Definition von 'INADDR_BROADCAST'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2def.h(583): error C2011: 'sockaddr_in': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(312): Siehe Deklaration von 'sockaddr_in'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(132): error C2011: 'fd_set': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(68): Siehe Deklaration von 'fd_set'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(167): warning C4005: 'FD_SET': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(102): Siehe vorherige Definition von 'FD_SET'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(176): error C2011: 'timeval': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(111): Siehe Deklaration von 'timeval'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(232): error C2011: 'hostent': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(167): Siehe Deklaration von 'hostent'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(245): error C2011: 'netent': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(180): Siehe Deklaration von 'netent'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(252): error C2011: 'servent': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(187): Siehe Deklaration von 'servent'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(264): error C2011: 'protoent': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(199): Siehe Deklaration von 'protoent'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(360): error C2011: 'WSAData': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(322): Siehe Deklaration von 'WSAData'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(458): error C2011: 'sockproto': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(494): Siehe Deklaration von 'sockproto'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(500): error C2011: 'linger': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(531): Siehe Deklaration von 'linger'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(513): warning C4005: 'SOMAXCONN': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(544): Siehe vorherige Definition von 'SOMAXCONN'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(542): warning C4005: 'FD_READ': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(562): Siehe vorherige Definition von 'FD_READ'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(545): warning C4005: 'FD_WRITE': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(563): Siehe vorherige Definition von 'FD_WRITE'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(548): warning C4005: 'FD_OOB': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(564): Siehe vorherige Definition von 'FD_OOB'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(551): warning C4005: 'FD_ACCEPT': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(565): Siehe vorherige Definition von 'FD_ACCEPT'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(554): warning C4005: 'FD_CONNECT': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(566): Siehe vorherige Definition von 'FD_CONNECT'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(557): warning C4005: 'FD_CLOSE': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(567): Siehe vorherige Definition von 'FD_CLOSE'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1578): error C2375: 'accept': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(742): Siehe Deklaration von 'accept'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1600): error C2375: 'bind': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(747): Siehe Deklaration von 'bind'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1619): error C2375: 'closesocket': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(752): Siehe Deklaration von 'closesocket'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1638): error C2375: 'connect': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(754): Siehe Deklaration von 'connect'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1659): error C2375: 'ioctlsocket': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(759): Siehe Deklaration von 'ioctlsocket'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1680): error C2375: 'getpeername': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(764): Siehe Deklaration von 'getpeername'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1701): error C2375: 'getsockname': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(769): Siehe Deklaration von 'getsockname'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1724): error C2375: 'getsockopt': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(774): Siehe Deklaration von 'getsockopt'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1745): error C2375: 'htonl': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(781): Siehe Deklaration von 'htonl'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1762): error C2375: 'htons': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(783): Siehe Deklaration von 'htons'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1780): error C2375: 'inet_addr': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(785): Siehe Deklaration von 'inet_addr'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1797): error C2375: 'inet_ntoa': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(787): Siehe Deklaration von 'inet_ntoa'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1815): error C2375: 'listen': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(789): Siehe Deklaration von 'listen'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1833): error C2375: 'ntohl': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(793): Siehe Deklaration von 'ntohl'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1850): error C2375: 'ntohs': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(795): Siehe Deklaration von 'ntohs'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1870): error C2375: 'recv': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(797): Siehe Deklaration von 'recv'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1895): error C2375: 'recvfrom': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(803): Siehe Deklaration von 'recvfrom'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1921): error C2375: 'select': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(811): Siehe Deklaration von 'select'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1945): error C2375: 'send': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(818): Siehe Deklaration von 'send'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1970): error C2375: 'sendto': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(824): Siehe Deklaration von 'sendto'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(1996): error C2375: 'setsockopt': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(832): Siehe Deklaration von 'setsockopt'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2018): error C2375: 'shutdown': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(839): Siehe Deklaration von 'shutdown'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2039): error C2375: 'socket': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(843): Siehe Deklaration von 'socket'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2063): error C2375: 'gethostbyaddr': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(850): Siehe Deklaration von 'gethostbyaddr'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2083): error C2375: 'gethostbyname': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(855): Siehe Deklaration von 'gethostbyname'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2101): error C2375: 'gethostname': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(857): Siehe Deklaration von 'gethostname'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2121): error C2375: 'getservbyport': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(861): Siehe Deklaration von 'getservbyport'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2141): error C2375: 'getservbyname': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(865): Siehe Deklaration von 'getservbyname'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2160): error C2375: 'getprotobynumber': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(869): Siehe Deklaration von 'getprotobynumber'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2178): error C2375: 'getprotobyname': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(871): Siehe Deklaration von 'getprotobyname'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2200): error C2375: 'WSAStartup': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(875): Siehe Deklaration von 'WSAStartup'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2219): error C2375: 'WSACleanup': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(879): Siehe Deklaration von 'WSACleanup'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2236): error C2375: 'WSASetLastError': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(881): Siehe Deklaration von 'WSASetLastError'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2253): error C2375: 'WSAGetLastError': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(883): Siehe Deklaration von 'WSAGetLastError'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2270): error C2375: 'WSAIsBlocking': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(885): Siehe Deklaration von 'WSAIsBlocking'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2287): error C2375: 'WSAUnhookBlockingHook': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(887): Siehe Deklaration von 'WSAUnhookBlockingHook'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2304): error C2375: 'WSASetBlockingHook': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(889): Siehe Deklaration von 'WSASetBlockingHook'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2321): error C2375: 'WSACancelBlockingCall': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(891): Siehe Deklaration von 'WSACancelBlockingCall'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2343): error C2375: 'WSAAsyncGetServByName': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(893): Siehe Deklaration von 'WSAAsyncGetServByName'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2370): error C2375: 'WSAAsyncGetServByPort': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(901): Siehe Deklaration von 'WSAAsyncGetServByPort'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2396): error C2375: 'WSAAsyncGetProtoByName': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(909): Siehe Deklaration von 'WSAAsyncGetProtoByName'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2421): error C2375: 'WSAAsyncGetProtoByNumber': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(916): Siehe Deklaration von 'WSAAsyncGetProtoByNumber'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2446): error C2375: 'WSAAsyncGetHostByName': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(923): Siehe Deklaration von 'WSAAsyncGetHostByName'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2473): error C2375: 'WSAAsyncGetHostByAddr': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(930): Siehe Deklaration von 'WSAAsyncGetHostByAddr'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2496): error C2375: 'WSACancelAsyncRequest': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(939): Siehe Deklaration von 'WSACancelAsyncRequest'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock2.h(2517): error C2375: 'WSAAsyncSelect': Neudefinition; unterschiedliche Bindung
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(941): Siehe Deklaration von 'WSAAsyncSelect'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(75): error C2079: 'sockaddr_gen::Address' verwendet undefiniertes struct 'sockaddr'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(76): error C2079: 'sockaddr_gen::AddressIn' verwendet undefiniertes struct 'sockaddr_in'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(119): warning C4005: 'IP_TOS': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(352): Siehe vorherige Definition von 'IP_TOS'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(120): warning C4005: 'IP_TTL': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(351): Siehe vorherige Definition von 'IP_TTL'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(121): warning C4005: 'IP_MULTICAST_IF': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(346): Siehe vorherige Definition von 'IP_MULTICAST_IF'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(122): warning C4005: 'IP_MULTICAST_TTL': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(347): Siehe vorherige Definition von 'IP_MULTICAST_TTL'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(123): warning C4005: 'IP_MULTICAST_LOOP': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(348): Siehe vorherige Definition von 'IP_MULTICAST_LOOP'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(124): warning C4005: 'IP_ADD_MEMBERSHIP': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(349): Siehe vorherige Definition von 'IP_ADD_MEMBERSHIP'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(125): warning C4005: 'IP_DROP_MEMBERSHIP': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(350): Siehe vorherige Definition von 'IP_DROP_MEMBERSHIP'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(126): warning C4005: 'IP_DONTFRAGMENT': Makro-Neudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(353): Siehe vorherige Definition von 'IP_DONTFRAGMENT'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(193): error C2079: '_SOCKADDR_INET::Ipv4' verwendet undefiniertes struct 'sockaddr_in'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2ipdef.h(700): error C2011: 'ip_mreq': 'struct' Typneudefinition
1>          C:\Programme\Microsoft SDKs\Windows\v7.0A\include\winsock.h(363): Siehe Deklaration von 'ip_mreq'
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(664): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(671): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(709): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(716): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(760): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(767): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(807): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>C:\Programme\Microsoft SDKs\Windows\v7.0A\include\ws2tcpip.h(814): error C3861: "WSASetLastError": Bezeichner wurde nicht gefunden.
1>c:\live\groupsock\include\NetCommon.h(35): warning C4005: 'EWOULDBLOCK': Makro-Neudefinition
1>          c:\Programme\Microsoft Visual Studio 10.0\VC\include\errno.h(132): Siehe vorherige Definition von 'EWOULDBLOCK'
1>c:\live\groupsock\include\NetCommon.h(36): warning C4005: 'EINPROGRESS': Makro-Neudefinition
1>          c:\Programme\Microsoft Visual Studio 10.0\VC\include\errno.h(104): Siehe vorherige Definition von 'EINPROGRESS'
1>c:\live\groupsock\include\NetCommon.h(37): warning C4005: 'EAGAIN': Makro-Neudefinition
1>          c:\Programme\Microsoft Visual Studio 10.0\VC\include\errno.h(50): Siehe vorherige Definition von 'EAGAIN'
1>c:\live\groupsock\include\NetCommon.h(38): warning C4005: 'EINTR': Makro-Neudefinition
1>          c:\Programme\Microsoft Visual Studio 10.0\VC\include\errno.h(43): Siehe vorherige Definition von 'EINTR' 
```

知道有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:40:24.170

您很可能与“windows.h”和“winsock2.h”包含冲突

```
#ifndef WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#endif

#include <windows.h>
#include <winsock2.h> 
```

更多信息在这里

[http://msdn.microsoft.com/en-us/library/ms737629(VS.85).aspx?ppud=4](http://msdn.microsoft.com/en-us/library/ms737629%28VS.85%29.aspx?ppud=4)

[C++ 重定义头文件 (winsock2.h)](https://stackoverflow.com/questions/1372480/c-redefinition-header-files)

# jquery - 为什么我在 jquerytabs 中的负载不起作用？

> ID：11102923
> 
> 赞同：0
> 
> 时间：2012-06-19T14:16:38.083
> 
> 标签：jquery, jquery-ui, jquery-tabs

我目前正在使用 jquery 选项卡，添加和删除它们。这是我的代码：

```
function addTab(){
                    contador++;
                    var categoria = "AppCategoria04";
                    var idA = "AIdTabs0"+contador;
                    var idLi = "liIdTabs0"+contador;
                    var idP = "#ecApp0"+contador;
                    var titulo = "Friends Discussions";
                    var template = '<li id="'+idLi+'">'+
                                        '<div class="'+categoria+'"></div>'+
                                        '<a id="'+idA+'" href="#{href}">#{label}</a>'+// Aquí va el onclick
                                        '<span class="ui-icon-close2"></span>'+
                                    '</li>';
                    $('#ecContenedorFolders').tabs({
                        load: function(event, ui) {
                            console.log("load");                                
                        },                      
                        tabTemplate: template,
                        panelTemplate: "<p><a>Panel Text here: "+contador+"</a></p>"
                    });                 
                    $("#ecContenedorFolders").tabs("add", idP, titulo);
                    $("#"+idLi).addClass("separacionTabs");
                    $("#"+idA).addClass("tabApp");  
                    /// Para poder cerrar el tab
                    removerApp();
} 
```

我的问题是我的加载功能似乎不起作用，并且在添加新选项卡或在选项卡之间切换时，我永远无法打印控制台。有谁知道为什么会这样？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:52:24.320

只有当您在选项卡中使用远程内容时才会触发加载事件。例如，如果您使用 AJAX 提取填充选项卡内容，则在提取完成后触发加载。

因此，此事件不适用于您上面的代码，因此永远不会触发。因此没有控制台日志。

# c# - 使用 C# 中的 SQL Server 存储过程插入 NULL DateTime

> ID：11102924
> 
> 赞同：3
> 
> 时间：2012-06-19T14:16:40.560
> 
> 标签：c#, sql-server-2008, datetime, stored-procedures

我编写了一个包含`DateTime`参数的 SQL Server 存储过程。此参数可以为 null 或包含有效的日期值。

所以我的变量在我的过程中的定义如下：

```
@piPurchase_Date DATETIME = NULL 
```

从 C# 我添加参数如下：

```
SqlParameter parameter = new SqlParameter("@piPurchase_Date", SqlDbType.DateTime);
parameter.Value=datePurchaseIssueDate.Checked ? datePurchaseIssueDate.Value : SqlDateTime.Null; 
```

到目前为止一切似乎都很好，但是当我在 DataAdaptor 上调用 Update 方法时，我收到以下错误：

> 无法将参数值从 SqlDateTime 转换为 DateTime。

有任何想法吗？

我正在使用 SQL Server 2008 和 C#4.0

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:21:12.697

是 -`DBNull.Value`在 C# 中使用：

```
SqlParameter parameter = new SqlParameter("@piPurchase_Date", SqlDbType.DateTime);
parameter.Value = datePurchaseIssueDate.Checked ? datePurchaseIssueDate.Value : DBNull.Value; 
```

将 NULL 传递给 SQL Server 存储过程

# python - numpy 数组之间的距离，按列

> ID：11102926
> 
> 赞同：8
> 
> 时间：2012-06-19T14:16:42.683
> 
> 标签：python, arrays, numpy

我有 2 个二维数组，其中列向量是特征向量。一个数组大小为 F x A，另一个数组大小为 F x B，其中 A << B。例如，对于 A = 2 和 F = 3（B 可以是任何值）：

```
arr1 = np.array( [[1, 4],
                  [2, 5],
                  [3, 6]] )

arr2 = np.array( [[1, 4, 7, 10, ..],
                  [2, 5, 8, 11, ..],
                  [3, 6, 9, 12, ..]] ) 
```

我想为`arr1`每个`arr2`可能的`arr2`. 列向量是相互独立的，所以我相信我应该计算每个列向量之间的距离`arr1`和从`i`到`i + A`从的列向量集合之间的距离，`arr2`并取这些距离的总和（虽然不确定）。

numpy 是否提供了一种有效的方法来执行此操作，还是我必须从第二个数组中获取切片，并使用另一个循环计算切片中每个列向量`arr1`与切片中相应列向量之间的距离？

为清楚起见，使用上述数组的示例：

```
>>> magical_distance_func(arr1, arr2[:,:2])
[0, 10.3923..]
>>> # First, distance between arr2[:,:2] and arr1, which equals 0.
>>> # Second, distance between arr2[:,1:3] and arr1, which equals 
>>> diff = arr1 - np.array( [[4,7],[5,8],[6,9]] )
>>> diff
[[-3, -3], [-3, -3], [-3, -3]]
>>> # this happens to consist only of -3's. Norm of each column vector is:
>>> norm1 = np.linalg.norm([:,0])
>>> norm2 = np.linalg.norm([:,1])
>>> # would be extremely good if this worked for an arbitrary number of norms
>>> totaldist = norm1 + norm2
>>> totaldist
10.3923... 
```

当然，转置数组也很好，如果这意味着可以在这里使用 cdist。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:13:15.303

如果我正确理解您的问题，这将起作用。知道`numpy`，可能有更好的方法，但这至少*相当*简单。我使用了一些人为的坐标来表明计算按预期工作。

```
>>> arr1
array([[0, 3],
       [1, 4],
       [2, 5]])
>>> arr2
array([[ 3,  6,  5,  8],
       [ 5,  8, 13, 16],
       [ 2,  5,  2,  5]]) 
```

`arr1`您可以通过`arr2`确保它们正确地相互广播来减去。我能想到的最好方法是进行转置并进行一些重塑。这些不创建副本——它们创建视图——所以这不是那么浪费。（`dist`虽然是副本。）

```
>>> dist = (arr2.T.reshape((2, 2, 3)) - arr1.T).reshape((4, 3))
>>> dist
array([[ 3,  4,  0],
       [ 3,  4,  0],
       [ 5, 12,  0],
       [ 5, 12,  0]]) 
```

现在我们要做的就是`numpy.linalg.norm`跨轴 1 应用。（您可以从多个[规范](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.norm.html)中进行选择）。

```
>>> numpy.apply_along_axis(numpy.linalg.norm, 1, dist)
array([  5.,   5.,  13.,  13.]) 
```

假设你想要简单的欧式距离，你也可以直接做；不确定这是否会更快或更慢，因此请尝试两者：

```
>>> (dist ** 2).sum(axis=1) ** 0.5
array([  5.,   5.,  13.,  13.]) 
```

* * *

根据您的编辑，我们只需要做一个小的调整。由于您想要成对测试列，而不是逐块测试，因此您需要一个滚动窗口。这可以通过相当简单的索引非常简单地完成：

```
>>> arr2.T[numpy.array(zip(range(0, 3), range(1, 4)))]
array([[[ 3,  5,  2],
        [ 6,  8,  5]],

       [[ 6,  8,  5],
        [ 5, 13,  2]],

       [[ 5, 13,  2],
        [ 8, 16,  5]]]) 
```

将其与其他技巧相结合：

```
>>> arr2_pairs = arr2.T[numpy.array(zip(range(0, 3), range(1, 4)))]
>>> dist = arr2_pairs - arr1.T
>>> (dist ** 2).sum(axis=2) ** 0.5
array([[  5\.        ,   5\.        ],
       [  9.69535971,   9.69535971],
       [ 13\.        ,  13\.        ]]) 
```

但是，从列表推导转换数组往往很慢。使用 stride_tricks 可能会更快——*再*[一次](http://www.scipy.org/Cookbook/GameOfLifeStrides)，看看哪一个最适合你的目的：

```
>>> as_strided(arr2.T, strides=(8, 8, 32), shape=(3, 2, 3))
array([[[ 3,  5,  2],
        [ 6,  8,  5]],

       [[ 6,  8,  5],
        [ 5, 13,  2]],

       [[ 5, 13,  2],
        [ 8, 16,  5]]]) 
```

这实际上操纵`numpy`了在一块内存上移动的方式，允许一个小数组模拟一个更大的数组。

```
>>> arr2_pairs = as_strided(arr2.T, strides=(8, 8, 32), shape=(3, 2, 3))
>>> dist = arr2_pairs - arr1.T
>>> (dist ** 2).sum(axis=2) ** 0.5
array([[  5\.        ,   5\.        ],
       [  9.69535971,   9.69535971],
       [ 13\.        ,  13\.        ]]) 
```

所以现在你有一个简单的二维数组，对应于每对列的距离。现在只需获取`mean`和调用`argmin`。

```
>>> normed = (dist ** 2).sum(axis=2) ** 0.5
>>> normed.mean(axis=1)
array([  5\.        ,   9.69535971,  13\.        ])
>>> min_window = normed.mean(axis=1).argmin()
>>> arr2[:,[min_window, min_window + 1]]
array([[3, 6],
       [5, 8],
       [2, 5]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:16:39.673

您可以使用 scipy.spatial.distance 中的 cdist 获取距离矩阵。一旦你有了距离矩阵，你就可以跨列求和并归一化以获得平均距离，如果那是你正在寻找的。

注意：cdist 不使用列，而是使用行来计算成对距离。

这里有一个使用“余弦”距离的示例：

```
from scipy.spatial.distance import cdist

arr1 = np.array( [[1, 7],
                 [4, 8],
                 [4, 0]] )

arr2 = array( [[1, 9, 3, 6, 2],
              [3, 9, 0, 2, 3],
              [6, 0, 2, 7, 4]] )

# distance matrix
D = cdist( arr1.transpose(), arr2.transpose(), 'cosine' )

# average distance array (each position corresponds to each column of arr1)
d1 = D.mean( axis=1 )

# average distance array (each position corresponds to each column of arr2)
d2 = D.mean( axis=0 )

# Results
d1 = array([ 0.23180963,  0.35643282])
d2 = array([ 0.31018485,  0.19337869,  0.46050302,  0.3233269 ,  0.18321265]) 
```

有很多距离可供选择。查看[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:44:47.333

scipy.spatial.distance.cdist ？

# magento - 添加其他 Magento 库存状态

> ID：11102927
> 
> 赞同：1
> 
> 时间：2012-06-19T14:16:55.373
> 
> 标签：magento, magento-1.6

有人知道如何在 Magento 1.6.2 中添加额外的库存状态吗？目前有现货或缺货。我正在尝试设置我的可配置产品，因此需要能够在产品页面上为用户提供下拉选择选项。

我们有真正“有货”的产品，所以没有问题。我们还有其他需要交货时间的产品，所以我将“缺货”改为“呼吁供货”。问题在于，它实际上是产品设置页面中的缺货选项。

由于我们必须选择商品缺货，因此它不会填充或显示可配置产品页面上的选择框。

有没有办法在产品设置页面中添加另一个库存状态？无需支付 250 美元的延期费用？或者，就脚本而言，有没有办法将当前的缺货选项标记为有货？我们没有其他理由使用缺货选项，因此在这种情况下修改它不是问题。

谢谢，比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:17:23.413

我们上周在 IRC 讨论过这个问题，这并不容易。问题是，库存状态被用作布尔值，因此，仅添加第三个不是一个好主意。你必须改变更多的东西。

我建议添加一个属性并使用它来添加状态。

# php - Magento 在添加到购物车时触发 JS

> ID：11102928
> 
> 赞同：2
> 
> 时间：2012-06-19T14:17:00.793
> 
> 标签：php, javascript, jquery, magento

我正在开发一个出现在鼠标悬停等上的新购物侧边栏。虽然我拥有所有基本功能并且正在处理我遇到问题的一件事如下。

一旦将项目添加到购物车并重新加载页面，我希望弹出窗口出现 x 秒（通过 js 函数）。

我很难找到将这个调用插入到 JS 的位置，或者一般添加到购物车的成功消息。

有人知道它的位置吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:44:42.767

如果这应该在新加载页面之前显示，您可以在元素上使用例如`onClick`事件。`addToCart`

如果应该显示它，则在新加载页面后，您需要一个`AddToCart`事件观察者，它在我认为设置一个变量`Session`并添加一个 js 触发器，如果​​该变量为真（并在此之后将其设置为假）。

# jquery - 在虚拟机上运行的浏览器中的媒体查询

> ID：11102929
> 
> 赞同：0
> 
> 时间：2012-06-19T14:17:02.137
> 
> 标签：jquery, css, internet-explorer, virtual-machine, media-queries

我有一个奇怪的问题，在我的网站上，我在右侧有一个固定的选项卡，右：0；当视口小于 X 宽时，我的媒体查询将其设置为不显示。

这在 ie6 以上的所有浏览器中都可以正常工作，但是我遇到的问题是，当我登录到虚拟机进行测试时（因为我的客户都在 VM 上使用 Web），似乎不再支持媒体查询并且显示没有设置为无？

有没有人遇到过这个问题或者知道我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:57:18.420

放弃了，最终使用条件语句来说明 IE 是否不打扰显示，愚蠢的计算机。

# solr - Lucene/Solr - 如何根据文档中的查询存在返回相关文档和作者？

> ID：11102941
> 
> 赞同：1
> 
> 时间：2012-06-19T14:17:40.797
> 
> 标签：solr, search-engine

我们已经成功实现了 Apache Solr 以在我们的对话系统中返回 x 个最相关的对话作为搜索结果。

每个对话 (node.nid) 都由评论 (comment.cid) 组成，每个对话/评论都由用户 (node.uid / comment.uid) 创作。

目前，Solr 配置为搜索所有对话内容（评论、用户、时间戳等）。我们希望扩展我们的搜索结果，不仅显示与查询最相关的对话框，还返回最相关的作者。

问题是，为了确定作者与查询的相关性，我们需要 Solr 来区分节点和评论，以及 node.uid 和 comment.uid 分别。

是否可以使用 Solr 返回不同类型的搜索结果：对话框和作者，例如首先显示与搜索查询相关的前 5 个作者，然后显示与同一查询相关的前 50 个相关查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:39:56.650

是的，可以使用 Solr 返回不同类型的搜索结果。Solr 有一个开放的模式，这意味着您可以在 Solr 中索引任何您想要的内容，只要每个文档都有一个唯一的 id。因此，您可以在同一个 Solr 索引中索引作者和对话。它们可能应该有不同的字段（例如作者姓名和作者的对话文本，只是对话的对话文本）。

我相信[DisMax 查询模式](http://wiki.apache.org/solr/DisMax)可能会帮助您以不同的方式对作者和对话进行评分。

# cuda - 设备函数指针作为结构成员

> ID：11102945
> 
> 赞同：0
> 
> 时间：2012-06-19T14:18:04.523
> 
> 标签：cuda, gpu

我有这个（工作）CPU代码：

```
#define NF 3
int ND;

typedef double (*POT)(double x, double y);

typedef struct {
    POT pot[NF];
} DATAMPOT;

DATAMPOT *datampot;

double func0(double x, double y);
double func1(double x, double y);
double func2(double x, double y);

int main(void)
{
    int i;

    ND=5;
    datampot=(DATAMPOT *)malloc(ND*sizeof(DATAMPOT));

    for(i=0;i<ND;i++){
        datampot[i].pot[0]=func0;
        datampot[i].pot[1]=func1;
        datampot[i].pot[2]=func2;
    }

    return 0;
} 
```

现在我尝试这样的 GPU 版本

```
#define NF 3
int ND;

typedef double (*POT)(double x, double y);

typedef struct {
    POT pot[NF];
} DATAMPOT;

DATAMPOT *dev_datampot;

__device__ double z_func0(double x, double y);
__device__ double z_func1(double x, double y);
__device__ double z_func2(double x, double y);

__global__ void assign(DATAMPOT *dmp, int n)
{
    int i;

    for(i=0;i<n;i++){
        (dmp+i)->pot[0]=z_func0;
        (dmp+i)->pot[1]=z_func1;
        (dmp+i)->pot[2]=z_func2;
    }

}

int main(void)
{
    int i;

    ND=5;
    cudaMalloc((void**)&dev_datampot,ND*sizeof(DATAMPOT));

    assign<<<1,1>>>(dev_datampot,ND);

    return 0;
} 
```

但是设备函数指针的分配不起作用。错误在哪里？以及如何纠正？非常感谢你提前。米歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:42:17.070

根据[CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)，

> **D.2.4.3 函数指针**
> 
> 主机代码支持指向函数的函数指针`__global__`，但设备代码不支持。
> 
> `__device__`仅在为计算能力 2.x 的设备编译的设备代码中支持指向函数的函数指针。
> 
> 不允许`__device__`在主机代码中获取函数的地址。

我的猜测是您正在为低于 2.0 的计算能力进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:12:11.347

希望这会对某人有所帮助

```
#define NF 3
int ND;

typedef double (*POT)(double x, double y);

typedef struct {
    POT pot[NF];
} DATAMPOT;

DATAMPOT *dev_datampot;

__device__ double z_func0(double x, double y);
__device__ double z_func1(double x, double y);
__device__ double z_func2(double x, double y);

//Static pointers to the above device functions    
__device__ POT z_func0_pointer=z_func0;  
__device__ POT z_func1_pointer=z_func1;
__device__ POT z_func2_pointer=z_func2;

int main(void)
{
    int i;
    POT pot_pointer;

    ND=5;
    cudaMalloc((void**)&dev_datampot,ND*sizeof(DATAMPOT));

    for(i=0;i<ND;++i){  
     cudaMemcpyFromSymbol( &pot_pointer,z_func0_pointer, sizeof( POT ) );
  cudaMemcpy(&dev_datampot[i].pot[0]),&pot_pointer,sizeof(POT),cudaMemcpyHostToDevice);

     cudaMemcpyFromSymbol( &pot_pointer,z_func1_pointer, sizeof( POT ) );
  cudaMemcpy(&dev_datampot[i].pot[1]),&pot_pointer,sizeof(POT),cudaMemcpyHostToDevice);

     cudaMemcpyFromSymbol( &pot_pointer,z_func2_pointer, sizeof( POT ) );
  cudaMemcpy(&dev_datampot[i].pot[2]),&pot_pointer,sizeof(POT),cudaMemcpyHostToDevice);
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T14:26:26.607

你的编译器选项是什么？在计算能力为 1.3 或更低的设备上，设备函数必须内联，因此您不能使用设备函数指针。

# c++ - 仅在日食中不承认在一个位置声明 ofstream

> ID：11102952
> 
> 赞同：1
> 
> 时间：2012-06-19T14:18:15.773
> 
> 标签：c++, eclipse

我有一个大型程序正在运行，而不是一个 .h 文件，当我尝试声明私有 ofstream 时，它给了我“无效使用未定义类型”的错误。在 Eclipse 中，我还收到关于“声明 struct std::ofstream”的错误，带有外部位置 /user/include/c++/4.1.2/iosfwd（我检查了一下，这是定义 ofstream 的行/位置）。我已经包含了 iostreams 和 fstreams。

如果我尝试将声明更改为使用 ifstream 或 fstream 我会得到相同的错误，只是现在我尝试使用的任何对象类型的声明都会出错。

为了让事情变得更烦人，我在程序的其他地方使用了 fstream 和 ifstreams。有一次，我非常生气，以至于我使用 ifstream 将有效 .h 文件的全部内容复制到 .h 文件中，这给了我一个错误……我得到了同样的错误。当唯一的变化是文件名和 if_def 宏时，我不知道为什么一个文件中有效的代码在另一个文件中无效。这两个 .h 文件位于同一目录中。

很抱歉，我无法发布要审核的代码。它是在另一台计算机上编写的，无法将代码从计算机 A 传输到 B（也无法访问互联网）。但是，如果您能提供一个建议，说明为什么我会在不查看代码的情况下测试此错误，我将不胜感激。

编辑：在玩了一些之后，我知道如果我从它的 CPP 文件中删除 .H 文件，错误就会消失。所以如果文件名为 VectorOutput.h。如果我从 VectorOutput.cpp 中删除#include，即使我将它包含在其他文件中，eclipse 也不会抱怨。如果我以任何方式更改 VectorOutput.cpp 的名称，错误也会消失。这是……奇怪的。我不知道这可能意味着什么，据我所知，文件的名称和具体位置应该没有任何意义。通过重命名文件，我暂时摆脱了这个问题，但如果有人猜到的话，我真的很想知道他的根本原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:29:27.100

你提供的东西很少。我会检查你的命名空间。检查您是否使用前缀 std:: 正确声明了您的类型。

编辑：实际上，如果您在标头中*使用*ofstream （并且因为您将其声明为成员），则必须包含 fstream 标头。iosfwd 仅适用于前向声明类型。

# installation - 为什么 Windows Installer 以错误的顺序安装我的补丁转换？

> ID：11102953
> 
> 赞同：1
> 
> 时间：2012-06-19T14:18:26.847
> 
> 标签：installation, windows-installer, installshield, patch

这似乎还没有引起问题，但这是我真正想了解的事情。

基本上，我们的产品有四个版本：1.0 (2.6.0.0)、1.0.1 (2.6.1.0)、1.1.1 (2.6.3.0) 和 1.1.2 (2.6.4.0)。我们只是在测试 1.1.2 的完整安装程序和补丁安装程序。

我们看到的奇怪的事情是，当从 1.0 -> 1.1.2 应用补丁时，安装程​​序的日志显示它首先选择使用 1.0.1 -> 1.1.2 补丁转换，这对我来说很愚蠢因为它可以使用从 1.0 -> 1.1.2 的转换。日志如下：

```
SequencePatches starts. Product code: {A9206E66-68A6-4A64-8ECA-F96D2635FB33}, Product version: 2.6.0.0, Upgrade code: {58142252-3B0E-44CA-99EC-F9FB3C4D976E}, Product language 1033
MSI (c) (A4:18) [14:11:53:235]: PATCH SEQUENCER: verifying the applicability of minor upgrade patch C:\DOCUME~1\Testuser\LOCALS~1\Temp\{3E3C7709-FF95-48AF-8836-5D62996F0FD4}\[productname]112enu_x86.msp against product code: {A9206E66-68A6-4A64-8ECA-F96D2635FB33}, product version: 2.6.0.0, product language 1033 and upgrade code: {58142252-3B0E-44CA-99EC-F9FB3C4D976E}
MSI (c) (A4:18) [14:11:53:235]: PATCH SEQUENCER: minor upgrade patch C:\DOCUME~1\Testuser\LOCALS~1\Temp\{3E3C7709-FF95-48AF-8836-5D62996F0FD4}\[productname]112enu_x86.msp is applicable.
MSI (c) (A4:18) [14:11:53:245]: SequencePatches returns success.
MSI (c) (A4:18) [14:11:53:245]: Final Patch Application Order:
MSI (c) (A4:18) [14:11:53:245]: {1721243D-5A87-4972-9226-E87EE0B87A08} - C:\DOCUME~1\Testuser\LOCALS~1\Temp\{3E3C7709-FF95-48AF-8836-5D62996F0FD4}\[productname]112enu_x86.msp
MSI (c) (A4:18) [14:11:53:245]: {1721243D-5A87-4972-9226-E87EE0B87A08} - C:\DOCUME~1\Testuser\LOCALS~1\Temp\{3E3C7709-FF95-48AF-8836-5D62996F0FD4}\[productname]112enu_x86.msp
MSI (c) (A4:18) [14:11:53:245]: Machine policy value 'DisablePatch' is 0
MSI (c) (A4:18) [14:11:53:245]: Machine policy value 'AllowLockdownPatch' is 0
MSI (c) (A4:18) [14:11:53:245]: Machine policy value 'DisableLUAPatching' is 0
MSI (c) (A4:18) [14:11:53:245]: Machine policy value 'DisableFlyWeightPatching' is 0
MSI (c) (A4:18) [14:11:53:245]: Turning off patch optimization. {1721243D-5A87-4972-9226-E87EE0B87A08} patch is not authored to support it.
MSI (c) (A4:18) [14:11:53:245]: Looking for patch transform: 101enuTo112enu

... More stuff ...

MSI (c) (A4:18) [14:11:53:265]: Disallowing uninstallation of patch {1721243D-5A87-4972-9226-E87EE0B87A08} because it adds new entries to table CreateFolder
MSI (c) (A4:18) [14:11:53:265]: Note: 1: 2205 2:  3: PatchPackage 
MSI (c) (A4:18) [14:11:53:265]: TRANSFORM: 'PatchPackage' table is missing or empty.  No pre-transform fixup necessary.
MSI (c) (A4:18) [14:11:53:265]: TRANSFORM: Applying regular transform to database.

... More stuff ...

MSI (c) (A4:18) [14:11:53:265]: Looking for patch transform: 10enuTo112enu
DEBUG: Error 2748:  Transform 10enuTo112enu invalid for package C:\WINDOWS\Installer\882d.msi. Expected product version <= 2.6.0.0, found product version 2.6.4.0.
1: 2748 2: 10enuTo112enu 3: C:\WINDOWS\Installer\882d.msi 4: 2.6.0.0 5: 2.6.4.0 
MSI (c) (A4:18) [14:11:53:265]: Skipping validation for patch transform #10enuTo112enu.  Will not apply because previous transform was invalid
MSI (c) (A4:18) [14:11:53:265]: Looking for patch transform: 111enuTo112enu
DEBUG: Error 2748:  Transform 111enuTo112enu invalid for package C:\WINDOWS\Installer\882d.msi. Expected product version <= 2.6.3.0, found product version 2.6.4.0.
1: 2748 2: 111enuTo112enu 3: C:\WINDOWS\Installer\882d.msi 4: 2.6.3.0 5: 2.6.4.0 
MSI (c) (A4:18) [14:11:53:265]: Skipping validation for patch transform #111enuTo112enu.  Will not apply because previous transform was invalid 
```

那么为什么它选择先应用错误的变换呢？我猜它无论如何都会应用它，因为当它进行正确的转换时，它知道产品版本已更新到 2.6.4.0。

我注意到在之前的 setups 文件夹下的补丁设计器中，顺序确实是 1.0.1、1.0、1.1.1。这肯定不是确定 Windows Installer 运行补丁转换的顺序吗？！

如果有人知道这种行为，或者可以指出我正确的方向，我将非常感激！:)

谢谢！

**更新**

我认为这已经成为一个问题！:( 我认为当文件表更新时，转换的错误顺序会导致问题。因为它认为它是从 1.0.1 -> 1.1.2 转换的，所以它假设文件表中有一行，只需要修改，当我们真的从 1.0 -> 1.1.2 转换并且该行不存在于表中并且需要添加时！

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:20:24.303

补丁转换顺序导致了我遇到的问题！

似乎默认情况下，InstallShield 将允许将补丁转换安装在比被修补的版本更早的任何版本上。换句话说，我的所有三个转换在 Windows Installer 眼中都是有效的，可用于我在目标机器上的 1.0 安装！

为什么这是我不知道！谁愿意将 1.0.1 -> 1.1.2 转换应用到 1.0 安装？！？！？！真的？？！？！？！

无论如何，如果您想将转换应用于构建转换的版本（是的，奇怪的情景！），应该使用的设置是在您选择以前的设置和高级选项卡时更改*版本关系属性。*

它需要更改为*Previous Setup Version = Latest Setup Version*。哦，不要费心看 InstallShield 描述这个属性的解释，因为它是完全错误和误导的！

![更改版本关系属性](../Images/3d82bf5549643145a2a854d41e6f2af9.png)

此更改现在意味着 Windows Installer 将为给定的安装版本查找正确的转换（即，它将选择 1.0 -> 1.1.2 转换来安装 1.0）。

老实说，我仍然无法相信这种行为不是默认行为，我对 Install Shield 给出的完全误导性的描述感到震惊和震惊。

还有呼吸......

# python - 以两种不同的方式拼接字符串

> ID：11102958
> 
> 赞同：-1
> 
> 时间：2012-06-19T14:18:42.260
> 
> 标签：python, string

```
import re , strings , os ,sys
sentence = "abcdefghijkl"
for i in range(0,len(sentence),3):
    twoletters = sentence[i:i+2] + sentence[i+1:i+3]
    print twoletters 
```

这给我：

```
abbc
deef
ghhi
jkkl 
```

我想要的地方：

```
ab
bc
cd
de
ef
fg
gh
hi
ij
jk
kl 
```

这种拼接怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:23:28.873

```
>>> sentence = "abcdefghijkl"
>>> [sentence[i:i+2] for i in range(len(sentence) - 1)]
['ab', 'bc', 'cd', 'de', 'ef', 'fg', 'gh', 'hi', 'ij', 'jk', 'kl'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:28:50.083

与您的想法保持一致但简化，我将执行以下操作

```
for i in range(0, len(sentence)-1):
    print sentence[i] + sentence[i + 1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T14:29:02.363

```
>>>sentence = "abcdefghijkl"
>>>for i in range(0, len(sentence)-1):
>>>    print sentence[i:i+2]
ab
bc
cd
de
ef
fg
gh
hi
ij
jk
kl 
```

或使用[列表理解](http://www.python.org/dev/peps/pep-0202/)

```
>>>[sentence[i:i+2] for i in range(0, len(sentence)-1)]
['ab', 'bc', 'cd', 'de', 'ef', 'fg', 'gh', 'hi', 'ij', 'jk', 'kl'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T06:04:50.703

```
[sentence[i:i+2] for i in range(0,len(sentence)-1,1)] 
```

['ab'，'bc'，'cd'，'de'，'ef'，'fg'，'gh'，'hi'，'ij'，'jk'，'kl']

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T15:29:34.820

```
>>> from itertools import tee, izip, islice
>>> sentence = "abcdefghijkl"
>>> x, y = tee(sentence)
>>> y = islice(y, 1, None)
>>> for a,b in izip(x, y):
...     print a + "" + b 
```

# java - 使用 java 删除 cookie

> ID：11102960
> 
> 赞同：6
> 
> 时间：2012-06-19T14:18:52.530
> 
> 标签：java, servlets, cookies

我写了下一个代码：

```
public void delete(MyType instance) {
        List<MyType> myList = this.getAll();

        Cookie[] cookies = request.getCookies();
        List<Cookie> cookieList = new ArrayList<Cookie>();
        cookieList = Arrays.asList(cookies);
        for(Cookie cookie:cookieList) {
            if(Long.valueOf(cookie.getValue()) == instance.getId()) {
                cookieList.remove(cookie);
            }
        }
        myList.remove(instance);
        cookies = (Cookie[]) cookieList.toArray();
} 
```

下一个问题是：当我从 cookielist 中删除 cookie 时，如何将更新的 cookielist（没有删除的 cookie）放回客户端？request 或 response 没有任何`*.setCookies();`方法。还是cookies会自动更新？此致。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T14:23:22.243

您需要在`null`响应`0`中通过[`HttpServletResponse#addCookie()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#addCookie%28javax.servlet.http.Cookie%29).

```
cookie.setValue(null);
cookie.setMaxAge(0);
cookie.setPath(theSamePathAsYouUsedBeforeIfAny);
response.addCookie(cookie); 
```

* * *

**与具体问题无关**，您根本不需要将数组按摩到列表并返回。增强的 for 循环同样适用于数组。此外，`==`用于比较`Long`值仅适用于 -128 和 127 之间的值。您需要`equals()`。总而言之，该方法可能如下所示：

```
public void delete(MyType instance) {
    Cookie[] cookies = request.getCookies();

    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if (Long.valueOf(cookie.getValue()).equals(instance.getId())) {
                cookie.setValue(null);
                cookie.setMaxAge(0);
                cookie.setPath(theSamePathAsYouUsedBeforeIfAny);
                response.addCookie(cookie);
            }
        }
    }
} 
```

顺便说一句，看到`request`并`response`成为某个类的实例变量是很可怕的。您确定特定类是线程安全的吗？要了解 servlet 和线程安全，您可能会发现这个答案很有帮助：[servlet 如何工作？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)。

# java - 确保 String 可以在 java 中存储为 int 的最佳方法是什么

> ID：11102965
> 
> 赞同：7
> 
> 时间：2012-06-19T14:19:01.403
> 
> 标签：java, string, parseint

我正在制作一个基于 Web 的应用程序，并且我有文本字段，其中值存储为字符串。问题是某些文本字段将被解析为整数，并且您可以在字符串中存储比在整数中更大的数字。我的问题是，确保可以将 String 编号解析为 int 而不会出错的最佳方法是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T14:21:44.210

您可以为此使用 try/catch 结构。

```
try {
    Integer.parseInt(yourString);
    //new BigInteger(yourString);
    //Use the above if parsing amounts beyond the range of an Integer.
} catch (NumberFormatException e) {
    /* Fix the problem */
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T14:26:12.617

Integer.parseInt 方法检查 javadoc 明确说明的范围：

```
An exception of type NumberFormatException is thrown if any of the following situations occurs:
The first argument is null or is a string of length zero.
The radix is either smaller than Character.MIN_RADIX or larger than Character.MAX_RADIX.
Any character of the string is not a digit of the specified radix, except that the first character may be a minus sign '-' ('\u002D') provided that the string is longer than length 1.
The value represented by the string is not a value of type int.
Examples:
 parseInt("0", 10) returns 0
 parseInt("473", 10) returns 473
 parseInt("-0", 10) returns 0
 parseInt("-FF", 16) returns -255
 parseInt("1100110", 2) returns 102
 parseInt("2147483647", 10) returns 2147483647
 parseInt("-2147483648", 10) returns -2147483648
 parseInt("2147483648", 10) throws a NumberFormatException
 parseInt("99", 8) throws a NumberFormatException
 parseInt("Kona", 10) throws a NumberFormatException
 parseInt("Kona", 27) returns 411787 
```

所以正确的方法是尝试解析字符串：

```
try {
    Integer.parseInt(str);
} catch (NumberFormatException e) {
    // not an int
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T14:28:23.863

将字符串解析为 BigInteger 而不是常规 Integer。这可以保持更高的值。

```
BigInteger theInteger = new BigInteger(stringToBeParsed); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T14:21:57.477

您可以检查您的代码：

*   将 String 转换为 long。
*   将 long 与整数（Integer 类中的常量）的最大值进行比较。
*   如果 long 大于它，你就知道它不能被解析成 int 而不溢出。
*   如果它小于或等于它，请将您的 long 转换为 int。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T14:22:18.117

始终在`try catch`块中解析字符串，因此如果发生任何异常或错误，您就会知道 String 中存在一些错误以进行 int 解析。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T14:29:40.067

您可以使用[Apache Commons Lang](http://commons.apache.org/lang/)。

```
import org.apache.commons.lang.math.NumberUtils;

NumberUtils.toInt( "", 10 );   // returns 10
NumberUtils.toInt( null, 10 ); // returns 10
NumberUtils.toInt( "1", 0 );  // returns 1 
```

如果字符串不是数值，则第二个数字是默认值。第一个参数是您要转换的字符串。

对于大量我会做以下

```
BigInteger val = null;
try {
  val = new BigInteger( "1" );
} catch ( NumberFormatException e ) {
  val = BigInteger.ZERO;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T14:30:12.987

那这个呢 ？

```
BigInteger bigInt = BigInteger(numberAsString);
boolean fitsInInt = ( bigInt.compareTo( BigInteger.valueOf(bigInt.intValue()) ) == 0; 
```

# android - 一个 android 活动的唯一 ID

> ID：11102967
> 
> 赞同：6
> 
> 时间：2012-06-19T14:19:03.960
> 
> 标签：android, android-activity

我需要获取一个 android 活动实例的唯一 ID。我想取activitymanager在日志中写入的字符串（例如：ActivityManager: Activity pause timeout for HistoryRecord{ **450495a0** ...}），但不知道如何获取。

有人知道我怎么能得到这个字符串吗？或者每个活动实例是否有另一个唯一 ID？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T14:25:03.130

也许你可以使用 Activity 的 hashCode。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-12T06:44:06.133

项目中的每一个地方：

```
 MainActivity.class.hashCode(); 
```

在活动中

```
 this.hashCode(); 
```

您甚至可以`hashCode`从上下文中获取

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-11T06:15:57.897

正如另一个答案中正确指出的那样，操作系统可以重新创建活动，因此使用`Activity.hashCode()`不是一个可靠的解决方案。此外，整个应用程序进程可以重新创建（例如在权限更改后），这意味着任何运行时/非持久化 ID 都不可信。正确的解决方案是在 期间手动生成唯一 ID `onCreate(Bundle)`（或从 读取`savedInstanceState`，如果存在）并在`onSaveInstanceState(Bundle)`.

另一个问题是生成真正唯一的 ID。最简单和最可靠的解决方案也是保留一个静态计数器，但是由于应用程序进程可能会死掉，因此需要多加注意。

为了尽量减少样板代码，我整理了一个专门的类：

```
public class ActivityUUID {

    private static final String INSTANCE_DATA_ID = "BwsKCwYBDg8GAQ4LBAgAAA"; // NOTE Any globally unique ID
    private static final String UUID_NODE_ID = "a";
    private static final long INVALID_UUID = 0;

    private static long _lastActivityUUID = INVALID_UUID; // NOTE All activity callbacks are guaranteed to be made from UI thread, so no synchronization is required
    private static SharedPreferences _persistentData;

    private final long _uuid;

    public ActivityUUID(Context context, Bundle savedInstanceState) {
        _uuid = readUUID(context, savedInstanceState);
    }

    public long get() {
        return _uuid;
    }

    public void onSaveInstanceState(Bundle outState) {
        outState.putLong(INSTANCE_DATA_ID, _uuid);
    }

    private static long readUUID(Context context, Bundle savedInstanceState) {
        long result = (savedInstanceState != null) ? savedInstanceState.getLong(INSTANCE_DATA_ID, INVALID_UUID) : INVALID_UUID;
        return (result != INVALID_UUID) ? result : generateUUID(context);
    }

    private static long generateUUID(Context context) {
        if (_persistentData == null) {
            _persistentData = context.getSharedPreferences(INSTANCE_DATA_ID, Context.MODE_PRIVATE);
            _lastActivityUUID = _persistentData.getLong(UUID_NODE_ID, INVALID_UUID);
        }

        long result = ++_lastActivityUUID;
        if (result != INVALID_UUID) {
            _persistentData.edit().putLong(UUID_NODE_ID, result).apply();
        } else {
            throw new RuntimeException("You have somehow managed to create a total of 9223372036854775807 activities during lifetime of your app! =)");
        }
        return result;
    }

} 
```

用法很简单：

```
private ActivityUUID _activityUUID;

@Override
public final void onCreate(Bundle savedInstanceState) {
    _activityUUID = new ActivityUUID(this, savedInstanceState);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    _activityUUID.onSaveInstanceState(outState);
}

// ...somewhere else in the code
long activityUUID = _activityUUID.get(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T03:35:50.803

`hashCode()`方法中`Activity`，返回一个android活动实例的唯一id，但`getTaskId()`不能返回唯一值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-27T21:06:27.373

我知道这个问题有点过时了，但出于某些原因我需要这个。

如果您想保留更长时间，使用活动的 hashCode 方法不是一个好主意。众所周知，活动可以由操作系统清理。这意味着，当它们被重新创建时，它们可能具有与之前的实例不同的 hashCode。一个解决方案（如果你想保留一个整数作为 id）可能是 getIntent().hashCode()

# c++ - 我可以使用什么库来配置大多数或所有 GigE 和/或 Camera Link 相机？

> ID：11102973
> 
> 赞同：3
> 
> 时间：2012-06-19T14:19:29.453
> 
> 标签：c++, image, image-processing, opencv

GenICam 似乎是最好的选择，但是文档很少。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:26:32.890

它并不便宜——但我能想到的唯一一个透明地支持 Gig-E 和 Cameralink 的库是[Matrox Imaging Library MIL](http://www.matrox.com/imaging/en/products/software/)。

它也是大多数相机链接相机标记支持配置文件的平台

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T08:04:28.580

大多数库都建立在 GenICam 的参考实现之上——可从他们的网站免费下载。如果您只想配置相机，Pleora 有一个查看器，可以让您访问几乎所有在相机上声明的节点/设置。如果您想通过程序进行图像采集或配置相机，他们的 SDK 许可证也比 Matrox 便宜得多。

# c# - 注册和登录页面使用 https asp.net 4.0

> ID：11102974
> 
> 赞同：1
> 
> 时间：2012-06-19T14:19:35.463
> 
> 标签：c#, asp.net, https

我有一个使用 Godaddy 的网络主机，并且我在我的域中带来了一个 ssl 证书。有没有简单的方法让 login.aspx 页面和 register.aspx 页面转到 https？我不想明确地说重定向（“https://domain/login.aspx）。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:43:18.770

最简单的方法是使用以下代码修改这些页面（如果不在本地运行，则重定向到 https，并且不是安全连接）：

```
if (!Request.IsLocal && !Request.IsSecureConnection)
{
    string redirectUrl = Request.Url.ToString().Replace("http:", "https:");
    Response.Redirect(redirectUrl);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:58:56.157

通常最简单的解决方案是最好的，但如果你想疯了......

您可以编写一个 HTTP 模块来确保将特定页面列表重定向到 SSL。

```
public class EnsureSslModule : IHttpModule
{
    private static readonly string[] _pagesToEnsure = new[] { "login.aspx", "register.aspx" };

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += OnBeginRequest;
    }

    public void OnBeginRequest(object sender, EventArgs e)
    {
        var application = (HttpApplication)sender;
        var context = application.Context;

        var url = context.Request.RawUrl;

        if (!context.Request.IsSecureConnection 
                && _pagesToEnsure.Any(page => url.IndexOf(page, StringComparison.InvariantCultureIgnoreCase) > -1))
        {
            var builder = new UriBuilder(url);

            builder.Scheme = Uri.UriSchemeHttps;

            context.Response.Redirect(builder.Uri
                .GetComponents(UriComponents.AbsoluteUri & ~UriComponents.Port,
                               UriFormat.UriEscaped), true);
        }
    }
} 
```

# css - CSS3 PIE.htc 不工作

> ID：11102975
> 
> 赞同：2
> 
> 时间：2012-06-19T14:19:37.313
> 
> 标签：css, pie-chart

我似乎无法让 PIE.htc 在这个网站上工作。

这是我的CSS：

```
section#feature {
    -webkit-border-top-left-radius: 4px;
    -webkit-border-top-right-radius: 4px;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-topright: 4px;
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    behavior: url(http://sykeshr.co.uk/temp/PIE.htc);
} 
```

任何想法我做错了什么？

您可以在此处查看该网站：[http ://www.sykeshr.co.uk/temp/](http://www.sykeshr.co.uk/temp/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T14:27:36.173

**问题1：**

您提供了一个包含“www”的网站链接，因此在您的代码中您需要使用“www”进行调用：

```
behavior: url(http://www.sykeshr.co.uk/temp/PIE.htc) 
```

但是，这是不鼓励的，因为如果用户访问您的网站时没有“www”，那么 CSS3 饼图将再次不起作用。

您应该改用相对 url（它将相对于调用您的 css 文件的 html 文件）：

```
behavior: url(../temp/PIE.htc) 
```

或者：

```
behavior: url(PIE.htc) 
```

**问题2：**

CSS3 Pie仅支持简写版本`border-radius`（无边框左上角半径，无前缀边框半径样式等）：[CSS3 Pie Supported Features](http://css3pie.com/documentation/supported-css3-features/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T17:38:32.930

我找到了解决 PIE.htc 问题的解决方案。

1.  从他们的网站获取 PIE.htc
2.  将文件直接放在 /webapp 文件夹下，这是您的根文件夹。
3.  称其为行为：url（PIE.htc）

我花了 2 周的时间让这个为 IE8 工作，让我的 css3 盒子有圆角。css3pie.com 不会告诉您该文件的确切放置位置。

对我来说，将文件放在 css 文件夹下不起作用。

***如果它有助于我使用 GWT 开发我的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T04:49:39.250

尝试使用以下路径

```
行为：url（//yoursite.com/path/to/PIE.htc）；
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T20:23:23.880

我发现它只适用于我的服务器，如果

1.  我称 Pie 为行为： url(PIE.htc);
2.  如果 PIE.htc 与我的 css 文件位于同一目录中。

希望这可以帮助。

# iphone - 如何使用正则表达式获取字符串中的子字符串

> ID：11102980
> 
> 赞同：0
> 
> 时间：2012-06-19T14:19:49.640
> 
> 标签：iphone

> **可能重复：**
> [根据条件从 iphone 中的字符串中检索子字符串](https://stackoverflow.com/questions/11100379/retrieving-the-substring-based-on-condition-from-a-string-in-iphone)
> [识别 iphone 中两个字符串之间的字符串](https://stackoverflow.com/questions/11102005/identifying-the-string-in-between-two-strings-in-iphone)

我是 iPhone 新手。我有一点疑问，我有很多字符串（近 66 个），格式为 href="/mp3/KJV/21_Ecc/Ecc_KJV.zip" 在单个字符串中，但所有这些的区别在于更改名称Ecc 的位置，但格式相同。所以，我的要求是如何使用正则表达式获取以 (href=") 开头并以 (.zip) 结尾的所有字符串，以及如何为上面的格式字符串来标识该格式的所有字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:35:37.613

请试试这个。希望这可以帮助你。谢谢

NSString *param = nil;

NSString *objString=[[NSString alloc]initWithString:@"href=\"/mp3/KJV/21_Ecc/Ecc_KJV.zip\""];

```
NSRange start = [objString rangeOfString:@"href="];
if (start.location != NSNotFound)
{
    param = [objString substringFromIndex:start.location + start.length];
    NSRange end = [param rangeOfString:@".zip"];
    if (end.location != NSNotFound)
    {
        param = [objString substringToIndex:end.location];
    }
}
NSLog(@"Substring==%@",param);

//param now contains your value (or nil if not found) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:40:34.077

```
NSString *sourceString = ...// your string for search substrings

NSString *pattern = @"href=(.*?).zip";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:nil];    
NSArray *results = [regex matchesInString:sourceString options:0 range:NSMakeRange(0, [sourceString length])];
for (NSTextCheckingResult* result in results)
{
    NSString *resultString = [sourceString substringWithRange:result.range];
    NSLog(@"%@",resultString);
} 
```

# c# - 如何在外部强制异常

> ID：11102984
> 
> 赞同：2
> 
> 时间：2012-06-19T14:20:03.057
> 
> 标签：c#, exception

我不知道这是否可行，但我们有一个存在大量品牌问题的应用程序，其中对话框和错误消息显示我们产品的旧名称现已更改。这些盒子到处都是，许多是从各个窗口的捕获块中调用的。为了测试一切是否按预期工作，我希望我可以创建某种可以在我的程序中引发异常的外部工具，并允许 QA 使用它。

我无法真正更改实际代码（尤其是强制异常的代码），但我在想也许我制作了一个辅助程序，它只是为一些愚蠢的事情分配所有内存，然后下次点击我的真实应用程序会抛出一个内存异常。这看起来有道理吗？有没有更简单的方法来实现这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:30:49.587

当然，包含品牌的对话框的数量是有限的吗？在代码库中搜索您启动对话框的每个位置并进行更正。

您可以通过设置[sikuli](http://sikuli.org/)以在所有预期的故障模式下捕获屏幕截图来自动化测试，然后搜索这些屏幕截图（使用 sikuli 的搜索机制）以查找您担心的品牌。

如果您确定这是一个内存分配问题会触发所有这些对话框，那么编写一个 RAM 填充应用程序是相当简单的。只需分配大小不断减小的块，直到内存不足，然后使用 Sikuli 单击按钮并捕获结果。您很可能会发现，如果内存分配是问题所在，并且您正在风中运行，那么您的测试就会失败。如果你有严重的内存泄漏，你应该修复它们，而不是把它交给你可怜的 QA 团队！

# google-apps-script - 部署为 Web 应用程序

> ID：11102985
> 
> 赞同：1
> 
> 时间：2012-06-19T14:20:03.633
> 
> 标签：google-apps-script

我注意到在 Google Apps 脚本中有一个新按钮说：“部署为网络应用程序”。

当我点击它时，会加载一个面板，询问我想与谁共享这个项目，授予他们代表我运行脚本的权利。

问题是我似乎找不到任何文档，而且他们说脚本将在下面显示的 url 上可用，但没有显示 url，有人知道更多吗？

问候，

Andrei Urse
Appsbroker Consulting limited

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T14:53:26.053

此问题正在此处的问题跟踪器中进行跟踪：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1418](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1418)

同时，您需要先保存脚本的一个版本，然后再部署为 Web 应用程序。然后，您可能需要多执行一次部署/更新过程才能看到对话框中显示的 URL。我们将使用进度更新问题跟踪器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:59:39.177

另一种快速找到url的方法是运行如下函数，然后查看日志：

```
function getURL() {
 var service = ScriptApp.getService();
 Logger.log(service.getUrl());
} 
```

# android - Android：从库项目到应用程序的可绘制

> ID：11102989
> 
> 赞同：1
> 
> 时间：2012-06-19T14:20:13.103
> 
> 标签：android, drawable, android-imageview, android-image

我目前正在为android创建一个支付SDK，因此我想根据不同的情况将一些图像从sdk/library项目发送到实际应用程序。我希望应用程序的用户使用drawable，但我不希望他们手动设置（即直接从SDK的drawable文件夹中获取），SDK应该根据不同的情况自动选择要使用的图像。

目前我所拥有的是一个 DAO 类，它在初始化时具有以下内容：

```
case (MASTERCARD):
    this._logo = getResources().getDrawable(R.drawable.mastercard_securecode); 
```

然后在应用程序中，我希望能够获取该可绘制对象并在 ImageView 中使用它，如下所示：

```
img.setImageDrawable(DAOObject.getLogo()); 
```

但是，当我运行这个时，我得到

> 06-15 20:25:18.933: W/dalvikvm(625): VFY: 无法解析 LPackagePath/R$drawable 中的静态字段 6 (mastercard_securecode)；

后跟一个空指针异常，因为 getLogo 将由于上述错误返回 null。

任何人都知道如何正确实现这一点，所以我没有得到上述错误，并且仍然能够以这种方式实现它，应用程序可以这样动态发送可绘制对象？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:49:59.303

好的，所以我终于想通了。

问题确实是上下文。我需要将应用程序中的上下文传递到 SDK 中，然后我可以通过执行正确获取图像

```
context.getResources().getDrawable(R.drawable.mastercard_securecode); 
```

其次，我需要在库项目中导入 jar 文件，然后在第二个库项目中导入图像，以便 SDK 本身是封闭源代码，但我仍然有可用的资源。

# c - C18 Microchip 编译器和 strcmp 函数

> ID：11102994
> 
> 赞同：1
> 
> 时间：2012-06-19T14:20:32.773
> 
> 标签：c, string, strcmp, c18

我想比较两个字符串：

第一个字符串在我的 main 上方声明：

```
char _newState[] = "AVAILABLE"; 
```

当我想与 const 字符串进行比较时，我输入了以下行：

```
if(strcmppgm2ram((const char *) "AVAILABLE", _newState ) == 0){
    code:
} 
```

该函数从不返回零，解决方案和正确的类型转换是什么？strcmp 是同样的问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T14:30:33.690

看起来您的参数顺序错误。根据 C18 库手册，签名`strcmppgm2ram`为

```
signed char strcmppgm2ram(const char * str1, const rom char * str2 ); 
```

所以你的 strng 常量应该是第二个字符串，你的字符数组应该是第一个参数。

你不应该使用演员阵容，因为他们所做的只是隐藏这样的问题。如果您有类型不匹配，那么您应该使用该信息来确定正确的类型应该是什么以及您是否犯了错误。使用强制转换就像告诉编译器忽略你所做的，即使编译器认为它应该是一个警告/错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T14:29:56.703

尝试：

```
const far rom char _newState[] = "AVAILABLE"; 
```

为了将来参考，最好不要忽略编译器警告——它们可以帮助你。

# php - 动态列表语言

> ID：11102997
> 
> 赞同：0
> 
> 时间：2012-06-19T14:20:45.630
> 
> 标签：php

我有一个运行良好的动态列表代码。我现在唯一的问题是我使用希腊字符在我的数据库中输入了一些值。

但是当我打开我的页面而不是获取希腊字符时，我会得到像“?????”这样的符号

我的 index.php 设置为 utf-8 以及我的数据库。

还有什么我可以做的吗？

```
<?php
$sql = mysql_query("SELECT * FROM clients WHERE Category='Deksioseis' ORDER BY percentage DESC");
$productCount = mysql_num_rows($sql);
// count the output amount
if ($productCount > 0) {
    $i=0;
    $dynamicListDeks = '<table id="pl_list" class="list">';
    while($row = mysql_fetch_array($sql)) {
        $id = $row["ID"];
        $aa = $row["AA"];
        $client_name = $row["Client_Name"];
        $details = $row["Details"];
        $percent = $row["Percentage"];
        $dynamicListDeks .= ($i==0) ? '<tr>' : '';
        $dynamicListDeks .= <<<HD
<td class="lst_a">$aa</td>
<td class="lst_l">
    <img src="../rooms/{$client_name}_logo.jpg" alt="$client_name" />
</td>
<td class="lst_b">$client_name</td>
<td class="lst_d">$details</td>
<td class="lst_c">$percent%<br /></td>
HD;
        $dynamicListDeks .= ($i==1) ? '</tr>' : '';
        $i++;
        ($i==2) ? $i = 0: '';
    }
    $dynamicListDeks .= '</table>';
} else {
    $dynamicListDeks = "";
}
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:23:33.990

您真正应该做的是切换到 mysqli 或 PDO，但要解决您当前的问题，我猜您必须在选择数据库后立即将数据库连接设置为 utf8：

```
mysql_set_charset('utf8'); 
```