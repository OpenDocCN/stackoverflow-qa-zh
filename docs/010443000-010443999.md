# StackOverflow 问答 10443000-10443999

# javascript - CRM 2011 JavaScript IDE

> ID：10443007
> 
> 赞同：1
> 
> 时间：2012-05-04T05:08:47.013
> 
> 标签：javascript, dynamics-crm-2011

我正在寻找某种不一定需要特定于 CRM 的工具，而我只是在寻找能够提前检测基本语法问题的某种 javascript 编译器。

Visual Studio 似乎忽略了以下内容：

```
var fetchXml = new String();
fetchxml = "fetchstring"; 
```

我看了一下 apanta studio 3，它看起来很酷，但它并没有像我希望的那样解决基本的句法问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:11:42.423

看看[JSLint](http://jslint4vs2010.codeplex.com/)。它是 VS 的插件，可以提前检测可能的问题。您可以将其设置为在保存、构建等时解释您的文件。

# objective-c - PLCrashReporter 框架不工作

> ID：10443009
> 
> 赞同：3
> 
> 时间：2012-05-04T05:09:03.983
> 
> 标签：objective-c, plcrashreporter

我正在尝试使用**PLCrashReporter**框架制作示例应用程序（适用于 mac），该应用程序在我的系统上运行良好，但由于系统没有该框架，该应用程序在其他系统上崩溃。请让我知道如何添加通过我们的应用程序在其他系统上构建框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:27:31.400

为此，您需要进入构建阶段，然后将目标设置为框架并从您的 Xcode 项目中拖动框架以复制文件并将其从链接 Binery 与库中删除，然后继续进行构建，使其准备好分发... ……

# c# - 如何在 ASP.NET 的新窗口中打开 PDF 文件列表？

> ID：10443012
> 
> 赞同：-4
> 
> 时间：2012-05-04T05:09:23.733
> 
> 标签：c#, asp.net, .net

如何在 ASP.NET 应用程序的新窗口中的对话框中打开 PDF 文件列表？

我想要存储在我的应用程序文件夹中的 pdf 文件列表，然后选择任何 pdf 并保存在登录用户的特定文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:10:19.150

由于您想要显示存储在服务器端文件夹中的 pdf 文件列表，因此您需要以某种有意义的格式将该列表呈现到页面。您*可以*将其作为对话框打开（可能使用 jquery ui 之类的东西），但这不是必需的。

在每个文件旁边，您可以有一个按钮，指示您要执行的操作，例如“复制”。

然后，这会将相关文件的 ID/名称发送到服务器，服务器代码可以将文件复制到服务器上您称为用户文件夹的其他位置。

但是，如果您想将文件下载到用户的机器上，那是另一回事，您会在 SO 上找到很多关于此的答案。

# php - PHP 库 - 它们是什么以及如何创建一个

> ID：10443022
> 
> 赞同：0
> 
> 时间：2012-05-04T05:11:04.470
> 
> 标签：php, c, dll, libraries

1) PHP 库（如在 GD 库中）是用 C 等语言编写的编译后的 DLL（或其他适当的名称，如果不在 Windows 之外使用），编译，然后“加载”并提供给 PHP代码？

2) 如果是这种情况，我在哪里可以找到关于库的文档，其中包括调用、参数传递和值返回标准和协议，以及我可以用来开始编写 PHP“库”的其他信息？我不是在寻找有关如何使用 C 或其他语言进行编程的文档，我只是在寻找有关为 PHP 创建“库”的具体且详细的信息。

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:24:30.783

1.  在 php 世界中，我相信它被称为扩展，它的行为类似于 windows dll，并且当你想创建一个时可能有类似的东西。
2.  theserverpages.com/php/manual/en/zend.php。我认为它是 php 文档的一部分，网址 www.php net 也可能有效。

# php - PHP associative array get values in an array

> ID：10443024
> 
> 赞同：0
> 
> 时间：2012-05-04T05:11:28.303
> 
> 标签：php, arrays, object, key

i fetch the user's group in facebook using graph api...
[http://developers.facebook.com/tools/explorer?method=GET&path=100000004811603%2Fgroups](http://developers.facebook.com/tools/explorer?method=GET&path=100000004811603%2Fgroups) / with `user_groups` permission and a valid `access_token`

i turned it into array using this function i found in google:

```
 function objectToArray($d) {
        if (is_object($d)) {
        // Gets the properties of the given object
        // with get_object_vars function
        $d = get_object_vars($d);
    }

    if (is_array($d)) {
        /*
        * Return array converted to object
        * Using __FUNCTION__ (Magic constant)
        * for recursive call
        */
        return array_map(__FUNCTION__, $d);
    }
    else {
        // Return array
        return $d;
    }
} 
```

now i have the the results in this variable

```
$groups = objectToArray($obj); 
```

and now what i want to do is to extract the values of `id` keys and put it in an array that will looks like this:

```
$new = array("group id 1","group id 2","group id 3","group id 4"); // and so on.... 
```

can someone help me plsss

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:30:48.730

Try this:

```
$ids=array();
foreach ($obj->data as $group){
$ids[]=$group->id;
} 
```

as you can see we're taking the `json_decode()` result and iterating over all the elements (groups) and storing only the id into the array `$ids`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T05:36:35.970

You do not need to convert complete `$obj` to an array. You can access its members with `->` operator. So to collect all the `id` member of `data` member of `$obj`, you have to do something like:

```
$group_ids = array();
foreach ($obj->data as $group_data) {
  $group_ids[] = $group_data->id;
} 
```

# php - 使用 java 的 wami 记录器

> ID：10443027
> 
> 赞同：0
> 
> 时间：2012-05-04T05:12:11.883
> 
> 标签：php, javascript, flash, audio

要使用 wami 记录器和 java api wich 文件是需要的。我有它的带有 flash 的版本，其中包含 index.html 如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
<!-- swfobject is a commonly used library to embed Flash content -->
 <script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>

 <!-- Setup the recorder interface -->
 <script type="text/javascript" src="recorder.js"></script>

 <script>
    function setup() {
            Wami.setup("wami");
    }

    function record() {
          status("Recording...");  
          Wami.startRecording('http://localhost/audiorecording/test.php?name=demo.mp3');

    }

    function play() {   

            Wami.startPlaying("http://localhost/audiorecording/demo.mp3");
            alert("It's start playing");
    }

    function stop() {
            status("");
            Wami.stopRecording();
            alert("stop");
            Wami.stopPlaying();
    }

    function status(msg) {
            document.getElementById('status').innerHTML = msg;
    }
    </script>
     </head>

          <body onload="setup()">
            <input type="button" value="Record" onclick="record()"></input>
                 <input type="button" value="Stop" onclick="stop()"></input>
              <input type="button" value="Play" onclick="play()"></input>
              <div id="status"></div>
              <div id="wami"></div>
               </body>
                </html> 
```

和一个 php 文件为

```
<?php
 parse_str($_SERVER['QUERY_STRING'], $params);
  $name = isset($params['name']) ? $params['name'] : 'output.wav';
   $content = file_get_contents('php://input');
    $fh = fopen($name, 'w') or die("can't open file");
    fwrite($fh, $content);
     fclose($fh);
      ?> 
```

swfobject.js 可在线获取，另一种 recoder.js 和 gui.js 可在线获取

[https://wami-recorder.googlecode.com/hg/example/client/index.html](https://wami-recorder.googlecode.com/hg/example/client/index.html)

上面的事情是通过使用 flash 完成的，但它不能在所有 pc 上单击按钮我得到错误，因为相应的功能不可用并且 Wami 未定义 Wami.setup("wami"); 请帮我解决这个问题，或者我看到了 wami 的官方网站，他们在其中指定了 2008 年的发布，这是依赖于 java 的，但是如果您对此有任何想法，我无法找到如何使用它，所以请回复..... ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T19:54:41.807

我先纠正几点：

*   它的**JavaScript**，而不是 Java。Javascript 是一种在浏览器中使用的脚本语言，Java 是一种类似于 C# 的语言，主要用于其在（硬件）平台中的兼容性。
*   它不**依赖**于 jQuery。
*   如果您想在 localhost 上进行测试，请确保有一台服务器正在使用 PHP 解释器（IIS/Apache 等）进行侦听。

现在回答你的“问题”：

[https://wami-recorder.googlecode.com/hg/example/client/index.html](https://wami-recorder.googlecode.com/hg/example/client/index.html)此页面涵盖了所有基础知识。

*   包括 SWFObject
*   包括 recorder.js
*   包括 gui.js (!)**你错过了这个**。

它现在会找到 WAMI.setup 函数，它位于[gui.js](https://wami-recorder.googlecode.com/hg/example/client/gui.js)中。

现在你可以走了:)。

# ios - 越狱内核有什么变化？

> ID：10443029
> 
> 赞同：36
> 
> 时间：2012-05-04T05:12:20.240
> 
> 标签：ios, kernel, jailbreak

看到[这个](https://stackoverflow.com/questions/413242/how-do-i-detect-that-an-sdk-app-is-running-on-a-jailbroken-phone)关于保护你的应用程序不被破解的问题后，我看到最重要的回答者提到了能够查看设备是否因内核中的某些内部不平衡而越狱。在深入研究之后，我发现了[内核架构概述](http://developer.apple.com/library/mac/documentation/Darwin/Conceptual/KernelProgramming/Architecture/Architecture.html#//apple_ref/doc/uid/TP30000905-CH1g-CACDAEDC)指南，并且了解了与 Mach-BSD 内核交互的方法。我只需要知道：我在寻找什么？当设备在内核上下文中越狱时，是否有某种密钥或内部状态会发生变化？

需要明确的是，我不是在寻找代码（我自己知道如何做这些事情），我在寻找要寻找的东西......听起来很奇怪。我已经在链接的问题中看到了答案，我知道它们有效，但我想知道一个*全内核*路由，这似乎更像是一种通用且有效的检查方式，而不是搜索可能更改的目录或 plist 键可能有不同的名称。

我也不打算因为盗版而禁用应用程序的任何功能（只是根据条件显示消息或其他内容）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-05T22:16:45.907

所有“现代”内核补丁都基于[comex 的补丁](https://github.com/comex/datautils0)。

正在修补的主要内容是：

*   `security.mac.proc_enforce`
*   `cs_enforcement_disable (kernel and AMFI)`
*   `PE_i_can_has_debugger`
*   `vm_map_enter`
*   `vm_map_protect`
*   …</li>

哦，还有沙盒补丁。如果您想了解有关所有这些补丁的更多信息，我建议您查看[*iOS Hacker's Handbook*](https://rads.stackoverflow.com/amzn/click/com/1118204123)。

编辑：我只是想出了一个简单的想法来检查设备是否越狱，但我不确定Apple是否允许使用这些功能：

1.  使用 mach_vm_allocate() 分配一些内存

2.  通过 mach_vm_protect() 将该页面的保护更改为 VM_PROT_READ | VM_PROT_EXECUTE | VM_PROT_COPY

3.  由于现有的 iOS 不允许从您的应用程序内部进行 VM_PROT_EXECUTE，因此这将失败，请检查 mach_vm_protect() 的返回值，当未越狱时，但如果设备已越狱则成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T05:01:51.803

大约一年前，saurik[在 Hacker News 上发表了一篇评论，其中列出了“越狱默认安装的‘最佳实践’补丁”](https://news.ycombinator.com/item?id=4127801)。我建议阅读该评论以了解所有细节，但这里是他所说的预览（有很多我删掉的解释）：

> 1.  AFC2：允许您通过 USB 以 root 身份访问所有 / 而不仅仅是 /var/mobile/Media 作为移动设备。
>     
>     
> 2.  fstab / rw：使/被安装为读写。
>     
>     
> 3.  fstab /var suid dev：允许用户数据分区上的 setuid 可执行文件和设备节点。
>     
>     
> 4.  codesign：允许未经任何人签名的代码执行。
>     
>     
> 5.  codehash：允许执行带有“损坏”代码页的进程。
>     
>     
> 6.  rw->rx：支持将内存页从可写变为可执行。
>     
>     
> 7.  rwx：允许将内存标记为同时写入和执行。
>     
>     
> 8.  沙箱：允许进程根据 Unix 权限而不是正常的沙箱规则访问其沙箱之外的文件。
>     
>     
> 9.  crazeles：planetbeing 的一项极其复杂的黑客攻击，它消除了导致 iBooks 拒绝在越狱设备上正确运行的 FairPlay DRM 检查。

# c++ - 当周围有线程时，创建一个类的多个实例会失败？- 单例模式

> ID：10443039
> 
> 赞同：0
> 
> 时间：2012-05-04T05:14:57.600
> 
> 标签：c++, design-patterns, singleton

在下面的代码中，我没有使用任何“线程”。创建多个实例仍然是个问题吗？如果我使用线程，那么由于线程共享地址空间 - 功能可能会被破坏。

当然，没有任何“需要”来创建多个对象，但我这样做（我在这里所做的方式）会有问题吗？

```
#include <iostream>
using namespace std;

class boiler
    {
        private:
            // Non static variables can't be initialized inside a class.
            bool boilerEmpty;
            bool mixtureBoiled;

        public:
            boiler ()
            {
                boilerEmpty    = true;
                mixtureBoiled = false;
            }
            void fillBoiler() 
            {
                if (boilerEmpty == true)
                {
                    cout << "\nFill boiler.";
                    boilerEmpty = false;
                }
            }

            void boilMixture ()
            {
                if ((boilerEmpty == false) && (mixtureBoiled == false))
                {
                    cout << "\nBoil mixture";
                    mixtureBoiled = true;
                }
            }

            void drainMixture ()
            {
                if ((boilerEmpty == false) && (mixtureBoiled == true))
                {
                    cout << "\nDrain mixture.";
                    boilerEmpty = true;
                }
            }
    };

    int main ()
    {
        boiler b, c;
        b.fillBoiler ();
        b.boilMixture ();
        b.drainMixture ();

        c.fillBoiler ();
        c.boilMixture ();
        c.drainMixture ();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:27:38.507

如果您只使用一个线程中的一个实例，那么拥有多个实例不会给您带来任何问题。引发不一致行为的唯一方法是尝试在多个线程中使用一个实例。

如果您确实在多个线程中使用了一个实例，您将需要使用互斥信号量进行调查，以确保一次仅在一个线程中使用该实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:04:51.073

在多个执行线程之间存在**共享可变数据**的情况下，并发编程（无论是否是实际的多线程）具有挑战性。

根据定义，任何**不可变**的东西都可以在没有同步问题的情况下共享：

*   类数据：RTTI，虚拟表
*   功能代码：例如，在 Linux 上，操作系统使用特殊模式保护页面以确保它们永远不会被写入
*   `const`数据：字符串文字，幻数声明的常量，...

因此，对于并发编程，您唯一应该担心的是可变数据最终如何被共享。这种共享可能以两种方式发生：

*   显式：将对变量的引用传递给另一个执行线程
*   隐含：臭名昭著的*全局变量*，其中*静态*类属性

在您的程序中，没有全局变量，因此共享将是显式的（如果您创建了第二个执行线程）。

# c# - 用于分隔值的字符串操作

> ID：10443040
> 
> 赞同：1
> 
> 时间：2012-05-04T05:14:58.663
> 
> 标签：c#, asp.net, string

我有一个格式的字符串`MASTER CARD 01/01/2012`，我需要单独获取日期部分。

有时可能是`VISA 01/01/2012`，我尝试过按空格分割，但是当有两个空格时就卡住了，例如`MASTER CARD 01/01/2012`.

任何帮助将非常感激;

```
string date = e.Brick.Text;
string[] dates = date.Split(' '); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:19:31.193

您的字符串的外观，您将在数组中的最后一个元素中获得日期。

```
//dates[dates.Length-1] should have date

    string date = "MASTER CARD 01/01/2012";
    string[] dates = date.Split(' ');
    Console.WriteLine(dates[dates.Length - 1]); 
```

一个适当的解决方案应该是根据 DateTime 检查每个项目，在下一行

```
DateTime tempDs = new DateTime();
            foreach (string str in dates)
            {

                if (DateTime.TryParse(str, out tempDs))
                {
                    Console.WriteLine("Found Date");
                }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:01:38.533

假设各种卡片的所有日期都具有相似的格式，正则表达式可能是一个可行的选择。

`using System.Text.RegularExpressions;`

```
Match mDate = Regex.Match(e.Brick.Text, @"\b(?<date>(?:\d{1,2}[\\/-]){2}\d{4})\b", RegexOptions.Compiled);
if (mDate.Success)
{
    MessageBox.Show(string.Format("Date: {0}", mDate.Groups["date"].Value));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:21:34.587

您可以使用您的代码。

如果日期总是在字符串的末尾，你可以做类似的事情

```
year = dates[dates.Length-1] 
```

依此类推，月日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:21:44.897

按空格分割并使用[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx)方法解析日期。对于 VISA、MASTER 和 CARD，该方法应该失败；但它将成功用于字符串的日期部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T05:25:13.213

这是另一种选择：

```
string date = e.Brick.Text.Substring(e.Brick.Text.LastIndexOf(' ')+1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T05:25:33.920

这应该可以解决问题。

```
public string ExtractDateTimeString(string s){

    return s.Split(' ').Where(x => 
            {
                DateTime o;
                return DateTime.TryParse(x, out o);
            }).FirstOrDefault();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T05:58:18.033

或者另一种方式：

```
 string text = "MASTER CARD 4.5.2012";
        string[] split = text.Split(' ');

        string mc = "";
        string date = ""; //when you get this value, you can easily convert to date if you need it

        foreach (string str in split)
        {
            if (char.IsNumber(str[0]))
            {
                date = str;
                mc = mc.Remove(mc.Length - 1, 1);
            }
            else
                mc += str + " ";
        } 
```

# php - 这行php是做什么的？

> ID：10443044
> 
> 赞同：0
> 
> 时间：2012-05-04T05:15:15.857
> 
> 标签：php

即href片段

```
echo "<tr><td align=center>
    <a href=\edit.php?id=$id&name=$name&email=$email&password=$password\">$id</a></td>
    <td>$name</td><td>$email</td><td>$password</td></tr>"; 
```

我不知道之前是否需要一个`\"`字符`edit.php`。

提前感谢您的解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:17:31.097

它只是与常规文本混合的一长串变量。这将被评估，变量将被替换为它们的文本值。是的，您*需要*在`href=\`.

而不是这个复杂的字符串，我会做这样的事情：

```
$qVars = array(
  "id" => $id,
  "name" => $name,
  "email" => $email,
  "password" => $password /* really? */
);

$qString = http_build_query( $qVars );

echo "<tr>
        <td><a href='edit.php?{$qString}'>{$id}</a></td>
        <td>{$name}</td>
        <td>{$email}</td>
        <td>{$password}</t>
      </tr>"; 
```

`http_build_query`确实需要PHP5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:22:17.613

它将回显“输出”一些表示表格行的 HTML。

```
<tr> = table row
<td> = table cell 
```

因此，该行将包含 3 个单元格，第一个单元格是指向密码编辑页面的超链接。看起来 href 缺少转义引号，但您的地址是否应该是相对的，即

```
<a href=\"edit.php?.... 
```

或绝对

```
<a href=\"\edit.php?.... 
```

只有你会知道。

# c# - MVC 模型 - 如何更新数据库中的一行？

> ID：10443049
> 
> 赞同：0
> 
> 时间：2012-05-04T05:16:44.400
> 
> 标签：c#, asp.net-mvc, entity-framework, sql-update

我是 MVC 的新手。我正在使用以下代码添加到数据库中：

```
 [HttpPost]
    [Authorize]
    public ActionResult Add(CourseModel course)
    {
        course.UserID = (Guid)Membership.GetUser().ProviderUserKey;

        _db.Class.Add(course);
        _db.SaveChanges();

        return View();
    } 
```

但是，如果我已经在数据库中拥有“课程”，但用户更新了一个字段，我该如何正确更新它？我可以将其删除，然后阅读更新后的内容，这样就可以了，但我很确定这不是正确的做法。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:25:25.897

假设您使用 EF 来更新数据库中的记录。使用以下代码

```
_db.Entry<Course>(course).State = System.Data.EntityState.Modified;
_db.SaveChanges(); 
```

# mysql - MySQL 表名中的特殊字符

> ID：10443050
> 
> 赞同：16
> 
> 时间：2012-05-04T05:17:15.137
> 
> 标签：mysql, sql

我创建了一个表如下：

```
CREATE TABLE IF NOT EXISTS 'e!' (
`aa` int(11) unsigned NOT NULL auto_increment,
`showName` TEXT NOT NULL default '',
`startDateTime` DATETIME NOT NULL default '',
`endDateTime` DATETIME NOT NULL default '',
PRIMARY KEY  (`aa`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 
```

然后尝试使用查询插入：

```
INSERT INTO e! (showname, startDateTime, endDateTime) VALUES('E! News ', '2012-05-03 19:00:00', '2012-05-03 20:00:00') 
```

由于`!`表名中的错误，我假设`!`是mysql中的特殊字符。我试图逃避它，但查询仍然失败。

那么，我可以在表名中使用特殊字符`!`吗`&`？如果是，那么我可能必须以某种方式对它们进行编码？

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T05:24:37.407

用反引号引用您的模棱两可或“特殊”的表名：

```
INSERT INTO `e!` ... 
```

或者更好的是，不要在表名中使用特殊字符以避免此类问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T05:22:18.120

根据文档，您不能：

> 标识符在内部转换为 Unicode。它们可能包含以下字符：
> 
> *   不带引号的标识符中允许的字符： ASCII：[0-9,az,AZ$_]（基本拉丁字母，数字 0-9，美元，下划线） 扩展：U+0080 .. U+FFFF
>     
>     
> *   带引号的标识符中允许的字符包括完整的 Unicode 基本多语言平面 (BMP)，但 U+0000 除外： ASCII：U+0001 .. U+007F 扩展：U+0080 .. U+FFFF

来源：[http ://dev.mysql.com/doc/refman/5.5/en/identifiers.html](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T05:25:29.093

试试这个：

```
 CREATE TABLE IF NOT EXISTS `e!` (
`aa` int(11) unsigned NOT NULL auto_increment,
`showName` TEXT NOT NULL default '',
`startDateTime` DATETIME NOT NULL ,
`endDateTime` DATETIME NOT NULL ,
PRIMARY KEY  (`aa`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T05:32:08.753

如果您对表标识符有任何特殊要求，则意味着您的数据库体系结构和/或对数据库体系结构的理解存在问题。

您最好纠正这些架构错误，而不是强制执行愚蠢的标识符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T05:29:48.550

您需要在 e! 周围加上反引号！

此外，您`datetime`的 s 需要解析为 a 的默认值`datetime`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-22T11:42:59.977

> **不带引号的标识符中允许的字符：**
> 
> ASCII：[0-9,az,AZ$_]（基本拉丁字母，数字 0-9，美元，下划线）
> 
> 扩展：U+0080 .. U+FFFF
> 
> **带引号的标识符中允许的字符**包括完整的 Unicode 基本多语言平面 (BMP)，但 U+0000 除外：
> 
> ASCII：U+0001 .. U+007F
> 
> 扩展：U+0080 .. U+FFFF
> 
> ASCII NUL (U+0000) 和补充字符（U+10000 和更高）不允许出现在带引号或不带引号的标识符中。
> 
> 标识符可以以数字开头，但除非引用，否则标识符可能不仅仅由数字组成。
> 
> 数据库、表和列名称不能以空格字符结尾。

来源：[https ://dev.mysql.com/doc/refman/8.0/en/identifiers.html](https://dev.mysql.com/doc/refman/8.0/en/identifiers.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-04T05:33:27.490

这是MySQL 的[对象名称](http://dev.mysql.com/doc/refman/5.5/en/identifiers.html) 标准。根据它你不能使用“！” 符号作为表名的一部分。

# jquery - CSS如何返回调用元素？

> ID：10443058
> 
> 赞同：4
> 
> 时间：2012-05-04T05:18:46.870
> 
> 标签：jquery, css

它看起来像一个非常简单的问题，但我在任何地方都找不到，所以：

如何在 Jquery 中返回调用者元素？

```
$("div#myid").foo(); //I want to return exactly "div#myid" 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T05:20:59.320

试试这个：

```
$('div#myid').selector; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:20:14.883

我将假设您声明`foo`：

```
$.fn.foo = function () {
}; 
```

如果是这样，您所要做的就是`return this;`在该函数内部。

```
$.fn.foo = function () {
    // do backflips
   return this;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:20:57.487

```
$('#selector').click(function(){
return this;
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:22:31.903

你也可以试试这个

```
 $.fn.foo = function () {

       return $(this).selector;
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:21:38.193

你也可以使用这种方法

```
$(("div#myid").click(function(){
$('b').text(this.tagName+ ' '+$(this).attr('id'))
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T10:49:11.600

首先更新 foo 函数

```
function foo(sender) {
   ......
   your code
   ......

   return sender;
 } 
```

现在您可以通过以下任何调用从任何地方调用它

1.  `$("div#myid").foo(this);`

2.  `$("div#myid").foo($("div#myid"));`

# c# - C# UDP Socket 不监听响应？

> ID：10443059
> 
> 赞同：2
> 
> 时间：2012-05-04T05:19:04.417
> 
> 标签：c#, java, udp, client

我的一个程序有点问题。这是它应该如何工作的：

1.  C#客户端向Java服务器发送数据
2.  Java 服务器检查数据
3.  Java 服务器向 C# 客户端发回命令
4.  C#客户端接收数据并使用户能够登录或注册

我设法到达第 3 步，但现在我卡在第 4 步。

我在服务器、客户端和服务器上运行了 Wireshark。所有包裹都正确进出。服务器接收一个数据包并发出一个数据包。客户发出一份，收到一份。但是，如果我在控制台中检查 netstat，我看不到打开的端口。实际上我根本没有看到任何 UDP 套接字。所以数据包进来了，但 C# 客户端似乎没有听，为什么？

这是 C# 客户端。

```
// Opening a socket with UDP as Protocol type
Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
// The address of the server
IPAddress[] address = Dns.GetHostAddresses("192.168.0.87");
// The Endpoint with the port
IPEndPoint endPoint = new IPEndPoint(address[0], 40001);

// Defining the values I want
string values = "Something I send here";
// Encoding to byte with UTF8
byte[] data = Encoding.UTF8.GetBytes(values);

// Sending the values to the server on port 40001
socket.SendTo(data, endPoint);

// Showing what we sent
Console.WriteLine("Sent: " + values);

// Timeout for later, for now I just let the program get stuck
// socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, 5000);

// Allowing the response to come in from everywhere
EndPoint response = new IPEndPoint(IPAddress.Any, 0);
// Buffer for server response (currently bigger then actually necessary for debugging)
byte[] responseData = new byte[1024];

//Receiving the data from the server
socket.ReceiveFrom(responseData, ref response);

// Outputing what we got, we don't even get here
Console.WriteLine("You got: " + Encoding.UTF8.GetString(responseData));

// Closing the socket
socket.Close(); 
```

For debugging, if the user authenticated successfully I want to send the string "Test" back.

Here is the Java server

```
// Printing to the server that the user username logged in successfully
System.out.println("User " + username + " logged in succesfully!");

// The byte buffer for the response, for now just Test
byte[] responseData = "Test".getBytes("UTF-8");
// The Datagram Packet, getting IP from the received packet and port 40001
DatagramPacket responsePacket = new DatagramPacket(responseData, responseData.length, receivePacket.getAddress(), 40001);
// Sending the response, tried putting Thread.sleep here didn't help
serverSocket.send(responsePacket); 
```

I expect that I did something wrong with the C# client at the receive part but not sure what, any ideas or suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:38:13.830

Maybe not the problem, but typically UDP responses are sent back to the originating (source) port of the original request. You are sending the response back to a fixed port. Can you try changing the Java bit to:

```
DatagramPacket responsePacket = new DatagramPacket(responseData, 
     responseData.length, receivePacket.getAddress(), receivePacket.getPort()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:40:00.613

I believe you are missing the call to Bind on the client socket.

```
// Allowing the response to come in ON port 40001
EndPoint response = new IPEndPoint(IPAddress.Any, 40001);

socket.Bind(response);  // bind to port 40001 on some local address 
```

# ios - UISlider 上的 UIImage 被拉伸

> ID：10443062
> 
> 赞同：1
> 
> 时间：2012-05-04T05:19:37.753
> 
> 标签：ios, cocoa-touch, uiimage, uislider

我有一个打开的图像，`UISlider`还有一个箭头图像，一个指向数字 1 2 3 4 5 的拇指图像。默认情况下，滑块位于初始位置，而不是我想要箭头，即拇指图像来自数字 2 并停在 4 不应再往前移动。

当我拖动 thumbImage 时，缩放器（即 1、2、3、4、5）图像被拉伸和压缩，这是不应该发生的。如何解决这个问题？

代码：

```
UIImage *arrow = [UIImage imageNamed:@"arrow.png"];
UIImage *numbersSlider =  [[UIImage imageNamed:@"numbers_slider(1).png"] stretchableImageWithLeftCapWidth:10 topCapHeight:0];         
sliderPlayers = [[UISlider alloc]initWithFrame:CGRectMake(53.5, 235, 661, 227)];    
[sliderPlayers setThumbImage:arrow forState:UIControlStateNormal];   
[sliderPlayers setBackgroundColor:[UIColor clearColor]];   
[sliderPlayers setMinimumTrackImage:numbersSlider forState:UIControlStateNormal];    
[sliderPlayers setMaximumTrackImage:numbersSlider forState:UIControlStateNormal];    
sliderPlayers.minimumValue = 2.0;    
sliderPlayers.maximumValue = 4.0;
NSLog(@"sliderpalyers %f",sliderPlayers.minimumValue);    
sliderPlayers.continuous = YES;   
sliderPlayers.value = 2.0;    
[sliderPlayers addTarget:self action:@selector(sliderValueChanged:) forControlEvents:UIControlEventValueChanged];    
[self.view addSubview:sliderPlayers];     

-(void) sliderValueChanged:(id) sender{
    sliderPlayers = (UISlider *) sender;
    [sliderPlayers setValue:(int)(sliderPlayers.value + 0.5f) animated:NO];
    //noOfPlayersTextField.text = [NSString stringWithFormat:@"%d", (int)sliderPlayers.value];
    NSLog(@"slider %d",(int)(sliderPlayers.value + 0.5f));
    numOfPlayers = (int)(sliderPlayers.value + 0.5f);
} 
```

添加图像。![在此处输入图像描述](../Images/f1d02dc16043b90928c03c36b1ff9cab.png)

添加了滑块图像：![滑块图像](../Images/c8664e6f860a4b4a19431644208a13b3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:41:20.147

像这行代码一样使用。我认为这会对您有所帮助。

```
Sliderobject.maximumValue=4; 
```

# python - “快速”贝塞尔曲线长度python库

> ID：10443065
> 
> 赞同：1
> 
> 时间：2012-05-04T05:20:13.683
> 
> 标签：python, bezier, pyx

为了计算贝塞尔曲线的长度，我一直在使用 pyx。

```
from pyx import path, unit
bez = path.curve(p[0], p[1], p[0], p[1] + d, q[0], q[1]-d, q[0],q[1])
edgelen = unit.tocm(bez.arclen()) 
```

其中`p`和`q`是曲线的端点，`d`是两个控制点相对位置的垂直偏移量。（在我的应用程序中，曲线总是“向上”）。

但是，我发现这个获取曲线长度的库调用非常缓慢。还有其他可能具有更好性能的python库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:52:21.220

我可能会使用 pypy 滚动我自己的贝塞尔可调用函数——我不记得当我不久前上图形课时它特别困难。如果你用纯 python 编写代码，pypy 应该会很快。如果 pypy 不是一个选项，那么将 cython 与 cpython 一起使用是下一个最好的选择。

我会经常使用纯 python 模块，然后 m4 对其进行预处理以获得相同内容的纯 python 和 cython 版本的通用代码。它似乎工作得很好。事实上，有时我什至会使用 m4 作为宏语言而不是 python，只是为了避免方法调用而不在模块的维护版本中复制代码。

# jakarta-ee - Java EE 应用程序无法访问添加到 Jelastic Cloud 上 GlassFish 库的外部 JAR

> ID：10443070
> 
> 赞同：0
> 
> 时间：2012-05-04T05:20:53.093
> 
> 标签：jakarta-ee, jar, openid, cloud-hosting, jopenid

我已将外部 JAR 添加到“lib”目录（GlassFish 服务器配置）。尽管如此，我的应用程序还是遇到了这个异常。

```
exception

javax.servlet.ServletException: PWC1392: Error instantiating servlet class bose.MainServlet

root cause

java.lang.NoClassDefFoundError: org/expressme/openid/OpenIdException

root cause

java.lang.ClassNotFoundException: org.expressme.openid.OpenIdException 
```

或者

随机，我得到一个

```
Servlet MainServlet is not available 
```

该应用程序在本地完美运行。但是，它无法在 Jelastic 上运行。

这是我添加的 JAR：[http ://code.google.com/p/jopenid/](http://code.google.com/p/jopenid/)

导航到此页面 ( [http://boseapp1.jelastic.servint.net/login.jsp](http://boseapp1.jelastic.servint.net/login.jsp) ) 后，如果单击 Google/Yahoo 图像。请求转到使用 OpenID 库的 servlet ( MainServlet )。这是应用程序遇到异常的地方。

我哪里错了？

这是servlet代码：

```
package bose;

import java.io.IOException;
import java.io.PrintWriter;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.HashSet;
import java.util.Set;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.expressme.openid.Association;

import org.expressme.openid.Authentication;
import org.expressme.openid.Endpoint;
import org.expressme.openid.OpenIdException;
import org.expressme.openid.OpenIdManager;
/**
 *
 * @author root
 */
public class MainServlet extends HttpServlet {

        static final long ONE_HOUR = 3600000L;
    static final long TWO_HOUR = ONE_HOUR * 2L;
    static final String ATTR_MAC = "openid_mac";
    static final String ATTR_ALIAS = "openid_alias";

    private OpenIdManager manager;

    @Override
    public void init() throws ServletException {
        super.init();
        manager = new OpenIdManager();
        manager.setRealm("http://boseapp1.jelastic.servint.net/");
        manager.setReturnTo("http://boseapp1.jelastic.servint.net/openid");
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

            // manager.setRealm(request.getrequest.getContextPath());
        //manager.setReturnTo(request.getContentType()+"/openid");

        String op = request.getParameter("op");
        if (op==null) {
                            // check sign on result from Google or Yahoo:
                            checkNonce(request.getParameter("openid.response_nonce"));
                            // get authentication:
                            byte[] mac_key = (byte[]) request.getSession().getAttribute(ATTR_MAC);
                            String alias = (String) request.getSession().getAttribute(ATTR_ALIAS);
                            Authentication authentication = manager.getAuthentication(request, mac_key, alias);
                            response.setContentType("text/html; charset=UTF-8");
                        //   showAuthentication(response.getWriter(), authentication);

                        request.getSession().setAttribute("name",authentication.getFullname());
                        request.getSession().setAttribute("email",authentication.getEmail());
                        request.getSession().setAttribute("gender",authentication.getGender());

                        if(User.checkUserPresence(authentication.getEmail()))
                        {
                            response.sendRedirect(request.getContextPath()+"/problem_list.jsp");
                            return;
                        }
                        else
                        {
                            response.sendRedirect(request.getContextPath()+"/completeProfile.jsp");
                            return;
                        }
        }
        if (op.equals("Google") || op.equals("Yahoo")) {
            // redirect to Google or Yahoo sign on page:
            Endpoint endpoint = manager.lookupEndpoint(op);
            Association association = manager.lookupAssociation(endpoint);
            request.getSession().setAttribute(ATTR_MAC, association.getRawMacKey());
            request.getSession().setAttribute(ATTR_ALIAS, endpoint.getAlias());
            String url = manager.getAuthenticationUrl(endpoint, association);
            response.sendRedirect(url);
        }
        else {
            throw new ServletException("Unsupported OP: " + op);
        }
    }

    void showAuthentication(PrintWriter pw, Authentication auth) {
        pw.print("<html><head><meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /><title>Test JOpenID</title></head><body><h1>You have successfully signed on!</h1>");
        pw.print("<p>Identity: " + auth.getIdentity() + "</p>");
        pw.print("<p>Email: " + auth.getEmail() + "</p>");
        pw.print("<p>Full name: " + auth.getFullname() + "</p>");
        pw.print("<p>First name: " + auth.getFirstname() + "</p>");
        pw.print("<p>Last name: " + auth.getLastname() + "</p>");
        pw.print("<p>Gender: " + auth.getGender() + "</p>");
        pw.print("<p>Language: " + auth.getLanguage() + "</p>");
        pw.print("</body></html>");
        pw.flush();

    }

    void checkNonce(String nonce) {
        // check response_nonce to prevent replay-attack:
        if (nonce==null || nonce.length()<20)
            throw new OpenIdException("Verify failed.");
        // make sure the time of server is correct:
        long nonceTime = getNonceTime(nonce);
        long diff = Math.abs(System.currentTimeMillis() - nonceTime);
        if (diff > ONE_HOUR)
            throw new OpenIdException("Bad nonce time.");
        if (isNonceExist(nonce))
            throw new OpenIdException("Verify nonce failed.");
        storeNonce(nonce, nonceTime + TWO_HOUR);
    }

    // simulate a database that store all nonce:
    private Set<String> nonceDb = new HashSet<String>();

    // check if nonce is exist in database:
    boolean isNonceExist(String nonce) {
        return nonceDb.contains(nonce);
    }

    // store nonce in database:
    void storeNonce(String nonce, long expires) {
        nonceDb.add(nonce);
    }

    long getNonceTime(String nonce) {
        try {
            return new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ")
                    .parse(nonce.substring(0, 19) + "+0000")
                    .getTime();
        }
        catch(ParseException e) {
            throw new OpenIdException("Bad nonce time.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:41:41.130

添加库后是否重新启动了应用程序服务器？
如果是，您也可以尝试将您的应用部署到另一台服务器。

# python - 如何在 Python 中迭代以空格分隔的 ASCII 文件

> ID：10443073
> 
> 赞同：3
> 
> 时间：2012-05-04T05:21:15.473
> 
> 标签：python, for-loop, loops

奇怪的问题在这里。

我有一个`.txt`要迭代的文件。我可以将文件中的所有单词放入一个数组中，这很好，但我想知道如何做的是，我如何遍历整个文件，而不是单个字母，而是单词本身。

我希望能够通过包含文件中所有文本的数组，并基本上计算其中出现单词的所有实例。

唯一的问题是我不知道如何为它编写代码。

我尝试使用 for 循环，但是当我想要整个单词时，它只会遍历每个字母。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T05:23:37.627

此代码读取空格分隔的 file.txt

```
f = open("file.txt", "r")
words = f.read().split()
for w in words:
    print w 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T05:25:13.303

```
file = open("test")
for line in file:
    for word in line.split(" "):
         print word 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T05:48:33.513

未经测试：

```
def produce_words(file_):
   for line in file_:
     for word in line.split():
        yield word

def main():
   with open('in.txt', 'r') as file_:
      for word in produce_words(file_):
         print word 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T08:36:53.297

如果您想遍历整个文件，那么明智的做法是对其进行迭代，获取行并将它们拆分为单词。逐行工作是最好的，因为这意味着我们不会先将整个文件读入内存（对于大文件，这可能会花费大量时间或导致内存不足）：

```
with open('in.txt') as input:
    for line in input:
        for word in line.split():
            ... 
```

请注意，`line.split(" ")`如果您想保留更多的空白，您可以使用，因为这`line.split()`将删除所有多余的空白。

还要注意我使用[该`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)来打开文件，因为它更具可读性并且可以处理关闭文件，即使出现异常也是如此。

虽然这是一个很好的解决方案，但如果您在第一个循环中没有做任何事情，它也有点低效。要将其减少到一个循环，我们可以使用[`itertools.chain.from_iterable`](http://docs.python.org/library/itertools.html#itertools.chain.from_iterable)和[生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)：

```
import itertools
with open('in.txt') as input:
    for word in itertools.chain.from_iterable(line.split() for line in input):
            ... 
```

# javascript - 移除锚不工作

> ID：10443075
> 
> 赞同：1
> 
> 时间：2012-05-04T05:21:21.433
> 
> 标签：javascript, html4

```
<html>
<head>
<script type="text/javascript">
function removeLink(i)
{
    document.getElementById("tab2").deleteRow(i);
}
</script>

</head>
<body>
<form action="forth.php" method="post">
<table width="600" border="1" id="tab2">

<?php

    foreach($_POST as $key => $post2)
    {
    ?>
    <tr>
    <td>
    <?php
    echo $post2.'<br />';
    ?>
    <input type="hidden" name="<?php echo $key;?>" value="<?php echo $post2;?>" />

    </td>
    <td><a href="#" onClick="removeLink(this.parentNode.parentNode.rowIndex);">Remove</a></td>
    </tr>
    <?php

    }

    ?>
    <tr>
    <td><input type="submit" value="Next" /></td>
    <td>&nbsp;</td>
  </tr>
  </table>

</form>
</body> 
```

伙计们，您可以看到我的锚标记具有 removeLink() 的 onclick 功能，但它并没有按预期删除整个 tr。当我单击锚生成的链接时，它不执行任何操作。是否存在诸如锚不支持 removeLink(this.parentNode.parentNode.rowIndex) 中定义的内部对象之类的问题？伙计们帮忙怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:34:51.890

使用 Jquery。包括`<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>`

试试这个

```
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('.deleteMe').click(function(){
        $(this).parent().parent().remove();
        //or u can hide that like $(this).parent().parent().hide.();
    })
});

</script>

</head>
<body>
<form action="forth.php" method="post">
<table width="600" border="1" id="tab2">

<?php

    foreach($_POST as $key => $post2)
    {
    ?>
    <tr>
    <td>
    <?php
    echo $post2.'<br />';
    ?>
    <input type="hidden" name="<?php echo $key;?>" value="<?php echo $post2;?>" />

    </td>
    <td><a href="#" class="deleteMe">Remove</a></td>
    </tr>
    <?php

    }

    ?>
    <tr>
    <td><input type="submit" value="Next" /></td>
    <td>&nbsp;</td>
  </tr>
  </table>

</form>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:37:05.940

首先在您的锚点 onclick 行中更改以下代码。

```
onClick="removeLink(this);"> 
```

然后试试这个。

```
<script type="text/javascript">
function removeLink(obj){
var par=obj.parentNode;
while(par.nodeName.toLowerCase()!='tr'){
par=par.parentNode;
}
i = par.rowIndex;
document.getElementById("tab2").deleteRow(i);
}
</script> 
```

# java - 我可以访问非 EE java 上的 JMS 吗？

> ID：10443077
> 
> 赞同：0
> 
> 时间：2012-05-04T05:21:33.917
> 
> 标签：java, jakarta-ee, jms

正如标题所述，我想使用 JMS 与队列服务器（rabbitmq 和 apollo，用于测试）进行交互，但我读到 JMS 包含在 Java EE 中。有没有图书馆或方法我可以在没有 EE 的情况下访问它？我只是使用 mac 附带的标准 JDK（我在下载页面上没有看到 mac 的 EE 效用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:12:12.133

一个可能的选择是使用 RabbitMQ (http://www.rabbitmq.com/java-client.html) 提供的客户端库。这样您就可以简单地连接到 RabbitMQ 服务器/队列。

但我不确定这个库是否可用于连接到除 RabbitMQ 之外的其他 JMS 实现。

# css - 两列浮动（左右），但内容在中间

> ID：10443089
> 
> 赞同：0
> 
> 时间：2012-05-04T05:23:23.407
> 
> 标签：css, css-float

为了简化，我已经简化了我的代码，但这是我的代码：

```
<div class = "content_wrapper">
    <div class = "left_side">
        LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
            LEFT SIDE<br>
    </div>
    <div class = "right_side">
        RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
                RIGHT SIDE<br>
    </div>
    <div class = "bottom">
        bottom content
    </div>
</div> 
```

而CSS是：

```
#content_wrapper
{
    width: 960px;
    margin: 0 auto;
}

div.left_side{margin:0px; width:100px; padding:0px 0 0 5px; float:left;}
div.right_side{margin:0px; width:100px; padding:0px 0 0 5px; float:right;} 
```

你可以在这里看到它：[jsfiddle](http://jsfiddle.net/L8YN6/)。

我怎样才能使底部的内容在两个左右容器的右下方？如果 div 在它们之后，我不知道为什么要进入这两者的中间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:25:32.450

添加这个 CSS

.bottom{clear:both;}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T05:28:08.770

[http://jsfiddle.net/L8YN6/2/](http://jsfiddle.net/L8YN6/2/)

添加以下内容是可行的，我猜：

```
div.bottom {clear:both;} 
```

# javascript - 用于在网页上填充图像链接的 JavaScript 代码

> ID：10443090
> 
> 赞同：0
> 
> 时间：2012-05-04T05:23:25.040
> 
> 标签：javascript, dynamic, web

我不确定javascript是否是最好的解决方案，但这就是我想要实现的。该网页分为3列...

左栏应该有图片格式的链接，比如艺术、历史、科学等点击这些链接中的任何一个都应该在最右边的栏中生成一系列链接说点击历史应该生成文明、世界大战等的链接科学应该生成链接物理化学图片等

最后点击这些链接说世界大战应该在中心栏中显示内容，给出世界大战的简要历史......而且每次用户点击图片链接时说科学它应该被突出显示，以便用户可以轻松导航一个话题到另一个话题。

我是编程新手，不确定 javascript 是否是最好的方法。我也很困惑如何解决这个问题，从哪里开始以及如何开始。在代码块或参考或算法方面的任何帮助或有关如何解决此问题的建议将不胜感激。如果解决这个问题意味着学习一种新的编程语言，我愿意尝试......

如果我在解释问题时不清楚，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:27:47.273

JavaScript 将适用于此。适当的方法将取决于您拥有多少内容。

如果它相当短，您可以通过简单地更改元素的显示属性来实现所有这些（使用 JavaScript 将某些页面元素的 CSS 设置为显示（显示：块）或隐藏（显示：无）。

如果您有文本页面，则可能需要查看 Ajax。它比简单地显示和隐藏已经存在的元素要高级一些。

# sencha-touch-2 - 构建用于生产的 sencha touch 2 应用程序

> ID：10443094
> 
> 赞同：0
> 
> 时间：2012-05-04T05:23:42.743
> 
> 标签：sencha-touch-2

当我尝试使用命令“sencha app build production”为生产构建我的 sencha touch 2 应用程序时，我收到如下图所示的错误。我没有得到错误的原因。

![在此处输入图像描述](../Images/f154440bb13c5154caa0b89b85dc2b8c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T22:23:43.293

看起来您正在使用[保留的 Javascript 关键字](https://developer.mozilla.org/en/JavaScript/Reference/Reserved_Words)，或者可能`debugger;`在代码中的某个位置留下了一个。

# android - 在android中通知应用程序启动器图标

> ID：10443096
> 
> 赞同：0
> 
> 时间：2012-05-04T05:24:05.817
> 
> 标签：android

当我们收到一条新消息时，我们能否像我在 android 的消息应用程序图标中看到的那样，在 android 中用数值通知应用程序的 Launcher 图标？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:36:34.850

您将必须创建自己的小部件。

小部件布局应该与应用程序图标相同，然后您可以创建一个带有数字的红色图标。

我猜谷歌对“Reader uncount”小部件的做法完全相同：

![在此处输入图像描述](../Images/fa52431e175330c972faa64569ebec8f.png)

# objective-c - 我如何一般地用一个类别来实现一个协议？

> ID：10443097
> 
> 赞同：1
> 
> 时间：2012-05-04T05:24:15.570
> 
> 标签：objective-c, ios, ocmock

你如何用一些通用的协议实现来装饰一个类？

对不起，这可能是一个明显的问题。我是目标 c 的新手，所以我还是有点踩水。

我有一个协议，我想要一个通用的实现：

```
@protocol SelectableElement <NSObject>
@property BOOL selected;
@end 
```

我有几个我想要选择的对象：

```
@interface Widget : NSObject <SelectableElement>
@end

@interface Duhicky : NSObject <SelectableElement>
@end 
```

我想做的是一次编写协议的实现，并确保两个对象都以这种方式实现。

我不认为我可以编写一个通用类别并将其绑定到两者，所以我想一种方法是在公共类 NSObject 上添加实现类别：

```
@implementation NSObject (Selectable)
- (BOOL)selectable
{
    if (![self conformsToProtocol:@protocol(SelectableElement)]) return;

    return YES; // Use associative storage for this?
}

- (void)setSelectable:(BOOL)selectable
{
    if (![self conformsToProtocol:@protocol(SelectableElement)]) return;

    // set this associatively?
}
@end 
```

当然，我不能定义一个属性变量来做到这一点，我需要使用关联对象存储......我没有在这里演示。

这是将可选行为一般添加到实现可选元素协议的任何东西的唯一方法吗？或者有没有更明显的方式我错过了？

我当然可以使用继承来实现这个简单的示例，但这仅适用于以这种方式实现单个协议。我建议的这种方法是天作之合，还是一种技巧？

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:31:53.753

创建一个实现协议的类，即。`SelectableObject`然后让`Widget`和`Duhicky`类继承SelectableObject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:35:05.753

听起来你想要 Ruby 中的 Mixin 之类的东西。不幸的是，这在 Objective-C 的语言级别上是不可能的。共享行为的唯一方法是通过继承。

也就是说，您可以使用 Objective-C 运行时做一些技巧来实现您想要的。使用您使用的语言可能不是一个好主意，但如果您想探索此选项，请查看此处：[http ://cocoadev.com/wiki/MethodSwizzling](http://cocoadev.com/wiki/MethodSwizzling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T09:57:03.453

可悲的是，这是继承特别不适合该问题的情况之一。

[但是，您可以在 Cocoa 框架（ NSResponder](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsresponder_Class/Reference/Reference.html)或[UIResponder](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html) ）中看到这种（ab）继承的使用。如果您不控制继承结构（外部框架中的某个对象）需要使对象可选择，您将遇到问题。

您在 NSObject 上的类别将起作用，在这种情况下我认为它更可取。乍一看，每个对象都携带这些方法似乎很笨拙，但由于[方法查找机制中的缓存，](https://stackoverflow.com/a/982356/382749)性能损失很小。

# java - 将时间戳格式的值更改为其他时间戳格式？

> ID：10443104
> 
> 赞同：1
> 
> 时间：2012-05-04T05:25:08.253
> 
> 标签：java, timestamp

嗨，谁能告诉我如何将给定的时间戳格式更改为其他时间戳格式，例如

```
DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

Calendar d1 = Calendar.getInstance();
d1.setTime(formatter.parse("2012-03-08 17:32:56")); 
```

到

```
"dd-MMM-yyyy HH:mm:ss" 
```

格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:32:44.980

使用新的日期格式**dd-MMM-yyyy HH:mm:ss格式化日期**

```
 DateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
   Date oldFormatedDate = formatter.parse("2012-03-08 17:32:56");
   System.out.println(new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss").
   format(oldFormatedDate)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:29:14.450

继续[`DateFormat#format(Date)`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)：

```
SimpleDateFormatter newFormat = new SimpleDateFormatter("dd-MMM-yyyy HH:mm:ss");
String newFormattedDate = newFormat.format(d1); 
```

# railstutorial.org - Rails 教程第 8 章 - 未定义的局部变量或方法 `signin_path'

> ID：10443105
> 
> 赞同：1
> 
> 时间：2012-05-04T05:25:09.407
> 
> 标签：railstutorial.org

我收到以下 rSpec 测试失败错误。

我做错了什么？

非常感谢..

1）身份验证登录页面失败/错误：在{访问signin_path}之前NameError：未定义的局部变量或方法signin_path' for ## ./spec/requests/authentication_pages_spec.rb:8:inblock (3 levels) in '

2）身份验证登录页面失败/错误：在{访问signin_path}之前NameError：未定义的局部变量或方法signin_path' for ## ./spec/requests/authentication_pages_spec.rb:8:inblock (3 levels) in '

### session_controller.rb：

```
class SessionsController < ApplicationController 
    def 
      new 
    end 

    def 
      create 
    end

    def 
      destroy 
    end 
  end 
```

### 路线.rb：

```
SampleApp::Application.routes.draw do 
resources :users 
resources :sessions, only: [:new, :create, :destroy]

root to: 'static_pages#home'

match '/signup', to: 'users#new' 
match '/signin', to: 'sessions#new' 
match '/signout', to: 'sessions#destroy', via: :delete 
```

### authentication_pages_spec.rb：

```
require 'spec_helper'

describe "Authentication" do

subject { page }

describe "signin page" do before { visit signin_path }

it { should have_selector('h1',    text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }
end 
```

结尾

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T17:47:23.173

我有同样的问题，在我创建路线后重新启动警卫/spork解决了这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T22:06:21.210

在运行测试之前，您是否添加了`signin`路由`routes.rb`而不是重新启动 spork（假设您正在使用它）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T17:22:31.653

您可以`rake routes`从控制台运行并显示输出吗

# cocoa - 子类化 NSButton，需要让它看起来像一个普通的按钮

> ID：10443116
> 
> 赞同：2
> 
> 时间：2012-05-04T05:25:46.380
> 
> 标签：cocoa, nsbutton

我将 NSButton 子类化，因为我需要在按住鼠标时重复选择器。

我这样做是这样的：

```
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code here.
        [self setBezelStyle:NSBezelBorder];
        PotRightIsDown = NO;
    }

    return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
    // Drawing code here.
}

- (void)mouseDown:(NSEvent *)theEvent;
{    
    NSLog(@"pot right mouse down");
    PotRightIsDown = YES;
    holdDownTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(sendCommand) userInfo:nil repeats:YES];
}

- (void)mouseUp:(NSEvent *)theEvent;
{
    NSLog(@"pot right mouse up");
    PotRightIsDown = NO;
}

-(void)sendCommand
{
    if (PotRightIsDown)
    {
        NSLog(@"run the stuff here");
    }
    else 
    {
        [holdDownTimer invalidate];
    }
} 
```

像冠军一样工作，每 100 毫秒发送一次命令。

在 IB 的窗口中，我将一个斜角按钮拖到窗口上并将其类设置为此子类。当我运行应用程序时，该按钮是不可见的，但它可以工作。我猜这是因为我在子类中有一个空的 drawRect 函数。

我怎样才能使这个子类按钮看起来像一个斜角按钮？

谢谢，
有状态的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T08:14:09.877

如果您没有向特定子类方法添加任何功能，那么您可以完全避免实现它，这将允许*超类*提供默认行为。

或者（正如我的@Carl Norum 指出的那样），您可以使用以下方法明确地做到这一点：

```
- (void)drawRect:(NSRect)dirtyRect
{
    [super drawRect:dirtyRect];
} 
```

但这有点没有意义。

# threadpool - 在Tomcat线程池执行器中，我们会指定线程大小，对吧？该线程数是否包含在tomcat线程数中？

> ID：10443121
> 
> 赞同：0
> 
> 时间：2012-05-04T05:26:36.103
> 
> 标签：threadpool

据我所知，一旦启动 Tomcat 服务器，它将启动大约 250 个线程。假设我们指定 25 是线程池执行器中的线程大小。所以现在 tomcat 中的总线程数是 250 + 25 还是只有 250 个线程，其中还包括 25 个线程？

问候， 萨西什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T04:06:22.763

执行器将创建 minSpareThreads 参数中指定的线程数。如果未指定连接器使用执行器，则连接器可能会创建其他线程。除此之外，Tomcat 将为其内部目的创建线程。

# coffeescript - 咖啡脚本循环效率

> ID：10443122
> 
> 赞同：3
> 
> 时间：2012-05-04T05:26:51.063
> 
> 标签：coffeescript

超级简单的coffeescript问题

```
circles = []
for coordinate, i in coordinates
    circles[i] = new MakeCircle(cnBlue, coordinate.x, coordinate.y, 16, 8, 0, theCanvas.ctx) 
```

这行得通。但我知道，使用 candy 语法，可能有甚至更咖啡脚本的方式来写这个。有没有办法在不使用的情况下编写这个`i`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:50:20.953

规范的 CoffeeScript 方法是使用 for comprehension，它将返回一个数组：

```
circles = for coordinate in coordinates
  new MakeCircle(cnBlue, coordinate.x, coordinate.y, 16, 8, 0, theCanvas.ctx) 
```

或者，在一行上：

```
circles = (new MakeCircle(cnBlue, coordinate.x, coordinate.y, 16, 8, 0, theCanvas.ctx) for coordinate in coordinates) 
```

请参阅[循环和理解](http://coffeescript.org/#loops)：

> 请注意，由于我们在上面的示例中将推导式的值分配给一个变量，CoffeeScript 将每次迭代的结果收集到一个数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:31:43.477

```
circles.push(new MakeCircle(cnBlue, coordinate.x, coordinate.y, 16, 8, 0, theCanvas.ctx)) 
```

;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:43:08.290

更多的“coffeescriptish”写在一行上：

```
circles = []
circles[i] = new MakeCircle(cnBlue, coor.x, coor.y, 16, 8, 0, theCanvas.ctx) for coor, i in coordinates 
```

`i`您可以在使用 push 时删除

```
circles = []
mc = (x,y) -> new MakeCircle cnBlue,x,y,16,8,0,theCanvas.ctx
circles.push mc(coor.x,coor.y) for coor in coordinates 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T05:34:09.623

你总是可以使用[jQuery 地图](http://api.jquery.com/jQuery.map/)：

```
circles = jQuery.map(coordinates, 
    (coordinate) -> new MakeCircle(cnBlue, coordinate.x, coordinate.y, 16, 8, 0, theCanvas.ctx)
) 
```

我以前从未真正编写过 CoffeeScript，所以如果不能按原样编译，我深表歉意。这绝对是一种更“实用”的方式来做你想做的事，我认为这是现代 javascript。

# java - java中的DOM解析器不编码UTF-8中的引号

> ID：10443125
> 
> 赞同：0
> 
> 时间：2012-05-04T05:27:21.877
> 
> 标签：java, xml, parsing, dom

我正在尝试使用本教程中提供的代码：http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/

我也粘贴了下面的代码，问题似乎是对所有预定义字符 <,> 和 & 等进行编码，但不是单引号或双引号（“和”）。我真的很感激修复。还有代码下面进行了编辑，以使生成的 xml 显示为正确格式

进一步来说：

```
 import java.io.File;
   import javax.xml.parsers.DocumentBuilder;
       import javax.xml.parsers.DocumentBuilderFactory;
     import javax.xml.parsers.ParserConfigurationException;
        import javax.xml.transform.Transformer;
      import javax.xml.transform.TransformerException;
    import javax.xml.transform.TransformerFactory;
      import javax.xml.transform.dom.DOMSource;
        import javax.xml.transform.stream.StreamResult;

       import org.w3c.dom.Attr;
   import org.w3c.dom.Document;
   import org.w3c.dom.Element;

 public class WriteXMLFile {

public static void main(String argv[]) {

  try {

    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

    // root elements
    Document doc = docBuilder.newDocument();
    Element rootElement = doc.createElement("company");
    doc.appendChild(rootElement);

    // staff elements
    Element staff = doc.createElement("Staff");
    rootElement.appendChild(staff);

    // set attribute to staff element
    Attr attr = doc.createAttribute("id");
    attr.setValue("1");
    staff.setAttributeNode(attr);

    // shorten way
    // staff.setAttribute("id", "1");

    // firstname elements
    Element firstname = doc.createElement("firstname");
    firstname.appendChild(doc.createTextNode("yong"));
    staff.appendChild(firstname);

    // lastname elements
    Element lastname = doc.createElement("lastname");
    lastname.appendChild(doc.createTextNode("mook kim"));
    staff.appendChild(lastname);

    // nickname elements
    Element nickname = doc.createElement("nickname");
    nickname.appendChild(doc.createTextNode("mkyong"));
    staff.appendChild(nickname);

    // salary elements
    Element salary = doc.createElement("salary");
    salary.appendChild(doc.createTextNode("100000"));
    staff.appendChild(salary);

    // write the content into xml file
    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult(new File("C:\\file.xml"));

    // Output to console for testing
    // StreamResult result = new StreamResult(System.out);

    transformer.transform(source, result);

    System.out.println("File saved!");

  } catch (ParserConfigurationException pce) {
    pce.printStackTrace();
  } catch (TransformerException tfe) {
    tfe.printStackTrace();
  }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:48:00.857

阅读XML 规范的[第 2.4 节。](http://www.w3.org/TR/2008/REC-xml-20081126/#syntax)语法的产生 14

```
[14]    CharData       ::=      [^<&]* - ([^<&]* ']]>' [^<&]*) 
```

告诉您字符数据可以是任何（有效的 XML）字符，除了 '<' 和 '&'（或 ']]>' 序列）。尽管推荐，但不一定要转义“>”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:10:22.067

我认为你的代码工作正常。在属性值中加上双引号，看看会发生什么。

# android - 从 Android 智能手机麦克风中提取原始语音数据

> ID：10443128
> 
> 赞同：1
> 
> 时间：2012-05-04T05:27:29.583
> 
> 标签：android, voice

我需要知道如何从android实时提取原始语音数据。数据应该在时域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:04:27.270

你可以试试[http://eagle.phys.utk.edu/guidry/android/index.html](http://eagle.phys.utk.edu/guidry/android/index.html)

或者

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html)

# jquery - Jquery getJSON不触发控制器方法

> ID：10443130
> 
> 赞同：1
> 
> 时间：2012-05-04T05:27:42.703
> 
> 标签：jquery, asp.net-mvc, model-view-controller, drop-down-menu

我正在尝试实现我为其创建了以下脚本的级联下拉列表：

```
$(document).ready(function () {
            var district = $("#ddlDistrict");
            $('#ddlState').change(function () {
                //                district.find('option').remove();
                var cd = $(this).val();
                alert(cd);
                var url = '<!--Url.Content("~/")-->' + 'Stranger1/GetDistrict';
                $.getJSON("/Stranger1/GetDistrict?state="+cd, { id: cd }, function (data) {
                    //Clear the Department list
                    $("#ddlDistrict").empty();
                    $.each(data,function (index, optionData) {
                    $("#ddlDistrict").append("<option value=" + optionData.Value + ">" + optionData.Text + "</option>");
                    });
                });
            });
        }); 
```

alert(cd) 给出了正确的值。但是第二个下拉列表没有显示结果，并且 getJSON 方法没有触发 GetDistrict 方法。

我认为的列表是：

```
@Html.DropDownList("ddlState", (IEnumerable<SelectListItem>)ViewData["StateType"])
@Html.DropDownList("ddlDistrict",new List<SelectListItem>() ) 
```

以下是控制器：

```
public JsonResult GetDistrict(int id)
{
    JsonResult result = new JsonResult(); 
    IEnumerable<SelectListItem> district = new SelectList(db.sp_get_district(id, 99).Select(r => new SelectListItem { Value = r.DISTRICT_CD.ToString(), Text = r.DISTRICT }), "value", "text");

    result.Data = district.ToList(); 
    result.JsonRequestBehavior = JsonRequestBehavior.AllowGet; 
    return result;   
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:51:36.897

尝试编辑到

$.getJSON("/Stranger1/GetDistrict?id="+cd, 函数（数据）

# c++ - C/C++ 程序使用了多少内存

> ID：10443131
> 
> 赞同：-4
> 
> 时间：2012-05-04T05:27:43.227
> 
> 标签：c++, c

我们需要编写一个 C/C++ 代码来检查最初分配给程序的内存和返回给系统的内存是否相同。

我的想法是在开始和结束时找到内存使用情况并减去。

但是如何找到内存使用情况呢？

请有其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T15:34:48.377

如果您使用的是基于 Linux/Unix 的操作系统，您可以使用 top 实用程序并查看差异。无需重新发明轮子。

在你的 c 代码中使用它：

```
uint find_memory_usage()
{

  sprintf(cmd, "/bin/top");
  system(cmd);
} 
```

您也可以为此使用 exec 系列函数或系统调用。SO上的这个[链接也可能有帮助。](https://stackoverflow.com/questions/646241/c-run-a-system-command-and-get-output)或者[这个](http://www.linuxquestions.org/questions/programming-9/execute-shell-command-inside-of-c-code-188645/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T06:28:27.020

我认为这段代码将帮助您找到 c 代码的大小：

```
#include<stdio.h>
#include<bios.h>
int main(void)
{
printf("memory size %d kbite\n", biosmemory());
return 0;
} 
```

# c - 使用 qsort() 对指向包含字符串的结构的指针进行排序

> ID：10443132
> 
> 赞同：6
> 
> 时间：2012-05-04T05:27:44.400
> 
> 标签：c, pointers, qsort

我不确定这是否可以用 qsort 来做，因为我想要排序的（指向结构的指针数组）不是我要比较的（字符串）。

这是我的程序的精简版（假设在我们调用 qsort() 之前所有学生数据都在核心中，n 是要排序的记录数）：

```
struct student {
        char lname[NAMESIZE + 1];
        char fname[NAMESIZE + 1];
        short mid;
        short final;
        short hmwks;
};

int cmp(const void *, const void *);

int
main(int argc, char **argv)
{
        int n;
        struct student *data[MAX];

        qsort(data, n, sizeof(struct student *), cmp);

        return 0;
}

int
cmp(const void *p0, const void *p1)
{
        return strcmp((*(struct student *) p0).lname,
                      (*(struct student *) p1).lname);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T05:38:39.523

将传递给`cmp()`的是`struct student**`参数（以 为幌子`void*`）。所以`cmp()`像这样改变：

```
int
cmp(const void *p0, const void *p1)
{
        struct student* ps0 = *(struct student**) p0;
        struct student* ps1 = *(struct student**) p1;

        return strcmp( ps0->lname, ps1->lname);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T05:37:09.917

它应该是这样的：

```
int
cmp(const void *p0, const void *p1)
{
        // pn is a pointer to an element of the array,
        // so, it's effectively a pointer to a pointer to a struct.
        // Therefore, we need to cast it appropriately to struct student **.
        // To get a pointer to a struct from it, we dereference it once,
        // hence the "*". Then we need to extract a pointer to the beginning
        // of a string, hence the "->".
        return strcmp((*(struct student **) p0)->lname,
                      (*(struct student **) p1)->lname);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-16T10:30:18.677

除了一个小细节之外，其他答案在所有方面都是正确的。我刚刚遇到了这个问题，所以我会把它留在这里，以防其他人发现自己正在为一个极其迂腐的编译器而苦苦挣扎。

`qsort()`比较器接受两个`const void *`参数。这意味着当您取消引用它们以获取指向实际结构的指针时，您必须保持这种`const`特性。因此，如果您要遵循 C 语言的每一条规则，您的代码将如下所示：

```
int
cmp(const void *p0, const void *p1)
{
    const struct student* ps0 = *(const struct student* const*) p0;
    const struct student* ps1 = *(const struct student* const*) p1;

    return strcmp(ps0->lname, ps1->lname);
} 
```

请注意“指向 const 的 const 指针”构造——这是你告诉编译器你的原始指针 ( `p0`and `p1`) 在任何时候都不会失去它们的`const`特性——你首先将它们取消引用到 a `const * const *`，然后将其取消引用到`const *`. 如果您简单地使用`const **`，那是一个`const *`指向`*`（非）指针，`const`它会丢弃`const`.`const void *`

# c# - 类型引用找不到名为的公共类型

> ID：10443138
> 
> 赞同：24
> 
> 时间：2012-05-04T05:27:55.803
> 
> 标签：c#, wpf, xaml

我在 xaml 中收到类似“类型引用找不到名为‘Sign’的公共类型”的错误。我该如何解决。Sign 类在同一个程序集中。

```
<DataTemplate DataType="{x:Type local:Sign}">
    <Expander Padding="4"
              IsExpanded="{Binding RelativeSource={
                    RelativeSource Mode=FindAncestor, AncestorType={
                       x:Type ListBoxItem}}, Path=IsSelected}">
        <Expander.Header>
            <TextBlock Text="{Binding Name}" ... />
        </Expander.Header>
        <DockPanel LastChildFill="True">
            <Border DockPanel.Dock="Left" CornerRadius="16" BorderBrush="WhiteSmoke" Background="AliceBlue" BorderThickness="5" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Image Source="{Binding Icon}" Width="90" Height="90" Stretch="Fill" />
            </Border>
            ...
        </DockPanel>                
    </Expander> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-16T18:25:46.100

如果该类型与您正在修改的 XAML 位于同一程序集中，请在导入命名空间时省略 clr-namespace 的程序集段。

**做**

```
xmlns:local="clr-namespace:NamespaceContainingSignClass" 
```

**不要**

```
xmlns:local="clr-namespace:NamespaceContainingSignClass;assembly=AssemblyContainingSignClassAndXAML" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-20T16:46:25.247

对于那些在我的船上没有得到谷歌这个错误的前 1,00 个结果的帮助的人......在我的情况下，这与 smelch 的建议完全相反：我必须在最后添加装配信息我的 xmlns 声明。我猜可能是因为我的特殊情况 - 我的数据模板位于独立的资源字典 xaml 文件中。没有把握。我只知道它在我添加装配信息*之前*没有用，所以对于那些在外面挣扎的人来说，试试看它是否有效。我不倾向于深入研究为什么，它就是这样做的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-04T07:17:41.730

1.  检查 xaml 文件的根标记是否具有将类`Sign`映射到`local`别名的命名空间：`xmlns:local="clr-namespace:NamespaceContainingSignClass"`
2.  检查班级是否`Sign`被标记`public`
3.  检查类是否有无`Sign`参构造函数

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-01T13:41:40.457

1.  仔细检查这个问题的所有答案——我确信其中一个是正确的，但我不知道哪一个对我有用。
2.  保存项目，关闭 Visual Studio，重新打开 Visual Studio。
3.  瞧，它现在神奇地起作用了，尽管没有改变任何东西。
4.  低声向微软宣誓，继续你的生活……

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-29T13:58:14.860

现在遇到这个错误。问题是我从程序集中引用的类位于具有更高框架级别（4.7.2 对 4.6）的程序集中。版本对齐解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-05T10:00:33.227

我刚刚发现了另一个问题，这可能会导致这个问题。允许在项目名称中使用点，例如

```
FancyTrainsimTools.Desktop 
```

是一个有效的项目名称。如果你在项目中使用文件夹，你可能会得到这样的结构：

```
FancyTrainsimTools.Desktop.Logic 
```

如果您定义引用此文件夹中项目的数据模板，则会导致错误消息。我还使用了分层数据模板，但这给出的消息略有不同。

解决方法：

通过删除点重命名您的项目：

```
FancyTrainsimToolsDesktop 
```

编辑：我尝试再次重现该问题，以报告错误，但现在一切正常......所以谜团尚未解决，不清楚如何创建工作......

# active-directory - Active Directory 对象是否始终存在专有名称？

> ID：10443140
> 
> 赞同：2
> 
> 时间：2012-05-04T05:28:08.800
> 
> 标签：active-directory, ldap

据我所知，专有名称是 Active Directory 对象的必要条件。Active Directory 中不存在没有可分辨名称的对象。Active Directory 对象（例如 AD 用户）是否有可能没有专有名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:32:34.387

目录是对象的树，并且在某处可分辨名称是连接树中每个对象的方式。所以**是**的，每个对象都会有一个专有名称，因为专有名称是树中对象**的路径。**

如果您在目录中移动对象，对象的专有名称将更改以反映新路径。

没有专有名称的对象（损坏时在数据库中找到）将存储在 lostandfound 容器中，因此将具有专有名称，因此**不可能在没有专有名称的目录中拥有对象**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:22:27.213

值得一提的是，虽然对象的专有名称总是存在的，但它并不是静态存储在对象上的。存储的是对象的RDN，即相对可分辨名称，我相信系统实际上是通过连接对象的RDN及其所有父对象直到对象的根来动态生成对象的DN。

# vb.net - 声明为对象后的VB.NET调用类函数

> ID：10443145
> 
> 赞同：1
> 
> 时间：2012-05-04T05:28:40.000
> 
> 标签：vb.net, class, generics, object

我想看看是否有办法做到这一点......我正在使用带有 WP7 SDK 的 vs2010。(VB.NET)

我在全球范围内宣布这一点。

`public objGame as object`

然后说我有课：`Game1`和`Game2`

为了这个例子，我们只说两个类都有一个`Update()`函数

我想设置`objGame = Game1` （或 Game2）

然后就可以打电话了`objGame.Update()`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:39:05.293

使用方法 Update() 声明一个接口 IGame。从它继承 Game1 和 Game2。

```
IGame objGame= Game1() [or Game2]

objGame.Update() 
```

这是关于 OOP 中多态性的 wiki[链接](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:29:12.913

您可以使用反射来获取类对象的类型，然后在将其转换为特定类后调用更新方法。

C# 中的代码片段，可能你会明白该怎么做。在 Shared 类中`object`，将对象设置为您的类 Game1 或 Game2。然后访问然后使用很少的反射来处理对象是运行时。

```
public static class GameCommon
    {
        public static object currentGame;
    } 
```

/// 使用 .GetType()

```
GameCommon.currentGame = new Game1();

            if (GameCommon.currentGame != null)
            {
                Type type = GameCommon.currentGame.GetType();
                if (type.Name == "Game1")
                {
                    ((Game1)GameCommon.currentGame).Update();    
                }
                else if (type.Name == "Game2")
                {
                    ((Game2)GameCommon.currentGame).Update();    
                }
            }` 
```

另一种最好的方法是`Interface`多态性，恕我直言，它是实现的正确方法..

检查这个：

```
public static class GameCommon
    {
        public static IGame currentGame;
    }

    public interface IGame
    {
        void Update();
    }
    public class Game1 : IGame
    {
        public void Update()
        {
            Console.WriteLine("Running:Game1 Updated");
        }
    }

    public class Game2 : IGame
    {
        public void Update()
        {
            Console.WriteLine("Running:Game2 Updated");
        }
    }` 
```

称它为：

```
GameCommon.currentGame = new Game1();

            if (GameCommon.currentGame != null)
            {
                GameCommon.currentGame.Update();
            }

            GameCommon.currentGame = new Game2();
            GameCommon.currentGame.Update();
            Console.ReadKey();` 
```

希望这对你有帮助..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T05:54:23.763

首先将您的公共对象声明为 Game1 或 Game2

```
Public objGame As New Game1 
```

然后，无论您对对象做什么，实际上都代表 Game1 或 Game2

```
objGame.Update() 
```

# android - 翻译动画后按钮不响应点击事件

> ID：10443146
> 
> 赞同：15
> 
> 时间：2012-05-04T05:29:01.513
> 
> 标签：android

我在按钮上执行了翻译动画，一切正常，但唯一的问题是动画后按钮没有响应点击事件，请纠正我

```
Button b=(Button)findViewById(R.id.button1);
    TranslateAnimation slide=new TranslateAnimation(0, 30, 0,-40);
    slide.setDuration(500);
    slide.setZAdjustment(TranslateAnimation.ZORDER_TOP);
    slide.setFillAfter(true);

    b.startAnimation(slide); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T06:27:56.227

这将在 y 方向上平移对象：

```
ObjectAnimator mover = ObjectAnimator.ofFloat(v, "translationY", 0, 400);
mover.start(); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-04T05:33:16.513

如果您在较低级别的 API（在 HoneyComb 之下）处理动画，您的动画实际上不会移动按钮，而只会移动其图像。它的点击将与您在布局中放置它的位置相同。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-13T11:11:37.453

我遇到了这个问题，我确实在几秒钟前修复了它。所以，我认为我应该与你们分享我的解决方案。

*   在动画 xml 文件中，我`android:fillAfter="true"`在 keep 时删除了`android:fillEnabled="true"`。

*   注册动画监听器，然后在`onAnimationEnd()`方法中，我调用`View#Layout()`来改变视图的位置。

    ```
     int newLeft = (int) (layoutContent.getLeft() + layoutContent.getWidth() * 0.8);
                    layoutContent.layout(newLeft, 
                                        layoutContent.getTop(), 
                                        newLeft + layoutContent.getMeasuredWidth(), 
                                        layoutContent.getTop() + layoutContent.getMeasuredHeight()); 
    ```

就我而言，动画所做的是将 layoutContent 滑动到左侧 80% 的宽度。

它工作正常。希望这可以帮助。

**@Update：今天，您可以`ObjectAnimator`在 android 3.0 + 上使用。如果您正在为 3.0 以下的 android 开发，您可以在 support library v.4 中找到它。`ObjectAnimator`最适合动画。**

**@Update#2：您可以在 android api 更高版本 12 上使用 ViewPropertyAnimator。它提供了更好的性能，并修复了点击事件的问题。例子：**

```
mButton.animate()
                .setDuration(TIME)
                .translationY(VALUE)
                .start(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-04T13:45:54.477

我可以实现您想要的，但您将手动管理坐标。看看它是否适合你。

```
public class AnimationTestActivity extends Activity {

    private Button mButton;

    private LinearLayout.LayoutParams params;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mButton = (Button) findViewById(R.id.button);
        mButton.setOnClickListener(mClickListener);

        params = (LayoutParams) mButton.getLayoutParams();
    }

    private android.view.View.OnClickListener mClickListener = new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            TranslateAnimation animation = new TranslateAnimation(0, 0, 0, 400);
            animation.setDuration(2000);
            animation.setAnimationListener(mAnimationListener);
            v.startAnimation(animation);
        }
    };

    private AnimationListener mAnimationListener = new AnimationListener() {

        @Override
        public void onAnimationStart(Animation animation) {

        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationEnd(Animation animation) {
            params.topMargin = params.topMargin + 400;
            mButton.setLayoutParams(params);
        }
    };
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-04T05:31:40.593

动画不会改变 View 的实际位置。即使你设置了fillAfter(true)，它可以接受点击事件的位置就是原来的位置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T16:10:47.017

我找到了一个简单的解决方案，定义布局中的按钮最终位置并从某个位置开始动画，即指定 fromX 或 fromY 而不是设置为零

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T06:14:04.407

尝试使用这个：

```
b.layout(0, -40, b.getWidth(), b.getHeight()); 
```

# salesforce - 试图避免 SOQL 查询中的州长限制

> ID：10443151
> 
> 赞同：3
> 
> 时间：2012-05-04T05:29:24.057
> 
> 标签：salesforce, apex-code

我有 2 个自定义对象约会_c*和 TimeDrive_c*。

约会有字段

1.  开始日期__c
2.  联系__c

TimeDrive__c 有

1.  目标日期__c
2.  联系__c
3.  创建日期

这是我需要做的

我需要获取特定日期范围内的所有记录

```
select id, Target_date__c, Contact__c,  Name, CreatedDate
                    from TimeDrive__c  where Target_date__c >=:startdate  and 
                    Target_date__c <=:enddate 
```

我需要遍历此列表中的每条记录，并检查此联系人是否有约会，其 startdate 介于 targetdate 和 createddate 之间

这是我到目前为止所做的一点

```
 timeDriverLst = [select id, Target_date__c, Contact__c,  Name, CreatedDate
                    from TimeDrive__c  where Target_date__c >=:startdate  and 
                    Target_date__c <=:enddate ];

    if(timeDriverLst.size() >0){
    for(integer i =0; i < timeDriverLst.size(); i++)
    {
        mapTime.put(timeDriverLst[i].id, timeDriverLst[i]);

       /* appLst = [Select Name, Contact__c from Appointment__c where (StartDate__c > = :timeDriverLst[i].CreatedDate 
                 and StartDateTime__c <=:timeDriverLst[i].Target_date__c) and Contact__c = :timeDriverLst[i].Contact__c ];   
           */      

    } 
```

我知道我不应该在 for 循环中有 SOQL 查询。我怎样才能避免这种情况并达到要求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T09:56:49.793

一个丑陋但可能可用的解决方案：您可以从时间驱动程序列表中获取所有联系人 ID，并找到最早创建的日期。然后，您可以提取联系人 ID 在联系人 ID 列表中且日期介于最早创建日期和目标日期之间的所有约会。然后你需要做一个双循环，检查每个约会和每个时间司机。（在您检索应用程序时按联系人或按日期订购这些应用程序可能会有所帮助）。

# php - 数组显示没有重复的系列，最后一个数组从php中的第一个开始？

> ID：10443152
> 
> 赞同：-2
> 
> 时间：2012-05-04T05:29:35.580
> 
> 标签：php, arrays

我在用：

```
$input = array("1", "2", "3", "4", "5"); 
```

现在我想首先打印数组 (1) 中的第一个值和剩余的值 (2,3,4,5) 的另一个值。然后下一次，打印值将是 2 和更多值 (3,4,5,1)。以此类推，直到打印值为 5，其他值为 (1,2,3,4)。

我正在使用 for 循环，但在值 5 之后，循环应该中断......

这种情况该怎么办......

输出应该是：第一次，然后是 2，然后是 3，然后是 4，然后是 5，然后是 1，然后在每次刷新时继续

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:36:47.123

这是否符合您的要求？

```
<?php

$input = array("1", "2", "3", "4", "5");
$arr = array();

foreach ($input as $item) {
    $i = array_shift($input);
    $arr[] = $input;
    $input[] = $i;
}

print_r($arr); 
```

**输出**

```
Array
(
    [0] => Array
        (
            [0] => 2
            [1] => 3
            [2] => 4
            [3] => 5
        )

    [1] => Array
        (
            [0] => 3
            [1] => 4
            [2] => 5
            [3] => 1
        )

    [2] => Array
        (
            [0] => 4
            [1] => 5
            [2] => 1
            [3] => 2
        )

    [3] => Array
        (
            [0] => 5
            [1] => 1
            [2] => 2
            [3] => 3
        )

    [4] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
            [3] => 4
        )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:09:20.443

你要这个：

```
<?php 
session_start();

if(!isset($_SESSION['loop_num'])){
   $_SESSION['loop_num'] = 1;
}

$loop = true;

echo "Current: {$_SESSION['loop_num']} <br>";
$i = $_SESSION['loop_num'];

while($loop === true) {
    if($i >= 5){
        $i = 1;
    } else {
        $i++;
    }

    if($_SESSION['loop_num'] == $i){
        $loop = false;
        break;
    }
    $others[] = $i;

} 

if($_SESSION['loop_num'] >= 5){
        $_SESSION['loop_num'] = 1;
    } else {
        $_SESSION['loop_num']++;
    }
print_r($others);
?> 
```

输出：

```
Current: 4 
Array ( [0] => 5 [1] => 1 [2] => 2 [3] => 3 )

Current: 5 
Array ( [0] => 1 [1] => 2 [2] => 3 [3] => 4 ) 
```

ETC..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:41:13.363

尝试实施此解决方案：

```
$size = count($input);
$input = array_merge($input,$input);
for($i=0;$i<$size;$i++){
    $output = array_slice($input,$i,$size-1);
    print_r($output);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:00:26.273

如果您只想要一个永远循环的不断旋转的数组，则可以使用：

```
$array = range(1,5);

foreach($array as &$number) {
    echo $number . PHP_EOL;
    array_push($array, array_shift($array));
} 
```

如果您希望它在每次页面加载时旋转，将前面的数字设置为一个变量，其余的在专用数组中排成一行，这样可以：

```
session_start();

if(!$_SESSION['loop_array']) {
    $_SESSION['loop_array'] = range(1,5);
} 
    $current_value = array_shift($_SESSION['loop_array']);
    $others_values = $_SESSION['loop_array'];

    // Push current value to back of rotation, leaving next in line for
    // next page load.
    array_push($current_value, $_SESSION['loop_array']); 
```

这也适用于以下数组（或任何数组）：

```
$_SESSION['cute'] = array("dog", "cat", "pony", "bunny", "moose");

$_SESSION['ordinals'] = array("first", "second", "third", "fourth", "fifth");

$_SESSION['tick_tock_clock'] = array("I", "II", "III", "IV", "V", "VI", 
                                     "VII", "VIII", "IX", "X", "XI", "XII");

$_SESSION['randomness'] = array('butter', 'pillow', 'Alabama', 'bleeding gums'); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-04T05:45:48.960

```
<?php 

$input = array("1", "2", "3", "4", "5");

while(!empty($input)) {

    foreach($input as $i) {

        var_dump($i);

    }

    $input = array_splice($input, 0, count($input) - 1);

}

?> 
```

# javascript - 添加页面时管理多个样式表和 .js 文件

> ID：10443154
> 
> 赞同：0
> 
> 时间：2012-05-04T05:30:04.820
> 
> 标签：javascript, css

我`Asp.Net/C#`在我的项目中使用。目前我的项目中有五个页面，对于每个页面我都有一个单独的`Css`文件和一个文件`.js`。例如：对于`CreateAccount.aspx`我拥有的页面`CreateAccount.css`和。`CreateAccount.js`我对你们的问题是我该如何管理这些`stylesheets`和`.js`文件，当将来添加更多页面时，我应该坚持我目前的方法还是应该为我的整个项目提供一个`Css`文件`.js`。欢迎任何建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:31:49.423

页面共享的样式和脚本应该组合成一个脚本。单个页面独有的样式和脚本可能应该分开。

# sql - 水晶报表加载时间长

> ID：10443157
> 
> 赞同：1
> 
> 时间：2012-05-04T05:30:27.737
> 
> 标签：sql, vba, crystal-reports

我正在使用 SQL 2005 和 CR 8.5，我的一些报告在通过应用程序打开时需要大约 10 分钟才能加载，有人知道要解决的问题和解决方案是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:57:41.980

从 Crystal Reports 设计器中，转到`Report`菜单并选择`Performance Information`它应该会为您提供更多关于什么需要这么长时间的信息。

我没有用过 CR 8.5（我用过的最老的版本是 CR XI）。但希望该功能已经存在了一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:00:19.453

这可能是因为您没有使用索引字段限制数据，如果可能的话，在索引字段上包含过滤器总是更快，即使它不准确也可以大大减少要检查的项目数量。

# python - 为什么 render_to_response 不能正常工作

> ID：10443158
> 
> 赞同：1
> 
> 时间：2012-05-04T05:30:30.080
> 
> 标签：python, html, django, web, render-to-response

这是我的代码片段。

```
soup=BeautifulSoup(html_document)
tabulka=soup.find("table",width="100%")
dls=tabulka.findAll("dl",{"class":"resultClassify"})
tps=tabulka.findAll("div",{"class":"pageT clearfix"})
return render_to_response('result.html',{'search_key':search_key,'turnpages
':tps,'bookmarks':dls}) 
```

我检查了dls，它是一个只包含一个html标签的dict

```
<dl>label contents contains some <dd> labels</dl> 
```

但是在将 dls 传递给 render_to_response 后，结果不正确。result.html中对应的模板代码为：

```
{% if bookmarks %}
{% for bookmark in bookmarks %}
{{bookmark|safe}}
{% endfor %}
{% else %}
<p>No bookmarks found.</p>
{% endif %} 
```

输出结果 html 包含一个 python 字典格式，如下所示：

```
[<dd>some html</dd>,<dd>some html</dd>,<dd>some html</dd>,...] 
```

这出现在输出 html 中。这很奇怪。这是 renfer_to_response 的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:57:13.480

嗯，`dls`是一个包含所有匹配元素文本的 python 列表。`render_to_response`不知道如何处理列表，所以它只是把它变成一个字符串。如果要将所有元素作为 HTML 插入，请尝试将它们加入到单个文本中，如下所示：

dls = "".join(dls)

请注意，这样做会将来自其他来源的实时 HTML 粘贴到您自己的页面中，这可能是不安全的。（如果其中一个 dds 包含恶意 Javascript 会怎样？你信任那个 HTML 的提供者吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:00:11.360

在 Django 中呈现模板时，您必须使用 RequestContext 实例。

像这样说

```
return render_to_response('login.html',{'at':at}, context_instance = RequestContext(request)) 
```

为此，您需要按如下方式导入：

```
from django.template import RequestContext 
```

希望这对你有用。:)

# jsp - 如何将法国日期转换为英文日期？

> ID：10443161
> 
> 赞同：0
> 
> 时间：2012-05-04T05:30:38.020
> 
> 标签：jsp

我的英语和法语日期格式是 dd-MMM-yyyy。我正在为使用英语和法语两种语言环境的应用程序工作。When English locale is selected everything is working fine but when french locale is selected then it cannot convert french date to english date. 如何在jsp页面中将法国日期转换为英文日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:46:09.553

用这个

```
DateFormat df = DateFormat.getInstance();
df = DateFormat.getDateTimeInstance(DateFormat.SHORT,
             DateFormat.SHORT, Locale.FRENCH); 
```

有关更多详细信息，请参见

[http://docs.oracle.com/javase/tutorial/i18n/format/dateFormat.html](http://docs.oracle.com/javase/tutorial/i18n/format/dateFormat.html)

# python - 有哪些工具可以为 python 包交叉创建 OSX 安装程序？

> ID：10443163
> 
> 赞同：9
> 
> 时间：2012-05-04T05:30:46.530
> 
> 标签：python, macos, setuptools, distutils, packing

Distutils 提供现有的解决方案来构建 Windows 自解压 EXE。值得注意的是，即使我在 Ubuntu 上，我也可以创建包（考虑到我们的自动化构建过程，这是必不可少的）。

如何从 Ubuntu 机器构建 osx 安装程序？

（这适用于 python 2.7）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T20:34:38.120

Py2app、cx_freeze 和 py2exe 用于创建独立的应用程序，而不是安装程序。

您可以使用 Python distutils 创建包的 zip 文件，然后将 zip 文件包装在自解压并安装包的脚本中，如下所示：[http ://www.noah.org/wiki/Self-extracting_Python_Script](http://www.noah.org/wiki/Self-extracting_Python_Script)

或者，如果您想创建一个显示带有点击许可证的 GUI 的安装程序，那么您需要 OS X PackageMaker 来创建一个 mpkg 文件。我认为没有 Linux 等价物。如果您想尝试手动构建 mpkg，请尝试以下答案：[PackageMaker for create Mac packages on Windows/Linux](https://stackoverflow.com/questions/2323818/packagemaker-for-creating-mac-packages-on-windows-linux/8016507)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T22:33:04.213

您可以执行以下操作，因为 OS X 具有 UNIX 基础。（我假设它也有一些标准的实用程序，比如`uudecode`和`unzip`。）；

*   使用标准 Python 打包工具（如 distutils）为您的包创建一个 zip 文件。
*   用于`uuencode file.zip file.zip >uu.txt`将此 zip 文件转换为文本。
*   创建一个 shell 脚本。
*   将由 生成的文本`uuencode`作为[here-document](http://tldp.org/LDP/abs/html/here-docs.html)放入该 shell 脚本中，该脚本被馈送到`uudecode`，以重新创建 zipfile。这应该是 shell 脚本中的第二个命令。第一个命令应该检查必要的实用程序。
*   使用安装 zipfile 所需的任何 Python 设置工具。
*   做任何你想要的安装后的东西。
*   删除 zip 文件。

要安装程序，请运行 shell 脚本。在 UNIX 上，此脚本应以 root 身份运行。不过，不知道 OS X 是如何处理的。下面是一个示例（包含的 zipfile 包含两个只有随机噪声的文件）；

```
#!/bin/sh
# Install script for foo

# Check for special programs that are used in this script.
PROGS="uudecode unzip python"
for P in $PROGS; do
    which $P >/dev/null 2>&1
    if [ $? -ne 0 ]; then
        echo "$(basename $0): The program \"$P\" cannot be found."
        exit 1
    fi
done

uudecode <<"EOF"
begin 644 test.zip
M4$L#!`H``````(<!K$`````````````````$`!P`9F]O+U54"0`#OHZM3ZB.
MK4]U>`L``03I`P``!.D#``!02P,$"@``````A`&L0$EXM>H``@````(```<`
M'`!F;V\O8F%R550)``.XCJU/N(ZM3W5X"P`!!.D#```$Z0,``)DCNBVSM81_
MA%IQ!+LKC\;\19[/E]F!`J2J*2:9B_8#MC^KM*]]9P1]?1Y1@1+/H%Q"'2J'
M,;$7:C9E+WC]%M(BAUFN]4D\$%F63!^CA8O>'0C(-!YD?$\GQ[;M:?@>=A/[
M61XK<A/]\.?!0$QX<5]T\9<ZP$;_?PRMV-3O(NK)/<MTI,!RYA&OWRK6<8%4
M_1!T/+-'7H^V#C[AK)+U?T>UCU."G]D(+JU[8Z#1EI89@'^10B:8.2$$9Q*@
MY:L4MK'^TVF)A5)9\%"/FF+1T@;]8\,I)$CCHHF#E&,D.GVM1=2N];4J?6WR
M0+YH]DXZ"UQ$GVA^F(`5L![=/<ROX]9RQCRWJ=?+G4Y>56[H=8:!:GTA_V;V
M2V$%U5([0D;T19H]P7+^448+^&M3;[/VJDEJ-SU=Q8U=3,IV^<)A>C)]?@XG
M?-9$B@YZGML`!&`\-CP["]B'FC&K7Z)T6K_&W1K5?M&K8D&^'C^J;H[Q4/ST
M(>QL].68#X)_0@`?9<R3#:4Y#A'X-<NT9C\OM3:4[<)`)LEO@E=*/=0U@]VY
M_R!__:Q'_FP3((*8^6JQ"$_H&BIWDD.6<"3D,'<1^=^.9F^2Z7.:OE"1,SV[
M)M(9!&V(4):?M7^JFR^P"!H4U+(*A;U@Z0QA+]5ZIS]B1;K)&@LJ-Y,L9SQ.
M^Q-"&^@#KQG94$L#!`H``````(8!K$#%*"OR``(````"```'`!P`9F]O+V)A
M>E54"0`#O(ZM3[R.K4]U>`L``03I`P``!.D#``!NFMNGLA(C_K!_F=T%?;P3
M#TUC7%4F+!Y#A8<SFK[;E3M.%J`YT>1AVMNJPFOE58Q["7<#AWQFZ!SG_-RW
M*4`@@P.7\>+LGTBNTLH-7)CB(LJDMD)COV5'H]O8G_4I&C:PFTVC%4P=+X*B
M%A^I^$>BO+<!D\&8&GS:&VLQHJJ[!NFW0H5FD6+:'OUT2--U1HXQ2R?JF2,9
M(/@>A(/SU#.78MTFADG`ZZTK!6:Z6\;I`2?D6I;FE=_0V?4>_0MC;$0$P?H%
MDHQ]MCK4;,5W=<IZV<)<`7A_B7<_=U,:X[8/$_&/518\NNBDYS,\<',K2C]9
M4M.5UL/R<\'0E>G#$>`I>/[UX$QM.+T\LF4;D^WF6FX3.(L?2V<5B%5)$!5[
ME47K#7\&D*3Y>I)8#45-HL(!F7+$)%7C9,$_YYL]EG='3BN9W[&9!$.<.U?E
M#0L?=6@%J/32)NAMI48M",_)0#JRR!*Y2P:ZE@JWD)5/#UK!!3]*2M47V1GE
M'X0(FN%_*3BX_X'(6X!ONLKN!U/&_ML-L:^FD/24Q)S*-D8)Z>F4Y^+$]\_'
MB\$$;#D__S_RT(Y]MMK?B#%F1&C`>,)'7:12DX=F)T,/!*^(M*[,^N;6E4";
M31K\AG0@[@4L9MB.`1Z!`%@K5G)P<]0!?P\$RFUC/S:Y_Y\0*:\+$U+JEM%"
M9E!+`0(>`PH``````(<!K$`````````````````$`!@`````````$`#M00``
M``!F;V\O550%``.^CJU/=7@+``$$Z0,```3I`P``4$L!`AX#"@``````A`&L
M0$EXM>H``@````(```<`&````````````*2!/@```&9O;R]B87)55`4``[B.
MK4]U>`L``03I`P``!.D#``!02P$"'@,*``````"&`:Q`Q2@K\@`"`````@``
M!P`8````````````I(%_`@``9F]O+V)A>E54!0`#O(ZM3W5X"P`!!.D#```$
:Z0,``%!+!08``````P`#`.0```#`!```````
`
end
EOF

# Unpack your zipfile
unzip test.zip
# Go into the created subdirectory and install
cd foo
python setup.py install
# whatever post-install stuff you want goes here...
cd ..
rm -rf foo test.zip 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:06:50.880

[py2app](http://wiki.python.org/moin/MacPython/py2app)是 py2exe 的 Mac 对应物，但我不知道你是否可以从 Ubuntu 运行它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T20:12:35.440

[pyinstaller](http://www.pyinstaller.org/)可以创建 OSX 可执行文件，但我自己只在 OSX 上使用过它，所以我不知道它是否适用于 Ubuntu。

[我通过阅读kivy](http://www.kivy.org)的文档了解了这个程序，这里：[http ://kivy.org/docs/guide/packaging-macosx.html](http://kivy.org/docs/guide/packaging-macosx.html)

我希望其中一些是有帮助的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T12:53:03.917

你遇到了和我一样的麻烦。

在麦克上。我敢打赌，除非您确实需要安装驱动程序或某种 DRM，否则您想使用 dmg 包而不是 Installer。

所以我只是假设您想要创建您的 .app 目录并将其打包为 dmg 文件，以便您可以轻松地分发您的应用程序。

要使用 python 代码构建 .app 目录，您可能需要使用 Pyinstaller。优点

1.  是跨平台。
2.  在 mac、windows、linux 上运行良好
3.  您可以在命令行上控制一切。
4.  它仍在积极发展中。
5.  它会自动打包所需的依赖项，并且不会与本地机器上安装的 Python 产生冲突。
6.  良好的文档。

缺点

1.  新版本和旧版本有点不一致。

要使用 Pyinstaller 构建 .app，这里是相关文档[链接](http://www.pyinstaller.org/wiki/Features/MacOsCompatibility)

要构建 dmg 文件，您可以使用免费选项[，](http://munkymorgy.blogspot.com/2009/01/create-dmg-files-from-command-line.html)但对我来说，[DMG Canvas](http://www.araelium.com/dmgcanvas/)非常有用。

优点

1.  支持命令行
2.  支持模板（使用 GUI 创建漂亮的背景和文件夹并在命令行上重用它）
3.  支持许可协议

缺点

1.  不免费

据我所知，.py 没有统一的解决方案来构建 .app 文件和 dmg 或安装程序。

所以你应该写一些代码来自动化它，但这很简单，因为它们都支持

命令行。

# php - 如何检索 authorize.net 生成的电子邮件回执

> ID：10443167
> 
> 赞同：-1
> 
> 时间：2012-05-04T05:31:01.203
> 
> 标签：php, authorize.net

我有一个使用 Authorize.Net 进行付款的维护项目。目前，系统提供网关提供的电子邮件回执。有什么方法可以获取收据并在感谢页面上显示为可打印的收据？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:25:29.900

不现实。很难确切地说出您将如何做到这一点，因为您使用的 API 会影响您的编程，但从技术上讲，[您*可以*将发送给您的收据副本通过管道传输到 PHP 程序](http://kb.siteground.com/article/How_to_pipe_an_email_to_a_PHP_script.html)中，然后将其放入数据库或平面文件中。同时，您可以让您的 PHP 脚本等待文件或数据库记录存在，当它存在时，将其输出到屏幕。

这将是一个糟糕的计划，原因如下：

*   如果电子邮件永远不会到达，您的用户可能会等待永远不会收到的收据。这可能会导致不满意的用户和潜在的[拒付](http://www.sitepoint.com/chargeback-challenge/)。

*   即使这样可行，它也会很慢，这也会导致客户满意度下降。

*   这是一个黑客。

有**更好**的方法可以为您的用户提供可打印的收据。如果您使用的是[AIM](http://developer.authorize.net/api/aim/)、[ARB](http://developer.authorize.net/api/arb/)或[CIM](http://developer.authorize.net/api/cim/) API，您可以即时访问来自 Authorize.Net 的响应。您可以使用此信息轻松为他们生成您自己的可打印收据。如果您使用[SIM](http://developer.authorize.net/api/sim/)，您可以使用[中继响应](http://www.authorize.net/support/CNP/helpfiles/Account/Settings/Transaction_Format_Settings/Transaction_Response_Settings/Relay_Response.htm)从 Authorize.Net 获取交易信息来完成同样的事情。

这些是更好的解决方案，因为：

*   他们很快。您将在几秒钟内收到 Authorize.Net 的回复，并且可以在不到一秒钟的时间内打印出信息。

*   您可以完全控制收据的内容和外观。

*   这是可靠的。您可以指望每次都能得到快速响应。

如果使用 API 让您望而生畏，您可能会发现使用他们的[Silent Post](http://www.johnconde.net/blog/all-about-authorize-nets-silent-post/)功能很有吸引力。就像 Paypal 的 IPN 一样，在处理交易后，无论您使用哪个 API，所有交易信息都会发送到您指定的 PHP 脚本。它就像表单提交一样发布，因此很容易使用。然后，您可以通过电子邮件向您的用户发送包含该信息的收据。

*免责声明：我写了 Sitepoint 拒付文章和 Silent Post 文章*

# database - pgpool 无法创建数据库

> ID：10443171
> 
> 赞同：0
> 
> 时间：2012-05-04T05:31:36.037
> 
> 标签：database, postgresql, pgpool

我已经开始`pgpool`使用命令

```
sudo pgpool -n & 
```

它开始在终端上给出以下消息：

> 2012-05-04 10:54:29 日志：pid 4109：pgpool-II 成功启动。版本 2.3.2.1 (tomiteboshi)

但是当我尝试运行以下命令时：

```
createdb -p 9999 bench_replication 
```

我收到以下错误消息：

> createdb：无法连接到数据库 postgres：无法连接到服务器：没有这样的文件或目录。服务器是否在本地运行并接受 Unix 域套接字“/var/run/postgresql/.s.PGSQL.9999”上的连接？

当我将端口从 9999 更改为 5432 时，`bench_replication`只会在本地节点上创建数据库，而不是在从节点上创建数据库。但是，教程说在这个命令中提到端口 9999 以便`bench_replication`通过`pgpool`.

为了确认是否`pgpool`真的在运行，我停止`pgpool`使用命令

```
2012-05-04 10:58:50 LOG:   pid 4109: received smart shutdown request
stop request sent to pgpool. waiting for termination...done.
[1]+  Done                    sudo -A pgpool -n 
```

这证实了`pgpool`实际运行。我究竟做错了什么？我已经更改了我`pgpool`在网上标准教程中提到的所有配置文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T17:46:02.377

试试这个命令：

```
createdb -p 9999 -h 127.0.0.1 bench_replication 
```

默认情况下 PostgreSQL 尝试使用套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T13:32:53.890

反应迟缓但对后代有用：

当你跑

```
createdb -p 9999 bench_replication 
```

在 root 下，这会在日志中生成以下错误：

> 主机“12.34.56.78”、用户“root”、数据库“postgres”没有 pg_hba.conf 条目，SSL 关闭

这意味着您应该像这样明确提及用户名：

```
createdb -U postgres -p 9999 bench_replication 
```

然后你会得到另一个错误：

> 主机“12.34.56.78”、用户“postgres”、数据库“postgres”没有 pg_hba.conf 条目，SSL 关闭

所以你被 HBA 级别的第二个节点阻止了。在这种情况下，您应该允许从第一个节点访问第二个节点（在 pg_hba.conf 中）：host all postgres 12.34.56.77 trust 或者您应该设置密码： createdb -U postgres -p 9999 bench_replication -W SoMeP4Ssw0rD

* * *

如果这还不够清楚 - 只需检查您的日志。

# maven - Maven：如何避免在发布期间构建模块？

> ID：10443185
> 
> 赞同：0
> 
> 时间：2012-05-04T05:32:48.810
> 
> 标签：maven, maven-release-plugin

我知道如何[避免在发布过程中**部署**](http://maven.apache.org/plugins/maven-deploy-plugin/faq.html#skip)模块。不清楚的是如何避免一开始就**构建模块。**例如，我的项目包含一个“示例”模块。这需要很长时间才能构建，并且从未部署到 Maven Central，所以我想完全避免构建它（但仅在部署期间）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:42:58.673

在这种情况下，最好的办法是使用配置文件并将示例放入可以由配置文件激活的单独模块中。这可以防止在发布期间构建，但可以通过激活配置文件在通常的开发等期间构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:02:54.213

If you're using the Maven Release Plugin, you will need to take care of both the *prepare* and the *release* steps, since projects are usually built in both steps.

For the *prepare* step, I would try the `preparationGoals` parameter, which by default uses `clean verify`, which includes a build of the project. Maybe you can try setting it to `clean` only to avoid the build. [http://maven.apache.org/plugins/maven-release-plugin/perform-mojo.html](http://maven.apache.org/plugins/maven-release-plugin/perform-mojo.html)

For the *perform* step, take a look at the `goals` parameter, which by default is set to `deploy`. You can override this by specifying `clean` only. [http://maven.apache.org/plugins/maven-release-plugin/perform-mojo.html](http://maven.apache.org/plugins/maven-release-plugin/perform-mojo.html)

I haven't tried this exact combination, so I don't know whether this will have any side-effects on the rest of the build.

# java - 打印数组元素的索引：Java

> ID：10443192
> 
> 赞同：3
> 
> 时间：2012-05-04T05:33:40.423
> 
> 标签：java, arrays

我正在编写一个获取每个月降雨量的 java 程序。它工作得很好，但我只需要知道如何获取一个月的索引 - 例如，有一个输出语句：降雨量最低的月份是 1 和 1.6 英寸。如何获得“1”，即最低月份的索引？我可以得到实际的最低降雨量数字，但不是指数。

我已经尝试了几个月[n-1]，但是我仍然收到错误“无法从静态上下文引用非静态变量月份”。

任何帮助都会很棒。谢谢。

// 编辑

这是代码。我试图玩弄静态，但这只是给了我更多的错误？所以底部的months[n]部分是我卡住的地方。

```
import java.util.*;

public class Rainfall {

Scanner in=new Scanner(System.in);
 int month=12;
 double total=0;
 double average;
     double months[];

public Rainfall()
{
    months=new double[12];
}

public void setMonths()
{
     for(int n=1; n<=month; n++ )
     {
     System.out.print("Enter the rainfall (in inches) for month #"+n+": ");
     months[n-1] = in.nextDouble();

     //Input Validation - Cannot accept a negative number
        while (months[n-1] < 0)
        {
         System.out.print("Rainfall must be at least 0\. Please enter a new value.");
         months[n-1] = in.nextDouble();
        }
     }
}

public double getTotalRainFall()
{
    total = 0;
    for(int i=0; i<12;i++)
    {
        total=total+months[i];
    }
    return total;
}

public double getAverageRainFall()
{
    average = total/12;
    return average;
}

public double getHighestMonth()
{
    double highest=0;
    for ( int i = 0; i < 12; i++)
    {
        if ( months[i] > highest)
        {
            highest = months[i] ;
        }
    }
    return highest;
}

public double getLowestMonth()
{
    double lowest = Double.MAX_VALUE;
    for ( int n = 0; n < month; n++)
        {
            if (months[n] < lowest )
            {
                lowest = months[n];
            }
        }
        return lowest;
}

public static void main(String[]args)
{
    Rainfall r =new Rainfall();
    r.setMonths();
    System.out.println("The total rainfall for this year is " + r.getTotalRainFall());
            System.out.println("The average rainfall for this year is " + r.getAverageRainFall());
    System.out.println("The month with the highest amount of rain is " + months[n] + "with" + r.getHighestMonth() "inches");
            System.out.println("The month with the lowest amount of rain is  " + months[n] "with" + r.getLowestMonth() "inches");

} 
```

}

/// EDIT #2 - 好的，所以上面的代码在每个月获取用户输入时有效。现在我正在尝试在数组 thisYear 中设置值（即删除用户输入）。计算不再起作用。我做错了什么？

```
package Rainfall;

public class Rainfall {

int month = 12;
double total = 0;
double average; 
double getRainAt[];

 public Rainfall() {
    getRainAt = new double[12];
}

    double getTotalRain() {
    for (int i = 0; i < 12; i++) {
        total = total + getRainAt[i];
    }
    return total;
}

   double getAverageRain() {
    average = total / 12;
    return average;
}

int getHighestMonth() {
    int high = 0;
    for (int i = 0; i < 12; i++) {
        if (getRainAt[i] > getRainAt[high]) {
            high = i;
        }
    }
    return high;
}

int getLowestMonth() {
    int low = 0;
    for (int i = 0; i < 12; i++) {
        if (getRainAt[i] < getRainAt[low]) {
            low = i;
        }
    }
    return low;
}

public static void main(String[] args) {
   // Create an array of rainfall figures. 

  double thisYear[] = {1.6, 2.1, 1.7, 3.5, 2.6, 3.7,
                       3.9, 2.6, 2.9, 4.3, 2.4, 3.7 };

  int high;      // The high month
  int low;       // The low month

  // Create a RainFall object initialized with the figures
  // stored in the thisYear array.
  Rainfall r = new Rainfall(thisYear);
  // Display the statistics.
  System.out.println("The total rainfall for this year is " +
                     r.getTotalRain());
  System.out.println("The average rainfall for this year is " +
                     r.getAverageRain());
  high = r.getHighestMonth();
  System.out.println("The month with the highest amount of rain " +
                     "is " + (high+1) + " with " + r.getRainAt(high) +
                     " inches.");
  low = r.getLowestMonth();
  System.out.println("The month with the lowest amount of rain " +
                     "is " + (low+1) + " with " + r.getRainAt(low) +
                     " inches.");
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:44:44.123

**不能从静态上下文中引用非静态变量月份**

当您从静态成员或块访问非静态成员时，会出现此编译时错误 -

类测试{私有int i = 0；公共静态无效主（字符串[] args）{ i = 1；//这将填充该错误。我认为我们可以从不同的角度看待这个问题

```
class RainFall{
     private double minFall;
     private double maxFall;
    public void setMinFall(double minFall) {
        this.minFall = minFall;
    }
    public double getMinFall() {
        return minFall;
    }
    public void setMaxFall(double maxFall) {
        this.maxFall = maxFall;
    }
    public double getMaxFall() {
        return maxFall;
    }

}
public class RainFallMeasure{
        public static void main(String[] args) {
     Map<Integer,RainFall> rainFalls=new HashMap<Integer,RainFall>();
     RainFall janRainFall = new RainFall();
     janRainFall.setMinFall(1);
     janRainFall.setMaxFall(1.6);
     rainFalls.put(Calendar.JANUARY, janRainFall);
     RainFall febRainFall = new RainFall();
     ...
     rainFalls.put(Calendar.FEBRUARY, febRainFall);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:57:53.640

您可以使用此方法找到索引

```
public class TEST {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        double temp[] = {1, 5, 3};
        System.out.print(getIndex(temp,3));
    }
      //takes 2 parameters one is array and other is the value for which you want find index
    public static int getIndex(double[] temp, int value)
    {
        int i ;
        for( i= 0; i< temp.length; i++)
        {
            if(temp[i] == value)
            {
                return i;           
            }
        }
        return -1;
    }
} 
```

代替 temp 你可以在传递参数时使用你的月份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T04:04:43.530

另一种方法是重新设计您的应用程序，以便这些方法计算降雨量最高和最低的月份的*索引*，而不是自己计算降雨量。这个想法是，一旦有了索引，您就可以随时根据需要查找实际值。

我已经为您修补了代码，以便它可以做到这一点，并冒昧地纠正了几个“静态”错误。

您可以使用此工作应用程序并根据需要对其进行调整：

```
import java.util.*;

public class Rainfall {

    Scanner in = new Scanner(System.in);
    int month = 12;
    double total = 0;
    double average;
    double months[];

    public Rainfall() {
        months = new double[12];
    }

    public void enterMonthData() {
        for (int n = 1; n <= month; n++) {
            System.out.print("Enter the rainfall (in inches) for month #" + n + ": ");
            months[n - 1] = in.nextDouble();

            // Input Validation - Cannot accept a negative number
            while (months[n - 1] < 0) {
                System.out.print("Rainfall must be at least 0\. Please enter a new value.");
                months[n - 1] = in.nextDouble();
            }
        }
    }

    public double getTotalRainFall() {
        total = 0;
        for (int i = 0; i < 12; i++) {
            total = total + months[i];
        }
        return total;
    }

    public double getAverageRainFall() {
        average = total / 12;
        return average;
    }

    /**
     * Returns the index of the month with the highest rainfall.
     */
    public int getHighestMonth() {
        int highest = 0;
        for (int i = 0; i < 12; i++) {
            if (months[i] > months[highest]) {
                highest = i;
            }
        }
        return highest;
    }

    /**
     * Returns the index of the month with the lowest rainfall.
     */
    public int getLowestMonth() {
        int lowest = 0;
        for (int i = 0; i < 12; i++) {
            if (months[i] < months[lowest]) {
                lowest = i;
            }
        }
        return lowest;
    }

    public static void main(String[]args) {
        Rainfall r = new Rainfall();
        r.enterMonthData();
        System.out.println("The total rainfall for this year is " + r.getTotalRainFall());
        System.out.println("The average rainfall for this year is " + r.getAverageRainFall());
        int lowest = r.getLowestMonth();
        int highest = r.getHighestMonth();
        System.out.println("The month with the highest amount of rain is " + (highest+1) + " with " + r.months[highest] + " inches");
        System.out.println("The month with the lowest amount of rain is  " + (lowest+1) + " with " + r.months[lowest] + " inches");
    }
} 
```

**附录**

要回答您的后续问题，您需要为您的`Rainfall`对象提供一个构造函数，该构造函数接收降雨数据并将此数据存储在对象的字段中。这就是你想要的：

```
public class Rainfall {

    private double[] amounts;

    public Rainfall(double[] amounts) {
        this.amounts = amounts;
    }

    double getTotalRain() {
        double total = 0.0;
        for (int i = 0; i < amounts.length; i++) {
            total += amounts[i];
        }
        return total;
    }

    double getAverageRain() {
        return getTotalRain() / amounts.length;
    }

    int getHighestMonth() {
        int high = 0;
        for (int i = 0; i < amounts.length; i++) {
            if (amounts[i] > amounts[high]) {
                high = i;
            }
        }
        return high;
    }

    int getLowestMonth() {
        int low = 0;
        for (int i = 0; i < 12; i++) {
            if (amounts[i] < amounts[low]) {
                low = i;
            }
        }
        return low;
    }

    /**
     * Returns the total rain the given month number.  Month numbers
     * start at 0, not 1.
     */
    double getRainForMonth(int monthNumber) {
        return amounts[monthNumber];
    }

    public static void main(String[] args) {

        // Sample data for testing
        double thisYear[] = { 1.6, 2.1, 1.7, 3.5, 2.6, 3.7, 3.9, 2.6, 2.9, 4.3, 2.4, 3.7 };

        int high;    // The high month, starting at 0
        int low;     // The low month, stating at 0

        // Create a RainFall object initialized with amounts from above array.
        Rainfall r = new Rainfall(thisYear);

        // Display the statistics.
        System.out.println("The total rainfall for this year is " + r.getTotalRain());
        System.out.println("The average rainfall for this year is " + r.getAverageRain());
        high = r.getHighestMonth();
        System.out.println("The month with the highest amount of rain is " + (high + 1)
                + " with " + r.getRainForMonth(high) + " inches.");
        low = r.getLowestMonth();
        System.out.println("The month with the lowest amount of rain is " + (low + 1)
                + " with " + r.getRainForMonth(low) + " inches.");
    }
} 
```

# ember.js - 如何在 Ember 视图中同步有状态控件？

> ID：10443193
> 
> 赞同：1
> 
> 时间：2012-05-04T05:33:51.873
> 
> 标签：ember.js

我有一个基本的 Ember 应用程序。它有 2 个控件：一个选择元素和一个文本字段。这些控件用于更改可见的数据。使用选择元素，您可以选择查看所有数字、仅查看偶数或仅查看奇数。使用文本字段，您可以搜索包含您输入的数字的数字。

我希望控件需要独立运行。我的意思是，如果我在从 select 元素中选择一个选项后输入文本字段，则应该重置 select 元素。同样，如果我从 select 元素中选择一个选项，则应清除文本字段。

我发现这很难实现，因为如果我调用`this.set('query', '')`'`select`观察者，我将触发`query`' 观察者，该观察者被编程为`content`在`query === ''`. 换句话说，这种方法使得选择偶数将导致文本字段清除，这将导致所有数字可见，这是**错误**的，因为选择了偶数！

我通过检查方法中的值来使其工作`select`的方式`query_changed`。这感觉像是一个糟糕的解决方案。我想如果有超过 2 个控件，这种方法会用许多 if 语句填充观察者。

```
query_changed: function() {
    var query = this.get('query');
    if (query === '') {
        if (this.get('select').value === '') {  // <-- is there a better way?
            this.set('content', this.get('numbers'));
        }
    } else {
        var output = $.map(this.get('numbers'), function(number, i) {
            if (_.string.include(number, query)) {
                return number;
            }
            return null;
        });
        this.set('content', output);
    }
}.observes('query') 
```

我尝试了其他一些想法，但它们基本上都像上面那样。

你应该如何在 Ember 中处理这个问题？我看了看，`Ember.StateManager`它看起来像是要处理多个视图。在这里，我只有一个带有状态控件的视图。

演示：http: [//jsfiddle.net/DxbeB/1/](http://jsfiddle.net/DxbeB/1/)

没有任何同步控件的代码：

```
App = Ember.Application.create({});
App.controller = Ember.Object.create({
    numbers: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30],
    contentBinding: Ember.Binding.oneWay('numbers'),
    select: null,
    query: null,
    select_changed: function() {
        if (this.get('select').value === 'all') {
            this.set('content', this.get('numbers'));
        }
        if (this.get('select').value === 'even') {
            var output = $.map(this.get('numbers'), function(number, i) {
                if (number % 2 === 0) {
                    return number;
                }
                return null;
            });
            this.set('content', output);
        }
        if (this.get('select').value === 'odd') {
            var output = $.map(this.get('numbers'), function(number, i) {
                if (number % 2 !== 0) {
                    return number;
                }
                return null;
            });
            this.set('content', output);
        }

    }.observes('select'),
    query_changed: function() {
        var query = this.get('query');
        if (query === '') {
            this.set('content', this.get('numbers'));
        } else {
            var output = $.map(this.get('numbers'), function(number, i) {
                if (_.string.include(number, query)) {
                    return number;
                }
                return null;
            });
            this.set('content', output);
        }
    }.observes('query')
});

App.Select = Ember.Select.extend({
    content: [{label: '', value: ''}, {label: 'All numbers', value: 'all'}, {label: 'Even numbers', value: 'even'}, {label: 'Odd numbers', value: 'odd'}],
    optionLabelPath: 'content.label',
    optionValuePath: 'content.value'
});

App.MyView = Ember.View.extend({
    controllerBinding: 'App.controller'
}); 
```

模板：

```
{{#view App.MyView}}
    {{view App.Select selectionBinding="controller.select"}}
    {{view Ember.TextField valueBinding="controller.query"}}
    <p>{{controller.content}}</p>
{{/view}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:44:18.637

您可以观察何时在`odd/even filter`控制器上设置值，然后重置 `query`值，反之亦然，请参阅[http://jsfiddle.net/pangratz666/bWT4E/](http://jsfiddle.net/pangratz666/bWT4E/)：

**车把**：

```
<script type="text/x-handlebars" >
    {{#view App.MyView}}
        {{view App.Select selectionBinding="select"}}
        {{view Ember.TextField valueBinding="query"}}
        <hr/>
        {{#each controller.filtered}}
            {{this}}
        {{/each}}   
    {{/view}}
</script>​ 
```

**JavaScript**：

```
App = Ember.Application.create({
    oddFilter: function(value) {
        return value % 2 === 1;
    },
    evenFilter: function(value) {
        return value % 2 === 0;
    },
    queryFilter: function(query) {
        return function(value) {
            return (value + '').indexOf(query) !== -1;
        };
    }
});

App.Select = Ember.Select.extend({
    prompt: 'define filter',
    content: ['odd', 'even']
});

App.controller = Ember.ArrayProxy.create({
    content: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30],

    _queryChanged: function() {
        var q = this.get('query');
        if (!Ember.empty(q)) {
            this.set('select', null);
        }
    }.observes('query'),

    _selectChanged: function() {
        var s = this.get('select');
        if (!Ember.none(s)) {
            this.set('query', null);
        }
    }.observes('select'),

    filtered: function() {
        var s = this.get('select');
        var q = this.get('query');
        var filter = Ember.K;
        if (s === 'odd') {
            filter = App.get('oddFilter');
        } else if (s === 'even') {
            filter = App.get('evenFilter');
        } else if (!Ember.empty(q)) {
            filter = App.get('queryFilter')(q);
        }

        return this.filter(filter, this);
    }.property('select', 'query').cacheable()
});

App.MyView = Ember.View.extend({
    controllerBinding: 'App.controller',
    selectBinding: 'controller.select',
    queryBinding: 'controller.query'
});​ 
```

* * *

关于您的问题`if (this.get('select').value === '') { // <-- is there a better way?`：始终通过`set`和访问属性`get`。这确保了 Ember 中的 Binding 内容按预期工作。此外，还有一些实用程序功能，因此可以通过`Ember.empty(value)`. 请参阅有关此的博客文章：[http ://code418.com/blog/2012/03/08/useful-emberjs-functions/](http://code418.com/blog/2012/03/08/useful-emberjs-functions/)

# indentation - Biopython 缩进错误

> ID：10443195
> 
> 赞同：1
> 
> 时间：2012-05-04T05:34:08.670
> 
> 标签：indentation, biopython

我已经涉足 biopython 大约一年了，最近我升级到了 Biopython 1.59 版。我一直在通过一些教程来更新我的技能，但是当我运行 for 循环和 biopython 库中的任何模块时，我总是得到以下错误：

```
 IndentationError: expected an indented block 
```

当我从命令行终端调用以 Komodo Edit 版本 7.0.2 编写的 .py 文件时，我只会收到此错误：

```
 Priyas-iMac:~ Priya$ python /Users/priya/Documents/Python/Tutorials/BioParse.py
    Traceback (most recent call last):
      File "/Users/priya/Documents/Python/Tutorials/BioParse.py", line 4, in <module>
        SeqIO.write(rc, "/Users/priya/Documents/Python/Tutorials/ls_orchid_rc.fasta", "fasta")
      File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Bio/SeqIO/__init__.py", line 400, in write
        from Bio import AlignIO
      File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Bio/AlignIO/__init__.py", line 147, in <module>
        import NexusIO
      File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Bio/AlignIO/NexusIO.py", line 19, in <module>
        from Bio.Nexus import Nexus
      File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Bio/Nexus/Nexus.py", line 15, in <module>
        import os,sys, math, random, copy
      File "/Users/Priya/Documents/Python/Tutorials/random.py", line 27
        randLowHigh(5,10)
        ^
    IndentationError: expected an indented block 
```

当我使用命令行调用我一年前编写的旧 .py 文件时，它们运行良好。当我直接启动 python 并逐行输入教程示例时，它工作正常：

```
 Priyas-iMac:~ Priya$ python 
    Python 2.7.3 (default, Apr 19 2012, 00:55:09) 
    [GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
    Type "help", "copyright", "credits" or "license" for more information.
    >>> from Bio import SeqIO
    >>> for seq_record in SeqIO.parse("/Users/priya/Documents/Python/Tutorials/ls_orchid.txt","fasta"):
    ...      print seq_record.id
    ... 
    gi|2765658|emb|Z78533.1|CIZ78533
    gi|2765657|emb|Z78532.1|CCZ78532 
```

如何修复我的 .py 文件以便我可以从终端运行它？

任何对此问题的见解将不胜感激！

普里亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:09:17.653

原来我当初学python的时候，傻傻的把一个教程文件命名为“random.py”来练习制作一个随机数生成器。当 biopython 导入其他需要的模块时，它一直指向该文件而不是随机库模块：

```
 File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Bio/Nexus/Nexus.py", line 15, in <module>
    import os,sys, math, random, copy
  File "/Users/Priya/Documents/Python/Tutorials/random.py", line 27
    randLowHigh(5,10) 
```

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:54:53.337

检查导入的所有文件和模块是否具有相同的缩进（制表符或空格以及相同数量的空格）。

从[Python 代码的样式指南中，](http://www.python.org/dev/peps/pep-0008/)您可以阅读：

> 每个缩进级别使用 4 个空格。
> 
> 对于您不想弄乱的真正旧代码，您可以继续使用 8 空格制表符。

关于制表符和空格：

> 切勿混合制表符和空格。
> 
> Python 最流行的缩进方式是仅使用空格。第二种最流行的方式是仅使用选项卡。使用制表符和空格混合缩进的代码应转换为仅使用空格。当使用 -t 选项调用 Python 命令行解释器时，它会发出有关非法混合制表符和空格的代码的警告。使用 -tt 时，这些警告会变成错误。强烈推荐这些选项！
> 
> 对于新项目，强烈建议仅使用空格而不是选项卡。大多数编辑器都具有使此操作变得容易的功能。

也许 Komodo 正在自动更改某些内容（某些编辑会这样做）。尝试在更简单的编辑器中编辑文件并查找选项卡。您可以选择将空格和制表符显示为可见。

希望能帮助到你！

# jquery - 在jQuery中的数组中获取表单值

> ID：10443197
> 
> 赞同：1
> 
> 时间：2012-05-04T05:34:25.703
> 
> 标签：jquery

我有这个动态填充的表单字段。

```
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/> 
```

在 jQuery 的 keyup 上，我想从中获取所有值`input[name="quantity[]"]`并执行一些计算，例如总量，例如

```
(field1 quantity value) + (field2 quantity value) + (field3 quantity value) ... n 
```

我尝试获取这样的值。

```
$('input[name="quantity[]"]').keyup(function(){
    var val = $(this).val();
}); 
```

这仅获取第一个元素的值并忽略其余字段。我要怎么做？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:36:32.713

```
var $quantity = $('input[name="quantity[]"]');

$quantity.keyup(function(){
    var val = 0;
    $quantity.each(function(){
        val += parseInt($(this).val(), 10);
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T05:47:54.820

试试这个：

```
 <input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>
<input type="text" name="quantity[]" placeholder="quantity"/>

<input type="text" name="res" placeholder="Resultado"/>

$(document).ready(function() {

$('input[name="quantity[]"]').keyup(function(){
   var val = 0;
   $('input[name="quantity[]"]').each(function() {
                val += Number($(this).val());
            });
    $('input[name="res"]').val(val);
}); 
```

});

fuente con jsfiddle

[http://jsfiddle.net/kSw4G/3/](http://jsfiddle.net/kSw4G/3/)

通过 JNE

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T05:35:58.607

```
var ref = $('input[name^="quantity"]');
    ref.keyup(function(e){
        var result = 0;
        ref.each(function() {
          console.log($(this).val());
          if($(this).val().length && $(this).val() != '') {
            result += parseInt($(this).val());
          }
          console.log(result);
        });
    }); 
```

**[现场演示](http://jsfiddle.net/YBQKz/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:38:50.460

一个简单的解决方案是为每个文本框分配一个类，然后假设数量

```
var total_quantity = 0;  
$('.quantity').keyup(function()
{
    $(this).each(function()
    {
        total_quantity += $(this).val();
    });
}); 
```

# android - 将 ByteArrayOutputStream 存储在 SD 卡中

> ID：10443199
> 
> 赞同：1
> 
> 时间：2012-05-04T05:34:37.327
> 
> 标签：android, video-streaming

我得到一个`ByteArrayOutputStream`相机，想将此视频流作为文件存储到 SD 卡中，文件扩展名可以是任何东西。

我如何获取流媒体并将其存储到 SD 卡中，因为我正在获取实时摄像机流并希望在 SD 卡中不断更新它。

您能否为我提供与相机流相关的示例教程。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T05:38:02.660

```
private void save(ByteArrayOutputStream os){
        FileOutputStream fos;
        try {
            fos = new FileOutputStream("/sdcard/your_position");
            os.writeTo(fos);
            os.flush();
            fos.flush();
            os.close();
            fos.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }           
    } 
```

希望能解决你的问题。

# wamp - 在 WAMP 上安装 GeoIP

> ID：10443207
> 
> 赞同：0
> 
> 时间：2012-05-04T05:36:26.610
> 
> 标签：wamp, wampserver, geoip, installation

几天前我发现了这个 PHP 扩展。谁能解释我如何在 WAMP 上安装 GeoIP？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-19T10:30:47.283

我自己得到了解决方案。

## 这里的步骤：

*   首先 从 [http://pecl.php.net/package/geoip](http://pecl.php.net/package/geoip)***分别下载我的 phpversion***`geoip dll`文件。在我的情况下，我的 php 版本是 5.5。所以从[http://pecl.php.net/get/geoip-](http://pecl.php.net/get/geoip-1.0.8.tgz)下载 geoip 文件[1.0.8.tgz](http://pecl.php.net/get/geoip-1.0.8.tgz)
**   复制*`php_geoip.dll`*并*`php_geoip.pdb`*文件粘贴到 *`wamp\bin\php\php[PHP_Version]\`**   在 php.ini 文件中添加该行`extension=php_geoip.dll`以在 wampserver 上启用 php geoip 扩展*   ***然后重新启动你的 wamp****   检查php信息。*

 *[![在此处输入图像描述](../Images/1c743e6271628360de18260723821b89.png)](https://i.stack.imgur.com/jfm7q.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T05:48:36.940

geoip extetion 类型是 PECL extetion，用于在 Windows 中安装它与其他 pear 扩展不同（只需将主题复制到 ext 目录和 php.ini 中添加 extension = geoip.dll ）。php 5.3 中的 geoip.dll 不可用，如果你想使用它，我建议你仔细阅读这个文档 thislink[并](http://www.maxmind.com/app/php)使用**“使用 mod_geoip”**和 PHP 方法。赢;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T18:20:47.013

通常你会做两件事：

1.  将扩展名 / 文件放入 PHP 的 \ext 文件夹中。

    扩展=geoip.dll

2.  编辑 PHP 的 php.ini 文件以加载扩展并设置它的任何设置。*虽然我不认为这个扩展有任何 php.ini 设置。*

# actionscript-3 - 移除事件监听器

> ID：10443208
> 
> 赞同：-3
> 
> 时间：2012-05-04T05:36:30.713
> 
> 标签：actionscript-3, flash

我将事件侦听器添加到 25 个影片剪辑中。如果使用其中之一，我想从所有事件侦听器中删除所有事件侦听器。

```
var myMvc:movieclip; 
myMvc.addEventListener(MouseEvent.MOUSE_DOWN, function(e:MouseEvent)
{
   tasiSuruklemeyeBasla(e,myMvc,1,1);
   IEventDispatcher(e.currentTarget).removeEventListener(e.type,argu‌​ments.callee);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:26:58.583

您在这里所做的是为每个侦听器创建一个单独的匿名函数对象。这没有多大意义，因为事件处理程序的代码对于所有侦听器都是相同的。也许您正尝试将一些数据与每个事件处理程序一起传递，以便能够判断您的哪些剪辑已被触发。有很多更好的方法可以实现这一点，而无需为每个侦听器创建单独的处理程序。

无论如何，为了能够随时删除侦听器，您必须在某处保存对处理程序的引用。例如，您可以声明一个事件处理函数，并将其引用传递给您的所有侦听器（您最好在文档类或其他东西中声明它，但它也适用于时间线代码）。

```
var eventHandler:Function = function(e:MouseEvent):void
{
   var target:MovieClip = e.target as MovieClip;
   tasiSuruklemeyeBasla(e,target,1,1);
   target.removeEventListener(e.type,argu‌​ments.callee);
};

myMvc.addEventListener(MouseEvent.MOUSE_DOWN, eventHandler);

// you can do that any time
myMvc.removeEventListener(MouseEvent.MOUSE_DOWN, eventHandler); 
```

# android - 图像作为 Android 中的按钮

> ID：10443217
> 
> 赞同：0
> 
> 时间：2012-05-04T05:37:22.290
> 
> 标签：android, android-ui

为图像应用样式的最佳方法是什么。即，我使用图像作为按钮。当我专注于它时，我点击它，然后我释放按钮应该应用不同的样式。我可以为不同的目的使用不同的图像。但这不是一个可行的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T10:15:48.853

为什么不直接使用按钮作为按钮？

只需在 attrs.xml 中设置按钮样式即可。例子：

```
<style name="MyButton.Standard" parent="@android:style/Widget.Button">
    <item name="android:textColor">#FFFFFF</item>
    <item name="android:textStyle">bold</item>
    <item name="android:background">@drawable/btn_gfx</item>
    <item name="android:focusable">true</item>
    <item name="android:clickable">true</item>
</style> 
```

要使用它，只需将样式应用于布局中的按钮：

```
style="@style/MyButton.Standard" 
```

btn_gfx.xml 是 StateList 可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:state_pressed="true" 
        android:state_enabled="false"
        android:drawable="@drawable/btn_tab_pressed_disabled" />
    <item 
        android:state_pressed="true" 
        android:state_enabled="true"
        android:drawable="@drawable/btn_tab_pressed" />
    <item 
        android:state_enabled="false"
        android:drawable="@drawable/btn_tab_disabled" />
    <item 
        android:state_enabled="true"
        android:drawable="@drawable/btn_tab_default" />
</selector> 
```

如果需要，您可以为更多状态添加图形 - 请查看 Android 文档。

如果您想在应用程序的任何地方都使用相同的系统按钮而不是在每个按钮上应用样式，您可以创建自定义主题。一个例子（没有 TitleBar）：

```
<style name="MyTheme" parent="@android:style/Theme.NoTitleBar">
    <item name="android:buttonStyle">@style/MyButton.Standard</item>
</style> 
```

然后只需将主题应用到您的应用程序对象（或者 - 如果您只想将它​​用于单个活动，请将其应用到您的活动）。

您可以使用与 Button 组件完全相同的方式来设置 ImageButton 组件的样式。当您开始使用它时，它是一个非常强大的系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:58:40.547

这是通过在 XML 文件中指定正常、聚焦和按下状态来完成的（使用[State ListDrawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)）。

> StateListDrawable 是在 XML 中定义的可绘制对象，它使用多个不同的图像来表示相同的图形，具体取决于对象的状态。例如，一个 Button 小部件可以存在于几种不同状态中的一种（按下、聚焦或 niether），并且使用可绘制的状态列表，您可以为每个状态提供不同的背景图像。

例如，您可以在 中创建以下 xml 文件`res/drawable`，我们将其命名为 selector.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/ic_btn_pressed"
        android:state_pressed="true" />
    <item android:drawable="@drawable/ic_btn_focused"
        android:state_focused="true" />
    <item android:drawable="@drawable/ic_btn_normal" /> 
</selector> 
```

稍后您可以将其设置为按钮的背景。

```
<Button
   android:background="@drawable/selector"
/> 
```

# android - 如何在android中收听相机拍摄的图片

> ID：10443218
> 
> 赞同：3
> 
> 时间：2012-05-04T05:37:25.793
> 
> 标签：android, android-intent

在我的应用程序中，我只想听用户在相机中拍摄的照片并增加照片数量。我试着听

```
<action android:name="android.provider.MediaStore.ACTION_IMAGE_CAPTURE" />
<action android:name="android.media.action.IMAGE_CAPTURE" />
<action android:name="android.media.action.STILL_IMAGE_CAMERA" />
<action android:name="android.intent.action.CAMERA_BUTTON" /> 
```

以上意图。但这些意图不适用于银河。有没有其他方法可以收听捕获的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:43:58.040

看[这里](https://stackoverflow.com/questions/2729267/android-camera-intent)

线索是使用作为参数传递的意图启动活动：

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
startActivityForResult(intent, TAKE_PICTURE); 
```

并捕获活动的结果：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case TAKE_PICTURE:
        if (resultCode == Activity.RESULT_OK) {
            // Do something
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:49:40.820

我认为你应该使用图片回调

```
 Camera.PictureCallback picture_callback = new Camera.PictureCallback() {

                        @Override
                        public void onPictureTaken(byte[] data, Camera camera) {
                            // WRITE YOUR CODE WHEN PICTURE TAKEN.
                            // "data" IS YOUR TAKEN PICTURE FRAME. 
                        }
                    }; 
```

将图片回调设置为您的相机，每次拍照时控制都会进入上述功能。

您可以将图片回调设置为

```
if you have raw frame
        mCamera.takePicture(null, picture_callback, null);

if you have jpeg frame
        mCamera.takePicture(null, null, picture_callback);

hope it will help you.. 
```

如果你想使用默认相机，那么你可以使用它。

相机 mCamera = Camera.open();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T05:38:52.333

我知道，这个线程很老而且没有答案，但我也在寻找相同的解决方案。[并在 Stackoverflow](https://stackoverflow.com/questions/16742143/how-to-create-an-auto-upload-picture-app)和[Vogella 的帖子中](http://www.vogella.com/articles/AndroidIntent/article.html)找到了一些有用的提示。

以防万一有人需要类似的东西......

# jquery - jQuery 循环遍历带有控件的列表项

> ID：10443225
> 
> 赞同：0
> 
> 时间：2012-05-04T05:38:27.870
> 
> 标签：jquery

我想创建一个简单的插件，使用两个单独的按钮在列表项之间循环。该列表不必是无限循环，它只需要根据单击的按钮在正确的位置显示/隐藏正确的项目。

起初我正在考虑使用边距，但我不再那么确定了。有什么建议么？

[http://jsfiddle.net/XEUkK/](http://jsfiddle.net/XEUkK/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:12:32.607

我最终为任何有类似问题的人提出了这个解决方案。

```
$('.list > li:first').addClass('active');
    $('.up').click(function(){
     $('.active').next().addClass('active').prev().removeClass('active');
     $('.list > li:first').before($('.list > li:last'));
     });

        $('.down').click(function(){
            $('.active').prev().addClass('active').next().removeClass('active');        
            $('.list > li:last').after($('.list > li:first'));
        }); 
```

# android - 在焦点更改期间编辑 EditText 时出现问题

> ID：10443240
> 
> 赞同：0
> 
> 时间：2012-05-04T05:40:32.553
> 
> 标签：android, android-edittext

我有两个`EditTexts`用户名和密码，每个都有文本*“ENTER A USERNAME”*和*“ENTER A PASSWORD”*作为默认文本。

它们的文本颜色是浅灰色。现在，当他们集中注意力时，他们应该将文本颜色以及密码 edittext 的 inputType 更改为密码类型（在其他事情之上但有效）。

它首先成功地将文本颜色更改为黑色，但无法改回并且 inputType 永远不会改变。

请建议我缺少的地方，下面是我的代码：

```
OnFocusChangeListener pwListener = new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus) {
                //if it has focus then clear the text and make text black
                if(((EditText) v).getText().toString().compareTo(getString(R.string.passwordField)) == 0) {
                    ((EditText) v).setTextColor(R.color.Black);
                    ((EditText) v).setText(R.string.blank);
                    ((EditText) v).setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);
                }
            } else if(!hasFocus) {
                //if it loses focus and nothing was inputed then change back to default
                if(isEmpty(((EditText) v).getText().toString())) {
                    ((EditText) v).setTextColor(R.color.TextInput);
                    ((EditText) v).setText(R.string.passwordField);
                    ((EditText) v).setInputType(InputType.TYPE_TEXT_VARIATION_PERSON_NAME);
                }
            }
        }
    }; 
```

这就是密码编辑文本，这是它的 XML：

```
<EditText
    android:id="@+id/passwordInput"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textPersonName"
    android:layout_marginTop="5dip"
    android:layout_marginLeft="20dip"
    android:layout_marginRight="20dip"
    android:paddingTop="15dip"
    android:paddingBottom="15dip"
    android:text="@string/passwordField"
    android:textColor="@color/TextInput"
    android:textSize="25sp"
    android:gravity="center_vertical"
    android:ems="10" >
 </EditText> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:43:21.563

为什么不使用 Edittext 将 ENTER A USERNAME" 和 "ENTER A PASSWORD" 设置为提示文本

```
android:hint="Enter User Name" 
```

当用户点击 Edittext 时它会自动消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:52:02.957

在您的 Xml 中，使用[Hint](http://developer.android.com/reference/android/R.styleable.html#Searchable_hint)属性将值设置为默认值。

像：

`android:hint="@string/username"`

`android:hint="@string/password"`

反而

`android:text="@string/username"`

`android:text="@string/password"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:44:08.010

采用

```
android:hint="@string/passwordField" 
```

代替

```
android:text="@string/passwordField" 
```

并在用户名中做同样的事情

# symfony - Symfony2/ 在表单类型中使用自定义存储库方法

> ID：10443241
> 
> 赞同：1
> 
> 时间：2012-05-04T05:40:36.480
> 
> 标签：symfony, repository

我是 Symfony2 的新手，希望我足够清楚。

我有一个存储库：

```
class districtRepository extends EntityRepository
{
     public function findAllFromCity($idCity)
    {

            return $this->createQueryBuilder('d')
                        ->where('d.city = :city')
                        ->setParameter('city', $idCity)
                        ->orderBy('d.name', 'ASC');
                        ->getQuery()
                        ->getResult();

    }
} 
```

和一个表单类型

```
class searchPropertyType extends AbstractType
{

    public function getDefaultOptions(array $options)
    {
        // return array('validation_constraint' => $collectionConstraint
       return array ('required'=>false, 'csrf_protection' => true); 
    }

    public function buildForm(FormBuilder $builder, array $options)
    {

        $em = $this->getDoctrine()->getEntityManager();

        $builder
            ->add('keywords')
            ->add('disctrict')    
            ->add('price_min')
            ->add('price_max')
            ->add('type')                                             
            ->add('date_from' , 'date', array('widget' => 'single_text'))
            ->add('date_to' , 'date', array('widget' => 'single_text'))
        ;

    }

    public function getName()
    {
        return 'searchProperty';
    }
} 
```

我如何简单地使用`findAllFromCity()`来获取选项列表`->add('disctrict')`？

我知道 Query Builder 解决方案，但它让我重复我的代码。

我已阅读有关服务容器解决方案的信息。适用于我的情况吗？你能告诉我如何或让我走上好轨道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:45:50.603

1.  事实上，在“searchPropertyType”类中访问“findAllFromCity”方法的唯一方法是注入 Doctrine 注册表。

    在您的表单类型类中：

    ```
    use Symfony\Bridge\Doctrine\RegistryInterface;

    class searchPropertyType extends AbstractType
    {
        private $doctrine;

        public function __construct(RegistryInterface $doctrine)
        {
            $this->doctrine = $doctrine;
        } 
    ```

    在您的 services.xml 文件中：

    ```
    <service id="my_project.form.type.search_property" class="{mynamespace}\searchPropertyType" public="false">
        <tag name="form.type" />
        <argument type="service" id="doctrine" />
    </service> 
    ```

2.  为了使用此方法，您必须使用带有 'choices' 或 'choice_list' 选项的 'choice' 类型。

    在您的表单类型类中：

    ```
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            // ...
            ->add('disctrict', 'choice', $this->getDistrictChoices($options['city_id']))
            // ...
        ;
    }

    private function getDistrictChoices()
    {
        $choices = array();
        $districts = $this->doctrine->getRepository('MyBundle:District')->findAllFromCity($cityId);

        foreach ($dictricts as $dictrict) {
            $choices[$district->getId()] = $district->getName();
        }

        return $choices;
    } 
    ```

当然，这是一个示例，需要对其进行调整。请记住：类名的第一个字母总是大写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T02:54:36.467

感谢西蒙，我已经更新如下，现在可以正常工作了！

**搜索控制器：**

```
public function basicsearchAction(Request $request)
{   
    $form = $this->createForm(new searchPropertyType($this->getDoctrine()));

    if ($request->getMethod() == 'POST') {
    $form->bindRequest($request);

} 
```

**搜索属性类型**

```
public function buildForm(FormBuilder $builder, array $options)
    {

        $builder
            ->add('keywords')
            ->add('district', 'choice', array('choices'=>$this->getDistrictChoices(), 'multiple'=>true) )     
            ->add('price_min')
            ->add('price_max')
            ->add('type', 'entity', array('class'=>'FlatShanghaidefaultBundle:propertytype', 
                                          'property'=>'name', 
                                          'multiple'=>true              

                ))

            ->add('date_from' , 'date', array('widget' => 'single_text'))
            ->add('date_to' , 'date', array('widget' => 'single_text'))
        ;

    }

    private function getDistrictChoices()
{
    $choices = array();
    $districts = $this->doctrine->getRepository('FlatShanghaidefaultBundle:district')->findByDefaultCity();

    foreach ($districts as $district) {
        $choices[$district->getId()] = $district->getName();
    }

    return $choices;
} 
```

**服务.yml**

```
services:
    search_property:
        class:        FlatShanghai\propertyBundle\Form\searchPropertyType
        arguments:    [doctrine] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T19:20:26.637

我也担心重复的代码。不仅对于我的查询构建器，而且不想编写自定义选择映射，例如“getDistrictChoices”。我选择在我的 EntityRepository 中抽象我的查询，以使其在我的表单类型中也可用。

这就是我所做的。

我的表格：

```
class UserEditType extends AbstractType
{

    /**
     * @var Session $session
     */
    private $session;

    public function __construct(Session $session){
        $this->session = $session;
    }

    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder
            ->add('firstName')
            ->add('middleName')
            ->add('lastName')
            ->add('username')
            ->add('userStatus', EntityType::class, [
                'class' => UserStatus::class,
                'property' => 'status',
                'query_builder' => function(UserStatusRepository $er) {
                    return $er->createQueryBuilder('s')
                        ->orderBy('s.status');
                },
            ])
            ->add('agency', EntityType::class, [
                'class' => WorkflowGroup::class,
                'property' => 'groupName',
                'query_builder' => function(WorkflowGroupRepository $er) {
                    return $er->createSelectAllQB($this->session->get(AbstractController::SESSION_KEY_AGENCY_ID));
                },
            ])
            ->add('phoneNumber')
            ->add('email', EmailType::class)
            ->add('activationDate', DateType::class, [
                'widget' => 'single_text',
                'format' => 'M/d/yyyy',
                'attr' => [
                    'data-provide' => 'datepicker',
                    'data-date-format' => 'mm/dd/yyyy',
                    'data-date-show-on-focus' => 'false',
                    'data-date-auto-format' => 'true'
                ]
            ])
            ->add('expirationDate', DateTimeType::class, [ 'widget' => 'single_text', 'format' => 'yyyy-MM-dd HH:mm' ]);
        ;
    }
...
} 
```

我的仓库：

```
class WorkflowGroupRepository extends EntityRepository
{
    public function createSelectAllQB($agencyId)
    {
        return $this->createQueryBuilder('w')
            ->addOrderBy('w.groupName', 'ASC')
            ->andWhere('w.agencyId = :agencyId')
            ->setParameter('agencyId', $agencyId);
    }

    public function selectAll($agencyId)
    {
        return $this->createSelectAllQB($agencyId)->getQuery()->execute();
    }
} 
```

# string - Perl 文本差异颜色

> ID：10443242
> 
> 赞同：3
> 
> 时间：2012-05-04T05:40:41.927
> 
> 标签：string, perl, colors, diff

我希望能够比较两个文本字符串并显示颜色的差异。我尝试了[String::Diff](http://search.cpan.org/~yappo/String-Diff-0.04/lib/String/Diff.pm)但无法以颜色显示差异。我正在使用带有 Active State perl 5 版本 12 的 Windows。

编辑：ansi 颜色等不能帮助我显示颜色的差异
编辑：这是我想要的结果

```
$string1 = "这是字符串 1" ;
$string2 = "这是字符串 2" ;

some_diff_cmd($string1,$string2) ;

```

我想要的输出（粗体的条目应该是红色的）

### 字符串不匹配####

string1 = 这是字符串**1**
string2 = 这是字符串**2**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T09:21:34.683

这个怎么样？

```
use Win32::Console::ANSI;
use String::Diff qw( diff );

my @strings = (
  'This is string 1', 'This is string 2'
);

my $BOLD_RED_MARK = "\e[1;31m"; # or \e[0;31m, if bold is not required
my $RESET_MARK    = "\e[0m";

my $diff = String::Diff::diff(@strings,
   remove_open  => $BOLD_RED_SIGN,
   remove_close => $RESET_SIGN,
   append_open  => $BOLD_RED_SIGN,
   append_close => $RESET_SIGN,
);

print $diff->[0], "\n";
print $diff->[1], "\n"; 
```

# dynamics-crm-2011 - 如何在 CRM 2011 中设置选项集值？

> ID：10443253
> 
> 赞同：5
> 
> 时间：2012-05-04T05:41:39.647
> 
> 标签：dynamics-crm-2011

我在 CRM 2011 中设置了一个选项。它有四个选项：

1.  上市
2.  私人的
3.  子公司
4.  其他

通过插件我想设置这个选项集的值。谁能提供我设置此选项集值的语句？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T12:11:22.293

[如何在插件中设置选项集值](http://crmbusiness.wordpress.com/2011/04/14/crm-2011-how-to-set-optionsetvalue-in-a-plugin/)

在插件中，您可以编写`yourEntity.yourAttribute = new OptionSetValue(INDEX);` INDEX 是一个 int，您可以在选项集编辑器中查找（默认值是几位长）。

或者

您将选项集设置为`yourEntity.Attributes.Add(“yourAttribute”, new OptionSetValue(INDEX));`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T07:38:04.540

您可以使用以下设置选项集值：-

```
OptionSetValue myOptionSet = new OptionSetValue();
myOptionSet.Value = xxxx  
myEntity.Attributes["optionSetAttributeName"] = myOptionSet; 
```

// 其中 xxxx 表示所需的值，可以在实体自定义中的属性元数据页面上进行检查

'myEntity' 实际上是 preImage/postImage 还是只是插件中动态创建的实体将决定您是否需要实际调用更新方法，但本质上这是您设置选项集值和更新属性的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:51:36.170

我想我会在这里分享一些用于处理 CRM 中的选项集的代码......

```
fieldValue = ((OptionSetValue)entity.Attributes[field]).Value.ToString();

//need to get Option Set display label based on its value.  This requires getting attribute metadata
RetrieveAttributeRequest attributeRequest = new RetrieveAttributeRequest
{
    EntityLogicalName = entity.LogicalName,
    LogicalName = field,
    RetrieveAsIfPublished = true
};

RetrieveAttributeResponse attributeResponse = (RetrieveAttributeResponse)orgContext.Execute(attributeRequest);
EnumAttributeMetadata attributeMetadata = (EnumAttributeMetadata)attributeResponse.AttributeMetadata;

foreach (OptionMetadata om in attributeMetadata.OptionSet.Options)
{
    if (om.Value == ((OptionSetValue)entity.Attributes[field]).Value)
    {
        fieldlabel = om.Label.UserLocalizedLabel.Label;
    }
}

return fieldlabel; 
```

# jquery - 从数据库重新填充 struts2 checkboxlist 数据

> ID：10443254
> 
> 赞同：0
> 
> 时间：2012-05-04T05:41:52.720
> 
> 标签：jquery, struts2, checkboxlist

我有一个复选框

`<s:checkbox name="modProcessVO.byWeeklyCal" id="week">Days of the Week</s:checkbox>`

和另一个复选框列表`

```
<s:checkboxlist list="{'Mon','Tue','Wed','Thur','Fri','Sat','Sun'}"   name="modProcessVO.weeklyCal" id="days" />`. 
```

当我选中复选框时，它的值将在数据库中存储为“真”，否则为“假”。如果它是“真”，那么只有我从复选框列表中保存选中的数据列表。因此，当我想修改数据时，我需要将其从 DB 重新填充回 checkboxlist 作为 checks 。我尝试在一个名为“wordList”的字符串列表中将 db 中的天数放在行动中，并用 jsp 编写，例如

```
`<s:checkboxlist list="{'Mon','Tue','Wed','Thur','Fri','Sat','Sun'}" 
name="modProcessVO.weeklyCal" value="%{wordList}" id="days" />`. 
```

但是，如果该列表中有 5 个值，则只有第一个值重新填充到复选框列表中。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:53:46.860

wordList 类型是 Strin[] 吗？

```
private String[] wordList ; 
```

## **更新的答案**

```
private String[] checkedItems;
checkedItems = new String[]{"Mon","Tue","Wed"}; 
```

在jsp页面中

```
<s:checkboxlist list="checkboxListIs" name="checkedItem" value="checkedItems" label="Days"></s:checkboxlist> 
```

列表、名称和值是我的操作类中的不同变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:19:05.920

在行动课

```
public class ScheduleAction extends ActionSupport { 
```

`private String checkListData;`

```
private List<String> wordList;

public String modifySchedule() {
checkListData = modProcessVO.getCalWeek(); // retrieving checked items from database
    String regex=",";
    String[] test=checkListData.split(regex);
    wordList = new ArrayList<String>();
for(String str : test)
    {
        wordList.add(str.trim());
    }
return SUCCESS;
}
//getters and setters of variables

} 
```

在jsp我给喜欢

`<s:checkboxlist list="{'Mon','Tue','Wed','Thur','Fri','Sat','Sun'}" name="modProcessVO.weeklyCal" id="days" value="wordList"/>`

# c# - 更改启动画面的持续时间？

> ID：10443255
> 
> 赞同：6
> 
> 时间：2012-05-04T05:41:52.943
> 
> 标签：c#, wpf, xaml, visual-studio-2010, splash-screen

我最近在我的 WPF 应用程序中添加了一个启动画面。我的应用程序加载速度很快，因此屏幕只显示几毫秒。我将如何延长启动画面的停留时间。我希望它是两秒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T05:48:31.647

如果您触发启动画面显示在 Application.Startup 事件中，您将完全控制它。（一定要调用 .Show() 为假）

```
private void Application_Startup(object sender, StartupEventArgs e)
{
   SplashScreen screen = new SplashScreen("splashScreen.png");
   screen.Show(false);
} 
```

然后，您可以在希望关闭初始屏幕时调用 screen.Close()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-05T09:59:39.990

您还可以 在主窗口中的*InitializeComponent*之前调用*System.Threading.Thread.Sleep() 。*这行得通。

 *类似的东西：

```
 public MainWindow()
    {
        System.Threading.Thread.Sleep(2000);
        InitializeComponent();} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T20:11:01.780

最好的方法和使用 API 是

```
 SplashScreen splash = new SplashScreen("splashscreen.jpg");
  splash.Show(false);
  splash.Close(TimeSpan.FromMilliseconds(2));
  InitializeComponent(); 
```*

# javascript - 在滚动外部 div 时到达内部 div 末尾时通知

> ID：10443256
> 
> 赞同：3
> 
> 时间：2012-05-04T05:41:58.593
> 
> 标签：javascript, jquery, html

我在具有滚动条的外部 div 中有 div。我可以在滚动时到达外部 div 的末尾时收到警报，但我想在到达每个内部 div 的末尾时收到警报。

html结构如下。

```
<html><head></head>
<body>
     <div id = "outer" style= "width:200px;height:200px; overflow:auto;">
         <div id = "#1" class = "inner"> blah blah </div>
         <div id = "#2" class = "inner"> blah blah </div>
         <div id = "#3" class = "inner"> blah blah </div>
         <div id = "#4" class = "inner"> blah blah </div>
     </div>
</body>
</html> 
```

我想在到达 div #1、#2、#3、#4 的末尾并且滚动条附加到外部 div 时收到通知。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:58:05.233

**HTML：**

```
 <div id = "outer" style="width:200px;height:200px; overflow:auto;">
     <div id = "#1" class = "inner"> blah blah </div>
     <div id = "#2" class = "inner"> blah blah </div>
     <div id = "#3" class = "inner"> blah blah </div>
     <div id = "#4" class = "inner"> blah blah </div>
     <div id = "#5" class = "inner"> blah blah </div>
     <div id = "#6" class = "inner"> blah blah </div>
     <div id = "#7" class = "inner"> blah blah </div>
     <div id = "#8" class = "inner"> blah blah </div>
     <div id = "#9" class = "inner"> blah blah </div>
     <div id = "#10" class = "inner"> blah blah </div>
     <div id = "#11" class = "inner"> blah blah </div>
     <div id = "#12" class = "inner"> blah blah </div>
 </div>​ 
```

**JS：**

```
jQuery(
  function($)
  {
    $('#outer').bind('scroll', function()
    {
      if($(this).scrollTop() + $(this).innerHeight()>=$(this)[0].scrollHeight)
      {
        alert('end reached');
      }
    })
  }
);​ 
```

**小提琴：**

[http://jsfiddle.net/Yq3MW/](http://jsfiddle.net/Yq3MW/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:13:46.093

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var outerHeightDiv = [], sumHeight = 0;
            $('#outer').find('.inner').each(function (i) {
                sumHeight += $(this).outerHeight();
                outerHeightDiv.push(sumHeight);
            });

            $('#outer').scroll(function () {
                var scrollTopHeight = $(this).scrollTop();
                var indexNo = $.inArray(scrollTopHeight, outerHeightDiv);
                //$('#Result').text('Innner div id is:' + indexNo + ' ' + scrollTopHeight + ' ' + outerHeightDiv.join(',')).show();
                if (indexNo > -1) {
                    $('#Result').text('Innner div id is:' + $('#outer .inner:eq(' + indexNo + ')').attr('id')).fadeIn(600).fadeOut(600);
                }
            });
        });
    </script>
</head>
<body>
    <span id="Result" style="color: Red; font-size: 15px; font-weight: bolder; display: none;">
    </span>
    <div id="outer" style="width: 200px; height: 200px; overflow: auto;">
        <div id="#1" class="inner">
            blah blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blah blah blah blah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blah blah blah blah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blah blah blah blah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blah blah blah blah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blah blah blah blah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blah blah blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah
            ----------------------------------------------------
        </div>
        <div id="#2" class="inner">
            blah blah blah blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah
            blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blah blah blah blah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blah blah blah blah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blah ----------------------------------------------------
        </div>
        <div id="#3" class="inner">
            blah blah blah blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah
            blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blah blah blah blah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            ----------------------------------------------------
        </div>
        <div id="#4" class="inner">
            blah blah blah blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah
            blah blah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blah blah blah blah
            blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah blahblah
            ----------------------------------------------------
        </div>
    </div>
</body>
</html> 
```

# java - java.lang.OutOfMemoryError：向大量收件人发送电子邮件时出现 Java 堆空间

> ID：10443257
> 
> 赞同：1
> 
> 时间：2012-05-04T05:42:02.953
> 
> 标签：java, smtp

我在向大量收件人发送电子邮件时收到 java.lang.OutOfMemoryError: Java heap space。我尝试让 150 个收件人正常工作，但 200 个收件人不工作。

```
 public static void sendMessage(String subject, String text, String sender, String to, String cc, byte[] data, String type) throws Exception {
        try {
            String EmailServer = "";
            String EmailPort = "";
            Properties props = new Properties();
            ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
            InputStream in = in = classLoader.getResourceAsStream("/resources/config.properties");

            props.load(in);
            if (in != null)
                in.close();

            EmailServer = props.getProperty("SMTP_SERVER");

            System.out.println("EmailServer================:" + EmailServer);

            Properties prop = new Properties();
            System.out.println("Properties================:" + prop);
            prop.put("mail.smtp.host", EmailServer);
            // set the port
            //prop.put("mail.smtp.port", EmailPort);
            Session session = Session.getInstance(prop, null);

            Message msg = new MimeMessage(session);
            msg.setSubject(subject);
            msg.setReplyTo(InternetAddress.parse(sender));
            msg.setFrom(new InternetAddress(sender));
            msg.addRecipients(Message.RecipientType.TO, InternetAddress.parse(
                    to, false));
            msg.addRecipients(Message.RecipientType.CC, InternetAddress.parse(
                    cc, false));
            msg.setContent(text, "text/plain");
            msg.setSentDate(new Date());
            System.out.println("Before Transport.send================:" + new Date());
            Transport.send(msg);
            System.out.println("After Transport.send================:" + new Date());
        } catch (javax.mail.SendFailedException e) {

            e.printStackTrace(System.out);
            String invalid = "";
            Address[] address = e.getInvalidAddresses();
            for (int i = 0; i & lt; address.length ;
            i++)
            {
                if (i == 0)
                    invalid = invalid + address[i];
                else
                    invalid = invalid + "," + address[i];
            }
            throw new InvalidEmailAddressException(e.getMessage() + ":" + invalid);
        } catch (javax.mail.MessagingException e) {

            e.printStackTrace(System.out);
            throw new Exception(e.getMessage());
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:48:24.697

你增加堆大小使用 -

```
java -Xms64m -Xmx256m HelloWorld

-Xms<size>        set initial Java heap size
-Xmx<size>        set maximum Java heap size
-Xss<size>        set java thread stack size 
```

[更多帮助](http://java.sun.com/performance/reference/whitepapers/tuning.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:47:13.963

您应该先为他们创建一个组，而不是向单个收件人发送邮件。关于您遇到的错误，您似乎应该为 JVM 分配更多内存（但这完全取决于您的要求、项目等，因此不是最佳解决方案）。

在后期阶段，您可以考虑优化代码以防止与内存相关的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T05:49:55.730

大多数情况下，OutOfMemory 错误可以通过[增加堆大小](http://informix-zone.com/node/46)来解决。但我建议您对应用程序进行性能分析，检查是否存在内存泄漏，或者是否可以（重新）使用某些变量或内存。

请参阅：[Java 调优白皮书](http://java.sun.com/performance/reference/whitepapers/tuning.html)

此外，如果您可以在此处发布代码，会员可以帮助您改进代码设计并可能发现问题（如果有）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-26T04:57:48.793

为时已晚，尽管我回答了这个问题，因为我遇到了与您相同的问题。

我无法更改堆大小，因为它是客户端的服务器，因此不允许我更改设置。

相反，我使用了一个技巧。建议我有一千个收件人。我可以发送 10 次电子邮件，而不是一次向 1000 个收件人发送电子邮件——每次我向 100 个收件人发送电子邮件。

```
for(int idx = 0; idx < emailList.size() ;  idx++){
    msg.addRecipient(Message.RecipientType.TO, new InternetAddress(emailList.get(idx))); //set recipient
    if(( idx != 0 && idx % 100 == 0) || idx == emailList.size() - 1) {
        /* this works when the remainder of idx is 0(when idx is multiple of 100)
            or when idx is the largest one in this loop*/
        Transport.send(msg); //send emails
        msg.setRecipients(Message.RecipientType.TO, new Address[]{}); //clear recipients so that the recipients set in message object changes to 0
    }
} 
```

我希望这个答案可能对遇到此类问题的任何人有所帮助。

# wordpress - 如何更改新帖子的永久链接，同时在 wordpress 中保留现有帖子的现有永久链接

> ID：10443259
> 
> 赞同：5
> 
> 时间：2012-05-04T05:42:12.910
> 
> 标签：wordpress, redirect, blogs, permalinks

我想更改新帖子的永久链接，同时为基于 wordpress 的博客保留所有旧帖子的现有永久链接，以保持反向链接能力和社交分享分数。我搜索了整个 wordpress 插件目录，发现只有一个名为[**Advanced Permalinks**](http://wordpress.org/extend/plugins/advanced-permalinks/)的插件。我尝试了这个插件，但无法获得所需的结果。它为所有以前的帖子提供 404 错误。

你能在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:02:42.493

您必须在开始时设置默认设置，并将页面 ID 和帖子 ID（如**?page_id**或**?p**）放在页面或帖子上，然后从设置中更改永久链接选项。Wordpress 在运行时从默认设置更改永久链接。

# javascript - 有没有办法将 ServletRequest 参数传递给 JavaScript？

> ID：10443267
> 
> 赞同：0
> 
> 时间：2012-05-04T05:43:14.970
> 
> 标签：javascript, servlets

有没有办法将参数的值从**Servlet** 传递给**JavaScript**？以下没有奏效。

```
var val = req.getParameter('valid'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:30:01.127

这不起作用，因为`ServletRequest`它只存在于服务器上，而您的 JavaScript 正在浏览器上运行。很容易混淆区别，因为在服务器上运行的代码和在浏览器中运行的代码通常都写在同一个文件（`someServlet.java`或`somePage.jsp`）中，所以你必须记住一切在运行时是如何存在的。

作为将检索到的信息传递给 JavaScript 的一种方式，您*可以*做的是将数据嵌入到服务器端的页面结构中。然后将页面及其结构传递给浏览器，JavaScript 可以访问客户端的完整页面结构。所以你把这样的东西放在：`request``servlet``servlet`

```
<form name="data" action="" >
    <input type="hidden" id="parmEmpId"
        value='<%= request.getParameter( "EMPLOYEE_NUMBER" ) %>' />

    <input type="hidden" id="parmServerName"
        value="<%= request.getServerName() %>" />
</form> 
```

然后，在您的 JavaScript 中，您可以从页面中提取数据：

```
var employeeId = $("#parmEmpId").val();    //Using jQuery
var server = $("#parmServerName").val();   //Using jQuery 
```

# java - 如何在 Java 中实现自动更新？

> ID：10443269
> 
> 赞同：1
> 
> 时间：2012-05-04T05:43:23.077
> 
> 标签：java, swing, deployment, installation, auto-update

全部：我在这里遇到一个问题，我的应用程序由一些 jar 文件和一些其他文件组成，它们都位于一个目录中。我计划实现一个自动更新功能。当应用程序知道服务器上有新版本时，它将下载一个 zip 文件到临时目录。下载后会询问客户是否要安装。如果是，我的应用程序将退出，我需要解压缩 zip 文件并覆盖原始目录中的所有文件。现在我想知道：

如何解压缩文件并覆盖目录？创建一个脚本（这意味着我需要为 Windows 编写 bat 和为其他平台编写 shell）？创建一个java类来做吗？

退出后如何启动这个脚本/java类？

作业完成后，如何删除安装程序？将它保存在临时目录中并在新版本应用程序启动时检查它？

* * *

## 从后来的评论：

我知道 JWS 是一个不错的选择，但由于“我的老板否认”的原因，我不能使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:47:39.493

自从应用程序。有一个 GUI（根据 Swing 标签判断），使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署它：

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、**自动更新（包括延迟下载和更新的编程控制）、**按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T06:45:57.830

可能有几种方法。既然您说应用程序是跨平台的，那么使用 Java 进行更新是明智的。

您可以创建一个小 jar 文件来处理更新过程。它可能是初始应用程序的一部分（假设它不会被更新），也可能是更新包的一部分（然后您也可以更新它）。

因此，您的应用程序下载 zip，将其解压缩到临时目录并启动更新程序，然后退出。更新程序将新的 jar 复制到旧的 jar 上。

* * *

然而，最好不要重新发明轮子。考虑使用 JWS：它提供了更多的功能并且需要更少的努力来实现。必须有*充分的理由*拒绝 JWS。你应该通过解释使用 JWS 的好处来说服你的老板。

# macos - shell：我可以在 mac 中使用类似 linux 的命令样式 `rm tmp/ -fr`

> ID：10443271
> 
> 赞同：3
> 
> 时间：2012-05-04T05:43:26.200
> 
> 标签：macos, shell, command-line

说，我想在 shell 中删除一个*tmp/*目录。

在 linux（如 ubuntu）中，我可以`rm tmp/ -fr`或`rm -fr tmp/`. 但在 mac 中，我只能`rm -fr tmp/`.

有没有办法配置mac shell（bash/zsh/...），所以我可以使用类似linux的命令样式：`rm tmp/ -fr`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T08:11:55.303

在操作数之后有选项`rm tmp/ -fr`是非标准的。IEEE Std 1003.1-2001 在第[12.2 节实用程序语法指南](http://pubs.opengroup.org/onlinepubs/000095399/basedefs/xbd_chap12.html#tag_12_02)中有：

> 准则 9：所有选项都应在命令行上的操作数之前。

GNU 实用程序（大多数 Linux 发行版使用）的实现者选择添加许多非标准扩展。虽然有时很方便，但使用这些扩展本质上是不可移植的。MacOS X 有一个从 BSD 派生的用户空间，它没有大多数非标准 GNU 扩展。如果您希望将来使用非 GNU 系统，例如 BSD、Solaris 或任何其他商业 UNIX，那么坚持实用程序的标准语法而不习惯任何 GNU 扩展确实是值得的。在使用所有不同的 UNIX 操作系统时，它节省了很多麻烦。这在编写脚本时尤其重要。在脚本中依赖 GNU 语法会使它们无法移植。

因此，与其在 MacOS X 上安装 GNU coreutils，我的建议是使用它作为习惯标准语法（IEEE Std 1003.1、POSIX.2 等）的机会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T07:07:37.860

这取决于您使用的命令。OS X 来自 BSD 家族（通过 NeXTSTEP），因此它们的标准实用程序大多来自 BSD。BSD 和 Linux 风格的命令之间有很大程度的兼容性，但每隔一段时间你就会遇到这样的特定于实现的事情。如果你真的想使用 Linux 版本的命令，你可以安装 GNU coreutils 包。它可从[Homebrew](https://brew.sh/)（推荐）和[MacPorts](https://www.macports.org/)获得。不过，总的来说，由于命名冲突等原因，在内置的 BSD 工具链上安装 GNU coreutils 是一件痛苦的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:48:22.940

它通常取决于您执行的命令的实现。但是，至于`rm`（假设您的意思是[rm](http://pubs.opengroup.org/onlinepubs/000095399/utilities/rm.html)），因为您将其用作示例，所以您不能。至少它不会像你想的那样做。

*   `rm -fr tmp/`: 将删除`tmp/`带有选项`-r`和的目录`-f`，因此是递归的（这里是强制性的）和强制的。
*   `rm tmp/ -fr`: 将（尝试）删除目录`tmp/`和/或名为 的文件/目录`-fr`，但会产生错误：`rm: tmp/ directory`。

*注意*：删除名为的文件的唯一其他方法`-rf`是使用`rm -- -rf`.

# css - 声明一个全局 CSS 属性？这可能吗？

> ID：10443280
> 
> 赞同：0
> 
> 时间：2012-05-04T05:44:29.087
> 
> 标签：css

我有一个非常奇怪的问题，我不知道它是否可能在 css 中

假设我说了 3 个不同的 css 类，如下所示，如您所见，我有所有这些类的共同属性，我想在其他地方声明此颜色并在此处传递对它的引用，所以如果下次我想更改我可以简单地在一个地方更改颜色，而不是在所有 5 个类中更改。

我知道您可以为此使用 body{} 或包装器，但这会影响整个网站的颜色，对吗？有没有办法做到这一点 ？

这甚至可能吗？

```
.abc {
color:red;
}

.abc2 {
color:red;
}

.abc3 {
color:red;
}

.abc4 {
color:red;
}

.abc5 {
color:red;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T05:48:17.933

坏消息：你不能在 CSS 中做到这一点。

好消息：您可以使用像 LESS 这样的元 CSS 语言编写，然后将 LESS 文件处理为纯 CSS。这称为“混合”。

不到：

```
@errorColor: red;

.error-color {
  color: @errorColor;
}

#error-1 {
  .error-color;
}

.all-errors {
  .error-color;
} 
```

更多信息： http: [//lesscss.org/#-mixins](http://lesscss.org/#-mixins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:50:49.880

如果您想一次声明所有这些，您可以使用：

```
.abc, .abc2, .abc3, .abc4, .abc5 {
  color:red;
} 
```

或者您可以声明一个附加类并添加到所有 .abc、.abc2.... 并使其颜色：红色；。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:46:06.233

这不能用 CSS 完成，但通过使用 CSS 预处理器（如 LESS、SASS、SCSS 或 Stylus）仍然是非常流行的事情。

预处理器可以让你定义一个变量（比如 $red = #F00）。它会用你的变量值替换你的 CSS 文档中的变量，让你写出非常 DRY 和模块的 CSS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:48:45.773

此功能称为“CSS 变量”，它是[未来规范](http://dev.w3.org/csswg/css-variables/)的一部分，但尚未在任何浏览器上实现。

目前，在纯 CSS 中执行此操作的最佳方法是为所需的“全局”声明一个附加类，然后将该类添加到所有相关项。

```
.abc_global { color: red; }
.abc1 { /* additional styling */ }
.abc2 { /* additional styling */ }

<div class="abc1 abc_global"></div>
<div class="abc2 abc_global"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:03:06.680

[少](http://lesscss.org/)_

您可以定义一次红色：

```
.myRedColor {

color:red;

} 
```

现在你可以在任何 CSS 样式上调用红色。甚至嵌套样式！这是一个邪恶的工具！

```
.abc1 {

 .myRedColor;

}
.abc2 {

 .myRedColor;

}
.abc3 {

 .myRedColor;

}
.abc4 {

 .myRedColor;

} 
```

嵌套示例：

```
 .abc {

    .itsEasyAsOneTwoThree{
       .myRedColor;

    }

   } 
```

现在，我们所有正确嵌套在“abc”类中的“itsEasyAsOneTwoThree”类都将被分配红色样式。不再记得那些长 #867530 颜色代码 :) 这有多酷？！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-27T18:46:49.557

您还可以将 PostCSS 与插件一起使用`postcss-preset-env`并支持自定义属性/变量，然后使用`:root`选择器添加全局 css 变量。

```
:root {
  --color-gray: #333333;
  --color-white: #ffffff;
  --color-black: #000000;
} 
```

# python - 如何找到一个单词在数组中出现的次数？Python

> ID：10443283
> 
> 赞同：0
> 
> 时间：2012-05-04T05:44:50.363
> 
> 标签：python, arrays

> **可能重复：**
> [python中的项目频率计数](https://stackoverflow.com/questions/893417/item-frequency-count-in-python)

快速提问

你如何找到一个单词在数组中出现的次数？

我有一个包含大约 5000 个文本字的数组，我想找出“帮助”一词在数组中出现的次数。我该怎么做呢？

数组存储在 x 中，所以我的代码如下所示：

```
x = [...]
word = "help" 
```

然后我不知道该放什么来获得“帮助”出现在 x 中的次数

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T05:48:54.137

```
>>> import collections
>>> print collections.Counter(['a', 'word', 'is', 'a', 'thing', 'that', 'is', 'countable'])
Counter({'a': 2, 'is': 2, 'word': 1, 'that': 1, 'countable': 1, 'thing': 1}) 
```

这是 2.7+，一个[Counter](http://docs.python.org/library/collections.html#collections.Counter)。

根据您的编辑，列表中的每个元素都是一个字母而不是完整的单词，然后：

```
>>> import re
>>> letters = 
['i', 'n', 'e', 'e', 'd', 's', 'o', 'm', 'e', 'h', 'e', 'l', 'p', 'h', 'e', 'l', 'p', 'm', 'e', 'p', 'l', 'e', 'a', 's', 'e', 'I', 'n', 'e', 'e', 'd', 'h', 'e', 'l', 'p']
>>> len(re.findall('help', "".join(letters)))
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:26:34.647

正如@sberry 所描述的那样，Counter 将达到目的，但如果您只搜索一个单词并且不感兴趣获得所有单词的出现，您可以使用更简单的工具来达到目的

（我以 sberry 为例）

给定一个单词列表来查找任何给定单词的出现，可以使用`count`列表的方法

```
>>> list_of_words=['a', 'word', 'is', 'a', 'thing', 'that', 'is', 'countable']
>>> list_of_words.count('is')
2 
```

正如您的评论所示，您可能有兴趣搜索字符列表。如

```
letters =
['i', 'n', 'e', 'e', 'd', 's', 'o', 'm', 'e', 'h', 'e', 'l', 'p', 'h', 'e', 'l', 'p', 'm', 'e', 'p', 'l', 'e', 'a', 's', 'e', 'I', 'n', 'e', 'e', 'd', 'h', 'e', 'l', 'p'] 
```

您还可以通过连接所有字符生成字符串后的计数

```
>>> ''.join(letters).count('help')
3 
```

万一单词混乱，`collections.Counter`广告在这里变魔术

```
>>> def count_words_in_jumbled(jumbled,word):
    jumbled_counter = collections.Counter(jumbled)
    word_counter = collections.Counter(word)
    return min(v /word_counter[k] for k,v in jumbled_counter.iteritems() if k in word)

>>> count_words_in_jumbled(['h','e','l','l','h','e','l','l','h','e','l'],'hel')
3
>>> count_words_in_jumbled(['h','e','l','l','h','e','l','l','h','e','l'],'hell')
2
>>> count_words_in_jumbled(['h','x','e','y','l','u','p'] ,'help')
1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T07:12:54.197

```
nhelps = len(''.join(charlist).split('help')[1:] 
```

# functional-programming - 高阶函数 foldl 和 foldr 的实际例子是什么？

> ID：10443285
> 
> 赞同：1
> 
> 时间：2012-05-04T05:45:09.697
> 
> 标签：functional-programming, fold, catamorphism

典型的学术例子是总结一个列表。是否有使用 fold 的真实世界示例来说明其效用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T12:58:21.683

`fold`可能是序列上最基本的操作。询问它的实用性就像询问`for`命令式语言中循环的实用性。

给定一个列表（或数组、树或..）、一个起始值和一个函数，`fold`运算符将列表简化为单个结果。它也是列表的自然[变形](http://en.wikipedia.org/wiki/Catamorphism)（析构函数）。

任何将列表作为输入并在检查列表元素后产生输出的操作都可以编码为折叠。例如

```
sum      = fold (+) 0

length   = fold (λx n → 1 + n) 0

reverse  = fold (λx xs → xs ++ [x]) []

map f    = fold (λx ys → f x : ys) []

filter p = fold (λx xs → if p x then x : xs else xs) [] 
```

折叠运算符不是列表特有的，但可以以统一的方式推广到“常规”数据类型。

因此，作为对多种数据类型的最基本操作之一，它确实有一些用处。能够识别何时可以将算法描述为折叠是一项有用的技能，它将导致代码更清晰。

* * *

参考：

*   [fold 的通用性和表现力教程](http://www.cs.nott.ac.uk/~gmh/fold.pdf)
*   [用 foldr 写 foldl](https://stackoverflow.com/questions/6172004/writing-foldl-using-foldr)
*   [在折叠处](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-10T09:16:06.440

[很多 foldLeft 示例](https://oldfashionedsoftware.com/2009/07/30/lots-and-lots-of-foldleft-examples/)列出了以下函数：

*   和
*   产品
*   数数
*   平均的
*   最后的
*   倒数第二
*   包含
*   得到
*   串起来
*   逆转
*   独特
*   设置
*   双倍的
*   插入排序
*   枢轴（快速排序的一部分）
*   编码（计算连续元素）
*   解码（生成连续元素）
*   组（成偶数大小的子列表）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:22:28.047

我蹩脚的答案是：

*   **foldr**用于将问题减少到原始情况，然后重新组装（表现为非尾递归）
*   **foldl**用于减少问题并在每一步组装解决方案，在原始情况下，您已经准备好解决方案（作为尾递归/迭代）

这个问题立即让我想起了 Ralf Lämmel [Going Bananas](http://channel9.msdn.com/Shows/Going+Deep/C9-Lectures-Dr-Ralf-Lmmel-Going-Bananas)的一次演讲（因为 rfold 运算符符号看起来像香蕉（| 和 |））。将递归映射到折叠甚至一个折叠到另一个折叠有很多说明性的例子。

经典论文（一开始很难）是[使用香蕉的函数式编程，镜头，。](http://eprints.eemcs.utwente.nl/7281/01/db-utwente-40501F46.pdf)以其他操作员的外观命名的[信封和铁丝网。](http://eprints.eemcs.utwente.nl/7281/01/db-utwente-40501F46.pdf)

# quartz-scheduler - Quartz 1.8.5 中 DeleteJob() 和 Unschedulejob() 的区别

> ID：10443287
> 
> 赞同：10
> 
> 时间：2012-05-04T05:45:18.833
> 
> 标签：quartz-scheduler

有人可以告诉我石英 1.8.5 的 deleteJob() 和 unscheduleJob() 之间的区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-04T20:50:32.837

如果您查看 QuartzScheduler.java 中这两种方法的实现[，](http://svn.terracotta.org/svn/quartz/branches/quartz-1.8.x/quartz/src/main/java/org/quartz/core/QuartzScheduler.java)您会注意到 deleteJob(JobKey jobKey)

*   循环遍历所有引用此作业的触发器，以取消调度它们
*   从作业存储中删除作业

而 unscheduleJob(TriggerKey triggerKey) 只是取消调度触发器，因此如果其他触发器引用此作业，它们将不会被更改。

# c++ - 将字符串数组传递给向量 C++

> ID：10443290
> 
> 赞同：0
> 
> 时间：2012-05-04T05:45:38.590
> 
> 标签：c++, arrays, vector

我正在尝试将字符串数组推送到向量，如下所示：

```
 string []URL = {"www.facebook.com","www.orkut.com","www.yahoo.com"};
 Int32 result = URL.Length;
 SetPolicyURL( URL,result);

 SetPolicyURL( char * URLpolicy[], __int32 noURL)
 {
__int32 i  = 0;

while ( i< noURL)
{
    char buf[2512] = {0};

    URLvector.push_back(URLpolicy[i]);
    sprintf( buf," noURL = %d URLpolicy[%d] = %s  URLvector[%d] = %s", noURL,  i,URLpolicy[i] ,i, URLvector.at(i).c_str());

    MessageBoxA(NULL, buf , 0, MB_ICONERROR);

    ++i;
} 
```

}

但是当我尝试显示向量的元素时，我只得到了第一个数组元素两次，而数组的第二个元素位于位置 3。我不明白为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:54:06.233

以下代码应该在没有循环的情况下执行您想要的操作。C++ 允许您插入一个数组，就好像它是向量的迭代器一样。这种方法不太复杂且容易出错。

```
URLvector.insert(URLpolicy, URLpolicy+noURL ); 
```

也改变

```
SetPolicyURL( char * URLpolicy[], __int32 noURL); 
```

到

```
SetPolicyURL( string[] URLpolicy, __int32 noURL); 
```

A`char *[]`与 a 不同`string[]`这就是导致您最初问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T09:34:44.170

```
URLvector.assign(URLpolicy,URLpolicy+noURL) ; 
```

可用于将字符串数组传递给向量。

# ruby-on-rails - Gem install Rails 在 Windows 上失败：连接重置太多

> ID：10443292
> 
> 赞同：1
> 
> 时间：2012-05-04T05:45:51.223
> 
> 标签：ruby-on-rails, windows

我正在尝试安装 Rails。但它给出了同样的错误：太多的连接被重置。我尝试阅读文章来解决它，但仍然没有解决方案。我没有使用任何代理服务器。

它开始获取宝石，但都没有完成。它不断给出以下错误：

> 连接重置太多（[http://cachefly.mirrors.rubygems.org/gems/activemodel-3.0.5.gem](http://cachefly.mirrors.rubygems.org/gems/activemodel-3.0.5.gem)）

我已经尝试了 Stack Overflow 上给出的所有解决方案。但仍然没有解决办法。Rails 是否有像 Ruby 一样的一键式安装程序？

# macos - 使用 Applescript 在 iTunes 中获取流媒体曲目的歌曲名称

> ID：10443294
> 
> 赞同：10
> 
> 时间：2012-05-04T05:46:08.993
> 
> 标签：macos, applescript, itunes

当该曲目是收音机时，如何在 iTunes 中获取当前曲目的歌曲名称？

我的意思是出现在电台名称正下方的字符串:)

![在此处输入图像描述](../Images/2df7e6cccb79971428cee5cfbe15e97a.png)

像下面这样查询它的名字给了我收音机的名字（`Trance Channel - DIGGITALLY IMPORTED - we can't define it!`）但不是歌曲

```
tell application "iTunes"
    set thisTrack to current track
    set trackName to the name of thisTrack
    set trackTime to thisTrack's time
end tell 
```

这是预期的，因为我的图书馆中的信息是： ![在此处输入图像描述](../Images/416bce55bd710359c7f2b917df61a233.png) 但是有没有办法专门处理这个流媒体轨道？并像第一张图片中的 iTunes 一样正确获取他们的信息？我知道当前曲目是收音机，因为如果这有帮助的话，它的时间将是`missing value`而不是形式。`MM:SS`

这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T06:25:28.053

我查看了 iTunes 的 AppleScript 字典并搜索了“流”...

```
tell application "iTunes"
    current stream title
end tell 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-06T22:38:45.023

看来，在 iTunes 12.2 中，各种有趣的事情正在发生。

1.  `current stream title``missing value`请求来自“For You”的流名称时返回（例如，*不在*您当前音乐库中的内容）。`name of the current track`不存在。例如，我现在正在听“For You”中的“Alternative Gems: 1994”（Yay-grad 学生时代），但我无法获得任何关于正在播放的信息。如果我转到正在播放曲目的专辑以播放其他内容，也会`missing value`出现错误-1728 `name of current track`。

2.  当按照上面的@ivan 收听 Beats 1 广播时，我也得到了，`missing value` *但*因为`name of the current track`我得到了“Beats 1”。正如@dougscripts 指出的那样，这些`stream title`东西在地图上各不相同。

3.  收听通过“为你”创建的*广播*电台似乎给了我正确的`name of the current track`.

所以，简而言之，混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:55:22.677

并非所有流媒体都将流数据格式相同，因此当前流标题属性的结果可能不一致。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-18T21:19:08.363

更多的黑客攻击，我终于找到了一种使用 SDK 直接从 iTunes 中获取数据的方法。

此方法将检查`currentTrack`正常情况，但是当检测到`artist`缺少 （在流式传输轨道时的常见理解）时，我们会使用 Accessibility 提供的值从 LCD 显示器获取值。

```
#!/usr/bin/env osascript -l JavaScript
/* globals Application */
function main () {
  var itunes = new Application('iTunes')
  var currentTrack = itunes.currentTrack
  var output = {
    name: currentTrack.name(),
    artist: currentTrack.artist(),
    position: itunes.playerPosition()
  }
  if (currentTrack.artist() === '') {
    var app = new Application('System Events')
    var itunesProcess = app.applicationProcesses.byName('iTunes')
    // Get the text values from the first scrollable area which is the LCD Display
    var arr = itunesProcess.windows[0].scrollAreas[0].staticTexts

    output.name = arr[0].name()
    // Clean up the artist name, as it may contain the Show Name. 
    output.artist = arr[2].name().replace(' — ' + currentTrack.name(), '')
  }
  return JSON.stringify(output, null, 2)
}
main() 
```

示例输出：

```
{
    "name": "Wild Smooth (Gundam Radar Rip)",
    "position": "34:06",
    "artist": "MUBLA"
} 
```

一定要`chmod +x`这个脚本。

请注意，它需要将调用应用程序添加到[Accessibility Privacy](https://apple.stackexchange.com/a/291614/91737)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-22T16:18:56.720

另一种选择 - 考虑到输出的不一致 - 可能是在[VLC](http://www.videolan.org)中播放并查询它 - AppleScript 支持非常有限，但至少[源代码](https://github.com/videolan/vlc/blob/1c2f90725a016ee19523f63c23fb68e5791ce35e/modules/gui/macosx/os-integration/applescript.h)可用，因此您知道可以查询什么。

```
osascript -e 'tell application "VLC" to get name of current item' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-18T14:17:13.510

经过数周的努力，我试图自己解决这个问题。我已经设法为这个确切的问题找到了一个非常hacky的解决方案。

*不过，您不会喜欢它，请注意*。

即使音频是从 Beats 收音机流式传输的，为了获得当前播放曲目，您将不得不考虑 OCR 方法（截屏，将图像转换为文本）

以下 Ruby 代码将帮助您开始使用此解决方案。

它将检查当前轨道，如果该`artist`字段为空白，（这是流式传输轨道时的情况），则属于 OCR 方法。

```
require 'json'
require 'rtesseract'
class CurrentTrack
  def self.check
    js_command = %Q{var itunes = Application("iTunes");
    var currentTrack = itunes.currentTrack;
    JSON.stringify({
      window_bounds: itunes.windows[0].bounds(),
      name: currentTrack.name(),
      artist: currentTrack.artist(),
      position: itunes.playerPosition()
    })
    }
    command = "osascript -l JavaScript -e '#{js_command}'"
    result =  `#{command}`
    json = JSON.parse(result, symbolize_names: true)
    json[:position] = json[:position].to_i
    json[:cue] = Time.at(json[:position]).utc.strftime('%H:%M:%S')
    if json[:artist] == ''
      sc_command = %Q{screencapture -R #{json[:window_bounds][:x]},#{json[:window_bounds][:y].to_i + 30},#{json[:window_bounds][:width]},#{json[:window_bounds][:height]} capture.png}
      `#{sc_command}`
      image = RTesseract.new("capture.png", processor: 'none')
      ocr = image.to_s.split("\n") # Getting the value
      unless ocr.first == 'Soulection'
        json[:name] = ocr.first
        json[:artist] = ocr[1].split(' — ').first
      end
    end
    json.delete :window_bounds

    json
  end
end 
```

您需要安装[rtesseract](https://github.com/dannnylo/rtesseract)才能使其正常工作。

需要注意的是，此脚本要求 iTunes 迷你播放器窗口在您桌面的某处可见。

# python - 在 Python 中将 3 个单独的 numpy 数组组合为 RGB 图像

> ID：10443295
> 
> 赞同：71
> 
> 时间：2012-05-04T05:46:14.470
> 
> 标签：python, image, image-processing, numpy

所以我有一组数据，我可以将其转换为 R、G、B 波段的单独 numpy 数组。现在我需要将它们组合起来形成一个 RGB 图像。

我尝试使用“图像”来完成这项工作，但它需要归因于“模式”。

我试着做一个把戏。我会使用 Image.fromarray() 将数组转换为图像，但是当 Image.merge 需要“L”模式图像进行合并时，默认情况下它会达到“F”模式。如果我首先将 fromarray() 中的数组属性声明为“L”，那么所有 RGB 图像都会失真。

但是，如果我保存图像然后打开它们然后合并，它工作正常。图像以“L”模式读取图像。

现在我有两个问题。

首先，我不认为这是一种优雅的工作方式。所以如果有人知道更好的方法，请告诉

其次，Image.SAVE 无法正常工作。以下是我面临的错误：

```
In [7]: Image.SAVE(imagefile, 'JPEG')
----------------------------------------------------------------------------------

TypeError                                 Traceback (most recent call last)

/media/New Volume/Documents/My own works/ISAC/SAMPLES/<ipython console> in <module>()

TypeError: 'dict' object is not callable 
```

请提出解决方案。

请注意，图像大约是 4000x4000 大小的数组。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-05T15:06:24.730

```
rgb = np.dstack((r,g,b))  # stacks 3 h x w arrays -> h x w x 3 
```

还要将浮点数 0 .. 1 转换为 uint8 s，

```
rgb_uint8 = (np.dstack((r,g,b)) * 255.999) .astype(np.uint8)  # right, Janna, not 256 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-05-04T08:40:13.780

我不太明白你的问题，但这里有一个我最近做过的类似事情的例子，看起来它可能会有所帮助：

```
# r, g, and b are 512x512 float arrays with values >= 0 and < 1.
from PIL import Image
import numpy as np
rgbArray = np.zeros((512,512,3), 'uint8')
rgbArray[..., 0] = r*256
rgbArray[..., 1] = g*256
rgbArray[..., 2] = b*256
img = Image.fromarray(rgbArray)
img.save('myimg.jpeg') 
```

我希望这会有所帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-11-04T17:52:42.583

```
rgb = np.dstack((r,g,b))  # stacks 3 h x w arrays -> h x w x 3 
```

如果您传递 3 个通道，此代码不会创建 3d 数组。剩余 2 个频道。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-04T08:51:35.583

在将 numpy 数组传递给`uint8`之前将它们转换为`Image.fromarray`

例如。如果您有 [0..1] 范围内的浮点数：

```
r = Image.fromarray(numpy.uint8(r_array*255.999)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-24T05:14:49.640

我认为您的失真是由您将原始图像拆分为各个波段然后在将其合并之前再次调整大小造成的；

```
`
image=Image.open("your image")

print(image.size) #size is inverted i.e columns first rows second eg: 500,250

#convert to array
li_r=list(image.getdata(band=0))
arr_r=np.array(li_r,dtype="uint8")
li_g=list(image.getdata(band=1))
arr_g=np.array(li_g,dtype="uint8")
li_b=list(image.getdata(band=2))
arr_b=np.array(li_b,dtype="uint8")

# reshape 
reshaper=arr_r.reshape(250,500) #size flipped so it reshapes correctly
reshapeb=arr_b.reshape(250,500)
reshapeg=arr_g.reshape(250,500)

imr=Image.fromarray(reshaper,mode=None) # mode I
imb=Image.fromarray(reshapeb,mode=None)
img=Image.fromarray(reshapeg,mode=None)

#merge
merged=Image.merge("RGB",(imr,img,imb))
merged.show()
` 
```

这很好用！

# magento - 关于 Magento 数据库的一系列查询

> ID：10443302
> 
> 赞同：0
> 
> 时间：2012-05-04T05:47:09.777
> 
> 标签：magento, filepath

新客户是通过哪个文件创建并保存在 Magento 数据库中的？

使用哪个功能？

请向我提供完整的路径位置和函数名称。

还告诉我有关客户群的信息。客户组从哪里以及通过哪些文件/功能保存在 Magento 中？

客户和客户群是如何关联的？

如何从这些文件中“捕获”客户 ID 和客户组 ID？

我找到了**Magento 保存新客户**的文件-：

```
/magento/app/code/core/Mage/Adminhtml/controllers/CustomerController.php 
```

在文件**CustomerController.php**中，有一个函数**saveAction()**将客户保存在 Magento db 中。我想知道如何 从 CustomerController.php 文件中捕获**新创建的客户 ID（我猜是 Magento db 的 Customer_entity 表中的实体 ID） 。**

我试过这个，但它对我不起作用——”

```
$customer_data = Mage::getModel('customer/customer')->load($customer_id); 
```

任何人都知道如何在创建新客户时捕获客户 ID ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:34:14.000

尝试在这里搜索：

```
Mage_Customer_AccountController->createPostAction 
```

那么类名的意思

(根)/app/code/core/Mage/Customer/controllers/AccountController

```
Mage_Adminhtml_Customer_GroupController 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T10:01:02.147

实际上客户组是从后端分配的，默认情况下为客户组选择一般组，如果您想获取客户组，则可以使用此代码`Mage::helper('customer')->getGroups()->toOptionArray();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:35:27.943

查看 app/code/core/Mage/Customer/controllers 中的 AccountController.php，它会让您了解如何处理客户注册。基本上创建了 Mage_Customer_Model_Customer 的一个实例，为其分配适当的数据（从注册表单上的帖子表单收集​​或通过 Web 服务调用接收）并保存模型。Magento 内部机制将这些数据放入适当的数据库表中。另请参阅 Mage_Customer_Model_Customer_Api 类的创建函数。

客户组在 Mage_Adminhtml_Customer_GroupController->saveAction() 中创建，使用的模型是 Mage_Customer_Model_Group

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T11:03:37.510

搜索此文件

```
/YourProject/app/code/core/Mage/Customer/controllers/AccountController.php 
```

搜索这个函数名

```
public function createPostAction() //Magento saves New Customer 
```

上述功能负责新客户注册。

```
print_r($this->getRequest()->getPost()); //get all the post data
print_r($session);                       //get all the session data 
```

# java - 为什么不推荐使用 JPasswordField 中的 getText()？

> ID：10443308
> 
> 赞同：36
> 
> 时间：2012-05-04T05:48:16.543
> 
> 标签：java, swing, jpasswordfield

我以前从未想过，只是我使用了`getPassword`返回字符数组的方法，并且我看到该`getText`方法已**弃用**。但现在我想，为什么这种方法被**弃用**了？

Java 文档解释：

> **已弃用**。*从 Java 2 平台 v1.2 开始，由`getPassword`.*
> 
> 获取由组件表示的文本的一部分。如果长度为 0，则返回一个空字符串。
> 
> 出于安全原因，不推荐使用此方法。请改用该`getPassword`方法。

但是这些***安全原因***是什么？有什么想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-04T05:52:50.647

调用时`getText`，您会得到一个可能不会更改（反射除外）的字符串（不可变对象），因此密码将保留在内存中，直到垃圾收集。

调用时`getPassword`您会得到一个可能被修改的 char 数组，因此密码实际上不会留在内存中。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-07-02T22:01:27.733

试试这个 ：

```
String myPass=String.valueOf(passwordField.getPassword()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-04T05:53:17.007

这样做的原因是，如果您以字符串而不是字符数组的形式请求密码，则包含密码的字符串现在将在 Java 运行时的内存中浮动一段未指定的时间。它可能会被恶意 Java 组件或外部程序从那里读取。

通过使用 char 数组，您可以验证密码，然后立即对其进行加扰。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-04T06:16:13.677

这种行为背后的原因是 Java 字符串池（有关更多信息，请参见例如[这个 SO 问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)）。一旦您将该密码字段的内容转换为 a `String`（如果您使用该`getText`方法会发生这种情况） ，该密码就会`String`被放入池中，并且可以被其他人读取。

如果您查看该`getPassword`方法的实现（如作为对您的问题的评论发布的[SO 问题](https://stackoverflow.com/questions/983964/why-does-jpasswordfield-getpassword-create-a-string-with-the-password-in-it)@Garbage 中所见），您可以仔细地看到这避免了创建`String`.

请注意，这也意味着您不应该做类似的事情

```
if ( Arrays.equals( "mySuperSecretPassword".toCharArray(), passwordField.getPassword() ) ) 
```

或者您仍然将密码放入池中，然后您可以轻松使用该`getText`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-09T09:27:39.050

*   getText() 返回一个字符串，以便将字符串（作为标准 Java 行为）添加到字符串池中。字符串池由垃圾收集器清理，但仅在它起作用时（并且不能按需）。因此，即使不需要密码，密码也可以保留在池中，并且可以由其他 Java 进程读取。

*   getPassword() 返回一个字符数组。这些不是字符串，而是数组对象，因此尽管垃圾收集器需要时也会将它们删除，但它们不会保留在任何池中，并且其他 java 进程无法访问它们。

但是你必须小心你如何使用 getPassword() 读取的字符数组，因为如果我们将它转​​换为字符串，那么它会进入池，就像我们使用 getText() 一样糟糕。 ..

# graph - 如何在 orientdb 中显示带有查询结果的图形

> ID：10443315
> 
> 赞同：1
> 
> 时间：2012-05-04T05:48:40.830
> 
> 标签：graph, orientdb

我是orientdb的新手。

我想知道如何用查询结果显示图中的节点/边图。我在网上搜索它，但是，我仍然找不到线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T09:13:10.753

使用 OrientDB 工作室：

1.  启动 OrientDB 作为服务器
2.  连接到[http://localhost:2480](http://localhost:2480)
3.  在“查询”选项卡中执行您的查询
4.  获取一个项目并单击“图表”选项卡

# python - Python subprocess.Popen 更改文件夹权限？

> ID：10443323
> 
> 赞同：1
> 
> 时间：2012-05-04T05:49:15.727
> 
> 标签：python, ubuntu

在 Ubuntu 中，我使用`subprocess.Popen`调用一个可执行文件，它将一些输出文件保存在服务器的硬盘上。该代码已在本地计算机上成功测试。但是，它在服务器上不起作用。我的代码如下：

```
#create a new folder. The permission is drwxrwx both locally and on the server end
os.makedirs(folder)

#copy the executable file to this folder. The permission is drwxrwx both locally and on the server end after copy
shutil.copy("a.exe", folder)

#call this exe file. The permission is drwxrwx locally but changed to drwxr-x on the server end. Since I do not have the write permit, my code fails.
subprocess.Popen("a.exe") 
```

我不确定为什么 subprocess 会更改我在服务器端的文件夹权限。那么有人可以给我一些建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:59:31.687

尝试：

```
subprocess.Popen("a.exe", shell=True) 
```

# javascript - 如何使用 javascript 将 OLE 自动化日期转换为可读格式？

> ID：10443325
> 
> 赞同：4
> 
> 时间：2012-05-04T05:49:24.633
> 
> 标签：javascript, date, ole

您必须了解 .NET 方法“DateTime.FromOADate(double d)”。我需要在 javascript 中实现相同的功能。即给定一个像“40967.6424503935”这样的双重值，它必须转换为“2/28/2012 3:25:07 PM”有人可以帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T06:40:46.220

自动化日期是自 1900 年 1 月 1 日以来的天数（奇怪地将 1900 年视为闰年）。所以一个转换是：

```
var oaDate = 40967.6424503935;
var date = new Date();
date.setTime((oaDate - 25569) * 24 * 3600 * 1000);
alert(date); 
```

此解决方案创建一个 UTC 日期。当您显示它时，它将以您当地的时区显示。根据您的日期是本地日期还是 UTC 日期，这是正确的，或者需要一些额外的时区摆弄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-10T19:20:31.570

正如@donovan 所分享的，它实际上来自 12/30/1899 [.net 函数文档](https://docs.microsoft.com/en-us/dotnet/api/system.datetime.tooadate?view=netcore-3.1#:%7E:text=An%20OLE%20Automation%20date%20is,that%20day%20divided%20by%2024.&text=The%20minimum%20OLE%20Automation%20date%20is%20midnight%2C%201%20January%200100.)

OLE 自动化日期以浮点数形式实现，其整数部分是 1899 年 12 月 30 日午夜之前或之后的天数，其小数部分表示当天的时间除以 24。例如，12 月 31 日午夜1899用1.0表示；1900 年 1 月 1 日上午 6 点由 2.25 表示；1899 年 12 月 29 日午夜，用 -1.0 表示；1899 年 12 月 29 日上午 6 点用 -1.25 表示。

# c++ - 向向量添加一个新项目并将其剩余部分向右移动

> ID：10443332
> 
> 赞同：4
> 
> 时间：2012-05-04T05:50:26.450
> 
> 标签：c++

我正在尝试将一个新项目放入向量中，并转移剩余的项目。我怎样才能做到这一点 ？

前任

```
vector -------------------------------------------------------
       | 1 | 2 | 3 | 4 | 5 | 9 | 10 | 15 | 21 | 34 | 56 | 99 |
       -------------------------------------------------------
                                      ^
new item = 14, it should be added to  ^

After insertion, 

vector ------------------------------------------------------------
       | 1 | 2 | 3 | 4 | 5 | 9 | 10 | 14 | 15 | 21 | 34 | 56 | 99 |
       ------------------------------------------------------------
                                         ^                         ^
                                         ^-shifted to right by one-^ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T05:53:06.927

检查[vector::insert()](http://en.cppreference.com/w/cpp/container/vector/insert)函数。

```
vector<int> vec ;

// Add elements to vec
vec.insert(vec.begin() + position, new_item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:52:26.963

使用`insert`.

```
vector<int> v {1,2,3,5};
v.insert (v.begin() + 3, 4); //v is now {1,2,3,4,5} 
```

您还可以插入一系列元素和其他很酷的东西，类似于向量构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:30:14.747

如果您不知道要插入它的确切位置，那么`vec.insert()`将无法正常工作。

```
vec.push_back(15);
std::sort(vec.begin(), vec.end()); 
```

# payment-gateway - 如何解决 Sagepay 支付网关错误，“4006：此帐户不支持请求的 TxType”？

> ID：10443334
> 
> 赞同：6
> 
> 时间：2012-05-04T05:50:46.083
> 
> 标签：payment-gateway, payment, payment-processing, opayo, payment-services

在 Live 网站上提交表单时，我得到了以下错误。

状态：无效

状态详细信息：4006：此帐户不支持请求的 TxType。

我的 sagepay 设置是 LIVE 如下，

SAGEPAY_CONNECT_TO = '直播'; SAGEPAY_TRANSACTION_TYPE = '付款';

但它不工作。有人说它更改为“DEFERRED”，但它也不起作用。以上设置在测试模式下工作正常，对于测试模式设置，

SAGEPAY_CONNECT_TO = '测试'; SAGEPAY_TRANSACTION_TYPE = '付款';

我该如何解决这个问题？谁能帮我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T10:03:08.787

对于其他有同样问题的人，这不是代码上的问题。您需要联系 SagePay 并要求他们为“付款”或“延期”激活您的帐户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-19T07:41:38.693

我们必须确保在使用 Omnipay 集成时添加了这些交易类型

TX 验证 TX 授权 TX 令牌

我们也是 MOTO 服务，因此也必须添加。

# javascript - 隐藏表格行时 HTML 列宽发生变化

> ID：10443337
> 
> 赞同：7
> 
> 时间：2012-05-04T05:50:59.673
> 
> 标签：javascript, html-table, width

我是网络编程的新手，所以我可能在这里犯了一些明显的错误。

当我试图从像 rows[i].style.display = 'none' 这样的 javascript 中隐藏表格中的一行时，表格布局完全被破坏了。最初，单元格内容被包裹，表格宽度被缩小。然后我在表格标签中添加了 style="table-layout:fixed" 并在每个 td 中添加了 style="white-space:nowrap"。这停止了​​换行，但内容仍然没有在一行上对齐。如果空间和列宽从一行到另一行不同，则单元格开始向左移动。然后，我为每个 th 和 td 元素以及包含表格的 div 添加了一个固定宽度。问题仍然存在。

我当前的 HTML 类似于以下内容。

* * *

```
<div style="width: 300px">
  <table id="errorTable" width="100%" cellpadding="5" cellspacing="2" style="table-layout: fixed"> 
    <tr id="HeaderRow">
      <th style="width: 100px;">Header 1</th>
      <th style="width: 50px;">Header 2</th>
      <th style="width: 150px;">Header 3</th>
    </tr>
    <tr id="DetailRow1">                                        
      <td style="white-space:nowrap; width: 100px;">Data 1_1 in Row 1</td>
      <td style="white-space:nowrap; width: 50px;">Data 1_2  in Row 1</td>
      <td style="white-space:nowrap; width: 150px;">Data 1_3 in Row 1</td>
    </tr>
    <tr id="DetailRow2">                                        
      <td style="white-space:nowrap; width: 100px;">Data 2</td>
      <td style="white-space:nowrap; width: 50px;">Data 2</td>
      <td style="white-space:nowrap; width: 150px;">Data 2</td>
    </tr>
    <tr id="DetailRow3">                                        
      <td style="white-space:nowrap; width: 100px;">Data 3_1</td>
      <td style="white-space:nowrap; width: 50px;">Data 3_2</td>
      <td style="white-space:nowrap; width: 150px;">Data 3_3</td>
    </tr>
  </table>
</div> 
```

* * *

第一次显示表格时，列正确对齐，宽度分别为 100、50 和 150 像素。但是如果一行，比如第二行被隐藏，剩下的两行显示的单元格宽度不再固定为 100、50 和 150，并且数据不再垂直对齐。请注意，整个表格宽度仍为 300 像素。如果有可用空间，则每个单元格中的数据向左移动，并且最后一列（在本例中为第三列）使用了额外的空间。

如您所见，以下帖子很有帮助，但并没有完全解决我的问题。 [隐藏表格行而不调整整体宽度](https://stackoverflow.com/questions/147208/hiding-table-rows-without-resizing-overall-width)

任何帮助都将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-11-15T08:42:39.887

希望这可以帮助那些正在努力解决同样问题的人。而不是使用`display: none;`我用于`visibility: collapse;`隐藏行。这仍然保持列的宽度和整个布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-21T16:52:49.873

问题是您用来使表格行可见的显示类型。
要隐藏表格行，请使用**display="none"**
要显示表格行，请使用**display="table-row"**
我做了一个示例，以便您可以看到这些操作。

```
function show(){
  document.getElementById('trB').style.display='table-row';
}

function hide(){
  document.getElementById('trB').style.display='none';
}
```

```
@import url("https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css");

table{
  border: 1px solid #ccc;
}
```

```
<table id="myTable" class="table table-striped table-hover">
  <thead>
      <tr>
          <td>#</td>
          <td>Letter</td>
      </tr>
  </thead>
  <tbody>
    <tr id="trA">
        <td>1</td>
        <td>A</td>
    </tr>
    <tr id="trB">
        <td>2</td>
        <td>B</td>
    </tr>
    <tr id="trC">
        <td>3</td>
        <td>C</td>
    </tr>
  </tbody>
 </table>

 <button id="showB" onclick="show()">show B</button>
 <button id="hideB" onclick="hide()">hide B</button>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-31T09:46:54.530

我遇到了同样的问题：我试图隐藏一列，`elem.style.display="none"`但再次显示时布局被破坏。这种显示风格对我有用：

`columns.item(i).style.display = "table-cell";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:52:40.540

始终固定列的宽度。这会解决你的问题吗？

```
.myTable td{ width:33% !important; } 
```

`thead`理想情况下，您还应该使用and将标题和正文部分括起来`tbody`

```
<table>
  <thead>
    <tr> ... </tr>
  </thead>

  <tbody> 
    .  
    .      
    .
  </tbody>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T16:10:44.713

我有同样的问题。我在每张桌子上扔了一个跨度，看看我是否可以强制宽度，它似乎工作。虽然很丑。

# java - 何时使用抽象类和接口？

> ID：10443344
> 
> 赞同：-1
> 
> 时间：2012-05-04T05:51:36.853
> 
> 标签：java, interface, abstract-class

为什么我们使用接口？

当我们实现一个接口时，我们必须为该接口的方法编写定义。那么，需要实现什么接口呢？我们可以直接在类中编写方法。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:09:00.810

一个示例可能对您有用，请参见以下场景。

```
1.class A extends B{
..
..
..
} 
```

当 A 扩展 B 并且您正在创建 A 新类 C 时，您不能使 A 与 B 一起扩展 C 所以`go for Interface.`

```
2.class A implements B {
..
..
} 
```

如果在 B 中添加一个新方法，并且它（B）由 100 个类实现，那么很难在所有类中实现新方法，所以**请使用抽象类**并添加具有骨架实现的新方法。

如需进一步帮助，请阅读Joshua Bloch 的[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:54:42.753

你有一个方法被 N 个类使用。如果定义与每个类不同，请使用接口。

假设一个方法对于 50 个类是相似的，而另外 50 个类具有不同的行为意味着使用抽象类。在那里你定义了方法。

并且用于前 50 个类，其余 50 个类具有不同的行为，因此根据类行为覆盖现有方法。
例子

```
Interface Graphics
{
   void size();
   void draw();

}

Class Rectangle implements Graphics
{
     void size()
     {
        x=10;
        y=10;
     }
    void draw()
    {
       .....
    }

}
class Triangle implements Graphics
{
   void size()
     {
        x=10;
        y=10;
     }
    void draw()
    {
       .....
    }

} 
```

所以两个类的大小都相同然后使用抽象

```
abstract class Graphics
{
   void size()
     {
        x=10;
        y=10;
     }
    abstract void draw();

} 
```

然后，如果任何类扩展了此类，则大小相似，并且仅定义`draw()` 如果某些类需要不同的位置，则覆盖大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:58:00.630

这更像是面试问题 -

关于何时使用长期存在的东西的决定是与很多人讨论的问题之一，他们有自己的观点或支持这个或那个想法。我认为有一个基本规则几乎每次都有效：如果你能做出“A 是 B”的陈述，就使用抽象类和继承。如果您可以声明“A 能够 [doing] as”，或者也可以抽象类是什么，接口代表类可以做什么，请使用接口。

例如，我们可以说三角形是多边形，但说三角形能够成为多边形是没有意义的。

无论如何，与以往一样，经验法则是：使用你的常识。有时一个界面更适合，即使上面的规则告诉你相反，如果是这样的话，它只是使用界面（当然在考虑后果之后）。

# sql-server - 如何修复错误“不支持此服务器版本。仅支持最高 microsoft sql server 2008 的服务器'？

> ID：10443345
> 
> 赞同：0
> 
> 时间：2012-05-04T05:51:40.040
> 
> 标签：sql-server, visual-studio-2010, sql-server-2012

我最近在我的开发机器上安装了 Microsoft SQL Server 2012。我正在使用带有 SP1 的 Visual Studio 2010。

安装 SQL Server 2012 后，我无法再使用项目本地 MDF 文件，我收到消息

```
This server version is not supported. only servers up to microsoft sql server 
2008 are supported" when i try to work with them. 
```

早先版本的 SQL/Visual Studio 已报告此问题，但我还没有找到解决**SQL 2012**的方法。有没有人有修复或解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:07:14.507

因为它`Visual Studio 2010`是在您之前发布的，`SQL Server 2012`所以您无法使用本地 MDF 文件或任何涉及 sql server 的设计时内容。

但是，您可以`SQL Server 2012`通过在代码中建立 sql 连接来使用。

# c# - 程序流程不是预期的

> ID：10443347
> 
> 赞同：1
> 
> 时间：2012-05-04T05:51:52.077
> 
> 标签：c#

在这里构建一个简单的应用程序；有问题的方法：

静态硬币类

```
public static void SetUpCoins() {
        coin1 = new Coin(); 
        coin2 = new Coin();
    }

 public static void PlayConsole() {
        SetUpCoins();
        OutputWinner();            
    }

      public static void OutputWinner() {

        if (coin1.ToString() == "Heads" && coin2.ToString() == "Heads") {
            Console.WriteLine("You threw Heads - you win");
            ++point_player;
        } else if (coin1.ToString() == "Tails" && coin2.ToString() == "Tails") {
            Console.WriteLine("You threw Tails - I win");
            ++point_comp;
        } else {
           Console.WriteLine("You threw Odds");
           WaitForKey_ConsoleOnly("Press any key to throw again");
           PlayConsole();
        }

        Console.WriteLine("You have {0} points and the computer has {1} points", point_player, point_comp);

        if (WantToPlayAgain_ConsoleOnly()) { // ask user if they want to play again; return bool
            PlayConsole();
        }
      }

 private static bool WantToPlayAgain_ConsoleOnly() {
            string input;
            bool validInput = false;
            do {
                Console.Write("Play Again? (Y or N): ");
                input = Console.ReadLine().ToUpper();
                validInput = input == "Y" || input == "N";
            } while (!validInput);

            return input == ("Y"); 
        } 
```

如果`false`是从`WantToPlayAgain_ConsoleOnly()`程序返回不退出。这是输出示例，它解释了我的问题：

![在此处输入图像描述](../Images/174fce57ec46bf68715f377312e97ae1.png)

为什么，当`WantToPlayAgain_ConsoleOnly`为假时，程序不通过控制`playConsole`方法然后退出。而不是这种重复。

运行完成`OutputWinner`后，它会跳转到`PlayConsole`，然后返回到`OutputWinner`- 不知道为什么的 else 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:30:48.523

因为您在“按任意键再次抛出”之后调用 PlayConsole()。一旦该调用返回，该程序将无条件地继续“您有 {0} 分，而计算机有 {1} 分”，无论通话期间发生了什么。

尝试将逻辑重写为迭代而不是递归？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:43:26.700

正如前面的答案所说，你在投掷赔率时会遇到问题。因为此时您再次调用完全相同的方法，当该调用返回时，您会在分数显示处继续，并再次要求玩家玩。
因为你是`PlayConsole`递归调用，这意味着每次你抛出“奇数”时，你都会得到一个你没有要求的提示。

您可以像这样重组方法：

```
 public static void OutputWinner() {
    do {
        // Game code
    }
    while (WantToPlayAgain_ConsoleOnly());
  } 
```

这也摆脱了递归。

# ruby-on-rails - Rails 中的自定义验证

> ID：10443349
> 
> 赞同：0
> 
> 时间：2012-05-04T05:51:56.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Post has_many Comments 关联。Post 具有布尔属性`published`。当`post.published`为假时，新的评论不应该是有效的。完成这种验证的最佳实践是什么？

我试图通过这种方式做到这一点，但遗憾的是，它不能正常工作。仍然可以为未发布的帖子创建新评论。

```
class Comment < ActiveRecord::Base
  validates :post_id, presence: true, if: :post_is_published

  ...
  def post_is_publised
    post && post.published
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:40:26.967

嗯..我认为您的代码中有语法错误...试试这个：

```
class Comment < ActiveRecord::Base
  validates :post_id, :presence => true, :if => :post_is_published

  def post_is_publised
    post.try(:published)
  end
end 
```

在阅读您的控制台输出并再次检查您的问题后：

```
class Comment < ActiveRecord::Base
  validate :post_has_to_be_published

  def post_has_to_be_published
    unless post.try(:published)
      self.errors.add(:base, "you can add comments only to published posts")
    end
  end
end 
```

我了解您不希望允许向未发布的帖子添加评论。上面的代码应该可以做到这一点。

# php - PHP：获取某个占位符之间的字符串的最佳方法是什么

> ID：10443355
> 
> 赞同：1
> 
> 时间：2012-05-04T05:52:29.677
> 
> 标签：php

我想知道是否有人可以帮助我

我有这段代码可以在 [回复] 之间获取一些文本

```
$msg    =   '> **
>   <#1371620c479a4e98_>  Chauffeure -Emails  driver_age:72
> driver_nationality:IN
> driver_languages:French,
> driver_name:Rinto George
> driver_mobilenumber:9747 161861
> driver_email:rinto@example.com[reply]I am a principal yes , I know
> you[reply]  Fragen oder Hilfe benotigt?
> 089-38168530 Secure Transmission of Sensitive Data by SSL
>'; 
```

**使用代码**

```
preg_match_all("/\[reply](.*)\[reply]/", $msg, $reply); 
print_r($reply) 
```

但它没有输出我想要的输出

**建议**

如果你可以通过使用 [reply]Reply here[/reply] 来解决它会更好，因为我正在使用 [reply][reply] ，看起来格式不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:03:44.443

你不想要正则表达式。虽然您可以使用简单的正则表达式（例如发布的一个 webbandit）来完成您尝试为最基本的案例所做的事情，但它将打破更复杂的示例（例如我评论中的示例）。

这可以通过更好的正则表达式和前瞻来解决，但这不是你想要的。你正在做字符串匹配，你应该使用有限的机器来完成它。PHP 的字符串算法可以给你一些快速而肮脏的东西，它会更好地工作，例如

```
<?php

$text = "[reply] something [reply] bla bla bla [reply] something else [reply]";

$matches = array();
$lastMatch = 0;
$matchCount = 0;

$search = "[reply]";

while(true) {
    $thisMatch = strpos($text, $search, $lastMatch+1);
    if($thisMatch === FALSE)
        break;
    if(++$matchCount % 2 == 0)
    {
        $lastMatch = $thisMatch;
        continue;
    }
    //print substr($text, $lastMatch + strlen($search), $thisMatch - $lastMatch - strlen($search)) . "\n";
    array_push($matches, substr($text, $lastMatch + strlen($search), $thisMatch - $lastMatch - strlen($search)));
    $lastMatch = $thisMatch;
}

print_r($matches);

?> 
```

会给你一系列的回复`$matches`。

输出：

```
[mqudsi@iqudsi:~/Desktop]$ php reply.php 
Array
(
    [0] =>  something 
    [1] =>  something else 
) 
```

* * *

对于您修改后的问题`[reply]`and `[/reply]`，解决方案在这里：

```
$text = "[reply] something [/reply] bla bla bla [reply] something else [/reply]";

$matches = array();
$end = -1;

while(true) {
    $start = strpos($text, "[reply]", $end+1);
    $end = strpos($text, "[/reply]", $start+1);
    if($start === FALSE || $end === FALSE)
        break;

    array_push($matches, substr($text, $start + strlen("[reply]"), $end - $start - strlen("[reply]")));
    $lastMatch = $thisMatch;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:11:19.557

取正则表达式过滤器的奇数数组结果`/\[reply\].*/`会给你你想要的

这里的结果

```
Array
(
    [0] => Array
        (
            [0] => [reply]I am a principal yes , I know
            [1] => [reply]  Fragen oder Hilfe benotigt?
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:23:43.797

不知道为什么 Gokhan 删除了他的答案，但它是正确的。

```
"~\[reply](.*?)\[/reply]~is" 
```

您唯一需要的两件事是一个`s`修饰符，它告诉正则表达式将表达式应用于整个文本，而不是单独的每个字符串（默认情况下）
和一个贪婪限制器`?`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T05:56:52.093

正则表达式是：`/\[reply\]([^\[]+)\[\/reply\]/g`

# css - 右侧具有可变高度 div 的全尺寸背景图像

> ID：10443360
> 
> 赞同：1
> 
> 时间：2012-05-04T05:52:49.917
> 
> 标签：css

我根据在互联网上找到的示例编写了以下居中背景图像的代码。现在我需要在右边添加一个300px宽的框，根据top和right进行一定的对齐，但是我的代码不起作用。

```
 <style type="text/css">

        #bg {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
        }

        #bg img {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin: auto;
            min-width: 50%;
            min-height: 50%;
        }

        #box 
        {
            position: absolute;
            width: 300px;
            top: 200px;
            right: 100px;             
            background-color: White;
        }

    </style>

    <div id="bg">
        <img src="bg.jpg" alt="">
        <div id="box">
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
            <p>some</p>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:00:36.193

您必须移动`#box`外部`#bg`（例如，使它们成为兄弟姐妹）。

其他选项是将您定义`#bg`为：

```
 #bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    } 
```

然后`#box`就会出现。问题是它`#bg`不会表现为“*全局*”背景，因为如果前者溢出视口，那么后者将不会调整大小以容纳它。

# asp.net-mvc - 我可以在 Http get 和 Http Post 的相同操作方法的视图中返回不同的对象吗？

> ID：10443366
> 
> 赞同：0
> 
> 时间：2012-05-04T05:53:31.520
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, http-post

我想在控制器中的相同操作方法的 HTTPGet 方法和 HTTPPost 方法中返回一个对象，但我不知道在视图中写什么，要获取哪个模型。这是控制器代码，我一直在尝试

```
[HttpGet]
 public ActionResult Create()
        {
            var intSrNo = Convert.ToInt64(TempData["sr_no"]);
            MEntities obj_entity = new MEntities();
            UDP_get_a_Result obj_proc = obj_entity.UDP_get_a(intSrNo).SingleOrDefault(); 
             return View(obj_proc);
        } 

[HttpPost]
        public ActionResult Create(Table_a obj_a)
        {           
            if (ModelState.IsValid)
            {
                db.Table_a.AddObject(obj_a);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }
            return View(obj_a);
        } 
```

我很困惑在视图中写入哪个模型。（Table_a 或 UDP_get_a_Result），我希望 HttpGet 在页面加载时显示值，并在单击提交时显示 HttpPost。

看法

```
@model ABC.models.Table_a           
@{
    ViewBag.Title = "Create";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:58:08.717

视图只能强类型化到单个类。您不能让不同的控制器操作返回相同的视图并将不同的模型传递给该视图。您可以使用视图模型：定义一个类，该类将保存此视图所需的所有信息，然后让您的控制器操作填充此视图模型并将其传递给此视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:59:37.987

我认为将视图输入到某个基类（对象）然后将模型转换为您需要的基于 get/post 的任何内容是可行的。我不想维护它。:-D

# verilog - 未知的verilog错误'期待“endmodule”'

> ID：10443368
> 
> 赞同：3
> 
> 时间：2012-05-04T05:53:39.103
> 
> 标签：verilog

在verilog中，我有一个无法通过的错误。这是代码的第一位，然后是最后一位

> ```
>  module Decoder(op,funct,aluop,mwr,mreg,mrd,alusrc,regdst,regwr,btype);
>   input[5:0] op,funct;
>   output[2:0] aluop;
>   output[1:0] btype;
>   output mwr,mreg,mrd,alusrc,regdst,regwr;
>   wire aluop,mwr,mreg,mrd,alusrc,regdst,regwr,btype;
>   case(op)
>       6'b000000: begin
>           case(funct)
>               6'b001010:
>                   assign aluop = 3'b010;
>               6'b001100:
>                   assign aluop = 3'b111;
>               6'b010001:
>                   assign aluop = 3'b011;
>               default:
>                   assign aluop = 3'b000;          
>           endcase
>           assign btype = 2'b00;
>           assign mwr = 1'b0;
>           assign mreg = 1'b0;
>           assign mrd = 1'b0;
>           assign alusrc = 1'b0;
>           assign regdst = 1'b1;
>           assign regwr = 1'b1;
>           end 
> ```

...

> ```
>  default: begin
>       assign aluop = 3'b000;
>         assign mwr = 0;
>         assign mreg = 0;
>         assign mrd = 0;
>         assign alusrc = 0;
>         assign btype = 2'b00;
>         assign regdst = 0;
>         assign regwr = 0;
>         end
> endcase 
> ```
> 
> 端模块

它不断给我以下错误

错误 (10170)：Decoder.v(7) 靠近文本“case”的 Verilog HDL 语法错误；期待“endmodule”错误（10170）：Decoder.v(14) 靠近文本“6”的 Verilog HDL 语法错误；期待“结束模块”

它还在每个 end 语句以及 default 和 endcase 中执行此操作

我不知道为什么要这样做，我对verilog还很陌生。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T07:25:46.257

我相信你只被允许使用`case`语句或块`if/else`内`always`。我不确定为什么您的错误消息没有说一些更有帮助的东西，但这很可能是问题所在。

尝试重写您的代码，如下所示：

```
//change wire types to reg type

always @*
begin
  case (op)
    6'b000000: begin
      aluop = 3'b000
    end
    ...
  endcase
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:38:36.897

这是一个猜测，但编译器正在抱怨，因为它可能需要 IEEE 1364-2001 verilog，并且您的代码对于此版本的语言无效。无论如何，Tim 的代码可能就是您正在寻找的功能。

至于为什么它无效，Verilog 在每个模块声明中基本上包含两个“上下文”。任何直接出现在模块中的都是模块项。这些包括 reg/wire 声明、assign 语句、always 语句、生成构造和模块实例。

```
module mod;

reg reg1;           //Module item
wire wire1;         //Module item
assign wire1 = 0;   //Module item
always reg1 = 0;    //Module item
parameter con1 = 0; //Module item
 //Instances a different module based on con1
case(con1)          //Module item
  0:mod2 inst1(reg1);
  1:mod3 inst1(reg1);
  2:mod4 inst1(reg1);
endcase

endmodule 
```

其次，存在可以有程序性陈述的程序性语境。这是任务声明、函数声明、总是块、初始块和其他一些区域内的任何代码。

```
module mod2;
reg a;

always
  begin
  a = 0; //Procedural statement
  end

initial
   a = 0; //Procedural statement 

function func1(input arg1);
case (arg1) //Procedural statement 
  0:func1 = 0; 
  default:func1 = 9;
endcase
endfunction

endmodule 
```

自 2001 年以来，Verilog 包含两种类型的案例陈述，程序案例陈述和生成案例陈述。过程案例语句就像它们在过程语言中一样工作，但必须出现在过程上下文中。生成案例语句在模拟开始之前静态评估，并且可能仅作为模块项出现在模块声明上下文中。请注意，第二个上下文要求 case 表达式是常量。

在最新版本的verilog 1364-2005 中，生成案例可能直接出现在模块范围内，但是在该语言的2001 版本中，任何生成项都必须用`generate..endgenerate`关键字包围。如果您的编译器需要 IEEE 1364-2001，那么您看到的错误消息是有道理的。

# html - IE表第一列空格

> ID：10443370
> 
> 赞同：0
> 
> 时间：2012-05-04T05:53:47.870
> 
> 标签：html, css

我正在制作一个页面（对于 IE），其中以表格格式显示一些值。但不知何故，在第一列之前存在某种空白，使其与以下列不平衡。我只想让列对齐 [http://i49.tinypic.com/14b3kuh.jpg](http://i49.tinypic.com/14b3kuh.jpg)

```
out.println("<div id='tablePos'>");
out.println("<ul class='ulStyle'>");
out.println("<li>");           
out.println("<table border='1'>");
out.println("<div id='divTableForms'>");
out.println("<tr id='process'><td>PROCESS</td></tr>");
while(rs.next()){
String process = rs.getString(2);
String processtype = rs.getString(1);
out.println("<tr id='process'><td id='process2'>"+processtype + "-" +process+"</td></tr>");
            }
out.println("<tr id='process'><td id='process2'></td></tr>");
out.println("</div>");
out.println("</table>");
out.println("</li>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:22:24.967

空表数据（TD 元素）总是有问题。查看此[http://bignosebird.com/docs/h34.shtml](http://bignosebird.com/docs/h34.shtml) 或[CSS 以显示空单元格的边框？](https://stackoverflow.com/questions/57002/css-to-make-an-empty-cells-border-appear).

```
out.println("<tr id='process'><td id='process2'>&nbsp;</td></tr>"); 
```

id 属性值在 html 文档中也必须是唯一的。您的代码在 html 文档中使用类而不是 Id 属性重复“进程”标识符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:28:42.273

首先，我认为是因为你的 divTableForms div... 其次，你使用了 out.println("< tr id='process'>< td id='process2'>< /td></tr> ");

但是我不明白你已经包含了它.. Abd 终于永远不会对多个标签使用相同的 id... 特别是在循环内部永远不要使用它..

# objective-c - 如何从可变对象数组中获取 NSString 值？

> ID：10443371
> 
> 赞同：0
> 
> 时间：2012-05-04T05:53:50.613
> 
> 标签：objective-c, cocos2d-iphone

所以我在我的应用程序中需要替换精灵的图像，我想我知道该怎么做，但是我在实现它时遇到了麻烦。基本上，我正在制作多米诺骨牌游戏，我需要能够将多米诺骨牌翻转过来，这样你才能看到数字。

从我的 domino.h 文件开始......

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Domino : CCSprite {
    int int_leading;
    int int_trailing;
    int int_suitrank;
    int int_playerid;

    NSString *str_tilename;
    NSString *str_mirrortilename;    
}

@property  int int_leading,int_trailing, int_playerid, 

@property(nonatomic, retain) NSString *str_tilename;
@property(nonatomic, retain) NSString *str_mirrortilename;

-(void) print;
-(void) setTileName: (NSString *) theTileName;
-(void) setMirrorName: (NSString *) theMirrorName;
-(NSString *) str_tilename;
-(NSString *) str_mirrortilename;

@end 
```

然后我的 .m 文件...

```
#import "Domino.h"

@implementation Domino

@synthesize int_leading,int_trailing, str_tilename, str_mirrortilename, int_playerid;

-(void) print     { 
    NSLog (@"%i/%i", int_leading, int_trailing);}

-(void) setTileName: (NSString *) theTileName;
{
    str_tilename=[[NSString alloc] initWithString: theTileName];
}

-(void) setMirrorName: (NSString *) theMirrorName;
{
    str_mirrortilename=[[NSString alloc] initWithString: theMirrorName];
}

-(NSString *) str_tilename
{
    return str_tilename;
}

-(NSString *) str_mirrortilename
{
    return str_mirrortilename;
}
@end 
```

最后，在我的游戏层...

```
Domino *d06 =[[Domino alloc] initWithSpriteFrameName:@"blank.png"];
TileName= @"0-6.png";
MirrorName= @"6-0.png";
[d06 setTileName: TileName];
[d06 setMirrorName: MirrorName];
d06.int_leading=0;
d06.int_trailing=6; 
```

此时，我将所有多米诺骨牌一起添加到一个大型可变数组中，该数组跟踪哪些仍然可供玩家选择。我遇到的问题是我要么没有找到如何从可变数组中提取“TileName”，要么我找到了它，但不理解它。

如果我处于 For 循环中，我认为代码应该类似于

```
 NSString *temp1=[[[movableSprites objectAtIndex:i]valueForKey:@"str_tilename"]string]; 
```

但这只会导致程序崩溃。你能为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:18:01.040

```
 NSString *temp1=[(Domino *)[movableSprites objectAtIndex:i] str_tilename]; 
```

我认为使用此代码将解决您的问题...检查语法..希望这会有所帮助.. :)

# morphia - Morphia - 删除参考对象

> ID：10443372
> 
> 赞同：0
> 
> 时间：2012-05-04T05:53:51.140
> 
> 标签：morphia

让我们说一个以评论对象作为参考的博客类。评论对象有 Id、评论日期、评论。（参考）未嵌入。

如何删除评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:02:52.640

假设一个博客文章实体可以有多个评论，但每个评论只属于一篇博客文章。

首先，您需要删除引用：

```
BlogPostEntity blog = mongoDataStore.find(BlogEntity.class)
    .field("comments")
    .hasThisElement(new Key<CommentEntity>(CommentEntity.class, comment.getId()))
    .get();
if (blog != null) {
    blog.removeComment(comment); // Assuming you have a remove method for that, otherwise use the setter
    persist(blog); // Assuming you have a generic persist method
} 
```

然后您可以删除实体本身：

```
mongoDataStore.delete(comment); 
```

# asp.net - 如何在 Windows Phone 中开发谷歌地图

> ID：10443375
> 
> 赞同：6
> 
> 时间：2012-05-04T05:54:22.053
> 
> 标签：asp.net, windows, windows-phone-7

我对 Windows Phone 比较陌生。我正在使用 Windows Phone 7.1。我从事 Bing 地图控制。

但我想知道是否有可能获得 Windows 手机的谷歌地图 api 密钥。

如果有任何解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T06:03:54.817

这可能会帮助你，

[http://www.codeproject.com/Articles/153467/Google-Maps-for-Windows-Phone-7-using-Bing-Map-Con](http://www.codeproject.com/Articles/153467/Google-Maps-for-Windows-Phone-7-using-Bing-Map-Con)

创建步骤：

[http://www.c-sharpcorner.com/UploadFile/cd3310/starting-with-google-map-in-windows-7-phone-application/](http://www.c-sharpcorner.com/UploadFile/cd3310/starting-with-google-map-in-windows-7-phone-application/)

# java - 如何确保在禁用 javascript 的情况下运行网站

> ID：10443380
> 
> 赞同：0
> 
> 时间：2012-05-04T05:54:32.577
> 
> 标签：java, javascript, spring, architecture, frameworks

我们的网站 UI 是用 javaScript、JQuery 构建的。很多任务是由 jquery 执行的。UI 做了很多过滤、排序搜索、表格显示。

现在我们要确保即使浏览器禁用了 javascript，网站也能正常工作？

弹簧MVC <>

任何人都可以给我一个想法，我们怎样才能做到这一点？

任何其他技术都可以克服它吗？

GWT能做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:56:50.050

如果您的网站是使用 JavaScript 技术本身构建的，那么除非您在没有 JavaScript 的情况下构建它，否则您无法实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:14:36.693

一些站点可以从使用 JS 的更快、更流畅的版本优雅地降级到另一个不使用的站点。不幸的是，您的网站似乎并非如此。

一种策略是在 HTML 中定义重定向（应设置为 5-10 秒¹），该重定向指向向`needjs.html`用户解释：

> 对不起，我们没有能力提供没有 JS 的网站。

在 JS 中，取消重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:16:50.413

现在大多数网站都认为有 javascript。如果您想检查您的网站的行为方式，请关闭浏览器中的 javascript。如果您只需要禁用 javascript 时的内容，请将其放在`<noscript>`标签中，但请注意 GoogleBot (SEO) 在没有 javascript 的情况下运行，并且会遇到此问题。如何在没有 javascript 的情况下使网站正常运行？构建一些 ninja html 和 css 并在服务器端完成所有工作。但同样，由于大多数网站都假定 javascript 已启用，因此禁用它的用户已经熟悉他们使网络变得多么糟糕。`<noscript>`放置一个包含有关此站点如何需要 javascript 的消息的消息可能就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T05:58:02.170

GWT 之所以出局，是因为它基本上将一些 Java-ish 代码编译成 javascript。使用 Spring MVC，您可以**重写**您的站点以仅使用客户端视图 (JSP) 和服务器端操作 (MVC 控制器) 进行排序，...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:12:55.880

根据您的特定要求，您应该做的是构建一个无需 JavaScript 即可工作的基本网站，然后使用 JavaScript 使其更加神勇（漂亮，效果很酷）！:-D 但是由于您已经构建了该站点，所以我能想到的唯一解决方案是使用 HTML 创建一个新的基本站点并将其设为默认站点。从该基础您可以检查是否启用了 JavaScript，然后通过简单的 JavaScript 重定向将用户重定向到 whizzbang 站点（启用 JavaScript 的站点）！

# testing - CakePhp ControllerTest 似乎正在删除模型表

> ID：10443385
> 
> 赞同：0
> 
> 时间：2012-05-04T05:55:07.193
> 
> 标签：testing, cakephp-2.1

当我对一个非常简单的模型项（id，标题）运行我的第一个控制器测试时，我刚刚开始将 Phpunit 与 CakePhp2.0 一起使用

./Console/cake 测试应用控制器/ItemsController

除了来自 'cake bake; 的测试外，我没有添加任何其他测试。测试通过了，但是，它破坏了关联的项目表。

我有最新的 2.x 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:00:45.103

担，

我自己遇到了这个问题。在您的测试类中添加：

类 TestControllerTest 扩展 ControllerTestCase {

```
public $dropTables = false; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:38:04.960

您是否在 中进行了正确的测试数据库配置`app/Config/database.php`？那里有一个“$test”属性，它显示了 Cake 应该使用哪个数据库进行测试。如果它与您的默认配置相同（或不存在），它将指向您的默认数据库。

# algorithm - 双向生成树

> ID：10443388
> 
> 赞同：6
> 
> 时间：2012-05-04T05:55:24.997
> 
> 标签：algorithm, graph, spanning-tree

我从 interviewstreet.com 遇到了这个问题

> 机器再次袭击了锡安王国。锡安王国有N座城市，N-1条双向道路。道路网络使得任何一对城市之间都有一条独特的路径。
> 
> Morpheus 得知 K Machines 计划摧毁整个王国的消息。这些机器最初生活在王国的 K 个不同城市，从现在开始，他们可以随时计划并发动攻击。所以他要求 Neo 破坏一些道路以破坏机器之间的连接，即在破坏这些道路之后，任何两台机器之间都不应该有任何路径。
> 
> 由于攻击可能发生在从现在开始的任何时间，Neo 必须尽快完成这项任务。王国中的每条道路都需要一定的时间才能被摧毁，一次只能摧毁一条。
> 
> 您需要编写一个程序，告诉 Neo 中断机器之间的连接所需的最短时间。
> 
> 示例输入 输入的第一行包含两个以空格分隔的整数 N 和 K。城市编号为 0 到 N-1。然后沿着 N-1 行，每行包含三个空格分隔的整数 xyz，这意味着有一条双向道路连接城市 x 和城市 y，摧毁这条道路需要 z 个单位的时间。然后跟随 K 行，每行包含一个整数。第 i 个整数是第 i 个机器当前所在城市的 id。
> 
> 输出格式 在一行中打印中断机器之间连接所需的最短时间。
> 
> **样本输入**
> 
> ```
> 5 3
> 2 1 8
> 1 0 5
> 2 4 5
> 1 3 4
> 2
> 4
> 0 
> ```
> 
> **样本输出**
> 
> ```
> 10 
> ```
> 
> 说明 Neo 可以摧毁连接城市 2 和城市 4 的权重为 5 的道路，以及连接城市 0 和城市 1 的权重为 5 的道路。由于一次只能摧毁一条道路，因此所需的总最小时间为 10 个单位时间. 摧毁这些道路后，任何机器都无法通过任何路径到达其他机器。
> 
> **约束**
> 
> ```
> 2 <= N <= 100,000
> 2 <= K <= N
> 1 <= time to destroy a road <= 1000,000 
> ```

有人可以给出如何处理解决方案的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:55:09.050

![树](../Images/a91bcfcb86c2349ca03cd6e58896ac84.png)

这个王国有 N 个城市，N-1 条边并且它是完全连接的，因此我们的王国是[树](http://en.wikipedia.org/wiki/Tree_%28graph_theory%29)（在图论中）。在这张图片中，您可以看到输入图的树形表示，其中机器由红色顶点表示。

顺便说一句，您应该考虑从根顶点到所有叶节点的所有路径。因此，在每条路径中，您都会有几个红色节点，并且在删除边缘期间，您应该只考虑相邻的红色节点。例如，在路径 0-10 中有两个有意义的对 - (0,3) 和 (3,10)。并且您必须从成对连接顶点的每条路径中准确删除一个节点（不少于，不少于）。

我希望这个建议是有帮助的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T09:39:08.937

正如其他人所说，具有 N 个顶点和 N-1 条边的连通图是一棵树。

这类问题需要一个贪婪的解决方案；我会修改[Kruskal 的算法](http://en.wikipedia.org/wiki/Kruskal%27s_algorithm)：

> 从一组 N 个组件开始 - 每个节点（城市）1 个。跟踪哪些组件包含机器占用的城市。
> 
> 一次取 1 条边（道路），按重量降序排列（从破坏成本最高的道路开始）。对于这条边（它必然连接两个组件 - 图是一棵树）：
> 
> *   如果两个相邻的组件都包含一个机器占领的城市，这条路必须被摧毁，这样标记它
> *   否则，将相邻组件合并为一个。如果其中一个包含机器占用的城市，那么合并的组件也是如此。
> 
> 完成所有边后，返回被毁道路的成本总和。

复杂性将与 Kruskal 算法相同，即对于精心选择的数据结构和排序方法而言几乎是线性的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:56:14.187

pjotr 有一个正确的答案（虽然不是渐近最优的），但是这个陈述

> 这类问题需要贪婪的解决方案

确实需要证明，因为在现实世界中（与竞争性编程不同），**有几个这类问题的贪婪解决方案不是最优的**（例如，在一般图中，这个非常相同的问题，称为多端割并且是 NP 难的）。在这种情况下，证明包括验证[拟阵](http://en.wikipedia.org/wiki/Matroid)公理。如果图 (V, E ∖ A) 恰好有 |A|，则令一组边 A ⊆ E 是*独立的* + 1 个包含至少一台机器的连接组件。

**空集的独立性。**琐碎的。

**世袭财产。**设 A 为独立集。每条边 e ∈ A 连接图的两个连通分量 (V, E ∖ A)，并且每个连通分量至少包含一台机器。将 e 放回图中，包含至少一台机器的连通分量的数量减少了 1，因此 A ∖ {e} 也是独立的。

**增强属性。**设 A 和 B 是具有 |A| 的独立集 < |乙|。由于 (V, E ∖ B) 比 (V, E ∖ A) 具有更多的连通分量，根据鸽巢原理存在一对机器 u, v 使得 u 和 v 被 B 断开但不被 A 断开。因为有恰好是一条从u到v的路径，B在这条路径上至少包含一条边e，A不能包含e。删除 A ∪ {e} 会导致比 A 多一个包含至少一台机器的连接组件，因此 A ∪ {e} 根据需要是独立的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T13:23:08.517

所有三个答案都会导致正确的解决方案，但您无法在 interviewstreet.com 提供的时限内得到解决方案。你必须想一些简单的方法来成功地解决这个问题。

提示：从机器所在的节点开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T00:43:25.370

从任一机器节点开始执行 DFS。此外，跟踪到目前为止遇到的最小权重的边缘。一旦你找到下一个包含机器的节点，就删除目前记录的最小边。现在从这个新节点启动 DFS。重复直到找到机器所在的所有节点。

应该是 O(N) 那样！

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-09-23T03:03:11.433

我写了一些代码，并粘贴了所有的测试。

```
#include <iostream>
#include<algorithm>
using namespace std;

class Line {
public:
    Line(){
        begin=0;end=0;  weight=0;
}
int begin;int end;int weight;

bool operator<(const Line& _l)const {
    return weight>_l.weight;
}
};

class Point{
public:
Point(){
    pre=0;machine=false;
}
int pre;
bool machine;
};

void DP_Matrix();
void outputLines(Line* lines,Point* points,int N);

int main() {
    DP_Matrix();
    system("pause");
    return 0;
}   

int FMSFind(Point* trees,int x){
    int r=x;
    while(trees[r].pre!=r)
        r=trees[r].pre;
    int i=x;int j;
    while(i!=r) {
            j=trees[i].pre;
        trees[i].pre=r;
        i=j;
    }
return r;
}

void DP_Matrix(){
int N,K,machine_index;scanf("%d%d",&N,&K);
Line* lines=new Line[100000];
Point* points=new Point[100000];
N--;
for(int i=0;i<N;i++) {
    scanf("%d%d%d",&lines[i].begin,&lines[i].end,&lines[i].weight);
    points[i].pre=i;
}
points[N].pre=N;
for(int i=0;i<K;i++) {
    scanf("%d",&machine_index);
    points[machine_index].machine=true;
}
long long finalRes=0;
for(int i=0;i<N;i++) {
    int bP=FMSFind(points,lines[i].begin);
    int eP=FMSFind(points,lines[i].end);
    if(points[bP].machine&&points[eP].machine){
        finalRes+=lines[i].weight;
    }
    else{
        points[bP].pre=eP;
        points[eP].machine=points[bP].machine||points[eP].machine;
        points[bP].machine=points[eP].machine;
    }
}
cout<<finalRes<<endl;
delete[] lines;
delete[] points;
}

void outputLines(Line* lines,Point* points,int N){
printf("\nLines:\n");
for(int i=0;i<N;i++){
    printf("%d\t%d\t%d\n",lines[i].begin,lines[i].end,lines[i].weight);
}
printf("\nPoints:\n");
for(int i=0;i<=N;i++){
    printf("%d\t%d\t%d\n",i,points[i].machine,points[i].pre);
}
} 
```

# java - 在单个线程中运行多个 sql 查询？

> ID：10443389
> 
> 赞同：2
> 
> 时间：2012-05-04T05:55:32.287
> 
> 标签：java, sql

我正在尝试通过 java 代码在单个 SQL 服务器线程中运行多个 SQL 查询。我尝试对我的查询使用批处理运行，但是看到日志，我的查询在不同的线程中运行。

有没有办法在一个线程下运行我的所有查询？

我为我的查询启用了并发标志，这样读/写操作就不会发生冲突并导致异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:22:40.783

您必须通过关闭`auto commit`并`commit`在运行语句后手动处理事务：

```
connection.setAutoCommit(false);
statement.executeUpdate();
connection.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:14:59.827

您可以创建 pl/sql 函数并将所有查询放入该函数中。

或使用单个连接执行多个语句而不关闭它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:59:30.490

我不确定，但您可以为多个 sql 查询创建过程，然后从您的 java 代码中调用它。[这](https://stackoverflow.com/a/3573413)和[这](http://forum.springsource.org/showthread.php?11805-Call-from-java-to-pl-sql-procedure-with-table-out-parameter)可能导致的方式。

# c# - 如何将文件传递给 Web 方法？

> ID：10443392
> 
> 赞同：0
> 
> 时间：2012-05-04T05:55:54.600
> 
> 标签：c#, file, file-upload, webmethod

我想将文件传递到 [Webmethod] 中，然后将其作为电子邮件附件发送。

我该怎么做呢？我不确定从哪里开始？

**FileUpload1.PostedFile.FileName**和**FileUpload1.FileContent**是我想要传递给我的 [webmethod] 的两件事。

我的问题是**FileUpload1.FileContent**，因为我已经可以将**FileUpload1.PostedFile.FileName**作为字符串发送

```
lblEmailSent.Text = Send.Sendemail(txtTo.Text, txtSubject.Text, txtbody.Text, FileUpload1.PostedFile.FileName, FileUpload1.FileContent); 
```

我的呼叫声明以蓝色下划线显示，给出的两个错误如下所示：

> * *1)* * 'WebTestServiceApp.localhost.Service1.Sendemail(string, string, string, string, WebTestServiceApp.localhost.Stream)' 的最佳重载方法匹配有一些无效参数
> 
> * *2)* *参数 5：无法从 'System.IO.Stream' 转换为 'WebTestServiceApp.localhost.Stream'

请有人告诉我如何将**FileUpload1.FileContent**发送到 [Webmethod]

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:28:13.483

我的建议是：忘记`FileUpload`- 只需传递一个`byte[]`and `string`（用于名称或您需要的任何其他内容）。这应该由系统处理为base-64。

从 a`FileUpload`你应该可以访问`.FileBytes`and `.FileName`，避免需要弄乱`Stream`等。

在接收端（带有`byte[]`参数），只需：

```
using(var stream = new MemoryStream(theByteArray)) {...} 
```

# javascript - 淡出功能不适用于所有浏览器

> ID：10443394
> 
> 赞同：0
> 
> 时间：2012-05-04T05:56:07.903
> 
> 标签：javascript, html, css, internet-explorer

我有以下功能，但它在 IE 中不起作用。如果我的功能有任何问题，请告诉我

```
function fadeOut(id,funcs){
    if(ge(id)==null){
        doit=true;
    }
    timer=10;
    t=1;
    ge(id).style.opacity=t;
    fo_tym=setInterval(function(){
        if(ge(id)==null){
            clearInterval(fo_tym);
            return;
        }
        if(t<0){
            funcs();
            clearInterval(fo_tym);
            return; 
        }
        t=t-0.01;
        ge(id).style.opacity=t;

    },0);
} 
```

`ge(id)`是在 DOM 中查找元素`funcs()`并将在 fadeOut 完成后调用的函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:57:10.940

什么版本的IE？9 之前的 IE 使用过滤器属性而不是 style.opacity。例子：

```
var hasOpacity = 'opacity' in ge(id).style;

// ...

if (hasOpacity) {
    ge(id).style.opacity=t;
} else {
    ge(id).style.filter = 'alpha(opacity=' + t*100 + ')';
} 
```

# http - 用于上传内容的 HTTP PUT 和 POST 替代方案

> ID：10443396
> 
> 赞同：0
> 
> 时间：2012-05-04T05:56:24.883
> 
> 标签：http, post, upload, put

除了 HTTP PUT 和 POST，Web 应用程序设计人员还可以使用哪些其他方法来允许用户将内容（文件或列表框文本）从其 Web 应用程序的页面上传~~到远程服务器~~？

在同一主题上，我想知道 Google Docs 或 Google Drive 之类的服务使用什么技术/API？我问这个的原因是：我们的系统管理员禁用了文件上传（通过 Squid 代理），但我能够使用 Google Docs / Google Drive 创建和共享文档。

提前谢谢了，

/HS

**编辑**请参阅上面的**~~删除线~~**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:08:42.400

这取决于所讨论的服务器 - 因为标准的 HTTP 命令集可以扩展，有些可能无法配置/允许。常见的命令之一是询问“我能做什么”的“选项”。

但要回答得更有帮助：您通常有两个主要选择：

*   POST（您可能想要使用的那个，因为它几乎总是可用的
*   得到。您可以使用 GET（但我不提倡使用它 - 只是说您可以使用它 - 您不应该使用 GET 来更改服务器）。这种方法存在问题（包括文件大小、手动处理编码等），但如果你必须走这条路，这是可能的。

出于安全原因，通常不会在服务器上启用它。

更多阅读：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)

* * *

编辑：如果代理阻止了“文件上传”，您是否尝试过对 POST 进行编码？即与发送多部分POST相反，尝试将文件自己编码为POST字符串并发送它？还是对文件进行编码并拆分为多个小帖子并在另一端将它们拼凑在一起？

* * *

Google Docs 混合使用 POST 和 GET。发布更新。谷歌云端硬盘我不知道。

# php - 对话框中的 JQuery 选择没有附加选项

> ID：10443397
> 
> 赞同：0
> 
> 时间：2012-05-04T05:56:27.293
> 
> 标签：php, jquery, dialog

我正在尝试使用 JQuery 对话框来执行类似于打开文件对话框的操作，但我使用数据库中的记录而不是文件来填充对话框。

我遇到的问题是我似乎无法将 html 选项数据加载到我的对话框中的 html 选择中。我在 Chrome 中使用了 Google Javascript 调试器，并逐步完成了从我的 PHP ajax 调用的 javascript 代码。我没有看到任何错误，并且当我将数据放入 append 语句时，我看到数据在那里并且格式正确。我不明白为什么它没有出现在我的 html 选择中。

谢谢你的帮助。

下面是我接收数据的 Ajax 函数。

函数 doOpenAjax(filterStr) {

```
 $.get(
        "contenteditServerAjax.php",
        {filter: filterStr },
        function(data) {
                            var optsArr = data.split('|~|');
                            var seloption = "";

                            $.each(optsArr, function(i) {
                                seloption += '<option value="' + optsArr[i] + '">' + optsArr[i] + '</option>';
                            });
                            $('#chooseArticleName2').find('option').remove().end();
                            $('#chooseArticleName2').append(seloption);
                        },
        "html"
        );

} 
```

作为参考，这是我的 php 的一部分，其中包含 jquery 对话框：

```
<head>
<script>
$(document).ready(function() {

    var dlg = $("#opendiv").dialog({modal:true, height:550, width:650,
                        hide:{ effect: 'drop', direction: "down" },
                        autoOpen:false,
                        maxHeight: 1200,
                        maxWidth: 1200,  
                        minHeight: 250,
                        minWidth: 300, 
                        buttons: { "Open": function() { $('#state').val('Open Doc');        $('#contentform').submit(); $(this).dialog("hide"); },
                        "Cancel": function() { $(this).dialog("close");}}                            
    });
    dlg.parent().appendTo($("#contentform"));  

});
</script> 
```

```
<div id="opendiv" name="opendiv" title="OPEN">

    <p align="center">Enter Name to Open Article as:</p>
    <p>
        Filter:
        <input name="docFilter2" id="docFilter2" type="text" value="$filter2" maxlen="64" size="28"/>&nbsp; &nbsp;
        <input name="LoadTitles2" id="LoadTitles2" type="button" value="Load Available Titles" 
                                onclick="doOpenAjax( $('#docFilter2').val() );"/>
    </p>
    <p>
        <div id="ajaxOutput2">
            <select name="chooseArticleName2" id="list2" size="8" style="min-width:92%"
                                        onchange="
                                        var mytext = $('#chooseArticleName2 :selected').text();
                                        $('#textBoxArticleName2').val(mytext);">
            </select>
        </div>
    </p>
    <p>
        Document:
        <input type="text" id="textBoxArticleName2" name="textBoxArticleName2" size="56"/>
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:03:44.947

仅供参考，这样做会更有效率：

```
$('#chooseArticleName2').empty().html(seloption); 
```

比这个：

```
$('#chooseArticleName2').find('option').remove().end();
$('#chooseArticleName2').append(seloption); 
```

# php - 在外部网站中使用的搜索 api

> ID：10443398
> 
> 赞同：1
> 
> 时间：2012-05-04T05:56:28.510
> 
> 标签：php, ajax, api, search

我是api开发的新手，所以不知道这是否可行。

我有一个`http://www.mysite.com/`由数据组成的网站（），我需要开发一个 api 或以某种方式使用该网站的数据在其他网站中使用它。

我的要求是其他外部网站（`http://www.externalwebsites.com`）需要从我的主站点（`http://www.mysite.com/`）中搜索数据。`http://www.externalwebsites.com/`将搜索字符串发送到`http://www.mysite.com/`，它会发回结果并显示在`http://www.externalwebsites.com/`.

我需要使用 ajax 调用`http://www.externalwebsites.com/`来搜索数据，所以我的问题是

1.  这整个过程可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:08:34.023

当然，您可以使用 JSONP，在 jQuery 等库中默认支持。

[http://docs.jquery.com/Release:jQuery_1.2/Ajax#Cross-Domain_getJSON_.28using_JSONP.29](http://docs.jquery.com/Release:jQuery_1.2/Ajax#Cross-Domain_getJSON_.28using_JSONP.29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:08:59.697

一个好方法是使用 SOAP 网络服务：

[http://plutov.by/post/web_service_soap](http://plutov.by/post/web_service_soap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:14:35.233

REST： [http](http://searchsoa.techtarget.com/definition/REST) ://searchsoa.techtarget.com/definition/REST SOAP： [http](http://tr.wikipedia.org/wiki/SOAP) : //tr.wikipedia.org/wiki/SOAP oAuth：[http](http://oauth.net/2/) ://oauth.net/2/ （这被流行的网站使用，如脸书、谷歌、雅虎、推特）

# python - 如何从字符串中删除前导和尾随空格？

> ID：10443400
> 
> 赞同：130
> 
> 时间：2012-05-04T05:56:34.357
> 
> 标签：python, string

我很难尝试使用`.strip`以下代码行：

```
f.write(re.split("Tech ID:|Name:|Account #:",line)[-1]) 
```

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-05-04T06:10:06.910

您可以使用该[`strip()`](https://docs.python.org/3/library/stdtypes.html?highlight=strip#str.strip)方法删除尾随和前导空格：

```
>>> s = '   abd cde   '
>>> s.strip()
'abd cde' 
```

注意：保留内部空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T06:03:48.313

将您的一个班轮扩展到多行。然后就变得容易了：

```
f.write(re.split("Tech ID:|Name:|Account #:",line)[-1])

parts = re.split("Tech ID:|Name:|Account #:",line)
wanted_part = parts[-1]
wanted_part_stripped = wanted_part.strip()
f.write(wanted_part_stripped) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-05T18:42:59.743

应该注意，该`strip()`方法将从字符串中修剪任何前导和尾随空白字符（如果没有传入参数）。如果您想修剪空格字符，同时保留其他字符（如换行符），这个答案可能会有所帮助：

```
sample = '  some string\n'
sample_modified = sample.strip(' ')

print(sample_modified)  # will print 'some string\n' 
```

`strip([chars])`：您可以将可选字符传递给`strip([chars])`方法。Python 将查找这些字符的出现并相应地修剪给定的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-11T02:20:35.707

起始文件：

```
 line 1
   line 2
line 3  
      line 4 
```

代码：

```
with open("filename.txt", "r") as f:
    lines = f.readlines()
    for line in lines:
        stripped = line.strip()
        print(stripped) 
```

输出：

```
line 1
line 2
line 3
line 4 
```

# c# - 如何修复文本文件提供程序错误？

> ID：10443402
> 
> 赞同：0
> 
> 时间：2012-05-04T05:56:36.957
> 
> 标签：c#, sql-server

我正在尝试将数据从文本文件导入 Sql Server；我收到了错误

```
... path not found. 
```

更改提供程序后，出现错误

```
The 'Microsoft Text Driver Data Source=C:\CETS\genset_20090110_0511.TXT'  
provider is not registered on the local machine. 
```

我使用了以下代码：

```
$string strconn2 = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" 
+ p_Excel_Path2 + ";Extended Properties='text;HDR=Yes;FMT=tab'"; 
```

并且也尝试过这个：

```
string strconn1 = "Provider=Microsoft Text Driver (*.txt)" + "Data Source=" 
+ p_Excel_Path1 + ";Extensions=txt"; 
```

但我遇到了同样的错误。

# android - linux加入多播组setsockopt返回errno 19 device not found

> ID：10443408
> 
> 赞同：0
> 
> 时间：2012-05-04T05:57:20.163
> 
> 标签：android, linux, sockets, multicast, setsockopt

我设置了一个 UDP 非阻塞套接字。我正在创建套接字，绑定它，并像这样加入一个多播组：

```
int hopLimit = 1;
int bAllowMultiple = 1;
in_addr localAddr;
localAddr.s_addr = 0;

in_addr groupAddress;
groupAddress.s_addr = inet_addr(ADDRESS);

sockaddr_in groupEndPoint;
groupEndPoint.sin_family = AF_INET;
groupEndPoint.sin_addr = groupAddress;
groupEndPoint.sin_port = htons(PORT);

SOCKET udpsocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);

if(udpsocket == -1){
    printf("Socket fail\n%d\n", errno);
    return 1;
}

if(setsockopt(udpsocket, IPPROTO_IP, IP_MULTICAST_TTL, (char *)&hopLimit, sizeof(hopLimit))==-1){
    printf("sockopt failed: IP_MULTICAST_TTL\n%d\n", errno);
    return 1;
}
if(setsockopt(udpsocket, IPPROTO_IP, IP_MULTICAST_IF, (char *)&localAddr, sizeof(localAddr))==-1){
    printf("sockopt failed: IP_MULTICAST_IF\n%d\n", errno);
    return 1;
}
if(setsockopt(udpsocket, SOL_SOCKET, SO_REUSEADDR, &bAllowMultiple, sizeof(bAllowMultiple))==-1){
    printf("sockopt failed: SO_REUSEADDR\n%d\n", errno);
    return errno;
}
        // Set to non-blocking mode
unsigned long bMode = 1;
if(ioctl( udpsocket, FIONBIO, &bMode )==-1){
    printf("ioctl failed\n%d\n", errno);
    return errno;
}
sockaddr_in localEndPoint;
localEndPoint.sin_family = AF_INET;
localEndPoint.sin_addr.s_addr = localAddr.s_addr; 
localEndPoint.sin_port = groupEndPoint.sin_port;

        // Bind the socket to the port
int r = bind(udpsocket, (sockaddr*)&localEndPoint, sizeof(localEndPoint));
if (r != 0)
{
    printf("Bind failed\n%d\n", errno);
    return errno;
}
// Join the multicast group
struct ip_mreq imr;
imr.imr_multiaddr = groupEndPoint.sin_addr;
imr.imr_interface.s_addr = groupEndPoint.sin_addr.s_addr;

r = setsockopt(udpsocket, IPPROTO_IP, IP_ADD_MEMBERSHIP, &imr, sizeof(imr));
printf("%d\n",r);
if (r == -1){
    printf("sockopt failed: IP_ADD_MEMBERSHIP\n%d\n", errno);
    return errno;
} 
```

前 3 个 setsockopt 调用 - MULTICAST_TTL、MULTICAST-IF 和 REUSEADDRESS - 工作正常，并且绑定。然后，当我尝试加入多播组时，它返回 errno 19 - 未找到设备。将 imr 接口地址更改为 INADDR_ANY 意味着找到了设备，但程序不会接收数据包。我已经更改了地址，我知道它在多播范围内。我机器上的 eth0 启用了多播。我已经尝试使用`struct ip_mreqn imr`并更改接口以适当地解决，没有变化。我运行了一个堆栈跟踪，但它没有更多信息，只是说 setsockopt 失败并出现 errno 19。

有没有人有任何想法？我在这里有点绝望，我已经在这方面太久了。

# ruby-on-rails - 输入轨的验证

> ID：10443409
> 
> 赞同：0
> 
> 时间：2012-05-04T05:57:21.077
> 
> 标签：ruby-on-rails

我为 Rails 应用程序创建了一个简单的搜索输入表单，但我注意到当我不输入任何内容时，它会返回我所有用户的结果，但我不希望它在没有放置任何值时工作

我的表格

```
<h6>Search for Friends</h6>
  <form action ="users/search" method="post">
    <input name = "key" type="input" />
    <input value="Search" type="submit"/>
  </form> 
```

控制器方法

```
def search
  @users = User.find(:all,:order => 'username', :conditions => ["username LIKE ?", "%#{params[:key]}%"])
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:27:38.860

尝试新的 Arel 写作或检查是否分配了密钥。

```
def search 
  @users = User.where(["username LIKE ?", "%#{params[:key]}%"]).order('username')
end 
```

或者

```
def search 
  if params[:key].blank?
    @users = []
  else
    @users = User.where(["username LIKE ?", "%#{params[:key]}%"]).order('username')
  end
end 
```

# html - 这个虚线边框是从哪里来的？

> ID：10443412
> 
> 赞同：0
> 
> 时间：2012-05-04T05:57:43.367
> 
> 标签：html, css

我已经非常彻底地修改了一个 wordpress 主题来创建我的新网站的第一个版本。我试图摆脱这个 1px 虚线边框，但我无法找到它所在的元素。啊！

该网站是[http://dev.timelesscreations.us](http://dev.timelesscreations.us)，我所说的虚线边框位于侧栏下方，右侧页脚上方。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:59:51.103

这是由样式表中的这条 CSS 规则引起的：

```
#footer {
    ....
    border-top: 1px dotted #000;
    ....
} 
```

元素：

```
<div id="footer"> .... </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:00:59.143

使用 Firefox Firebug 插件或 Chrome 开发者工具 (F12) 找到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:01:13.730

在第 144 行的 style.css 中，您在#footer 上设置了虚线边框。删除那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T10:33:56.583

```
its in style.css line 62

#content
{
background: url("images/bk_content.png") repeat-y scroll 100% 0 transparent;
}

just REMOVE that property 
background: url("images/bk_content.png") repeat-y scroll 100% 0 transparent
from  #container  css

cheers 
```

# spring - 使用 maven 依赖项将 spring 与 hibernate 集成

> ID：10443413
> 
> 赞同：0
> 
> 时间：2012-05-04T05:57:44.853
> 
> 标签：spring, hibernate, maven

我使用 Spring & Hibernate 和 maven 作为工具组织者制作了一个项目。

有时，似乎以下版本的休眠已从所有存储库中停止/删除/某些东西

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.3.0.ga</version>
        <exclusions>
            <exclusion>
                <groupId>cglib</groupId>
                <artifactId>cglib</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
     <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations
        </artifactId>
        <version>3.3.0.ga</version>
    </dependency> 
```

所以，我切换到以下版本来解决所有与编译相关的问题等：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <!--version>3.3.0.ga</version-->
        <version>3.5.6-Final</version>

        <exclusions>
            <exclusion>
                <groupId>cglib</groupId>
                <artifactId>cglib</artifactId>
            </exclusion>
        </exclusions>

    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-commons-annotations
        </artifactId>
        <version>3.3.0.ga</version>
        <!--version>3.5.6-Final</version-->
    </dependency> 
```

虽然所有与编译相关的问题都得到了解决，但我在尝试部署使用这些休眠版本和 spring 依赖项创建的 war 文件时遇到了很多问题（尽管 war 已成功生成，而部署 Spring 和 hibernate 给出了一些错误）。

基本上，我想使用最新版本的 Spring & Hibernate 并创建一个 web 应用程序 war 文件。

如果有人可以列出在所有存储库中成功可用的一组 spring 和 hibernate maven 依赖项以及创建成功的 Web 应用程序的存储库列表，我将非常感激，最好是如果您已成功部署并使用了那场战争。

这些是我在我的应用程序中使用的与 spring 相关的依赖项和其他依赖项：

```
 <properties>
    <servlet-api.version>2.5.0</servlet-api.version>
    <maven.jetty.version>6.1.10</maven.jetty.version>
    <!--ehcache.version>1.2.3</ehcache.version-->
    <net.sf.ehcache.version>2.2.0</net.sf.ehcache.version>
</properties>

<build>
    <finalName>in</finalName>
    <plugins>
        <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>maven-jetty-plugin</artifactId>
            <version>${maven.jetty.version}</version>
        </plugin>
        <plugin>
            <groupId>org.codehaus.enunciate</groupId>
            <artifactId>maven-enunciate-plugin
            </artifactId>
            <version>${enunciate.version}</version>
            <executions>
                <execution>
                    <goals>
                        <goal>assemble</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-deploy-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <skip>true</skip>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.terracotta.maven.plugins</groupId>
            <artifactId>tc-maven-plugin</artifactId>
            <version>1.5.1</version>
            <executions>
                <execution>
                    <id>run-integration</id>
                    <phase>pre-integration-test</phase>
                    <goals>
                        <goal>run-integration</goal>
                    </goals>
                </execution>
                <execution>
                    <id>terminate-integration</id>
                    <phase>post-integration-test</phase>
                    <goals>
                        <goal>terminate-integration</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build>

<dependencies>
    <!--
          dependency> <groupId>log4j</groupId> <artifactId>log4j</artifactId>
          <version>1.2.12</version> </dependency
      -->
    <dependency>
        <groupId>com.googlecode.json-simple
        </groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.context
        </artifactId>
        <version>${spring.version}</version>
    </dependency>
    <!--
          test temp dependency> <groupId>org.springframework</groupId>
          <artifactId>org.springframework.core </artifactId>
          <version>${spring.version}</version> </dependency
      -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.web
        </artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.web.servlet
        </artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.beans
        </artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.oxm
        </artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>com.springsource.javax.servlet
        </artifactId>
        <version>${servlet-api.version}</version>
        <scope>provided</scope>
    </dependency>

    <!--
          test temp dependency> <groupId>com.google.collections</groupId>
          <artifactId>google-collections</artifactId>
          <version>1.0-rc4</version> </dependency
      -->

    <!--
          test temp dependency> <groupId>org.opensymphony.quartz</groupId>
          <artifactId>quartz</artifactId> <version>1.6.1</version> </dependency
      -->

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>org.springframework.context.support
        </artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!--
          test temp dependency> <groupId>org.springframework</groupId>
          <artifactId>org.springframework.transaction </artifactId>
          <version>${spring.version}</version> </dependency
      -->

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <dependency>
        <groupId>org.apache.commons</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>

    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>

    <dependency>
        <groupId>velocity</groupId>
        <artifactId>velocity</artifactId>
        <version>1.5</version>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.1</version>
    </dependency>

    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>

    <dependency>
        <groupId>jstl</groupId>
        <artifactId>jstl</artifactId>
        <version>1.1.2</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.4</version>
    </dependency>

    <!--
          dependency> <groupId>log4j</groupId> <artifactId>log4j</artifactId>
          <version>1.2.14</version> </dependency
      -->

    <dependency>
        <groupId>org.codehaus.enunciate</groupId>
        <artifactId>enunciate-rt</artifactId>
        <version>${enunciate.version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.codehaus.enunciate</groupId>
                <artifactId>enunciate-xfire</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.codehaus.enunciate</groupId>
                <artifactId>enunciate-xfire-rt</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.codehaus.enunciate</groupId>
                <artifactId>enunciate-gwt-rt</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.codehaus.enunciate</groupId>
                <artifactId>enunciate-amf-rt</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.codehaus.enunciate</groupId>
                <artifactId>enunciate-rest-rt</artifactId>
            </exclusion>

            <exclusion>
                <artifactId>spring-webmvc</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>enunciate-jaxws-ri-rt</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>enunciate-jersey-rt</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <!--
          temp testdependency> <groupId>org.codehaus.enunciate</groupId>
          <artifactId>enunciate-jaxws-ri-rt</artifactId>
          <version>${enunciate.version}</version> <exclusions> <exclusion>
          <artifactId>spring-web</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-context</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-core</artifactId>
          <groupId>org.springframework</groupId> </exclusion> </exclusions>
          </dependency
      -->

    <!--
          temp test dependency> <groupId>org.codehaus.enunciate</groupId>
          <artifactId>enunciate-jersey-rt</artifactId>
          <version>${enunciate.version}</version> <exclusions> <exclusion>
          <artifactId>spring-web</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-aop</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-beans</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-context</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-core</artifactId>
          <groupId>org.springframework</groupId> </exclusion> </exclusions>
          </dependency
      -->

    <!--
          temp test dependency> <groupId>org.codehaus.enunciate</groupId>
          <artifactId>enunciate-spring-app-rt </artifactId>
          <version>${enunciate.version}</version> <exclusions> <exclusion>
          <artifactId>spring-webmvc</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-beans</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-web</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-aop</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-context</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-core</artifactId>
          <groupId>org.springframework</groupId> </exclusion> </exclusions>
          </dependency
      -->

    <!--
          temp test dependency> <groupId>org.codehaus.enunciate</groupId>
          <artifactId>enunciate-rest-rt</artifactId>
          <version>${enunciate.version}</version> <exclusions> <exclusion>
          <artifactId>spring-beans</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-context</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-web</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>spring-webmvc</artifactId>
          <groupId>org.springframework</groupId> </exclusion> <exclusion>
          <artifactId>commons-beanutils</artifactId>
          <groupId>commons-beanutils</groupId> </exclusion> </exclusions>
          </dependency
      -->

    <dependency>
        <groupId>org.springmodules</groupId>
        <artifactId>spring-modules-cache</artifactId>
        <version>0.8a</version>
        <exclusions>
            <!--
                    Exclusions to make up for the fact that the 0.8a POM for
                    spring-modules-cache isn't marking many of its optional
                    dependencies as optional. TO DO - add some more exclusions if
                    possible
                -->

            <exclusion>
                <artifactId>ehcache</artifactId>
                <groupId>ehcache</groupId>
            </exclusion>
            <exclusion>
                <groupId>gigaspaces</groupId>
                <artifactId>gigaspaces-ce</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>webster</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-jmx</artifactId>
            </exclusion>
            <exclusion>
                <groupId>xpp3</groupId>
                <artifactId>xpp3_min</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>start</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-minimal</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>reggie</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-cache</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jcs</groupId>
                <artifactId>jcs</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-system</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>jsk-platform</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jboss</groupId>
                <artifactId>jboss-common</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>mahalo</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>jsk-lib</artifactId>
            </exclusion>
            <exclusion>
                <groupId>jini</groupId>
                <artifactId>boot</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!--
          dependency> <groupId>com.googlecode.ehcache-spring-annotations
          </groupId> <artifactId>ehcache-spring-annotations </artifactId>
          <version>1.1.2</version> <type>jar</type> <scope>compile</scope>
          </dependency
      -->

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency>

    <!--dependency>
          <artifactId>ehcache</artifactId>
          <groupId>ehcache</groupId>
          <version>${ehcache.version}</version>
      </dependency-->

    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.4.1</version>
    </dependency>

    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-terracotta</artifactId>
        <version>2.4.1</version>
    </dependency>

    <dependency>
        <groupId>org.terracotta</groupId>
        <artifactId>terracotta-toolkit-1.2-runtime</artifactId>
        <version>3.0.0</version>
    </dependency>

    <dependency>
        <groupId>local-simplecaptcha</groupId>
        <artifactId>local-simplecaptcha</artifactId>
        <version>1.0</version>
        <scope>system</scope>
        <systemPath>${basedir}/src/main/webapp/WEB-INF/lib/simplecaptcha-1.2.1.jar
        </systemPath>
    </dependency>

    <dependency>
        <artifactId>solr-solrj</artifactId>
        <groupId>org.apache.solr</groupId>
        <version>1.4.0</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <artifactId>solr-core</artifactId>
        <groupId>org.apache.solr</groupId>
        <version>1.4.0</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>

</dependencies> 
```

我正在使用的其他技术：

EhCache、Solr、MySQL

旧设置曾经在我的第一台计算机上运行得非常好，但是当我切换到新系统（计算机）时，突然间很多休眠依赖项等丢失了，我做了很多尝试和错误来解决 Spring 和 Hibernate 的各种依赖项。

如果有人能给我一个清醒的解决方案，我将不胜感激，这样我就可以让我的 webapp 恢复工作模式

我正在开发一些 maven 2 版本，但如果我必须切换到 maven 3 等，我也准备好了。我只需要一个端到端的解决方案，而无需打扰我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:29:04.023

spring、hibernate、mysql、junit 和面向 jsp 的 Web 应用程序的示例。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.example.app</groupId>
<artifactId>MyApp</artifactId>
<packaging>war</packaging>
<version>1.0</version>
<name>MyApp</name>
<url>http://maven.apache.org</url>

<!-- Version number of Spring -->
<properties>
    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
</properties>

<!-- JBoss repository for Hibernate -->
<repositories>
    <repository>
        <id>JBoss repository</id>
        <url>http://repository.jboss.org/nexus/content/groups/public/</url>
    </repository>
</repositories>

<dependencies>

    <!-- JUnit -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>3.6.3.Final</version>
    </dependency>

    <!-- MySQL connector -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.19</version>
    </dependency>

    <!-- Spring -->
    <!-- Core utilities used by other modules.
    Define this if you use Spring Utility APIs -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Expression Language (depends on spring-core)
    Define this if you use Spring Expression APIs -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Bean Factory and JavaBeans utilities (depends on spring-core)
    Define this if you use Spring Bean APIs
    (org.springframework.beans.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Aspect Oriented Programming (AOP) Framework
    (depends on spring-core, spring-beans)
    Define this if you use Spring AOP APIs
    (org.springframework.aop.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Application Context
(depends on spring-core, spring-expression, spring-aop, spring-beans)
This is the central artifact for Spring's Dependency Injection Container
and is generally always defined-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

        <!-- Various Application Context utilities, including EhCache, JavaMail,      Quartz, and Freemarker integration. Define this if you need any of these integrations-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Transaction Management Abstraction
    (depends on spring-core, spring-beans, spring-aop, spring-context)
    Define this if you use Spring Transactions or DAO Exception Hierarchy
    (org.springframework.transaction.*/org.springframework.dao.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- JDBC Data Access Library
    (depends on spring-core, spring-beans, spring-context, spring-tx)
    Define this if you use Spring's JdbcTemplate API
    (org.springframework.jdbc.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>

<!-- Object-to-Relation-Mapping (ORM) integration with Hibernate, JPA and iBatis.
(depends on spring-core, spring-beans, spring-context, spring-tx)
Define this if you need ORM (org.springframework.orm.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Object-to-XML Mapping (OXM) abstraction and integration with JAXB, JiBX,
Castor, XStream, and XML Beans.
(depends on spring-core, spring-beans, spring-context)
Define this if you need OXM (org.springframework.oxm.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Web application development utilities applicable to both Servlet and
Portlet Environments
(depends on spring-core, spring-beans, spring-context)
Define this if you use Spring MVC, or wish to use Struts, JSF, or another
web framework with Spring (org.springframework.web.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Spring MVC for Servlet Environments
  (depends on spring-core, spring-beans, spring-context, spring-web)
  Define this if you use Spring MVC with a Servlet Container such as
  Apache Tomcat (org.springframework.web.servlet.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Spring MVC for Portlet Environments
    (depends on spring-core, spring-beans, spring-context, spring-web)
    Define this if you use Spring MVC with a Portlet Container
    (org.springframework.web.portlet.*)-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc-portlet</artifactId>
        <version>${org.springframework.version}</version>
    </dependency>
    <!-- Support for testing Spring applications with tools such as JUnit and TestNG
This artifact is generally always defined with a 'test' scope for the
integration testing framework and unit testing stubs-->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency>

    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.4.GA</version>
    </dependency>

    <!-- Javax servlet is used for HttpSession and HttpServletRequest -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

    <!-- Dependency used for jsp pages -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
        <scope>runtime</scope>
    </dependency>

</dependencies>

<build>
    <finalName>MyApp</finalName>
</build> 
```

# c# - 如何在没有来自 C# 控制台应用程序的数据的情况下向 Web 服务发送 POST 请求？

> ID：10443414
> 
> 赞同：0
> 
> 时间：2012-05-04T05:57:49.953
> 
> 标签：c#, post, google-cloud-storage

我在我的 Google 云存储项目中有一个要求，即发出一个带有空正文的 POST 请求以及一些请求标头并获取 Created(201) 响应，其中包含一个上传 ID 以启动可恢复的上传。

我可以找到使用数据发送 POST 请求的引用，但不能没有来自控制台应用程序的数据。

有谁知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:06:55.253

```
 using(var http = new WebClient())
    {
        http.Headers.Add("headername", "headervalue");
        var response = http.UploadData(address, new byte[0]);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:52:15.177

Google Cloud Storage 在线文档包含描述可恢复上传协议的部分（[链接](https://developers.google.com/storage/docs/developer-guide#resumable)）。它包括以下用于启动可恢复上传的示例请求：

```
POST /music.mp3 HTTP/1.1
Host: example.commondatastorage.googleapis.com
Date: Fri, 01 Oct 2010 21:56:18 GMT
Content-Length: 0
Content-Type: audio/mpeg
x-goog-resumable: start
x-goog-api-version: 2
Authorization: OAuth 1/zVNpoQNsOSxZKqOZgckhpQ 
```

您还可以查看[boto 源代码](https://github.com/boto/boto)，其中包含 Google Cloud Storage 可恢复上传协议的 Python 实现（请参阅 boto/gs/resumable_upload_handler.py）。

# browser - 多次上传时浏览器不记得文件路径

> ID：10443416
> 
> 赞同：7
> 
> 时间：2012-05-04T05:57:55.403
> 
> 标签：browser, file-upload, uploadify, plupload

我允许将多张图片上传到我的网站。他们单击“选择图像”，然后出现一个对话框，他们可以使用它们从磁盘中选择图像。图像被上传，然后他们可以选择另一个。但是，下次他们单击“选择图像”时，他们必须重新导航到他们的图像文件夹。这使得上传许多图像变得不那么有趣。

我目前正在使用 Uploadify，但用户说使用 Plupload 演示页面上传示例图像时会出现同样的问题。

用户使用的是 Windows 7 和 IE9。我也在使用 Windows 7 和 IE9，但没有遇到此问题。我在关闭 UAC 的情况下拥有完整的管理员权限，所以也许这与它有关？

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:11:43.947

有趣的。我在 Microsoft Answers 站点上发现了一篇[帖子](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/how-do-i-get-internet-explorer-9-to-remember-the/84c6c128-1173-4050-b2ba-52b5edb8c0e6?msgId=e1ab00da-0050-4a86-96b3-7d464a2f9cc3)，似乎建议将该站点添加到您的受信任站点可以解决问题（针对该站点）

```
Internet Options > Security > Trusted Sites 
```

运行 Win7 和 IE9，我从 Uploadify 演示中得到了相同的行为。将uploadify添加到我信任的站点，关闭窗口并重新打开解决了它。

# excel - 使用部分查找匹配 SUMIF

> ID：10443424
> 
> 赞同：6
> 
> 时间：2012-05-04T05:58:52.760
> 
> 标签：excel, excel-formula, excel-2010

我想做一个 SUMIF ......但我希望标准是匹配单元格的子集。

即我有客户商店：

```
Nike - Melbourne
Nike - Sydney
Nike - Brisbane
Adidas - Melbourne
Adidas - Sydney
Adidas - Brisbane
Reebok - Melbourne
Reebok - Sydney
Reebok - Brisbane 
```

我想要做的是将所有商店的每月价值加在一起 ​​- 我有很多商店有很多位置 - 我想将所有类似的商店组合成一个数字。

我创建了一个简单的新列：

```
Nike
Adidas
Reebok 
```

我想汇总并汇总存储“包含”耐克和存储“包含”阿迪达斯的所有月度值。

目前，SUMIF 完全匹配单元格内容 - 我如何进行部分匹配？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T06:32:51.483

`SUMIF`使用通配符`*`

例如，这个公式对
`=SUMIF($A$1:$A$9,"Nike*",$B$1:$B$9)`
B1:B9 求和，其中 A1:A9 以“Nike”开头

下面详细示例的快照 `=SUMIF($A$1:$A$9,C1&"*",$B$1:$B$9)`
复制下来的这个公式在 C1:C3 上执行 SUMIF

![例子](../Images/f87d15c83b36340cd306698313ac8e13.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T15:11:56.373

我也有类似的需要使用部分匹配来汇总数据。发布的 sumif 公式有效，但我根据需要对其进行了调整。我用countif代替sumif。

公式如下： COUNTIF('Sorted'!$D$2:$D$3831, a6 & "*") 单元格 A6 有部分感兴趣的文本，D 列有我想按年份总结的条目。在这种情况下，此列具有完整的月、日和时间戳。外卡仅在当年部分匹配。从中我能够总结出每一年的兴趣（在单元格 a6、a7 等中）。

# math - 将 9×3 矩形分成 8 个相等大小的正方形

> ID：10443426
> 
> 赞同：1
> 
> 时间：2012-05-04T05:59:20.973
> 
> 标签：math, puzzle, shapes

你准备好你最喜欢的布朗尼食谱，然后倒入新的 9×3 英寸烤盘中。布朗尼蛋糕烘烤。牙签出来是干净的。现在进行切割。

正方形是巧克力蛋糕最美味的形状。你要为八个人服务。你怎么能把你刚出炉的东西切成八块呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:59:36.823

所以这本质上是装箱问题的一种变体（众所周知，它是`NP`-hard！）。

一种解决方案是使用2个`3x3`方格、1`2x2`个方格和5个`1x1`方格，如下：

![8路包装](../Images/bfa8df5cd86a824cd7bae937edf291a1.png)

该解决方案显然是非唯一的，因为各个方格的位置可以左右排列。

由于`NP`-hardness，我想很难想出一种有效的算法来将一般`NxM`矩形`k`精确地划分为正方形。事实上，必须有整个系列的参数值无法解决（例如，如果你从一个`6x1`矩形开始，就不可能分成少于 6 个正方形的任何东西......）。

# proxy - Apache HttpClient 中的代理用户名/密码

> ID：10443428
> 
> 赞同：0
> 
> 时间：2012-05-04T05:59:30.310
> 
> 标签：proxy, httpclient, apache-httpcomponents

我希望通过 Apache HttpClient 4.1.2 在雅虎汇率服务上执行 GET，但是当我通过公司防火墙访问时，我得到了 UknownHostException。不过，当我在家中尝试时，代码运行良好（当然，没有任何代理配置）。

此外，该 URL 在我的浏览器上打开，但无法从命令提示符处 ping。

示例 URL 为[http://quote.yahoo.com/d/quotes.csv?f=l1&s=USDINR=X](http://quote.yahoo.com/d/quotes.csv?f=l1&s=USDINR=X)

**编辑2：**这是我用来连接雅虎金融服务的完整代码：

**GetRate.java**

```
public class GetRate {
    public static void main(String[] args) {
       final String FROM = "USD";
       final String TO = "INR";

       ArrayList<String> paramsList = new ArrayList<String>();
            paramsList.add(FROM + TO);
            System.out.println("Tracking "+ TO + " vs. " + FROM + " Exchange Rate...");

       try {
                double _new = new Double(RestClient.doGet(paramsList));
           double _old = _new;

           while(true) {
               _new = new Double(RestClient.doGet(paramsList));
                    if(_old != _new)
                        _old = _new;
               Thread.sleep(1000);
            }
         } catch (HttpException e) {
                  e.printStackTrace();
         } catch (IOException e) {
        e.printStackTrace();
         } catch (URISyntaxException e) {
        e.printStackTrace();
         } catch (InterruptedException e) {
        e.printStackTrace();
         }
        }
} 
```

**RestClient.java**

```
public class RestClient {
public static final int HTTP_OK = 200;
public static final String SERVER_URL = "http://quote.yahoo.com/d/quotes.csv";
public static final String DEFAULT_ENCODING = "UTF-8";

public static String doGet(final ArrayList<String> params) throws HttpException,
        IOException, URISyntaxException {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpConnectionParams
            .setConnectionTimeout(httpClient.getParams(), 10000);

    httpClient = proxyConfig(httpClient);

    HttpHost targetHost = new HttpHost(SERVER_URL);
    String urlParams = "?f=l1";
    if(!params.isEmpty()) {
        for(String param : params) {
            String paramString = "s=" + URLEncoder.encode(param, DEFAULT_ENCODING) + "=X";
            urlParams += (urlParams.length() > 1) ? ("&" + paramString) : paramString;
        }
    }
    HttpGet httpget = new HttpGet(urlParams);

    System.out.println("Final URL: " + httpget.getURI().toString());

    HttpResponse response = httpClient.execute(targetHost, httpget);
    HttpEntity entity = response.getEntity();
    InputStream instream = entity.getContent();
    return read(instream);
}

private static String read(InputStream in) throws IOException {
    StringBuilder sb = new StringBuilder();
    BufferedReader r = new BufferedReader(new InputStreamReader(in), 1000);
    for (String line = r.readLine(); line != null; line = r.readLine()) {
        sb.append(line + ",");
    }
    in.close();
    return sb.toString().substring(0, sb.length() - 1);
}

     /** Proxy config Approach 1 */
private static DefaultHttpClient proxyConfig(DefaultHttpClient httpClient) {    
    AuthScope auth = new AuthScope("proxy.tcs.com", 8080);
    Credentials creds = new UsernamePasswordCredentials("USER_NAME", "PASSWORD");
    httpClient.getCredentialsProvider().setCredentials(auth, creds);

    return httpClient;
}
}        for(String param : params) {
             String paramString = "s=" + URLEncoder.encode(param, DEFAULT_ENCODING) + "=X";
             urlParams += (urlParams.length() > 1) ? ("&" + paramString) : paramString;
     }
 }

 HttpGet httpget = new HttpGet(urlParams);
 HttpResponse response = httpClient.execute(targetHost, httpget);
 HttpEntity entity = response.getEntity();
 InputStream instream = entity.getContent(); 
```

方法 2：我也尝试了以下代理配置，但找不到如何添加用户名/密码。

```
/** Proxy config Approach 2 */
HttpHost proxy = new HttpHost("PROXY_HOST", PROXY_PORT);
httpClient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

谢谢，
德博吉特

**编辑 1：**
方法 1 的堆栈跟踪：

```
java.net.UnknownHostException: http://quote.yahoo.com/d/quotes.csv
at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
at java.net.InetAddress$1.lookupAllHostAddr(Unknown Source)
at java.net.InetAddress.getAddressFromNameService(Unknown Source)
at java.net.InetAddress.getAllByName0(Unknown Source)
at java.net.InetAddress.getAllByName(Unknown Source)
at java.net.InetAddress.getAllByName(Unknown Source)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.resolveHostname(DefaultClientConnectionOperator.java:242)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:130)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:776)
at ws.client.RestClient.doGet(RestClient.java:48)
at ws.client.GetRate.main(GetRate.java:22) 
```

方法 2 的堆栈跟踪：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "<HEAD><TITLE>Proxy Authorization Required</TITLE></HEAD>,<BODY BGCOLOR="white" FGCOLOR="black"><H1>Proxy Authorization Required</H1><HR>,<FONT FACE="Helvetica,Arial"><B>,Description: Authorization is required for access to this proxy</B></FONT>,<HR>,<!-- default "Proxy Authorization Required" response (407) -->,</BODY>,"
at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source)
at java.lang.Double.valueOf(Unknown Source)
at java.lang.Double.<init>(Unknown Source)
at ws.client.GetRate.main(GetRate.java:22) 
```

问题是，我不确定代码在哪里获取 HTML 作为输入，以及为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:08:22.180

您是否在字面上使用“PROXY_HOST”作为代理构造函数？如果是这样，您必须在浏览器配置中使用代理主机。PROXY_PORT 也一样。

由于防火墙，您将无法从您的公司 ping Yahoo，但您可以通过浏览器访问，因为它被配置为使用代理服务器。

# twitter - 阅读没有 oauth 但对我的应用程序有速率限制的 twitter 用户时间线

> ID：10443435
> 
> 赞同：0
> 
> 时间：2012-05-04T06:00:07.150
> 
> 标签：twitter

基本上我想做的是请求用户公共时间线（包括转发），而不必使用身份验证，但对我的应用程序而不是 IP 应用速率限制。

我想运行这个请求（对于几个不同的屏幕名称）：

```
http://api.twitter.com/1/statuses/user_timeline.json?screen_name=stephenfry&include_rts=1&trim_user=1 
```

反对API，但我在代理/防火墙后面，基本上导致成千上万的用户共享相同的IP，这意味着我的IP几乎总是受到速率限制。是否可以以某种方式将我的 API 密钥插入请求（标题，查询字符串的一部分）并对其进行速率限制而不是 ip？

我真的不想为每个用户完成完整的 OAuth 身份验证机制，因为这需要他们的交互，我只想阅读他们的公共提要。

我已经为推文实现了本地缓存，因此它每小时/用户名最多会发出 4 个请求，但是当 ip 从一开始就受到速率限制时，这对我没什么好处。

这可以做到吗？如果可以，我该怎么做？

编辑：我应该补充一点，使用搜索 API 是不可能的，因为它不会为某些用户返回任何推文（推文太旧了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:03:35.967

Twitter API 上没有任何形式的仅限应用程序的身份。要发出经过身份验证的请求，您必须具有用户上下文。如果您的集成纯粹是服务器端的，您可以使用代表您自己帐户的单个访问令牌并以这种方式发出签名、经过身份验证的请求。我不推荐在客户端或分布式环境中使用任何类型的硬编码令牌。您可能想看看使用 Streaming API 和它的跟随过滤器有什么可能 - 允许您实时流式传输特定用户的公共推文。

# schema - 如何在不使用核心服务在 SDL Tridion 中加载 XML 的情况下将内容设置为组件？

> ID：10443439
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:00:33.437
> 
> 标签：schema, tridion

如何在不使用核心服务在 SDL Tridion 中加载[XML的情况下为组件设置内容？](http://en.wikipedia.org/wiki/XML)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:16:56.627

如果您希望通过核心服务创建常规组件，则可以避免使用[此帮助程序类](https://code.google.com/p/tridion-practice/wiki/ChangeContentOrMetadata)自己制作 XML 。

有了这个，你可以像这样创建一个组件：

```
schemaFields = client.ReadSchemaFields("tcm:1-2-8", true, DEFAULT_READ_OPTIONS);
component = (ComponentData)client.GetDefaultData(ItemType.Component, "tcm:1-57-2");

fields = Fields.ForContentOf(schemaFields);

component.Title = "Name of component (created at "+ DateTime.Now + ")";
fields["Title"].Value = "Title of newly created component";
fields["Intro"].Value = "Intro of newly created component";
fields["Section"].AddValue("This is the first section");
fields["Section"].AddValue("This is the section section");

component.Content = fields.ToString();

component = (ComponentData)client.Create(component, DEFAULT_READ_OPTIONS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:36:00.717

这可能会有所帮助： http: [//blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/uploading-images-using-the-core-service-in-sdl-tridion-2011) [http://blog.building-blocks.com/creating-custom -pages-using-the-core-service-in-sdl-tridion-2011](http://blog.building-blocks.com/creating-custom-pages-using-the-core-service-in-sdl-tridion-2011)

# macos - 使用 ftp 服务器进行版本控制工作流程，在 mac 上编码

> ID：10443442
> 
> 赞同：0
> 
> 时间：2012-05-04T06:00:42.460
> 
> 标签：macos, version-control, ftp, shared-hosting

我至少从 29 年开始就在寻找；-) 但我没有找到任何符合我对良好工作流程的理解的东西。

没有任何工具可以使用共享托管 ftp 服务器进行一些版本控制，以便在 Mac 上进行 Web 开发吗？

这是我的情况：我是 php-coder，刚刚用 Symfony 编写了一个更大的应用程序。现在，由于 1.0 是最终版本并已发布，我已经设置了一个开发版本，我可以在其中进行测试和开发 - 但每次我想发布新版本时，我都必须查找自上次更新以来发生变化的所有文件和手动上传它们或只更新所有内容（7000 多个文件......）。

必须有人遇到此问题并为 mac 编写版本控制工具或为 eclipse 编写版本控制和部署插件或用于在不同 ftp 服务器上测试和发布的任何东西（并且发布不能是 github 或其他任何东西，因为它都是关于共享托管的) - 有人认识吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:20:58.793

最后，我发现自己开始使用 bitbucket。不喜欢 git，所以我现在使用 mercurial。工作正常，因为我可以在完成更新并将更改的文件同步到生产环境后提交所有内容。

SVN 很酷... :-)

谢谢你的想法！

## 更新

几个月后，我找到了[http://www.gitlabhq.com/](http://www.gitlabhq.com/) - 正是我正在寻找的东西。确实没时间用，不过好像满足需要！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T15:04:22.383

如果您将使用（例如）Subversion（ OSX 中**存在**svn-client ），您可以使用[此处提到](https://stackoverflow.com/a/13063724/960558)的任何bash-scripts 来自动部署文件（对于*任何*传输协议真的），在修订之间进行更改（OLD-RELEASE 和 NEW -RELEASE 在您的情况下）具有（可能）最小的改编或 Ryby 脚本，它们从盒子中导出范围。

通过 FTP 以无人值守的方式上传树是第二个工具的任务 - [ncftp](http://www.ncftp.com/ncftp/)，[ncftpput](http://www.ncftp.com/ncftp/doc/ncftpput.html)即

# java - 如何设置 ImageButton 大小以及按下按钮时在添加的图像上显示它

> ID：10443443
> 
> 赞同：0
> 
> 时间：2012-05-04T06:00:55.527
> 
> 标签：java, android

这是我用来创建 ImageButton 的代码。我所有的按钮都将动态创建。

```
 //It is button which inherits from ImageView
        ImageButton button = new ImageButton(this);

        Drawable testPic = getResources().getDrawable(R.drawable.test_pic);

        //button.setBackgroundColor(R.color.transparent_background);//transparent image button button background

        //button.setImageDrawable( testPic ); 
        button.setBackgroundDrawable(testPic);

        //button.setMaxWidth(20);

        button.setOnClickListener(mCorkyListener);
        button.setTag(i);
        //button.setId(i);

        //Controls how the image should be resized or moved to match the size of this ImageView. 
        button.setScaleType( ScaleType.CENTER_INSIDE );

        System.out.println("button with "+button.getMeasuredWidth());
        System.out.println("button height "+button.getMeasuredHeight()); 
```

首先我的 System.out 返回`button with 0 and button height 0`但在设备上我看到它比我想要的大，我把这个按钮放到 Scrollview 中：

```
LinearLayout pubLayout = (LinearLayout)findViewById( R.id.myFilesScrollerLayout);

pubLayout.addView( button );

<ScrollView
    android:id="@+id/myFilesScroller"
    android:layout_width="200dp"
    android:layout_height="match_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"

     >

    <LinearLayout
        android:id="@+id/myFilesScrollerLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</ScrollView> 
```

那么如何根据 ScrollView 的大小来改变我的 ImageButton 大小。另外如何显示该按钮被按下？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:41:44.567

尝试这个

可绘制博士 = getResources().getDrawable(R.drawable.somedrawable); 位图位图 = ((BitmapDrawable) dr).getBitmap(); // 假设要设置大小为 50x50 Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, 50, 50, true));

你也可以使用 drawable.setBounds(0, 0, 50, 50);。但在某些情况下，它可能不适用于某些图像视图。尝试使用两者。

要检查按钮是否被按下，请在 xml 中使用选择器和项目。[此链接](https://stackoverflow.com/questions/8132569/how-to-show-pressed-orange-over-an-imageview)可能会有所帮助

# android - 安卓 - 显示对话框（）；错误

> ID：10443450
> 
> 赞同：0
> 
> 时间：2012-05-04T06:01:31.227
> 
> 标签：android

我试图为 wifi 连接写 if else 条件，但它抛出错误。

日志猫

```
05-04 13:32:51.227: E/WindowManager(4355): Activity com.smartmenu.SplashActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41813bd0 that was originally added here
05-04 13:32:51.227: E/WindowManager(4355): android.view.WindowLeaked: Activity com.smartmenu.SplashActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41813bd0 that was originally added here
05-04 13:32:51.227: E/WindowManager(4355):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:343)
05-04 13:32:51.227: E/WindowManager(4355):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:245)
05-04 13:32:51.227: E/WindowManager(4355):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:193)
05-04 13:32:51.227: E/WindowManager(4355):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:118)
05-04 13:32:51.227: E/WindowManager(4355):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.Dialog.show(Dialog.java:274)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
05-04 13:32:51.227: E/WindowManager(4355):  at com.smartmenu.SplashActivity.showDialog(SplashActivity.java:205)
05-04 13:32:51.227: E/WindowManager(4355):  at com.smartmenu.SplashActivity.onCreate(SplashActivity.java:93)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.Activity.performCreate(Activity.java:4465)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
05-04 13:32:51.227: E/WindowManager(4355):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 13:32:51.227: E/WindowManager(4355):  at android.os.Looper.loop(Looper.java:137)
05-04 13:32:51.227: E/WindowManager(4355):  at android.app.ActivityThread.main(ActivityThread.java:4340)
05-04 13:32:51.227: E/WindowManager(4355):  at java.lang.reflect.Method.invokeNative(Native Method)
05-04 13:32:51.227: E/WindowManager(4355):  at java.lang.reflect.Method.invoke(Method.java:511)
05-04 13:32:51.227: E/WindowManager(4355):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-04 13:32:51.227: E/WindowManager(4355):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-04 13:32:51.227: E/WindowManager(4355):  at dalvik.system.NativeStart.main(Native Method) 
```

代码

```
 if(str.equals(""))
        {                          
           ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);    
        if (mWifi.isConnected()) {
           new Handler().postDelayed(new Runnable(){
                @Override
                public void run() {
                /* Create an Intent that will start the Menu-Activity.*/ 
                Intent mainIntent = new Intent(SplashActivity.this,MainActivity.class);
                SplashActivity.this.startActivity(mainIntent);
                SplashActivity.this.finish();
                }
            }, SPLASH_DISPLAY_LENGHT);
        }
        else
        {                   
            showDialog();
        }
        }
        else
        {
            ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
            NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);    
            if (mWifi.isConnected()) {                  
                  new Handler().postDelayed(new Runnable(){
                        @Override
                        public void run() {
                        /* Create an Intent that will start the Menu-Activity.*/ 
                        Intent mainIntent = new Intent(SplashActivity.this,MainActivity.class);
                        SplashActivity.this.startActivity(mainIntent);
                        SplashActivity.this.finish();
                        }
                    }, SPLASH_DISPLAY_LENGHT);
                new DownloadFilesTask().execute();
            }
            else
            {                   
                showDialog();
            } 
```

显示对话（）；

```
 private void showDialog()
    {
        AlertDialog.Builder dialog = new AlertDialog.Builder(this);
        dialog.setTitle("Attention");
        dialog.setMessage("No Internet Connection. Please enable the wifi. ");
        dialog.setPositiveButton("OK", new 
                DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, 
                int whichButton) 
                {
                    new Handler().postDelayed(new Runnable(){
                        @Override
                        public void run() {
                        /* Create an Intent that will start the Menu-Activity.*/ 
                        Intent mainIntent = new Intent(SplashActivity.this,MainActivity.class);
                        SplashActivity.this.startActivity(mainIntent);
                        SplashActivity.this.finish();
                        }
                    }, SPLASH_DISPLAY_LENGHT);
                }
            });

        dialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:09:19.997

**退出活动后，您正试图显示一个对话框。**

解决方案是在退出活动之前在您创建的对话框上调用dismiss()，例如在onPause() 中。

视图具有对其父上下文的引用（取自构造函数参数）。如果您离开 Activity 而不破坏 Dialog 和其他动态创建的 View，它们仍然持有对您的 Activity 的引用（如果您使用 this 作为 Context 创建：就像 new ProgressDialog(this)），因此它无法被 GC 收集，从而导致内存泄漏。

原来的答案是[亚历](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added)克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:30:15.383

尝试使用 AsyncTask 并在 onPostExecute 中显示您的对话框。在 onPreExecute 中显示您的启动画面。

# tomcat - 如何将apache tomcat的server.xml拆分成几个单独的文件？

> ID：10443456
> 
> 赞同：5
> 
> 时间：2012-05-04T06:01:58.313
> 
> 标签：tomcat, config, virtualhost, server.xml

我使用apache tomcat 7在单台机器上运行很多ofo虚拟主机，我`Host`在server.xml中为每个虚拟主机插入一个标签，这样我就可以集中管理它们。
但是现在，在添加了很多主机标签之后，server.xml 变得如此之大，我正在寻找一种方法将每个虚拟主机相关标签放在一个单独的 xml 文件中（与 apache 对 httpd.conf 和虚拟主机所做的完全相同）管理）。例如，我为每个主机创建一个单独的 xml 文件并将它们全部放入一个目录并强制 tomcat 加载它们！
任何的想法？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T09:48:30.933

以下应该可以工作，但不是由于 Tomcat 错误。我已经修复了主干 ( [r1333827](http://svn.apache.org/viewvc?view=revision&revision=1333827) ) 和 7.0.x ( [r1333829](http://svn.apache.org/viewvc?view=revision&revision=1333829) ) 中的错误，该修复将包含在 Tomcat 7.0.28 及以后的版本中。我可以发誓这以前有效。可能是 JVM 中的 xml 解析器在某个时候被收紧了，这仍然适用于较旧的 JVM 版本，但我还没有测试过。

您可以使用 XML 实体 - 每个主机一个。例如：

在元素之前插入以下`<server>`内容：

```
<!DOCTYPE server-xml [
  <!ENTITY host1 SYSTEM "host1.txt">
]> 
```

host1.txt 的内容是您要定义的主机元素：

```
<Host>
  ...
</Host> 
```

然后将其插入到 server.xml 中的`<engine>`元素中，如下所示：

```
<engine ...>
  &host1;
</engine> 
```

根据需要对尽可能多的主机重复此操作。

# c++ - 错误：'boiler::uniqueInstance == 0l' 中的 'operator==' 不匹配

> ID：10443457
> 
> 赞同：0
> 
> 时间：2012-05-04T06:02:02.960
> 
> 标签：c++, design-patterns

```
#include <iostream>
using namespace std;

class boiler
{
private:
    static boiler uniqueInstance;

    bool boilerEmpty;
    bool mixtureBoiled;

    boiler()
    {
        boilerEmpty = true;
        mixtureBoiled = false;
    }

public:
    static boiler getInstance()
    {
        if(uniqueInstance == NULL)
        {
            uniqueInstance = new boiler();
        }

        return uniqueInstance;
    }
}; 
```

上述代码返回标题中所述的错误。

```
anisha@linux-y3pi:~> g++ -Wall test.cpp
test.cpp: In static member function ‘static boiler boiler::getInstance()’:
test.cpp:22:26: error: no match for ‘operator==’ in ‘boiler::uniqueInstance == 0l’
test.cpp:24:34: error: no match for ‘operator=’ in ‘boiler::uniqueInstance = (operator new(2u), (<statement>, ((boiler*)<anonymous>)))’
test.cpp:5:1: note: candidate is: boiler& boiler::operator=(const boiler&) 
```

为什么？我们不能将“对象”与 NULL 进行比较吗？有一些语法问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:06:32.590

你可能需要一个指针：

```
static boiler* uniqueInstance; 
```

从那时起，您将在`new`此处对其进行初始化：

```
uniqueInstance = new boiler (); 
```

编译器告诉您它无法将 int 的实例`boiler`与 int （实际上是 long ）进行比较。这种比较是不存在的。指针可以与整数类型进行比较，这允许与 0 进行比较。

这里的比较`NULL`用作检查指针是否已经初始化的一种方法。如何对实例执行此操作并不明显，没有无效或未初始化实例的概念。您可以`NULL`通过定义适当的 来比较一个对象`operator==`，但这种比较可能没有意义，因为`NULL`它通常只是 的另一个名称`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:07:39.820

您声明`uniqueInstsance`为类实例：

```
 static boiler uniqueInstance; 
```

但有时将其视为指针：

```
uniqueInstance = new boiler (); 
```

我认为您应该将其声明为指针，以便您可以动态分配实例：

```
static boiler* uniqueInstance; 
```

您还需要更改`getInstance()`以返回指针：

```
static boiler* getInstance() //... 
```

最后确保你实际上`uniqueInstance`在类声明之外有一个定义。在 .cpp 文件中的一个位置（不是标题）：

```
boiler* boiler::uniqueInstance; 
```

# ssh - 将大量文件从一台服务器传输到另一台服务器

> ID：10443458
> 
> 赞同：1
> 
> 时间：2012-05-04T06:02:18.827
> 
> 标签：ssh, cpanel

我正在移动服务器，我们的图像目录有大约 15,000 张图像（2GB 大小）需要移动到新服务器上。

图像在新服务器上会有不同的路径，所以不能只迁移整个 CPANEL。

有什么简单的方法可以解决这个问题吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:19:21.577

使用 SFTP 从一台服务器到另一台 [http://support.cs.utah.edu/index.php?option=com_content&view=article&id=33&Itemid=59](http://support.cs.utah.edu/index.php?option=com_content&view=article&id=33&Itemid=59)

编辑：回答下面的问题：不需要本地下载，sftp 是直接服务器到服务器。像这样在源服务器上使用来自 SSH shell 的 sftp

```
$ cd source_directory
$ sftp user@otherserver
Password:
Connected to otherserver
sftp> cd target_directory  //this is changing dir on remote server not local
sftp> put filename 
```

或从源目录到目标目录的所有文件

sftp> 放 *

# c# - c# Array.FindAllIndexOf which FindAll IndexOf

> ID：10443461
> 
> 赞同：30
> 
> 时间：2012-05-04T06:02:33.637
> 
> 标签：c#, arrays, indexof

我知道 c# 有[`Array.FindAll`](http://msdn.microsoft.com/en-us/library/1kkxfxdd.aspx)和[`Array.IndexOf`](http://msdn.microsoft.com/en-us/library/system.array.indexof.aspx).

有`Array.FindAllIndexOf`哪个返回`int[]`吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-04T06:09:51.637

```
string[] myarr = new string[] {"s", "f", "s"};

int[] v = myarr.Select((b,i) => b == "s" ? i : -1).Where(i => i != -1).ToArray(); 
```

这将返回 0, 2

如果数组中不存在该值，则它将返回一个 int[0]。

做一个扩展方法

```
public static class EM
{
    public static int[] FindAllIndexof<T>(this IEnumerable<T> values, T val)
    {
        return values.Select((b,i) => object.Equals(b, val) ? i : -1).Where(i => i != -1).ToArray();
    }
} 
```

并称它为

```
string[] myarr = new string[] {"s", "f", "s"};

int[] v = myarr.FindAllIndexof("s"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T06:06:31.187

您可以编写如下内容：

```
string[] someItems = { "cat", "dog", "purple elephant", "unicorn" }; 
var selectedItems = someItems.Select((item, index) => new{
    ItemName = item,
    Position = index}); 
```

或者

```
var Items = someItems.Select((item, index) => new{
    ItemName = item,
    Position = index}).Where(i => i.ItemName == "purple elephant"); 
```

**阅读**：[**使用 LINQ 获取给定项目的索引**](http://geekswithblogs.net/SanjayU/archive/2009/10/15/quick-tip--get-the-index-of-a-given-using.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T13:52:52.300

搜索与指定谓词定义的条件匹配的元素，并返回整个 System.Array 中出现的所有从零开始的索引。

```
public static int[] FindAllIndex<T>(this T[] array, Predicate<T> match)
{
    return array.Select((value, index) => match(value) ? index : -1)
            .Where(index => index != -1).ToArray();
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-03T14:38:25.650

我知道这是一篇旧帖子，但您可以尝试以下方法，

```
string[] cars = {"Volvo", "BMW", "Volvo", "Mazda","BMW","BMW"};
var res = Enumerable.Range(0, cars.Length).Where(i => cars[i] == "BMW").ToList(); 
```

> 以列表形式返回**{1,4,5}**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-04T06:24:08.753

不，那里没有。但是您可以编写自己的[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

```
public static int[] FindAllIndexOf<T>(this T[] a, Predicate<T> match)
{
   T[] subArray = Array.FindAll<T>(a, match);
   return (from T item in subArray select Array.IndexOf(a, item)).ToArray();
} 
```

然后，对于您的数组，调用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T06:14:59.240

您可以循环使用[findIndex](http://msdn.microsoft.com/en-us/library/xhdxx3we.aspx)给出索引

```
string[] arr = { "abc", "asd", "def", "abc", "lmn", "wer" };
int index = -1;
do
{
    index = Array.IndexOf(arr, "abc", index + 1);
    System.Console.WriteLine(index);
} while (-1 != index); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-19T10:05:28.083

我使用 Nikhil Agrawal 的答案创建了以下相关方法，这可能很有用。

```
public static List<int> FindAllIndexOf<T>(List<T> values, List<T> matches)
    {
        // Initialize list
        List<int> index = new List<int>();

        // For each value in matches get the index and add to the list with indexes
        foreach (var match in matches)
        {
            // Find matches 
            index.AddRange(values.Select((b, i) => Equals(b, match) ? i : -1).Where(i => i != -1).ToList());

        }

        return index;
    } 
```

它需要一个包含值的列表和一个包含要匹配的值的列表。它返回带有匹配索引的整数列表。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-31T21:15:38.203

您可以通过仅创建 2 个整数变量来解决此问题。给你更多的力量！

```
string[] seasons= { "Fall","Spring", "Summer", "Fall", "Fall", "Winter"};

int i = 0;

int IndexOfFallInArray = 0;

int[] IndexesOfFall= new int[seasons.Length];

foreach (var item in seasons)
{
    if (item == "Fall")
        {
            IndexesOfFall[i] = IndexOfFallInArray;
            i++;
        }
        IndexOfFallInArray++;
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-06-24T22:55:37.703

我知道这个问题已经回答了，这只是另一种方法。请注意，我使用`ArrayList`而不是`int[]`

```
// required using directives
using System;
using System.Collections;

String      inputString = "The lazy fox couldn't jump, poor fox!";
ArrayList   locations   =  new ArrayList();      // array for found indexes
string[] lineArray = inputString.Split(' ');     // inputString to array of strings separated by spaces

int tempInt = 0;
foreach (string element in lineArray)
{
     if (element == "fox")
     {
         locations.Add(tempInt);   // tempInt will be the index of current found index and added to Arraylist for further processing 
     }
 tempInt++;
} 
```

# sql - 如何使用 T-SQL 从字符串中获取数字部分？

> ID：10443462
> 
> 赞同：21
> 
> 时间：2012-05-04T06:02:46.940
> 
> 标签：sql, sql-server

我有以下字符串。

```
Input
--------------
2030031469-NAI 
```

要获取数字部分，我使用以下脚本

```
declare @str varchar(50)= '2030031469-NAI'

Select 
    @str
    ,SUBSTRING(@str, 1,  NULLIF(CHARINDEX('-', @str) - 1, -1))
        ,Left(@str,PATINDEX('%-%',@str)-1) 
```

得到以下输出

```
Output: 
----------
2030031469 
```

有没有其他简单/优雅的方式来做同样的事情？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-04T06:11:42.690

```
select left(@str, patindex('%[^0-9]%', @str+'.') - 1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-27T12:04:45.290

*如果您的字符串以字母开头并以ERT-123 之*类的数字结尾

 *你可以使用这个查询：

```
 (select  substring(@str,patindex('%[0-9]%', @str),len(@str))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T06:05:07.800

请检查一下，我在我的项目中用于提取电话号码

```
 CREATE Function [dbo].[RemoveNonNumericCharacters](@Temp VarChar(1000))
    Returns VarChar(1000)
    AS
    Begin

        While PatIndex('%[^0-9]%', @Temp) > 0
            Set @Temp = Stuff(@Temp, PatIndex('%[^0-9]%', @Temp), 1, '')

        Return @TEmp
    End 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-04T10:33:08.203

从未格式化的字符串中提取数字

```
DECLARE @Text NVARCHAR(100)= 'extract only 23124R integer @#%%'
SELECT SUBSTRING(@Text, PATINDEX('%[0-9]%',@Text), PATINDEX('%[^0-9]%',SUBSTRING(@Text, PATINDEX('%[0-9]%',@Text), LEN(@Text)))-1) [ONLY_INT] 
```*

# javascript - 我需要在使用 javascript 的变量名之前加一美元吗？

> ID：10443463
> 
> 赞同：10
> 
> 时间：2012-05-04T06:02:55.720
> 
> 标签：javascript, jquery

我有以下代码：

```
var formSubmitHandler = function (link, form) {

    //e.preventDefault();
    var $form = form;
    var val = $form.valid();
    var action = $(form).data('action');
    var entity = $(form).data('entity'); 
```

我需要“var $form = form”这行吗？我可以稍后再做“var val = form.valid(); 吗？

这不是我的代码，所以我想知道为什么开发人员在表单之前添加了 $ 并分配了它？

**更新：**

感谢您的回复。如果如前所述，它只是表明它是一个 jQuery 变量，那么我可以通过将函数参数更改为 (link, $form) 来删除该行吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T06:11:11.650

`$`并且`jQuery`基本上是 jQuery 实例。

很好理解这`$( < place something here >)`是一个 jQuery 函数调用，`$your_variable_name`只是一个带美元的变量。

有些人`$`在自己的变量中使用来表明它是一个 jQuery 对象。使用此命名约定，您的源代码将像这样。

```
var formSubmitHandler = function (link, form) {
    var $form = $(form);
    var val = $form.valid();
    var action = $form.data('action');
    var entity = $form.data('entity'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T06:03:58.813

不，您不必使用该`$`标志。这通常只是一种审美选择。

在上面的示例代码中，函数的参数名为 form `function (link, form)`。在函数内部，被声明的新变量有一个`$`它，以便将它与参数变量区分开来`form`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T06:05:02.680

这是不必要的。变量前面的美元符号大多数时候用来表示它是一个 JQuery 变量。JQuery 使用美元符号作为快捷方式。在变量名中使用它除了对开发人员来说它是一个 JQuery 对象的审美意义之外没有其他意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:06:52.550

最佳实践是使用 $ 符号来帮助您区分表示常规 DOM 元素（以及所有其他数据类型）的 Javascript 变量和保存对 jQuery 对象的引用的变量。对于后者，您使用 $ 符号。

# c++ - 编译时未找到“log10”标识符错误

> ID：10443465
> 
> 赞同：0
> 
> 时间：2012-05-04T06:03:21.417
> 
> 标签：c++

我正在尝试编译一些 trie 代码。大部分部分都很好，除了有一行提到 log10(probab)/log10(2.0)

我在这一行收到错误错误：找不到'log10'标识符错误：找不到'log10'标识符

我试图在文件中包含头文件`#include <cmath>`，但在编译时我开始收到大量错误。截图：http: [//i.imgur.com/DgAn3.png](http://i.imgur.com/DgAn3.png)

这是代码[pastebin.com/XLXggW4R](http://pastebin.com/XLXggW4R)
不能说包括 . 但是，我在评论中提到了它给出了一个错误-</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:18:48.397

您缺少`std`代码上的命名空间引用。你有两个选择：

1.  尝试使用`log10()`函数作为：`std::log10()`。
2.  `using`在 . 旁边添加一个语句`#include <cmath>`。

IE：

```
#include <cmath>
using namespace std; 
```

# jquery - 使用 Jquery 从 JSON 格式中提取数据

> ID：10443466
> 
> 赞同：1
> 
> 时间：2012-05-04T06:03:24.243
> 
> 标签：jquery, json

我有这样的 url，这是一个 js 文件示例，例如这个链接[http://www.mysite.com/json.js](http://www.mysite.com/json.js) 并且该链接将输出一个 json 格式的值，如下所示：

```
{
"note":null,
"attributes":null,
"total_price":9980,
"total_weight":0,
"item_count":4,
"items":[{
  "id":214597138,
  "title":"Acai +",
  "price":2495,
  "line_price":9980,
  "quantity":4,
  "sku":"",
  "grams":0,
  "vendor":"Delta Labs",
  "variant_id":214597138,
  "url":"/products/acai",
  "image":"http://cdn.shopify.com/s/files/1/0156/4994/products/acai_bottle.png?385",
  "handle":"acai",
  "requires_shipping":true
}],
"requires_shipping":true} 
```

现在我想获取该链接，然后在我的 jquery 上，我将如何使用该链接和 json 输出来获取标题、url、价格、sku 等值？

我在谷歌上搜索是否有一些函数可以处理这个问题，我发现了 jQuery.getJSON，但我不太了解，或者它是否适用于我想要完成的任务？

顺便说一下，[http](http://www.mysite.com/json.js) ://www.mysite.com/json.js，它的json值是动态的，所以就是我要抓取的链接，输出json内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:12:33.520

这是我的做法，例如在 ajax 请求中。

```
$.get('http://www.mysite.com/json.js', function(result) {
   var json = $.parseJSON(result);
   alert(json.title); //Do whatever you want here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:19:37.837

Make sure your JSON is valid -> [http://www.jsonlint.com](http://www.jsonlint.com)

To go through every entry in jSON try this:

```
$.getJSON("url/to/json/file",function(data){
    $.each(data,function(index,element){
        console.log(element.items.url);
    });
}); 
```

To get one entry try this (without $.each):

```
$.getJSON("url/to/json/file",function(data){
    console.log(data.items.url);
}); 
```

Make sure it's not a CrossDomain issue! JSON parsing between domains doesn't work in some cases. Make sure it's not one of them. To work with CrossDomain use JSONP. The difference between JSON and JSONP it's that JSONP can support callback and works over crossdomain.

Hope it helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:07:27.863

把它放在一个变量中假设，

```
myJSON = $.parseJSON(YOUR_JSON); 
```

然后，

```
myJSON.items[0].url 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:08:09.823

[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

你也可以使用[jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# java - 传递一个集合来创建一个新集合

> ID：10443467
> 
> 赞同：2
> 
> 时间：2012-05-04T06:03:30.993
> 
> 标签：java, set

在传递一个集合以在 java 中创建一个新集合时，对新集合所做的任何修改也会修改原始集合。如何传递集合以便对新集合所做的任何更改都不会影响原始集合？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:05:24.713

```
Set newSet = new HashSet(oldSet); 
```

这会*复制*旧集；在此之后对旧集所做的任何更改都**不会**影响新集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:14:14.783

这将取决于 的实现`Set`，但如果您检查[Set API](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)，所有已知的实现类，在那些实现该构造函数的地方，它会说*Constructs a new* Set。

您可以检查它：

[哈希集](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html#HashSet%28java.util.Collection%29)：

> 构造一个包含指定集合中元素的新集合。

[树集](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html#TreeSet%28java.util.Collection%29)：

> 构造一个包含指定集合中元素的新树集，[...]

[链接哈希集](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html#LinkedHashSet%28java.util.Collection%29)：

> 使用与指定集合相同的元素构造一个新的链接哈希集。

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T13:21:29.170

这就是我一直在寻找的：

```
new HashSet<String>(Arrays.asList(new String[]{"one","two"})); 
```

# jquery - jQuery增量添加css值

> ID：10443469
> 
> 赞同：8
> 
> 时间：2012-05-04T06:03:44.720
> 
> 标签：jquery

我想在这个 css 更改中添加或减去 'top' 的值。而不是指定特定数量的像素，我想将 20px 添加到外部 css 提供的当前值。

目标是使列表上下移动。

```
$('.up').click(function(){
   $('.list').css('top','-20px');
}); 
```

HTML

```
<div id="container">
    <ul class="list">
        <li >first item</li>
        <li class="active">second item</li>
        <li>third item</li>
        <li >fourth item</li>
    <ul>
</div>   
<a href="#" class="up">up</a>
<a href="#" class="up">down</a>​ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T06:06:30.980

**根据您的编辑：**

```
$('.up').click(function(){
   $('.list').css({position:'absolute', top: parseInt($('.list').css('top'), 10) + 20 + 'px'});
}); 
```

或者您可以在`20px`每次点击时添加，同时使用`animate`如下：

```
$('.up').click(function(){
   $('.list').css({position:'absolute'});
   $('.list').animate({top: '+=20'});
}); 
```

* * *

除非您还指定，否则该`top`属性将不起作用`position`：

```
$('.up').click(function(){
   $('.list').css({position:'absolute', top:'-20px'});
}); 
```

更改`position`为`absolute`或`relative`根据您的需要。

请注意，如果您希望`.list`元素在更改时仅出现在其容器内`top`，则需要分配给`position:relative`父元素和元素。`absolute``.list`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-04T05:55:58.383

该`.css()`方法还允许使用 "+=" 和 "-=" 语法`.animate()`。所以你可以简单地这样做：

```
$('.up').click(function(){
   $('.list').css('top','-=20px');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:11:11.650

有关完整示例，请参阅此 JSFiddle：http: [//jsfiddle.net/NYVmw/](http://jsfiddle.net/NYVmw/)

```
$('.up').click(function(){
    var newtop = $('.list').position().top - 20;
    $('.list').css('top', newtop + 'px');
});

$('.down').click(function(){
    var newtop = $('.list').position().top + 20;
    $('.list').css('top', newtop + 'px');
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:08:39.233

将您的“向上”类更改为按钮的不同 ID

```
<a href="#" id="up">up</a>
<a href="#" id="down">down</a>​ 
```

取容器的 margin-top 的当前值并修改它：

```
$('#up').on('click', function(){
  currentValue = parseInt($('#container').css("margin-top"));
  currentValue -= amount;
  $('#container').css("margin-top", currentValue)
})

$('#down').on('click', function(){
  currentValue = parseInt($('#container').css("margin-top"));
  currentValue += amount;
  $('#container').css("margin-top", currentValue)
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:09:40.437

CSS 并不是真正用于进行数学和运算，而是更多地用于指定您的样式。最好的方法是，在 javascript 中，

```
getElementById("nameofyourelement").style['top'] = "5px" 
```

例如。使用 CSS3 动画效果会更好。像这样

```
getElementById("nameofyourelement").style['-webkit-transition-duration'] = "1s" //1 second duration for animation, set to 0 if you don't want animation
getElementById("nameofyourelement").style['-webkit-transform'] = "translateY(5px)" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-04T06:06:13.510

`$('.list').css('position','relative').css('top','-20px');`

# java - Java FTP 在 SwingWorker 线程中不起作用

> ID：10443474
> 
> 赞同：1
> 
> 时间：2012-05-04T06:03:57.657
> 
> 标签：java, multithreading, swing, swingworker, ftp4j

我有一个简单的 GUI 程序，它与数据库进行一些交互，然后一旦完成 ftps 将一些文件上传到服务器。在我添加 SwingWorker 线程以保持 GUI 响应之前，这一直很有效。

如果我把它放在它的独立项目中，我正在使用的代码可以正常工作，但是在这个项目（SwingWorker 线程）中它给了我以下错误：

```
java.net.SocketException: Software caused connection abort: recv failed

at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(Unknown Source)
at java.net.SocketInputStream.read(Unknown Source)
at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at sun.nio.cs.StreamDecoder.read0(Unknown Source)
at sun.nio.cs.StreamDecoder.read(Unknown Source)
at java.io.InputStreamReader.read(Unknown Source)
at it.sauronsoftware.ftp4j.NVTASCIIReader.readLine(NVTASCIIReader.java:105)
at it.sauronsoftware.ftp4j.FTPCommunicationChannel.read(FTPCommunicationChannel.java:142)
at it.sauronsoftware.ftp4j.FTPCommunicationChannel.readFTPReply(FTPCommunicationChannel.java:187)
at it.sauronsoftware.ftp4j.FTPClient.openActiveDataTransferChannel(FTPClient.java:3511)
at it.sauronsoftware.ftp4j.FTPClient.openDataTransferChannel(FTPClient.java:3475)
at it.sauronsoftware.ftp4j.FTPClient.upload(FTPClient.java:2641)
at it.sauronsoftware.ftp4j.FTPClient.upload(FTPClient.java:2550)
at it.sauronsoftware.ftp4j.FTPClient.upload(FTPClient.java:2421)
at GUI$MatchFiles.doInBackground(GUI.java:1602)
at GUI$MatchFiles.doInBackground(GUI.java:1)
at javax.swing.SwingWorker$1.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at javax.swing.SwingWorker.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

有任何想法吗？

编辑：我假设你的意思是这样的？请注意这是一个非常精简的版本，我已经删除了很多多余的代码。我看不出有任何影响。

```
class Worker extends SwingWorker<Integer, Integer>{
    protected Integer doInBackground() throws Exception{
        FTPClient client = new FTPClient();
        client.connect(url);
        client.login(username, password);
        client.setPassive(false);
        client.changeDirectory(uploaddirectory);
        client.upload(new File(fileuploadpath));
        client.disconnect(true);
    }

    protected void done() {                
        System.out.println("Done");                 
    }
} 
```

如前所述，我将这段代码放在 swingworker 中并将其放入自己的类中，它运行完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:40:13.467

看起来您的套接字已被防火墙或防病毒软件切断...尝试禁用防火墙和防病毒软件并重新运行您的程序...

# ruby - 机器关闭时退订兔子队列

> ID：10443477
> 
> 赞同：0
> 
> 时间：2012-05-04T06:04:24.680
> 
> 标签：ruby, rabbitmq

我在 3 台工作机器上通过 AMQP gem 运行 rabbitmq。当机器重新启动时，我的队列显示只添加了工作人员，而不是取消订阅。例如，假设每台机器运行 5 个工人：

当我启动 3 台机器时，我有 15 名工作人员订阅了队列当我关闭所有 3 台机器时，我仍然有 15 名工作人员订阅了队列当我重新启动 3 台机器时，我现在有 30 名工作人员订阅了队列

实际上，我应该只有 15 个工人。

当机器重新启动/关闭时，如何确保我与任务队列的连接关闭？我努力了：

```
 Signal.trap("INT") do #handles the ctrl c case
    connection.close do
      EM.stop { exit }
    end
  end

  Signal.trap("TERM") do #handles the reboot and shut down case
    connection.close do
      EM.stop { exit }
    end
  end 
```

这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:51:17.360

我认为您正在寻找的是[消费者取消通知](http://www.rabbitmq.com/extensions.html#consumer-cancel-notify)扩展。

在您的情况下，客户端尚未收到有关机器重新启动的通知（换句话说，当机器重新启动时，他们没有收到来自 rabbitmq 代理的“basic.cancel”通知）。

请参阅上面链接的摘录：

> 在这种意外消费者取消的情况下，代理将向客户端发送 basic.cancel 的扩展。如果代理从客户端接收到 basic.cancel，则不会发送此消息。默认情况下，AMQP 0-9-1 客户端不期望从代理接收 basic.cancel 方法异步，因此为了启用此行为，客户端必须在其客户端属性中提供一个功能表，其中有一个键 consumer_cancel_notify 和一个布尔值 true

我不是 ruby​​ 程序员，但我认为上面链接中的 java 示例应该可以为您提供完整的图片。

# amazon-emr - 与 Amazon Elastic Mapreduce 中的 Job 执行速度有关

> ID：10443478
> 
> 赞同：0
> 
> 时间：2012-05-04T06:04:26.100
> 
> 标签：amazon-emr

我的任务是 1) 最初我想使用 SQOOP 将数据从 MS SQL Server 导入 HDFS。2）通过 Hive，我正在处理数据并在一个表中生成结果 3）包含来自 Hive 的表的结果再次导出到 MS SQL SERVER。

我想使用 Amazon Elastic Map Reduce 执行所有这些操作。

我从 MS SQL Server 导入的数据非常大（一张表中大约有 5,00,000 个条目。同样我有 30 个表）。为此，我在 Hive 中编写了一个仅包含查询的任务（并且每个查询都使用了很多连接）。因此，由于这个原因，我的单台本地机器上的性能非常差（完全执行大约需要 3 小时）。

我想尽可能少地减少那个时间。为此，我们决定使用 Amazon Elastic Mapreduce。目前我正在使用 3 m1.large 实例，但我的性能仍然与本地机器相同。

为了提高性能，我需要使用多少个实例？由于我们使用的实例数量是自动配置的，还是我需要在提交 JAR 以执行时指定？因为我使用两台机器的时间是一样的。

还有有没有其他方法可以提高性能或者只是增加实例的数量。或者我在执行 JAR 时做错了什么？

请指导我完成这个，因为我对亚马逊服务器不太了解。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:09:17.563

您可以尝试 Ganglia，它可以使用引导操作安装在您的 EMR 集群上。这将为您提供有关集群中每个节点性能的一些指标，并可能帮助您优化以获得合适大小的集群： [http ://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_Ganglia.html](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_Ganglia.html)

如果您在本地计算机上使用 EMR Ruby 客户端，则可以设置 SSH 隧道以允许您在 Firefox 中查看 ganglia Web 界面（您还需要按照以下[http://docs.amazonwebservices设置 FoxyProxy .com/ElasticMapReduce/latest/DeveloperGuide/emr-connect-master-node-foxy-proxy.html](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/emr-connect-master-node-foxy-proxy.html) )

# image - MFC 在一组图像中的一个图像上绘制一条线

> ID：10443480
> 
> 赞同：1
> 
> 时间：2012-05-04T06:04:42.773
> 
> 标签：image, mfc, line, dicom

我正在阅读 DICOMDIR，然后通过鼠标滚动或向上 n 向下按键盘箭头键，一一显示给定系列的所有图像。

现在，我碰巧在其中一张图片上画了一条线。目前，当我滚动浏览图像时，这条线会继续通过所有图像。

但是想要的结果是，当我开始滚动时，该行应该消失，因为它不属于下一个图像。当我向上滚动到我画那条线的那个图像时，这条线应该显示在那个图像上。

任何想法如何使该线仅成为第一次绘制的图像的一部分，而不是其他图像？

我尝试了什么：将该图像的文件路径（绘制线条的位置）存储到 CStringArray 中。我应该如何使用这个存储的文件路径来绘制该图像及其线条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T03:53:07.910

我不太确定您要做什么。如果你的意思是你想要一个特定图像的线注释，你可以将它存储为 GSPS 数据，也可以与像素数据一起读取。GreyScale Presentation State 对象允许将多个图形注释序列包含到单个对象中。

### 你的方式

由于您已将文件的路径存储在 CStringArray 中，因此请找到读取和显示图像的代码。添加与此类似的代码（我假设您在阅读时正在显示它。）看看下面的代码。

```
// Code to read the file where path is csFilePath
// Read bitmap is stored to CBitmap* pBitmap
CDC* pDC = GetDC();
CDC memDC;
memDC.CreateCompatibleDC( pDC );
CBitmap* pOldBitmap = memDC.SelectObject( pBitmap );
pDC->BitBlt( xVal, yVAl, width, height, memDc, SRC_COPY );
memDC.SelectObject( pOldBitmap );
memDC.DeleteObject();
for( int nIdx; nIdx < yourLineArray.GetSize(); nIdx++ )
{
    if( csFilePath == yourLineArray[nIdx] )
    {
        pDC->DrawLine( x1, y1, x2, y2 );
        break;
    }
} 
```

# java - 使用反射从 XML 文件（Java 中）读取数据

> ID：10443485
> 
> 赞同：0
> 
> 时间：2012-05-04T06:05:48.050
> 
> 标签：java, xml, reflection

给定一个简单的 XML 文件，例如：

```
<Game>
    <Round>
        <roundNumber>1</roundNumber>
        <Door>
            <doorName>abd11</doorName>
            <Value>
                <xVal1>0</xVal1>
                <xVal2>25</xVal2>
                <pVal>0.31</pVal>
            </Value>
            <Value>
                <xVal1>25</xVal1>
                <xVal2>50</xVal2>
                <pVal>0.04</pVal>
            </Value>
            <Value>
                <xVal1>50</xVal1>
                <xVal2>75</xVal2>
                <pVal>0.19</pVal>
            </Value>
            <Value>
                <xVal1>75</xVal1>
                <xVal2>100</xVal2>
                <pVal>0.46</pVal>
            </Value>
        </Door>
        <Door>
            <doorName>vvv1133</doorName>
            <Value>
                <xVal1>60</xVal1>
                <xVal2>62</xVal2>
                <pVal>1.0</pVal>
            </Value>
        </Door>
    </Round>
    <Round>
        <roundNumber>2</roundNumber>
        <Door>
            <doorName>eee</doorName>
            <Value>
                <xVal1>0</xVal1>
                <xVal2>-25</xVal2>
                <pVal>0.31</pVal>
            </Value>
            <Value>
                <xVal1>-25</xVal1>
                <xVal2>-50</xVal2>
                <pVal>0.04</pVal>
            </Value>
            <Value>
                <xVal1>-50</xVal1>
                <xVal2>-75</xVal2>
                <pVal>0.19</pVal>
            </Value>
            <Value>
                <xVal1>-75</xVal1>
                <xVal2>-100</xVal2>
                <pVal>0.46</pVal>
            </Value>
        </Door>
        <Door>
            <doorName>cc</doorName>
            <Value>
                <xVal1>-60</xVal1>
                <xVal2>-62</xVal2>
                <pVal>0.3</pVal>
            </Value>
            <Value>
                <xVal1>-70</xVal1>
                <xVal2>-78</xVal2>
                <pVal>0.7</pVal>
            </Value>
        </Door>
    </Round>
</Game> 
```

我想从那个文件中读取数据。

我可以用老式的方式读取标签，并相应地创建对象，

但我想使用反射机制来做到这一点。

有人可以解释或指导我到可以解释如何做到这一点的教程吗？

谢谢

**编辑：**

我做了以下事情：

```
import java.io.File;
import org.w3c.dom.Document;
import org.w3c.dom.*;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException; 

public class ReadAndPrintXMLFile {

    public static void main (String argv []){
    try {

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse (new File("input.xml"));

            // ROOT 

            // normalize text representation
            doc.getDocumentElement ().normalize ();
            System.out.println ("Root element of the doc is " + 
                 doc.getDocumentElement().getNodeName());

            // Number of nodes/rounds 

            NodeList listOfItems = doc.getElementsByTagName("Round");
            int totalElements = listOfItems.getLength();
            System.out.println("Total number of nodes : " + totalElements );
...
...
} 
```

这是部分代码，我运行代码并对其进行了测试，现在，使用 SAX，我可以从上面的 XML 文件中读取。

现在，我想做的是使用反射来操作数据。据我了解，反射仅适用于现有对象。因此，将数据（即回合）存储在变量中`listOfItems`并现在对其使用反射是否足够？

再次感谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:27:45.433

那么在这种情况下，我猜您可以按照 paulsm4 的建议使用 Java XML api 将 XML 文件读入 Java，并使用反射来获取它们并对其进行操作。

[http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

这已经死了，所以试试这个。[http://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

这不是最好的教程，但它应该足以满足您的需要。我可以建议这是反射 API 的一个非常糟糕的使用，因此我想向给你作业的人扔一个鸡蛋:-D

编辑：是的，如果您希望可以对此使用反射。或者您可以创建一个对象模型（门、圆形和游戏的类）并用 XML 文件中的值填充它们，然后对它使用反射来满足任何需要做完了。由您决定如何最好地做到这一点！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T06:14:17.183

为什么不以使用 Java XML API 之一的“老式方式”来阅读它？？？？？？

谷歌搜索“Java XML”、“SAX”、“DOM”、“DocumentBuilder”、“org.w3c.dom”等，你会发现很多好的文档和教程。例如：

*   [http://www.java-tips.org/java-se-tips/javax.xml.parsers/how-to-read-xml-file-in-java.html](http://www.java-tips.org/java-se-tips/javax.xml.parsers/how-to-read-xml-file-in-java.html)

*   [http://java.sun.com/xml/tutorial_intro.html](http://java.sun.com/xml/tutorial_intro.html)

*   [http://java.sun.com/xml/docs.html](http://java.sun.com/xml/docs.html)

*   [http://www.thedeveloperspoint.com/?p=220](http://www.thedeveloperspoint.com/?p=220)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T06:37:43.100

你有类似的东西：

```
GameRound >>
  int roundNumber
  Door door >>
    String doorName
    Value value >>
      int xVal1
      int xVal2
      float pVal 
```

并且您希望解析您的 xml 并填充您的对象？它是否正确？

如果是的话，我不明白这一点！即使您不想使用任何 api，也可以自己编写并通过 setter 填充值！

@Thihara +1 为鸡蛋 xD

# java - 创建了多少对象

> ID：10443492
> 
> 赞同：6
> 
> 时间：2012-05-04T06:06:27.533
> 
> 标签：java, string, object, bytecode, stringbuilder

我正在讨论Java中`String`s 和s 的用法。`StringBuffer`这两个示例中的每一个都创建了多少个对象？

例 1：

```
String s = "a";
s = s + "b";
s = s + "c"; 
```

例 2：

```
StringBuilder sb = new StringBuilder("a");
sb.append("b");
sb.append("c"); 
```

在我看来，Ex 1 将创建 5 个，Ex 2 将创建 4 个对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:16:46.100

我使用了内存分析器来获得确切的计数。

在我的机器上，第一个示例创建了 8 个对象：

```
String s = "a";
s = s + "b";
s = s + "c"; 
```

*   两个类型的对象`String`；
*   两个类型的对象`StringBuilder`；
*   四个对象类型`char[]`。

另一方面，第二个例子：

```
StringBuffer sb = new StringBuffer("a");
sb.append("b");
sb.append("c"); 
```

创建 2 个对象：

*   一个类型的对象`StringBuilder`；
*   一个类型的对象`char[]`。

这是使用 JDK 1.6u30。

PS 为了使比较公平，您可能应该`sb.toString()`在第二个示例结束时调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T06:29:32.507

在创建的对象方面：

示例 1 创建了 8 个对象：

```
String s = "a"; // No object created
s = s + "b"; // 1 StringBuilder/StringBuffer + 1 String + 2 char[] (1 for SB and 1 for String)
s = s + "c"; // 1 StringBuilder/StringBuffer + 1 String + 2 char[] (1 for SB and 1 for String) 
```

示例 2 创建 2 个对象：

```
StringBuffer sb = new StringBuffer("a"); // 1 StringBuffer + 1 char[] (in SB)
sb.append("b"); // 0
sb.append("c"); // 0 
```

公平地说，我不知道 new char[] 实际上在 Java 中创建了一个 Object（但我知道它们是被创建的）。感谢 aix 指出这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T06:51:17.197

您可以通过分析 java 字节码（使用`javap -c`）来确定答案。示例 1 创建了两个`StringBuilder`对象（参见第 4 行）和两个`String`对象（参见第 7 行），而示例 2 创建了一个`StringBuilder`对象（参见第 2 行）。

请注意，您还必须考虑`char[]`对象（因为数组是 Java 中的对象）。`String`和`StringBuilder`对象都使用底层实现`char[]`。因此，示例 1 创建了**八个**对象，示例 2 创建了**两个**对象。

示例 1：

```
public static void main(java.lang.String[]);
  Code:
   0:   ldc             #2; //String a
   2:   astore_1
   3:   new             #3; //class java/lang/StringBuilder
   6:   dup
   7:   invokespecial   #4; //Method java/lang/StringBuilder."<init>":()V
   10:  aload_1
   11:  invokevirtual   #5; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   14:  ldc             #6; //String b
   16:  invokevirtual   #5; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   19:  invokevirtual   #7; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
   22:  astore_1
   23:  new             #3; //class java/lang/StringBuilder
   26:  dup
   27:  invokespecial   #4; //Method java/lang/StringBuilder."<init>":()V
   30:  aload_1
   31:  invokevirtual   #5; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   34:  ldc             #8; //String c
   36:  invokevirtual   #5; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   39:  invokevirtual   #7; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
   42:  astore_1
   43:  return   
} 
```

示例 2：

```
public static void main(java.lang.String[]);
  Code:
   0:   new             #2; //class java/lang/StringBuilder
   3:   dup
   4:   ldc             #3; //String a
   6:   invokespecial   #4; //Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
   9:   astore_1
   10:  aload_1
   11:  ldc             #5; //String b
   13:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   16:  pop
   17:  aload_1
   18:  ldc             #7; //String c
   20:  invokevirtual   #6; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   23:  pop
   24:  return  
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-08-19T02:33:42.130

答案与语言的特定实现（编译器和运行时库）相关。甚至到特定优化选项的存在与否。当然，还有实现的版本（隐含地，它符合的 JLS）。所以，最好用最小值和最大值来说话。事实上，这个练习给了一个更好的

对于 Ex1，对象的最小数量是 1（编译器意识到只涉及常量并且只生成 的代码`String s= "abc" ;`）。最大值可以是任何东西，具体取决于实现，但合理的估计是 8（在另一个答案中也给出了某些配置产生的数字）。

For Ex2, the minimum number of objects is 2\. The compiler has no way of knowing if we have replaced StringBuilder with a custom version with different semantics, so it will not optimize. The maximum could be around 6, for an extremely memory-conserving StringBuilder implementation that expands a backing `char[]` array one character at a time, but in most cases it will be 2 too.

# c - 指向字符串的指针数组

> ID：10443493
> 
> 赞同：2
> 
> 时间：2012-05-04T06:06:28.667
> 
> 标签：c, arrays, string, pointers

我有以下内容；

```
const CHAR string_1[] PROGMEM = "String 1";
const CHAR string_2[] PROGMEM = "String 2";
const CHAR string_3[] PROGMEM = "String 3";
const CHAR string_4[] PROGMEM = "String 4";
const CHAR string_5[] PROGMEM = "String 5";

const CHAR *string_table[] PROGMEM  = 
{
    string_1,
    string_2,
    string_3,
    string_4,
    string_5
}; 
```

我将如何保存 string_table 的这个地址，以便我可以在函数中调用它；

```
CHAR acBuffer[20];
UCHAR ucSelectedString = 2; // get string number 3
//
    pcStringTable = string_table ...?? What is the proper line here??
//
strcpy_P(acBuffer, (char*)pgm_read_byte(&(pcStringTable[ucSelectedString]))) 
```

根据下面的评论，我也改变了结构；

```
typedef struct
{
...
CHAR **pasOptions; 
```

然后我尝试分配`string_table`给它；

```
stMenuBar.pasOptions = string_table; 
```

编译器抛出这个警告；

```
warning: assignment from incompatible pointer type 
```

还有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:08:51.743

`string_table`是一个指向字符串的指针数组。数组可以衰减为（一维，因为那是唯一的一种）指针就好了。

因此，字符串数组的数组可以表示为指向（字符的指针 [认为：字符串]）的指针 [认为：数组]。

```
const char **pcStringTable = string_table; 
```

然后您可以将其作为任何其他一维数组访问：

```
printf("%s", pcStringTable[2]); 
```

# javascript - 使用 Javascript 在动态添加的文本框中消失文本

> ID：10443497
> 
> 赞同：1
> 
> 时间：2012-05-04T06:06:39.183
> 
> 标签：javascript, html

您可以添加任意数量的文本框，如使用以下代码所示

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript">
var i=2;
function AddTextbox(){
container.innerHTML=container.innerHTML+'<input type="text" name="'+ i + '" id="'+ i + '">' + '</br>';
i++;
}
</script>

</head>
<body>
<form action="next.php" method="post" >
<input type="text" name="1" id="1" />
<input type="button" onClick="AddTextbox();" value="add" />
<input type="submit" value="submit" />
<div id="container"></div>
</form>
</body>
</html> 
```

我得到的唯一问题是，如果用户添加了 2 个文本框并且还在这些文本框中写了一些东西，并且用户再次单击“添加文本框”按钮，那么用户将数据插入到文本框中消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:09:47.173

innerHTML 不保留用户输入。与其使用 innerHTML，不如将输入创建为新元素并使用 appendChild 将元素附加到容器中。

这将使其他输入元素保持不变，而不是用对 innerHTML 的调用来替换它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:10:45.407

不要设置 container.innerHTML，因为您之前已经引用了 jQuery，请执行以下操作：

`$(container).append('<input type="text" ...etc...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:12:22.253

您可以使用 jQuery.append 而不是使用 innerHTML

在这里检查[小提琴](http://jsfiddle.net/ranganadh/Gu5kq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:15:47.060

使用 jQuery 更容易解决问题

```
$('#container').append('<input type="text"  '); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T19:43:41.850

更改按钮名称，如下所示：

```
<input type="submit2" onClick="AddTextbox();" value="add" /> 
```

代替

```
<input type="button" onClick="AddTextbox();" value="add" /> 
```

# c# - 如何使用 DevExpress XtraReports 做到这一点

> ID：10443502
> 
> 赞同：0
> 
> 时间：2012-05-04T06:07:30.277
> 
> 标签：c#, asp.net, devexpress, xtrareport

我有一个具有以下设置的报告，问题是我需要将 OrderDate 抓取到我的链接中，但是当我使用 HtmlItemCreated 时，OrderDate 是在 CreditCard 标签之后创建的，因此我无法获取 OrderDate 标签的文本。或者我该怎么做？，我知道当我在 HtmlItemCreated 中时我可以获取 e.Brick.Text 但是，我不能在那里这样做，因为它是首先创建的，然后是另一个具有价值的。这是首先创建的

```
private void xrLabel200_HtmlItemCreated(object sender, HtmlEventArgs e) 
```

然后这个

```
 private void OrderDate_HtmlItemCreated(object sender, HtmlEventArgs e) 
```

我的问题再次是我需要在 OrderDate_HtmlItemCreated 中创建的 OrderDate 但是，它是在通过 xrlabel200 的 evernt 处理程序之后生成的。

我不知道该怎么做我已经尝试改变处理程序的位置等.. 什么都没有.. 如果有人可以帮助我，这是报告的快照

OrderDate 在标题中， CardType 是一个链接，这就是我试图附加日期的地方.. 如下

在下面

```
 private void xrLabel200_HtmlItemCreated(object sender, HtmlEventArgs e)
{
 string cardTypeName = e.Brick.Text;

        switch (cardTypeName)
        {
            case "N/A":
                CardTypeID = 0;
                break;
            case "MASTER CARD":
                CardTypeID = 1;
                break;
        }
//OrderDate.Text is always returning XRLabel3 (which is the name) because it has not been populated
link.HRef = string.Format("mywebsite.aspx?sDate={0}&ctId={2}", OrderDate.Text, CardTypeID);
        link.InnerText = e.Brick.Text;
        link.Target = "blank";
        currentCell.Controls.Clear();
        currentCell.Controls.Add(link);
        currentCell.Attributes.Remove("onmousedown");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:15:29.393

您不能将代码基于基础数据源的内容而不是显示的报告内容吗？

这样做意味着您不需要按特定顺序处理代码。

例如[GetCurrentColumnValue](http://documentation.devexpress.com/#XtraReports/DevExpressXtraReportsUIXtraReportBase_GetCurrentColumnValuetopic)

# php - 如何使用 jQuery 查找具有特定类名的每个下一个元素？

> ID：10443510
> 
> 赞同：2
> 
> 时间：2012-05-04T06:07:52.603
> 
> 标签：php, javascript, jquery

我的网页中有一个 html 结构，如下所示：

```
<div class="group_name">Group A</div>
<div class="student_name">Studen 1</div>
<div class="student_name">Studen 2</div>
<div class="student_name">Studen 3</div>

<div class="group_name">Group B</div>
<div class="student_name">Studen 1</div>
<div class="student_name">Studen 2</div>
<div class="student_name">Studen 3</div>

..
.
. 
```

现在这个结构是使用 PHP 动态生成的。我想要做的是，我想添加下面的代码作为 "Group A" 的最后一个元素：

```
<div class="student_name">Studen 4</div> 
```

但我想使用 jQuery 添加它，因为我将这个“学生 4”记录作为 Ajax 响应字符串。因此，将根据组名称添加 div。目前，我已将组名的静态值用作“组 A”。所以 Javascript 将如下所示：

```
$(".group_name").each(function(index){
    var group_name = $(this).text();

    if(group_name=='Group A'){
          // Add Student 4 to last position of this group
    }
}); 
```

所以这样我已经选择了“A组”元素。但是现在我想添加“Student 4”作为该组中的最后一个条目（在“Student 3”下方）。我怎样才能做到这一点 ？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:15:03.300

```
$('.group_name').filter(function() {
    return $(this).text() == 'Group A';
}).nextUntil('.group_name').filter('.student_name').last().after('<div class="student_name">Student X</div>'); 
```

这段代码的作用：

*   `$('.group_name')`选择所有组
*   `.filter(...)`将其简化为具有正确组名的元素。我没有使用`:contains()`，因为它会执行子字符串匹配而不是完全匹配。
*   `.nextUntil('.group_name')`获取所有以下不是新组的兄弟姐妹
*   `.filter('.student_name')`删除所有不是学生元素的元素 - 以防万一你的 DOM 结构糟糕到需要这样做
*   `.last()`将其减少到最后一个 - 应该插入新的位置
*   `.after(...)`在该元素之后插入新条目。

这是一个演示：http: [//jsfiddle.net/ThiefMaster/5UHgC/](http://jsfiddle.net/ThiefMaster/5UHgC/)

* * *

请注意，您可以通过像这样更改结构来使这变得更容易、更清晰和更有条理：

```
<div class="group" id="group-1">
    <div class="group_name">...</div>
    <div class="students">
        <div class="student_name"></div>
        <div class="student_name"></div>
        <div class="student_name"></div>
    </div>
</div>

<div class="group" id="group-2">
    <div class="group_name">...</div>
    <div class="students">
        <div class="student_name"></div>
        <div class="student_name"></div>
        <div class="student_name"></div>
    </div>
</div> 
```

然后你可以简单地使用这个：

```
$('#group-X .students').append('<div class="student_name"></div>'); 
```

# mysql - 如何让mysql只用一行回答

> ID：10443512
> 
> 赞同：2
> 
> 时间：2012-05-04T06:07:59.810
> 
> 标签：mysql

> **可能重复：**
> [MySQL 结果为逗号分隔列表将](https://stackoverflow.com/questions/662207/mysql-results-as-comma-separated-list)
> [多个子行合并为一行 MYSQL](https://stackoverflow.com/questions/1067428/combine-multiple-child-rows-into-one-row-mysql)
> [SQL 查询以使用 CASE WHEN 旋转一列](https://stackoverflow.com/questions/5846007/sql-query-to-pivot-a-column-using-case-when)

![在此处输入图像描述](../Images/3e6c282054f48040398a4e1c8b32010b.png)

我想进行这样的查询：

```
SELECT `name` AS `data` FROM `test_table` WHERE `level` = 1 ORDER BY `id`; 
```

但我希望它只在一行中用 ' `,`' 回答我！像这样：

```
data = a,b, 
```

如果不使用 PHP，是否可以只使用 MySQL？如何？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:15:38.357

```
SELECT  GROUP_CONCAT(name ORDER BY id SEPARATOR ';')
FROM    test_table
WHERE   level = 1 
```

# qt - QT GUI Framework for Windows 的底层技术是什么？

> ID：10443516
> 
> 赞同：-3
> 
> 时间：2012-05-04T06:08:19.710
> 
> 标签：qt

QT 的核心使用什么技术？

它是 Win32 API 的汇编语言还是其他任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:19:30.680

您可以查看代码，您可以在[http://qt.nokia.com/downloads/downloads#qt-lib下下载该代码](http://qt.nokia.com/downloads/downloads#qt-lib)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T07:14:48.243

[GDI+](http://msdn.microsoft.com/en-us/library/ms533798%28v=vs.85%29.aspx)是我的猜测。

# java - 如何在 pom 中构建仅包含依赖项 jar 的 jar

> ID：10443524
> 
> 赞同：0
> 
> 时间：2012-05-04T06:08:43.257
> 
> 标签：java, maven-2, jar, pom.xml

我是 Maven 工具的新手。我想在**pom**和**父 pom**中构建一个仅包含依赖 jar 的 jar，并将其部署为服务器中的共享库。

你能帮我了解一下 maven 插件和构建这个 jar 所涉及的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:46:12.743

用于此目的的最佳设置是使用[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)创建一个包含所有项目依赖项的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:19:13.703

I just verified this on one of my projects.

Make sure that your maven installation is on your path and change to the directory that contains your project using a terminal emulator or cmd.exe (in windows).

Run the following command:

mvn dependency:copy-dependencies

your dependencies will be downloaded to the target->dependency directory in your project

# iphone - 某些东西使 UITableView 慢动作

> ID：10443525
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:08:44.960
> 
> 标签：iphone, objective-c, ipad

我有一个 UITableView，有时在运行应用程序时，UITableView 开始以慢动作移动。可以这么说，它并没有滞后，但变得非常迟钝，并且以正常速度的 20% 移动。我不知道为什么。代码和应用程​​序非常复杂，因此很难发布代码。

只是想知道是否有人对如何追踪错误有任何建议，或者有类似的问题？

此外，当这种情况发生时，所有其他 tableview 控制器在整个应用程序中也会变慢。它是一个标签栏应用程序。

谢谢

一些更新：

如果我在一个 tableView 中并推送到详细视图...该视图将变为慢动作。但是，如果我切换到另一个选项卡视图，然后返回到上一个视图，它会再次运行流畅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:21:35.807

我可以在没有看到代码的情况下想到两个可能的原因。

1.  您已经在 iOS 模拟器中切换了**慢速动画。**这将减慢操作系统的动画速度。我不认为它适用于 UIView 动画虽然设置在代码中*（至少我没有看到我的动画代码的这种情况）*。

    不幸的是，没有迹象表明这是否实际设置（除了动画很慢的事实），例如菜单中的复选标记，例如切换**颜色混合图层时**

    ![在此处输入图像描述](../Images/273e887c55180f2ca2f922ccc3132972.png) ![在此处输入图像描述](../Images/b71ddb97527e2f03b98c78d806bb396b.png)

2.  您已经在某处设置了 UIView 动画，并可能添加了一个额外的**0**，就像`[UIView animateWithDuration:2.0`您拥有`[UIView animateWithDuration:20.0`.

# c++ - omp 临界区后是否存在隐式障碍

> ID：10443528
> 
> 赞同：12
> 
> 时间：2012-05-04T06:08:57.970
> 
> 标签：c++, openmp

在 omp 临界区之后是否存在隐式 omp 障碍

例如，我可以将以下代码版本 1 修改为版本 2。

**版本一**

```
int min = 100;
#pragma omp parallel
{
   int localmin = min;

   #pragma omp for schedule(static)
   for(int i = 0; i < 1000; i++)
       localmin = std::min(localmin, arr[i]);

   #pragma omp critical
   {
      min = std::min(localmin, min)
   }
} 
```

**版本-2**

```
int min = 100;
#pragma omp parallel
{
   int localmin = min;

   #pragma omp for schedule(static) nowait
   for(int i = 0; i < 1000; i++)
       localmin = std::min(localmin, arr[i]);

   #pragma omp critical
   {
      min = std::min(localmin, min)
   }
} // will I get the right "min" after this (because I have included nowait) 
```

对于版本 1 和版本 2，我会得到相同的结果吗？

omp 关键区域后是否存在隐含障碍？

**编辑：** 对不起，如果这个例子很差..另外，我想知道版本 1 和版本 2 之间是否会有任何性能差异

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T10:46:00.893

关键部分没有障碍，无论是在起点还是终点。临界区是一个独立的同步结构，它可以防止多个线程同时访问相同的数据。如果您想在退出并行区域之前获得正确的全局最小值，则需要在临界区之后设置一个额外的障碍。正如已经说过的，平行区域的末端有一个隐含的障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:08:56.073

如果有大量迭代，您将通过使用 nowait 获得性能优势。

# android - 想通过我的应用程序开始安装第三方导航应用程序

> ID：10443534
> 
> 赞同：0
> 
> 时间：2012-05-04T06:09:22.197
> 
> 标签：android

通过我的应用程序，我想启动另一个导航应用程序。接受目标坐标/地址作为参数。可能吗？是否有任何接受目的地坐标/地址的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:07:07.890

> 通过我的应用程序，我想启动另一个导航应用程序。接受目标坐标/地址作为参数。可能吗？

您必须联系您想要启动的任何导航应用程序的开发人员，并询问他们如何执行此操作。

# ruby-on-rails-3 - 在 Rails 中手动清除片段缓存

> ID：10443535
> 
> 赞同：23
> 
> 时间：2012-05-04T06:09:27.690
> 
> 标签：ruby-on-rails-3, caching, memcached

我将 Memcached 与 Heroku 一起用于 Rails 3.1 应用程序。我有一个错误并且显示了错误的东西 - 缓存的参数不正确。

我有这个：

```
<% cache("foo_header_cache_#{@user.id}") do %> 
```

我删除了片段缓存并推送到 Heroku，坏数据就消失了。

然后我将其更改为：

```
<% cache("foo_header_cache_#{@foo.id}") do %> 
```

但是，当我更正参数时，从 @user 到 @foo，旧的 [不正确] 缓存版本再次显示（而不是用正确的数据刷新）。

如何手动使此过期，或者以其他方式摆脱显示的这些不良数据？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-05T07:13:32.993

我最终通过进入 rails 控制台并使用以下命令手动清除了整个缓存：

```
Rails.cache.clear 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-09-01T16:08:15.777

从 rails 控制台：

```
Rails.cache.delete 'FRAGMENT-NAME' 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-16T10:00:34.323

这个给你：

```
<% ActionController::Base.new.expire_fragment("foo_header_cache_#{@user.id}") %> 
```

参考：
-[如何从 Rails 观察者/模型调用 expire_fragment？](https://stackoverflow.com/questions/393395/how-to-call-expire-fragment-from-rails-observer-model)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-09-01T21:59:19.940

**从控制台：**

您可以运行它（即，如果您知道 id 是 '1'）

```
ActionController::Base.new.expire_fragment("foo_header_cache_1") 
```

要使用`Rails.cache.delete`，您需要知道片段名称。在你的情况下，这将是

```
Rails.cache.delete("views/foo_header_cache_1") # Just add 'views/' to the front of the string 
```

如果您有一个使用对象的基于数组的缓存键，例如：

```
cache([:foo_header_cache, @user]) 
```

然后你可以像这样得到片段名称

```
ActionController::Base.new.fragment_cache_key([:foo_header_cache, @user]) 
```

该名称包括来自任何对象的时间`id`和`updated_at`时间（到 yyyymmddhhmmss）。类似于“views/foo_header_cache/users/1-20160901021000”

或者简单地使用数组清除它。

```
ActionController::Base.new.expire_fragment([:foo_header_cache, @user]) 
```

# asp.net - ASP.Net 上的动态下拉列表

> ID：10443536
> 
> 赞同：0
> 
> 时间：2012-05-04T06:09:27.767
> 
> 标签：asp.net, dynamic, drop-down-menu, selectedindexchanged

如何在 asp.net 上制作动态下拉列表？

我有一个**下拉列表**：

```
<asp:DropDownList ID="FirstParameter" runat="server">
    <asp:ListItem Value="1">1</asp:ListItem>
    <asp:ListItem Value="2">2</asp:ListItem>
    <asp:ListItem Value="3">3</asp:ListItem>
</asp:DropDownList> 
```

一个**标签**和另一个**下拉列表**：

```
<asp:Label ID="SecondParameter_Label" runat="server" Text=""></asp:Label>

<asp:DropDownList ID="SecondParameter" runat="server">
</asp:DropDownList> 
```

当我更改`FirstParameter`下拉列表上的选择时，文本`SecondParameter_Label`应根据选择进行更改，因此对于`SecondParameter`下拉列表，应根据第一个下拉列表上的选定值与数据过滤器绑定。

我已经尝试过这段代码，但它不起作用：

```
Protected Sub FirstParameter_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles FirstParameter.SelectedIndexChanged
    'Change the label text
    SecondParameter_Label.Text = ReportType_Dropdownlist.SelectedItem.Value

    'Bind value to the SecondParameter dropdownlist
    SecondParameter.DataSource = dataTableName '--> Assumed that I already have the DataTable called from a class
    SecondParameter.DataTextField = "NameofDatabaseColumn"
    SecondParameter.DataValueField = "NameofDatabaseColumn"
    SecondParameter.DataBind()
End Sub 
```

我尝试先更改`SecondParameter_Label`文本，但仍然无法正常工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:15:13.763

尝试将 AutoPostBack 属性添加到下拉列表中。您还需要在服务器端处理它们。你的第一个下拉菜单应该是这样的：

```
<asp:DropDownList ID="FirstParameter" runat="server" AutoPostBack="true">
    <asp:ListItem Value="1">1</asp:ListItem>
    <asp:ListItem Value="2">2</asp:ListItem>
    <asp:ListItem Value="3">3</asp:ListItem>
</asp:DropDownList> 
```

# c# - C# 尝试使用字典中的 Visio 形状

> ID：10443545
> 
> 赞同：1
> 
> 时间：2012-05-04T06:10:02.757
> 
> 标签：c#, dictionary, visio

我正在使用 Visio 和 c#，但我对来自 Visio 的形状有疑问。

我提供了一个带有字符串和 Visio 形状的字典

```
SortedDictionary<string, Visio.Shape> DicShapes 
                       = new SortedDictionary<string, Visio.Shape>();

DicShapes.Add("Pos3", shape_Pos3); 
```

所以，如果我现在尝试使用 Visio.Shape，我得到了 COMExeption。

```
foreach (KeyValuePair<string, Visio.Shape> kvp2 in DicShapes) 
{
    if (kvp2.Key == "Pos3")
    {
        beginXCell.GlueToPos(kvp2.Value, 0.5, 1);
    }
} 
```

谁能给我一个提示我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T07:11:20.803

既然你说你的钥匙是独一无二的，我建议

```
Visio.Shape selectedShape;

if (DicShapes.TryGetValue("Pos3", out selectedShape))
{
    beginXCell.GlueToPos(selectedShape, 0.5, 1);
} 
```

而不是遍历整个`SortedDictionary`.

如果您必须处理非唯一键，您可以使用 linq 扩展方法提取所需的子集：

```
var filtered = DicShapes.Where(kvp => kvp.Key == "Pos3"); 
```

# java - 如何使用 FTPSClient 和 PuTTY 格式的密钥

> ID：10443547
> 
> 赞同：1
> 
> 时间：2012-05-04T06:10:03.753
> 
> 标签：java, putty, ftps

我需要通过 FTPS（隐式或显式）连接到远程服务器。我通过 FileZilla 成功连接到服务器。我还测试了从公共 ftp 检索文件的代码：ftp.mozilla.org 现在我需要相同的 ftps 代码。我的私钥和 KeyStore 有问题

```
String keyPath = "src/test/resources/keys/thekey.ppk";
        FTPSClient client = new FTPSClient();
        FileOutputStream fos = null;
        try {

            KeyStore ks = KeyStore.getInstance("JKS"); //
            FileInputStream fis = new FileInputStream(keyPath);
            ks.load(fis, "".toCharArray());//java.io.IOException: Invalid keystore format
            fis.close();
            KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory
                    .getDefaultAlgorithm());
            kmf.init(ks, "".toCharArray());

            System.out.println("connecting to 1.1.1.1...");
            client.setDefaultTimeout(10000);
            client.connect("1.1.1.1", 2190);
            System.out.println("loggin in...");
            System.out.println("login: " + client.login("login", "pass"));
            String remoteDir = "/pub/downloaded/";
            String remoteFileName = "testMsg.txt";
            String localFileName = "testMsg.local.txt";

            fos = new FileOutputStream(localFileName);

            System.out.println("retrieving file...");
            boolean isRetrieved = client.retrieveFile(remoteDir + remoteFileName, fos);
            System.out.print("File: " + remoteDir + remoteFileName + "; IsRetrieved: " + isRetrieved + "\n");

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fos != null) {
                    fos.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

密钥以 PuTTY 格式生成。我还可以在这里放什么选项 KeyStore.getInstance("JKS")。如果省略了 KeyStore 的部分，则代码到达与 client.retrieveFile 的行并暂停很长时间。需要帮助导入密钥，请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:21:39.867

FTPS 代表 FTP-over-SSL。SSL 使用 X.509 证书进行身份验证（我们现在省略了其他很少使用的方法）。Putty 是 SSH/SFTP 客户端（其中 SFTP 代表 SSH 文件传输协议），putty 密钥是 SSH 密钥。因此，您不能使用 SSH 密钥进行 SSL 身份验证。

# c++ - sprintf() 在 VS2008 中给出访问冲突错误

> ID：10443554
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:10:31.430
> 
> 标签：c++, c, visual-studio, visual-studio-2008

我在通过`VS2008`. 我调试了代码，发现问题出在`sprintf()`. 我收到以下错误

> clear.exe 中 0x005251d2 处未处理的异常：0xC0000005：访问冲突读取 > 位置 0xffffffd4。

在执行以下行时

```
static char buf[512]; 
char time_buf[100];

sprintf(buf, 
"EVENT_TIME %5.2f DOING 'LOGIN EVENT' on 'Session Login' LEVEL 1 \n AT %s \n\n",
seconds, time_buf); 
```

我也尝试过`_snprintf()`，但面临同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:54:02.320

我认为您的问题是使用数组进行写入。

调试表明您的代码除了只编写 to 的第一个元素之外什么都不会做`time_buf`，`buf`其余内容将被忽略。

Eclipse 忽略了这一事实，并没有给我任何警告或错误，但也许 VS 对这种情况有一些其他限制。

你可以做类似的事情

```
char buf[100];
char* temp;
temp = "--> Some Content <--";

sprintf(buf, "%s", temp); 
```

这会将完整内容复制到缓冲区，但如果您可以在您的情况下使用它，则取决于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:08:06.303

是秒浮点型吗？你为什么不把它分成更小的部分？第一次尝试：

```
sprintf(buf, "test"); 
```

然后：

```
sprintf(buf, "test %s", time_buf); 
```

然后：

```
sprintf(buf, "test %5.2", seconds); 
```

# c# - 如何显示根文件夹中的图像？

> ID：10443558
> 
> 赞同：0
> 
> 时间：2012-05-04T06:10:50.880
> 
> 标签：c#, iis

我在解决方案中创建一个用于保存图像的文件夹。在 iis 服务器中发布它。图像已成功保存在该文件夹中。但是如何访问其他用户该图像？我们可以访问的该文件夹或directle的任何配置，例如[http://ipaddress/sample/foldername/1.jpg](http://ipaddress/sample/foldername/1.jpg)是否正确或需要提供任何配置？

# java - JNI_CreateJavaVM() 每隔一次我运行我的应用程序就会失败（完全正确）

> ID：10443566
> 
> 赞同：8
> 
> 时间：2012-05-04T06:11:12.580
> 
> 标签：java, c++, visual-studio, visual-studio-2010, java-native-interface

我有一个 Windows MFC 应用程序：

(1) 加载 JVM ( `JNI_CreateJavaVM()`)

(2) 将主线程附加到 JVM ( `AttachCurrentThread()`)

(3) 加载一些Java类和方法（`FindClass()`和`GetMethodID()`/ `GetStaticMethodID()`）

(4) 注册一些本机回调供 Java 代码使用 ( `RegisterNatives()`)

(5) 从 JVM 中分离线程 ( `DetachCurrentThread()`)

(6) 销毁 JVM ( `DestroyJavaVM()`)

*每次*我运行应用程序时，上述所有功能都会成功。我知道他们成功了，因为除上述之外，我还与应用程序交互并成功调用 Java 静态方法，并且这些 Java 方法成功调用了我的本机回调。我的应用程序正常退出，并且可以肯定预期的 Java 函数和本机回调已经执行。

但是，*每隔一次*我运行应用程序时，调用`JNI_CreateJavaVM()`都会失败（不填充`JavaVM *`）。 **应用程序运行之间绝对没有任何变化**。我只需运行一次（成功，即使除了上述 6 个步骤之外什么*都不*做），优雅地退出，再次运行，它来回失败。来回成功/失败没有例外——我可以运行它几十次，它每隔一次就会在成功和失败之间精确振荡`JNI_CreateJavaVM()`。

如有必要，我将粘贴更多代码。但是，我希望有人对我提供的内容有所了解。（注意：这是一个 BCGSoft MFC 属性表应用程序，尽管我非常怀疑这很重要。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T06:38:10.403

看起来您遇到了这个可能永远无法修复的[错误（](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4712793)[在此处](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6332506)重述）。

尽管它的名字，`DestroyJavaVM()`实际上并没有破坏JVM。它所做的是向 JVM 发出它应该关闭的信号，但 JVM 实际上会等待，直到除主线程之外的所有线程都停止后，它才会真正关闭。事实上，即便如此，它本身也没有完全清理，正如[文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/invocation.html)所述（相当[隐晦](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6701692)）：“但是，JDK/JRE 仍然不支持 VM 卸载。”

另外，我担心您的第 2 步“将主线程附加到 JVM”。您不需要将创建 JVM 的线程附加到 JVM，也不能分离该线程。如果您真的这样做，那么很可能这就是您的系统混乱的原因。（创建 JVM 的线程是 JVM 的“主”线程。如果它们需要访问它，您只需要将其他本机线程附加/分离到 JVM。）

顺便说一句，`JNI_CreateJavaVM()`成功时返回 0，而你说它在“失败”时返回 0，那么它在什么意义上失败了？您使用的是哪个 JVM（版本、供应商）？

# php - 使用 Socket.IO / Node.JS 向 PHP 推送通知

> ID：10443567
> 
> 赞同：0
> 
> 时间：2012-05-04T06:11:16.593
> 
> 标签：php, node.js, socket.io

所以我一直在研究这个，但想知道如何将通知推送到客户端的 php 页面以创建类似于 facebook 通知的内容？

我读过我需要使用 Node.JS 安装的 Socket.IO。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T15:17:40.110

如果你仍然感兴趣，我做了一个连接 NodeJS 和 PHP 的小项目；检查[如何集成 nodeJS + Socket.IO 和 PHP？](https://stackoverflow.com/questions/17209717/how-to-integrate-nodejs-socket-io-and-php)

# internet-explorer - 所有 IE 浏览器中的 CSS3 文本阴影扭曲/像素化（请参见截图）

> ID：10443573
> 
> 赞同：0
> 
> 时间：2012-05-04T06:11:22.940
> 
> 标签：internet-explorer, frontend, css

我只是将文本阴影放在一个元素上，它在除任何 IE 之外的所有浏览器中看起来都很好。

![在此处输入图像描述](../Images/07fdb43c8db09c766a46193c9f28bf86.png)

看到文字周围的黑色像素了吗？

```
color: #68C3C7;
font-family: "Hoefler Text",Baskerville,"Big Caslon","Adobe Garamond Pro",Georgia,Palatino,"Times New Roman",serif;
font-size: 30px;
letter-spacing: 1.2px;
line-height: 30px;
padding: 20px 0 0;
text-align: center;    
text-shadow: 1px 1px 0px #999999;
filter: dropshadow(color=#999999, offx=1, offy=1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:41:04.097

你可以结合使用IE的`chroma & drop shadow`过滤器。检查这个：[http ://www.useragentman.com/blog/2011/04/14/css3-text-shadow-can-it-be-done-in-ie-without-javascript/](http://www.useragentman.com/blog/2011/04/14/css3-text-shadow-can-it-be-done-in-ie-without-javascript/)

这是一些示例代码：

```
color: #68C3C7;
font-family: "Hoefler Text",Baskerville,"Big Caslon","Adobe Garamond Pro",Georgia,Palatino,"Times New Roman",serif;
font-size: 30px;
letter-spacing: 1.2px;
line-height: 30px;
padding: 20px 0 0;
text-align: center;    
text-shadow: 1px 1px 0px #999999;
background-color: white;
filter: progid:DXImageTransform.Microsoft.Chroma(Color=white)
        progid:DXImageTransform.Microsoft.DropShadow(OffX=1, OffY=1, Color=#99999); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T15:42:35.697

您可能需要为 ie8 提供额外的参数：

```
.shadow {
/* For IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
/* For IE 5.5 - 7 */
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000'); 
```

}

# apache-flex - 如何在 flex 中自定义一个 HSlider？

> ID：10443575
> 
> 赞同：8
> 
> 时间：2012-05-04T06:11:28.530
> 
> 标签：apache-flex

我是 flex 新手，我想改变 HSlider 的形象，像这样

![在此处输入图像描述](../Images/e2593487df26c3fe3ada91a61631f0b0.png)

我该怎么办？请给我一个简单的例子。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T09:19:38.840

@RIAstar 有一个很好的答案。但是有一个小问题——拇指前的这个橙色部分。AFAIK创建这样的皮肤最简单的方法是在HSlider皮肤中添加矩形或更复杂的图形，这将根据拇指的x坐标改变它的宽度，即

```
<s:Button id="track" left="0" right="0" top="0" bottom="0" minWidth="33" width="100" 
          tabEnabled="false"
          skinClass="spark.skins.spark.HSliderTrackSkin" />

<s:Rect width="{thumb.x + thumb.width/2}" height="{track.height}">
    <s:fill>
        <s:SolidColor color="0x00FF00" />
    </s:fill>
</s:Rect>

<s:Button id="thumb" top="0" bottom="0" width="11" height="11" 
          tabEnabled="false"
          skinClass="spark.skins.spark.HSliderThumbSkin" /> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T08:46:13.240

您必须创建自定义皮肤。现在，HSlider 有点特别，因为它有一些也可以换肤的子组件。您实际上必须创建三个自定义皮肤：

*   一个用于 HSlider 本身（此皮肤包括工具提示）
*   一个用于轨道（图片中的黄色/棕色区域）
*   和一个拇指

轨道和拇指实际上都是 Button，所以这些皮肤必须是 Button 皮肤。

解释整个过程会使这个答案过于冗长和具体，所以我只是让你开始。你应该能够从那里弄清楚。我还将假设您将 FlashBuilder 用作 IDE。

**创建主皮肤**

在 an 上设置`skinClass`样式`HSlider`并按 Alt+Space。这将显示代码完成，但您也可以选择“创建皮肤...”。

![在此处输入图像描述](../Images/79fa56045f7b049e51db7196190f5c0a.png)

选择它，将出现一个向导。填写类似以下内容。请注意，我们正在制作默认 Spark HSlider 外观的副本。我们删除了样式代码，因为在这样的定制皮肤中不需要它。

![在此处输入图像描述](../Images/a4101abc7001156863b9d2c80fe2c93a.png)

**创建轨道和拇指皮肤**

打开这个新的皮肤类并向下滚动到底部。你会看到两个`Button`s; 一个带有 id`track`和一个带有 id `thumb`。他们的 skinClass 样式设置为这些按钮的默认 spark 皮肤。删除内容，重复上一步的操作（新建皮肤），只是这次创建副本`HSliderTrackSkin`和`HSliderThumbSkin`

**编辑皮肤**

您现在拥有 HSlider 的默认 Spark 外观的精确副本（除了您删除了样式）。现在您可以开始编辑：更改颜色、更改形状等。如果您需要更多有关 Flex 图形的信息，我建议您在 FXG 上搜索。但是您可以尝试摆弄默认皮肤，看看您也可以从哪里获得。

# android - 在android中获取当前位置

> ID：10443577
> 
> 赞同：0
> 
> 时间：2012-05-04T06:12:04.990
> 
> 标签：android

我尝试了以下代码，但没有获得当前位置。
当我在模拟器控制中手动设置位置时，我得到这样的位置但没有得到当前位置。我得到空位置。

*   如何获取当前位置？
*   有没有其他方法可以获取当前位置？

这是我的代码：

```
package com.p;
import android.app.Activity;
import android.os.Bundle;

import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;

import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
    public class GooglemapActivity extends Activity implements LocationListener {
   private TextView latituteField;
   private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;
        EditText t;
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);

        // Get the location manager
     locationManager =                  (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    // Define the criteria how to select the locatioin provider -> use
    // default

            Criteria criteria = new Criteria();
           criteria.setAccuracy(Criteria.ACCURACY_FINE);
           criteria.setAltitudeRequired(false);//true if required
           criteria.setBearingRequired(false);//true if required
           criteria.setCostAllowed(true);
            criteria.setPowerRequirement(Criteria.POWER_LOW);
            provider = locationManager.getBestProvider(criteria, true);
            //provider=LocationManager.GPS_PROVIDER;
        Location location = locationManager.getLastKnownLocation(provider);
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
             /*check provder*/boolean statusOfGPS    =locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

            if ( statusOfGPS==true) {
        // Initialize the location fields
        if (location != null) {
               System.out.println("Provider " + provider + " has been      selected.");
                   double lat = (double) (location.getLatitude());
                    double lng = (double) (location.getLongitude());
                   latituteField.setText(Double.toString(lat));
                    longitudeField.setText(Double.toString(lng));
                } else {
                      latituteField.setText("Provider is not available");
                      longitudeField.setText("Provider not available");
                }

        }
        else
        {

        latituteField.setText("eeeeeeeee");
        longitudeField.setText("rrrrrrrrr");

        }
    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
    locationManager.removeUpdates(this);
    }

    public void onLocationChanged(Location location) {
            double lat = (double) (location.getLatitude());
         double lng = (double) (location.getLongitude());
        latituteField.setText(Double.toString(lat));
        longitudeField.setText(Double.toString(lng));
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
    }
     } 
```

我在 manifest.xml 中添加了如下权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission  android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:15:55.750

您不会在模拟器中获得当前位置。您可以通过 DDMS 设置它们，如果是模拟器，它们将是您的当前位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:24:57.083

请不要尝试获取最后一个已知位置，大多数情况下它是陈旧且无用的。改为设置 locationListener 并等待位置更新。这将为您提供当前位置。

您可以使用此代码开始列出 GPS 更新并对收到的数据进行处理。它还在日志文件中打印消息以便于调试。请注意，**此函数不返回任何结果，它只开始收听 GPS**。结果将在稍后`// do something here with the new location data`部分提供，届时您可以将它们保存在某个地方。

```
private void getGpsData() {
    locationManager = (LocationManager) owner.getSystemService(Context.LOCATION_SERVICE);

    locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            Log.i(TAG, "location change:" + location.toString());

            String longitude = "Londitude: " + location.getLongitude();
            String latitude = "Latitude: " + location.getLatitude();

            if( location.hasAccuracy() ) {  // good enough?
                // do something here with the new location data
                ....
                //
                Log.i(TAG, "GPS listener done");
                locationManager.removeUpdates(this);    // don't forget this to save battery
            }
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            Log.i(TAG, provider + " status:" + status);
        }

        public void onProviderEnabled(String provider) {
            Log.i(TAG, provider + " enabled");
        }

        public void onProviderDisabled(String provider) {
            Log.i(TAG, provider + " disabled");
        }
    };
    Log.i(TAG,"GPS listener started");
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener );
} 
```

# multithreading - Identify threads in a Delphi application outside debugging environment

> ID：10443578
> 
> 赞同：4
> 
> 时间：2012-05-04T06:12:06.760
> 
> 标签：multithreading, delphi, debugging

I have found an application which requests process information using wmi queries (all threads and more info on each thread). I modified this application to determine the CPU usage per thread. (if my application is called 'appy', then the threads are named 'appy/0', 'appy/1', ...)

My question: is there a way to easily identify these threads outside of an IDE or another debugging environment?

I know there is the `NameThreadForDebugging` method, but this isn't accessible outside the debugging environment.

Is there a way to assign your own thread id upon creating that thread? Or is the only way to know who is who (the threads) by creating a dictionary and write that dictionary to a file so it is externally accessible.

Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:30:17.633

No, you cannot assign your own thread ID, the thread ID is assigned to a thread by the [`CreateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx) function and cannot be changed during its lifetime. And as you said the only way to identify thread in the external application (not a debugger) is to share the thread identification with that application somehow.

However it's not necessary to share the information through a file, you can use a shared memory block for instance. It will be much more efficient than using files.

As the reference about thread ID you can take the remark by the [`GetCurrentThreadId`](http://msdn.microsoft.com/en-us/library/ms683183%28v=vs.85%29.aspx) function:

> Until the thread terminates, the thread identifier uniquely identifies the thread throughout the system.

# android - 如何设置然后检查星期几以使闹钟响起 - Android

> ID：10443580
> 
> 赞同：0
> 
> 时间：2012-05-04T06:12:19.993
> 
> 标签：android, calendar, alarmmanager

它是关于一个小型 android 应用程序，它将在一周中的每一天花费数小时作为用户的输入，并在相应的日子相应地打开/关闭蓝牙设备，而不管“日期”如何。即代码应该只检查日期、小时和分钟。我使用了以下代码（用于今天即星期五的测试目的），但它不会触发警报。

```
//..........setting calender for MyAlarmService
       Calendar cur_cal = new GregorianCalendar();
       cur_cal.setTimeInMillis(System.currentTimeMillis());
       Calendar cal = new GregorianCalendar();
       cal.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
       cal.set(Calendar.HOUR_OF_DAY, 11);
       cal.set(Calendar.MINUTE, 5);
       cal.set(Calendar.SECOND, 0);
       cal.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
       cal.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
       cal.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));
       // here it m setting the "Today"
       cal.set(Calendar.DAY_OF_WEEK, Calendar.FRIDAY); 

       Intent myIntent = new Intent(AndroidAlarmService.this, MyAlarmService.class);
       pendingIntent = PendingIntent.getService(AndroidAlarmService.this, 0, myIntent, 0);
       AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
       alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

当我删除语句 cal.set(Calendar.DAY_OF_WEEK, Calendar.FRIDAY);

AlarmService 在上面指定的时间（即上午 11:05）完美触发“今天”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T05:01:48.307

找到解决方法如下。

```
 //..........setting calender for Friday

       Calendar calFri = new GregorianCalendar();
       calFri.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
       calFri.set(Calendar.HOUR_OF_DAY, friHrInt);
       calFri.set(Calendar.MINUTE,friMinInt);
       calFri.set(Calendar.SECOND, 0);
       calFri.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
       calFri.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
       calFri.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));

       days = 13 - calFri.get(Calendar.DAY_OF_WEEK); // how many days until Sunday
       calFri.add(Calendar.DATE, days);

     //..........setting calender for Saturday

       Calendar calSat = new GregorianCalendar();
       calSat.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
       calSat.set(Calendar.HOUR_OF_DAY, satHrInt);
       calSat.set(Calendar.MINUTE,satMinInt);
       calSat.set(Calendar.SECOND, 0);
       calSat.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
       calSat.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
       calSat.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));

       days = 14 - calSat.get(Calendar.DAY_OF_WEEK); // how many days until Sunday
       calSat.add(Calendar.DATE, days); 
```

然后我这些天使用分离警报服务如下

```
 //.........................The Following will make the alarm go off on friday......................................

           Intent myIntentFri = new Intent(AndroidAlarmService.this, FriOffAlarmService.class);
           pendingIntentFri = PendingIntent.getService(AndroidAlarmService.this, 0, myIntentFri, 0);
           AlarmManager alarmManagerFri = (AlarmManager)getSystemService(ALARM_SERVICE);
           //alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent2);
           alarmManagerFri.setRepeating(AlarmManager.RTC_WAKEUP, calFri.getTimeInMillis(),interval, pendingIntentSun);

           //.........................The Following will make the alarm go off on saturday......................................

           Intent myIntentSat = new Intent(AndroidAlarmService.this, SatOffAlarmService.class);
           pendingIntentSat = PendingIntent.getService(AndroidAlarmService.this, 0, myIntentSat, 0);
           AlarmManager alarmManagerSat = (AlarmManager)getSystemService(ALARM_SERVICE);
           //alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent2);
           alarmManagerSat.setRepeating(AlarmManager.RTC_WAKEUP, calSat.getTimeInMillis(),interval, pendingIntentSat); 
```

# opencv - 可以实时分割吗？

> ID：10443582
> 
> 赞同：0
> 
> 时间：2012-05-04T06:12:24.190
> 
> 标签：opencv, image-processing, computer-vision, image-segmentation, edge-detection

我想实时分割视频（30 fps，640х480）。

是否可以在 Core 2 Duo E8500 上使用？

你能指出一些可以做到这一点的库或算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:24:34.570

看看*S. Paris*，[Edge-preserving smoothing and mean-shift segmentation of video streams](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.153.4271&rep=rep1&type=pdf)，**ECCV 2008**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T09:59:20.833

一般来说，是的，有一些分割算法计算效率很高，并且可能以帧速率运行。通常您可以使用一些优化技巧来提高算法的效率，因此如果您想了解特定任务或算法，您需要提供更多详细信息以便我们提供帮助。我不同意`Abid Rahman K`，OpenCV 不一定是最好的选择。

# c# - C# - 我必须在参数集合中添加参数吗

> ID：10443587
> 
> 赞同：1
> 
> 时间：2012-05-04T06:12:49.837
> 
> 标签：c#, oracle, parameters, out

我有一个具有 SYS_REFCUROR 类型的 OUT 参数的存储过程。在执行该过程之前从 C# 中添加除该 OUT 参数之外的所有参数。但是当我执行该过程时，我得到“错误数量或类型的参数”错误。我的问题是，如果我不打算为该参数分配任何值，为什么我必须将它添加到我的参数集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:15:12.977

您需要添加参数，因为在执行存储过程之后，sql 的 out 参数的值存储在您在代码中提供的这个 out 参数中，您可以稍后在进一步执行中使用它。

**如果您想省略传递参数，然后为输出参数分配一个默认值，这将解决您的问题。**

**例如 ：**

```
CREATE PROCEDURE MyTest
   @Data1 int
   ,@Data3 int = null output 
```

如果你按照上面那样做，那么你不需要通过代码传递输出参数，它会隐藏你得到的错误。

# c# - 压缩 HTTP GET 响应

> ID：10443588
> 
> 赞同：17
> 
> 时间：2012-05-04T06:12:50.327
> 
> 标签：c#, asp.net-web-api, http-compression

我目前正在将我的一些 MVC3 控制器迁移到 MVC4 Api 控制器。`ActionFilterAttribute`我通过继承和覆盖方法实现了 MVC3 控制器获取方法响应的压缩机制`OnActionExecutiong`。经过一些研究，我发现我需要使用`ActionFilterMethod`from `System.Web.HttpFilters`。如果有人可以分享一段示例代码让我开始使用 GZip 压缩 HTTP 响应，那就太好了

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-04T09:21:38.870

最简单的方法是直接在 IIS 级别[启用压缩。](http://www.iis.net/ConfigReference/system.webServer/httpCompression)

如果您想在应用程序级别执行此操作，您可以编写自定义委托消息处理程序，如[下面的帖子](http://forums.asp.net/t/1771770.aspx/1)所示：

```
public class CompressHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        return base.SendAsync(request, cancellationToken).ContinueWith<HttpResponseMessage>((responseToCompleteTask) =>
        {
            HttpResponseMessage response = responseToCompleteTask.Result;

            if (response.RequestMessage.Headers.AcceptEncoding != null)
            {
                string encodingType = response.RequestMessage.Headers.AcceptEncoding.First().Value;

                response.Content = new CompressedContent(response.Content, encodingType);
            }

            return response;
        },
        TaskContinuationOptions.OnlyOnRanToCompletion);
    }
}

public class CompressedContent : HttpContent
{
    private HttpContent originalContent;
    private string encodingType;

    public CompressedContent(HttpContent content, string encodingType)
    {
        if (content == null)
        {
            throw new ArgumentNullException("content");
        }

        if (encodingType == null)
        {
            throw new ArgumentNullException("encodingType");
        }

        originalContent = content;
        this.encodingType = encodingType.ToLowerInvariant();

        if (this.encodingType != "gzip" && this.encodingType != "deflate")
        {
            throw new InvalidOperationException(string.Format("Encoding '{0}' is not supported. Only supports gzip or deflate encoding.", this.encodingType));
        }

        // copy the headers from the original content
        foreach (KeyValuePair<string, IEnumerable<string>> header in originalContent.Headers)
        {
            this.Headers.AddWithoutValidation(header.Key, header.Value);
        }

        this.Headers.ContentEncoding.Add(encodingType);
    }

    protected override bool TryComputeLength(out long length)
    {
        length = -1;

        return false;
    }

    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context)
    {
        Stream compressedStream = null;

        if (encodingType == "gzip")
        {
            compressedStream = new GZipStream(stream, CompressionMode.Compress, leaveOpen: true);
        }
        else if (encodingType == "deflate")
        {
            compressedStream = new DeflateStream(stream, CompressionMode.Compress, leaveOpen: true);
        }

        return originalContent.CopyToAsync(compressedStream).ContinueWith(tsk =>
        {
            if (compressedStream != null)
            {
                compressedStream.Dispose();
            }
        });
    }
} 
```

现在剩下的就是在以下位置注册处理程序`Application_Start`：

```
GlobalConfiguration.Configuration.MessageHandlers.Add(new CompressHandler()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T08:40:35.120

如果您使用的是 IIS 7+，我会说将压缩留给 IIS，因为它支持 GZIP 压缩。只需[打开它](http://www.codeproject.com/Articles/186233/Utilize-gzip-compression-in-IIS)。

另一方面，对于控制器来说，压缩太靠近金属。理想情况下，控制器应该在比字节和流更高的级别上工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-09T13:05:55.597

**使用一个类并编写以下代码**

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class CompressFilter : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext context)
    {
        var acceptedEncoding = context.Response.RequestMessage.Headers.AcceptEncoding.First().Value;
        if (!acceptedEncoding.Equals("gzip", StringComparison.InvariantCultureIgnoreCase)
        && !acceptedEncoding.Equals("deflate", StringComparison.InvariantCultureIgnoreCase))
        {
            return;
        }
        context.Response.Content = new CompressedContent(context.Response.Content, acceptedEncoding);
    }
} 
```

现在创建另一个类并编写以下代码。

```
public class CompressedContent : HttpContent
{
    private readonly string _encodingType;
    private readonly HttpContent _originalContent;
    public CompressedContent(HttpContent content, string encodingType = "gzip")
    {
        if (content == null)
        {
            throw new ArgumentNullException("content");
        }
        _originalContent = content;
        _encodingType = encodingType.ToLowerInvariant();
        foreach (var header in _originalContent.Headers)
        {
            Headers.TryAddWithoutValidation(header.Key, header.Value);
        }
        Headers.ContentEncoding.Add(encodingType);
    }
    protected override bool TryComputeLength(out long length)
    {
        length = -1;
        return false;
    }
    protected override Task SerializeToStreamAsync(Stream stream, TransportContext context)
    {
        Stream compressedStream = null;
        switch (_encodingType)
        {
            case "gzip":
                compressedStream = new GZipStream(stream, CompressionMode.Compress, true);
                break;
            case "deflate":
                compressedStream = new DeflateStream(stream, CompressionMode.Compress, true);
                break;
            default:
                compressedStream = stream;
                break;
        }
        return _originalContent.CopyToAsync(compressedStream).ContinueWith(tsk =>
        {
            if (compressedStream != null)
            {
                compressedStream.Dispose();
            }
        });
    }
} 
```

现在在 Controller 或任何类似这样的 api 操作方法中使用以下属性

```
[Route("GetData")]
**[CompressFilter]**         
public HttpResponseMessage GetData()
{
} 
```

# jquery - jQuery 自定义滚动条 - 它们对 SEO 友好吗？

> ID：10443590
> 
> 赞同：-6
> 
> 时间：2012-05-04T06:12:56.203
> 
> 标签：jquery, css, seo, scrollbar, customization

我一直在尝试对此进行研究，但没有成功，我将在这里提出新鲜的问题。如果我制作了一个自定义 jQuery 滚动条，例如[http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html](http://manos.malihu.gr/tuts/jquery_custom_scrollbar.html)

这会使可滚动内容的 SEO 不友好吗？即使 Jquery 涉及滚动的外观和感觉，搜索引擎是否能够抓取和阅读内容？

如果它对 SEO 不友好，那么我认为它毫无意义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:15:05.533

它不会对您的 SEO 产生任何影响。爬虫不会看到任何这些。

# api - 有没有办法在 Asana 任务中读取标签？

> ID：10443596
> 
> 赞同：1
> 
> 时间：2012-05-04T06:13:27.970
> 
> 标签：api, asana

我正在使用 Asana API 和“opt_expand=”。读取项目中的所有任务时的选项。它返回了很多信息，但没有返回标签。有没有办法读取与任务相关的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:56:11.447

（我为 Asana 工作）

API 尚未公开标签，但它在我们要添加的功能列表中很重要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T23:44:10.860

Asana 的 API 现在支持标签（2012 年 6 月 19 日添加）[https://asana.com/developers/api-reference/tags](https://asana.com/developers/api-reference/tags)

# android - 如何在 ViewPager 中创建一个自定义页面，其中每个页面都有 3 个 ImageViews（可能会有所不同）？

> ID：10443599
> 
> 赞同：0
> 
> 时间：2012-05-04T06:13:52.737
> 
> 标签：android, android-viewpager, horizontal-scrolling

我的问题与这个问题类似，[Android- Horizo​​ntal scrolling of multiple viewable items](https://stackoverflow.com/questions/7694812/android-horizontal-scrolling-of-multiple-viewable-items)。不幸的是，仍然无法得到正确的答案。

我不想使用 Horizo​​ntalScrollView，因为它不会释放本机内存，这会导致我 OutOfMemoryError。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:06:18.937

> 如何在 ViewPager 中创建一个自定义页面，其中每个页面都有 3 个 ImageViews（可能会有所不同）？

第 1 步：设计一个“具有 3 个 ImageView（可能会有所不同）”的片段

步骤#2：创建一个`FragmentStatePagerAdapter`基于步骤#1中的片段创建页面的

第 3 步：创建一个`ViewPager`并将第 2 步中的适配器实例交给它

# .net - 运行时静态数据（缓存）刷新

> ID：10443600
> 
> 赞同：0
> 
> 时间：2012-05-04T06:13:57.390
> 
> 标签：.net, static, runtime, refresh

我正在使用静态来保存数据以进行缓存。这用于窗口服务。

我的缓存代码如下。

```
公共类 CacheLoader

`{
    private static Dictionary<string, string> _cache;
    private static Boolean _loaded = false;
    private static object _lockObject = new object();
    private ILoader _loader;
    public CacheLoader(ILoader loaderObj)
    {
        _loader = loaderObj;
    }
    public Dictionary<string, string> Load()
    {
        lock (_lockObject)
        {
            if (!_loaded)
            {
                _cache = _loader.Load();
                _loaded = true;
            }
        }
        return _cache;
    }
    public static void Clear()
    {
        lock (_lockObject)
        {
            _cache = null;
            _loaded = false;
        }
    }
}` 

我的问题是，如何在运行时刷新（重新加载）这些静态数据。我不想使用计时器，因为每次计时器到期时都会刷新缓存。

我希望在需要时刷新缓存，例如手动刷新而不重新启动窗口服务。

我想到了使用文件监视概念，即，如果刷新更改的缓存，则监视文件的单独线程。

那是对的吗？

            回答 #1

赞同：0

时间：2012-05-04T06:41:58.403

为您的服务提供 WCF 端点或使用任何其他 IPC 机制从您的应用程序（例如，命名管道）与其通信。然后，您可以轻松触发刷新。另请参阅此处的[文章](http://arcanecode.com/2007/05/30/windows-services-in-c-sending-commands-to-your-windows-service-part-7/)，展示如何使用 OnCustomCommand 处理程序进行单向通信。

```

# java - BufferedImage 文件大小问题

> ID：10443603
> 
> 赞同：0
> 
> 时间：2012-05-04T06:14:06.830
> 
> 标签：java, image, bufferedimage

我正在尝试从某个位置获取一些图像并尝试使用图像缓冲区调整/读取它的大小。问题是；它不会读取某些数据上的文件大小（我猜大约大于 200 kbs。）有什么办法可以增加缓冲图像的文件大小？

# python - 在图像上传 django 表单中需要帮助

> ID：10443604
> 
> 赞同：0
> 
> 时间：2012-05-04T06:14:11.070
> 
> 标签：python, django, forms, django-models

我使用以下代码提取了最后上传的图像

```
class categoryForm(forms.Form):
   name = forms.CharField(widget=forms.TextInput(attrs={'class':'box'}),max_length=32,label='Category',required=True)
   is_active = forms.BooleanField(required=False)
   id = forms.CharField(widget=forms.HiddenInput,required=False)
   photo = forms.ImageField(
     required=False,
     label='Upload photo',
     initial=True,
     help_text='max. 4 megabytes'
     )
   def __init__(self, data,**kwargs):
     super(categoryForm, self).__init__(data, **kwargs)
      if self.data['photo']!='':
         self.fields['photo'].initial=self.data['photo'] 
```

我在填充更新表单时传递了数据

```
p=Category.objects.get(id='%s'%(target_id))
formdata = categoryForm({'name':p.name,'is_active':p.is_active,'id':p.id,'photo':p.image()}) 
```

它完美地显示了初始图像

因为我也有 FileField，所以我需要在调用 categoryForm 的操作页面中传递额外的参数，即

```
formdata = categoryForm(request.POST,request.FILES) 
```

这个额外的参数在下面给了我错误

```
__init__() takes exactly 2 arguments (3 given) 
```

如果我删除 request.FILES **init** () 工作正常，但我无法上传图片:)

请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:25:39.443

将`__init__`功能更改为此有帮助吗？

```
 def __init__(self, data, *args, **kwargs):
     super(categoryForm, self).__init__(data, **kwargs)
      if self.data['photo']!='':
         self.fields['photo'].initial=self.data['photo'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:27:30.923

我不确定你的代码是否正确，如果你说它有效......那么它就有效。错误来自这里：

```
 def __init__(self, data,**kwargs):
     super(categoryForm, self).__init__(data, files, **kwargs)
      if self.data['photo']!='':
         self.fields['photo'].initial=self.data['photo'] 
```

或者你可以做这样的事情：

```
formdata = categoryForm(data = request.POST, files = request.FILES)

   def __init__(self, *args, **kwargs):
     super(categoryForm, self).__init__(*args, **kwargs)
      if self.data['photo']!='':
         self.fields['photo'].initial=self.data['photo'] 
```

# android - 异步任务问题

> ID：10443609
> 
> 赞同：1
> 
> 时间：2012-05-04T06:14:24.810
> 
> 标签：android

在我的应用程序中，有 6-9 个 AsyncTask 他们被 onlick 事件触发，但是在 5 个 Asynctask 之后，其他 asynctask 没有在 2.1 emulator.on DDMS 线程视图中运行，我可以看到所有 5 个 AsyncTask 都处于等待状态，因此其他 asycntask 没有。任何帮助将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:24:49.470

默认情况下，在大多数 Android 版本中，除非队列已满，否则只会产生 5 个线程来处理 AsyncTask。这很好，但希望您不要指望这些 AsyncTask 以任何顺序进行处理，一旦前 5 个中的任何一个完成，其他任何一个都将得到处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:20:49.943

尝试一个接一个地启动，或者您是否希望所有这些都一次执行，我担心我记得最多 5 个任务可以同时运行，尽管我认为最新的 api 我认为这也发生了变化。

谢谢

# android - 访问联系人时出现 Android 安全异常

> ID：10443615
> 
> 赞同：5
> 
> 时间：2012-05-04T06:14:54.360
> 
> 标签：android, security, exception, contacts

这很奇怪，我已经搜索了论坛。

在我的主类中，我有一个按钮 onClick 将启动联系人应用程序，如下所示。当我单击该按钮时，会显示他的联系人列表，但只要我点击一个联系人，就会引发安全异常。

```
public void selectContacts(View v) {
        Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
        startActivityForResult(intent, PICK_CONTACT);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {

        case PICK_CONTACT:
            if (resultCode == Activity.RESULT_OK) {
                Uri contactData = data.getData();
                Cursor c = managedQuery(contactData, null, null, null, null);
                while (c.moveToNext()) {
                    String id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));
                    String phoneNumber = getPhoneNumber(id);
                    listOfContacts.add(phoneNumber);

                }
            } else {
                System.out.println("User didn't pick a contact");
                finish();
            }
            break;
        }

        super.onActivityResult(requestCode, resultCode, data);
    } 
```

我检查了清单，并尝试了在应用程序、活动等中放置使用权限标签的所有组合。但没有任何效果。这是我的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.company.letsmeet"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permision android:name="android.permission.SEND_SMS" />
    <uses-permision android:name="android.permission.RECEIVE_SMS" />
    <uses-permision android:name="android.permission.INTERNET" />
    <uses-permision android:name="android.permission.READ_CONTACTS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".LetsmeetActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

安全例外：

```
05-04 11:26:39.950: E/AndroidRuntime(3861): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.android.contacts/contacts/7 }} to activity {in.company.letsmeet/in.company.letsmeet.LetsmeetActivity}: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.SemcContactsProvider2 uri content://com.android.contacts/contacts/7 from pid=3861, uid=10093 requires android.permission.READ_CONTACTS 
```

任何帮助将不胜感激。我正在 Android 2.1 Sony experia S10 mini 上尝试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:29:37.927

所以你猜怎么着，我在 Manifest GUI 中添加了 READ_CONTACTS 权限，它就可以工作了。上帝我在这上面浪费了一整天。希望其他人不用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:18:04.900

试试下面的代码。这可能对你有帮助 -

```
public class PickDemo extends Activity {
private static final int PICK_REQUEST=1337;
private static Uri CONTENT_URI=null;

static {
int sdk=new Integer(Build.VERSION.SDK).intValue();

if (sdk>=5) {
  try {
    Class<?> clazz=Class.forName("android.provider.ContactsContract$Contacts");

    CONTENT_URI=(Uri)clazz.getField("CONTENT_URI").get(clazz);
  }
  catch (Throwable t) {
    Log.e("PickDemo", "Exception when determining CONTENT_URI", t);
  }
}
else {
  CONTENT_URI=Contacts.People.CONTENT_URI;
}
  }

  @Override
  public void onCreate(Bundle icicle) {
super.onCreate(icicle);

if (CONTENT_URI==null) {
  Toast
    .makeText(this, "We are experiencing technical difficulties...",
              Toast.LENGTH_LONG)
    .show();
  finish();

  return;
}

setContentView(R.layout.main);

Button btn=(Button)findViewById(R.id.pick);

btn.setOnClickListener(new View.OnClickListener() {
  public void onClick(View view) {
    Intent i=new Intent(Intent.ACTION_PICK, CONTENT_URI);

    startActivityForResult(i, PICK_REQUEST);
  }
});
  }

  @Override
  protected void onActivityResult(int requestCode, int resultCode,
                                Intent data) {
    if (requestCode==PICK_REQUEST) {
  if (resultCode==RESULT_OK) {
      startActivity(new Intent(Intent.ACTION_VIEW,
                                data.getData()));
  }
}
  }
} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="1"
      android:versionName="1.0"
      package="com.commonsware.android.contacts.pick"
      xmlns:android="http://schemas.android.com/apk/res/android">

  <uses-sdk android:minSdkVersion="3"
        android:targetSdkVersion="6" />
  <supports-screens android:largeScreens="true"
                android:normalScreens="true"
                android:smallScreens="false" />
  <application android:icon="@drawable/cw"
           android:label="@string/app_name">
    <activity android:label="@string/app_name"
          android:name=".PickDemo">
  <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
    </activity>
  </application>
</manifest> 
```

而且，只需参考[Commonsware 的示例。](https://github.com/commonsguy/cw-advandroid/tree/master/Contacts/Pick)希望这对您有所帮助。

# svn - svn Merge b1 b2 或简单修补 b2 与 b1 有什么区别？

> ID：10443616
> 
> 赞同：2
> 
> 时间：2012-05-04T06:14:56.747
> 
> 标签：svn, version-control, merge, diff, patch

**问题：**

这里：

```
b1 = svn branch 1
b2 = svn branch 2 
```

我无法理解以下方面的区别：

1.  如果我将一个`branch b1`与`branch b2`

2.  如果我通过使用 meld 或 Beyond compare 之类的工具进行差异化创建补丁`b1 and b2`，然后将该补丁应用到`b2`

那是完全相同/相似的吗？

如果是，那为什么我可以`step 2`离线[没有互联网]而`step 1`只能在线完成`svn merge`？

**请解释 ！！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:41:31.467

这是一个示例，显示了差异和合并之间的根本区别（我们甚至没有谈论 SVN）：

假设您在 b1 和 b2 中都有一个文件 F。F 在 b1 中有一个额外的行，但在 b2 中没有。根据您`diff b1/F b2/F`或`diff b2/F b1/F`. 在一种情况下，它会告诉您该行已被删除，在另一种情况下 - 它已被添加。那么你要应用哪个补丁呢？

合并（即使是常规的 no-svn 合并）是相对于第三个源完成的——通常是共同的祖先。然后您通常可以判断该行是添加还是删除 - 如果它在祖先中，则它被删除，如果不是 - 添加。

换句话说，合并是应用来自*b1*和 b2 的更改。简单的差异无法知道发生了什么变化 - 没有第三个来源。

现在，如果你也有共同的来源 - 你可以实现类似于 svn merge 的结果。你甚至可以争辩说，有时 SVN 是一个真正的害虫，因为当完全相同的更改应用于两个分支时，你会尖叫你有冲突。理论上，当离线合并不会给您正确的结果时，可以提供示例，它们主要适用于不识别冲突。此外，SVN 还对合并进行了一些有用的簿记。

因此，如果绝对必要，您可以这样做：保留公共源 b 的副本；当您需要将 b1 合并到 b2 中时：`diff b1 b`并将补丁应用于 b2。

更好的是（正如我之前提到的）使用 Git 或 Mercurial。

# php - 在 PHP for 循环和 HTML 选择选项中选择选定的值 - 不起作用？

> ID：10443624
> 
> 赞同：0
> 
> 时间：2012-05-04T06:15:11.747
> 
> 标签：php, html, loops

这是循环和代码：

```
$rev_sel = 0.01;
    for($i=1.00; $i>=0; $i=$i-.01) {
        $val = $i;
        $val2 = $val * 100;
        echo "<option value='".$i."'";
        if($i == $rev_sel) echo "selected='selected'";
        echo ">".$val2."%</option>";
        } 
```

据我所知，这应该会在弹出时选择 1%，或者 $rev_sel 设置为 0 到 1.00 之间的任何值。事实并非如此。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:20:38.550

你确实需要像这样四舍五入：

```
<?php
$rev_sel = 0.01;
    for($i=1.00; $i>=0; $i=$i-.01) {
        $val = round($i, 2);
        $val2 = $val * 100;
        echo "<option value='".round($i,2)."'";
        if(round($i,2) == $rev_sel) echo "selected='selected'";
        echo ">".$val2."%</option>\n";
        } 
```

您的代码正在输出：

```
<option value='0.13'>13%</option>
<option value='0.12'>12%</option>
<option value='0.11'>11%</option>
<option value='0.099999999999999'>9.9999999999999%</option>
<option value='0.089999999999999'>8.9999999999999%</option>
<option value='0.079999999999999'>7.9999999999999%</option>
<option value='0.069999999999999'>6.9999999999999%</option> 
```

0.00999999...等不等于0.01

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:23:32.263

您不能直接比较浮点数。你最好比较整数或字符串，例如

```
<?php
$rev_sel = 1;
for ($i = 100; $i <= 0; $i--) :
$selected = $rev_sel == $i ? ' selected="selected"' : '';
?>
<option value="<?php printf('%.2f', $i / 100) ?>"<?php echo $selected ?>><?php echo $i ?>%</option> 
<?php endfor ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T06:58:18.887

您可以按如下方式执行此操作，以与浮点值进行精确比较...

```
$rev_sel = 0.01;
for($i=1.00; round($i,2) >= 0; $i = $i-.01) {
    $val = $i;
    $val2 = $val * 100;
    echo "<option value='".$i."'";
    if($i == $rev_sel) echo "selected='selected'";
    echo ">".$val2."%</option>";
    } 
```

# git - 强制 Git 子模块始终保持最新状态

> ID：10443627
> 
> 赞同：76
> 
> 时间：2012-05-04T06:15:21.130
> 
> 标签：git, git-submodules

我喜欢 git 子模块。另外，我讨厌 git 子模块。我喜欢它们的是它如何使您能够清晰地划分依赖关系等。我明白让它们指向回购上的特定提交的意义，我确实这样做了。但就我而言，我正在构建一个将在另一个项目中使用的库，所以我想将它保存在那个单独的仓库中。

然而，当我每天都在这个库上工作时，烦恼就来了，我经常不得不使用我的库切换回应用程序来提交指针更新。

那么，当我不断更新和添加到这个库时，是否有可能让一个 git 子模块始终位于它指向的 repo 的头部？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2015-08-06T09:23:01.190

[正如我在“ git submodule tracking latest](https://stackoverflow.com/a/9189815/6309) ”中提到的，您可以从 git 1.8.2（2013 年 3 月）开始创建一个子模块来跟踪分支的 HEAD：

```
git submodule add -b <branch> <repository> [<path>] 
```

子模块 SHA1 仍然作为**[gitlink](https://stackoverflow.com/a/16581096/6309)**记录在父 repo 中（[索引中的特殊条目](https://stackoverflow.com/a/19354410/6309)）

但是 a`git submodule update --remote`会将该条目更新为与子模块远程 repo 分支的 HEAD 匹配的 SHA1。

如果你有一个现有的子模块，[你可以让它跟随一个分支](https://stackoverflow.com/a/18799234/6309)：

```
cd /path/to/your/parent/repo
git config -f .gitmodules submodule.<path>.branch <branch>

cd path/to/your/submodule
git checkout -b branch --track origin/branch
  # if the master branch already exist:
  git branch -u origin/master master

cd /path/to/your/parent/repo
git add path/to/your/submodule
git commit -m "Make submodule tracking a branch" 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-04T06:16:43.123

更新：从 git 1.8.2 开始，似乎有一个解决方案。请[在下面查看 VonC 的答案](https://stackoverflow.com/a/31851819)。原始答案留给 git < 1.8.2 的用户。

* * *

不，这是设计使然。如果有办法将子模块指向其他存储库的“当前头”，那么就不可能从主存储库检索历史版本（例如标记版本）。它不知道要签出哪个版本的子模块。

话虽如此，您可能对[git subtree](http://apenwarr.ca/log/?m=200904#30)脚本感兴趣。这提供了一种处理子模块的不同方式，可能与您的工作流程更兼容。[最近关于 HN](https://news.ycombinator.com/item?id=3926683)的帖子让我想起了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:34:01.067

为什么不在子模块目录中进行更改，它本身就是一个 git 存储库？这样，您的应用程序将始终具有更新的库。

注意事项：

1.  您仍然需要在应用程序仓库中提交子模块更改，以将更改放入版本控制（针对应用程序）。

2.  如果使用此库的应用程序不止一个，那么这将不起作用，因为在任何给定时间只有一个应用程序是最新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-06T09:16:51.243

暂时没有这样的事情。为了使代码保持最新，我使用以下命令：

首次下载全部：`git clone --recursive http://github.com/<your repo>`
在现有仓库中下载更新：`git submodule update --remote --recursive --merge`

# ios - 如何根据播放时间观察 MPMoviePlayerController？

> ID：10443628
> 
> 赞同：1
> 
> 时间：2012-05-04T06:15:27.043
> 
> 标签：ios, mpmovieplayercontroller, avfoundation, key-value-observing

为了在指定的时间调用一些事件，例如，当视频到 10.0s 或 20.0s 时，应该有一些事件被调用，是否可以观察 MPMoviePlayerController 实例的某些属性对于这种情况? 或任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:18:45.227

我必须做几乎相同的事情，除了使用我自己的 NSTimer 并查看 MPMoviePlayer 的当前时间之外，我没有找到任何好的解决方案......

所以基本上，我每秒钟都在看现在是什么时间，当我对时间感兴趣时，我会做我的事情。

# c# - 使用 C# HTTP GET 下载文件

> ID：10443634
> 
> 赞同：1
> 
> 时间：2012-05-04T06:15:48.437
> 
> 标签：c#

如何使用 C# 4.0 的 HTTP GET 而不是普通的 webclient.download 下载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:21:56.087

我相信这是一个 GET 请求。您是否希望流式传输响应？

```
using (var client = new WebClient())
using (var sr = new StreamReader(client.OpenRead("http://www.mypage.com")))
    return sr.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:22:32.660

如果您尝试模拟 Web 浏览器，您仍然可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)只需确保设置用户代理。

```
WebClient client = new WebClient ();
client.Headers.Add ("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)"); 
```

如果您还需要在请求中设置 cookie，只需扩展类并覆盖 GetWebRequest() 方法。

# c++ - C++ 可克隆混合

> ID：10443637
> 
> 赞同：6
> 
> 时间：2012-05-04T06:15:58.033
> 
> 标签：c++, clone, mixins

我有几个类需要`clone`定义以下函数：

```
struct Base
{
  virtual Base * clone() const = 0;
};

struct A : public Base
{
    Base * clone() const {
      return new A(*this);
  }
};

struct B : public Base
{
    Base * clone() const {
      return new B(*this);
  }
};

struct X : public Base2
{
    Base2 * clone() const {
      return new X(*this);
  }
}; 
```

我正在尝试使用 Cloneable mixin 来避免这种冗余代码：

```
template <typename BASE, typename TYPE>
class CloneableMixin
{
public:
  BASE*clone() const {
    return new TYPE( dynamic_cast<const TYPE &>(*this) );
  }
};

struct A : public Base, public CloneableMixin<Base, A>
{
}; 
```

~~但是，这不起作用，因为 in `new TYPE(*this)`from `CloneableMixin`,`*this`是 type `CloneableMixin<BASE, TYPE>`。~~

**更新：**`CloneableMixin`可以`dynamic_cast`正确的类型。但是现在我有另一个问题：`CloneableMixin::clone`没有成功覆盖`Base::clone`，因此编译器报告 A 是抽象类型。

可以巧妙地使用`virtual`继承允许`CloneableMixin::clone`覆盖`Base::clone`吗？我应该为此使用一些宏吗？

你知道解决所有这些冗余代码的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:31:05.233

> 虚拟继承的一些巧妙使用可以允许 CloneableMixin::clone 覆盖 Base::clone 吗？

你`CloneableMixin<Base,Derived>`不能覆盖任何方法`Base`——无论是多态的还是隐藏的——因为`CloneableMixin<Base,Derived>`不是从`Base`.

另一方面，如果`CloneableMixin<Base,Derived>` *是*从`Base` 你那里派生的，就不再需要它是一个mixin，因为 -

```
class Derived : public CloneableMixin<Base,Derived> {....}; 
```

会继承`Base`.

因此，对于您的示例的需要，此处说明的解决方案就足够了：

```
#include <iostream>

// cloner v1.0
template <class Base, class Derived>
struct cloner : Base
{
    Base *clone() const override {
        return new Derived( dynamic_cast<const Derived &>(*this) );
    }
    ~cloner() override {};
};

struct Base
{
    virtual Base * clone() const = 0;
    Base() {
        std::cout << "Base()" << std::endl;
    }
    virtual ~Base() {
        std::cout << "~Base()" << std::endl;
    }
};

struct A : cloner<Base,A> 
{
    A() {
        std::cout << "A()" << std::endl;
    }
    ~A() override {
        std::cout << "~A()" << std::endl;
    }
};

int main()
{
    A a;
    Base * pb = a.clone();
    delete pb;
} 
```

（如果您正在编译为 C++03 标准而不是 C++11，那么您可以简单地删除`override`关键字的出现。）

该解决方案将分解为一些更真实的类层次结构，例如在[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)的插图中：

```
#include <iostream>
#include <memory>

using namespace std;

// cloner v1.0
template<class B, class D>
struct cloner : B
{
    B *clone() const override {
        return new D(dynamic_cast<D const&>(*this));
    }
    ~cloner() override {}       
};

/*  Abstract base class `abstract` keeps the state for all derivatives
    and has some pure virtual methods. It has some non-default
    constructors. 
*/
struct abstract 
{
    virtual ~abstract() {
        cout << "~abstract()" << endl;
    }
    int get_state() const {
        return _state;
    }
    void run() {
        cout << "abstract::run()" << endl;
        a_root_method();
        another_root_method();
    }
    virtual void a_root_method() = 0;
    virtual void another_root_method() = 0;
    virtual abstract * clone() const = 0;

protected:

    abstract()
    : _state(0) {
        cout << "abstract(): state = " << get_state() << endl;
    }
    explicit abstract(int state) : _state(state) {
        cout << "abstract(" << state << ") : state = " 
        << get_state() << endl;
    }   
    int _state;
};

/*  Concrete class `concrete` inherits `abstract`
    and implements the pure virtual methods.
    It echoes the constructors of `abstract`. Since `concrete`
    is concrete, it requires cloneability. 
*/
struct concrete : cloner<abstract,concrete> 
{   
    concrete() { 
        cout << "concrete(): state = " << get_state() << endl;
    }
    explicit concrete(int state) : abstract(state) {  //<- Barf!
        cout << "concrete(" << state << ") : state = " 
            << get_state() << endl;
    }
    ~concrete() override {
        cout << "~concrete()" << endl;
    }
    void a_root_method() override {
        ++_state; 
        cout << "concrete::a_root_method() : state = " 
            << get_state() << endl;
    }
    void another_root_method() override {
        --_state;
        cout << "concrete::another_root_method() : state = " 
            << get_state() << endl;
    }       
};

int main(int argc, char **argv)
{
    concrete c1;
    unique_ptr<abstract> pr(new concrete(c1));
    pr->a_root_method();
    pr->another_root_method();
    unique_ptr<abstract> pr1(pr->clone());
    pr1->a_root_method();
    return 0;
} 
```

当我们尝试构建它时，编译器将在（在注释处）`abstract(state)`的构造函数的初始化时给出错误 ，说：`concrete``Barf!`

```
error: type 'abstract' is not a direct or virtual base of 'concrete' 
```

或大意的话。确实，`concrete`is not `abstract` but的直接基数`cloner<abstract,concrete>`。但是，我们不能将构造函数重写为：

```
/*Plan B*/ explicit concrete(int state) : cloner<abstract,concrete>(state){....} 
```

因为没有这样的构造函数

```
cloner<abstract,concrete>::cloner<abstract,concrete>(int) 
```

但编译器的诊断建议修复。*这*是虚拟继承可以提供帮助的。我们需要`abstract`成为 的*虚拟*基地`concrete`，这实际上意味着“荣誉的直接基地`concrete`”，我们可以通过建立`B`虚拟*基地*来实现`cloner<B,D>`：

```
// cloner v1.1
template<class B, class D>
struct cloner : virtual B
{
    B *clone() const override {
        return new D(dynamic_cast<D const&>(*this));
    }
    ~cloner() override {}       
}; 
```

这样，我们就有了一个干净的构建和输出：

```
abstract(): state = 0
concrete(): state = 0
concrete::a_root_method() : state = 1
concrete::another_root_method() : state = 0
concrete::a_root_method() : state = 1
~concrete()
~abstract()
~concrete()
~abstract()
~concrete()
~abstract() 
```

原则上有充分的理由对虚拟继承保持警惕，并至少将其用于具有架构原理的情况——而不是像我们刚才使用的那样用于变通方法。

如果我们更喜欢不使用虚拟继承来解决这个问题，那么我们必须以某种方式确保有一个构造函数与, 的任意*构造*函数`cloner<B,D>`相呼应。然后任何相应的构造函数将能够初始化它的直接基 ，无论参数是什么。*`B``B``D``cloner<B,D>`*

 *这是 C++03 的梦想，但借助 C++11 中可变参数模板参数的魔力，这很容易：

```
// cloner v1.2
template<class B, class D>
struct cloner : B
{
    B *clone() const override {
        return new D(dynamic_cast<D const&>(*this));
    }
    ~cloner() override {}
    // "All purpose constructor"
    template<typename... Args>
    explicit cloner(Args... args)
    : B(args...){}  
}; 
```

有了这个，我们*可以*`concrete`将构造函数重写为`/*Plan B*/`，并且我们再次获得了正确的构建和可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:45:44.847

在 Cloneable mixin 的实例化过程中，派生类仍处于不完整类型。您可以尝试像这样添加众所周知的额外间接级别：

```
template 
<
    typename Derived
>
class Cloneable 
:    
    private CloneableBase
{
public:
    Derived* clone() const
    {
        return static_cast<Derived*>(this->do_clone());
    }

private:
    virtual Cloneable* do_clone() const
    {
        return new Derived(static_cast<const Derived&>(*this));
    }
};

class CloneableBase
{
public:
    CloneableBase* clone() const
    {
        return do_clone();
    }

private:
    virtual CloneableBase* do_clone() const=0;
};

class MyClass: public Cloneable<MyClass>; 
```*

# jquery - webfont 导致 div 无法调整到正确的高度

> ID：10443641
> 
> 赞同：1
> 
> 时间：2012-05-04T06:16:34.590
> 
> 标签：jquery, scroll, jscrollpane

我正在使用 webfont 服务，但我遇到了 jscrollpane 的问题。

我假设 jscrollpane 在切换到 webfont 之前从字体获取高度，webfont 稍微大一点会使 div 稍微长一些。jscrollpane 没有正确更新高度，因此会切断文本。

我认为`autoReinitialise:true`会正确调整高度。

```
 $(document).ready(function() {
    $(function()
        {
        $('.info').jScrollPane({showArrows: true, autoReinitialise: true});
        });
}); 
```

我可以延迟脚本触发以等待 webfont，或者如何使用 autoReinitialise。

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:39:11.647

使用`$(window).load()`而不是`$(document).ready()`，这样可以确保在初始化 jScrollPane 时加载 webfont。

# random - 真正的随机数发生器

> ID：10443642
> 
> 赞同：2
> 
> 时间：2012-05-04T06:16:42.097
> 
> 标签：random, cryptography, seed, prng

据我了解，PRNG 使用的种子会生成一系列并非真正随机的数字。是否有可能通过每次使用不同的种子一遍又一遍地重用 PRNG 来创建一个真正的随机数生成器。种子可以从开发/随机或当前时间或时钟滴答中提取。如果没有，那么是否有一个真正的随机数生成器在软件中实现？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:18:33.650

如果您每次需要随机数时都重新播种 PRNG，则可以剪掉中间人并直接将种子用作随机数。

但是你所说的都是在实践中完成的。这些是所谓的密码安全 PRNG，它们被用于许多操作系统中，为密码应用程序提供随机数。它们经常从熵池中重新播种，并且被设计为很难从知道过去的数字中计算出下一个数字（例如，对于 LCG 来说这是非常微不足道的事情）并且也很难计算过去当前的数字。

这种方法的好处是您不会阻止生成随机数。系统中的熵是一种有限资源，只能来自外部资源，因此通过使用 CSPRNG，您可以安全地拉伸它，同时不会危及安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:33:55.527

简单的答案是没有这样的实现，因为据我所知，这根本不可能。要生成真正的随机数，您需要外部熵源，例如[硬件随机数生成器](http://en.wikipedia.org/wiki/Hardware_random_number_generator)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:28:27.693

时钟不是很随机，但 /dev/random 有一些随机性——它实际上就像一桶随机性，你可以根据随机性产生和消耗的速率来消耗它。如果你使用 dev/random，那么你就没有使用 RNG。从 /dev/random 播种 RNG 是多余的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T15:15:43.570

英特尔[正在](http://spectrum.ieee.org/computing/hardware/behind-intels-new-randomnumber-generator)研究的东西如果能像宣传的那样工作，那将是真正具有开创性的东西。它实际上会使硬件 PRNG 变得多余。

# asp.net-mvc-3 - 使用提交和文本将值传递给控制器

> ID：10443649
> 
> 赞同：0
> 
> 时间：2012-05-04T06:17:22.037
> 
> 标签：asp.net-mvc-3

我是 asp.net mvc 3 的初学者。我想创建一个页面，用户可以在其中输入搜索项并从数据库中检索数据。我已经创建了数据库。我创建了控制器，它是：

```
public ActionResult SearchIndex(string id)
{
    string searchString=id;
    var search = from m in db.Searches
    select m;

    if (!String.IsNullOrEmpty(searchString))
    {
        search = search.Where(s => s.Name.Contains(searchString));
    }

    return View(search);
} 
```

我想将视图页面中的值传递给上面的控制器。从上述控制器输入要搜索的项目的视图页面中的代码应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:26:57.600

所以用里面的表格创建你的视图......像这样：

```
@using (Html.BeginForm())
{
    <label>Search:</label>
    <input type="text" name="searchString" />

    <input type="submit" name="submit" />
} 
```

然后在您的控制器中，您可以使用 FormCollection 对象来获取您的 searchString，如下所示：

```
[HttpPost]
public ActionResult SearchIndex(FormCollection formCollection)
{
    string searchString = formCollection["searchString"];
    ...
} 
```

# svg - D3拖放与FF中不可点击的锚标签

> ID：10443651
> 
> 赞同：0
> 
> 时间：2012-05-04T06:17:30.053
> 
> 标签：svg, d3.js

我正在尝试使用 d3 和 svg 在一组可排序的元素上实现一些拖放功能。基本上，在拖动之后，所有元素的位置都会更新为它们的新位置，根据拖动元素的放置位置计算。为了完成我需要的事情，我正在使用`dragend`d3 提供的回调。

我在这里准备了我的场景的简化版本：

[http://jsfiddle.net/G52rB/4/](http://jsfiddle.net/G52rB/4/)

如您所见，每个可拖动元素都包含一个 svg 超链接。该链接在 Chrome 和 Safari 中有效，但在 FF 中不可点击。

到目前为止，从我的谷歌搜索来看，问题似乎源于点击事件的 mouseup 部分的传播，我猜这在 FF 中没有正确冒泡。我正在使用 d3 版本 2.7.4。

我在最新版本的 d3 中尝试了相同的代码，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:21:23.477

这不是一个解决方案，而是使用 hack 的解决方法。

我基本上检查被丢弃的元素是否真的被移动了，浏览器是否是火狐。如果两个条件都为真并且点击目标是一个链接，我会重定向到该链接的 url。

这是使用解决方法和最新版本 d3 的更新 JSFiddle 版本：

[http://jsfiddle.net/G52rB/8/](http://jsfiddle.net/G52rB/8/)

# android - 自定义 android 地图的地方？

> ID：10443652
> 
> 赞同：2
> 
> 时间：2012-05-04T06:17:39.050
> 
> 标签：android, customization, favorites

我想根据业务、收藏夹等区域的选择显示我的地点的地图。
我正在使用以下意图进行搜索并在 Android 的地图中显示结果

```
 Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps"));
    startActivity(intent); 
```

当我将地图位置单击为收藏夹时，它会在我的位置中显示该位置。

如何在 Android 中根据类别划分地点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T06:54:39.503

您应该使用 place api 来选择区域。

一步步，

***如何获取某个位置的最近位置列表。***

**第 1 步**：前往 API 控制台获取 Place API

[https://code.google.com/apis/console/](https://code.google.com/apis/console/)

并在服务选项卡上选择

![服务](../Images/aebb76015574d2592e2e706c2f02d0fe.png)

就地服务

![在此处输入图像描述](../Images/9215413d022e4dfb32899768d6204595.png)

现在选择 API Access 选项卡并获取 API KEY

![在此处输入图像描述](../Images/412f20a76f265cf8eb57cfc7e0c0836d.png)

现在你有一个 API 密钥来获取位置

* * *

**现在在编程**

***步骤 2 *** ：首先创建一个名为**Place.java**的类。此类用于包含 Place api 提供的 place 属性。

```
package com.android.code.GoogleMap.NearsetLandmark;

import java.util.logging.Level;
import java.util.logging.Logger;
import org.json.JSONException;
import org.json.JSONObject;

public class Place {
    private String id;
    private String icon;
    private String name;
    private String vicinity;
    private Double latitude;
    private Double longitude;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getIcon() {
        return icon;
    }

    public void setIcon(String icon) {
        this.icon = icon;
    }

    public Double getLatitude() {
        return latitude;
    }

    public void setLatitude(Double latitude) {
        this.latitude = latitude;
    }

    public Double getLongitude() {
        return longitude;
    }

    public void setLongitude(Double longitude) {
        this.longitude = longitude;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getVicinity() {
        return vicinity;
    }

    public void setVicinity(String vicinity) {
        this.vicinity = vicinity;
    }

    static Place jsonToPontoReferencia(JSONObject pontoReferencia) {
        try {
            Place result = new Place();
            JSONObject geometry = (JSONObject) pontoReferencia.get("geometry");
            JSONObject location = (JSONObject) geometry.get("location");
            result.setLatitude((Double) location.get("lat"));
            result.setLongitude((Double) location.get("lng"));
            result.setIcon(pontoReferencia.getString("icon"));
            result.setName(pontoReferencia.getString("name"));
            result.setVicinity(pontoReferencia.getString("vicinity"));
            result.setId(pontoReferencia.getString("id"));
            return result;
        } catch (JSONException ex) {
            Logger.getLogger(Place.class.getName()).log(Level.SEVERE, null, ex);
        }
        return null;
    }

    @Override
    public String toString() {
        return "Place{" + "id=" + id + ", icon=" + icon + ", name=" + name + ", latitude=" + latitude + ", longitude=" + longitude + '}';
    }

} 
```

现在创建一个名为**PlacesService的类**

```
package com.android.code.GoogleMap.NearsetLandmark;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class PlacesService {

    private String API_KEY;

    public PlacesService(String apikey) {
        this.API_KEY = apikey;
    }

    public void setApiKey(String apikey) {
        this.API_KEY = apikey;
    }

    public List<Place> findPlaces(double latitude, double longitude,String placeSpacification) 
    {

        String urlString = makeUrl(latitude, longitude,placeSpacification);

        try {
            String json = getJSON(urlString);

            System.out.println(json);
            JSONObject object = new JSONObject(json);
            JSONArray array = object.getJSONArray("results");

            ArrayList<Place> arrayList = new ArrayList<Place>();
            for (int i = 0; i < array.length(); i++) {
                try {
                    Place place = Place.jsonToPontoReferencia((JSONObject) array.get(i));

                    Log.v("Places Services ", ""+place);

                    arrayList.add(place);
                } catch (Exception e) {
                }
            }
            return arrayList;
        } catch (JSONException ex) {
            Logger.getLogger(PlacesService.class.getName()).log(Level.SEVERE, null, ex);
        }
        return null;
    }
//https://maps.googleapis.com/maps/api/place/search/json?location=28.632808,77.218276&radius=500&types=atm&sensor=false&key=your_api_key
    private String makeUrl(double latitude, double longitude,String place) {
         StringBuilder urlString = new StringBuilder("https://maps.googleapis.com/maps/api/place/search/json?");

        if (place.equals("")) {
                urlString.append("&location=");
                urlString.append(Double.toString(latitude));
                urlString.append(",");
                urlString.append(Double.toString(longitude));
                urlString.append("&radius=1000");
             //   urlString.append("&types="+place);
                urlString.append("&sensor=false&key=" + API_KEY);
        } else {
                urlString.append("&location=");
                urlString.append(Double.toString(latitude));
                urlString.append(",");
                urlString.append(Double.toString(longitude));
                urlString.append("&radius=1000");
                urlString.append("&types="+place);
                urlString.append("&sensor=false&key=" + API_KEY);
        }

        return urlString.toString();
    }

    protected String getJSON(String url) {
        return getUrlContents(url);
    }

    private String getUrlContents(String theUrl) 
    {
        StringBuilder content = new StringBuilder();

        try {
            URL url = new URL(theUrl);
            URLConnection urlConnection = url.openConnection();
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()), 8);
            String line;
            while ((line = bufferedReader.readLine()) != null) 
            {
                content.append(line + "\n");
            }

            bufferedReader.close();
        }

        catch (Exception e)
        {

            e.printStackTrace();

        }

        return content.toString();
    }
} 
```

现在创建一个新的 Activity，您想在其中获取最近地点的列表。

/** * */

```
 package com.android.code.GoogleMap.NearsetLandmark;

    import java.io.BufferedInputStream;
    import java.io.BufferedOutputStream;
    import java.io.ByteArrayOutputStream;
    import java.io.IOException;
    import java.io.InputStream;
    import java.net.MalformedURLException;
    import java.net.URL;
    import java.util.List;

    import android.app.AlertDialog;
    import android.app.ListActivity;
    import android.content.Context;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.graphics.Canvas;
    import android.graphics.Paint;
    import android.graphics.Point;
    import android.graphics.drawable.Drawable;
    import android.location.Address;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.net.Uri;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.ContextMenu;
    import android.view.ContextMenu.ContextMenuInfo;
    import android.view.LayoutInflater;
    import android.view.Menu;
    import android.view.MenuItem;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.BaseAdapter;
    import android.widget.ImageView;
    import android.widget.ListView;
    import android.widget.TextView;

    import com.android.code.R;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;
    import com.google.android.maps.GeoPoint;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapController;
    import com.google.android.maps.MapView;
    import com.google.android.maps.Overlay;

    /**
     * @author dwivedi ji     * 
     *        */
    public class CheckInActivity extends ListActivity {

    private String[] placeName;
    private String[] imageUrl;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        new GetPlaces(this,getListView()).execute();
    }

    class GetPlaces extends AsyncTask<Void, Void, Void>{
        Context context;
        private ListView listView;
        private ProgressDialog bar;
        public GetPlaces(Context context, ListView listView) {
            // TODO Auto-generated constructor stub
            this.context = context;
            this.listView = listView;
        }

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            bar.dismiss();
              this.listView.setAdapter(new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1, placeName));

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
              bar =  new ProgressDialog(context);
            bar.setIndeterminate(true);
            bar.setTitle("Loading");
            bar.show();

        }

        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
            findNearLocation();
            return null;
        }

    }
    public void findNearLocation()   {

        PlacesService service = new PlacesService("past your key");

       /* 
        Hear you should call the method find nearst place near to central park new delhi then we pass the lat and lang of central park. hear you can be pass you current location lat and lang.The third argument is used to set the specific place if you pass the atm the it will return the list of nearest atm list. if you want to get the every thing then you should be pass "" only   
       */

          List<Place> findPlaces = service.findPlaces(28.632808,77.218276,"atm");
                                                      // Hear third argument, we pass the atm for getting atm , if you pass the hospital then this method return list of hospital , If you pass nothing then it will return all landmark 

            placeName = new String[findPlaces.size()];
            imageUrl = new String[findPlaces.size()];

          for (int i = 0; i < findPlaces.size(); i++) {

              Place placeDetail = findPlaces.get(i);
              placeDetail.getIcon();

            System.out.println(  placeDetail.getName());
            placeName[i] =placeDetail.getName();

            imageUrl[i] =placeDetail.getIcon();

        }

    }

} 
```

# c# - 将字符串转换为 int （或其他），有首选方法吗？

> ID：10443657
> 
> 赞同：3
> 
> 时间：2012-05-04T06:18:05.170
> 
> 标签：c#, type-conversion

有时我想知道，将字符串转换为其他类型（例如 int32）时，一种方式比另一种方式更好，还是只是品味问题？

```
Convert.ToInt32("123") 
```

或者

```
Int32.Parse("123") 
```

或者

还有什么办法？

**如果在这个问题中它不是有效的 int，则不考虑这种情况。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:22:52.783

**Convert.ToInt32**实际上是通过以下方式实现的...

```
int.Parse(value, CultureInfo.CurrentCulture); 
```

...这与您所说的替代方案相同，只是它考虑了文化设置。**int.Parse**方法本身是通过以下方式实现的......

```
Number.ParseInt32(s, NumberStyles.Integer, NumberFormatInfo.GetInstance(provider)); 
```

...其中 Number 是您不能直接调用的内部类。Number.ParseInt32方法标有以下属性**...**

```
[MethodImpl(MethodImplOptions.InternalCall)] 
```

...表明它是在 CLR 本身内部实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:27:53.837

`Conver.ToInt32`和之间的主要区别在于`Int32.Parse`如何处理`null`字符串。`Convert.ToInt32`在这种情况下返回默认值：

```
public static int ToInt32(string value)
{
    if (value == null)    
        return 0;

    return Int32.Parse(value, CultureInfo.CurrentCulture);
} 
```

我不喜欢那样。我认为只`"0"`应该解析为`0`. 这种行为最初是[为 Visual Basic 程序员设计的](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)：

> 这是一组用于从 Visual Basic 6 迁移到 Visual Basic .NET 的程序员的转换方法，它反映了现有 Visual Basic 6 转换方法的行为。假设是 C# 程序员更愿意使用转换运算符，而 Visual Basic 传统上使用转换方法进行类型转换。

所以，作为非 VB 程序员，我会选择`Int32.Parse`and `Int32.TryParse`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:26:06.490

从字符串转换为 int 时，我总是使用 int.TryParse。因为您并不总是确定可以将字符串转换为 int。像这样：

```
string temp="222";
int intValue;
if(int.TryParse(temp,out intValue))
{
    //Something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:24:19.223

正如 V4Vendetta 建议的那样，最好使用 TryParse 来避免与转换相关的异常。

```
int result = 0;

a = "3";
string b = "b";
string c = "2147483648"; //int32 max value + 1

int.TryParse(a, out result); // returns true result=3
int.TryParse(b, out result); // returns false result=0
int.TryParse(c, out result); // returns false result=0 
```

# c++ - 只为 cin 获取数字

> ID：10443660
> 
> 赞同：0
> 
> 时间：2012-05-04T06:18:22.513
> 
> 标签：c++

试图制作一个可靠和安全地向用户询问日期的三个组成部分的功能 - 日，月和年......我可以让它询问日期......但是我需要能够使它只能输入数字，不能输入字母，也不能混合字母和数字......

```
#include <iostream>

using namespace std;

    int Day;
    int Month;
    int Year;   

int GetYear(){
    cout << "Enter a Year > ";
    int nYear;
    cin >> nYear;
    cout << "Year: ";
    Year = nYear;
    return nYear;
}

int GetMonth(){
    cout << "\nEnter a Month > ";
    int nMonth;
    cin >> nMonth;
    cout << "Month: ";
    Month = nMonth;
    return nMonth;
}

int GetDay(int nMonth, int nYear){
    cout << "\nEnter a Day > ";
    int nDay;
    cin >> nDay;
    cout << "Day: ";
    Day = nDay;
    return nDay;
}

bool GetDate(int nDay, int nMonth, int nYear){
    cout << "\nDate: ";
    cout << nDay << "/" << nMonth << "/" << nYear << "\n";
    return 0; //GetDate(Day, Month, Year);
}

void main() {

    cout << GetYear();
    cout << GetMonth();
    cout << GetDay(Month, Year);
    cout << GetDate(Day, Month, Year);

    cout <<"Press Enter Key To Exist...";
    cin.ignore (numeric_limits<streamsize>::max(), '\n' ); 
    cin.get();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:50:23.317

也许不是正确的方法...我在学校作业中使用它。

```
#include <iostream>
#include <stdio.h>
#include <conio.h>

int getInputNumber()
{
    int key;
    do
    {
        key = _getch();
    }while (key < '0' || key > '9');
    std::cout << key - '0';
    return key - '0';
}

int main()
{
    int n = getInputNumber() ;
    system("pause");
    return 0;
} 
```

**另外，就在windows**

您需要编写自己的函数，而不是输入大于 9 的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:50:09.317

一般情况下：这是不可能的

当您调用程序并使用 shell（或 Windows 上的 CMD 提示符）接口进行输入时，所有输入处理都由 shell 接口完成，而不是`advisable`为了只接受所需的字符集而摆弄它，因为shell 对您机器上的所有程序都是通用的。

这在技术上可以通过实现您自己的 shell 并将其替换为默认系统 shell 来实现，但我们不在这里讨论它，您不应该这样做 :)

您可以做的最好的事情是验证输入的有效数字。一个简单的 ASCII 值检查将为您完成。您还可以使用一些实用功能，例如`atoi`或`strtoul`跳过给定输入中的无效字符，只使用连续的数字。

# ruby - 红宝石范围零件

> ID：10443661
> 
> 赞同：1
> 
> 时间：2012-05-04T06:18:28.300
> 
> 标签：ruby, range

我有一个问题，红宝石代码：

```
def give_me_all_periods(period, paid_periods)
  # Can you help me?
end

period = [1..10]
paid_periods = [1..2, 5..8]
give_me_all_periods(period, paid_periods).should == [1...2, 2...5, 5...8, 8...10] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:22:50.370

```
def give_me_all_periods(period, paid_periods)
        p = period | paid_periods
        union = p.inject([]){|u,x| u = u|range_to_arr(x)}.sort
        ranges =[]
        union.each_cons(2){|a| ranges << Range.new(a[0],a[1]) }
        ranges

end

def range_to_arr(r)
        [r.first,r.last]
end 
```

# c# - 将 datetime2 数据类型转换为 smalldatetime 数据类型导致值超出范围。\r\n语句已终止

> ID：10443669
> 
> 赞同：5
> 
> 时间：2012-05-04T06:19:06.617
> 
> 标签：c#, asp.net-mvc, sql-server-2008

我制作了一个小型 MVC4 应用程序并在我的本地 SQL 2012 服务器上制作了数据库。“导入”了我 2012 年的数据，将其作为 sql 2008 的生产数据转移到我的廉价共享主机中。一切正常。对非 aspmembership 表进行了一些更改，并从 sql 2008 中删除了表并重新导入。不是出于某种原因我收到此错误

```
The conversion of a datetime2 data type to a smalldatetime data type resulted in an out-of-range value.\r\nThe statement has been terminated 
```

如果我尝试注册一个帐户。我尝试将所有 smalldatetimecolumns 更改为 datetime2 列，但由于某种原因，即使没有 smalldatetimes，也会出现相同的错误？

有没有人有任何想法？谢谢你。

编辑：未来的人-我不确定为什么要修复它，但是我在 SQL express 2008 而不是 SQL 2012 中重新创建了表，然后将它们移了过来。工作正常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-29T05:44:01.007

从错误的外观来看，您的数据库使用 SmallDateTime 作为日期类型。它的最小值是 1900-Jan-01。假设您的实体如下所示

```
 public class Game
  {
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid GameId { get; set; }

    [Required]
    public DateTime GameTime { get; set; }
  } 
```

您的 GameTime 值不可为空，因此当您不为其设置任何值时，它将始终是 DateTime.Min，即 0000-Jan-01。这超出了 SmallDateTime 的范围，但在 DateTime2 的范围内。因此 EF 将尝试将 DateTime2 SQL 类型传递给 SQL 服务器。因为您的数据库使用的是 SmallDateTime，所以您将收到问题中显示的错误。

要解决此问题，您有以下我能想到的选项：

*   使字段为空。（您必须始终检查您的输入日期是否在 SmallDateTime 范围内。）

*   或在 SQL Server 中将日期类型更改为 DateTime2

*   或在创建数据库时强制 EF 使用 DateTime2 数据类型。代码将如下所示。（这个方法应该在你的上下文类中。）

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity()
            .Property(t => t.GameTime )
            .HasColumnType("datetime2");
    } 
```

*   编写转换器助手来设置您的 DateTime 属性最小值以匹配应用程序中的 smalldatetime。

*   在数据库中编写一个触发器，将 DateTime2（从应用程序端，但在数据库端的 datetime2）转换为 smalldatetime。

希望我已经正确理解了您的问题，并且我的回答会有所帮助。

# testing - 我应该如何在 Selenium 中录制 Java Applet 的脚本？

> ID：10443671
> 
> 赞同：0
> 
> 时间：2012-05-04T06:19:13.577
> 
> 标签：testing, selenium

这是我想做的事情：

首先，我想在 Selenium for Java Applet (EditLive) 中录制脚本，然后将其转换为 TestNG，然后在 Eclipse 中运行。如果您知道其他一些用于录制 EditLive 并将其与 Selenium 集成的自动化工具，请告诉我。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T08:20:49.647

很抱歉，除了[Robot](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)课程，这使得实际做任何事情都变得有点困难，我认为这是不可能的。

使用任何其他[记录工具](https://www.google.com/search?q=record%20mouse)，您可以记录与它的交互，但您不能保存它并将其用作 TestNG 测试。但[也许我错了，实际上有人发明了一种可以将其脚本导出到 Java](https://www.google.com/search?q=record%20tool%20java%20robot)中的...

# mysql - 临时表列列表 (MySQL)

> ID：10443672
> 
> 赞同：3
> 
> 时间：2012-05-04T06:19:17.137
> 
> 标签：mysql, temp-tables

我需要在 MySQL 中获取一些临时表（MyISAM）的列表列，例如`number column`- `name column`。我需要知道具有特定名称的列数。事先，我不知道列数是多少 - 我正在使用带有一些变量的动态 sql 来创建临时表。

我无法使用`show columns...`，因为我无法使用此功能的结果。我不能使用`INFORMATION_SCHEMA.COLUMNS`，因为它不包含临时表的列。

一些想法？提前致谢！

# java - Android 上的振动器

> ID：10443676
> 
> 赞同：2
> 
> 时间：2012-05-04T06:19:28.723
> 
> 标签：java, android

我在 Stackoverflow 上阅读了很多关于这个问题的信息，但没有阅读帮助她解决我的问题。

在我的源代码中，我有这个。

```
vibretor  = (Vibrator) this.getSystemService(VIBRATOR_SERVICE);
vibretor.vibrate(600); 
```

在 AndroidManifeste.xml 我有权限

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

[我认为这没关系，因为我在http://developer.android.com](http://developer.android.com)上查找了它

但它根本不起作用:(所以你们中有人知道我怎样才能让它工作吗？

我的测试设备是：Eee Pad Transformer、三星 Galaxy S2 和三星 Galaxy Tab 10.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T05:48:53.653

问题解决了。

问题是，在android 4.0下，振动设置必须是

*触摸振动*

并不是

*铃声* 或 *通知*

然后它与我的代码一起工作。

```
vibretor  = (Vibrator) this.getSystemService(VIBRATOR_SERVICE);
vibretor.vibrate(600); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:29:03.413

```
public void vibrate(int duration)
              {
   Vibrator v = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);
   v.vibrate(duration);    
              }
vibrate(10000); 
```

# iphone - 从 NSCFString 到 NSNumber 的对话

> ID：10443679
> 
> 赞同：1
> 
> 时间：2012-05-04T06:19:50.413
> 
> 标签：iphone, nsstring, type-conversion, nsnumber

**我有以下作为 NSCFString 存储到 SQLite 中的数字**

* * *

**这些数字完美转换**

475602307163925662

1529228456639250520

**我正在转换这些**，`(NSNumber *) [myDictionary valueForKey:@"stringData"];` **并且它工作得很好**

* * *

**这些数字无法完美转换**

14154269406789154303

13207084142614401684

12870871772958895646

我想将这些 NSCFString 转换为 NSNumber。我尝试使用下面的代码并谷歌它，但没有得到我想要的确切解决方案。任何帮助都将不胜感激。

```
NSNumberFormatter *f=[[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *myNumber=[f numberFromString:[myDictionary valueForKey:@"stringData"]];
[f release]; 
```

但它会将我的号码转换为 9.45214212452152

我也尝试了其他一些方法，但它也不能很好地工作。

```
NSNumber *myNumber=[NSNumber numberWithLong:[myDictionary valueForKey:@"stringData"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:26:41.917

将一个对象转换为另一个对象（又名`(NSNumber *)`）不会**“**转换”它。它只是向编译器保证您正在使用**您不是**该类的对象。

某些数字完全失败的原因是它们太大而无法适应标准的 int/float/long 尺寸。而不是`NSNumber`，使用`NSDecimalNumber`- 的子类`NSNumber`（因此您仍然可以使用所有`NSNumber`方法）。它专为处理大量数据而设计：

`NSDecimalNumber *number = [NSDecimalNumber decimalNumberWithString:<your string object>];`

# android - 获取 Facebook 好友列表 - Android

> ID：10443680
> 
> 赞同：2
> 
> 时间：2012-05-04T06:19:59.757
> 
> 标签：android

我是 Facebook 与 android 集成的新手。我已经使用 facebook-android-SDK 登录了 Facebook。现在我想获取所有朋友的详细信息并在 ListView 中显示。我怎样才能做到这一点？

请帮我

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:36:44.503

使用以下代码获取好友列表：

```
Bundle params = new Bundle();
        params.putString("fields", "name, picture");
        JSONObject jsonFrends = Util.parseJson(facebook.request("me/friends", params)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T14:01:41.413

我建议按照有关[获取用户数据](https://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/)的教程进行操作，然后不要执行

```
 ...
if (state.isOpened()) {
    userInfoTextView.setVisibility(View.VISIBLE);

    // Request user data and show the results
    Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

        @Override
        public void onCompleted(GraphUser user, Response response) {
            if (user != null) {
                // Display the parsed user info
                userInfoTextView.setText(buildUserInfoDisplay(user));
            }
        }
    });
}
... 
```

使用[Request.executeMyFriendsRequestAsync](https://developers.facebook.com/docs/reference/android/3.0/Request#executeMyFriendsRequestAsync%28Session,%20GraphUserListCallback%29)它是 Request 类的一部分。

编辑：这还具有使用 Facebook Android SDK 解析响应的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T09:01:55.530

你可以这样做：

```
Using the graph API: https://graph.facebook.com/me/friends?access_token="your access_token" 
```

# java - 如何检查文本文件中域的实例数

> ID：10443682
> 
> 赞同：1
> 
> 时间：2012-05-04T06:20:05.837
> 
> 标签：java

我有一个包含域的文本文件

```
ABC.COM
ABC.COM
DEF.COM
DEF.COM
XYZ.COM 
```

我想从文本文件中读取域并检查有多少域实例。从文本文件中读取很容易，但我对如何检查域实例的数量感到困惑。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:22:53.327

按空格分割（字符串实例有方法`split`），遍历结果数组并使用`Map<String(domainName), Integer(count)>`- 当域在地图中时，比在地图中的计数增加 1，而不是 - 将域名放在地图中并将 1 设置为值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:25:23.540

更好的解决方案是使用 Map 将单词 Map 与频率进行映射。

`Map<String,Integer> frequency = new LinkedHashMap<String,Integer>();`

*   读取文件

    ```
    BufferedReader in = new BufferedReader(new FileReader("infilename"));
    String str;
    while ((str = in.readLine()) != null) {
        buildMap(str);
    }
    in.close(); 
    ```

*   构建地图方法：您可以[通过逐行读取它们](http://www.exampledepot.com/egs/java.io/readlinesfromfile.html)并用分隔符拆分（在您的案例空间中）来拆分文件中的 url。

    ```
    String [] words = line.split(" ");   
    for (String word:words){
        Integer f = frequency.get(word);
        if(f==null) f=0;
        frequency.put(word,f+1);
    } 
    ```

*   通过以下方式查找特定域：

    `frequency.get(domainName)`

参考：[字符串的计数频率](https://stackoverflow.com/a/7830712/607637)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:46:52.333

```
 List<String> domains=new ArrayList<String>(); // values from your file
    domains.add("abc.com");
    domains.add("abc.com");
    domains.add("xyz.com");
   //added for example
    Map<String,Integer> domainCount=new HashMap<String, Integer>();
    for(String domain:domains){
        if(domainCount.containsKey(domain)){
            domainCount.put(domain, domainCount.get(domain)+1);
        }else
            domainCount.put(domain, new Integer(1));

    }
    Set<Entry<String, Integer>> entrySet = domainCount.entrySet();
    for (Entry<String, Integer> entry : entrySet) {
        System.out.println(entry.getKey()+" : "+entry.getValue());
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T08:06:55.927

如果域未知，您可以执行以下操作：

```
// Field Declaration
private Map<String, Integer> mappedDomain = new LinkedHashMap<String, Integer>();
private static final List<String> domainList = new ArrayList<String>();
// Add all that you want to track
domainList.add("com");
domainList.add("net");
domainList.add("org");
...

// Inside the loop where you do a readLine
String[] words = line.split(" ");
for (String word : words) {

  String[] wordSplit = word.split(".");

  if (wordSplit.length == 2) {

    for (String domainCheck : domainList) {

      if (domainCheck.equals(wordSplit[1])) {

        if (mappedDomain.containsKey(word)) {
          mappedDomain.put(word, mappedDomain.get(word)+1);
        } else {
          mappedDomain.put(word, 1);
        }
      }
    }
  }
} 
```

> 注意：这适用于 xxx.xxx 之类的东西；如果您需要处理复杂的格式，则需要从 wordSplit 修改逻辑！

# php - PHP中长URL函数的短URL？

> ID：10443684
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:20:14.797
> 
> 标签：php

我试图在 PHP 中找到创建短 URL 到长 URL 转换器函数的正确方法。

我认为@yes123 在他的[Regex / php 代码函数中进行了一些检查，以检查 URL 是否是短 URL](https://stackoverflow.com/questions/9557116/regex-php-code-to-check-if-a-url-is-a-short-url)，但不太确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:21:20.860

[http://longurl.org/](http://longurl.org/)站点有一个 API，您可以从您的应用程序中调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:11:21.053

我已经解决了我的问题，我想。我创建了一个函数来读取标题并返回位置。我可能必须添加一些错误检查，但我必须调查如何。

```
<?php
$shortURL = "http://bit.ly/I2ClnP";
// Should return http://www.ericvalli.com/index.php?/stories/off-the-grid/
echo "Short URL: " . $shortURL . "<br>";

echo "Long URL: " . long_url($shortURL) . "<br>";

function long_url($url) {
  $longURL = get_headers($url, 7);
  return $longURL['Location'];
}
?> 
```

我尝试使用`stream_context_set_default($options)`；但该功能似乎不适用于所有服务器。

如果有人对如何进行错误检查有任何想法，那就太好了。

# postgresql - 从包含另一个函数的选择中创建一个函数

> ID：10443686
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:20:37.200
> 
> 标签：postgresql, stored-procedures

我需要创建一个从另一个函数输出整数的函数：

```
select schema.next_rowid('schema', 'table'); 
```

该`next_rowid()`函数始终输出一个整数。使用 PostgreSQL 9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:25:30.847

您是否阅读过有关如何定义函数的文档？

```
CREATE FUNCTION my_pretty_function() RETURNS int AS $$
    SELECT schema.next_rowid('schema', 'table');
$$ LANGUAGE 'sql'; 
```

# android - 在android中显示图像？

> ID：10443694
> 
> 赞同：0
> 
> 时间：2012-05-04T06:21:07.820
> 
> 标签：android

我正在处理学生详细信息申请。我将所有学生的详细信息存储在 sqlite 数据库中，并将我的 sqlite 文件保存在 assets 文件夹中。我还需要显示**学生照片**。因此，为此我**在 db 中保留了一个列并存储了学生的图像名称。**现在我在列表视图中显示学生姓名。单击学生姓名时，必须显示该特定学生的所有详细信息以及照片。如何显示特定的学生照片？我将学生照片保存在可绘制文件夹中。

我的代码：

学生.xml

```
<ImageView 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:id="@+id/yes" 
android:src="@drawable/photo"/> 
```

学生.java

```
Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.photo); 

ImageView Image1 = (ImageView) findViewById(R.id.yes); 

Image1.setImageBitmap(image ); 
```

请帮我解决这个问题....在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:27:21.730

您应该将学生照片 ID（可绘制 ID）存储在 DB 中。

当用户单击列表视图上的学生姓名时，从数据库中获取该学生照片可绘制 ID。

或者

将每个学生的 Photo drawable id 存储在 Listview li 中，当 Li 单击时获取该 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:45:31.963

从 sqlite 获取学生图像名称，然后这样做

其中 StudentImageName 是字符串

```
int resID = getResources().getIdentifier("Your Package Name:drawable/" + StudentImageName, null, null); 
ImageView Image1 = (ImageView) findViewById(R.id.yes); 
Image1.setImageResource(resID); 
```

并在设置为 imageview 之前检查图像是否存在于可绘制对象中

要么你也可以试试

```
int resID = getResources().getIdentifier("Your Package Name:drawable/" + StudentImageName, null, null); 
Bitmap image = BitmapFactory.decodeResource(getResources(),resID); 
ImageView Image1 = (ImageView) findViewById(R.id.yes); 
Image1.setImageBitmap(image) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:32:26.827

据我了解，您在 sqlite 文件中拥有所有学生详细信息，在可绘制文件夹中拥有学生姓名，那么您可以执行以下操作 1\. 为学生 2 提供唯一 ID。并为图像名称引用相同的 ID

然后从 Sqlite 文件中访问学生详细信息，然后显示相应的图像。您可以制作一系列可绘制资源以方便参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T07:11:23.417

在数据库中插入学生数据时包括照片。您可以通过将位图转换为字节数组来做到这一点。

```
Bitmap image = BitmapFactory.decodeResource(getResources(),R.drawable.photo); 
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

（您的图像列应该接受 BLOB 作为字段类型）然后，每当您想再次显示图像时，从数据库中检索字节数组，然后将其转换为位图，以便您可以在 ImageView 中显示它

位图位图 = BitmapFactory.decodeByteArray(byteArray , 0, byteArray.length);

您可以查看此链接以获取有关“如何在 Android 中将图像数据插入到 sqlite 数据库以及如何将其检索回来”的更多信息 [http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data -to-sqlite.html](http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:25:27.630

```
<ImageView 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:id="@+id/yes" 
android:src="@drawable/photo"/> 

Drawable d = getResources().getDrawable(R.drawable.photo);
Bitmap bitmap = ((BitmapDrawable) d).getBitmap();
ImageView Image1 = (ImageView) findViewById(R.id.yes); 
Image1.setImageBitmap(bitmap); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T06:27:37.790

> 我将学生照片保存在可绘制文件夹中。

将 Background Drawable 设置为您的 Imageview。

```
 ImageView im =(ImageView)findViewById(R.id.imageview);
  im.setBackgroundDrawable(R.drawable.photo); 
```

# c# - ffmpeg c#asp视频转换

> ID：10443700
> 
> 赞同：0
> 
> 时间：2012-05-04T06:21:29.910
> 
> 标签：c#, asp.net, video, ffmpeg

> 我正在尝试将一个 flv 视频转换为 mp4 视频。为什么以下代码会导致错误？它给出了“没有进程与此对象关联”的异常。参数

`"Path_FFMPEG"="E:\\Arun Kumar\\Main Project\\Advertisement Demo\\Advertisementdemo\\Advertisementdemo\\ffmpeg\\bin\\ffmpeg.exe" and "strParam"="-i E:\\Arun Kumar\\Main Project\\Advertisement Demo\\Advertisementdemo\\Advertisementdemo\\Videos\\cars1.flv -same_quant E:\\Arun Kumar\\Main Project\\Advertisement Demo\\Advertisementdemo\\Advertisementdemo\\Videos\\ConvertedFiles\\cars1.mp4"`

```
Process ffmpeg = new Process();
ProcessStartInfo ffmpeg_StartInfo = new ProcessStartInfo(Path_FFMPEG, strParam);
ffmpeg_StartInfo.UseShellExecute = false;
ffmpeg_StartInfo.RedirectStandardError = true;
ffmpeg_StartInfo.RedirectStandardOutput = true;
ffmpeg.StartInfo = ffmpeg_StartInfo;
ffmpeg_StartInfo.CreateNoWindow = true;
ffmpeg.EnableRaisingEvents = true;
ffmpeg.Start();
ffmpeg.WaitForExit();
ffmpeg.Close();
ffmpeg.Dispose();
ffmpeg = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-19T19:34:48.730

试试这个代码（假设你的 mp4 被命名为 video）：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.StartInfo.FileName = //PHYSICAL path to ffmpeg (use \\ instead of \);
proc.StartInfo.Arguments = "-i video.flv video.mp4
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.CreateNoWindow = true;
proc.StartInfo.RedirectStandardOutput = false;
proc.Start();
proc.WaitForExit();
proc.Close(); 
```

# linux - 线缓冲猫

> ID：10443704
> 
> 赞同：1
> 
> 时间：2012-05-04T06:21:40.910
> 
> 标签：linux, line, cat

有没有办法做线缓冲猫？例如，我想看一个 UART 设备，我只想在有整行时看到它的消息。我可以做一些类似的事情：

```
cat --line-buffered /dev/crbif0rb0c0ttyS0 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:24:00.347

不，但是 GNU grep`--line-buffered`可以做到这一点。只需搜索每行都有的内容，例如`'^'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:26:56.463

你也可以在这里使用 bash 来发挥你的优势：

```
cat /dev/crbif0rb0c0ttyS0 | while read line; do echo $line; done 
```

由于该`read`命令一次读取一行，因此它将执行`cat`不执行的行缓冲。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:37:51.467

以无操作行缓冲模式将其通过 perl 管道传输：

```
perl -pe 1 /dev/whatever 
```

# java - JSF sessionScope中managedBean的一个字段

> ID：10443711
> 
> 赞同：0
> 
> 时间：2012-05-04T06:22:13.827
> 
> 标签：java, jsf, managed-bean

我们可以将整个 bean 放在 sessionScope 中。

```
<managed-bean>
  <managed-bean-name>managedBeanList</managed-bean-name>
  <managed-bean-class>com.org.SomeMBean</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope> 
```

但是有什么像我们只能放在`a field of that managed bean`sessionScope 中的吗？

像...

```
public class SomeMBean{

public String mySessionScopeVariable; // Is there any way only this field will be in sessionscope continusly and not whole bean.

//getter setter of that variable.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:46:57.657

不，这是不可能的。

您应该在单独的会话范围 bean 中分离该字段，并使用`@ManagedProperty`它来将其注入到您的范围更窄的 bean 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:40:03.423

我不明白怎么做。我不是 JSF 方面的专家，但要访问 ManagedBean 或任何 bean 中的属性，就需要 bean，因为没有 bean，该属性就无法存在。如果您认为托管 bean 使会话大小膨胀，请将重变量设置为 null 以节省内存。但除此之外，我看不到任何其他方式。

# ios - 从 UITableView 中设置标题

> ID：10443713
> 
> 赞同：0
> 
> 时间：2012-05-04T06:22:29.510
> 
> 标签：ios, uitableview, navigation

我目前正在开发一个带有 3 个选项卡的简单应用程序，第一个选项卡是 UITableViewController，另外两个是 UIViewControllers。

现在从两个 UIViewControllers 内部，我可以设置 self.title 并且导航栏的标题会改变。但是如果我从 UITableViewController 内部尝试这个，这不起作用，这是为什么呢？

我也在尝试为导航栏设置自定义背景，在查看了一些教程后，我发现这应该可以，但实际上并没有

```
UIImage *image = [UIImage imageNamed:@"bgNavigationBar.png"];
[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:04:24.380

```
self.navigationItem.title=@"Your Title"; 
```

应该可以，只要把它放进去

```
- (void)viewDidLoad {
} 
```

UITableViewController 的

# android - 如何从 andengine 中的 Sprite 获取像素的颜色/alpha？

> ID：10443716
> 
> 赞同：2
> 
> 时间：2012-05-04T06:22:33.810
> 
> 标签：android, andengine

如何在不创建任何额外位图的情况下从 andengine 中的 Sprite 获取像素的颜色/alpha？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T07:20:18.257

我通过使用此功能解决了这个问题

```
private void loadObjectsMask()
    {
        InputStream in = null;
        Bitmap maskForObjects=null;
        try {
            final BitmapFactory.Options decodeOptions = new BitmapFactory.Options();
            decodeOptions.inPreferredConfig = Bitmap.Config.ARGB_4444;
            in = GameActivity.this.getAssets().open("images/" + BACKGROUND_PATH + getObjectImgFile());
            maskForObjects = BitmapFactory.decodeStream(in, null, decodeOptions);
        } catch (final IOException e) {

        } finally {
            StreamUtils.close(in);
        }
        if (maskForObjects != null)
        {
            objectsMask=new byte[maskForObjects.getWidth()][maskForObjects.getHeight()];
            for(int pw=0;pw<maskForObjects.getWidth();++pw)
            {
                for(int ph=0;ph<maskForObjects.getHeight();++ph)
                {
                    objectsMask[pw][ph]=(byte)(Color.alpha(maskForObjects.getPixel(pw, ph))==0?0:1);
                }
            }
            maskForObjects.recycle();
            System.out.printf("Bitmap size %d %d\n", maskForObjects.getWidth(),maskForObjects.getHeight());
        }
        else System.out.printf("Bitmap size error\n");
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T08:45:51.870

看看这个方法，这个方法是用来作用在每个像素上的

```
 public Bitmap invert(Bitmap src) {
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            // get color on each channel
            A = Color.alpha(pixel);
            R = Color.red(pixel);
            G = Color.green(pixel);
            B = Color.blue(pixel);
            // set new pixel color to output image
            bmOut.setPixel(x, y, Color.argb(A, 255-R, 255-G, 255-B));
        }
    }

    // return final image
    return bmOut;
} 
```

转换灰度

```
public static Bitmap toGrayscale(Bitmap bmpOriginal)
        {        
            int width, height;
            height = bmpOriginal.getHeight();
            width = bmpOriginal.getWidth();    

            Bitmap bmpGrayscale = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
            Canvas c = new Canvas(bmpGrayscale);
            Paint paint = new Paint();
            ColorMatrix cm = new ColorMatrix();
            cm.setSaturation(0);
            ColorMatrixColorFilter f = new ColorMatrixColorFilter(cm);
            paint.setColorFilter(f);
            c.drawBitmap(bmpOriginal, 0, 0, paint);
            return bmpGrayscale;
        } 
```

# java - 使用光标适配器在列表中添加项目

> ID：10443725
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:23:55.773
> 
> 标签：java, android

我有一个listView，在其中我用customCursorAdapter 即CoordinatorTag（如（Home，Office，Factory）等）从Coordinator Table 绑定了一个表的列。但是有了这些标签，我还希望最后在名为ALL 的列表中添加一个额外的项目。先生，我该怎么做，请帮助我。

感谢 Om Parkash

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:29:20.183

您可以使用`addHeaderView`或`addFooterView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:31:13.443

如果该项目位于列表的末尾，您可以为其使用页脚视图。使用`addFooterView(View v, Object data, boolean isSelectable)`. 确保在调用 listView 之前调用它`setAdapter()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:32:30.800

是的，您可以使用 addFooterView 轻松完成。

```
lv.addFooterView(bottom_layout, null, false); 
```

其中 lv 是您要在其中添加的列表视图，而 bottom_layout 是您要添加的视图或布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:33:54.000

如果要向数据集中添加项目，请考虑使用 MatrixCursor 及其方法 newRow()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:42:49.493

看看这个......

我希望这个例子对你有帮助

创建 /res/layout/row.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical">
<TextView
android:id="@+id/listtitle"
android:textSize="22px"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
<TextView
android:id="@+id/listpubdate"
android:textSize="10px"
android:layout_width="fill_parent"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

现在创建一个在 ListView 中使用光标适配器的类

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.List;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class AndroidRssReader extends ListActivity {

private RSSFeed myRssFeed = null;

public class MyCustomAdapter extends ArrayAdapter<RSSItem> {

 public MyCustomAdapter(Context context, int textViewResourceId,
   List<RSSItem> list) {
  super(context, textViewResourceId, list);
 }

 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
  // TODO Auto-generated method stub
  //return super.getView(position, convertView, parent);

  View row = convertView;

  if(row==null){
   LayoutInflater inflater=getLayoutInflater();
   row=inflater.inflate(R.layout.row, parent, false);
  }

  TextView listTitle=(TextView)row.findViewById(R.id.listtitle);
  listTitle.setText(myRssFeed.getList().get(position).getTitle());
  TextView listPubdate=(TextView)row.findViewById(R.id.listpubdate);
  listPubdate.setText(myRssFeed.getList().get(position).getPubdate());

  if (position%2 == 0){
   listTitle.setBackgroundColor(0xff101010);
   listPubdate.setBackgroundColor(0xff101010);
  }
  else{
   listTitle.setBackgroundColor(0xff080808);
   listPubdate.setBackgroundColor(0xff080808);
  }

  return row;
 }
}

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      try {
  URL rssUrl = new URL("http://www.gov.hk/en/about/rss/govhkrss.data.xml");
  SAXParserFactory mySAXParserFactory = SAXParserFactory.newInstance();
  SAXParser mySAXParser = mySAXParserFactory.newSAXParser();
  XMLReader myXMLReader = mySAXParser.getXMLReader();
  RSSHandler myRSSHandler = new RSSHandler();
  myXMLReader.setContentHandler(myRSSHandler);
  InputSource myInputSource = new InputSource(rssUrl.openStream());
  myXMLReader.parse(myInputSource);

  myRssFeed = myRSSHandler.getFeed();

 } catch (MalformedURLException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (ParserConfigurationException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (SAXException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }

 if (myRssFeed!=null)
 {
  TextView feedTitle = (TextView)findViewById(R.id.feedtitle);
  TextView feedDescribtion = (TextView)findViewById(R.id.feeddescribtion);
  TextView feedPubdate = (TextView)findViewById(R.id.feedpubdate);
  TextView feedLink = (TextView)findViewById(R.id.feedlink);
  feedTitle.setText(myRssFeed.getTitle());
  feedDescribtion.setText(myRssFeed.getDescription());
  feedPubdate.setText(myRssFeed.getPubdate());
  feedLink.setText(myRssFeed.getLink());

  MyCustomAdapter adapter =
   new MyCustomAdapter(this, R.layout.row, myRssFeed.getList());
  setListAdapter(adapter);

 }
  }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
 // TODO Auto-generated method stub
 Intent intent = new Intent(this,ShowDetails.class);
 Bundle bundle = new Bundle();
 bundle.putString("keyTitle", myRssFeed.getItem(position).getTitle());
 bundle.putString("keyDescription", myRssFeed.getItem(position).getDescription());
 bundle.putString("keyLink", myRssFeed.getItem(position).getLink());
 bundle.putString("keyPubdate", myRssFeed.getItem(position).getPubdate());
 intent.putExtras(bundle);
      startActivity(intent);
}
} 
```

# wpf - WPF 文本框中的标签编辑

> ID：10443728
> 
> 赞同：26
> 
> 时间：2012-05-04T06:24:00.897
> 
> 标签：wpf, textbox

我想实现一个允许我编辑标签的自定义文本框。Hotmail 的“收件人”文本框是我能想到的最好的例子：

![在此处输入图像描述](../Images/77c027a4a56884f9e667d1805538876b.png)

Facebook 的“To”也实现了相同的概念：

![在此处输入图像描述](../Images/e604947758732cafa7f3f912e9ffa5db.png)

哦，是的，StackOverflow 也可以标记问题:)

有没有人有在 WPF 中构建类似东西的经验？我应该采取的第一步是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-07T19:23:16.860

我相信这个 Tokenizing 控件可以完成您正在寻找的大部分内容：

[http://blog.pixelingene.com/2010/10/tokenizing-control-convert-text-to-tokens/](http://blog.pixelingene.com/2010/10/tokenizing-control-convert-text-to-tokens/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T07:13:03.163

我会尝试以下方法：

*   实现一个`TagEditor`，它具有编辑单个标签的功能（基于自动完成文本框，一旦现有标签被识别或编辑结束，该文本框就会与 TextBlock 交换）

*   创建一个使用`TagEditor`

*   创建一个使用 DataTemplate 的 ItemsControl

将其分解为三个挑战，其中只有第一个有点棘手，但可以使用给定的关键字和 stackoverflow 解决；-)

# spotify - Spotify 应用已死

> ID：10443734
> 
> 赞同：0
> 
> 时间：2012-05-04T06:24:27.447
> 
> 标签：spotify

正如其他人所发布的那样，我的 Spotify 应用程序（正在开发中）在 Spotify 更新后死亡。我无法再访问它，因为它会引发 metadataFailed 错误。我尝试使用新方法“spotify:app:application-identifier-in-manifest”进行访问，但它不起作用。我已经在清单中设置了 BundleIdentifier 和 BundleVersion。

此外，我已经在具有多个不同开发者帐户的多台不同计算机上尝试了该应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:41:42.007

Just to be clear, you need to set the `BundleIdentifier` and `BundleVersion` keys, restart Spotify then load it with your identifier. So, if you set your `BundleIdentifier` to `awesome-app`, you'd load it with `spotify:app:awesome-app`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T01:41:51.437

我今天遇到了一个类似的问题，这是因为我的 manifest.json 没有正确解析。

确保在提交和调试之前通过 lint [http://jsonlint.com/运行 json 文件。](http://jsonlint.com/)节省了我一大堆剃牦牛的时间。

# api - 如何在drupal中使用unapi进行书目

> ID：10443737
> 
> 赞同：0
> 
> 时间：2012-05-04T06:24:35.837
> 
> 标签：api, drupal-6, citations

我是 unapi 的新手 .. 任何人都可以让我知道如何将 unapi 与 drupal 一起用于书目。完成此任务的步骤是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:32:49.897

按照[http://unapi.info/specs/](http://unapi.info/specs/)中描述的步骤操作。这很简单。在 PHP 中实现 unAPI 是微不足道的。您只需要为每个文档打印一个引文（BibTeX 等）。

另请参阅：[从数据库记录生成书目文件（BibTeX、RIS 等）](https://stackoverflow.com/questions/12824325/generating-bibliographic-files-bibtex-ris-etc-from-database-records)

# django - Tastypie 清理输入？

> ID：10443753
> 
> 赞同：3
> 
> 时间：2012-05-04T06:25:40.750
> 
> 标签：django, tastypie

使用 Tastypie 清理用户输入的最有效方法是什么？现在，如果用户输入类似**hi**的内容，HTML 标签会被保存，所以当它显示时，文本会显示为粗体。除了更改每个资源的 obj_create 之外，我将如何清理所有输入？

另外，由于我是网络安全的新手，我是否也应该在前端清理用户的输入？我不确定是否应该在将 POST 请求发送到tastepie API 之前清理输入，或者是否应该在tastepie 处理输入时清理输入？

编辑：我确实发现我可以通过使用 <%- %> 而不是 <%= %> 显示数据来在我的下划线模板中转义 HTML。为什么下划线默认不这样做？我觉得这是一个很大的安全风险。如果我不小心忘记在某个地方这样做，那我就完蛋了。

我认为以上解决了前端安全问题，但后端呢？有没有办法可以查看我是否容易受到 SQL 注入的影响？当我执行 POST/PUT 请求时，tastepie 会清理输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:01:46.787

Never, Ever, Ever 将不受信任的用户输入呈现给浏览器。您在浏览器中看到它的唯一方法是`|safe`在输出过滤器上。不要那样做。也不要在模型中将属性设置为 mark_safe=True 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:10:50.020

我在资源中添加了一个脱水方法，该方法在访问浏览器的过程中覆盖了危险字段，如下所示：

```
def dehydrate(self, bundle):
    bundle.data['field_to_sanitize'] = bundle.data['field_to_sanitize'].replace("&", "&amp;").replace("<", "&lt;").replace(">", "&gt;").replace("'", "&#39;").replace('"', "&quot;")
    return bundle 
```

现在，这不是最好的解决方案，但它会逃脱许多最危险的实体。如果你有一个方便的 htmlescape 函数，你可以使用它。

# iphone - 撤消在子视图控制器中所做的所有更改

> ID：10443754
> 
> 赞同：9
> 
> 时间：2012-05-04T06:25:48.817
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext, nsundomanager

有两个实体：作者和书籍。Author 具有属性 authorName 和一对多关系书籍。书有几个属性和一个关系作者。有一个视图控制器（VCAuthor）来编辑作者对象。子视图控制器（VCBook）用于编辑作者的书籍。只有一个托管对象上下文。在 VCBook 类中，我将 undomanager 分组如下

```
-(void)viewDidLoad
{    
    NSUndoManager *anUndoManager = [[NSUndoManager  alloc] init];
    [self.book.managedObjectContext setUndoManager:anUndoManager];
    [anUndoManager release];
    [self.book.managedObjectContext.undoManager beginUndoGrouping];
}

-(void)cancelAction:(id)sender
{
    NSLog(@"%@", self.author.authorName);
    [self.book.managedObjectContext.undoManager endUndoGrouping];
    [self.book.managedObjectContext.undoManager undoNestedGroup];
    self.book.managedObjectContext.undoManager = nil;
    NSLog(@"%@", self.author.authorName);    
    [self dismissModalViewControllerAnimated:YES];  
} 
```

cancelAction 链接到 VCBook 上的取消按钮，该按钮用于撤消在 VCBook 中所做的所有更改。

问题就在这里：首先，在 VCAuthor 中，我在 UITextfiled authorNameTextField 中编辑从 Obama 到 Big Obama 的 authorName，并通过 - (void)viewWillDisappear:(BOOL)animated 中的 author.authorName = authorNameTextField.text 将其保存到 MOC {} 方法。然后我进入子视图控制器 VCBook 编辑作者的书籍，然后单击取消按钮返回 VCAuthor。我发现 authorName 仍然是 Obama，这意味着 authorName 的预期更改已被撤消。authorName 的变化根本不在 undo 组中，为什么会发生这种情况呢？附言。当然，当我回到 VCAuthor 时，我会重新加载数据。我只是在撤消之前和之后 NSLog authorName。撤消前authorName为改过的大奥巴马，撤消后为奥巴马

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T19:22:23.547

有几件事要考虑。首先，在这种情况下，我会使用单独的 MOC 而不是撤消管理器。也就是说，我会做这样的事情（假设ARC - 如果需要，你可以做映射）......

您必须有一些其他代码通过 setter 将这本书提供给 VC，因为您在 viewDidLoad 中访问它。我会将 viewDidLoad 更改为这样的...

```
-(void)viewDidLoad
{
    self.managedObjectContext = [[NSManagedObjectContext alloc] init];
    self.managedObjectContext.parentContext = self.book.managedObjectContext;
    // We are in the main thread, so we can safely access the main MOC
    // Basically, move our object pointer to book into our local MOC.
    NSError * error = nil;
    Book *book = [self.managedObjectContext existingObjectWithID:self.book.objectID error:&error];
    // handle nil return and/or error
    self.book = book;
    // Now, your access to book will be in the local MOC, and any changes
    // you make to the book or book.author will all be confined to the local MOC.
} 
```

现在，你所要做的就是打电话

```
[self.managedObjectContext save:&error]; 
```

在您的 saveAndDismiss 操作中。如果您不调用 save，则不会保存任何更改，它们都会自动消失。

**编辑**

请注意，上面的“保存”只是将对象状态移动到父上下文中。因此，“主” MOC 现在具有来自“子”的更改，但尚未将任何更改保存到磁盘。

# jquery-mobile - 在 jQuery mobile 的 SplitView 中动态加载页面

> ID：10443757
> 
> 赞同：1
> 
> 时间：2012-05-04T06:26:22.463
> 
> 标签：jquery-mobile, dynamic-data, ipad

我是这个 jquery 移动平台的新手。

我的应用程序中有一个拆分视图...如左页（20%）和右页（80%）。

我在左侧面板中有来自数据库的状态，当单击其中一个状态时......右侧面板中的相应信息......（信息也来自数据库）。

现在的问题是......当我第一次点击任何状态时......它的信息会显示在右侧面板上......但是当我第二次点击任何状态时......之前的状态信息只会保留。 .当我单击其他状态时，右侧面板没有刷新...

提前致谢....

```
$('#main').live('pageshow', function(event, ui) {
    console.log("States show");
    onDeviceReadyStates();

});
    $('#content').live('pageshow', function(event, ui) {
    console.log("Content show");
    onDeviceReadyContent(sid);
    console.log("contentsid: " + sid);
}); 
```

使用路由器插件....传递参数....

# ios - 我们在哪里可以看到 Mac OS X 中的 MySql 数据库表和存储值？

> ID：10443759
> 
> 赞同：0
> 
> 时间：2012-05-04T06:26:38.003
> 
> 标签：ios, mysql, iphone, database

我正在为 Apple Push Notification 开发一个简单的 iPhone 应用程序。我点击了以下链接[http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2](http://www.raywenderlich.com/3525/apple-push-notification-services-tutorial-part-2)。我已经从这里[http://dev.mysql.com/downloads/mysql/5.1.html#macosx-dmg](http://dev.mysql.com/downloads/mysql/5.1.html#macosx-dmg)下载了 MySql并下载到我的 mac。而且`RayWenderlich gave us a php and sql file for the project`我已经下载了`PushChatServer folder from the above raywenderlich site`。我找到了这个文件夹`database.sql, api.sql and push.sql`。现在我想检查输入的值是否存储在数据库表中。

我如何以及在哪里可以检查 Mac OS X v10.6.8 中的表格和存储值？谁能帮我找到解决方案？提前致谢。

这是表的详细信息

```
api.sql = CREATE TABLE active_users
database.sql = CREATE DTATABASE pushchat DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
push.sql = CREATE TABLE push_queue 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:34:56.073

您可以使用该软件下载一个软件，您可以查看所有数据库或表数据下载 sqlite manager dmg 文件并安装在您的 Mac 中。

[http://sqlitemanager.en.softonic.com/mac](http://sqlitemanager.en.softonic.com/mac)

# core-graphics - 给定 shadowRadius 的 CALayer 中添加了多少点/像素？

> ID：10443763
> 
> 赞同：4
> 
> 时间：2012-05-04T06:26:52.127
> 
> 标签：core-graphics, calayer, gaussian

如果. `CALayer`_ `UIImage`_`CALayer`

这一切都很好，除了我无法确定（除了凭经验）`shadowRadius`和点/像素之间的关系可能是什么。

也就是说，我创建了一个`CALayer`具有透明背景和包含目标`CALayer`阴影的膨胀大小的父级。然后我渲染 parent `CALayer`。

根据经验，我似乎可以通过将父图层的大小设置为`{width, height}`目标图层的`size + 3.75 * shadowRadius.{width,height}`.

这有点奇怪和骇人听闻，我想知道真正的答案/推导。

似乎模糊是高斯模糊，所以我想这将以某种方式参与答案......

使用 2 * shadowRadius 清楚地剪辑：

![在此处输入图像描述](../Images/7a90a067faeefb97d73ff28685896bd5.png)

使用 5 * shadowRadius 显然太大了：

![在此处输入图像描述](../Images/f9def68f11e82703786cebec0de0cc34.png)

并且 3.75 * shadowRadius 似乎是正确的（但为什么？！）：

![在此处输入图像描述](../Images/2ac82c137a1cf855d8dda2ee7819ec74.png)

# objective-c - 在结构上将点语法转换为括号语法

> ID：10443771
> 
> 赞同：4
> 
> 时间：2012-05-04T06:27:27.417
> 
> 标签：objective-c

我有一个 CGSize 的属性：

```
@property (nonatomic) CGSize descriptionSize; 
```

'

```
@synthesize descriptionSize = _descriptionSize; 
```

我可以通过点语法访问高度：

```
self.descriptionSize.height = 35; 
```

但这如何与括号语法一起使用？

```
[self setDescriptionSize:???]; 
```

对我来说看起来很愚蠢，但我无法得到线索。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:45:28.217

这是属性点符号的缺陷之一：self.descriptionSize.height 中的这两个点看起来相同，但含义却截然不同。第一个是映射到“get descriptionSize”方法的属性访问器，但第二个是老式结构引用。第一个点返回一个 CGSize***标量***，而不是指向对象中大小值的指针。当第二个点在返回的 CGSize 中设置高度时，它是在堆栈上设置一个值，而不是更改对象中的值。这就是你必须这样做的方式：

```
CGSize size = self.descriptionSize;
size.height = 35;
self.descriptionSize = size; 
```

~~…或没有属性~~点符号的等价物：

```
CGSize size = [self descriptionSize];
size.height = 35; // we still use the dot here: size is a struct not an object
[self setDescriptionSize:size]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T06:38:47.470

的实现`descriptionSize`将返回结构的*副本*，`CGSize`因此您不能直接使用它并希望它能够工作。您需要做的是获取整个`CGSize`结构，对其进行修改，然后将其传回：

```
CGSize size = [self descriptionSize];
size.height = 35;
[self setDescriptionSize:size]; 
```

但是，鉴于您正在处理的属性`self`并且该属性不是*object*，这需要内存管理，修改大小的最有效方法是：

```
_descriptionSize.height = 35; 
```

但是，如果：

1.  对象不是`self`。
2.  您已经手动编写了 setter 方法来做一些改变大小的副作用（例如，为了自动更新视图而使视图的位无效）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T07:02:09.500

点语法有两种不同的含义：一个结构引用（CGSize 是一个 C 结构），或者一个 Objective-C 消息发送。

理论上，如果你有一个类似的方法`- (void)doSomething;`，你可以这样调用它`myObject.doSomething; //bad style`：不要这样做。除了获取或设置值之外，点语法不适用于调用实际执行操作的方法（尽管语言或 IDE 中没有任何内容会阻止您）。

合成属性会创建访问器方法：`- (myType)myProperty`和`- (void)setMyProperty:(myType)newValue`. 在这里，点语法允许您以普通方式访问 getter（因为 getter 是一个普通的 Objective-C 方法），并且对于 setter 有一个特殊情况：`myObject.myProperty = newValue`被翻译为`[myObject setMyProperty:newValue]`.

这意味着您可以在点语法和 Objective-C 样式的属性消息发送语法之间切换（以及技术上所有其他无参数的 Objective-C 方法发送），但您*必须*使用点语法来访问结构成员。结构不是对象，它们现在知道方法。

# mysql - MYSQL 5.5 嵌套存储过程错误处理

> ID：10443787
> 
> 赞同：3
> 
> 时间：2012-05-04T06:28:45.223
> 
> 标签：mysql

我正在使用 MYSQL 5.5，如何使用嵌套存储过程进行错误处理。几乎大多数存储过程都会截断表，插入到 select * from 并在重复键更新时插入。

如果任何嵌套存储过程有任何问题，我想捕获该错误或告诉我该特定存储过程中发生了错误。

现在，由于嵌套存储过程，我无法知道异常发生在哪个存储过程中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T22:45:44.140

在每个存储过程中，您可以[`DECLARE ... HANDLER`](http://dev.mysql.com/doc/en/declare-handler.html)针对您感兴趣的错误，让它们将状态信息写入临时表；该表随后可以由其他（外部）存储过程读取，以确定引发了哪些错误（如果有）。

# java - 使用不同的 JDK 编译相同的代码会产生相同的字节码吗？

> ID：10443788
> 
> 赞同：5
> 
> 时间：2012-05-04T06:28:46.833
> 
> 标签：java

如果同一个java文件被不同的Java编译器编译，字节码会不会一样？没有对源 Java 文件进行任何更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:39:12.330

> 如果同一个java文件在不同的JVM上编译，字节码会不会一样？没有对源 Java 文件进行任何更改。

您的意思并不完全清楚，但答案很可能是“否”。

*   不同的 JDK 会有不同的 Java 编译器，它们可能会为相同的源代码生成不同的字节码。javac 编译器随着时间的推移而发展。

*   Java 的不同主要版本通常会发出符合不同版本的类文件规范的类文件。

*   即使您将自己限制为一个 JDK 安装，在同一源文件上运行两次编译器也会产生不同的 .class 文件。（类文件包括一个编译时间戳......）

答案可能是“是”的唯一方法是，如果您在比较中忽略编译时间戳和（可能）其他元数据，您正在为相同的目标版本发出字节码，并且 JDK 版本足够接近 Java编译器字节码生成在版本之间没有变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:36:01.393

**一点也不。**

PS：可能你的意思是“JDK”，而不是“JVM”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T06:44:23.537

字节码由**Java 编译器**生成，它**不是特定 JVM 实现的一部分**。字节码是 JVM 的执行引擎执行的中间语言的名称，所以 JVM 不会产生而是运行这段代码。JVM 可以做的是将字节码编译成可以不同的机器码。该编译器称为即时 (JIT) 编译器。

然而，可能导致不同字节码的是不同的 Java 编译器 - 主要的编译器在此处列出：[http ://en.wikipedia.org/wiki/Java_compiler](http://en.wikipedia.org/wiki/Java_compiler)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T06:34:50.503

没有。字节码会因您在哪个编译器中使用而有所不同。但仅在规范范围内略有不同。我可能错了，但据我所知，这些变化主要与不同 JDK 中的 javac 优化方式有关。无论如何，字节码是 JVM 可互操作的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:37:02.097

它是 JVM 特定的，以及 JVM 驻留在哪个平台（OS）上。在每种情况下都有些不同。我不知道在同一个 jvm 上使用同一个 javac 两次编译同一个源。有人知道吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T06:42:03.147

不，每个新的 JDK。一般Java编译器在编译的时候也会更新做一些优化，不同的Java版本编译时字节码会有所不同。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-04T06:32:39.937

是的，但是：如果您使用诸如此类的软件包，您可能会遇到麻烦`com.sun`，因为它们是专有的。
此外，前段时间我偶然发现 Object(In|Out)putStream 在 Sun JDK 和 IBM JDK 中的工作方式不同，但是，也许我在那里做错了，所以我不确定。
证明：[http](http://docs.oracle.com/javase/specs/) ://docs.oracle.com/javase/specs/ - Java 虚拟机规范，Java SE 7 版
更新：抱歉。实际上，字节码并不完全相同，但所有经过认证的 JVM 都会理解它并给出相同的结果。

# asp.net-mvc-3 - 如何在 View MVC3 ASP.NET 中查看多个表

> ID：10443789
> 
> 赞同：1
> 
> 时间：2012-05-04T06:28:49.113
> 
> 标签：asp.net-mvc-3, razor

我正在尝试使用 MVC3 Razor 中的 LINQ 从数据库中选择多个表。为了在视图中查看多个表中的多个数据，我需要对我的代码进行哪些更改？

这是我的模特

```
public class DailyAttendance
{
    [Key]
    public string pnp { get; set; }
    public string student_id { get; set; }
    public string mth_yr_id { get; set; }
    public string D01 { get; set; }
    public string D02 { get; set; }
} // and so on

public class TitasDb : DbContext
{
    public DbSet<DailyAttendance> DailyAttendance { get; set; }
    public DbSet<MonthYear> MonthYear { get; set; }
    // and so on

} 
```

这就是我在控制器中使用 LINQ 的方式

```
public class AttendanceController : Controller
{
    TitasDb _attendanceModel = new TitasDb();

    public ActionResult Index()
    {
        var model = from s in _attendanceModel.Student
                    join ssc in _attendanceModel.StudentSchoolClass on s.student_id equals ssc.student_id
                    join sc in _attendanceModel.SchoolClass on ssc.school_class_id equals sc.school_class_id
                    join da in _attendanceModel.DailyAttendance on s.student_id equals da.student_id
                    join my in _attendanceModel.MonthYear on da.mth_yr_id equals my.mth_yr_id
                    where my.month_id == "M05"
                    where sc.teacher_id == "T1000001"
                    select new { DailyAttendance = da, Student = s };

        return View(model);
    }
} 
```

这就是我尝试查看数据的方式

```
@model IEnumerable<titas.Models.DailyAttendance>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.student_id)
    <td>
</tr>
} 
```

我得到的错误是

```
The model item passed into the dictionary is of type 'System.Data.Entity.Infrastructure.DbQuery`1[<>f__AnonymousType5`2[titas.Models.DailyAttendance,titas.Models.Student]]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[titas.Models.DailyAttendance]'. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T06:37:37.887

与每个 ASP.NET MVC 应用程序一样，定义一个视图模型，该模型将包含您需要在视图中使用的所有信息：

```
public class MyViewModel
{
    public DailyAttendance DailyAttendance { get; set; }
    public Student Student { get; set; }
} 
```

然后让您的控制器操作将此视图模型返回到视图：

```
public class AttendanceController : Controller
{
    TitasDb _attendanceModel = new TitasDb();

    public ActionResult Index()
    {
        var model = from s in _attendanceModel.Student
                    join ssc in _attendanceModel.StudentSchoolClass on s.student_id equals ssc.student_id
                    join sc in _attendanceModel.SchoolClass on ssc.school_class_id equals sc.school_class_id
                    join da in _attendanceModel.DailyAttendance on s.student_id equals da.student_id
                    join my in _attendanceModel.MonthYear on da.mth_yr_id equals my.mth_yr_id
                    where my.month_id == "M05"
                    where sc.teacher_id == "T1000001"
                    select new MyViewModel
                    { 
                        DailyAttendance = da, 
                        Student = s 
                    };
        return View(model.ToList());
    }
} 
```

最后将您的视图强类型化到视图模型中：

```
@model IList<MyViewModel>
<table>
    <thead>
        <tr>
            <th>student id</th>
            <th>attendance id</th>
        </tr>
    </thead>
    <tbody>
        @for (var i = 0; i < Model.Count; i++)
        {
            <tr>
                <td>@Html.DisplayFor(x => x[i].Student.student_id)</td>
                <td>@Html.DisplayFor(x => x[i].DailyAttendance.attendance_id)</td>
            </tr>
        }
    </tbody>
</table> 
```

为了清理视图，您可以使用一个显示模板，该模板将为模型的每个元素自动呈现 ( `~/Views/Shared/DisplayTemplates/MyViewModel.cshtml`)：

```
@model MyViewModel
<tr>
    <td>@Html.DisplayFor(x => x.Student.student_id)</td>
    <td>@Html.DisplayFor(x => x.DailyAttendance.attendance_id)</td>
</tr> 
```

现在你的主要观点就变成了：

```
@model IList<MyViewModel>
<table>
    <thead>
        <tr>
            <th>student id</th>
            <th>attendance id</th>
        </tr>
    </thead>
    <tbody>
        @Html.DisplayForModel()
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:37:58.613

您正在向您的视图发送匿名对象并声明您的视图`IEnumerable<titas.Models.DailyAttendance>`在这种情况下不正确。尝试为它制作模型。

```
public class MyModel
{
   public DailyAttendance dailyAttendance{ get; set; }
   public Student student { get; set; }
} 
```

然后在您的控制器中将数据填充到此模型中

```
 var model = (from s in _attendanceModel.Student
                join ssc in _attendanceModel.StudentSchoolClass on s.student_id equals ssc.student_id
                join sc in _attendanceModel.SchoolClass on ssc.school_class_id equals sc.school_class_id
                join da in _attendanceModel.DailyAttendance on s.student_id equals da.student_id
                join my in _attendanceModel.MonthYear on da.mth_yr_id equals my.mth_yr_id
                where my.month_id == "M05"
                where sc.teacher_id == "T1000001"
                select new MyModel { dailyAttendance = da, student = s }).ToList(); 
```

然后将它传递给您的视图并像这样声明您的视图模型

```
@model IEnumarable<MyModel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:39:16.357

问题是您将匿名类型作为模型传递：`select new { DailyAttendance = da, Student = s }`您在视图中将模型定义为`@model IEnumerable<titas.Models.DailyAttendance>`.

尝试创建一个特定于您的视图的模型：

```
public class AttendanceModel
{
    public Student Student { get; set; }
    public DailyAttendance DailyAttendace { get; set; }
} 
```

或者任何对你有用的东西。您可能还想为学生和日常出勤创建特定的视图模型。

然后你可以改变你的模型：

`@model IEnumerable<Attendanceodel>`

并选择：

`select new AttendanceModel { DailyAttendance = da, Student = s }`

希望这能让你走上正轨。

# asp.net - 选中复选框时在 javascript 中显示消息

> ID：10443792
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:28:55.317
> 
> 标签：asp.net

我想在javascript中这样，当复选框可见时显示消息1，否则显示消息2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T06:35:42.687

尝试这个：

**HTML：**

```
<label><input type='checkbox' onchange='handleChange(this);'>Checkbox</label> 
```

**JS：**

```
function handleChange(cb) {
  if(cb.checked == true){
   alert('Message 1');
  }else{
   alert('Message 2');
  }
} 
```

**JSBIN：http:** **[//jsbin.com/abukor/2](http://jsbin.com/abukor/2)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:22:45.487

您可以使用 javascript 三元运算符

```
var msg = ($("#MyCheckbox").is(":checked")) ? 'message1' : 'message2';
alert(msg); 
```

您当然可以内联三元以使其非常紧凑

另请查看此[SO 答案](https://stackoverflow.com/a/10323946/96505)，了解使用三元运算符的其他一些示例。

如果您想在复选框本身可见的情况下显示消息，那么您可以使用[:visible 运算符](https://stackoverflow.com/a/178450/96505)来生成代码：

```
var msg = ($("#MyCheckbox").is(":visible")) ? 'message1' : 'message2';
alert(msg); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:40:10.320

```
if($("#checkbox").is(":checked")){
    alert("message1");
}else{
    alert("message1");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-12T11:40:11.880

```
checkBox.onchange = function () {
    console.log("Checked:" + checkBox.checked)
}; 
```

# javascript - JIT Rgraph 上的缩放按钮

> ID：10443800
> 
> 赞同：0
> 
> 时间：2012-05-04T06:29:11.713
> 
> 标签：javascript, infovis

在使用 R 图形（Javascript Infovis Toolkit）时，我发现只有鼠标滚轮可以用作放大和缩小。任何人都可以帮助我如何使用两个按钮而不是鼠标滚轮来控制图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:20:51.550

这是名为图的 Force 定向变体的示例

您可以更改示例中提供的 .zooming 值，在此设置中，我将其设置为 15，它的缩放速度相当慢。FD：

```
function zoom(delta)
{
     if (fd) 
     {
          var val = fd.controller.Navigation.zooming/1000; 
          var ans = 1 - (delta * val);
          fd.canvas.scale(ans, ans);
     }    
} 
```

# c# - 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围

> ID：10443802
> 
> 赞同：1
> 
> 时间：2012-05-04T06:29:15.210
> 
> 标签：c#, winforms

我收到以下错误“将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。” 日期格式为“DD/MM/YY”

```
 public DataSet GetSynchronizeDataForDLDocs(string date_pushed)
{
    DataSet ds = new DataSet();
    string strQuery=string.Empty;

    if (date_pushed != null && date_pushed != string.Empty)                 // 105
         strQuery = 
            @"select 
                a.DLNO,
                a.NAME,
                b.TOPSTRING,
                Convert(datetime,a.DOB,103) as DOB,
                Convert(datetime,a.DOI,103) as DOI,
                Convert(datetime,b.datepushed,103) as datepushed 
            from 
                PLInfo_Demo a,
                DLInfo_Demo b 
            where 
                a.dlno=b.dlno 
            and
                Convert(DateTime,b.datepushed,103) > CONVERT(varchar,'" + date_pushed + @"' ,103)
            and 
                DATEPART(hh, b.datepushed) > Datepart(hh,'" + date_pushed + @"') 
            and
                DATEPART(MI, b.datepushed) > Datepart(MI,'" + date_pushed + @"' ) 
            and
                DATEPART(ss, b.datepushed) > Datepart(ss,'" + date_pushed + @"' ) 
            order by b.datepushed desc";
    else
         strQuery = @"
            select 
                a.DLNO,
                a.NAME,
                b.TOPSTRING,
                Convert(datetime,a.DOB,103) as DOB,
                Convert(datetime,a.DOI,103) as DOI,
                Convert(datetime,b.datepushed,103) as datepushed 
            from 
                PLInfo_Demo a,
                DLInfo_Demo b
            where 
                a.dlno=b.dlno ";
    ds = DbManager.ExecuteSalarData(
        strQuery, 
        CommandType.Text, 
        DbManager.strcon2, 
        null);

    return ds;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:36:15.317

首先**不要`date_pushed`作为字符串**传入。在您的 c# 中解析它（`DateTime.Parse`或类似的，可能指定格式和文化），并将其作为参数传递。在您拥有的所有地方`'" + date_pushed + '"'`，请`@theParameter`改用。

接下来就是存储`b.datepushed`为 a `datetime`- 应该不需要使用`convert`on `b.datepushed`。如果它是一个字符串**，你做错了**。

之后，您将`datetime`字段与`datetime`参数进行比较，这将毫无问题地工作。例如：

```
and Convert(DateTime,b.datepushed,103) > CONVERT(varchar,'" + date_pushed + @"' ,103) 
```

变成

```
and b.datepushed > @date_pushed 
```

where`b.datepushed`是`datetime`字段，`@date_pushed`是`datetime`参数。您当然可以将`DATEPART`etc 与`datetime`- 一起使用，重点是：它根本不解析任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:37:30.797

其中一些肯定失败了，所以请查看实际值：

```
Convert(datetime,a.DOB,103) as DOB,
Convert(datetime,a.DOI,103) as DOI,
Convert(datetime,b.datepushed,103) as datepushed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:37:39.617

我假设您使用 SQL Server。

SQL Server 中的有效日期时间范围是**1753 年 1 月 1 日**到**9999 年 12 月 31 日**，如[datetime (Transact-SQL) MSDN page](http://msdn.microsoft.com/en-us/library/ms187819.aspx)所述。

我建议你注意你所有的`convert(datetime, ...)`陈述是否有超出这个范围的值。

# jsp - h:outputScript 未在库 h 中定义

> ID：10443803
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:29:16.443
> 
> 标签：jsp, jsf, jsf-2

我输入了这段代码

```
<h:outputScript name="jsf.js" library="javax.faces" target="head"/> 
```

但是我的 IDE 说该`<h:outputScript>`标签未在`h`我声明如下的库中定义。

```
<%@taglib prefix="h" uri="http://java.sun.com/jsf/html"%> 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:26:27.607

当您使用古老的 JSP 作为视图技术时，JSF 2.0 `<h:head>`、`<h:body>`、`<h:outputScript>`、和所有标记**都不可用。**您应该改用它的后续 Facelets，它通常是一个 XHTML 文件。`<h:outputStylesheet>``<f:ajax>``<ui:xxx>`

 **自 2009 年以来， JSP 已被**弃用**为 JSF 视图技术。确保在学习 JSF 时阅读最新的资源。从[我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)开始。

### 也可以看看：

*   [Java EE 6 教程 - Facelets 简介](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)
*   [为什么从 JSF2.0 开始，Facelets 优于 JSP 作为视图定义语言？](https://stackoverflow.com/questions/13092161/why-facelets-is-preferred-over-jsp-as-the-view-definition-language-from-jsf2-0-o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:53:17.043

确保您的 xml 名称空间定义正确。要包含 JSF 标记库，您通常需要以下内容：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

   <!-- header and body of your page -->

</html> 
```**

# c++ - Xor c 代码 - 需要解释

> ID：10443807
> 
> 赞同：3
> 
> 时间：2012-05-04T06:29:32.047
> 
> 标签：c++, xor

有人可以解释一下`XOR`，`(^)`在下面的代码中做什么，以及为什么函数是一个指针？

```
char *strReverse(char *str)
{
      char *pb, *pe;

      for (pb = str, pe = str + strlen(str) - 1; pe > pb; ++pb, --pe)
      {
            *pb ^= *pe;
            *pe ^= *pb;
            *pb ^= *pe;
      }
      return str;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:30:31.043

该函数不是指针，而是返回一个`char*`.

该函数反转一个字符串。

此`XOR`技术用于交换两个元素而无需任何额外内存。如您所见，循环遍历字符串的开始和结束，并交换两个`char`s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:32:37.767

像这样使用 xor 是在不使用临时变量的情况下交换内存中两个值的不同方式。我推荐其他位[黑客](http://graphics.stanford.edu/~seander/bithacks.html)的位黑客

# git - 忽略除根目录以外的文件夹

> ID：10443809
> 
> 赞同：1
> 
> 时间：2012-05-04T06:29:55.637
> 
> 标签：git

我需要忽略 bin 文件夹，除了放在根目录中的文件夹。这是我添加到 .gitignore 的内容：

```
!/bin
bin 
```

但是git忽略root bin文件夹并在我执行后将其标记为删除

```
git rm --cached -r .
git add . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:31:37.100

翻转两行：

```
bin/
!/bin/ 
```

# c# - 图片不会上传到网络服务器，但可以在本地上传

> ID：10443811
> 
> 赞同：0
> 
> 时间：2012-05-04T06:30:07.960
> 
> 标签：c#, asp.net

我在服务器上有一些图像我想将其上传到另一台服务器我编写代码以将所有图像上传到服务器上但可以在本地上传但我不知道有什么问题因为它无法上传到服务器

```
 try
        {
            byte[] content;
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            WebResponse response = request.GetResponse();

            Stream stream = response.GetResponseStream();

            using (BinaryReader br = new BinaryReader(stream))
            {
                content = br.ReadBytes(500000);
                br.Close();
            }
            response.Close();

            string CompleteDPath = "ftp path";
            string UName = "abc";
            string PWD = "123";

            WebRequest reqObj = WebRequest.Create(CompleteDPath + file_name);
            reqObj.Method = WebRequestMethods.Ftp.UploadFile;
            reqObj.Credentials = new NetworkCredential(UName, PWD);
            reqObj.GetRequestStream().Write(content, 0, content.Length);
            reqObj = null;

            //FileStream fs = new FileStream(file_name, FileMode.Create);
            //BinaryWriter bw = new BinaryWriter(fs);

            //bw.Write(content);
            //fs.Close();
            //bw.Close();
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:54:00.993

试试;

```
byte[] content;       

HttpWebRequest request1 = (HttpWebRequest)WebRequest.Create(url);    

WebResponse response1 = request1.GetResponse();

Stream stream = response1.GetResponseStream();

using (BinaryReader br = new BinaryReader(stream))
{
    content = br.ReadBytes((int)stream.Length);
    br.Close();
}
response1.Close();

FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://ftp_path");
request.Method = WebRequestMethods.Ftp.UploadFile;

request.Credentials = new NetworkCredential("abc", "123");
request.ContentLength = content.Length;

Stream requestStream = request.GetRequestStream();
requestStream.Write(content, 0, content.Length);
requestStream.Close();

FtpWebResponse response = (FtpWebResponse)request.GetResponse();
response.Close(); 
```

# asp.net-mvc - 实体框架多对多先插入代码

> ID：10443814
> 
> 赞同：0
> 
> 时间：2012-05-04T06:30:22.073
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4.1

这是我的模型

```
 public class Post 
    {
    public long PostID { get; set; }  

    [Required]
    [MaxLength(255)]
    public string Title { get; set; }     
    }    

    public class Tag
    {     
    public long TagID { get; set; }
    [Required]
    [Display(Name = "Tag Name")]
    [MaxLength(30)]
    public string TagName { get; set; } 
    public bool IsActive { get; set; }
    }

   public class TagPost
   {    
    public long TagPostID { get; set; }     
    public long PostID { get; set; }      
    public long TagID { get; set; }

    [ForeignKey("PostID")]
    public virtual Post Posts { get; set; }
    [ForeignKey("TagID")]
    public virtual Tag Tags { get; set; }
    } 
```

1）这是 EF 4.1 中正确的多对多配置，而没有提及多对多的模型绑定器。

2）如果我使用 dataannotation 完成了多对多配置，为什么数据没有插入 tagpost 。

```
 public void InsertPostQuestion(Post post,List<string> tags)
  {

        context.Posts.Add(post);
        foreach (string tag in tags)
        {
            Tag tagr = new Tag();
            tagr.TagName = tag;
            tagr.IsActive = true;
            context.Tags.Add(tagr);

        }           
        context.SaveChanges(); 

    } 
```

3）我必须定义modelbinder来进行多对多的插入或删除或更新吗？

```
 modelBuilder.Entity<Post>().
        HasMany(c => c.Tags).
        WithMany(p => p.Posts).
        Map(
        m =>
        {
            m.MapLeftKey("PostID");
            m.MapRightKey("TagID");
            m.ToTable("TagPost");
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:37:33.693

将您的模型更改为：

```
public class Post 
{
public long PostID { get; set; }  

[Required]
[MaxLength(255)]
public string Title { get; set; }  

public bool IsActive { get; set; }

public virtual List<Tag> Tags { get; set; }
}

public class Tag
{     
public long TagID { get; set; }
[Required]
[Display(Name = "Tag Name")]
[MaxLength(30)]
public string TagName { get; set; } 
public bool IsActive { get; set; }

public virtual List<Post> Posts { get; set; }
} 
```

然后像这样保存：

```
public void InsertPostQuestion(Post post,List<string> tags)
{
    context.Posts.Add(post);
    foreach (string tag in tags)
    {
        // TODO: If tag has a unique index on TagName, see if it exists first
        Tag tagr = new Tag();
        tagr.TagName = tag;
        tagr.IsActive = true;
        context.Tags.Add(tagr);
        post.Tags.Add(tagr);
    }           
    context.SaveChanges(); 
} 
```

EF 将在数据库中创建中间表并自动很好地填充它。

# objective-c - 如何将泰米尔语字符从 .rtf/.doc 文件显示到 UITextView

> ID：10443818
> 
> 赞同：1
> 
> 时间：2012-05-04T06:30:33.963
> 
> 标签：objective-c, ios5, plist, uitextview, nsstringencoding

这是我的 .rtf 文件，我包含在我的 Xcode 项目的资源文件夹中 ![sample.rtf 文件内容](../Images/251d9cb568c30ca19904301946c8efdb.png)

我用于将 .rtf 文件的内容显示到 UITextView 中的代码

```
 NSString *filePath=[[NSBundle mainBundle]pathForResource:@"sample" ofType:@"rtf"];
    NSString *contentString=[NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];  
    myTextViewObj.text=contentString; 
```

我得到的输出是 ![输出 UITextView 内容](../Images/98cae964229444f906b0d317052c5906.png)

如果有人知道如何从 .rtf / .doc / .plist 格式文件将泰米尔语字符显示到 UITextView 中，请帮助我摆脱这个问题。在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:58:43.963

[如何显示泰米尔语字符？](https://stackoverflow.com/a/3906139/790794)，是对您问题的解释。

在 iOS 4.1 及更高版本中有泰米尔语字体。字体名称：TamilSangamMN-Bold 和 TamilSangamMN。

下面的代码片段将显示可用字体系列及其字体名称的列表。

```
for (NSString *family in [UIFont familyNames]) 
{ 
    NSLog(@"%@", family); 
    for (NSString *font in [UIFont fontNamesForFamilyName:family]) 
    { 
        NSLog(@"\t%@", font); 
    } 
} 
```

因此，将字体和字体系列相应地应用于 UITextView 以显示泰米尔语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:06:46.930

RTF 文件不是文本文件；这是一个标记文件。您所看到的（在黄色图像中）是出现在 RTF 文件开头的 RTF 标记；它与文本所用的语言无关。

如果您想查看第一张图片中的文本，您必须在 Microsoft Word 或其他读取 RTF 文件的程序中打开它，并将其保存为 Unicode 文本格式，而不是 RTF。如果要使用 RTF 文件作为源，则需要编写或查找 RTF 解析器。

换句话说，您不是在看文本，而是在看源代码。泰米尔语文本显示也可能存在问题，但是在黄色图像中，我认为您甚至还没有看到任何文本；只是 RTF 标头标记。

# c++ - 从文件中读取数字，递增并写回

> ID：10443819
> 
> 赞同：2
> 
> 时间：2012-05-04T06:30:41.453
> 
> 标签：c++, file, casting

我想`long`从文件中读取一个数字，然后将其递增并将其写回文件。
我正在为来回转换而苦苦`string`挣扎`long`。

我试过：

```
double id = atof("12345678901"); //using atof because numbers are too big for atio()
id++;
ostringstream strs;
strs << static_cast<long>((static_cast<double>(threadId)));
string output = strcpy_s(config->m_threadId, 20, strs.str().c_str()); 
```

但这会将输入转换为负数或错误数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:35:40.580

`atoi`适用于普通整数。还有`atol`和`atoll`（`_atoi64`在windows中）：

```
//long long id = atoll( "12345678901" );
long long id = _atoi64("12345678901"); // for Visual Studio 2010
id++;
// write back to file here 
```

正如一位评论者所建议的那样，使用`strtoll`而不是`ato*`函数：

```
char * data = "12345678901";
long long id = strtoull( data, NULL, 10 );
id++; 
```

由于您在这里使用 C++，因此您应该直接从 fstreams 中提取它：

```
long long id;
{  
   std::ifstream in( "numberfile.txt" );
   in >> id;
}
id++;
{
   std::ofstream out( "numberfile.txt" );
   out << id;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:38:58.567

要从 C 字符串（`char`数组）开始，请使用以下命令：

```
long id = atol("12345678901"); 
```

现在您可以增加数字。然后，要从 a`long`转到 C++ `std::string`，请使用以下命令：

```
std::ostringstream oss;
oss << id;
std::string idAsStr = oss.str(); 
```

现在您可以将字符串写回文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T08:14:48.517

您可以访问[Boost.Lexical_Cast](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)吗？您可以像这样简单地进行转换：

```
double id = boost::lexical_cast<double>("some string");
++id
std::string id_string = boost::lexical_cast<std::string>(id); 
```

并使用您当前拥有的任何文件传输。

# ruby-on-rails - rails 3：回形针：未定义的方法徽标

> ID：10443827
> 
> 赞同：0
> 
> 时间：2012-05-04T06:31:18.667
> 
> 标签：ruby-on-rails, paperclip, undefined, ruby-on-rails-3.2

在模型中我有类似的东西

```
has_attached_file :logo, something_here 
```

代码/上传徽标工作正常，但在上传徽标之前我需要尺寸。所以当我使用几何时，会抛出错误

```
undefined local variable or method 'logo' for #<Class:0xbfabbc0> 
```

知道如何解决这个问题吗？或者在存储数据之前有没有其他方法可以获取维度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:45:39.383

你可以钩到`after_image_post_process`. 这是我的一个项目的工作代码：

```
class Photo < ActiveRecord::Base
  has_attached_file :image
  after_image_post_process :save_thumb_file_size

  def save_thumb_file_size
    self.thumb_file_size = self.image.queued_for_write[:thumb].size if self.image.queued_for_write.key?(:thumb)
    return true
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:01:51.420

您是否生成了与该字段相关的迁移？

```
rails generate paperclip photo logo 
```

并运行 rake db:migrate?

# jquery - jQuery UI Autocomplete - 如何重置用户可见的文本？

> ID：10443828
> 
> 赞同：0
> 
> 时间：2012-05-04T06:31:27.670
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我有一个简单的 jQuery UI 自动完成框。工作正常。因为我有一系列，我想要一个全局重置按钮，它将所有各种选择和输入框都清空。如何访问自动完成框的用户可见文本（以及基础值）以清空值？

我尝试了各种选择，包括：

```
$('#autocompleteSearchBox').val('Test1');
$('#autocompleteSearchBox').parent().find('label').text('Test2');
$('#autocompleteSearchBox').next().val('Test3');
$('input.ui-autocomplete-input').val('Test4'); 
```

这些都不会影响用户可见的文本。有任何想法吗？

[在这里](http://jsfiddle.net/ypFXP/)编辑-jsFiddle 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:51:42.303

```
$('.ui-autocomplete-input').val(''); 
```

我已经更新了你的小提琴来展示这个 - [http://jsfiddle.net/ypFXP/4/](http://jsfiddle.net/ypFXP/4/)。

如果您正在寻找底层资源，您可以通过以下方式获得：

```
$('#autocompleteSearch').autocomplete('option', 'source'); 
```

# sql-server - 如何在 SQL Server 中创建删除前触发器？

> ID：10443829
> 
> 赞同：28
> 
> 时间：2012-05-04T06:31:33.603
> 
> 标签：sql-server, triggers

我想创建一个删除前触发器。当我从表中删除一条记录时，该记录必须插入到历史表中。如何在 SQL Server 中执行此操作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-04T06:34:14.447

在这种情况下，您最好进行常规的“后”触发。这是处理此类情况的最常见方法。

就像是

```
CREATE TRIGGER TRG_AUD_DEL
ON yourTable
FOR DELETE
AS
     INSERT INTO my_audit_table  (col1, col2, ...)
     SELECT col1, col2...
     FROM DELETED 
```

将会发生的情况是，当从表中删除一条记录（或多条记录！）时，删除的行将插入到`my_audit_table`该`DELETED`表是一个虚拟表，其中包含删除前的记录。

另外，请注意触发器作为删除语句上隐式事务的一部分运行，因此如果您的删除失败并回滚，触发器也会回滚。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-04T06:36:06.167

你也可以使用`INSTEAD OF DELETE`

```
CREATE TRIGGER dbo.SomeTableYouWhatToDeleteFrom
ON dbo.YourTable
INSTEAD OF DELETE
AS
BEGIN

     -- Some code you want to do before delete

     DELETE YourTable
     FROM DELETED D
     INNER JOIN dbo.YourTable T ON T.PK_1 = D.PK_1
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-28T09:14:27.010

可以通过以下步骤完成，例如在此示例中我使用的是客户表：

```
CREATE TABLE CUSTOMERS(
   ID   INT              NOT NULL,
   NAME VARCHAR (20)     NOT NULL,
   AGE  INT              NOT NULL,
   ADDRESS  CHAR (25) ,
   LAST_UPDATED DATETIME,
   PRIMARY KEY (ID)
); 
```

1.  创建历史：

    ```
    CREATE TABLE CUSTOMERS_HIST( 
    ID   INT              NOT NULL,
    NAME VARCHAR (20)     NOT NULL,
    AGE  INT              NOT NULL,
    ADDRESS  CHAR (25) ,
    LAST_UPDATED DATETIME,
    PRIMARY KEY (ID)
    ); 
    ```

2.  在删除事件上触发源表，如下所示：

    ```
    CREATE TRIGGER TRG_CUSTOMERS_DEL 
    ON CUSTOMERS
    FOR DELETE
    AS
         INSERT INTO CUSTOMERS_HIST (ID, NAME, AGE, ADDRESS, LAST_UPDATED)
         SELECT ID, NAME, AGE, ADDRESS, LAST_UPDATED
         FROM DELETED 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-31T08:44:27.687

尝试在删除之前执行的触发器，并在不满足条件时抛出错误。

```
CREATE TRIGGER [dbo].[TableName_PreventDeleteAndUpdate]
ON dbo.TableName
FOR DELETE, UPDATE -- runs before deletes and updates
AS
BEGIN
    IF (APP_NAME() <> 'SomeApp')
    BEGIN
        RAISERROR ('Only delete/update with SomeApp', 16, 1);
        ROLLBACK TRANSACTION;
        RETURN;
    END
END 
```

# google-chrome - WebView 比 Safari 怎么样

> ID：10443830
> 
> 赞同：0
> 
> 时间：2012-05-04T06:31:35.650
> 
> 标签：google-chrome, safari, browser, google-plus

我编写了一个网络浏览器。我试过他，在 google+ 上想说我的浏览器会过时，我必须有 safari、chrome、firefox 或 ie 下载。如何将我的浏览器用作 Safari 或 Chrome？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:32:38.967

发送 HTTP 请求时，请在请求中包含一个[User-Agent](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)标头，将您的浏览器标识为您想要的浏览器之一。

# android - 如何使用 wifi rssi 或加速度计检测 Android 中的用户运动？

> ID：10443836
> 
> 赞同：1
> 
> 时间：2012-05-04T06:32:04.523
> 
> 标签：android, wifi, accelerometer, velocity

在我的项目中，我想通过使用 wifi rssi 或加速度计传感器来检测用户是否正在移动。

我应该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:21:45.260

这实际上完全取决于您想要检测的运动类型。

**WiFi RSSI：**从起始位置和扫描结果（新发现的接入点的初始 RSSI），您可以随时间检查它们在信号质量方面的演变。由于 RSSI 值会通过大量参数（方向、障碍物、房间设置、大气条件、周围的人）进行调整，因此不容易找到用户的短暂位移。因此，您需要平均值（然后必须快速执行扫描以获得足够的数据）并且离开接入点周边会使您丢失信息。

**加速度计：**取决于您使用的传感器质量。如果您在智能手机中使用嵌入式传感器，那将很难。它们的准确性很差，因为您需要整合它的值（m/s² 以获得 m/s），因此误差会随之增加。此外，如果您使用的是手机或平板电脑，可能很难从设备的倾斜中辨别出真实的用户移动。

在不真正了解项目细节的情况下，我相信如果您确实需要检测不那么微小的运动，RSSI 应该更易于使用。如果你想要更精确的东西，你需要一些更大的研究工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:09:59.083

**有关基于 RSSI 的室内定位**，请参阅[Android 加速度计精度（惯性导航） 。](https://stackoverflow.com/a/7835988/341970)

# ajax - ajax加载后运行javascript

> ID：10443837
> 
> 赞同：1
> 
> 时间：2012-05-04T06:32:08.350
> 
> 标签：ajax, jquery-ui

我正在使用 jQuery UI。我正在通过 AJAX 在对话框中加载一些内容。从服务器插入内容后，我需要对文档进行修改。我在链接上使用*.live()*函数；我认为这将使我能够在通过 ajax 加载内容后使用 Js，但这就像我刚刚加载的内容不是文档的一部分。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:52:16.497

您是否在 ajax 调用的成功函数中添加绑定（生命）？

如果是这样，我遇到了同样的问题，我将尝试解释我的发现：

```
$.post('callURL', function(data){

    // Let's say data returned from server is an ID of a div I have to hide
    // by clicking on some_link

    $('#some_link').live('click',function(){

        $('#'+data).hide();

    });

}); 
```

这是行不通的，因为“live”函数中的代码是在点击时执行的，那时“data”值已经消失了。

为了使它工作，我创建了一个全局变量“ID”，我在成功函数中设置了它，然后再次在“实时”函数中调用，如下所示：

```
var ID;    

$.post('callURL', function(data){

    // Let's say data returned from server is an ID of a div I have to hide
    // by clicking on some_link

    ID = data

    $('#some_link').live('click',function(){

        $('#'+ID).hide();

    });

}); 
```

# c# - 打开 Excel-Workbook 适用于 .Net3.5 但不适用于 .Net4

> ID：10443850
> 
> 赞同：1
> 
> 时间：2012-05-04T06:33:20.863
> 
> 标签：c#, excel, c#-4.0, c#-3.0

我正在尝试将“旧”.Net-3.5-Project 转换为 .Net-4.0。现在一切正常，但 Excel 互操作。

我遇到的问题是打开工作簿。我已经尝试了一个全新的项目，并用 .Net-3.5 编译过一次，用 .Net-4.0 编译过一次。使用“旧”框架，它可以按预期工作，但是使用 4.0 我只能得到`null`结果？

我的 testapp 中的代码是这样的：

```
using System;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private Excel.Workbook test;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            OpenWithInterop();
        }

        private void OpenWithInterop()
        {
            Microsoft.Office.Interop.Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();
            excel.WorkbookOpen += new Excel.AppEvents_WorkbookOpenEventHandler(excel_WorkbookOpen);
            test = excel.Workbooks.Open(@"C:/Test/test.xlsx");

            excel.Quit();
        }

        void excel_WorkbookOpen(Excel.Workbook Wb)
        {
            if (test.Name.Equals(Wb.Name)) // Here there will be an null-exception with .net-4 but not with .net-3.5
            {
                Console.WriteLine("done it right");
            }
        }
    }
} 
```

testapp 只包含一个 WinForm-Form（来自模板），我只添加了一个具有上述行为的按钮。

我在这里有什么遗漏吗？在 4.0 中使用 Excel 的方式有什么变化吗？

**更新：**回答您的问题：

*   它是 Windows 7 Enterprise (x64) 上的 Office 2010 (x86)
*   我只是将它添加到 Visual Studio 的“引用”中，并在我的主类中将其称为“使用”。（将更新我的代码以显示完整）
*   现在，这是向您展示行为的真正最小代码 - 不是很奇怪吗？

**更新2：** 我发现了一些“新”的东西：

*   它也发生在 Windows XP (x86) 上
*   您不需要在 .net4 中拥有引用 Excel.Interop 的项目，它被某些 .net4-project 调用就足够了。例子：

BaseProject (.net-4) --> DataLayer (.net-3.5) 参考 Excel.Interop --> Presentation (.net-4)

在此示例中，将发生错误。即使 DataLayer 是 .net-3.5。BaseProject 必须是 .net-4，因为它调用的是 .net-4 的 Presentation（并且需要......）

**更新 3：**

刚刚发现，一切都会正常工作，但是如果您将其中之一用于 .net4 中的事件，您会遇到麻烦

```
excel.WorkbookBeforeClose += new Excel.AppEvents_WorkbookBeforeCloseEventHandler(this.HandleWorkbookClosed);
excel.WorkbookOpen += new Excel.AppEvents_WorkbookOpenEventHandler(this.HandleWorkbookOpen); 
```

`Excel._Application`like in 中是否有任何等效事件`Excel.ApplicationClass`？

**更新 4：**

为了回答评论的问题（谢谢威尔！）我稍微扩展了这个例子。主要问题在于事件。为什么 .net-4 中存在这种差异或在某处有记录？以及如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:30:17.340

我现在有一种解决方案：

我将我的 2 个事件处理程序从

```
 void excel_WorkbookOpen(Excel.Workbook Wb)
    {
        if (test.Name.Equals(Wb.Name)) // Here there will be an null-exception with .net-4 but not with .net-3.5
        {
            Console.WriteLine("done it right");
        }
    } 
```

对这个改变的逻辑

```
 void excel_WorkbookOpen(Excel.Workbook wb)
    {
        if (!wb.FullName.Equals(pathToExcelFile)) // pathToExcelFile is class-wide visible
        {
            return;
        }

        Console.WriteLine("done it right");
    } 
```

所以这是我之前逻辑的解决方法。

因为这不能解释为什么它适用于 3.5 而不是 4，它实际上并不能解决问题，所以我不愿意接受我自己的答案作为解决方案。

For future searches / problems of other people this thread might be helpful, so I will let it stay here open. If someone finds a explanation for the behaviour I would be absolute willing to accept it as an answer :)

# objective-c - 匹配图像

> ID：10443852
> 
> 赞同：-3
> 
> 时间：2012-05-04T06:33:37.767
> 
> 标签：objective-c, arrays, cocoa

我有一个非常出乎意料的问题，这让我抓狂。这是一种非常简单的记忆游戏，有 36 张卡片。在下面的代码中，我用 36 个对象（18 个双对象）制作数组。当您在 1-12 之间选择卡片时，一切都很好。当您选择更高的卡时，匹配过程无法识别匹配。为什么？？？

内存.m

```
for (int i = 0; i < [imagesArray count]; ++i)
{
    int n = i;
    [imagesArray exchangeObjectAtIndex:i withObjectAtIndex:n];
    NSLog(@"index obrázku %i",i);
    NSLog(@"index array %i",n);
}

// Set button images
for (int i=0; i<[buttonsArray count]; i++) {
NSLog(@"index button %i",i);

UIButton *singleButton = [buttonsArray objectAtIndex:i];    
[singleButton setBackgroundImage:[UIImage imageNamed:TILE_BACKGROUND] forState:UIControlStateNormal];
[singleButton setBackgroundImage:[UIImage imageNamed:TILE_BACKGROUND] forState:UIControlStateHighlighted];

if ([[imagesArray objectAtIndex:i] integerValue] == 1) {
    [singleButton setBackgroundImage:[UIImage imageNamed:TILE_IMAGE1] forState:UIControlStateDisabled];
    NSLog(@"Karta 1 tag %i",i);
} else if ([[imagesArray objectAtIndex:i] integerValue] == 2) {
    [singleButton setBackgroundImage:[UIImage imageNamed:TILE_IMAGE2] forState:UIControlStateDisabled];
    NSLog(@"Karta 2 tag %i",i);
} 
```

对象是从 1 到 18...

```
- (IBAction)tileClicked:(id)sender {

    // Button is clicked
    if (!matchingInPogress) {
        UIButton *clickedButton = sender;
        tilesOpened++;
        NSLog(@"Počet otočených karet je %i",tilesOpened);
        [clickedButton setEnabled:NO];

        if (tilesOpened == 1) {
            // Only one tiled opened, remeber tag for match
            openTileIndex = clickedButton.tag;
        } else {
            // Second tile is opened, perform match
            matchingInPogress = YES;
            [self performSelector:@selector(matchTiles:) withObject:[NSNumber numberWithInt:clickedButton.tag] afterDelay:0.5];
            tilesOpened = 0;
        }
    } 
```

按钮控制..

```
- (void)matchTiles:(NSNumber *)clickedTile {

    // Match opened tiles
    int clickedTileIndex = [clickedTile integerValue];
    NSLog(@"Karta 1 tag %i",clickedTileIndex);
    NSLog(@"Karta 2 tag %i",openTileIndex);

    if ([imagesArray objectAtIndex:clickedTileIndex] != [imagesArray objectAtIndex:openTileIndex]) {
        NSLog(@"Porovnává hodnoty v clickedTileIndex a openTileIndex");

        // If tiles don't match set them to enabled state
        UIButton *firstButton = [buttonsArray objectAtIndex:openTileIndex];
        UIButton *secondButton = [buttonsArray objectAtIndex:clickedTileIndex];
        NSLog(@"Nesouhlas tag je %i",openTileIndex);
        NSLog(@"Nesouhlas tag je %i",clickedTileIndex);

        [firstButton setEnabled:YES];
        [secondButton setEnabled:YES];
    } else {
        NSLog(@"Match!");
        UIButton *firstButton = [buttonsArray objectAtIndex:openTileIndex];
        UIButton *secondButton = [buttonsArray objectAtIndex:clickedTileIndex];
        NSLog(@"Souhlas tag je %i",openTileIndex);
        NSLog(@"Souhlas tag je %i",clickedTileIndex);
        [firstButton setHidden:YES];
        [secondButton setHidden:YES];
    }

    matchingInPogress = NO;
} 
```

最后匹配过程

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:55:03.100

由于数组只能包含对象，因此您不要测试它们，`!=`因为这只会比较指针的值而不是对象本身。很多时候，这对某些（通常是低的）值有效（即使您不希望它），但由于 UIKit 对象经常缓存对象并返回相同的对象地址，即使对于不同的实例也会停止工作。

您需要在 tileClicked 中更改此行：

```
if ([imagesArray objectAtIndex:clickedTileIndex] != [imagesArray objectAtIndex:openTileIndex]) { 
```

对此：

```
if (![(UIImage *)[imagesArray objectAtIndex:clickedTileIndex] isEqual:
     (UIImage *)[imagesArray objectAtIndex:openTileIndex]]) { 
```

# android - Android项目本地手动创建的lib

> ID：10443854
> 
> 赞同：0
> 
> 时间：2012-05-04T06:33:41.277
> 
> 标签：android, global

我不确定我做对了。我怀疑的主要原因是我在这个或其他论坛上找不到做过类似事情的人。

我在我的项目中创建了一个抽象 java 类。将其命名为**lib**。我把项目中所有其他类使用的几个结构和方法放在那里。

**它对**我有用，但我想知道是否有更可接受的方法来收集所有常用方法和结构。

**注意**：当然所有方法都声明为公共静态。

**注二**：我不知道如何在抽象类中获取上下文，所以如果需要我必须将它作为参数传递给方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:55:03.217

这是你要找的笏吗？

```
public abstract class AbstractActivity extends Activity{

    public static synchronized boolean showAlertBox(Context ctx,final String title,final String message,final String okBtnTxt,final OnClickListener clickListener){

    AlertDialog.Builder alertbox; alertbox = new AlertDialog.Builder(ctx);
     this.runOnUiThread(new Runnable() {

        @Override
        public void run() { 

        alertbox.setTitle(title);
        alertbox.setMessage(message);
        if(okBtnTxt!=null || clickListener!=null)
          alertbox.setNeutralButton(okBtnTxt,clickListener);
        alertbox.show(); 
             .....

     }
     });

     return true;
    }
 } 
```

在扩展这个抽象类的类中，您可以使用 showAlertBox(this); 来调用它。其他明智的使用 AbstractActivity.showAlertBox(Context);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:10:02.213

好吧，感谢@Matt Wolfe 的评论，我才知道我所做的被称为“实用程序类”，它被广泛用于在项目中共享通用代码。通用模板为：

```
public abstract class lib {

    public static final int ZERO = 0;
    public static final int ONE = 1;
    public static final int TWO = 2;

    public static void func1(int i) { 
    }

    public static void func2(int i, String s) { 
    }

} 
```

您可以从任何其他代码中像这样使用它：

```
...;
lib.func1( lib.ZERO );
lib func2( lib.TWO, "sandwich" );
...; 
```

知道这一点让我确信我所做的一切都很好。

找到一种避免前缀 lib 的方法将是完美的。并且只需让 ECLIPSE 和编译器找到正确的导入并仅使用其名称识别函数，就像它们对全局库所做的那样。

# umbraco - 使用 Umbraco 5.1 的 fluent API 以编程方式创建新的媒体类型

> ID：10443857
> 
> 赞同：2
> 
> 时间：2012-05-04T06:33:55.830
> 
> 标签：umbraco, umbraco5

使用 Umbraco 5.1 API，我可以使用以下代码创建新的内容类型（用于在内容选项卡下创建内容节点）。

```
 // create content type
var typeBuilder = context.Hive.Cms().NewContentType("testType", "Test Type")
            .Define("value", "contentPicker", "Content")
            .Commit();

// create content node
var packageNode = context.Hive.Cms().NewRevision(packageNodeName, packageNodeName, "testType");
        packageNode.SetUploadedFile("value", postedFile);            
        packageNode.Publish();
        packageNode.Commit(); 
```

但是有没有办法使用 fluent API 创建媒体节点？我需要在媒体选项卡树中创建一个具有自定义类型的新自定义媒体节点。我尝试了以下方法，但它们似乎都不起作用

```
1) context.Hive.Cms().NewRevision();
2) context.Hive.Cms<IMediaStore>().NewRevision();
3) builderStep.NewRevision<Media, IMediaStore>();
4) builderStep.NewRevision<TypedEntity, IMediaStore>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:05:01.800

这可行，但生成的媒体类型不完整，因为当我尝试使用此类型手动创建媒体时，它会引发错误“应指定名称”。

```
CmsBuilderStep<IMediaStore> builderStep = new CmsBuilderStep<IMediaStore>(context.Hive);
var typeBuilder = builderStep.NewMediaType<EntitySchema, IMediaStore>("testType")                   
               .Define("package", "uploader", "General Properties")
               .Commit(); 
```

最后我决定手动创建媒体类型，并使用下面的代码通过代码创建媒体项

```
 // Creating a new Media item using the scorm package zip file.
        var packageNode = context.Hive.Cms<IContentStore>().NewRevision(packageNodeName, packageNodeName, "testType")
        .SetUploadedFile("package", postedFile)

        // set parent to media root folder - this is what makes it come under media tree
        .SetParent(FixedHiveIds.MediaVirtualRoot)
        .Publish()
        .Commit(); 
```

# debugging - 内核命中arm上的观察点断点后如何获取观察点断点信息

> ID：10443863
> 
> 赞同：1
> 
> 时间：2012-05-04T06:34:16.230
> 
> 标签：debugging, gdb, arm

在 X86 平台上，像 gdb 这样的调试器可以通过寄存器 R0~R3 设置观察点断点，寄存器 R7 存储断点信息。一旦内核命中观察点断点，调试器可以收集观察点断点信息，从寄存器R6读取信息，R6的位[0]~位[3]可以使用**dr[指示观察点索引（R0或R1或R2或R3） 6]&0xf** .

但是在arm平台上，如何获取这些信息，好像我们没有像X86平台上的R6这样的寄存器。

# facebook - FB Graph / FQL：当 FB 页面显示位置时，朋友的 Current_location 有时会读取 Null

> ID：10443870
> 
> 赞同：5
> 
> 时间：2012-05-04T06:35:10.490
> 
> 标签：facebook, facebook-graph-api, facebook-fql, missing-data

我试图在 facebook 上提取用户所有朋友的当前位置，并且遇到了一个奇怪的问题，其中一些朋友正在读出 NULL，而我可以在他们的实际 Facebook 页面上看到它说“住在***,*** . " 这个错误的难点在于它只发生在大约 30% 的情况下。在其余情况下，它会提取所有正确信息，这告诉我权限可能设置正确。

具体来说，我使用的 FQL 代码是：

```
SELECT uid,
       name,
       current_location
FROM   USER
WHERE  uid IN (SELECT uid2
               FROM   friend
               WHERE  uid1 = Me()) 
```

直接向图形发出 javascript 请求时也出现了同样的问题，因此它似乎也不是 FQL 问题。有谁知道为什么 current_location*有时*可能会失败并报告 NULL，但并非总是如此？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T22:17:27.003

***隐私设置的优先级高于 facebook api。***

如果用户限制了隐私设置中的特定信息，即使用户授予权限，您也无法通过 facebook api（graph、fql、rest api）获取该信息。

例如

如果我在隐私设置中限制分享我的生日，那么即使他们要求，任何应用都无法获取我的生日。

此外，用户可以限制应用程序获取特定信息。

例如，用户可以允许应用`xyz`访问他们想要的一切，但同时用户可以限制应用`xyz`访问他的位置

我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:47:35.177

有两种可能性；当前位置为 null 的用户的朋友：

> 1) 没有在他们的 facebook 个人资料中指定他们的当前位置
> 
> 2) 他们在他们的 facebook 个人资料中指定了当前位置，但他们的隐私设置拒绝你看到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:24:28.770

这里同样的问题。我可以为我的任何一个朋友检索 current_location 或 hometown_location。对于他们中的大多数人来说，我可以通过访问他们的个人资料很容易地看到它。应用程序权限 friends_location 和 friends_hometown 已设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:25:43.243

我也有同样的问题。

我检查了两个不同的用户，他们是我的朋友。

在这两种情况下，FQL 查询如下：

```
select uid, first_name, name, birthday, birthday_date, current_address, current_location, hometown_location, sex from user where uid in (select uid2 from friend where uid1 = me() 
```

返回. `null`_`home_location`

我检查了所有人的帐户和家庭位置（隐私和应用程序隐私设置）。

我的访问令牌包括所有必需的权限（为其他朋友显示了家庭位置）。

然后我使用查询运行 FQL 控制台：

```
select uid, first_name, name, birthday, birthday_date, current_address, current_location, hometown_location, sex from user where uid = nnnn 
```

作为所有者，结果是：

*   楼主有家位置。
*   在我的旧 FQL 控制台浏览器选项卡上 - 仍然没有主位置。
*   在我的新 FQL 控制台浏览器选项卡上——我得到了家的位置。

过了一会儿，我在旧的 FQL 控制台上找到了家的位置。

但是旧的查询仍然没有返回家的位置......

似乎在 FB 端存在一些缓存问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-02T13:42:48.180

试试这个查询来获取你朋友的当前位置

```
SELECT first_name,uid, last_name, current_location.name 
FROM user 
WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND current_location 
```

你也需要**friends_location**权限来运行这个查询

# c - 连接 char 与 char *

> ID：10443871
> 
> 赞同：0
> 
> 时间：2012-05-04T06:35:19.380
> 
> 标签：c

我正在尝试编写一个函数将采用 char 然后生成在堆中分配的 char* 。我怎样才能做到这一点 ？注意：下面的代码不起作用，你能帮忙修复吗

```
Ex:

    char* foo ( char x, char * xc ) {

        xc =  realloc ( xc, 1 + strlen ( xc ) ) ;
        strcat ( xc, x ) ;

    return xc ;
    }

                             p =  heap variable
   foo ( 'a', NULL ) ==>     ------------
                             | 'a'| '\0'|
                             ------------

   foo ( 'b', p )    ===>    --------------------
                             | 'a' | 'b' | '\0' |
                             --------------------

   foo ( 'c', p )    ===>    --------------------------
                             | 'a' | 'b' | 'c' | '\0' |
                             -------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:42:15.273

`NULL`不是一个字符串，因此你不能调用`strlen`它。

```
size_t len = xc != NULL ? strlen(xc) : 0;
xc = realloc(xc, len + 1 + 1);
xc[len] = c;
xc[len + 1] = '\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:39:45.583

[`strcat`](http://www.cplusplus.com/reference/clibrary/cstring/strcat/)接受两个指针。在您的示例中，您将一个字符作为第二个参数传递

改用[`s(n)printf`](http://linux.die.net/man/3/snprintf)函数族将字符连接到字符串。

就像是

```
len =strlen(xc);
xc =  realloc ( xc, 2 + strlen ( xc ) ) ; //One for NULL character

sprintf(xc+len,"%c", x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:44:14.513

有两个问题

*   如果您的指针为 NULL，您将在该地址上调用 strlen。
*   您分配的内存不足

> ```
> int len = 2;
> if ( xc != NULL ) {
>    len += strlen( xc );
> }
> xc = realloc( xc, len );
> *(xc+len-2) = x;
> *(xc+len-1) = '\0'; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:58:08.537

试试这个 ：

```
char* append_char(char c, char * str)
{
    char* new_str;

    if(NULL != str) {
        new_str = realloc(str, strlen(str) + 2);
        strncpy(new_str, str, strlen(str));
        new_str[strlen(str)] = c;
        new_str[strlen(str)+1] = '\0';
    } else {
        new_str = malloc(2);
        new_str[0] = c;
        new_str[1] = '\0';
    }

    return new_str;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T07:21:26.620

我可以分享一个小草图。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int sl = 0; // sl for strlen(s), allocated memory size will be +1 byte
char* s = NULL;

char* ccat(char* s, char c) {
    if (s == NULL) sl = 1; // allocating new memory
    else           sl = strlen(s) + 1; // +1 for new char
    // realloc will work like malloc if s is NULL
    s = realloc(s, sl+1); // +1 for zero at the end of string
    if(s == NULL) {
        fprintf(stderr, "realloc error");
        exit(1);
    }
    s[sl-1] = c;
    s[sl] = '\0';
    return s;
}

int main(int argc, char** argv) {
    s = ccat(s, 'Y');
    printf("sl=%d s=%s\n", sl, s);

    s = ccat(s, 'P');
    printf("sl=%d s=%s\n", sl, s);

    s = ccat(s, 'A');
    printf("sl=%d s=%s\n", sl, s);

    if (s != NULL)
        free(s);
    exit(0);
} 
```

# iphone - UIView 动画的一次调用函数

> ID：10443872
> 
> 赞同：0
> 
> 时间：2012-05-04T06:35:21.440
> 
> 标签：iphone, ios, xcode

在我的项目中，我在这里有 10 个这样的代码：

```
- (void) makeAnim1{

    //downward animation for carousel
    [UIView animateWithDuration:**3.5**
                          delay:0.25
                        options: UIViewAnimationCurveLinear
                     animations:^{
                         carousel.frame = CGRectOffset(carousel.frame, 0, **490**);
                     }
                     completion:^(BOOL finished){ //task after an animation ends
                         [self performSelector:@selector(makeAnim1_1) withObject:nil afterDelay:3.0];
                         NSLog(@"Done!");
                     }];    

}

- (void) makeAnim1_1{

    //upward animation for carousel
    [UIView animateWithDuration:**3.5**
                          delay:0.2
                        options: UIViewAnimationCurveLinear
                     animations:^{
                         carousel.frame = CGRectOffset(carousel.frame, 0, **-480**);
                     } 
                     completion:^(BOOL finished){
                         //timer for the reveal button
                         [NSTimer scheduledTimerWithTimeInterval:0.1 //this arranges the duration of the scroll
                                                          target:self
                                                        selector:@selector(revealButton)
                                                        userInfo:nil
                                                         repeats:NO];   
                         NSLog(@"Done!");
                     }];    

} 
```

我想在一个简短的实现中制作它们。所以它们只是一个功能。我尝试将所需的值放入代码的**粗体**版本中并将它们分配。

我需要有两个彼此对应的数组。例如：

数组A[3] = A,B,C;

数组B[3] = a,b,c;

当A被选择时，它等于a。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:42:00.027

试试下面的代码：

您可以将数组值转换为大写或小写，如下面的代码：

A 数组包含第一个索引是 A 转换为 B 数组包含第一个索引是

```
if([A objectAtIndex:0] lowercaseString].isEqualString([B objectatindex:0])
{

} 
```

谢谢...！

# iphone - 基于登录的 facebook 帐户自动生成密码

> ID：10443876
> 
> 赞同：1
> 
> 时间：2012-05-04T06:35:44.067
> 
> 标签：iphone, facebook, xmpp

我正在开发一个需要用户登录 Facebook 的 iPhone 应用程序。然而，这只是检索用户好友列表，之后我希望通过我自己的 XMPP 服务器继续通信，我想自动创建到该服务器的帐户。

为此，我需要一个非常简单的用户名：facebook 用户 ID，但我还需要根据某种显示用户已登录 Facebook 的私钥创建密码。对于在任何时间登录的任何设备，此密钥都应该是相同的，我一直在查看 Facebook API，但只能找到一个访问令牌，我认为当用户从不同设备登录时它会有所不同。

我的问题：Facebook API 中是否有满足这些要求的任何东西？任何关于替代解决方案的建议也将受到欢迎。

谢谢！

编辑：

例子：

1.  用户第一次在他的 iPhone 上使用该应用程序，使用 facebook 登录，该应用程序会自动在我的 XMPP 服务器上创建一个帐户，其中用户 ID 等于 facebook ID，密码是显示用户已登录的内容进入他的脸书帐户。
2.  现在用户在他的 iPad 上使用该应用程序，再次登录到他的 facebook 帐户，但是已经在我的 XMPP 服务器上拥有一个帐户，必须从从 facebook 接收的数据中生成相同的密码。

第 2 步是对我造成问题的部分，我需要显示用户已登录其帐户的数据，并且无论何时何地登录都是相同的，以便每次生成相同的密码. 我相信，如果我为此使用 access_token，那么如果用户例如 60 天没有登录并再次开始使用该应用程序，或者甚至当他登录到不同的设备时，这将会改变？

澄清一下：Facebook 提供的 XMPP 服务器不是我的需要，我需要能够发送聊天消息之外的其他内容，还需要能够存储消息，以便可以将登录的新设备同步到正确的状态.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:59:19.733

对于 Facebook XMPP，我建议您使用称为 X-FACEBOOK-PLATFORM 的自定义 SASL 机制。基本上，用户必须首先登录到您的应用程序并授予 xmpp_login 扩展权限。按照客户端流程为具有 xmpp_login 扩展权限的用户获取有效的 access_token。

您使用以下参数通过 TLS 发送 base64 编码字符串：

```
string method: Should be the same as the method specified by the server.
string api_key: The application key associated with the calling application.
string access_token: The access_token obtained in the above step.
float call_id: The request's sequence number.
string v: This must be set to 1.0 to use this version of the API.
string format: Optional - Ignored.
string cnonce: Optional - Client-selected nonce. Ignored.
string nonce: Should be the same as the nonce specified by the server. 
```

您的 appID (api_key) 可以在多个上下文中使用，您将能够获取每个用户设备的用户访问令牌。

这是聊天 API 文档：[https ://developers.facebook.com/docs/chat/](https://developers.facebook.com/docs/chat/)

# asp.net - 使用另一个 RadioButtonList 选择 ASP.NET 启用禁用 RadioButtonList

> ID：10443888
> 
> 赞同：0
> 
> 时间：2012-05-04T06:36:36.683
> 
> 标签：asp.net, validation, radiobuttonlist

嗨，我需要帮助从客户端启用/禁用 RadiobuttonList

我的表格如下所示：

![单选按钮列表](../Images/990278cd04be67afab7edd963a309c32.png)

1.  我想要的是默认情况下 Yes-Options RadioButtonlist 和 No-Options Radiobuttonlist 应该被禁用。当用户选择 YES 时，应启用 YES-Options 单选按钮列表，并且应禁用 NO-Options 单选按钮列表。与选择 NO 时相同，应启用 NO-Options 单选按钮列表，应禁用 YES-Options 单选按钮列表。

2.  当点击底部的保存按钮时，应该会进行验证。用户应从顶部的单选按钮列表中选择“是”或“否”，然后应从其相应选项中选择一个值。（选择是yes时，应从Yes - 选项和viceversa中选择一个值）

我怎样才能做到这一点 ？？

下面是我的标记

```
<asp:RadioButtonList ID="rbtnMain" runat="server">
<asp:ListItem Text="YES" Value="1"></asp:ListItem>
<asp:ListItem Text="NO" Value="0"></asp:ListItem>
</asp:RadioButtonList>
<br /><br /> 
```

```
YES -- Options
<asp:RadioButtonList ID="rbtnMainYes" runat="server">
<asp:ListItem Text="Options Yes -1" Value="1"></asp:ListItem>
<asp:ListItem Text="Options Yes -2" Value="2"></asp:ListItem>
<asp:ListItem Text="Options Yes -3" Value="3"></asp:ListItem>
</asp:RadioButtonList>
<br /><br />
NO -- Options
<asp:RadioButtonList ID="rbtnMainNo" runat="server">
<asp:ListItem Text="Options No -1" Value="1"></asp:ListItem>
<asp:ListItem Text="Options No -2" Value="2"></asp:ListItem>
<asp:ListItem Text="Options No -3" Value="3"></asp:ListItem>
</asp:RadioButtonList>

<br /><br />
<asp:Button ID="btnSave" runat="server" Text="Save" /> 
```

我怎样才能从客户端做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:14:03.017

这是为您想要的输出工作的jquery：

```
 <script type="text/javascript">
{
    $(document).ready(function () {
        $('#<%= rbtnMain.ClientID %> input:radio').change(function () {                
            var SelectedValue = $('#<%=rbtnMain.ClientID %> :radio:checked').next().text();
            if (SelectedValue == "YES") {
                $('#<%= rbtnMainYes.ClientID %> input:radio').attr("disabled", "disabled");
                $('#<%= rbtnMainNo.ClientID %> input:radio').removeAttr("disabled");
            }
            else {
                $('#<%= rbtnMainNo.ClientID %> input:radio').attr("disabled", "disabled");
                $('#<%= rbtnMainYes.ClientID %> input:radio').removeAttr("disabled");
            }
        });
    }); 
```

}

希望这会帮助你。如果对您有帮助，请不要忘记标记为答案。

# android - http post给出非法状态异常

> ID：10443890
> 
> 赞同：1
> 
> 时间：2012-05-04T06:36:44.807
> 
> 标签：android, http-post, httpresponse

这是我用于 HTTP 发布的代码

```
public void postData() {

    //DineOutActivity doa = null;
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("192.168.1.112/andro/index.php/androctrl/test/");

    try {

        //food item
     Spinner spinner = (Spinner) findViewById(R.id.spinner1);
     String fooditem = spinner.getSelectedItem().toString();

     TextView mDateDisplay = (TextView)findViewById(R.id.textView2);
     String Date = mDateDisplay.toString();

     TextView mTimeDisplay  = (TextView)findViewById(R.id.textView4);
     String Time = mTimeDisplay.toString();

        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
        nameValuePairs.add(new BasicNameValuePair("fooditem", "fooditem"));
        nameValuePairs.add(new BasicNameValuePair("Date", "Date"));
        nameValuePairs.add(new BasicNameValuePair("Time", "Time"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        String str = inputStreamToString(response.getEntity().getContent()).toString();
        Log.w("ADPORTAL", str);
        HttpStatus status;

        if(str.toString().equalsIgnoreCase("false"))
        {Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();
            //result.setText("You are not registerd please register"
        }
        else
        {Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();}

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 

private StringBuilder inputStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try {
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // Return full string
    return total; 
```

我使用 mTimeDisplay[Text View2] 作为 TimePicker 对话框中的值。并将 mDateDisplay [Texview4] 作为 DatePicker Dialog 的值。

以下是我使用过的全部源代码`postData()`

```
public class DineOutActivity extends Activity {

    private TextView mDateDisplay;
    private Button mPickDate;
    private int mYear;
    private int mMonth;
    private int mDay;
   /******************time picker**************/
        private TextView mTimeDisplay;
           private Button mPickTime;
           private int mHour;
           private int mMinute;
           private int mAmPm;

           static final int TIME_DIALOG_ID=1;

        static final int DATE_DIALOG_ID = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /********************spinner***********/

        Spinner food = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<CharSequence> foodadapter = ArrayAdapter.createFromResource(
                    this, R.array.item_array, android.R.layout.simple_spinner_item);
        foodadapter.setDropDownViewResource(R.layout.spinner_layout);
        food.setAdapter(foodadapter);
        /**pick date*/

        mDateDisplay = (TextView) findViewById(R.id.textView2);
        mTimeDisplay = (TextView) findViewById(R.id.textView4);
        mPickDate = (Button) findViewById(R.id.button2);
       /**pick time**/

        mPickTime=(Button)findViewById(R.id.button3);

        // add a click listener to the button
        mPickTime.setOnClickListener(new View.OnClickListener() {

                     public void onClick(View v) {

                           showDialog(TIME_DIALOG_ID);
                     }
              });

        // get the current time
        final Calendar c=Calendar.getInstance();
        mHour=c.get(Calendar.HOUR_OF_DAY);
        mMinute=c.get(Calendar.MINUTE);
        mAmPm = c.get(Calendar.AM_PM);

        // display the current date
       upTimeDisplay();

/*****************************pick date***********************************/
        // add a click listener to the button
        mPickDate.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v1) {
                showDialog(DATE_DIALOG_ID);
            }
        });

        // get the current date
        final Calendar date = Calendar.getInstance();
        mYear = date.get(Calendar.YEAR);
        mMonth = date.get(Calendar.MONTH);
        mDay = date.get(Calendar.DAY_OF_MONTH);
        int mDst = date.get(Calendar.AM_PM);
        int mAmPm = date.get(Calendar.DST_OFFSET);

        // display the current date (this method is below)
        updateDisplay();
    }

    // updates the date in the TextView

   private String upTimeDisplay()
   {
     //  mTimeDisplay.setText(new  
           //    StringBuilder().append(pad(mHour)).append(":").append(pad(mMinute)).append(pad(mAmPm)));
       mTimeDisplay.setText(new  
                  StringBuilder().append(mHour).append(":").append(mMinute));
       mTimeDisplay.setTextColor(R.color.green);
    return null;
   }
  /** private Object pad(int mMinute2) {

       if(mMinute2>=10)
              return String.valueOf(mMinute2);
       else
              return "0"+String.valueOf(mMinute2);
}**/

   private TimePickerDialog.OnTimeSetListener mtimeSetListener=new  
           TimePickerDialog.OnTimeSetListener() {

public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

mHour=hourOfDay;
mMinute=minute;
int ampm;

upTimeDisplay();
}
};

    private String updateDisplay() {
        mDateDisplay.setText(new StringBuilder()
                    // Month is 0 based so add 1
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
        mDateDisplay.setTextColor(R.color.green);
                 //   .append(mHour).append("_")
                  //  .append(mMinute).append("_")));
        return null;
    }

    // the callback received when the user "sets" the date in the dialog
    private DatePickerDialog.OnDateSetListener mDateSetListener =
            new DatePickerDialog.OnDateSetListener() {

                public void onDateSet(DatePicker view, int year, 
                                      int monthOfYear, int dayOfMonth) {
                    mYear = year;
                    mMonth = monthOfYear;
                    mDay = dayOfMonth;
                    updateDisplay();
                }
            };

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                    mDay);

        case TIME_DIALOG_ID:
            return new TimePickerDialog(this,mtimeSetListener,mHour,mMinute,false);
        }
        return null;
    }

public  void imageclick(View view)
{ 
    postData();
    //Intent where = new Intent(this, WhereToeat.class);
    //startActivity(where);
}

/**************/

public void postData() {

    //DineOutActivity doa = null;
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("192.168.1.112/andro/index.php/androctrl/test/");

    try {

        //food item
     Spinner spinner = (Spinner) findViewById(R.id.spinner1);
     String fooditem = spinner.getSelectedItem().toString();

     TextView mDateDisplay = (TextView)findViewById(R.id.textView2);
     String Date = mDateDisplay.toString();

     TextView mTimeDisplay  = (TextView)findViewById(R.id.textView4);
     String Time = mTimeDisplay.toString();

        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
        nameValuePairs.add(new BasicNameValuePair("fooditem", "fooditem"));
        nameValuePairs.add(new BasicNameValuePair("Date", "Date"));
        nameValuePairs.add(new BasicNameValuePair("Time", "Time"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = httpclient.execute(httppost);
        String str = inputStreamToString(response.getEntity().getContent()).toString();
        Log.w("ADPORTAL", str);
        HttpStatus status;

        if(str.toString().equalsIgnoreCase("false"))
        {Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();
            //result.setText("You are not registerd please register"
        }
        else
        {Toast.makeText(getBaseContext(), str, Toast.LENGTH_LONG).show();}

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 

private StringBuilder inputStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try {
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    // Return full string
    return total;
} 
```

我有一个`Exception`in`postData`方法在行

```
HttpResponse response = httpclient.execute(httppost); 
```

logcat 的例外是：

```
05-04 11:53:00.096: E/AndroidRuntime(4281): FATAL EXCEPTION: main
05-04 11:53:00.096: E/AndroidRuntime(4281): java.lang.IllegalStateException: Could not execute method of the activity
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.view.View$1.onClick(View.java:2144)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.view.View.performClick(View.java:2485)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.view.View$PerformClick.run(View.java:9080)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.os.Handler.handleCallback(Handler.java:587)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.os.Looper.loop(Looper.java:130)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at java.lang.reflect.Method.invokeNative(Native Method)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at java.lang.reflect.Method.invoke(Method.java:507)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at dalvik.system.NativeStart.main(Native Method)
05-04 11:53:00.096: E/AndroidRuntime(4281): Caused by: java.lang.reflect.InvocationTargetException
05-04 11:53:00.096: E/AndroidRuntime(4281):     at java.lang.reflect.Method.invokeNative(Native Method)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at java.lang.reflect.Method.invoke(Method.java:507)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at android.view.View$1.onClick(View.java:2139)
05-04 11:53:00.096: E/AndroidRuntime(4281):     ... 11 more
05-04 11:53:00.096: E/AndroidRuntime(4281): Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters.
05-04 11:53:00.096: E/AndroidRuntime(4281):     at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:577)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at com.crews.dineout.DineOutActivity.postData(DineOutActivity.java:243)
05-04 11:53:00.096: E/AndroidRuntime(4281):     at com.crews.dineout.DineOutActivity.imageclick(DineOutActivity.java:209)
05-04 11:53:00.096: E/AndroidRuntime(4281):     ... 14 more 
```

我是从移动设备上运行的，它有 wifi 连接而且我有互联网许可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:46:34.753

看起来您的 URI 无效。- [http://developer.android.com/reference/java/net/URI.html](http://developer.android.com/reference/java/net/URI.html)

你错过了这个计划 - http

```
HttpPost httppost = new HttpPost("http://192.168.1.112/andro/index.php/androctrl/test/") 
```

# powershell - Powershell 命令：rm -rf

> ID：10443891
> 
> 赞同：70
> 
> 时间：2012-05-04T06:36:46.973
> 
> 标签：powershell, command, cmd, rm

`rm`是删除项目，但参数`-rf`是做什么或表示什么？

* * *

每当我输入 help -rf 时，它都会在 powershell 中打印完整的可用命令列表。如果在 powershell 中键入 rm -rf 会发生什么？从阅读中我收集到它会删除驱动器上的所有内容？我不知道？

另外， rm -rf 是否与 rm -rf /

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-05-04T06:41:01.693

PowerShell 不是 UNIX。`rm -rf`是 UNIX shell 代码，而不是 PowerShell 脚本。

*   这是[PowerShell 上](http://ss64.com/ps/remove-item.html)`rm`（简称`Remove-Item`）的文档。
*   这是`rm` [UNIX 上](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/rm.html)的文档。

看到不同？

在 UNIX 上，`rm -rf`单独是无效的。您通过`rm`for *remove使用**recursive*和`r`for *force*的属性告诉它要做什么，但您没有告诉它应该执行什么操作。表示( *remove* )在目录及其子目录上具有属性( *recursive* ) 和( *force )。**`f`*`rm -rf /path/to/delete/``rm`*`r`*`f`*`/path/to/remove/`*****

 ***PowerShell 上正确的等效命令是：

```
rm C:\path\to\delete -r -fo 
```

请注意，`-f`在 PowerShell 中是不明确的`-Filter`，`-Force`因此`-fo`需要使用。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-05-04T06:43:06.660

你必须使用：

```
Remove-Item C:\tmp -Recurse -Force 
```

或（短）

```
rm C:\tmp -Recurse -Force 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-24T21:41:46.103

这是表现得像`rm -rf`. 它首先检查路径是否存在，然后尝试删除它。

```
if (Test-Path ./your_path) { rm -r -force ./your_path} 
```***

# qt - 如何将 QGraphicsScene/View 设置为特定坐标系

> ID：10443894
> 
> 赞同：22
> 
> 时间：2012-05-04T06:37:05.907
> 
> 标签：qt, projection, qgraphicsview, qgraphicsscene

我想在 a 中绘制多边形，`QGraphicsScene`但多边形具有纬度/经度位置。在等角投影中，坐标来自：

```
 ^
                      90
                       |
                       |
-180----------------------------------->180
                       |
                       |
                     -90 
```

如何将`QGraphicsScene`/设置`QGraphicsView`为这样的投影？

非常感谢，

卡洛斯。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-04T07:24:34.063

`QGraphicsScene::setSceneRect()`像这样使用：

```
scene->setSceneRect(-180, -90, 360, 180); 
```

如果您担心垂直轴被错误地翻转，您有几个选择来处理这个问题。一种方法是在进行任何涉及 y 坐标的计算时简单地乘以 -1。另一种方法是垂直翻转 QGraphicsView，使用`view->scale(1, -1)`以便正确显示场景。

下面是一个使用后一种技术的工作示例。在示例中，我对 QGraphicsScene 进行了子类化，以便您可以在视图中单击，自定义场景将使用`qDebug()`. 实际上，您实际上不需要继承 QGraphicsScene。

```
#include <QtGui>

class CustomScene : public QGraphicsScene
{
protected:
    void mousePressEvent(QGraphicsSceneMouseEvent *event)
    {
        qDebug() << event->scenePos();
    }
};

class MainWindow : public QMainWindow
{
public:
    MainWindow()
    {
        QGraphicsScene *scene = new CustomScene;
        QGraphicsView *view = new QGraphicsView(this);
        scene->setSceneRect(-180, -90, 360, 180);
        view->setScene(scene);
        view->scale(1, -1);
        setCentralWidget(view);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();
    return a.exec();
} 
```

# android - Android 4.0 内存问题

> ID：10443895
> 
> 赞同：2
> 
> 时间：2012-05-04T06:37:06.580
> 
> 标签：android, memory, layout

一开始我曾使用 2.2 开发过一个 Android 应用程序。它可以在 2.2 或 3.2 的手机或平板电脑上正常工作。

但是现在我已经在4.0.3的手机上试过了。有两个问题我还没有找到解决方案。

1.  内存不足问题：它说内存不足然后崩溃。我在2.2上没有遇到过。实际上，我只是在布局 xml 中设置了这些图像。我不确定 2.2 和 4.0 有什么区别。

2.  布局问题。布局不对。我使用 xml 文件来设置图像的位置和大小。我不知道为什么它不起作用，尤其是字体大小，值部分中的数字。它们与我在 android 2.2 上看到的完全不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:46:25.630

问题一：

这不是`2.2 - 4.0`问题，而是手机的内存差异。有了给定的信息，这就是我能说的 :) 也看看：[避免内存泄漏](http://developer.android.com/resources/articles/avoiding-memory-leaks.html)

问题二：

这就是为什么你建议使用 a`Layout`并且永远不要做绝对定位（我强烈怀疑你做了）！

看一下 ：

1.  [XML 布局](http://developer.android.com/guide/topics/ui/declaring-layout.html)
2.  [支持多屏](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:33:59.897

1）您应该在**ddms**或任何其他 eclipse 工具的帮助下，在 2.2 和 4.0 中监控应用程序中的内存和对象实例的数量。关于 Android 应用程序的内存分配，Android**最初**为每个应用程序分配一些堆内存（例如 4MB）用于运行应用程序，并且它还为每个应用程序设置了**最大内存分配**限制（例如 16MB）。如果应用程序需要更多最初分配的内存，它会在运行时扩展分配（即从 4MB 到 6MB 或 8MB 或更多，具体取决于要求）到最大内存（例如 16MB）。如果 App 需要比 Max Memory 更多的内存，则会发生**OutOfMemoryError**。[您可以在运行时](http://developer.android.com/reference/java/lang/Runtime.html)的帮助下监控最大内存和可用内存类和[调试](http://developer.android.com/reference/android/os/Debug.html)类。

2) 对于布局问题，永远不要使用像素值，始终使用 Dp 值，永远不要使用绝对布局。

为不同分辨率的设备使用九个补丁图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:41:59.210

我遇到了同样的问题。我怀疑它与硬件加速有关。从 3.x 开始（不确定具体是什么时候）硬件加速默认开启。在处理图形时，这似乎会导致很多问题（例如，您不能在启用硬件加速的情况下使用剪辑）。

抱歉，它不是一个完整的答案，但认为它可能会帮助您搜索答案。

* * *

我实际上只是弄清楚了我的应用程序的问题所在，并希望您遇到同样的问题。

尝试将您的资源重新定位到相应的可绘制文件夹（drawable-mdpi、hdpi 等）。显然drawable文件夹默认为drawable-mdpi，具有更高dpi的设备将扩展资源并将其加载，导致资源图像比您预期的要大。在我的情况下，我只有 1 个尺寸，所以我将我的大图像（如背景）放入 drawable-nodpi 中，并且我不再收到 OOM 错误。希望这可以帮助！

# windows-phone-7 - 广告提供商与 PhoneGap 应用程序的集成

> ID：10443899
> 
> 赞同：0
> 
> 时间：2012-05-04T06:37:33.997
> 
> 标签：windows-phone-7, cordova

如何将广告提供商与 PhoneGap 应用程序（适用于 windows phone）集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:58:12.600

我认为有几个答案。一种是编辑XAML页面，在页面中添加普通的silverlight控件。这将要求您摆弄 phonegap 提供的 xaml。这将使您可以访问 MS 广告控件和 Google 的 .net 广告控件。归根结底，PhoneGap 只是一个 Silverlight 页面，其中包含一个浏览器控件。所以你仍然可以编辑那个页面，但是你必须确保你没有搞砸PhoneGap库和页面。

另一种解决方案是找到一个基于 html 的广告控件。尽管您的广告提供商可能无法做到这一点。

# asp.net - 日期时间（月+年）与字符串比较

> ID：10443908
> 
> 赞同：1
> 
> 时间：2012-05-04T06:38:10.783
> 
> 标签：asp.net, datetime, asp.net-ajax, comparison

我有一个 TextBox 和 Extender AjaxCalander。选择日期时，它的工作正常，仅在 TextBox 中显示月份和年份。我的代码如下

```
 <asp:TextBox ID="txtCardExpiry" runat="server" Width="200px" /><span> MMYY</span>
 <ajaxToolkit:CalendarExtender runat="server" Format="MMyy" TargetControlID="txtCardExpiry" /> 
```

我想验证信用卡是否未过期

现在我如何`txtCardExpiry.Text`与今天的月份和年份进行比较

现在我正在使用

```
 int dtNowYear = Convert.ToInt16(DateTime.Now.Year.ToString().Substring(2, 2));
            int dtNowMonth = Convert.ToInt16(DateTime.Now.Month.ToString());
            int dtExpYear = Convert.ToInt16(txtCardExpiry.Text.Substring(2, 2));
            int dtExpMonth = Convert.ToInt16(txtCardExpiry.Text.Substring(0, 2));

            if (dtNowYear == dtExpYear && dtNowMonth > dtExpMonth)
            {
                lblMessage.Attributes.Add("class", "lblMessageError");
                lblMessage.Text =
                    "Credit Card expiry month and year cannot be less than todays month and year or your Credit Card has expired";
                return false;
            }
                 else if (dtNowYear > dtExpYear) 
                {
                    if (dtNowMonth > dtExpMonth)
                    {
                        lblMessage.Attributes.Add("class", "lblMessageError");
                        lblMessage.Text =
                            "Credit Card expiry month and year cannot be less than todays month and year or your Credit Card has expired";
                        return false;
                    }
                    return false;
                } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:45:13.133

尝试

```
txtCardExpiry.Text.Compare(DateTime.Now.ToString("MMyyyy")) 
```

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx) 必须说，MSDN 很有帮助。

# php - 如何使用 mysql_auth_module 注销？

> ID：10443910
> 
> 赞同：0
> 
> 时间：2012-05-04T06:38:15.567
> 
> 标签：php, authentication, authorization

阿帕奇 2.2，PHP 5.3

我可以成功登录，但是如何注销？

在 Apache 配置中：

```
<Directory /www/domain.com/adm>
    AuthName "MySQL group authenticated zone"
    AuthType Basic

    AuthMYSQLEnable on
    AuthMySQLUser user
    AuthMySQLPassword password
    AuthMySQLDB dbname
    AuthMySQLUserTable users
    AuthMySQLNameField email
    AuthMySQLPasswordField pass
    AuthMySQLGroupField group
    AuthMySQLUserCondition " status='on'"
</Directory> 
```

成功登录后，apache 设置`$_SERVER[PHP_AUTH_USER]`但无法更改/取消设置此值；

`apache_setenv('PHP_AUTH_USER', '');`也`session_destroy();`不要工作；

`Header("HTTP/1.0 401 Unauthorized");`没有做任何事情，至少对我的FF12来说；

如果我使用 401 提出另一个身份验证请求：

```
Header("WWW-Authenticate: Basic realm=\"My Realm\"");
Header("HTTP/1.0 401 Unauthorized"); 
```

它会生成登录表单，但我只想将用户重定向到 /adm 之外，**而无需**再次询问密码！

我正在阅读[http://www.php.net/features.http-auth](http://www.php.net/features.http-auth)很长一段时间，但要么我错过了一些东西（也许非常明显），要么就是无能为力。

那么我该如何注销/注销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:25:54.323

你一定要试试

```
function LogOut() {
    session_destroy();
    session_unset($_SESSION['session_id']);
    header("Location: /auth/", TRUE, 301);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:44:39.987

一旦三周没有胶水 - 我只是放弃使用 mysql_auth_module 的好主意并回退到通用身份验证。

如果您有任何想法 - 欢迎您。

# sql-server-2005 - COALESCE 在 SQL SERVER 中做了什么

> ID：10443911
> 
> 赞同：0
> 
> 时间：2012-05-04T06:38:15.610
> 
> 标签：sql-server-2005, coalesce

我想知道在这种情况下合并做什么，我知道它返回第一个非空值，并且我也通过了这个[链接](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.90%29.aspx)。

我想知道它在这里具体做了什么：

```
DECLARE @EMPNO NUMERIC(22,5)

SELECT @EMPNO = ''

SELECT @EMPNO = COALESCE(?, 0) 
```

我写这些语句的目的是如果@EMPNO 是空白的，我希望它被替换为零。恐怕我能够从这三个陈述中实现这一目标。

帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:41:21.500

我认为你必须这样做：

```
SELECT @EMPNO = COALESCE(@EMPNO, 0) 
```

你知道你也可以写

```
SET @EMPNO = COALESCE(@EMPNO, 0) 
```

您不能将 a 设置`NUMERIC`为空的 varchar。您必须将其设置为`NULL`. 所以你的完整代码应该是这样的：

```
DECLARE @EMPNO NUMERIC(22,5)
SELECT @EMPNO = NULL
SELECT @EMPNO = COALESCE(@EMPNO, 0) 
```

或者您甚至不需要将 设置`@EMPNO`为`NULL`。当你声明一个变量时，它是`NULL`默认的。所以你唯一需要的是：

```
DECLARE @EMPNO NUMERIC(22,5)
SELECT @EMPNO = COALESCE(@EMPNO, 0) 
```

如果您在 msdn 上阅读，它会说：

> 返回其参数中的第一个非空表达式。

参考[这里](http://msdn.microsoft.com/en-us/library/aa258244%28v=sql.80%29.aspx)

# git - 使更改在 master 和 branch 中都有效

> ID：10443913
> 
> 赞同：1
> 
> 时间：2012-05-04T06:38:33.703
> 
> 标签：git, version-control

首先，我不熟悉使用“git”。我正在使用 SourceTree 客户端。

我有以下情况。我已经从 git 存储库中检查了代码。我对代码做了一些改动。同时，在存储库中创建了一个新分支（例如“vv1”）。现在我想将我的更改提交给 master 和 vv1。任何人都可以在 SourceTree 的帮助下指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:50:57.090

提交到其中一个分支，然后你有一个选择：

*   如果分支没有分叉，则将所述分支合并到另一个分支中。这将执行快进。
*   如果分支已经分歧，您可以将提交挑选到另一个分支。

一个更大的问题是，您为什么要尝试提交两个单独的分支，而不是让 vv1 的作者完成该功能并在重新合并时解决问题？

# header-files - MPLab C18 v3.41 头文件

> ID：10443918
> 
> 赞同：1
> 
> 时间：2012-05-04T06:38:42.073
> 
> 标签：header-files, mplab

我是新手，所以很容易。

我正在“尝试”构建一个 LCD 测试程序，该程序由一位使用 XLCD.h 和 Delays.h 标头的讲师提供给我。问题是在构建过程中似乎没有链接头文件，因为编译器不断向我抛出一个关于未定义函数的错误。

> MPLINK 4.42，链接器设备数据库版本 1.7 版权所有 (c) 1998-2011 Microchip Technology Inc. 错误 - 在文件“./LCD_Main.o”中找不到符号“SetDDRamAddr”的定义。错误：1

我使用项目向导并选择了我的芯片...为我的芯片添加了 .lnk 文件，为 xlcd 和延迟添加了 .h 文件，添加了 p18cxxx.h 文件。
测试代码是经过验证的。我已经完成了顶部的#include，我什至将文件放在同一个目录中，然后使用了#include“xlcd.h”，但似乎没有什么对我有用。

是的，我已经两次检查了语法是否有错误，最终只是从头文件复制并粘贴到 main.c，所以不是这样。

看着错误，在我看来，只有原型可能被看到，而不是定义的函数。我认为这一切都是在后台使用魔法完成的，所以我不知道如何检查路径，或者即使它正在发生。

由于整个事情有点简单，我认为它应该是直截了当的，但事实并非如此。

我确信它一定只是一个简单的修复，但我已经为此工作了几个小时，我正准备将愚蠢的原型板和 PIC 扔到房间的另一头。

有人知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:53:06.210

您需要将链接器指向正确的库。

转到*项目-> 构建选项*。选择*目录*选项卡。在*Show Directories For*组合框中，选择*Library Search Path*。单击*新建*。

然后，选择包含您的库的目录。对于 C18，它可能（在 Windows 7 上）：

```
C:\Program Files (x86)\Microchip\mplabc18\v3.41\lib 
```

然后，您应该能够毫无问题地进行链接。

# performance - 大提交与小提交的 Git 性能

> ID：10443931
> 
> 赞同：8
> 
> 时间：2012-05-04T06:39:31.560
> 
> 标签：performance, git

抛开所有的编码标准和良好实践不谈，Git*本身*在技术上如何处理大提交与小提交。例如，在这两种情况下，Git 是否更智能地进行分支合并（例如更少的冲突），垃圾收集是否变得更有效率，或者类似的东西？或者有什么不同吗？

需要明确的是，我的意思是代码从 A 修改为 B 的场景，“巨大的提交”只是将代码从 A 直接更改为 B，而“小提交”有很多中间提交（比如，对于每个小的特征变化），但最终以完全相同的 B.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T06:58:24.173

“许多小提交”将使用更多空间，但差异可能不值得为丢失的历史付出代价。

对包文件本身的影响取决于以后有多少更改未更改。例如，如果后来的提交触及了先前的提交也触及的行，那么这些行的中间状态在历史上不会在一次大提交时可见，因此包文件中将没有对象来表示它们。

我无法想象分支上的提交数量会减少或增加合并的复杂性；但我不能就此发表权威言论，因为我还没有确切地研究过典型的递归合并是如何完成的。我的理解是，它相当于从它们合并（或拆分）的最后一点开始的 diff3 。在这种情况下，一个大的提交不会比许多小提交的效率更高或更低。

还有一个方面需要考虑，具体取决于时间。如果你在一个分支上工作，并且在你自己的提交之间定期合并上游分支，那么许多小的提交将产生更少的冲突，因为你将与上游分支保持更好的奇偶性，从而更少地偏离它。当需要合并回来时，这肯定会导致更少的问题。

垃圾收集在很大程度上不会受到影响，因为在这两种情况下，两种方法都没有悬空提交或松散对象。

总而言之，包文件在处理文本时通常足够高效，因此能够查看完整且纯粹的历史记录的好处通常超过了它所占用的额外空间的成本。

# ios - 我可以使用 Interface Builder 构建 RubyMotion 应用程序吗？

> ID：10443932
> 
> 赞同：22
> 
> 时间：2012-05-04T06:39:45.180
> 
> 标签：ios, interface-builder, rubymotion

[Ruby Motion](http://www.rubymotion.com)刚刚问世，截屏视频似乎没有说明您是否可以使用 Interface Builder 来构建您的界面并将它们集成到您的 RubyMotion 项目中。这样的事情可能吗？或者我真的有手工编写所有代码，更不用说为 iPhone/iPad 维护不同的代码了？

我的代表不够高，无法创建 ruby​​motion 标签，因此请在适当时提供帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-10T13:17:53.920

我只想指出，RubyMotion 1.3 现在支持自动编译`.xib`您放入`resources`文件夹的文件。所以现在工作流程变成了：

1.  使用 XCode创建`.xib`文件（无需创建项目，只需使用 File|New...|File）并将其保存到`resources`文件夹中。由于尚不支持插座，因此请注意为`tag`要在代码中使用的每个控件设置属性（您可以在“视图”标题下的每个组件的属性表中找到）。
2.  RubyMotion 会负责将您的`.xib`文件编译成一个`.nib`文件，所以请尽情享受 :)
3.  在您的`UIViewController`派生类中，使用 加载笔尖`loadNibNamed:owner:options:`，如下所示。
4.  在`viewDidLoad`中，使用 获取您的各种组件`viewWithTag:`并使用添加事件处理程序`addTarget:action:forControlEvents:`，如下所示。
5.  作为奖励，下次您想编辑您的 xib 时，只需执行`open resources/MyView.xib`，它只会启动 XCode 的好部分。

    ```
    class CalculatorViewController < UIViewController
        def loadView
            views = NSBundle.mainBundle.loadNibNamed "Keyboard", owner:self, options:nil
            self.view = views[0]
        end

        def viewDidLoad
            button = view.viewWithTag 1
            button.addTarget self, action:'buttonTapped:', forControlEvents:UIControlEventTouchUpInside
        end

        def buttonTapped(button)
            # ...
        end
    end 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T22:32:06.597

是的，您可以在 RubyMotion 中使用 Interface Builder。

位于资源目​​录中的 .xib 文件会自动编译为 .nib 文件并可供您的项目使用。

如果您愿意，甚至还有一种方法可以支持网点：

> [https://github.com/yury/ib#readme](https://github.com/yury/ib#readme)
> [http://ianp.org/2012/05/07/rubymotion-and-interface-builder/](http://ianp.org/2012/05/07/rubymotion-and-interface-builder/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:28:02.487

但是，如果您真的想使用 IB，那么您仍然可以使用它来布置您的 UI 并调用

```
NSBundle.mainBundle.loadNibNamed(MY_NIB_NAME, owner:self, options:nil) 
```

或类似的。我认为 RubyMotion 不会进行任何名称修改，因此您可以通过显式设置它们来使用 IB 中的 ruby​​ 类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T18:21:19.193

您可能可以在 IB 中构建接口并调用命令行工具将 XIB 编译为 NIB。

但是，您将无法连接出口或分配操作，因为 IB 无法解析 Ruby 源文件中的`IBOutlet`和`IBAction`标记。通常，NIB 加载代码会在加载您的 NIB 后为您建立这些连接。您必须自己在代码中执行此操作。

在 RubyMotion 的两个明显弱点中，对我来说这是最糟糕的。（另一个是缺乏代码完成将使编写 Cocoa API 变得非常乏味。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T14:29:41.260

卡布奇诺也有同样的问题。他们开发了一个名为 XcodeCapp 的工具：[https ://github.com/cappuccino/cappuccino/tree/master/Tools/XcodeCapp](https://github.com/cappuccino/cappuccino/tree/master/Tools/XcodeCapp)

它创建“虚拟”Obj-C 文件，您可以在 IB 中将您的出口和操作连接到这些文件，在后台自动解析它们，并使您能够使用 IB 来布局您的卡布奇诺 UI。

应该可以对 RubyMotion 采取类似的方法（如果你真的想使用 IB）。

*   约翰内斯

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-21T23:55:53.047

有人做到了：

这是一个教程视频：[https ://www.youtube.com/watch?v=cOapNvehbg4](https://www.youtube.com/watch?v=cOapNvehbg4)

这是网站[https://github.com/yury/ib](https://github.com/yury/ib)

额外提示：要查找 ruby​​motion 的包装器，请检查此源

[http://rubymotion-wrappers.com/](http://rubymotion-wrappers.com/)

希望这可以帮助

# r - 将矩阵上的行名和列名更改为数字

> ID：10443934
> 
> 赞同：1
> 
> 时间：2012-05-04T06:39:51.290
> 
> 标签：r

我正在构建一个与`bipartite`包一起使用的邻接矩阵。每一行和每一列代表两个不同类的实体，并代表第一类`m[i,j]`实体和第二类实体之间的交互。我目前有一个表格的数据框`i``j``df`

```
 s1   s2 weight
1   261  446      1
2   188  259      4
3   144 1119      1 
```

其中，例如，第 2 行表示权重为 4 的成员 188`s1`和 259之间的交互。`s2`所以`m[259,188]`应该是 4。但是，由于不是 1 和 1 之间的每个值`max(df$s1, df$s2)`都会被表示，因此使用普通索引将不起作用。如果可能的话，我想要这样的东西：

```
 [,144] [,188] [,261] 
 [259,]      0      4      0
 [446,]      0      0      1
[1119,]      1      0      0 
```

我知道我可以将列和行重命名为字符向量，但我认为将其设置为`as.character(unique(df$s1))`（类似地`s2`）并以这种方式对其进行索引会效率低下/笨拙。我还考虑保留 and 的唯一元素的向量`s1`并`s2`使用 eg `m[which(unique.s2 == i), which(unique.s1 == j)]`，但同样，这似乎是一个次优的解决方案。由于并非 min(s1) 和 max(s1) 之间的每个数字都在矩阵中，因此我不能只制作维度 c(max(s1), max(s2)) 并直接使用索引。

有没有更好的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T08:04:22.077

您可以将行名和列名用作以字符形式给出的索引。

首先使用排序索引创建矩阵（根据您的示例，s2 是行）。

```
s1 <- c(261, 188, 144); s2 <- c(446, 259, 1119)
m <- matrix(0, length(s2), length(s1), dimnames = list(as.character(sort(s2)), as.character(sort(s1))))

weight <- c(1, 4, 1)
m[cbind(as.character(s2), as.character(s1))] <- weight

     144 188 261
259    0   4   0
446    0   0   1
1119   1   0   0

m <- matrix(0, 261, 1119)
x[cbind(s1,s2)] <- weight 
```

如果您想要`NA`而不是零作为默认值，请将其替换为`as.numeric(NA)`. 您没有指定行数或列数，所以我只使用了最大值。

# ios - 将大型 CSV 文件加载到核心数据中的最快方法是什么

> ID：10443936
> 
> 赞同：6
> 
> 时间：2012-05-04T06:40:02.557
> 
> 标签：ios, sqlite, core-data, csv

**结论**
我认为问题已解决。
看起来问题与方法无关，但 XCode 在构建之间没有正确清理项目。
看起来在所有这些测试之后，正在使用的 sqlite 文件仍然是第一个没有被索引的文件......
当心 XCode 4.3.2，我只有 Clean not clean 的问题，或者将文件添加到项目不会自动添加到捆绑资源中...
感谢不同的答案..

**更新 3**
由于我邀请任何人尝试相同的步骤来查看他们是否得到相同的结果，让我详细说明我所做的：
我从空白项目开始
我定义了一个具有一个实体、3 个属性（2 个字符串、1 个浮点数）的数据模型
第一个字符串
![在此处输入图像描述](../Images/e97764ab7d673c774d6cae8504e2b855.png)

在没有finishLaunchingWithOptions中被索引，我正在调用：

```
[self performSelectorInBackground:@selector(populateDB) withObject:nil]; 
```

populateDb 的代码如下：

```
-(void)populateDB{
NSLog(@"start");
NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
NSManagedObjectContext *context;
if (coordinator != nil) {
    context = [[NSManagedObjectContext alloc] init];
    [context setPersistentStoreCoordinator:coordinator];
}

NSString *filePath = [[NSBundle mainBundle] pathForResource:@"input" ofType:@"txt"];  
if (filePath) {  
    NSString * myText = [[NSString alloc]
                               initWithContentsOfFile:filePath
                               encoding:NSUTF8StringEncoding
                               error:nil];
    if (myText) {
        __block int count = 0;

        [myText enumerateLinesUsingBlock:^(NSString * line, BOOL * stop) {
            line=[line stringByReplacingOccurrencesOfString:@"\t" withString:@" "];
            NSArray *lineComponents=[line componentsSeparatedByString:@" "];
            if(lineComponents){
                if([lineComponents count]==3){
                    float f=[[lineComponents objectAtIndex:0] floatValue];
                    NSNumber *number=[NSNumber numberWithFloat:f];
                    NSString *string1=[lineComponents objectAtIndex:1];
                    NSString *string2=[lineComponents objectAtIndex:2];
                    NSManagedObject *object=[NSEntityDescription insertNewObjectForEntityForName:@"Bigram" inManagedObjectContext:context];
                    [object setValue:number forKey:@"number"];
                    [object setValue:string1 forKey:@"string1"];
                    [object setValue:string2 forKey:@"string2"];
                    NSError *error;
                    count++;
                    if(count>=1000){
                        if (![context save:&error]) {
                            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
                        }
                        count=0;

                    }
                }
            }

        }];
        NSLog(@"done importing");
        NSError *error;
        if (![context save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
        }

    }  
}
NSLog(@"end");
} 
```

其他一切都是默认的核心数据代码，没有添加任何内容。
我在模拟器中运行它。
我去 ~/Library/Application Support/iPhone Simulator/5.1/Applications//Documents
有生成的sqlite文件

我把它复制到我的包中

我注释掉对populateDb的调用

我编辑persistentStoreCoordinator来复制首次运行时从捆绑包到文档的 sqlite 文件

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator 
{
@synchronized (self)
{
    if (__persistentStoreCoordinator != nil)
        return __persistentStoreCoordinator;

    NSString *defaultStorePath = [[NSBundle mainBundle] pathForResource:@"myProject" ofType:@"sqlite"];
    NSString *storePath = [[[self applicationDocumentsDirectory] path] stringByAppendingPathComponent: @"myProject.sqlite"];

    NSError *error;
    if (![[NSFileManager defaultManager] fileExistsAtPath:storePath]) 
    {
        if ([[NSFileManager defaultManager] copyItemAtPath:defaultStorePath toPath:storePath error:&error])
            NSLog(@"Copied starting data to %@", storePath);
        else 
            NSLog(@"Error copying default DB to %@ (%@)", storePath, error);
    }

    NSURL *storeURL = [NSURL fileURLWithPath:storePath];

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) 
    {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}    
} 
```

我从模拟器中删除应用程序，我检查 ~/Library/Application Support/iPhone Simulator/5.1/Applications/ 现在已删除
我重新构建并再次启动
正如预期的那样，sqlite 文件被复制到 ~/Library/Application Support/ iPhone模拟器/5.1/Applications//文档

**但是文件的大小比捆绑包中的要小，显着！** **此外，使用这样的谓词进行简单查询 predicate = [NSPredicate predicateWithFormat:@"string1 == %@", string1]; 清楚地表明 string1 不再被索引**

之后，我创建了一个新版本的数据模型，进行了无意义的更新，只是为了强制进行轻量级迁移
如果在模拟器上运行，迁移需要几秒钟，数据库大小翻倍现在，相同的查询只需不到一秒的时间即可返回，而不是几分钟。
这将解决我的问题，强制迁移，但同样的迁移在 iPad 上需要 3 分钟并且发生在前台。
所以这就是我现在所处的位置，对我来说最好的解决方案仍然是防止索引被删除，在启动时任何其他导入解决方案都需要太多时间。
如果您需要更多说明，请告诉我...

**更新 2**
因此，到目前为止，我得到的最好结果是使用从具有类似数据模型的快速工具生成的 sqlite 文件为核心数据数据库播种，但在生成 sqlite 文件时没有设置索引。然后，我将这个 sqlite 文件导入核心数据应用程序并设置索引，并允许进行轻量级迁移。对于新 iPad 上的 200 万条记录，此迁移剧照需要 3 分钟。最终的应用程序应该有这个数量的 5 倍的记录，所以我们仍然在寻找一个很长的处理时间。如果我走那条路，新的问题将是：可以在后台执行轻量级迁移吗？

**更新**
我的问题不是如何创建一个工具来填充核心数据数据库，然后将 sqlite 文件导入我的应用程序。
我知道该怎么做，我已经做过无数次了。
但直到现在，我还没有意识到这种方法可能会产生一些副作用：在我的例子中，当以这种方式导入 sqlite 文件时，结果数据库中的索引属性显然被“未索引”。
如果您能够验证在此类传输后任何索引数据仍然被索引，我很想知道您如何进行，或者以其他方式有效地播种此类数据库的最佳策略是什么。

**原来的**

我有一个包含 4 列、字符串和浮点数的大型 CSV 文件（数百万行）。这适用于 iOS 应用程序。

我需要在第一次加载应用程序时将其加载到核心数据中。

该应用程序在数据可用之前几乎无法运行，因此加载时间很重要，因为第一次使用的用户显然不希望应用程序在能够运行之前加载 20 分钟。

现在，我当前的代码在新 iPad 上需要 20 分钟来处理一个 200 万行的 csv 文件。

我正在使用后台上下文来不锁定 UI，并每 1,000 条记录保存一次上下文

我的第一个想法是在模拟器上生成数据库，然后在首次启动时将其复制/粘贴到文档文件夹中，因为这是播种大型数据库的常见非官方方式。不幸的是，索引似乎无法在这样的传输中幸存下来，尽管数据库在几秒钟后就可以使用，但性能很糟糕，因为我的索引丢失了。我已经发布了一个关于索引的问题，但似乎没有一个好的答案。

所以我要找的是：

*   一种提高在核心数据中加载数百万条记录的性能的方法
*   如果数据库在第一次启动时被预加载和移动，这是一种保留我的索引的方法
*   处理这种情况的最佳实践。我不记得使用过任何需要我在第一次使用前等待 x 分钟的应用程序（但也许是 The Daily，那是一次糟糕的体验）。
*   任何让用户在不知不觉中等待的创造性方法：在浏览教程时进行后台导入等......
*   不使用核心数据？
*   ...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T06:43:56.217

使用 Cocoa 编写的离线应用程序（例如，命令行实用程序）预生成数据库，该应用程序在 OS X 上运行，并使用与 iOS 相同的 Core Data 框架。您无需担心“索引是否存在”或任何其他问题——输出是 Core Data 生成的 .sqlite 数据库文件，iOS 应用程序可以直接立即使用。

只要您可以离线生成数据库，这是迄今为止最好的解决方案。我自己已经成功地使用这种技术为 iOS 部署预先生成了数据库。查看我以前的问题/答案以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:29:59.527

我刚开始使用 SQLite，我需要将数据库集成到我的一个应用程序中，该应用程序将在 SQLite 数据库中包含大量索引数据。我希望我可以做一些方法，我可以将我的信息批量插入 SQLite 文件并将该文件添加到我的项目中。在发现并阅读了您的问题、提供的答案和大量评论后，我决定查看 SQLite 源代码，看看我是否可以对这个问题做出正面或反面。

我最初的想法是，SQLite 的 iOS 实现实际上是在丢弃你的索引。原因是您最初在 x86/x64 系统上创建数据库索引。iOS 是 ARM 处理器，数字的处理方式不同。如果您希望您的索引快速，您应该以这样一种方式生成它们，以便它们针对将在其中搜索它们的处理器进行优化。

由于 SQLite 适用于多个平台，因此可以删除在另一个架构中创建的任何索引并重新构建它们。然而，由于没有人愿意等待索引在第一次被访问时重建，SQLite 开发人员很可能决定只删除索引。

在深入研究 SQLite 代码后，我得出结论，这很*可能*发生。如果不是出于处理器体系结构的原因，我确实找到了代码（请参阅[`analyze.c`](https://github.com/smparkes/sqlite/blob/master/src/analyze.c)参考资料中的其他元信息[`sqliteint.h`](https://github.com/smparkes/sqlite/blob/master/src/sqliteInt.h)），如果索引是在意外上下文中生成的，则它们会被删除。我的预感是驱动这个过程的上下文是如何为现有密钥构建底层 b-tree 数据结构。如果当前 SQLite 实例无法使用该密钥，则会将其删除。

值得一提的是，iOS Simulator 就是一个模拟器。它不是硬件的模拟器。因此，您的应用程序运行在伪 iOS 设备上，运行在 x86/x64 处理器上。

当您的应用程序和 SQLite DB 加载到您的 iOS 设备时，会加载一个 ARM 编译的变体，该变体还链接到 iOS 中的 ARM 编译库。我找不到与 SQLite 相关的 ARM 特定代码，所以我想 Apple 必须将其修改为适合他们的套装。这也可能是问题的一部分。这可能不是根 SQLite 代码的问题，它可能是 Apple/ARM 编译变体的问题。

我能想出的唯一合理的解决方案是您可以创建一个在您的 iOS 机器上运行的生成器应用程序。运行应用程序，构建密钥，然后从设备中提取 SQLite 文件。我想这样的文件可以在所有设备上运行，因为 iOS 使用的所有 ARM 处理器都是 32 位的。

同样，这个答案是一个有根据的猜测。我将把你的问题重新标记为 SQLite。希望大师可以发现这一点并能够权衡这个问题。为了自己的利益，我真的很想知道真相。

# input - JasperReports 动态输入控件

> ID：10443938
> 
> 赞同：2
> 
> 时间：2012-05-04T06:40:03.660
> 
> 标签：input, jasper-reports, jasperserver

我目前正在尝试创建一个带有一些特殊输入控制行为的 JasperReport 报告。我的需求是：

*   四个输入控件，其中两个是日期框，另一个是单选按钮
*   根据单选按钮的选择，其中一个数据框应该可见或不可见
*   因此，如果选择选项 1，则显示两个日期框；如果选择了选项 2，则只显示一个日期框

我想知道是否有一个“干净”的解决方案 - 没有找到任何东西。

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:11:51.323

Print when 表达式与 JasperReports Server 上的输入控件无关。

没有内置支持根据不同的值隐藏和显示输入控件。级联输入控件的基础设施当然可以扩展来实现这一点……但这不是微不足道的。

我将采用的路径是自定义显示输入控件的 .jsp 页面。JasperReports Server Ultimate Guide 中有一个名为“自定义输入控件表单”的部分，它可以让您开始走这条路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T06:51:38.073

对于日期框部分，您可以`print when expression`用来决定报告的某些块是否可见。

对于其他“输入”，如果您的意思是要在报告中显示一些数据，您可以在报告中创建一些数据，然后在导出报告之前`Parameter`设置来自用户的输入。`Parameter`

# java - 解释挥杆时使用哪种布局

> ID：10443939
> 
> 赞同：-1
> 
> 时间：2012-05-04T06:40:04.487
> 
> 标签：java, swing, layout

swing中有很多布局管理器，所以当我们不得不选择那些布局管理器时。我是swing编程的初学者。请给我详细的解释或任何链接也有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T07:04:07.987

Simple answer: it's not easy job to decide what [LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html) would be correct for your too broad question.

*   you can use one of the standard LayoutManagers

*   you can combine standard LayoutManagers, e.g. each of JPanel can have the same or different LayoutManager, common as Nested Layout

*   you can use newer or custom LayoutManagers, e.g. MigLayout

*   not easy job and required very good knowledge how the LayoutManager works

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T06:41:46.070

取决于您的要求，学习一些[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)并决定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T06:41:58.573

你可以在这里找到一个很好的解释：[布局管理](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T06:43:49.273

这取决于您的要求。一旦[您可视化每个布局管理器如何更改组件的位置/排列](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。您可以选择符合您要求的布局。

# php - php日期函数

> ID：10443940
> 
> 赞同：0
> 
> 时间：2012-05-04T06:40:05.437
> 
> 标签：php, date

我无法使用以下 php 函数查看我的位置时间：

```
echo date("y-m-d h:m:s A"); 
```

它的显示时间是**12-05-05 08:05:12 AM** 但现在是**12-05-05 12:40:12 PM**

任何人都可以解决这个问题..
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:43:15.267

设置 setlocale 函数。[这里是描述](http://php.net/manual/en/function.setlocale.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:49:09.260

**在php.ini**中设置您的首选时区：

```
[Date]
; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone = Asia/Manila 
```

您可以在[此处](http://www.php.net/manual/en/timezones.php)查看支持的时区列表。

或者您可以采用其他方式，使用[`date_default_timezone_set()`](http://www.php.net/manual/en/function.date-default-timezone-set.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:45:24.763

您正在使用 m，但它用于表示月份，而不是分钟。

这可能是您想要做的：

```
echo date("y-m-d h:i:s A"); 
```

之后，您要么使用了错误的时区，要么服务器时间设置错误。如果您有权访问服务器，请`date`在终端中运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:42:21.380

修复你的服务器时间，或者使用这个：

[http://php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:49:24.590

除了布莱克评论，我建议尝试 [修复您的时区](http://php.net/manual/en/function.date-default-timezone-set.php)，添加 +/- 时间您需要时间，例如

```
$timediff = 10;

$diff= $timediff+ ($timediff* 60 * 60) 
```

# jquery - 如何指定自定义元素来显示自动补全？

> ID：10443944
> 
> 赞同：0
> 
> 时间：2012-05-04T06:40:28.310
> 
> 标签：jquery, jquery-autocomplete, jquery-ui-autocomplete

我想在单独的 中显示建议的自动完成`div`，而不是显示在指定的自动完成小部件上的弹出菜单。这样做的原因是：我们使用自动完成来帮助用户看到他们即将尝试重复输入。当他们在输入字段中键入时，一个 div 将显示渐进匹配。

我正在使用带有远程数据源的自动完成示例代码“birds”进行测试：

```
<script>
  $(function() {
    function log( message ) {
      $( "<div/>" ).text( message ).prependTo( "#log" );
      $( "#log" ).scrollTop( 0 );
    }

  $( "#birds" ).autocomplete({
    source: "search",
    minLength: 2,
    select: function( event, ui ) {
      log( ui.item ?
        "Selected: " + ui.item.value + " aka " + ui.item.id :
        "Nothing selected, input was " + this.value );
      }
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:45:37.300

你的意思是这样的：

```
$(function() {
    function log( message ) {
      $( "<div/>" ).text( message ).prependTo( "#log" );
      $( "#log" ).scrollTop( 0 );
    }

  $( "#birds" ).autocomplete({
    source: "search",
    minLength: 2,
    select: function( event, ui ) {
      $('.newDiv ul').empty();
      },
     change: function(event, ui) {
        $('.newDiv ul').empty();
     }
    }).data('autocomplete')._renderItem = function(ul, item) {    
      return $('<li/>')
        .data('item.autocomplete', item)
        .append(item.value)
        .appendTo($('.newDiv ul'));
    };
  }); 
```

html:

```
<div class="newDiv"><ul></ul></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:58:58.007

虽然自动完成中没有规定可以实现您想要的，但这里的这个技巧可能对您有用 -[如何自定义 jquery 自动完成以在 DIV 中显示](https://stackoverflow.com/questions/5915496/how-to-customize-jquery-autocomplete-for-displaying-in-a-div)

# mongodb - MongoDB $ne 解释

> ID：10443948
> 
> 赞同：3
> 
> 时间：2012-05-04T06:40:57.050
> 
> 标签：mongodb, mongodb-query

官方的 MongoDB api 很少写关于 $ne [http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24ne)

所以当我遇到类似的事情时

```
db.papers.update({"authors cited" : {"$ne" : "Richie"}},
... {$push : {"authors cited" : "Richie"}}) 
```

我别无选择，只能变得完全糊涂。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:47:02.320

这会将“Richie”添加到尚未将“Richie”作为作者的论文的引用作者列表中。

另一种方法是使用[`$addToSet`](http://www.mongodb.org/display/DOCS/Updating#Updating-%24addToSetand%24each).

> 但是，我怎么知道 {"authors quoted" : {"$ne" : "Richie"}} 是否表示列表中与“author被引用”相对应的元素，与“author被引用”对应的值？

这有点令人困惑。通常（我确信有例外，但应该记录这些例外），所有选择器都针对多值字段的单个值。在 Mongo 中，这称为[“多键”](http://www.mongodb.org/display/DOCS/Multikeys)。

请注意，这使我最初假设您的查询将针对至少有一位作者不是 Richie 的所有论文。然后我检查了一下，结果证明是错误的。为您的问题+1，因为这确实需要更好地记录。

# java - Java：writeObject 与 writeExternal 的效率

> ID：10443951
> 
> 赞同：19
> 
> 时间：2012-05-04T06:41:04.983
> 
> 标签：java, serialization

据说Java的默认序列化机制效率不高，因为a）它通过通常很慢的反射发现要写入/读取的字段b）它将额外的数据写入流。

提高效率的一种方法是实现 Externalizable 及其 writeExternal/readExternal 方法。

问题来了：如果我改为提供 'writeObject/readObject' 方法并且不在其中调用 deafiltWriteObject/defaultReadObject，那么这种机制将不会使用反射来确定要写入/读取的字段，而且它不会写入额外的要流式传输的数据（或者会吗？不确定）。那么从效率的角度来看，实现上面提到的 writeObject/readObject 是否与实现 Externalizable 相同？或者后一种选择是否提供了一些更实际的好处，而前者没有？

编辑：当然，不同之处在于当实现 readObject/writeObject 的 Serializable 类被子类化时，如果子类有自己的 readObject/writeObject，它们不需要调用 super 的 readObject/writeObject。如果超类/子类改为实现 Externalizable，则不是这样。在这种情况下，super 的 writeExternal/readExternal 需要显式调用。*但是，从效率的角度来看，这种差异是无关紧要的。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T06:45:23.003

在选择接下来要调用哪个类/writeObject/readObject 方面仍有一些开销。但它显着减少。

这可以执行与 Externalizable 相同的操作，具体取决于您正在做什么以及您是否使用它为您提供的额外选项。例如 readObject 假设您每次都创建一个新对象，Externalizable 具有 readResolve 这意味着您可以重用对象。

[http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/input.html](http://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/input.html)

在许多情况下，回收对象是加速反序列化的“下一步”。（假设这是您的选择）

[http://vanillajava.blogspot.co.uk/2011/10/recycling-objects-to-improve.html](http://vanillajava.blogspot.co.uk/2011/10/recycling-objects-to-improve.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T08:36:48.683

在试验和浏览序列化机制的代码时发现了一些东西：

1）如果发现对象是Externalizable，则将其强制转换为Externalizable，并在其上调用相应的方法；而对于可序列化对象，它会反射性地检查它是否具有 readObject/writeObject。所以也许这会让它稍微慢一点，

2）Externalizable写入的数据量比readObject/writeObject的Serializable略少（我在写B的对象时发现以下代码有1个字节的差异）。

对于外部化：

```
static class A implements Externalizable
{
    @Override
    public void writeExternal(ObjectOutput out) throws IOException 
    {
        System.out.println("A write called");
    }

    @Override
    public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException 
    {
        System.out.println("A read called");
    }       
}

static class B extends A implements Externalizable
{       
    @Override
    public void writeExternal(ObjectOutput out) throws IOException 
    {
        super.writeExternal(out);
        System.out.println("B write called");
    }

    @Override
    public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException 
    {
        super.readExternal(in);
        System.out.println("B read called");
    }       
} 
```

对于可序列化：

```
static class A implements Serializable
{
    private void writeObject(ObjectOutputStream out) throws IOException 
    {
        System.out.println("A write called");
    }

    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException 
    {
        System.out.println("A read called");
    }       
}

static class B extends A implements Serializable
{       
    private void writeObject(ObjectOutputStream out) throws IOException 
    {           
        System.out.println("B write called");
    }

    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException 
    {           
        System.out.println("B read called");
    }       
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-13T15:29:21.523

就类设计而言，主要区别在于它`Serializable`适用于任何类，而`Externalizable`仅适用于具有公共默认（无参数）构造函数的可变类。

# java - 我收到声纳正确性错误 - 字段的双重分配

> ID：10443956
> 
> 赞同：0
> 
> 时间：2012-05-04T06:41:22.790
> 
> 标签：java

作为一名开发人员，我处于早期阶段，需要帮助来解决 Sonar 错误，该错误表示以下代码的字段双重分配。

```
//Inside constructor
list1 = new ArrayList();
....
...
// in some method
  if(description.equalsIgnoreCase(MAPPED_CATIA_MODELS)) {
        tempList = new ArrayList();
        tempList = list1 ; // gives error here as "Correctness - Double assignment of field."
        addKey = true;
      } 
```

请建议需要更改的内容。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:45:14.707

声纳建议您删除其中之一

`tempList = new ArrayList();`

或者

`tempList = list1;`

关键是在您创建了一个 ArrayList 之后，您用对 list1 的引用覆盖了对它的引用。的结果`new ArrayList()`立即被丢弃并永远消失。

# android - 我的应用不适用于 Google Play 上的平板设备

> ID：10443964
> 
> 赞同：22
> 
> 时间：2012-05-04T06:41:58.440
> 
> 标签：android, publish, google-play

我 2 天前在 Google Play 上发布了我的应用程序。由于某些原因，我只能在手机的 Google Play 中看到它。如果我在三星 Galaxy Tab 上搜索它，它不会出现。

在 manifest.xml 我没有写任何类似的东西：

```
 android:largeScreens="false" 
```

此外，据我所知，此标签默认设置为“true”。

谁能告诉我一些关于这个问题的事情？

在网络浏览器的谷歌播放中，我看到了以下信息：

此应用程序与您的某些设备兼容。

-Samsung GT-P7500 此项目与您的设备不兼容。

-沃达丰三星GT-I9000

-HTC HTC Sensation Z710e

= = = 编辑 = = 这是我的清单，正如你所问的：

我也使用电话和电话经理..这可能是问题吗？我必须为标签制作其他版本还是什么？

也许`android:largeScreens="false"` 这是默认的？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.KeySoft.OpenGuide"
    android:versionCode="2"
    android:versionName="1.1" >
   <uses-library android:name="com.google.android.maps" />

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>"
    <uses-permission android:name="android.permission.ACCES_LOCATION_EXTRA_COMMANDS"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>   
    <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"/>   

    <application
       android:icon="@drawable/ic_launcher"
       android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

         <activity
            android:name=".LoadingScreen"
            android:theme="@android:style/Theme.NoTitleBar"
            android:label="@string/app_name" >
         <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
         </intent-filter>
         </activity>

         <activity 
         android:name="Top20"
         android:theme="@android:style/Theme.NoTitleBar">
         </activity>

         <activity 
         android:name="ShopActivity"
         android:theme="@android:style/Theme.NoTitleBar">
         </activity>

         <activity 
         android:name="Highlighted"
         android:theme="@android:style/Theme.NoTitleBar">
         </activity>

         <activity 
         android:name="Favourites"
         android:theme="@android:style/Theme.NoTitleBar">
         </activity>

         <activity 
         android:name="Near"
         android:theme="@android:style/Theme.NoTitleBar">
         </activity>

         <activity 
         android:configChanges="keyboardHidden"
         android:windowSoftInputMode="stateHidden"
         android:name="Search"
         android:theme="@android:style/Theme.NoTitleBar">
         </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-04T07:51:42.407

如果清单中未声明“android:largeScreens”，则该值为 true。您是否使用任何其他功能？例如，拨打电话。

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
<uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature> 
```

您可以将这对语句添加到您的清单中，它不会强制设备支持电话。但是，如果用户使用不支持的设备，您可能需要检查用户是否可以在您的活动中使用该“呼叫”功能。对于可能被 Google Play 过滤的其他功能，您可以访问此处：http: [//developer.android.com/guide/appendix/market-filters.html](http://developer.android.com/guide/appendix/market-filters.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T18:24:56.867

您可能遇到与此处提到的相同的问题： [Android Market：“此项目与您的设备不兼容。”](https://stackoverflow.com/questions/9471448/android-market-this-item-is-not-compatible-with-your-device/16655736#16655736)

简而言之，对于像三星 Galaxy Tab 这样的 10 英寸平板电脑，您还必须设置`xlargeScreens`为 true。

正如 Key 在本次讨论中提到的那样，Google Play 最近实施了更严格的过滤规则，这`xlargeScreens`可能只是一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T06:52:03.470

开发人员文档建议明确添加此内容，因为它可能因版本而异

> 安卓：大屏幕
> 
> 指示应用程序是否支持更大的屏幕尺寸。大屏幕被定义为比“普通”手机屏幕大得多的屏幕，因此可能需要应用程序部分特别注意才能充分利用它，尽管它可能依赖于系统调整大小来填充屏幕。此默认值实际上在某些版本之间有所不同，因此最好始终明确声明此属性。请注意，将其设置为“false”通常会启用屏幕兼容模式。

还要确保`android:minSdkVersion`和设置正确。`android:targetSdkVersion``android:maxSdkVersion`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T10:59:57.800

似乎他们最近更改了 Google Play 中平板电脑支持过滤器的严格程度？在 Google I/O 2013 上展示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-06T08:05:39.490

我认为，如果您将此鳕鱼放入清单中，它将正常工作。

```
<supports-screens
    android:resizeable="true"
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true"/> 
```

# c - 如何使用 C 获取系统中附加的所有 USB 可移动存储的列表？

> ID：10443969
> 
> 赞同：0
> 
> 时间：2012-05-04T06:42:11.263
> 
> 标签：c, usb-flash-drive

我正在编写一个程序，它将一些文件复制到 USB 可移动存储中。所以我需要一个所有可用可移动存储的列表。我正在使用 C。便携性是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:36:47.773

[可能是 libusbx](http://libusbx.org/)

> libusbx 是一个提供对 USB 设备的通用访问的库。作为一个库，它旨在供开发人员使用，以促进与 USB 硬件通信的应用程序的开发。
> 
> 它是可移植的：使用单个跨平台 API，它可以访问 Linux、OS X、Windows 和 OpenBSD 上的 USB 设备。
> 
> 它是用户模式：应用程序与设备通信不需要特殊特权或提升。
> 
> 它与版本无关：支持所有版本的 USB 协议，从 1.0 到 3.0（最新）。

参见[libusb_get_device_list](http://libusbx.sourceforge.net/api-1.0/group__dev.html#gac0fe4b65914c5ed036e6cbec61cb0b97)

```
libusb_context * usb_ctx = NULL;

int main()
{
...
libusb_init(&usb_ctx);
...
libusb_exit(usb_ctx);
...
} 

some_func()
{
...
libusb_device **list;
ssize_t number_of_devices = libusb_get_device_list(usb_ctx, &list);
...
} 
```

（警告我只是在网上找到的，我没有个人经验，代码没有经过测试，看起来你需要在使用前调用libusb_init/libusb_exit 见

*http://libusbx.sourceforge.net/api-1.0/group__lib.html*

和

*http://libusbx.sourceforge.net/api-1.0/contexts.html.h*

# javascript - 为什么自聚焦在 javascript 中不起作用？

> ID：10443972
> 
> 赞同：0
> 
> 时间：2012-05-04T06:42:27.153
> 
> 标签：javascript, jquery, javascript-events

每当从任何输入元素触发模糊事件时，我都想将焦点设置到一个特定元素。

当我试图关注触发`blur`事件的同一元素时，就会出现此问题。

为什么*这只有效*，当我试图关注的元素***不是***触发事件的元素时？

> **[[问题说明]](http://jsfiddle.net/Lx6Cx/)** ***和按照小提琴的解释：***
> 
> *   我试图关注的元素是`col0`
> *   除非触发模糊事件的元素不是**`col0`**完美的
> *   `col0`但是当从自身触发模糊时，则`$("#col0").focus()`不起作用。

**问：**为什么？& 解决方法/解决方案是什么？

[**PS：**我只是想知道行为的原因和克服它的方法。对可用性的担忧**不是问题**。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:45:53.410

看起来您正试图将注意力集中在除您所在的控件之外的所有内容上。尝试这个：

```
$('input:not(#idofcontrol)').blur(function() {
    $('#idofcontrol').focus();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:01:10.063

这对我来说在FF中有效......

```
$('input').on('blur', function() {
    setTimeout(function () { $("#col0").focus(); }, 0);
}); 
```

它只是`UI`稍微推迟一个动作（在处理完模糊事件之后）。

**警告：**在 jsfiddle 中，FF 不会让你在尝试后编辑代码，一旦你进入输入，你就会卡在那里直到刷新

**更新：**解释很棘手，因为这是 FF 中的实现问题（因为 Chrome 和 IE 的行为与您预期的一样），我的猜测是当您在同一元素的事件处理程序中时，FF 会阻止触发相关事件（一件事情这可能会导致无限循环），使用 setTimeout 您在离开处理程序后不久就会触发事件（甚至 UI 也有机会重绘自身）

# android - 从资产中的文件夹访问文件

> ID：10443973
> 
> 赞同：0
> 
> 时间：2012-05-04T06:42:28.410
> 
> 标签：android, html, android-assets

我有一个显示资产文件夹中的 html 文件的应用程序。
现在的问题是，如果只有一个 html，一切正常，但如果我有超过 1 个 html，我该如何引用它？

* * *

仅存在 1 个 html 时的文件夹结构就像
![屏幕 1](../Images/f61674d41d4622f143463546d2185760.png)

我指的是html文件如下：
`InputStream input = this.getAssets().open("index.html");`

* * *

但在多个 html 的情况下，它**应该/将会**像
![屏幕 2](../Images/6ad77a5180eafe74dbebeef039bd34f9.png)

* * *

那么，在这种情况下，我如何引用不同的 html？
**即如何从文件夹中的文件夹中引用`assets`文件？**

由于我不知道如何继续，任何帮助表示赞赏......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T06:50:30.627

您可以像这样以 URL 的形式访问它：

`"file:///android_asset/myfile.html"`

因此，在 WebView 中，您可以使用以下方法：

`loadUrl("file:///android_asset/myfile.html")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:59:53.073

你可以这样参考

> WebView 网络视图；
> 
> ```
> webview=(WebView)findViewById(R.id.webView1);
> 
>         webview.getSettings().setJavaScriptEnabled(true);
> 
>         webview.loadUrl("file:///android_asset/HTML 1/index.html");   
> 
>         webview.addJavascriptInterface(new MyJavaScriptInterface(), "Android"); 
> ```

```
final class MyJavaScriptInterface
    {
        public void ProcessJavaScript(final String scriptname, final String args)
            {             
                mHandler.post(new Runnable()
                    {
                        public void run()
                            {
                             //ToDo Something here...
                            }
                    });
            }
    } 
```

# android - Android-如何创建自定义对话框/警报

> ID：10443982
> 
> 赞同：0
> 
> 时间：2012-05-04T06:43:36.780
> 
> 标签：android

嗨，我有一个游戏关卡屏幕..当触摸一个关卡玩时，我需要为其提供指令警报/弹出窗口（可滚动）。

它应该是定制的......喜欢在愤怒的小鸟中弹出......

自己的背景图片没有边框，只有确定按钮

请帮助我我即将发布到 GOOGLEPLAY...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:14:22.663

我认为您需要这里的代码是一个

**mydialog.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

        <Button
            android:id="@+id/ok"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Ok"
            android:layout_gravity="center"
             />

</LinearLayout> 
```

.

```
Dialog dialog=new Dialog(mContext);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.mydialog);
dialog.getWindow().getAttributes().width = LayoutParams.FILL_PARENT;
dialog.getWindow().setBackgroundDrawableResource(R.drawable.dialogbackground);

Button mOkButton=(Button)dialog.findViewById(R.id.ok);

mOkButton.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {

    //do here what you want to do with ok button click

    }
}); 
```

**这`dialogbackground`是背景图片**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:48:41.423

```
@Override
protected Dialog onCreateDialog(int id) {
    // TODO Auto-generated method stub
    switch (id) {

    case 0:

        final Dialog mDialog = new Dialog(this);
        mDialog.setContentView(R.layout.customdialog);
        mDialog.setTitle("Custom Dialog");
        mDialog.show();
        mDialog.setCancelable(false);
        final EditText txtUser = (EditText)mDialog.findViewById(R.id.txtUserName);

        Button btnButtonOK = (Button)mDialog.findViewById(R.id.btnOK);
        Button btnButtonCancel = (Button)mDialog.findViewById(R.id.btnCancel);

        btnButtonOK.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String user = txtUser.getText().toString();
                if (!user.equals(""))
                    {
                    Toast.makeText(getApplicationContext(),
                        user, Toast.LENGTH_LONG).show();
                mDialog.dismiss();
                    }
            }
        });

        btnButtonCancel.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                mDialog.dismiss();
            }
        });

        break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:00:35.257

您可以使用以下方法制作自己的设计：progress_layer-xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" 
   android:layout_marginLeft="10dp"
   android:layout_marginRight="10dp">

   <TextView
       android:id="@+id/textView1"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
            android:text="@string/layer_folien"
         android:textAppearance="?android:attr/textAppearanceLarge" />

        <ProgressBar
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/layer_gesamnt"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ProgressBar
            android:id="@+id/progressBar2"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <Button
            android:id="@+id/dialog_cancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="@string/layer_button" />

    </LinearLayout> 
```

和 de Code 来称呼它

```
final Dialog dialog = new Dialog(PechaKuchaTimerActivity.this);
dialog.show();

final ProgressBar pr_fol = (ProgressBar)  dialog.findViewById(R.id.progressBar1);
final ProgressBar pr_ges = (ProgressBar)  dialog.findViewById(R.id.progressBar2);
final Button button_layerCancel = (Button) dialog.findViewById(R.id.dialog_cancel); 
```

# objective-c - 使自定义类型出现在 Xcode 的文档弹出窗口中

> ID：10443986
> 
> 赞同：4
> 
> 时间：2012-05-04T06:43:52.040
> 
> 标签：objective-c, xcode, documentation

我想为我自己的代码实现类似的结果：

![在此处输入图像描述](../Images/9a823632818682e4f660129cd3a5fb3d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:52:58.900

您指的是 XCode 的文档查看器和[Document Sets](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/Documentation_Sets/000-Introduction/introduction.html)。

查看有关使用 Doxygen 的本教程，这是一种适用于 XCode 的流行 docgen：http: [//developer.apple.com/library/mac/#featuredarticles/DoxygenXcode/_index.html](http://developer.apple.com/library/mac/#featuredarticles/DoxygenXcode/_index.html)（不适用于 XCode 4）

如果您使用的是 XCode 4，请查看以下文章：

*   [在 Xcode 4 中使用 Doxygen 助手](http://www.duckrowing.com/2011/05/14/using-the-doxygen-helper-in-xcode-4/)
*   [适用于 Xcode 4 的简单 Doxygen 代码片段](http://cbpowell.wordpress.com/2011/06/15/easy-doxygen-code-snippets-for-xcode-4/)
*   [XCODE4 中的 DOXYGEN 快捷方式](http://www.brokenrul.es/blog/?p=761#.T6OCietYsu8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T06:55:14.310

[AppleDoc](http://gentlebytes.com/appledoc/)实现了您正在寻找的结果。

# php - 当 iframe 中的表单和用户通过 gmail 来时，为什么 form.submit() 会失败 IE9

> ID：10443991
> 
> 赞同：1
> 
> 时间：2012-05-04T06:44:15.440
> 
> 标签：php, javascript, jquery, codeigniter

我创建了发送带有指向我网站的反向链接的电子邮件的功能，我正在使用 codeigniter 框架

用户单击电子邮件上的特定链接（返回链接）后，用户重定向到我的具有 iframe 的页面。

我使用该 iframe 提交带有文件输入的表单，而无需刷新页面。

**当用户在 IE9 浏览器中使用 gmail 通过该链接时，该`form.submit()`功能会失败，**在其他浏览器中它可以正常工作，其他电子邮件（除了 gmail）也可以。

请帮我找到解决方案

谢谢你。

**更新**

实际上我正在使用 ajaxupload jquery 库，它`form.submit();`在上面的场景中 失败了

```
 /* Creates form, that will be submitted to iframe
     * @param {Element} iframe Where to submit
     * @return {Element} form
     */
    _createForm: function(iframe){
        var settings = this._settings;

        // We can't use the following code in IE6
        // var form = document.createElement('form');
        // form.setAttribute('method', 'post');
        // form.setAttribute('enctype', 'multipart/form-data');
        // Because in this case file won't be attached to request                    
        var form = toElement('<form method="post" enctype="multipart/form-data"></form>');

        form.setAttribute('action', settings.action);
        form.setAttribute('target', iframe.name);                                   
        form.style.display = 'none';
        document.body.appendChild(form);

        // Create hidden input element for each data key
        for (var prop in settings.data) {
            if (settings.data.hasOwnProperty(prop)){
                var el = document.createElement("input");
                el.setAttribute('type', 'hidden');
                el.setAttribute('name', prop);
                el.setAttribute('value', settings.data[prop]);
                form.appendChild(el);
            }
        }
        return form;
    },
    /**
     * Gets response from iframe and fires onComplete event when ready
     * @param iframe
     * @param file Filename to use in onComplete callback 
     */
    _getResponse : function(iframe, file){            
        // getting response
        var toDeleteFlag = false, self = this, settings = this._settings;   

        addEvent(iframe, 'load', function(){                

            if (// For Safari 
                iframe.src == "javascript:'%3Chtml%3E%3C/html%3E';" ||
                // For FF, IE
                iframe.src == "javascript:'<html></html>';"){                                                                        
                    // First time around, do not delete.
                    // We reload to blank page, so that reloading main page
                    // does not re-submit the post.

                    if (toDeleteFlag) {
                        // Fix busy state in FF3
                        setTimeout(function(){
                            removeNode(iframe);
                        }, 0);
                    }

                    return;
            }

            var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;

            // fixing Opera 9.26,10.00
            if (doc.readyState && doc.readyState != 'complete') {
               // Opera fires load event multiple times
               // Even when the DOM is not ready yet
               // this fix should not affect other browsers
               return;
            }

            // fixing Opera 9.64
            if (doc.body && doc.body.innerHTML == "false") {
                // In Opera 9.64 event was fired second time
                // when body.innerHTML changed from false 
                // to server response approx. after 1 sec
                return;
            }

            var response;

            if (doc.XMLDocument) {
                // response is a xml document Internet Explorer property
                response = doc.XMLDocument;
            } else if (doc.body){
                // response is html document or plain text
                response = doc.body.innerHTML;

                if (settings.responseType && settings.responseType.toLowerCase() == 'json') {
                    // If the document was sent as 'application/javascript' or
                    // 'text/javascript', then the browser wraps the text in a <pre>
                    // tag and performs html encoding on the contents.  In this case,
                    // we need to pull the original text content from the text node's
                    // nodeValue property to retrieve the unmangled content.
                    // Note that IE6 only understands text/html
                    if (doc.body.firstChild && doc.body.firstChild.nodeName.toUpperCase() == 'PRE') {
                        doc.normalize();
                        response = doc.body.firstChild.firstChild.nodeValue;
                    }

                    if (response) {
                        response = eval("(" + response + ")");
                    } else {
                        response = {};
                    }
                }
            } else {
                // response is a xml document
                response = doc;
            }

            settings.onComplete.call(self, file, response);

            // Reload blank page, so that reloading main page
            // does not re-submit the post. Also, remember to
            // delete the frame
            toDeleteFlag = true;

            // Fix IE mixed content issue
            iframe.src = "javascript:'<html></html>';";
        });            
    },        
    /**
     * Upload file contained in this._input
     */
    submit: function(){                        
        var self = this, settings = this._settings;

        if ( ! this._input || this._input.value === ''){                
            return;                
        }

        var file = fileFromPath(this._input.value);

        // user returned false to cancel upload
        if (false === settings.onSubmit.call(this, file, getExt(file))){
            this._clearInput();                
            return;
        }

        // sending request    
        var iframe = this._createIframe();
        var form = this._createForm(iframe);

        // assuming following structure
        // div -> input type='file'
        removeNode(this._input.parentNode);            
        removeClass(self._button, self._settings.hoverClass);
        removeClass(self._button, self._settings.focusClass);

        form.appendChild(this._input);

        form.submit();

        // request set, clean up                
        removeNode(form); form = null;                          
        removeNode(this._input); this._input = null;            

        // Get response from iframe and fire onComplete event when ready
        this._getResponse(iframe, file);            

        // get ready for next request            
        this._createInput();
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:31:31.957

检查代码是否在 iframe 中，如果未指定 iframe 中`form.submit()`，即

```
document.iframename.form.submit(); 
```

# php - 命名 php 文件：“class.php”和“html.php”扩展名是什么意思？

> ID：10443995
> 
> 赞同：0
> 
> 时间：2012-05-04T06:44:24.767
> 
> 标签：php

只是好奇，我注意到一些 php 文件的扩展名为“class.php”或“html.php”。代码文件具有此类扩展名的原因是什么？

先感谢您！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T06:45:30.307

它必须是自定义的东西，也许 class.php 扩展名是“模型”而 html.php 文件是“视图”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T06:47:19.527

取决于创作，它可能意味着：

*   "class.php" => 指的是像 somethis.class.php 这样的类文件
*   ".html.php" => 指的是一些模板，比如 something.html.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T06:46:37.653

是的，class.php 是模型/处理程序，而 html.php 是视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:46:40.180

它没有特定的含义。很可能`.class.php`包含一个类并且`.html.php`可能是一个模板。

Using`ClassName.class.php`的优点是您可以安全地使用自动加载将其包含`$className.'.class.php'`在`__autoload()`函数中而不会发生冲突（例如，使用一个名为的类`index`-您很可能有一个`index.php`但该类的文件，`index.class.php`因此不会有问题）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T06:46:49.257

带有 .php 的文件由 PHP 引擎执行。有些人喜欢使用句号作为其用途的延伸。

IE `create.my.template.html.php`

`create.my.template.html`是文件名。`.php`是扩展。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T06:49:12.133

这没有任何特殊效果，因为真正的扩展名仍然只是*.php*。人们可能会选择像这样命名文件来分隔视图和模型或类似的东西 - 但您也可以使用子文件夹（例如命名为*html*和*类*）或根本不使用任何类型的命名约定（最终可能会在一个非常混乱的文件结构。）

# asp.net-mvc - 我得到传递到字典中的模型项是类型错误

> ID：10443997
> 
> 赞同：0
> 
> 时间：2012-05-04T06:44:46.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, partial-views

我正在使用 MVC3 Razor 开发一个博客，我正在尝试在我的项目中使用 partialview，但出现以下错误：

```
System.InvalidOperationException: The model item passed into the dictionary is of type 'System.Collections.Generic.List`1[Blog.Models.BlogPost]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[Blog.Models.BlogCategory]'. 
```

_Layout.cshtml

```
@Html.Partial("_Menu") 
```

_Menu.cshtml

```
@model IEnumerable<Blog.Models.BlogCategory>
<ul>
    @foreach (var item in Model)
    {
        <li><a href="#">@item.CategoryName</a></li>
    }
</ul> 
```

家庭控制器.cs

```
public ActionResult _Menu()
{
Blog.Models.BlogDataContext dc = new Models.BlogDataContext();
    return PartialView(dc.BlogCategories.ToList());
} 
```

# javascript - PubNub 如何将您的帐户与 JavaScript API 绑定？

> ID：10443998
> 
> 赞同：3
> 
> 时间：2012-05-04T06:44:46.467
> 
> 标签：javascript, pubnub

PubNub 好像是按域名绑定你的账号的。我似乎无法在支持和 API 中找到明确的答案。

由于没有使用 JavaScript 中的发布、订阅或密钥，您的站点的域似乎是绑定的。这是准确的吗？

我还没有开始玩它，但这会很糟糕，因为这意味着我已经将我的代码推送到服务器只是为了测试。

我需要知道这一点，因为我想要一种使用本地主机测试我的 Web 应用程序的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:36:59.767

您在询问 PubNub 帐户和绑定到域。这是一个关于如何开始使用 PubNub 的好问题。为了快速消除这种情况，您**不必为了连接而向 PubNub 提供此信息**。您可以从**Anywhere**连接到**Anywhere**。您甚至可以从本地系统连接到**localhost 。**更好的是，您不需要网络服务器，可以编写普通的 html5 并从硬盘打开**file:// 。**漂亮吗？

苹果电脑：

```
file:///Users/stephen/index.html 
```

Ubuntu：

```
file:///home/stephen/index.html 
```

视窗XP：

```
file:///C:/Documents and Settings/stephen/index.html 
```

Windows 7的：

```
file:///C:/Users/stephen/index.html 
```

# django - 如何在 Django 中将模型字段与表单字段映射

> ID：10443999
> 
> 赞同：2
> 
> 时间：2012-05-04T06:44:47.480
> 
> 标签：django, django-models, django-forms

我们有一个包含 models.py 的应用程序，其中包含 n 号。继承基类的类。我们想要创建从用户 n 保存在 db 中的动态获取值的表单，但问题是我们想要使用 django 表单字段而不是 django 模型表单。

我们知道 django 表单中缺少一些字段，例如**PositiveIntegerField、CommaSeparetedIntegerFields**等。我们如何使用 django 表单字段来实现这一点？
如果我们在 shell 中编写以下代码。

```
from djnago.db import models
mvar = models.PositiveIntegerFields()

from django import forms
fvar = forms.PositiveIntegerFields()
AttributeError: 'module' object has no attribute 'PositiveIntegerField' 
```

表格.py

```
from django import forms

class ContextForm(forms.Form):
    def __init__(self, rdict, *args, **kwargs):
        super(ContextForm, self).__init__(*args, **kwargs)
        for key in rdict.keys():
            self.fields['%s' % str(key)] = getattr(forms,rdict.get(key))()

rdict = {'address': 'CharField','phone': 'CharField', 'Salary': 'PositiveIntegerField','first name': 'CharField','last name':'CharField'} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:07:34.803

查看源代码，该字段所做的只是使用关键字参数调用默认表单字段：`min_value`.

```
class PositiveIntegerField(IntegerField):
    description = _("Positive integer")

    def get_internal_type(self):
        return "PositiveIntegerField"

    def formfield(self, **kwargs):
        defaults = {'min_value': 0}
        defaults.update(kwargs)
        return super(PositiveIntegerField, self).formfield(**defaults) 
```

因此，您正在寻找的仅仅是

```
from django import forms
fvar = forms.IntegerField(min_value=0)
fvar.clean(-1)
# ValidationError: [u'Ensure this value is greater than or equal to 0.'] 
```

至于`CommaSeparatedIntegerField`，它看起来像`CharField`带有一些`django.core.validators.validate_comma_separated_integer_list`传入的。

```
f = forms.CharField(validators=[django.core.validators.validate_comma_separated_integer_list])
f.clean('1,2,3') 
```

所有这些都是确保传入的字符串是`'^[\d,]+$'`. 该字段甚至不进行任何 python 转换......如果只是验证表单输入，它似乎并没有真正节省很多时间。事实上，有一条评论说“可能会转向贡献”。同意..

* * *

决定看看这个好玩。这是一个`ModelForm`用新字段覆盖模型字段的生成器......它还没有处理 kwargs。这只是我能想到的第一种方法……无需研究模型生成本身。它构造了一个`ModelForm`修改表单 /after/ 初始化的正则。

```
MODEL_FIELD_MAP = {
    models.IntegerField: forms.CharField, 
    # change all IntegerField to forms.CharField
}

def modelform_generator(mymodel):
    class MyModelForm(forms.ModelForm):
        class Meta:
            model = mymodel
        def __init__(self, *args, **kwargs):
            super(MyModelForm, self).__init__(*args, **kwargs)
            for name, form_field in self.fields.items():
                try:
                    model_field = self._meta.model._meta.get_field_by_name(name)[0]
                    # is this a model field?

                    field_override = MODEL_FIELD_MAP.get(model_field.__class__)
                    # do we have this model field mapped to a form field?

                    if field_override:
                        self.fields[name] = field_override()
                        # set the form field to the target field class

                except models.FieldDoesNotExist:
                    pass
    return MyModelForm 
```