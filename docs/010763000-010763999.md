# StackOverflow 问答 10763000-10763999

# gwt - 如何使用 GWT Editor 框架编辑 Set？

> ID：10763000
> 
> 赞同：5
> 
> 时间：2012-05-26T01:37:07.253
> 
> 标签：gwt, requestfactory, gwt-editors

为了简单起见：

```
public class Person 
{
    String name; 
    Set<Address> addresses;
}

public class Address
{
     String city;
     String street;
} 
```

有和匹配

```
public interface PersonProxy extends EntityProxy 
{
     public String getName();
     public Set<AdressProxy> getAddresses();
} 
```

和

```
public interface AdressProxy extends EntityProxy 
{
    public String getCity();
    public String getStreet();
} 
```

我得到了 UiBuinder 类来编辑 AddressProxy 并且我很清楚如何使用 ListEditor 以防万一我得到 List 但在 Person 类中设置了数据我如何使用 Editor Framework 来编辑它们？或者当它变成 PersonProxy 时，我如何将 Set 转换为 List？

我尝试放置一种可以实现的适配器编辑器类

```
LeafValueEditor<Set<AddressProxy>> 
```

然后在 LeafValueEditor.setValue() 内部移动到一个 List 并在一个单独的 Editor 层次结构上启动一个新的 driver.edit() ，该层次结构负责 List 编辑，但现在很幸运。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T09:14:18.587

您应该创建一个`CompositeEditor<Set<AddressProxy>, AddressProxy, AddressEditor>`，类似于 a`ListEditor`但处理 a`Set`而不是 a `List`。我想你可以以某种方式委托给 a`ListEditor`虽然我真的不确定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T21:24:17.890

我已经用点和路线完成了（一条路线包含 N 点）：

路线（复合）：

```
@UiField
TextBox name;

@Ignore
@UiField
FlexTable listPoints;

PointsEditor pointsEditor = new PointsEditor();

     ....

pointsEditor.add(String id); 
```

积分编辑：

```
public class PointsEditor implements HasRequestContext<List<PointProxy>>, ValueAwareEditor<List<PointProxy>> {

    List<PointProxy> points = new ArrayList<PointProxy>(); 

    public void add(String id) {
       PointProxy point = ctx.create(PointProxy.class);
       point.setId(id);
       points.add(point);           
    } 
```

路由（服务器端）：

```
@Embedded
private List<Point> points = new ArrayList<Point>(); 
```

路由代理

```
public interface RouteProxy extends EntityProxy {

       abstract List<PointProxy> getPoints();

       abstract void setPoints(List<PointProxy> points); 
```

点代理

```
public interface PointProxy extends ValueProxy {

...

} 
```

# javascript - HTML5 文件 API 和 XML 文档创建

> ID：10763004
> 
> 赞同：1
> 
> 时间：2012-05-26T01:37:40.280
> 
> 标签：javascript, xml, html, xml-parsing

我正在尝试读取文件并更新 XML。现在我正在尝试使用 HTML5 API 和 DOMParser 来实现它，但我遇到了一些麻烦。

```
<script>
 function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList
    for (var i = 0, f; f = files[i]; i++) {

      var reader = new FileReader();
parser=new DOMParser(); 
      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Print the contents of the file
        //  var span = document.createElement('span');                    
         xmlDoc=parser.parseFromString(e.target.result,"text/xml");
         try{ 
        DistributomeXML_Objects=xmlDoc.documentElement.childNodes; 
    }catch(error){ 
        DistributomeXML_Objects=xmlDoc.childNodes; 
    } 
      //    document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the file
      //reader.readAsDataText(f,UTF-8);
      reader.readAsText(f);

    }
    //xmlDoc.getElementsByTagName("distributome").item(0).appendChild(node);

    traverseXML(false, null, DistributomeXML_Objects, distributome.nodes, distributome.edges, distributome.references, distributomeNodes, referenceNodes);

  }
 document.getElementById('files').addEventListener('change', handleFileSelect, false);
    </script> 
```

我从

[HTML5 File api，读取xml/文本文件并将其显示在页面上？](https://stackoverflow.com/questions/5744064/html5-file-api-reading-in-an-xml-text-file-and-displaying-it-on-the-page)

和我自己之前的问题

[使用 PHP/JS 使用上传的文件动态填充网页](https://stackoverflow.com/questions/10680990/dynamically-populating-webpage-with-uploaded-file-using-php-js)

我认为我的代码中有一个错误导致 XML 文档没有被创建，我不太能够发现它，如果有任何帮助，我将不胜感激。

提前致谢

# directed-acyclic-graphs - 如何从固定节点开始获得 DAG 中的最长路径？

> ID：10763005
> 
> 赞同：2
> 
> 时间：2012-05-26T01:37:51.140
> 
> 标签：directed-acyclic-graphs, topological-sort, longest-path

我想知道如何从节点 0（最小节点）开始获得 DAG 中的最长路径

我搜索了wiki并得到了以下算法：

```
algorithm dag-longest-path is
input: 
     Directed acyclic graph G
output: 
     Length of the longest path

length_to = array with |V(G)| elements of type int with default value 0

for each vertex v in topOrder(G) do
    for each edge (v, w) in E(G) do
        if length_to[w] <= length_to[v] + weight(G,(v,w)) then
            length_to[w] = length_to[v] + weight(G, (v,w))

return max(length_to[v] for v in V(G)) 
```

但是我不知道怎么实现，当然下面我写的代码是行不通的：（topo是拓扑排序的节点）

```
public static int longestPath(int[] topo){
    int[] dist = new int[topo.length];

    for(int i:topo){
        if(isArc(node,i)){
            if(dist[i]<dist[node]+1){
                dist[i] = dist[node] + 1;
            }
        }
    }
    return getMax(dist);
} 
```

我应该怎么做？谢谢！

此外，你能给我一个算法来计算从 0 到 n-1 的不同路径的数量吗？

# design-patterns - Web 应用程序中的插件架构（示例或代码片段？）

> ID：10763006
> 
> 赞同：49
> 
> 时间：2012-05-26T01:37:57.273
> 
> 标签：design-patterns, web-applications, architecture, frameworks

我正在尝试学习开发一个 Web 应用程序（最好是 NodeJS/MongoDB，尽管我之前使用过 PHP 和 Python），它具有高度可扩展性和可定制性，可通过插件启用禁用的功能。

一种可能的选择是使用带有挂钩的 Wordpress 插件和小部件来挂钩，但是它缺乏视图和逻辑代码的适当分离。这仍然是一种可供学习的选择。还有其他选择吗？

你有任何我可以学习的代码片段或示例应用程序吗？语言或框架不是那么重要，我大概可以大致弄清楚背后的概念

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-06-06T12:06:50.707

一个好的插件架构很难从头开始实现，但它提供了自己的回报。它通过本地化复杂性使软件灵活且易于维护。它需要的首要技能是编写[松散耦合代码](http://en.wikipedia.org/wiki/Loose_coupling)的能力。这需要非常牢固地掌握多态性、得[墨忒耳定律](http://c2.com/cgi/wiki?LawOfDemeter)和相关的[好莱坞原理](http://c2.com/cgi/wiki?HollywoodPrinciple)。

我建议您首先熟悉这些，然后再熟悉以下设计模式，这将显着降低难度：

*   [命令模式](http://en.wikipedia.org/wiki/Command_pattern)：为插件模块提供一致的入口点，允许它们轻松地交换进出，这是[IBM 的一个基于 Web 的示例](https://www.ibm.com/support/knowledgecenter/en/SSZLC2_7.0.0/com.ibm.commerce.developer.doc/concepts/csdrequestsummary.htm)。
*   [Memento](http://c2.com/cgi/wiki?MementoPattern)：在不违反封装的情况下捕获、保持和外部化状态，允许容器配置插件。
*   [回调](http://en.wikipedia.org/wiki/Callback_%28computer_programming%29)：允许插件模块从容器/环境访问“服务”。
*   [依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)：一种从环境中放松插件模块耦合的方法。
*   [抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)：在环境中安装和实例化插件。
*   [Builder Pattern](http://en.wikipedia.org/wiki/Builder_pattern)：对于插件模块相互依赖的任何非平凡插件架构都是必需的。

一旦你掌握了这些，研究一些现有的插件框架实现和架构，看看它们是如何被使用的。Apache 有几个在[Struts](https://struts.apache.org/docs/nutshell.html)、[Geronimo 自定义服务器程序集](https://cwiki.apache.org/GMOxDOC21/custom-server-assemblies-using-geronimo-administrative-console.html)和[Tomcat JNDI 资源](http://tomcat.apache.org/tomcat-5.5-doc/jndi-resources-howto.html)；还有[Eclipse 插件框架](http://www.eclipse.org/articles/Article-Plug-in-architecture/plugin_architecture.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-05T20:45:01.547

我们还没有这样的插件架构，但我将解释我们如何保持我们的客户端代码松散耦合，也许它会给你一些想法。

我们正在使用 asp.net。我们提供一个 main.aspx 页面，该页面首先包含一个中介 javascript 文件。它定义了一个全局对象——称之为中介者——这是我们定义的唯一全局对象。

中介者公开了一个简单的接口，其中包含发布和订阅消息：

```
mediator.subscribe(messageName, callback);
mediator.publish(messageName); 
```

在 mediator.js 文件之后，主页包含许多其他 javaScript 文件，每个文件都包含一个立即函数，该函数将其功能注册到调解器。可以在[此处找到有关此模式的更多信息，或在](http://addyosmani.com/largescalejavascript/)[此处](https://stackoverflow.com/questions/9809617/how-to-implement-the-javascript-mediator-publish-subscribe-pattern)查看我以前的问题。

您可以采用类似的方法 - 定义一个全局对象（例如 pluginFramework），它为插件提供一个接口来注册其功能。当您构建 html 页面以交付给客户端时，首先包含 pluginFramework 文件，然后动态包含所需的 JavaScript 插件文件，这可能取决于用户或设备（例如，如果设备启用了触摸，则需要不同的插件？）。这些插件文件将通过即时函数将其功能添加到 pluginFramework。

以下是如何允许插件向 UI 中的菜单添加功能的示例：

插件框架.js：

```
var pluginFramework = (function() {
    var menuItems = [];
    function addMenuItemPrivate(itemName, callback) {
        // e.g. add itemName and callback to menuItems
    }
    return {
        addMenuItem: addMenuItemPrivate;
    }
})()); 
```

照片插件.js：

```
(function() {
    function addPhoto() {
        //...
    }
    pluginFramework.addMenuItem('add photo', addPhoto)
})()); 
```

希望这在某种程度上有所帮助！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T12:13:59.167

您的评论表明您正在构建的是[多租户架构](http://en.wikipedia.org/wiki/Multitenancy)。

这是一项复杂的要求——而且通常很难改造；这在很大程度上取决于您从哪里开始。

首先，您首先需要有一个体面的 Web 应用程序；如果您使用的是 MVC 框架，那么您就有了一个起点。

其次，您需要决定在哪里支持扩展；例如，客户可以为其 UI 拥有一个完全独立的皮肤吗？如果是这样，您需要一个皮肤框架。客户是否可以更改所有内容，或者只是在关键点插入不同的组件（例如自定义支付提供商或自定义身份验证方案）。支持一组有限的扩展点比设计一个允许扩展任何东西的框架要容易得多。

接下来，您的数据策略；MSDN 上有[一篇关于多租户的好文章](http://msdn.microsoft.com/en-us/library/aa479086.aspx)；它面向关系数据库，但提供了可以应用于 Mongo 的想法。

最后，你必须想出一个支持你需要的扩展点的组件架构。在处理 Web 应用程序时，您需要能够修改模型、视图、控制器和持久性；最好的解决方案是使用你的 MVC 框架想要工作的方式，并将“对于租户 x，做 y；对于租户 z，做 w”逻辑放在控制器层。玩这个，让它适用于你需要的一些情况，然后找出问题所在并修复它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T15:21:20.963

如果你自己正在做客户端定制，Django 听起来很适合这个。创建处理您想要的所有基本功能的核心应用程序。然后，对于您需要执行的每个逻辑分离的事情/插件创建一个新应用程序，您可以将其插入主应用程序，只需将该应用程序添加到设置中已安装的应用程序即可。

这可以处理皮肤（只需放入一个新的 base_site.html 模板，让所有其他人都继承它）、多个数据库支持、插件，并让您能够非常快速地开发和部署新的插件/功能。

有关您的内部系统可能是什么的更通用示例，请参见[merengue](http://dev.merengueproject.org/)或[pinax 。](http://pinaxproject.com/)

# actionscript-3 - AS3：匿名对象会被垃圾回收吗？

> ID：10763014
> 
> 赞同：1
> 
> 时间：2012-05-26T01:40:34.910
> 
> 标签：actionscript-3, garbage-collection

我经常这样做来配置类的新实例

```
var myVar = new MyClass({param:1,param2:true,param3:"hello"}); 
```

这个匿名对象会被垃圾收集吗？

使用后创建和销毁对象会更好吗？

```
var myConfig:Object = {param:1,param2:true,param3:"hello"}
var myVar = new MyClass(myConfig);
myConfig = null; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T01:57:00.820

我相信您指的是“对象文字”，它应该被垃圾收集。

Flash 使用两种垃圾收集方法——引用计数和标记和清除。

如果没有被引用计数捕获，它最终应该被标记和扫描释放。

**引用计数**

> 堆上的每个对象都跟踪指向它的事物的数量。每次创建对对象的引用时，对象的引用计数都会增加。删除引用时，对象的引用计数会减少。如果对象的引用计数为零（没有任何东西指向它），则将其添加到零计数表 (ZCT)。当 ZCT 已满时，扫描堆栈以查找堆栈中对 ZCT 上的对象的任何引用。ZCT 上没有堆栈引用的任何对象都将被删除。
> 
> 延迟引用计数的问题之一是循环引用。如果 ObjectA 和 ObjectB 相互引用，但系统中没有其他对象指向它们，则它们的引用计数永远不会为零，因此永远不会有资格使用引用计数进行垃圾回收。这就是标记和清除垃圾收集有帮助的地方。

**标记/扫描**

> 在 Flash Player 或 AIR 中运行的应用程序具有多个 GCRoot。您可以将 GCRoot 视为一棵树的树干，而应用程序的对象则视为分支。Stage 是一个 GCRoot。加载器是 GCRoots。某些菜单是 GCRoots。应用程序仍在使用的每个对象都可以从应用程序中的一个 GCRoot 访问。GCRoot 永远不会被垃圾回收。
> 
> 应用程序中的每个对象都有一个“标记位”。当垃圾回收的标记阶段开始时，所有这些标记位都会被清除。MMgc 跟踪应用程序中的所有 GCRoot。垃圾收集器从这些根开始，跟踪每个对象并为它到达的每个对象设置标记位。从任何根不再可访问的任何对象不再可从应用程序中的任何位置访问 - 在标记阶段不会设置其标记位。一旦收集器完成标记它找到的所有对象，扫描阶段就开始了。任何没有设置标记位的对象都会被销毁并回收其内存。

# ocr - 手写文本的训练 tesseract

> ID：10763017
> 
> 赞同：9
> 
> 时间：2012-05-26T01:41:13.320
> 
> 标签：ocr, tesseract, icr

我需要识别手写文本 (icr)。无需理解任意文本 - 我能够指示我的用户非常清楚地书写，使用单独的字母等。但是任何训练集和真实字母之间仍然会有一些差异。

我希望为此目的训练 tesseract。有没有人试过这个？这条路有希望吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T16:51:02.650

您必须具有与那些手写字母相似的字体。您可以使用任何字体设计工具创建它们（示例在[这里](http://fontforge.org/editexample.html)）。然后，您可以按照[此处](http://michaeljaylissner.com/blog/adding-new-fonts-to-tesseract-3-ocr-engine)所述的培训过程进行操作。

# c - C代码没有显示正确的东西

> ID：10763019
> 
> 赞同：-1
> 
> 时间：2012-05-26T01:42:41.977
> 
> 标签：c

我正在尝试用矩阵做一个程序。在四个数字中，只有第一个减1。当第一个矩阵完成时，只有第二个矩阵减1。然后到最后。不允许使用 0 号。

例如，当我运行代码时，需要返回这个：

```
[2][1][3][3]
[1][1][3][3]
[1][3][3]
[3][3]
[2][3]
[1][3]
[3]
[2]
[1] 
```

但是这段代码并没有发生这种情况：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main()
{
    int fila[4], var;

    for (var=0;var<4;var++) {
        fila[var]=0;
        srand(rand());
        fila[var]=rand()%3+1;
        printf("[%d]",fila[var]);
        fila[0]=fila[0]-1;
    }
    system("pause>NULL");

    while(fila[0]>0)
    {
        printf("[%d][%d][%d][%d]\n",fila[0],fila[1],fila[2],fila[3]);
        fila[0]--;
        system("pause");
    }

    fila[1]=fila[1]-1;

    while(fila[1]>0)
    {
        printf("[%d][%d][%d]\n",fila[1],fila[2],fila[3]);
        fila[1]--;
        system("pause");
    }

    fila[2]=fila[2]-1;

    while(fila[2]>0)
    {
        printf("[%d][%d]\n",fila[2],fila[3]);
        fila[2]--;
        system("pause");
    }

    fila[3]=fila[3]-1;

    while(fila[3]>0)
    {
        printf("[%d]\n",fila[3]);
        fila[3]--;
        system("pause");
    }

    return 0;
} 
```

我错过了什么？谢谢。

该代码打印：

```
[2][1][2][1]
[1][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T01:59:39.683

您需要两个嵌套循环来执行此操作：

```
#include <stdio.h>
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int fila[4], i, j;
    srand(rand());
    for (i=0;i != 4; i++) {
        fila[i]=rand()%3+1;
    }
    for (i=0 ; i != 4 ; fila[i]--, i += (fila[i] == 0)) {
        for (j = i ; j != 4 ; j++) {
            printf("[%d] ", fila[j]);
        }
        printf("\n");
    }
    return 0;
} 
```

外部循环迭代直到你到达`fila`; 内循环打印`fila`从 的索引开始的剩余元素`i`。

请注意，您不应该在循环中重新播种`srand`- 您只在循环之前执行一次。

这是[ideone 上该程序的链接](http://ideone.com/NG0NT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T02:05:53.117

你想要的看起来像这样：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  int arr[4];
  int i;
  for(i = 0; i < 4; i++) {
    arr[i] = (rand() % 3) + 1;
  }
  for(i = 0; i < 4; i++) {
    while(arr[i]) {
      int j;
      for(j = i; j < 4; j++) {
        printf("[%d]", arr[j]);
      }
      printf("\n");
      arr[i]--;
    }
  }
  return 0;
} 
```

注意嵌套循环。特别是，内部 for 循环允许您打印`j`矩阵的条目，而无需再次复制/粘贴该代码——您可以消除大量冗余。

# c# - 在每个全景项目中更改色调

> ID：10763024
> 
> 赞同：0
> 
> 时间：2012-05-26T01:44:14.987
> 
> 标签：c#, windows-phone-7, xna, panorama-control

我在我的应用程序中使用 XNA 框架，并尝试构建全景应用程序。我想在每个全景项目中使用不同的色调，是的，它工作得很好。但是当我尝试将全景项目 1 滑动到全景项目 2 时，色调不会改变（全景项目 2 中的色调仍然使用色调全景项目 1）。

这是我的简单代码：

```
 Stream stream = TitleContainer.OpenStream("Sounds/A.wav");
        SoundEffect effect = SoundEffect.FromStream(stream);
        FrameworkDispatcher.Update();
        effect.Play(); 
```

我尝试在每个全景项目中使用此代码在它滑动之前停止音调：

```
 using (var stream = TitleContainer.OpenStream("Sounds/A.wav")) 
        //panorama item 2 using ("Sounds/B.wav")) 
        {
            effect = SoundEffect.FromStream(stream);
            //create the instance 
            effectStop = effect.CreateInstance();

            FrameworkDispatcher.Update();
            //play sound via the instance 
            effectStop.Play();
        }

        //some event called to stop sound 
        effectStop.Stop(); 
```

但上面的代码只是停止音调，不会在它滑动之前播放音调。任何人都知道我如何解决这个问题？

# http - Grails - SSL 和 Spring 安全核心

> ID：10763025
> 
> 赞同：6
> 
> 时间：2012-05-26T01:44:36.827
> 
> 标签：http, grails, ssl, https, spring-security

我想让我的应用程序在 SSL 开启的情况下专门运行。我正在使用 Spring Security 核心插件。

这就是我尝试这样做的方式`Config.groovy`：

```
grails.plugins.springsecurity.portMapper.httpPort = 8080
grails.plugins.springsecurity.portMapper.httpsPort = 8443
grails.plugins.springsecurity.secureChannel.definition = [ '/**' : 'REQUIRES_SECURE_CHANNEL'] 
```

每次我尝试使用 HTTP 访问 URL 时，我都希望这会导致重定向。但是，我永远不会被重定向，并且可以通过 HTTP 和 HTTPS 导航。我可以添加我正在使用开始我的应用程序`grails run-app -https`

我错了吗？

任何建议都是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:29:46.757

您的配置中是否声明了自定义过滤器链？

在这种情况下，您可能需要将“channelProcessingFilter”添加到您的链中

[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/security-filter-chain.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/security-filter-chain.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T21:11:47.523

您也可以尝试使用 forceHttps 选项

```
grails.plugins.springsecurity.auth.forceHttps = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T06:54:21.130

您没有任何通配符，因此该定义实际上与根 URL ( `/`) 匹配，但其下方没有任何内容 ( `/foo`)。你想要的是：

```
grails.plugins.springsecurity.secureChannel.definition = [ '/**' : 'REQUIRES_SECURE_CHANNEL']
                                                             ^^ 
```

[（您可以清楚地看到文档](https://grails-plugins.github.io/grails-spring-security-core/latest/#channelSecurity)中的通配符:-)

最后，如果您的服务器位于负载平衡器或其他隐藏协议的防火墙后面，请查看同一页面以获取有关检查标头的说明。

# android - (TextView)findbyid 使应用程序 Android 崩溃。

> ID：10763026
> 
> 赞同：3
> 
> 时间：2012-05-26T01:44:39.403
> 
> 标签：android, textview, logcat

当我尝试创建一个 textview 并将其链接到我的应用程序中的 XML 组件时，我的应用程序似乎崩溃了。我正在使用的代码是：

```
public class WorkoutAdvice extends Activity {
TextView adviceshow;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    String[] advice = getResources().getStringArray(R.array.races_array);
    Random rand = new Random(); 
    int ad = rand.nextInt(5);
    String gen = advice[ad];
    adviceshow = (TextView)findViewById(R.id.advice);
    adviceshow.setText(gen);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.advice);       

}
} 
```

我的应用程序关闭时的 logcat 是

> 05-26 01:43:23.018: E/AndroidRuntime(363): 致命异常: main 05-26 01:43:23.018: E/AndroidRuntime(363): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. b00348312.workout/com.b00348312.workout.WorkoutAdvice}：java.lang.NullPointerException 05-26 01:43:23.018：E/AndroidRuntime(363)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 05 -26 01:43:23.018: E/AndroidRuntime(363): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 android.app .ActivityThread.access$2300(ActivityThread.java:125) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 05-26 01: 43:23.018: E/AndroidRuntime(363): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 android.os.Looper.loop(Looper.java:123) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 android.app.ActivityThread.main (ActivityThread.java:4627) 05-26 01:43:23.018: E/AndroidRuntime(363): at java.lang.reflect.Method.invokeNative(Native Method) 05-26 01:43:23.018: E/AndroidRuntime( 363): 在 java.lang.reflect.Method.invoke(Method.java:521) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:868) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 05-26 01:43:23.018 : E/AndroidRuntime(363): at dalvik.system.NativeStart.main(Native Method) 05-26 01:43:23.018: E/AndroidRuntime(363): Caused by: java.lang.NullPointerException 05-26 01:43 :23.018: E/AndroidRuntime(363): at com.b00348312.workout.WorkoutAdvice.onCreate(WorkoutAdvice.java:22) 05-26 01:43:23.018: E/AndroidRuntime(363): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-26 01: 43:23.018: E/AndroidRuntime(363): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-26 01:43:23.018: E/AndroidRuntime(363): ... 还有 11 个

应用程序在没有处理在应用程序其他部分工作的 findbyID 行的语句的情况下工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T01:50:16.730

在您通过调用实际设置活动内容之前`setContentView`，不会找到任何视图。一旦你打电话`setContentView`，然后你可以尝试找到你的`TextView`。请注意，在此调用之前，它`Activity`完全不知道它将绑定到哪些 XML 布局（如果有的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T01:49:06.327

放

```
setContentView(R.layout.advice); 
```

之前的

```
adviceshow = (TextView)findViewById(R.id.advice); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T01:49:24.627

我认为您应该在使用 findViewById 之前设置内容视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-18T06:58:36.913

```
public class WorkoutAdvice extends Activity {
TextView adviceshow;
@Override
public void onCreate(Bundle savedInstanceState) 
{
   super.onCreate(savedInstanceState);
    setContentView(R.layout.advice);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
 adviceshow = (TextView)findViewById(R.id.advice);
    String[] advice = getResources().getStringArray(R.array.races_array);
    Random rand = new Random(); 
    int ad = rand.nextInt(5);
    String gen = advice[ad];

    adviceshow.setText(gen);
   }} 
```

应该是这样的

# php - 使用 symfony2 将 mysql 枚举迁移到学说实体的最佳策略？

> ID：10763029
> 
> 赞同：1
> 
> 时间：2012-05-26T01:46:40.663
> 
> 标签：php, symfony, doctrine

我目前正在将遗留应用程序迁移到 symfony2，问题是我有很多 mysql 枚举列，我知道学说不支持枚举数据类型，一种解决方法是存储为字符串，但我真的会失去正确排序数据的能力，因为 varchars 要慢得多，我确实有很多具有枚举数据类型的表，并且修改架构真的很难，我有什么选择？你有什么建议可以更顺利地过渡到 symfony2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T15:11:31.257

试试这个它对我有用

[http://symfony.com/doc/current/reference/configuration/doctrine.html#reference-dbal-configuration](http://symfony.com/doc/current/reference/configuration/doctrine.html#reference-dbal-configuration)

在 app/config/config.yml 文件中添加

```
 mapping_types:
       enum: string 
```

例如下面

```
doctrine:
dbal:
    driver:   %database_driver%
    host:     %database_host%
    port:     %database_port%
    dbname:   %database_name%
    user:     %database_user%
    password: %database_password%
    charset:  UTF8
    mapping_types:
        enum: string 
```

那么你可以使用例如

```
@ORM\Column(type="string", columnDefinition="ENUM('A', 'B')") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T03:05:05.587

你有两个解决方案

*   **解决方案 1：**映射到 Varchars
*   **解决方案 2：**定义类型

更多信息请参考此链接：[Mysql Enums 学说](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html)

# ruby-on-rails - 回形针在哪里存储使用哈希的插值器和文件之间的关系

> ID：10763030
> 
> 赞同：1
> 
> 时间：2012-05-26T01:46:53.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, paperclip

我正在使用回形针，想离线处理一组文件，理想情况下将它们移动到内容服务器。但我没有看到回形针在哪里存储这些信息以便能够获取它。使用的散列并不是为了混淆，所以我并不担心它，但我想处理具有相同名称的不同图像，因为我们在当前的数码相机中遇到了这个问题。

我有以下插值：

```
Paperclip.interpolates :val  do |attachment, style|
  Digest::MD5.hexdigest("me-" + attachment.size.to_s + "-other")
end

has_attached_file :asset, 
  :url => "/images/:global_path/:val-:style.:extension",
  :path => UPLOAD_PATH + "/:global_path/:val-:style.:extension",
  :styles => { :medium => "200x200>", :thumb => "75x75>", :bigthumb => "125x125"  

  } 
```

生成如下网址：/images/170/1c8ce44646e4cbe816ebe901482783e9-thumb.jpg?1337831837

我希望能够 rsync 图像目录，但找不到如何获取哈希值。我在哪里可以找到这个？

谢谢

# mysql - 如何从mysql中的当前日期时间中减去30天？

> ID：10763031
> 
> 赞同：256
> 
> 时间：2012-05-26T01:47:35.827
> 
> 标签：mysql

如何从 mysql 中的当前日期时间中减去 30 天？

```
SELECT * FROM table
WHERE exec_datetime BETWEEN DATEDIFF(NOW() - 30 days) AND NOW(); 
```

* * *

## 回答 #1

> 赞同：369
> 
> 时间：2012-05-26T01:50:51.630

```
SELECT * FROM table
WHERE exec_datetime BETWEEN DATE_SUB(NOW(), INTERVAL 30 DAY) AND NOW(); 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #2

> 赞同：161
> 
> 时间：2014-10-24T14:47:45.083

对于不想使用的任何人`DATE_SUB`，请使用`CURRENT_DATE`：

```
SELECT CURRENT_DATE - INTERVAL 30 DAY 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-26T01:53:49.117

我们不要使用`NOW()`，因为每次查询都不同，因为您会丢失任何查询缓存或优化。[请参阅MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/query-cache-operation.html)中不应该使用的函数列表。

在下面的代码中，我们假设这个表随着时间增长。添加了新内容，您只想显示过去 30 天内的内容。这是最常见的情况。

请注意，日期已作为字符串添加。最好从您的调用代码中以这种方式添加日期，而不是使用该`NOW()`函数，因为它会杀死您的缓存。

```
SELECT * FROM table WHERE exec_datetime >= DATE_SUB('2012-06-12', INTERVAL 30 DAY); 
```

`BETWEEN`如果你真的只想要从这一秒到这一秒前 30 天的东西，你可以使用，但根据我的经验，这不是一个常见的用例，所以我希望简化的查询能很好地为你服务。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-10-08T13:04:03.123

**MySQL 从现在开始减去天数：**

```
select now(), now() - interval 1 day 
```

印刷：

```
2014-10-08 09:00:56     2014-10-07 09:00:56 
```

**其他区间时间表达单元参数：**

[https://dev.mysql.com/doc/refman/5.5/en/expressions.html#temporal-intervals](https://dev.mysql.com/doc/refman/5.5/en/expressions.html#temporal-intervals)

```
select now() - interval 1 microsecond 
select now() - interval 1 second 
select now() - interval 1 minute 
select now() - interval 1 hour 
select now() - interval 1 day 
select now() - interval 1 week 
select now() - interval 1 month 
select now() - interval 1 year 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-12-23T06:19:49.857

你也可以使用

```
select CURDATE()-INTERVAL 30 DAY 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-31T06:31:46.680

```
SELECT date_format(current_date - INTERVAL 50 DAY,'%d-%b-%Y') 
```

您可以在 SQL 中使用日期格式进行格式化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-03T20:48:37.077

如果您只需要日期而不需要时间，请使用：

```
select*from table where exec_datetime
between subdate(curdate(), 30)and curdate(); 
```

由于`curdate()`省略了时间组件，因此在您只对日期感兴趣的情况下，它[可能](https://stackoverflow.com/questions/10763031/how-to-subtract-30-days-from-the-current-datetime-in-mysql/29439469#comment47469645_29439469)比“语义正确”更快且更“语义正确”。`now()`

此外，`subdate()`的 2 元重载可能比使用`interval`. [`interval`](http://dev.mysql.com/doc/refman/5.7/en/date-and-time-functions.html#function_date-add)适用于需要非日组件的情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-18T15:36:34.850

另一种方式

```
SELECT COUNT(*) FROM tbl_debug WHERE TO_DAYS(`when`) < TO_DAYS(NOW())-30 ; 
```

# git - 如何克隆 DEV 服务器上的 GIT 实例？

> ID：10763037
> 
> 赞同：1
> 
> 时间：2012-05-26T01:49:49.850
> 
> 标签：git, ssh

我对 GIT 有点陌生。我已经获得了一个我通过 SSH 连接到的开发实例。DEV 实例可以进行 GIT 拉取和 GIT 推送。

```
The instructions given to me are:
git clone git@jira.somedomain.com:/SomeProject
cd SomeProject
git remote add dev git@jira.somedomain.com:/SomeProject
git config --global user.email "<your_email>"
git config --global user.name "Your Name" 
```

由于我在本地机器上进行开发，因此我希望能够进行 GIT 克隆并进行 GIT 推送和 GIT 拉取。

问题是当我这样做时：

```
git clone git@jira.somedomain.com:/SomeProject
cd SomeProject
git remote add dev git@jira.somedomain.com:/SomeProject
git config --global user.email "<your_email>"
git config --global user.name "Your Name" 
```

我的用户名和密码无效。

当我这样做的时候

```
git clone MYUSERNAME@jira.somedomain.com:/SomeProject
cd SomeProject
git remote add dev git@jira.somedomain.com:/SomeProject
git config --global user.email "<your_email>"
git config --global user.name "Your Name" 
```

即使我的 JIRa 帐户有密码，它仍然无法正常工作。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:43:25.913

git-config 中的 user.email 和 user.name 字段用于将您的姓名放入提交对象中，它们不用于验证 SSH 连接。这通常使用 SSH 密钥完成。

Github 有[Mac](http://help.github.com/mac-set-up-git/)、[Windows](http://help.github.com/win-set-up-git/)和[linux](http://help.github.com/linux-set-up-git/)的说明，说明如何在您的工作站上进行设置。“将您的公钥粘贴到 Github”步骤不适用；在这种情况下，您必须将其放入服务器上`~/.ssh/authorized_keys`用户的文件中。`git``jira.somedomain.com`

# php - 有没有办法使用 php 来获取 mysql 查询结果

> ID：10763041
> 
> 赞同：1
> 
> 时间：2012-05-26T01:50:28.043
> 
> 标签：php, mysql

有没有办法使用 php 获取 MYSQL 查询结果，从获取的第一条记录中的列中获取值，然后将该记录放回查询结果中，以便稍后在结果集上循环时，可以使用该记录再次？如果可以的话，我可以把记录重新放回第一个位置吗？

或者我应该从第一行返回我需要的值作为 MYSQL 例程中的单独变量。如果这将是更好的途径，有人可以给我一些关于如何返回查询结果集和单独变量的见解吗？我似乎也无法让它工作。

或者最好的方法是从查询结果集中创建我自己的数组，然后根据需要操作 mysql 结果集？如果上述两个选项之一是可能的，我试图远离这个只是为了减少创建该数组的步骤，否则我将继续这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T01:55:17.803

就在您需要再次循环之前，您可以使用`mysql_data_seek($query, 0);` Then 下一次调用`fetch`将再次成为第一行。

我没有亲自使用它，但这就是我从php手册中理解的：http: [//us.php.net/manual/en/function.mysql-data-seek.php](http://us.php.net/manual/en/function.mysql-data-seek.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T02:16:27.533

我同意上面的答案，但只是以稍微不同的方式陈述：

在查询结果对象中回绕指针是没有意义的。您必须跟踪它的位置，而且很容易搞砸，并且不值得微小的速度增加。

制作整个数组的副本并使用键访问记录要好得多。更容易跟踪正在发生的事情。

# sql - 如何在特殊条件下分组

> ID：10763043
> 
> 赞同：10
> 
> 时间：2012-05-26T01:51:07.780
> 
> 标签：sql, oracle, group-by

目前，当我发出此 SQL 时，它会获得不同的用户名。

我有一些不同的用户名，它们代表组，例如`GRP_BSN`.

我想将所有其他用户名（恰好是数字）分组到一个组中，例如`GRP_OTHERS`

```
select username, count(*)
from host
where seq between 0 and 2000
group by username;

63149   1
63732   1
64110   2
70987   12
76841   4
GRP_BSN 226
GRP_ASN 243
GRP_DSC 93 
```

我可以实现这样的目标：

```
GRP_OTHERS 20
GRP_BSN 226
GRP_ASN 243
GRP_DSC 93 
```

**编辑：从答案修改查询**

```
select username, count(*)
from host
  where created_dt 
  -- date selection
  between to_date('2012-may-23 00:00:00', 'yyyy-mon-dd hh24:mi:ss') 
  and to_date('2012-may-23 23:59:59', 'yyyy-mon-dd hh24:mi:ss')
GROUP BY CASE
             WHEN REGEXP_LIKE(username, '^\d+$') THEN 'GRP_OTHERS'
                                                 ELSE username
         END; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T01:54:58.727

@bfavaretto 很好（对他+1），但是如果您不了解`username`前缀或者它们不同，您可以使用以下内容：

```
GROUP BY CASE
             WHEN REGEXP_LIKE(username, '^\d+$') THEN 'GRP_OTHERS'
                                                 ELSE username
         END 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T01:53:35.637

效率不高，但应该可以：

```
SELECT 
    CASE WHEN username LIKE 'GRP%' THEN username ELSE 'GRP_OTHERS' END AS username, 
    COUNT(*)
FROM host
WHERE seq BETWEEN 0 AND 2000
GROUP BY CASE WHEN username LIKE 'GRP%' THEN username ELSE 'GRP_OTHERS' END; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T02:18:34.303

如果您想通过将小组放入一个存储桶中而不是通过特定的名称模式来做到这一点，您可以使用：

```
select (case when cnt > 100 then username else 'OTHER' end), sum(cnt) as cnt
from (select username, count(*) as cnt
      from host
      where seq between 0 and 2000
      group by username
     ) t
group by (case when cnt > 100 then username else 'OTHER' end) 
```

# iphone - iOS MVC 这是视图还是控制器？

> ID：10763045
> 
> 赞同：1
> 
> 时间：2012-05-26T01:51:33.813
> 
> 标签：iphone, ios, model-view-controller, interface-builder

我在这里使用简单的英语。我有这个很棒的应用程序，有多个选项卡，每个选项卡（UIViewController 的子类）都有内容。其中一个选项卡内部有一个按钮（除其他外），并且具有很多功能。该按钮很漂亮（我在网上找到的 UIGlossyButton 的子类）并显示一个麦克风如果您按下按钮它（选项卡）会记录您的声音并自动停止（通过检测音量级别/超时）

*   录制时，标签控制器在按钮顶部显示一个 LED 仪表
*   录制后，该按钮被替换为显示扬声器的 anthor 按钮
*   轻按扬声器会播放您的声音
*   在扬声器上滑动可让您“删除”重置回麦克风

这个“小部件”很棒，我喜欢它。现在我想把这个东西放在其他选项卡中，以及整个应用程序中的其他东西。这看起来像是抽象而不是复制/粘贴的候选者。

让我感到沮丧的是：我应该将所有这些功能（显示/隐藏/交换按钮、录制声音、分析声音级别的逻辑）打包到一个小部件中吗？如果是这样，我应该使用多少个类以及每个子类应该使用哪些类？最后，在 Interface Builder 中，我应该将哪个对象拖到选项卡内的情节提要上，以及我应该在“自定义类”框中键入哪些类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T02:20:04.050

对于单个 UIView 子类来说，这听起来像是很多事情。我绝对会将其拆分为一系列类，或者至少在扩展的 UIGlossyButton 和关联的 UIViewController 之间进行拆分。

按钮的职责应该是：能够绘制自己，知道它何时被按下，并在对其执行操作时执行最少的逻辑（例如向 UIViewController 发送消息）。

将按钮本身视为 MVC 的视图。然后，控制器将真正知道要为 UI 操作背后的所有智能做什么。然后像声音计或语音文件这样的东西，可以选择地表示为模型对象/类。有时我发现在 iOS 中创建显式模型类是多余的，所以我只使用具有多态性的普通 Cocoa 类（如 NSDictionary）来处理来自控制器的模型内容。

# c++ - 统计分布类型的 C++ 模板用法

> ID：10763046
> 
> 赞同：1
> 
> 时间：2012-05-26T01:51:40.990
> 
> 标签：c++, class, templates, montecarlo

这是另一个问题的后续（[https://stackoverflow.com/questions/10712659/c-class-design-for-monte-carlol-simulation](https://stackoverflow.com/questions/10712659/c-class-design-for-monte-carlol-simulation "蒙特卡罗模拟类设计")）

我计划使用模板实现一个统计分布类。我想让 Distribution 成为 Entity 类的属性。此 Distribution 类可以采用几种不同的形式 - TriangleDistribution、NormalDistribution 和 WeightedDistribution，但这些仅在运行时才知道。他们共享大多数方法，但每种类型也可能有一些自定义方法，例如。正常分布的 setMean，WeightedDistribution 的 setWeights。

据我了解，C++ 模板是指一种类型，然后用于确定要使用的实现。有人建议我使用模板实现不同的分发类型。

虽然我认为我了解 C++ 模板的概念，但我不确定如何实施它们来解决这个分布问题。我是否使用模板专业化创建类似以下内容？：

```
template <WeightedDistribution>
class Distribution {
    WeightedDistribtion wd;
  public:
    Distribution () {}
    double sample () {
      // Custom implementation of sample
      // for weighted distribution
    }
};

// class template specialization:
template <>
class Distributionr <NormalDistribution> {
    NormalDistribtion nd;
  public:
    Distribution () {}
    double sample ()
    {
      // Custom implementation of sample for 
      // a normal distribution
    }
}; 
```

这将需要为每种分发类型创建多种类型。TIA 伙计们。皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T01:56:35.807

检查**Boost**是如何做到的：http : [//www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists.html](http://www.boost.org/doc/libs/1_49_0/libs/math/doc/sf_and_dist/html/math_toolkit/dist/dist_ref/dists.html)

如果你足够幸运，你可能根本不需要实现任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:01:27.143

从 Rob Kennedy 那里得到了关于如何实现 boost 正态分布的包装器的一个很好的答案。请参阅 [https://stackoverflow.com/questions/10831003/efficient-boost-distribution-usage 以获取答案](https://stackoverflow.com/questions/10831003/efficient-boost-distribution-usage%20for%20answer)

# java - 敌人产生安卓

> ID：10763061
> 
> 赞同：0
> 
> 时间：2012-05-26T01:55:25.963
> 
> 标签：java, android, eclipse, sprite

我正在制作一个安卓游戏，它会在屏幕顶部以一定的间隔生成敌人的精灵。没有语法错误，但是当我运行游戏时它会因为这个函数而崩溃：

```
public void updateEnemies() {
    if (numEnemiesCreated == numVisibleEnemies) {
        if (timeLastCreatedEnemy + 1000 < System.currentTimeMillis()) {
            timeLastCreatedEnemy = System.currentTimeMillis();
            boolean createdNewEnemy = false;

            for (int i = 0; i < this.numVisibleEnemies; i++) {
                if (createdNewEnemy == false) {
                    if (holderEnemy[i].isDisposed()) {
                        this.generateNewEnemy(i);
                        createdNewEnemy = true;
                    }
                }
            }
        }

        for(int i = 0; i<numVisibleEnemies; i++){
            if(!holderEnemy[i].isDisposed()){
                holderEnemy[i].move();
            }
        }
    } else {
        holderEnemy[numEnemiesCreated] = new Enemy(context, 0, 0);
        numEnemiesCreated++;
    }
} 
```

我已经尝试了一切，我就是无法让它工作！这是我的日志猫崩溃报告：

```
05-25 18:49:13.031: W/dalvikvm(6736): threadid=9: thread exiting with uncaught exception (group=0x40015578)
05-25 18:49:13.035: E/AndroidRuntime(6736): FATAL EXCEPTION: Thread-10
05-25 18:49:13.035: E/AndroidRuntime(6736): java.lang.NullPointerException
05-25 18:49:13.035: E/AndroidRuntime(6736):     at com.jlennon.gametest.EnemySpawn.updateEnemies(EnemySpawn.java:49)
05-25 18:49:13.035: E/AndroidRuntime(6736):     at com.jlennon.gametest.MainGamePanel$AnimationThread.update(MainGamePanel.java:94)
05-25 18:49:13.035: E/AndroidRuntime(6736):     at com.jlennon.gametest.MainGamePanel$AnimationThread.run(MainGamePanel.java:61) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T02:09:44.723

由于您得到的未捕获异常是 a `NullPointerException`，因此您需要检查其中的每个元素`holderEnemy`是否都实例化为其正确的类型。您不能取消引用`null`- 这是数组中默认给出的内容。

稍微强调一点，如果您采用一组元素，例如：

```
Enemy[] holderEnemy = new Enemy[1000]; 
```

这还不足以实例化数组。您将需要遍历数组并`Enemy`为每个元素创建新的 s。否则，您需要保证在 [0, `numVisibleEnemies`) 的范围内，您的数组元素被正确实例化。

（请注意，我猜测对象类型，但原则适用。）

# ssh - 通过 ssh 命令命令如何运行作业文件？

> ID：10763064
> 
> 赞同：0
> 
> 时间：2012-05-26T01:56:30.363
> 
> 标签：ssh, cron, backup

关于通过 ssh 运行 script.sh

```
#!/bin/bash
/usr/local/cpanel/scripts/cpbackup
clamscan -i -r --remove /home/
exit 
```

这是否意味着运行 /usr/local/cpanel/scripts/cpbackup 并在完成后运行 clamscan -i -r --remove /home/

或者同时运行两个命令？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T02:00:34.537

除非任何命令[“守护”](http://en.wikipedia.org/wiki/Daemon_%28computing%29)自身，否则脚本中的命令按顺序一次运行一个。

# php - ldap_mod_replace() [function.ldap-mod-replace]：修改：服务器不愿意执行

> ID：10763070
> 
> 赞同：6
> 
> 时间：2012-05-26T01:59:35.883
> 
> 标签：php, active-directory, ldap, windows-server-2008-r2

收到错误：

> 服务器不愿意执行

同时通过 PHP 更改 AD 中的 unicodePwd。但是，我可以搜索、添加、删除和修改用户的任何属性。

使用Administrator账号绑定，admin拥有修改任何用户密码的完全权限。

这是我正在使用的代码：

```
<?php
$dn = "CN=Vishal Makwana,OU=Address Book,DC=example,DC=com";
$ad = ldap_connect("ldap://example.com")
      or die("Couldn't connect to AD!");
ldap_set_option($ad, LDAP_OPT_PROTOCOL_VERSION, 3);
$bd = ldap_bind($ad,"admin@example.com","admin1");

    if($bd) {
        echo "AD bind successfully";  
      }
    else {
        echo "Couldn't bind AD";;
    }

$user["unicodePwd"] = "asdf1234";

$result = ldap_mod_replace($ad, $dn, $user);
if ($result) echo "User modified!"; else
             echo "There was a problem!";

ldap_unbind($ad);
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T05:01:45.577

要通过 LDAP 在 AD 中设置密码，您需要做很多事情。

*   您需要使用 SSL 连接 (ldaps://)

*   密码需要用引号引起来

*   （引用的）密码需要以 16 位 unicode (UTF-16LE) 编码

假设您尝试设置的密码是普通 ascii 字符，则可以通过在 ascii 字符串的每个字节后添加一个 \000 字节来完成 unicode 转换，[如此代码示例](http://www.letu.edu/people/markroedel/netcccu/activedirectorypasswordchanges.htm)所示。

所以你的例子看起来像：

```
$newpassword = "asdf1234";
$newpassword = "\"" . $newpassword . "\"";
$len = strlen($newpassword);
for ($i = 0; $i < $len; $i++) $newpass .= "{$newpassword{$i}}\000";
$user["unicodePwd"] = $newpass; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T14:09:00.323

经过大量搜索并花费大量时间，我终于能够使用 LDAP 库从 PHP 代码修改活动目录用户密码。

我们需要 LDAP 与 PHP 代码中的活动目录服务器的连接；并且您必须修改该`unicodePwd`字段。

```
ldap_connect(ldaps://IP, 636);
ldap_connect(ldaps://IP, 389); 
```

# objective-c - 无法让 UIImage 适合自定义 UITableViewCell

> ID：10763074
> 
> 赞同：0
> 
> 时间：2012-05-26T02:00:40.340
> 
> 标签：objective-c, uitableview

大家好，我无法使图像文件成为我制作的自定义 uitableview 单元格。图片太小了，不知道怎么放大。提前寻求帮助。

```
#import <UIKit/UIKit.h>

@interface customCell : UITableViewCell
{
  //UILabel *frontLabel;    
}
@property(nonatomic , strong) IBOutlet UILabel *label;
@property(nonatomic , strong) IBOutlet UILabel *label2;
@property(nonatomic , strong) IBOutlet UIImageView *imgView;
@end

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @"cell";

  customCell * cell =[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[customCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    // cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
  }

  User * user = [self.list objectAtIndex: indexPath.row];

  cell.label.text = user.username;
  NSString *url = user.profilePic;
  UIImage * image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]];
  cell.imageView.contentMode =UIViewContentModeScaleAspectFit;
  cell.imageView.image =image;

  return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T02:06:26.753

在您的`customCell`类中（顺便说一句，所有类都应以大写字母开头，属性和变量应小写），您只需将对象的`frame`属性设置`imageView`为所需的正确大小和位置。

比如`imageView.frame = CGRectMake(10., 10., 50., 50.)`前两个参数是图像视图右上角的 x 和 y 位置，后两个参数是宽度和高度。

或者，由于您将这些属性指定为 IBOutlet，如果您使用 XIB 文件进行布局，您应该已经在其中设置了大小。

在没有看到 XIB 的 Interface Builder 的屏幕截图或 的实现代码的情况下`customCell`，这是我能提供的最好帮助。

# c# - 在数组的子集中找到最小值的优雅方法是什么？

> ID：10763077
> 
> 赞同：2
> 
> 时间：2012-05-26T02:01:25.767
> 
> 标签：c#, arrays

我有一个`a`100 个整数的数组。`a[3]`通过`a[70]` **AND 该最小值的索引**找到最小值的推荐方法是什么？假设没有重复值。

我知道循环遍历相关索引范围的笨拙方式：

```
for(i = 3; i < 70, i++) 
{
    ...
} 
```

我正在寻找一种更优雅的方式在 C# 中执行此操作，而不是循环。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T02:02:47.677

找出分钟

```
List<int> templist = a.Skip(3).Take(67).ToList();

int minimum = templist.Min(); 
```

对于索引

```
int index = templist.FindIndex(i => i == minimum) + 3; 
```

我添加了 3 因为列表中的索引将比原始序列中的索引少 3 `a`。

它在做什么

1.  跳过 - 保留前 3 个值，即索引 0、1、2 并返回剩余的数组。
2.  Take - 从 Skip 返回的数组中获取 67 个值。（因为你的 for 循环从 3 开始一直到 70，所以你基本上循环了 67 个项目 bcoz 70 - 3 = 67）。
3.  ToList - 将返回的序列转换为列表以查找索引。
4.  Min - 从中​​获取最小值。

您必须使用循环，因为它是一个序列。既然你说优雅，所以我使用了 LINQ 而不是 for 循环（即使它也这样做循环）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T02:05:05.227

如果您的数据结构未排序，那么如果不循环遍历子列表中的所有元素，则无法做到这一点，或者如果您通过提供的 API 使用一些隐式循环。

您不能使用排序集合，因为您正在处理它的子部分（因此您需要为列表的一部分创建一个排序集合），所以无论如何您都必须循环它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T02:45:42.787

LINQ`Aggregate`不是最简单的，但它可以说是“优雅”解决方案中效率最低的（尽管它们仍然比简单的循环更多的代码行。此外，迭代自己仍然是最好的，因为你没有分配任何额外的记忆）。

但无论如何，如果你觉得有必要让你的继任者把你挂在雕像上，你可以这样做而不是简单的循环：

`var minValueAndItsIndex = a
.Skip(3)
.Take(70 - 3)
.Select((value, index) => new { Value = value, Index = index + 3})
.Aggregate((tuple1, tuple2) => (tuple1.Value < tuple2.Value) ? tuple1 : tuple2);`

如果您创建一个`ValueType`基于 2-item 的元组并使用它而不是匿名类型，它将与更有效的直接迭代相当，因为它不会分配任何额外的内存。

# javascript - $('h1') 如何在 jQuery 中作为数组记录到 Web 控制台？

> ID：10763086
> 
> 赞同：13
> 
> 时间：2012-05-26T02:04:57.653
> 
> 标签：javascript, jquery, logging, browser, console

如果您`console.log($('some selector'))`在浏览器中执行此操作，它会返回一个看起来像数组的内容（第一行）：

![图片来自 Github 项目页面上最新版本的 chrome web 控制台](../Images/6f337c147efdb3fdae863b22efee4588.png)

但请注意，它不是 a `instanceof Array`，而是实际上[是`jQuery`object](https://github.com/jquery/jquery/blob/ae20e732f02c7e3bdd76324979b1a816c567ec22/src/core.js#L6)。

当你这样做时`console.dir($('h1'))`，它表明它实际上是 jQuery 对象。

问题是，他们如何让它看起来像是 Web 控制台中的一个数组？我注意到[这里](https://github.com/jquery/jquery/blob/ae20e732f02c7e3bdd76324979b1a816c567ec22/src/core.js#L74)的 jQuery 源代码中他们添加了对一些 Array 和 Object 方法的引用，并且[在这里](https://github.com/jquery/jquery/blob/ae20e732f02c7e3bdd76324979b1a816c567ec22/src/core.js#L199)他们向对象添加了`toArray`（以及 slice 和其他方法）`jQuery`。Web 控制台是否以某种方式检查这些方法，如果找到一个（、、、`toArray`等`indexOf`）`slice`，它会将其打印为数组？我想从任何自定义对象（例如`Ember.ArrayProxy`. 当前，当您记录`Ember.ArrayProxy`它显示的内容`> Object`或其他内容时，最好将其显示为数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T02:09:13.917

`Array`您使用原型使您的对象继承，如下所示：

```
function SomeType() {
    this.push(16);
}

SomeType.prototype = [];
SomeType.prototype.constructor = SomeType; // Make sure there are no unexpected results

console.log(new SomeType()); // Displays in console as [16] 
```

当然，所有 jQuery 对象都是`jQuery`函数/构造函数的实例，所以 jQuery 就是这样做的。作为奖励，由于继承，您可以从 中获得所有方法`Array`，以及随之而来的索引！

# java - 如何在android中显示数据缓冲区？

> ID：10763095
> 
> 赞同：0
> 
> 时间：2012-05-26T02:06:28.453
> 
> 标签：java, android, bluetooth, buffer

我是android开发应用程序的新手。想从我的蓝牙套接字中读取缓冲区中的数据并显示它。数据来自温度传感器（LM35 > 微控制器 > 蓝牙模块 > 安卓设备）。下面是读取数据并将数据保存到缓冲区的编码。我想知道如何显示它。希望你们能帮助我。非常感谢您..

```
 byte[] buffer = new byte[1024];
         int bytes;
         try {
              InputStream instream = Bee_btSocket.getInputStream();
              bytes = instream.read(buffer);
             }

         catch (IOException e) {
         break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T10:38:51.280

我通过以下代码来做这件事......

```
public ConnectedThread(BluetoothSocket socket) {
            Log.d(TAG, "create ConnectedThread");
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {
                Log.e(TAG, "temp sockets not created", e);
            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            Log.i(TAG, "BEGIN mConnectedThread");
            byte[] buffer = new byte[1024];
            int bytes;

            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);

                    // Send the obtained bytes to the UI Activity
                    mHandler.obtainMessage(BluetoothChat.MESSAGE_READ, bytes, -1, buffer)
                            .sendToTarget();
                } catch (IOException e) {
                    Log.e(TAG, "disconnected", e);
                    connectionLost();
                    break;
                }
            }
        }
```

# python - webpy 和 CherryPyWSGIServer

> ID：10763096
> 
> 赞同：0
> 
> 时间：2012-05-26T02:06:32.437
> 
> 标签：python

[我正在为我的程序http://webpy.org/cookbook/ssl](http://webpy.org/cookbook/ssl)使用底部代码，当我通过 https 连接到我的 python 服务器时一切都很好。然后，当我以 http 连接到我的服务器时，它没有按预期连接。但是当我回到https时，我每次都会超时，我必须重新启动我的comp才能再次连接。谁能帮助我从哪里开始解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:28:57.430

在您的 nginx 或 apache 服务器配置文件中，您需要始终将页面重定向到 https，或者正确处理 http。例如，如果有人访问我的服务器，我每次在 Nginx 中都会像这样永久重定向到 https：

```
server {
    listen 80;
    rewrite ^ https://$host$request_uri permanent;
} 
```

您还需要定义 webpy 应用程序处理。我最终使用了带有 webpy 的 Ubuntu、Nginx、uWSGI，我的网站运行得非常好。希望这会有所帮助。在找到这个网站之前，我一直在做和你一样的事情：

[http://fartersoft.com/blog/2012/02/10/deployment-of-web-py-applications-using-uwsgi-and-nginx-on-ubuntu/](http://fartersoft.com/blog/2012/02/10/deployment-of-web-py-applications-using-uwsgi-and-nginx-on-ubuntu/)

这帮助我开始。我希望它对你有帮助。

# c# - 如何生成良好的浮点逻辑代码覆盖率？

> ID：10763097
> 
> 赞同：13
> 
> 时间：2012-05-26T02:07:04.483
> 
> 标签：c#, unit-testing, code-contracts, numerical, pex

我正在手工制作新代码。我想确保我不遗余力。

除了指定代码合同来指导 Pex 以便它在数字密集型代码中产生良好的覆盖率之外，我还能做些什么具体的事情？

尝试在[http://research.microsoft.com/en-us/projects/pex/pexconcepts.pdf](http://research.microsoft.com/en-us/projects/pex/pexconcepts.pdf)中搜索关键字“float”以获取一些背景信息。

> **浮点数的算术约束**通过转换为有理数来近似，启发式搜索技术在 Z3 之外使用以找到浮点约束的近似解。

...并且...

> **符号推理**。Pex 使用自动约束求解器来确定哪些值与测试和被测代码相关。然而，约束求解器的能力是有限的，而且永远是有限的。特别是，Z3 无法精确推理浮点运算。

或者，您是否知道 .NET 下更适合在 .NET 下查找数值异常的工具？我知道[http://fscheck.codeplex.com/](http://fscheck.codeplex.com/)但它不执行符号推理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:48:57.853

是你想要的良好覆盖吗？仅仅在一段代码中运行每个分支的测试不太可能实际上意味着它是正确的——通常更多的是关于极端情况，作为开发人员的你最有可能知道这些极端情况是什么。听起来它也可以通过说“这是一个有趣的输入组合”来工作，而你想要的很可能是指定你想看到的系统的行为——如果你一开始就写错了代码，那么有趣的输入可能与正确的代码完全无关。

也许这不是您正在寻找的答案，但我会说最好的方法是手动！在开始编码之前写下规范，并在您知道/正在为您的类/子系统编写 API 时将其转化为大量测试用例。

As begin filling out the API/writing the code you're likely to pick up extra bits and pieces that you need to do + find out what the difficult bits are - if you have conditionals etc that are something you feel that someone refactoring your code might get wrong then write a test case that covers them. I sometimes intentionally write code wrong at these points, get a test in that fails and then correct it just to make sure that the test is checking the correct path through the code.

然后试着想想你可能没有涵盖的任何奇怪的值——负输入、空值等。通常这些情况是无效的，你不想迎合/不得不考虑——在这些情况下，我通常会写一些测试说他们应该抛出异常——这基本上可以阻止人们在你没有正确/使用无效数据的情况下滥用代码。

这样做的另一个好处是，如果您意识到算法需要彻底重写才能满足一些新要求，那么您所要做的就是添加新的测试用例，然后重写/重构；如果您的测试只是查看算法的细节并假设对外部世界的影响，那么您将非常头疼，试图弄清楚算法当前如何影响行为，哪些部分是正确的，哪些不是，然后试图将大量单元测试迁移到新的 API/算法上。

# c++ - 如何在课堂上使用 char*

> ID：10763099
> 
> 赞同：1
> 
> 时间：2012-05-26T02:08:14.740
> 
> 标签：c++, class, constructor, char

我是 C++ 新手，并从教科书中进行了一些自我培训。我需要创建一个新类“String”。它必须使用构造函数将字符串初始化为由指定长度的重复字符组成的字符串。

我无法弄清楚如何将任何内容分配给 char* 变量。根据作业，我不能使用标准字符串库来执行此操作。我需要在构造函数中做什么？

```
#include "stdafx.h"
#include <cstdlib>
#include <iostream>
#include <string.h>

using namespace std;

class String {
  protected:
    int  _len;

  public:
      char *buff;
    String (int n, char* c);
};

int main()
{
  String myString(10,'Z');
  cout << myString.buff << endl;

  system("PAUSE");
  return 0;
}

String::String(int n, char* c)
{
  buff = new char[n];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T02:13:12.247

你快到了：因为你需要重复的字符，你不应该通过`char*`，只是一个普通的`char`. C 字符串的缓冲区也需要比字符串长一个字符；缓冲区的最后一个元素必须是零字符`\0`。

```
String::String(int n, char c) {
    buff = new char[n+1];
    for (int i = 0 ; i != n ; buf[i++] = c)
        ;
    buf[n] = '\0';
} 
```

请注意，创建`buf`公共成员变量不是一个好主意：用户`String`不应该能够重新分配新缓冲区，因此提供访问器`char* c_str()`并将其设为`buf`私有可能是个好主意。

# javascript - 带有复选框的 Onclick

> ID：10763113
> 
> 赞同：1
> 
> 时间：2012-05-26T02:12:44.040
> 
> 标签：javascript

我有一个复选框，它调用一个 js 函数，如下所示：

```
<input type="checkbox" onclick="return validate('tos')" value="1" name="tos"/> 
```

但是我在 JS 检测到它实际上没有被勾选时遇到问题，它似乎总是返回 true。

这就是我的脚本：

```
function validate(type){

    var x = document.getElementById("reg"); //get array of elements in form "reg"
    var input = x.elements[4].value; //[4] = checkbox

    if(input){
        alert('ticked');    
    } else {
        alert('not ticked');    
    }
} 
```

但它总是返回勾选，即使用户在它已经勾选时点击它（我认为这意味着它不再是 1 的值）......有没有办法可以在 JS 中修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T02:16:31.833

复选框的`value`总是`1`，与其`checked`状态无关。

使用该 `.checked`属性获取复选框的选中状态。

# c++ - InterfaceFileForASetTemplateClass

> ID：10763116
> 
> 赞同：0
> 
> 时间：2012-05-26T02:13:08.373
> 
> 标签：c++, interface

InterfaceFileForASetTemplateClass

嗨 stackoverflow.com 论坛的人，我直接从教科书 Absolute C++ 第四版 Savitch ISBN-13：978-0-13-136584-1 中输入了这段代码。

设置模板类的接口文件第 808 页。

`sort.cpp`在第 782 页上给出了第 13 行的错误：

```
Line 13 error: expected initializer before numeric constant 
```

有人可以帮忙吗，因为我希望教科书“正常工作”，这样我就可以研究代码，而不会陷入我不理解的额外错误。

```
//This is the implementation file listtools.cpp. This file contains
//function definitions for the functions declared in listtools.h.
#include <cstddef>
#include "listtools.h"
namespace LinkedListSavitch
{
    template<class T>
    void headInsert(Node<T>*& head, const T& theData)
    {
        head = new Node<T>(theData, head);
    }
    template<class T>
    void insert(Node<T>* afterMe, const T& theData)12
    {
        afterMe->setLink(new Node<T>(theData, afterMe->getLink()));
    }
    template<class T>
    void deleteNode(Node<T>* before)
    {
        Node<T> *discard;
        discard = before->getLink();
        before->setLink(discard->getLink());
        delete discard;
    }
    template<class T>
    void deleteFirstNode(Node<T>*& head)
    {
        Node<T> *discard;
        discard = head;
        head = head->getLink();
        delete discard;
    }
    //Uses cstddef:
    template<class T>
    Node<T>* search(Node<T>* head, const T& target)
    {
        Node<T>* here = head;
        if (here == NULL) //if empty list
        {
            return NULL;
        }
        else
        {
            while (here->getData() != target && here->getLink() != NULL)
                here = here->getLink();
            if (here->getData() == target)
                return here;
            else
                return NULL;
        }
    }
}//LinkedListSavitch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:23:16.733

第13行有一个`12`，真的在书上吗？如果是的话，这是一个严重的疏忽。只需将其删除，您的代码就应该可以工作。

# jquery - 在模板中组织两个元素

> ID：10763123
> 
> 赞同：0
> 
> 时间：2012-05-26T02:13:44.520
> 
> 标签：jquery, menu

该网站是：[http](http://example3.flenj.server306.com/) ://example3.flenj.server306.com/ 我正在使用的 CSS 模板在这里：[http ://example3.flenj.server306.com/styles/styles.css](http://example3.flenj.server306.com/styles/styles.css)

我有一个菜单 (http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)，已添加到安装到服务器上的网站模板中。

两个问题：

1.  是否可以操纵菜单使其始终位于浏览器窗口的中心？现在，它在 CSS 中设置了一个边距并且它保持不变......如果浏览器窗口变小或变大，我希望它移动......
2.  我需要使用什么编码来确保菜单不会落在滚动图像的后面，而是在它的前面？

这个新手需要帮助。感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T02:20:03.330

您对第一个问题的回答是将其边距设置为**auto**、[reference](http://bluerobot.com/web/css/center1.html)。在第二个问题上，您应该使用 z-index css 属性，[参考](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

# c# - MDI 显示异常

> ID：10763125
> 
> 赞同：0
> 
> 时间：2012-05-26T02:15:52.277
> 
> 标签：c#, winforms

我有这个 MainForm 作为我的 MDI 父级。当我打电话给我的 MDIChild 时，它通常会出现一次。我关闭 MDIChild 并再次打开它的时间。它有一个未处理的 ObjectDisposedException（无法访问已处置的对象。）

```
private void BtnUserPanel_Click(object sender, EventArgs e)
{
    FormAccounts fa = new FormAccounts();
    fa.MdiParent = this;
    fa.Show(); //ObjectDisposedException was unhandled
} 
```

我将如何捕获此错误，以便当我关闭我的 MDIForm 并再次打开时，它会再次显示我的 MDIForm 而没有此 ObjectDisposedException。

当我尝试关闭 MDIChildren 然后再次打开 MDChildren 时，我从 MDI Parent 堆栈跟踪中得到了这个：

> 未经处理的异常：无法访问已处置的对象。对象名称：'FormAccounts'。在 System.Windows.Forms.Control.CreateHandle() 在 System.Windows.Forms.Form.CreateHandle() 在 System.Windows.Forms.Control.get_Handle() 在 System.Windows.Forms.Form.SetVisibleCore(布尔值)在 System.Windows.Forms.Control.Show() 在 System.Windows.Forms.COntrol.Show() 在 Lendmattic.UI.FormMain.BtnUserPanel_Click(Object sender, EventArgs e) 在 FormMain.cs:line71

# lua - 使用模拟游戏手柄控制在所有方向上以相同的最大速度移动角色

> ID：10763135
> 
> 赞同：1
> 
> 时间：2012-05-26T02:19:32.553
> 
> 标签：lua, 2d, game-physics

我想通过模拟游戏手柄输入以相同的最大恒定速度向任何方向移动我的角色。

通常对于 8 个方向的移动，我会根据方向的类型将玩家的速度乘以一个常数。

```
ORTHOGONAL_SPEED = 2
DIAGONAL_SPEED = 1.414 
```

我所拥有的是来自模拟输入的当前轴的小数。

```
joy1_axisDir1 = a number between -1(left) and 1(right)
joy1_axisDir2 = a number between -1(up) and 1(down) 
```

这就是我现在要在屏幕上移动角色的方法。

卢阿代码：

```
if joy1_axisDir1 ~= 0 then
  player.x = player.x + (player.move_speed * joy1_axisDir1)
end
if joy1_axisDir2 ~= 0 then
  player.y = player.y + (player.move_speed * joy1_axisDir2)
end 
```

这导致对角线运动明显快于任何其他方向。

我如何考虑方向以限制玩家的移动速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T02:37:56.833

使用勾股定理找到速度矢量的大小，将 X 和 Y 速度除以该大小，然后将每个速度乘以所需的移动速度。

这是基本的向量数学。您正在对向量进行归一化，然后将其乘以标量，以获得具有该标量大小和原始向量方向的向量。

# python - 有没有办法在使用 Flask 和 Flask-WTForms 循环表单时隐藏 csrf 标签？

> ID：10763139
> 
> 赞同：35
> 
> 时间：2012-05-26T02:20:39.627
> 
> 标签：python, flask, jinja2

我有非常简单的联系表格，我想以某种方式隐藏标签，使其不显示`Csrf Token`。我正在使用 Flask 和 Flask-WTForms 并呈现如下形式：

```
{% for field in form %}
    {{ field.label }}
    {{ field }}
{% endfor %} 
```

所以基本上这正确显示了我的输入并且csrf oen被隐藏但标签没有被隐藏？我应该克服它并含蓄地说`form.field_name`而不是遍历表单，还是有办法处理这种“极端情况”。

我正在考虑在 for 循环声明或标签声明中进行逻辑检查，但到目前为止我还没有在文档中找到任何有效的东西。

谢谢

编辑：我已经通过这样做“解决”了这个问题，但感觉有点肮脏和骇人听闻，我不喜欢我仍然愿意接受更好的解决方案：

```
{% if not loop.first %}
    {{ field.label }}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-29T13:10:48.173

如果您想要一个适用于所有隐藏字段而不仅仅是 CSRF 令牌的更通用的解决方案：

```
{{ form.hidden_tag() }}
{% for field in form if field.widget.input_type != 'hidden' %}
  {{ field.label }}
  {{ field }}
{% endfor %} 
```

`form.hidden_tag()`由 Flask-WTF 提供。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-26T08:13:49.723

我认为这也应该有效：

```
{% for field in form if field.id != 'csrf_token' %}
    {{ field.label }}
    {{ field }}
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-19T21:42:42.270

只是为了增加JD的出色答案......

对于那些偶然发现这个问题的人：**您可以通过将条件“if field.widget.input_type!='hidden'”专门添加到标签而不是表单迭代器来避免丢失（csrf）隐藏字段**（从而保护）。

IE：

**不是**

```
{{ form.hidden_tag() }}
{% for field in form if field.widget.input_type != 'hidden' %}
      {{ field.label }}
{{ field }}
{% endfor %} 
```

**但**

```
{{ form.hidden_tag() }}
{% for field in form %}
  {% if field.widget.input_type != 'hidden' %} {{ field.label }} {% endif %}
  {{ field }}
{% endfor %} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-26T02:50:26.860

我找到了这样做的方法：

```
{% if field.id != 'csrf_token' %} 
```

我相信这不那么骇人听闻。我通过修改文档中的示例找到[了这一点。](http://jinja.pocoo.org/docs/switching/#conditions)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-22T15:01:06.907

我最近做了一个宏来通过ajax提交表单，以便不重新加载网页并直接将其发送到api。

```
{% macro render_fields3(form, form_name, method) %}
<form class="ajax" name={{ form_name }} method={{ method }}>
{{ form.hidden_tag() }}
{% for field in form if field.widget.input_type != 'hidden' %}
    <dt>{{ field.label }}
    <dd>{{field(id=field.name + method)|safe}}
    {% if field.errors %}
      <ul class=errors>
      {% for error in field.errors %}
        <li>{{ error }}</li>
      {% endfor %}
      </ul>
    {% endif %}
    </dd>
  {% endfor %}

</form>
{% endmacro %} 
```

# spring - 具有相同类型的多个关系类

> ID：10763141
> 
> 赞同：6
> 
> 时间：2012-05-26T02:21:19.507
> 
> 标签：spring, neo4j, spring-data-neo4j

使用 spring-data-neo4j，我想创建两个类，`@RelationshipEntity(type="OWNS")`用于将一个`Person`类链接到 a`Pet`和`Car`.

```
@RelationshipEntity(type="OWNS")
public class OwnsCar {  
    @Indexed
    private String name;

    @StartNode
    private Person person;

    @EndNode
    private Car car;
}

@RelationshipEntity(type="OWNS")
public class OwnsPet {
    @Indexed
    private String name;

    @EndNode
    private Person person;

    @StartNode
    private Pet pet;
} 
```

这可以正确保存到图形数据库中，没有问题，因为我可以查询实际`Node`并`Relationship`查看它们的**类型**等。

但是当我尝试使用时，`@RelatedTo(type="OWNS", elementClass=Pet.class)`我要么得到一个类转换异常，要么在使用延迟初始化时得到不正确的结果。

```
@NodeEntity
public class Person {   
    @Indexed
    private String name;

    @RelatedTo(type="OWNS", direction=Direction.OUTGOING, elementClass=Pet.class)
    private Set<Pet> pets;

    @RelatedTo(type="OWNS", direction=Direction.OUTGOING, elementClass=Car.class)
    private Set<Car> cars;
} 
```

当我尝试打印我的人时得到的结果（我的`toString()`已被省略，但它只是`toString()`为每个字段调用）是这样的：

```
Person [nodeId=1, name=Nick, pets=[Car [nodeId=3, name=Thunderbird]], cars=[Car [nodeId=3, name=Thunderbird]]] 
```

有谁知道这是否可以完成，应该完成，只是一个错误或缺少的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T15:50:44.117

It seems like the problem is, that the annotation causes springDataNeo4j to priorize the relationship name. I tried the same on another sample I created. If both annotations contain `type="OWNS"` it mixes both 'objects'. When I omit this information, and only use direction and type, it works for me.

Unfortunately this will lead to a problem if you are using another @RelatedTo annotation with more Pets or Cars related with another annotation. As it would not differ between "OWNS" and any other relation to a Pet-Type, the set returns all related pets (example: peter ->(HATES-Relationsip)->dogs).

If it's a bug or not, I can't tell... But for the database: There are only nodes and relations. Both are not typed, so neo4j does not know anything about your 'Pet'- or 'Car'-Class. Spring data neo4j handles this, either by indexing all nodes per type and setting a type-attribute, or using a specific graph-layout (with subreferences). Even if you would want to fetch all pets of a person with a traversal description, you would have so much more code to write, since the outgoing relations with name 'OWNS' contains two types of objects.

I would recommend using two different names. It's easier to write your custom traversals/queries later on, and its probably even faster as well, because no class-type comparison will be needed. Is there any reason, why you would need these specific names?

PS: It is possible, that not everything is 100% accurate. I don't know springdataneo4j in detail, but that's what I figured out so far.

# ruby-on-rails - 在 Rails 中，无法为 {"adapter"=>"postgresql",

> ID：10763143
> 
> 赞同：16
> 
> 时间：2012-05-26T02:22:27.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我正在尝试运行`rake db:create`，或者`rake db:setup`出现以下错误。这很奇怪，因为`rake db:create`它在其他 Rails 项目的其他文件夹中运行良好。

```
user:project user$ rake db:create
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:991:in `initialize'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:991:in `new'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:991:in `connect'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:260:in `initialize'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:27:in `new'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/postgresql_adapter.rb:27:in `postgresql_connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:304:in     `new_connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:323:in `checkout_new_connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:265:in `block (2     levels) in checkout'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `loop'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:261:in `block in checkout'
/Users/user/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:260:in `checkout'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:162:in `connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:409:in     `retrieve_connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:107:in `retrieve_connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/railties/databases.rake:110:in `rescue in create_database'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.1.0/lib/active_record/railties/databases.rake:54:in `create_database'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.1.0/lib/active_record/railties/databases.rake:42:in `block (2 levels) in <top (required)>'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/user/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/user/.rvm/gems/ruby-1.9.2-p290/bin/rake:19:in `load'
/Users/user/.rvm/gems/ruby-1.9.2-p290/bin/rake:19:in `<main>'
Couldn't create database for {"adapter"=>"postgresql", "database"=>"project_test",     "username"=>nil, "password"=>nil, "min_messages"=>"warning"} 
```

这是我的`database.yml`

```
development:
  adapter: postgresql
  database: project_development
  username:
  password:
  min_messages: warning

test:
  adapter: postgresql
  database: project_test
  username:
  password:
  min_messages: warning

production:
  adapter: postgresql
  database: project_production
  username:
  password:
  min_messages: warning 
```

Posgree 在`/usr/local/var/postgres`. rake 不应该尝试在同一个文件夹中查找它而不是`/var/pgsql_socket/`? （反正我没有 /usr/local/var/pgsql_socket ）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-26T06:09:21.510

解决了！

解决方案很简单，可以更新当前安装的 gem。

另一种尝试的解决方案是设置`host: localhost`或您在 database.yml 文件的开发设置中使用的任何主机。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-26T16:46:41.030

我通过 Homebrew 在 Mac OS X 上安装了 PG（我没有意识到它在 Mac OS X 中是默认的），并且遇到了同样的问题。在通过 Homebrew 安装 pg 之前安装 pg gem 可能会使问题变得更糟。

我通过执行以下操作解决了同样的问题：

1.  确保所有二进制文件都指向 Cellar 目录中的二进制文件（Mac OS X 上的 /usr/local/Cellar）
2.  卸载 pg gem`gem uninstall pg`
3.  使用 Homebrew 配置重新安装`gem install pg -- --with-pg-config=/usr/local/bin/pg_config`（如果您使用 pg setup 创建了一个 rails 项目，这在您的 database.yml 配置文件中进行了说明）

它奏效了！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-19T17:47:28.960

首先，您需要在 Postgres 中手动创建用户，同时为该用户授予创建数据库的权限（AKA createdb）。

为此，首先，打开 Postgres shell 提示符

`$ sudo -u postgres psql`

创建您的用户

`postgres=# create role Your_DB_username with createdb login password 'YOUR_PASSWORD';`

退出 Postgres 外壳

`postgres=# \q`

执行任何与 db 相关的 rake 任务：

`$ rake db:create`

它会起作用的！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-18T21:51:09.987

上面 zquintana 的答案对我有用，但有一些小警告。

我的解决方案（使用 Homebrew）：

1.  如果你安装了 gem`gem uninstall pg`
2.  删除 postgresql 的旧副本`brew uninstall postgresql`
3.  重新安装postgresql`brew install postgresql`
4.  安装说明提到：

> 要在登录时启动 postgresql：
> 
> > `ln -sfv /usr/local/opt/postgresql/*.plist ~/Library/LaunchAgents`
> 
> 然后现在加载 postgresql：
> 
> > `launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist`
> 
> 或者，如果您不想/不需要launchctl，您可以运行：
> 
> > `postgres -D /usr/local/var/postgres`

4.  所以运行`ln -sfv /usr/local/opt/postgresql/*.plist ~/Library/LaunchAgents`

5.  然后`launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist`

6.  现在使用 Homebrew 配置重新安装 gem`gem install pg -- --with-pg-config=/usr/local/bin/pg_config`

7.  现在运行你的`rake db:create`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-24T16:16:44.427

就我而言，这就是我所需要的：[https ://dba.stackexchange.com/a/75221](https://dba.stackexchange.com/a/75221)

```
pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-28T18:58:47.427

我遇到了相同的问题，并且能够通过以下方式解决错误：

1.  使用 postgresapp.com（由 heroku 在[https://devcenter.heroku.com/articles/heroku-postgresql#local-setup](https://devcenter.heroku.com/articles/heroku-postgresql#local-setup)推荐），
2.  添加到 config/database.yml

    ```
    host: localhost 
    ```

3.  [按照http://postgresapp.com/documentation](http://postgresapp.com/documentation)故障排除部分的建议重置共享内存设置：

    ```
    sudo sysctl -w kern.sysv.shmall=65536
    sudo sysctl -w kern.sysv.shmmax=16777216 
    ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-11T01:08:23.040

还要检查您没有打开的连接，例如连接到实例的客户端或应用程序。如果发生这种情况，您将在错误中看到这一点

```
Couldn't create database for {"adapter"=>"xxxx", "database"=>"xxxx", "host"=>"localhost", "username"=>"postgres", "password"=>"xxxxx", "pool"=>5, "timeout"=>5000}
rake aborted!
ActiveRecord::StatementInvalid: PG::ObjectInUse: ERROR:  source database "template1" is being accessed by other users
DETAIL:  There is 1 other session using the database. 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-16T06:47:52.643

简单添加`host: localhost`到您的 database.yml

更多详情请访问[rake db:create:all failed to connect to PostgreSQL 数据库](http://stackoverflow.com/questions/10263821/rails-rake-dbcreateall-fails-to-connect-to-postgresql-database)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-23T17:19:44.447

我可以通过确保 database.yml 文件中的数据库名称采用以下格式来解决此问题：appname_development、appname_test 和 appname_production。这是我的 database.yml 文件作为示例：

```
 development:
      adapter: postgresql
      database: parallax_development
      username:
      password:

    test:
      adapter: postgresql
      database: parallax_test
      username:
      password:

    production:
      adapter: postgresql
      database: parallax_production
      username:
      password: 
```

# mysql - MySql 和 Hibernate 中的表分区

> ID：10763147
> 
> 赞同：1
> 
> 时间：2012-05-26T02:23:35.187
> 
> 标签：mysql, hibernate, indexing, partitioning, sharding

在我的项目中，我有一个大约 20 列的表格。我们在“状态”列上有分区表。为了简单起见，假设状态“错误”和“成功”有两个可能的值。因此，我们有两个分区，即表的 p1 和 p2。我们想要的是在每个分区上有不同的索引，因为选择查询将根据状态在 where 子句中使用不同的列。例如，分区 p1 需要在 column1 和 column2 上有索引，而分区 p2 需要在第 4 列和第 5 列上有索引。但是我了解到在 MySql 5.5 中无法在分区级别应用索引。

所以现在其他选择可能是为每个状态设置不同的表。我在应用层使用 Hibernate。是否可以配置 Hibernate 以使两个表都有一个实体类。这样当状态从“ERROR”变为“SUCCESS”时，记录会在后台自动从错误表移动到成功表。作为一名开发人员，我只需要处理 Entity 对象，而不必担心它是从哪个表中获取的。Hibernate 应该处理将数据从一个表移动到另一个表。这样我就可以在不同的表上维护不同的索引。这更像是手动分区而不是数据库分区。

我听说过 Hibernate Shard 项目。但是我认为当您对同一个表有不同的数据库时它很有用。在这里，我有一个数据库，其中有两个表用于同一实体。

# html - 具有干净 HTML 输出的 Mac 文字处理器？

> ID：10763150
> 
> 赞同：-1
> 
> 时间：2012-05-26T02:24:39.693
> 
> 标签：html, word-processor

我需要拼写检查和基本格式（如堆栈溢出编辑器）。如果您可以切换到 HTML 编辑并将格式化的文本粘贴到其中并且它将转换为基本 HTML（就像 TinyMCE 一样），那也很好。

我已经尝试过 MS Office、LibreOffice 和 TextEdit，但它们都产生了非常肮脏的结果，例如很多`spans`包含一个类并且只有一个空间作为内容。

是否有适用于 OS X 10.7 的免费和基本/轻量级桌面（离线）文字处理器，可以产生干净的 HTML 输出？我正在寻找写文章而不是网站。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-26T02:43:14.267

我也没有广泛使用过，但是这两个都应该可以完成工作：

*   [牟](http://mouapp.com/)
*   [TextMate](http://macromates.com/)（不是免费的）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T07:17:37.173

[BlueGriffon](http://bluegriffon.org/)似乎正是我所需要的。它有点迟钝，但似乎工作得很好。它具有拼写检查和处理从 Word 复制和粘贴到其中的功能。

它基于 Firefox 渲染引擎，免费，可在 Windows、OS X 和 Linux 上运行。

# ruby-on-rails - 使用回形针+导轨上传图像。如何将图像保存到与上传模型不同的模型

> ID：10763151
> 
> 赞同：0
> 
> 时间：2012-05-26T02:26:06.637
> 
> 标签：ruby-on-rails, ruby, file-upload, paperclip

我有一个名为列表的模型。在我的 index.html.erb 中进行列表。我有屏幕上的所有列表。清单模型的 _form.html.erb 如下所示：

```
<%if user_signed_in? %>
<%=link_to "Sign Out",  destroy_user_session_path, :method => :delete %><br/>
<%= form_for(@listing, :html => {:multipart => true} ) do |f| %>
<% if @listing.errors.any? %>
 <div id="error_explanation">
   <h2><%= pluralize(@listing.errors.count, "error") %> prohibited this listing from   being saved:</h2>
  <ul>
  <% @listing.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
  </div>
 <% end %>
 <div class="field">
 <%= f.label :name %><br />
 <%= f.text_field :name %>
</div>
<div class="field">
<%= f.label :id %><br />
<%= f.text_field :id %>
</div> 
```

<%= f.label :image %>
<%= f.file_field :image %> <%= f.submit %> <% end %> <%else%> <%=link_to "Sign in", new_user_session_path %>
联系管理员获取登录名和密码<%end%>

这里与此视图关联的模型是“列表”，但我想将上传的图像属性存储在应用程序中的不同模型中：“图像”。

基本上我想做的是，让我所有的模型通过他们的视图上传他们自己的照片，但将所有图像属性保存在一个名为“图像”的模型中。图像本身存储在 Amazon S3 上。

所以问题是“列表”模型中的哪些代码可以实现这一点，以及“图像”模型中的哪些代码可以实现这一点。以及这些信息是如何从列表传递到图像的？

目前在Listing模型中：

```
class Listing < ActiveRecord::Base

 has_attached_file :image,:styles => {:thumb => "75x75>", :small => "150x150>", :medium => "300x300>"}

end 
```

目前在“图像”模型中

```
# == Schema Information
#
# Table name: images
#
#  id                 :integer         not null, primary key
#  image_file_name    :string(255)
#  image_content_type :string(255)
#  image_file_size    :integer
#  image_type         :string(255)
#  created_at         :datetime        not null
#  updated_at         :datetime        not null 
#

class Image < ActiveRecord::Base
end 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:56:45.017

我假设列表和图像之间存在关系，但你明白了

```
<% fields_for @listing.image do | img | %>
  <%= img.file_field :image %>
  #etc
  <% end %>
<% end %> 
```

当然，如果您不希望它们相关，您可以创建一个新的 Image 对象并将其传递给 field_for，但保持它们相关是有意义的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:36:32.737

明确地说，这是您的模型中的内容：

上市模式

```
class Listing < ActiveRecord::Base
  has_one :image, dependent => :destroy
end 
```

图像模型

```
class Image < ActiveRecord::Base
  has_attached_file :image,
                    :styles => {:thumb => "75x75>", 
                                :small => "150x150>", 
                                :medium => "300x300>"}
end 
```

然后以您的形式（来自 DVG 的回答）：

```
<% fields_for @listing.image do | img | %>
  <%= img.file_field :image %>
  #etc
  <% end %>
<% end %> 
```

# c# - Task.Factory.StartNew(() => Parallel.ForEach 的已完成事件处理程序

> ID：10763152
> 
> 赞同：1
> 
> 时间：2012-05-26T02:26:12.720
> 
> 标签：c#, .net, task-parallel-library

我想知道一些并行任务何时完成。

我正在使用此代码在网站上制作 1500 到 2000 之间的小型 WebClient.DownloadString 和 10 秒 HttpRequest Timeout：

```
Task.Factory.StartNew(() => 
    Parallel.ForEach<string>(myKeywords, new ParallelOptions 
    { MaxDegreeOfParallelism = 5 }, getKey)); 
```

有时，查询失败，因此出现异常，函数永远无法完成，并且每个 getKey 函数内部的 UI 刷新有时似乎被调用了两次，因此我无法准确了解完成了多少任务。我在计算：UI 刷新调用次数/关键字总数，得到的结果在 100% 到 250% 之间，我不知道任务何时完成。我搜索了很多 SO 讨论，但没有一个是直接的方法或适合我需要的方法。所以我猜 Framework 4.0 没有提供任何 Tasks.AllCompleted 事件处理程序或类似的解决方法？

我应该在另一个线程而不是我的 UI 线程中运行我的 Parallel.Foreach 然后添加它吗？

```
myTasks.WaitAll 
```

[编辑]

一个临时的解决方案是将我的字符串列表复制到一个 ArrayList 中，然后在每个查询开始时从列表中一个一个地删除每个项目。无论何时该功能运行良好与否，我都知道何时处理了所有项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:29:26.483

[`Parallel.ForEach`在处理异常方面与其他循环没有什么不同](http://msdn.microsoft.com/en-us/library/dd460695%28v=vs.100%29.aspx)。如果抛出异常，那么它将停止处理循环。这可能就是您看到百分比差异的原因（我假设您在处理循环时可能正在处理计数）。

此外，您实际上并不需要[`Parallel.ForEach`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)，因为您在[`WebClient`类](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)上进行的异步调用将阻塞等待[IO 完成](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)（网络响应），它们不受计算限制（`Parallel.ForEach`当您受到计算限制时会好得多）。

也就是说，您应该首先将您的调用翻译`WebClient`为使用[`Task<TResult>`](http://msdn.microsoft.com/en-us/library/dd321424.aspx)。[使用类将](http://msdn.microsoft.com/en-us/library/dd449174.aspx)[基于事件的异步模式](http://msdn.microsoft.com/en-us/library/wewwczdw.aspx)转换为基于[任务的异步模式](http://msdn.microsoft.com/en-us/library/hh873175.aspx)很简单。[`TaskCompletionSource<TResult>`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)

假设您有一系列[`Uri`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)因调用而生成的实例`getKey`，您可以创建一个函数来执行此操作：

```
static Task<String> DownloadStringAsync(Uri uri)
{
    // Create a WebClient
    var wc = new WebClient();

    // Set up your web client.

    // Create the TaskCompletionSource.
    var tcs = new TaskCompletionSource<string>();

    // Set the event handler on the web client.
    wc.DownloadStringCompleted += (s, e) => {
        // Dispose of the WebClient when done.
        using (wc)
        {
            // Set the task completion source based on the
            // event.
            if (e.Cancelled)
            {
                // Set cancellation.
                tcs.SetCancelled();
                return;
            }

            // Exception?
            if (e.Error != null)
            { 
                // Set exception.
                tcs.SetException(e.Error);
                return;
            }

            // Set result.
            tcs.SetResult(e.Result);
        };

    // Return the task.
    return tcs.Task;
}; 
```

请注意，上面的内容可以优化为使用*one* `WebClient`，留给您作为练习（假设您的测试表明您需要它）。

从那里，您可以获得以下序列`Task<string>`：

```
// Gotten from myKeywords
IEnumerable<Uri> uris = ...;

// The tasks.
Task<string>[] tasks = uris.Select(DownloadStringAsync).ToArray(); 
```

请注意，您*必须*调用[`ToArray`扩展方法](http://msdn.microsoft.com/en-us/library/bb298736.aspx)才能开始运行任务。这是为了绕过[延迟执行](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)。您不必调用`ToArray`，但必须调用将枚举整个列表并导致任务开始运行的东西。

一旦有了这些实例，就可以通过调用[class](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.aspx)上的[方法](http://msdn.microsoft.com/en-us/library/ee362141.aspx)`Task<string>`来等待它们全部完成，如下所示：[`ContinueWhenAll<TAntecedentResult>`](http://msdn.microsoft.com/en-us/library/ee362141.aspx)[`TaskFactory`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.aspx)

```
Task.Factory.ContinueWhenAll(tasks, a => { }).Wait(); 
```

完成后，您可以循环遍历`tasks`数组并查看[`Exception`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.exception.aspx) 和/或[`Result`](http://msdn.microsoft.com/en-us/library/dd321468.aspx)属性以检查异常或结果是什么。

如果您正在更新用户界面，那么您应该查看拦截对[Enumerable.Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)的调用，也就是说，您应该*在下载完成时*调用上的[`ContinueWith<TNewResult>`方法](http://msdn.microsoft.com/en-us/library/dd321326.aspx)`Task<TResult>`来执行操作，如下所示：

 *```
// The tasks.
Task<string>[] tasks = uris.
    Select(DownloadStringAsync).
    // Select receives a Task<T> here, continue that.
    Select(t => t.ContinueWith(t2 => {
        // Do something here: 
        //   - increment a count
        //   - fire an event
        //   - update the UI
        // Note that you have to take care of synchronization here, so
        // make sure to synchronize access to a count, or serialize calls
        // to the UI thread appropriately with a SynchronizationContext.
        ...

        // Return the result, this ensures that you'll have a Task<string>
        // waiting.
        return t2;
    })).
    ToArray(); 
```

这将允许您在事情发生时对其进行更新。请注意，在上述情况下，如果您`Select`再次调用，您可能需要检查状态`t2`并触发其他一些事件，具体取决于您希望错误处理机制是什么。*

# ruby-on-rails - 奇怪的导轨错误

> ID：10763153
> 
> 赞同：0
> 
> 时间：2012-05-26T02:26:53.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, yaml

我的应用程序中的所有内容都运行良好，离开了几个小时，然后又回到了这个......

```
 Psych::SyntaxError in Home#index

Showing /Users/nelsonkeating/Desktop/ReminDeal/app/views/layouts/_navigation.html.erb where line #16 raised:

couldn't parse YAML at line 13 column 2
Extracted source (around line #16):

13: <div class="testform">
14:       <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
15:       
16:         <%= f.input :email, :required => false, :autofocus => true, :label => false, :placeholder => 'Email' %>
17:         <%= f.input :password, :required => false, :label => false, :placeholder => 'Password' %>
18:     <%= f.button :submit, "Sign in", :class =>'btn btn-info' %>
19:      <%= link_to 'Sign up', new_user_registration_path, :class=>'btn btn-success' %>
Trace of template inclusion: app/views/layouts/application.html.erb

Rails.root: /Users/nelsonkeating/Desktop/ReminDeal

Application Trace | Framework Trace | Full Trace
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:148:in `parse'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:148:in `parse_stream'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:119:in `parse'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:106:in `load'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/psych.rb:205:in `load_file'
/gems/i18n-0.6.0/lib/i18n/backend/base.rb:171:in `load_yml'
/gems/i18n-0.6.0/lib/i18n/backend/base.rb:157:in `load_file'
/gems/i18n-0.6.0/lib/i18n/backend/base.rb:15:in `block in load_translations'
/gems/i18n-0.6.0/lib/i18n/backend/base.rb:15:in `each'
/gems/i18n-0.6.0/lib/i18n/backend/base.rb:15:in `load_translations'
/gems/i18n-0.6.0/lib/i18n/backend/simple.rb:57:in `init_translations'
/gems/i18n-0.6.0/lib/i18n/backend/simple.rb:71:in `lookup'
/gems/i18n-0.6.0/lib/i18n/backend/base.rb:26:in `translate'
/gems/i18n-0.6.0/lib/i18n.rb:156:in `block in translate'
/gems/i18n-0.6.0/lib/i18n.rb:152:in `catch'
/gems/i18n-0.6.0/lib/i18n.rb:152:in `translate'
/gems/simple_form-2.0.2/lib/simple_form/inputs/base.rb:174:in `translate'
/gems/simple_form-2.0.2/lib/simple_form/components/hints.rb:8:in `hint'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/single.rb:12:in `render'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/many.rb:29:in `block in render'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/many.rb:27:in `each'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/many.rb:27:in `render'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/many.rb:29:in `block in render'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/many.rb:27:in `each'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/many.rb:27:in `render'
/gems/simple_form-2.0.2/lib/simple_form/wrappers/root.rb:15:in `render'
/gems/simple_form-2.0.2/lib/simple_form/form_builder.rb:115:in `input'
app/views/layouts/_navigation.html.erb:16:in `block in _app_views_layouts__navigation_html_erb__200588386938644858_70171278998500'
/gems/actionpack-3.2.3/lib/action_view/helpers/capture_helper.rb:40:in `block in capture'
/gems/actionpack-3.2.3/lib/action_view/helpers/capture_helper.rb:187:in `with_output_buffer'
/gems/actionpack-3.2.3/lib/action_view/helpers/capture_helper.rb:40:in `capture'
/gems/actionpack-3.2.3/lib/action_view/helpers/form_helper.rb:606:in `fields_for'
/gems/client_side_validations-3.1.4/lib/client_side_validations/action_view/form_helper.rb:45:in `fields_for'
/gems/actionpack-3.2.3/lib/action_view/helpers/form_helper.rb:377:in `form_for'
/gems/client_side_validations-3.1.4/lib/client_side_validations/action_view/form_helper.rb:28:in `form_for'
/gems/simple_form-2.0.2/lib/simple_form/action_view_extensions/form_helper.rb:33:in `block in simple_form_for'
/gems/simple_form-2.0.2/lib/simple_form/action_view_extensions/form_helper.rb:51:in `with_simple_form_field_error_proc'
/gems/simple_form-2.0.2/lib/simple_form/action_view_extensions/form_helper.rb:32:in `simple_form_for'
app/views/layouts/_navigation.html.erb:14:in `_app_views_layouts__navigation_html_erb__200588386938644858_70171278998500'
/gems/actionpack-3.2.3/lib/action_view/template.rb:143:in `block in render'
/gems/activesupport-3.2.3/lib/active_support/notifications.rb:125:in `instrument'
/gems/actionpack-3.2.3/lib/action_view/template.rb:141:in `render'
/gems/actionpack-3.2.3/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
/gems/actionpack-3.2.3/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
/gems/actionpack-3.2.3/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
/gems/actionpack-3.2.3/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/gems/actionpack-3.2.3/lib/action_view/renderer/partial_renderer.rb:237:in `render'
/gems/actionpack-3.2.3/lib/action_view/renderer/renderer.rb:41:in `render_partial'
/gems/actionpack-3.2.3/lib/action_view/helpers/rendering_helper.rb:27:in `render'
app/views/layouts/application.html.erb:20:in `_app_views_layouts_application_html_erb___581424401402979334_70171303782600'
/gems/actionpack-3.2.3/lib/action_view/template.rb:143:in `block in render'
/gems/activesupport-3.2.3/lib/active_support/notifications.rb:125:in `instrument'
/gems/actionpack-3.2.3/lib/action_view/template.rb:141:in `render'
/gems/actionpack-3.2.3/lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'
/gems/actionpack-3.2.3/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
/gems/actionpack-3.2.3/lib/action_view/renderer/template_renderer.rb:18:in `render'
/gems/actionpack-3.2.3/lib/action_view/renderer/renderer.rb:36:in `render_template'
/gems/actionpack-3.2.3/lib/action_view/renderer/renderer.rb:17:in `render'
/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:110:in `_render_template'
/gems/actionpack-3.2.3/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/gems/actionpack-3.2.3/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/gems/actionpack-3.2.3/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:88:in `render'
/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:16:in `render'
/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/gems/activesupport-3.2.3/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nelsonkeating/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
/gems/activesupport-3.2.3/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/gems/activerecord-3.2.3/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:39:in `render'
/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/gems/actionpack-3.2.3/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:167:in `process_action'
/gems/actionpack-3.2.3/lib/action_controller/metal/rendering.rb:10:in `process_action'
/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:425:in `_run__3144154735564117921__process_action__4375222825164767808__callbacks'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
/gems/actionpack-3.2.3/lib/abstract_controller/callbacks.rb:17:in `process_action'
/gems/actionpack-3.2.3/lib/action_controller/metal/rescue.rb:29:in `process_action'
/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `block in instrument'
/gems/activesupport-3.2.3/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/gems/activesupport-3.2.3/lib/active_support/notifications.rb:123:in `instrument'
/gems/actionpack-3.2.3/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/gems/actionpack-3.2.3/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/gems/activerecord-3.2.3/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/gems/actionpack-3.2.3/lib/abstract_controller/base.rb:121:in `process'
/gems/actionpack-3.2.3/lib/abstract_controller/rendering.rb:45:in `process'
/gems/actionpack-3.2.3/lib/action_controller/metal.rb:203:in `dispatch'
/gems/actionpack-3.2.3/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/gems/actionpack-3.2.3/lib/action_controller/metal.rb:246:in `block in action'
/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:36:in `call'
/gems/journey-1.0.3/lib/journey/router.rb:68:in `block in call'
/gems/journey-1.0.3/lib/journey/router.rb:56:in `each'
/gems/journey-1.0.3/lib/journey/router.rb:56:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:600:in `call'
/gems/client_side_validations-3.1.4/lib/client_side_validations/middleware.rb:18:in `call'
/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
/gems/rack-1.4.1/lib/rack/conditionalget.rb:25:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/head.rb:14:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/flash.rb:242:in `call'
/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/gems/activerecord-3.2.3/lib/active_record/query_cache.rb:64:in `call'
/gems/activerecord-3.2.3/lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `_run__2947535173615619242__call__2415189830075756674__callbacks'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/gems/railties-3.2.3/lib/rails/rack/logger.rb:26:in `call_app'
/gems/railties-3.2.3/lib/rails/rack/logger.rb:16:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
/gems/activesupport-3.2.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
/gems/actionpack-3.2.3/lib/action_dispatch/middleware/static.rb:62:in `call'
/gems/railties-3.2.3/lib/rails/engine.rb:479:in `call'
/gems/railties-3.2.3/lib/rails/application.rb:220:in `call'
/gems/rack-1.4.1/lib/rack/content_length.rb:14:in `call'
/gems/railties-3.2.3/lib/rails/rack/log_tailer.rb:14:in `call'
/gems/thin-1.3.1/lib/thin/connection.rb:80:in `block in pre_process'
/gems/thin-1.3.1/lib/thin/connection.rb:78:in `catch'
/gems/thin-1.3.1/lib/thin/connection.rb:78:in `pre_process'
/gems/thin-1.3.1/lib/thin/connection.rb:53:in `process'
/gems/thin-1.3.1/lib/thin/connection.rb:38:in `receive_data'
/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'
/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'
/gems/thin-1.3.1/lib/thin/backends/base.rb:61:in `start'
/gems/thin-1.3.1/lib/thin/server.rb:159:in `start'
/gems/rack-1.4.1/lib/rack/handler/thin.rb:13:in `run'
/gems/rack-1.4.1/lib/rack/server.rb:265:in `start'
/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in '
/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
/gems/railties-3.2.3/lib/rails/commands.rb:50:in `'
script/rails:6:in `require'
script/rails:6:in `'
Request

Parameters:

None
Show session dump

Show env dump

Response

Headers:

None 
```

这是整个 _navigation 文件..

```
<ul class="nav">
    <span class="brand span" href="#">              
  <%= link_to logo, root_path %>
         </span>
<div class="span6 pull-right" id="nav-cont">
    <% if user_signed_in? %>
    <li>
        <div class="logout1">
    <%= link_to 'Logout', destroy_user_session_path, :method=>'delete', :class=>'btn btn-inverse' %> 
</div>       
    </li>
  <% else %>
<div class="testform">
      <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>

        <%= f.input :email, :required => false, :autofocus => true, :label => false, :placeholder => 'Email' %>
        <%= f.input :password, :required => false, :label => false, :placeholder => 'Password' %>
    <%= f.button :submit, "Sign in", :class =>'btn btn-info' %>
     <%= link_to 'Sign up', new_user_registration_path, :class=>'btn btn-success' %>
    </div>
    <% end %>
    <% end %>

</div> 
```

en.yml

```
# Sample localization file for English. Add more files in this directory for  locales.
# See https://github.com/svenfuchs/rails-i18n/tree/master/rails%2Flocale for starting points.

en:
  hello: "Hello world" 
```

数据库.yml

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000 
```

设计.en.yml

```
# Additional translations at https://github.com/plataformatec/devise/wiki/I18n

en:
  errors:
    messages:
      expired: "has expired, please request a new one"
      not_found: "not found"
      already_confirmed: "was already confirmed, please try signing in"
      not_locked: "was not locked"
      not_saved:
        one: "1 error prohibited this %{resource} from being saved:"
        :"%{count} errors prohibited this %{resource} from being saved:"
  devise:
    failure:
      already_authenticated: 'You are already signed in.'
      unauthenticated: 'You need to sign in or sign up before continuing.'
      unconfirmed: 'You have to confirm your account before continuing.'
      locked: 'Your account is locked.'
      invalid: 'Invalid email or password.'
      invalid_token: 'Invalid authentication token.'
      timeout: 'Your session expired, please sign in again to continue.'
      inactive: 'Your account was not activated yet.'
    sessions:
      signed_in: 'Signed in successfully.'
      signed_out: 'Signed out successfully.'
    passwords:
      send_instructions: 'You will receive an email with instructions about how to reset your password in a few minutes.'
      updated: 'Your password was changed successfully. You are now signed in.'
      updated_not_active: 'Your password was changed successfully.'
      send_paranoid_instructions: "If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes."
    confirmations:
      send_instructions: 'You will receive an email with instructions about how to confirm your account in a few minutes.'
      send_paranoid_instructions: 'If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes.'
      confirmed: 'Your account was successfully confirmed. You are now signed in.'
    registrations:
      signed_up: 'Welcome! You have signed up successfully.'
      signed_up_but_unconfirmed: 'A message with a confirmation link has been sent to your email address. Please open the link to activate your account.'
      signed_up_but_inactive: 'You have signed up successfully. However, we could not sign you in because your account is not yet activated.'
      signed_up_but_locked: 'You have signed up successfully. However, we could not sign you in because your account is locked.'
      updated: 'You updated your account successfully.'
      update_needs_confirmation: "You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address."
      destroyed: 'Bye! Your account was successfully cancelled. We hope to see you again soon.'
    unlocks:
      send_instructions: 'You will receive an email with instructions about how to unlock your account in a few minutes.'
      unlocked: 'Your account has been unlocked successfully. Please sign in to continue.'
      send_paranoid_instructions: 'If your account exists, you will receive an email with instructions about how to unlock it in a few minutes.'
    omniauth_callbacks:
      success: 'Successfully authenticated from %{kind} account.'
      failure: 'Could not authenticate you from %{kind} because "%{reason}".'
    mailer:
      confirmation_instructions:
        subject: 'Confirmation instructions'
      reset_password_instructions:
        subject: 'Reset password instructions'
      unlock_instructions:
        subject: 'Unlock Instructions' 
```

新错误

```
ArgumentError in Home#index

Showing /Users/nelsonkeating/Desktop/ReminDeal/app/views/layouts/_navigation.html.erb where line #16 raised:

syntax error on line 12, col -1: `  devise:
    failure:
      already_authenticated: 'You are already signed in.'
      unauthenticated: 'You need to sign in or sign up before continuing.'
      unconfirmed: 'You have to confirm your account before continuing.'
      locked: 'Your account is locked.'
      invalid: 'Invalid email or password.'
      invalid_token: 'Invalid authentication token.'
      timeout: 'Your session expired, please sign in again to continue.'
      inactive: 'Your account was not activated yet.'
    sessions:
      signed_in: 'Signed in successfully.'
      signed_out: 'Signed out successfully.'
    passwords:
      send_instructions: 'You will receive an email with instructions about how to reset your password in a few minutes.'
      updated: 'Your password was changed successfully. You are now signed in.'
      updated_not_active: 'Your password was changed successfully.'
      send_paranoid_instructions: "If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes."
    confirmations:
      send_instructions: 'You will receive an email with instructions about how to confirm your account in a few minutes.'
      send_paranoid_instructions: 'If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes.'
      confirmed: 'Your account was successfully confirmed. You are now signed in.'
    registrations:
      signed_up: 'Welcome! You have signed up successfully.'
      signed_up_but_unconfirmed: 'A message with a confirmation link has been sent to your email address. Please open the link to activate your account.'
      signed_up_but_inactive: 'You have signed up successfully. However, we could not sign you in because your account is not yet activated.'
      signed_up_but_locked: 'You have signed up successfully. However, we could not sign you in because your account is locked.'
      updated: 'You updated your account successfully.'
      update_needs_confirmation: "You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address."
      destroyed: 'Bye! Your account was successfully cancelled. We hope to see you again soon.'
    unlocks:
      send_instructions: 'You will receive an email with instructions about how to unlock your account in a few minutes.'
      unlocked: 'Your account has been unlocked successfully. Please sign in to continue.'
      send_paranoid_instructions: 'If your account exists, you will receive an email with instructions about how to unlock it in a few minutes.'
    omniauth_callbacks:
      success: 'Successfully authenticated from %{kind} account.'
      failure: 'Could not authenticate you from %{kind} because "%{reason}".'
    mailer:
      confirmation_instructions:
        subject: 'Confirmation instructions'
      reset_password_instructions:
        subject: 'Reset password instructions'
      unlock_instructions:
        subject: 'Unlock Instructions'' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:21:39.760

“无法解析 YAML”错误表明 YAML 文件的格式存在问题。

在您的情况下，您的 devise.en.yml 中存在格式错误：

```
not_saved:
  one: "1 error prohibited this %{resource} from being saved:"
  :"%{count} errors prohibited this %{resource} from being saved:" 
```

在最后一行的 : 之前，它缺少一个键。也许这是以某种方式意外删除？在其他设计翻译文件中，我通常会看到关键“其他”。

```
not_saved:
  one: "1 error prohibited this %{resource} from being saved:"
  other: "%{count} errors prohibited this %{resource} from being saved:" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T03:17:21.930

Replaced all YML files with previous versions.. if you have a problem like this there is probably and extra character or space buried in one of those files.. can be impossible to find, recommend replacing files if they have not been modified.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:04:41.937

我遇到了这个错误，结果它是一个空白行上的制表符。不可见，但显然导致解析器阻塞。

为了在 vim 中找到它，我搜索了制表符：

```
/\t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T02:45:59.543

尝试

```
en:
  - hello: "Hello world" 
```

# java - 主要方法和关键监听器

> ID：10763159
> 
> 赞同：3
> 
> 时间：2012-05-26T02:27:33.123
> 
> 标签：java, swing, key-bindings, keylistener, main-method

谁能告诉我为什么这个程序说我缺少一个主要方法？我在这段代码的底部有一个。

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class Collision extends JFrame
{
    final int WIDTH = 900, HEIGHT = 650;

    double p1Speed = .5, p2Speed = .5;

    //these are the ints that represent directions
    final int UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3;

    //these will keep track of the players directions(default = up)
    int p1Direction = UP;
    int p2Direction = UP;

    Rectangle left = new Rectangle(0,0,WIDTH/9,HEIGHT);
    Rectangle right = new Rectangle((WIDTH/9)*8,0,WIDTH/9,HEIGHT);
    Rectangle top = new Rectangle(0,0,WIDTH,HEIGHT/9);
    Rectangle bottom = new Rectangle(0,(HEIGHT/9)*8, WIDTH,HEIGHT/9);
    Rectangle center = new Rectangle((int)((WIDTH/9)* 2.5),(int)((HEIGHT/9)*2.5),(int) 
    ((WIDTH/9)*5),(HEIGHT/9)*4);

    Rectangle obstacle = new Rectangle(WIDTH/2,(int)((HEIGHT/9)*7),WIDTH/10,HEIGHT/9);
    Rectangle obstacle2 = new Rectangle(WIDTH/3,(int)((HEIGHT/9)*5),WIDTH/10,HEIGHT/4);
    Rectangle obstacle3 = new Rectangle(2*(WIDTH/3),(int)
    ((HEIGHT/9)*5),WIDTH/10,HEIGHT/4);
    Rectangle obstacle4 = new Rectangle(WIDTH/3,HEIGHT/9,WIDTH/30,HEIGHT/9);
    Rectangle obstacle5 = new Rectangle(WIDTH/2,(int)((HEIGHT/9)*1.5),WIDTH/30,HEIGHT/4);

    Rectangle finish = new Rectangle(WIDTH/9,(HEIGHT/2)-HEIGHT/9,(int) 
    ((WIDTH/9)*1.5),HEIGHT/70);

    Rectangle p1 = new Rectangle(WIDTH/9,HEIGHT/2, WIDTH/30,WIDTH/30);

    Rectangle p2 = new Rectangle(((WIDTH/9)+((int)((WIDTH/9)*1.5)/2)),(HEIGHT/2)+ 
    (HEIGHT/10),WIDTH/30,WIDTH/30);
    public Collision()
    {
        //the following code creates the JFrame
        super("Radical Racing");
        setSize(WIDTH,HEIGHT);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

        //start the inner class (which works on it's own because it is a thread)
        Move1 m1 = new Move1();
        Move2 m2 = new Move2();
        m1.start();
        m2.start();

    }
    public void paint(Graphics g)
    {
        super.paint(g);

        //draw the bckround for the racetrack
        g.setColor(Color.DARK_GRAY);
        g.fillRect(0,0,WIDTH,HEIGHT);

        //When we drawthe border will be green
        g.setColor(Color.GREEN);

        //the following rectangle is the start line for the outer player
        Rectangle lineO = new
                Rectangle(WIDTH/9,HEIGHT/2,(int)((WIDTH/9)*1.5)/2,HEIGHT/140);

        //the following rctangle is the start line for the inner player
        Rectangle lineI = new
                Rectangle(((WIDTH/9)+((int)((WIDTH/9)*1.5)/2)),(HEIGHT/2)+(HEIGHT/10),
        (int)((WIDTH/9)*1.5)/2,HEIGHT/140);

        //now using the rectangles, draw it
        g.fillRect(left.x,left.y,left.width,left.height);
        g.fillRect(right.x,right.y,right.width,right.height);
        g.fillRect(top.x,top.y,top.width,top.height);
        g.fillRect(bottom.x,bottom.y,bottom.width,bottom.height);
        g.fillRect(center.x,center.y,center.width,center.height);
        g.fillRect(obstacle.x,obstacle.y,obstacle.width,obstacle.height);
        g.fillRect(obstacle2.x,obstacle2.y,obstacle2.width,obstacle2.height);
        g.fillRect(obstacle3.x,obstacle3.y,obstacle3.width,obstacle3.height);
        g.fillRect(obstacle4.x,obstacle4.y,obstacle4.width,obstacle4.height);
        g.fillRect(obstacle5.x,obstacle5.y,obstacle5.width,obstacle5.height);
    //set the starting line color
        g.setColor(Color.WHITE);
        //the draw the starting line
        g.fillRect(lineO.x,lineO.y,lineO.width,lineO.height);
        g.fillRect(lineI.x,lineI.y,lineI.width,lineI.height);
        //set the color of the finish line to yellow
        g.setColor(Color.YELLOW);
        g.fillRect(finish.x,finish.y,finish.width,finish.height);

        //set the color to blue for p1
        g.setColor(Color.BLUE);
        //now draw the actual player
        g.fill3DRect(p1.x,p1.y,p1.width,p1.height,true);

        //set the color to red for p2
        g.setColor(Color.red);
        //now draw the actual player
        g.fill3DRect(p2.x,p2.y,p2.width,p2.height,true);

    }
    private class Move1 extends Thread implements KeyListener
    {
        public void run()
        {
            //add the code to make the KeyListener "wake up"
            addKeyListener(this);

            //now, put the code should all be in an infinite loop, so the process repeats.
            while(true)
            {

            try
            {
                //first refresh the screen:
                repaint();

                //check to see if the car hits the outside of the walls.
                //If so make it slow it's speed by setting it's speed to .4.
                if(p1.intersects(left) ||  p1.intersects(right) ||
                p1.intersects(top) ||  p1.intersects(bottom) ||
                p1.intersects(obstacle) ||  p1.intersects(obstacle2) ||       
                p1.intersects(p2) ||  p1.intersects(obstacle3) ||
                p1.intersects(obstacle4) ||  p1.intersects(obstacle5))   
                {
                    p1Speed = -4;
                }

                if(p1.intersects(center))
                {
                    p1Speed = -2.5;
                }
                //increase speed a bit
                if(p1Speed<=5)
                    p1Speed+=.2;

                //these will move the player based on direction
                if(p1Direction == UP)
                {
                    p1.y-=(int)p1Speed;
                }
                if(p1Direction ==DOWN)
                {
                    p1.y+=(int)p1Speed;
                }
                if(p1Direction == LEFT)
                {
                    p1.x-=(int)p1Speed;
                } 
                if(p1Direction == RIGHT)
                {
                    p1.x+=(int)p1Speed;
                } 
                //This delays the refresh rate
                Thread.sleep(75);
            }
            catch(Exception e)

            {//if there is an exception (an error), exit the loop
                break;
            }
            }
        }
        //You must also implement this method from Key Listener
        public void keyPressed(KeyEvent event)
        {

        }
        //You must also implement this method from key listener
        public void keyReleased(KeyEvent event)
        {

        }
        //You must also implement this method from key listener

        public void keyTyped(KeyEvent event)
        {

            if(event.getKeyChar()=='a')
            {
                p1Direction = LEFT;
            }
            if(event.getKeyChar()=='s')
            {
                p1Direction = DOWN;
            }
            if(event.getKeyChar()=='d')
            {
                p1Direction = RIGHT;
            }
            if(event.getKeyChar()=='w')
            {
                p1Direction = UP;
            }
        }
    }

        private class Move2 extends Thread implements KeyListener
        {
            public void run()
            {
                //add the code to make the key listener wake up
                addKeyListener(this);

                //now this should all be in an infinite loop so that the process repeats
                while(true)
                {

                    try
                    {
                        //first refresh the screen
                        repaint();
                        //check to see if the car hits the outside walls.
                        //if so make it slow its speed by setting it's speed to -4.
                        if(p2.intersects(left) || p2.intersects(right) ||
                        p2.intersects(top) || p2.intersects(bottom) ||
                        p2.intersects(obstacle) || p2.intersects(obstacle2) ||  
                        p1.intersects(p2))
                        {
                            p2Speed = -4;
                        }

                        if(p2.intersects(center))
                        {
                            p2Speed = -2.5;
                        }
                        //increase speed a bit
                        if(p2Speed<=5)
                            p2Speed = .2;
                        //these will move the player based off direction
                        if(p2Direction == UP)
                {
                    p2.y-=(int)p2Speed;
                }
                if(p2Direction ==DOWN)
                {
                    p2.y+=(int)p2Speed;
                }
                if(p2Direction == LEFT)
                {
                    p2.x-=(int)p2Speed;
                } 
                if(p2Direction == LEFT)
                {
                    p2.x+=(int)p2Speed;
                } 
                //this delays the refresh rate:
                Thread.sleep(75);
                    }
                catch(Exception e)
                {
                    //if there is an exception, exit the loop.
                    break;

            }

          }
        }

        //you must also implement this method from key listener
        public void keyPressed(KeyEvent event)
        {

        }
        public void keyReleased(KeyEvent event)
        {

        }
        public void keyTyped(KeyEvent event)
        {
            if(event.getKeyChar()=='j')
            {
                p2Direction = LEFT;
            }
            if(event.getKeyChar()=='k')
            {
                p2Direction = DOWN;
            }
            if(event.getKeyChar()=='l')
            {
                p2Direction = RIGHT;
            }
            if(event.getKeyChar()=='i')
            {
                p2Direction = UP;
            }
        }

        //This starts the program by calling the constructor:        
        public static void main(String [] args)
        {
        new Collision();
        }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T02:34:38.377

KeyListeners only work if the component listened to has the focus, and often KeyListeners fail because this is not so. So one thing to do is to test this, and if the component has lost the focus than do things to correct this.

But having said this, I have to ask what book you're using, since in general, you want to avoid using KeyListeners with Swing applications in favor of Key Bindings. Also, it is usually not recommended to draw directly in a JFrame, so you may wish to use a different book.

# android - 适用于 Android 的 Mono：适用于 Mono 的地图气球

> ID：10763160
> 
> 赞同：1
> 
> 时间：2012-05-26T02:27:56.170
> 
> 标签：android, mono, annotations, android-mapview, xamarin.android

我正在寻找[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)`C#`的版本

该项目模仿`iOS MapAnnotions`对象，可以更轻松地将信息放置在地图的图钉上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:24:06.987

这可能在几周内不会那么相关，但是 github 上有一个 android-mapviewballoons 的绑定项目：[https](https://github.com/xamarin/monodroid-samples/tree/master/AndroidMapViewBalloons) ://github.com/xamarin/monodroid-samples/tree/master/AndroidMapViewBalloons 。

HTH。

# vba - Open Excel file in VBA from Powerpoint

> ID：10763164
> 
> 赞同：7
> 
> 时间：2012-05-26T02:28:51.017
> 
> 标签：vba, powerpoint

I'm trying to open the Excel file using VBA in Powerpoint 2010 with the help of following code.

```
Private Sub CommandButton1_Click()
Dim xlApp As Excel.Application
Set xlApp = CreateObject("Excel.Application")

xlApp.Visible = True

xlApp.Workbooks.Open "C:\lol\Book1.xlsx", True, False
Set xlApp = Nothing

Range("A8").Value = "Hello"
End 
```

But I'm getting the following error.

Compile Error User Defined type not defined.

Am I missing something. Can anyone share the sample piece of code to open an excel file, change a cell value and close Excel file in Powerpoint 2007 and 2010 using VBA.

I have searched a lot and tried different pieces of code, but getting the same error everytime. :(

Thanks in advance. :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T04:20:22.220

您是否添加了对 Excel 对象模型的引用？这将使您不必使用后期绑定的对象（并且您可以在编码时获得 Intellisense 帮助的好处）。

您需要转到工具 -> 参考并检查“Microsoft Excel vx 对象库”（我认为该数字会根据您使用的办公室版本而变化。

如果您这样做，您的代码应该可以工作，您还应该删除

```
CreateObject("Excel.Application") 
```

行并将其替换为

```
Set xlApp = new Excel.Application 
```

并移动

```
Set xlApp = nothing 
```

行到子程序的末尾。

你的其余代码对我来说看起来不错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T07:02:03.150

后期绑定代码是这样的

```
Private Sub test()
Dim xlApp As Object
Dim xlWorkBook As Object

Set xlApp = CreateObject("Excel.Application")

xlApp.Visible = True
Set xlWorkbook = xlApp.Workbooks.Open("C:\lol\Book1.xlsx", True, False)
xlWorkbook.sheets(1).Range("A8").Value = "Hello"

Set xlApp = Nothing
Set xlWorkbook = Nothing

End Sub 
```

不过最好使用早期绑定。

# css - Twitter Bootstrap remove table row highlight with row stripes

> ID：10763166
> 
> 赞同：15
> 
> 时间：2012-05-26T02:29:19.490
> 
> 标签：css, twitter-bootstrap

Is there a simple way to remove the tr:hover style from twitter bootstrap such that I can still use their table styling without getting the row highlight on hover?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-26T03:37:30.130

@Blender 的答案是正确的，但前提是您**没有**使用`.table-striped`桌子上的课程。

如果您**正在**使用`.table-striped`该类，当您将鼠标悬停在具有浅灰色条纹的行上时，行突出显示不会消失。

当您将鼠标悬停在浅灰色行上时会发生什么，该行将从浅灰色变为透明（白色），因此您将无意中在所有浅灰色行上实现行悬停效果。

如果您还需要从条纹行中消除悬停效果，那么在 Blender 的原始答案的基础上，我认为您将有另一个规则可以覆盖：

```
.table tbody tr:hover td,
.table tbody tr:hover th {
  background-color: transparent;
}

.table-striped tbody tr:nth-child(odd):hover td {
   background-color: #F9F9F9;
} 
```

**很好的例子**：这是一个工作 jsfiddle 示例的链接，其中 .table-striped 类占：http: [//jsfiddle.net/pXWjq/](http://jsfiddle.net/pXWjq/)

**错误示例**：这是一个表格行悬停仍然发生的示例（在灰色行上），因为未考虑灰色行悬停：http: [//jsfiddle.net/448Rb/](http://jsfiddle.net/448Rb/)

​​​

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-26T02:36:19.850

Override these rules:

```
.table tbody tr:hover td,
.table tbody tr:hover th {
  background-color: #f5f5f5;
} 
```

Using this:

```
.table tbody tr:hover td,
.table tbody tr:hover th {
  background-color: transparent;
} 
```

# java - Regex: Negating a whole word (needed to optimize a file)

> ID：10763168
> 
> 赞同：0
> 
> 时间：2012-05-26T02:30:02.140
> 
> 标签：java, android, regex, json

I am trying to do a simple weather widget for Android, that provides temperatures just for my country (Jordan). The website I am using for the weather records provides a JSON file with country regions data for many countries. The problem is that the file contains 2500+ objects, and it takes a really long time to be parsed. Thus, and as I actually need <100 of them (the regions of my country), I thought that I could optimize the file before passing it to the JSON parser, by taking off all of the records I don't need. I don't know if it's a good solution, but it was what I thought of. Anyway, my problem now is getting the right Regex.

[This is the URL of the JSON file](http://www.arabiaweather.com/json/Arabia.index.en.json.txt).

As you can see, every object has four items. The one I need to check for is "icon", which specifies the country of that region.

**EXAMPLE:**

```
{"value":"khalda","icon":"Jordan","label":"khalda","desc":"Amman & Madaba"}, 
```

What I could came up with so far is the pattern of the object I actually *need*. However, I need to get the ones I don't need to be able to delete them. Here is the pattern: `\{[^\{]*Jordan*[^\}]*\},` (This has to be modified so it validates when "Jordan" does NOT exist, which I couldn't figure out.)

Any help/hint is highly appreciated. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T02:42:07.533

与其匹配和删除您不需要的对象，不如匹配并提取您确实需要的单个（？）对象。它会更快。

（我同意 minitech 的评论。解析 JSON 文件不太可能成为*真正的*瓶颈。）

# python - SQLAlchemy 可以与 Google Cloud SQL 一起使用吗？

> ID：10763171
> 
> 赞同：32
> 
> 时间：2012-05-26T02:31:15.977
> 
> 标签：python, google-app-engine, sqlalchemy, flask-sqlalchemy, google-cloud-sql

我查看了 Google Cloud SQL 的文档和各种搜索，但我无法确定是否可以将 SQLAlchemy 与 Google Cloud SQL 一起使用，如果可以，连接 URI 应该是什么。

我正在寻找使用 Flask-SQLAlchemy 扩展并需要像这样的连接字符串： `mysql://username:password@server/db`

我看到了 Django 示例，但似乎配置使用了与连接字符串不同的样式。 [https://developers.google.com/cloud-sql/docs/django](https://developers.google.com/cloud-sql/docs/django)

谷歌云 SQL 文档： [https ://developers.google.com/cloud-sql/docs/developers_guide_python](https://developers.google.com/cloud-sql/docs/developers_guide_python)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-05T16:07:24.337

**更新**

Google Cloud SQL 现在支持直接访问，因此`MySQLdb`现在可以使用方言。通过 mysql 方言推荐的连接是使用 URL 格式：

```
mysql+mysqldb://root@/<dbname>?unix_socket=/cloudsql/<projectid>:<instancename> 
```

`mysql+gaerdbms` [自 1.0 版以来已](https://docs.sqlalchemy.org/en/latest/dialects/mysql.html?highlight=cloudsql#module-sqlalchemy.dialects.mysql.gaerdbms)在 SQLAlchemy中弃用

我将在下面留下原始答案，以防其他人仍然觉得它有帮助。

* * *

对于那些稍后访问此问题（并且不想阅读所有评论）的人，SQLAlchemy 现在使用连接字符串/方言支持 Google Cloud SQL 版本 0.7.8（请参阅：[文档](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#module-sqlalchemy.dialects.mysql.gaerdbms)）：

```
mysql+gaerdbms:///<dbname> 
```

例如：

```
create_engine('mysql+gaerdbms:///mydb', connect_args={"instance":"myinstance"}) 
```

* * *

我已提议对方言进行[更新](http://www.sqlalchemy.org/trac/ticket/2649)`mysql+gaerdmbs://`，以支持 Google Cloud SQL API (`rdbms_apiproxy`和`rdbms_googleapi`) 用于从非 Google App Engine 生产实例（例如您的开发工作站）连接到 Cloud SQL。该更改还将通过将项目和实例作为字符串的一部分来稍微修改连接字符串，并且不需要通过`connect_args`.

例如

```
mysql+gaerdbms:///<dbname>?instance=<project:instance> 
```

这也将使您更容易将 Cloud SQL 与 Flask-SQLAlchemy 或您未明确进行`create_engine()`调用的其他扩展一起使用。

如果您在从开发工作站连接到 Google Cloud SQL 时遇到问题，您可能想在此处查看我的答案 - [https://stackoverflow.com/a/14287158/191902](https://stackoverflow.com/a/14287158/191902)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-25T18:05:43.397

是的，

如果您在 SA+Cloud SQL 中发现任何错误，请告诉我。我编写了集成到 SQLAlchemy 中的方言代码。关于 Cloud SQL 如何冒泡异常有一些愚蠢的事情，所以那里可能有一些松散的结局。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-28T11:21:44.613

对于那些更喜欢[PyMySQL](https://pypi.python.org/pypi/PyMySQL)而不是[MySQLdb](https://pypi.python.org/pypi/MySQL-python/)的人（在接受的答案中建议），SQLAlchemy 连接字符串是：

**生产用**

`mysql+pymysql://<USER>:<PASSWORD>@/<DATABASE_NAME>?unix_socket=/cloudsql/<PUT-SQL-INSTANCE-CONNECTION-NAME-HERE>`

请确保

1.  将 SQL 实例添加到您的`app.yaml`：

    ```
    beta_settings:
        cloud_sql_instances: <PUT-SQL-INSTANCE-CONNECTION-NAME-HERE> 
    ```

2.  启用 SQL Admin API [，因为它似乎是必要的](https://github.com/GoogleCloudPlatform/getting-started-python/issues/129#issuecomment-332803546)：

    [https://console.developers.google.com/apis/api/sqladmin.googleapis.com/overview](https://console.developers.google.com/apis/api/sqladmin.googleapis.com/overview)

**地方发展**

`mysql+pymysql://<USER>:<PASSWORD>@localhost:3306/<DATABASE_NAME>`

假设您使用以下方式启动 Cloud SQL 代理：

`cloud_sql_proxy -instances=<PUT-SQL-INSTANCE-CONNECTION-NAME-HERE>=tcp:3306`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-26T03:29:31.463

这是可行的，虽然我根本没有使用过 Flask，所以我不确定通过它建立连接。我通过 Pyramid 让它工作并在这里向 SQLAlchemy 提交了一个补丁（可能是错误的 repo）：

[https://bitbucket.org/sqlalchemy/sqlalchemy/pull-request/2/added-a-dialect-for-google-app-engines](https://bitbucket.org/sqlalchemy/sqlalchemy/pull-request/2/added-a-dialect-for-google-app-engines)

此后已被替换并接受为 SQLAlchemy

[http://www.sqlalchemy.org/trac/ticket/2484](http://www.sqlalchemy.org/trac/ticket/2484)

我不认为它已经发布了。

Google SQL 抛出不同的异常存在一些问题，因此我们遇到了诸如自动部署数据库之类的问题。您还需要使用第二个补丁中提到的 NullPool 禁用连接池。

我们已经开始通过 NDB 使用数据存储，所以我有一段时间没有关注这些修复的进展了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-24T19:55:00.633

# PostgreSQL、pg8000 和 flask_sqlalchemy

添加信息以防有人在寻找如何使用`flask_sqlalchemy`with `PostgreSQL`：使用`pg8000`作为驱动程序，工作连接字符串是

```
postgres+pg8000://<db_user>:<db_pass>@/<db_name> 
```

# ruby - How to code elasticsearch status checks in ruby with Chef?

> ID：10763175
> 
> 赞同：1
> 
> 时间：2012-05-26T02:33:27.260
> 
> 标签：ruby, elasticsearch, chef-infra, chef-recipe

I want to accomplish two things: 1) clean out any pointless pid files (if elasticsearch is not running) and then start it, and 2) check that ES has started up before proceeding

Now between what Chef offers out-of-box and what Ruby allows, I can only figure out a pseudo-code like syntax for making it happen but its not going to run so I need some help/advice writing the real thing.

Pseudo-Code For (1):

```
bash "start it up" do
    user "root"
    only_if { # pretty sure this syntax is all incorrect, any ideas to make it happen?
        (sudo service elasticsearch status).match(/^elasticsearch not running/)
    }
    code <<-EOS
        sudo rm -rf /usr/local/var/run/elasticsearch/*.pid
        sudo service elasticsearch restart
    EOS
end 
```

Pseudo-Code For (2):

```
bash "wait for it to start up" do
    user "root"
    only_if { # pretty sure this syntax is all incorrect, any ideas to make it happen?
        (sudo service elasticsearch status).match(/^elasticsearch  running with PID/)
    }
    retries 20
    retry_delay 5
    code <<-EOS
        echo "I can now go on with my life..."
    EOS
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T17:46:55.533

如果您希望在继续之前确保某个特定状态，请将其插入到配方中（这是一个示例，未经测试）：

```
service "elasticsearch" do
  action [ :enable, :start ]
  status_command "/usr/sbin/service elasticsearch status | grep 'running with PID'" 
end 
```

`start`等待服务实际启动是初始化脚本命令的工作。

厨师文档 说：

> 没有理由使用执行资源来控制服务，因为服务资源直接公开了 start_command 属性，这使得配方可以完全控制以更清晰、更直接的方式发出的命令。

# core-data - Contact or address book app using Core Data and a SQLite storage file

> ID：10763176
> 
> 赞同：0
> 
> 时间：2012-05-26T02:34:01.653
> 
> 标签：core-data, abaddressbook, ios5

I was wondering if it is possible to create a address book or contacts app, like Apple's, that uses Core Data and an SQLite storage file.

The part I am not sure if it is possible, or how to do it is having multiple properties for phones. So a user could input five different phone numbers for the same contact.

The only way I could think of doing it is say... have one entity for the person... then another entity for phones with them having a relationship. So one person could have multiple phones but one phone could only have one person. But that didn't seem to like it would be a good way to do it... anyone have a suggestion?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T11:26:37.087

I don't see how you came to the conclusion that several entities are not a good way to do something like this. That's the only way to do it if you want flexibility. Adding three phone number attributes to your entity is definitely the wrong way.

I would use a simple data model like this:

![enter image description here](../Images/c9399826859464526cefe371acd087da.png)

Each record has a type (e.g. email, phone, fax, IM contact) a key (e.g. office, home, mobile, twitter, jabber) and a value (e.g. 55512345, foo@bar.com, @foobar).

Such a model offers the most flexibility and it's not very complicated to implement.
Though you need a couple of predicates to get phone numbers, emails etc.

# orchardcms - How do I make AntiForgeryToken work with Orchard CMS?

> ID：10763178
> 
> 赞同：1
> 
> 时间：2012-05-26T02:34:10.380
> 
> 标签：orchardcms, csrf

Using Orchard CMS 1.4.2, I'm having trouble posting a form in my custom module.

Here's my view:

```
@model ProfileEntity

<h2>My Profile</h2>

@using (Html.BeginForm("Update", "Home", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    @Html.LabelFor(m => m.FirstName)
    @Html.EditorFor(m => m.FirstName)

    @Html.LabelFor(m => m.MiddleNames)
    @Html.EditorFor(m => m.MiddleNames)

    @Html.LabelFor(m => m.Surname)
    @Html.EditorFor(m => m.Surname)

    <input type="submit" value="Save Profile"/> 
} 
```

In my Module.txt file, I have the line:

```
AntiForgery: enabled 
```

When I try posting this form, I get an exception:

```
[HttpAntiForgeryException (0x80004005): A required anti-forgery token was not supplied or was invalid.]
   System.Web.Helpers.AntiForgeryWorker.Validate(HttpContextBase context, String salt) +121176
   System.Web.Helpers.AntiForgery.Validate(HttpContextBase httpContext, String salt) +45
   System.Web.Mvc.ValidateAntiForgeryTokenAttribute.OnAuthorization(AuthorizationContext filterContext) +68
   System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor) +102
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   Orchard.Mvc.Routes.HttpAsyncHandler.EndProcessRequest(IAsyncResult result) in D:\Visual Studio Projects\ESW_EAPExchange\Orchard\src\Orchard\Mvc\Routes\ShellRoute.cs:147
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

I have also tried using:

```
@Html.AntiForgeryTokenOrchard() 
```

instead of

```
@Html.AntiForgeryToken() 
```

(I'm not sure of the difference)

but it gives the same error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:07:17.100

查看现有模块代码中的数十个示例之一。

```
@using (Html.BeginFormAntiForgeryPost()) 
```

# xbee - Setup XBee (serial) network

> ID：10763179
> 
> 赞同：1
> 
> 时间：2012-05-26T02:34:14.760
> 
> 标签：xbee

I want to setup an xBee network with four serial 1 modules. Any two of them can communicate with each other in two-way. The transmitted data is string other than a single byte.

My original design is to setup a nonbeacon (with coordinator) network: One module is configured as coordinator. The left three modules is configured as end devices. The coordinator broadcasts the data from end devices.

The communication workflow is: If end device 1 want to send data to end device 2, it sends data to coordinator first. Then the coordinator broadcasts the data received from end device 1\. End device 2 can receive the broadcast data. The communication workflow finishes.

I want the received string to be atomic. If end device 1 and end device 3 send out the data in the same time, there would be conflict. The two strings would combined together. And the end device 2 can't distinguish which byte is from which device. That is, end device 1 sends out string "{AAAA}" (quotes aren't included). In the meanwhile, end device 3 sends out string "<2222>". The end device 2 may receive the string like "{A<22AA2A2}>", which isn't what I want. My expected string is "{AAAA}<2222>" or "<2222>{AAAA}".

How do I setup the network to meet my requirements?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:14:57.130

使用 Digi 的 XBee 模块有两种方法可以实现原子传输。该方法取决于是否使用 API 模式（AP 参数 > 0）。

如果未使用 API 模式 (AP = 0)，则可以通过将 RO 时间设置为大于您将从节点之一发送的*最长字符串的字符数来鼓励数据的原子性。*这将使 XBee 缓冲区在开始无线传输之前等待指定数量的字符时间（以特定波特率发送字符所需的时间）。注意：您必须确保将整个字符串一次全部发送到收音机，以便此方案起作用。

如果正在使用 API 模式（AP > 0），那么很容易获得您想要的行为。您只需使用 Tx 请求帧（API 帧类型 0x1）并指定要发送的字符串数据。数据将始终以原子方式发送。

如果在接收节点（即在这种情况下为协调器）上使用 API 模式，则帧数据也将始终以原子方式到达。

请参阅[Digi XBee 802.15.4 产品支持页面](http://www.digi.com/support/productdetail?pid=3257)以获取有关如何使用 API 模式的更多信息，并在 Internet 上搜索许多精彩的 XBee 库，这些库使您可以轻松地在 API 模式下使用 Digi XBee 模块。

# python - Python AES encoding/decoding string and storing in MySQL

> ID：10763182
> 
> 赞同：3
> 
> 时间：2012-05-26T02:35:41.687
> 
> 标签：python, mysql, encryption, pyramid, pycrypto

I'm working on a project using Pyramid 1.3 (Python 2.7) and storing data in MySQL. I have a table of email addresses, and I would like to encrypt them for storage. I am trying to encrypt them in the application, and then will decrypt them for viewing. I'm not going for complete security but am mainly aiming to obfuscate the data enough were the database itself compromised.

I'm using PyCrypto with AES, and have been trying to follow some posts on here and some web tutorials I found. The closest I found so far is [this post](http://codeghar.wordpress.com/2011/09/01/aes-encryption-with-python), and it seems to work, at least encrypting it. I follow that and get something like `"7hBAQrWhJRnL9YdBGJfRErGFwGi3aC6noGzYTrGwAoQ="` stored in the database. But the decrypt function keeps erroring with this:

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xa1 in position 1: ordinal not in range(128) 
```

I came across some unicode presentation about Python which sort of helped me make more sense of it but I still keep getting the same error.

Is there a straightforward tutorial on how to encode, store in a database, pull out of database, and decode a source data string?

Do I need a specific collation on the database column? Does the field need to be a certain type? So far I've been using a default collation and setting it to VARCHAR, assuming that I was storing a string. It sounds like I've got some encoding problem somewhere with incompatible types or something but my head is spinning on where I need to change something.

Any better pointers or anything else I can provide? I can show my code but its basically a copy of the link above... I was just trying to get a proof of concept working before modifying it too much.

edit: some sample source... In MySQL, the table is id (int) client_id (int) emailaddress varchar(100) utf8mb4_general_ci (I've been playing around with the collations, I have no idea what it should be!)

Python:

```
from base64 import b64encode, b64decode, urlsafe_b64decode, urlsafe_b64encode

BLOCK_SIZE = 32
INTERRUPT = u'\u0001'
PAD = u'\u0000'
def AddPadding(data, interrupt, pad, block_size):
    new_data = ''.join([data, interrupt])
    new_data_len = len(new_data)
    remaining_len = block_size - new_data_len
    to_pad_len = remaining_len % block_size
    pad_string = pad * to_pad_len
    return ''.join([new_data, pad_string])
def StripPadding(data, interrupt, pad):
    return data.rstrip(pad).rstrip(interrupt)#data.rsplit(interrupt,1)[0]#rstrip(pad).rstrip(interrupt)

SECRET_KEY = u'a1b2c3d4e5f6g7h8a1b2c3d4e5f6g7h8'
IV = u'12345678abcdefgh'

cipher_for_encryption = AES.new(SECRET_KEY, AES.MODE_CBC, IV)
cipher_for_decryption = AES.new(SECRET_KEY, AES.MODE_CBC, IV)

def EncryptWithAES(encrypt_cipher, plaintext_data):
    plaintext_padded = AddPadding(plaintext_data, INTERRUPT, PAD, BLOCK_SIZE)
    encrypted = encrypt_cipher.encrypt(plaintext_padded)
    return urlsafe_b64encode(encrypted)
def DecryptWithAES(decrypt_cipher, encrypted_data):
    decoded_encrypted_data = urlsafe_b64decode(encrypted_data)
    decrypted_data = decrypt_cipher.decrypt(decoded_encrypted_data)
    return StripPadding(decrypted_data, INTERRUPT, PAD)

#encrypts it
posted_singleaddress = EncryptWithAES(cipher_for_encryption, posted_singleaddress)

#"me@mail.com" inserts "Ktpr49Uzn99HZXbmqEzGKlWo9wk-XBMXGZl_iyna-8c=" into the database 
```

clientemails is the list of emails from the table above. I get the error when uncommenting out:

```
#if clientemails:
#    decrypted = DecryptWithAES(cipher_for_decryption, clientemails[0].emailaddress) 
```

I was just trying to decode the first item just to try and get it to work but that's the part that seems to be giving it fits now....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:02:39.450

PyCrypto 的一般规则是加密密钥、IV、明文、填充和密文应始终定义为二进制字符串，而不是文本。您为它们使用 Unicode 的事实本身就是问题的根源。

另一个问题是您以`AES.new`十六进制编码形式传递给 key 和 IV，因此前者是 256 位，后者是 128 位。这似乎仍然有效，但我猜你的意图是使用 AES128 - 它有一个 128 位密钥。因此，您需要将其转换为二进制，例如通过`unhexlify`：两个字符串 b'34' 将映射到单字节 '\x34'。IV 需要两倍长。

因此，在您的代码中最好有：

```
from binascii import unhexlify

INTERRUPT = b'\x01'
PAD = b'\x00'
SECRET_KEY = unhexlify('a1b2c3d4e5f6g7h8a1b2c3d4e5f6g7h8')
IV = unhexlify('12345678abcdefgh'*2) 
```

如果您需要加密文本，您将首先对其进行编码（例如编码为 UTF-8），然后将其传递给您的函数`EncryptWithAES()`。另请参阅取自[PyCrypto API](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.AES-module.html)的示例：

```
from Crypto.Cipher import AES
from Crypto import Random

key = b'Sixteen byte key'
iv = Random.new().read(AES.block_size)
cipher = AES.new(key, AES.MODE_CFB, iv)
msg = iv + cipher.encrypt(b'Attack at dawn') 
```

加密步骤的结果（即密文）又是一个二进制字符串。为了将它直接存储在 MySQL DB 中，您必须使用 a`BINARY`或`VARBINARY`type 列。

# c# - 顺序循环如何比 C# 中的并行循环运行得更快？

> ID：10763184
> 
> 赞同：6
> 
> 时间：2012-05-26T02:36:34.483
> 
> 标签：c#, task-parallel-library

我尝试了一个非常小的例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Threading;
using System.Collections.Concurrent;
using System.Diagnostics;

namespace TPLExample {
    class Program {
        static void Main(string[] args) {
            int[] dataItems = new int[100];
            double[] resultItems = new double[100];

            for (int i = 0; i < dataItems.Length; ++i) {
                dataItems[i] = i;
            }

            Stopwatch stopwatch = new Stopwatch();

            stopwatch.Reset();
            stopwatch.Start();
            Parallel.For(0, dataItems.Length, (index) => {
                resultItems[index] = Math.Pow(dataItems[index], 2);
            });
            stopwatch.Stop();
            Console.WriteLine("TPL Time elapsed: {0}", stopwatch.Elapsed);

            stopwatch.Reset();
            stopwatch.Start();
            for (int i = 0; i < dataItems.Length; ++i) {
                resultItems[i] = Math.Pow(dataItems[i], 2);
            }
            stopwatch.Stop();
            Console.WriteLine("Sequential Time elapsed: {0}", stopwatch.Elapsed);

            WaitForEnterKey();
        }

        public static void WaitForEnterKey() {
            Console.WriteLine("Press enter to finish");
            Console.ReadLine();
        }

        public static void PrintMessage() {
            Console.WriteLine("Message printed");
        }
    }
} 
```

输出是：

```
TPL Time elapsed: 00:00:00.0010670
Sequential Time elapsed: 00:00:00.0000178
Press enter to finish 
```

顺序循环比 TPL 快得多！这怎么可能？据我了解，内部的计算`Parallel.For`将并行执行，所以它必须更快吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T02:39:41.013

简而言之：对于仅迭代一百多个项目并执行一个小的数学运算，产生新线程并等待它们完成会产生比运行循环更多的开销。

> 据我了解，Parallel.For中的计算将并行执行，所以它必须更快吗？

当人们对计算机性能做出全面的陈述时，通常会发生这种情况，这里有更多的变量在起作用，你不能真正做出这样的假设。例如，在您的`for`循环中，您所做的只是`Math.Pow`处理器可以非常快速地执行。如果这是一个 I/O 密集型操作，需要每个线程等待很长时间，或者即使它是一系列处理器密集型操作，您将从并行处理中获得更多收益（假设您有一个多线程处理器） . 但事实上，创建和同步这些线程的开销远远大于并行性可能给您带来的任何优势。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-26T02:41:27.013

当在循环内执行的操作相对昂贵时，并行循环处理是有益的。您在示例中所做的只是计算指数，这很简单。在这种情况下，多线程的开销远远超过了您获得的收益。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T12:37:13.760

这个代码示例是上面非常好的答案的实际证明。

我通过 Thead.Sleep 简单地阻塞线程来模拟密集的处理器操作。

**输出是：**

*   顺序循环 - 00:00:09.9995500
*   并行循环 - 00:00:03.0347901

_

```
class Program
{
    static void Main(string[] args)
    {
        const int a = 10;

        Stopwatch sw = new Stopwatch();
        sw.Start();

        //for (long i = 0; i < a; i++)
        //{
        //    Thread.Sleep(1000);
        //}

        Parallel.For(0, a, i =>
        {
            Thread.Sleep(1000);
        });

        sw.Stop();

        Console.WriteLine(sw.Elapsed);

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T03:03:24.887

并行化的开销远远大于简单地顺序运行 Math.Pow 100 次。其他人都这么说了。

更重要的是，虽然在顺序版本中内存访问是微不足道的，但在并行版本中，线程必须共享内存（resultItems），即使你有一百万个项目，这种事情也会*真正杀死你。*

*请参阅此出色*的Microsoft 并行编程白皮书 的第 44 页：http: [//www.microsoft.com/en-us/download/details.aspx?id=19222](http://www.microsoft.com/en-us/download/details.aspx?id=19222)。这是一篇关于该主题的 MSDN 杂志文章：http: [//msdn.microsoft.com/en-us/magazine/cc872851.aspx](http://msdn.microsoft.com/en-us/magazine/cc872851.aspx)

# c++ - 为什么我的向量没有添加结构？

> ID：10763185
> 
> 赞同：-4
> 
> 时间：2012-05-26T02:36:43.103
> 
> 标签：c++, visual-studio-2010

我在这个算法项目的最后一部分遇到了问题。我的向量的 .size() 有问题。它没有给我任何东西。每次我尝试调试它时，它都是0。我不知道这是否意味着我的功能无法正常工作。

我是编程新手，我需要一些帮助。

Edit1：我添加了给我一个例外的新代码。

```
#include "stdafx.h"
#include <iostream>
#include <conio.h>
#include <vector>

using namespace System;
using namespace std;

typedef struct Linea {
    int a;
    int q;
    int b;
    int r;
} SLinea;

int algoritmoeuclides(int a,int b)
{
    if (a%b==0)
        return b;
    return algoritmoeuclides(b,a%b);
}

std::pair<int, int>division(int dividendo,int divisor)
{
    int resultado=0;
    int residuo=0;

    residuo=dividendo%divisor;
    resultado=dividendo/divisor;
    std::pair<int, int>retorno;
    retorno.first=resultado;
    retorno.second=residuo;
    return retorno;

}

std::pair<int, int>EuclidesExtendido(int a,int b,vector<SLinea*> aux)
{
    std::pair<int, int> tsqt;
    int q,r,s,t;
    SLinea *var;

    if (b == 0)
        return std::pair<int, int> (1, 0);
    else
    {

        std::pair<int, int>qr = division(a, b);
        q=qr.first;
        r=qr.second;
        std::pair<int, int>st = EuclidesExtendido(b, r,aux);
        s=st.first;
        t=st.second;
    }
    tsqt.first=t;
    tsqt.second=s-q*t;
    var->a=a;
    var->b=b;
    var->q=q;
    var->r=r;
    aux.push_back(var);

    return tsqt;

}
int main()

{
    int a=23;
    int b=120;
    int s,t;
    vector<SLinea*> Ecuacion;

    std::pair<int, int>st=EuclidesExtendido(a,b,Ecuacion);
    s=st.first;
    t=st.second;
    int resultado=algoritmoeuclides(a,b);
    int n=Ecuacion.size();
    for (int i=0;i<n;i++)
    {

        printf("%d=%dx%d+%d\n",Ecuacion[i]->a,Ecuacion[i]->b,Ecuacion[i]->q,Ecuacion[i]->r);

    }
    printf("MCD= %d\n ",resultado);
    printf("s=%d  \nt=%d",s,t);
    system("pause");

} 
```

* * *

```
 #include "stdafx.h"
    #include <iostream>
    #include <conio.h>
    #include <vector>

    using namespace System;
    using namespace std;

    typedef struct Linea {
        int a;
        int q;
        int b;
        int r;
    } SLinea;

    int algoritmoeuclides(int a,int b)
    {
        if (a%b==0)
            return b;
        return algoritmoeuclides(b,a%b);
    }

    std::pair<int, int>division(int dividendo,int divisor)
    {
        int resultado=0;
        int residuo=0;

        residuo=dividendo%divisor;
        resultado=dividendo/divisor;
        std::pair<int, int>retorno;
        retorno.first=resultado;
        retorno.second=residuo;
        return retorno;

    }

    std::pair<int, int>EuclidesExtendido(int a,int b,vector<SLinea> aux)
    {
        std::pair<int, int> tsqt;
        int q,r,s,t;
        SLinea var;

        if (b == 0)
            return std::pair<int, int> (1, 0);
        else
        {

            std::pair<int, int>qr = division(a, b);
            q=qr.first;
            r=qr.second;
            std::pair<int, int>st = EuclidesExtendido(b, r,aux);
            s=st.first;
            t=st.second;
        }
        tsqt.first=t;
        tsqt.second=s-q*t;
        var.a=a;
        var.b=b;
        var.q=q;
        var.r=r;
        aux.push_back(var);

        return tsqt;

    }
    int main()

    {
        int a=23;
        int b=120;
        int s,t;
        vector<SLinea> Ecuacion;

        std::pair<int, int>st=EuclidesExtendido(a,b,Ecuacion);
        s=st.first;
        t=st.second;
        int resultado=algoritmoeuclides(a,b);
        int n=Ecuacion.size();
        for (int i=0;i<n;i++)
        {

            printf("%d=%dx%d+%d\n",Ecuacion[i].a,Ecuacion[i].b,Ecuacion[i].q,Ecuacion[i].r);

        }
        printf("MCD= %d\n ",resultado);
        printf("s=%d  \nt=%d",s,t);
        system("pause");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T02:38:28.830

```
std::pair<int, int> EuclidesExtendido(int a,int b,vector<SLinea> aux) 
```

该函数`aux`按值获取参数，这意味着它会获取用作参数的任何内容的副本。我会让你从那里拿走它...

# excel - 用户窗体初始化中的无限循环

> ID：10763187
> 
> 赞同：0
> 
> 时间：2012-05-26T02:36:56.753
> 
> 标签：excel, vba

我在 Excel VBA 宏中初始化用户窗体。当我去填充组合框中的项目时，我陷入了无限循环，但我不知道为什么。这是我的代码：

```
Private Sub UserForm_Initialize()

  'Populate the combobox with the months
  Me.cboCurrMth.SetFocus
  Dim cMth As Range
  Dim ws As Worksheet
  Set ws = Sheet1
  For Each cMth In ws.Range("months")
      With Me.cboCurrMth
          .AddItem cMth.Value
          .List(.LineCount - 1, 1) = cMth.Offset(0, 1).Value
      End With
  Next cMth

End Sub 
```

命名范围“月”包括所有 12 行和 2 列，其中第一列是整数（从 1 到 12），第二列是每个月的字符串名称。

任何人都明白为什么这个循环不会终止？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:12:49.047

I have wrote the following code and it is worked for me. I am using Excel 2003.

```
ActiveSheet.Shapes("cmbMonths").Select

Dim currMonth As Range
With Selection
    For Each currMonth In Range("Months")
        .AddItem currMonth.Value
    Next
End With 
```

This line ".List(.LineCount - 1, 1) = cMth.Offset(0, 1).Value" is giving error for me 'Saying member not found"

Please select your month cells once again and give the name for the selected range and try again. Hope it works.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:38:01.207

您应该很少在生产 VBA 代码中选择单元格或范围。但是，它对于调试目的非常有帮助。

`.select`在循环中添加一个，`For Each`然后单步执行您的代码。您应该能够找出问题所在。

```
Private Sub WhyAmIInfinite()

  'Loop through and select the months
  Dim cMth As Range
  Dim ws As Worksheet
  Set ws = Sheet1
  For Each cMth In ws.Range("months")
        cMth.Select
  Next cMth

End Sub 
```

我设置了一个工作表，其范围与您描述的完全一样，并且循环按我的预期退出。我从示例中删除了组合框，因为我想隔离循环本身。

# php - 从循环创建变量

> ID：10763194
> 
> 赞同：-1
> 
> 时间：2012-05-26T02:38:01.603
> 
> 标签：php, arrays, loops, while-loop

我希望能够创建一个循环达到 299 的变量。例如，我有变量 $var1 并希望能够从那里添加示例：$var2 - $var3 - $var4 等。

```
for ( $x = 1; $x<=299; $x++ ) 
    {
    $var1 = substr($size, 0, 1); 
    if ($var1 == '1') { $c1 = 'COLOR1'; } 
          elseif ($var1 == '2') { $var1 = 'COLOR2'; } 
          elseif ($var1 == '3') { $var1 = 'COLOR3'; };
    } 
```

这一直困扰着我一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:06:46.367

以更好的方式使用数组：

```
for ( $x = 1; $x<=299; $x++ ) {
    $var[$x] = substr($size, 0, 1); 
    switch($var[$x]) {
       case "1":  $var[$x] = 'COLOR1'; break;
       case "2":  $var[$x] = 'COLOR2'; break;
       case "3":  $var[$x] = 'COLOR3'; break;
    }

    // or the more simple if you follow the same rule
    // $var[$x] = "COLOR".$var[$x];
} 
```

# javascript - 这是什么？“隐藏的价值”？

> ID：10763196
> 
> 赞同：1
> 
> 时间：2012-05-26T02:38:28.593
> 
> 标签：javascript, arrays

受[兰斯波拉德在这个问题中的评论的](https://stackoverflow.com/a/10763103/283863)启发，发生了一些非常奇怪的事情，我以前从未见过......

```
var strangeArray = {
    0:"a",
    1:"b",
    2:"c",
    length: 0,
    splice: Array.prototype.splice
} 
```

现在，当你运行它时：

```
> strangeArray;
  []    <-- you get an empty array.

> strangeArray.length;
  0     <-- Holy $#!T 
```

现在：

```
> strangeArray[0];
  "a"

> strangeArray[1];
  "b"

> strangeArray[2];
  "c" 
```

什么？“数组中的*隐藏值”？*

首先我认为因为它是一个对象，这就是原因。但`object`应该像这样显示：

```
{} 
```

那么为什么会这样呢？请帮忙，我完全糊涂了。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T02:46:28.920

这只是控制台经常将 Object 解释为 Array 的方式（即使它根本不是 Array，就像在您的代码中一样）。

当控制台看到一个对象...

*   数字`.length`属性
*   函数`.splice`属性

...控制台决定将其显示为数组，即使不是。它对对象实际上是什么没有影响。

```
strangeArray.length; // 0 
```

这应该不足为奇。您在对象上定义了它。

他们使用这种方法的原因大概是因为它速度快，而且足够准确。

再一次，仅仅因为你看到`[]`，并不意味着它是一个数组。控制台不是语言的一部分。它只是显示一些有用的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T02:46:15.080

`strangeArray.length == 0`因为您明确设置`strangeArray.length`为 integer `0`，覆盖其默认值。

该数组仍然包含元素：

```
for (var i in strangeArray) {
  console.log(i);
} 
```

输出：

```
0
1
2
length
splice 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T02:56:36.653

一切都是javascript中的对象。有关详细解释，请参阅以下问题的答案：
[Javascript 中的几乎所有内容如何都是对象？](https://stackoverflow.com/questions/9108925/how-is-almost-everything-in-javascript-an-object)

鉴于此，社区 wiki 答案提供了其余的解释。由于您提供了`strangeArray`通常与对象关联的对象属性`array`，因此您可以欺骗控制台将其显示为这样。

# forms - 使用 Modal、Form Validation 和 Constant Contact Form Generator 保持在同一页面上

> ID：10763200
> 
> 赞同：1
> 
> 时间：2012-05-26T02:39:18.860
> 
> 标签：forms, validation, modal-dialog, constantcontact

我是一个 jQuery 新手和 ma 试图使用模式来显示由[表单生成器](https://github.com/ctctsupport/Constant-Contact-PHP-Simple-Form-Generator)生成的恒定联系简单表单。我已经应用了 jQuery.validate()，并且验证工作正常，但我不知道如何提交表单。如果标签中有 action="signup/index.php"，我会进入一个新页面。

生成的表单使用 action='signup/index.php' 并且该文件要求新的页面位置[参见 Github 中的文件](https://github.com/ctctsupport/Constant-Contact-PHP-Simple-Form-Generator/blob/master/signup/index.php)。我评论了最后几行，但仍然无法提交表单。我在常联系电子邮件列表中看不到新电子邮件。

这是我的提交处理程序

```
submitHandler: function() {
        $('#signup').click(function(e) {
            $.post('signup/index.php', $().serialize(), function(data) {
                $('#output-div').html(data);
            });
            $('#form-message').fadeIn(300, function() {
                $('#form-message').html('<p>Thank you for joining our list.  Great offers coming soon.</p>')
            });
            $('#myModal').delay(1500).trigger('reveal:close');
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:14:51.880

解决了。

我已经注释掉了 signup/index.php 的最后几行，包括这一行

```
if($postFields['request_type'] == 'ajax'){ $postFields["success_url"]=''; $postFields["failure_url"]=''; } 
```

出于某种原因，表单提交成功需要该行。该行之后的所有内容都被注释掉，从

```
if ($return_code==201) { 
```

至

```
</ol>
        </p>'; }
    } 
```

我的 jQuery 正在处理消息、错误和完成等

```
submitHandler: function() {
        $.post('/dev/rest/ccphp/signup/index.php', $("#ccsfg").serialize(), function(data) {
            $('#results').html(data);
        }).success(function() { 
            $('#ccsfg').html('<h4>Thank you for joining our list.  Great offers coming soon.</h4>');
        })
            .error(function() {
            $('#ccsfg').html('<h4>Oops!  There was an error.  Please try again. </h4>');
         })
            .complete(function() {
            $('#myModal').delay(1500).trigger('reveal:close');
         });
    } 
```

# prolog - 河内塔 - 另一个输出

> ID：10763203
> 
> 赞同：-6
> 
> 时间：2012-05-26T02:40:00.647
> 
> 标签：prolog, towers-of-hanoi

对于河内塔，输出应如下所示：

```
 ?-move(3,[1,2,3],[],[],A1,B1,C).

 A1=[].
 B1=[1,2,3]
 C=[]. 
```

我知道该怎么做：

```
move(1,[H|T],B,C,A1,B1,C) :-  
                       A1 = T,
                       B1 = [H|B],
                       C1 = C.  
move(N,A,B,C,A1,B1,C) :- 
                       N>1, 
                       M is N-1, 
                       move(M,[H|T],C,B,A1,B1,C), 
                       move(1,[H|T],B,_,A1,B1,C), 
                       move(M,C,B,[H|T],A1,B1,C). 
```

但下一个问题是：“重写程序以在每次移动后提供塔的插图”。它的输出应该是这样的：

```
?- move(3,tower(a,[1,2,3]),tower(b,[]),tower(c,[]),A,B,C).
   a[2 3] b[1] C[]
   a[3] b[1] C[2]
   a[3] b[] C[1 2]
   a[] b[3] C[1 2]
   a[1] b[3] C[2]
   a[1] b[2 3] C[]
   a[] b[1 2 3] C[]
   A = tower(a, [])
   B = tower(b,[1, 2, 3])
   C = tower(c,[]) 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:26:50.037

您可以使用以下谓词打印空格分隔的列表：

```
write_list_([]) :- write(']').
write_list_([X|Xs]) :- write(' '), write(X), write_list_(Xs).

write_list([]) :- write('[]').
write_list([X|Xs]) :- write('['), write(X), write_list_(Xs). 
```

# macos - 可可分辨率独立按钮图形

> ID：10763209
> 
> 赞同：1
> 
> 时间：2012-05-26T02:42:16.097
> 
> 标签：macos, cocoa, graphics

我正在尝试在 Sketch（基于矢量的图形设计应用程序）中创建图形。我导出为 PDF，这就是我的原始图形的样子：

![原来的](../Images/b16c0b63d7fdcbba1beef842a73280d4.png)

但是当我将它设置为 NSButton 的图像时，它会像这样绘制：

![画](../Images/052aaf6b40cedc3145346cc097bf21aa.png)

为什么会出现这种情况？特别是右侧和底部边缘发生了很大变化。我不确定这是 Cocoa 绘图问题还是我原始图形的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:18:56.247

问题在于与像素网格和抗锯齿的（错误）对齐。看起来您已经对图像进行了缩放，以使左侧、右侧和底部的边框的厚度大约为一个像素。但是，右边界和下边界跨越像素之间的边界。结果是它们将一半的“暗度”贡献给边界一侧的像素，另一半贡献给边界另一侧的像素。

您应该调整图像的比例或绘制它的大小，以避免特定的对齐方式。它看起来好像被渲染为大约 10.5 像素宽。您希望它是 10 像素或 11 像素宽，因此右边缘更接近于像素列。

# treeview - pyqt树视图不显示重载模型

> ID：10763212
> 
> 赞同：1
> 
> 时间：2012-05-26T02:44:33.273
> 
> 标签：treeview, pyqt, qstandarditemmodel

我需要一些有关树视图的帮助。当我将模型指定为

```
class TreeModel(QtGui.QStandardItemModel):

    def __init__(self,parent=None):
        QtGui.QStandardItemModel.__init__(self,parent)
        self.rootItem = QtGui.QStandardItem('root') 
```

我可以从窗口将项目添加到树中

```
def on_actionAddItem_triggered(self,checked=None):

    if checked is None: 
        return

    parent = self.model.invisibleRootItem()
    parent.appendRow(QtGui.QStandardItem("test")) 
```

但是当我尝试重载模型时，树视图不会更新。该代码无法更新树视图。有人可以解释一下吗？

```
class TreeModel(QtGui.QStandardItemModel):

    def __init__(self,parent=None):
        QtGui.QStandardItemModel.__init__(self,parent)
        self.rootItem = QtGui.QStandardItem('root')

    def data(self,index,role):

        if role == QtCore.Qt.DisplayRole:
            row = index.row()
            text = self.rootItem.child(row)
            return text.text()

    def columnCount(self,parent=None):
        return 1

    def rowCount(self,parent=QtCore.QModelIndex()):
        return self.rootItem.rowCount()

    def headerData(self, column, orientation, role):
        if role == QtCore.Qt.DisplayRole:
            if orientation == QtCore.Qt.Horizontal:
                if column == 0:
                    return 'zero' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:50:01.260

我发现，`invisibleRootItem()`不会自动指向根项目。只需指定即可`parent = self.model.rootItem`解决问题。

# macos - AppleScript 能否确定用户是否在 Finder 中键入新文件名？

> ID：10763215
> 
> 赞同：0
> 
> 时间：2012-05-26T02:44:57.310
> 
> 标签：macos, applescript, shortcut, finder

我的目标是使用 OSX 的 Finder 使 Delete 键（不带任何修饰符）将选定的文件移动到垃圾箱，类似于 Windows 资源管理器。我已经成功地使用了一个名为 Spark 的实用应用程序来做到这一点。Spark 允许我仅在 Finder 中分配 Delete 键来执行某些操作。我可以让它键入 Finder 快捷键（command-backspace），或者激活 File > Move to Trash 菜单项，或者运行 AppleScript。在每种情况下，文件都会成功移动到垃圾箱。它运作良好......有点太好了。

如果我正在重命名文件并按 Delete 键，则文件将被移至回收站，而不是光标前的字母被删除。我想不出任何聪明的方法来解决这个问题。我唯一能想到的是使用 AppleScript 来确定文本编辑器是否在 Finder 中打开，以便用户重命名文件……或者，简单地说，确定用户是否在 AppleScript 中重命名文件。有些东西告诉我这超出了 AppleScript 的能力。可以做到吗？任何其他建议都将受到欢迎。谢谢。

更新：

感谢 adayzdone，我现在有了一个工作脚本。[在Spark](http://www.macupdate.com/app/mac/14352/spark)中为 Finder 创建一个热键，为其分配 Delete 键，并将此脚本用作操作：

```
tell application "System Events"
    tell process "Finder"
        if not (exists text field 1) then
            tell menu bar 1
                tell menu bar item "File"
                    tell menu "File"
                        click menu item "Move to Trash"
                    end tell
                end tell
            end tell
        end if
    end tell
end tell 
```

更新 2：

这是基于 adayzdone 的更清洁版本的更新脚本。当您重命名文件并按删除时，我添加了一行来重新发出删除键。但是它有一个问题：每删除一个字符，您就必须按两次删除键。此外，完成重命名文件后，您可能会使事情处于奇怪的状态：如果您按 delete 删除文件，它可能无法正常工作......需要在事情恢复正常之前再次按下 delete 键。我认为问题在于从 Spark 处理的事件中发出删除键。我会尝试找到解决方案。

```
tell application "System Events"
    tell process "Finder"
        if exists text field 1 then
            keystroke "d" using {control down}
        else
            click menu item "Move to Trash" of menu 1 of menu bar item "File" of menu bar 1
        end if
    end tell
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:18:13.353

尝试：

```
 tell application "System Events"
    tell process "Finder"
        if not (exists text field 1) then click menu item "Move to Trash" of menu 1 of menu bar item "File" of menu bar 1
    end tell
end tell 
```

另一种方法是：

```
 tell application "Finder"
    if selection is not {} then
        tell application "System Events" to tell process "Finder"
            if (exists text field 1) then
                keystroke (ASCII character 8)
            else
                tell application "Finder" to delete selection
            end if
        end tell
    end if
end tell 
```

# clojure - Lisp / Clojure DSL 的中间表示

> ID：10763223
> 
> 赞同：5
> 
> 时间：2012-05-26T02:46:37.593
> 
> 标签：clojure, functional-programming, lisp, code-generation, dsl

我正在 Clojure 中设计一个 DSL，它用于驱动代码生成器（在这种情况下用于程序图像合成 - [clisk](https://github.com/mikera/clisk)），并且在为中间值制定最佳表示时遇到了麻烦。

最初，DSL 由返回一种或多种形式的函数组成，例如（说明性的）

```
(v+ 1.0 [1.0 'y])
=> ['(+ 1.0 1.0) '(+ 1.0 y)] 
```

然后可以组合这些函数来构建更大的代码块。

这很简单，生成的表格可以直接输入代码生成器。然而，我现在已经确定了这种方法的一些弱点，例如，如果需要传递一些辅助数据（例如，无法以 BufferedImages 等形式编码的对象、对优化有用的元数据等）。

我确信这是 Lisp 世界中一个已解决的问题 - 这种 DSL 的最佳中间表示通常是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T13:48:47.097

每当您需要用于生成代码的中间表示时，我想到的最明显的事情就是抽象语法树（AST）。您的示例表示是列表，根据我的经验，它的形式不那么灵活。除了琐碎的代码生成之外，我不会拐弯抹角，而只是使用完整的 AST 表示。通过使用列表，您将更多的工作推到生成端来解析信息，例如类型和第一项的含义。转向 AST 表示将为您提供更大的灵活性并解耦更多的系统，但代价是解析方面的工作更多（或生成表单的函数的工作更多）。一代人也将做更多的工作，

就 AST 应该是什么样子而言，我会复制 Christophe Grand 的 enlive，他使用的地方`{:tag <tag name> :attrs <map of attrs> :content <some collection>}`

或者 clojure 脚本使用什么，`{:op <some operator> :children <some collection>}`.

这使得它非常通用，因为您可以定义任意步行者，这些步行者可以窥视`:children`并可以遍历任何结构，而无需确切知道`:op`'s 或`:tag`'s 是什么。

然后对于原子组件，您可以将其包装在映射中并为其提供一些类型信息（关于您的 DSL 的语义），这些信息与对象的实际类型无关。`{:atom <the object> :type :background-image}`.

在代码生成方面，当遇到原子时，您的代码可以在 上分派`:type`，然后，如果您愿意，可以进一步分派对象的实际类型。从集合表单生成也很容易，在 :op/:tag 上调度，然后与孩子一起重复。对于儿童使用什么集合，我会阅读更多关于谷歌群组的讨论。他们的结论对我很有启发。

[https://groups.google.com/forum/#!topic/clojure-dev/vZLVKmKX0oc/discussion](https://groups.google.com/forum/#!topic/clojure-dev/vZLVKmKX0oc/discussion)

总而言之，对于儿童来说，如果在 if 语句中存在语义排序重要性，则使用 map `{:conditional z :then y :else x}`。如果它只是一个参数列表，那么你可以使用一个向量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:07:05.980

我想我不明白。我自己会使用列表或结构。

在 Lisp 中，列表可以包含任何东西。我应该说，一个 CONS 单元格可以指向任何东西，因此列表可以包含任何东西。几乎任何其他数据结构（结构、数组、映射等）也可以。

现在，这些结构不能通过 PRINT 渲染或渲染成可读的东西（通过 READ），但这并不意味着它们不能被存储和操作。

是否有某些原因需要将这种表示外部化？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T07:03:02.173

不是一个真正的答案，因为我不知道 Clojure 在这方面是如何工作的，但是在 CL 中有专门为这种情况设计的阅读器宏：即你可以定义你的函数来打印不可打印的对象 + 一个读取它们的阅读器宏您打印它们的方式。要定义打印对象的方式，您需要定义一个`print-object`专门处理您需要的对象类型的新方法，`set-macro-character`并向可读表添加一个函数，该函数知道如何读取您的设计对象。

有很多事情需要注意，但有些情况通常就像定时炸弹一样，当对象被允许递归引用自己时，在这种情况下打印需要考虑以前打印的对象。

# php - 如何通过单击“添加”按钮将内容添加到正确的文本区域

> ID：10763225
> 
> 赞同：-1
> 
> 时间：2012-05-26T02:46:38.687
> 
> 标签：php, javascript, jquery, html

当您打开应用程序时，您可以单击“添加问题”两次，以便添加 2 个表格行。

现在您将在应用程序中看到，在水平线上方有一个 textarea 和一个加号按钮，在水平线下方显示 2 个表格行，两行都显示自己的 textarea 和加号按钮。

现在我的问题是我希望这两种结果发生，但我确实需要擅长使用 Jquery/Javascript 的人的帮助来解决这种情况：

情况 1\. 如果用户单击水平线上方的加号按钮，则会显示一个包含搜索栏的模式窗口，请在搜索栏中输入“AAA”。您现在将看到结果列表。现在我想要的是，如果用户通过单击“添加”按钮选择一行，那么我希望该行中的“QuestionContnet”显示在水平线上方的文本区域中。目前，添加按钮只是关闭模式窗口，但不向文本区域添加任何内容。

情况2：这涉及用户单击水平线下方的表格行之一内的加号按钮。我希望发生同样的事情，除了添加的“QuestionContent”显示在用户单击加号按钮的同一行内的文本区域中，没有其他地方。

如何解决这两种情况，以便根据单击哪个加号按钮将 QuestionContent 添加到正确的文本区域中？我正在使用 Iframe 在模态窗口中显示内容。

更新：

如果您查看应用程序，当我单击“添加”按钮时，它现在在 textaea 中显示“[Object] [object]”。不是“问题”。

```
Below is the code for the application:

        <head>

               <script type="text/javascript">

    var plusbutton_clicked;

 function insertQuestion(form) {

var $tbody = $('#qandatbl > tbody'); 
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $plusrow = $("<td class='plusrow'></td>");
var $question = $("<td class='question'></td>");

 $('.questionTextArea').each( function() {

 var $this = $(this);
var $questionText = $("<textarea class='textAreaQuestion'></textarea>").attr('name',$this.attr('name')+"[]")
.attr('value',$this.val());

 $question.append($questionText);

});

 $('.plusimage').each( function() {

var $this = $(this);
var $plusimagerow = $("<a onclick='return plusbutton();'><img src='Images/plussign.jpg' width='30' height='30' alt='Look Up Previous Question' class='imageplus'/></a>").attr('name',$this.attr('name')+"[]")
.attr('value',$this.val());

$plusrow.append($plusimagerow);

 });

$tr.append($plusrow);
$tr.append($question);
$tbody.append($tr); 

form.questionText.value = "";

$('.questionTextArea').val('');

}

function plusbutton() { 
        // Display an external page using an iframe 
        var src = "previousquestions.php"; 
        $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
        return false;
    } 

    function closewindow() {     

        $.modal.close(); 
        return false;
    } 

    $('.plusimage').live('click', function() {
        plusbutton($(this));
    });

    function plusbutton(plus_id) {
        // Set global info
        plusbutton_clicked = plus_id;
        // Display an external page using an iframe
        var src = "previousquestions.php";
        $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
        return false;
    }

    function addwindow(questionText) { 

        if(window.console) console.log();
            var txt = $(this).val(questionText);

        if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
            $('#mainTextarea').val(txt);
            } else { 
                $(plusbutton_clicked).parent('td').next('td.question').find('textarea.textAreaQuestion').val(txt); 
                }

        $.modal.close(); 
        return false;
    } 

</script>

</head>

<body>

<form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

<div id="detailsBlock">
<table id="question">
<tr>
<td rowspan="3">Question:</td> 
<td rowspan="3">
                        <textarea class="questionTextArea" id="mainTextarea" rows="5" cols="40" name="questionText"></textarea>
                    </td>
                </tr>
                </table>

                <table id="plus" align="center">
                <tr>
                <th>
                <a onclick="return plusbutton();">
                <img src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage" id="mainPlusbutton" name="plusbuttonrow"/>
                </a>
                <span id="plussignmsg">(Click Plus Sign to look <br/> up Previous Questions)</span>
                </th>
                </tr>
                </table>

                <table id="questionBtn" align="center">
                <tr>
                <th>
                <input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" />
                </th>
                </tr>
                </table>

                </div>
                <hr/>

                <div id="details">
                <table id="qandatbl" align="center">
                <thead>
                <tr>
                    <th class="plusrow"></th>
                    <th class="question">Question</th>
                </tr>
                </thead>
                <tbody>
                </tbody>
                </table>
                </div>

                </form>

                </body> 
```

存储在模态窗口中的详细信息来自一个名为“previousquestions.php”的单独脚本，下面是代码，其中显示了“QuestionContent”字段的结果仅显示，它是用户编译搜索后的“添加”按钮：

```
<?php

$output = "";

        while ($questionrow = mysql_fetch_assoc($questionresult)) {
$output .= "
<table>
      <tr>
      <td class='addtd'><button type='button' class='add' onclick='parent.addwindow();'>Add</button></td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

        ?> 
```

谢谢

[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)申请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:54:19.140

第一个问题是这个->

```
<button id="add"> 
```

您不能一遍又一遍地重复使用 ID，否则页面将迭代到具有该 ID 的最后一个元素，并且永远不会在任何先前的元素上运行任何内容。

快速解决：

```
<button class="add"> 
```

很简单。

我们需要从第一列中获取问题文本，使用 jQuery 选择器有很多方法可以做到这一点，这让我们大吃一惊。

**情况一**

让我们看一下*一个*选项->

```
$(document).on('click', '.add', function(){
  //now that we've declared the click function, let's jump up to our parent element, and grab the text in the first cell.
  var theQuestion = $("td:first-child", $(this).parent()).text();
  //Now that we've figured out how to traverse the DOM to get the data we want, we need to move that data elsewhere. 
  $('.questionTextArea').val(firstCell);
}); 
```

很简单，对吧？那应该可以解决您遇到的第一个问题。 *注意：Textareas 用于`value`设置数据，而其他元素将使用 .text()*

**情况2**

好的，现在我们需要弄清楚如何在单击时将唯一标识符添加到“+”行，并在附加数据时检查该“唯一标识符”，让我们开始吧。

你有一个`<td>`带有 plusrow 的类，听起来不错，让我们用它来做一个 click 函数，并给它一个很酷的 new`class`以供参考。

```
 $(document).on('click', '.plusrow', function(){
   //adding a unique class for the purpose of the click.
   $(this).addClass('activePlusRow');
 }); 
```

所以现在我们点击的“+”有了一个新的类 -- `activePlusRow`，让我们回到添加按钮的初始点击处理程序，并给它一些新的条件语句。

```
$(document).on('click', '.add', function(){
  //lets get our Question Text...
  var theQuestion = $("td:first-child", $(this).parent()).text();

  //the row is present, let's then make sure that the proper cell gets your data.
  if($('.activePlusRow').length > 0){

    $('.activePlusRow').next('.textAreaQuestion').val(theQuestion);
    $('.activePlusRow').removeClass('activePlusRow');
  }
}); 
```

好的，正如您在上面看到的，我们测试是否存在 activePlusRow 类，如果存在，那么我们迭代到下一个`textarea with a class of textAreaQuestion`并更改它的值，为`theQuestion from the .add button we clicked.`

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:29:27.980

我认为将所选问题定位到指定文本区域的最佳方法是参数化您的`plusbutton`函数：

```
function plusbutton(plus_id) {
    // Set global info
    plusbutton_clicked = plus_id;
    // Display an external page using an iframe 
    var src = "previousquestions.php"; 
    $.modal('<iframe src="' + src + '" style="border:0;width:100%;height:100%;">');
    return false;
} 
```

当然，您必须在函数`var plusbutton_clicked;`之前声明全局，`insertQuestion`以便其他函数可以更改/使用此信息。您必须使用每个加号按钮的唯一参数调用此函数（您动态生成它，所以这取决于您如何操作）

然后你可以简单地在你的`$(document).on('click', '.add', function(){});`- 当用户点击“添加”按钮时使用它，你有你的 plusbutton id，这样你就可以使用 jQuery 导航到相应的文本区域并将文本放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T16:12:20.197

我在想 next() 不是正确的函数，因为它只搜索紧随其后的兄弟姐妹......试试这个：

```
 $(document).on('click', '.add', function(){  

    console.log("clicked");

   //lets get our Question Text... 
  var theQuestion = $("td:first-child", $(this).parent()).text(); 

  //the row is present, let's then make sure that the proper cell gets oru data. 
  if($('.activePlusRow').length > 0){ 

    $('.activePlusRow').next('.question').find('textarea.textAreaQuestion').val(theQuestion); 
    $('.activePlusRow').removeClass('activePlusRow'); 
  }

   $.modal.close(); 
   return true;

}); 
```

# iphone - ARC - 如何摆脱东西

> ID：10763228
> 
> 赞同：0
> 
> 时间：2012-05-26T02:48:10.877
> 
> 标签：iphone, ios, automatic-ref-counting

我刚刚决定在怀疑某些行为时进行测试：

在我的视图控制器中，我有一个新的游戏方法可以做到这一点：

```
-(void) newClassicGame {

    if (classicGame!=nil) {
        [classicGame saveStats];
    }

    classicGameController = nil;
    classicGameController = [[RegularGameViewController alloc] initWithPowerMode:NO ];

    classicGame = nil;
    classicGame = [[RegularGame alloc] initWithViewController:classicGameController];

    classicGameController.game = classicGame; // game property is __weak to avoid 
    //retain cycles.

    [classicGame startGame];

} 
```

为了测试对象是否被 ARC 破坏，在 classicGame 的 startGame 方法中，我输入了这个：

```
-(void) startGame
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSLog(@"once");
        [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(repeat) userInfo:nil repeats:YES];
    });
//other stuff..

}

-(void) repeat {

    NSLog(@"I repeat");

} 
```

对于那些不熟悉`dispatch_once`方法的人来说，它只是一种确保在应用程序的生命周期内只调用一次块的方法。

我启动我的应用程序，点击新游戏并开始游戏 - 我看到日志“我重复”每 3 秒重复一次”。然后我回到菜单并再次点击新游戏。奇怪的是，日志一直在重复，表明我的 classicGame 实例没有完全销毁，计时器仍在某处运行。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T02:55:11.723

您创建的计时器保留其目标（`self`游戏），因此您的游戏对象至少在计时器失效之前不会被释放。

# javascript - 用javascript更改画布图像

> ID：10763229
> 
> 赞同：1
> 
> 时间：2012-05-26T02:48:23.023
> 
> 标签：javascript, html, canvas, html5-canvas

所需的行为是当文档加载时，画布绘制图像 0。当单击不可见的 div 时，画布绘制图像 1，在 mouseup 或 mouseout 时，它恢复为图像 0。

我离开了css，因为我得到了那个工作......只需要知道我在javascript函数上做错了什么。现在它不显示任何东西，甚至不显示第一张图片。

```
<!DOCTYPE HTML>
<html>
    <head>
        <script type="text/javascript">
        function imgChange(imagePath)
            var c=document.getElementById("myCanvas");
            var ctx=c.getContext("2d");
            var img=new Image();
            img.onload = function(){
            ctx.drawImage(img,0,0);
            };
            img.src=imagePath; <!-- I THINK THIS IS WRONG?
        </script>
    </head>

    <body>

            <canvas id="myCanvas" width="506" height="319"
onload="imgChange('0.gif')" style="border:1px solid #c3c3c3;">
            Your browser does not support the canvas element.
            </canvas>

            <div id="button1" onMouseDown="imgChange('1.gif')" onMouseUp="imgChange('0.gif')" onMouseOut="imgChange('0.gif')"></div>
            <div id="key2"></div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:07:12.717

您的代码缺少结束块

```
function imgChange(imagePath) {
            var c=document.getElementById("myCanvas");
            var ctx=c.getContext("2d");
            var img=new Image();
            img.onload = function(){
                  ctx.drawImage(img,0,0);
            };
            img.src=imagePath;
} 
```

缺少最后一个“}”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T02:57:14.877

JavaScript 看起来不错。但是您不能*单击*不可见的`div`. 使 div 可见并尝试。

也要注意[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。图片路径应该在您的域中。如果您在 localhost 中运行，您可能需要有一个本地 HTTP 服务器。

# knockout.js - 淘汰赛从自动映射的可观察对象创建一个空对象

> ID：10763230
> 
> 赞同：9
> 
> 时间：2012-05-26T02:48:53.643
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试解决 ko 映射的一个小问题。场景是我的 ViewModel 基本上是一个对象的集合。每个对象都是通过 json 调用创建的，以这种方式：

```
var ViewModel = ko.observableArray();

$.getJSON(url, function(data) {
    ViewModel.push(ko.mapping.fromJSON(data));
}); 
```

这完美地工作，我可以在我的 HTML 中做各种魔术。问题是，例如，如果我想在我的收藏中添加一些东西，比如说支持客户端“添加和编辑”场景。我想做类似的事情：

```
<input type="button" value="add new" data-bind="click: AddNew" /> 
```

我希望 ViewModel 中的 AddNew 函数类似于：

```
function AddNew() {
    this.push(// WHAT HERE?);
} 
```

基本上我需要推送一个与另一个已经存在的对象相同的对象，但当然所有属性都被删除了......

我正在考虑一种从列表中“克隆”一个对象并将所有可观察对象设置为空的方法，但恐怕我不知道从哪里开始：/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T04:19:15.037

如果您要将功能扩展到客户端编辑/添加，那么我建议将您的对象形式化为 js 类，然后在内部映射这些对象。这将允许您在主视图模型上使用 add 方法并轻松创建空白实例客户端。

映射插件的一个警告是，为了更新对象，它期望这些对象最初是由插件映射的。这是如何完成的一个快速示例。

```
var YourObjectClass = function (config) {
    var self = this, data;

    // your default structure goes here
    data = $.extend({
        name: "",
        id : -1
    }, config);

    ko.mapping.fromJS(data, {}, self);
};

var viewModel = function(initialData) {
    var self = this;

    ko.mapping.fromJS(initialData, {
        items: {
            create : function (options) {
                return new YourObjectClass(options.data);
            }
        }
    }, self);

    this.AddNew = function () {
       self.items.push(new YourObjectClass());
    }
}; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:28:59.947

您知道这些字段还是需要从您从服务器获得的内容中复制它们？如果是这样的话，我认为你很难开始一个新的列表。您可以创建一个模板并推送它：

```
var myTemplate = {
    name: ko.observable(),
    phone: ko.observable()
};

ViewModel.push(myTemplate); // add empty item 
```

我从未见过视图模型是可观察或可观察的数组，为什么不这样创建呢？

```
function ViewModel() {
    self = this;
    self.items = ko.observableArray();
}

var myViewModel = new ViewModel();
ko.applyBindings(myViewModel);

$.getJSON(url, function(data) {
    myViewModel.items.push(ko.mapping.fromJSON(data));
}); 
```

# c++ - 通过文本迷宫打印到屏幕路径的算法

> ID：10763233
> 
> 赞同：5
> 
> 时间：2012-05-26T02:49:55.380
> 
> 标签：c++, variable-assignment, maze

对于我的**C++**作业，我基本上是在尝试`vec`从左侧第二个顶部字符开始搜索文本文件（流式传输到我的 vector ）中的一大块文本。这是一个文本迷宫，我的程序最终应该打印出穿过它的路径的字符。

迷宫的一个例子是：

```
###############
Sbcde####efebyj
####hijk#m#####
#######lmi#####
###############
###############
###############
###############
###############
###############
###############
###############
###############
###############
############### 
```

其中“#”是一堵无法行走的墙，您总是从左侧第二个顶部字符开始。字母字符代表可步行的方块。出口总是在右边。在 maze.text 文件中，迷宫始终为 15x15 大小。字母字符在同一个迷宫中重复，但不直接相邻。

我在这里要做的是：如果当前方块旁边的方块有字母字符，则将其添加到 vector`vec`中，然后重复此过程，直到走到迷宫的尽头。最终，我应该通过将某些迷宫中存在的多条路径打印到屏幕上来使这变得更加复杂。

到目前为止，我有这个算法本身，我知道这是错误的：

```
 void pathcheck()
{
    if (isalpha(vec.at(x)) && !(find(visited.begin(), visited.end(), (vec.at(x))) != visited.end()) )
    {
        path.push_back(vec.at(x));
        visited.push_back(vec.at(x));
        pathcheck(vec.at(x++));
        pathcheck(vec.at(x--));
        pathcheck(vec.at(x + 16));
        pathcheck(vec.at(x - 16));
    }
} 
```

`visited`是我跟踪访问过的方块的向量。

我将如何更新它以使其真正起作用，并最终使我可以管理多个路径（即，如果有 2 个路径，程序将同时打印到屏幕上）？我记得有人告诉我可能需要另一个向量/数组来跟踪我已经访问/检查过的正方形，但是我将如何在这里实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:10:20.047

你在正确的轨道上。对于迷宫，典型的解决方法是通过深度优先搜索（寻找某些路径的最有效解决方案）或广度优先搜索（效率较低，但保证找到最佳路径）。由于您似乎想要进行详尽的搜索，因此这些选择基本上是可以互换的。我建议您阅读它们：

[http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)

[http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)

基本上，您将需要解析您的迷宫并将其表示为图形（其中每个非“#”是一个节点，每个链接是一个可步行的路径）。然后，您保留一个部分路径列表（即节点列表，按照您访问它们的顺序，例如，[S, b, c] 是从 S 开始到 c 结束的部分路径）。DFS 和 BFS 的主要思想是你有一个部分路径的列表，你从列表中逐一删除项目，生成从该部分路径开始的所有可能的部分路径，然后将它们放在列表中并重复。DFS 和 BFS 的主要区别在于 DFS 将此列表实现为堆栈（即新项目具有最高优先级），而 BFS 使用队列（即新项目具有最低优先级）。

因此，对于使用 DFS 的迷宫，它的工作方式如下：

1.  初始节点是 S，所以你的初始路径就是 [S]。将 [S] 推入堆栈（[ [S] ]）。
2.  弹出第一项（在本例中为 [S]）。
3.  列出所有可能的节点，您可以从当前节点移动 1 次（在您的情况下，只是 b）。
4.  对于步骤 3 中的每个节点，删除属于当前部分路径的所有节点。这将防止循环。（即对于部分路径 [S, b]，我们可以从 b 到 c 再到 S，但是 S 已经是我们部分路径的一部分，所以返回是没有意义的）
5.  如果步骤 4 中的节点之一是目标节点，请将其添加到您的部分路径以创建完整路径。打印路径。
6.  对于步骤 4 中不是目标节点的每个节点，生成一个新的部分路径并将其推入堆栈（即对于 [S]，我们生成 [S, b] 并将其推入堆栈，现在应该看起来像[ [S, b] ])
7.  重复步骤 2 到 6，直到堆栈为空，这意味着您已经遍历了从起始节点开始的所有可能路径。

注意：在您的示例中，有重复的字母（例如，三个“e”）。对于您的情况，也许制作一个简单的“节点”类，其中包含一个保存字母的变量。这样每个“e”都会有它自己的实例，并且指针将是不同的值，让您可以轻松地将它们区分开来。我不完全了解 C++，但在伪代码中：

```
class Node:
    method Constructor(label):
        myLabel = label
        links = list()

    method addLink(node):
        links.add(node) 
```

您可以读取文件中的每个字符，如果不是“#”，则为该字符创建一个新的 Node 实例并添加所有相邻节点。

编辑：在过去的 3 年里，我一直是一名 Python 开发人员，我有点被宠坏了。看下面的代码。

```
s = "foo"
s == "foo" 
```

在 Python 中，这个断言是正确的。Python 中的 "==" 比较字符串的*内容*。作为一名 Java 开发人员，我忘记了在许多语言中“==”比较字符串的*指针*。这就是为什么在 Java 和 C++ 等许多语言中，断言是错误的，因为字符串指向内存的不同部分。

我的观点是，因为这个断言不正确，你可以放弃创建一个 Node 类而只比较字符（使用 ==，而不是使用 strcmp()！）但是这段代码可能有点难以阅读，必须记录在案。

总的来说，我会使用某种 Node 类，因为它实现起来相当简单，并且代码可读性更高，并且只需要解析一次迷宫！

祝你好运

# dns - apache中具有相同ip和端口的多个域

> ID：10763234
> 
> 赞同：3
> 
> 时间：2012-05-26T02:50:04.460
> 
> 标签：dns, virtualhost, apache, domain-name

我想在我的 VPS 中使用相同的 ip 和端口绑定两个不同的域，这是我的`httpd.conf`：

```
<VirtualHost 106.187.96.123:80>
    DocumentRoot /home/roy/sobuhu
    ServerName aaa.com
</VirtualHost>

<VirtualHost 106.187.96.123:80>
    DocumentRoot /disk1/allen/www
    ServerName bbb.com
</VirtualHost>

<VirtualHost 106.187.96.123:80>
    DocumentRoot /disk1/allen/www
    ServerName www.bbb.com
</VirtualHost> 
```

我可以配置 ServerName 使用 *.bbb.com 之类的语法吗？所以我可以用`DocumentRoot /disk1/allen/www`.

现在我访问 bbs.bbb.com，它会变成`/home/roy/sobuhu`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T13:43:41.610

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /home/roy/sobuhu
    ServerName aaa.com
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /disk1/allen/www
    ServerName bbb.com
    ServerAlias *.bbb.com
</VirtualHost> 
```

# ruby - 扫描成组的连续单词

> ID：10763235
> 
> 赞同：0
> 
> 时间：2012-05-26T02:50:19.493
> 
> 标签：ruby

给定输入：

```
str = "foo bar jim jam. jar jee joon." 
```

我需要用空格分隔的所有 2 词和 3 词短语的输出：

```
[ "foo bar", "bar jim", "jim jam", "jar jee", "jee joon",
  "foo bar jim", "bar jim jam", "jar jee joon" ] 
```

特别注意上面缺少“jam jar”、“jim jam jar”和“jam jar jee”，由于时期。

我不能使用`str.scan(/\w+/).each_cons(2).map{ |a| a.join(' ') }`，因为那将包括`"jam jar"`.

扫描`/\w+ \w+/`产量`["foo bar", "jim jam", "jar jee"]`，特别是缺少“bar jim”和“jee joon”，并突出显示问题。

*实际应用是为搜索引擎生成基于短语的索引。我想找到所有真正连续的单词作为短语，不包括那些用标点符号分隔单词的单词。*

**编辑**：似乎有一种方法可以通过以下变体在正则表达式/扫描中执行此操作：

```
"a b c d".scan(/(?=([abc] [abc]) )[abc]/)
#=> [["a b"], ["b c"]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:12:56.270

```
str = "foo bar jim jam. jar jee joon."
arr = str.split(' ').each_cons(2).map do |a|
  a.join(' ') if a.join(' ').match(/\w+ \w+/)
end
p arr.compact
#=> ["foo bar", "bar jim", "jim jam.", "jar jee", "jee joon."] 
```

EDIT: It appears you've changed your question to ask for 3-word phrases as well. ಠ_ಠ</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T03:50:31.323

我相信这可以完成工作，尽管它假设唯一的标点符号是句号：

```
str.split(".").map do |s|
  pairs_and_triples = []
  s.split.each_cons(2){ |*words| pairs_and_triples << words.join(" ") }
  s.split.each_cons(3){ |*words| pairs_and_triples << words.join(" ")}
  pairs_and_triples
end.flatten 
```

**编辑**或少一点重复：

```
str.split(".").map do |s|
  [2,3].map do |i|
    s.split.each_cons(i).map{ |*words| words.join(" ") }
  end.flatten
end.flatten 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:31:42.783

我最终得到的稳健、高效的解决方案是@muistooshort 建议并由@ChrisRice 勾勒出来的：

1.  在句子边界上拆分
2.  扫描单词（忽略逗号等无趣的标点符号）
3.  用于`each_cons`处理该数组的变化

在代码中：

```
max_words_per_phrase = 5
str = "foo bar, jim jam. jar: jee joon."

phrases = str.split(/[.!?]+/).flat_map do |sentence|
  words = sentence.scan(/\w+/)
  2.upto(max_words_per_phrase).flat_map do |i|
    words.each_cons(i).map{ |a| a.join(' ') }
  end
end

p phrases
#=> ["foo bar", "bar jim", "jim jam", "foo bar jim", "bar jim jam",
#=>  "foo bar jim jam", "jar jee", "jee joon", "jar jee joon"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-20T05:46:01.440

删除标点符号后：

```
str = "foo bar jim jam jar jee joon" 
```

正如您在问题中建议的那样，可以使用积极的前瞻：

```
r2 = /(\w+)(?=(\s+\w+))/
r3 = /(\w+)(?=(\s+\w+)(\s+\w+))/
str.scan(r2).concat(str.scan(r3)).map(&:join)
  #=> ["foo bar", "bar jim", "jim jam", "jam jar", "jar jee", "jee joon",
  #    "foo bar jim", "bar jim jam", "jim jam jar", "jam jar jee", "jar jee joon"] 
```

# delphi - 获取程序可执行文件的名称（如在 paramstr(0) 中），但在 Delphi 7 中将其作为 Unicode 字符串获取？

> ID：10763243
> 
> 赞同：2
> 
> 时间：2012-05-26T02:51:59.467
> 
> 标签：delphi, unicode, delphi-7

我想将文件从 selflocation 复制到另一个位置，如下所示：

```
var
NewFile        : WideString;
MyOwnLocation  : WideString;
begin
NewFile   := 'C:\mycopy.exe';
// CopyFileW (PWideChar(paramstr(0)), PWideChar(NewFile), false); // ===> doesn't work
MyOwnLocation := paramstr(0);
CopyFileW  (PWideChar(MyOwnLocation), PWideChar(NewFile), false); // ===> works but not sure if Unicode supported...    
end; 
```

当我将 paramstr(0) 复制到 WideString 时它可以工作，但我仍然不确定 paramstr(0) 是否已经是 UNICODE。是否有一个 WindowsAPI 可以在宽字符串中返回我的文件的当前位置？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:29:31.350

直接调用`CopyFileW`with`ParamStr(0)`不起作用，因为在 Delphi 7 中`ParamStr(0)`返回`AnsiString`（默认类型为`string`），因此它与预期的第一个参数类型（ ）不匹配`PWideChar`。

做到这一点的唯一方法就是您的方式 - 首先将 的内容分配`ParamStr(0)`给一个`WideString`变量，然后将其用作`CopyFileW`.

当使用非 Unicode API (`CopyFileA`时，Delphi 7 的`Windows`单位映射`CopyFile`到 Windows 时，Windows 会透明地在 Unicode 和 ANSI 之间进行大多数转换，而无需您付出任何努力，因此您应该改用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T10:23:28.883

当然。您可以使用内部使用`GetModuleFileNameW`的 api 的 unicode 版本：`ParamStr(0)`

```
var
  NewFile: WideString;
  MyOwnLocation: WideString;
  Len: DWORD;
begin
  NewFile := 'C:\mycopy.exe';
  SetLength(MyOwnLocation, 260);
  Len := GetModuleFileNameW(0, PWideChar(MyOwnLocation), Length(MyOwnLocation));
  Win32Check(Bool(Len));
  if GetLastError <> ERROR_INSUFFICIENT_BUFFER then begin
    SetLength(MyOwnLocation, Len);
    CopyFileW (PWideChar(MyOwnLocation), PWideChar(NewFile), false);
  end else
    // handle fail due to insufficient buffer 
```

# java - JaxRS 从服务器创建并返回 zip 文件

> ID：10763244
> 
> 赞同：4
> 
> 时间：2012-05-26T02:52:08.220
> 
> 标签：java, jax-rs

我想使用 JaxRS 从我的服务器创建并返回一个 zip 文件。我不认为我想在服务器上创建一个实际的文件，如果可能的话，我想动态创建 zip 并将其传递回客户端。如果我即时创建一个巨大的 zip 文件，如果 zip 文件中有太多文件，我会耗尽内存吗？

我也不确定最有效的方法。这就是我的想法，但是当涉及到 java 中的输入/输出时，我非常生疏。

```
public Response getFiles() {

// These are the files to include in the ZIP file       
String[] filenames = // ... bunch of filenames

byte[] buf = new byte[1024];

try {
   // Create the ZIP file
   ByteArrayOutputStream baos= new ByteArrayOutputStream();
   ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(baos));

   // Compress the files
   for (String filename : filenames) {
       FileInputStream in = new FileInputStream(filename);

       // Add ZIP entry to output stream.
       out.putNextEntry(new ZipEntry(filename));

       // Transfer bytes from the file to the ZIP file
       int len;
       while ((len = in.read(buf)) > 0) {
         out.write(buf, 0, len);
       }
       // Complete the entry
       out.closeEntry();
       in.close();
   }

   // Complete the ZIP file
   out.close();

   ResponseBuilder response = Response.ok(out);  // Not a 100% sure this will work
   response.type(MediaType.APPLICATION_OCTET_STREAM);
   response.header("Content-Disposition", "attachment; filename=\"files.zip\"");
   return response.build();

} catch (IOException e) {       
}

} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T07:28:53.410

有两种选择：

1- 在临时目录中创建 ZIP，然后转储到客户端。

2-在创建它们时，使用响应中的 OutputStream 将 zip 直接发送到客户端。

但永远不要使用内存来创建巨大的 ZIP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-27T13:11:45.760

在将 ZIP 文件提供给客户端之前，无需从内存中的第一个字节到最后一个字节创建 ZIP 文件。另外，也不需要提前在 temp 目录中创建这样的文件（特别是因为 IO 可能真的很慢）。

关键是开始流式传输“ZIP 响应”并在飞行中生成内容。

假设我们有一个`aMethodReturningStream()`，它返回一个[Stream](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html)，我们希望将每个元素转换为一个存储在 ZIP 文件中的文件。而且我们不想将每个元素的字节一直存储在任何中间表示形式中，例如集合或数组。

那么这样的伪代码可能会有所帮助：

```
@GET
@Produces("application/zip")
public Response generateZipOnTheFly() {
    StreamingOutput output = strOut -> {
        try (ZipOutputStream zout = new ZipOutputStream(strOut)) {
            aMethodReturningStream().forEach(singleStreamElement -> {
                try {
                    ZipEntry zipEntry = new ZipEntry(createFileName(singleStreamElement));
                    FileTime fileTime = FileTime.from(singleStreamElement.getCreationTime());
                    zipEntry.setCreationTime(fileTime);
                    zipEntry.setLastModifiedTime(fileTime);
                    zout.putNextEntry(zipEntry);
                    zout.write(singleStreamElement.getBytes());
                    zout.flush();
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            });
        }
    };
    return Response.ok(output)
                   .header("Content-Disposition", "attachment; filename=\"generated.zip\"")
                   .build();
} 
```

这个概念依赖于将 a 传递`StreamingOutput`给`Response`构建器。`StreamingOutput`不是在发送响应之前生成的完整响应/实体/主体，而是用于动态生成字节流的配方（*此处*包含在`ZipOutputStream`中）。如果您对此不确定，则可以在下一个设置断点`flush()`并使用 eg 观察下载进度`wget`。这里要记住的关键是，这里的流不是预计算或预取项目的“包装器”。它*必须*是动态的，例如包装一个 DB 游标或类似的东西。此外，它可以被任何流数据取代。这就是为什么它不能是一个`foreach`遍历`Element[] elems`数组的循环（每个`Element`都有“内部”的所有字节），

```
for(Element elem: elems) 
```

如果您想避免在流式传输 ZIP*之前一次将所有项目读入堆中。*

（请注意，这是一个伪代码，您可能还想添加更好的处理并完善其他内容。）

# python - Python核心应用

> ID：10763245
> 
> 赞同：2
> 
> 时间：2012-05-26T02:52:23.647
> 
> 标签：python, background, exec

我是 Python 新手，我正在编写一个包含一些定时例程的脚本。我目前的方法是实例化一个包含这些定时器的类（来自：threading.Timer），但我不希望脚本在函数结束时返回：

```
import mytimer

timer = mytimer() 
```

假设我有一个像那样的简单脚本。它所做的只是实例化一个执行一系列定时活动的 mytimer 对象。

为了使应用程序不退出，我可以像这样使用 Qt：

```
from PyQt4.QtCore import QCoreApplication
import mytimer
import sys

def main():
    app = QCoreApplication(sys.argv)
    timer = mytimer()

    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

这样，*sys.exit()*调用不会立即返回，计时器只会在后台“永远”做它的事情。

虽然这是我以前使用过的解决方案，但仅仅为此使用 Qt 对我来说并不合适。所以我的问题是，有没有办法使用标准 Python 来完成这个任务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:17:53.440

Create a function in your script which tests a [select or poll object](http://docs.python.org/library/select.html#poll-objects) to terminate a loop. Check out `serve_forever` in [`SocketServer.py`](http://svn.python.org/projects/python/branches/release25-maint/Lib/SocketServer.py) from the standard library as an example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:05:29.227

谷歌搜索“python timer”发现：

[http://docs.python.org/library/sched.html](http://docs.python.org/library/sched.html)

[http://docs.python.org/release/2.5.2/lib/timer-objects.html](http://docs.python.org/release/2.5.2/lib/timer-objects.html)

该`sched`模块似乎正是您所需要的。

例子：

```
>>> import sched, time
>>> s = sched.scheduler(time.time, time.sleep)
>>> def print_time(): print "From print_time", time.time()
...
>>> def print_some_times():
...     print time.time()
...     s.enter(5, 1, print_time, ())
...     s.enter(10, 1, print_time, ())
...     s.run()
...     print time.time()
...
>>> print_some_times()
930343690.257
From print_time 930343695.274
From print_time 930343700.273
930343700.276 
```

一旦你建立了事情发生的时间队列，你只需`.run()`在你的实例上调用该方法`sched`，它会自动等到队列被清空，然后才会完成。因此，您可以将`s.run()`其作为脚本中的最后一件事，并且仅当定时任务全部完成时它才会自动退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:27:43.783

```
import mytimer
import sys

from threading import Lock

lock = Lock()
lock.acquire() # put lock into locked state

def main():
    timer = mytimer()

    lock.acquire()  # blocks until someone calls lock.release()

if __name__ == '__main__':
    main() 
```

如果你想要一个干净的出口，你可以在某个时候`mytimer()`打电话。`lock.release()`

# python - 从字符串中提取电子邮件而不是从字符串中提取整行

> ID：10763249
> 
> 赞同：2
> 
> 时间：2012-05-26T02:53:51.257
> 
> 标签：python, regex

我正在尝试使用正则表达式从一串文本中获取电子邮件地址。

**如何让我的简单代码仅提取电子邮件地址而不是整行？**

```
demo_text = """hsds hjdsjd ksdkj

Reason: 550 abc@gmail.com... No such user

sdhjsdjh
"""
# the following code extracts the whole line "Reason: 550 abc@gmail.com... No such user"
# how do I just extract "abc@gmail.com"?
email = re.search("Reason: 550 (.+)... No such user", demo_text).group(0) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T02:55:48.577

`.group(0)`返回整个字符串。你想要`.group(1)`：

```
email = re.search("Reason: 550 (.*?)... No such user", demo_text).group(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T02:55:46.017

取而代之的是检索组 1。

```
....group(1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T02:56:53.843

更通用的正则表达式解决方案是：

```
r"[\w.]+@[\w.]+" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-26T07:21:13.430

只需使用：

```
email_id = re.search(r'([\w.])+@([\w.])+', demo_text)
email_id.group(1) # the username part
email_id.group(2) # the host part 
```

# mysql - 为数据库 INSERT 输出 AWK 变量，转义单引号和反斜杠

> ID：10763254
> 
> 赞同：0
> 
> 时间：2012-05-26T02:55:11.507
> 
> 标签：mysql, awk, quotes

因此，我正在运行一个派生名称的目录以插入 MySQL 数据库。一些名称有一个单引号 (')。我正在使用 awk

```
ls *| awk -F=: '{print "INSERT into citation_sources (source_name) VALUES (" "'\''" $1 "'\''" ");"}' 
```

虽然我可以让输出从 awk 正确显示。例如：

```
INSERT into citation_sources (source_name) VALUES ('Black's Law Dictionary, 2nd Edition (Black 1891)); 
```

当需要将数据插入 MySQL 时，我想避免必须进行第二次数据编辑才能正确转义单引号`\'`。

我在我的 awk 中缺少什么来为我做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:37:55.673

在它进入 awk 之前解决这个问题是最简单的。如果您没有`ls`Ancient ，只需将 -Q （引号）添加到参数列表中：

```
$ ls -Q * | awk -F=: '{print "INSERT into citation_sources (source_name) VALUES (" "'\''" $1 "'\''" ");"}'
INSERT into citation_sources (source_name) VALUES ('"Black's Law Dictionary, 2nd Edition (Black 1891)"'); 
```

正如@shellter 所说，这是您应该考虑如何真正引用这些值的时候。

或者，首先通过 sed 或类似方法将其管道化，以获取反斜杠（例如`sed "s,',\\\\',g"`）。

通过 awk 转义来解决它比人们想象的要棘手，因为 bash 会吃掉引号并转义。因此，产生 '\' 是最具挑战性的部分，我最终生成了 out-of-awk shell 以使其生存：

```
$ ls * | awk -F=: "{print \"INSERT into citation_sources (source_name) VALUES ('\" gensub(\"'\",\""$'\\\\'"\\\'\",\"global\",\$1) \"');\"}"
INSERT into citation_sources (source_name) VALUES ('Black\'s Law Dictionary, 2nd Edition (Black 1891)'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T08:18:25.043

在 awk 脚本的 BEGIN{} 部分中有这个。

```
echo "Black's Law D'icti'onary"|awk '{
ESC=sprintf("%c",0x5c);
SQ=sprintf("%c",0x27);
DQ=sprintf("%c",0x22);
# then perfrom a 
gsub(SQ,ESC""SQ);
# and such. same goes for other stuff.
}' 
```

很方便:-)

# sql - 带有日期的 Google Visualization API Web 查询 where 子句

> ID：10763258
> 
> 赞同：0
> 
> 时间：2012-05-26T02:55:33.240
> 
> 标签：sql, google-visualization, google-data-api

我有一个谷歌电子表格，里面有这样的数据：

```
11/3/2000   0.1 0.1673
11/3/2000   0.15    0.1734
11/3/2000   0.2 0.1786
11/3/2000   0.25    0.1834
11/3/2000   0.3 0.1879
11/3/2000   0.35    0.1924
.... 
```

我正在使用谷歌可视化 API 来绘制它。我想写一个这样的查询：

```
var queryStr = "SELECT A,C WHERE B=" + delta + " AND A>='2005/04/04' ORDER BY A"; 
```

基本上我想在电子表格中选择一个日期范围。上面的查询没有返回任何结果，但是文件中有满足查询的数据。我尝试改变它和日期格式，但没有结果。我如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T12:58:06.137

这就是我想要的：

```
var queryStr = "SELECT A,C WHERE B=" + delta + " AND date '2005-04-04' < A ORDER BY A"; 
```

Google 的大量文档只有一个示例，但我找到了。

# c# - 从 JSON 获取到列表框绑定的图像 URL

> ID：10763262
> 
> 赞同：0
> 
> 时间：2012-05-26T02:56:32.973
> 
> 标签：c#, json, windows-phone-7, data-binding

我有我的 JSON 请求，它可以获取 URI，甚至可以将项目绑定，但不能绑定图像。

XAML：

```
 <Image delay:LowProfileImageLoader.UriSource="{Binding ImageUrl}" Width="120" Height="120" />
 <TextBlock Text="{Binding DisplayName}" FontSize="30" TextWrapping="Wrap" TextTrimming="WordEllipsis" /> 
```

现在，一旦我得到 Feed，我就会这样运行它：

```
 using (var stream = new MemoryStream(Encoding.Unicode.GetBytes(e.Result)))
        {
            DataContractJsonSerializer dataContractJsonSerializer = new DataContractJsonSerializer(typeof(ProviderChannels.RootObject));
            var providerResult = (ProviderChannels.RootObject)dataContractJsonSerializer.ReadObject(stream);

            if (providerResult.ServiceDetailsResult != null)
            {

                ProviderChannels.ItemsSource = providerResult.ServiceResult.Lineup.Channels;

            } 
```

问题是，我无法获取来自以下的 ImageUrl 的图像：

```
 public class Channeli
    {
        public string DisplayName { get; set; }
        public List<object> ChannelImages { get; set; }

    } 
```

提要/ChannelImages 这样做：

```
 "ChannelImages": [
                    {
                        "ImageUrl": "http://the-url-generated.com/file.png",
                        "ImageUseType": null,
                    } 
```

ChannelImages 报告了一个 ImageUrl 和一堆其他数据，但我严格需要 ImageUrl，但即使在 XAML 中，如果我放置 ImageUrl 它也不起作用，但我如何使用 ChannelImages 来获取 ImageUrl？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:51:37.453

您应该将字符串作为 ImageURL 转发，而不是像现在这样的对象列表。

为了让您现在拥有的这段代码一切正常，您的*Channels*类应该如下所示：

```
 public class Channels
 {
     public string DisplayName { get; set; }
     public string ImageUrl { get; set; } 
 } 
```

# html - 链接到页面上没有 ID 或名称的位置

> ID：10763267
> 
> 赞同：3
> 
> 时间：2012-05-26T02:57:01.833
> 
> 标签：html, hyperlink, href

我正在寻找链接到具有大量内容的第 3 方网站上的页面，但希望读者向下半途并从那里阅读。是的，我可以明确告诉他们这样做，但有时并不总是理想的。如果我在一般位置找不到任何具有 name 或 id 属性的元素，还有其他方法吗？谢谢！

# iphone - 在 iOS 和 Cocoa Touch 上，是否有用于 iPad / iPhone 滑出面板的控件？

> ID：10763271
> 
> 赞同：1
> 
> 时间：2012-05-26T02:57:38.257
> 
> 标签：iphone, ios, cocoa-touch, uiview, uikit

这可能是一个常见的 UI，当我们点击一​​个`i`图标时，一个滑动面板从屏幕底部或右侧滑出，有点像愤怒的小鸟从左侧滑出面板。

Cocoa Touch 是否已经内置了类似的东西或其他可以轻松转换以用于此类用途的控件？否则，是否有一些替代品可能适合此目的并在 iPad / iPhone 上普遍推荐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:01:14.880

基本上，它只是在点击按钮（您的图标）时显示视图（某些面板）的问题，使用动画从侧面将其滑入。请参阅：[动画中的 SubView 幻灯片，iphone](https://stackoverflow.com/questions/7343915/subview-slide-in-animation-iphone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T03:22:01.960

我有一个非常具体的用例要解决，而 ViewDeck 是完美的选择。该菜单模仿您将在 Facebook 或 Path 中看到的菜单。它的动画流畅并具有出色的手势交互：

[https://github.com/Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T14:23:20.173

我一直在使用

[MMDrawerController](https://github.com/mutualmobile/MMDrawerController)

我为一家国家医疗保健公司构建的 iPad 应用程序中的侧抽屉功能非常成功

使用 3rd 方组件处理 Cocoapods/config 通常有点棘手，还需要记住，随着新的 iOS 版本的出现，该组件是否会继续受到支持，但通常这个组件在 iOS8 和 I 中都能很好地工作。推荐它。

# html - CSS 谷歌广告定位

> ID：10763273
> 
> 赞同：0
> 
> 时间：2012-05-26T02:58:23.067
> 
> 标签：html, css, adsense

我在[www.FreeMinecraftHost.com上展示我的 Google 广告时遇到问题](http://www.FreeMinecraftHost.com)

当我使用此代码时：

```
<div class="top-bar">
        <div class="logo">
            <a href=""><img src="FMHLogo.png" alt="Logo" border=0></a>
            <div style="top:-25;"></div>
            <script type="text/javascript">
                <!--
                google_ad_client ="ca-pub-3955111504945324";
                /* Banner */
                google_ad_slot = "6834015980";
                google_ad_width = 468;
                google_ad_height = 60;
                //-->
            </script>
            <script type="text/javascript"
            src="https://pagead2.googlesyndication.com/pagead/show_ads.js"></script></div>
        </div>

    </div> 
```

它打破了顶栏 div，广告在徽标下方，如果我取出

```
<div style="top:-25;"> 
```

然后广告在徽标旁边，但固定在顶栏 div 的底部，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:12:46.077

将广告放在自己的 div 中并更改其`z-index`. 您可以将其设置为 1000 之类的高值，或者以编程方式设置它，以防您的页面在未来出现大量元素。例如：

```
div.google
{
    z-index: 1000; /*or do this programmatically with jQuery*/
    /*Other properties if required*/
} 
```

# javascript - 仅使用 Array.push 时数组中的单元化变量？

> ID：10763274
> 
> 赞同：4
> 
> 时间：2012-05-26T02:59:05.590
> 
> 标签：javascript

我遇到了一个相当有趣的问题。下面的代码生成一个数组，在记录时会给出 value `[undefined × 1]`。根据[这个答案](https://stackoverflow.com/a/10683811/339852)，这意味着数组具有未初始化的索引——在这种情况下，只有一个。但是，由于我只是`array.push()`用来避免这种问题，我有点迷路了。据我所知，仅分配一个索引至少比其他初始化索引大一个索引可能会导致问题。无论如何，这是代码：

```
function Thing(params) {
    var that = this;

    this.OtherObject = function OtherObject(param) {
        this.param = param;
    }

    this.Foo = function Foo() {
        this.bar = [];

        this.add = function(item) {
            if (this.bar.length != 0) {
                for (var i = 0, len = this.bar.length; i < len; i++) {
                    if (this.bar[i].param <= item.param) {
                        this.bar.splice(i, 0, item);
                    }
                }
            } else {
                this.bar[0] = item;
                console.log(this.bar);
            }
        }

        this.pop = function() {
            return this.bar.pop();
        }

        this.length = function() {
            return this.bar.length;
        }
    }

    this.someFunc = function() {
        var myThing = new that.Foo();
        myThing.add(new that.OtherObject(3));

        while (myThing.length() > 0) {
            var someVar = myThing.pop();
        }
    }
}

var myThing = new Thing({
    myParam: "someValue"
});

myThing.someFunc();
​ 
```

我创建了一个测试用例来查看是否可以缩小问题范围，但最终我重新输入了 95% 的代码，直到我再次遇到问题，这似乎与我使用`myThing.pop()`. [你可以在这里](http://jsfiddle.net/cbYqG/3/)找到一个演示问题的小提琴。

所以......关于什么可能导致这种情况的任何想法？这实际上是我嵌套对象的方式的问题吗？（我按照我的上一个问题的[答案](https://stackoverflow.com/a/10051156/339852)中给我的模式做的）。

如果您想知道我可能在这里尝试做什么，我将外部对象视为一种命名空间，我这样做是为了避免混淆全局命名空间（这最终将成为一个寻路库，如果我在这里一起行动）。该`Foo`对象是一种有序列表，这样我可以通过堆栈获得最近的节点（具有最低`param`属性的节点） 。`pop()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:01:46.027

`console.log`谷歌浏览器的功能发生了一些非常奇怪的事情。其他浏览器的行为似乎与您预期的一样。这是我见过的最奇怪的事情之一：如果你在调用`alert`的 lne 之后添加一个调用`console.log`，控制台中会有不同的输出。

```
console.log(this.bar);
alert(this.bar);

// [> OtherObject] 
```

如您所见，如果删除`alert`，控制台将输出

```
// [undefined × 1] 
```

`alert`这类事情要么是由于某种竞争条件，要么是由于函数引起的一些副作用。这是我对幕后发生的事情的理论：

*   该`console.log`函数实际上不会在控制台中记录值，直到代码暂停，然后它会记录所有排队的消息。队列包含对要记录的消息的引用。
*   `this.bar`弹出数组时，其中的第一项被销毁。记录器，除非有一些中断，否则会在引用的值被销毁后显示消息。因此，它显示`[undefined × 1]`
*   调用`alert`会导致代码暂停，以便控制台可以在删除引用的值之前记录消息。

I'm still not completely sure if this is really what's happening, but it *seems* to be somwhat reasonable. I'll do some more testing to check if my theory is correct.

# javascript - 单击图标时右侧的通知

> ID：10763275
> 
> 赞同：0
> 
> 时间：2012-05-26T02:59:13.940
> 
> 标签：javascript, jquery, css, jquery-ui

我正在尝试实现这一点，如第一张图片所示。有这个小图标代表图标的数量：例如。3

![在点击图标之前](../Images/24abf9d9e22f21b93862f2b0d62d1ee3.png)

然后，一旦用户单击该图标，我需要显示如下消息：

![一只忙碌的猫](../Images/ed7c0b32b004101a4ce226a5a394f0e0.png)

因此，我尝试在[JsFiddle](http://jsfiddle.net/bkvirendra/e75Zx/5/)上做一些实验。但无法弄清楚如何实现它。因为我是前端开发世界的新手。那么任何人都可以请建议我，我该怎么办？

编辑：是否有可用的 Jquery 插件可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:08:21.403

Try this:

[http://jsfiddle.net/DerekL/e75Zx/4/](http://jsfiddle.net/DerekL/e75Zx/4/)

PS: You should use a list (`<ul>`) for menus and nav bars like in this purpose.

# multithreading - Python如何获取线程的值？

> ID：10763278
> 
> 赞同：0
> 
> 时间：2012-05-26T03:00:13.577
> 
> 标签：multithreading, python-3.x

确定在一个线程中使用 os.chdir 更改当前目录是否会更改在调用 os.chdir 之前已经存在的线程的当前目录的程序 我的问题是如何获取活动线程的值？

```
import threading
import time
import os
class MyThread(threading.Thread):
def __init__(self, *args, **kw):
    threading.Thread.__init__(self, *args, **kw)
    self.sleeptime = 2
def run(self):        
    for i in range(self.sleeptime):
        for j in range(500000):
            k = j*j
        print(self.name, "finished pass", i)
    print(self.name, "finished after", self.sleeptime, "seconds")

bgthreads = threading.active_count()
threadOne = os.chdir("V:\\workspace\\Python4_Homework10")
threadTwo = os.chdir("V:\\workspace")
threadThree = os.chdir("V:")
tt = [MyThread(threadOne), MyThread(threadTwo), MyThread(threadThree)]
for t in tt:    
   t.start()

print("Threads started")
while threading.active_count() > bgthreads:
    time.sleep(2)
    print("tick") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:25:01.860

这有点粗糙，但这可能会完成你的工作。

```
#!/usr/bin/env python3

import os
import threading

def threadReporter(i,name):
    if name == 'Thread-changer': # crude, but gets the job done for this
        os.chdir('/tmp')
    print("{0} reports current pwd is: {1}".format(name,os.getcwd()))

if __name__ == '__main__':
    # create pre-chdir and changer Thread
    t_pre = threading.Thread(target=threadReporter, args=(1,'Thread-pre'))
    t_changer = threading.Thread(target=threadReporter, args=(2,'Thread-changer'))

    # start changer thread
    t_changer.start()
    # wait for it to finish
    t_changer.join()

    # start the thread that was created before the os.chdir() call
    t_pre.start()

    # create a thread after the os.chdir call and start it
    t_post = threading.Thread(target=threadReporter, args=(3,'Thread-post'))
    t_post.start() 
```

正如 gps 上面已经指出的那样，当前工作目录是进程全局的，并且对于可能产生/运行的每个线程都不是分开的。因此，上面程序中当前工作目录的报告对于每个运行的线程都是相等的，无论线程是何时创建的。在 os.chdir() 之后，为所有线程设置了新的工作目录。

# ios - 以编程方式绘制带箭头的后退按钮？

> ID：10763279
> 
> 赞同：3
> 
> 时间：2012-05-26T03:00:18.600
> 
> 标签：ios, uinavigationbar, uibarbuttonitem

通常，当您使用 a 时，`UINavigationController`您会得到一个左侧有箭头的后退按钮。问题是我没有使用 UINavigationController 所以这就是我问的原因。无论如何，这是一张图片：

![在此处输入图像描述](../Images/b42da7e81073855f9208c93ce7306fb4.png)

到目前为止，我有一个常规的`UIBarButtonItem`，目前只是正方形，左侧没有那个箭头。

有没有办法制作一个左侧有箭头的按钮并将其添加到我的 UINavigationBar？我也环顾四周，似乎 UIButton 类型 101 没有记录，会导致拒绝。我需要一个可以被接受的解决方案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:06:45.290

你可以给按钮一个背景图片，使它看起来像原生的有角度的按钮：

```
testButton = [[UIButton alloc] initWithFrame:CGRectMake(80, 30, 160, 44)];
[testButton setTitle:@"Test Button" forState:UIControlStateNormal];
UIImage *buttonImage = [[UIImage imageNamed:@"angledButton"]  resizableImageWithCapInsets:UIEdgeInsetsMake(0, 16, 0, 16)];
[testButton addTarget:self action:@selector(buttonPressed:) forControlEvents: UIControlEventTouchUpInside];
[testButton setBackgroundImage:buttonImage forState:UIControlStateNormal]; 
```

您可能需要对此进行调整，但我相信这是正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T09:17:05.563

顺便提一句。如果您想创建一个与导航控制器中的后退按钮完全相同的按钮，请查看此代码..

```
@implementation UIButton (CustomBackButton)

- (UIButton*)configureForBackButtonWithTitle:(NSString*)title target:(id)target action:(SEL)action
{
// Make the text 6 pixels from above, 8 pixels from the right, and 12 pixels from the left of button's frame.
CGFloat padTRL[3] = {6, 8, 12};

// Text must be put in its own UIView, s.t. it can be positioned to mimic system buttons
UILabel* label = [[UILabel alloc] init];
label.backgroundColor = [UIColor clearColor];
label.font = [UIFont boldSystemFontOfSize:12];
label.textColor = [UIColor whiteColor];
label.shadowColor = [UIColor darkGrayColor];
label.shadowOffset = CGSizeMake(0, -1);
label.text = title;
[label sizeToFit];

UIImage* norm = [[UIImage imageNamed:@"backBarButton.png"] stretchableImageWithLeftCapWidth:13 topCapHeight:0];
UIImage* click = [[UIImage imageNamed:@"backBarButtonHover.png"] stretchableImageWithLeftCapWidth:13 topCapHeight:0];
[self setBackgroundImage:norm forState:UIControlStateNormal];
[self setBackgroundImage:click forState:UIControlStateHighlighted];
[self addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];

// Calculate dimensionss
CGSize labelSize = label.frame.size;
CGFloat controlWidth = labelSize.width+padTRL[1]+padTRL[2];
controlWidth = controlWidth>=norm.size.width?controlWidth:norm.size.width;

// Assemble and size the views
self.frame = CGRectMake(0, 0, controlWidth, 30);
[self addSubview:label];
label.frame = CGRectMake(padTRL[2], padTRL[0], labelSize.width, labelSize.height);
return self
}
@end 
```

而且您不需要使用整个图像。只是尖锐的部分会做..它会根据标题的长度拉伸图像..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T14:05:28.630

![在此处输入图像描述](../Images/0ea974185fc09b388dd1ca06f4da78e5.png)

首先，您必须找到后退按钮的图像。我使用了一个名为[Extractor](https://github.com/0xced/iOS-Artwork-Extractor)的不错的应用程序，它可以从 iPhone 中提取所有图形。在**iOS7 中**，我设法检索到名为的图像`UINavigationBarBackIndicatorDefault`，它是黑色的，因为我需要红色调，所以我使用 Gimp 将颜色更改为红色。

然后我创建了一个视图，其中包含一个带有该箭头的 imageView、一个带有自定义文本的标签，并且在视图顶部我有一个带有操作的按钮。然后我添加了一个简单的动画（淡入淡出和平移）。

以下代码模拟后退按钮的行为，包括动画。

```
-(void)viewWillAppear:(BOOL)animated{
        UIImageView *imageView=[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"UINavigationBarBackIndicatorDefault"]];
        [imageView setTintColor:[UIColor redColor]];
        UILabel *label=[[UILabel alloc] init];
        [label setTextColor:[UIColor redColor]];
        [label setText:@"Blog"];
        [label sizeToFit];

        int space=6;
        label.frame=CGRectMake(imageView.frame.origin.x+imageView.frame.size.width+space, label.frame.origin.y, label.frame.size.width, label.frame.size.height);
        UIView *view=[[UIView alloc] initWithFrame:CGRectMake(0, 0, label.frame.size.width+imageView.frame.size.width+space, imageView.frame.size.height)];

        view.bounds=CGRectMake(view.bounds.origin.x+8, view.bounds.origin.y-1, view.bounds.size.width, view.bounds.size.height);
        [view addSubview:imageView];
        [view addSubview:label];

        UIButton *button=[[UIButton alloc] initWithFrame:view.frame];
        [button addTarget:self action:@selector(handleBack:) forControlEvents:UIControlEventTouchUpInside];
        [view addSubview:button];

        [UIView animateWithDuration:0.33 delay:0 options:UIViewAnimationOptionCurveLinear animations:^{
            label.alpha = 0.0;
            CGRect orig=label.frame;
            label.frame=CGRectMake(label.frame.origin.x+25, label.frame.origin.y, label.frame.size.width, label.frame.size.height);
            label.alpha = 1.0;
            label.frame=orig;
        } completion:nil];

        UIBarButtonItem *backButton =[[UIBarButtonItem alloc] initWithCustomView:view];
}

- (void) handleBack:(id)sender{
} 
```

# php - 添加 AJAX 时分页不起作用

> ID：10763280
> 
> 赞同：0
> 
> 时间：2012-05-26T03:00:20.850
> 
> 标签：php, jquery, ajax

我有一个基于 PHP 的分页系统，它工作正常，我使用 GET 参数来传递页码：

```
 <?php 
$db = mysql_select_db($database,$connection) or trigger_error("SQL", E_USER_ERROR);
$sql1 = "SELECT COUNT(*) FROM $table";
$result1 = mysql_query($sql1, $connection) or trigger_error("SQL", E_USER_ERROR);
$row = mysql_fetch_row($result1);
$numrows = $row[0];
$rowsperpage = 2;
$totalpages = ceil($numrows / $rowsperpage);
if (isset($_GET['page']) && is_numeric($_GET['page'])) {
   $currentpage = (int) $_GET['page'];
} else {
   $currentpage = 1;
}
if ($currentpage > $totalpages) {
   $currentpage = $totalpages;
}
if ($currentpage < 1) {
   $currentpage = 1;
}
$offset = ($currentpage - 1) * $rowsperpage;
$sql2 = "SELECT * FROM internet_security ORDER BY id DESC LIMIT $offset, $rowsperpage";
$result2 = mysql_query($sql2, $connection) or trigger_error("SQL", E_USER_ERROR);
$list = mysql_fetch_assoc($result2);
$startrow = ($currentpage-1) * $rowsperpage;

?> 
```

我显示链接的方式是这样的：

```
 h3>Results <?php echo ($startrow+1) ?> - <?php echo min($startrow + $rowsperpage, $row) ?> of <?php echo ($totalpages *$rowsperpage) ?></h3>
<ul><?php 
if ($currentpage!=$totalpages) {
echo " <li><a href='{$_SERVER['PHP_SELF']}?page=$totalpages'>$totalpages</a></li> ";
$nextpage = $currentpage + 1;
echo " <li><a href='{$_SERVER['PHP_SELF']}?page=$nextpage'>Next&raquo;&raquo;</a></li> ";
}?></ul>

<ul><?php    
if($currentpage<$totalpages){
for ($x = ($currentpage - 3); $x < (($currentpage + 3) + 1); $x++) {
if (($x > 0) && ($x <= $totalpages)) {
if ($x == $currentpage) {
echo " <li id='pcurrent'><a href='{$_SERVER['PHP_SELF']}?page=$x'>$x</a></li>";
} else {
echo " <li><a href='{$_SERVER['PHP_SELF']}?page=$x'>$x</a></li> ";
}}}  
}

?> </ul>

<ul><?php
if ($currentpage > 1){
$prevpage = $currentpage - 1;
echo " <li><a href='{$_SERVER['PHP_SELF']}?page=$prevpage'>&laquo;&laquo;Prev</a></li> ";
echo "<li><a href='{$_SERVER['PHP_SELF']}?page=1'>1</a></li> ";
}?></ul> 
```

这个分页工作正常。

**我的问题是**我现在想向它添加 AJAX 功能，以便我应该在分页中同时拥有这两种功能，即如果 JavaScript 被关闭，分页将在 PHP 中工作。

我试过这个：

```
$(function() {
    $('#pagination ul li a, .temp').click(function(ev) {
        ev.preventDefault();
        $('#temporary').load($(this).attr('href')).modal();
    });
}); 
```

但是现在，分页不起作用，单击分页链接时什么也没有发生。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T03:12:41.027

Ajax will NOT work if JavaScript is not supported by the browser. Ajax stands for Asynchronous JavaScript and XML.

So now do you still want to support Ajax ?

If yes then confirm the following,

1.  Is "temporary the container which has the listings and pagination ?"

2.  What result the given url($(this).attr('href')) is sending ? It should return proper HTml, not having Document and body tags etc.

3.  Have you checked your JavaScript error console and is there any error there ?

Instead of load , you can use ajax method which provides a function for handling error from server, you can see if server is returning any error.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T03:33:12.797

似乎对您的要求有些困惑。据我所知，您希望同时拥有 PHP 分页（禁用 js 时）和 AJAX 分页以利用动态加载（启用 js 时）。

为此，您应该执行以下操作：

1.  将生成列表的代码放入函数中，例如`generateList($page)`
2.  在您的 php 页面中，将上述创建的函数的结果作为您的初始视图输出。
3.  创建一个 ajax_actions.php 页面，该页面可以调用您在步骤 1 中创建的函数并返回结果。
4.  使用链接单击处理程序调用（通过 AJAX）ajax_actions.php 页面并显示结果。您可能需要从链接单击中解析页面 id 并将其传递。

如果你做这些事情，当 JS 被禁用时，PHP 将处理分页。启用 JS 后，您将执行 ev.preventDefault() 并使用 AJAX 显示内容。

希望有帮助。

# java - 如何将 JVM 汇编代码编译成字节码？

> ID：10763290
> 
> 赞同：5
> 
> 时间：2012-05-26T03:05:30.673
> 
> 标签：java, assembly, jvm, bytecode, java-bytecode-asm

如果我跑去`javap -c ASM.class > ASM.java`获取汇编代码，我将如何将它重新编译回 JVM 字节码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T04:21:05.783

[Jasmin](http://jasmin.sourceforge.net/)是 Java 字节码的汇编器。但是，我不知道它是否可以应付 javap 的输出。

* * *

**更新**

Jasmin 文档说明了有关`javap`输出的内容：

> Sun 确实提供了一个 javap 程序，它可以在类文件中打印汇编代码。但是，javap 输出不适合用作汇编程序格式。它被设计为供人阅读，而不是由汇编程序解析，因此它有许多遗漏和缺点。

在此基础上，我想说几乎没有机会找到将`javap`输出作为输入的汇编程序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T01:21:08.527

你可以尝试通过 ASM 来做，它可以在运行时生成类或修改类

# java - 如果尝试在具有相同路径的 RestHelper 类中添加 JsonPut 和 JsonPost 方法，则无法编译代码

> ID：10763291
> 
> 赞同：0
> 
> 时间：2012-05-26T03:05:36.087
> 
> 标签：java, scala, lift

我正在尝试在 RestHelper 类中添加 JsonPut & JsontPost 方法，其路径相同，如下所示：

```
object MembershipAPI extends RestHelper with LogHelper {
  serve {
    case JsonPost("api" :: "v1" :: "group_memberships" :: group_id :: user_id :: Nil, request) =>
      () => Full(GroupMembershipController.Join(group_id, user_id, request))
    case JsonPut("api" :: "v1" :: "group_memberships" :: group_id :: user_id :: Nil, request) =>
      () => Full(GroupMembershipController.Join(group_id, user_id, request))
    case JsonDelete("api" :: "v1" :: "group_memberships" :: group_id :: user_id :: Nil, request) =>
      () => Full(GroupMembershipController.Leave(group_id, user_id, request))
  }
} 
```

当运行 sbt compile 我得到这个错误：

```
java.lang.Error: ch.epfl.lamp.fjbg.JCode$OffsetTooBigException: offset too big to fit in 16 bits: 51511
    at ch.epfl.lamp.fjbg.JFieldOrMethod.writeTo(JFieldOrMethod.java:130)
    at ch.epfl.lamp.fjbg.JClass.writeTo(JClass.java:358)
    at scala.tools.nsc.backend.jvm.BytecodeWriters$ClassBytecodeWriter$class.writeClass(BytecodeWriters.scala:87)
    at scala.tools.nsc.backend.jvm.GenJVM$JvmPhase$$anon$2.writeClass(GenJVM.scala:82)
    at scala.tools.nsc.backend.jvm.GenJVM$BytecodeGenerator.emitClass(GenJVM.scala:172)
    at scala.tools.nsc.backend.jvm.GenJVM$BytecodeGenerator.genClass(GenJVM.scala:304)
    at scala.tools.nsc.backend.jvm.GenJVM$JvmPhase$$anonfun$run$4.apply(GenJVM.scala:86)
    at scala.tools.nsc.backend.jvm.GenJVM$JvmPhase$$anonfun$run$4.apply(GenJVM.scala:86)
    at scala.collection.mutable.HashMap$$anon$2$$anonfun$foreach$3.apply(HashMap.scala:102)
    at scala.collection.mutable.HashMap$$anon$2$$anonfun$foreach$3.apply(HashMap.scala:102)
    at scala.collection.Iterator$class.foreach(Iterator.scala:652)
    at scala.collection.mutable.HashTable$$anon$1.foreach(HashTable.scala:157)
    at scala.collection.mutable.HashTable$class.foreachEntry(HashTable.scala:190)
    at scala.collection.mutable.HashMap.foreachEntry(HashMap.scala:43)
    at scala.collection.mutable.HashMap$$anon$2.foreach(HashMap.scala:102)
    at scala.tools.nsc.backend.jvm.GenJVM$JvmPhase.run(GenJVM.scala:86)
    at scala.tools.nsc.Global$Run.compileSources(Global.scala:949)
    at scala.tools.nsc.Global$Run.compile(Global.scala:1034)
    at xsbt.CompilerInterface.run(CompilerInterface.scala:81)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at xsbt.AnalyzingCompiler.call(AnalyzingCompiler.scala:40)
    at xsbt.AnalyzingCompiler.apply(AnalyzingCompiler.scala:18)
    at sbt.Compile.processScala(Compile.scala:76)
    at sbt.CompilerCore$$anonfun$1.apply(Compile.scala:27)
    at sbt.CompilerCore$$anonfun$1.apply(Compile.scala:27)
    at sbt.CompilerCore$$anonfun$process$1$1.apply(Compile.scala:22)
    at sbt.CompilerCore$$anonfun$process$1$1.apply(Compile.scala:22)
    at sbt.CompilerCore$$anonfun$doCompile$3.apply(Compile.scala:45)
    at sbt.CompilerCore$$anonfun$doCompile$3.apply(Compile.scala:42)
    at scala.Option.orElse(Option.scala:102)
    at sbt.CompilerCore.doCompile(Compile.scala:41)
    at sbt.CompilerCore.apply(Compile.scala:29)
    at sbt.AbstractCompileConditional.run$1(Conditional.scala:341)
    at sbt.AbstractCompileConditional$$anonfun$3.apply(Conditional.scala:344)
    at sbt.AbstractCompileConditional$$anonfun$3.apply(Conditional.scala:344)
    at sbt.classfile.Analyze$.apply(Analyze.scala:110)
    at sbt.AbstractCompileConditional.execute(Conditional.scala:344)
    at sbt.Conditional$class.run(Conditional.scala:43)
    at sbt.AbstractCompileConditional.run(Conditional.scala:231)
    at sbt.BasicScalaProject.sbt$BasicScalaProject$$doCompile(DefaultProject.scala:260)
    at sbt.BasicScalaProject$$anonfun$compileAction$1.apply(DefaultProject.scala:274)
    at sbt.BasicScalaProject$$anonfun$compileAction$1.apply(DefaultProject.scala:274)
    at sbt.TaskManager$Task.invoke(TaskManager.scala:62)
    at sbt.impl.RunTask.doRun$1(RunTask.scala:77)
    at sbt.impl.RunTask.runTask(RunTask.scala:85)
    at sbt.impl.RunTask.run(RunTask.scala:32)
    at sbt.impl.RunTask$.apply(RunTask.scala:17)
    at sbt.impl.RunTask$.apply(RunTask.scala:16)
    at sbt.Project$class.run(Project.scala:98)
    at sbt.Project$class.act(Project.scala:129)
    at sbt.BasicScalaProject.act(DefaultProject.scala:21)
    at sbt.xMain$$anonfun$8.apply(Main.scala:530)
    at sbt.xMain$$anonfun$8.apply(Main.scala:530)
    at sbt.xMain.withAction(Main.scala:563)
    at sbt.xMain.sbt$xMain$$handleAction(Main.scala:530)
    at sbt.xMain.handleCommand(Main.scala:520)
    at sbt.xMain.processAction(Main.scala:459)
    at sbt.xMain.process$1(Main.scala:257)
    at sbt.xMain.processArguments(Main.scala:266)
    at sbt.xMain.startProject(Main.scala:107)
    at sbt.xMain.run(Main.scala:84)
    at sbt.xMain.run0$1(Main.scala:35)
    at sbt.xMain.run(Main.scala:42)
    at xsbt.boot.Launch$.run(Launch.scala:53)
    at xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:42)
    at xsbt.boot.Launch$$anonfun$explicit$1.apply(Launch.scala:42)
    at xsbt.boot.Launch$.launch(Launch.scala:57)
    at xsbt.boot.Launch$.explicit(Launch.scala:42)
    at xsbt.boot.Launch$.initialized(Launch.scala:38)
    at xsbt.boot.Launch$.parsed(Launch.scala:31)
    at xsbt.boot.Launch$.configured(Launch.scala:21)
    at xsbt.boot.Launch$.apply(Launch.scala:16)
    at xsbt.boot.Launch$.apply(Launch.scala:13)
    at xsbt.boot.Boot$.runImpl(Boot.scala:24)
    at xsbt.boot.Boot$.run(Boot.scala:19)
    at xsbt.boot.Boot$.main(Boot.scala:15)
    at xsbt.boot.Boot.main(Boot.scala)
Caused by: ch.epfl.lamp.fjbg.JCode$OffsetTooBigException: offset too big to fit in 16 bits: 51511
    at ch.epfl.lamp.fjbg.JCode.checkOffset16(JCode.java:903)
    at ch.epfl.lamp.fjbg.JCode.patchAllOffset(JCode.java:982)
    at ch.epfl.lamp.fjbg.JCode.freeze(JCode.java:102)
    at ch.epfl.lamp.fjbg.JMethod.freeze(JMethod.java:89)
    at ch.epfl.lamp.fjbg.JFieldOrMethod.writeTo(JFieldOrMethod.java:127)
    ... 79 more
Error during sbt execution: java.lang.Error: ch.epfl.lamp.fjbg.JCode$OffsetTooBigException: offset too big to fit in 16 bits: 51511 
```

我不知道它为什么会发生以及如何解决这个问题？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:18:37.493

创建的偏函数太大，Scala 编译器无法编译。这是 scala 编译器的[问题](https://issues.scala-lang.org/browse/SI-1133)。

要解决此问题，您需要将选择器分解为多个服务语句。所以只要找个有逻辑断点的地方，做两个RestHelper函数。

例如，

```
object MembershipAPIOne extends RestHelper with LogHelper {
  serve {
   case JsonPost("api" :: "v1" :: "group_memberships" :: group_id :: user_id :: Nil, request)    =>
   () => Full(GroupMembershipController.Join(group_id, user_id, request))
   case JsonPut("api" :: "v1" :: "group_memberships" :: group_id :: user_id :: Nil, request) =>
  () => Full(GroupMembershipController.Join(group_id, user_id, request))
  }
 }

object MembershipAPITwo extends RestHelper with LogHelper {
  serve {
case JsonDelete("api" :: "v1" :: "group_memberships" :: group_id :: user_id :: Nil, request) =>
  () => Full(GroupMembershipController.Leave(group_id, user_id, request))
 }
} 
```

有关更多帮助，请参阅[http://www.assembla.com/spaces/liftweb/wiki/REST_Web_Services](http://www.assembla.com/spaces/liftweb/wiki/REST_Web_Services)。

# sql - 带有视图的实体框架错误？

> ID：10763296
> 
> 赞同：2
> 
> 时间：2012-05-26T03:07:11.123
> 
> 标签：sql, asp.net-mvc-3, entity-framework, views

我使用实体框架 4.3.1.0

SQL Server 2008 速成版

我有意见

```
SELECT  dbo.Dealers.Name AS DealerName, 
        dbo.Dealers.LogoImage, 
        dbo.DealersProducts.Price, 
        dbo.DealersProducts.StatusType, 
        dbo.Products.Description,                       
        dbo.Products.Name, 
        dbo.DealersProducts.DealerId, 
        dbo.Products.Id 
FROM dbo.Dealers 
INNER JOIN
dbo.DealersProducts 
ON dbo.Dealers.Id = dbo.DealersProducts.DealerId 
INNER JOIN                       
dbo.Products 
ON dbo.DealersProducts.ProductId = dbo.Products.Id 
```

我有实体

```
public class DealerViews : BasePersistentEntity
{
    public int DealerId { get; set; }

    public string DealerName { get; set; }

    public string LogoImage { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public decimal Price { get; set; }

    public int StatusType { get; set; }
} 
```

此视图用于退货经销商有要求的产品。当我在 SQL 管理器中请求 SQL 查询时，我选择了正确的结果，但在实体框架中我得到了奇怪的结果。例子

**SQL 结果**

经销商 1

经销商 2

**实体框架结果**

经销商 1

经销商 1

**控制器中的代码**

```
public ActionResult ShowProductDealers(int id)
{
    var dealer = this.dealerService.GetDealerByProductId(id);

    return this.PartialView("ShowProductDealers", dealer);
} 
```

**服务中的代码**

```
public IEnumerable<DealerViews> GetDealerByProductId(int id)
{
    return this.repositoryViews.All.Where(item => item.Id == id);
} 
```

**存储库中的代码**

```
public class SGNRepository<T> where T : BasePersistentEntity
{
    public readonly SGNContext<T> Context = new SGNContext<T>();

    public IQueryable<T> All
    {
        get { return this.Context.Table; }
    }

    public IQueryable<T> AllIncluding(params Expression<Func<T, object>>[] includeProperties)
    {
        IQueryable<T> query = this.Context.Table;
        return includeProperties.Aggregate(query, (current, includeProperty) => current.Include(includeProperty));
    }

    public T Find(int id)
    {
        return this.Context.Table.Find(id);
    }

    public void InsertOrUpdate(T item)
    {
        if (item.Id == default(int))
        {
            // New entity
            this.Context.Table.Add(item);
        }
        else
        {
            // Existing entity
            this.Context.Entry(item).State = EntityState.Modified;
        }

        this.Save();
    }

    public void Delete(int id)
    {
        var item = this.Context.Table.Find(id);
        this.Context.Table.Remove(item);
        this.Save();
    }

    private void Save()
    {
        this.Context.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T14:19:33.623

你的映射有问题。您选择了哪一列作为实体的主键？我希望在这种情况下您拥有`Product.Id`主键，并且该产品有很多经销商。

EF 使用主键作为唯一标识。每条记录都必须唯一标识。[如果 EF 加载记录并且在其内部身份映射](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653392#3653392)中没有其唯一标识，它会从该记录创建实体实例并将其放入身份映射。下次它获取具有相同唯一标识的记录时，它不会创建新的实体实例，而是使用存储在身份映射中的实例。这就是你得到相同结果的原因。

顺便提一句。您的存储库是错误的，因为您无法插入、删除或更新从视图创建的实体（除非您为所有这些操作映射存储过程或自定义 SQL 命令），因此它不应公开此类方法。

另一点是为什么你有存储库和服务，当它只包装单个调用 = 没有附加值并且没有理由这样做时，特别是当你的存储库仅支持对一种实体类型的简单 CRUD 操作时。

# python - 如何读取二进制文件并将数据转换为图像？

> ID：10763298
> 
> 赞同：4
> 
> 时间：2012-05-26T03:07:21.107
> 
> 标签：python, binary, python-imaging-library

基本上我想要做的是获取一个文件，将其二进制数据（当然是十进制）放入一个列表中，然后基于该列表使用 PIL 生成一个灰度位图图像。

例如，如果文件是 5000 字节（图像大小为 100 x 50）并且每个字节是 0 到 255 之间的整数，我想将第一个字节绘制到第一个像素并沿着行向下直到所有字节都用完。

到目前为止，我唯一得到的就是读取文件：

```
f = open(file, 'rb')
text = f.read()
for s in text:
    print(s) 
```

这以十进制输出字节。

我正在寻找一些关于如何实现这一目标的方向。我做了很多搜索，但似乎没有太多人尝试过我想做的事情。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-05-09T15:57:18.880

您可以使用 Numpy`fromfile()`来有效地阅读它：

```
#!/usr/bin/env python3

import numpy as np
from PIL import Image

# Define width and height
w, h = 50, 100

# Read file using numpy "fromfile()"
with open('data.bin', mode='rb') as f:
    d = np.fromfile(f,dtype=np.uint8,count=w*h).reshape(h,w)

# Make into PIL Image and save
PILimage = Image.fromarray(d)
PILimage.save('result.png') 
```

* * *

**关键词**：PIL、Pillow、Python、Numpy、读取原始数据、二进制、8 位、灰度灰度、图像、图像处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T04:00:00.180

来自[PIL Image 文档](https://web.archive.org/web/19980119020126/http://www.pythonware.com/library/pil/handbook/image.htm)：

```
Image.fromstring(mode, size, data) 
```

对于您的示例：

```
im = Image.fromstring('L', (100, 50), text) 
```

还有一个`frombuffer`功能，但区别不明显。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T03:47:24.630

我认为应该这样做。是`scipy`一种选择吗？

```
In [34]: f = open('image.bin', 'r')

In [35]: Y = scipy.zeros((100, 50))

In [38]: for i in range(100):
             for j in range(50):
                 Y[i,j] = ord(f.read(1))

In [39]: scipy.misc.imsave('image.bmp', Y) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T03:11:23.167

I don't think using PIL for this would be incredibly efficient, but you can look into the [`ImageDraw`](http://www.pythonware.com/library/pil/handbook/imagedraw.htm) module if you are looking to paint onto a blank canvas.

My approach would be a bit different: since your file format resembles the [Netpbm](http://en.wikipedia.org/wiki/Netpbm_format) format very closely, I would try converting it. For simplicity, try adding/manipulating the headers of your format while reading it so that PIL can read it natively.

# tsql - php explode like function in sql server 2005

> ID：10763307
> 
> 赞同：0
> 
> 时间：2012-05-26T03:09:55.303
> 
> 标签：tsql, sql-server-2005

I need to explode comma seperated string for reporting purpose in mssql, what i exactly need is to convert string likr 1,2,3,4,5,6,7,8,9 as below

```
column
1
2
3
4
5
6
7
8
9 
```

I have been helpless so far now, its spoiling my weekend , help me out

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:20:15.813

Try like below

```
DECLARE @str as nvarchar(4000) 
set @str=  'SELECT ' + replace( '1,2,3,4,5',',',' UNION SELECT ')
EXEC sp_executesql @str 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-26T03:16:15.847

No you can't directly do this. You need to create function which returns the table accepting as string. You need create a table variable , add values to that and return.

# haml - haml two spaces issue

> ID：10763308
> 
> 赞同：0
> 
> 时间：2012-05-26T03:10:15.427
> 
> 标签：haml

When using haml I have following problem.

First I want to check one variable and after that render something else, but it still should be nested.

Let me explain

code:

```
.a
  .b

gives:   <div class=a><div class=b></div></div> 
```

When I use haml if else, I can't nest .b inside .a:

```
- if id == 3
  .a{style => 'xxx'}
- else
  .a{style => 'yyy'}

    .b <-- 2 spaces, otherwise it fails. but 2 spaces are causing the following issue: 
```

The problem is, because there is no end in haml, I don't know how to put .b within .a div, in both situations (if id ==3, or else).

As an real live example:

```
- if home != nil
  .home
    home.id
- else
  .home
    empty
- end   <--- can't use
  - if room != nil <-- without end, this will be executed only if home == nil but I wan't this to be executed always
    room.id
  - else
    empty 
```

because haml doens't support -end, I can't use it. If I don't use it, haml automatically closes div if I start to cehck 'room's values because these are in the same line :)

Example with comparing variable to nil, or doing something only if the variable is nil is just an example. I'm looking for a solution that solves such problem with indenting after else so it applies to the whole statement.

There are similar question: [HAML: Indenting if/else statements with common content](https://stackoverflow.com/questions/6147610/haml-indenting-if-else-statements-with-common-content)

So, in your case you would do like:

```
.a{ :style => id == 3 ? 'xxx' : 'yyy' }
  .b 
```

*edited*: In case of `if... elsif... elsif...` you can write your own helper:

```
.a{ :style => select_style(variable) }
  .b

#helper method
def select_style(val)
  case val
  when "3"
    "xxx"
  when "4"
    "yyy"
  else
  "zzz"
  end
end 
```

Of course you can write it all in haml, but it will be ugly:

```
- if id == "3" then val="xxx"
- elsif id == "4" then val="yyy"
- else val="zzz"
.a { :style => val }
 .b 
```

HAML has its advantages, but it is an example of one of the disadvantages.

*edited*

Or you can going mad and do like:

```
.a{:style => if var == "3" then "xxx" elsif var == "4" then "yyy" else "zzz" end} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:34:11.457

你也可以试试这个：

```
- if contition
  - attrs = { class: '..', id: '..' }
- else
  - attrs = { style: '...' }

.a{attrs}
  .b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:35:58.120

有类似的问题：[HAML: Indenting if/else statements with common content](https://stackoverflow.com/questions/6147610/haml-indenting-if-else-statements-with-common-content)

所以，在你的情况下，你会喜欢：

```
.a{ :style => id == 3 ? 'xxx' : 'yyy' }
  .b 
```

*编辑*：如果`if... elsif... elsif...`您可以编写自己的助手：

```
.a{ :style => select_style(variable) }
  .b

#helper method
def select_style(val)
  case val
  when "3"
    "xxx"
  when "4"
    "yyy"
  else
  "zzz"
  end
end 
```

当然你可以全部用haml写，但是会很丑：

```
- if id == "3" then val="xxx"
- elsif id == "4" then val="yyy"
- else val="zzz"
.a { :style => val }
 .b 
```

HAML 有其优点，但它是缺点之一。

*已编辑*

或者你可以发疯并且喜欢：

```
.a{:style => if var == "3" then "xxx" elsif var == "4" then "yyy" else "zzz" end} 
```

# excel - 如何使用 VBA 将范围（多行和多列）中的数据填充到列表框

> ID：10763310
> 
> 赞同：3
> 
> 时间：2012-05-26T03:10:38.567
> 
> 标签：excel, vba

我在如何将具有多列和多行的范围中的数据放入列表框时遇到问题。

假设我有一个范围 rng，我尝试了多个列和行：

![在此处输入图像描述](../Images/7817de8137c144d20e708a7feee1528a.png)

如果我尝试 addItem rng(i,j) 那么一切都将在 1 列中。

我也尝试过 .list 但它也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T12:26:36.770

这是你正在尝试的吗？

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim ws As Worksheet
    Dim rng As Range
    Dim i As Long, j As Long, rw As Long
    Dim Myarray() As String

    '~~> Change your sheetname here
    Set ws = Sheets("Sheet1")

    '~~> Set you relevant range here
    Set rng = ws.Range("A1:E5")

    With Me.ListBox1
        .Clear
        .ColumnHeads = False
        .ColumnCount = rng.Columns.Count

        ReDim Myarray(rng.Rows.Count, rng.Columns.Count)

        rw = 0

        For i = 1 To rng.Rows.Count
            For j = 0 To rng.Columns.Count
                Myarray(rw, j) = rng.Cells(i, j + 1)
            Next
            rw = rw + 1
        Next

        .List = Myarray

        '~~> Set the widths of the column here. Ex: For 5 Columns
        '~~> Change as Applicable        
        .ColumnWidths = "50;50;50;50;50"
        .TopIndex = 0
    End With
End Sub 
```

**快照**

![在此处输入图像描述](../Images/a6f321583220142a08f3a788ecc3a906.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T04:08:20.173

我假设您要填充 3 列

```
Dim currRange As Range
Dim i As Integer
With Selection
For Each currRange In Range("yourRange")
        i = i + 1
        If i = 1 Then .AddItem cell.Value
        If i = 2 Then .List(.ListCount - 1, 1) = "1"
        If i = 3 Then
            .List(.ListCount - 1, 2) = cell.Offset(0, 2).Value
            i = 0
        End If
Next
End With 
```

我假设你有 3 列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T03:29:34.797

您可以使用 foreach 将项目添加到列表框中

```
ActiveSheet.Shapes("lstSample").Select

Dim currRange As Range
With Selection
    For Each currRange In Range("yourRange")
        .AddItem currRange.Value
    Next
End With 
```

For each 本身遍历范围内的每一行和每一列。

# javascript - Cross-browser way to subclass JavaScript Array and get the array[i] method?

> ID：10763321
> 
> 赞同：3
> 
> 时间：2012-05-26T03:13:10.183
> 
> 标签：javascript, arrays, browser, subclass

Very glad to learn of [this way](https://stackoverflow.com/a/10763103/169992) of basically subclassing a JavaScript `Array` (code copied from link):

```
function SomeType() {
    this.push(16);
}

SomeType.prototype = [];
SomeType.prototype.constructor = SomeType; // Make sure there are no unexpected results

console.log(new SomeType()); // Displays in console as [16] 
```

But this isn't quite complete. Is there a way to fake subclass the Array like this *and* get the `[]` method?

```
var a = [];
a[3]  = true;
console.log(a.length); //=> 4

var s = new SomeType();
s[3]  = true;
console.log(s.length); //=> 1 
```

This way you can still treat it as an array when doing a for loop:

```
for (var i = 0; i < s.length; i++) {
  var item = s[i];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:57:39.370

仅适用于带有`__proto__`（已弃用）的浏览器，因此它不是跨浏览器：

```
var CustomArray = function ( ) {
  var array = [ 16 ];
  array.__proto__ = this.__proto__;
  return array;
};

CustomArray.prototype = [];
CustomArray.prototype.constructor = CustomArray;

var array = new CustomArray( );
console.log( array instanceof Array );       // true
console.log( array instanceof CustomArray ); // true

array[ 3 ] = 42;
console.log( array.length );                 // 4 
```

我认为没有其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T20:31:17.310

我发现对“Array”进行子类化的最佳方法不是子类化“Array”，而是另一个“Array-Like-Object”，其中有很多，其中一个是 Collection。基本上它完成了数组所做的所有事情（包括括号表示法），但它是一个“自定义”原型，因此它可以很容易地被子类化，这与原生原型不同，原生原型在子类化时通常会出现问题。

[http://codepen.io/dustinpoissant/pen/AXbjxm?editors=0011](http://codepen.io/dustinpoissant/pen/AXbjxm?editors=0011)

```
var MySubArray = function(){
  Collection.apply(this, arguments);
  this.myCustomMethod = function(){
    console.log("The second item is "+this[1]);
  };
};
MySubArray.prototype = Object.create(Collection.prototype);

var msa = new MySubArray("Hello", "World");
msa[2] = "Third Item";
console.log(msa);
msa.myCustomMethod(); 
```

# shell - Print the last field using 'cut'

> ID：10763322
> 
> 赞同：-1
> 
> 时间：2012-05-26T03:13:10.263
> 
> 标签：shell, unix, field, cut

Let's say I've the following data:

```
ae722d1d94dcd3b161af166936:!]z@.:123
09338b2b29919e6c0daefbcce0361335:21f2e48d86f28ab7cd5c9c95:123
$H$92Gh.gRJwECLPzkjACPihoLg/:123
c6f1cb5f1feeece60f9a8e067e0:v4Zz'Cj5_Ze{J+iRW{2z,<~:123
202cb962a75b964b07152d234b70:123
40bd0015630c35165329ea5ecbdbbeef:123 
```

(Invaild hashes, for explaining purpose only)

I want to use the `cut` tool in printing the last field only.

```
123
123
123
123
123
123 
```

*   I don't want to use `rev` command.
*   I want nothing other than **cut**, I know how to do it in `sed`, `awk`.

`--complement` flag might help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T15:50:45.680

当我在寻找这个答案时，我在另一个地方看到了这个。

rev, cut (在分隔符上) -f 1, rev

将最后一个字段向前移动，剪切，然后向后移动

我觉得那有点滑

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T03:27:17.113

对于该特定数据，您可以：

```
cut -f2- -d: file | cut -f2 -d: 
```

如果你可能有三个冒号：

```
cut -f2- -d: file | cut -f2- -d: | cut -f2 -d: 
```

您可以根据需要继续添加更多`cut`s。

诀窍是对`cut`没有分隔符的记录没有任何作用，因此您可以使用连续`cut`的 s 来切断第一个字段，同时保留您已经找到的最后一个字段。

# c# - 每个 X 结果形成一串数据？

> ID：10763326
> 
> 赞同：0
> 
> 时间：2012-05-26T03:16:16.147
> 
> 标签：c#, .net-4.0

我有一个包含 1000 多个唯一条目的列表，我想从中形成，将 50 个条目组合成一个字符串，用于 Web 客户端请求。

这是我想出的：

```
string query = string.Empty;
for (int i = 0; i < queryList.Count; i++)
{
    query += queryList[i] + Environment.NewLine;
    if (i % 40 == 1)
    {
        // Send webclient request
        query = string.Empty;
    }
} 
```

由于 1 也是倍数，它会在结果 1 处触发（不确定如何规避并发送 2 个初始值），之后它工作得很好，但我想知道是否有更好的方法来制作这组字符串使用网络请求？

此外，当它退出 for 时，我必须手动发送最后一个字符串，因为如果计数总数不是它的倍数，它不会在最后触发，所以一旦它退出 for 我将拥有剩下什么要发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:27:29.380

您可以使用[MoreLinq](http://code.google.com/p/morelinq/)

[MoreLinq.Batch](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs) -> 将集合分成批次。

[MoreLinq.Pipe](http://code.google.com/p/morelinq/source/browse/MoreLinq/Pipe.cs) -> 类似于 Select，允许进行方法调用

以下查询将queryList分成40个批次，然后一次打印40个项目（类似于问题的逻辑）。

对于 webclient 请求，将 Console.WriteLine 替换为 webclient 请求调用。

```
queryList.Batch(40).Pipe(x=>Console.WriteLine(String.Join(Environment.NewLine, x.ToArray()))).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T03:25:36.803

只需添加另一个检查块..

```
 if (i % 40 == 1)
    {
        if (i == 1)
            continue;
        // Send webclient request
        query = string.Empty;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T03:32:49.553

您可以使用内置的[GroupBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)来构建有效负载。

```
var data = Enumerable.Range(0, 1000)
    .Select(value => value.ToString());

var payloads = data
    .Select((value, idx) => new {idx, value})

    // Abuse automatic integer division cut off.
    .GroupBy(x => x.idx/40)

    // Transform every group into a concatenated string built
    // from all entries in that group.
    .Select(g => g.Aggregate(String.Empty, (curr, next) => curr + next.value + Environment.NewLine));

foreach (var payload in payloads) {
    // Send payload to webservice.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T08:18:43.823

如果您更喜欢使用 Microsoft 支持的东西，那么使用[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)而不是 MoreLinq 怎么样？

你只需要`Buffer`and `Do`（结合`ToObservable()`然后返回`ToEnumerable()`）：

```
queryList.ToObservable()
         .Buffer(40).Do(x => Console.WriteLine(String.Join(Environment.NewLine, x.ToArray())))
         .ToEnumerable().ToArray(); 
```

# javascript - 如果代码在底部，那么放置 $(document).ready 函数有什么意义？

> ID：10763329
> 
> 赞同：4
> 
> 时间：2012-05-26T03:17:57.827
> 
> 标签：javascript, jquery, html

在这里对 Jquery 来说相当新......但我被告知并正在做的一件事是在阅读 html 后在我的页面底部添加我的 Javascript。

现在，我看到人们添加 $(document).ready(function() 即使代码位于页面底部。DOM 不是在读取 HTML 时逐步构建的吗？在读取 HTML 结束时，不应该 DOM 自动准备好，因此，添加此检查有什么意义？

比如小demo：

```
<ul>
    <li id="draggable" class="ui-state-highlight">Drag me down</li>
</ul>

<ul id="sortable">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>
<script>
alert("In Page");
</script>

</div><!-- End demo -->

<script>
$(function() {
    alert("Dom is READY");
    $( "#sortable" ).sortable({
    revert: true
    });

    $( "#accordion" ).accordion();
});
</script> 
```

“页面内”总是首先出现......是因为 HTML 不够“大”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:32:27.547

事实是 document.ready 和 bottom of document 几乎是一回事，因为到 document 的末尾所有控件都在那里。就我个人而言，我仍然更喜欢 document.ready，因为它是 JQuery 框架识别文档结束的方式（理想情况下，我们应该坚持框架推荐的方式），其次它会照顾任何人错误地移动代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T03:44:22.463

当您以这种方式内联编写代码时，假设您在头部加载 jQuery，可能不需要文档 onReady。

当您的页面代码通过文档中的外部 JavaScript 资源（可能不在底部）加载时，它开始产生影响。这样做的原因主要是为了代码可以被浏览器缓存，从而减少网络开销。

# google-app-engine - single-property GQL causes unexpected composite index

> ID：10763330
> 
> 赞同：0
> 
> 时间：2012-05-26T03:18:31.040
> 
> 标签：google-app-engine, google-cloud-datastore, gql

If I execute this GQL query:

```
GQLQuery("SELECT user FROM MyUser WHERE foo = :1", fooz) 
```

It will cause my index.yaml to make a composite index with both the `user` and `foo` properties.

```
- kind: MyUser
  properties:
  - name: user
  - name: foo 
```

And if i delete that index, when it's uploaded to App Engine and my app runs, an error appears `no matching index found`.

I just don't understand why GAE must create a composite index for that query??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:29:58.627

此行为[在此处完整记录](https://developers.google.com/appengine/docs/python/datastore/queries#Indexes_for_Projections)：

> 投影查询要求投影中指定的所有属性都包含在数据存储索引中。

# ios - How do I determine the coordinates tapped on AVCaptureVideoPreviewLayer?

> ID：10763332
> 
> 赞同：1
> 
> 时间：2012-05-26T03:19:01.673
> 
> 标签：ios, avfoundation

*   I have a CACaptureVideoPreviewLayer that spans the entire width and height of my app's view.
*   I have AVLayerVideoGravityResizeAspectFill enabled on my preview layer.
*   The user eventually taps the preview layer. I am provided with the CGPoint of where the user has tapped the layer in my view's coordinates.

How do I get the pixel that was tapped on the CACaptureVideoPreviewLayer in terms of the camera's output coordinates?

# mongodb - Grouping Related Types of Documents in MongoDB

> ID：10763333
> 
> 赞同：0
> 
> 时间：2012-05-26T03:19:30.760
> 
> 标签：mongodb

Ok I am totally new to MongoDB and started reading MongoDB Definitive guide book. I am on page 7 and it says: "Group Related types of Documents together"

I don't get it :( a document is something like

```
{"greetings" , "Hello World"} 
```

so what do they mean by that sentence? could you please give me a more detailed example so I can picture it in my head. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:32:49.293

文档实际上更像：`{"greetings": "Hello World"}`

在这种情况下，它是一个非常简单的文档，仅包含一个键“greetings”和它的值“Hello World”。某些语言可能将其称为关联数组、散列或字典。这个描述的重点是 MongoDB 不关心结构是什么。它是无方案的，并且不需要您确保集合中的每个文档都具有完全相同的结构。但出于效率和组织目的，您倾向于将类似的文档存储在单个集合中。因此，从纯粹的设计角度来看，您最终会得到每个集合非常相似的文档。

MongoDB 中的文档或多或少类似于 JSON 结构（具体来说是 bson）。它可以是任意深度，您可以在选定的对象级别上创建索引以促进更快的搜索。

在大多数情况下，只需将 mongodb 想象成一个花哨的对象存储，其中的对象代表您熟悉的任何语言。特定于您的语言的驱动程序将处理您的本机对象类型和 mongodb 中的 bson 表示之间的桥梁。您创建对象并存储它们。它实际上与理解 mysql 并没有什么不同，但知道您不必定义表模式。只需开始存储您想要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:40:33.147

实际上，文档更像

{ "问候":"Hello World" }

表示文档包含问候语（键），问候语是“Hello World”（值）。文档可以是一组非常复杂的键值对，包括数组、嵌入文档等值。

如果您在同一个集合中包含一堆任意文档，以后很难找到它们。因此，建议将具有共同点的文档分组到一个集合中。

一个相关的例子可能是有一个集合，其中每个文档都代表系统的用户。每个文档中的字段将根据您对每个用户的信息量而有所不同，但至少您可能有一个电子邮件地址、姓名等。然后您可以查询满足某些条件的所有用户。

另一个系列可能有公司。您可能有一组用户或用户 ID 作为公司文档中的一个字段，以代表在公司工作的每个用户，或类似的东西。

我不熟悉你提到的那本书，但也许如果你继续努力，它会开始变得更有意义。如果不是，我建议阅读[此处](http://www.mongodb.org/display/DOCS/Tutorial#Tutorial-DynamicSchema%28%22SchemaFree%22%29)的一些页面以获取更多示例。

# xbee - How end devices communicate with each other in the XBee (Series 1) NonBeacon (w/Coordinator) network

> ID：10763334
> 
> 赞同：4
> 
> 时间：2012-05-26T03:19:47.420
> 
> 标签：xbee

I setup a NonBeacon (w/Coordinator) network with three XBee Series 1 modules. One is configured as coordinator. The other two are configured as end devices. The firmware version and configuration are as below.

**Firmare**

```
Modem:  XBEE    Function Set    Version
XB24    XB24    802.15.4        10CD 
```

**Coordinator**

```
Parameter            Value   Comments
CH (Channel)         0x0F    Identical
ID (PAN ID)          0x5241  Identical
DH                   0x0
DL                   0x0
MY (Source Address)  0xFF01  Unique
CE (Coord. Enable)   1  
A2 (Coord. Assoc.)   0x04    allow end devices to associate to it. 
```

**End device**

```
Parameter            Value   Comments
CH (Channel)         0x0F    Identical
ID (PAN ID)          0x5241  Identical
DH                   0x0
DL                   0x0
MY (Source Address)  0xFF02  Unique
CE (Coord. Enable)   0  
A1 (End Dev Assoc.)  0x04    allow associate to coordinator. 
```

When end device 1 sends out the data, the coordinator can receive the data, but the end device 2 can't. I want end device 2 to receive data from end device 1 in this network. My current solution is to let the coordinator broadcasts the data, so end device 2 can receive it. I'm not sure if this is good solution to resolve the communication issue among end devices. Is there any other solution?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:05:30.427

使用 Digi XBee 802.15.4 模块（也称为 Digi XBee 系列 1 模块），在坐标上使用广播与您的终端设备通话不会受到任何惩罚。

另一方面，如果您希望能够在任意两个 Digi XBee 802.15.4 模块之间建立通信，则需要使用单播寻址。单播寻址按以下方式执行：

1.  通过将 MY 参数设置为唯一值，在每个节点上设置地址
2.  将协调器的 DL 参数设置为您希望与之交谈的 *end device 节点的 MY 值。
3.  请注意，通过将 DL 设置为 0，每个*终端设备*始终能够与协调器（CE 设置为 1 的节点）对话。

必须更改协调器上的 DL 参数才能轮流与每个*终端设备*通话，这可能非常笨拙。这就是为什么许多人最终在 API 模式下使用 Digi XBee 无线电。

[如果您从Digi XBee 802.15.4 支持页面](http://www.digi.com/support/productdetail?pid=3257)的文档部分下载手册，您会找到一个标题为“API 操作”的部分。如果您将 AP 参数设置为 > 1，它将启用此模式。

如果您在 API 模式下从终端设备向协调器发送一些数据，您会看到无线电出现 RX 帧（API 类型 0x81）。同样，如果您使用 API 类型 0x01) 发送类似格式的数据包并将终端设备的 MY 地址指定为目标，您将看到数据从终端设备 XBee 的串行端口出现。

如果您搜索“XBee API 库”，您会发现许多有用的库链接，这些库可以使用您选择的语言与 Digi XBee 模块对话，例如[这个方便的 Java 语言](http://code.google.com/p/xbee-api/)

# jquery - 使用功能时显示透明背景？

> ID：10763336
> 
> 赞同：0
> 
> 时间：2012-05-26T03:20:50.260
> 
> 标签：jquery

```
 $(document).ready(function() { 
    var overlayObject = $("a[rel]").overlay({ 
        top: 50,
        expose: {
                    color: '#232323',
                    closeOnClick: true
                },

                onClose:function() {   
                    $('#reg-login').hide();
                    $('#reg-register').hide();
                },
        effect: 'apple'
 }); 
```

嗨，我怎么能不显示这个功能中出现的黑色背景。我只是不想在后台显示任何东西，只是一个普通的网页，我该怎么做？

如果我删除颜色：'#232323'，则会出现一些蓝色背景。

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:36:23.423

您正在使用`expose`叠加层提供的方法。这将焦点集中在元素上，并慢慢淡化它周围的其他一切。如果您不想要“蒙版覆盖”，只需删除暴露效果，然后找到 css 元素`#mask`并给它一个背景：透明。或者，您可以使用该`mask:{}`参数并将其传递给它会产生相同效果的透明 gif（或 png）。

# javascript - 无法使用 DOM 解析 onClick 文本

> ID：10763337
> 
> 赞同：1
> 
> 时间：2012-05-26T03:20:58.467
> 
> 标签：javascript, dom

我读过的所有内容都说使用*元素*.onclick 属性，但这似乎不适用于我的情况。我正在尝试解析数字：629216818 并将其设置为变量：fbid。这是一个 Greasemonkey 脚本，因此无法直接编辑 HTML。我不是专业人士，所以我可能只是在做一些愚蠢的事情，但这是我的 HTML 和 Javascript：

```
<div id="petRightContainer">
<a title = "Pet trainer bonus: Your companion will level 5% faster." href="setup.php?type=companion&gtRandom=8167343321487308">
<div class="petRight" style="background-image:url(/fb/res/gui4/companion/cu_sith.jpg)"></div>
</a>
<div class="petRightLevel">
<a href="#" onClick="publishToWall('http://www.ghost-trappers.com/fb', 'Look at the cool augmentations my companion has received on Ghost Trappers.', 'Look at my new companion on Ghost Trappers!  I\'ve named it Jankie.  ', null, 'index.php?si=629216818&fromWall=1', 'white/companion_32.jpg', 'companion/wallpost_augmentation_12.jpg', 'companion/wallpost_augmentation_21.jpg', 'companion/wallpost_augmentation_11.jpg', null)">Dog</a>                        
</div> 
```

等等

```
<script type="text/javascript">

    fbid = 0;
    fbidRegex = /\d{3,}(?=&fromWall=1)/;

    if ( document.getElementsByClassName("petRightLevel")[0]){

       element = document.getElementsByClassName("petRightLevel")[0].firstChild;
       codeStore = element.onclick;
       fbid = fbidRegex.exec(codeStore);
       document.write("it is working ");
    }

    document.write(fbid);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:28:19.233

我认为这可能对你有用。

```
<script type="text/javascript">
    fbid = 0;
    fbidRegex = /\d{3,}(?=&fromWall=1)/;
    if(document.getElementsByClassName("petRightLevel")[0]){
        element = document.getElementsByClassName("petRightLevel")[0].firstChild;
        // callback function to execute when the element onclick event occurs.
        codeStore = element.onclick = function(){
            fbid = fbidRegex.exec(codeStore);
            document.write("it is working ");
            document.write(fbid);
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:37:45.003

问题出在这一行：

```
element = document.getElementsByClassName("petRightLevel")[0].firstChild; 
```

如果您使用的是 Firefox 和其他支持 HTML 的浏览器，则和`document.getElementsByClassName`之间有空格`<div class="petRightLevel">`

```
<a href="#" onClick= ...> 
```

, firstChild 实际上是一个文本节点而不是链接。您需要做的就是删除两个元素之间的空格和/或换行符。

如果您使用的是 IE，问题仍然在 javascript 的同一行，因为 IE 直到版本 8 才支持 document.getElementsByClassName。

**更新：**以下 javascript 代码适用于我测试的所有浏览器，无需接触 HTML：

```
<script type="text/javascript">

    fbid = 0;
    fbidRegex = /\d{3,}(?=&fromWall=1)/;

    var divs = document.getElementsByTagName("div");
    var link = null;

    for (var i=0;i<divs.length;i++)
    {
       if(divs[i].getAttribute("class") ==="petRightLevel")
       {
          link = divs[i].getElementsByTagName("a")[0];
          break;
       }
    }
    if (link){
       codeStore = link.onclick;
       fbid = fbidRegex.exec(codeStore);
       document.write("it is working ");
    }

    document.write(fbid);

</script> 
```

如果您只需要获取锚点，那将比这简单得多。

# arrays - 使数组排序的最小操作数

> ID：10763344
> 
> 赞同：6
> 
> 时间：2012-05-26T03:24:23.997
> 
> 标签：arrays, algorithm, sorting

我一直在 spoj 上尝试[这个](http://www.spoj.pl/problems/GONESORT/)问题，但无法提出正确的方法。解决问题的正确算法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T06:22:21.527

You should find longest consecutive increasing subsequence, which can be done in O(n log n) (by sorting array), after that, the number of changes needed is `N - longest consecutive increasing subsequence`. Note that by consecutive I mean there order in sorted array.

e.g:

> 1 7 6 2 5 4 3 => 1-2-3 is longest consecutive increasing subsequence, number of moves needed is 4.
> 
> 1 6 4 3 5 2 7 => 1-2 or 4-5 or 6-7 is longest consecutive increasing subsequence, note that 1-4-5-7 is longest increasing subsequence but number of moves needed is 5 not 3.

Why this works:

Best algorithm does not changes some of a items places, call biggest subsequence without changes as `X`, you wont change the position of `X` items related to each other during operations, so they should be sorted in increasing mode. But because you just allowed to move some items in the first or the last of array, you can't put any item between `X` items (note that we assumed `X` is biggest unchanged subsequence during operations), So there should be no gap between `X` items. so they should be sorted and consecutive in sorted format.

So number of changes needed couldn't be smaller than the `N- length of X`, but also is not hard to do your job with `N-length of X operation`.

# php - php检测pdf中图像的dpi

> ID：10763345
> 
> 赞同：0
> 
> 时间：2012-05-26T03:24:31.937
> 
> 标签：php, pdf, dpi, postscript

我已经在 PDF 上尝试了一些测试[`Imagick::getImageResolution`](http://www.php.net/manual/en/imagick.getimageresolution.php)，但我无法弄清楚如何获得嵌入在 PDF 中的图像的分辨率（和色彩空间）。我尝试从 PDF 中提取图像，但在此过程中，似乎 DPI 被任意设置为 72，与我所做的无关。

我在[1564529](https://stackoverflow.com/questions/1564529/)中看到有人说 DPI 与 PDF 无关，但事实并非如此（当图像嵌入 PDF 时，有关图像的几个属性，如分辨率，在 PostScript 中定义）。PHP中有没有办法（可能使用[PSLib](http://php.net/manual/en/book.ps.php)？）来确定嵌入式图像的 DPI 是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T07:48:53.043

PDF（或 PostScript）中图像的“dpi”比您想象的要模糊。这是因为可以以不同的比例渲染 PDF，因此实际 dpi 会有所不同。

您是正确的，有关于文档中嵌入的图像的比例因子的信息。这就是电流变换矩阵，但它不像单个值，甚至不是单个矩阵那么简单。

CTM 将坐标映射到理想化的“用户空间”，该用户空间名义上以点（每英寸 72 点）定义，但可以无限细分。在渲染方面，“用户空间”应用了进一步的转换以将其正确缩放到“设备空间”，需要进行转换，因为设备可能不是 72 dpi。

您可以在 PDF 参考手册中找到更完整的解释，尤其是 1.7 参考中的第 4.2.1 节。

因此，您似乎需要做的就是从图像字典中获取声明的 /Width 和 /Height，并应用 /Matrix 来确定图像在用户空间中的大小。假设用户空间实际上是 72 dpi，那么您将知道图像被缩放到多少英寸，图像包含多少像素，并且简单的除法会给您想要的答案。

事实上，在某些情况下，这会起作用。但是，从您的角度来看，其中一个问题是，连接矩阵以影响当前缩放是可能的，实际上很常见，因此仅查看应用于图像的矩阵不会为您提供应用于该图像的比例因子图像，因为其他东西可能已经缩放了 CTM。此外，PDF 包含“UserUnit”组件，它允许文件更改用户空间的默认缩放。

因此，计算图像“dpi”的唯一方法是将页面描述解释为图像呈现的点，计算出该点的总缩放比例，然后从那里计算出图像覆盖的区域。然后给定图像的宽度和高度，计算出它的 dpi。

顺便说一句，这对您来说是一个难题；完全可以使用相同的图像数据在 PDF 中多次绘制相同的图像。您只需包含一次图像数据。如果我绘制一个 100 像素 x 100 像素的图像，并将其绘制为覆盖一平方英寸，则分辨率为 100 dpi。现在我绘制相同的图像，但我将其缩放到半英寸。渲染图像的分辨率现在为 200 dpi。

那么“图像的 dpi”是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T03:28:59.540

希望这可以帮助你：

[http://forums.digitalpoint.com/showthread.php?t=884349](http://forums.digitalpoint.com/showthread.php?t=884349)

# c++ - C ++传递结构和传递指针可互换？

> ID：10763348
> 
> 赞同：0
> 
> 时间：2012-05-26T03:24:39.970
> 
> 标签：c++, pointers, parameters, struct, overloading

如果函数是：

```
void foo(struct* bar)
{
} 
```

和

```
struct foobar; 
```

是struct的单个实例，会不会调用

```
foo(foobar); 
```

是否将其视为指向一个成员数组的指针？呼叫是合法的还是需要超载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T03:27:14.750

> 是struct的单个实例，会调用foo(foobar); 是否将其视为指向一个成员数组的指针？呼叫是合法的还是需要超载？

不，它不会。调用是不合法的，过载可能会使调用工作。

如果一个函数需要一个指向 a 的指针`struct`，那么你必须给它一个指向 a 的指针`struct`。数组很特殊，因为它们*衰减*为指向第一个元素的指针。

# java - 为什么此消息打印额外的时间（比我希望它打印更多）？

> ID：10763351
> 
> 赞同：0
> 
> 时间：2012-05-26T03:25:54.267
> 
> 标签：java, recursion, infinite

```
import java.util.ArrayList;
import java.lang.Math;

public class War {
    ArrayList deck = new ArrayList(0);
    ArrayList player1 = new ArrayList(0);
    ArrayList player2 = new ArrayList(0);
    int sum1 = 0;
    int sum2 = 0;
    int count = 0;

private void setup ()
{
    for (int x = 1; x <= 13; x++)
    {
        for (int y = 1; y <= 4; y++)
        {
            deck.add(x);
        }
    }

    while (deck.size() > 26)
    {
        double x = Math.random() * deck.size();
        int y = (int) x;

        player1.add(deck.remove(y));
    }

    while (deck.size() > 0)
    {
        double x = Math.random() * deck.size();
        int y = (int) x;

        player2.add(deck.remove(y));
    }

    for (int x = 0; x < 26; x++)
    {
        sum1 += (int) player1.get(x);
        sum2 += (int) player2.get(x);
    }

    System.out.println("Player 1's starting power is " + sum1 + ".");
    System.out.println();
    System.out.println("Player 2's starting power is " + sum2 + ".");
    System.out.println();

    if (sum1 == sum2)
    {
        System.out.println("The two player's starting powers are equal! This'll be a good one, folks!");
    }
}

public void play ()
{
    if (hasSomeoneWon() || count == 0)
    {
        setup();
    }

    while (!player1.isEmpty() && !player2.isEmpty())
    {
        int a = (int) player1.get(0);
        int b = (int) player2.get(0);

        if (a > b)
        {
            player1.add(player1.remove(0)); // The winner's card is re-added to his deck before
            player1.add(player2.remove(0)); // the loser's is added to the winner's deck.
        }

        if (a < b)
        {
            player2.add(player2.remove(0));
            player2.add(player1.remove(0));
        }

        if (a == b)
        {
            war();
        }
    }

    victory();
}

private void war ()
{
    ArrayList temp1 = new ArrayList(0);
    ArrayList temp2 = new ArrayList(0);
    temp1.add(player1.remove(0));
    temp2.add(player2.remove(0));
    int x = 0;

    while (!(player1.isEmpty() || player2.isEmpty()) && x < 3)
    {
        temp1.add(player1.remove(0));
        temp2.add(player2.remove(0));
        x++;
    }

    int a = (int) temp1.get(temp1.size() - 1);
    int b = (int) temp2.get(temp2.size() - 1);

    if (a == b)
    {
        if (temp1.size() != temp2.size())
        {
            if (temp1.size() > temp2.size())
            {
                while (!temp1.isEmpty())
                {
                    player1.add(temp1.remove(0));
                }

                while (!temp2.isEmpty())
                {
                    player1.add(temp2.remove(0));
                }
            }

            else
            {
                while (!temp2.isEmpty())
                {
                    player2.add(temp2.remove(0));
                }

                while (!temp1.isEmpty())
                {
                    player2.add(temp1.remove(0));
                }
            }
        }

        else
        {
            if (player1.isEmpty() || player2.isEmpty())
            {
                if (player1.isEmpty())
                {
                    while (!temp2.isEmpty())
                    {
                        player2.add(temp2.remove(0));
                    }

                    while (!temp1.isEmpty())
                    {
                        player2.add(temp1.remove(0));
                    }
                }

                else
                {
                    while (!temp1.isEmpty())
                    {
                        player1.add(temp1.remove(0));
                    }

                    while (!temp2.isEmpty())
                    {
                        player1.add(temp2.remove(0));
                    }
                }
            }

            else
            {
                war();
            }
        }
    }

    else
    {
        if (a > b)
        {
            while (!temp1.isEmpty())
            {
                player1.add(temp1.remove(0));
            }

            while (!temp2.isEmpty())
            {
                player1.add(temp2.remove(0));
            }
        }

        else
        {
            while (!temp2.isEmpty())
            {
                player2.add(temp2.remove(0));
            }

            while (!temp1.isEmpty())
            {
                player2.add(temp1.remove(0));
            }
        }

        play();
    }
}

private void victory ()
{
    if (player1.isEmpty() && sum2 > sum1)
    {
        System.out.println("Player 2 has won!");
    }

    if (player1.isEmpty() && sum1 > sum2)
    {
        System.out.println("Upset! Player 2 has won!");
    }

    if (player2.isEmpty() && sum1 > sum2)
    {
        System.out.println("Player 1 has won!");
    }

    if (player2.isEmpty() && sum2 > sum1)
    {
        System.out.println("Upset! Player 1 has won!");
    }

    hasSomeoneWon();
}

private boolean hasSomeoneWon ()
{
    if (player1.isEmpty() || player2.isEmpty())
    {
        count++;
        return true;
    }

    return false;
} 
```

}

很抱歉包含了我所有的代码，但我不知道哪个部分导致了额外的打印。

这是纸牌游戏战争。它应该自己玩两个玩家之间的游戏，然后打印获胜者。但是，每当我玩过它时，胜利信息（无论打印哪个）都会被打印多次。我猜这与我在哪里以及多久包含对某些方法的调用或 war() 方法中对 war 的递归调用有关。

我对 Java 的唯一体验是我本学年参加的 AP 计算机科学课程，所以按照每个阅读本文的人的标准，我肯定是个菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:45:42.807

在`war()`您递归调用的方法中`war()`，`war()`最终将通过调用来结束`play()`。所以会有多个实例在执行`play()`。最终，当一个玩家的牌用完时，所有这些实例都会在堆栈展开并继续执行时重新出现`play()`。最后当然`victory()`是多次调用和打印它（应该是`war()`被调用的次数）。

因此，一旦到达递归的底部，每个 war() 都可能会打印出玩家获胜的情况。我不认为调用`play()`in`war()`是必要的，无论如何它都会`play()`在完成该方法后返回该`war()`方法。

# android - 如何将按钮的颜色更改为默认颜色

> ID：10763352
> 
> 赞同：1
> 
> 时间：2012-05-26T03:26:27.570
> 
> 标签：android, button

我正在创建一个 MCQ 应用程序，其中有四个选项`Buttons`。最初所有按钮的颜色都是默认颜色。每当用户单击正确答案时，背景颜色将`Button`变为绿色，并且当用户单击错误选项时，背景颜色将`Button`变为红色和以绿色显示正确答案`Button`。之后，用户单击下一个问题按钮。现在我想将所有选项的背景颜色更改`Buttons`为其初始状态，即默认颜色。我不知道该怎么做。请帮助我将按钮图像更改为其默认颜色/图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:19:06.003

在 NEXT BUTTON 的 onClick() 中放置代码以将选项按钮颜色更改为您选择的颜色。

```
 onClick()
{
 button.setBackgroundColor(color);
} 
```

默认颜色不是颜色，它是许多 9-patch 图像的 StateListDrawable 我建议您将选项按钮的按钮背景设置为白色，然后在按下 NEXT 按钮时将其设置回白色。

# java - Java类成员构造

> ID：10763353
> 
> 赞同：1
> 
> 时间：2012-05-26T03:26:51.873
> 
> 标签：java

我只是从一本看起来很不错的书中学习 java，但是在遵循其中一个示例时遇到了问题。在下面的代码中，我显然错过了使用简单类的成员变量的步骤。我究竟做错了什么？

这是代码：

```
class Dog {
    String name;
    String color;
}

class DogsExample {
    public static void main(String[] args) {

    Dog [] myDogs = new Dog[3];

    myDogs[0].name = "Rover";
    }
} 
```

当我运行这个程序时，它会导致一个空指针异常，我为 name 成员变量赋值：

```
$ java DogsExample
Exception in thread "main" java.lang.NullPointerException
    at DogsExample.main(DogsExample.java:11) 
```

为什么我不能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T03:29:00.583

这是一个空数组，三个元素长。这就像一排三个狗窝，里面没有狗。您必须先`Dog`在每个犬舍中添加一个名称，然后才能为其`Dog`命名：

```
myDogs[0] = new Dog();
myDogs[0].name = "Rover"; 
```

重复`myDogs[1]`和`myDogs[2]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T03:28:41.270

在 Java 中，当您创建一个数组时，它会自动填充`null`值（除非您使用基元数组，在这种情况下，该数组会填充零）。

您正在做的是访问一个空值并尝试获取它的一个字段。您的代码本质上是在执行`null.name = "Rover"`. 设置`myDogs[0]`为有效实例，否则您将获得 NullPointerException。

您可以像这样在元素中创建 Dog 的新实例：

```
myDogs[0] = new Dog(); 
```

或者您可以在制作数组时执行此操作，如下所示：

```
Dog[] myDogs = {new Dog(), new Dog(), new Dog()}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T03:30:53.267

您创建了一个 Dog 类型的数组，但没有在其中放入任何 Dog 对象。狗 [0] 是`null`.

```
Dog [] myDogs = new Dog[3];

myDogs[0] = new Dog(); // <== This populates the array with a new Dog object

myDogs[0].name = "Rover"; 
```

# java - 更快地查询sqlite有序数据中的多行？

> ID：10763360
> 
> 赞同：-1
> 
> 时间：2012-05-26T03:28:20.497
> 
> 标签：java, android, sqlite

我有一个 sqlite 数据库，数据按一个字符串字段排序。我想通过字符串字段的字典顺序检索从某个特定开始的行数。现在我使用 LIMIT 查询，但我对速度不满意。我认为只搜索第一个，然后告诉 sqlite 获取后续行数更好，我该怎么做？（我的英语不好，如果我错了，请见谅）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:01:54.467

我不确定你的意思，但我会尽力回答。如果我不在轨道上，请提前道歉。

假设您的字符串列称为 mystring。如果您希望在使用特定顺序进行选择时具有良好的性能，则必须在要排序的列上具有索引。

您的查询将如下所示：

```
SELECT *
FROM mytable
ORDER BY mystring
LIMIT 5,10 
```

这是最快的解决方案。

# java - 即使值/顺序相同，原始列表似乎也不匹配？是否可以？

> ID：10763377
> 
> 赞同：0
> 
> 时间：2012-05-26T03:31:21.707
> 
> 标签：java, arrays

我有一个 ints[] 列表，我一次列出一个。我发现了一个有趣的模式，结果似乎颠倒了，所以为了测试它，我颠倒了进入我的方法的列表，然后显示它们，发现它们匹配。我想以编程方式找到它们，但是当我将列表本身打印为字符串时，即使项目/订单匹配，结果也不匹配。

这是方法（它只是获取数据，颠倒顺序并打印两者..没什么花哨的）：

```
private static void show (int [] arr) { 
    //before we print results lets reverse the list and study if there's something we can do to make this go faster
    int[] ReversedList = new int[arr.length];
    for (int x = arr.length-1, y=0; x>=0;x--, y++) {
        ReversedList[y] = arr[x];
    }
    for (int x = 0; x < arr.length; x++) {
        //System.out.print (" " + (arr [x] + low[x]));
        System.out.print (" " + (arr[x]));
    }
    System.out.println (" " + arr.toString());
    for (int x = 0; x < ReversedList.length; x++) {
        //System.out.print (" " + (arr [x] + low[x]));
        System.out.print (" " + (ReversedList[x]));
    }

    System.out.println (" " + ReversedList.toString() + "  ***");
   //System.out.println("*****************");
} 
```

但字符串不匹配。这是输出的一个片段（***表示它被颠倒了）：

```
 0 0 0 20 [I@199a0c7c
 20 0 0 0 [I@50a9ae05  ***
....
 20 0 0 0 [I@1e9af0b1
 0 0 0 20 [I@4e300429  *** 
```

它们都是这样的，我不确定为什么它们相同时不匹配（至少看起来相同）。我有一个名为的数组列表`results`，它包含所有的 int[] 并且我尝试执行 results.indexof(reversed) 但没有运气（我得到的所有内容都是'-1'）。我怎样才能找到匹配项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T03:37:39.427

您正在查看您拥有的 int 数组的地址。数据是相同的，但数据存储在多个位置，因为您使用的是多个实例。

要比较数组，请使用[`Arrays.equals(int[], int[])`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28int%5B%5D,%20int%5B%5D%29). 或者，您可以使用更好的格式查看数组中的信息[`Arrays.toString(int[])`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28int%5B%5D%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T03:33:35.307

这些都是对象地址。它们引用不同的整数数组，因此它们不会匹配。

请改用该[`java.util.Arrays.toString(int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28int%5b%5d%29)方法来直观地查看数组的内容：

```
import java.util.Arrays;
// ... code
System.out.println (" " + Arrays.toString(arr)); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-26T03:38:48.363

What is getting printed is the HASHCODE. It is like both are separate objects and are stored separately on the heap memory. HashCode is nothing but unique number allocated to each object by the JVM. I hope this is what you are looking for.

# php - 更改为的正则表达式必须至少包含一个数字和字母？

> ID：10763378
> 
> 赞同：1
> 
> 时间：2012-05-26T03:31:58.123
> 
> 标签：php, regex

我现在的正则表达式是这样的

```
'/[a-z0-9]{40}/i' 
```

这将匹配任何不包含字母和/或数字的空格的字符串。

如何更改它，使其至少包含至少一个数字和至少一个字母字符，这样如果字符串全是数字或全是字母，它就不会匹配？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:40:26.147

```
/([:alpha:].*[:digit:]|[:digit:].*[:alpha:])/ 
```

这需要一个数字跟随一个字母，或者一个字母跟随一个数字。

从您的原始正则表达式中，您似乎想要强制要求总共 40 个字符。为此，请尝试：

```
/^(.*[:alpha:].*[:digit:].*|.*[:digit:].*[:alpha:].*){40}$/ 
```

注意额外`.*`的 's。只要有一个字母和一个数字，其他字符可以是任何字符。只要有40个。

如果要避免匹配空格，请将每个替换`.*`为`[^[:space:]]*`.

# wordpress - require('wp-blog-header.php') 在循环中不起作用

> ID：10763381
> 
> 赞同：0
> 
> 时间：2012-05-26T03:32:51.070
> 
> 标签：wordpress, function, loops, external

我正在尝试使用来自外部 php 文件的 wp_insert_post。如果没有循环，此文件可以正常工作。我花了很长时间，但我无法搜索任何类似的信息。

```
<?php

require('wp-blog-header.php');
$tmpstr = array(
          'ID' => 1,
          'post_title' => $title,
          'post_content' => $post content,
          'post_status' => 'publish',
          'post_author' => '1',
          'post_type' => $type
       );
wp_insert_post($tmpstr);
?>` 
```

但是，当我放一个循环时，

```
<?php
for ($i=0;$i<10,$i++) {
require('wp-blog-header.php');
$tmpstr = array(
          'ID' => 1,
          'post_title' => $title[$i],
          'post_content' => $post content[$i],
          'post_status' => 'publish',
          'post_author' => '1',
          'post_type' => $type
        );
   wp_insert_post($tmpstr);
}
?> 
```

它只在 mysql 数据库中插入 1 次，然后它停止了我尝试更改 require('wp-blog-header.php'); 要求（'/path/to/wp-blog-header.php'）；但它仍然不能解决我的问题。如果我注释掉 wp_insert_post 和 require('wp-blog-header.php'); 并添加 echo $post_content[$j];echo $post_title[$j]; 所有值都在我的浏览器中正确显示

谁能帮我让它循环10次，以便它可以插入10个条目？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:36:49.177

```
for ($i=0;$i<10,$i++) {
               ^ 
```

错误！一定是：

```
for ($i=0;$i<10;$i++) {
               ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T03:36:55.297

您不断需要每个循环的文件。永远不要那样做。将要求放在循环之外。如果你把它放在循环中，PHP 会出错，说函数已经定义。

```
<?php
require('wp-blog-header.php');
for ($i = 0; $i < 10; $i++) {
$tmpstr = array(
          'ID' => 1,
          'post_title' => $title[$i],
          'post_content' => $post content[$i],
          'post_status' => 'publish',
          'post_author' => '1',
          'post_type' => $type
        );
   wp_insert_post($tmpstr);
} 
```

# svn - 使用ant将文件添加到svn

> ID：10763387
> 
> 赞同：0
> 
> 时间：2012-05-26T03:35:30.253
> 
> 标签：svn, ant

当我从 CVS 转移到 SVN 时，我正在尝试使用 ant 在 svn 中添加一个文件。

我的**build.properties**：

```
svn.root=http://svn/projects2

svn.rsh=/usr/bin/ssh 
```

我的 .xml 脚本：

```
<svn>
            <add 
                path="${relative.metadata}/Build_@{product}_@{major}.@{minor.next}"
                cvsRoot="${svn.root}" 
                cvsRsh="${svn.rsh}" />

            <add 
                path="${relative.metadata}/Build_@{product}_@{major}.@{minor.next}/master-@{product}_@{major}.@{minor.next}.sql"
                cvsRoot="${svn.root}" 
                cvsRsh="${svn.rsh}" />

            <add 
                path="-q commit -m 'Adding the next build directory' ${relative.metadata}/Build_@{product}_@{major}.@{minor.next}"
                cvsRoot="${svn.root}"
                cvsRsh="${svn.rsh}" />

        </svn> 
```

正如您所看到的，它是使用 CVS 和 SVN 的混合体，所以我确定我这样做是错误的。我只是想使用这种类型的脚本将文件提交到 SVN。我是否让它比实际情况更复杂？

好的......我已经做了一些研究，这就是我到目前为止......

我的 build.properties 包含这个

svn.repo.url=http://svn.project.com/projects

我的 .xml 现在是这个

```
<property name="svn.repository.url" value="${svn.repo.url}"/>

<svn>
      <add
          dir="${relative.metadata}/Build_@{product}_@{major}.@{minor.next}"/>

</svn> 
```

所以我现在的问题是，这个手术要成功还缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:45:41.730

查看 tigris.org 提供的[SVNAnt 任务](http://subclipse.tigris.org/svnant/svn.html)，尤其是 subcommand [`svn add`](http://subclipse.tigris.org/svnant/svntask.html#add)。

因此，您应该能够执行以下操作：

```
<svn>
  <add file="${relative.metadata}/Build_@{product}_@{major}.@{minor.next}"/>
</svn> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-26T15:22:10.910

使用 SVN 添加，然后将您要添加到 SVN 的目录。

# java - 可比较对象列表的 Java 语法

> ID：10763390
> 
> 赞同：6
> 
> 时间：2012-05-26T03:36:50.240
> 
> 标签：java, list, comparable

我正在编写一个方法，该方法将一个可比较对象列表作为其唯一参数，并且不返回任何内容。我不确定它应该具有的语法：

```
public static void methodName(List<Comparable<Object>> list) {
    // Do some stuff
} 
```

我认为这是错误的，因为`<Object>`作为 Comparable 的类型，这意味着列表可以将 Integer 和 Boolean 作为对象，但我不希望这样。我希望列表只采用一种类型，但该类型必须实现 Comparable 接口。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T03:39:38.660

也许让它通用？

```
public static <E extends Comparable<E>> void methodName(List<E> list) ... 
```

# c++ - _CrtIsValidHeapPointer(pUserdata) AND _BLOCK_TYPE_IS_VALID(pHead->nBlockUse)

> ID：10763391
> 
> 赞同：-2
> 
> 时间：2012-05-26T03:36:52.640
> 
> 标签：c++, visual-studio-2010, visual-c++

> **可能的重复：**
> [什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

我刚刚“完成”了我的 AVL 树实现并去测试以前使用普通二叉搜索树的方法。但是现在当调用 bsTree 构造函数时，我得到了这些断言错误。

_BLOCK_TYPE_IS_VALID(pHead->nBlockUse) 是第一个，如果我继续 Windows 会吐出下一个。_CrtIsValidHeapPointer(pUserdata)

TYPE 在 type.h 中定义为 Signal* 我计划将其更改为使用模板或用于多态实现的任何内容，但这对于初始设置来说似乎很简单。

主要执行：

```
#include<string>
#include<iostream>
#include<fstream>
#include"binSearchTree.h"
;
using namespace std;

int main(){

string word;
int i = 0;
ifstream book ("AV1611Bible.txt");

if(book.is_open()){

    book >> word;

    bsTree* tree = new bsTree(new Signal(word));

    while( book.good()){
        book >> word;
        tree->addValue(new Signal(word));
        //cout << word;
        cout << i++ << "\n";
    }
    book.close();
}

return 0;
} 
```

bsTree 构造函数：

```
#include"binSearchTree.h"

;
using namespace std;

bsTree::bsTree(){

root = new Node();
size = 0;
}

bsTree::bsTree(TYPE v){
root = new Node(v);
size = 0;
}

bsTree::~bsTree(){
delete root;
} 
```

信号构造函数：

```
#include"signal.h"

using namespace std;

Signal::Signal(){
signal = "";
count = 0;
prob = 0;
}

Signal::Signal(string s){
Signal(s,0);
}

Signal::Signal(string s, double p){
signal = s;
count = 0;
prob = p;
}

Signal::Signal(string s, int n, double p){
signal = s;
count = n;
prob = p;
 }

Signal::~Signal(){
delete(&signal);
delete(&count);
delete(&prob);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:37:01.303

上面显示的代码具有**Undefined Behavior**，例如由于`delete`某些未分配的行为`new`，然后*任何事情都*可能发生，包括您看到的任何行为（您忘记描述）

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-27T04:22:54.360

Xeo 是正确的。析构函数正在访问它无权访问的内存。

# c - 如何使用自定义版本的 glibc 和静态链接构建 C 程序？

> ID：10763394
> 
> 赞同：25
> 
> 时间：2012-05-26T03:37:04.640
> 
> 标签：c, ld, glibc, static-linking

我已经构建了 glibc 2.14 并将其安装在目录中`~/GLIBC/glibc_install`。现在我想使用这个 C 库而不是我系统的默认 C 库来构建和运行程序。

*   为了确保我使用的是我的自定义 glibc，我添加了一个调用 puts into`glibc/stdio-common/printf.c:__printf`来打印一条消息。

*   然后我重建并重新安装了 glibc。

*   然后我写了一个“Hello, World”程序，尝试编译链接如下：

    ```
    gcc -nodefaultlibs -static -lgcc -L~/GLIBC/glibc_install/lib -o myprog myprog.c 
    ```

但我得到以下链接器错误报告：

```
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/crt1.o: In function `_start':
(.text+0x19): undefined reference to `__libc_csu_init'
/usr/lib/gcc/x86_64-linux-gnu/4.4.3/../../../../lib/crt1.o: In function `_start':
(.text+0x25): undefined reference to `__libc_start_main'
/tmp/ccACTQEp.o: In function `main':
c1.c:(.text+0xa): undefined reference to `puts'
collect2: ld returned 1 exit status 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-27T06:15:19.280

根据 glibc 帮助邮件列表 (libc-help@sourceware.org) 的一些建议，我有一个解决方案。事实证明，这个任务有点棘手，因为你必须告诉链接器忽略它通常会自动（并且默默地）包含的*所有*内容，然后包含它需要的所有内容，包括一堆开始和结束文件。开始和结束文件有的来自libc，有的来自gcc，所以make规则有点复杂。下面是一个通用示例 makefile 来说明该方法。我将假设您正在从名为**prog.c**的源文件构建一个名为**prog**的程序，并且您已将自定义 glibc 安装在目录**/home/my_acct/glibc_install**中。

 ****```
TARGET = prog
OBJ = $(TARGET).o
SRC = $(TARGET).c
CC = gcc
CFLAGS = -g
LDFLAGS = -nostdlib -nostartfiles -static
GLIBCDIR = /home/my_acct/glibc_install/lib
STARTFILES = $(GLIBCDIR)/crt1.o $(GLIBCDIR)/crti.o `gcc --print-file-name=crtbegin.o`
ENDFILES = `gcc --print-file-name=crtend.o` $(GLIBCDIR)/crtn.o
LIBGROUP = -Wl,--start-group $(GLIBCDIR)/libc.a -lgcc -lgcc_eh -Wl,--end-group

$(TARGET): $(OBJ)
        $(CC) $(LDFLAGS) -o $@ $(STARTFILES) $^ $(LIBGROUP) $(ENDFILES) 

$(OBJ): $(SRC)
        $(CC) $(CFLAGS) -c $^

clean:
        rm -f *.o *.~ $(TARGET) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T04:10:33.840

你的命令行只是假的。尝试：

```
gcc -nodefaultlibs -static -L~/GLIBC/glibc_install/lib -o myprog myprog.c -lgcc -lc -lgcc -lc 
```

或类似的。您省略`-lc`了 ，并且在输入文件之前也错误地拥有了您的库。

你正在寻找一个名为`libibgcc`而不是`libgcc`......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-22T07:56:50.413

## 设置 1：在没有专用 GCC 的情况下编译您自己的 glibc 并使用它

没有静态也适用于：[单个主机上的多个 glibc 库](https://stackoverflow.com/questions/847179/multiple-glibc-libraries-on-a-single-host/52454603#52454603)

此设置可能会起作用并且速度很快，因为它不会重新编译整个 GCC 工具链，只需重新编译 glibc。

但它不可靠，因为它使用主机 C 运行时对象，例如glibc 提供的`crt1.o`、`crti.o`和。`crtn.o`在以下位置提到了这一点：[https](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location) ://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev= 21#Compile_against_glibc_in_an_installed_location 这些对象执行 glibc 所依赖的早期设置，所以如果事情以美妙的方式崩溃，我不会感到惊讶和非常微妙的方式。

有关更可靠的设置，请参阅下面的设置 2。

构建 glibc 并在本地安装：

```
export glibc_install="$(pwd)/glibc/build/install"

git clone git://sourceware.org/git/glibc.git
cd glibc
git checkout glibc-2.28
mkdir build
cd build
../configure --prefix "$glibc_install"
make -j `nproc`
make install -j `nproc` 
```

### 设置 1：验证构建

test_glibc.c

```
#define _GNU_SOURCE
#include <assert.h>
#include <gnu/libc-version.h>
#include <stdatomic.h>
#include <stdio.h>
#include <threads.h>

atomic_int acnt;
int cnt;

int f(void* thr_data) {
    for(int n = 0; n < 1000; ++n) {
        ++cnt;
        ++acnt;
    }
    return 0;
}

int main(int argc, char **argv) {
    /* Basic library version check. */
    printf("gnu_get_libc_version() = %s\n", gnu_get_libc_version());

    /* Exercise thrd_create from -pthread,
     * which is not present in glibc 2.27 in Ubuntu 18.04.
     * https://stackoverflow.com/questions/56810/how-do-i-start-threads-in-plain-c/52453291#52453291 */
    thrd_t thr[10];
    for(int n = 0; n < 10; ++n)
        thrd_create(&thr[n], f, NULL);
    for(int n = 0; n < 10; ++n)
        thrd_join(thr[n], NULL);
    printf("The atomic counter is %u\n", acnt);
    printf("The non-atomic counter is %u\n", cnt);
} 
```

编译并运行`test_glibc.sh`：

```
#!/usr/bin/env bash
set -eux
rm -rf tmp
mkdir tmp
gcc \
  -L "${glibc_install}/lib" \
  -I "${glibc_install}/include" \
  -Wl,--rpath="${glibc_install}/lib" \
  -Wl,--dynamic-linker="${glibc_install}/lib/ld-linux-x86-64.so.2" \
  -static \
  -std=c11 \
  -o tmp/test_glibc.out \
  -v \
  test_glibc.c \
  -pthread \
;
sudo chroot tmp /test_glibc.out 
```

该程序输出预期的：

```
gnu_get_libc_version() = 2.28
The atomic counter is 10000
The non-atomic counter is 8674 
```

即使我们在一个干净的 chroot 上运行它，所以它`-static`必须工作。

命令改编自[https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location](https://sourceware.org/glibc/wiki/Testing/Builds?action=recall&rev=21#Compile_against_glibc_in_an_installed_location)但`--sysroot`使其失败：

```
cannot find /home/ciro/glibc/build/install/lib/libc.so.6 inside /home/ciro/glibc/build/install 
```

所以我删除了它。

`ldd`输出确认`ldd`我们刚刚构建的 和 库实际上正在按预期使用：

```
+ ldd test_glibc.out
        linux-vdso.so.1 (0x00007ffe4bfd3000)
        libpthread.so.0 => /home/ciro/glibc/build/install/lib/libpthread.so.0 (0x00007fc12ed92000)
        libc.so.6 => /home/ciro/glibc/build/install/lib/libc.so.6 (0x00007fc12e9dc000)
        /home/ciro/glibc/build/install/lib/ld-linux-x86-64.so.2 => /lib64/ld-linux-x86-64.so.2 (0x00007fc12f1b3000) 
```

编译调试输出显示使用`gcc`了我的主机运行时对象，如前所述，这很糟糕，但我不知道如何解决它，例如它包含：

```
COLLECT_GCC_OPTIONS=/usr/lib/gcc/x86_64-linux-gnu/7/../../../x86_64-linux-gnu/crt1.o 
```

### 设置1：修改glibc

现在让我们修改 glibc：

```
diff --git a/nptl/thrd_create.c b/nptl/thrd_create.c
index 113ba0d93e..b00f088abb 100644
--- a/nptl/thrd_create.c
+++ b/nptl/thrd_create.c
@@ -16,11 +16,14 @@
    License along with the GNU C Library; if not, see
    <http://www.gnu.org/licenses/>.  */

+#include <stdio.h>
+
 #include "thrd_priv.h"

 int
 thrd_create (thrd_t *thr, thrd_start_t func, void *arg)
 {
+  puts("hacked");
   _Static_assert (sizeof (thr) == sizeof (pthread_t),
                   "sizeof (thr) != sizeof (pthread_t)"); 
```

然后重新编译重新安装glibc，重新编译重新运行我们的程序：

```
cd glibc/build
make -j `nproc`
make -j `nproc` install
./test_glibc.sh 
```

我们看到`hacked`按预期打印了几次。

这进一步证实了我们实际上使用的是我们编译的 glibc 而不是主机。

在 Ubuntu 18.04 上测试。

## 设置 2：crosstool-NG 原始设置

这是设置 1 的替代方案，它是我迄今为止实现的最正确的设置：据我观察，一切都是正确的，包括 C 运行时对象，例如`crt1.o`、`crti.o`和`crtn.o`.

在此设置中，我们将编译一个完整的专用 GCC 工具链，该工具链使用我们想要的 glibc。

这种方法唯一的缺点是构建需要更长的时间。但我不会冒险用更少的东西来进行生产设置。

[crosstool-NG](https://github.com/crosstool-ng/crosstool-ng)是一组脚本，可以为我们从源代码下载和编译所有内容，包括 GCC、glibc 和 binutils。

是的，GCC 构建系统非常糟糕，以至于我们需要一个单独的项目。

这种设置并不完美，因为[crosstool-NG 不支持构建没有额外`-Wl`标志](https://github.com/crosstool-ng/crosstool-ng/issues/1030)的可执行文件，这感觉很奇怪，因为我们自己构建了 GCC。但似乎一切正常，所以这只是一个不便。

获取 crosstool-NG 并配置它：

```
git clone https://github.com/crosstool-ng/crosstool-ng
cd crosstool-ng
git checkout a6580b8e8b55345a5a342b5bd96e42c83e640ac5
export CT_PREFIX="$(pwd)/.build/install"
export PATH="/usr/lib/ccache:${PATH}"
./bootstrap
./configure --enable-local
make -j `nproc`
./ct-ng x86_64-unknown-linux-gnu
./ct-ng menuconfig 
```

我能看到的唯一强制性选项是使其与您的主机内核版本匹配以使用正确的内核头文件。使用以下命令查找您的主机内核版本：

```
uname -a 
```

这向我展示了：

```
4.15.0-34-generic 
```

所以在`menuconfig`我做：

*   `Operating System`
    *   `Version of linux`

所以我选择：

```
4.14.71 
```

这是第一个相同或更旧的版本。它必须更旧，因为内核向后兼容。

现在您可以使用以下方式构建：

```
env -u LD_LIBRARY_PATH time ./ct-ng build CT_JOBS=`nproc` 
```

现在等待大约三十分钟到两个小时进行编译。

### 设置 2：可选配置

`.config`我们生成的有`./ct-ng x86_64-unknown-linux-gnu`：

```
CT_GLIBC_V_2_27=y 
```

要改变这一点，`menuconfig`请执行以下操作：

*   `C-library`
*   `Version of glibc`

保存`.config`，然后继续构建。

或者，如果您想使用自己的 glibc 源，例如从最新的 git 使用 glibc，请按[以下方式](https://github.com/crosstool-ng/crosstool-ng/issues/1024)进行：

*   `Paths and misc options`
    *   `Try features marked as EXPERIMENTAL`：设置为真
*   `C-library`
    *   `Source of glibc`
        *   `Custom location`: 说是
        *   `Custom location`
            *   `Custom source location`: 指向包含 glibc 源的目录

其中 glibc 被克隆为：

```
git clone git://sourceware.org/git/glibc.git
cd glibc
git checkout glibc-2.28 
```

### 设置2：测试一下

一旦您构建了您想要的工具链，请使用以下命令对其进行测试：

```
#!/usr/bin/env bash
set -eux
install_dir="${CT_PREFIX}/x86_64-unknown-linux-gnu"
rm -rf tmp
mkdir tmp
PATH="${PATH}:${install_dir}/bin" \
  x86_64-unknown-linux-gnu-gcc \
  -Wl,--dynamic-linker="${install_dir}/x86_64-unknown-linux-gnu/sysroot/lib/ld-linux-x86-64.so.2" \
  -Wl,--rpath="${install_dir}/x86_64-unknown-linux-gnu/sysroot/lib" \
  -static \
  -v \
  -o tmp/test_glibc.out \
  test_glibc.c \
  -pthread \
;
sudo chroot tmp /test_glibc.out 
```

除了现在使用了正确的运行时对象之外，一切似乎都像设置 1 一样工作：

```
COLLECT_GCC_OPTIONS=/home/ciro/crosstool-ng/.build/install/x86_64-unknown-linux-gnu/bin/../x86_64-unknown-linux-gnu/sysroot/usr/lib/../lib64/crt1.o 
```

### 设置 2：失败的有效 glibc 重新编译尝试

如下所述，使用 crosstool-NG 似乎是不可能的。

如果您只是重新构建；

```
env -u LD_LIBRARY_PATH time ./ct-ng build CT_JOBS=`nproc` 
```

然后您对自定义 glibc 源位置的更改会被考虑在内，但它会从头开始构建所有内容，使其无法用于迭代开发。

如果我们这样做：

```
./ct-ng list-steps 
```

它很好地概述了构建步骤：

```
Available build steps, in order:
  - companion_tools_for_build
  - companion_libs_for_build
  - binutils_for_build
  - companion_tools_for_host
  - companion_libs_for_host
  - binutils_for_host
  - cc_core_pass_1
  - kernel_headers
  - libc_start_files
  - cc_core_pass_2
  - libc
  - cc_for_build
  - cc_for_host
  - libc_post_cc
  - companion_libs_for_target
  - binutils_for_target
  - debug
  - test_suite
  - finish
Use "<step>" as action to execute only that step.
Use "+<step>" as action to execute up to that step.
Use "<step>+" as action to execute from that step onward. 
```

因此，我们看到 glibc 步骤与几个 GCC 步骤交织在一起，最明显`libc_start_files`的是 before `cc_core_pass_2`，这可能是最昂贵的步骤`cc_core_pass_1`。

为了只构建一个步骤，您必须首先`.config`在初始构建选项中设置“保存中间步骤”：

*   `Paths and misc options`
    *   `Debug crosstool-NG`
        *   `Save intermediate steps`

然后你可以尝试：

```
env -u LD_LIBRARY_PATH time ./ct-ng libc+ -j`nproc` 
```

但不幸的是，`+`所需的内容如下：[https ://github.com/crosstool-ng/crosstool-ng/issues/1033#issuecomment-424877536](https://github.com/crosstool-ng/crosstool-ng/issues/1033#issuecomment-424877536)

> 但是请注意，在中间步骤重新启动会将安装目录重置为该步骤期间的状态。即，您将拥有一个重建的 libc - 但没有使用此 libc 构建的最终编译器（因此，也没有像 libstdc++ 这样的编译器库）。

并且基本上仍然使重建速度太慢而无法进行开发，而且我不知道如何在不修补 crosstool-NG 的情况下克服这个问题。

此外，从`libc`step 开始似乎没有从 再次复制源`Custom source location`，进一步使该方法无法使用。

## 奖励：stdlibc++

如果您也对 C++ 标准库感兴趣，这是一个奖励：[如何编辑和重新构建 GCC libstdc++ C++ 标准库源？](https://stackoverflow.com/questions/21872229/how-to-edit-and-re-build-the-gcc-libstdc-c-standard-library-source/51946224#51946224)****

# r - R 数据结构的常见问题解答标记

> ID：10763402
> 
> 赞同：43
> 
> 时间：2012-05-26T03:39:16.100
> 
> 标签：r, parsing, markdown, markup, r-faq

我正在阅读texinfo中的[R FAQ源](http://cran.r-project.org/doc/FAQ/R-FAQ.html)，并认为如果将其解析为R结构会更容易管理和扩展。有几个与此相关的现有示例：

*   财富包

*   中文条目

*   文件

每个都有一些理想的功能。

在我看来，常见问题解答在 R 社区中没有得到充分利用，因为它们缺乏 i) 从 R 命令行轻松访问（即通过 R 包）；ii) 强大的搜索功能；iii) 交叉引用；iv) 贡献包的扩展。从包`bibtex`和中汲取灵感`fortunes`，我们可以构想出一个新系统，其中：

*   可以从 R 中搜索常见问题解答。典型的调用类似于`fortune()`界面：`faq("lattice print")`、 或`faq() #surprise me!`、`faq(51)`、`faq(package="ggplot2")`。

*   包可以提供自己的`FAQ.rda`，格式还不清楚（见下文）

*   `Sweave`/`knitr`提供驱动程序以输出格式良好的 Markdown/LaTeX 等。

**问题**

但是，我不确定最好的**输入**格式是什么。用于转换现有常见问题解答或添加新条目。

将 R 语法与嵌套列表树（或临时 S3/S4/ref`class`或`structure`,

```
\list(title = "Something to be \\escaped", entry = "long text with quotes, links and broken characters", category = c("windows", "mac", "test")) 
```

`Rd`文档，即使本身不是 R 结构（它更像是 LaTeX 的一个子集，具有自己的解析器），也许可以提供一个更吸引人的输入格式示例。它还有一组[工具来解析](http://developer.r-project.org/parseRd.pdf)R 中的结构。然而，它目前的目的是相当具体和不同的，面向 R 函数的一般文档，而不是 FAQ 条目。它的语法也不理想，我认为更现代的标记，比如降价，会更具可读性。

还有其他东西吗，也许是将markdown文件解析为R结构的例子？将 Rd 文件偏离其预期目的的示例？

**总结**

我想提出：

1- R 结构（可能是类）的良好设计，可以将`fortune`包扩展到更一般的条目，例如常见问题解答项目

2- 一种更方便的格式来输入新的常见问题解答（而不是当前的 texinfo 格式）

3- 一个解析器，用 R 或其他语言（bison？）编写，用于将现有的常见问题解答转换为新的结构 (1)，和/或将新的输入格式 (2) 转换为 R 结构。

*更新 2：在赏金期的最后两天，我得到了两个答案，都很有趣但完全不同。因为这个问题非常广泛（可以说是不合适的），所以没有一个答案提供完整的解决方案，因此我（无论如何现在）不会接受答案。至于赏金，我将其归因于在赏金到期之前投票最多的答案，希望有一种方法可以更平均地分配它。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T10:30:00.127

（这涉及第 3 点。）

您可以将 texinfo 文件转换为 XML

```
wget http://cran.r-project.org/doc/FAQ/R-FAQ.texi
makeinfo --xml R-FAQ.texi 
```

然后用 XML 包读取它。

```
library(XML)
doc <- xmlParse("R-FAQ.xml")
r <- xpathSApply( doc, "//node", function(u) {
  list(list(
    title    = xpathSApply(u, "nodename", xmlValue),
    contents = as(u, "character")
  ))
} )
free(doc) 
```

但是将其转换为文本要容易得多

```
makeinfo --plaintext R-FAQ.texi > R-FAQ.txt 
```

并手动解析结果。

```
doc <- readLines("R-FAQ.txt")

# Split the document into questions
# i.e., around lines like ****** or ======.
i <- grep("[*=]{5}", doc) - 1
i <- c(1,i)
j <- rep(seq_along(i)[-length(i)], diff(i))
stopifnot(length(j) == length(doc))
faq <- split(doc, j)

# Clean the result: since the questions 
# are in the subsections, we can discard the sections.
faq <- faq[ sapply(faq, function(u) length(grep("[*]", u[2])) == 0) ]

# Use the result
cat(faq[[ sample(seq_along(faq),1) ]], sep="\n") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T02:21:30.687

我有点不清楚你的目标。您似乎希望将所有与 R 相关的文档都转换为 R 可以操作的某种格式，大概这样人们就可以编写 R 例程来更好地从文档中提取信息。

这里似乎有三个假设。

1) 很容易将这些不同的文档格式（texinfo、RD 文件等）转换为具有（我强调）一些隐式统一结构和语义的标准形式。
因为如果你不能将它们全部映射到一个单一的结构，你将不得不为每种类型甚至可能为每个单独的文档编写单独的 R 工具，然后转换后工具的工作将压倒好处。

2) R 是编写此类文档处理工具的正确语言；怀疑您对 R 有点偏见，因为您在 R 中工作并且不想考虑“离开”开发环境以获取有关更好地使用 R 的信息。我不是 R 专家，但我认为 R 主要是一种数字语言，并没有为字符串处理、模式识别、自然语言解析或推理提供任何特殊帮助，我希望所有这些都发挥重要作用从主要包含自然语言的转换文档中提取信息。我不是建议使用特定的替代语言（Prolog??），但如果您成功转换为正常形式（任务 1）以仔细选择目标语言进行处理，您可能会更好。

3）您实际上可以从这些结构中提取有用的信息。图书馆学是 20 世纪试图推动的。现在我们都进入了“信息检索”和“数据融合”方法。但事实上，对非正式文件的推理已经挫败了大多数这样做的尝试。没有明显的系统可以组织原始文本并从中提取深层价值（IBM 赢得 Jeopardy 的 Watson 系统是一个明显的例外，但即使在那里，也不清楚 Watson “知道”什么；您是否希望 Watson 回答这个问题，“外科医生应该用刀打开你吗？”不管你给了多少原始文本）关键是你可能成功地转换了数据，但不清楚你能成功地用它做什么。

尽管如此，大多数文本标记系统都有标记结构和原始文本。人们可以将它们“解析”成树状结构（如果您假设某些事物是可靠的交叉引用，则可以将其“解析”成类似图的结构；texinfo 当然有这些）。XML 被广泛推动作为此类解析结构的载体，并且能够表示任意树或图，它是......好的......用于捕获这样的树或图。[然后人们推出 RDF 或 OWL 或其他使用 XML 的知识编码系统，但这并没有改变问题；您选择一个独立于 R] 的规范目标。所以你真正想要的是能够读取各种标记结构（texinfo、RD 文件）并输出 XML 或等效的树/图的东西。在这里，我认为您注定要构建单独的 O(N) 解析器来涵盖所有 N 标记样式；否则工具怎么会知道值标记（因此解析）是什么？（你可以想象一个系统在给出标记的描述时可以读取标记的文档，但即使这样也是 O(N)：仍然必须有人描述标记）。这种解析是针对这种统一表示法，然后您可以使用易于构建的 R 解析器来读取 XML（假设尚不存在），或者如果 R 不是正确的答案，则使用正确的答案进行解析.

有一些工具可以帮助您为任意语言构建解析器和解析树（甚至是从解析树到其他形式的翻译器）。 [ANTLR](http://www.antlr.org)是一个；它已被足够多的人使用，因此您甚至可能会意外找到某人已经构建的 texinfo 解析器。我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)是另一个；解析后的 DMS 将直接导出带有解析树的 XML 文档（但它不一定是您理想中想要的统一表示）。这些工具可能会使阅读标记和用 XML 表示它变得相对容易。

但我认为你真正的问题是决定你想要提取/做什么，然后找到一种方法来做到这一点。除非你对如何做后者有一个清晰的想法，否则做所有的前端解析器似乎是很多工作，但回报不明确。也许您有一个更简单的目标（“管理和扩展”，但这些词可以隐藏很多）更可行。

# java - UDP 组播是正确的选择吗？

> ID：10763409
> 
> 赞同：0
> 
> 时间：2012-05-26T03:40:51.877
> 
> 标签：java, sockets, udp, multicast

我的 Java Socket 经验有限，所有这些都使用 TCP。我正在尝试学习 UDP。我正在运行一个使用 UDP 多播的多进程应用程序。经过一些简短的研究（以及我对该主题的初步理解），我认为多播将是正确的方法。

隐喻地，我希望所有进程共享同一个“房间”，并且应该互相“大喊大叫”。因此，当进程 1 发送消息“你好”时，我希望所有进程 2..n 接收该数据包，反之亦然。

起初这一切似乎都在工作，但后来我意识到我有一个错误（如果你可以这样称呼它）。我启动第一个进程，当我启动第二个进程时，第一个进程接收到第二个进程的消息，反之则不然。

我想知道，当我`MulticastSocket receive()`在进程 1 上执行此操作时，是否有效地将其`DatagramPacket`从堆栈中取出，然后进程 2 看不到它何时执行`recieve()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T03:48:15.923

问题不在于协议的选择——TCP/IP 无济于事，UDP 广播也无济于事。

问题是当当前没有任何东西在监听时，操作系统的网络堆栈不会缓冲网络流量。这就是第二个过程发生的情况。

简而言之，你的方案行不通。

* * *

一种替代方法是让“新”进程多播“谁在那儿”消息，并让所有其他进程以多播或定向数据包进行响应。但是，您在这里重新发明了轮子。这个问题之前已经用各种“中间件”堆栈解决了很多次。

# git - 可以全局添加 ssh-add

> ID：10763410
> 
> 赞同：6
> 
> 时间：2012-05-26T03:41:53.700
> 
> 标签：git, ssh, github, ssh-keys, openssh

我可以对永久保留的**identifyFile执行****ssh-add**，目前它仅适用于当前活动的**ssh 会话**（即，使用 ssh-add 添加的 identityFile 在与服务器建立新的 ssh 会话时会丢失，可以通过运行 ssh-找到添加 -L )

 ****问题是我们的亚马逊服务器有各种项目，repo 在 github 中。

现在每个 repo 都具有**访问权限，用户** 说**用户 A 仅对项目 A**具有访问权限，而B仅对项目**B 具有访问权限**

使用该访问权限集（在 github 中），现在每个用户都可以仅对**各自的项目**执行 git 操作（如 git fetch、git push 等） （这是我们想要的）

现在我想要的是当用户在相应的项目上执行 git 操作时，我希望**ssh-agent**获取帐户中的所有 ssh-keys 并查找与该特定用户匹配的那个

**笔记**

> 每个 ssh-key 都有一个与之关联的短语（每个用户都知道的唯一秘密），在执行 git 功能时提示输入。

为了实现这一点，我们做

```
ssh-add /root/.ssh/A 
```

**或者**

```
ssh-add /root/.ssh/B 
```

但如前所述，这只保留在**活动的 ssh-session**中，**退出**或与服务器建立**新**的 ssh 会话 ssh-add info is **lost**。可以通过运行**ssh-add -L找到**

我也尝试过在 .ssh/config 中定义 IdentityFile ，就像在这个[问题中描述的那样](https://stackoverflow.com/questions/10698167/asking-git-to-look-for-different-key-other-than-id-rsa)

像这样的东西

```
Host github.com
        Hostname github.com
        User git
        IdentityFile /root/.ssh/A

Host github.com
        Hostname github.com
        User git
        IdentityFile /root/.ssh/B 
```

这仅适用于一个用户（有时它适用于“A”，有时它不适用，同样适用于“B”）

这种隔离能否实现，还是我听起来有点过于雄心勃勃

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T20:19:19.933

您对 IdentityFile 的编辑非常接近。但是，您需要在 IdentityFile 中列出**唯一的主机名。**因为您两次都使用 github.com 作为主机名，所以当您尝试连接到 github.com 时，它不知道该使用哪一个。

我们有类似的设置。我们有 5 个用户，他们都登录到一个帐户。但是，Github 需要看到他们每个人都使用自己的 ssh-key，所以我们有 5 个密钥。解决这个问题的诀窍是让你的文件看起来像这样

```
Host UserA_github
        Hostname github.com
        User git
        IdentityFile /root/.ssh/A

Host UserB_github
        Hostname github.com
        User git
        IdentityFile /root/.ssh/B 
```

每当*UserB*想要做一些与 git 相关的事情时（例如克隆他们的一个存储库），他们就会运行......

```
git clone UserB_github:UserB/MyRepo 
```

或类似的东西。这将表现得好像他们已经进入...

```
git clone github.com:UserB/MyRepo 
```

除了它将使用适当的身份文件/私钥。

我知道我的解决方案不使用持久性`ssh-add`，但我认为这会给您提供您想要的相同性能。不幸的是，您的用户每次执行交易时都需要输入密码。****

# c# - 更改持久层时更改域实体

> ID：10763414
> 
> 赞同：0
> 
> 时间：2012-05-26T03:42:54.133
> 
> 标签：c#, oop

在我的应用程序中，我一直在使用将其 ID 存储为字符串的数据库。数据库还为每个文档/行存储了另一个属性（Etag）。因此，我的域实体派生自这个基类：

```
public class EntityBase : NotifyPropertyChangedBase
{
    public string Id { get; set; }
    public Guid ETag { get; set; }
} 
```

现在我正在向我的应用程序添加另一个数据层，我不想删除旧的。如果能够根据运行时决策切换和使用特定的数据层，那就太好了。问题是我想将 Id 作为 int 存储在新数据库中。ETag 在那个新数据库中是一个不必要的概念。

我正在为如何管理这种变化而苦苦挣扎。如果我将 EntityBase.Id 更改为 int，则旧数据层将无法编译。如果使用旧数据层，我想使用某个 EntityBase，如果我使用新数据层，我想使用不同的 EntityBase。这只是一个想法。也许有更好的方法？关于如何完成这项工作的任何建议？

顺便说一句，我认为持久层问题不应该在域层对象中起作用（比如 Id 是字符串或 int）。然而，为时已晚，这就是我发现自己的处境。我希望有人对如何进行有一些好的建议。

我正在考虑将 Id2 添加到 EntityBase：

```
public class EntityBase : NotifyPropertyChangedBase
{
    public string Id { get; set; }
    public int Id2 { get; set; }  // New property for new DB only
    public Guid ETag { get; set; }
} 
```

然后，在我的新 DAL 映射中，我会将表中的 Id 列映射到 Id2 而不是 Id。但这行不通，因为我的业务逻辑仅引用 Id。还在想……我可能被卡住了……

作为 hack，我可以保留 EntityBase 的原始形式。然后，在新的 DAL 中，当我执行 ORM 时，我可以将表的 ID 转换为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:01:46.340

我建议再添加一层。例如，要创建一个这样的新类：

```
public abstract class CommonEntityBase<T> : NotifyPropertyChangedBase{
    public T Id {get;set;} 
} 
```

然后，从此类派生您的旧 EntityBase：

```
public class EntityBase : CommonEntityBase<string>{

    //this property is present only in this old implementation
    public Guid ETag { get; set; }
} 
```

所以现在，您可以创建一个新层并为此使用基类：

```
public class FancyEntityBase : CommonEntityBase<int>{
    //No ETag concept here - ad new properties, methods, etc.
} 
```

但是，如果您真的需要将主键更改为整数，则存在一个问题。这可能会在使用 ORM 时导致性能问题。

# java - Clojure - 从字节数组中删除 0？

> ID：10763415
> 
> 赞同：2
> 
> 时间：2012-05-26T03:43:41.873
> 
> 标签：java, clojure

我正在将文件读入字节数组，但是字节数组有一些我想删除的尾随 0（返回没有 0 的新字节数组）。但是字节数组不是一个简单的东西，所以我不能在它上面使用过滤器/删除/映射。

是对字节数组使用递归的唯一解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T04:48:47.620

您应该能够对字节数组使用序列操作：

```
(byte-array (take-while pos? (.getBytes (slurp "some/binary/file.dat")))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:04:08.997

Clojure 中的字节数组是一个序列，而过滤器、映射和其他函数对序列起作用。

您可以使用此函数删除尾随零：

```
(defn pos-byte-arrayE
    [seq]
    (take-while pos? seq)) 
```

您可以在字节数组上使用过滤器来删除所有零。

```
(defn pos-byte-arrayF
    [seq]
    (filter pos? seq))

repl-test.core=> (pos-byte-arrayF [1 2 3 0])
(1 2 3) 
```

# linux - 如何使用 git 跟踪我的 Linux 发行版的更改？

> ID：10763416
> 
> 赞同：5
> 
> 时间：2012-05-26T03:43:52.353
> 
> 标签：linux, git, mercurial, debian, dvcs

我正在试验一些 linux 配置，我想跟踪我的更改？当然我不想将我的整个操作系统置于版本控制之下？

有没有办法（使用 git、mercurial 或任何 VCS）在不存储整个操作系统的情况下跟踪更改？

这是我想象的：

1.  我做了一种 git init -> 存储所有文件的所有哈希，但不存储文件的内容
2.  我对我的文件系统进行了一些更改-> git 检测到此文件的哈希已更改
3.  我提交 -> 文件的内容被存储（或者甚至更好地存储原始文件和差异！我知道，这是不可能的......）

可能的？不可能的？变通办法？

编辑：我关心的只是最小化存储库的大小并拥有一个只包含我的更改的存储库。在我的存储库中拥有所有文件与我无关。例如，如果我推送到 github，我只希望它只包含已更改的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T03:57:17.050

看看[etckeeper](http://joeyh.name/code/etckeeper/)，它可能会完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:13:31.273

您想要的是`git update-index --info-only`或`... --index-info`，从手册页：“--info-only 用于注册文件而不将它们放置在对象数据库中。这对于仅状态存储库很有用。”。 `--index-info`是它的工业规模表亲。

对要跟​​踪的文件执行此操作，`write-tree`将索引结构写入对象 db，`commit-tree`然后`update-ref`更新分支。

要获取对象名称，请使用`git hash-object`*`filename`*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T03:51:06.190

这是我们所做的...

```
su -
cd /etc
echo "*.cache" > .gitignore
git init
chmod 700 .git
cd /etc; git add . && git add -u && git commit -m "Daily Commit" 
```

然后设置 crontab：

```
su -
crontab -e

# Put the following in:
0 3 * * *   cd /etc; git add . && git add -u && git commit -m "Daily Commit" 
```

现在您将每晚提交 /etc 中的所有更改

如果你想在一个 repo 中跟踪多个 /etc，那么你可以简单地在文件系统的根目录下进行，除了在 /.gitignore 中添加正确的忽略路径。我不清楚在 git 中使用 git 的影响，因此在这种情况下您可能需要格外小心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-14T19:59:30.683

我知道这个问题很老，但我认为这可能会对某人有所帮助。受@Jonathon 关于[如何记录特定文件的具体修改](https://stackoverflow.com/questions/47170539/how-to-record-concrete-modification-of-specific-files/47190973#47190973)问题的评论的启发，我创建了一个 shell 脚本，使您能够监控对特定文件所做的所有更改，同时保留所有更改历史记录。该脚本取决于正在安装的 inotifywait 和 git 包。

你可以在这里找到脚本 [https://github.com/hisham-hassan/linux-file-monitor](https://github.com/hisham-hassan/linux-file-monitor)

```
Usage: file-monitor.sh [-f|--file] <absolute-file-path> [-m|--monitor|-h|--history]  
       file-monitor.sh --help  

 -f,--file <absolute-file-path> Adding a file to the monitored files List. The <absolute-file-path>  
                                is the absolute file path of the file we need to action.  
                                PLEASE NOTE: Relative file path could cause issues in the script,  
                                please make sure to use the abolute path of the file. also try to   
                                avoid sym links, as it has not been tested.  
                                example: file-monitor.sh -f /absolute/path/to/file/test.txt -m  
 -m, --monitor                  Monitoring all the changes on the file. the monitoring will keep  
                                happening as long as the script is running; you may need to run it  
                                in the background.  
                                example: file-monitor.sh -f /absolute/path/to/file/test.txt -m  
 -h, --history                  showing the full history of the file.  
                                To exit, press "q"  
                                example: file-monitor.sh -f /absolute/path/to/file/test.txt -h  
 --uninstall                    uninstalls the script from the bin direcotry,  
                                and removes the monitoring history.  
 --install                      Adds the script to the bin directory, and creates  
                                the directories and files needed for monitoring.  
 --help                         Prints this help message. 
```

# gwt - 类类型如何传递给 GWT 中的 JSNI 代码？

> ID：10763417
> 
> 赞同：0
> 
> 时间：2012-05-26T03:43:58.097
> 
> 标签：gwt, jsni

我正在包装一个 JS 库，一种方法将类/原型作为参数。IE：

```
installPlugin(Prototype) 
```

此方法的包装 JSNI 函数看起来如何？

```
public final void native installPlugin(Class<?> clazz) /*-{
    this.installPlugin(clazz);
}-*/; 
```

这是不正确的，但符合我想要实现的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:03:19.073

这是不可能的。在 GWT 中，对象知道它们的类（由 返回`getClass()`），但`Class`实例没有对允许创建该类实例的构造函数/原型的引用。

如果您可以传递类的实例，那么您应该可以只使用`obj.prototype`. 但它在 DevMode 中不起作用，其中 Java 对象在传递给 JSNI 时是*不透明的句柄。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:20:58.267

Your prototype should have .toJs() method which converts it into JavaScriptObject type. pass it instead of Java Prototype.

# iphone - 通话结束时打开应用程序以显示有关通话时长的详细信息

> ID：10763420
> 
> 赞同：0
> 
> 时间：2012-05-26T03:45:17.113
> 
> 标签：iphone, call

我是 iPhone 应用程序开发的新手。现在我正在开发一个通话记录应用程序。我希望我的应用程序在后台运行，并且当呼叫完成时，应用程序会显示呼叫详细信息。我不知道如何开发这个。请知道的人帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T03:48:06.097

抱歉，没有办法使用 iOS SDK 做你想做的事。用户的通话记录是私密的。

# r - R：创建选定的加拿大省份和美国各州的地图

> ID：10763421
> 
> 赞同：12
> 
> 时间：2012-05-26T03:45:37.640
> 
> 标签：r, gis

我正在尝试创建选定的加拿大省/地区和选定的美国州的地图。到目前为止，最好的地图似乎是使用 GADM 数据生成的地图：[http ://www.gadm.org/](http://www.gadm.org/)

但是，我无法在同一张地图上绘制美国和加拿大，或者只绘制选定的省/地区和州。例如，我对阿拉斯加、育空地区、西北地区、不列颠哥伦比亚省、阿尔伯塔省和蒙大拿州等感兴趣。

此外，美国地图似乎沿国际日期变更线分开。

有人可以帮我：

1.  在一张地图上绘制上述省/地区和州
2.  避免美国在国际日期变更线上分裂
3.  覆盖经纬度网格
4.  选择一个特定的投影，也许是多边形。

也许 spplot 不允许用户指定投影。我没有在 spplot 帮助页面上看到选择投影的选项。我知道如何使用地图包中的地图功能选择投影，但这些地图看起来并不好，我也无法使用该功能绘制所需的省/地区和州子集。

我不知道如何开始添加经纬度网格。但是，文件“sp.pdf”的第 3.2 节似乎解决了该主题。

以下是我到目前为止提出的代码。我已经加载了我偶然发现的每个与地图相关的包，并注释掉了 GADM 数据，省/地区或州边界除外。

不幸的是，到目前为止，我只设法绘制了加拿大或美国的地图

```
library(maps)
library(mapproj)
library(mapdata)
library(rgeos)
library(maptools)
library(sp)
library(raster)
library(rgdal)

# can0<-getData('GADM', country="CAN", level=0) # Canada
  can1<-getData('GADM', country="CAN", level=1) # provinces
# can2<-getData('GADM', country="CAN", level=2) # counties

plot(can1)    
spplot(can1, "NAME_1") # colors the provinces and provides
                       # a color-coded legend for them
can1$NAME_1            # returns names of provinces/territories
# us0 <- getData('GADM', country="USA", level=0)
  us1 <- getData('GADM', country="USA", level=1)
# us2 <- getData('GADM', country="USA", level=2)
plot(us1)              # state boundaries split at 
                       # the dateline
us1$NAME_1             # returns names of the states + DC
spplot(us1, "ID_1")
spplot(us1, "NAME_1")  # color codes states and
                       # provides their names
#
# Here attempting unsuccessfully to combine U.S. and Canada on one map.
# Attempts at selecting given states or provinces have been unsuccessful.
#
plot(us1,can1)
us.can1 <- rbind(us1,can1) 
```

谢谢你的帮助。到目前为止，我在上面的步骤 2 - 4 上没有取得任何进展。也许我要求太多了。也许我应该简单地切换到 ArcGIS 并尝试使用该软件。

我已阅读此 StackOverflow 帖子：

[R可以用于GIS吗？](https://stackoverflow.com/questions/5757058/can-r-be-used-for-gis)

编辑

我现在借用了“与 R 的应用空间数据分析” Bevand 等人的电子副本。（2008）并从本书的网站下载（或找到）相关的 R 代码和数据：

[http://www.asdar-book.org/](http://www.asdar-book.org/)

我还在这里找到了一些漂亮的与 GIS 相关的 R 代码：

[https://sites.google.com/site/rodriguezsanchezf/news/usingrasagis](https://sites.google.com/site/rodriguezsanchezf/news/usingrasagis)

如果以及当我学习如何实现预期目标时，我将在此处发布解决方案。尽管如果我无法实现 R 中的目标，我最终可能会迁移到 ArcGIS。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T22:11:08.667

要在同一设备上绘制多个`SpatialPolygons`对象，一种方法是先指定要绘制的地理范围，然后使用`plot(..., add=TRUE)`. 这将仅将那些感兴趣的点添加到地图中。

使用投影（例如多圆锥投影）进行绘图需要首先使用包中的`spTransform()`函数`rgdal`来确保所有层都在同一个投影中。

```
## Specify a geographic extent for the map
## by defining the top-left and bottom-right geographic coordinates
mapExtent <- rbind(c(-156, 80), c(-68, 19))

## Specify the required projection using a proj4 string
## Use http://www.spatialreference.org/ to find the required string
## Polyconic for North America
newProj <- CRS("+proj=poly +lat_0=0 +lon_0=-100 +x_0=0 
            +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs")

## Project the map extent (first need to specify that it is longlat) 
mapExtentPr <- spTransform(SpatialPoints(mapExtent, 
                  proj4string=CRS("+proj=longlat")),
                  newProj)

## Project other layers
can1Pr <- spTransform(can1, newProj)
us1Pr <- spTransform(us1, newProj) 

## Plot each projected layer, beginning with the projected extent
plot(mapExtentPr, pch=NA)
plot(can1Pr, border="white", col="lightgrey", add=TRUE)
plot(us1Pr, border="white", col="lightgrey", add=TRUE) 
```

使用相同的方法可以轻松地向地图添加其他功能，例如突出显示感兴趣的司法管辖区：

```
## Highlight provinces and states of interest
theseJurisdictions <- c("British Columbia",
                        "Yukon",
                        "Northwest Territories",
                        "Alberta",
                        "Montana",
                        "Alaska")

plot(can1Pr[can1Pr$NAME_1 %in% theseJurisdictions, ], border="white", 
    col="pink", add=TRUE)

plot(us1Pr[us1Pr$NAME_1 %in% theseJurisdictions, ], border="white", 
    col="pink", add=TRUE) 
```

结果如下：

![在此处输入图像描述](../Images/aebe8e2e8c8759ba83718b32c86ea19d.png)

我认为，当使用投影时添加网格线非常复杂，需要另一篇文章。看起来好像@Mark Miller 在下面添加了它！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T13:07:43.093

下面我修改了 PaulG 的出色答案以显示经纬度网格。网格比我想要的要粗，但可能就足够了。我使用英国和下面的代码。我不知道如何在这篇文章中包含结果。

```
library(rgdal)
library(raster)

# define extent of map area
mapExtent <- rbind(c(0, 62), c(5, 45))

# BNG is British National Grid    
newProj <- CRS("+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601271625 
           +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs") 

mapExtentPr <- spTransform(SpatialPoints(mapExtent, 
                  proj4string=CRS("+proj=longlat")),
                  newProj)

# provide a valid 3 letter ISO country code
# obtain a list with: getData("ISO3")
uk0 <- getData('GADM', country="GBR", level=0) # UK
uk1 <- getData('GADM', country="GBR", level=1) # UK countries
uk2 <- getData('GADM', country="GBR", level=2) # UK counties

# United Kingdom projection
uk1Pr      <- spTransform(uk1, newProj)

# latitude-longitude grid projection
grd.LL     <- gridlines(uk1, ndiscr=100)
lat.longPR <- spTransform(grd.LL, newProj)

# latitude-longitude text projection
grdtxt_LL  <- gridat(uk1)
grdtxtPR   <- spTransform(grdtxt_LL, newProj)

# plot the map, lat-long grid and grid labels
plot(mapExtentPr, pch=NA)
plot(uk1Pr, border="white", col="lightgrey", add=TRUE)
plot(lat.longPR, col="black", add=TRUE)
text(coordinates(grdtxtPR),
   labels=parse(text=as.character(grdtxtPR$labels))) 
```

结果如下：

![在此处输入图像描述](../Images/a616025bbb8bc034453443452eee1cac.png)

# c# - 如何在 C# 中以编程方式分离数据库并在本地设备中复制 db 文件

> ID：10763425
> 
> 赞同：2
> 
> 时间：2012-05-26T03:47:31.043
> 
> 标签：c#, sql

我想从我的 C# 代码中将数据库从 SQL Server 2005 中分离出来。我使用 DROP 查询来分离。但它声明从我的本地系统中删除文件。我想分离数据库并在运行时复制该数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-03T14:38:55.890

首先尝试在`SQL Server`不提供任何数据库名称或路径的情况下连接到，如下所示：

```
ConnectionString = @"Data Source= YourDataSource ;Integrated Security=True;Connect Timeout=30"; 
```

注意：
YourDataSource 可以是`.`or `.\SQLEXPRESS` or `.\MSSQLSERVER`or or `(local)\SQLEXPRESS`or `(localdb)\v11.0`or etc.

然后通过使用以下查询，分离您的数据库。

```
"ALTER DATABASE [your DB] SET OFFLINE WITH ROLLBACK IMMEDIATE \n\r exec sp_detach_db @dbname = [your DB]"; 
```

# 好的。

我的示例代码：

```
sql_connect1.ConnectionString = @"Data Source=.\sqlexpress;Integrated Security=True;Connect Timeout=30";
sql_command.CommandText = "ALTER DATABASE [IRAN] SET OFFLINE WITH ROLLBACK IMMEDIATE \n\r exec sp_detach_db @dbname = [IRAN]";
                  sql_command.Connection = sql_connect1;
                  sql_connect1.Open();
                  sql_command.ExecuteNonQuery();
                  sql_connect1.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T03:51:02.133

SQL Server SMO API 让您可以做任何 Sql Server 管理工作室可以做的事情（来自 c# 代码）。查看此链接 [http://msdn.microsoft.com/en-us/library/ms162175.aspx](http://msdn.microsoft.com/en-us/library/ms162175.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:25:06.533

您可以通过以下代码在SqlServer 上分离数据库： SqlServedr 'sp_detach_db' 中有一个用于分离数据库的存储过程，有一个参数DataBaseName。代码中的“MyDatabase”是数据库名称，您应该将其更改为您的数据库名称

```
// C# Code

SqlConnection conn = new SqlConnection("Server=(local); Data Source=;Integrated Security=SSPI");
SqlCommand cmd = new SqlCommand("", conn);

cmd.CommandText = "sys.sp_detach_db MyDatabase";

conn.Open();

cmd.ExecuteNonQuery();

cmd.Dispose();
conn.Dispose(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T12:28:34.833

Myo Thu 的评论将我引向了正确的方向，因此这里总结了有关如何分离数据库的步骤。

[第 1 步：在您的项目[Reference]](http://technet.microsoft.com/en-us/library/ms162129.aspx)中引用以下 DLL ：

> Microsoft.SqlServer.ConnectionInfo.dll
> 
> Microsoft.SqlServer.Smo.dll
> 
> Microsoft.SqlServer.Management.Sdk.Sfc.dll
> 
> Microsoft.SqlServer.SqlEnum.dll

第2步：使用：

```
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common; 
```

第 3 步：代码

```
var server = new Server(new ServerConnection(@"MyMachine\SQL2012"));
// Ensure database is not in use
server.KillAllProcesses("TestDatabase");
server.DetachDatabase("TestDatabase", true); 
```

[编辑：现在](http://sudhanshutheone.net/2014/05/28/execute-sql-batch-queries-using-c-and-smo-magic/)记录在我的博客中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T15:52:51.590

您可以使用存储过程来解决您的问题。以下链接可能有用：

[http://msdn.microsoft.com/en-us/library/aa259611.aspx](http://msdn.microsoft.com/en-us/library/aa259611.aspx)

# ios - 如果我切换应用程序，如何防止 iOS 5 推文表被取消？

> ID：10763435
> 
> 赞同：1
> 
> 时间：2012-05-26T03:49:45.457
> 
> 标签：ios, twitter

我正在编写一个应用程序，该应用程序涉及从用户的手机发送电子邮件、推文和 Facebook 消息（按此顺序）。问题是，如果用户在编辑推文表的过程中执行多项任务然后返回到应用程序，当他/她返回时，推文表会取消。

我正在使用此代码来展示推文表（以防万一）：

```
- (void)sendTweet {
    TWTweetComposeViewControllerCompletionHandler
    completionHandler =
    ^(TWTweetComposeViewControllerResult result) {
        switch (result)
        {
            case TWTweetComposeViewControllerResultCancelled:
                NSLog(@"Twitter Result: canceled");
                break;
            case TWTweetComposeViewControllerResultDone:
                NSLog(@"Twitter Result: sent");
                break;
            default:
                NSLog(@"Twitter Result: default");
                break;
        }
        [rootViewController dismissModalViewControllerAnimated:YES];
    };
    [tweetViewController setCompletionHandler:completionHandler];

    // ...Set up the tweet sheet with text and image...

    [rootViewController presentModalViewController:tweetViewController animated:YES];    
} 
```

有什么方法可以防止用户切换应用后推文表被取消？任何建议将不胜感激！

# java - android项目有红色x但代码没有错误

> ID：10763439
> 
> 赞同：7
> 
> 时间：2012-05-26T03:50:44.057
> 
> 标签：java, android, eclipse

我正在尝试运行android项目。该项目在项目文件夹上有一个红色 x，但没有一个子文件夹有那个红色 x。没有突出显示显示错误的代码。不幸的是，我的项目都没有执行。当我作为项目运行时，它说这个错误。

![在此处输入图像描述](../Images/bbe66058d21f3447893e224eeced7dae.png)

它也不会在问题选项卡中显示任何错误。

我该如何解决这个问题？

我的java构建路径

![在此处输入图像描述](../Images/c03338a9173c6016fd71595338e85d74.png)

**编辑**

这是我的代码

```
public class AndroidLoginActivity extends Activity implements OnClickListener {
EditText username, password;
Button login;

String user, pass;
HttpClient httpclient;
HttpPost httppost;
ArrayList<NameValuePair> nameValuePair;
HttpResponse response;
HttpEntity entity;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initialise();
}

private void initialise() {
    // TODO Auto-generated method stub
    username = (EditText)findViewById(R.id.etUsername);
    password = (EditText)findViewById(R.id.etPassword);
    login = (Button)findViewById(R.id.btnLogin);

    login.setOnClickListener(this);
}

public void onClick(View v) {
    httpclient = new DefaultHttpClient();
    httppost = new HttpPost("http://10.0.2.2/android_login/index.php");

    user = username.getText().toString();
    pass = password.getText().toString();

    try {
        nameValuePair = new ArrayList<NameValuePair>();

        nameValuePair.add(new BasicNameValuePair("username", user));
        nameValuePair.add(new BasicNameValuePair("password", pass));
        httppost.setEntity(new  UrlEncodedFormEntity(nameValuePair));
        response = httpclient.execute(httppost);
        if(response.getStatusLine().getStatusCode() == 200) {
            entity = response.getEntity();

            if(entity != null) {
                InputStream instream = entity.getContent();
                JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
                String retUser = jsonResponse.getString("username"); //mysql table field
                String retPass = jsonResponse.getString("password");

                if(username.equals(retUser) && password.equals(retPass)) {
                    SharedPreferences sp = getSharedPreferences("logindetails",0); 
                    SharedPreferences.Editor spedit = sp.edit();
                    spedit.putString("user", user);
                    spedit.putString("pass", pass);
                    spedit.commit();
                    Toast.makeText(getBaseContext(), "Success", Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(getBaseContext(), "Login Failed", Toast.LENGTH_SHORT).show();
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Login Failed", Toast.LENGTH_SHORT).show();
    }
}

public static String convertStreamToString(InputStream is) {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch(IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}
} 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/etUsername"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Username..." >

</EditText>

<EditText
    android:id="@+id/etPassword"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="textPassword"
    android:text="Password..." />

<Button
    android:id="@+id/btnLogin"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Login" />

</LinearLayout> 
```

这是我的清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.zafar.androidlogin"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AndroidLoginActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

**错误日志**

![在此处输入图像描述](../Images/9c2f2fbb6545f949523ded7760ed8794.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:15:59.647

我正在回答我自己的问题，以便如果其他人有同样的问题，那么他们很容易找到解决方案。

**解决方案**

我删除了`debug.keystore`该路径上存在的文件`C:\Users\Administrator\.android`

然后我清理了项目并且它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T16:23:58.853

右键单击您的项目 → android 工具 → android 支持库。

# python - 如何在 Ubuntu 上通过 pip 安装 python3 版本的软件包？

> ID：10763440
> 
> 赞同：437
> 
> 时间：2012-05-26T03:50:57.313
> 
> 标签：python, ubuntu, python-3.x, ubuntu-12.04, pip

我两者都有`python2.7`并`python3.2`安装在`Ubuntu 12.04`.
符号链接`python`链接到`python2.7`.

当我输入：

```
sudo pip install package-name 
```

它将默认安装`python2`版本的`package-name`.

一些软件包同时支持`python2`和`python3`。
如何安装via`python3`的版本？`package-name``pip`

* * *

## 回答 #1

> 赞同：474
> 
> 时间：2012-09-04T11:01:30.003

**Ubuntu 12.10+ 和 Fedora 13+ 有一个名为的软件包`python3-pip`，它将安装`pip-3.2`（或`pip-3.3`，`pip-3.4`或`pip3`更新版本），而无需跳过这些环节。**

* * *

我遇到了这个问题并修复了这个问题，而不需要`wget`类似或 virtualenvs（假设 Ubuntu 12.04）：

1.  安装包`python3-setuptools`：运行`sudo aptitude install python3-setuptools`，这会给你命令`easy_install3`。
2.  使用 Python 3 的 setuptools: run 安装 pip `sudo easy_install3 pip`，这将为您提供`pip-3.2`类似 kev 解决方案的命令。
3.  安装你的 PyPI 包：运行`sudo pip-3.2 install <package>`（当然，将 python 包安装到你的基础系统需要 root）。
4.  …</li>
5.  利润！

* * *

## 回答 #2

> 赞同：267
> 
> 时间：2012-05-26T03:57:28.280

你可能想构建一个`virtualenv`python3，然后在激活virtualenv后安装python3的包。所以你的系统不会被搞砸:)

这可能是这样的：

```
virtualenv -p /usr/bin/python3 py3env
source py3env/bin/activate
pip install package-name 
```

* * *

## 回答 #3

> 赞同：212
> 
> 时间：2012-10-21T19:25:36.017

# 简答

```
sudo apt-get install python3-pip
sudo pip3 install MODULE_NAME 
```

资料来源：[Shashank Bharadwaj 的评论](https://stackoverflow.com/questions/10763440/how-to-install-python3-version-of-package-via-pip#comment17706098_12262143)

# 长答案

简短的回答仅适用于较新的系统。在某些版本的 Ubuntu 上，命令是`pip-3.2`：

```
sudo pip-3.2 install MODULE_NAME 
```

如果它不起作用，此方法应该适用于任何 Linux 发行版和[支持的版本](https://pip.pypa.io/en/stable/installing/#python-and-os-compatibility)：

```
sudo apt-get install curl
curl https://bootstrap.pypa.io/get-pip.py | sudo python3
sudo pip3 install MODULE_NAME 
```

如果没有`curl`，请使用`wget`. 如果没有`sudo`，请切换到`root`. 如果`pip3`符号链接不存在，请检查类似 pip-3 的内容。**X**

许多 python 包也需要 dev 包，所以也安装它：

```
sudo apt-get install python3-dev 
```

资料来源：
[python 使用 pip 安装软件包](https://askubuntu.com/questions/104514/python-installing-packages-with-pip)
[Pip latest install](http://www.pip-installer.org/en/latest/installing.html)

如果您想要更升级的 Python 版本，还可以查看[Tobu 的答案。](https://stackoverflow.com/questions/10763440/how-to-install-python3-version-of-package-via-pip#15269233)

我想补充一点，使用虚拟环境通常是开发 python 应用程序的首选方式，所以@felixyan 的答案可能是理想世界中最好的。但是，如果您真的想全局安装该软件包，或者如果需要在不激活虚拟环境的情况下频繁测试/使用它，我认为将其安装为全局软件包是可行的方法。

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2014-02-24T14:22:17.850

好吧，在**ubuntu 13.10/14.04**上，情况有些不同。

## 安装

```
$ sudo apt-get install python3-pip 
```

## 安装包

```
$ sudo pip3 install packagename 
```

不是`pip-3.3 install`

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2012-05-26T04:39:31.347

安装最新`pip2`/`pip3`和相应软件包的最简单方法：

```
curl https://bootstrap.pypa.io/get-pip.py | python2
pip2 install package-name    

curl https://bootstrap.pypa.io/get-pip.py | python3
pip3 install package-name 
```

^(**注意：**请将这些命令运行为`root`)

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2015-07-12T17:08:06.033

我在尝试安装 pylab 时遇到了同样的问题，我找到了这个[链接](https://docs.python.org/3/installing/)

所以我在 Python 3 中安装 pylab 所做的是：

```
python3 -m pip install SomePackage 
```

它工作正常，正如您在链接中看到的，您可以为您拥有的每个 Python 版本执行此操作，所以我想这可以解决您的问题。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-06-23T23:29:08.107

老问题，但没有一个答案让我满意。我的一个系统正在运行 Ubuntu 12.04 LTS，由于某种原因没有包`python3-pip`或`python-pip`Python 3。所以这就是我所做的（所有命令都以 root 身份执行）：

*   安装`setuptools`Python3 以防万一。

    ```
    apt-get install python3-setuptools 
    ```

    或者

    ```
    aptitude install python3-setuptools 
    ```

*   使用 Python 2.4+，您可以`easy_install`使用特定的 Python 版本调用`python -m easy_install`. 因此`pip`，对于 Python 3，可以通过以下方式安装：

    ```
    python3 -m easy_install pip 
    ```

*   就是这样，你得到`pip`了 Python 3。现在只需调用`pip`特定版本的 Python 来安装 Python 3 的包。例如，在我的系统上安装了 Python 3.2，我使用：

    ```
    pip-3.2 install [package] 
    ```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-05-28T13:35:19.110

如果您在两个 python 中都安装了 pip，并且两者都在您的路径中，则只需使用：

```
$ pip-2.7 install PACKAGENAME
$ pip-3.2 install PACKAGENAME 
```

参考：

*   [http://www.pip-installer.org/docs/pip/en/0.8.3/news.html#id4](http://www.pip-installer.org/docs/pip/en/0.8.3/news.html#id4)
*   [https://github.com/pypa/pip/issues/200](https://github.com/pypa/pip/issues/200)

这是问题[#2812520的副本](https://stackoverflow.com/questions/2812520/pip-dealing-with-multiple-python-versions/4910393#4910393)

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2019-01-16T10:20:50.143

如果您的系统具有`python2`默认设置，请使用以下命令将软件包安装到`python3`

`$ python3 -m pip install <package-name>`

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-03-07T10:52:54.387

很简单：

```
sudo aptitude install python3-pip
pip-3.2 install --user pkg 
```

如果你想要 Python 3.3，这不是 Ubuntu 12.10 的默认设置：

```
sudo aptitude install python3-pip python3.3
python3.3 -m pip.runner install --user pkg 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-05-06T13:09:37.617

您也可以只运行`pip3 install packagename`而不是`pip`,

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-05-26T04:39:40.823

首先，您需要为所需的 Python 3 安装安装 pip。然后你运行那个 pip 来安装那个 Python 版本的包。

由于您在 /usr/bin 中同时拥有 pip 和 python 3，我假设它们都安装了某种包管理器。那个包管理器也应该有一个 Python 3 pip。那是你应该安装的。

Felix 对 virtualenv 的推荐是一个不错的选择。如果你只是在测试，或者你在做开发，那么你不应该在系统 python 中安装包。在这些情况下，使用 virtualenv 甚至构建自己的 Python 进行开发会更好。

但是如果你真的*想*在系统 python 中安装这个包，安装 Python 3 的 pip 是要走的路。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-01-05T22:58:13.777

虽然这个问题与 Ubuntu 有关，但让我说我在 Mac 上并且我的`python`命令默认为 Python 2.7.5。我也有 Python 3，可以通过 访问`python3`，所以知道 pip 包的来源，我只是下载了它并针对它发布`sudo python3 setup.py install`了它，当然，现在只有 Python 3 在其站点包中包含这个模块。希望这可以帮助一个流浪的 Mac 陌生人。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-06-04T20:56:28.387

直接执行 pip 二进制文件。

首先找到您想要的 PIP 版本。

```
jon-mint python3.3 # whereis ip
ip: /bin/ip /sbin/ip /usr/share/man/man8/ip.8.gz /usr/share/man/man7/ip.7.gz 
```

然后执行。

```
jon-mint python3.3 # pip3.3 install pexpect
Downloading/unpacking pexpect
  Downloading pexpect-3.2.tar.gz (131kB): 131kB downloaded
  Running setup.py (path:/tmp/pip_build_root/pexpect/setup.py) egg_info for package pexpect

Installing collected packages: pexpect
  Running setup.py install for pexpect

Successfully installed pexpect
Cleaning up... 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-05-05T03:31:44.037

1.  您应该安装所有依赖项：

    `sudo apt-get install build-essential python3-dev python3-setuptools python3-numpy python3-scipy libatlas-dev libatlas3gf-base`

2.  安装pip3（如果已经安装，请看第3步）：

    `sudo apt-get install python3-pip`

3.  我通过 pip3 安装 scikit-learn

    `pip3 install -U scikit-learn`

4.  打开你的终端并进入python3环境，输入`import sklearn`检查它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-02-28T14:00:12.977

要为 python3 使用安装 pip，应使用 pip3 而不是 pip。要在安装python版本之前在ubuntu 18.08 bionic
中安装python，请激活虚拟环境，以便在以后的python版本中不会出现任何问题。

```
virtualenv -p /usr/bin/python3 py3env
source py3env/bin/activate 
```

然后安装你想要的实际 python 版本。

`>> sudo apt-get install python3.7`

在 ubuntu 中安装所需的 pip 包
`>> sudo apt-get install python3-pip`

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2014-04-10T18:11:36.060

安装 python3 的另一种方法是使用 wget。以下是安装步骤。

```
wget http://www.python.org/ftp/python/3.3.5/Python-3.3.5.tar.xz
tar xJf ./Python-3.3.5.tar.xz
cd ./Python-3.3.5
./configure --prefix=/opt/python3.3
make && sudo make install 
```

此外，可以使用相同的方法创建别名

```
echo 'alias py="/opt/python3.3/bin/python3.3"' >> ~/.bashrc 
```

现在打开一个新终端并输入**py**并按 Enter。

# vb.net - VB.Net 中带有选项严格错误的 LINQ

> ID：10763445
> 
> 赞同：1
> 
> 时间：2012-05-26T03:52:41.647
> 
> 标签：vb.net, linq

我正面临一个 LINQ 的技巧问题。我生成上面的代码：

... '返回一个对象

```
Dim lReturn = (From tb_hb In lObjLNQContext.tb_hbs _
    Where tb_hb.id_process = codigoProcessamento _
    Order By tb_hb.dth_hb Ascending _
    Select tb_hb.id_process, tb_hb.dth_hb).AsEnumerable

Return lReturn 
```

当我检查 lReturn DataType 是 Linq.DataQuery 时。

我使用上面的代码来访问数据：

```
For Each row In lResult
  Console.WriteLine(row.dth_hb) 
```

如果我关闭 Option Explicit，一切都运行良好。当我打开它时，编译器向我显示一条消息：表达式是“对象”类型，它不是集合类型。引用 lResult 变量。

我真的不知道如何解决它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:24:43.393

Your LINQ expression uses anonymous types, which are only available in one method.

Define a class to hold the two values id_process, dth_hb and change your select to create instances of the class. Then you can declare the function as returning List Of the new class

Example [here](https://stackoverflow.com/questions/633908/linq-returning-list-of-anonymous-types)

# c# - Windows Phone 7 - C# 如何在代码中使用 ListPickerItem 而不会崩溃？

> ID：10763450
> 
> 赞同：1
> 
> 时间：2012-05-26T03:55:16.453
> 
> 标签：c#, windows-phone-7, silverlight-4.0, crash, listpicker

到目前为止，Listpickeritem 似乎有点让人头疼，因为它很容易崩溃。

我有以下代码在运行应用程序时选择 listpickeritem 时崩溃：

```
for (int i = 1; i <= 100; i++)
    {
         ListPickerItem item = new ListPickerItem();
         item.Content = i.ToString() + "%";
         item.FontSize = 35;
         listPicker1.Items.Add(item); 
    } 
```

XAML：

```
 <toolkit:ListPicker Name="listPicker1" Margin="251,117,92,-93" Width="113" FontSize="40">
                </toolkit:ListPicker> 
```

有谁知道通过 c# 设置字体大小而不会崩溃的方法？如果我手动输入 xaml，这也会导致崩溃，并且我不想在可以以编程方式执行时输入一个长列表。

*编辑*下面的答案。

最初出现的错误消息：未处理的异常 ">PivotApp1.dll!PivotApp1.App.Application_UnhandledException(object sender, System.Windows.ApplicationUnhandledExceptionEventArgs e) Line 125 + 0x5 bytes C#"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:05:21.940

基本上我想要做的是创建一个列表选择器列表，以供用户选择 1 到 100 之间的百分比。对于一个简单的任务，这似乎有很多代码，但不幸的是，没有任何其他方法可以修改 listpicker 字体大小。以下代码是我想出的解决我的问题的解决方案：

XAML：

```
<toolkit:ListPicker x:Name="listPicker1" 
                    Margin="251,117,92,-93" 
                    Width="113" >
                    <toolkit:ListPicker.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Percent}" FontSize="40" />
                        </DataTemplate>
                    </toolkit:ListPicker.ItemTemplate>
                    <toolkit:ListPicker.FullModeItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Percent}" FontSize="40" />
                        </DataTemplate>
                    </toolkit:ListPicker.FullModeItemTemplate>
                </toolkit:ListPicker> 
```

创建了一个名为 Percentage.cs 的新类

```
public class Percentage
{
    public int Percent
    {
        get;
        set;
    }

} 
```

然后，在我想要控制列表选择器的类中，我添加了以下代码以使用从 Percentage 类创建的列表创建 1 到 100 的列表：

```
 List<Percentage> percentage = new List<Percentage>();
   for(int i = 1; i <= 100; i++)
   {
        percentage.Add(new Percentage() { Percent = i });

   }
   this.listPicker1.ItemsSource = percentage; 
```

# asp.net - asp.net - 列表/网格视图自定义布局

> ID：10763451
> 
> 赞同：0
> 
> 时间：2012-05-26T03:55:20.403
> 
> 标签：asp.net, vb.net, listview, gridview

我正在使用asp.net vb ...

我正在尝试从几周内创建自定义列表/网格视图。

在 VS2010 中有很多控件，但没有人允许创建像这个网站这样的自定义视图...

[http://net.tutsplus.com/category/tutorials/html-css-techniques/](http://net.tutsplus.com/category/tutorials/html-css-techniques/)

**我想用图片缩略图、超链接、一些文本和漂亮的分页号码来定制类似的东西。我尝试在 google 、 youtube 上找到，但没有很好的例子……请提供我的步骤。**

JS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:07:32.970

如果您希望 gridview 看起来像这样，您将只需要创建一个不显示标题的可见列，并将所有控件放入此列的内容模板中。从那里您必须手动将控件设置为所需的样式。

如果行中有动态内容，则在 gridview 的行数据绑定期间，您可以使用 findcontrol 方法访问每个控件并从那里自定义每个控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:00:30.053

使用 asp.net ListView 控件。它使您可以完全控制呈现的 html。

[使用 ASP.NET 3.5 的 ListView 和 DataPager 控件](http://www.4guysfromrolla.com/articles/122607-1.aspx)

# iphone - 如何制作像日历应用程序的详细视图一样的表格视图

> ID：10763457
> 
> 赞同：0
> 
> 时间：2012-05-26T03:56:34.017
> 
> 标签：iphone, uitableview

我认为 UITableViewCellStyleSubtitle 将接近 Calendar App 的详细视图，但我不知道如何制作。或者这个tableview单元格有什么解决方案吗？

![在此处输入图像描述](../Images/2e38f70e756ac5c375c51422f6a6fb7e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:10:43.853

它只是一个`Grouped table`动态高度的视图`cells`。您可以通过使用和创建两个来创建`grouped table`视图和计算`height`。`cell in` `heightForRowAtIndexPath``CGSize``reuable cell``labels`

# php - 关于 PHP 连接对象

> ID：10763462
> 
> 赞同：0
> 
> 时间：2012-05-26T03:58:26.637
> 
> 标签：php

有人可以向我解释为什么以下错误：

```
$sql='SELECT * FROM images';
$hostname ='localhost';
$username= 'root';
$password= '';
$db= 'myDB';

$numRows=new mysqli($hostname, $username, $password, $db)->query($sql)-> num_rows; 
```

抛出的错误是：语法错误，意外的 T_OBJECT_OPERATOR .....

是否可以在上面的一个语句中更正它？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:53:53.600

在您实例化 mysqli*之后进行*链接。

```
$m = new mysqli($hostname, $username, $password, $db);
$numrows = $m->query($sql)->num_rows; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:18:47.953

在 .周围放置括号`new mysqli(....)`。

IE。放置以下内容：

```
$numRows=(new mysqli($hostname, $username, $password, $db))->query($sql)-> num_rows; 
```

代替：

```
$numRows=new mysqli($hostname, $username, $password, $db)->query($sql)-> num_rows; 
```

但正如**@MarcB**所说，这是一件非常可怕的事情。以后，调试会很困难。

# php - 只为一个页面设置cookie，如果用户浏览其他页面，则不发送回服务器

> ID：10763466
> 
> 赞同：2
> 
> 时间：2012-05-26T04:00:25.630
> 
> 标签：php, javascript, jquery

cookie 只能设置/获取一页吗？

如果我浏览与该页面相同的根域上的其他页面，cookie 不会发送到服务器。或者根本不发送，但仍然可以通过 jQuery cookie 插件访问。我的意思是 cookie 只在客户端，最好不要将它们发送到服务器。

我的情况是：在每个页面上，我都需要在浏览器中存储一些 cookie，它们因页面的 URL 而异。

因此，如果用户浏览了大约 30 个页面，浏览器将有 30 个 cookie，并且在浏览任何页面时都将它们发送到服务器。反正这样不好。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:08:06.150

```
setcookie($name, $value, $expire, $path, $domain); 
```

您可能想要设置`$path`参数。请参阅[setcookie](http://php.net/manual/en/function.setcookie.php)参考。

# nsarray - 在保存到 NSArray 之前对 response.products 进行排序，这样我每次都会得到固定索引

> ID：10763467
> 
> 赞同：1
> 
> 时间：2012-05-26T04:00:36.870
> 
> 标签：nsarray, in-app-purchase

我浏览了 Ray 的应用内购买教程

我得到了它的工作，但我发现来自 Apple 的产品响应使用 NSSet，因此每次都会更改顺序。

我希望在将其保存到以后可以使用的数组中之前按字母顺序对其进行排序。

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

    NSLog(@"Received products results..."); 

   self.products = response.products;
    self.request = nil;    

    [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:_products];    
} 
```

我想获取 response.products 并在将其保存到 self.products 之前对其进行排序，这样索引号将是可预测的。

有小费吗？

谢谢。

# r - 从数据框中的所有值中减去特定行的列特定值，在 R

> ID：10763473
> 
> 赞同：1
> 
> 时间：2012-05-26T04:02:18.410
> 
> 标签：r, matrix, subtraction

我在 R 中有一个数据对象*信号*，其中包含 40,000 多行（命名变量）的数值和 200 多列（样本）。对于每一列的每一行，我想减去该列名为*背景*的行的值。

下面的代码可用于在 R 中创建示例*信号*对象。在示例中，对于 A 列，将从*channelNo1*到*3*的值中减去*背景*值 4 。同样，对于 B 列，要减去 6 的值。等等。在 R 中实现这一目标的最简单方法是什么？

 **```
text <- textConnection('
             A   B   C
channelNo1  12  22  32
channelNo2  13  21  33
channelNo3  12  21  30
background   4   6   8
')
signal <- read.table(text, header = TRUE)
close(text)

typeof(signal)
# returns 'list'

class(signal)
# returns 'data.frame' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T00:56:40.397

R矩阵中的元素按列定向（检查`matrix(1:12, nrow=3)`并`signal - signal[4,]`没有按照你的想法做——检查B列，其中第二个和第三个值应该相同（并且等于15）。你可以写

```
as.data.frame(Map("-", signal, as.vector(signal[4,]))) 
```

（我认为这会相对有效）但由于数据确实似乎是一个矩阵（即同质类型的矩形），因此将其作为矩阵进行操作更有意义

```
m = as.matrix(signal)
sweep(m, 2, m[4,], "-") 
```**

# php - 带有 PHP 的 mySQL 中的两个 WHERE 条件

> ID：10763474
> 
> 赞同：0
> 
> 时间：2012-05-26T04:02:35.163
> 
> 标签：php, mysql, where

我的网站上有一个错误，上面写着

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in ../../../guestbook.php on line 117 
```

当我检查我的第 117 行时

```
while ($row=mysql_fetch_array($query)) { 
```

而且我认为我的查询是错误的...

```
$query = mysql_query("SELECT * FROM guestbook WHERE permission='0' AND ignore='0' ORDER BY gbid DESC"); 
```

我想我在使用 AND 一词时总是会出错，而且我不知道如何创建两个 WHERE 条件。

如果我缺少解决此问题所需的描述或代码，请询问以便我可以编辑它。

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:05:23.867

检查查询是否错误的简单方法：

```
$result = mysql_query(... your query here ...) or die(mysql_error());
                                              ^^^^^^^^^^^^^^^^^^^^^^ 
```

如果有问题，只需让 mysql 告诉你。您的错误消息意味着查询由于某种原因失败，您盲目地假设它成功，并尝试使用 mysql_query 在后续操作中返回的布尔 FALSE 值。永远不要假设数据库操作已经成功。

* * *

编辑：鉴于您的错误消息，这是因为`ignore`是保留字。用反引号转义它：

```
... AND `ignore`=0 ORDER BY ...
        ^      ^ 
```

强制 mysql 将其视为字段名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:39:54.560

忽略是mysql中的保留字。(http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

你可以简单地尝试

```
$query = mysql_query("SELECT * FROM guestbook WHERE `permission`= 0 AND `ignore`=0 ORDER BY gbid DESC"); 
```

或更改列名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T04:09:42.770

尝试这个

```
$query = mysql_query("SELECT * FROM guestbook WHERE permission= 0 AND ignore=0 ORDER BY gbid DESC"); 
```

如果权限和忽略是 TYPE INT，则不需要引号...

# java - java将next()分配给字符串或分解成字符

> ID：10763478
> 
> 赞同：2
> 
> 时间：2012-05-26T04:03:58.923
> 
> 标签：java, variable-assignment, palindrome, stack

我正在尝试创建一个程序来读取文件并检查文本是否为回文。代码可以编译，但并没有真正起作用。

问题是我不知道如何将完整的标记分解为字符或将其分配给字符串，以便使用字符串的长度将`push`每个字母或数字（排队）放入`stack`（队列）。任何人都可以为此提出解决方案吗？

```
public static void main(String [] args) throws IOException{
    StackReferenceBased stack = new StackReferenceBased();
    QueueReferenceBased queue = new QueueReferenceBased();
    Scanner s = null;
    String fileName=args[0]+".txt";
    int symbols = 0;
    int lettersAndDigits =0;
    int matches = 0;

    try{
      s = new Scanner(new File(fileName));
      while(s.hasNext()){
        String current = s.next();
        for(int i=0;i<current.length();i++){
          char temp = s.next().charAt(i);
          if(Character.isLetterOrDigit(temp)){
            stack.push(temp);
            queue.enqueue(temp);
            lettersAndDigits++;

          }
          else {
            symbols++;

          }
        }
      }
      System.out.println("There are: " + " "+ symbols + " " +"symbols and " + " "+lettersAndDigits + " "+ "digits/letters");

    }
    catch (FileNotFoundException e) {
      System.out.println("Could not open the file:" + args[0]);
    } //catch (Exception e) {
      //System.out.println("ERROR copying file");
      finally {
      if(s != null){
        s.close();
      }
    }
    while (!stack.isEmpty()){
      if(!stack.pop().equals(queue.dequeue())){
          System.out.println("not pali");
          break;
        }
      else {
        ++matches;
      }
    }

    if(matches==lettersAndDigits){
      System.out.print("pali");
    }  
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:11:02.700

代替

```
char temp = s.next().charAt(i); 
```

你需要

```
char temp = current.charAt(i); 
```

通过调用`s.next()`您从文件中读取下一个令牌并尝试`i`根据第一个字符串的 ( ) 长度访问该令牌的第 th 元素，`current`如果读取的令牌比第一个令牌短，这将导致异常

# c# - 从不同页面导航到网页

> ID：10763481
> 
> 赞同：0
> 
> 时间：2012-05-26T04:04:11.950
> 
> 标签：c#, windows-phone-7

我的应用程序是 Windows Phone 7 应用程序。我在 MainPage.xaml 中创建了一个 UrlTextBox，并在另一个页面（Browser.xaml）中创建了一个 Web 浏览器控件（浏览器）。如果用户在文本框中键入一些 URL 并单击 Go 按钮，我需要从 MainPage.xaml 导航到 Browser.xaml，甚至网页也应该加载到 Browser.xaml（即，无论用户键入的 URL 是什么）只需单击一次按钮（GoBtn_Click）。我在上面使用了导航服务，但它抛出了一个错误，即当前上下文中不存在“浏览器”。为此需要帮助。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:27:04.630

我可能误解了这个问题，但我认为您混淆了 NavigationService.Navigate 和 WebBrowser.Navigate。您不能仅使用导航服务完成您所说的所有操作。

首先，存储 URL。然后使用此代码导航到浏览器页面：

```
NavigationService.Navigate(new Uri("/Browser.xaml", UriKind.Relative)); 
```

然后，在浏览器页面上，告诉 WebBrowser 导航到提供的 URL。

```
myBrowser.Navigate(myUrl); 
```

# jquery - 在一页中不起作用的ui datepicker和下拉清单

> ID：10763483
> 
> 赞同：0
> 
> 时间：2012-05-26T04:04:53.960
> 
> 标签：jquery

我已经在我的网页中实现了 jquery ui 日期选择器滤锅。它运作良好。然后我实现了jquery dropdown checkList。然后我的日历不是 Woking

我已经为日历实现了 Jquery 是 jquery 1.7.1.min 和下拉清单的 jquery 是 jquery.js

我需要在一页中实现这两个

但它不工作任何人都知道这个请帮助我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:25:44.443

我认为您的 jquery 下拉调用函数语法是错误的。因为如果有任何语法错误，那么日历也将无法工作。所以首先检查完美的语法。

# r - Geom_ribbon() 只是将图形变为空白

> ID：10763494
> 
> 赞同：2
> 
> 时间：2012-05-26T04:08:08.880
> 
> 标签：r, ggplot2

嗨，我得到了一个`weekly.mean.values`具有以下结构的数据框：

```
week:mean:ci.lower:ci.upper 
```

周是一个因素；意思是，ci.lower 和 ci.upper 是数字。对于每一周，只有一个平均值和一个 ci.lower 或 ci.upper。

我试图在平均值周围的 95% 置信区间内绘制一个阴影区域，代码如下：

```
ggplot(weekly.mean.values,aes(x=week,y=mean)) + 
    geom_line() + 
    geom_ribbon(aes(ymin=ci.lower,ymax=ci.upper)) 
```

然而，该图显示为空白（仅存在 x 轴和 y 轴，但没有线或点，更不用说阴影区域了）。

如果我删除了 geom_ribbon 部分，我确实得到了一条线。我知道这应该是一个非常简单的任务，但我不知道为什么我不能让 geom_ribbon 绘制我想要的东西。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T13:32:41.653

我意识到这个线程是超级旧的，但谷歌仍然找到它。

答案是你需要设置`ymin`和`ymax`使用你正在使用的部分数据`y-axis`。如果您将它们设置为标量值，那么功能区会从上到下覆盖整个绘图。

您可以使用

```
ymin=0 
ymax=mean 
```

从0到你`y-point`甚至

```
ymin=mean-1
ymax=mean+1 
```

让色带覆盖一条包含您的实际数据的条带。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:37:13.490

我可能遗漏了一些东西，但`grey20`默认情况下，功能区将被填充填充。您将这一层绘制在数据**之上**，所以难怪它会掩盖它。此外，从提供给初始调用的数据导出的绘图轴的限制也可能`ggplot()`不足以包含置信区间功能区。在这种情况下，看到灰色/空白图我不会感到惊讶。

要查看这是否是问题所在，请尝试将您的`geom_ribbon()`线路更改为：

```
geom_ribbon(aes(ymin=ci.lower,ymax=ci.upper), alpha = 0.5) 
```

如果问题是我认为的问题，它将绘制具有透明度的功能区，它应该在下面显示数据。

如果是这样，请将 x 和 y 限制设置为数据范围 +/- 您希望绘制的置信区间并交换图层的顺序（即在功能区顶部绘制线条），并在功能区中使用透明度通过它显示网格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-20T15:25:48.227

来自[ggplot 的](http://docs.ggplot2.org/current/geom_ribbon.html)( `geom_ribbon`2.1.0) 文档：

> 对于每个连续的 x 值，`geom_interval`显示一个间隔。`geom_area`是 的一个特例`geom_ribbon`，其中范围的最小值固定为 0。

在这种情况下，x 值不能成为 的因子`geom_ribbon`。一种解决方案是将`week`因子转换为数字。例如

```
ggplot(weekly.mean.values,aes(x=as.numeric(week),y=mean)) + 
  geom_line() + 
  geom_ribbon(aes(ymin=ci.lower,ymax=ci.upper)) 
```

`geom_line`尽管 X 轴刻度可能显示不同，但应该毫无意外地处理从因子到数字的切换。

# ios - 像 iPhone IMDB 应用程序这样管理滑动视图的好方法是什么？

> ID：10763501
> 
> 赞同：1
> 
> 时间：2012-05-26T04:09:24.400
> 
> 标签：ios, views

iPhone 的 IMDB 应用程序似乎允许从电影详细信息页面到该电影中演员的详细信息页面、该演员的第一部电影到该电影的导演等的无限钻取和探索。

在 Xcode 中构建它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:20:55.523

请务必在[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)`UINavigationController`查看 Apple 的文档/示例代码。通过查看示例应用程序，您可以学到很多关于 iOS 开发的知识。

您所指的“无限向下钻取”是将控制器“推入”当前控制器堆栈的行为。当您返回时，您从堆栈中“弹出”一个控制器以返回到前一个控制器。如果实施得当，`UINavigationController`将处理诸如确保后退按钮包含前一个屏幕的标题、保持屏幕有序以及滑动动作等事情。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:12:39.360

您可以使用 a 创建`UINavigationController`并根据需要逐个推送视图。

# delphi - 403/禁止使用 delphi 应用程序访问我的 Google 日历

> ID：10763507
> 
> 赞同：2
> 
> 时间：2012-05-26T04:10:56.963
> 
> 标签：delphi, google-calendar-api, indy10

谁能告诉我为什么我无法访问我的日历信息？我被 403 禁止了。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  stringStream: TStringStream;
  slPost, slReply: TStringList;
  sPostResult: string;
begin
  slPost := TStringList.Create;
  slReply := TStringList.Create;
  try
    slPost.LineBreak := '&';
    slPost.Values['Email'] := 'me@gmail.com';
    slPost.Values['Passwd'] := 'pass';
    slPost.Values['service'] := 'cl';
    slPost.Values['source'] := 'company-program-version';

    stringStream := TStringStream.Create(slPost.Text);
    try
      IdHTTP1.Request.ContentType := 'application/x-www-form-urlencoded';
      sPostResult := IdHTTP1.Post('https://www.google.com/accounts/ClientLogin', stringStream);

      slReply.LineBreak:=#10;
      slReply.Text:=sPostResult;
      slReply.LineBreak:=#13#10;
      Memo1.Lines.Add(slReply.Text);
      Memo1.Lines.Add('response=' + IdHTTP1.ResponseText);

// 200 OK
      sPostResult := IdHTTP1.Post('https://www.google.com/accounts/ClientLogin', stringStream);

      IdHTTP1.Request.CustomHeaders.FoldLines:=false;
      IdHTTP1.Request.CustomHeaders.Clear;
      IdHTTP1.Request.CustomHeaders.Values['GData-Version']:='2.0';
      IdHTTP1.Request.CustomHeaders.Values['Authorization']:='GoogleLogin auth=' + slReply.Values['auth'];

(* custom headers:
      GData-Version: 2.0
      Authorization: GoogleLogin (line continues) auth=DQwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhateverwhatever *)

      IdHTTP1.Request.ContentType := 'application/atom+xml';

// 403 Forbidden
      memo1.Lines.Add(IdHTTP1.Get('https://www.googleapis.com/calendar/v3/users/me/calendarList'));
    finally
      stringStream.Free;
    end;
  finally
    slPost.Free;
    slReply.Free;
  end;
end; 
```

谢谢你！mp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:03:19.430

经过一番阅读，我认为您需要处理重定向。因此，如果响应是重定向，则获取新的 url，使用新的 url 将授权重新附加到新的请求标头。否则您的重定向请求将缺少所需的授权并给您 403 错误。

# java - 从 java.lang.NullPointerException 读取对象时，Android 应用程序在启动时崩溃

> ID：10763510
> 
> 赞同：0
> 
> 时间：2012-05-26T04:11:53.857
> 
> 标签：java, android, nullpointerexception, objectoutputstream, objectinputstream

我正在开发我的第一个 Android 应用程序。在我决定添加一个功能来保存和加载 OnCreate 和 onRestart 上的对象和设置之前，它工作得很好。之后，应用程序在启动时崩溃。这是我从 OnCreate 调用的 setSettings。

```
public void setSettings(){
    SharedPreferences settings = getSharedPreferences("Prefs",0);
    newGame = settings.getBoolean("newGame", true);
    autoDecide = settings.getBoolean("autoDecide", true);
    saved = settings.getBoolean("saved", false);
    if (saved){     
        player1 = readPlayer("Player 1");
        player2 = readPlayer("Player 2");
        ((TextView)findViewById(R.id.Player1name)).setText(""+player1.name);
        ((TextView)findViewById(R.id.Player2name)).setText(""+player2.name);
        ((TextView)findViewById(R.id.player1wins)).setText(""+player1.totalWins);
        ((TextView)findViewById(R.id.player2wins)).setText(""+player2.totalWins);
        ((TextView)findViewById(R.id.Player1life)).setText(""+player1.life);
        ((TextView)findViewById(R.id.Player2life)).setText(""+player2.life);
    }
} 
```

在我保存东西之前，保存的布尔值应该是错误的，但我认为它不起作用。这是它调用的可能问题所在的 readPlayer。

```
 public Player readPlayer(String loc)  {
    //FileInputStream fis;
        try {
        BufferedInputStream buf = new BufferedInputStream( openFileInput(loc));
        ObjectInputStream stream = new ObjectInputStream(buf);
        Player re = (Player) stream.readObject();
        stream.close();
        buf.close();
        return re;
        } catch (FileNotFoundException e) {
        //e.printStackTrace();
            return new Player(loc);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    return new Player(loc);
} 
```

这是我在崩溃时得到的 logCat。

```
05-26 03:49:05.739: E/AndroidRuntime(391): java.lang.RuntimeException: Unable to start activity    ComponentInfo{jjcard.app.lifecount/jjcard.app.lifecount.Life_counterActivity}: java.lang.NullPointerException
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.os.Looper.loop(Looper.java:132)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.ActivityThread.main(ActivityThread.java:4123)
05-26 03:49:05.739: E/AndroidRuntime(391):  at java.lang.reflect.Method.invokeNative(Native Method)
05-26 03:49:05.739: E/AndroidRuntime(391):  at java.lang.reflect.Method.invoke(Method.java:491)
05-26 03:49:05.739: E/AndroidRuntime(391):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-26 03:49:05.739: E/AndroidRuntime(391):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-26 03:49:05.739: E/AndroidRuntime(391):  at dalvik.system.NativeStart.main(Native Method)
05-26 03:49:05.739: E/AndroidRuntime(391): Caused by: java.lang.NullPointerException
05-26 03:49:05.739: E/AndroidRuntime(391):  at jjcard.app.lifecount.Life_counterActivity.setSettings(Life_counterActivity.java:72)
05-26 03:49:05.739: E/AndroidRuntime(391):  at jjcard.app.lifecount.Life_counterActivity.onCreate(Life_counterActivity.java:42)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.Activity.performCreate(Activity.java:4397)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
05-26 03:49:05.739: E/AndroidRuntime(391):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779) 
```

我不知道您是否需要创建播放器，但在这里

```
 public Player(String nameN){
    name = nameN;
    life = 8000;
    totalWins = 0;
    totalLosses = 0;
    wins = new HashMap<String, Integer>();
} 
```

每次我启动它时都会发生这种情况，并且我尝试了一些事情，正如您可能从代码中看到的那样，没有成功。我试着四处寻找，但找不到任何东西。希望大家能帮忙。
编辑：这是 LogCat 显示的第 72 行是问题所在。

```
((TextView)findViewById(R.id.Player1name)).setText(""+player1.name); 
```

所以看起来你是对的，它可能会读取一个空对象，而不是像我想象的那样返回一个新玩家。而且由于我对编写和读取对象不太了解，所以我只使用了 defaultWriteObject 和 defaultReadObject

```
 private void writeObject(ObjectOutputStream out) throws IOException{
    out.defaultWriteObject();
}
private void readObject(ObjectInputStream in) throws ClassNotFoundException, IOException{
    in.defaultReadObject();
} 
```

**编辑：**更改读/写并尝试检查名称是否为空后，它仍然不起作用。我什至尝试将文本设置为字符串，但它仍然给出 nullPointerException，所以猜测它与 FindViewById(R.id.Player1name) 有关系，但我还不知道具体是什么。我使用 ViewPagerIndicator 为不同的屏幕使用不同的视图，这可能与它有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:58:01.470

请参阅您发布的异常堆栈跟踪 - 它说错误是`caused by:`第 72 行`Life_counterActivity.java`- 这将为您提供一些关于可能存在的对象的指示`null`。

在不知道它实际上是哪条线的情况下，它可能是看起来像这样的 6 条线之一......

```
((TextView)findViewById(R.id.Player1name)).setText(""+player1.name); 
```

有2种可能...

1.  该对象`player1`为空，因此您不能要求它的`name`.
2.  找不到 -这`R.id.Player1name`不太可能，但`setText()`如果它确实返回一个空对象，您就不能调用。

看起来好像它可能`player1`或`player2`，您能否显示您将`Player`对象保存到文件的位置 - 看起来它可能是从文件创建对象但没有填充变量。假设`Player`实现了，请`Serializable`您显示代码。有关这些方法的信息，请参阅[Serializable java 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Serializable.html)。`writeObject()``readObject()`

所以，作为对你`readObject()`和`writeObject()`方法的建议......

```
private void writeObject(ObjectOutputStream out) throws IOException{
    out.writeObject(name);
    out.writeInt(life);
    out.writeInt(totalWins);
    out.writeInt(totalLosses);
    out.writeObject(wins);
}
private void readObject(ObjectInputStream in) throws ClassNotFoundException, IOException{
    name = (String)in.readObject();
    life = in.readInt();
    totalWins = in.readInt();
    totalLosses = in.readInt();
    wins = (HashMap<String, Integer>) in.readObject();
} 
```

# scala - scala 2.10.x 中的隐式解析。这是怎么回事？

> ID：10763511
> 
> 赞同：6
> 
> 时间：2012-05-26T04:12:20.037
> 
> 标签：scala

我正在使用日期为（20120522）的 scala 2.10.0-snapshot 并具有以下 Scala 文件：

这个定义了 typeclass 和一个基本的 typeclass 实例：

```
package com.netgents.typeclass.hole

case class Rabbit

trait Hole[A] {
  def findHole(x: A): String
}

object Hole {
  def apply[A: Hole] = implicitly[Hole[A]]
  implicit val rabbitHoleInHole = new Hole[Rabbit] {
    def findHole(x: Rabbit) = "Rabbit found the hole in Hole companion object"
  }
} 
```

这是包对象：

```
package com.netgents.typeclass

package object hole {

  def findHole[A: Hole](x: A) = Hole[A].findHole(x)

  implicit val rabbitHoleInHolePackage = new Hole[Rabbit] {
    def findHole(x: Rabbit) = "Rabbit found the hole in Hole package object"
  }
} 
```

这是测试：

```
package com.netgents.typeclass.hole

object Test extends App {

  implicit val rabbitHoleInOuterTest = new Hole[Rabbit] {
    def findHole(x: Rabbit) = "Rabbit found the hole in outer Test object"
  }

  {
    implicit val rabbitHoleInInnerTest = new Hole[Rabbit] {
      def findHole(x: Rabbit) = "Rabbit found the hole in inner Test object"
    }

    println(findHole(Rabbit()))
  }
} 
```

正如你所看到的，`Hole`是一个简单的类型类，它定义了一个 a`Rabbit`试图找到的方法。我试图弄清楚它的隐含解析规则。

*   由于所有四个类型类实例都未注释，scalac 抱怨`rabbitHoleInHolePackage`和`rabbitHoleInHole`. （为什么？）

*   如果我注释掉`rabbitHoleInHole`，scalac 编译并返回“Rabbit 在 Hole 包对象中找到了洞”。（本地范围内的隐含不应该优先吗？）

*   如果我随后发表评论`rabbitHoleInHolePackage`，scalac 会抱怨 and 上的`rabbitHoleInOuterTest`歧义`rabbitHoleInInnerTest`。（为什么？在 eed3si9n 的文章，下面列出的 url 中，他发现隐式 btw 内部和外部范围可以采取不同的优先级。）

*   如果我随后注释掉`rabbitHoleInInnerTest`，scalac 编译并返回“兔子在外部测试对象中找到了洞”。

如您所见，上述行为根本不遵循我所读过的关于隐式解析的规则。我只描述了在注释/取消注释实例时可以做的一小部分组合，其中大多数确实很奇怪——而且我还没有进入导入和子类。

我已经阅读并观看了 suereth 的[演示文稿、sobral](https://docs.google.com/present/view?id=dfqn4jb_106hq4mvbd8)的[stackoverflow 回答以及 eed3si9n](https://stackoverflow.com/questions/5598085/where-does-scala-look-for-implicits/5598107#5598107)的[非常详尽的重访](http://eed3si9n.com/revisiting-implicits-without-import-tax)，但我仍然完全感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T19:16:00.490

让我们从包对象中的隐式和禁用的类型类伴侣开始：

```
package rabbit {
  trait TC

  object Test  extends App {
    implicit object testInstance1 extends TC { override def toString = "test1" }

    {
      implicit object testInstance2 extends TC { override def toString = "test2" }

      println(implicitly[TC])
    }
  }
} 
```

Scalac 查找范围内的任何隐式、查找`testInstance1`和`testInstance2`. 只有当它们具有相同的名称时，它们才具有更紧密的范围这一事实——通常的阴影规则适用。我们选择了不同的名称，并且没有一个隐含的名称比另一个更具体，因此可以正确报告歧义。

让我们尝试另一个示例，这次我们将在本地范围内与包对象中的隐式进行对比。

```
package rabbit {
  object `package` {
    implicit object packageInstance extends TC { override def toString = "package" }
  }

  trait TC

  object Test  extends App {
    {
      implicit object testInstance2 extends TC { override def toString = "test2" }

      println(implicitly[TC])
    }
  }
} 
```

这里会发生什么？和以前一样，隐式搜索的第一阶段考虑调用站点范围内的所有隐式。在这种情况下，我们有`testInstance2`和`packageInstance`。这些是模棱两可的，但在报告该错误之前，第二阶段开始，并搜索`TC`.

但是这里的隐含范围是什么？`TC`甚至没有伴生对象？我们需要在这里查看 Scala Reference 的 7.2 中的精确定义。

> 类型 T 的隐式范围由与隐式参数类型相关联的类的所有伴随模块（第 5.4 节）组成。在这里，我们说类 C 与类型 T 相关联，如果它是 T 的某个部分的基类（第 5.1.2 节）。
> 
> 类型的部分`T`是：
> 
> *   if`T`是一个复合类型`T1 with ... with Tn`, 的各部分的并集`T1, ..., Tn`, 以及它`T`本身,
> *   if`T`是参数化类型`S[T1, ..., Tn]`，和的部分的`S`并 集`T1,...,Tn`，
> *   如果`T`是单例类型`p.type`，则类型的部分`p`，
> *   if`T`是一个类型 projection `S#U`，其部分`S`以及它`T`本身，
> *   在所有其他情况下，只是`T`它自己。

我们正在寻找`rabbit.TC`. 从类型系统的角度来看，这是： 的简写`rabbit.type#TC`，其中`rabbit.type`是表示包的类型，就好像它是一个常规对象一样。调用规则 4，为我们提供了部分`TC`和`p.type`。

那么，这一切意味着什么？简单地说，包对象中的隐式成员也是隐式范围的一部分！

在上面的示例中，这为我们在隐式搜索的第二阶段提供了明确的选择。

其他例子可以用同样的方式解释。

总之：

*   隐式搜索分两个阶段进行。导入和跟踪的通常规则确定候选人列表。
*   [假设您使用的是嵌套包](https://stackoverflow.com/questions/2830248/what-are-nested-unnested-packages-in-scala-2-8)，封闭包对象中的隐式成员也可能在范围内。
*   如果有多个候选人，则使用静态重载的规则来查看是否有获胜者。一个附加的决胜局，编译器更喜欢隐式而不是在第一个超类中定义的另一个。
*   如果第一阶段失败，则以几乎相同的方式查询隐式范围。（不同之处在于来自不同同伴的隐式成员可能具有相同的名称而不会相互影响。）
*   来自封闭包的包对象中的隐式也是此隐式范围的一部分。

**更新**

在 Scala 2.9.2 中，行为不同且错误。

```
package rabbit {
  trait TC

  object Test extends App {
    implicit object testInstance1 extends TC { override def toString = "test1" }

    {
      implicit object testInstance2 extends TC { override def toString = "test2" }

      // wrongly considered non-ambiguous in 2.9.2\. The sub-class rule
      // incorrectly considers:
      //
      // isProperSubClassOrObject(value <local Test>, object Test)
      //   isProperSubClassOrObject(value <local Test>, {object Test}.linkedClassOfClass)
      //   isProperSubClassOrObject(value <local Test>, <none>)
      //     (value <local Test>) isSubClass <none>
      //        <notype> baseTypeIndex <none> >= 0
      //        0 >= 0
      //        true
      //     true
      //   true
      // true
      //
      // 2.10.x correctly reports the ambiguity, since the fix for
      //
      // https://issues.scala-lang.org/browse/SI-5354?focusedCommentId=57914#comment-57914
      // https://github.com/scala/scala/commit/6975b4888d
      //
      println(implicitly[TC])
    }
  }
} 
```

# php - 如果每次调用控制器时我都初始化 codeigniter 会话，是否有任何挫折？

> ID：10763512
> 
> 赞同：0
> 
> 时间：2012-05-26T04:12:35.917
> 
> 标签：php, codeigniter, session

我遇到了 Codeigniter 会话在 IE 上随机死机的问题，我到处搜索并尝试了所有方法，错误只是不会消失，我尝试了检查 ajax 的功能并且不会 sess_update() 也不起作用，所以我的问题是，挫折是什么如果我在每个控制器调用中初始化 CI 会话？我有本地会话和 CI 会话，但是将所有内容更改为本地会话还需要几天时间。它是临时修复。

```
 class Transactions extends Controller {

    function Transactions()
    {
        session_start();
        parent::Controller();   

        $this->load->model('Modelcontracts');
        $this->load->model('Modelsignup');
        $this->load->model('Modeltransactions');

        $this->session->set_userdata('account_id',$_SESSION['account_id']);
        $this->session->set_userdata('email',$_SESSION['email']);
        $this->session->set_userdata('account_type',$_SESSION['account_type']);
        $this->session->set_userdata('parent_account_id',$_SESSION['parent_account_id']);
        $this->session->set_userdata('accountrole_id',$_SESSION['accountrole_id']);
        $this->session->set_userdata('user_type_id',$_SESSION['user_type_id']);

    }

    function index()
    { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:08:52.303

我从未遇到过 CodeIgniters 会话的任何问题。你创建了 MySQL 表`ci_sessions`吗？

挫折基本上是这是一个不合逻辑的电话。如果这无关紧要，那么我看不到任何挫折。

您可以像这样简化代码：

```
$arr = array('account_id', 'email', 'account_type', 'parent_account_id', 'accountrole_id', 'user_type_id');

foreach($arr as $h)
    if (isset($_SESSION[$h]))
        $this->session->set_userdata($h, $_SESSION[$h]);
    // else echo "Session [{$h}] doesn't exist!"; 
```

或者扩展你的会话库来做一个

```
foreach(array_keys($_SESSION) as $h)
    $this->CI->session->set_userdata($h, $_SESSION[$h]); 
```

加载时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:56:47.467

`session_start()`如果您让 CodeIgniter 管理您的会话（如果您正在使用 CodeIgniter 的`set_userdata()`/`get_userdata()`函数） ，我认为您不应该使用它。

它在 CI 用户文档的顶部说 CI 不使用 PHP 的本机会话处理，因此这可能会给您带来麻烦。会话通过加载会话库自动启动，如果您将其放在配置文件中则自动启动或使用`$this->load->library('session');`.

[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

-格斯

* * *

编辑：我遇到了一个关于 IE/CI 会话问题的 CI 论坛帖子。显然这是一个众所周知的问题。[http://codeigniter.com/forums/viewthread/211955/](http://codeigniter.com/forums/viewthread/211955/)

# c# - 如何通过 VBnet（或 C#）与 R 通信

> ID：10763516
> 
> 赞同：4
> 
> 时间：2012-05-26T04:13:33.470
> 
> 标签：c#, vb.net, r, communicate

最近用VB.net（Windows平台）开发了一个实验应用程序，当应用程序收集数据时，我想用R来分析数据，但我不知道如何***与R通信***（换句话说，***我想在我自己的应用程序中将 R 脚本发送到 R***）。如果有人能给我一些建议或一些参考文件，我将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:05:58.163

我建议您尝试[R.NET](http://rdotnet.codeplex.com)。宣传语说：

> R.NET 使 .NET Framework 能够与 R 统计计算协作。R.NET 需要 .NET Framework 4 和与 R 环境一起安装的本机 DLL。您不需要其他额外的安装。使用 R 以您的特殊语言享受统计和编程。

它是一个开源绑定，看起来比 statconn 工具简单一些，因为它不通过 DCOM。LGPL 许可，因此也可免费用于商业用途。您可以结合[Excel-DNA](http://exceldna.codeplex.com)通过 .NET 将 R 暴露给 Excel - 这里有一些讨论：[http ://www.r-bloggers.com/yet-another-way-to-use-r-in-excel-for -net-programmer/](http://www.r-bloggers.com/yet-another-way-to-use-r-in-excel-for-net-programmer/) .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T05:58:38.623

statconn 和 R.Net 的替代方法是使用 mt4r dll，只需将 cMT4R C# 类放入您的项目并开始使用 R。我使用了 statconn，并且仍然经常这样做以提高数据传递的速度。我从来没有想过 R.Net。

但是，如果您尝试以最简单的安装方式启动并运行，请查看以下链接，该链接描述了 MT4R 的界面和安装。在您的项目中包含 C# 类后，您只需使用计算机的 R 路径更新该类，DLL 将完成繁重的工作。类界面直观且易于使用。

[https://sites.google.com/site/marketformula/vb6-to-c/vb6-to-c-downloads/calling-r-from-csharp-dotnet](https://sites.google.com/site/marketformula/vb6-to-c/vb6-to-c-downloads/calling-r-from-csharp-dotnet)

如果有人仍在使用 VB6 或使用 VBA 并且想要一种通过简单安装快速启动和运行 R 的方法，那么还有一个可用的 VB6 类（链接在上面的帖子中）。

包含一个简单的演示应用程序，展示了如何从 C# 向 R 发送和接收数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T22:41:28.547

为此，使用 StatConn DCOM 库而不是 R.NET。以我自己的经验，它比 .NET 库稳定得多。

为此，您需要安装 R，从任何 CRAN 存储库添加扩展 rcom 和 rsproxy，然后安装 StatConn DCOM。安装这些后，您可以通过 DCOM 包附带的示例程序检查您的 R 连接是否正常工作。

如果这些工作正常，您可以通过 Visual Studio 将所有 statconn 引用添加到您的 .NET 项目。

祝你好运

# java - void 不能被取消引用

> ID：10763517
> 
> 赞同：1
> 
> 时间：2012-05-26T04:13:42.467
> 
> 标签：java

我有一种编辑成员的方法，我想将错误打印到文件中，但是如果我尝试将堆栈跟踪打印到 Error_Report.txt 文件中，我会不断收到 void cannot be dereferenced 错误。无论如何我可以打印出来吗？这是我的代码。

```
public void edit() {
  FileWriter fw = new FileWriter(new File("Error_Report.txt"));
  Connection con;
  Statement stmt;
  ResultSet rs;

  int id = (int)_id.getSelectedItem();
  String name = _name.getText();
  String user = _username.getText();
  String pass = _password.getText();
  String pos = _position.getSelectedItem().toString();

  try {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    con = DriverManager.getConnection("jdbc:odbc:collegesys", 
                                      "root", "0blivi0n");

    stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,
                               ResultSet.CONCUR_READ_ONLY);

    PreparedStatement prep = con.prepareStatement("UPDATE `main` WHERE ID = ?");
    prep.setInt(1, id);
    prep.setString(2, name);
    prep.setString(3, user);
    prep.setString(4, pass);
    prep.setString(5, pos);

    prep.execute();
  } catch(SQLException sqle) {
    String sql = sqle.printStackTrace().toString();
    fw.write("" + sql);
  } catch(ClassNotFoundException cnfe) {
    fw.write("" + cnfe);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T04:25:41.803

你的问题是它`printStackTrace`不返回任何东西，所以没有任何东西可以转换为字符串。像这样写。

```
PrintWriter writer = new PrintWriter(fw);
sqle.printStackTrace(writer);
writer.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T04:23:07.300

`sqle.printStackTrace()`返回一个 void 并且不能用作参数。将您的代码更改为以下内容：

```
catch(SQLException sqle) {
    StringBuilder sb = new StringBuilder();
    StackTraceElement[] st = sqle.getStackTrace();
    for(StackTraceElement s : st) {
        sb.append(s);
        sb.append('\n');
    }
    fw.write(sb.toString());
} 
```

# eclipse - 这些名称非常相似的opencv库有什么不同？我应该将哪个放入项目库中？

> ID：10763520
> 
> 赞同：0
> 
> 时间：2012-05-26T04:14:46.120
> 
> 标签：eclipse, opencv

我在安装了 OpenCV 2.4 的 Linux（Ubuntu）上。我正在尝试使用 Eclipse 创建一个 opencv 项目。当我构建项目时，我得到了`collect2: ld returned 1 exit status`错误，我猜这是由于缺少库引起的。然后我在这个项目中放了库，但是我发现每个库都有三个非常相似的兄弟，比如：

```
libopencv_highgui.so
libopencv_highgui.so.2.4
libopencv_highgui.so.2.4.0 
```

那么，我应该将哪一个添加到项目库中？他们之间有什么不同？

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:51:38.973

`libopencv_highgui.so`并且`libopencv_highgui.so.2.4`可能是[指向](http://en.wikipedia.org/wiki/Symbolic_link)`libopencv_highgui.so.2.4.0`.

库经常这样做，以便需要链接特定版本的软件可以同时保持通用库也公开。

当程序要链接到库的主要或次要版本时，这主要是有用的。考虑一个遗留应用程序是否需要链接到`libopencv_highgui`. 该程序无法链接，`libopencv_highgui.so`因为不能保证它是正确的版本。但是，该程序可以链接到`libopencv_highgui.so.1.2`. libopencv_highgui.so.1.2 可能是 libopencv_highgui.so.1.2.3 的符号链接，但这没关系，因为第三个数字通常意味着不会破坏兼容性的小错误修复。

因此，这会显示您应该链接哪个文件。这真的取决于。除非您需要依赖特定次要修订的某些错误或怪癖，否则我肯定会避免链接到 2.4.0 版本。这将您的程序专门与版本 2.4.0 联系在一起。当 2.4.1 发布时（或者你的发行版的包管理器），它可能不会破坏你的程序。

如果您链接`libopencv_highgui.so`，然后将 2.5 作为主库安装（然后 libopencv_highgui.so 链接到 libopencv_highgui.so.2.5.0），则您的程序可能无法正确链接，因为第二个数字有时意味着兼容性更改.

所以简而言之，如果它是一个个人项目，只需链接到你想要的任何东西。如果它是个人的，libopencv_highgui.so 可能是安全的。如果要分发它，请弄清楚您的代码将正确链接的库版本，然后尽可能使用最模糊的版本。例如，如果您的代码适用于 2.2、2.3 和 2.4，您应该继续链接到`libopencv_highgui.so`. 如果它仅适用于 2.4.0，则应链接到`libopencv_highgui.so.2.4.0`. 如果它适用于 2.4 的任何子版本，您应该使用 libopencv_highgui.so.2.4。

基本上，您必须选择您认为将在大多数人的设置上正确链接的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:53:58.147

我想我在这里犯了一些错误。我需要的是这些库，但是当我将它们添加到项目库中时。您应该使用这些名称，对于我在问题中提到的库，我们应该添加`opencv_highgui`到 eclipse 库依赖项中，但是`libopencv_highgui.so.2.4`. 为了将来使用，我把这些东西写[在这里](https://snipt.net/stevenYANG/opencv-library-nameadd-to-eclipse/)。

# dart - 如何安装 3rd 第三方库

> ID：10763524
> 
> 赞同：2
> 
> 时间：2012-05-26T04:15:21.910
> 
> 标签：dart, libraries, dart-pub

当我浏览[mongo-dart](https://bitbucket.org/vadimtsushko/mongo-dart)时，我使用 3rd-party 库[log4dart](https://github.com/Qalqo/log4dart)找到了它。

我没有找到任何关于如何安装它的文档。有飞镖的图书馆经理吗？我是否必须将 log4dart 的源代码复制到我的项目中才能使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:28:20.713

Dart 目前不附带包管理器（尽管预计现在任何一天都会到达）。因此，要安装**log4dart**，您必须直接从[github](https://github.com/qalqo/log4dart)获取它。

# iphone - 在uitableview中禁用橡皮筋滚动

> ID：10763525
> 
> 赞同：1
> 
> 时间：2012-05-26T04:15:43.587
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

滚动完成后，有没有办法关闭表格视图将橡皮筋带回顶部的趋势？我确信这很简单，但是 UITableView 类引用没有显示任何可以控制它的明显属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:20:46.777

tableView.bounces = 否；

[http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/bounces](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/bounces)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:20:38.780

只需将[反弹属性](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/bounces)设置为 NO

# php - 将一个数据块插入数据库，同时隐藏另一个数据块

> ID：10763526
> 
> 赞同：0
> 
> 时间：2012-05-26T04:15:47.913
> 
> 标签：php

我有这段代码，它的作用是将数据插入数据库。我有两个，一个叫autobox，第二个housebox。当我从下拉列表中选择自动时，自动框 tbody 会显示一个下拉列表和一个文本输入。与housebox 的萨摩。我想要完成的是：当显示自动框并且隐藏housebox，我填写表格然后提交它时，housebox 不会被插入到数据库中。我希望我清楚这一点

此代码按原样使用并不安全：SQL INJECTION

```
 <script>
    function addSubject(){
   selectedSubject = document.getElementById('subcategory').value
   if (selectedSubject == 'auto'){
    document.getElementById('autobox').style.display = 'block';

}else if (selectedSubject == 'house'){
    document.getElementById('housebox').style.display = 'block';
   } 
   }
   </script>

   <?php    
   if(isset($_POST['upload'])){
   $title = $_POST['title'];
   $description = $_POST['description'];
   $price = $_POST['price'];
   $subcategory = $_POST['subcategory'];
   $mileage = $_POST['mileage'];
   $make = $_POST['make'];

   $query = "INSERT INTO classifieds (id, subcategory, title, description, mileage, 

   make, price, broom ) VALUES ('', $subcategory, '$title', '$description', 

   '$mileage', '$make', '$price', '$broom')";
    mysql_query($query) or die(mysql_error());

   } 
   ?>

   <form action="insert.php"  method="post" name="insert" enctype="multipart/form-

  data">

  <select name="subcategory" id="subcategory" onchange="addSubject()"  >
   <option value="">Select Manufacturer</option>
  <option value="auto">Auto</option>
  <option value="house">House</option>
  </select>
  <span class="style64">Title</span> 
      <input type="text" name="title" class="input"/>

  <table>
  <tbody class="autobox"  id="autobox" style="display: none;" >
  <tr>
   <td class="title">Enter mileage:</td>
  <td class="field">
  <input type="text" name="mileage" size="8" maxlength="7"  /></td>
   </tr>
  <tr>
  <td>
   <span>Select Manufacturer : </span>

  <select name="make">
  <option value="Ford">Ford</option>
  <option value="Chevrolet">Chevrolet</option>
  <option value="Audi">Audi</option>
      </select>

 </td>
 </tr>
 </tbody>

 <tbody class="housebox"  id="housebox" style="display: none;" >
 <tr>
 <td class="title">Enter Price:</td>
 <td class="field">
  <input type="text" name="price" size="8" maxlength="7"  /></td>
   </tr>
   <tr>
   <td>

  <select name="broom">
<option value="1b">1 broom</option>
<option value="2b">2 broom</option>
<option value="3b">3 broom</option>
      </select>

   </td>
   </tr>
  </tbody>
  </table>

   <textarea name="description" rows="5" class="input"></textarea>
   <input type="submit" name="upload" value="Continue" />
                    </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:43:39.483

试试这个。希望这是你想要的

**代码未经测试**

```
<script>
    function addSubject(){
   selectedSubject = document.getElementById('subcategory').value
   if (selectedSubject == 'auto'){
    document.getElementById('autobox').style.display = 'block';
     document.getElementById('housebox').style.display = 'none';
}else if (selectedSubject == 'house'){
    document.getElementById('housebox').style.display = 'block';
     document.getElementById('autobox').style.display = 'none';
   } 
   }
   </script>

   <?php    
   if(isset($_POST['upload'])){
   $title = $_POST['title'];
   $description = $_POST['description'];
   $price = $_POST['price'];
   $subcategory = $_POST['subcategory'];
   $mileage = $_POST['mileage'];
   $make = $_POST['make'];
    if($subcategory=='auto')
    {
               $query = "INSERT INTO classifieds (id, subcategory, title, description, mileage, make, price, broom ) VALUES ('', $subcategory, '$title', '$description', 

       '$mileage', '$make', '', '')";
    }
    else
    {
       $query = "INSERT INTO classifieds (id, subcategory, title, description, mileage, make, price, broom ) VALUES ('', $subcategory, '$title', '$description', 

       '', '', '$price', '$broom')";
    }
    mysql_query($query) or die(mysql_error());
   } 
   ?>

   <form action="insert.php"  method="post" name="insert" enctype="multipart/form-data">

  <select name="subcategory" id="subcategory" onchange="addSubject()"  >
   <option value="">Select Manufacturer</option>
  <option value="auto">Auto</option>
  <option value="house">House</option>
  </select>
  <span class="style64">Title</span> 
      <input type="text" name="title" class="input"/>

  <table>
  <tbody class="autobox"  id="autobox" style="display: none;" >
  <tr>
   <td class="title">Enter mileage:</td>
  <td class="field">
  <input type="text" name="mileage" size="8" maxlength="7"  /></td>
   </tr>
  <tr>
  <td>
   <span>Select Manufacturer : </span>

  <select name="make">
  <option value="Ford">Ford</option>
  <option value="Chevrolet">Chevrolet</option>
  <option value="Audi">Audi</option>
      </select>

 </td>
 </tr>
 </tbody>

 <tbody class="housebox"  id="housebox" style="display: none;" >
 <tr>
 <td class="title">Enter Price:</td>
 <td class="field">
  <input type="text" name="price" size="8" maxlength="7"  /></td>
   </tr>
   <tr>
   <td>

  <select name="broom">
<option value="1b">1 broom</option>
<option value="2b">2 broom</option>
<option value="3b">3 broom</option>
      </select>

   </td>
   </tr>
  </tbody>
  </table>

   <textarea name="description" rows="5" class="input"></textarea>
   <input type="submit" name="upload" value="Continue" />
                    </form> 
```

如果不是这个，请告诉我。谢谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:57:02.977

至少你需要让它工作：

仅插入相关字段：

```
 <?php    
 if(isset($_POST['upload'])){
    $title = $_POST['title'];
    $description = $_POST['description'];
    $price = $_POST['price'];
    $subcategory = $_POST['subcategory'];

    if ($subcategory == 'auto'){
      $mileage = $_POST['mileage'];
      $make = $_POST['make'];
      $query = "INSERT INTO classifieds (subcategory, title, description, mileage, make, price) VALUES ($subcategory, '$title', '$description', '$mileage', '$make', '$price')";
    } elseif ($subcategory == 'house') {
      $broom = $_POST['broom'];
      $query = "INSERT INTO classifieds (subcategory, title, description, broom, price) 
                VALUES ($subcategory, '$title', '$description', '$price')";
    }

    mysql_query($query) or die(mysql_error());
 } 
 ?> 
```

隐藏非活动字段：

```
<script>
function addSubject(){
  selectedSubject = document.getElementById('subcategory').value;
  if (selectedSubject == 'auto'){
    document.getElementById('autobox').style.display = 'block';
    document.getElementById('housebox').style.display = 'none';
  }else if (selectedSubject == 'house'){
    document.getElementById('housebox').style.display = 'block';
    document.getElementById('autobox').style.display = 'none';
  } 
}
</script> 
```

# css - 使用 CSS 设置密码输入字段的样式

> ID：10763528
> 
> 赞同：1
> 
> 时间：2012-05-26T04:16:47.663
> 
> 标签：css

我似乎无法弄清楚这一点。我需要另一双眼睛。

我正在尝试设置密码输入框的样式，使其看起来/反应与我的文本输入框相同。

这是HTML：

```
<fieldset class="contact">
    <label for="full_name">Purchasing Account ID:</label>
    <input type="text" id="acc_id" name="acc_id" size="13" />
    <label for="email_address">Email Address:</label>
    <input type="text" id="email_address" name="email_address" size="13" />
    <label for="password">Password:</label>
    <input type="password" id="pw" name="pw" size="13" />
</fieldset> 
```

这是CSS：

```
form input[type=text], form input[type=password] {
    width: 306px;
    background: #f3f3f3;
    border-top: 1px solid #dedede;
    border-left: 1px solid #dedede;
    border-right: 0;
    border-bottom: 0;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    padding: 10px 10px;
    font-size: 12px;
    color: #373737;
    -moz-box-shadow:inset 3px 3px 5px #e9e9e9;
    -webkit-box-shadow:inset 3px 3px 5px #e9e9e9;
    box-shadow:inset 3px 3px 5px #e9e9e9;
}
form input[type=text]:focus, form input[type=password]:focus, form textarea:focus {
    border: 3px solid #c70000;
} 
```

关于为什么密码输入字段根本没有得到 CSS 的任何想法？我用谷歌浏览器检查了它，CSS 根本没有应用于密码输入字段，而 Firebug 显示了同样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:29:48.747

如果您尝试这种方法会怎样？将 CSS 类添加到您的输入中，然后通过这些类应用样式。

[http://jsfiddle.net/zr6yB/](http://jsfiddle.net/zr6yB/)

```
<fieldset class="contact">
    <label for="full_name">Purchasing Account ID:</label>
    <input type="text" id="acc_id" name="acc_id" size="13" class="input-generic" />
    <label for="email_address">Email Address:</label>
    <input type="text" id="email_address" name="email_address" size="13" class="input-generic" />
    <label for="password">Password:</label>
    <input type="password" id="pw" name="pw" size="13" class="input-generic" />
</fieldset>​ 
```

CSS（缩写）

```
.input-generic {
    width: 306px;
    ...etc...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T06:34:24.893

**尝试这个：**

```
.Div_Class_Name input[type=text], .Div_Class_Name input[type=password] {
    background:#e5e2b6;
    border:2px solid #741a01;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T05:32:13.913

弄清楚了。CSS 包含的引用仍然引用我的实时副本，而不是我的开发副本。

# php - 向文件php表单提交添加多个输入

> ID：10763530
> 
> 赞同：1
> 
> 时间：2012-05-26T04:17:35.837
> 
> 标签：php, javascript

我有一个看起来像这样的表格：

```
<label for="fullpath"><span class="required">*Full Path of folder to change access:</span></label>
            <input name="fullpath" id="it10" type="text" size="50" maxlength="50" />
            <br />
            <small>Example: g:\A\Folder or j:\Your\Folder</small><br />
            <div class="bgdiff">
              <label for="userpermissiongroup">User Permission Group to be changed:</label>
              <input name="userpermissiongroup" type="text" id="it11" size="50" maxlength="50" />
              <small>If Known...</small></div>
            <br />
            <label for="addreadaccess">Additional users requiring read access:</label>
            <input name="addreadaccess" type="text" id="it12" size="15" maxlength="15" />
            <br />
            <small>AD Username</small><br />
            <div class="bgdiff">
              <label for="addauthoraccess">Additional users requiring author access:</label>
              <input name="addauthoraccess" type="text" id="it13" size="12" maxlength="12" />
              <br />
              <small>AD Username</small></div>
            <br />
            <label for="removeaccess">Users to be removed from access:</label>
            <input name="removeaccess" type="text" id="it14" size="12" maxlength="12" />
            <br />
            <small>AD Username</small><br />
            <div class="bgdiff">
              <label for="supervisor"><span class="required">*Data Steward, Program Manager, Project Lead, or Supervisor who can authorize access changes:</span></label>
              <input name="supervisor" type="text" id="it15" size="30" maxlength="30" />
              <br />
              <small>AD Username</small></div>
            <br/>
            <label for="phoneapprover"><span class="required">*Phone number of approving official: </span></label>
            <input name="phoneapprover" type="text" id="it16" size="30" maxlength="30" />
            <br />
            <small>999-999-9999</small><br />
          </fieldset>
        </div> 
```

我想给用户一个选项，在提交之前将所有这些信息添加到这个表单中超过 1 倍。（比如最大 10 倍）我脑子里有几个想法。1 使用 Javascript 创建新字段，然后以某种方式用我的 php 脚本解析它们。2 就像上面代码中的表单一样放置 10 个代码片段并隐藏它们，直到用户单击添加另一个。

每个输入都必须是唯一的，因为我提交此信息时认为是一个简单的 $_REQUEST php 脚本。我了解如何使用 1 个输入和一个 for 每个循环来执行此操作，但我不确定如何使其与如此大量的输入、标签等一起工作......

```
<?php
foreach($_POST['newdata'] as $value) {
echo "$value <br />";
}
?> 
```

有人对解决此问题的最佳方法有一些建议吗？我不确定通过 JS 添加他的表单是不是最好的主意，所以从隐藏的 div 中显示新信息似乎更快更容易......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:25:30.760

如果您附加`[]`到表单字段名称，PHP 将获取这些字段并将它们转换为数组，例如

```
<input type="text" name="field[]" value="first" />
<input type="text" name="field[]" value="second" />
<input type="text" name="field[]" value="third" /> 
```

将产生以下 $_POST 结构：

```
$_POST = array(
    'field' => array(
         0 => 'first',
         1 => 'second',
         2 => 'third',
    )
); 
```

另一种方法是为每个字段名称附加递增的数字，因为您为每个新块复制现有字段集。这提供了块之间的良好分隔，并允许您保证相关字段具有相同的数字标签，但它确实使处理复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:24:29.340

这并不难：主要思想是为每次迭代使用 ID，因此您的输入将具有唯一的名称，并且可以毫无问题地处理

```
for ($i=0;$i<10;$i++){
   echo "<input name='removeaccess' type='text' id='it14_{$i}' size='12' maxlength='12' />";
} 
```

因此，您将当前输入集的代码与标签一起添加到输入名称中，ID 是在每次循环迭代中形成的。小心`'`和`"`！

# asp.net - 无法将图像保存到我的 sql 数据库中

> ID：10763531
> 
> 赞同：0
> 
> 时间：2012-05-26T04:17:35.977
> 
> 标签：asp.net, asp.net-mvc-3

我的任务是将图像动态保存到数据库中，每当用户浏览 img 并单击保存按钮时，我正在使用 asp.net mvc3、razor 视图和 mysql 是我的数据库，我正在尝试将浏览的 img 文件传递​​给控制器​​并在那里在控制器中，我将其转换为字节格式并将其保存到数据库中。但是当我放置一个braekpoint时，它显示为空，表明该文件没有传递给控制器​​，有人可以帮我解决这个问题吗

下面是我的视图和控制器

$(文档).ready(函数 () {

```
 $("#photos").kendoUpload(); 
       $("#save").click(function (event) {   
           alert("started");
           url = 'Home/Details'; 
           var b;

           $.ajax({

               type: "POST",

               url: '/Home/Details',
               data: { b: $('#photos').load(url) }, 

               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (str) {
                   alert("hai");
                   alert(str.st);
               }
           });

       });

   }); 
```

控制器：

```
 public ActionResult Details(HttpPostedFileBase b)
    {

        try
        {
           b = Request.Files[1];
            byte[] imageSize = new byte[b.ContentLength];
            b.InputStream.Read(imageSize, 0, (int)b.ContentLength);
            Image g = new Image();

            g.Img = imageSize;

            dbContext.Add(g);
            dbContext.SaveChanges();
            return RedirectToAction("Index");
        }
        catch
        {
        }
        var str = new { st = "saved" };
        return Json(str, JsonRequestBehavior.AllowGet);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:26:12.243

首先，我认为您不能使用 Ajax 提交文件，因为它违反 JavaScript 安全模型。您将需要使用其他方式来发布它 ajax 方式。以下是一些用于 ajax 文件上传的 JQuery 插件：

[http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/](http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/)

如果您想使用普通表单发布，那么您必须将表单元素的加密属性设置为“multipart/formdata”，否则服务器只发送文件名而不是文件本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:21:16.943

1.  您不能通过标准 AJAX 上传文件
2.  的返回值`.load()`不是加载的内容 - 它返回 jquery 对象。所以你试图发布 jquery 对象，而不是图像数据。

# iphone - 在objective-C中解析以@和#开头的字符串

> ID：10763536
> 
> 赞同：0
> 
> 时间：2012-05-26T04:18:24.723
> 
> 标签：iphone, objective-c, ios, regex, ipad

所以我试图解析一个具有以下格式的字符串：

# baz@marroon#red#blue #big@cat#dog

或者，也可以用空格分隔：

# baz @marroon #red #blue #big @cat #dog

这就是我现在的做法：

```
- (void) parseTagsInComment:(NSString *) comment
{
    if ([comment length] > 0){
        NSArray * stringArray = [comment componentsSeparatedByString:@" "];
        for (NSString * word in stringArray){

        }
    }
} 
```

我已经用空格分隔了组件，但是如果它没有空格怎么办..我如何遍历这些单词？我正在考虑使用正则表达式..但我不知道如何在 Objective-C 中编写这样的正则表达式。任何想法，对于涵盖这两种情况的正则表达式？

这是我的第一次尝试：

```
NSError * error;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(@|#)\\S+" options:NSRegularExpressionCaseInsensitive error:&error];

    NSArray* wordArray = [regex matchesInString:comment 
                                      options:0 range:NSMakeRange(0, [comment length])];

    for (NSString * word in wordArray){

    } 
```

哪个不起作用..我认为我的正则表达式是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:55:48.243

这是一种使用 NSScanner 的方法，它将分隔的字符串及其范围的字符串表示形式放入一个数组中（这假设您的原始字符串以 # 开头 - 如果它没有并且您需要它，那么只需在开始时将哈希添加到字符串中）。

```
NSMutableArray *array = [NSMutableArray array];
    NSString *str = @"#baz@marroon#red#blue #big@cat#dog";
    NSScanner *scanner = [NSScanner scannerWithString:str];
    NSCharacterSet *searchSet = [NSCharacterSet characterSetWithCharactersInString:@"#@"];
    NSString *outputString;

    while (![scanner isAtEnd]) {
        [scanner scanUpToCharactersFromSet:searchSet intoString:nil];
        [scanner scanCharactersFromSet:searchSet intoString:&outputString];
        NSString *symbol = [outputString copy];
        [scanner scanUpToCharactersFromSet:searchSet intoString:&outputString];
        NSString *wholePiece = [[symbol stringByAppendingString:outputString]stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
        NSString *rangeString = NSStringFromRange([str rangeOfString:wholePiece]);
        [array addObject:wholePiece];
        [array addObject:rangeString];
    }
    NSLog(@"%@",array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:47:24.463

我认为你真正想要的正则表达式是`[@#]?\\w+`. 它将找到可选地以@或#开头的字母组。您的表达式不起作用，因为它会查找任何非空格字符，包括 @ 和 #。（根据“单词”中可能包含的内容，您可能需要比 或多或少的特定`\w`内容，但问题并不清楚。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:08:59.217

如果您需要范围，那么 NSRegularExpression 可能效果很好：

```
NSString *comment = @"@baz@marroon#red#blue #big@cat#dog";

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"[#@]\\w+" options:0 error:nil];

NSArray* wordArray = [regex matchesInString:comment 
                                    options:0 
                                      range:NSMakeRange(0, [comment length])];

for (NSTextCheckingResult *result in wordArray)
    NSLog(@"%@", [comment substringWithRange:result.range]); 
```

或者，`[@#][a-zA-z]+`如果您只使用 ASCII 字母单词就可以了。

# objective-c - 初始化 Objective-C 属性的最佳实践

> ID：10763537
> 
> 赞同：2
> 
> 时间：2012-05-26T04:18:33.073
> 
> 标签：objective-c, properties, initialization, conceptual

我知道这可能不一定只适用于@properties，但它们将是最常见的用例。如果有，例如：

```
@property (strong) NSObject *object;

...

@synthesize object = _object; 
```

`init`可以在声明它的类的方法中对其进行初始化，如下所示：

```
- (id)init {
    self = [super init];
    if (self) {
        _object = [[NSObject alloc] init];
    }
} 
```

或覆盖 getter 并在首次使用时对其进行初始化：

```
- (NSObject *)object {
    if (!_object) {
        _object = [[NSObject alloc] init];
    }
    return _object;
} 
```

这些哪个更好用？这是否取决于使用场景（例如，声明属性的对象是否有多个初始化器，或者属性的类型，它的使用方式等）？

我在重写 getter 时看到的真正优势是该属性只会在需要时分配，但缺点是第一次访问会更慢。

附带说明一下，当访问方法中的属性时，以或`init`访问它们更好吗？`self.object``_object`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-17T21:51:41.300

与公认的答案相反，[高级内存管理编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)说您应该在初始化程序和 dealloc 方法中使用实例变量。请参阅“不要在初始化方法和 dealloc 中使用访问器方法”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T04:57:22.757

我个人发现在 init 方法中初始化更好，对象的预期寿命会更加清晰，并且还要考虑对象的 init 是否失败，在 init 中获取它不是比在获取时更好吗？

我也更喜欢`self.object`用于属性，因为它使用对象的 getter 和 setter 以及“self”。明确并避免需要或不需要保留的情况。确定在某些情况下，例如在您的示例中，它可能会导致多行代码，但我依靠编译器来优化代码。

例如

```
yourobjclass* tmp = [[yourobjclass alloc] init];
self.object = tmp;
[tmp release]; 
```

# security - 我应该如何实施一个系统来阻止密码破解？

> ID：10763543
> 
> 赞同：1
> 
> 时间：2012-05-26T04:19:27.253
> 
> 标签：security

我想采取措施阻止人们试图破解我网站上的用户帐户。对于只需要尝试几个密码来记住的客户来说，这背后的最佳流程是什么？

我注意到谷歌在几次尝试失败后显示了一个验证码图像。我从来没有尝试过足够的努力，但我敢肯定，经过多次尝试，他们一定会阻止你。

确保某人不尝试使用蛮力方法来访问帐户是最佳做法吗？

验证码？阻止他们的 IP 地址（如果他们在共享 IP 上，这是否有效）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:26:12.980

您最好的选择是在设定的时间段内（例如滚动 30 分钟的窗口）以相对较高的尝试次数（10 或 20 次左右）为每个用户名锁定（10 分钟、15 分钟等）。通过将尝试次数设置为高于 3 或 5 次，普通用户将在锁定命中之前放弃或尝试重置密码。

您可以考虑记录失败的尝试数据（IP、用户名、时间戳等），以了解正常用户行为和蛮力尝试之间的行为差​​异。这将允许您随着时间的推移完善您的政策。

还要考虑一个强密码策略（至少 8 个以上的字符和至少一个数字）。

您还可以考虑某种形式的多因素身份验证。您提到了验证码，但您可能会发现许多其他有用的技术。如果他们无法识别用户的 IP 地址，我使用的一个站点会将令牌通过电子邮件发送到用户的电子邮件地址，并且用户必须出示该令牌才能从新 IP 地址访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:41:54.810

在一定次数的尝试后将用户锁定和/或在再次接受进一步的登录尝试后延长其所花费的时间的方案当然是一个好主意。和 CAPTCHA 一样（除了烦人 :)*但是*，在我看来，只有当你有强大的硬件支持你时，它们才有意义。

我认为只有在你有资源的情况下才应该尝试这样做的原因是，你必须记住，这样的方案需要你*记住*最近对系统中可能的*每个*用户所做的尝试。当然，有很多方法可以持久化信息，它们的效果各不相同：内存缓存、数据库等。

但无论如何，这样的机制会给你的应用程序带来额外的负载，而且也有不利的一面：如果攻击者对你的应用程序感到厌烦或恼火，他们还不如尝试通过拒绝服务攻击来解决它。需要保留大量信息的复杂登录方案将有助于实现这一目标。

如果您决定应用这样的功能，我建议您首先在实验室中对其进行大量压力测试，以了解“您可以承受多少” - 这样您就可以确定是否需要升级硬件： )

不需要持久性的一种更简单的方法是应用密码散列，如 PBKDF2、bcrypt 或 scrypt。这些人为地减慢攻击者的速度，使攻击者尽可能地困难。但请注意，这些也会给您的应用程序带来额外的计算压力（尽管可能小于上述措施），所以我还是会先做一些压力测试。

# java - 一般如何处理 CXF 请求处理程序中的输入参数？

> ID：10763544
> 
> 赞同：4
> 
> 时间：2012-05-26T04:19:28.113
> 
> 标签：java, rest, cxf, jax-rs, cxfrs

我一直在使用 apache CXF（2.2.2 版）JAX-RS 做一些工作。我试图在调用业务方法之前在 CXF 请求处理程序中引入数据验证层。幸运的是:)，我在请求处理程序（DataValidationHandler）中遇到输入参数处理问题。我可以按照请求处理程序中的代码行手动读取 JSON 对象。但它与在 CXF 框架中注册的 JSONProvider 重复。因为 JSON 对象输入流只能读取一次，否则会遇到异常“java.io.EOFException: No content to map to Object due to input end”。此外，重复的 JSON 对象反序列化会影响性能。以下代码是供您参考的示例。

手动从 HTTP 正文中读取 JSON 对象：

```
OperationResourceInfo ori = paramMessage.getExchange().get(OperationResourceInfo.class);
MultivaluedMap<String, String> values = new MetadataMap<String, String>();
List<Object> objList = JAXRSUtils.processParameters(ori, values, paramMessage); 
```

在 CXF JAX-RS 框架中注册 JSONProvider：

```
<bean id="JSONProvider" class="com.accela.govxml2.jaxrs.util.JSONProvider"></bean> 
```

从输入流中读取 JSON 对象到 Java 对象：

```
public Object readFrom(......){
    ObjectMapper objectMapper = new ObjectMapper();
    Object result = objectMapper.readValue(entityStream, TypeFactory.defaultInstance().constructType(genericType));
    Return result;
} 
```

我正在通过以下代码行手动处理路径参数。

```
OperationResourceInfo ori = paramMessage.getExchange().get(OperationResourceInfo.class);
URITemplate t1 = ori.getClassResourceInfo().getURITemplate();
URITemplate t2 = ori.getURITemplate();
UriInfo uriInfo = new UriInfoImpl(paramMessage, null);
MultivaluedMap<String, String> map = new MetadataMap<String, String>();
t1.match(uriInfo.getPath(), map);
String str = map.get(URITemplate.FINAL_MATCH_GROUP).get(0);
t2.match(str, map);
String pathParameter= null;
if (map.containsKey("pathParam") && !ValidationUtil.isEmpty(map.get("pathParam")))
{
    pathParameter= map.get("pathParam").get(0);
} 
```

我的问题在这里：

1.  一般如何处理请求处理程序中http body的POST/PUT输入参数？
2.  如何避免性能问题以有效读取输入参数？
3.  有没有办法在 CXF(JSONProvider) 读取参数和业务方法调用之间注入验证（处理程序/拦截器）层？
4.  有什么优雅的方式来处理路径参数吗？

谢谢你的帮助。任何意见和建议将不胜感激。

问候， 迪伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:06:48.617

我找到了另一种将 DataValidation Interceptor 注入读取参数阶段的方法。我们可以重用来自消息内容的反序列化输入模型，这些模型由框架中注册的 JSONProvider 反序列化。它可以提高性能，因为只反序列化输入模型一次。

```
public class DataValidationInInterceptor extends AbstractPhaseInterceptor<Message>
{
public DataValidationInInterceptor()
{
    super(Phase.READ);
}

@Override
public void handleMessage(Message message)
{
    OperationResourceInfo ori = message.getExchange().get(OperationResourceInfo.class);
    Method method = ori.getMethodToInvoke();
    Class<?>[] types = method.getParameterTypes();
    Type[] genericParameterTypes = method.getGenericParameterTypes();

    for (int i = 0; i < types.length; i++)
    {
        Class<?> type = types[i];
        List obj = (List) message.getContent(List.class);
        System.out.println(obj);
        System.out.println(type);
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:21:12.507

经过研究，我可以根据以下问题的答案（[两次读取流](https://stackoverflow.com/questions/9501237/read-stream-twice)）读取输入流两次。

但是，JSON 对象反序列化性能仍然是我关心的问题。谁有更好的解决方案？

拦截请求并将消息内容从 CoyoteInputStream 更改为 ByteArrayInputStream，因此我可以读取 InputStream 两次。

```
InputStream in = message.getContent(InputStream.class);
if (in != null)
{
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    IOUtils.copy(in, baos);
    byte[] bytes = baos.toByteArray();
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    message.setContent(InputStream.class, bais);
} 
```

在从输入流读取 JSON 对象到 Java 对象之前重置 ByteArrayInputStream：

```
public Object readFrom(......){
    ObjectMapper objectMapper = new ObjectMapper();
    if (entityStream.markSupported())
    {
        entityStream.reset();
    }
    Object result = objectMapper.readValue(entityStream, TypeFactory.defaultInstance().constructType(genericType));
    return result;
} 
```

# asp.net - Web.Config 问题和分析器

> ID：10763551
> 
> 赞同：0
> 
> 时间：2012-05-26T04:20:50.380
> 
> 标签：asp.net, vb.net, visual-studio-2008, web-config, membership-provider

我有一组 ASP.NET 会员表在线与我的 godaddy 托管。我可以在本地运行我的网站并很好地连接到在线会员表，并且可以创建帐户等。所以基本上我把所有东西都挂在了网上参考所有东西上。

但是当我尝试查看该站点时，我收到了 500 内部服务错误。我无法查看事件查看器，因为 Godaddy 不允许这样做。当我重命名 web.config 并刷新站点时，我可以进入登录或注册页面，但是当它尝试保存数据时它会爆炸。

那么他们是一个很好的 web.config 分析器，可以告诉我出了什么问题吗？因为它可以在本地引用在线数据库，所以它应该可以正常工作，对吧？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:51:22.557

[您可以从跟踪](http://msdn.microsoft.com/en-us/library/y13fw6we%28v=vs.71%29.aspx)中获取大量信息，或者添加像[log4net](http://logging.apache.org/log4net/)这样的记录器并将日志消息写入文本文件。这可以告诉你什么是错的。

# php - codeigniter 的二维会话问题

> ID：10763557
> 
> 赞同：1
> 
> 时间：2012-05-26T04:22:58.233
> 
> 标签：php, codeigniter, session

我想在会话中存储二维数组，我通过函数调用不断创建数组。

我正在尝试使用此代码

```
function nextQuestion($questionId,$response)
{ 
       $this->session->set_userdata("res[$questionId][]"),$response);
} 
```

但这不是创建二维数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:30:39.790

sametimes codeigniter 会话库可能很无聊。如果我将数组添加到会话中，我会序列化数组。

您可以序列化数组并使用反序列化返回。或者您可以使用 php 会话库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:01:33.330

会话中存储的键必须是字符串，但值可以是多维数组。您可以检索数组，对其进行操作并将其再次保存在会话中，如下所示：

```
$session_response = $this->session->userdata("res");
//some manipulation on $session_response
$this->session->set_userdata('res', $session_response); 
```

# javascript - 如何在 HTML5 上索引具有相同 ID 的 div 标签

> ID：10763560
> 
> 赞同：0
> 
> 时间：2012-05-26T04:23:04.753
> 
> 标签：javascript, html

比方说，我的代码如下

```
<div id='tes' data-name='baloon'>Content Baloon</div>
<div id='tes' data-name='big'>Content Big</div> 
```

而且我想用javascript（不是jquery）获取每个div的内部，但在html5上工作。那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:26:41.757

您不能在 HTML（5 或任何其他版本）文档中包含具有相同 ID 的元素 - 这是一个错误。因此，javascript 无法解决这个问题。

[在http://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)检查 HTML 规范

您可以拥有多个具有相同“名称”属性的元素 - 并且 javascript 对此提供了支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:28:53.597

只需创建`tes`一个类并使用 Javascript 获取`div`该类的所有元素。

然后遍历该组元素并检查`data-name`您要匹配的特定属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T04:31:47.747

每个 div 标签“class”或“id”不能有相同的特定名称。

data-name 用于匹配 javascript 函数或给定的命令。

# c++ - c++ 子类和 operator= ：无限循环和意外调用

> ID：10763566
> 
> 赞同：0
> 
> 时间：2012-05-26T04:25:18.767
> 
> 标签：c++, inheritance

以下代码进入无限循环。

```
#include <string>
#include <iostream>
using namespace std;

class A{
   public:
      A(){
         cout << "Normal constructor" << endl;
      }
      A(const A& moo){
         cout << "It's a constructor!" << endl;
         operator=(moo);
      }
      void operator=(const A& moo){
         cout << "Calling A::Operator=" << endl;
      }
};

class B : public A{
   public:
      B(){}
      B(const A& thea){
         cout << "Gotshere" << endl;
         operator=(thea);
      }
};

int main(){

   B b;

   b = A();

} 
```

无限循环的输出在“Normal constructor”和“Gotshere”之间循环。我从`main`函数中猜测，在将 an 分配`A`给一个`B`类时，它会尝试调用`B::operator=`不存在的 ，因此它会`B(const A&)`再次调用。

我不明白为什么`A()`会被调用。有人知道吗？**EDIT**应该已经说清楚了，`A()`就是在无限循环上**反复调用。**

当然，解决方法是 put `B::operator=(const A&)`，但我很想知道它为什么这样做。

此外，我为 class 添加了一个运算符`B`：

```
void B::operator=(const A&) { cout << "That should fix things. A::Operator=" << endl; } 
```

它确实解决了问题，但是当我这样做时`B b; b = B()`，我得到`Calling A::operator=`的不是 `B::operator=' 的输出。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T04:30:39.477

> 我不明白为什么调用 A() 。有人知道吗？

`B`继承`A`，所以在构造之前`B`，必须构造`A`组件。`B`由于您没有指定`A`要调用的构造函数，因此编译器会选择默认构造函数。

**编辑**（回应问题的编辑）

就`A`反复调用部分而言，这就是您的逻辑错误的地方：您说

> 它尝试调用`B::operator=`不存在的 ，因此它再次调用 B(const A&) 。

但这不是正在发生的事情：它不是调用`A`' 运算符`=`，它调用的是编译器无偿为您生成的`B`' 运算符。`=`要验证，将行更改为`A::operator=(thea);`，无限递归将消失。

那么为什么要无限递归呢？回想一下，生成的赋值运算符的签名是

```
B& operator=(const B& b) 
```

编译器需要一个 的实例`B`来传递给`operator=`，但您正在传递 的一个实例`A`。但是，您定义了一个构造`B`函数`const A&`。这足以让编译器通过创建临时 B、从 构造它`const A&`并调用 来产生正确的调用`B::operator=`，如下所示：

```
B temp(thea); <<== At this point, you're in an infinite recursion
B::operator=(temp); 
```

附带说明一下，C++ 中的赋值是一个 lval，因此您的赋值运算符的重载应该通过引用返回被分配给的对象（即`*this`）。

```
A& operator=(const A& moo){
    cout << "Calling A::Operator=" << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T04:37:18.147

B::operator= 接受一个 B&，但你传递给它一个 A&，所以它必须从 A 构造一个新的 B，这会导致无限递归。

至于你的第二个问题。您定义了 B::operator=(const A &)，但仍会自动生成采用 const B & 的赋值运算符，并且自动生成的赋值运算符调用基本赋值运算符。

# iphone - 在 imageview 中添加 4 个图像并通过点击或滑动手势更改图片

> ID：10763579
> 
> 赞同：0
> 
> 时间：2012-05-26T04:27:09.200
> 
> 标签：iphone, uiimageview

我想在图像视图中添加四个图像。首先，一个图像将是可见的。

每当点击或滑动图像视图时，它都会更改图像。

我想将imageview的图像一一更改4次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:08:01.720

ToggleImageView.h

```
@interface ToggleImageView : UIImageView {
    NSArray *images;
    int currentIndex;
}

- (id)initWithImages:(NSArray *)theImages;

@end 
```

ToggleImageView.m

```
#import "ToggleImageView.h"

@implementation ToggleImageView

- (id)initWithImages:(NSArray *)theImages {
    self = [self initWithImage:[theImages objectAtIndex:0]];

    if (self) {
        images = [theImages retain];
        currentIndex = 0;

        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
        [self addGestureRecognizer:tap];
        [tap release];

        self.userInteractionEnabled = YES;
    }

    return self;
}

-(void)dealloc {
    [images release];

    [super dealloc];
}

- (void)handleTap:(UITapGestureRecognizer *)sender {
    if (images.count > 0) {
        currentIndex++;
        if (currentIndex > images.count - 1) {
            currentIndex = 0;
        }

        self.image = [images objectAtIndex:currentIndex];
    }
}

@end 
```

然后在你的控制器的某个地方

```
ToggleImageView *tv = [[ToggleImageView alloc] initWithImages:[NSArray arrayWithObjects:[UIImage imageNamed:@"image1"], [UIImage imageNamed:@"image2"], [UIImage imageNamed:@"image3"], [UIImage imageNamed:@"image4"], nil]];
[self.view addSubview:tv];
[tv release]; 
```

# javascript - getElementByID 无效，因为字段位于某种框架中，我该如何访问它？

> ID：10763580
> 
> 赞同：1
> 
> 时间：2012-05-26T04:27:25.343
> 
> 标签：javascript, getelementbyid, getelementsbyname

请快速访问此页面并点击右上角的登录：

这是链接：[http ://forums.gamesalad.com](http://forums.gamesalad.com)

我正在尝试预先填写弹出的这两个字段。它们似乎处于某种框架中。我无法使用 getElementByID （或任何 getElement ）访问字段。如何使用 javascript 访问这两个字段？

注意：（不要担心触发 javascript，只需访问字段）。

这是我当前的代码：

```
document.getElementById('login-dialog-email').value = 'the user name'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:39:54.690

您的密码和电子邮件输入框具有相同的 ID `login-dialog-email`。当您尝试分配值时，javascript 会感到困惑。分配不同的ID，你很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:40:42.517

如果您在调试器（例如 Chrome 调试器）中查看 HTML，您会看到有两个 id="login-dialog-email" 的输入元素实例。

W3C 规范说，在单个 HTML 文档中只能使用 id 属性的一个实例，并且浏览器供应商以一种方式实现此规范，如果相同值的多个 id 属性打开，则行为被认为是未定义的这页纸。

根据我的经验，这实际上只影响具有所述 id 的元素的第二个实例，如果您搜索 login-dialog-email 并检查哪个元素被突出显示，您会看到第二个实例是代表你的表格。

删除第一个实例，或使用唯一 ID，然后您就可以定位该元素。

此登录字段的第一个实例似乎是隐藏在页面上的模板的一部分。

```
<div id="login-form-template" style="display: none">
    <form accept-charset="UTF-8" action="https://auth.gamesalad.com/auth/signIn" class="dialog dialog-form" id="common-login-form" method="post">
   ...

    <li class="email">
        <label for="login-dialog-email">
        Email:
          <input id="login-dialog-email" name="emailAddress" type="text" value=""></input>
        </label>
    </li>
    <li class="password">
        <label for="login-dialog-password">
        Password:
          <input id="login-dialog-password" name="password" type="password" value="">
        </label>
    ... 
```

该字段的第二个实例实际上出现在 fancybox 中，这是**您尝试定位的实际 HTML 所在的位置。**

```
<div id="fancybox-content" style="border-top-width: 10px; border-right-width: 10px; border-bottom-width: 10px; border-left-width: 10px; width: 300px; height: 233px; "><div style="width:300px;height:auto;overflow: auto;position:relative;">
   <form accept-charset="UTF-8" action="https://auth.gamesalad.com/auth/signIn" class="dialog dialog-form" id="common-login-form" method="post">
   ...
   <li class="email">
       <label for="login-dialog-email">
         Email:
         <input id="login-dialog-email" name="emailAddress" type="text" value="">
       </label>
   </li>
   <li class="password">
     <label for="login-dialog-password">
       Password:
       <input id="login-dialog-password" name="password" type="password" value="">
     </label>
   <span>
... 
```

因此，即使网站所有者试图从页面中定位这些字段，他/她也会遇到同样的问题。

此问题的解决方案是在任何模板中使用 className 属性。这确保了所有字段都可以通过 DOM 方法定位。

但是，这并不意味着您仍然不能定位元素：

**JavaScript：**

```
document.getElementsByClassName("email")[2].
    getElementsByTagName("input")[0].value = "test@example.com"; 
```

**jQuery：**

该站点*正在*使用 jQuery，因此您也可以使用它：

```
$('input[name="emailAddress"]').val( "test@example.com" ); 
```

# c++ - 在 Ubuntu 中用 C 语言创建一个文件作为可执行程序

> ID：10763581
> 
> 赞同：2
> 
> 时间：2012-05-26T04:27:26.623
> 
> 标签：c++, c, linux, ubuntu

我的程序通过 TCP 套接字接收可执行二进制文件。

我需要将此文件作为可执行程序保存到硬盘中。文件已成功接收，但问题是默认文件属性设置为不可执行。

如何在 Ubuntu 中将文件的属性更改为 C 中的可执行文件？

谢谢， 问候， 机器人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T04:33:24.330

怎么样`int chmod(const char *path, mode_t mode)`和`int fchmod(int fd, mode_t mode) ?`

```
apropos chmod
man 2 chmod 
```

最基本的例子：

```
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[]){

   char * fpath = "/path/to/binary";
   int ret=0;
   if(ret = chmod(fpath, S_IRUSR|S_IXUSR) < 0){
      perror("chmod failed");
      exit(1);
   }

   printf("chmod ok\n");
   exit(0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T05:09:58.647

你是如何创建和编写文件的？如果您*知道*它将是可执行的，只需首先使用正确的模式制作文件。

```
int fd = open("path/to/file", O_WRONLY | O_CREAT, 0777); 
```

除非`umask`是剥离可执行位（常用值是`0022`并且`0002`保留可执行位单独），`path/to/file`否则将创建最初可执行的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T04:32:39.803

您可以使用 更改文件模式`chmod`。阅读手册页（`man 2 chmod`）了解详细信息（与 shell 命令大致相同`chmod`）。

# jquery-mobile - 带有javascript的jquery移动启动画面

> ID：10763583
> 
> 赞同：7
> 
> 时间：2012-05-26T04:27:52.007
> 
> 标签：jquery-mobile, splash-screen

我试图避免将其用于启动画面，因为它不适用于所有设备以及其他原因：

```
<link rel="apple-touch-startup-image" href="img/splash.png" /> 
```

所以我试图改用它，它工作正常，直到它滑入一个新页面，然后再次被视为启动屏幕（例如**，当计时器到期时它变为空白 - 在这种情况下为 4 秒**）。如何停止/限制此行为，以便 changePage 仅包含在启动页面中？

```
<body>
 <div data-role="page" id="splash"> 
  <div class="splash">
    <img src="startup.jpg" alt="startup image" />

<script type='text/javascript'>//<![CDATA[ 
            $(window).load(function(){
            $(function() {
                setTimeout(hideSplash, 4000);
                        });

            function hideSplash() {
            $.mobile.changePage("#home", "fade");
            }

            });//]]>  
        </script>

  </div>
 </div>

 <div data-role="page" id="home"> 
   <div data-role="header" data-backbtn="false">
    <h1></h1>
   </div>
   <div data-role="content">

   </div>
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T10:25:43.170

好主意就是我的想法。使用单页而不是多页（多个数据角色=页面）。对于 index.html 或 index.php 或其他什么。把你的启动页面。其原因我稍后会解释。

> 索引.html

```
<head>
    <!-- First include all jquery stuff -->
    <script src="app.js"></script><!-- external script because we can just include it in every page -->
</head>
<body>
    <div data-role="page" id="splash"> 
        <div class="splash">
            <img src="startup.jpg" alt="startup image" />
        </div>
    </div>
</body> 
```

> 应用程序.js

```
$(document).on('pageinit','#splash',function(){ // the .on() method does require jQuery 1.7 + but this will allow you to have the contained code only run when the #splash page is initialized.
    setTimeout(function(){
        $.mobile.changePage("home.html", "fade");
    }, 4000);
}); 
```

好的，所以我这样做是因为假设您有导航菜单，并且您想将人们送回主页。您不必再次显示启动页面。您可以只链接到 home.html。拆分页面也有助于保持 dom 更精简。我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T08:41:26.683

```
<link rel="apple-touch-startup-image" href="img/splash.png" /> 
```

确实只适用于苹果移动设备。

真正的闪屏应该只*在*您等待时向您展示精美的图片。它的目标不是让你等待真正的原因。在您的情况下，为了让它看起来很酷，您的用户需要花费 4 秒的时间。

我已经修改了你的代码并将它放在这个[jsfiddle](http://jsfiddle.net/v7ZRr/)中：你会看到它现在可以工作了。为了让启动画面占据整个宽度/高度，请编辑 css 以删除边距。我已经将计时器设置为2s，我认为这已经足够了。

# android - 使用 Corona 进行跨平台应用程序开发

> ID：10763584
> 
> 赞同：0
> 
> 时间：2012-05-26T04:27:52.603
> 
> 标签：android, ios, cross-platform, coronasdk

我想为 iOS 和 android 设备构建一个跨平台的移动应用程序。我以前从未尝试过制作移动应用程序，并且正在考虑使用 Corona SDK。我去 Corona 网站下载了 SDK，我有几个问题。首先，它说“由于 Apple 的限制，您不能在 Windows 上为 iOS 构建”。这是否意味着我只能构建 Android 应用程序，还是意味着我必须使用 Apple 计算机将其发布到应用程序商店？看到 Corona 是跨平台的，我认为如果您必须使用 Apple 计算机来获得 Corona 的跨平台优势，那将是愚蠢的。其次，我是否必须订阅 Corona 才能将我的应用程序放在应用商店上，或者我可以使用免费版本的 Corona SDK 来免费做到这一点。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T04:46:06.040

请参阅[此页面](http://www.anscamobile.com/pricing/whysubscribe.html?ref=home)关于分发。是的，由于 Apple 的限制，您需要 Mac 才能使用 iOS。

# mysql - 如何在使用 JOIN 的 UPDATE 语句上执行 WHERE 子句？

> ID：10763597
> 
> 赞同：5
> 
> 时间：2012-05-26T04:30:53.240
> 
> 标签：mysql

在此示例中，字段用户名位于用户表中，字段电子邮件位于配置文件表中。

```
UPDATE `profiles`
JOIN `users` ".
SET `username` = 'foo',
`email` = 'bar@aol.com'
WHERE users.user_id = '1' 
```

在这个 where 子句中，我使用 users.user_id，但这会导致配置文件表中的所有字段都使用电子邮件“bar@aol.com”进行更新。除了 WHERE 子句中的 users.user_id 之外，还指定 profiles.user_id 的语法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T04:36:34.853

您需要像这样加入表格：

```
UPDATE `profiles`
JOIN `users` on profiles.user_id = users.user_id
SET `username` = 'foo',
`email` = 'bar@aol.com'
WHERE users.user_id = '1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T04:40:44.090

试试这个

```
Update profiles,users set profiles.username='foo',profiles.email_id='foo@foo.com'
where profiles.user_id=users.user_id and users.user_id=1 
```

# openlayers - openlayers 图层上有多个单独的行

> ID：10763598
> 
> 赞同：1
> 
> 时间：2012-05-26T04:30:54.547
> 
> 标签：openlayers

我正在尝试使用 Openlayers 在单个图层上绘制单独的线段。该网站可以在[这里](http://cs.mwsu.edu/MapMatching/ViewContainers/?Route=input_01.txt&submit=ViewRoute)看到（点击地图然后放大）。红色框表示包含路段的四叉树。绿线显示为一条折线，我希望将其视为单独的线段。

## 这是我现有的功能

```
 function DrawSegments(response){
        var SegmentsData = eval( '(' + response.responseText + ')' );

        var line;
        var lineFeature;

        if(segmentsLayer)       
            segmentsLayer.destroy();

        segmentsLayer = new OpenLayers.Layer.Vector("Segments"); 

        var points = new Array();

        var style = { strokeColor: '#00ff00', 
                    strokeOpacity: 0.8,
                    strokeWidth: 2
        };  

        map.addLayer(segmentsLayer);                    
        map.addControl(new OpenLayers.Control.DrawFeature(segmentsLayer, OpenLayers.Handler.Path));                                     

        //Used this block as code example to possibly add lines using a WKT geometry collection
        //var feature = new OpenLayers.Feature.Vector(
            //OpenLayers.Geometry.fromWKT(
                //"POLYGON((28.828125 0.3515625, 132.1875 -13.0078125, -1.40625 -59.4140625, 28.828125 0.3515625))"
            //).transform(WGS,SMP)
        //);
        //segmentsLayer.addFeatures([feature]);

        for (var i = 0; i < SegmentsData.length; i++) {         
            points.push(new OpenLayers.Geometry.Point(SegmentsData[i][0], SegmentsData[i][1]).transform(WGS,SMP));
            points.push(new OpenLayers.Geometry.Point(SegmentsData[i][2], SegmentsData[i][3]).transform(WGS,SMP));
            line = new OpenLayers.Geometry.LineString(points);              
            lineFeature = new OpenLayers.Feature.Vector(line, null, style);                 
        }
        segmentsLayer.addFeatures([lineFeature]);           
    } 
```

## 我试过了：

寻找例子

`OpenLayers.Geometry.MultiLineString`和 `OpenLayers.Geometry.Collection`

我尝试将 lineFeature var 转换为数组并单独添加每个数组元素，但没有成功。文档对我没有帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T17:10:45.340

这很简单。用于测试打开的控制台并运行以下代码段：

```
features = [];
json = new OpenLayers.Format.JSON();
epsg4326 = new OpenLayers.Projection('EPSG:4326');
epsg900913 = new OpenLayers.Projection('EPSG:900913');

OpenLayers.Request.GET({
    url: "http://cs.mwsu.edu/MapMatching/ViewContainers/GetRoute.php?route=input_01.txt",
    async: false,
    success: function(r){
        coords = json.read(r.responseText);
    }
});

for (var i = 0; i < coords.length; i+=1) {
    var geometry = new OpenLayers.Geometry.Point(coords[i][0], coords[i][1]).transform(epsg4326, epsg900913);
    var feature = new OpenLayers.Feature.Vector(geometry);
    features.push(feature);
}

track_layer = new OpenLayers.Layer.PointTrack('Track', {style: {strokeColor: 'FF0000',  strokeWidth: 5}});
map.addLayer(track_layer);
track_layer.addNodes(features); 
```

# php - 五级类别的递归列表？

> ID：10763601
> 
> 赞同：0
> 
> 时间：2012-05-26T04:32:15.157
> 
> 标签：php, mysql

我面临着我们现有类别列表的巨大问题。我们的一位客户有 65,000 个嵌套类别。

第一级仅限于 10 个。

```
猫 A
  猫 B
     猫 B_a
     猫 B_b
     猫 B_c
     猫 B_d
  猫 C
  猫 D
  ……
猫 AA
  猫 B
  猫 C
  猫 D
  ……
猫 AAA
……
```

现有代码正在使用这些 SQL 生成一个数组

```
SELECT * 
  FROM kl_document_user_label 
  WHERE 
    customer_id='xxx' 
    and position RLIKE '^([0-9]+>){1,1}$' 
    AND ( user_crerate='0' OR user_crerate='1') 
  ORDER BY 
    ulable_name 
```

在 65,000 个嵌套类别的情况下，它被挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:44:46.193

当您有 5 个级别时，您可以使用左连接将同一张表与 parent_id 连续连接在一起。就个人而言，我认为您不需要嵌套集，如果您的应用程序支持它，那么具有递归函数的数据库可能会很有用。

# php - Sha 1 php，可能的变化和正则表达式

> ID：10763603
> 
> 赞同：1
> 
> 时间：2012-05-26T04:32:29.210
> 
> 标签：php, regex, sha

第一的，

sha1 哈希是否可能是所有数字或字母，

其次，在使用正则表达式检查 sha 1 哈希时是否需要开始和结束分隔符，即

```
/^[0-9a-f]{40}$/i 
```

代替

```
/[0-9a-f]{40}/i 
```

是否需要使用分隔符？

我问我是否应该检查模式是否至少有一个数字和至少一个字母，或者这无关紧要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:01:41.837

sha1 哈希是一个 160 位的值，可以在全 0 和全 1 之间。这意味着是的，理论上它可以是所有数字或所有字母（更具体地说，它可以是十六进制表示）。

至于开始和结束标记，除非您以其他方式检查字符串，否则它们是必需的。您发布的两种模式不等效：

```
/^[0-9a-f]{40}$/i 
```

由 0-9 或 af 中的 40 个字符组成且仅包含 40 个字符的字符串。

```
/[0-9a-f]{40}/i 
```

连续包含 0-9 或 af 的 40 个字符的字符串。

换句话说，第一种模式会认为这是无效的，而第二种则不会：

`|0000000000000000000000000000000000000000|`

第二个模式将匹配中间的 40 个有效字符，而不关心其余部分。

如果您还用于`strlen`验证字符串是否正好是 40 个字符，则可以有效地将第二个模式转换为第一个模式。不过，这有点多余，因为您基本上会有以下模式：

一个字符串：（在 0-9 或一行中包含 40 个字符）和（正好是 40 个字符）。

第一个版本表达得更紧凑，尽管第二个版本更明显。

# objective-c - Cocoa：如何防止工具栏中的 NSSearchField 获得第一响应者？

> ID：10763611
> 
> 赞同：4
> 
> 时间：2012-05-26T04:35:17.620
> 
> 标签：objective-c, cocoa, nstoolbar

当工具栏中有 NSSearchField 时，在窗口中按 TAB 键时它会自动成为第一响应者。我怎样才能防止这种情况？即让搜索字段拒绝第一响应者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:46:36.833

如果使用 Xcode 4.3.2，打开 XIB 文件，单击工具栏项两次以选择 NSSearchField（单击选择 NSToolbarItem）。在属性检查器中，勾选“拒绝第一响应者”复选框，Bob 就是你的叔叔。

这里的诀窍是 NSToolbarItem 通常不能拒绝第一响应者。但是，NSSearchField（其祖先是 NSToolbarItem）可以拒绝。

# php - 如何使用 OpenCart 模块从控制器中的模型调用函数？

> ID：10763613
> 
> 赞同：1
> 
> 时间：2012-05-26T04:35:25.093
> 
> 标签：php, mysql, opencart

我希望这不是含糊的，我仍然是 MVC-L 框架概念的初学者。我正在创建一个 Open-cart 1.5.1.3 模块，据我所知，OC 1.5+ 将在您首次安装 a 模块时从您的控制器内自动调用 install() 函数（如果您提供 install () 函数即）。我遇到问题的地方是实际调用一个函数（它创建一个新的数据库表），该函数位于我的控制器函数 install() 的模型中。

这是我已经拥有的代码：

**控制器：TrademeXml**

```
 public function install() {
    $this->load->model('model/TrademeXml');
// Create table to store TradeMe ID
$this->model_model_TradmeXml->createModuleTables();
} 
```

**型号：TradmeXml**

```
 public function createModuleTables() {
    $query = $this->db->query("CREATE TABLE IF NOT EXISTS " . DB_PREFIX . "trademeID (tid INT(30), PRIMARY KEY(tid)");
} 
```

在安装模块期间调用了 install 函数，但出现以下错误：

*致命错误：在 D:\xampp\htdocs\store\admin\controller\module\TrademeXml.php 中的非对象上调用成员函数 createModuleTables()*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T21:03:46.637

```
$this->load->model('module/tradexml');
$this->model_module_tradexml->createModuleTables(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:35:39.390

我错过了这个...

```
public function index() {
        $this->install(); 
```

# ajax - 从 asp.net mvc 对 wcf 的 ajax 调用

> ID：10763618
> 
> 赞同：2
> 
> 时间：2012-05-26T04:36:41.487
> 
> 标签：ajax, asp.net-mvc, wcf

我有两个应用程序。第一个是 WCF Service，第二个是 asp.net MVC 3 app。
在 WCF 应用程序中，我有一个界面：

```
 [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string HelloWorld(string personName);
    } 
```

还有一个类：

```
public class Service1 : IService1
    {
        public string HelloWorld(string personName)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            return serializer.Serialize("Hello " + personName);
        }
    } 
```

现在，在 asp.net mvc 应用程序中，我想通过 Ajax 调用此方法：

```
<script type="text/javascript">
    var personName = "John";
    var dataIn = '{' + '"input":"' + personName + '"}';
    $.ajax({
        url: "http://localhost:7215/Service1.svc/HelloWorld",
        type: "POST",
        contentType: "application/json; charset=utf-8",
        data: dataIn,
        dataType: "json",
        success: function (data) {
            var object = JSON.parse(data.d);
            if (object.Error == '') {
                $("#response").html(object);
            }
        },
        error: function (error) {
            alert("Error: " + error);
        }
    });
    </script> 
```

但在 Firebug 中我得到错误：`400 Bad Request`.
如何`HelloWorld`正确调用方法？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T14:07:23.190

所以你正试图从*JavaScript使用**WCF 服务*？

 *我看到的第一个问题是，您的服务尚未准备好从 JavaScript 中使用 :(。您必须进行以下更改..

1.  使用行为配置`Service1`类`AspNetCompatibilityRequirements`。

2.  `HelloWorld`用`WebGet`属性标记接口中的服务方法。[你需要参考`System.SericeModel.Web`汇编]

进行两次更改后..

```
[ServiceContract]
public interface IService1
{
  [OperationContract]
  [WebGet(ResponseFormat = WebMessageFormat.Json)]
  string HelloWorld(string personName);
}

[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class Service1 : IService1
{
  public string HelloWorld(string personName)
  {
    JavaScriptSerializer serializer = new JavaScriptSerializer();

    // you are not returning data in proper JSON format, wrap the text in
    // an anonymous object before serializing.
    return serializer.Serialize(new { text = "Hello " + personName });
  }
} 
```

下一个..

1.  为服务配置`webHttpBinding`（确保更改服务和合同名称！）。

    ```
    <system.serviceModel>
      <behaviors>
        <endpointBehaviors>
          <behavior name="webHttpBehavior">
            <webHttp />
          </behavior>
        </endpointBehaviors>
      </behaviors>
      <bindings>
        <webHttpBinding>
          <binding name="webHttpBindingWithJsonP" />
        </webHttpBinding>
      </bindings>
      <services>
        <service name="MvcApplication3.Service1">
          <endpoint address="" binding="webHttpBinding"
                    bindingConfiguration="webHttpBindingWithJsonP"
                    contract="MvcApplication3.IService1"
                    behaviorConfiguration="webHttpBehavior"/>
        </service>
      </services>
    </system.serviceModel> 
    ```

所以现在服务准备好了！

让我们在客户端进行更改（您正在从服务中获取一些数据，那么为什么要**POST**？）

```
 <script type="text/javascript">
      var personName = "John";
      var dataIn = '{' + '"input":"' + personName + '"}';
      $.ajax({
         url: "http://localhost:50623/Service1.svc/HelloWorld",
         type: "GET",
         contentType: "application/json; charset=utf-8",
         data: dataIn,
         dataType: "json",
         success: function (data) {
           var jsonData = JSON.parse(data);
           $("#response").html(jsonData.text);
         },
         error: function (error) {
           alert("Error: " + error);
         }
      });
   </script> 
```

到目前为止，我假设 WCF 服务和 MVC 应用程序都在同一个域中运行。

但如果不是这种情况，那么由于**CROSS-DOMAIN BARRIER ，您将收到**`405`*(Method Not Allowed)*错误。

 **有不同的方法可以解决这个问题！

*1.使用JSONP*

在这种情况下，您必须在绑定中将`crossDomainScriptAccessEnabled`属性设置为`true`，并且您必须从 jQuery 进行 JSONP 调用。

```
<binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" /> 
```

然后将方法中的`dataType`from更改`"json"`为 " 。`jsonp"``$.ajax`

```
 <script type="text/javascript">
      var personName = "John";
      var dataIn = '{' + '"input":"' + personName + '"}';
      $.ajax({
         ...
         dataType: "jsonp",
         ...
      });
   </script> 
```

*2\. 使用 CORS*

参考这个..

[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

[https://developer.mozilla.org/en/http_access_control](https://developer.mozilla.org/en/http_access_control)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T07:08:18.273

您需要确保的第一件事是您没有违反浏览器中内置的[同源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)此策略阻止您发送跨域 AJAX 请求。既然您提到您有 2 个应用程序，我怀疑您遇到了这个限制，因为您有例如托管的第一个应用程序`http://localhost:1234/`（包含 javascript 文件的应用程序）并且您正尝试向`http://localhost:7215/`（相同域，不同端口 => 违反了同源策略）。

有几种[解决方法](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)。其中之一是将服务配置为发送[JSONP](http://en.wikipedia.org/wiki/JSONP)响应而不是 JSON。这是 MSDN 上的[示例 WCF 服务应用程序](http://msdn.microsoft.com/en-us/library/ee834511.aspx)，它说明了如何配置它。基本上，您需要启用[此博客文章](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)`crossDomainScriptAccessEnabled`中所示的开关。***

# spring - 用户创建后 Spring Security 自动登录

> ID：10763620
> 
> 赞同：2
> 
> 时间：2012-05-26T04:37:04.580
> 
> 标签：spring, spring-mvc, spring-security

我已经成功使用spring security来登录用户。但问题是，现在在我的网页上，当创建新用户时，他/她必须再次返回登录页面才能登录，这当然使用弹簧安全性。有没有办法在创建新用户后立即使用 Spring Security 自动登录用户？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-12T22:11:15.793

做这个

```
UserDetails userDetails = userDetailsService.loadUserByUsername(username);
UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken (userDetails, password2, userDetails.getAuthorities());
authenticationManager.authenticate(auth);
if(auth.isAuthenticated()) {
    SecurityContextHolder.getContext().setAuthentication(auth);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T10:11:21.070

我从来没有做过，但我认为你应该做[文档](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/Authentication.html)中描述的事情。

> 一旦请求通过身份验证，身份验证通常将存储在由正在使用的身份验证机制的 SecurityContextHolder 管理的线程本地 SecurityContext 中。**通过创建 Authentication 实例并使用代码，可以在不使用 Spring Security 的身份验证机制之一的情况下实现显式身份验证**：
> 
> SecurityContextHolder.getContext().setAuthentication(anAuthentication);
> 
> 请注意，除非 Authentication 将 authenticated 属性设置为 true，否则它仍将由遇到它的任何安全拦截器（用于方法或 Web 调用）进行身份验证。

# php - APC 不会在 zend 中缓存 index.php 以外的文件

> ID：10763622
> 
> 赞同：0
> 
> 时间：2012-05-26T04:38:15.907
> 
> 标签：php, zend-framework, apc, opcode

我安装了 APC，并尝试将它用于 zend 框架的操作码缓存。

问题是唯一被缓存的文件是 index.php

我的 APC 配置：

```
apc.enabled = 1
apc.shm_segments = 1
apc.shm_size = 32M
apc.optimization = 0
apc.num_files_hint = 512
apc.user_entries_hint = 1024
apc.ttl = 0
apc.user_ttl = 0
apc.gc_ttl = 600
apc.cache_by_default = 1
apc.slam_defense = 0
apc.use_request_time = 1
apc.mmap_file_mask = /tmp/apc-accountname.XXXXXX
apc.file_update_protection = 2
apc.enable_cli = 0
apc.max_file_size = 2M
apc.stat = 1
apc.write_lock = 1
apc.report_autofilter = 0
apc.include_once_override = 0
apc.rfc1867 = 0
apc.rfc1867_prefix = "upload_"
apc.rfc1867_name = "APC_UPLOAD_PROGRESS"
apc.rfc1867_freq = 0
apc.localcache = 1
apc.localcache.size = 512
apc.coredump_unmap = 0
apc.stat_ctime = 0 
```

**更新**

它实际上不缓存任何包含或需要的文件。

# mysql - 为什么这个触发器会锁定？

> ID：10763624
> 
> 赞同：-1
> 
> 时间：2012-05-26T04:38:54.590
> 
> 标签：mysql, triggers, repeat

我正在使用下面显示的触发器自动为插入的行分配随机键，如果找到现有行，则重试随机生成。99.9% 的时间这完全符合预期。然而，每隔几周左右，触发器就会锁定，其中的`REPEAT`循环显然会变得无限；查询无限期地继续，有效地锁定了应用程序，并且必须被`KILL`编辑。

据我所见，所涉及的逻辑没有任何东西使这似乎应该发生。所涉及的密钥空间肯定不会耗尽，而且永远不会耗尽。到底是怎么回事？

触发：

```
DELIMITER //;
CREATE TRIGGER `mytable_insert` BEFORE INSERT ON `mytable`
FOR EACH ROW
BEGIN
    DECLARE `curr` BIGINT UNSIGNED;
    DECLARE `sel` BIGINT UNSIGNED;
    IF NEW.`mykey` IS NULL THEN
        REPEAT
            SELECT FLOOR(RAND() * 18446744073709551615) INTO `sel`;
            SELECT `id` INTO `curr` FROM `mytable` WHERE `mykey` = `sel` LIMIT 1;
        UNTIL `curr` IS NULL END REPEAT;
        SET NEW.`mykey` = `sel`;
    END IF;
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:13:23.200

错误是这一行

```
SELECT `id` INTO `curr` FROM `mytable` WHERE `mykey` = `sel` LIMIT 1; 
```

如果没有行匹配`mykey = sel`，则根本不分配 curr 。因此，如果 curr 曾经分配过其他任何东西，它就永远不会为空。

用这样的东西替换（未经测试）

```
DELIMITER //;
CREATE TRIGGER `mytable_insert` BEFORE INSERT ON `mytable`
FOR EACH ROW
BEGIN
    DECLARE `count` INT UNSIGNED;
    DECLARE `sel` BIGINT UNSIGNED;
    IF NEW.`mykey` IS NULL THEN
        REPEAT
            SELECT FLOOR(RAND() * 18446744073709551615) INTO `sel`;
            SELECT count(1) INTO `count` FROM `mytable` WHERE `mykey` = `sel`;
        UNTIL `count` = 0 END REPEAT;
        SET NEW.`mykey` = `sel`;
    END IF;
END 
```

# ios - iOS 应用中的 Git 支持

> ID：10763636
> 
> 赞同：2
> 
> 时间：2012-05-26T04:40:13.797
> 
> 标签：ios, git

我想构建一个包含一些基本 Git 功能的 iOS 应用程序。我基本上只需要拉、提交和推送功能。我是 iOS 开发的新手，所以我不知道有任何框架或库可以提供这些功能。我不确定 GitHub 是否有这些功能的 API，但这也足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T13:08:04.160

[让我用libgit2](http://libgit2.github.com)库和他们的[ObjectiveGit](https://github.com/libgit2/objective-git)包装器来回答这个老问题。

> **libgit2**是 Git 核心方法的可移植纯 C 实现，作为具有可靠 API 的可重入可链接库提供，允许您以支持 C 绑定的任何语言编写本机速度自定义 Git 应用程序。

**ObjectiveGit为****libgit2**库提供 Cocoa 绑定。甚至他们的许可证也允许您构建闭源软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:39:07.753

找到了一个使用 API 提交的[随机指南](http://swanson.github.com/blog/2011/07/23/digging-around-the-github-api-take-2.html)，不知道它有多准确/有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T04:56:19.113

GitHub API 可用，详细信息在这里：http: [//developer.github.com/](http://developer.github.com/)

# ipad - UISplitViewController推送多个详细视图iPad？

> ID：10763639
> 
> 赞同：0
> 
> 时间：2012-05-26T04:40:46.167
> 
> 标签：ipad, uisplitviewcontroller, detailview

我需要在 splitView 上的 detailViewController 上加载多个 viewController。就像是![在此处输入图像描述](../Images/f2177eb4383ae5b32b62ede4dbb2598f.png)

当警报打开时，我可以在detailView上推送相关的视图控制器。左侧视图是一个uitableview。

我的代码在 AppDelegate.m 上

```
#import "splitDetailViewController.h"
#import "splitTableViewController.h"

  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
  {
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

  splitTable=[[splitTableViewController alloc]initWithStyle:UITableViewStyleGrouped];
  UINavigationController *splitTableNav=[[UINavigationController alloc]initWithRootViewController:splitTable];

  splitDetails=[[splitDetailViewController alloc]initWithNibName:nil bundle:nil];
  UINavigationController *splitDetailNav=[[UINavigationController alloc]initWithRootViewController:splitDetails];

  self.splitViewController.delegate=splitDetails;

  splitViewController=[[UISplitViewController alloc]init];

  splitViewController.viewControllers=[NSArray arrayWithObjects:splitTableNav,splitDetailNav, nil];

  [self.window addSubview:splitViewController.view];
  self.window.backgroundColor = [UIColor whiteColor];
  [self.window makeKeyAndVisible];
  return YES;
  } 
```

抱歉，这是我第一次开发 iPad 应用程序，对如何使用 splitview 有点困惑。我将如何在详细视图上调用多个 viewController。对于 timer、alarm、share ，每个都有不同的视图控制器。

希望我能得到一些帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T01:56:36.853

我正在寻找类似问题的解决方案。在我的情况下，我希望 tableview 根据选择链接到多个详细视图。我可以将数据覆盖在一个视图控制器上，但正在寻求更好的解决方案。这就是我所做的。它比我迄今为止发现的一些复杂和过时的选项更简单，而且效果更好。

我只是在身份检查器中将情节提要 ID 提供给了我希望在详细视图（“第二个”）中显示的视图控制器，并且在 didSelectRowAtIndexPath 上我只是添加了：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    TimeDetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"second"];

    [[self.splitViewController.viewControllers objectAtIndex:1] pushViewController:detail animated:YES];
 } 
```

因此，当有人在主视图中按下单元格时，会推送详细视图。

一个简单的 if 语句可以切换显示哪个视图：

```
if ([[self.selfRootMenuArray objectAtIndex:indexPath.row] isEqual: @"Second Choice"]) {
    TimeDetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"second"];

    [[self.splitViewController.viewControllers objectAtIndex:1] pushViewController:detail animated:YES];
 } else if ([[self.selfRootMenuArray objectAtIndex:indexPath.row] isEqual: @"First Choice"]) {
     TimeDetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"first"];

     [[self.splitViewController.viewControllers objectAtIndex:1] pushViewController:detail animated:YES];
 }; 
```

您可以简单地使用按钮、开关或其他任何东西来代替表格视图，但关键是通过在“身份检查器”中添加“故事板 ID”

并通过引用“故事板 ID”简单地实例化视图控制器，然后将其推送到索引 1（详细信息侧）的拆分视图控制器，它简单快捷

```
TimeDetailViewController *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"second"];

[[self.splitViewController.viewControllers objectAtIndex:1] pushViewController:detail animated:YES]; 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T16:50:16.580

这是我的解决方案，希望对您有所帮助： [https ://github.com/selfdealloc/MultipleDetailViewsUsingStoryboards](https://github.com/selfdealloc/MultipleDetailViewsUsingStoryboards)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T06:43:49.703

好的，我自己找到了一种解决方案，效果很好

[http://kshitizghimire.com.np/uisplitviewcontroller-multipledetailviews-with-navigation-controller/](http://kshitizghimire.com.np/uisplitviewcontroller-multipledetailviews-with-navigation-controller/)

谢谢你

# c# - C# Windows 窗体应用程序透明按钮

> ID：10763640
> 
> 赞同：12
> 
> 时间：2012-05-26T04:41:17.780
> 
> 标签：c#, button

我是 C# 的新手。我想创建一个不可见的按钮，但它们在 C# windows 窗体应用程序中是可点击的。有办法吗？我尝试将 BackColor 设置为透明，但这并没有改变它是透明的事实

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-07-29T10:09:10.937

试试这个很简单。

单击要使其透明的按钮。`FlatStyle`从 Properties 中选择并将其设置为**popup** 现在将`BackColor`属性更改为`Transparent`。

这将使按钮透明。

但是，如果您想让它在`PictureBox`此方法上透明，则无法使用..

它仅适用于普通背景和背景图像。希望它有效....

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T23:45:31.763

```
buttonLink.FlatStyle = FlatStyle.Flat; 
buttonLink.BackColor = Color.Transparent;
buttonLink.FlatAppearance.MouseDownBackColor = Color.Transparent;
buttonLink.FlatAppearance.MouseOverBackColor = Color.Transparent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:48:28.170

## 参考：

原始文章和代码可以在以下位置找到：

## [当鼠标悬停在禁用的控件上时显示工具提示](http://www.codeproject.com/Articles/32083/Displaying-a-ToolTip-when-the-Mouse-Hovers-Over-a)

### @ CodeProject by [tetsushmz](http://www.codeproject.com/script/Membership/View.aspx?mid=4277306)

## 代码：

```
public class TransparentSheet : ContainerControl
{
    public TransparentSheet()
    {
        // Disable painting the background.
        this.SetStyle(ControlStyles.Opaque, true);
        this.UpdateStyles();

        // Make sure to set the AutoScaleMode property to None
        // so that the location and size property don't automatically change
        // when placed in a form that has different font than this.
        this.AutoScaleMode = AutoScaleMode.None;

        // Tab stop on a transparent sheet makes no sense.
        this.TabStop = false;
    }

    private const short WS_EX_TRANSPARENT = 0x20;

    protected override CreateParams CreateParams
    {
        [SecurityPermission(SecurityAction.LinkDemand, UnmanagedCode = true)]
        get
        {
            CreateParams l_cp;
            l_cp = base.CreateParams;
            l_cp.ExStyle = (l_cp.ExStyle | WS_EX_TRANSPARENT);
            return l_cp;
        }
    }
} 
```

## 解释：

您需要做的是使用给定的控件作为您禁用的*TextBox*（您在评论之一中提到的）的覆盖。订阅覆盖控件的*Click*事件，您可以单击禁用的控件。

我强烈建议不要使用这种方法，并认为它是一种 hack。你真的应该寻找一种替代方法，而不是必须使用一个禁用的控件和一个覆盖控件。

也许是一个不同的 UI 或者至少将它包装在一个*UserControl*中以隔离这个混乱的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-23T16:50:20.960

将按钮的背景属性设置为透明仍然会留下边框。如果您想要一个完全透明的按钮，请执行以下两项操作之一：

创建一个透明面板并为 Click 事件分配一个方法

或者最好

创建一个仅填充 BackColor（设置为透明）的自定义 UserControl，并将方法分配给 Click 事件。

```
public class Invisible_Button : UserControl
{
    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);
        this.Cursor = Cursors.Hand;
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        e.Graphics.FillRectangle(new SolidBrush(this.BackColor), 0, 0, this.Width, this.Height);
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-26T04:47:28.503

你试过了`button.Visible = false`吗？如果您只想隐藏它，这将完成这项工作。

# django - 这是 Django 中间件线程安全的吗？

> ID：10763641
> 
> 赞同：2
> 
> 时间：2012-05-26T04:41:20.080
> 
> 标签：django, python-2.6, django-1.4

我正在使用自定义 session/auth/users/acl 系统在 Django 上编写论坛应用程序。目标之一是允许用户浏览和使用我的应用程序，即使他们关闭了 cookie。来自 PHP 世界，问题的最佳解决方案是将 sid= 附加到页面上的每个链接。这是我打算如何做的：

会话中间件检查用户是否有会话 cookie 或记住我的 cookie。如果他这样做了，这很可能意味着 cookie 对他有用。如果他没有，我们生成新的会话 ID，打开新会话（在数据库的会话表中创建新条目），然后发送 cookie 并将用户重定向到他所在的位置，但 SID 附加到 url。重定向中间件后将查看是否可以从 cookie 或 GET 获取会话 ID。如果它的 cookie，我们停止将 sid 添加到 url。如果是 GET，我们会保留它们。

我计划通过使用我自己的附加 ?sid= 的函数装饰 django.core.urlresolvers.reverse 和 reverse_lazy 将 SID= 部分插入 url。然而，这引发了一些问题，因为这两个中间件 urlresolvers 都不是线程安全的。为了克服这个问题，我创建了这样的东西：

```
class SessionMiddleware(object):
    using_decorator = False
    original_reverse = None

    def process_request(self, request):        
        self.using_decorator = True
        self.original_reverse = urlresolvers.reverse
        urlresolvers.reverse = session_url_decorator(urlresolvers.reverse, 's87add8ash7d6asdgas7dasdfsadas')

    def process_response(self, request, response):
        # Turn off decorator if we are using it
        if self.using_decorator:
            urlresolvers.reverse = self.original_reverse
            self.using_decorator = False
        return response 
```

如果 SID 必须通过链接传递，则 process_request 将 using_decorator 设置为 true 并将未修饰的 urlresolvers.revers 存储在单独的方法中。页面呈现后 process_response 检查 using_decorator 以查看它是否必须执行“垃圾收集”。如果是，它会将反向函数返回到原始未修饰状态。

我的问题是，这种方法是线程安全的吗？或者我的论坛流量增加可能会导致中间件一次又一次地装饰这些功能，无法运行“垃圾收集”？我还坚持使用正则表达式来简单地浏览生成的链接的 HTML 响应，并提供模板过滤器和变量以手动将 SID 添加到正则表达式省略的位置。

哪种方法更好？当前的一个线程也安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:18:31.453

首先：在 URL 中使用 SID 是非常危险的，例如，如果您复制并粘贴一个以您身份登录的朋友的链接。由于大多数用户不知道 SID 是什么，他们会遇到这个问题。因此，您永远不应该在 url 中使用 SID，因为 Facebook 和朋友都需要 cookie，所以您也应该没问题...

考虑到这一点，幸运的是，monkeypatching urlresolvers.reverse 不起作用！使用自定义 URLResolvers 子类可能可行，但我建议不要这样做。

是的，您的中间件不是线程安全的。中间件只初始化一次并在线程之间共享，这意味着在 self 上存储任何东西**都不**是线程安全的。

# firefox-addon - 如何覆盖没有id的xul？

> ID：10763643
> 
> 赞同：2
> 
> 时间：2012-05-26T04:42:02.790
> 
> 标签：firefox-addon, xul

我正在编写一个 firefox 插件，并且正在尝试使用 xul 覆盖来插入画布元素。问题是，我要插入画布元素的父 xul 节点没有 id。如果没有id可以吗？我还尝试将 anonid 用于没有 id 的元素，如下所示，但也没有运气。

我的 xul 覆盖：

```
<?xml version="1.0"?>
<overlay id="myOverlay" 
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         xmlns:html="http://www.w3.org/1999/xhtml">

    <tabbrowser id="content">
        <tabbox anonid="tabbox">
            <tabpanels anonid="panelcontainer">
                <notificationbox>
                    <stack anonid="browserStack">
                        <html:canvas id="myCanvas" height="100%" />
                    </stack>
                </notificationbox>
            </tabpanels>
        </tabbox>
    </tabbrowser>

</overlay> 
```

我希望在每个选项卡中的每个浏览器元素之后插入画布元素，如下所示：http: [//img.photobucket.com/albums/v215/thegooddale/80eae9ee.jpg](http://img.photobucket.com/albums/v215/thegooddale/80eae9ee.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:24:53.140

尝试为此使用叠加层存在多个问题：

1.  没有 ID，叠加就无法工作，它们根本没有其他方法来寻址元素。
2.  覆盖不能应用于窗口加载时不存在的东西——它们是一次性的，不能考虑以后创建的动态元素。
3.  覆盖不能应用于匿名元素（在 DOM Inspector 中显示为红色）。这些元素由 XBL 绑定注入，不是 XUL 文档的一部分。

您将不得不使用 JavaScript 并每次“手动”注入您的画布。您可以使用该[`TabOpen`事件](https://developer.mozilla.org/en/Code_snippets/Tabbed_browser#Notification_when_a_tab_is_added_or_removed)在打开选项卡时获得通知。像这样的东西应该可以工作（未经测试的代码）：

```
// Always wait for the window to initialize first
window.addEventListener("load", function()
{
  function initTab(tab)
  {
    var browser = window.gBrowser.getBrowserForTab(tab);
    var canvas = document.createElementNS("http://www.w3.org/1999/xhtml",
                                          "canvas");
    canvas.setAttribute("anonid", "myCanvas");
    canvas.setAttribute("height", "100%");
    browser.parentNode.appendChild(canvas);
  }

  // Init all existing tabs first
  var tabs = window.gBrowser.tabs;
  for (var i = 0; i < tabs.length; i++)
    initTab(tabs[i]);

  // Listen to TabOpen to init any new tabs opened
  window.gBrowser.tabContainer.addEventListener("TabOpen", function(event)
  {
    initTab(event.target);
  }, false);
}, false) 
```

请注意，此代码设置`anonid`属性而不是`id`- ID 应该是唯一的，您不应将相同的 ID 分配给十几个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:04:10.060

如果没有 id，这将无法工作。您可以在 XUL 文档中插入一段 Javascript，用于`document.querySelector`查找`tabpanels`XBL 绑定内部，然后将动态创建的附加`canvas`到 id。

但是，由于`notificationbox`每次打开新选项卡时都会创建一个新选项卡，因此您应该让 JavaScript 监视新选项卡并相应地插入画布。

# java - 通过在java中保持行跟踪来读取文件

> ID：10763646
> 
> 赞同：2
> 
> 时间：2012-05-26T04:42:48.063
> 
> 标签：java, jsp, servlets

我有 servlet 以某个间隔读取我的 jsp 调用 servlet 的日志文件。我想在我的 servlet 中添加功能，以便它从上次读取的最后一行旁边的行读取文件。

我有以下代码，但它不工作

```
File file = new File("D:\\graph\\temp.log");
FileReader fr = new FileReader(file);
LineNumberReader lnr = new LineNumberReader(fr);\

lnr.setLineNumber(count)  // count is the variable keeping track of number of line  
                             previously read. 
```

是否需要一些额外的代码？还是有其他替代方法可以做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:54:10.953

从[文档中](http://docs.oracle.com/javase/6/docs/api/java/io/LineNumberReader.html)：

> 但是请注意， setLineNumber(int) 实际上并没有改变流中的当前位置；它只会更改 getLineNumber() 将返回的值。

在我看来，您必须从头开始并循环调用 readLine，直到 getLineNumber() 大于计数。

像这样的东西：

```
File file = new File("D:\\graph\\temp.log");
FileReader fr = new FileReader(file);
LineNumberReader lineReader = new LineNumberReader(fr);

// skip the lines you don't need 

while (lineReader.getLineNumber() < count) {
    lineReader.readLine();
}

// begin processing input here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:10:03.523

你看过*RandomAccessFile*吗？如果您保持读取的字节数。比followin代码会帮助你。

```
 RandomAccessFile raf = new RandomAccessFile(fileName,"r");
    byte[] cBuf = new byte[1024];
    long count = offset;
    raf.seek(offset);
    long lineCOunt=0l;
    while(true){
        int lineCOunt  =raf.read(cBuf);
        count +=lineCOunt;
        if(lineCOunt<1024){
            System.out.println((new String(cBuf)).substring(0,i));
            break;
        }
        System.out.println(new String(cBuf)); 
```

# java - 如何在android的java文件中设置新添加的radioButton的Id？

> ID：10763649
> 
> 赞同：0
> 
> 时间：2012-05-26T04:45:20.967
> 
> 标签：java, android, for-loop, radio-button

我正在使用 for 循环在我的视图中添加 RadioButtons，现在我想为每个 RadioButton 设置一个唯一的 ID。

```
for (int item = 0; item < 5; item++) {
    child = new RadioButton(this);
    itemRadioGroup.addView(child);
    child.setId(item);
}

Toast.makeText(getApplicationContext(), 
        String.valueOf(child.getID()), Toast.LENGTH_SHORT).show(); 
```

我想将第一个按钮的 ID 设置为 1，第二个按钮的 ID 设置为 2，第三个按钮的 ID 设置为 3，依此类推。但是，当我尝试使用 Toast 消息显示 ID 时，它会显示一些垃圾值而不是我设置的 ID。如何正确设置 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:53:58.567

我认为这是因为 0 不是整数，而您将按钮的 id 设为 0。其中 id 只能是正整数。

```
 RadioButton child[]=new RadioButton[5];
  for (int item = 1; item <= 5; item++) {
 child[i]= new RadioButton(this);
 itemRadioGroup.addView(child[i]);
 child[i].setId(item);
 Toast.makeText(getApplicationContext(),child.getID()+ " ", Toast.LENGTH_SHORT).show();
 }
//gets the checked radiobuttons ids

for (int item = 1; item <= 5; item++) {
if(child[i].isChecked()){

 Toast.makeText(getApplicationContext(),child[i].getID()+ " ", Toast.LENGTH_SHORT).show();

 }
} 
```

# arrays - AS3 中数组的按钮和字符串不兼容

> ID：10763654
> 
> 赞同：0
> 
> 时间：2012-05-26T04:46:09.360
> 
> 标签：arrays, string, actionscript-3, button

所以我有一个物品清单，数组有物品的实例名称，它们是电影剪辑。我想让它使所有项目的按钮模式变为真。

一切正常，直到 i.buttonMode = true。我得到这个：1119：通过静态类型 String 的引用访问可能未定义的属性 buttonMode。但是，如果我使用实例名称，则 Inv_1.buttonMode = true 之类的名称有效。

所以我猜主要的问题是，你如何遍历一个数组并将每个实例名称变成按钮？

（我也尝试过 getChildByName.(i).buttonMode = true;）但没有奏效。:S

```
package  {
import flash.display.*;
import flash.events.*;

public dynamic class Drag extends MovieClip {
    var Inventory:Array =  ["Inv_1", "Inv_2", "Inv_3", "Inv_4t", "Inv_5"]; 

    public function Drag():void {
        for (var i:String in Inventory){ 
            i.buttonMode = true;
            }
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T04:50:11.933

您的`Inventory`数组是字符串的集合，而不是 MovieClips。

如果这些是子显示对象的实例名称，则`getChildByName`作为函数实现，而不是点表示法。

另请注意`getChildByName`返回`DisplayObject`，它没有定义`buttonMode`。将对象转换为`MovieClip`适当的类型。

```
package  {
import flash.display.*;
import flash.events.*;

public dynamic class Drag extends MovieClip {
    var Inventory:Array =  ["Inv_1", "Inv_2", "Inv_3", "Inv_4t", "Inv_5"]; 

    public function Drag():void {
        for (var i:String in Inventory) {
            MovieClip(getChildByName(i)).buttonMode = true;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:54:31.437

您创建了一个字符串数组，而不是影片剪辑实例。

声明您的实例名称并将它们添加到向量中：

```
package
{
    import flash.display.*;
    import flash.events.*;

    public dynamic class Drag extends MovieClip
    {
        private var Inv_1:MovieClip;
        private var Inv_2:MovieClip;
        private var Inv_3:MovieClip;
        private var Inv_4:MovieClip;
        private var Inv_5:MovieClip;

        public function Drag():void
        {
            var Inventory:Vector.<MovieClip> = new <MovieClip>[Inv_1, Inv_2, Inv_3, Inv_4t, Inv_5]; 

            for (var i:MovieClip in Inventory)
            { 
                i.buttonMode = true;
            }
        }
    }
} 
```

# ios - 多个 NSManagedObjectContext 是否可以共享相同的 NSManagedObjectModel？和相同的 NSPersistentStoreCoordinator 实例

> ID：10763655
> 
> 赞同：0
> 
> 时间：2012-05-26T04:46:20.613
> 
> 标签：ios, nsmanagedobject

或者换句话说，是否建议为不同的上下文设置单独的堆栈（上下文、模型、协调器）？将它们分开的利弊是什么，不同的上下文共享相同的模型和协调器的利弊是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:23:57.313

是的，多个上下文共享相同的协调器、模型等是完全可以接受的。这是一种非常常见的使用模式。

既然你没有说为什么你认为它可能不是，或者你遇到了什么问题（如果有的话），我就把它留在那里。

# iphone - 为什么不继承 UIApplication？为什么要使用委托？

> ID：10763658
> 
> 赞同：5
> 
> 时间：2012-05-26T04:47:09.220
> 
> 标签：iphone, ios, delegates, uikit, uiapplicationdelegate

与其使用应用程序委托以便`UIApplication`单例可以在预定义的时间调用委托方法，那么仅子类化的优点和缺点是`UIApplication`什么？（**更新：**为什么 iOS 架构使用应用程序委托，而不是让人们通过子类化`UIApplication`和覆盖其各种方法来编写应用程序？）

那是因为当我们创建一个新`UIView`控件时，我们是子类`UIView`（**更新：**或者我们`UIViewController`也是子类）。那么为什么对于应用程序的情况，我们不子类化`UIApplication`而是使用委托呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T05:12:42.093

同样，从文档中：

> ***子类化注释***
> 
> 您可能决定继承 UIApplication 以覆盖 sendEvent: 或 sendAction:to:from:forEvent: 以实现自定义事件和动作调度。然而，很少有必要扩展这个类；应用程序委托（UIApplicationDelegate 在大多数情况下就足够了。如果您将 UIApplication 子类化，请非常确定您要通过子类完成什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T05:05:52.830

开发人员通常不这样做的原因是因为没有必要。UIApplication 在大多数情况下都可以正常工作。它只需要一些关于在某些预定义情况下做什么的提示（这就是它有一个委托的原因）。另一方面，UIView 非常通用，我认为它从来没有按原样使用过。它可能是整个 iOS 世界中自定义程度最高的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T13:35:54.717

委托是一种核心设计模式。它允许在程序的各个部分之间分离职责。这个想法是，例如，绘制到屏幕上的程序部分可能不应该与您的数据库对话。有几个原因：

性能：如果绘制到屏幕的同一个对象访问您的数据存储，您将遇到性能问题。时期。句号。

代码维护：更容易概念化适当模块化的代码。（对我来说，无论如何）

灵活性：如果您在代码中进行子类化，那就太好了——直到您开始遇到具有各种不良行为的单体类。您将达到必须重载行为以关闭事物的地步，并且您的属性命名空间可能会被污染。尝试类别、委派和块以寻找替代方案。

也就是说，我确实遇到了适合子类化的情况。我有一个自助服务终端应用程序，如果一段时间内没有与之交互，我想在其中自动关闭某个设置菜单。为此，我必须能够访问整个应用程序中的触摸事件。我继承`UIApplication`并覆盖了`sendEvent:`. 那是合适的，尽管这是一个边缘案例。正如所罗门王在传道书中所说的那样，意译：太阳底下的一切都有时间和地点。

为了更容易编写、阅读、迭代和维护您的程序，强烈建议您遵循某些做法。欢迎您对许多类进行子类化，Apple 不会因为您的应用程序代码不佳而拒绝您的应用程序，只要它按照宣传的方式运行即可。也就是说，如果你不遵守经过实践检验的具体做法，你就是在自掘坟墓。子类化本质上并不坏，但类别、协议和块是如此迷人，我还是更喜欢它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T05:00:07.310

从[UIApplication 类参考：](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

> UIApplication 类为在 iOS 上运行的应用程序提供了一个集中的控制点和协调点。
> 
> 每个应用程序都必须只有一个 UIApplication 实例（或 UIApplication 的子类）。启动应用程序时，调用 UIApplicationMain 函数；在它的其他任务中，这个函数创建了一个单例 UIApplication 对象。此后，您可以通过调用 sharedApplication 类方法来访问此对象。

那么你所说的“为什么我们不继承 UIApplication 是什么意思？Apple 甚至提供了关于在子类中实现什么的注释。

至于您关于仅在标准类上使用委托和单例的问题，答案很简单：应用程序必须提供一种通用的方式来接收和分派事件（外部和系统相关）、处理多任务以及与系统松散地接口（即为什么 main.m 包含对您的应用程序委托的引用）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T05:10:42.780

UIView 子类可能需要做许多专门的事情。想想 UIScrollView、UIImageView、UIWebView 等，它们的内部工作方式必须有多么大的不同。但是，它们仍然必须参与视图层次结构，因此子类化是有意义的。

另一方面，UIApplication 是应用程序范围的事件、通知、打开 URL、访问窗口和其他通用事物的中心枢纽。在正常情况下，应用程序应该只需要知道[UIApplicationDelegate 协议](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIApplicationDelegate)将提供的东西。

[UIApplication 概述](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)中的注释解释了您可能继承 UIApplication 的一个原因：

> 您可能决定继承 UIApplication 以覆盖 sendEvent: 或 sendAction:to:from:forEvent: 以实现自定义事件和动作调度。然而，很少有必要扩展这个类；应用程序委托（UIApplicationDelegate 在大多数情况下就足够了。如果您将 UIApplication 子类化，请非常确定您要通过子类完成什么。

但这应该只在非常特殊的情况下才有必要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-27T12:52:25.907

我将添加一些其他人没有提到的内容：当通过委托方法实现而不是具有重写方法的子类来覆盖/增强/添加行为时，委托消除了调用 super 的需要。我见过许多开发人员回答他们自己的 Stackoverflow 问题时只是忘记了调用 super（在有些人甚至发布了可能的答案之后）。较新的方法装饰器`NS_REQUIRES_SUPER`通过向开发人员发出警告（希望他们不要忽略它！）对此有所帮助，但是当调用 super 的顺序很重要时，它并没有帮助。我认为 Apple 决定让开发人员实现一个委托对象不太容易出错，它没有调用超级要求，他们甚至还做了将 UIResponder 方法从 UIApplication 转发到委托对象的艰苦工作。

# iphone - 在 uitableview 中禁用反弹也会禁用 iOS 5 上的滚动，但不会禁用 iOS4

> ID：10763660
> 
> 赞同：6
> 
> 时间：2012-05-26T04:47:26.647
> 
> 标签：iphone, objective-c, ipad, uitableview, uiscrollview

我在导航控制器中有一个带有表格视图的应用程序；我想禁用弹跳，这样当我的表处于编辑模式时，用户可以向下滚动并找到要删除的行；否则，它会反弹，并且不会让他们有机会按下行旁边的删除图标。

所以我这样做了：

`self.tableView.bounces=NO;`

当我在 iOS 4 上运行我的应用程序时，这就像一个魅力。用户可以滚动并且表格不会反弹。

但在 iOS 5 上，滚动也根本不适用于表格。没有滚动。所以为了安全起见，我这样做了：

```
 self.tableView.bounces=NO;
    self.tableView.scrollEnabled=YES; 
```

但这并没有什么不同。

我以编程方式创建我的表格视图及其导航控制器；其他一切都很好。知道为什么禁用反弹也会阻止在 iOS 5 上滚动吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:18:54.227

我在这里找到了解决方案：

[编辑视图框架和原点后 UITableView 不会滚动](https://stackoverflow.com/questions/1842560/uitableview-wont-scroll-after-editing-view-frame-and-origin)

如果您手动设置 tableview 的来源，在 iOS 5 上它会禁用滚动。在 iOS 4 上不是。真可惜。

# c# - C#中的[某物]是什么意思

> ID：10763673
> 
> 赞同：2
> 
> 时间：2012-05-26T04:51:51.637
> 
> 标签：c#

我已经看到，在某些情况下，我们在 c# 中使用以下语法格式，

```
[something]
void methodM(){

} 
```

例子 ：

```
[MethodImpl(MethodImplOptions.Synchronized)]
public void SomeMethod() {/* code */}

[WebMethod]
public void MyWebMethod(){/* code */} 
```

这在编译时如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:00:05.350

## 解释

这些是*属性*或*注释*。它们是放置它们的成员的一种元数据。

例如，使用[*MethodImpl*](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimplattribute.aspx)属性，您可以指定如何实现方法的详细信息。并且使用[*WebMethod*](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute.aspx)属性，您将该方法标记为 Web 服务方法。

## 进一步阅读：

# [属性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/z0w1kczw%28v=VS.80%29.aspx)

# [C# 中的属性](http://www.codeproject.com/Articles/2933/Attributes-in-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:57:59.173

`[something]`是一个属性。属性存储在程序集的元数据中，可以通过反射读取。库和框架经常使用它来控制行为。一些属性，如[`ObsoleteAttribute`](http://msdn.microsoft.com/en-us/library/system.obsoleteattribute.aspx)控制编译时行为，但大多数会影响运行时行为。您可以通过继承来创建自己的属性[`Attribute`](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T05:01:45.473

这些是**属性**[something]，它们是描述性标签，可用于提供有关类型（类）、成员和属性的附加信息。**.NET**可以使用**属性**来决定在应用程序运行时如何处理对象。

# ios - CLLocation 区域监控已启动，但没有在 iPhone 上调用 didExitRegion

> ID：10763675
> 
> 赞同：1
> 
> 时间：2012-05-26T04:52:00.170
> 
> 标签：ios, cllocationmanager

我允许用户设置一个位置，然后创建一个区域并监控用户是否退出或进入了该区域。我还不断监控用户与所选位置的距离。区域监控被调用，距离被正确更新，但从不调用进入和退出。这表明我要去 30 米，但我走得更远，结果相同。

```
-(void)setPlugLocation:(CLLocation *)plugLocation{
if (!_plugLocation) {
    _plugLocation=plugLocation;
    if(!regionManager) regionManager = [[CLLocationManager alloc] init];
    [regionManager setDelegate:self];

    CLLocationCoordinate2D plug2D;
    plug2D.latitude=plugLocation.coordinate.latitude;
    plug2D.longitude=plugLocation.coordinate.longitude;
    CLRegion *plugHome = [[CLRegion alloc] 
                            initCircularRegionWithCenter:plug2D 
                            radius:20 
                            identifier:@"Your Plug"];
    [regionManager startMonitoringForRegion:plugHome desiredAccuracy:kCLLocationAccuracyBest];
}
}

debug output:
2012-05-25 21:28:29.921 TestLocation[4412:707]  locationManager didUpdateToLocation
2012-05-25 21:28:29.929 TestLocation[4412:707] Distance from plug=0.000000
2012-05-25 21:28:30.700 TestLocation[4412:707]  locationManager didUpdateToLocation
2012-05-25 21:28:30.704 TestLocation[4412:707] Distance from plug=9.897339
2012-05-25 21:28:33.106 TestLocation[4412:707] Distance from plug=15.923317
2012-05-25 21:28:34.783 TestLocation[4412:707] region monitoring started
(identifier Your Plug) <+47.61713686,-122.28694184> radius 20.00m
2012-05-25 21:28:34.784 TestLocation[4412:707] region monitoring started
(identifier Your Plug) <+47.61713686,-122.28694184> radius 20.00m
2012-05-25 21:28:34.788 TestLocation[4412:707] Distance from plug=19.705339
2012-05-25 21:28:56.894 TestLocation[4412:707] Distance from plug=12.808387
2012-05-25 21:28:57.894 TestLocation[4412:707] Distance from plug=12.808387
2012-05-25 21:29:05.893 TestLocation[4412:707] Distance from plug=12.808387
2012-05-25 21:29:19.890 TestLocation[4412:707] Distance from plug=12.808387
2012-05-25 21:30:02.892 TestLocation[4412:707] Distance from plug=14.614380
2012-05-25 21:30:32.893 TestLocation[4412:707] Distance from plug=14.614380
2012-05-25 21:30:52.891 TestLocation[4412:707] Distance from plug=15.352976
2012-05-25 21:32:41.898 TestLocation[4412:707] Distance from plug=7.644082
2012-05-25 21:32:43.891 TestLocation[4412:707] Distance from plug=12.354503
2012-05-25 21:32:49.068 TestLocation[4412:707] Distance from plug=15.757565
2012-05-25 21:32:52.984 TestLocation[4412:707] Distance from plug=21.126129
2012-05-25 21:32:56.880 TestLocation[4412:707] Distance from plug=26.952410
2012-05-25 21:33:04.925 TestLocation[4412:707] Distance from plug=31.824801 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:44:00.553

您是否实施了正确的区域监控回调方法？

```
-didEnterRegion
-didExitRegion 
```

关于区域监控的一些信息。它并不像你想象的那么精确。将添加一个最小区域大小。最小大小为 100M。因此，您在 100M 以下添加的任何内容都会增加到 100M。

看起来您正在输出中获取位置更新，所以我猜您只需要实现 CLLocationManagerDelegate 方法来处理区域监控。您还可以监控以确保正确添加区域。那里可能是一个错误，导致没有回调。

```
-monitoringDidFailForRegion 
```

希望这可以帮助。

# compiler-construction - 让 Arduino IDE 将编译器警告设置为错误

> ID：10763676
> 
> 赞同：0
> 
> 时间：2012-05-26T04:52:06.777
> 
> 标签：compiler-construction, arduino, options

有没有办法将编译器警告设置为 Arduino IDE 中的错误？
或者任何通用的方式来设置 GCC 编译器选项？

我查看了*~/.arduino/preferences.txt*文件，但没有发现任何表明微调控制的信息。我还查看了是否可以通过环境变量设置 GCC 选项，但我没有找到任何东西。

我不想让冗长的编译器输出（您可以使用 IDE 指定）过多地分散非必要信息的注意力，而且我不想浪费时间阅读它。

我希望编译在出现警告时停止，因此可以清理代码。我的偏好是能够设置选项，但是对于小代码大小的项目来说`-Werror=`，泛型将是可行的。`-Werror``.ino`

附录：

根据所选答案中的建议，我实现了一个`avr-g++`脚本并将其放在 normal 之前的路径中`avr-g++`。为此，我将 Arduino 命令更改如下：

```
-export PATH="${APPDIR}/java/bin:${PATH}"
+export ORGPATH="${APPDIR}/java/bin:${PATH}"
+export PATH="${APPDIR}/extra:${ORGPATH}" 
```

`extra`在 APPSDIR（Arduino 命令所在的位置）的新目录中，我有`avr-g++`一个 Python 脚本：

```
#!/usr/bin/env python

import os
import sys
import subprocess

werr = '-Werror'
wall = '-Wall'

cmd = ['avr-g++'] + sys.argv[1:]
os.environ['PATH'] = os.environ['ORGPATH']
fname = sys.argv[-2][:]
if cmd[-2].startswith('/tmp'):
    #print fname, list(fname) # this looks strange
    for i, c in enumerate(cmd):
        if c == '-w':
            cmd[i] = wall
            break
    cmd.insert(1, werr)
subprocess.call(cmd) 
```

因此，您将第一个命令替换为原始编译器名称并重置用于不包含该`extra`目录的环境。

`fname`其实很奇怪。如果你打印它，它只是`abc.cpp`，但它的长度要大得多，而且它实际上以 开头`/tmp`。所以我检查它以决定是否添加/更新编译选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T06:04:10.967

看起来你在 Linux 上。Arduino 是一个脚本，因此您可以在脚本中设置 PATH 以将开头的目录包含到包含程序的目录*avr-g++*。那么Java的东西应该从那里获取编译器，不是吗？

然后该程序使用额外的选项调用普通的*/usr/bin/avr-g++ 。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:15:49.723

你有一个选择是从命令行编译你的草图。看看这个[makefile](http://www.arduino.cc/playground/uploads/Learning/Makefile)。

# jquery - 从 jquery 运行 php 脚本

> ID：10763677
> 
> 赞同：0
> 
> 时间：2012-05-26T04:52:20.107
> 
> 标签：jquery, mysql, database, pagination

我有一个非常奇怪的问题......不知道是否有可能，但是虽然我知道如何通过旧的获取网址和刷新页面来做到这一点，但我想尝试使用 jquery 调用文件并发布的新方法或通过 jquery 但不使用表单“获取”数据。

我将使用一个`<a>`链接，如果您访问我的网站[http://www.jonathansconstruction.com/gallery.php](http://www.jonathansconstruction.com/gallery.php)，您会看到第二个画廊菜单，其中显示查看全部，这将过滤要查看的类别并希望显示它在现在显示的 div 中，我曾经使用的每个类别一个 div

```
<a href = "file.php?catfilter=category">aaa</a> 
```

并且在 php 端使用 a `$_GET[];`，所以我想知道一种不同的方式来传递值来设置类别过滤器，并且能够使用 jquery 菜单“当前”。顺便说一句，菜单也会根据数据库中的类别数量动态生成。

还希望添加“twitter/fb”样式的分页（在向下滚动或用户单击时加载更多数据显示更多），但也希望按从数据库中获取的类别对 div 进行分组。这就是整个想法，我确实知道如何设置输出并做很多 php 方面将项目组合在一起，但是，我不太确定新的分页样式（用于使用带有页面的分页来单击下一个）以及如何在没有表单且不刷新的情况下运行/发布数据到 php。

希望这足够清楚，如果不让我知道的话。任何有关如何做到这一点的帮助/想法表示赞赏。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:11:38.490

要在不刷新页面的情况下动态加载数据，您可以使用**Jquery $ajax()**方法。链接在这里

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)帮你详细了解

您还可以将参数传递给您要执行的 url/页面，无论您的 php 文件的结果是什么，您都可以将其设置为您想要的任何位置

例如：

```
$.ajax({
  type: "POST",
  url: "file.php",
  data: { catfilter : "category" }
}).done(function( msg ) {
  $("#container").html(msg)
}); 
```

文件.php

```
<?php
if(isset($_POST['catfilter']))
{
   //your code here
   echo "your code here";
}
?> 
```

调用上面的 jquery ajax 方法会将 file.php 的输出设置为 id='container' 的 html 元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:31:22.710

无需刷新页面即可加载您可以使用的数据`jQuery.Ajax`

```
 $.ajax(     
{   
    type: "POST"    
    url:page,
    data: {......}
    beforeSend: function(xhr) {
        $('#load').empty().html('Loading... ');
    },
    success: function(data) {
        $('#load').empty().html(data);
    },
    dataType: "html"    
}); 
```

结果将显示在`div` `load`并从`url:page`

# vb.net - 按钮背景图像不会在 VB.Net 中缩小

> ID：10763679
> 
> 赞同：0
> 
> 时间：2012-05-26T04:52:52.857
> 
> 标签：vb.net, image, stretch

我在 VB.Net 表单应用程序中使用了以下代码：

```
 Dim btnShowHideSize As New Size(30, 30)
    btnShowHide.Size = btnShowHideSize
    Dim img As New Bitmap(Resources.change2)
    Dim img2 As New Bitmap(img, btnShowHideSize)
    btnShowHide.BackgroundImage = img2
    btnShowHide.BackgroundImageLayout = ImageLayout.Stretch 
```

图像会扩大，但不会缩小。当我单步执行时，我看到 img 大小为 80,80，img2 大小为 30,30。但是，图像并没有缩小 - 它正在被切断。如果我超过 80,80，例如 200,200，图像会扩大。

缩小图像是不可能的吗？

# sql - 在 SQL Server 2008 中对 nvarchar 进行排序

> ID：10763680
> 
> 赞同：0
> 
> 时间：2012-05-26T04:52:59.030
> 
> 标签：sql, sql-server, tsql

我在 SQL Server 中有一个包含此数据的表：

```
Id
=====
1
12e
5 
```

我想像这样订购这些数据：

```
id
====
1
5
12e 
```

我的`id`列是类型`nvarchar(50)`，我无法将其转换为`int`.

我可以以这种方式对数据进行排序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T04:57:27.140

作为一般规则，如果您*发现*自己操作了部分列，那么您几乎肯定做错了。

如果您的 ID 由数字和字母组成，并且您只需要摆弄数字位，请将其设置为两列并省去一些焦虑。在这种情况下，您有一个积分`id_numeric`和一个 varchar `id_alpha`，您的查询很简单：

```
select   char(id_numeric) | id_alpha as id
from     mytable
order by id_numeric asc 
```

或者，如果您确实*必须*将其存储为单个列，请创建额外的列来保存各个部分并将其用于排序和选择。但是，为了缓解连续重复数据的问题，请使用触发器来确保数据保持一致：

```
select   id
from     mytable
order by id_numeric asc 
```

您通常*不*希望对每个选择都进行这种拆分，因为这永远不会很好地扩展。通过将其作为更新/插入触发器进行，您仅在需要时（即，当数据更改时）进行拆分，并且此成本在所有选择中分摊。这是一个好主意，因为在绝大多数情况下，数据库的读取频率远高于写入频率。

*如果*您了解并减轻后果，出于性能原因恢复到较低级别的规范化是完全正常的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T04:58:31.383

我实际上会使用与[此功能](http://blog.sqlauthority.com/2007/05/13/sql-server-udf-function-to-parse-alphanumeric-characters-from-string/)类似的东西，但要注意它不会超快。我已修改该函数以仅返回数字：

```
CREATE FUNCTION dbo.UDF_ParseNumericChars
(
  @string VARCHAR(8000)
)
RETURNS VARCHAR(8000)
WITH SCHEMABINDING
AS
BEGIN
  DECLARE @IncorrectCharLoc SMALLINT
  SET @IncorrectCharLoc = PATINDEX('%[^0-9]%', @string)
  WHILE @IncorrectCharLoc > 0
  BEGIN
    SET @string = STUFF(@string, @IncorrectCharLoc, 1, '')
    SET @IncorrectCharLoc = PATINDEX('%[^0-9]%', @string)
  END
  SET @string = @string
  RETURN @string
END
GO 
```

创建该函数后，您可以像这样进行排序：

```
 SELECT YourMixedColumn
    FROM YourTable
ORDER BY CONVERT(INT, dbo.UDF_ParseNumericChars(YourMixedColumn)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T05:18:11.697

可以用 Len 函数排序

```
 create table #temp (id nvarchar(50) null)
 select * from #temp order by LEN(id) 
```

# applescript - 使用 AppleScript 移动文件和文件夹

> ID：10763688
> 
> 赞同：0
> 
> 时间：2012-05-26T04:54:17.267
> 
> 标签：applescript

我正在编写一个脚本，该脚本将在我挂载我的 bak 驱动器时将文件夹的全部内容（包括所有子文件夹和其中的文件）移动到另一个文件夹。

只是为了测试，我写了一个简单的脚本来检查我如何做到这一点（我真的不知道 AppleScript，所以我边走边学），我在我的 applescript 中使用了以下 cmd：

```
move every file of entire contents of folder "Lion:Users:dbooster:desktop:outbox" to "Lion:Users:booster:desktop:file" 
```

因此，如您所见，我的测试是将桌面上名为“发件箱”的文件夹中的所有内容移动到桌面上名为“文件”的文件夹中。

起初我认为它工作得很好，但后来我尝试在“发件箱”中放置另一个文件夹。我发现这个脚本会移动“发件箱”中该子文件夹中的所有文件，但它不会移动子文件夹本身。

也就是说，如果我用 outbox/stuff/file1.txt 测试并运行脚本，结果是 file/file1.txt，而不是我所期望的 file/stuff/file1.txt。

嗯...这似乎应该比我发现它更容易。但是我在过去的一个小时里一直在搜索谷歌并且无法提出任何东西（也许我正在寻找错误的东西？）任何帮助将不胜感激 - 在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:06:06.700

尝试：

```
tell application "Finder" to move entire contents of folder "Lion:Users:dbooster:desktop:outbox" to folder "Lion:Users:booster:desktop:file" 
```

# python - 如何使用 xlrd 将新列和行添加到 .xls 文件

> ID：10763690
> 
> 赞同：2
> 
> 时间：2012-05-26T04:55:29.620
> 
> 标签：python, excel, xlrd

**如何在 xlrd 的工作表中添加新列和/或行？**

我有一个使用 open_workbook() 读取的 .xls 文件，我需要在第一张表中添加一个新列（“bouncebacks”），然后在该表中添加新行，但我在 xlrd 文档中找不到任何显示如何添加新的行和/或列？

*如果我无法在 xlrd 中添加行/列，是否有另一种方式/库允许我向 .xls 文件添加行或列？*

**你能告诉我如何在工作表中添加行和列吗？**

```
import xlrd

book = xlrd.open_workbook("abc.xls")
sheet = book.sheet_by_index(0)

# how do I add a new column("bouncebacks") to the sheet?
# how do I add a new row to the sheet? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:49:01.447

`xlrd`读取`xls`文件。`xlwt`创建新`xls`文件。你需要`xlutils`. 读[这个](http://www.python-excel.org/)。完成您会发现那里提到的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T05:17:24.493

xlrd 用于读取 .xls 文件。写它使用[xlwt](http://pypi.python.org/pypi/xlwt)。

# apache2 - MediaWiki 1.19.0 样式和皮肤未显示

> ID：10763691
> 
> 赞同：1
> 
> 时间：2012-05-26T04:55:44.633
> 
> 标签：apache2, mediawiki

正如我的问题标题所述，我的 MediaWiki 1.19.0 有问题。我正在运行 apache2，并且我有一些运行良好的站点。我下载并安装了 MediaWiki 1.19.0，到目前为止它运行良好。但是，如果我尝试从另一台计算机或 Internet 上查看我的 wiki 页面，则样式和皮肤不会显示。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:10:57.583

您需要自己使用[Firebug](http://getfirebug.com/)并找出哪些样式/脚本 HTTP 请求失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T14:52:55.283

我遇到了同样的问题。未在 conf.d/mediawiki119.conf 文件中创建 load.php 条目。它也没有创建从 /var/www/mediawiki119/load.php 到 /user/share/mediawiki119/load.php 的符号链接。

一旦你解决了这两件事，它就会起作用。

load.php 是一个加载皮肤的新功能，这可能是他们在某些配置文件中忘记它的原因。

# c++ - 这个 C++ 代码会泄漏内存吗？

> ID：10763694
> 
> 赞同：19
> 
> 时间：2012-05-26T04:56:29.970
> 
> 标签：c++, memory-leaks, assignment-operator

```
struct Foo
{
    Foo(int i)
    {
        ptr = new int(i);
    }
    ~Foo()
    {
        delete ptr;
    }
    int* ptr;
};

int main()
{
    {
        Foo a(8);
        Foo b(7);
        a = b;
    }
    //Do other stuff
} 
```

如果我理解正确，编译器会自动为`Foo`. 但是，这只是取`ptr`in的值`b`并将其放入`a`。最初分配的内存`a`似乎丢失了。我可以`a.~Foo();`在分配之前打个电话，但我听说你应该很少需要显式调用析构函数。因此，假设我编写了一个赋值运算符，用于在将 r 值分配给 l 值之前`Foo`删除`int`左操作数的指针。像这样：

```
Foo& operator=(const Foo& other) 
{
    //To handle self-assignment:
    if (this != &other) {
        delete this->ptr;
        this->ptr = other.ptr;
    }
    return *this;
} 
```

但是如果我这样做，那么当`Foo a`和`Foo b`超出范围时，它们的析构函数不会运行，两次删除相同的指针（因为它们现在都指向同一个东西）？

**编辑：**

如果我正确理解 Anders K，这是正确的方法：

```
Foo& operator=(const Foo& other) 
{
    //To handle self-assignment:
    if (this != &other) {
        delete this->ptr;
        //Clones the int
        this->ptr = new int(*other.ptr);
    }
    return *this;
} 
```

现在，`a`克隆指向的`int`那个，并设置它自己的指针。`b`也许在这种情况下，`delete`and`new`不是必需的，因为它只涉及`int`s，但如果数据成员不是 an`int*`而是 a`Bar*`或诸如此类，则可能需要重新分配。

**编辑 2：** 最好的解决方案似乎是[copy-and-swap idiom](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T05:01:50.367

这是否泄漏内存？
~~不，它没有。~~

似乎大多数人都错过了这里的重点。所以这里有一点澄清。

*此答案中“不，它不会泄漏”*的初始响应是不正确的，但此处建议的解决方案*是*该问题的唯一且最合适的解决方案。

* * *

解决您的困境的方法是：

不使用指向整数成员（`int *`）的指针，而仅使用整数（`int`），您实际上并不需要在这里动态分配指针成员。您可以使用`int`as 成员实现相同的功能。
请注意，在 C++ 中**[您应该`new`尽可能少地使用。](https://stackoverflow.com/questions/6500313/in-c-why-should-new-be-used-as-little-as-possible)**

如果由于某种原因（我在代码示例中看不到），您不能没有动态分配的指针成员继续阅读：

## 你需要遵守**[三法则！](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**

* * *

## **为什么你需要遵循三法则？**

三**法则**规定：

> 如果您的班级需要
> 
> ***复制构造函数***、赋值
> 运算***符***或
> 析***构函数***，
> 
> 那么很可能需要***他们三个***。

您的类需要自己的显式析构函数，因此它还需要显式复制构造函数和复制赋值运算符。
由于您的类的复制构造函数和复制赋值运算符是*隐式*的，因此它们也是隐式*公共*的，这意味着类设计允许复制或分配此类的对象。这些函数的隐式生成版本只会制作动态分配的指针成员的***浅表副本***，这会将您的类暴露给：

*   内存泄漏和
*   悬空指针 &
*   双重释放的潜在未定义行为

这基本上意味着您无法使用隐式生成的版本，您需要提供自己的重载版本，这就是三法则一开始所说的。

显式提供的重载应该对分配的成员进行***深层复制***，从而防止所有问题。

## **如何正确实现 Copy 赋值运算符？**

在这种情况下，提供复制赋值运算符的最有效和优化的方法是使用：
**[copy-and-swap Idiom](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)**
[@GManNickG 的](https://stackoverflow.com/users/87234/gmannickg)著名答案提供了足够的细节来解释它提供的优势。

* * *

## 建议：

此外，最好使用**智能指针**作为类成员，而不是使用显式内存管理负担的原始指针。智能指针将为您隐式管理内存。使用哪种智能指针取决于您的成员的*生命周期*和*所有权*语义，您需要根据您的要求**[选择合适的智能指针](https://stackoverflow.com/questions/8706192/which-kind-of-pointer-do-i-use-when)**。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-26T05:01:43.130

处理此问题的正常方法是创建指针指向的对象的克隆，这就是为什么拥有赋值运算符很重要的原因。当没有定义赋值运算符时，默认行为是 memcpy，当两个析构函数都尝试删除同一个对象时，这将导致崩溃，并且由于前一个值 ptr 在 b 中指向的内存泄漏将不会被删除。

```
Foo a

         +-----+
a->ptr-> |     |
         +-----+

Foo b

         +-----+
b->ptr-> |     |
         +-----+

a = b

         +-----+
         |     |
         +-----+
a->ptr            
       \ +-----+
b->ptr   |     |
         +-----+

when a and b go out of scope delete will be called twice on the same object. 
```

编辑：正如 Benjamin/Als 正确指出的那样，上面只是指这个特定的例子，见下面的评论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T08:24:39.417

呈现的代码具有未定义的行为。因此，如果它泄漏内存（如预期的那样），那么这只是 UB 的一种可能表现形式。它还可以向巴拉克奥巴马发送一封愤怒的威胁信，或者喷出红色（或橙色）的鼻部守护进程，或者什么都不做，或者表现得好像没有内存泄漏，奇迹般地回收了内存，等等。

解决方案：代替`int*`, 使用`int`, 即

```
struct Foo
{
    Foo(int i): blah( i ) {}
    int blah;
};

int main()
{
    {
        Foo a(8);
        Foo b(7);
        a = b;
    }
    //Do other stuff
} 
```

这更安全、更短、更高效、更清晰。

没有其他解决方案针对这个问题提出，在任何客观衡量标准上都优于上述解决方案。

# ruby-on-rails-3 - 无法启动独角兽。

> ID：10763696
> 
> 赞同：1
> 
> 时间：2012-05-26T04:56:38.173
> 
> 标签：ruby-on-rails-3, unicorn

我正在尝试使用独角兽启动我的应用程序，但无法启动。我有一个参数错误`parse_rackup_file: rackup file (config.ru) not readable (ArgumentError)`

我的环境是 rbenv ruby​​1.9.3 和 rails 3.1.3。

怎么了？

```
Mac-mini:rails_app Macmini$ cap deploy:start
  * executing `deploy:start'
  * executing "cd /home/deployer/public_html/rails_app/current/; bundle exec unicorn -c /home/deployer/public_html/rails_app/current/config/unicorn.rb -E production -D"
    servers: ["211.125.67.15"]
    [211.125.67.15] executing command
*** [err :: 211.125.67.15] /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/configurator.rb:610:in `parse_rackup_file': rackup file (config.ru) not readable (ArgumentError)
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/configurator.rb:76:in `reload'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/configurator.rb:67:in `initialize'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:104:in `new'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:104:in `initialize'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/bin/unicorn:121:in `new'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/gems/unicorn-4.3.1/bin/unicorn:121:in `<top (required)>'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `load'
*** [err :: 211.125.67.15] from /home/deployer/public_html/rails_app/shared/bundle/ruby/1.9.1/bin/unicorn:23:in `<main>'
*** [err :: 211.125.67.15] master failed to start, check stderr log for details
    command finished in 1021ms
failed: "env RBENV_ROOT=/usr/local/rbenv PATH=/usr/local/rbenv/shims:/usr/local/rbenv/bin:$PATH sh -c 'cd /home/deployer/public_html/rails_app/current/; bundle exec unicorn -c /home/deployer/public_html/rails_app/current/config/unicorn.rb -E production -D'" on 211.125.67.15
Mac-mini:rails_app Macmini$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:58:42.470

我通过添加解决了这个问题

```
working_directory("/path/to/rails_root") 
```

里面`config/unicorn.rb`

您可以在此处参考文档：http: [//unicorn.bogomips.org/Unicorn/Configurator.html#method-i-working_directory](http://unicorn.bogomips.org/Unicorn/Configurator.html#method-i-working_directory)

# python - 没有绘图功能的直方图

> ID：10763697
> 
> 赞同：8
> 
> 时间：2012-05-26T04:56:40.370
> 
> 标签：python

我正在尝试使用 python 创建一个简单的基于文本的直方图，但没有导入任何绘图函数，例如 matplot 或 gnuplot。我将从 csv 文件中导入数据以创建该直方图。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T07:02:28.803

这样的事情怎么样

```
import random

def plot(data):
    """
    Histogram data to stdout
    """
    largest = max(data)
    scale = 50\. / largest
    for i, datum in enumerate(data):
        bar = "*" * int(datum * scale)
        print "%2d: %s (%d)" % (i, bar, datum)

data = [ random.randrange(100) for _ in range(20) ]
plot(data) 
```

打印这样的东西

```
 0: ************************ (48)
 1: ************************************************** (99)
 2: *********************************** (71)
 3: ******************************************** (88)
 4: ********** (21)
 5: ************************************* (74)
 6: ********************************* (67)
 7: *************************** (54)
 8: ************************************************* (98)
 9: *************** (31)
10: *********** (23)
11: ****************************** (61)
12: ********** (20)
13: **************** (33)
14: **** (8)
15: **************************** (57)
16: ***************************** (59)
17:  (1)
18: ************************ (48)
19: *** (6) 
```

# php - 如何在 OpenID 上建立用户档案

> ID：10763701
> 
> 赞同：0
> 
> 时间：2012-05-26T04:57:21.913
> 
> 标签：php, authentication, openid

我想在我的网站上使用 OpenID，并且我了解外部部件的工作原理，但我如何获取该用户信息并在我自己的网站上为我的用户提供身份？我计划使用一个 PHP 库，例如：用于库的[lightopenid](http://code.google.com/p/lightopenid/w/list)。我可以查看任何建议或资源吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:09:06.543

如果您使用 LightOpenID，`$openid->identity`则将唯一标识存储在数据库中。

还有一些 OpenID Provider(OP)，如[google](https://developers.google.com/accounts/docs/OpenID#Parameters)支持[AX 扩展](http://openid.net/specs/openid-attribute-exchange-1_0.html)，我使用它通过获取他们的名字（以在未来解决他们）和电子邮件（用于联系）来建立用户配置文件并将其存储在数据库中。

而且[LightOpenId](http://code.google.com/p/lightopenid/wiki/GettingMoreInformation)已经支持 AX 扩展。例子：

```
//required attribute(s)
$openid->required = array('namePerson/first', 'contact/email');

//optional attribute(s)
$openid->optional = array('namePerson/last'); 
```

如果 OP 不支持 AX，您可以让用户选择他们想要的名称，就像 SO 目前所做的那样。

我在集成 LightOpenId 时参考了一些好的资源：

*   [如何让人们使用他们的 Google 帐户登录您的网站](http://qpleple.com/how-to-make-people-login-into-your-website-with-their-google-account/)
*   [使用 LightOpenID 登录/注销用户状态](https://stackoverflow.com/questions/8560940/log-in-log-out-user-status-with-lightopenid)

# javascript - 小型 javascript 解决方案需要：此行是有效代码吗？

> ID：10763704
> 
> 赞同：2
> 
> 时间：2012-05-26T04:57:52.480
> 
> 标签：javascript

**在 Html 文件中，我有很多这样的语句：**

```
<li class="menu"><a href="#">1st menu</a></li> 
```

**在javascript文件中，我有这样的代码：**

```
1\. function onload()
2\. {
3\.  var lists=document.getElementsByTagName("li");
4\.  for(var i=0;i<lists.length;i++){
5\.      if(lists[i].className=="menu"){
6\.          lists[i].a.onclick=genmenu;
7\.      }
8\.  }
9\. }

function genmenu(){
    alert("this is an alert");
    return false;
} 
```

**问题是，如果我点击链接“第一个菜单”，它不会显示警报。但是，如果我更改第 6 行并编写：**

```
lists[i].onclick=genmenu; 
```

**然后此链接有效并显示警报。**

**我的问题，为什么第 6 行** (lists[i].a.onclick=genmenu;) **不起作用？这不是一个有效的代码吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:03:30.980

您不能将嵌套元素作为另一个元素的成员来访问：

```
lists[i].a 
```

这是在寻找`list[i]`名称为的元素的成员`a`- 它不是在其中寻找锚点。如果你想要锚，你会写：

```
list[i].getElementsByTagName("a")[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:03:01.957

`a`不是 的属性`li`，它是一个嵌套标记。你必须使用

```
lists[i].getElementsByTagName('a')[0]; 
```

作为旁注，请注意，`if(lists[i].className=="menu")`因为如果您的 li 的课程之一是“menu otherClass”，它将不再起作用。jQuery 有一个很好的方法来处理这个问题：hasClass() 但如果你不使用 jQuery，编写类似的东西会很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T06:12:01.743

在现代浏览器上，您的代码可以更简单、更高效：

```
function onload () {
   var links = document.querySelectorAll ('li.menu a[href]');
   for (var i= links.length; i--;) {
     links[i].addEventListener ('click', genmenu, false);
   }
}

function genmenu () {
    alert ("this is an alert");
    return false;
} 
```

有关详细信息，请[参阅`querySelectorAll`](https://developer.mozilla.org/en/DOM/document.querySelectorAll).

# tomcat - 在两个 Web 应用程序之间共享会话 ID/登录信息

> ID：10763705
> 
> 赞同：0
> 
> 时间：2012-05-26T04:57:59.073
> 
> 标签：tomcat, servlets, single-sign-on

我正在运行 Tomcat 7 并且不使用任何外部库......没有弹簧。没有支柱等。

对不起，我在这方面有点新手。因此，如果一个人登录 Web 应用程序 1，我的思考过程通常是将其存储在 HTTPSession.setValue(username,etc); 但是，我似乎无法在两个 Web 应用程序之间共享这些会话。

我已经阅读了有关 SSO 的信息，但仍然对如何实现它感到困惑。

如果有人可以向我解释一个可以解决这个问题的简单方法，我会非常喜欢它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:07:10.630

SSO 只是为了让您不必跨多个 web 应用程序提供凭据：它们仍然具有不同的会话，并且您无法以这种方式在它们之间进行通信。

您可以使用关系数据库或 memcached 等工具更轻松地将非会话信息联系在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:30:41.473

您应该使用**Tomcat**支持的**Single Sign On**功能。这是解释该功能的[链接。](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Single_Sign_On)

# java - Jackson 处理 Wrapped 元素

> ID：10763712
> 
> 赞同：7
> 
> 时间：2012-05-26T05:00:04.207
> 
> 标签：java, json, jackson

我正在解析来自 last.fm API 的响应。但似乎他们对某些响应使用了一些包装器，这造成了一些痛苦。举个例子：

```
 {
   "artists":{
      "artist":[
         {
            "name":"Coldplay",
            "playcount":"816763",
            "listeners":"120815",
            "mbid":"cc197bad-dc9c-440d-a5b5-d52ba2e14234",
            "url":"http:\/\/www.last.fm\/music\/Coldplay",
            "streamable":"1"
         },
         {
            "name":"Radiohead",
            "playcount":"846668",
            "listeners":"99135",
            "mbid":"a74b1b7f-71a5-4011-9441-d0b5e4122711",
            "url":"http:\/\/www.last.fm\/music\/Radiohead",
            "streamable":"1"
         }
      ],
      "@attr":{
         "page":"1",
         "perPage":"2",
         "totalPages":"500",
         "total":"1000"
      }
   }
} 
```

不仅响应被包装在艺术家对象中，而且对象数组也有一个对象包装器。

所以像这样的包装类：

```
public class LastFMArtistWrapper {
    public List<Artist> artists;

} 
```

不会工作。我解决了这个问题，创建了两个包装类，但这看起来真的很难看。有什么方法可以在 Jackson 中使用 @XMLElementWrapper 之类的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T05:56:58.697

您从提供程序返回的 JSON 响应是不同对象层次结构的序列化表示，但从您的描述来看，听起来您真的只需要使用和使用此表示的特定子集，即艺术家集合。

镜像这种表示的一种解决方案涉及创建相同的 Java 类层次结构，这会以不需要的类的形式产生额外的开销。据我了解，这是您希望避免的。

org.json 项目创建了一个通用[JSONObject](http://www.json.org/javadoc/org/json/JSONObject.html)类，它以更大的 JSON 表示形式表示单个通用键/值对。JSONObject 可以包含其他 JSONObjects 和[JSONArrays](http://www.json.org/javadoc/org/json/JSONArray.html)，镜像表示，而无需维护和编写额外类的额外开销。

因此，这两个对象可以在 JSON 表示中的多个层次结构中重复使用，而无需您复制结构。以下是您可以如何进行的示例：

```
// jsonText is the string representation of your JSON
JSONObject jsonObjectWrapper = new JSONObject(jsonText);  

// get the "artists" object
JSONObject jsonArtists = jsonObjectWrapper.get("artists");

// get the array and pass it to Jackson's ObjectMapper, using TypeReference
  // to deserialize the JSON ArrayList to a Java ArrayList.
List<Artist> artists = objectMapper.readValue(
        jsonObjectWrapper.getString("artist"),
            new TypeReference<ArrayList<Artist>>() { }); 
```

使用上述方法，您减少了编写额外的 POJO 对象层的额外开销，这些对象除了添加不必要的混乱之外什么都不做。

[TestCollectionDeserialization](http://svn.codehaus.org/jackson/trunk/src/test/org/codehaus/jackson/map/deser/TestCollectionDeserialization.java)包含使用集合时 readValue 方法的一些示例，可能会有所帮助。

# java - PreparedStatement 和 LIKE 错误

> ID：10763723
> 
> 赞同：2
> 
> 时间：2012-05-26T05:02:00.367
> 
> 标签：java, mysql, prepared-statement

我正在用 java se 编写一个简单的应用程序`jdk 1.7`，使用`netbeans 7.1.2`和`MySQL 5`。

但我在下一个代码中有一个错误：

```
String sql = "SELECT idpaciente, ap_paterno, ap_materno, nombres, edad, direccion, telefono, descuento, movil, email, docId FROM paciente WHERE ap_paterno LIKE ? ";
pst = con.prepareStatement(sql);

pst.setString(1, paciente.getApellidoPaterno());

ResultSet rs = pst.executeQuery(sql); 
```

此代码编译良好，但执行后，我有语法错误，netbeans 说：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在“？”附近使用的正确语法 在第 1 行

使用netbeans的调试器，错误在executeQuery中，但我找不到我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:20:11.263

[`PreparedStatement.executeQuery()`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#executeQuery%28%29)不接受任何参数，但是由于接口继承了[`Statement.executeQuery(String sql)`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)您正在调用它。只需致电：

```
ResultSet rs = pst.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T05:25:02.183

[http://www.theserverside.com/discussions/thread.tss?thread_id=33182](http://www.theserverside.com/discussions/thread.tss?thread_id=33182)

上面的链接对此主题进行了一些讨论。显然，预先准备好的陈述不适用于“喜欢”和“在”。

所以问题是准备好的语句不能替换 ? 结果查询不正确。您看到的错误直接来自 mysql。

# android - 相框开发android

> ID：10763725
> 
> 赞同：2
> 
> 时间：2012-05-26T05:02:16.893
> 
> 标签：android, photo

我是android开发的新手。我想合并帧图像和照片。合并图像将被保存。如何将照片和相框合并到一个 png 中并将其保存到 SD 卡或内存中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:11:06.433

点击下面的链接找到你的答案

[这里](http://kevindion.com/2011/01/android-bitmap-blending-color-channels/) 是 Android 位图混合 – Kevin Dion 的颜色通道

这里[有](https://stackoverflow.com/questions/6191265/problem-with-code-to-combine-two-images-in-android)一个堆栈溢出帖子

希望帮助

# scala - Scala中的十六进制字符串到Int，Short和Long

> ID：10763730
> 
> 赞同：37
> 
> 时间：2012-05-26T05:04:01.227
> 
> 标签：scala

只是找不到在 Scala 中将十六进制字符串转换为数字（Int、Long、Short）的方法。

有没有类似的东西`"A".toInt(base)`？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-26T05:06:34.550

您可以使用 Java 库：

```
val number = Integer.parseInt("FFFF", 16)
> number: Int = 65535 
```

或者，如果您感到兴奋:-)：

```
implicit def hex2int (hex: String): Int = Integer.parseInt(hex, 16)

val number: Int = "CAFE" // <- behold the magic
number: Int = 51966 
```

* * *

此外，如果您不是专门尝试将字符串参数解析为十六进制，请注意 Scala 直接支持十六进制整数文字。在这种情况下：

```
val x = 0xCAFE
> x: Int = 51966 
```

Scala 不是很棒吗？:-)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-26T06:04:17.063

7zark7 的答案是正确的，但我想补充一些。隐含的 from `String`to`Int`可能很危险。相反，您可以使用隐式转换来包装并显式调用解析：

```
class HexString(val s: String) {
    def hex = Integer.parseInt(s, 16)
}
implicit def str2hex(str: String): HexString = new HexString(str)

val num: Int = "CAFE".hex 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-21T17:34:35.487

单线呢？

```
def hexToInt(s: String): Int = {
    s.toList.map("0123456789abcdef".indexOf(_)).reduceLeft(_ * 16 + _)
}

scala> hexToInt("cafe")
res0: Int = 51966 
```

并回答您的第二项：

> 有没有像“A”.toInt(base) 这样的东西？

是的，仍然是单线：

```
def baseToInt(s: String, base: String): Int = {
    s.toList.map(base.indexOf(_)).reduceLeft(_ * base.length + _)
}

scala> baseToInt("1100", "01")
res1: Int = 12 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-09-04T05:10:20.213

任何想要将 UUID 从十六进制转换为十进制数的人都可以从 Benoit 的答案中借用 BigDecimal 来完成这项工作：

```
scala> "03cedf84011dd11e38ff0800200c9a66".toList.map(
 |   "0123456789abcdef".indexOf(_)).map(
 |     BigInt(_)).reduceLeft( _ * 16 + _)
res0: scala.math.BigInt = 5061830576017519706280227473241971302 
```

或更一般地说：

```
def hex2dec(hex: String): BigInt = {
  hex.toLowerCase().toList.map(
    "0123456789abcdef".indexOf(_)).map(
    BigInt(_)).reduceLeft( _ * 16 + _)
}

def uuid2dec(uuid: UUID): BigInt = {
  hex2dec(uuid.toString.replace("-",""))
} 
```

然后：

```
scala> import java.util.UUID

scala> val id = UUID.fromString("3CEDF84-011D-D11E-38FF-D0800200C9A66")
id: java.util.UUID = 03cedf84-011d-d11e-38ff-0800200c9a66

scala> uuid2dec(id)
res2: BigInt = 5061830576017519706280227473241971302 
```

一个实际应用是在条形码中编码 UUID，其中 Code128 为所有数字生成比字母数字字符串更短的条形码。[请参阅http://en.wikipedia.org/wiki/Code128#Subtypes](http://en.wikipedia.org/wiki/Code128#Subtypes)上有关子类型“128A”的说明。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-18T14:45:58.913

对于 Long 和 Short，也可以直接使用 Java 方法，如

```
Long2long(java.lang.Long.valueOf(hexString, 16)) 
```

where`Long2long`在某些情况下甚至可以省略。

# android - 包名未在 DDMS 中加载

> ID：10763731
> 
> 赞同：1
> 
> 时间：2012-05-26T05:04:23.380
> 
> 标签：android, package, ddms

我正在开发一个 android 应用程序并使用数据库，我在项目开始时给出了一个包名称，我想将我的项目与其他项目集成，但另一个项目也具有相同的名称，所以我必须更改我的包名称为了将我的项目与其他项目区分开来。现在的问题是在集成项目中没有加载包名。也在清单中我给出如下

```
<activity android:name="com.android.game.PartThree" android:screenOrientation="portrait" android:label="@string/app_name">
        </activity> etc.... 
```

谁能告诉我哪里出错了。在此先感谢

# c - 可靠的UDP实现设计问题

> ID：10763733
> 
> 赞同：0
> 
> 时间：2012-05-26T05:04:34.987
> 
> 标签：c, linux, multithreading, sockets, udp

我一直在围绕 UDP 进行定制以使其可靠。我有这个设计问题，只有在我的整个程序准备好并且我开始将数据包从源发送到接收器之后我才意识到。

场景：我创建了一个用于接收数据包的线程。父母做数据包发送工作。由于这只是一个 POC，我将缓冲区和公共数据结构作为全局指针保存，父级在堆上为其分配内存。我正在使用互斥锁处理关键内存部分。

作为可靠性的一部分，除了数据包之外，我还发送了一些控制包。在任何时候，客户端都会发送数据包并从服务器接收控制包，而服务器将接收数据包并发送控制包。我使用了单套接字，因为我的理解是 send 和 recv 在单套接字和默认阻塞上同时工作。

问题：出于测试目的，我将 100 个数据包从源发送到接收器。不幸的是，服务器端的线程一直忙于接收数据包并将其存储在缓冲区中。在父线程获得上下文切换之前，服务器代码不会将数据包传递给应用程序。这增加了整体通信中不可接受的延迟。

请帮助我理解，这是什么问题；可以改变什么来提高性能？

在此先感谢，凯达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:24:59.617

由于您使用的是互斥锁，因此在发送数据包后在一个线程上释放互斥锁时，另一个线程应该使用该数据包。也许您没有足够快地释放互斥锁。

或者，让套接字的 select() 方法为您处理 unblock-on-receive。

# google-api - 如何建立指向谷歌日历活动的 html 链接？

> ID：10763734
> 
> 赞同：33
> 
> 时间：2012-05-26T05:04:51.863
> 
> 标签：google-api, google-calendar-api

使用谷歌日历 API v3，我向谷歌日历添加了一个事件。现在我想建立一个 html 链接，以便有人可以单击并查看日历事件。

这是我尝试过的：

`<a href="https://www.google.com/calendar/feeds/default/private/full/{{ event.googleID }}">View Google</a>`

href 看起来像：
`https://www.google.com/calendar/feeds/default/private/full/bigstringhere1ovmuup7mjf0`

问题是我收到 401 错误“需要授权”

如何建立一个链接来查看/编辑基于谷歌日历 ID 的日历事件？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-08-08T06:27:23.747

有一种方法！要查看公共日历事件，请使用以下表单的链接：

```
https://www.google.com/calendar/event?eid={event-id}&ctz={timezone} 
```

其中*{event-id}*是唯一的事件 ID，*{timezone}*是[这些时区之一](https://stackoverflow.com/questions/13866926/python-pytz-list-of-timezones)。

这是一个示例：[链接到特定的公共日历事件](https://www.google.com/calendar/event?eid=Z3FrNWoyaWhtOGM5MmpjcDM5bjkxZGczcnNfMjAxMzExMjZUMTAwMDAwWiA5Nm1wdTg4djJkM29ucWtwNnBoOTg2NXAxY0Bn&ctz=Asia/Taipei)。

如果您拥有此活动所在日历的编辑权限，您将能够编辑该活动并查看来宾列表。否则，您只会看到有关该事件的公开信息。

由于确定事件 ID 可能很困难，因此这里有一个小书签，当您编辑其详细信息页面时，它会生成指向您的 Google 日历事件的链接：

```
javascript:(function(){ try { window.prompt('Shareable link to this event:','https://www.google.com/calendar/event?eid='+document.getElementsByClassName('ep')[0].getAttribute('data-eid')) } catch (e) {alert("Use this bookmarklet to get a shareable link to a Google Calendar event when editing its Details page.")}})() 
```

此书签的一个版本可与新的（截至 2017 年）Google 日历 UI 一起使用：

```
javascript:(function(){ 
  window.prompt('Shareable link to this event:',
    'https://www.google.com/calendar/event?eid='+
    window.location.href.split("/").pop().split("?")[0])
})() 
```

（也可能有用，如何链接到公共 Google 日历的特定*日期：*

```
https://www.google.com/calendar/embed?src={calendar-id}&mode=day&dates={yyyymmdd}%2F{yyyymmdd} 
```

其中*{calendar-id}*是日历的 ID，*{yyyymmdd}*是您要链接到的日期。

可选参数包括时区和是否显示各项，例如：

```
&ctz=Asia/Taipei&showNav=0&showPrint=0&showCalendars=0 
```

示例：[链接到公共日历的某一天](https://www.google.com/calendar/embed?src=96mpu88v2d3onqkp6ph9865p1c%40group.calendar.google.com&mode=day&dates=20140802%2F20140802&ctz=Asia/Taipei)。）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-12T21:49:07.570

这是构建链接的 HTML：

`https://www.google.com/calendar/render?action=TEMPLATE&text=Your+Event+Name&dates=20140127T224000Z/20140320T221500Z&details=For+details,+link+here:+http://www.example.com&location=Waldorf+Astoria,+301+Park+Ave+,+New+York,+NY+10022&sf=true&output=xml`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-23T08:24:36.097

活动 URL 不是日历 URL。

这个链接带来了解释：[Google Calender v3](https://developers.google.com/google-apps/calendar/v3/reference/events/get)

构建此 url 的方法是：

```
GET https://www.googleapis.com/calendar/v3/calendars/calendarId/events/eventId 
```

其中`calendarId`&`eventId`是参数。

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-31T11:57:25.010

我想发布这个，因为它与所提出的问题相切，当我尝试执行以下操作时，这个帖子出现了。

我试图生成一个 Google 事件的唯一目的是添加到其他人的日历中，而不是保存到任何特定的日历中。我在这里找到了一个示例，我目前正在尝试找出它接受的 URL 参数。

```
https://www.google.com/calendar/render?action=TEMPLATE&text=PRP+Due&dates=20141106T120000Z/20141106T120000Z&details&location&trp=false 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-28T09:29:47.327

按事件 ID 查看 Google 日历事件。

您可以使用以下示例：

```
https://www.google.com/calendar/event?eid={event-id}&ctz={timezone} 
```

印度时区示例：

```
https://calendar.google.com/calendar/event?eid=ZjVicWczYWpndmh0ZmdtYmd0cXFxZWc3czggdTJoZmoybGg0aDcwbmhzMzV2c25pamd1dG9AZw&ctz=Asia/Kolkata 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-05T09:58:18.997

要从 Google Calendar API v3 获取事件，请调用：

> `GET https://www.googleapis.com/calendar/v3/calendars/calendarId/events/eventId`

该事件包含一个属性`htmlLink`，这正是您所需要的：

> 在 Google 日历 Web UI 中指向此事件的绝对链接。只读。

请参阅[https://developers.google.com/google-apps/calendar/v3/reference/events](https://developers.google.com/google-apps/calendar/v3/reference/events)。

链接如下所示：

```
https://www.google.com/calendar/event?eid=XzYwcTMwYzFnNjBvMzBlMWk2MG80YWMxZzYwcmo4Z3BsODhyajJjMWg4NHMzNGg5ZzYwczMwYzFnNjBvMzBjMWc2c28zMmRoaDhwMGpnaDIxNnQyNDZkaGc2NG8zMGMxZzYwbzMwYzFnNjBvMzBjMWc2MG8zMmMxZzYwbzMwYzFnNzByNDRoMWk2b3AzOGUxazZoMms2aDFrNmQwamNkaTI2OHBrMmhpMjg4czRjZ2hoNzBwMF8yMDA2MDUwNSBob3BtYW4ubmxfbjE5ZGF2YWgxb3Zkb3EzbGl2N2t1aWU5Z. 
```

当然，只有当您有权访问该事件时，它才会全屏打开该事件。屏幕将包含一个返回按钮以返回日历。

显然，您无法自己构建此链接，因此您需要调用 API，但您可能已经在这样做了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-27T08:10:56.560

要创建用户可以公开查看活动日历的页面，有权更改日历共享设置的用户必须首先公开日历：

*   在 Google 日历的右上角，单击设置轮。

*   在“设置”中，单击“日历”选项卡。

*   单击您正在使用的日历的名称。

*   接下来，单击“共享此日历”选项卡。确保从下面的屏幕截图中选中复选框（以红色圈出）。

![谷歌日历设置页面](../Images/e2c75a0f111564092050b3240b2729b6.png)

* * *

*   然后，单击位于左上角的“日历详细信息”选项卡。

*   向下滚动到“日历地址”部分，如下面的屏幕截图所示。

*   点击“HTML”。

*   将出现一个弹出模式，其中包括您公开访问日历所需的公共 URL。

* * *

![获取公共 Google 日历的 URL](../Images/72bbeb262b4a4dd4fefecbaed57025fa.png)

* * *

以下是 URL 的示例：

```
https://www.google.com/calendar/embed?src=domain.comrandomstring@group.calendar.google.com&ctz=America/Los_Angeles&gsessionid=OK 
```

此外，有关创建和使用日历小工具的信息，请参阅[Google 日历数据 API](https://developers.google.com/google-apps/calendar/gadgets/event/#UsingGData)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-11T07:24:03.377

当创建一个谷歌日历事件时，在响应中我们得到了`result`属性。在此`result`属性中，还有一个`htmlLink`可用的，其中包含有关正在创建的事件的链接。现在，它可以打开了：

```
window.open(response.result.htmlLink, '_target'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-06T06:41:26.637

*   “时区”： {
*   ```
     "#type": "VarChar(64)", 
    ```

*   ```
     "#eq": "timeZone" 
    ```

*   },
*   "accessRole": "VarChar(64)",
*   “defaultReminders<defaultreminders_events>[]”：{
*   ```
     "method": "VarChar(64)", 
    ```

*   ```
     "minutes": "Integer" 
    ```

*   },
*   "nextSyncToken": "VarChar(64)",
*   “项目<日历事件> []”：{
*   ```
     "kind": "VarChar(64)", 
    ```

*   ```
     "etag": "VarChar(64)", 
    ```

*   ```
     "id": "VarChar(64)", 
    ```

*   ```
     "status": "VarChar(64)", 
    ```

*   ```
     "htmlLink": "VarChar(157)", 
    ```

检查日历事件中 htmlLink 的长度，157 是一个奇怪的数字。它可能更长吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-21T04:40:11.433

Wordpress + ACF 谷歌 cal。

将您的 ACF 日期选择器设置为自定义返回 Ymd g:ia

然后创建一个谷歌格式的日期。

```
$event_start_date = get_field('event_start_date');
$event_print_date = date('d/m/Y',strtotime($event_start_date));
$event_start_time = get_field('event_start_time');
$event_end_date = get_field('event_end_date');
$event_print_enddate = date('d/m/Y',strtotime($event_end_date));
$event_end_time = get_field('event_end_time');

$calendarDate = date('Ymd',strtotime($event_start_date)) .'T'. date('Hi',strtotime($event_start_time)). '00/' . date('Ymd',strtotime($event_end_date)) .'T'. date('Hi',strtotime($event_end_time)) . '00'; 
```

关联

```
<a href="https://www.google.com/calendar/render?action=TEMPLATE&text=<?php the_title(); ?>&dates=<?php echo $calendarDate; ?>&details=<?= strip_tags($event_contact_info); ?>  For+details,+link+here:+<?php the_permalink(); ?>&location=<?php echo $calendarLocation; ?>&sf=true&output=xml" target="_blank" rel="nofollow">Add this event to my Google Calendar</a> 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-12-10T10:13:35.477

谷歌已经创建了一个 DIY 页面。

[https://support.google.com/calendar/answer/3033039](https://support.google.com/calendar/answer/3033039)

# c++ - 如何将列添加到二维数组

> ID：10763738
> 
> 赞同：0
> 
> 时间：2012-05-26T05:05:43.080
> 
> 标签：c++

我在具有 n 行和 p 列的二维数组中有数据。

例如：

```
vector<vector<int> > dynamicArray(ROWS, vector<int>(COLUMNS));

for(int i = 0;i < dynamicArray.size();++i){
      for(int j = 0;j < dynamicArray[i].size();++j){
           dynamicArray[i][j] = i*j;
      }
} 
```

现在，我想在这个数组中添加几列。我尝试了以下方法（将所有 10 的列添加到数组中），但如果失败：

```
for(int i=0; i < dynamicArray.size(); i++){
    dynamicArray[i].push_back(10);
} 
```

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:19:49.547

我已经运行了您的代码，并且成功添加了一个列。你说的失败是什么意思？

就我个人而言，我会使用一个向量将二维数组展平为 1。

```
class DynamicMatrix
{
   vector<int> array;
   int rows;
   int columns;
   public:

   DynamixMatrix(int r,int c):array(vector<int>(r*c)),rows(r),columns(c){};

   int getValue(int x,int y) { return array[x+y*c];}
   int setValue(int x,int y, int v) { array[x+y*c] = v;}

   void AddRow()
   {
        rows++;
        array.resize(rows*columns);
   }
   void AddColumn()
   {
        column++;
        array.resize(rows*columns);
   }

} 
```

# visual-sourcesafe - Visual sourcesafe 树视图不与根文件夹同步？

> ID：10763742
> 
> 赞同：0
> 
> 时间：2012-05-26T05:06:08.777
> 
> 标签：visual-sourcesafe

我正在使用 microsoft visual sourcesafe 2005。

我设置的数据库文件夹是 D:\Code

当我合并代码并将新代码签入以确保源代码安全时。我假设我刚刚签入的文件是 $\Code\a.cpp。但是当我打开文件夹 D:\Code\a.cpp 上的文件 a.cpp 时，我没有看到签入的新行代码。它始终是旧版本的文件。

这是VSS的错误吗？

谢谢！

同天集团

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:40:15.627

如果您能提供更多信息就更好了。

1.  你是如何合并文件的？请确保将修改合并到 $\Code\a.cpp，而不是相反。

2.  请检查 a.cpp 的历史并了解您对该文件所做的操作。如有必要，对历史版本执行差异操作。

3.  您是否尝试直接从 VSS 打开 a.cpp 而不是打开本地文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T02:05:15.983

您可能对“工作文件夹”的概念感到困惑。假设您将 D:\Code 设置为 $/ 的工作文件夹，而包含 a.cpp 的解决方案/项目位于另一个文件夹中，例如 E:\Code。

现在，如果您在 Visual Studio 中编辑 a.cpp 然后签入，“E:\Code\a.cpp”会更新，但“D:\Code\a.app”不会更新。

# apache - 用mac用404启动apache

> ID：10763750
> 
> 赞同：0
> 
> 时间：2012-05-26T05:07:35.870
> 
> 标签：apache, configuration

我正在尝试在自己的计算机上安装 start apache2 但遇到一些问题：

所以当我这样做时： sudo /usr/local/apache2/bin/apachectl start 它给了我：httpd：无法可靠地确定服务器的完全限定域名，已经使用 xxxs-MacBook-Pro.local 作为 ServerName httpd（pid 685）跑步

当我尝试打开“http://localhost/”时，它给了我 404。是因为默认目录错误吗？

（我还尝试修复服务器名称，并且在我的 httpd.conf 中它有 #ServerName www.example.com:@@Port@@ 并且我将其更改为 ServerName localhost 但不起作用。）

# .htaccess - 复制站点后magento bae url不起作用

> ID：10763751
> 
> 赞同：0
> 
> 时间：2012-05-26T05:07:46.340
> 
> 标签：.htaccess, magento

1.  我有一个网站[http://www.gingerlily.fr](http://www.gingerlily.fr)

2.  **我复制这些文件并在名为test**的根目录上创建子目录 并将文件上传到它

3.  复制数据库并为所有基本 url 数据库和其他配置应用更新。(http://www.gingerlily.fr/test)

4.  **但问题是当我访问[http://www.gingerlily.fr/test](http://www.gingerlily.fr/test) 站点时，我总是显示根 url 和其他 js 以及从根 magento 安装加载的图像**。我尝试了一天，但没有运气。

任何人都可以帮助我解决**httacess 文件的问题或任何其他问题**吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:24:56.797

I have seen your [http://www.gingerlily.fr/](http://www.gingerlily.fr/). Correct me if i am wrong your trying to duplicate your site to test directory. But in magento your can't copy and duplicate site like PHP /Html here your files of magento site need to be first install and you can replace your module and theme files.

# ajax - Chrome XmlHttpRequest 挂起

> ID：10763754
> 
> 赞同：7
> 
> 时间：2012-05-26T05:08:51.127
> 
> 标签：ajax, google-chrome

当我向特定 URL 发出 XmlHttpRequest（通过 jQuery 的 $.ajax）时，我的 Chrome 每次都会挂起，并显示“待处理”请求的状态。

之后 Chrome 必须关闭，即。强制从任务管理器中强制执行，并且它表现出一般的混乱迹象，例如 Cookies 和 Scripts 选项卡在它们之前充满了正常外观的数据时是空的。

这很奇怪，因为（a）我的同事，运行看似相同的一切，没有这样的问题；(b) 我已经使用 Chrome 运行这个代码（我们公司的 JavaScript 应用程序）好几个月了，而且这种情况刚刚开始发生，没有明显的原因。

我检查了 Apache 日志，它们似乎正在正常处理请求并完成，但 Chrome 显然从未看到回复。

其他一些澄清：在失败之前，相同的 Chrome 和 Apache 正常返回一卡车的 JS 和图像文件，例如，事情似乎很好，直到它们不是。请求不是特别大（进出几百字节）或任何明显的复杂方式。

如果有人能给我一些在哪里看的提示，我将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T17:41:10.503

我正在经历类似的行为，但症状略有不同。我的 ajax 请求工作正常，每秒最多 6 个请求，然后它们都开始失败（与工作时相同的 url，相同的有效负载等），但在我的情况下，它们甚至没有访问服务器，只是停留在“待处理“在督察中。

我没有答案，但是为了帮助调试，您是否尝试过 chromes net-internals？

将浏览器指向：

```
chrome://net-internals/#sockets 
```

和/或

```
chrome://net-internals/#events 
```

我在#sockets 中看到我的请求进入“活动”状态，但再也没有回来，在#events 中我可以看到请求在 HOST_RESOLVER_IMPL_REQUEST 阶段之后停止。

我认为这可能是由于没有正确结束请求而导致的资源问题，但这只是纯粹的猜测。

# c# - 空引用 ASP.Net MVC 实体

> ID：10763756
> 
> 赞同：0
> 
> 时间：2012-05-26T05:09:09.740
> 
> 标签：c#, asp.net-mvc-3, entity, datacontext

在这一行 _repository.CreateDealer(d); 我收到以下错误。

我已经开始根据本教程的基础知识构建我的代码 [http://www.dotnetcurry.com/ShowArticle.aspx?ID=786](http://www.dotnetcurry.com/ShowArticle.aspx?ID=786)

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

Object reference not set to an instance of an object. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

Line 84:             {
Line 85: 
Line 86:                 _repository.CreateDealer(d);
Line 87:             }
Line 88:             //DataContractJsonSerializer jsonSerializer =

Source File: C:\Users\Scott\Documents\Visual Studio 2010\Projects\DealerTentSaleMVC\DealerTentSaleMVC\Controllers\EdmundsController.cs    Line: 86 

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   DealerTentSaleMVC.Controllers.EdmundsController.Create(String zip, String make) in C:\Users\Scott\Documents\Visual Studio 2010\Projects\DealerTentSaleMVC\DealerTentSaleMVC\Controllers\EdmundsController.cs:86
   lambda_method(Closure , ControllerBase , Object[] ) +227
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8972317
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

DealerRepository.cs

```
 public void CreateDealer(DealersTemp.DealerHolder dealer)
{
    using (DealerContext context = new DealerContext())
    {
        context.Entry(new DealersTemp.DealerHolder
        {
            //DealerHolderId = dealer.DealerHolderId,
            id = dealer.id,
            locationId = dealer.locationId,
            address = dealer.address,
            name = dealer.name,
            logicalName = dealer.logicalName,
            type = dealer.type,
            make = dealer.make,
            operations = dealer.operations,
            contactinfo = dealer.contactinfo,
            publishDate = dealer.publishDate,
            active = dealer.active,
            syncPublishDate = dealer.syncPublishDate
        }).State = System.Data.EntityState.Added;
        context.SaveChanges();
    }
} 
```

IDealerRepository.cs

```
 namespace DealerTentSaleMVC.Repository
{
    public interface IDealerRepository
    {
        IEnumerable<DealersTemp.DealerHolder> GetAllDealers();
        void CreateDealer(DealersTemp.DealerHolder dealer);
        DealersTemp.DealerHolder ReadDealer(int id);
        void UpdateDealer(DealersTemp.DealerHolder dealer);
        void DeleteDealer(int id);
    }

} 
```

DealersTemp.cs

```
 namespace DealerTentSaleMVC.Models
{
    public class DealersTemp
    {
        public class Address
        {
            //public int AddressId { get; set; }
            public string street { get; set; }
            public string apartment { get; set; }
            public string city { get; set; }
            public string stateCode { get; set; }
            public string stateName { get; set; }
            public string county { get; set; }
            public string country { get; set; }
            public string zipcode { get; set; }
            public double latitude { get; set; }
            public double longitude { get; set; }
            //public virtual int DealerHolderId { get; set; }
        }

        public class Operations
        {
            //public int OperationsId { get; set; }
            public string Wednesday { get; set; }
            public string Tuesday { get; set; }
            public string Thursday { get; set; }
            public string Saturday { get; set; }
            public string Friday { get; set; }
            public string Monday { get; set; }
            public string Sunday { get; set; }
            //public virtual int DealerHolderId { get; set; }
        }

        public class Contactinfo
        {
            //[Key]
            //public int ContactinfoId { get; set; }

            public string dealer_website { get; set; }
            public string email_address { get; set; }
            public string phone { get; set; }
            //public string phone_areacode { get; set; }
            //public string phone_postfix { get; set; }
            //public string phone_prefix { get; set; }
            //public virtual int DealerHolderId { get; set; }
        }

        public class DealerHolder
        {
            //[Key]
            //public int DealerHolderId { get; set; }
            public string id { get; set; }
            public string locationId { get; set; }
            public Address address { get; set; }
            public string name { get; set; }
            public string logicalName { get; set; }
            public string type { get; set; }
            public string make { get; set; }
            public Operations operations { get; set; }
            public Contactinfo contactinfo { get; set; }
            public string publishDate { get; set; }
            public bool active { get; set; }
            public string syncPublishDate { get; set; }

            public DealersTemp.DealerHolder ToDomainDealer()
            {
                return new DealersTemp.DealerHolder
                {
                    //DealerHolderId = this.DealerHolderId,
                    id = this.id,
                    locationId = this.locationId,
                    address = this.address,
                    name = this.name,
                    logicalName = this.logicalName,
                    type = this.type,
                    make = this.make,
                    operations = this.operations,
                    contactinfo = this.contactinfo,
                    publishDate = this.publishDate,
                    active = this.active,
                    syncPublishDate = this.syncPublishDate

                };
            }
        }

        public class RootObject
        {
            public List<DealerHolder> dealerHolder { get; set; }
        }

    } 
```

EdmundsController.cs

```
 [HttpPost]
public ActionResult Create(string zip, string make)
{
    string url = "http://api.edmunds.com/v1/api/dealer?zipcode=" + zip.Replace(" ", "") + "&makeName=" + make.Replace(" ", "") + "&radius=3000&fmt=json&api_key=SomeKey";
    //WebRequest request = WebRequest.Create(url);
    WebClient wc = new WebClient();
    string stws = wc.DownloadString(url);

    JToken root = JObject.Parse(stws);
    JToken dealerholder = root["dealerHolder"];
    DealerTentSaleMVC.Models.DealersTemp.DealerHolder convertedProducts = new DealerTentSaleMVC.Models.DealersTemp.DealerHolder();
    string dh = dealerholder.ToString().Replace("[", "").Replace("]", "");
    Result result = JsonConvert.DeserializeObject<Result>(stws); 

    foreach (DealersTemp.DealerHolder d in result.DealerHolder)
    {

        _repository.CreateDealer(d);
    }

    return RedirectToAction("Index");
} 
```

DealerContext.cs

```
 namespace DealerTentSaleMVC.Context
{
    public class DealerContext: DbContext
    {
        public DbSet<DealersTemp.DealerHolder> Dealers { get; set; }
    }
} 
```

这是完整的 Json 字符串

```
 {
    "dealerHolder": [
        {
            "id": "31711",
            "locationId": "3730",
            "address": {
                "street": "24825 US Hwy 19 N",
                "apartment": "",
                "city": "Clearwater",
                "stateCode": "FL",
                "stateName": "Florida",
                "county": "Pinellas",
                "country": "USA",
                "zipcode": "33763",
                "latitude": 27.99785,
                "longitude": -82.729321
            },
            "name": "Countryside Ford of Clearwater",
            "logicalName": "CountrysideFordofClearwater",
            "type": "ROOFTOP",
            "make": "Ford",
            "operations": {
                "Wednesday": "8:30 AM-9:00 PM",
                "Tuesday": "8:30 AM-9:00 PM",
                "Thursday": "8:30 AM-9:00 PM",
                "Saturday": "8:30 AM-8:00 PM",
                "Friday": "8:30 AM-9:00 PM",
                "Monday": "8:30 AM-9:00 PM",
                "Sunday": "11:00 AM-5:00 PM"
            },
            "contactinfo": {
                "dealer_website": "http://www.clearwaterford.com/",
                "email_address": "",
                "phone": ""
            },
            "publishDate": "2012-05-25",
            "active": true,
            "syncPublishDate": "2012-05-25"
        },
        {
            "id": "31673",
            "locationId": "3708",
            "address": {
                "street": "2525 34th St N",
                "apartment": "",
                "city": "Saint Petersburg",
                "stateCode": "FL",
                "stateName": "Florida",
                "county": "Pinellas",
                "country": "USA",
                "zipcode": "33713",
                "latitude": 27.794484,
                "longitude": -82.679411
            },
            "name": "Autoway Ford of St Petersburg",
            "logicalName": "AutowayFordofStPetersburg",
            "type": "ROOFTOP",
            "make": "Ford",
            "operations": {
                "Wednesday": "08:30 AM-08:00 PM",
                "Tuesday": "08:30 AM-08:00 PM",
                "Thursday": "08:30 AM-08:00 PM",
                "Saturday": "09:00 AM-06:00 PM",
                "Friday": "08:30 AM-08:00 PM",
                "Monday": "08:30 AM-08:00 PM",
                "Sunday": "12:00 PM-05:00 PM"
            },
            "contactinfo": {
                "dealer_website": "http://www.autowayford.net/",
                "email_address": "",
                "phone": ""
            },
            "publishDate": "2012-05-25",
            "active": true,
            "syncPublishDate": "2012-05-25"
        },
        {
            "id": "31636",
            "locationId": "3684",
            "address": {
                "street": "5815 N Dale Mabry Hwy",
                "apartment": "",
                "city": "Tampa",
                "stateCode": "FL",
                "stateName": "Florida",
                "county": "Hillsborough",
                "country": "USA",
                "zipcode": "33614",
                "latitude": 28.00016,
                "longitude": -82.505206
            },
            "name": "Bill Currie Ford",
            "logicalName": "BillCurrieFord",
            "type": "ROOFTOP",
            "make": "Ford",
            "operations": {
                "Wednesday": "8:00 AM-9:00 PM",
                "Tuesday": "8:00 AM-9:00 PM",
                "Thursday": "8:00 AM-9:00 PM",
                "Saturday": "8:00 AM-8:00 PM",
                "Friday": "8:00 AM-9:00 PM",
                "Monday": "8:00 AM-9:00 PM",
                "Sunday": "11:00 AM-6:00 PM"
            },
            "contactinfo": {
                "dealer_website": "http://billcurriedirect.dealerconnection.com/",
                "email_address": "",
                "phone_areacode": "888",
                "phone_postfix": "1156",
                "phone_prefix": "255",
                "phone": "8882551156"
            },
            "publishDate": "2012-05-25",
            "active": true,
            "syncPublishDate": "2012-05-25"
        },
        {
            "id": "31723",
            "locationId": "3739",
            "address": {
                "street": "17556 US 19 N",
                "apartment": "",
                "city": "Clearwater",
                "stateCode": "FL",
                "stateName": "Florida",
                "county": "Pinellas",
                "country": "USA",
                "zipcode": "33764",
                "latitude": 27.93164,
                "longitude": -82.730647
            },
            "name": "Walker Ford",
            "logicalName": "WalkerFord",
            "type": "ROOFTOP",
            "make": "Ford",
            "operations": {
                "Wednesday": "8:30 AM-8:00 PM",
                "Tuesday": "8:30 AM-8:00 PM",
                "Thursday": "8:30 AM-8:00 PM",
                "Saturday": "8:30 AM-6:00 PM",
                "Friday": "8:30 AM-8:00 PM",
                "Monday": "8:30 AM-8:00 PM",
                "Sunday": "11:30 AM-6:00 PM"
            },
            "contactinfo": {
                "dealer_website": "http://www.walkerford.com/",
                "email_address": "",
                "phone_areacode": "727",
                "phone_postfix": "3673",
                "phone_prefix": "535",
                "phone": "7275353673"
            },
            "publishDate": "2012-05-25",
            "active": true,
            "syncPublishDate": "2012-05-25"
        }
    ]
} 
```

以下是显示整个控制器代码的更新

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Objects.DataClasses;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using DealerTentSaleMVC.Models;
using System.Net;
using System.Runtime.Serialization.Json;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;
using System.IO;
using DealerTentSaleMVC.Repository;

namespace DealerTentSaleMVC.Controllers
{
    public class EdmundsController : Controller
    {
        private static string GetApiKey() { return "AIzaSyDiOm4qmnR7ZPbPPiUJrIxfYZ0XreDMaW8"; }

        private DealersTemp.RootObject db = new DealersTemp.RootObject();
        private IDealerRepository _repository;
        //
        // GET: /Edmunds/

        public ViewResult Index()
        {
            return View(_repository.GetAllDealers());
        }

        //
        // GET: /Edmunds/Details/5

        public ViewResult Details(int id)
        {
            DealersTemp.DealerHolder dealerholder = _repository.ReadDealer(id);

            return View(dealerholder);
        }

        //
        // GET: /Edmunds/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /Edmunds/Create
        public class Result
        {
            public ICollection<DealersTemp.DealerHolder>DealerHolder { get; set; }
        }
        //[HttpPost]
        //public ActionResult Create(BlogPost blogpost)
        //{
        //    if (ModelState.IsValid)
        //    {
        //        _repository.CreateBlogPost(blogpost);
        //        return RedirectToAction("Index");
        //    }

        //    return View(blogpost);
        //}
        [HttpPost]
        public ActionResult Create(string zip, string make)
        {
            string url = "http://api.edmunds.com/v1/api/dealer?zipcode=" + zip.Replace(" ", "") + "&makeName=" + make.Replace(" ", "") + "&radius=3000&fmt=json&api_key=8rqtk3bb4bc4xgydqspvmc2s";
            //WebRequest request = WebRequest.Create(url);
            WebClient wc = new WebClient();
            string stws = wc.DownloadString(url);

            JToken root = JObject.Parse(stws);
            JToken dealerholder = root["dealerHolder"];
            DealerTentSaleMVC.Models.DealersTemp.DealerHolder convertedProducts = new DealerTentSaleMVC.Models.DealersTemp.DealerHolder();
            string dh = dealerholder.ToString().Replace("[", "").Replace("]", "");
            Result result = JsonConvert.DeserializeObject<Result>(stws); 

            foreach (var d in result.DealerHolder)
            {
                DealersTemp.DealerHolder newD = new DealersTemp.DealerHolder { active=d.active, contactinfo=d.contactinfo, address=d.address, id=d.id, locationId=d.locationId, logicalName=d.logicalName, make=d.make, name=d.name, operations=d.operations, publishDate=d.publishDate, syncPublishDate=d.syncPublishDate, type=d.type };

                _repository.CreateDealer(d);
            }
            //DataContractJsonSerializer jsonSerializer =
            //        new DataContractJsonSerializer(typeof(DealersTemp.RootObject));
            //DealersTemp.RootObject products = (DealersTemp.RootObject)jsonSerializer.ReadObject(ws.GetResponseStream());
            //List<DealersTemp.DealerHolder> convertProducts = (DealersTemp.DealerHolder)products.dealerHolder;

            return RedirectToAction("Index");
        }

        //
        // GET: /Edmunds/Edit/5

        public ActionResult Edit(int id)
        {
            DealersTemp.DealerHolder dealer = _repository.ReadDealer(id);

            return View(dealer);
        }

        //
        // POST: /Edmunds/Edit/5

        [HttpPost]
        public ActionResult Edit(DealerTentSaleMVC.Models.DealersTemp.DealerHolder dealerholder)
        {
            if (ModelState.IsValid)
            {
                _repository.UpdateDealer(dealerholder);

                return RedirectToAction("Index");
            }
            return View(dealerholder);
        }

        //
        // GET: /Edmunds/Delete/5

        public ActionResult Delete(int id)
        {
            DealersTemp.DealerHolder dealer = _repository.ReadDealer(id);
            return View(dealer);
        }

        //
        // POST: /Edmunds/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            _repository.DeleteDealer(id);
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            base.Dispose(disposing);
        }
    }
} 
```

# javascript - 获取本地化的星期几

> ID：10763761
> 
> 赞同：19
> 
> 时间：2012-05-26T05:10:08.137
> 
> 标签：javascript, date, localization

我想在 JavaScript 中获取星期几的名称，本地化为用户当前的语言；最好使用比我现在使用的更好的东西：

```
var weekDays = [];
var d = new Date();

while(d.getDay() > 0) {
    d.setDate(d.getDate() + 1);
}

while(weekDays.length < 7) {
    weekDays.push(d.toLocaleDateString().match(/\w+/)[0]);
    d.setDate(d.getDate() + 1);
} 
```

是否有捷径可寻？还是我只需要为尽可能多的语言环境提供日期字符串？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-12-07T20:36:16.913

我使用`Date.toLocaleString()`，例如：

```
d = new Date();
d.toLocaleString(window.navigator.language, {weekday: 'long'}); 
```

或者

```
d.toLocaleString('sk-SK', {weekday: 'short'}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T05:37:16.233

看看 datejs，它很好地处理了本地化。它带有许多全球化设置。您只需加载当前 CultureInfo 的全球化设置，而 datejs 会负责其余的工作。

[Javascript 日期本地化](https://stackoverflow.com/questions/555353/javascript-date-localization)

# direct2d - Direct2D 中的像素

> ID：10763762
> 
> 赞同：12
> 
> 时间：2012-05-26T05:10:39.020
> 
> 标签：direct2d

![在此处输入图像描述](../Images/207b39febf3c2fe3fbed2f9f6759d98f.png)

深灰色线应该是黑色和 1 像素宽：

```
pRT->DrawLine(Point2F(100, 120), Point2F(300, 120), blackbrush, 1); 
```

浅灰色线应该是黑色和 0.5 像素宽：

```
pRT->DrawLine(Point2F(120, 130), Point2F(280, 130), blackbrush, 0.5); 
```

相反，它们都是 2 像素宽。如果我要求 2 像素宽，这条线是黑色的，但自然是 2 像素宽。

渲染目标与窗口的客户区大小相同。我想要像 GDI 中那样的像素精度，一个坐标 = 一个像素和纯色......

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-27T11:43:27.637

Direct2D 正在正确呈现。当你给它一个像素坐标比如 (100, 120) 时，它指的是像素元素的左上角，从像素坐标 (100, 120) 到 (101, 121) （包括上/左），右/下是排他的）。由于它是一条水平直线，因此您实际上得到了一个从 (99.5, 119.5) - (300.5, 120.5) 填充的矩形。由于该边缘溢出到相邻像素中，这就是为什么您在“错误”亮度下获得“2 像素宽度”线的原因。您必须考虑像素*坐标*（没有面积的点）和像素*元素*（屏幕上的物理点，面积为 1x1，或者当然只有 1）。

如果您想从像素 (100, 120) 到 (300, 120) 绘制一条直线，您应该使用 SemMike 的使用别名渲染的建议（这对直线非常有用！），或者您可以使用一半-像素偏移（因为 strokeWidth=1；对于其他 strokeWidths，按 strokeWidth/2 调整）。从 (100.5, 120.5) - (299.5, 120.5) 以 1.0 的笔划宽度绘制将得到你想要的东西。该笔画围绕您指定的像素坐标延伸，因此您将在像素元素 (100, 120) - (300, 121) 上获得“填充矩形”。再说一次，这是一个排他范围，所以 'y=121' 实际上并没有被填充，x=300 也没有。

如果你想知道为什么像 GDI 这样的东西不会发生这种情况，那是因为它不进行抗锯齿渲染，所以一切总是捕捉到像素元素。如果您想知道为什么 WPF 在使用 Shapes 时不会发生这种情况，那是因为它使用了布局舍入 (UseLayoutRounding) 和像素对齐。Direct2D 不提供这些服务，因为它是一个相对较低级别的 API。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T07:41:05.883

你可以玩弄`pRenderTarget->DrawLine(Point2F(100-0.5, 120-0.5), Point2F(300-0.5, 120-0.5), blackbrush, 1)`，但它很快就会变得棘手。最简单的是：

```
pRenderTarget->SetAntialiasMode(D2D1_ANTIALIAS_MODE_ALIASED); 
```

希望它可以帮助某人...

# python - Enthought 的 EPD 示例教程

> ID：10763766
> 
> 赞同：0
> 
> 时间：2012-05-26T05:11:16.493
> 
> 标签：python

我在 Enthought 上安装了 EPD，我正在根据@ [http://docs.enthought.com/chaco/quickstart.html](http://docs.enthought.com/chaco/quickstart.html)的说明尝试一些内置的 Chaco 示例。我在 IPython 解释器中遇到了 2 个 [新手] 问题：

1.

* * *

```
In [3]: python lines.py
  File "<ipython-input-3-75ced467f885>", line 1
    python lines.py
               ^
SyntaxError: invalid syntax 
```

* * *

无效的语法？

2.

* * *

```
In [6]: import lines
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
C:\Windows\system32\<ipython-input-6-8ce26194a7ce> in <module>()
----> 1 import lines

C:\Python27\lines.py in <module>()
      7
      8 from numpy import linspace, pi, sin, cos
----> 9 from chaco.shell import plot, hold, title, show
     10
     11 # Create some data

C:\Python27\chaco.py in <module>()
      1 import numpy as np
----> 2 from chaco.shell import *
      3
      4 x = np.linspace(-2*pi, 2*pi, 100)
      5 y = np.sin(x)

ImportError: No module named shell 
```

* * *

没有名为 shell 的模块？

我对此很陌生，并且在看到 Peter Wang 的 Pycon 2012 演示视频后想尝试这些示例。我非常感谢任何关于我做错了什么以及我能做些什么来让它发挥作用的帮助；我在快速搜索中没有在谷歌或类似网站上找到任何东西。

感谢您的时间。

奥利龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:18:20.090

**问题 1**：
在 ipython 中使用`run`而不是`python`.
ipython 提示符下的示例：

```
In [3]: run lines.py 
```

**问题 2**：
Python 正在尝试从*您的*文件中导入`shell`模块。 一个问题：这样的模块不存在。 要解决此问题，*请将您的*文件重命名为其他名称，例如 *`chaco.py`

*`chaco.py``my_chaco.py`**

# phpmyadmin - 使用密码访问拒绝 ROCALHOST 是

> ID：10763767
> 
> 赞同：0
> 
> 时间：2012-05-26T05:11:26.323
> 
> 标签：phpmyadmin

我对编程知之甚少，这意味着无论我学到什么，都是从 youtube 上学到的。所以为了解释我的问题，我写了所有的东西，所以当我得到回复时，我可以理解它。

首先我尝试下载 Apache、MySQL 和 phpMyAdmin，但没有成功。

之后我下载了 XAMPP 1.7.7

在 XAMPP 1.7.7 中，出于安全考虑，我提供了此信息。

**MYSQL 部分：“ROOT”密码（​​这一行已经作为标题）** **MYSQL 超级用户：root（它已经在那里，所以我无法更改）** 密码：bluebus PhpMyAdmin 身份验证：http 或 cokie（我选择了 cokie）安全文本文件中的纯密码？（（文件：C:\xampp\security\security\mysqlrootpasswd.txt）：有一个复选框我没有点击。

**XAMPP DIRECTORY PROTECTION (.htaccess)（此行已作为标题出现）**

用户：bus 密码：bluebuss 文本文件中的安全纯密码？（（文件：C:\xampp\security\security\mysqlrootpasswd.txt）：有一个复选框我没有点击。

*之后我去了 PHPMYADMIN* 用户：root 密码：redbus

我创建了一个数据库 DATABASE NAME: CAR 我为这个数据库添加了一个新用户 NEW USER NAME: CAR 和我再次提供的密码**"redbus"**，我创建了一个表

然后我在notepad++中新建了一个文件，代码是

```
<?php

define ('DB_NAME', 'car');
define ('DB_USER', 'car');
define ('DB_PASWORD', 'redbus');
define ('DB_HOST', 'localhost');

$link= mysql_connect (DB_HOST,DB_USER,DB_PASSWORD);

if (!$link) {
die ('could not connect:' . mysql_error () );
}

$db_selected=mysql_selected_db (DB_NAME, $link);

if (!$db_selected) {
die ('cant user' . ':' . mysql_error ());
}

$value = $_post ['input1'];

$sql= "INSERT INTO demo (input1) VALUES ('$value')";

if (!mysql_query ($sql)) {
die ('error:' . mysql_error () );
}

mysql_close ();
?> 
```

当我尝试运行它时，它给了我这个错误，我不明白为什么：

`**Notice:** *Use of undefined constant DB_PASSWORD - assumed 'DB_PASSWORD' in C:\xampp\htdocs\PhpProject1\index.php on line 8*`

`**[Warning:** *mysql_connect() [function.mysql-connect]: Access denied for user 'car'@'localhost' (using password: YES) in C:\xampp\htdocs\PhpProject1\index.php on line 8*`

`Could not connect: Access denied for user 'malakiarif'@'localhost' (using password: YES)`

请帮帮我，我试图通过谷歌搜索找出答案，浪费了我整整一周，但找不到答案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:13:24.327

您在第 4 行将“DB_PASSWORD”拼错为“DB_PASWORD”。

# css - twitter bootstrap 中“icon-home”的匹配颜色

> ID：10763768
> 
> 赞同：5
> 
> 时间：2012-05-26T05:11:26.530
> 
> 标签：css, colors, twitter-bootstrap

我正在尝试使用 twitter bootstrap 将主页图标的颜色与非活动文本的颜色相匹配，如下所示：

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <li class="nav_item"><a href="indexdefaults.html"><i class="icon-home icon-gray"></i>Home</a></li>
        <li class="active"><a href="about.html">About</a></li>
      </ul>
    </div>
  </div>
</div> 
```

但是“icon-gray”类比“nav_item”类中的文本要暗得多。与 nav_item 文本颜色匹配的适当类 icon-foobar 是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T11:49:55.713

您可以使用自定义样式获得灰色：

```
.icon-gray {
  opacity: 0.3;
} 
```

您可能必须根据黑色的重量将不透明度更改为更低或更高。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T13:21:16.130

图标只有两种变体，白色和深色，如果您想获得一组不同颜色的图标，您必须在 photoshop 中修改原始图标或支付完整的图标集并修改源文件。没有`.icon-gray`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T17:05:19.407

你为什么不直接集成：Font Awesome 可以很好地与 Bootstrap 一起工作而无需编辑图像，你可以像处理文本一样更改图标的颜色：

```
.icon-gray {color:#696969;} 
```

字体真棒： http: [//fortawesome.github.io/Font-Awesome/](http://fortawesome.github.io/Font-Awesome/)

查找 CSS 匹配颜色：[http ://www.w3schools.com/cssref/css_colornames.asp](http://www.w3schools.com/cssref/css_colornames.asp)

# android - 在 Gingerbread 及以下版本上是否有使用 NotificationBuilder 的兼容性库/方式？

> ID：10763772
> 
> 赞同：3
> 
> 时间：2012-05-26T05:12:12.763
> 
> 标签：android, notifications

我喜欢 NotificationBuilder 的易用性，并且需要经常更新我的通知。有没有办法可以在早期版本的 Android 上使用这个奇妙的类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T11:57:11.553

Android 支持包包含`NotificationCompat.Builder`，它提供了`Notification.Builder`用于 API 级别 4 和更高级别的反向移植。

# android - 在 Phonegap 中部署一个基于 Android 的项目

> ID：10763774
> 
> 赞同：0
> 
> 时间：2012-05-26T05:12:30.490
> 
> 标签：android, jquery-mobile, cordova

我使用 webview 和 Phonegap 在 Android 中构建了一个应用程序。我使用下面的代码添加了一个 Javascript 接口，以便我可以从 Javascript 调用 Helper.java 上的方法。虽然这在我使用 Android 部署应用程序时有效，但在我使用 PhoneGap 时它不起作用。

我正在将 Android 项目的 .zip 文件上传到 PhoneGap，然后通过 Phonegap 构建生成 .apk 文件。然而，正如我所说，这个应用程序由于某种原因没有连接到 Helper 类。我究竟做错了什么？？谢谢。

```
public class FinderApp extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.init();
        super.appView.getSettings().setJavaScriptEnabled(true);
        appView.addJavascriptInterface(new Helper(), "helper");
        super.loadUrl("file:///android_asset/www/index.html");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:15:08.783

关于您的问题的更多信息：Phonegap Build 除了 html (+js+css+resources..) 和 config.xml 文件之外，不会有任何期望。它不会对您的 .java 文件执行任何操作（此服务一次为所有输出操作系统构建）。

如果您希望 phonegap 构建使用您的特殊代码，则需要将其制成插件（请参阅其他答案中的链接），但是您还需要等待，因为现在构建服务只处理ChildBrowser 插件，而不是自定义插件：

> 目前，您无法将自己的插件提交到 PhoneGap Build 并将它们包含在我们的系统中。我们正在对基础设施进行更改以提供这种支持。

请参阅[此页面](https://build.phonegap.com/docs/plugins)了解更多信息。

I'm afraid if you want to compile your code, you'll need to do without Phonegap Build for the moment and [compile it yourself](http://wiki.phonegap.com/w/page/16494774/Getting%20started%20with%20Android%20PhoneGap%20in%20Eclipse).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:07:25.213

把你的 Helper.Java 变成一个[Phonegap 插件](http://wiki.phonegap.com/w/page/36753496/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20iOS)。

# html - 推杆 里面 正在添加一个额外的

> ID：10763780
> 
> 赞同：74
> 
> 时间：2012-05-26T05:13:36.620
> 
> 标签：html

来自[http://webdesign.about.com/od/htmltags/p/aadivtag.htm](http://webdesign.about.com/od/htmltags/p/aadivtag.htm)

> 在 HTML 4 中，DIV 元素不能位于另一个块级元素中，例如 P 元素。但是，在 HTML5 中，可以在其中找到 DIV 元素，并且可以包含其他流内容元素，例如 P 和 DIV。

我在表格中有这样的东西

```
<p> <label...> <input...> </p> 
```

但是当 Rails 自动生成一个包装输入的 error_explanation div 时，一个段落变成了两个，我在 Firebug 中看到了这一点：

```
<p> <label...> </p> <div...> <input...> </div> <p> </p> 
```

另外，如果我只是添加一个简单的

```
<p> <div> test </div> </p> 
```

发生同样的问题（[JSFiddle](http://jsfiddle.net/cod0j53q/)），它在 DOM 中呈现为

```
<p> </p> <div> test </div> <p> </p> 
```

为什么？

**更新：**我给这篇文章的作者发了电子邮件，她做了适当的修改。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-05-26T05:51:14.573

从[精细规范](https://w3.org/tr/html/grouping-content.html#the-p-element)：

> **p——段落**
> 
> [...]
> 
> **允许的内容**
> 
> 措辞内容

这个*短语内容*是什么？[造句内容](https://w3.org/tr/html/dom.html#phrasing-content)：

> 由与*普通字符数据*混合的*短语元素*组成。

 **普通字符数据*就是这样：未标记的文本。[*短语元素*](http://www.w3.org/TR/html-markup/common-models.html#common.elem.phrasing)是：

> *a*或*em*或*strong* ... [一堆其他元素都不是*div* ]

因此，`<p><div></div></p>`不是有效的 HTML。根据规范中列出的标签省略规则，`<p>`标签会自动被`<div>`标签关闭，从而使`</p>`标签没有匹配的`<p>`. `<p>`浏览器完全有权通过在 : 之后添加一个打开标记来尝试更正它`<div>`：

```
<p></p><div></div><p></p> 
```

您无法将 a`<div>`放入 a`<p>`并从各种浏览器中获得一致的结果。为浏览器提供有效的 HTML，它们会表现得更好。

你可以放在`<div>`里面，`<div>`所以如果你替换你`<p>`的`<div class="p">`并适当地设置它，你可以得到你想要的。

您在 about.com 上的参考与 w3.org 上的规范不一致，您的参考在误导您。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-10-18T10:15:40.833

虽然这是一个相当老的问题，但我想我会分享我对这个问题的解决方案，以帮助其他可能在谷歌上偶然发现这个页面的人。

如前所述，不允许将块元素放在 p-tag 中。然而，在实践中，这实际上并不完全正确。实际显示值实际上完全无关；唯一需要考虑的是标签的*默认*显示值，例如 div 的“block”和 span 的“inline”。更改显示值仍然会使浏览器过早关闭 p-tag。

然而，这也适用于相反的方式。您可以设置 span-tag 的样式，使其行为与 div-tag 完全相同，但它仍将在 p 环境中被接受。

所以不要这样做：

```
<p>
   <div>test</div>
</p> 
```

你可以这样做：

```
<p>
   <span style="display:block">test</span>
</p> 
```

请记住，浏览器会递归地验证 p 环境的内容，所以即使是这样的：

```
<p>
   <span style="display:block">
       <div>test</div>
   </span>
</p> 
```

将导致以下结果：

```
<p>
   <span style="display:block"></span>
</p>
<div>test</div>
<p>
</p> 
```

希望这会帮助那里的人:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-26T06:54:44.830

webdesign.about.com 页面完全是错误的；他们可能误解了 HTML5 草案。在 P 中允许 DIV 会造成很大的混乱；我认为在 HTML5 开发过程中从未考虑过它。

如果您尝试在 P 中使用 DIV，则 DIV 开始标记将隐式关闭 P 元素。这可能解释了你所看到的事情。

为避免此问题，如果内容包含或可能包含 DIV 元素，请不要使用 P。请改用 DIV。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-29T08:38:29.980

`<div>`将元素放在`<p>`DOM 中的a 内是不可能的，因为开始`<div>`标签会自动关闭`<p>`元素。

`<P>`不允许其中的其他元素。only`<span>`和`<strong>`element allowed.In`<p></p>`我们只能添加与文本相关的标签。 [请参阅此链接以了解更多信息](https://www.w3.org/TR/html4/sgml/dtd.html)*

# bash - Bash Loop 和退出状态检查

> ID：10763781
> 
> 赞同：1
> 
> 时间：2012-05-26T05:13:38.353
> 
> 标签：bash, loops, exit-code

一个数组保存访问的文件，归档文件被分割成更小的大小，为在线备份做准备。我试图通过 split 命令的循环检索每次迭代的退出代码。但是，它正在返回`Exit Code 1`，但它说操作成功。为什么？

```
#!/bin/bash
declare -a SplitDirs
declare -a CFiles
CDIR=/mnt/Net_Pics/Working/Compressed/
SDIR=/mnt/Net_Pics/Working/Split/
Err=/mnt/Net_Pics/Working
SplitDirs=(`ls -l "$CDIR" --time-style="long-iso" | egrep '^d' | awk '{print $8}'`)
for dir in "${SplitDirs[@]}"
do
  if [ ! -d "$SDIR""$dir" ]; then
mkdir "$SDIR""$dir"
  else continue
  fi
CFiles=(`ls -l "$CDIR$dir" --time-style="long-iso" | awk '{print $8}'`)
  for f in "${CFiles[@]}"
  do
  if [ ! -e "$SDIR""$dir"/"$f" ]; then 
    split -d -a 4 -b 1992295 "$CDIR""$dir"/"$f" "$SDIR""$dir"/"$f" --verbose
    if [[ "$?" == 1 ]]
    then
      rm -rf "$SDIR""$dir" && echo "$SDIR""$dir" "Removed due to Error code" "$?""." "Testing Archives and Retrying..." 2>&1 | tee "$Err"/Split_Err.log
      7z t "$CDIR""$dir"/"$f" >> tee stdout.log 2>> "$Err"/"$dir"/7z_Err.log >&2
      mkdir "$SDIR""$dir" && split -d -a 4 -b 1992295 "$CDIR""$dir"/"$f" "$SDIR""$dir"/"$f" --verbose
       if [[ "$?" == 1 ]]
       then
          rm -rf "$SDIR""$dir" && echo "$SDIR""$dir" "Removed a second time due to Error code "$?". Skipping..." 2>&1 | tee "$Err"/Split_Err.log
          continue
       else
          echo "Split Success:" "$SDIR""$dir"/"$f" "ended with Exit status" "$?" && continue
       fi
    else
      echo "Split Success:" "$SDIR""$dir" "ended with Exit status" "$?" && continue
    fi 
  else
    echo "$SDIR""$dir"/"$f" "Exists... Skipping Operation" 2>&1 | tee "$Err"/"$dir"/Split_Err.log
    continue
  fi
  done 
```

（问题的先前版本中的回声管道是错误的代码，感谢您指出这一点。退出代码保持不变。总的来说，除了退出代码部分之外，脚本执行我想要的操作。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:18:40.890

删除`| echo $?`. 您正在处理`echo`命令（最后一个命令）的返回码。

# android - 在android中旋转视频

> ID：10763782
> 
> 赞同：0
> 
> 时间：2012-05-26T05:14:24.140
> 
> 标签：android, video, rotation

我的源代码是应用程序来介绍当我们旋转他们的设备时可以旋转的视频。因为我必须剪辑一幅肖像一幅风景。但我不知道当用户选择我的应用程序时自动实现 onConfigurationChange。你能帮我解决问题吗？

```
 package nahu.jl.intro;

import android.app.Activity;
import android.content.res.Configuration;
import android.graphics.PixelFormat;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

public class Nahu_videoIntroActivity extends Activity {
    /** Called when the activity is first created. */
    VideoView videoHolder;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getWindow().setFormat(PixelFormat.TRANSLUCENT);
        videoHolder = (VideoView) findViewById(R.id.myvideoview);
        // set controller for video
        String sdCard=Environment.getExternalStorageDirectory().getPath();
        videoHolder.setMediaController(new MediaController(this));
        Toast.makeText(Nahu_videoIntroActivity.this, sdCard, Toast.LENGTH_SHORT).show();
        // get path to video from 

//      // start video

    }
    /* (non-Javadoc)
     * @see android.app.Activity#onConfigurationChanged(android.content.res.Configuration)
     */
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);
        if(newConfig.orientation==Configuration.ORIENTATION_PORTRAIT){
            Uri videoUri = Uri.parse("android.resource://nahu.jl.intro/raw/intro2");
            // set url to Video
            videoHolder.setVideoURI(videoUri);
             videoHolder.requestFocus();
            // start video
            videoHolder.start();

        }
        else{
            Uri videoUri = Uri.parse("android.resource://nahu.jl.intro/raw/intro1");
            // set url to Video
            videoHolder.setVideoURI(videoUri);
             videoHolder.requestFocus();
            // start video
            videoHolder.start();

        }
    }
    //
    public void onCompletion(MediaPlayer mp) {
        finish();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:19:44.873

在清单文件的活动标签中使用它

```
 <activity android:name=".VideoActivity" android:label="" android:theme="@android:style/Theme.Translucent.NoTitleBar" android:screenOrientation="sensor" android:configChanges="orientation"/> 
```

# android - Android app sqlite 数据库无法转储到 android mobile

> ID：10763804
> 
> 赞同：0
> 
> 时间：2012-05-26T05:21:55.420
> 
> 标签：android, sqlite

我在 sqlite 数据库中创建了数据库和表，之后我可以使用文件探索将数据库带到外部。然后我再次将一些值插入表中，我将数据库粘贴到文件探索中的相同位置。如果我在模拟器中运行，则意味着它从 sqlite 获取数据并在 android mobile 中填充 listview。之后，我在移动设备中放入的同一个应用程序意味着它不能使用 sqlite 数据库。我认为在安装我的应用程序时，sqlite 数据库无法转储到移动设备上。请告诉我解决方案如何解决？

```
 This my database class

public Cursor queueAll() {
    String[] columns = new String[] { KEY_ID, KEY_CONTENT };
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, null,
            null, null, null, null);

    int id = cursor.getColumnIndex(KEY_CONTENT);
    cursor.moveToFirst();
    if (cursor != null) {
        do {
            String keyid = cursor.getString(id);
            System.out.println(keyid);
        } while (cursor.moveToNext());
    }

    return cursor;
}

private static class SQLiteHelper extends SQLiteOpenHelper {

    public SQLiteHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(apptable);
        db.execSQL(souptable);
        db.execSQL(vegtable);
        db.execSQL(ricetable);
        db.execSQL(desserttable);
        db.execSQL(FoodMenutable);
        db.execSQL(SCRIPT_CREATE_DATABASE);
        db.execSQL(DATABASE_CREATE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

}

public long AddUser(String username, String password) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_USERNAME, username);
    initialValues.put(KEY_PASSWORD, password);
    return sqLiteDatabase.insert(DATABASE_TABLE, null, initialValues);

}

public boolean Login(String username, String password) {
    // TODO Auto-generated method stub
    Cursor mCursor = sqLiteDatabase.rawQuery("SELECT * FROM "
            + DATABASE_TABLE + " WHERE username=? AND password=?",
            new String[] { username, password });
    if (mCursor != null) {
        if (mCursor.getCount() > 0) {
            return true;
        }
    }
    return false;
}

  } 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:29:57.497

使用您的应用程序在您的数据库中手动输入数据，因为您无法从 android mobile 修改或导入您的应用程序的数据库。

# javascript - 从级联 SELECT 元素更改事件调用外部 JS 函数

> ID：10763807
> 
> 赞同：0
> 
> 时间：2012-05-26T05:22:32.927
> 
> 标签：javascript, jquery, model-view-controller

我是这里的 jQuery 菜鸟，我想弄清楚如何将此脚本移动到外部 .js 文件。我已经尝试复制它并在页面上引用，但它似乎不起作用。

我在这里想念什么？

```
<script type="text/javascript">
$(document).ready(function () {
    $('#YearD').change(function () {
        var selectedYear = $(this).val();
        if (selectedYear != null && selectedYear != '') {
            $.getJSON('@Url.Action("Months")', { year: selectedYear }, function (months) {
                var monthsSelect = $('#Month');
                monthsSelect.empty();
                $.each(months, function (index, month) {
                    monthsSelect.append($('<option/>', {
                        value: month.value,
                        text: month.text
                    }));
                });
            });
        }
    });
});
</script>

<script type="text/javascript">
$('#Month').change(function () {
    var selectedMonth = $(this).val();
    if (selectedMonth != null && selectedMonth != '') {
        $.getJSON('@Url.Action("Days")', { month: selectedMonth }, function (days) {
            var daysSelect = $('#Day');
            daysSelect.empty();
            if (days == 0) {
                daysSelect.css("visibility", "hidden");
            }
            else {
                daysSelect.css("visibility", "visible");
            }
            $.each(days, function (index, day) {
                daysSelect.append($('<option/>', {
                    value: day.value,
                    text: day.text
                }));
            });
        });
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:26:29.497

将此添加到您希望代码运行的页面：

```
<script src="js_file_name.js"></script> 
```

然后将您的代码直接复制并粘贴到一个名为`js_file_name.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:26:53.020

从外部文件中删除`<script type="text/javascript">`和。`</script>`

将此添加到您的 HTML 文件中：

```
<script type="text/javascript" src="filename.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T06:01:33.143

如果你有，

```
<script type="text/javascript">
$(document).ready(function () {
   // your code
}) 
```

你应该做，

```
<script type='text/javascript' src='scripts/myfile.js'></script> 
```

在你的 html 文件中。

在您的 myfile.js 文件中（位于`scripts`文件夹中）

```
$(document).ready(function () {
   // your code
}) 
```

注意 myfile.js 文件中没有`<script>`标签。

另外，请记住您的代码正在使用`jQuery`，因此请`myfile.js`在参考`jQuery.js`文件后参考您的代码。

例如

```
<script type='text/javascript' src='scripts/myfile.js'></script>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script> 
```

另外，将您的代码放在`$(document).ready`. 您的第二个代码在 dom 准备好之前执行并且会抛出错误。

它应该是这样的（在你的 myfile.js 中）

```
$(document).ready(function () {
    $('#YearD').change(function () {
        var selectedYear = $(this).val();
        if (selectedYear != null && selectedYear != '') {
            $.getJSON('@Url.Action("Months")', { year: selectedYear }, function (months) {
                var monthsSelect = $('#Month');
                monthsSelect.empty();
                $.each(months, function (index, month) {
                    monthsSelect.append($('<option/>', {
                        value: month.value,
                        text: month.text
                    }));
                });
            });
        }
    });
    $('#Month').change(function () {
    var selectedMonth = $(this).val();
    if (selectedMonth != null && selectedMonth != '') {
        $.getJSON('@Url.Action("Days")', { month: selectedMonth }, function (days) {
            var daysSelect = $('#Day');
            daysSelect.empty();
            if (days == 0) {
                daysSelect.css("visibility", "hidden");
            }
            else {
                daysSelect.css("visibility", "visible");
            }
            $.each(days, function (index, day) {
                daysSelect.append($('<option/>', {
                    value: day.value,
                    text: day.text
                }));
            });
        });
        }
    });

}); 
```

# mysql - SQL INSERT INTO 选择

> ID：10763808
> 
> 赞同：2
> 
> 时间：2012-05-26T05:22:34.243
> 
> 标签：mysql, sql, select, insert

目前使用 MySQL 数据库

`table (t_2)`想要为我的 where 条件中的每个匹配条目插入一个新行`table (t_1)`。

我还想为每个条目包含一个单独的表中的计数值（来自表计数器的计数）和每个条目的字符串值“减少”。不知道如何解决这个问题，这就是我目前所拥有的：

```
INSERT INTO t_2(count,id,val='decrease')
SELECT MAX(count) as count FROM counter
SELECT id FROM t_1 WHERE val < 0 
```

我得到的错误是：

> > 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '='decrease' 附近使用正确的语法） SELECT count FROM counter SELECT id FROM t_1 WHERE val < 0' at line 1

我知道我可能不应该有，`val='decrease'`但只是想说明我希望它是为每个新行插入的字符串值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:26:10.007

试试这个：

```
INSERT INTO t_2 (count,id,val) 
SELECT 
    (SELECT MAX(count) FROM counter),
    t1.id, 
    'decrease'
FROM t_1 
WHERE val < 0, 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T05:26:38.063

这是你要找的吗？

```
INSERT INTO t_2(count,id,val)
    SELECT (SELECT MAX(count) as count FROM counter) as count, id, 'decrease' as val
    FROM t_1
    WHERE val < 0 
```

# c++ - 输入整数的最快方法

> ID：10763809
> 
> 赞同：-6
> 
> 时间：2012-05-26T05:22:47.683
> 
> 标签：c++, c

通过终端（不是文件...：P）从用户获取整数输入的最快方法（代码）是什么。

PS 1：整数的大小很小（在 int 的大小内），但整数的总数非常大。
PS 2: Scanf toooo...慢
PS 3: 忘记人的限制，谈谈技术......请

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T05:28:15.503

我认为基于此的方法`scanf`将很难被击败。无论如何，这将很容易实现。所以我会从这个开始，如果它还不够，在尝试其他任何东西之前先进行基准测试。

如果输入由空格分隔的整数组成：

```
scanf("%d ", &input) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:39:43.673

对于连续输入处理，你可以试试这个

```
while( scanf("%d ", &val) == 1)
{
    // processing : do what you want 
} 
```

您也可以将其用于文件输入读取 ( `fscanf`)

# objective-c - 检查数组中的项目而不循环

> ID：10763812
> 
> 赞同：2
> 
> 时间：2012-05-26T05:24:10.070
> 
> 标签：objective-c, cocoa

我有一个数组，我想检查一个字符串是否在数组中，而不是循环。只需使用“if's”，我就知道数组中是否存在某个字符串。

有没有可能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T05:37:16.717

使用[`-[NSArray containsObject:]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/containsObject%3a).

（您不必自己编写循环，但当然 NSArray 几乎肯定必须在内部使用循环。）

```
if ([array containsObject:string])
    NSLog(@"Yes, the array contains my string.") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:37:03.690

关于什么

```
if ([yourArray containsObject:@"string"]) {

} 
```

??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T05:38:05.160

```
NSarray *theArray; // assume exists
if ( [theArray containsObject:someString] )
{
    ...
} 
```

# python - Python 自定义 GUI

> ID：10763814
> 
> 赞同：1
> 
> 时间：2012-05-26T05:24:42.977
> 
> 标签：python, user-interface

在问这个问题之前，我用谷歌搜索了 stackoverflow

我没想到的答案：

*   wxWidgets 是最好的 Python GUI*   使用 TkInter (BIM) 进行 GUI 开发。Q. 如何在不使用任何模块/库的情况下制作 GUI？即从头开始制作一个GUI。不允许使用 tkinter 之类的模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T06:53:44.033

我使用[SDL](http://www.libsdl.org/)这是一个低级绘图库，从头开始制作了几个 GUI。这样做的好处是它在任何平台上看起来都完全相同，直到像素，你可以让它在嵌入式系统上工作。全屏 GUI 也非常简单。缺点是工作量很大。

在 python 中，[pygame](http://www.pygame.org/wiki/about)库包装了 SDL，因此您可以使用它，事实上，这就是我为具有大型彩色 LCD 屏幕的实验室仪器制作 GUI 的方式。控制器运行 linux，但不是 X-windows。

pygame 是一个额外的库，是的，但我想不出一种只用 python 提供的东西来制作 GUI 的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:27:32.350

没有“模块/库”的最简单的 GUI 是基于 Web 的。即从您的 Python 代码中使用 Javascript 生成 HTML，并让 Javascript 通过 AJAX 与您的 Python 应用程序交互。这可以通过标准 Python 库（当然还有一些 JS 代码）或不需要“大量”安装特定于平台的扩展的模块来实现，而无需太多努力。

# c - c 中的运算符优先级与 %,!=,= 和 ','

> ID：10763817
> 
> 赞同：2
> 
> 时间：2012-05-26T05:25:43.730
> 
> 标签：c

在下面的代码片段中

```
int jo=50;
if( jo =(rand()%100), jo!=50)
{
    printf("!50");
} 
```

1.  % 具有最高优先级，因此 rand()%100 将首先执行
2.  != 的优先级大于 = 所以 jo != 50 应该得到执行吗？
3.  , 当我先执行赋值然后 != 然后 , 时，优先级仍然最低。我得到一个输出！50 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:29:16.530

问题是“序列点”：

> [http://www.angelikalanger.com/Articles/VSJ/SequencePoints/SequencePoints.html](http://www.angelikalanger.com/Articles/VSJ/SequencePoints/SequencePoints.html)
> 
> **有问题的与安全的表达**
> 
> 是什么导致赋值 x[i]=i++ + 1; 一个有问题的，而分配 i=2；是无害的，因为它的结果是明确定义和可预测的？关键在于表达式 x[i]=i++ + 1; 对变量 i 有两种访问，其中一种访问，即 i++，是一种修改访问。由于未定义序列点之间的评估顺序，我们不知道是否会在读取 i 之前对其进行修改，或者是否会在修改之前对其进行读取。因此，如果访问是修改，则问题的根源是对序列点之间的变量的多次访问。
> 
> 这是另一个例子。如果在执行语句之前 i 和 j 的值分别为 1 和 2，这里会发生什么？
> 
> ```
> f(i++, j++, i+j); 
> ```
> 
> 哪个值将作为第三个参数传递给函数 f？再说一次，我们不知道。它可以是以下任何一种：3、4 或 5。它取决于计算函数参数的顺序。
> 这里常见的误解是参数将从左到右进行评估。或者也许从右到左？事实上，语言定义没有规定任何顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T05:36:54.677

优先级不*控制*执行顺序。优先级只控制分组——也就是说，优先级说明每个操作的操作数是*什么*，而不是每个操作*发生*的时间。

在此示例中，由于括号的原因， 的优先级`%`无关紧要 - 这些表示 的操作数`%`是`rand()`和`100`。

`,`低于`=`and的优先级`!=`告诉我们，操作数`=`是`jo`and `(rand()%100)`，并且操作数`!=`是`jo`and `50`。

的操作数`,`是 then`jo = (rand() % 100)`和`jo != 50`。

运算符的定义`,`说，第一个操作数被求值，然后有一个序列点，然后第二个操作数被求值。所以这种情况，`jo = (rand() % 100)`是完全评估的，它将结果存储`rand() % 100`到`jo`; 然后`jo != 50`被评估。整体表达式的值是 的值`jo != 50`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T05:37:15.263

好吧，序列点是正确的答案。但是让我们从教科书中翻译。

逗号运算符有一个特殊的属性：它确保首先评估其左侧的内容。所以，当你到达表达式时

```
 jo =(rand()%100), jo!=50 
```

*即使*`!=` *绑定*比 ',' 更紧密，所以完全括起来的表达式是

```
 (jo =(rand()%100)),(jo!=50) 
```

首先*评估*第一部分。

要记住这一点，您可以将逗号运算符发音或读为“然后”，所以

```
 j0=(rand()%100) 
```

“进而”

```
 jo!=50. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-26T05:35:58.843

将“优先级”视为“先完成”是错误的。

考虑以下代码片段：

```
f() + g() + h() 
```

哪个具有加法运算的优先级更高，一个是 f() 和 g() 的结果相加，还是那个和 h() 的结果相加？

这是一个棘手的问题，因为根本不需要调用“优先级”。但是仍然存在操作顺序，因为 C 中的函数调用引入了“序列点”，这就是 C 允许您确定“何时发生什么”的方式。

在您的特定代码中，您有一个逗号运算符 - 这与函数参数中的逗号标点符号完全不同 - 在这部分：

```
jo = (rand() % 100), jo != 50 
```

逗号运算符引入了一个序列点（就像对 的函数调用一样`rand`），因此我们知道`rand`运行并产生一个值，然后`% 100`计算该值并将其分配给`jo`，最后`jo`与 进行比较`50`。

（在评估控制表达式之后还有一个序列点`if`，并且在每个语句结束分号处都有一个。）

# regex - * 和 + 正则表达式之间的区别

> ID：10763820
> 
> 赞同：29
> 
> 时间：2012-05-26T05:25:50.867
> 
> 标签：regex

谁能告诉我下面示例中的`*`和`+`运算符之间的区别：

`[<>]+` `[<>]*`

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-26T07:17:19.437

它们中的每一个都是量词，星号量词（`*`）表示前面的表达式可以匹配零次或多次，就像`{0,}`加号量词（`+`）表示前面的表达式必须匹配至少一次或多次并且相同作为`{1,}`.

回顾一下：

```
a*  ---> a{0,}  ---> Match a or aa or aaaaa or an empty string
a+  ---> a{1,}  ---> Match a or aa or aaaa but not a string empty 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-26T05:27:33.830

`*`表示零个或多个，并`+`表示一个或多个。所以不同之处在于空字符串将匹配第二个表达式而不是第一个。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-26T05:27:33.833

`+`表示**一个或多个**先前的原子。( `{1,}`)

`*`表示**零个或多个**。除了方括号表达式中指定的字符之外，这不能匹配任何内容。( `{0,}`)

请注意，`+`它在扩展和 Perl 兼容的正则表达式中可用，但在 Basic RE 中不可用。 `*`在所有三种 RE 方言中都可用。您使用的方言很可能取决于您使用的语言。

几乎，现代操作系统中唯一仍然默认使用 BRE 的东西是`grep`and `sed`（两者都具有 ERE 功能作为选项）和 non-vim `vi`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-26T05:31:18.527

它们是量词。

*   `+`表示**1 个或多个**（匹配成功至少出现一次）
*   `*`表示**0 或多个**（匹配成功，无论搜索字符串是否存在）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-26T05:32:44.380

`*`表示前一个表达式的零个或多个。

换句话说，表达式是可选的。

你可以像这样定义一个整数：

`-*[0-9]+`

换句话说，一个可选的负号后跟一个或多个数字。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-26T05:30:48.963

`[<>]+`和`[<>][<>]*`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-04T17:12:16.163

我将举一些例子来扩展上面的答案。让我们有一个文本：

```
100test10
test10
test 
```

如果我们写`\d+test\d+`，这个表达式匹配`100test10`并且匹配`test10`其中`\d*test\d*`三个

# python - 为什么我的密码函数（python）出现错误？

> ID：10763827
> 
> 赞同：1
> 
> 时间：2012-05-26T05:26:39.290
> 
> 标签：python, design-patterns, encode, encryption

这是我的代码：

```
def encode(pattern, filename):
  pattern = ['a','e','s','3']
  message = open(filename, 'r+')
  for letter in message:
      if letter == pattern[0]: 
        letter == pattern[1]

      elif letter == pattern[1]:
        letter == pattern[0]

      elif letter == pattern[2]:  
        letter == pattern[3]

      else:
        continue

  message.close() 
```

代码中可能存在一些缺陷，因为我只是 python 的业余爱好者，但是当我运行该函数时，文件保持不变。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:32:12.193

`==`和之间有区别`=`。`==`用于测试两个对象或原语是否相同，`=`用于为对象或原语赋值。

尝试进行以下更改：

```
for letter in message:
      if letter == pattern[0]: 
        letter = pattern[1] ## <-- change
      elif letter == pattern[1]:
        letter = pattern[0] ## <-- change
      elif letter == pattern[2]:  
        letter = pattern[3] ## <-- change
      else:
        continue 
```

但这只是分配一个值`letter`，将在循环的下一次迭代中更改该值，您真正想要做的是写入其他文件或回写`message`（但这可能很危险，因为您正在读取它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T05:50:06.423

I. 除非我弄错了，否则您实际上并没有`r+`通过分配`letter`. 您仍然需要使用`write`实际对文件进行更改。

二、您可能对以下内容感兴趣`string.translate`：

```
In [112]: t = string.maketrans('abc', 'bad')

In [115]: s = 'abcdef'

In [116]: s.translate(t)
Out[116]: 'baddef' 
```

# java - (isUserInRole()) 是将用户权限/安全性附加到 JSF 按钮的最简单方法吗？

> ID：10763828
> 
> 赞同：8
> 
> 时间：2012-05-26T05:26:40.863
> 
> 标签：java, jsf, servlets, jsf-2, declarative-security

我最近在 JSP 中开发了一个 tomcat Web 应用程序，它使用与公司的 Active Directory 相关联的声明性安全性 (server.xml/web.xml)。我被要求为这个刚刚起步的项目添加 JSF 支持。将登录表单转换为jsf是一件简单的事情，并且安全模型仍然有效。

一位同事问我是否可以允许更广泛的受众查看其中一个报告，但只为较小的群体呈现操作按钮。作为 JSF 的新手，我不得不做一些研究。

我花了大约四个小时在谷歌上搜索诸如“jsf 按钮安全”和“jsf 按钮权限”之类的东西，并尝试了各种建议，但这些建议大多是死胡同。另一位同事建议使用 Spring 安全模型，但如果有更简单的方法，我不想处理一大堆 Spring 库。

最终，我偶然发现了答案，这非常简单。我只需要使用 HttpServletRequest 方法：isUserInRole() 来确定当前登录的用户是否有权查看操作按钮。在过去的十年里，我经常使用 HttpServletRequests，但我不记得曾经学习过这种方法。有了jsf，到那个方法就很简单了，如下图：

```
public boolean isUserInRole(String role) {
    return (FacesContext.getCurrentInstance().getExternalContext().isUserInRole(role));
} 
```

我的问题具体是：关于这种方法我应该注意什么问题，还有另一种更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:32:27.000

如果您使用 Tomahawk 作为 JSF 实现的插件，那么大多数控件都有一个 visibleOnUserRole 属性。您可以在值中使用多个角色名称。

# java - 如何使用 VBO 在 LWJGL 中渲染纹理？

> ID：10763831
> 
> 赞同：-1
> 
> 时间：2012-05-26T05:26:50.853
> 
> 标签：java, opengl, lwjgl, vbo

我正在使用轻量级 Java 游戏库来尝试制作 BrickBreaker 类型的游戏。我为砖块制作了一个非常简单的 16x16 png 纹理 - 我知道如何使用立即模式渲染纹理，但是如何使用顶点缓冲区对象 (VBO)，甚至只是顶点数组来完成它？请给我所有代码，从生成句柄和数据到渲染。万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:51:17.530

传递纹理坐标的方式与传递顶点坐标的方式相同。所以而不是

```
gl顶点指针
```

你写

```
glTexCoordPointer
```

# javascript - 警报（””）; 使用 PhoneGap 和 jQuery 的函数

> ID：10763833
> 
> 赞同：0
> 
> 时间：2012-05-26T05:27:14.693
> 
> 标签：javascript, jquery, html, jquery-mobile, cordova

使用 jQuery Mobile，我希望在用户打开页面时显示警报

```
<div data-role="page" id="page3">
    <div data-role="header">
        <h1>Page Three</h1>
    </div>
    <div data-role="content">   
        <script>alert('How are you');</script>  
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div> 
```

但是上面的代码显示了应用程序启动时的警报，当我打开页面时它什么也不做。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:34:30.027

像这样做。假定此 div 在页面加载后加载。

使用 div Id 访问。

```
$('#page3').load(function() {
    alert("loaded....");
}); 
```

使用 div 类访问。

```
$('.page').load(function() {
    alert("loaded....");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:53:39.120

试试这个

```
<script>
    $("div[data-role=content]").eq(0).ready(function() {
        alert('How are you');
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T08:03:37.950

使用 jQueryMobile，有[特定的事件](http://jquerymobile.com/test/docs/api/events.html)可以知道页面何时加载。

您应该尝试以下操作（将其放在您的 head 元素中，在 body 之前）：

```
<script>
$('#page3').live('pageshow', function() {
   alert('Page ' + $(this).attr('id') + ' about to be shown');
});
</script> 
```

您也可以处理“pagebeforeshow”/“pagecreate”事件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T09:48:47.943

在`<head>`您的页面部分放置以下内容：

```
<script>
    $(document).on('pageshow','#page3',function(){
        alert('How are you');
    });
</script> 
```

**注意：** .live() 方法已被弃用。有关原因的更多详细信息，请参阅[文档](http://api.jquery.com/live/)。.on() 方法也是首选，但需要您使用 jQuery 1.7+。如果您是 jQuery 1.7 之前的版本，请改用委托。

```
<script>
    $(document).delegate('#page3','pageshow',function(){
        alert('How are you');
    });
</script> 
```

# rsa - SSL 中的 RSA 算法

> ID：10763838
> 
> 赞同：0
> 
> 时间：2012-05-26T05:28:10.433
> 
> 标签：rsa

我想知道RSA的解释，这里是例子

```
Select primes: p=17 & q=11
Compute n = pq =17×11=187
Compute ø(n)=(p–1)(q-1)=16×10=160
Select e : gcd(e,160)=1; choose e=7
Determine d: de=1 mod 160 and d < 160 Value is d=23 since 23×7=161= 10×160+1
Publish public key KU={7,187}
Keep secret private key KR={23,17,11} 
```

看看上面写的素数，我怎么知道这些素数是从哪里生成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:30:36.687

这些素数可以通过 RSA 算法随机生成。在这个例子中它们非常小，但在现实生活中它们会非常非常大。该算法在生成素数时还会采取一些其他预防措施。例如，p 和 q 不应该彼此靠近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T03:58:41.640

这是实现 RSA 的代码

```
try out this code

/*Arpana*/

#include<stdio.h> 
#include<conio.h> 
#include<stdlib.h> 
#include<math.h> 
#include<string.h> 

long int p,q,n,t,flag,e[100],d[100],temp[100],j,m[100],en[100],i; 
char msg[100]; 
int prime(long int); 
void ce(); 
long int cd(long int); 
void encrypt(); 
void decrypt(); 
void main() 
{ 
clrscr(); 
printf("\nENTER FIRST PRIME NUMBER\n"); 
scanf("%d",&p); 
flag=prime(p); 
if(flag==0) 
{ 
    printf("\nWRONG INPUT\n"); 
    getch(); 
    exit(1); 
} 
printf("\nENTER ANOTHER PRIME NUMBER\n"); 
scanf("%d",&q); 
flag=prime(q); 
if(flag==0||p==q) 
{ 
    printf("\nWRONG INPUT\n"); 
    getch(); 
    exit(1); 
} 
printf("\nENTER MESSAGE\n"); 
fflush(stdin); 
scanf("%s",msg); 
for(i=0;msg[i]!=NULL;i++) 
m[i]=msg[i]; 
n=p*q; 
t=(p-1)*(q-1); 
ce(); 
printf("\nPOSSIBLE VALUES OF e AND d ARE\n"); 
for(i=0;i<j-1;i++) 
printf("\n%ld\t%ld",e[i],d[i]); 
encrypt(); 
decrypt(); 
getch(); 
} 
int prime(long int pr) 
{ 
int i; 
j=sqrt(pr); 
for(i=2;i<=j;i++) 
{ 
    if(pr%i==0) 
    return 0; 
} 
return 1; 
} 
void ce() 
{ 
int k; 
k=0; 
for(i=2;i<t;i++) 
{ 
    if(t%i==0) 
    continue; 
    flag=prime(i); 
    if(flag==1&&i!=p&&i!=q) 
    { 
        e[k]=i; 
        flag=cd(e[k]); 
        if(flag>0) 
        { 
            d[k]=flag; 
            k++; 
        } 
        if(k==99) 
        break; 
    } 
} 
} 
long int cd(long int x) 
{ 
long int k=1; 
while(1) 
{ 
    k=k+t; 
    if(k%x==0) 
    return(k/x); 
} 
} 
void encrypt() 
{ 
long int pt,ct,key=e[0],k,len; 
i=0; 
len=strlen(msg); 
while(i!=len) 
{ 
    pt=m[i]; 
    pt=pt-96; 
    k=1; 
    for(j=0;j<key;j++) 
    { 
        k=k*pt; 
        k=k%n; 
    } 
    temp[i]=k; 
    ct=k+96; 
    en[i]=ct; 
    i++; 
} 
en[i]=-1; 
printf("\nTHE ENCRYPTED MESSAGE IS\n"); 
for(i=0;en[i]!=-1;i++) 
printf("%c",en[i]); 
} 
void decrypt() 
{ 
long int pt,ct,key=d[0],k; 
i=0; 
while(en[i]!=-1) 
{ 
    ct=temp[i]; 
    k=1; 
    for(j=0;j<key;j++) 
    { 
        k=k*ct; 
        k=k%n; 
    } 
    pt=k+96; 
    m[i]=pt; 
    i++; 
} 
m[i]=-1; 
printf("\nTHE DECRYPTED MESSAGE IS\n"); 
for(i=0;m[i]!=-1;i++) 
printf("%c",m[i]); 
} 
```

# android - sqlite（android）中的java.lang.ArrayIndexOutOfBoundsException

> ID：10763845
> 
> 赞同：1
> 
> 时间：2012-05-26T05:29:55.610
> 
> 标签：android, sqlite

我在 sqlite 中创建了一个表，这里给了我**java.lang.ArrayIndexOutOfBoundsException** 代码：

```
db.execSQL("CREATE TABLE "+scoreboardTable+" ("+scoreboard_id+ " INTEGER PRIMARY KEY NOT NULL,"+" FOREIGN KEY ( "+player_fk+ ") REFERENCES "+playerTable+" ("+playerid+ "), "
        +"FOREIGN KEY ( "+ Template_fk+ ") REFERENCES " +TemplateTable+" ("+ templateid+ "),"+ total_flick+"int"+surprise_success+"varchar"+surprise_failure+"varchar)");
    } 
```

和

```
public void Insert_scoreboard(String[] str) 
    {
        try
        {
        SQLiteDatabase DB= this.getWritableDatabase();
        ContentValues cv=new ContentValues();

        cv.put("scoreboard_id", str[0]);
        cv.put("player_fk", str[1]);
        cv.put("Template_fk", str[2]);
        cv.put("total_flick", str[3]);
        cv.put("surprise_success", str[4]);
        cv.put("surprise_failure", str[5]);

        DB.insert( scoreboardTable , "scoreboard", cv);
        DB.close();
        }
        catch(Exception ex)
        {
            ex.toString();
        } 
```

我在哪里做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:37:13.410

你有错误`Create Table Syntax`（你忘了逗号**，**在某些地方）用下面的代码更新你的代码，

```
db.execSQL( "CREATE TABLE " + scoreboardTable + " (" + scoreboard_id + " INTEGER PRIMARY KEY NOT NULL," + " FOREIGN KEY ( "+player_fk+ ") REFERENCES " + playerTable + " (" + playerid + "), " + "FOREIGN KEY ( " + Template_fk + ") REFERENCES " + TemplateTable + " (" + templateid + ")," + total_flick + "int, " + surprise_success + "varchar, " + surprise_failure + "varchar)" );
    } 
```

# android - 如何在 Android 中使用令牌从 Facebook 获取用户 ID

> ID：10763847
> 
> 赞同：0
> 
> 时间：2012-05-26T05:30:18.670
> 
> 标签：android

```
*I am easily getting a token from my app but when I am trying to get the ID or user ID, I can't.

    Facebook authenticatedFacebook = new Facebook(APP_ID);

After this I call the Facebook API and get a token.

    String token=data.getStringExtra("access_token");
    jsonobj=new JSONObject(authenticatedFacebook.request("https://graph.facebook.com/me?access_token="+token));

or

    jsonobj=new JSONObject(authenticatedFacebook.request("/me?access_token="+token));

or

    jsonobj=new JSONObject(authenticatedFacebook.request("me?access_token="+token));
    //  jsonresponseArray=jsonobj.getJSONArray("id");
    System.out.println("the id has"+jsonobj.has("id"));
String usrid=jsonobj.getString("id");
so it give me error that it doesn't have any id field.
So please, can you give me a solution? And thanks in advance.* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:35:22.120

嗨，您可以通过以下几行来做：

/me 返回一个带有 id 字段（和其他字段）的 JSON 对象。您可以像这样解析这个 JSON 对象：

```
JSONObject json = Util.parseJson(facebook.request("me", params));
String userId = json.getString("id"); 
```

# c - Windows 64x 下 GCC 中的 printf 和 %llx

> ID：10763854
> 
> 赞同：14
> 
> 时间：2012-05-26T05:31:45.220
> 
> 标签：c, gcc

我试图摆脱程序中的虚假警告。windows 64下（linux下没有这个警告）这个语句：

```
printf("%llu",UINT64_MAX); 
```

生成以下警告：

```
warning: unknown conversion type character 'l' in format [-Wformat]| 
```

输出似乎是正确的，警告不应该在那里。我能找到的最相关的 gcc 相关帖子是 2008 年的这个错误报告[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=37768](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=37768)

如果我据此正确理解，则此警告源于以下事实：gcc 调用不符合 C99 的 MSVC printf 并且无法理解 printf 中的 unsigned long long 格式。在同一页面上，建议的解决方案是使用名为 gnu_printf 的东西。我试图用谷歌搜索，但我没有找到要包含的标题。

所以问题是应该如何处理才能便携？我只想以正确且不草率的方式摆脱警告。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T05:39:04.710

我猜你可能已经知道了，来自`http://comments.gmane.org/gmane.comp.gnu.mingw.w64.general/4670`（注意：死链接；请参阅[Internet 档案的副本](https://web.archive.org/web/20130501100137/http://comments.gmane.org/gmane.comp.gnu.mingw.w64.general/4670)），

> 问题是并非所有 msvcrt-DLL 版本都支持 formatter-width 说明符`%ll`，因此 gcc 会警告它的使用。以向后兼容的方式在 msvcrt 的格式化程序中指定 64 位整数标量宽度的变体是使用`%I64`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-01T08:45:11.623

使用 gcc 6.2.1，您可以使用`-fno-builtin`选项。

该选项使 gcc 认为它`printf`不是内置的（毕竟是这种情况），并且警告消失了，`printf`就像您编写的任何函数一样被对待。

不过要小心，因为在这种情况下不再执行格式检查，并且还有其他副作用，因为该选项涵盖了其他内置函数。

一个更好的选择是通过将宏设置为*根本**不*使用 Microsoft 版本：`printf` *`__USE_MINGW_ANSI_STDIO`*

 *```
gcc -D__USE_MINGW_ANSI_STDIO=1 ... 
```

（参考：[C 程序转换为 Windows 后显示 %zu](https://stackoverflow.com/questions/25670522/c-program-shows-zu-after-conversion-to-windows)）。它允许使用`%zu`微软`printf`不支持的说明符，并且您保持格式化警告。*

# php - php xml DOMDocument 追加

> ID：10763856
> 
> 赞同：-3
> 
> 时间：2012-05-26T05:32:04.487
> 
> 标签：php, xml

大家好，我正在搜索如何选择 xml 元素并附加它

但我没有找到任何东西 ![xml图片](../Images/64cca010c5604702f1c48c46b5658353.png)

```
<classes>
    <class name="A" grade="10">
        <student age="16">Martin</student>
    </class>
    <class name="B" grade="10">
        <student age="16">Justin</student>
    </class>
</classes> 
```

例如，我想按标签名称选择班级，然后将学生元素附加到它上面，这正是我现在想知道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:52:14.330

可以使用 jQuery 吗？如果是这样，解决方案非常简单。`XML`您的 XML 文档在哪里

```
$(xml).children('class[name="A"]').append(studentElement); 
```

# android - 使用 SAXParser 解析 xml 时出错

> ID：10763864
> 
> 赞同：0
> 
> 时间：2012-05-26T05:33:05.533
> 
> 标签：android, xml, xml-parsing, sax

从互联网解析 xml 时出现问题。解析器没有正确返回所有数据。

**三是三误：**

**正确结果 --> 返回结果**

161:1:161-->1:1:161

330:2:132-->3:2:132

421:2:223-->4:2:223

## 我试图解析的 xml 文件的副本

[https://docs.google.com/open?id=0BwXEx9yI14inT1BnR2xzYnJEX0E](https://docs.google.com/open?id=0BwXEx9yI14inT1BnR2xzYnJEX0E)

## 活动

```
public class DataBaseUpdateService_1 extends Activity {
  private TextView TextView1 ;
  private LinearLayout linearlayout1 ;
  private TextView title[];
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.show_item);
    linearlayout1 = (LinearLayout)findViewById(R.id.linearlayout1);
    TextView1 = (TextView)findViewById(R.id.textView1);

    MyDBHelper dbHelper =new  MyDBHelper(DataBaseUpdateService_1.this);
    SQLiteDatabase db = dbHelper.getWritableDatabase();
      try {
      /** Handling XML */
      SAXParserFactory spf = SAXParserFactory.newInstance();
      SAXParser sp = spf.newSAXParser();
      XMLReader xr = sp.getXMLReader();

      /** Send URL to parse XML Tags */
      URL sourceUrl = new URL(
          "http://123.com/example.xml");

      /** Create handler to handle XML Tags ( extends DefaultHandler ) */
      DataBaseUpdate_XMLHandler XMLHandler = new DataBaseUpdate_XMLHandler();
      xr.setContentHandler(XMLHandler);
      xr.parse(new InputSource(sourceUrl.openStream()));

      }catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
      }

      int itemCount =  DataBaseUpdate_XMLHandler.array.size();
      db.delete("hymns_match", null, null);

      try{  
        for(int i=0;i<itemCount;i++) {
          String songs_id=DataBaseUpdate_XMLHandler.array.get(i).get("songs_id");
          String songs_book_id=DataBaseUpdate_XMLHandler.array.get(i).get("songs_book_id");
          String songs_book_ch=DataBaseUpdate_XMLHandler.array.get(i).get("songs_book_ch");
          TextView tv = new TextView(DataBaseUpdateService_1.this);
          tv.setText(songs_id + ":"+songs_book_id+ ":"+songs_book_ch);
          linearlayout1.addView(tv);
        }
      }catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
      }
  }
} 
```

## DataBaseUpdate_XMLHandler

```
public class DataBaseUpdate_XMLHandler extends DefaultHandler {
  Boolean currentElement = false;
  String currentValue=null;
  static ArrayList<LinkedHashMap<String, String>> array;
  LinkedHashMap map;

  @Override
  public void startDocument() throws SAXException {
    array = new ArrayList<LinkedHashMap<String, String>>();
  }

  @Override
  public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
    currentElement = true;
    if (localName.equals("song")) {
      map = new LinkedHashMap<String, Object>();
      currentValue=null;
    } 
    /*Get attribute
     * else if (localName.equals("website")) {
     * String attr = attributes.getValue("category");
     * sitesList.setCategory(attr);}
     * */
  }

  @Override
  public void endElement(String uri, String localName, String qName) throws SAXException {
    currentElement = false;

    /** set value */ 
    if (localName.equalsIgnoreCase("songs_id")){
      map.put("songs_id",currentValue);}
    else if (localName.equalsIgnoreCase("songs_book_id")){
      map.put("songs_book_id", currentValue);}
    else if (localName.equalsIgnoreCase("songs_book_ch")){
      map.put("songs_book_ch", currentValue);}
    else if (localName.equalsIgnoreCase("song")){
      array.add(map);}
  }

  /** Called to get tag characters
  @Override
  public void characters(char[] ch, int start, int length) throws SAXException {
    if (currentElement) {
      currentValue = new String(ch, start, length);
      currentElement = false;
    }
  }
} 
```

你能就这里的问题提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:12:34.920

根据 SAX 定义`characters()`方法，每个元素可以调用多次。所以它应该积累文本；如果发生这种情况，那么您的代码将无法正常工作。

# mysql - 使用自动增量 id 或 sha1 哈希的主键 mysql？

> ID：10763865
> 
> 赞同：6
> 
> 时间：2012-05-26T05:33:10.173
> 
> 标签：mysql, primary-key

我可以有一个自动增量 id 字段作为我的主键或一个 sha1 哈希。

我应该选择哪一个？

在性能方面哪个会更好？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-26T05:53:39.537

***在一些应用程序驱动的情况下，您希望使用全局唯一 ID (UUID/GUID)：***

1.  您期望（或正在）使用分片策略来扩展写入。您不希望分片节点**重复键**。
2.  您希望能够*安全地将* **数据从一个节点移植**到另一个**保留密钥**的节点。如果您想保持**外键关系**完好无损，这一点至关重要。
3.  您的应用程序还可以**离线**使用（**家庭销售**、**家庭维修**等），其中离线应用程序会定期与“事实来源”同步。您希望这些离线密钥是唯一的，而无需进行远程调用。否则，由您决定在进入的过程中重新组织键和关系的策略。使用自动增量策略并根据您使用的 RDBMS，这可能是一项非常重要的任务。

**如果你没有上面的用例或类似的东西，你*可以*使用自动递增的 id，如果这让你舒服的话；但是，您可能*仍*需要考虑 UUID/GUID**

**权衡：**

关于 UUID/GUID 键的速度/大小有很多意见。归根结底，这是一种权衡，有很多方法可以提高或降低数据库的*速度*。理想情况下，您希望将索引存储在 RAM 中以便尽可能快；但是，这是一个权衡，您必须权衡其他考虑因素。

**关于 UUID/GUID 的其他注意事项：**

1.  许多 RDBMS 可以生成 UUID。
2.  您还可以通过您的[应用程序](https://stackoverflow.com/a/2117523/128346)生成 UUID （您不依赖于 RDBMS 来生成）。
3.  开发人员/测试人员可以轻松地将数据从环境移植到环境，并使应用程序按预期工作。这是一个经常被忽视的用例；但是，它是使用 UUID/GUID 策略的更强有力的案例之一。
4.  有些数据库针对离线使用（[CouchDB](https://stackoverflow.com/a/2710735/128346)）进行了优化，其中**UUID**就是您所获得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:35:24.953

使用自动增量 ID。

*   ID 不必只生成递增。
*   哈希更适合存储密码。
*   您可以使用 SHA 哈希获得重复的密钥。机会很小，但真实存在。
*   ID 更具可读性
*   ID 是一种插入历史。你知道最后插入的是哪条记录（最高 ID）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T05:35:37.187

几乎肯定是一个自动递增的整数。创建速度更快，搜索速度更快，体积更小。例如，考虑如果您有另一个表引用它。您希望它通过完整的主键还是通过 sha1 哈希来引用它？一个整数会更有意义（在某种程度上），它会更（很多！）更有效率。

# condor - 空闲作业的 Condor 超时

> ID：10763866
> 
> 赞同：4
> 
> 时间：2012-05-26T05:33:30.947
> 
> 标签：condor

我在一个 condor 集群上运行作业，但有些作业挂在空闲状态，似乎永远不会开始，更不用说完成了。`condor_wait -wait n logfile`那么，除了手动执行之外，`condor_rm`是否有一种更优雅（和自动，内置）的方式来终止挂起的工作？

相反，由于这些作业在 dagman 中，有没有办法让 dagman 中的作业超时，以便后面的作业可以运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:56:06.650

这里有两种方法可以使作业在空闲时间过长（本例中为 24 小时）后自动删除。

1.  将以下内容放入作业的提交文件中：

    period_remove = JobStatus == 1 && CurrentTime-EnteredCurrentStatus > 3600*24

2.  或者在提交机器上的condor配置文件中放入以下内容：

    SYSTEM_PERIODIC_REMOVE = JobStatus == 1 && CurrentTime-EnteredCurrentStatus > 3600*24

当然，最好了解为什么作业会一直处于空闲状态。为此，您可能会发现很有帮助。`condor_q -analyze *jobid*`

# asp.net-mvc-3 - 具有不同主题的单一属性的 TinyMCE

> ID：10763869
> 
> 赞同：1
> 
> 时间：2012-05-26T05:34:23.667
> 
> 标签：asp.net-mvc-3, tinymce

我已经通过 Nuget 将 TinyMCE 安装到 MVC 项目中，并设置了一个 EditorFor 来使用它，遵循本教程：[http ://www.tugberkugurlu.com/archive/tinymce-html-text-editor-and-asp-net- mvc-setting-it-up-has-become-easy-with-nuget](http://www.tugberkugurlu.com/archive/tinymce-html-text-editior-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget)

我现在遇到的问题是我希望能够在具有不同主题的两个不同地方的一个属性上使用它，一个地方简单，另一个地方高级。

这就是我在我的模式中为我的 PageContent 属性显示 TinyMCE 的内容：

```
[UIHint("tinymce_jquery_full"), AllowHtml]
public object PageContent { get; set; } 
```

我可以在单个属性上执行此操作，以便在需要时在高级和简单之间随意切换吗？

例如。可以不时使用它吗？

```
[UIHint("tinymce_jquery_simple"), AllowHtml]
public object PageContent { get; set; } 
```

我首先将 EF 与数据库一起用作模态，因此上面的模态位于部分/元数据类中。

# css - 更改拖动光标

> ID：10763871
> 
> 赞同：3
> 
> 时间：2012-05-26T05:34:47.847
> 
> 标签：css

**仅使用 CSS**拖动时如何更改光标？

 **```
div:active{
    cursor:move;
} 
```

这不起作用，因为它会`text`在拖动时由浏览器自动更改为光标。又怎样？

[http://jsfiddle.net/nick_craver/uZ377/1/](http://jsfiddle.net/nick_craver/uZ377/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T22:41:09.220

不确定它是否真正解决了您的问题，但是这个（[http://jsfiddle.net/garretruh/pJjd4/](http://jsfiddle.net/garretruh/pJjd4/)）似乎通过根本不使文本可选择来摆脱文本选择光标。再说一次，您可能希望用户能够选择您的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T14:59:13.890

我意识到这已经有一年多了，但只需更改该 JSFiddle 顶部的 * 选择器以仅匹配您正在拖动的元素。不需要Javascript。**

# qt - 如何像这样设置 QSpliter 手柄和滚动条的样式？

> ID：10763872
> 
> 赞同：0
> 
> 时间：2012-05-26T05:35:14.070
> 
> 标签：qt, scrollbar, qtstylesheets

截图链接：http: [//qt-apps.org/CONTENT/content-pre1/119860-1.png](http://qt-apps.org/CONTENT/content-pre1/119860-1.png)

我想自定义滚动条句柄和 QSplitter 句柄的外观，就像上面的屏幕截图链接一样。我知道它可以从样式表中完成。但是我不知道如何实现这一点。Holp有人可以分享一个小例子。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:51:18.377

If you just want to customize the splitters instead of changing the whole style:

```
qApp->setStyleSheet(
    "QSplitter::handle:vertical   {height: 6px; image: url(images/vsplitter.png);}"
    "QSplitter::handle:horizontal {width:  6px; image: url(images/hsplitter.png);}"
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:03:52.943

那不是样式表，那是[QPlastiqueStyle](http://doc.qt.nokia.com/4.7-snapshot/gallery-plastique.html)。

```
setStyle(new QPlastiqueStyle); 
```

# java - 将项目拖到android上的下一页

> ID：10763875
> 
> 赞同：0
> 
> 时间：2012-05-26T05:35:26.747
> 
> 标签：java, android, xml

我有一个包含 3 页的浏览器。我在每个页面中设置了一个视图组，每个视图组都有 4 个项目。现在我想从这个页面按住一个项目并将其拖动到另一个项目。我已经处理了将项目拖动到页面的角落但是当移动到新页面时，新项目没有被拖动。有没有办法处理这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:42:48.127

我之前没有实现拖放，所以这可能不起作用，但也许你可以在 viewpager 顶部制作一个不可见的覆盖视图，比如框架布局。然后处理此视图上的所有拖放协调。

# iphone - UIView 删除自己？

> ID：10763880
> 
> 赞同：1
> 
> 时间：2012-05-26T05:36:24.483
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

我有一个`UIView`子类`ToolbarView`，它的作用类似于浮动窗口，并且有`UIToolbar`一个“X”按钮，可以使窗口消失。我的问题是，对象是否可以从自己的类中删除自己？

例如，在 内`ToolbarView.m`，我有一个`closeButtonPushed`在按下 X 按钮时触发的方法。是否像从其中删除视图`superview`然后调用一样简单`dealloc`？是否有必要调用`dealloc`，因为一旦将其从其中删除，`superview`就不会有任何其他指针指向它。或者这是不好的记忆习惯？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:39:48.137

是的，永远不要调用 dealloc。如果超级视图是唯一引用您的视图的对象，则删除该视图将导致其保留计数变为 0，然后运行时将为您解除分配该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:47:03.630

你要做的是在`closeButtonPushed`方法中，调用

```
 [self removeFromSuperView]; 
```

它将删除`ToolbarView`对象，IOS 将调用该`dealloc`方法并释放对象。无需`dealloc`手动调用。

# javascript - asp.net 使用 javascript 创建/克隆具有 runat = server 属性的控件

> ID：10763887
> 
> 赞同：0
> 
> 时间：2012-05-26T05:37:40.493
> 
> 标签：javascript, asp.net, runat

是否可以使用 javascript/jQuery 动态创建/克隆具有该属性的控件 `runat=server`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:39:35.253

不，这是不可能的。因为服务器使用 runat="server" 来生成 html。如果它被添加到客户端服务器将不知道它。

# javascript - javascript 是否有 blit 或 memcpy 命令？

> ID：10763888
> 
> 赞同：5
> 
> 时间：2012-05-26T05:37:40.133
> 
> 标签：javascript, performance

我已经建立了自己的`flip`命令，而且它很慢而且需要很长时间。我想知道 javascript 是否有`blit`or `memcpy`style 命令。现在，我正在使用 for 循环逐项进行复制，并且需要“永远”。

[这](http://justinzaun.com/)是我的翻转功能的使用示例。我正在运行 3 层，如果全高只有 1 层，有 3 个简单的动画，它的 fps 最高约为 35 FPS。理想情况下，3 层应该以高得多的 FPS 达到顶峰，在我期望的 200+ 范围内。

v:36.8 l0:36.8 l1:57.8 l2:36.8 图层的FPS是渲染到他们的缓冲区，v是渲染到画布的`flip`函数。（这些 FPS 来自 Mac 上的 Chrome）

```
v = the screen update, the main flip function listed below.
l0 = The bottom fire, its a full height layer
l2 = The static noise, its a 1/2 height layer
l3 = The top fire, its a 1/4 height layet 
```

想象一下有 9 层或 10 层，FPS 会像石头一样下降。在 FF 版本 12 中，它已经无法使用……甚至没有两位数的 FPS 速率。Opera 至少是两位数。

```
v:4.2 l0:4.2 l1:4.2 l2:4.2 (FF 12 OSX)
v:15.5 l0:15.5 l1:15.5 l2:15.5  (Opera latest OSX) 
```

**我的翻转功能**

```
flip : function() {
    var fps = '';
    // Combine the layers onto the back buffer
    for (var l = 0; l < this.layers.length; l++)
    {
        fps += 'l' + l + ':' + this.layers[l].fps.toFixed(1) + ' ';
        var layerWidth = this.layers[l].options.width;
        var layerHeight = this.layers[l].options.height;
        for (var x = 0; x < layerWidth; x++)
        {
            for (var y = 0; y < layerHeight; y++)
            {
                var index = (y*this.layers[l].options.width + x)*4;
                var r = this.layers[l].buffer[index+0];
                var g = this.layers[l].buffer[index+1];
                var b = this.layers[l].buffer[index+2];
                var a = this.layers[l].buffer[index+3];
                if (r|g|b|a != 0) {
                    this.buffer.data[index+0] = r;
                    this.buffer.data[index+1] = g;
                    this.buffer.data[index+2] = b;
                    this.buffer.data[index+3] = a;
                }
            }
        }
    }
    fps = 'v:' + this.fps.toFixed(1) + ' ' + fps;
    this.$fps.html(fps);

    // blit the buffer
    this.context.putImageData(this.buffer, 0, 0);

    // Calculate fps
    var now = new Date;
    var thisFrameFPS = 1000 / (now - this.last);
    this.fps += (thisFrameFPS - this.fps) / 50;
    this.last = now;

    var t = this;
    setTimeout(function() {t.flip.apply(t);}, this.speed);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-06-10T20:05:16.217

如果可用，有一个[**memcpy.js**](https://gist.github.com/jussi-kalliokoski/3138956)使用[Typed​Array​.prototype​.subarray()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/subarray)。
浏览器[支持不错](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/subarray)，IE10也有`subarray`。

```
function memcpy (src, srcOffset, dst, dstOffset, length) {
    var i

    src = src.subarray || src.slice ? src : src.buffer
    dst = dst.subarray || dst.slice ? dst : dst.buffer

    src = srcOffset ? src.subarray ?
        src.subarray(srcOffset, length && srcOffset + length) :
        src.slice(srcOffset, length && srcOffset + length) : src

    if (dst.set) {
        dst.set(src, dstOffset)
    } else {
        for (i=0; i<src.length; i++) {
            dst[i + dstOffset] = src[i]
        }
    }

    return dst
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:01:21.297

您的代码可以改进，但我怀疑加速是否会显着。

这是我想出的，请注意它未经测试。我假设处理层的顺序并不重要，如果它用您的版本替换第一个 for 循环。

```
function flip () {
    var fps = '';
    // Combine the layers onto the back buffer
    for (var l = this.layers.length; l--;) {
        fps += 'l' + l + ':' + this.layers[l].fps.toFixed (1) + ' ';
        var layerWidth = this.layers[l].options.width;
        var layerHeight = this.layers[l].options.height;
        for (var index = 0, x = layerWidth; x--;) {
            for (var y = layerHeight; y--; index += 4) {
                var r = this.layers[l].buffer[index+0];
                var g = this.layers[l].buffer[index+1];
                var b = this.layers[l].buffer[index+2];
                var a = this.layers[l].buffer[index+3];
                if (r|g|b|a != 0) {
                    this.buffer.data[index+0] = r;
                    this.buffer.data[index+1] = g;
                    this.buffer.data[index+2] = b;
                    this.buffer.data[index+3] = a;
                }
            }
        }
    }
}; 
```

假设 r,g,b 和 a 都是 8 位量，您可以考虑将它们打包成一个 int。这将减少内部循环中的处理。更有效的是使用新的[arrayBuffer](https://developer.mozilla.org/en/JavaScript_typed_arrays)设施

# javascript - 在 JavaScript 运行之前重绘 CSS（以显示进度指示器）

> ID：10763893
> 
> 赞同：1
> 
> 时间：2012-05-26T05:38:45.987
> 
> 标签：javascript, css, graphics, repaint

我有一个 JS 例程（由用户触发），可能需要一些时间才能完成。例程运行时，我想在屏幕上显示进度叠加。这是调用例程的代码（这是响应点击事件而调用的）：

```
function handleClick() {
    $('div#progressOverlay').removeClass('hidden');
    myBigRoutine();
    ...
    $('div#progressOverlay').addClass('hidden');
} 
```

类切换触发`opacity`和`visibility`（带有过渡动画）的变化。

班级变更本身运行良好；第一个在慢例程之前执行，第二个在其他所有程序之后执行。

**问题是，`#progressOverlay`直到完成后，视觉外观才会改变`myBigRoutine()`。**
结果是进度覆盖在屏幕上闪烁一秒钟，然后立即再次隐藏（全部没有动画）

有没有办法强制视觉更新/重绘在大型 JavaScript 例程之前（或者，甚至更好，并行）发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:41:58.153

您的`myBigRoutine()`函数应该被异步调用。

```
function handleClick() {
  $('div#progressOverlay').removeClass('hidden');
  setTimeout(function() {
    myBigRoutine();
    ...
    $('div#progressOverlay').addClass('hidden');
  }, 150);
} 
```

150 是一个神奇的数字，表示超时延迟以毫秒为单位。它可以是任何小的数字。

另外，考虑使用jQuery 方法而不是`.hide()`类。`.show()``hidden`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:30:13.517

您可以将事件绑定到动画完成。所以，当动画完成时，你的代码才会执行​​，

```
function handleClick() {
    $('div#progressOverlay').removeClass('hidden');

}

$("div#progressOverlay").bind("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd", function(){
    myBigRoutine();
    ...
    $('div#progressOverlay').addClass('hidden');
}); 
```

我希望，这就是你需要的:)

# castle-windsor - 使用 Castle Dynamic Proxy 拦截显式接口实现

> ID：10763895
> 
> 赞同：1
> 
> 时间：2012-05-26T05:39:11.930
> 
> 标签：castle-windsor, castle-dynamicproxy

我无法让 Castle Dynamic Proxy 拦截作为显式接口实现的方法。我在这里读到[http://kozmic.pl/category/dynamicproxy/](http://kozmic.pl/category/dynamicproxy/)应该可以做到这一点。这是我的课；

```
internal interface IDomainInterface
{
    string DomainMethod();
}

public class DomainClass : IDomainInterface
{
    string IDomainInterface.DomainMethod()
    {
        return "not intercepted";
    }
} 
```

这是我的拦截器类；

```
public class DomainClassInterceptor : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        if (invocation.Method.Name == "DomainMethod")
            invocation.ReturnValue = "intercepted";
        else
            invocation.Proceed();
    }
} 
```

这是我的测试（失败）；

```
 [TestClass]
    public void can_intercept_explicit_interface_implementation()
    {
        // Create proxy
        var generator = new ProxyGenerator();
        var interceptor = new DomainClassInterceptor();
        var proxy = (IDomainInterface)generator.CreateClassProxy(typeof(DomainClass), interceptor);

        // Invoke proxy method
        var result = proxy.DomainMethod();

        // Check method was intercepted -- fails
        Assert.AreEqual("intercepted", result);
    } 
```

除了无法拦截显式接口实现之外，我似乎也没有收到不可代理成员的通知。这是我的代理生成钩子（充当间谍）；

```
public class DomainClassProxyGenerationHook : IProxyGenerationHook
{
    public int NonProxyableCount;

    public void MethodsInspected() {}

    public void NonProxyableMemberNotification(Type type, MemberInfo memberInfo)
    {
        NonProxyableCount++;
    }

    public bool ShouldInterceptMethod(Type type, MethodInfo methodInfo)
    {
        return true;
    }
} 
```

这是我的测试（再次失败）；

```
 [TestMethod] 
    public void receive_notification_of_nonproxyable_explicit_interface_implementation()
    {
        // Create proxy with generation hook
        var hook = new DomainClassProxyGenerationHook();
        var options = new ProxyGenerationOptions(hook);
        var generator = new ProxyGenerator();
        var interceptor = new DomainClassInterceptor();
        var proxy = (IDomainInterface)generator.CreateClassProxy(typeof(DomainClass), options, interceptor);

        // Check that non-proxyable member notification was received -- fails
        Assert.IsTrue(hook.NonProxyableCount > 0);
    } 
```

有没有人成功让 DP 拦截显式接口实现？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T10:39:02.573

您正在创建一个类代理。类代理只截取类上的虚方法，根据定义，C# 中接口方法的显式实现不是虚的（因为它是私有的）。

如果你想拦截接口上的方法，你需要明确告诉 DynamicProxy

```
var proxy = (IDomainInterface)generator.CreateClassProxy(typeof(DomainClass), new Type[] { typeof(IDomainInterface) }, interceptor); 
```

此外，您的接口被标记为`internal`确保它是`public`用于 DynamicProxy 的（将接口设为 public 或 add `InternalsVisibleToAttribute`）。

这样您的第一个测试将通过，并且该方法将被拦截。

# c++ - 调整屏幕大小时消失的对象（OpenGl）

> ID：10763896
> 
> 赞同：0
> 
> 时间：2012-05-26T05:39:22.673
> 
> 标签：c++, opengl

我正在尝试从 .obj 格式加载 3D 模型，它在屏幕上绘制对象没有任何问题，但是当我调整屏幕大小时，一切都消失了。这是代码：

```
Obj* object = new Obj();
GLuint  texture[1]; 

void handleResize(int w, int h) {
glViewport(0, 0, w, h);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45.0,(double)w / (double)h,1.0,200.0);
}
void initRendering() {
object->GetObj("cube.obj");
glShadeModel(GL_LINEAR);                            
glClearColor(0.0f, 0.0f, 0.0f,     0.5f);                           
glEnable(GL_DEPTH_TEST);
}
void handleKeypress(unsigned char key, int x, int y) {
switch (key) {
    case 27:
        {
        exit(0);
        break;
        }
}
}

void drawScene()
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glMatrixMode(GL_MODELVIEW); 
glLoadIdentity();
glPushMatrix();
glRotatef(45.0,0.0,1.0,0.0);
object->DrawObj();
glPopMatrix();
glutSwapBuffers();
glFlush();

}
int _tmain(int argc, char** argv)
{
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
glutInitWindowSize(400, 400);

glutCreateWindow("3D");
initRendering();

glutReshapeFunc(handleResize);
glutDisplayFunc(drawScene);
glutKeyboardFunc(handleKeypress);
glutMainLoop();
return 0;
} 
```

这是 Obj.DrawObj() 的代码：

```
glBegin(GL_TRIANGLES);
for(int i = 0;i < faces.capacity()-1;i++)
{
        glVertex3f(vertices[faces[i].vertex1].cordinate1,vertices[faces[i].vertex1].cordinate2,vertices[faces[i].vertex1].cordinate3);
    glVertex3f(vertices[faces[i].vertex2].cordinate1,vertices[faces[i].vertex2].cordinate2,vertices[faces[i].vertex2].cordinate3);
      glVertex3f(vertices[faces[i].vertex3].cordinate1,vertices[faces[i].vertex3].cordinate2,vertices[faces[i].vertex3].cordinate3);  
}
glEnd; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:47:18.223

在您的绘图代码中，您设置了投影矩阵，这很好。但是，您将其设置为身份。在调整大小处理程序中，您也设置了投影矩阵，但您不应该在那里这样做；是的，我知道教程里都有，但这是非常糟糕的风格。您应该将当前在 reshape 处理程序中的所有代码移动到绘图处理程序中，替换投影矩阵的当前设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:15:56.560

我可以看到您仍然对阅读 PasteBin 感到困惑。让我试着解释一下：

之所以第一次绘制就可以看到对象，是因为没有设置投影矩阵。因此，您的对象直接在标准化设备坐标（-1 到 1 范围）中绘制。

调整大小时，您是第一次设置投影矩阵，这会改变绘制到屏幕上的查看区域。您最初绘制的对象位于投影矩阵定义的查看区域之外（它位于相机顶部，我猜在近平面的前面。您必须将对象移回远离相机以便它在视锥体内。这就是 datenwolf 的建议。

然而，与此同时，您在代码中引入了其他错误，尤其是您停止在 handleResize 中重置投影矩阵。在调用 gluPerspective 之前，您必须始终清除投影矩阵，否则您将得到一个虚假的结果。

如果你从你的 pastebin 中获取确切的代码，并添加一个 glLoadIdentity 到 handleResize，我认为这应该可以工作：

```
void handleResize(int w, int h) {
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);   //<--- add
    glLoadIdentity();              //<--- add
    gluPerspective(45.0,(double)w / (double)h,1.0,200.0);
} 
```

此外，您**仍在 drawScene 函数期间清除投影矩阵**。当您清除矩阵时，您将丢弃刚刚在 handleResize 中设置的透视设置，您不想这样做。

所以基本上：

1.  在 handleResize 和初始化时设置投影矩阵
2.  不要触摸drawScene中的投影矩阵
3.  平移对象，使其适合视锥体。

# c - 如何将c函数转换为verilog模块？

> ID：10763905
> 
> 赞同：1
> 
> 时间：2012-05-26T05:40:25.917
> 
> 标签：c, verilog

下面是用于模糊化输入的 C 代码。我一直在尝试将其转换为 verilog 语法，但我在数据类型等方面遇到了很多问题。错误不断堆积。

```
float fuzzify_MF(float x,a,b,c,d) //x=crisp input 
{ 
float dom; 
if ( x >a && x <b) 
{ dom=(x-a)/(b – a); } 
else if (x>c && x<d) 
{ dom=(d-x)/(d-c); } 
else if (x>=b && x<=c) 
{dom=1.0; } 
else 
{ dom=0; } 
return dom; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T11:56:39.000

为什么不尝试使用 PLI。试试这个链接：[PLI 教程](http://www.asic-world.com/verilog/pli1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:06:12.920

你可以使用 PLI 来解决这个问题，但是如果你想看起来很酷并且仍然可以解决它，请使用 SystemVerilog 的 DPI。

[http://www.project-veripage.com/dpi_tutorial_1.php](http://www.project-veripage.com/dpi_tutorial_1.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-14T17:08:34.113

您可以使用 PLI 在 Verilog 中导入“C”函数。

在 C 函数中包含以下头文件：

```
#include <svdip.h> 
```

现在在 Verilog 模块中：

```
module top;
  import "DPI-C" context function shortreal fuzzify_MF(shortreal x, shortreal a, shortreal b, shortreal c, shortreal d);
  shortreal t;

  initial
  begin
    t = fuzzify_MF(<Arguments>);
  end    
endmodule 
```

您可以在链接中阅读有关此主题的更多信息：[DPI 教程](http://www.project-veripage.com/dpi_tutorial_5.php)

# javascript - 设置 currentFrame 后 HTML5 视频继续播放

> ID：10763906
> 
> 赞同：0
> 
> 时间：2012-05-26T05:40:26.610
> 
> 标签：javascript, html

我需要跳转到 html5 视频中的特定时间，但如果我这样做

```
function jumpToTime(){
document.getElementById("videoclip").currentTime = 160;
}; 
```

然后播放停止。如果我尝试让它再次播放

```
function jumpToTime(){  
document.getElementById("videoclip").currentTime = 160;
document.getElementById("videoclip").play();
}; 
```

然后它回到开始并从那里开始播放。

我怎样才能跳到一个时间点并从那里继续玩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:06:10.873

如果你在寻找之前停下来怎么办？

```
document.getElementById("videoclip").pause();
document.getElementById("videoclip").currentTime = 160;
document.getElementById("videoclip").play(); 
```

# c++ - 骰子程序，需要消除数组或允许动态数组大小

> ID：10763909
> 
> 赞同：0
> 
> 时间：2012-05-26T05:41:07.690
> 
> 标签：c++

我几乎完成了一个掷骰子程序，我唯一的问题是由于我指定的数组的大小，我无法输入超过 5000 个掷骰子。虽然我想我可以简单地将数组的大小增加到一些荒谬的数字，但我不希望而是使用基于输入的动态大小的数组`remainingRolls.`有人能帮忙吗？

注意：这是有效的编辑和最终代码。

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>

using namespace std;

int roller(){ // loop to simulate dice roll 
    int die1, die2;
    int total;
    die1 = rand()%6+1;
    die2 = rand()%6+1;
    total=die1+die2;
    return total;
}

int main(){
    int numberOfRolls;
    int remainingRolls;
    int eights=0; // declare counter array to hold frequencies of dice results
    int i;
    int value;
    float percentage;
    int currentRoll; // declare array for dice values

    currentRoll= 0;
    cout << "How many times will the dice be rolled?" << endl;
    cin >> remainingRolls;// user input # of dice rolls
    numberOfRolls = remainingRolls;// variable to hold number of rolls (for output)
    for (i=0; remainingRolls >0; remainingRolls--){// loop to count frequency of each value
        currentRoll = roller();// activate diceRoll function
        if (currentRoll == 8){
        eights++;
        }   
    }   
    percentage = (eights*100/numberOfRolls);
    cout << "The dice were rolled " << numberOfRolls << " times." << endl;
    cout << "The value 8 came up " << eights << " times or " << percentage << "% of the time." << endl;

    getch();
    return 0;   

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T05:45:30.603

使用一个向量，让它增长到你需要的大小。只是`push_back()`新卷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:46:22.907

您可以简单地消除数组。您永远不会在循环之外访问数组中的值，因此您可以将其替换为局部变量。

`int currentRoll`在开始时创建一个变量并将所有出现的 替换为`diceValues[i]`currentRoll。

# iphone - 使用objective-c程序在safari中打开和关闭url

> ID：10763911
> 
> 赞同：3
> 
> 时间：2012-05-26T05:41:22.557
> 
> 标签：iphone, objective-c, ios, safari, openurl

我必须在 safari 中打开一个 URL……在对 safari 做了一些工作之后，我必须关闭 safari……

我的代码如下。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:strPageUrl]]; 
```

实际上我必须在 myspace 上分享视频。如果用户分享了视频，那么我必须关闭 safari 并需要再次激活我的应用程序。

我想用 safari 做一些类似的 facebook SDK login ..

请帮助我如何打开这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:56:05.637

自定义 url 方案只能以一种方式工作......就像您从应用程序中打开 safari 一样，除非第二个应用程序也是您的，并且您已经实现了另一个自定义 url 以返回到您的应用程序，否则您将无法返回到您的应用程序。由于 safari 是由苹果公司制作的，所以它没有关于您的应用程序的信息。

我不确定您要达到的目标，但`UIWebView`如果有帮助，您可以尝试满足要求。

# apache - apache服务器8080端口与cherrypy冲突

> ID：10763912
> 
> 赞同：0
> 
> 时间：2012-05-26T05:41:34.203
> 
> 标签：apache, cherrypy

我听说了cherrypy，出于好奇尝试运行这个脚本。

```
import cherrypy
class HelloWorld(object):
    def index(self):
        return "Hello World!"
    index.exposed = True

cherrypy.quickstart(HelloWorld()) 
```

要运行它，我需要停止已经在运行的 apache。第一次运行此程序后，我得到了“Hello World”输出，但是现在当我尝试访问我的 localhost:8080 时，浏览器进入了无限长的加载状态，我认为它们是cherrypy 和 apache 之间的一些冲突，或者对我有帮助出去plz怎么办？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T08:37:43.823

您可以定义 CherryPy 应该监听的端口。

**通过在cherrypy.quickstart()**之前发出cherrypy.config.update( **)**，您可以更改服务器侦听的端口。在我的示例中，它是 7077。

```
cherrypy.config.update({'server.socket_port': 7077}) 
```

有关 CherryPy 配置的更多信息，请参阅[此文档](http://docs.cherrypy.org/stable/concepts/config.html)。

# html - ruby on rails 中的 html 编码

> ID：10763915
> 
> 赞同：0
> 
> 时间：2012-05-26T05:42:19.563
> 
> 标签：html, ruby-on-rails

我在 ROR 中有一个文本区域字段，我试图保存一些文本，但在提交时显示一些 Ascii 值。我怎样才能使这个文本区域不编码为 html。

“出现在‘电视’上的快感激励着农民；”提交时就这样保存了

我希望此文本按原样保存为“æ”，但保存为“æ”，因为那是 html 的 accii 值，那么我该如何逃避呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:51:09.870

尝试在文件开头添加这一行：

```
# encoding: utf-8 
```

希望这可以帮助！

# c# - 代码执行后调用构造函数基

> ID：10763919
> 
> 赞同：23
> 
> 时间：2012-05-26T05:44:46.263
> 
> 标签：c#, constructor

假设我们有 A 类和 B 类。B 类扩展 A 类。（B 类：A 类）

现在假设每当我实例化 ClassB 时，我想运行一些随机代码，然后才调用“base”来到达 ClassA 构造函数。

喜欢：

```
class ClassA
{
    public ClassA()
    {
        Console.WriteLine("Initialization");
    }  
}

class ClassB : ClassA
{
    public ClassB() //: base() 
    {
        // Using :base() as commented above, I would execute ClassA ctor before                                                         //          Console.WriteLine as it is below this line... 
        Console.WriteLine("Before new");
        //base() //Calls ClassA constructor using inheritance
        //Run some more Codes here...
    }
} 
```

在我通常使用的编程语言中，我可以通过简单地调用`super()`after来做到这一点`Console.WriteLine()`。但我不能在 C# 中实现它。有没有其他语法或其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-26T06:21:18.513

There's a hacky way of doing it using an instance variable initializer:

```
using System;

class ClassA
{
    public ClassA()
    {
        Console.WriteLine("Initialization");
    }  
}

class ClassB : ClassA
{
    private readonly int ignoreMe = BeforeBaseConstructorCall();

    public ClassB()
    {
    }

    private static int BeforeBaseConstructorCall()
    {
        Console.WriteLine("Before new");
        return 0; // We really don't care
    }
}

class Test
{
    static void Main()
    {
        new ClassB();
    }    
} 
```

The *less* hacky way of doing it is to rethink how you construct a `ClassB` to start with. Instead of having clients call the constructor directly, provide a static method for them to call:

```
public static ClassB CreateInstance()
{
    Console.WriteLine("Before initialization stuff");
    return new ClassB();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T21:38:24.953

如果您可以避免调用静态方法，则另一种技巧。

```
public class ClassA
{
    public ClassA()
    {
        Debug.WriteLine("Call A Constructor");
    }
}

public class ClassB:ClassA
{
    public ClassB():this(aMethod())
    {
    }

    private ClassB(object empty):base()
    {
        Debug.WriteLine("Class B Second Constructor");
    }

    private static object aMethod()
    {
        Debug.WriteLine("Run me First");
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-19T20:27:04.093

实际上，您可以：

```
class Foo
{
    public Foo(string s)
    {
        Console.WriteLine("inside foo");
        Console.WriteLine("foo" + s);
    }
}

class Bar : Foo
{
    public Bar(string s) : base(((Func<string>)(delegate ()
    {
        Console.WriteLine("before foo");
        return "bar" + s;
    }))())
    {
        Console.WriteLine("inside bar");
    }
}

class Program
{
    static void Main(string[] args)
    {
        new Bar("baz");
    }
} 
```

输出：

```
before foo
inside foo
foobarbaz
inside bar 
```

但如果可能的话，我宁愿不使用这个技巧。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-06T11:35:32.063

另一个优雅的解决方案是完全重新考虑你的对象是如何构造的。在基类的构造函数中，您可以调用自己的`construct`函数，并省略依赖的未来构造函数，方法如下：

```
public class ClassA
{
    public ClassA()
    {
        Construct();
    }

    public virtual void Construct()
    {
        Console.WriteLine("3");
    }
}

public class ClassB : ClassA
{
    public override void Construct()
    {
        Console.WriteLine("2");
        base.Construct();
    }
}

public class ClassC : ClassB
{
    public override void Construct()
    {
        Console.WriteLine("1");
        base.Construct();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T05:50:05.003

你不能用 C# 做到这一点。你最好的办法是将该代码提取到它自己的父方法中，然后在你准备好时从孩子那里调用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-08T04:50:33.987

我很惊讶没有人建议使用抽象方法 - 尽管它确实依赖于被实现为抽象类的基础，这不适用于所有情况（尽管你可以简单地分叉继承并将非抽象堆叠在顶部，如果你必须）。这样做的好处是可以确保代码的完整性，而无需求助于黑客行为。因为我们使用的是抽象，所以不声明 initCode 就无法实例化派生类。

```
using System;

abstract class ClassA
{
    internal abstract initCode();
    public ClassA()
    {
        initCode();
        Console.WriteLine("Initialization");
    }  
}

class ClassB : ClassA
{
    public ClassB()
    {
    }

    internal override initCode()
    {
        Console.WriteLine("Before new");
        return 0; // We really don't care
    }
}

//If you need to effectively get the non-abstract of ClassA
class ClassC : ClassA
{
    public ClassB()
    {
    }

    internal override initCode()
    {
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-26T05:49:20.603

C# 不允许在构造函数体内调用基本构造函数，这与 Java 不同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-26T05:59:21.420

您不能调用基本构造函数。但不同的是，当您声明派生类的对象时，会调用派生的构造函数和基类。

```
 class ClassA
{
    public ClassA()
    {
        Console.WriteLine("Initialization");
    }  
}

class ClassB : ClassA
{
    public ClassB() //: base() 
    {
        // Using :base() as commented above, I would execute ClassA ctor before                                                         //          Console.WriteLine as it is below this line... 
        Console.WriteLine("Before new");
        //base() //Calls ClassA constructor using inheritance
        //Run some more Codes here...
    }
}
void main(string[] args)
    {
      ClassB b = new ClassB();

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-14T20:41:07.530

最近我遇到了一个场景，我需要在将结果传递到 base 之前计算一些逻辑。

我可以做类似的事情

```
public SomeConstructor: base(FlagValue == FlagValues.One || FlagValues.Two ? "OptionA" : "OptionB")
{

} 
```

但我觉得这很丑陋，并且水平可以变得很长。所以我选择使用 Func Anonymous 方法。

例如，假设您有一个基类，

```
public class SomeBaseClass
{
  public SomeBaseClass(Func<string> GetSqlQueryText){
    string sqlQueryText = GetSqlQueryText();
    //Initialize(sqlQueryText);
  }
} 
```

现在你继承了它并想要做一些逻辑来确定 sql 查询文本，

```
public class SomeSqlObject : SomeBaseClass
{
  public SomeSqlObject(ArchiveTypeValues archiveType)
        : base(delegate()
        {
            switch (archiveType)
            {
                case ArchiveTypeValues.CurrentIssues:
                case ArchiveTypeValues.Archived:
                    return Queries.ProductQueries.ProductQueryActive;
                case ArchiveTypeValues.AllIssues:
                    return     string.Format(Queries.ProductQueries.ProductQueryActiveOther, (int)archiveType);
                default:
                    throw new InvalidOperationException("Unknown archiveType");
            };
        })
    {
        //Derived Constructor code here!
    }

} 
```

通过这种方式，您可以在调用 Base 之前执行代码，并且（在我看来）它并不是真正的 hacky。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-18T11:40:18.337

我有同样的问题。如果您无权访问基类，我发现此解决方案是最好的。

```
public class BaseClass
{
    public BaseClass(string someValue)
    {
        Console.WriteLine(someValue);
    }
}

public class MyClass : BaseClass
{
    private MyClass(string someValue)
        : base(someValue)
    {
    }

    public static MyClass GetNewInstance(string someValue, bool overrideValue = false)
    {
        if (overrideValue)
        {
            someValue = "42";
        }
        return new MyClass(someValue);
    }
} 
```

# html - 让“人造”列跨越父级的高度

> ID：10763920
> 
> 赞同：0
> 
> 时间：2012-05-26T05:44:50.653
> 
> 标签：html, css

[http://jsfiddle.net/YZdv4/50/](http://jsfiddle.net/YZdv4/50/) 这里是 jsfiddles

更新：我想你可以用绝对定位和javascript来做到这一点；但是，是否有任何仅使用 css/floats 的解决方案？

抱歉，如果这很难理解，但我正在尝试通过使col 为父级的 100% 高度来使紫色 bg`#content`变为`background:papayawhip``#right``#content`

```
 <div id="container" class="cf">
    <div id="header">
        <p>im header</p>
    </div>
    <div id="content" class="cf">
        <div id="left"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce viverra enim sit amet ante lacinia iaculis. Nullam ac nulla vel purus posuere luctus. Mauris a elit nisl. Mauris commodo convallis sem in feugiat. Suspendisse mauris leo, molestie sit amet commodo eget, mollis a nibh. Suspendisse auctor commodo interdum. Aliquam posuere, erat eget pharetra hendrerit, mi tellus tristique tellus, vel accumsan elit nisi ac diam. Morbi consequat ligula est, et volutpat ante. Curabitur pulvinar nulla non neque iaculis pulvinar sed eu sapien. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce sodales metus et nisl dictum non ullamcorper magna blandit. Aliquam erat volutpat. Aenean id massa sed massa sollicitudin euismod sed non lorem. Sed accumsan, nisl vitae adipiscing cursus, magna enim accumsan augue, a rutrum mauris lorem non mauris. Sed consequat venenatis venenatis.
</P></div>
        <div id="right">
            <img src="http://vvcap.net/db/0ggWsnKKw1FI1w0xojUT.png" />
            <img src="http://vvcap.net/db/Rik9UwaQOUuhKpML16td.png" />    

        </div>                        

    </div>
    <p>im the container</p>
</div>

   div#container{background:yellow;min-height:500px;}
div#header{background:pink; height:100px;}
div#content{position:relative;background:purple; height:100%;}/*heres parent container*/

div#content #left{float:left; height:100%; background:#222; color:#fff;width:50%;}
div#content #right{float:left; height:100%; background:papayawhip;width:50%;}
div#content #right img{}
/* For modern browsers */
.cf:before,
.cf:after {
    content:"";
    display:table;
}

.cf:after {
    clear:both;
}

/* For IE 6/7 (trigger hasLayout) */
.cf {
    *zoom:1;
} 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:24:44.730

The background ends because it is the end of the content (One of the quirks of floats). The only way that I found for the papayawhip background to fill out the whole purple background is to add padding to the bottom of it. Such as `padding-bottom: 25%;` or whatever % works works.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:51:25.390

我不确定我到底知道你在追求什么，但我对问题的解释导致了这个结果：fiddle， http: [//jsfiddle.net/grE5A/62/](http://jsfiddle.net/grE5A/62/)

我只在此处粘贴了更改后的 CSS 元素。

HTML

```
 <div id="container" class="cf">
        <div id="header">
            <p>im header</p>
        </div>
        <div id="content" class="cf">
             <div id="right">
                <img src="http://vvcap.net/db/0ggWsnKKw1FI1w0xojUT.png" />
                <img src="http://vvcap.net/db/Rik9UwaQOUuhKpML16td.png" />    

            </div>               

            <div id="left"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce viverra enim sit amet ante lacinia iaculis. Nullam ac nulla vel purus posuere luctus. Mauris a elit nisl. Mauris commodo convallis sem in feugiat. Suspendisse mauris leo, molestie sit amet commodo eget, mollis a nibh. Suspendisse auctor commodo interdum. Aliquam posuere, erat eget pharetra hendrerit, mi tellus tristique tellus, vel accumsan elit nisi ac diam. Morbi consequat ligula est, et volutpat ante. Curabitur pulvinar nulla non neque iaculis pulvinar sed eu sapien. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce sodales metus et nisl dictum non ullamcorper magna blandit. Aliquam erat volutpat. Aenean id massa sed massa sollicitudin euismod sed non lorem. Sed accumsan, nisl vitae adipiscing cursus, magna enim accumsan augue, a rutrum mauris lorem non mauris. Sed consequat venenatis venenatis.
    </P></div>

        </div>
        <p>im the container</p>
    </div> 
```

CSS

```
/*heres parent container*/

div#content #left {
    float: none;
    height: 100%;
    background: #222;
    color: white;
    width: 50%;
    position: absolute;
    left: 0;
    top: 0;
    z-index: 10;
}

div#content #right {
    float: none;
    height: 100%;
    background: 
    papayaWhip;
    width: 50%;
    position: relative;
    padding-left: 50%;
    z-index: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T12:12:17.007

这儿存在一个问题：

孩子`DIV#left`将无法使用父 DIV 的最小高度来计算自己的高度

```
div#container{background:yellow;min-height:500px;} 
```

这就是为什么它不会延伸到`DIV#content`.

编辑：

我并不总是建议用于布局的表格，但当我这样做时，它是为了解决这样的问题。

[http://jsfiddle.net/YZdv4/56/](http://jsfiddle.net/YZdv4/56/)

# apache-flex - Flex：如何在标题窗口上固定组件的位置

> ID：10763921
> 
> 赞同：0
> 
> 时间：2012-05-26T05:45:29.740
> 
> 标签：apache-flex

我有一个边界容器，其中有组件。我将布局设置为边框容器，但组件仍然移动。我想固定位置。如何解决这个问题？我写了这段代码

```
<s:BorderContainer x="3" y="3" width="227" height="35">
<s:layout>
<s:HorizontalLayout verticalAlign="middle" horizontalAlign="left"/>
</s:layout>
<s:Label width="56" fontSize="15" text="Inv No."/>
<s:Skin width="50" visible="false"/>
<s:TextInput width="98"/>
</s:BorderContainer> 
```

# objective-c - 是否可以观察 -visibleRect

> ID：10763923
> 
> 赞同：9
> 
> 时间：2012-05-26T05:45:47.010
> 
> 标签：objective-c, cocoa, osx-lion, nsview

我想在某个特定`NSView`的`- (NSRect)visibleRect`更改时收到通知，因为我想根据可见的矩形做一些花哨的子视图布局。坦率地说，现在我很难过；`-visibleRect`不发出 KVO 通知（这是有道理的），并且似乎没有办法在不明确调用`-visibleRect`.

这是可能吗？（或者这是一个可怕的、可怕的想法？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T06:11:20.123

我认为您可以覆盖`-[NSView updateTrackingAreas]`或收听`NSViewDidUpdateTrackingAreasNotification`. 这些可能发生在更多场合，而不仅仅是可见矩形的变化，但它们应该发生在可见矩形的任何变化上。我认为。

也就是说，这可能是一个糟糕的主意。很难知道。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:13:37.900

10.5 后的另一个选项是 -viewWillDraw 方法，该方法在视图（及其子视图）被绘制之前被调用。您可以在调用 [super viewWillDraw] 之前获取视图的可见矩形并执行布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:20:08.337

Ken 关于监听跟踪区域变化的建议感觉很老套，但似乎有效，尽管它们仅在调整大小完成后才会触发。如果您像我一样在调整大小期间需要更新，它`-[NSView resizeWithOldSuperviewSize:]`会覆盖

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-10T00:54:15.850

至少对于 NSScrollView，adjustTrackingArea 解决方案在 Mojave 中似乎不可行。Mojave 在滚动 NSScrollView 时似乎并不总是调用 adjustTrackingArea。尚未测试其他操作系统版本，其他视图类型。

# php - 使用 PHP 使用来自 POST 变量的文本内容制作套用信函

> ID：10763925
> 
> 赞同：1
> 
> 时间：2012-05-26T05:46:18.227
> 
> 标签：php, forms, parsing

我正在尝试使用 PHP 制作套用信函。我有一个视图，它有一个文本区域，其中包含一些预填充的文本。文字就像一封信：亲爱的某某，等等。

有几个地方我需要从数据库中填写特定的动态数据，否则我需要让用户根据需要更改电子邮件其他部分的措辞。我正在考虑放置一个随机字符序列来标记我要插入新值的每个地方。

因此，我将表单提交到 PHP 页面，然后将文本提取到字符串变量中。当我准备通过电子邮件发送它时，我需要确保这些占位符已更新。如何用变量的值替换字符串变量的内容？

编辑 - 示例。这是我目前在处理表单操作的 PHP 文件中的字符串变量内部的内容。

你好 ％@

我希望你做得很好。我想提醒你，在 %@ 天内你需要做点什么。

作为一个团队，我们目前处于 %@%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T05:51:44.573

假设字母文本是这样的：

> 亲爱的%name%！我来自%city%。我们去%destination%。

你的代码应该是这样的：

```
$letter_text = $_POST["letter_text"];
foreach(array("name", "city", "destination") as $var) {
  $letter_text = str_replace("%".$var."%", $_POST[$var], $letter_text);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T05:57:32.433

我已经使用了以下几次。希望这可以解决您正在寻找的问题。

```
<?php

$content = "Hi #user, 
Thanks for registering. Your username is #username.
"

$trans = array("#user" => "ABC", "#username"=> "XYZ");

echo strtr($content, $trans);

?> 
```

我认为这是您可以轻松使用的。只需将内容变量更改为您的字符串，并将占位符（以 # 开头）更改为您的占位符。从数据库或 $_POST 中为这些占位符设置 $trans 数组中的值，无论您需要什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T05:58:33.010

我用来做的事情如下。

```
$email_text = "Hello ###user###,    
                  You have a new Event on ###date### at ###time### for ###hours### hour.    
                  Please let me know if you are attending. 

                  Have Fun.
                  ###site###";

$email_text =   str_replace('###user###',$username,$email_text);
$email_text =   str_replace('###date###',date('M dS, Y', strtotime($date)),$email_text);
$email_text =   str_replace('###time###',$time,$email_text);
$email_text =   str_replace('###hours###',$hours,$email_text);
$email_text =   str_replace('###site###',$site,$email_text); 
```

我希望这将非常清楚地说明您如何解决这个问题。

# iphone - 如何从通话记录数据库中删除通话表数据

> ID：10763927
> 
> 赞同：-2
> 
> 时间：2012-05-26T05:46:29.860
> 
> 标签：iphone, database, sqlite

我是 iPhone 应用程序开发的新手。我正在开发通话记录应用程序。我从通话历史数据库中检索了通话表中的所有数据。然后现在从呼叫历史数据库中删除呼叫表中的所有数据。请告诉我如何删除所有数据。请给我一些示例代码链接。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:27:10.323

**call_history.db**是一个只读的 sqlite 数据库，您不能从应用程序写入它。

但是，即使阅读它也是我强烈建议反对的。这是一个私人的、未记录的文件，访问它可能会导致您的应用程序被拒绝。引用[别人的话](https://stackoverflow.com/questions/8656419/how-to-get-call-history-in-iphone)：

> 没有用于获取通话记录的公共 API，如果您使用任何其他方法，例如直接访问 callHistory.db 文件，您将无法将您的应用提交到应用商店。

因此，您只能定位越狱手机。此外， call_history.db 访问在 5.0+ 中被破坏，因此除此之外，您将被进一步限制为 4.x 及更低版本。

# java - Java run() 方法是如何工作的？

> ID：10763928
> 
> 赞同：9
> 
> 时间：2012-05-26T05:46:38.783
> 
> 标签：java, multithreading

Java 中的多线程是通过定义 run() 和调用 start() 来完成的。

Start 委托给本地方法，该方法通过操作系统例程启动线程，并从这个新生成的线程中调用 run()。

当一个独立的应用程序启动时，会自动创建一个主线程来执行 main()。

现在考虑这段代码 -

```
public class Test extends Thread {
    public static void main(String[] args) throws Exception {
        new Thread(new Test()).start();
        throw new RuntimeException("Exception from main thread");
    }
    public void run() {
        throw new RuntimeException("Exception from child thread");
    }
} 
```

这是输出 -

```
java.lang.RuntimeException: Exception from child thread
    at com.Test.run(Test.java:11)
    at java.lang.Thread.run(Thread.java:662)
java.lang.RuntimeException: Exception from main thread
    at com.Test.main(Test.java:8) 
```

如果 main() 方法是通过线程启动的，为什么 run() 不显示在调用层次结构的顶部？

不实现 Runnable 怎么会产生主线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T09:37:47.960

> 如果 main() 方法是通过线程启动的，为什么 run() 不显示在调用层次结构的顶部？

正如其他人所提到的，这是因为“主”线程是特殊的。它不是通过标准`Thread`类机制启动的，而是通过 Java 引导代码启动的。`public static void main(String[] args)`始终由本机代码的主线程运行。

另一种解释是，实际上可能存在一种`run()`方法，但他们构建堆栈帧的方式是故意隐藏它，以免混淆用户。例如，由于您正在执行 a`new Thread(new Test())`那么您的`Test`类实际上`target`是`Thread`. 当后台`Thread`启动时，它实际上调用`Thread.run()`了代码：

```
public void run() {
    if (target != null) {
        target.run();
    }
} 
```

但是我们从未在堆栈帧中看到该`Thread.run()`方法，尽管它似乎应该在那里。如果用户在超类中覆盖该方法，则该`run()`方法*将*`Thread`位于堆栈帧中。它可以被 JDK 删除以改善堆栈帧输出。

> Java 中的多线程是通过定义 run() 和调用 start() 来完成的。

这是正确的，但对于后代来说，我认为意识到你的代码有问题很重要。您的`Test`课程不应*扩展*，`Thread`而应实施`Runnable`。它之所以有效，是因为`Thread`实现了`Runnable`.

您应该实现`Runnable`并将代码更改为如下所示：

```
public class Test implements Runnable {
    public static void main(String[] args) throws Exception {
        new Thread(new Test()).start();
        throw new RuntimeException("Exception from main thread");
    }
    public void run() {
        throw new RuntimeException("Exception from child thread");
    }
} 
```

或者您仍然扩展`Thread`并更改启动线程的方式，如下所示。推荐使用上述`Runnable`模式，因为它允许您的`Test`线程在必要时扩展另一个类。

```
public class Test extends Thread {
    public static void main(String[] args) throws Exception {
        new Test().start();
        throw new RuntimeException("Exception from main thread");
    }
    @Override
    public void run() {
        throw new RuntimeException("Exception from child thread");
    }
} 
```

为什么这很重要？您当前的代码实际上是实例化 2 个`Thread`对象，但其中只有一个是`start()`ed 并且作为 background 运行`Thread`。您可能会遇到以下错误：

```
public class Test extends Thread {
    public static void main(String[] args) throws Exception {
        Test test = new Test(); 
        new Thread(test).start();
        // this is not interrupting the background thread
        test.interrupt(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T06:22:12.030

I haven't looked at the internals of the JVM, but I would guess that the JVM instantiates the main thread to run the main method, but runs this main thread by invoking native code directly, without going through the classical Java classes and methods to start the thread.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T05:49:53.323

main 方法由 JVM 在一个单独的线程中启动，它是子线程的父线程，这就是为什么在调用层次结构的顶部看不到子线程的原因。

因此，在您的情况下，JVM 创建了一个线程来启动您的程序，该线程也扩展了 Thread。

然后在你的 main 方法中，你创建了你的类的一个新实例，在它上面调用 start，这将启动一个新线程，它是 JVM 启动的线程的子线程来启动你的程序。

由于 main 方法是独立 java 程序的起点，JVM 有责任在单独的线程中启动它，您不必为它编写代码。

通过调用main方法启动程序，JVM不需要它是线程或实现Runnable，它是一个标准过程。

[Java虚拟机内部](http://www.artima.com/insidejvm/ed2/jvm.html)的描述

> 应用程序初始类的 main() 方法用作该应用程序初始线程的起点。初始线程可以反过来触发其他线程。
> 
> 在 Java 虚拟机内部，线程有两种形式：守护进程和非守护进程。守护线程通常是虚拟机本身使用的线程，例如执行垃圾回收的线程。但是，应用程序可以将它创建的任何线程标记为守护线程。应用程序的初始线程——从 main() 开始的线程——是一个非守护线程。
> 
> 只要任何非守护线程仍在运行，Java 应用程序就会继续执行（虚拟机实例继续存在）。当 Java 应用程序的所有非守护线程终止时，虚拟机实例将退出。如果安全管理器允许，应用程序也可以通过调用 Runtime 或 System 类的 exit() 方法导致自己的死亡。

调用层次结构不受您控制，它由底层线程调度程序控制。

例如，如果我在我的机器上运行相同的代码，这就是输出

```
Exception in thread "main" java.lang.RuntimeException: Exception from main thread
    at TestThread.main(TestThread.java:6)
Exception in thread "Thread-1" java.lang.RuntimeException: Exception from child thread
    at TestThread.run(TestThread.java:9)
    at java.lang.Thread.run(Thread.java:662) 
```

因此，当您运行示例时，调度程序选择在 main 之前先放开子线程。

添加到@JB Nizet，如何调用程序或如何实现线程生命周期取决于底层操作系统和硬件，它们会并且确实会有所不同。

没有单一的实现细节可以提供完整的答案，每个实现都会有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T18:54:11.667

也许这是一个语义论点，但 Thread 和 Process 不是同义词。

一个进程由操作系统启动，并且有它自己的私有代码页（编译的代码集）。线程从程序内部启动，最初共享其父代码页（已编译的代码集）。

JVM 内部使用 Thread 来运行 main 方法是环境的实现细节，而不是 Java 语言的表示。如果一个线程要在`main`堆栈帧中报告，那么返回源代码位置的体系结构将是不可能的，因为该主服务线程将没有编译单元（它在 JVM 内部）。

# iphone - 复选框下方带有指定文本字段的复选框

> ID：10763931
> 
> 赞同：0
> 
> 时间：2012-05-26T05:47:22.993
> 
> 标签：iphone, checkbox

我在应用程序中有十个复选框。如果用户按下复选框，则在下一行中将添加 UITextfield。

任何人都可以建议如何更快地完成它，因为它有很多检查条件吗？请检查我提到的屏幕截图。![在此处输入图像描述](../Images/48a96fb1c50d24467c43fdf980b720c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:52:47.330

您将使用带有 2 个自定义单元格的 UITableView 来实现这一点

1.  一个用于您的复选框和文本
2.  一个用于您的文本字段

然后例如，`– tableView:didSelectRowAtIndexPath:`对于您实现的复选框单元`insertRowsAtIndexPaths:withRowAnimation:`格，在所选复选框单元格下方插入您的 textField 单元格

希望这会有所帮助并让您走上正确的道路

# django - 更改/还原视图后的 Django 错误

> ID：10763932
> 
> 赞同：0
> 
> 时间：2012-05-26T05:47:44.777
> 
> 标签：django, django-views

我之前更改了一些与某些地理位置相关的视图（失败），在恢复以前的视图时，我收到了这个错误：

```
TemplateSyntaxError at /report/all/
Caught NoReverseMatch while rendering: Reverse for 'profiles_profile_detail' with arguments '('',)' and keyword arguments '{}' not found. 
```

奇怪的是，我更改和恢复的视图与此视图或模板无关。urls.py 文件根本没有被触及。应用程序中的所有其他页面都正常显示。我无法弄清楚问题可能是什么。

意见：

```
from django.http import HttpResponse, HttpResponseRedirect, Http404
from django.shortcuts import render_to_response, get_object_or_404, redirect
from django.template import RequestContext
from django.core.urlresolvers import reverse
from myapp.report.models import Story, UserProfile
from myapp.report.forms import ProfileForm, StoryForm
from django.contrib.auth.decorators import login_required
from django.contrib.gis.utils import GeoIP

def all_stories(request):
    if not request.user.is_authenticated():
        return redirect("django.contrib.auth.views.login")
    all_stories = Story.objects.all().order_by("-date")

    return render_to_response("report/storyline.html",
                                {'stories': all_stories},
                                context_instance=RequestContext(request))

def story_detail(request, story_id):
    story = get_object_or_404(Story, id=story_id)
    return render_to_response('report/detail.html',
                            {'story': story},
                                context_instance=RequestContext(request))

@login_required
def submit_story(request):
    if request.method =="POST":
        story_form = StoryForm(request.POST, request.FILES)
        if story_form.is_valid():
            new_story = story_form.save(commit=False)
            new_story.author = request.user
            new_story.save()
            return HttpResponseRedirect("/report/all/")
    else: # GET request
        story_form = StoryForm()
    return render_to_response("report/report.html", {'form': story_form}, context_instance=RequestContext(request)) 
```

表格（已更改但已恢复；似乎正在工作）：

```
from django import forms
from stentorian.report.models import UserProfile, Story
from django.contrib.gis.utils import GeoIP

class ProfileForm(forms.ModelForm):
    class Meta:
        model = UserProfile

class StoryForm(forms.ModelForm):
    class Meta:
        model = Story
        exclude = ('author',) 
```

模板：

```
{% extends 'base.html' %}

{% block page_title %}Stentorian{% endblock %}
{% block headline %}Stentorian Storyline{% endblock %}

{% block content %}

    <div class="row">
    <div class="span12">

        <h2>Welcome <a href="{% url profiles_profile_detail user.username %}">{{ user.username }}</a></h2> 
```

```
 <div class="accordion" id="story_accordion">
        {% for story in stories %}
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle story-header" data-toggle="collapse" data-parent="#story_accordion" href="#story_{{ story.id }}">
                         {{ story.title }} - {{ story.author.username }} - {{ story.date }}
                    </a>
                </div>
                <div id="story_{{ story.id }}" class="accordion-body collapse{% if forloop.counter0 == 0 %} in{% endif %}">
                    <div class="accordion-inner">
                        <!-- <h2><a href="{% url detail story.id %}">{{story.title}}</a></h2>-->
                        <span><a href="{% url profiles_profile_detail story.author %}">{{story.author}}</a> </span><br>

                        <span>{{story.topic}}</span><br>
                        <span>{{story.zip_code}}</span><br>

                        <span>{{story.date}}</span><br>

                        <p>{{story.copy}}</p>
                    </div>
                </div>
            </div>

            <br>

        {% endfor %}
        </div>

    </div>
</div>

{% endblock content %} 
```

错误即将上线：

```
{% for story in stories %} 
```

如果有人可以提供有关为什么会发生这种情况的想法，将不胜感激。同样，url 没有改变，这似乎是这个错误的主要原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:08:57.787

好像你没有得到 user.username

试试这个。

```
 <h2>Welcome <a href="{% url profiles_profile_detail request.user.username %}">{{ request.user.username }}</a></h2> 
```

# c - 用 execv 执行更少？

> ID：10763935
> 
> 赞同：1
> 
> 时间：2012-05-26T05:48:36.117
> 
> 标签：c, unix, exec, pipe

我有以下c代码。我想通过调用来显示我的文件，`execv()` 但是以下似乎永远不会起作用。程序终止并注意弹出。

```
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <string.h>
int main(void){
  int pid; 
  if(pid=fork()>0){
      //read in from stdin and pass to pipe
   }else if(pid==0){
      //read from pipe
      //write to out.txt
      //everything up to here works fine

      char* para[]={"less","/Desktop/out.txt"};
      execv("/bin/less",para);
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:03:14.083

（包含原始代码`execv("bin/less", para);`。）除非当前目录是根目录`/`，或者除非`less`子目录中有程序，否则`./bin/less`您的问题之一是可执行文件名称中可能存在拼写错误。假设程序是`/bin/less`而不是`/usr/bin/less`。您甚至可以使用`execvp()`对程序进行基于路径的搜索。

还有一个额外的问题：您需要包含一个空指针来标记参数列表的结尾。

`execv()`最后，您可以在返回后打印错误消息。它返回的事实告诉你它失败了。

```
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>

int main(void)
{
    int pid;
    if ((pid = fork()) != 0)
    {
        // read in from stdin and pass to pipe
        // Need to test for fork() error here too
    }
    else
    {
        // read from pipe
        // write to out.txt
        // everything up to here works fine

        char *para[] = { "/bin/less", "Desktop/out.txt", 0 };
        execv(para[0], para);
        fprintf(stderr, "Failed to execute %s\n", para[0]);
        exit(1);
    }
    return 0;
} 
```

或者：

```
 char *para[] = { "less", "Desktop/out.txt", 0 };
        execvp(para[0], para);
        fprintf(stderr, "Failed to execute %s\n", para[0]); 
```

代码中关于管道的注释令人费解，因为除了注释之外没有任何管道的迹象。就目前而言，`less`将读取它被告知要读取的文件。请注意，`less`如果输出不进入终端，则不会对其输出进行分页。由于我们看不到 I/O 重定向，因此我们必须假设这`less`将忽略程序尝试写入的任何内容，并且不会将任何数据发送回程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:04:22.043

```
char* para[]={"less","/Desktop/out.txt"};
execv("/bin/less",para); 
```

execv 如何知道何时停止读取参数？

我想如果你把代码放在那里来处理 execv() 返回一个错误，你就会发现这个。您也没有测试来自 fork() 的错误。

# build - Jenkins无法将文件复制到Windows远程主机

> ID：10763936
> 
> 赞同：0
> 
> 时间：2012-05-26T05:48:36.187
> 
> 标签：build, continuous-integration, command, jenkins, sudo

我在 OS X 10.7 上有一个 Jenkins 服务器，它轮询颠覆服务器，构建代码并打包应用程序。我需要完成的最后一步是在远程主机上部署应用程序，这是一个 Windows 共享。请注意，我的域帐户对目标文件夹具有写入权限，并且已安装该卷。我尝试过使用 shell 脚本构建步骤：

```
sudo cp "path/to/app" "/Volumes/path/to/target" 
```

但是我得到一个“没有 tty”的回应。我能够在终端中成功运行此命令，但不能作为 Jenkins 中的构建步骤。

这是否与启动 Jenkins 时使用的用户有关？附带说明一下，默认的 user.name 是 jenkins，我的 JENKINS_HOME 位于 /Users/Shared/Jenkins。对于如何实现这一目标，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:14:46.103

您的*直接*问题似乎是您在后台运行 Jenkins 并`sudo`想要输入密码。使用 .在前台运行 Jenkins `$ java -jar jenkins.war`。

但是，这很可能无法解决您的问题，因为当命令运行时，系统会要求您输入密码 - 从您启动 Jenkins 的终端（可能不是您想要的）。您需要找到一种无需 root 权限即可复制文件的方法。一般来说，在构建中依赖管理权限不是一个好主意（有例外，但你的情况不是这样）。

# java - 将获得的值传递给其他模板

> ID：10763947
> 
> 赞同：0
> 
> 时间：2012-05-26T05:50:43.440
> 
> 标签：java, scala, playframework

我有一个捕获字符串的主模板：

```
@(captured: String)

.... other templating stuff 
```

我有一个想要使用的子模板`@captured`：

```
.... somewhere in this templating stuff we have:
@subTemplate(@captured) <- wants to use @captured 
```

我试试这个，除了错误我什么也没得到。我确定这必须是可能的，所以我做错了什么？对不起，如果这个问题很简单，我只是不知道如何为谷歌简洁地表达它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T06:43:15.867

`captured`当它作为变量传递时，您需要删除尾随 @ 符号。

例如

```
@subTemplate(@captured) --> @subTemplate(captured) 
```

之所以会出现这种情况，是因为 @ 是一个特殊符号，它告诉 Play 模板引擎即将进行一些计算，而不仅仅是输出 HTML。在上面的例子中，通过调用子模板，你已经开始了一个计算（即使用了@符号），所以你不要在括号内再次使用它，因为编译器已经处于计算模式。

这在 Play 1.x 模板引擎中完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T05:57:55.350

删除 中的前导“at” `@captured`。出于某种奇怪的原因，Play 直到现在都不想接受这一点并让它发挥作用。看看我是否可以重现该问题。

# c# - 如何开发用于在闭路电视摄像机范围内查找物体位置的程序？

> ID：10763948
> 
> 赞同：1
> 
> 时间：2012-05-26T05:50:59.863
> 
> 标签：c#, vb.net

任何人都可以建议我，是否可以在 vb.net 或 C# 中开发一个程序，可以在 cctv 摄像头范围内找到车辆的位置？如果可能，用于它的 API 和技术是什么？任何人都可以提出任何建议链接或此过程中涉及的步骤...？

# asp.net - 调用 WCF RESTful 服务时要求表单经过身份验证的用户的方法？

> ID：10763949
> 
> 赞同：1
> 
> 时间：2012-05-26T05:51:01.297
> 
> 标签：asp.net, wcf, security, rest, forms-authentication

想知道如何高效、安全地执行以下操作，并且不会因为过于复杂而让我们费尽心思：我们有一个使用表单身份验证的 ASP.Net 站点，并希望实现一些 WCF 静态 Web 服务可以从第一个站点调用，前提是调用它们的用户已经过身份验证。

我们希望在与 ASP.Net 站点不同的网站中托管 WCF RESTful 服务。两个站点将位于同一个域中（例如 my-domain.com）。

我一直在阅读 WCF 中的各种绑定，但不确定 webHttpBindings 是否适合这里（它们对 REST 最友好，但它们可以容纳经过表单身份验证的用户吗？）

我正在寻找与代码一样多的建议和参考，但我很想知道从哪里开始以及要寻找什么，什么是可能的，什么不是。

每次我阅读有关 WCF 身份验证的信息时，似乎都不可避免地会陷入有关 WS-security 和 X509 证书的讨论中，而且我不知道我在做什么需要所有这些？我真正想要构建的是一系列仅响应表单身份验证用户的 WCF 宁静服务。如果不深入研究 WS-Security 和 X509 就不可能做到这一点，那么就这样吧，但我希望它尽可能简单。

注意：大约一个月前我问了一个[类似的问题](https://stackoverflow.com/questions/10401747/securing-a-wcf-restful-service-cant-call-it-unless-authenticated)，但决定使用表单身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:05:03.080

如果您不从浏览器调用 WCF 服务，那么您甚至不需要保护它们。只需将它们从您的 ASPX 代码调用到托管 WCF 的非公共站点。或者在服务器到服务器模式下使用 X509 证书。

如果您确实打算从浏览器调用它们，那么事情会变得更加复杂。在这种情况下，您可能想要放弃 WCF 并使用 MVC 4 beta 版本中包含的 Web API 来构建您的 REST 服务。

[http://www.asp.net/web-api](http://www.asp.net/web-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:26:08.437

让您的 javascript 从后面的代码生成。如果 Page.User.IsAuthenticated，则呈现 ajax 脚本。如果不是，则呈现 javascript 以提醒用户他们需要登录。如果您不希望用户从浏览器源中删除 javascript 并稍后运行它，当他们未通过身份验证时，您将需要生成一个基于会话 ID 的令牌，可以在站点和服务之间传递。

# ruby-on-rails - Rails ActiveRecord 性能与许多选择和插入

> ID：10763953
> 
> 赞同：0
> 
> 时间：2012-05-26T05:51:18.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, activerecord

我有一个跟踪订阅订单邮件的 Rails 3.2 应用程序。

基本模型结构为：

订购 has_many 订阅 has_many SubscriptionMailings

每个月都会为每个订阅邮件生成一条记录，并从这些记录中导出一个 csv 文件。

邮寄地址存储在订单级别。

基本上，我选择了当月有效的所有订阅，并循环通过它们从订单对象中获取邮寄地址。然后我为每一个创建一个新的订阅邮件记录。

现在这工作正常，因为没有很多订阅，但它很慢。

我怎样才能加快这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:11:34.850

为了进行优化，您需要从 Ruby 级别降级到这里的 SQL 级别。

而不是进行`N+1`选择（`1`用于获取所有订阅和`N`获取每个订阅的所有订单），您可能只能`1`使用连接进行选择。

```
SubscriptionMailing.
  joins(:subscrtiption).
  joins(:order).
  where(Order.table_name => { valid: true }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:37:29.160

听起来您想使用包含来急切加载订单。也许是这样的：

```
# Subscription.rb
scope :valid_for_month lambda {|month| where(month: month)}

# Elsewhere
valid_subscriptions = Subscription.valid_for_month(Time.now.month).includes(:order)
valid_subscriptions.each do |subscription|
  subscription.generate_subscription_mailing
end 
```

更多内容包括：[http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T02:32:40.337

经过一番研究，我最终将我的代码包装在一个事务中，而没有进行任何其他更改。

它加快了速度。

在我添加事务之前，代码需要 1 多分钟才能运行，现在它减少到大约 10 秒。这对我的需求来说已经足够快了，所以我没有尝试进一步优化。

```
ActiveRecord::Base.transaction do
   # my db stuff here
end 
```

# python - 航站楼前奇怪的身影

> ID：10763954
> 
> 赞同：0
> 
> 时间：2012-05-26T05:51:23.807
> 
> 标签：python, macos, terminal

我不确定这是不是问这个问题的正确地方，但是在学习 Python the Hard Way 的练习 15 进行到一半时，我在终端中遇到了这个问题：

162:LPTHW 用户名$

有谁知道为什么那条线前面有数字162？即使重新启动我的终端，这种情况仍然存在。

我对此很陌生，是否值得担心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:57:56.050

不，没有必要担心。在评论中，您说您的`PS1`（定义提示）是`\h:\W \u\$`. 在[文档](http://www.gnu.org/software/bash/manual/html_node/Printing-a-Prompt.html)中，定义了每个转义符的含义。你担心的是结肠之前。冒号前的转义是`\h`. 以下是文档必须说明的内容：

> `\h`
> 　　主机名，直到第一个“.”。

它只是您计算机名称的一部分。没什么好担心的。如果您对整个主机名感到好奇，请尝试运行`hostname`.

# java - 我尝试创建arraylist并尝试使用equal或方法实例仅存储字符串和整数对象，但我们可以使用Generic做同样的事情吗

> ID：10763960
> 
> 赞同：-3
> 
> 时间：2012-05-26T05:52:30.913
> 
> 标签：java, generics

我尝试创建arraylist并尝试使用equal或方法实例仅存储字符串和整数对象，但我们可以使用Generic做同样的事情吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T05:58:30.283

你不能。泛型依赖于继承来使代码类型安全。你需要一个通用的超类。如果您不想编写自己的集合，您可能需要考虑创建自己的类，该类将您尝试添加的概念抽象化。假设列表中的字符串和整数代表后缀（仅作为示例）。然后，您将创建一个`Suffix`包含 String 或 Integer 的类，并提供您正在寻找的这些对象的常见行为。这样您的 List 将接受`Suffix`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T05:59:24.327

首先，这个混合ArrayList的目的是什么？你打算怎么命名它？无论如何，回到你的问题，答案是我们可以（在某种程度上）但恕我直言，这是不可取的。

```
class Holder {
    String strValue;
    Integer intValue;
}
List<Holder> alist = new ArrayList<Holder>(); 
```

你明白了。; )

# python - 如何在长时间运行的任务上更改 QPushButton 的文本，并在任务完成后更改回来？

> ID：10763970
> 
> 赞同：0
> 
> 时间：2012-05-26T05:54:08.933
> 
> 标签：python, pyqt, pyqt4

我有一些这样的代码：

```
class MyApp(Ui_MainWindow):
    def __init__(self):
        pass

    def setupUi(self, *args):
        super(MyApp, self).setupUi(*args)
        QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL(_fromUtf8("clicked()")), self.doCheck)

    def doCheck(self):
        self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Checking...", None, QtGui.QApplication.UnicodeUTF8))
        # Code to do real checking here... (it's a network app)
        # When check done, display result in a "QTextBrowser" 
        # ....
        # Change text of Button to "Done!"
        self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Done!", None, QtGui.QApplication.UnicodeUTF8)) 
```

但结果并不如我所料。我的应用程序进行网络检查并显示结果正常，但检查开始时按钮没有将文本更改为“正在检查...”；它只是将文本更改为“完成！” 当一切都完成了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:05:45.303

更改按钮标签后，您应该运行`QApplication::processEvents()`以使用新标签更新 UI。

请注意，当长任务运行时，您的 UI 将被冻结。为避免这种情况，您有时应该`QApplication::processEvents()`在长时间操作期间调用或单独运行此操作`QThread`。

# playn - PlayN / Tripleplay 如何在不同的屏幕位置创建两个按钮

> ID：10763977
> 
> 赞同：1
> 
> 时间：2012-05-26T05:55:02.590
> 
> 标签：playn

创建按钮或按钮组很容易，

```
 Root root = iface.createRoot(AxisLayout.vertical(), ROOT, modeLayer).
            setStyles(make(VALIGN.top, HALIGN.right)).
            setBounds(0, 0, width, height).
            add(backButton); 
```

但是，我不知道如何在不同的组中创建两个按钮，即左上角的一个按钮和右上角的按钮...

我尝试创建了两个根，一个按钮将被禁用/不可点击。如果我创建一个根，它们将组合在一起:(

============ 感谢 samskivert 的详细答案，但我无法产生正确的结果。对于“原始”答案中的第一个建议，完整代码如下：

```
 Font SMALL = PlayN.graphics().createFont("Helvetica", Font.Style.PLAIN, 24);
    final Stylesheet ROOT = SimpleStyles.newSheetBuilder().
            add(Element.class, make(FONT.is(SMALL))).
            add(Button.class, make(BACKGROUND.is(Background.solid(100)))).create();

    Group group = new Group(AxisLayout.vertical()).add(
            new Group(AxisLayout.horizontal(), Style.HALIGN.left).add(
                    new Button("Upper left")),
            AxisLayout.stretch(new Shim(1, 1)),
            new Group(AxisLayout.horizontal(), Style.HALIGN.right).add(
                    new Button("Lower right")));

    iface.createRoot(AxisLayout.vertical(), ROOT, modeLayer)
            .setBounds(0, 0, 960, 640)
            .add(group); 
```

它产生这个屏幕（即，它都是居中的，而不是左上/下...） ![在此处输入图像描述](../Images/d6d5fd582412791f00a107dd66cd620f.png)

第二个，完整代码如下： Font SMALL = PlayN.graphics().createFont("Helvetica", Font.Style.PLAIN, 24);

```
 final Stylesheet ROOT = SimpleStyles.newSheetBuilder().
            add(Element.class, make(FONT.is(SMALL))).
            add(Button.class, make(BACKGROUND.is(Background.solid(100)))).create();

    Group group = new Group(new BorderLayout()).add(
      new Group(AxisLayout.horizontal(), Style.HALIGN.left).
        setConstraint(BorderLayout.NORTH).add(
              new Button("Upper left")),
      new Group(AxisLayout.vertical(), Style.HALIGN.right).
        setConstraint(BorderLayout.SOUTH).add(
              new Button("Lower right")));

    iface.createRoot(AxisLayout.vertical(), ROOT, modeLayer)
            .setBounds(0, 0, 960, 640)
            .add(group); 
```

它产生这个屏幕截图（即，它居中*并*重叠......） ![在此处输入图像描述](../Images/c57011a46932ac13a686ccc936e80e9d.png)

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:49:10.797

编辑：哎呀，现在我看到你想要左上和右上，而不是左上和右下。您想要的配置更加简单。只需在按钮之间粘贴一个拉伸垫片：

```
iface.createRoot(AxisLayout.vertical().offStretch(), ROOT, modeLayer).
  setBounds(0, 0, width, height).
  add(new Group(AxisLayout.horizontal()).add(
    new Button("Upper-left"),
    AxisLayout.stretch(new Shim(1, 1)),
    new Button("Upper-right"))); 
```

原始答案：

AxisLayout 将其所有元素布置在一条（水平或垂直）行中。它们都必须彼此相邻，中间有可配置的间隙。如果要使用 AxisLayout 完成所需的布局，则需要使用嵌套组，如下所示：

```
+---------------------------------------+
|+-------------------------------------+|
|| [Button]    left-aligned AxisLayout ||
|+-------------------------------------+|
|                                       |
|        [stretched shim widget]        |  <-- vertical AxisLayout
|                                       |
|+-------------------------------------+|
|| right-aligned AxisLayout   [Button] ||
|+-------------------------------------+|
+---------------------------------------+ 
```

在代码中，它看起来像：

```
Group group = new Group(AxisLayout.vertical()).add(
  new Group(AxisLayout.horizontal(), Style.HALIGN.left).add(
    new Button("Upper left")),
  AxisLayout.stretch(new Shim(1, 1)),
  new Group(AxisLayout.horizontal(), Style.HALIGN.right).add(
    new Button("Lower right"))); 
```

您还可以使用 BorderLayout 来避免中间的垫片：

```
Group group = new Group(new BorderLayout()).add(
  new Group(AxisLayout().horizontal(), Style.HALIGN.left).
    setConstraint(BorderLayout.NORTH).add(
      new Button("Upper left")),
  new Group(AxisLayout.vertical(), Style.HALIGN.right).
    setConstraint(BorderLayout.SOUTH).add(
      new Button("Lower right"))); 
```

# mysql - 如果记录在其他表中不存在，则 MySQL 更新

> ID：10763980
> 
> 赞同：6
> 
> 时间：2012-05-26T05:55:38.630
> 
> 标签：mysql, sql, conditional-statements

我试图弄清楚是否可以检查表 B 中是否存在特定记录。如果存在，请不要更新表 A。

我试过谷歌搜索，但我只找到插入版本，我不确定是否可以使用更新查询。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T05:58:10.267

```
update table_to_update 
set some_column = 123
where id = 1
and id not in (select id from table_b) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-09T23:50:22.043

> 以下 SQL 语句用作外键，我在子表中添加一个新字段，条件是该值 **不**存在于主表的列中。

```
UPDATE t1
SET c1 = ?
WHERE t1.id = ?
AND ? NOT IN (SELECT id FROM t2); 
```

参数和表格的含义：

*   t1：子表
*   t2：主表
*   第一个？：如果满足条件，将在 t1.c1 的字段中建立的值
*   第二？: 待更新字段所在记录的标识符
*   第三？：评估条件所需的值，我将其与 t2 的字段进行比较

**第一个和第三个参数的值必须相同！**

*在使用该语句时，当我们引用主表的字段时，该列必须有一个主键。这就是为什么与外键相似的原因。*

* * *

第二种选择也是：

```
UPDATE t1 a
LEFT JOIN t2 b
ON b.column = ?
SET t1.c1 = ?
WHERE b.column IS NULL && a.id = ?; 
```

**第一个和第二个参数必须相同**。`column`主表的列在哪里。

*另一方面，当使用这句话时，我们有更大的灵活性，因为主表的列有主键不是必要条件。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-05T13:00:26.087

您也可以尝试使用 MySQL[存在](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)表达式。在较旧的 MySQL 版本（即 5.0）上使用 exists 语法对我来说比使用嵌套查询要快。

```
update table_a
set some_column = 'bla'
where not exists (select id
                        from table_b
                        where table_a.id = table_b.id) 
```

# syncfusion - Syncfusion WPF GridDataControl 公式验证

> ID：10763982
> 
> 赞同：1
> 
> 时间：2012-05-26T05:56:04.943
> 
> 标签：syncfusion

我有一个 Syncfusion WPF GridDataControl 9.4 版本。包含 2 列“A”和“B”

在它的可见列集合中，我添加了一个新列“AddAB”并为其提供了一个公式为“A+B”，它工作正常。将新列“AddAB”添加到网格中，并添加列 A 和 B 中的每个值

有什么办法可以验证我为“AddAB”列提供的这个公式“A+B”

需要对数学表达式以及列是否存在等进行验证......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:32:27.110

目前我们没有在外部验证表达式的选项。但是，我们为此在内部记录了功能报告，并且此功能将在我们的下一个版本中提供。

问候， 西瓦库玛

同步融合

# android - Android 确认对话框返回 true 或 false

> ID：10763986
> 
> 赞同：12
> 
> 时间：2012-05-26T05:56:34.443
> 
> 标签：android, dialog, confirmation

似乎没有简单的方法可以让警报对话框返回一个简单的值。
此代码**不起作用**（无法从侦听器中设置*答案*变量，实际上它甚至无法编译）

```
public static boolean Confirm(Context context) {
    boolean answer;
    AlertDialog dialog = new AlertDialog.Builder(context).create();
    dialog.setTitle("Confirmation");
    dialog.setMessage("Choose Yes or No");
    dialog.setCancelable(false);
    dialog.setButton(DialogInterface.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int buttonId) {
            answer = true;
        }
    });
    dialog.setButton(DialogInterface.BUTTON_NEGATIVE, "No", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int buttonId) {
            answer = false;
        }
    });
    dialog.setIcon(android.R.drawable.ic_dialog_alert);
    dialog.show();
    return answer;
} 
```

注意：方法是自包含的，即它不依赖于变量或外部构造，这一点很重要。只需调用它并得到你的答案，无论是对还是错。

那么该怎么办？**这个返回真假**的**简单**愿望似乎比它应得的要复杂得多。

此外，setButton 方法具有以下形式：

```
dialog.setButton(int buttonId, String buttonText, Message msg) 
```

但是不清楚如何使用它，消息发送到哪里，发给谁，使用哪个处理程序？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T03:24:37.260

我在这个论坛上发布了类似的问题，但最后我得到了答案。我在那篇文章中的问题是如何创建可以通过其他类或活动访问的单独确认对话框类，因此使用该确认对话框类我们不需要编写长代码。

这是我的答案。

首先你必须创建 DialogHandler.java

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import src.app.R;

public class DialogHandler {
    public Runnable ans_true = null;
    public Runnable ans_false = null;

    // Dialog. --------------------------------------------------------------

    public boolean Confirm(Activity act, String Title, String ConfirmText,
            String CancelBtn, String OkBtn, Runnable aProcedure, Runnable bProcedure) {
        ans_true = aProcedure;
        ans_false= bProcedure;
        AlertDialog dialog = new AlertDialog.Builder(act).create();
        dialog.setTitle(Title);
        dialog.setMessage(ConfirmText);
        dialog.setCancelable(false);
        dialog.setButton(DialogInterface.BUTTON_POSITIVE, OkBtn,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int buttonId) {
                         ans_true.run();
                    }
                });
        dialog.setButton(DialogInterface.BUTTON_NEGATIVE, CancelBtn,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int buttonId) {
                        ans_false.run();
                    }
                });
        dialog.setIcon(android.R.drawable.ic_dialog_alert);
        dialog.show();
        return true;
    }
} 
```

这是在另一个类中调用它的示例

```
public class YourActivity extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        findViewById(R.id.button1).setOnClickListener(myclick);
    }

    public final Button.OnClickListener myclick = new Button.OnClickListener() {
        @Override
        public void onClick(View v) {
            doclick();
        }
    };

    public void doclick() {
        DialogHandler appdialog = new DialogHandler();
        appdialog.Confirm(this, "Message title", "Message content",
                "Cancel", "OK", aproc(), bproc());
    }

    public Runnable aproc(){
        return new Runnable() {
            public void run() {
                Log.d("Test", "This from A proc");
            }
          };
    }

    public Runnable bproc(){
        return new Runnable() {
            public void run() {
                Log.d("Test", "This from B proc");
            }
          };
    }

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-26T14:34:36.330

好吧，我想说我对自己很满意，因为我自己找到了一个简单的答案！
但事实是，虽然我找到了一种返回值的方法（如下所示）。**这是没有用的**。

真正的问题是我想要一个同步对话框，一个等待用户回答的对话框，然后再恢复你的代码`dialog.show()`。
**Android 中没有这样的野兽**。所有对话都是异步的，所以`dialog.show()`只在某个队列中发布对话（我认为）并继续。因此，您无法及时得到答案。

对于下面的所有价值（没有），您将找到如何在构建对话框的方法中设置值。也许这种技术还有其他用途，与对话生命周期无关。

为了提供一些相关信息，我会说如果你更换

```
boolean answer; 
```

和

```
final boolean answer; 
```

可以从侦听器中访问变量，但不能为其分配新值，因为它被声明为**final**。

诀窍来了。
将变量定义为：

```
final boolean[] answer = new boolean[1]; 
```

你们中的一些人已经明白为什么这会奏效。这里的最终变量不是布尔数组的单个元素，而是数组本身。
因此，现在您可以根据需要分配数组元素 [0]。

```
dialog.setButton(DialogInterface.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int buttonId) {
        answer[0] = true;
    }
});
. . .
return answer[0]; 
```

最后你可以从你的方法中返回它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-26T06:38:54.513

您可以做的是为您的警报对话框创建一个侦听器，该侦听器使用接口侦听 AlertDialogs 操作。

创建一个接口。

```
public class MyInterface {

    DialogReturn dialogReturn;

    public interface DialogReturn {

        void onDialogCompleted(boolean answer);
    }

    public void setListener(DialogReturn dialogReturn) {
        this.dialogReturn = dialogReturn;
    }

    public DialogReturn getListener() {
        return dialogReturn;

    }
} 
```

现在，在您的类中实现您使用创建的接口`implements MyInterface.DialogReturn`

然后您可以设置侦听器并使其工作，如下所示，

```
public class Main extends Activity implements MyInterface.DialogReturn{

    MyInterface myInterface;
    MyInterface.DialogReturn dialogReturn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                ....
        myInterface = new MyInterface();
        myInterface.setListener(this);
    }

   public void Confirm(Context context) {
        AlertDialog dialog = new AlertDialog.Builder(context).create();
        dialog.setTitle("Confirmation");
        dialog.setMessage("Choose Yes or No");
        dialog.setCancelable(false);
        dialog.setButton(DialogInterface.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int buttonId) {
                myInterface.getListener().onDialogCompleted(true);
            }
        });
        dialog.setButton(DialogInterface.BUTTON_NEGATIVE, "No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int buttonId) {
                myInterface.getListener().onDialogCompleted(false);
            }
        });
        dialog.setIcon(android.R.drawable.ic_dialog_alert);
        dialog.show();
         }

@Override
    public void onDialogCompleted(boolean answer) {
        Toast.makeText(Main.this, answer+"", Toast.LENGTH_LONG).show();
            if(answer)
            // do something
            else
            // do something
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-26T23:13:55.560

我发现在您想要等待输入的情况下使用[jDeferred 会有所帮助。](https://github.com/jdeferred/jdeferred)

它本质上等同于使用接口，但是您创建完成和失败处理程序。只是一个可供考虑的替代方案：

```
new ConfirmationDialog(mContext)
        .showConfirmation("Are you sure?", "Yes", "No")
        .done(new DoneCallback<Void>() {
            @Override
            public void onDone(Void aVoid) {
                ....
            }
        })
        .fail(new FailCallback<Void>() {

            @Override
            public void onFail(Void aVoid) {
                ...
            }
        }); 
```

执行：

```
public class ConfirmationDialog {

    private final Context mContext;
    private final DeferredObject<Void, Void, Void> mDeferred = new DeferredObject<Void, Void, Void>();

    public ConfirmationDialog(Context context) {
        mContext = context;
    }

    public Promise<Void, Void, Void> showConfirmation(String message, String positiveButton, String negativeButton) {
        AlertDialog dialog = new AlertDialog.Builder(mContext).create();
        dialog.setTitle("Alert");
        dialog.setMessage(message);
        dialog.setCancelable(false);
        dialog.setButton(DialogInterface.BUTTON_POSITIVE, positiveButton, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int buttonId) {
                mDeferred.resolve(null);
            }
        });
        dialog.setButton(DialogInterface.BUTTON_NEGATIVE, negativeButton, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int buttonId) {
                mDeferred.reject(null);
            }
        });
        dialog.setIcon(android.R.drawable.ic_dialog_alert);
        dialog.show();
        return mDeferred.promise();
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-18T12:30:54.430

对于 Andriod，等待用户说“是”或“否”来阻止正在运行的线程并不是一个好主意。

为了要求确认，您可以定义一个接收 AsynTask 的方法。如果用户按下确认按钮，该方法将执行该任务。

例如：

```
 //this method displays a confirm dialog. If 'yes' answer, runs 'yesTask', 
    //if 'no' answer, runs 'noTask'
    //notice than 'yesTask' and 'noTask' are AysncTask
    //'noTask' can be null, example: if you want to cancel when 'no answer'

    public static void confirm(Activity act, String title, String confirmText,
                       String noButtonText, String yesButtonText,
                       final AsyncTask<String, Void, Boolean> yesTask,
                       final AsyncTask<String, Void, Boolean> noTask) {

    AlertDialog dialog = new AlertDialog.Builder(act).create();
    dialog.setTitle(title);
    dialog.setMessage(confirmText);
    dialog.setCancelable(false);
    dialog.setButton(DialogInterface.BUTTON_POSITIVE, yesButtonText,
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int buttonId) {
                yesTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
            }
        });
    dialog.setButton(DialogInterface.BUTTON_NEGATIVE, noButtonText,
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int buttonId) {
                if(noTask!=null) {
                    noTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
                }

            }
        });
    dialog.setIcon(android.R.drawable.ic_dialog_alert);
    dialog.show();
} 
```

您可以通过以下方式从您的活动中调用它：

```
 YourTask yourTask =  new YourTask( ... );
 confirm( YourActivity.this, 
         "Confirm", 
         "Are you sure?", 
         "Cancel", 
         "Continue", 
         yourTask,
         null); 
```

`YourTask`类必须扩展`AsyncTask`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T06:03:36.440

在您的活动中声明一个字段“答案”并为其设置一个值。类的字段对内部类是可见的，因此您可以这样做。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-05T14:47:49.557

我也在努力使用阻止确认对话框，最后我使用 BlockingQueue 做到了：

```
public static class BlockingConfirmDialog{

    private Activity context;

    BlockingQueue<Boolean> blockingQueue;

    public BlockingConfirmDialog(Activity activity) {
        super();
        this.context = activity;
        blockingQueue = new ArrayBlockingQueue<Boolean>(1);
    }

    public boolean confirm(final String title, final String message){

        context.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                new AlertDialog.Builder(context)
                .setTitle(title)
                .setMessage(message)
                .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) { 
                        blockingQueue.add(true);
                    }
                 })
                 .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        blockingQueue.add(false);
                    }
                })
                 .show();
            }
        });

        try {
            return blockingQueue.take();
        } catch (InterruptedException e) {
            e.printStackTrace();
            return false;
        }

    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-16T01:06:31.900

我已经尝试了所有的解决方案，在我看来，最简单和最干净的是 Runnable 的第一个解决方案。它支持取消按钮侦听器、OnBAckPressed() 和 onOptionsItemSelected() 上的对话框。

所描述的代码虽然调用了 ans_false.run(); 单击 BUTTON_POSITIVE 和 ans_true.run() 时；单击 BUTTON_NEGATIVE 时。

这是我用来解决该问题的代码：

```
public class MyDialogs {

// private constructor
public Runnable answerTrue = null;
public Runnable answerFalse = null;

// Dialog. --------------------------------------------------------------

public boolean confirm(Activity act, String Title, String ConfirmText,
                       String noBtn, String yesBtn, Runnable yesProc, Runnable noProc) {
    answerTrue = yesProc;
    answerFalse= noProc;
    AlertDialog.Builder alert = new AlertDialog.Builder(act);
    alert.setTitle(Title);
    alert.setMessage(ConfirmText);
    alert.setCancelable(false);
    alert.setPositiveButton(R.string.button_positive, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            answerTrue.run();
        }
    });
    alert.setNegativeButton(R.string.button_negative, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            answerFalse.run();
        }
    });
    alert.show().getButton(DialogInterface.BUTTON_NEGATIVE).requestFocus();
    return true;
} 
```

}

# vb.net - 以编程方式通过注册表更改 dpi 设置？

> ID：10763996
> 
> 赞同：0
> 
> 时间：2012-05-26T05:58:16.833
> 
> 标签：vb.net, nullreferenceexception, dpi

我设计了一个包含一些表格的项目。问题是它不能在宽显示器上正确显示。我已经搜索过它，发现它对于 dpi=96 可以正常工作。我想通过 vb.net 中的注册表更改 dpi（不是手动）这是我使用的代码：

```
 Dim dpi As Graphics = Me.CreateGraphics
    If (dpi.DpiX <> 96 And dpi.DpiY <> 96) Then
        Dim DPISetting As RegistryKey = My.Computer.Registry.CurrentUser.OpenSubKey("HKEY_CURRENT_USER\Control Panel\Desktop\WindowsMetrics", True)
        DPISetting.SetValue("AppliedDPI", 96) '**
    End If 
```

但是我在 ** 行得到了一个 nullRefrence 异常。你调用的对象是空的。我真的研究了很长时间，但找不到问题所在。如果您对此有任何建议或解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:48:38.440

**This design is fundamentally broken.**

[Your application should *not* change a global system setting just to work around a bug in the code.](http://blogs.msdn.com/b/oldnewthing/archive/2008/12/11/9193695.aspx) That's a good way to guarantee that your users will *immediately* uninstall your application and never use it again. If you're lucky, they won't tell their friends. You're usually not so lucky.

Instead of trying to make your hack work, why not just fix the actual problem? If your form doesn't display correctly at high (or low) DPI settings, you need to make it work in those scenarios. That's part of developing desktop apps—making sure that your app works in heterogeneous environments.

To that end, you might find the advice in these answers useful:

*   [Automatically scaling child controls when a form is maximized](https://stackoverflow.com/questions/10461876/automatically-scaling-child-controls-when-a-form-is-maximized/10461917#10461917)
*   [Detect windows font size (100%, 125%, 150%)](https://stackoverflow.com/questions/9373260/detect-windows-font-size-100-125-150/9373703#9373703)