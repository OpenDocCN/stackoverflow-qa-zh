# StackOverflow 问答 11328000-11328999

# r - 子集参数如何在 lm() 函数中工作？

> ID：11328003
> 
> 赞同：7
> 
> 时间：2012-07-04T11:17:02.993
> 
> 标签：r, linear-regression, lm

我一直试图弄清楚`subset`R`lm()`函数中的参数是如何工作的。特别是以下代码对我来说似乎很可疑：

```
 data(mtcars)
 summary(lm(mpg ~ wt,  data=mtcars))
 summary(lm(mpg ~ wt, cyl, data=mtcars)) 
```

在每种情况下，回归都有 32 个观察值

```
 dim(lm(mpg ~ wt, cyl  ,data=mtcars)$model)
  [1] 32  2
   dim(lm(mpg ~ wt  ,data=mtcars)$model)
  [1] 32  2 
```

但是系数会发生变化（与 R² 一起）。帮助没有提供太多关于这个问题的信息：

> 子集 一个可选向量，指定要在拟合过程中使用的观察子集

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T11:23:54.600

作为一般原则，用于子集的向量可以是逻辑的（例如，每个元素的 TRUE 或 FALSE）或数字（例如数字）。作为一个帮助采样的特性，如果它是数字 R 将多次包含相同的元素，如果它出现在子集数字向量中。

让我们来看看`cyl`：

```
> mtcars$cyl
 [1] 6 6 4 6 8 6 8 4 4 6 6 8 8 8 8 8 8 4 4 4 4 8 8 8 8 4 4 4 8 6 8 4 
```

所以你得到了一个相同长度的 data.frame，但它由第 6 行、第 6 行、第 4 行、第 6 行等组成。

如果您自己进行子集化，您可以看到这一点：

```
> head(mtcars[mtcars$cyl,])
                mpg cyl  disp  hp drat    wt  qsec vs am gear carb
Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Valiant.1      18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
Valiant.2      18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
Valiant.3      18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1 
```

你的意思是做这样的事情吗？

```
summary(lm(mpg ~ wt, cyl==6, data=mtcars)) 
```

# iphone - 与Facebook连接

> ID：11328009
> 
> 赞同：2
> 
> 时间：2012-07-04T11:17:20.530
> 
> 标签：iphone, objective-c, facebook

我在 iphone 中使用 fbcoonect 连接 facebook。当我第一次登录时，它会提供数据，但在注销 facebook 并使用另一个帐户登录后，也会提供与上次给定的数据相同的数据。我的代码在这里像 -

```
- (void)session:(FBSession*)session didLogin:(FBUID)uid {
self.usersession =session;

NSString* fql = [NSString stringWithFormat:
                 @"select     uid,name,first_name,middle_name,last_name,birthday,email,pic_square from user where uid == %lld",self.usersession.uid];

[NSDictionary dictionaryWithObject:fql
                            forKey:@"query"];
[[FBRequest requestWithDelegate:self]
 call:@"facebook.fql.query" params:params];
NSLog(@"User with id %lld logged in.", uid);
self.post=NO;} 
```

我也尝试这样的代码 -

```
 - (void)session:(FBSession*)session didLogin:(FBUID)uid {
self.usersession =session;
NSLog(@"User with id %lld logged in.", uid);
[self getFacebookName];}

- (void)getFacebookName {
NSString* fql = [NSString stringWithFormat:
                 @"select uid,name,first_name,middle_name,last_name,birthday,email,pic_square from user where uid == %lld",self.usersession.uid];

NSDictionary* params =
[NSDictionary dictionaryWithObject:fql
                            forKey:@"query"];
[[FBRequest requestWithDelegate:self]
 call:@"facebook.fql.query" params:params];
self.post=NO;   
} 
```

但它有同样的错误。请给出解决方案。

# .net - 在 64 位机器上运行 32 位 .NET 应用程序

> ID：11328010
> 
> 赞同：0
> 
> 时间：2012-07-04T11:17:20.910
> 
> 标签：.net, 32bit-64bit

我有一个应用程序，其项目的平台为任何 CPU。在 VS2008 的 64 位机器（win7）上运行应用程序时，我可以在任务管理器进程中看到 *32，这意味着它以 32 位模式运行。但是我已经阅读了具有 Platform as Any CPU 的应用程序根据机器运行（在我的情况下为 64 位）。我都很困惑。请解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:24:59.903

您确定创建实际可执行文件的项目设置为`AnyCPU`而不是`x86`？该项目以及所有引用的项目都应设置为`AnyCPU`. 如果这样做，该进程将在 64 位 Windows 上作为 64 位进程运行（在 32 位 Windows 上作为 32 位进程运行）。

.EXE 项目的平台目标决定了应用程序的“位数”。如果任何引用的 .DLL 项目的“位”与正在运行的应用程序的“位”不兼容，您将收到运行时错误。例如，如果`AnyCPU`.EXE 项目引用`x86`.DLL 项目，它将在 32 位 Windows 上成功运行，但在 64 位 Windows 上会因运行时错误而失败。

* * *

问题是关于 Visual Studio 2008 但带有 .NET 4.5 的 Visual Studio 2012 引入了[anycpu32bitpreferred 设置](https://msdn.microsoft.com/en-us/library/zekwfyz4(v=vs.110).aspx)：

> **anycpu32bitpreferred**编译您的程序集以在任何平台上运行。您的应用程序在支持 64 位和 32 位应用程序的系统上以 32 位模式运行。您只能为面向 .NET Framework 4.5 的项目指定此选项。

启用此设置（Visual Studio 中的默认设置）意味着`AnyCPU`即使在 64 位操作系统上，应用程序也将以 32 位执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:21:16.270

由于 VS2008 是 32 位的，我希望它也能启动 32 位进程。另一个原因可能是您仅引用 32 位 DLL？

您是否尝试过在 VS2008 之外运行该应用程序 - 它是否仍处于 32 位模式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:24:03.620

1.  转到构建 => 配置管理器
2.  单击 Active Solution Platform 下拉列表并选择 。
3.  在类型或选择新平台下拉列表中，选择“x64”。
4.  点击确定。

# android - Android：如何在 BaseAdapter 类中创建应用程序类对象

> ID：11328018
> 
> 赞同：1
> 
> 时间：2012-07-04T11:17:49.750
> 
> 标签：android, listview, baseadapter

我正在开发一个 Android 应用程序并在 Application Class 中维护全局变量`MyAppData`。现在为了使用这些全局变量，我`MyAppData`在我的 Activity 中创建对象，如下所示：

```
MyAppData mad;
mad = (MyAppData)getApplication(); 
```

由于我的活动有一个自定义列表视图，我正在使用 BaseAdapter 来填充 LstView。现在我需要在我的 BaseAdapter 类中使用全局变量。以下代码不允许我创建`MyAppData`类对象：

```
public class AlbumList_Adapter extends BaseAdapter{
Context context;
MyAppData mad;

      public AlbumList_Adapter(Context context){
      this.context = context
      mad = (MyAppData)getApplication();
      }
} 
```

即使我尝试过`mad = (MyAppData)context;`，但没有运气。我不知道我错在哪里了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T11:35:56.313

你可以有：

```
class MyApplication extends Application {

 private static MyApplication mInstance;

@Override
public void onCreate() {
  super.onCreate();
  mInstance = this;
}

public static MyApplication getInstance() { return mInstance; }

} 
```

然后您可以`MyApplication.getInstance()`在整个代码中使用。

# .net - 如何将 NHibernate 与 System.Tuple 等不可变类型一起使用？

> ID：11328026
> 
> 赞同：2
> 
> 时间：2012-07-04T11:18:23.527
> 
> 标签：.net, nhibernate, nhibernate-mapping, tuples, immutability

我有一个使用[`System.Tuple<int,string>`](http://msdn.microsoft.com/en-us/library/dd268536.aspx)如下的复合映射：

```
<composite-element
  class="System.Tuple`2[[System.Int32, mscorlib],[System.String, mscorlib]], mscorlib">
    <property name="Item1" column="DBColumn1"/>
    <property name="Item2" column="DBColumn2"/>
</composite-element> 
```

我尝试弄乱`BytecodeProvider`,`IObjectsFactory`和`ReflectionOptimizer`诸如此类的东西，但我无法让 NHibernate 正确加载我的元组（无论我做什么，NHibernate 都坚持首先创建对象并稍后填充值）。

NHibernate 可以以某种方式强制正确加载和持久化不可变类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T14:15:15.080

你试过[`ICompositeUserType`](http://www.nhforge.org/doc/nh/en/index.html#mapping-types-custom)吗？它将允许您为您的`Tuple<int, string>`属性定义这样的映射：

```
<property name="MyProperty" type="MyNamespace.TupleIntStringType, MyAssembly">
    <column name="Item1"/>
    <column name="Item2"/>
</property> 
```

自定义类型定义为：

```
public class TupleIntStringType : ICompositeUserType
{
    public object GetPropertyValue(object component, int property)
    {
        var tuple = (Tuple<int, string>)component;
        switch (property)
        {
            case 0:
                return tuple.Item1;
            case 1:
                return tuple.Item2;
            default:
                throw new InvalidOperationException(String.Format("No property number {0} found", property));
        }
    }

    public void SetPropertyValue(object component, int property, object value)
    {
        throw new InvalidOperationException("Immutable, SetPropertyValue is not allowed");
    }

    public new bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y)) return true;

        if (x == null || y == null) return false;

        return x.Equals(y);
    }

    public int GetHashCode(object x)
    {
        return x == null ? 0 : x.GetHashCode();
    }

    public object NullSafeGet(IDataReader dr, string[] names, ISessionImplementor session, object owner)
    {
        var item1 = (int)PropertyTypes[0].NullSafeGet(dr, names[0], session, owner);
        var item2 = (String)PropertyTypes[1].NullSafeGet(dr, names[1], session, owner);

        return Tuple.Create(item1, item2);
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index, bool[] settable, ISessionImplementor session)
    {
        if (value == null)
        {
            NHibernateUtil.Timestamp.NullSafeSet(cmd, null, index);
            NHibernateUtil.TimeSpan.NullSafeSet(cmd, null, index + 1);
        }
        else
        {
            var tuple = (Tuple<int, String>)value;

            PropertyTypes[0].NullSafeSet(cmd, tuple.Item1, index, session);
            PropertyTypes[1].NullSafeSet(cmd, tuple.Item2, index + 1, session);
        }
    }

    public object DeepCopy(object value)
    {
        var tuple = (Tuple<int, String>)value;
        return Tuple.Create(tuple.Item1, tuple.Item2);
    }

    public object Disassemble(object value, ISessionImplementor session)
    {
        return DeepCopy(value);
    }

    public object Assemble(object cached, ISessionImplementor session, object owner)
    {
        return DeepCopy(cached);
    }

    public object Replace(object original, object target, ISessionImplementor session, object owner)
    {
        return DeepCopy(original);
    }

    public string[] PropertyNames { get { return new[] { "Item1", "Item2" }; } }
    public IType[] PropertyTypes { get { return new IType[] { NHibernateUtil.Int32, NHibernateUtil.String }; } }
    public Type ReturnedClass { get { return typeof(Tuple<int, string>); } }
    public bool IsMutable { get { return false; } }
} 
```

下面是几个例子：
[Money 对象和 NHibernate ICompositeUserType](http://geekswithblogs.net/opiesblog/archive/2006/08/05/87218.aspx)
[使用 NHibernate 的 ICompositeUserType 映射时间戳数据 使用](http://lostechies.com/rayhouston/2008/03/24/mapping-timestamp-data-using-nhibernate-s-icompositeusertype/)
[带有值类型的 NHibernate ICompositeUserType](https://stackoverflow.com/questions/1189418/using-nhibernate-icompositeusertype-with-a-value-type)

然后您的映射`<composite-element>`更改为（如[NHIbernate 中所示：如何使用 ICompositeUserType 映射包](https://stackoverflow.com/a/8970354/3205)）：

```
<element type="MyNamespace.TupleIntStringType, MyAssembly">
  <column name="DBColumn1" />
  <column name="DBColumn2" />
</element> 
```

# c# - 带有 IList 的 LINQ 问题

> ID：11328032
> 
> 赞同：1
> 
> 时间：2012-07-04T11:18:42.383
> 
> 标签：c#, linq

我有一个数据表，我需要在其中将每一行转换为 IList

```
public IList<SelectListItem> _area = new List<SelectListItem>();
public IList<SelectListItem> _team = new List<SelectListItem>();

     foreach (DataRow row in dt.Rows)
            {
       _area.Add(new SelectListItem() { Text = row[1].ToString(), Value = row[1].ToString() });
       _team.Add(new SelectListItem() { Text = row[0].ToString(), Value = row[0].ToString() });

            } 
```

然后在 _area 中获得的数据如下所示：-

```
Text                     Value
OMC                      OMC
OMC                      OMC
OMC                      OMC
SIAM                     SIAM
SIAM                     SIAM
SIAM                     SIAM                     
SIAM                     SIAM                     
SIAM                     SIAM 
```

我需要使用 LINQ 来获取 DISTINCT 值。

我试过简单地使用：-

```
_area.Distinct(); 
```

但是我留下了 32 个我开始的条目？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:21:00.637

你试过这个`_area = _area.Distinct();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:26:16.403

```
_area.GroupBy(x => x.Value).Select(x => x.Key); 
```

这将为您提供这些区域的独特价值......

像这样怎么样

```
_area.GroupBy(x => x.Value).Select(x => x.First()); 
```

你能更好地解释什么是 Distinct，也许你应该重写 Equals 和 GetHashCode 这样它就可以工作 Distinct，像这样

```
class Foo
{
    public string Text { get; set; }
    public string Value { get; set; }

    public override bool Equals(object obj)
    {
        var foo = obj as Foo;
        if(foo == null) return false;

        return foo.Text == Text && foo.Value == Value;
    }

    public override int GetHashCode()
    {
        return Text.GetHashCode() * Value.GetHashCode() ^ 7;    
    }
} 
```

然后这将按您的预期工作（希望如此）

```
_area.Distinct(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T11:42:41.767

该`Distinct()`方法采用一个类型的参数，`IEqualityComparer<T>`因此在这种情况下，您可以创建一个相等比较器来比较两个的两个值，`SelectListItems`如下所示：

```
public class SelectListItemComparer : IEqualityComparer<SelectListItem>
{
    public static SelectListItemComparer Instance = new SelectListItemComparer();
    private SelectListItemComparer() {}
    public bool Equals(SelectListItem x, SelectListItem y)
    {
        return x.Value.Equals(y.Value);
    }

    public int GetHashCode(SelectListItem obj)
    {
        return obj.Value.GetHashCode();
    }
} 
```

然后你可以像这样使用它：

```
var items = new[]
                {
                    new SelectListItem {Text = "OMC", Value = "OMC"},
                    new SelectListItem {Text = "OMC", Value = "OMC"},
                    new SelectListItem {Text = "OMC", Value = "OMC"},
                    new SelectListItem {Text = "SIAM", Value = "SIAM"},
                    new SelectListItem {Text = "SIAM", Value = "SIAM"},
                    new SelectListItem {Text = "SIAM", Value = "SIAM"},
                    new SelectListItem {Text = "SIAM", Value = "SIAM"},
                    new SelectListItem {Text = "SIAM", Value = "SIAM"}
                };

var comparer = new SelectListItemComparer();
var t1 = items.Distinct(SelectListItemComparer.Instance).ToList(); 
```

`t1`现在将只包含两个元素。

# entity-framework - CREATE DATABASE 语句是在 Entity Framework Code First with Migrations 中生成的？

> ID：11328038
> 
> 赞同：0
> 
> 时间：2012-07-04T11:18:58.483
> 
> 标签：entity-framework, code-first, entity-framework-4.3, entity-framework-migrations

我需要配置由 Entity Framework Code First MigrateDatabaseToLatestVersion 类创建的数据库。

是否可以影响数据库文件参数，如大小或最大大小？我特别感兴趣的是，有没有办法添加数据库文件？

我假设我需要找到实体框架生成 CREATE DATABASE 语句的时刻并对其产生一些影响。据我了解，SqlServerMigrationSqlGenerator 类为时已晚，因为此时数据库已经存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:54:37.193

*编辑：根据评论这不起作用：* ~~您可以使用`Add-Migration`命令添加基于代码的迁移并修改其`Up`方法以执行`Sql("ALTER DATABASE ...")`并使用您的数据库执行您想要的任何操作。~~

数据库是通过`DbProviderServices`- 这是 EF 和特定数据库服务器之间的桥接组件创建的。`ObjectContext`公开创建数据库和生成数据库创建脚本的操作。`DbMigrator`执行时使用数据库创建操作`Update`。它检查数据库是否存在，如果不存在，则使用`ObjectContext.CreateDatabase`. 所以如果你想改变创建数据库的过程，你需要实现你自己的迁移器实现来改变`Update`方法生成数据库的方式（也许你只需要一个装饰器，它会在执行操作之前创建一个数据库`DbMigrator.Update`）。

# iphone - uitableview 的最后一行中的值发生变化

> ID：11328040
> 
> 赞同：3
> 
> 时间：2012-07-04T11:19:06.730
> 
> 标签：iphone, ios, xcode, uitableview, uilabel

我有一个 UITableView，每行都有一个带有浮点值的标签。最后一行中的最后一个标签应显示总金额。

它显示的总金额很好，但如果 tableView 滚动到屏幕外并返回，金额会增加。

```
 if(tableView == self.allTab)
{
if(indexPath.section == 0)
    {
        self.firstLabel.text = @"Category";
        self.firstLabel.textColor = [UIColor redColor];
        self.secondLabel.text = @"Date";
        self.secondLabel.textColor = [UIColor redColor];
        self.thirdLabel.text = @"Amount";
        self.thirdLabel.textColor = [UIColor redColor];
    }  

else if(indexPath.section == 1)
    {
        NSManagedObject *records = nil;
        records = [self.listOfExpenses objectAtIndex:indexPath.row];
        self.firstLabel.text = [records valueForKey:@"category"];
        NSString *dateString = [NSString stringWithFormat:@"%@",[records valueForKey:@"date"]];
        NSString *dateWithInitialFormat = dateString;
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
        [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss Z"];
        NSDate *date = [dateFormatter dateFromString:dateWithInitialFormat];
        [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
        NSString *dateWithNewFormat = [dateFormatter stringFromDate:date];
        self.secondLabel.text = dateWithNewFormat;
        NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
        self.thirdLabel.text = amountString;
        totalAmount = totalAmount + [amountString doubleValue];
    }

else if(indexPath.section == 2)
{
        self.firstLabel.text = @"Total";
        self.firstLabel.textColor = [UIColor redColor];
        self.thirdLabel.text = [NSString stringWithFormat:@"%.2f",totalAmount];
        self.thirdLabel.textColor = [UIColor redColor];
        self.thirdLabel.adjustsFontSizeToFitWidth = YES;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:30:53.690

您不应该在 cellForRowAtIndexPath 内计算总计，因为当它再次滚动它时会计算总计，因此请使用其他方法计算总计，如下所示：

```
-(float)calculateTotal
{
    totalAmount = 0;
   for(int i =0;i<[self.listOfExpenses length];i++)
   {
      NSManagedObject *records = nil;
        records = [self.listOfExpenses objectAtIndex:i];
      NSString *amountString = [NSString stringWithFormat:@"%@",[records valueForKey:@"amount"]];
      totalAmount = totalAmount + [amountString doubleValue];
   }

 return totalAmount;
} 
```

并将其分配如下：

```
 self.thirdLabel.text = [NSString stringWithFormat:@"%.2f",[self calculateTotal]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:30:11.933

你在哪里申报了totalAmount？您是否将其设为实例变量？这就是它保持其价值的原因。相反，您应该在本地声明 totalAmount 并将其初始化为零。

就像是：

```
else if(indexPath.section == 1)
{
    double totalAmount = 0.0;
    //.... Your code... And then Calculate totalAmount.
} 
```

我认为它会以这种方式工作。

# java - Java：URLConnection中setDoInput的目的是什么

> ID：11328043
> 
> 赞同：7
> 
> 时间：2012-07-04T11:19:14.087
> 
> 标签：java, http-post, urlconnection

> **可能重复：**
> [Java HttpURLConnection](https://stackoverflow.com/questions/5583064/java-httpurlconnection)

例如，如果我想从我连接的服务器读取对 POST 方法调用的响应，是否会使用此方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T11:28:56.737

我从未遇到过将其设置为假的情况。你总是想读一些东西，至少是响应代码。

# ajax - Valums 文件上传器：获取文件系统中文件的完整路径

> ID：11328054
> 
> 赞同：0
> 
> 时间：2012-07-04T11:19:55.910
> 
> 标签：ajax, file-upload

我正在使用值文件上传器，我想在用户选择任何文件后在文本框中显示文件路径（如标准文件上传）。有没有可能的解决方案来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:27:21.323

不。根据我的研究，我发现许多帖子表明浏览器安全功能会阻止对象知道文件系统，直到调用适当的提交操作。

此外，他们建议，如果您确实想显示完整路径，则需要一个非浏览器解决方案，如 java 插件（甚至可能是 flash 对象也可以做到）。

# algorithm - 从后缀符号构建表达式树的问题

> ID：11328055
> 
> 赞同：0
> 
> 时间：2012-07-04T11:20:04.727
> 
> 标签：algorithm, language-agnostic, expression-trees, postfix-notation

我目前正在为简单的数学表达式（常量和简单的算术）编写一个 impreter。

我遇到的问题是从后缀格式的表达式构建表达式树。我所做的在大多数情况下都可以正常工作，[但不适用于 Wikipedia 中的这个示例](http://en.wikipedia.org/wiki/Shunting-yard_algorithm#Detailed_example)。

如果我评估表达式，即使结果应该是`3 + 4 * 2 / ( 1 - 5 ) ^ 2 ^ 3`，我也会得到结果。原因似乎是表达式树看起来像而不是.`3,0001220703125``3,001953125``3+((4*2)/((1-5)^(2^3)))``(3+((4*2)/(((1-5)^2)^3)))`

原始表达式的后缀表示法看起来像`3 4 2 * 1 5 − 2 3 ^ ^ / +`

**任何建议如何获得我想要的表达式树？**
下面是表达式树代码的后缀和一些 C# 中的测试，但应该是不言自明的。

```
public MathExpression Parse()
{
    var tokens = this.ToPostFix(_tokens);
    var stack = new Stack<MathExpression>();
    foreach(token in tokens)
    {
        if(token.IsOperand())
        {
            // Push the operand on the stack.
            stack.Push(new ConstantExpression(token.Value));
        }
        else
        {
            Debug.Assert(token.Type == TokenType.Operator, "Expected operator.");
            var op = (Operator)token.Value;
            var right = stack.Pop();
            var left = stack.Pop();
            var expression = new ArithmeticExpression(op, left, right);
            stack.Push(expression);
        }
    }
    Debug.Assert(stack.Count == 1, "More than one expression on stack.");
    return stack.Pop();
} 
```

还有一些测试：

```
[Test]
public void Wikipedia_Example_Can_Be_Evaluated()
{
    var expected = 3+4*2/(1-5)^2^3; // 3,001953125
    var actual = MathExpression.Parse("3 + 4 * 2 / ( 1 - 5 ) ^ 2 ^ 3")
                               .Evaluate(); // 3,0001220703125
    Assert.AreEqual(expected, actual); // Not equal :(
}

[Test]
public void Can_Convert_To_Prefix()
{
    string expected = "3 4 2 * 1 5 − 2 3 ^ ^ / +"
    string actual = MathExpression.ToPostFix("3+4*2/(1-5)^2^3")
    Assert.AreEqual(expected, actual); // Works as expected
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:37:38.400

维基百科页面包含以下评论：

> `^`从右到左评估

~~我没有看到您的代码考虑到这一点，`^`它与其他运算符一样被视为左关联。~~

这意味着您的解释可能是错误的：

`x ^ 2 ^ 3` => `x^(2^3)`=>`x 2 3 ^ ^`

并且您的代码和原始答案（3,0001220703125）是正确的。

# c# - C# WebClient 下载字符串 https

> ID：11328061
> 
> 赞同：5
> 
> 时间：2012-07-04T11:20:36.590
> 
> 标签：c#, .net, xamarin.ios

在网络浏览器中，我通常可以加载以下网址： `https://security.ultimatxxxx.com:443/Serverstatus.ashx`

当我这样做时：

```
Webclient.DownloadStringAsync("https://security.ultimatxxxx.com:443/Serverstatus.ashx"); 
```

出于测试目的，您可以调用:`ultimate-eur`而不是`ultimatxxxx`.

它不起作用，但是当我加载没有 https 的普通 URL 时，我没有问题。我必须添加哪个参数以便 Webclient 也可以下载字符串？

我想在 Monotouch 中使用该功能，但语言是 C#。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T11:25:13.553

如果您只想接受所有证书，则需要在提出请求之前设置证书检查：

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; }; 
```

这将接受所有证书。

虽然 - 如果您需要实际检查证书，请执行以下操作：

```
ServicePointManager.ServerCertificateValidationCallback =
    (sender, certificate, chain, sslPolicyErrors) => 
    {
        //to check certificate
    }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T11:28:29.410

一个可能的原因可能是某些网站为不同的浏览器提供不同的结果。

您可以尝试提供浏览器信息以假装呼叫来自浏览器。

```
var client = new WebClient();
client.Headers["User-Agent"] = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15";
string download = client.DownloadString("https://security.ultimatxxxx.com:443/Serverstatus.ashx"); 
```

或者

> 你还没有绑定调用`completedEvent`的。`Aysnc`

# android - 从搜索栏以编程方式在片段中创建 EditText 字段

> ID：11328062
> 
> 赞同：0
> 
> 时间：2012-07-04T11:20:37.580
> 
> 标签：android, android-edittext, android-fragments, seekbar

编辑：这是您建议的新代码：

```
package com.mwerner.mycalc.finance;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class F_NPV extends Fragment {

    EditText[] DynamicField = new EditText[16];

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
            return inflater.inflate(R.layout.npv, container, false);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    final LinearLayout linearLayout = (LinearLayout)getActivity().findViewById(R.id.npv_calcfields);
    EditText editText = new EditText(getActivity());
    final int i = 0;
    editText.setId(i); //Set id so that you can remove that EditText in the future.
    editText.setLayoutParams(new LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
    linearLayout.addView(editText);
    SeekBar bar = (SeekBar) getActivity().findViewById(R.id.npv_seekbar);
    final TextView selection = (TextView) getActivity().findViewById(R.id.npv_selected);

    bar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar seekbar, int progress,
                boolean fromUser) {
            // to display to the user how many he has selcted
            selection.setText("You chose " + progress + "periods");
            if ( i > progress) {
                i--;
                EditText editText = (EditText) getActivity().findViewById(i);
                linearLayout.removeView(editText);
            }

            else {
                EditText editText = new EditText(getActivity());
                editText.setId(i);
                editText.setHint("EditText No: " + (i+1));
                editText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                linearLayout.addView(editText);
                i++;
            }
        }
        public void onStopTrackingTouch(SeekBar seekbar) {}
        public void onStartTrackingTouch(SeekBar arg0) {}
    });
}
} 
```

编辑2：

当我快速向下滑动时，我修复了减少字段数量的“滞后”。

```
bar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
    public void onProgressChanged(SeekBar seekbar, int progress,
        boolean fromUser) {
         // to display to the user how many he has selcted

        selection.setText("You chose " + progress + "periods");
        if ( i > progress) {
            while (i > progress) {
                i--;
                EditText editText = (EditText) getActivity().findViewById(i);
                linearLayout.removeView(editText);  
            }
        }

        else {
            while (i < progress) {
                EditText editText = new EditText(getActivity());
                editText.setId(i);
                editText.setHint("EditText No: " + (i+1));
                editText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
                linearLayout.addView(editText);
                i++;    
            }
        }
    }
    public void onStopTrackingTouch(SeekBar seekbar) {}
    public void onStartTrackingTouch(SeekBar arg0) {}
}); 
```

现在我需要对每个字段进行相同的数学运算：

```
answer = entry / (Math.pow(1+r , i) 
```

基本上每个条目都除以`(1+r)`该字段具有的 id 的幂...所以第一个文本编辑除以`(1+r)^0`，第二个字段除以`(1+r)^1`等等..我该怎么做？

编辑3：

```
calc.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
        Double r1 = Double.parseDouble(r.getText().toString());
        EditText editText = (EditText) getActivity().findViewById(i);
        TextView answer = (TextView) getActivity().findViewById(R.id.npv_answer);
        double[] CashFlows;
        CashFlows = new double[i];
        double result = 0;
        for (int i1 = 0; i1 < i; i1++) {
            CashFlows[i] = (Double.parseDouble(editText.getText().toString()))/(Math.pow(1+r1, i));

        }

        for(double d : CashFlows) {
            result += d;
        }

        answer.setText("answer is " + result);
        }
    }); 
```

基本上这是我的思考过程。请告诉我哪里出了严重的错误，因为这会在`fragment`加载时导致崩溃。

我的想法是

double r1 用于数学运算 `TextView answer`，用于输出最终答案

`EditText editText`是你告诉我的，我需要参考它

现在我想我会将用户输入给定字段的所有值放入一个数组中，并对所有这些值进行简单的数学运算。这就是第一个 for 循环的用途。然后我当那个数组完成后，我想我会把它们加在一起，因为这就是我想要的。我在这里找到了“For each”循环的代码

[http://www.leepoint.net/notes-java/flow/loops/foreach.html](http://www.leepoint.net/notes-java/flow/loops/foreach.html)

然后，当它全部加起来时，它应该是变量结果的两倍......然后我只需将文本设置为那个数字......

我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:51:00.017

您可以在 xml 文件中创建 2 个布局，例如 2 个线性布局或任何您想要的布局。

在第一个布局中单独添加 Seekbar。

通过 id 从您的 Java 代码中获取第二个布局，并在每次进度更改时以编程方式将 TextView 添加/删除到您的第二个布局。

这可以按如下方式完成：

首先得到这样的第二个布局

```
LinearLayout linearLayout = (LinearLayout)getActivity().findViewById(R.id.npv_calcfields); 
```

其次添加您的 EditText：

```
EditText editText = new EditText(this);
editText.setId(i); //Set id so that you can remove that EditText in the future.
editText.setLayoutParams(new LayoutParams(
        LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));
linearLayout.addView(editText); 
```

**编辑：**以下是一个工作示例：

```
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) {
    if ( i > progress) {
        i--;
        EditText editText = (EditText) findViewById(i);
        linearLayout.removeView(editText);
    }
    else {
        EditText editText = new EditText(SeekBarActivity.this);
        editText.setId(i);
        editText.setHint("EditText No: " + (i+1));
        editText.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        linearLayout.addView(editText);
        i++;
    }
} 
```

我希望我对你有所帮助。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T07:31:44.960

只需`LinearLayout`在 xml 中创建一个 ..就像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true"
        >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/family_detail_linear"
        android:orientation="vertical"
        ></LinearLayout>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/family_detail_addbutton"
        android:text="Add More"
        />

</LinearLayout>
    </ScrollView>

</LinearLayout> 
```

并`LinearLayout`在你的`fragment`

```
public class MyFrag extends Fragment{

    private Button addmoremember;
    private Activity activity;
    private LinearLayout layout;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.family_details, container, false);

        activity=getActivity();
        addmoremember=(Button)rootView.findViewById(R.id.family_detail_addbutton);
        layout=(LinearLayout)rootView.findViewById(R.id.family_detail_linear);
       addmoremember.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                EditText edttexname= new EditText(activity);
                edttexname.setHint("Enter Name");

                layout.addView(edttexname);

            }
        });

        return rootView;
    }
} 
```

# objective-c - 在 TWRequest 中过滤转推

> ID：11328064
> 
> 赞同：0
> 
> 时间：2012-07-04T11:20:40.633
> 
> 标签：objective-c, ios, twitter, filtering, twrequest

我正在使用 TWRequest 来查询推特。我想知道如何在 URL 末尾添加 +exclude:retweets 过滤器。这是我的代码：

```
NSString *searchURL = [NSString stringWithFormat:@"http://search.twitter.com/search.json"];
        NSMutableDictionary *dict_req;

dict_req = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"50", @"rpp", @"true", @"include_entities", searchParams, @"q", nil];

TWRequest *request = [[TWRequest alloc] initWithURL:[NSURL URLWithString:searchURL]
                                                      parameters:dict_req requestMethod:TWRequestMethodGET];

[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
     {
      //results
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:25:22.933

第一个工作解决方案：使用 nil 作为参数字典并手动将参数添加到 searchURL。不幸的是，它似乎不适用于复杂的查询......

NSString *searchURL = [NSString stringWithFormat:@"http://search.twitter.com/search.json?q=ciao+exclude:retweets"];

TWRequest *request = [[TWRequest alloc] initWithURL:[NSURL URLWithString:searchURL] 参数：nil requestMethod:TWRequestMethodGET];

# cordova - 在 android 上的 phonegap 应用程序中检查网络连接

> ID：11328073
> 
> 赞同：1
> 
> 时间：2012-07-04T11:21:07.433
> 
> 标签：cordova, phonegap-plugins

```
function checkConnection() {
    var networkState = navigator.network.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    alert('Connection type: ' + states[networkState]);
}

checkConnection(); 
```

我编写了这段代码并检查了即使我从 LAN 断开连接，结果总是有 Cell 3G 连接。我正在 android sdk 上测试应用程序。让我知道是否需要更改任何设置

# jquery - 使用 qtip jquery 需要弹出窗口

> ID：11328075
> 
> 赞同：0
> 
> 时间：2012-07-04T11:21:14.077
> 
> 标签：jquery, css, dhtml, qtip

当某个 css 类附加到元素时，我有以下代码需要在网格内的相关框上创建一个弹出窗口。这个 css 类称为 PopupClass，它可以存在于任何盒子上。我无法让弹出窗口使用以下代码。请问有什么帮助吗？非常感谢！！！！

您可以看到使用 jquery 代码迭代每个“PopupClass”并将不同的样式附加到弹出窗口，尽管我没有成功看到它。

[http://jsfiddle.net/Y4EYS/3/](http://jsfiddle.net/Y4EYS/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:54:20.997

我会尝试不使用 .each 循环来应用 qtip，因为它在调用时会自动执行此操作......

`$('.PopupClass').qtip();`

在你的 jsfiddle 上对我来说似乎是这样的。

# mongodb - 查找和更新数组中的字段

> ID：11328078
> 
> 赞同：0
> 
> 时间：2012-07-04T11:21:20.417
> 
> 标签：mongodb

我正在尝试为更新命令创建一个更好、更简单的标准。但我不知道如何获取所有具有我搜索的广告系列的用户：

```
"data" : "a name",    
"campaigns" : [     
          {     "id" : ObjectId("4ff3f07eacf4794426000154"),    "name" : "test" },
          {     "id" : ObjectId("4ff3f07eacf4794426000154"),    "name" : "fisk test2" }
    ] 
```

我想做的是将“测试”更新为“OS 2012”。

为此，我想到了使用类似的东西：

```
db.users.update({"campaigns.name": "test"}, {$set : {campaigns: {'test' : 'OS 2012'}}}); 
```

该更新语句的问题在于它可能会删除用户在其数组中的任何其他活动？我只想将“test”更新为“test2”，我现在能找到的最好方法是先使用 $pull，然后使用 $addToSet。

有没有更好的办法？你能给我举个例子吗？

感谢您的建议和更好的智慧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:26:00.173

了解[$ 位置运算符](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)。此代码有效。

```
db.users.update({'campaigns.name': 'test'}, 
                {$set: {'campaigns.$.name': 'blah blah'}}) 
```

# python - Unndent 不匹配任何外部缩进级别？

> ID：11328080
> 
> 赞同：1
> 
> 时间：2012-07-04T11:21:35.693
> 
> 标签：python

> **可能重复：**
> [IndentationError: unindent 不匹配任何外部缩进级别](https://stackoverflow.com/questions/492387/indentationerror-unindent-does-not-match-any-outer-indentation-level)

我有以下python代码。

```
import sys

ins = open( sys.argv[1], "r" )
array = []
for line in ins:
    s = line.split()
    array.append( s[0] ) # <-- Error here 
print array

ins.close() 
```

python解释器抱怨

```
 File "sort.py", line 7
    array.append( s[0] )
                       ^
IndentationError: unindent does not match any outer indentation level 
```

为什么这样？以及如何纠正这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:22:30.293

您正在混合制表符和空格（有时会发生:)。使用其中一种。

我看了你的消息来源：

```
 s = line.split()  # there's a tab at the start of the line
    array.append( s[0] )  # spaces at the start of the line 
```

* * *

旁白：作为一个友好的建议，考虑使用`with`打开您的文件。`close()`优点是当您完成或遇到异常时，该文件将自动为您关闭（不需要）。

```
array = []
with open( sys.argv[1], "r" ) as ins:  # "r" really not needed, it's the default.
   for line in ins:
      s = line.split()
      # etc... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T11:26:40.547

运行你的代码`python -tt sort.py`。

它会告诉你是否混合了制表符和空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T11:22:39.233

使用空格或制表符确保您的缩进是一致的，而不是两者的混合。

# magento - Magento如何在订单页面手动更新付款成功信息

> ID：11328084
> 
> 赞同：1
> 
> 时间：2012-07-04T11:21:53.797
> 
> 标签：magento

我正在使用 ccavenue 接受我的 Magento 购物车付款。在 CCAvenue 接受付款后，会出现一条警告，阻止将成功数据发送到 Magento 商店。这导致订单未显示收到的付款。如何在订单页面中手动编辑付款数据以适当显示收到的金额，从而在销售/收入中实际显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:13:41.453

正如我上面评论的那样，我的问题是相似的，但与 authorize.net 有关。我试图手动更改订单状态，因为在某些情况下（疑似欺诈）我无法检索付款更新。

通过更改以下内容解决：

1.  确保在 authorize.net 设置中启用了 api 更新。
2.  更改 /app/code/core/Mage/Paygate/Model/Authorizenet.php 中的 url 以表示非测试版本。

[http://www.magentocommerce.com/bug-tracking/issue?issue=12991](http://www.magentocommerce.com/bug-tracking/issue?issue=12991)

出于某种难以理解的原因，此错误在 1.5 中被报告并保留在 1.7 中，因此您的问题可能有类似的解决方案或解决方法来获取要获取的付款信息。

# list - 右对齐后的伪

> ID：11328085
> 
> 赞同：32
> 
> 时间：2012-07-04T11:21:54.160
> 
> 标签：list, css, alignment

我正在尝试在 li 元素上使用 CSS3 伪 :after 。问题是 :after 的内容紧跟在 li 内容之后 - 好像 :after 使用 text-align:left; 但是由于我的 li 元素使用 display:block; 不应该使用 text-align:right; on :after 将 :after 内容一直向右移动？反正也不会。

```
.container ul li    {
    display: block;
    border-bottom: 1px solid rgb(60,60,60);
    border-top: 1px solid rgb(255,255,255);
    padding: 5px 5px 5px 30px;
    font-size: 12px;
}

.container ul li:after {
    content: ">";
    text-align: right;
} 
```

这是该问题的屏幕截图：

![: 在没有做我想做的事之后](../Images/953a3742d0a8dac74efb1c4604290258.png)

我希望 > 一直在右边，并且由于 li 的内容发生了变化，我无法在 :after 内容上设置宽度。

如果不使用文本对齐，我将如何让 :after 内容向右对齐？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-04T11:25:21.710

尝试[浮动](https://www.w3schools.com/cssref/pr_class_float.asp)：

```
.container ul li:after {
    content: ">";
    text-align: right;
    float:right;
} 
```

演示[http://jsfiddle.net/surN2/](http://jsfiddle.net/surN2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T11:25:58.360

嘿，现在您可以`position`像这样使用属性：

```
.container ul li    {
    display: block;
    border-bottom: 1px solid rgb(60,60,60);
    border-top: 1px solid rgb(255,255,255);
    padding: 5px 5px 5px 30px;
    font-size: 12px;
    position:relative;
}

.container ul li:after {
    content: ">";
    position:absolute;
    left:20px;
    top:5px;
} 
```

并根据您的设计更改为 css 属性。

现场演示：[http ://tinkerbin.com/yXzOyDNg](http://tinkerbin.com/yXzOyDNg)

如果您想右对齐而不是更改`left`为`right`

```
.container ul li    {
    display: block;
    border-bottom: 1px solid rgb(60,60,60);
    border-top: 1px solid rgb(255,255,255);
    padding: 5px 5px 5px 30px;
    font-size: 12px;
}

 .container ul li:after {
    content: ">";
    position:absolute;
    right:20px;
    top:5px;
} 
```

现场演示：[http ://tinkerbin.com/rSWKxLwX](http://tinkerbin.com/rSWKxLwX)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-15T16:11:20.263

使用`float:right`和 专用`line-height`于垂直对齐。

```
.container ul li    {
    display: block;
    border-bottom: 1px solid rgb(60,60,60);
    border-top: 1px solid rgb(255,255,255);
    padding: 5px 5px 5px 30px;
    font-size: 12px;
    width: 100%;
}

.container ul li:after {
    content: ">";
    float: right;
    line-height: 12px;
} 
```

# android - 饼图显示非空值

> ID：11328087
> 
> 赞同：0
> 
> 时间：2012-07-04T11:22:20.337
> 
> 标签：android, pie-chart, achartengine

我正在使用 AChartEngine 库处理饼图。在这里，我想禁用图表值以显示在图表上，但仅限于内容值为 0 的那些。如果有人知道这一点，请分享给我。

## 编码：

```
 pchart=ChartFactory.getPieChartView(this,buildCategoryDataset("Daily Basis", values),renderer);

                    re.addView(pchart);
                    }
                } 
```

## BuildCategory 渲染器：

```
 protected DefaultRenderer buildCategoryRenderer(int[] colors) {
        DefaultRenderer renderer = new DefaultRenderer();
        renderer.setLabelsTextSize(10);
        renderer.setLegendTextSize(15);
        renderer.setShowLegend(true);

        renderer.setExternalZoomEnabled(true);
        renderer.setZoomEnabled(true);
        renderer.setZoomButtonsVisible(true);
        renderer.setShowAxes(true);
      //  renderer.setMargins(new int[] { 20, 30, 15, 0 });
        for (int color : colors) {
          SimpleSeriesRenderer r = new SimpleSeriesRenderer();
          r.setColor(color);
          renderer.addSeriesRenderer(r);
        }
        return renderer;
      } 
```

**数据集在这里：**

```
 protected CategorySeries buildCategoryDataset(String title, double[] values) {
CategorySeries series = new CategorySeries(title);
int k = 0,year;
String str_year;
str_year=String.valueOf(Math.round(values[0]));
Log.i("Invent","Year"+str_year);

year=Integer.parseInt(str_year);
Log.i("Invent","YearInt"+year);
    if(flag_val==1)
    {
        for(k=0;k<tot_yearno-1;k++)
        {
            if(values[k]==0)
        {  
        series.add(0.0);     /// Here some settings for display null value.But **here i Want to display nothing Only.** 
        }
            else
            series.add("" + year_first++, values[k]);   
        }
    }
    if(flag_val==0)
    {
    for (double value : values) {    

        if(value==0)
        {
        series.add("" + ++k, 0.0);
        }
        else
  series.add("Day " + ++k, value);
}
    }
return series;
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:11:15.883

你在这里做什么：

```
 if(values[k]==0)
    {  
    series.add(0.0);     /// Here some settings for display null value.But **here i Want to display nothing Only.** 
    }
        else
        series.add("" + year_first++, values[k]);   
    } 
```

你应该这样做：

```
if(values[k] != 0) //or possibly (values[k] >= 0) since you cannot show negatives either
{  
    series.add("" + year_first++, values[k]);   
} 
```

**编辑：然后试试这个：**

```
if(values[k]==0)
{  
    series.add("" + year_first++, new Double(0.0));      
}
else
{
    series.add("" + year_first++, new Double(values[k]));   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:35:42.550

如果您不想显示 0 值，请不要将它们添加到数据集中。

以 PieChartView 中的 createDataSet 为例 - 他们在那里添加带有标签的值。

```
private staticPieDataSet createDataSet(){
    DefaultPieDataset dataset = new DefaultPieDataset();
    dataset.setValue("One", new Double(43.2));
} 
```

现在，当您添加自己的值时（我不确定您是如何做到的，但我将它们传递给 bundle 数据类型，然后为以下方法提取它们），您可以不添加基于值：

```
private staticPieDataSet createDataSet(Double[] values, String[] labels){
    DefaultPieDataset dataset = new DefaultPieDataset();
    for(int i = 0; i < values.length; i++){
        if (value[i] > 0)
            dataset.setValue(labels[i], values[i]);
    }
} 
```

PS！！！顺便说一句，我不建议这样做 - 您的用户可能会对为什么某些数据显示而其他数据不显示感到困惑 - 而是将值放在带有标签的括号中，以便他们可以看到该值为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:37:28.363

在像我为 TimeChart 所做的那样显示图表视图之前这样做

```
 for(int i=0;i<selectedCollectionY.size();i++)
    {
        if(selectedCollectionY.get(i).equalsIgnoreCase("0"))
        {
            selectedCollectionY.remove(i);
            selectedCollectionX.remove(i);
        }
    }
    View mView = null;
    mView = ChartFactory.getTimeChartView(GraphActivity.this, Line_Chart
            .getLineDemoDataset(mSpinner.getSelectedItem().toString(),
                    selectedCollectionX, selectedCollectionY), Line_Chart
            .getLineDemoRenderer(mSpinner.getSelectedItem().toString()),
            "MMM dd");
    mView.setLayoutParams(new LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    mLinearLayout.removeAllViews();
    mLinearLayout.addView(mView); 
```

# iphone - 从其子视图中消除 WEPPopover

> ID：11328088
> 
> 赞同：1
> 
> 时间：2012-07-04T11:22:20.667
> 
> 标签：iphone, objective-c, ios, xcode

我正在`WEPPopoverController`我的 iPhone 应用程序中展示一个。在那个 WEPPopoverController 中，我添加了一个`UITableViewController`. 我正在使用此弹出框进行搜索。

现在，当我打开此 Popover 时，屏幕如下所示：

![在此处输入图像描述](../Images/a9f95eb74aeed6b132ee0bd81b3fdc1f.png)

现在，我想关闭从`UITableViewController's` `didSelectRowAtIndexPath`,

这该怎么做？

代码：

```
self.searchTableViewController = [[SearchTableViewController alloc] initWithStyle:UITableViewStylePlain];    // UITableViewController
self.seachPopoverController = [[[WEPPopoverClass alloc] initWithContentViewController:self.searchTableViewController] autorelease];   // WepPopoverController

self.seachPopoverController.delegate = self;
[self.seachPopoverController presentPopoverFromRect:[searchB frame] inView:topPanelV permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T11:58:02.550

在 SearchTableViewController 中添加 1 个变量作为父级

```
id parent; 
```

为此创建属性

```
@property (nonatomic,assign)id parent; 
```

合成它

```
@synthesize parent; 
```

现在

当你创建`self.searchTableViewController`

将其父级分配为

```
self.searchTableViewController.parent = self; 
```

现在在 didSelectRowAtIndex

```
[parent dismisMyPopoverMethod];

-(void)dismisMyPopoverMethod
{
[self.seachPopoverController dismissPopoverAnimated:YES];
self.seachPopoverController = nil;         
} 
```

就是这样。你完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:36:25.910

这样做：使您的视图控制器成为表视图控制器的代表，仅用于一种方法 - dismissPopover（对于其他方法，委托必须是表视图控制器）。所以你的表视图控制器将有两个代表。在您的委托（视图控制器）中实现此方法。但是从表视图控制器调用它。一步一步详细说明：

在视图控制器中声明弹出框的属性，您将在其中显示此弹出框。

```
@property (strong, nonatomic) UIPopoverController *popoverController; 
```

创建一个具有以下方法的新协议（我们将其命名为 TableInPopoverDelegate）：

```
- (void) dismissPopover; 
```

将此方法添加到视图控制器的实现文件中并添加：

```
- (void) dismissPopover {
    [self.popoverController dismissPopoverAnimated:YES];
} 
```

添加协议的头文件并将委托属性添加到表视图控制器：

```
@property (strong, nonatomic) id <TableInPopoverDelegate> popoverDelegate; 
```

在添加之前让您的视图控制器成为您的表视图控制器的代表：

```
tableViewController.popoverDelegate = self; // Here self is your view controller 
```

当用户选择一行时，在委托上调用 dismissPopover。

```
[popoverDelegate dismissPopover]; 
```

# xml - 如何在 OS X 上验证 SGML？

> ID：11328092
> 
> 赞同：0
> 
> 时间：2012-07-04T11:22:28.053
> 
> 标签：xml, macos, sgml

我有一个需要验证的 SGML DTD（以及相关的 XML 数据包）。

我怎样才能在 OS X 上做到这一点？似乎大多数 XML 工具都没有“获得”SGML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:47:14.177

有一个 Perl 库可以解析 SGML 和 XML DTD：

*   [DTD解析](http://dtdparse.sourceforge.net/SGML-DTDParse/doc/html/lib/SGML/DTDParse.html)

# java - GWT 与 com 端口一起工作，为什么不呢？

> ID：11328096
> 
> 赞同：0
> 
> 时间：2012-07-04T11:22:31.497
> 
> 标签：java, gwt

Comm - 这是使用 com 端口的类。确实可以使用 GWT com 端口吗？在服务器中，我运行以下代码：

```
public String greetServer(String input) throws IllegalArgumentException {

        comm term = new comm("COM3", "$KE,WR,6,0\n");

        return "OK";
    } 
```

然后服务器不返回 OK - 下一个错误是一个新的错误列表，我不明白为什么不起作用。当您运行具有相同类的控制台应用程序时，一切正常：

```
 SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String com.aaa.client.GreetingService.greetServer(java.lang.String) throws java.lang.IllegalArgumentException' threw an unexpected exception: java.lang.ExceptionInInitializerError
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.ExceptionInInitializerError
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:69)
    at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
    at com.aaa.server.comm.<init>(comm.java:23)
    at com.aaa.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:17)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 34 more
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission loadLibrary.rxtxSerial)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:252)
    at java.lang.SecurityManager.checkLink(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at gnu.io.CommPortIdentifier.<clinit>(CommPortIdentifier.java:83)
    ... 46 more 
```

rtx 与 c:\Program Files\Java\jre6\lib\rxtxSerial.dll 库一起使用，但是当我在服务器中启动时显示错误访问被拒绝（java.lang.RuntimePermission loadLibrary.rxtxSerial）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:25:21.693

```
Caused by: java.lang.NoClassDefFoundError: com/hell/server/comm
    at com.hell.server.GreetingServiceImpl.GO1(GreetingServiceImpl.java:37) 
```

对我来说看起来像是打包/构建错误。您是否在*部署*的解决方案中包含了所有必需的 jar？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:33:12.507

您应该将`com/hell/server/comm`包含的罐子放入`WEB-INF/lib`.

# jquery - 如何使用 jQuery ajax 发送 GET 值？

> ID：11328101
> 
> 赞同：0
> 
> 时间：2012-07-04T11:22:48.283
> 
> 标签：jquery, ajax

我有如下代码：

```
jQuery.ajax({
    url: '/Control/delete',
    type: 'GET',
    contentType: 'application/json',
    success: function (bool) {
        if (bool == "deleted") {
            alert('record deleted');
            $(".row" + currentId).hide('slow');
        }
        else {
            alert('not deleted ');
        }
    }
}); 
```

例如，我需要使用 GET 发送 file_id (?file_id=12) 参数，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:24:08.780

使用`data`选项：

```
jQuery.ajax({
  type: 'GET',
  data: {file_id : 12},
  ......
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T11:24:20.837

使用`data`参数

```
jQuery.ajax({
  url: '/Control/delete',
  type: 'GET',
  contentType: 'application/json',
  data: {file_id: 12}
  success: function (bool){
  if(bool == "deleted"){
    alert('record deleted');
    $(".row"+currentId).hide('slow');
  }
  else{
    alert('not deleted ');                  
  }
 }
}); 
```

也不是`data`这样的查询字符串：

```
data: "file_id=12&foo=bar" 
```

如果它不是查询字符串，jQuery 会自动将其转换为查询字符串。

> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。

[jQuery.ajax 文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:24:20.933

将此替换 url 与 /url/delete?file_id=12 一起使用

```
jQuery.ajax({
      url: '/Control/delete?file_id=12',
      type: 'GET',
      contentType: 'application/json',
      success: function (bool){
      if(bool == "deleted"){
        alert('record deleted');
        $(".row"+currentId).hide('slow');
      }
      else{
        alert('not deleted ');                  
      }
     }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:23:56.820

只需将其添加到 URL：

```
url: '/Control/delete?file_id=12', 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T11:25:09.107

使用`data`ajax 调用的选项并将其传递给带有键值对的对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T11:32:31.623

```
//POST METHOD

$.ajax({
  type: 'POST',
  data: {file_id : 12},
  ......
});

//GET METHOD

$.ajax({
  type: 'GET',
  data: "file_id=12&someother=othervalue",
  ......
}); 
```

# java - 是否可以重复参数 RESTful Spring MVC？

> ID：11328104
> 
> 赞同：1
> 
> 时间：2012-07-04T11:23:12.867
> 
> 标签：java, json, spring, rest, spring-mvc

现在我正在使用 RESTful 处理 Spring MVC 中的一个项目，我在 URL 包含多个相同参数时遇到了一些问题

我想要求类似的东西：

```
get/user/{userID}/report/[year/{year}/week/{week},year/{year}/week/{week},....] 
```

并尝试将其解析为带有字符串的列表

甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:33:53.413

你可以像下面这样使用；

```
get/user/{userID}/report/[year/{year1}/week/{week1},year/{year2}/week/{week2} 
```

或者

使用每个路径参数一次，但使用逗号之类的分隔符分隔内部数据，并在您的 java 类中解析它以获取它。这样它会更干净，并且可以传递无限的动态数量的相同参数。

```
get/user/{userID}/report/[year/{year1}/week/{week1} 
```

其中 {year} 是 2000,2001,2002，{week} 是 2,5,6,7

编辑 1：示例代码

所以像：

```
@RequestMapping(value="/test/{tests}", method=RequestMethod.GET)
@ResponseBody
public String test(@PathVariable String tests)
{
     String[] test= tests.split(",");
     return "sth"; 
} 
```

你会传入：

```
http://localhost:8080/test/1,3,4,50,xxx,yyy,ddd 
```

# python - Python将参数传入查询错误

> ID：11328106
> 
> 赞同：1
> 
> 时间：2012-07-04T11:23:17.943
> 
> 标签：python, sql, postgresql, parameters

我在python中有以下代码。我收到此错误->元组索引必须是整数，而不是 str

如何将这些值传递到查询中？我有其他例子，这种方法完美地工作，我不明白为什么它在这里失败。

```
def request_events_json(uei,interval,conn):

    cur = conn.cursor()

    events_query ="""select e.nodeid,n.nodelabel,e.ipaddr,count(*) as total,min(e.eventcreatetime),max(e.eventcreatetime),(regexp_matches (e.eventlogmsg,E': %(.*)'))[1] as msglog
                     from events e, node n where e.eventuei = (%s)  and e.eventcreatetime > now() - interval (%s) and n.nodeid=e.nodeid
                     group by n.nodelabel,e.nodeid,e.ipaddr,msglog
                     order by e.nodeid, count(*) desc limit 10;"""

    try:
       print('## Requesting events ##')
       cur.execute(events_query,('uei.opennms.org/syslogd/cisco/line','5 min'))
       ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:33:25.920

在我的 PostgreSQL 版本中，后面的圆括号`interval`是被禁止的。

更新：

它是正则表达式中的百分号。加倍。

# objective-c - ios - 无法像橡胶一样擦除 UIImage

> ID：11328107
> 
> 赞同：2
> 
> 时间：2012-07-04T11:23:21.590
> 
> 标签：objective-c, opengl-es, quartz-graphics, core-image

在我的应用程序中，我有两个视图，一个在另一个之上。在下面的视图中，我有一个捕获的图像，在上面的视图中我放置了一个图像。如果用户需要对上面的图像进行一些更改，我会为他们提供删除图像的选项。

一切正常，问题是如果我试图擦除图像，它似乎是一个损坏的图像。图像不会以温和的方式被删除。当我擦除它看起来像下面的。 ![在这里我得到了删除的图像](../Images/49eac12dceebf15fdf7a90d167af1f5f.png)

我希望它如下 ![在此处输入图像描述](../Images/bd0fd645bdceeb9f1090ef77018626b6.png)

如何做到这一点，请帮助我

以下是我的代码：

```
UIGraphicsBeginImageContext(frontImage.frame.size);
        [frontImage.image drawInRect:CGRectMake(0, 0, frontImage.frame.size.width, frontImage.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); 
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1, 0, 0, 10);
        CGContextBeginPath(UIGraphicsGetCurrentContext());
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextClearRect (UIGraphicsGetCurrentContext(), CGRectMake(lastPoint.x, lastPoint.y, 50, 50));
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        frontImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:45:05.363

问题是您使用的是方形画笔，而您只是在用户绘制的线上的一个点上擦除该方形。此外，您的笔触颜色对于您正在尝试做的事情是完全错误的。

看起来您正在尝试将笔划设置为清晰的颜色并在前一点和当前点之间画一条线。如果你想这样做，你应该这样做：

```
CGContextRef currCtx = UIGraphicsGetCurrentContext();
CGContextSetRGBStrokeColor (currCtx, 0, 0, 0, 0);
CGContextMoveToPoint (currCtx, startPt.x, startPt.y);
CGContextLineToPoint (currCtx, endPt.x, endPt.y); 
```

在这种情况下，startPt.x/y 是上一次触摸的位置，endPt.x/y 是当前触摸。

请注意，要使线条与您发布的图片中一样漂亮，您需要实际使用抗锯齿纹理并沿线条的每个点绘制它，并改变其大小。但是上面的内容应该能让你得到一些看起来不错的可行的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T10:01:00.713

```
UIGraphicsBeginImageContext(imageView1.frame.size);
[imageView1.image drawInRect:CGRectMake(0, 0,imageView1.frame.size.width, imageView1.frame.size.height)];
CGContextSetBlendMode(UIGraphicsGetCurrentContext( ),kCGBlendModeClear);
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext( ), 25.0);

CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [[UIColor clearColor] CGColor]);
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), point.x, point.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), point.x, point.y);
CGContextStrokePath(UIGraphicsGetCurrentContext()) ;

imageView1.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# grails - Grails 2.0：运行多个实例时缺少资源

> ID：11328108
> 
> 赞同：0
> 
> 时间：2012-07-04T11:23:21.493
> 
> 标签：grails, grails-plugin, grails-2.0

我正在使用资源插件 1.1.6 在 grails 2.0.3 上运行应用程序。

运行 2 个应用程序实例时缺少资源

运行第一个实例：

```
grails clean; grails compile; grails -Ddisable.auto.recompile=true -Dserver.port=8081 run-app 
```

该应用程序运行良好，没有任何资源丢失。

编译第二个实例：

```
grails clean; grails compile 
```

在此命令之后，我正在刷新第一个实例，我看到资源（图像、消息）丢失了。请注意，我正在运行具有相同应用程序名称的应用程序。我检查了 .grails/2.0.3/project/ ，当我为第二个实例运行 grails clean 时，似乎资源正在被删除。

我怎样才能将这两个实例分开以不干扰？

我的资源配置 Config.groovy 是：

```
grails.resources.adhoc.patterns = ['/images/*', '/css/*', '/js/*', '/plugins/*']

grails.resources.modules = {
'core' {
    defaultBundle 'core-ui'

    resource url: '/css/all.css', attrs: [ media: 'screen' ]
    resource url: '/css/lt7.css', attrs: [ media: 'screen' ],
             wrapper: { s -> "<!--[if lt IE 8]>$s<![endif]-->" }
}

'ui' {
    defaultBundle 'core-ui'

    resource url: '/js/main.js', disposition: 'head'
    resource url: '/js/datatable.js', disposition: 'head'
    resource url: '/js/slideBlock.js', disposition: 'head'
}

'input' {
    defaultBundle "input"

    resource url: '/js/form.js', disposition: 'head'
    resource url: '/js/checkbox.js', disposition: 'head'
    resource url: '/js/clearinput.js', disposition: 'head'
}

'panels' {
    defaultBundle 'panels'

    resource url: '/js/panels.js', disposition: 'head'
}

'jquery-validate' {
    defaultBundle "jquery-validate"

    resource url: '/js/jquery-validate/jquery.validate.min.js', disposition: 'head'
    resource url: '/js/jquery-validate/jquery.metadata.js', disposition: 'head'
    resource url: '/js/jquery-validate/additional-methods.min.js', disposition: 'head'
}

overrides {
    'jquery-theme' {
        resource id:'theme', url:'/jquery-ui/themes/app/jquery-ui-1.8.7.custom.css'
    }
} 
```

}

有人遇到过同样的问题吗？如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:51:35.310

显然这与使用资源插件无关。您可能需要不同的应用程序名称才能在同一台机器上运行它们。正如已经指出的那样，您需要单独的文件夹以及同一台机器上的这两个或更多应用程序的单独应用程序名称才能拥有单独的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T18:33:17.993

尝试为每个实例指定一个新的工作目录。默认值类似于

```
<home>/.grails/ 
```

尝试这个 ...

```
grails -Dgrails.work.dir=/home/instance2 -Dserver.port=8081 run-app 
```

# c - 验证从 FORTRAN 到 C 的转换代码的方法

> ID：11328113
> 
> 赞同：3
> 
> 时间：2012-07-04T11:23:31.453
> 
> 标签：c, fortran

我已经使用工具将大约 90 多个 fortran 文件转换为 C 文件，我需要验证转换是否良好。

你能给我一些关于如何最好地确保通过翻译保留功能的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:28:28.390

您需要执行这些 fortran 功能的验证测试。然后您针对 c 代码运行这些测试。

您可以使用单元测试技术/方法。事实上，我看不出你还能如何证明转换是正确的。

在许多单元测试方法中，您会使用与代码相同的语言编写测试，但在这种情况下，我非常强烈建议选择一种语言和一个代码库来执行两组功能。也不必担心尝试创建纯单元测试，而是使用这些技术来覆盖 fortran 代码应该处理的所有用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:29:15.663

使用单元测试。

首先在 Fortran 代码上编写单元测试并检查它们是否都正确运行，然后用 C 重写它们并运行它们。

这种方法的问题是您还需要重写单元测试，而重构代码时通常不会这样做（API 更改除外）。这意味着除了实际代码之外，您最终也可能会调试移植的单元测试代码。

因此，编写包含最少逻辑的测试代码并且只将函数的结果写入文件可能会更好。然后你可以用 C 重写这个最小的测试代码，生成相同的文件并比较这些文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T06:28:40.117

这是我为“类似”任务所做的（将 fortran 90 与 fortran 90 + OpenACC GPU 加速代码进行比较）：

1.  分析每个 Fortran 模块的输出。
2.  将这些输出数组写入 .dat 文件。
3.  将 .dat 文件复制到参考文件夹中。
4.  将转换后的模块的输出写入文件（CSV 或二进制文件）。为方便起见，使用相同的文件名。
5.  制作一个比较两个版本的python脚本。

我在 fortran 中使用了这样的便利函数（类似于 1D、2D 案例）：

```
subroutine write3DToFile(path, array, n1, n2, n3)
   use pp_vardef
   use pp_service, only: find_new_mt
   implicit none

   !input arguments
   real(kind = r_size), intent(in) :: array(n1,n2,n3)
   character(len=*), intent(in) :: path
   integer(4) :: n1
   integer(4) :: n2
   integer(4) :: n3

   !temporary
   integer(4) :: imt

   call find_new_mt(imt)

   open(imt, file = path, form = 'unformatted', status = 'replace')
   write(imt) array
   close(imt)
 end subroutine write3DToFile 
```

在 python 中，我使用以下脚本来读取二进制 Fortran 数据并进行比较。注意：由于您要转换为 C，您必须对其进行调整，以便您可以读取由 C 而不是 Fortran 生成的数据。

```
from optparse import OptionParser
import struct
import sys
import math

def unpackNextRecord(file, readEndianFormat, numOfBytesPerValue):
    header = file.read(4)
    if (len(header) != 4):
        #we have reached the end of the file
        return None

    headerFormat = '%si' %(readEndianFormat)
    headerUnpacked = struct.unpack(headerFormat, header)
    recordByteLength = headerUnpacked[0]
    if (recordByteLength % numOfBytesPerValue != 0):
        raise Exception, "Odd record length."
        return None
    recordLength = recordByteLength / numOfBytesPerValue

    data = file.read(recordByteLength)
    if (len(data) != recordByteLength):
        raise Exception, "Could not read %i bytes as expected. Only %i bytes read." %(recordByteLength, len(data))
        return None

    trailer = file.read(4)
    if (len(trailer) != 4):
        raise Exception, "Could not read trailer."
        return None
    trailerUnpacked = struct.unpack(headerFormat, trailer)
    redundantRecordLength = trailerUnpacked[0]
    if (recordByteLength != redundantRecordLength):
        raise Exception, "Header and trailer do not match."
        return None

    dataFormat = '%s%i%s' %(readEndianFormat, recordLength, typeSpecifier)
    return struct.unpack(dataFormat, data)

def rootMeanSquareDeviation(tup, tupRef):
    err = 0.0
    i = 0
    for val in tup:
        err = err + (val - tupRef[i])**2
        i = i + 1
    return math.sqrt(err)

##################### MAIN ##############################
#get all program arguments
parser = OptionParser()
parser.add_option("-f", "--file", dest="inFile",
                  help="read from FILE", metavar="FILE", default="in.dat")
parser.add_option("--reference", dest="refFile",
                  help="reference FILE", metavar="FILE", default="ref.dat")
parser.add_option("-b", "--bytesPerValue", dest="bytes", default="4")
parser.add_option("-r", "--readEndian", dest="readEndian", default="big")
parser.add_option("-v", action="store_true", dest="verbose")

(options, args) = parser.parse_args()

numOfBytesPerValue = int(options.bytes)
if (numOfBytesPerValue != 4 and numOfBytesPerValue != 8):
    print "Unsupported number of bytes per value specified."
    sys.exit()
typeSpecifier = 'f'
if (numOfBytesPerValue == 8):
    typeSpecifier = 'd'

readEndianFormat = '>'
if (options.readEndian == "little"):
    readEndianFormat = '<'

inFile = None
refFile = None
try: 
    #prepare files
    inFile = open(str(options.inFile),'r')
    refFile = open(str(options.refFile),'r')

    i = 0
    while True:
        passedStr = "pass"
        i = i + 1
        unpackedRef = None
        try: 
            unpackedRef = unpackNextRecord(refFile, readEndianFormat, numOfBytesPerValue)
        except(Exception), e:
            print "Error reading record %i from %s: %s" %(i, str(options.refFile), e)
            sys.exit()

        if (unpackedRef == None):
            break;

        unpacked = None
        try:
            unpacked = unpackNextRecord(inFile, readEndianFormat, numOfBytesPerValue)
        except(Exception), e:
            print "Error reading record %i from %s: %s" %(i, str(options.inFile), e)
            sys.exit()

        if (unpacked == None):
            print "Error in %s: Record expected, could not load record it" %(str(options.inFile))
            sys.exit()

        if (len(unpacked) != len(unpackedRef)):
            print "Error in %s: Record %i does not have same length as reference" %(str(options.inFile), i)
            sys.exit()

        #analyse unpacked data
        err = rootMeanSquareDeviation(unpacked, unpackedRef)
        if (abs(err) > 1E-08):
            passedStr = "FAIL <-------"
        print "%s, record %i: Mean square error: %e; %s" %(options.inFile, i, err, passedStr)

        if (options.verbose):
            print unpacked

except(Exception), e:
    print "Error: %s" %(e)

finally:
    #cleanup
    if inFile != None:
        inFile.close()

    if refFile != None:
        refFile.close() 
```

# visual-c++ - CStatic中的CPaintDC不切割绘图

> ID：11328114
> 
> 赞同：0
> 
> 时间：2012-07-04T11:23:34.550
> 
> 标签：visual-c++, gdi, onpaint

据我所知，派生的 CStatic 控件中的我的 OnPaint() 方法应该是切割比控件大的绘图部分。但是它不这样做。

```
void CGraph::OnPaint ()
{
   CPaintDC dc(this);
   dc.SetViewportOrg (0, 400);
   dc.SetMapMode(MM_ISOTROPIC);
   dc.SetWindowExt(1000, 800);
   dc.SetViewportExt(1000, -800);

   // MessageBox(L"OnPaint");
   ProcessData ();
   DrawCoordinateSystem (&dc);
   DrawGrid (&dc);
   DrawGraph (&dc);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:13:31.517

取决于方法的定义。

OnPaint 并不是真正的方法；它是一个静态成员函数，用于通过将 WM_PAINT 消息映射到消息映射数组中来处理它。

对于 C++，为了清楚起见，我个人更喜欢将其称为成员函数。

您可以使用 ON_MESSAGE 宏创建自己的处理程序，并随心所欲地调用它。代码片段并没有说明太多，因为它没有显示绘图（绘画）的代码。您应该包含实际执行绘画的代码。

如果您可以附加项目来证明您的问题，那就最好不过了。

您是否尝试绘制一个比窗口大的简单位图？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:46:01.433

@JohnCz 现在知道了。

```
CDC* pDC = GetDC();
CRect rClient();
GetClientRect(rClient);
CRgn ClipRgn;
if (ClipRgn.CreateRectRgnIndirect(&rClient))
{
    pDC->SelectClipRgn(&ClipRgn);
}

// Drawing content

pDC->SelectClipRgn(NULL);
ReleaseDC(pDC); 
```

感谢您的回答

# c# - 我如何从后面的代码访问堆栈面板中的控件？

> ID：11328117
> 
> 赞同：1
> 
> 时间：2012-07-04T11:23:39.623
> 
> 标签：c#, wpf, listbox, controls

这是在 WPF 中的 C# 中：

我知道我可以像这样将项目添加到堆栈面板：`myStackPanel.Children.Add(new Button());` 或者像这样添加到 ListBox：`myListBox.Items.Add(new Button());` 当然，我可以事先编辑控件并稍后添加它们，例如先设置属性然后添加它们。

但是，一旦控件位于带有代码的堆栈布局中，我该如何选择它。例如，有没有类似的方法：`myStackPanel.Childern.CONTROL_AT_INDEX[n]`？然后我如何编辑它，如果它是一个标签，或者如果它是一个按钮，我该如何编辑它更像是更改标签的内容？

我也想要一个 ListBox 的解决方案。我只是不知道一旦它们在里面如何访问这些控件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:26:27.387

分配给该控件`x:Name`并在您的代码中使用它。

*这对于Templates*和*Styles*中存在的控件自然无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:36:05.183

就像 Tigran 已经发布的一样，可以在 XAML 中为您的控件分配一个属性：

```
<ListBox x:Name="myListBox"
         // more properties here...
/> 
```

然后您的代码隐藏将能够编译您的行：

```
myListBox.Items.Add(new Button()); 
```

但是，我强烈建议您交替使用**MVVM**方法来摆脱代码隐藏文件。这减少了您的业务逻辑与 UI 的耦合。使用 MVVM 模式是微软推荐的使用 WPF 的方式，因为它使得使用许多 WPF 功能变得非常容易。

可以在这个 SO 线程中找到一个很好的教程资源，例如：[MVVM：从头到尾的教程？](https://stackoverflow.com/questions/1405739/mvvm-tutorial-from-start-to-finish)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:52:21.050

这是我的解决方案

```
var child = (from c in theCanvas.Children
         where "someId".Equals(c.Tag)
         select c).First(); 
```

# php - 在重定向函数中使用变量

> ID：11328124
> 
> 赞同：0
> 
> 时间：2012-07-04T11:24:14.600
> 
> 标签：php, mysql

使用 PHP，我有一个脚本，它从 mysql_db 搜索电子邮件，然后从与 db 中的电子邮件相同的行获取用户名。我想要它做的是使用用户名作为 url 中的子域重定向

我试过了：

```
 $username = //username taken from the db
 $url = 'http://".$username."domain.com';
 header('location: $url'); 
```

这只是将变量“$url”附加到我的测试 url 的末尾。

我试过了：

```
header('http://".$username."domain.com'); 
```

这在地址栏中输出：

```
http://%22.%24account_name.%22.domain.com 
```

如何使用此搜索结果变量并重定向到我正在寻找的子域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:27:24.943

你有大量的语法错误。

**版本 1 更正**（单引号中的变量被视为文字字符串）：

```
$username = //username taken from the db
$url = 'http://".$username."domain.com';
header('location: ' . $url); 
```

**版本 2 更正**（您的语法和引号用法都错误）：

```
header("Location: http://".$username."domain.com"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:27:29.983

只需使用双引号

```
$url = "http://{$username}.domain.com";
header("Location: {$url}"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:30:49.977

这将起作用

```
 $username = //username taken from the db
 $url = "http://$username.domain.com";
 header("Location: $url"); 
```

# .net - 将 MSBuild 批处理任务输出添加为项元数据

> ID：11328126
> 
> 赞同：7
> 
> 时间：2012-07-04T11:24:18.513
> 
> 标签：.net, msbuild, msbuild-task

我的 MSBuild 文件中有一个项目列表：

```
<ItemGroup>
    <SubProject Include="**\*.csproj" />
</ItemGroup> 
```

现在，我想在每个项目上`TargetPath`为每个项目设置一个元数据属性。

我已经知道如何提取每个项目的目标路径，并将其放在单独的项目列表中：

```
<Target Name="ExtractTargetPaths">
    <MSBuild Projects="%(SubProject.Identity)" Targets="GetTargetPath">
        <Output TaskParameter="TargetOutputs" ItemName="SubProjectTargetPath" />
    </MSBuild>
</Target> 
```

但是，我希望能够将“SubProjectTargetPath”作为项目的元数据访问，`SubProject`而不是拥有单独的项目列表。

也就是说，而不是这样写：

```
<SomeTask Parameter="%(SubProjectTargetPath.Identity)" /> 
```

我将能够写出类似的东西：

```
<SomeTask Parameter="%(SubProject.TargetPath)" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T15:02:55.723

好的，我找到了一种解决方案，即使用具有临时属性的目标批处理：

```
<ItemGroup>
    <SubProject Include="**\*.csproj" />
</ItemGroup>

<Target Name="UpdateSubProjectMetadata" Outputs="%(SubProject.Identity)">
    <!-- Retrieves the Target DLL path and puts it in the temporary property "_TempTargetPath" -->
    <MSBuild Projects="%(SubProject.Identity)" Targets="GetTargetPath">
        <Output TaskParameter="TargetOutputs" PropertyName="_TempTargetPath" />
    </MSBuild>

    <!-- Set the metadata item for TestProject to the value of the temporary property -->
    <ItemGroup>
        <SubProject Condition="'%(SubProject.Identity)' == '%(Identity)'" >
            <TargetPath>$(_TempTargetPath)</TargetPath>
        </SubProject>
    </ItemGroup>
    <!-- Clear the temporary property -->
    <PropertyGroup>
        <_TempTargetPath></_TempTargetPath>
    </PropertyGroup>
</Target> 
```

一旦该目标运行，TargetPath 就可用于每个元数据项。

**实施说明**：以上代码仅针对 MSBuild 4.0 进行了测试——我认为它在 MSBuild 3.5 上的工作原理与以前版本一样，并且以前版本的用户将使用`<CreateItem>`and`<CreateProperty>`任务而不是放置`<PropertyGroup>`and `<ItemGroup>`。

# php - mysql_num_rows 的 PHP 错误

> ID：11328134
> 
> 赞同：0
> 
> 时间：2012-07-04T11:24:56.797
> 
> 标签：php, mysql, mysql-num-rows

我有一个简单的表单，提交时应该计算表中已经与提交的值相同的行数。

我无法弄清楚为什么这会返回错误......有什么想法吗？

错误是`Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in .../register.php on line 31`

```
$con = mysql_connect("table","user","pass");
if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }
mysql_select_db("db", $con);    

function check_input($value, $quoteIt)
  {
      // Stripslashes
      if (get_magic_quotes_gpc())
      {
          $value = stripslashes($value);
      }
      // Quote if not a number
      if (is_null($value) || $value=="") {
         $value = 'NULL';
      } else if (!is_numeric($value) && $quoteIt == 1) {
         $value = "'" . mysql_real_escape_string($value) . "'";
      }

      return $value;
  }

$useremail = check_input($_POST['useremail'], 1);
// Check to see if email address already exists in USERS table
$query="SELECT * FROM users WHERE email = $useremail";
$result = mysql_query($query);
echo $query;
echo mysql_num_rows($result); //THIS IS LINE 31
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:32:22.893

您可以使用此查看查询错误，因为查询错误仅显示此错误

```
$result = mysql_query($query) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:31:13.537

```
<?php
$con = mysql_connect("table","user","pass");
if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }
mysql_select_db("db", $con);    

function check_input($value, $quoteIt)
  {
      // Stripslashes
      if (get_magic_quotes_gpc())
      {
          $value = stripslashes($value);
      }
      // Quote if not a number
      if (is_null($value) || $value=="") {
         $value = 'NULL';
      } else if (!is_numeric($value) && $quoteIt == 1) {
         $value = "'" . mysql_real_escape_string($value) . "'";
      }

      return $value;
  }

$useremail = check_input($_POST['useremail'], 1);
// Check to see if email address already exists in USERS table
$query="SELECT COUNT(1) FROM users WHERE email = $useremail";
$result = mysql_query($query);
$array = mysql_fetch_array($result);
$whatYouWant = $array[0][0];
mysql_close();
?> 
```

但是 Leigh 是对的，更喜欢 PDO 而不是 mysql_* 函数......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T11:29:15.863

通常这意味着查询是错误的。尝试为字段添加反引号：

```
"SELECT * FROM `users` WHERE `email` = '$useremail'" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T11:30:36.500

代替

`$result = mysql_query($query);`

和

`$result = mysql_query($query, $con);`

# html - 在一页上多次跟踪像素图像src

> ID：11328141
> 
> 赞同：0
> 
> 时间：2012-07-04T11:25:16.757
> 
> 标签：html, browser-cache, cache-control

我有一个选择加入服务，每次有一个新的选择加入时，都需要执行这个跟踪像素。现在有一个 cron 作业每分钟运行一次，检查新的选择加入，以及当脚本运行时有多少新的选择加入时，它会将这个跟踪像素多次放置在页面上。问题是即使跟踪像素图像多次出现在页面上，它也只执行一次。我试图用标题禁用缓存，但没有运气。有没有办法让页面上的每个图像的实例单独下载而不是只下载一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:36:21.303

指定一个 HTTP 标头指示不应缓存请求 ( `Cache-Control: no-cache, no-store, must-revalidate`) 并使用随机查询作为缓存破坏器。

# text - 建立自己的文本语料库

> ID：11328142
> 
> 赞同：4
> 
> 时间：2012-07-04T11:25:17.363
> 
> 标签：text, corpus

听起来可能很愚蠢，但是您知道如何构建文本语料库吗？我到处搜索并且已经存在语料库，但我想知道他们是如何构建它的？例如，如果我想构建带有正面和负面推文的语料库，那么我只需要制作两个文件吗？但是那些文件的内部呢？不明白（（（（ [在此示例中](http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/)，他将 pos 和 neg 推文存储在 RedisDB 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T00:26:08.000

> 但是那些文件的内部呢？

这主要取决于您使用的库。XML（带有各种标签）很常见，每行一个句子也是如此。棘手的部分是首先获取数据。

> 例如，如果我想构建带有正面和负面推文的语料库

这是否意味着您想知道如何将推文标记为正面和负面？如果是这样，您正在寻找的是所谓的文本分类或语义分析。

如果您想查找一堆推文，我会查看其中一个页面（仅来自我自己的快速搜索）。

Clickonf5：[http ://clickonf5.org/5438/download-tweets-pdf-xml-format-local-machine-server/](http://clickonf5.org/5438/download-tweets-pdf-xml-format-local-machine-server/)

Quora：http: [//quora.com/What-is-the-best-tool-to-download-and-archive-Twitter-data-of-certain-hashtags-and-mentions-for-academic-research](http://quora.com/What-is-the-best-tool-to-download-and-archive-Twitter-data-of-certain-hashtags-and-mentions-for-academic-research)

谷歌群组：[http ://groups.google.com/forum/?fromgroups#!topic/twitter-development-talk/kfislDfxunI](http://groups.google.com/forum/?fromgroups#!topic/twitter-development-talk/kfislDfxunI)

对于如何创建语料库的一般学习，我会查看 Richard Xiao 的[Handbook of Natural Language Processing Wiki](http://cgi.cse.unsw.edu.au/~handbookofnlp/index.php?n=Chapter7.Chapter7)。

# gpl - 我可以在 GPL 许可下销售产品吗？

> ID：11328143
> 
> 赞同：1
> 
> 时间：2012-07-04T11:25:21.583
> 
> 标签：gpl

我有一些符合 GPL 许可条款的文本数据。我已经使用了这个文本数据并创建了一个 iOS 产品。我只使用了文本数据。

我可以付费出售我的产品吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T11:31:20.730

[是的你可以...](http://www.gnu.org/philosophy/selling.html.en)

> 除一种特殊情况外，GNU 通用公共许可证 (GNU GPL) 没有关于分发自由软件副本可以收取多少费用的要求。你可以不收取任何费用，一分钱、一美元或十亿美元。这取决于您和市场，所以如果没有人愿意为副本支付 10 亿美元，请不要向我们抱怨。
> 
> 一个例外是在没有相应完整源代码的情况下分发二进制文件的情况。GNU GPL 要求这样做的人在后续请求时提供源代码。如果对源代码的费用没有限制，他们可以设定一个任何人都无法支付的高额费用——比如十亿美元——从而假装发布源代码，而实际上隐藏它。所以在这种情况下，我们必须限制源代码的费用，以确保用户的自由。但在一般情况下，限制发行费用是没有道理的，所以我们不限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:29:12.133

您可以出售 GPL 代码，但您必须确保您自己的所有代码或链接（意味着 iOS 上的所有内容）都已获得与 GPL 兼容的许可。意味着您的所有代码都是公开可用的，并且您不使用任何不兼容的许可证（例如：专有库）

如果您的目标是销售，最好切换到 BSD 库（或动态链接并使用 LGPL，这在 iOS 上是不可能的）

# asp.net-mvc-4 - MVC4 将模型属性 ID 发送到控制器类

> ID：11328148
> 
> 赞同：0
> 
> 时间：2012-07-04T11:25:31.187
> 
> 标签：asp.net-mvc-4

如何将模型属性名称的 id 发送到 MVC4 应用程序中的控制器类

```
 public class{
public Name{get;set;}
} 
```

对于使用该属性更新的 id 访问名称：如果在运行时使用 jquery 更改名称，我想将更改后的名称 id 发送到控制器类

更新：这是我的观点

```
<script type="text/javascript">

$(function () {

    $('.editor input').blur(function () {
        $(this).hide();
        $(this).closest('p').find('label').html($(this).val()).show();

    });

    $('.editor label').click(function () {
        $(this).hide();
        $(this).closest('p').find('input').show();

    });

}); 
```

```
@using (Html.BeginForm("Homepage", "Home", FormMethod.Post))
{ 
     <div class="editor">

    <p>
        @Html.LabelFor(x => x.Name, Model.Name)
        @Html.EditorFor(x => x.Name)
       <input type="submit" value="OK"  />
       </p>

     <p>
        @Html.LabelFor(x => x.Company, Model.Company)
        @Html.EditorFor(x => x.Company)
      <input type="submit" value="OK" />
    </p>
     <p>
        @Html.LabelFor(x => x.City, Model.City)
        @Html.EditorFor(x => x.City)
         <input type="submit" value="OK" />
    </p>
</div> 
<input type="submit" value="OK"   />
} 
```

这是我的模型

```
 public class Details
{

    public string Name
    { get; set; }

    public string Company
    { get; set; }

    public string City
    { get; set; }

} 
```

这是我的控制器方法

```
 public ActionResult Homepage(Details d)
    {
        d.Name = "Rakesh";
        d.Company = "TCS";
        d.City = "DElhi";
        return View(d);
    }

    [HttpPost, ActionName("Homepage")]
    public ActionResult Indexof(Details d)
    {
      return View(d);
    } 
```

在这里我正在编辑并将数据发送到控制器，但我的问题是当我单击 Rakesh 并更改名称时，我需要单击按钮两次，然后只有更改的数据被发送到控制器类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:32:12.603

模型：

```
public class SomeModel {
    public string Name { get; set; }
} 
```

控制器：

```
[HttpPost]
public ActionResult YourAction( SomeModel m )
{
    if( ModelState.IsValid )
    {
        // use model
        var name = m.Name;

        return RedirectToAction( "Index", "Home" );
    }
    return View( m );
} 
```

如果这不是您所需要的，请澄清您所说的这个“id”是什么。

# apache - 将文件移动到新文件夹中，现在 mod_rewrite 不起作用？

> ID：11328149
> 
> 赞同：0
> 
> 时间：2012-07-04T11:25:33.347
> 
> 标签：apache

我已经开始考虑mod rewrite，并且让它工作得很好。因此，我随后将该站点移动到了一个新文件夹中，因为我们现在在我的开发服务器上运行了两个项目。

所以我创建了一个新文件夹，移动了所有文件，现在 mod rewrite 不起作用？

我将文件从 httpdocs 移动到 httpdocs/birds

这是mod重写的东西

```
RewriteEngine On    # Switch on rewriting
RewriteRule     ^birds/pages/([A-Za-z0-9\-]+).php?$ birds/index.php?page=$1                 [NC,L]  # Handle site navigation 
```

我很确定这是我做错了，我已经尝试了几种方法......仍然没有快乐？

富有的 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:29:00.933

您缺少目标重写的“/”，并且添加了额外的“？” 在不匹配任何内容的 php 之后：

```
RewriteRule     ^birds/pages/([A-Za-z0-9\-]+)\.php$ /birds/index.php?page=$1                 [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:09:08.287

您还缺少匹配中的“/”：

```
RewriteRule     ^/birds/pages/([A-Za-z0-9\-]+)\.php$ /birds/index.php?page=$1 
```

# mysql - 1130 主机 'amazon-ec2-ip' 不允许连接到这个 MySQL 服务器

> ID：11328150
> 
> 赞同：7
> 
> 时间：2012-07-04T11:25:41.443
> 
> 标签：mysql, amazon-ec2, amazon-web-services, remote-access

我在从另一台 EC2 服务器访问我的一台 Amazon EC2 服务器上的 mysql 数据库时遇到问题。我阅读了有关为从外部 IP 地址访问 mysql 提供适当权限的各种文章，以下是我遵循的步骤：

1.  在我的主机 EC2 实例上打开端口 3306 以允许外部 Mysql 连接。
2.  在文件 /etc/mysql/my.cnf 中，将“绑定地址”从“127.0.0.1”更改为“0.0.0.0”。
3.  使用root打开mysql，执行以下命令：GRANT ALL PRIVILEGES on *。*到 worker@'ec2-ip-address' 由 'password' 识别；

根据我阅读的所有博客/文章，这应该可以解决问题，但我不断收到以下错误：

```
1130  Host 'amazon-ec2-ip' is not allowed to connect to this MySQL server 
```

我为 EC2 实例提供的 IP 地址是您创建实例时生成的弹性 IP。为了验证问题是否特定于 EC2，我尝试为不同的“静态 IP 地址”执行命令“3”。现在，这对我有用（即我能够从该远程服务器登录到 mysql 主机），因此可以确定上述步骤是正确的。

为什么 Amazon EC2 IP 地址不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T16:31:30.910

发布此问题后，当我工作时，我意识到我什至无法 ping 到 EC2 服务器或 telnet 到它。所以一些基本的东西一定是错的。最后一个朋友帮我解决了这个问题。正如我所料，这个问题是 EC2 特有的。

详细情况如下：

当我们创建一个 EC2 实例时，我们会得到一个外部 IP 地址，类似于：ec2-XX-XXX-XXX-XX.ap-southeast-1.compute.amazonaws.com

在 mysql 中设置权限时，我将权限授予上述 IP 地址，即：

```
GRANT ALL PRIVILEGES on . to worker@'ec2-XX-XXX-XXX-XX.ap-southeast1.compute.amazonaws.com' IDENTIFIED BY 'password'; 
```

当您尝试从另一个本地 EC2 实例与 EC2 实例通信时，这不起作用。为此，您需要提供 EC2 实例的“内部 IP 地址”，可以使用 ip 命令找到：

ip一个：

```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN 
link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
inet 127.0.0.1/8 scope host lo
inet6 ::1/128 scope host 
valid_lft forever preferred_lft forever

2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000
link/ether 12:31:41:02:58:47 brd ff:ff:ff:ff:ff:ff
inet **XX.XX.XX.XXX/23** brd YY.YYY.YY.YYY scope global eth0
inet6 fe80::1031:41ff:fe02:5847/64 scope link 
valid_lft forever preferred_lft forever 
```

为了让事情正常工作，您需要授予 IP 地址的权限 --“XX.XXX.XX.XXX/23”，它应该可以工作。同样，在连接“mysql”数据库时，提供给 mysql 命令的主机名也应该是主机 EC2 实例的“内部 ip 地址”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T06:04:17.877

我也面临着类似的问题。仅使用 DNS 名称的数字部分，例如公共 DNS 名称为 ec2-13-114-245-645.compute-1.amazonaws.com 然后仅使用 13.114.245.645 连接到该实例。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-16T08:50:42.770

登录到本地 mariadb/mysql 服务器并给出以下命令：

授予所有特权*。*TO 'root'@'10.0.1.40' 由 'redhat' 识别并带有 GRANT 选项；

这里，10.0.1.40 是我的远程 ec2 实例 ip 地址。

它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-09T13:03:58.013

我在我的 AWS ubuntu(18.04) 服务器中解决了同样的问题。以下是步骤：

*   从 security_group-> InBound 规则打开 3306 端口。
*   配置 /etc/mysql/mysql.conf.d/mysqld.cnf 文件：**bind-address=0.0.0.0**使用它将允许所有 IP 远程连接到 mySql
*   **在 mysql 中为用户添加权限**：
    *   **授予所有特权*。*到 YOUR_USER@'YOUR.PRIVATE_IP.ADDRESS.HERE' 由 'AN_USER_PASSWORD' 识别**；

最后一步很重要。在这里，您要添加用户，带有密码的私有 IP 地址，用户将用于远程登录。

**示例**：

授予所有特权*。*到 root@'XX.XX.XX.XX' 由 'ADMIN_AWS123' 识别；

这里**root**是您的用户，**XX.XX.XX.XX**是您的私有 IP 地址，**ADMIN_AWS123**是您的远程密码。

希望对你有帮助 ：）

# ruby-on-rails-3 - 在 rails 中包含文本编辑器

> ID：11328153
> 
> 赞同：0
> 
> 时间：2012-07-04T11:25:51.380
> 
> 标签：ruby-on-rails-3, text-editor

我想在 rails 3 上的表单中使用文本编辑器。这是最好的 rails 测试编辑器。我该如何使用它？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:32:44.273

[CKEditor](http://ckeditor.com/)是一个不错且功能齐全的文本编辑器。此外，还有一个不错的最新 gem 可以帮助您进行集成（它也可以与流行的 gem 一起用于资产上传、回形针和carrierwave）。您可以在[此处](https://github.com/galetahub/ckeditor/)获得所有集成信息。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:31:29.323

CKEditor 是一款不错且功能齐全的文本编辑器。此外，还有一个不错的最新 gem 可以帮助您进行集成（它也可以与流行的 gem 一起用于资产上传、回形针和carrierwave）。您可以在此处获得所有集成信息。我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:14:14.093

[就个人而言，我尝试过并且对Tiny MCE](http://www.tinymce.com/)非常满意

您可以添加/删除您想要的功能并根据您的需要对其进行自定义，并且很容易集成到 Rails 应用程序中。

[您可以在此处](http://www.tinymce.com/tryit/full.php)查看并试用全功能版本

# openstreetmap - 从哪里获得用于原型设计的微小但完整的 OSM 数据？

> ID：11328155
> 
> 赞同：0
> 
> 时间：2012-07-04T11:25:55.643
> 
> 标签：openstreetmap

我想要一个足够小的数据集，可以在文本编辑器中加载（打开格式），但代表整个数据。我希望它用于原型脚本，但我不希望它丢失完整数据集中存在的东西。

我下载的最小数据集是 15MB。有小于 1MB 的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T17:31:22.657

访问[http://www.openstreetmap.org](http://www.openstreetmap.org)。移动到具有中等城镇的区域并放大，以便您可以看到整个小城镇。单击“导出”选项卡。单击“手动选择其他区域”。拖出一个小矩形，例如 west=-0.6309, south=51.7446, east=-0.539, north=51.7791 (Berkhamsted, UK)。单击“OpenStreetMap XML Data”单选按钮，然后按“导出”按钮。您将收到大小为 1.6Mb 的具有合理代表性的数据集。此示例包含除高速公路以外的大多数道路类型，并且是典型 OSM 数据的一个很好的子集。当然，除了planet.osm 之外，没有任何数据集包含每个标签。

# c++ - 为数组中的每个元素设置 std::set

> ID：11328162
> 
> 赞同：4
> 
> 时间：2012-07-04T11:26:18.710
> 
> 标签：c++, arrays, memory-management, vector, set

我需要一个`std::set`数组中每个元素的功能。我怎样才能实现这个功能？

我首先在 C++ 中分配标准集的动态数组，如下所示：

```
set<int>* entry; 
```

其次是分配：

```
entry = (set<int>*)malloc(sizeof(set<int>)*32); 
```

没有编译问题，但是在访问任何元素时运行时会因分段错误而失败：

```
entry[0].insert(23); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T11:30:19.093

关于什么

```
#include <set>
#include <vector>

int main()
{
        std::vector < std::set<int> > entry(32); // std::vector constructor makes 32 calls to std::set<int> constructor
        entry[0].insert(23);
        // std::vector destructor makes 32 calls to std::set<int> destructor
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T11:30:01.367

在 c++ 中，您使用`new`. 这里与 malloc 的区别在于调用构造函数来初始化内存。

```
entry = new set<int>[32]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T11:34:12.987

即使您已经为 32 分配了存储空间，`std::set`您还没有初始化这段内存（即`std::set`尚未调用您的构造函数），因此您尝试*操作/访问*的内存`entry[0].insert (23)`将导致[*未定义的行为*](https://stackoverflow.com/a/4105123/1090079).

将 C++ 对象与`malloc`它的等价物混合通常（我很想写“*总是*”）被认为是不好的做法。

相反，转向`operator new`哪个将分配内存并以适当的方式处理对象的构造，还要记住`delete`分配的内存以将内存释放回系统（并使对象以真正的方式销毁）。

* * *

### 在 C++ 中执行此操作的正确方法

^(*一些答案将包含说明您最好使用 a 的文字`std::vector<std::set>`，尽管这并不是您问题的真正答案，所以我将把这个示例片段留给您*)

```
int
main (int argc, char *argv[])
{
  std::set<int> *entries = new std::set<int> [32]; 

  entries[0].insert (123);

  delete [] entries;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T11:37:23.353

这是一个很好的问题，但它的答案并不是很明显。问题是每个`set`对象都希望在使用之前被初始化，而您的代码只为每个对象分配原始内存`set`。这修复了它：

```
#include <vector>
#include <set>

using std::vector;
using std::set;

const int N = 32;

int main() {
    vector< set<int> > entry(N);
    entry[0].insert(23);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T11:31:05.047

不要尝试将 malloc/calloc/realloc 等与 c++ 类一起使用。使用新的。

# qt - 这个 QML 是否有效（绑定到一个属性两次）？

> ID：11328167
> 
> 赞同：1
> 
> 时间：2012-07-04T11:26:30.333
> 
> 标签：qt, animation, qml

因为它一直表现出奇怪的行为（并导致 QMLViewer 崩溃）。

编码：

```
import QtQuick 1.1

Rectangle {
    width: 800; height: 600

    Rectangle {
        width: 60; height: 60
        x: rect1.x - 5; y: rect1.y - 5
        color: "green"

        property NumberAnimation anim: NumberAnimation { 
            id: animId; duration: 2000 
        }

        Behavior on x {
            animation: animId
        }
        Behavior on y {
            animation: animId
        }
    }

    Rectangle {
        id: rect1
        width: 50; height: 50
        color: "red"
    }

    focus: true

    Keys.onRightPressed: rect1.x = rect1.x + 100
    Keys.onLeftPressed:  rect1.x = rect1.x - 100
    Keys.onUpPressed:    rect1.y = rect1.y - 100
    Keys.onDownPressed:  rect1.y = rect1.y + 100
} 
```

请注意该`anim`属性，其值显然不是封闭元素的子元素。

这可能给我们带来了 QML 内存管理和所有权的问题（再次）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:55:17.900

看起来 QML`Behavior`元素不能`animation`与其他人共享它的实例。如果您`NumberAnimation`为每个定义`Behavior`它应该可以正常工作。

```
Rectangle {
    width: 60; height: 60
    x: rect1.x - 5; y: rect1.y - 5
    color: "green"

    Behavior on x {
        NumberAnimation {
            duration: 2000
        }
    }
    Behavior on y {
        NumberAnimation {
            duration: 2000
        }
    }
} 
```

# css - HTML 元素向右对齐以将左侧空间填充到另一个动态元素

> ID：11328168
> 
> 赞同：0
> 
> 时间：2012-07-04T11:26:30.017
> 
> 标签：css, html

好的，伙计们，这是我的问题。我的网站上有一个导航栏，可以由网站管理员自定义 - 他可以将链接添加到导航栏，以便列表具有动态宽度。在栏的右上角，我有一个带有搜索框的 div 元素。这些是这两个 div 的 CSS 属性：

```
.head_navigation
{
    float:left;
    height:51px;
    padding-top:7px;
    margin:0;
    border:0;
    background:url("images/top_nav_bckg.gif") repeat-x bottom;
    text-align: center;
}

.head_navigation_right{
    float:right;
    border:0;
    margin:0;
    padding:0;
    padding-top:7px;
    height:51px;
    background:url("images/top_nav_bckg_right.gif") repeat-x bottom;
    text-align:right;
} 
```

我不能让右 div 填充其左侧的空白区域。由于左侧 div 是动态的，我无法为右侧设置固定边距。我也试过：

```
width: 100%; 
```

并将正确的 div 放在下面的行并填满整个页面。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:39:34.263

[http://jsfiddle.net/Zx9gw/1/](http://jsfiddle.net/Zx9gw/1/)

从 head_navigation_right 中移除 float 属性。

```
.head_navigation_right{
    border:0;
    margin:0;
    padding:0;
    padding-top:7px;
    height:51px;
    background:url("images/top_nav_bckg_right.gif") repeat-x bottom;
    text-align:right;
}​ 
```

不幸的是我不能告诉你为什么会这样，我只能假设：float 改变了一个元素的显示，所以任何*其他*元素都会占据其余的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:38:06.467

将左右 div 放入具有所需背景的 div 容器中。

例如：

```
<div id="menuBar">
     <div class="head_navigation"></div>
     <div class="head_navigation_right"></div>
     <div style="clear:both"></div>
</div> 
```

然后给 menuBar 你想要的背景......希望我理解这个问题是正确的。

**编辑 - 另一个解决方案**

制作 .head_navigation 和 .head_navigation_right 的容器 position:relative; 并给出一个高度，如果没有的话。然后将此应用于您的CSS：

```
.head_navigation
{
    position:absolute;
    left:0px;
    top:0px;
    z-index:1;
    height:51px;
    padding-top:7px;
    margin:0;
    width:100%;
    border:0;
    background:url("images/top_nav_bckg.gif") repeat-x bottom;
        text-align: center;
}

.head_navigation_right{

    position:absolute;
    right:0px;
    top:0px;
    z-index:2;
border:0;
margin:0;
padding:0;
padding-top:7px;
height:51px;
background:url("images/top_nav_bckg_right.gif") repeat-x bottom;
text-align:right;
} 
```

# testing - 在 Zope 3 中测试前加载初始数据

> ID：11328175
> 
> 赞同：0
> 
> 时间：2012-07-04T11:26:54.347
> 
> 标签：testing, zope, fixtures, doctest, zope3

如何在 Zope 3 项目中使用测试数据填充数据库？我希望在任何测试开始之前加载这些数据（doctest，单元测试......），我不想在 SetUp 方法中手动加载它......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T11:50:39.003

这是一个开始：[http](http://wiki.zope.org/zope2/TestLayersHowTo/) ://wiki.zope.org/zope2/TestLayersHowTo/ 。

您正在寻找测试层；setUp 和 tearDown 用于一组测试，因此您可以一次为多个测试设置测试夹具。测试层还允许您创建测试夹具层；一层依赖于另一层。

# ios - 苹果推送通知 registerForRemoteNotificationTypes: 方法

> ID：11328177
> 
> 赞同：1
> 
> 时间：2012-07-04T11:27:08.200
> 
> 标签：ios, push-notification

当 iOS 设备注册远程通知时，它通过调用方法向 Apple Service 注册：

```
 registerForRemoteNotificationTypes: 
```

该方法是同步的还是异步的？

如果设备由于某种原因无法立即获得令牌怎么办？它会打电话`didFailToRegisterForRemoteNotificationsWithError`还是一直在等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:29:33.097

根据 developer.apple.com，registerForRemoteNotificationTypes 是异步的：

当您发送此消息时，设备将启动 Apple 推送服务的注册过程。如果成功，则应用程序委托在 application:didRegisterForRemoteNotificationsWithDeviceToken: 方法中接收到一个设备令牌；如果注册不成功或未能接收令牌，则通过 application:didFailToRegisterForRemoteNotificationsWithError: 方法通知委托。

# sql-server - 何时/什么锁在 READ COMMITTED 隔离级别中被持有/释放

> ID：11328180
> 
> 赞同：18
> 
> 时间：2012-07-04T11:27:20.607
> 
> 标签：sql-server, tsql, locking, isolation-level

我正在尝试了解 SQL Server 中的隔离/锁定。

我在 READ COMMITTED 隔离级别有以下场景（默认）

我们有一张桌子。

```
create table Transactions(Tid int,amt int)

with some records

insert into Transactions values(1, 100)
insert into Transactions values(2, -50)
insert into Transactions values(3, 100)
insert into Transactions values(4, -100)
insert into Transactions values(5, 200) 
```

现在从msdn我明白了

当触发选择时，将采用**共享锁**，因此没有其他事务可以修改数据（避免脏读）。文档还讨论了行级、页级、表级锁。我想到了以下场景

```
Begin Transaction

select * from Transactions

/*
some buisness logic which takes 5 minutes

*/

Commit 
```

我想了解的是获取共享锁的持续时间以及哪个（行、页、表）。

只有在语句运行时才会获取锁，`select * from Transactions`或者在我们到达 COMMIT 之前会获取整个 5 分钟以上的时间。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-04T14:23:45.087

您问错了问题，您担心*实施*细节。您应该考虑和关心的是隔离级别的语义。Kendra Little 有一张很好的海报来解释它们：[免费海报！SQL Server 隔离级别指南](http://www.littlekendra.com/2011/02/08/isoposter/)。

你的问题应该改写为：

> 从项目中选择 *

问：我会看到哪些项目？
A：所有承诺的项目

问：如果有未提交的事务已经插入/删除/更新项目会怎样？
答：您的 SELECT 将阻塞，直到所有未提交的项目都已提交（或回滚）。

问：如果*在*我运行上面的查询时插入/删除/更新新项目会发生什么？
A：结果未定。您可能会看到一些修改，不会看到其他一些修改，并且可能会阻塞，直到其中一些提交。

一旦您的语句完成，READ COMMITTED 不做任何承诺，与事务的长度无关。如果您再次运行该语句，您将再次获得与之前状态完全相同的语义，并且您之前看到的项目可能会更改、消失并出现新的项目。显然，这意味着*可以*在您选择后对项目进行更改。

更高的隔离级别提供更强的保证：REPEATABLE READ 保证您第一次选择的任何项目在您提交之前都不能被修改或删除。SERIALIZABLE 添加了保证，在您提交之前，您的第二次选择中不会出现任何新项目。

这是你需要了解的，而不是实现机制是如何工作的。在你掌握了这些概念之后，你可能会询问实现细节。它们都在[事务处理：概念和技术](https://rads.stackoverflow.com/amzn/click/com/1558601902)中进行了描述。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-05-31T11:03:53.160

你的问题很好。了解获取什么样的锁有助于深入了解 DBMS。在 SQL Server 中，在所有隔离级别（未提交读、已提交读（默认）、可重复读、可序列化）下，都会为写操作获取排他锁。

无论隔离级别如何，事务结束时都会释放独占锁。

隔离级别之间的差异是指获取/释放共享（读取）锁的方式。

在 Read Uncommitted 隔离级别下，不会获取任何共享锁。在此隔离级别下，可能会发生称为“脏读”的并发问题（允许事务从已被另一个正在运行的事务修改但尚未提交的行中读取数据，因此可以回滚）。

在 Read Committed 隔离级别下，为相关记录获取共享锁。当前指令结束时，共享锁被释放。此隔离级别可防止“脏读”，但由于其他并发事务可以更新记录，因此“不可重复读”（事务 A 检索一行，事务 B 随后更新该行，事务 A 稍后再次检索同一行. 事务 A 两次检索同一行但看到不同的数据）或“幻读”（在事务过程中，执行了两个相同的查询，并且第二个查询返回的行集合与第一个不同）可能会发生.

在可重复读取隔离级别下，在事务持续时间内获取共享锁。“脏读”和“不可重复读”被阻止，但“幻读”仍然可能发生。

在可序列化隔离级别下，在事务期间获取范围共享锁。上述并发问题均未发生，但性能大大降低，并且存在发生死锁的风险。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-04T11:56:59.797

锁只会在`select * from Transaction`运行时获取

您可以使用以下代码检查它

打开一个 sql 会话并运行此查询

```
Begin Transaction

select * from Transactions

 WAITFOR DELAY '00:05'
/*
some buisness logic which takes 5 minutes

*/

Commit 
```

打开另一个 sql 会话并在查询下运行

```
Begin Transaction
Update Transactions
Set = ...
where ....
commit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-17T10:51:26.967

首先，只有在语句运行时才获取锁。您的陈述分为两部分，假设很简单：

```
select * from Transactions
update Transactions set amt = xxx where Tid = xxx 
```

在 READ COMMITTED 隔离级别中何时/什么锁被持有/释放？运行时 `select * from Transactions`，没有获得锁。

以下`update Transactions set amt = xxx where Tid = xxx`将为更新/更新键添加 X 锁，为页面/选项卡添加 IX 锁

所有锁只有在提交/回滚后才会释放。这意味着在 trans 运行中不会释放任何锁。

# jquery - 获取表单 id，然后将其用作 div 名称

> ID：11328185
> 
> 赞同：0
> 
> 时间：2012-07-04T11:27:28.573
> 
> 标签：jquery

我在一个页面上有一系列表格。我正在尝试获取正在提交的特定表单的 id，并使用该确切值作为 div 的名称来插入一些 html。div 已经以该名称存在。

这是代码：

```
$(function () {
    $('.allforms').submit(function (ev) {
        Var myID = $(obj).attr("id");
        esv.preventDefault();
        $.ajax({
            url: "/update",
            data: $(this).serialize(),
            dataType: "html",
            success: function (data) {
                $(myID).html(data);
            }
        });
    });
}); 
```

当我给 div 赋予相同的名称时，数据会正确返回，但只显示在第一个 div 中，所以我知道服务器端正在工作。我刚刚开始使用 Jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:29:25.647

改变这些：

```
Var myID = $(obj).attr("id"); // 'var' keyword should be lowercase
esv.preventDefault(); // you are passing event object as `ev` not `esv` 
```

至：

```
var myID = $(this).attr("id"); // 'this' refers to the current form
ev.preventDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:34:32.347

```
var myID = $(this).attr("id"); 
```

这将返回表单的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:37:18.670

利用

```
$(function () {
    $('.allforms').submit(function (ev) {
        Var myID = this.id; // this refers to the form, and id is a droperty of the element so you can access it directly..
        ev.preventDefault(); // esv -> ev as that is the name you use as the parameter
        $.ajax({
            url: "/update",
            data: $(this).serialize(),
            dataType: "html",
            success: function (data) {
                $('#' + myID).html(data);
            }
        });
    });
}); 
```

# c# - 带有双重检查锁的单例设计模式

> ID：11328186
> 
> 赞同：2
> 
> 时间：2012-07-04T11:27:29.047
> 
> 标签：c#, design-patterns, singleton

考虑您有以下代码：
1\. 为什么我们使用双检查锁，为什么单锁不够好，请提供详细示例。
2\. 这种实现的主要缺点是什么？我应该如何证明呢？
谢谢。

```
 public sealed class SomeSingleton5  
{  
    private static SomeSingleton5 s_Instance = null;
    private static object s_LockObj = new Object();

    private SomeSingleton5() { }

    public static SomeSingleton5 Instance
    {
        get
        {
            if (s_Instance == null)
            {
                lock (s_LockObj)
                {
                    if (s_Instance == null)
                    {
                        s_Instance = new SomeSingleton5();
                    }
                }
            }

            return s_Instance;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T11:31:03.427

我认为单例类的最佳实现是由`Jon Skeet`.

```
public sealed class Singleton
{
  private static readonly Singleton instance = new Singleton();
  public static Singleton Instance { get { return instance; } }
  static Singleton() {}
  private Singleton() {}
} 
```

> [由 Jon Skeet 澄清的单身人士](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:29:37.457

1.  获取锁是昂贵的。如果没有第一次检查，**每次**有人访问单例时`if(s_Instance == null)`都会获得一个锁。但实际上只需要在实例*创建*期间有一个锁。所以第一个防止不必要的锁定。第二个需要在那里，因为最初两个线程可能已经评估了第一个，然后两个线程将在锁内相互实例化。***`if(s_Instance == null)``if(s_Instance == null)``if(s_Instance == null)``true``s_Instance`***
****   我在您的实现中没有看到任何真正的缺点，但是使用替代方案（静态构造函数，见下文）我们有一个更简单且涉及更少代码的解决方案。因此它更易于维护且不易出错。而且它根本不需要锁定。如前所述，锁定是昂贵的。***

 ***您可以通过使用静态构造函数来改进它：

```
public sealed class SomeSingleton5  
{  
    // the compiler will generate a static constructor containing the following code 
    // and the CLR will call it (once) before SomeSingleton5 is first acccessed
    private static SomeSingleton5 s_Instance = new SomeSingleton5();

    private SomeSingleton5() { }

    public static SomeSingleton5 Instance
    {
        get
        {
            return s_Instance;
        }
    }
} 
```***

# c# - “使用 clsid 检索组件的 com 类工厂”在使用 dll 连接时显示此错误。？

> ID：11328194
> 
> 赞同：0
> 
> 时间：2012-07-04T11:27:57.360
> 
> 标签：c#, dll

我正在使用 64 位 windows server 2008 机器，我尝试使用 c# 代码连接 ERP dll。但是在运行应用程序时显示此错误“retrieving the com class factory for component with clsid ....”。我使用注册 dll命令“regsvr32 Interop.AccpacCOMAPI.dll”。然后这次错误是“dll可能与您正在运行的Windows版本不兼容..”。我该如何运行该应用程序。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:33:04.817

要解决此问题，请从 %SystemRoot%\Syswow64 运行 Regsvr32.exe。例如，在 Start\Run 中键入以下命令来注册 DLL：

\windows\syswow64\regsvr32 Interop.AccpacCOMAPI.dll

# android - Android应用和应用服务器

> ID：11328196
> 
> 赞同：0
> 
> 时间：2012-07-04T11:28:00.337
> 
> 标签：android

我想开发一个将数据记录到 sql server 中的基本表单应用程序。但是，这是商业工作，因此出于安全原因，我需要使用应用程序服务器。我搜索并发现android可以通过开源库连接到sql server，但我不确定如何使用这些应用程序服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:29:33.740

您应该在您的应用程序服务器上编写一个 web 服务层，并在 android 客户端上使用它们。不建议直接连接到数据库

# javascript - 更改输入值的颜色

> ID：11328198
> 
> 赞同：1
> 
> 时间：2012-07-04T11:28:03.117
> 
> 标签：javascript, jquery, input, colors

```
<input class="problem" type="text" value="some text" disabled="disabled"> 
```

如何更改“某些文本”的颜色？

upd：CSS 样式仅适用于 Chrome 和 Mozilla。我需要所有浏览器的支持，包括 IE7+

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:28:59.610

只需应用一些 CSS 样式，例如

```
.problem {
  color : red;
} 
```

您甚至可以像这样为正常输入和禁用输入定义两种不同的颜色；

```
.problem { color : red; }
.problem[disabled] { color : #cfcfcf; } 
```

小提琴示例：http: [//jsfiddle.net/dgNZS](http://jsfiddle.net/dgNZS)

在较旧的 IE 版本上，无法更改已禁用输入元素的颜色，如已[在此处回答的，](https://stackoverflow.com/questions/602070/changing-font-colour-in-textboxes-in-ie-which-are-disabled)但您可以尝试遵循 bobince 的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:00:51.460

您可以更改所有浏览器中所有属性的文本框的禁用样式，文本颜色除外并且仅在 IE 中。对于 IE（对于除文本颜色之外的所有属性），您必须将**doctype**设置为 4.01 strict，然后使用类似的代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<style type="text/css">
input[disabled], input[readonly] { 
 background-color: green; 
 border: #3532ff 1px solid; 
 color: #00FF00;
 cursor: default; 
}
</style>
</head>
<body>
<form>
<input class="problem" type="text" value="some text" disabled="disabled">
</form>
</body>
</html> 
```

但是，如果您使用**readonly**而不是**disabled="disabled"**就像*工程师*在 ie 中写的那样也可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:29:51.633

给它一个风格，即`style="color:green"`

```
<input class="problem" type="text" value="some text" disabled="disabled" style="color:green"> 
```

或者将其包含在您提供输入的课程中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:29:54.740

**演示** [http://jsfiddle.net/ELuXW/1/](http://jsfiddle.net/ELuXW/1/)

API：CSS - [http://api.jquery.com/css/](http://api.jquery.com/css/)

这应该有帮助，`:)`

**代码**

```
$('.problem').css('color', 'blue');​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T11:42:46.117

对于跨浏览器解决方案，您需要使用`readonly`和`unselectable`属性而不是`disabled`，并应用以下样式：

```
.problem[readonly]{
     color: red;
     /*Preventing selection*/
     -webkit-touch-callout: none;
     -webkit-user-select: none;
     -khtml-user-select: none;
     -moz-user-select: none;
     -ms-user-select: none;
     user-select: none;
     /**/
}​ 
```

*标记*：

```
<input class="problem" type="text" value="some text" readonly unselectable="on"> 
```

[**演示**](http://jsfiddle.net/UKukL/)

# list - 将嵌套的 json 绑定到一个商店，然后该商店在 sencha touch 2 中列出

> ID：11328205
> 
> 赞同：0
> 
> 时间：2012-07-04T11:28:32.443
> 
> 标签：list, jsonp, sencha-touch-2

我是 Sencha touch 2 的新手。我被困在将 jsonp 数据与 store 绑定的地方。我使用牛顿 json 库创建的 jsonp 数据如下：-

```
getjobinfo({"success":true,"method":"GetJobInfo","errormsg":"","csjob":{"jobguid":"1ac1d6bf-80bd-4555-aeba-77e5bdb7b265","jobcode":"ABCDEFGH","jobdescription":"This is the job description. It's a great job. You'll make a lot of money. Hardly any work required.","jobquestions":[{"jobquestionguid":"1ac1d6bf-80bd-4555-aeba-77e5bdb7b266","jobquestiontext":"Describe what you would do if you made a lot of money."},{"jobquestionguid":"1ac1d6bf-80bd-4555-aeba-77e5bdb7b267","jobquestiontext":"Please describe your unique approach to doing nothing and the biggest challenge you've faced doing nothing in other jobs."}]}}); 
```

问题的数量是动态的，取决于工作代码

我也想获得工作代码，并且在另一个地方我想将问题绑定到列表中。

但如果我尝试绑定问题，我将无法访问作业代码，反之亦然。

我只想使用一家商店。模型可以多次使用。

但是如何关联我不知道的模型。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:01:11.713

似乎您想将 JSON 数据保存到`Ext.data.TreeStore`并通过`Ext.NestedList`. 这是一个很好的开始[示例：Sencha Touch 嵌套列表和树存储的示例](https://github.com/nelstrom/Sencha-Touch-nested-list-demo)

注意：只看**公用文件夹**。

# single-sign-on - SAML 2.0 的使用在增加吗？

> ID：11328206
> 
> 赞同：3
> 
> 时间：2012-07-04T11:28:34.083
> 
> 标签：single-sign-on, saml-2.0

我们正在考虑在我们的门户上使用 SAML 2.0 实施登录设施。但是 SAML 2.0 的使用在增加还是我应该使用任何替代技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T02:40:10.293

从我的组织（Ping Identity）的角度来看，SAML 2.0 仍然非常强大，可能不会很快被取代。有很多基于[SAML 的产品可用](http://en.wikipedia.org/wiki/SAML-based_products_and_services#Products_that_provide_SAML_actors)- 每天都在不断涌现。[像Google](https://developers.google.com/google-apps/sso/saml_reference_implementation)和[Salesforce](http://wiki.developerforce.com/page/How_to_Implement_Single_Sign-On_with_Force.com)这样的主要 SaaS 提供商已经在 SAML 2.0 SSO 上进行了标准化，我们已经看到[超过 1500 家其他](https://support.pingidentity.com/s/marketplace-integration-home-page)提供商也这样做了。

有一些证据表明，基于[OAuth 2](http://oauth.net/2/)的 SSO——或者很可能是[OpenID Connect](http://openid.net/connect/)（建立在 OAuth 2 之上）——最终将成为主导。目前，它主要专注于面向消费者的身份提供商和应用程序，如 Facebook、Twitter、LinkedIn 等。

SAML 在需要强大信任（联合）关系的商业/企业世界中仍然占据主导地位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:27:47.180

Our school recently jumped on board the SAML 2.0 train. All of our students have access to Gmail for their school accounts. Now we are going to be using a cloud storage service for the students as well, employing SAML again for it. We are the Identity Providers (IdP) and our clients are Service Providers (SP).

I'm specifically using simplesamlphp for SSO generation, but that's merely my flavor preference. Java seems to be the other big platform SAML is used on. Either way, I don't foresee its use in the education industry going anywhere soon.

# html - html表格固定垂直滚动

> ID：11328208
> 
> 赞同：1
> 
> 时间：2012-07-04T11:28:49.063
> 
> 标签：html, scroll, css-tables, horizontal-scrolling, vertical-scrolling

我有一个包含大量列和行的表格，表格在一个固定大小的 div 中，所以我有一个水平和垂直滚动。

仅在滚动最后一列后才会显示垂直滚动。

有什么方法可以固定垂直滚动条，使其始终显示，而不仅仅是滚动到最后？

希望问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:48:57.083

我告诉你使用 property`overflow-y:auto`而不是`overflow-y:scroll`. 要了解更多信息以及如何使用示例，请点击[链接](http://css-tricks.com/the-css-overflow-property/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:38:53.797

`overflow-y:scroll`在 css 中使用。如果您不熟悉 css，最简单的方法是这样做：

```
<table style="overflow-y:scroll"> 
```

对于水平滚动，请`overflow-x`改用。

有关所有可能的溢出值，请参阅**[此链接](http://www.w3schools.com/cssref/pr_pos_overflow.asp)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-14T12:06:14.787

我遇到了同样的问题，我找到了解决方案。

将您的表格保存在 div 中，并为该 div 提供以下 css

```
<div class="wrapper">
    <table class="table">
        <tr>
             <td></td>
             <td></td>
             <td></td>
        </tr>
    </table>
</div> 
```

你的CSS将是

```
.wrapper{width: 100%; max-width: 700px; max-height: 400px; margin: 30px auto; overflow: auto; padding: 0 15px;} 
```

# sql - 如何仅使用 where 条件仅选择一个具有多个同名的列值？

> ID：11328213
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:29:04.700
> 
> 标签：sql

如何只选择一个列值而不使用表中的函数 first 、 last 、 top 、 limit ？

只想使用 where 命令：

```
ename  age

hansen  25

hansen  25

hansen  25 
```

如何只选择一个值 hansen 25 ？

在上表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:30:36.287

然后使用`DISTINCT`：

```
SELECT DISTINCT ename,  age
FROM TableName; 
```

**更新：**如果不需要使用`DISTINCT`，那么如果您使用的是sql server，则可以执行以下操作：

```
SELECT ename, age
FROM 
(
    SELECT  ROW_NUMBER() OVER(ORDER BY ename DESC) AS row, *
    FROM RableName
) sub
WHERE sub.row = 1; 
```

## [演示](https://data.stackexchange.com/stackoverflow/query/74617)

# python - 如何知道对象是否在 Python 中被删除

> ID：11328219
> 
> 赞同：6
> 
> 时间：2012-07-04T11:29:19.697
> 
> 标签：python, pyside

我在堆中有一个对象和对它的引用。在某些情况下，对象会被删除，但指向其位置的引用并不知道这一点。如何检查堆中是否有真实数据？

例如：

```
from PySide import *
a = QProgressBar()
b = QProgressBar()
self.setIndexWidget(index,a)
self.setIndexWidget(index,b) 
```

然后该`a`对象被删除但`print(a)`返回一个有效地址。但是，如果您尝试`a.value()`- 发生运行时错误（C++ 对象已被删除）。

`a is None`返回`False`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-04T11:54:17.347

对于`PySide`对象，您需要该`shiboken`模块来执行对象查询。

访问[shiboken 模块文档](http://shiboken.readthedocs.org/en/latest/shibokenmodule.html)：

```
import shiboken

print shiboken.isValid(a) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T11:32:05.690

使用模块，[在此处](http://www.riverbankcomputing.co.uk/static/Docs/sip4/python_api.html)`sip`阅读更多信息`sip`

```
import sip

a = QProgressBar()
sip.isdeleted(a)
False

sip.delete(a)
a
<PyQt4.QtCore.QObject object at 0x017CCA98>

sip.isdeleted(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: underlying C/C++ object has been deleted 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:44:20.997

当一个对象负责删除另一个对象时，文档中明确提到了这一点。[在您的示例中，您可以在Qt doc](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setIndexWidget)中看到这一点：

> 如果索引小部件 A 被索引小部件 B 替换，则索引小部件 A 将被删除。

# sql-server - 在 64 位 SQL Server 上运行 32 位程序集

> ID：11328228
> 
> 赞同：2
> 
> 时间：2012-07-04T11:29:39.483
> 
> 标签：sql-server, sql-server-2008, sqlclr

我读了

[http://dbaspot.com/sqlserver-programming/463313-32-bit-clr-procedure-64-bit-sql-server.html](http://dbaspot.com/sqlserver-programming/463313-32-bit-clr-procedure-64-bit-sql-server.html)

这是否意味着无法在 64 位 SQL Server 上运行 32 位程序集？如果是这样，有什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:46:46.050

是的，这是真的。

解决方案是为`Any CPU`. 如果您通过 P/Invoke 调用本机代码，要求它是 32 位进程，那么您将不得不将这些调用修改为它们的 64 位等效项，或者找到一种不同的托管方式来实现结果. 不过我希望你不要这样做，因为在 SQL Server 中使用 CLR 时，打破通常提供的稳定性保证*要*容易得多（它被称为`UNSAFE`权限集是有原因的）。

# java - Mahout 和 MySQL

> ID：11328229
> 
> 赞同：2
> 
> 时间：2012-07-04T11:29:43.500
> 
> 标签：java, mysql, mahout

我使用 Mahout（0.8 版）和 MySQL。我不知道如何连接到数据库。这些示例使用 MySQLJDBCDataModel，但该类不在包中。

这是因为版本还在开发中？或者现在是新的连接方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:26:07.363

不，它肯定在项目中。进去看看`mahout-integration`。

# ruby-on-rails-3 - 使用 Gem libnotify 在 Ubuntu 下使用 Guard + Rspec 未提供测试详细信息

> ID：11328237
> 
> 赞同：1
> 
> 时间：2012-07-04T11:30:10.827
> 
> 标签：ruby-on-rails-3, rspec, tdd, spork, guard

我正在使用 和 的组合设置我的 Rails 应用程序的`Guard`测试。一切似乎都已正确安装，我通过.`Spork``Rspec``libnotify`

但是，在运行 Guard 的控制台中，我期待测试的详细结果。然而，没有出现详细的结果。

我看到的是例如：

```
Spork is ready and listening on 8989!
Spork server for RSpec successfully started
Guard::RSpec is running, with RSpec 2!
Running: spec/controller/sessions_controller_spec.rb spec/controllers/groups_controller_spec.rb
Running tests with args ["--drb", "-f", "progess", "-r", "/var/lib/gems/1.9.1/gems/guard-rspec-1.1.0/lib/guard/rspec/formatters/notification_rspec.rb", "-f", "Guard::RSpec::Formatter::NotificationRSpec", "--out", "/dev/null", "spec/controllers/groups_controller_spec.rb", "spec/controllers/sessions_controller_spec.rb]...
Done

>  > 
```

执行此操作时，我会在 Ubuntu 的通知区域弹出一个窗口，例如：

```
RSpec results
28 examples, 21 failures
in 52.6711 seconds 
```

很公平。测试没有通过。好的，我不在乎，但我想了解测试的详细信息，例如通过`bundle exec rspec spec/`命令在控制台中使用通用 Rspec 时收到的测试的详细信息。

您知道如何在这种情况下显示详细信息吗？

我注意到正在使用的日志中`Guard`，`args`例如`--out`and`/dev/null`我可能认为问题来自它们，但问题是如何更改这些参数？

非常感谢您的宝贵帮助！

以下是我的 Gemfile 的相关内容：

```
gem 'rspec-rails', :group => [:development, :test]

group :test do
  gem 'capybara'
  gem 'factory_girl_rails'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'spork'
  gem 'rb-inotify'
  gem 'libnotify'
end 
```

# c - 在c中生成没有空格的文件名

> ID：11328240
> 
> 赞同：1
> 
> 时间：2012-07-04T11:30:13.300
> 
> 标签：c

下面的代码根据目标目录、电台名称和当前时间生成文件名：

```
static int start_recording(const gchar *destination, const char* station, const char* time)
{
    Recording* recording;
    char *filename;

    filename = g_strdup_printf(_("%s/%s_%s"), 
        destination, 
        station,
        time);

    recording = recording_start(filename);
    g_free(filename);
    if (!recording)
        return -1;

    recording->station = g_strdup(station);

    record_status_window(recording);

    run_status_window(recording);

    return 1;
} 
```

输出示例：

```
/home/ubuntu/Desktop/Europa FM_07042012-111705.ogg 
```

问题：

相同的电台名称可能在标题中包含空格：

```
Europa FM
Paprika Radio
Radio France Internationale
    ...........................
Rock FM 
```

我想帮助我从生成的文件名输出中删除空格，变成这样：

```
/home/ubuntu/Desktop/EuropaFM_07042012-111705.ogg 
```

（更复杂的要求是从文件名中消除所有非法字符）

谢谢你。

更新

如果这样写：

```
static int start_recording(const gchar *destination, const char* station, const char* time)
{
    Recording* recording;
    char *filename;

    char* remove_whitespace(station)
    {
        char* result = malloc(strlen(station)+1);
        char* i;
        int temp = 0;
        for( i = station; *i; ++i)
            if(*i != ' ')
            {
                result[temp] = (*i);
                ++temp;
            }
        result[temp] = '\0';
        return result;
    }

    filename = g_strdup_printf(_("%s/%s_%s"), 
        destination, 
        remove_whitespace(station),
        time);
    recording = recording_start(filename);
    g_free(filename);
    if (!recording)
        return -1;

    recording->station = g_strdup(station);
    tray_icon_items_set_sensible(FALSE);

    record_status_window(recording);

    run_status_window(recording);

    return 1;
} 
```

收到此警告：

警告：传递 'strlen' 的参数 1 使指针从没有强制转换的整数 [默认启用] 警告：赋值使指针从没有强制转换的整数 [默认启用]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:37:13.527

如果您可以就地修改名称，则可以使用以下内容：

```
char *remove_whitespace(char *str)
{
   char *p;

   for (p = str; *p; p++) {
      if (*p == ' ') {
         *p = '_';
      }
   }
} 
```

如果没有，只需 malloc 另一个相同大小的字符串，将原始字符串复制到其中并在使用后释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:51:39.893

```
void remove_spaces (uint8_t*        str_trimmed,
                    const uint8_t*  str_untrimmed)
{
  size_t length = strlen(str_untrimmed) + 1;
  size_t i;

  for(i=0; i<length; i++)
  {
    if( !isspace(str_untrimmed[i]) )
    {
      *str_trimmed = str_untrimmed[i];
      str_trimmed++;
    }
  }
} 
```

删除空格、换行符、制表符、回车符等。请注意，这也会复制空终止字符。

# asp.net-mvc-3 - 错误！请求的 URL 未返回 JSON asp.net mvc

> ID：11328243
> 
> 赞同：1
> 
> 时间：2012-07-04T11:30:22.280
> 
> 标签：asp.net-mvc-3

我一直在使用 Telerik 控件，我正在使用服务器绑定，但我必须使用 Ajax 绑定，它无法正常工作，我收到错误“错误！请求的 URL 没有返回 JSON asp.net mvc” 以下是代码在我的控制器中

```
[GridAction]
    [Authorize(Roles = "Admin")]
    public ActionResult Edit(int id)
    {
        Contact model = _cService.getContact(id, applicationID);
        GetContactType();
        if (model != null)
            return View(model);
        else
        return View();
    }

    //
    // POST: /Contact/Edit/5
    [GridAction]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Edit(int id, Contact model)
    {
        try
        {
            _cService.SaveContact(model, applicationID);
            return RedirectToAction("Index");
        }
        catch
        {
            return View(model);
        }
    } 
```

并在我看来遵循代码

```
@(Html.Telerik().Grid(Model)
    .Name("Contact")
          //  .ToolBar(commands => commands.Insert())
   .DataKeys(keys => keys.Add(c => c.Id))

    .DataBinding(dataBinding => 
    {

        dataBinding.Ajax()

        .Update("Edit", "Contact", new { mode = GridEditMode.InForm, type = GridButtonType.Text })
        .Delete("Delete", "Contact", new { mode = GridEditMode.InLine, type = GridButtonType.Text });
    }) 
```

我能做什么这个错误，这个错误是使用警报框出现的，我试过修改telerik.grid.min.js 我删除了显示警报框的行，然后它没有显示错误但也不起作用。有人可以给我一些建议。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:22:34.617

这不是一个迅速的回应，但当我现在正在解决这个问题时，我可以回答它。这可能是由于您的会话已超时，导致 IIS 重定向到您的登录页面。由于返回的是登录页面，而不是预期的 JSON，因此您会收到此消息。您可以按如下方式捕获此错误：

```
var checkForSessionTimeout = function (e) {
    logOnResponse = e.XMLHttpRequest.responseText.match(/.*<title.*>(Log On)<\/title>.*/);
    if (logOnResponse.length > 0 || e.XMLHttpRequest.status === 401) {
        alert("Your session has expired. You will be redirected to log on.");
        location.href = logOnUrl;
    }
} 
```

当然，您必须定义`logOnUrl`指向您的页面。

一个后续问题，如果您自己找到了答案，知道如何防止实际的错误警报，因为我们提供了我们自己的？

# spring - 显示自定义消息的 Spring 验证

> ID：11328244
> 
> 赞同：0
> 
> 时间：2012-07-04T11:30:26.120
> 
> 标签：spring, spring-mvc

Spring 3.x 中使用 @Valid 注释的验证：下面是 messages_en.properties 的片段。我有一个包含用户名和密码字段的表单。当用户未在“用户名”字段中输入任何内容时，它会显示这两个消息一个在另一个之下。

```
NotEmpty.loginBean.username=Username cannot be Empty
Size.loginBean.username=Size must between 5 to 50 characters. 
```

message.properties 中给出的任何 HTML 标记都不会被解释。

```
NotEmpty.loginBean.username=<li>Username cannot be Empty</li> 
```

上面将按原样显示 <li>。问题： 1) 有什么方法可以解释 HTML 标记并显示其输出？2) 虽然两个验证都失败了，但我可以显示一条消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:57:15.597

广告。1）是的，使用`htmlEscape="false"`：

```
<form:errors path="nip" cssClass="error" htmlEscape="false" /> 
```

广告。2）这实际上是 JSR303 的致命弱点——可以做到，但既不简单也不干净（见[这个问题](https://hibernate.onjira.com/browse/BVAL-255)）。验证每个带注释字段的顺序是未定义的，因此技巧是使用[此处](https://forum.hibernate.org/viewtopic.php?f=26&t=1007328)或[此处](https://stackoverflow.com/questions/9535759/if-i-use-two-custom-annotations-in-jsr-303-how-to-stop-validation-for-second-ann)`@GroupSequence`描述的自定义组。

替代解决方案是使用[带有 @ReportAsSingleViolation 的自定义注释](https://stackoverflow.com/a/7600343/708434)，但它不会区分 NotEmpty 和 Size 错误，因为它会有自己的错误消息。

# c++ - 我们如何得到这个输出 C++

> ID：11328248
> 
> 赞同：0
> 
> 时间：2012-07-04T11:30:36.297
> 
> 标签：c++

我有这个代码：

```
int i = 0, j = 0;
for(i=0,j=0;i<5,j<25;i++,j++);
    cout<<i <<" "<<j; 
```

而且我不知道它为什么输出`25 25`。我真的不明白为什么它在`i`and中获得 25 的值`j`。谁能解释一下为什么它从第二个条件达到 25 值？这是在一个 for 循环中检查两个条件的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:32:48.680

这是[逗号运算符](http://www.eskimo.com/~scs/cclass/int/sx4db.html)的效果。这意味着它*忽略*测试的第一个参数并返回测试结果的第二个参数。

`;`由于您在循环末尾有分号 ( )

```
 for(i=0,j=0;i<5,j<25;i++,j++);
                              ^ 
```

您的 for 循环一直“静默”执行（仅考虑`j<25`条件），完成后，两个变量的值都是`25`.

如果您想在循环执行时查看输出以验证这一点，请`;`从`for`语句末尾删除 。

如果您想根据两者的值终止循环，`i < 5`并且`j < 25`您可能想使用`&&`(and) 运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:32:22.667

这是因为逗号运算符在 c 中的工作方式。

`i = (a,b);`

这将分配`b`给`i`. 在您的情况下`i<5,j<25` `j<25`，它被用作检查，并且值`i`对循环没有影响。

我希望你想要实现的是：

```
i<5&&j<25 
```

如果您期望输出为`5,5`.

如果要打印每次迭代的输出，请删除 for 末尾的分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:32:39.710

`,`运算符是一个忽略第一个参数并返回第二个参数的运算符。因此只有第二个条件适用。你需要的是`&&`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:46:48.177

如果您的意思是循环应该运行直到`i < 5`并且`j < 25`为真。这是使用`&&`运算符的代码。

```
int i = 0, j = 0;
for(i=0,j=0; i<5 && j < 25; i++,j++);
cout<<i <<" "<<j; 
```

这里 i 和 j 都是 5。

如果使用 OR( `||`) 运算符，其中 i 和 j 都将是 25，因为两者都在 for 循环中递增，直到两个条件都变为 false。

如果您希望 i 为 5 而 j 为 25，最好编写两个循环或通过以下代码。

```
int i = 0, j = 0;
for(i=0,j=0; j < 25; j++)
{
    if( i < 5 )
    {
        i++;
    }
}
cout<<i <<" "<<j; 
```

# django - 使用 simplejson.dumps 以通过 django 将字典发送到 javascript 时 App Engine 中的奇怪行为

> ID：11328251
> 
> 赞同：0
> 
> 时间：2012-07-04T11:30:42.517
> 
> 标签：django, json, google-app-engine

我通过 django 将我网站的所有文本作为 Javascript 代码使用的字典发送。我还直接用 django 植入了一些值。

```
a = gui_texts 
```

这段代码

```
a['entireText'] = {}
a['entireText'] = json.dumps(gui_texts) 
```

而这段代码

```
a['entireText'] = json.dumps(gui_texts) 
```

产生不同的结果。第一个很好。每当我刷新页面时，第二个会导致字典在其内部递归出现（它很快变得太大而浏览器无法处理）。

这是 django 行：

```
self.response.out.write(template.render(path, a)) 
```

这是javascript：

```
texts = {{entireText|safe}}; 
```

对我来说这很奇怪，我想知道发生了什么。django 函数和/或 simplejson.dumps 是否使用了一些缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:01:20.337

您`gui_texts`通过将 a 设置为 gui_texts 然后对其进行修改来递归地添加自身。

```
>>> gui_texts = {}
>>> gui_texts
{}
>>> import json
>>> gui_texts['entireText'] = json.dumps(gui_texts)
>>> gui_texts
{'entireText': '{}'}
>>> gui_texts['entireText'] = json.dumps(gui_texts)
>>> gui_texts
{'entireText': '{"entireText": "{}"}'} 
```

如果你 make `a = gui_texts`，不要添加`gui_texts`到 a/本身。

在 json 转储之前将整个文本设置为 {} 会破坏递归，但仍应避免。当您将 gui_texts 添加到自身时，您已将整个文本重置为空字典，而不是之前的序列化，这会阻止它增长。

```
>>> gui_texts = {}
>>> gui_texts['entireText'] = {}
>>> gui_texts
{'entireText': {}}
>>> gui_texts['entireText'] = json.dumps(gui_texts)
>>> gui_texts
{'entireText': '{"entireText": {}}'}
>>> gui_texts['entireText'] = {}
>>> gui_texts
{'entireText': {}}
>>> gui_texts['entireText'] = json.dumps(gui_texts)
>>> gui_texts
{'entireText': '{"entireText": {}}'} 
```

您可能想要制作 gui_texts 的副本，例如 gui_texts`a = gui_texts.copy()`是否来自代码，并且您想在显示它之前进行修改

模块变量在所有线程之间共享，只有线程本地是线程本地的。您不会为每个页面请求启动一个包含所有导入等的新解释器。修改这些的能力可能非常强大，但如果您不完全了解正在发生的事情，有时可能会咬到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:39:52.970

尝试使用 HttpResponse 返回值

示例代码将是

```
return HttpResponse(json.dumps(gui_texts), 'application/json') 
```

# cdn - 云前端如何工作？

> ID：11328255
> 
> 赞同：0
> 
> 时间：2012-07-04T11:31:00.553
> 
> 标签：cdn, amazon-cloudfront

我打算用 c# 实现 Amazon 的 CDN（内容交付网络），它在 ASP.NET MVC3 中被称为 CloudFront。
我已经用谷歌搜索了它，但对下面提到的几件事有点困惑。

1.  我们必须先将所有静态资源上传到 CDN 网络，然后才能使用，还是亚马逊可以管理抓取预先定义的站点文件夹或目录的站点静态资源？

2.  当我们在静态资源中发生任何变化或每次我们必须将更新的资源上传到 CDN 网络时，亚马逊是否会自动更新其副本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:58:52.273

1.  CloudFront 基本上是一个缓存。首次访问资源时，它会联系您的原始服务器以获取副本，您无需预加载任何内容。如果您提供静态资源，最好的方法是给它一个包含资源的 S3 存储桶。

2.  如果您的源服务器设置了 HTTP 缓存控制标头，则 CloudFront 将使用它们来确定检查更新文件的频率。否则，您可以在 CloudFront 设置中设置默认超时。这是[亚马逊的文档](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html)。

# java - 用java测量DNS查找时间

> ID：11328261
> 
> 赞同：1
> 
> 时间：2012-07-04T11:31:27.547
> 
> 标签：java, sockets, networking

我需要测量 Java 应用程序的 DNS 查找时间。我的想法是测量 InetAddress.getByName("myName") 的执行时间。我不确定这个调用是否被操作系统缓存。有人可以告诉我吗？

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:39:36.430

关于缓存，[InetAddress](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html)的 javadoc说：

```
The InetAddress class has a cache to store successful as well as unsuccessful host name resolutions. 
```

因此，无论操作系统如何，Java 都会缓存结果。

继续阅读，您会看到可以指定修改默认缓存行为的 JVM 参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T11:42:06.220

我不确定操作系统，但**Java 有自己的 DNS 缓存**，可以通过系统属性进行配置。请查看[此链接](http://java-monitor.com/forum/showthread.php?t=181)以获取更多详细信息。

编辑：

您的用例保证[禁用 DNS 缓存](http://www.rgagnon.com/javadetails/java-0445.html)。

# vim - gvim中以h为前缀的字体大小是什么

> ID：11328263
> 
> 赞同：0
> 
> 时间：2012-07-04T11:31:31.880
> 
> 标签：vim

我在 Windows xp 上使用 gVim7.2，并将 gui 字体设置为 Consolas 11。在我的 .vimrc 中使用以下代码

> `:set guifont=Consolas:h11`

我很好奇为什么尺寸以“h”为前缀？“h”是什么意思？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:34:04.103

伊迪加斯是对的。

来自`:help 'guifont'`：

```
For the Win32 GUI                   *E244* *E245*
- takes these options in the font name:
    hXX - height is XX (points, can be floating-point)
    wXX - width is XX (points, can be floating-point)
    b   - bold
    i   - italic
    u   - underline
    s   - strikeout
    cXX - character set XX.  Valid charsets are: ANSI, ARABIC,
          BALTIC, CHINESEBIG5, DEFAULT, EASTEUROPE, GB2312, GREEK,
          HANGEUL, HEBREW, JOHAB, MAC, OEM, RUSSIAN, SHIFTJIS,
          SYMBOL, THAI, TURKISH, VIETNAMESE ANSI and BALTIC.
          Normally you would use "cDEFAULT".

  Use a ':' to separate the options.
- A '_' can be used in the place of a space, so you don't need to use
  backslashes to escape the spaces. 
```

# c++ - C++ 中的类 Python 循环枚举

> ID：11328264
> 
> 赞同：44
> 
> 时间：2012-07-04T11:31:46.190
> 
> 标签：c++, for-loop, c++11

> **可能重复：**
> [在 C++11 基于范围的 for 循环中查找元素的位置？](https://stackoverflow.com/questions/10962290/find-position-of-element-in-c11-range-based-for-loop)

我有一个`vector`并且我想迭代它，同时可以访问每个单独元素的索引（我需​​要将元素及其索引都传递给函数）。我考虑了以下两种解决方案：

```
std::vector<int> v = { 10, 20, 30 };

// Solution 1
for (std::vector<int>::size_type idx = 0; idx < v.size(); ++idx)
    foo(v[idx], idx);

// Solution 2
for (auto it = v.begin(); it != v.end(); ++it)
    foo(*it, it - v.begin()); 
```

我想知道是否有更紧凑的解决方案。类似于 Python 的[enumerate](http://docs.python.org/library/functions.html#enumerate)的东西。这是我使用 C++11 范围循环得到的最接近的结果，但是必须在私有范围内定义循环外部的索引肯定似乎比 1 或 2 更糟糕的解决方案：

```
{
    int idx = 0;
    for (auto& elem : v)
        foo(elem, idx++);
} 
```

有什么方法（可能使用 Boost）来简化最新的示例，使索引独立到循环中？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-04T12:36:27.123

这是一种使用惰性求值的有趣解决方案。首先，构造生成器对象`enumerate_object`：

```
template<typename Iterable>
class enumerate_object
{
    private:
        Iterable _iter;
        std::size_t _size;
        decltype(std::begin(_iter)) _begin;
        const decltype(std::end(_iter)) _end;

    public:
        enumerate_object(Iterable iter):
            _iter(iter),
            _size(0),
            _begin(std::begin(iter)),
            _end(std::end(iter))
        {}

        const enumerate_object& begin() const { return *this; }
        const enumerate_object& end()   const { return *this; }

        bool operator!=(const enumerate_object&) const
        {
            return _begin != _end;
        }

        void operator++()
        {
            ++_begin;
            ++_size;
        }

        auto operator*() const
            -> std::pair<std::size_t, decltype(*_begin)>
        {
            return { _size, *_begin };
        }
}; 
```

然后，创建一个包装函数 enumerate 来推断模板参数并返回生成器：

```
template<typename Iterable>
auto enumerate(Iterable&& iter)
    -> enumerate_object<Iterable>
{
    return { std::forward<Iterable>(iter) };
} 
```

您现在可以这样使用您的功能：

```
int main()
{
    std::vector<double> vec = { 1., 2., 3., 4., 5\. };
    for (auto&& a: enumerate(vec)) {
        size_t index = std::get<0>(a);
        double& value = std::get<1>(a);

        value += index;
    }
} 
```

上面的实现只是一个玩具：它应该`const`与非`const`左值引用和右值引用一起工作，但考虑到它多次复制整个可迭代对象，对后者来说有实际成本。这个问题肯定可以通过额外的调整来解决。

从 C++17 开始，分解声明甚至允许您使用酷酷的类似 Python 的语法来直接在`for`初始化程序中命名索引和值：

```
int main()
{
    std::vector<double> vec = { 1., 2., 3., 4., 5\. };
    for (auto&& [index, value] : enumerate(vec)) {
        value += index;
    }
} 
```

符合 C++ 的编译器分解`auto&&`推断`index`as`std::size_t&&`和`value`as `double&`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-04T11:51:38.520

正如@Kos 所说，这是一件非常简单的事情，我真的不认为有必要进一步简化它，并且个人只会坚持使用索引的传统 for 循环，除了我会放弃`std::vector<T>::size_type`并简单地使用`std::size_t`：

```
for(std::size_t i = 0; i < v.size(); ++i)
    foo(v[i], i); 
```

我不太热衷于解决方案 2。它需要（有点隐藏）随机访问迭代器，这不允许您轻松交换容器，这是迭代器的强项之一。如果您想使用迭代器并使其通用（并且当迭代器*不是*随机访问时可能会导致性能下降），我建议使用`std::distance`：

```
for(auto it(v.begin()); it != v.end(); ++it)
    foo(*it, std::distance(it, v.begin()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:46:09.073

一种方法是将循环包装在您自己的函数中。

```
#include <iostream>
#include <vector>
#include <string>

template<typename T, typename F>
void mapWithIndex(std::vector<T> vec, F fun) {
   for(int i = 0; i < vec.size(); i++) 
       fun(vec[i], i); 
}

int main() {
   std::vector<std::string> vec = {"hello", "cup", "of", "tea"};
   mapWithIndex(vec, [](std::string s, int i){
      std::cout << i << " " << s << '\n';
   } );
} 
```

# iphone - iPhone 应用程序可以在未运行的特定时间通过 Wi-Fi（或蓝牙）向设备发送命令（数据）吗？

> ID：11328272
> 
> 赞同：1
> 
> 时间：2012-07-04T11:32:14.597
> 
> 标签：iphone, ios, xcode

情况：我的 iPhone 通过 Wi-Fi 与外部设备通信。该应用程序还可以设置时间表。这意味着在特定时间设备应该打开并做一些事情。现在为了实现这一点，外部设备上应该有一个计时器，或者 iPhone 应该在特定时间向设备发送命令。

问题：是否可以在应用程序处于后台时向外部设备发送命令？还是应用程序必须在前台？当外部设备是附件时可以吗？因为我读过应用程序在需要与配件通信时允许在后台运行？？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:50:06.903

不，你不能这样做，你只能在后台运行应用程序，如果它的流音频、VOIP 客户端或跟踪用户位置。如果您在附件程序中（这意味着您可以制作与基座连接器一起使用的硬件，那么您的应用程序也可以在后台运行。但前提是连接了响应的附件。

没有办法安排在设定的时间触发任何操作。

您可以安排本地通知，但用户必须先查看（通过单击通知打开您的应用程序），然后您的应用才会收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:53:25.247

你真的有设备通信吗？如果没有，您应该看看 Apple 的 MFI（Made for iPhone）计划。通过蓝牙从 iPhone 向外部配件发送数据或通信属于它。它们为您提供某些协议规范，允许您与外部附件进行通信。但是，如果您是个人开发人员，则很难做这样的事情。这是链接：[https](https://developer.apple.com/programs/mfi/) ://developer.apple.com/programs/mfi/ 。

# javascript - 在javascript中显示客户端时间而不是服务器时间

> ID：11328278
> 
> 赞同：3
> 
> 时间：2012-07-04T11:32:25.233
> 
> 标签：javascript, datetime

我遇到了javascript`Date()`函数的奇怪问题，这些是细节

> 服务器端：Struts (ActionForm, Action class, jsp)
> 客户端：jQuery, javascript

现在，我需要页面上的服务器时间并使用 javascript 进行操作。所以，我 `Calendar.getInstance().getTimeinMillis();`在动作类中做了，并将其保存为 ActionForm 属性。

现在，在客户端，我从 styleId 中获得了长值 (timeinMillis)。但是，为了操纵，当我这样做时

```
var curTime = parseInt($("#serverTime").val());
var serverTime = new Date(curTime); 
```

现在，serverTime 提供的是客户端机器日期而不是服务器日期，尽管我们提供的是服务器的 timeinMillis。

奇怪的是，当我从服务器传递日期的字符串值而不是 long timeinMillis 并将其作为参数传递时，它运行良好。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:19:37.457

这是因为您的 javascript 在客户端计算机上运行，​​因此当您在 javascript 中创建 new Date() 时，它会占用客户端计算机时间。

如果您将服务器日期作为字符串传递，则回答第二个查询，它将创建该日期的日期对象。

使用以下功能

```
 function calcTime(offset) {
        // create Date object for current location
        d = new Date();
       // convert to msec, add local time zone offsetand  get UTC time in msec
        utc = d.getTime() + (d.getTimezoneOffset() * 60000);

        // create new Date object with supplied offset
        nd = new Date(utc + (3600000*offset));

        // return time as a string
        return "The Server time is " + nd.toLocaleString();

    } 
```

在这里，您需要使用 UTC 传递您的服务器时间的偏移量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T06:40:44.097

终于在上述提示的帮助下解决了这个问题。

从 java 方面，使用夏令时选项从 UTC 中获取偏移量。

所以，在 Action 课上

```
Calendar c = Calendar.getInstance();
TimeZone z = c.getTimeZone();
int offset = z.getOffset(c.getTimeInMillis()); 
```

这给出了本地时区和 UTC 时区的偏移量，包括夏令时

在javascript中，我使用了，

```
var now = new Date(); 
var now_utc = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),  now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds());
var sd = new Date(now_utc.getTime() + offset);
alert("The Server time is " + sd.toLocaleString()); 
```

并且，这通过夏令时选项提供了正确的服务器时间。

非常感谢您的帮助，没有他们，将无法解决。干杯!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-01T17:20:33.150

PHP中的一个简单解决方案：

```
 var phpDate = '<?php echo date('Y/m/d H:m:s');?>'
    , serverDate = new Date(phpDate)
    , month = serverDate.getMonth()+1 //getMonth() returns a 0-based number.
    , day = serverDate.getDate()
    , year = serverDate.getFullYear();

  console.log(year + '-' + month + '-' + day); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T12:16:43.840

如果您的服务器和客户端时间位于不同的时区，并且您想向用户显示这种差异，那么您还必须向客户端发送时区信息。

`Calendar.getInstance().getTimeinMillis()`返回自纪元以来的毫秒数，但它没有说明时区。**自 1970 年 1 月 1 日UTC**午夜以来，只有几毫秒，并且在任何时刻，这个数字在任何系统上都是相同的（好吧，考虑到时间是同步的），无论系统的时区如何。这可能会给您一种印象，即您获得的是客户端时间而不是服务器时间。

`Date`这与日期的字符串表示一起工作的原因是其中包含的时区信息，以及 Javascript 解析该信息并在构造对象时将其考虑在内的能力。

# c++ - 提升属性树访问冲突

> ID：11328282
> 
> 赞同：2
> 
> 时间：2012-07-04T11:32:32.860
> 
> 标签：c++, xml, boost, access-violation, boost-propertytree

我一直在尝试使用 boost 的属性树解析 XML 文件，但是每次我想获取字符串的值时，它都会引发访问冲突异常。它适用于整数，所以我有点困惑。这是一些代码：

```
class Config
{
    char * test;
    int test2;

public:
    Config();
};

Config::Config(void)
{
    boost::property_tree::ptree pt;
    boost::property_tree::xml_parser::read_xml("config.xml", pt);

    try
    {
        test = pt.get<char*>("base.char");
        test2 = pt.get<int>("base.int");
    }
    catch(std::exception e)
    {
        //something wasn't specified
    }
} 
```

和 XML 文件：

```
<base>
    <char>test</char>
    <int>10</int>
</base> 
```

首先我认为这是因为我没有为字符串分配空间，但 malloc() 和 new char[] 都没有帮助。

任何帮助，将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:43:04.953

基于[本](http://www.boost.org/doc/libs/1_41_0/doc/html/boost_propertytree/tutorial.html)教程，我认为您需要使用`std::string`而不是`char*`获取字符串值。所以这条线`test = pt.get<char*>("base.char");`将是`test = pt.get<std::string>("base.char");`. （假设您也将`test`'s 类型更改`std::string`为）。

# android - 如何在android中同时更新视图

> ID：11328284
> 
> 赞同：3
> 
> 时间：2012-07-04T11:32:40.960
> 
> 标签：android, android-view

我正在为 API 级别 10 (2.3.3) 开发一个 android 应用程序。在我的应用程序中，有一个可用的搜索栏，其值介于 0-25 之间。

我的问题是当我在搜索栏上进行时，我正在更新多个视图。由于视图只能从 UI 线程更新，所有视图同步更新意味着一个一个。意味着我可以看到该视图正在更新。我的更新不需要任何后台工作。

所以我的问题是有什么方法可以同时更新视图？意味着例如，如果我有 15 个视图，我可以像跨越某个线程一样同时更新所有视图吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:07:39.360

正如您所说，更新只能从 UI 线程完成，而 UI 线程只能处理一个视图。所以你别无选择，只能一一更新。但是如果你把所有的更新都放到一个runnable中，你通常不会看到更新的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:39:00.337

不确定是否要询问此问题，但 AsyncTask 和 doInBackground 适用于此。此外，当后台任务完成后，您可以从 onPostExecute 更新搜索栏。但是您需要携带具有搜索栏的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:19:41.373

这是不可能的。

让我们考虑一下，您实际上可以从 UI 线程外部更新 UI 组件（您不能），即使这不会同时进行。

假设线程 1 进行 100 次操作**t1o1** , **t1o2** , ..., **t1o100**，线程 2 进行*t2o1* , *t2o2* , ..., *t2o100*。

如果您同时运行它们，它们将按类似于以下的顺序执行：

**t1o1**

*t2o1*

**t1o2**

**t1o3**

*t2o2*

……

两个线程同时运行，但没有同时执行两个操作。

# php - 如何在数据库中插入多个文本框值，这些值用 php 复选框选中？

> ID：11328290
> 
> 赞同：0
> 
> 时间：2012-07-04T11:33:10.807
> 
> 标签：php, mysql, checkbox, textbox, insert

下面是我想要的解释

在提交表单上，我有多个复选框。当用户单击复选框时，旁边会出现一个文本框，用户可以在其中输入文本。我想在数组中插入 texbox 的值，并用 PHP-MYSQL 将其插入数据库中。例如 checkbox1 是索引 0=>valueoftextbox，checkbox2 是索引 1=>texbox2 的值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:02:33.913

一些让你前进的指针：

1）从PHP使用：

```
echo "<pre>";
print_r($_POST);
echo "</pre>"; 
```

这样您就可以看到从您的客户表单中发布的内容。

2）请注意，根本没有发布未选中的复选框。

因此，如果您在名为“wantsnewsletter”的表单中有以下复选框。

然后像这样从 PHP 中检查：

```
 if (isset($_POST["wantsnewsletter"])){
   // It was checked.
 } else {
   // It wasn't checked
 } 
```

此外，您只需要想出一些合理的命名并插入数据库即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:58:09.323

序列化收到的 $_POST。

```
<input type="checkbox" name="smth[]" value="One" />
<input type="checkbox" name="smth[]" value="Two" />
<input type="checkbox" name="smth[]" value="Three" />

<?php
if (isset($_POST)) {
   $smth = serialize($_POST['smth']);
   $query = mysql_query("INSERT INTO table VALUES ('$smth')") or die(mysql_error());
} 
```

# php - php xpath 图片

> ID：11328297
> 
> 赞同：0
> 
> 时间：2012-07-04T11:33:42.397
> 
> 标签：php, xpath

我遍历了一个 DOM 以搜索某个 div 中的图像。我已经在 Chrome 中测试了 xpath 表达式，它可以工作。到目前为止，在 PHP 中自动化这个是乏味的。当我在 nodelist 对象上使用 var_dump 时，对象内部似乎有一些东西： object(DOMNodeList)#11 (0) { } 但是，当我在 nodelist 上使用 nodeValue 时，我没有得到任何结果。我的猜测是因为它是图像，它不能显示为字符串，这基本上就是 nodeValue 所做的。有人有通过 xpath 收集图像的经验吗？如何检索我收集的图像？

```
$article = file_get_contents($url);

// get images from article via xpath
$html = new DOMDocument();
@$html->loadHtml($article);
$xpath = new DOMXPath($html);
$nodelist = $xpath->query('//div[@class="contentBody contentBody-collapsed morph"]//img');
var_dump($nodelist);
foreach ($nodelist as $n)
    print $n->nodeValue."<br/>\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:36:28.807

尝试例如：

```
print $n->getAttribute('src'); 
```

# google-apps-script - 如何在几秒钟后使用谷歌应用脚 本隐藏标签？

> ID：11328300
> 
> 赞同：0
> 
> 时间：2012-07-04T11:33:47.293
> 
> 标签：google-apps-script

我有一个简单的应用程序，用户按下按钮并显示欢迎消息。我需要在几秒钟后隐藏这条消息（标签），比如 5 秒钟。我在谷歌应用程序脚本中找不到像 setTimeout() 这样的函数。

有人可以告诉我如何实现这一点吗？

（如您所见，不是经验丰富的程序员）。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:04:10.910

一个可能的解决方案。逻辑是有两个按钮单击处理程序。第一个使标签可见，第二个休眠 5 秒，然后隐藏标签。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var btn = app.createButton().setText('Test');
  var lblVisible = app.createLabel('Visible Test').setVisible(false).setId('lblVisible');
  panel.add(btn);
  panel.add(lblVisible);
  var handler = app.createServerHandler('onBtnClick');
  var handlerWait = app.createServerHandler('onWaitEvent');
  handler.addCallbackElement(panel);
  handlerWait.addCallbackElement(panel);
  btn.addClickHandler(handler);
  btn.addClickHandler(handlerWait);
  app.add(panel);
  return app;
}

function onWaitEvent(e) {
  Utilities.sleep(5 * 1000);
  var app = UiApp.getActiveApplication();
  var lblVisible = app.getElementById('lblVisible');
  lblVisible.setVisible(false);
  return app;
}

function onBtnClick(e) {
  var app = UiApp.getActiveApplication();
  var lblVisible = app.getElementById('lblVisible');
  lblVisible.setVisible(true);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T02:26:01.413

进度指示器解决方案等，这有效。它可以让你链接事件，我已经用过好几次了。

随时随地更新小部件值。productforums.google.com/d/topic/apps-script/lABoP-cJcGQ/…

# python - django cms中views.py文件的某些部分的实现困难

> ID：11328303
> 
> 赞同：0
> 
> 时间：2012-07-04T11:34:04.460
> 
> 标签：python, linux, django-views, ubuntu-10.04

我的views.py代码：

```
from django.template import Context, loader, RequestContext
from django.http import HttpResponse
from skey import find_root_tags, count, sorting_list
from search.models import Keywords

def front_page(request):

    if request.method == 'get' :
        str1 = request.getvalue['word'] 
        fo = open("xml.txt","r")
        for i in range(count.__len__()):

            file = fo.readline()
            file = file.rstrip('\n')
            find_root_tags(file,str1,i)    

            list.append((file,count[i]))

            sorting_list(list)

        for name, count in list:
            s = Keywords(file_name=name,frequency_count=count)
            s.save()

        fo.close()
        return HttpResponseRedirect('/results/')

    else :  
        str1 = ''
        list = []
        template = loader.get_template('search/front_page.html')
        c = RequestContext(request)
        response = template.render(c)
        return HttpResponse(response)

def results(request):

    list1 = Keywords.objects.all()
    t = loader.get_template('search/results.html')
    c = Context({'list1':list1,
    })

    return HttpResponse(t.render(c)) 
```

@this 适合所有人。

流程是这样的：

1）我在服务器上运行我的应用程序。

2）由于视图“def front_page（request）”的else部分，它向我显示了搜索页面，现在我想执行视图“def front_page（request）”的if部分，因为我想执行我的python代码写在那里并重定向到视图“def results（request）”，我该怎么做？

3) 我应该在 front_page.html 和 urls.py 的“操作”中提到什么，以便我可以再次回到相同的视图。因为我无法回到我想要的相同视图，它重复地向我显示相同的搜索页面。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:52:22.260

要扩大@Barnaby 发布的答案......通过使用 action='#' 您的表单将发布到与表单获取请求中使用的 url 相同的 url。然后在您的视图代码中，您有逻辑说明 - 如果对此 url 的请求是 GET 请求，则执行配置表单的工作，否则，您假设它是 POST，然后您可以处理响应。

另外，我建议您的视图明确检查请求是否为 POST，如果不假设它是 GET，而不是相反（如您所愿），这更安全，因为 GET 和 POST 是不是唯一的请求类型，如果您想处理 POST 请求中提交的变量，您肯定需要知道您正在处理 POST 请求。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:44:10.117

简短的回答：`action="#"`。这是一个返回到当前 URL 的 HTML 技巧。

如何在模板中引用视图的一般答案是使用[url](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std%3atemplatetag-url)标记。您可能还想考虑使用 Django 的[表单](https://docs.djangoproject.com/en/dev/topics/forms/)功能。

# objective-c - UITableView 因 reloadRowsAtIndexPaths 而崩溃

> ID：11328304
> 
> 赞同：0
> 
> 时间：2012-07-04T11:34:07.870
> 
> 标签：objective-c, ios, uitableview

我有一个 iPad iOS 应用程序，其中一个表格视图显示在视图的左侧，一个数据输入表单显示在右侧。右侧的数据输入表单由另一个 tableview 组成，其中 UITextFields 在单元格内。

当更改特定文本字段时，我需要更改左侧表格中的相应行。我正在使用通知进行管理。大多数情况下一切正常，但有时当我尝试更新左侧表格中的特定行时应用程序崩溃。

左侧表格视图由与右侧表格不同的视图控制器管理。

右侧表格文本字段在其视图控制器中具有以下方法：

```
-(void)textFieldDidChange:(id)sender
{
    switch (((UIView*)sender).tag) {
        case TAG_QE_PAGECAPTIONTEXTFIELD:
            NSLog(@" = = = = = Caption did change %@",((UITextField*)sender).text);
            [getModelForm() updateCurrentPageCaption:((UITextField*)sender).text forLanguage:@"English"];
            [[NSNotificationCenter defaultCenter] postNotificationName: @"pageCaptionWasChanged" object: @"PageEdit"];
            break;

        default:
            break;
    }
} 
```

左侧表格的视图控制器使用以下代码为通知建立一个监听器：

```
[[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(eventPageCaptionWasChanged:)
     name: @"pageCaptionWasChanged"
     object: nil]; 
```

左侧表格的视图控制器具有以下方法：

```
-(void)eventPageCaptionWasChanged:(id)alteredText
{

    UITableView* tableView = (UITableView*)[ self.view viewWithTag:TAG_QE_PAGELIST_TABLEVIEW ];
    int row = (int)getModelForm().currentPageNo;
    NSLog(@"HPSQuestionnaireEditorController got eventPageCaptionWasChanged with %@ for row %i",alteredText,row);
    NSIndexPath* indexPath = [NSIndexPath indexPathForRow:row inSection:0];
    NSArray* array = [NSArray arrayWithObject:indexPath];
    int modelPageCount = getModelForm().pages.count;
    NSLog(@"eventPageCaptionWasChanged modelPageCount=%i",modelPageCount);
    [tableView reloadRowsAtIndexPaths:array withRowAnimation:UITableViewRowAnimationFade];

} 
```

该应用程序断断续续地在线崩溃`[tableView reloadRowsAtIndexPaths`。例外情况是： *** -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1037 中的断言失败

任何人都可以帮忙吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:38:30.470

似乎页码从 1 开始，但表索引从零开始，因此当您查找编号为 2 的行时，该表实际上是在搜索第 3 项，即 0、1、2，因此正在输出边界异常。

修复它的最简单方法是更改​​此行。

```
int row = (int)getModelForm().currentPageNo; 
```

对此

```
int row = (int)getModelForm().currentPageNo -1; 
```

# java - Spring远程连接到Jboss主题

> ID：11328307
> 
> 赞同：0
> 
> 时间：2012-07-04T11:34:13.553
> 
> 标签：java, spring, jboss, jms, spring-integration

我正在一个独立的环境中研究 Spring3.1。

我正在尝试从 jboss4 机器远程使用消息（将 Jboss 消息传递 1.4 作为 jms 提供程序）

在网上搜索后，我有点迷路了。

到目前为止我所做的是用这个配置我的applicationContext：

```
<bean id="tgwTopic" class="org.springframework.jndi.JndiObjectFactoryBean"
    depends-on="jmsServerManagerImpl">
    <property name="jndiName" value="/topic/feedTopicRealTime" />
    <property name="jndiEnvironment">

        <props>
            <prop key="java.naming.provider.url">remove.server.url:1099</prop>
            <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory</prop>
            <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces</prop>
            <!-- other key=values here -->
        </props>
    </property>
</bean> 
```

这是我的java bean：

```
 @Service("TGWMDB")
public class TGWMDB implements MessageListener
{
       @Autowired   Topic tgwTopic;

      public void onMessage(Message message)
      {
      }

} 
```

谢谢，雷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:19:46.903

您需要一个消息侦听器容器；这一切都在这里解释...

[http://static.springsource.org/spring-framework/docs/3.1.1.RELEASE/spring-framework-reference/html/jms.html#jms-asynchronousMessageReception](http://static.springsource.org/spring-framework/docs/3.1.1.RELEASE/spring-framework-reference/html/jms.html#jms-asynchronousMessageReception)

# python - Python lambda 不接受元组参数

> ID：11328312
> 
> 赞同：78
> 
> 时间：2012-07-04T11:34:45.710
> 
> 标签：python, lambda, tuples

我在两台 PC 上运行 Eclipse SDK v3.6 和 PyDev v2.6 插件，Linux 和 Windows。

我想传递一个元组作为参数，例如：

```
foo = lambda (x,y): (y,x)
print (foo((1,2))) 
```

这适用于 Linux 并给出正确的结果：

```
> (2,1) 
```

在 Windows 上会出现错误：

```
foo = lambda (x,y): (y,x)
             ^
SyntaxError: invalid syntax 
```

如何解决问题？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-07-04T11:43:32.017

您可能在 Windows 上运行 Python 3.x，在 Linux 上运行 Python 2.x。Python 3 中删除了解包元组参数的功能：请参阅[PEP 3113](http://www.python.org/dev/peps/pep-3113/)。

您可以手动解压缩元组，这适用于 Python 2.x 和 3.x：

```
foo = lambda xy: (xy[1],xy[0]) 
```

或者：

```
def foo(xy):
    x,y = xy
    return (y,x) 
```

# bash - Bash 添加符合条件的行

> ID：11328313
> 
> 赞同：1
> 
> 时间：2012-07-04T11:34:56.427
> 
> 标签：bash, line

我有一个参考文件，其中只有一列，如下所示：

文件 1：
a
b
c
d
e

在第二个 csv 文件中，我有几列。在这些列的第一列中，参考文件中存在一些值：

文件 2：
a;34;42;23;45;1
c;3;2;1;7;8
e;6;2;2;1;3

我想获得的是添加存在于file1中但不在file2中的行，其中某些列的值为常数，最后一列为零，因此具有：

a;34;42;23;45;1
b;cost1;cost2;cost3;cost4;0
c;3;2;1;7;8
d;cost1;cost2;cost3;cost4;0
e;6;2; 2;1;3

有什么帮助吗，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:45:10.723

```
awk 'BEGIN {FS = OFS = ";"} FNR == NR {arr[$1] = $0; next} ! ($1 in arr) {print $1, "cost1;cost2;cost3;cost4;0"} END {for (i in arr) {print arr[i]}}' file2 file1 
```

输出将按未定义的顺序（除了所有新行将首先打印）。如果您使用 GNU AWK ( `gawk`) 并且需要对行进行排序，则可以将新行保存在数组中，而不是立即打印它们并使用该`asort()`函数。否则，您可以使用外部`sort`实用程序。

分成多行：

```
awk '
    BEGIN {
        FS = OFS = ";"
    } 
    FNR == NR {
        arr[$1] = $0; 
        next
    } 
    ! ($1 in arr) {
        print $1, "cost1;cost2;cost3;cost4;0"
    } 
    END {
        for (i in arr) {
            print arr[i]
        }
    }' file2 file1 
```

**编辑：**

要在 file2 中容纳具有相同字段 1 的多行，请更改此行：

```
 arr[$1] = $0; 
```

至

```
 arr[$1] 
```

并在其后立即添加此行：

```
 lines[$0] 
```

然后更改这些行：

```
 for (i in arr) {
            print arr[i] 
```

至

```
 for (i in lines) {
            print i 
```

**编辑2：**

要使用不同的值打印添加的行 10 次，请更改此部分：

```
 ! ($1 in arr) {
        print $1, "cost1;cost2;cost3;cost4;0"
    } 
```

至

```
 ! ($1 in arr) {
        for (i = 1; i <= 10; i++) {
            print $1, "cost1", i, "cost3;cost4;0"
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:44:22.797

```
( cat file2  ; comm -23 file1 <(cut -d';' -f1 file2) \
| sed 's/$/;cost1;cost2;cost3;cost4;0/' ) | sort 
```

将其放入脚本中，复制以下文本：

```
( cat file2  ; comm -23 file1 <(cut -d';' -f1 file2) | sed 's/$/;cost1;cost2;cost3;cost4;0/' ) | sort 
```

甚至更多用于人类版本：

```
( 
    cat file2
    comm -23 file1 <(cut -d';' -f1 file2) | sed 's/$/;cost1;cost2;cost3;cost4;0/' 
) | sort 
```

# linux - 在 Linux 中的特定块上打开文件

> ID：11328315
> 
> 赞同：4
> 
> 时间：2012-07-04T11:35:06.647
> 
> 标签：linux, filesystems, ext4

出于调试目的，我想在特定的预定义块上打开一个文件。例如，如果我怀疑某个特定块已损坏，我想对其进行写入和读取，我宁愿在挂载分区时在用户模式下执行此操作。

有没有办法告诉 Linux，“嘿！如果它是免费的，请在块 4579 上打开这个新文件”。

是的，我可以直接编辑块设备，但如果驱动器已安装，这可能会破坏文件系统。

欢迎通用答案，但即使是对 ext 文件系统系列的答案也足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:52:51.460

> 例如，如果我怀疑某个特定块已损坏，我想对其进行写入和读取……有没有办法告诉 Linux，“嘿！如果它是空闲的，请打开块 4579 上的这个新文件”。

是的，您可以将底层块设备用作文件并查找文件上的该位置。考虑到您的“调试”用例，这似乎是合适的。请注意，写入此块可能会破坏上述文件系统的完整性（甚至写回刚刚读取的内容）。

否则，不，文件系统~~被设计为隐藏~~经常掩盖设备布局下的~~真实几何图形~~，因此没有这样的机制来提示应该在哪里创建文件。

# jquery - CakePHP 在输入期间提交搜索字段抛出 Ajax

> ID：11328319
> 
> 赞同：1
> 
> 时间：2012-07-04T11:35:17.823
> 
> 标签：jquery, ajax, cakephp, autocomplete, form-submit

在我的 CakePHP 应用程序中，我设置了一个搜索字段并正常工作：

```
/* title search */

if (!empty($this->data)) {
$title = $this->data['Post']['title'];
$conditions = array(
    'conditions' => array(
    'and' => array(
        'Post.title LIKE' => "%$title%",
        'Post.status_id =' => '1'
    )
    )
);
$this->set('posts', $this->Post->find('all', $conditions));
} 
```

我想要实现的是添加 jQuery/Ajax 以在文本输入期间自动提交表单并“即时”加载搜索结果。无论是在每个其他角色上，还是在时间间隔上......

我找到的关于这个主题的大多数（如果不是全部）信息都是针对 Cake 1.x 的，在这里不起作用。我正在寻找的功能应该与 Cakes 文档的自动完成搜索字段非常相似。

谁能指出我正确的方向？（我对这一切都很陌生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:19:58.253

好吧，首先，它有两个部分：-服务器端（在您的控制器和/或模型中）-客户端（在您的视图/ js 库中）

在控制器中，您需要创建一个类似于您发布的功能。让它接受想要的标题作为参数。最好将结果作为 json 返回。

在视图中，您需要表单（显然）和一些 javascript 来使用 ajax 调用来提交查询和处理结果的函数。开箱即用的是 jQuery UI 自动完成功能 [http://www.devbridge.com /项目/自动完成/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)

# ruby-on-rails - 嵌套表单，“无法批量分配受保护的属性”

> ID：11328320
> 
> 赞同：3
> 
> 时间：2012-07-04T11:35:26.543
> 
> 标签：ruby-on-rails, forms, nested-forms, mass-assignment

这是我的嵌套表单的相关部分：

```
<div class="field">
<%= f.fields_for "@partcode" do |p|%> 

  <%= p.label "partcode"%><br />
  <%= p.text_field :partcode %>

<% end %>
</div> 
```

我的模型中已经有了这个：

```
attr_accessible :partcode,
                :description 
```

但是，当我在表单中输入内容时，出现此错误：

```
Can't mass-assign protected attributes: @partcode 
```

这是我的零件代码模型：

```
class Partcode < ActiveRecord::Base
 attr_accessible :partcode,
              :description

  validates       :partcode,
              :description,
              :presence => true

 belongs_to "goods_ins"

 accepts_nested_attributes_for "goods_ins"

end 
```

这是我的商品模型中的所有代码：

```
class GoodsIn < ActiveRecord::Base
  attr_accessible :c4lpono, 
              :courier, 
              :deliverydate,  
              :deliverynoteno,  
              :description,  
              :destination,  
              :notes,  
              :partcode,  
              :quantity,  
              :signedby,  
              :suppliername

  validates       :deliverydate,  
              :deliverynoteno,  

              :destination,

              :quantity,  
              :signedby,  
              :suppliername,
              :presence => true

 has_many :suppliers

 has_many :partcodes

 accepts_nested_attributes_for :partcodes
end 
```

这也是`new`我的零件代码控制器的一部分：

```
def new
@partcode = Partcode.new

respond_to do |format|
  format.html # new.html.erb
  format.json { render :json => @partcode }
end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T12:00:39.873

你不应该有：partcode_attributes to attr_accessible（在 GoodsIn 模型中），像这样：

```
attr_accessible :partcode_attributes 
```

假设您的模型关联是这样配置的。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:00:40.137

您的模型必须具有，`accepts_nested_attributes_for :partcode`否则它不会接受它的属性。

班级也`Partcode`必须将他的属性列入白名单。

**更新：**

`@partcode`里面一定有新的`Partcode`。确保您设置`@partcode = @goods_in.partcodes.build`或简单的`@partcode = Partcode.new`.

表单上的字段应该是这样`<%= f.fields_for @partcode do |p| %>`的，也没有引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:53:19.727

我想看看你的模型。但 attr_accessible 不是一个实例。我觉得应该这么说

```
<%= f.fields_for "partcode" do |p|%>` 
```

比在您的控制器中：

```
@partcode = Partcode.new(params["partcode"]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T11:57:41.447

查看您的回答中的评论，我相信您可以使用`build`为`has_one`relanshionships 制作的方法：

```
@partcode = GoodsIn.build_partcode 
```

所以你的表格可以是这样的：

```
<%= f.fields_for @partcode do |p|%> 
```

# python - python 2.7上pyusb的替代品

> ID：11328322
> 
> 赞同：0
> 
> 时间：2012-07-04T11:35:35.280
> 
> 标签：python, pyusb

所以，我想在 python 中与 USB 设备通信，但 pyusb 不会安装（不兼容？）与 python 2.7 和 windows7。在当前项目中，无法将 python 更新到更新的 2.X 版本。Pyusb 不能是与 USB 设备通信的唯一选择......任何解决方案/提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:46:39.363

正如您在评论中指出的那样，您遇到的问题并非归因于与 Python 和 PyUSB 的不兼容，而是 Python 路径不会自动添加到 Windows 环境设置中的 PATH 变量的事实。

1.  右键单击我的电脑
2.  特性
3.  高级系统设置
4.  环境变量
5.  从系统变量框中选择路径，然后单击编辑
6.  将您的 Python 路径添加到行尾，如果需要，在其前面加上分号（例如，;C:\Python27）
7.  好的，所有的窗户
8.  重新启动命令窗口，然后安装包。

# android - ListView 适配器和焦点状态

> ID：11328327
> 
> 赞同：2
> 
> 时间：2012-07-04T11:35:53.227
> 
> 标签：android, background, focus

我有一些列表视图。这是项目视图的代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent" android:background="@drawable/list_drawable_settings"
              android:layout_height="fill_parent" android:gravity="center_vertical" android:orientation="vertical">
    <LinearLayout
            android:id="@+id/section"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            >
        <com.vk.messenger.views.TextViewMyriadPro android:id="@+id/word"
                  android:layout_height="wrap_content"
                  android:layout_width="wrap_content"/>
     </LinearLayout>
    <RelativeLayout android:layout_width="fill_parent"
                   android:layout_height="wrap_content" android:gravity="center_vertical">
        <LinearLayout android:layout_height="wrap_content" android:layout_centerVertical="true" android:gravity="center_vertical" android:layout_width="fill_parent">
        <com.vk.messenger.views.RoundedConersImageView android:id="@+id/userpic"
                   android:layout_marginLeft="9dip" android:layout_marginRight="9dip"
                   android:layout_marginTop="6dip" android:layout_marginBottom="6dip"
                   android:layout_height="40dip"
                   android:layout_width="40dip"/>
        <com.vk.messenger.views.TextViewMyriadPro android:id="@+id/name"
                  android:layout_toRightOf="@id/userpic"
                  android:textColor="@color/friends_text_color"
                  android:textSize="15dip"
                  android:textStyle="bold"
                  android:layout_height="wrap_content"
                  android:layout_width="wrap_content"/>
        </LinearLayout>
        <ImageView android:id="@+id/online"
                   android:visibility="invisible"
                   android:layout_marginRight="9dip"
                   android:layout_centerVertical="true"
                   android:src="@drawable/online_list"
                   android:layout_height="wrap_content"
                   android:layout_width="wrap_content"
                   android:layout_alignParentRight="true"/>
    </RelativeLayout>
</LinearLayout> 
```

当 listview 的元素聚焦时，主层的背景会发生变化。如何在主元素集中时更改 textview 元素的文本颜色？

PS对不起我的英语不好（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T05:38:27.837

这对于[有状态的颜色](http://developer.android.com/guide/topics/resources/color-list-resource.html)非常简单：

创建“颜色列表”文件。例如`res/color/font_color_selector.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="@android:color/holo_red_light" />
    <item android:state_selected="true"
          android:color="@android:color/holo_blue_light" />
    <item
        android:color="@android:color/white" />
</selector> 
```

然后在您的布局中：`<TextView android:textColor="@color/font_color_selector" ... />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:36:42.927

我这样做的想法是创建一个自定义数组适配器，其中包含一个表示 textview 元素颜色的整数变量。在`getView`自定义适配器的方法中，您将设置 textViews 的颜色。像这样的东西：

```
public class CustomAdapter extends
    BaseAdapter {

private String[] data; //Your data
private Context context;
    private int textViewColor = Color.BLACK; //The color of your textViews with a default value

public CustomAdapter(Context _context, String[] _data) {
    context = _context;
    data = _data;
}

    public void setColor(int _color) {
        textViewColor = color;
    }

    //Use a viewholder if you havent already for more efficient listView.
    static class ViewHolder {
    protected TextView textView;
}

@Override
public View getView(int position, View inView, ViewGroup parent) {

    View v = inView;
    ViewHolder viewHolder;

    if (v == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.your_list_view_item_layout, null);
        viewHolder = new ViewHolder();
        viewHolder.textView = (TextView) v.findViewById(R.id.your_textViewId);
        v.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) v.getTag();
    }

          viewHolder.textview.setTextColor(textViewColor); //Set the color of your textViews
          //Do anything else you are supposed to...
   }

  ....
} 
```

然后`OnFocusChangeListener`在您的 listView 上设置一个。在那里，设置你的 textViews 的新颜色。像这样的东西：

```
listView.setOnFocusChangeListener(new OnFocusChangeListener() {

                @Override
                public void onFocusChange(View v, boolean hasFocus) {
                    CustomAdapter adapter = (CustomAdapter) listView.getAdapter();
                    adapter.setColor(Color.White); //set the new color of your textViews components
                    adapter.notifyDataSetChanged(); //Call this to update the listview

                }
            }); 
```

如果您只想更改 listView 中所选项目的 textView 的颜色，则需要`getView()`在适配器中的方法上将 onFocusChangedListener 添加到 listViewItem 中。像这样的东西：

```
@Override
public View getView(int position, View inView, ViewGroup parent) {

    View v = inView;
    ViewHolder viewHolder;

    if (v == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.your_list_view_item_layout, null);
        viewHolder = new ViewHolder();
        viewHolder.textView = (TextView) v.findViewById(R.id.your_textViewId);
        v.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) v.getTag();
    }

          //set the onFocusChangedListener in the View item of the listView
          v.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                TextView textView = (TextView) v.findViewbyId(R.id.your_textViewId);
                if(hasFocus) {
                      textview.setTextColor(Color.BLUE);
                }
                else {
                      textview.setTextColor(Color.BLACK);
                }

            }
        });

          //Do anything else you are supposed to...
   } 
```

# javascript - 如何创建 Ajax 级联/链式/依赖下拉列表或选择框？

> ID：11328331
> 
> 赞同：0
> 
> 时间：2012-07-04T11:36:13.217
> 
> 标签：javascript, jquery, ajax

我对 JavaScript 非常陌生，我有一些基本的了解，但我的技能有限。

我需要创建一个 4 层下拉列表，每一层都取决于上一个条目。

它将是汽车制造商>>>汽车型号>>>>发动机尺寸>>>变体

当所有数据一起加载时，我发现了一个 jquery 教程，但是最终这些字段总共将有超过 1000 种不同的汽车变体，因此这会影响每个页面的加载时间。

在网上搜索解决方案时，我阅读了 AJAX，这听起来是解决我的问题的理想方法，但我发现的大多数 AJAX 教程和下拉列表都与 ASP.NET 数据库有关。我不需要将它链接到数据库我只需要依赖选择框功能

我想要的一个例子是[Superchips Website](http://superchips.co.uk/)左侧的工具，标题为“我的车辆将如何改进？” 我希望重新创建类似的东西。

人们可能获得的任何帮助或教程将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:10:29.987

如果您无权访问数据库服务器，也可以使用 JSON 文件。 [http://www.secretgeek.net/json_3mins.asp](http://www.secretgeek.net/json_3mins.asp)

我建议您使用 jQuery 来满足该要求。如果您使用 JSON 文件，则可以使用[$.ajax](http://api.jquery.com/jQuery.ajax/)函数或[$.getJSON函数。](http://api.jquery.com/jQuery.getJSON/)

这是我几周前编写的一个示例：

```
var strHtmlOutput = "";

$.getJSON('cities.json', function(data) {

        // Loop over all records in the json file
        $.each(data.cities, function() {        
            var strName = $(this).attr("name");
            var strCityId = $(this).attr("id");
            var strProvinceId = $(this).attr("provinceid");

                                strHtmlOutput += "<option value='" + strCityId + "'>";
            strHtmlOutput += strName;
            strHtmlOutput += "</option>";

        });     
    });

// Appending new records in the City dropdown list
$("#strCityId").append((strHtmlOutput); 
```

JSON文件内容：

```
{
    "cities": [
    {
        "id": "1",
        "provinceid": "1",
        "name": "Montreal"
    },

    {
        "id": "2",
        "provinceid": "1",
        "name": "Quebec"
    },

    {
        "id": "3",
        "provinceid": "2",
        "name": "Ottawa"
    },

    {
        "id": "4",
        "provinceid": "2",
        "name": "Mississauga"
    },

    {
        "id": "5",
        "provinceid": "3",
        "name": "Vancouver"
    },

    {
        "id": "6",
        "provinceid": "3",
        "name": "Victoria"
    }

    ]
} 
```

希望这可以帮助！

# python - Python 错误 - 或我的愚蠢 - 扫描字符串文字时 EOL

> ID：11328335
> 
> 赞同：6
> 
> 时间：2012-07-04T11:36:27.020
> 
> 标签：python, string, syntax-error, eol

我看不到以下两行之间的显着差异。

然而，第一个解析，而后者则没有。

```
In [5]: n=""" \\"Axis of Awesome\\" """

In [6]: n="""\\"Axis of Awesome\\""""
  File "<ipython-input-6-d691e511a27b>", line 1
    n="""\\"Axis of Awesome\\""""
                                ^
SyntaxError: EOL while scanning string literal 
```

这是一个 Python 错误/功能/奇怪，还是我错过了一些基本的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T11:39:56.073

最后四个引号

```
"""\\"Axis of Awesome\\"""" 
```

被解析为`"""`，即字符串的结尾，后跟`"`，即新字符串文字的开始。但是，这个新的文字永远不会完成。简单的例子：

```
>>> """foo""""bar"
'foobar'
>>> """foo""" "bar"
'foobar' 
```

如果您想避免此问题，请替换`"""`为`r'`或转义`"`：

```
>>> """\\"Axis of Awesome\\\""""
'\\"Axis of Awesome\\"'
>>> r'\"Axis of Awesome\"'
'\\"Axis of Awesome\\"' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:38:41.270

您的最后 4 个引号被评估为，`"" & ""`而不是您期望它被评估为`" & """`.

# scala - 不带括号的可选名称调用参数

> ID：11328341
> 
> 赞同：4
> 
> 时间：2012-07-04T11:36:48.883
> 
> 标签：scala

我想要一个带有 2 个按名称调用参数的方法，其中一个是可选的，但仍然在不带括号的情况下调用它。因此，您可以执行以下任一操作：

```
transaction { ... } 
```

或者

```
transaction { ... } { ... } 
```

我尝试（并解决了）：

```
def transaction(body: => Unit) { transaction(body, {}) }
def transaction(body: => Unit, err: => Unit) { ... } // Works by transaction({ ... },{ ... }) 
```

这显然不同于（出于我不知道的原因）：

```
def transaction(body: => Unit, err: => Unit = {}) { ... } 
```

而我希望的那个会起作用（但我猜不是因为第一个参数列表是相同的）。

```
def transaction(body: => Unit) { transaction(body)() }
def transaction(body: => Unit)(err: => Unit) { ... } 
```

您将如何使用可选的第二个按名称调用参数的概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:32:55.167

它与默认参数的工作方式有关。注意：

```
scala> def f(x:Int = 5) = println(x)
f: (x: Int)Unit

scala> f
<console>:9: error: missing arguments for method f in object $iw;
follow this method with `_' if you want to treat it as a partially applied function
              f
              ^

scala> f()
5 
```

具有默认参数的方法总是需要调用 ()。

因此，要使用两个参数列表和一个默认参数工作，我们需要：

```
scala> def transaction(body: => Unit)(err: => Unit = { println("defult err")}) { body; err; }
transaction: (body: => Unit)(err: => Unit)Unit

scala> transaction { println("body") } 
<console>:9: error: missing arguments for method transaction in object $iw;
follow this method with `_' if you want to treat it as a partially applied function
              transaction { println("body") } 

scala> transaction { println("body") } ()
body
defult err 
```

# php - 计算多列mysql中的值

> ID：11328343
> 
> 赞同：4
> 
> 时间：2012-07-04T11:37:01.737
> 
> 标签：php, mysql

我有一个数据库表，其中包含用户提交的 3 个问题的答案。所有问题的答案都是是/否答案。像这样

```
username        question1          question2         question3

user1           yes                no                yes
user2           yes                yes               yes
user3           yes                no                no
user4           no                 no                no 
```

我想要做的是收集每列中每个“是”的计数。所以我会为每个问题获得肯定的数量，即'question1' ='3'，question2 ='1'等。

目前，每个问题我都有 3 个单独的陈述，效果很好，但我只是想知道是否有办法将这些陈述组合成一个陈述以使其更有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T11:39:40.923

这可以通过围绕语句的简单聚合`SUM()`（没有）来完成。如果值为，则返回 1，否则返回 0。然后通过 将这些 1 添加到列上。`GROUP BY``CASE``yes``SUM()`

```
SELECT 
  SUM(CASE WHEN question1 = 'yes' THEN 1 ELSE 0 END) AS q1,
  SUM(CASE WHEN question2 = 'yes' THEN 1 ELSE 0 END) AS q2,
  SUM(CASE WHEN question3 = 'yes' THEN 1 ELSE 0 END) AS q3
FROM yourtable 
```

MySQL 还允许返回 1 或 0 的简单布尔比较，但这不能移植到其他 RDBMS。

```
/* Shorter version, only works for MySQL */
SELECT 
  SUM(question1 = 'yes') AS q1,
  SUM(question2 = 'yes') AS q2,
  SUM(question3 = 'yes') AS q3
FROM yourtable 
```

# c++ - 无法从我的二进制文件访问远程服务器中的数据库

> ID：11328344
> 
> 赞同：0
> 
> 时间：2012-07-04T11:37:08.407
> 
> 标签：c++

如果我的二进制文件是从命令行启动的（在 Windows 7 中），它能够访问远程服务器的数据库，但是如果相同的二进制文件是由另一个二进制文件启动的，而另一个二进制文件是我制作的服务，则它无法访问该文件数据库。

我的服务作为本地系统运行。当我尝试将命令行更改为 SYSTEM 用户时，我的二进制文件也能够访问远程服务器的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:10:28.703

您的进程很可能会失败，因为它是从不同的用户上下文启动的。一个进程继承其父进程（启动它的那个）的用户上下文。这就是为什么它从命令行启动时成功，但从您的服务启动时失败的原因。您的服务可能在与 cmd.exe 不同（且更有限）的用户帐户下运行。

# playframework - play!framework 应用程序不断耗尽线程

> ID：11328345
> 
> 赞同：1
> 
> 时间：2012-07-04T11:37:10.770
> 
> 标签：playframework

我有一个 play!framework 网站，它时不时地停止响应

当我运行“播放状态”时，我得到以下打印

```
Requests execution pool:
~~~~~~~~~~~~~~~~~~~~~~~~
Pool size: 10
Active count: 10
Scheduled task count: 1195
Queue size: 111 
```

好像我的线程用完了。线程状态显示一些线程处于阻塞状态

```
Thread[play-thread-4,5,main] BLOCKED 
```

但我不知道他们做了什么或为什么他们被阻止。

我有可用的线程转储，但它们似乎没有提供太多信息。

我该如何从这里开始？

# android - 如何在 Android 应用程序中加快数据库 (SQLite) 中的大数据插入

> ID：11328350
> 
> 赞同：1
> 
> 时间：2012-07-04T11:37:23.923
> 
> 标签：android, performance, sqlite, arraylist

我有一种情况，我必须在数据库中插入数据，并且数据非常大，位于`ArrayList`. 数据被插入到这样的循环中：

```
for( ..... )
ContentValues cv = new ContentValues();

// cv.put statements

sqLiteDB.insert ...... 
```

现在测试用例大约需要1分钟多，真实数据预计超过10分钟，而目标是保持在30秒以下。不能减少数据。我的问题是：

1.  如何提高速度
2.  有没有办法避免重复调用 sqLiteDB.insert 函数并在一批中插入所有行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:50:04.183

在您的情况下，可能的速度改进之一是拥有这样的代码：

```
ContentValues cv = new ContentValues();
for(....) {
    //cv put
    sqLiteDB.insert
    cv.clear();
} 
```

此外，[这里](http://www.outofwhatbox.com/blog/2010/12/android-using-databaseutils-inserthelper-for-faster-insertions-into-sqlite-database/)有一篇博客文章如何提高插入速度。

**编辑** 我也检查了所以[这里](https://stackoverflow.com/questions/3501516/android-sqlite-database-slow-insertion)是一个类似的问题。据称使用事务可以提高速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:47:11.753

我没有为 sqlite 尝试过这个，但在 mssql 中做了类似的事情。大多数情况下，打开/关闭事务比插入花费更多时间。所以你可以在一笔交易中完成所有事情。值得一试。

```
db.beginTransaction();
try {
    SQLiteStatement insert = null;
    insert = db.compileStatement("INSERT OR REPLACE INTO \"MyTable\" ("
            + "\"MyColumnName\") VALUES (?)");

    for (i = 0; i++; i < 10000)
    {
        insert.bindLong(1, i);
        insert.execute();
        insert.clearBindings();
    }

    db.setTransactionSuccessful();
}
catch (Exception e) {
    String errMsg = (e.getMessage() == null) ? "bulkInsert failed" : e.getMessage();
    Log.e("bulkInsert:", errMsg);
}
finally {
    db.endTransaction();
} 
```

# javascript - JS正则表达式：替换字符串中的所有数字

> ID：11328353
> 
> 赞同：44
> 
> 时间：2012-07-04T11:37:29.753
> 
> 标签：javascript, regex

我需要替换所有数字。

我的函数只替换第一个数字。

```
var s = "04.07.2012";
alert(s.replace(new RegExp("[0-9]"), "X")); // returns "X4.07.2012"
                                            // should be XX.XX.XXXX" 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-04T11:40:29.370

您需要将“全局”标志添加到您的正则表达式：

```
s.replace(new RegExp("[0-9]", "g"), "X") 
```

或者，也许更漂亮，使用内置的文字正则表达式语法：

```
.replace(/[0-9]/g, "X") 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-04T11:40:24.703

采用

```
s.replace(/\d/g, "X") 
```

这将替换所有出现。`g`表示*全局匹配*，因此在第一次出现后不会停止匹配。

或者留在你的`RegExp`构造函数：

```
s.replace(new RegExp("\\d", "g"), "X") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-01T19:09:52.010

找到数字，然后用指定的字符串替换。它是通过两种方法实现的

1.  使用正则表达式文字

2.  使用关键字 RegExp 对象

**使用正则表达式文字：**

```
<script type="text/javascript">

var string = "my contact number is 9545554545\. my age is 27.";
alert(string.replace(/\d+/g, "XXX"));

</script> 
```

**输出：**我的联系电话是 XXX。我的年龄是 XXX。

**更多细节：**

[http://www.infinetsoft.com/Post/How-to-replace-number-with-string-in-JavaScript/1156](http://www.infinetsoft.com/Post/How-to-replace-number-with-string-in-JavaScript/1156)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-04T11:47:39.127

**修饰符用于执行全局匹配（查找所有匹配项而不是在第一个匹配项之后停止**）*`/g`*

 ***您可以使用* `\d` *数字，因为它比* `[0-9]`*.*

***JavaScript：***

```
var s = "04.07.2012"; 
echo(s.replace(/\d/g, "X")); 
```

***输出：***

```
XX.XX.XXXX 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-24T05:47:02.363

您忘记添加全局运算符。用这个：

```
var s = "04.07.2012";
alert(s.replace(new RegExp("[0-9]","g"), "X")); 
```**

# mongodb - 在 MongoDB 中维护一组级联的 Max/Min 统计数据的最佳方法

> ID：11328356
> 
> 赞同：0
> 
> 时间：2012-07-04T11:37:39.553
> 
> 标签：mongodb

我们有一个系统，我们希望在其中维护大量记录信息的统计信息，这些信息拆分到单独的通道中，每个通道都有一个概览文档，以级联方式维护统计信息，包括小时、天、月和年的最大值和最小值。

我们可以维护一个文档来保存一个月的频道统计信息，其中将有一个每月最大/最小、31 个每日最大/分钟和 24 小时最大分钟的每一天。

使用 $inc 进行计数的文档非常适合就地原子更新，更新修饰符上的 $max 和 $min 可以解决我们的问题，但遗憾的是不可用。

我们可以将最大值和最小值保留在任务处理器中并发出 $set ，但这在协调系统中所有任务处理器（可能在不同的机器上）时存在问题，因此我们决定将 mongo 作为主要参考。同样的统计数据可能会被两个在不同任务处理器实例上同时运行的单独任务更新。

所以我们正在寻找关于最佳解决方案的评论/建议（我们不一定会保留原始数据，因此不能选择后处理）

1.  每次我们需要更新时阅读、更新和保存？

2.  使用 db Eval 执行 JavaScript 服务器端，通过传入单个值来更新 max/man 级联？

3.  还有其他方法吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:43:58.440

我认为您正在寻找乐观锁定。您可以通过在文档中存储版本字段来确保更新是原子的。考虑以下示例：

```
{_id: xyz, version: 2, max: 10} 
```

首先找到文档：

```
db.example.find({_id:xyz}) 
```

存储版本号并确定（客户端）是否需要更新最大值。如果是这样的话，

```
db.example.update({id:xyz, version: 2}, {$set: {max: 12}, $inc: {version: 1}}) 
```

如果版本在查询和更新发生之间发生更改，则此更新将失败，从而防止与并发相关的数据损坏。您可以使用 getLastError 来确定更新是否失败，然后从第一步重试。

您应该避免使用 db.eval()，因为此操作需要全局锁。

可以在此处找到有关乐观锁定的其他资源： [http](http://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-%22UpdateifCurrent%22) ://www.mongodb.org/display/DOCS/Atomic+Operations#AtomicOperations-%22UpdateifCurrent%22 http://code.google.com/p/morphia/wiki/ Mongo 通讯文章 2010 年 12 月

MongoDB 并发文档：[http ://www.mongodb.org/display/DOCS/How+does+concurrency+work](http://www.mongodb.org/display/DOCS/How+does+concurrency+work)

# binary-tree - 在二叉树中打印具有给定总和的所有路径的算法

> ID：11328358
> 
> 赞同：26
> 
> 时间：2012-07-04T11:37:54.140
> 
> 标签：binary-tree

以下为面试题。

> 给你一棵二叉树（不一定是 BST），其中每个节点都包含一个值。设计一种算法来打印总和为该值的所有路径。请注意，它可以是树中的任何路径 - 它不必从根开始。

尽管我能够找到树中所有从根开始的路径都具有给定的总和，但对于不是从根开始的路径，我无法做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T11:51:12.563

嗯，这是一棵树，而不是图表。因此，您可以执行以下操作：

伪代码：

```
global ResultList

function ProcessNode(CurrentNode, CurrentSum)
    CurrentSum+=CurrentNode->Value
    if (CurrentSum==SumYouAreLookingFor) AddNodeTo ResultList
    for all Children of CurrentNode
          ProcessNode(Child,CurrentSum) 
```

好吧，这为您提供了从根开始的路径。但是，您可以进行微小的更改：

```
 for all Children of CurrentNode
          ProcessNode(Child,CurrentSum)
          ProcessNode(Child,0) 
```

您可能需要考虑一下（我正忙于其他事情），但这基本上应该运行以树中每个节点为根的相同算法

编辑：这实际上只给出了“结束节点”。但是，由于这是一棵树，您可以从这些末端节点开始，然后往回走，直到获得所需的总和。

编辑 2：当然，如果所有值都是正数，那么如果当前总和 >= 所需的总和，则可以中止下降

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-17T15:48:48.873

这是一个`O(n + numResults)`答案（与@Somebody 的答案基本相同，但所有问题都已解决）：

1.  对二叉树进行前序、中序或后序遍历。
2.  在进行遍历时，保持从根节点到当前节点上方节点的节点值的累积和。我们称这个值`cumulativeSumBeforeNode`。
3.  当您访问遍历中的节点时，将其添加到 key 处的哈希表`cumulativeSumBeforeNode`（该 key 处的值将是节点列表）。
4.  计算`cumulativeSumBeforeNode`与目标总和之间的差值。在哈希表中查找这种差异。
5.  如果哈希表查找成功，它应该产生一个节点列表。这些节点中的每一个都代表解决方案的起始节点。当前节点代表每个相应起始节点的结束节点。将每个 [start node, end node] 组合添加到您的答案列表中。如果哈希表查找失败，什么也不做。
6.  当您在遍历中完成访问一个节点时，从存储在`cumulativeSumBeforeNode`哈希表中 key 的列表中删除该节点。

代码：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;

public class BinaryTreePathsWithSum {
    public static void main(String[] args) {
        BinaryTreeNode a = new BinaryTreeNode(5);
        BinaryTreeNode b = new BinaryTreeNode(16);
        BinaryTreeNode c = new BinaryTreeNode(16);
        BinaryTreeNode d = new BinaryTreeNode(4);
        BinaryTreeNode e = new BinaryTreeNode(19);
        BinaryTreeNode f = new BinaryTreeNode(2);
        BinaryTreeNode g = new BinaryTreeNode(15);
        BinaryTreeNode h = new BinaryTreeNode(91);
        BinaryTreeNode i = new BinaryTreeNode(8);

        BinaryTreeNode root = a;
        a.left = b;
        a.right = c;
        b.right = e;
        c.right = d;
        e.left = f;
        f.left = g;
        f.right = h;
        h.right = i;

        /*
                5
              /   \
            16     16
              \     \
              19     4
              /
             2
            / \
           15  91
                \
                 8
        */

        List<BinaryTreePath> pathsWithSum = getBinaryTreePathsWithSum(root, 112); // 19 => 2 => 91

        System.out.println(Arrays.toString(pathsWithSum.toArray()));
    }

    public static List<BinaryTreePath> getBinaryTreePathsWithSum(BinaryTreeNode root, int sum) {
        if (root == null) {
            throw new IllegalArgumentException("Must pass non-null binary tree!");
        }

        List<BinaryTreePath> paths = new ArrayList<BinaryTreePath>();
        Map<Integer, List<BinaryTreeNode>> cumulativeSumMap = new HashMap<Integer, List<BinaryTreeNode>>();

        populateBinaryTreePathsWithSum(root, 0, cumulativeSumMap, sum, paths);

        return paths;
    }

    private static void populateBinaryTreePathsWithSum(BinaryTreeNode node, int cumulativeSumBeforeNode, Map<Integer, List<BinaryTreeNode>> cumulativeSumMap, int targetSum, List<BinaryTreePath> paths) {
        if (node == null) {
            return;
        }

        addToMap(cumulativeSumMap, cumulativeSumBeforeNode, node);

        int cumulativeSumIncludingNode = cumulativeSumBeforeNode + node.value;
        int sumToFind = cumulativeSumIncludingNode - targetSum;

        if (cumulativeSumMap.containsKey(sumToFind)) {
            List<BinaryTreeNode> candidatePathStartNodes = cumulativeSumMap.get(sumToFind);

            for (BinaryTreeNode pathStartNode : candidatePathStartNodes) {
                paths.add(new BinaryTreePath(pathStartNode, node));
            }
        }

        populateBinaryTreePathsWithSum(node.left, cumulativeSumIncludingNode, cumulativeSumMap, targetSum, paths);
        populateBinaryTreePathsWithSum(node.right, cumulativeSumIncludingNode, cumulativeSumMap, targetSum, paths);

        removeFromMap(cumulativeSumMap, cumulativeSumBeforeNode);
    }

    private static void addToMap(Map<Integer, List<BinaryTreeNode>> cumulativeSumMap, int cumulativeSumBeforeNode, BinaryTreeNode node) {
        if (cumulativeSumMap.containsKey(cumulativeSumBeforeNode)) {
            List<BinaryTreeNode> nodes = cumulativeSumMap.get(cumulativeSumBeforeNode);
            nodes.add(node);
        } else {
            List<BinaryTreeNode> nodes = new ArrayList<BinaryTreeNode>();
            nodes.add(node);
            cumulativeSumMap.put(cumulativeSumBeforeNode, nodes);
        }
    }

    private static void removeFromMap(Map<Integer, List<BinaryTreeNode>> cumulativeSumMap, int cumulativeSumBeforeNode) {
        List<BinaryTreeNode> nodes = cumulativeSumMap.get(cumulativeSumBeforeNode);
        nodes.remove(nodes.size() - 1);
    }

    private static class BinaryTreeNode {
        public int value;
        public BinaryTreeNode left;
        public BinaryTreeNode right;

        public BinaryTreeNode(int value) {
            this.value = value;
        }

        public String toString() {
            return this.value + "";
        }

        public int hashCode() {
            return Integer.valueOf(this.value).hashCode();
        }

        public boolean equals(Object other) {
            return this == other;
        }
    }

    private static class BinaryTreePath {
        public BinaryTreeNode start;
        public BinaryTreeNode end;

        public BinaryTreePath(BinaryTreeNode start, BinaryTreeNode end) {
            this.start = start;
            this.end = end;
        }

        public String toString() {
            return this.start + " to " + this.end;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-03T15:56:18.697

根据上面克里斯蒂安的回答：

```
public void printSums(Node n, int sum, int currentSum, String buffer) {
     if (n == null) {
         return;
     }
     int newSum = currentSum + n.val;
     String newBuffer = buffer + " " + n.val;
     if (newSum == sum) {
         System.out.println(newBuffer);
     }
     printSums(n.left, sum, newSum, newBuffer);
     printSums(n.right, sum, newSum, newBuffer);
     printSums(n.left, sum, 0, "");
     printSums(n.right, sum, 0, "");
} 

printSums(root, targetSum, 0, ""); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-16T12:28:39.327

这是一种`nlogn`复杂的方法。

1.  以中序遍历树。
2.  同时维护所有节点以及 a 中的累积和`Hashmap<CumulativeSum, reference to the corresponding node>`。
3.  现在在给定节点计算从根到节点的累积和，直到节点说这是`SUM`。
4.  现在`SUM-K`在`HashMap`.
5.  如果条目存在，则在`HashMap`.
6.  现在我们有了从节点引用到当前节点的有效路径。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-13T19:56:44.653

一个干净的 JAVA 解决方案。使用内部递归调用跟踪遍历的路径。

```
private static void pathSunInternal(TreeNode root, int sum, List<List<Integer>> result, List<Integer> path){
    if(root == null)
        return;     
    path.add(root.val);
    if(sum == root.val && root.left == null && root.right == null){
        result.add(path);
    }

    else if(sum != root.val && root.left == null && root.right == null)
        return;
    else{
        List<Integer> leftPath = new ArrayList<>(path);
        List<Integer> rightPath = new ArrayList<>(path);
        pathSunInternal(root.left, sum - root.val, result, leftPath);
        pathSunInternal(root.right, sum - root.val, result, rightPath);
    }
}

public static List<List<Integer>> pathSum(TreeNode root, int sum) {
    List<List<Integer>> result = new ArrayList<>(); 
    List<Integer> path = new ArrayList<>();
    pathSunInternal(root, sum, result, path);       
    return result;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-04T11:46:54.437

*更新：* 我现在看到我的回答并没有直接回答你的问题。如果它被证明有用，我会把它留在这里，但它不需要投票。如果没有用，我会删除它。我确实同意@nhahtdh，但是，当他建议“将所有其他节点作为根节点重用您的算法”时。

有人怀疑面试官在这里是为了*递归*。不要让他失望！

给定一个节点，您的例程应该针对它的每个子节点*调用自身*（如果有），然后将节点自己的数据添加到返回值，然后返回总和。

为了获得额外的荣誉，请警告面试官，如果用于一般图而不是二叉树，您的例程可能会失败，进入无底、无休止的递归。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-04T15:37:32.887

可以将这棵树简化为加权图 G，其中每个边权重 = 其每个节点中值的总和。

然后，在图 G 上运行 Floyd-Warshall 算法。通过检查结果矩阵中的元素，我们可以获得总和等于所需总和的所有节点对。

另外，请注意，算法给出的最短路径也是这棵树中 2 个节点之间的唯一路径。

这只是另一种方法，不如递归方法有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-17T12:00:22.193

我们可以用树结构动态规划来解决，时间和空间复杂度都是O(n^2)，其中n是所有树节点的个数。

思路如下：

对于树节点，我们保留一个集合，记录从 u 开始到其所有后代的所有可能和。然后递归地，任何节点的集合都可以由它的两个孩子更新，特别是通过合并两个孩子的集合。

伪代码是：

```
bool findPath(Node u, Set uset, int finalSum) {
    Set lset, rset;
    if (findPath(u.left, lset, finalSum) || findPath(u.right, rset, finalSum)) return true;
    for (int s1 : lset) {
        if (finalSum - u.val - s1 == 0 || rset.contains(finalSum - u.val - s1)) return true;
        // first condition means a path from u to some descendant in u's left child
        // second condition means a path from some node in u's left child to some node in u's right child

        uset.insert(s1 + u.val); // update u's set
    }
    for (int s2 : rset) {
        if (finalSum - u.val - s2 == 0) return true;
        // don't forget the path from u to some descendant in u's right child
        uset.insert(s2 + u.val); // update u's set
    }
    return false;
} 
```

我注意到最初的问题是查找所有路径，但上面的算法是查找是否存在。我认为这个想法是相似的，但是这个版本使问题更容易解释:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-22T06:41:13.373

```
public void printPath(N n) {
    printPath(n,n.parent);
}

private void printPath(N n, N endN) {
    if (n == null)
        return;
    if (n.left == null && n.right == null) {
        do {
            System.out.print(n.value);
            System.out.print(" ");
        } while ((n = n.parent)!=endN);
        System.out.println("");
        return;
    }
    printPath(n.left, endN);
    printPath(n.right, endN);
} 
```

您可以打印树路径结束 n 节点。像这样 printPath(n);

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-26T08:45:20.220

```
void printpath(int sum,int arr[],int level,struct node * root)
{
  int tmp=sum,i;
  if(root == NULL)
  return;
  arr[level]=root->data;
  for(i=level;i>=0;i--)
  tmp-=arr[i];
  if(tmp == 0)
  print(arr,level,i+1);
  printpath(sum,arr,level+1,root->left);
  printpath(sum,arr,level+1,root->right);
}
 void print(int arr[],int end,int start)
{  

int i;
for(i=start;i<=end;i++)
printf("%d ",arr[i]);
printf("\n");
} 
```

复杂度(n logn) 空间复杂度(n)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-12-08T09:41:26.617

```
# include<stdio.h>
# include <stdlib.h>
struct Node
{
    int data;
    struct Node *left, *right;
};

struct Node * newNode(int item)
{
    struct Node *temp =  (struct Node *)malloc(sizeof(struct Node));
    temp->data = item;
    temp->left =  NULL;
    temp->right = NULL;
    return temp;
}
void print(int p[], int level, int t){
    int i;
    for(i=t;i<=level;i++){
        printf("\n%d",p[i]);
    }
}
void check_paths_with_given_sum(struct Node * root, int da, int path[100], int level){

     if(root == NULL)
        return ;
    path[level]=root->data;
    int i;int temp=0;
    for(i=level;i>=0;i--){
        temp=temp+path[i];
        if(temp==da){
            print(path,level,i);
        }
    }
        check_paths_with_given_sum(root->left, da, path,level+1);
        check_paths_with_given_sum(root->right, da, path,level+1);

}
int main(){
    int par[100];
 struct Node *root = newNode(10);
    root->left = newNode(2);
    root->right = newNode(4);
    root->left->left = newNode(1);
    root->right->right = newNode(5);
    check_paths_with_given_sum(root, 9, par,0);

} 
```

这工作......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-26T22:54:38.783

[https://codereview.stackexchange.com/questions/74957/find-all-the-paths-of-tree-that-add-to-a-input-value](https://codereview.stackexchange.com/questions/74957/find-all-the-paths-of-tree-that-add-to-a-input-value)

我已经尝试了一个答案，期待代码审查。我的代码和审阅者应该是有用的来源。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-01-12T16:47:12.710

下面是使用递归的解决方案。我们执行二叉树的顺序遍历，当我们向下移动一个级别时，我们通过将当前级别的权重添加到树的先前级别的权重来总结总路径权重，如果我们达到我们的总和，我们然后打印出路。此解决方案将处理沿任何给定路径路径可能有多个解决方案的情况。

假设你有一棵以根为根的二叉树。

```
#include <iostream>
#include <vector>
using namespace std;

class Node
{
private:
    Node* left;
    Node* right;
    int value;

public:
    Node(const int value)
    {
        left=NULL;
        right=NULL;
        this->value=value;
    }

    void setLeft(Node* left)
    {
        this->left=left;
    }

    void setRight(Node* right)
    {
        this->right = right;
    }

    Node* getLeft() const
    {
        return left;
    }

    Node* getRight() const
    {
        return right;
    }

    const int& getValue() const
    {
        return value;
    }
};

//get maximum height of the tree so we know how much space to allocate for our
//path vector

int getMaxHeight(Node* root)
{
    if (root == NULL)
        return 0;

    int leftHeight = getMaxHeight(root->getLeft());
    int rightHeight = getMaxHeight(root->getRight());

    return max(leftHeight, rightHeight) + 1;
}

//found our target sum, output the path
void printPaths(vector<int>& paths, int start, int end)
{
    for(int i = start; i<=end; i++)
        cerr<<paths[i]<< " ";

    cerr<<endl;
}

void generatePaths(Node* root, vector<int>& paths, int depth, const int sum)
{
    //base case, empty tree, no path
    if( root == NULL)
        return;

    paths[depth] = root->getValue();
    int total =0;

    //sum up the weights of the nodes in the path traversed
    //so far, if we hit our target, output the path
    for(int i = depth; i>=0; i--)
    {
        total += paths[i];
        if(total == sum)
            printPaths(paths, i, depth);
    }

    //go down 1 level where we will then sum up from that level
    //back up the tree to see if any sub path hits our target sum
    generatePaths(root->getLeft(), paths, depth+1, sum);
    generatePaths(root->getRight(), paths, depth+1, sum);
}

int main(void)
{
    vector<int> paths (getMaxHeight(&root));
    generatePaths(&root, paths, 0,0);
} 
```

空间复杂度取决于树的高度，假设这是一棵平衡树，那么基于递归堆栈的深度，空间复杂度为 0(log n)。时间复杂度 O(n Log n) - 基于平衡树，其中每个级别有 n 个节点，并且在每个级别将完成 n 工作量（对路径求和）。我们还知道平衡二叉树的树高以 O(log n) 为界，因此平衡二叉树上每个级别完成的工作量为 O(n log n)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-01-30T22:01:42.933

```
// assumption node have integer value other than zero
void printAllPaths(Node root, int sum , ArrayList<Integer> path) {

   if(sum == 0) {
      print(path); // simply print the arraylist
    }

   if(root ==null) {
     //traversed one end of the tree...just return
      return;
  }
    int data = root.data;
    //this node can be at the start, end or in middle of path only if it is       //less than the sum
    if(data<=sum) {
     list.add(data);
     //go left and right
    printAllPaths(root.left, sum-data ,  path);
    printAllPaths(root.right, sum-data ,  path);

    }
   //note it is not else condition to ensure root can start from anywhere
   printAllPaths(root.left, sum ,  path);
   printAllPaths(root.right, sum ,  path);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-29T22:51:17.943

我改进了 Arvind Upadhyay 回答的一些编码逻辑。一旦 if 循环完成，您就不能使用相同的列表。所以需要创建新列表。此外，需要保持逻辑从当前节点下降到搜索路径的级别计数。如果我们没有找到路径，那么在去它的孩子之前，我们需要从递归调用中出来等于 count 次。

```
int count =0;
public void printAllPathWithSum(Node node, int sum, ArrayList<Integer> list)
{   
    if(node == null)
        return;
    if(node.data<=sum)
    {
        list.add(node.data);
        if(node.data == sum)
            print(list);
        else
        {
            count ++;
            printAllPathWithSum(node.left, sum-node.data, list);
            printAllPathWithSum(node.right, sum-node.data, list);
            count --;
        }
    }
    if(count != 0)
        return ;

    printAllPathWithSum(node.left, this.sum, new ArrayList());
    if(count != 0)
        return;
    printAllPathWithSum(node.right, this.sum, new ArrayList());

}
public void print(List list)
{
    System.out.println("Next path");
    for(int i=0; i<list.size(); i++)
        System.out.print(Integer.toString((Integer)list.get(i)) + " ");
    System.out.println();
} 
```

查看完整代码：[https ://github.com/ganeshzilpe/java/blob/master/Tree/BinarySearchTree.java](https://github.com/ganeshzilpe/java/blob/master/Tree/BinarySearchTree.java)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-02-19T10:32:41.040

搜索：

```
Recursively traverse the tree, comparing with the input key, as in binary search tree.

If the key is found, move the target node (where the key was found) to the root position using splaysteps.

Pseudocode:

Algorithm: search (key)
Input: a search-key
1\.   found = false;
2\.   node = recursiveSearch (root, key)
3\.   if found
4\.     Move node to root-position using splaysteps;
5\.     return value
6\.   else
7\.     return null
8\.   endif
Output: value corresponding to key, if found.

Algorithm: recursiveSearch (node, key)
Input: tree node, search-key
1\.   if key = node.key
2\.     found = true
3\.     return node
4\.   endif
     // Otherwise, traverse further 
5\.   if key < node.key
6\.     if node.left is null
7\.       return node
8\.     else
9\.       return recursiveSearch (node.left, key)
10\.    endif
11\.  else
12\.    if node.right is null
13\.      return node
14\.    else
15\.      return recursiveSearch (node.right, key)
16\.    endif
17\.  endif
Output: pointer to node where found; if not found, pointer to node for insertion. 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-03T10:30:02.947

因为我们需要 sum == k 的路径。我假设最坏情况的复杂性可以是 O(total_paths_in_tree) 。

那么为什么不生成每条路径并检查总和，反正它是一棵有负数的树，甚至不是二叉搜索树。

```
 struct node{
      int val;
      node *left,*right;

      node(int vl)
      {
        val = vl;
        left = NULL;
        right = NULL;
      }
   };

   vector<vector<int> > all_paths;
   vector<vector<int> > gen_paths(node* root)
   {
       if(root==NULL)
       {
          return vector<vector<int> > ();
       }

       vector<vector<int> >    left_paths = gen_paths(root->left);
       vector<vector<int> >    right_paths = gen_paths(root->right);

       left_paths.push_back(vector<int> ()); //empty path
       right_paths.push_back(vector<int> ());

       vector<vector<int> > paths_here;
       paths_here.clear();

       for(int i=0;i<left_paths.size();i++)
       {
           for(int j=0;j<right_paths.size();j++)
           {
              vector<int> vec;
              vec.clear();
              vec.insert(vec.end(), left_paths[i].begin(), left_paths[i].end());
             vec.push_back(root->val);
             vec.insert(vec.end(), right_paths[j].begin(), right_paths[j].end());
             paths_here.push_back(vec);
           }
        }

        all_paths.insert(all_paths.end(),paths_here.begin(),paths_here.end());

       vector<vector<int> > paths_to_extend;
       paths_to_extend.clear();

       for(int i=0;i<left_paths.size();i++)
       {
            paths_to_extend.push_back(left_paths[i]);
            paths_to_extend[i].push_back(root->val);
       }

       for(int i=0;i<right_paths.size();i++)
       {
           paths_to_extend.push_back(right_paths[i]);
           paths_to_extend[paths_to_extend.size()-1].push_back(root->val);
       }

       return paths_to_extend;
    } 
```

为了生成路径，我生成了所有左路径和所有右路径，并将 left_paths + node->val + right_paths 添加到每个节点的 all_paths 中。并发送了仍然可以扩展的路径。即来自双方的所有路径+节点。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-05-25T13:32:48.563

这是一个 O(N) 解决方案

```
int fn(root, sum, *count)                                                                               
{                                                                                                   
    if(root == NULL)                                                                                
        return 0;                                                                                                                                                                                       
    int left =  fn(root->left, sum, count);                                                         

    int right = fn(root->left, sum, count);                                                                                                                                                            

    if(left == sum)                                                                                 
        *count++;                                                                                   

    if(right == sum)                                                                                
        *count++;                                                                                   

    if((root->data + left + right) == sum)                                                          
        *count++;                                                                                   

    return (root->data + left + right);                                                             
} 
```

# vector - 为什么`vector`实现有多种情况？

> ID：11328359
> 
> 赞同：14
> 
> 时间：2012-07-04T11:37:54.653
> 
> 标签：vector, clojure, language-implementation

这是clojure的定义[`vector`](https://github.com/clojure/clojure/blob/d0c380d9809fd242bec688c7134e900f0bbedcac/src/clj/clojure/core.clj#L16)：

```
(defn vector
  "Creates a new vector containing the args."
  {:added "1.0"
   :static true}
  ([] [])
  ([a] [a])
  ([a b] [a b])
  ([a b c] [a b c])
  ([a b c d] [a b c d])
  ([a b c d & args]
     (. clojure.lang.LazilyPersistentVector (create (cons a (cons b (cons c (cons d args)))))))) 
```

为什么会有这么多案例？或者，如果有这么多，为什么没有更多？

我的猜测是它在实现效率和概率之间取得了平衡，但我不太明白这会如何更有效。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T12:18:40.200

4似乎在有很多论点和没有很多论点之间取得了效率平衡。

举个例子：

```
(defn vector-few
  ([] [])
  ([ & args ] (. clojure.lang.LazilyPersistentVector (create args))))

(defn vector-many
  ([] [])
  ([a] [a])
  ([a b] [a b])
  ([a b c] [a b c])
  ([a b c d] [a b c d])
  ([a b c d e] [a b c d e])
  ([a b c d e f] [a b c d e f])
  ([a b c d e f & args] (. clojure.lang.LazilyPersistentVector (create (cons a (cons b (cons c (cons d (cons e (cons f args)))))))))) 
```

运行包含 4 个元素的测试：

```
=> (time (dotimes [x 1000000] (vector 1 2 3 4)))
"Elapsed time: 12.082104 msecs"

=> (time (dotimes [x 1000000] (vector-few 1 2 3 4)))
"Elapsed time: 443.056339 msecs"

=> (time (dotimes [x 1000000] (vector-many 1 2 3 4)))
"Elapsed time: 11.812106 msecs" 
```

然后是 5：

```
=> (time (dotimes [x 1000000] (vector 1 2 3 4 5)))
"Elapsed time: 467.904979 msecs"

=> (time (dotimes [x 1000000] (vector-few 1 2 3 4 5)))
"Elapsed time: 537.080198 msecs"

=> (time (dotimes [x 1000000] (vector-many 1 2 3 4 5)))
"Elapsed time: 10.30695 msecs" 
```

并且使用 8（因此所有函数都使用 var-args 案例）：

```
=> (time (dotimes [x 1000000] (vector 1 2 3 4 5 6 7 8)))
"Elapsed time: 832.803266 msecs"

=> (time (dotimes [x 1000000] (vector-few 1 2 3 4 5 6 7 8)))
"Elapsed time: 689.526288 msecs"

=> (time (dotimes [x 1000000] (vector-many 1 2 3 4 5 6 7 8)))
"Elapsed time: 905.95839 msecs" 
```

# session - 用户登录后的用户会话范围以在 mysql 中存储会话范围的数据

> ID：11328360
> 
> 赞同：0
> 
> 时间：2012-07-04T11:37:57.233
> 
> 标签：session, jstl, sessionid

我是使用会话管理的新手，我正在使用带有 MySQL 作为后端的 struts。我正在开发一个简单的时间表应用程序。我的要求是当用户在登录页面成功登录时，他应该能够添加***保存在该用户会话范围内***的工作或完成的任务。同样，他应该只能看到他的时间表数据，就像***从数据库中检索数据的正常会话范围***一样。是否可以在没有 Action 类（Java 源代码）的情况下使用 JSTL 标记进行会话范围的后端交互。请从头到尾告诉一个简单的详细过程来实现这一点。

我很困惑，如何使存储在一个表或数据库中的所有用户数据在用户会话范围内工作。如果不是，应该如何存储数据（为每个用户单独存储？）请解释一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:26:01.580

其实很简单。

使用 Struts，每个请求都发送到 Struts servlet，后者将其分派给 Struts 动作。

Struts 操作从操作表单中获取来自用户的输入数据。它还可以访问会话。有了所有这些信息，它就可以从数据库中获取数据，并将这些数据（作为 Java Bean）存储到请求属性中。

然后该动作返回一个动作转发，并且 Struts servlet 将请求转发到相应的 JSP 页面。该 JSP 页面使用存储在操作请求属性中的数据生成 HTML。

因此，登录后，您应该在会话中拥有经过身份验证的用户的 ID。该操作可以使用此用户 ID 从属于此用户的数据库中获取数据：

```
select foo.id, foo.name, foo.description from FOO foo where foo.user_id = ? 
```

不要试图从 JSP 中的数据库中获取数据。JSP 应该只生成 HTML。从操作类调用的 Java 代码的工作是从会话中获取用户 ID 并使用此用户 ID 从数据库中获取数据。这就是 Struts 提倡的 MVC 模式的全部意义所在。

# jquery - 如何将元素拉到我的光标上？

> ID：11328362
> 
> 赞同：0
> 
> 时间：2012-07-04T11:38:10.407
> 
> 标签：jquery, html, css

有一个蓝色的正方形，上面有一张带数字的船的图片。我想用蓝色方块内的鼠标指针和靠近鼠标光标的船的图片旅行。如何将元素拉到我的光标上，css3中有解决方案吗？许多谢谢。 [演示](http://www.centerwow.com/stackoverflow/Games_ship.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:11:32.887

html:

```
<div id="wrapper">
  <div id="square">[]</div>
</div> 
```

CSS：

```
#wrapper{width:400px; height:500px; background:#eeeeee; cursor:pointer;}
#square{font-size:36px; font-weight:bold; position:absolute;} 
```

js：

```
$(document).ready(function(){
  $('#wrapper').on('mousemove', function(e){
     $('#square').offset({
       top: parseInt(e.pageY - $('#square').height() / 2),
       left: parseInt(e.pageX - $('#square').width() / 2)
     });
  }); 
}); 
```

**[演示](http://jsfiddle.net/qXKZh/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:44:16.643

假设我已经正确理解了您的问题 - 您希望将图片移近用户的鼠标位置，同时它位于蓝色方块内？

这绝对看起来像是你需要 Javascript / JQuery 的东西 - CSS 将无法动态地做到这一点。

我会查看[这个 JQuery 教程](http://docs.jquery.com/Tutorials%3aMouse_Position)以在其中找到用户的鼠标位置，`<div>`然后从那里将您的图像（再次使用 JQuery）移向该位置。

# asp.net-mvc - 无法在 ActionResult 中检索 ViewModel

> ID：11328363
> 
> 赞同：2
> 
> 时间：2012-07-04T11:38:21.023
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我使用 MVC 3，我有一个控制器，代码如下?

```
// GET: /ManageAdvSlots/Delete/5

    public ActionResult Delete(int id)
    {
        AdvSlot advSlot = advSlotRepository.FindById(id);
        AdvSlotDeleteViewModel deleteViewModel = Mapper.Map<AdvSlot, AdvSlotDeleteViewModel>(advSlot);
        return View(deleteViewModel);
    }

    //
    // POST: /ManageAdvSlots/Delete/5

    [HttpPost]
    public ActionResult Delete(AdvSlotDeleteViewModel deleteViewModel)
    {
        if (ModelState.IsValid)
        {
            AdvSlot advSlot = Mapper.Map<AdvSlotDeleteViewModel, AdvSlot>(deleteViewModel);
            advSlotRepository.Delete(advSlot.AdvSlotId);
            advSlotRepository.Save();
        }
        return RedirectToAction("Index");
    }
} 
```

看法

```
@model MyProject.ViewModels.AdvSlotDeleteViewModel

@{
    ViewBag.Title = "Delete";
}

<h2>Delete</h2>

<h3>Are you sure you want to delete this?</h3>
<fieldset>
    <legend>AdvSlotDeleteViewModel</legend>

    <div class="display-label">AdvSlotId</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.AdvSlotId)
    </div>

    <div class="display-label">Name</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Name)
    </div>

    <div class="display-label">Description</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Description)
    </div>

    <div class="display-label">IsPublished</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.IsPublished)
    </div>

    <div class="display-label">Code</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Code)
    </div>

    <div class="display-label">Note</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Note)
    </div>
</fieldset>
@using (Html.BeginForm()) {
    <p>
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to List", "Index")
    </p>
} 
```

查看模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MyProject.ViewModels
{
    public class AdvSlotDeleteViewModel
    {
        public int AdvSlotId { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public bool IsPublished { get; set; }
        public string Code { get; set; }
        public string Note { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T11:43:14.097

您需要将所有表单字段*放在*表单块中。否则它们将不会被发布到服务器。

移动你的`<fieldset>`内心`@using (Html.BeginForm()) { ->> HERE <<- }`

PS。对于删除，您可能只想发布`id`，而不是整个视图模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:52:16.583

人们建议在隐藏的表单字段中仅包含 id 就足够了：

```
@using (Html.BeginForm()) {
@Html.HiddenFor(x => x.AdvSlotId)
<p>
    <input type="submit" value="Delete" /> |
    @Html.ActionLink("Back to List", "Index")
</p>
} 
```

您可能会发现您不想再检查模型是否有效。如果您对某些字段进行了高级验证，如果它们不在表单内，它们将不会被发回。例如，如果需要“名称”，则上述代码的验证将失败，因为只有表单内的字段会回传到服务器。

# nhibernate - nHibernate 使用过滤器从多对多映射属性（就像一对一）？

> ID：11328372
> 
> 赞同：0
> 
> 时间：2012-07-04T11:39:00.667
> 
> 标签：nhibernate, many-to-many, one-to-one

我有一个多对多关系，但我需要将其限制为仅在列中具有特定数据的一行。

这是关系： ![在此处输入图像描述](../Images/169222d1806297905e00d2f88713bb85.png)

我需要在“Product_Type”实体中映射“标签”字段，就好像它在实体中一样。

如何过滤 CultureCode=System.Threading.Thread.CurrentThread.CurrentCulture.Name.Substring(0, 2).ToUpper() 的“Product_Type_Culture”数据，使其仅包含一行并将标签映射到“Product_Type”实体 ？？

我已经在会话 ecc 中制作了过滤器...

这是我“粗鲁”的错误映射。

```
public class Product_TypeMap : ClassMapping<Product_Type>
    {
        public Product_TypeMap()
        {
            Id(x => x.Id, m => m.Column("Id"));

            Bag(x => x.Label, c =>
            {
                Table("Product_Type_Culture");

                c.Key(k =>
                {
                    k.Column("ProductTypeId");
                });

                c.Filter("cultureFilter", f => f.Condition("CultureCode = :cultureId"));
            }, r => r.ManyToMany(m =>
            {
                m.Class(typeof(Product_Type_Culture));
                m.Column("CultureCode");
            }));

        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:56:55.117

AFAIk 无法在 Property() 或 Join() 上设置过滤器

## 选项1

我会摆脱语言表并将文本表作为地图的元素表

```
public class ProductType
{
    public virtual IDictionary<string, string> Labels { get; private set; }

    // used for Binding etc
    public virtual string Name
    {
        get
        {
            string label;
            var currentlanguage = Thread.CurrentThread.CurrentUICulture;     // eg en-US
            if (!map.TryGetValue(currentlanguage.Name, out label) &&        // en-US
                !map.TryGetValue(currentlanguage.Parent.Name, out label))   // en
            {
                label = "fallback name";
            }
            return label;
        }
        set { Names[Thread.CurrentThread.CurrentUICulture.Name] = value; }
    }
} 
```

并使用以下 FNH 映射（转换为 MbC）

```
public ProductTypeMap()
{
    [...]
    HasMany(pt => pt.Labels)
        .Table("Texts")
        .KeyColumn("ProductTypeId")
        .AsMap("CultureCode")
        .Element("Label")
        .Not.LazyLoad()
} 
```

优点：灵活缺点：可能获取的数据比需要的多，无法在标签上查询

## 选项 2

移动标签表中的文化名称并使用在映射中初始化的公式

```
public ProductTypeMapping()
{
    Property(pt => pt.Label, o => o.Formula("CultureCode = " + Thread.CurrentThread.CurrentUICulture.Name));
} 
```

优点：只获取相关数据缺点：不能在运行时改变文化，不能更新标签

## 选项 3

将一个与过滤器结合起来以减少获取的数据

```
public ProductTypeMap()
{
    HasMany(pt => pt.Labels)
        .Table("Texts")
        .KeyColumn("ProductTypeId")
        .AsMap("CultureCode")
        .Element("Label")
        .ApplyFilter("cultureFilter", "CultureCode = :cultureName or CultureCode = :parentCultureName")
        .Not.LazyLoad();
} 
```

# mysql - 查询改进

> ID：11328374
> 
> 赞同：1
> 
> 时间：2012-07-04T11:39:06.080
> 
> 标签：mysql, search

有人可以建议我对以下查询进行改进。

```
$q = "
    SELECT q. *
      FROM questions q, answers a
     WHERE q.questions LIKE '%".$str."%'
        OR a.answers   LIKE '%".$str."%'
       AND q.id = a.id_questions
  GROUP BY q.id
     LIMIT 10" 
```

它用于搜索具有 >100.000 个问题和答案的数据库。

使用较少的记录工作正常，但现在......

即使限制为 10，服务器也消失了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:53:50.003

试试这个：

```
SELECT     q.*
FROM       questions q
INNER JOIN answers a
ON         q.id = a.id_questions
WHERE      q.questions LIKE '%yourstring%'
OR         a.answers LIKE '%yourstring%'
GROUP BY   q.id 
```

# iphone - 由于 _NSURLIsExcludedFromBackupKey 错误，Phonegap 1.9.0 应用程序崩溃

> ID：11328375
> 
> 赞同：8
> 
> 时间：2012-07-04T11:39:17.327
> 
> 标签：iphone, ios, ios5, cordova

我正在尝试使用 iOS 在 Phonegap 1.9.0 中加载 HelloWorld 示例，但我在这样做时遇到了一些问题......我正在关注这个：[http ://docs.phonegap.com/en/1.9.0/guide_getting-started_ios_index .md.html#Getting%20Started%20with%20iOS](http://docs.phonegap.com/en/1.9.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)它说 Apple Mach-O Linker(Id) 错误。

当我点击错误时，它说：

```
Undefined symbols for architecture i386:
  "_NSURLIsExcludedFromBackupKey", referenced from:
      -[CDVFile setMetadata:withDict:] in Cordova
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我写了一个类似的应用程序，它不使用电话间隙并且运行正常...但是当我使用电话间隙时，它给了我这个错误..不知道该怎么做...需要一些指导。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-04T16:27:57.117

在最新的phonegap 版本：1.9.0 中，出现_NSURLIsExcludedFromBackupKey 错误。

要解决此问题，请将其添加到 AppDelegate.m

```
NSString * const NSURLIsExcludedFromBackupKey =@"NSURLIsExcludedFromBackupKey"; 
```

这将有助于解决错误..与架构无关...

PhoneGap 的新手可以观看这些视频：

第 1 部分：[http ://www.youtube.com/watch?v=zXf1zyKQ5Hw&feature=relmfu](http://www.youtube.com/watch?v=zXf1zyKQ5Hw&feature=relmfu)

第 2 部分：[http ://www.youtube.com/watch?v=t95KG_SFPpU](http://www.youtube.com/watch?v=t95KG_SFppU)

# android - Android：获取应用程序的描述

> ID：11328382
> 
> 赞同：3
> 
> 时间：2012-07-04T11:39:39.993
> 
> 标签：android, package

我想让用户安装一个非市场的 android 应用程序。当他单击应用程序图标时，我想向他展示一个描述该应用程序的页面。有没有办法从它的包中获取应用程序的描述？

**编辑：** 我将澄清我的问题：在 AndroidManifest.xml 中，应用程序窗口下有一个“描述”字段。我想知道此字段是否包含有关应用程序的描述，以及是否可以通过某种方式访问​​此描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:12:28.943

可以`PackageManager.getApplicationInfo()`用来获取`ApplicatioInfo`包的对象，然后`ApplicatioInfo.loadDescription`用来获取描述。

```
PackageManager pm = getPackageManager();
ApplicationInfo appInfo = pm.getApplicationInfo("com.package", 0);
appInfo.loadDescription(pm); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T08:08:00.243

在“服务”中，例如

```
<service android:name="different.theme.layer.lwp.template.LiveWallpaper"
        android:label="@string/app_name"
        android:description="@string/description"
        android:icon="@drawable/ic_launcher"> 
```

并在字符串中添加：

```
<string name="description">xxx</string> 
```

潘迪克。

# php - Wordpress 多重编辑画面

> ID：11328386
> 
> 赞同：0
> 
> 时间：2012-07-04T11:40:04.430
> 
> 标签：php, wordpress, function, edit

我想知道是否有一种方法可以绕过“查看帖子”屏幕（对于自定义帖子类型），并且只需有一个显示所有字段的编辑屏幕，您可以一次编辑它们并简单地点击保存。因此，无需查看所有内容，然后单击每个编辑，您只需一次编辑它们，没有“查看页面”或“编辑个人”页面。

如果我必须使用插件，我会，但我宁愿通过functions.php，我真的不知道从哪里开始，因为我没有经常使用Wordpress。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:03:06.423

在 register_post_type() 中将选项 show_ui 设置为 false。这将阻止 wordpress 显示自定义编辑屏幕。[http://codex.wordpress.org/Function_Reference/register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type) 然后，使用 add_menu_page() 创建您的自定义管理页面[http://codex.wordpress.org/Function_Reference/add_menu_page](http://codex.wordpress.org/Function_Reference/add_menu_page) 一般来说，通过functions.php一切皆有可能

# android - 我们可以在 SMS 消息中传递 Uri 而不是 Android 中的超链接吗

> ID：11328387
> 
> 赞同：1
> 
> 时间：2012-07-04T11:40:16.500
> 
> 标签：android, sms, uri

我想知道我们可以在 SMS 消息中传递 Uri 而不是在 Android 中传递超链接。我正在考虑以下场景：
1）我打开一个 DDMS
2）在模拟器控制面板中，我正在发送一条短信为“http://www.google.com”
3）短信到达模拟器。
4) 我打开 SMS，消息 http://www.google.com 有一个超链接，如下所示。
5) 我点击该链接，它会重定向到一个浏览器，在其中打开我的 Google 网站。

考虑另一种情况：
1）我打开一个 DDMS
2）在模拟器控制面板中，我正在发送一条短信为“myscheme://com.android.myhost/mypath”
3）短信到达模拟器。
4) 我打开 SMS，它显示消息 myscheme://com.android.myhost/mypath
5) 我单击链接，它重定向到使用上述 Uri 注册的应用程序。

我该怎么做。有什么建议么？

问候和感谢
Sohaib Rahman

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:54:59.987

我不会那样做。不要发明自己的自定义方案。

相反，只要您安装了一个声称支持该特定 URL 结构的应用程序，您的第一种方法就可以正常工作。

例如，如果您安装了 Barcode Scanner，`http://zxing.appspot.com/scan`一旦用户单击链接，类似 URL 将启动 Barcode Scanner 应用程序。这是因为 Barcode Scanner 有一个包含以下`<intent-filter>`元素的活动：

```
 <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="http" android:host="zxing.appspot.com" android:path="/scan"/>
  </intent-filter> 
```

与自定义方案相比，这种方法有两个好处：

1.  IETF 的成员不会因为创建未经授权的计划而威胁要打破你的膝盖骨。:-)

2.  该链接仍然有效，即使对于未使用 Android 或未安装 Barcode Scanner 的收件人也是如此。如果您从用于查看此 SO 答案的 Web 浏览器访问[http://zxing.appspot.com/scan](http://zxing.appspot.com/scan)，您将看到它指向一个有效的网页，Android 设备用户可以从中单击下载条形码扫描器。您的自定义方案方法创建的 URL 对于其他没有安装您的应用程序的人完全没有用（例如，有人试图将您的 SMS 转发给其他人）。

现在，某种水果味的移动操作系统*确实*鼓励创建您自己的自定义方案，原因我无法理解。如果您真的确定要这样做，则可以在其中使用`<intent-filter>`带有您的方案的 an：

```
 <intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.BROWSABLE"/>
    <data android:scheme="zxing" android:host="scan" android:path="/"/>
  </intent-filter> 
```

# javascript - 更改链接的用户脚本

> ID：11328390
> 
> 赞同：1
> 
> 时间：2012-07-04T11:40:25.313
> 
> 标签：javascript, replace, userscripts

我只是想制作一个快速的用户脚本来将 .com 链接更改为 .co.uk 链接，我查看了这个问题（[jQuery 替换了相关链接](https://stackoverflow.com/questions/9520730/jquery-replacing-relative-links)）以尝试获得一些想法并想出了这个，但它不起作用。

有一个指向脚本的链接以及下面的脚本，但我看不出我做错了什么。我确实试过了

```
$(document).ready(function() 
```

但不知道用户脚本是否支持这一点，所以放弃了我，仍然没有运气。

[http://www.seriousbrew.co.uk/scripts/FreeBooksLinkReplace.user.js](http://www.seriousbrew.co.uk/scripts/FreeBooksLinkReplace.user.js)

```
// ==UserScript==
// @name        Free Books Link Replace
// @namespace   www.seriousbrew.co.uk/scripts/
// @description one hundred freee books, changing links to .co.uk from .com
// @include     http://onehundredfreebooks.com/ 
// @version     2
// ==/UserScript==

function replacelinks() {
      $("a[href^='/']").each(function(){ 
      var cur_href = $(this).attr("href");
      var n=str.replace(/.com/gi, ".co.uk"); 
    });
}

replacelinks(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:46:27.527

尝试这个：

```
document.addEventListener("DOMContentLoaded", replaceLinks, false );

if( document.readyState === "complete" ) {
    replaceLinks();
}

function replaceLinks() {
    Array.forEach( document.links, function(a) {
        a.href = a.href.replace( ".com", ".co.uk" );
    });
} 
```

# java - Android - 定时器类

> ID：11328393
> 
> 赞同：1
> 
> 时间：2012-07-04T11:40:37.820
> 
> 标签：java, android, timer

我正在制作一个 android 应用程序（QR 码阅读器），我需要每秒执行 4 次操作。为此，我决定使用 Timer 类。我发现了它的一个奇怪行为：

```
timer = new Timer();
timer.scheduleAtFixedRate(onTimer, 100, stn.GetStep());
timer.cancel();
timer = new Timer();
timer.scheduleAtFixedRate(onTimer, 100, stn.GetStep()); 
```

最后一行抛出一个错误 - `java.lang.IllegalStateException: TimerTask is scheduled already`。是不是很奇怪？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:43:50.477

不，这就是它应该如何工作的方式。A`TimerTask`是一次性对象。`TimerTask`如果您想再次安排代码，请创建一个新的。（请参阅[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20long,%20long%29)。）

如果您不喜欢每次运行都创建一个全新对象的想法，您可以执行类似的操作

```
Runnable toRunRepeatedly = new Runnable() {
    public void run() {
        // your code goes here...
    }
}; 
```

然后做

```
TimerTask tt = new TimerTask() {
    public void run() {
        // Delegate to the same runnable each time.
        toRunRepeatedly.run();
    }
}; 
```

**相关问题：**

*   [如何安全地取消 TimerTask？](https://stackoverflow.com/questions/10484538/how-to-cancel-timertask-safely)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:46:20.793

简短的回答：不，不，这并不奇怪。

它是一个线程，它将处于“取消”状态，但由于语句的快速执行，该线程还不会被取消。所以这并不奇怪，欢迎来到线程 101。

为什么要取消线程以重新调用它？这是为了什么目的？在再次调用它之前，您没有给第一个实例时间安全停止。您可能希望在重新创建计时器对象之前将其设置为 null。

# android - 广播接收器和事件处理程序

> ID：11328399
> 
> 赞同：-3
> 
> 时间：2012-07-04T11:41:44.257
> 
> 标签：android

onClickListener 和事件处理程序中的任何内容是否考虑广播接收器？？？

```
OnClickListener processOnClickListener = new OnClickListener() {
    public void onClick(View v) {
                  // my Code is here 
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:52:13.977

**不**

[`OnClickListener`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)广播接收器接收意图，与接口没有任何共同之处

`OnClickListener`是一个回调接口，其`onClick`方法在点击视图时被调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:57:57.503

不，广播接收器用于活动之间的通信，而不是活动组件中的操作

# iphone - 如何使用 UILabel 实例方法

> ID：11328400
> 
> 赞同：1
> 
> 时间：2012-07-04T11:41:44.627
> 
> 标签：iphone, objective-c, ios5, uilabel

因为我是 iphone 编程的新手，所以我也做了一点编码。我从未浏览过苹果的文档。但是现在我刚刚开始阅读它，我发现一些方法对我来说非常困难，我很难实现这个，因为 SOF 是我编码的关键，这就是我问这个的原因。请告诉我如何使用 UILabel 类实例方法

```
– (CGRect)textRectForBounds:limitedToNumberOfLines:
– (void)drawTextInRect: 
```

如果可能的话，提供一些代码，在此先感谢，期待您的帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:16:43.887

方法“textRectForBounds:limitedToNumberOfLines:”返回标签文本的绘图矩形。

语法：(CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines:(NSInteger)numberOfLines

bounds 接收器的边界矩形。numberOfLines 用于标签的最大行数。值 0 表示没有最大行数，矩形应包含所有文本

此方法不应直接调用，但应由子类覆盖。

可以通过以下方式对其进行重载：

```
- (CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines (NSInteger)numberOfLines
{
return CGRectInset(bounds, MARGIN, MARGIN);
}

- (void)drawTextInRect:(CGRect)rect
{
[super drawTextInRect: CGRectInset(self.bounds, MARGIN, MARGIN)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:12:20.627

如果要在特定矩形中绘制文本，则需要继承 UILabel 并覆盖`– (CGRect)textRectForBounds:limitedToNumberOfLines:`。请记住使用您的子类而不是 UILabel。

例如，假设我只想在标签的左半边绘制文本：

```
- (CGRect)textRectForBounds:(CGRect)bounds limitedToNumberOfLines:(NSInteger)numberOfLines {
   //Original method returns the bounds, so let's find the left half of the bounds
   CGRect leftHalfRect = CGRectMake(0, 0, self.bounds.size.width/2, self.bounds.size.height);
   return leftHalfRect;
} 
```

因为此方法现在返回边界的左半边矩形，所以您的文本只会在左半边矩形中绘制。

# c# - 在 FluentMigrator 中分 离测试数据

> ID：11328401
> 
> 赞同：1
> 
> 时间：2012-07-04T11:41:45.970
> 
> 标签：c#, .net, database, migratordotnet, fluent-migrator

我想**将测试数据**（**每个环境**可能不同）与实际的数据库创建分开。
我知道您可以为此目的使用**[配置文件，但据我了解，您在其他迁移结束时调用它们一次。](https://github.com/schambers/fluentmigrator/wiki/Profiles)**

我想要的是让它们**基于迁移版本**，所以：

*   迁移 X 创建表“用户”
*   测试数据分别插入“用户”

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:33:47.860

有两个新功能可能会对您有所帮助。你看过标签（https://github.com/schambers/fluentmigrator/wiki/Filter-migrations-run-based-on-Tags）吗？

另一个选项尚未合并，但应该很快就会合并：通过运行程序（控制台、nant、msbuild）传递参数，您可以使用该参数在迁移中具有逻辑。

见这里：[https ://github.com/schambers/fluentmigrator/wiki/ApplicationContext:-Passing-parameters-to-Migrations](https://github.com/schambers/fluentmigrator/wiki/ApplicationContext:-Passing-parameters-to-Migrations)

就个人而言，我一直只是使用一个 sql 脚本来设置 testdata 并从我的构建脚本（而不是通过 FluentMigrator）运行它。

# java - Hibernate Criteria API 中的 SQL 'LIKE' 运算符

> ID：11328403
> 
> 赞同：14
> 
> 时间：2012-07-04T11:41:53.043
> 
> 标签：java, hibernate, criteria, sql-like, hibernate-criteria

我想用 Hibernate 实现一些通用过滤器`Criteria`。它应该像`LIKE`SQL 中的运算符一样工作：

```
SELECT * FROM table WHERE table.ANYCOLOUMNHERE LIKE '%'||anyvaluehere||'%' 
```

我有`Map<String, String>`where *key*是列名，*value*是它的值。

我试过这样的事情：

```
for (Entry<String, String> filter : filters.entrySet()) {
    crit.add(Restrictions.ilike(filter.getKey(), filter.getValue(), MatchMode.ANYWHERE));
} 
```

但是当字段类型不是*String*时，它会导致 `java.lang.ClassCastException`：

```
[com.nsn.util.LoggerUtilerror] (http-localhost-127.0.0.1-8080-1) Error while getting alarms: java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Long
    at org.hibernate.type.descriptor.java.LongTypeDescriptor.unwrap(LongTypeDescriptor.java:36) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$1.doBind(BigIntTypeDescriptor.java:57) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:92) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:305) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:300) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.bindPositionalParameters(Loader.java:1891) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.bindParameterValues(Loader.java:1862) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1737) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.doQuery(Loader.java:828) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:289) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.doList(Loader.java:2447) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.doList(Loader.java:2433) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2263) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.Loader.list(Loader.java:2258) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:122) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1535) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.internal.CriteriaImpl.uniqueResult(CriteriaImpl.java:396) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at com.nsn.entities_proccess.AlarmDAOImpl.getAlarms(AlarmDAOImpl.java:93) [classes:]
    at com.nsn.boundary_process.LazyAlarmDataModel.load(LazyAlarmDataModel.java:50) [classes:]
    at org.primefaces.component.datatable.DataTable.loadLazyData(DataTable.java:677) [primefaces-3.3.1.jar:]
    at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:92) [primefaces-3.3.1.jar:]
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:518) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.component.UIData.visitTree(UIData.java:1411) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIForm.visitTree(UIForm.java:371) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:376) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:297) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:981) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:391) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_05] 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-05T12:04:15.757

您可以使用[`like()`](https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/criterion/Restrictions.html#ilike-java.lang.String-java.lang.String-org.hibernate.criterion.MatchMode-)这样的限制条件：

```
session = sessionFactory.openSession();
Criteria query = session.createCriteria(Pojo.class);
query.add(Restrictions.like("anycolumn", "anyvalue", MatchMode.START)); 
```

它会给你一个以“ *anyvalue* ”开头的字符串列表。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-03-18T01:08:54.023

当休眠会话不存在时，您也可以使用 DetachedCriteria。

```
DetachedCriteria criteria = DetachedCriteria.forClass(Pojo.class);
criteria.add(Restrictions.like("column", value, MatchMode.ANYWHERE)); 
```

它将匹配**列**字符串中任何位置的**值。**您可以使用不同类型的模式。

 **参考页面：[https ://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/criterion/MatchMode.html](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/criterion/MatchMode.html)

**DetachedCriteria：**

- 当休眠会话不存在时，分离标准是非常好的替代品。

使用 DetachedCriteria 与 Criteria 完全相同，只是您可以在不访问会话的情况下进行查询的初始创建和设置。当需要运行查询时，您必须将其转换为带有`getExecutableCriteria(session)`.

如果您正在构建复杂的查询（可能通过多步骤过程），这很有用，因为您不需要在任何地方访问 Session。运行查询时，您只需要最后一步的 Session。

在引擎盖下，DetachedCriteria 使用 CriteriaImpl ，它与调用`session.createCriteria()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-02T11:27:57.557

使用枚举 MatchMode 来帮助您：

```
Criterion c1 = Restrictions.like("AttributeName", "AttributeValue", MatchMode.END); 
```

不要使用任何特殊字符，例如 * Reference [Read This Like](https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/criterion/MatchMode.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T12:09:46.853

在这种情况下，我建议使用 a`Query object`而不是 , 。`Criteria object`

我不记得 Criteria 是否像 Query 对象那样将它不理解的东西直接传递给数据库。基本上，这意味着如果您使用 Hibernate 解析器不理解的特定于数据库的函数，它将“按原样”传递给数据库。

例子：

```
Query queryObject = session.createQuery("from ClassName where VARIABLENAME like '%'||anyvaluehere||'%' order by VARIABLENAME");
List<YourClass> resultList= queryObject.list(); 
```

更多请看[这里](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-04T11:58:51.197

> 当字段类型不是字符串时，它会导致 java.lang.ClassCastException

那是因为它只适用于字符串/varchar 字段/列。**

# php - config.inc 直接在浏览窗口中打开。如何避免这种情况

> ID：11328405
> 
> 赞同：1
> 
> 时间：2012-07-04T11:42:00.390
> 
> 标签：php

我们的网站中有一个 config.inc 文件，它直接在浏览器窗口中打开。它在该 config.inc 文件中写入了一些凭据。如何避免从浏览器打开。

```
eg. www.example.com/config/config.inc
output
<?php 

some credentials

?> 
```

任何建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:42:53.367

1.把它放在你的网络根目录之外（**推荐**）

2.使用htaccess来屏蔽.inc文件

```
<Files ~ "\.inc$">
  Order allow,deny
  Deny from all
</Files> 
```

3.在检查变量的文件顶部进行快速检查。如果未设置该变量，那么您知道它被直接拉起并应立即退出：

```
<?if(!defined('IN_SCRIPT')){header('HTTP/1.0 404 not found');exit;}?> 
```

4.为`php`文件名添加扩展名，以便将其解析为 PHP 或告诉 Apache 将 .inc 文件解析为 PHP

```
AddType application/x-httpd-php .inc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:45:33.903

将 .php 添加到扩展名中，或者`.htaccess`在您的 webroot 目录中创建一个包含此文件的文件（当然，假设您使用的是 Apache）：

```
<Files ~ "\.inc$">
    Order allow,deny
    Deny from all
</Files> 
```

# google-maps - 谷歌地图地理编码功能的存储结果

> ID：11328407
> 
> 赞同：1
> 
> 时间：2012-07-04T11:42:04.243
> 
> 标签：google-maps, geocode

我想检索和存储 Google Maps API 函数的结果，`geocode()`以便以后使用。我已将下面的代码放在一个`OnClick`事件上，以对地图上单击的点的地址进行反向地理编码。

问题是它总是包含上一个点击点的值。示例：我第一次单击它是“未定义”，第二次它是我之前单击的点的地址，依此类推。

```
var address ;

my_listener = google.maps.event.addListener(map, 'click', function(event) {
   codeLatLng(event.latLng);
});

function codeLatLng(mylatLng) {

    geocoder = new google.maps.Geocoder();
    var latlng = mylatLng;

    geocoder.geocode({'latLng': latlng}, function(results, status) 
    {
        if (status == google.maps.GeocoderStatus.OK) 
        {
            if (results[1]) 
            {
                address = results[1].formatted_address;
            }
        }
    });

    alert(address);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:55:06.333

如果您要移动`alert`，在回调内部，您将看到新地址：

```
geocoder.geocode({'latLng': latlng}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) 
    {
        if (results[1]) 
        {
            address = results[1].formatted_address;
            alert(address);   //moved here
        }//   ^
    }//       |
});//         |  
//------------- 
```

地理编码过程是*异步*的，所以在这种情况下：

```
geocoder.geocode({'latLng': latlng}, function(results, status) {
    //We be called after `alert(address);`
});
alert(address); 
```

`alert`将在从服务器接收地理编码数据并调用回调之前执行`function(results, status){}`。

# php - 如何纠正 Uncaught SyntaxError: Unexpected identifier error in getting json response using jquery？

> ID：11328408
> 
> 赞同：0
> 
> 时间：2012-07-04T11:42:04.463
> 
> 标签：php, javascript, jquery, jsonp

我正在尝试从服务器获取 jQuery 移动应用程序以 json 格式读取数据。当我加载页面时，我在我的 chrome 控制台中收到类似“Uncaught SyntaxError: Unexpected identifier”的错误。我是 json 和 jquery 的新手，所以给我任何纠正这个错误的建议。提前致谢。

这是我的 JavaScript/jQuery：

```
$(document).ready(function () {
    $('#leads-list').click(function () {
        $.ajax({
            url: 'http://fg.com/rest/view.php?sessid=35e85b084ff41894170a0',
            type: 'POST',
            dataType: 'jsonp',
            jsonp: 'callback',
            success: successData,
            error: function () {
                alert('Error');
            }
        });

        function successData(data) {
            var response = data.message;
            alert('data=' + response);
        }
    });
}); 
```

我的php代码是：

```
 $jsonResponse = Zend_JSON::decode($response['body']);
$rtnobj->message=$jsonResponse;
echo $_GET['callback']. '('. json_encode($rtnobj) . ')'; 
```

JSON 响应：

```
({
    "message": {
        "success":true,
        "result":[
            {
                "lead_no":"LEA11",
                "lastname":"Venu",
                "firs‌​tname":"Yatagiri",
                "company":"RSalesArm IT Services Ltd",
                "email":"venu_yatagiri@rsalesarm.com",
                "id":"10x125"
            }
        ]
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:24:20.977

当我将上面的 json 复制到我的编辑器中时，我看到的不是

```
"firstname":"Yatagiri", 
```

以下：

```
"firs?tname":"Yatagiri", 
```

**... firstname**中的**s**和**t**之间有一个字符。

 **这里的视图源向我展示了：

```
firs&zwnj;&#8203;tname 
```

当这些字符来自您的 PHP 脚本时，您应该删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:32:30.137

我认为你的错误是在行

```
echo $_GET['callback']. '('. json_encode($rtnobj) . ')'; 
```

它应该读

```
echo json_encode( $rtnobj ); 
```

要从 JSON 响应创建函数调用，您将使用 JavaScript，而不是 PHP。**

# c# - 从另一个用户和域将文件写入某个位置

> ID：11328410
> 
> 赞同：1
> 
> 时间：2012-07-04T11:42:06.767
> 
> 标签：c#, .net, login, console-application, shared-directory

我正在开发一个控制台应用程序，该应用程序尝试通过登录然后将文件复制到共享文件夹来从网站下载一些文件。

我在这里工作的域与我需要保存文件的共享文件夹的域不同。

目前，我通过从运行中打开共享文件夹并将用户名和密码放入 Windows 身份验证对话框然后运行应用程序来手动克服此问题。

这是我正在使用的代码 -

```
 static public void Start()
        {
            try
            {
                serverpath = ConfigurationSettings.AppSettings["serverpath"];
                if (flag == 0)
                {
                    username = ConfigurationSettings.AppSettings["UserNameFN"];
                    password = ConfigurationSettings.AppSettings["PassWordFN"];
                }
                else
                {
                    username = ConfigurationSettings.AppSettings["UserNameMFS"];
                    password = ConfigurationSettings.AppSettings["PassWordMFS"];
                    check = true;
                }

                string webUrl = "https://www.website.org/";
                string formParams = string.Format("user={0}&password={1}", username, password);
                WebRequest req = WebRequest.Create(webUrl);
                req.ContentType = "application/x-www-form-urlencoded";
                req.Method = "POST";
                req.Proxy.Credentials = CredentialCache.DefaultCredentials;
                byte[] bytes = Encoding.ASCII.GetBytes(formParams);
                req.ContentLength = bytes.Length;
                using (Stream os = req.GetRequestStream())
                {
                    os.Write(bytes, 0, bytes.Length);
                }
                WebResponse resp = req.GetResponse();
                cookieHeader = resp.Headers["Set-cookie"];

             (ConfigurationSettings.AppSettings["UserNamePROD"], ConfigurationSettings.AppSettings["PassWordPROD"], ConfigurationSettings.AppSettings["DomainPROD"]);
                Directory.CreateDirectory(serverpath + @"Log\");
                Logging.Write_Line(DateTime.Now + " - File Transfer Started");
                if ((!check) || (count == 0))
                {
                  string[] filename = getFileNames.returnFileNames(cookieHeader)
                }
             } 
```

有了上面的代码

`Directory.CreateDirectory(serverpath + @"Log\");`此行引发异常。

在我的机器上运行我的应用程序时，如何以编程方式登录到共享位置？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:54:24.980

我想我的评论是我会提供的答案：

technet.microsoft.com/en-us/sysinternals/bb897553.aspx

请记住，我没有在我的机器上运行你的代码，但我猜你可以看到你可以运行 PSExec 作为测试并“弄清楚”如何将它用于你的目的。

我希望这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:10:57.433

您可以通过将目录创建命令作为 shell 进程执行来摆脱它，如下所示（提供完整的命名空间以避免`using`指令与代码混淆）：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = 
    new System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; // Hides the command prompt window
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C mkdir " + serverpath + @"\Log";
startInfo.Username = "domain\username";
startInfo.Password = // SecureString object containing the password
process.StartInfo = startInfo;
process.Start(); 
```

未经测试，但逻辑表明它可能有效。

# git - Git - 使用变基创建漂亮的日志

> ID：11328411
> 
> 赞同：2
> 
> 时间：2012-07-04T11:42:32.920
> 
> 标签：git, rebase, git-rebase

我们已经开始在我们的持续交付 (CD) 项目中使用 Git。我们的 DevOps 决定我们必须有一个干净的 Git 日志，其中每个气泡都与一个技术/用户故事相关联。在日志中，master 上的提交必须是来自功能分支的合并提交。日志不能超过一个级别（即，它应该看起来好像每个分支不与另一个分支重叠）。
例如：

![在此处输入图像描述](../Images/19d8d25c067aaf52cce12b58784132d1.png)

到目前为止，我们通过创建一个本地分支、提交到这个分支并使用 master 重新定位，然后将分支合并到没有 ff 的 master 来实现这个目标。

但是，我不确定这种方法是否最佳。它在大多数情况下运行良好，但是当多个开发人员在同一个分支上工作时，他们无法使用 master 进行 rebase。因此，如果他们需要将分支代码与推送到 master 的一些更改同步，他们就不能（或者至少要复杂得多）

由于习惯了以前的源代码控制系统，我觉得由于 rebase 会丢失有关提交实际发生顺序的信息，因此很难理解发生了什么。

在具有上述约束的团队中工作的最佳实践是什么（日志必须看起来尽可能接近上图）？

这种日志结构给持续交付系统中负责发布的人带来的最大优势是什么？

# google-app-engine - GAE GQL - 如果列表包含项目，则获取实体

> ID：11328412
> 
> 赞同：0
> 
> 时间：2012-07-04T11:42:33.720
> 
> 标签：google-app-engine, google-cloud-datastore

假设我有一个带有 StringListProperty: 'ids' 的实体 - 与该实体关联的 id 列表。然后我想通过询问给定的 id 是否在 ids 中来查询该实体。

我知道你可以使用过滤器

```
q.filter("last_name IN", list) 
```

但我需要反过来，比如：

```
q.filter('id' IN ids)?? 
```

或者

```
q = db.GqlQuery("SELECT * FROM entity WHERE :1 IN ids", id) 
```

[https://developers.google.com/appengine/docs/python/datastore/queries](https://developers.google.com/appengine/docs/python/datastore/queries)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:07:23.700

只是`q.filter('ids', id)`。

# html - 是否有类似于 iOS 天气应用的 HTML5、jQuery Mobile 或 PhoneGap 模板？

> ID：11328417
> 
> 赞同：0
> 
> 时间：2012-07-04T11:43:03.953
> 
> 标签：html, templates, jquery-mobile, cordova

我正在为 iOS 和 Android 构建一个基本的应用程序，它看起来类似于股票 iOS 天气应用程序。将有多个页面（例如 7 个页面，一周中的每一天），用户将能够在它们之间向左或向右滑动，底部有一条虚线指示线。由于这是非常常见的功能，我想知道是否已经有此类应用程序的现有模板，所以我最终不会重新发明轮子。

我尝试了 jqTouch 和 jQuery Mobile 演示，但我没有完全找到这个。我发现了很多滑动手势，但它们都没有底部的点。这些点是我的应用程序的关键，我不想创建自己的点。如果有一个我可能错过的例子，我会很感激一个链接！

![我的应用程序的模拟 UI](../Images/b6c201ba823b25c1a8e01134d718c0c2.png) ![股票 iOS 天气应用程序](../Images/7601001f62b141e6aac8cc6c878aab66.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:06:42.583

找到了！

Sencha Touch 有一个[旋转木马](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/carousel)效果，正是我想要的。

[我在这里](https://stackoverflow.com/questions/5330825/sencha-touch-html5-swipe-event-effect-from-left-to-right)找到了答案。

# routing - 具有复杂查询的友好 URL

> ID：11328421
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:43:15.443
> 
> 标签：routing, friendly-url

我在 google 中搜索了关键字“CTO”，并在地址栏中得到了这个 URL。我想知道任何人都可以把它变成一个友好的 URL。

[http://www.google.com.ng/search?hl=en&sclient=psy-ab&q=cto&oq=cto&gs_l=serp.3...939821.940377.0.940735.3.3.0.0.0.0.0.0..0.0...0.0 .UflIOzQsuv4&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&biw=1066&bih=646&ech=1&psi=0CX0T7iHBoXU-gbn96TvBg.1341400545114.3&emsg=NCSR&noj=1&ei=0CX0TvB7iBoH](http://www.google.com.ng/search?hl=en&sclient=psy-ab&q=cto&oq=cto&gs_l=serp.3...939821.940377.0.940735.3.3.0.0.0.0.0.0..0.0...0.0.UflIOzQsuv4&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&biw=1066&bih=646&ech=1&psi=0CX0T7iHBoXU-gbn96TvBg.1341400545114.3&emsg=NCSR&noj=1&ei=0CX0T7iHBoXU-gbn96TvBg)

我的问题是，是否有可能有一个与此等效的友好 url？如果是真的，怎么做？

```
Example: http://www.google.com.ng/search/{mysearchcriteria} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:59:34.407

使用[bitly.com](http://bitly.com)或[TinyURL](http://tinyurl.com)之类的服务。这个想法很简单，获取一个 URL，将其存储在数据存储（很可能是 NoSQL）中，并为其分配一个唯一标识符，并在收到标识符时发出 HTTP 重定向。真正的诀窍在于管理映射 URL 的数据存储。[阅读这篇博](http://www.readwriteweb.com/archives/bitly_alternative_to_tinyurl.php)文以进一步了解bit.ly。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:09:01.723

[https://www.google.com/search?q=CTO](https://www.google.com/search?q=CTO)

这会给你同样的结果

# javascript - 在 html 中，使用选定的背景颜色打开一个新窗口

> ID：11328423
> 
> 赞同：2
> 
> 时间：2012-07-04T11:43:33.813
> 
> 标签：javascript, html

html 页面包含 3 个单选按钮 - 红色、绿色、蓝色。如果我们选择了单选按钮中的任何一个，则必须打开新窗口，并且该窗口背景颜色应该是选定的单选按钮颜色。谁能帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:45:56.680

试试这个（[jsbin.com 上的演示](http://jsbin.com/unikel)，您可能需要允许弹出窗口）：

HTML：

```
<label for="red">Red</label>
<input type="radio" id="red" name="windowcolor" data-color="red" />
<label for="green">Green</label>
<input type="radio" id="green" name="windowcolor" data-color="green" />
<label for="blue">Blue</label>
<input type="radio" id="blue" name="windowcolor" data-color="blue" /> 
```

JavaScript：

```
function openWindowWithColor() {
  var color = this.getAttribute("data-color");
  console.debug("Open new window with color: " + color);
  var myNewWindow = window.open();
  myNewWindow.document.body.style.background = color;
} 

var radios = document.getElementsByTagName("input");

for(var i = 0; i < radios.length; i++) {
  radios[i].addEventListener("change", openWindowWithColor);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:51:04.130

```
<script>
    function open(var color){
        //window.open("new_page.html#"+color);
        var myNewWindow = window.open("url");
        myNewWindow.document.body.style.background = color;
    }
</script>

<input type="radio" onclick="open('red')" />
<input type="radio" onclick="open('green')" />
<input type="radio" onclick="open('blue')" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T11:49:21.467

```
var newwindow = window.open('popup.aspx','Color Popup','height=400,width=200');
newwindow.document.body.style.background = "#000"; 
```

# xml - 更新 XMLListCollection 的有效方法

> ID：11328425
> 
> 赞同：0
> 
> 时间：2012-07-04T11:43:40.803
> 
> 标签：xml, actionscript-3, apache-flex, httpservice

我有以下代码：

```
private var xmlC:XMLListCollection = new XMLListCollection();
private var httpS:HTTPService = new HTTPService();
private var timer:Timer = new Timer(1000);
private var xmlData:XML;
private var xmlDataList:XMLList;

protected function application1_creationCompleteHandler(event:FlexEvent):void
{
    httpS.url = "data.xml";
    httpS.addEventListener(ResultEvent.RESULT, resultHTTP);
    httpS.resultFormat="e4x";
    httpS.send();

    timer.start();
    timer.addEventListener(TimerEvent.TIMER, updateXMLC);
}

private function updateXMLC(event:TimerEvent):void
{
    xmlC.source = xmlDataList;
    httpS.send();
}

private function resultHTTP(event:ResultEvent):void
{
    xmlData = event.result as XML;
    xmlDataList = xmlData.dg.rows.row;
} 
```

“data.xml”有 5000 行，所以我需要在必要时清理它的痕迹。由于分析，我发现了两个问题

1.  每次在方法 updateXMLC 中调用 httpS.send() 时，它都会在内部调用 URLLoader，从而使不再需要的 XML 在内存中徘徊而不会被垃圾收集
2.  有没有更有效的方法来更新 xmlC，每当更新 XMLListCollection 时，似乎 XMLListCollection 的先前值不会被垃圾收集

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T22:02:00.270

在查看代码后我怀疑/好奇会有任何内存泄漏，所以我自己测试了你的代码。

您发布的代码实际上无法运行。我刚刚添加了最低限度，让它像 app 标签和 import 语句一样运行（以及一个计数器标签，用于查看 http 服务周期何时完成）：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="application1_creationCompleteHandler(event)"> 
<mx:Script>
    <![CDATA[
        import mx.rpc.http.HTTPService;
        import mx.collections.XMLListCollection;
        import mx.rpc.events.ResultEvent;
        import mx.events.FlexEvent;

        private var xmlC:XMLListCollection = new XMLListCollection();
        private var httpS:HTTPService = new HTTPService();
        private var timer:Timer = new Timer(1000);
        private var xmlData:XML;
        private var xmlDataList:XMLList;

        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            httpS.url = "data.xml";
            httpS.addEventListener(ResultEvent.RESULT, resultHTTP);
            httpS.resultFormat="e4x";
            httpS.send();

            timer.start();
            timer.addEventListener(TimerEvent.TIMER, updateXMLC);
        }

        private function updateXMLC(event:TimerEvent):void
        {
            xmlC.source = xmlDataList;
            httpS.send();
        }

        private function resultHTTP(event:ResultEvent):void
        {
            counter.text = Number(parseInt(counter.text,10)+1).toString(); 
            xmlData = event.result as XML;
            xmlDataList = xmlData.dg.rows.row;
        }
    ]]>
</mx:Script>
<mx:Label id="counter" text="0" horizontalCenter="0" verticalCenter="0" fontSize="72"/>
</mx:Application> 
```

好消息是您的代码中没有任何内存泄漏。探查器中也没有任何游荡对象。

坏消息是您在应用程序中所做的任何其他事情（代码未在此处发布，无论出于何种原因省略） - 这就是您有泄漏/游荡对象的地方。

您可以在附加代码的分析器中亲自看到，在 http 服务的前几个周期后内存没有增加。即它不会随着时间的推移继续掌握更多的记忆。（顺便说一下，我要提取的 XML 文件大约有 8000 行，超过 1MB）。

如果您想发布更多代码，很乐意进一步查看 - 但现在认为这解决了这个谜团。;)

以下是您所做的一些修复：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="application1_creationCompleteHandler(event)">
<mx:Script>
    <![CDATA[
        import mx.rpc.http.HTTPService;
        import mx.collections.XMLListCollection;
        import mx.rpc.events.ResultEvent;
        import mx.events.FlexEvent;

        [Bindable] private var xmlC:XMLListCollection = new XMLListCollection();
        private var httpS:HTTPService = new HTTPService();
        private var timer:Timer = new Timer(1000);
        private var xmlData:XML;
        private var xmlDataList:XMLList;
        private var serviceRunning : Boolean = false;
        private var currentData : String = '';

        protected function application1_creationCompleteHandler(event:FlexEvent):void
        {
            httpS.url = "data.xml";
            httpS.addEventListener(ResultEvent.RESULT, resultHTTP);
            httpS.resultFormat="e4x";
            httpS.send();

            timer.start();
            timer.addEventListener(TimerEvent.TIMER, updateXMLC);
        }

        private function updateXMLC(event:TimerEvent):void
        {
            xmlC.source = xmlDataList;
            if( !serviceRunning ){  // don't call for more data until 
                httpS.send();       // you've gotten back last call
            }
        }

        private function resultHTTP(event:ResultEvent):void
        {
            // make sure we have differences before rebinding
            var newData : String = event.result as String;
            serviceRunning = false;
            counter.text = Number(parseInt(counter.text,10)+1).toString();
            if( newData !=  currentData ){
                xmlData = event.result as XML;
                currentData = newData;
                xmlDataList = xmlData.dg.rows.row;
            }
        }
    ]]>
</mx:Script>
<mx:Label id="counter" text="0" horizontalCenter="0" verticalCenter="0" fontSize="72"/>
 </mx:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:45:48.360

如果我正确理解您的代码，则您正在从与您的 SWF 位于同一文件夹中的文件中恢复您的 XML 数据。如果是这种情况，那么最有可能发生的是 XML 文件被缓存在您的浏览器中，并且它一遍又一遍地返回相同的缓存版本。

在处理这些问题时，您可以添加一个虚拟 URL 变量，使浏览器认为您正在检索的文件是新的，并强制它再次恢复该文件。

您可以通过执行以下操作来实现此目的：

`httpS.url = "data.xml?random="+Math.floor(Math.random()*1000);`

如果这不能解决问题，那么它可能与不重置保存实际 XML 数据的变量有关。您可以通过重置变量的新实例来完成此操作：

```
xmlData = new XML();
xmlDataList = new XMLList();
xmlC = new XMLListCollection(); 
```

或者，如果您只想重置 XMLListCollection，您可以尝试使用 Flex 中所有列表中包含的“refresh()”方法。

重要提示：如果您使用数据绑定与这些变量中的任何一个，这可能会导致 Flex 不会垃圾收集数据，因为它正在某处使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:57:10.597

请求、接收和处理 XML 需要多长时间？听起来它是一个相当大的文件，所以如果超过一秒钟，您将同时发生对 HTTPService 的多次调用（据我了解，您当前的计时器将尝试每秒触发一次请求，无论是否最后一个已经返回）。

我不确定这是否是您想要的，但我对此表示怀疑。如果我是对的，并且您只想在获得最后一个响应后发送请求，那么您最好摆脱计时器及其功能，然后将 resultHTTP 方法更改为类似这：

```
private function resultHTTP(event:ResultEvent):void
{
    xmlData = event.result as XML;
    xmlC.source = xmlData.dg.rows.row;
    httpS.send();
} 
```

当然，您可能希望每次开始都延迟它：

```
    受保护的函数 application1_creationCompleteHandler(event:FlexEvent):void
    {
        httpS.url = "data.xml";
        httpS.addEventListener(ResultEvent.RESULT, resultHTTP);
        httpS.resultFormat="e4x";

        计时器.start();
        timer.addEventListener(TimerEvent.TIMER, updateXMLC);
    }

    私有函数 updateXMLC(event:TimerEvent):void
    {
        计时器.stop();
        httpS.send();
    }

    私有函数 resultHTTP(event:ResultEvent):void
    {
        xmlData = event.result 作为 XML；
        xmlC.source = xmlData.dg.rows.row;
        计时器.start();
    }

```

对不起，如果我误解了这个问题......

无论哪种方式，您可能还想放入某种 faultHTTP 函数，因此它还会在 HTTP 错误时重新启动计时器（或执行您需要做的任何事情）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:48:13.020

似乎这是 Flex 框架中的一个错误：

*   [http://bugs.adobe.com/jira/browse/SDK-31920](http://bugs.adobe.com/jira/browse/SDK-31920)
*   [http://bugs.adobe.com/jira/browse/SDK-15113](http://bugs.adobe.com/jira/browse/SDK-15113)
*   [http://bugs.adobe.com/jira/browse/FP-599](http://bugs.adobe.com/jira/browse/FP-599)
*   [http://bugs.adobe.com/jira/browse/SDK-11244](http://bugs.adobe.com/jira/browse/SDK-11244)
*   [http://bugs.adobe.com/jira/browse/SDK-11982](http://bugs.adobe.com/jira/browse/SDK-11982)

# android - 将 OGLES2 着色器“注入”到 OGLES1.1 应用程序中

> ID：11328426
> 
> 赞同：0
> 
> 时间：2012-07-04T11:43:43.657
> 
> 标签：android, opengl-es, shader

我有一个正在为工作开发的 android 应用程序。它有几千行代码，因此目前不能移植。有没有办法让我使用 GLES20 为我的应用程序创建着色器，而应用程序中的其他所有内容都是 opengl es 1.1 固定功能 ppipeline？

# regex - 带有正则表达式的 Makefile 'if' 条件

> ID：11328428
> 
> 赞同：8
> 
> 时间：2012-07-04T11:43:46.357
> 
> 标签：regex, makefile

我需要做这样的事情：

```
case `uname -m` in
i?86) echo "CFLAGS += -march=i486 -mtune=native" > configparms ;;
esac 
```

但我需要在 makefile 中为特定目标执行此操作。我还没有找到用正则表达式创建 if 条件的方法。

我试过这个：

```
ifeq ($(shell uname -m), i*86) 
```

但它不起作用。甚至

```
ifeq ($(shell uname -m), i686) 
```

不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-03-05T15:32:01.047

使用 Makefile 内置条件（与[Ωmega 的 Bash 解决方案](https://stackoverflow.com/a/11328602/4411354)相反）

```
ifeq ($(shell uname -m | egrep "i.86"),) # empty result from egrep
    @echo "No match"
else
    @echo "Match"
endif 
```

请参阅此处使用此方法验证 Git 标记[https://gist.github.com/jesugmz/a155b4a6686c4172048fabc6836c59e1](https://gist.github.com/jesugmz/a155b4a6686c4172048fabc6836c59e1)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T11:47:15.120

你可以这样做。只需通过转义行尾来确保您的`case`语句“在一行上”：

```
uname -m | grep -E 'i.86' >/dev/null \
case $$? in \
   0) echo Matches \
   ;; \
   1) echo No match \
   ;; \
esac 
```

另外，请注意，这`$?`实际上是`$$?`为了防止`make`在将其传递给解释器之前尝试对其进行扩展。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-04T11:56:01.900

```
if uname -m | grep -Eq 'i.86'
then
  echo 'Yesss!'
fi 
```

# ms-access - 访问 2007 VBA GoToRecord 问题

> ID：11328431
> 
> 赞同：0
> 
> 时间：2012-07-04T11:43:51.000
> 
> 标签：ms-access, ms-access-2007, vba

我有一个事件表，它记录了每个人的多个事件。我添加了一个 event_number 字段，以允许用户识别每个人的事件顺序并在它们之间移动。添加了一个带有以下代码的 New Event 按钮，该按钮查找人员的最后一个事件编号，并在表中插入一个新行，其中包含一些基本数据，例如他们的 ID 和下一个可用的事件编号。这工作正常，但我需要做的是移动事件子表单，以便在表单上显示这个新的事件编号，以便可以添加其余数据。尝试了围绕 DoCmd.GoToRecord 的各种选项，但只能设法显示一个空白子表单，而不是显示新输入的事件编号。有任何想法吗？

```
Private Sub btnNewEvent_Click()  
   'add a new event by setting discriminator and event number
   Dim lngLast As Long
   Dim strQuery As String
   lngLast = DMax("[event_number]", "event", "[PersonID] = [Forms]![frmContainer]![txPersonID]")
   lngLast = lngLast + 1
   strQuery = "INSERT INTO event ( ID, event_discriminator, event_number ) " & _
           "VALUES ([Forms]![frmContainer]![txtPersonID], 'NR', " & lngLast & ")"
   DoCmd.RunSQL (strQuery)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:06:24.767

这取决于子表单是连续表单还是单一表单以及您的应用程序如何工作。重新查询子表单然后找到相关记录可能就足够了：

```
''Running from the main form
Me.MySubformcontrolName.Form.Requery

Me.MySubformcontrolName.SetFocus
With Me.MySubformcontrolName.Form.Recordset
    .FindFirst "ID=" & lngLast 
End With 
```

或者

```
''From the subform:
Me.Requery

With Me.Recordset
   .FindFirst "ID=" & lngLast 
   ''Other stuff
End With 
```

它可能适合简单地将子表单记录源重置为仅包含最新记录的 SQL 字符串。

请注意，您选择的获取新号码的方式在单一用户环境中是不安全的。

# caching - Azure DataCacheClient 有时无法响应

> ID：11328437
> 
> 赞同：0
> 
> 时间：2012-07-04T11:44:05.083
> 
> 标签：caching, azure, cloud

我遇到了 azure 缓存的问题。我的网站是一个非常简单的网站，不使用任何会话，但天蓝色应用程序必须至少设置 1 个 DataCacheClient。

该网站运行良好，当我浏览该网站时没有问题但是，我在该网站的全局 Application_error 中包含了一个电子邮件通知服务，以了解用户在使用该网站时是否遇到任何错误。

一旦我包含电子邮件错误发送代码，我的邮箱就开始收到相同的错误，其中包括：

## 错误消息：错误代码：子状态：暂时失败。请稍后重试。（指定的一个或多个缓存服务器不可用，可能是由于网络或服务器繁忙。对于本地缓存集群，还要验证以下条件。确保已为此客户端帐户授予安全权限，并检查 AppFabric所有缓存主机上的缓存服务都允许通过防火墙，服务器端的 MaxBufferSize 必须大于或等于客户端发送的序列化对象大小。）

现在我知道当与 azure 服务的连接丢失时会发生这种情况，但为什么会经常发生这种情况？我们该如何解决？

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:51:53.220

如果您不使用会话，为什么要连接到 Azure 缓存？你不需要在 web.config 中检测 Azure AppFabric 缓存连接，除非你有特殊需要。

您正在运行多少个实例，您的 azure 缓存帐户有多大，您的每个用户都收到错误还是间歇性收到错误？如果是后者，是不是在网站上一段时间不活动之后人们会出错？

# javascript - 是否有一个库或 Web 服务可以为我的 javascript 应用程序提供夏令时数据？

> ID：11328440
> 
> 赞同：1
> 
> 时间：2012-07-04T11:44:14.527
> 
> 标签：javascript, time, timezone, browser

***我想要做***的：在 javascript 中实现一个可本地化的时钟。这个想法是用户将选择一个城镇，时钟将显示当前本地时间，同时考虑夏令时数据。

***问题***：是否有可靠的网络服务，或者我应该不时更新的库来提供下面列出的两件事？

*   一组命名位置。
*   一个为我提供给定位置的时区和夏令时数据的过程。

注意：这意味着在我没有服务器端支持的小工具中，所以我需要一个纯 JavaScript 解决方案或公共 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:48:38.967

*   纯 JavaScript 解决方案：[timezone-js](https://github.com/mde/timezone-js)
*   公共网络服务[http://www.earthtools.org/webservices.htm#timezone](http://www.earthtools.org/webservices.htm#timezone)

# java - 在jTable中设置jCheckBox不可见

> ID：11328451
> 
> 赞同：1
> 
> 时间：2012-07-04T11:45:10.203
> 
> 标签：java, swing, netbeans, jtable, tablecellrenderer

我有一个`jTable`两列。第一列设置为布尔值（用于复选框），第二列具有字符串值。当我使用时`Netbeans`，复选框被添加到第一列的所有行中。我试图只为那些在第二列中具有值的行添加它。我用代码来尝试，

```
private class CustomCellRenderer extends DefaultTableCellRenderer {

  /* (non-Javadoc)
   * @see javax.swing.table.DefaultTableCellRenderer#getTableCellRendererComponent(javax.swing.JTable, java.lang.Object, boolean, boolean, int, int)
   */

        @Override
  public Component  getTableCellRendererComponent(JTable table, Object value,boolean        isSelected, boolean hasFocus, int row, int column) {

    Component rendererComp = super.getTableCellRendererComponent(table, value, isSelected, hasFocus,row, column);

             for(int i=row;i<jTable1.getRowCount();i++){

                if(jTable1.getValueAt(i, 1)==null){
                   jTable1.setValueAt(true, i, 0);
                    //checkbox.setOpaque(false);

                }
            }

        return this ;
  }

 } 
```

如果我尝试为上述 for 循环中的所有其他复选框设置值“true”，它运行良好。如何将其设置为对其余行不可见。

**编辑：**

我在这个添加我的代码

```
 package e2;

    import java.awt.Component;
    import javax.swing.JCheckBox;
    import javax.swing.JTable;
    import javax.swing.table.TableCellRenderer;
    public class JTable_CheckBox extends javax.swing.JFrame {

        /** Creates new form JTable_CheckBox */

        JCheckBox checkbox=new JCheckBox();

        public JTable_CheckBox() {
            initComponents();
               jTable1.setValueAt("John",0,1);
               jTable1.setValueAt("James",1,1);
               jTable1.setValueAt("Janet",2,1);
               jTable1.setValueAt("Tom",3,1);

    jTable1.getColumnModel().getColumn(0).setCellRenderer(new CheckboxCellRenderer());
        }

     public static void main(String args[]) {
            java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                    new JTable_CheckBox().setVisible(true);
                }
            });
        }

        public class CheckboxCellRenderer extends JCheckBox implements TableCellRenderer {

        public CheckboxCellRenderer() {
            setOpaque(false);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
                //here i am trying to set check box invisible,but here i am setting as selected

           for(int i=row;i<table.getRowCount();i++){

                    if(table.getValueAt(i, 1)==null){
                       table.setValueAt(true, i, 0);
                        //checkbox.setOpaque(false);

                    }
                }
            return this;
            }

        }
     // Variables declaration - do not modify
        private javax.swing.JScrollPane jScrollPane1;
        private javax.swing.JTable jTable1;
        // End of variables declaration

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T14:24:32.483

首先，您*必须*了解渲染器/编辑器机制。为此，请阅读[Swing 标签描述](https://stackoverflow.com/tags/swing/info)中引用的在线教程中的相应章节。

其次，为了获得最佳视觉外观，通过重新使用 JTable 本身安装的默认值来实现自定义渲染器，例如：

```
public class CompoundRenderer implements TableCellRenderer {

    TableCellRenderer booleanRenderer;
    TableCellRenderer defaultRenderer;

    public CompoundRenderer(TableCellRenderer booleanRenderer, 
        TableCellRenderer defaultRenderer) {
        this.booleanRenderer = booleanRenderer;
        this.defaultRenderer = defaultRenderer;
    }
    @Override
    public Component getTableCellRendererComponent(..., Object value, ....) {
        if (value instanceof Boolean) {
            return booleanRenderer.getTableCellRendererComponent(...);
        }
        return defaultRenderer.getTableCellRendererComponent(...);
    }
}

// usage
JTable myTable ...
TableCellRenderer compound = new CompoundRenderer(
       myTable.getDefaultRenderer(Boolean.class), myTable.getDefaultRenderer(Object.class));
// either register for all booleans
myTable.setDefaultRenderer(Boolean.class, compound);
// or register for a particular column
myTable.getColumnModel().getColumn(someIndex).setCellRenderer(compound); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:21:23.987

TableCellRenderer 用于表格中，以重用同一组件来绘制表格的各个单元格。表格自动设置适当的上下文、组件边界并`getTableCellRendererComponent`为需要绘制的表格的每个单元格调用重新粉刷）。

因此，在您的 TableCellRenderer 中，您当然不需要遍历表的单元格来尝试设置值。这没有任何意义。请记住，您正在实现`TableCellRender`具有您需要遵守的合同的接口。

来自 Javadoc：

> 返回用于绘制单元格的组件。此方法用于在绘制之前适当地配置渲染器。

因此，您需要做的就是返回一个`value`正确表示参数的组件。可能，您可以修改组件以指示单元格是否具有焦点，以及它当前是否被选中。不多也不少。

现在，来回答您的问题：如果您只想为具有值的行显示复选框，请实现 TableCellRenderer 返回一个复选框并根据第 1 列（第二列）中的值修改其可见性。

这个例子有效：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.FlowLayout;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;

public class TestTable {

    public class CheckboxCellRenderer extends JPanel implements TableCellRenderer {

        private JCheckBox checkBox;

        public CheckboxCellRenderer() {
            super(new FlowLayout(FlowLayout.CENTER, 0, 0));
            setOpaque(false);
            checkBox = new JCheckBox();
            checkBox.setOpaque(false);
            checkBox.setHorizontalAlignment(JCheckBox.CENTER);
            add(checkBox);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Object valueInColumn1 = table.getValueAt(row, 1);
            checkBox.setVisible(valueInColumn1 != null);
            checkBox.setSelected(value instanceof Boolean && (Boolean) value);
            return this;
        }
    }

    private JFrame f;
    private JTable table;

    private class MyObject {
        private PropertyChangeSupport propertyChangeSupport = new PropertyChangeSupport(this);

        private String value;

        private boolean selected;

        public MyObject(String value) {
            this.value = value;
        }

        public PropertyChangeSupport getPropertyChangeSupport() {
            return propertyChangeSupport;
        }

        public String getValue() {
            return value;
        }

        public void setValue(String value) {
            this.value = value;
            propertyChangeSupport.firePropertyChange("value", null, value);
        }

        public boolean isSelected() {
            return selected;
        }

        public void setSelected(boolean selected) {
            if (this.selected != selected) {
                this.selected = selected;
                propertyChangeSupport.firePropertyChange("selected", !selected, selected);
            }
        }

    }

    protected void initUI() {
        List<MyObject> objects = new ArrayList<TestTable.MyObject>();
        for (int i = 0; i < 200; i++) {
            MyObject object = new MyObject(i % 3 == 1 ? null : "Row " + (i + 1));
            objects.add(object);
        }
        table = new JTable(new MyTableModel(objects));
        table.setRowHeight(20);
        table.getColumnModel().getColumn(0).setCellRenderer(new CheckboxCellRenderer());
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new JScrollPane(table), BorderLayout.CENTER);
        f.pack();
        f.setVisible(true);

    }

    public class MyTableModel extends AbstractTableModel implements PropertyChangeListener {

        private List<MyObject> objects;

        public MyTableModel(List<MyObject> objects) {
            super();
            this.objects = objects;
            for (MyObject object : objects) {
                object.getPropertyChangeSupport().addPropertyChangeListener(this);
            }
        }

        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            if (evt.getSource() instanceof MyObject) {
                int index = objects.indexOf(evt.getSource());
                fireTableRowsUpdated(index, index);
            }
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public int getRowCount() {
            return objects.size();
        }

        public MyObject getValueAt(int row) {
            return objects.get(row);
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
            case 0:
                return getValueAt(rowIndex).isSelected();
            case 1:
                return getValueAt(rowIndex).getValue();
            }
            return null;
        }

        @Override
        public void setValueAt(Object value, int rowIndex, int columnIndex) {
            if (columnIndex == 0) {
                getValueAt(rowIndex).setSelected(Boolean.TRUE.equals(value));
            }
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex == 0 && getValueAt(rowIndex).getValue() != null;
        }

        @Override
        public Class<?> getColumnClass(int column) {
            switch (column) {
            case 0:
                return Boolean.class;
            case 1:
                return String.class;
            }
            return Object.class;
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "Selected";
            case 1:
                return "Value";
            }
            return null;
        }

    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

} 
```

PS：我没有考虑 isSelected/hasFocus，如果你愿意，我们可以稍后再谈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-15T15:41:23.937

俗话说：多条路通罗马。

我刚刚遇到了类似的问题，即我有一个表，其中有一列包含复选框，我想隐藏第一行中的复选框。在评估了其他解决方案后，我想出了一些稍微不同的东西（适用于原始问题）：

创建一个特定的 CheckBoxRenderer 类：

```
public class CheckBoxRenderer extends JCheckBox implements TableCellRenderer {

    CheckBoxRenderer() {
      setHorizontalAlignment(JLabel.CENTER);
    }

    public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {

      Object valueInColumn1 = table.getValueAt(row, 1);
      if (valueInColumn1 == null) {
          JLabel x=new JLabel();
          return x;
      } 
      setSelected((value != null && ((Boolean) value).booleanValue()));
      return this;
    }
} 
```

第 2 步：将渲染器附加到 te 列：

```
paramTable.getColumnModel().getColumn(3).setCellRenderer(new CheckBoxRenderer()); 
```

就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T16:35:35.610

我知道这是一个旧线程，但我有类似的需求，发现 sers 的回答很有帮助。我发现我需要添加的一个附加功能是创建一个 CheckBoxEditor。否则，当我单击单元格时，我会看到复选框暂时出现。所以我添加了这样的东西：

```
public class CheckBoxEditor extends DefaultCellEditor
{
   private JCheckBox checkBox = new JCheckBox();

   CheckBoxEditor()
   {
      super( checkBox );
   }

   @Override
   public Component getTableCellEditorComponent(
                       JTable  table,
                       Object  value,
                       boolean isSelected,
                       int     row,
                       int     column )
   {
      if ( row != 1 )
      {
         return super.getTableCellEditorComponent(
                        table, value, isSelected, row, column );
      }
      else
      {
         return null;
      }
   }
} 
```

然后你会做类似的事情：

```
paramTable.getColumnModel().getColumn(3).setCellEditor( new CheckBoxEditor() ); 
```

无论如何，为我工作。

另一个注意事项是，如果您的单元格有背景颜色，您可以通过添加以下行来扩展 sers 答案：

```
x.setOpaque( true );
x.setBackground( MYCOLOR ); 
```

将 JLabel 设置为不透明是关键，这可以在有关类似主题的其他 Stack Exchange 答案中找到。

# jquery - 使用 jquery 从另一个域读取 cookie 值

> ID：11328454
> 
> 赞同：0
> 
> 时间：2012-07-04T11:45:28.003
> 
> 标签：jquery, cookies

我创建了一个应用程序，其中我将 cookie 保存在另一个名为`server1.xyz.com`. 我想使用 jquery 在另一个域的我的站点中读取该 cookie。我该怎么做。我使用了以下代码，但它为 cookie 提供了空值。

```
<script type="text/javascript" src="/js/jquery.cookie.js"></script>
<script type="text/javascript">

alert($.cookie('cronimagename', {
    path: '/',
    domain: 'serverl.xyz.com'
}));
document.getElementsByName('Orders.Custom_Field_Custom1')[0].value = $.cookie('cronimagename', {
    path: '/',
    domain: 'serverl.xyz.com'
});

</script> 
```

# geolocation - 打开街道地图地理定位

> ID：11328459
> 
> 赞同：0
> 
> 时间：2012-07-04T11:45:48.860
> 
> 标签：geolocation, openlayers, openstreetmap

我是新手，我正在互联网上阅读openstreetmap的可能性，还阅读了有关openlayers的信息...首先，我需要的是获取位置并创建相应的地图...我找到了一个很好的例子openlayers，这是代码：

```
<html>
  <head>
    <title>HTML5 geolocation with Openstreetmap and OpenLayers</title>
    <style type="text/css">
      html, body, #basicMap {
          width: 240;
          height: 320;
          margin: 10;
      }
    </style>

    <script src="http://openlayers.org/api/OpenLayers.js"></script>
    <script>
      function init() {
        map = new OpenLayers.Map("basicMap");
        var mapnik = new OpenLayers.Layer.OSM();
        map.addLayer(mapnik);

        navigator.geolocation.getCurrentPosition(function(position) {
            document.getElementById('anzeige').innerHTML="Latitude: " + position.coords.latitude + "   Longitude: " +
            position.coords.longitude + "<p>";
            var lonLat = new OpenLayers.LonLat(position.coords.longitude,
                                    position.coords.latitude)
                      .transform(
                                  new OpenLayers.Projection("EPSG:4326"), //transform from WGS 1984
                                              map.getProjectionObject() //to Spherical Mercator Projection
                                            );

            markers.addMarker(new OpenLayers.Marker(lonLat));

            map.setCenter(lonLat, 14 // Zoom level
            );

        });
        //map = new OpenLayers.Map("basicMap");
        //var mapnik = new OpenLayers.Layer.OSM();
        //map.addLayer(mapnik);
        map.setCenter(new
        OpenLayers.LonLat(3,3) // Center of the map
          .transform(
            new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
            new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection
          ), 15 // Zoom level
         );
        var markers = new OpenLayers.Layer.Markers( "Markers" );
        map.addLayer(markers);

      }
    </script>

  </head>

  <body onload="init();">
<center>
HTML5 geolocation:
<br>
    <div id="basicMap"></div>
<br>HTML5 geolocation<br>
<br>with Openstreetmap and OpenLayers<br>
For Android Froyo,iPhone,iPAD,iPod
<br>
Your position estimated by browser geolocation API:<p>

<div id="anzeige">(will be displayed here)<p></div>
<a href="http://www.dr-bischoff.de">Andreas Bischoff</a>

<br>(view source to see how it works 
</center>
  </body>
</html> 
```

你可以在这里看到一个活生生的例子：[http](http://www.pediaphon.org/~bischoff/location_based_services/) : //www.pediaphon.org/~bischoff/location_based_services/ 下一步，我需要画一条线来显示遵循的规则。这是一个绘制线的实时示例（按 shift + 单击鼠标）： http: [//openlayers.org/dev/examples/draw-feature.html](http://openlayers.org/dev/examples/draw-feature.html)

但我是新手，我迷失了如何调用 openlayers 的 api 以便从起点到目的地画线......欢迎任何帮助

此致。

**编辑：** 我刚刚在标记之前复制了这段代码（[在 OpenLayers 中使用 JavaScript 绘制一条带有一条线的路径](https://stackoverflow.com/questions/2735944/drawing-a-path-with-a-line-in-openlayers-using-javascript)），但我没有看到绘制的线：

```
 var lineLayer = new OpenLayers.Layer.Vector("Line Layer"); 

    map.addLayer(lineLayer);                    
    map.addControl(new OpenLayers.Control.DrawFeature(lineLayer, OpenLayers.Handler.Path));                                     
    var points = new Array(
               /*I put these coords of my city*/
       new OpenLayers.Geometry.Point(-3.7904085, 37.76225609999999 ),
       new OpenLayers.Geometry.Point(-4.7904085, 39.76225609999999 )
    );

    var line = new OpenLayers.Geometry.LineString(points);

    var style = { 
      strokeColor: '#0000ff', 
      strokeOpacity: 0.5,
      strokeWidth: 5
    };

    var lineFeature = new OpenLayers.Feature.Vector(line, null, style);
    lineLayer.addFeatures([lineFeature]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:15:46.557

丹尼尔，

这个问题已经在这里解决了

[使用 OpenLayers 在两点之间画线](https://stackoverflow.com/questions/9765224/draw-line-between-two-points-using-openlayers)

# ruby-on-rails - 如何从父模型类调用 before_save 方法？

> ID：11328460
> 
> 赞同：2
> 
> 时间：2012-07-04T11:45:50.560
> 
> 标签：ruby-on-rails, mongodb, inheritance, model, relation

我有两个模型：

```
class Game
  before_save :update_teacher
    teacher
  end

  def update_teacher
    teacher.update_attribute("something", true)
  end
end

class Puzzle < Game
  belongs_to :teacher
end 
```

我有很多类型的游戏。当任何游戏完成时，我想更新_teacher。

但正如你所见，Game 不属于任何人。它只是我为所有游戏保存所有全局方法的地方。我永远不需要查询`Teacher.games`。相反，我只需要查询`Teacher.puzzles`，或`Teacher.riddles`等等。

正因为如此，当我来到`before_save`方法时，我尝试调用`teacher`，它会失败，因为与 .`teacher`没有关联`game`。

那么我怎样才能让我的全局 Game 类处理这个方法并且仍然引用它的子关联呢？

*还..*

我刚刚意识到这个 before_save 可能实际上不会被调用，因为它不是更新的游戏模型（或者它是？）。如果不是......同样的问题，我如何正确地全球化这个继承的方法？

**或者..**

我承认我的协会可能存在架构缺陷。有人会建议我创建*两个*关联，甚至直接从*一个*. 不知道什么会更好或更坏。`Game``game_type`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:07:28.137

如果每场比赛都有老师，则`belongs_to :teacher`应该在`Game`班级而不是子班级。

当您`before_save`在其中添加 a`Game`并保存 a`Puzzle`时，它会`before_save`从 the中调用，`Game`因为`Puzzle`是游戏，但`Game`不了解`:teacher`.

请更新您的问题，更详细地描述您想要完成的任务，而不是具体情况。

**更新**

你可以做的是有一个在父类上调用并被子类覆盖的方法

```
class A
  before_save :do_x

  def do_x
    raise "Please implement this!"
  end
end

class B < A
   def do_x
     # do what B has to do
   end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:05:13.553

听起来是您游戏类中包含的基础的`Game`一个很好的候选者：[`ActiveSupport::Concern`](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)`Module`

```
# app/models/concerns/game.rb
require 'active_support/concern'

module Game
  extend ActiveSupport::Concern

  included do
    belongs_to :teacher
    before_save :update_teacher
  end

  module InstanceMethods
    def update_teacher
      teacher.update_attribute("something", true)
    end
  end
end

# app/models/puzzle.rb
class Puzzle
  include Game
end 
```

这种方式`belong_to`和`before_save`被发送到`Puzzle`何时`Game`被包括在内。

# dll - 什么是 *.dll.s 文件，它们的用途是什么？

> ID：11328461
> 
> 赞同：2
> 
> 时间：2012-07-04T11:45:50.747
> 
> 标签：dll, assembly, mono, unity3d, file-format

我目前正在使用 Unity 框架开发一个 iOS 项目。

当我从 Unity 导出 Xcode 项目时，会导出一大堆文件。除了一些源文件，还有 Mono 项目的 .dll 文件。

但也有**.dll.s**文件。对于故障排除，很高兴知道它们的用途。每个 dll都有一个**.dll.s**文件，所以它可能是某种编译成 dll 的源代码？

当代码中的某个地方出现异常时，Xcode 经常会跳转到其中一个 .dll.s 文件中，并且看起来好像它们包含某种汇编代码。

方向会很好，谷歌在这里并没有真正的帮助......

TIA,

最好的祝福，

弗洛

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:03:22.900

它们是编译成 arm 程序集的 dll 文件中的 IL 代码。这是最终出现在最终应用程序二进制文件中的代码。

# php - 在位于子目录的页面中获取 drupal 用户 ID

> ID：11328462
> 
> 赞同：2
> 
> 时间：2012-07-04T11:45:54.960
> 
> 标签：php, session, drupal, drupal-7

我读过[这篇文章。](https://stackoverflow.com/questions/1056491/drupal-session-user-id-for-independent-script)

Drupal 安装在我的本地机器上并且工作正常。我在 drupal 安装的目录中创建了一个静态页面。喜欢`http://localhost/usertest/userts.php`

如果页面移动到`root`目录它可以工作，但是当我将页面移动到`usertest`或任何其他目录时它不起作用。

**目录结构：**
`root` - 包含所有drupal 文件的drupal 安装目录，包括`includes, modules, sites`等。
`usertest`- 根目录的子目录。

**代码：**
我的`userts.php`页面包含的是：

```
<?php 
$currdir=getcwd();
chdir($_SERVER['DOCUMENT_ROOT']);
require_once("./includes/bootstrap.inc");
drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION);
global $user;
chdir($currdir);

?>
<p>USER VAR :</p>
<?php print_r( $user ); ?> 
```

**输出：** 虽然我登录了，但输出是作为匿名用户给出的：

```
USER VAR :
stdClass Object ( [uid] => 0 [hostname] => 127.0.0.1 [roles] => Array ( [1] => anonymous user ) [session] => [cache] => 0 ) 
```

但是，如果我删除`chdir`部分并将文件移动到`root`目录并访问它，`http://localhost/userts.php`那么它会给我当前的用户对象输出。

我无法弄清楚我在这里错过了什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:03:31.117

你需要定义`DRUPAL_ROOT`

```
define('DRUPAL_ROOT', $_SERVER['DOCUMENT_ROOT']);
require_once($_SERVER['DOCUMENT_ROOT'] . "/includes/bootstrap.inc");
drupal_bootstrap(DRUPAL_BOOTSTRAP_SESSION); 
```

**编辑：//**

我自己很快就玩过这个，会话将无法正确加载您的用户属性，因为`$base_url`

在初始化 DRUPAL_BOOTSTRAP 之前，您可以使用此代码解决此问题

```
global $base_url;
// Assuming your drupal installation lives in the DOCUMENT_ROOT
//  -- Which yours does
$base_url = (array_key_exists('HTTPS', $_SERVER) ? 'https://' : http://') . $_SERVER['HTTP_HOST']; 
```

# asp.net-mvc-3 - 在 asp.net 中不使用第三方 dll 创建 word 文档（docx）

> ID：11328469
> 
> 赞同：1
> 
> 时间：2012-07-04T11:46:17.180
> 
> 标签：asp.net-mvc-3, pdf, docx

我有 mvc 页面。我有字母类型的页面（cshtml），将从模态中填充数据。一旦我单击此页面上的确定按钮。它应该创建一个word文档或这封信的pdf文件，我需要将此路径存储在数据库中（我不应该使用任何第三方DLL :(）你们能帮我解决这个问题吗？

谢谢，萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:05:17.997

如果您不将 Microsoft 视为第三方，请尝试：

[http://msdn.microsoft.com/en-us/library/bb448854.aspx](http://msdn.microsoft.com/en-us/library/bb448854.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:26:20.177

请说明您认为什么是第三方？如果您不能添加库，那么您将别无选择，只能自己创建一个 PDF 写作库，这不是一件容易的事。为了处理 Word 文档，您可以使用 Microsoft 提供的 Interop 类，但它们最初并不是为此而构建的。如果您可以使用互操作，请查看本[教程](http://nishantrana.wordpress.com/2007/11/03/creating-word-document-using-c/)和[本教程](http://windowsdevcenter.com/pub/a/windows/2006/04/18/programming-word-from-net.html?page=1)

# sql-server - 最佳实践：从 SQL Server 呈现一些数据（制作报告）

> ID：11328485
> 
> 赞同：0
> 
> 时间：2012-07-04T11:47:21.660
> 
> 标签：sql-server

我有许多 SQL Server 数据库，每个数据库都有一些包含重要（从我的角度来看）信息的表。我使用 T-SQL 查询检查这些表中的数据（例如检索最大值或最小值）。

由于我不想为每个数据库创建*视图*，我正在考虑最方便、更简单、最简单的方法来准备摘要，每次打开时都会更新。

输出文件（或网页）将在技术团队内部使用。所有成员都可以使用 Windows 身份验证登录数据库。

我的想法是：

1.  Excel + 动态 T-SQL --> 我要连接数据库并执行 T-SQL（光标将遍历所有数据库名称）

2.  PowerShell（使用 Out-GridView cmdlet 显示表格）

3.  PHP - 首先我会询问所有数据库名称（执行`select name from`sys.databases` 然后为每个数据库执行查询）

你认为最好的方法是什么？您是否有更好的（从程序员的角度）获取此类报告/数据的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:59:54.233

您可以使用 SSRS 报告。您可以选择将报告数据导出为多种格式，例如 pdf、excel、word。您可以为所有数据库创建数据集。由于您对显示值的聚合和总和感兴趣，SSRS 报告在这些情况下会非常有用。

# sql - 根据非唯一列中的唯一值获取完整行

> ID：11328488
> 
> 赞同：1
> 
> 时间：2012-07-04T11:47:42.033
> 
> 标签：sql, sql-server

我在 SQLServer 中有一个数据库，其中有一个名为 emp_details 的数据库的多行。该表包含几个字段，其中之一是薪水。员工的薪水不是唯一的，我需要为每个唯一的薪水值获取一个完整的行。

请让我知道可能有帮助的查询。

数据库示例：

```
a   b       c   d       e   f

17  IL11    53  IL11    48  58
26  IL10    53  IL10    48  58
31  IL15    53  IL15    48  58
32  IL16    53  IL16    24  58
33  IL17    53  IL17    36  58
34  IL18    53  IL18    36  58
37  IL21    53  IL21    36  58
40  IL24    53  IL24    48  58 
```

我想在 e 列上过滤它（假设它是工资字段）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:11:27.567

由于没有架构，因此不确定这是否具有更好的性能。但这应该有效。

```
WITH Emp_Salary
AS
(
    SELECT 
        Column1
        , Column2
        , Salary
        , ROW_NUMBER() OVER (PARTITION BY Salary ORDER BY Column1) r  --numbers each row uniquely per salary
        FROM emp_details
)
SELECT
    Column1
    , Column2
    , Salary
FROM Emp_Salary
WHERE r = 1 -- Filters all but the first row per salary.
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:15:46.593

```
SELECT
    *
FROM
    emp_details
WHERE
    Salary IN(
              SELECT
                  Salary
              FROM
                  emp_details
              GROUP BY  
                   Salary
              HAVING
                    COUNT(*) = 1
              ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T11:50:10.820

`select distinct salary from emp_details`会给你一系列的薪水值。

要获得其他行......你想如何选择你想要的行？

如果你有一个 ID 的 PK 你可以做

`select * from emp_details where id in ( select Max(id),Salary from emp_details group by salary )`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:54:42.413

如果您的内部查询将返回许多行，则不应使用 IN 运算符。另外，count(*) 会比 count(id) 慢很多。

这个可能更快：

```
SELECT emp.*
  FROM emp_details emp
    WHERE exists (SELECT a 
                    from emp_details
                    where e = emp.e
                    group by e
                      having count(a) = 1
                 ); 
```

# html - 无序列表项的文本对齐

> ID：11328489
> 
> 赞同：10
> 
> 时间：2012-07-04T11:47:46.163
> 
> 标签：html, css, html-lists, text-alignment

我想知道是否有任何方法可以使无序列表项的文本在标准圆盘/点列表项图标旁边显示为“列”？做了一对截图：

这是在列表项 (li) 中使用带有一些文本的标准无序列表时的外观：

![在此处输入图像描述](../Images/b6e6f1dcbb5eefaf6247d29f808feaf5.png)

这就是我希望它看起来的样子：

![在此处输入图像描述](../Images/3eb041f36d3b49aa2f6d21519ec5370f.png)

这可能没有任何图像/ div hacks吗？;-) 我四处搜索，看看是否有任何标准的 CSS 设置，但我似乎找不到任何东西。

提前非常感谢！

祝一切顺利，

博

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-18T09:24:51.297

`list-style-position`是您正在寻找的财产。它适用于所有浏览器。（有关详细信息，请参阅[MDN ）](https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-position)

```
ul {
   list-style-position: outside;
   /* You may want to add an additional padding-left: */
   padding-left: 1.5em;
} 
```

但实际上`outside`它是默认值。您可能会在其他地方覆盖它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T11:58:28.517

您可以像这样简单地编写代码：

**HTML**

```
 <ul>
    <li>Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello </li>
    <li>Hello</li>
    <li>Hello</li>
    <li>Hello</li>
    <li>Hello</li>
    <li>Hello</li>
    <li>Hello</li>
  </ul> 
```

**CSS**

```
ul{
  margin:0;
  padding:0 20px;
} 
ul li    {
  padding:0;
  width:150px;
  background:red;
  margin:10px 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T14:31:13.707

我认为左侧的浮动列表项是使它们显示为列的最佳解决方案。

此 CSS 代码可以帮助您：

```
<style type="text/css">
    ul > li {
        margin: 0 10px;
        width: 150px;
        float: left;
    }
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T09:47:05.823

在 <ul> 标签下使用带有 open(<li>) 和 closed(</li>) 标签的文本环绕就足够了。

例如，

```
<ul>
    <li>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </li>
    <li>This is list item - 2</li>
    <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</li>
    <li>This is list item - 4</li>
</ul> 
```

输出将是，

*   Lorem ipsum dolor sit amet，consectetur adipiscing elit，sed do eiusmod tempor incididunt ut labore et dolore magna aliqua。Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat。
*   这是列表项 - 2
*   Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur。Exceptioneur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est labourum
*   这是列表项 - 4

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-04T11:55:23.733

添加这个

```
ul {
  display:inline-block;
} 
```

到你的 CSS 代码。

# entity-framework - 实体框架 - 一个实体属性链接到两个表列

> ID：11328494
> 
> 赞同：0
> 
> 时间：2012-07-04T11:48:23.873
> 
> 标签：entity-framework

我们的问题域具有以下表结构 -

1.  Questionnaire - QuestionnaireID（主键）、QuestionID

2.  问题 = QuestionID、Description 和其他 12 个属性。

3.  QuestionGroup = QuestionGroupID、Description 和 5 个其他属性。

Questionnaire 表的 QuestionID 与 Question 和 QuestionGroup 表相关。

* * *

现在有了实体框架，我有了共同的结构

1.  Questionnaire - QuestionnaireID（主键）、QuestionID、QuestionDetails（QuestionBase 类型的导航属性）。

2.  QuestionBase（Question 和 QuestioGroup 的父类）

3.  问题

4.  问题组

我如何将它们映射在一起，以便 Questionnaire 的 QuestionDetails 属性将包含来自 Question 或 QuestionGroup 使用实体框架代码优先的值。

没有更改数据库的选项，因为它已经存在，使用 EF 新版本没有问题。

是否可以这样做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:59:18.883

如果您无法更改数据库，则根本无法映射`QuestionDetails`导航属性和相关的`QuestionId`外键属性，因为您不能拥有针对两个相关表的单个导航属性。仅当`QuestionBase`实体也具有相关表并且将其映射为 TPT 继承时，它才会起作用。`Question`此外，两个表中的主键列`QuestionGroup`必须具有相同的名称。

我怀疑您对`QuestionID`in`Questionnaire`表有引用约束（同时满足`Question`and的关系`QuestionGroup`）。这是第一个危险信号，它应该告诉您您将无法映射它。

# iphone - iPhone 上 UIBarButtonItems 之间的默认空间

> ID：11328497
> 
> 赞同：4
> 
> 时间：2012-07-04T11:48:40.977
> 
> 标签：iphone, ios, uinavigationbar, uibarbuttonitem

我有一个`UINavigationBar`我放`UIBarButtonItems`的。iPhone 默认在按钮项之间放置 10 个空格。我想知道这个空间是什么变量？更清楚地说 - 我想知道可以让我`UIBarButtonItems`在我的`UINavigationBar`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:41:01.503

在 iOS 6 以下的任何版本的 SDK 中，在 toolBar 或 navBar 上执行此操作的已发布方法是通过类似这样的方法。

```
b = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]; 
```

您使用 UIBarButtonSystemItemFlexibleSpace 样式属性来添加一个虚拟按钮。您无法控制特定尺寸，系统会为您分配空间。在大多数情况下工作得很好。

或者，如果您需要更精确的控制，您必须创建一个自定义按钮。

因此，您现在可以使用上述方法之一，如果您不熟悉，我建议您尝试使用 FlexibleSpace 选项。

或者你可以等待 iOS 6，那个版本的 SDK 有一些其他的方法来做你想做的事，但在发布之前我们处于 NDA 之下。您可以登录 iPhone 开发者门户自行查找文档，也可以等到 iOS 6 发布。

# catalyst - 催化剂中的超链接表

> ID：11328501
> 
> 赞同：1
> 
> 时间：2012-07-04T11:49:11.097
> 
> 标签：catalyst, template-toolkit

我有一个在 Catalyst MVC 框架中开发的网页。我正在为我的视图使用模板工具包。我的一个网页中有两个表格。我想将一个表超链接到另一个表，并使用 ajax 在新选项卡或同一页面中打开另一个表（即链接表）。

我对 Catalyst 和 Template Toolkit 非常陌生。我恳请您帮助我了解如何使之成为可能？是否可以在模板中调用模板？如果是这样，我该如何实现？

我将不胜感激接受除上述之外的任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:42:16.207

Template Toolkit 和 Ajax 不会自然而然地结合在一起。Template Toolkit 是一种服务器端技术，而 Ajax 是 JavaScript 和称为 XMLHttpRequest 的 Web 浏览器 API 的混合体。

Catalyst 可以通过返回已编译的模板来响应 Ajax 请求`.tt`。Template Toolkit 不关心 Catalyst 正在做什么。

神奇之处在于 Catalyst、Template Toolkit 和 Ajax 的组合。通常这是完成的，就像你的情况一样，一个链接`#table1`订阅了一个 fetches 的 JavaScript 事件`#table2`。`#table2`可以是一个 Catalyst 操作 ( `/my_app/tables/2`)，它存储数据并编译一个`.tt`-template。

外面`#table1`我们有一个`#table_wrapper`.

```
# jQuery
$('#table1 .next').click(function () {
    $('#table_wrapper').load('/my_app/tables/2');
}); 
```

你能理解这个吗？如果您需要更多输入，我可以跟进。

# ruby-on-rails - 安装导轨 3

> ID：11328507
> 
> 赞同：0
> 
> 时间：2012-07-04T11:49:30.093
> 
> 标签：ruby-on-rails, linux, ubuntu, ruby-debug, linecache

如果有人能解释一下这是什么意思，我将不胜感激：

```
ror@ubuntu:$ sudo gem install linecache19 -v '0.5.12'
ERROR:  Error installing linecache19:
    linecache19 requires Ruby version >= 1.9.2.
ror@ubuntu:$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

据我了解 1.9.3 >= 1.9.2 ？我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:02:32.880

您以 sudo 身份运行 gem install 命令，但`ruby -v`以您自己的用户身份运行。如果您使用`sudo ruby -v`，您可能会获得`ruby 1.8.7`该版本。

如建议的那样，使用`rvm`sudo 并且永远不要再次安装 gems。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:01:05.147

正如@Daniel 指出的那样，只需尝试 RVM，甚至更简单，只需使用以下内容： [https ://github.com/joshfng/railsready](https://github.com/joshfng/railsready)

这会自动在您的 ubuntu 机器上安装 Rails：

```
wget --no-check-certificate https://raw.github.com/joshfng/railsready/master/railsready.sh && bash railsready.sh 
```

# web-services - 在没有 RAD 的情况下生成 ibm-webservices-ext.xmi 和 ibm-webservices-bnd.xmi

> ID：11328509
> 
> 赞同：0
> 
> 时间：2012-07-04T11:49:37.323
> 
> 标签：web-services, maven, build, websphere, ibm-rad

我正在为 WebSphere 开发 Web 服务，我希望不再依赖于 Rational Software Delipvery Platform（又名 RAD）IDE。

我在问是否有人知道是否可以生成以下文件：

*   ibm-webservices-ext.xmi
*   ibm-webservices-bnd.xmi
*   网络服务.xml

无需使用 RAD（例如一些 ant 脚本或 WebSphere 批处理）。

这是一个非常烦人的锁定。

我正在尝试将这些 webservices 项目移植到更可控的开发过程中，使用 maven、自动构建等，但我发现这非常困难。

有人解决过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T15:02:36.783

如果有人仍在寻求这方面的帮助，我们采取了一种稍微不同的方法，即在项目创建时创建 RAD 和 WAS 8.5 特定文件。

对于我当前的项目，我们有一个相当标准的项目结构和命名约定，因此我们使用 Maven 原型来创建我们的项目并将那些 IBM 特定文件，特别是 ibm-webservices-bnd.xmi 包含在 Maven 原型中。

最简单的方法是获取具有这些必要文件的现有项目，并使用`create-from-project`项目文件夹中的原型：

```
mvn clean archetype:create-from-project -Dinteractive=true 
```

使用交互模式给原型一个合理的`archetype.artifactId`（但不要改变项目的 GAV）：

```
Define value for archetype.groupId:  com.name.archgroup: : com.name.common.archetype
Define value for archetype.artifactId:  MyService-archetype: : service-archetype-0.8
Define value for archetype.version:  1.0-SNAPSHOT: :
Define value for groupId:  com.name.archgroup: :
Define value for artifactId:  MyService: :
Define value for version:  1.0-SNAPSHOT: :
Define value for package:  com.name: : com.name.common.archetype 
```

这可以帮助您完成大部分工作，但默认情况下不会处理 IBM 文件。然后，诀窍是修改 /MyService/target/generated-sources/archetype/target/classes/archetype-resources 中生成的目标文件以同时修改 IBM 文件。将旧项目名称和包名称的实例替换为`${rootArtifactId}`并`${groupId}`跟踪哪些文件具有不正确的值。

然后修改 /MyService/target/generated-sources/archetype/target/classes/META-INF/maven/archetype-metadata.xml 以包含您必须在过滤中手动更改的文件。例如，在我的 EJB 模块部分下，*.xmi 已包含但未过滤。将包含移动到过滤的文件集：

```
 <fileSet filtered="true" encoding="UTF-8">
      <directory>src/main/resources</directory>
      <includes>
        <include>**/*.xml</include>
        <include>**/*.properties</include>
        <include>**/*.xmi</include>
      </includes>
    </fileSet> 
```

您需要对您修改的所有内容执行此操作以包含 a `${rootArtifactId}`or`${groupId}`以便velocity 在下一步中对其进行处理：

```
cd target\generated-sources\archetype
mvn install 
```

这会将您的更改打包并将 jar 放入本地存储库，以便您可以在发布到 Maven 存储库服务器之前对其进行测试。

满意后，将 maven 存储库添加到 target/generated-sources/archetype/pom.xml 并运行

```
mvn deploy 
```

并指导开发人员开始使用原型来创建您的 mavenized 项目。

注意：我们的 ibm-webservices-bnd.xmi 文件似乎包含类似`xmi:id="RouterModule_112345678901234"` We remove this value before the 的`mvn install`内容，因为它似乎是项目特定的。

# c++ - FFmpeg 在 Mpeg4 流中寻找

> ID：11328511
> 
> 赞同：0
> 
> 时间：2012-07-04T11:49:50.847
> 
> 标签：c++, encoding, ffmpeg, decode, mpeg-4

我目前正在尝试开发一种可以基于 mpeg4 基本视频流执行准确搜索的播放器。我正处于计划阶段并试图决定如何去做，在我开始之前我想要一些建议。需要注意的一些事项是：

*   我将完全控制文件的编码。
*   原始内容将仅是 I 帧
*   FFmpeg 是编码/解码库
*   现在可以忽略音频。我只会处理视频流。
*   必须执行帧精确搜索

因此，当我对内容进行编码时，是否可以查询已编码的帧类型（I、P、B），以便为查找操作构建额外的索引流。如果没有，我可以在 GOP 编码后查询它以找到 I 帧。

至于播放，用户需要能够输入特定时间并转到该帧（最近的 I 帧现在适合）。我们可以假设 GOP 是封闭的并且长度相当短（例如 15 帧）。我的想法是查询我在编码期间创建的索引流，并确定在请求的时间内进入流的相关距离。

我不确定在播放文件时如何使用 FFMpeg 库。

有没有人做过类似的事情，如果有，你能简要解释一下你是如何做到的吗？

# c# - 为主报表中的每个参数重复子报表

> ID：11328513
> 
> 赞同：0
> 
> 时间：2012-07-04T11:49:55.477
> 
> 标签：c#, crystal-reports-2008, subreport

我正在使用用于 Visual Studio 2008 的水晶报表，我想动态显示子报表的数量，即取决于主报表输出，将生成子报表，所有子报表都包含相同的列和行，只有数据不同。例如，我的主要报告的输出就像主要报告

## 不。城市

```
 3 
```

子报告 1

## 城市1

姓名 | 密度

页脚子报表1

子报告 2

## 城市2

姓名 | 密度

页脚子报表2

分报告 3

## 城市3

姓名 | 密度

页脚子报表3

页脚主报告

![在此处输入图像描述](../Images/016c56a369661554d2bc0ba37519603d.png)

这可以使用分组城市名称来实现，但我的问题是我们可以动态生成子报告的数量。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:17:21.047

为此，您应该将城市名称/id 移动到主报告并创建一个子报告以仅显示详细信息，这将使用传递给子报告的城市名称/id 来获取。您的子报告应放在详细信息部分，因此您将能够以您提到的格式生成报告

# firefox - Firefox 将表格内容向上推一像素

> ID：11328514
> 
> 赞同：0
> 
> 时间：2012-07-04T11:49:58.107
> 
> 标签：firefox, push, pixel

我正在为这个可能非常简单的问题拉头发..

我刚刚为一家 iphone 维修公司建了一个网站： [http ://www.cellcity.co.nz/](http://www.cellcity.co.nz/)

当在 google chrome 和 safari 上查看时，该网站显示没有任何问题，当在 Internet Explorer 上查看时，我只显示移动优化版本，而我正在解决它的问题。

但在 Firefox 上，我所有的元素都被推高了一个像素。我在 div 中的表格中拥有所有内容，快速查看我的源代码或请求显示一些代码。我不明白可能出了什么问题，我使用的是边框折叠 css 样式，也许这可能是一个促成因素？

在此先感谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T21:58:27.917

好的，我发现对于每个 css 类和 id，您都可以制作一个独立于 firefox 的，只有 firefox 才能看到的。只需将 @-moz-document url-prefix() {.....} 放在您的 css 类的第二个版本周围，firefox 将覆盖旧版本 =D

希望这对其他人有帮助！

# c# - Nuget 包在文件夹命名中排除版本

> ID：11328516
> 
> 赞同：9
> 
> 时间：2012-07-04T11:50:05.900
> 
> 标签：c#, git, teamcity, nuget

目前我有一个项目，其中包含根据不同版本号放置在文件夹中的 nuget 包

示例包/EntityFramework.4.1.10331.0/..

有没有办法更新软件包并重命名文件夹以排除版本号，即上面我们有 packages/EntityFramework/

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-20T10:21:45.327

是[http://docs.nuget.org/docs/reference/command-line-reference](http://docs.nuget.org/docs/reference/command-line-reference)

> ExcludeVersion 如果设置，目标文件夹将只包含包名，不包含版本号

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T17:17:41.997

目前，NuGet 不支持安装没有版本号的包。有一个工作项在这里跟踪：[问题 #1522](http://nuget.codeplex.com/workitem/1522)。请评论/投票以提高优先级。

帮助解决许多相关方案的一种方法是启用[NuGet 包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。

# php - PHP If/Else 语句不起作用。只需遵循“IF”行

> ID：11328521
> 
> 赞同：0
> 
> 时间：2012-07-04T11:50:17.783
> 
> 标签：php, string, if-statement

看起来很简单，我不知道为什么这不起作用。

我有一个带有几个下拉选择的表单，如果 $message_type 等于其他，则消息仅由 $details 中的详细信息构成。

如果 $message_type 是其他任何东西，它应该将一条消息串在一起。

正在传递变量，并检查了使用 echo 传递到页面的正是“其他”，因此没有拼写错误。

目前，无论消息类型如何，它始终只是将消息创建为 $details，并且如果它不等于“Other”，则不会跟随“else”行。

```
 if ($message_type = 'Other'){$message = $details;
}
    else {$message = "Action to do: ".$message_type." On ".$user." Extra Details: ".$details;
} 
```

任何帮助，因为这现在真的让我感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:51:38.767

```
if ($message_type == 'Other')
{
    $message = $details;
}
else
{
    $message = "Action to do: ".$message_type." On ".$user." Extra Details: ".$details;
} 
```

`$message_type = 'Other'`永远是真的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:01:35.470

*其他答案已经解释了您做错了什么*，但是“为什么”会发生这种情况？这很简单：`=`赋值运算符和 PHP（以及许多（所有？）语言）中的任何其他运算符一样，运算符有一个 retun 值，在这种情况下就是赋值的值。PHP 现在将其转换为布尔值，因此它是`true`

```
if ($message_type = 'Other'){ /* .. */}
if ('Other'){ /* .. */}
if (true){ /* .. */} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:51:46.473

你需要两个等号

```
if ($message_type == 'Other') {
-------------------^
    $message = $details;
} else {
     $message = "Action to do: ".$message_type." On ".$user." Extra Details: ".$details;
} 
```

一个等号是赋值运算符，所以你说的是“$message_type 等于 'Other'”而不是“如果 $message_type 等于 'Other'”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T11:52:25.227

```
if ($message_type = 'Other'){$message = $details;
}
    else {$message = "Action to do: ".$message_type." On ".$user." Extra Details: ".$details;
} 
```

你有`if ($message_type = 'Other')` 你应该有`if ($mesage_type == 'Other')`

我想这只是写错了，所以我不会告诉你有什么不同:)

# php - 如何在 wordpress 页面模板中隐藏 iframe 的元素

> ID：11328529
> 
> 赞同：0
> 
> 时间：2012-07-04T11:50:56.397
> 
> 标签：php, javascript, jquery, css, wordpress

我在 wordpress 页面模板中显示 iframe。在 iframe src 中，我已经传递了外部站点 url。问题是我无法隐藏 iframe 中的注销链接。我试过下面提到的代码： -

```
frame = document.getElementById("toolkit-iframe");
frame.document.getElementById("top-nav-links").style.display='none';

OR 

frame = document.getElementById("toolkit-iframe");
frame.contentDocument.getElementById("top-nav-links").style.display='none'; 
```

我没有成功隐藏注销链接。任何人都可以帮助我。我将非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:59:02.600

没有直接的方法来操纵 iframe 的内容，由于安全问题，它没有托管在您的域中。

但是，您的问题有一个“hacky”解决方法：

将您的 iframe 放在容器 div 中。Div 获得相对定位。在容器中放置另一个 div 并将其设置为绝对定位，并且可能是正的 z-index。根据logoutlink的大小和位置设置这个隐藏div的宽高和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:21:59.820

即使在 iframe 中，您也不能将 javascript 注入到另一个域的页面中。

# jquery-mobile - 可以在弹出对话框中使用 iscroll 吗？

> ID：11328530
> 
> 赞同：0
> 
> 时间：2012-07-04T11:50:56.633
> 
> 标签：jquery-mobile, popup, iscroll

我正在为移动应用程序工作。我正在显示带有内容的弹出窗口，如果内容太长我觉得要使用滚动。可以在弹出对话框中使用 iscroll 吗？

```
$('#checkout').click(function() {
        var jqxhr = $.post("/app/Trip/checkout", {
            }, function(missing_info) {
                $('#checkout').simpledialog( {
                    'mode': 'blank',
                    'prompt': false,
                    'forceInput': false,
                    'useModal': true,
                    'fullHTML': missing_info
                })
            });
    }); 
```

我正在弹出内容，但不知道如何在对话框中实现 iscroll。isroll for normal div 对我来说很好。这个弹出窗口是 jQuery 移动简单对话框。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:31:16.033

是的，当然您可以将 iscroll 用于弹出 div，但该弹出窗口应嵌套在应为主体的直接子级的父级下。不为父级设置样式，然后在添加内容后获取弹出窗口的 id 并设置 iscroll。var tempscroll; tempscroll = new iScroll('id_of_popup'); 那是

# iphone - 如何从其他视图更改 MutableArray？

> ID：11328531
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:50:57.697
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios4

在我的应用程序中，

有两个不同的视图**ItemList**和**ItemSearch**。

在 ItemList 文件中，我有一个`NsMutableArray`name `tblItem`。我想`tblitem`从`Itemsearch`页面传入数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:55:58.407

您可以按如下方式使用属性：

1.在tblItem的ItemList.h中创建一个属性为，

```
@property(nonatomic, retain) NSMutableArray *tblItem; 
```

然后在ItemList.m中合成，

```
@synthesize tblItem; 
```

当您从 ItemSearch 导航到 ItemList 时，即当您初始化 ItemList 时，只需提供 tblItem 所需的值，

```
ItemListObj.tblItem = theSearchedArray; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:08:22.170

将 NSMutableArray 声明为 SecondViewController 中的属性，并在您从 FirstViewController 推送或呈现 SecondViewController 时分配数组。

```
@interface SecondViewController : UIViewController
{
    NSMutableArray    *aryFromFirstViewController;
}

@property (nonatomic,retain) NSMutableArray  *aryFromFirstViewController;

@end 
```

在实现时，综合属性

```
@implementation SecondViewController

@synthesize aryFromFirstViewController;

@end 
```

在 FirstViewController 的头部导入 SecondViewController

```
#import "SecondViewController.h" 
```

在实现 FirstViewController 时，在编写代码的地方添加如下代码以呈现或推送 SecondViewController

```
@implementation FirstViewController

- (void) functionForPushingTheSecondViewController
{
     SecondViewController *objSecondViewController = [[SecondViewController alloc] initWithNIBName: @"SecondViewController" bundle: nil];
     objSecondViewController.aryFromFirstViewController = self.myAryToPass;
     [self.navigationController pushViewController:objSecondViewController animated: YES];
     [objSecondViewController release];
}

@end 
```

请不要忘记释放 SecondViewController 的`aryFromFirstViewController`at`dealloc`方法，否则会因为我们保留它而泄漏。如果我知道这在某种程度上对您有所帮助，我会感觉很好。享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:01:24.680

这取决于您的需要。您可以使用 Singleton 类在不同类之间共享变量。定义您希望在 DataClass 中共享的所有变量。

在 .h 文件中（其中 RootViewController 是我的 DataClass，用您的新类替换名称）

```
+(RootViewController*)sharedFirstViewController; 
```

在 .m 文件中

```
//make the class singleton:-    
+(RootViewController*)sharedFirstViewController    
{    
@synchronized([RootViewController class])
 {
    if (!_sharedFirstViewController)
        [[self alloc] init];

    return _sharedFirstViewController;
}

return nil;
}

+(id)alloc
{
@synchronized([RootViewController class])
{
    NSAssert(_sharedFirstViewController == nil, 
             @"Attempted to allocate a second instance of a singleton.");
    _sharedFirstViewController = [super alloc];
    return _sharedFirstViewController; 
}
return nil;
}

-(id)init {
self = [super init];
if (self != nil) {
    // initialize stuff here
}
return self;
} 
```

之后，您可以在像这样的任何其他类中使用您的变量

```
[RootViewController sharedFirstViewController].variable 
```

希望对你有帮助:)

# bash - 将标签插入到 xml 中的 shell 脚本？

> ID：11328536
> 
> 赞同：2
> 
> 时间：2012-07-04T11:51:06.817
> 
> 标签：bash, shell

我有一个xml

```
<Data>  

<employee>
  <name>emp1</name>
  <id>1</id>
</employee>

</Data> 
```

假设我有模板，我在其中更改值并添加到以前的 xml

```
<employee>
 <name>##name##</name> 
 <id>##empid##</id>
<employee> 
```

我用 ##name## 和 ##empid## 替换原始值并放入原始 xml **name=emp2 eid=2** 所以之后它会是

```
<Data>  
<employee>
  <name>emp1</name>
  <id>1</id>
</employee>
<employee>
  <name>emp2</name>
  <id>2</id>
</employee> 

</Data> 
```

我尝试让行号插入标签

```
line=$(cat  data.xml | grep -n '</Data>' | grep -o '^[0-9]*') 
```

和

尝试使用将文本放入原始 xml

```
sed $line\ i\<text to be insert in original xml> 
```

但它给出了一些关于 xml 内容的错误，帮助将被应用，因为我是 shell 脚本的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:02:02.003

您可以使用`xmlstarlet`来更新您的`template.xml`（格式错误）

```
$ cat template.xml 
<employee>
 <name>##name##</name> 
 <id>##empid##</id>
</employee>

$ xmlstarlet ed -u //name -v emp2 -u //id -v 2 template.xml 
<?xml version="1.0"?>
<employee>
  <name>emp2</name>
  <id>2</id>
</employee> 
```

# c# - OnRender() 方法中的 DrawGeometry()

> ID：11328537
> 
> 赞同：0
> 
> 时间：2012-07-04T11:51:08.503
> 
> 标签：c#, wpf, user-controls, render, visualbrush

我有一个覆盖 OnRender-Method 的 UserControl，如下所示：

我的用户控件.cs：

```
MyUserControl: UserControl
{
    protected override void OnRender(DrawingContext dc)
    {
       dc.DrawRectangle(Brushes.White, new Pen(Brushes.Black,1), new Rect(0,10,50,30));

       var visualBrush = new VisualBrush(new UserControl1{Height=30, Width=50});           
       dc.DrawGeometry(visualBrush, null, new RectangleGeometry(new Rect(50,10,50,30)));           
    }
} 
```

上面使用的 UserControl 看起来像这样（在 xaml 中定义，没有额外的代码隐藏代码）：

```
<UserControl x:Class="VisualBrushExample.UserControl1" ...>
<Grid>
   <Border BorderThickness="1" BorderBrush="Black" Background="White" CornerRadius=8,0,0,8"/>
</Grid>
</UserControl> 
```

现在，如果我使用 MyUserControl，我会得到以下输出：

![使用 MyUserControl 创建的输出示例](../Images/37c5819a5eca5761f8e882398ef02913.png)

我现在的问题是，如果有一种方法可以在 OnRender() 方法中使用 UserControl1，而不需要在 UserControl1-Rectangle 周围设置透明边框。

提前致谢， rhe1980

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:33:34.690

您看到不同大小的矩形的原因很简单。当您使用 Pen 绘制矩形时，Pen 线位于矩形边缘的中心，或者换句话说，边缘位于线条的中间。因此，笔宽的一半在每个方向上位于矩形之外。因此，您必须在矩形的宽度和高度上添加一个 Pen 宽度才能获得绘图输出的总大小，在您的示例中为 51 x 31。

您也许可以通过[Geometry.GetRenderBounds](http://msdn.microsoft.com/en-us/library/ms615687.aspx)方法检查这一点。

# java - Jave SQL executeQuery 为有效的 sql 语句抛出错误

> ID：11328549
> 
> 赞同：1
> 
> 时间：2012-07-04T11:51:44.667
> 
> 标签：java, sqlite

我正在使用 java java.sql.* 从 SQLite DB 进行查询。我发现了一个问题，我将 sqlString 编写为：

```
SELECT n.Name as Name, 
       c.Value as Value0, 
       d.Value as Value1 
FROM  (Table1 c inner join Table2 n on c.NameID = n.ID),
      Table3 d 
WHERE c.RunID = 1 
      and d.RunID = 2 
      and c.NameID = d.NameID 
```

该语句`stmt.executeQuery(sqlQuery)`引发以下异常：

```
java.sql.SQLException: no such column: n.Name
at org.sqlite.DB.throwex(DB.java:288)
at org.sqlite.NativeDB.prepare(Native Method)
at org.sqlite.DB.prepare(DB.java:114)
at org.sqlite.Stmt.executeQuery(Stmt.java:89)............. 
```

`Name`已经是 Table2 表的一部分。同样的语句在 SQLite 命令提示符下工作正常。但是当我删除左括号并尝试从java执行时，没有问题。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:03:50.867

内部查询中使用的变量不能被外部引用。例如，您在内部 sql 中使用了变量 n。但是你在外面提到它。变量 n 超出了它的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:06:56.437

尝试这样的事情，使用子结果集

```
SELECT rs1.Name AS NAME, 
       rs1.Value0 AS Value0, 
       d.Value AS Value1 
FROM  (SELECT n.Name AS NAME, 
       c.Value AS Value0, 
       d.Value AS Value1 
       FROM Table1 c INNER JOIN Table2 n ON c.NameID = n.ID) rs1,
      Table3 d 
WHERE c.RunID = 1 
      AND d.RunID = 2 
      AND c.NameID = d.NameID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:10:37.003

嗨朋友感谢您的快速回复。我能够解决这个问题。我正在分享这个，所以如果任何其他人遇到这个问题可以这样做：

```
SELECT ABC.Name as Name, ABC.Value as Value0, d.Value as Value1
  FROM
  (select n.Name as Name, c.Value as Value0 from Table1 c
   inner join Table2 n on c.NameID = n.ID) AS ABC,
Table3 d ......; 
```

问候，托

# jquery - 数据加载时的 JQuery 进度图像

> ID：11328550
> 
> 赞同：0
> 
> 时间：2012-07-04T11:51:44.697
> 
> 标签：jquery, jquery-ui

退出 jquery 新手。

我有一个加载大量数据的 Web 应用程序。问题是加载图表上显示的数据需要 2 分钟。

如果可能的话，我想显示如下所示的进度条：http: [//ajaxload.info/](http://ajaxload.info/)

成功加载数据后，我想停止并加载图表。此外，在单击按钮时，向服务器发出请求，并根据按钮单击重新加载另一组数据。虽然它正在加载数据，但希望显示相同的进度圈。

我正在使用 $.ajax 发出服务器请求。

如果有人可以请帮助将不胜感激。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:13:13.593

```
$('#loading-image').show();
$.ajax({
      url: uri,
      cache: false,
      success: function(html){
        $('.info').append(html);
      },
      complete: function(){
        $('#loading-image').hide();
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:01:34.977

我正在使用一种技术，其中保存数据的 div 默认包含滚动图像，我创建了一个 jquery 加载函数，它将替换保存滚动图像的 div 内的加载函数的结果，这样滚动图像加载数据时消失。

# android - android在移动设备上调试时连接到PC的localhost

> ID：11328554
> 
> 赞同：23
> 
> 时间：2012-07-04T11:52:05.023
> 
> 标签：android

我想调试我的 android 应用程序，我使用 USB 电缆将 android 设备连接到我的 PC。在我的应用程序中有一个连接本地主机的按钮，本地主机的 ip 是`10.0.2.2`，端口是`8080`，我已经读到在移动设备上调试时，ip`10.0.2.2`是 android 设备的本地主机，而不是我的 PC，所以我应该做些什么改变到 ip 而不是`10.0.2.2`? 还是我必须再做一次改变？在这种情况下，我的 android 设备是`sony ericsson xperia arc s`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-04T22:49:05.800

Google 在 Chrome 29 及更高版本中添加了支持，以使用**反向端口转发**通过适用于 Android 的 Chrome 上**的 USB 电缆**访问本地开发机器上托管的网站。可以在以下 URL 中找到设置说明：

*   [Android 远程调试 - 反向端口转发](https://developer.chrome.com/devtools/docs/remote-debugging?hl=de#port-forwarding)
*   [面向 Web 开发人员的工具 - 访问本地服务器](https://developers.google.com/web/tools/chrome-devtools/remote-debugging/local-server)

从桌面版 Chrome 30 起，反向端口转发不再是 Chrome 中的实验性功能。可以通过`about:inspect`在您的 PC 的地址栏中键入，然后单击“启用端口转发”复选框并单击位于窗口右上角的“配置端口转发”按钮来访问它。

完成后，通过 USB 连接您的移动设备。在您的移动设备上打开 Chrome `localhost:8000`（或您在本地服务器上配置的任何端口）。

反向端口转发功能将确保您的 Android 设备现在可以看到您 PC 的`localhost`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-04T11:54:10.437

因为**10.0.2.2**是您的系统（pc）的本地主机地址（仅来自模拟器）。实际上，android 无法识别url 中的**localhost**。所以**10.0.2.2**就是这个意思。对于 android 设备环回地址也是**127.0.0.1**。

您的 10.0.2.2 网址是正确的。您也可以使用系统的**静态 IP**。

只需检查

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

在应用程序的清单文件中。

**编辑：**

在这里，您使用的是 8080 端口，因此请尝试在主机上使用**adb 命令。**

```
adb forward tcp:8080 tcp:8080 
```

还请详细说明**“我想在我的手机上调试我的应用程序”**这一行。

**笔记：**

如果您要在真实设备上进行测试，请使用系统 (PC) 的**网络 IP**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-04T12:16:40.383

为此，您需要在 xampp 服务器中进行一些更改... 为您的系统分配 1 个静态 IP 地址，然后您需要将 xampp 服务器置于在线模式。之后，您可以在您的 android 应用程序中使用该 IP 地址而不是 10.0.2.2。对我来说很好，因为我将本地主机与我的 android 应用程序一起使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-13T09:13:13.517

您可以通过 Wi-Fi 共享 Mac 的 Internet 连接。然后，您的 Android 应用程序可以通过 Wi-Fi 通过 HTTP 连接到在 Mac 上运行的 Servlet。步骤是：

1.  在 Mac 上运行系统偏好设置
2.  转到“共享”选项卡
3.  开启“网络共享”
4.  在“Share your connection from”组合中选择“Ethernet”
5.  在“使用的计算机”列表框中选择“Wi-Fi”
6.  使用“Wi-Fi 选项...”按钮配置 Wi-Fi 安全性。现在，您的 Mac 是一台 Wi-Fi 服务器，并且正在共享其以太网 Internet 连接。
7.  配置您的 Android 设备的 Wi-Fi 以连接到您的 Mac（在设置命令中）
8.  在您的 Mac 上，转到系统偏好设置中的网络选项卡，然后在列表中选择 Wi-Fi 以找出您的 Mac 在 Wi-Fi 网络上的 IP 地址（对我来说是 169.254.66.223）
9.  在您的 Android 应用程序中，您现在可以使用“http://169.254.66.223:8080/YourServer/YourServlet”连接到 Mac 中的 Servlet

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-20T15:46:29.850

我认为你有两个选择

当您使用真正的 android 设备时，第一个是使用 10.0.2.3。它适用于我。

您的第二个选择是从您的电脑创建热点并将您的 android 设备连接到热点。

使用 cmd 类型“ipconfig”查找 ip 地址，将 localhost 替换为 ip 地址。

谢谢。

# c# - asp.net simplemodal 用法

> ID：11328563
> 
> 赞同：1
> 
> 时间：2012-07-04T11:52:27.563
> 
> 标签：c#, javascript, asp.net, simplemodal

我需要在按钮单击或事件（来自更新面板）上显示 iframe，并且使用下面的代码我应该能够做到这一点。

我只是不确定如何调用 JS

```
var src = "http://sample.com/";
$.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
 closeHTML: "",
 containerCss: {
  backgroundColor: "#fff",
  borderColor: "#fff",
  height: 450,
  padding: 0,
  width: 830
 },
 overlayClose: true
}); 
```

如果我只是将它放在一个中`<script>`，它只会自行显示。我已经查看了主站点上的示例，但仍然不确定。

从事件或单击按钮/链接调用它的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:02:00.430

使用按钮单击：

```
function tocall()
{
    var src = "http://sample.com/";
    $.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
        closeHTML: "",
        containerCss: {
            backgroundColor: "#fff",
            borderColor: "#fff",
            height: 450,
            padding: 0,
            width: 830
        },
        overlayClose: true
    });
} 
```

按钮的标记：

```
<input type="button" onclick="tocall()"/> 
```

有一些事件在`updatepanel`你需要处理程序

```
<script type="text/javascript" language="javascript">
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);

    function beginRequestHandle(sender, Args) {
        //Do something when call begins.
    }

    function endRequestHandle(sender, Args) {
        tocall()//When call ends
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:02:41.833

```
var src = "http://sample.com/";
$(document).ready(function()
{
    $("#showpopup").click(function(e)
    {
      e.preventDefault();
    $.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
     closeHTML: "",
     containerCss: {
      backgroundColor: "#fff",
      borderColor: "#fff",
      height: 450,
      padding: 0,
      width: 830
     },
     overlayClose: true
    });
    });
}); 
```

然后将其添加`<a href="#" id="showpopup">Show</a>`到您的页面将使其出现。

我建议您访问[http://docs.jquery.com](http://docs.jquery.com)以了解事件触发的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:03:17.013

希望这会有所帮助，这里我使用了一个普通的链接。如果您使用的是 .net 按钮，请使用

```
Button.Attributes.Add("onclick","ShowModal()"); 
```

测试

```
<script>
function ShowModal()
{
var src = "http://sample.com/";
$.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
 closeHTML: "",
 containerCss: {
  backgroundColor: "#fff",
  borderColor: "#fff",
  height: 450,
  padding: 0,
  width: 830
 },
 overlayClose: true
});
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:29:45.177

这样做从提交按钮调用

```
onclick = fnOpenPopUp(LineNum); 
```

并处理模态弹出使用

```
function fnOpenPopUp(LineNum)
{
    var argObj= window; 
    var detailpage = '<%=Url.Action("ReviewRequestQueuePartial")%>'
    detailpage +="?LineNumber="+LineNum.toString();

    var myWindow=window.showModalDialog(detailpage ,"ReviewRequestQueuePartial", "dialogWidth:1025px; dialogHeight:650px; center:yes; resizable:yes;modal=yes");
} 
```

# regex - 使用 htaccess 重定向域（差异域，同一目录）

> ID：11328566
> 
> 赞同：1
> 
> 时间：2012-07-04T11:52:43.150
> 
> 标签：regex, .htaccess, url, mod-rewrite, url-rewriting

我正在尝试重定向到保留目录的不同域，例如：

```
example.org/user/test 
```

将被定向到：

```
example.com/user/test 
```

我正在使用 Zend 框架，所以这就是我的 .htaccess 中的内容：

```
SetEnv APPLICATION_ENV development

RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.org$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L]

php_value "short_open_tag" "on" 
```

但我从浏览器得到的是：

```
Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.
Please contact the server administrator, cgiadmin@yourhostingaccount.com and inform them of the time the error occurred, and anything you might have done that may have caused the error.
More information about this error may be available in the server error log. 
```

有人可以帮我解决这个问题吗？为什么会这样？我的 .htaccess 错了吗？

# time - 仅在 xAxis 上显示时间标签。海图

> ID：11328567
> 
> 赞同：11
> 
> 时间：2012-07-04T11:52:46.643
> 
> 标签：time, highcharts, axis-labels

我只需要在 xAxis 上显示时间标签。我正在使用 Highcharts 并且不完全了解如何做到这一点。在 xAxis 上应该有格式如 21:00 的时间标签。我不需要日期，只需要时间。此外，两个标签之间的差异应该是 00:30（半小时）或 01:30，并且应该是可缩放的。我的 PHP 脚本每半小时在数据库中写入一些值，我需要将其显示在图表上。对不起我的英语不好，我是俄罗斯人。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T12:04:06.017

在图表的 xAxis 中，您需要提供`tickinterval`和`dateTimeLabelFormats`。以下代码给出了 1.5 小时的刻度间隔。您可以通过替换 1.5 in 将其更改为所需的任何小时数`tickInterval: 1.5 * 3600 * 1000,`

```
xAxis: {
    type: 'datetime',
    //Sets tickInterval to 24 * 3600 * 1000 if display is by day
    tickInterval: 1.5 * 3600 * 1000,
    dateTimeLabelFormats : {
        day: '%H:%M'
    }
} 
```

# jsf - valueChangeListener 在提交时清除值并且不调用相关的侦听器

> ID：11328569
> 
> 赞同：1
> 
> 时间：2012-07-04T11:52:53.727
> 
> 标签：jsf, valuechangelistener

问候。

我有一个使用以下方面开发的简单应用程序

*   JSF 1.2
*   动态网页模块 2.5
*   爪哇 5
*   RichFaces 3.3.2

我的 Jsf 页面代码片段如下：-

```
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>
<%@ taglib uri="http://richfaces.org/rich" prefix="rich"%>
<%@ taglib uri="http://myfaces.apache.org/tomahawk" prefix="x"%>
   ...
  <h:selectOneMenu styleClass="combo" id="Country"
  onchange="submit()" valueChangeListener="#{countryBean.countryChanged}">
      <f:selectItems value="#  {countryBean.countryList}"/>
   </h:selectOneMenu> 
```

相关的支持 bean 代码片段：-

```
public void countryChanged(javax.faces.event.ValueChangeEvent event)
{
    System.out.println("...........Country Changed.........." + event.getNewValue());   

} 
```

我有 2 个问题需要研究。

*   首先，当我选择任何值时，组合框中的值会消失
*   其次，在 countryChange 方法中没有打印任何内容，这意味着显然我的 valueChangeListener 没有被调用。

请让我知道我在这里可能会丢失什么。

# java - 为什么这个日期是用不同的时区创建的？

> ID：11328570
> 
> 赞同：1
> 
> 时间：2012-07-04T11:52:58.817
> 
> 标签：java, date, timezone, format

这段代码：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-DD_HH-mm-ss");
Date date=null;
try {
  date = format.parse("2012-07-04_13-42-03");
} catch (Exception e) {
}
File file = new File("File.txt");
Date now=new Date();
Date last= new Date(file.lastModified());
System.out.println("exec:"+date+" "+date.getTime()+" "+date.getTimezoneOffset());
System.out.println(" now:"+now+" "+now.getTime()+" "+now.getTimezoneOffset());
System.out.println("last:"+last+" "+last.getTime()+" "+last.getTimezoneOffset()); 
```

给出结果：

```
exec:Wed Jan 04 13:42:03 CET 2012 1325680923000 -60
 now:Wed Jul 04 13:42:20 CEST 2012 1341402140349 -120
last:Mon Jul 02 17:26:37 CEST 2012 1341242797000 -120 
```

如何从字符串创建日期，以便在同一时区将其与其他日期进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T11:58:39.030

`Date`没有*时*区。让您感到困惑的是，它`Date.toString()` *总是*返回一个以系统默认时区格式化的值，这`Date.getTimeZoneOffset`也是如此。

现在，在您的系统默认时区（看起来是中欧时间）中，与 UTC 的偏移量在一年中会发生变化，时区缩写也是如此。这就是您所看到的：“中欧”时间 (UTC+1) 和“中欧夏令时”) (UTC+2) 之间的差异。这是当前系统时区中的时区信息，由`Date`您要转换为字符串表示的值表示。

同样，它`Date`本身没有关于时区的信息。这*只是*一个时间点。您可以设置`SimpleDateFormat`解析或格式化时使用的时区 - 这是另一回事。

如果可能的话，您还应该考虑使用[Joda Time](http://joda-time.sf.net) - 它比 Java 内置的 API 要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:18:56.570

好的，所以问题不在于时区，而在于从

```
2012-07-04_13-42-03 
```

至

```
Wed Jan 04 13:42:03 CET 2012 
```

问题出在格式模式中，因此发生了变化

```
yyyy-MM-DD_HH-mm-ss 
```

至

```
yyyy-MM-dd_HH-mm-ss 
```

因为 D 表示一年中的一天，而 d 表示一个月中的一天

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-20T18:59:22.770

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

另外，下面引用的是来自[**Joda-Time**](https://www.joda.org/joda-time/)[主页](https://www.joda.org/joda-time/)**的通知：**

 **> 请注意，从 Java SE 8 开始，用户被要求迁移到 java.time (JSR-310) - JDK 的核心部分，它取代了这个项目。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        String strDateTime = "2012-07-04_13-42-03";
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("u-M-d_H-m-s", Locale.ENGLISH);
        LocalDateTime ldt = LocalDateTime.parse(strDateTime, dtf);
        System.out.println(ldt);
    }
} 
```

**输出：**

```
2012-07-04T13:42:03 
```

[`ONLINE DEMO`](https://ideone.com/cqf4OE)

## 如何比较两个`LocalDateTime`s：

您可以使用[`LocalDateTime#isAfter`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#isAfter-java.time.chrono.ChronoLocalDateTime-)and`LocalDateTime#isBefore`来比较两个`LocalDateTime`s。

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

## 你的代码出了什么问题？

您已经使用`D`which[指定*Day in year*](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)而您需要`d`which 指定*Day in month*。由于您要比较同一时区中的所有日期时间，因此在这种情况下***时区没有问题。***

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)**

# jquery - jsTree“create_node”真的不工作

> ID：11328571
> 
> 赞同：8
> 
> 时间：2012-07-04T11:53:00.047
> 
> 标签：jquery, jstree

我正在尝试在我的 jsTree 容器中动态添加一个新节点。它根本不起作用。我不知道我错过了什么。

[jsfiddle 示例](http://jsfiddle.net/FWgQa/1/)

```
$("#tree").jstree({
    core: {
        "animation": 0
    },
    "html_data": {},
    "themes": {
        "icons": false
    },
    "search": {
        "case_insensitive": true,
        "show_only_matches": true
    },
    "plugins": ["themes", "html_data", "search"]
});

$("#tree").jstree("create_node", $("node_1"), "after", { "data": "Hello World" }); 
```

html:

```
<div id="tree">
    <ul>
        <li id="node1"><a>Hello</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-04-02T21:39:10.397

set 'check_callback' : true，否则所有操作如创建、重命名都会被阻止。像这样：

```
 this.treeDiv.jstree(
                {

                    'core' : {
                        'check_callback': true,
                        'data' : {
                            'url' : function (node) {
                            return 'ajax_roots.json';
                            },
                            'data' : function (node) {}
                            }
                    },
                    "search" : {
                        "fuzzy" : false,
                        "show_only_matches": true,
                        "close_opened_onclear" : true
                    },
                    "plugins" : ["search", "sort", "json_data"]
                }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T16:51:03.357

除了将 core.check_callback 设置为 true 之外，值得一提的是，创建一个简单的不需要这么多参数。您可以通过以下方式简单地实现它：

```
$('#tree').jstree(true).select_node('nodeid');
var tr = $('#tree').jstree(true),
            selected = tr.get_selected();
selected = tr.create_node(selected, {"type":"file(or any other type you need)"}); 
```

希望这可以帮助某人。我遇到了问题并尝试遵循 API 但无法工作；相反，我检查了演示中的代码并发现了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T11:59:09.500

**演示** **简单你需要什么** [http://jsfiddle.net/gwxTa/2/](http://jsfiddle.net/gwxTa/2/) **或** [http://jsfiddle.net/gwxTa/](http://jsfiddle.net/gwxTa/) **或**动态 - （点击添加按钮）[http://jsfiddle.net/VBSJ8/](http://jsfiddle.net/VBSJ8/) **或** [http:// /jsfiddle.net/ak4Ed/](http://jsfiddle.net/ak4Ed/)

请参阅我的旧帖子：[jsTree not working](https://stackoverflow.com/questions/10346271/jstree-not-working)

**来自动态添加按钮功能的**代码：****

 **```
$(function() {
    $("#tree").jstree({
        "json_data": {
            "data": [
                {
                "data": "Hello",
                "attr": {
                    "id": "root.id"
                },
                "children": [{
                    "data": "Hello World",
                    "attr": {
                        "id": "node_1"
                    },
                    "children": []}
                  ]},
                ]
        },
        "plugins": ["themes", "json_data", "crrm"]
    });
});

    $("#tree").jstree("create", $("#node_1"), "inside", {
        "data": "child2"
    }, function() {
        alert("added");
    }, true); 
```

希望你包括脚本：

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <script type='text/javascript' src="http://static.jstree.com/v.1.0pre/jquery.jstree.js"></script>

 <script type='text/javascript' src="http://static.jstree.com/v.1.0pre/jquery.hotkeys.js"></script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T12:17:16.070

我不知道是什么原因造成的，但是在创建节点时添加 setTimeout 可以解决问题

```
setTimeout(function() {
    $("#tree").jstree("create_node", $("node_1"), "after", { "data": "Hello World" });
}, 1000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-22T15:31:52.320

我遇到了同样的问题。新节点存储在我的数据库中，但不更新节点名称或节点文本。我运行 Firebug.php 并看到新创建的节点 ID (mysqli_insert_id) 没有被传递给 rename_node。

我使用会话变量解决了它 - 设置一个变量以指示从 create_node 访问重命名函数并设置一个“last_id”会话变量。

'CRN' 只是我的数据库和应用程序特有的变量，您可以忽略它。

因此，使用提供的 response.php 示例，我对其进行了如下修改：

```
case 'create_node':
            FB::info($_GET, "New Node attributes ");
            $node = isset($_GET['id']) && $_GET['id'] !== '#' ? (int)$_GET['id'] : 0;               
            $nodeText = isset($_GET['text']) && $_GET['text'] !== '' ? $_GET['text'] : '';
            $CRN=$_SESSION['CRN'];
            $sql ="INSERT INTO CourseLookup (name, text, parent_id, CRN) VALUES('$nodeText','$nodeText','$node','$CRN')";
            FB::info($sql, "new node query ");
            mysqli_query($conn, $sql);  
            $last_id = mysqli_insert_id($conn); 
            $_SESSION['create']=true;//passed to rename_node so it knows to use the $last_id for the node
            $_SESSION['lastid']=$last_id;//used as the node in rename_node  
            $result = array('id' => $last_id);
            print_r($result);die;

            break;
        case 'rename_node':
            if($_SESSION['create']){//if a new node was just created
                $node=$_SESSION['lastid'];//use the last insert id
            }
            else{
                $node = isset($_GET['id']) && $_GET['id'] !== '#' ? (int)$_GET['id'] : 0;//otherwise use the last menu item clicked
            }
            FB::info($_SESSION['create'],"create status");//debugging
            FB::info($_SESSION['lastid'],"last id");//debuggig
            //print_R($_GET);
            $nodeText = isset($_GET['text']) && $_GET['text'] !== '' ? $_GET['text'] : '';
            FB::info($nodeText, "node name ");
            $sql ="UPDATE CourseLookup SET name='$nodeText', text='$nodeText' WHERE id=$node";
            FB::info($sql, "rename node query ");
            mysqli_query($conn, $sql);
            $_SESSION['create']=false;
            break; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-12T09:59:09.000

添加一个新节点

```
$("#categories_jstree").jstree('create_node', '#', {'id' : '1944', 'text' : 'nosde1'}, 'last'); 
```

其中 # 是父节点 ID (empty_now)

为 node1 添加一个嵌套节点

```
$("#categories_jstree").jstree('create_node', '#1944', {'id' : '1945', 'text' : 'subnode1_1'}); 
```

#1944 - 父节点 ID**

# select - 使用统一 JS 选择多个问题

> ID：11328573
> 
> 赞同：1
> 
> 时间：2012-07-04T11:53:15.803
> 
> 标签：select, uniform

我将**uniform.js**用于我的表单元素，一切正常，但我在**select multiple**中遇到问题。只有**select**看起来不错，但是当我使用反映**select的****select multiple**时。请帮我。

# javascript - CompositeView 中的序列化数据

> ID：11328574
> 
> 赞同：2
> 
> 时间：2012-07-04T11:53:16.663
> 
> 标签：javascript, backbone.js, marionette, backbone-events

我需要将一个值传递给`listView.template`，以便了解有关`collection.length`.
我认为一种选择是重新定义 serializeData 方法以便以这种方式传递参数。

```
var ListView = Marionette.CompositeView.extend({

    initialize: function () {
        this.collection.on('reset', this.serializeData, this);
        this.collection.on('remove', this.serializeData, this);
        this.collection.on('add', this.serializeData, this);
    },

    serializeData: function () {
        console.log(this.collection.length);
        return {
            has_tasks: this.collection.length > 0
        };
    },

    // other codes
}); 
```

* * *

当我开始时`app`尚未`collection`获取，所以：

1.a) `collection.legth = 0`
2.b) 模板`has_tasks = false`按预期获得。

2.a) 在 fetch 之后`collection.length is > 0`，
2.b)`serializeData`被调用，所以它把`has_tasks = true`,
2.c) 模板似乎没有被渲染，因为它维护`has_tasks = false`

任何想法，因为`2.c`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T19:27:57.597

最新的 Marionette 通过在视图上调用一个可选项`templateHelpers`来为视图提供额外的上下文来解决这个问题。此外，您的事件绑定对 Marionette 不友好，因为在卸载视图时它不会正确自动取消绑定。因此，在您看来，您需要做的就是：

```
var ListView = Marionette.CompositeView.extend({

    initialize: function () {
        this.bindTo(this.collection, "add", this.render, this);
        this.bindTo(this.collection, "remove", this.render, this);
        this.bindTo(this.collection, "reset", this.render, this);
    },

    templateHelpers: function () {
        console.log(this.collection.length);
        return {
            has_tasks: this.collection.length > 0
        };
    },

    // other codes
}); 
```

但是请注意，您可能不想在每次添加或删除项目时重新渲染整个视图和所有子元素。更好的方法是只更新显示的计数。例如：

```
var ListView = Marionette.CompositeView.extend({

    initialize: function () {
        this.bindTo(this.collection, "add", this.updateCount, this);
        this.bindTo(this.collection, "remove", this.updateCount, this);
        this.bindTo(this.collection, "reset", this.updateCount, this);
    },

    updateCount: function() {
        this.$('.count_span').html(this.collection.length);
    },

    // other codes
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:57:42.477

我会简单地使用类似的东西：

```
var ListView = Marionette.CompositeView.extend({
  initialize: function () {
    this.bindTo(this.collection, 'reset', this.render)
  },
  serializeData: function () {
    return { has_tasks: this.collection.length > 0 }
  }
}); 
```

再次调用 serializeData 不会影响您的视图。您需要再次渲染它以显示新值（因为`render`将通过再次调用来获取数据`serializeData`）。

无论如何，`hasTask`既然您可以访问集合（以及它的长度），那么发送到模板有什么意义？

# javascript - 被 JavaScript 隐藏的必需 JSF 输入组件仍然有效

> ID：11328585
> 
> 赞同：0
> 
> 时间：2012-07-04T11:54:23.687
> 
> 标签：javascript, jsf-2, primefaces

我有一个值列表，来自我想检查的值列表中的一些值意味着相应的文本框将显示在底部。否则文本框将被隐藏。我已经使用 javascript 完成了这个过程。但我的问题是我必须使用 required=true 属性进行验证。但问题是隐藏的文本框也得到了验证。

列表值的 Primefaces 页面：

```
 <p:selectManyCheckbox onchange="checkValue();" value="#{volunteerBean.knowAbt}" layout="pageDirection" id="s" immediate="true" required="true" requiredMessage="Select how to konws about cv?" style="width:300px;height:170px;">
     <f:selectItems value="#{volunteerBean.hearLst}" var="he"  itemLabel="#{he}" itemValue="#{he}" />
     <p:ajax event="change" update="msg1111" />
     </p:selectManyCheckbox> 
```

输入文本框编码：

```
 <p:inputText style="display:none;" id="searchEngine" value="#{volunteerBean.searchEngine}"><p:watermark for="searchEngine" value="Search Engine"/> 
```

通过检查复选框列表来隐藏和显示 inputText 的 JavaScript：

```
 function checkValue() {
    var chk = document.getElementById("volunteerForm:s:10");
             if (chk1.checked) {
            document.getElementById('volunteerForm:searchEngine').style.display='';
            }else {
    document.getElementById('volunteerForm:searchEngine').style.display='none';
            }
        } 
```

我正在使用 primefaces 3.0 和 jsf 2.0。如何解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:20:22.850

您只更改了 HTML DOM 树，并没有更改 JSF 组件树。JSF 根本不知道 HTML 元素已经隐藏在客户端。您需要通过其属性来显示/隐藏 JSF 组件，`rendered`并将其客户端 ID 包含在`<p:ajax update>`.

```
<p:selectManyCheckbox ... value="#{volunteerBean.knowAbt}">
    <f:selectItems value="#{volunteerBean.hearLst}" />
    <p:ajax event="change" update="msg1111 searchEngine" />
</p:selectManyCheckbox>

<p:inputText id="searchEngine" ... rendered="#{volunteerBean.knowAbt.contains('valueOfItem10')}" /> 
```

索引 10 处的项目的确切值在哪里`valueOfItem10`，就像您尝试签入 JS 时一样。请注意，我假设它`knowAbt`是 a `List<String>`，完全按照您的`hearLst`建议（为此我已经删除了多余的`var`，`itemLabel`并且`itemValue`从上面的示例中，因为它们已经是默认值）。否则，您需要在支持 bean 的辅助方法中执行该工作。

# oracle - JPA，合并对象更新子对象

> ID：11328592
> 
> 赞同：0
> 
> 时间：2012-07-04T11:54:47.900
> 
> 标签：oracle, hibernate, jpa, playframework

我在父对象上有这个

```
@OneToMany(mappedBy="idUser", cascade = CascadeType.MERGE)
public List<Directions> directions; 
```

在我的控制器中，我有这个

```
public static void userUpdate(String apikey, JsonObject body) {
    if(validate(apikey)) {

        Long idUser = decode(apikey);
        User oldUser = User.findById(idUser);

        Map<String, User> userMap = new HashMap<String, User>();
        Type arrayListType = new TypeToken<Map<String, User>>(){}.getType();
        userMap = gson().fromJson(body, arrayListType);
        User user = userMap.get("user");

        oldUser.em().merge(user);

        oldUser.save();

    }else{
        forbidden();
    }
} 
```

它会更新父对象，但是当我更改子对象上的某些内容时，它不会更新它，也不会给休眠或 Oracle 带来问题。

有谁知道为什么它不更新子对象？

谢谢大家！

# 已更新解决方案！

这就是它对我的工作方式，因为@JB Nizet 说你也必须保存子对象。

```
oldUser.em().merge(user); 
oldUser.save();

for (Direction direction : oldUser.directions) { 
    direction.save();          
} 
```

# 另一种方法！

有了这个

```
@OneToMany(cascade = CascadeType.ALL)
@JoinColumn(name = "SASHNBR", insertable = true, updatable = true)
public List<Direction> directions; 
```

我已经能够制作 oldUser.save() 并保存子对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:23:02.450

AFAIK，Play 需要调用`save()`所有修改后的实体。因此，您可能需要遍历用户的指示并保存它们：

```
for (Direction direction : user.getDirections()) {
    direction.save();
} 
```

# logging - Hadoop 作业中的日志记录如何工作？

> ID：11328595
> 
> 赞同：1
> 
> 时间：2012-07-04T11:55:08.320
> 
> 标签：logging, hadoop, mapreduce, slf4j, logback

登录 Hadoop 作业如何工作？使用 SLF4J 和 Logback，我需要什么样的配置才能在一个地方查看所有日志输出？JobTracker 是否会整理 Hadoop 作业的 STDOUT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:30:54.973

每个数据节点上的日志目录都包含一个子目录`userlogs`。这包含最近地图任务尝试的子目录。这是针对地图任务的每个实例。由于任务尝试在其名称中包含作业 ID，因此您可以找出特定作业创建的日志。

任务尝试目录包含以下文件：

*   标准错误
*   标准输出
*   系统日志

这些包含各自的输出。

您可以从 JobTracker Web-GUI 访问任务日志，方法是从列出的 Job 导航到其任务，单击任务并选择其输出。

# c# - 在c#中调用vc++ dll

> ID：11328598
> 
> 赞同：0
> 
> 时间：2012-07-04T11:55:20.657
> 
> 标签：c#, visual-c++, dll, dllimport

我在vc++中有一个dll和相应的头文件（.h文件），现在我必须在c#中调用这个dll。而且我对调用约定一无所知。

在头文件中有一个函数原型，如：

```
typedef void CBOnStop_VC( int nFGHandle, unsigned int nChannel, void* pClientData ); 
```

现在我想在 C# 中调用这个函数。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:03:22.363

你可以使用这些步骤

```
1\. compile your classe with the /clr switch

#include "NativeType.h"

public ref class ManagedType
{
     NativeType*   NativePtr; 

public:
     ManagedType() : NativePtr(new NativeType()) {}
     ~ManagedType() { delete NativePtr; }

     void ManagedMethod()
      { NativePtr->NativeMethod(); } 
}; 

2.Add a reference to your ManagedType assembly

ManagedType mt = new ManagedType();
mt.ManagedMethod(); 
```

# javascript - javascript和css的评级系统问题

> ID：11328603
> 
> 赞同：0
> 
> 时间：2012-07-04T11:56:02.883
> 
> 标签：javascript, html, css

我正在构建这个评级系统，它恰好是这样的：

```
 <span class="ratelinks" id="<?php echo $star['id'];?>">
  <li><a href="javascript:void(0)" title="1 star out of 5" class="one-star">1</a></li>
    <li><a href="javascript:void(0)" title="1 star and a half out of 5" class="one-star-half">1.5</a></li>
  <li><a href="javascript:void(0)" title="2 stars out of 5" class="two-stars">2</a></li>
    <li><a href="javascript:void(0)" title="2 star and a half out of 5" class="two-star-half">2.5</a></li>
  <li><a href="javascript:void(0)" title="3 stars out of 5" class="three-stars">3</a></li>
    <li><a href="javascript:void(0)" title="3 star and a half out of 5" class="three-star-half">3.5</a></li>
  <li><a href="javascript:void(0)" title="4 stars out of 5" class="four-stars">4</a></li>
    <li><a href="javascript:void(0)" title="4 star and a half out of 5" class="four-star-half">4.5</a></li>
  <li><a href="javascript:void(0)" title="5 stars out of 5" class="five-stars">5</a></li>
  </span> 
```

此特定代码的 css 是：

```
/* CSS Document */
body{
    font:12px Arial, Helvetica, sans-serif;
    padding:40px;
}
.star-rating,
.star-rating a:hover,
.star-rating a:active,
.star-rating .current-rating{
background: url(star.gif) left -1000px repeat-x;
}
.star-rating{
position:relative;
width:125px;
height:25px;
overflow:hidden;
list-style:none;
margin:0;
padding:0;
background-position: left top;
}
.star-rating li{
display: inline;
}
.star-rating a,
.star-rating .current-rating{
position:absolute;
top:0;
left:0;
text-indent:-1000em;
height:25px;
line-height:25px;
outline:none;
overflow:hidden;
border: none;
}
.star-rating a:hover,
.star-rating a:active{
background-position: left bottom;
}
.star-rating a.one-star{
width:20%;
z-index:12;
}
.star-rating a.one-star-half{
width:30%;
z-index:11;
}
.star-rating a.two-stars{
width:40%;
z-index:10;
}
.star-rating a.two-stars-half{
width:50%;
z-index:9;
}
.star-rating a.three-stars{
width:60%;
z-index:8;
}
.star-rating a.three-stars-half{
width:70%;
z-index:7;
}
.star-rating a.four-stars{
width:80%;
z-index:6;
}
.star-rating a.four-stars-half{
width:90%;
z-index:5;
}
.star-rating a.five-stars{
width:100%;
z-index:4;
}
.star-rating .current-rating{
z-index:1;
background-position: left center;
} 
```

js文件代码：

```
// JavaScript Document
    $(document).ready(function() {
        // get rating function
        function getRating(id){
            $.ajax({
                type: "GET",
                url: "update.php",
                data: "do=getrate&id="+id,
                cache: false,
                async: false,
                success: function(result) {
                    // apply star rating to element
                    $("#current-rating-"+id+"").css({ width: "" + result + "%" });
                },
                error: function(result) {
                    alert("some error occured, please try again later");
                }
            });
        }

        // link handler
        $('.ratelinks li a').click(function(){
            // get the parent id
            var idStar = $(this).parent().parent().attr('id');
            $.ajax({
                type: "GET",
                url: "update.php",
                data: "rating="+$(this).text()+"&do=rate&id="+idStar,
                cache: false,
                async: false,
                success: function(result) {
                    // remove #ratelinks element to prevent another rate
                    $("#ratelinks").remove();
                    // get rating after click
                    getRating(idStar);
                },
                error: function(result) {
                    alert("some error occured, please try again later");
                }
            });

        });
    }); 
```

更新.php

```
<?php
// connect to database
$dbh=mysql_connect ("localhost", "root", "") or die ('Cannot connect to the database');
mysql_select_db ("rating",$dbh);

if($_GET['do']=='rate'){
    // do rate
    rate($_GET['id']);
}else if($_GET['do']=='getrate'){
    // get rating
    getRating($_GET['id']);
}

// get data from tabel
function fetchStar(){
    $sql = "select * from `vote`";
    $result=@mysql_query($sql);
    while($rs = @mysql_fetch_array($result,MYSQL_ASSOC)){
        $arr_data[] = $rs;
    }
    return $arr_data;
}

// function to retrieve
function getRating($id){
    $sql= "select * from `vote` where id='".$id."' ";
    $result=@mysql_query($sql);
    $rs=@mysql_fetch_array($result);
    // set width of star
    $rating = (@round($rs[value] / $rs[counter],1)) * 20; 
    echo $rating;
}

// function to insert rating
function rate($id){
    $text = strip_tags($_GET['rating']);
    $update = "update `vote` set counter = counter + 1, value = value + ".$_GET['rating']."  where id='".$id."' ";

    $result = @mysql_query($update);
}
?> 
```

它可以达到一星半，然后不再采用半值。它应该是一个需要星星的投票系统。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:10:33.370

你的类命名中有一个错字：HTML 中的“two-star-half”和 CSS 中的“two-stars-half”。3.5 和 4.5 也一样。所以我猜你看不到你的风格的良好视觉呈现。

# iphone - 对呼叫方的声音做出反应的应用程序

> ID：11328604
> 
> 赞同：0
> 
> 时间：2012-07-04T11:56:04.863
> 
> 标签：iphone, voice, voice-recognition, voice-recording

我需要开发一个对呼叫者的声音做出反应的应用程序 - 所以电话中“不存在”的参与者..特别是：

有人打电话给我，然后停止说话。该应用程序应该提醒我说“参与者停止说话”（如果应用程序的感觉现在对你来说似乎很愚蠢，这并不重要 ;-)）

我的问题是——这在技术上可行吗？由于应用程序通常会在接到电话时立即暂停。我知道它们可以在通话期间重新启动 - 但是它们可以对线路另一端的声音做出反应，还是只能对我自己的声音做出反应？

如果你认为它可能，我必须知道什么特别的事情吗？

非常感谢！

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:01:50.383

这是不可能的。因为当 iPhone 有任何来电时，我们的应用程序会失去控制，它会进入后台。

使用官方 SDK 无法拦截任何电话。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:05:13.180

这不是使用标准 SDK 的有效 IDEA，尽管您可以使用其他一些 IDEA 来做到这一点，其中之一是 CYDIA。

谢谢，

# windows-installer - 作为 msi 安装的一部分，如何卸载以前的版本？

> ID：11328611
> 
> 赞同：6
> 
> 时间：2012-07-04T11:56:40.403
> 
> 标签：windows-installer, uninstallation

我有一个打包为 MSI 的产品。当我的客户在现有版本之上安装我的产品的新版本时，由于自定义 VBS 操作，它无法正常工作，如下所述。我的问题是：如何更改我的 MSI，以便在顶部安装总是会事先完全卸载任何现有版本？

细节是：

我在不同的公司部署了具有多种版本的产品。大约每年一次，我的每个客户都会收到我的产品的新版本并部署到他们公司的工作站上。负责部署的人员希望他们可以在旧版本之上安装新版本，而不必在他们的安装包中包含卸载步骤。

msi 安装会创建一些文件并将其写入 [CommonApplicationData]\MyApp 文件夹。在执行期间，应用程序会在 [CommonApplicationData]\MyApp 文件夹中创建更多文件。在卸载期间，我需要删除所有这些文件。由于它们不是由 msi 安装的，它们不会自动卸载，所以我创建了一个 vbs 脚本来删除该文件夹以及其中的任何其他内容。我在ExecuteDeferred中放了一个命令来执行那个vbs：

```
...
RemoveFiles
RemoveFolders
CreateFolders
MoveFiles
InstallFiles
PatchFiles
If REMOVE="ALL" Then
    REM line below is my custom script
    call VBScript From Installation (MyApp_UninstallCleanup)  
End
DuplicateFiles
BindImage
CreateShortcuts
... 
```

到目前为止一切顺利，安装和卸载时效果很好。但是，如果我在现有版本之上安装我的产品的新版本，它会按以下顺序发生：a) 安装新版本，在 [CommonApplicationData]\MyApp 文件夹和 [Program Files]\ MyApp...，覆盖旧版本的文件 b) 运行我的 vbs，删除 [CommonApplicationData]\MyApp 文件夹

我的新 MSI 的升级表中确实列出了旧版本的 GUID，除了这个自定义脚本之外，升级过程似乎工作正常。

产品本身非常小，所以如果安装程序总是在安装新版本之前完全删除以前的版本，那就没问题了。工作站上没有需要保留的用户设置，文件大小也不大。因此，为简单起见，我希望卸载以前的版本，而不是仅使用已更改的位进行更新。

有没有办法可以更改我的新 MSI，以便它首先卸载以前的版本？

值得注意的是，我有许多公司安装了包含自定义 vbs 的现有 MSI 版本。因此，解决方案确实需要能够应对现有已安装的 msi。

我使用 Wise Installation Express 7.0 创建 MSI。

谢谢！！

[（在这里](https://www-secure.symantec.com/connect/forums/problems-installing-over-top-existing-product)交叉发布）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T06:31:12.727

[`RemoveExistingProducts`](http://msdn.microsoft.com/library/aa371197.aspx)在行动之前安排`InstallInitialize`行动：

> 在这种情况下，安装程序会在安装新应用程序之前完全删除旧应用程序。这是一个低效的操作放置，因为所有重用的文件都必须重新复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:09:33.477

[EdT](http://www.symantec.com/connect/forums/problems-installing-over-top-existing-product)在赛门铁克论坛上的回答

如果您已使用标准 Wise 模板进行安装，则 RemoveExistingProducts 操作将在 InstallExecute 序列的末尾进行排序。尽管从技术上讲这是最“有效”的放置方式，但除非您在创建新软件包以升级旧软件包时非常小心地运行 UpgradeSync，否则最终结果通常是文件丢失或其他异常。

修复方法是重新排序 RemoveExistingProducts 操作，以便它在 InstallValidate 和 InstallInitialize 之间运行。这可确保在安装新版本之前完全删除旧应用程序。

在帮助文件 MSI.CHM 中查找“RemoveExistingProducts”，以获取有关定位此操作的选项的更详细说明。

# javascript - 使用 Dart 时，我正在单击事件上创建一个 DOM 类。它只拾取第一个元素，我如何让它在所有元素上触发？

> ID：11328616
> 
> 赞同：0
> 
> 时间：2012-07-04T11:56:54.850
> 
> 标签：javascript, jquery, dart

我正在试验 Dart。我创建了一个点击事件，如下所示： `query('.numbutton').on.click.add((e) { window.alert('click!'); });`

我有多个使用类 numbutton 的按钮： `<input type="button" class="numbutton" value="1">` `<input type="button" class="numbutton" value="2">` `<input type="button" class="numbutton" value="3">`

当我点击 1 按钮时，会弹出一个提示点击！但如果我点击 2 或 3 按钮，什么也不会发生。我已经用 jQuery 试过了，效果很好：

```
$('.numbutton').click(function(){
   alert('click!');
}); 
```

DART 缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T13:01:29.183

```
final List<Element> elements = queryAll('.numbutton');
for(Element e in elements) {
    e.on.click.add((e) => print('clicked!'));
} 
```

或者

```
queryAll('.numbutton').forEach((e) => e.on.click.add((e) => print('NPE-safe one-liner!'))); 
```

# c# - 使用 VS2008 内置在 .net 3.5 中的 DLL 在安装了 .net 4 的 XP 系统上部署时会引发异常

> ID：11328620
> 
> 赞同：1
> 
> 时间：2012-07-04T11:57:09.103
> 
> 标签：c#, .net, c#-4.0, .net-3.5

我的 dll 建立在 VS2008 上，目标框架为 3.5。主要应用程序是 C++ 并使用 C++/CLI 与 .net dll 对话。当应用程序部署在仅安装了 .net 4 的 XP 系统上时，会出现两个程序集丢失的异常。

System.Core 版本 3.5.0.0 和 System.Web.Extensions 3.5.0.0

阅读后，解决方案称为添加

```
 <supportedRuntime version="v4.0" /> 
```

到配置强制使用框架4。我没有配置文件将supportedRuntime设置为4，因为我将它构建为类库。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:02:57.093

您必须在运行时设置该标志（我想您有某种激活码），请查看此帖子：[http](http://reedcopsey.com/2011/09/15/setting-uselegacyv2runtimeactivationpolicy-at-runtime/) ://reedcopsey.com/2011/09/15/setting-uselegacyv2runtimeactivationpolicy-at-runtime/ 。

它完美地工作了很多次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:03:08.327

`.exe.config`使用库为每个单独的可执行文件添加配置。

在 COM 服务的情况下，`dllhost.exe.config`虽然这在安全方面是丑陋的，但如果您确认这是您的情况，则值得额外考虑替代方案。

# javascript - 加载本地 Html 文件不引用 UIWebView 中的 js 文件

> ID：11328621
> 
> 赞同：2
> 
> 时间：2012-07-04T11:57:15.720
> 
> 标签：javascript, ios, uiwebview

我正在处理`UIWebView`项目，我想从项目资源中加载 HTML 文件。当我从 URL 运行时它工作正常，但是当我在本地查看 HTML 文件时，没有加载 JS 文件。加载本地 HTML 本地文件并不引用 .js 中的 js 文件`UIWebView`。

这是我加载 HTML 文件项目本地资源的代码并且不引用 js 文件：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"textfile" ofType:@"txt"];
NSError *error = nil;
NSString *string = [[NSString alloc] initWithContentsOfFile:path encoding:NSUTF8StringEncoding error:&error];

NSString *path1 = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path1];
NSLog(@"%@  >>> %@",baseURL,path);

[webview loadHTMLString:string baseURL:baseURL]; 
```

这段代码没有找到 JS 文件`UIWebView`，即使它成功地从项目资源中加载了图像文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:23:12.407

我发现问题是 js 文件不会自动复制到项目包中，因此，您可以尝试按照以下说明进行操作：

转到您的项目**目标**->单击选项卡到**Bulid Phases-** >展开部分**复制捆绑资源**->现在找到项目的所有文件bin捆绑资源检查未复制的js文件，因此，单击+按钮并手动添加js文件你的项目！

现在运行项目完美运行！

像下面的屏幕截图：

![在此处输入图像描述](../Images/62a7e1c269080b73722b4b2bf7ded714.png)

在您的项目中添加 js 文件后，屏幕截图如下：

![在此处输入图像描述](../Images/cf544f5affe9897cb92270955eafaad1.png)

欢迎！

# php - 使用 PHP 的 Google Maps API 查找两个位置之间的距离

> ID：11328625
> 
> 赞同：3
> 
> 时间：2012-07-04T11:57:28.640
> 
> 标签：php, google-maps

在我当前的项目（交付系统）中，我有一个可用的交付驱动程序列表，显示在订单页面上。但我需要的是显示每次送货到客户地址的距离。距离应显示在每个驾驶员姓名旁边。有人对我将如何处理有任何线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:40:31.520

假设您想要行驶距离而不是直线距离，您可以使用 Directions Web 服务：您需要从 PHP 脚本发出 http 或 https 请求并解析 JSON 或 XML 响应。

文档： [https ://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

例如：马萨诸塞州波士顿到马萨诸塞州康科德，途经马萨诸塞州查尔斯敦和马萨诸塞州列克星敦 (JSON) [http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown ,MA|列克星敦,MA&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false)

马萨诸塞州波士顿通过马萨诸塞州查尔斯顿和马萨诸塞州列克星敦前往马萨诸塞州康科德 (XML) [http://maps.googleapis.com/maps/api/directions/xml?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|列克星敦，MA&sensor=false](http://maps.googleapis.com/maps/api/directions/xml?origin=Boston,MA&destination=Concord,MA&waypoints=Charlestown,MA|Lexington,MA&sensor=false)

请注意，有使用限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-18T09:41:03.723

您可以使用 Google Maps API 和 PHP 轻松计算两个地址之间的距离。

```
$addressFrom = 'Insert from address';
$addressTo = 'Insert to address';
$distance = getDistance($addressFrom, $addressTo, "K");
echo $distance; 
```

您可以从这里获取 getDistance() 函数代码 - [http://www.codexworld.com/distance-between-two-addresses-google-maps-api-php/](http://www.codexworld.com/distance-between-two-addresses-google-maps-api-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T14:58:18.687

**这将在 2 个位置之间输出几秒钟**

```
$origin =urlencode('Optus Sydney International Airport, Airport Drive, Mascot NSW 2020, Australia');
$destination = urlencode('Sydney NSW, Australia');
$url = "https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=$origin&destinations=$destination&key=your_key";
$data = @file_get_contents($url);
$data = json_decode($data,true);
echo $data['rows'][0]['elements'][0]['duration']['value']; 
```

# shell - shell脚本中两个大文件的区别

> ID：11328636
> 
> 赞同：-1
> 
> 时间：2012-07-04T11:58:03.417
> 
> 标签：shell, diff, comm

文件 1：

```
e4300-2076g4j
e4300-2j82b4j
e4300-43w8b4j
e4300-4cppb4j
e4300-5cppb4j
e4300-6176g4j
e4300-6hy8v4j
e4300-6v7ch4j
e4300-7062b4j
e4300-8062b4j
e4300-8ch4j4j
e4300-92w8b4j
e4300-9dh4j4j
e4300-bch4j4j
e4300-cj82b4j
e4300-cnbz94j
e4300-dpy9c4j
e4300-dz66g4j
e4300-fnp3j4j
e4300-g37dr4j
e4300-gcppb4j
e4300-gmbz94j
e4300-gnknc4j
e4300-hwnnc4j
e4300-j266v4j
e4300-jmp3j4j
e4300-jy66g4j
e4310-1jbr1q1
e4310-294d2q1
e4310-2xnn3q1
e4310-2y533q1
e4310-2z533q1
e4310-41vg2q1
e4310-42vg2q1
e4310-4fvg2q1
e4310-4gvd5q1
e4310-4rtg2q1
e4310-54vg2q1
e4310-5fvt1q1
e4310-5ytg2q1
e4310-6cwd5q1
e4310-6hwd5q1
e4310-6kvg2q1
e4310-6ttg2q1
e4310-74vg2q1
e4310-87wd5q1
e4310-8bvg2q1
e4310-8dwd5q1
e4310-8gvd5q1
e4310-8jvt1q1
e4310-9cvg2q1
e4310-9fvt1q1
e4310-b4wn3q1
e4310-brtt1q1
e4310-cfvt1q1
e4310-cpwd5q1
e4310-d4wc3q1
e4310-d6cq3q1
e4310-dcvg2q1
e4310-dcwg2q1
e4310-djjp3q1
e4310-f1pn3q1
e4310-fhvd5q1
e4310-ftpn3q1
e4310-gfvt1q1
e4310-gfwd5q1
e4310-ghvt1q1
e4310-gvpn3q1
e4310-h3vg2q1
e4310-h6k05q1
e4310-hfwd5q1
e4310-hgvd5q1
e4310-j2pn3q1
e4310-j7vg2q1
e4310-jvrt4q1
e6220-5gl2xp1
e6220-9ty3xp1
e6220-b6m3xp1
e6220-b6n1xp1
e6220-b6nzwp1
e6220-b6p4xp1
e6220-b6q5xp1
e6220-bf80xp1
e6220-bfc8xp1
e6220-bfjywp1
e6220-bfw9xp1
e6220-bmdxwp1
e6220-bmhvwp1
e6220-csw5xp1
e6220-csw6xp1
e6420-1z81fs1
e6420-38p1fs1
e6420-3z81fs1
e6420-7qdc5r1
e6420-cng1fs1
e6420-gz81fs1
op760-78wsh4j
op760-8wvsh4j
op760-9wvsh4j
op760-hwvsh4j
op780-7x6405j
op780-8x6405j
op790-3t3x55j
op790-4jmx55j
op790-4kmx55j
op790-4pww55j
op790-4vyw55j
op790-5pww55j
op790-7f2x55j
op790-7t3x55j
op790-8xyw55j
op790-9lww55j
op790-bd2x55j
op790-bnmx55j
op790-bnww55j
op790-cv3x55j
op790-dkww55j
op790-fnmx55j
op790-gpww55j
op790-hnww55j
op790-jmmx55j 
```

文件 2：

```
e4300-2076g4j
e4300-2j82b4j
e4300-32w8b4j
e4300-43w8b4j
e4300-4cppb4j
e4300-5cppb4j
e4300-6176g4j
e4300-6v7ch4j
e4300-7062b4j
e4300-8062b4j
e4300-8ch4j4j
e4300-92w8b4j
e4300-9dh4j4j
e4300-bch4j4j
e4300-cj82b4j
e4300-cnbz94j
e4300-d062b4j
e4300-dpy9c4j
e4300-dz66g4j
e4300-g37dr4j
e4300-gcppb4j
e4300-gmbz94j
e4300-gnknc4j
e4300-j266v4j
e4300-jy66g4j
e4310-1cjp3q1
e4310-1jbr1q1
e4310-2xnn3q1
e4310-2y533q1
e4310-2z533q1
e4310-42vg2q1
e4310-4fvg2q1
e4310-4gvd5q1
e4310-4rtg2q1
e4310-5fvt1q1
e4310-5ytg2q1
e4310-6cwd5q1
e4310-6hwd5q1
e4310-6ttg2q1
e4310-74vg2q1
e4310-8dwd5q1
e4310-8gvd5q1
e4310-8jvt1q1
e4310-9cvg2q1
e4310-9fvt1q1
e4310-b4wn3q1
e4310-b8sy4q1
e4310-bmvg2q1
e4310-c44d2q1
e4310-cfvt1q1
e4310-cpwd5q1
e4310-d4wc3q1
e4310-d6cq3q1
e4310-dcvg2q1
e4310-dcwg2q1
e4310-djjp3q1
e4310-f1pn3q1
e4310-f4vg2q1
e4310-f7st1q1
e4310-fhvd5q1
e4310-gfvt1q1
e4310-gfwd5q1
e4310-ghvt1q1
e4310-h3vg2q1
e4310-h6k05q1
e4310-hfwd5q1
e4310-j7vg2q1
e4310-jvrt4q1
e6220-5gl2xp1
e6220-9ty3xp1
e6220-b6m3xp1
e6220-b6n1xp1
e6220-b6nzwp1
e6220-b6p4xp1
e6220-b6q5xp1
e6220-bf80xp1
e6220-bfc8xp1
e6220-bfjywp1
e6220-bfw9xp1
e6220-bmhvwp1
e6220-csw5xp1
e6220-csw6xp1
e6420-1z81fs1
e6420-27p1fs1
e6420-38p1fs1
e6420-3z81fs1
e6420-7qg1fs1
e6420-8d46fs1
e6420-cng1fs1
e6420-f6p1fs1
e6420-f7p1fs1
e6420-gz81fs1
op760-78wsh4j
op760-8wvsh4j
op760-9wvsh4j
op760-hwvsh4j
op780-7x6405j
op780-8x6405j
op790-3t3x55j
op790-4jmx55j
op790-4kmx55j
op790-4pww55j
op790-4vyw55j
op790-5pww55j
op790-7f2x55j
op790-7t3x55j
op790-8xyw55j
op790-9lww55j
op790-bd2x55j
op790-bnmx55j
op790-bnww55j
op790-cv3x55j
op790-dkww55j
op790-fnmx55j
op790-gpww55j
op790-hnww55j
op790-jmmx55j 
```

文件 1：121 行 文件 2：117 行

文件 1 和文件 2 共有 117 行，输出必须显示不同的行。

我正在尝试使用 diff、comm 和 fgrep，但没有结果。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:04:51.100

重击：

```
 comm -3 <(sort file1) <(sort file2) 
```

# database - 为需要处理大量 I/O 的 node.js 服务器选择数据库？

> ID：11328640
> 
> 赞同：2
> 
> 时间：2012-07-04T11:58:27.347
> 
> 标签：database, node.js, webserver

对于需要处理大量并发数据库访问（我假设至少有 1000 多个并发请求“更新”条目）的 node.js 服务器，我应该使用哪种数据库，如果有的话？

我打算使用 MySQL，每个请求都有一个 DB 连接，但看起来可能有更合适的 DB 选择来处理许多 DB 连接（主要是更新条目，正如我上面提到的用双引号引起的）。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:24:17.070

我的建议是查看 redis，具体取决于数据库结构和要存储的数据量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:26:31.957

我推荐了一个分片的 MongoDB 集群。Mongoose 是 Node 的一个包，可以很好地与 Mongo 配合使用，并且非常易于使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T13:41:05.887

我会推荐：

*   MongoDB：如果你有很多数据应该可以分布在许多服务器上
*   Redis：比 MongoDB 更快，但如果你达到了拥有更多数据的限制，那么一台服务器就可以处理

它们都具有原子更新操作，这使它们成为您的不错选择。（这意味着您可以更新对象而无需事先获取它。）

它们都与您现在可能使用的 MySQL 不同，您需要测试它们中的哪一个更适合您的数据结构。

可以在这里找到一个简短的比较：http: [//kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis/](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis/)

我能给你的最佳建议：尝试不同的技术，对它们进行基准测试，然后做出决定。

# javascript - html选择中的默认值

> ID：11328644
> 
> 赞同：1
> 
> 时间：2012-07-04T11:58:45.770
> 
> 标签：javascript, python, jinja2

嗨我有一个问题如何在 jinja 2 的 html 选择中设置默认值 ex.30

代码如下：

```
<select name="cmo_etc">
    {% for i in range(1,13): %}
    <option {% if set_etc == (i*5) %} selected="selected" {% endif %} value="{{ i*5 }}">
         {{ i*5 }}
    </option>
    {% endfor %}
</select> 
```

代码工作正常，但默认值为 5。我需要将其更改为另一个值 ex.30

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:01:43.187

我会尝试简单地检查`i`索引变量

```
{% for i in range(1,13): %}
   <option {% if i == 6 %} selected="selected" {% endif %} value="{{ i*5 }}">
   {{ i*5 }}</option>
{% endfor %} 
```

当`i == 6`你的 value 属性是 30

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:02:48.713

在您的情况下，该`set_etc`变量是默认值。将其更改为 30 或任何您想要的。

# iphone - 在 Storyboard 的 UITabBarController 中添加按钮

> ID：11328648
> 
> 赞同：-2
> 
> 时间：2012-07-04T11:59:02.293
> 
> 标签：iphone, ios, ios5, xcode-storyboard, uistoryboardsegue

我有以下故事板：

![故事板](../Images/0714ddd915d82d78b1c1e17f554f7c58.png)

在标签栏控制器中，我有一个添加按钮，带有一个视图控制器的 segue。我需要使用方法“prepareForSegue:”，因为我需要传输一个对象，但在存储库表视图中不会触发该方法。

如何在存储库表视图中检测方法“prepareForSegue：”？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:05:14.397

我想对于“检测方法`prepareForSegue`”，您的意思是“确定`prepareForSegue`方法中的正确序列”。

为此，您可以使用`[segue identifier]`字符串比较方法`isEqualToString:`将其与您在情节提要中设置的标识符进行比较。

此外，请确保按钮、表格视图单元格、按钮或其他元素附加到正确的 segue。你当然也可以在故事板中做到这一点。如果您需要在代码中执行此操作，例如因为按钮是通过编程方式创建的，则您必须自己调用 segue。在您刚刚使用的按钮处理程序中

```
[self performSegueWithIdentifier:"SegueIdentifier" sender:self]; 
```

# html - 答：悬停不工作？

> ID：11328649
> 
> 赞同：0
> 
> 时间：2012-07-04T11:59:04.113
> 
> 标签：html, css, hyperlink, hover, mouseover

**编辑：没有缓存的刷新解决了这个问题..**

出于某种原因，我的 css 中的 a:hover 不再起作用了。我不知道为什么不。（这是 tumblr 的主题，[此](http://potter.tumblr.com/)网页，完整代码[在这里](http://pastebin.com/VZYDzugN)。）常规的 a 属性工作正常，但无论我在 a:hover 中写什么，鼠标悬停时链接都不会改变。

```
a {color: {color:Text link}; 
text-decoration:none; 
font-style:italic; 
letter-spacing:0.1em;}

a:hover {color: {color:Text link hover};} 
```

编辑：它应该很奇怪，它曾经工作，直到我显然改变了一些错误的东西 - 但如果我使用以下代码，悬停仍然不起作用：

```
a {color: red;}
a:hover {color: blue;} 
```

不同类别的编码大致相同。我没有在代码中的其他任何地方使用这些类，所以我看不到它如何被覆盖，我尝试添加！important，但这不起作用。悬停工作的唯一类是 .desclink 和 .post。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:03:18.510

```
a {
color:red;
text-decoration:none; 
font-style:italic; 
letter-spacing:0.1em;
}

a:hover {color: blue;} 
```

试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:03:59.193

你的 CSS 是错误的，这是正确的。

```
a {color:Black;//Color you want for link 
text-decoration:none; 
font-style:italic; 
letter-spacing:0.1em;}

a:hover {color:Red; }//Color on hover 
```

# uiviewcontroller - UITabbarController 关闭模式 UINavigationController

> ID：11328651
> 
> 赞同：1
> 
> 时间：2012-07-04T11:59:07.440
> 
> 标签：uiviewcontroller, uinavigationcontroller, uitabbarcontroller, modalviewcontroller, dismiss

我在这里遇到了一个非常有趣的问题。我的 iPhone 应用程序在 AppDelegate 中有一个 UITabbarController 作为 rootViewController。

如果是第一次打开app，基本都要配置好。为此，我创建了一个 UINavigationController 并告诉 tabbarController 以模态方式呈现它：

```
firstRun = [[firstRunViewController alloc] init];
navCtrl = [[UINavigationController alloc] initWithRootViewController:firstRun];
[[self tabBarController] presentModalViewController:navCtrl animated:NO]; 
```

配置完成后，我想摆脱 firstRunViewController。我经常使用这种技术，使用`-dismissModalViewControllerAnimated:`.

但在这个星座中这是行不通的。我将哪个控制器称为解雇并不重要。我通过 tabbarController、rootViewController、当前活动的 viewController、原因 self 和其他几个控制器进行了尝试。

每次我打电话`-dismissModalViewControllerAnimated:`都会遇到这个异常：

```
'UIViewControllerHierarchyInconsistency', reason: 'presentedViewController for controller is itself on dismiss for: <UINavigationController:… 
```

有人可以帮忙吗？在此先感谢，致以诚挚的问候，朱利安

**编辑** 在我的 AppDelegate 中，我使用 UITabbarController 作为主窗口的 rootViewController：

```
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

然后我创建一个 UINavigationController 并告诉 UITabbarController 呈现 modalViewController：

```
UINavigationController *navCtrl = [[UINavigationController alloc] initWithRootViewController:firstRun];
[[self tabBarController] presentModalViewController:navCtrl animated:NO]; 
```

当我现在在 firstViewController 上调用 -dismissModalViewControllerAnimated: 时，我收到了上面的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:04:02.190

在我看来，您正在滥用 UITabbarController。这个类，即使是 UIViewController 的子类，并没有真正使用很多 UIViewController 基础结构。

你想要的是对你现在拥有的东西的轻微扩展。在您的 appDelegate 中创建一个新的 UIViewController 子类，并将其作为单个对象添加到数组中，并将 tabBar 的 viewControllers 设置为该数组。将您的子类的 hidesBottomBarWhenPushed 设置为 YES，以便在标签栏可见时将其隐藏。

现在您的应用程序将启动，您的 UIViewController 子类将成为最前面的视图。您可以使这个视图成为您想要以模态方式呈现的视图，或者您可以使用某种动画从您的子类中呈现该视图。哦，如果你使用启动视图作为你的子类的背景图像，你真的可以让它平滑过渡——我现在就这样做。

当您的模态视图完成后，您可以实例化您想要显示的任何视图，并将 UITabBarController 设置为将这些视图与 tabBarController.viewControllers（或动画版本）一起使用。噗，你的 UIViewController 会被替换（并且在 ARC 下会消失）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:37:09.070

我没有机会检验我的假设，但我怀疑这个问题可能取决于您过早呈现模态视图这一事实，即过早意味着在主窗口有机会设置选项卡之前酒吧控制器。因此，我建议进行以下更改：

1.  创建一个方法来实例化您的导航控制器：

    ```
    - (void)initializeAndPresentNavigationController {
      UINavigationController *navCtrl = [[UINavigationController alloc] initWithRootViewController:firstRun];
      [[self tabBarController] presentModalViewController:navCtrl animated:NO];
    } 
    ```

2.  不是直接从 appDidFinishLaunching 显示导航控制器，而是异步调用上述方法：

    ```
    [self performSelector:@selector(initializeAndPresentNavigationController) withObject:nil afterDelay:0.0]; 
    ```

这里调用方法的技巧就像我在 2 中所做的那样，调用`initializeAndPresentNavigationController`将简单地推送到主循环上，并在您的应用程序有可能构建其初始 UI 后执行。

希望对你有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T19:26:24.747

我终于自己找到了答案！我只是看不到树木的树林！我现在很开心！:)

我做了非常愚蠢的事情：在设置 viewControllers 的最后一个 viewController 中，我必须根据用户是否是管理员来更改 tabars viewControllers。所以我做了：

```
appDelegate.tabBarController.viewControllers = [NSArray arrayWithObjects:appDelegate.readState,
                                                appDelegate.navCtrl,
                                                appDelegate.settings, nil]; 
```

您可以看到我正在将 AppDelegate 的“navCtrl”添加到选项卡栏的 viewControllers。所以我试图关闭我刚刚添加到 parentViewControllers (UITabbarController) 子控制器的 viewController。

不建议在同一时刻忽略我想展示的东西！:))

# .net - 使用 razor 以表格形式计算（包括小数）

> ID：11328652
> 
> 赞同：1
> 
> 时间：2012-07-04T11:59:07.830
> 
> 标签：.net, forms, c#-4.0, razor

我对所有这一切都很陌生，并且真的很难找到任何我正在尝试做的事情的例子。

我想要创建的只是一个简单的输入一些详细信息并对其执行计算的方法。

我可以做到加法和乘法等。但是当涉及到十进制答案时，我可以让它工作。

作为一个额外的我想使用下拉作为变量说根据下拉说* 1.4如果它的男性和* 1.01如果它的女性

以下是我到目前为止所拥有的

```
@{
    var total = 0;
    var totalMessage = "";
    if(IsPost) {

        var age_= Request["frmage"];
        var weight_ = Request["frmweight"];
        var SerCre_ = Request["frmSerCre"];
        var sexfactor_ = Request["frmGender"];

        var age = age_.AsInt();       
        var weight= weight_.AsDecimal();
        var SerCre = SerCre_.AsDecimal();

        total =   (((140-age)*weight)*sexfactor)/SerCre ;
        totalMessage = "Total = " + total;
    }
}

 <form method="post">
    <p><label for="text1">Age:</label>
      <input type="text" name="frmAge" size="3"/>Years
    </p>
    <p><label for="text2">Weight:</label>
      <input type="text" name="frmWeight" />in Kg (1st = 6.35kg)
    </p>
    <p><label for="text3">Serum Creatinine:</label>
      <input type="text" name="frmSerCre" /> μmol/L
    </p>
   <p><label for="text4">Gender:</label>
      <select name="frmGender" id="select">
        <option value="M" >Male</option>
        <option value="F" >Female</option>
      </select>

    </p>
    <p><input type="submit" value="Calculate" /></p>
  </form>

  <p>@totalMessage</p> 
```

一些帮助我可能会以完全错误的方式去做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:05:08.983

在哪里说：

```
totalMessage = "Total = " + total; 
```

试试这个：

```
totalMessage = "Total = " + total.ToString("0.00"); 
```

让我知道这是否有帮助。

祝你好运

========================================

这是我在我的机器上工作的代码：

```
@{ 
```

**var总= 0m；**

```
 var totalMessage = "";
    if (IsPost)
    {
        var age = Request["frmage"].AsInt();
        var weight = Request["frmweight"].AsDecimal();
        var SerCre = Request["frmSerCre"].AsDecimal();
        var sexfactor = Request["frmGender"].AsBool();
        total = Convert.ToDecimal(age*SerCre);
        totalMessage = "Total = " + total.ToString("0.00");
    }
}

<form method="post">
<p>
    <label for="text1">Age:</label>
    <input type="text" name="frmAge" size="3" />Years
</p>
<p>
    <label for="text2">Weight:</label>
    <input type="text" name="frmWeight" />in Kg (1st = 6.35kg)
</p>
<p>
    <label for="text3">Serum Creatinine:</label>
    <input type="text" name="frmSerCre" />
    μmol/L
</p>
<p>
    <label for="text4">Gender:</label>
    <select name="frmGender" id="select">
        <option value="M">Male</option>
        <option value="F">Female</option>
    </select>
</p>
<p>
    <input type="submit" value="Calculate" /></p>
</form>
<p>@totalMessage</p> 
```

# android - 消耗性列表扩展了包含复选框的 cursorTreeAdapter

> ID：11328655
> 
> 赞同：1
> 
> 时间：2012-07-04T11:59:20.553
> 
> 标签：android, expandablelistview

问题在于在滚动时保存复选框的状态。当我向下或向上滚动时，由于屏幕重绘，一些未选中的项目会被选中。如果有人可以帮忙请。我将提供适配器的代码。

```
final class ExpAdapter extends CursorTreeAdapter {
        private ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();

        LayoutInflater mInflator;
        CursorTreeAdapter cur;

        class ViewHolder {
                    public TextView textView;
                    public CheckBox checkbox;
                }

        public ExpAdapter(Cursor cursor, Context context)
        {
            super(cursor, context);
            mInflator = LayoutInflater.from(context);
        }

        @Override
        protected void bindChildView(View view, Context context, final Cursor cursor,
                boolean isLastChild) {
            //TextView tvChild = (TextView) view.findViewById(android.R.id.text1);

               final TextView tvChild = (TextView) view.findViewById(R.id.label);
                tvChild.setText(cursor.getString(cursor
                        .getColumnIndex(tablename.columname...)));//child

               final CheckBox  chb = (CheckBox)view.findViewById(R.id.chkbox);

                chb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        // TODO Auto-generated method stub
                        if (buttonView.isChecked()) {
                            //buttonView.setChecked(true);
                            buttonView.setChecked(true);
                             groupcode = mCuror2.getInt(tablename.columname));
                             levelid = mCuror2.getInt(mCuror2.getColumnIndex(tablename.columname));

                             levelidarray.add(String.valueOf(levelid));
                             groupcodearray.add(String.valueOf(groupcode));

                             String x=(String)tvChild.getText();

                             array.add(x);
                            Toast.makeText(getApplicationContext(),""+ array, Toast.LENGTH_SHORT).show();
                            // do some operations here

                        }
                        else 
                                {
                            buttonView.setChecked(false);
                            //buttonView.setChecked(false);
                            //itemChecked.set(cursor.getPosition(), false);
                            // do some operations here
                            String x = (String)tvChild.getText();

                         levelidarray.remove(String.valueOf(levelid));
                         groupcodearray.remove(String.valueOf(groupcode));
                            array.remove((String)x);

                              Toast.makeText(getApplicationContext(),""+ array, Toast.LENGTH_SHORT).show();

                                }
                    }
                });

           }

       @Override
        protected void bindGroupView(View view, Context context, Cursor cursor,  boolean isExpanded)

           {

               TextView tvGrp = (TextView) view.findViewById(android.R.id.text1);
                tvGrp.setText(cursor.getString(cursor
                        .getColumnIndex(tablename.columname)));

               TextView code = (TextView) view.findViewById(android.R.id.text2);

            }

        @Override
        protected Cursor getChildrenCursor(Cursor groupCursor)
            {
               int groupId = groupCursor.getInt(groupCursor
                        .getColumnIndex(tablename.columname));

                String filter2 = " LEVEL_ID = " +groupId;
                mCuror2 = dbconnection....,filter2, null, null, null, null);

                return mCuror2;

            }

        @Override
        protected View newChildView(Context context, Cursor cursor,
                boolean isLastChild, ViewGroup parent)
        {

                View mView = mInflator.inflate(R.layout.listviewcheckbox, null);

                 final TextView tvChild = (TextView) mView.findViewById(R.id.label);

                tvChild.setText(cursor.getString(cursor
                        .getColumnIndex(tablename.columname)));

                CheckBox chb = (CheckBox)mView.findViewById(R.id.chkbox);

                chb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        // TODO Auto-generated method stub
                        if (buttonView.isChecked()) {
                            //buttonView.setChecked(true);
                            buttonView.setChecked(true);
                             groupcode = mCuror2.getInt(mCuror2.getColumnIndex(tablename.columname));
                             levelid = mCuror2.getInt(mCuror2.getColumnIndex(tablename.columname));

                             levelidarray.add(String.valueOf(levelid));
                             groupcodearray.add(String.valueOf(groupcode));

                             String x=(String)tvChild.getText();

                             array.add(x);
                            Toast.makeText(getApplicationContext(),""+ array, Toast.LENGTH_SHORT).show();
                            // do some operations here

                        }
                        else 
                                {
                            buttonView.setChecked(false);
                            //buttonView.setChecked(false);
                            //itemChecked.set(cursor.getPosition(), false);
                            // do some operations here
                            String x = (String)tvChild.getText();

                         levelidarray.remove(String.valueOf(levelid));
                         groupcodearray.remove(String.valueOf(groupcode));
                            array.remove((String)x);

                              Toast.makeText(getApplicationContext(),""+ array, Toast.LENGTH_SHORT).show();

                                }
                    }
                });

                return mView;

            }

        @Override
        protected View newGroupView(Context context, Cursor cursor,
                boolean isExpanded, ViewGroup parent)
            {   
                View mView = mInflator.inflate(
                        android.R.layout.simple_expandable_list_item_2, null);
                TextView tvGrp = (TextView) mView.findViewById(android.R.id.text1);
                tvGrp.setText(cursor.getString(cursor
                        .getColumnIndex(tablename.columname)));

                TextView code = (TextView)mView.findViewById(android.R.id.text2);
                code.setText(cursor.getString(cursor.getColumnIndex(tablename.columname)));

                return mView;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:03:17.570

我使用了[ResourceCursorTreeAdapter](http://developer.android.com/reference/android/widget/ResourceCursorTreeAdapter.html)，我的解决方案是：

```
import android.util.SparseArray;

...

/**
 * A map of children IDs to selection state.
 */
private final SparseArray<Boolean> mSelectedChildrenMap = new SparseArray<Boolean>();

...

@Override
protected void bindChildView(View view, Context context, Cursor cursor, boolean isLastChild) {
    final int _id = cursor.getInt(...); // get ID

    Boolean selected;
    if (mSelectedChildrenMap.get(_id) == null) {
        selected = false;
        mSelectedChildrenMap.put(_id, selected);
    } else
        selected = mSelectedChildrenMap.get(_id);

    /*
     * Checkbox, you can use "view holder" approach...
     */
    CheckBox mCheckBox = (CheckBox) view.findViewById(...);
    mCheckBox.setOnCheckedChangeListener(null);
    mCheckBox.setChecked(selected);
    mCheckBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            mSelectedChildrenMap.put(_id, isChecked);
        }// onCheckedChanged()
    });

    ...
}// bindChildView()

...

@Override
public void notifyDataSetChanged(boolean releaseCursors) {
    super.notifyDataSetChanged(releaseCursors);
    /*
     * Only clears the map if releaseCursors == true.
     */
    if (releaseCursors)
        synchronized (mSelectedChildrenMap) {
            mSelectedChildrenMap.clear();
        }
}// notifyDataSetChanged()

@Override
public void notifyDataSetInvalidated() {
    super.notifyDataSetInvalidated();
    /*
     * Clears the map.
     */
    synchronized (mSelectedChildrenMap) {
        mSelectedChildrenMap.clear();
    }
}// notifyDataSetInvalidated() 
```

希望能帮助到你 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:41:30.277

如果您没有将检查状态存储在数据库中，则需要设置一个数组来跟踪检查状态，然后使用它在适配器中进行设置。由于您需要组和子位置来引用它，我认为您必须在`getChildView`方法中而不是在`bindChildView`.

声明一个类变量：

```
boolean[][] checkedStatus; 
```

在您的构造函数中填充它：

```
public ExpAdapter(Cursor cursor, Context context) {      
    super(cursor, context);      
    mInflator = LayoutInflater.from(context);      
    checkedstatus = new boolean[cursor.getCount()][];                // initializae the first dimension of array
    for (int i=0; i<cursor.getCount(); i++){                         // iterate through the group cursor count
        cursor.moveToPosition(i);
        Cursor childCursor = ...                                     // get the childcursor for group cursor position i 
        checkedStatus[i] = new boolean[childcursor.getCount()];    // initialize the second dimension of array for group position i
        for (int j=0; j<childCursor.getCount(); j++){                // iterate through the childCursor for group position i
            checkedStatus[i][j] = false;                            // initialize the item to not checked for group position i, child position j
        }
    }
} 
```

然后在你的使用它`getChildView`来设置状态：

```
CheckBox chb = (CheckBox)mView.findViewById(R.id.chkbox);
if (checkedStatus[groupPosition][childPosition] == true) {
    chb.setChecked(true);
} else {
    chb.setChecked(false);
} 
```

一定要更新你的`onCheckedChanged`方法中的数组。

您的另一个选择是将检查的状态存储在数据库中，然后您可以在您的 db 中检查它，然后`bindView`在更改时将其写入数据库并完成。当然，惩罚是每次单击复选框时都必须访问数据库以写入/读取更改，因此我通常避免使用此选项。

# c# - 如果单击父对话框，则使 MessageBox 弹出到前面

> ID：11328658
> 
> 赞同：3
> 
> 时间：2012-07-04T11:59:37.313
> 
> 标签：c#, .net, messagebox

我在使用 MessageBoxes 时遇到问题。当 MessageBox 弹出并且我转到另一个窗口/程序时，MessageBox 有时会在父对话框后面结束。因此，我无法丢弃 MessageBox，因为父对话框被禁用并且我无法移动它。

当单击父对话框或类似方法时，是否有任何方法可以使 MessageBox 弹出到前面？我正在使用 C#。

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:05:21.450

当您调用`MessageBox.Show()`它时，它具有将 Owner 作为第一个参数的重载：

```
MessageBox.Show(ParentForm, "Title",...) 
```

这应该有助于解决这个问题。

# asp.net-mvc - Dev Express Mvc 编辑 GridViewSetting 错误？

> ID：11328662
> 
> 赞同：0
> 
> 时间：2012-07-04T12:00:05.827
> 
> 标签：asp.net-mvc, gridview, devexpress

我的代码太长了，很抱歉:)

```
@model IEnumerable<Osos11.Models.Customers>
@Html.DevExpress().GridView(
settings =>
{
    settings.Name = "gvEditing";
    settings.KeyFieldName = "sno";
    settings.CallbackRouteValues = new { Controller = "Customer", Action = "EditingPartial" };
    settings.Width = System.Web.UI.WebControls.Unit.Percentage(100);

    settings.Columns.Add(column =>
    {
        column.Caption = "#";
        column.SetDataItemTemplateContent(c =>
        {
            ViewContext.Writer.Write(
                Html.ActionLink("Edit", "EditingEdit", new { sno = DataBinder.Eval(c.DataItem, "sno") }) + "&nbsp;" +
                Html.ActionLink("Delete", "EditingDelete", new { sno = DataBinder.Eval(c.DataItem, "sno") },
                    new { onclick = "return confirm('Do you really want to delete this record?')" })
            );
        });
        column.SetHeaderTemplateContent(c =>
        {
            ViewContext.Writer.Write(
                Html.ActionLink("New", "EditingEdit", new { sno = -1 }).ToHtmlString()
            );
        });
        column.Settings.AllowDragDrop = DefaultBoolean.False;
        column.Settings.AllowSort = DefaultBoolean.False;
        column.Width = 70;
    });
    settings.Columns.Add("Name");
    //settings.Columns.Add(column =>
    //{
    //    column.FieldName = "CategoryID";
    //    column.Caption = "Category";

    //    column.ColumnType = MVCxGridViewColumnType.ComboBox;
    //    var comboBoxProperties = column.PropertiesEdit as ComboBoxProperties;
    //    comboBoxProperties.DataSource = NorthwindDataProvider.GetCategories();
    //    comboBoxProperties.TextField = "CategoryName";
    //    comboBoxProperties.ValueField = "CategoryID";
    //    comboBoxProperties.ValueType = typeof(int);
    //});
    settings.Columns.Add("CustomerNumber");
    //settings.Columns.Add("UnitPrice").PropertiesEdit.DisplayFormatString = "c";
    //settings.Columns.Add("UnitsInStock");
    //settings.Columns.Add("Discontinued", MVCxGridViewColumnType.CheckBox);

    settings.ClientLayout = (s, e) =>
    {
        if (e.LayoutMode == ClientLayoutMode.Loading)
        {
            if (Session["GridState"] != null)
                e.LayoutData = (string)Session["GridState"];
        }
        else
            Session["GridState"] = e.LayoutData;
    };
    settings.PreRender = (s, e) =>
    {
        if (ViewData["VisibleID"] == null) return;

        ASPxGridView grid = (ASPxGridView)s;
        grid.MakeRowVisible(ViewData["VisibleID"]);
    };
}).Bind(Model).GetHtml() 
```

我收到了这个错误

```
Compiler Error Message: CS1660: Cannot convert lambda expression to type 'DevExpress.Web.Mvc.GridViewSettings' because it is not a delegate type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:46:48.630

看来这个问题是由 GridView 定义中的任何表达式都无效引起的。因此，View Engine 无法识别整个 GridView 的定义（lambda 表达式）。

# c# - 在按钮 1 中创建的数据表发送到按钮 2

> ID：11328663
> 
> 赞同：0
> 
> 时间：2012-07-04T12:00:13.260
> 
> 标签：c#, asp.net

我的问题是，如果 button_2 有可能调用/使用在 button_1 中创建的数据表中保存的数据。让我们说

```
void Button1_Click(Object sender, EventArgs e)
{
  //some code to fill the datatable
} 
```

现在按钮 1 代码已经完成并且它可以工作，我唯一的问题是我不知道如何将 de 数据表从 button_1 发送到 button_2 这样 button_2 可以在数据表中使用相同的数据存储，顺便说一下我使用 C# ，asp.net，而不是使用 Visual Studio。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:13:18.710

在你的函数之外声明你的 DataTable

```
DataTable _myDataTable = new DataTable

void Button1_Click(Object sender, EventArgs e)
{
  //some code to fill the datatable
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:20:31.467

我建议你考虑一下流程。如果两个按钮做同样的事情，那么为什么需要两个按钮？

如果两个按钮的工作不同，但数据相同，那么您可以这样做。您可以将数据表存储在内存中。并访问它。

```
 DataTable _myDataTable = new DataTable();

   //get Method

    public DataTable FillDatatable(DataTable _myDataTable)
    {
    return _myDataTable;
    } 
```

在 button2 点击，你检查它的无效性。像这样 。

```
if(_myDataTable !=NULL)
{
  If(_myDataTable.Rows.Count > 0 ) 
   //then do some fun  with that data 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T14:09:22.350

由于您声明数据是在事件处理程序中获取的，`Button1`并且它应该在事件处理程序中可用，因此`Button2`您必须以某种方式持久化数据表，以便它在回发中存活。

有几种可能性：

*   视图状态（只要对象是`Serializable`，因为`DataTable`它似乎工作）
*   会话（如果您使用会话）
*   应用范围 (Application["yourKeyName"] = dbTable;)
*   合适类的静态成员
*   服务器缓存

或者，如果用于获取数据的数据库操作不是“繁重”，您可以在需要时从那里加载它。

有关状态管理的更多信息，请参阅

[http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)

**编辑**：给你一个更具体的建议。尝试存储`DataTable`在会话中，像这样

```
Session["preBuiltDataTable"] = theTable; 
```

在 Button1_Click 的末尾。然后使用它获取对它的引用

```
DataTable tableFromB1Click = Session["preBuiltDataTable"] as DataTable;
if (tableFromB1Click != null)
{
    // do stuff here
} 
```

在 Button2_Click 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:07:51.323

为数据存储创建一个单独的函数 [SaveDataTable(DataTable dt)]，它接受 DataTable 作为参数，并从 button1 和 button2 的单击函数中调用它。

希望这对您有所帮助。编码快乐！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T12:14:28.397

假设创建 1 个函数

```
public void fgh()
 {
    //write down your database code such as
    using(con=new SqlConnection(your connection string))
    { 
      cnn=new SqlCommand( your sql command);
      cnn.Connection=con;
      using(ds=new Dataset())
        {
          con.Open();
          da.Fill(ds);
       }
  }
} 
```

现在你有了功能，在不同的按钮之间调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T12:17:51.557

将 DataTable 分配给 ViewState，例如

```
protected void Button1_Click(Object sender, EventArgs e)
{
    ViewState["DT"] = dt;              // dt is the DataTable
} 
```

使用数据表如下：

```
protected void Button2_Click(Object sender, EventArgs e)
{
    DataTable dt2 = (DataTable)ViewState["DT"];              // dt is the DataTable
} 
```

# vim - Nerdtree - 保存打开目录的状态

> ID：11328664
> 
> 赞同：17
> 
> 时间：2012-07-04T12:00:20.097
> 
> 标签：vim, nerdtree

对我来说，一个典型的工作流程是打开 Vim（准确地说是 MacVim），执行以下操作：

```
:NERDTree <bookmark> 
```

然后手动打开我想使用的各种子目录。通常，它与我上次处理该项目时打开的目录集相同。我知道`O`recursive-open 命令，但如果它是一棵大树，那么我必须去关闭它们的负载以清除屏幕。

有没有办法保存那些打开的/一般的“状态”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T16:59:22.603

不幸的是，在 NERDTree 中还没有办法做到这一点。但是，如果您觉得该功能值得关注，您可以[自己添加它](https://github.com/scrooloose/nerdtree/fork_select)或在 GitHub 上[提交请求，它](https://github.com/scrooloose/nerdtree/issues/new)很快就会提供给您。

**编辑：**我冒昧地自己提交了功能请求；[您可以在此处跟踪其状态](https://github.com/scrooloose/nerdtree/issues/248)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T12:03:07.047

当然只需用 ":mksession ~/mysession.vim" 保存会话。":mks" 也可以。然后只需获取文件即可。

# jsp - 浏览器中的超时消息

> ID：11328665
> 
> 赞同：0
> 
> 时间：2012-07-04T12:00:23.447
> 
> 标签：jsp

我正在使用 JSP 运行一个后台操作，这将需要 5 分钟以上。但我在浏览器中收到屏幕超时消息。有什么方法可以消除超时消息吗？我的代码是

```
<%         
 System.out.println("vinoth in Execute jsp PATH="+getServletContext().getRealPath(""));
 PhNo=request.getParameter("phone");        
 Email =request.getParameter("email");  
 result =  AntExceute.antTest(getServletContext().getRealPath(""),PhNo,Email);      
 if(result)
     response.sendRedirect("success.jsp");  
 else
   response.sendRedirect("fail.jsp");  %> 
```

提前致谢

# eclipse - 动态 Web 应用程序、Eclipse、JSF 中的异常 java.lang.NoClassDefFoundError

> ID：11328667
> 
> 赞同：5
> 
> 时间：2012-07-04T12:00:30.260
> 
> 标签：eclipse, jsf, xhtml, noclassdeffounderror

当我运行我的应用程序时，当我按下按钮并重定向到另一个 xhtml 页面时，一切都很好。然后 Eclipse 控制台，直到我停止服务器显示：

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/ChatAzure] threw exception [javax/servlet/jsp/jstl/core/Config] with root cause
java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config
    at com.sun.faces.application.view.JspViewHandlingStrategy.executePageToBuildView(JspViewHandlingStrategy.java:345)
    at com.sun.faces.application.view.JspViewHandlingStrategy.buildView(JspViewHandlingStrategy.java:154)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我使用：eclipse、jsf2-1-7、jstl-1.2.jar、Tomcat v0.7。我不知道怎么了，我需要帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T12:07:54.350

提到的类是 JSTL 的一部分。这通常已经由成熟的 Java EE 容器提供，但在 Tomcat 中不是作为准系统 JSP/Servlet 容器提供的。您需要自己提供 JSTL 以及 Web 应用程序。它最终必须放在 webapp 的运行时类路径中。

您正确地提到`jstl-1.2.jar`了（我假设它正是您可以在[我们的 JSTL wiki 页面](https://stackoverflow.com/tags/jstl/info)中找到的那个），但是这个问题表明它显然没有放在正确的位置。您需要将它放在`/WEB-INF/lib`web 项目的文件夹中。此文件夹包含在 webapp 的默认运行时类路径中。没有什么需要做的了。如果您曾经为了解决它而在项目的*构建路径属性中摆弄过，您应该***撤消**所有这些尝试。

* * *

**与具体问题无关**：您为什么仍在使用旧版 JSP？自 JSF 2.0 以来，Facelets (XHTML)已*弃用并取而代之。*确保您在学习 JSF 时阅读的是最新的 JSF 2.x 资源，而不是 JSF 1.x 资源。

# c# - 在 XML 文档中使用 C# 从不同分支的父节点检索叶子

> ID：11328668
> 
> 赞同：3
> 
> 时间：2012-07-04T12:00:31.090
> 
> 标签：c#, xml

```
<Root>
  <P1 Text ="A" >
    <P2 Text = "AA">
      <P3 Text = "AAA">
        <L Text = "l_A"/>
        <L Text = "l_B"/>
        <L Text = "l_C"/>
      </P3>
      <P3 Text = "BBB">
        <L Text = "l_D"/>
        <L Text = "l_E"/>
        <L Text = "l_F"/>
      </P3>
    </P2>
    <P2 Text = "BB">
       <L Text = "l_G"/>
       <L Text = "l_H"/>
       <L Text = "l_I"/>
    </P2>
  </P1>
</Root> 
```

从包含数千个可变嵌套节点（最多 10 级）的 XML 文档中，我想以编程方式仅检索属于任何“P”父级的叶子，如下所示：例如，在上面的示例中，选择 P2“AA”会产生 l_A 到 l_F 和 P3 “BBB” 会产生 l_D 到 l_F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:31:38.577

像这样的东西（返回字符串列表）：

```
 XDocument doc = XDocument.Load(@"test.xml");

    string level = "P3";
    string levelAttr = "AAA";

    var list = (from d in doc.Descendants(level)
                let xAttribute = d.Attribute("Text")
                where xAttribute != null && xAttribute.Value == levelAttr
                from l in d.Descendants("L")
                let lAttribute = l.Attribute("Text")
                where lAttribute != null
                select lAttribute.Value); 
```

如果`Text`属性始终存在，您可以删除属性空检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:46:27.317

一种方法是使用*XPath*（`XmlDocument`如果您不使用*LINQ*）

你的*XPath*可能是这样的：

```
//P2[@Text='AA']//L/@Text 
```

你的代码是这样的：

```
XmlDocument document; //init and load it

static List<String> GetLeavesText(int pLevel /* 2 */, string pText /* AA */)
{
    var result = new List<String>();

    //loaded document

    var nodeList = document.SelectNodes(String.Format(@"//P{0}[@Text='{1}']//L/@Text", pLevel, pText));
    if (nodeList != null)
        foreach (XmlNode xmlNode in nodeList)
        {
            result.Add(xmlNode.InnerText);
        }

    return result;
} 
```

# maven - Error when using javac: "javac: invalid flag: -s"

> ID：11328677
> 
> 赞同：7
> 
> 时间：2012-07-04T12:01:11.943
> 
> 标签：maven, javac, maven-compiler-plugin

I am trying to specify another version of JDK in `maven-compiler-plugin`. When `-target` and `-source` parameters are set to 1.5, everything is ok. But when i try to use 1.6 JDK, maven reports an error. Has anyone faced this problem?

Error:

> Failure executing javac, but could not parse the error: javac: invalid flag: -s Usage: javac where possible options include: -g Generate all debugging info -g:none Generate no debugging info

Thanks.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T13:25:50.760

If you use 1.6 flag your JAVA_HOME should point to JDK 1.6.

Check it with java -version on a command line.

To define your JAVA_HOME do this:

Add to your `~/.bashrc` this line:

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

reference: [http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/](http://www.mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/)

# javascript - How to block editing on certain part of content in CKEDITOR textarea?

> ID：11328681
> 
> 赞同：5
> 
> 时间：2012-07-04T12:01:24.587
> 
> 标签：javascript, plugins, configuration, ckeditor, backspace

I have my CKEDITOR form prepopulated with hidden table which is being submitted together with user inputed text. This works fine, but sometimes user presses backspace too many times and deletes the hidden table.

Is there a way to block editing on this hidden table inside ckeditor textarea? So when user presses backspace the hidden table isn't affected and stays in.

As soon as CKEDITOR instance is ready this source (bellow) is put inside CkEditor Textarea (using setData() attribute) and User only sees the returned `<p></p>` value. In this case its `<p>I really think I can do this!</p>`. Its a description of his profile and he can keep it and edit it. The rest is hidden and only visible in e-mail when form is submitted. Its strange that `<p></p>` is on top but if user presses Backspace couple times the table gets deleted and therefor not submitted.

```
 <span id="messageTemplate1" class="message">

<p>I really think I can do this!</p>

<table class="hide" style="font-size: 12px;">
    <tbody>
        <tr class="hide">
            <td>
            Application sent by <strong><a href="http://www.globalcastingcenter.com/talent/jack-bolton">Matt Faro</a></strong> for Audition: <a href="http://www.globalcastingcenter.com:80/CustomContentRetrieve.aspx?ID=4185493">Actors Needed</a>
            </td>
        </tr>
        <tr class="hide">
            <td>
            Reply to applicant directly: mantas@mantas.co or visit full profile: http://www.globalcastingcenter.com/talent/jack-bolton
            </td>
        </tr>
    </tbody>
</table>
<table class="hide" style="font-size: 12px;">
    <tbody>
        <tr class="hide">
            <td><strong>Short Profile Summary:</strong></td>
        </tr>
    </tbody>
</table>
<table class="hide" style="font-size: 12px;">
    <tbody>
        <tr class="hide">
            <td>
            <a href="http://www.globalcastingcenter.com/talent/jack-bolton"><img alt="" src="http://globalcastingcenter.com/talent_images/4164035_258551_foto.png?Action=thumbnail&amp;Width=144&amp;Height=215" /></a>
            </td>
        </tr>
    </tbody>
</table>
<table style="font-size: 12px;" class="hide">
    <tbody>
        <tr class="hide">
            <td><strong>Areas:</strong></td>
            <td>Actor,Extra</td>
        </tr>
        <tr class="hide">
            <td><strong>Country:</strong></td>
            <td>WORLDWIDE,Any</td>
        </tr>
        <tr class="hide">
            <td><strong>Age:</strong></td>
            <td>26</td>
        </tr>
    </tbody>
</table>
</span> 
```

Now when I load your plugin my CKeditor box disapears, please press "Apply" on testing page [http://gcc-july.themantas.co.uk/auditions/actors-needed](http://gcc-july.themantas.co.uk/auditions/actors-needed) please login first to be able to access the message box Login name: tiknius@gmail.com pssw: test

My config file:

```
CKEDITOR.editorConfig = function( config )
{
    config.toolbar = 'MyToolbar';

    config.toolbar_MyToolbar =
    [

        { name: 'clipboard', items : [ 'Undo','Redo' ] },           
        { name: 'styles', items : ['FontSize' ] },
        { name: 'basicstyles', items : [ 'Bold','Italic'] },
        { name: 'paragraph', items : ['Outdent','Indent' ] },

    ];

    config.removePlugins = 'contextmenu';
    config.forcePasteAsPlainText = true;   
    config.pasteFromWordRemoveFontStyles = true;
    config.pasteFromWordRemoveStyles = true;
    config.extraPlugins = 'cwjdsjcsconfineselection';
    config.startupShowBorders = false;
    config.disableObjectResizing = true;

}; 
```

This is how the box looks when I disable your plugin: [http://screencast.com/t/Kc2bIOU8md2](http://screencast.com/t/Kc2bIOU8md2)

I use your suggested HTML structure.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T22:40:01.293

I had to play around with it a bit to get it to work. I added lots of documentation to the plugin code, if you have any questions after reading it through let me know.

I'm including an updated version of your content block and the plugin code block.

* * *

Here is your updated content block. It wasn't working when wrapped in the `<span>` tag, so I wrapped it in a table.

You may not like the border and resizing outlines that appear around the data cell, if that's the case, add these settings to your configuration:
`config.startupShowBorders = false;`
`config.disableObjectResizing = true;`

Some notes:
The empty `<td>` before your starting content is needed, it prevents the user from using "Ctrl A" to select everything which would allow them to delete the hidden table.

I removed the `<p>` tag from the starting content as it acted funky in this structure.

The `<td>` that holds the hidden tables has a `&nbsp;` character, it prevents the user from using "Ctrl A" to select everything which would allow them to delete the hidden table. It causes the cursor to get lost if you delete everything to the right of the cursor, but you can click on the content to begin editing again.

The `contenteditable="false"` attribute is used by CkEditor and is needed, but it doesn't do the whole job. You can try out the new HTML without activating the plugin to see what effect it has by itself.

There are notes in the plugin code about the classes and ID I used.

```
<!-- Begin Wrapper Table that Replaces <span> element -->
<table id="messageTemplate1" class="message cwjdsjcs_editable">
    <tbody>
        <tr>
            <td class="cwjdsjcs_not_editable" contenteditable="false">
            </td>
            <td id="cwjdsjcs_editable_id">
                I really think I can do this!
            </td>
        </tr>

        <tr class="cwjdsjcs_not_editable" contenteditable="false">
            <td colspan="2">
                &nbsp;

                <!-- Begin Original Content -->
                <table class="hide" style="font-size: 12px; display:none;">
                    <tbody>
                        <tr class="hide">
                            <td>
                            Application sent by <strong><a href="http://www.globalcastingcenter.com/talent/jack-bolton">Matt Faro</a></strong> for Audition: <a href="http://www.globalcastingcenter.com:80/CustomContentRetrieve.aspx?ID=4185493">Actors Needed</a>
                            </td>
                        </tr>
                        <tr class="hide">
                            <td>
                            Reply to applicant directly: mantas@mantas.co or visit full profile: http://www.globalcastingcenter.com/talent/jack-bolton
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="hide" style="font-size: 12px; display:none;">
                    <tbody>
                        <tr class="hide">
                            <td><strong>Short Profile Summary:</strong></td>
                        </tr>
                    </tbody>
                </table>
                <table class="hide" style="font-size: 12px; display:none;">
                    <tbody>
                        <tr class="hide">
                            <td>
                            <a href="http://www.globalcastingcenter.com/talent/jack-bolton"><img alt="" src="http://globalcastingcenter.com/talent_images/4164035_258551_foto.png?Action=thumbnail&amp;Width=144&amp;Height=215" /></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table style="font-size: 12px; display:none;" class="hide">
                    <tbody>
                        <tr class="hide">
                            <td><strong>Areas:</strong></td>
                            <td>Actor,Extra</td>
                        </tr>
                        <tr class="hide">
                            <td><strong>Country:</strong></td>
                            <td>WORLDWIDE,Any</td>
                        </tr>
                        <tr class="hide">
                            <td><strong>Age:</strong></td>
                            <td>26</td>
                        </tr>
                    </tbody>
                </table>
                <!-- End Original Content -->

            </td>
        </tr>
    </tbody>
</table>
<!-- End Wrapper Table that Replaces <span> element --> 
```

* * *

Here's the plugin code, it's called "cwjdsjcsconfineselection".

To add the plugin:
Create a folder called "cwjdsjcsconfineselection" in the plugins directory: `ckeditor/plugins/`
Create a file called "plugins.js" in that directory and paste the code below into that file. **My mistake: file is named plugin.js, not plugin(s).js.**

If you already have extra plugins, add "cwjdsjcsconfineselection" to the extraPlugins config setting, otherwise add this setting to your configuration:
`config.extraPlugins = 'cwjdsjcsconfineselection';`

The plugin should work the next time you load the editor.

For my situation, I have a dialog box appear when the user clicks in a non-editable area to explain why the cursor was moved back to the previous selection. That doesn't seem necessary for your usage, so I commented it out.

```
/*
  Plugin that prevents editing of elements with the "non-editable" class as well as elements outside of blocks with "editable" class.
*/

//* **************************  NOTES  ***************************  NOTES  ****************************
/*
  The "lastSelectedElement" variable is used to store the last element selected.

  This plugin uses the "elementspath" plugin which shows all elements in the DOM
  parent tree relative to the current selection in the editing area.

  When the selection changes, "elementsPathUpdate" is fired,
  we key on this and loop through the elements in the tree checking the classes assigned to each element.

  Three outcomes are possible.

  1) The non-editable class is found:
  Looping stops, the current action is cancelled and the cursor is moved to the previous selection.
  The "selectionChange" hook is fired to set the reverted selection throughout the instance.

  2) The editable class is found during looping, the "in_editable_area" flag is set to true.

  3) Neither the editable or the non-editable classes are found (user clicked outside your main container).
  The "in_editable_area" flag remains set to false.

  If the "in_editable_area" flag is false, the current action is cancelled and the cursor is moved to the previous location.
  The "selectionChange" hook is fired to set the reverted selection throughout the instance.

  If the "in_editable_area" flag is true,
  the "lastSelectedElement" is updated to the currently selected element and the plugin returns true.

---------------
  If you don't want the elements path to be displayed at the bottom of the editor window,
  you can hide it with CSS rather than disabling the "elementspath" plugin.

  The elementspath plugin creates and is left active because we are keying on changes to the path in our plugin.
  #cke_path_content
  {
    visibility: hidden !important;
  }

---------------
  CSS Classes and ID that the plugin keys on. Use defaults or update variables to use your preferred classes and ID:

  var starting_element_id = ID of known editable element that always occurs in the instance.
  Don't use elements like <table>, <tr>, <br /> that don't contain HTML text.
  Default value = cwjdsjcs_editable_id

  var editable_class = class of editable containers.
  Should be applied to all top level elements that contain editable elements.
  Default = cwjdsjcs_editable

  var non_editable_class = class of non-editable elements within editable containers
  Apply to elements where all child elements are non-editable.
  Default = cwjdsjcs_not_editable

*/

//* **************************  END NOTES  ***************************  END NOTES  ****************************

// Register the plugin with the editor.
// http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.plugins.html
CKEDITOR.plugins.add( 'cwjdsjcsconfineselection',
{
  requires : [ 'elementspath' ],

  // The plugin initialization logic goes inside this method.
  // http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.pluginDefinition.html#init
  init: function( editor )
  {
    editor.on( 'instanceReady', function( instance_ready_data )
    {
      // Create variable that will hold the last allowed selection (for use when a non-editable selection is made)
      var lastSelectedElement;
      editor.cwjdsjcs_just_updated = false;

      // This section starts things off right by selecting a known editable element.
      // *** Enter the ID of the element that should have initial focus *** IMPORTANT *** IMPORTANT ***
      var starting_element_id = "cwjdsjcs_editable_id";

      var resInitialRange = new CKEDITOR.dom.range( editor.document );

      resInitialRange.selectNodeContents( editor.document.getById( starting_element_id ) );
      resInitialRange.collapse();

      var selectionObject = new CKEDITOR.dom.selection( editor.document );

      editor.document.focus();
      selectionObject.selectRanges( [ resInitialRange ] );

      var sel = editor.getSelection();
      var firstElement = sel.getStartElement();
      var currentPath = new CKEDITOR.dom.elementPath( firstElement );

      // Set path for known editable element, fire "selectionChange" hook to update selection throughout instance.
      editor._.selectionPreviousPath = currentPath;
      editor.fire( 'selectionChange', { selection : sel, path : currentPath, element : firstElement } );
    }); // *** END - editor.on( 'instanceReady', function( e )

    // When a new element is selected by the user, check if it's ok for them to edit it,
    // if not move cursor back to last know editable selection
    editor.on( 'elementsPathUpdate', function( resPath )
    {
      // When we fire the "selectionChange" hook at the end of this code block, the "elementsPathUpdate" hook fires.
      // No need to check because we just updated the selection, so bypass processing.
      if( editor.cwjdsjcs_just_updated == true )
      {
        editor.cwjdsjcs_just_updated = false;
        return true;
      }

      var elementsList = editor._.elementsPath.list;
      var in_editable_area = false;
      var non_editable_class = "cwjdsjcs_not_editable";
      var editable_class = "cwjdsjcs_editable";

      for(var w=0;w<elementsList.length;w++){
        var currentElement = elementsList[w];

        // Sometimes a non content element is selected, catch them and return selection to editable area.
        if(w == 0)
        {
          // Could change to switch.
          if( currentElement.getName() == "tbody" )
          {
            in_editable_area = false;
            break;
          }

          if( currentElement.getName() == "tr" )
          {
            in_editable_area = false;
            break;
          }
        }

        // If selection is inside a non-editable element, break from loop and reset selection.
        if( currentElement.hasClass(non_editable_class) )
        {
          in_editable_area = false;
          break;
        }

        if( currentElement.hasClass(editable_class) ) {
          in_editable_area = true;
        }
        console.log(currentElement);
        console.log(currentElement.getName());
      }

      // if selection is within an editable element, exit the plugin, otherwise reset selection.
      if( in_editable_area ) {
        lastSelectedElement = elementsList[0];
        return true;
      }

      var resRange = new CKEDITOR.dom.range( editor.document );

      resRange.selectNodeContents( lastSelectedElement );
      resRange.collapse();
      editor.getSelection().selectRanges( [ resRange ] );
      resRange.endContainer.$.scrollIntoView();

      // Open dialog window:
      // It tells user they selected a non-editable area and cursor has been returned to previous selection
//      currentEditorName = editor.name;
//      openResDefaultDialog(currentEditorName);

      try
      {
        var sel = editor.getSelection();
        var firstElement = sel.getStartElement();
        var currentPath = new CKEDITOR.dom.elementPath( firstElement );
        editor.cwjdsjcs_just_updated = true;

        editor._.selectionPreviousPath = currentPath;
        editor.fire( 'selectionChange', { selection : sel, path : currentPath, element : firstElement } );

      }
      catch (e)
      {}
    });
  } // *** END - init: function( editor )
}); // ************************************************************************************* END - CKEDITOR.plugins.add 
```

To test that the plugin is loaded add an alert after the instance ready trigger:

```
 editor.on( 'instanceReady', function( instance_ready_data )
    {
      alert("instanceReady"); 
```

To test that the plugin is being triggered when the selection changes, add an alert after the elementsPathUpdate trigger:

```
 editor.on( 'elementsPathUpdate', function( resPath )
    {
      alert("elementsPathUpdate"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T12:28:45.057

I realize that this is closed and solved, but here's an option:

Add the table just in time after the user submits your form or however your CKE content is being used. Simply don't add the invisible table, but when the user clicks "submit", add it then to whatever is being posted. Alternatively, if you need to edit it later, just remove it before inserting to the editor and then add it once again Just In Time before posting. No hacking of the CKE core and no plugins required as the action happens outside CKE.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T13:09:15.490

I had a similar requirement but didn't find my answer online.

In my case, I want to support the tab character in the editor by adding a `pre` element to the content:

```
editor.on('key', function(ev) {
    if (ev.data.keyCode == 9) { // TAB
        // data-tab attribute added so we can identify it later
        var tabHtml = '<pre data-tab="true" style="display:inline;">&#09;</pre>';
        var tabElement = CKEDITOR.dom.element.createFromHtml(tabHtml, editor.document);
        editor.insertElement(tabElement);
        ev.cancel();
    }
}); 
```

But now the user can use the arrow keys or click the mouse and start editing inside the `pre` element. So I listen to the 'click' and 'keyup' events and move the cursor if they are inside the `pre`.

```
// this prevents the user from typing inside the tab span
var moveCursorOutOfTab = function() {
    var ranges = editor.getSelection().getRanges();
    if (ranges.length == 1) {
        var parent = ranges[0].startContainer.getParent();

        // is the cursor is inside a tab element
        if (parent && parent.getAttribute('data-tab') == 'true') {
            var newRange = editor.createRange();
            newRange.setStartAfter(parent);
            newRange.setEndAfter(parent);

            // move the cursor after the tab element
            editor.getSelection().selectRanges([newRange]);
        }
    }
};

// wait until the editor is initialized
editor.on('contentDom', function() {
    var editable = editor.editable();

    // listen for clicks
    editable.attachListener(editable, 'click', function(ev) {
        moveCursorOutOfTab();
    });

    // must use the keyup event because we want to
    // act after any cursor movements
    editor.document.on('keyup', function(ev) {
        // check for left and right arrow keys
        if (ev.data.getKey() == 37 || ev.data.getKey() == 39) {
            moveCursorOutOfTab();
        }
    });
}); 
```

# version-control - 在 CVS 中，如何在某个分支上找到文件的所有修订版

> ID：11328684
> 
> 赞同：0
> 
> 时间：2012-07-04T12:01:35.603
> 
> 标签：version-control, cvs, cvsnt

我的源代码使用 CVS（特别是 CVSNT）进行版本控制。

给定文件的完整路径和分支的名称，我如何才能获得分支上文件的所有修订版（只是像 1.341.2.1 这样的数字）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:21:29.543

如果您正在查找分支 1.341 上`bar`模块中文件的所有修订，可能最简单的事情是：`foo`

```
grep ^1.341 $CVSROOT/foo/bar,v 
```

或者你总是可以这样做：

```
cvs log bar | grep '^revision 1.341 
```

# php - PHP字符串运算符添加变量

> ID：11328687
> 
> 赞同：1
> 
> 时间：2012-07-04T12:01:43.090
> 
> 标签：php, string, variables, operators, add

我已经分配了变量，例如：

```
$name = "sometext"; 
```

我坚持使用此代码行：

```
$output .= '<a href="'. home_url() .'"><img src="'. $t_custom_logo .'" border="0" class="png" alt="'. get_bloginfo('name') .'" /></a>'; 
```

我怎样才能回显或一些如何使它出现 $name 后的值

```
$output .= '<a href="'. home_url() . 
```

所以结果中的主要内容可能如下所示：

```
<a href="www.somelink.com/sometext"> .... 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:04:05.880

做你一直在做的事情，串联：

```
$output .= '<a href="'. home_url() . '/'. $name'"><img src="'. $t_custom_logo .'" border="0" class="png" alt="'. get_bloginfo('name') .'" /></a>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:03:53.007

只需像其他函数的结果/字符串一样使用`.`运算符添加它。

```
$output .= '<a href="'. home_url() . $name . '"><img src="'. $t_custom_logo .'" border="0" class="png" alt="'. get_bloginfo('name') .'" /></a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:04:06.967

```
$output .= '<a href="'. home_url() . $name .'"> 
```

如果 home_url() 末尾没有 / 那么你需要手动输入

```
$output .= '<a href=~'. home_url() . '/' . $name .'"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:05:20.433

运算符是 PHP 中的`.`字符串连接运算符。它不需要跟在引号后面或前面。`$output .= '<a href="'. home_url() . $name`...会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T12:05:26.827

或者

```
$output .= '<a href="'. home_url() . '/' . $name . '"><img src="'. $t_custom_logo .'" border="0" class="png" alt="'. get_bloginfo('name') .'" /></a>'; 
```

如果您还需要添加“/”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T12:06:21.630

您可以使用以下教程获取域名[获取域名](http://corpocrat.com/2009/02/28/php-how-to-get-domain-hostname-from-url/)，然后将其附加到您的`$name`变量中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T12:06:36.457

使用 sprintf 将使您的代码更具可读性。

```
$output .= sprintf( 
    '<a href="%s"><img src="%s" border="0" class="png" alt="%s" /></a>',
    home_url().'/'.$name,
    $t_custom_logo,
    get_bloginfo('name')
); 
```

# c - C 中的 Blob 检测（不使用 OPENCV）

> ID：11328693
> 
> 赞同：1
> 
> 时间：2012-07-04T12:02:01.560
> 
> 标签：c, image-processing, computer-vision

我正在尝试进行自己的 blob 检测，谁会收到实时视频，并尝试检测白皮书。即使是在纸上写的东西。我需要检测纸张并且是角落，因为我真正想要的是在纸张的每个角落在纸张上绘制一个opengl多边形将是多边形的一个角落。然后我需要纸张的坐标来做其他事情。所以我需要： - 检测一个方形的白色斑点。- 获取角的坐标 - 在白纸上绘制一个多边形。

任何想法我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:16:06.290

很大程度上取决于上下文。例如，假设您：

1.  知道纸张总是大致居中（即 W/2，Y/2 总是在 blob 内部），并且旋转不超过 45 度（30 会更好）

2.  在片材周围有一个合适的边框，这样角落就不会接触到 FOV 的边缘

3.  能够（通过局部方差分析，或者如果幸运的话，检查背景颜色或亮度）判断一个点是在斑点内部还是外部

4.  内部/外部功能永远不会失败（可能在边界附近除外）

然后你可以从边界上的一点（肯定在外面）和中心（肯定在里面）走一条线，甚至通过二等分，并在边缘找到一个点 - 一个区域。

两个边缘点给出一个矩形（两个区域给出一个光束），两个矩形给出一个交叉点（两个光束给出一个更大的区域） - 这就是你的角落。您应该携带检测不确定性（区域半径）以验证拐角（另一种不太优雅的方法是粗略计算拐角的位置，并通过螺旋搜索或醉汉步行来确定它）。

该算法适用于并行化，并且只要假设成立，它应该非常快。

尽管如此，它仍然是一个黑客——我同意放松，为什么要重新发明轮子？如果您有内存或 CPU 限制（嵌入式系统等），我相信 ARM 和嵌入式平台也应该有 OpenCV 和 e-Vision“精简版”端口。

（对不起我的术语-我是从意大利语翻译过来的。“Areal”可能对应于您的“blob”，光束是连接两个不同blob中所有点对的线族，线强度是乘积点到其区域中心的距离）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:31:35.120

> 我正在尝试进行自己的 blob 检测，谁会收到实时视频，并尝试检测白皮书。

你的第一个镜头可能是一个简单的[flood-fill](http://en.wikipedia.org/wiki/Flood_fill)。即选择一个好的阈值对图像进行二值化并应用算法。`X`如果您知道纸张总是比这更亮而背景总是比这更暗，则可以固定阈值。或者这可以是一个自适应阈值，例如[Otsu 的方法](http://en.wikipedia.org/wiki/Otsu%27s_method)。OpenCV 免费提供此功能。

如果您需要加快速度，您可以使用联合查找数据结构。

最后，您需要提出一些启发式方法来识别角点（例如 x/y 方向的四个极值）。

> 然后我需要 [...] 角的坐标 [...]

那么你不需要斑点检测，而是首先需要角检测或轮廓检测。OpenCV 有一些[很好的功能](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html#cv-findcontours)。如果你不能使用它，我建议像上面那样对图像进行二值化，并使用 harris-detector 来查找对象的角落。

[如果您使用OpenCV 的 TBB 支持](http://opencv.willowgarage.com/wiki/TBB)并且遇到满足您的实时要求的问题，它也可以派上用场。

# c# - 使用列表一次将整行添加到 DataTable

> ID：11328695
> 
> 赞同：3
> 
> 时间：2012-07-04T12:02:07.000
> 
> 标签：c#, list, datatable

我只想将 List 添加为 DataTable 整行。这是我尝试过的代码。

```
private static DataTable _table = new DataTable();

List<string> tempList = new List<string>();

// tempList = {"A1","A2","A3","A4","A5","A6"}

_table.Rows.Add(tempList); 
```

预期输出：

```
 col1|col2 |col3 |col4  |col5| col6
      ----+-----+-----+------+----+--
row1   A1 |  A2 | A3  |  A4  | A5 |  A6 
```

但是，这对我不起作用。它将数据集合插入到第一列。

实际输出：

```
 col1      |col2 |col3 |col4  |col5| col6
      ----------+-----+-----+------+----+--
row1   A1,A2,A3.|     |     |      |    | 
```

请帮助我使用列表添加整行。谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T12:05:43.317

[`DataRowCollection.Add()`](http://msdn.microsoft.com/en-us/library/07wwak56.aspx)方法期望`Object[]`，所以你应该尝试：

```
_table.Rows.Add(tempList.ToArray()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T12:05:27.783

`Rows.Add()`接受 parms[]，您可以通过将您的`list`转换为数组来实现它。

```
_table.Rows.Add(tempList.ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:29:49.507

```
 DataTable dt = new DataTable();
        dt.Columns.Add();
        dt.Columns.Add();
        dt.Columns.Add();
        List<string> tempList = new List<string>() { "a", "b", "c" };
        dt.Rows.Add(tempList.ToArray<string>()); 
```

# android - Android 无法合并两个波形文件

> ID：11328697
> 
> 赞同：3
> 
> 时间：2012-07-04T12:02:17.570
> 
> 标签：android

我在安卓工作。我想合并两个波形文件并想创建第三个文件。为此，我创建了两个输入流，然后尝试将这些输入流写入一个输出流文件。

**这是我的代码：-**

```
 File file = new File("/sdcard/z.wav");
        File file1 = new File("/sdcard/zz.wav");
        InputStream is = new FileInputStream(file);
        InputStream is1 = new FileInputStream(file1);

        // Get the size of the file
        long length = file.length();
        long length1 = file1.length();

        // Create the byte array to hold the data
        byte[] bytes = new byte[(int)length];
        byte[] bytes1 = new byte[(int)length1];

        // Read in the bytes
        int offset = 0;
        int numRead = 0;
        while (offset < (int)length &&( numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
            offset += numRead;
        }

        int offset1 = 0;
        int numRead1 = 0;
        while (offset1 < (int)length1 &&( numRead1=is1.read(bytes1, offset1, bytes1.length-offset1)) >= 0) {
            offset1 += numRead1;
        }

        FileOutputStream fos=new FileOutputStream("sdcard/guruu.wav");
        Log.v("Trying Activity","before first write");
        fos.write(bytes);

        fos.write(bytes1,0,bytes1.length);
        fos.write(bytes);
        fos.close();

        is.close();
        is1.close(); 
```

当我播放输出文件 guruu.wav 时，这只是播放**file1**的文件，而不是播放 file2 的内容。请告诉我我犯了什么错误。有没有其他方法可以做到这一点？

我在这方面很新，所以请不要投反对票。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T10:50:00.760

您没有合并数据，您只是将其连接起来。

因此，您最终会得到一个文件，其中包含：

*   文件 1 的 WAV 文件头
*   文件 1 的音频数据
*   文件 2 的 WAV 文件头
*   文件 2 的音频数据

可以理解的是，当有人读回这个文件来播放它时，他们认为它是

*   WAV 文件头
*   音频数据
*   文件末尾的一些垃圾数据，他们甚至没有考虑过。

要真正合并这些文件，您需要正确考虑[WAV 文件的内部结构](http://en.wikipedia.org/wiki/WAV)。

# c# - 并行处理队列

> ID：11328705
> 
> 赞同：-2
> 
> 时间：2012-07-04T12:02:38.677
> 
> 标签：c#, .net, parallel-processing, queue, chaining

我有一个处理消息的类：

```
public abstract class ProcessingBase {
    public bool IsBusy { get; set; }
    public Queue<CustomMessage> PendingMessages { get; private set; }
    public abstract MessageProcessingResult Process();
    ... 
```

在我迄今为止创建的处理模块中，一个使用队列来处理消息，通过套接字发送它们，另一个发送电子邮件。这适用于单个处理模块，但假设我想链接这两个？

我在想我可以做类似的事情：

```
public class ChainProcessor : ProcessingBase {
    public List<ProcessingBase> Processors { get; set; }
    public override MessageProcessingResult Process() {
                if (IsBusy)
                    return null;
                IsBusy = true;

                CustomMessage msg = null;
                this.ProcessedMessages = new List<CustomMessage>();

                // create clone of queue 
                var messagesToSend = new Queue<CustomMessage>(this.PendingMessages);
                this.PendingMessages.Clear();
                while (messagesToSend.Count > 0 && (msg = messagesToSend.Dequeue()) != null) {
                    foreach (var processor in this.Processors) {
                        // something with yield return?
                    }
                } 
```

这是我动摇的实际链接。理想情况下，我想以一种“波浪”的方式处理它们。例如：

```
Module 1 - Processed message A
Module 2 - Processed message A
Module 1 - Processed message B
Module 2 - Processed message B
Module 3 - Processed message A
Module 1 - Processed message C 
```

每条消息都通过链传递，消息在传递时不断进出。这样做的最佳方法是什么？或者我是否仅限于通过整个链顺序传递每条消息？

即（我不想要的）： 模块 1 - 已处理的消息 A 模块 2 - 已处理的消息 A 模块 3 - 已处理的消息 A 模块 1 - 已处理的消息 B 模块 2 - 已处理的消息 B 模块 3 - 已处理的消息 B 模块 1 - 已处理消息 C

**编辑：**我希望我可以做一些事情，让第一个处理器返回到“链处理器”，这会将消息传递到模块 2，然后链可能会在处理器 1 上启动下一条消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:32:42.680

我认为你可以使用

```
 BlockingCollection<CustomMessage> 
```

对于每个模块。然后，您可以创建多个线程以从每个集合中读取并执行模块的处理工作。之后将其放入下一个模块的队列中。

通过创建多个线程，您可以并行工作。BlockingCollection 是线程安全的、快速的和阻塞的。很方便。请参阅[http://msdn.microsoft.com/en-us/library/dd267312.aspx](http://msdn.microsoft.com/en-us/library/dd267312.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T21:42:31.777

您正在寻找线程安全[`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)，并且[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/System.Threading.AutoResetEvent.aspx)女巫可以唤醒休眠线程（参见示例）。

每个工作人员都在自己的线程上运行（如果您有一些主线程工作），并且在完成工作并清空其输入队列后，调用`AutoResetEvent.WaitOne()`. 如果输入队列被某个项目填满，则调用`AutoResetEvent.Set()`，它会再次启动该过程。

您可以通过使用第一个工作人员处理的项目创建第二个队列来链接这两个工作人员。在第一个工作人员完成消息后，将项目添加到输出队列并调用`AutoResetEvent.Set()`。

仔细阅读并三思而后行，我不知道您的情况，因此您可以根据需要优化流程。

祝你好运。;-)

# jquery - jQuery 对话框：如果它已经打开了，不要打开它？

> ID：11328707
> 
> 赞同：0
> 
> 时间：2012-07-04T12:02:42.487
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

我正在通过以下代码打开 jQuery 对话框。这里的问题是当我打开它并再次单击时，它仍然打开第二次和第三次。

如果它还没有打开，我只需要打开一次。

```
 $('.view_full_email').live('click',function(){
        var $tr = $(this).closest('tr');
        var subject = $tr.children('td:eq(2)').text(),
        from = $tr.children('td:eq(3)').text(),
        to = $tr.children('td:eq(4)').text(),
        cc = $tr.children('td:eq(5)').text(),
        bcc = $tr.children('td:eq(6)').text(),
        mesg_body = $tr.children('td:eq(7)').text();

      var $dialog = $('<div>',{title:'Email'}).dialog({
           autoOpen: false,
           resizable: true,
           width: 500
       });
      var email_data = "<table><tr><td><b>Subject :</b>"+ subject +"</td></tr><br/><tr><td><b>From :</b> "+ from +"</td></tr><tr><td><b>To :</b> "+ to+"</td></tr><tr><td><b>CC  :</b> "+ cc+"</td></tr><tr><td><b>BCC  : </b> "+ bcc+"</td></tr><tr><td><b> Message Body :</b> <textarea rows='25' cols='100' readonly = 'readonly'>"  + mesg_body+ "</textarea></td></tr></table>";
       $('<div>').html(email_data).appendTo($dialog);
       $dialog.dialog('open');
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:41:54.820

你是这个意思？

```
if (!$dialog.dialog("isOpen")){
    $dialog.dialog("open");    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:43:17.553

你为什么不这样做`modal :true`。

这样用户就不会在后台单击任何内容，因此无需设置条件，因为您的对话框只会打开一次。我想这就是你想要的

```
var $dialog = $('<div>',{title:'Email'}).dialog({
            autoOpen: false,
            resizable: true,
            modal :true,
            width: 500
        }); 
```

# gwt - ？ Smart Gwt 相当于gwt 的根面板。？

> ID：11328708
> 
> 赞同：2
> 
> 时间：2012-07-04T12:02:44.610
> 
> 标签：gwt, smartgwt

Smart Gwt 中应该使用什么来代替 Gwt 中的根面板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:05:24.037

无需使用 GWT 的`RootPanel`.

要向文档添加/渲染小部件，只需调用`BaseWidget#draw()`. 看看它是如何在[SmartGWT 的展示](http://www.smartclient.com/smartgwt/showcase/#grid_summaries_featured_category)中完成的。

### 参考

*   [`draw()`在 SmartGWT API 文档上](http://www.smartclient.com/smartgwt/showcase/#grid_summaries_featured_category)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:00:50.380

在某些情况下，您仍需要使用 RootPanel 来绘制对象。例如，如果您将 SmartGWT 应用程序嵌入到 portlet 或已经包含非 SmartGWT 内容的页面中，就会出现这种情况。

在一般的思维方式中，调用`draw`是绘制 SmartGWT 对象的最佳和正确方法。

但是，由于上述原因，您仍然可以使用

```
VLayout mainLayout = new VLayout();
RootPanel.get("myDIV").add(mainLayout); 
```

请记住，调用 RootPanel.get().add 涉及 GWT DOM 操作。

# tdd - 如何在 Visual Studio 中使用 NSpec 进行调试

> ID：11328710
> 
> 赞同：3
> 
> 时间：2012-07-04T12:02:49.857
> 
> 标签：tdd, resharper, bdd, nspec

如何在 Visual Studio 中使用 NSpec 进行调试？我已经安装了 resharper 我需要进入我的测试代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:01:56.833

另一个不错的选择是只输入

```
  System.Diagnostics.Debugger.Launch()

```

在要调试的测试中。你会得到一个 Visual Studio 提示来调试测试。

我还建议看一下[specwatchr](http://nspec.org/continuoustesting)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T23:09:39.717

至少在 Visual Studio 2013 中，[NSpec 测试适配器](http://visualstudiogallery.msdn.microsoft.com/7a52473f-9e1a-40f3-8bd8-6c00ab163609)（由 {o} Software 提供）似乎可以解决问题。在扩展库中找到它。然后只需右键单击测试资源管理器中的测试并点击调试。

![在此处输入图像描述](../Images/a8a8687ec5177cf15444cffa66a7a8b9.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-27T22:00:28.860

我使用了一个简单的技巧，让我用开箱即用的 resharper 调试 NSpec。这个想法是拥有你自己版本的“nspec”类而不是 DebuggerShim.cs（在你的测试项目中的某个地方）：

```
[TestFixture]
public abstract class nspec: global::NSpec.nspec
{
    [Test]
    public void debug()
    {
        var currentSpec = this.GetType();
        var finder = new SpecFinder(new[] {currentSpec});
        var builder = new ContextBuilder(finder, new Tags().Parse(currentSpec.Name), new DefaultConventions());
        var runner = new ContextRunner(builder, new ConsoleFormatter(), false);
        var results = runner.Run(builder.Contexts().Build());

        //assert that there aren't any failures
        results.Failures().Count().should_be(0);
    }
} 
```

之后，您将在规范旁边看到 Resharper 的测试图标： ![nspec 测试](../Images/6494679cbac9c6d251a2f49b0c6cfc50.png)

有关更多详细信息，请参阅本文：[使用 VisualStudio/Resharper 调试 NSpec – 简单技巧](https://chrisseroka.wordpress.com/2014/11/27/debugging-nspec-with-visualstudioresharper-simple-trick/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T07:09:04.443

Resharper 仅支持 NUnit 和 MSTest 运行器 (AFAIR)。打开 Resharper “单元测试资源管理器”窗口，看看它是否在那里列出了你的 NSpec 测试。

如果没有，则需要回退到指定用于调试的外部程序（NSpec 运行程序 exe）-有关如何在 Visual Studio 中配置此问题，请参阅[此问题。](https://stackoverflow.com/questions/9130763)

# android - 在android中释放资源

> ID：11328713
> 
> 赞同：2
> 
> 时间：2012-07-04T12:03:01.537
> 
> 标签：android, resources, media-player, release

我的第一篇文章……你知道……

我创建了一个类：

```
public class MyPanel extends SurfaceView implements SurfaceHolder,
        SurfaceHolder.Callback {
   private MediaPlayer shooting = new MediaPlayer();
   public Panel(Context context, int screenWidth, int screenHeight) {
        super(context);
    shooting = MediaPlayer
                .create(ctx, Utils.getRawResIdFromName("gunshot"));
  }
  void  anotherMethod(){
    //...
    shooting.start();
  }
//....other stuff....
 } 
```

现在活动类的 onCreate 方法很简单：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            ... some stuff
    final MyPanel panel = new MyPanel(this, newWidth, newHeight);
    }
... other methods
} 
```

我的问题是用户退出活动后如何释放资源？我不确定如何释放实例化的对象面板以及其中创建的所有对象，例如 MediaPlayer、Graphics....

谢谢

阿卡南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:05:04.403

在`onDestroy()`使所有对象变量无效时，这将使它们有资格`System GC`收集它们。或显式调用`System.gc()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:23:38.870

在你的`onDestroy()`.

但没有必要这样做，而是一个很好的做法。由于Android的GC非常智能。

我认为你有 iPhone 开发背景，这就是你问这个问题的原因。:)

# c++ - 跨平台启动进程并重定向其 stdio 的方式

> ID：11328715
> 
> 赞同：4
> 
> 时间：2012-07-04T12:03:03.707
> 
> 标签：c++, stdio

我想知道是否有一个跨平台（Windows、Linux、BSD）库，我可以使用它异步启动一个进程并`iostream`为其标准管道提供类似包装器。

我希望它能够知道进程何时终止。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:08:12.827

您可以使用 2 个库：

**QProcess**

您可以使用 Qt 工具包中的 QProcess 类。可以在[这个 stackoverflow question](https://stackoverflow.com/questions/3852587/how-to-get-stdout-from-a-qprocess)和[qt library](http://qt-project.org/doc/qt-4.8/qprocess.html)上找到更多信息。

**库执行流**

这个[库](http://libexecstream.sourceforge.net/)比 Qt 更轻，并且是跨平台的

**其他**

*   pstreams 版本 0.17

    > 如果你只想要一个控制台应用程序，你可以使用旧的基于 popen 的分支（0.17 版），它使用 Win32 函数 _popen() 和 _pclose()，但这些在 GUI 程序中不起作用（并且可能会炸毁你的 PC ，如果 Windows 不为您执行此操作。）此版本不具有该库的大部分功能，并且不再进行维护或测试。

# jquery - jquery 对话框错误：预期的标识符、字符串或数字

> ID：11328716
> 
> 赞同：2
> 
> 时间：2012-07-04T12:03:05.983
> 
> 标签：jquery, dialog

我从我的 jquery 对话框中收到一条错误消息：

> 错误：预期的标识符、字符串或数字。

错误消息指向`buttons: {` 声明所在的行。有谁知道可能导致问题的原因？

```
$(document).ready(function(){

var $dialog = $('<div></div>').html('<form id="myform" action=""><input type="checkbox" id="completeCheck" name="completeCheck" value="" />Completeness check<br /><input type="checkbox" name="viewUnofficial" value="Car" /> View unofficial status <br /><input type="checkbox" name="consist" value="" />Consistency<br /><input type="checkbox" name="otherData" value="" />Other checks<br /><input type="checkbox" name="keyCheck" value="" />Key check<br /><input type="checkbox" name="compareVersions" value="" />Compare versions<br /></form>').dialog({
    autoOpen: false,
    title: 'Select data check',
    buttons: {
        "Submit Form": function () {
            $('form#myform').submit();
        },
        "Cancel": function () {
            $(this).dialog("close");
        }
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:08:22.390

**您的代码的工作演示** [http://jsfiddle.net/ta7QY/](http://jsfiddle.net/ta7QY/)

随意玩这个演示；`$('div')`我还实例化了单击链接时的对话框。其余代码如下。

这会有所帮助，`:)`

**代码**

```
$("#forgot").click(function(e){ 
    $dialog.dialog("open");
    e.preventDefault();
});

var $dialog = $('<div>')
    .html('<form id="myform" action=""><input type="checkbox" id="completeCheck" name="completeCheck" value="" />Completeness check<br /><input type="checkbox" name="viewUnofficial" value="Car" /> View unofficial status <br /><input type="checkbox" name="consist" value="" />Consistency<br /><input type="checkbox" name="otherData" value="" />Other checks<br /><input type="checkbox" name="keyCheck" value="" />Key check<br /><input type="checkbox" name="compareVersions" value="" />Compare versions<br /></form>')
    .dialog({
        autoOpen: false,
        title: 'Select data check',
                buttons: {   
          "Submit Form": function() {  $('form#myform').submit();},
          "Cancel": function() {$(this).dialog("close");}
        }
    });
​ 
```

**脚本**

```
 <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/base/jquery-ui.css">

  <link rel="stylesheet" type="text/css" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css">

  <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"></script> 
```

# javascript - 让 javascript 处理 flash（firefox 问题）

> ID：11328717
> 
> 赞同：0
> 
> 时间：2012-07-04T12:03:06.500
> 
> 标签：javascript, flash

我在将命令从 javascript 传递到 flash 时遇到一些问题。我的代码终于可以在 IE 和 Chrome 中运行了。可悲的是它没有做任何我Firefox。知道为什么吗？

提前致谢！

JAVASCRIPT

```
<script type="text/javascript">

    //function setCurrentPage(newPage) {
    //    currentPage = newPage;
    //    SendDataToFlashMovie(newPage);
    //}
    function getFlashMovieObject(movieName){
    if (window.document[movieName]){

        return window.document[movieName];

    }
    if (navigator.appName.indexOf("Microsoft Internet")==-1){
        if (document.embeds && document.embeds[movieName])
            return document.embeds[movieName];
    }
    else{

            return document.getElementById(movieName);

    }
    }
    function SendDataToFlashMovie(newPage){
    var flashMovie=getFlashMovieObject("java");
    flashMovie.callAs(newPage);
    }

</script>

<a href="#" onClick="SendDataToFlashMovie('Home')">Home</a> 
```

闪光

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="550" height="400" id="java" align="middle">
<param name="movie" value="java.swf" />
<param name="quality" value="high" />
<param name="bgcolor" value="#ffffff" />
<param name="play" value="true" />
<param name="loop" value="true" />
<param name="wmode" value="window" />
<param name="scale" value="showall" />
<param name="menu" value="true" />
<param name="devicefont" value="false" />
<param name="salign" value="" />
<param name="allowScriptAccess" value="always" />

<!--[if !IE]>-->
<object id="java" type="application/x-shockwave-flash" data="java.swf" width="550" height="400">
<param name="movie" value="java.swf" />
<param name="quality" value="high" />
<param name="bgcolor" value="#ffffff" />
<param name="play" value="true" />
<param name="loop" value="true" />
<param name="wmode" value="window" />
<param name="scale" value="showall" />
<param name="menu" value="true" />
<param name="devicefont" value="false" />
<param name="salign" value="" />
<param name="allowScriptAccess" value="always" />
<EMBED src="java.swf" quality="high" swliveconnect="true" width="550" height="400" name="java" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash">
</EMBED>
<!--<![endif]-->
<a href="http://www.adobe.com/go/getflash">
        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
</a>
<!--[if !IE]>-->
</object>
<!--<![endif]-->
</object> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:23:48.293

使用[SWFObject](http://code.google.com/p/swfobject/)嵌入您的 Flash 文件（有一个方便的[代码生成器](http://www.bobbyvandersluis.com/swfobject/generator/index.html)- 使用“动态发布”）。

然后 JS 代码将如下所示：

```
<script type="text/javascript">
    function SendDataToFlashMovie(newPage){
        var flashMovie = document.getElementById("java");
        flashMovie.callAs(newPage);
    }
</script>

<a href="#" onClick="SendDataToFlashMovie('Home')">Home</a> 
```

# php - 通过 cron 获取 twiiter 提要的 API

> ID：11328722
> 
> 赞同：0
> 
> 时间：2012-07-04T12:03:17.560
> 
> 标签：php, api, twitter, cron

我们开发了一种用于员工敬业度的产品。它提供了一项功能，如果您的办公室成员已授权该站点，则可以显示他们发布的推文。推文的获取是由定期运行的 cron 完成的，该 cron 以大约 15 分钟的定期间隔运行。此 cron 搜索所有已授权该站点应用程序的用户，并在 Twitter 上请求他们的推文。对于每个用户，都会向 Twitter 发送一个请求

目前系统正在使用 REST API (http://api.twitter.com/1/statuses/user_timeline.xml?user_id='xxxxxx') 将请求数限制为每小时 150 个。我们无法发出经过身份验证的请求，因为它要求用户每次都授权调用，而这在通过 cron 发出请求时是不可能的。因此，仅 150 个请求和 cron 每小时运行四次，就可能仅获取 35-40 个用户数据，这无法满足我们的要求。

我们还探索了 Site Streaming API 的选项。但它需要与 twitter 建立持久连接，这在使用 cron 时会很困难。Site Streaming API 的另一个问题是它处于 beta 版本，并且该网站应该被列入白名单。

请协助我们选择可以帮助我们实现上述目标的最佳替代方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:16:12.400

有两种解决方案。

*   创建一个帐户以关注已授权您的应用的用户。然后，只需检索该时间线。

或者

*   将用户放在“[列表](https://support.twitter.com/articles/76460-how-to-use-twitter-lists)”中。然后调用[列表/状态](https://dev.twitter.com/docs/api/1/get/lists/statuses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:35:50.097

我不是 100% 确定为什么你不能通过 Cron hwoever 保持登录状态，因为你使用的是 PHP，我可以建议你看看[https://github.com/jmathai/twitter-async/blob/master/EpiTwitter.php](https://github.com/jmathai/twitter-async/blob/master/EpiTwitter.php)它验证您的 oAuth，然后执行您想要的操作并关闭请求。

如果您无法使用 Cron 执行此操作，请使用 serviceUptime.com 调用 php 脚本，尽管该脚本可以运行的最长时间为 35 秒，因此不要尝试一次将所有 lance Armstrong 推文全部拉回。HTH。

# ruby-on-rails - 使用 update_attributes 进行批量分配不会更新 collection_singular_ids

> ID：11328726
> 
> 赞同：1
> 
> 时间：2012-07-04T12:03:25.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, mass-assignment

我有一个简单的`User`模型，它`Town`使用连接表 ( `has_and_belongs_to_many`) 与许多对象相关联。现在我想通过分配一个逗号分隔的城镇 ID 列表（直接来自作为 HTTP POST 参数发送的表单）来更新属于特定用户的城镇。

使用以下控制器代码保存用户对象：

```
@current_object.update_attributes(params[:user]) 
```

`params[:user]`包括，`town_ids`例如，设置为`1,4,6`。

不幸的是，这根本不会更新用户城镇关联。但是，如果我手动操作，效果会非常好：

```
User.find(:first).town_ids = "1,4,6" # this saves automatically 
```

难道只是不可能批量分配这些`collection_singular_ids`字段吗？

我的用户模型包含以下内容：

```
has_and_belongs_to_many :towns

# necessary for mass-assignment, otherwise it results in an exception:
attr_accessible :town_ids 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:33:47.553

您必须将其`town_ids`作为*数组*传递：

```
User.find(:first).update_attributes(:town_ids=>[1,4,6]) 
```

如果您将 id 作为字符串传递，Rails 将尝试将字符串转换为整数：

```
"1,4,6".to_i # => 1 
```

# actionscript-3 - Flash AS3 动画未在 IE9 中运行

> ID：11328731
> 
> 赞同：0
> 
> 时间：2012-07-04T12:03:44.783
> 
> 标签：actionscript-3, flash, internet-explorer-9

我有五个 Flash 动画，它们使用 AS3 computeSpectrum 为我的一些歌曲创建视频动画。

在 Chrome、Firefox、Opera 和 Safari 中测试很好。在 IE7 和 IE8 中测试就好了。在 IE9 中测试，flash 播放器打开，但音乐不播放，动画甚至不启动。这只发生在 IE9 中。

网页在这里：[http ://seanmurphy.co.cc/index4.html](http://seanmurphy.co.cc/index4.html)

动画位于音乐选项卡下（底部选项卡，主屏幕）。

有没有人知道到底发生了什么？我已经确保 Flash 播放器是最新的（就像我说的，实际上卸载了 IE9，回到 IE8 并且工作正常）。我已确保链接的 mp3 文件位于根文件夹和附加的音频文件夹中（以防万一）。我已经对此进行了全面研究，但似乎没有人遇到同样的问题。

Flash AS3 代码如下：

```
var url:String = "SubwayGirl.mp3";
var request:URLRequest = new URLRequest(url);
import flash.filters.*;
import fl.motion.Color;
var myBlur:BlurFilter = new BlurFilter();
myBlur.quality = 10;
myBlur.blurX = 0;
myBlur.blurY = 6;
var s:Sound = new Sound();
s.addEventListener(Event.COMPLETE, completeHandler);
s.load(request);
var song:SoundChannel = s.play();
song.addEventListener(Event.SOUND_COMPLETE, soundCompleteHandler);
var ba:ByteArray = new ByteArray();
var gr:Sprite = new Sprite();
gr.x = 150;
gr.y = 575;
addChild(gr);
var time:Timer = new Timer(.0001);
time.addEventListener(TimerEvent.TIMER, timerHandler);
time.start();
function completeHandler(event:Event):void {
    //event.target.play();
};
function randomNumber(low:Number=0, high:Number=1):Number
{
  return Math.floor(Math.random() * (1+high-low)) + low;
}

function soundCompleteHandler(event:Event):void {
    time.stop();
};
function timerHandler(event:TimerEvent):void {  
    SoundMixer.computeSpectrum(ba, true);
    var i:int;
    gr.graphics.clear();
    gr.graphics.lineStyle(1, 0xffffff);
    myBlur.blurX = randomNumber(1, 5);
    myBlur.blurY = randomNumber(1, 25);
    myBlur.quality = randomNumber(1, 100);
gr.filters = [myBlur];
gr.graphics.beginFill(0xffffff);
gr.graphics.moveTo(10, 5);
var w:uint = 20;
for (i=0; i<500; i+=w) {
    var t:Number = ba.readFloat();
    var n:Number = (t * 100);
    gr.graphics.drawCircle(w, -i, -n);
    var yy = i * (t+210);
    var place = yy.toString(16).toUpperCase();
    while(place.length < 6) {
        place = place+"0";
    }
    place = "0x" + place;
    var myColor:ColorTransform = gr.transform.colorTransform;
    myColor.color = 0xC941D0;
    gr.transform.colorTransform = myColor;
};
}; 
```

有人对此有提示吗？我花了几个小时研究这个没有解决方案。

需要的任何进一步信息将尽快结束。谢谢。

编辑：好的，这是独家新闻：我在 IE9 的 seanmurphy.co.cc/soundTest1.html 上播放了 Flash 动画。也就是说，如果浏览器缓存被清空，并且您加载页面一次，它们就会播放。如果您重新加载页面，或者在访问另一个页面后返回该页面，动画和音乐将不会播放，直到您再次清空缓存。

同样，我已将 Flash 对象和嵌入代码复制到 seanmurphy.co.cc/index6.html 的临时索引文件中，但即使浏览器缓存清空，它们也无法播放。

正如你可能想的那样，这让我发疯了！有人对 IE 在这里拉的愚蠢废话有解释吗？我真的很想把这件事放在床上。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:35:40.423

它可能与违反安全沙箱有关：

```
SecurityError: Error #2121: Security sandbox violation: 
SoundMixer.computeSpectrum: http://seanmurphy.co.cc/audio/IndianSummer-amped.swf 
cannot access http://seanmurphy.co.cc/audio/SubwayGirl.swf. 
This may be worked around by calling Security.allowDomain.
    at flash.media::SoundMixer$/computeSpectrum()
    at IndianSummer_fla::MainTimeline/timerHandler()
    at flash.utils::Timer/_timerDispatch()
    at flash.utils::Timer/tick() 
```

# shell - 在 Debain 包中注册应用程序以开始登录

> ID：11328732
> 
> 赞同：0
> 
> 时间：2012-07-04T12:03:48.840
> 
> 标签：shell, debian, packaging, deb, software-packaging

我将我的 Java 应用程序捆绑为 Debian 包，我需要我的应用程序在启动时运行。这是我的 DEB 包结构：

```
 +
   |
   +--+control
   |  |
   |  +--+control
   |  |
   |  +--+md5sums
   |  |
   |  +--+postinst
   |  |
   |  +--+prerm
   |
   +--+data
      |
      +--+usr
         |
         +--+share
            |
            +--+applications
            |  |
            |  +--+MyApp.desktop
            |
            +--+myapp
               |
               +--+bin
               |  |
               |  +--+application.sh
               |
               +--+application.jar 
```

我的 Jar 文件是使用脚本执行的`application.sh`。我的安装脚本`postinst`仅包含：

```
#!/bin/sh
ln -s /usr/share/myapp/bin/application.sh /usr/bin/myapp 
```

我想`myapp`在用户登录机器时执行脚本。我必须在这个脚本中添加什么才能让应用程序自动运行。

谢谢。

（这是我第一次构建 DEB 包，到目前为止我所学到的是通过挖掘 SourceForce 上的一些项目，但我仍然对启动时启动功能有点迷茫。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:06:44.983

[桌面应用程序自动启动规范](http://standards.freedesktop.org/autostart-spec/autostart-spec-latest.html)

> 通过将应用程序的 .desktop 文件放在 Autostart 目录之一中，应用程序将在用户登录后启动用户桌面环境期间自动启动。

# php - 标签之间的正则表达式换行

> ID：11328736
> 
> 赞同：0
> 
> 时间：2012-07-04T12:04:04.910
> 
> 标签：php, regex

我有一个带有正则表达式的 php 代码，它在 li 标记内 p 标记的新行上失败。当我执行此代码时，它会从中删除`</ul></li>`。

```
<?php
$data   =   "<h1>test</h1>
            <h2>test</h2>
            <p>This is not real text but just a test, This is not real text but just a test, This is not real text but just a test, This is not real text but just a test, This is not real text but just a test</p>
            <ul><li><p>This is not real text but just a test, This is not real text but just a test, This is not real text but just a test, This is not real text but just a test</p>
            </li></ul>
            <ul><li><p>This is not real text but just a test, This is not real text but just a test, This is not real text but just a test, This is not real text but just a test</p>
            </li></ul>";

$pattern    =   "#[\<ul\>\<li\>]*\<[p]*[h1]*[h2]*[h3]*\>(.+?)\</[p]*[h1]*[h2]*[h3]*\>[\</li\>\</ul\>]*#is";
preg_match_all($pattern, $data, $output);
var_dump($output);
?> 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:26:56.663

我不完全确定您要达到的目标，但我认为纠正模式将是这样的：

```
#\s*(<ul><li>)?(\s*<(p|h1|h2|h3)>)*(.+?)(</(p|h1|h2|h3)>\s*)*(</li></ul>)?#is 
```

编辑：纠正了一个错误

# java - java - 如何使用java查找正在运行的应用程序处于最小化状态？

> ID：11328743
> 
> 赞同：5
> 
> 时间：2012-07-04T12:04:13.813
> 
> 标签：java, windows, jna

如何使用java查找Windows桌面中所有正在运行的应用程序都处于最小化状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:25:40.427

您需要首先[下载](http://java.net/projects/jna/downloads/directory/3.2.7) **jna.jar**和**platform.jar**并将它们添加到您的类路径中。您可以通过查看[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633516%28v=vs.85%29.aspx)找出要进行的 Windows 系统调用。

这是枚举所有最小化窗口的代码：

```
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.platform.win32.WinUser.WINDOWINFO;
import com.sun.jna.platform.win32.WinUser.WNDENUMPROC;

public class Minimized {
    private static final int MAX_TITLE_LENGTH = 1024;
    private static final int WS_ICONIC = 0x20000000;

    public static void main(String[] args) throws Exception {
        User32.EnumWindows(new WNDENUMPROC() {
            @Override
            public boolean callback(HWND arg0, Pointer arg1) {
                WINDOWINFO info = new WINDOWINFO();
                User32.GetWindowInfo(arg0, info);

                // print out the title of minimized (WS_ICONIC) windows
                if ((info.dwStyle & WS_ICONIC) == WS_ICONIC) {
                    byte[] buffer = new byte[MAX_TITLE_LENGTH];
                    User32.GetWindowTextA(arg0, buffer, buffer.length);
                    String title = Native.toString(buffer);
                    System.out.println("Minimized window = " + title);
                }
                return true;
            }
        }, 0);
    }

    static class User32 {
        static { Native.register("user32"); }
        static native boolean EnumWindows(WNDENUMPROC wndenumproc, int lParam);
        static native void GetWindowTextA(HWND hWnd, byte[] buffer, int buflen);
        static native boolean GetWindowInfo(HWND hWnd, WINDOWINFO lpwndpl);
    }
} 
```

# android - 如何在活动 UI 上屏蔽 POWER 按钮

> ID：11328749
> 
> 赞同：-1
> 
> 时间：2012-07-04T12:04:49.820
> 
> 标签：android, button, android-homebutton

现在，我想实现一个这样的功能：在一个活动中，屏蔽所有硬件按钮，如HOME、VOLUME_UP、VOLUME_DOWM。但是，只有POWER键不能屏蔽。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:10:35.770

您无法拦截 Android 中的某些键，例如电源和主页，例如无法拦截 Home 键，因为这将允许任何恶意应用程序覆盖该功能。

`android.intent.category.HOME`您可以拦截主页键的唯一方法是，如果您的应用程序是在清单中使用的主页应用程序替换本身。

您可以按如下方式捕获其他键，例如音量增大/减小和返回

```
public boolean dispatchKeyEvent(KeyEvent event) {
int action = event.getAction();
int keyCode = event.getKeyCode();
    switch (keyCode) {
    case KeyEvent.KEYCODE_VOLUME_UP:
        if (action == KeyEvent.ACTION_UP) {
            //handle the key event
        }
        return true;
    case KeyEvent.KEYCODE_VOLUME_DOWN:
        if (action == KeyEvent.ACTION_DOWN) {
            //handle the key event
        }
        return true;
    default:
        return super.dispatchKeyEvent(event);
    }
} 
```

阅读 Android 开发者博文中的以下文章

[Android开发者：返回等硬键——三个故事](http://android-developers.blogspot.co.uk/2009/12/back-and-other-hard-keys-three-stories.html)

# cryptography - 充气城堡中的 Elgamal 或 RSA 加密没有占用大量输入

> ID：11328752
> 
> 赞同：1
> 
> 时间：2012-07-04T12:04:58.073
> 
> 标签：cryptography, rsa, bouncycastle, elgamal

> **可能重复：**
> [RSA 加密问题 [有效负载数据的大小]](https://stackoverflow.com/questions/5866129/rsa-encryption-problem-size-of-payload-data)

我需要一个系统，在这个系统中，我在充气城堡中使用 ECDSA 对一些数据生成数字签名。& 然后使用相同的签名文本并在充气城堡中使用 Elgamal 或 RSA 进一步加密相同的文本。主要问题是在使用 ECDSA 签署小数据（比如“Hello world”）后，我得到的输出非常大，即 54 字节数字。

现在在签名数据之后，我使用 Elgamal 或 RSA 进行数据加密......所以这里的 RSA 或 Elgamal 没有占用 54 个字节的整个输入字符串......它只需要 32 个字节并且进一步的文本被截断......

我参考过的链接：

ECDSA 签名：

[http://mytenpennies.wordpress.com/2009/04/18/using-bouncycastle-net-library-for-elliptical-curve-cryptography/#comment-30](http://mytenpennies.wordpress.com/2009/04/18/using-bouncycastle-net-library-for-elliptical-curve-cryptography/#comment-30)

对于 RSA 或 Elgamal： http: [//ox.no/posts/rsa-using-bouncycastle](http://ox.no/posts/rsa-using-bouncycastle)

示例代码：

```
Public Function Encrypt(ByVal data As Byte(), ByVal key As AsymmetricKeyParameter) As Byte()
    Dim e As New ElGamalEngine()
    e.Init(True, key)
    Dim blockSize As Integer = e.GetInputBlockSize()
    Dim output As New List(Of Byte)()
    Dim chunkPosition As Integer = 0
    While chunkPosition <= data.Length
        Dim chunkSize As Integer = Math.Min(blockSize, data.Length - (chunkPosition * blockSize))
        output.AddRange(e.ProcessBlock(data, chunkPosition, chunkSize))
        chunkPosition += blockSize
    End While
    Return output.ToArray()
End Function

Public Function Decrypt(ByVal data As Byte(), ByVal key As AsymmetricKeyParameter) As Byte()
    Dim e As New ElGamalEngine()
    e.Init(False, key)
    Dim blockSize As Integer = e.GetInputBlockSize()
    Dim output As New List(Of Byte)()
    Dim chunkPosition As Integer = 0
    While chunkPosition <= data.Length
        Dim chunkSize As Integer = Math.Min(blockSize, data.Length - (chunkPosition * blockSize))
        output.AddRange(e.ProcessBlock(data, chunkPosition, chunkSize))
        chunkPosition += blockSize
    End While
    Return output.ToArray()
End Function 
```

你能给我一些建议吗？

也不是使用 RSA 或 ELgamal .. 我可以自己使用 ECDSA 进行加密？...但据我所知，ECDSA 仅用于数字签名而不是用于加密。此外，如果我们像您在上面所做的那样使用 ECDSA 进行加密......那么我们如何解密数据？？？

非常感谢..

# disassembly - 在linux中反汇编windows exe文件的方法

> ID：11328753
> 
> 赞同：4
> 
> 时间：2012-07-04T12:05:01.867
> 
> 标签：disassembly

有没有办法在linux中反汇编windows exe文件？

这会涉及葡萄酒吗？如果是这样，是否有任何适用于 linux 的 Windows 调试/反汇编程序？

这可以用gdb完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-28T14:46:26.960

`objdump -d`对我有用（我有 2.24 版）：

```
$ objdump -d ~/.wine/drive_c/Program\ Files\ \(x86\)/Internet\ Explorer/iexplore.exe |head

/home/user/.wine/drive_c/Program Files (x86)/Internet Explorer/iexplore.exe:     file format pei-i386 
```

请注意，我尝试了其他二进制文件，包括 ntoskrnl.exe 和 Steam.exe，它们也适用于`objdump`

```
Disassembly of section .text:

10001000 <.text>:
10001000:   b8 01 00 00 00          mov    $0x1,%eax
10001005:   c2 04 00                ret    $0x4 
```

对我来说，gdb 没有工作，即使在运行时`wine`：

```
/home/user/.wine/drive_c/Program Files (x86)/Internet Explorer/iexplore.exe: not an ELF binary... don't know how to load it 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:08:54.513

查看[IDA Debugger](http://www.hex-rays.com/products/ida/debugger/linux.shtml)过去成功使用过它。

# c# - 如何为多个文件制作上下文菜单项？

> ID：11328757
> 
> 赞同：2
> 
> 时间：2012-07-04T12:05:09.573
> 
> 标签：c#, registry, contextmenu

我为图像制作上下文菜单项（例如），它应该打开我的控制台应用程序，使用目标文件作为字符串参数。当我将它用于许多文件时，它会打开许多​​应用程序副本，并且每个副本都有一个字符串参数，但我想将字符串数组发送到一个应用程序。

正如我研究的那样，在注册表级别是不可能的，所以我的应用程序应该搜索它的副本并获取它们的字符串参数。如何在 c# 控制台应用程序中实现它？

# javascript - 访问表单字段数组

> ID：11328769
> 
> 赞同：0
> 
> 时间：2012-07-04T12:05:41.567
> 
> 标签：javascript, html

我有以下表格：

```
<form name="quickAdd" action="" method="post" onsubmit="return quickAddProcess(this);">
    <input type="hidden" name="quickAddFields[module]" value="Products">
    <input type="text" name="quickAddFields[name]">
    <input type="checkbox" name="quickAddFields[toList]">
</form> 
```

当尝试从 Chrome 的控制台访问它们时，我无法做到： `document.quickAdd.quickAddFields == undefined;`
`document.quickAdd.quickAddFields.module == TypeError: Cannot read property 'module' of undefined`

但是，PHP 完美地检索了数组。

如何使用纯 JavaScript 访问这些字段？

### 更新：

哦，`document.getElementsByName('quickAddFields[module]);`工作。为什么我不能通过`Form`对象访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:08:19.553

这有效：

```
document.quickAdd['quickAddFields[module]'] 
```

**现场演示：http:** [//jsfiddle.net/yWm3L/](http://jsfiddle.net/yWm3L/)

表单元素的名称包含`[`和`]`字符。因此，您不能使用点表示法（例如`foo.bar`）。相反，您必须使用下标符号（例如`foo['bar']`）。

# monkeyrunner - 如何在 Monkeyrunner 中使用 BroadcasetIntent() 函数

> ID：11328771
> 
> 赞同：0
> 
> 时间：2012-07-04T12:05:48.603
> 
> 标签：monkeyrunner

谁能让我知道如何使用 device.broadcastIntent 函数使用 python 脚本创建联系人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:14:17.960

```
device.broadcastIntent('android.intent.action.INSERT',
'vnd.android.cursor.dir/contact', {'name':'user1501488', 'phone':'123-15489'}) 
```

对于 shell 命令试试这个

```
device.shell("am start -a android.intent.action.INSERT 
-t vnd.android.cursor.dir/contact -e name 'user1501488' -e phone 123-15489") 
```

# php - 需要关于 PHP 中 $_POST 的帮助

> ID：11328774
> 
> 赞同：0
> 
> 时间：2012-07-04T12:06:05.297
> 
> 标签：php

我的代码有问题，请让我知道我到底哪里出错了。我正在向我的帐户发送一封电子邮件，我收到的错误是……我只收到了一半的信息。

为了清楚地了解我在问什么，我附上了下面的代码。

```
<?php

$first_name = $_POST["name_t"] ;
$last_name = $_POST["lname_t"] ;
$contact=$_POST["contact"] ;
$email = $_POST["email"] ;
$adults =$_POST["no_adults_t"] ;
$children = $_POST["no_children"] ;
$address = $_POST["address"] ;
$date = $_POST["date_t"] ;
$message = "First Name : ".$first_name."\n\nLast Name : ".$last_name."\n\nContact Number : ".$contact."\n\nAddress :".$address."\n\nE mail :".$email."\n\n  Number Of Adults : ".$adults."\n\nNumber Of children : ".$children."\n\nReservation Date : ".$date;

$headers = "From:" . $email;
@mail( "someone@someone.com", "some subject ",$message,$headers);

echo "<pre>".print_r($_REQUEST, 1)."</pre>";
print $first_name;
print $last_name;
print $contact;
print $email;
print $adults;
print $children;
print $address;
print $date;

print "<body style="."background-color:gray"."></body>
<h2 style="."color:maroon;".">Thank You.Your information has been submitted.Our Representative would be contacting you shortly</h2>
<h4 style="."color:blue"."><a href="."index.html".">Click Here To Go Back to Main Page.</a></h4>"
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:30:09.043

参考这个链接：- [http://www.w3schools.com/php/php_mail.asp](http://www.w3schools.com/php/php_mail.asp)，也首先使用这个“var_dump($_POST);” 并检查您是否获得所有值。我认为电子邮件功能在本地主机上不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:14:46.230

尝试使用 SMTP (http://phpmailer.worxware.com/) 发送

# linux - 如果从 shell 脚本执行 cp 命令将不会运行

> ID：11328775
> 
> 赞同：4
> 
> 时间：2012-07-04T12:06:05.513
> 
> 标签：linux, bash, shell, cp

我有非常简单的 shell 脚本

```
#!/bin/bash    
cp -rf /var/www/ksite/app2/* /var/www/ksite/app
echo "----"
echo "done" 
```

但似乎 cp 命令失败

如果我执行

```
cp -rf /var/www/ksite/app2/* /var/www/ksite/app 
```

从终端一切正常。有人可以告诉我如何在 shell 脚本中包含 cp 吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T13:00:33.920

我们似乎怀疑这个脚本是如何失败的。如果没有错误消息，那么这是一个奇怪的消息。我建议：

1.  在命令行（有效）上，执行`which cp`
2.  不管是什么回复，然后复制它并`cp`在脚本中使用它（例如`/bin/cp`）
3.  检查widcard扩展，运行你的脚本，`bash -x script-name`看看你是否得到了你所期望的。
4.  `echo $?`在脚本中的副本之后 - 如果它为零，那么它（认为它）起作用了。
5.  从你的脚本中做一个`ls -ld /var/www/ksite/app`，也许有人设置了一个符号链接？
6.  如果仍然失败，请从命令行获取脚本并查看是否有效`. script-name`
7.  仔细检查副本确实失败了！（也许这应该是第 1 步。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:16:22.243

确保你真的有 bash at `/bin/bash`。我认为击球手哈希爆炸是：

```
#!/usr/bin/env bash 
```

这使用[env](http://linux.die.net/man/1/env)命令来定位 bash 二进制文件并设置环境。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T16:15:57.173

我有类似的问题。对我有什么帮助：

1.  我使用 windows 和 putty 编写脚本，所以我在行尾有 \r\n 。请确保，您只有 \n 符号。

2.  我复制了文件，它在脚本中对我有用的唯一方法是`cp <source_dir>/fileName <dest_dir>/fileName`在命令行中也能`cp <source_dir>/fileName <dest_dir>`很好地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:52:15.567

仅涵盖所有基础..权限在执行之间是否有所不同..即您是否以 sudo/root 权限执行一个，另一个以用户身份执行（不太可能，但我想我会问，因为我们不知道确切的错误是什么是）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-21T07:22:49.913

与在 Windows 中创建脚本的 Vladmir 类似的问题。我在 linux 环境中使用 VIM 创建了一个新文件“my_bash_script.sh”，然后将我的脚本内容读入文件中：

:r file_made_in_windows.sh

然后我保存，关闭，然后将文件设置为可执行文件：

chmod 744 my_bash_script.sh

从那里，我运行了脚本：

./my_bash_script.sh

......它奏效了。多么奇怪的问题。我一时不知所措。

# objective-c - 在 OSX 中将子视图拖到超级视图之外

> ID：11328776
> 
> 赞同：0
> 
> 时间：2012-07-04T12:06:13.993
> 
> 标签：objective-c, cocoa, nsview

我需要执行类似于删除应用程序时停靠栏中发生的操作。我在超级视图中有一个子视图列表，但超级视图已定义大小。现在，当我将其中一个子视图拖到超级视图之外时，超级视图会剪辑拖动的视图。

有没有办法允许超级视图避免剪辑内容或将子视图移动到其超级视图的超级视图中？

（为了管理拖动，我使用了超级视图中的 mouseDown 和 mouseDragged 方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:12:40.033

您可以通过将 superview 属性 clipToBounds 设置为 NO 来拖动子视图以避免剪辑。这样，当你移动 subview 时，它会移动到 superview 之外而不进行裁剪。

# php - 在 PHP 中使用 hybridauth 时如何更新用户状态？

> ID：11328777
> 
> 赞同：2
> 
> 时间：2012-07-04T12:06:18.043
> 
> 标签：php, hybridauth

我正在尝试使用 [Hybridauth](http://frinki.com/auth/examples/)与 facebook、twitter、linkedin 等 社交网站建立联系，这就是我与社交网站建立联系的方式。我是 PHP 新手，刚开始学习和这样做。 **索引.php**

```
<?php
    # start a new PHP session
    session_start();

    // we need to know it
    $CURRENT_URL = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
      //  print "CURRENT_URL $CURRENT_URL";
    // change the following paths if necessary 
    $config   = dirname(__FILE__) . '/hybridauth/config.php';
    require_once( "hybridauth/Hybrid/Auth.php" );

    try{
        $hybridauth = new Hybrid_Auth( $config );
    }
    catch( Exception $e ){
        echo "Ooophs, we got an error: " . $e->getMessage();
    }

    $provider = ""; 

    // handle logout request
    if( isset( $_GET["logout"] ) ){
        $provider = $_GET["logout"];

        $adapter = $hybridauth->getAdapter( $provider );

                $adapter->logout();

        header( "Location: index.php"  );

        die();
    }

    // if the user select a provider and authenticate with it 
    // then the widget will return this provider name in "connected_with" argument 
    elseif( isset( $_GET["connected_with"] ) && $hybridauth->isConnectedWith( $_GET["connected_with"] ) ){
        $provider = $_GET["connected_with"];

        $adapter = $hybridauth->getAdapter( $provider );

        $user_data = $adapter->getUserProfile();

        // include authenticated user view
        include "authenticated_user.php";

        die();
    } // if user connected to the selected provider 

    // if not, include unauthenticated user view
    include "unauthenticated_user.php";

authenticated_user.php

<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
<head>
    <style type="text/css" media="screen">
        <!--
            BODY {
                margin: 10px;
                padding: 0;
            }
            H1 {
                margin-bottom: 2px;
                font-family: Garamond, "Times New Roman", Times, Serif;
            }
            FIELDSET {
                border: 1px solid #ccc;
                padding: 1em;
                margin: 0;
            }
            LEGEND {
                color: #666666;
            } 
        -->
    </style> 
</head>
<body>
    <br /><br />
    <center>
        <h1>Welcome <?php echo $user_data->displayName; ?></h1>
        <br />
        <br /> 

        <table width="600" border="0" cellpadding="2" cellspacing="2">
          <tr>
            <td valign="top"><fieldset>
                <legend>Connected user badge</legend>
                <table width="100%" border="0" cellpadding="2" cellspacing="2"> 
                  <tr> 
                    <td width="100" rowspan="5">
                        <?php
                            if( $user_data->photoURL ){
                        ?>
                            <a href="<?php echo $user_data->profileURL; ?>"><img src="<?php echo $user_data->photoURL; ?>" title="<?php echo $user_data->displayName; ?>" border="0" width="100" height="120"></a>
                        <?php
                            }
                            else{
                        ?> 
                            <img src="avatar.png" title="<?php echo $user_data->displayName; ?>" border="0" >
                        <?php
                            } 
                        ?>
                    </td>
                    <td width="60" nowrap><div align="right"><strong>Provider</strong></div></td>
                    <td align="left" ><?php echo $adapter->id; ?></td>
                  </tr> 
                  <tr>
                    <td nowrap><div align="right"><strong>Identifier</strong></div></td>
                    <td align="left"><?php echo $user_data->identifier; ?></td>
                  </tr>
                  <tr>
                    <td nowrap><div align="right"><strong>Dispaly name</strong></div></td>
                    <td align="left"><?php echo $user_data->displayName; ?></td>
                  </tr>
                  <tr>
                    <td nowrap><div align="right"><strong>Email</strong></div></td>
                    <td align="left"><?php 
                            if( $user_data->email ){
                                echo $user_data->email ; 
                            }
                            else{
                                echo "not provided by " . $adapter->id ; 
                            }
                        ?></td>
                  </tr>
                  <tr>
                    <td nowrap valign="top"><div align="right"><strong>Profile URL</strong></div></td>
                    <td align="left" valign="top"><?php echo $user_data->profileURL; ?></td>
                  </tr>
                                    <tr>
                                        <td align="right"><strong>Update Status</strong></td>
                                        <td align="center"><input name="updatestatus" id="updatestatus" /></td>
                  </tr>
                </table> 

              </fieldset></td>
          </tr>
          <tr>
            <td valign="top" align="right">
                <img src="arrow.gif" align="texttop" style="margin-top:-5px;" >
                <a href="?logout=<?php echo $adapter->id; ?>">Log me out</a>
            </td>
          </tr>
        </table>
    </center> 
</body>
</html>

unathenticated.php

<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
<head>
    <style type="text/css" media="screen">
        <!--
            BODY {
                margin: 10px;
                padding: 0;
            }
            H1 {
                margin-bottom: 2px;
                font-family: Garamond, "Times New Roman", Times, Serif;
            }
            FIELDSET {
                border: 1px solid #ccc;
                padding: 1em;
                margin: 0;
            }
            LEGEND {
                color: #666666;
            }
            INPUT {
                display: block;
                font-family: Arial, verdana;
                padding: 7px;
                border: 1px solid #999;
                margin: 10px;
            } 
   /* Gradient 2 */
   .textbox{
    background-image: url(images/bg.png);
    border: 1px solid #6297BC;
    width: 230px;
}
        -->
    </style> 
</head>
<body>
    <br /><br />
    <center>
        <h1>Social web sites integration</h1>
        <br />
        <br /> 
        <table width="380" border="0" cellpadding="2" cellspacing="2">
                    <tr>
            <td valign="top"><fieldset>
                <legend>Sign-in form</legend>
                <table width="00%" border="0" cellpadding="2" cellspacing="2">
                  <tr>
                    <td><div align="right"><strong>login</strong></div></td>
                                        <td><input type="text" name="textfield" id="textfield" class="textbox"/></td>
                  </tr>
                  <tr>
                    <td><div align="right"><strong>password</strong></div></td>
                    <td><input type="text" name="textfield2" id="textfield2" class="textbox"/></td>
                  </tr>
                  <tr>
                    <td>&nbsp;</td>
                    <td><div align="center">
                        <input type="submit" value="Sign-in" />
                      </div></td>
                  </tr>
                </table>
              </fieldset></td>
          </tr>
          <tr>
            <td valign="top" align="right">
                <!--img src="arrow.gif" align="texttop" style="margin-top:-5px;" -->
                <!-- CODE REQUIRED BY THE WIDGET -->
                    <link media="screen" rel="stylesheet" href="widget/css/colorbox.css" />
                    <script src="widget/js/jquery.min.js"></script>
                    <script src="widget/js/jquery.colorbox.js"></script> 
                    <script>
                        $(document).ready(function(){
                            $(".widget_link").colorbox({iframe:true, innerWidth:430, innerHeight:222});
                        }); 
                    </script>
                <!-- /WIDGET -->
                <!-- 
                    LINK TO THE WIDGET 
                        return_to: call back this page after authenticatin the user
                        ts: nocache
                --> 
                    <a href="widget/?_ts=<?php echo time(); ?>&return_to=<?php echo urlencode( $CURRENT_URL ); ?>" class='widget_link' title="Socail web sites linker">Or sign-in with Social web sites</a>
            </td>
          </tr>
        </table> 
        <br /><br /><br />
        <!--b>Note:</b> This is just a proof of concept! it works good enough to try out on Firefox or on Chrome.-->
    </center> 
</body>
</html> 
```

所以请帮我解决这个问题？，在这里我会显示用户信息，如名字和姓氏以及图片网址。我想添加另一个文本框，它可以更新用户状态或发布墙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T07:30:14.257

来自用户指南：[更新用户状态](http://hybridauth.sourceforge.net/userguide/Profile_Data_User_Status.html#API)

这种方法存在：
`$adapter->setUserStatus("");`

用户指南注意事项：
目前只有 Facebook、Twitter、Identica、LinkedIn、QQ、Sina、Murmur、Pixnet 和 Plurk 支持此功能

您可以创建一个表单`authenticated_user.php`并添加一个 ID 为“status_update”的文本字段。提交后，您可以检查它并运行 setUserStatus 方法。

```
// if the user select a provider and authenticate with it
    // then the widget will return this provider name in "connected_with" argument
    elseif( isset( $_GET["connected_with"] ) && $hybridauth->isConnectedWith( $_GET["connected_with"] ) ){
    $provider = $_GET["connected_with"];

    $adapter = $hybridauth->getAdapter( $provider );

    // *****************************************************
    // NEW CODE TO UPDATE USER STATUS
    if( isset( $_GET["status_update"] ) && !empty( $_GET["status_update"] ) ) {
      $adapter->setUserStatus( $_GET["status_update"] );
    }

    $user_data = $adapter->getUserProfile();

    // include authenticated user view
    include "authenticated_user.php";

    die();
} // if user connected to the selected provider 
```

# c++ - c++ 中是否有任何类以毫秒为单位表示时间？

> ID：11328781
> 
> 赞同：1
> 
> 时间：2012-07-04T12:06:36.060
> 
> 标签：c++

c++ 中是否有任何类以毫秒为单位表示时间？我需要保持时间并比较值，从设备设置时间。我需要自己写还是已经有了？我看了看，`<ctime>`但`time_t`它只能保持几秒钟。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:24:30.053

好吧，C++11 的[std::chrono](http://en.cppreference.com/w/cpp/chrono)有一个[持续时间](http://en.cppreference.com/w/cpp/chrono/duration)的概念，其中之一是毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:32:34.113

如果您只是处理毫秒持续时间，那么整数类型就可以了；也许`typedef`用来给它一个友好的名字。

POSIX 使用`time_t`(表示秒) 和`clock_t`(表示微秒) 来执行此操作；标准 C 也指定了这些类型，但没有指定它们使用的单位。

如果您想混合单位，那么`std::chrono`，或者`boost::chrono`如果您不能使用 C++11，请使用一些不错的类型，例如`duration`包装整数值并根据需要自动更改比例；所以你可以写像`duration d = seconds(4) + milliseconds(123)`.

# r - 小数点 - 语言 R 中的概率值为 0

> ID：11328784
> 
> 赞同：2
> 
> 时间：2012-07-04T12:06:39.493
> 
> 标签：r, decimal, probability, numerical

如何处理 R 中的 p 值？

我期待非常低的 p 值，例如：

```
1.00E-80 
```

我需要-log10

```
-log10(1.00E-80) 
```

-log10(0) 是 Inf，但 Inf 也具有舍入感。

但似乎在 1.00E-308 之后，R 产生 0。

```
1/10^308  
[1] 1e-308

 1/10^309 
[1] 0 
```

功能与截止点1e-308相同的p值显示的准确性`lm`，还是只是设计成我们需要一个截止点，我需要考虑一个不同的截止点-例如1e-100（对于例如）用 <1e-100 替换 0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T12:38:55.903

有多种可能的答案——哪一个最有用取决于上下文：

*   在通常情况下，R 确实无法存储比 更接近零的浮点值`.Machine$double.xmin`，后者因平台而异，但通常（如您所发现的）大约为`1e-308`. 如果您真的需要处理这么小的数字并且找不到直接处理对数刻度的方法，则需要搜索 Stack Overflow 或 R wiki 以获取处理任意/扩展精度值的方法（但您可能应该尝试在对数尺度上工作——这将不那么麻烦）
*   在许多情况下，R 实际上在内部计算（自然）对数标度上的 p 值，并且可以在请求时返回对数值，而不是在给出答案之前对它们求幂。例如，`dnorm(-100,log=TRUE)`给出 -5000.919。`log10`您可以通过除以 =-2171 直接转换为 log10 比例（无需取幂，然后使用 ）`log(10)`，因为`dnorm(-100,log=TRUE)/log(10)`它太小而无法用浮点表示。对于`p***`（累积分布函数）函数，使用`log.p=TRUE`而不是`log=TRUE`. （这一点在很大程度上取决于您的特定上下文。即使您没有使用内置的 R 函数，您也可以找到一种方法来提取对数刻度上的结果。）
*   `<2.2e-16`在某些情况下，即使已知更精确的值，R 也会将 p 值结果呈现为：`(t1 <- t.test(rnorm(10,100),rnorm(10,80)))`

印刷

```
....
t = 56.2902, df = 17.904, p-value < 2.2e-16 
```

但您仍然可以从结果中提取精确的 p 值

```
> t1$p.value
[1] 1.856174e-18 
```

（在许多情况下，此行为由`format.pval()`函数控制）

说明所有这些将如何工作`lm`：

```
d <- data.frame(x=rep(1:5,each=10))
set.seed(101)
d$y <- rnorm(50,mean=d$x,sd=0.0001)
lm1 <- lm(y~x,data=d) 
```

`summary(lm1)`将斜率的 p 值打印为`<2.2e-16`，但如果我们使用`coef(summary(lm1))`（不使用 p 值格式），我们可以看到该值为 9.690173e-203。

一个更极端的例子：

```
set.seed(101); d$y <- rnorm(50,mean=d$x,sd=1e-7)
lm2 <- lm(y~x,data=d)
coef(summary(lm2)) 
```

表明 p 值实际上已下溢为零。但是，我们仍然可以在对数尺度上得到答案：

```
tval <- coef(summary(lm2))["x","t value"]
2*pt(abs(tval),df=48,lower.tail=FALSE,log.p=TRUE)/log(10) 
```

给出 -692.62（您可以使用前面的示例检查此方法，其中 p 值不会溢出，并看到您得到的答案与摘要中打印的相同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T13:03:42.193

小数字通常很难处理。

R 中无限的限制是由使用双精度浮点引起的：

?double 所有 R 平台都需要使用符合 IEC 60559（也称为 IEEE 754）标准的值。这基本上以 53 位的精度工作，并代表从大约 2e-308 到 2e+308 的绝对值范围。

[http://en.wikipedia.org/wiki/Double_precision_floating-point_format](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)

您可能会发现*Rmpfr*包在这里很有帮助，因为它允许您创建多个精度数字。

```
install.packages("Rmpfr")
require(Rmpfr)

log(mpfr(1/10^309, precBits=500)) 
```

# php - 从另一个网站提取内容

> ID：11328785
> 
> 赞同：0
> 
> 时间：2012-07-04T12:06:40.787
> 
> 标签：php, rss

我想将来自另一个网站的图片和/或视频拉到我的页面上，并且我想用 css 编辑外观。的网站。有RSS，但我不知道如何做到这一点。之前有人告诉过我可以 ping 网站，如果有新内容，它会自动显示在我的网站上。如何才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:10:37.037

我不太确定这是否直接可行，因为理论上它可能会给第三方网站带来大量流量。也许您可以阅读您的内容`RSS-Reader`并使用它来间接更新您的网站。

毕竟，我们不是在谈论窃取内容吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:46:26.307

由于 Rss 提要是 XML，最好的方法是使用 Ajax，这里是一个示例

```
window.onload = initAll;
var xhr = false;
var dataArray = new Array();
var url = "otherSites.xml";

function initAll() {

if (window.XMLHttpRequest) {
    xhr = new XMLHttpRequest();
}
else {
    if (window.ActiveXObject) {
        try {
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch (e) { }
    }
}

if (xhr) {
    xhr.onreadystatechange = setDataArray;
    xhr.open("GET", url, true);
    xhr.send(null);
}
else {
    alert("couldn't create XMLHttpRequest");
}
}

function setDataArray() {
var tag1 = "subject1";
var tag2 = "subject2";

if (xhr.readyState == 4) {
    if (xhr.status == 200) {
        if (xhr.responseXML) {

            var allData = xhr.responseXML.getElementsByTagName(tag1);
            for (var i=0; i<allData.length; i++) {
                dataArray[i] = allData[i].getElementsByTagName(tag2)[0].firstChild.nodeValue;
            }
        }
    }
    else {
        alert("the request failed" + xhr.status);
    }
}
} 
```

# qt - 一个插槽的多个信号

> ID：11328788
> 
> 赞同：2
> 
> 时间：2012-07-04T12:06:53.243
> 
> 标签：qt, signals, sender, slot

对于我的 GUI，我希望有两对按钮可以上下滚动滚动区域。第一组按钮应该在 scrollarea1 上工作，第二组按钮应该在 scrollarea2 上工作。我放入滚动区域的小部件称为 viewport1 和 viewport2。由于两组按钮都应该执行相同的操作（向上和向下滚动），我想我会制作两个名为 scrollUp 和 scrollDown 的插槽来处理两组按钮的滚动。不幸的是，我无法完成这项工作，需要一些帮助。我尝试了以下方法：

```
QPushButton up;
QPushButton down;
QPushButton up2;
QPushButton down2;

connect(&up,SIGNAL(clicked()),&up,SLOT(scrollUp()));
connect(&up2,SIGNAL(clicked()),&up,SLOT(scrollUp()));
connect(&down,SIGNAL(clicked()),&down,SLOT(scrollDown()));
connect(&down2,SIGNAL(clicked()),&down,SLOT(scrollDown()));

void MainWindow::scrollDown()
{
QScrollArea area;
QWidget view;

if((QPushButton) &sender = down)
{
    area=scrollArea;
    view=viewport;
}
if((QPushButton) &sender = down2)
{
    area=scrollArea;
    view=viewport;
}
int curpos = area.verticalScrollBar()->value();
area.verticalScrollBar()->setValue(curpos+15);
int newpos = area.verticalScrollBar()->value();
QPoint topLeft = area.viewport()->rect().topLeft();
view.move(topLeft.x(),topLeft.y()-(newpos));
}

void MainWindow::scrollUp()
{
QScrollArea area;
QWidget view;

if((QPushButton) &sender = up)
{
    area=scrollArea;
    view=viewport;
}
if((QPushButton) &sender = up2)
{
    area=scrollArea2;
    view=viewport2;
}
int curpos = area.verticalScrollBar()->value();
area.verticalScrollBar()->setValue(curpos-15);
int newpos = area.verticalScrollBar()->value();
QPoint topLeft = area.viewport()->rect().topLeft();
view.move(topLeft.x(),topLeft.y()-(newpos));
} 
```

但这不起作用有几个原因。我还尝试为插槽提供一些参数，例如：

```
connect(&up,SIGNAL(clicked()),&up,SLOT(scrollUp(scrollarea1,viewport1)));
connect(&up2,SIGNAL(clicked()),&up,SLOT(scrollUp(scrollarea2,viewport2))); 
```

但同样，没有成功。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T13:56:21.980

首先，“它不起作用”并不意味着什么，如果你不说你得到了什么错误，很难帮助你。然后，问题很少。

所有 QObject 的派生类都是不可复制的，这意味着你不能这样做

```
QWidget a;
QWidget b;
b = a; // Wrong 
```

您应该使用指针（或者可能是引用）。

```
QWidget a;
QWidget * b = new QWidget(...);
QWidget * c;
c = & a; // Ok
c = b; // Ok 
```

那么你的`connect`电话是错误的：

```
connect(&up, SIGNAL(clicked()), &up, SLOT(scrollUp())); 
```

第三个参数是拥有插槽的对象。`up`是一个 QPushButton，它没有`scrollUp()`插槽，它是你的 MainWindow 做的：

```
connect(&up, SIGNAL(clicked()), this, SLOT(scrollUp())); 
```

（因为`connect`在 MainWindow 的构造函数中调用`this`指向当前 MainWindow 对象）。

同样在 C++ 中，单`=`号表示赋值，对于相等比较，使用`=='. And`sender` 是一个函数。

如果以正确的方式实施，您的方法应该有效：

```
class MainWindow: public QWidget
{
    QScrollArea * scroll1;
    QScrollArea * scroll2;
    QWidget * view1;
    QWidget * view2;
    QPushButton * up1;
    QPushButton * up2;
    QPushButton * down1;
    QPushButton * down2;

public:
    MainWindow()
    {
        // Here initialize member variables.
        ...

        connect(up1, SIGNAL(clicked()), this, SLOT(scrollUp()));
        connect(up2, SIGNAL(clicked()), this, SLOT(scrollUp()));
        connect(down1, SIGNAL(clicked()), this, SLOT(scrollDown()));
        connect(down2, SIGNAL(clicked()), this, SLOT(scrollDown()));
    }

public slots:
    void scrollDown()
    {
        QScrollArea * area;
        QWidget * view;

        if(qobject_cast<QPushButton>(sender()) == down1) {
            area = & scroll1;
            view = & view1;
        } else if(qobject_cast<QPushButton>(sender()) == down2) {
            area = & scroll2;
            view = & view2;
        } else {
            // Error.
        }

        // Now `area` and `view` point to the right widgets.
        ...
    }

    void scrollUp()
    {
        // The same as before.
    }
}; 
```

另一种方法是将实际的滚动指令提取到一个单独的函数中：

```
class MainWindow: public QWidget
{
    // Same variables as before
    ...

public:
    MainWindow()
    {
        // Here initialize member variables.
        ...

        connect(up1, SIGNAL(clicked()), this, SLOT(scrollUp1()));
        connect(up2, SIGNAL(clicked()), this, SLOT(scrollUp2()));
        connect(down1, SIGNAL(clicked()), this, SLOT(scrollDown1()));
        connect(down2, SIGNAL(clicked()), this, SLOT(scrollDown2()));
    }

public slots:
    void scrollDown(QScrollArea * area, QWidget * view)
    {
        // Here you scroll over `area` and `view`.
    }

    void scrollDown1()
    {
        scrollDown(scroll1, area1);
    }

    void scrollDown2()
    {
        scrollDown(scroll2, area2);
    }

    // Again, the same for `scrollUp`.
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T13:38:17.137

您的代码中有几个错误：

*   关于信号的发送者：没有`QObject`所谓的“ `sender`”，而是一个`QObject * QObject::sender() const;`返回信号发送者指针的方法。
*   在 if 条件中：您将 a`QPushButton**`转换为`QPushButton`( `(QPushButton) &sender`) 并且您不将该事物与您的按钮`up(2)`和`down(2)`.
*   在您的插槽和信号之间的连接中：`scrollUp`和`scrollDown`插槽不属于`QPushButton`该类，而是属于您的`MainWindow`类。

最后，你应该这样写：

```
connect(&up,    SIGNAL(clicked()), this, SLOT(scrollUp()));
connect(&up2,   SIGNAL(clicked()), this, SLOT(scrollUp()));
connect(&down,  SIGNAL(clicked()), this, SLOT(scrollDown()));
connect(&down2, SIGNAL(clicked()), this, SLOT(scrollDown()));

void MainVindow::scrollDown() {
    // [...]

    QPushButton * senderButton = qobject_cast<QPushButton *>(this->sender()); 
    // QPushButton * senderButton = (QPushButton *) this->sender(); works too

    if (senderButton == &down) {
        // [...]
    }

    if (senderButton == &down2) {
        // [...]
    }

    // [...]
}

void MainVindow::scrollUp() {
    // [...]

    QPushButton * senderButton = qobject_cast<QPushButton *>(this->sender());
    // QPushButton * senderButton = (QPushButton *) this->sender(); works too

    if (senderButton == &up) {
        // [...]
    }

    if (senderButton == &up2) {
        // [...]
    }
    // [...]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T13:43:52.593

首先，除了信号传递给它之外，插槽不能有其他参数。Clicked 没有参数，因此插槽可以没有参数。

我认为检查 scrollArea 1 或 2 是否有焦点并决定应该移动哪个最简单的方法。

我也认为你的代码有错误。这不应该：

```
if((QPushButton) &sender = down2)
{
    area=scrollArea;
    view=viewport;
} 
```

变成这样：

```
if((QPushButton) &sender = down2)
{
    area=scrollArea2;
    view=viewport2;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-17T05:47:42.883

首先，这是伪代码。它不会编译，但它应该包含必要的信息。

我相信使用 QSignalMapper 类可以最优雅地解决这个问题。它允许来自多个发送者的无参数信号连接到一个插槽。

在标题中，编写如下内容：

```
class QSignalMapper;

class MainWindow : public QMainWindow
{

public:
  void init();

public slots:
  void handleScrollButtons(int id);

private:
enum { ScrollUp1, ScrollDown1, ScrollUp2, ScrollDown2 } // just makes it more convenient to use

QSignalMapper *m_scrollbuttonhandler;
} 
```

在源文件中，写这样的东西

```
#include <QSignalMapper>

void MainWindow::init()
{
  m_scrollbuttonhandler = new QSignalMapper(this);
  m_scrollbuttonhandler->setMapping(scrollup1button, ScrollUp1);
  m_scrollbuttonhandler->setMapping(scrolldown1button, ScrollDown1);
  m_scrollbuttonhandler->setMapping(scrollup2button, ScrollUp2);
  m_scrollbuttonhandler->setMapping(scrolldown2button, ScrollDown2);
  connect(scrollup1button, SIGNAL(clicked(bool)), m_scrollbuttonhandler, SLOT(map()));
  connect(scrolldown1button, SIGNAL(clicked(bool)), m_scrollbuttonhandler, SLOT(map()));
  connect(scrollup2button, SIGNAL(clicked(bool)), m_scrollbuttonhandler, SLOT(map()));
  connect(scrolldown2button, SIGNAL(clicked(bool)), m_scrollbuttonhandler, SLOT(map()));

  connect(m_scrollbuttonhandler, SIGNAL(mapped(int)), this, SLOT(handleScrollButtons(int)));
}

void MainWindow::handleScrollButtons(int id)
{
  switch (id)
  {
    case ScrollUp1:
    // stuff to do for scrollup1button
    case ScrollDown1:
    // stuff to do for scrolldown1button
    case ScrollUp2:
    // stuff to do for scrollup2button
    case ScrollDown2:
    // stuff to do for scrolldown2button
  }
} 
```

# android - 令牌语法错误，删除此令牌

> ID：11328790
> 
> 赞同：1
> 
> 时间：2012-07-04T12:06:59.297
> 
> 标签：android

我在令牌上有此语法错误，请删除此令牌错误。以下是我的两个相关文件

MainActivity.java

```
package com.example.androidwebviewexample;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.webkit.WebView;

import com.example.androidwebviewexample.R;

public class MainActivity extends Activity {

WebView myWebView = (WebView) findViewById(R.id.webview);
myWebView.loadUrl("www.yahoo.com");  // ERROR !!!!!!

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />
<WebView 
    android:id="@+id/webview" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:11:48.050

`onCreate()`你的活动在哪里？

您忘记定义 Activity 的 onCreate()。（来自您的代码）

现在试试这个，

```
public class MainActivity extends Activity {
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
                WebView myWebView = (WebView) findViewById(R.id.webview);
                myWebView.loadUrl("www.yahoo.com");    
         }
  } 
```

**更新：**

更新您的问题后，

```
myWebView.loadUrl("www.yahoo.com"); 
```

您不能直接**在 Activity 的**any 方法之外初始化或声明任何方法。

把这条线放在`onCreate()`后面`setContentView(R.layout.activity_main);`

正如我在上面的代码中所写，然后它的作品。

# iphone - 打开 GL 错误：使用未声明的标识符“gl_FragColor”

> ID：11328792
> 
> 赞同：5
> 
> 时间：2012-07-04T12:07:15.763
> 
> 标签：iphone, ios, xcode

我不明白这里的错误是什么。请告诉我如何解决我是 openGL 开发新手的错误。它没有编译它显示这样的错误`ERROR: 0:4: Use of undeclared identifier 'gl_FragColor'`

```
-(void)compileShaders{
GLuint vertexShader = [self compileShader:@"SimpleVertex" withType:GL_VERTEX_SHADER];
GLuint fragmentShader = [self compileShader:@"SimpleFragment" withType:GL_VERTEX_SHADER];

GLuint programHandle = glCreateProgram();
glAttachShader(programHandle, vertexShader);
glAttachShader(programHandle, fragmentShader);
glLinkProgram(programHandle);

GLint linkSuccess;
glGetProgramiv(programHandle, GL_LINK_STATUS, &linkSuccess);
if (linkSuccess == GL_FALSE) {
    GLchar messages[256];
    glGetProgramInfoLog(programHandle, sizeof(messages), 0, &messages[0]);
    NSString *messageString = [NSString stringWithUTF8String:messages];
    NSLog(@"%@",messageString);
    exit(1);
}
glUseProgram(programHandle);
_positionSlot = glGetAttribLocation(programHandle, "Position");
_colorSlot = glGetAttribLocation(programHandle, "Sourcecolor");
glEnableVertexAttribArray(_positionSlot);
glEnableVertexAttribArray(_colorSlot);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T12:08:51.393

`2`像这样修改行

```
GLuint fragmentShader = [self compileShader:@"SimpleFragment" withType:GL_FRAGMENT_SHADER]; 
```

您应该在片段着色器中编译片段。

# c++ - 为什么要使用专门的模板类？

> ID：11328795
> 
> 赞同：2
> 
> 时间：2012-07-04T12:07:31.670
> 
> 标签：c++, templates, template-specialization

[这发生在模板专业化或条件表达式](https://stackoverflow.com/questions/11285032/template-specialization-or-conditional-expressions)之后的思路中？.

我在我的一个项目中使用模板专业化，并从 Stroustrup 遇到了这个例子：[Matrix.h](http://www.stroustrup.com/Programming/Matrix/Matrix.h)，他在其中声明了一个 MatrixBase 模板类

```
template<class T> class Matrix_base 
```

用于公共元素和 Matrix 模板类

```
template<class T = double, int D = 1> class Matrix 
```

作为专业的“道具”（无论是什么）。他将构造函数声明为私有的，因此只能实例化特化。声明如下：

```
template<class T> class Matrix<T,1> : public Matrix_base<T> {...};
template<class T> class Matrix<T,2> : public Matrix_base<T> {...};
template<class T> class Matrix<T,3> : public Matrix_base<T> {...}; 
```

我的问题是：在这种情况下，专业化的优势是什么？显然这三个专业没有共同的代码，所以为什么不剪掉通用模板并声明：

```
template<class T> class Matrix_1<T> : public Matrix_base<T> {...};
template<class T> class Matrix_2<T> : public Matrix_base<T> {...};
template<class T> class Matrix_3<T> : public Matrix_base<T> {...}; 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:13:06.837

~~因为通过具有第二个模板参数，一个允许专业化**以及**通用的、非专业化的实现。所以~~

 ~~```
Matrix<float, 1000> m; 
```~~ 

~~可能会做一些合理但非专业的事情，而您必须定义一个`Matrix_1000<T>`.~~ **编辑**：第一点一般适用，但不适用于这种特殊情况，一般情况下有一个私有构造函数。

此外，它还允许您执行以下操作

```
Matrix<double, SOME_CONSTANT> m; 
```

你不能用你的`_N`解决方案来做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T13:28:02.030

基本上答案是您可以在通用代码中使用模板。您可以使用编译时常量来更改程序的行为，或者您可以编写通用代码`Matrix`来处理如果类型具有不同名称则无法处理的不同版本的类：

```
template <typename T, int D>
void print( std::ostream& o, Matrix<T,D> const & m ) { ... 
```

也就是说，即使您需要显式创建不同的类型，专业化机制也允许您提供一个*名称*，该名称可以通用地用于管理不同的类型，就好像它们只是一种单一类型的变体一样。

# jquery - 可以在 ScrollToFixed jQuery 插件中“刷新”计算值吗？

> ID：11328802
> 
> 赞同：2
> 
> 时间：2012-07-04T12:07:55.243
> 
> 标签：jquery, scrollto

我非常成功地使用了 ScrollToFixed，一抓。我的内容中有一个扩展的 div，如果扩展了 div，scrollToFixed 端点不会动态增加以适应新的高度。

所以发生的情况是端点保持固定在扩展 div 关闭时最初计算的点。然后 div 将自己固定在中间的某个位置，而不是在 div 展开后应该固定到的位置。

我能想到的最简单的解决方法是在 div 展开后强制 scrollToFixed 重新计算端点，有没有办法做到这一点？

或者当然也欢迎任何其他解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T05:02:20.833

GitHub 示例说调用`trigger('resize')`您的元素，这似乎在执行重新计算时起作用。但是，没有绑定到您的元素的“调整大小”事件。但是窗口上有，这会导致重新计算。

查看插件代码，有一个事件'resize.ScrollToFixed'。所以我监听窗口调整大小事件，这可能会导致我的元素扩大或缩小，并`trigger('resize.ScrollToFixed')`在我的元素上做一个。这很好用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-11T10:11:45.517

这个问题已经存在两年了，并且给定的解决方案（它们来自 Github 页面）不适用于我在引导程序上扩展的文本区域。

因此，我编写了一个事件侦听器来动态更新限制的插件基础选项。

如果有人有同样的问题，这里是修复：

将此侦听器添加到 scrolltofixed.js，就在第 386 行的 windowScroll 侦听器之后：

```
$(document).on("changeLimit",
    function(e) {
        base.options.limit = e.limit;
        checkScroll();
    }
); 
```

将此触发器放在您的应用程序函数中以设置新的限制值（例如动态文本区域大小更改时）：

```
$.event.trigger({
    type: "changeLimit",
    limit: $('.page_wizard').offset().top - your offset
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:15:01.110

我不确定它是否有效，但是当扩展完成后执行此操作

`jQuery(window).scroll();`

你用什么函数来扩展div？能给个插件的链接吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T18:40:52.497

@user338128 在正确的轨道上；但是，插件仅在初始化或调整窗口大小时计算或重新计算其“端点”。当 div 扩展或收缩时，调用它：

```
$(window).resize() 
```

这将导致插件取消其目标，然后重新计算。

# css - iPad / iframe：固定位置时框阴影不起作用

> ID：11328803
> 
> 赞同：0
> 
> 时间：2012-07-04T12:08:01.397
> 
> 标签：css, ios, ipad

在 iPad 中，如果 iframe 的位置固定，它就不能正确显示阴影。

`position: fixed` [http://jsfiddle.net/akRsC/](http://jsfiddle.net/akRsC/)

`position: static` [http://jsfiddle.net/akRsC/1/](http://jsfiddle.net/akRsC/1/)

除了删除之外，任何人都知道如何解决这个问题`position:fixed`？

编辑：由于某种原因，在查看 jsfiddle 中的示例时会显示阴影，但不会在 jsfiddle '/show' 中显示，这就是为什么这是我的原始链接。我不知道为什么，也不知道如何制定使其在 jsfiddle 中工作的 css 规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:35:56.043

你试过了吗：

```
-webkit-appearance: none; 
```

? 对于很多奇怪的 CSS 东西（但与 box-shadow 无关）对我很有用。

另外，看看：[http ://cubiq.org/webkit-weird-box-shadow-bug-with-fix](http://cubiq.org/webkit-weird-box-shadow-bug-with-fix)

# java - 如何调整默认打开的java中的图像自动采用计算机分辨率

> ID：11328805
> 
> 赞同：2
> 
> 时间：2012-07-04T12:08:07.797
> 
> 标签：java, image, swing, awt, resolution

图像被读取并在实际出现之前显示为飞溅。现在的问题是我想修复图像的分辨率，以适应执行它的计算机。如何做到这一点？

代码如下

```
import javax.swing.*;
import java.awt.*;

public class FrmSplash extends JWindow implements Runnable{
    public void run(){
        JLabel SplashLabel = new JLabel(new ImageIcon("Image001.jpg"));

            Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();
    getContentPane().add(SplashLabel,BorderLayout.CENTER);

    setLocation((screen.width),(screen.height));
    show();
}
} 
```

这在编译时会出现以下错误注意：使用 -Xlint:deprecation 重新编译以获取详细信息。再次使用 -Xlint 编译，但出现更多错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:13:02.203

用这个：`GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T12:13:53.703

这是关于方法`show();`，时间长`depreciated`，`setVisible()`改用，代码可以

```
import javax.swing.*;
import java.awt.*;

public class FrmSplash extends JWindow implements Runnable {

    private static final long serialVersionUID = 1L;

    public void run() {
        JLabel SplashLabel = new JLabel(new ImageIcon("Image001.jpg"));
        Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();
        getContentPane().add(SplashLabel, BorderLayout.CENTER);
        setSize((screen.width), (screen.height));
        setVisible(true);
    }
} 
```

# android - Looped OnClickListener 总是得到错误的索引数组

> ID：11328807
> 
> 赞同：0
> 
> 时间：2012-07-04T12:08:14.770
> 
> 标签：android

我有这个循环方法来显示 a`ViewPager`并且我`OnClickListener`为`ViewPager`. 因此，当单击图像时，用户将被带到 VideoPlayer 类。但我不知道为什么，点击监听器的`footage_video_url[i]`on`putExtra()`总是读取`i`额外的 on 是最大长度。所以`i`总是超过最大数组长度，这会使应用程序崩溃。

我所期待的是，例如，如果显示的图像是`footage_thumbnail_url[1]`，则额外放置的字符串`footage_video_url[1]`分别是，依此类推。有人知道我哪里出错了吗？

```
for(i = 0; i < length; i++){
                final String[] video_url = footage_video_url;
                final String[] thumbnail_url = footage_thumbnail_url;

                //System.out.println("FOOTAGE VIDEO DETAILS " +i+ ": " +video_url[i]);

                FrameLayout content = new FrameLayout(this);
                FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
                        (int) size, (int) size);
                params.gravity = Gravity.CENTER;

                ImageView imageView = new ImageView(this);
                ImageLoader loader = new ImageLoader(this);

                // Image from URL
                if (footage_thumbnail_url[i].contains("http"))
                    loader.downloadPicture(imageView, footage_thumbnail_url,i);
                else {
                    // Image From SDCard
                    File imgFile = new File(thumbnail_url[i]);
                    Bitmap bitmapImage = loader.decodeFile(imgFile);
                    Drawable drawableImage = new BitmapDrawable(bitmapImage);
                    imageView.setBackgroundDrawable(drawableImage);

                    imageView.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                            Intent listIntent = new Intent(getApplicationContext(),
                                    VideoPlayer.class);
                            listIntent.putExtra("video_url", footage_video_url[i]);
                            System.out.println("Video Number "+i+" : "+ footage_video_url[i]);
                            startActivity(listIntent);
                        }
                    });
                }

                content.addView(imageView);

                View overlay = new View(this);
                overlay.setBackgroundResource(R.drawable.btn_play);
                params.gravity = Gravity.CENTER;
                overlay.setLayoutParams(params);
                overlay.invalidate();

                content.addView(overlay);
                pagerViews.add(content);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:20:31.513

将 imageView 作为长度为 n 的数组。然后在您的 for 循环之前，再添加 1 个 for 循环，您将为所有“n”个 imageViews 设置标签，如下所示：

```
for(int x=0;x<length;x++)
     imageView[x].setTag(x); 
```

然后在你的循环内替换这些行：

```
listIntent.putExtra("video_url", footage_video_url[i]);
System.out.println("Video Number "+i+" : "+ footage_video_url[i]); 
```

这些行：

```
listIntent.putExtra("video_url", footage_video_url[imageView[i].getTag(i)]);
System.out.println("Video Number "+i+" : "+ footage_video_url[imageView[i].getTag(i)]); 
```

希望这可能会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:21:13.923

尝试设置为`ImageView`字符串的标记`footage_video_url[i]`，然后在`OnClickListener`. 这样你就可以确定正确的 String 将被放入 extras 中：

```
imageView.setTag(footage_video_url[i]);
imageView.setOnClickListener(new View.OnClickListener() {
     public void onClick(View v) {
          String theUrl = (String) v.getTag(); // I hope it's a String
          Intent listIntent = new Intent(getApplicationContext(),
                                    VideoPlayer.class);
          listIntent.putExtra("video_url", theUrl);
          System.out.println("Video Number "+i+" : "+ theUrl);
          startActivity(listIntent);
     }
}); 
```

# c - malloc 可以在两个不同的进程中返回相同的地址吗？

> ID：11328815
> 
> 赞同：4
> 
> 时间：2012-07-04T12:08:32.470
> 
> 标签：c, linux, malloc, virtual-memory

假设我有两个进程`a`并且`b`在 Linux 上。在这两个过程中我都`malloc()`用来分配内存，

有没有机会`malloc()`在两个进程中返回相同的起始地址？如果没有，那么谁来处理这件事。如果是，则两个进程都可以访问此地址的相同数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T12:20:11.510

> malloc() 是否有可能在两个进程中返回相同的起始地址。

是的，但这不是问题。

您不了解的是操作系统首先为您处理您的物理空间 - 程序等只看到虚拟地址。只有一个虚拟地址空间，但是，操作系统（让我们暂时坚持使用 32 位）将其划分。在 Windows 上，上半部分 (0xA0000000+) 属于内核，下半部分属于用户模式进程。这称为 2GB/2GB 拆分。在 Linux 上，划分为 3GB/1GB - 请参阅[这篇文章](http://linux-mm.org/VirtualMemory)：

> 内核内存定义为从 PAGE_OFFSET 开始，在 x86 中为 0XC0000000，即 3 GB。（这是定义 3gig/1gig 拆分的地方。） PAGE_OFFSET 之上的每个虚拟地址都是内核，PAGE_OFFSET 之下的任何地址都是用户地址。

现在，当发生进程切换（与上下文切换相反）时，属于当前进程的所有页面都从虚拟内存中取消映射（不一定对它们进行分页），并且所有属于要运行的进程的页面被复制进来（免责声明：这可能不完全正确；理论上可以将页面标记为脏等并在访问时复制）。

拆分的原因是，出于性能原因，虚拟内存空间的上半部分可以保持映射到操作系统内核。

因此，尽管 malloc 可能在两个给定进程中返回相同的值，但这并不重要，因为：

1.  物理上，它们不是同一个地址。
2.  这些进程不会在任何地方共享虚拟内存。

对于 64 位系统，由于我们目前只使用其中的 48 位，因此在用户模式的底部和内核模式之间存在一个无法寻址的鸿沟（目前）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:17:14.170

是`malloc()`的，如果进程在不同的地址空间中运行，则可以在不同的进程中返回相同的指针值，这是通过虚拟内存实现的。但在这种情况下，它们不会访问相同的物理内存位置，并且地址处的数据显然不必相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:48:56.537

进程是线程的集合加上地址空间。这个地址空间被称为*虚拟*地址空间，因为它的每个字节都不一定由物理内存支持。如果进程中的应用程序最终有效地使用了该内存，则虚拟地址空间的段最终将由物理内存支持。

因此，`malloc()`可能会为两个进程返回相同的地址，但这没有问题，因为这些*分配*的内存将由不同的物理内存段支持。

此外`malloc()`，实现大部分是不可重入的，因此`malloc()`在共享相同地址空间的不同线程中调用希望不会导致返回相同的虚拟地址。

# jquery-ui - jQueryUI addClass 包含带有持续时间的框阴影

> ID：11328819
> 
> 赞同：2
> 
> 时间：2012-07-04T12:08:39.270
> 
> 标签：jquery-ui, fadein, addclass, css, duration

我正在使用 jQueryUI 将 CSS 类添加到不同的部分元素。我要做的是：

```
$("#section1, #section2, #section3").addClass("test", 5000); 
```

CSS 代码如下所示：

```
.test{
box-shadow: 0px 0px 10px 10px #3bc87f;
} 
```

我对此有点困惑。我希望 box-shadow 以 5000 毫秒的持续时间淡入（就像 fadeIn 动画一样）。但发生的一切都是在 5000 毫秒内没有任何改变。5000 毫秒后，盒子阴影立即出现。

我还尝试使用 .animate() 函数。这里的结果相同。

有什么解决方案或建议吗？

谢谢

# objective-c - 使用 ZbarSDK 二维码阅读器时，dismissViewControllerAnimated 不会关闭

> ID：11328820
> 
> 赞同：0
> 
> 时间：2012-07-04T12:08:42.690
> 
> 标签：objective-c, view

我正在使用 zbarSDK 二维码阅读器[http://zbar.sourceforge.net/iphone/sdkdoc/](http://zbar.sourceforge.net/iphone/sdkdoc/)

SDK 非常棒，但我遇到了一个小问题。我需要用户在开始扫描之前可视化一个视图（包含有关如何扫描的信息），然后他按下一个按钮使扫描开始（显示相机）并且当二维码被扫描到另一个视图显示与特定二维码相关的东西。*我已经这样做了，但是当我在开始扫描后*对二维码进行构图时一切顺利，但如果当我开始扫描时二维码*已经*在摄像机视图中构图，则不会。

当我开始扫描时，我会这样做

```
-(IBAction)StartScan:(id) sender
{
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;

    reader.readerView.torchMode = 0;

    ZBarImageScanner *scanner = reader.scanner;

    // present and release the controller
    [self presentModalViewController: reader
                        animated: YES];
    [reader release];
} 
```

使用

```
[self presentModalViewController: reader
                        animated: YES]; 
```

显示摄像机并扫描二维码。然后当二维码被扫描时，我这样做：

```
- (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
{    
      id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
      ZBarSymbol *symbol = nil;

      for(symbol in results)
          hiddenData=[NSString stringWithString:symbol.data];

        [reader dismissViewControllerAnimated:YES completion:^{ NSLog(@"Test"); }];

    [self performSegueWithIdentifier:@"aDettaglioOpera" sender:self];
} 
```

关闭相机视图

```
 [reader dismissViewControllerAnimated:YES completion:^{ NSLog(@"Test"); }]; 
```

并提出与以下segue相关的观点。

现在一切顺利，如果将相机指向没有 qrcode 的点，然后将其指向 qrcocde，而不是当我开始扫描时，我已经在相机的框架中有一个 qr 码，imagePickerController 会被执行（我检查）但dismissViewControllerAnimated：YES不会关闭任何东西，也不会在“完成”之后执行块（而是正确执行并nslogging“测试”）

有什么问题？presentModalViewController 没有时间让dismissViewControllerAnimated 发挥作用？如果问题是这样，我该如何避免呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:58:32.557

我遇到了同样的问题，并找到了解决方法。**在presentViewController之前在****reader**中设置**scanCrop**属性，如下所示，并在 1 秒后将其设置回默认值 (0, 0, 1, 1)。有用！！！

 ****```
reader.scanCrop = CGRectMake(0, 0, 0.5, 0.5);
[self performSelector:@selector(changeScanCrop) withObject:nil afterDelay:1.0];

-(void)changeScanCrop {
    reader.scanCrop = CGRectMake(0, 0, 1, 1);
} 
```****

# wpf - 如何将按钮的宽度限制为collspan？

> ID：11328825
> 
> 赞同：0
> 
> 时间：2012-07-04T12:08:55.390
> 
> 标签：wpf

我有一个带有模板网格的 ItemControls，我在其中放置带有 colspan 的项目（按钮）（我正在实现一个日历）。当输入按钮的文本太大时，按钮宽度超过 colspan。这是隐藏超出文本的方法吗？

**编辑**

xml：

```
<ItemsControl Grid.Column="1" ItemsSource="{Binding Prenotazioni}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid>
                <Grid.Style>
                    <Style>
                        <Setter Property="Grid.Background">
                            <Setter.Value>
                                <MultiBinding Converter="{StaticResource GridColumnsDefinitionsSetter}">
                                    <Binding RelativeSource="{RelativeSource Self}" />
                                    <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="Periodo" />
                                    <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="StartDate" />
                                    <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="EndDate" />
                                    <Binding Path="." />
                                </MultiBinding>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Grid.Style>
            </Grid>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Button 
                Command="{x:Static local:Timeline.SelectCommand}" 
                CommandTarget="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}}" 
                CommandParameter="{Binding .}">
                <Button.ToolTip>
                    <local:SchedaServizioPrenotato />
                </Button.ToolTip>
                <Button.Style>
                    <Style TargetType="{x:Type Button}">
                        <Setter Property="Background" Value="LightYellow"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Prenotazione.Annullata}" Value="True">
                                <Setter Property="Background" Value="LightSalmon"/>
                                <Setter Property="Opacity" Value="0.4"/>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Prenotazione.Confermata}" Value="True">
                                <Setter Property="Background" Value="LightBlue"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                <TextBlock Text="{Binding Prenotazione.Nominativo}" TextTrimming="WordEllipsis"/>
            </Button>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Grid.Column">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource ItemColumnSetter}">
                        <Binding RelativeSource="{RelativeSource Self}" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="Periodo" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="StartDate" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="EndDate" />
                        <Binding Path="Periodo.Inizio" />
                        <Binding Path="Periodo.Fine" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
            <Setter Property="Grid.Row">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource ItemRowSetter}">
                        <Binding RelativeSource="{RelativeSource Self}" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="Periodo" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="StartDate" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="EndDate" />
                        <Binding Path="." />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}" Path="DataContext" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
            <Setter Property="Grid.ColumnSpan">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource ItemColumnSpanSetter}">
                        <Binding RelativeSource="{RelativeSource Self}" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="Periodo" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="StartDate" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="EndDate" />
                        <Binding Path="." />
                        <Binding Path="Periodo.Inizio" />
                        <Binding Path="Periodo.Fine" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
            <Setter Property="FrameworkElement.Visibility">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource ItemVisibilitySetter}">
                        <Binding RelativeSource="{RelativeSource Self}" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="Periodo" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="StartDate" />
                        <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=local:Timeline}" Path="EndDate" />
                        <Binding Path="Periodo.Inizio" />
                        <Binding Path="Periodo.Fine" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

**编辑**

为清楚起见，我在 Grid.Background 转换器上设置了列定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:23:26.350

还有一个叫做 ClipToBound 和 TextWrapping 的属性，看看这个

```
TextWrapping="Wrap" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:14:36.033

你可以做这样的事情：

```
<Button>
    <TextBlock Text="Text" TextTrimming="WordEllipsis"/>
</Button> 
```

# ios - UIView 的性能：removeFromSuperview VS hide

> ID：11328830
> 
> 赞同：24
> 
> 时间：2012-07-04T12:09:32.717
> 
> 标签：ios, uiview, subview

这个问题真的很基础。`UIView`从视图层次结构中删除 a 和隐藏 a之间的性能差异是`UIView`什么？

我已经读过应该从视图层次结构中删除不需要的视图。我目前的情况是 a`UIButton`有时应该是可见的。我什么时候隐藏`UIButton`它，什么时候从它的超级视图中删除它？

更改视图层次结构是否昂贵？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T18:30:58.017

我在 iOS6 iPad mini 上做了一个实验，有一个很大的滚动视图，里面有很多丰富的内容（包括图像、阴影、渐变层、带图案的背景图像，你知道的，那些设计师:)）我发现了那个视图.hidden=YES ≠ [查看 removeFromSuperview]。

我原本以为将 hidden 设置为 YES 会使视图不被渲染/绘制，因此有很多隐藏视图不会影响效率。但实际结果是：1）如果我将大滚动视图中的屏幕外视图设置为隐藏（并在它们返回可见区域时取消隐藏它们），滚动根本不平滑/连续。当它自然减速时，它看起来非常跳跃。2）如果我从滚动视图中删除屏幕外视图（但仍然使用跟踪数组保存在内存中，因此当它们返回时可以立即添加），滚动显然更平滑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T12:30:12.487

如果您需要在显示和隐藏子视图之间切换，最好的方法肯定是隐藏它。无论如何`UIButton`，记忆的影响并不是那么好。如果只是切换`hidden`属性，代码肯定会更简单。

此外，您还可以获得`hidden`属性是可动画的额外优势！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-06T10:52:05.647

在最初的问题和（正确）接受的答案之间已经过去了几年。让我添加另一个因素：与此同时，Apple 引入了 AutoLayout，正如有人所说，它可能会在某些（深层）子视图层次结构中带来相当大的性能损失。

如果您使用的是 AutoLayout，则隐藏的视图仍将被布局，而不是已删除的视图（其引用保存在某处）。根据您的情况，这可能会产生性能差异。

# android - 复选框填充在索尼爱立信 XPERIA Neo V MT11i 设备上不起作用

> ID：11328831
> 
> 赞同：1
> 
> 时间：2012-07-04T12:09:32.873
> 
> 标签：android, checkbox

我想显示带有图像背景的复选框。每当我将图像分配给复选框按钮时。它在复选框和文本之间显示不相关的空格。

所以我尝试使用 paddingLeft 删除 SAMSUNG S2、Galaxy ACE 和平板电脑上的复选框和文本之间的空格。但它不影响**索尼爱立信 XPERIA Neo V MT11i 设备**

> ```
>  <CheckBox
>         android:id="@+id/checkBox1"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:button="@drawable/checkbox_background"
>         android:paddingLeft="14dp"
>         android:text="@string/email_copy"
>         android:textColor="#39b54a"
>         android:textSize="11sp" /> 
> ```

请帮我解决这个问题

# oauth - 如何从 Java 代码验证 google oauth2 令牌

> ID：11328832
> 
> 赞同：1
> 
> 时间：2012-07-04T12:09:34.923
> 
> 标签：oauth, token

我有一个 android 应用程序和 web 服务器一起工作。现在我希望用户从 android 应用程序通过 google 登录（或使用 android 上的 google 帐户之一）。然后，andriod 应用程序通过服务调用将令牌传递给我的网络服务器......在这里我无法意识到如何从具有该令牌的谷歌获取用户电子邮件或个人资料数据。

我可以在浏览器中拨打这样的电话：[https](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=) ://www.googleapis.com/oauth2/v1/tokeninfo?access_token= {accessToken}

但是如何使用谷歌图书馆做到这一点？使用什么库等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:53:18.307

根据您尝试使用的服务，只需选择合适的[Google 客户端库](https://code.google.com/p/google-api-java-client/wiki/APIs)并查看[Google+ 示例](https://code.google.com/p/google-api-java-client/wiki/SampleProgram#Google+_Sample)。

所有 API 的前半部分应该基本相同。要获取用户信息，您需要该[`oauth2`库](https://code.google.com/p/google-api-java-client/wiki/APIs#oauth2)，然后执行以下操作（取自[此示例](https://code.google.com/p/google-api-java-client/source/browse/oauth2-cmdline-sample/src/main/java/com/google/api/services/samples/oauth2/cmdline/OAuth2Sample.java?repo=samples)）：

```
// Set up the HTTP transport and JSON factory
HttpTransport httpTransport = new NetHttpTransport();
JsonFactory jsonFactory = new JacksonFactory();

// Set up OAuth 2.0 access of protected resources
// using the refresh and access tokens, automatically
// refreshing the access token when it expires
GoogleAccessProtectedResource requestInitializer =
    new GoogleAccessProtectedResource(accessToken, httpTransport,
    jsonFactory, clientId, clientSecret, refreshToken);

// set up global Oauth2 instance
Oauth2 oauth2 = new Oauth2.Builder(httpTransport, jsonFactory, requestInitializer)
    .setApplicationName("Google-OAuth2Sample/1.0").build();

Userinfo userinfo = oauth2.userinfo().get().execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T12:06:00.663

我使用了这里的代码示例：[https](https://github.com/googleplus/gplus-verifytoken-java) ://github.com/googleplus/gplus-verifytoken-java这似乎是最新的。代码最终是这样的：

```
GoogleCredential credential = new GoogleCredential().setAccessToken( accessToken );
Oauth2 oauth2 = new Oauth2.Builder(
    UrlFetchTransport.getDefaultInstance(),
    JacksonFactory.getDefaultInstance(), credential )
    .build();
Tokeninfo tokenInfo = oauth2.tokeninfo().setAccessToken( accessToken ).execute();

// ... check tokeninfo expiry and issued to etc ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T10:38:02.407

您将需要这个库[google-api-client](https://github.com/googleapis/google-api-java-client) JAR。这是工作代码如何做到这一点。随身携带您的 ID_TOKEN 和 CLIENT_ID。

```
String jwt = "YOUR_ID_TOKEN";
GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(new NetHttpTransport(),new GsonFactory())
                        .setAudience(Collections.singletonList("YOUR_CLIENT_ID"))
                        .build();

    GoogleIdToken idToken;

    try {
          idToken = verifier.verify(jwt);
        } catch (GeneralSecurityException e) {
           throw new RuntimeException("Cannot verify the ID_TOKEN send :" + e.getMessage());
        }

    if(idToken == null){
          throw new RuntimeException("Failed to verify the ID_TOKEN send");
        }

    String username =  idToken.getPayload().getEmail(); 
```

# email - 发送电子邮件的工具

> ID：11328836
> 
> 赞同：4
> 
> 时间：2012-07-04T12:10:12.450
> 
> 标签：email, eml

我正在开发一种需要对电子邮件进行广泛测试的产品。我有一组 eml 文件（测试样本）要批量发送到产品。

任何人都可以建议一些将这些 eml 文件作为输入并将电子邮件发送给给定收件人的工具。它可以将 SMTP 地址作为输入。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-04T14:31:40.680

对于脚本 smtp 测试，我使用[swaks](http://www.jetmore.org/john/code/swaks/)

在你的情况下，就像

```
swaks -f sender@example.com -t recipient@example.net -d /path/to/emlfile 
```

# javascript - 如何将 try catch 块应用于模块实例（对象）私有方法？

> ID：11328837
> 
> 赞同：0
> 
> 时间：2012-07-04T12:10:24.960
> 
> 标签：javascript, module, try-catch, requirejs

我正在使用 requireJS 模块研究 JavaScript 架构。模块定义非常简单：

```
define([
    "dependency1.js",
    "dependency2.js"
], function (dep1, dep2) {

    dep1.dropdown = new Module("dropdown", function (sandbox) {
      // Private functions
      function getWhatever() {
        // do something
      }

      function getAnother() {
        // do another thing
      }

      // Public methods
      return {
         doSomething: function () {
            // do one more thing
            getAnother();
         }
      };
    });
}); 
```

比我有一个名为“模块”的类，在其中我试图将*try catch*块应用于模块方法，如下所示：

```
var Module = function (id, creator) {
  var instance,
      sandbox = buildSandbox(),
      name,
      method;

  instance = creator(sandbox);

  for (name in instance) {
    // Looping though all methods inside module instance
    method = instance[name];

    if (typeof method === "function") {
        // Making every function execute within try catch block
        instance[name] = (function (name, method) {
           return function () {
             try { return method.apply(this, arguments); }
             catch (ex) { console.log("ERROR", name + "(): " + ex.message); }
           };
        })(name, method);
    }
  }
} 
```

问题是，由于模块*实例*只包含公共方法，我不能将*try catch*块应用于私有方法。

我在想，如果我公开所有*实例*方法，它就不再安全了。

**有没有一种方法可以将*try catch*块也应用于私有方法，而无需重新设计每个模块本身？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:09:01.767

除非您想在模块内添加代码以自动添加 try-catch，否则不，没有办法做到这一点。

你基本上有两个选择：

1.  将你想在 try-catch 中包含的所有方法设为 public，然后使用你拥有的代码。
2.  别担心。如果您的公共方法最终调用了您的私有方法，那么无论如何您都会得到不错的错误覆盖。

我不会让“安全”影响您的决定。您正在编写 JavaScript，人们总是可以查看源代码并查看发生了什么，它永远不会真正安全。

# ruby-on-rails - 如何告诉 ransack gem 识别 datepicker 美国格式

> ID：11328844
> 
> 赞同：2
> 
> 时间：2012-07-04T12:10:37.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, meta-search, ransack

如何告诉[ransack gem](https://github.com/ernie/ransack/)翻译美国格式*mm/dd/yyyy*（默认来自[bootstrap](http://www.eyecon.ro/bootstrap-datepicker/) datepicker ）？

我正在处理的项目将有几个 lacales 文件（英国，美国），所以英国很简单（只需更改 datepicker 格式选项）但美国格式是问题

**例子：**

```
= search_form_for @post do |f|
  f.input :created_at_gt,7 
```

![在此处输入图像描述](../Images/f0de22a5cf4032a47a7f3b14e7cdf14a.png)

参数：

```
{"utf8"=>"✓", "q"=>{"created_at_gt"=>"07/04/2012",....} 
```

sql：

```
... `posts`.`created_at` > '2012-04-07 00:00:00') LIMIT 25 OFFSET 0 
```

（应该是 created_at > '2012-07-04 00:00:00' ）

**注意：**我知道我可以在控制器级别处理它，但我正在寻找 Ransack 将自动获取语言环境配置并以这种方式解析的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:29:33.937

我的同事告诉我始终将`yyyy-mm-dd`格式发送到服务器，并以用户希望的任何格式在客户端显示日期。

现在，该怎么做？当用户使用 datepicker 选择日期时，添加额外的隐藏字段并使用 JS 将该字段设置为 DB 格式。更多[在这个要点。](https://gist.github.com/3053409)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:01:19.127

等效8，要回答您的评论，我认为您需要为日期选择器添加翻译：

```
 date:
    picker_format: "dd/mm/yyyy"
    formats:
      input: "%d/%m/%Y"
      default: "%d %b %Y"  
      long: "%A %e %B %Y" 
```

但后来我使用了以下简单的表格

```
class DatePickerInput < SimpleForm::Inputs::Base
  def input
    input_html_options.merge!(:value => 
      I18n.l(@builder.object.send(attribute_name) || Time.now.to_date, :format => :input), 
      :data => { :date_format => I18n.t('date.picker_format')}
    )
    "#{@builder.text_field(attribute_name, input_html_options )}".html_safe
  end
end 
```

这可能会对您的情况有所帮助

# android - 在画布上画一个用户触摸过的圆圈

> ID：11328848
> 
> 赞同：1
> 
> 时间：2012-07-04T12:10:50.017
> 
> 标签：android, canvas

开始学习Canvas，目前有两个类（主要的一个叫view和view）View类onDraw创建一个目标（即cicle的数量，每一个颜色不同）

我设置了一个 ontouch 监听器来记录用户点击的 x 和 y

然后我的麻烦是在用户触摸的地方画一个新的圆圈/点

更新了课程

主班

```
public class StartScreen extends Activity {

    DrawView drawView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        drawView = new DrawView(this);
        drawView.setBackgroundColor(Color.WHITE);
        setContentView(drawView);
} 
```

绘图类

```
public class DrawView extends View implements View.OnTouchListener {

    private Paint paint[];

    private Context context;
    private Canvas canvas;

    //definging some variables

    public DrawView(Context pContext) {
        super(pContext);  
        this.context = pContext;

        WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        Display display = wm.getDefaultDisplay();

        paint = new Paint[5];
        setupColours();

    // setting varibale like raduis etc

    }

    private void setupColours() {

        // Creating Arrray of Paint Colours

    }

    @Override
    public void onDraw(Canvas pCanvas) {

        canvas = pCanvas;

        newRadius = radius;

        for (int i = 0; i < rings; i++) {

            if (i == 3) {
                canvas.drawCircle(centreWidth, centreHeight, newRadius, paint[0]);
            } else {
                canvas.drawCircle(centreWidth, centreHeight, newRadius, paint[1]);
            }

            canvas.drawCircle(centreWidth, centreHeight, newRadius - targetBoundary, paint[i / 2]);

            newRadius = newRadius - ringOffset;

        }

        this.setOnTouchListener(this);

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.d("TAG2", "x: " + event.getX() + " y: " + event.getY());
        drawHit(event.getX(), event.getY());
        return true;
    }

    public void drawHit(float hitX, float hitY) {
        Log.d("HIT", "Hit being drawn");

        Paint paint2 = new Paint();
        paint2.setColor(Color.BLACK);

        canvas.drawCircle(hitX, hitY, 100, paint2);

    } 
```

调用了该方法，但未绘制圆。我究竟做错了什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:56:45.347

您在问题中提供的信息很少。一点点的阐述不会有伤害。目标（圆圈）是否按照您希望的方式创建？如果是，则获取 FrameLayout 并使用“addView”方法将您的球覆盖到主视图上。

一个有点旧但仍然对你有用的教程：http: [//www.kellbot.com/2009/06/android-hello-circle/](http://www.kellbot.com/2009/06/android-hello-circle/)

祝你好运

# wordpress - Simplepie 不会在 Wordpress 中显示日期

> ID：11328850
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:02.030
> 
> 标签：wordpress, rss, simplepie

我正在使用 SimplePie 在 Wordpress 中显示 RSS 提要。出于某种原因，get_date 函数什么也没返回？下面是我的代码。可能是我的提要有问题吗？

```
<h3><span class="dark-blue">news</span> &amp; media</h3>
<ul>
<?php $feed = fetch_feed( 'http://dgpp.ie/dgppnews_rss.xml' );
foreach ( $feed->get_items() as $item ) {
    printf( '<li><a href="%s"><strong>%s</strong></a>', $item->get_permalink(),
    $item->get_title() );
    printf( '<p>%s</p>', $item->get_description() );
    printf( '<p>%s</p>', $item->get_date() );
    printf( '<a href="%s" class="readmore">read more</a></li>', $item->get_permalink() );
}
?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:17:25.213

我对[http://simplepie.org/wiki/setup/sample_page](http://simplepie.org/wiki/setup/sample_page)做了一个快速检查，这样它对我有用：

 `````
<?php

require_once('php/simplepie.inc');

$feed = new SimplePie();

$feed->set_feed_url('http://dgpp.ie/dgppnews_rss.xml');

$feed->init();

?>
<h3><span class="dark-blue">news</span> &amp; media</h3>
<ul>
<?php 

foreach ( $feed->get_items() as $item ) {
    printf( '<li><a href="%s"><strong>%s</strong></a>', $item->get_permalink(),
    $item->get_title() );
    printf( '<p>%s</p>', $item->get_description() );
    printf( '<p>%s</p>', $item->get_date() );
    printf( '<a href="%s" class="readmore">read more</a></li>', $item->get_permalink() );
}
?>
</ul> 
`````

# javascript - 捕捉fancybox错误并尝试另一种类型

> ID：11328851
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:02.467
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我想捕捉一个fancybox 错误（无法加载请求的内容。请稍后再试。）并尝试另一种fancybox 类型。

像这样。第一次尝试ajax，如果返回错误，请尝试iframe。

```
 jQuery('.lightwindow').click(function() {
        var element = this;
        jQuery(element).fancybox({
            error: function() {

                // If this didn't work, try iframe
                jQuery(element).fancybox({
                    type: 'iframe',
                    autoSize: true
                });
            }
        });
        return false;
    }); 
```

但这不起作用。它只会显示第一个fancybox的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:12:53.453

该选项`error`不存在，您可以像这样`type`设置`'ajax'`并编辑 ajax 设置，`ajax : { error : function(){ ...change fancybox and load... } }`然后您有：

```
jQuery(element).fancybox({
    type : 'ajax',
    ajax : {
        error: function() {
            // If this didn't work, try iframe
            jQuery(element).fancybox({
                type: 'iframe',
                autoSize: true
            });
        }
    }
 }); 
```

但最好在发出请求之前检查是使用 ajax 还是 iframe

# android - 如何在我的页眉和页脚布局设计中隐藏背景列表视图？

> ID：11328852
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:03.447
> 
> 标签：android, listview, background, transparency

我创建了一个列表视图应用程序然后我决定为列表视图设计页眉和页脚我的问题是我的页眉和页脚在后台显示我的列表视图。我希望隐藏此页眉和页脚列表视图项目，所以请帮助我如何隐藏？

代码：

```
public class Settings extends Activity { 
    private SettingsAdapter setAdap;
    private SettingsInnerAdapter setInnerAdap;
    private ListView lstView;
    int top;
    private int mSelPosition = 0;
    private boolean innerListView = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 

        setContentView(R.layout.testing);
        int width = getWindowManager().getDefaultDisplay().getWidth();
        int height = getWindowManager().getDefaultDisplay().getHeight();

        ImageView imgHead = (ImageView)findViewById(R.id.imageView1);

        ImageView imgbottom = (ImageView)findViewById(R.id.imageView2);

        imgbottom.setImageResource(R.drawable.back);
        imgbottom.setLayoutParams(new RelativeLayout.LayoutParams(width/8, height/8));

        imgHead.setImageResource(R.drawable.b);
        imgHead.setLayoutParams(new RelativeLayout.LayoutParams(width/8, height/8));

        setAdap = new SettingsAdapter(this.getApplicationContext());
        setAdap.updateImageSize(width, height);
        setAdap.setTextVisible(0);
       setAdap.setInnerViewVisible(false);

        lstView = (ListView)findViewById(R.id.lstLeft);
    lstView.setScreenDimension(width/16, height / 4 , width, height / 2);
        lstView.setAdapter(setAdap);
        lstView.setSelected(false);

      } 
```

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" 
    android:background="@drawable/blue">

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="60px"
        android:orientation="horizontal"
        android:layout_alignParentTop="true"
        android:background="@drawable/gradient_black"
        android:id="@+id/ttest"

        >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

        />

        <TextView
            android:id="@+id/header_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="6dp"
            android:layout_toRightOf="@+id/imageView1"
            android:text="settings"
            android:textColor="@color/white"
            android:textSize="20sp" />

    </RelativeLayout>

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="55px"

        android:background="@drawable/gradient_black"
        android:gravity="bottom"
        android:orientation="horizontal"
        android:layout_alignParentBottom="true" >
  <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ssss"
        />  

    </RelativeLayout>
  <ListView
            android:id="@+id/lstLeft"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_below="@+id/textHead"
            android:cacheColorHint="#00000000"
            android:paddingLeft="25dip" >
        </ListView>

        <ListView
            android:id="@+id/lstRight"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="#00000000" >
        </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:16:30.603

给你`Header View Layout`和你的 id`Footer View Layout`然后为你的两者设置这些属性`ListView's`

```
<ListView
    android:id="@+id/lstRight"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/headerViewId"
    android:layout_above="@+id/footerViewId"
    android:cacheColorHint="#00000000" >
</ListView> 
```

# c# - 使用土耳其语字符错误的 sharpPDF 表头

> ID：11328854
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:10.627
> 
> 标签：c#, turkish, sharppdf

当我尝试编写标头时，它给了我错误消息：

```
{"StartIndex cannot be less than zero.\r\nParameter name: startIndex"} 
```

我发现它与表格标题中的土耳其字符有关。它在我不使用土耳其语时运行。然而。

有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:15:08.300

你可以试着强迫你的文化

```
// Changes the CurrentUICulture of the current thread to en-US for example. 
Thread.CurrentThread.CurrentUICulture = new CultureInfo( "en-US", false ); 
```

# iphone - iPhone：隐藏工具栏

> ID：11328857
> 
> 赞同：3
> 
> 时间：2012-07-04T12:11:26.747
> 
> 标签：iphone, toolbar

我有 A 类，它具有工具栏（以编程方式创建）和具有属性（非原子，保留）我已将该工具栏添加为 A 类中的子视图在另一个 B 类中。我想让 A 类的工具栏隐藏

怎么做 ？我正在使用但它不起作用？请给我解决方案。我正在使用 Xcode 4.3.1

我正在 B 类中编写此代码

但它不工作

```
ClassA *aobj= [[classA alloc] init];

[aobj.toolbar sethidden:yes]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:21:42.140

您的代码的问题是您创建了一个新实例`ClassA`并尝试`UIToolBar`在这个从未在某处显示的新实例上设置隐藏。

您需要的是一个指向`ClassA`屏幕上显示的对象。

所以尝试这样的事情：

```
- (id)initWithClassA:(ClassA *)classa {
     if ((self = [super init])) {
          [classa.toolbar sethidden:yes]; 
     }
     return self;
} 
```

当您创建一个实例时，`ClassB`请使用：

```
ClassB classb = [[ClassB alloc] initWithClassA:self]; 
```

* * *

如果您只想在`ClassB`加载时隐藏工具栏，您可以创建一个变量`ClassA`at`ClassB.h`并将其设置为您自己创建的 init 方法中提供的参数：

```
- (id)initWithClassA:(ClassA *)classa {
     if ((self = [super init])) {
          instanceOfClassA = classa; 
     }
     return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:01:47.050

`[[classA alloc] init];`创建一个新的 ClassA 对象。ClassA 的这个新对象有他自己的新工具栏。这不是先前创建的工具栏。

要从 ClassB 访问旧工具栏，您需要将 ClassA 的旧对象传递给 ClassB。*（您也可以使用委托方法，在运行时它将决定调用哪个类）*

使用`initWithNibName`参数传递方法：

在`ClassB.h`

`UIViewController *parentController;`

```
-(id)initWithNibNameAndParentController:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil:(UIViewController*)controller; 
```

在`ClassB.m`

```
-(id)initWithNibNameAndParentController:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil:(UIViewController*)controller {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
parentController = controller;
}
return self;
} 
```

在像这样的ClassA中`initWithNibName`：

```
objB = [[ClassB alloc] initWithNibNameAndParentController:@"..." bundle:nil :self]; 
```

现在从 ClassB.m 隐藏您的 ClassA 工具栏，如您所愿

```
[((ClassA*)parentController).toolbar sethidden:yes]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T08:09:00.323

添加`extern id context;`classA.h，然后添加`id context;`classA.m（声明全局变量的@place）和`add context = self;`classA的ViewDidLoad。然后在classB中导入classA.h `[context.toolbar sethidden:yes];`，在这里你将a类的对象作为外部变量。这不是一个好方法。如果你需要更好的方法，请解释你是如何以及在哪里创建classB的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:17:35.157

尝试设置标签栏的框架。像将框架设置为超出屏幕的范围会隐藏控件。希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-23T20:18:42.993

在 viewDidLoad 中：

```
self.navigationController.navigationBarHidden = YES; 
```

# ckeditor - 在不添加协议和域名的情况下拖放根相对链接？

> ID：11328859
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:32.700
> 
> 标签：ckeditor

我在我建立的 CMS 中使用 CKEditor。我想使用将链接拖入 WYSIWYG 窗口的能力。

有问题的链接（在编辑器外部的 div 中生成，响应鼠标单击而弹出）在其 src 属性中具有“root-relative” url - 例如`/article/23420/this-is-my-article.html`

但是，当我将其拖入编辑器时，协议和域名会附加到插入链接 HTML 的 src 属性中的 url。所以上面的例子，当插入时，看起来像这样：`http://localhost:22565/article/23420/this-is-my-article.html`

我不想将生产站点域名添加到弹出 div 中的 src，因为 CMS 托管在与生产站点不同的域中，我们需要链接才能在 CMS 中工作就像在生产现场一样。

**问题：**有没有办法阻止 CKEditor 将协议和域名添加到链接 src？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:32:39.917

不是 CKEditor 这样做，而是浏览器。对于没有 CKEditor 创建的简单可编辑 div，我得到的结果相同。不幸的是，如果没有自定义拖放支持，就无法正确处理。我什至不确定 d&d 支持是否会有所帮助，因为如果浏览器仅提供非相对 URL，那么以后就没有选择将其剥离。

# c - 不同机器的运行时间？

> ID：11328861
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:33.747
> 
> 标签：c, compiler-construction

我编写了一个对大量数据进行排序的函数。为了测试它的性能，我将它与`qsort`. 如果我在运行带有 GCC 4.2.2 的 FreeBSD 的桌面上编译它，结果是`qsort`比我的函数花费的时间更少。但是，我在使用 GCC 4.1.2 运行 RedHat 的服务器上编译它，结果是我的函数花费的时间比`qsort`.

我对我的功能是否更好感到困惑`qsort`。有人可以帮我解释一下这种奇怪的情况吗？

我已经使用相同的 CFLAGS 对其进行了很多次测试，在同一台机器上运行它，并且在所有其他相同的条件下运行，除了不同的功能。

我的代码：

```
 53 int
 54 main(void)
 55 {
 56     int * array_first, * array_next;
 57     int len = 1000000;
 58     int i;
 59     struct timeval start, duration;
 60 
 61 
 62 
 63     array_first = malloc(sizeof(int) * len);
 64     array_next = malloc(sizeof(int) * len);
 65 
 66 
 67     for(i = 0; i < len; i++){
 68         *(array_first + i) = rand() % 1000;
 69         *(array_next + i) = *(array_first + i);
 70     }
 71 
 72     set_starttime(&start);
 73     quicksort(array_first, len, sizeof(int), compar);
 74     get_runningtime(start, &duration);
 75     printf("%lu\n", duration.tv_sec * MICRO_PER_SEC + duration.tv_usec);
 76     set_starttime(&start);
 77     qsort(array_next, len, sizeof(int), compar);
 78     get_runningtime(start, &duration);
 79     printf("%lu\n", duration.tv_sec * MICRO_PER_SEC + duration.tv_usec);
 80 
 81     assert(memcmp(array_first, array_next, sizeof(int) * len) == 0);
 82 
 83     free(array_first);
 84     free(array_next);
 85 
 86     return 0;
 87 }
 88 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:21:16.140

表现不同的原因可能有很多。

*   两个系统中的实现`qsort`可能不同，一个恰好更适合您的测试用例
*   如果测试用例是随机生成的，那么您可能只是在一个测试用例上不走运
*   使用不同的编译器版本编译代码，意味着进行了不同的优化，从而改变了代码的性能
*   在不同的系统上运行测试意味着在相同的代码中会有不同的性能。在具有特定测试用例的一种架构上，缓存可能会被轻微滥用，而在具有更大缓存的另一种架构上，这不是问题。

我可以想到一万个其他原因，但这应该足以让你知道你不应该尝试进行这样的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:55:53.493

如果您的 compar() 函数可以内联（静态函数可以内联），那将是一个巨大的胜利。内联的数量很大程度上取决于编译器和标志。

对于 qsort()，不能使用内联：qsort 依赖于回调函数是一个真正的函数。通常，比较函数会在配置文件中显示占用 xx% 的 CPU，即使对于廉价的比较函数（当调用开销相对较大时）也是如此。（你有简介吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:18:23.950

我假设您确保在两台计算机上使用相同的数据，并确保同时运行的其他程序不会影响您的测试结果。

首先，您可以查看生成的汇编代码，并检查两个编译器版本是否生成相同的输出。

如果是这样，差异可能是由于两台计算机的硬件架构不同，主要是 CPU 及其缓存。

如果在具有大型 L2/L3 缓存的 CPU 上运行，一种实现可能会更快，但如果可用空间较少，则速度会慢得多。

# r - R：使用 rollapply 时在数据框中省略 NA

> ID：11328863
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:42.157
> 
> 标签：r, dataframe, apply

我有一个数据框，我想在其中应用 rollapply 函数。我在一列中最多可以有 5% 的 NA。

我想省略 NA，但在我看来没有 na.omit。或者，我很乐意用列中的最后一个已知值填充缺失值。

我不知道如何使用 ??rollapply

有人会有想法吗？非常感谢，

文森特

编辑：我正在处理的功能是：

```
function(TableVolume,n){
TableM = TableVolume
for (i in 2:ncol(TableVolume)){TableM[,i]=rollapply(TableVolume[,i],n,FUN=mean,partial=TRUE}
TableM=TableM[n:nrow(TableVolume),]
return(TableM)
} 
```

# c# - 无法从 Windows 服务连接到外部服务

> ID：11328864
> 
> 赞同：0
> 
> 时间：2012-07-04T12:11:47.143
> 
> 标签：c#, windows, visual-studio, service

我有一个程序集 DLL，可让我连接到 ActiveMQ 代理。使用 NUnit 中的 DLL 工作正常，从控制台应用程序使用它也工作正常。问题是从 Windows 服务中使用它。与代理的连接总是失败，就好像服务没有可用的外部连接一样。即使绕过 SCM 并在 Visual Studio 中运行代码也会失败。Windows 服务项目需要做些什么才能获得外部连接吗？

DLL 中的失败代码是这样的：

```
ConnectionFactory connectionFactory = new ConnectionFactory(connectURI);
connection = connectionFactory.CreateConnection(); // fails here 
```

connectURI 很好，因为它可以在控制台应用程序和测试中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:17:22.117

主要区别在于控制台应用程序和 NUnit 以登录用户身份运行。Windows 服务以您将其配置为运行的任何方式运行。

尝试将服务配置为作为您的帐户运行，看看它是否有效。确保它没有作为网络服务或本地服务运行。

它运行的帐户可能需要用户配置文件（之前已登录），尤其是在使用代理服务器时。

尝试运行[fiddler](http://fiddler2.com/fiddler2/)或[netmon](http://support.microsoft.com/kb/812953)以查看尝试的连接中发生了什么。此外，尝试围绕连接尝试添加一些日志记录和跟踪 - 异常堆栈应该有更多详细信息。

从评论中编辑：还可以尝试添加 .net Web 客户端连接代码，这样可以更好地了解存在的任何连接问题。显然，NMS 正在掩盖和吞噬根本问题。

编辑：对于寻找解决方案的其他人（不阅读所有评论），添加 .web 客户端代码暴露了作为配置文件问题的根本问题。

# jquery - jQuery 可拖动

> ID：11328870
> 
> 赞同：1
> 
> 时间：2012-07-04T12:12:24.430
> 
> 标签：jquery, html

我是**jquery**的新手。我在以下代码中有问题。我将其保存为 html 文件，但**Draggable 框**在浏览器中不可见。我想安装“ **UI Draggable 插件**”哪里出错了... .

```
<style type="text/css">
    #draggable { width: 150px; height: 150px; padding: 0.5em; }
    </style>
    <script type="text/javascript">
    $(function() {
        $( "#draggable" ).draggable();
    });
    </script>
</head>

<div class="demo">

<div id="draggable" class="ui-widget-content">
    <p>Drag me and</p>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:26:23.003

演示 [http://jsfiddle.net/QhVNr/](http://jsfiddle.net/QhVNr/)

```
$(".draggable").draggable({
    axis: "y",
    containment: 'parent'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:16:06.543

您没有在页面中包含 jquery UI 脚本文件，否则它可以正常工作，请参阅它在**[这里工作](http://jsfiddle.net/FT3Uw/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:16:49.357

它应该是

```
<script type="text/javascript">
    $(document).ready(function() {
        $( "#draggable" ).draggable();
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T14:36:49.667

对于拖放，您必须执行以下步骤：

1) 包括最新的 JQuery 和 JQuery UI javascript 文件以及包括 JQuery UI CSS

2）编写HTML：

```
<div id="demo-frame">
    <div class="demo">
        <div id="draggable" class="ui-widget-content ui-draggable">
            <p>Drag me to my target</p>
        </div>
        <div id="droppable" class="ui-widget-header ui-droppable">
            <p>Drop here</p>
        </div>
   </div>
 </div> 
```

3）应用CSS：

```
#demo-frame {
    border: 1px solid #DDDDDD;
    clear: right;
    height: 300px;
    overflow: auto;
    position: relative;
    width: 520px;
}
#demo-frame .demo {
    padding: 5px;
}

#draggable { 
  width: 100px; 
  height: 100px; 
  padding: 0.5em; 
  float: left; 
  margin: 10px 10px 10px 0; 
}

#droppable { 
  width: 150px; 
  height: 150px; 
  padding: 0.5em; 
  float: left; 
  margin: 10px; 
}
.ui-widget-content {
    background: url("http://jqueryui.com/themeroller/images/?new=eeeeee&w=1&h=100&f=png&q=100&fltr[]=over|textures/03_highlight_soft.png|0|0|100") repeat-x scroll 50% top #EEEEEE;
    border: 1px solid #DDDDDD;
    color: #333333;
} 
```

4）编写jQuery脚本：

```
$(function() {
        $( "#draggable" ).draggable();
        $( "#droppable" ).droppable({
            drop: function( event, ui ) {
                $( this )
                    .addClass( "ui-state-highlight" )
                    .find( "p" )
                        .html( "Dropped!" );
            }
        });
    }); 
```

[我在http://codebins.com/codes/home/4ldqpdd](http://codebins.com/codes/home/4ldqpdd)上创建了用于拖放的垃圾箱

# android - android-mips: '=', ',', ';', 'asm' or '__attribute__' before 'nlink_t'

> ID：11328872
> 
> 赞同：1
> 
> 时间：2012-07-04T12:12:27.893
> 
> 标签：android, mips

在为mips编译android库时，我遇到了

```
In file included from /Volumes/Projects/api9-mips/sysroot/usr/include/strings.h:42,
                 from /Volumes/Projects/api9-mips/sysroot/usr/include/stdlib.h:42,
                 from runtime/api.c:2:
/Volumes/Projects/api9-mips/sysroot/usr/include/sys/types.h:64: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘nlink_t’ 
```

sys/types.h 本身有

```
typedef __kernel_key_t       key_t;
typedef __kernel_mode_t      mode_t;
typedef __kernel_nlink_t     nlink_t; <-------- 64
#ifndef _OFF_T_DEFINED_
#define _OFF_T_DEFINED_ 
```

该部分唯一奇怪的是 __kernel_nlink_t 与 nlink_t 由空格和制表符分隔，而所有其余的 _t 类型定义都由空格分隔到它们的对应部分。我该如何解决？

# android - Oracle ADF Mobile Trinidad Faces 未针对 Android webkit 浏览器 (linuxwebkit) 进行优化？

> ID：11328874
> 
> 赞同：0
> 
> 时间：2012-07-04T12:12:41.063
> 
> 标签：android, oracle-adf, trinidad

我们正在使用 Oracle ADF Mobile (Jdev R1) 开发基于移动的应用程序。Trinidad Faces 和 JSF 人脸在除 Android (linuxwebkit) 网络浏览器之外的所有智能手机（即 iPhone、Blackberry 和 windows）上进行了优化渲染。在 Android Web 浏览器页面呈现为桌面浏览器中的呈现。

谢谢

-y

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:13:24.703

显然你是对的，11g R1 的 ADF Mobile 开发人员指南没有提到 Android 作为目标平台：[http ://docs.oracle.com/cd/E23943_01/web.1111/e10140/toc.htm](http://docs.oracle.com/cd/E23943_01/web.1111/e10140/toc.htm)

但是，JDeveloper 11g R2 可以：http: [//docs.oracle.com/cd/E26098_01/web.1112/e16178/toc.htm](http://docs.oracle.com/cd/E26098_01/web.1112/e16178/toc.htm)

只需搜索“Android”，您就会明白我的意思。正如您提到的，基础技术是 Apache MyFaces Trinidad，因此 Trinidad 的版本决定了对移动设备的支持。

显然，JDeveloper 11g R2 使用了支持 Android 平台的 Trinidad 库 (JSF 2)，而 JDeveloper 11g R1 不使用。

鉴于 Trinidad 1.2 支持 Android（尽管它可能没有像这里提到的那样经过测试：http: [//myfaces.apache.org/trinidad/devguide/mobile.html](http://myfaces.apache.org/trinidad/devguide/mobile.html)），您应该能够为 Android 创建自己的皮肤，如此处所述： http: [//myfaces.apache.org/trinidad/devguide/mobileSkinning.html](http://myfaces.apache.org/trinidad/devguide/mobileSkinning.html)

Trinidad 中的 RequestContext 对象返回调用代理，您可能需要先检查它是否返回 Android。如果是这样，那么创建和应用皮肤就很容易了。

# android - Android sqlLite ON CONFLICT IGNORE 在 ICS 中被忽略

> ID：11328877
> 
> 赞同：8
> 
> 时间：2012-07-04T12:13:00.457
> 
> 标签：android, sqlite

我有一个带有以下创建语句的简单地址表：

```
"CREATE TABLE " + ADDRESSES_TABLE + " (" +
                KEY_ADDRESS_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_ADDRESS_COUNTRY + " TEXT, " +
                KEY_ADDRESS_CITY + " TEXT, " +
                KEY_ADDRESS_STREET + " TEXT, " +
                KEY_ADDRESS_HOUSE + " TEXT, " +
                KEY_ADDRESS_POSTAL_CODE + " TEXT," +
                "UNIQUE("+KEY_ADDRESS_COUNTRY+","+KEY_ADDRESS_CITY+","+KEY_ADDRESS_STREET+","+KEY_ADDRESS_HOUSE+","+KEY_ADDRESS_POSTAL_CODE +") ON CONFLICT IGNORE)" 
```

当我添加重复记录时， insert() 方法返回 -1 而不是现有行的 id。

这个问题只能在 4.0+ 上重现。该方法在 2.2 和 2.3.3 上按预期工作。

有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T01:04:45.137

不幸的是，Android 文档是错误的。（因此，您的代码在 Android 的早期版本（例如 2.2 和 2.3）上实际上并没有按预期工作。）

在 2.2 和 2.3 中，`insertWithOnConflict()`将返回 SQLite C API 函数[sqlite3_last_insert_rowid()](http://www.sqlite.org/c3ref/last_insert_rowid.html)的值，其文档明确指出失败的插入（例如，应用了 ON CONFLICT 解决方案，如 IGNORE）不会影响返回值。因此，如果没有对连接执行先前的插入并且尝试重复插入，`insertWithOnConflict()`将返回 0。如果先前的插入向任何表添加了一行，则该方法将返回该插入的行 ID——*当然*这是大错特错。

在 4.0 中，`insertWithOnConflict()`将返回相同 SQLite C API 函数的值，除了返回 -1 而不是 0。

此更改是您现在观察错误的原因。但是，如果您仔细检查 2.2 和 2.3 中的结果，您会发现执行该`OR IGNORE`子句时返回的行 ID 实际上不是正确的行 ID（巧合除外）。

# facebook - 开发标准网站和 Facebook 应用程序之间的区别

> ID：11328881
> 
> 赞同：0
> 
> 时间：2012-07-04T12:13:07.710
> 
> 标签：facebook, templates

我是 Web 开发的新手，但有编码经验 (Java)，我正在尝试构建一个 Facebook 应用程序。我将使用的语言是 HTML5、CSS、JS 和 PHP。

我一直在浏览网络上的 Facebook 开发书籍和资源，似乎它们涵盖了 Web 应用程序与 Facebook 的交互，例如从 Facebook 帐户检索信息、发布到新闻提要等，但它们都没有涵盖实际构建应用程序。所以 ：

*   集成的 Facebook 应用程序实际上只是在 Facebook 画布中呈现的网站，这些网站利用 Facebook 通过其 API 提供的功能，例如我上面提到的？

*   因此是否可以只在 Facebook 画布中呈现现有网站（使用一些额外的编码，例如应用程序 ID 和密码）？

我问这个是因为不幸的是我没有艺术天赋，当我尝试设计网页时，所有组件似乎都在洗牌！所以我希望我可以使用现成的网站模板（例如 ThemeForest 上提供的模板），并且想知道将其加载到画布中是否简单？我希望我的应用程序被集成，因为我需要使用很多 Facebook 功能，这似乎在实际的 Facebook 环境中更容易使用，而且画布更小，因此视图通常比独立网站简单得多.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:08:46.530

是的。一个常见的误解是 Facebook 上的应用程序托管在与 Facebook 相关联的平台上。这是完全错误的，当您使用应用程序时（大部分时间），您只是在查看[iframe](http://www.w3schools.com/tags/tag_iframe.asp)，这是您服务器上的普通网页。您可以为画布选择两个宽度，创建 Facebook 应用页面后查看选项。有关详细信息，请参阅[Facebook 自己的教程](https://developers.facebook.com/docs/opengraph/tutorial/)。

# c++ - Boost::Log - 带有严重性和自定义过滤器属性的日志？使用哪个宏？

> ID：11328887
> 
> 赞同：4
> 
> 时间：2012-07-04T12:13:18.843
> 
> 标签：c++, logging, boost, filter, boost-log

我想使用 boost::log 让我的负载测试应用程序记录到不同的文件和控制台。每个工作线程（代表一个连接到要测试的服务器的用户）应记录线程日志并将失败的调用记录到失败的调用日志中。我尝试通过使用过滤器来实现这一点。

目标是：

```
=> All logs with severity = lower than "INFO" will be discarded
=> All log records having the attribute "global" go to ./logs/loadtest.log AND to console
=> All log records having the attribute "thread" go to ./logs/thread.log AND to console
=> All log records having the attribute "faileCalls" go to ./logs/failedCalls.log AND to console 
```

这是我的初始化代码：

```
void initLogging()
{
boost::shared_ptr<boost::log::core::basic_core> core = boost::log::core::get();

// Construct the sinks for our global log file and for console
typedef boost::log::sinks::asynchronous_sink<boost::log::sinks::text_ostream_backend> text_sink;

// global log file
boost::shared_ptr<text_sink> sinkLoadtest = boost::make_shared<text_sink>();
sinkLoadtest->locked_backend()->add_stream(boost::make_shared<std::ofstream>("./logs/loadtest.log", std::ios::app));
sinkLoadtest->locked_backend()->auto_flush(true);
sinkLoadtest->set_filter(boost::log::filters::has_attr("global"));
core->add_sink(sinkLoadtest);

// console
boost::shared_ptr<text_sink> sinkConsole = boost::make_shared<text_sink>();
boost::shared_ptr<std::ostream> stream(&std::clog, boost::log::empty_deleter());
sinkConsole->locked_backend()->add_stream(stream);
sinkConsole->locked_backend()->auto_flush(true);
core->add_sink(sinkConsole);

// thread dependent logging (one file per workthread)
    sinkThread = boost::make_shared<text_sink>();
sinkFailedCalls = boost::make_shared<text_sink>();

    sinkThread->locked_backend()->add_stream(boost::make_shared<std::ofstream>("./logs/thread.log"), std::ios::app));
    sinkFailedCalls->locked_backend()->add_stream(boost::make_shared<std::ofstream>("./logs/failedCalls.log", std::ios::app));

    sinkThread->set_filter(boost::log::filters::has_attr("thread"));
    sinkFailedCalls->set_filter(boost::log::filters::has_attr("failedCalls"));

    core->add_sink(sinkThread);
    core->add_sink(sinkFailedCalls);

    // set global severity level
    core->set_filter(boost::log::filters::attr<boost::log::trivial::severity_level>("Severity") >= boost::log::trivial::info);
} 
```

这些是我的问题：使用哪个宏能够通过严重级别加上我的自定义过滤器属性之一？

获取记录器的最佳方法是什么？是从核心获取它还是有一个成员变量“logger”？我需要它是线程安全的。

预先感谢您的努力！

最佳一月

// 编辑：如果这样的宏能够提供使用流式操作符，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T19:04:55.937

您必须使用 BOOST_LOG_STREAM_WITH_PARAMS 或等效的 BOOST_LOG_WITH_PARAMS

# vba - 抓住选定复选框的名称

> ID：11328891
> 
> 赞同：1
> 
> 时间：2012-07-04T12:13:39.893
> 
> 标签：vba, excel, checkbox

我正在尝试用任何其他语言做一些非常简单的事情，但是在网上搜索了大约一个小时后，我找不到如何在 Vba 中做到这一点。基本上我有一个复选框，单击该复选框应将其名称分配给变量并在消息框中显示名称。我的实际功能要大得多，但这是我需要帮助的唯一一点。

```
 Private Sub admin_toggle_Click()

    Dim admin_group As String
    Dim admin_name As String
    Dim admin_value As String

    admin_name = ActiveControl.Name
    MsgBox admin_name

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:25:51.333

解决方法如下：

```
 Private Sub admin_toggle_Click() 

Dim admin_group As String 
Dim admin_name As String 
Dim admin_value As String 

admin_name = admin_frame.ActiveControl.Name 
MsgBox admin_name 

End Sub 
```

因为我所指的复选框包含在一个框架中，所以在访问我需要的元素之前，我必须引用封装框架。

# android - Facebook 幻灯片滑出菜单（不使用该库）

> ID：11328895
> 
> 赞同：5
> 
> 时间：2012-07-04T12:14:02.453
> 
> 标签：android, facebook, android-layout, margin, android-animation

我想在我的应用程序中有类似 facebook 的菜单。这方面有很多线程，所有线程都建议使用一个库，该库实际上只是截取屏幕截图并将该图像向右滑动，以便在左侧显示菜单并滑动带有一些过渡的图像。但在这种情况下，右侧的布局是不可点击的，因为它是一个图像。

但是我有另一种方法，其中我有一个已经**有 Menu Layout 和 Content Layout的****Root** Layout 。但是根布局向左设置了一些负边距，因此它不可见。像这样-

 **![未按下菜单时的内容](../Images/8adba8254e8af6b1e2eaed3b34ccb723.png)

当用户按下菜单按钮时，菜单布局向右滑动，根布局的左边距设置为 0。所以现在我们看到的是 -

![按下菜单并显示菜单布局时的内容](../Images/ca5af5919562738f1cb2ccaad0bd764e.png)

现在，**真正的问题从这里开始**

我想用一些动画来滑动两个布局。因此，当我为菜单布局和内容布局设置动画时，即使我对其应用相同的动画，两种布局的动画速度也不相同。所以我尝试通过设置边距来将**ROOT LAYOUT 仅**向右/向左移动。但这样做时，屏幕上不会显示任何内容。我哪里错了。我设置边距的方式如下所示-

```
int width = leftLayout.getWidth();
isLayoutShown = !isLayoutShown;
if(isLayoutShown){
    rootLayoutParams.setMargins(0, 0, 0, 0);
    rootLayout.setLayoutParams(rootLayoutParams);    
}else{
    rootLayoutParams.setMargins(-width, 0, 0, 0);
    rootLayout.setLayoutParams(rootLayoutParams);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:03:13.303

终于以某种方式我可以做到。这是我单击左上角的菜单按钮时使用的代码：

```
@Override
public void onClick(View v) {
rootLayoutParams = new LayoutParams(rightLayout.getWidth(),
    rightLayout.getHeight());

if (lhsMenu.getVisibility() == View.GONE) {
    lhsMenu.setVisibility(View.VISIBLE);
    Animation slideRight = setRightSlidingAnimation();
    rightLayout.setAnimation(slideRight);
    lhsMenu.setAnimation(slideRight);
} else {
    Animation slideLeft = setLeftSlidingAnimation();
    rightLayout.setAnimation(slideLeft);
    lhsMenu.setAnimation(slideLeft);
    lhsMenu.setVisibility(View.GONE);
    }
} 
```

**更新：**还将边距设置为左右（如果需要），`rightLayout`以便 rightLayout 不会缩小。

`_rightLayoutParams.setMargins(width, 0, -width, 0);`

在`width = 200`我的情况下。**

# grep - 命令的 grep 输出有时可以工作.. 有时不行？

> ID：11328906
> 
> 赞同：0
> 
> 时间：2012-07-04T12:15:05.930
> 
> 标签：grep, gnu

请考虑以下几点：

```
$ cd ~/.emacs.d/lisp/tabbar
$ git pull
Already up-to-date.

$ git pull | grep -q "Already" ; echo $?
0 
```

还在我这儿？现在：

```
$ cd ~/src/emacs-tmp/trunk
$ bzr up                           
Tree is up to date at revision 108837 of branch /home/px/src/emacs-tmp/trunk

$ bzr up | grep -q "Tree" ; echo $?     
Tree is up to date at revision 108837 of branch /home/px/src/emacs-tmp/trunk
1 
```

问题 ：

*   为什么 grep 的返回码在第一种情况下是“0”（找到）而在第二种情况下是“1”（未找到）？
*   为什么第一个（git pull）命令的输出在 grep 时隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:17:50.970

我认为您的“可见”命令是输出到标准错误，而不是标准输出。grep 只在标准输出中查找，除非您使用 2>&1 进行重定向。

因此，尝试

```
bzr up 2>&1 | grep -q "Tree" ; echo $? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:18:59.307

看起来 bzr 正在输出到标准错误设备 ( `/dev/stderr`)，而`grep`只是检查标准输入。您可以通过尝试重定向`stderr`来确认或否认此猜测`stdin`：

```
bzr up 2>&1 | grep -q "Tree" ; echo $? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:19:31.600

*   为什么 grep 的返回码在第一种情况下是“0”（找到）而在第二种情况下是“1”（未找到）？

可能是因为在第一种情况下输出在 stdout 上，而在第二种情况下它在 stderr 上。您可以在命令中添加“2>&1”以将所有内容都扔到 stadout。

*   为什么第一个（git pull）命令的输出在 grep 时隐藏？

因为你说“-q”，它告诉 grep 闭嘴:-)

# php - 在 Paypal 的 Form 标签内使用 $_POST 变量

> ID：11328908
> 
> 赞同：1
> 
> 时间：2012-07-04T12:15:08.427
> 
> 标签：php, post, paypal

在问这个问题之前我搜索过。我没有找到答案可能是因为我在搜索时没有使用正确的关键字。

无论如何，这就是我所面临的：

我想从一个网站卖票。每张门票10美元。我正在使用 Paypal 接收付款。html 表单由以下内容组成：

```
<tr>
    <td><label for="not">Number of Tickets</label></td>
    <td><input name="not" type="text" id="not" /></td>
</tr>

 <?php $total = $_POST['not']*10; ?>    

<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="xxx@xxxx.com">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="amount" value="<?php echo $total; ?>">
<input name="item_name" type="hidden" id="item_name" value="Ticket Purchase" />

 <tr>
    <td>&nbsp;</td>
    <td><input type="submit" value="Pay" name="submit"  />
</tr> 
```

问题是总金额是根据购买的门票数量计算的。因此，如果有人输入 5 张票，总金额应为 50 美元，这将用作“金额”变量中的值。但是贝宝并没有接受总价值。所以我想知道我应该如何在里面发布可变金额？

在此先感谢，尼萨尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:29:49.480

我认为你最好用 javascript/jquery 计算总数并以这种方式更新它。

如果你改变

```
<input type="hidden" name="amount" value="$total"> 
```

至

```
<input type="hidden" name="amount" value="" id="total"> 
```

然后在脚本括号内使用 jquery 类似这样的东西

```
$("#not").change(function()
{
  var total = $("#not").val() * 10;
  $("#total").val(total);
}); 
```

尽管您仍然需要进行数据验证，即确保“not”是一个整数。

希望有帮助。

谢谢

尼古拉斯

# ios - UIImagePickerController 教程？

> ID：11328909
> 
> 赞同：10
> 
> 时间：2012-07-04T12:15:10.917
> 
> 标签：ios, objective-c, swift, class, uiimagepickercontroller

我目前正在开发一个应用程序，我需要能够在按下按钮打开相机并拍摄快照时将其附加到 .json 文件并发送到我的服务器。在过去的几个小时里，我在 google 和 StackOverflow 上进行搜索，但所有的教程看起来都很旧（08'-09'）或者不符合我的需求。我知道所有的工作都是在`UIImagePickerController`课堂上完成的，但我想要一个可行的例子。有谁知道一个很好的教程来开始这样的事情？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-10-07T09:58:29.950

您应该从 AppCoda [Build a Simple iPhone Camera App](http://www.appcoda.com/ios-programming-camera-iphone-app/)中查看这篇文章，非常清晰和简单:)

使用原生 iOS 相机应用拍照

```
- (IBAction)takePhoto:(UIButton *)sender {

    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.allowsEditing = YES;
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;

    [self presentViewController:picker animated:YES completion:nil]; 
} 
```

阅读拍摄的照片（您必须实施`UIImagePickerControllerDelegate`

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage *chosenImage = info[UIImagePickerControllerEditedImage];
    self.imageView.image = chosenImage;

    [picker dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-04T12:21:47.643

好吧，如果你用谷歌搜索类似的东西：

> UIImagePickerController 并拍摄快照放入 json 并发送到服务器

会有点难。因此，将[本](http://blog.hanpo.tw/2012/01/uiimagepickercontroller-and-simple.html)教程用于`UIImagePickerController`. 顺便说一句，搜索的术语是：

> UIImagePickerController 教程 2012

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-14T12:08:27.960

I came across this code [AQPhotoPicker](https://github.com/aqavi-paracha/AQPhotoPicker). This is quite easy to use with only one call, you will get photo from camera or photoPicker

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:21:30.817

试试[这个](http://www.zimbio.com/iPhone/articles/1109/Picking+Images+iPhone+SDK+UIImagePickerController)。这很简单，你只需要为一个控制器设置委托并调用它。谷歌会帮助你，有大量的资源和工作示例。例如，[来自 Apple 的示例代码](http://developer.apple.com/library/ios/#samplecode/PhotoLocations/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008909)

# php - 使用 PHP 显示依赖于页面 id 的不同 HTML 块

> ID：11328910
> 
> 赞同：1
> 
> 时间：2012-07-04T12:15:12.463
> 
> 标签：php, wordpress

我正在尝试使用 PHP 为图像滑块输出不同的 HTML，具体取决于 wordpress 网站的正文页面 ID

我已经尝试了以下方法，但是作为 PHP 的新手，我似乎有点吃不消。它只需要简单——我可以通过 CSS 来完成，但我宁愿不加载所有图像，只显示其中的一小部分。如果可能的话，我也宁愿不使用插件。

任何指针将不胜感激。

谢谢

```
<?php if($id == "page-id-19") {
?>
<div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image2.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image3.jpg" alt="" /></div>
<?php
}
elseif ($id == "page-id-23") {
?>
<div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image4.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image5.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image6.jpg" alt="" /></div>
<?php
}
?> 
```

******更新* *** ******

 **我意识到 id 实际上是一个类。

例如。"body class="page page-id-19 page-template page-template-inner-page-php"

但是，当使用下面建议的解决方案时，它根本不会将任何 HTML 输出到页面......它通过包含被调用到模板页面 -

```
 <?php
   switch($class){
     case "page-id-19":
?>
         <div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image2.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image3.jpg" alt="" /></div>
<?php   
     break;
     case "page-id-23":
?>
         <div class="imageSlider"><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image4.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image5.jpg" alt="" /><img src="<?php echo bloginfo('template_directory');?>/Images/mainImages/innerPage-Image6.jpg" alt="" /></div>
<?php
     break;
   }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:36:42.863

而不是`$id`，尝试使用`$post->ID`

或者，您需要使用以下命令创建 $id：

```
$id = $post->ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:24:57.660

我可能误解了这个问题，但我理解你在问什么的方式，我认为你最好使用开关来实现这一点。

**开关：**

```
<?php
   switch($id){
     case "page-id-a":
?>
         Put your HTML here.
<?php   
     break;
     case "page-id-b":
?>
         Put your HTML here.
<?php
     break;
   }
?> 
```

我把*page-id-a*或*page-id-b*放在哪里，让这些成为你目前拥有的*page-id-23*等。

它并不像看起来那么复杂，而且非常合乎逻辑。

您可以在以下位置阅读有关开关的更多信息：

[http://www.w3schools.com/php/php_switch.asp](http://www.w3schools.com/php/php_switch.asp)**

# javascript - 停止执行一些 javascript 代码

> ID：11328912
> 
> 赞同：2
> 
> 时间：2012-07-04T12:15:23.700
> 
> 标签：javascript, jquery, ajax

我有多个以javascript代码作为响应的ajax请求，一旦加载了新代码，我需要停止执行previos javascript代码，我的意思是停止间隔、函数、超时......

**我的代码：**

```
$.get("/ucmd", params, function(data) {
  var $data = document.createElement("div");
  $data.innerHTML = data;
  var em = $data.getElementsByTagName("*");
  for(var i=0;i<em.length;i++)
  {
    if(em[i].tagName === "SCRIPT")
    {
     if($("#"+em[i].id)) document.body.removeChild($("#"+em[i].id));
     var script = document.createElement("script");
     script.id = em[i].id;
     script.language="javascript";
     script.type="text/javascript";
     script.innerHTML = em[i].innerHTML;
     document.body.appendChild(script);
    }
  }
}); 
```

**是否可以在加载新代码时停止执行以前的代码？**

*PS：我想使用纯javascript代码。*

**我的解决方案：**

```
 window.$timeout = {};
  window.$interval = {};

  window.$setTimeout = window.setTimeout;
  window.$setInterval = window.setInterval;
  window.$clearTimeout = window.clearTimeout;
  window.$clearInterval = window.clearInterval;

  window.setTimeout = function(id, code, delay) {
    if(typeof $timeout[id] !== "undefined") clearTimeout(id);
    $timeout[id] = $setTimeout(code, delay);
  }; 

  window.clearTimeout = function(id) {
    $clearInterval($timeout[id]);
    delete $timeout[id];
  };

  window.setInterval = function(id, code, delay) {
    if(typeof $interval[id] !== "undefined") clearInterval(id);
    $interval[id] = $setInterval(code, delay);
  }; 

  window.clearTimeout = function(id) {
    $clearInterval($interval[id]);
    delete $interval[id];
  }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:29:57.843

要使用 停止现有呼叫`timeout()`，您可以使用：

```
clearTimeout(t); 
```

您可以保留一个全局变量来保持函数被调用的次数并`clearTimeout()`围绕它编写代码......

拨打电话：

```
t = setTimeout("thing()",1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T12:30:22.960

如果您不跟踪标识符`setInterval()`和`setTimeout()`标识符，除非您刷新整个页面，否则这是不可能的。

[如何使用javascript停止所有超时和间隔？](https://stackoverflow.com/questions/3141064/how-to-stop-all-timeouts-and-intervals-using-javascript)

* * *

清除所有事件处理程序也并非易事；您必须遍历整棵树并调用`.unbind()`所有这些树。也许你可以限制范围？

[如何删除 Jquery 中的所有 Click 事件处理程序](https://stackoverflow.com/questions/825112/how-to-remove-all-click-event-handlers-in-jquery)

* * *

唯一简单的事情是确保没有函数在运行，因为当你的 AJAX 响应被处理时，你很确定没有其他代码在运行:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T12:33:50.133

`clearInterval(id)`您可以使用这些功能和`clearTimeout(id)`（谷歌他们）清除超时和间隔

至于功能，你可以这样做：

```
// Orginal function
window.myFunc = function(a,b,...){ ...your code here... }

// New function after ajax load
$.ajax({ 
    url : '/blablabla.php',
    type : 'GET',
    data : params,
    succes : function(){
        ......
        window.myFunc = function(a,b,...){ ...your NEW code here... }
    }
}); 
```

# .net - 阻止用户在所有应用程序上使用特定密钥，或指定密钥列表

> ID：11328914
> 
> 赞同：1
> 
> 时间：2012-07-04T12:15:42.087
> 
> 标签：.net, keypress

有人问我是否可以为所有用户和所有应用程序阻止键盘上的特定键。最理想的情况是，如果可能，或者如果特定应用程序正在运行，他们希望能够仅针对指定应用程序列表阻止该键。

我不确定他们为什么要这样做，但我相信这是因为由其他第 3 方开发的一个或多个应用程序在发生崩溃时崩溃，我不知道它到底是哪个键，但我认为这是一些常规的键盘键。

如果可能的话，我能用什么？我想在背景上运行它以防止大多数人（不是我知道的所有人，但那些不知道的人）绕过它。

编辑：这是最新信息。当应用程序的实例在计算机上运行时，此人希望阻止打印屏幕被按下。不管是 ALT-PrintScreen 还是简单的 PrintScreen。因此，如果 Arian（应用程序名称）正在运行，即使用户正在使用其他应用程序（例如 Office），我也必须阻止密钥，以便它无法轻松捕获屏幕。对于那些会告诉我有其他方法来捕获屏幕的人，我同意你的看法，人们也知道，但它是在受控环境中，所以不会安装其他软件，他知道我们无法控制一切。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:40:29.180

这将是一个艰难的，但你可以实现它看到这个想法的链接[http://www.codeproject.com/Articles/14485/Low-level-Windows-API-hooks-from-C-to-stop-unwante](http://www.codeproject.com/Articles/14485/Low-level-Windows-API-hooks-from-C-to-stop-unwante)

您将不得不为您的要求编写大量自定义代码

祝你好运...

# php - 当'while looping'一个mysql $row 结果时，它只在第一个实例中有效

> ID：11328916
> 
> 赞同：1
> 
> 时间：2012-07-04T12:15:52.907
> 
> 标签：php, mysql, loops

任何人都可以帮忙 - 这让我发疯。

我正在调用一个 mysql 表并希望多次显示结果（或使用 if 语句检查结果）。但在这个循环中（见下文），它只在第一个实例（$i=1）中将表及其行作为数组调用。此代码将构建 20 个名为 Box 的 div，但仅使用表数据填充第一个 div。为什么？

我认为我应该在外部循环中使用 foreach 循环（我已经让它在 wordPress 中与那个 btw 一起工作）但无法弄清楚语法。任何帮助将非常感激。

```
$i=1;
while ($i <= 20)
{
    echo "<div class=\"Box ".$i."\">";
    echo $i;
    echo "<br>";
    while ($row = mysql_fetch_array($result))
    {
    echo $row['name'];
    }
    echo "</div>";
    $i++;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:21:38.937

如果我理解，您正试图在一个循环中多次使用相同的结果资源。

在第一次循环结果资源后，您需要将其倒回到原来的位置才能再次循环。它可以用 重绕`mysql_data_seek($result, 0)`，但更好的策略是在循环之前将整个内容加载到数组中，然后在每个循环中迭代数组：

```
// Load everything into the array `$results` first.
$results = array();
while ($row = mysql_fetch_assoc($result)) {
  $results[] = $row['name'];
}

// Better an incremental for loop than a while with a counter
// for a situation where you know the endpoint values of $i
for ($i = 1; $i <= 20; $i++)
{
    echo "<div class='Box $i'>";
    echo $i;
    echo "<br>";
    // Inside your HTML, use the $results array 
    // rather than the MySQL resource
    foreach ($results as $row)
    {
      echo $row['name'];
    }
    echo "</div>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:21:58.767

也许我不太明白，但你应该试试这个：

```
$i=1;
while ($row = mysql_fetch_array($result) && $i <= 20) {
    echo "<div class=\"Box ".$i."\">";
    echo $i;
    echo "<br>";
    echo $row['name'];
    echo "</div>";
    $i++;
} 
```

因为在您的代码中，您在第一个循环中执行“mysql 循环”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:20:10.350

尝试这样做，

```
$i=1;
while ($row = mysql_fetch_array($result))
{
    echo "<div class=\"Box ".$i."\">";
    echo $i;
    echo "<br>";
    echo $row['name'];
    echo "</div>";
    $i++;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T12:21:38.153

一旦给出 mysql_fetch_array($result)，$result 就不能再次用于获取。所以它不会循环工作。更好地将结果存储在数组中并在需要的地方使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T12:46:32.353

您可以使用 mysql_data_seek 重置为结果指针，如果您想再次遍历它们，请执行以下操作：

```
mysql_data_seek ( $result, 0 ); 
```

# wix - 在 wix 上升级期间抑制 InstallDir UI

> ID：11328917
> 
> 赞同：1
> 
> 时间：2012-07-04T12:15:53.873
> 
> 标签：wix, wix3.5, wix3, wix3.6, wixlib

我想抑制 InstallDir UI 以进行升级方案。我将从注册表中获取以前安装的路径，我只想抑制此 UI。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:48:35.250

您可以使用[RegistrySearch 元素](http://wix.sourceforge.net/manual-wix2/wix_xsd_registrysearch.htm)从注册表中检索路径。如果加载正确，您可以使用搜索属性来调整对话框显示。[这](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/Hide-InstallDirDlg-during-upgrade-td5014310.html)是一个类似的阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T08:54:05.690

```
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="VerifyReadyDlg">Installed OR APPLICATIONROOTDIRECTORY</Publish> 
.... 
.... 
.... 
<Publish Dialog="VerifyReadyDlg" Control="Back" Event="NewDialog" Value="WelcomeDlg" Order="2">Installed OR APPLICATIONROOTDIRECTORY</Publish> 
```

将此代码添加到自定义 UI。

# python - Python 是强类型的吗？

> ID：11328920
> 
> 赞同：298
> 
> 时间：2012-07-04T12:16:01.380
> 
> 标签：python, strong-typing, weak-typing

我遇到过说 Python 是一种强类型语言的链接。

但是，我认为在强类型语言中你不能这样做：

```
bob = 1
bob = "bob" 
```

我认为强类型语言在运行时不接受类型更改。也许我对强/弱类型的定义是错误的（或过于简单化）。

那么，Python 是强类型语言还是弱类型语言？

* * *

## 回答 #1

> 赞同：451
> 
> 时间：2012-07-04T12:19:26.613

Python 是强动态类型的。

*   **强**类型意味着值的类型不会以意想不到的方式改变。只包含数字的字符串不会像在 Perl 中那样神奇地变成数字。每次更改类型都需要显式转换。
*   **动态**类型意味着运行时对象（值）具有类型，而不是变量具有类型的静态类型。

至于你的例子

```
bob = 1
bob = "bob" 
```

这是有效的，因为变量没有类型；它可以命名任何对象。之后`bob=1`，你会发现`type(bob)`返回`int`，但是之后`bob="bob"`，它返回`str`。（请注意，这`type`是一个常规函数，因此它会评估其参数，然后返回值的类型。）

将此与 C 的较旧方言进行对比，后者是弱静态类型的，因此指针和整数几乎可以互换。（现代 ISO C 在许多情况下都需要转换，但我的编译器默认情况下对此仍然宽容。）

我必须补充一点，强类型与弱类型更像是一个连续体，而不是布尔选择。C++ 的类型比 C 强（需要更多的转换），但类型系统可以通过使用指针转换来颠覆。

动态语言（如 Python）中类型系统的强度实际上取决于其原语和库函数如何响应不同类型。例如，`+`被重载，因此它适用于两个数字*或*两个字符串，但不适用于一个字符串和一个数字。这是在实现时做出的设计选择`+`，但从语言的语义来看并不是真正的必要性。事实上，当你重载`+`一个自定义类型时，你可以让它隐式地将任何东西转换为一个数字：

```
def to_number(x):
    """Try to convert function argument to float-type object."""
    try: 
        return float(x) 
    except (TypeError, ValueError): 
        return 0 

class Foo:
    def __init__(self, number): 
        self.number = number

    def __add__(self, other):
        return self.number + to_number(other) 
```

类的实例`Foo`可以添加到其他对象：

```
>>> a = Foo(42)
>>> a + "1"
43.0
>>> a + Foo
42
>>> a + 1
43.0
>>> a + None
42 
```

请注意，即使强类型 Python 完全可以添加类型对象`int`并`float`返回类型对象`float`（例如，`int(42) + float(1)`returns `43.0`）。另一方面，由于类型之间的不匹配，如果尝试以下操作，Haskell 会抱怨`(42 :: Integer) + (1 :: Float)`。这使得 Haskell 成为一种严格类型化的语言，其中类型完全不相交，并且只能通过类型类实现受控形式的重载。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2014-08-10T18:15:36.297

我认为所有现有答案都遗漏了一些重要问题。

* * *

弱类型意味着允许访问底层表示。在 C 中，我可以创建一个指向字符的指针，然后告诉编译器我想将它用作指向整数的指针：

```
char sz[] = "abcdefg";
int *i = (int *)sz; 
```

在具有 32 位整数的 little-endian 平台上，这构成`i`了一个数字数组`0x64636261`和`0x00676665`. 事实上，您甚至可以将指针本身转换为整数（具有适当的大小）：

```
intptr_t i = (intptr_t)&sz; 
```

当然，这意味着我可以覆盖系统中任何地方的内存。*

```
char *spam = (char *)0x12345678
spam[0] = 0; 
```

[* 当然，现代操作系统使用虚拟内存和页面保护，所以我只能覆盖我自己的进程的内存，但 C 本身并没有提供这种保护，任何曾经在 Classic Mac OS 或 Win16 上编写过代码的人都可以告诉你。]

传统的 Lisp 允许类似的黑客行为；在某些平台上，双字浮点数和 cons 单元格是同一类型，您只需将一个传递给期望另一个的函数，它就会“工作”。

今天的大多数语言并不像 C 和 Lisp 那样弱，但其中许多仍然有些漏洞。例如，任何具有未经检查的“向下转换”* 的 OO 语言都是类型泄漏：您实际上是在告诉编译器“我知道我没有给您足够的信息来知道这是安全的，但我很确定它是，”当类型系统的全部意义在于编译器总是有足够的信息来知道什么是安全的。

[* 检查的向下转换不会仅仅因为它将检查移动到运行时而使语言的类型系统变得更弱。如果确实如此，那么子类型多态性（也称为虚拟或完全动态函数调用）将同样违反类型系统，我认为没有人愿意这么说。]

在这个意义上，很少有“脚本”语言是弱的。即使在 Perl 或 Tcl 中，您也不能获取字符串并将其字节解释为整数。* 但值得注意的是，在 CPython 中（对于许多语言的许多其他解释器也是如此），如果您真的坚持不懈，您可用于`ctypes`加载`libpython`、将对象`id`转换为 a`POINTER(Py_Object)`并强制类型系统泄漏。这是否会使类型系统变弱取决于您的用例——如果您尝试实现语言内受限执行沙箱以确保安全，则必须处理这些类型的转义……</p>

[* 您可以使用`struct.unpack`读取字节之类的函数，并根据“C 如何表示这些字节”构建一个新的 int，但这显然不是泄漏的；甚至 Haskell 也允许这样做。]

* * *

同时，隐式转换与弱或泄漏类型系统确实不同。

每种语言，甚至是 Haskell，都具有将整数转换为字符串或浮点数的函数。但是有些语言会自动为你做一些转换——例如，在 C 中，如果你调用一个需要 a 的函数`float`，并且你将它传递给`int`，它会为你转换。这肯定会导致错误，例如意外溢出，但它们与从弱类型系统中获得的错误类型不同。而且C在这里并没有真正变弱。您可以在 Haskell 中添加一个 int 和一个浮点数，甚至可以将一个浮点数连接到一个字符串，您只需要更明确地执行此操作。

对于动态语言，这非常模糊。在 Python 或 Perl 中没有“需要浮点数的函数”之类的东西。但是有一些重载函数用不同的类型做不同的事情，并且有一种强烈的直觉感觉，例如，将一个字符串添加到其他东西是“一个需要字符串的函数”。从这个意义上说，Perl、Tcl 和 JavaScript 似乎做了很多隐式转换（`"a" + 1`给你`"a1"`），而 Python 做的少得多（`"a" + 1`引发异常，但`1.0 + 1`给你`2.0`*）。很难将这种意义转化为正式的术语——为什么不应该有一个`+`接受字符串和 int 的 a，而显然还有其他函数，比如索引，这样做呢？

[* 实际上，在现代 Python 中，这可以用 OO 子类型来解释，因为这`isinstance(2, numbers.Real)`是真的。我认为`2`Perl 或 JavaScript 中的字符串类型的实例没有任何意义……尽管在 Tcl 中，它实际上是，因为*一切*都是字符串的实例。]

* * *

最后，还有另一个完全正交的“强”与“弱”类型的定义，其中“强”意味着强大/灵活/富有表现力。

例如，Haskell 允许您定义数字、字符串、此类型的列表或从字符串到此类型的映射的类型，这是表示可以从 JSON 解码的任何内容的完美方式。没有办法在 Java 中定义这样的类型。但至少 Java 有参数（泛型）类型，因此您可以编写一个函数，它接受一个 T 的 List 并知道元素的类型是 T；其他语言，例如早期的 Java，迫使您使用对象列表并向下转换。但至少 Java 允许您使用自己的方法创建新类型；C 只允许您创建结构。BCPL 甚至没有。依此类推，直到组装，唯一的类型是不同的位长度。

所以，从这个意义上说，Haskell 的类型系统比现代 Java 强，现代 Java 比早期 Java 强，比 C 强，比 BCPL 强。

那么，Python 在哪里适合这个范围呢？这有点棘手。在很多情况下，duck typing 允许你模拟你在 Haskell 中可以做的所有事情，甚至是一些你不能做的事情；当然，错误是在运行时而不是编译时捕获的，但它们仍然会被捕获。但是，在某些情况下，duck 打字是不够的。例如，在 Haskell 中，您可以判断一个空的整数列表是一个整数列表，因此您可以决定对该列表进行归约`+`应该返回 0*；在 Python 中，空列表是一个空列表；没有类型信息可以帮助您决定减少`+`它应该做什么。

[* 事实上，Haskell 不允许你这样做；如果您调用的 reduce 函数在空列表中不采用起始值，则会出现错误。但它的类型系统足够强大，您*可以*完成这项工作，而 Python 的则不然。]

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2017-07-27T19:01:36.480

## TLDR；

Python 类型是**动态**的，因此您可以*将*字符串变量更改为 int（在**静态**语言中您不能）

```
x = 'somestring'
x = 50 
```

Python类型很**强大**，所以你不能合并类型：

```
'foo' + 3 --> TypeError: cannot concatenate 'str' and 'int' objects 
```

在弱类型的 Javascript 中会发生这种情况......

```
 'foo'+3 = 'foo3' 
```

* * *

## 关于类型推断

像 Java 这样的一些语言会强制你显式声明你的对象类型

```
int x = 50; 
```

像[Kotlin](https://kotlinlang.org/)之类的其他人只是`int`从值本身推断它是

```
x = 50 
```

但是因为两种语言都使用*静态*类型，`x`所以不能从`int`. 两种语言都不允许像这样的*动态*变化

```
x = 50
x = 'now a string' 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2012-07-04T12:18:04.053

您将['strongly typed'](https://en.wikipedia.org/wiki/Strongly_typed)与['dynamically typed'](https://en.wikipedia.org/wiki/Dynamically_typed)混淆了。

我无法`1`通过添加 string来更改类型`'12'`，但我可以选择存储在变量中的类型并在程序运行时更改它。

与动态类型相反的是静态类型；*变量类型*的声明在程序的生命周期内不会改变。强类型的反面是弱类型；*值*的类型可以在程序的生命周期内改变。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2012-07-04T12:18:28.343

根据这篇[wiki Python](http://wiki.python.org/moin/Why%20is%20Python%20a%20dynamic%20language%20and%20also%20a%20strongly%20typed%20language)文章 Python 是动态类型和强类型的（也提供了很好的解释）。

也许您正在考虑*[静态类型](http://en.wikipedia.org/wiki/Type_system#Static_typing)*语言，其中类型在程序执行期间无法更改，并且在编译期间进行类型检查以检测可能的错误。

这个 SO 问题可能很有趣：[动态类型语言与静态类型语言](https://stackoverflow.com/questions/125367/dynamic-type-languages-versus-static-type-languages)和这篇关于[类型系统](http://en.wikipedia.org/wiki/Type_system)的维基百科文章提供了更多信息

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-09-13T05:20:17.657

术语“强类型”没有明确的定义。

因此，该术语的使用取决于您与谁交谈。

我不考虑任何语言，其中变量的类型既没有显式声明，也没有静态类型化为强类型。

强类型不仅排除了转换（例如，“自动”从整数转换为字符串）。它排除了赋值（即更改变量的类型）。

如果以下代码编译（解释），则该语言不是强类型的：

富 = 1 富 = "1"

在强类型语言中，程序员可以“依赖”一种类型。

例如，如果程序员看到声明，

UINT64 kZarkCount;

并且他或她知道 20 行之后，kZarkCount 仍然是 UINT64（只要它出现在同一个块中） - 无需检查中间代码。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-07-04T12:34:56.593

已经回答过几次了，但是 Python 是一种强类型语言：

```
>>> x = 3
>>> y = '4'
>>> print(x+y)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

JavaScript 中的以下内容：

```
var x = 3    
var y = '4'
alert(x + y) //Produces "34" 
```

这就是弱类型和强类型之间的区别。弱类型会根据上下文（例如 Perl）自动尝试从一种类型转换为另一种类型。强类型*从不*隐式转换。

您的困惑在于对 Python 如何将值绑定到名称（通常称为变量）的误解。

在 Python 中，名称没有类型，因此您可以执行以下操作：

```
bob = 1
bob = "bob"
bob = "An Ex-Parrot!" 
```

名称可以绑定到任何东西：

```
>>> def spam():
...     print("Spam, spam, spam, spam")
...
>>> spam_on_eggs = spam
>>> spam_on_eggs()
Spam, spam, spam, spam 
```

进一步阅读：

[https://en.wikipedia.org/wiki/Dynamic_dispatch](https://en.wikipedia.org/wiki/Dynamic_dispatch)

以及稍微相关但更高级的：

[http://effbot.org/zone/call-by-object.htm](http://effbot.org/zone/call-by-object.htm)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-07-04T13:15:58.470

Python 变量存储对表示值的目标对象的无类型引用。

任何赋值操作都意味着将无类型引用分配给已分配对象——即对象通过原始引用和新（计数）引用共享。

值类型绑定到目标对象，而不是引用值。（强）类型检查在执行具有值的操作时完成（运行时）。

换句话说，变量（从技术上讲）没有类型——如果想要准确的话，从变量类型的角度来思考是没有意义的。但是引用是自动取消引用的，我们实际上是根据目标对象的类型来考虑的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-08T13:38:19.337

我刚刚发现了一种非常简洁的记忆方法：

> 动态/静态类型表达式；强/弱类型值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-04T13:35:19.137

我想，这个简单的例子你应该解释强类型和动态类型之间的差异：

```
>>> tup = ('1', 1, .1)
>>> for item in tup:
...     type(item)
...
<type 'str'>
<type 'int'>
<type 'float'>
>>> 
```

爪哇：

```
public static void main(String[] args) {
        int i = 1;
        i = "1"; //will be error
        i = '0.1'; // will be error
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-30T21:48:21.687

现有的答案大多同意 Python 是一种强类型语言，因为它不会将值从一种类型隐式转换为另一种类型。这些答案提到了将字符串添加到整数以支持此主张的情况；`"foo" + 3`在 Python 中引发 a `TypeError`，而在[Javascript](https://en.wikipedia.org/wiki/JavaScript)（通常被认为是一种弱类型语言）中，数字`3`被隐式转换为字符串然后连接起来，因此结果是 string `"foo3"`。

但在其他一些情况下，Python*确实*会进行隐式类型转换：

```
# implicit conversion from int to float
1 + 1.0

# implicit conversion from list to bool
if []: pass 
```

相比之下，[F#](https://en.wikipedia.org/wiki/F_Sharp_(programming_language))（通常被认为是一种强类型语言）不允许以下两种情况：

```
 1 + 1.0;;
  ----^^^
error FS0001: The type 'float' does not match the type 'int'

  if [] then 1 else 2;;
  ---^^
error FS0001: This expression was expected to have type bool but here has type 'a list 
```

所以实际上并没有严格的“强类型”和“弱类型”语言的二分法，而是我们可以说 Python 比 Javascript 的强类型更强，但不如 F# 强类型。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-08-02T17:40:55.457

```
class testme(object):
    ''' A test object '''
    def __init__(self):
        self.y = 0

def f(aTestMe1, aTestMe2):
    return aTestMe1.y + aTestMe2.y

c = testme            #get a variable to the class
c.x = 10              #add an attribute x inital value 10
c.y = 4               #change the default attribute value of y to 4

t = testme()          # declare t to be an instance object of testme
r = testme()          # declare r to be an instance object of testme

t.y = 6               # set t.y to a number
r.y = 7               # set r.y to a number

print(f(r,t))         # call function designed to operate on testme objects

r.y = "I am r.y"      # redefine r.y to be a string

print(f(r,t))         #POW!!!!  not good.... 
```

上述情况会在很长一段时间内在大型系统中造成无法维护的代码的噩梦。随心所欲地称呼它，但是“动态”更改变量类型的能力只是一个坏主意……

# c# - 来自 Javascript 的 ASMX Web 服务

> ID：11328923
> 
> 赞同：1
> 
> 时间：2012-07-04T12:16:08.610
> 
> 标签：c#, javascript, web-services, asmx

我创建了一个 Web 服务，其中有一个函数可以计算我的 SQL 数据库中的一些数据。这是我的 WebService.asmx 的代码：

```
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{

    [WebMethod]
    public int SalesNumberMonth(int i)
    {
        int total = 0;
        SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["Sql"].ConnectionString);
        try
        {
            string request = "SELECT * FROM sales_Ventes V INNER JOIN sys_AnneesFiscales A ON V.AnneeFiscale = A.Code INNER JOIN sys_Mois M ON V.Mois = M.Code WHERE M.Code='" + i + "'" + " AND Active = 'true'";
            connection.Open();
            SqlCommand Req = new SqlCommand(request, connection);

            SqlDataReader Reader = Req.ExecuteReader();
            while (Reader.Read())
            {
                total++;
            }
            Reader.Close();
        }
        catch
        {

        }
        connection.Close();
        return total;
    }
} 
```

这里是我的 script.js ：

```
var sin = [], cos = [];
for (var i = 1; i < 13; i += 1) {
    GestionPro.WebService1.SalesNumberMonth(i,  function (e) { sin.push([i, e]); }  ,function (response) { alert(response); }  );
    cos.push([i, 2]);
}
var plot = $.plot($("#mws-test-chart"),
       [{ data: sin, label: "Sin(x)²", color: "#eeeeee" }, { data: cos, label: "Cos(x)", color: "#c5d52b"}], {
           series: {
               lines: { show: true },
               points: { show: true }
           },
           grid: { hoverable: true, clickable: true }
       }); 
```

我的问题在这条线上：

```
GestionPro.WebService1.SalesNumberMonth(i,  function (e) { sin.push([i, e]); }  ,function (response) { alert(response); }  ); 
```

当我交换这两个函数时，警报显示得很好，但是按这个顺序我不能在 sin[] 中添加我的函数的值。我应该错过一些东西，但不知道是什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:41:33.427

您的代码存在很多问题：

*   您正在 for 循环中触发 AJAX 请求。触发将返回整个结果的单个 AJAX 请求会更加优化。发送更少的发送更多数据的请求总是比发送大量小的 AJAX 请求更好
*   您正在`SELECT *`循环使用并依赖客户端代码，而不是使用`COUNT`SQL 聚合函数
*   您没有正确处理任何 IDisposable 资源，例如数据库连接、命令和读取器
*   您正在使用字符串连接来构建 SQL 查询，而不是使用参数化查询
*   您没有考虑 AJAX 的异步特性

提到的问题，让我们从修复它们开始。

让我们首先修复服务器端代码：

```
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{
    [WebMethod]
    public int[] SalesNumbersMonths(int[] months)
    {
        // Could use LINQ instead but since I don't know which version
        // of the framework you are using I am providing the naive approach
        // here. Also the fact that you are using ASMX web services which are
        // a completely obsolete technology today makes me think that you probably
        // are using something pre .NET 3.0
        List<int> result = new List<int>();
        foreach (var month in months)
        {
            result.Add(SalesNumberMonth(month));
        }
        return result.ToArray();
    }

    [WebMethod]
    public int SalesNumberMonth(int i)
    {
        using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Sql"].ConnectionString))
        using (SqlCommand cmd = conn.CreateCommand())
        {
            conn.Open();
            cmd.CommandText = "SELECT COUNT(*) FROM sales_Ventes V INNER JOIN sys_AnneesFiscales A ON V.AnneeFiscale = A.Code INNER JOIN sys_Mois M ON V.Mois = M.Code WHERE M.Code=@Code AND Active = 'true'";  
            cmd.Parameters.AddWithValue("@Code", i);
            return (int)cmd.ExecuteScalar();
        }
    }
} 
```

好的，您现在会注意到我添加的新方法，它允许计算几个月的总数并将它们作为整数数组返回，以避免在无意义的 AJAX 请求中浪费带宽。

现在让我们修复您的客户端代码：

```
var months = [];

for (var i = 1; i < 13; i += 1) {
    months.push(i);
}

GestionPro.WebService1.SalesNumbersMonths(months, function (e) { 
    // and once the web service succeeds in the AJAX request we could build the chart:
    var sin = [],
        cos = [];

    for (var i = 0; i < e.length; i++) {
        cos.push([i, 2]);
        sin.push([i, e[i]]);
    }

    var chart = $('#mws-test-chart'),
    var data = [
        { data: sin, label: 'Sin(x)²', color: '#eeeeee' }, 
        { data: cos, label: 'Cos(x)', color: '#c5d52b' }
    ];

    var series = { 
        series: {
            lines: { show: true },
            points: { show: true }
        }
    };

    var plot = $.plot(
        chart, 
        data, 
        series, 
        grid: { hoverable: true, clickable: true }
    );

    // TODO: do something with the plot

}, function (response) { 
    // that's the error handler
    alert(response); 
}); 
```

# php - Codeigniter 的 is_unique 不适用于多个字段

> ID：11328926
> 
> 赞同：0
> 
> 时间：2012-07-04T12:16:19.910
> 
> 标签：php, codeigniter

我正在制作注册表，我想要字段`nick`并且`e-mail`是唯一的。我在控制器中使用表单验证：

> ```
>  $this->load->library('form_validation');
>     $this->form_validation->set_rules('nick', '<b>Nazwa użytkownika</b>', 'required|is_unique[users.nick]');
>     $this->form_validation->set_rules('email', '<b>Adres e-mail</b>', 'required|is_unique[users.mail]');
>     $this->form_validation->set_rules('password', '<b>Hasło</b>', 'required'); 
> ```

```
 $this->form_validation->set_message('is_unique', '%s jest już w bazie.');

    if ($this->form_validation->run()) {
        $data['submit'] = $this->users_model->CreateUser($this->input->post()); //submits data
        $this->load->view('contribute/emptyPage', $data); //loads view
    } else {
        $data['title'] = 'Załóż konto';
        $this->layout->view('account/create',$data);
    } 
```

当我只填写一个字段时，它会起作用，eq。`nick`或`mail`。当我填写整个表格时，它可以毫无问题地处理。我能做什么？

编辑。

我发现只有当一个或多个字段中只有数字时才会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:28:36.123

您需要创建自己的[自定义验证回调函数](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-23T00:58:43.297

我在[这里创建了一个 is_unique 函数](https://stackoverflow.com/questions/14575165/validation-unique-field-in-codeigniter-with-2-index/46362569#46362569)

您可以通过 2 种方式使用它：

```
//is_unique[table_name.field_to_check.id_field_name.id_field_value] <-- unique 1 field only
//is_unique[table_name.field_to_check.id_field_name != 'id_field_value' and anotherIdName='theValue'] <-- custom where 
```

希望它对你有用

# c++ - 如何在 Qt (windows xp) 中禁用禁用 QScrollbar 上下文菜单

> ID：11328929
> 
> 赞同：1
> 
> 时间：2012-07-04T12:16:28.680
> 
> 标签：c++, qt, qt-creator

我有一个在 Windows XP 机器上运行的 Qt 应用程序，我试图最终禁用右键单击滚动条时弹出的上下文菜单（带有“向下滚动”和“向上翻页”等......）应用。

我尝试了以下方法，但没有成功：

```
ui->scrollArea->setContextMenuPolicy(Qt::NoContextMenu);
ui->scrollAreaWidgetContents->setContextMenuPolicy(Qt::NoContextMenu);            
ui->scrollArea->horizontalScrollBar()->setContextMenuPolicy(Qt::NoContextMenu);

ui->scrollArea->setContextMenuPolicy(Qt::PreventContextMenu);
ui->scrollAreaWidgetContents->setContextMenuPolicy(Qt::PreventContextMenu);       
ui->scrollArea->horizontalScrollBar()->setContextMenuPolicy(Qt::PreventContextMenu); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T15:06:31.530

我从来没有发现为什么它在我的上下文中没有真正起作用（它似乎与嵌套的小部件和对象有关）但我找到了一个类似于大锤方法但对我有用的解决方案：

```
foreach(QObject *widget, qApp->allWidgets())
{
    QScrollBar *scrollBar = dynamic_cast<QScrollBar*>(widget);
    if(scrollBar)
    {
        scrollBar->setContextMenuPolicy(Qt::NoContextMenu);
    }
} 
```

这将在启动时禁用整个应用程序中滚动条（或其他对象，如果已修改）的上下文菜单。

# iphone - openGL ES 2.0 中 ios 的图像处理过滤器

> ID：11328930
> 
> 赞同：2
> 
> 时间：2012-07-04T12:16:28.723
> 
> 标签：iphone, ios, image-processing, opengl-es-2.0

我正在寻找一种 iphone 图像处理过滤器，该过滤器与用于`INSTAGRAM`高效快速和最佳质量的类似。我搜索了类似的并找到了[Instagram 过滤器](https://github.com/diwu/InstaFilters)，但由于缺少许可证，它被意外删除。任何人都可以对Instagram中使用的图像过滤器有最好的想法或来源吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:19:36.897

我建议您查看 Brad Larson 出色的[GPUImage 库](http://github.com/BradLarson/GPUImage)。它包含许多基本和高级的图像处理功能，使您能够创建自定义过滤器。使用提供的功能模仿 Instagram 过滤器的效果应该不难，并且有很多示例可以帮助您入门。

GPUImage 使用 OpenGL ES 2.0 进行所有处理，因此它应该非常快。根据自述文件，使用棕褐色滤镜从相机上传一帧并显示它只需要 2.5 毫秒，而使用 Core Image 则需要 149 毫秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T12:28:57.593

您可以在此处找到 ios 中图像过滤器的示例示例 在以下位置查找这些项目：

[https://github.com/esilverberg/ios-image-filters](https://github.com/esilverberg/ios-image-filters)

[http://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html)

[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

[https://github.com/OmidH/Filtrr](https://github.com/OmidH/Filtrr)

[https://github.com/fguilleme/Filter](https://github.com/fguilleme/Filter)

[https://github.com/xissburg/XBImageFilters](https://github.com/xissburg/XBImageFilters)

# html - 空白：nowrap 在 IE 9 中不起作用

> ID：11328931
> 
> 赞同：0
> 
> 时间：2012-07-04T12:16:29.400
> 
> 标签：html, css

我有一个空白设置为 nowrap 的表格，并且使用固定的表格布局限制了列宽。这正确地隐藏了 Firefox 中的长行，但在 IE9 中，这些行是换行的。

测试用例：

```
<table border="1" width=200 style="white-space: nowrap; table-layout: fixed;">
    <tr>
        <td style="overflow: hidden;" width=150>Word with some spaces that isnt working in IE</td>
        <td width=50>100/50</td>
    </tr>
    <tr>
        <td style="overflow: hidden;" width=150>LoooooooooOOOOOOOOOoooooooooooooooooongword</td>
        <td width=50>550/50</td>
    </tr>
        <tr>
        <td style="overflow: hidden;" width=150>AnotherLoooooooooooonnnnnnnnnnnnnnnnGWord</td>
        <td width=50>660/50</td>
    </tr>
</table> 
```

火狐： ![在此处输入图像描述](../Images/0a7f8f0ad005387bc5b2a87efa147d68.png)

即 9： ![在此处输入图像描述](../Images/d0ba0579a7acbfa83b91daafe84fe1da.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T12:30:45.003

使用它在我的 IE9 中工作的严格**文档**类型，我得到了与 firefox 相同的结果。我已经用代码测试过

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
    <head>
    </head>
    <body>
    <form>
    <table border="1" width=200 style="white-space: nowrap; table-layout: fixed;">
        <tr>
            <td style="overflow: hidden;" width=150>Word with some spaces that isnt working in IE</td>
            <td width=50>100/50</td>
        </tr>
        <tr>
            <td style="overflow: hidden;" width=150>LoooooooooOOOOOOOOOoooooooooooooooooongword</td>
            <td width=50>550/50</td>
        </tr>
            <tr>
            <td style="overflow: hidden;" width=150>AnotherLoooooooooooonnnnnnnnnnnnnnnnGWord</td>
            <td width=50>660/50</td>
        </tr>
    </table>
    </form>
    </body>
    </html> 
```

# r - R 语言 NaN + NA 行为

> ID：11328938
> 
> 赞同：6
> 
> 时间：2012-07-04T12:16:44.760
> 
> 标签：r, nan, na

我对 R 中的算术行为有疑问。请注意以下代码

```
> NaN + NA
[1] NaN
>
>
> NaN + as.integer(NA)
> NA 
```

所以，我很困惑这两个加法给出了不同的结果。有人知道这是真的想要的行为还是只是某种错误？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T12:34:42.767

来自`?NaN`：

> 涉及的计算`NaN`将返回`NaN`或者可能返回`NA`：不能保证这两者中的哪一个，并且可能取决于 R 平台（因为编译器可能会重新排序计算）。

# python - 检查列表项是否包含来自另一个列表的子字符串

> ID：11328940
> 
> 赞同：26
> 
> 时间：2012-07-04T12:16:52.610
> 
> 标签：python, list

我有一个清单：

```
my_list = ['abc-123', 'def-456', 'ghi-789', 'abc-456', 'def-111', 'qwe-111']

bad = ['abc', 'def'] 
```

并且想要搜索包含字符串“abc”和“def”（以及其他错误）的项目。我怎样才能做到这一点？

[这里](https://stackoverflow.com/questions/4843158/check-in-python-if-a-list-item-contains-a-string)几乎相同的问题。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-04T12:52:29.277

如果您只是想要一个测试，请将目标列表加入一个字符串并测试每个元素，`bad`如下所示：

```
>>> my_list = ['abc-123', 'def-456', 'ghi-789', 'abc-456', 'def-111', 'qwe-111']
>>> bad = ['abc', 'def']
>>> [e for e in bad if e in '\n'.join(my_list)]
['abc', 'def'] 
```

根据您的问题，您可以通过以下方式将每个元素作为子字符串与另一个元素的每个元素进行测试：

```
>>> [i for e in bad for i in my_list if e in i]
['abc-123', 'abc-456', 'def-456', 'def-111'] 
```

它很快（与其他方法之一相比）：

```
>>> def f1():
...    [item for item in my_list if any(x in item for x in bad)]
... 
>>> def f2():
...    [i for e in bad for i in my_list if e in i]
... 
>>> timeit.Timer(f1).timeit()
5.062238931655884
>>> timeit.Timer(f2).timeit()
1.35371994972229 
```

根据您的评论，您可以通过以下方式获取不匹配的元素：

```
>>> set(my_list)-{i for e in bad for i in my_list if e in i}
{'ghi-789', 'qwe-111'} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-04T12:44:07.573

```
In [4]: filter(lambda item: any(x in item for x in bad), my_list)
Out[4]: ['abc-123', 'def-456', 'abc-456', 'def-111'] 
```

或者

```
In [13]: [item for item in my_list if any(x in item for x in bad)]
Out[13]: ['abc-123', 'def-456', 'abc-456', 'def-111'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T12:38:32.863

```
some_list = ['abc-123', 'def-456', 'ghi-789', 'abc-456']
bad = ['abc', 'def']
for s in some_list:
    for item in bad:
       if item in s:
          print 'Found ', s 
```

这很简单，工作正常且快速（仅当您的列表不是很大时。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-17T13:32:47.563

```
some_list=['abc-123', 'def-456', 'ghi-789', 'abc-456']
bad = ['abc', 'def']
for i in range (0,len(bad)):
    if bad[i] in some_list:
        print('Found a bad entry:', bad[i]) 
```

# javascript - 在 for 之后的 if 语句中使用对象项

> ID：11328941
> 
> 赞同：0
> 
> 时间：2012-07-04T12:16:59.677
> 
> 标签：javascript, object

我正在创建一个这样的对象：

```
 markers[name] = {};
  markers[name].id = id;
  markers[name].lat = lati;
  markers[name].lng = longi;
  markers[name].state = state;
  markers[name].position = posi;
  markers[name].selected = false; 
```

然后我有一个新函数，我想在其中循环标记对象并更改标记图像.selected 已设置为true。

这是我尝试过的：

```
function setMarkerImage() { 

        for (var key in markers) { 
           console.log("test 1: " + key + key.selected);
            if (key.selected === true)
          {
          console.log("test 2");        
             var newImage = new google.maps.MarkerImage('img/presence/' + state + '_sel.png');
             var marker = $("#dispatcher").gmap3({action: 'get', name:'marker', tag: key})
               if (marker){
               marker.setIcon(newImage);
               }
          }
        } 
} 
```

问题是我得到

```
test 1: Vinceundefined 
```

在控制台中，我认为我不能像这样使用 key.selected？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T12:20:16.640

`key`不是对象，所以它没有`selected`键。尝试使用

```
console.log("test 1: " + key + markers[key]["selected"]); 
```

# php - 向一维数组添加维度

> ID：11328944
> 
> 赞同：0
> 
> 时间：2012-07-04T12:17:07.237
> 
> 标签：php, arrays

我有一个名为 $bigArrayWithLinks 的数组，它在每个元素中存储一个带有 url 的字符串。这是来自 var_dump 的示例：

```
array
  0 => string 'http://en.wikipedia.org/wiki/England' (length=36)
  1 => string 'http://www.bbc.co.uk/news/england/' (length=34)
  2 => string 'http://www.thefa.com/' (length=21)
  3 => string 'http://www.thefa.com/England/' (length=29) 
```

我想要做的是遍历数组，为每个元素添加一个整数值'0'，这样它就变成了

```
array
  0 => string 'http://en.wikipedia.org/wiki/England' => int '0'
  1 => string 'http://www.bbc.co.uk/news/england/'  => int '0'
  2 => string 'http://www.thefa.com/'  => int '0'
  3 => string 'http://www.thefa.com/England/'  => int '0' 
```

我试过：

```
for($x=0; $x<sizeof($arr); $x++)
{
    $score = $arr[$x]['score'];
    $score = '0';
} 
```

我对 php 很陌生，所以我对它不起作用并不感到惊讶。有人可以帮帮我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:24:48.690

```
foreach($bigArrayWithLinks as $key => $url) {
  $bigArrayWithLinks[$key] = array('url' => $url, 'x' => 0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:28:03.130

您对 PHP 数组感到困惑。

数组是一个索引（或使用关联数组时的哈希），它具有 1(!) 值。该值可以是另一个数组。

你的第二个例子（你想要的）只是显示：

```
0 => string 'http://en.wikipedia.org/wiki/England' => int '0' 
```

那没有意义。

我希望你真正想要的是这样的结构：

```
$mySiteScore = array(
 array('url'=>'http://en.wikipedia.org/wiki/England', 'score' =>0),
 array('url'=>'http://www.bbc.co.uk/news/england/', 'score' =>0),
 array('url'=>'http://www.thefa.com/', 'score' =>0)
); 
```

这样你就创建了一个关联数组的数组。关联数组可以使用描述性键，例如“url”或“score”。现在，如果要添加所有分数：

```
$totalScore = 0;
foreach ($mySiteScore as $oneSiteScore){
  $totalScore = $totalScore  + $oneSiteScore['score'];
} 
```

或者：创建两个单独的数组：一个带有 URL，另一个带有分数。但是您必须确保索引匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T12:21:00.607

只需制作另一个一维零数组，索引将是相同的。

在几乎所有编程语言中，如果不重新分配和复制到新容器，“新维度”是不可能的。

# javascript - 通过选择框选项更改 Iframe SRC

> ID：11328948
> 
> 赞同：1
> 
> 时间：2012-07-04T12:17:14.697
> 
> 标签：javascript, jquery, html, iframe

我想知道，我们如何通过选择框更改 IFRAME 的 SRC url。

我们有以下代码。

**代码**

```
<select name="sign" size="1">
<option value="-1" selected="selected">Select Signature</option><option value="4ff42886$1$YT2.BF2.$241VJYgpUpWPD7p1Wjq5E1">Link Building India</option> 
</select> 
```

**框架代码**

```
<iframe name="iframe2" src="signature.php?sign=" align="top" height="100%" width="95%" hspace="10" vspace="10" align="middle"></iframe> 
```

我只想像这样根据 Select 框的值更新 Iframe2 的 src

**IFRAME 的最终代码** 将根据选择框进行更改。

```
<iframe name="iframe2" src="signature.php?sign=4ff42886$1$YT2.BF2.$241VJYgpUpWPD7p1Wjq5E1" align="top" height="100%" width="95%" hspace="10" vspace="10" align="middle"></iframe> 
```

谢谢

枪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:25:59.570

```
$("select").change(function(){ // put a ID to select tag
  var url = "signature.php?sign="+$(this).val();

  $("iframe").attr("src",url); 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T12:24:20.170

你可以有一个模板并使用它来重新渲染你的`iframe`每次？您可以这样做，因为您知道`iframe`居住在的父母，对吗？

就像是..

```
var iframeHTMLTemplate = '<iframe ... name="blah" src="@src" /> 
```

在附加到 DOM 的同时..

```
$("select").change(function(){ // put a ID to select tag
  var url = "signature.php?sign="+$(this).val();

  var myIframe = $(iframeHTMLTemplate.replace('@src', url));

  container.append(myIframe);

}); 
```

# java - 在 Java Play 中进行测试的 HTTP 上下文！2.0.2

> ID：11328951
> 
> 赞同：4
> 
> 时间：2012-07-04T12:17:18.400
> 
> 标签：java, http, testing, playframework, playframework-2.0

我们正在尝试为我们的视图编写测试，但其中一些需要会话变量才能正确呈现。这是标准测试的样子：

```
@Test
public void indexTest() {
    running(fakeApplication(), new Runnable() {
        public void run() {
            Content html = views.html.index.render(loginForm);
            assertThat(contentType(html)).isEqualTo("text/html");
            assertThat(contentAsString(html)).contains("log in");
        }
    });
} 
```

loginForm 是我们在测试类中声明的模拟表单。

但是，当我们尝试运行此测试时，我们会收到以下错误：

'这里没有可用的 HTTP 上下文'

我们尝试使用 testServer 并尝试从对该服务器的请求中获取 http 上下文，但无济于事。

谢谢 ：-）

**编辑**@nico_ekito

这是围绕我的 loginForm 的代码：

```
Form<Login> loginForm = Controller.form(Login.class); 
```

但是，我认为问题在于被调用的控制器，因为视图不使用任何会话属性。但是，authenticate() 方法（在控制器中，我相信当表单提交到视图时正在呈现）使用会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:34:04.813

如果您发布整个视图会很有帮助，因为您可能正在使用身份验证插件/i18n 插件或类似的东西，而这些插件又使用会话属性。在运行测试之前，您还可以尝试使用 Mocktio 或类似工具模拟上下文。

```
Context.current.set(
        new Context(mock(Request.class), 
                    new HashMap<String, String>(),  
                    new HashMap<String, String>())); 
```

不过，我建议再检查一次您的视图，检查会话属性。

# javascript - WordPress - 图像和 javascript 无法正常工作

> ID：11328955
> 
> 赞同：0
> 
> 时间：2012-07-04T12:17:25.743
> 
> 标签：javascript, html, image, wordpress, wordpress-theming

我对 WordPress 很陌生。我已将我创建的 HTML 网站 ( [www.reactmarketing.co.uk/servowatch](http://www.reactmarketing.co.uk/servowatch) ) 转换为 WordPress。在我的仪表板上，它说主题已安装，但没有显示任何图像并且 JavaScript 无法正常工作。

我的文件夹布局是：`wp-content/themese/servowatch`
servowatch 文件夹内是：

```
footer.php
header.php
images (dir)
index.php
js (dir)
sidebar.php
style.css 
```

我的<head>里面是这样的。（从我找到的教程中复制）

```
<head>
<meta charset="<?php bloginfo( 'charset' ); ?>" />
<title><?php
    /*
     * Print the <title> tag based on what is being viewed.
     */
    global $page, $paged;

    wp_title( '|', true, 'right' );

    // Add the blog name.
    bloginfo( 'name' );

    // Add the blog description for the home/front page.
    $site_description = get_bloginfo( 'description', 'display' );
    if ( $site_description && ( is_home() || is_front_page() ) )
        echo " | $site_description";

    // Add a page number if necessary:
    if ( $paged >= 2 || $page >= 2 )
        echo ' | ' . sprintf( __( 'Page %s', 'twentyten' ), max( $paged, $page ) );

    ?></title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery.main.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />
<?php
    /* We add some JavaScript to pages with the comment form
     * to support sites with threaded comments (when in use).
     */
    if ( is_singular() && get_option( 'thread_comments' ) )
        wp_enqueue_script( 'comment-reply' );

    /* Always have wp_head() just before the closing </head>
     * tag of your theme, or you will break many plugins, which
     * generally use this hook to add elements to <head> such
     * as styles, scripts, and meta tags.
     */
    wp_head();
?>
</head> 
```

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:22:01.980

这是路径问题:) 从`src="js/...`to更改`src="<?php bloginfo('template_directory'); ?>/js/...`它会起作用。在 CSS 中，确保将图像指向如下：`url('images/image.jpg');`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T13:38:32.830

将模板目录路径添加到您的 java 脚本 src 或图像 src

```
<?php bloginfo('template_directory'); ?>/

<script type="text/javascript" src="`<?php bloginfo('template_directory'); ?>/`js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="`<?php bloginfo('template_directory'); ?>/`js/jquery.main.js"></script> 
```

# python - 将多个绘图保存在一个 PDF 文件中

> ID：11328958
> 
> 赞同：116
> 
> 时间：2012-07-04T12:17:35.307
> 
> 标签：python, matplotlib

### 绘图模块

```
def plotGraph(X,Y):
    fignum = random.randint(0,sys.maxint)
    plt.figure(fignum)
    ### Plotting arrangements ###
    return fignum 
```

### 主模块

```
import matplotlib.pyplot as plt
### tempDLStats, tempDLlabels are the argument
plot1 = plotGraph(tempDLstats, tempDLlabels)
plot2 = plotGraph(tempDLstats_1, tempDLlabels_1)
plot3 = plotGraph(tempDLstats_2, tempDLlabels_2)
plt.show() 
```

我想将所有图形 plot1、plot2、plot3 保存到一个 PDF 文件中。有没有办法实现它？我不能`plotGraph`在主模块中包含该功能。

有一个名为的函数`pyplot.savefig`，但它似乎只适用于单个图形。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2016-08-11T12:08:37.023

如果有人最终从谷歌来到这里，希望将单个数字转换为 .pdf（这就是我想要的）：

```
import matplotlib.pyplot as plt

f = plt.figure()
plt.plot(range(10), range(10), "o")
plt.show()

f.savefig("foo.pdf", bbox_inches='tight') 
```

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2012-07-04T12:30:04.680

对于单个 pdf 文件中的多个绘图，您可以使用[PdfPages](http://matplotlib.sourceforge.net/api/backend_pdf_api.html#matplotlib.backends.backend_pdf.PdfPages)

在`plotGraph`函数中，您应该返回图形，然后调用`savefig`图形对象。

------ 绘图模块 ------

```
def plotGraph(X,Y):
      fig = plt.figure()
      ### Plotting arrangements ###
      return fig 
```

------ 绘图模块 ------

----- 主模块 ----

```
from matplotlib.backends.backend_pdf import PdfPages

plot1 = plotGraph(tempDLstats, tempDLlabels)
plot2 = plotGraph(tempDLstats_1, tempDLlabels_1)
plot3 = plotGraph(tempDLstats_2, tempDLlabels_2)

pp = PdfPages('foo.pdf')
pp.savefig(plot1)
pp.savefig(plot2)
pp.savefig(plot3)
pp.close() 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-06-30T08:37:15.247

```
import datetime
import numpy as np
from matplotlib.backends.backend_pdf import PdfPages
import matplotlib.pyplot as plt

# Create the PdfPages object to which we will save the pages:
# The with statement makes sure that the PdfPages object is closed properly at
# the end of the block, even if an Exception occurs.
with PdfPages('multipage_pdf.pdf') as pdf:
    plt.figure(figsize=(3, 3))
    plt.plot(range(7), [3, 1, 4, 1, 5, 9, 2], 'r-o')
    plt.title('Page One')
    pdf.savefig()  # saves the current figure into a pdf page
    plt.close()

    plt.rc('text', usetex=True)
    plt.figure(figsize=(8, 6))
    x = np.arange(0, 5, 0.1)
    plt.plot(x, np.sin(x), 'b-')
    plt.title('Page Two')
    pdf.savefig()
    plt.close()

    plt.rc('text', usetex=False)
    fig = plt.figure(figsize=(4, 5))
    plt.plot(x, x*x, 'ko')
    plt.title('Page Three')
    pdf.savefig(fig)  # or you can pass a Figure object to pdf.savefig
    plt.close()

    # We can also set the file's metadata via the PdfPages object:
    d = pdf.infodict()
    d['Title'] = 'Multipage PDF Example'
    d['Author'] = u'Jouni K. Sepp\xe4nen'
    d['Subject'] = 'How to create a multipage pdf file and set its metadata'
    d['Keywords'] = 'PdfPages multipage keywords author title subject'
    d['CreationDate'] = datetime.datetime(2009, 11, 13)
    d['ModDate'] = datetime.datetime.today() 
```

* * *

## 回答 #4

> 赞同：-33
> 
> 时间：2012-07-04T12:29:22.930

没关系有办法做到这一点。

```
def plotGraph(X,Y):
     fignum = random.randint(0,sys.maxint)
     fig = plt.figure(fignum)
     ### Plotting arrangements ###
     return fig 
```

------ 绘图模块 ------

----- 主模块 ----

```
 import matplotlib.pyplot as plt
 ### tempDLStats, tempDLlabels are the argument
 plot1 = plotGraph(tempDLstats, tempDLlabels)
 plot2 = plotGraph(tempDLstats_1, tempDLlabels_1)
 plot3 = plotGraph(tempDLstats_2, tempDLlabels_2)
 plt.show()
 plot1.savefig('plot1.png')
 plot2.savefig('plot2.png')
 plot3.savefig('plot3.png') 
```

----- 主模块 -----

# android - 如何将数据从 Android 应用程序打印到 WIFI 打印机？

> ID：11328963
> 
> 赞同：4
> 
> 时间：2012-07-04T12:18:12.310
> 
> 标签：android, printing, android-wifi

我正在 Android 2.1 中开发购物车应用程序。我想在用户提交订单时打印订单详情（客户详情、购物车详情、订单总额）。我想使用一些 WIFI 打印机来打印数据。请帮我举出合适的例子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:25:32.217

我假设您想在收据大小的纸张上打印。如果是这样，Star Micronics 有一个 Android SDK，支持 Wifi 连接以及 USB 和蓝牙。在这里下载： http: [//starmicronics.com/support/sdkdocumentation.aspx](http://starmicronics.com/support/sdkdocumentation.aspx)

如果您正在寻找常规尺寸的打印机，请查看 Google 云打印：[https ://developers.google.com/cloud-print/?hl=en](https://developers.google.com/cloud-print/?hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T10:32:11.017

从 ip 地址和端口号创建一个 Socket 连接。

```
 String ip = "your printer ip address";
 int port = port number; 

private class printTCP extends AsyncTask<String, Void, String> {

            @Override
            protected String doInBackground(String... params) {

                if (!ip.equals("")) {
                    if ((pref.getString(Const.PORT_CASH) != null) && (!pref.getString(Const.PORT_CASH).equals(""))) {
                        port = Integer.parseInt(pref.getString(Const.PORT_CASH));
                        try {
                            client = new Socket(ip, port);// ip address and port number of ur hardware device
                            String text = "Test Print";
                            byte[] bytes = text.getBytes(); //create a byte array 

                            outputStream = client.getOutputStream();

                            outputStream.write(bytes, 0, bytes.length); //write file to the output stream byte by byte
                            outputStream.flush();
                            outputStream.close();
                            client.close();

                        } catch (UnknownHostException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }

                return null;
            }

            @Override
            protected void onPostExecute(String result) {

            }
        } 
```

# c# - 如何在silverlight中检测/禁用列表框垂直滚动条上的MouseLeftButtonDown事件？

> ID：11328965
> 
> 赞同：0
> 
> 时间：2012-07-04T12:18:26.103
> 
> 标签：c#, silverlight, listbox, scrollbar

我已将`MouseLeftButtonDown`事件附加到 silverlight 列表框，在此事件中我做了一些事情。但是当我点击垂直滚动条时，这个事件也会被触发。当单击滚动条时，我不想执行该事件处理程序中的代码。ListBox 是否有任何属性使我们能够做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:22:46.257

但是无论我们在列表框中单击什么位置，此条件始终返回 true，但是如果您单击滚动条，它将返回 false

您可以使用以下代码检查发件人的类型

```
if (sender.GetType() == typeof(System.Windows.Controls.ListBox)) 
```

如果它是列表框，那么请不要执行您的逻辑。

我的 Xaml 代码是

```
 <ListBox Name="lstbx" MouseLeftButtonDown="ListBox_MouseLeftButtonDown" ScrollViewer.VerticalScrollBarVisibility="Visible"></ListBox> 
```

我的 Xaml.cs 代码是

```
 public void ListBox_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {

    } 
```

# javascript - 如何使svg可滚动

> ID：11328969
> 
> 赞同：0
> 
> 时间：2012-07-04T12:18:34.177
> 
> 标签：javascript, jquery, svg

大家好，我正在研究 javascript jquery 和 svg。我想问一个问题，是否可以使我的 svg:g 元素可滚动。就像我有一个包含 svg 元素的 div 并且那个 svg 实习生包含许多 svg:g 元素一样，我想让我的一个 g 可滚动。我已经阅读了 [scroll.js](http://www.carto.net/svg/gui/scrollbar/)但我不能使用它所以在 jqquery 或 javascript 中是否有任何其他库在 svg 中提供滚动支持

或任何其他方法，例如在 svg 内进行潜水等

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T12:27:10.133

试试这个： http: [//polymaps.org/](http://polymaps.org/)

或者这个：[http ://wayfarerweb.com/jquery/plugins/mapbox/](http://wayfarerweb.com/jquery/plugins/mapbox/)

# jquery - 在 Liferay 6 中使用 Jquery 代码

> ID：11328970
> 
> 赞同：5
> 
> 时间：2012-07-04T12:18:35.383
> 
> 标签：jquery, liferay, liferay-6

我将 Liferay 6 用于应用程序。我想使用 Jquery 作为 User Interface Part 而不是默认的 Alloy。为此，我通过以这种方式编辑 liferay-portlet.xml 将 JQuery 与 Liferay 集成

```
<portlet>
        <portlet-name>First</portlet-name>
        <icon>/icon.png</icon>
        <instanceable>true</instanceable>
        <header-portlet-css>/css/main.css</header-portlet-css>
        <header-portlet-javascript>https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js</header-portlet-javascript>
                                   <header-portlet-javascript>https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.15/jquery-ui.min.js</header-portlet-javascript>
        <footer-portlet-javascript>/js/main.js</footer-portlet-javascript>
        <css-class-wrapper>First-portlet</css-class-wrapper>
    </portlet> 
```

**这是我的 view.jsp**

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

This is the <b>Sai Nath</b> portlet. 
```

现在请告诉我如何将下面的 Jquery Hello World Alert 放入 view.jsp

**这是我的 Jquery Hello World 警报程序**

```
<html>
<head>
<title>jQuery Hello World Alert box</title>

<script type="text/javascript" src="jquery-1.4.2.js"></script>

</head>
 <script type="text/javascript">
$(document).ready(function(){
$("#cl").click(function(){
alert("HELLO WORLD!");
});
});
</script>
<body>
<font color="red">CLICK BELOW BUTTON TO SEE ALERT BOX</font>
<br>
<br>
<button id="cl">Click Me</button>
</body>
</html> 
```

请让我知道，谢谢阅读。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T17:13:57.153

首先：您的 portlet 的 jsp 永远不应包含`<html>`,`<head>`或`<body>`. 这些部分是门户的业务。

此外，您在页面中再次包含 jquery，即使您已要求 Liferay 将其包含在 head 部分中（如您声明的那样）。

如果你忽略它，它就像你上面写的一样工作——我已经测试过了。这是我的jsp：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<portlet:defineObjects />

<script type="text/javascript">
  $(document).ready(function(){
    $("#cl").click(function(){
      alert("HELLO WORLD!");
    });
  });
</script>

<font color="red">CLICK BELOW BUTTON TO SEE ALERT BOX</font>
<br>
<br>
<button id="cl">Click Me</button> 
```

一个完全不同的选项使用 AlloyUI（或 YUI）将[jQuery](http://yuilibrary.com/gallery/show/yquery)作为 AlloyUI 模块动态加载的能力。不需要在 liferay-portal.xml 中声明。您甚至可以在一页中加载不同版本的 jquery。jsp 看起来像这样：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>

<portlet:defineObjects />

AUI/jQuery
<script>
AUI().use('gallery-yquery', function(A) {
  var jq = A.YQuery();
  jq.version = '1.6.2';
  jq.use( function() {
    alert( 'jquery ' + $.fn.jquery + ' loaded' ); // Will show that 1.6.2 loaded successfully
    $(document).ready(function(){
      $("#cl").click(function(){
        alert("HELLO WORLD!");
      });
    }); 
  });
});
</script> 
```

# c# - 表现为类对象的整数常量

> ID：11328971
> 
> 赞同：0
> 
> 时间：2012-07-04T12:18:39.903
> 
> 标签：c#

以下代码中的整数 4 如何作为类\结构？

```
class main
{
    public void Main()
    {
        Console.WriteLine(4.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T12:21:08.720

### - - 更新 - -

实际上，我认为@Me.Name 可能是对的。`System.Int32`implements ，`ToString`所以可以直接调用。在这种情况下不需要拳击。

如果我将 a 传递`System.Int32`给需要`object`参数的方法，那么它将被装箱。

### --- 旧答案 ---

它是即时[装箱的。](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)

相当来自 MSDN：*“装箱是将值类型转换为类型对象或此值类型实现的任何接口类型的过程。”*

# php - 在 php soap 代理类中设置元素值

> ID：11328978
> 
> 赞同：0
> 
> 时间：2012-07-04T12:19:16.457
> 
> 标签：php, soap, soap-client

我在使用 php5 在我的肥皂请求中设置元素值时遇到问题。
我正在使用 php 的原生 SoapClient。

我已经使用类映射将请求对象从 web 服务映射到代理类。
请求对象应该像这样传输到 web 服务：

```
<soapElement attributename="attribValue">elemValue</soapElement> 
```

我的代理类看起来像这样：

```
class someRequest {

    public $attributename;
    public $value; //wild guess

} 
```

我初始化类并像这样设置变量：

```
$someReq = new someRequest();
$someReq->attributename = 'attribValue';
$someReq->value = 'elemValue'; 
```

当我用我的请求调用网络服务时：

```
$client->someOperation($someReq); 
```

我的请求将如下所示：

```
<soapElement attributename="attribValue"/> 
```

如您所见，soapElement 值为空。
如何使用代理类设置soapElement 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:10:05.563

如果其他人对此感到疑惑，我现在找到了答案：

代表元素值的变量名需要命名为$_。

以下代码将起作用：

```
class someRequest {

    public $attributename;
    public $_; 

} 
```

和

```
$someReq = new someRequest();
$someReq->attributename = 'attribValue';
$someReq->_ = 'elemValue'; 
```

然后请求将如下所示：

```
<soapElement attributename="attribValue">elemValue</soapElement> 
```

# linux - 查找名称包含字符串的所有文件

> ID：11328988
> 
> 赞同：234
> 
> 时间：2012-07-04T12:19:37.173
> 
> 标签：linux, unix, command-line, locate

我一直在寻找一个命令，它将从当前目录返回文件名中包含一个字符串的文件。我已经看到`locate`和`find`命令可以找到以 something 开头`first_word*`或以 something 结尾的文件`*.jpg`。

如何返回文件名中包含字符串的文件列表？

例如，如果`2012-06-04-touch-multiple-files-in-linux.markdown`是当前目录中的文件。

我怎样才能返回这个文件和其他包含字符串的文件`touch`？使用命令，例如`find '/touch/'`

* * *

## 回答 #1

> 赞同：387
> 
> 时间：2012-07-04T12:25:12.053

使用`find`：

`find . -maxdepth 1 -name "*string*" -print`

它将在当前目录中找到所有`maxdepth 1`包含“字符串”的文件（如果您希望它递归删除）并将其打印在屏幕上。

如果你想避免包含':'的文件，你可以输入：

`find . -maxdepth 1 -name "*string*" ! -name "*:*" -print`

如果您想使用`grep`（但我认为就您不想检查文件内容而言没有必要），您可以使用：

`ls | grep touch`

但是，我再说一遍，`find`对于您的任务来说，这是一个更好、更清洁的解决方案。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-04T12:20:50.883

使用 grep 如下：

```
grep -R "touch" . 
```

`-R`意味着递归。如果您不想进入子目录，请跳过它。

`-i`意思是“忽略大小写”。您可能会发现这也值得一试。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-15T14:25:37.130

该`-maxdepth`选项应该在`-name`选项之前，如下所示。

```
find . -maxdepth 1 -name "string" -print 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-10T14:17:40.297

```
find $HOME -name "hello.c" -print 
```

这将在整个`$HOME`（即`/home/username/`）系统中搜索任何名为“hello.c”的文件并显示它们的路径名：

```
/Users/user/Downloads/hello.c
/Users/user/hello.c 
```

但是，它不会匹配`HELLO.C`或`HellO.C`。要匹配不区分大小写，请`-iname`按如下方式传递选项：

```
find $HOME -iname "hello.c" -print 
```

示例输出：

```
/Users/user/Downloads/hello.c
/Users/user/Downloads/Y/Hello.C
/Users/user/Downloads/Z/HELLO.c
/Users/user/hello.c 
```

传递`-type f`仅搜索文件的选项：

```
find /dir/to/search -type f -iname "fooBar.conf.sample" -print
find $HOME -type f -iname "fooBar.conf.sample" -print 
```

`-iname`适用于 GNU 或 BSD（包括 OS X）版本的 find 命令。如果您的 find 命令版本不支持`-iname`，请使用命令尝试以下语法`grep`：

```
find $HOME | grep -i "hello.c"
find $HOME -name "*" -print | grep -i "hello.c" 
```

或尝试

```
find $HOME -name '[hH][eE][lL][lL][oO].[cC]' -print 
```

示例输出：

```
/Users/user/Downloads/Z/HELLO.C
/Users/user/Downloads/Z/HEllO.c
/Users/user/Downloads/hello.c
/Users/user/hello.c 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T06:16:44.347

如果字符串在名称的开头，您可以这样做

```
$ compgen -f .bash
.bashrc
.bash_profile
.bash_prompt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-03T12:32:26.937

已经提供的许多解决方案的替代方案是使用 glob `**`。当您使用`bash`选项`globstar`( `shopt -s globstar`) 或使用 时`zsh`，您可以只使用 glob `**`。

```
**/bar 
```

递归目录搜索命名的文件`bar`（可能包括`bar`当前目录中的文件）。请注意，这不能与同一路径段内的其他形式的通配符结合使用；在这种情况下，`*`操作员将恢复其通常的效果。

`zsh`请注意，这里和之间存在细微差别`bash`。虽然`bash`将遍历目录的软链接，`zsh`但不会。为此，您必须`***/`在`zsh`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-04-10T17:23:33.933

```
find / -exec grep -lR "{test-string}" {} \; 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2017-09-18T08:48:46.973

```
grep -R "somestring" | cut -d ":" -f 1 
```

# windows-phone-7 - 未安装 Windows Phone 开发人员工具 2011 年 1 月更新

> ID：11328993
> 
> 赞同：0
> 
> 时间：2012-07-04T12:19:47.537
> 
> 标签：windows-phone-7

我是 windows phone 开发的新手，我正在努力安装与 windows phone 开发工具相关的所有东西。我的机器上已经安装了 MS Visual Studio 2010 Ultimate - ENU with SP1（使用 Windows 7 Enterprise + Windows 7 SP1）。我安装了 Windows Phone SDK 7.1 (http://www.microsoft.com/en-us/download/details.aspx?id=27570)，然后成功安装了 Windows [Phone Developer Tools RTW](http://www.microsoft.com/en-us/download/details.aspx?id=13890)。但是当我尝试打开 Visual Studio 时，它说只有少数 Visual Studio 组件有 Visual Studio SP1，为了打开 Visual Studio，我必须安装完整的 Visual Studio SP1。然后我重新安装了 Visual Studio SP1，Visual Studio 开始正常工作。

现在我的机器上安装了 MS Visual Studio 2010 Ultimate - ENU with SP1、Windows Phone SDK 7.1 和 Windows Phone Developer Tools RTW，但是当我尝试安装[Windows Phone Developer Tools January 2011 Update](http://www.microsoft.com/en-us/download/details.aspx?id=23854)时，显示以下错误消息：

“windows安装程序服务无法安装更新补丁，因为可能缺少要升级的程序，或者升级补丁可能会更新程序的不同版本。请确认您的计算机上存在要升级的程序，并且您有正确的升级补丁。”

我已经验证了一切。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:59:33.587

尝试完全卸载开发工具，然后安装开发工具 rtw，然后是补丁，然后是 sdk

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:05:56.120

我猜你的 Visual Studio SP1 安装出了点问题，所以卸载所有开发人员工具，然后进行全新安装将是一个好主意。

您可以按此顺序进行安装..

1.  赢 7 SP1
2.  视觉工作室
3.  视觉工作室 SP1
4.  WP7 开发者工具
5.  WP 开发者工具更新

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:50:26.697

不需要引发错误的更新。此页面上详细说明了安装顺序：http: [//create.msdn.com/en-us/resources/downloads](http://create.msdn.com/en-us/resources/downloads)

您要安装 SDK 7.1，然后安装 SDK 7.1.1 更新。

您无需在此处卸载 Visual Studio。

问候，保罗

# macos - 保护 Mac OS 中的可执行文件

> ID：11328996
> 
> 赞同：0
> 
> 时间：2012-07-04T12:19:55.967
> 
> 标签：macos, cocoa, reverse-engineering

Windows 平台中有几个可执行保护程序可以保护 exe 免受逆向工程，例如 ASProtect、PESpin、... 我如何在 MacOS 中做到这一点？什么是等效程序？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:20:56.727

[这里](https://stackoverflow.com/questions/84324/how-to-protect-mac-os-x-software-from-cracking)有一个类似的帖子可能有用。

rhinovirus推荐[UPX](http://upx.sourceforge.net/)，millenomi 推荐关注[AquaticPrime](http://www.aquaticmac.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:35:36.340

看看 [http://morpher.com/](http://morpher.com/)和[http://arxan.com/](http://arxan.com)