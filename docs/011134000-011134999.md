# StackOverflow 问答 11134000-11134999

# php - 在一个输入框中发布两个数组并在发布后将其分开，php

> ID：11134001
> 
> 赞同：0
> 
> 时间：2012-06-21T08:09:21.000
> 
> 标签：php, html

我有两个数组，我将数组发布在一个输入中；

```
<input name='sistem[]' type='hidden' value='$items[$count]|$staff[$z]' />  
   // $count and $z are index 
```

发布后，如何再次将它们提取到两个单独的数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:13:26.023

两件事：如果它实际上只是一个隐藏的输入字段，为什么不在代码中将其分成两个字段？或者，更好的是，将其存储在会话中，这样恶意用户就不可能在向 Web 服务器提交请求时更改字段上的值？

但是直接回答这个问题：

`$parts = explode('|', $_REQUEST['sistem'][0]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:13:33.687

```
foreach ($_POST['sistem'] as $key => $value)
{
   $tmp = explode("|", $value);
   $items[$key] = $tmp[0];
   $staff[$key] = $tmp[1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:13:23.343

我不确定它是最好的解决方案，但一种解决方案可能是为您的值添加前缀

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:13:27.100

像这样？

```
$items=new Array();
$staff=new Array();
foreach($_POST['sistem'] as $item){
    $itemSplit=explode('|',$item);
    $items[]=$itemSplit[0];
    $staff[]=$itemSplit[1];
} 
```

# javascript - 将匹配字符串中最后出现的点的正则表达式

> ID：11134004
> 
> 赞同：63
> 
> 时间：2012-06-21T08:09:37.620
> 
> 标签：javascript, jquery, regex, string

我有一个文件名，其中可以包含多个点，并且可以以任何扩展名结尾：

```
tro.lo.lo.lo.lo.lo.png 
```

我需要使用正则表达式将最后出现的点替换为另一个字符串`@2x`，然后再次替换点（非常像视网膜图像文件名），即：

```
tro.lo.png -> tro.lo@2x.png 
```

这是我到目前为止所拥有的，但它不会匹配任何东西......

```
str = "http://example.com/image.png";
str.replace(/.([^.]*)$/, " @2x."); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-21T08:12:02.923

您不需要为此使用正则表达式。[`String.lastIndexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/lastIndexOf)会做。

```
var str = 'tro.lo.lo.lo.lo.lo.zip';
var i = str.lastIndexOf('.');
if (i != -1) {
    str = str.substr(0, i) + "@2x" + str.substr(i);
} 
```

**[看到它在行动](http://jsfiddle.net/7aphC/)**。

**更新：**一个正则表达式解决方案，只是为了好玩：

```
str = str.replace(/\.(?=[^.]*$)/, "@2x."); 
```

匹配一个文字点，然后断言（`(?=)`是[肯定的前瞻](http://www.regular-expressions.info/lookaround.html)）直到字符串末尾没有其他字符是点。替换应包括匹配的一个点，除非您想删除它。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-21T08:16:10.657

只需在替换字符串中使用[特殊替换模式：](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter) `$1`

```
console.log("tro.lo.lo.lo.lo.lo.png".replace(/\.([^.]+)$/, "@2x.$1"));
// "tro.lo.lo.lo.lo.lo@2x.png"
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-21T08:13:20.313

您可以使用表达式`\.([^.]*?)`：

```
str.replace(/\.([^.]*?)$/, "@2x.$1"); 
```

您需要引用`$1`子组以将该部分复制回结果字符串。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-21T08:15:42.203

**工作演示** [http://jsfiddle.net/AbDyh/1/](http://jsfiddle.net/AbDyh/1/)

**代码**

```
var str = 'tro.lo.lo.lo.lo.lo.zip',
    replacement = '@2x.';
str = str.replace(/.([^.]*)$/, replacement + '$1');

$('.test').html(str);

alert(str);
​ 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-15T21:07:13.170

要匹配从字符串开头直到（包括）最后一个字符出现的所有字符，请使用：

```
^.*\.(?=[^.]*$)  To match the last occurrence of the "." character

^.*_(?=[^.]*$)   To match the last occurrence of the "_" character 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-21T08:12:01.530

用于`\.`匹配一个点。该字符`.`匹配*任何*字符。

因此`str.replace(/\.([^\.]*)$/, ' @2x.')`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-21T04:33:38.813

你可以简单地这样做，

```
> "tro.lo.lo.lo.lo.lo.zip".replace(/^(.*)\./, "$1@2x");
'tro.lo.lo.lo.lo.lo@2xzip' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-22T04:46:09.663

为什么不简单地拆分字符串并将所述后缀添加到倒数第二个条目：

```
var arr = 'tro.lo.lo.lo.lo.lo.zip'.split('.');
arr[arr.length-2] += '@2x';
var newString = arr.join('.'); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-16T17:14:19.250

```
'tro.lo.lo.lo.lo.lo.png'.replace(/([^\.]+).+(\.[^.]+)/, "$1.@x2$2") 
```

# django - django模型实例保存后无法获取字段

> ID：11134007
> 
> 赞同：0
> 
> 时间：2012-06-21T08:10:01.053
> 
> 标签：django, model

这是我的代码：

**模型.py**

```
class TblUser(models.Model):
    uid = models.IntegerField(primary_key=True, db_column='ID') # Field name made lowercase.
    username = models.CharField(max_length=3072, db_column='UserName', blank=True) # Field name made lowercase.
    password = models.CharField(max_length=3072, db_column='PassWord', blank=True) # Field name made lowercase.
    datesstart = models.DateTimeField(null=True, db_column='datesStart', blank=True) # Field name made lowercase.
    datesend = models.DateTimeField(null=True, db_column='datesEnd', blank=True) # Field name made lowercase.
    num = models.IntegerField(null=True, db_column='Num', blank=True) # Field name made lowercase.
    power = models.IntegerField(null=True, db_column='Power', blank=True) # Field name made lowercase.
    email = models.CharField(max_length=12288, blank=True)
    class Meta:
        db_table = u'tbl_user'

    def __unicode__(self):
        return '%d--%s--%d'%(self.uid,self.username,self.power) 
```

**视图.py**

```
from app.models import TblUser
def appendUser(self,name,pwd):
    #I add a new user,and the primary_key:uid is autoincrement in datebase
    user = TblUser.objects.create(username=name,password=pwd)
    print user.uid#None 
```

当我调用**appendUser()**时，它会在数据库中插入一条新记录，并且**用户**（TblUser 的实例）只有两个有效字段（**用户名、密码**），另一个为空。

我怎样才能得到，`user.uid`因为我想通过使用它来处理其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:13:38.487

您应该为 pk使用`AutoField`not an ： [https ://docs.djangoproject.com/en/1.4/ref/models/fields/#autofield](https://docs.djangoproject.com/en/1.4/ref/models/fields/#autofield)`IntegerField`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:08:52.293

您可能想阅读这篇文章，使用 ModelForm 的不同方法：

[在 Django 中保存 ModelForm 后获取主键](https://stackoverflow.com/questions/732952/get-primary-key-after-saving-a-modelform-in-django)

# visual-studio-2010 - Visual Studio 2010 很慢（打字/智能感知等）

> ID：11134015
> 
> 赞同：1
> 
> 时间：2012-06-21T08:10:25.140
> 
> 标签：visual-studio-2010, visual-studio

有时我会因 Visual Studio 2010 的速度非常慢而苦苦挣扎。我突然想到的一件事是，也许 VS 存储的一些文件（缓存、解决方案设置等）是我机器上映射到远程位置的位置（如用户设置）。你知道我在哪里可以检查 VS 用来存储文件的路径吗？或者也许您可以想到导致 VS 变慢的其他问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-21T14:33:03.640

我找到了一个对我有用的解决方案......老实说，我不知道它为什么会起作用，但它只是一个复选框。

```
Go to
Tools ==> Options ==> Environment ==> General ==> Visual Experience

Then UNTICK
Automatically adjust visual experience based on client performance

And UNTICK
Use graphics hardware acceleration if available 
```

来源： http: [//www.codeproject.com/Tips/350495/Visual-Studio-WAS-painfully-slow](http://www.codeproject.com/Tips/350495/Visual-Studio-WAS-painfully-slow)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T01:48:53.683

不幸的是，您唯一能做的就是重新启动 Visual Studio，如果这不起作用，请重新启动计算机。您还应该仔细检查您的机器上是否安装了推荐的内存空间并且可用，并且其他进程没有占用它。

# ios5 - 科尔多瓦 1.7.0 设置信息错误

> ID：11134016
> 
> 赞同：0
> 
> 时间：2012-06-21T08:10:24.937
> 
> 标签：ios5, cordova, phonegap-plugins

我正在使用科尔多瓦 1.7.0。我的应用程序在模拟器中运行良好，但出现一条消息

```
Error: executing module function 'setInfo' in module 'cordova/plugin/ios/device'. Have you included the iOS version of the cordova-1.7.0.js file? 
```

我已经包括

```
<script type="text/javascript" charset="utf8" src="[location of cordova.ios(for ios)]"></script> 
```

在 index.html 但没有工作。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:03:41.443

js的路径一定有问题。index.html 文件被读取了吗？您的 www 文件夹可能是一个组而不是[参考文件夹](http://docs.phonegap.com/en/1.7.0/img/guide/getting-started/ios/create-folder-reference.png)吗？

**[一步一步](http://docs.phonegap.com/en/1.7.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)走**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T05:10:21.130

要解决这个问题，只需按照图片中的步骤操作![您需要再次检查](../Images/5f5424a346842278aa253ca706bf61cf.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:30:27.450

这通常发生在加载页面时cordova 文件不正确可用的情况下。您可以通过在 Chrome 中打开 index.html（或您的起始页）并检查 Inspect Element 是否已加载所有资源并且没有错误来检查它是否正确引用。

# iphone - 应用程序是否有可能且有必要实现零内存泄漏？

> ID：11134024
> 
> 赞同：0
> 
> 时间：2012-06-21T08:10:49.430
> 
> 标签：iphone, objective-c, ios, memory-management, memory-leaks

当我使用 Instruments“分析”我的应用程序时，发现了一些内存泄漏。有些泄漏很明显且易于修复，但有些则不然。Instruments 中显示的一些泄漏日志真的很困扰我。例如： ![在此处输入图像描述](../Images/abcb81b5414e8a2a384697725f78396c.png)

我什至无法分辨我的代码中哪一行在幕后称这些“陌生人”。我该如何解决这些泄漏？这是我的代码泄漏吗？从框架？还是只是虚假报告？

然后我的问题是：

A：是否可以修复所有内存泄漏错误？其中一些真的很难对付。而且您甚至无法判断它是来自您的代码还是来自框架工作。

B：有必要修复所有的内存泄漏吗？几个字节泄漏可能不会影响任何事情。你为修复它付出的努力可能比你得到的要多得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:14:23.387

是的，这是可能的，是的，你应该这样做。

从长远来看，泄漏并不好，特别是如果您的应用程序在后台运行。如果泄漏在第三方库中，请告诉制造商修复它。或者，如果您有代码自行修复。泄露你自己的代码很容易被修复，所以去做吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T08:15:06.897

> A：是否可以修复所有内存泄漏错误？其中一些真的很难对付。而且您甚至无法判断它是来自您的代码还是来自框架工作。

是的，这是可能的，但请注意，有时您从分析中获得的结果不一定会导致您泄漏，有时它们是尚未自动释放的对象，有时它们不是您的。

> B：有必要修复所有的内存泄漏吗？几个字节泄漏可能不会影响任何事情。你为修复它付出的努力可能比你得到的要多得多。

如果您的意思是让您的申请不被拒绝，那么没有必要，不要过度劳累并强调一些您似乎无法找到的字节，不要去寻找已经丢失的几个字节，开始仅当您注意到您的应用程序确实在泄漏时才寻找泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:50:27.043

如果您的应用程序运行了很长时间（考虑作为某个服务器），那么它会经常导致 2 个字节的泄漏。在某个时间点，您的堆将充满无限泄漏。这可能会导致您的应用程序中的 malloc 失败。因此修复内存泄漏对于长时间运行的应用程序更为重要。而且还有可能修复所有的内存泄漏。

如果一个应用程序运行时间很短，意味着一旦应用程序存在，所有资源都会被操作系统释放，此时泄露的内存也会被释放。

# android - 如何在sqlite android上输入特殊字符“，”？

> ID：11134025
> 
> 赞同：1
> 
> 时间：2012-06-21T08:10:51.147
> 
> 标签：android, sqlite

我有插入多行的脚本：

```
protected static final String INSERT_NAME_LIST1 = "insert into Table_Name(name1,name2) VALUES (1,'aa'),(1,'bb'),(1,'cc');"; 
```

但我有错误：

```
06-21 14:15:31.155: E/AndroidRuntime(12798): Caused by: android.database.sqlite.SQLiteException: near "','": syntax error: insert into Table_Name(name1,name2) VALUES (1,'aa')',' (1,'bb')',' (1,'cc'); 
```

请帮助我，如何修复错误？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:20:30.980

您可以在 SQL 中正常轻松地做到这一点，但在 SQLite 中，我认为可以尝试将其重铸为 sqlite 为：

[是否可以在 SQLite 数据库中一次插入多行？](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:16:25.340

我认为您只能在语句中设置一组值

```
protected static final String INSERT_NAME_LIST1 = "insert into Table_Name(name1,name2) VALUES (1,'aa');"; 
```

多个插入可以用一个联合来完成

```
 INSERT INTO 'Table_Name'
 SELECT 1 AS 'name1', 'a' AS 'name2'
 UNION SELECT 2, 'b'
 UNION SELECT 3, 'c'
 UNION SELECT 4, 'd' 
```

# delphi - Delphi 的简单数据执行保护示例代码

> ID：11134027
> 
> 赞同：7
> 
> 时间：2012-06-21T08:10:55.757
> 
> 标签：delphi, data-execution-prevention

对于测试“崩溃”，我需要一小段 Delphi 代码来查看操作系统如何在事件日志中记录 DEP 违规。

我发现了很多关于激活 DEP 的资料，但没有找到关于如何“触发”违反 DEP 的资料。

你有一个例子吗？

* * *

相关问题：[https ://serverfault.com/questions/130716/if-dep-has-stopped-an-app-is-there-a-possibility-to-see-this-events-in-a-log](https://serverfault.com/questions/130716/if-dep-has-stopped-an-app-is-there-a-possibility-to-see-this-events-in-a-log)

显示 DEP vialotion 在日志中的外观

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T08:20:06.867

这段代码完成了工作：

```
procedure DoJump(Address: Pointer);
asm
  JMP    Address
end;

const
  X: Byte=$C3;//RET op code

procedure TriggerDEP;
begin
  DoJump(@X);
end; 
```

在生成的可执行文件中，`X`存储的位置被视为数据。作为替代方案，您可以尝试执行位于堆栈上的代码：

```
procedure DoJump(Address: Pointer);
asm
  JMP    Address
end;

procedure TriggerDEP;
var
  X: Byte;
begin
  X := $C3;
  DoJump(@X);
end; 
```

当 DEP 处于活动状态时，这两个都会引发访问冲突异常。

If you need to make sure that DEP is active, for example from a 32 bit process where it is optional, call this function:

```
procedure EnableDEP;
const
  PROCESS_DEP_ENABLE: DWORD=$00000001;
var
  SetProcessDEPPolicy: function(dwFlags: DWORD): BOOL; stdcall;
begin
  SetProcessDEPPolicy := GetProcAddress(GetModuleHandle(kernel32), 'SetProcessDEPPolicy');
  if Assigned(SetProcessDEPPolicy) then begin
    SetProcessDEPPolicy(PROCESS_DEP_ENABLE);
  end;
end; 
```

# java - 不推荐使用的方法，改用什么？

> ID：11134028
> 
> 赞同：5
> 
> 时间：2012-06-21T08:10:59.067
> 
> 标签：java, graphics, window, deprecated

已弃用 java.awt 的类 Windows 中的方法`show();`。我可以用什么代替？

```
package adventure;
import java.awt.*;

import java.awt.image.*;
import java.awt.event.*;
import java.net.URL;
import java.net.MalformedURLException;
import java.io.*;
import java.applet.*;
// Infogar testkommentar mvh Holger 2012-06-20 kl 19.03
public class Adventure extends Frame  {
    private static final long serialVersionUID=100L;
    public Adventure() {        
    setSize(850, 440);    
    World world = new DungeonWorld ( this );        

    Person me = new Person( world, "You", null );    
    show();
    me.goTo("Dungeon");     
    add( new Player( world, me ) );    
    addWindowListener(new MyWindowAdapter ());    
    }

    class MyWindowAdapter extends WindowAdapter {

    public void windowClosing (WindowEvent e) {
        System.exit(0);
    }
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture ( String imageName ) {
    Image im = null;

    // Load the image from the net
    try {
        URL imageSource = new URL( "http://www...xxx/"
                       + imageName );

        try {
        im = createImage( (ImageProducer) imageSource.getContent());
        } catch (IOException e) {}

    } catch (MalformedURLException e ) { }

    // Wait to ensure that the image is loaded
    MediaTracker imageTracker = new MediaTracker( this );
    imageTracker.addImage( im, 0 );
    try {
        imageTracker.waitForID( 0 );
    }
    catch( InterruptedException e ) { }

    return im;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound (String name) {
    URL u = null;

    try {
        u = new URL("file:" +  "/usr/local/hacks/sounds/" + name + ".au");
    } catch (MalformedURLException e ) { }

    AudioClip a = Applet.newAudioClip(u);
    a.play();
    }

    public static void main (String[] args) {       
    System.out.println("test"); 
      new Adventure();
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-21T08:14:37.007

让我们阅读 Java API `Window#show()`：[这里](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#show%28%29)

```
@Deprecated
public void show() 
```

> 已弃用。从 JDK 版本 1.5 开始，由`setVisible(boolean)`.
> 
> 使窗口可见。如果 Window 和/或其所有者还不能显示，则两者都可以显示。窗口将在可见之前进行验证。如果窗口已经可见，这会将窗口带到前面。

所以你应该使用`Window#setVisible(boolean)`- 供`show()`使用`setVisible(true)`。

**编辑**

在某些环境中，只是替换`show()`更改`setVisible(true)`了应用程序的行为。当您编写`Window`覆盖的子类时会发生这种情况`show()`（对于 也是如此`hide()`）。

因此，在您的代码示例`setVisible(true)`中，与`show()`. 但总的来说，只要确定，没有人会覆盖`show()`在使用`setVisible(true)`. 在这种情况下，您也必须更改覆盖的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T08:14:37.043

如果您检查 API，您将看到：

```
void show() 
```

> 已弃用。从 JDK 版本 1.5 开始，由`setVisible(boolean)`.

# javascript - 如何在点击应用邀请时将 Facebook 用户引导至带有“赞”按钮的页面？

> ID：11134030
> 
> 赞同：0
> 
> 时间：2012-06-21T08:11:10.020
> 
> 标签：javascript, facebook, facebook-fql

我一直在寻找几个小时，似乎无法找到我的问题的答案，所以我来这里寻求帮助。

我在 facebook 上有一个赞。用户低谷后，他得到一个朋友邀请窗口，这个也可以正常工作，显示朋友，发短信和邀请人。问题是当用户被邀请到应用程序时，他的链接直接将他定向到没有框架的应用程序（没有喜欢按钮继续）。

我可以通过使用另一个喜欢的按钮来解决这个问题，但我不想这样做。有什么方法可以让我创建这种绕行方式吗？

1.  不喜欢该页面的人会得到启动画面。[不喜欢的页面](http://shrani.si/f/2t/bw/30q3PgEG/1.jpg)
2.  喜欢的人，进去吧。
3.  被邀请的人，得到没有喜欢按钮的直接链接...[链接到图片](http://shrani.si/f/1Y/P3/3qiIjq2/3.jpg)

我在开发方面还很陌生，所以请尝试尽可能简单地解释。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:19:38.970

“问题是当用户被邀请使用应用程序时，他的链接直接将他定向到没有框架的应用程序（没有喜欢按钮继续）。”

这会将您的访问者从没有“赞”按钮的页面重定向到有“赞”按钮的页面。

```
<script>
    if(document.URL.indexOf("fb_source") != -1)
    {
    top.location.href = "http://www.facebook.com/pages/PAGE_NAME/PAGE_ID/APP_ID";
    //change accordingly
    }
</script> 
```

“不喜欢页面的人得到启动画面。喜欢的人进入。”

执行 FQL 查询以检查您的访问者是否已经喜欢您的页面。

```
$page_id = PAGE_ID; //change accordingly
$facebook = new Facebook(array(
    'appId'  => APP_ID, //change accordingly
    'secret' => APP_SECRET, //change accordingly
    'cookie' => true,
));
$access_token = $facebook->getAccessToken();

function userIsFan()
{
    global $page_id, $facebook, $access_token;
    $fql = "SELECT uid from page_fan WHERE uid=me() AND page_id='".$page_id."'";
    $param = array('method' => 'fql.query',
    'access_token' => $access_token,
    'query' => $fql,
    'callback' => '');
    $response = $facebook->api($param);
    if (isset($response[0]))
    {
        return true;
    }
    return false;
} 
```

如果他们喜欢您的页面，请将他们定向到您的应用程序（yourApplication.php），否则将他们定向到您的启动页面（splashPage.php），要求他们喜欢您的页面。

```
if (userIsFan())
{
    header("Location: yourApplication.php"); //change accordingly
}
else
{
    header("Location: splashPage.php"); //change accordingly
} 
```

# java - Json 使用 jsp 和 servlet

> ID：11134035
> 
> 赞同：-1
> 
> 时间：2012-06-21T08:11:25.743
> 
> 标签：java, jquery, json, charts

我需要关于我在 JSON 对象中使用 longdata 的帮助。

我是 JSON 和 jQuery 的新手。

我正在使用 Servlet、jsp、JSON、jQuery。

我想在 jsp 中使用 jQuery 从 servlet 中检索 JSON 对象值。将这些值显示为折线图或条形图。

JSON 对象如下所示：

```
{ "pageHits": [30, 60, 22, 5, 60, 88, 102], "rssHits": [33, 45, 121, 23, 55, 35, 77], "xAxis": ['Jan 2009', 'Feb 2009', 'Mar 2009', 'Apr 2009', 'May 2009', 'June 2009', 'Jul 2009'] } 
```

请把样品寄给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:25:31.263

您可以将[HighChart](http://www.highcharts.com/)用于图表目的，它确实使用 Json 数据。请仔细阅读文档和[示例](http://www.highcharts.com/demo/)，它们已经足够好了。

就从 servlet 发送数据而言，您需要做的就是为您的控制器使用类似的东西，

```
@RequestMapping(value = { "/demoLink.htm" }, method = RequestMethod.GET)
    public @ResponseBody
    Map<String, Object> sendData(@RequestParam(value = "locationId", required = false) Integer locationId) {

/** Calculate Values **/
/** Put them in HashMap (or something like that) **/
return map;
} 
```

它将自动序列化并作为 json 发送到 jquery。

如果您需要进一步的帮助，请告诉我。！！！

# google-app-engine - 在 GAE 上使用 cPickle 的文件访问错误 - Python27

> ID：11134039
> 
> 赞同：1
> 
> 时间：2012-06-21T08:11:36.647
> 
> 标签：google-app-engine

我有一个配置为 python25 的测试应用程序，它在根文件夹中打开一个文本文件，然后由 cPickle 加载。该代码基于 [gae-nltk](http://code.google.com/p/nltk-gae/) 我已将代码迁移到 python27 并且使用最新的 sdk v1.7.0 时间戳在开发工具包的日志控制台中出现以下错误：1337717865 api_versions: ['1']

```
File "C:\Program Files\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in   dispatch
return method(*args, **kwargs)
File "C:\APPS\v2\knol_handlers.py", line 267, in get
kwds1 = Reply(tb1)
File "C:\APPS\v2\knol_handlers.py", line 108, in Reply
tok = pickle.load(open(os.path.join(os.path.dirname(__file__), "site-packages\\english.pickle")))
File "C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 592, in __init__
raise IOError(errno.EACCES, 'file not accessible', filename)
IOError: [Errno 13] file not accessible: 'C:\\APPS\\v2\\site-packages\\english.pickle 
```

我已经查看了 python27 的配置文档，但我想我遗漏了一些东西。任何帮助表示赞赏。默里3

更新 = 当我将文件从根目录移动到子文件夹站点包时，该文件可供读取。我升级到 sdk 版本 1.7.0 并且文件访问问题再次出现。该文件在 app.yaml 中未标记为静态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:05:59.650

好的经验教训 - 小心使用所谓的样板模板。app.yaml 中有一个引用将其包含为静态。我恢复到基本的 app.yaml 并且问题消失了。

# joomla - Joomla 中 Wordpress 的 get_the_category( $id ) 等效项

> ID：11134040
> 
> 赞同：2
> 
> 时间：2012-06-21T08:11:39.720
> 
> 标签：joomla, joomla2.5

基本上我需要一些东西来给我返回一篇文章的类别。Joomla 具有多级类别，但文章只能位于这些类别之一。如果结构是这样的：

*   水果（类别 ID：1）
    *   热带（类别 ID：2）
        *   芒果（文章编号：1）
    *   季节性（类别 ID：3）
*   蔬菜（类别 ID：4）

我基本上想要所有祖先类别的数组。这意味着 Mango 文章将使用此函数返回一个 [1,2] 数组。

```
get_categories($aid=1) //will return [1,2] 
```

我已经查看了本节中仍在完善的 Joomla API。我想知道你们是否有更好的运气。我在 StackOverflow 上没有找到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:10:13.960

`JCategories`您可以通过使用组件 com_content 的类别的实现来获取类别树。

```
<?php
jimport('joomla.application.categories');
jimport('joomla.application.component.model');
require_once JPATH_BASE . '/components/com_content/helpers/category.php';

$articleId = $this->item->id;    // or your way to get articleId

$articlesModel = JModel::getInstance('ContentModelArticle');
$articleCategoryId = $articlesModel->getItem($articleId)->catid;

$contentCategoriesModel = new ContentCategories();
$categoryTree = $contentCategoriesModel->get($articleCategoryId)->getPath(); 
```

重要的是，结果数组的元素不仅包含`id`类别，还包含`alias`字段（如 a `2:tropical`）。要提取整数`id`使用`intval()`函数，如下所示：

```
foreach ($categoryTree as $categoryTreeNode) {
    $categoryTreeNodeId = intval($categoryTreeNode);
} 
```

# android - videoView 寻求导致 ANR

> ID：11134042
> 
> 赞同：1
> 
> 时间：2012-06-21T08:11:42.987
> 
> 标签：android, android-videoview, seekbar, buffering, android-anr-dialog

我有一个`videoView`通过应用程序的服务播放流媒体视频 url。

开始播放时，准备并开始播放需要相当长的时间，但为此我显示了一个进度对话框。

但是，如果用户使用搜索栏跳到特定位置（比如视频中间），视频视图会冻结很长一段时间（最多 20 秒？！），导致 ANR（意味着用户不能在媒体控制器上做任何事情，甚至不要回到视频的开头），然后（如果我选择等待）从选择的位置继续播放。

为什么会这样？我怎样才能避免这种奇怪的行为？即使它正在缓冲，为什么它会导致 ANR ？我没有代码，因为我所做的就是通过以下方式播放 url：

```
_videoView.setVideoURI(Uri.parse(_videoUrl)); 
```

有任何想法吗？

# css - 具有交替颜色和 tr 圆角的表格

> ID：11134048
> 
> 赞同：0
> 
> 时间：2012-06-21T08:12:02.673
> 
> 标签：css, html-table, alternate

我需要创建一个同时具有交替和圆角 TR 角的表，设法使用类似[http://jsfiddle.net/tXa53/的东西创建 tr 角](http://jsfiddle.net/tXa53/)

 `但现在我无法创建替代部分是否有 jQuery 脚本或其他可以工作的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:18:36.597

仅使用 css：

[http://jsfiddle.net/tXa53/3/](http://jsfiddle.net/tXa53/3/)

我刚刚补充说：

```
.newHardware tr:nth-of-type(2n) td{
     background:#777;
} 
```

你也可以使用`nth-child`或`nth-of-type(even|odd)``

# selenium - 想要验证文本框的字符数

> ID：11134052
> 
> 赞同：0
> 
> 时间：2012-06-21T08:12:22.670
> 
> 标签：selenium, testng

我正在尝试使用 TestNG 验证文本字段的字符数，但我不知道该怎么做。

这是我所做的代码，上限为 50：-

![在此处输入图像描述](../Images/efc94018ed52836af1f2f44cfa9d14b6.png)

我知道我做错了什么，但无法理解是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:01:33.430

您正在插入长度为 51 的文本。如果要插入长度为 50 的文本，请将 <= 更改为 <。然后你的第一个 if 即 if (n==50) 会通过。

但是，如果您正在尝试验证您的文本字段是否可以将更高长度的字符串自动截断为 50，那么，可能是它的行为不正确，因为 char 长度显然不是 50，所以它要么截断更多，要么不是截断更少，在这种情况下，这是一个有效的失败，应该作为开发所有者的错误处理。

# android - 围绕 Geopoint 的 Android 半径圈

> ID：11134053
> 
> 赞同：0
> 
> 时间：2012-06-21T08:12:24.103
> 
> 标签：android

这是我编写的代码，用于获取手机的 gps 坐标并指向您所在的位置。但在改进中，我需要得到 1 公里半径的圆。我怎么才能得到它？

```
package m.a.p;
public class MappingActivity extends MapActivity {    
    MapController mControl;
    GeoPoint GeoP;
    MapView mapV;
    Drawable d;
    List<Overlay> overlaylist;

    public double lat;
    public double lng;
    Button checkin, addplace;

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in
                                                                        // Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 10000; // in
                                                                    // Milliseconds

    protected LocationManager locationManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapV = (MapView) findViewById(R.id.mapview);
        checkin = (Button) findViewById(R.id.check);
        addplace = (Button) findViewById(R.id.addp);

        overlaylist = mapV.getOverlays();

        d = getResources().getDrawable(R.drawable.point);

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, new MyLocationListener());

        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {

            lat = location.getLatitude();
            lng = location.getLongitude();

        }

        Button check = (Button) findViewById(R.id.check);
        Button addplace = (Button) findViewById(R.id.addp);
        Button nearby = (Button) findViewById(R.id.point);

        check.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                TextView result = (TextView) findViewById(R.id.result);
                result.setText("Checked the Plce");
            }
        });
        addplace.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                TextView result = (TextView) findViewById(R.id.result);
                result.setText("Added the Plce");
            }
        });
        nearby.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView result = (TextView) findViewById(R.id.result);
                result.setText("Nearby the Plce");
            }
        });

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format("You are Here");

            Toast.makeText(MappingActivity.this, message, Toast.LENGTH_LONG)
                    .show();

            GeoP = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

            mControl = mapV.getController();
            mControl.animateTo(GeoP);
            mControl.setZoom(19);

            OverlayItem overlayItem = new OverlayItem(GeoP, "You are Here",
                    "Point");
            CustomPinpoint custom = new CustomPinpoint(d, MappingActivity.this);
            custom.insertPinpoint(overlayItem);
            overlaylist.add(custom);
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    }
} 
```

**custompinpoint** 公共类 CustomPinpoint 扩展 ItemizedOverlay{

```
 private ArrayList<OverlayItem> pinpoints = new ArrayList <OverlayItem>();
    private Context c;

    public CustomPinpoint(Drawable defaultMarker) {
        super(boundCenter(defaultMarker));
    }

    public CustomPinpoint(Drawable m, Context context){
        this(m);
        c = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return pinpoints.get(i);
    }

    @Override
    public int size() {
        return pinpoints.size();
    }

    public void insertPinpoint(OverlayItem item){
        pinpoints.add(item);
        this.populate();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:24:39.470

尝试使用自定义 MapOverlay 绘制您的位置并在其周围画一个圆圈，并覆盖 onDraw() 方法：

```
public class MyOwnLocationOverlay extends MyLocationOverlay{

    private MapView mapView;
    private Paint circlePainter;
    private Point screenCurrentPoint;
    private GeoPoint geoCurrentPoint;
    private int meters;

    public MyOwnLocationOverlay(Context context, MapView mapView) {
        super(context, mapView);
        this.mapView = mapView;
    }

    // This method is used to get user submitted radius from our application
    public void setMeters(int meters) {
        this.meters = meters;
    }

    @Override
    public synchronized boolean draw(Canvas canvas, MapView mapView,
            boolean shadow, long when) {
        // Set the painter to paint our circle. setColor = blue, setAlpha = 70 so the background
        // can still be seen. Feel free to change these settings
        circlePainter = new Paint();
        circlePainter.setAntiAlias(true);
        circlePainter.setStrokeWidth(2.0f);
        circlePainter.setColor(0xff6666ff);
        circlePainter.setStyle(Style.FILL_AND_STROKE);
        circlePainter.setAlpha(70);

        // Get projection from the mapView. 
        Projection projection = mapView.getProjection();
        // Get current location
        geoCurrentPoint = getMyLocation();
        screenCurrentPoint = new Point();
        // Project the gps coordinate to screen coordinate
        projection.toPixels(geoCurrentPoint, screenCurrentPoint);

        int radius = metersToRadius(geoCurrentPoint.getLatitudeE6() /1000000);
        // draw the blue circle
        canvas.drawCircle(screenCurrentPoint.x, screenCurrentPoint.y, radius, circlePainter);
        return super.draw(canvas, mapView, shadow, when);
    }

    // hack to get more accurate radius, because the accuracy is changing as the location
    // getting further away from the equator
    public int metersToRadius(double latitude) {
        return (int) (mapView.getProjection().metersToEquatorPixels(meters) * (1/ Math.cos(Math.toRadians(latitude))));         
    }
} 
```

有关更多详细信息，请参阅此[链接](http://danielgultom.blogspot.com/2011/01/create-radius-around-point-in-google.html)

# ruby-on-rails - 简单的 sum 在 Rails 中不起作用

> ID：11134059
> 
> 赞同：0
> 
> 时间：2012-06-21T08:12:50.130
> 
> 标签：ruby-on-rails

我想对列求和。

在我的控制器中

```
 def index
          @performance_reports = PerformanceReport.all
         end 
```

我的错误：

```
 undefined method `+' for #<PerformanceReport:0x4a55690>
74:         <td><%=  @performance_reports.sum(:clicks)%></td> 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:23:13.917

尝试

```
 @performance_reports = PerformanceReport.select('*') 
```

在视图中

```
<td><%=  @performance_reports.sum(:clicks)%></td> 
```

基本上 `PerformanceReport.all`会加载整个表并返回你不能在数组上链接查询`Array`！！！`PerformanceReport`

`PerformanceReport.select('*')`将返回 `ActiveRecord::Relation`，您可以在关系上链接任何 AR 方法

我建议你阅读 rails lazing loading strategy [Lazy loading (will_paginate sample)](http://www.simonecarletti.com/blog/2011/04/understanding-ruby-and-rails-lazy-load-hooks/) 和 [Rails Query Interface](http://guides.rubyonrails.org/active_record_querying.html)

很棒的导轨

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:22:12.037

这`sum`是一个 ActiveRecord 方法，因此您不能在已选择的对象上使用它！ypu 可以做什么：

```
PerformanceReport.sum(:clicks) 
```

因为那时数据库被查询！

# jquery - 检查 JSON 值是否存在 zepto

> ID：11134066
> 
> 赞同：0
> 
> 时间：2012-06-21T08:13:21.220
> 
> 标签：jquery, json, zepto

我已经尝试了一段时间来让它工作，但我找不到一个按我需要的方式工作的解决方案。

我正在使用 zepto.js，我需要做的是从提要中获取帖子列表并循环浏览它们。除了没有缩略图的帖子外，我一切正常。如果缩略图不存在，我传递文章的方式会留下一个空的 img 标签。

这是我的代码：

```
function get_articles(feed) {
  $.getJSON(feed, function(data) {
    $.each(data.articles, function(i, field) {
      articles += "<li class='article' id='article-"+field.id+"'><a href='story.html?  aid="+field.id+"'><img src='"+field.thumb+"' class='thumb' /><h3 class='headline'>"+field.headline+"</h3></a></li>"
    })
    $("ul#channel").html(articles)
  })
} 
```

我尝试了其他方法，但似乎找不到一种不循环 ul 或将多个循环传递到一个 li 的方法。

我知道我可能很愚蠢，但我碰壁了。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:19:16.570

使用简单的`if..else`语句

```
if (field.thumb != "")
{
    articles += "<li class='article' id='article-"+field.id+"'><a href='story.html?  aid="+field.id+"'><img src='"+field.thumb+"' class='thumb' /><h3 class='headline'>"+field.headline+"</h3></a></li>";
}
else
{
    articles += "<li class='article' id='article-"+field.id+"'><a href='story.html?  aid="+field.id+"'><h3 class='headline'>"+field.headline+"</h3></a></li>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:21:09.843

如果您根本不希望在没有缩略图的情况下渲染这些元素，则可以使用`map`过滤掉这些元素：

```
function get_articles(feed) {
  $.getJSON(feed, function(data) {
    var validArticles = $.map(data.articles, function (item, index) {
        if (item.thumb) {
            return item;
        }
    });

    $.each(validArticles, function(i, field) {
      articles += "<li class='article' id='article-"+field.id+"'><a href='story.html?  aid="+field.id+"'><img src='"+field.thumb+"' class='thumb' /><h3 class='headline'>"+field.headline+"</h3></a></li>"
    });

    $("ul#channel").html(articles);
  })
} 
```

# django - Heroku Scheduler - 为什么要排队长时间运行的作业

> ID：11134070
> 
> 赞同：4
> 
> 时间：2012-06-21T08:13:26.523
> 
> 标签：django, heroku, sysadmin

[Heroku 调度程序文档](https://devcenter.heroku.com/articles/scheduler#longrunning_jobs)说：

> 计划作业旨在执行短期运行的任务或将较长运行的任务排入后台作业队列。任何需要超过几分钟才能完成的事情都应该使用工作进程来运行

如果调度程序为这些作业启动一个新的测功机，并且测功机与工作人员的成本相同，那么将任务添加到队列并让工作进程运行它有什么优势？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T15:57:16.747

仅在调度程序任务（或您自己的自定义时钟进程）上调度而不执行间隔任务是一种架构最佳实践。[计划作业](https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes)文章中解释了这样做的动机，但总而言之，您希望您的调度程序进程/任务尽可能轻量级，因为应该只有其中一个。当您开始用执行来超载调度时，您经常会遇到调度冲突和不稳定的行为。

想象一下，一个间隔作业挂起，或者花费的时间比预期的要长得多。如果您的间隔足够紧，这将开始导致积压，并且未来的间隔可能会被推迟或一起跳过。

此外，保持组件职责尽可能分离是明智的——不要让单个组件负责正交任务。这是一种常见的设计实践，通过保持调度和执行独立，反映在计划作业用例中。

除了最佳实践，如果您处于开发或引导模式并了解上述后果，您当然可以选择忽略此类建议并在调度程序任务中运行所有内容。请注意难以调试的工作冲突或明显的重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:20:46.880

好吧，我认为这只是一个建议。如果您有一个由调度程序运行的任务并且您将手动运行此任务（在 Heroku 管理中），您将收到一个错误 - 此错误是由超时引起的（因为每个任务都有 30 秒的限制）。但事实上，这个任务不会被打断——任务会正确完成。

如果你有 1 个测功机，那么这个测功机将 Heroku 用于您的应用程序。如果您运行一些计划的作业，那么这个测功机将被用作计划程序 - >如果您有长时间运行的任务，您的页面将是“空闲的”（直到计划的作业完成时才能正常工作） .

# java - 试图弄清楚何时开始删除弱引用

> ID：11134077
> 
> 赞同：0
> 
> 时间：2012-06-21T08:13:50.593
> 
> 标签：java, memory-management, garbage-collection, weak-references

我正在阅读有关弱引用的信息。
我正在使用代码从[这里](http://www.javacodegeeks.com/2012/01/understanding-java-weak-references.html)学习。这很简单。

```
private void doFunction() throws InterruptedException {  
        Map<Integer, String> map = new HashMap<Integer, String>();   
        myMap = new WeakReference<Map<Integer, String>>(map);  
        map = null;   
        int i = 0;    
        while (true) {    
            if (myMap != null && myMap.get() != null) {  
                myMap.get().put(i++, "test" + i);   
                System.out.println("im still working!!!!");    
            }
            else {   

                System.out.println("*******im free at:"+i+"*******");  
                Thread.sleep(5000);  
                if(myMap != null){  
                    System.out.println("*******myMap is not null*******");  
                }  
            }           

    } 
```

我没有通过请求小堆大小或任何大小，`–Xms and –Xmx`但能够看到从缓存中删除的值`i == 15312`。
所以在GC`15312`中的对象`Map`开始删除条目之后。我的问题：对于内存来说
是不是`15312`太低了？在开始删除引用之前，我期待更高的价值。 我错了吗？如何评估对象将在哪些点开始被移除？ `32 bit machine``4 GB`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:20:10.860

关键`WeakReference`是你*不在乎*虚拟机何时会垃圾收集这些东西。然后，VM 将根据内存占用和性能组合执行它认为是正确的事情。

GC 在 15312 个对象之后开始收集您的对象的事实可能只是一个巧合，它还取决于 GC 的实现和/或配置方式（不同版本的 JVM 可能会以不同的方式收集）。同样，如果您正在使用`WeakReferences`，您应该期望您的东西会在随机时间点被收集，并且尝试控制何时发生这种情况的努力是徒劳的。

所以不，15312 并不是“对于具有 4GB 内存的 32 位机器来说太低了，因为 VM 可以比“内存已满”更早地收集，或者它可以“直到内存已满”才收集 - 这是依赖于实现和配置，除非您正在执行非常具体的性能优化，否则在非常具体的使用场景中，对于特定架构上的特定 VM 版本，尝试更改它所花费的时间可能会被浪费。

# api - CakePHP 2.1 - 作为具有身份验证的 Web 应用程序和 REST 服务

> ID：11134080
> 
> 赞同：1
> 
> 时间：2012-06-21T08:13:56.663
> 
> 标签：api, cakephp, authentication, rest

我目前正在开发一个当前具有表单身份验证的 CakePHP 应用程序。我还想打开此应用程序以供其他应用程序通过 REST 连接。

我知道 CakePHP 可以使用

```
Router::mapResources() 
```

和

```
Router::parseExtensions() 
```

但是，我不确定如何使用基本或摘要 HTTP 身份验证。

我在 AppController.php 中有以下内容

```
public $components = array(
    'Session',
    'Auth' => array(
        'authenticate' => array(
            'Form'
        ),
        'loginAction' => array(
            'admin' => false,
            'controller' => 'users',
            'action' => 'login'
        ),
        'loginRedirect' => array(
            'controller' => 'users',
            'action' => 'home'
        )
    )
); 
```

如果对于身份验证字段，例如我在“基本”中使用 - 当登录到基于 Web 的版本时，我得到一个 HTTP 身份验证框，而不是基于 Web 的表单。

这样做的最佳方法是什么？目前我能想到的唯一方法是创建一个单独的 ApiController 并手动进行身份验证？

任何建议都会很棒。

**更新：**

这是我修改后的代码，它给了我正确的行为——我很确定应该有更好的方法来做到这一点。

```
class AppController extends Controller {

    public $components = array(
        'Session',
        'RequestHandler',
        'Auth' => array(
            'loginAction' => array(
                'admin' => false,
                'controller' => 'users',
                'action' => 'login'
            ),
            'loginRedirect' => array(
                'controller' => 'users',
                'action' => 'home'
            )
        )
    );

    public $helpers = array('Html', 'Form', 'Session');

    public function beforeFilter() {
        $header = $_SERVER['HTTP_AUTHORIZATION'];
        if($header) {
            $this->Auth->authenticate = array('Basic');
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T12:26:54.710

```
public function beforeFilter() {

    // Change the authentication if using REST
    if($this->params['ext'] == 'json') {
        $this->Auth->authenticate = array('Basic');
    }

} 
```

这将检查 JSON 扩展，如果请求包含它 - 然后切换到基本身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:18:25.487

[检查 CakePHP 书中的 Authentication 一章。](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#authentication-objects)

CakePHP 支持 Form、Basic 和 Digest，您可以创建自己的身份验证对象并使用它们。

您可以加载多个身份验证对象，当其中第一个向身份验证处理程序返回 true 时，Cake 将登录用户。您只加载了 Form auth 对象，不知道为什么会得到 http auth 框。蛋糕不太可能是问题。

# mysql - 将旧 SQL 表数据导出为新表的 UPDATE（对于 WHERE id 的相同）

> ID：11134091
> 
> 赞同：-1
> 
> 时间：2012-06-21T08:14:26.120
> 
> 标签：mysql, sql

我有一个新表，列如下：

`id , name , tell , email`

`tell`&的所有值都`email`被错误地设置为空。

我有这张表的旧备份，没有~200条记录（有点旧）

如何仅使用`tell`&`email`列使用旧备份更新新表？

例如将旧表数据导出为更新查询并在新表上执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:18:00.380

试试这个 ：：

```
Update newTable nT
inner join oldTable oT
ON (nT.id=oT.id)
set nT.tell = oT.tell, nT.email=oT.email 
```

# android - 打开存储在 sdcard 上的大加密 pdf 文件

> ID：11134093
> 
> 赞同：0
> 
> 时间：2012-06-21T08:14:29.190
> 
> 标签：android, pdf, encryption

在我的项目中，我使用的是自定义 android 设备，为了安全起见，我必须加密我 sdcard 上的所有文件。我使用的是 AES-128 位加密，但解密和打开文件需要很长时间。

对于我使用`CipherInputStream`和`CipherOutputStream`和代理服务器进行动态解密的视频。这对大pdf文件可行吗？

一个 12 MB 的 pdf 文件大约需要 40 秒才能解密，因此在完全解密后打开文件不是一个选项。另外，我不想将解密的文件保存在设备上的任何位置。是否可以像打开视频一样打开部分 pdf 文件？

我尝试在 android 中使用全盘加密，但它在我的自定义设备上不起作用并且只显示一个绿色机器人，之后什么也没有发生。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:26:05.990

如果您刚刚加密了整个文件，而您的查看器应用程序/库希望获得整个文件，那不是真的。如果您使用 PDF 加密，即加密文件中的每个对象，您可以按需解密并显示它们。

你到底想在这里实现什么？这些文件是您应用程序的一部分吗？如果您只是想保护 SD 卡上的数据，有一些方法可以自动执行此操作，但它们需要有根设备。例如[LUKS 经理](https://play.google.com/store/apps/details?id=com.nemesis2.luksmanager)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:54:54.953

早些时候我在模拟器上进行测试。在实际设备上，解密所需的时间要少得多（12 MB 约为 6 秒）并且可以接受。最后我做了以下事情：-

对于视频和音频，我使用流式传输到 mxPlayer。对于无法部分显示的大文件，我只加密了部分文件。加密大约 10MB 的文件使其无法使用。

这些文件被保存到某个隐藏的临时位置，一旦不再需要，该位置就会被删除。

设备上仍然需要适当的应用程序，以便 Android 可以检测到它们并在需要时打开它们。就像某些视频播放器在从我的应用程序打开视频时无法正常工作，但 mxPlayer 可以。

# types - 不接受 Doctrine 1.2 + 浮点值。只有整数似乎有效

> ID：11134102
> 
> 赞同：0
> 
> 时间：2012-06-21T08:15:07.900
> 
> 标签：types, doctrine

这是基类的一个片段：

```
$this->hasColumn('order_total', 'float', null, array(
         'type' => 'float',
         'fixed' => false,
         'unsigned' => false,
         'primary' => false,
         'notnull' => true,
         'autoincrement' => false,
         )); 
```

这是我的用法：

```
public function preInsert($event)
{    
    echo $total = $this->_totalWithTax;

    $this->order_total = $total;

    $this->created_at = Zend_Date::now()->toString('yyyy-MM-dd HH:mm:ss');
} 
```

出于某种原因，它仅在`$total`是整数时才有效，但在其值为浮点数时不起作用（顺便说一句，这是最常见的情况）。我通过类型转换对此进行了测试。

我徒劳地试图理解为什么会这样，我快要把头发扯掉了。

此外，使用`$this->_set('order_total', $total);`也不起作用。

**编辑：**我忘了提到我在课堂上有一个吸气剂覆盖：

```
public function getOrderTotal()
{
    return $this->_totalWithTax;
} 
```

万一它确实有很大的不同。

调用该`save`方法时，出现此错误：

```
Validation failed in class LP_Orders 1 field had validation error: * 1 validator failed on order_total (notnull) 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:22:31.277

你能试试这个：

```
$this->hasColumn('order_total', 'float', null, array(
         'type' => 'float',
         'scale' => 8,
         'fixed' => false,
         'unsigned' => false,
         'primary' => false,
         'notnull' => true,
         'autoincrement' => false,
         )); 
```

# cassandra - Cassandra - 使用 CL.ALL 编写多个数据中心

> ID：11134106
> 
> 赞同：2
> 
> 时间：2012-06-21T08:15:39.703
> 
> 标签：cassandra

我有两个数据中心，每个数据中心的复制因子为 3。

在数据存储在两个 DC（6 个节点，或 3 + 1）之前，是否会使用 CL.ALL 块进行写入？我假设它会阻塞，直到本地 DC 中的所有 3 个副本都确认成功写入。

我想要类似 CL.ALL_LOCAL 的东西，它将所有副本上的数据存储在单个 DC 中，因此我可以使用 CL.ONE 读取。这个想法是，写入阻塞，直到单个 DC 中的所有副本都具有持久数据，并且随后的读取将有很高的概率读取新数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:20:54.230

目前没有提供您所描述内容的一致性级别。最接近的是 LOCAL_QUORUM ，它将在本地数据中心中的法定人数节点响应后返回。

如果您愿意，可以在 jira 上提交工单以添加此功能。

[https://issues.apache.org/jira/browse/CASSANDRA](https://issues.apache.org/jira/browse/CASSANDRA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:44:27.303

我检查了 Cassandra 1.1 代码，并注意到在多 DC 部署中使用 CL.ALL 编写时的有趣行为。**可能我把代码解释错了**....无论如何：

一开始，他们正在收集节点的 IP 地址以发送行突变 - 这与客户端提供的一致性级别无关。在 1.0 中，它是来自所有 DC 的所有节点，从 1.1 开始，它们从本地 DC 获取所有节点，加上来自每个远程 DC 的一个节点（其余节点在消息中作为“转发到”）。每个突变将由单独的线程发送，因此请求可以并行运行。每个这样的突变都被消息服务作为消息处理。远程 DC 中的节点收到消息后，将其转发给“转发至”中提供的剩余节点。

客户端提供的一致性级别定义了必须确认接收到的消息的节点数。在 CL.ALL 的情况下，这个数字由复制因子决定——现在变得有趣了：因为我们已经从本地 DC 向所有节点和远程 DC 的节点发送消息，我们也会从那些删除节点那里得到确认——是的这仍然是由复制因子定义的数字，但根据 notwork 延迟，我们无法确定哪些节点符合接收到的消息 - 可能来自本地和远程 DC 的节点，但也可能只是来自本地 DC 的节点. 在最坏的情况下，可能会发生本地节点都没有收到消息，并且确认来自远程 DC（如果您有很多）。这表示 -**用 CL.ALL 写作不会被授予，您可以立即阅读来自本地 DC 的消息**。

# c - h_addr_list 顺序

> ID：11134114
> 
> 赞同：3
> 
> 时间：2012-06-21T08:15:58.203
> 
> 标签：c, networking, gethostbyname

`h_addr_list`当我得到`hostent`from时，我想了解 sorted 的元素的顺序`gethostbyname`。

基本上，我正在研究一个非常古老的函数，它`hostent`从 struct获取一个结构`gethostbyname`，然后返回`h_addr`给调用者。我试图弄清楚在多个活动接口的情况下将返回哪个地址。

谷歌和源代码浏览在这里帮不了我。是否有关于订单的文档或一些信息`h_addr_list`？

PS 我正在为 Windows 和 Linux 编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:21:10.253

是什么让您认为首先有“命令”？什么会使任何特定地址更值得首先列出？

换句话说，我认为地址没有明确的顺序。您只需获取查找系统可用的所有地址。

# .net - Oracle.DataAccess - 使用此 .DLL 发布应用程序

> ID：11134116
> 
> 赞同：1
> 
> 时间：2012-06-21T08:16:04.263
> 
> 标签：.net, oracle, iis, deployment

我想知道使用 Oracle.DataAccess 发布 .NET 应用程序的最佳方法。

服务器是 Windows 2008 r2 并安装了 32 位和 64 位 Oracle 客户端。

最近两天我一直在尝试解决这个错误，但没有成功。我正在使用文件系统发布，为平台目标设置任何 CPU，并使用 GAC 路径（C:\WINDOWS\Microsoft.NET\assembly\GAC_32\Oracle.DataAccess\v4.0_4.112.3）正确引用本地 dll。 0__89b483f429c47342\Oracle.DataAccess.dll）。

当我发布此应用程序时，我收到此错误：

无法加载文件或程序集“Oracle.DataAccess”或其依赖项之一。试图加载格式不正确的程序。

或者这个：

无法加载文件或程序集 'Oracle.DataAccess, Version=4.112.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342' 或其依赖项之一。该系统找不到指定的文件。

取决于发布设置的微小变化。

我也尝试过使用 32 位平台发布并设置应用程序池以启用 32 位应用程序，但仍然没有成功。

我不想手动复制 Oracle.DataAccess DLL，而且配置文件中没有任何内容指向 DLL。

我确实有另一个使用相同的 .DLL 在服务器上运行的应用程序，但我想提出如何发布此类应用程序以避免将来出现问题的正确方法，并且我不想玩试错游戏来发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:49:13.233

就我而言，问题是开发机器的版本比服务器更新，这导致了问题。一旦开发机有相同的oracle客户端，并且对oracle数据访问dll的引用是相同的版本，就没有问题了。

# php - 在 for 循环中进行 CakePHP 数据库查询

> ID：11134117
> 
> 赞同：0
> 
> 时间：2012-06-21T08:16:06.790
> 
> 标签：php, mysql, cakephp, cakephp-2.0

我的代码如下。我有一个数组，通过使用这个数组我填充了数据库表。如果表中存在某个 id，则更新其行，如果 id 不存在，则创建行并将数据写入行。

我清空我的表，然后运行以下代码：

```
$arrayOfIds=array('1234', '5678');

foreach ($arrayOfIds as $twitter_user_id) {
    $this->ModelName->twitter_user_id = $twitter_user_id;
    if ($this->ModelName->exists()) {
        echo "$twitter_user_id exists<br>";
    } else {
        echo "$twitter_user_id not exists<br>";
        $this->ModelName->create( array ('twitter_user_id' => $twitter_user_id));
    }

    $data = array(
        'ModelName' => array(
            'age' => 15,
            'last_status' => 'online'
        ));

    $this->ModelName->save($data);
} 
```

结果回显到屏幕：
1234 不存在
5678 存在

当我检查表时，表中添加了 2 行（twitter_user_id =1234 和 twitter_user_id =5678）。

当我用表中的两个条目重新运行我的代码时，我也得到这个响应：
1234 不存在
5678 存在

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:25:36.987

我认为 exists() 函数的工作方式不像你想的那样：)

我会改变这一行：

```
if ($this->ModelName->exists()) { 
```

像这样：

```
if ($this->ModelName->find()) { 
```

如果它没有按需要工作，请添加一些条件来查找功能..关于您的 twitter_user_id

# c++ - 对 OpenCV 的未定义引用

> ID：11134118
> 
> 赞同：3
> 
> 时间：2012-06-21T08:16:07.767
> 
> 标签：c++, opencv, libraries, undefined-reference

我正在运行 32 位 Windows 7 Enterprise 和 CodeBlocks 10.05。

我按照[本教程](http://opensourcecollection.blogspot.com.es/2011/04/how-to-setup-opencv-22-in-codeblocks.html)设置 OpenCV 2.2 以使用 CodeBlocks。

任何使用 C CodeBlocks API 的程序都可以正常工作——它们可以正常编译、链接和运行。但是，当我尝试使用 C++ OpenCV 函数和对象时，`.o`会生成文件，但会出现链接错误，例如：

> 未定义的引用``cv::cvtColor(cv::Mat const&, cv::Mat&, int, int)'`

经过一番谷歌搜索，我发现这是因为我的搜索目录中没有包含足够的库。但是，我不知道要包含哪些库。

在我的 OpenCV 文件夹中搜索后，我在其中找到了一些`.a`文件`3rdParty/lib`并添加了它们。但我的问题仍然存在。

有谁知道我必须包含哪些库才能使我的程序正常工作？

如果您需要更多信息，请告诉我，我会给您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-20T07:05:20.070

我遇到了同样的问题并尝试了上面的方法，但我已经下载了预编译的 OpenCV。

所以对我有用的是包含以下标题。

# 包括 opencv2\imgproc\imgproc.hpp

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T08:19:50.253

您需要包含该`libopencv_imgproc`库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-04T17:23:59.293

如果您使用的是日食

[![在此处输入图像描述](../Images/8b7a3d45c813f37f97bea180035fd662.png)](https://i.stack.imgur.com/SDR9z.png)

当然，我假设你已经用 CMake 编译了源文件夹。如果您还没有完成，请参考此视频

[https://www.youtube.com/watch?v=kVyVEHK4qfQ](https://www.youtube.com/watch?v=kVyVEHK4qfQ)

在前 8 分钟内，您将了解每一种配置。

# grails - 如何从另一个命令对象访问命令对象的属性？

> ID：11134119
> 
> 赞同：1
> 
> 时间：2012-06-21T08:16:09.903
> 
> 标签：grails, properties, groovy, controllers

我目前正在开发一个 grails 应用程序。我在控制器中有两个命令对象（AccountInfoCommand 和 EducInfoCommand）。在我的 EducInfoCommand 上，我想检查 yearGraduated 属性是否早于其验证器约束中设置的birthDate（AccountInfoCommand 的属性）。我将如何做到这一点？

这是我的 AccountInfoCommand 代码：

```
class AccountDetailsCommand  implements java.io.Serializable {

    String username
    String password
    String confirmPassword
    String emailAddress
    Date birthDate        
} 
```

这是我的 EducInfoCommand 代码：

```
class EducInfoCommand implements java.io.Serializable {

    Integer graduated 
    EducationLevel educationLevel   
    String schoolName 
    String yearGraduated
    String honorsReceived
}

static constraints = {

    yearGraduated nullable: false, maxSize:4, blank: false,  matches: /([0-9]*)/,
      validator: {
            Date.parse('yyyy',it) <= new Date() ? true : false
      }
} 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T19:03:13.670

您需要参考 EducInfo 所针对的 AccountDetails。例如，如果您添加了一个用户名字段，`EducInfoCommand`您可以从中查找帐户详细信息（假设有一个类似于命令对象的 AccountDetails gorm 对象）：

```
class EducInfoCommand implements java.io.Serializable { 
    String yearGraduated
    String username
    // ...
}

static constraints = {
    yearGraduated nullable: false, maxSize:4, blank: false,  matches: /([0-9]*)/,
      validator: { val, obj ->
            Date.parse('yyyy',val) > AccountDetails.findByUsername(obj.username).birthDate
      }
} 
```

# php - 将流发送到交换机的默认情况

> ID：11134131
> 
> 赞同：0
> 
> 时间：2012-06-21T08:16:56.427
> 
> 标签：php, jquery, ajax, switch-statement

大家好，

我在我的 js 文件中有：

```
function sendDataToPhp()
{
  theUrl = 'myfile.php';
    params = '';
    params += 'function=sendData';

    params += '&myfield='+someVariableForMyField;
    $.ajax ({
        url: theUrl,
        data: params,
        type: "POST",
        async:false,
        success: function (data, textStatus)
        {    
        }
    }); 

} 
```

然后在 myfile.php

```
if (isset($_REQUEST['function']))
    {
        $function = $_REQUEST['function'];

    }  

    switch ($function) {
        case 'sendData':
        //code
        break;
        default:
       //code
} 
```

有了这个，我将代码流发送到交换机的 sendData 案例。

现在在成功内部，在 ajax() 中我需要将代码流发送到 switch 的默认情况。我怎样才能做到这一点？

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:25:22.777

Switch 的工作方式是，如果没有匹配的 CASE，那么它会转到 DEFAULT 案例......所以也许你可以`function=IdontExistFunction`在你的 ajax 调用中提供......或者如果你想要运行的 DEFAULT 中有一段代码那么最好将其分开并使其成为一个函数，以便您可以根据需要从任何地方调用。

顺便说一句 - 也有 GOTO 语句可用 - 不确定你是否可以在你的情况下使用它[http://php.net/manual/en/control-structures.goto.php](http://php.net/manual/en/control-structures.goto.php)？

# postgresql - PropelBundle 数据库：为 postgres 创建

> ID：11134132
> 
> 赞同：2
> 
> 时间：2012-06-21T08:16:58.160
> 
> 标签：postgresql, symfony, propel

我已经为 symfony2 安装了推进包。我的数据库配置是：

```
propel:
    dbal:
        driver:               pgsql
        user:                 postgres
        password:             postgres
        dsn:                  pgsql:host=localhost;port=5432;dbname=test_database
        options:              {}
        attributes:           {} 
```

当我想从控制台（控制台推进：数据库：创建）创建这个数据库时，我遇到了奇怪的错误：`Unable to open PDO connection [wrapped: SQLSTATE[08006] [7] FATAL: database "pgsql" does not exist.`

我在本地主机上创建了 pgsql 数据库，一切都很好。数据库“test_database”已成功创建。有人能解释一下为什么我得到这个先前的错误吗？在 mysql 上，我创建了没有任何问题的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:13:04.733

此问题是 PropelBundle 中的一个错误，已通过以下提交修复（即使提交消息是关于 MySQL，它也修复了其他 RDBMS）：[https ://github.com/propelorm/PropelBundle/commit/b4475d27fb1eb846d10cc2d2e2bd164f037508e3](https://github.com/propelorm/PropelBundle/commit/b4475d27fb1eb846d10cc2d2e2bd164f037508e3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:19:36.483

我已经通过 Composer 安装了新的 PropelBundle，现在一切正常。我想这可能是 1.0 bundle 的问题，现在我有 1.1

# iphone - 将类嵌入故事板

> ID：11134134
> 
> 赞同：0
> 
> 时间：2012-06-21T08:17:10.203
> 
> 标签：iphone, objective-c, xcode, ios5, storyboard

我如何将类嵌入到情节提要中，我已经设计了包含所有文件的情节提要，但现在我有一个里面有随机图像的类，我想在情节提要中的一个 ViewControler 中显示它？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:36:13.540

在您的故事板中：

1.  单击您的视图控制器
2.  单击身份检查器（第三个选项卡）
3.  在“班级”字段中输入您的自定义班级名称

![在此处输入图像描述](../Images/9f46e5f844cec0fba16dedebfd3d682b.png)

# php - 上传前查找文件类型和文件大小

> ID：11134135
> 
> 赞同：0
> 
> 时间：2012-06-21T08:17:12.590
> 
> 标签：php, jquery, ajax, filesize, file-type

> **可能重复：**
> [如何让 jQuery 在上传时限制文件类型？](https://stackoverflow.com/questions/651700/how-to-have-jquery-restrict-file-types-on-upload)

我有个问题。我将通过 Ajax 发送一个表单。此表单也可以发送文件。我怎样才能找到选择的文件类型和文件有多大。我知道您可以使用 HTML5 中的 FILE API 来执行此操作，但它在 Internet Explorer 7,8 和 9 中不起作用。您知道如何在上传之前找出文件类型和文件大小吗？

我也不会使用任何插件。我会用一种方法让你自己编程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:01:52.257

[这里有一个很好的教程](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。如果您不使用 Flash 上传器，则 ajax 上传不适用于 < IE 8

# visual-studio-2010 - 如何在专用服务器上构建 TFS

> ID：11134140
> 
> 赞同：0
> 
> 时间：2012-06-21T08:17:20.843
> 
> 标签：visual-studio-2010, build

我的桌面安装了 VS 2010 专业版，安装了 TFS 2010 的虚拟机和第二个虚拟机，我希望在其上运行构建。![在此处输入图像描述](../Images/04d6cdb973385c5543f0824c80cbc8f4.png)

这就是我想说的。

两个虚拟机在同一个域上，VS 2010 在不同的域上。

它只是配置构建代理吗？

希望这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:21:16.293

若要在专用服务器上构建 Visual Studio 项目，您必须设置 Team Build 定义，请参阅MSDN 上的[此页面以获取更多信息。](http://msdn.microsoft.com/en-us/library/ms181716.aspx)

# asp.net-web-api - extjs form.load 使用不同域服务器的url来获取数据并绑定到字段

> ID：11134141
> 
> 赞同：0
> 
> 时间：2012-06-21T08:17:26.243
> 
> 标签：asp.net-web-api, extjs-mvc, extjs4.1

我想使用 json 数据加载表单字段。我正在使用 extjs 4.1 for ui 和 asp.net webapi 来获取数据。我的目标是加载数据并将其动态绑定到 form.load 用于如果字段名称对应于 data.fieldnameproperty 的字段。

我已将以下链接作为参考： [Ext JS：FormPanel 未使用 JSON 数据填充字段](https://stackoverflow.com/questions/1351424/ext-js-formpanel-not-populating-fields-with-json-data)

如果 Webapi 在同一个项目上，它会加载数据：即 projectname: --ui 文件夹 -- webapi 控制器文件夹

但在我的情况下，数据来自不同的域 2 不同的 ui 和 webapi 项目。我的 form.load 代码如下

```
formCmp.getForm().load({
    url: 'http://localhost/WebApiCore/api/Values/',
    method: 'GET',
    headers: {'Content-type': 'application/json'},
// params: {
//          empId: '111'
//         },
    success: function (form, action) {
        console.log(action.result);
        //Ext.Msg.alert("Load success", action.result);
    },
    failure: function (form, action) {
        //Ext.Msg.alert("Load failed", action.result.errorMessage);
    }
    }); 
```

我在萤火虫中收到错误为“NetworkError：405 Method Not Allowed -” [http://localhost/WebApiCore/api/Values/?_dc=1340261175475](http://localhost/WebApiCore/api/Values/?_dc=1340261175475) ”。

我的项目在“ [http://localhost:54118/PreHospital.htm](http://localhost:54118/PreHospital.htm) ”上运行

我不确定是 extjs 没有使用 form.load 发送跨域请求的问题，还是 webapi 的问题不允许跨域请求。

我不确定如何设置 extjs 以使用 form.load 发送 jsonp 请求。

任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:08:58.650

如果您的 Ext Form 上只有常规表单字段，它实际上会执行 AJAX 调用来提交此数据。我认为没有办法强制 form.load 执行 JSONP 请求。您可能需要像手动 AJAX 请求一样执行手动 JSONP 请求。

```
 Ext.data.JsonP.request({
            url         : websiteURL,
            scope       : this,
            params      : {
                empId: '111'
            },
            success     : function(jsonData) {

            },
            failure     : function(jsonData) {
                Ext.Msg.show({
                    title   : 'Warning',
                    msg     : message,
                    buttons : Ext.Msg.OK,
                    icon    : Ext.Msg.WARNING
                });
           }
    }); 
```

# android - android edittext onchange 监听器

> ID：11134144
> 
> 赞同：132
> 
> 时间：2012-06-21T08:17:41.143
> 
> 标签：android, android-edittext, textwatcher

我知道一点，`TextWatcher`但你输入的每个角色都会触发。我想要一个在用户完成编辑时触发的监听器。是否可以？同样在`TextWatcher`我得到一个实例，`Editable`但我需要一个`EditText`. 我怎么得到它？

***编辑***：第二个问题更重要。请回答。

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-06-21T08:23:40.173

首先，如果失去焦点或用户是否按下完成按钮，您可以查看用户是否完成了文本编辑`EditText`（这取决于您的实现以及最适合您的方式）。其次，只有将 声明为实例对象时，才能`EditText`在其中获取实例。即使您不应该在其中编辑，因为它不安全。`TextWatcher``EditText``EditText``TextWatcher`

**编辑：**

为了能够让`EditText`实例进入你的`TextWatcher`实现，你应该尝试这样的事情：

```
public class YourClass extends Activity {

    private EditText yourEditText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        yourEditText = (EditText) findViewById(R.id.yourEditTextId);

        yourEditText.addTextChangedListener(new TextWatcher() {

            public void afterTextChanged(Editable s) {

                // you can call or do what you want with your EditText here

                // yourEditText... 
            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

            public void onTextChanged(CharSequence s, int start, int before, int count) {}
        });
    }
} 
```

请注意，上面的示例可能有一些错误，但我只是想向您展示一个示例。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2016-09-21T19:05:54.600

为我的所有 EditText 字段实现一个侦听器需要我有丑陋、冗长的代码，这让我很困扰，所以我编写了下面的类。可能对任何偶然发现此问题的人有用。

```
public abstract class TextChangedListener<T> implements TextWatcher {
    private T target;

    public TextChangedListener(T target) {
        this.target = target;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {}

    @Override
    public void afterTextChanged(Editable s) {
        this.onTextChanged(target, s);
    }

    public abstract void onTextChanged(T target, Editable s);
} 
```

现在实现一个监听器有点干净。

```
editText.addTextChangedListener(new TextChangedListener<EditText>(editText) {
            @Override
            public void onTextChanged(EditText target, Editable s) {
                //Do stuff
            }
        }); 
```

至于它触发的频率，人们可能会实施检查以在`//Do stuff`给定的 a 之后运行他们想要的代码

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-06-17T17:05:01.453

任何使用**ButterKnife**的人。你可以像这样使用：

```
@OnTextChanged(R.id.zip_code)
void onZipCodeTextChanged(CharSequence zipCode, int start, int count, int after) {

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-12T07:26:30.583

我已经使用`AutotextView`：

```
AutotextView textView = (AutotextView) findViewById(R.id.autotextview);
textView.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
        seq = cs;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int arg1, int arg2, int arg3) {

    }

    @Override
    public void afterTextChanged(Editable arg0) {
        new SearchTask().execute(seq.toString().trim());
    }

}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-04T10:05:09.657

```
 myTextBox.addTextChangedListener(new TextWatcher() {  

    public void afterTextChanged(Editable s) {}  

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {} 

    public void onTextChanged(CharSequence s, int start, int before, int count) {  

    TextView myOutputBox = (TextView) findViewById(R.id.myOutputBox);  
    myOutputBox.setText(s);  

    }  
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-11T00:45:49.630

`TextWatcher`对我没有用，因为它一直在为`EditText`每个人开火并弄乱彼此的价值观。

这是我的解决方案：

```
public class ConsultantTSView extends Activity {
    .....

    //Submit is called when I push submit button.
    //I wanted to retrieve all EditText(tsHours) values in my HoursList

    public void submit(View view){

        ListView TSDateListView = (ListView) findViewById(R.id.hoursList);
        String value = ((EditText) TSDateListView.getChildAt(0).findViewById(R.id.tsHours)).getText().toString();
    }
} 
```

因此，通过使用该`getChildAt(xx)`方法，您可以检索 中的任何项目`ListView`并使用`findViewById`. 然后它将给出最新的值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-21T08:21:48.487

据我所知，只有两种方法可以做到。你怎么知道用户写完一个单词？要么失去焦点，要么点击“确定”按钮。在我看来，您无法知道用户按下了最后一个字符...

所以调用`onFocusChange(View v, boolean hasFocus)`或添加一个按钮和一个点击监听器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-27T12:28:01.140

Watcher 方法在每个字符输入时触发。所以，我基于 onFocusChange 方法构建了这段代码：

```
public static boolean comS(String s1,String s2){
    if (s1.length()==s2.length()){
        int l=s1.length();
        for (int i=0;i<l;i++){
            if (s1.charAt(i)!=s2.charAt(i))return false;
        }
        return true;
    }
    return false;
}

public void onChange(final EditText EdTe, final Runnable FRun){
    class finalS{String s="";}
    final finalS dat=new finalS();  
    EdTe.setOnFocusChangeListener(new OnFocusChangeListener() {          
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {dat.s=""+EdTe.getText();}
            else if (!comS(dat.s,""+EdTe.getText())){(new Handler()).post(FRun);}       
        }
    });
} 
```

要使用它，只需像这样调用：

```
onChange(YourEditText, new Runnable(){public void run(){
    // V  V    YOUR WORK HERE

    }}
); 
```

您可以通过将 !comS(dat.s,""+EdTe.getText()) 替换为 !equal 函数来忽略 comS 函数。然而，equal 函数本身有时在运行时无法正常工作。

onChange 监听器会在用户输入焦点时记住 EditText 的旧数据，然后在用户失去焦点或跳转到其他输入时比较新数据。如果比较旧字符串与新字符串不同，它会触发工作。

如果您只有 1 个 EditText，那么您需要通过在窗口外制作 Ultimate Secret Transparent Micro EditText 并请求对其进行焦点来制作 ClearFocus 功能，然后通过导入方法管理器隐藏键盘。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-09T08:45:48.760

在 Kotlin Android EditText 侦听器中设置使用，

```
 val searchTo : EditText = findViewById(R.id.searchTo)
   searchTo.addTextChangedListener(object : TextWatcher {
    override fun afterTextChanged(s: Editable) {

        // you can call or do what you want with your EditText here

        // yourEditText...
    }

    override fun beforeTextChanged(s: CharSequence, start: Int, count: Int, after: Int) {}
    override fun onTextChanged(s: CharSequence, start: Int, before: Int, count: Int) {}
}) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-16T11:52:53.253

我已经从@RNGuy那里得到了解决方案，谢谢！并且稍微改变了监听器，所以现在它只会通过更新 textView 来接受整数。

```
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;

public abstract class NumberChangedListener implements TextWatcher {
    private final EditText target;
    private final String defaultValue;

    public NumberChangedListener(EditText target, int defaultValue) {
        this.target = target;
        this.defaultValue = defaultValue + "";
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {}

    @Override
    public void afterTextChanged(Editable s) {
        this.onTextChanged(target, s);
    }

    private void onTextChanged(EditText target, Editable s) {
        String input = s.toString();
        String number = input.replaceAll("[^\\d]", "");

        if (!number.equals(input)) {
            target.setText(number);
            return;
        }

        Integer integer;

        try {
            integer = Integer.valueOf(number);
        } catch (NumberFormatException ignored) {
            target.setText(defaultValue);
            return;
        }

        if (!integer.toString().equals(number)) {
            target.setText(integer.toString());
            return;
        }

        onNumberChanged(integer);

    }

    public abstract void onNumberChanged(int value);
} 
```

并用作

```
 int defaultVal = 10;
    mTextView.addTextChangedListener(new NumberChangedListener(mTextView, defaultVal) {
        @Override
        public void onNumberChanged(int value) {
            // use the parsed int
        }
    }); 
```

# sql-server - sql server 中 CAST 或 CONVERT 的意外结果

> ID：11134145
> 
> 赞同：0
> 
> 时间：2012-06-21T08:17:44.997
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

```
SELECT CAST (330/60 AS FLOAT) AS result 
```

或者

```
SELECT CONVERT(FLOAT, 330/60) AS result 
```

实际上我期望结果为 5.5

但它返回 5。**为什么？**

并告诉我任何解决方案以获得**5.5 的结果**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:19:58.113

用于`60.0`强制定点类型：

```
 SELECT CAST (330/60.0 AS FLOAT) AS result
 SELECT CONVERT(FLOAT, 330/60.0) AS result 
```

的计算`330/60`是以整数形式完成的，它将对结果进行四舍五入。之后你投到浮动。您可以从一开始就使用数字类型，而无需强制转换：

```
SELECT 330/60.0 AS result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:26:03.290

而不是将答案转换为 float ，您应该尝试将分母转换为 float 然后进行除法

```
 Select 330/CAST(60 as float) as result 
```

或者按照 juergen d 的建议更改分母以包含小数部分

```
 SELECT CAST (330/60.0 AS FLOAT) AS result 
```

# sql - reportviewer 条形图，条形宽度不正确

> ID：11134146
> 
> 赞同：8
> 
> 时间：2012-06-21T08:18:00.050
> 
> 标签：sql, vb.net, sql-server-2008, reporting-services, report-builder2.0

我对使用报表生成器 2.0 在 sql2008 数据库（安装了最新的服务包）、报表服务版本 10.0.5500.0 上构建的报表有疑问。

问题是条形比它们应该的宽。每个条的宽度应为 1 小时。

x 轴配置有间隔设置为和 的最小值和最大值`hour`的间隔值。该系列有一个设置为，一个类型为一小时的列（示例）。`1``=TimeSerial(0,0,0)``=TimeSerial(23,59,0)``CategoryField``[hour]``time``08:00:00.0000000`

![问题示例](../Images/9ef2149986f3e9f3d18cfaedcd88fa44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T08:13:25.877

您正在寻找的是在 General--> Custom Attributes --> PointWidth 下的属性网格中您必须先选择系列。如果您看不到属性网格，您需要从功能区启用它。查看，选中属性旁边的框。

小于 1 的数字将在条形之间产生间隙，大于 1 的数字将导致条形重叠。

它更多的是相对宽度设置，而不是与您的小时间隔绝对相关，但您可以对其进行调整以使其正确。就我个人而言，我建议您将其花在一个小时以内，因为它们看起来更好。

[条形图1.png](http://davoscollective.com/wp-content/uploads/2012/06/barchart1.png)

您还应该将水平轴上的标签设置为垂直，然后旋转它们，使其看起来更好一些。

# asp.net-mvc - T4MVC 找到与控制器匹配的多种类型

> ID：11134148
> 
> 赞同：0
> 
> 时间：2012-06-21T08:18:01.140
> 
> 标签：asp.net-mvc, t4mvc

我在主控制器文件夹和某些区域的控制器文件夹中有 Home 控制器。结果，我收到一条错误消息，告诉 ASP.NET MVC 找不到要使用的 Home 控制器：

> 找到了与名为“home”的控制器匹配的多种类型。如果为该请求提供服务的路由 ('') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。

我发现了一个类似的两年前的[问题](https://stackoverflow.com/questions/2794163/t4mvc-and-duplicate-controller-names-in-different-areas)。此功能的当前状态是什么？它应该工作还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:36:43.650

我想，这不仅仅是 T4MVC 的问题，而是一般的 MVC。Phil Haack为 MVC2[描述了它](http://haacked.com/archive/2010/01/12/ambiguous-controller-names.aspx)，从那时起没有太大的变化，afaik。

顺便说一句，该错误包含一个确切的建议，您是否遵循它？

# c# - 使用实体框架从多个表中删除所有记录

> ID：11134149
> 
> 赞同：1
> 
> 时间：2012-06-21T08:18:01.187
> 
> 标签：c#, entity-framework, stored-procedures

我正在使用 Entity Framework、C# 4.0 和 Visual Studio 2010。我需要执行一个简单的 SQL 查询来删除四个表的内容。查询包含：

```
DELETE FROM dbo.tblMFile
DELETE FROM dbo.tblMContacts
DELETE FROM dbo.tblPersonDetails
DELETE FROM dbo.tblAddresses 
```

一些表之间存在外键约束。

似乎没有简单的方法可以做到这一点。

参考我对第一响应者回答的评论：

*   由于数据的高度机密性，我需要一种快速删除所有内容的方法（要求和安全问题）

*   我是 EF 新手，渴望学习

*   由于上面提到的外键约束，我使用删除而不是截断（上面的 SQL 也是说明性的，不是确定的）。

*   我一直坚信强类型，并在我的所有对象前加上类型指示符。它为我节省了数小时（甚至数天）的调试时间。

*   人类有礼貌、敏感和信息丰富（在许多其他属性中）。我渴望成为人类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:21:30.297

不，这很好。ORM 不适用于批量删除。如果您真的想使用 LINQ 发出 DELETE，请使用 BlToolkit，它允许您在 LINQ 中表达任意几乎标准的 DML 非批量（无截断）。

删除所有记录？

截断表，而不是删除。

截断表 tblMFile

根据表格包含的数量，速度可能会快数千倍。主要是因为它也不会记录已删除的数据 - 只是发生截断的事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:26:03.167

添加到@TomTom的答案。你不能直接使用实体框架来做到这一点。但是你可以：

*   创建一个存储过程来删除记录（也可以将表名作为参数）
*   使用`ExecuteStoreQuery` [see](http://blog.cincura.net/231337-new-translate-and-executestorequery-executestorecommand-on-objectcontext-in-entity-framework-v4/) [see](http://msdn.microsoft.com/en-us/library/dd487208.aspx)直接写SQL命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-18T09:30:02.300

尝试这个

```
_db.ExecuteStoreCommand("delete from MachineMaster where IdMachine =" + obj_Machine.IdMachine + "  or IdMasterMachine=" + obj_Machine.IdMachine  ); 
```

# php - Magento - 以编程方式将选项分配给多选属性

> ID：11134150
> 
> 赞同：2
> 
> 时间：2012-06-21T08:18:03.433
> 
> 标签：php, magento, attributes, entity-attribute-value

我有一个多选类型的自定义属性，我想以编程方式为其分配值，但它不像“文本字段”属性那样工作。

目前，我使用`product.update`Magento 的 SOAP API 来更新附加属性。

我已经尝试过搜索并尝试过，但不幸的是它们似乎没有用。我认为这应该默认正常工作，我们需要一些技巧吗？

magento 有没有关于这类工作的官方文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T01:18:59.503

可以编写一个设置脚本来为多选属性添加值。考虑到您的属性是颜色，并且您正在尝试将值 'Red','Green','Blue' 添加到属性中，然后像这样添加

```
$oInstaller = new Mage_Eav_Model_Entity_Setup('core_setup');
$iAttribId = $oInstaller->getAttributeId('catalog_product', 'color');
$oInstaller->addAttributeOption(array(
        'attribute_id' => $iAttribId, 
        'value' => array(
            array(
                0 => 'Red',
                1 => 'Blue',
                2=> 'Green'
            )
        ),
    )); 
```

希望这有效。

# java - 身份“chartBean”未引用 MethodExpression 实例

> ID：11134154
> 
> 赞同：0
> 
> 时间：2012-06-21T08:18:19.080
> 
> 标签：java, jsf, primefaces, bar-chart

该图表显示得非常好，但日志一点也不好看。

我找不到异常的原因。任何建议表示赞赏！我相信在两种情况下，没有实例，因为它没有被调用，或者我的 bean 中有一个空指针。但是我已经在 bean 中完成了错误处理，所以我相信可能还有其他原因？

错误 1

```
 SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path     [/test threw exception [/home/barChart.xhtml @14,67 listener="#{chartBean}": Identity 'chartBean' does not reference a MethodExpression instance, returned type: ChartBean] with root cause
    javax.el.ELException: /home/barChart.xhtml @14,67 listener="#{chartBean}": Identity 'chartBean' does not reference a MethodExpression instance, returned type: ChartBean
        at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:111) 
```

错误 2

```
 SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/test] threw exception [null] with root cause
    java.lang.NullPointerException
        at org.primefaces.component.chart.bar.BarChartRenderer.encodeOptions(BarChartRenderer.java:64) 
```

错误 3

```
 SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
    java.lang.RuntimeException: java.lang.OutOfMemoryError: PermGen space
        at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292...... 
```

然后错误加起来

代码：barChart.xhtml

```
 <?xml version="1.0" encoding="ISO-8859-1" ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:p="http://primefaces.org/ui">
    <h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>Insert title here</title>
    </h:head>
    <h:body>

            <h1 class="title ui-widget-header ui-corner-all">Login - Statistics</h1>
            <div class="entry">

                <p:barChart id="horizontal" value="#{chartBean.categoryModel}" legendPosition="ne"  breakOnNull="false" barMargin="3" barPadding="3"
                            title="Horizontal Bar Chart"  orientation="horizontal" min="0" max="#{chartBean.count}" style="height:#{chartBean.ssize}" />

            </div>
    </h:body>
    </html> 
```

和 Bean ChartBean.java

```
 @ManagedBean(name="chartBean")
    @RequestScoped
    public class ChartBean implements Serializable {

        CDBPool cdb;
        ResultSet res = null;
        private int method = 0;
        private int  months = 12;
        private String  country = null;
        private int bitval = 1;
        private int type = 0;
        private CartesianChartModel categoryModel;

        private int size = 1;
        private String sSize = "10";           //Width of chart
        private String maxCount="100";          //size of x-axis 
        private int count = 0;
        private HttpServletRequest request;
        private HttpServletResponse response;

        public ChartBean()   {
        request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
        response = (HttpServletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
            createCategoryModel();
        }

    /**
    * To set the max of x-axis as integer
    * @return 
    */
        public int getCount() {
            return count;
        }

    /**
    * To set the max of x-axis
    * @return 
    */
        public String getMaxCount() {
            return maxCount;
        }

        public int getSize() {
            return size;
        }
    /**
    * To set the width of chart
    * @return 
    */
        public String getSsize() {
            return sSize;
        }

        public void itemSelect(ItemSelectEvent event) {
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Item selected",
                    "Item Index: " + event.getItemIndex() + ", Series Index:" + event.getSeriesIndex());

            FacesContext.getCurrentInstance().addMessage(null, msg);
        }

        public CartesianChartModel getCategoryModel() {
            return categoryModel;
        }

        public final void setChartProp(int method, int  months, String country, int  bitval, int  type){
            //TODO Replace thees values with request get...
            this.method = method;
            this.months = months;
            this.country = country;
            this.bitval = bitval;
            this.type = type;
            if (method == 0) {
                method = 0;
            }
            if (months == 12) {
                months = 12;
            }
            if (country == null) {
                country = "%";
            }
            if (bitval == 1) {
                bitval = 1;
            }
            if (type == 0) {
                type = 0;
            }
            //CALL "cdbdba"."CDBStatLoginDay"("@SUMMETHOD" = 0,"@MONTHSBACK" = 12,"@COUNTRY" = '%',"@BITVAL" = '1',"@TYPE" = 0)
    /*
            mint,diff,dh,sum
            20110616,366,0,84
            20110616,366,1,52
            20110616,366,2,6
            20110616,366,3,17
    */      

            String sqlString = "Exec CDBStatLoginDay " + method + "," + months + ",'" + country + "'," + bitval + "," + type;
            res = cdb.dbQuery(sqlString);
        }

        private void createCategoryModel()  {
            try {
                cdb = JSPCodeFunctions.getDBPool(request, response);
            } catch (Exception ex) {
                Logger.getLogger(ChartBean.class.getName().concat(" when calling JSPCodeFunctions ")).log(Level.SEVERE, null, ex);
            }
                setChartProp(method,  months,  country,  bitval,  type);    
            categoryModel = new CartesianChartModel();
            ChartSeries hits = new ChartSeries();

            if (res != null) {

                Date incrementDate = null;
                DateFormat formatter = new SimpleDateFormat("yyyyMMdd");
                int days = 0;
                String day;
                String month;
                String year; 
                String serieDate = null;
                String startDate = null;

                count = 100;
                try {
                    while (res.next()) {
                        size = res.getInt(2);
                        try {
                            incrementDate = ChartDate.addDays((Date)formatter.parse( res.getString(1)), res.getInt(3));
                        } catch (ParseException ex) {
                            Logger.getLogger(ChartBean.class.getName().concat(" When retriving rows from res ")).log(Level.SEVERE, null, ex);
                        }
                        day = incrementDate.toString().split(" ")[2];
                        month = incrementDate.toString().split(" ")[1];
                        year = incrementDate.toString().split(" ")[5];
                        serieDate = day+""+month+""+year;
                        count = (res.getInt(4)>count)? res.getInt(4):count;
                        hits.set(serieDate, res.getInt(4));  //Sets date and count
                        days++;
                        try {
                            startDate = ChartDate.addDays((Date)formatter.parse( res.getString(1)), 0).toString().split(" ")[2]+"-"+ChartDate.addDays((Date)formatter.parse( res.getString(1)), 0).toString().split(" ")[1]+"-"+ChartDate.addDays((Date)formatter.parse( res.getString(1)), 0).toString().split(" ")[5];
                        } catch (ParseException ex) {
                            Logger.getLogger(ChartBean.class.getName().concat(" When retriving rows from res")).log(Level.SEVERE, null, ex);
                        }

                    }
                    maxCount = String.valueOf(count);
                    sSize= String.valueOf(size*15)+"px";                
                    hits.setLabel("Numer of login from: "+startDate+" to "+serieDate.toString());
                } catch (SQLException ex) {
                    Logger.getLogger(ChartBean.class.getName()).log(Level.SEVERE, null, ex);
                }

                try {
                    if (res!=null)res.close();res = null;
                } catch (SQLException ex) {
                    Logger.getLogger(ChartBean.class.getName()).log(Level.SEVERE, null, ex);
                }
                categoryModel.addSeries(hits);

            }else{
                //Lets add some default test data
                ChartSeries boys = new ChartSeries();
                boys.setLabel("Boys");
                boys.set("2004", 120);
                boys.set("2005", 100);
                ChartSeries girls = new ChartSeries();
                girls.setLabel("Girls");
                girls.set("2004", 52);
                girls.set("2005", 60);
                categoryModel.addSeries(boys);
                categoryModel.addSeries(girls);
                }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:29:59.157

您发布的代码似乎不完整。该错误清楚地说明了问题：

> /home/barChart.xhtml @14,67 listener="#{chartBean}"：标识'chartBean'没有引用MethodExpression实例，返回类型：ChartBean

您发布的代码中的第 14 行是空的，所以请检查您的真实代码

监听器必须引用一个方法，所以`listener="#{chartBean}"`你应该使用 sth而不是`listener="#{chartBean.doStuff}"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T12:47:59.400

我的解决方案：我进行了一般清理，替换了不推荐使用的标记库并删除了 truts xml 文件，并在类路径上添加了 struts jar。我相信我有一个冲突 betsen struts server face 和 jsf。是什么导致了缓存，我不知道，在我清理后它现在消失了。

# javascript - 有什么方法可以减少 rails-backbone(code brew) 包含的 JS 文件的数量？

> ID：11134155
> 
> 赞同：1
> 
> 时间：2012-06-21T08:18:26.287
> 
> 标签：javascript, ruby-on-rails, backbone.js

尝试[“codebrew rails-backbone”的示例用法](https://github.com/codebrew/backbone-rails)，一切正常，但包含的 javascript 文件数量太大。

加载了所有模型、路由器、视图、模板，总共包含 15 个 javascript。

有什么办法可以减少这个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:20:59.317

你可以

1）连接脚本

[2）使用谷歌闭包编译器](https://developers.google.com/closure/compiler/)缩小生成的脚本

这就是我在“makefile”（我使用 ant）中所做的，当我有很多 js 脚本作为这种情况下的主要延迟时，通常是由于请求的数量（脚本的总大小几乎无关紧要，除了在极端的情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:38:57.610

没有理由这样做，它是用导轨开箱即用的。当您的 rails 实例处于开发模式时，您将获得所有单独的 javascript 和 css 文件。当您将其切换到生产环境时，它会被连接并缩小到一个文件中。

看：

[http://guides.rubyonrails.org/asset_pipeline.html#in-production](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

你可以通过做自己看到这一点

```
set RAILS_ENV=production
rails s 
```

# java - 如何动态加载 AttachProvider (attach.dll)

> ID：11134159
> 
> 赞同：5
> 
> 时间：2012-06-21T08:18:40.917
> 
> 标签：java, dll

我正在使用`com.sun.tools.attach`jdk ，它需要在启动时指向`tools.jar`一个指定的env才能正确地设置提供程序，例如. 由于某些原因，我需要动态加载其中一个 bundled 。我尝试使用这样的一些：`java.library.path``attach.dll``WindowsAttachProvider``attach.dll`

```
public static void main(String[] args) throws Exception {
    Path bin = Paths.get(System.getProperty("user.dir"),"bin").toAbsolutePath();
    switch (System.getProperty("os.arch")) {
        case "amd64":
            bin = bin.resolve("win64");
            break;
        default:
            bin = bin.resolve("win32");
    }
    // Dynamic setting of java.library.path only seems not sufficient
    System.setProperty("java.library.path", System.getProperty("java.library.path") + File.pathSeparator + bin.toString());
    // So I try to manual loading attach.dll. This is not sufficient too.
    System.load(bin.resolve("attach.dll").toString());
    // I'm using com.sun.tools.attach in my app
    new myApp();
} 
```

如果我用 jdk 运行它（在正常的 jre 中），它会向我报告：

```
java.util.ServiceConfigurationError: com.sun.tools.attach.spi.AttachProvider:
Provider sun.tools.attach.WindowsAttachProvider could not be instantiated:
java.lang.UnsatisfiedLinkError: no attach in java.library.path
Exception in thread "main" com.sun.tools.attach.AttachNotSupportedException:
no providers installed
    at com.sun.tools.attach.VirtualMachine.attach(... 
```

如何安装附加提供程序而不指定在启动`-Djava.library.path`时指向`attach.dll`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:24:39.827

您正在使用的 API 正在使用[loadLibrary(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#loadLibrary%28java.lang.String%29)。[看来您无法通过首先调用更明确的load(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#load%28java.lang.String%29)来成功地先发制人（使其成功）。

所以你必须在`java.library.path`.

该 System 属性在 JVM 生命周期的早期设置一次，并且不能通过标准方式进行修改。

`java.library.path`因此，传统的解决方案是在启动 JVM 时传递一个适当的。

或者，您可以查看在 JVM 启动后使用反射更改此属性的技巧。我没有尝试过这些。

例如，请参见[此处](http://blog.cedarsoft.com/2010/11/setting-java-library-path-programmatically/)：

```
System.setProperty( "java.library.path", "/path/to/libs" );

Field fieldSysPath = ClassLoader.class.getDeclaredField( "sys_paths" );
fieldSysPath.setAccessible( true );
fieldSysPath.set( null, null ); 
```

顺便说一句，我建议将您的自定义路径预先挂在现有路径中，而不是替换它。

# python - wx Python框架元素在使用sizer显示后未正确显示

> ID：11134169
> 
> 赞同：0
> 
> 时间：2012-06-21T08:19:40.733
> 
> 标签：python, wxpython, sizer

我正在使用 Mac OS X 10.6.8、wxPython 2.9.3.1 和 64 位 Python v2.7.2：

我的问题不是那么容易用几个关键词来描述的，这就是为什么我可能还没有找到解决方案。

我只是用一些对象创建了一个非常简单的 wx.frame 并用 sizer 排列它们。如果我然后显示框架，所有元素都会在彼此的顶部显示一秒钟。然后一切都跳到位并正确显示。

在显示我的框架之前，我尝试调用各种功能，例如 Refresh、wx.Yield、Update 等，但没有任何帮助。

是否有一些功能可以防止框架在正确绘制之前显示或绘制但不显示？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:02:01.660

通常，当我看到这个问题时，只需在调用框架的 Show() 方法之前调用 Layout 即可。我会在顶部尺寸器或框架对象上调用布局。如果这不起作用，请发布一个小的可运行示例，我会更新我的答案。

# html - 获取当前 HTML 代码并创建 PDF

> ID：11134177
> 
> 赞同：1
> 
> 时间：2012-06-21T08:20:08.583
> 
> 标签：html, asp.net-mvc-3, itext, html-table

我正在使用 MVC3 和 iTextSharp。

首先添加了一个保存和创建PDF 按钮。使用 PDF 按钮，我调用了一个方法，该方法返回给我显示网页的实际 HTML 代码。

到目前为止一切顺利，现在我开始使用 iTextSharp 生成 PDF。我想知道，它在第一次尝试时就起作用了，但是在我使用 iTextSharp 添加一个 MVC 网格表之后仍然会创建一个 PDF，但其中有一条错误消息。

*不支持 ERRORURI 格式。*

有什么建议可以让它发挥作用吗？

网格是这样构建的

```
 @Html.DataGridFor(m => m.ConfigurationArticleList, ItemContainerType.tr,
        _S.H<ConfigurationArticle>(
        @<text>         
             <td class="ToDo">
                @item.ValidationMessageFor(m => m.ArtNr, "*")
                @item.TextBoxFor(m => m.ArtNr)
             </td>
             <td class="ToDo">
                @item.ValidationMessageFor(m => m.Bezeichnung, "*")
                @item.TextBoxFor(m => m.Bezeichnung)
             </td>
             <td class="ToDo">
                @item.ValidationMessageFor(m => m.Anzahl, "*")
                @item.TextBoxFor(m => m.Anzahl)
             </td>
        </text>
        ),
         _S.H<ConfigurationArticle>(
        @<text>         
            <td class="ToDo">
                @item.ValidationMessageFor(m => m.ArtNr, "*")
                @item.DisplayField(m => m.ArtNr)
            </td>
            <td class="editor-field">
                @item.ValidationMessageFor(m => m.Bezeichnung, "*")
                @item.DisplayField(m => m.Bezeichnung)
            </td>
            <td class="ToDo">
                @item.ValidationMessageFor(m => m.Anzahl, "*")
                @item.DisplayField(m => m.Anzahl)
            </td>
        </text> 
```

此外，PDF 的 FilePath 仍然是硬编码的，有什么想法可以获得 SaveFile-Dialog 或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:49:57.320

ABCpdf - 是做更多事情的好工具。我们确实更喜欢在我们的项目中使用它，并且它可以毫无问题地工作。[ABCpdf](http://www.abcpdf.com/abcpdf-1.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:47:27.463

我建议您使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)而不是 ITextSharp。它是一个使用 web kit 渲染引擎的开源可执行文件。它产生非常好的pdf输出。如果您想从 mvc 网站使用它，则可以使用以下代码运行它：

```
var procStartInfo = new ProcessStartInfo("wkhtmltopdf.exe", "input.html output.pdf");
procStartInfo.RedirectStandardOutput = true;
procStartInfo.UseShellExecute = false;
procStartInfo.CreateNoWindow = true;
Process proc = new Process();
proc.StartInfo = procStartInfo;
proc.Start(); 
```

它将在您的服务器文件系统上创建输出，但您可以轻松读取它并写入 http 响应。

```
Response.ContentType = "Application/pdf";
Response.AddHeader("Content-Type", "application/pdf");
Response.AddHeader("Content-Disposition", "attachment; filename=output.pdf");
string filePath = "output.pdf";
Response.WriteFile(filePath);
Response.End(); 
```

# sql-server-2005 - 基于记录值的 SQL Server 查询

> ID：11134179
> 
> 赞同：1
> 
> 时间：2012-06-21T08:20:14.167
> 
> 标签：sql-server-2005

我有以下数据结构：

```
P_ID    EVSSMIN EVSSMAX TDMIN   TDMAX   WARD    SYRINGE_ID   COMBINE_WITH   CUSTOM_CONCENTRATION
1003    0   20  125 250 2ZKG    1021038
    44444444    5
1003    20  60  125 250 2ZKG    1021037
    44444444    5 
```

通常我使用以下查询来获取结果。

[问题 1]

```
SELECT * 
FROM [definities] 
WHERE 160 BETWEEN [TDMIN] AND [TDMAX] AND [WARD] = '2ZKG' AND [P_ID]=` 1003; 
```

表中的最后一列可以包含大于 0 的值。高于 5。

通常我想运行下面的查询而不是上面的查询。

[问题 2]

```
SELECT * FROM [definities] 
WHERE 160 BETWEEN [TDMIN] AND [TDMAX] 
AND CAST(160 as decimal) / [CUSTOM_CONCENTRATION]) BETWEEN EVSSMIN AND EVSMAX 
AND [WARD] = '2ZKG' -- AND [P_ID]= 1003; 
```

如您所见，查询通过将其除以 [CUSTOM_CONCENTRATION]) 值来计算值 160。然后它在 EVVSMIN 和 EVSSMAX 之间匹配，并且值 160 在 TDMIN 和 TDMAX 之间匹配。通常，当 [CUSTOM_CONCENTRATION] 列包含大于 0 的值时，查询 2 将正常工作。

问题是当 [CUSTOM_CONCENTRATION] 列不包含高于 0 的值时，查询无法返回记录。这意味着必须更改查询或基于 [CUSTOM_CONCENTRATION] 值的某些内容。我可以在 C# 代码中解决这个问题，但巧妙的方法是能够将其作为一个查询来执行，该查询根据值返回我的确切记录，而不是我需要迭代并使用 if 语句检查它的多个记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:34:57.173

`[CUSTOM_CONCENTRATION]`假设您在值为零或更低时想要第一个查询，否则第二个查询，您可以[`UNION ALL`](http://msdn.microsoft.com/en-us/library/ms180026.aspx)对两个查询使用带有另一个限制的 a：

```
SELECT * FROM [definities] 
WHERE 160 BETWEEN [TDMIN] AND [TDMAX] AND [WARD] = '2ZKG' AND [P_ID]=` 1003
AND [CUSTOM_CONCENTRATION] <= 0

UNION ALL

SELECT * FROM [definities] 
WHERE 160 BETWEEN [TDMIN] AND [TDMAX] 
AND CAST(160 as decimal) / [CUSTOM_CONCENTRATION]) BETWEEN EVSSMIN AND EVSMAX 
AND [WARD] = '2ZKG' -- AND [P_ID]= 1003
AND [CUSTOM_CONCENTRATION] > 0; 
```

* * *

另一种解决方案，更优雅的解决方案是：

```
SELECT * FROM [definities] 
WHERE 160 BETWEEN [TDMIN] AND [TDMAX] AND [WARD] = '2ZKG'
AND (([P_ID]=` 1003
      AND [CUSTOM_CONCENTRATION] <= 0)
     OR
     (CAST(160 as decimal) / [CUSTOM_CONCENTRATION]) BETWEEN EVSSMIN AND EVSMAX
      AND AND [CUSTOM_CONCENTRATION] > 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:38:09.267

也许是这样的：

```
SELECT * FROM [definities] WHERE 160 BETWEEN [TDMIN] AND [TDMAX] AND
 ( case when [CUSTOM_CONCENTRATION] = 0 then EVSSMIN 
         else CAST(160 as decimal) / [CUSTOM_CONCENTRATION]) end
            BETWEEN EVSSMIN AND EVSMAX )
         AND [WARD] = '2ZKG' 
```

# apache-flex - Maven flex，集成多个模块，弹出flash错误：VerifyError: Error #1014: Class mx.controls::List could not be found

> ID：11134180
> 
> 赞同：0
> 
> 时间：2012-06-21T08:20:26.023
> 
> 标签：apache-flex, maven, module, external

我有 4 个 flex 项目，3 个是模块，1 个是应用程序。用Flash Builder编译这些项目，集成运行，就ok了。但是当我编译这些使用 maven 脚本（Flex SDK 合并到代码中）。集成并运行时，弹出错误：VerifyError: Error #1014: Class mx.controls::List could not be found。

有人说是因为库是作为外部加载的。那是playerglobal.swc？？？但是在我像这样更改我的 pom.xml 之后，似乎没有任何改变。

```
<dependency>
          <groupId>com.adobe.flex.framework</groupId>
          <artifactId>playerglobal</artifactId>
          <version>${flex.sdk.version}</version>
          <type>rb.swc</type>
          <classifier>en_US</classifier>
          <scope>external</scope>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:24:28.743

您是否添加了所有 Flex 依赖项？您的模块是否使用具有外部作用域的 Flex SDK？如果是这样，您的应用程序（我假设加载这些模块）是否包含这些类？

当您在模块 A 中使用 List 并且 SDK 在外部范围内时，模块 A 期望 List 在应用程序运行时可用。如果您不将 List 编译到应用程序中（如在应用程序中使用 List），那么模块 A 将抱怨缺少 List 类。

这就是 Adob​​e 决定处理 SWF 优化的方式 :( 未在应用程序或模块中使用的类不会编译成生成的 SWF。

# bash - 在 shell 脚本中看到别名的替代方法

> ID：11134183
> 
> 赞同：0
> 
> 时间：2012-06-21T08:20:41.510
> 
> 标签：bash, shell, alias

我已经设置`.bashrc`了一些别名，我需要在**无法修改**的 shell 脚本中看到这些别名。

所以，只要我不能在该脚本中扩展别名，我还有什么选择？

*（例如，我需要定义`python2.6`为与 相同`python`）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:09:06.353

定义和导出函数而不是使用别名。

假设您的脚本`mv`不使用`-i`or`-v`并且您想添加它们，但无法修改脚本。

```
function mv () { command mv -iv "$@"; }
export -f mv 
```

现在您的脚本将使用这些选项。您可以从命令行或包装脚本中定义函数。

[Bash 手册](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC85)说： “对于几乎所有目的，shell 函数都比别名更受欢迎。”

编写良好的脚本使用可执行文件的绝对路径（例如`/bin/mv`）。这样做会阻止此技术发挥作用，并且是良好的安全实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:31:36.053

如果可以包装脚本，则可以在包装器中定义别名，并在脚本中定义源 ( `. /path/to/script`)。函数和别名都应该以这种方式工作。

如果不能，则必须将命令放在 PATH 中。作为符号链接或脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:40:51.207

Bash 函数比别名更通用，并且可以用于相同的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:32:13.323

有一个扩展别名的 shell 选项：`shopt -s expand_aliases`，但是由于某种原因它被关闭了 - shell 脚本中的别名是支持的噩梦。另一种方法是使用完整的命令，建议使用。

# c++ - 处理分配更改回调中的警告

> ID：11134184
> 
> 赞同：0
> 
> 时间：2012-06-21T08:20:45.257
> 
> 标签：c++, c, user-interface, gtk3, clutter

我有一个杂乱警告我无法摆脱。

在我的项目中，我有一个自定义布局，由几个 ClutterConstraint(s) 构建，它处理几个 ClutterBox(es)。

其中一个 ClutterBox 包含许多 ClutterTexture，并以手工布局放置在其中。为了获得那个（手工布局），我曾经`g_signal_connect`连接过*“allocation-changed”*通知，在他的回调中我写了所有的放置逻辑。

运行时出现的警告是`"Clutter-WARNING **: The actor 'ClutterBox' is currently inside an allocation cycle; calling clutter_actor_queue_relayout() is not recommended"`.

有人可以建议我如何避免这个警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:43:32.380

您不能在分配其父项期间通过分配更改信号更改子项的分配 - 即您不能在分配父项期间在 allocate() 虚函数之外更改子项的大小或位置。

如果要为容器实现布局管理策略，则必须对容器进行子类化并覆盖其 allocate() 虚函数；或者，您应该实现一个 ClutterLayoutManager，并将其分配给 actor。

ClutterBox 在 Clutter 1.10 中也已被弃用：ClutterActor 现在为实现布局管理策略所需的委托提供完整的 API 和支持。

# actionscript-3 - 从声音文件的中间加载音轨

> ID：11134187
> 
> 赞同：0
> 
> 时间：2012-06-21T08:20:55.317
> 
> 标签：actionscript-3, air, airplay

当用户尝试在 youtube 上观看剪辑时，在播放器上，他们可以选择从剪辑中间或开头或从接近结尾或从他们喜欢的任何点观看。换句话说，他们不应该从头到尾观看剪辑，他们可以自由单击时间线的任何部分并从他们希望的位置观看剪辑。

我有 mp3 格式的声音文件，我希望我的用户可以在时间线上的任何地方收听他们希望的声音，在音轨的开头、中间或任何部分。

请给我提意见。我怎样才能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:43:13.440

你真的应该在问这里之前查看文档。

此答案来自[此处找到的文档](http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7cf8.html)

```
var req = new air.URLRequest("soundFile.mp3"); 
var snd = new Sound(req); 
snd.play(); //plays a sound file from the beginning

var start:Number=5 * 1000; //5 seconds
var loop:int=1;
snd.play(start, loop); //Play sound from start milliseconds, loop time 
```

# android - 在活动和片段之间传递数据或行为

> ID：11134188
> 
> 赞同：3
> 
> 时间：2012-06-21T08:20:59.363
> 
> 标签：android, android-activity, fragment

我有这个结构：

活动 A 有一个 ViewPager。ViewPager 的页面称为片段。

活动 A 有一个复杂对象的列表，我想在页面中显示这些对象。

当用户单击 ViewPager 活动 B 中的项目时，必须启动。活动 B 还需要包含复杂对象的列表。

所以我必须通过这个列表

A -> 片段 -> B

首先，我发现无法使用片段的构造函数将数据传递给它。我必须使用可打包或可序列化的。在片段中，我必须再次打包或序列化以传递给 B。

但我不想序列化或打包整个复杂数据列表 2 次，只是为了将其传递给 B。

我想避免使用静态字段。

然后我想到将一个侦听器传递给片段，该片段侦听项目点击，并通知我的活动 A 和活动 A，然后使用数据启动活动 B。这对我来说看起来最干净，因为 A 实际上是数据所属的，所以 A 从数据开始片段，片段回到 A，然后 A 从数据开始 B。我不必到处传递数据（序列化！）。

但这似乎不起作用，因为如何使用序列化将侦听器传递给片段？在片段中使用监听器返回活动有什么问题？

我该如何解决这个问题？

编辑

我在关于对话片段的线程中找到了这个解决方案：[Get data back from a fragment dialog - best practice?](https://stackoverflow.com/questions/9776088/get-data-back-from-a-fragment-dialog-best-practices)

```
@Override
public void onAttach(Activity activity) {
super.onAttach(activity);
try {
    mListener = (OnArticleSelectedListener) activity;
} catch (ClassCastException e) {
    throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
}
} 
```

所以我将它添加到我的片段中并让我的活动实现某些接口。

这将解决将数据从片段传递到 B 的问题。但我仍然需要将列表从 A 传递到片段。可能我将不得不使用 Parcelable ......

**编辑**：我试过**Parcelable**，它有效。但是我列表中的对象有很多字段，它们之间也有映射，例如。编写 Parcelable 代码（写/读）是一种**痛苦**。也许我只是坚持静态数据......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:29:33.250

您找到的侦听器解决方案非常出色，实际上是 Google 推荐的 ( [http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html) )。

至于将数据传递给片段的剩余问题，您确定需要传递整个列表，而不仅仅是 ViewPager 中每个片段的列表元素吗？如果你只需要一个元素，你可以这样做：

```
 /*
     * An adapter for swiping through the fragments we have.
     */
    private class CustomPagerAdapter extends FragmentStatePagerAdapter {

        List<Thing> things;

        public CustomPagerAdapter(FragmentManager fragmentManager, List<Thing> things) {
            super(fragmentManager);
            this.things = things;
        }

        @Override
        public int getCount() {
            return things.size();
        }

        @Override
        public Fragment getItem(int position) {
            return ThingFragment.newInstance(things.get(position));
        }
    }

    /*
     * Loads a view based on the thing.
     */
    private static class ThingFragment extends Fragment {

        private String name;

        static ThingFragment newInstance(Thing thing) {

            ThingFragment f = new ThingFragment();

            // add some arguments to our fragment for onCreateView
            Bundle args = new Bundle();
            args.putString("name", thing.getName());
            f.setArguments(args);

            return f;
        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            name = getArguments().getString("name");
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

            View v = inflater.inflate(R.layout.thing_fragment_layout, container, false);
                    TextView t = (TextView)v.findViewById(R.id.thingText);
            t.setText(name);
            return v;
        }
    } 
```

并将您的列表传递给适配器。当然，这需要动态创建动态，但是膨胀 xml 片段确实很容易。

如果您确实需要传递整个列表，是的，您可能必须将单个复杂对象设为 Parcelable，然后像使用 Bundle.putParcelableArray() 一样将其添加到 Fragment args。

# java - 为什么 Spring 不将我的 @Autowired 成员连接到依赖 jar 中？

> ID：11134201
> 
> 赞同：6
> 
> 时间：2012-06-21T08:21:44.100
> 
> 标签：java, spring, google-app-engine, ioc-container

我正在使用 Spring 3.1 构建一个 Google App Engine 应用程序，并且在将成员连接到我的一个 jar 中时遇到问题。

我有三个项目：

1.  `server`
2.  `server.model`
3.  `server.persistence`

我有一个 ant 构建脚本，因此当我的工作区构建时，它会为`server.model`and创建 jar `server.persistence`，并将它们放在`server`项目的正确 lib 目录中。

在中，我可以从和`server`中自动连接东西，但是在我的bean 中，即使它们与 中的完全相同，也没有连接。 `server.model``server.persistence``server.model``server.persistence``server`

我的 servlet 应用程序配置中的片段：

```
<context:component-scan base-package="com.impersonal.server"/>          

<bean autowire="byType" id="appEngineDataStore" class="com.impersonal.server.persistance.AppEngineDataStore"/>

<bean autowire="byType" id="userList" class="com.impersonal.server.model.UserList"/> 
```

`server`我在项目和项目中都有以下代码`server.model`，只有服务器一个得到满足。这是失败的一个：

```
package com.impersonal.server.model;

import java.util.ArrayList;
import java.util.UUID;

import org.springframework.beans.factory.annotation.Autowired;

import com.impersonal.server.persistance.AppEngineDataStore;
import com.impersonal.server.persistance.IDataStore;

public class UserList extends ArrayList<User>
{
    private UserList(){}

//this is always null, but the same line in a class in the other project works
private @Autowired AppEngineDataStore _dataStore;

public UserList(UUID userId, String tempId)
{
    String poo = "poo";
    poo.concat("foo ");

    int i = 3;
}
} 
```

**编辑：** 刚刚在`server.model`项目中做了一个测试，试图@Autowired 一些我没有在我的应用程序配置中定义为 bean 的东西，并且没有得到任何错误。如果我为项目做同样的事情，我应该得到一个“没有找到这样的 bean”错误`server`。

任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:16:09.520

我错误地实例化了我的对象。对于框架对象和诸如 MVC 控制器之类的对象，您无需执行任何操作即可连接您的 @Autowired 成员。

对于我动态创建的对象，我没有通过 IOC 容器，这就是为什么它们的依赖关系没有得到满足。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T12:52:45.513

`<context:component-scan/>`tag 搜索带注释的类。

如果您要使用`@Autowire`注释自动装配类，则应该使用构造型注释（@Component、@Controller、@Service、@Repository）之一对自动装配类进行注释。Spring首先解析注解配置，然后解析xml配置。这是在spring doc中写的

> 注解注入在 XML 注入之前执行，因此后一种配置将覆盖前一种配置，用于通过两种方法连接的属性。

检查[spring doc](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-annotation-config)上的证明。

因此，您需要做的是为`server`项目中的类以及`server.model`. 在您的第三个项目中也是如此`server.persistence`。根据层或功能添加注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:42:10.100

尝试：

```
@Autowired(required = true)
private AppEngineDataStore _dataStore; 
```

代替：

```
private @Autowired AppEngineDataStore _dataStore; 
```

**编辑1：**

在使用上面的自动装配时，在你的 spring xml 中，尝试：

```
<bean id="appEngineDataStore" class="com.impersonal.server.persistance.AppEngineDataStore" scope="prototype"></bean> 
```

代替：

```
<bean autowire="byType" id="appEngineDataStore" class="com.impersonal.server.persistance.AppEngineDataStore"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:05:04.443

`autowire`在 xml 中意味着稍微不同的东西。您可以将其注释为 ，而不是在 xml 中定义您的 bean `@Service`，它将被组件扫描发现并且`@Autowired`将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T09:10:42.337

在您的 xml 配置中，使用`autowire-candidate`属性

```
<bean autowire="byType" id="appEngineDataStore" class="com.impersonal.server.persistance.AppEngineDataStore" autowire-candidate="true" /> 
```

# ruby-on-rails - net-sftp ruby ，上传文件错误

> ID：11134204
> 
> 赞同：0
> 
> 时间：2012-06-21T08:21:57.300
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sftp, net-sftp

我有一个安装了 net-sftp gem 的 rails 3.2.2 应用程序。

我创建了一个简单的控制器来测试将文件上传到远程 sftp 的最基本功能。

这是我的控制器：

```
class UploadsController < ApplicationController
  require 'net/sftp'

  def upload
    Net::SFTP.start('host', 'root', :password => 'password') do |sftp|
      @sftp = sftp # I've got a session object so that seems to work

      # upload a file or directory to the remote host
      sftp.upload!("/Users/kensodev/Desktop/ashrit.xml", "/domains/inbar-paz.com/html/test/ashrit.xml")
    end
  end
end 
```

当我访问“localhost:3000/uploads/upload”路径时，我收到此错误：

```
Net::SFTP::StatusException open /domains/inbar-paz.com/html/test/ashrit.xml (2, "no such file") 
```

也许我弄错了路径？

感谢您尝试提供帮助 :) Paz。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:19:59.960

此路径“/domains/inbar-paz.com/html/test/”中的目录之一不存在。

# python - python中的多行列表理解

> ID：11134206
> 
> 赞同：5
> 
> 时间：2012-06-21T08:22:10.977
> 
> 标签：python, list

如何在 Python 中进行多行列表理解？就像是：

```
[
  x for x in a:
    if check(x):
      ....
      #something multiline here
      ....
    else: 
      ....
      #something multiline here
      ....
] 
```

当然我知道我可以这样做：

```
def f(x):
  if check(x):
     ....
  else: 
     ....
 return x

map(a,f) 
```

但我想要它没有额外的功能。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:26:27.993

我的理解是你不能按照你的建议去做。

与您建议的相比，当您命名函数并使用列表理解或映射函数时，它的可读性要高得多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:26:34.773

你不能，以你的想法；列表推导只能包含表达式，不能包含语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T04:52:41.963

您可以有多行列表推导，并且可以`if`在其中包含语句，但是语法与您显示的不同。我刚刚在解释器中测试了这个：

```
>>> tuple = ('a','b','c','d','e','f','g','h','i','j')
>>> list = [letter for letter in tuple
...         if (letter != 'a' and letter != 'b')]
>>> list
['c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'] 
```

你也可以用其他方式破坏它，但代码会有点混乱：

```
>>> list = [letter for letter in
...     tuple if (letter != 'j' and letter != 'i')]
>>> list
['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'] 
```

正如其他人指出的那样，您可能不会使用`else`语句（无法使其在这里工作）。此外，如果列表理解开始增长太多，它就会失去简洁性（我认为这是最强点）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-25T03:20:32.450

当然，您可以执行多个嵌套列表推导。我一直都这样做。这是一个例子：

```
 A=[[[10 for y in range(3)],2][x<=3] for x in range(7)]
    print A 
```

它生成一个包含 4 乘以 2 的列表和三个以 3 乘以 10 作为元素的子列表。

```
 [2, 2, 2, 2, [10, 10, 10], [10, 10, 10], [10, 10, 10]] 
```

如您所见，外部列表推导生成外部列表的 6 个元素，内部（第一个）列表推导生成内部 10 或 2，具体取决于 x 是否小于或等于 3。

# ruby-on-rails-3.2 - 让上帝、resque 和 log4r 协同工作

> ID：11134209
> 
> 赞同：1
> 
> 时间：2012-06-21T08:22:24.563
> 
> 标签：ruby-on-rails-3.2, resque, god

我正在使用上帝来管理我的 resque 工人。我还在我的 Rails 应用程序和 resque 工作中使用 log4r，直到我设置上帝。

我如何让上帝在我的 resque 工人上与 log4r 玩得很好？如果我没有在手表上设置日志属性，我就不会得到任何日志记录。但是，如果我明确设置它，那么我将无法从 log4r 的滚动日志中受益。

帮助任何人？

# css - Rails 用户站点自定义选项表单更改 CSS？

> ID：11134212
> 
> 赞同：0
> 
> 时间：2012-06-21T08:22:29.033
> 
> 标签：css, ruby-on-rails, forms, subdomain, customization

我目前正在开发一个简单的 Web 应用程序，其中每个用户都有自己的站点和自己的子域。

我想给每个用户一个设置面板，他们有一个表单，可以只为他们的站点更改一些简单的 css 属性。

我正在考虑使用 jquery 和颜色选择器来更改元素颜色的简单表单。但是，每个用户可能都必须拥有自己的样式表吗？（没有完全访问它的权限，只是为了使该站点的属性是唯一的。）

我不完全确定如何将所有这些放在一起。

如果有人有想法，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:35:38.467

也许这个网站会帮助你入门。

[http://www.thesitewizard.com/javascripts/change-style-sheets.shtml](http://www.thesitewizard.com/javascripts/change-style-sheets.shtml)

也看到这个。

[http://www.thesitewizard.com/css/switch-alternate-css-styles.shtml](http://www.thesitewizard.com/css/switch-alternate-css-styles.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:46:15.010

最容易实现的是在布局的 html-head 部分生成可定制的 css 语句，而不是在单独的 css 文件中。这样您也不必考虑缓存问题。

当然这不是最可扩展的方法，因为 css 是为每个页面编写的。但首先让它工作，而不是让它快速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:41:28.053

好的，所以我找到的答案很简单。

为了更改背景颜色`:string`，我在`sites`表中添加了一个名为`bgcolor`.

然后，我将新输入添加到我的简单表单中 - 在站点的新视图和编辑视图中。

最后，我在用于用户站点的**布局**`<style>`中添加了一个内联块

 **```
<style type="text/css">

  body{ background-color: <%= @site.bgcolor %>;}

</style> 
```

我想定制的所有其他东西都是一样的。一切似乎都奏效了。为 ERB 取胜。**

# windows-phone-7 - 视窗电话 8

> ID：11134217
> 
> 赞同：-2
> 
> 时间：2012-06-21T08:22:51.863
> 
> 标签：windows-phone-7, windows-phone-8

我读到 Windows wp8 允许使用本机代码。那么如何让诸如愤怒的小鸟之类的端口在 wp7 上运行。有什么不同？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:27:09.050

首先，NDK 在 WP8 之前可用，但仅适用于特殊公司。WP8 原生代码正式可用。

第二，XNA ?

# php - 在 /usr 下找不到 libmysqlclient。在 Ubuntu 12.4 上从源代码构建 PHP 5.2

> ID：11134220
> 
> 赞同：13
> 
> 时间：2012-06-21T08:23:12.980
> 
> 标签：php, ubuntu, installation

我试图使用此配置`PHP 5.2.17`从源代码构建：`Ubuntu 12.4 64bit`

```
./configure --prefix=/opt/php5.2 --with-config-file-path=/opt/php5.2 --with-mysql 
```

但我不断收到此错误：

```
configure: error: Cannot find libmysqlclient under /usr.
Note that the MySQL client library is not bundled anymore! 
```

任何想法如何解决这个问题？

EDIT1：我最小化了配置命令，所以它只关注mysql。我也在运行 64 位版本的 ubuntu。

EDIT2：尝试运行`ldconfig -v |grep mysql`，这是输出

```
# ldconfig -v |grep mysql
/sbin/ldconfig.real: Path `/lib/x86_64-linux-gnu' given more than once
/sbin/ldconfig.real: Path `/usr/lib/x86_64-linux-gnu' given more than once
/sbin/ldconfig.real: Cannot stat /usr/lib/x86_64-linux-gnu/libnss_db.so: No such file or directory
libmysqlclient.so.18 -> libmysqlclient_r.so.18.0.0
libmysqlpp.so.3 -> libmysqlpp.so.3.1.0 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-21T09:16:45.987

感谢@hakre 的帮助。这是我使用的命令，它有效：

```
sudo ./configure --prefix=/opt/php5.2 --with-config-file-path=/opt/php5.2 --with-mysql --with-libdir=/lib/x86_64-linux-gnu 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-08T13:24:47.840

也许对于一些可怜的灵魂来说，这会起作用：

./configure --with-apxs2=/usr/sbin/apxs --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd

# iphone - 在 iOS 中显示矩阵？

> ID：11134223
> 
> 赞同：0
> 
> 时间：2012-06-21T08:23:24.570
> 
> 标签：iphone, ios, matrix, quartz-graphics, quartz-2d

我有一个 1 和 0 的矩阵，我需要一种以图形方式显示该矩阵的方法。例如，我发现每 1 在 UIScrollView 中绘制一个点。我正在尝试使用 Quartz 2D 之类的东西

```
CGContextSetStrokeColor(c, blue);
CGContextBeginPath(c);
CGContextMoveToPoint(c, 0.0f, 0.0f);
CGContextAddLineToPoint(c, 1.0f, 1.0f); 
```

看起来它正在工作，但我不确定是否是正确的方法。首先考虑到矩阵非常非常大（实际上我只是在尝试小例子），我需要移动和放大/缩小以查看所有画作。

谢谢。

# jquery - 之间 和 在jQuery之前

> ID：11134228
> 
> 赞同：1
> 
> 时间：2012-06-21T08:23:53.493
> 
> 标签：jquery, jquery-ui, jquery-plugins

我有以下代码

```
 <div class="hitarea expandable-hitarea"></div>
<span class="folder">level 1</span>
<ul style="display: none;"> 
```

我想添加元素

*   跨越。所以结果是

    ```
     <div class="hitarea expandable-hitarea"></div>
    <li><span class="folder">level 1</span></li>
    <ul style="display: none;"> 
    ```

    我在 javascript 变量中有 1 级。所以我不能直接使用选择器。

    谁能告诉我上面的表现如何。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:26:00.420

您可以使用 jQuery [`wrap`](http://api.jquery.com/wrap)：

```
$( '.folder' ).wrap( '<li />' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:26:09.687

您可以[`.wrap`](http://api.jquery.com/wrap/)使用`.folder`. 前任，

```
$("span.folder").wrap("<li>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:26:20.527

标记将是错误的，但您可以在-selector上运行 jquery[`.wrap`](http://api.jquery.com/wrap)方法：`.folder`

```
$(".folder").wrap("<li>"); 
```

# c# - 如何在 EntityDataModel 的部分类中修改对象的值

> ID：11134229
> 
> 赞同：2
> 
> 时间：2012-06-21T08:23:53.367
> 
> 标签：c#, entity-framework, partial-methods

我有一个从我的数据库（Visual Studio 2010、asp.net 4.0、c#）生成的 EntityDataModel。我正在尝试使用与实体类关联的部分类来执行一些业务逻辑（在这种情况下，检查电话号码字段并删除空格）。

如果我使用类似的东西：

```
 partial void OnMobilePhoneNoChanged()  
    {  
        if (MobilePhoneNo != null)  
        {  
            MobilePhoneNo = ATG_COModel_Common.FormatPhoneNumber(MobilePhoneNo);  
        }  
    } 
```

然后我最终得到一个无限循环（因为我的 FormatPhoneNumber 方法修改了 MobilePHoneNo 再次引发事件等），然后我得到......堆栈溢出！

当我尝试改用 OnMobilePhoneNoChanging 并修改 MobilePHoneNo 属性（或`value`值）时，该值未正确保存。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:49:21.737

查看您的模型`.Designer.cs`文件。你会看到这样的东西：

```
 /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=false, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.String MobilePhoneNo 
    {
        get
        {
            return _MobilePhoneNo;
        }
        set
        {
            OnMobilePhoneNoChanging(value);
            ReportPropertyChanging("MobilePhoneNo");
            _MobilePhoneNo = StructuralObject.SetValidValue(value, false);
            ReportPropertyChanged("MobilePhoneNo");
            OnMobilePhoneNoChanged();
        }
    }
    private global::System.String _MobilePhoneNo;
    partial void OnMobilePhoneNoChanging(global::System.String value);
    partial void OnMobilePhoneNoChanged(); 
```

Notice that as well as the partial `Changing` and `Changed` methods you already know about, **there's a backing field**. Because your code is in a partial piece **of the class**, you have access to all members, including the private ones. So you can implement the partial `Changed` method, and directly alter `_MobilePhoneNo`:

```
partial void OnMobilePhoneNoChanged()  
{  
    if (_MobilePhoneNo != null)  
    {  
        _MobilePhoneNo = ATG_COModel_Common.FormatPhoneNumber(_MobilePhoneNo);  
    }  
} 
```

which is what you want.

# java - 在 jgrid 上显示下拉列表框选项

> ID：11134230
> 
> 赞同：0
> 
> 时间：2012-06-21T08:24:05.540
> 
> 标签：java, jquery

我有一个下拉列表框，我在其中显示带有 gmt 小时的时区。
现在我想在 Jgrid 中显示这个选项。可能吗？

```
for(..)
{

<option value=<%=tzone.getTimeZoneID() %> > <%=tzone.getTimeZoneName() %>  </option>

} 
```

在 js 文件中，我使用

```
 var timeZone = $("#backDropDownTimezone").val(); 
```

因此只显示 id 但我想显示时区名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:17:36.857

你可以试试这个

```
var timeZone=$("#backDropDownTimezone").text() 
```

# c# - 在 foreach 循环内部和外部调用 SaveChanges() 有什么区别？

> ID：11134232
> 
> 赞同：15
> 
> 时间：2012-06-21T08:24:15.057
> 
> 标签：c#, entity-framework

假设对循环内的 EF 实体进行了更改，在 foreach 循环或循环外调用 EF SaveChanges() 之间是否存在任何性能优势/技术差异？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-21T08:27:42.960

**是的！**

**如果您在循环中调用它，EF 将为每个实体**写回对数据库的更改（并且每个实体都将在其自己的单独事务中）。

反过来，您将进行所有更改，EF 将在循环后**一次将它们全部**写回（在所有实体的单个事务中）。

作为一般经验法则（实际上没有看到您的代码），尽量减少**调用`.SaveChanges()`**次数。

一次调用 50 次更改通常比 50 次调用每次更改 1 次要好得多/更快/更有效率。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-10T15:42:48.980

另一个要说明的是，假设您的 foreach 循环在 DbContext 中处于活动状态的 EntitySet 上，您将获得 System.Data.SqlClient.SqlException：另一个线程正在会话中运行。

这是因为 foreach 实际上在另一个线程中运行，并且不允许事务完成。

除了上面提到的交易越少越好。

假设您有一个上下文数据库并执行以下操作：

```
var groups = from i in db.items select i.GroupNumber;
foreach( var grp in groups)
{
    //... do something
    db.SaveChanges();
} 
```

这将抛出异常

避免这种情况的解决方案（如果合适！！）是通过将第一行更改为：

```
var groups = (from i in db.items select i.GroupNumber).ToList(); 
```

这将允许您保存在 foreach 中（如果需要）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T08:27:18.803

在循环之外，将只创建一个事务来更新数据库，而另一个为每次迭代创建一个事务。因为 EF 使用工作单元模式，它将所有更改保存在内存中，并且在 SaveChanges 方法中，它保存了您对数据库所做的所有更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:28:21.527

性能会有所**不同**，在循环内，您将在每次迭代时调用数据库。在循环之外，您将调用数据库一次。根据您的迭代次数，这可能会在性能上产生巨大差异。

# android - 在android imageview中旋转图像

> ID：11134236
> 
> 赞同：0
> 
> 时间：2012-06-21T08:24:28.597
> 
> 标签：android, image, rotation

我想构建一个应用程序，我有一个通过（ImageView）显示的图像。和应用程序中的文本框。我想每秒钟将图像连续旋转大约 10 度。当图像旋转时，文本框应显示图像旋转的次数。我尝试旋转图像，但每次应用程序崩溃或不显示在屏幕上。

有人可以帮我写代码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:31:26.630

使用此代码创建动画旅馆 res/anim

```
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:duration="36000" /> 
```

在您的活动中：

```
Animation rotate = AnimationUtils.loadAnimation(this, R.anim.rotate);
findViewById(R.id.yourImageId).startAnimation(rotate);
rotate.reset();
rotate.start(); 
```

# objective-c - Instruments 中的内存分配过多是否不好？

> ID：11134237
> 
> 赞同：1
> 
> 时间：2012-06-21T08:24:35.613
> 
> 标签：objective-c, ios, memory, memory-management, instruments

我在玩乐器。而且我刚刚记录/分析了内存泄漏，我几乎没有内存泄漏，但是即使我的应用程序刚刚打开，大量的分配也会继续进行。这是使用该应用程序不到 10 秒后的屏幕截图。

![10秒后？？？](../Images/05e9b1be6595e47e6356deea8bee70d9.png)

随着我继续使用该应用程序，它只会不断增加和增加。

最奇怪的部分是大多数分配来自我不知道的类，例如：

基础

高度

lbdispatch.dylib

但它可能来自 SBJson 和我为 JSon 和 XML 导入和添加的其他类。

但这是很多内存分配吗？太坏了？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:29:30.670

是也不是，这取决于你在做什么，如果你分配了很多字符串，假设你分配了 1000 个字符串，这些分配本身还不错，但这取决于你的应用程序的逻辑视图，如果你真的需要一次所有字符串，您需要在应用程序的所有步骤中分配并激活它们，然后您无事可做，您的应用程序只需要大量内存，

但是另一方面，您可能会找到一些其他方法来逻辑地构建应用程序，例如，您只能在需要时分配 1000 个字符串中的每一个。

一个非常抽象的答案是，如果您的应用程序需要大量内存并且无法使用某些技术（例如延迟加载或缓存），那么您没有任何其他解决方案

但是，如果您可以重组您的应用程序以使用延迟加载、缓存、分配池，那就更好了

请注意：您可以让 iOS sdk 帮助您，通过在您的应用程序中正确实现内存警告回调，这样每当您收到警告时，您就开始释放您当前不需要的任何资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:09:23.063

另外，你有僵尸吗？僵尸默认不会真正删除任何分配，因此永远不会释放内存。始终在关闭 Zombies 的情况下测试内存泄漏。

# android - 在 xml 布局中使用 android MediaController

> ID：11134243
> 
> 赞同：1
> 
> 时间：2012-06-21T08:25:12.060
> 
> 标签：android, xml, mediacontroller

当我转到 main.xml 文件并将 MediaController 添加到布局时，我只有以下选项：

```
 <MediaController
    android:id="@+id/mediaController1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

将声音路径放入其中没有任何价值所有教程都显示了如何在代码中而不是在 xml 中进行操作，并且我了解到 xml 更好我错过了什么？我已经在项目文件夹中有声音了。

Eclipse，android API 级别 3，fedora linux 16，

对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:53:08.260

听起来你错过了相当大的一块拼图。MediaController 不关心您要播放的媒体的路径。这是您将提供给 MediaPlayer 类的内容，然后您将使用 setMediaPlayer 方法将其与您的 MediaController 相关联。

[http://developer.android.com/reference/android/widget/MediaController.html#setMediaPlayer(android.widget.MediaController.MediaPlayerControl](http://developer.android.com/reference/android/widget/MediaController.html#setMediaPlayer(android.widget.MediaController.MediaPlayerControl) )

长话短说，您将无法仅使用 XML 播放媒体。

# java - 用 java 正则表达式替换

> ID：11134245
> 
> 赞同：0
> 
> 时间：2012-06-21T08:25:15.727
> 
> 标签：java, regex

```
String str = "abcde123_92qwq_1a_02x_1e"; 
```

我想用 0（零）替换前两个下划线（ **92qwq ）之间的第一个字符串部分。**我怎样才能用正则表达式做到这一点？

例如：
“abcde123_ **92qwq** _1a_02x_1e”变为“abcde123_ **0** _1a_02x_1e”
“abcde123_sdet4 **_1a_02x_1e** ”变为“abcde123_ **0** _1a_02x_1e”

我是正则表达式的新手，我尝试了一些。但我的情况有点紧急。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:28:24.660

你可以使用类似的东西：

```
str = str.replaceFirst("_[^_]+_", "_o_"); 
```

# wordpress - 在 Wordpress 中通过电子邮件发布时如何设置元数据

> ID：11134246
> 
> 赞同：0
> 
> 时间：2012-06-21T08:25:21.280
> 
> 标签：wordpress, email, post, metadata

我定义了一个自定义帖子，其中包含一项元数据（URL）。我的 Wordpress 循环显示帖子的标题和指向 URL 的链接 - 不显示内容。

谁能帮我在 Wordpress 中通过电子邮件设置发帖，这样主题行是标题，正文是 URL？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:32:14.007

Wordpress 为通过电子邮件发帖提供了一个方便的钩子，`publish_phone`. 将此代码添加到活动主题目录中的**functions.php中。**

```
add_action('publish_phone', 'set_metadata');

function set_metadata($post_ID) {
    $post = get_post($post_ID);
    $content = $post->post_content;
    $meta_key = 'url'; //the name of your metadata
    update_post_meta($post_ID, $meta_key, $content);
} 
```

# php - 在编程中创建精灵

> ID：11134249
> 
> 赞同：0
> 
> 时间：2012-06-21T08:25:28.283
> 
> 标签：php, javascript, image-processing, sprite

我正在使用画布在 HTML5 和 Javascript 中制作游戏。我已经成功创建了基本结构：移动地图、对象和精灵。

对于角色的动画，我使用精灵（[比如这个例子](http://www.d-grafix.com/gfx/walk_iso.jpg)），我还想让用户自定义他的角色，这样他就可以在不同类型的眼睛、头发、衣服等之间进行选择——这在很多游戏。

知道用户选择了某些头发、眼睛和衣服，我如何使用 PHP 为他们创建精灵图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:22:42.360

使用 GD 或 ImageMagick 等图形库的 PHP 接口将片段合并为单个图像。或者，您可以简单地在玩家坐标处绘制所有单独的部分，因此玩家将由多个精灵组成，而不仅仅是一个并一次移动它们。通过这种方式，您可以节省存储大量可能与您的作品重组的时间，并且在服务器端必须生成新的组合图像时不必引入延迟。

# vb.net - 通过文件/函数将结构作为参数传递

> ID：11134256
> 
> 赞同：0
> 
> 时间：2012-06-21T08:25:46.693
> 
> 标签：vb.net

我无法像在早期 MS 基本版本中使用的那样，通过单个 vbnet 项目的不同文件中的子/函数将结构作为参数传递。
这是情况的简短示例：

模块1.vb

```
Imports System.IO

Structure mymultitry
     Dim index As Integer
    <VBFixedString(6)> Dim name As String
    Dim weight As Double
End Structure

Module Module1
Public mysetupfile = "mysetup.dat"

Public Sub rwfile(ByVal rw As Integer, ByVal myrecord As Integer, ByVal mmt As mymultitry)

'EDIT: Thanks to SteveDog - proper line should be:
'Public Sub rwfile(ByVal rw As Integer, ByVal myrecord As Integer, ByRef mmt As mymultitry)

    Dim fnum As Integer
    fnum = FreeFile()
    FileOpen(fnum, mysetupfile, OpenMode.Random, OpenAccess.ReadWrite, OpenShare.Shared, Len(mmt))
    If rw Then
        FilePut(fnum, mmt, myrecord)
    Else
        FileGet(fnum, mmt, myrecord)
    End If
    FileClose(fnum)
End Sub

End Module 
```

Form1.vb

```
Public Class Form1
Dim mmt As mymultitry
Dim mmt1 As mymultitry

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    With mmt
        .index = 4
        .name = "Helga"
        .weight = 128.1445
    End With
    rwfile(1, 1, mmt)  'write

    rwfile(0, 1, mmt1) 'read

    'all zero here !?!
    Debug.Print(mmt1.index)
    Debug.Print(mmt1.name)
    Debug.Print(mmt1.weight)

End Sub
End Class 
```

文件“mysetup.dat”是可访问的，并且数据已正确保存，我可以使用 HxD 看到。但阅读部分似乎无法按预期工作。

请任何关于可靠传递结构作为参数的帮助，没有太多基于上例的公共元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:29:01.293

我强烈建议您重写代码以在`System.IO.File`类中使用新的 .NET IO 方法，但是，除此之外，我认为您现有代码的问题是您需要将`mmt`参数从更改`ByVal`为`ByRef`.

# php - 刷新=在php中提交，如何解决？

> ID：11134257
> 
> 赞同：2
> 
> 时间：2012-06-21T08:25:47.957
> 
> 标签：php, mysql, post

我正在 php 中创建一个插入过程，但我的代码有问题。当我`refresh`我的页面时，它也会`submit`和`insert`数据。

这是我的代码：

```
<form action="/drupal/node/1" method="post">
Name: <input type="text" name="name" />
Price: <input type="text" name="price" />
Minutes: <input type="text" name="minutes" />
<input type="submit" />
</form>
<?php
$con = mysql_connect("localhost","root","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

// some code
mysql_select_db("zain", $con);
if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['minutes']))
{
 $val_name = $_POST['name'];
 $val_price = $_POST['price'];
 $val_min = $_POST['minutes'];
 $max_id_sql = mysql_query("SELECT MAX(id) FROM card_category");
 $data = mysql_fetch_array($max_id_sql);
 if ($data[0]==0)
 {
    $val_id = 1;
 }
 else
 {
    $val_id = $data[0] + 1;
 }

 mysql_query("INSERT INTO card_category (id, name, price, minutes) VALUES ($val_id,'$val_name',$val_price,$val_min )");
 $_POST['name'] == NULL;
 $_POST['price'] == NULL;
 $_POST['minutes'] == NULL;
}
$result = mysql_query("SELECT * FROM card_category");

echo "<table border='1'>
<tr>
<th>id</th>
<th>name</th>
<th>price</th>
<th>mins</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td>" . $row['name'] . "</td>";
echo "<td>" . $row['price'] . "</td>";
  echo "<td>" . $row['minutes'] . "</td>";
  echo "</tr>";
  }
echo "</table>";
if (isset($_POST['lastname']))
{
print $_POST['lastname'];
}
mysql_close($con);
?> 
```

`refresh`我的问题是，当我页面而不是数据时，我该如何处理`submit`？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T08:27:42.493

当您收到 POST 提交时：

1.  处理数据
2.  返回重定向响应
3.  在您重定向到的 URL 上从浏览器获取 GET 请求
4.  用 HTML 响应它

如果浏览器被刷新，它将重新提交您的 PHP 不会用来修改数据库的 GET 请求。

这是[POST-REDIRECT-GET 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)。[此博客条目](http://www.andypemberton.com/engineering/the-post-redirect-get-pattern/)中有更多详细信息（评论中还包含示例 PHP 代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:06:57.323

如何修复刷新页面不使用 php 发布值：

```
if ($_SERVER['HTTP_CACHE_CONTROL']=="")
{
// process the data
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T08:32:59.197

如果您查看**$_SERVER['REQUEST_METHOD']**变量，当用户提交数据时它会说**“POST”** ，而当他没有提交数据时它会说**“GET” 。**所以：

```
if($_SERVER['REQUEST_METHOD']=='POST')
{
   // process the data
} 
```

顺便说一句，您的代码极易受到 SQLI 攻击...

# android - Android StringBuilder OutOfMemoryError

> ID：11134261
> 
> 赞同：0
> 
> 时间：2012-06-21T08:26:06.553
> 
> 标签：android, out-of-memory, stringbuilder

我在解析一些从 Web 服务器响应的 json 数据时遇到了很大的问题。我正在做的事情是通过 POST 获得响应，然后将响应转换为字符串并解析它。但是在某些设备中，我得到了`OutOfMemoryError`，我正在尝试修复。这是我将响应转换为字符串的方式：

```
public static String convertStreamToString(InputStream is) throws Exception {
    ByteArrayOutputStream into = new ByteArrayOutputStream();
    byte[] buf = new byte[4096];
    for (int n; 0 < (n = is.read(buf));) {
        into.write(buf, 0, n);
    }
    into.close();
    return new String(into.toByteArray(), "UTF-8");
} 
```

这是我使用这段代码的方式：

```
InputStream response = new BufferedInputStream(connection.getInputStream());

        try {
            String responsee = convertStreamToString(response);
            jsonParser(responsee);
        } catch (Exception e) {
            e.printStackTrace();
            cancelDialog("Error occurred! Please try again later.");
        } 
```

有什么建议可以解决这个问题，所以不会在所有设备上发生？

在此先感谢您提供任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:55:54.177

手机内存有限。

我也面临同样的问题。我们找到的解决方案是只下载必要的信息。因此，请确认您的要求，您希望在手机中存储多少数据。如果您过滤不必要的数据，那么问题将得到解决。

在极端条件下测试程序之前，首先检查是否发生简单下载，然后检查数据的限制意味着它不会给出内存不足错误的程度。并相应地修改您的要求。

# c# - C# 在运行时添加属性

> ID：11134264
> 
> 赞同：2
> 
> 时间：2012-06-21T08:26:11.310
> 
> 标签：c#

我读过几篇文章，但在运行时向类添加属性时仍然遇到问题。它应该很简单，因为我有一个这样的类：

```
public class MyClass
    {
        String Template;
        String Term;
     } 
```

在运行时，我必须添加一些属性，例如电话、电子邮件（这取决于...）。有人可以解释一下如何在类初始化期间添加这些属性吗？

斯雷科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:45:32.730

我不认为在这里添加属性是正确的做法。“电子邮件”或“电话”等属性只是一些额外的键和值对。您可以使用`Dictionary`，但这会阻止您多次使用密钥（例如，联系人的多个电子邮件地址）。所以你也可以使用`List<KeyValuePair<string, string>>`. 像那样：

```
public class MyClass
{
    String Template;
    String Term;
    public List<KeyValuePair<string, string>> Attributes { get; private set; }

    public MyClass() {
        Attributes = new List<KeyValuePair<string, string>();
    }

    public void AddAttribute(string key, string value) {
        Attributes.Add(new KeyValuePair<string, string>(key, value));
    }
}

// to be used like this: 
MyClass instance = new MyClass();
instance.AddAttribute("Email", "test@example.com");
instance.AddAttribute("Phone", "555-1234"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T08:37:18.110

如果你有 c# 4.0，你可以使用 Expando 对象。

对于早期版本的 c#，普遍接受的方法是创建一个“属性包”，即键值对的集合（或字典）

```
dynamic foo = new ExpandoObject();
foo.Bar = "test"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:30:00.937

您可以为您的键/值对添加一个字典。然后，如果您添加属性，您只需将`Key = Attributename`,添加`Value = YourValue`到字典中。阅读同样简单 - 只需`Key = Attributename`从字典中获取值即可。

# c# - 如何避免使用 DynamicProxy::CreateClassProxyWithTarget 双重构建代理？

> ID：11134265
> 
> 赞同：4
> 
> 时间：2012-06-21T08:26:13.810
> 
> 标签：c#, castle-dynamicproxy, dynamic-proxy

我正在使用该`CreateClassProxyWithTarget`方法装饰现有对象。但是，构造函数和初始化代码被调用了两次。我已经有一个“构造”实例（目标）。我理解为什么会发生这种情况，但是除了使用空的构造函数之外，有没有办法避免它？

编辑：这是一些代码：

首先创建代理：

```
public static T Create<T>(T i_pEntity) where T : class
{
  object pResult = m_pGenerator.CreateClassProxyWithTarget(typeof(T),
                                                           new[] 
                                                             { 
                                                                typeof(IEditableObject),
                                                                typeof(INotifyPropertyChanged) ,
                                                                typeof(IMarkerInterface),
                                                                typeof(IDataErrorInfo)
                                                             },                                                               
                                                           i_pEntity,
                                                           ProxyGenerationOptions.Default,
                                                           new BindingEntityInterceptor<T>(i_pEntity));
  return (T)pResult;
} 
```

例如，我将它与以下类的对象一起使用：

```
public class KatalogBase : AuditableBaseEntity
{
   public KatalogBase()
   {
     Values     = new HashedSet<Values>();
     Attributes = new HashedSet<Attributes>();
   }
   ...
} 
```

如果我现在调用`BindingFactory.Create(someKatalogBaseObject);`和 属性正在重新初始化。`Values``Attributes`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T20:11:48.157

根据[Krzysztof 的一篇文章](http://devlicio.us/blogs/krzysztof_kozmic/archive/2011/03/20/working-with-nhibernate-without-default-constructors.aspx)和他在 Moq 论坛上的[评论](https://groups.google.com/forum/?fromgroups=#!topic/moqdisc/TLzsNyg86kk)，我设法让这个工作：

```
 class MyProxyGenerator : ProxyGenerator
    {
        public object CreateClassProxyWithoutRunningCtor(Type type, ProxyGenerationOptions pgo, SourcererInterceptor sourcererInterceptor)
        {
            var prxType = this.CreateClassProxyType(type, new Type[] { }, pgo);
            var instance = FormatterServices.GetUninitializedObject(prxType);
            SetInterceptors(instance, new IInterceptor[]{sourcererInterceptor});
            return instance;
        }

        private void SetInterceptors(object proxy, params IInterceptor[] interceptors)
        {
            var field = proxy.GetType().GetField("__interceptors");
            field.SetValue(proxy, interceptors);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T03:11:46.207

那么您要问的是 DynamicProxy 是否可以在不调用其构造函数的情况下构造代理实例？

那是不可能的。有一种使用方法，`FormatterServices.GetUninitializedObject()`但在中等信任下不起作用。

# android - Windows Vista 中的 ADT 插件错误？读取超时

> ID：11134266
> 
> 赞同：0
> 
> 时间：2012-06-21T08:26:15.200
> 
> 标签：android

我在 Vista 中安装了 Eclipse INDIGO 和 JDK 1.6。我按照步骤

帮助 -> 安装新软件 -> 遵循**下载 ADT 插件**。接受许可协议后，它开始在后台安装，然后显示如下错误

**安装软件遇到问题**

在**详细信息**按钮上，它显示完整的错误，例如，

> **收集要安装的项目时发生错误会话上下文是：(profile=epp.package.java, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect,operand=, action=)。无法在[http://dl-ssl.google.com/android/eclipse/plugins/com.android.ide.eclipse.ddms_18.0.0.v201203301601-306762.jar](http://dl-ssl.google.com/android/eclipse/plugins/com.android.ide.eclipse.ddms_18.0.0.v201203301601-306762.jar)读取存储库。读取超时**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:29:00.500

嗯，我会说再试一次。错误消息中所述的文件可供我使用，但在您的消息中显示“读取超时”。

作为替代方案，请看这里：[Problem installation ADT in Eclipse](https://stackoverflow.com/questions/7129246/problem-installing-adt-in-eclipse)

# google-app-engine - 检索数据存储

> ID：11134274
> 
> 赞同：0
> 
> 时间：2012-06-21T08:26:32.587
> 
> 标签：google-app-engine, google-cloud-datastore, python-2.7

如何使用 Python 在 Google App 引擎中显示 HTML 中的值？

我已经检索了这些值并将它们存储在一个变量中。

我尝试了以下方法，但它给了我一个错误。我想显示使用 for 循环检索到的记录，但不知道请帮忙。

代码：

```
 import cgi
 import webapp2

 from google.appengine.ext import db

 form="""<!DOCTYPE html>
 <html>
    <head>
    <title>ascii</title>
</head>
<body>
<h1>/ascii</h1>
<form method="post">
    <label>
<div>Title</div>
<input type="text" name="text" value="%(text)s">
</label>
<br>
<label>
    Art
    <br><textarea cols="50" rows="12"  name="art" value="%(art)s"></textarea>
 </label><br>
<input type="submit">
 <div style="color:blue">%(error)s</div>

</form>
  <hr>
 <hr>

    ***{%for art in arts %}
<div>
<div>{% art.title %}</div>
<pre>{%art.art%}</pre>
</div>***
</body>
</html>"""
class Art(db.Model):
    title = db.StringProperty(required=True)
    art=db.TextProperty(required=True)
    created=db.DateTimeProperty(auto_now_add=True)

class MainHandler(webapp2.RequestHandler):
    def write_form(self,error="",text="",art="",arts=""):
        ***arts=db.GqlQuery("select * from Art order by created DESC")***

        self.response.out.write(form %{"error":error,
                                   "text":text,
                                   "art":art)}                                       
    def escape_html(self,s):
        return cgi.escape(s,quote=True)
    def get(self):
        self.write_form()

    def post(self):

        text1=self.escape_html(self.request.get("text"))
        art1=self.escape_html(self.request.get("art"))
        if text1 and art1:
            a=Art(title=text1,art=art1)
            a.put()
            self.redirect("/")                      

        else:
            self.write_form("Both fields required",text1,art1)    

app = webapp2.WSGIApplication([('/', MainHandler)],
                          debug=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:29:41.367

这种方法不能很好地缩放，也不是正确的方法。在 Google App Engine 上的 Python[入门](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)教程中查看[模板](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)的使用情况。

一般的想法是，您在模板中编写您`HTML`的模板，然后通过将一些参数传递给它，您将能够使用`for`-loops、`if`-statements[等等](http://jinja.pocoo.org/docs/templates/)。

# java - 在 java 程序中记录未捕获异常的最佳实践

> ID：11134276
> 
> 赞同：1
> 
> 时间：2012-06-21T08:26:39.450
> 
> 标签：java, exception, log4j

> **可能重复：**
> [Java：全局异常处理程序](https://stackoverflow.com/questions/1548487/java-global-exception-handler)

我想到了这样的事情：

```
public static void main(String[] args) {
  try {
    startOfMyProg();
  } catch (RuntimeException e) {
     log.error(e.toString());
     // Maybe rethrow it so i can see it in the console?
  }
} 
```

这是一个简单的解决方案，我知道。也许有人知道更好的？

问候 && tia noircc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:32:32.503

我会

```
} catch (Throwable e) {
    log.error("Uncaught exception", e); // prints the stack trace. 
```

# c - NGINX 每秒请求数

> ID：11134282
> 
> 赞同：5
> 
> 时间：2012-06-21T08:26:53.350
> 
> 标签：c, nginx

我正在为 NGINX 开发一个反应用层攻击模块，我必须计算每秒（每秒）的请求。这个想法是制作一个攻击的自动检测器，当请求率增加时打开过滤。

目前，这是在 shell 脚本的帮助下发生的，该脚本每秒读取访问日志并计算请求率。问题是这不是很有效。

如果您对如何实现这一目标有任何想法，请分享您的想法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:40:33.363

您可以使用 HttpLimitReqModule：

```
http {
limit_req_zone  $binary_remote_addr  zone=one:10m   rate=1r/s;

...

server {

    ...

    location /search/ {
        limit_req   zone=one  burst=5;
    } 
```

参考：[http ://wiki.nginx.org/HttpLimitReqModule](http://wiki.nginx.org/HttpLimitReqModule)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T18:04:59.970

`tail -f -s`在 access_log 上使用。这很有效。

# android - 使用相机拍摄的照片的图像格式（Android 手机）

> ID：11134284
> 
> 赞同：6
> 
> 时间：2012-06-21T08:26:54.367
> 
> 标签：android, image, format, png, jpeg

对于我的应用程序，我必须发送带有照片的邮件（我正在使用网络服务来做到这一点）。

我想知道是否有一些Android手机不使用相机生成jpg文件（例如png文件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:35:20.780

我认为每个设备*都应该*支持 JPEG 图像，因为

```
takePicture (Camera.ShutterCallback shutter, Camera.PictureCallback raw, Camera.PictureCallback postview, Camera.PictureCallback jpeg) 
```

方法说只有 raw 和 postview 回调可能为空。

另一方面，你可能总是打电话

```
camera.getParameters().getSupportedPictureFormats() 
```

查看支持的图片格式。

# gwt - 如何将列表保留在客户端？

> ID：11134287
> 
> 赞同：0
> 
> 时间：2012-06-21T08:27:03.213
> 
> 标签：gwt

我想在从服务端获取列表 GWT 后保留它。例如，我有按钮 A，当我按下时，它会给我带来以“A”开头的患者姓名列表。所以; 我不想一直从服务端获取名称。我想把它们拿去一次，然后存放在 cilent 一边。我该怎么办？你有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:31:00.687

在开始时一次获取它们，并将它们保存在一个列表中，并在整个应用程序中保留对该列表的引用（在您需要的地方）。然后，每次您想查看更多内容时，只需使用该列表并显示您希望查看的内容。但请记住，如果您在服务器端有大量信息，最好一次获取一些信息，否则一次获取批量列表可能需要很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:42:02.207

开始时获取所有列表名称并存储它们。从这里它不会提供你最新的或经常光顾的名单。所以你可以在 gwt 中使用 gwt 事件服务。我不知道要求，但您可以跟踪是否添加了新患者，然后它将触发从服务器到客户端的事件并尝试将该用户也添加到该列表中。

参考链接：

[http://code.google.com/p/gwteventservice/](http://code.google.com/p/gwteventservice/)

# c# - 使用 Web 应用程序进行计划任务的最佳方式

> ID：11134294
> 
> 赞同：0
> 
> 时间：2012-06-21T08:27:22.267
> 
> 标签：c#, asp.net, architecture

> **可能重复：**
> [ASP.Net：运行计划任务的最佳方式](https://stackoverflow.com/questions/542804/asp-netbest-way-to-run-scheduled-tasks)

我必须为 ASP.NET 应用程序制定计划任务。该应用程序必须生成一个文件并将其放在一个目录中。事实上简单的任务，但我不知道如何处理预定的属性。我想在 Web 应用程序中创建一个 Web 服务，并在另一台机器上安装一个小服务，该机器使用 Web 服务的数据执行预定的“编写”任务。

太复杂？是否可以要求 webApp 每天完成这项工作？让 webApp 做定时任务真的好吗？

我该怎么做？对你来说最好的方法是什么，谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T08:28:51.747

只需使用[Windows 任务计划程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614(v=vs.85).aspx)并将其设置为每天在所需时间运行您的应用程序。它非常适合这种工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:33:32.193

我不会让网络应用程序运行任务。如果您需要执行的代码存在于 Web 应用程序中并且需要从 Web 应用程序访问，那么您可以将其移动到与您的 Web 应用程序相同的解决方案中的另一个项目（并将其编译为 dll）。
然后您可以创建第三个项目（编译为 .exe），该项目也引用该 dll。在机器上复制该 .exe 和 .dll 并使用任务调度程序安排任务:)

作为 Visual Studio 解决方案的树视图：

解决方案
-Project 1: dll
-Project 2: web app (references Project1)
_Project 3: exe (references Project1)

# java - Java Swing从数据库错误中获取数据

> ID：11134298
> 
> 赞同：-1
> 
> 时间：2012-06-21T08:27:52.403
> 
> 标签：java, sql, swing, postgresql

我不能让它工作......我怎样才能从抽象模型内的数据库中获取数据？我真的需要帮助谢谢..我尝试了不同的解决方案，但没有成功...有人可以帮我谢谢...即使只是链接上帝保佑！

```
import java.awt.Dimension;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;

import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;
import javax.swing.RowFilter;
import javax.swing.SpringLayout;
import javax.swing.SwingConstants;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableRowSorter;

public class ConsolidateInvoices extends JPanel {

    private JTable table;
    private JTextField Name;
    private JTextField BusinessPartner;
    private TableRowSorter<Model> sorter;
    private String[] columnNames;
    private Object[][] data;

    public ConsolidateInvoices() {

        JPanel form = new JPanel(new SpringLayout());

        JLabel lblName = new JLabel("Name:", SwingConstants.TRAILING);
        form.add(lblName);
        Name = new JTextField();
        form.add(Name);
        JLabel lblBusinessPartner = new JLabel("Business Partner:",
                SwingConstants.TRAILING);
        form.add(lblBusinessPartner);
        BusinessPartner = new JTextField();

        // Whenever filterText changes do the filter method
        BusinessPartner.getDocument().addDocumentListener(
                new DocumentListener() {
                    public void changedUpdate(DocumentEvent e) {
                        newFilter();
                    }

                    public void insertUpdate(DocumentEvent e) {
                        newFilter();
                    }

                    public void removeUpdate(DocumentEvent e) {
                        newFilter();
                    }
                });

        lblBusinessPartner.setLabelFor(BusinessPartner);
        form.add(BusinessPartner);
        SpringUtilities.makeCompactGrid(form, 2, 2, 6, 6, 6, 6);
        add(form);

        try {

            Class.forName("org.postgresql.Driver");
            Connection connection = null;
            connection = DriverManager.getConnection(
                    "jdbc:postgresql://127.0.0.1:5432/adempiere2",
                    "postgres", "postgres");

            // Read data from a table
            String query = "Select c_invoice_id, documentno  "
                    + "from adempiere.c_invoice";
            Statement stmt = connection.createStatement();
            ResultSet rst = stmt.executeQuery(query);
            ResultSetMetaData md = rst.getMetaData();
            int columns = md.getColumnCount();
            int rows = 1;

            //new Boolean(false)

            columnNames = new String[columns];
            // Get column names
            for (int i = 1; i <= columns; i++) {
                columnNames[i-1] = md.getColumnName(i);
            }

            System.out.println(rows);

            data = new Object[rows][columns];
            // Get row data
            while (rst.next()) {
                int ctr = 0;
                for (int i = 1; i <= columns; i++) {
                    data[ctr][i-1] = rst.getObject(i);
                }
                ctr++;
            }

            rst.close();
            stmt.close();
            connection.close();

        } catch (SQLException e) {

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

        // Create a separate panel for the table
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        table = new JTable(new Model());
        // Sorter
        Model model = new Model();
        sorter = new TableRowSorter<Model>(model);
        table.setRowSorter(sorter);
        table.setPreferredScrollableViewportSize(new Dimension(700, 700));
        table.setFillsViewportHeight(true);

        // To make the selection single
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        // To create the scroll panel
        JScrollPane scrollPane = new JScrollPane(table);
        // initColumnSizes(table);
        // setUpSportColumn(table, table.getColumnModel().getColumn(2));
        add(scrollPane);
    }

    // The filter method used for the business partner
    private void newFilter() {
        RowFilter<Model, Object> rf = null;
        // If current text doesn't parse, don't update.
        try {
            rf = RowFilter.regexFilter(BusinessPartner.getText(), 0);
        } catch (java.util.regex.PatternSyntaxException e) {
            return;
        }
        sorter.setRowFilter(rf);
    }

    class Model extends AbstractTableModel {

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        // To make the column a check box
        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        public boolean isCellEditable(int row, int col) {
            return false;
        }

        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
        }

    }

    private static void showWindow() {
        // Create and set up the window.
        JFrame frame = new JFrame("Table");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        // Create and set up the content pane.
        ConsolidateInvoices newContentPane = new ConsolidateInvoices();
        newContentPane.setOpaque(true); // content panes must be opaque
        frame.setContentPane(newContentPane);
        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                showWindow();
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:45:30.487

尽管您没有说明问题是什么，但我已经看到了几个问题：

```
 table = new JTable(new Model());
    // Sorter
    Model model = new Model(); 
```

您创建了两个模型，而您应该使用相同的实例。现在您可能会解决这个问题，因为它们共享相同的`data`.

```
 } catch (SQLException e) {
       // Always log or print an exception
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
        // If this exception occurs, the rest of the code is pretty much useless since you won't have a connection to the DB. You should rather forward this exception as an error
    }

    // To make the column a check box
    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    } 
```

如果您没有值，您将得到一个异常（ArrayIndexOutOfBounds 或 NullPointerException）。此信息应该基于`ResultMetadataSet`.

```
 public boolean isCellEditable(int row, int col) {
        return false;
    }

    public void setValueAt(Object value, int row, int col) {
        data[row][col] = value;
        fireTableCellUpdated(row, col);
    } 
```

如果您说您的单元格不可编辑，则无需实现 setValueAt，它将永远不会被调用。

你的 for 循环怎么了？：

```
for (int i = 1; i <= columns; i++) {
      columnNames[i-1] ... 
```

只需使用：

```
for (int i = 0; i < columns; i++) {
      columnNames[i] ... 
```

更干净，更简单，更不容易出错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:39:14.613

我想问题出在这里：

```
 table = new JTable(new Model());
    // Sorter
    Model model = new Model();
    sorter = new TableRowSorter<Model>(model);
    table.setRowSorter(sorter); 
```

您不会为表格和分类器使用相同的模型。那个怎么样 ：

```
 Model model = new Model();
    sorter = new TableRowSorter<Model>(model);
    table = new JTable(model);
    table.setRowSorter(sorter); 
```

我还发现了 OP 建议使用的[类似帖子：](https://stackoverflow.com/questions/996948/live-sorting-of-jtable)

```
sorter.setSortsOnUpdates(true); 
```

并将`fireTableCellUpdated(row, col);`（在*setValueAt()*中）替换为：

```
fireTableRowsUpdated(0, data.size() - 1); 
```

如果您看一下这个[Oracle 示例](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableSortDemoProject/src/components/TableSortDemo.java)，我们会看到一条有趣的评论：

```
 // Normally, one should call fireTableCellUpdated() when
        // a value is changed.  However, doing so in this demo
        // causes a problem with TableSorter.  The tableChanged()
        // call on TableSorter that results from calling
        // fireTableCellUpdated() causes the indices to be regenerated
        // when they shouldn't be.  Ideally, TableSorter should be
        // given a more intelligent tableChanged() implementation,
        // and then the following line can be uncommented.
        // fireTableCellUpdated(row, col); 
```

# mysql - 如何在 MySQL 存储函数中使用 goto 标签

> ID：11134300
> 
> 赞同：8
> 
> 时间：2012-06-21T08:28:00.700
> 
> 标签：mysql, goto, stored-functions

我想在 MySQL 存储函数中使用 goto。我该如何使用？示例代码是：

```
if (action = 'D') then
    if (rowcount > 0) then
        DELETE FROM datatable WHERE id = 2;      
    else
       SET p=CONCAT('Can not delete',@b);
       goto ret_label;
    end if;
end if;

Label: ret_label;
return 0; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-12T05:22:12.763

有些 GOTO 案例无法在 MySQL 中实现，例如在代码中向后跳转（这也是一件好事）。

但是对于您的示例，您希望从所有内容跳到最后一系列语句，您可以在代码周围创建一个 BEGIN / END 块以跳出：

```
aBlock:BEGIN
    if (action = 'D') then
        if (rowcount > 0) then
            DELETE FROM datatable WHERE id = 2;      
        else
           SET p=CONCAT('Can not delete',@b);
           LEAVE aBlock;
        end if;
    end if;
END aBlock;
return 0; 
```

由于您的代码只是一些嵌套的 IF，因此在给定代码中该构造是不必要的。但是对于 LOOP/WHILE/REPEAT 来说，避免来自循环内部的多个 RETURN 语句并合并最终处理（有点像 TRY / FINALLY）更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:37:35.207

MySQL 存储过程中没有 GOTO。可以参考这个帖子： [MySQL :: Re: Goto Statement](http://forums.mysql.com/read.php?60,161964,161979#msg-161979)

# ios - SKProduct 中的本地化标题为零

> ID：11134303
> 
> 赞同：7
> 
> 时间：2012-06-21T08:28:12.917
> 
> 标签：ios, app-store, app-store-connect

我正在实施一个应用内商店，并成功地从应用商店获取 SKProducts。SKProducts 中的价格信息和描述很好，但我所有的本地化标题都是零。在 iTunes Connect 中，设置了参考名称，我添加了英语并设置了显示名称和描述。知道为什么localizedTitles 会返回为零吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:05:54.190

同样的问题，请查看[https://devforums.apple.com/message/681255](https://devforums.apple.com/message/681255) - 你并不孤单。这是苹果方面的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T10:22:24.047

**在 Xcode 中回滚您的版本号。**

例如，在我的情况下，我曾`MARKETING_VERSION=1.23`在 Xcode 中。我已经在 App Store Connect 上提交了 1.23 版。苹果随后在审查中**拒绝了**1.23 版本。在此拒绝之后，`SKProductsRequest`继续提供`SKProduct`s 列表，但每个产品的`.localizedTitle`和`.localizedDescription`都设置为`nil`。

在 Xcode 中，我将我的版本号（即`MARKETING_VERSION`）改回了 1.22。在此之后，`.localizedTitle`和`.localizedDescription`再次正确送达。

临时更改版本号是在重新提交您的应用以供审核之前进行测试和开发的一种解决方法。

这肯定是苹果方面的一个错误。[我在这里提交了一个错误报告](https://feedbackassistant.apple.com/feedback/8997618)，但似乎我无法获得该报告的公共链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:58:03.227

Apple 似乎在 6 月 20 日至 21 日之间的某个时间点打破了 iOS 和 Mac 应用商店（包括实时应用商店和沙盒应用商店）的这一规定。不幸的是，如果您相信有效的响应，您的应用程序将会崩溃。

对于拥有实时应用程序的任何人，如果您不需要持久的互联网连接，对于某些用户来说，短期解决方法可以是在 iOS 上启用机场模式，不确定“关闭您的互联网连接”是否对遇到这种情况的人有很大帮助在 Mac 应用商店上。

# xpath - 将样式表从 XSLT 1.0 转换为 2.0

> ID：11134309
> 
> 赞同：0
> 
> 时间：2012-06-21T08:28:29.723
> 
> 标签：xpath, xslt-1.0, xslt-2.0

我有一个需要转换为 xslt 2.0 的 xslt 1.0 样式表。

我在这里发现了这个问题：[Convert XSLT 1.0 to 2.0](https://stackoverflow.com/questions/4762809/convert-xslt-1-0-to-2-0)处理同样的问题。

根据将版本属性更改为 2.0 可以解决问题。但这是唯一需要做的事情吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:08:21.807

我认为转换策略的选择取决于您拥有的一组回归测试有多好。

如果您有一套很好的回归测试，或者如果引入错误的后果并不严重，那么我建议您执行以下步骤：

(a) 将版本属性更改为 2.0

(b) 使用 XSLT 2.0 处理器运行您的测试用例，看看它们是否工作

(c) 检查任何测试差异并确定其原因（可能有 80% 的时间它会在第一次正常工作且没有差异的情况下）。

如果您没有良好的测试，或者您无法承担任何风险，那么您可能需要采取更加谨慎的策略。（当然，最终的谨慎是“不要改变任何东西”策略——坚持使用 1.0）。在这种情况下，最好的建议可能是通过编写更多测试用例来启动转换项目。至少，收集您当前正在处理的源文档的样本，以及为这些源文档生成的输出，然后使用文件比较工具来比较您转换后得到的输出。

1.0 和 2.0 之间有一些不兼容的地方；您最有可能遇到的是 1.0 中的 xsl:value-of（和许多其他构造）在第一个之后忽略提供的输入序列中的所有节点，而 XSLT 2.0 输出提供的序列中的所有节点。有两种方法可以处理这个问题。要么（我的建议）确定发生此问题的位置，然后修复它们，通常通过将 select="X" 更改为 select="X[1]"; 或者将 xsl:stylesheet 上的 version 属性改回 version="1.0"，这会导致 XSLT 2.0 处理器以向后兼容模式运行。依赖向后兼容模式的缺点是您失去了 XSLT 2.0 中更强大的类型检查的好处，这使得复杂的样式表代码更容易调试。

根据我的经验，您在转换中遇到的问题更可能取决于处理器/实现的更改，而不是 W3C 语言的更改。您的代码可能正在使用 2.0 处理器不支持的供应商定义的扩展函数，或者它可能依赖于实现定义的行为，例如从一个处理器到另一个处理器不同的排序序列。例如，我看到的代码依赖于 generate-id() 生成的输出的特定格式，它完全依赖于实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:31:40.373

[“XSL Transformations (XSLT) Version 2.0”, §J, “Changes from XSLT 1.0 (Non-Normative)”](http://www.w3.org/TR/xslt20/#changes)列出了您需要注意的 XSLT 1.0 和 XSLT 2.0 之间的大部分差异。

# c# - WPF DataGrid 和多线程

> ID：11134312
> 
> 赞同：3
> 
> 时间：2012-06-21T08:28:37.060
> 
> 标签：c#, wpf, multithreading

我有一个用 DataView 填充的 DataGrid（使用 DataContext）。我试图在一个单独的线程中执行此操作，但 UI 仍然冻结。我想防止 UI 在填充 DataGrid 时冻结。

这是我到目前为止制作的代码：

```
private void btnOK_Click(object sender, RoutedEventArgs e)
    {
        GetFieldsBLL getFieldsBLL = new GetFieldsBLL();
        DataView dv = getFieldsBLL.GetWholeView(ViewName);
        Task task = new Task(() => ucDataExtracViewControl.PopulateGrid(dv));
        task.Start();
    }

public void PopulateGrid(DataView dv)
    {
        dgView.Dispatcher.BeginInvoke(DispatcherPriority.Normal, new Action(delegate{

            dgView.Columns.Clear();
            dgView.AutoGenerateColumns = false;
            foreach (DataColumn column in dv.Table.Columns)
            {
                var gridColumn = new DataGridTextColumn()
                {
                    Header = column.ColumnName,
                    Binding = new Binding("[" + column.ColumnName + "]")
                };

                dgView.Columns.Add(gridColumn);
            }
            dgView.DataContext = dv;

            DataView = dv;
        }));
    } 
```

提前致谢！

编辑：我重新创建列的原因是因为某些列名的名称中有一个点。例如“工作编号”。使用绑定时不会产生任何数据。在此处阅读更多内容：[带点的 DataTable 列名称是什么导致它们不适合 WPF 的 DataGrid 控件？](https://stackoverflow.com/questions/2940618/what-is-it-about-datatable-column-names-with-dots-that-makes-them-unsuitable-for)不能对数据库进行更改。——</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:49:25.227

我用 WPF DataGrid 做了很多工作，渲染是个问题。最后，渲染时间归结为您将要显示的列和行的数量。当 DataGrid 呈现时，它必须绘制每一个，这意味着加载和测量内容的大小。

我发现您可以通过设置固定的列宽和行高来提高速度。当与下面的 DelayedDataGridTextColumn 结合使用时，UI 线程的阻塞非常小，因为每个单元格都是单独渲染的，因此允许其他事情在具有更高优先级的 UI 线程上发生。

```
public class DelayedDataGridTextColumn : DataGridTextColumn
{
    protected override FrameworkElement GenerateElement(DataGridCell cell, object dataItem)
    {
        var textBlock = new TextBlock();
        textBlock.SetValue(FrameworkElement.StyleProperty, ElementStyle);

        Dispatcher.BeginInvoke(
            DispatcherPriority.Loaded,
            new Action<TextBlock>(x => x.SetBinding(TextBlock.TextProperty, Binding)),
        textBlock);
        return textBlock;
    }
} 
```

请注意，您可以调整 DispatcherPriority 以适应您想要的渲染速度。优先级越低，您获得的窗帘效果就越多。优先级越高，渲染时处理的其他项目就越少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:08:49.457

将 DispatcherPriority 更改为 Background。

```
dgView.Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(delegate{
// your code
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:37:40.030

您实际上并没有在单独的线程中运行它，因为您要做的第一件事是将其分派回 UI 线程

问题是您为什么要自己重新创建列？`AutoGenerateColumns`这真的会产生与设置为 true不同的结果吗？

如果你能正确使用 WPF 的绑定特性，我认为你可以改进这一点，但只有很少的代码可以对此提出好的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:10:59.550

您可以使用 BackgroundWorker 类来执行后台进程意味着：

**将以下任务分配给 DoWork 回调**

1.  调用 getFieldsBLL.GetWholeView(ViewName);
2.  以您想要填充的方式填充 DataView

**将 UI 更新代码 (dgView.DataContext = dv;) 移动到 RunWorkerCompleted 回调。**

注意：您需要为 DataView 创建一个类变量，以便它可以用于 DoWork 和 RunWorkerCompleted 回调。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-21T06:02:39.383

我解决了这个问题。C# 代码不是 UI 冻结的原因，而是 DataGrid 上记录的呈现。`EnableRowVirtualization="True"` `EnableColumnVirtualization="True"` `ScrollViewer.CanContentScroll="True"`在数据网格中设置

实际上 DataGrid 冻结了大数据的 UI。所以启用虚拟化解决了这个问题

# maven - 父级 Maven 站点

> ID：11134316
> 
> 赞同：0
> 
> 时间：2012-06-21T08:28:57.050
> 
> 标签：maven, maven-site-plugin

我有以下 maven POM 结构

*   图书馆
    *   图书馆项目1
    *   图书馆计划2
    *   图书馆计划3
*   成分
    *   比较1
        *   Comp1项目1
        *   Comp1项目2
        *   Comp1项目3
    *   比较2
        *   Comp2项目1
        *   Comp2项目2
        *   Comp2项目3
*   应用
    *   应用项目1
    *   应用项目2
    *   应用项目3

使用 maven project-info-reports，我可以轻松地为每个 AppProject 生成依赖管理。

但是，我想生成一个报告，给出父 POM 之间的依赖关系。那就是使用 Comp1、Comp2 和 Libraries 的哪个版本来构建应用程序。这样做的原因是每组项目都被标记在一起并且具有相同的版本。（为了让管理者更容易阅读......）

如果不是完整的解决方案，欢迎提供有关如何完成此操作的任何提示或指示。

干杯

# java - 以编程方式更改 Eclipse 项目设置

> ID：11134317
> 
> 赞同：3
> 
> 时间：2012-06-21T08:28:57.733
> 
> 标签：java, eclipse, maven

我有一个相当大的项目，在 subversion 上托管了大约 30 个单独的子项目。如果我想在新客户端上设置项目，我必须检查 30 个项目（每次手动选择主干），然后更改每个项目的 eclipse facette，然后将每个项目转换为插件项目。最后，我必须使用 maven 构建项目。

有没有更简单的方法来做到这一点？也许 eclipse 提供的某种 API 允许我更改项目设置而无需摆弄`.settings`and`.classpath`文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:36:43.037

在我看来，您缺少源代码控制系统中的一些项目元数据文件。每次拉下这些项目时都应该没有理由执行这些步骤。

检查以确保所有以“.”开头的文件 在项目根目录中以及目录的全部内容都在源代码控制中`.settings`。

# visual-studio-2010 - 有谁知道我如何在 TFS 2010 中为我的源代码的选定部分设置单元测试签入策略？

> ID：11134319
> 
> 赞同：4
> 
> 时间：2012-06-21T08:29:05.693
> 
> 标签：visual-studio-2010, unit-testing, checkin-policy

事实上，当我为单元测试配置签入策略时，它适用于整体解决方案，但我需要一个自定义的单元测试签入策略，以便能够将策略的范围仅限于特定项目、源文件或更小部分代码，以便当我签入特定项目的代码更改时，将对其应用测试签入策略，而不适用于解决方案中的其他项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:05:14.863

在客户端计算机上安装[TFS Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)，然后配置自定义路径策略，以针对源代码管理的给定路径的单元测试检查签入策略的范围。

# c# - 下拉列表列表项提交到数据库

> ID：11134325
> 
> 赞同：0
> 
> 时间：2012-06-21T08:29:51.730
> 
> 标签：c#, asp.net, c#-4.0, drop-down-menu

我只是在学习编程......我有一个这样的下拉列表。

```
<div>
    <asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem >Alabama</asp:ListItem>
<asp:ListItem >Alaska</asp:ListItem>
    </asp:DropDownList></div> 
```

使用 C# 我想将所选项目发送到数据库。数据库字段是`County nvarchar(50) NULL`,

我在 C# 后端看到了一些例子。我在互联网上找到了这个。我可以从下面的编码发送上面选定的项目吗？

```
protected void Page_Load(object sender, EventArgs e)
   {

       ListItem[] items = new ListItem[3];
       items[0] = new ListItem("One", "1");
       items[1] = new ListItem("Two", "2");
       items[2] = new ListItem("Three", "3");

       DropDownList1.Items.AddRange(items); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:37:04.873

```
 List<ListItem> items = new List<ListItem>();
  items.Add(new ListItem("Alabama", "Alabama"));
  items.Add(new ListItem("Alaska", "Alaska"));
  DropDownList1.Items.AddRange(items.ToArray()); 
```

如果你想从 DropDownList1 中获取选定的项目

```
var selectedText = DropDownList1.SelectedItem.Text;

var selectedValue = DropDownList1.SelectedItem.Value; 
```

如果您需要将此值插入数据库，那么

```
using (SqlConnection connection = new SqlConnection(connectionString))
using (SqlCommand command = connection.CreateCommand())
{
    command.CommandText = "INSERT INTO tableName (County) VALUES (@County)";

    command.Parameters.AddWithValue("@County", selectedText);

    connection.Open();
    command.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:38:05.350

如果您想将数据库中的项目添加到下拉列表中，那么您可以使用

```
 SqlConnection conn = new SqlConnection(" your connection string ");
 conn.Open();
 SqlDataAdapter da = new SqlDataAdapter("select * from ddltable ", conn);
 DataSet ds = new DataSet();
 da.Fill(ds, " ddltable ");
 DropDownList1.DataSource = ds.Tables["ddltable "].DefaultView ;
 DropDownList1.DataTextField = "id";
 DropDownList1.DataBind(); 
```

将此代码放在您的页面加载中

或者，如果您想从下拉列表中选择项目，那么您可以启用回发并使用

```
DropDownList1.selectedItem 
```

使用此代码

```
SqlConnection con = new SqlConnection(strConnString);

        con.Open();

        for (int i = 0; i < DropDownList1.Items.Count; i++)

        {

            if (DropDownList1.Items[i].Selected == true)

            {

                str = "insert into employee1 values('" + DropDownList1.Items[i].ToString() + "')";

                com = new SqlCommand(str, con);

                com.ExecuteNonQuery();

                Response.Write("<script>alert('Items Inserted');</script>");

            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:33:55.283

您可以使用

```
DropDownList1.SelectedValue 
```

或者

```
DropDownList1.SelectedItem.Value 
```

从下拉列表中获取所选值

# edi - 拆分 EDI 订单

> ID：11134341
> 
> 赞同：0
> 
> 时间：2012-06-21T08:30:54.003
> 
> 标签：edi, edifact

我们正在实施 edi 订单处理，目前正在检查我们如何设置接口。

通常一个订单可能有多个仓位。对于我们的客户来说，如果由于 erp 系统要求将在不同的工厂生产，则可能需要将传入的订单拆分为多个订单。

对我来说，如果客户做了一个订单并得到 3 个不同的订单号，这听起来很令人困惑。一种解决方案可能是每个订单策略一个职位，但是即使在不需要时，这也会增加订单数量。

客户正在发送“订单”消息，并将收到订单确认“ORDRSP”。

我想知道解决这个问题的常见解决方案是什么？手动跟踪子订单它们是没有选择的，它们在不同的时间得到确认，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:52:17.143

不同的解决方案：

1.  您拆分订单：零售商将收到不同的货物、不同的 ASN 等（均指同一个 RetailersOrderNumber）。但是......并非所有零售商都想要这个/可以处理这个。
2.  零售商拆分订单（在大多数情况下，这意味着您将在他们的系统中成为 3 个不同的制造商 ;-)
3.  工厂交付给一个（制造商）DC，在那里完成所有订单/发货处理。

（AFAIK 这些是可能性....）

亲切的问候，亨克詹

# r - 如何识别 R 箱线图中异常值的标签？

> ID：11134348
> 
> 赞同：6
> 
> 时间：2012-06-21T08:31:36.623
> 
> 标签：r, plot, outliers

R boxplot 函数是查看数据的一种非常有用的方法：它可以快速为您提供数据的大致位置和方差以及异常值数量的可视化摘要。另外，我想识别异常值，以便快速发现数据集中的问题。

可以使用 访问这些异常值的值`myplot$out`。不幸的是，这些异常值的*标签*似乎不可用。有一些包旨在在绘图本身上显示标签：[http](http://www.r-statistics.com/2011/01/how-to-label-all-the-outliers-in-a-boxplot/) ://www.r-statistics.com/2011/01/how-to-label-all-the-outliers-in-a-boxplot/ ，但是它们效果不佳，我只想列出这些异常值，我不需要它们出现在情节本身上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-21T08:49:00.940

你自己完成了大部分艰苦的工作。剩下的就是比较：

```
##First create some data 
##You should include this in your question)
set.seed(2)
dd = data.frame(x = rlnorm(26), y=LETTERS) 
```

抓住异常值

```
outliers = boxplot(dd$x, plot=FALSE)$out 
```

从原始数据框中提取异常值

```
dd[dd$x %in% outliers,] 
```

* * *

**进一步说明：**

变量`dd$x`是 26 个数字的向量。该变量`outliers`包含异常值的值（只需在 R 控制台中键入`dd$x`和）。`outliers`命令

```
dd$x %in% outliers 
```

匹配 dd$x 和异常值的值，即：

```
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE <snip> 
```

方括号表示法`dd[dd$x %in% outliers,]`返回数据框的行`dd`，其中`dd$x %in% outliers`return `TRUE`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:50:45.427

我建议`which(x < myplot$stats[1] | x > myplot$stats[5])`x 是您的数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T08:59:32.060

如果输入的数据是具有命名元素的向量，则箱线图会保留名称。

```
set.seed(2)
x <- rlnorm(26)
names(x) <- LETTERS
outliers <- boxplot(x, plot=FALSE)$out
outliers
       I        O        U        X 
7.275219 5.943089 8.091541 7.061459 
```

# iphone - 在 Objective-c 中，比较 2 个 BOOL 值的安全和好方法？

> ID：11134352
> 
> 赞同：9
> 
> 时间：2012-06-21T08:31:43.807
> 
> 标签：iphone, objective-c, boolean, compare

我想比较 Objective-c 中的 2 个 BOOL 值。

我发现以下代码中的 (3)-(6) 有效。
(1)-(2) 不起作用，因为 BOOL 只是`signed char`.

(3) 有效且可读性强，但我认为`bool`不是objective-c。在objective-c代码中
使用好吗？`bool`

在objective-c中比较2个BOOL值的安全和好方法是什么？
还有其他更好的比较方法吗？

```
BOOL b = YES;
BOOL c = 2;

NSLog(@"(1) %d", b == c); // not work
NSLog(@"(2) %d", (BOOL)b == (BOOL)c); // not work
NSLog(@"(3) %d", (bool)b == (bool)c);
NSLog(@"(4) %d", !b == !c);
NSLog(@"(5) %d", !!b == !!c);
NSLog(@"(6) %d", (b != 0) == (c != 0)); 
```

结果：

```
(1) 0
(2) 0
(3) 1
(4) 1
(5) 1
(6) 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T10:05:30.997

比较两个布尔值应该使用 XOR 操作来处理。

试图直接比较两个布尔值是对布尔代数基础的误用： [http://en.wikipedia.org/wiki/Boolean_algebra_(logic)](http://en.wikipedia.org/wiki/Boolean_algebra_(logic))

当你在做

```
BOOL a = (b == c); 
```

那么即使 b 和 c 都为真，该值也可能返回假。但是，如果 b 和 c 都为真，即大于 0，则表达式 b && c 将始终返回 YES，否则返回 NO。

相反，这是您实际尝试做的事情：

```
BOOL xor = b && !c || !b && c;
BOOL equal = !xor; 
```

相当于

```
BOOL equal = !(b && !c || !b && c); 
```

或者

```
BOOL equal = (b && c) || (!b && !c) 
```

如果您必须花时间确保您的 BOOL 值已标准化（即设置为 1 或 0），那么您做错了什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T08:58:07.100

在 Objective-C 中使用它是完全有效的，`bool`因为它是 C99 标准（第 7.16 节）的一部分。在我看来，这也是处理布尔类型安全比较的最佳方式。

`bool`不到处使用的唯一原因是它`BOOL`在 Objective-C 和框架中无处不在。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T09:37:09.527

除了其他答案之外，我想指出比较布尔值是否相等**并不是**一个非常常见的操作。`BOOL`不是一种类型，它只是一个宏，它隐藏了布尔值只是整数的事实。对于每个布尔运算，您应该使用可以正确处理整数作为布尔值的编程结构和运算符：

例如： `if (condition1 == NO) {}`应该是`if (!condition1) {}`

`if (condition1 == condition2) {}`
可以
`if ((condition1 && condition2) || (!condition1 && !condition2)) {}`
或更好
`BOOL newCondition = (condition1 && condition2) || (!condition1 && !condition2); if (newCondition) {}`

编写条件的最短方式不一定是最好的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:38:02.120

`BOOL`通过回答“2”是什么意思，将您的号码转换为有效号码

在您的上下文中，是 2 = YES

```
Int number = 2;
BOOL c = (number == 2); //2 is YES 
```

是 > 0 = 是

```
Int number = 2;
BOOL c = (number > 0); //2 is YES 
```

这很大程度上取决于您的应用程序中什么是 TRUE 什么是 False

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T08:42:22.067

来自`objc.h`：

```
typedef signed char     BOOL; 
....

#define YES             (BOOL)1
#define NO              (BOOL)0 
```

显然， BOOL 是`signed char`，所以确实可以将数字分配给`BOOL`类型的变量，这会弄乱比较（因为比较是整数比较）。

我认为您的 (4) 使用否定将任意整数值转换为 0 或 1 的方法是安全比较 2 BOOL 的逻辑值的好方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-03-19T22:46:13.113

如果您将整数 2 分配给 BOOL 类型的变量，您的代码将被破坏。在那之后，无论你得到什么，这都是你应得的。

因此，比较两个 BOOL a 和 b 的唯一合理方法是

```
if (a == b) ...
if (a != b) ... 
```

# delphi - 库/包正确管理 - 设置路径

> ID：11134358
> 
> 赞同：2
> 
> 时间：2012-06-21T08:32:15.827
> 
> 标签：delphi, package, components, delphi-xe2

我在一个小组项目中有一堆自定义包。几个小时以来，我试图正确设置搜索/输出路径。但即使编译的源代码在某个路径中 - 它对其他包（需要它）不可见。

```
Required package 'PackageName' not found 
```

或者如果它看到了

`Never-build package 'PackageName' must be recompiled`（当然重新编译没有帮助）

或者

`Unable to install...`（好吧，但是为什么？）

我没有任何可能是问题的重复编译源。

毫无问题地管理这些路径的最佳方法是什么？

（已阅读[构建服务器：管理第三方组件的最佳实践？](https://stackoverflow.com/questions/1017023/build-server-best-practices-managing-third-party-components)）

# c - 使用 dSFMT 进行随机浮点 (0,1)

> ID：11134362
> 
> 赞同：0
> 
> 时间：2012-06-21T08:32:33.963
> 
> 标签：c, random, floating-point, prng, mersenne-twister

这个项目在 iphone 的 Obj-C 中。我在这里使用双浮点版本的 sfmt：http: [//www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/SFMT/#dSFMT](http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/SFMT/#dSFMT)

在用当前时间播种 dsmft 之后，我打电话给：

```
r = dsfmt_gv_genrand_close_open() 
```

生成一个介于 0 和 1 之间的随机浮点数。还有其他两个选项，即：

```
r = dsfmt_gv_genrand_open_close()
r = dsfmt_gv_genrand_open_open() 
```

我从文档中知道，区别在于 0 或 1 侧是打开还是关闭，并以数学方式显示：[0,1)、(0,1] 或 (0,1)。

但我不知道这意味着什么，或者使用哪个来满足我的需要。我只想要 0 到 1 之间分布最均匀的浮点数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:43:25.513

[0, 1) 表示生成的浮点数可能为0，但绝不为1（左侧为闭区间，右侧为开区间）

(0, 1] 表示生成的float可能为1，但绝不为0（右为闭区间，左为开区间）

(0, 1) 表示生成的数字不能为 0 也不能为 1。

选择哪一个？我假设这个库写得很好，所以所有这三个函数都应该返回一个均匀分布的数字。要选择的确切功能完全取决于您要完成的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T00:01:20.947

谢谢H2CO3。我还为查找此问题的任何人找到了更多信息：

[http://en.wikipedia.org/wiki/Interval_](http://en.wikipedia.org/wiki/Interval_(mathematics) (数学)

括号表示排除端点，方括号表示包含。

因此，如果我想排除零，但包括 1： (0 < r <= 1)

我用：

```
r = dsfmt_gv_genrand_open_close() 
```

这是（0,1]

# android - 在钛中使用 touchdb 进行 Android 应用程序

> ID：11134363
> 
> 赞同：0
> 
> 时间：2012-06-21T08:32:36.060
> 
> 标签：android, titanium, touchdb

我必须在钛中使用 touchdb 来进行 android 应用程序，但我不明白我必须使用什么插件以及如何配置和使用它.. 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:39:28.940

我觉得你有点困惑。

首先插件是PhoneGap调用其扩展的方式，你使用PhoneGap/Cordova还是Titanium？

在第二种情况下，您需要一个本机模块。这两个平台似乎都有一个休眠项目，也许你可以从中获得一些[灵感](https://github.com/pegli/couchdb_client)。

EC：这是一个“或多或少”的活动 TouchDB 模块，适用于两个平台[TiTouchDB](https://github.com/pegli/ti_touchdb)！！！享受。

# c# - 使用 SQL 的 DBConnection 超时

> ID：11134365
> 
> 赞同：2
> 
> 时间：2012-06-21T08:32:43.773
> 
> 标签：c#, sql, database, timeout

我正在使用 C# 创建简单的应用程序，该应用程序将在 1 分钟后重复检查数据库。我正在使用线程使其更具方式并减少资源。这些线程将仅在一次同步执行一个函数。

我的问题是

> 异常未处理：DBConnection
> Timeout 已过期。在操作完成之前超时时间已过或服务器没有响应。

我了解我与数据库的连接超过了时间限制。那么，如何解决这个问题呢？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using GDEX.Master;
using GDEX.DataAccess;
using System.Globalization;
using System.IO;
using System.Threading;

namespace SMPPTransfer
{
    public partial class frmDBTS : Form
    {
        string updateProbRecord = string.Empty;
        string selectProbRecord = string.Empty;
        string selectProbStat = string.Empty;
        string updateStat = string.Empty;
        string selectAssignTo = string.Empty;
        string CheckPODStatus = string.Empty;

        DataTable dtStat = null;
        DataTable dtPOD = null;
        DataTable dtAssignNo = null;

        bool stopThreads = false;
        AutoResetEvent blockThread1 = new AutoResetEvent(true);
        AutoResetEvent blockThread2 = new AutoResetEvent(false);

        delegate void SetTextCallback(string text);
        GDexSqlSvConnection dbCon;

        public frmDBTS()
        {
            InitializeComponent();
            String connSQLSvr = "Data Source=<my IP>;Initial Catalog=<database>;User ID=<username>;Password=<pwd>;";
            dbCon = new GDexSqlSvConnection(connSQLSvr);

            Thread thread1 = new Thread(new ThreadStart(UpdateProbRec));
            Thread thread2 = new Thread(new ThreadStart(UpdateProbStat));

            thread1.Start();
            thread2.Start();
        }

        private void UpdateProbRec()
        {
            while (stopThreads == false)
            {
                blockThread1.WaitOne();

                SetText1("Entered Thread 1");
                SetText2("Out Thread 2");                

                //Get POD status
                CheckPODStatus = "select top 100 * from (select cn"
                                 + " FROM gdexpdb.dbo.prob_record where solve = 'N' and status!='S') A "
                                 + " join (select cn, cn_date"
                                 + " from gdexpdb.dbo.pod_data where type='rts' or type = 'pod' or type = 'm_pod' or type = 'm_rts') B "
                                 + "on A.CN=B.cn";

                dtPOD = dbCon.ExecuteQueryAndGetDataTable(CheckPODStatus); //Problem occur from here and only for this function only

                DateTime cnDate;
                string cnDateCon;
                for (int iii = 0; iii < dtPOD.Rows.Count; iii++)
                {
                    cnDate = (DateTime)dtPOD.Rows[iii][2];

                    cnDateCon = cnDate.ToString("yyyy-MM-dd");

                    updateProbRecord = "update gdexpdb.dbo.prob_record set solve='Y', solve_date='" + cnDateCon + "', status='S' "
                                        + "where cn='" + dtPOD.Rows[iii][0] + "'";
                    dbCon.ExecuteNonQuery(updateProbRecord);
                }

                dtPOD.Clear();
                Thread.Sleep(30000);
                blockThread2.Set();
            }
        }

        private void UpdateProbStat()
        {
            while (stopThreads == false)
            {
                blockThread1.WaitOne();

                SetText2("Entered Thread 2");
                SetText1("Out Thread 1");

                selectProbStat = "select username from gdexpdb.dbo.prob_stat";

                dtStat = dbCon.ExecuteQueryAndGetDataTable(selectProbStat);
                int[] userNo = new int[dtStat.Rows.Count];

                for (int x = 0; x < dtStat.Rows.Count; x++)
                {
                    selectAssignTo = "select count(*) as assignNo from gdexpdb.dbo.prob_record where assign_to='" + dtStat.Rows[x][0]+ "'";
                    dtAssignNo = dbCon.ExecuteQueryAndGetDataTable(selectAssignTo);

                    updateStat = "update gdexpdb.dbo.prob_stat set stat=" + dtAssignNo.Rows[0][0] + "where username='" + dtStat.Rows[x][0] + "'";
                    dbCon.ExecuteNonQuery(updateStat);
                }

                dtStat.Clear();
                dtAssignNo.Clear();
                Thread.Sleep(100000);
                blockThread1.Set();
            }
        }

        private void SetText1(string text)
        {
            // InvokeRequired required compares the thread ID of the
            // calling thread to the thread ID of the creating thread.
            // If these threads are different, it returns true.
            if (this.TextThread1.InvokeRequired)
            {
                SetTextCallback d = new SetTextCallback(SetText1);
                this.Invoke(d, new object[] { text });
            }
            else
            {
                this.TextThread1.Text = text;
            }
        }

        private void SetText2(string text)
        {
            // InvokeRequired required compares the thread ID of the
            // calling thread to the thread ID of the creating thread.
            // If these threads are different, it returns true.
            if (this.TextThread2.InvokeRequired)
            {
                SetTextCallback d = new SetTextCallback(SetText2);
                this.Invoke(d, new object[] { text });
            }
            else
            {
                this.TextThread2.Text = text;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:39:51.950

内部`GDexSqlSvConnection`类 - Functions`ExecuteQueryAndGetDataTable`和`ExecuteNonQuery`其他... 将`CommandTimeout`属性设置为您用于查询数据库的数据库命令实例。

例如：

```
MyCommand.CommandTimeout = 120; // 2 Minutes Timeout 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T08:58:54.660

您可以使用该`Connect Timeout`属性在连接字符串中指定更长的连接超时。将其设置为 0 意味着它不会超时。

```
Connect Timeout=0 
```

参考：[连接字符串选项](http://www.connectionstrings.com/articles/show/all-sql-server-connection-string-keywords)

虽然，这会让你克服当前的问题，但你真正需要做的是修复你的查询。

**简单的选择和更新不应导致数据库超时。**

要加快这些查询：

1.  在您的表上创建适当的索引
2.  对表进行分区，如果它们非常大，请使用不同的文件组。
3.  检查分配给数据库服务器的资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:17:52.933

超时可以是 DbConnection 上的 ConnectionTimeout 或 DbCommand 上的 CommandTimeout——通常是最后一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T08:43:05.763

我认为这篇文章可以帮助你

[SQL Server 连接超时已过期](http://social.msdn.microsoft.com/Forums/da-DK/adodotnetdataproviders/thread/0ce80080-c503-4b51-b7a8-62b22a88ba8b)

# php - 如何在运行时在php中重写URL

> ID：11134366
> 
> 赞同：0
> 
> 时间：2012-06-21T08:32:56.553
> 
> 标签：php, .htaccess, redirect, xampp

有[我的网站](http://pepper.pk/berrysnooper)

对于 SEO，我`.php`已从所有链接中删除了扩展名。现在我想`.php`使用 .htaccess 文件添加扩展名。我怎么能做到这一点。我不知道使用 htaccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:34:43.183

采用[`MultiViews`](http://httpd.apache.org/docs/2.0/mod/mod_negotiation.html#multiviews)

让 Apache 为您做这件事。

把它放在你的`.htaccess`文件中：

```
Options +MultiViews 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:37:02.987

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^someName-([0-9]+)\.html$ someName.php?id=$1 [NC] 
```

这会将 */someName-f435weS.html 转发到 someName.php?id=f435weS

来源：[http ://roshanbh.com.np/2008/02/hide-php-url-rewriting-htaccess.html](http://roshanbh.com.np/2008/02/hide-php-url-rewriting-htaccess.html)

# .net - Proto-Buf.Net 和序列化

> ID：11134370
> 
> 赞同：1
> 
> 时间：2012-06-21T08:33:14.297
> 
> 标签：.net, c#-4.0, protobuf-net, patricia-trie

我在使用 protobuf.net 序列化对象时遇到问题。我已经在其他课程上使用过它并且效果很好，但是使用它却不行。

能不能帮我说说原因。谢谢。

我想使用 protobuf，因为 BinaryFormatter 在序列化/反序列化方面非常慢。

这是课程：

```
using System.Collections.Generic;
using System;
using ProtoBuf;
using System.Xml.Serialization;
using System.Runtime.Serialization;

namespace RadixTree
{
[Serializable, DataContract, ProtoContract]
public class Node<T>
{
    private readonly List<Node<T>> children = new List<Node<T>>();
    private readonly string key;
    private T value;
    public Node(string key, T value)
    {
        this.key = key;
        this.value = value;
    }
    private Node()
    {
    }
    protected bool HasChildren
    {
        get { return children.Count > 0; }
    }
    public void Insert(string key, T value)
    {
        var potentialChild = new Node<T>(key, value);
        Add(potentialChild);
    }
    private bool Add(Node<T> theNewChild)
    {
        if (Contains(theNewChild))
            throw new DuplicateKeyException(string.Format("Duplicate key: '{0}'", theNewChild.key));

        if (!IsParentOf(theNewChild))
            return false;

        bool childrenObligedRequest = RequestChildrenToOwn(theNewChild);
        if (childrenObligedRequest) return true;

        AcceptAsOwnChild(theNewChild);
        return true;
    }
    private bool RequestChildrenToOwn(Node<T> newChild)
    {
        return
            children.Exists(
                existingChild =>
                existingChild.MergeIfSameAs(newChild) || existingChild.Add(newChild) ||
                ForkANewChildAndAddChildren(existingChild, newChild));
    }
    private bool MergeIfSameAs(Node<T> potentialChild)
    {
        if (!IsTheSameAs(potentialChild) || IsNotUnrealNode())
            return false;

        value = potentialChild.value;
        return true;
    }
    private bool IsNotUnrealNode()
    {
        return !IsUnrealNode();
    }
    private void Disown(Node<T> existingChild)
    {
        children.Remove(existingChild);
    }
    private Node<T> AcceptAsOwnChild(Node<T> child)
    {
        if (NotItself(child)) children.Add(child);
        return this;
    }
    private bool NotItself(Node<T> child)
    {
        return !Equals(child);
    }
    private bool ForkANewChildAndAddChildren(Node<T> existingChild, Node<T> newChild)
    {
        if (existingChild.IsNotMySibling(newChild))
            return false;

        var surrogateParent = MakeASurrogateParent(existingChild, newChild);
        if (surrogateParent.IsTheSameAs(this))
            return false;

        SwapChildren(existingChild, newChild, surrogateParent);
        return true;
    }
    private bool IsNotMySibling(Node<T> newChild)
    {
        return !IsMySibling(newChild);
    }
    private void SwapChildren(Node<T> existingChild, Node<T> newChild, Node<T> surrogateParent)
    {
        surrogateParent.AcceptAsOwnChild(existingChild)
            .AcceptAsOwnChild(newChild);

        AcceptAsOwnChild(surrogateParent);
        Disown(existingChild);
    }
    private Node<T> MakeASurrogateParent(Node<T> existingChild, Node<T> newChild)
    {
        string keyForNewParent = existingChild.CommonBeginningInKeys(newChild);
        keyForNewParent = keyForNewParent.Trim();
        var surrogateParent = new Node<T>(keyForNewParent, default(T));

        return surrogateParent.IsTheSameAs(newChild) ? newChild : surrogateParent;
    }
    private bool IsTheSameAs(Node<T> parent)
    {
        return Equals(parent);
    }
    private bool IsMySibling(Node<T> potentialSibling)
    {
        return CommonBeginningInKeys(potentialSibling).Length > 0;
    }
    private string CommonBeginningInKeys(Node<T> potentialSibling)
    {
        return key.CommonBeginningWith(potentialSibling.key);
    }
    internal virtual bool IsParentOf(Node<T> potentialChild)
    {
        return potentialChild.key.StartsWith(key);
    }
    public bool Delete(string key)
    {
        Node<T> nodeToBeDeleted = children.Find(child => child.Find(key) != null);
        if (nodeToBeDeleted == null) return false;

        if (nodeToBeDeleted.HasChildren)
        {
            nodeToBeDeleted.MarkAsUnreal();
            return true;
        }

        children.Remove(nodeToBeDeleted);
        return true;
    }
    private void MarkAsUnreal()
    {
        value = default(T);
    }
    public T Find(string key)
    {
        var childBeingSearchedFor = new Node<T>(key, default(T));
        return Find(childBeingSearchedFor);
    }
    private T Find(Node<T> childBeingSearchedFor)
    {
        if (Equals(childBeingSearchedFor)) return value;
        T node = default(T);
        children.Find(child =>
                          {
                              node = child.Find(childBeingSearchedFor);
                              return node != null;
                          });
        if (node == null) return default(T);
        return node;
    }
    public bool Contains(string key)
    {
        return Contains(new Node<T>(key, default(T)));
    }
    private bool Contains(Node<T> child)
    {
        if (Equals(child) && IsUnrealNode()) return false;

        if (Equals(child)) return true;

        return children.Exists(node => node.Contains(child));
    }
    private bool IsUnrealNode()
    {
        return value == null;
    }
    public List<T> Search(string keyPrefix)
    {
        var nodeBeingSearchedFor = new Node<T>(keyPrefix, default(T));
        return Search(nodeBeingSearchedFor);
    }
    private List<T> Search(Node<T> nodeBeingSearchedFor)
    {
        if (IsTheSameAs(nodeBeingSearchedFor))
            return MeAndMyDescendants();

        return SearchInMyChildren(nodeBeingSearchedFor);
    }
    private List<T> SearchInMyChildren(Node<T> nodeBeingSearchedFor)
    {
        List<T> searchResults = null;

        children.Exists(existingChild => (searchResults = existingChild.SearchUpAndDown(nodeBeingSearchedFor)).Count > 0);

        return searchResults;
    }
    private List<T> SearchUpAndDown(Node<T> node)
    {
        if (node.IsParentOf(this))
            return MeAndMyDescendants();

        return IsParentOf(node) ? Search(node) : new List<T>();

    }
    private List<T> MeAndMyDescendants()
    {
        var meAndMyDescendants = new List<T>();
        if (!IsUnrealNode())
            meAndMyDescendants.Add(value);

        children.ForEach(child => meAndMyDescendants.AddRange(child.MeAndMyDescendants()));
        return meAndMyDescendants;
    }
    public long Size()
    {
        const long size = 0;
        return Size(size);
    }
    private long Size(long size)
    {
        if (!IsUnrealNode())
            size++;

        children.ForEach(node => size += node.Size());
        return size;
    }
    public override string ToString()
    {
        return key;
    }
    public bool Equals(Node<T> other)
    {
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;
        return Equals(other.key, key);
    }
    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof (Node<T>)) return false;
        return Equals((Node<T>) obj);
    }
    public override int GetHashCode()
    {
        return (key != null ? key.GetHashCode() : 0);
    }
    public static Node<T> Root()
    {
        return new RootNode<T>();
    }
    public List<Node<T>> getChildren()
    {
        return children;
    }
    [Serializable, DataContract, ProtoContract]
    private class RootNode<T> : Node<T>
    {
        public RootNode() { }
        internal override bool IsParentOf(Node<T> potentialChild)
        {
            return true;
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:39:34.430

`DataContractSerializer`因为 protobuf-net以及诸如此类的东西`XmlSerializer`不仅仅适用于字段。它需要*有关*要序列化哪些字段以及如何识别它们的信息（尽管有*一个*隐式选项，但我尽量不推荐它）。例如：

```
[ProtoMember(3)] private readonly List<Node<T>> children = new List<Node<T>>();
[ProtoMember(1)] private readonly string key;
[ProtoMember(2)] private T value; 
```

然后应该可以正常工作。

（还有其他方法可以指示要序列化的成员 - 属性只是最方便的；对于信息，同样适用于`[DataMember(Order=n)]`，因为您的类型也被标记为 a `[DataContract]`）

* * *

以下对我来说很好：

```
[Test]
public void Main()
{
    Node<int> tree = new Node<int>("abc", 1), clone;
    var children = tree.getChildren();
    children.Add(new Node<int>("abc/def", 2));
    children.Add(new Node<int>("abc/ghi", 3));
    Assert.AreEqual(2, tree.getChildren().Count);

    using(var ms = new MemoryStream())
    {
        Serializer.Serialize(ms, tree);
        Assert.Greater(1, 0); // I always get these args the wrong way around, 
        Assert.Greater(ms.Length, 0); // so I always double-check!
        ms.Position = 0;
        clone = Serializer.Deserialize<Node<int>>(ms);
    }

    Assert.AreEqual("abc", clone.Key);
    Assert.AreEqual(1, clone.Value);
    children = clone.getChildren();
    Assert.AreEqual(2, children.Count);

    Assert.IsFalse(children[0].HasChildren);
    Assert.AreEqual("abc/def", children[0].Key);
    Assert.AreEqual(2, children[0].Value);

    Assert.IsFalse(children[1].HasChildren);
    Assert.AreEqual("abc/ghi", children[1].Key);
    Assert.AreEqual(3, children[1].Value);
} 
```

* * *

编辑以下项目示例：

首先，请注意`RootNode<T>`实际上应该只是- 嵌套类型已经从包含类型`RootNode`继承。`T`

这里有两个问题：

首先，有一个问题`RootNode`——你是对的，需要声明这种关系，但是 C# 编译器不喜欢属性中的泛型。坦率地说，我会说*封装*根而不是继承。如果你必须继承，那很痛苦，你必须在运行时声明它，即

```
RuntimeTypeModel.Default.Add(typeof(Node<MyDto>), true)
     .AddSubType(4, typeof(Node<MyDto>.RootNode)); 
```

第二个问题是嵌套列表/数组；`children`将是一个`List<List<YourType>>`. 目前，*不支持*这种情况，虽然我有点困惑为什么它没有引发异常——它是*为了*抛出一个`NotSupportedException`引用：

> 不支持嵌套或锯齿状列表和数组

我会调查为什么它没有提出这个问题！

这里的问题是protobuf规范（在我的控制之外）没有办法表示这样的数据，除非中间有一条消息，即

```
[ProtoContract]
class SomeNewType {
    [ProtoMember(1)]
    public List<MyDto> Items {get {return items;}}
    private readonly List<MyDto> items = new List<MyDto>();
} 
```

并使用`Node<SomeNewType>`而不是`Node<List<MyDto>>`.

*理论上*，protobuf-net 可以*假装*该层在中间，然后继续进行——但很简单：我还没有时间设计/编写/测试执行此操作所需的代码。

# android - 如何在 Android 应用程序中保持与 Facebook 的连接

> ID：11134371
> 
> 赞同：5
> 
> 时间：2012-06-21T08:33:16.363
> 
> 标签：android, facebook, authentication

我正在开发一个需要集成 Facebook 社交功能的应用程序。

在我的应用程序中，有一个按钮可以将用户连接到他的 Facebook 个人资料。当用户按下此按钮时，我只使用 Facebook 网站和用户 Facebook 页面打开一个 web 视图。现在假设我知道他的电子邮件和密码，我想自动连接他，他不必每次都输入他的电子邮件和密码。我试图解决它抛出我的下一个[问题](https://stackoverflow.com/questions/11117516/move-to-the-facebook-application-page-after-authenticate-through-single-sign-on)，但你可以看到没有成功。

我还尝试使用 CookieSyncManager、CookieManager 和手动处理来持久化 cookie。

我想我可以通过更改发送到 webView 的 url 来解决它，但我不知道是哪个 url。（尝试`http://www.facebook.com/connect/connect_to_external_page_widget_loggedin.php`然后`http://www.facebook.com/plugins/login.php`连接用户 Facebook 页面的 url，例如`http://www.facebook.com/UserProfile`）

我真的很感激任何帮助！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T08:35:59.063

您不能手动将用户登录到 facebook。这就是 oAuth 的重点，该过程对您的应用程序应该是透明的，当用户完成身份验证后，您的应用程序将只会获得一个 AccessToken。

从那时起，AccessToken 几乎可以永远与您同在。

在以下情况下无效：

1.  **会话到期**

    这可以通过添加调用来解决，`onResume()`假设您使用 Facebook Android SDK 进行 facebook 的身份验证/集成。调用成功后，您的令牌有效期为 60 天。

    ```
    public void onResume() {    
        super.onResume();
        facebook.extendAccessTokenIfNeeded(this, null);
    } 
    ```

2.  **用户更改他的密码**

3.  **用户取消对您的应用的授权**

4.  **用户退出 Facebook**

    这三种情况你无能为力！您的令牌将失效，您必须要求用户使用正常流程重新进行身份验证。

[按照本教程将 Facebook 集成到您的 Android 应用程序中](https://developers.facebook.com/docs/mobile/android/build/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T08:17:07.593

有一种方法可以使用 SDK 身份验证而不是 SSO，如下所述：[How to disable Facebook single sign on for android - Facebook-android-sdk](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)。
但我认为这只会导致糟糕的用户体验，因为用户需要输入他的电子邮件/密码，这对于大多数移动设备来说并不是一项有趣的任务。

如果用户安装了 facebook 应用程序 (katana)（这意味着使用 SSO），那么您应该能够通过使用意图使用用户配置文件打开它。
我以前从未这样做过，但是从这两个线程：
[从其他应用程序启动 facebook 应用程序](https://stackoverflow.com/questions/4191492/launch-facebook-app-from-other-app)
并
[从 android 应用程序打开一个 facebook 页面，](https://stackoverflow.com/questions/10299777/open-a-facebook-page-from-android-app)
看起来您可以执行以下操作：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setClassName("com.facebook.katana", "com.facebook.katana.ProfileTabHostActivity");
this.startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:40:14.360

要连接到 facebook，您首先要学习 Oauth。Oauth 是访问 Facebook 详细信息的一次性验证。密码不需要每次。浏览本[文档。](http://developers.facebook.com/docs/guides/mobile/#android)

这个[文件](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)也对你有用。

# c++ - 使用等式进行地图比较

> ID：11134376
> 
> 赞同：0
> 
> 时间：2012-06-21T08:33:35.487
> 
> 标签：c++, stl

我知道在对地图进行排序时使用相等而不是等价是不好的做法。

```
//Equality
bool isEqual(const A& a1, const A& a2 ) 
{
   return a1 == a2 ;
} 
```

但是，我有几个非常复杂的类要映射，并且我为这些类定义了 operator==，但没有定义 operator<。

谁能给我充分的理由不使用 operator== 进行地图比较？我想不出它会在我的课堂上崩溃的例子（如果需要，我可以添加我的课堂源代码）

我也应该咬住构建并编写新的操作符< :-/ 吗？

我会为我的地图做这样的事情。

```
 std::map<A,B,isEqual> ex1; 
```

也会

```
 ex1.find(A); 
```

现在使用相等而不是等价？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:36:25.997

因为`std::map`,`std::set`和它们的`multi`兄弟是按照 C++ 标准排序的结构，并且相等不能用于排序。另一方面，严格的弱排序**可**用于确定相等性。

至于为什么对结构进行排序，标准要求插入和查找具有对数复杂度，这可以通过使用二叉搜索树来实现。在这种结构中进行相等比较的唯一用途是测试元素是否存在。

如果你只有相等比较，那么元素查找将不得不遍历结构，每次进行比较直到找到元素，导致线性时间复杂度。

如果你这样做了

```
std::map<A,B,isEqual> ex1; 
```

then the map's comparison would not satisfy [strict weak ordering](http://en.wikipedia.org/wiki/Strict_weak_ordering), so neither the sorting of the map nor the element lookup would work. So iisn't just bad practice, it just doesn't work at all. You have to either implement `operator<` or provide a comparison functor, and which ever one you chose has to implement strict weak ordering. There is simply no way around that.

# r - 带有 gridSVG 和 ggplot2 v.0.9.0 的交互式点标签

> ID：11134379
> 
> 赞同：15
> 
> 时间：2012-06-21T08:33:44.973
> 
> 标签：r, ggplot2

我想以交互方式在 ggplot 中标记点，以便将鼠标悬停在一个点上会显示一个标签。

我正在尝试调整这个问题中给出的答案，[以便](https://stackoverflow.com/questions/8972642/how-do-you-relate-ggplot2-grobs-back-to-the-data)它在最新版本的 ggplot2 中工作。受ggplot google group评论的影响，[在这里](https://groups.google.com/forum/?fromgroups#!topic/ggplot2/PujkP1QvvCM)，我使用了最新版本的geom-point-.r作为模板，在各个地方的gp参数中添加了“label”字段。然后我从 kohske 的答案中复制了剩余的代码。但它不起作用——生成的 svg 中没有任何标签，我不知道为什么。

我确实注意到里面的所有内容`point_grobs_labels`都是空的，当我查看时`grid.get(point_grob_names[1])$gp`，没有标签字段......

```
library(ggplot2)
library(gridSVG)
library(proto)
library(rjson)

geom_point2 <- function (mapping = NULL, data = NULL, stat = "identity", 
                         position = "identity",
                         na.rm = FALSE, ...) {
  ggplot2:::GeomPoint$new(mapping = mapping, data = data, stat = stat, 
                          position = position, 
                          na.rm = na.rm, ...)
}

GeomPoint2 <- proto(ggplot2:::Geom, {
  objname <- "point"

  draw_groups <- function(., ...) .$draw(...)
  draw <- function(., data, scales, coordinates, na.rm = FALSE, ...) {    
    data <- remove_missing(data, na.rm, 
                           c("x", "y", "size", "shape"), name = "geom_point")
    if (empty(data)) return(zeroGrob())

    with(coord_transform(coordinates, data, scales), 
         ggname(.$my_name(), pointsGrob(x, y, size=unit(size, "mm"), pch=shape, 
                                        gp=gpar(
                                          col=alpha(colour, alpha),
                                          fill = alpha(fill, alpha),  
                                          label = label, 
                                          fontsize = size * .pt)))
    )
  }

  draw_legend <- function(., data, ...) {
    data <- aesdefaults(data, .$default_aes(), list(...))

    with(data,
         pointsGrob(0.5, 0.5, size=unit(size, "mm"), pch=shape, 
                    gp=gpar(
                      col = alpha(colour, alpha), 
                      fill = alpha(fill, alpha), 
                      label = label,
                      fontsize = size * .pt)
         )
    )
  }

  default_stat <- function(.) StatIdentity
  required_aes <- c("x", "y")
  default_aes <- function(.) aes(shape=16, colour="black", size=2, 
                                 fill = NA, alpha = NA, label = NA)

})

p <- ggplot(mtcars, aes(mpg, wt, label = rownames(mtcars))) + geom_point2() + facet_wrap(~ gear)
print(p)

grob_names <- grid.ls(print = FALSE)$name
point_grob_names <- sort(grob_names[grepl("point", grob_names)])
point_grobs_labels <- lapply(point_grob_names, function(x) grid.get(x)$gp$label)  

jlabel <- toJSON(point_grobs_labels)

grid.text("value", 0.05, 0.05, just = c(0, 0), name = "text_place", gp = gpar(col = "red"))

script <- '
var txt = null;
function f() {
var id = this.id.match(/geom_point2.([0-9]+)\\.points.*\\.([0-9]+)$/);
txt.textContent = label[id[1]-1][id[2]-1];
}

window.addEventListener("load",function(){
var es = document.getElementsByTagName("circle");
for (i=0; i<es.length; ++i) es[i].addEventListener("mouseover", f, false);

txt = (document.getElementById("text_place").getElementsByTagName("tspan"))[0];

},false);
'

grid.script(script = script)
grid.script(script = paste("var label = ", jlabel))

gridToSVG() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T12:50:00.420

试试这个：

```
library(ggplot2)
library(gridSVG)
library(proto)
library(rjson)
mtcars2 <- data.frame(mtcars, names = rownames(mtcars))

geom_point2 <- function (...) {
  GeomPoint2$new(...)
}

GeomPoint2 <- proto(ggplot2:::Geom, {
  objname <- "point"

  draw_groups <- function(., ...) .$draw(...)
  draw <- function(., data, scales, coordinates, na.rm = FALSE, ...) {    
    data <- remove_missing(data, na.rm, 
                           c("x", "y", "size", "shape"), name = "geom_point")
    if (empty(data)) return(zeroGrob())
    name <- paste(.$my_name(), data$PANEL[1], sep = ".")
    with(coord_transform(coordinates, data, scales), 
         ggname(name, pointsGrob(x, y, size=unit(size, "mm"), pch=shape, 
                                        gp=gpar(
                                          col=alpha(colour, alpha),
                                          fill = alpha(fill, alpha),  
                                          label = label, 
                                          fontsize = size * .pt)))
    )
  }

  draw_legend <- function(., data, ...) {
    data <- aesdefaults(data, .$default_aes(), list(...))

    with(data,
         pointsGrob(0.5, 0.5, size=unit(size, "mm"), pch=shape, 
                    gp=gpar(
                      col = alpha(colour, alpha), 
                      fill = alpha(fill, alpha), 
                      label = label,
                      fontsize = size * .pt)
         )
    )
  }

  default_stat <- function(.) StatIdentity
  required_aes <- c("x", "y")
  default_aes <- function(.) aes(shape=16, colour="black", size=2, 
                                 fill = NA, alpha = NA, label = NA)

})

p <- ggplot(mtcars2, aes(mpg, wt, label = names)) + geom_point2() +facet_wrap(~ gear)
print(p)

grob_names <- grid.ls(print = FALSE)$name
point_grob_names <- sort(grob_names[grepl("point", grob_names)])
point_grobs_labels <- lapply(point_grob_names, function(x) grid.get(x)$gp$label)

jlabel <- toJSON(point_grobs_labels)

grid.text("value", 0.05, 0.05, just = c(0, 0), name = "text_place", gp = gpar(col = "red"))

script <- '
var txt = null;
function f() {
    var id = this.id.match(/geom_point.([0-9]+)\\.points.*\\.([0-9]+)$/);
    txt.textContent = label[id[1]-1][id[2]-1];
}

window.addEventListener("load",function(){
    var es = document.getElementsByTagName("circle");
    for (i=0; i<es.length; ++i) es[i].addEventListener("mouseover", f, false);

    txt = (document.getElementById("text_place").getElementsByTagName("tspan"))[0];

},false);
'
grid.script(script = paste("var label = ", jlabel))
grid.script(script = script)

gridToSVG() 
```

没有大的变化，但我不得不补充

```
mtcars2 <- data.frame(mtcars, names = rownames(mtcars)) 
```

进而

```
p <- ggplot(mtcars, aes(mpg, wt, label = rownames(mtcars)))
     + geom_point2() + facet_wrap(~ gear) 
```

也变为

```
p <- ggplot(mtcars2, aes(mpg, wt, label = names)) 
     + geom_point2() +facet_wrap(~ gear) 
```

因为我们有`rownames(mtcars)`

```
rownames(mtcars)
 [1] "Mazda RX4"           "Mazda RX4 Wag"       "Datsun 710"          "Hornet 4 Drive"     
 [5] "Hornet Sportabout"   "Valiant"             "Duster 360"          "Merc 240D"          
 [9] "Merc 230"            "Merc 280"            "Merc 280C"           "Merc 450SE"
..... 
```

然后标签（我们设法通过其他修改获得）保持不变，即不重新排列`gears`，仅由它拆分：

```
point_grobs_labels
[[1]]
 [1] "Mazda RX4"          "Mazda RX4 Wag"      "Datsun 710"         "Hornet 4 Drive"    
 [5] "Hornet Sportabout"  "Valiant"            "Duster 360"         "Merc 240D"         
 [9] "Merc 230"           "Merc 280"           "Merc 280C"          "Merc 450SE"        
[13] "Merc 450SL"         "Merc 450SLC"        "Cadillac Fleetwood"
[[2]]
.... 
```

但是将这些标签名称作为一列可以解决问题。

```
point_grobs_labels 
[[1]]
 [1] "Hornet 4 Drive"      "Hornet Sportabout"   "Valiant"             "Duster 360"         
 [5] "Merc 450SE"          "Merc 450SL"          "Merc 450SLC"         "Cadillac Fleetwood" 
 [9] "Lincoln Continental" "Chrysler Imperial"   "Toyota Corona"       "Dodge Challenger"   
[13] "AMC Javelin"         "Camaro Z28"          "Pontiac Firebird"   

[[2]]
.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T19:02:05.883

感谢 tracy 提出了一个好问题，感谢 Julius 提供了非常有帮助的答案。

为了让 Julius 的 javascript 在 Chrome 和 Safari 中为我工作，我不得不`this.id`用`this.correspondingUseElement.id`. 这是有道理的，因为单个`<circle>`SVG 元素没有每个 geom_point 的 id，我们想要的 id 附加到`<use>`元素上。

即使这对我在 Firefox 中不起作用，所以我将其更改为将事件侦听器附加到`<use>`元素本身。请注意，如果 SVG 更复杂，它可能有`<use>`除了 geom_points 之外的 s，所以我添加了一个`if`仅将事件附加到 geom_point.XX`<use>`元素。这适用于我的 Chrome、Safari 和 Firefox：

```
window.addEventListener("load",function(){
  var es = document.getElementsByTagName("use"); 
  for (i=0; i<es.length; ++i) {
    if(es[i].id.search(/geom_point.([0-9]+)\.points.*\.([0-9]+)$/) >= 0) es[i].addEventListener("mouseover", f, false);
  }
  txt = (document.getElementById("text_place").getElementsByTagName("tspan"))[0];
},false); 
```

（所有其他代码与朱利叶斯的相同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T12:41:44.953

我们通过检测生成的 .svg 中的颜色属性并使用 css 检测鼠标悬停来解决这个问题。结果在此演示的步骤 4、5、6 中可见：

[使用 css 显示 svg 突出显示](http://kwiqly.com/demo)

这是我的第一个 stackoverflow 回复 - 希望我的礼仪正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-20T04:03:35.477

这是一个笼统的答案。我只是在这里帮助您使情节具有互动性。你可以试试这个——

```
library(ggplot2)
library(plotly)

# Plot how you would normally code for ggplot2
p <- ggplot(data,... 'add your variables and subsequent plots')
ggplotly(p) 
```

享受！

# java - 如何以编程方式忘记android中的无线网络？

> ID：11134383
> 
> 赞同：28
> 
> 时间：2012-06-21T08:33:53.210
> 
> 标签：java, android, android-wifi, android-internet, android-wireless

我正在开发一个 wifi 应用程序，用户将被要求输入他选择的扫描网络的密码，如果用户输入正确的密码，它会连接并运行良好。但是当用户输入错误的密码时，会以该名称添加一个新网络，并且将无法验证错误密码的 cos，并且将处于验证问题状态。

现在如果用户尝试再次扫描并选择相同的网络，并输入正确的密码，即使密码正确，它也无法连接，并且将处于禁用状态，因为之前的连接仍然显示身份验证问题状态。

如何解决这个问题呢？有没有办法使用 ConnectivityManager 或 wifimanager 忘记所有网络？或者任何其他解决方案？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-07-17T14:17:45.320

是的，`removeNetwork()`工作。我用它来删除所有网络。

```
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for( WifiConfiguration i : list ) {
    wifiManager.removeNetwork(i.networkId);
    //wifiManager.saveConfiguration();  
} 
```

**wifiManager.saveConfiguration()**

此方法在 API 级别 26 中已弃用。无需调用此方法 - addNetwork(WifiConfiguration)、updateNetwork(WifiConfiguration) 和 removeNetwork(int) 已自动保留配置。

[https://developer.android.com/reference/android/net/wifi/WifiManager.html#saveConfiguration()](https://developer.android.com/reference/android/net/wifi/WifiManager.html#saveConfiguration())

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-21T08:45:33.260

`WifiManager`源代码，有这个方法：

```
/*
 * Delete the network in the supplicant config.
 *
 * This function is used instead of a sequence of removeNetwork()
 * and saveConfiguration().
 *
 * @param config the set of variables that describe the configuration,
 *            contained in a {@link WifiConfiguration} object.
 * @hide
 */

public void forgetNetwork(int netId) {
    if (netId < 0) {
        return;
    }
    mAsyncChannel.sendMessage(CMD_FORGET_NETWORK, netId);
} 
```

但是这个方法是`@hide`，所以我们不能使用它。但根据这个评论：

> 使用此函数代替`removeNetwork()`and 的序列`saveConfiguration()`

您可以尝试使用：`removeNetwork()`而`saveConfiguration()`不是。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T08:40:26.123

您可以使用该[`removeNetwork()`](http://developer.android.com/reference/android/net/wifi/WifiManager.html#removeNetwork%28int%29)方法删除冗余网络连接（尽管我怀疑它们是否具有相同`netId`的连接），然后重新添加连接以避免您遇到的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-10T13:46:23.773

```
wifiManager.saveConfiguration(); 
```

在 Android M 中已弃用。不再需要调用 saveConfiguration，因为 removeNetwork(int) 已经自动持久化配置。

[https://developer.android.com/reference/android/net/wifi/WifiManager.html#saveConfiguration()](https://developer.android.com/reference/android/net/wifi/WifiManager.html#saveConfiguration())

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-15T14:57:39.747

通过这样做，可以获得列表中配置的网络列表，然后立即执行删除并保存。

```
WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE);
        List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
        for( WifiConfiguration i : list ) {
            wifiManager.removeNetwork(i.networkId);
            wifiManager.saveConfiguration();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-17T21:21:50.730

您需要特定的权限。

```
final int numOpenNetworksKept = Build.VERSION.SDK_INT >= 17
                ? Settings.Secure.getInt(resolver, Settings.Global.WIFI_NUM_OPEN_NETWORKS_KEPT, 10)
                : Settings.Secure.getInt(resolver, Settings.Secure.WIFI_NUM_OPEN_NETWORKS_KEPT, 10); 
```

# php - PHP 包含奇怪的行为

> ID：11134385
> 
> 赞同：0
> 
> 时间：2012-06-21T08:33:55.923
> 
> 标签：php, include

我正在一个客户端站点（PHP）上工作，并且有一个非常奇怪的行为。使用 include、include_once、require 或 require_once 似乎也会引入其他根本不应该存在的内容。有没有人听说过这样的事情？

即使包含文件为空或仅包含一些文本，该行为仍然存在。这可能是某种设置/全局行为吗？

谢谢

例如：

```
<?php require_once('dir/subdir/file.php'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:46:07.610

您应该始终使用绝对路径。这是引用文件的唯一可靠方法。

```
<?php require_once(__DIR__ . '/dir/subdir/file.php'); ?> 
```

或者在 PHP 5.2 上：

```
<?php require_once(dirname(__FILE__) . '/dir/subdir/file.php'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:48:47.970

include/require 函数通过将所需文件的内容复制到调用该函数的占位符来工作。如果包含的文件为空，则复制的内容为空。如果您包含了您不认识的内容，这可能意味着您的包含路径可能指向其他地方，而不是您的想法，或者包含的文件可能包含一些额外的文件。

作为全局设置，在 php.ini 中指定了一个全局 php[包含路径，人们通常在其中添加库或全局脚本。](http://no.php.net/manual/en/ini.core.php#ini.include-path)默认情况下，它不应包含影响脚本的内容。

如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。

# vb.net - 如何说 GeckoFX 使用旧的缓存文件而不是重新加载它们？

> ID：11134386
> 
> 赞同：2
> 
> 时间：2012-06-21T08:34:02.987
> 
> 标签：vb.net, caching, preferences, browser-cache, geckofx

我在 VB 中使用 GeckoFx v1.9.1.0 并找到一种方法来使用以下代码激活缓存（只是为了确保它被激活 - 我知道它是默认的）：

```
Skybound.Gecko.GeckoPreferences.User.Item("browser.cache.disk.enable") = True
Skybound.Gecko.GeckoPreferences.User.Item("browser.cache.memory.enable") = True
Skybound.Gecko.GeckoPreferences.User.Item("Browser.cache.check doc frequency") = 3
Skybound.Gecko.GeckoPreferences.User.Item("Browser.cache.disk.capacity") = 50000
Skybound.Gecko.GeckoPreferences.User.Item("Browser.cache.memory.capacity()") = -1 
```

我可以看到“user/Geckofx/1.9/cache”的缓存在第一次加载页面时被填充，但是在我的应用程序重新启动时，一切都被重新加载（尽管缓存被激活）。

所以我认为缺少另一个选项来告诉每次启动时都不应该重新加载任何内容。

你能帮我找到这个选项吗？

谢谢马库斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:33:58.187

今天 - 经过几个月的研究 - 我发现您需要以干净的方式关闭 XPcom，否则缓存中的“脏标志”已设置，Gecko-Framework 将在启动时清除缓存。

因此，您需要添加`Gecko.Xpcom.Shutdown()`以获得干净的关闭，并且如果您完成您的程序（例如关闭表单或类似的东西），则不会设置“脏标志”。

现在，我需要重构我的代码，因为我要求仍然打开的窗口并杀死这些窗口，而没有任何机会完全关闭 Xpcom 框架。*叹*

也许其他人会帮助这个提示......

问候， 马库斯

# hudson - 詹金斯 jacoco 插件

> ID：11134387
> 
> 赞同：3
> 
> 时间：2012-06-21T08:34:03.713
> 
> 标签：hudson, jenkins, jenkins-plugins, jacoco

我注意到 jenkins whitout 声纳的 jacoco 插件已经发布，我的问题是如何在我的`pom.xml`? 我已经制作了，`jacoco.exec`但是如何使用 jacoco 插件制作`.xml`文件？我在 github 上找到了它（[GitHub 上的 Jacoco 插件](https://github.com/jenkinsci/jacoco-plugin/)）

我已经下载了 zip 并试图用 maven 编译它，但我得到了错误

```
The project org.jenkins-ci.plugins:jacoco:1.0.1-SNAPSHOT (D:\Projects\jenkinsci-jacoco-plugin\pom.xml) has 1 error
Non-resolvable parent POM for org.jenkins-ci.plugins:plugin:1.424.6: Could not transfer artifact org.jenkins-ci:jenkins:pom:1.21 from/to repo.jenkins-ci.org (http://repo.jenkins-ci.org/public/): 
Error transferring file: Server returned HTTP response code: 503 for URL: http://repo.jenkins-ci.org/public/org/jenkins-ci/jenkins/1.21/jenkins-1.21.pom @ org.jenkins-ci.plugins:plugin:1.424.6, 
C:\Documents and Settings\ro1v0367\.m2\repository\org\jenkins-ci\plugins\plugin\1.424.6\plugin-1.424.6.pom, line 4, column 11 -> [Help 2] 
```

jacoco插件的步骤是什么，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T07:31:35.273

那些想尝试 jacoco 插件的人现在已经有了很好的测试覆盖率，几个月后，特别是不需要声纳在 Jenkins 上工作。一些对感兴趣的人有用的链接：

*   [http://java.dzone.com/articles/jacoco-jenkins-plugin](http://java.dzone.com/articles/jacoco-jenkins-plugin)
*   [https://wiki.jenkins-ci.org/display/JENKINS/JaCoCo+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/JaCoCo+Plugin)
*   [http://www.agile-engineering.net/2012/01/unit-test-code-coverage.html](http://www.agile-engineering.net/2012/01/unit-test-code-coverage.html)

干杯，

# asp.net-mvc - ASP.net MVC - 具有可为空属性的自定义属性错误消息

> ID：11134388
> 
> 赞同：2
> 
> 时间：2012-06-21T08:34:15.577
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel

我的视图模型中有一个可以接受整数和可为空值的属性：

```
 [Display(Name = "Code Postal")]
    public int? CodePostal { get; set; } 
```

当我输入字符串值时，如何显示除默认消息之外的另一条消息：

```
The field Code Postal must be a number. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:37:44.943

## 替代方案 - 重写资源字符串

最简单的方法是替换默认验证资源字符串。This [other SO answer](https://stackoverflow.com/a/2227607/75642)将帮助您解决这个问题。

但是您必须记住，这些字符串将用于您的所有模型，而不仅仅是某个类的特定属性。

* * *

> **注意**：根据 Darin（而且我没有测试代码），我的答案很引人注目。通过更改资源字符串的简化方法仍然有效。我自己做过，我知道它有效。

 ~~~~## 正则表达式属性~~ 

为您的属性添加一个附加属性：

```
[Display(Name = "Code Postal")]
[RegularExpression("\d+", ErrorMessage = "I'm now all yours...")]
public int? CodePostal { get; set; } 
```

即使您在非字符串属性上设置了正则表达式，这仍然可以工作。如果我们查看验证代码，它是这样的：

```
public override bool IsValid(object value)
{
    this.SetupRegex();
    string text = Convert.ToString(value, CultureInfo.CurrentCulture);
    if (string.IsNullOrEmpty(text))
    {
        return true;
    }

    Match match = this.Regex.Match(text);
    return match.Success && match.Index == 0 && match.Length == text.Length;
} 
```

~~正如我们所见，这个验证器自动将值转换为字符串。因此，如果您的值是一个数字，那并不重要，因为它将被转换为字符串并由您的正则表达式验证。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:04:44.307

当我们想要的只是默认模型绑定器完成的隐式验证的自定义错误消息时，看到我们必须做的工作量并不令人失望。原因是`DefaultModelBinder`隐藏了一些重要的方法作为私有方法，尤其是`GetValueInvalidResource`and `GetValueRequiredResource`。我希望他们将来会处理好这件事。

我试图为避免为每种类型创建模型绑定器的问题提供通用解决方案。

**老实说，我没有在所有情况下（例如绑定集合时）测试以下实现，但在基本级别中测试过**。

所以这里是方法。

我们有两个自定义属性有助于为我们的自定义模型绑定器传递自定义错误消息。我们可以有一个基类，但这很好。

```
public class PropertyValueInvalidAttribute: Attribute
{
    public string ErrorMessage { get; set; }

    public PropertyValueInvalid(string errorMessage)
    {
        ErrorMessage = errorMessage;
    }
}

public class PropertyValueRequiredAttribute: Attribute
{
    public string ErrorMessage { get; set; }

    public PropertyValueRequired(string errorMessage)
    {
        ErrorMessage = errorMessage;
    }
} 
```

这是模型绑定器，它是通用的且独立于类型，并负责为必需和无效验证定制错误消息。

```
public class ExtendedModelBinder : DefaultModelBinder
{
    protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, object value)
    {
        base.SetProperty(controllerContext, bindingContext, propertyDescriptor, value);

        if (propertyDescriptor.Attributes.OfType<PropertyValueInvalidAttribute>().Any())
        {
            var attr = propertyDescriptor.Attributes.OfType<PropertyValueInvalidAttribute>().First();

            foreach (ModelError error in bindingContext.ModelState[propertyDescriptor.Name]
            .Errors.Where(err => String.IsNullOrEmpty(err.ErrorMessage) && err.Exception != null)
            .ToList())
            {
                for (Exception exception = error.Exception; exception != null; exception = exception.InnerException)
                {
                    if (exception is FormatException)
                    {
                        bindingContext.ModelState[propertyDescriptor.Name].Errors.Remove(error);
                        bindingContext.ModelState[propertyDescriptor.Name].Errors.Add(attr.ErrorMessage);
                        break;
                    }
                }
            }
        }
    }

    protected override void OnPropertyValidated(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, object value)
    {
        if (propertyDescriptor.Attributes.OfType<PropertyValueRequiredAttribute>().Any())
        {
            var attr = propertyDescriptor.Attributes.OfType<PropertyValueRequiredAttribute>().First();

            var isTypeAllowsNullValue = (!propertyDescriptor.PropertyType.IsValueType || Nullable.GetUnderlyingType(propertyDescriptor.PropertyType) != null);

            if (value == null && !isTypeAllowsNullValue)
            {
                bindingContext.ModelState[propertyDescriptor.Name].Errors.Clear();
                bindingContext.ModelState.AddModelError(propertyDescriptor.Name, attr.ErrorMessage);
            }
        }

        base.OnPropertyValidated(controllerContext, bindingContext, propertyDescriptor, value);
    }
} 
```

我们重写该`OnPropertyValidated`方法只是为了重写默认模型绑定器抛出的隐式必需错误消息，并且我们重写`SetProperty`只是为了在类型无效时使用我们自己的消息。

将我们的自定义活页夹设置为 Global.asax.cs 中的默认值

```
ModelBinders.Binders.DefaultBinder = new ExtendedModelBinder(); 
```

你可以像这样装饰你的财产..

```
[PropertyValueRequired("this field is required")]
[PropertyValueInvalid("type is invalid")]
[Display(Name = "Code Postal")]
public int? CodePostal { get; set; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T08:49:32.640

您可以编写元数据感知属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class MustBeAValidIntegerAttribute : Attribute, IMetadataAware
{
    public MustBeAValidIntegerAttribute(string errorMessage)
    {
        ErrorMessage = errorMessage;
    }

    public string ErrorMessage { get; private set; }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        metadata.AdditionalValues["mustbeavalidinteger"] = ErrorMessage;
    }
} 
```

以及使用此属性的自定义模型绑定器，因为它是默认模型绑定器，它添加了您在绑定请求中的这些整数类型时看到的硬编码错误消息：

```
public class NullableIntegerModelBinder: DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        if (!bindingContext.ModelMetadata.AdditionalValues.ContainsKey("mustbeavalidinteger"))
        {
            return base.BindModel(controllerContext, bindingContext);
        }

        var mustBeAValidIntegerMessage = bindingContext.ModelMetadata.AdditionalValues["mustbeavalidinteger"] as string;
        if (string.IsNullOrEmpty(mustBeAValidIntegerMessage))
        {
            return base.BindModel(controllerContext, bindingContext);
        }

        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (value == null)
        {
            return null;
        }

        try
        {
            return value.ConvertTo(typeof(int?));
        }
        catch (Exception)
        {
            bindingContext.ModelState.AddModelError(bindingContext.ModelName, mustBeAValidIntegerMessage);
            bindingContext.ModelState.SetModelValue(bindingContext.ModelName, value);
        }

        return null;
    }
} 
```

将在以下位置注册`Application_Start`：

```
ModelBinders.Binders.Add(typeof(int?), new NullableIntegerModelBinder()); 
```

从这一刻起，事情变得非常标准。

查看型号：

```
public class MyViewModel
{
    [Display(Name = "Code Postal")]
    [MustBeAValidInteger("CodePostal must be a valid integer")]
    public int? CodePostal { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return View(model);
    }
} 
```

看法：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.CodePostal)
    @Html.ValidationMessageFor(x => x.CodePostal)
    <button type="submit">OK</button>
} 
```~~

# c - 合适的线程数是多少

> ID：11134391
> 
> 赞同：1
> 
> 时间：2012-06-21T08:34:52.790
> 
> 标签：c, linux, multithreading, gcc, pthreads

我在 Linux/gcc 上使用创建`N`线程。每个线程都尽可能快地使用其 ID 进行`pthread_create`写入，仅此而已。`for (;;) printf(...)`我让整个程序运行了 3 秒钟，`usleep`并注意到在我的`4-core`CPU 上，当`N=4`它产生大约 1,000,000 行时，当`N=8`它产生大约 4 倍时。在 4 核 CPU 上 8 线程性能更好的原因是什么？CPU 没有启用超线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:39:45.713

I/O 和 CPU 操作非常不同。如果您运行 CPU 密集型计算，N=内核数将是最佳的。对于 I/O，最佳数量可能要高得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:43:54.417

如果您有 4 个线程，您将不会在每个内核上运行一个线程。两个都没有 8 线程。多核的想法是分离完成的工作。此外，您只需显示线程 ID 即可实现轻量级的 CPU 工作。因此，它不是使用您的 CPU 容量，而是使用处理显示事件的能力。

# python - 将 Python 置于版本控制之下是否可行？

> ID：11134397
> 
> 赞同：4
> 
> 时间：2012-06-21T08:35:33.490
> 
> 标签：python, version-control, python-sphinx

在可行的情况下，我喜欢在版本控制下拥有构建所需的工具。理想的情况是，新的结帐将在任何一台机器上运行，并且首先需要安装最少的工具集。

将 Python 置于版本控制之下是否可行？

python包呢？由于对 Docutils 的依赖，我在不安装 Sphinx 的情况下尝试使用它的天真尝试失败了。有没有办法不用安装就可以使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:02:13.817

查看[virtualenv](http://pypi.python.org/pypi/virtualenv)和[buildout](http://www.buildout.org/)以满足这些需求。

`virtualenv`允许您将运行项目的 Python 与使用该版本的 Python 安装的任何其他包隔离开来。因此，如果您的项目需要 Python xy，唯一的先决条件是您需要确保系统上存在该 Python 版本的副本。您在其中安装的任何软件包`virtualenv`都与在其外部安装的软件包完全隔离。

`buildout`允许您指定包依赖项，因此如果您需要`sphinx`构建文档，只需将其包含在`buildout.cfg`文件中：

```
parts =
  sphinx

[sphinx]
recipe = collective.recipe.sphinxbuilder 
```

当你运行`buildout`它时，它将安装`collective.recipe.sphinxbuilder`、下载和安装`docutils`，并`sphinx`在其中`virtualenv`构建你的文档。

您可以包括从包含和文件`buildout.cfg`的文件夹的初始签出开始运行系统所需的所有依赖项。它使设置系统进行开发或最终部署变得非常容易。`buildout.cfg``bootstrap.py`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T08:38:31.427

不，就像编译器一样，python 解释器应该安装在系统范围内。同样的事情也适用于 sphinx 和 docutils 等工具（很可能在通过发行版的包管理器安装 sphinx 时安装）。

这同样适用于大多数 python 包，尤其是那些由应用程序本身使用并通过 PyPi 可用的包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T09:01:10.817

与许多应用程序一样，Python 不会在签出项目的任何地方“就地”运行 - 它们需要添加到路径并了解一些设置。这就是为什么它们要么是平台的一部分（Mac 和 Linux），要么需要一个成熟的安装程序（Windows）。

考虑到这一点，最好不要将 Python 本身包含在存储库中——您仍然必须为平台选择正确的二进制安装程序并运行安装程序。然后，如果您更新版本存储库中的版本，则必须升级目标系统。毕竟，您几乎肯定不会拥有一致的系统——因此首先破坏了将 Python 用于版本控制的意义。

良好的版本控制和依赖管理确实需要保留特定版本的工具。Setuptools 包括[easy_install](http://packages.python.org/distribute/easy_install.html)，这使得这很容易：

```
easy_install "pytest==2.2.4" 
```

请注意特定版本 - 如果您不太担心特定版本，则可以省略它，或者您可以指定最小值：

```
easy_install "pytest>2.2" 
```

（注意：还有其他类似的工具，包括 pip）

默认情况下，您将从 Pypi 加载，这会将所有历史版本保存在它的存储库中。除非您*真的*担心缺少特定版本，否则这很好。如果数百万美元或生命危在旦夕，请将该工具签入您的本地存储库并使用 easy_install（或类似工具）进行安装。

我强烈推荐使用[virtualenv](http://pypi.python.org/pypi/virtualenv/)项目来虚拟化你的 Python 环境。这样做可以让您创建一个沙箱，easy_install 在其中安装库和工具，从而将您与系统上意外安装的任何其他工具隔离开来。Virtualenv 还可以管理特定版本的 Python。

另一种想法：如果复制特定环境用于构建/测试目的是重点，那么考虑使用云/操作系统虚拟化方法，例如 VirtualBox、VMWare 或类似方法。您可以在许多不同的机器上运行完全相同的操作系统映像。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:48:43.837

一般来说，您的版本控制应该包含*您的项目*。将您的依赖项也包含在其中几乎总是一个坏主意，除非您已做出明确的策略决定*始终*针对它们进行静态链接（对于解释代码，这涉及将它们保留在源代码树中）。听起来您想要的是[Zero install](http://0install.net/)，一个启动时依赖注入器。它本质上允许您获得静态链接的好处（如果您不能/不想进入每个相关的包管理器存储库，您的用户不需要安装您的依赖项）而没有缺点（您的用户最终会得到多个可能不同步的常见依赖项版本）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-31T02:22:22.620

# 是的！

当您想向非技术用户交付工具而不要求他们安装任何东西时，您可以将 python 放入 scm。从理论上讲，您可以设置一些其他工具并让它们都安装它，这样您就可以确保它们每次同步时都运行`pip install -r requirements.txt`并获取所有依赖项，但这并不总是那么容易。如果您在使用 python 时遇到阻力（“它没有编译；每个人都必须安装 python”），那么将 python 放入 scm 是您的最佳选择！

如果你使用的是 Linux/Unix，你可能会使用内置的包管理器，所以我假设你使用的是 Windows。（注意：有适用于 Windows 的包管理器，例如 scoop、choco 和 winget——它们值得一看。）

将 python 放入 scm 有两种选择：

## [Windows 可嵌入包（64 位）](https://www.python.org/downloads/windows/)

*阅读有关此软件包的更多信息，了解[为什么有这么多 python 安装程序](https://stevedower.id.au/blog/why-so-many-python-installers)。*

如果您想要最小的 python 并手动提供包（不使用 pip），这应该是一个好方法。从理论上讲，[您也可以设置自己安装软件包](https://stackoverflow.com/questions/49737721/adding-packages-to-python-embedded-installation-for-windows) 。但是，如果您希望团队中的任何开发人员都能够安装软件包，这可能不是一个好的选择。

## [Windows 安装程序（64 位）](https://www.python.org/downloads/windows/)

常规的 python 安装。但我们会做一些不同的事情。

1.  设置你的 scm 忽略`*.pyc`和`__pycache__`
2.  安装python到`C:\python3`
3.  我小心不要运行 python 以避免生成任何临时文件，这样它们就更容易被捕获和忽略。
4.  复制`C:\python3`到您的项目中：`c:\proj\tools\python3`
5.  卸载python`C:\python3`
    *   这样你的机器就像你的用户一样。一旦确认一切正常，您可以将项目中的 python 添加到 PATH 或重新安装 python。
6.  创建一个目录来保存你的 python 模块：`c:\proj\tools\pymodules`
7.  在该文件夹中创建一个空`__init__.py`文件：`c:\proj\tools\pymodules\__init__.py`
8.  创建一个带有相对路径的 work.pth 文件，以便 python 可以找到您的 python 模块：`c:\proj\tools\python3\site-packages\work.pth`

```
 ../../../pymodules 
```

9.  现在提交一切。
10.  运行`python -m http.server 8000 --directory .`或其他一些 python 代码，以便您可以仔细检查您的忽略是否正确。

现在您将能够使用 pip 安装新软件包并将它们提交到源代码管理。如果您创建`pymodules\work\__init__.py`（空）和`pymodules\work\example.py`：

```
print('Hello from example.py') 
```

你可以运行它：

```
c:\proj\tools\python3\python.exe -m work.example 
```

并导入它：

```
import work.example 
```

没有弄乱路径！

**但是**，您可能需要确保所有用户都直接运行 python.exe 并且不能假定它在他们的 PATH 中。但是，既然您知道它在他们的项目中的位置，那么这不太可能是个问题。您可以创建一键式批处理文件，根据其路径确定 python 的路径：

```
%~dp0\..\..\python3\python.exe -m work.example 
```

多年来，我们在我的工作中一直使用这种设置，最近我在一个新项目中使用上述步骤进行了设置。我们在 svn 中有我们的项目，它工作得很好，但是将这么多文件转储到 git 中可能不太理想。

# web - 通过网页抓取和 php dom 提取虚拟数据

> ID：11134398
> 
> 赞同：-1
> 
> 时间：2012-06-21T08:35:36.630
> 
> 标签：web, screen-scraping, element, selector, simple-html-dom

我想从下面给出的链接中提取虚拟数据

[http://www.apsc.utoronto.ca/Calendars/2012-2013/Course_Descriptions.html#Course1](http://www.apsc.utoronto.ca/Calendars/2012-2013/Course_Descriptions.html#Course1)

我已经能够获得课程代码和课程标题，但我无法检索课程描述，如果您在源代码中注意到，课程描述包含在`<p>`表格外部。有什么想法我可以选择那个p吗？一直在尝试一些选择器，但我无法选择它。

我正在使用[Parse Web Pages with PHP Simple HTML DOM Parser（David Walsh 在 2011 年 6 月 15 日仍然建议使用它）](http://davidwalsh.name/php-notifications)来选择和提取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T00:47:41.973

相对于表格，它将是：

```
$xpath->query('./following-sibling::p[1]', $table)->item(0)->nodeValue 
```

# c++ - 指针和整数之间的字符串修剪比较

> ID：11134405
> 
> 赞同：1
> 
> 时间：2012-06-21T08:36:08.033
> 
> 标签：c++

我需要检查传入的字符串是否不为空且不为空

```
method(const char* utf8char){ 
```

……

```
string trim(char const *str){
    while(!isalnum(*str)) str++;
    end = str + strlen(str) - 1;
    while(end > str && !isalnum(*end)) end--;
    return string(str, end+1);
} 
```

**警告：指针和整数之间的比较**

抱歉，我是 C++ 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:51:01.650

如果将“end”声明为 const char *，则该代码对我有用：

```
#include <string>
using std::string;

string trim(char const *str){
  while(!isalnum(*str)) str++;
  char const *end = str + strlen(str) - 1;
  while(end > str && !isalnum(*end)) end--;
  return string(str, end+1);
}

int _tmain(int argc, _TCHAR* argv[])
{
  char buf[] = "  abc ";
  printf("%s", trim(buf).c_str()); // got "abc"
  return 0;
} 
```

附言。vc10.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:51:40.827

这是我使用的三个可能有用的函数：

sch 参数是一组要修剪的字符。

```
void LTRIM(std::string& s, const char *sch)
{
    std::string ss=sch;
    int i=0, n=s.length();
    while ((i<n) && (ss.find(s.at(i),0)!=std::string::npos)) i++;
    s = (i>0)?s.substr(i,n-i):s;
}

void RTRIM(std::string& s, const char *sch)
{
    std::string ss=sch;
    int n = s.length()-1;
    int i=n;
    while ((i>0) && (ss.find( s.at(i),0)!=std::string::npos)) i--;
    s = (i<n)?s.substr(0,i+1):s;
}

void TRIM(std::string& s, const char *sch) { LTRIM(s, sch); RTRIM(s, sch); } 
```

# android - HTC One X - 触摸后网页视图变为白色/空白

> ID：11134406
> 
> 赞同：8
> 
> 时间：2012-06-21T08:36:09.913
> 
> 标签：android, webview, htc-android

我有一个 Android 应用程序，它有用于搜索的文本框、一些按钮、webviews（1 个可见 2 个不可见）和一个 admob adview。该应用程序仅在一些特殊站点上进行搜索，并且在模拟器、三星 Galaxy 设备上运行良好。但我对 HTC One X 有疑问（不知道其他 HTC 型号）。

问题是，当您单击搜索按钮时，webview 会加载页面。然后“有时”当您尝试触摸甚至滚动时，webview 只是返回到带有滚动条的完全白色区域。这尤其发生在广告刷新之后。甚至有时广告的背景和文本区域也完全变成白色-因此不可读-。在广告上只有蓝色箭头和蓝色电话图像保持可见！

有没有人有这样的问题，有什么解决办法吗？提前致谢。

这是我的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/layoutDashboard"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:background="@drawable/border_shape"
            android:orientation="vertical"
            android:paddingTop="1sp" >

            <EditText
                android:id="@+id/editxtKeyword"
                android:layout_width="fill_parent"
                android:layout_height="43dp"
                android:layout_marginLeft="1dp"
                android:layout_marginRight="1dp"
                android:layout_marginTop="2dp"
                android:ems="10"
                android:hint="@string/editxtKeyword_hint"
                android:singleLine="true" >
            </EditText>

            <HorizontalScrollView
                android:id="@+id/horizontalScrollView1"
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_gravity="center_vertical"
                android:layout_weight="0.30"
                android:paddingBottom="2dp"
                android:paddingLeft="1dp"
                android:scrollbars="none" >

                <LinearLayout
                    android:id="@+id/layoutButtons"
                    android:layout_width="wrap_content"
                    android:layout_height="fill_parent"
                    android:layout_gravity="center_vertical"
                    android:layout_marginTop="0dp"
                    android:layout_marginBottom="1dp"
                    android:layout_marginLeft="1dp"
                    android:layout_marginRight="1dp"
                    android:orientation="horizontal" >
<
                    <Button
                        android:id="@+id/btnAk"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:layout_margin="1dp"
                        android:background="@drawable/custom_button_shape"
                        android:text="asd" />

                    <Button
                        android:id="@+id/btnCm"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:layout_margin="1dp"
                        android:background="@drawable/custom_button_shape"
                        android:text="csm" />

                </LinearLayout>
            </HorizontalScrollView>
        </LinearLayout>

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <WebView
                android:id="@+id/webV"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_above="@+id/linlaylay1"
                android:visibility="visible" />

            <WebView
                android:id="@+id/webVAnalytics"
                android:layout_width="1dp"
                android:layout_height="0dp"
                android:visibility="invisible" />

            <WebView
                android:id="@+id/WebVSahibinden"
                android:layout_width="1dp"
                android:layout_height="0dp"
                android:visibility="invisible" />

            <LinearLayout
                android:id="@+id/linlaylay1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_margin="0dp"
                android:orientation="vertical"
                android:padding="0dp" >

                <com.google.ads.AdView
                    android:id="@+id/adViewSmall"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal|top"
                    ads:adSize="BANNER"
                    ads:adUnitId="a123123"
                    ads:loadAdOnCreate="true"
                    ads:testDevices="TEST_EMULATOR"  />
            </LinearLayout>
        </RelativeLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layoutProgress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top|center_horizontal"
        android:layout_marginBottom="50dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/progress_shape"
        android:padding="2dp"
        android:visibility="invisible" >

        <TextView
            android:id="@+id/lblLoading"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="2dp"
            android:text="@string/msg_loading"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000" />

        <ImageButton
            android:contentDescription="@string/dialog_cancel"
            android:id="@+id/btnStop"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:src="@drawable/stop" />
    </LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:43:23.523

[一个已知的错误](https://code.google.com/p/android/issues/detail?id=25722)

您可以在 WebView 上禁用硬件加速，但请确保以不会破坏旧设备的方式这样做：

```
if(android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.HONEYCOMB){
    //mWebView is some WebView
    mWebView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

**注意事项**

*   视频无法在浏览器中播放
*   滚动不会那么流畅

根据错误，这已在 Jelly Bean 中修复，但我无法亲自验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T13:36:20.413

在显示硬件加速视图时存在许多问题。我会重新设计您的布局以不重叠 Web 视图或滚动视图，或禁用硬件加速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T18:14:53.390

我在 HTC 手机上看到了单个 webviews 的问题。 [此错误线程中的评论之一](http://code.google.com/p/android/issues/detail?id=25147#c62)提出了一些有助于优化 WebView 性能的建议。该错误与 3D 转换有关，但我发现评论的技术通常对 WebViews 很有用。

[Google I/O 2012 上的这个演示文稿](https://developers.google.com/events/io/sessions/gooio2012/122/)也提供了一些关于 WebViews 主题的好信息。

两者都建议将动态内容放在“层”上。这意味着将此 CSS 规则分配给元素：

```
 -webkit-transform: translate3d(0, 0, 0); 
```

通过应用此规则，Android“告诉浏览器将图层预先合成到其自己的纹理上，以便以后可以（几乎）免费进行动画处理”这种行为不是免费的 - 它会消耗更多内存，因此我会明智地应用它。上面链接的演示文稿很好地解释了原因。

就我而言，我可以通过将此规则应用于包含整个页面的 DIV 来避免“白屏”。页面有时会呈现白色一秒钟，然后呈现内容。我没有看到“白色”页面像我在应用这种技术之前那样永远存在。我没有看到失控的内存消耗。YMMV。

我还建议您尽可能简化布局。说起来容易做起来难，但可以[在 docs](http://developer.android.com/training/improving-layouts/optimizing-layout.html)中找到一些好的建议。

# ruby-on-rails - 如何在 Capybara 的验收测试中存根辅助方法？

> ID：11134407
> 
> 赞同：2
> 
> 时间：2012-06-21T08:36:11.697
> 
> 标签：ruby-on-rails, rspec, capybara

我有一个使用 Capybara 的验收规范。但是，我想删除一种辅助方法（它提供配置并且我想测试不同的配置）。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:15:05.903

您是否能够改为存根配置？在验收测试中存根代码是一个非常糟糕的主意。

如果您坚持这是最好的方法，您可以尝试：

```
ActionView::Base.any_instance.stub(:the_helper_method) { "other implementation" } 
```

# wordpress - 如何在wordpress中显示浏览文章的用户

> ID：11134409
> 
> 赞同：1
> 
> 时间：2012-06-21T08:36:17.110
> 
> 标签：wordpress

我想知道谁在wordpress中浏览了一篇文章。我不知道如何显示所有在wordpress中浏览过一篇文章的用户。有这个插件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:26:38.153

我会推荐[http://wordpress.org/extend/plugins/wp-useronline/](http://wordpress.org/extend/plugins/wp-useronline/)

祝你好运！:)

# jquery - jQuery Mobile - 用户重新加载动态呈现的页面

> ID：11134412
> 
> 赞同：1
> 
> 时间：2012-06-21T08:36:20.530
> 
> 标签：jquery, mobile, dynamic, reload

所以事情是这样的：

我正在使用 JQM 创建一个移动网站，该网站基本上用于搜索内容。当用户输入搜索字符串时，会动态创建一个新的 page-div，并且浏览器会导航到该新 div。来回导航工作正常，一切正常。

但是：如果用户重新加载页面，内容就会消失，加载微调器会出现并且页面会卡在那里。

有什么方法可以找出用户当前停留在那个空的“加载屏幕”上并将他重定向到，比如说，首页？

我在想

`$('body').live('pageinit', function() { //do stuff here )};`

有帮助。

非常感谢，伙计们！

# java - 如何从方法中间获取元素到ArrayList

> ID：11134415
> 
> 赞同：0
> 
> 时间：2012-06-21T08:36:29.400
> 
> 标签：java, arraylist, ical4j

这是我从不同的 URL 获取多个列表然后将不同的列表排序到单个 ArrayList 的方法。来自不同日历的 Arraylist 具有不同的 EMAIL 和 OWNER NAME。在这种方法中，我只返回一个 ArrayList。如何获取每个 ArrayList 的 EMAIL 和 OWNNER NAME？

```
public List<ArrayList> getEventsSort(Filter filter, String uri, Sardine sardine,
    List<String> emailShare) throws IOException, ParserException {
List eventsToday = null;
List arrayList = new ArrayList<String>();
for (String email : emailShare) {
    String uris = uri + email + "/events/";
    InputStream stream = null;
    try {
        stream = sardine.get(uris);
        BufferedReader br = new BufferedReader(new InputStreamReader(
                stream));
        CalendarBuilder builder = new CalendarBuilder();
        net.fortuna.ical4j.model.Calendar calendar = builder.build(br);
        eventsToday = (List<?>) filter.filter(calendar
                .getComponents(Component.VEVENT));  
        arrayList.addAll(eventsToday);
    } finally {
        IOUtils.closeQuietly(stream);
    }
}

    getSortList(arrayList);
return arrayList; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:59:23.507

您可以通过创建存储 3 个变量（电子邮件、源名称和源电子邮件 ID）的类对象的数组列表来做到这一点

# javascript - jQuery UI 可在选择选项上排序

> ID：11134417
> 
> 赞同：4
> 
> 时间：2012-06-21T08:36:58.357
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我正在尝试让 jQuery UI 默认可排序以处理选择多列表框中的选项，但似乎无法使其正常工作。这可以与选择选项一起使用吗？我只看到过`<li>`无处不在的例子。

这是我的 JavaScript：

```
$(function() {
    $( "#secondSelectms2side__dx" ).sortable();
    $( "#secondSelectms2side__dx" ).disableSelection();
}); 
```

和 HTML：

```
<select title="" name="secondSelectms2side__dx" id="secondSelectms2side__dx" size="8" multiple="multiple">
    <option value="4">asdsdsds</option>
    <option value="10">bsdsdsdsd</option>
    <option value="2">csdsdsds</option>
</select>​ 
```

我的代码在 jsFiddle 上：

[http://jsfiddle.net/noscirre/DRUPe/](http://jsfiddle.net/noscirre/DRUPe/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:14:14.767

**使用多选 js 小部件进行选择选项排序的**工作演示：http:** [//jsfiddle.net/QRv6d/9/](http://jsfiddle.net/QRv6d/9/)**

 **好的链接：[https ://github.com/yanickrochon/jquery.uix.multiselect](https://github.com/yanickrochon/jquery.uix.multiselect) ~~[http://quasipartikel.at/2009/05/10/jqueryui-multiselect/](http://quasipartikel.at/2009/05/10/jqueryui-multiselect/) **&** [http://quasipartikel.at/multiselect/](http://quasipartikel.at/multiselect/)~~

请注意：我找不到 sortable() 的任何简单可排序实现，`select boxes`因此使用这个多选插件，正如您在演示中看到的那样，它确实有效`:)`，您可以根据需要使用它。完整的 HTML 在 js fiddle 中。

希望这可以帮助，

**脚本**源

```
 <script type="text/javascript" src="http://quasipartikel.at/multiselect/js/ui.multiselect.js"></script> 
```

**代码**

```
 $(function(){

            $(".multiselect").multiselect();

        });​ 
```

**HTML**

```
<select id="countries" class="multiselect" multiple="multiple">

    <option value="AUT" selected="selected">Austria</option>
    <option value="DEU" selected="selected">Germany</option>

    <option value="NLD" selected="selected">Netherlands</option>

    <option value="USA" selected="selected">United States</option>

  </select> 
```

**图片**

![在此处输入图像描述](../Images/a538a0f39b014cab31a69cf5e7e38c82.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T15:57:22.233

这就是你需要的。如果您想自定义样式以“看起来”像传统的选择框，您将不得不做一些额外的工作。我正在将它与 simple_form 集成，并将在此处发布代码。

[https://github.com/thgreasi/ui-sortable-multiselection](https://github.com/thgreasi/ui-sortable-multiselection)**

# ruby - Nokogiri 忽略 XSL 转换中的实体

> ID：11134425
> 
> 赞同：1
> 
> 时间：2012-06-21T08:37:32.713
> 
> 标签：ruby, xslt, nokogiri

我尝试在 Web 应用程序中本地化 XSLT 模板，我想为此使用实体机制。但是值不会在结果文档中替换。

红宝石脚本

```
require 'nokogiri'

doc   = Nokogiri::XML(File.read('test.xml'))
xslt  = Nokogiri::XSLT(File.read('test.xsl'))

puts xslt.transform(doc) 
```

XML 文档

```
<?xml version="1.0" encoding="UTF-8" ?>

<CommonCard>
  <Test/>
</CommonCard> 
```

XSLT 样式表

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE xsl:stylesheet [
  <!ENTITY labelHello "hello world!">
]>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output encoding="utf-8" method="xml" />

  <xsl:template match="/">
    &labelHello; 123
  </xsl:template>

</xsl:stylesheet> 
```

我想得到这个

```
<?xml version="1.0" encoding="utf-8"?>
hello world! 123 
```

但现在我明白了

```
<?xml version="1.0" encoding="utf-8"?>
 123 
```

我究竟做错了什么？

**UPD**

我使用 Nokogiri XML 引擎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:58:18.237

我怀疑这只是 Nokogiri 的限制。我建议一种解决方法：使用变量而不是实体，就像这样......

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:variable name="labelHello" select="'hello world!'" />
  <xsl:template match="/">
    <xsl:value-of select="$labelHello" /> 123
  </xsl:template>
</xsl:stylesheet> 
```

# c# - 如何解码 JSON

> ID：11134427
> 
> 赞同：0
> 
> 时间：2012-06-21T08:37:33.577
> 
> 标签：c#, json

我的 JSON 格式如下：

```
{ “消息”：
   [
     {“FB”：{“消息”：“尝试”，“用户”：“789”}}，
     {“饲料”：{“抽象”：“酷”，“标题”：“嘿”}}，
     {“tw”：{“tweetid”：“984327”，“用户”：“gart”}}，
     {“fb”：{“消息”：“fgt”，“用户”：“690”}}，
     {“tw”：{“tweetid”：“346”，“用户”：“nfgdr”}}，
     {“饲料”：{“抽象”：“gredf”，“标题”：“wret”}}
   ]
}

```

我已经替换了双引号，以便可以将其存储在字符串中。

现在，当我尝试使用以下方法反序列化时：

```
JavaScriptSerializer jss = new JavaScriptSerializer();

jss.Deserialize<XYZType>(data); 
```

它给出以下错误：

```
传入的对象无效，应为成员名称。(1): {"news":[{"fb":{"message":"try","user":"789"}},{"feed":{"title":"hey","abstract ":"cool"}},{"tw":{"tweetid":"984327","user":"gart"}},{"fb":{"message":"fgt","user": "690"}},{"tw":{"tweetid":"346","user":"nfgdr"}},{"feed":{"title":"wret","abstract":"gredf "}}]}
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:52:18.983

我会看看[Json.Net](https://www.nuget.org/packages/Newtonsoft.Json)并停止“手动”尝试修复内容并让系统/库为您完成。此外，JavaScriptSerializer 有点不稳定......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:15:13.690

**继续**：除非“新闻”数组被序列化为对象数组，否则数组中的对象不是同质的这一事实肯定会让您在尝试将 JSON 序列化为 C# 对象时遇到一些麻烦。

如果您可以控制 JSON（源），则需要更好地对其进行结构化，以使其易于序列化为 C# 对象。如果您可以让 JSON 采用以下结构：

```
{ "news": 
    [ 
        { 
            "fb": { "message": "try", "user": "789" },
            "feed": { "abstract_": "cool", "title": "hey" },
            "tw": { "tweetid": "984327", "user": "gart"  } 
        },
        { 
            "fb": { "message": "fgt", "user": "690" },
            "tw": { "tweetid": "346", "user": "nfgdr" },
            "feed": { "abstract_": "gredf", "title": "wret" }
        }
    ] 
} 
```

这种结构很容易被以下结构的类型 XYZType 反序列化：

```
class XYZType
{
    NewsType[] news { get; set; }

    public class NewsType
    {
        FBType fb { get; set; }
        FeedType feed { get; set; }
        TweetType tw { get; set; }

        public class FBType
        {
            string message { get; set; }
            string user { get; set; }
        }

        public class FeedType
        {
            string title { get; set; }
            string abstract_ { get; set; }
        }

        public class TweetType
        {
            string tweetid { get; set; }
            string user { get; set; }
        }   
    }
} 
```

**注意**：

1) 你不能在 C# 中有一个名为“abstract”的标识符，所以我故意将“abstract”更改为“abstract_”

2) 嵌入“容器”类是可选的。你可以让它们“不嵌入”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:51:31.403

您不能只删除引号将其存储在字符串中。那么它不是有效的Json！您需要分隔引号，以便

```
"{\"news\":[{\"fb\":{\"message\":\"try\",\"user\":\"789\"}},etc." 
```

# driver - fglrx 驱动安装失败

> ID：11134433
> 
> 赞同：1
> 
> 时间：2012-06-21T08:37:42.820
> 
> 标签：driver, failed-installation, amd-processor

[我使用hwoto](https://help.ubuntu.com/community/BinaryDriverHowto/ATI)中的方法手动安装 Catalyst 12.4 。当我键入命令时，安装不会引发错误

```
fglrxinfo 
```

我收到以下错误

```
X Error of failed request:  BadRequest (invalid request code or no such operation)
Major opcode of failed request:  138 (ATIFGLEXTENSION)
Minor opcode of failed request:  66 ()
Serial number of failed request:  13
Current serial number in output stream:  13 
```

我还尝试使用 Ubuntu 存储库添加其他驱动程序，但它总是无法安装驱动程序。

并且下面的消息似乎表明已经安装了 fglrx，如何解决这个问题？

```
itsuper7@ubuntu:/host/Dropbox$ aptitude search fglrx
i   fglrx                           - Video driver for the AMD graphics accelera
iBA fglrx-amdcccle                  - Catalyst Control Center for the AMD graphi
pB  fglrx-amdcccle-updates          - Catalyst Control Center for the AMD graphi
v   fglrx-control                   -                                           
p   fglrx-dev                       - Video driver for the AMD graphics accelera
v   fglrx-driver                    -                                           
v   fglrx-driver-dev                -                                           
c   fglrx-updates                   - Video driver for the AMD graphics accelera
pB  fglrx-updates-dev               - Video driver for the AMD graphics accelera 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T20:16:31.890

我有同样的问题并用符号链接修复它

sudo ln -s /usr/include/fglrx /usr/lib64/fglrx

但这取决于您的 fglrx 安装位置

# regex - Emacs 交互式正则表达式替换

> ID：11134436
> 
> 赞同：20
> 
> 时间：2012-06-21T08:38:03.967
> 
> 标签：regex, emacs, replace

假设你有一些文本，里面有这样的词：

```
"foo" ... "bar" ... "file" ... "emacs" 
```

而你想要做的就是用''替换“。我知道它只能要求以下替换：

```
" -> '' 
```

但是假设您想以交互方式并使用正则表达式进行操作，对于更复杂的情况，如何完成？

我更好地解释自己：我希望我能有一个命令，或一系列命令，以这种方式工作：

*   编写一个类似的正则表达式`"\\(.*?\\)"`并以交互方式查看结果（即，当前可见的匹配在您编辑正则表达式时突出显示，并且突出显示始终在您进行更改时更新）。
*   一旦对正则表达式感到满意，请指定一个替换，例如`' '\1' '`
*   交互式替换所有匹配项

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-21T11:21:53.577

终于知道了！！！！！这些是要遵循的步骤：

*   `M-x isearch-forward-regexp`

*   以交互方式插入您的正则表达式。如果您犯了错误，您可以使用 DEL 或 Me 并浏览您的正则表达式来更正它。

*   然后在你找到你想要的东西后立即按 M-% 和你喜欢的替换并开始替换。

因此，您可以以完全交互式和增量的方式搜索和替换正则表达式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-17T11:45:46.657

*   运行`M-x isearch-forward-regexp`或`C-M-s`。

*   当您开始输入正则表达式时，第一次出现将立即突出显示。尝试使用光标向后移动正则表达式将取消搜索，因此如果您犯了错误，您应该使用`M-e`允许编辑进行更改，然后按 Enter 继续搜索。

*   当您对正则表达式感到满意时，按`M-%`，键入替换字符串（或使用向上键访问以前使用的替换字符串），然后按`RET`开始交互式替换。

*   对于每次出现，按`y`替换一次、`n`跳过、`!`全部替换、`RET`退出或`?`查看更多选项。

*   要重复上一次正则表达式搜索，请输入`C-M-s`then `C-s`。

完整的详细信息在[手册页](http://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Search.html)中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-21T08:43:48.487

该命令是否`query-replace-regexp`满足您的要求？在大多数 Emacs 安装中，它将绑定到`C-M-%`.

由于这不满足 OP 的要求，因此建议同时查看`re-builder`. 此功能没有记录在 Emacs 手册或帮助系统中，它只是记录在[Emacs Lisp 手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Regular-Expressions.html)中。

# mysql - 检索逗号分隔列表中存在值的行

> ID：11134446
> 
> 赞同：1
> 
> 时间：2012-06-21T08:38:47.263
> 
> 标签：mysql

**我喜欢反转这个查询：**

```
SELECT * FROM table WHERE status IN ( option,option1,option2 ); 
```

**在像这样的查询中**

```
SELECT * FROM table WHERE status contains ( 'option' ); 
```

其中字段“状态”列包含（通过示例）：“选项，选项 1”。

**当我使用**

```
SELECT * FROM table WHERE status LIKE '%option%' ); 
```

它还选择具有仅包含 'option1' 的 'status' 列的行

这可能吗？

示例数据：

```
id,name,status
1,'test1','option,option1'
2,'test2','option,option2'
3,'test3','option2'
4,'test4','option2,option3'
5,'test5','option'

SELECT * FROM table WHERE status contains ( 'option' ); 
```

此查询应选择选择记录 1,2 和 5。

“状态”字段类型是 varchar。

问题是状态字段包含几乎相似的数据，除了添加到选项的数字。当然，这是一个虚构的例子，但真实的东西有这种参数。

**更新：** 在秋葵的建议下终于找到了。

我首先尝试了 Gumbo 的铅（添加了 > 0）：

```
SELECT * FROM table 
    WHERE FIND_IN_SET('option', status) > 0; 
```

但它也没有奏效。

经过一番摆弄后，我发现罪魁祸首是状态字段中选项之间的空格。这些记录是从另一个来源导入的，并在逗号后带有空格：

'option, option1' 而不是 'option,option1'

**所以我最终得到：**

```
SELECT * FROM table 
    WHERE FIND_IN_SET('option', TRIM(REPLACE(status,' ',''))) > 0; 
```

这对我有用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T08:43:54.803

对于逗号分隔的值，您可以使用该[`FIND_IN_SET`函数](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)在其中搜索一个值：

```
SELECT * FROM table WHERE FIND_IN_SET('option', status); 
```

要否定表达式，请使用[`NOT`or`!`](http://dev.mysql.com/doc/refman/5.6/en/logical-operators.html#operator_not)：

```
SELECT * FROM table WHERE NOT FIND_IN_SET('option', status); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T22:49:22.497

不必在查询中运行额外的逻辑，如果可以的话，您可能只想修复列数据：

```
UPDATE `table` SET `status` = REPLACE(`status`, ', ', ','); 
```

然后你可以：

```
SELECT * FROM table WHERE FIND_IN_SET('option', status); 
```

# sql - 在 postgresql 中一次运行乘法语句

> ID：11134447
> 
> 赞同：1
> 
> 时间：2012-06-21T08:38:49.957
> 
> 标签：sql, postgresql, pgadmin

在postgresql中，如果一次执行多个SQL语句（在pgadmin中，选择所有这些语句并单击“执行”按钮，如图所示）， ![在此处输入图像描述](../Images/5f3a01869817410eed423164b419efb9.png)
服务器将等到最后一条语句执行完毕后，前一条语句才会生效。执行这些语句时，如果我运行，`SELECT * FROM tablename1`则会出现“关系不存在”错误。

语句执行后是否有任何方法生效。注意：每条 CREATE 语句如果单独执行，则需要很短的时间。SELECT 语句需要很长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:10:22.413

我假设，当你在 pgadmin 中选择一堆语句并点击“执行”时，它们都在一个[事务](http://www.postgresql.org/docs/9.1/static/tutorial-transactions.html)中运行。这意味着，在事务提交之前，其他并发会话将看不到事务的结果（或者如果事务失败，则根本不可见）。

尝试`COMMIT;`在每个`CREATE TABLE`或最后一个之后添加显式。

您可能还想阅读有关[事务隔离](http://www.postgresql.org/docs/9.1/static/transaction-iso.html)的内容。

# sql - 这个地址数据库有多糟糕？

> ID：11134449
> 
> 赞同：2
> 
> 时间：2012-06-21T08:39:06.510
> 
> 标签：sql, database, structure, normalization, street-address

我仍然是数据库、规范化等方面的新手，我可能需要一些帮助。这里附上我的数据库结构的一部分，我认为我的方法是个坏主意。在这里，我们的国家可以分为不同的省，所有的城市/城镇都在一个特定的省和一个描笼涯（我猜最接近外行人的术语是地区）。因此，如果在我们国家的所有地方，无论您身在何处，您都必须拥有特定的描笼涯、城市/城镇和省。我所做的是我使用外键来引用表格 barangay、城市/城镇、省。这是一个坏主意吗？

如果我创建一个`tblCustomer_Address`来分隔`Country_ID: Int FK`, `Province_ID: Int FK`, `CityTown_ID: Int FK`, `Baranggay_ID: Int FK`from会有多大不同`tblCustomer`？

谢谢！

```
tblCustomer(
  Customer_Id: Int PK
  Customer_FName: String
  Customer_MName: String
  Customer_LName: String
  Country_ID: Int FK
  Province_ID: Int FK
  CityTown_ID: Int FK
  Baranggay_ID: Int FK
  Additional_Address_Details: String
 )
tblCountry(
  Country_Id: Int PK
  Country_Name: String
)
tblProvince(
  Province_Id: Int PK
  Province_Name: String
)
tblCityTown(
  CityTown_Id: Int PK
  CityTown_Name: String
)
tblBarangay(
  Barangay_Id: Int PK
  Barangay_Name: String
) 
```

* 编辑：顺便说一句，我忘了提。我项目的一部分是生成报告，所以我想到的是跟踪位置。所以我想为描笼涯、城市/城镇、省份设置单独的表格，以使每个人都独一无二。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:46:16.927

非常糟糕，因为您必须维护国家、城市和地区的可用选项。

就个人而言，我只是创建了一个`addresses`数据库表，其中地址组件的字段符合 hCard 微格式：

```
CREATE TABLE IF NOT EXISTS `addresses` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `extended_address` varchar(128) DEFAULT NULL,
  `street_address` varchar(128) NOT NULL,
  `locality` varchar(128) NOT NULL,
  `region` varchar(128) DEFAULT NULL,
  `postal_code` varchar(128) DEFAULT NULL,
  `country_name` varchar(128) NOT NULL,
  PRIMARY KEY (`id`)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:50:01.653

好吧，在我看来，一个城市或省将存在一个描笼涯，一个省将存在一个城市，一个国家将存在一个省。如果您有一个位置表，位置类型为 Barangay、City、Province、Rural 或 Country，并且 parentID 指向层次结构中的父位置，那么结构如何。然后您的客户有一个位置 ID 指向层次结构中的任何位置。可以将新位置添加为城市、省（农村）地区或国家中的现有位置。表看起来像这样：

```
tblLocation(
LocationID int PK,
ParentID int FK references tblLocation LocationID,
LocationType int FK references tbllocationTypes,
LocationName
) 
```

无法将此添加为评论，因此这里有一个更完整的实现：

```
CREATE TABLE LocationType
(
    LocationTypeID int not null primary key,
    LocationTypeName varchar(20) not null unique
)
GO
CREATE TABLE Location (
    LocationID int not null primary key,
    ParentId int null references Location (LocationID),
    LocationName varchar(100),
    LocationTypeID int not null references LocationType (LocationTypeID)    
)
GO
CREATE Table Customer (
    CustomerID int not null primary key,
    FirstName varchar(50),
    MiddleName varchar(50),
    LastName varchar(50),
    LocationID int references Location (LocationID)
)
GO
CREATE TABLE City(  
    CityID int not null primary key references Location (LocationID),
    PostCode varchar(20) not null
)
GO
CREATE VIEW DetailedLocation AS 
    SELECT L.*, C.PostCode FROM Location AS L
    LEFT OUTER JOIN City AS C
    ON C.CityID = L.LocationID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:52:10.560

问题是您没有以正确的方式处理地址。如果您真的不需要完整地址（或者我只是在这里遗漏了这个？），那么在客户表中只有一个 Baranggay 字段将是“好的”。在任何其他情况下，您都应该有一个地址表，并且只需在客户表中引用 addressID。当然，除非客户应该能够拥有多个地址，在这种情况下，您应该为这种 m:n 关系引入一个 CustomerAddressRel 表。

无论如何，在这里将地址拆分为多个字段和/或表是没有意义的。一个特定的 barangay 将永远只属于一个城镇，那个城镇属于一个省，那个省属于一个国家（国家？如果这是关于多个国家，你需要不同的格式，因为 barangay 不是一个国际概念！）。因此，在地址中跟踪 baranggay 并有一个不同的表来保存 baranggay 所属的城镇和省份确实足够了。

很抱歉文字很长，但我觉得如果我提出一个修改后的方案，它对你一点帮助都没有。您需要了解某些决策的原因，然后根据您当前的数据集和预期范围做出最佳决策。如果您有可能走向国际，请确保数据方案现在已准备好。

编辑：

好吧，我觉得还是放下它是最好的。如果您想要面向未来和灵活，至少只要您限制在菲律宾并且 Barangay 属于一个城镇：

```
tblCustomer(
    Customer_ID: Int PK
    Customer_FName: String
    Customer_MName: String
    Customer_LName: String
)

tblCustomerAddressRel(
    Customer_ID: Int FK
    Address_ID: Int Fk
    Type: (Mailing, Billing, Historic,...)
)

tblAddress(
    Address_ID: Int PK
    Baranggay_ID: Int FK
    Additional_Address_Details: String (<< this looks like a bad idea btw)
)

tblCountry(
    Country_ID: Int PK
    Country_Name: String
)

tblProvince(
    Province_Id: Int PK
    Province_Name: String
    County_ID: Int FK
)
tblCityTown(
    CityTown_ID: Int PK
    CityTown_Name: String
    Province_ID: Int FK
)
tblBarangay(
    Barangay_ID: Int PK
    Barangay_Name: String
    CityTown_ID: Int FK
) 
```

# mysql - 从 MySQL 中的第一个整数中查找/剪切字符串

> ID：11134452
> 
> 赞同：3
> 
> 时间：2012-06-21T08:39:20.417
> 
> 标签：mysql, regex

我遇到了一个问题，在我的数据库中，我的值如下：

GSB45-B、GSBD60-01等

现在我需要从这些字符串中获取值**GSB** / **GSBD 。**所以实际上我需要从 te 开始到第一个整数的第一个字符。

希望有人可以帮助我，从现在开始谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:03:22.090

这是一个有点笨拙的解决方案，但您可以尝试：

```
SELECT 
    REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(SUBSTRING_INDEX(column, '-', 1), '0', ''), '1', ''), '2', ''), '3', ''), '4', ''), '5', ''), '6', ''), '7', ''), '8', ''), '9', '') AS extracted
FROM
    yourtbl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:05:56.737

这个怎么样？？

```
SELECT 
  myWord, 
  SUBSTR(myWord,1,LEAST (
    if (Locate('0',myWord) >0,Locate('0',myWord),999),
    if (Locate('1',myWord) >0,Locate('1',myWord),999),
    if (Locate('2',myWord) >0,Locate('2',myWord),999),
    if (Locate('3',myWord) >0,Locate('3',myWord),999),
    if (Locate('4',myWord) >0,Locate('4',myWord),999),
    if (Locate('5',myWord) >0,Locate('5',myWord),999),
    if (Locate('6',myWord) >0,Locate('6',myWord),999),
    if (Locate('7',myWord) >0,Locate('7',myWord),999),
    if (Locate('8',myWord) >0,Locate('8',myWord),999),
    if (Locate('9',myWord) >0,Locate('9',myWord),999)
  )-1) as NewString
FROM myTable; 
```

## [演示](http://sqlfiddle.com/#!2/6bb8a/1)

***另请阅读，[在另一列中使用别名](https://stackoverflow.com/questions/11156563/using-alias-name-in-another-column)。这和你的问题一样。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:36:22.740

```
DELIMITER |
CREATE FUNCTION digits( str CHAR(32) ) RETURNS CHAR(32)
BEGIN
  DECLARE i, len SMALLINT DEFAULT 1;
  DECLARE ret CHAR(32) DEFAULT '';
  DECLARE c CHAR(1);
  SET len = CHAR_LENGTH( str );
  label1: LOOP
  REPEAT
    BEGIN
      SET c = MID( str, i, 1 );
      IF c BETWEEN '0' AND '9' THEN 
        SET ret=SUBSTRING( str, 1, i-1);

        LEAVE label1;
      END IF;
      SET i = i + 1;
    END;
  UNTIL i > len END REPEAT;
  END LOOP label1;
  RETURN ret;
END |
DELIMITER ;

select digits('GSB45-B'),digits('GSBD60-01') ,digits('KKGSBD60-01') ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:03:15.163

MySQL 不能进行 REGEXP 提​​取，这是一件非常可悲的事情 :(

假设你的价值观模式是`[A-Z]*[0-9]{2}-.*`你可以使用这个丑陋的东西：

```
SELECT
    LEFT(
        SUBSTRING_INDEX("GSB45-B", "-", 1),
        LENGTH(SUBSTRING_INDEX("GSB45-B", "-", 1)) - 2
    ) as CODE; 
```

但我建议在应用程序端进行解析:)

# oracle10g - ORA-00979: 不是 GROUP BY 表达式 oracle 如何分组？

> ID：11134454
> 
> 赞同：-2
> 
> 时间：2012-06-21T08:39:22.770
> 
> 标签：oracle10g, group-by

我有一个使用 Hibernate 的应用程序。它生成了以下 SQL 语句。我正在尝试修改查询以对数据进行分组，但我不断收到错误消息

```
ORA-00979: not a GROUP BY expression 
```

查询

```
>  select
>         snstoken0_.id as id20_0_,
>         snstokenme1_.SNS_MESSAGE_ID as SNS2_21_1_,
>         snstokenme1_.SNS_TOKEN_ID as SNS3_21_1_,
>         snsmessage2_.id as id19_2_,
>         snsmaster3_.id as id17_3_,
>         snstokenpr4_.id as id22_4_,
>         snstoken0_.ACTIVE_STATE as ACTIVE2_20_0_,
>         snstoken0_.MEMBER_ID as MEMBER8_20_0_,
>         snstoken0_.SNS_MASTER_ID as SNS9_20_0_,
>         snstoken0_.TOKEN1 as TOKEN3_20_0_,
>         snstoken0_.TOKEN2 as TOKEN4_20_0_,
>         snstoken0_.TOKEN3 as TOKEN5_20_0_,
>         snstoken0_.DATE_TOKEN as DATE6_20_0_,
>         snstoken0_.USERNAME as USERNAME20_0_,
>         snstokenme1_.ARTICLE_ID as ARTICLE1_21_1_,
>         snstokenme1_.SNS_TOKEN_ID as SNS3_20_0__,
>         snstokenme1_.SNS_MESSAGE_ID as SNS2_0__,
>         snstokenme1_.SNS_TOKEN_ID as SNS3_0__,
>         snsmessage2_.ACTIVE_STATE as ACTIVE2_19_2_,
>         snsmessage2_.CONTENT_ID as CONTENT5_19_2_,
>         snsmessage2_.MESSAGE_TEXT as MESSAGE3_19_2_,
>         snsmessage2_.SNS_MESSAGE_ID as SNS6_19_2_,
>         snsmessage2_.POST_DATE as POST4_19_2_,
>         snsmaster3_.ACTIVE_STATE as ACTIVE2_17_3_,
>         snsmaster3_.ACTIVE_ICON as ACTIVE3_17_3_,
>         snsmaster3_.AUTHENTICATION_URL as AUTHENTI4_17_3_,
>         snsmaster3_.BREAK_TOKEN_URL as BREAK5_17_3_,
>         snsmaster3_.INACTIVE_ICON as INACTIVE6_17_3_,
>         snsmaster3_.NAME as NAME17_3_,
>         snsmaster3_.URL_WEBSITE as URL8_17_3_,
>         snstokenpr4_.ACTIVE_STATE as ACTIVE2_22_4_,
>         snstokenpr4_.SNS_TOKEN_ID as SNS5_22_4_,
>         snstokenpr4_.VALUE as VALUE22_4_,
>         snstokenpr4_.VAR as VAR22_4_,
>         snstokenpr4_.SNS_TOKEN_ID as SNS5_20_1__,
>         snstokenpr4_.id as id1__ 
>     from
>         SNS_TOKEN snstoken0_ 
>     left outer join
>         SNS_TOKEN_MESSAGE snstokenme1_ 
>             on snstoken0_.id=snstokenme1_.SNS_TOKEN_ID 
>     left outer join
>         SNS_MESSAGE snsmessage2_ 
>             on snstokenme1_.SNS_MESSAGE_ID=snsmessage2_.id 
>     left outer join
>         SNS_MASTER snsmaster3_ 
>             on snstoken0_.SNS_MASTER_ID=snsmaster3_.id 
>     left outer join
>         SNS_TOKEN_PROP snstokenpr4_ 
>             on snstoken0_.id=snstokenpr4_.SNS_TOKEN_ID 
>     group by
>         snstoken0_.MEMBER_ID
>     having
>         snstokenpr4_.VAR='PROFILE_IMAGE' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:20:38.010

如果您在查询中提供 GROUP BY 子句，它必须在 SELECT 列表中包含所有非聚合表达式（除了文字和一些确定性函数的一些例外）。

在您的情况下，您需要在 GROUP BY 之后重复整个表达式列表（在 SELECT 之后）。

（如果这是由 Hibernate 生成的，那么 Hibernate 正在生成对 Oracle 无效的 SQL。）

# jsp - 返回到两个不同 JSP 的按钮

> ID：11134455
> 
> 赞同：0
> 
> 时间：2012-06-21T08:39:24.337
> 
> 标签：jsp, back-button

我有两个 JSP 页面，比如页面 A 和页面 C。

单击 A 上的特定超链接会导致 C 加载。C 上有一个后退按钮，它总是返回到页面 A。此外，现在我添加了另一个页面 B，当单击特定链接时，页面 C 再次加载。

现在，如果我单击“后退”按钮，它仍会返回到页面 A。如何使后退按钮以一种将我带回调用 JSP 的方式发挥作用？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:53:45.753

您不应该在页面 C 中硬编码后退按钮链接。相反，将调用者页面作为参数发送到页面 C。并在后退按钮链接中设置该参数。

**以下是页面的外观：**

页面 A

```
<a href="pagec.jsp?caller=pagea.jsp">Page C</a> 
```

B页

```
<a href="pagec.jsp?caller=pageb.jsp">Page C</a> 
```

C页

```
<a href="${param.caller}">Back</a> 
```

# android - 如何在android中使用后台线程进行内联操作

> ID：11134456
> 
> 赞同：1
> 
> 时间：2012-06-21T08:39:26.510
> 
> 标签：android

我有以下程序流程：

1.  用户填写表格
2.  我的应用程序通过内容提供商生成许多记录，这可能需要一些时间（比如 10 秒）
3.  然后用户可以继续使用该程序

我有两个问题：

1.  为什么要使用非 UI 线程来执行第 2 步 - 鉴于用户在此过程完成之前无法在我的应用程序中执行任何操作，为什么我不只使用等待小部件？

2.  如果我应该使用非 UI 线程 - 哪种类型的异步线程方法最有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:42:10.013

因为您不是唯一使用 UI 线程的人。例如，您将阻止诸如时钟、通知等内容。几秒钟后，Android 将显示一个 ANR（应用程序未响应对话框），询问用户是要等待还是终止您的应用程序。至于 2，使用`AsyncTask`，它可以让您轻松完成工作并在完成后更新 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:42:52.883

使用`AsyncTask`. 看这个教程[AsyncTask - 教程](http://www.vogella.com/articles/AndroidPerformance/article.html)

这里是Docum .. [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:24:45.783

使用 AsyncTask 为您寻找答案... 点击[这里](http://jimmanz.blogspot.in/2012/05/async-task-in-android.html "异步任务教程")！

# qt - QItemDelegate 同时使用不同的 itemRoles

> ID：11134457
> 
> 赞同：1
> 
> 时间：2012-06-21T08:39:31.693
> 
> 标签：qt, delegates, qtableview, qitemdelegate

我目前正在处理`QTableview`. 哪个工作正常，做我想要的！

除了一件事：组合框使用与`Qt::DisplayRole`唯一相关联的空间。但我的项目由 a`Qt::DecorationRole`和 a组成`Qt::DisplayRole`。

因此，谁能解释我如何设置 qt 中代表占用的 itemRoles？

非常感谢唐尼

# javascript - 将 Grails 参数传递给 Javascript

> ID：11134466
> 
> 赞同：0
> 
> 时间：2012-06-21T08:40:06.357
> 
> 标签：javascript, jquery, grails

我想将 GSP 中使用的 URL 参数传递给 jQuery 函数。我找到了一个可行的解决方案，但我的直觉告诉我使用全局 Javascript 变量不是一个好主意。

GSP - 使 Grails 中的 params.id 可用于 Javascript 作为全局变量：

```
<g:javascript >
    var categoryId = ${params.id}
</g:javascript> 
```

在 jQuery 函数中使用此变量：

```
<g:javascript src="views/visual.js"/> 
```

Javascript：

```
// Call with URL using the global variable defined in the GSP
$.getJSON(
    "../visualJson?id=" + categoryId,
    function (data) {
    // Some code.
}); 
```

这样做的惯用 Grails 方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:44:39.070

虽然不一定特定于 Grails，但为什么不将变量传递给函数呢？说：

在“views/visual.js”中，你有：

```
var someFunction = function(categoryId)
{
    // Call with URL using the global variable defined in the GSP
    $.getJSON(
        "../visualJson?id=" + categoryId,
        function (data) {
        // Some code.
    });
} 
```

因此，您可以通过调用`someFunction('${params.id}')`应用程序中的函数来传递值。

# flex4 - 无法打开谷歌地图

> ID：11134473
> 
> 赞同：2
> 
> 时间：2012-06-21T08:41:00.553
> 
> 标签：flex4

我在 Flex 中创建了一个 Google Map 应用程序并部署在 apache-tomcat-7.0.5 上。它在本地机器上完美打开，但是当我尝试在网络中的其他机器上打开时，它显示“初始化失败：请检查 API 密钥、swf 位置、版本和网络可用性。” 而不是谷歌地图。我无法确定出了什么问题。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:23:44.733

当然这是正常的。您必须使用获取 API 密钥：[https ://developers.google.com/maps/documentation/flash/intro#API_Key](https://developers.google.com/maps/documentation/flash/intro#API_Key)

从本地主机访问应用程序时，不需要 API 密钥。但是，当您从 ip 或域中加载应用程序时，您需要一个密钥。

# android - 快捷方式上显示错误的 app_name

> ID：11134477
> 
> 赞同：3
> 
> 时间：2012-06-21T08:41:18.783
> 
> 标签：android, zxing

我实际上将条码扫描器 (ZXing) 作为库集成到我的应用程序中，因此用户无需下载 BarcodeScanner 应用程序，我可以添加一些用例。

我没有功能问题，我的应用程序按预期工作，但智能手机上我的快捷方式下显示的名称是库的名称：“条形码扫描仪”

我试图更改我的应用程序的 android:label，以便编译器不能混淆我的字符串/应用程序名称的 app_name 和 ZXing 的字符串/应用程序名称之一。我什至修改了库的字符串文件以删除“app_name”元素......

我试图删除意图过滤器......

```
<action android:name="code android.intent.action.MAIN" />
<category android:name="code android.intent.category.LAUNCHER" /> 
```

...在 BarcodeScanner 库的清单中，但它没有解决任何问题。

关于这个应用程序名称的检索方式有什么提示吗？

谢谢你。

PS：我注意到我的 com.google.zxing.client.R.java 仍然包含一个“app_name”ID，即使我在字符串文件中删除了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T06:33:16.493

我想我发现了，我的应用在 ./res 中没有 values-nl 文件夹。条形码扫描仪项目这样做了，它使用该文件本地化了应用程序，并且在该文件中是 app_name = Barcode Scanner。

我将 /res/values 文件夹复制到 /res/values-nl，现在它显示了我的应用程序名称，并且扫描仪工具仍然是本地化的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:27:25.343

这是因为您复制并粘贴了我们的整个应用程序，而不是从编写自己的应用程序开始，决定您需要重用的内容、理解代码并正确导入您想要的内容。*强烈*建议不要进行这样的复制，如果您复制我们的 UI 并且可能保留大部分其他元素不变，则可能违反商标法。请从我们的应用程序中删除您的副本，`android/`然后重新开始。您想在不进行扫描的情况下编写应用程序，然后`SurfaceView`在您的扫描 UI 中创建一个占位符。然后，如果您愿意，可以导入`core.jar`并重复使用以进行扫描。`DecodeHandler`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T13:49:47.640

在*res*文件夹中有很多 values-[language code] 文件夹，其中包含一个*strings.xml*文件，请尝试更改这些文件中的**app_name**值。

但我会同意肖恩所说的。

干杯。

# grails - Grails 域类 id 继承

> ID：11134479
> 
> 赞同：0
> 
> 时间：2012-06-21T08:41:31.380
> 
> 标签：grails, abstraction, grails-domain-class

我有四个具有共同属性的域类，`transID, createdDate`其中它们`transID`被键入`int`并映射为表的主键。通过抽象规则，我们将公共属性/属性分离到一个抽象类，然后让子类（在我的例子中是我拥有的四个域类）继承它们或`extends`它。

在我的抽象类中包含两个属性`transID, createdDate`，但由于`transID`设置为四个子类的主键，我在抽象类中格式化了这个映射。

```
static mapping = {
  id generator: 'increment',
     name: 'transID',
     column: 'transID',
     type: int
} 
```

我在运行项目时没有错误，但是当我检查 dbconsole 上的表时，我看不到与四个域类相关的四个表，但我只看到具有第一个孩子属性的抽象类。

有没有办法抽象所提到的域类的 id 或者我必须将它映射到子类而不是把它放在抽象类中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:52:35.333

默认情况下，GORM 使用每个类层次结构的表，因此您将只有一个表 - 如果您想要每个子类一个表 - 您可以使用 GORM DSL 进行配置 - 请参阅[gorm 中的继承](http://grails.org/doc/latest/guide/GORM.html#inheritanceInGORM)

但是在过度使用每个子类的表之前要小心。

# iphone - 如何获取 UIPopOver 选定的行文本

> ID：11134480
> 
> 赞同：1
> 
> 时间：2012-06-21T08:41:32.520
> 
> 标签：iphone, ipad, uitableview, uipopovercontroller

我是 iPhone 开发者的新手，

在我的应用程序中，当我单击按钮时会出现弹出框。

我想要做的是，当我在弹出窗口中选择任何行时，该单元格应标有右箭头图像，如：

`cell.accessoryType = UITableViewCellAccessoryCheckmark;`

我想获取该选定行的文本。

**简而言之**，我想在我的弹出框中实现复选框，如果选择了 5 行，那么我想获取这 5 行的文本并将其存储在数组中。

*这是我的代码：*

```
-(void)btnClicked{
    UIViewController* popoverContent = [[UIViewController alloc]init];
    UIView* popoverView = [[UIView alloc] initWithFrame:CGRectMake(110, 0, 500, 4)];

    UITableView *table = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, 250, 665) style:UITableViewStylePlain];

    [table setDelegate:(id<UITableViewDelegate>)self]; 
    [table setDataSource:(id<UITableViewDataSource>)self]; 
     [self.view addSubview:table];
    [table release];

    [popoverView addSubview:table];
    popoverContent.view = popoverView;
    popoverContent.contentSizeForViewInPopover = CGSizeMake(250, 600);
    self.popoverController = [[UIPopoverController alloc]
                              initWithContentViewController:popoverContent];

    [self.popoverController  presentPopoverFromRect:CGRectMake(100,0, 535, 35) 
                                             inView:self.view permittedArrowDirections:UIPopoverArrowDirectionRight animated:YES];

    [popoverView release];
    [popoverContent release];
} 
```

在此之后，我将我的数组传递给 UITableView。

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:58:58.080

请在您的 didSelectedRow 方法中实现以下代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
  {
       NSMutableArray *cells = [[NSMutableArray alloc] init];
       for(int index=0;index<indexPath.row;index++)
       {
           UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
           [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
           [cells addObject:cell.textLabel.text];
       }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:32:52.270

请找到我编辑过的新代码：

```
 if(cells == nil)
       cells = [[NSMutableArray alloc] init];

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath]
{
   if(indexPath.row < cells.count)
   {
      NSMutableDictionary *dict = [cells objectAtIndex:indexPath.row];
      BOOL isChecked = [[dict objectForKey:"isChecked"] boolValue];

      if(!isChecked)
      {
         [cells removeAllObjects];
         for(int index=0;index<indexPath.row;index++)
         {
             UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
             [cell setAccessoryType:UITableViewCellAccessoryCheckmark];

             dict = [[NSMUtableDictionary alloc] init]
             [dict setObject:@"true" forKey:@"isChecked"];
             [dict setObject:cell.textLabel.text forKey:@"rowText"];
             [cells addObject:dict];
             [dict release];
         }
      }
      else
      {
         UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
         [cell setAccessoryType:UITableViewCellAccessoryNone];
         [cells removeObjectAtIndex:indexPath.row];
      }
   }
   else
   {
         [cells removeAllObjects];
         for(int index=0;index<indexPath.row;index++)
         {
             UITableViewCell *cell =[tableView cellForRowAtIndexPath:indexPath];
             [cell setAccessoryType:UITableViewCellAccessoryCheckmark];

             dict = [[NSMUtableDictionary alloc] init]
             [dict setObject:@"true" forKey:@"isChecked"];
             [dict setObject:cell.textLabel.text forKey:@"rowText"];
             [cells addObject:dict];
             [dict release];
         }
   }

} 
```

**请注意，您的数组应该是全局的**

# objective-c - NSData writeToFile 读取时未完全写入

> ID：11134483
> 
> 赞同：2
> 
> 时间：2012-06-21T08:41:38.537
> 
> 标签：objective-c, ios, cocoa-touch

我正在编写一个 iPhone 应用程序，它允许您在一个视图中浏览图像，并在另一个视图中创建它们。

创建图像的视图将使用以下代码将图像写入文档文件夹（当点击按钮关闭视图时）：

```
[UIImagePNGRepresentation(image) writeToFile:path atomically:YES]; 
```

浏览器视图将使用以下方式加载图像：

```
UIImage *image = [UIImage imageWithContentsOfFile:path]; 
```

现在这非常有效，十分之九。十分之一的图像在我加载之前没有完全写入，所以它的下半部分将是黑色的。一切最终都会被写入 - 如果我在浏览器中重新加载图像，则会显示完整的图像。我认为这些东西在一个线程中总是一致的。

我可以做些什么来防止这种行为吗？

现在我正在考虑将新创建的图像传回浏览器，但这似乎是一种黑客行为，因为浏览器也会显示您之前创建的所有图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:42:13.450

如果您确定图像正在使用 保存在主（UI）线程上`writeToFile:atomically:`，然后图像也在主线程上加载，那么看起来该方法存在问题，维护其合同以完成操作通话返回的时间。iOS 有时确实存在错误，也许你发现了一个。

但是，我还要注意，我看到出现类似问题的一种可能方式是，当[假设](https://stackoverflow.com/questions/5075222/the-callback-sequence-of-viewdidappear-and-viewdiddisappear-between-two-view-con)离开一个视图以显示另一个视图时调用 , 等`viewWillAppear`的顺序。`viewDidDisappear`所以，我还要确保图像没有以这些方法之一保存。

既然你说这个问题显示了一个*半*可见的图像，我猜这不是这种情况，但我会向其他有类似操作顺序问题的人发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:46:48.207

对于未及时完成 UI 的进程的标准解决方案是将其拆分为一个新线程。也许您应该创建一个单独的线程来保存图像，然后通过委托方法通知 UI 以更新自身。

# html - 拥有一个 HTML 文件的 action 属性没用吗？

> ID：11134490
> 
> 赞同：0
> 
> 时间：2012-06-21T08:42:17.923
> 
> 标签：html, forms

我知道，这听起来像是一个奇怪的问题，我会尝试更清楚地解释这一点。我知道`action`表单元素属性中包含的文件是将处理表单中输入的数据的文件的位置。

`action`现在，在属性中包含一个 HTML 文件并让另一个文件处理数据是否有意义？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:47:26.207

是的，这是可能的。例如，您可以在您从表单的 action 属性指向的文件中包含另一个文件。但是由于您希望它是一个 HTML 文件，所以您被卡住了（您不能将 HTML 文件包含到彼此中）。但是...如果您想处理表单，您可能希望执行一些服务器端代码，例如 PHP 或 ASP。比你有选择。1.指向PHP文件而不是HTML文件或使用一些url重写（通过一些.htacess文件或其他东西）将html文件重定向到您的服务器端脚本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:48:45.340

该`action`属性是 HTTP POST 请求与提供的表单数据一起发送到的地方。

然后由`action`URL 页面来处理这些数据并对其进行任何需要的处理。

如果您希望处理一个文件上的数据并重定向到另一个文件，您可以发布到将处理数据的 HTML，然后在该页面上自动重定向到第三页。

* * *

例如：

**页1.html：**

```
<form action="Page2.html"> 
```

**页面2.html：**

处理数据然后以某种方式自动重定向：

```
<script type="text/javascript">
window.location = "Page3.html";
</script> 
```

**Page3.html：**

终于到了第三页。

* * *

对用户来说，这个过程是无缝的，看起来好像他们是`Page1.html`直接到的`Page3.html`，而您的数据处理是在`Page2.html`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:06:03.740

它没有用，因为单独的 HTML 文件无法处理 HTTP 请求的所有部分。HTML 无法解析 header 和 body 中的数据。并且没有其他地方可以传递数据。所以 HTML 不能处理传递的数据。

但首先，请确保那些带有`.html`扩展名的链接确实是 html 文件。不是隐藏在`.html`扩展中的服务器端脚本！

**笔记。**Javascript 可以解析部分 GET 参数！看到[这个答案](https://stackoverflow.com/questions/9048360/how-to-extract-relative-url-from-argument-values-from-request-string/9048444#9048444)。它展示了 Javascript 如何解析 GET 数据。因此，您可以创建一个应用程序，只需在表单上使用 GET 方法并使用纯 JS 来解析它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T09:07:17.043

> 只是我在action属性中看到了几个带有html文件的表单，所以我想知道是否可以在其他地方处理数据。

它可能只是名称上的静态 HTML 文件。URL 不能可靠地指示其背后的文件类型。表单目标可能是“隐藏”在处理数据的 .html 扩展名后面的服务器端脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T08:46:55.443

如果您想将数据发送到您在`action`属性中调用的文件之外的其他地方，我想您可能会使用 JavaScript 来做到这一点。既然如此，您也可以使用 JavaScript 将用户发送到新的 HTML 页面。

这个问题的其他答案是有效的并且它们有效，但整个想法本身有点毫无意义。所以我的回答是：

**是的。**

没用的。

# ajax - 将参数传递给 onSuccess 回调函数

> ID：11134491
> 
> 赞同：3
> 
> 时间：2012-06-21T08:42:21.080
> 
> 标签：ajax, asp.net-mvc, forms

我有以下表格：

```
 @using (Ajax.BeginForm("DoComment", "Publication", new { id = Model.Publication.OID, parentId = Model.OID }, new AjaxOptions
         {
              OnSuccess = "publishCommentSuccess"
         }))
   {
           //some code
   } 
```

我怎样才能传入`parentId`函数`publishCommentSuccess`？

```
function publishCommentSuccess (json) {

        if (!json.Result)
            showAuthBox();
        else
            alert(json.Message);

    }; 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:58:51.577

由于此参数被传递给控制器​​操作，因此您可以让此控制器操作将其作为 JSON 响应的一部分返回：

```
public ActionResult DoComment(int id, int parentId)
{
    ... 

    return Json(new 
    {
        Message = "foo",
        ParentId = parentId
    }, JsonRequestBehavior.AllowGet);
} 
```

这样您就可以在成功回调中使用它：

```
function publishCommentSuccess (json) {
    alert(json.ParentId);

    ...
}; 
```

# php - 将元素添加到 Ajax 响应返回的表单

> ID：11134494
> 
> 赞同：0
> 
> 时间：2012-06-21T08:42:30.800
> 
> 标签：php, javascript, jquery, ajax

我想将 ajax 响应返回的元素添加到 Form ，以便我可以在表单发布时访问该元素的值，知道如何做到这一点。

我听说它可以通过 jquery live 函数来完成，但是如何

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:53:38.100

[jQuery 文档](http://api.jquery.com/jQuery.ajax/)是你的朋友：

```
$.ajax({
  url: "test.html",
  success: function(data) {
     $('form').append(data)
  }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:50:12.947

在表单中添加 id，

```
<form id="myForm" ....> 
```

并在您获取 ajax 响应的函数中，

```
var data; //which is your responsehtml
...
$("#myForm").html($("#myForm").html() + data); 
```

# php - 在同一字符串中用连字符替换逗号或空格

> ID：11134495
> 
> 赞同：4
> 
> 时间：2012-06-21T08:42:32.143
> 
> 标签：php, regex, preg-replace

我需要 PHP 代码用连字符替换逗号或空格

例如：如果`$value = 'home garden'`或`$value = 'home,garden'`,

我需要结果`home-garden`

我试过了`$result = preg_replace('/\s+[\,]/', '-', trim($value));`，但没有用。。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T08:44:22.113

```
$result = preg_replace('/[ ,]+/', '-', trim($value)); 
```

测试：

```
$value = '  home  ,garden , gardener  ';
$result = preg_replace('/[ ,]+/', '-', trim($value));

echo $result;
//home-garden-gardener 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-21T08:50:45.650

`$result = str_replace(array(',', ' '), '-', $value);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T10:26:17.930

```
 $stringAfter = str_replace(",", "-",$stringBefore);

    example:
    $stringBefore="abc,def,ghi";
    $stringAfter = str_replace(",", "-",$stringBefore);
    print $stringAfter;

    Output:
   `abc-def-ghi` 
```

# c++ - 恒定大小的向量

> ID：11134497
> 
> 赞同：68
> 
> 时间：2012-06-21T08:42:40.287
> 
> 标签：c++, stl, vector

有人知道定义恒定大小向量的方法吗？

例如，而不是定义

```
std::vector<int> 
```

这将是

```
std::vector<10, int> 
```

**它应该是完全跨平台的**。也许是一个开源课程？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2015-06-23T17:06:05.967

std::vector 总是可以动态增长，但有两种方法可以分配初始大小：

这会分配初始大小并用零填充元素：

```
std::vector<int> v(10);
v.size(); //returns 10 
```

这会分配一个初始大小，但不会用零填充数组：

```
std::vector<int> v;
v.reserve(10);
v.size(); //returns 0 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-06-21T08:43:41.860

没有办法定义一个恒定大小的向量。如果您在编译时知道大小，则可以使用 C++11 的[std::array](http://en.cppreference.com/w/cpp/container/array)聚合。

```
#include <array>

std::array<int, 10> a; 
```

如果您没有相关的 C++11 支持，则可以使用 TR1 版本：

```
#include <tr1/array>

std::tr1::array<int, 10> a; 
```

或[boost::array](http://www.boost.org/doc/libs/1_49_0/doc/html/array.html)，正如其他答案中所建议的那样。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-02-19T19:37:30.130

如果您想要一个固定的编译时指定大小 (ala `std::array<T, N>`)，但您希望能够使用 和 之间的不同数量的元素填充向量`0`，`N`那么一个不错的选择是[`eastl::fixed_vector`](https://github.com/electronicarts/EASTL/blob/master/include/EASTL/fixed_vector.h).

**标准：：向量：**

a 的大小`std::vector`是动态的——它将动态分配所需的存储空间，您不能限制大小并强制执行错误。

但是，您可以`reserve`设置一定的大小，然后在需要分配新存储之前将元素添加到该大小。

`vector.size()`最初为 0，并随着您添加元素而增加

**标准：：数组：**

a 的大小`std::array`是一个编译时常量——它将静态分配所需的存储空间，您无法更改大小。

`array.size()`总是数组的大小，并且等于`array.max_size()`

**东方::fixed_vector:**

an 的大小`eastl::fixed_vector`可以是静态的也可以是动态的。

它最初会分配一定数量的元素，然后如果您允许动态增长，将在需要时动态分配。

出于您最初要求的目的，您可以禁用增长（通过`bEnableOverflow`下面的模板实例化）

`fixed_vector.size()`最初为 0，并随着您添加元素而增加。

```
template<typename T, 
         size_t nodeCount, 
         bool bEnableOverflow = true, 
         typename OverflowAllocator = 
                      typename eastl::type_select<bEnableOverflow,
                                                  EASTLAllocatorType, 
                                                  EASTLDummyAllocatorType>::type>
class fixed_vector; 
```

简单的例子：

```
#include <iostream>
#include <vector>
#include <array>
#include "EASTL/fixed_vector.h"

int main()
{
    std::vector<int> v;
    v.reserve(10);
    std::cout << "size=" << v.size() << " capacity=" << v.capacity() << '\n';

    std::array<int, 10> a;
    std::cout << "size=" << a.size() << " capacity=" << a.max_size() << '\n';

    eastl::fixed_vector<int, 10, false> fv;
    std::cout << "size=" << fv.size() << " capacity=" << fv.capacity() << '\n';

    return 0;
} 
```

输出：

```
size=0 capacity=10
size=10 capacity=10
size=0 capacity=10 
```

注意 的大小`array`为 10，而`vector`和`fixed_vector`为 0

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-21T08:43:25.403

使用[std::array](http://en.cppreference.com/w/cpp/container/array) [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")

为了更好的可读性，您可以制作 typedef：

```
typedef std::array<int, 10> MyIntArray; 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-07-11T13:31:58.693

这是一个老问题，但如果有人只需要**在运行时定义大小的常量索引容器**，我喜欢使用*unique_ptr*：

```
// c++14
auto constantContainer = std::make_unique<YourType []> ( size );

// c++11
std::unique_ptr<YourType[]> constantContainer {new YourType[ size ]};

// Access
constantContainer[ i ] 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-06-21T08:45:30.590

A`std::vector`是一个动态容器，没有机制限制它的增长。要分配初始大小：

```
std::vector<int> v(10); 
```

C++11 有一个[`std::array`](http://en.cppreference.com/w/cpp/container/array)更合适的：

```
std::array<int, 10> my_array; 
```

如果您的编译器不支持 C++11，请考虑使用[`boost::array`](http://www.boost.org/doc/libs/1_49_0/doc/html/array.html)：

```
boost::array<int, 10> my_array; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-21T08:49:16.070

这---->`std::vector<10, int>`无效并导致错误。但是新的 C++ 标准引入了一个新的类；标准::数组。你可以像这样声明一个数组：

```
std::array<int, 5> arr; // declares a new array that holds 5 ints
std::array<int, 5> arr2(arr); // arr2 is equal to arr
std::array<int, 5> arr3 = {1, 2, 3, 4, 5}; // arr3 holds 1, 2, 3, 4, 5 
```

具有`std::array`恒定大小并支持`iterator/const_iterator/reverse_iterator/const_reverse_iterator`. [你可以在http://cplusplus.com/reference/stl/array/](http://cplusplus.com/reference/stl/array/)找到更多关于这个类的信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-30T06:01:27.877

如果您需要现代 c++ 功能以及多态性，您可以这样做

```
template <typename T, unsigned N>
struct polymorphic_std_array : std::array<T, N>, std::span<T>
{
    polymorphic_std_array(std::array<T,N> a)
        : std::array<T, N>(a)
        , std::span<T>(*static_cast<std::array<T, N>*>(this))
    {}
};

int main()
{
    std::span<int>* p = new polymorphic_std_array<int, 2>({ 1,2 });
    for (const auto& e : *p)
    {
        std::cout << e << std::endl;
    }
} 
```

# android - 模拟器和上传视频

> ID：11134506
> 
> 赞同：2
> 
> 时间：2012-06-21T08:43:17.260
> 
> 标签：android, video, upload

有没有人帮助我了解android模拟器？我正在尝试将 .mpg 文件推送到 sd 卡中，但运行应用程序时看不到该文件。模拟器是否支持 .mpg 文件？

其次，我想将视频上传到 asp.net 服务器，但无法发送文件，并且代码中出现内存不足错误。我正在使用多部分上传。另一方面，此代码能够将 jpeg 文件上传到服务器，并且成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:50:54.763

将文件上传到模拟器实例

*   使用 AVD 创建一个新的模拟器。确保您为此选择了“SD 卡支持”。参考下图

![支持 SD 卡的 AVD](../Images/94f2ccd8bc038078e0e038a3f1685e10.png)

*   启动 AVD 并等待模拟器完全加载
*   现在在 Eclipse IDE 中，选择`DDMS`透视图，按`Window -> Open Perspective -> DDMS`
*   选择`File Explorer`选项卡以获取设备的目录树。
*   选择`mnt -> sdcard`文件夹。这是你的 SD 卡
*   现在使用顶部的“将文件推送到设备上”按钮将文件推送到模拟器实例。

![在此处输入图像描述](../Images/b55a3cb991acd4bb5cd448cbbc9be244.png)

*   该文件位于模拟器的 SD 卡中

# magento-1.4 - Magento：在观察者中停止添加到购物车的过程？

> ID：11134510
> 
> 赞同：0
> 
> 时间：2012-06-21T08:43:27.307
> 
> 标签：magento-1.4, observers

我正在观察将产品添加到购物车时触发的事件。这是我使用的教程：http: [//inchoo.net/ecommerce/magento/dispatching-before-and-after-events-to-magento-core-actions/](http://inchoo.net/ecommerce/magento/dispatching-before-and-after-events-to-magento-core-actions/)

现在在某些情况下，我想停止将产品添加到购物车的过程。我尝试抛出异常，但这给了我*处理您的请求*错误消息时出现错误。检查由 Magento 创建的报告并没有告诉我任何信息。我还能如何停止添加过程？

这是我的代码：

```
public function hookToAddToCartBefore($observer) {
    ...
    if(somecondition) {
         Mage::throwException('some message');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:17:46.263

特征：

*   之后清除错误信息
*   跳过所有“添加到购物车”代码
*   之后重定向到您选择的页面

在尝试了所有可以想象的事情以尝试优雅地中止“添加到购物车”之后，我设法将各个部分组合起来，并通过单步调试源发现了标志 FLAG_NO_DISPATCH。其他更改参数或设置重定向的尝试将被“添加到购物车”过程中的某些代码覆盖。

```
 Mage::app()->getResponse()->setRedirect($store_product->getProductUrl());
    Mage::getSingleton('checkout/session')->addError(Mage::helper('checkout')->__('Sorry, the price of this product has been updated. Please, add to cart after reviewing the updated price.'));
    $observer->getControllerAction()->setFlag('', Mage_Core_Controller_Varien_Action::FLAG_NO_DISPATCH, true); 
```

您可以收到通知，而不是错误：

```
Mage::getSingleton('core/session')->addNotice('Sorry, this product is currently not available...'); 
```

# c# - 如何知道哪个 ApplicationCommands 实现了 .Net Framework WPF 控件（如复制和粘贴）？

> ID：11134517
> 
> 赞同：1
> 
> 时间：2012-06-21T08:43:52.637
> 
> 标签：c#, wpf, command, commandbinding

我想知道如何知道框架随附的控件实现了哪些命令。例如，我如何知道 Image 是否实现了 ApplicationCommands.Copy 命令？或者，如果 TextBox 实现了 ApplicationCommands.Copy、ApplicationCommands.Cut、ApplicationCommands.Paste？

[从MSDN](http://msdn.microsoft.com/en-us/library/system.windows.input.applicationcommands.copy.aspx)中提取：

> 某些控件为某些命令内置了 CommandBindings。这种机制允许命令的语义保持不变，而实际的实现可以改变。例如，TextBox 处理粘贴命令的方式与设计用于支持图像的控件不同，但粘贴内容的基本概念保持不变。命令逻辑不能由命令提供，而必须由控件或应用程序提供。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:32:04.013

所以看起来要知道 UserControl 是否实现标准命令的唯一方法是用反编译器打开它并查看它是否注册了命令。

这是微软的一大败笔。这应该尽快记录在 MSDN 上。

# java - 字符串数组问题中的奇怪 NullPointerException

> ID：11134525
> 
> 赞同：0
> 
> 时间：2012-06-21T08:44:26.117
> 
> 标签：java, string

谁能帮我解决这个问题？

```
 'public class DataBase {
        static Article[] arts;
        public static int FileNumber;
        public static String[] FileList;
        static File root;

        public DataBase(String ID, String TA) 
        {
            File root=new File(pth);
            FileList=root.list().length;
            String[] FileList=new String[FileNumber];
            for(int i=0;i<FileNumber;i++)
            {
                 FileList[i]=new String(root.list()[i]);
            }
            arts=new Article[FileNumber];
        }

        public void phase_0()   //Initializare lista articole
        {
            for(int i=0;i<FileNumber;i++)
            {
                 System.out.println(FileList[i]); ******
            }
        }
    }' 
```

我在标有******的行出现运行时错误。我对这个问题没有任何想法。有人可以帮忙吗？

需要澄清的是，在 static void main 我首先使用构造函数

```
DataBase db=new DataBase(...) 
```

接着

```
db.phase_0(); 
```

我在指定行遇到了最后一种方法的错误。提前谢谢！必要时插入，我保证这`PATH`不是问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T21:20:30.683

你`public static String[] FileList`用这条线给你的阴影：

```
String[] FileList=new String[FileNumber]; 
```

它应该是：

```
FileList = new String[FileNumber]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T21:25:18.163

您的全局`FileList`数组被构造函数中的本地数组覆盖。从本地声明中删除`String[]`以使其成为全局。

# django - django-cmz - cmsplugin_zinnia - 错误模板 404.html/500.html

> ID：11134532
> 
> 赞同：0
> 
> 时间：2012-06-21T08:45:31.813
> 
> 标签：django, django-cms

我正在尝试为 django-cms 和 cmsplugin-zinnia 设置默认的 Django 错误处理程序，但由于某种原因，我无法覆盖它。

目前，每次我输入不存在的 URL 时，都会收到默认错误消息：

*“Zinnia 的博客只是另一个 Zinnia 博客。/错误 500”*

**我的 settings.py 配置是：**

```
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.admin',
'django.contrib.comments',
'django.contrib.staticfiles',
'cms',
'mptt',
'south',
'cms.plugins.text',
'cms.plugins.picture',
'cms.plugins.link',
'cms.plugins.file',
'cms.plugins.snippet',
'cms.plugins.googlemap',
'django.contrib.sitemaps',
'sekizai',
'menus',
'filer',
'djangocms_utils',
'simple_translation',
'tagging',
'zinnia',
'cmsplugin_zinnia',
'django.contrib.sitemaps',
'cmsplugin_contact', 
```

)

**和 url.py**

```
urlpatterns = patterns('',
url(r'^admin/', include(admin.site.urls)),
url(r'^i18n/', include('django.conf.urls.i18n')),
url(r'^', include('cms.urls')), 
```

)

```
if settings.DEBUG:
urlpatterns = patterns('',
    url(r'sitemap.xml/$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': {'cmspages': CMSSitemap}}),
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve',
    {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
    url(r'', include('django.contrib.staticfiles.urls')),
    url(r'^weblog/', include('zinnia.urls')),
    url(r'^comments/', include('django.contrib.comments.urls')),
) + urlpatterns 
```

有什么建议么 ？

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:09:13.107

我认为您可以通过创建自己的 404.html 和 500.html 模板来解决您的问题。

问候

# java - 将初始化参数添加到初始化列表中（ServletConfig）

> ID：11134536
> 
> 赞同：1
> 
> 时间：2012-06-21T08:45:37.570
> 
> 标签：java, servlets

尝试将 init 参数名称添加到 init(ServletConfig) 方法中的列表。

```
public void init(ServletConfig sc){
    try {
        super.init(sc);
        Enumeration<String> e= sc.getInitParameterNames();
        while(e.hasMoreElements()){
            list.add(e.nextElement());
        }
    } catch (ServletException e1) {
        e1.printStackTrace();
    }
} 
```

我在使用此列表时收到**NullPointerException**，因为**e.hasMoreElement() 返回 false**。我很确定我已经在 web.xml 文件中正确添加了 init 参数。出了什么问题？请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:50:10.513

我认为你没有对象`intialized`。对象为空`list`。`list`

更改代码列表：

```
public void init(ServletConfig sc){
   try {
      super.init(sc);
      list = new ArrrayList<String>();
      Enumeration<String> e= sc.getInitParameterNames();
      while(e.hasMoreElements()){
         list.add(e.nextElement());
      }
   } catch (ServletException e1) {
    e1.printStackTrace();
   }
} 
```

# python - onupdate 基于具有 sqlalchemy 声明性基础的另一个字段

> ID：11134539
> 
> 赞同：2
> 
> 时间：2012-06-21T08:46:12.167
> 
> 标签：python, sqlalchemy, pyramid

我将 sqlalchemy 与金字塔框架一起使用，并且我想使用他的邮政编码将一个人链接到他的地理部门。所以我在定义department_id 列定义department_id 时尝试使用onupdate 参数。参见下面的代码：

```
from datetime import date
from emailing.models import Base, DBSession
from sqlalchemy import Column, Integer, Unicode, Text, DateTime, Sequence, Boolean, Date, UnicodeText, UniqueConstraint, Table, ForeignKey
from sqlalchemy.orm import scoped_session, sessionmaker, column_property, relationship, backref
from sqlalchemy.sql import func

class Person(Base):
    __tablename__ = u'person'
    id = Column(Integer, primary_key=True)

    firstName = Column(Unicode(255))
    lastName = Column(Unicode(255))

    created_at = Column(Date, default=func.now())
    updated_at = Column(Date, onupdate=func.now())

    department_id = Column(Integer(), ForeignKey('department.id'), onupdate=dep_id_from_postcode)
    department = relationship("Department", backref='persons')

    __table_args__ = (UniqueConstraint('firstName', 'lastName'), {})

    def dep_id_from_postcode(self):
        return int(self.postcode[:2]) 
```

在更新 updated_at 字段时工作正常，但对于 deparment_id 字段它告诉我：

> NameError：未定义名称“dep_id_from_postcode”

我在这里找到了关于 python 执行函数的文档：http: [//docs.sqlalchemy.org/en/latest/core/schema.html](http://docs.sqlalchemy.org/en/latest/core/schema.html?highlight=trigger#python-executed-functions) ?highlight=trigger#python-executed-functions 但没有在 onupdate 中使用另一个字段争论。

我希望我很清楚，因为我不是“天生的英语演讲者”谢谢大家

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T10:36:45.277

在使用之前移动函数定义：

```
class Person(Base):
    # ...
    def dep_id_from_postcode(self):
        return int(self.postcode[:2])
    # ...
    department_id = Column(Integer(), ForeignKey('department.id'), onupdate=dep_id_from_postcode)
    # ... 
```

真的`postcode`是直接在一个领域`Person`吗？因为如果不是，您可能需要完全不同的处理方式。例如，如果`postcode`是从`primary_address`关系派生的，则需要检查`primary_address`关系的添加/删除以及相关`Address`对象中的更改以进行正确的挂钩。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T20:27:59.817

SQLAlchemy 具有在默认（即 onupdate）函数中使用其他列值的特殊机制，称为：Context-Sensitive Default Functions [http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#context-sensitive-default-functions](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#context-sensitive-default-functions)：

> 与默认生成有关的此上下文的典型用例是可以访问在行上插入或更新的其他值。

正如 Van 指出的那样，您需要确保 postcode 是为 Person 定义的字段，否则您需要添加功能来处理获取与 Person 实例关联的 postcode。

什么对我有用 - 常规功能，不绑定到任何对象。SQLAlchemy 将在插入和/或更新时调用它，并使用“context”传递特殊参数 - 这不是您正在更新的实际对象。

所以对于你的例子，我会做这样的事情。

```
def dep_id_from_postcode(context):
    postcode = context.current_parameters['postcode']
    return int(postcode[:2])

class Person(Base):
    postcode = Column(String)
    # ...

    # ...
    department_id = Column(Integer(), ForeignKey('department.id'), onupdate=dep_id_from_postcode)
    # ... 
```

小心这个上下文参数 - 如果我不使用相同的操作更新“邮政编码”值，那么在某些情况下，当上下文具有 None 字段的值时，我最终会遇到问题。

带有调试器的 pydev 的 Eclipse 帮助我查看了作为上下文传递的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-24T01:41:37.400

> 小心这个上下文参数 - 如果我不使用相同的操作更新“邮政编码”值，那么在某些情况下，当上下文具有 None 字段的值时，我最终会遇到问题。

正如@vvladymyrov 提到的那样，如果您使用未更新的字段值，他最终会遇到上下文将产生 None 的问题。但是，您仍然需要计算另一个。

例如：

您有 firstName 和 lastName 将被视为用户的输入。您还拥有根据名字和姓氏计算的全名。以下是您遵循的代码：

```
#The below code is the ERModel class in sqlalchemy
def calculateFullName(context):
    name = context.current_parameters['firstName'] + " " + context.current_parameters['lastName']
    return name

class User(Base):
    firstName= Column(String)
    lastName= Column(String)
    name= Column(String,default=calculateFullName,onupdate=calculateFullName)
    # ...
    # ...
# End of ER Model 
```

现在让我们考虑一种情况，您想要更新用户的姓氏，并且在内部，名称也应该通过使用 calculateFullName 函数进行更新，您可以实现它，但如果您尝试执行以下操作，请注意：

```
user = session.query(User).filter(User.id=<id>).one() # Here you will get the specific user based on id.
user.lastName = "XXX" #This is the new value you want to be updated for the existing user.
session.update(user)
session.commit() 
```

如前所述，上面将调用 calculateFullName 并且您将获得上下文，但在该 context.current_parameters 中，firstName 将为 None。（由于您没有更新 firstName，您将获得该值为 None，如果您愿意，您可以 print(context. **dict** ) 检查您得到的内容）。

因此，我为这类情况找到的解决方案（更新依赖于 2 列的列，其中只有一个列正在更新）使用会话查询 update() 函数，如下所示：

```
query = session.query(User).filter(User.id=<id>)  # This will return query object
query.update({"lastName"="XXX", "firstName"=query.one().__dict__.get("firstName")},syncronize_session=False) 
```

当您更新 lastName 时，您需要 firstName 来计算名称。因此，您需要将 firstName 发送到上下文。由于您已经查询并将当前记录从数据库获取到内存，您可以使用它并将其发送到 query.update() 以便您将在上下文对象中获得它。

**注意：**我采取的方法可能不是有效的方法。如果我犯了任何错误，请指导我。我很高兴学习。

# iphone - 无法解决facebook注销

> ID：11134544
> 
> 赞同：0
> 
> 时间：2012-06-21T08:46:16.820
> 
> 标签：iphone, facebook

我正在使用 facebook sdk 登录到 iphone 中的应用程序。启动应用程序并使用 Facebook 帐户登录后，继续计数。然后我停止模拟器并再次运行应用程序以注销，但我无法注销。我去了登录页面并按下登录，然后只能注销。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:52:39.263

当用户单击注销并删除存储在 facebook 的 userdefault 中的所有密钥时，您提供此方法

```
- (void)fbDidLogout
{
  NSLog(@"Logged out of facebook");
  NSHTTPCookie *cookie;
  NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
  for (cookie in [storage cookies])
  {
   NSString* domainName = [cookie domain];
   NSRange domainRange = [domainName rangeOfString:@"facebook"];
   if(domainRange.length > 0)
   {
       [storage deleteCookie:cookie];
   }
  }
} 
```

# android - 将可点击单元格的屏幕 9X9 网格设计为像游戏屏幕一样开/关的最佳方法是什么？

> ID：11134550
> 
> 赞同：0
> 
> 时间：2012-06-21T08:46:59.750
> 
> 标签：android, android-layout, android-button

在我的 Android 应用程序中，

我有一个屏幕，其中有一个 9X9 单元格（按钮/图像）的网格。

我需要使用两个不同的图像作为背景（例如：开和关）来指示选中或未选中单元格的状态。

现在我正在使用按钮并单击按钮，我正在将按钮的背景图像从打开更改为关闭，反之亦然。

我的问题是，

1.**从“清洁代码”的角度来看，这是正确的处理方式吗？**

2.**有没有更好的方法来完成任务？**

（注意：我想保留单击按钮的选项，即使它已经打开，以备将来使用）

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:12:00.097

您可以使用 Button，通常程序员会这样做，但我建议改为使用`ToggleButton`。

*在按钮上使用 ToggleButton 的好处是，您不需要使用任何标志以编程方式维护按钮的状态，以记住用户是否选择了一次按钮*，以下是相同的演示代码：

**布局文件夹中的 XML**

```
 <ToggleButton
            android:id="@+id/tbApp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/selector_toggle_button"
            android:textOff=""
            android:textOn="" /> 
```

**可绘制文件夹中的 selector_toggle_button.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:drawable="@drawable/toggle_on" />
    <item android:drawable="@drawable/toggle_off" />
</selector> 
```

和**Java代码点击它**，

```
tbApp.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                                         //if isChecked==true then selected 
                                         //else deselected
                               }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T08:52:38.850

[这是在这里](https://stackoverflow.com/questions/4125774/android-button-set-onclick-background-image-change-with-xml)回答的

或者

[安卓文档](http://developer.android.com/resources/tutorials/views/hello-formstuff.html)

检查这是否是您正在寻找的

# css - PrimeFaces：如何覆盖 CSS 类

> ID：11134556
> 
> 赞同：5
> 
> 时间：2012-06-21T08:47:32.097
> 
> 标签：css, jsf-2, primefaces, styling

创建按钮时，`ui-corner-all`始终应用该类。我尝试了以下方法：

```
<p:commandButton id="like" styleClass="ui-corner-right" /> 
```

但它没有用。在 Firebug 上，我看到了`ui-corner-all`和`ui-corner-right`：

```
<div id="form1:like" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left ui-corner-right"> 
```

**更新 1：**

根据 JMelnik 的提示，我终于通过添加以下脚本成功地更改了`ui-corner-all`to的样式：`ui-corner-right`

```
<style type="text/css">
    #myForm\:likeButton .ui-corner-all {
        border-radius: 6px 0px 0px 6px !important;
    }
</style> 
```

并将`<p:commandButton>`内部包装`<h:panelGroup>`如下：

```
<h:form id="myForm">
    <h:panelGroup id="likeButton">
        <p:commandButton />
    <h:panelGroup>
</h:form> 
```

**更新 2：**

感谢 BalusC 的建议，下面的解决方案应该会更好：

```
<style type="text/css">
    .likeButton .ui-corner-all {
        border-radius: 6px 0px 0px 6px !important;
    }
</style>  

<h:panelGroup styleClass="likeButton">
    <p:commandButton />
<h:panelGroup> 
```

最好的祝福，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:57:34.040

**使用标准的 CSS 覆盖方式。**

在您的页面中包含 *.css，您可以在其中重新定义`ui-corner-all`和`ui-corner-right`分类。

```
.ui-corner-all {
    //ovverides to nothing, you can also define any properties you want here
}

.ui-corner-right {
    //define properties  which would override unwanted behaviour
} 
```

您还可以应用其他 css 类来覆盖不需要的属性。

# c# - 使用 agilitypack C# 处理 cookie 和标头

> ID：11134558
> 
> 赞同：2
> 
> 时间：2012-06-21T08:48:00.733
> 
> 标签：c#, .net, html-agility-pack

agilitypack 在 html 解析方面对我来说做得很好，但是其他 html 方面呢？对象 agilitypack.HtmlWeb 允许访问 cookie 和标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T15:22:43.547

可以通过`HtmlWeb.PreRequest`和`HtmlWeb.PostResponse`处理程序获得对 cookie 和标头的访问。第一个发生在执行 HTTP 请求之前。第二个发生在执行 HTTP 请求之后。要使用 cookie，您应该通过将属性设置为 来为`HtmlWeb`实例启用它。`HtmlWeb.UseCookies``true`

这是一个例子：

```
var web = new HtmlWeb { UseCookies = true };
web.PreRequest += request =>
{
    // gets access to the cookie container
    var cookieContainer = request.CookieContainer;
    //  gets access to the request headers
    var headers = request.Headers;
    return true;
};
web.PostResponse += (request, response) =>
{
    // response headers
    var headers = response.Headers;
    // cookies
    var cookies = response.Cookies;
}; 
```

# c# - C#在复制文件时，允许另一个进程以独占方式锁定文件？

> ID：11134559
> 
> 赞同：2
> 
> 时间：2012-06-21T08:48:01.483
> 
> 标签：c#, file, copy, readonly, fileshare

我目前正在复制我们的存档文件`oracle server`，我正在阻止发生的事情是，当我复制文件服务器时，它会在尝试更新文件时出错。

起初我试过

```
File.Copy(source, Destination, true); 
```

但似乎这种方法正在锁定文件，服务器在日志中抛出错误：

```
OSD-04002: unable to open file
O/S-Error: (OS 32) The process cannot access the file because it is being used by another process. 
```

我将方法更改为

```
FileStream rStream = new FileStream(source, FileMode.Open, FileAccess.Read, FileShare.ReadWrite); 
```

但是当我尝试使用带有 FileShare 的测试程序打开文件时。现在它也抛出一个错误，另一个进程正在锁定文件。

一旦另一个进程想要访问/写入文件，是否可以放手或释放文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:02:57.797

关于什么

```
var stream = System.IO.File.Open(
                 source, System.IO.FileMode.Open, System.IO.FileAccess.Read
             ); 
```

这会锁定文件吗？

最好的解决方案是使用 VSS 来防止锁定（你的服务器是一个 windows 盒子，对吗？）

*   创建快照
*   从快照复制文件
*   删除快照

您可以使用 .NET 自动执行此操作

[http://www.codeproject.com/Articles/22745/Volume-Shadow-Copies-from-NET](http://www.codeproject.com/Articles/22745/Volume-Shadow-Copies-from-NET)

# iphone - 将url的完整内容保存在xcode中

> ID：11134560
> 
> 赞同：0
> 
> 时间：2012-06-21T08:48:11.590
> 
> 标签：iphone, xcode

在我的 iPhone 应用程序中，我想完全保存网页并稍后显示。我搜索时已经得到了一些方法。但是他们中的任何一个都没有完全保存网页。在某些方法中，图像未保存，而在某些其他方法中，文本未以正确的字体显示。如果有人发现任何新想法，请分享。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T08:51:11.963

请参阅此[如何在 UIWebView 中保存内容以便在下次启动时更快地加载？](https://stackoverflow.com/questions/1343515/how-to-save-the-content-in-uiwebview-for-faster-loading-on-next-launch)

# java - 运行 .jar 中打包的 .exe

> ID：11134564
> 
> 赞同：1
> 
> 时间：2012-06-21T08:48:45.803
> 
> 标签：java, jar, package, embedded-resource, runtime.exec

我正在尝试将我制作的 2 个程序合并到一个 .jar 文件中。一个程序是用 java 编写的 .jar，第二个是用 c++ 编写的 .exe。我把这两个文件都放到了新的 .jar 中，写了这段代码，但是没有用。当此代码导出到 .jar 并执行时，两个文件都没有运行，并且在 cmd 中出现错误“没有主清单属性，在合并的.jar 中”。虽然它在 Eclipse 中运行时运行良好。

```
 public class main
    {
        public static void main(String[] args) 
   {
      try 
   {
      Runtime.getRuntime().exec("cmd /c project1.jar");
      Runtime.getRuntime().exec("cmd /c project2.exe");
   }  
   catch(Exception exce)
     { 
     /*handle exception*/
      }
       }
   } 
```

知道如何解决这个问题或有其他方法吗？我是java新手，所以想不出什么好东西。也许可以将这些文件放到 Windows 中的临时位置并在执行后将其删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:00:24.740

你可以试试这个：

```
 String filePath = "C:/Path/to/my/file.exe";
    try {

        Process p = Runtime.getRuntime().exec(filePath);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:54:39.937

查看[**JAR 文件规范**](http://docs.oracle.com/javase/1.5.0/docs/guide/jar/jar.html#Main%20Attributes)。

您必须更新 MANIFEST 文件以使用包含您的 main() 方法的类填充“Main-Class”属性。

# mysql - 如何在mysql命令行中垂直显示记录？

> ID：11134569
> 
> 赞同：45
> 
> 时间：2012-06-21T08:48:52.603
> 
> 标签：mysql, cmd, command-prompt

首先解释一下我的想法{我不擅长英语}

在[Alan Storm 的](http://alanstorm.com/magento_advanced_orm_entity_attribute_value_part_1)博客上，我发现了一个关于 mysql 的棘手问题。我不确定他是否使用命令行。评论部分已经关闭，所以我把这个查询放在这里。

```
mysql> select * from eav_entity_type\G 
```

当我在命令行（基于 Window dos 的 cmd）中运行此语句时，我只返回正常的 select 语句结果。

请让我知道如何获得该博客中显示的结果，或者它只是代码美化器的一部分。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-21T08:59:36.157

我认为您正在使用`\g`而不是`\G`. 除非您使用，否则您将`\G`获得默认输出模式。默认为`\g`。

```
mysql> show databases\g
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.00 sec)

mysql> show databases\G
*************************** 1\. row ***************************
Database: information_schema
*************************** 2\. row ***************************
Database: mysql
*************************** 3\. row ***************************
Database: test
3 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:02:10.093

也许您使用的是旧版本的 MySQL？`\G`是 MySQL ego 命令的快捷方式，也应该在您的系统上工作。

见：[http ://dev.mysql.com/doc/refman/5.5/en/mysql-commands.html](http://dev.mysql.com/doc/refman/5.5/en/mysql-commands.html)

它可以在我的系统上进行垂直显示。

# sql - 与 INNER JOIN 不同

> ID：11134570
> 
> 赞同：0
> 
> 时间：2012-06-21T08:48:52.330
> 
> 标签：sql

我有一个问题要问

餐桌水果

```
 FruitID |  Fruit  | Unit Price 
    1    |  Orange |     $3
    2    |  Apple  |     $2
    3    |  Grape  |     $4 
```

餐桌水果详情

```
Picture      | Color   | FruitID
Orange_o.jpg | Orange  |    1
Apple_g.jpg  | Green   |    2
Apple_r.jpg  | Red     |    2
Grape_p.jpg  | Purple  |    3
Grape_g.jpg  | Green   |    3 
```

我想要得到的结果是所有没有重复名称的水果。

例子

```
Fruit | UnitPrice | Picture      | Color
Orange|    $3     | Orange_o.jpg | Orange
Apple |    $2     | Apple_g.jpg  | Green
Grape |    $4     | Grape_p.jpg  | Purple 
```

有可能做到这一点吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:23:09.840

为 SQL Server 编写，但实际查询应该适用于其他数据库。

设置数据：

```
declare @Fruit table (FruitID int not null,Fruit varchar(10) not null,UnitPrice int not null)
insert into @Fruit(FruitID,Fruit,UnitPrice) values
(1,'Orange',3),
(2,'Apple',2),
(3,'Grape',4)

declare @FruitDetails table (FruitID int not null,Picture varchar(20) not null,Color varchar(10) not null)
insert into @FruitDetails (FruitID,Picture,Color) values
(1,'Orange_o.jpg','Orange'),
(3,'Grape_p.jpg','Purple'),
(3,'Grape_g.jpg','Green'),
(2,'Apple_g.jpg','Green'),
(2,'Apple_r.jpg','Red') 
```

询问：

```
select
    f.Fruit,
    f.UnitPrice,
    fd.Picture,
    fd.Color
from
    @Fruit f
        inner join
    @FruitDetails fd
        on
            f.FruitID = fd.FruitID
        left join
    @FruitDetails fd_anti
        on
            f.FruitID = fd_anti.FruitID and
            fd_anti.Picture < fd.Picture --This is the condition for picking a better row
where
    fd_anti.FruitID is null --This eliminates rows where a better row was picked 
```

结果：

```
Fruit      UnitPrice   Picture              Color
---------- ----------- -------------------- ----------
Orange     3           Orange_o.jpg         Orange
Grape      4           Grape_g.jpg          Green
Apple      2           Apple_g.jpg          Green 
```

这与您的预期结果不符，但是您没有为我们从`FruitDetail`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:24:07.880

SQL 中没有“选择任何一个”。这不是有充分理由的。它不是确定性的，这会让您在尝试调试应用程序时非常头疼。但是可以手动选择一个，只是需要一些额外的技巧来提取（一些数据库具有可以使其更容易的扩展，但说到通用 SQL）。

因此，首先您必须选择一个标准，您将根据该标准选择要加入的一行。假设您想要颜色按字母顺序排在第一位的那个（在实际情况下，您可能会有类似的优先级或重要性）。您使用的列对于每种水果必须是唯一的！您可以通过 group-by 或嵌套 select 的另一个连接来计算它。嵌套选择 IMO 更容易编写和理解。这将是：

```
(select min(Color) from FruitDetails as inner where inner.Fruit = Fruit.Fruit) 
```

现在你加入有条件的表格，颜色就是那个颜色，所以：

```
select * from Fruit
    join FruitDetails as outer
        on outer.Fruit = Fruit.Fruit
        and outer.Color = (select min(Color) from FruitDetails as inner where inner.Fruit = Fruit.Fruit) 
```

假设该`FruitDetails`表有一个`Fruit`您忘记的列，但没有它根本不可能连接。并且它有一个`unique(Fruit, Color)`约束来保证每个水果只有一条具有最小颜色值的行。

具有两个连接的另一种选择是：

```
select Fruit.* ThisDetails.*
    from Fruit
    join FruitDetails as ThisDetails using (Fruit)
    join FruitDetails as BestDetails using (Fruit)
    group by Fruit.*, ThisDetails.*
    having ThisDetails.Color = min(BestDetails.Color) 
```

（`using (column)`是`onetable.column = othertable.column`大多数但不是所有 SQL 变体的缩写）

# php - CakePHP HTML qoute 编码问题

> ID：11134571
> 
> 赞同：1
> 
> 时间：2012-06-21T08:48:52.560
> 
> 标签：php, mysql, cakephp

我正在开发 cakephp 1.3。我在字符编码中发现问题。我有两个模型**Keyword**和**Group**，这样 Keyword 属于 Group。我要做的是在模型关键字中执行全文查询。

```
function geParentKeyword($keyword) {    

//$keyword = *Acupuncturist*;   Assuming this as input
$match = html_entity_decode("MATCH(Keyword.keyword) AGAINST (\"".trim($keyword)."\" IN BOOLEAN MODE)" );
return $this->find('first', array('fields' =>array('Group.name'), 'conditions' =>array($match) ));          
} 
```

这个查询我得到了错误的结果。我调试了查询，我得到了这个

```
SELECT `Group`.`name` 
FROM `keywords` AS `Keyword` 
LEFT JOIN `groups` AS `Group` ON (`Keyword`.`group_id` = `Group`.`id`)  
WHERE MATCH(`Keyword`.`keyword`) AGAINST (&quot;*Acupuncturist*&quot; IN BOOLEAN MODE)   
LIMIT 1" 
```

该查询是完美的，但这里的问题是 $match cake 将双引号转换为`&quot;`我尝试使用 html_entity_decode 和 str_replace() 但它们显示相同的查询。

更多细节。

**核心.php**

```
Configure::write('App.encoding', 'UTF-8'); 
```

**数据库.php**

```
var $default = array(
        ….
        'encoding' => 'UTF8',
    ); 
```

预期结果

```
MATCH(Keyword.keyword) AGAINST (' *Acupuncturist* ' IN BOOLEAN MODE) 
```

请指导我是什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:16:20.867

你试过这个吗？

```
$match = "MATCH(Keyword.keyword) AGAINST ('".trim($keyword)."' IN BOOLEAN MODE)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:12:37.903

尝试

```
$match = 'MATCH(Keyword.keyword) AGAINST (\''. html_entity_decode(trim($keyword)) .'\' IN BOOLEAN MODE)'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T11:30:16.023

我自己解决这个问题。

这是由于调试模式，我禁用了调试模式。它只工作

```
Configure::write('debug', 0); 
```

# php - 在 Windows 上计算 PHP 中的文件行数

> ID：11134572
> 
> 赞同：2
> 
> 时间：2012-06-21T08:48:53.400
> 
> 标签：php, windows, numbers, exec, lines

要确定我当前使用的文件中的确切行数：

```
if(exec("wc -l ".escapeshellarg($strFile), $arResult)) {
     $arNum = explode(" ", $arResult[0]);
     // ...
  } 
```

在 Windows 上执行相同操作的最佳方法是什么？

* * *

**编辑：**

另一个问题的一次尝试：

```
$file="largefile.txt";
$linecount = 0;
$handle = fopen($file, "r");
while(!feof($handle)){
  $line = fgets($handle);
  $linecount++;
}

fclose($handle);

echo $linecount; 
```

1.  有没有人有使用大文件的这种方式的经验？

2.  除了 PHP 函数之外，有没有使用**Windows 命令**来确定文件大小的方法？

* * *

**解决方案**

我`find`按照评论中接受的答案的建议使用命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T08:52:37.397

也许你可以使用：

```
$length = count(file($filename)); 
```

这将在任何地方工作。

`file()`将文件读入一个数组，在换行符处分割，并`count()`计算数组的长度。

如果它不能正常工作（例如在 macintosh 文件中），请看这里：[http ://www.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings](http://www.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:21:55.050

我更喜欢循环遍历文件，每次读取一行并增加一个计数器，使用和计算[file()](http://is2.php.net/manual/en/function.file.php)返回的数组只适用于较小的文件。

```
<?php

$loc = 'Ubuntu - 10.10 i386.iso';

$f = fopen($loc,'r');
$count = 0;

while (fgets($f)) $count++;

fclose($f);

print "Our file has $count lines" . PHP_EOL; 
```

如果您将[file()](http://is2.php.net/manual/en/function.file.php)用于如此大的文件，它会将其完全读入内存，这取决于您的情况，这可能会令人望而却步。如果这是一次“我不在乎，这是我的工作站，我有足够的内存”的情况，或者文件保证很小，那么您可以使用

```
count(file($loc)); 
```

否则我会遍历，特别是因为如果必须由许多进程执行操作。两种计数方式都会遍历整个文件，但在第二种情况下内存会大大增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:45:50.697

用于计算行号的 Windows 命令：

```
find /c /v "" < type file-name.txt 
```

改编自[Stupid command-line trick: Counting the number of lines in stdin](http://blogs.msdn.com/b/oldnewthing/archive/2011/08/25/10200026.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-05T11:05:52.247

这正在使用`substr_count`并且比`fgets`：

```
$file="largefile.txt";
$linecount = 0;
$chunk_size = (2<<20); // 2MB chuncks

$handle = fopen($file, "r");

while(!feof($handle)){
    $chunk = fread($handle,$chunk_size);
    $linecount += substr_count($chunk,PHP_EOL);
    // $linecount += substr_count($chunk,"\n"); // also with \n, \r, or \r\n
}
fclose($handle);
echo $linecount; 
```

该代码正在考虑使用最少的内存（2 MB 块）。 *以 85 MB 文件和 8M+ 行为基准*，执行时间为：
• `fgets`: 52.11271 秒。
• `substr_count(PHP_EOL)`：0.58844 秒。
• `substr_count(\n)`：0.353772 秒。
• `find /c /v "" largefile.txt`: 100 秒。

但是，如果主机系统上的可用内存没有问题，如 OP，并且在 PHP 中设置了适当的内存限制（大于文件长度），`substr_count`则可以搜索文件的全部内容，并且性能非常好：

```
$file="largefile.txt";
@ini_set('memory_limit', (2<<24)+(filesize($file)) ); // 32 MB for PHP + File size
$linecount = 0;
$handle = file_get_contents($file);
if($handle) $linecount = substr_count($handle, PHP_EOL);
echo $linecount; 
```

您可以为解释器选择所需的任何内存大小。
*基准测试*：**0.46878**秒。

# android - 如何将当前正在运行的 MediaPlayer 上的实例传递给另一个活动

> ID：11134573
> 
> 赞同：0
> 
> 时间：2012-06-21T08:48:58.243
> 
> 标签：android

在 Android 中，我想将当前正在运行的 MediaPlayer 的引用传递给另一个 Activity。因此，如果 MediaPlayer 正在播放歌曲，则会执行以下代码。在下面的代码中，MyEqualizer 是一个不同的活动。并且 MediaPlayer 在不同的 Activity 中运行。

```
if (mPlayer.isPlaying()) {
    Toast.makeText(MyEqualizer.this, "Song Playing", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:10:17.767

我会为可以通过[AIDL访问的 MediaPlayer 使用](http://developer.android.com/guide/developing/tools/aidl.html)[服务](http://developer.android.com/reference/android/app/Service.html)- 因此允许不同的活动与您的服务进行交互会很容易。生成 AIDL 文件非常简单，也是解决问题的好方法。

[Linuxtopia](http://www.linuxtopia.org/online_books/android/devguide/guide/developing/tools/aidl.html)上有一个关于 AIDL 的非常好的教程。

# unix - nslookup、host 和 resolveip 的区别？

> ID：11134576
> 
> 赞同：4
> 
> 时间：2012-06-21T08:49:05.057
> 
> 标签：unix, dns

我在我的公司 VPN 上，注意到 nslookup 和 host 返回了我们服务器的公共 IP 地址，而 resolveip 和 curl（以及我的浏览器）返回了正确的内部地址。为什么不同的 Unix 程序会以不同的方式解析相同的主机名？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T14:14:05.133

`nslookup`, `dig`, 和`host`是直接查询 DNS 的客户端。`getent`实用程序`curl`, 和大多数应用程序（可能包括您正在谈论的`resolveip`这个，虽然我不熟悉它）是 C 库地址解析服务的客户端。C 库的地址解析服务是使用配置`/etc/nsswitch.conf`的，默认情况下`/etc/hosts`会咨询 DNS，如果在`/etc/hosts`. 它也可以配置为根本不咨询 DNS（或其他一些服务）。

在您的情况下，您可能在`/etc/hosts`.

# c# - 使用 Attribute 实现的 C# 方法包装器

> ID：11134577
> 
> 赞同：2
> 
> 时间：2012-06-21T08:49:12.417
> 
> 标签：c#, .net

有没有办法在 C# 中实现方法包装，就像例如。它是在 Python 中完成的？，使用属性？我想从属性代码内部访问方法的参数。在使用 IOperationBehavior 编写 WCF 应用程序时，我设法做了类似的事情，但是否可以使用普通的 C# 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T08:51:58.203

听起来您想要[Aspect Oriented Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。这通常不是 .NET 平台的一部分，但有多种可用选项。您可能想查看[PostSharp](http://www.sharpcrafters.com/)。

# android - 如何使用 Selenium Android Driver 关闭手机上的警报或弹出窗口显示？

> ID：11134579
> 
> 赞同：1
> 
> 时间：2012-06-21T08:49:15.010
> 
> 标签：android, mobile, selenium, automation, webdriver

我正在使用 Android WebDriver 在 Android Mobile 中自动化 Web 应用程序，但在关闭警报或弹出窗口时遇到问题。

我只是导航到我的应用程序 url(http://m.url.com)，它显示一个警报/弹出窗口，要求我下载本机应用程序和类似的东西，我无法关闭此警报或弹出窗口使用硒，因为我无法在警报或弹出窗口上找到关闭按钮和其他按钮的元素..

此警报或弹出窗口不会显示在系统上，而只会显示在移动设备中。

请提出一些解决方案这个问题..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:46:22.433

警报或弹出窗口显示是插页式广告。使用**http://myurl.com/?interstitial=false**，此警报或弹出窗口将不会显示..

# pdf - gpg：在加密时覆盖 .pdf => 解密失败

> ID：11134583
> 
> 赞同：2
> 
> 时间：2012-06-21T08:49:25.853
> 
> 标签：pdf, gnupg

我使用 gpg (GnuPG) 1.4.11。`foo.pdf`通过加密文件`gpg -c foo.pdf`。然后是加密文件`foo.pdf.gpg`，此外，原始文件`foo.pdf`存在。`foo.pdf.gpg`然后我可以按`gpg foo.pdf.gpg`预期解密。但是，如果我使用`gpg -o foo.pdf -c foo.pdf`并选择在加密时覆盖现有文件，然后使用`gpg foo.pdf`来解密加密文件，最后选择覆盖现有文件`foo.pdf`（再次），该文件仍然受到保护，无法查看。

然后我再次尝试执行`gpg foo.pdf`（我认为第一次解密失败，这就是我再次尝试的原因）。现在文件似乎已损坏：`gpg: [don't know]: 1st length byte missing`. 有任何想法吗？覆盖文件通常不是一个好主意吗？我希望`foo.pdf.gpg`在加密后获得一个文件（原始文件`foo.pdf`被自动删除）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:32:13.123

GPG 正在写入它正在读取的同一个文件（没有临时文件）。当它读取明文进行加密时，该数据正在被 GPG 正在写出的已加密数据破坏（反之亦然）。一般来说，这是行不通的（它就像一个过滤器用它的输出来修改它的输入）。

# azure - 从 azure cdn 平滑流式传输

> ID：11134588
> 
> 赞同：0
> 
> 时间：2012-06-21T08:49:39.270
> 
> 标签：azure, streaming, cdn

我在本地机器上流畅地工作。视频播放良好，并且按预期工作，但是当我将相同的文件复制到 azure blob 存储和 azure cdn 时，它不起作用。我已经使用 azure sql、azure blob storage 和 azure cdn 设置了 azure 网站。除了流媒体之外，一切正常。我可以从 cdn 访问图片和其他内容。当我使用 .ism/Manifest 键入 mediaURL 时，我没有收到任何 xml（但我确实收到了没有 /Manifetst 的下载提示）。我错过了什么？我应该在 CDN 的某处启用流畅的流式传输吗？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:25:54.757

通过 Windows Azure CDN 进行的平滑流式处理仍处于预览阶段，您需要注册才能加入该预览。

正如 Sandrino 所提到的，我编写了一个工具来对视频进行预分块，这样就可以在 CDN 中没有任何特殊的流媒体功能的情况下提供它。这确实有效，但您必须实际运行我的工具。它不*只是*将文件复制到 blob 存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:08:10.500

这可能是因为您没有将内容类型更改为**text/xml**（这可能是您收到下载提示的原因）。

我建议您不要尝试自己管理所有这些，而是​​看一下 Adaptive Streaming with [Windows Azure Blobs Uploader](http://archive.msdn.microsoft.com/streamingazure)项目，它有一些不错的功能：

> *   通过命令行工具 (AdaptiveStreamingAzure.exe) 将视频内容上传到 Windows Azure
> *   通过发布者插件从 Expression Encoder 3 中上传视频内容。
> *   轻松发布使用 Expression Encoder 生成的 Smooth Streaming 内容，包括播放器模板。
> *   自动启用跨域访问，轻松嵌入视频。
> *   恢复中止的上传。
> *   与 CDN（包括 Windows Azure CDN）集成并控制其缓存策略。
> *   并行化存储操作以减少上传时间。
> *   自动检查软件的新版本。

在史蒂夫的博客上阅读更多相关信息：http: [//blog.smarx.com/posts/smooth-streaming-with-windows-azure-blobs-and-cdn](http://blog.smarx.com/posts/smooth-streaming-with-windows-azure-blobs-and-cdn)

除此之外，我建议您也看看最近刚刚作为预览推出的新**媒体服务：** [https](https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services) ://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services （有提供流媒体内容的示例）

![在此处输入图像描述](../Images/dcfc26c6ac27271a26f9e94898222ee7.png)

# python - SyntaxError：扫描字符串文字时 EOL - UTF-8

> ID：11134590
> 
> 赞同：0
> 
> 时间：2012-06-21T08:49:49.857
> 
> 标签：python, encoding, utf-8

我正在尝试保存一个我有一些凭据的文件。为了不在文件中留下清晰的密码，我使用`pycrypto`模块对它们进行了加密。但是，当我尝试使用结果字符串保存文件时，出现错误：

*   由于收到的奇怪字符，我第一次将文件保存为 UTF-8（`# -*- coding: utf-8 -*-)`
*   但是我仍然面临一些问题：（`SyntaxError: EOL while scanning string literal`例如在 string 上`'tý}DŠÇ{÷­*6Ù·®'`）当我在 IDLE 中通过 F5 运行我的代码时（可以保存）。

注意这个字符串可以在 IDLE shell 中正常使用：

```
>>> s = 'tý}DŠÇ{÷­*6Ù·®'
>>> s
't\xfd}\x7fD\x8a\xc7{\x17\xf7\xad*6\xd9\xb7\xae'
>>> 
```

你能帮忙吗？谢谢 ！

**编辑：**这可能不清楚：这个字符串在 python 程序中，我不想把它写在外部文件中。另一件事：看起来似乎导致错误的字符（`\x7f`以十六进制表示）已被 SO 解释器删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:57:28.547

除非您明确要求字符串格式，例如十六进制数字，否则不应将加密数据视为字符串；文件应以二进制模式打开，此类数据不应打印到控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:33:11.570

我`zlib`改用了（没有真正的加密，但密码不再清晰），它产生 ASCII 字符，所以现在没问题......当然这不能解决我最初的问题，但我已经花了太多时间试图解决它. 感谢伊格纳西奥的回答。

# javascript - Javascript Getter 和 Setter

> ID：11134597
> 
> 赞同：3
> 
> 时间：2012-06-21T08:49:59.737
> 
> 标签：javascript, oop, getter-setter

有人可以告诉我有关 javascript 中的 getter 和 setter 的信息吗？什么是真正的 getter 和 setter？我们可以在哪里使用它们？使用它们有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:30:29.750

如果您想对属性值的设置/获取设置条件，或者在设置/获取它们时发生其他事情，您可以使用 getter 或 setter。

您还可以在 Mozilla 专有*集*上找到 MDN 文档并*让*操作员有所帮助：

1.  [使用对象——定义 getter 和 setter](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects#Defining_Getters_and_Setters)
2.  [集合运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/set)
3.  [获取运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/get)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:46:58.400

`Getter`两者`setter`都是功能。

`Getter`当从变量/对象（具有 Getter）检索值时将调用 Getter 函数必须返回值。

```
var i=count; 
```

如果计数的 getter 已经定义，它将调用。

`Setter`将值分配给变量/对象（具有 Setter）时将调用

```
count=10 
```

如果计数的设置器已经定义，它将调用。

看一下这个例子，这样你就可以很容易地理解`Getter`和`setter`

[当对象的属性之一发生变化时，如何在对象内获得通知？](http://jqfaq.com/how-to-get-notified-within-an-object-when-one-of-that-objects-property-changes/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T08:54:55.523

通常，getter 和 setter 用于 Javascript 中的面向对象编程。

通常，在一个类中，有一些属性、构造函数、getter 和 setter。

属性表示类的属性

构造函数创建一个类的实例

Getter 帮助检索对象的属性

`var name = cat.getName();`

设置器有助于操纵对象的属性。

`eg. cat.setName('Kathreen');`

阅读更多关于 Javascript 中的 OOP 以了解更多信息。

# javascript - 进行多个 fb.api 调用

> ID：11134606
> 
> 赞同：5
> 
> 时间：2012-06-21T08:50:21.860
> 
> 标签：javascript, facebook-graph-api, dom-events, facebook-javascript-sdk

我刚刚开始使用 Facebook Graph API。

如何仅通过 1 个 FB.api 调用来调用多个属性？现在，我有

```
 FB.api('/me', function(me){
          if (me) {
            var myEmail = me.email;
            var myID = me.id;
            var myFirst_name = me.first_name;
            //Other attributes
          }
        }); 
```

和

```
 FB.api('/me/friends',{ fields: 'name,id' }, function(response){
            var friends = response.data;
        }
       }); 
```

如何将两个 API 调用合二为一，比如只有 1 个`FB.api()`调用？

所有的回应都会真的很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T09:38:17.047

> 如何将两个 api 调用合并为一个，例如，只有 1 个 FB.api() 调用？

您可以将它们组合成一个[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)——但这会使处理响应变得更加复杂，而且我不确定它是否会在这样一个简单的用例中带来任何“性能”增益。

编辑：

现在有一种使用[字段扩展](https://developers.facebook.com/docs/graph-api/using-graph-api#fieldexpansion)功能的新方法¹：

```
/me?fields=id,email,first_name,friends.fields(id,name) 
```

– 这将为您提供当前用户的请求字段 id、email 和 first_name，以及他们朋友的 id 和名称。（实际上，`,friends`如果您只想要他们的 id 和 name 就可以了，因为这些是 API 提供的默认字段 - 但如果您还想要其他字段，您可以使用添加它们`,friends.fields(…)`。）

* * *

¹实际上已经有一段时间了，但是这个问题现在又引起了我的注意，所以我想补充一下。

# objective-c - 如何解决运行时错误“无法创建可写数据库文件并显示消息”操作无法完成。（可可错误 260。）'.'？

> ID：11134607
> 
> 赞同：1
> 
> 时间：2012-06-21T08:50:22.150
> 
> 标签：objective-c

我是 iPhone 的初学者，我已经创建了数据库，但是运行时错误为 Failed to create writable database file with message 'The operation could not be completed

我的代码是

```
-(void)createdatabase
{
    NSFileManager *fileManager=[NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath=[self getDBPath];
    BOOL success=[fileManager fileExistsAtPath:dbPath];
    if(!success)
    {
        NSString *defaultDBPath=[[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:@"SQL.sqlite"];
        success=[fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];
        if(!success)
        {
                NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);  
        }

    }
} 
```

给出适用于我的代码的任何建议和源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T07:11:39.173

试试这个：从模拟器的应用程序文件夹中删除应用程序，然后再次运行应用程序。我刚刚做了这个小工作，我的错误消失了..祝你好运..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T13:59:55.447

如果 Shah Paneri 的回答对您不起作用，您还可以查看数据库文件的“目标成员资格”。确保您的项目被选中。如果不是（因为我的不是），选择它应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:13:27.653

我为这个错误代码做了一点谷歌，我发现

```
NSFileReadNoSuchFileError = 260,                        // Read error (no such file) 
```

因此，请确保 DB 文件（SQL.sqlite）在您在上述代码段中引用的路径上。

# python - 在 3D 中查找垂直于给定矢量（速度）

> ID：11134610
> 
> 赞同：0
> 
> 时间：2012-06-21T08:50:26.320
> 
> 标签：python, vector

我有一个对象 A 在 3D 空间中以速度 (v1, v2, v3) 移动。对象位置是 (px,py,pz) 现在我想在垂直于其速度方向的平面上在对象 A 周围添加某些粒子（以半径 dis 为单位）。

我发现了一种叫做“交叉产品”的东西，但在这种情况下没有用。

任何人都可以帮忙吗？我是python新手，真的不知道如何破解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:54:32.463

垂直于向量 ⟨A, B, C⟩ 的平面具有一般方程 Ax + By + Cz + K = 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:55:54.783

平面方程为：

```
v1*(x-px) + v2*(y-py) + v3*(z-pz) = 0 
```

当你知道`(x,y)`你可以找到`z`等等。

例子：

z = pz - (v1*(x-px) + v2*(y-py))/v3

# jquery - JQuery - 如何检查滚动条是否在所有浏览器的底部

> ID：11134614
> 
> 赞同：1
> 
> 时间：2012-06-21T08:50:38.477
> 
> 标签：jquery, scrollbar

如果一个元素的滚动条在底部，你如何检查 JQuery？html结构是这样的

```
<div class="container">
 <ol class="list">
     <li class="item">Item 1</li>
     ....
 </ol>
</div> 
```

如果 ol.list 下的项目超过定义的高度，则 .container 会获得滚动条。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T09:07:08.780

检查容器的 scrollTop() jQuery 值是否等于 dom 元素的 scrollHeight 减去容器的高度。然后滚动条在底部。

[http://jsfiddle.net/KxZDK/2/](http://jsfiddle.net/KxZDK/2/)

编辑：因为在 IE7 中，如果内容更小，scrollHeight 实际上会小于高度而不是等于高度，所以即使没有滚动条，使用大于等于也可以使结果始终为真。

我还更新了小提琴链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:02:35.567

您可以使用下面提到的函数来获取容器的高度，并使用此高度与定义的高度进行比较，以了解是否有滚动条。

```
$('.list').height() 
```

# java - 如何测试一个只有小 API 但有很多私有函数的类？

> ID：11134615
> 
> 赞同：0
> 
> 时间：2012-06-21T08:50:39.983
> 
> 标签：java, tdd

我正在为我正在设计的图形语言开发一个解释器，并且我想将 TDD 应用到我的开发过程中（Java 中的所有代码）。我的解释器只有一个公共功能：`execute()`执行给定的图表。要执行图表，该类应使用许多内部（私有）方法。我想使用 TDD 创建这些方法，但由于它们是私有的，我想不出一种访问它们的方法。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:53:38.423

您始终可以将私有方法包设为私有，并从同一包中的测试中对其进行测试。这当然意味着您需要一些纪律并且不要尝试调用相同的包私有方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:53:51.963

将您的测试代码放在同一个包中，并将私有方法更改为具有默认（包）可见性。如果您担心过多地打开类，以致同一个包中的行为不端代码可能会做坏事，那么将类+测试代码移动到自己的包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:55:11.423

我们做这种事情的方式是拥有测试文件（输入和预期输出）。向公共函数抛出数据，然后根据预期检查结果。不知道这对您的情况有多容易，但它使您的测试和生产代码实现不可知。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T05:48:31.143

1.  私有函数是否足够复杂以至于它们需要自己的测试（即执行的多个测试不会覆盖它们）？如果是，也许您需要将它们分解为协作者，尤其是在私有方法太多的情况下。针对私有方法编写测试也会损害未来的重构，即假设您合并/拆分了一些私有函数，即使 Execute() 的功能仍然完好无损，您也会有一堆测试需要更新。
2.  如果没有，只需根据需要为 Execute() 编写尽可能多的测试，以实现所需的置信度/路径覆盖率

# google-maps-api-3 - 如何检测地图可见是否超过地球宽度的一倍

> ID：11134635
> 
> 赞同：1
> 
> 时间：2012-06-21T08:51:33.413
> 
> 标签：google-maps-api-3

是否可以检测可见地图是否显示超过地球的一倍

例如，如果澳大利亚在 zoom = 0 中可见两次或更多

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:11:21.783

因此，谷歌地图显示的纹理分辨率为 256 x 256。因此，在缩放级别 0 时，您需要一个 256+1 像素宽或更大的地图画布才能包裹（或重复）纹理。在缩放级别 1 时，这会加倍到 512+1，在缩放级别 2 时，会加倍为 1024+1，等等。

这个编码示例在地图下放了一个小文本来说明世界的原始宽度（256 * 2 ^ 缩放级别）是否根据画布的宽度进行换行。如果您的画布宽度为 800 像素，那么在缩放级别 0 和 1 时，您的地图将包裹，在缩放级别 2（需要最小画布宽度为 1024+1）时，您的地图不会包裹。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' type='text/javascript'></script>
    <script type="text/javascript"></script>
</head>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

var map;
var mapWidth;
var mapTextureSize = 256;

function initialize()
{
    var latlng = new google.maps.LatLng(0, 0);
    map = new google.maps.Map(document.getElementById('map'), {
      zoom:0,
      center:latlng,
      mapTypeId:google.maps.MapTypeId.SATELLITE
    });

    google.maps.event.addListener(map, 'zoom_changed', checkZoom);

    mapWidth = document.getElementById('map').style.width;
    mapWidth = parseInt(mapWidth.substr(0, mapWidth.length-2));

    checkZoom();
}

function checkZoom()
{
    var result = mapTextureSize * Math.pow(2,map.zoom);
    if (result + 1 > mapWidth)
    {
        document.getElementById('feedback').innerText = "no wrapping";
    }
    else
    {
        document.getElementById('feedback').innerText = "wrapping";
    }
}
</script>
<body onLoad="initialize()">
<div id="map" style="width: 800px; height: 350px;"></div>
<div id="feedback" style="width: 800px;"></div>
</body>
</html> 
```

# maven - 基于多个文件存在的maven配置文件激活

> ID：11134636
> 
> 赞同：5
> 
> 时间：2012-06-21T08:51:33.710
> 
> 标签：maven

我想根据多个文件的存在激活配置文件。`my.marker`在以下示例中，如果两个文件都存在，我希望激活配置文件`another.marker`。

```
 <activation>
        <file>
            <exists>${basedir}/my.marker</exists>
            <exists>${basedir}/another.marker</exists>
        </file>
    </activation> 
```

它不起作用，因为它对架构无效。有没有办法在不使用命令行属性的情况下做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-09T14:08:13.343

实际上，即使在 Maven 3.2.2 中解决了 MNG-4565，仍然无法检查是否存在多个文件。这是因为 POM 模型不允许多个`file`或多个`exists`元素（[https://issues.apache.org/jira/browse/MNG-5909](https://issues.apache.org/jira/browse/MNG-5909)）。即使混合`exists`并`missing`在一个`file`元素中也不起作用（因为如果`exists`元素在那里，它将只被考虑并且兄弟`missing`元素将被忽略，[https://issues.apache.org/jira/browse/MNG-5910](https://issues.apache.org/jira/browse/MNG-5910)）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T09:00:48.140

~~不幸的是，你现在不能这样做。有一张[票](http://jira.codehaus.org/browse/MNG-4565)可以通过使用多个激活条件来解决您的问题，但仍未解决。~~

编辑：Maven 有问题，所以你不能这样做。但是现在，从 3.2.2 版本开始，它应该通过使用多个激活条件来工作。

感谢[Nicholas Daley](https://stackoverflow.com/users/528246/nicholas-daley)指出这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T12:31:10.877

虽然不能解决您的问题，但您可以确保仅当使用[maven enforcer plugin](http://maven.apache.org/enforcer/enforcer-rules/requireFilesExist.html)存在两个文件时才能成功运行配置文件。

例如，下面的代码片段对于使用配置文件`requiresTwoFiles`（例如`mvn -P requiresTwoFiles compile`）运行的任何 maven 目标都将失败，除非两者都`src/main/java`存在`src/test/java`。

```
...
<profile>
    <id>requiresTwoFiles</id>           
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <version>1.1</version>
                <executions>
                      <execution>
                        <id>enforce-files-exist</id>
                        <goals>
                          <goal>enforce</goal>
                        </goals>
                        <configuration>
                          <rules>
                            <requireFilesExist>
                              <files>
                                  <file>${basedir}/src/main/java</file>
                                  <file>${basedir}/src/test/java</file>
                              </files>
                            </requireFilesExist>
                          </rules>                              
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</profile>
... 
```

# java - 向列表添加双精度值

> ID：11134637
> 
> 赞同：0
> 
> 时间：2012-06-21T08:51:36.120
> 
> 标签：java, android

我正在制作一个 android 应用程序，我需要将双精度值（BodySize）以 List 的形式保存到文件中以绘制图形。实际上，这段代码是“列表”的形式，我试图将其更改为“列表”。但它在“list.add(BodySize)”中出错。我该如何解决这个问题？

```
 public static void updateFile(double BodySize) {

            FileOutputStream fos = null;
            ObjectOutputStream oos = null;

            try{
                List<double[]> list = getDoubles();
                list.add(BodySize);
                fos = new FileOutputStream("user_data.txt");
                oos = new ObjectOutputStream(fos);
                oos.writeObject(list);

            }catch(Exception e){
                e.printStackTrace();
                try {
                    oos.close();
                    fos.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }

            }

        }

        public static List<double[]> getDoubles() {

            FileInputStream fis = null;
            ObjectInputStream ois = null;
            List<double[]> newList = new ArrayList<double[]>>();
            try {
                fis = new FileInputStream("user_data.txt");
                ois = new ObjectInputStream(fis);

                newList = (ArrayList<double[]>) ois.readObject();

            } catch (Exception ex) {

                try {
                    fis.close();
                    ois.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            return newList;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:56:49.420

`new ArrayList<double[]>()`创建一个双精度数组列表，而不是一个双精度列表。列表本身是一个数组（可变长度），所以只需使用：

```
List<Double> newList = new ArrayList<Double>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:54:12.853

bodysize 是一个 double，列表是 double [] 类型（double 数组）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:09:21.087

```
List<double[]> list = getDoubles();
        list.add(BodySize); 
```

`BodySize`是类型`double`，而`List<double[]>`期望`double[]`

# c# - RegisterStartupScript 在 catch 块内不起作用

> ID：11134640
> 
> 赞同：0
> 
> 时间：2012-06-21T08:51:48.113
> 
> 标签：c#, asp.net

我是`ASP.NET/C#`。在我将客户信息提交到数据库的其中一个页面中，我正在使用弹出窗口通知用户是否插入了数据，或者当表单未正确填写时，如果出现问题，我也试图显示弹出窗口尝试插入时出错。到目前为止，当数据成功插入以及验证失败时，弹出窗口显示正确。但如果提交时出现问题，弹出窗口不会显示。这是我的代码

```
catch (Exception ex)
            {
                ClientScript.RegisterStartupScript(GetType(), "UnexpectedError", "ShowSubmitPopUp('uerror')", true);
                NewCustomerStatusMsg.Style["display"] = "block";
                NewCustomerStatusMsg.Style["color"] = "Red";
                NewCustomerStatusMsg.Text = "There was some error while submitting your information.Please re-enter the values and try again.";
           } 
```

任何人都可以帮我解决这个问题。这里缺少什么。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:05:02.680

写`ShowSubmitPopUp('uerror');` `instead of ShowSubmitPopUp('uerror')`。您忘记在末尾添加分号（;）。

# c# - C# Mono for Android - double.parse 给出了奇怪的结果

> ID：11134642
> 
> 赞同：1
> 
> 时间：2012-06-21T08:52:00.327
> 
> 标签：c#, android-intent, mono

我正在使用 C# 和单声道编写一个 Android 应用程序。我需要从其中一个活动（Android 表单）中获取一个字符串并将其转换为双精度。当我这样做时，我会得到非常奇怪的结果。例如以下（未完成）方法中的 double.parse：

```
protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
    {
        try
        {
            //add / edit the task
            if (resultCode == Result.Ok)
            {
                if (m_isAddMode)
                {

                    var tliTemplateControl = new TemplateControlTaskListItem();
                    tliTemplateControl.Code = data.GetStringExtra("selectedtask");
                    tliTemplateControl.Description = data.GetStringExtra("selecteddescription");
                    tliTemplateControl.RequiredQty = double.Parse(data.GetStringExtra("qty"));

                    m_taskList.Items.Add(tliTemplateControl);

                    this.ListAdapter = new TaskListAdapter(this, m_taskList.Items);
                }
                else
                {

                }
            }
        }
        catch (Exception ex)
        {

        }
    } 
```

当被解析的文本为“2”时返回 -1.03054917417467E-05。这是在 Visual Studio 2010 中，带有适用于 android 4.2.3 的单声道。有没有人有任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:04:33.037

把事情分得更细。将中间结果存储在变量中。每个语句做一件事——不要将一个计算的结果链接到另一个计算中。使用您的调试器。检查每一步发生的情况。

data.GetStringExtra("qty") 返回什么字符串，真的吗？尝试用“2”测试它是否相等。它周围是否有空白，或者它有一些奇怪的长度？（毕竟，“2”应该是一个字符长。）

如果您使用字符串文字运行 double.Parse("2")，您会得到什么？

在某些时候，您会看到自己做错了什么，或者您会发现某些东西绝对是编译器或库区域。当你到达那个点时，你就会知道下一步该做什么。

# javascript - 未捕获的类型错误：对象# 没有“查找”方法

> ID：11134646
> 
> 赞同：3
> 
> 时间：2012-06-21T08:52:23.977
> 
> 标签：javascript, jquery, google-chrome

我的 javascript 代码在 Chrome 中运行良好，但是如果我保持“开发者工具”打开，我会收到错误

> 未捕获的类型错误：对象 # 没有“查找”方法

并且 javascript 代码停止工作。

这是[页面](http://meracd.com/design/disc_designer.php)。

这是 Chrome 特有的问题。

# sql-server - c# 创建与 SQL 服务器连接的 wcf 服务并以 Metro 风格 javascript/html5 应用程序调用它

> ID：11134648
> 
> 赞同：0
> 
> 时间：2012-06-21T08:52:28.583
> 
> 标签：sql-server, windows-8, microsoft-metro

由于 Windows 8 Metro 风格的 javascript/html5 应用程序无法直接与数据库通信，我想创建与 SQL 服务器连接的 ac# wcf 服务，并在 Metro 风格的 javascript/html5 应用程序中调用它来存储和检索数据。

我在 Visual Studio 2012 RC 中创建了 ac# wcf 服务应用程序并托管在本地 Windows 8 发布预览系统上。但我无法将 wcf 服务与我的 Metro 应用程序连接起来。

以下是我的 wcf 服务应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace WcfService1
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
[ServiceContract]
public interface IService2
{
    [OperationContract]
    [WebGet(UriTemplate = "/Add/{Number1}/{Number2}", RequestFormat = WebMessageFormat.Json,
   ResponseFormat = WebMessageFormat.Json
                                                    )]
    int Add(string Number1, string Number2);
}
} 
```

和

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace WcfService1
{
// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
// NOTE: In order to launch WCF Test Client for testing this service, please select Service1.svc or Service1.svc.cs at the Solution Explorer and start debugging.
public class Service1 : IService2
{
    public int Add(string Number1, string Number2)
    {
        int num1 = Convert.ToInt32(Number1);
        int num2 = Convert.ToInt32(Number2);
        return num1 + num2;
    }      

}
} 
```

和

```
<?xml version="1.0"?>
<configuration>

<appSettings>
<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings>
<system.web>
<compilation debug="true" targetFramework="4.5" />
</system.web>
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior>

      <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>

      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>     
</behaviors>    
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"
    multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>

<directoryBrowse enabled="true"/>
</system.webServer>

</configuration> 
```

以下是我在 Metro 应用程序中调用 wcf 的代码：

```
var Number1  = document.getElementById('TextboxFirstNumber');
var Number2  = document.getElementById('TextboxSecondNumber');
var ResultSpan  = document.getElementById('SpanResult');
var ButtonToAdd  = document.getElementById('ButtonAdd');
ButtonToAdd.addEventListener('click',  function  ()  {
    var baseURl = "http://localhost:52653/Service1.svc/Add/";
    var url  = baseURl+Number1.value+"/"+Number2.value;  
    WinJS.xhr({ url: url  }).then(function  (r)  {
        var result  = JSON.parse(r.responseText);
        ResultSpan.innerHTML  = result; 
    });
}); 
```

我的 Metro 应用程序退出并出现以下错误：

```
{"exception":null,"error":{},"promise":{"_oncancel":null,"_nextState":null,"_state":{"name":"error","done":null,"then":null},"_listeners":null,"_value":{},"_isException":false,"_errorId":2},"id":2} 
```

请告诉我我在这里做错了什么......或者有什么方法可以将 Metro javascript/html5 应用程序与 sql server 数据库通信。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:14:18.617

我通过创建[JSON-Rest-WCF 服务](http://stevenhollidge.blogspot.com/2011/03/how-to-create-json-wcf-restful-service.html)来完成它，将其与 sql server 连接并通过以下方法从 Metro 应用程序调用此服务。

```
WinJS.xhr({ url: url}) 
```

# java - 使用指针来验证字符串是否仅由一组有限的子字符串组成

> ID：11134649
> 
> 赞同：1
> 
> 时间：2012-06-21T08:52:30.700
> 
> 标签：java, c

我之前用java编写了一个程序，它将一个字符串作为输入作为输入并检查它是否有效。决定的规则是：

1）字符串是可识别的当且仅当它包含单词“pi”，“ka”，“chu”作为其片段，以任何顺序重复任意次数。

* * *

2）如果它包含任何其他片段（或子序列），那么它是无法识别的

* * *

我可以在 java 中轻松地做到这一点，因为 java 对字符串函数有更好的支持。我的代码是（这很好用）

* * *

```
import java.util.Scanner;
public class RecognisingWords { 
public static void main(String[] args) throws Exception 
{
    Scanner inp= new Scanner(System.in);
    String str;
    System.out.println("Enter the string to be tested:");
    str=inp.nextLine();

    while(str.length()>0)
    {

    if(str.startsWith("pi"))
    {
        str= str.substring(2);          
    }

    else if(str.startsWith("ka"))
    {
        str= str.substring(2);          
    }

    else if(str.startsWith("chu"))
    {
        str= str.substring(3);          
    }

    else
    {
        System.out.println("Unrecognisable Sequence");
        break;
    }

    }

    if(str.length()==0)
    {
        System.out.println("Recognisable Sequence");
    }   
}
} 
```

* * *

但是，当我在 c 中编写相应的程序（使用指针）时，我的代码会陷入无限循环。请检查我的代码并指出错误所在。**也可以在不使用指针的情况下实现这个程序吗？**

* * *

```
#include <stdio.h>
#include <stdlib.h>
#include<string.h>

int main(void)
{
char str[10];
int len=0,flag=1;
char *ptr;

printf("Enter the string : ");
gets(str);
len=strlen(str);
ptr=str;

while(*ptr!='\0')
{
    if(!strcmp("pi",ptr))
    {
        ptr=ptr+2;
    }

    else if(!strcmp("ka",ptr))
    {
        ptr=ptr+2;
    }

    else if(!strcmp("chu",ptr))
    {
        ptr=ptr+3;
    }

    else
    {
        printf("String not recognised");
        flag=0;
        break;
    }
}

if(flag==1)
    printf("String is recognised");

return 0;
} 
```

* * *

**我已经纠正了我的一些非常愚蠢的错误。希望大家不要介意**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T08:58:29.047

您可能希望通过`ptr += 2`或`ptr += 3`而不是更改指针指向的字符来推进指针：`*ptr = ...`。

循环中的逻辑也不正确。您应该循环直到指针的当前位置指向 0（NUL 字符 - 这是 C 中的字符串终止符），按`while (*ptr != '\0')`. 你似乎错过了`break`最后一个`else`区块。

也有问题`gets(str)`，这可能会导致 C 中的缓冲区溢出问题。抛开安全问题不谈，如果您输入的字符串长度超过 9 个字符，您的程序将出现意外行为。

您的 C 代码可能存在其他问题，我无法仅通过观察您的代码来列出这些问题。

**编辑**

另一个问题是您使用了`strcmp`，它将指针指向的所有内容与片段进行比较。即如果输入是“pikachu”，它会将“pi”与“pikachu”进行比较，发现“pi”在词法上小于“pikachu”，它会显示该字符串未被识别。您可能想要`strncmp`，您可以在其中指定要比较的字符数。

# objective-c - NSFileManager fileExistsAtPath:isDirectory 用法

> ID：11134654
> 
> 赞同：1
> 
> 时间：2012-06-21T08:52:37.710
> 
> 标签：objective-c, ios, nsfilemanager

我试图用来`NSFileManager`确定一个项目是文件还是子目录。

这就是我所拥有的：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];

NSError *error = nil;
NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[documentsDir stringByAppendingPathComponent:@"exported"] error:&error];

for (NSString *filename in files) {
    NSString *path = [documentsDir stringByAppendingPathComponent:filename];        
    BOOL isDir;
    if([[NSFileManager defaultManager] fileExistsAtPath:documentsDir isDirectory:&isDir] && isDir){
        NSLog(@"%@ is a directory", path);  
    }
    else {
        NSLog (@"%@ is a file", path);
    }
} 
```

我得到文件和子目录的“是一个目录”。我搜索了类似的 SO 问题，发现在那里找到的代码与我尝试使用的代码之间没有区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:59:40.403

您似乎使用错误的路径来测试您的文件和目录

在你的`fileExistsAtPath`: 你正在测试`documentsDir`而不是`path`

纠正这个

```
if([[NSFileManager defaultManager] fileExistsAtPath:documentsDir isDirectory:&isDir] && isDir) 
```

到

```
if([[NSFileManager defaultManager] fileExistsAtPath: path isDirectory:&isDir] && isDir) 
```

# android - XML 解析图像 OnClick

> ID：11134659
> 
> 赞同：0
> 
> 时间：2012-06-21T08:52:41.533
> 
> 标签：android, xml, parsing, imageview

嗨，我已经解析了一个包含图像的在线 xml，如果有人知道答案，我在解析图像时卡住了，你能帮忙吗？

```
public class SingleMenuItem  extends Activity {

// XML node keys
static final String KEY_SONG = "song";
static final String KEY_ARTIST = "artist";
static final String KEY_THUMB_URL = "thumb_url";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.libraryonclick);

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String song = in.getStringExtra(KEY_SONG);
    String artist = in.getStringExtra(KEY_ARTIST);
    final String thumb_url = in.getStringExtra(KEY_THUMB_URL);

    // Displaying all values on the screen
    TextView lblSong = (TextView) findViewById(R.id.textView1);
    TextView lblArtist = (TextView) findViewById(R.id.textView2);
    ImageView lblThumb_Url = (ImageView) findViewById(R.id.onclickthumb);

    Button link3Btn = (Button)findViewById( R.id.button1 );
    link3Btn.setOnClickListener( new View.OnClickListener()
    {
    public void onClick(View v)
    {
        Uri uri = Uri.parse(thumb_url);
        startActivity( new Intent( Intent.ACTION_VIEW, uri ) );
    }
    });

    lblSong.setText(song);
    lblArtist.setText(artist);
    lblThumb_Url.setSrc(thumb_url); 
```

谢谢，我知道这与上面的行有关，开始编码但卡住了

```
Main Activity
public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://dl.dropbox.com/u/48258247/music.xml";
// XML node keys
static final String KEY_SONG = "song"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_ARTIST = "artist";
static final String KEY_DURATION = "duration";
static final String KEY_THUMB_URL = "thumb_url";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.library);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row

    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String song = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
            String thumb_url = ((TextView) view.findViewById(R.id.duration)).getText().toString();

            // Starting new intent
            Intent in = new Intent(CustomizedListView.this, com.example.androidhive.SingleMenuItem.class);
            in.putExtra(KEY_SONG, song);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_THUMB_URL, thumb_url);
            startActivity(in);

        }
    });     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:11:01.893

为什么您的按钮功能代码在 on create 方法中？

```
 public void onClick(View v)
 {
     Uri uri = Uri.parse(thumb_url);
     startActivity( new Intent( Intent.ACTION_VIEW, uri ) );
 } 
```

我感觉这个位置超出了实际 onclick 事件的范围。首先将 on-click 函数从 onCreate 方法中转移出来，这样您的程序实际上可以在 onClick 调用上做一些事情。

您是在解析本地 uris 还是来自互联网的 uris？您不能直接从 uri 访问本地资源，您必须使用内容提供程序。这也可能是问题所在，但如果没有看到更多代码，就不能真正说出来。

# image - 图像拼接的一些问题——单应性？

> ID：11134667
> 
> 赞同：11
> 
> 时间：2012-06-21T08:53:24.007
> 
> 标签：image, opencv, homography

我正在使用 Visual Studio 2010 上的 OpenCV 2.3.1 进行图像拼接项目。

我目前有2个问题。

（我的名气不超过10，所以我只能在这个帖子中发布2个超链接。我会在评论区再发布2个）

我按照以下链接 [Stitching 2 images in opencv中提到的步骤进行操作](https://stackoverflow.com/questions/8205835/stitching-2-images-in-opencv)

1.  在两个图像中查找 SURF 特征并匹配它们
2.  使用 RANSAC 去除异常值
3.  计算单应性
4.  将目标图像变形为参考图像

下图是我目前得到的结果：

**使用相机在相同位置但在不同方向**拍摄两张图像（我使用了三脚架）。

![在此处输入图像描述](../Images/c84abd6ddd8dbb8e8dac5b11c71c9957.png)

然后我尝试了另一个测试。这次我仍然使用同一台相机拍摄 2 张​​图像。然而，我将相机从原来的位置移动了一点，然后我拍了第二张照片。结果相当糟糕，如图所示：

![在此处输入图像描述](../Images/9ba2f0cfc16219de06b5e4614d0bb508.png)

**问题1：**这是否意味着**如果两个摄像头在不同的位置，标准的全景拼接技术（基于单应性或摄像头旋转模型）将不起作用？**

我尝试拼接在不同位置拍摄的图像，因为将来我想在不同位置的 2 个相机上实现拼接算法，以扩大 FOV，有点像这样：（我会在评论中发布图片，请检查**扩大视野**）

但现在看来我走错路了:(。

* * *

我刚刚发现，在算法过程中，特征查找和匹配花费了大部分时间。

**问题 2：**我可以只计算 2 张图像的某些部分（重叠区域）的特征，并仍然使用 Homography 执行转换吗？即，不计算整个图像。

我之所以这样认为是因为我认为如果我指定 2 个图像之间的重叠区域的数量，则不需要计算整个图像中的特征。如果我可以计算和匹配重叠区域的特征，它应该会大大提高速度。

下面显示的第一个代码是计算整个图像的特征的原始代码。

```
 int minHessian = 3000;

    SurfFeatureDetector detector( minHessian );
    vector<KeyPoint> keypoints_1, keypoints_2;

    detector.detect( frm1, keypoints_1 );
    detector.detect( frm2, keypoints_2 );

    //-- Calculate descriptors (feature vectors)  
    SurfDescriptorExtractor extractor; ///

    Mat descriptors_1, descriptors_2;

    extractor.compute( frm1, keypoints_1, descriptors_1 );
    extractor.compute( frm2, keypoints_2, descriptors_2 ); 
```

我做了以下事情来尝试减少运行整个算法所需的时间：

```
 //detector.detect( frm1(Rect(0.5*frm1.cols,0,0.5*frm1.cols,frm1.rows)), keypoints_1 );
    //detector.detect( frm2(Rect(0,0,0.6*frm2.cols,frm2.rows)), keypoints_2 );

    //-- Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor; ///

    Mat descriptors_1, descriptors_2;

    extractor.compute( frm1(Rect(0.5*frm1.cols,0,0.5*frm1.cols,frm1.rows)), keypoints_1, descriptors_1 );
    extractor.compute( frm2(Rect(0,0,0.6*frm2.cols,frm2.rows)), keypoints_2, descriptors_2 ); 
```

使用上面的代码，计算时间显着减少，同时给出了一个糟糕的结果：（我会在评论中发布图片，请检查**Bad Result**）

目前卡住了，不知道下一步该做什么。真的希望并感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T13:08:40.497

**问题1：** 我不能很确定，但拼接的问题似乎是由于两张图片之间的相机平移造成的。仅使用全局单应性变换，您无法完美地叠加 2 个图像。Homography 仅适用于以下 2 种情况：

1.  相机进行纯旋转（无平移）
2.  相机进行一般运动，但场景是平面的

也就是说，如果不是瓶子，您的场景是相当平面的（与相机的平移相比，对象相当远）。因此，单应性近似可能仍然足够。您只需要正确混合图像。为此，您首先需要找到一个“剪切”两个图像之间差异最小的图像的位置，并应用（例如拉普拉斯）混合。对于安装在汽车顶部的摄像头的问题，这种近似可能仍然是合理的，因此您仍然可以使用单应性模型。

如果具有适当混合的单应性还不够，您可能需要查看 3D 重建技术或其他“放松”单应性要求的方法。文献中有几篇论文涉及镶嵌过程中的视差。然而，这些比基本的单应性拼接要复杂得多。

**问题 2：** 是的，可以这样做，只要您非常确定重叠的位置。但是，您需要确保此重叠区域不会太小，否则您计算的单应性可能会出现偏差。如前所述，您的办公室数据集的问题似乎是由于相机翻译造成的。

最后，您可能需要稍微调整一下 SURF 特征检测/匹配参数。特征点似乎略微偏低。

# google-maps - 地理编码器返回错误的结果。我能做些什么？

> ID：11134673
> 
> 赞同：0
> 
> 时间：2012-06-21T08:53:37.127
> 
> 标签：google-maps

地理编码 [http://maps.googleapis.com/maps/api/geocode/json?address=Москва&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0&sensor=false)的结果 应该是

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "Москва",
               "short_name" : "Москва",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Московская область",
               "short_name" : "Московская область",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Россия",
               "short_name" : "RU",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Москва, Московская область, Россия",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 56.0213690,
                  "lng" : 37.9650910
               },
               "southwest" : {
                  "lat" : 55.490520,
                  "lng" : 37.1303210
               }
            },
            "location" : {
               "lat" : 55.74279280,
               "lng" : 37.61540090
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 55.94326550,
                  "lng" : 38.12763850
               },
               "southwest" : {
                  "lat" : 55.54128490,
                  "lng" : 37.10316330
               }
            }
         },
         "types" : [ "locality", "political" ]
      }
   ],
   "status" : "OK"
} 
```

但它返回“Курганская область”而不是“Московская область”......如何让谷歌地图团队纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:09:58.057

使用 maps.google.com 地图右下角的“报告问题”链接

在问题跟踪器中查看此问题： [http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4208](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4208)

# javascript - javascript 使用 url 上传图片（图片已经在互联网上，不同的域）

> ID：11134678
> 
> 赞同：0
> 
> 时间：2012-06-21T08:53:47.843
> 
> 标签：javascript, jquery, image, upload

我需要将图像上传到我的网站，使用拖放图像（从本地计算机，已经可以使用），或者从其他网站拖放图像（不起作用）。

我正在努力让图像被丢弃 url，因此我无法处理要上传的图像。

我考虑过使用 jquery.load()，但仍然需要图像 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:00:50.123

由于许多浏览器不允许跨域脚本，因此很难在客户端从不同的 url 检索图像。所以你不能做一个ajax请求来下载这个url。您可能会做的是，使用 URL 发出服务器端获取请求并下载图像

或者，您可以使用用户提供的 url 从服务器端添加动态图像标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:41:14.767

使用

```
e.dataTransfer.getData('text') 
```

给我我的网址，不知道我是怎么错过的！

然后我只是将 URL 传递给处理其余部分的 asp.net 页面。

# javascript - 使用edittype时如何在jqgrid中启用或禁用子网格：基于选定值进行选择

> ID：11134682
> 
> 赞同：0
> 
> 时间：2012-06-21T08:54:15.800
> 
> 标签：javascript, jqgrid

使用 edittype:"select" 时是否可以根据所选值禁用或启用子网格？

基本上它看起来像这样

```
dataEvents: [
{  
  type: 'change',
  fn: function(e) {
  var thisval = $(e.target).val();
 if ( thisval == 'A' ) { 
 // enable subgrid
     }
 else {
     // disable subgrid
     }
  }
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:10:45.753

通过使用临时解决：

```
if (thisval =='A'){
  $('#'+lastsel+' > td').addClass('sgcollapsed');
  $('#'+lastsel+' > td.sgcollapsed >a').show();
}
else {
  $('#'+lastsel+' > td.sgcollapsed >a').hide();
  $('#'+lastsel+' > td').removeClass('sgcollapsed');
} 
```

# java - 静态变量，它们的寿命是多少？

> ID：11134686
> 
> 赞同：17
> 
> 时间：2012-06-21T08:54:35.410
> 
> 标签：java, android

我在我的应用程序中使用静态变量，其中很多。我的问题是，当我退出应用程序时，它们还会在内存中吗？如果是，我该如何纠正。提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T09:00:23.360

静态变量在 ClassLoader 加载类时加载，在[卸载时将被删除](https://stackoverflow.com/questions/148681/unloading-classes-in-java)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-27T17:18:27.167

对于这个问题的下一个读者-

> 正如每个人在答案中所说的那样，静态变量是类变量。它们保留在内存中，直到类没有从 JVM 中卸载。

在 Android 中，您已经看到，当我们关闭任何应用程序时，它并没有完全关闭，它保留在最近的应用程序堆栈中，您可以通过长按主页按钮（在大多数设备上）看到。

```
 Android itself kicked out those recent apps when the other app needs memory 
```

在 Android 中，静态变量卸载时 -

```
 -You force stop your app.
 -Application crashes.
 -You clear your app data.
 -Switch off your Device.
 -Android kicked out recent app 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-21T08:58:55.093

只要类加载到 JVM 中，静态变量就会存在。当 JVM 中不再运行该类的实例时，该类将被卸载并且静态变量将有资格进行垃圾收集。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-21T08:59:00.590

除了其他答案之外，还要注意，如果这些静态“变量”实际上是“静态最终”原始常量，那么它们根本不作为单独的实体存在，但它们的值被编译到所有使用的类中它们（不仅仅是定义它们的那个）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-21T08:56:39.877

静态变量与一个类相关联，只要类在内存中，它们就会一直存在（一旦应用程序终止，它就不再存在）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-21T08:59:00.043

有时，您希望拥有所有对象共有的变量。这是通过`static modifier`. `Fields that have the static modifier in their declaration are called static fields or class variables`. `They are associated with the class, rather than with any object`. `Every instance of the class shares a class variable, which is in` **内存中的一个固定位置**。任何对象都可以更改类变量的值，但也可以在不创建类实例的情况下操作类变量。

当实例不使用时，垃圾收集器将销毁它。这意味着您的实例将从内存中删除。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-21T08:59:22.150

> 我在我的应用程序中使用静态变量，其中很多。

静态变量不受自动内存管理的影响，您应该在方法中将它们设置为*null*`onDestroy` (Android)。**它们肯定属于一个类，它的工作原理与@Jigar Joshi**指出的完全一样。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-06-21T08:59:52.027

如果是 C/C++，如果你没有收集垃圾，你应该使用内存管理程序。如果是java，请从内存中关闭所有“javaw”程序并关闭jvm

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-21T09:55:33.360

静态变量被称为类变量，它们在加载类时加载，在卸载类时卸载。例如一个类变量，如

```
private int classinVar; 
```

类加载时会自动初始化为默认值，当你退出时，同样的概念是退出，然后该类将脱离其静态字段的上下文。

# javascript - 正则表达式将 html-image 转换为 XML 以避免预加载

> ID：11134688
> 
> 赞同：0
> 
> 时间：2012-06-21T08:54:35.883
> 
> 标签：javascript, xml, regex, image

我目前正在通过 ajax 将 XML 提要拉入 webapp。显然我喜欢使用 jquery 来解析它，就像这样：

```
$(source).find("item"); 
```

这样做的问题是所有内容都转换为节点，包括-tags。考虑到这是某种 RSS 提要，提要包含完整的文章（包括图片库），因此有许多 img-tags。为了防止这种情况，我想尝试将 img-tags 转换为如下内容：

前：

```
<img src="path_to_img.jpg" width="450" height="199" alt="alt description" title="image title" class="image_classes" /> 
```

后：

```
<image>
<src>path_to_img.jpg</src>
<alt>alt description</alt>
<title>image title</title>
<class>image_classes</class>
</image> 
```

如果有人有比使用正则表达式更好的建议，当然也欢迎。但是因为它们都必须像文本一样对待，我担心很少，考虑到图像在添加到 DOM 时开始预加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:00:14.023

这是前两个属性 src 和 alt 的示例：

```
HTMLstring.replace(new RegExp("<img src=\"([^\"]+)\".*alt=\"([^\"]+)\"","gm"), "<image><src>$1</src><alt>$2</alt></image>") 
```

如果您预见到某些属性可能会丢失，您可以使用`|`运算符来管理所有替代方案，或者可能采用混合方法，从标签中提取一组键值对，`img`然后将它们与一些 js 连接在一起：

```
 $.each(HTMLstring.replace(/<img ([^ =]+)="([^"]+).*\/>/), function () {
        <do_what_you_need_with($1, $2)>
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:10:09.837

好吧，除非您可以保证所有这些属性将始终存在，并且始终在带引号的字符串等中，否则这不会很容易。

```
var html = '<img src="path_to_img.jpg" width="450" height="199" alt="alt description" title="image title" class="image_classes" />';
var regex = /<img .*?(src|alt|title|class)="([^"]*)" .*?(src|alt|title|class)="([^"]*)" .*?(src|alt|title|class)="([^"]*)" .*?(src|alt|title|class)="([^"]*)".*?\/?>/g;
var xmlTemplate = '<image><$1>$2</$1><$3>$4</$3><$5>$6</$5><$7>$8</$7></image>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​';
var xml = html.replace(regex, xmlTemplate); 
```

如果您的源 HTML 不是统一的，那么您可能必须使用`.replace(regex, func)`而不是`.replace(regex, string)`.

正如您所说的 alt 属性可能不存在，那么您将需要将正则表达式与函数一起使用，如下所示：

```
var html = '<img src="path_to_img.jpg" width="450" height="199" alt="alt description" title="image title" class="image_classes" />';
var regex = /<img .*?>/gi;
function getAttributeValue(tag, attribute)
{
    var regex = new RegExp('\\b' + attribute + '="([^"]*)"', 'i');
    var match = tag.match(regex);
    return '\t<' + attribute + '>' + (match ? match[1] : '') + '</' + attribute + '>\n';
}

var xml = html.replace(regex, function($0)
{
    var xml = '<image>\n';
    xml += getAttributeValue($0, 'src');
    xml += getAttributeValue($0, 'alt');
    xml += getAttributeValue($0, 'title');
    xml += getAttributeValue($0, 'class');
    xml += '</image>';
    return xml;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:30:47.320

如果您不介意 alt 标记完全从 xml 中排除（如果 html 中不存在），那么您可以使用以下命令：

```
var regex = /\s+(src|alt|title|class)\s*=\s*"([^"]+)"/gi;
var res;
var xml = '<image>\n';
while ((res = regex.exec(html)) !== null) {
    xml += "\t<" + res[1] + ">" + res[2] + "</" + res[1] + ">\n";
}
xml += "</image>"; 
```

# c++ - 如何从 C++ 中的整数缓冲区中提取 4 个字节的整数

> ID：11134696
> 
> 赞同：1
> 
> 时间：2012-06-21T08:55:20.247
> 
> 标签：c++, c

我有整数的缓冲区/有效负载，其中每 4 个字节是一个我需要提取的字段。我有一个指向缓冲区的指针。现在我必须提取 4 个字节并将其分配给变量，直到我到达缓冲区的末尾。指针是指向buf的uint8_t指针，buf是一个封装了细节的缓冲区对象。最好和最优雅的方法是什么？我正在用 C++ 编码。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:00:44.117

如果缓冲区中的整数是字对齐的，您可以尝试：

```
const char* ptr; // this points to a position in a buffer
int value = reinterpret_cast<int*>(ptr); 
```

否则，也许更安全，更可取：

```
const char* ptr;
int value;
std::copy(ptr, ptr+sizeof(int), reinterpret_cast<char*>(value)); 
```

顺便说一句：确保你没有字节序问题（即你的机器和保存这些整数的机器必须具有相同的字节序才能工作，否则你需要补偿）。您在这里依赖于 C++ 的特定实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:01:30.997

您可以使用 C 代码执行以下操作：

```
int i = 0;
int value;
while(i < buffersize)
{
  value = 0;
  memcpy(&value, buffer, sizeof(int));
  //if the buffer is from network, then you may have to do a conversion from network order to host order here
  printf("%d", value);
  buffer = buffer + sizeof(int);
  i = i + sizeof(int);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T09:09:43.897

我建议一个接一个地读出字节，并“手动”组装数字。这要求您清楚预期的字节顺序，这是一件好事。它还使代码符合任何对齐要求，因为您从缓冲区读取的所有内容都是字节。

```
uint32_t extract_uint32_be(const uint8_t *buffer)
{
  const uint8_t b0 = buffer[0], b1 = buffer[1], b2 = buffer[2], b3 = buffer[3];

  return (b0 << 24) | (b1 << 16) | (b2 << 8) | b3;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T09:06:22.040

```
assert(buf_bytes % 4 == 0);
std::vector<uint32_t> numbers(buf_bytes/4);
memcpy(&numbers[0], buf, buf_bytes);
if (need_byte_swap)
    std::for_each(numbers.begin(), numbers.end(), [](uint32_t &n){ntohl(n);}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T08:58:29.980

转换为 4 字节整数和索引的数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T09:01:16.813

一次读取一个字节并将它们转移/添加到 int 或使用 memcpy 将字节复制到正确类型的变量中。std::copy 也可能是可以接受的，我不确定别名规则。

按照建议强制转换为数组可能会违反严格的别名规则，因此不能保证工作并且可能是未定义的行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-10T09:48:41.413

您可以使用 C 代码执行以下操作：

i 指向要读取 4 个字节的缓冲区。

```
 read = (UInt32)((UInt8*)p_msg)[i++] << 24;
 read |= (UInt32)((UInt8*)p_msg)[i++] << 16;
 read |= (UInt32)((UInt8*)p_msg)[i++] << 8;
 read |= (UInt32)((UInt8*)p_msg)[i++]; 
```

# javascript - JavaScript：appendChild 和注册的事件监听器

> ID：11134698
> 
> 赞同：1
> 
> 时间：2012-06-21T08:55:30.683
> 
> 标签：javascript, javascript-events

我正在使用**appendChild** JavaScript 方法跨 DOM 移动对象。没有任何问题，直到某些用户抱怨在将DIV 元素拖放到表格后，拖放在**Safari Mobile**中不起作用。这是我正在开发的 REDIPS.drag 库：[http ://www.redips.net/javascript/drag-and-drop-table-content/](http://www.redips.net/javascript/drag-and-drop-table-content/)

在删除 DIV 元素的瞬间，通过 appendChild 方法将 DIV 元素附加到当前表格单元格中。它应该从前一个节点自动删除到当前节点。在文档[https://developer.mozilla.org/en/DOM/element.appendChild](https://developer.mozilla.org/en/DOM/element.appendChild)中没有任何关于将事件侦听器附加到移动对象的内容。我假设附加到对象的事件侦听器（在传统和高级模型中）应该与对象一起传播而不是被删除。

删除事件侦听器仅在 Safari Mobile 中被注意到，因此它可能是 Safari 中的一个 BUG 或者我错过了一些东西。

任何建议都非常受欢迎，谢谢！

# javascript - Jquery 加载外部 HTML 的一部分

> ID：11134701
> 
> 赞同：7
> 
> 时间：2012-06-21T08:55:44.317
> 
> 标签：javascript, jquery, html, jquery-load

基本上我有一个 index.html 如下所示..

```
<html>

<head>

<title>UI Test: Main Menu</title>

<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="general.js"></script>

</head>

<body>  

<input type="button" value="Details" onclick="javascript:$('#mainContainer').load('loadpage.html #name1div *');"/><br>
<div id="mainContainer">        

</div> 
```

loadpage.html 内容

```
<div id="nav1div><h3>1 DIV </h3> </div>
<div id="nav2div><h3>2 DIV </h3> </div>
<div id="nav3div><h3>3 DIV </h3> </div>
<div id="nav4div><h3>4 DIV </h3> </div> 
```

我的目标是基本上一次将 1 个 div 加载到主容器中，我知道加载函数可以一次加载整个页面，但这不是我需要做的。

看过一些类似的问题，但似乎无法解决这个问题..

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T08:58:33.433

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T09:00:27.357

要一个接一个地加载 DIV，定义一个计数器

```
var curDiv = 1; // current Div 
```

在开头的某个地方（最好定义一个`$(document).ready()`函数来初始化它）。定义这个函数：

```
function loadThing()
{
    if (curDiv<5) $('#mainContainer').load('loadpage.html #nav' + (curDiv++) + 'div');
} 
```

定义点击事件，如：

```
$("input#getdiv").click(loadThing); 
```

你按钮喜欢：

```
<input id="getdiv" type="button" value="Details" /> 
```

每次点击你都应该得到第一个 div，第二个，依此类推。

使用这种方法，您可以*将 JS 与 HTML 分开*，这总是好的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T08:58:25.657

jQuery`load`可以轻松加载页面片段，像这样

```
$('#mainContainer').load('loadpage.html #nav1div'); 
```

# java - 如果在java中重新分配同步变量会发生什么？

> ID：11134702
> 
> 赞同：5
> 
> 时间：2012-06-21T08:55:49.323
> 
> 标签：java, synchronization

下面的代码会发生什么？同步有效吗？这是一道面试题。

```
class T
{
    public static void main(String args[])
    {
        Object myObject = new Object();
        synchronized (myObject)
        {
            myObject = new Object();
        } // end sync
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T08:59:44.457

每次进入同步块时，都会在不同的对象上同步。大多数情况下，除了让你感到困惑之外，这不会做任何事情，但是两个线程看到同一个对象并等待的可能性很小。

出于这个原因，如果您正在同步的字段不是`final`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T08:58:47.160

它仍然释放获取的同一个监视器，但是任何其他也使用锁定的代码`myObject`（这里不可能，因为它是一个局部变量，使得同步基本上毫无意义）将开始使用新对象。

不要忘记同步应用于*对象*（或者更确切地说，与对象关联的监视器） - 而不是变量。获取/释放的监视器仅取决于到达同步块*开始时的表达式值。**在同步块结束时不会*重新计算表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T08:59:08.670

不，它不起作用。每当有新线程进入时，`myObject`就会创建一个新线程。特别是现在这`myObject`是一个局部变量！

即使`myObject`是类成员，它也不起作用，因为您将更改要锁定的对象。有关详细说明，请参阅有关[非最终字段同步的](https://stackoverflow.com/questions/6910807/synchronization-of-non-final-field)问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:03:42.023

我看不出这段代码背后的原因，因为对象没有被任何线程共享。在任何情况下，删除同步块都不会影响实际结果。它只会让你的代码运行得更快

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T09:06:05.423

你需要先获取myObject的锁，如果这个锁被阻塞了，你必须等到锁被释放。

同步需要多线程环境。但是您的代码似乎与并发无关。所以我很遗憾地告诉您，没有任何事情会发生。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T09:23:56.890

运行代码并分析结果。

```
public class Test {
    static Foo o = new Foo(0);
    static class Foo {
        private int i = 0;
        Foo(int i) {
            this.i = i;
        }
        public void addOnce() {
            this.i++;
        }
        public String toString() {
            return String.valueOf(i);
        }
    }
    public static void main(String args[]) {
        test1();
        try {Thread.sleep(10000);} catch (Exception e) {}
        test2();
    }
    public static void test1() {
        Runnable r = new Runnable() {
            public void run() {
                synchronized (o) {
                    System.out.println("1------>"+o);
                    o = new Foo(1);
                    try {Thread.sleep(3000);} catch (Exception e) {}
                    System.out.println("1------>"+o);
                }
            }
        };
        new Thread(r).start();
        new Thread(r).start();
    }
    public static void test2() {
        Runnable r = new Runnable() {
            public void run() {
                synchronized (o) {
                    System.out.println("2------>"+o);
                    o.addOnce();
                    try {Thread.sleep(3000);} catch (Exception e) {}
                    System.out.println("2------>"+o);
                }
            }
        };
        new Thread(r).start();
        new Thread(r).start();
    }
} 
```

# javascript - 带有 base64 字符串的 HTML 图像标记（数据 URI）

> ID：11134707
> 
> 赞同：2
> 
> 时间：2012-06-21T08:56:32.400
> 
> 标签：javascript, html, internet-explorer-8, jpeg, data-uri

我大约每 50-200 毫秒从一系列 httprequests 中获取 jpeg 图像的二进制数据，我将此数据转换为 base64 字符串并使用 javascript 将字符串插入 img 标记中。

```
var img = document.getElementById('img1');
img.src = 'data:image/jpeg;base64,' + b64str + ''; 
```

因此，当接收到更大的图片时，我体验到图像（第一次完全显示）在几秒钟后从底部越来越多地被切掉，直到达到某个点。

我搜索了一下，发现

> Internet Explorer 8 将数据 URI 的最大长度限制为 32 KB。（Internet Explorer 9 没有这个限制）

我没有IE9的电脑可以尝试，我只有IE8和IE6。32kb 的限制可能是问题吗？但是为什么图像第一次正确显示，而在收到图像后却经常被削减（总是自下而上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:18:06.537

我很抱歉这么说，但是对于像这样的动画（5-20​​fps；实时），Javascript 和每帧 HTTP 请求不是正确的解决方案。您需要视频流。否则，请尽你所能，视频将不同步，服务器将因只有少数人使用而过载。

# php - jQuery 图像裁剪器

> ID：11134712
> 
> 赞同：1
> 
> 时间：2012-06-21T08:56:57.317
> 
> 标签：php, jquery

我正在使用插件来执行图像的裁剪。

[如果你在http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop-v11/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop-v11/)下载这个插件 ，你可以在下面看到这个，这是做什么的 $max_file*1048576

如果你看到 $max_file ，它是用 3 硬编码的，他们也提到了 MB。* 1048576 是做什么的。

```
if ($userfile_size > ($max_file*1048576)) {
            $error.= "Images must be under ".$max_file."MB in size";
        } 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:02:44.740

`1048576 (bytes) = 1MB`所以 `3 * 1048576 (bytes) = 3MB`

# java - 可以对春季休息电话进行junit测试吗？

> ID：11134713
> 
> 赞同：1
> 
> 时间：2012-06-21T08:57:03.570
> 
> 标签：java, unit-testing, http, rest, spring-3

是否可以测试内部包含休息方法的控制器？

```
 @RequestMapping(value = "/user", method = RequestMethod.PUT,consumes="application/json")
    public ResponseEntity<String>createNewAccount(HttpEntity<String>request) {
//do something

} 
```

我将如何使用将 http 标头、uri 和内容发送到此方法的虚假 http 请求来调用此方法？任何这样做的存根或模拟类？就像是

```
httpMockRequest.consume(uri,headers, body,method, controller class); 
```

然后它将进入我的控制器并根据使用的 uri 和 http 方法查找请求映射，然后执行并发送来自 httpMockRequest 测试对象的 http 标头和内容？

Spring 或 Java EE 中存在类似的东西吗？

顺便说一句，我正在使用 Spring 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:01:25.773

最简单的方法就是实例化控制器并将方法直接调用到控制器。您的测试应该只测试控制器的实现，而不是整个流程（从 Servlet 到您的方法）。

我通常在我的测试实现中做这样的事情：

```
Controller c = new Controller();
// configure controller c with mock services
ResponseEntity<String> re = c.createNewAccount(new HttpEntity<String>("{\"property\":10}"));
// check response entity (parsing json of re.getBody()) 
```

对于标题，您有以下构造函数：

```
HttpEntity(T body, MultiValueMap<String, String> headers) 
```

URI 本身在这里并不重要，因为它仅用于解析控制器和方法。

# javascript - 查看画布元素源代码

> ID：11134714
> 
> 赞同：2
> 
> 时间：2012-06-21T08:57:09.590
> 
> 标签：javascript, html, canvas, decompiler

有一个网站有一个我想玩的整洁的画布程序。我是 canvas 和 html 的新手，但我认为它可以通过单独编程 canvas 元素并由 html 中的标签调用来工作。我有三个问题：

我可以下载和隔离画布元素吗？

有没有办法从浏览器查看画布源？

如果需要反编译器，是否也有适用于 java 脚本和其他元素的反编译器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:19:17.927

Canvas 是一种 HTML 元素，通过编写程序 JavaScript 来生成图形、动画、效果等，它变得非常有用。

您可以通过在浏览器中打开开发人员工具（通常为 F12）并浏览 .js 文件来查看源代码（即 JavaScript）。

这是一个带有非常小的画布应用程序的隔离页面，您可以查看其源代码：

[http://simonsarris.com/project/canvasdemo/shapes.html](http://simonsarris.com/project/canvasdemo/shapes.html)

还有一个教程解释了从该页面链接到的所有源。

用 F12 打开 Google Chrome 开发者工具我们可以看到：

![在此处输入图像描述](../Images/72caca1989ce4c2f3b2c13a4ba8caa44.png)

有一个名为 shape.js 的 JavaScript 文件，其中包含构成画布应用程序的所有代码。

* * *

隔离画布完全是另一个问题。让我们看看纽约时报的这个页面：

[http://www.nytimes.com/interactive/2012/06/11/sports/basketball/nba-shot-analysis.html](http://www.nytimes.com/interactive/2012/06/11/sports/basketball/nba-shot-analysis.html)

如果您在此处打开开发人员工具，您会发现有大量的 JavaScript 正在运行，其中大部分都被混淆了，并且很难通过目测究竟是什么代码在驱动构成其整洁图形的画布。

不过我们可以做点什么。我们可以转到开发者工具的“元素”页面并在那里搜索适当的`<canvas>`标签。一旦我们有了它，我们就可以查看它的属性，例如 id ( `<canvas id="SearchForMe"></canvas>`)。

然后在开发者工具中，我们可以返回到 Scripts 页面并按 CTRL+SHIFT+F 来搜索文件，我们将能够搜索画布的 ID 或其他一些唯一标记。（有时我们需要搜索保存画布的 div）

这里还有另一个工具可以提供帮助。看我的截图，最底部是一个看起来像`{ }`. 这试图将混淆的代码变成漂亮的印刷品，以提高人类的可读性。它通常会帮助您解析正在查看的代码。

无论如何，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:32:21.990

为了在 Canvas 上绘图，我们使用 JavaScript。

> 我可以下载和隔离画布元素吗？

不，您必须查看页面的 JavaScript 代码并找出与 canvas 元素相关的内容。

> 有没有办法从浏览器查看画布源？

ctrl-u

> 如果需要反编译器，是否也有适用于 java 脚本和其他元素的反编译器？

不，通常，您可以在查看源代码时直接阅读 JavaScript。但有时，代码会被缩小。最好请作者分享原始代码。

# c# - 突出显示 wp7 ListBox 的中间 UserControl 项的详细信息，如图所示

> ID：11134718
> 
> 赞同：0
> 
> 时间：2012-06-21T08:57:28.403
> 
> 标签：c#, wpf, silverlight, windows-phone-7, windows-phone-7.1.1

![列表框突出显示中间项](../Images/3b358736cfa005da28da799f81752358.png)

我有一个水平列表框，其中包含用户控件（150 宽度和 150 高度作为尺寸）作为项目。

我一次在列表框中显示 3 个项目。我的问题是如何在滚动时检测中间项目，以便当我向左或向右滚动时，我可以在放置在其上方的 texblock 中显示中间列表框项目的名称和其他详细信息。

请参考上传的图片。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:00:08.383

试试这个 [http://silverlightcarousel.codeplex.com/](http://silverlightcarousel.codeplex.com/)

[http://wpfcarousel.codeplex.com/](http://wpfcarousel.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:35:12.043

看来您正在寻找 CoverFlow 控件。我知道[ComponentOne](http://www.componentone.com/SuperProducts/CoverFlowPhone/)有一个，可能还有其他的。

如果这是一个商业应用程序，那么购买一个肯定比自己构建一个更容易。

如果您已经准备好自己构建，那么您可能希望从头开始构建，因为 ListBox 不允许您进行所需的自定义。

# performance - 亚音速 2.0 大容量处理速度慢

> ID：11134723
> 
> 赞同：0
> 
> 时间：2012-06-21T08:57:34.833
> 
> 标签：performance, subsonic

我有 ac# cmd 行应用程序，它读取 xml 文件并使用 subsonic 2.0 更新数据库

初始数据负载以 60k/小时的速度处理 400k 条记录

随着时间的推移，这个过程正在减慢 1200/小时

当我重新启动 sql 时，进程会加快，但几天后又会变慢

该过程每晚运行，记录的数量可能会有所不同。

每次发出请求时都会缓存亚音速 sql 是否有任何问题，这会减慢 sql 2010 的速度？

我已经运行了 perfmon，一切似乎都很好，我正在使用 dotTrace 调查内存泄漏 - 但我仍然认为这是一个 sql 问题

# android - 在安卓上禁用应用内支付

> ID：11134725
> 
> 赞同：0
> 
> 时间：2012-06-21T08:57:39.733
> 
> 标签：android, billing, in-app

我正在尝试创建一个更简单的库来管理 Android 中的应用内付款。

我现在正在处理 CHECK_BILLING_SUPPORTED 方法来测试是否启用了应用内付款，但我找不到禁用这些付款的方法，并且此方法在西班牙语三星 Galaxy Tab 中始终返回 true。

我已经阅读了一些关于家长控制选项的内容，但它在我的平板电脑中不存在。有没有其他人遇到过同样的问题并且知道如何禁用这些付款？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T03:28:29.063

您无法在整个系统范围内禁用此功能，它由 Play 商店应用程序控制。任何家长控制/PIN 设置都在那里。要在您的应用中禁用，请不要让人们在未输入密码/PIN/其他任何内容的情况下按下“购买”按钮。

# android - Android Ice Cream Sandwich：为什么 ListView 项目默认保持选中状态？

> ID：11134728
> 
> 赞同：3
> 
> 时间：2012-06-21T08:58:02.227
> 
> 标签：android, android-listview, android-activity, android-4.0-ice-cream-sandwich

我在 Android ICS 上遇到了一个奇怪且明显未记录的问题。这是我的列表视图的 xml 代码：

```
<ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:divider="@android:color/transparent"
        android:cacheColorHint="@android:color/transparent" 
        android:focusable="false"
        android:listSelector="@drawable/cell_selected_small"
        android:descendantFocusability="afterDescendants" /> 
```

在 Android 2.2（在多个设备上测试）上，列表视图选择在触摸结束后立即被清除。我认为这是正确的行为。

在 Android 4.0 及更高版本上，列表视图选择保持选中状态，即使`onListItemClick()`将新 Activity 推送到堆栈上然后按下后退按钮也是如此。如果然后我滚动列表视图一段时间，则选择会在明显随机的时间后消失。

你们中有人遇到过同样的问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:18:53.583

是的，这是一个奇怪的问题...设置列表视图的一个属性来解决这个问题。

```
android:choiceMode="singleChoice" 
```

希望这会对你有所帮助..:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:43:51.300

不完全确定，但我将清单中的 targert_sdk 设置回 10 并且一切正常，所以我去查看文档中的[兼容性](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)内容。API 11 列表包括该行。

• 如果GridView 和ListView 没有实现Checkable，它们将对选定的项目使用View.setActivated。

我认为是相关的。我有

```
android:choiceMode="singleChoice" 
```

在我的 xml 中并将其更改为

```
android:choiceMode="none" 
```

这看起来让事情回到了我想要的状态。

# mysql - MYSQL 计算重复 2、3、4 等次的值的数量

> ID：11134731
> 
> 赞同：2
> 
> 时间：2012-06-21T08:58:17.577
> 
> 标签：mysql, sql

下面的 sql 将从游戏会话表中返回有多少用户玩过游戏的计数。

```
SELECT count(DISTINCT `userID`) as count FROM `game_sessions` 
```

在该表“game_sessions”中，每一行包含用户会话的详细信息。因此，可能有 3、40 甚至 500 行具有相同的“用户 ID”。我知道上面的查询将找出“useriD”有多少不同的值，或者换句话说，有多少人玩过至少一个游戏。

如何修改此查询，以便找出有多少人玩过至少两场或至少 30 场比赛，从而查看有多少用户 ID 重复了 2 次、5 次、10 次等

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:02:11.667

您不需要`DISTINCT`在此使用关键字，只需`COUNT`基于 each 的记录`userID`。试试这个：

```
 SELECT userID, 
         COUNT(userID) TotalCount
    FROM game_sessions
GROUP BY userID
  HAVING COUNT(userID) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:02:13.413

认为这将完成这项工作：

```
select userID, count(userID)
from game_sessions
group by userID
having count(userID) > 2; 
```

更改上面的数字以优化查询。

# windows - 在 Windows 命令行错误中使用 Gimp 脚本

> ID：11134733
> 
> 赞同：1
> 
> 时间：2012-06-21T08:58:19.283
> 
> 标签：windows, cmd, gimp, script-fu

我尝试使用此脚本使用某个脚本转换 .PSD。

这是我的代码：

```
@echo off

set gimp="c:\Program Files\GIMP 2\bin\gimp-console-2.8.exe"

%gimp% -i -b '(flatten-layer-groups 1 test.psd)' -b '(gimp-quit 0)' 
```

但他不工作，出现此错误：

```
(gimp-console-2.8.exe:1336): LibGimpBase-WARNING **: gimp-console-2.8.exe: gimp_
wire_read(): error
GIMP-╬°шсър: ═хтючьюцэю юЄъЁ√Є№ 'c:\Work\Test\1': No such file or directory

GIMP-╬°шсър: ═хтючьюцэю юЄъЁ√Є№ 'c:\Work\Test\test.psd)'': No such file or direc
tory

GIMP-╬°шсър: ═хтючьюцэю юЄъЁ√Є№ 'c:\Work\Test\0)'': No such file or directory 
```

请帮我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:35:57.473

我认为您需要使用双引号，例如

> %gimp% -i -b "(flatten-layer-groups 1 \"test.psd\")" -b "(gimp-quit 0)"

看到[这个链接](http://chris.widdowson.id.au/?p=842#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-19T13:33:41.293

例如，xd 函数打开 c.jpeg，它位于 Windows 10 桌面上的 Gimp 2.10 版

`gimp-2.10 -b "(xd \"C:\\Users\\YourUsername\\Desktop\\c.jpeg\")"`

# xml - JSON VS XML：理论定义

> ID：11134744
> 
> 赞同：-2
> 
> 时间：2012-06-21T08:58:45.270
> 
> 标签：xml, json

有谁知道什么时候应该使用 XML 而不是 JSON，为什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:07:59.543

**XML - 优点**

1.  更严格 - 可以与文档类型定义 (DTD) 一起提供，这将允许您分析提供的 XML 数据是否在语法上正确
2.  命名空间 - 可以帮助混合来自各种资源的数据（例如，您可以使用来自 Spring Core 和 Spring Security 的命名空间，这有助于阅读和理解标记）
3.  可以使用 XPath 进行导航 - 有助于加快查找深度嵌套在标记中的内容
4.  可以通过轻量级处理器（如 SAX 解析器）解析大量数据
5.  用于某些可以强制使用 XML over JSON 的协议（如 SOAP）
6.  更长的街区 - 一些较旧的图书馆可以/使用
7.  不错的工具支持（如 Scala 中的本机使用或 IDE 支持）

**XML - 缺点**

1.  当它变得非常大时难以阅读 - 难以维护
2.  带有所有不必要标签的开销（例如`<some_long_tag_name>...</some_long_tag_name>`在一个文件中遇到 x1000 次），这可能会对网络带宽和磁盘使用产生巨大影响

**JSON - 优点**

1.  更容易被人类阅读

2.  Web 浏览器中的本机支持，这要归功于`JavaScript`

**JSON - 缺点**

1.  不包含类型定义 ( `"some_object" : "10" // String or Int?`)

2.  缺少某种 DTD（你怎么知道“some_object”是必需的？）

这些只是主要的。老实说，一个人可以写一本关于它的书，所以我不知道为什么人们会降低这个问题的等级......但是我发现可以帮助你一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:08:26.373

当（在工具、库、方法和知识的当前状态下）首选 XML 时的示例：

*   根据一些规则进行验证（XSD、Relax NG）
*   通过 SOAP 或 REST/XML与已建立（或某些人可能会说的*遗留）系统进行通信*
*   基于 W3C 标准（XML Signature）或 Oasis 标准（WS-Security）的数字签名
*   当有些人可能需要使用一些外部*配方*进行演示时- XSLT
*   当您需要使用 XSL 和 Apache FOP 生成 PDF 时
*   当您需要使用其标准 web/application.config 文件配置 .NET 应用程序时
*   当您只想完成工作而不是随波逐流时

# php - 警告：mysql_query(): 7 不是有效的 MySQL-Link 资源

> ID：11134746
> 
> 赞同：0
> 
> 时间：2012-06-21T08:58:49.810
> 
> 标签：php, mysql, resources, hyperlink

类似的问题我之前已经被问过很多次了。但由于我在我之前提出的任何问题中都没有找到解决方案，我冒昧地再问一次。

我的程序使用我制作的一个类来处理程序的所有数据库连接。我之前使用过的几个模块都使用了同一个类，但是当我选择使用同一个类做一个新模块时，警告显示为 -

警告：mysql_query(): 7在第 49 行的*任何地方*都不是有效的 MySQL-Link 资源。

当我通过我创建的函数执行 MySQL 查询时会发生警告。功能如下——

```
public function runquery($_query)
{
  $result = mysql_query($_query,$this -> connection); //line 49
  if (! $result) die(mysql_error());
  else return $result;
} 
```

该函数属于一个名为的类`mysql`，并且没有被篡改或更改。因此，该功能在技术上应该按预期工作，因为依赖同一类进行数据库连接的每个其他模块都可以正常工作。

但是，查询执行成功，我设法更新表没有问题（警告除外）。`runquery()`调用函数的主程序中的代码块如下 -

```
$phpmyadmin = new mysql();
$phpmyadmin->connect('localhost', 'root', '');
$phpmyadmin->setdb('test_db');
$result = $phpmyadmin->runquery($Query);
unset($phpmyadmin); 
```

所以`mysql`'s 的函数和以前一样工作得很好，查询执行得很好。但是警告显示的原因是我无法理解的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:18:43.080

症状表明数据库连接已关闭或断开。在代码中查找不需要的[mysql_close()](http://es.php.net/manual/en/function.mysql-close.php)调用。此外，您可以使用以下功能来解决问题：

1.  [is_resource()](http://es.php.net/is_resource)和[get_resource_type()](http://es.php.net/manual/en/function.get-resource-type.php)来确认这`$this->connection`是一个有效的数据类型。
2.  [mysql_ping()](http://es.php.net/manual/en/function.mysql-ping.php)来确定数据库连接是否处于活动状态。

如果这是一个罕见的问题，请将内容记录到文件中并等待它再次发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:01:34.830

不应该有空格。

```
$result = mysql_query($_query,$this->connection); 
```

# ruby-on-rails - RSpec 测试失败找到用户

> ID：11134755
> 
> 赞同：1
> 
> 时间：2012-06-21T08:59:04.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我的控制器（用户控制器）

```
 def reset_password
      @user = User.find_by_reset_code(params[:reset_code]) unless params[:reset_code].nil?     

      if request.post?    
        if @user && @user.update_attributes(:password => params[:user][:password], :password_confirmation => params[:user][:password_confirmation])
          self.current_user = @user
          @user.delete_reset_code
          flash[:success] = t('helpers.password_reset_successful')
          render :template => "sessions/new"
        else
          flash[:error] = t('helpers.password_reset_error')
          redirect_to root_path
        end
      end
   end 
```

我想测试它，我做...

```
 it "POST 'reset password with reset code page'" do
        @user.reset_code = Digest::SHA1.hexdigest( Time.now.to_s.split(//).sort_by {rand}.join )

        User.should_receive(:find_by_reset_code).with(@user.reset_code)
        post :reset_password, :user => {"id" => @user.id}
      end 
```

但我在 Rspec 中有例外 -

```
Failure/Error: User.should_receive(:find_by_reset_code).with(@user.reset_code)
       (<User(id: integer, name: string, email: string, encrypted_password: string, salt: string, created_at: datetime, updated_at: datetime, admin: boolean, reset_code: string) (class)>).find_by_reset_code("acd8a322d9554fbde375f5c39446276188a41678")
           expected: 1 time
           received: 0 times 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:07:45.067

您的请求中没有`reset_code`参数。

用。。。来代替：

```
post :reset_password, :reset_code => @user.reset_code 
```

你宁愿这样做：

```
User.should_receive(:find_by_reset_code).with(@user.reset_code).and_return @user 
```

# google-apps-script - 如何在 Google for Business 域中进行搜索？

> ID：11134759
> 
> 赞同：0
> 
> 时间：2012-06-21T08:59:15.160
> 
> 标签：google-apps-script

特别是用户。

目前我有这样的脚本：

```
function findUsers(s) {     
  var users = UserManager.getAllUsers();
  var r = new Array;

  Logger.log("User Count" + users.length );

  for( var i = 0 ; i < users.length ; i++ )
  {
    var u = users[i];    
    var n = formatUserName( u );
    n = n.toUpperCase();

    if( n.indexOf( s.toUpperCase() ) > -1 )
    {
     r.push(u);
    }
  }   
  return r;
} 
```

这可行，但有点慢，我知道它会变慢，因为由于[`UserManager.getAllUsers()`当前的工作方式而迁移了更多用户](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1269)

因此，在我开始研究自己“缓存”域数据的方法之前……我想知道是否有一种有效的方法可以通过 API 或 GAScript 对象在我们的域中搜索对象？

当您使用域的控制面板时，您可以快速高效地搜索...

对于我当前的任务，我可能会放弃自己搜索域并要求正确的用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:52:03.653

这是您的选择

1) 在 Google Apps 脚本中使用 Google Apps Profiles API ( [https://developers.google.com/google-apps/profiles/#Retrieving](https://developers.google.com/google-apps/profiles/#Retrieving) )。这需要使用 oAuth。如果您尚未使用 oAuth，请尝试使用 oAuth 服务库 ( [https://developers.google.com/apps-script/notable-script-libraries](https://developers.google.com/apps-script/notable-script-libraries) ) 以减轻您在使用它时的痛苦。

2）第二个选项是您已经注意到的。将结果缓存在电子表格中。

3) 无论 1 还是 2，如果还没有问题，您应该在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中打开一个问题。

# html - 为什么我的主图像不在 Chrome 的中心？

> ID：11134760
> 
> 赞同：0
> 
> 时间：2012-06-21T08:59:18.280
> 
> 标签：html, css

在 Firefox 中看起来不错，但图像未显示在中心。

在 Chrome 中，图像未在浏览器窗口的中心对齐

如果您刷新浏览器，它会对齐到中心，然后在几秒钟后回到左侧。

感谢您的任何帮助。这是[演示模板。](http://www.centerwow.com/kids/WebPage_with_Banner/) 谢谢。

CSS代码：

```
html,body {
      margin: 0;
      padding: 0;
      text-align: center;
      font-family: arial, Helvetica, sans-serif;
      font-size: 14px;
      /*background: #FFF url("images/border.jpg") repeat-y center;*/
}
 #wrapper{
    margin:0 30px;
    width: 95%;
    box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.4);
    }

#anti-shadow-div{
    display:table;
    overflow:hidden;
}

img { border: none; }
a { text-decoration: none; color: #2965a6; font-weight: bold;}
a:hover { text-decoration: underline; color: #fca00e; }

/*---------- Divs ----------*/

/*#header {
      background: url("images/logo006.jpg") no-repeat center;
      height: 120px;
      width: 100%;
      margin: 0 auto;
}*/

#header001 {
      background: url("images/logo001.jpg") no-repeat center top;width:890px;height:133px;
      height: 133px;
      width: 900px;
      margin: 0 auto;
      font-family: arial, Helvetica, sans-serif;
      font-size: 50px;
}

#indexheader{
background:#FFFFFF;
 height: 30px;
      width: 890px;
      margin: 0 auto;
      font-family: arial, Helvetica, sans-serif;
      font-size: 50px;
      }
#indeximg{
float:left;
}

#navibtn{
width:900px;
height:90px;
margin: 0 auto;
}

.navibtn001{

background:url(images/automart.jpg) no-repeat;
width:200px;
height:90px;
}

.navibtn002{
background:url(images/cab.jpg) no-repeat;
width:900px;
height:90px;
}

#logo002{
      padding-top: 30px;
      margin: 0 auto;
      width: 890px;
      voice-family: "\"}\""; 
      voice-family:inherit;
      width: 850px;
}

/************
html>body #logo { width: 850px }  /* for opera */
/*
#logo a:hover {
      text-decoration: none;
}  */
/*
#logo a {
      float: left;
      background: url("images/logo.jpg") no-repeat 0px 0px;
      width: 317px;
      height: 85px;
}

*******************/

/*---------- Divs ----------*/
#flsh{
background:url(images/vans/56%20dolpin/flv002.swf) no-repeat  left top;width:640px;height:480px;
height: 500px;
width: 650px;
margin: 0 auto;

}

/*******************/

#menubutton{
width:100%;
height:20px;
text-align:center;
}

#container {
      width: 100%;
      overflow: hidden;
      text-align: left;
      font: 90% Tahoma, Helvetica, sans-serif;
      margin: 0px auto;
      border-top: 3px solid #6fb2e6;
      border-bottom: 3px solid #ffb93f;
      background: #e5e5e5;
}  
* html #container {
      overflow: visible;
}

#content{
      float: right;
      width: 690px;
      background: #fff url(images/nav-edge.jpg) repeat-y;
      padding-bottom: 40px;
      min-height: 380px;
}
* html #content {height: 380px; overflow: visible;}

#maincontent {
      float: left;
      float: right;
      padding: 30px 20px 0px 20px;
      overflow: hidden;
      width: 450px;
      voice-family: "\"}\""; 
      voice-family:inherit;
      width: 410px; 
}

#maincontent001 {
      float: left;
     /* float: right;*/
      padding: 30px 20px 0px 20px;
      overflow: hidden;
      width: 450px;
      voice-family: "\"}\""; 
      voice-family:inherit;
      width: 650px; 
}

#rightdiv{
      padding-top: 30px;
      float: right;
      width: 230px;
}

#rightdiv img{
      padding: 1px;
      border: 1px solid #6fb2e6;
}

#news{
      width: 210px;
      margin: 0 auto;
}

/*---------- Navigation Menu ----------*/
#navcontainer {
      padding-top: 30px;
      padding-left: 15px;
      min-height: 380px;
      float: left;
      overflow: hidden;
      width: 180px;
}
* html #navcontainer {height: 380px; overflow: visible;}

.nav {
    width: 170px;
    position:absolute;
    list-style-type: none;
    margin: 0;
    padding: 0px;
    font-size: 105%;
    left: 228px;
    top: 13px;
}

.nav li {
      text-align: left;
      margin: 3px 1px;
      padding: 0;

}

.nav li a {
      border: 1px solid #52a3e2;
      display: block;
      padding: 4px 0 4px 10px;
      background: #6fb2e6;
      color: #e5ffff;
      font-weight: bold;
      text-decoration: none;
      width: 170px;
      voice-family: "\"}\""; 
      voice-family:inherit;
      width: 160px; 
}

.nav li a:hover {
      background: #ffb93f;
      color: #949494;
      font-weight: bold;
      cursor: pointer;
}

/*---------- Footer ----------*/
#footer {
      height: 30px;
      margin: 0 auto;
      padding: 10px 0 10px 0;
      font-size: 80%;
      text-align: center;
      color: #6a6666;
      width: 890px;
      background: #fff;
}

#footerimg{
background:url("images/footer.jpg") no-repeat left top;width:890px;height:133px;
      height: 133px;
      width: 900px;
      margin: 0 auto;
      }

#footeradd{
background:url(images/carsalelogo.jpg)no-repeat left top;width:890px;height:133px;
 height: 133px;
 width: 900px;
 margin: 0 auto;

}

#footertextleft{
      margin-left: 10px;
      text-align: left;
      width: 450px;
      float: left;
}

#footertextright{
      margin-right: 10px;
      text-align: right;
      width: 350px;
      float: right;
}

/*---------- Headings ----------*/
h1 { 
      padding-top: 0;
      margin-top: 0;  
      font: 120% Arial;
      font-weight: bold;
      color: #5c94bf;
}

.mainheading{
      font-weight: bold;
      font-size: 123%;      
}

h2 {
      padding-top: 0px;
      margin-top: 0px;
      font: 110% arial;
      font-weight: bold;
      color: #5c94bf;
}

#subtext{
      padding-top: 0px;
      margin-top: 0px;
      font: 110% arial;
      font-weight: bold;
      color: #5c94bf;
}

/*---------- Classes ----------*/
.underline{
      padding-bottom: 3px;
      width: 180px;
      border-bottom: 2px solid #ffb93f;
}

.subheading{
      font-weight: bold;
}

.submitbox{
      width: 215px;
      background: #b8d1e4;
      padding: 5px;
      text-align: left;
      border: 1px solid #e5e5e5;
}

.submitbox p{
      margin-top: 3px;
      margin-bottom: 5px;
}

.submitbox button{
      font-size: 95%;
      background: #e5e5e5;
      color: #949494;
      border: none;
      padding: 3px 8px;
      font-weight: bold;
}

#maincontent ul{
      list-style-image: url(images/bullet.png)
}

.advert{
      width: 160px;
      padding: 5px;
      background: #fff;
      border: 1px solid #c8c8c8;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:02:27.750

添加`margin: 0 auto;`到：

```
#anti-shadow-div {
   display: table;
   overflow: hidden;
   margin: 0 auto;
} 
```

# java - HMAC 一个 php 字节数组

> ID：11134763
> 
> 赞同：2
> 
> 时间：2012-06-21T08:59:32.053
> 
> 标签：java, php, encoding, bytearray, hmac

我正在尝试将 PHP 后端与 Java 后端集成。Java 后端需要一些凭据，这些凭据必须正确编码和散列以在两端匹配。

Java 系统将字符串转换为字节序列 (1)，然后生成该序列的 HMAC/SHA256 键控散列 (2)，然后基于 64 位对散列进行编码 (3)。

```
private static final String HMAC_ALGORITHM = "HmacSHA256";
final SecretKey key = new SecretKeySpec('mysecret', HMAC_ALGORITHM);
final Mac hmac = Mac.getInstance(key.getAlgorithm());
hmac.init(key);
final String stringToHash = "blablabla";
final byte[] bytesToHash = stringToHash.getBytes("UTF8");
final byte[] hash = hmac.doFinal(bytesToHash);
return Base64.encodeBytes(hash); 
```

我可以做（1）并将PHP中的字符串转换为字节序列使用

```
$stringArray = unpack('C*', $string); 
```

// 在这一点上，它的工作原理与 Java 系统完全相同

但是第二部分（2）似乎不匹配，有没有办法在 PHP 中将字节数组传递给 hmac，因为在 Java 中，HMAC 方法接受一个字节数组，而 PHP 需要一个字符串，例如

```
hash_hmac('sha256', $stringArray, $secret); 
```

还是我需要遍历数组并做一些魔术？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:15:04.860

我不认为你需要`unpack`在 php

试试看嘛

```
hash_hmac('sha256', $string, $secret, TRUE); 
```

**注意：**我将实际字符串传递给函数，最后一个参数`raw_output`设置为`TRUE`

**更新**

您的 java 代码似乎是错误的[文档](http://docs.oracle.com/javase/6/docs/api/javax/crypto/spec/SecretKeySpec.html)

```
final SecretKey key = new SecretKeySpec('mysecret', HMAC_ALGORITHM); 
```

这应该如下所示

```
byte[] keyBytes = mysecret.getBytes(); // say mysecret is a String var
final SecretKey key = new SecretKeySpec(keyBytes, HMAC_ALGORITHM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-26T18:49:04.200

我必须在 PHP 上生成相同的 Java 值。它起作用的唯一方法是

```
<?php

$verb = hash_hmac("sha256", "POST" , "9mO6oBVSmb2QTSeN73mEGHHnD", FALSE);

$path = hash_hmac("sha256", '/1.0/benefits/registerBenefit', pack("H*",  $verb), FALSE);

$query = hash_hmac("sha256", "" , pack("H*",  $path), FALSE);

$body  = hash_hmac("sha256", '{"id":"a7d23226-bdfc-4d85-a30a-b2d7eccc36e6","phone_number":"5511973512530","sku":"com.movile.cubes.br.biweekly.homolog","origin":"trade_up_group","application_id":437}' , pack("H*",  $query), FALSE);

$rawSignature   = hash_hmac("sha256", "x-kiwi-signature", pack("H*",  $body), FALSE);

$signature  = base64_encode( pack("H*",  $rawSignature));

var_dump($signature); 
```

所以..我不得不使用 pack("H*", $str) 来获得 Java 生成的相同值。

# c++ - 使用 xbuild 编译 Visual C++ 项目时定义目标

> ID：11134766
> 
> 赞同：3
> 
> 时间：2012-06-21T08:59:40.467
> 
> 标签：c++, visual-c++, ubuntu, mono, monodevelop

我有一个输出库的可视 c++ 项目，我想使用 xmake 在 Linux 上构建它。我可以在 monodevelop 中构建它，但我希望能够从命令行构建它。

如果我尝试使用“xbuild”调用构建项目，则会收到以下错误：

```
....ItemMinerLibMono.cproj: error : Target named 'Build' not found in the project. 
```

我从文档中了解到我需要在 csproj 文件中添加一个名为“Build”的目标，但我不知道该怎么做。我尝试像这样导入 Microsoft.Common.targets 文件：

```
<Import Project="$(MSBuildBinPath)\Microsoft.Common.targets" /> 
```

但后来我得到了错误：

```
: error : Target 'CreateManifestResourceNames', a dependency of target 'PrepareResources', not found. 
```

有人知道如何从命令行成功编译 c++ 项目吗？

谢谢，格雷戈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-12T18:13:03.933

将以下内容添加到 MonoDevelop 的 .cproj 文件中，它将使用 xbuild 构建。

```
<Target Name="Build" DependsOnTargets="$(BuildDependsOn)" Outputs="$(TargetPath)"/> 
```

可能有一个更简单的解决方案，但到目前为止我还没有想出一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:24:57.210

您需要导入 Cpp 目标。

```
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" /> 
```

在具有完整 Visual Studio 安装的 Windows 计算机上，可以在以下位置找到其中的部分或全部。我没有在任何版本的 Linux 下测试过这些`xbuild`：

**VS2012**：`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\v110`
**VS2013**：`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\v120`
**VS2015**：`C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\v140`

# javascript - 淘汰赛更新值时不会触发更改事件

> ID：11134769
> 
> 赞同：13
> 
> 时间：2012-06-21T08:59:41.790
> 
> 标签：javascript, knockout.js

我有一个外部 javascript 库，它触发文本区域的更改、格式化等。

但是，当 KnockoutJS 将值设置为 textarea 时，不会触发 change 事件。[我的问题的简化小提琴](http://jsfiddle.net/EZC9E/)。当 Knockout 更新我的 textarea 的值时，是否可以触发 change 事件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T09:34:02.880

您可以在底层 observable 上设置订阅，而不是试图强制 Knockout 处理更改事件。像这样：http: [//jsfiddle.net/EZC9E/1/](http://jsfiddle.net/EZC9E/1/)

```
this.text.subscribe(function(newValue) {
    alert('Text is changing to ' + newValue);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T21:16:35.327

您可以考虑将其包装到**Custom Knockout Binding**中，而不是更改 javascript 库。无论如何，您可能已经需要为您的库使用自定义绑定，特别是如果您正在使用任何`foreach`动态生成/销毁元素的绑定。

获得自定义绑定后，您就有了一个非常方便的地方来触发“更改”。

```
ko.bindingHandlers.jQueryPluginFunctionCall = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        // Apply jQuery plugin to textarea
        $(element).jQueryPluginFunctionCall();

        // Subscribe to the value binding of the textarea, and trigger the change event.
        allBindingsAccessor().value.subscribe(function () {
            $(element).trigger('change');
        });

        // Clean up jQuery plugin on dispose
        ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
            // This will be called when the element is removed by Knockout or
            // if some other part of your code calls ko.removeNode(element)
            $(element).jQueryPluginFunctionCall('destroy');
        });
    }
} 
```

# java - 为什么我收到 SQLException：数据库已锁定在我的 JDBC SQLite 数据库上？

> ID：11134774
> 
> 赞同：5
> 
> 时间：2012-06-21T08:59:53.907
> 
> 标签：java, sqlite, jdbc

我有一个单线程应用程序，它在本地文件系统上的 3 个不同文件中使用 3 个 SQLite 数据库。

我创建了一个`DbAdapter`帮助类，它打开到 SQLite 数据库文件的连接。在这个类中，我有一个`open`创建连接的`close`方法和一个释放所有内容的方法。

这 3 个数据库是从派生的类访问的`DbAdapter`。

在我的程序中，每个数据库访问都如下所示：

```
MyDbAdapter DB = new MyDBAdapter();
int stuff = DB.getStuff(); // queries the database
DB.close();
// now do something with `stuff` 
```

我已记录所有对和的`stdout`呼叫。每次有一个，一个紧随其后。 我还注意关闭我的所有s （这将导致关联的 s 也被关闭）。`DbAdapter.open``DbAdapter.close``open()``close()`
`Statement``ResultSet`

所以我猜我的数据库访问是干净的，因为我试图让它们尽可能短，并且一旦我不再需要它们，我就会释放所有资源。

然而，我仍然得到一个`java.sql.SQLException: database is locked`.

有什么我做得不好的吗？我知道我没有显示任何代码，但我必须发布很多代码并且它不会相关。我只是问我是否在这里使用了最佳实践，因为我认为我这样做了，但我仍然遇到异常。

这是在 Mac OS 10.6 x64 上使用 Java 1.6，Xerial.org 的 sqlite-jdbc-3.7.2 驱动程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:45:15.087

我注意到我有无法杀死的奇怪 Java 进程。我跑了：

```
ps aux | grep java | grep -v grep | awk '{print$2}' | xargs sudo kill -9 
```

但是这些进程仍然存在（具有相同的 PID）。

我重新启动，问题不再出现。这没有任何意义，因为我能够在没有任何崩溃的情况下进行大量数据库调用，只有一个调用导致了异常。我完全不明白发生了什么，但我不再有这个问题。

欢迎任何***真正的***答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T09:02:47.053

In my case the problem resulted from trying to update the database from Java, while having it open in SQLite Database Browser (which it seems, held a lock on the db).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T09:11:34.690

引用主题[java.sql.SQLException：数据库已锁定](https://stackoverflow.com/questions/2578623/java-sql-sqlexception-database-locked)

'读取 SQLite 数据库会将锁定状态设置为共享。多个阅读器可以同时处于活动状态。

写入 SQLite 数据库会将锁定状态设置为独占。那时没有其他进程可以处于活动状态。

[您可以在http://www.sqlite.org/lockingv3.html](http://www.sqlite.org/lockingv3.html)上找到详细说明

我认为这是你的问题

# ios - 查找启动应用程序的事件：横幅通知、警报通知或图标点击？

> ID：11134775
> 
> 赞同：2
> 
> 时间：2012-06-21T09:00:12.013
> 
> 标签：ios, push-notification

我可以找出在 iOS 上启动应用程序的事件吗？

我需要区分以下几点：

1.  图标水龙头
2.  横幅通知
3.  警报通知

或者，我可以查看应用程序本地设置（设置为横幅或警报通知）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:24:42.537

要确定应用程序是否通过按下通知启动，您需要实现 2 个方法。

首先，在应用程序 didFinishLaunchingWithOptions 中，执行以下操作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
if ([launchOptions valueForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"]) {
 // Handle notification
} 
```

第二：

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
if (application.applicationState == UIApplicationStateActive) {
    // The app was open when a remote notification was received...
} else {
    // The app was in the background and just came to the foreground in response to the user pressing the push notification
} 
```

}

您可以使用以下方式查看已启用的通知类型：

```
UIRemoteNotificationType notificationTypes = [[UIApplication sharedApplication] enabledRemoteNotificationTypes]; 
```

但是，您无法区分横幅通知或警报通知。

# dom - 侦听 DOM object.style.display 更改属性值

> ID：11134779
> 
> 赞同：1
> 
> 时间：2012-06-21T09:00:24.287
> 
> 标签：dom, addeventlistener

我正在寻找一种方法来为 DOM 对象 style.display 属性创建事件侦听器，并在属性值更改时触发函数。

例如

```
<p id="example_p" style="display:none;">Some text</style> 
```

如果页面中的一些 JS 代码会操纵

显示值，将执行一个函数。

这可能吗？

谢谢，

罗伊

# file-upload - 您如何编辑 .tmp 文件删除设置？

> ID：11134785
> 
> 赞同：1
> 
> 时间：2012-06-21T09:00:38.953
> 
> 标签：file-upload, upload, struts2, tmp

1.  使用 Struts 2：.tmp 文件（在上传文件后创建）何时被删除？

2.  您如何自定义何时应该删除 .tmp 文件？你必须创建它的副本吗？

请不要害羞地提供一些代码:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T20:35:10.357

**1.**这取决于你说的是哪个版本的 S2。

*   S2.2.1 及之前的版本：文件上传拦截器删除了临时文件。
*   S2.2.3 及更高版本：过滤器调度程序启动删除过程，因[WW-3490](https://issues.apache.org/jira/browse/WW-3490)而更改。

**2.**假设您使用的是最新版本，可能会注入一个经过调整`Dispatcher`的 .

从*实际*的角度来看，最简单的方法是在操作中复制文件，这在任何合理的文件系统上都非常快。

# asp.net - 使用 asp.net 在客户端机器上下载并运行文件

> ID：11134787
> 
> 赞同：0
> 
> 时间：2012-06-21T09:00:45.333
> 
> 标签：asp.net, download

我正在尝试将文件下载并运行到客户端计算机。客户意识到这一点。这是一个动态生成的 ttkgp 文件。我试过使用在我的本地机器上运行良好的 Processs.Start()（首先将文件保存到 C:\ 然后午餐它），但它不能在服务器上运行。这不是我的服务器，而是托管的。他们正试图提供帮助，但到目前为止还没有运气。我看过这段代码：

```
 public void ProcessRequest(HttpContext context)
  {
   string fileName = context.Request.QueryString["filename"];
   FileInfo fi = new FileInfo(fileName);
   context.Response.ContentType = "application/x-rar-compressed";

   context.Response.AppendHeader("Content-Disposition",
   string.Format("attachment; filename=download{0}", fi.Name));

   context.Response.WriteFile(fileName);
   context.Response.End(); 
```

}

但由于我不知道什么是“HttpContext context”，所以我不知道它是否有效。是否需要更改某些服务器权限？或者只是这段代码可以解决问题？

谢谢

更新（24.6.12）：我几乎解决了这个问题，我现在只需要知道如何在新选项卡/窗口中打开一个 html 页面并稍后关闭它。完成后，我会将所有过程发回这里，我相信它会帮助其他人。

更新（26.6.12）：这是我得到的：目标是从 asp.net webiste 下载一个 TTKGP 文件到本地用户机器并运行它。第 1 步：在服务器 (V) 上生成带有代码隐藏 (c#) 的文件 第 2 步：将文件或其内容复制到用户计算机 (X) 第 3 步：使用 JS 运行文件 (V)

事情是这样的：我可以从服务器上的文本文件复制到用户机器上的文本文件，但不能从 TTKGP 文件复制。这很奇怪，因为这只是文本文件，只是一个不同的扩展。复制文本文件的代码：

```
enter code here
    function copyremotetxt() // works
{   
// copy the txt file
var fso = new ActiveXObject("Scripting.FileSystemObject");

var newfile = fso.CopyFile("remote.txt", "C:\\Users\\***\\local.txt");
} 
```

也许我可以更改用户机器上的文件类型？

注意 1：我知道这是一个安全问题，该站点仅适用于已知用户，而不是公开的公众 注意 2：我知道有更好的方法来完成任务，但对许多事情都有严格的限制

感谢那些可以提供帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:02:52.930

这段代码可以解决问题。它将提示客户下载文件并将其保存在他决定的位置的计算机上。该文件接下来会发生什么是客户的决定，而不是您的决定。他可能会简单地关闭“另存为”对话框，中断下载，删除文件，......这取决于他。

另一个说明：这段代码非常危险，因为它允许客户端传递他想要的任何文件名作为查询字符串参数并下载它。所以他绝对可以读取服务器上的所有文件，这可能不是你想要发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:52:50.293

好的，这需要一种不同的方法。我将尝试使用 JavaScript 读取服务器上的文件，在用户机器中重写它并激活它。任何线索都会很高兴！首先，如何在 JS 中读取文件？我是新手。

# c# - 基于相似性比较字符串

> ID：11134789
> 
> 赞同：1
> 
> 时间：2012-06-21T09:00:49.110
> 
> 标签：c#, .net, regex

我有两个列表，它们看起来像这样

```
<List> ads
[0]
Headline = "Sony Ericsson Arc silver"
[1]
Headline = "Sony Ericsson Play R800I"

<List> feedItems
[0]
Headline = "Sony Ericsson Xperia Arc Silver"
[1]
Headline = "Sony Ericsson Xperia Play R800i Black" 
```

*创建一个新的第三个列表的最简单方法是什么，其中的元素至少有两个*单词相互匹配？你能以 LINQ 的方式完成这个吗？

第三个列表看起来像这样

```
[0]
AdHeadline = "Sony Ericsson Arc silver"
MatchingFeed  = "Sony Ericsson Xperia Arc Silver"
// etc 
```

我尝试遍历第一个列表并使用**Regex.Match**类，如果我找到匹配项，我会填充第三个列表 - 我想知道您首选的方法是什么，以及如何检查 min。表达式中有 2+ 个单词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:36:23.283

我不确定正则表达式会给这里的聚会带来什么。下面的呢？

```
// Define a helper function to split a string into its words.
Func<string, HashSet<string>> GetWords = s =>
    new HashSet<string>(
        s.Split(new[]{' '}, StringSplitOptions.RemoveEmptyEntries)
        );

// Pair up each string with its words. Materialize the second one as
// we'll be querying it multiple times.
var aPairs = ads.Select(a => new { Full = a, Words = GetWords(a) });
var fPairs = feedItems
                 .Select(f => new { Full = f, Words = GetWords(f) })
                 .ToArray();

// For each ad, select all the feeds that match more than one word.
// Then just select the original ad and feed strings.
var result = aPairs.SelectMany(
    a => fPairs
        .Where(f => a.Words.Intersect(f.Words).Skip(1).Any())
        .Select(f => new { AdHeadline = a.Full, MatchingFeed = f.Full })
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:35:54.020

有趣的问题。您可以通过多种方式解决此问题，但可能一个好主意是建立一个制造商列表，然后您可以使用该列表从传入的列表中删除字符串。然后为您关心的所有移动型号构建一个查找表，并在该表上使用型号和制造商（您之前已确认）进行 LINQ 选择。因此，确定什么是制造商和型号可能会让您更轻松。

就我个人而言，我不会使用正则表达式，而是构建一个通用手机模型类，然后您可以使用它来创建一个列表。此外，如果手机数据是手动输入的，请考虑使用[Levenshtein 算法](http://www.dotnetperls.com/levenshtein)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:03:16.607

肯定有更有效的方法可以做到这一点，但这里有一些东西可以让你开始。

```
class Program
{
    private static void Main()
    {
        var ads = new[]
        {
            "Sony Ericsson Arc silver",
            "Sony Ericsson Play R800I",
            "Oneword",
        };

        var feedItems = new[]
        {
            "Sony Ericsson Xperia Arc Silver",
            "Nokia Lumia 900",
            "Sony Ericsson Xperia Play R800i Black",
        };

        var results = from ad in ads
                      from feedItem in feedItems
                      where isMatch(ad, feedItem)
                      select new
                      {
                          AdHeadline = ad,
                          MatchingFeed = feedItem,
                      };

        foreach (var result in results)
        {
            Console.WriteLine(
                "AdHeadline = {0}, MatchingFeed = {1}",
                result.AdHeadline,
                result.MatchingFeed
            );
        }
    }

    public static bool isMatch(string ad, string feedItem)
    {
        var manufacturerWords = new[] { "sony", "ericsson", "nokia" };

        ad = ad.ToLower();
        feedItem = feedItem.ToLower();

        var adWords = Regex.Split(ad, @"\W+").Except(manufacturerWords);
        var feedItemWords = Regex.Split(feedItem, @"\W+").Except(manufacturerWords);

        var isMatch = adWords.Count(feedItemWords.Contains) >= 2;
        return isMatch;
    }
} 
```

# sql - 从一个表中选择唯一数据

> ID：11134792
> 
> 赞同：0
> 
> 时间：2012-06-21T09:00:52.523
> 
> 标签：sql, database, select, left-join

我有一张餐桌：

```
NAME     |   FOOD
-----------------
matthew  |   rice
matthew  |   beans
mark     |   rice
mark     |   beans
Luke     |   rice
john     |   beans 
```

我需要提取只有大米的名称、只有豆类的名称以及两者兼有的名称。如果它们位于单独的表中，则 LEFT JOIN 将起作用。但我遇到了困难，因为他们在一张桌子上。

我已经尝试了这两个语句的变体，但没有运气：

```
SELECT name 
FROM diners 
WHERE NOT EXISTS 
    (SELECT name 
     FROM diners
     WHERE food = 'beans')

SELECT t1.name FROM diners AS t1
LEFT JOIN diners AS t2 ON t1.name = t2.name
WHERE t2.food = 'rice'
  AND t2.name IS NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:21:14.083

-- 两个都有的名字

```
SELECT NAME FROM diners
WHERE FOOD IN ('RICE','BEANS')
GROUP BY NAME
HAVING COUNT(*)>1 
```

——只有大米的名字

```
SELECT NAME FROM diners
WHERE NAME NOT IN (
SELECT NAME FROM diners
WHERE FOOD NOT IN ('RICE')) 
```

--只有豆子的名字

```
SELECT NAME FROM diners
WHERE NAME NOT IN (
SELECT NAME FROM diners
WHERE FOOD NOT IN ('BEANS')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:28:35.987

**只吃米饭——**

```
 select name from dinner where food='rice' and name in 
    (select name from diners group by name having count(name)=1); 
```

**只吃豆子——**

```
 select name from dinner where food='beans' and name in 
   (select name from diners group by name having count(name)=1); 
```

**两者都有——**

```
 select name from diners where food in ('rice','beans') group by name 
   having count(name)>1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:10:18.063

```
 create table #diners (name nvarchar(20), food nvarchar(20))
    insert into #diners values ('matthew','rice')
    insert into #diners values ('matthew','beans')
    insert into #diners values ('mark','rice')
    insert into #diners values ('mark','beans')
    insert into #diners values ('luke','rice')
    insert into #diners values ('john','beans')

    --  only rice
    select  d1.name
    from        #diners d1 
    where       d1.food = 'rice' and
            d1.name not in (select d2.name from #diners d2 where d2.food != 'rice')

    --  only beans
    select  d1.name
    from        #diners d1 
    where       d1.food = 'beans' and
            d1.name not in (select d2.name from #diners d2 where d2.food != 'beans')

    --  both
    select  d1.name
    from        #diners d1 
    where       d1.food = 'rice' and
            d1.name in (select d2.name from #diners d2 where d2.food = 'beans') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:10:41.580

使用 GROUP_CONCAT 怎么样？

`SELECT name GROUP_CONCAT(food) AS foodchain FROM diners GROUP BY name`

然后，您可以检查食物链是否等于大米或豆类或您的应用程序中的任何内容。SQL 中可能有一个简单的解决方案，但这也应该有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T09:24:26.173

要获得只吃过“豆子”的食客：

```
SELECT  distinct name 
FROM    DINERS D1
WHERE NOT EXISTS
(SELECT NULL FROM DINERS D2 WHERE FOOD = 'rice' AND D1.NAME = D2.NAME)
 AND EXISTS 
 (SELECT * FROM DINERS D2 WHERE FOOD = 'beans' AND D1.NAME = D2.NAME); 
```

为了让只吃“米饭”的食客：

```
SELECT  distinct name 
FROM    DINERS D1
WHERE NOT EXISTS
(SELECT NULL FROM DINERS D2 WHERE FOOD = 'beans' AND D1.NAME = D2.NAME)
 AND EXISTS 
 (SELECT * FROM DINERS D2 WHERE FOOD = 'rice' AND D1.NAME = D2.NAME); 
```

只获得两者兼得的食客：

```
SELECT  distinct name 
FROM    DINERS D1
WHERE EXISTS
(SELECT * FROM DINERS D2 WHERE FOOD = 'rice' AND D1.NAME = D2.NAME)
AND EXISTS 
(SELECT * FROM DINERS D2 WHERE FOOD = 'beans' AND D1.NAME = D2.NAME); 
```

# jquery - 上一个（）；和下一个（）；使用说明 Jquery

> ID：11134794
> 
> 赞同：2
> 
> 时间：2012-06-21T09:00:53.977
> 
> 标签：jquery, addclass, siblings

我们有一系列 div，我们想为当前选定的 DIV 的下一个和上一个兄弟分配不同的类。

这是我们的代码：

```
<div class="panel">DIV content 1</div>
<div class="panel current">DIV content 2</div> //THIS IS THE CURRENTLY SELECTED PANEL
<div class="panel">DIV content 3</div>
<div class="panel">DIV content 4</div>
<div class="panel">DIV content 5</div> 
```

据我了解，以下 JQuery 代码将查找 .current 的兄弟姐妹并添加下一个和上一个类。但由于它正在寻找 .current 元素，它不会找到 em。如何将 .current 面板和 addClass 引用到下一个和上一个 .panel 元素？

谢谢你。

```
$('.current').prev().addClass('previous');
$('.current').next().addClass('next'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:04:03.990

根据您的需要，您可以使用[`siblings()`](http://api.jquery.com/siblings/), [`nextUntil`](http://api.jquery.com/nextUntil/), [`prevUntil`](http://api.jquery.com/prevUntil/), [`nextAll`](http://api.jquery.com/nextAll/),[`prevAll`](http://api.jquery.com/prevAll/)函数。`next()`和将`prev()`分别让您进入上一个或下一个元素。

```
//To select all previous elements of `.current` element:
$('.current').prevAll('.panel').addClass('previous');
//To select all next elements of `.current` element:
$('.current').nextAll('.panel').addClass('next'); 
```

## [演示](http://jsdo.it/sarfraznawaz/rrmE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:10:02.433

`$('.current').prev()`在 .current 之前为您提供一个元素：

```
<div class="panel">DIV content 1</div> 
```

`$('.current').next()`在 .current 之后为您提供一个元素：

```
<div class="panel">DIV content 3</div> 
```

见演示：http: [//jsfiddle.net/ssNUN/](http://jsfiddle.net/ssNUN/)

如果要获取所有 prev 或 next 元素，请使用[nextUntil](http://api.jquery.com/nextUntil/) () 和[prevUntil](http://api.jquery.com/prevUntil/) ()。

见演示：http: [//jsfiddle.net/YfV5x/](http://jsfiddle.net/YfV5x/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:11:01.960

尝试这个：

```
$('.current').prevUntil('.panel:first').addClass('previous');
$('.current').nextUntil('.panel:last').addClass('next'); 
```

[http://jsfiddle.net/yxq39/](http://jsfiddle.net/yxq39/)

或者：

```
$('.current').prevAll().addClass('previous');
$('.current').nextAll().addClass('next'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:09:50.960

您做得对，只需添加以下内容

```
$('.current').prev(".panel").addClass('previous');
$('.current').next(".panel").addClass('next'); 
```

# html - 如何在css中将元素保持在一行

> ID：11134795
> 
> 赞同：2
> 
> 时间：2012-06-21T09:00:54.753
> 
> 标签：html, css, haml, sass

我试图将标题中的元素保持在一行中。我当前的样式有效，但一个问题是，当我将浏览器缩小或挤压（从右到左）时，搜索元素有时会转到第二行或出现在第一行下方（即菜单行）。当我让它更小时，整个菜单 div 标签会转到第二行并出现在徽标下方。

我想要的是当我让我的浏览器更小时，所有这些元素都应该保持在同一行中。我怎样才能做到这一点？

这是我的代码

```
.header
.logo
.menu
    %ul
        %li
            %a{:href => '#', :rel => 'first'} Home
        %li
            %a{:href => '#', :rel => 'first'} Features
        %li
            %a{:href => '#', :rel => 'first'} Pricing
        %li
            %a{:href => '#', :rel => 'first'} Team
        %li
            %a{:href => '#', :rel => 'first'} Support
        %a{:href => '#', :rel => 'first'}
            %li.last Sign up for beta   
        .clear
.search
    %input{:type => 'text', :name => 'search'}
.clear 
```

这是scss

```
.header-container {
width: 100%;
height: 100px;
}

.clear { clear: both; }

.header-container {
width: 100%;
background: url(menu-bg.jpg) no-repeat;
background-size: 100%;

.header {
    padding: 30px 100px;
    width: 68%;
    margin: 0 auto;

    .logo {
        width: 122px; height: 31px;
        margin-right: 10px;
        float: left;
        background: url(logo.png) no-repeat;
    }

    .menu {
        min-width: 500px;
        float: left;

        ul {
            line-height: 5px;
            list-style-type: none;

            li {
                float: left;
                margin-right: 25px;

                a {
                    color: #ffffff;
                    text-decoration: none;
                    font-size: 16px;
                }

                a:hover {
                    background: url(selected.jpg) no-repeat;
                }

                &.last {
                    color: #ffffff;
                    width: 148px; height: 38px;
                    margin-top: -16px;
                    padding: 16px 18px;
                    background: url(buttonbg.jpg) no-repeat;
                }
            }

        }
    }

    .search {

        input {
            width: 200px;
            float: right;
            padding: 5px;
            color: #ffffff;
            background-color: #2c3338;
            border: 1px solid #2c3338;
            background: url(search.png) no-repeat 98%;

        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:26:47.730

在标签上应用 min-width`body`并检查解决此问题的希望。

```
body
{
   min-width:1000px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:14:54.490

你有几个选择：

1.  `min-width`在上设置一个`body`。
2.  使用液体布局。

我会选择前者，因为后者有点过时。

# c++ - C++：初始化指向 int 的指针

> ID：11134796
> 
> 赞同：10
> 
> 时间：2012-06-21T09:01:03.273
> 
> 标签：c++, visual-studio-2010

这是我在 Visual Studio 2010 上运行的示例代码：

```
#include <iostream>

int main()
{
    int **p(NULL);
} 
```

我收到此错误：`error C2059: syntax error : 'constant'`

但是如果我改成`int **p(NULL);`上面`int **p = NULL;`的代码编译就好了。

在 GCC（版本：4.4.2）上检查了这一点，两者都工作正常。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:17:30.650

VC++ 编译器似乎对指针指针的初始化感到困惑......

例如，这有效

```
int (**p)(NULL); 
```

这些不

```
int *i;
int **p(&i);
int **o(NULL); 
```

这虽然有效

```
int (**p)(&i);
typedef int* intp;
intp *o(NULL); 
```

等等......只要存在两个**，模式就会初始化失败！我猜是个bug！MSVC 团队的某个人可能能够确认

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:14:03.553

这要么是编译器本身的错误，要么可能是您做了一些事情并询问了其他事情。

MSVC10 支持 C++11 的一些特性，例如：

```
int **p1 = nullptr;
int **p2{}; //initialized to nullptr! 
```

您可以尝试其中任何一种。两者都很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:30:33.790

看起来，Visual Studio 有缺陷，如果我使用 c++ 编译 @ [http://codepad.org/](http://codepad.org/)并运行以下代码，它就可以工作

```
int main() 
{     
    int **p(NULL); 
    return 0;
} 
```

使用 g++ 编译器也同样有效。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-06-21T09:07:57.453

你得到一个语法错误：显然 NULL 没有定义。您应该包括 cstdlib。

# ruby - 直接修改 Gemfile.lock 会发生什么？

> ID：11134802
> 
> 赞同：15
> 
> 时间：2012-06-21T09:01:11.933
> 
> 标签：ruby, gem

自第二次`bundle install`执行以来，只要 Gemfile 没有更改，就会从 Gemfile.lock 加载依赖项。

但我想知道如何检测这两个文件之间的更改。

例如，如果我将新的依赖项直接添加到 Gemfile.lock 中而不将其添加到 Gemfile 中（与最佳实践相反，因为 Gemfile.lock 是从 Gemfile 自动生成的），是否会`bundle install`认为 Gemfile 已更改？

实际上，`bundle install`进程是否会比较整个 Gemfile 和 Gemfile.lock 树以检测更改？

如果是这样，即使我直接将依赖项添加到 Gemfile.lock，Gemfile 也会被检测为已更改（因为不同）并会重新擦除 Gemfile.lock（因此丢失添加的依赖项......）

`bundle install`第二次上线以来的流程是怎样的？

更清楚地说，我的问题是：

更改仅基于 Gemfile 吗？这意味着捆绑器会保留每个执行编号 N 的 Gemfile 快照，`bundle install`并且仅将其与`bundle install`执行 N+1 进行比较？

或者在 bundler 内存中没有创建快照，并且 bundler 每次都会与 Gemfile.lock 进行比较，以检测是否必须将 Gemfile 视为已更改。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-21T10:16:07.633

如果您编辑 Gemfile.lock，那么 Rails 应用程序将依赖于其他版本的 gems……在这种情况下，您的 gem 版本控制系统的完整性将被破坏。直接编辑 Gemfile.lock 文件是一个非常非常糟糕的主意。

拜托，做个好人，只和 Gemfile 做交易

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-19T15:14:26.257

我知道这个问题很老了，但我最近不得不处理这个问题，所以我给出了自己的答案。Omniauth 最近更新到版本 1.3.2 以修补安全问题。我的任务是将 Omniauth 更新到这个新的补丁版本，但是在检查我们的 Gemfile 后，我意识到我们没有那个 Gem。所以我说好吧，也许我可以将 Gemfile.lock 上的版本从 1.3.1 切换到 1.3.2。长话短说，那会奏效，但事实证明我不必那样做。我最终做的是发出以下命令

`bundle update omniauth --patch`

这导致了我要手动进行的相同更改：

```
-    omniauth (1.3.1)
+    omniauth (1.3.2) 
```

也就是说，如果您认为需要对 Gemfile.lock 进行更改，则可能有一种方法可以在不触及 Gemfile.lock 本身的情况下进行更改。只要去做`bundle --help`，你可能会找到并选择去做你想要达到的目标。

# c# - 将文件中的浮点像素数据读回 C#

> ID：11134806
> 
> 赞同：0
> 
> 时间：2012-06-21T09:01:33.100
> 
> 标签：c#, c++, image

在 C++ 中，我将浮点图像写入文件：

```
FILE* fp = fopen("image.fft", "wb");

float* pixels = getPixel();

fwrite((unsigned char*)pixels, sizeof(pixels), width*height, fp); 
```

为了分析图像，我们需要将浮动图像读入 C#。我不知道如何将浮动图像“image.fft”读入 C#。我知道浮动图像的大小宽度和高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:12:24.800

使用 Bitmap 类获取和设置像素以获取更多信息，请遵循[此](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.setpixel.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:16:18.930

您可以使用此 bimap 构造函数 [http://msdn.microsoft.com/en-us/library/zy1a2d14.aspx](http://msdn.microsoft.com/en-us/library/zy1a2d14.aspx)，只需使用 GCHandle 从文件中读取字节数组以获取 IntPtr 或类似的东西：

```
 Bitmap BytesToBitmap (byte[] bmpBytes, Size imageSize)
{
    Bitmap bmp = new Bitmap (imageSize.Width, imageSize.Height);

    BitmapData bData  = bmp.LockBits (new Rectangle (0,0, bmp.Size.Width,bmp.Size.Length),
        ImageLockMode.WriteOnly,
        PixelFormat.Format32bppRgb);

    // Copy the bytes to the bitmap object
    Marshal.Copy (bmpBytes, 0, bData.Scan0, bmpBytes.Length);
    bmp.UnlockBits(bData);
    return bmp;
} 
```

# c# - T4 抑制错误消息“ErrorGeneratingOutput”

> ID：11134809
> 
> 赞同：3
> 
> 时间：2012-06-21T09:01:35.927
> 
> 标签：c#, .net, templates, t4

我正在使用一组 T4 脚本，这些脚本在 EF 应用程序中为我的实体生成部分类。

因为部分类需要驻留在同一个程序集中，所以脚本与实体类驻留在同一个项目中。它还需要在执行时访问已编译的程序集。

发生错误时，脚本将失败并输出“ErrorGeneratingOutput”。这将导致整个项目无法编译，因为生成的文件是一个 .cs 文件，具有（在那个时间点）无效的内容。

所以这是一个恶性依赖循环，只有我手动从生成的文件中删除错误信息，然后触发构建才能打破。

如果有办法抑制错误消息（或用空字符串替换它），我的生活会轻松得多。

所以问题是：我可以更改 t4 脚本的错误处理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:54:50.180

在某些情况下，这个问题很容易解决。

就我而言，问题在于加载 T4 脚本所在项目的 DLL。程序集指令位于脚本的顶部区域（第 5 行）。所以我将输出扩展名更改为txt。

```
<#@ template language="C#" hostspecific="True" debug="True" #>
<#@ output extension="txt" #>
<#@assembly name="invalidAssemblyName"#> 
```

然后我使用 EntityFrameworkFileManager 将实际输出放入另一个文件中。

```
<#@ include file="EF.Utility.CS.ttinclude"#>
<#
var fileManager = EntityFrameworkTemplateFileManager.Create(this);
fileManager.StartHeader();
fileManager.StartNewFile("Output.cs");
#>
//content
<#
fileManager.Process();
#> 
```

当错误发生时，无法加载程序集，ErrorGeneratingOutput 消息将打印到默认的 .txt 文件中，在该文件中不会产生编译问题。如果可以加载程序集，则将输出打印到 Output.cs 文件。

这样在修复初始问题后可以构建项目，开发人员也不必关心ErrorGeneratingOutput问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:45:42.013

我不知道是否有可能，但是，您可以将 T4​​ 脚本放在一个单独的项目中，并使用 MSBuild 任务将您生成的文件复制到您的 EF 实体项目中。

您的解决方案应包含

1.  您的 EF 实体项目，我们称之为**实体**
2.  一个实体生成器项目（你将把你的 T4 脚本放在这里），例如称之为**EntitiesGenerator**

您还需要为自定义 MSBuild 任务创建一个项目，该任务会将您生成的 C# 文件复制到您的“实体”项目中

为此，请创建一个类库项目**MyBuildProcess**

参考以下程序集：

*   Microsoft.Build.Framework（位于 C:\Windows\Microsoft.NET\Framework\v4.0.30319）

现在，让我们编写自定义任务向您的项目添加一个类文件，例如 CopyGeneratedEntities.cs

```
using System;
using Microsoft.Build.Framework;
using System.IO;

namespace MyBuildProcess
{
    public class CopyGeneratedEntities : ITask
    {
        private IBuildEngine _buildEngine;
        public IBuildEngine BuildEngine
        {
            get { return _buildEngine; }
            set { _buildEngine = value; }
        }

        private ITaskHost _hostObject;
        public ITaskHost HostObject
        {
            get { return _hostObject; }
            set { _hostObject = value; }
        }

        public bool Execute()
        {
        // Copy generated Product entity to EF project
            if (File.Exists(@"C:\MySolution\EntitiesGenerator\ProductEntity.cs"))
            {
                File.Copy(@"C:\MySolution\EntitiesGenerator\ProductEntity.cs",
                    @"C:\MySolution\Entities\ProductEntity.cs", true);
            }

            return true;
        }
    }
} 
```

构建你的项目

现在编辑与您的 T4 项目 ( **EntitiesGenerator ) 相对应的****.csproj**文件，并通过在标签下方添加以下内容来引用自定义任务：**`<Project ... >`**

 **```
<UsingTask AssemblyFile="C:\MySolution\Libs\MyBuildProcess.dll" 
    TaskName="MyBuildProcess.CopyGeneratedEntities" /> 
```

并像这样调用任务（在 csproj 文件的末尾，在 之前`</Project>`）：

```
<Target Name="AfterBuild">`
    <CopyGeneratedEntities />
</Target> 
```

现在，当您构建**EntitiesGenerator**项目时，T4 会呈现您的实体，并且一旦构建结束，您的自定义任务就会被调用，并且您的文件会被复制到您的“实体”项目中。

您只需要在第一代之后手动将生成的 C# 文件引用到您的实体项目，然后它们就会被简单地覆盖。

有关 MSBuild 的更多信息，请参阅。

[MSBuild 团队博客 - 如何：实施自定义任务](http://blogs.msdn.com/b/msbuild/archive/2006/01/21/515834.aspx "MSBuild 团队博客 - 如何：实施自定义任务 - 第一部分")

[Microsoft.Build 命名空间](http://msdn.microsoft.com/en-us/library/gg145008 "Microsoft.Build 命名空间")**

# html - css 文本阴影

> ID：11134811
> 
> 赞同：4
> 
> 时间：2012-06-21T09:01:39.657
> 
> 标签：html, css

有没有办法`text-shadow`在 CSS 中添加类似于在 Photoshop 中创建的文本阴影？我已经尝试过了，但生成的阴影仍然与 Photoshop 中的不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:04:49.700

简短的回答是**否定**的。

Adobe Photoshop 和所有不同的浏览器对阴影的解释各不相同。你必须用你的眼睛来判断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T09:29:56.813

嘿，不，你可以这样做

```
.div{
box-shadow:0 0 0 0 rgba(0,0,0,1); //  outer shadow of box
box-shadow:0 0 0 0 rgba(0,0,0,1) inset; // inner shadow of box
text-shadow:0 0 0 rgba(0,0,0,1); // for text shadow 
} 
```

更多信息点击这里[http://css-tricks.com/snippets/css/css-text-shadow/](http://css-tricks.com/snippets/css/css-text-shadow/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:24:57.613

试试这样

```
yourDiv
{
box-shadow: 8px 8px 5px #000000;
} 
```

根据设计尝试不同的像素，以及颜色，使用颜色选择器检查确切的颜色代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:07:10.057

如上所述，它根本不可能。由于浏览器渲染阴影的方式与 Photoshop 不同。

# r - 如何在R中找到字符串的长度

> ID：11134812
> 
> 赞同：385
> 
> 时间：2012-06-21T09:01:40.893
> 
> 标签：r, string, unicode, string-length

如何找到字符串的长度（即字符串中的字符数）而不在R中拆分它？我知道如何找到列表的长度，但不知道字符串的长度。

那么Unicode字符串呢？如何找到 Unicode 字符串中的长度（以字节为单位）和字符数（符文、符号）？

*相关问题：*

*   [如何在R中找到Unicode字符串中的“真实”字符数](https://stackoverflow.com/questions/42481827/how-to-find-the-real-number-of-characters-in-a-unicode-string-in-r)

* * *

## 回答 #1

> 赞同：470
> 
> 时间：2012-06-21T09:04:45.930

见`?nchar`。例如：

```
> nchar("foo")
[1] 3
> set.seed(10)
> strn <- paste(sample(LETTERS, 10), collapse = "")
> strn
[1] "NHKPBEFTLY"
> nchar(strn)
[1] 10 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2014-03-14T09:36:02.750

使用`stringi`包和`stri_length`函数

```
> stri_length(c("ala ma kota","ABC",NA))
[1] 11  3 NA 
```

为什么？因为它是现有解决方案中最快的:)

```
require(microbenchmark)
require(stringi)
require(stringr)
x <- c(letters,NA,paste(sample(letters,2000,TRUE),collapse=" "))
microbenchmark(nchar(x),str_length(x),stri_length(x))
Unit: microseconds
           expr    min     lq  median      uq     max neval
       nchar(x) 11.868 12.776 13.1590 13.6475  41.815   100
  str_length(x) 30.715 33.159 33.6825 34.1360 173.400   100
 stri_length(x)  2.653  3.281  4.0495  4.5380  19.966   100 
```

也适用于 NA

```
nchar(NA)
## [1] 2
stri_length(NA)
## [1] NA 
```

### 编辑 2021

`NA`如果您使用的是最新的 R 版本，则参数不再有效。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-06-21T09:18:01.103

你也可以使用这个`stringr`包：

```
library(stringr)
str_length("foo")
[1] 3 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-06-21T09:07:41.307

```
nchar("STRING") 
```

看看[这个](http://r.seanrmccorkle.net/Doc/string_operations.html)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-03-09T09:48:09.700

keepNA = TRUE 选项可防止 NA 出现问题

```
nchar(NA)
## [1] 2
nchar(NA, keepNA=TRUE)
## [1] NA 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-02-09T20:12:23.903

```
nchar(YOURSTRING) 
```

您可能需要先转换为字符向量；

```
nchar(as.character(YOURSTRING)) 
```

# linux - 检查虚拟内存地址的有效性

> ID：11134813
> 
> 赞同：2
> 
> 时间：2012-06-21T09:01:47.440
> 
> 标签：linux, linux-kernel, linux-device-driver, kernel

我正在遍历 VMALLOC_START 和 VMALLOC_END 之间的页面，我想检查我每次获得的地址是否有效。我该如何管理？

我像这样遍历页面：

```
unsigned long *p;

    for(p = (unsigned long *) VMALLOC_START; p <= (unsigned long *) (VMALLOC_END - PAGE_SIZE); p += PAGE_SIZE)
    {
            //How to check if p is OK to access it?     

    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:46:18.180

最简单的方法是尝试将其变红，并捕获异常。

捕获异常是通过`__ex_table`使用内联汇编在部分中定义一个条目来完成的。
异常表条目包含一个指向内存访问指令的指针和一个指向恢复地址的指针。如果这条指令发生段错误，EIP 将被设置为恢复地址。

像这样的东西（我没有测试这个，我可能遗漏了一些东西）：

```
void *ptr=whatever;
int ok=1;
asm(
    "1: mov (%1),%1\n"    // Try to access
    "jmp 3f\n"            // Success - skip error handling
    "2: mov $0,%0\n"      // Error - set ok=0
    "3:\n"                // Jump here on success
    "\n.section __ex_table,\"a\""
    ".long 1b,2b\n"       // Use .quad for 64bit.
    ".prev\n"
    :"=r"(ok) : "r"(ptr)
); 
```

# iphone - Twitter.framework 图片和消息问题

> ID：11134815
> 
> 赞同：0
> 
> 时间：2012-06-21T09:01:57.750
> 
> 标签：iphone, image, ios5, twitter

我正在使用 Twitter.framework 将带有消息的图像发布到 Twitter。但我在我的 Twitter 帐户中看到没有消息的图像。我使用此代码

```
 // Create an account store object.
        ACAccountStore *accountStore = [[ACAccountStore alloc] init];

        // Create an account type that ensures Twitter accounts are retrieved.
        ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

        // Request access from the user to use their Twitter accounts.
        [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
            if(granted) {
                // Get the list of Twitter accounts.
                NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

                if ([accountsArray count] > 0) {
                    // Grab the initial Twitter account to tweet from.
                    ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                    UIImage *image =[UIImage imageNamed:@"logo"];

                    TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"https://upload.twitter.com/1/statuses/update_with_media.json"] 
                                                                         parameters:[NSDictionary dictionaryWithObjectsAndKeys:@"Hello. This is a tweet.", @"status", @"My message", @"message", nil] requestMethod:TWRequestMethodPOST];

                    // "http://api.twitter.com/1/statuses/update.json" 

                    [postRequest addMultiPartData:UIImagePNGRepresentation(image) withName:@"media" type:@"multipart/png"];

                    // Set the account used to post the tweet.
                    [postRequest setAccount:twitterAccount];

                    [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                        NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                        NSLog(@"output = %@\n\n", output);
                    }];
                }
            }
        }]; 
```

我在推特上看到的：

![在此处输入图像描述](../Images/1646307b991ce1f62afd10004c643b4c.png)

当我展开时：

![在此处输入图像描述](../Images/9c8ba6aeb10103205133439b7a29e279.png)

但我没有看到消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:09:22.537

尝试使用它的以下代码，它工作正常。希望它也能帮助你

```
-(IBAction)goTweet:(id)sender{

if ([TWTweetComposeViewController canSendTweet])
{
    TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:[NSString stringWithFormat:@"YOUR TWEET HERE"]];

    [tweetSheet addImage:[UIImage imageNamed:@"site-logo.jpg"]];

    [self presentModalViewController:tweetSheet animated:YES];
    [shareLoading stopAnimating];
}
else
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Twitter" 
                                                        message:@"Sorry, you can't send a Tweet yet, please make sure you are connected to the internet and have at least one Twitter account set up on your phone in Settings --> Twitter." 
                                                       delegate:self 
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil];
    [alertView show];

}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:50:25.907

我发现，如何发送带有图像的文本：添加此代码

```
[postRequest addMultiPartData:[@"This photo is taken with my iPhone using nPassword!" dataUsingEncoding:NSUTF8StringEncoding] withName:@"status" type:@"multipart/form-data"]; 
```

# asp.net - 如何从 asp.net MVC 中的 FormsAuthentication 页面获取用户 ID？

> ID：11134818
> 
> 赞同：0
> 
> 时间：2012-06-21T09:02:02.277
> 
> 标签：asp.net, asp.net-mvc, forms-authentication

我制作了一个使用 FormsAuthentication 的网页。现在我需要获取用户的用户 ID（如果用户已登录）

如何获得这些？我试图通过访问它，`FormsAuthentication`但没有方法喜欢：`getUserId()`

任何解决方案？顺便说一句，我需要控制器中的 id 而不是我的视图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:05:48.067

```
if (HttpContext.Current.User.Identity.IsAuthenticated)
{
    var id = HttpContext.Current.User.Identity.Name;
    // Do stuf...
} 
```

# iphone - 在 uitextview 中显示微笑

> ID：11134819
> 
> 赞同：1
> 
> 时间：2012-06-21T09:02:09.340
> 
> 标签：iphone, ios, uitextview

知道如何在 UITextView 中添加微笑/图像吗？为了显示它们，我正在使用带有自定义 UILabel 的 Three20 库，但是有没有办法将它们也添加到 UITextView 中？我对编辑字段、添加文本和图像感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:20:01.533

```
\ue415  \ue056  \ue057  \ue414  \ue405  \ue106  \ue418
\ue417  \ue40d  \ue40a  \ue404  \ue105  \ue409  \ue40e
\ue402  \ue108  \ue403  \ue058  \ue407  \ue401  \ue40f
\ue40b  \ue406  \ue413  \ue411  \ue412  \ue410  \ue107
\ue059  \ue416  \ue408  \ue40c  \ue11a  \ue10c  \ue32c
\ue32a  \ue32d  \ue328  \ue32b  \ue022  \ue023  \ue327
\ue329  \ue32e  \ue32f  \ue335  \ue334  \ue021  \ue337
\ue020  \ue336  \ue13c  \ue330  \ue331  \ue326  \ue03e
\ue11d  \ue05a  \ue00e  \ue421  \ue420  \ue00d  \ue010
\ue011  \ue41e  \ue012  \ue422  \ue22e  \ue22f  \ue231
\ue230  \ue427  \ue41d  \ue00f  \ue41f  \ue14c  \ue201
\ue115  \ue428  \ue51f  \ue429  \ue424  \ue423  \ue253
\ue426  \ue111  \ue425  \ue31e  \ue31f  \ue31d  \ue001
\ue002  \ue005  \ue004  \ue51a  \ue519  \ue518  \ue515
\ue516  \ue517  \ue51b  \ue152  \ue04e  \ue51c  \ue51e
\ue11c  \ue536  \ue003  \ue41c  \ue41b  \ue419  \ue41a
\ue04a  \ue04b  \ue049  \ue048  \ue04c  \ue13d  \ue443
\ue43e  \ue04f  \ue052  \ue053  \ue524  \ue52c  \ue52a
\ue531  \ue050  \ue527  \ue051  \ue10b  \ue52b  \ue52f
\ue528  \ue01a  \ue134  \ue530  \ue529  \ue526  \ue52d
\ue521  \ue523  \ue52e  \ue055  \ue525  \ue10a  \ue109
\ue522  \ue019  \ue054  \ue520  \ue306  \ue030  \ue304
\ue110  \ue032  \ue305  \ue303  \ue118  \ue447  \ue119
\ue307  \ue308  \ue444  \ue441           
\ue436  \ue437  \ue438  \ue43a  \ue439  \ue43b  \ue117
\ue440  \ue442  \ue446  \ue445  \ue11b  \ue448  \ue033
\ue112  \ue325  \ue312  \ue310  \ue126  \ue127  \ue008
\ue03d  \ue00c  \ue12a  \ue00a  \ue00b  \ue009  \ue316
\ue129  \ue141  \ue142  \ue317  \ue128  \ue14b  \ue211
\ue114  \ue145  \ue144  \ue03f  \ue313  \ue116  \ue10f
\ue104  \ue103  \ue101  \ue102  \ue13f  \ue140  \ue11f
\ue12f  \ue031  \ue30e  \ue311  \ue113  \ue30f  \ue13b
\ue42b  \ue42a  \ue018  \ue016  \ue015  \ue014  \ue42c
\ue42d  \ue017  \ue013  \ue20e  \ue20c  \ue20f  \ue20d
\ue131  \ue12b  \ue130  \ue12d  \ue324  \ue301  \ue148
\ue502  \ue03c  \ue30a  \ue042  \ue040  \ue041  \ue12c
\ue007  \ue31a  \ue13e  \ue31b  \ue006  \ue302  \ue319
\ue321  \ue322  \ue314  \ue503  \ue10e  \ue318  \ue43c
\ue11e  \ue323  \ue31c  \ue034  \ue035  \ue045  \ue338
\ue047  \ue30c  \ue044  \ue30b  \ue043  \ue120  \ue33b
\ue33f  \ue341  \ue34c  \ue344  \ue342  \ue33d  \ue33e
\ue340  \ue34d  \ue339  \ue147  \ue343  \ue33c  \ue33a
\ue43f  \ue34b  \ue046  \ue345  \ue346  \ue348  \ue347
\ue34a  \ue349                   
\ue036  \ue157  \ue038  \ue153  \ue155  \ue14d  \ue156
\ue501  \ue158  \ue43d  \ue037  \ue504  \ue44a  \ue146
\ue50a  \ue505  \ue506  \ue122  \ue508  \ue509  \ue03b
\ue04d  \ue449  \ue44b  \ue51d  \ue44c  \ue124  \ue121
\ue433  \ue202  \ue135  \ue01c  \ue01d  \ue10d  \ue136
\ue42e  \ue01b  \ue15a  \ue159  \ue432  \ue430  \ue431
\ue42f  \ue01e  \ue039  \ue435  \ue01f  \ue125  \ue03a
\ue14e  \ue252  \ue137  \ue209  \ue154  \ue133  \ue150
\ue320  \ue123  \ue132  \ue143  \ue50b  \ue514  \ue513
\ue50c  \ue50d  \ue511  \ue50f  \ue512  \ue510  \ue50e
\ue21c  \ue21d  \ue21e  \ue21f  \ue220  \ue221  \ue222
\ue223  \ue224  \ue225  \ue210  \ue232  \ue233  \ue235
\ue234  \ue236  \ue237  \ue238  \ue239  \ue23b  \ue23a
\ue23d  \ue23c  \ue24d  \ue212  \ue24c  \ue213  \ue214
\ue507  \ue203  \ue20b  \ue22a  \ue22b  \ue226  \ue227
\ue22c  \ue22d  \ue215  \ue216  \ue217  \ue218  \ue228
\ue151  \ue138  \ue139  \ue13a  \ue208  \ue14f  \ue20a
\ue434  \ue309  \ue315  \ue30d  \ue207  \ue229  \ue206
\ue205  \ue204  \ue12e  \ue250  \ue251  \ue14a  \ue149
\ue23f  \ue240  \ue241  \ue242  \ue243  \ue244  \ue245
\ue246  \ue247  \ue248  \ue249  \ue24a  \ue24b  \ue23e
\ue532  \ue533  \ue534  \ue535  \ue21a  \ue219  \ue21b
\ue02f  \ue024  \ue025  \ue026  \ue027  \ue028  \ue029
\ue02a  \ue02b  \ue02c  \ue02d  \ue02e  \ue332  \ue333
\ue24e  \ue24f  \ue537 
```

检查此链接以获取相应的图像[Emoji Alerts](http://web.archive.org/web/20120830031251/http://www.easyapns.com/iphone-emoji-alerts)

您可以使用上述任何字符集，例如... [TextViewVar setText:@"\ue333"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:07:30.460

使用此代码

```
 [aboutBni setText:@"\ue415"] 
```

# mysql - Mysql求和两列时间戳

> ID：11134824
> 
> 赞同：0
> 
> 时间：2012-06-21T09:02:17.417
> 
> 标签：mysql, time

我在时间表中的项目中有每天的时间戳列 Mon、Tue、wed、thu、fri、sat、sun

我需要通过添加项目的所有列来获得总小时数。

我的实际查询是这样的 -

我的实际查询是这样的 -`SELECT time(SEC_TO_TIME(SUM(TIME_TO_SEC(fri))) + SEC_TO_TIME(SUM(TIME_TO_SEC(thu))) + SEC_TO_TIME(SUM(TIME_TO_SEC(tue)))) FROM timesheets WHERE project_id = 5`

任何人都可以帮助我编写确切的查询来获取所有列的时间和总和

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:08:07.873

你有没有尝试过 ？

```
SELECT ADDTIME(time1, time2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:48:18.730

我认为不存在需要两个以上参数来求和的时间函数。
以下片段可能对您有所帮助：

```
select 
    addtime( mon, addtime( tue, addtime( wed, addtime( thu, 
             addtime( fri, addtime( sat, sun ) ) ) ) ) ) total_time_spent 
```

`hours:minutes:seconds`上面的查询返回格式花费的总时间。
要仅选择总共花费的小时数，请使用`time_format`函数。

```
select time_format( total_time_spent, '%H' ) total_hours_spent 
```

请注意，此查询仅返回所花费总时间的小时数部分。如果有的话，你会失去分钟和秒。

**更新**：
以下代码段可以为您提供花费的总小时数和分钟数。

```
select 
    time_format( 
        addtime( mon, addtime( tue, addtime( wed, addtime( thu, 
            addtime( fri, addtime( sat, sun ) ) ) ) ) ),
        '%H:%i' ) total_hours_and_mins_spent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:04:50.303

[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)中有很长的一章是关于日期和时间的，包括解析、类型、转换和格式。

将您的列投射到`TIME`类型并从中受益：

```
SELECT Mon + Tue 
```

# extjs4 - 工具提示中的 ExtJS 4.1 条件

> ID：11134828
> 
> 赞同：0
> 
> 时间：2012-06-21T09:02:28.730
> 
> 标签：extjs4

我正在尝试在工具提示模板中创建一个条件。

我已经像这样声明了我的模板：

```
 tooltipTpl: new Ext.XTemplate(
    '<tpl for=".">',
        '<dl class="eventTip">',
        '<tpl if="values.getLength() == 1">',
            '<dt class="icon-clock">Time</dt><dd>{[Ext.Date.format(values.start, "d-m")]} - {[Ext.Date.format(Ext.Date.add(values.end,Ext.Date.SECOND,-1), "d-m")]}</dd>',
        '</tpl>',
        '<tpl if="values.getLength() &gt; 1">',
            '<dt class="icon-clock">Day</dt><dd>{[Ext.Date.format(values.start, "d-m")]}</dd>',
        '</tpl>',
        '<dt class="icon-task">Status</dt><dd>{Name}</dd>',
        '</dl>',
    '</tpl>'
        ).compile(), 
```

背后的想法是，如果事件超过 1 天，则能够显示 2 个日期（开始和结束），如果是一天事件，则仅显示该日期。

我已经这样声明了我的模型：

```
Ext.define('Urlopy.Model.Plan', {
        extend : 'Sch.model.Event',
        idProperty : 'id',
        resourceIdField : 'userID',
        startDateField  : 'start',
        endDateField    : 'end',
        fields : [{ name : 'id', type : 'int'}, 
                  { name : 'userID', type : 'string'},
                  { name : 'start', type : 'date',  dateFormat : 'MS'},
                  { name : 'end', type : 'date',    dateFormat : 'MS'},
                  { name : 'Name'}],
        getLength : function() {
            return Sch.util.Date.getDurationInDays(this.get('start'), this.get('end'));
        }
    }); 
```

显示了我的工具提示的第二行，但没有显示日期行。看起来我无法从模板中的模型调用函数。

如何解决这个问题？是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:16:30.427

问题的答案 - 如果可以从作为数据对象传递给模板的对象运行函数，是的。该函数将被调用。

您可以在任何浏览器控制台（如 FireBug）中运行以下简短的代码片段（当然您需要在具有 extjs 的页面上打开控制台，在 extjs 文档页面上简单打开控制台）来查看它。

代码片段：

```
var t = new Ext.XTemplate(
    '<tpl for=".">',
      '\n===',
          '<tpl if="values.getLength() == 1"> ONE </tpl>',
          '<tpl if="values.getLength() &gt; 1"> TWO </tpl>',
          ' *{name}* ',
      '===',
    '</tpl>'
).compile();

var a = [
    {name: 'Foo', getLength: function() {return 1;} },
    {name: 'Boo'}
];

var s = t.apply(a);
console.log(s); 
```

您将看到以下结果：

返回1：

```
=== ONE *Foo* === 
=== *Boo* === 
```

返回 > 1：

```
=== TWO *Foo* === 
=== *Boo* === 
```

我不知道将此模板与基础模型一起使用的*上下文*，也没有向您提供将模型应用于模板的代码。但我很确定模板是模型数据而不是整个模型对象，这就是为什么你可以看到模态字段 {Name} 的第二行。

要克服它，您可以将其自己的方法添加到模板中，例如：

```
//for the simplicity sake I've not pasted the whole template
//also you can call the *this.getLength(values.start, values.end)* 
//and change this method parameters 
var tooltipTpl = new Ext.XTemplate(
  '<tpl for=".">',
  // ... 
    '<tpl if="this.getLength(values) &gt; 1">',
  // ...            
    '</tpl>',
  // ...
  '</tpl>'
,{
  getLength : function(data) {
    //move the model method to the template
    return Sch.util.Date.getDurationInDays(data.start, data.end);  
  }
}).compile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:55:34.550

您可以使用模型的方法..

定义模型静态方法：

```
Ext.define('Urlopy.Model.Plan', {
 //...

 static: {
   getLength: function(data) {
      console.log('data', data);
      console.log(data.start, data.end); 
      return 5; //just test function

   }
 }

 //.....
}); 
```

在模板中使用它：

```
'<tpl if="Urlopy.Model.Plan.getLength(values) == 1">' 
```

所以你可以删除模板的方法。

# reporting-services - 更改 ssrs 图表中的条形填充颜色

> ID：11134829
> 
> 赞同：3
> 
> 时间：2012-06-21T09:02:32.740
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008

[所以发布](https://stackoverflow.com/questions/4993343/ssrs-field-expression-to-change-the-background-color-of-the-cell)

目前我的 RS 图表中有 5 个柱 - 未来可能有 7 个柱或 17 个柱或 27 个柱！

有几个酒吧，我可以有这样的表达：

```
=iif(Fields!Market.Value = "Spain"
,"Gold"
,iif (Fields!Market.Value = "Denmark"
    , "Gray"
    , iif(Fields!Market.Value = "Italy"
        , "Blue"
        , "Purple"
        )
    )
) 
```

如果我无法预测将包含多少个国家 + 我宁愿不必在“绿色”、“红色”等中硬编码，我该如何更改表达式？

我已经尝试过了，但它出错了：

```
=Switch(Mod(Fields!Rank.Value/CDbl(2))=CDbl(0), "Gold", 
   Mod(Fields!Rank.Value/CDbl(3))=CDbl(0), "Gray", 
   Mod(Fields!Rank.Value/CDbl(2))>CDbl(0) "Blue") 
```

以上是完全不正确的语法：这有效：

```
=Switch(CDbl(Fields!Rank.Value Mod 2)=CDbl(0), "Gold", 
   CDbl(Fields!Rank.Value Mod 3)=CDbl(0), "Gray", 
   CDbl(Fields!Rank.Value Mod 2)>CDbl(0), "Blue") 
```

好的 - 上面的运行（不知道如何！）但下面是基于 Dominic Goulet 的帮助，并且非常容易理解并且很好并且可以扩展为更多颜色；这是 5 种颜色的解决方案：

```
=Switch(CDbl(Fields!Rank.Value Mod 5)=CDbl(0), "Gold", 
   CDbl(Fields!Rank.Value Mod 5)=CDbl(1), "Gray", 
   CDbl(Fields!Rank.Value Mod 5)=CDbl(2), "Green", 
   CDbl(Fields!Rank.Value Mod 5)=CDbl(3), "Red", 
   CDbl(Fields!Rank.Value Mod 5)=CDbl(4), "Pink") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:18:55.823

首先，不要使用许多“IIF”，而应该使用“Switch”，这样更精简。

```
Switch(Fields!Market.Value = "Spain", "Gold",
       Fields!Market.Value = "Denmark", "Gray",
       Fields!Market.Value = "Italy", "Blue") 
```

现在，如果您想要每个国家的颜色，您应该将其存储在您的数据库中，并在需要时将其取出。这样，一个国家/地区在您拥有的每份报告中将始终具有相同的颜色。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-25T22:14:50.270

最好创建一个函数。为此，请转到报告属性，选择代码并键入以下示例：

```
Public Function Color(ByVal Index as Integer) as String

Select Case Index
Case = 1        
    return "#a6cee3"    
Case = 2        
    return "#1f78b4"    
Case = 3        
    return "#b2df8a"    
Case = 4        
    return "#33a02c"    
Case = 5        
    return "#fb9a99"    
Case = 6        
    return "#e31a1c"    
Case = 7        
    return "#fdbf6f"    
Case = 8        
    return "#ff7f00"    
Case = 9        
    return "#cab2d6"    
Case = 10       
    return "#6a3d9a"    

End Select

End Function 
```

在“系列属性->选择颜色->颜色的填充选项上选择fx放这个代码

```
=Code.Color(rownumber(nothing)) 
```

每个条都会有一种颜色。

对于我从网站上获取的 HEX 颜色： http: [//colorbrewer2.org/#type=qualitative&scheme=Paired&n=10](http://colorbrewer2.org/#type=qualitative&scheme=Paired&n=10) 它显示了相互匹配的最佳颜色，因此您无需考虑这一点。您可以根据需要添加任意数量的颜色

# c# - 从 C# 中的两个类继承

> ID：11134832
> 
> 赞同：23
> 
> 时间：2012-06-21T09:02:35.987
> 
> 标签：c#, .net

> **可能重复：**
> [C# 中的多重继承](https://stackoverflow.com/questions/178333/multiple-inheritance-in-c-sharp)

我有两个类 A 类和 B 类。这两个类不能相互继承。我正在创建名为 C 类的新类。现在，我想通过继承来实现 A 类和 B 类中的方法。我知道在 C# 中不可能进行多重继承，但还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-21T09:07:33.147

多重继承在 C# 中是不可能的，但是可以使用接口来模拟它，请参阅[C# 的模拟多重继承模式](http://www.codeproject.com/Articles/10072/Simulated-Multiple-Inheritance-Pattern-for-C)。

基本思想是为`B`您希望访问的类上的成员定义一个接口（称为它`IB`），然后通过内部存储一个实例来`C`继承`A`和实现，例如：`IB``B`

```
class C : A, IB
{
    private B _b = new B();

    // IB members
    public void SomeMethod()
    {
        _b.SomeMethod();
    }
} 
```

该页面上还解释了其他几种替代模式。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-21T09:08:22.423

继承的一个常见替代方法是委托（也称为组合）：X“具有”Y 而不是 X“是”Y。因此，如果 A 具有处理 Foos 的功能，而 B 具有处理 Bars 的功能，并且您想要两者都在C中，然后是这样的：

```
public class A() {
  private FooManager fooManager = new FooManager(); // (or inject, if you have IoC)

  public void handleFoo(Foo foo) {
    fooManager.handleFoo(foo);
  }
}

public class B() {
  private BarManager barManager = new BarManager(); // (or inject, if you have IoC)

  public void handleBar(Bar bar) {
    barManager.handleBar(bar);
  }
}

public class C() {
  private FooManager fooManager = new FooManager(); // (or inject, if you have IoC)
  private BarManager barManager = new BarManager(); // (or inject, if you have IoC)

  ... etc
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-21T09:13:35.463

如果你想从字面上使用方法代码`A`，`B`你可以让你的`C`类包含每个的实例。如果您针对接口进行编码`A`，`B`那么您的客户就不需要知道您给他们的是 a`C`而不是 an`A`或 a `B`。

```
interface IA { void SomeMethodOnA(); }
interface IB { void SomeMethodOnB(); }
class A : IA { void SomeMethodOnA() { /* do something */ } }
class B : IB { void SomeMethodOnB() { /* do something */ } }
class C : IA, IB
{
    private IA a = new A();
    private IB b = new B();
    void SomeMethodOnA() { a.SomeMethodOnA(); }
    void SomeMethodOnB() { b.SomeMethodOnB(); }
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-21T09:09:29.680

使用[成分](http://en.wikipedia.org/wiki/Composition_over_inheritance)：

```
class ClassC
{
    public ClassA A { get; set; }
    public ClassB B { get; set; }   

    public C (ClassA  a, ClassB  b)
    {
        this.A = a;
        this.B = b;
    }
} 
```

然后就可以调用了`C.A.DoA()`。您还可以将属性更改为接口或抽象类，例如`public InterfaceA A`或`public AbstractClassA A`。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-21T09:14:41.010

制作两个接口`IA`和`IB`：

```
public interface IA
{
    public void methodA(int value);
}

public interface IB
{
    public void methodB(int value);
} 
```

接下来制作`A`实施`IA`和`B`实施`IB`。

```
public class A : IA
{
    public int fooA { get; set; }
    public void methodA(int value) { fooA = value; }
}

public class B : IB
{
    public int fooB { get; set; }
    public void methodB(int value) { fooB = value; }
} 
```

然后按如下方式实现您的 C 类：

```
public class C : IA, IB
{
    private A _a;
    private B _b;

    public C(A _a, B _b)
    {
        this._a = _a;
        this._b = _b;
    }

    public void methodA(int value) { _a.methodA(value); }
    public void methodB(int value) { _b.methodB(value); }
} 
```

一般来说，这是一个糟糕的设计，因为您可以同时拥有`A`并`B`实现具有相同名称和变量类型的方法，例如`foo(int bar)`，您将需要决定如何实现它，或者您是否只调用`foo(bar)`两者`_a`和`_b`。正如其他地方所建议的那样，您应该考虑 a`.A`和`.B`属性，而不是结合这两个类。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-21T09:04:21.953

您可以为这些基类定义一个基类，`A`并且`B`可以在其中保存它们的*通用*方法/属性/字段。

实施后`C:Base`。

或者为了模拟多重继承，定义一个公共`interface`（s）并在`C`

希望这可以帮助。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-06-21T09:18:48.457

在这种情况下，您的意思是希望 C 类成为 A 和 B 的基类。

```
public abstract class C
{
    public abstract void Method1();

    public abstract void Method2();
}

public class A : C
{
    public override void Method1()
    {
        throw new NotImplementedException();
    }

    public override void Method2()
    {
        throw new NotImplementedException();
    }
}

public class B : C
{
    public override void Method1()
    {
        throw new NotImplementedException();
    }

    public override void Method2()
    {
        throw new NotImplementedException();
    }
} 
```

# django - 我的 heroku cedar 应用未经我的许可就使用了清漆

> ID：11134833
> 
> 赞同：0
> 
> 时间：2012-06-21T09:02:37.237
> 
> 标签：django, heroku, varnish

Heroku 文档说 cedar 应用程序不使用清漆，但我可以清楚地看到我的应用程序 bandtastic.me（一个 django 应用程序）的 http 标头与清漆数据。我正在尝试调试错误，但请求甚至没有命中我的应用程序，所以我不能。

如何为我的应用禁用清漆？我不想要它，特别是因为它引起的这个错误。

在某些情况下，我 POST 到当前 url 时会触发错误，所以我闻到清漆试图使用缓存作为响应，但这显然失败了，我得到了一个通用的 heroku 应用程序错误。日志很清楚，我的调试记录器一无所获，所以它甚至没有击中我的应用程序。

我有这些插件：

*   Heroku Postgres
*   内存卡
*   PG 备份
*   Redis 去
*   共享数据库
*   泽里戈 DNS

这些是强制使用 Varnish 的吗？也许泽里戈...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:22:32.990

您可能正在命名为 proxy.heroku.com 而不是 proxy.herokuapp.com - 您可能会看到标题，但它被绕过了。

# asp.net - asp页面上的登录验证

> ID：11134842
> 
> 赞同：0
> 
> 时间：2012-06-21T09:03:24.693
> 
> 标签：asp.net, login

由于我是 asp 的新手，因此我尝试将名称作为输入，尝试将该名称放入列表中，然后检查列表以查找匹配项。我这样做是为了牢记登录过程的基础，稍后我将尝试实施。我有以下代码：

我做了一个这样的课程：

```
 public class Login
{
    public string name { get; set; }
} 
```

两个按钮事件如下：

```
List<Login> list;
protected void Button1_Click(object sender, EventArgs e)
{
    list = new List<Login>(){ 
        new Login { name = TextBox1.Text },
        new Login { name = "Badhon"}
    };

    Label1.Text = "Inserted";

}

protected void btnLogIn_Click(object sender, EventArgs e)
{

    foreach (var s in list)
    {
        if (s.name == TextBox1.Text)
        {
            Label1.Text = "Found";
            break;
        }
        else
            Label1.Text = "Not Found";

    }

} 
```

当我尝试插入时，它工作正常，但是当单击登录按钮时显示任何错误消息，例如“对象引用未设置为对象的实例”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:07:48.800

每次点击都是一个新的 HTTP 请求。第一个请求中初始化的列表与另一个请求中的列表不同，因为每个请求都将使用自己的 Page 对象实例。

您需要阅读和了解 ASP.net 页面的生命周期：http: [//msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:12:08.170

使`protected`属性存储登录列表

它应该看起来像这样：

```
protected List<Login> LoginStore
{
     get{ return ViewState["store"] =! null ? (List<Login>)ViewState["store"] : new List<Login>; }
     set{ ViewState["store"]=value; }
} 
```

你可以`Session`和 ViewState 一样使用。它会让你的列表不会在你每次做的时候消失`PostBack`。

然后在事件`btnLogIn`

创造`List<Login> list = LoginStore;`

然后制作其余的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:06:18.623

当您按下登录按钮时，您处于与按下第一个按钮时不同的范围内，因此该列表未初始化（每次按下 ASP 按钮时，您都会获得一个新状态：Web 设计为无状态）。

为什么不使用`asp:login`控件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T09:06:27.920

你的代码不完全是它应该是的。您最好去搜索一些（各种）关于如何在 ASP.NET 中处理登录的示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:02:24.717

[点击这里](http://csharpdotnetfreak.blogspot.com/2008/12/user-validation-across-pages-using.html)

为什么要做forloop，在Global.asax中使用会话变量，试试googlin你可以找到很多例子..

# python - 快速 python 前端列表扩展

> ID：11134843
> 
> 赞同：5
> 
> 时间：2012-06-21T09:03:24.803
> 
> 标签：python, performance, list, profiling, concatenation

在python中扩展数组前面的最快方法是什么？假设我有 2 个数组：a 和 b。我想以最快的方式 a = b+a （b 不应该改变）。

我的小基准：

测试1：

```
a,b = [],[]
for i in range(0,100000):
    a.append(i)
    b.append(i)

def f(a,b):
    for i in range(0,100):
        a=a+b

import cProfile
cProfile.run('f(a,b)') 
```

时间：~12 秒

测试2：

```
a,b = [],[]
for i in range(0,100000):
    a.append(i)
    b.append(i)

def f(a,b):
    for i in range(0,100):
        a[0:0] = b

import cProfile
cProfile.run('f(a,b)') 
```

时间：~1.5s

测试3：

```
a,b = [],[]
for i in range(0,100000):
    a.append(i)
    b.append(i)

lenb = len(b)
def f(a,b):
    for i in range(0,100):
        b.extend(a)
        # do something with b
        b = b[:lenb]

import cProfile
cProfile.run('f(a,b)') 
```

时间：~0.4s

但我认为它应该更快，因为列表连接应该作为少数基础指针的更改。下面的代码是最快的，但改变的是 b，而不是 a（所以它不适合我们的目的）：测试“错误”：

```
a,b = [],[]
for i in range(0,100000):
    a.append(i)
    b.append(i)

def f(a,b):
    for i in range(0,100):
        b.extend(a)

import cProfile
cProfile.run('f(a,b)') 
```

时间：~0.13s

所以理论上应该有一种方法可以在测试“错误”的时候延长前面的时间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T09:06:55.343

绝对最快的方法是使用[`collections.deque`](http://docs.python.org/library/collections.html#collections.deque)针对这种用途进行了优化的 a ，并且具有调用的方法`.appendleft`并使`.extendleft`代码变得美观和可读 -`appendleft`完全按照它在锡上所说的那样做（即，它附加到双端队列的左侧） , 并且`extendleft`相当于：

```
def extendleft(self, other)
    for item in other:
        self.appendleft(c) 
```

所以，`a = b+a`将被拼写：

```
a.extendleft(reversed(b)) 
```

# c - C中按位运算后的类型转换警告

> ID：11134844
> 
> 赞同：11
> 
> 时间：2012-06-21T09:03:29.730
> 
> 标签：c, type-conversion, bit-manipulation

你如何解释第 7 行收到警告，而不是第 5 行或第 6 行？

```
int main()
{
    unsigned char a = 0xFF;
    unsigned char b = 0xFF;
    a = a | b;                        // 5: (no warning)
    a = (unsigned char)(b & 0xF);     // 6: (no warning)
    a = a | (unsigned char)(b & 0xF); // 7: (warning)
    return 0;
} 
```

在 32 位架构（Windows PC）上编译时的 GCC 4.6.2 输出：

```
gcc -c main.c --std=c89 -Wall -Wextra -Wconversion -pedantic
main.c: In function 'main':
main.c:7:11: warning: conversion to 'unsigned char' from 'int' may alter its value [-Wconversion] 
```

如果这有助于您理解我的问题，我是这样看的（可能不正确！）：

我想在 32 位机器上操作是在 32 位数字上完成的。由于`unsigned char`适合 32-bit `int`，因此运算结果为 32-bit `int`。但由于 GCC 没有在第 5 行和第 6 行给出警告，我想还有其他事情发生：

**第 5 行：** GCC 认为 (uchar) OR (uchar) 永远不会大于 MAX(uchar)，所以没有警告。

**第 6 行：** GCC 认为 (uchar) AND 0xF 永远不会大于 MAX(uchar)，所以没有警告。甚至不需要显式强制转换。

**第 7 行：**基于上述假设：AND 不应该发出警告（从第 6 行开始），或者也不应该发出警告（从第 5 行开始）。

我想我的逻辑在那里的某个地方有问题。帮助我理解编译器的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:44:03.780

编译器是由人构建的，他们没有无限的时间来找出所有算术可能性来决定，哪些情况值得发出警告。

所以我相信（注意意见）编译器工程师会采取以下方式：

*   如果代码看起来可能是错误的，通常会发出警告。
*   找到所有可以更正编译器以使其轻松工作的明显情况。
*   将其余的警告保留为误报，因为该人要么知道他在做什么，要么会因为编译器发出警告而松了一口气。

我希望人们编写代码，其中要么将结果转换为，要么`(unsigned char)`最外层的运算符用常量屏蔽所有更高的字节。

*   `a = (unsigned char) ( /* some obscure bit-wise expressoin */ );`那么就可以了
*   `a = 0xff & ( /* some obscure bit-wise expressoin */ );`还可以

如果您知道您的编译器正确地翻译了这两种模式，那么其他情况就不应该打扰您太多。

我见过编译器会发出警告，因为`a = a | b;`GCC 不发出警告是免费的奖励。可能是，gcc 只是推断出常量分配，因此用已知可以毫无问题地工作的方式`a | b`替换它。`0xff | 0xff`如果发生这种情况，尽管我不知道为什么它不能`a`在其他语句中导出常数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:54:21.937

按位运算符 & 的返回类型是整数。每当您将 int（4 个字节）转换为 char 或 unsigned char（1 个字节）时，它都会给您警告。

所以这与按位运算符无关，它与从 4 字节变量到 1 字节变量的类型转换有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:05:55.907

我使用 linux x86_64，GCC 4.70。并得到同样的错误。我编译代码，并使用 gdb 反汇编执行文件。这是我得到的。

```
(gdb) l
1   int main(){
2     unsigned char a = 0xff;
3     unsigned char b = 0xff;
4     a = a | b;
5     a = (unsigned char)(b & 0xf);
6     a |= (unsigned char)(b & 0xf); 
7     return 0;
8   }
(gdb) b 4
Breakpoint 1 at 0x4004a8: file test.c, line 4.
(gdb) b 5
Breakpoint 2 at 0x4004af: file test.c, line 5.
(gdb) b 6
Breakpoint 3 at 0x4004b9: file test.c, line 6.
(gdb) r
Starting program: /home/spyder/stackoverflow/a.out 

Breakpoint 1, main () at test.c:4
4     a = a | b;
(gdb) disassemble 
Dump of assembler code for function main:
   0x000000000040049c <+0>: push   %rbp
   0x000000000040049d <+1>: mov    %rsp,%rbp
   0x00000000004004a0 <+4>: movb   $0xff,-0x1(%rbp)
   0x00000000004004a4 <+8>: movb   $0xff,-0x2(%rbp)
=> 0x00000000004004a8 <+12>:    movzbl -0x2(%rbp),%eax
   0x00000000004004ac <+16>:    or     %al,-0x1(%rbp)
   0x00000000004004af <+19>:    movzbl -0x2(%rbp),%eax
   0x00000000004004b3 <+23>:    and    $0xf,%eax
   0x00000000004004b6 <+26>:    mov    %al,-0x1(%rbp)
   0x00000000004004b9 <+29>:    movzbl -0x2(%rbp),%eax
   0x00000000004004bd <+33>:    mov    %eax,%edx
   0x00000000004004bf <+35>:    and    $0xf,%edx
   0x00000000004004c2 <+38>:    movzbl -0x1(%rbp),%eax
   0x00000000004004c6 <+42>:    or     %edx,%eax
   0x00000000004004c8 <+44>:    mov    %al,-0x1(%rbp)
   0x00000000004004cb <+47>:    mov    $0x0,%eax
   0x00000000004004d0 <+52>:    pop    %rbp
   0x00000000004004d1 <+53>:    retq   
End of assembler dump. 
```

被`a = a | b`编译为

```
movzbl -0x2(%rbp),%eax
or     %al,-0x1(%rbp) 
```

被`a = (unsigned char)(b & 0xf)`编译为

```
mov    %al,-0x2(%rbp)
and    $0xf,%eax
mov    %al,-0x1(%rbp) 
```

被`a |= (unsigned char)(b & 0xf);`编译为

```
movzbl -0x2(%rbp),%eax
mov    %eax,%edx
and    $0xf,%edx
movzbl -0x1(%rbp),%eax
or     %edx,%eax
mov    %al,-0x1(%rbp) 
```

显式演员没有出现在 asm 代码中。问题是何时完成 (b & 0xf) 操作。操作的输出是`sizeof(int)`。所以你应该改用这个：

```
a = (unsigned char)(a | (b & 0xF)); 
```

PS：显式转换不会产生任何警告。即使你会失去一些东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T10:32:29.083

我认为问题在于您转换`int`为`unsigned char`, 并返回`int`.

第 6 行转换`int`为`unsigned char`，但只是将其存储到`unsigned char`.
第 7 行转换`int`为`unsigned char`，然后为了进行算术运算，将其转换回`int`. 新整数可能与原始整数不同，因此您会收到警告。

# android - 使用 MODE_WORLD_READABLE 创建的文件未通过电子邮件作为附件发送

> ID：11134845
> 
> 赞同：2
> 
> 时间：2012-06-21T09:03:32.353
> 
> 标签：android, email-attachments

我使用以下代码创建了 SQLite DB：

```
context.openOrCreateDatabase(dbName, Context.MODE_WORLD_READABLE, null); 
```

并尝试使用以下代码通过电子邮件将其作为附件发送：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND)
        .setType("message/rfc822")
        .putExtra(android.content.Intent.EXTRA_STREAM,
                Uri.fromFile(getDatabasePath(dbName)));
startActivity(Intent.createChooser(emailIntent, null)); 
```

这将打开带有附件图标的 GMail 撰写活动。但是收件人没有收到附件。

以前有人[问过](https://stackoverflow.com/q/7167233/165674)这个问题。但看起来除了将 db 文件复制到 SD 卡之外没有其他解决方案。

那么我的问题是：**如果像 GMail 这样的另一个应用程序无法读取文件****，那么该标志有什么用？`MODE_WORLD_READABLE`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:51:54.037

假设我们在 android 文件系统上有 2 个应用 app_1 和 app_2，这 2 个应用位于 /data/data/app_1 和 /data/data/app_2 其中 app_1 是“用户”app_1

如果你在 /data/data 上运行 ls 你会看到这样的东西： drwxr-x--x app_1 app_1 drwxr-x--x app_2 app_2

MODE_WORLD_READABLE 等效于 Unix 命令 a+r [file] 但是这不允许其他用户/应用程序访问该文件，因为目录权限不允许 app_1 访问 app_2 文件夹中的文件。

事实上，app_1 甚至无法通过 ls /data/data 查看所有其他目录的列表。最重要的是，MODE_WORLD_READBLE 仅在您处理共享存储（如 sdcard）上的文件时有用，而不是在每个应用程序正在运行的监狱沙箱上处理文件时有用。

我希望这些信息对你有用。

# java - Google Calendars API - setTimeMax 导致错误

> ID：11134847
> 
> 赞同：2
> 
> 时间：2012-06-21T09:03:36.097
> 
> 标签：java, google-calendar-api

我正在尝试使用 Java api（jar 版本 v3-rev9-1.7.0-beta）从谷歌日历中检索事件列表

此代码工作正常

```
Events e = service.events().list("primary").
                setMaxResults(3).
                execute(); 
```

其中 service 是一个日历对象。

但是，如果我添加一个 setTimeMin 或 setTimeMax 参数，像这样

```
Date now = new java.util.Date();
Events e = service.events().list("primary").
                setTimeMin(new DateTime(now)).
                setMaxResults(3).
                execute(); 
```

它返回失败消息“错误请求”。

（请注意，从这个版本开始，setTime 函数采用谷歌 DateTime 对象。我也尝试过使用先前版本的 jar，它采用字符串，但收到相同的消息）。

所以我只是想知道是否有人成功使用了这些功能——也许他们不应该以这种方式调用？有没有办法获得有关错误的更多详细信息？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T10:48:28.110

```
DateTime startTime = new DateTime(new Date(), TimeZone.getDefault()); 
```

对问题进行排序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T21:46:31.310

我也遇到过这种情况。似乎 DateTime.toString() 或 DateTime.toStringRfc3339() 方法的格式作为 setTimeMin() 的输入不正确。

DateTime.toString() 格式为：
2012-07-04T21:02:16.590
yyyy-MM-dd'T'HH:mm:ss.SSS（SimpleDateFormat 表示法）

它期望的格式似乎接近[xsd:datetime](http://books.xmlschemata.org/relaxng/ch19-77049.html)格式（无论是什么）：
2012-07-04T21:02:16Z (zulu, gmt)
2012-07-04T21:02:16-07:00 (mst, -7h)
2012-07-04T21:02:16-0700 （它也适用于时区中没有冒号）
yyyy-MM-dd'T'HH:mm:ssZ (SimpleDateFormat)

可以使用 SimpleDateFormat 进行格式化：

```
SimpleDateFormat FMT_TIME=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
String fromTimeStr=FMT_TIME.format(new Date());
Events evts = client.events().list(cal.getUid()).setTimeMin(fromTimeStr)
             .execute(); 
```

现在，由于我使用的是较旧的 API，如果唯一的方法是 setTimeMin(DateTime)，我不确定如何做到这一点，但这应该会让你更接近。

谷歌文档或来源应该在某处提到这一点。

# ruby-on-rails - Heroku & delayed_job - 有没有办法自动缩放命名队列？

> ID：11134848
> 
> 赞同：2
> 
> 时间：2012-06-21T09:03:41.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, delayed-job

我将[delayed_job](https://github.com/collectiveidea/delayed_job)与[workless](https://github.com/lostboy/workless)一起使用，它在Heroku 上将worker 自动缩放为1。

delay_job 现在允许您轻松创建多个命名队列，但是我找不到扩展这些不同队列的方法。

例如，我有 1 个名为“stats”的队列，我不介意只有 1 个工作人员处理整个事情，即使它需要更长的时间，而对于其他队列，我希望扩展的不仅仅是 1 个工作人员以尽快完成它们可能 - 同时确保这些工人只在他们自己的队列上工作。

我认为[HireFireApp](http://hirefireapp.com/)正在做类似的事情，但还没有准备好。

有什么解决方案吗？

# ios - 如何从 xcode 4.2 中的 nsstring 或 byte 获取 JSON 数组数据？

> ID：11134850
> 
> 赞同：2
> 
> 时间：2012-06-21T09:03:48.073
> 
> 标签：ios, xcode, json

我正在尝试从 nsdata 类中获取值并且不起作用。

这是我的 JSON 数据。

```
{
    "count": 3,
    "item": [{
        "id": "1",
        "latitude": "37.556811",
        "longitude": "126.922015",
        "imgUrl": "http://175.211.62.15/sample_res/1.jpg",
        "found": false
    }, {
        "id": "3",
        "latitude": "37.556203",
        "longitude": "126.922629",
        "imgUrl": "http://175.211.62.15/sample_res/3.jpg",
        "found": false
    }, {
        "id": "2",
        "latitude": "37.556985",
        "longitude": "126.92286",
        "imgUrl": "http://175.211.62.15/sample_res/2.jpg",
        "found": false
    }]
} 
```

这是我的代码

```
-(NSDictionary *)getDataFromItemList
{

    NSData *dataBody = [[NSData alloc] initWithBytes:buffer length:sizeof(buffer)]; 
    NSDictionary *iTem = [[NSDictionary alloc]init];
    iTem = [NSJSONSerialization JSONObjectWithData:dataBody options:NSJSONReadingMutableContainers error:nil];
    NSLog(@"id = %@",[iTem objectForKey:@"id"]);

    //for Test
    output = [[NSString alloc] initWithBytes:buffer length:rangeHeader.length encoding:NSUTF8StringEncoding];
    NSLog(@"%@",output);
    return iTem;

} 
```

如何访问 JSON 中的每个值？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:31:20.873

看起来像这样..

```
NSString *jsonString = @"your json";
NSData *JSONdata = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *jsonError = nil;
if (JSONdata != nil) {
    //this you need to know json root is NSDictionary or NSArray , you smaple is NSDictionary
    NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:JSONdata options:0 error:&jsonError];
    if (jsonError == nil) {
        //every need check value is null or not , json null like ( "count": null )
        if (dic == (NSDictionary *)[NSNull null]) {
            return nil;
        }

        //every property you must know , what type is

        if ([dic objectForKey:@"count"] != [NSNull null]) {
            [self setCount:[[dic objectForKey:@"count"] integerValue]];
        }
        if ([dic objectForKey:@"item"] != [NSNull null]) {
            NSArray *itemArray = [dic objectForKey:@"item"]; // check null if need
            for (NSDictionary *itemDic in itemArray){
                NSString *_id = [dic objectForKey:@"id"]; // check null if need
                NSNumber *found = (NSNumber *)[dic objectForKey:@"found"];
                //.....
                //.... just Dictionary get key value
            }

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:27:35.807

**为此尝试[JSONKit](https://github.com/johnezang/JSONKit)。使用起来非常简单。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:12:58.773

我通过使用框架做到了： http: [//stig.github.com/json-framework/](http://stig.github.com/json-framework/)

它非常强大，可以做不可思议的事情！

在这里，我如何使用它从 HTTP 请求中提取项目名称：（其中结果是 JSO 字符串）

```
NSString *result = request.responseString;

jsonArray = (NSArray*)[result JSONValue]; /* Convert the response into an array */

NSDictionary *jsonDict = [jsonArray objectAtIndex:0];

/* grabs information and display them in the labels*/
name = [jsonDict objectForKey:@"wine_name"]; 
```

希望这会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T09:16:07.537

查看您的 JSON，您没有在对象层次结构中查询正确的对象。您正确提取的顶部对象是一个`NSDictionary`. 要获取 items 数组和单个项目，您必须这样做。

```
NSArray *items = [iTem objectForKey:@"item"];
NSArray *filteredArray = [items filteredArrayUsingPredicate:
   [NSPredicate predicateWithFormat:@"id = %d", 2];
if (filteredArray.count) NSDictionary *item2 = [filteredArray objectAtIndex:0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T19:26:41.870

请注意这是否仍然相关，但在 iOS 5 中，苹果添加了对 JSON 的合理支持。查看[此博客的小教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5) 无需导入任何 JSON 框架。（如果这个答案是相关的，+1）

# session - Grails 会话变量 null

> ID：11134851
> 
> 赞同：0
> 
> 时间：2012-06-21T09:04:01.963
> 
> 标签：session, grails, session-state, session-variables, grails-2.0

我的应用程序有一个昂贵的服务方法，其结果必须是 1）检查错误和 2）通过 URL（即，与 JavaScript 变量相反）呈现给 Java 小程序。方法结果是一个字符串，小程序*只能*从文件或 URL 加载数据。

我尝试使用会话变量来处理该问题：

```
def action1 = {
    def input = params['input']
    def result = expensiveServiceMethod( input )
    def failed = result == null
    session['result'] = result
    render( view:'view1', model:[failed:failed] )
}

def action2 = {
    def result = session['result']
    render( result )
} 
```

然后，在`view1`小程序中根据故障状态有条件地显示，结果由小程序通过`action2`URL 访问。

不幸`result`的是，`action2`即将到来`null`。我`result`已经确认*不在* `null`. `action1`我做错了吗？

**注意**
我会`flash`改用，但是为了初始化小程序还有其他请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:27:29.497

小程序无法自行跟踪会话 cookie。因此，当您的小程序向 action2 发送第二个请求时 - 它不会将会话 cookie 发送回服务器。因此，对于服务器来说，它就像一个全新的会话，您在 action1 期间在会话中设置的任何内容在 action2 中都将不可用。您必须在您的小程序中跟踪 cookie 并在拨打电话时将它们发送回服务器。

我从未这样做过，但我认为您可以在客户端（小程序）上使用 Apache commons http 客户端 - 它支持跟踪 cookie

看到这个[问题](https://stackoverflow.com/questions/4722171/servlet-japplet-httpsession)-

# gwt - GWT：如何格式化我的 GRID 表

> ID：11134853
> 
> 赞同：0
> 
> 时间：2012-06-21T09:04:03.893
> 
> 标签：gwt, datagrid

我的 GWT 应用程序中有一个网格，其中有包含数据的列和行，如果每行/列的数据大小相同，则工作正常，但如果某些数据变大，我的网格的整个格式就会受到干扰。

附件是我的 GRID 的屏幕截图，是否有任何解决方案，比如我可以为更大的文本或任何其他方式创建工具提示。

![在此处输入图像描述](../Images/6cb827ae02988120fb5e787faa026351.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:52:43.457

您可以将文本溢出定义为省略号，因此列中的文本将被剪切。

text-overflow 声明允许您处理剪辑文本：即不适合其框的文本。省略号值会导致将三个句点附加到文本中。

```
.columnOverflow {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
} 
```

# shell - 将 sendmail 用于 HTML 正文和二进制附件

> ID：11134857
> 
> 赞同：10
> 
> 时间：2012-06-21T09:04:23.627
> 
> 标签：shell, unix, sendmail, ksh, uuencode

目标：发送带有 HTML 正文和二进制附件的邮件（使用 sendmail）。

遵循以下链接中指定的准则

[http://www.unix.com/shell-programming-scripting/159522-sendmail-html-body-attachment-2.html](http://www.unix.com/shell-programming-scripting/159522-sendmail-html-body-attachment-2.html)

[http://www.unix.com/shell-programming-scripting/58448-sendmail-attachment.html](http://www.unix.com/shell-programming-scripting/58448-sendmail-attachment.html)

它的工作范围是 HTML 正文或带有 uuencode 的二进制附件，但不能同时使用两者。

下面给出了发送邮件的 shell 脚本片段。有了这个，HTML 正文就很好了，但是附件被错误地编码/解码并且无法查看。

请指教。

```
#!/usr/bin/ksh

export MAILFROM="noreply@site.dom"
export MAILTO="somebody@somesite.com"
export SUBJECT="Test PDF for Email"
export BODY="email_body.htm"
export ATTACH="file.pdf"
export MAILPART=`uuidgen` ## Generates Unique ID
(
 echo "From: $MAILFROM"
 echo "To: $MAILTO"
 echo "Subject: $SUBJECT"
 echo "MIME-Version: 1.0"
 echo "Content-Type: multipart/mixed; boundary=\"-$MAILPART\""
 echo "---$MAILPART"
 echo "Content-Type: text/html"
 echo "Content-Disposition: inline"
 cat $BODY
 echo "---$MAILPART"
 echo 'Content-Type: application/pdf; name="'$(basename $ATTACH)'"'
 echo "Content-Transfer-Encoding: base64"
 echo 'Content-Disposition: attachment; filename="'$(basename $ATTACH)'"'
 uuencode -m $ATTACH $(basename $ATTACH)
 echo "---$MAILPART--"
) | /usr/sbin/sendmail $MAILTO 
```

我正在使用 HP-UX ia64。通过论坛和网络搜索，发现主要是对 PHP、Python 等的引用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T16:09:45.010

将电子邮件中的内容传输编码类型从 base64 更改为 uuencode 解决了该问题。感谢您迄今为止的投入。

下面给出的是有效的修改后的脚本。

```
#!/usr/bin/ksh

export MAILFROM="noreply@domain.com"
export MAILTO="mail.to@gmail.com"
export SUBJECT="Test PDF for Email"
export BODY="email_body.htm"
export ATTACH="file.pdf"
export MAILPART=`uuidgen` ## Generates Unique ID
export MAILPART_BODY=`uuidgen` ## Generates Unique ID

(
 echo "From: $MAILFROM"
 echo "To: $MAILTO"
 echo "Subject: $SUBJECT"
 echo "MIME-Version: 1.0"
 echo "Content-Type: multipart/mixed; boundary=\"$MAILPART\""
 echo ""
 echo "--$MAILPART"
 echo "Content-Type: multipart/alternative; boundary=\"$MAILPART_BODY\""
 echo ""
 echo "--$MAILPART_BODY"
 echo "Content-Type: text/plain; charset=ISO-8859-1"
 echo "You need to enable HTML option for email"
 echo "--$MAILPART_BODY"
 echo "Content-Type: text/html; charset=ISO-8859-1"
 echo "Content-Disposition: inline"
 cat $BODY
 echo "--$MAILPART_BODY--"

 echo "--$MAILPART"
 echo 'Content-Type: application/pdf; name="'$(basename $ATTACH)'"'
 echo "Content-Transfer-Encoding: uuencode"
 echo 'Content-Disposition: attachment; filename="'$(basename $ATTACH)'"'
 echo ""
 #uuencode -m $ATTACH $(basename $ATTACH)
 uuencode $ATTACH $(basename $ATTACH)
 echo "--$MAILPART--"
) > email_`date '+%Y%m%d_%H%M%S'`.out
| /usr/sbin/sendmail $MAILTO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:58:45.370

尝试在之后添加新行`uuencode`

并尝试不`-m`

# asp.net - 对具有多个域的单个应用程序的用户进行身份验证

> ID：11134860
> 
> 赞同：0
> 
> 时间：2012-06-21T09:04:40.637
> 
> 标签：asp.net, authentication, cookies, forms-authentication, httpcookie

我有一个 asp.net Web 应用程序，但有两个不同的域指向这个 Web 应用程序。例如：`www.one.com`两者`www.two.com`都指向同一个网络应用程序。

我有一个问题，我需要某些页面位于特定域中（由于我们的在线支付提供商 - 第三方网站的一些安全要求）。所以假设`page1.aspx`需要调用`www.two.com`

过程如下：

1.  用户登录`www.one.com`
2.  身份验证 cookie 保存到浏览器
3.  然后，用户导航到`page1.aspx`错误的域，如果在错误的域中，则被重定向到正确的域。（此重定向发生`page1.aspx`在`page_load`事件中）
4.  然后 asp.net 将用户重定向到登录屏幕，因为身份验证 cookie 未发送到`www.two.com`.

如何跟踪用户并让他/她在两个域之间保持登录状态？

# geometry - 相机和识别的“物体”之间的距离

> ID：11134865
> 
> 赞同：4
> 
> 时间：2012-06-21T09:05:01.010
> 
> 标签：geometry, computer-vision, computer-science, trigonometry, nao-robot

我想计算我的相机和识别的“物体”之间的距离。例如，识别的“对象”是白板上的黑色矩形贴纸。我知道矩形 (x,y) 的值。

有没有一种方法可以用我的原始矩形的值和我用相机拍摄的矩形图片的值来计算距离？

我在论坛中搜索了答案，但没有一个被指定来计算这些属性的距离。

我正在研究 Aldebaran Robotics 的一个名为 Nao 的机器人，我打算使用 OpenCV 来识别黑色矩形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:22:03.043

如果您可以计算目标图像所占据的角度，那么到目标的距离应该与该角度的`cot`（即`1/tan`）成比例。您应该会发现图像中的像素数大致对应于角度，但我怀疑它是否完全是线性的，尤其是近距离。

您的相机镜头的行为可能会影响此测量，因此这将取决于您的确切设置。

为什么不在几个距离测量目标的大小，并绘制散点图？然后，您可以将曲线拟合到数据中，以获得特定系统的 size->distance 函数。如果您的相机接近“理想”相机，那么您应该会发现此图看起来像`cot`，并且您应该能够找到`a`和的值`b`来匹配`dist = a * cot (b * width)`。

如果您尝试这个实验，为什么不在这里发布答案，让其他人从中受益？

[编辑：关于“理想”相机的说明]

为了让相机图像对我们来说看起来“真实”，图像应该近似投影到眼睛前面的平面上（因为我们通过将平面图像放在眼睛前面来查看相机图像）。想象一下，在您的眼前举起一张描图纸，然后在纸上勾勒出物体的轮廓。[此页面](http://www.real3dtutorials.com/tut00002.php)上的第二张图显示了我的意思。您可以将实现这一目标的相机描述为“理想”相机。

当然，在现实生活中，相机不是通过描图纸工作的，而是通过镜头工作的。很复杂的镜头。看看[这个页面](http://www.the-digital-picture.com/Press-Release/Samyang-24mm-f-1.4-ED-AS-UMC-Lens.aspx)上的镜头图。由于各种原因，您可能会花费一生的时间来学习，因此要创建一个与描图纸示例在所有条件下都可以工作的镜头完全相同是非常棘手的。[从这个 wiki 页面](http://en.wikipedia.org/wiki/Distortion_%28optics%29)开始，如果您想了解更多信息，请继续阅读。

因此，您不太可能计算出像素长度和距离之间的精确关系：您应该测量它并拟合曲线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T12:09:34.770

这是一个很大的话题。如果您想从单个图像开始，请查看 A. Criminisi 的[这篇旧论文](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGQQFjAC&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.83.1441&rep=rep1&type=pdf&ei=K1_kT-uwLc-f6QGf46ySCg&usg=AFQjCNGhtUe_BiwxgE3ANvHOHAlTDwjJGw)。如需深入了解，请阅读他的博士学位。论文。然后开始使用“投影几何”部分中的 OpenCV 例程。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-20T01:08:00.937

我也一直在研究图像/对象识别。我刚刚发布了一个 python 编程的 android 应用程序（移植到 android），它可以识别物体、人、汽车、书籍、徽标、树木、花朵......任何东西:) 它还显示了它“思考”的思维过程 :) 我已经把它作为 99 美分在 google play 上的测试。如果您有兴趣，请点击此处的链接，还有一段视频正在播放：https: [//play.google.com/store/apps/details?id=com.davecote.androideyes](https://play.google.com/store/apps/details?id=com.davecote.androideyes)

享受！:)

# ios - 需要帮助了解应用程序的 ios http auth

> ID：11134867
> 
> 赞同：0
> 
> 时间：2012-06-21T09:05:02.430
> 
> 标签：ios, authentication

我需要一个白痴指南解释，以大致了解当您拥有基于 Web 的后端时，您如何在 ios 应用程序中验证用户身份？我使用 tornado 和 django 并了解如何使用 restkit 使用 get/post/delete/update，但理论上我不了解身份验证请求。

PS我找到了一个很好的使用restkit进行身份验证的教程，在这里有帮助：http: [//benoitc.github.com/restkit/authentication.html](http://benoitc.github.com/restkit/authentication.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:11:26.860

这可以通过多种方式完成，最简单的解释是，首先让我们设置我们的环境，我们确实有：

*   `www.yourSite.com/login.php`：这将使用 user="name" 和 passowrd="password"，它会回显一个会话 ID。
*   `www.yourSite.com/isloggedin`.php：检查用户是否登录
*   `www.yoursite.com/logout.php`：从您的会话中注销

首先，您将调用 login.php 发送用户名和密码 ( `login.php?user=someuser&passowd=pass`) 此调用将回显会话 ID（将在服务器端为您保持活动状态）

然后稍后你可以打电话`isloggedin.php?session=here_set_the_session_returned_earlier`，如果你没有注销这将返回是例如

稍后，如果您想注销，可以调用`www.yoursite.com/logout.php?session=same_session`，这将破坏登录功能中保存的会话

还有很多其他方法可以实现这一点，但我认为这是最简单的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:27:19.730

您可以使用 Cookie。

Web 服务器端在收到包含用户名和密码信息的请求时可以响应一些 cookie，然后应用程序将在下次发送请求时使用 Web 服务器响应的 cookie。

您可以使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，它可以自动处理 cookie。希望这可以帮到你。:)

# javascript - Onclick 使用其他 onclick 功能重新加载

> ID：11134870
> 
> 赞同：1
> 
> 时间：2012-06-21T09:05:11.447
> 
> 标签：javascript, onclick, reload

有人知道是否可以在 1 个按钮中使用 2 个 onclick 吗？当我按下按钮时，我希望获得重新加载页面。

这是原始按钮：

```
<a href="javascript:;" onclick="javascript:articleToCart('<z:esc mode="js" value=$z:value[article.number]>', document.getElementById('amount$z:iteration[article.current]').value)"> 
```

最好的问候弗兰克

编辑：

我的版本有效，但我找不到让它`return false`工作的方法。这适用于 IE 和 Firefox。

`<center><input type="button" class="flowbutton" value="Kjøp" onclick="document.location.reload(true);javascript:articleToCart('<z:esc mode="js" value=$z:value[article.number]>',document.getElementById('amount$z:iteration[art‌​icle.current]').value)"> </center>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:10:57.283

如果您想要这种类型的内联 JS 事件处理程序（在 HTML 源文件中），只需在您想要放在 click 事件上的两个语句之间使用逗号。

如果您使用 JS 添加处理程序，请不要这样做，`onclick = function() { //code of your second function };`因为它会覆盖以前的处理程序。在这种情况下， addEventListener/attachEvent 是“干净”的方式。

顺便说一句，关于伪 URL ( `javascript:`) ：

*   在链接的 href 属性中，它通常被认为是不好的做法。如果这是一个按钮，看在上帝的份上，使用`<button>`... 所有 A 标签应该在 href 属性中有一个真实的 URL。

*   在点击中？？？没用的，抹掉就不用怕了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:13:22.720

如果你调用了一个你已经做过的函数，你可以在 javascript 中做任何你想做的事情。

```
<script type="text/javascript">
    function articleToCartMain() {
        articleToCart('<z:esc mode="js" value=$z:value[article.number]>', document.getElementById('amount$z:iteration[article.current]').value);
        //Put other function calls in here as well
        return false; //Prevents the page from reloading or scrolling to top
    }
</script>
<a href="#" onclick="return articleToCartMain();">Do something</a> 
```

# android - Android 在按钮单击时显示数字小键盘

> ID：11134873
> 
> 赞同：4
> 
> 时间：2012-06-21T09:05:15.053
> 
> 标签：android, buttonclick, numeric-keypad

在我的应用程序中，我试图在用户单击按钮时显示数字小键盘。

单击按钮时，我使用 requestFocus() 将焦点转移到布局中的 EditText，接下来我需要显示数字键盘，以便用户可以输入值。

这些值将始终是数字，因此我只需要显示数字键盘。

我厌倦了在按钮的 onClick() 方法中使用它，但它不起作用。

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

请为此提供任何解决方案。

此外，我的应用程序适用于支持 4.0.3 的 Android 平板电脑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T09:07:10.870

在 EditText 放在下面的行。

```
android:inputType="number" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-21T09:07:48.877

这个在你的**EditText**属性中

```
android:inputType="phone" (This will displayed phone numeric keypad) 
```

或者

```
android:inputType="number" (This will displayed numeric keypad) 
```

现在，您只需在按钮单击时将焦点设置在 EditText 上。

就像是，

```
edtNumber = (EditText) findViewById(R.id.number);

// Button's onClick....
@Override
 public void onClick(DialogInterface dialog, int which)
  {
    edtNumber.requestFocus();
  } 
```

# jquery - 使jQuery子菜单扩展父级并防止重复slideToggle效果

> ID：11134876
> 
> 赞同：1
> 
> 时间：2012-06-21T09:05:21.417
> 
> 标签：jquery, hover, slidetoggle, expand, repeat

我整理了一个导航栏，它在悬停时展开子菜单。见我的[jsFiddle](http://jsfiddle.net/aQBeZ/6/)。

如果您将鼠标悬停在菜单项上，子菜单会扩展到父级之外`<nav>`（我将其涂成蓝色）。我所追求的是蓝色`<nav>`元素与 child 一起扩展`<ul>`。

我不知道我是否需要 jQuery 或 css 解决方案，但到目前为止我所尝试的一切都是徒劳的。

**和**

如果您的鼠标碰巧快速悬停在导航上，例如从“菜单 3”到“菜单 1”，然后停留在诸如“ONE A”之类的子菜单项上（在它实际出现之前），则 jQuery 会陷入重复循环，其中每个子菜单打开和关闭。

需要改变什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:10:10.753

在 $(this).find('ul') 之后添加 stop() 这应该有助于动画。

```
$(document).ready(

function() {
    $('.menu li ul').hide();
    $('.menu li').hover(function(e) {
        $(this).find('ul').stop().slideToggle("slow");
    });
}); 
```

菜单不展开的原因是您的“.menu li ul”设置为绝对位置。当元素具有绝对位置时，它将从正常流中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:10:32.277

发生这种情况是因为动画已排队并且除非您强行停止它们，否则它们会继续运行。

[JQuery 的](http://jquery.com) 功能[`stop()`](http://api.jquery.com/stop/)将在这里为您提供帮助。

`stop(clearQueue, jumpToEnd)`- 停止匹配元素上当前正在运行的动画。

```
$(this).find('ul').stop(true, true).slideToggle("slow"); 
```

检查更新的小提琴：http: [//jsfiddle.net/aQBeZ/9/](http://jsfiddle.net/aQBeZ/9/)

# xslt - 仅当所有属性都相等时才合并节点

> ID：11134877
> 
> 赞同：1
> 
> 时间：2012-06-21T09:05:26.157
> 
> 标签：xslt, xslt-2.0

努力使以下工作：我正在尝试合并翻译的节点，但由于有时节点集之间存在细微差异，我不能这样做，只是蒙上眼睛，需要手动审查。然而，与此同时，我喜欢让我的生活保持简单，所以我想尽可能多地实现自动化。举个例子：

```
<root>
<chapter>
<string class="l1"><local xml:lang="en">Some English here</local></string>
<string class="p"><local xml:lang="en">Some other English here</local></string>
<string class="p"><local xml:lang="en">and some English here</local></string>
<string class="p"><local xml:lang="en">Some English here</local></string>
</chapter>
<chapter>
<string class="l1"><local xml:lang="fr">Some English translated to French here</local></string>
<string class="p"><local xml:lang="fr">Some other English translated to French here</local></string>
<string class="p"><local xml:lang="fr">and some English translated to French here</local></string>
<string class="p"><local xml:lang="fr">Some English translated to French here</local></string>
</chapter>
<chapter>
<string class="l1"><local xml:lang="de">Some English translated to German here</local></string>
<string class="p"><local xml:lang="de">Some other English translated to German here</local></string>
<string class="another_class"><local xml:lang="de">and some English translated to German here</local></string>
<string class="p"><local xml:lang="de">Some English translated to German here</local></string>
</chapter>
<chapter>
<string class="l1"><local xml:lang="nl">Some English translated to Dutch here</local></string>
<string class="p"><local xml:lang="nl">Some other English translated to Dutch here</local></string>
<string class="p"><local xml:lang="nl">and some English translated to Dutch here<br/>Some English translated to Dutch here</local></string>
</chapter>
</root> 
```

实际文件可以包含 30 种语言和数百个节点，因此上面的示例非常简化。

我想用这个例子实现的是合并英语和法语，因为它们都有相同数量的元素，并且所有属性也相同。法语应该保持原样，因为并非所有属性都匹配，荷兰语应该保持原样，因为元素的数量不匹配。

所以输出应该是这样的：

```
<root>
<!-- French has the same amount of elements, and a full sequential match of attributes, so we can merge -->
<chapter>
<string class="l1">
    <local xml:lang="en">Some English here</local>
    <local xml:lang="fr">Some English translated to French here</local>
</string>
<string class="p">
    <local xml:lang="en">Some other English here</local>
    <local xml:lang="fr">Some other English translated to French here</local>
</string>
<string class="p">
    <local xml:lang="en">and some English here</local>
    <local xml:lang="fr">and some English translated to French here</local>
</string>
<string class="p">
    <local xml:lang="en">Some English here</local>
    <local xml:lang="fr">Some English translated to French here</local>
</string>
</chapter>
<!-- German has same amount of elements, but different tag sequence, so we leave it for manual review -->
<chapter>
<string class="l1"><local xml:lang="de">Some English translated to German here</local></string>
<string class="p"><local xml:lang="de">Some other English translated to German here</local></string>
<string class="another_class"><local xml:lang="de">and some English translated to German here</local></string>
<string class="p"><local xml:lang="de">Some English translated to German here</local></string>
</chapter>
<!-- Dutch has same same tag sequence but less elements, so we leave it for manual review-->
<chapter>
<string class="l1"><local xml:lang="nl">Some English translated to Dutch here</local></string>
<string class="p"><local xml:lang="nl">Some other English translated to Dutch here</local></string>
<string class="p"><local xml:lang="nl">and some English translated to Dutch here<br/>Some English translated to Dutch here</local></string>
</chapter>
</root> 
```

英语始终是主要参考，因此我已经可以通过使用英语节点计数作为比较来排除大小不同的节点集，只是不知道如何检查所有属性值是否也相等。

有什么建议吗？（使用 xslt2）

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:12:07.620

这是一个示例 XSLT 2.0 样式表：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:variable 
  name="master" 
  select="root/chapter[string/local/@xml:lang = 'en']"/>

<xsl:variable 
  name="matches" 
  select="root/chapter[not(string/local/@xml:lang = 'en')]
    [count(string) eq count($master/string)
     and 
      (every $i in (1 to count($master/string))
       satisfies $master/string[$i]/@class eq string[$i]/@class)]"/>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="chapter[. intersect $master]">
  <xsl:copy>
    <xsl:apply-templates select="string"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="string[local/@xml:lang = 'en']">
  <xsl:variable name="pos" select="position()"/>
  <xsl:copy>
    <xsl:apply-templates select="@* | local | $matches/string[$pos]/local"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="chapter[. intersect $matches]"/>

</xsl:stylesheet> 
```

当我将 Saxon 9.4 应用于您发布的输入时，我得到了结果

```
<root>
   <chapter>
      <string class="l1">
         <local xml:lang="en">Some English here</local>
         <local xml:lang="fr">Some English translated to French here</local>
      </string>
      <string class="p">
         <local xml:lang="en">Some other English here</local>
         <local xml:lang="fr">Some other English translated to French here</local>
      </string>
      <string class="p">
         <local xml:lang="en">and some English here</local>
         <local xml:lang="fr">and some English translated to French here</local>
      </string>
      <string class="p">
         <local xml:lang="en">Some English here</local>
         <local xml:lang="fr">Some English translated to French here</local>
      </string>
   </chapter>
   <chapter>
      <string class="l1">
         <local xml:lang="de">Some English translated to German here</local>
      </string>
      <string class="p">
         <local xml:lang="de">Some other English translated to German here</local>
      </string>
      <string class="another_class">
         <local xml:lang="de">and some English translated to German here</local>
      </string>
      <string class="p">
         <local xml:lang="de">Some English translated to German here</local>
      </string>
   </chapter>
   <chapter>
      <string class="l1">
         <local xml:lang="nl">Some English translated to Dutch here</local>
      </string>
      <string class="p">
         <local xml:lang="nl">Some other English translated to Dutch here</local>
      </string>
      <string class="p">
         <local xml:lang="nl">and some English translated to Dutch here<br/>Some English translated to Dutch here</local>
      </string>
   </chapter>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:12:19.657

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="vENSignature" select="string-join(/*/*[1]/*/@class, '+')"/>
 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*">
  <root>
   <xsl:for-each-group select="chapter"
    group-adjacent="string-join(*/@class, '+') eq $vENSignature">
     <xsl:choose>
       <xsl:when test="current-grouping-key() eq true()">
             <chapter>
              <xsl:apply-templates select="*"/>
            </chapter>
        </xsl:when>
        <xsl:otherwise>
          <xsl:sequence select="current-group()"/>
        </xsl:otherwise>
    </xsl:choose>
   </xsl:for-each-group>
  </root>
 </xsl:template>

 <xsl:template match="chapter/*" >
  <xsl:variable name="vPos" select="position()"/>
  <xsl:copy>
    <xsl:sequence select="@*, current-group()/*[position() = $vPos]/*"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <chapter>
        <string class="l1">
            <local xml:lang="en">Some English here</local>
        </string>
        <string class="p">
            <local xml:lang="en">Some other English here</local>
        </string>
        <string class="p">
            <local xml:lang="en">and some English here</local>
        </string>
        <string class="p">
            <local xml:lang="en">Some English here</local>
        </string>
    </chapter>
    <chapter>
        <string class="l1">
            <local xml:lang="fr">Some English translated to French here</local>
        </string>
        <string class="p">
            <local xml:lang="fr">Some other English translated to French here</local>
        </string>
        <string class="p">
            <local xml:lang="fr">and some English translated to French here</local>
        </string>
        <string class="p">
            <local xml:lang="fr">Some English translated to French here</local>
        </string>
    </chapter>
    <chapter>
        <string class="l1">
            <local xml:lang="de">Some English translated to German here</local>
        </string>
        <string class="p">
            <local xml:lang="de">Some other English translated to German here</local>
        </string>
        <string class="another_class">
            <local xml:lang="de">and some English translated to German here</local>
        </string>
        <string class="p">
            <local xml:lang="de">Some English translated to German here</local>
        </string>
    </chapter>
    <chapter>
        <string class="l1">
            <local xml:lang="nl">Some English translated to Dutch here</local>
        </string>
        <string class="p">
            <local xml:lang="nl">Some other English translated to Dutch here</local>
        </string>
        <string class="p">
            <local xml:lang="nl">and some English translated to Dutch here
                <br/>Some English translated to Dutch here
            </local>
        </string>
    </chapter>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <chapter>
      <string class="l1">
         <local xml:lang="en">Some English here</local>
         <local xml:lang="fr">Some English translated to French here</local>
      </string>
      <string class="p">
         <local xml:lang="en">Some other English here</local>
         <local xml:lang="fr">Some other English translated to French here</local>
      </string>
      <string class="p">
         <local xml:lang="en">and some English here</local>
         <local xml:lang="fr">and some English translated to French here</local>
      </string>
      <string class="p">
         <local xml:lang="en">Some English here</local>
         <local xml:lang="fr">Some English translated to French here</local>
      </string>
   </chapter>
   <chapter>
            <string class="l1">
                  <local xml:lang="de">Some English translated to German here</local>
            </string>
            <string class="p">
                  <local xml:lang="de">Some other English translated to German here</local>
            </string>
            <string class="another_class">
                  <local xml:lang="de">and some English translated to German here</local>
            </string>
            <string class="p">
                  <local xml:lang="de">Some English translated to German here</local>
            </string>
      </chapter>
   <chapter>
            <string class="l1">
                  <local xml:lang="nl">Some English translated to Dutch here</local>
            </string>
            <string class="p">
                  <local xml:lang="nl">Some other English translated to Dutch here</local>
            </string>
            <string class="p">
                  <local xml:lang="nl">and some English translated to Dutch here
                <br/>Some English translated to Dutch here
            </local>
            </string>
      </chapter>
</root> 
```

**说明**：

1.  我们定义并使用 a 的“签名”属性`chapter`——即`class`其子项的属性值的序列。

2.  我们`chapter`根据其签名是否等于“英文签名”这一事实对所有元素进行分组。

3.  我们合并`chapter`组中签名等于“英文签名”的元素。

4.  `chapter`我们复制其他组中的元素不变。

# android - 如何在Android中实现包含带有片段概念的（3rx7c）图像的GridView

> ID：11134881
> 
> 赞同：1
> 
> 时间：2012-06-21T09:05:38.810
> 
> 标签：android, gridview, fragment

我正在使用 Android 中的照片浏览器。稍后我必须在我的根应用程序中添加这个应用程序。

我必须使用 Fragment 概念在 gridview 中显示图像，其中包含 3 行和 7 列。

两个 Fragment 如何通过 Activity 进行通信？我可以有任何例子来检查吗？

我是 Android 新手。所以，请告诉我开始的过程。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:19:25.253

首先阅读以下内容：http: [//developer.android.com/guide/topics/fundamentals/fragments.html](http://developer.android.com/guide/topics/fundamentals/fragments.html)它解释了您所询问的所有内容
这是针对网格视图的：http: [//developer.android.com/资源/教程/视图/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html)

# android - 如何从同一个广播接收器类中使用或获取多个意图操作

> ID：11134883
> 
> 赞同：0
> 
> 时间：2012-06-21T09:05:46.847
> 
> 标签：android, android-intent

我在单个接收器类中有两个意图操作。在清单文件中：

```
<receiver android:name=".ConnectivityReceiver" >
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE"></action>
    </intent-filter>
    <intent-filter> 
        <action android:name="android.intent.action.BOOT_COMPLETED" /> 
    </intent-filter> 
</receiver> 
```

在接收器类里面`onReceive()`：

```
@Override
public void onReceive(Context context, Intent intent) {
    System.out.println("--------BOOT-----------"+intent.getAction());
} 
```

此处`intent.getAction()`仅返回“android.net.conn.CONNECTIVITY_CHANGE”，但我无法跟踪“启动完成”操作。反正有没有从一个 common 获得多个意图操作`onReceive()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:07:34.343

是的，您可以将多个广播传送到单个`onReceive()`. 确保您有权限

```
 <uses-permission
     android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

在你的清单中。

此外，从 Android 3.1 开始，您将不会收到 BOOT_COMPLETED 广播，除非您的应用程序已由用户至少运行一次。见[http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

# ruby-on-rails-3 - 设计 validates_uniqueness 静默失败

> ID：11134885
> 
> 赞同：0
> 
> 时间：2012-06-21T09:05:49.027
> 
> 标签：ruby-on-rails-3, devise

这是我的用户模型：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :token_authenticatable, :confirmable, :timeoutable, 
         :recoverable, :rememberable, :trackable, :validatable,
                 :email_regexp =>  /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i

  attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :confirmed_at, :confirmation_token, :category_ids
    validates_uniqueness_of :email, :case_sensitive => false
    validates_confirmation_of   :password

end 
```

当我输入数据库中存在的电子邮件地址时，我的页面不会重新加载，也看不到任何错误消息或任何内容。

这是我在日志中看到的：

```
Started GET "/validators/uniqueness?case_sensitive=false&user%5Bemail%5D=abc%40email.com" for 127.0.0.1 at 2012-06-21 03:59:57 -0500
  User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE ("users"."email" LIKE 'abc@email.com') LIMIT 1

Started GET "/validators/uniqueness?case_sensitive=false&user%5Bemail%5D=abc%40email.com" for 127.0.0.1 at 2012-06-21 03:59:57 -0500
  User Exists (0.2ms)  SELECT 1 AS one FROM "users" WHERE ("users"."email" LIKE 'abc@email.com') LIMIT 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:25:58.457

> *“解决方案是改为执行完全自定义的验证，或者像您在示例中所做的那样覆盖电子邮件验证*”

看

[https://github.com/bcardarella/client_side_validations/issues/455#issuecomment-12170527](https://github.com/bcardarella/client_side_validations/issues/455#issuecomment-12170527)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:27:12.437

你为什么要覆盖设计验证？设计将处理一切。日志表明您正在尝试进行某种 JS 表单验证，对吗？如果是这样，请尝试以不同方式检查现有用户：

```
email = params[:email] || ""
@exists = User.where(:email=>email.downcase).count 
```

# php - 在 Doctrine Symfony2 中使用查询生成器实现 SQL 联合查询

> ID：11134894
> 
> 赞同：2
> 
> 时间：2012-06-21T09:06:15.050
> 
> 标签：php, sql, symfony, doctrine, query-builder

我目前正在使用 Symfony2 框架。我不知道如何通过 Symfony2 中的 Query Builder 加入我的 2 个查询，我只能使用 SQL UNION 查询加入它们。下面是返回正确结果的查询。

```
SELECT * FROM (SELECT m.id, m.subject, m.date 
FROM message m JOIN message_incoming mi ON m.id = mi.id
WHERE m.recipient_id = 1
AND mi.trash = 1
AND mi.deleted = 0) AS y
UNION 
SELECT * FROM (SELECT m.id, m.subject, m.date 
FROM message m JOIN message_outgoing mo ON m.id = mo.id
WHERE m.originator_id = 1
AND mo.trash = 1
AND mo.sent = 1
AND mo.deleted = 0) AS z
ORDER BY date DESC 
```

我试图在 1 个查询（没有 UNION）中加入此代码以获得正确的结果，但我失败了。

那么如何使用查询生成器来实现这个查询呢？

请指教，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:55:23.497

编写这样的查询而不对 Doctrine2 本身进行太多破解的最佳方法是使用[`NativeQuery`](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/native-sql.html).

native/sql`QueryBuilder`使用与 ORM 完全相同的 API。您可以将结果映射到现有实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:11:22.607

我不知道在不检查条件的情况下加入 2 个查询时我有多愚蠢。这是正确的查询：

```
SELECT m.id, m.subject, m.date
FROM message m 
JOIN message_incoming mi ON m.id = mi.id
JOIN message_outgoing mo ON m.id = mo.id
WHERE m.recipient_id = 1
AND mi .trash = 1
AND mi .deleted = 0
OR m.originator_id = 1
AND mo .trash = 1
AND mo .deleted =0
AND mo .sent = 1
ORDER by date DESC 
```

我尝试通过查询生成器实现它：

```
$queryBuilder = $this->entityManager->getRepository('EzxWebmailBundle:Message')
            ->createQueryBuilder('m')
            ->select('m.id','m.subject','m.date')
            ->join('m.message_outgoing','mo','ON','m.id = mo.id')
            ->join('m.message_incoming','mi','ON','m.id = mi.id')
            ->where('m.recipient_id = '.$userId)
            ->andWhere('mi.trash = 1')
            ->andWhere('mi.deleted = 0')
            ->orWhere('m.originator_id = '.$userId)
            ->andWhere('mo.trash = 1')
            ->andWhere('mo.deleted = 0')
            ->andWhere('mo.sent = 1')
            ->orderBy('m.date','DESC');
$result = $queryBuilder->getQuery()->getResult(); 
```

它返回错误的结果多么令人惊讶！因此，我尝试查看使用以下命令生成了什么查询：

```
var_dump($queryBuilder->getQuery()); 
```

而且我真的不知道为什么当我得到这个结果时，学说会产生额外的括号（仔细看看 WHERE 子句）：

```
SELECT m.id, m.subject, m.date FROM message m 
INNER JOIN message_outgoing mo ON m.id = mo.id
INNER JOIN message_incoming mi ON m.id = mi.id
WHERE ((m.recipient_id = 1 AND mi.trash = 1 AND mi.deleted = 0) OR m.originator_id = 1) AND mo.trash = 1 AND mo.deleted = 0 AND mo.sent = 1 
ORDER BY m.date DESC 
```

因此，如果我添加自己的括号，这一定是正确的：

```
$queryBuilder = $this->entityManager->getRepository('EzxWebmailBundle:Message')
            ->createQueryBuilder('m')
            ->select('m.id','m.subject','m.date')
            ->join('m.message_outgoing','mo','ON','m.id = mo.id')
            ->join('m.message_incoming','mi','ON','m.id = mi.id')
            ->where('(m.recipient_id = '.$userId)
            ->andWhere('mi.trash = 1')
            ->andWhere('mi.deleted = 0)')
            ->orWhere('(m.originator_id = '.$userId)
            ->andWhere('mo.trash = 1')
            ->andWhere('mo.deleted = 0')
            ->andWhere('mo.sent = 1)')
            ->orderBy('m.date','DESC') 
```

觉得有点傻。

# erlang - 抽象形式上的模式匹配

> ID：11134898
> 
> 赞同：4
> 
> 时间：2012-06-21T09:06:45.893
> 
> 标签：erlang, pattern-matching

**免责声明**：我保留它是因为有些东西可能对其他人有用，但是，它并不能解决我最初尝试做的事情。

现在，我正在尝试解决以下问题：

给定类似 {a, B, {c, D}} 的内容，我想扫描提供给 parse_transform/2 的 Erlang 表单，并找到发送运算符 (!) 的每次使用。然后我想检查正在发送的消息并确定它是否适合模式 {a, B, {c, D}}。

因此，考虑找到以下形式：

```
{op,17,'!',
           {var,17,'Pid'},
           {tuple,17,[{atom,17,a},{integer,17,5},{var,17,'SomeVar'}]}}]}]} 
```

由于正在发送的消息是：

```
{tuple,17,[{atom,17,a},{integer,17,5},{var,17,'SomeVar'}]} 
```

这是 {a, 5, SomeVar} 的编码，这将匹配 {a, B, {c, D}} 的原始模式。

我不确定我将如何解决这个问题，但你知道任何可以提供帮助的 API 函数吗？

将给定的 {a, B, {c, D}} 转换为一种形式是可能的，方法是首先用一些东西代替变量，例如字符串（并记下这一点），否则它们将被解除绑定，然后使用：

```
> erl_syntax:revert(erl_syntax:abstract({a, "B", {c, "D"}})).
{tuple,0,
   [{atom,0,a},
    {string,0,"B"},
    {tuple,0,[{atom,0,c},{string,0,"D"}]}]} 
```

我在想，像这样把它们做成相同的格式后，我可以一起分析它们：

```
> erl_syntax:type({tuple,0,[{atom,0,a},{string,0,"B"},{tuple,0,[{atom,0,c},string,0,"D"}]}]}).
tuple
%% check whether send argument is also a tuple.
%% then, since it's a tuple, use erl_syntax:tuple_elements/1 and keep comparing in this way, matching anything when you come across a string which was a variable... 
```

我想我最终会遗漏一些东西（例如识别一些东西而不是其他东西......即使它们应该匹配）。我可以使用任何 API 函数来简化此任务吗？至于模式匹配测试运算符或类似的东西，那不存在吗？（即仅在此处建议：http: [//erlang.org/pipermail/erlang-questions/2007-December/031449.html](http://erlang.org/pipermail/erlang-questions/2007-December/031449.html)）。

**编辑：（**这次从头开始解释）

如果您使用 t_from_term/1 返回的 erl_type() 即 t_from_term/1 接受一个没有自由变量的术语，那么按照 Daniel 下面的建议使用 erl_types 可能是可行的，因此您必须继续更改类似`{a, B, {c, D}}`into的内容`{a, '_', {c, '_'}}`（即填充变量)，使用 t_from_term/1 然后遍历返回的数据结构，并使用模块的 t_var/1 或其他东西将“_”原子更改为变量。

在解释我最终是如何解决这个问题之前，让我更好地说明这个问题。

**问题**

我正在开发一个宠物项目（ErlAOP 扩展），准备好后我将托管在 SourceForge 上。基本上，另一个项目已经存在（[ErlAOP](https://sourceforge.net/projects/erlaop/)），通过它可以在函数调用之前/之后/周围/等...注入代码（如果感兴趣，请参阅[文档）。](http://erlaop.sourceforge.net/)

我想扩展它以支持在发送/接收级别注入代码（因为另一个项目）。我已经这样做了，但在托管项目之前，我想进行一些改进。

目前，我的实现只是找到了发送运算符或接收表达式的每次使用，并在之前/之后/周围注入*了一个函数*（由于尾递归，接收表达式有一些问题）。我们称这个函数**为 dmfun**（动态匹配函数）。

用户将指定当发送 {a, B, {c, D}} 形式的消息时，应在发送之前评估函数 do_something/1。因此，当前的实现在源代码中每次使用 send 操作之前都会注入 dmfun。然后 Dmfun 会有类似的东西：

```
case Arg of
    {a, B, {c, D}} -> do_something(Arg);
    _ -> continue
end 
```

其中 Arg 可以简单地传递给 dmfun/1 因为您可以访问从源代码生成的表单。

所以问题是*任何*发送操作员都会在它之前注入 dmfun/1 （并且发送操作的消息作为参数传递）。但是当发送像 50, {a, b}, [6, 4, 3] 等这样的消息时......这些消息肯定不会匹配 {a, B, {c, D}}，所以在发送时注入 dmfun/1这些消息是一种浪费。

我希望能够挑选出*合理*的发送操作，例如 Pid ！{a, 5, SomeVar} 或 Pid ！{a, X, SomeVar}。在这两种情况下，注入 dmfun/1 是有意义的，因为如果在运行时 SomeVar = {c, 50}，则应评估用户提供的 do_something/1（但如果 SomeVar = 50，则不应该，因为我们对 {a, B, {c, D}} 和 50 不匹配 {c, D} 感兴趣）。

**我过早地写了以下内容。它不能解决我遇到的问题。我最终没有包括这个功能。无论如何我都留下了解释，但如果由我决定，我会完全删除这篇文章......我仍在尝试，我认为这里的内容对任何人都没有任何用处。**

在解释之前，让：

msg_format = 用户提供的消息格式，它将确定正在发送/接收的哪些消息是有趣的（例如 {a, B, {c, D}}）。

msg = 在源代码中发送的实际消息（例如 Pid ! {a, X, Y}）。

我在之前的编辑中给出了下面的解释，但后来发现它与它应该匹配的一些东西不匹配。例如，当 msg_format = {a, B, {c, D}}, msg = {a, 5, SomeVar} 不匹配时（通过“匹配”我的意思是应该注入 dmfun/1。

让我们将下面概述的“算法”称为 Alg。我采取的方法是执行 Alg(msg_format, msg) 和 Alg(msg, msg_format)。下面的解释只通过其中之一。通过重复相同的事情只获得不同的匹配函数（`matching_fun(msg_format)`而不是`matching_fun(msg)`），并且仅当 Alg(msg_format, msg) 或 Alg(msg, msg_format) 中的至少一个返回 true 时才注入 dmfun/1，那么结果应该是注入在 dmfun/1 中，可以在运行时实际生成所需的消息。

1.  采用您在提供给 parse_transform/2 的 [Forms] 中找到的消息表单，例如，假设您找到：`{op,24,'!',{var,24,'Pid'},{tuple,24,[{atom,24,a},{var,24,'B'},{var,24,'C'}]}}` 所以您将采用`{tuple,24,[{atom,24,a},{var,24,'B'},{var,24,'C'}]}`正在发送的消息。（绑定到消息）。

2.  执行 fill_vars(Msg) 其中：

    ```
    -define(VARIABLE_FILLER, "_").
    -spec fill_vars(erl_parse:abstract_form()) -> erl_parse:abstract_form().
    %% @doc This function takes an abstract_form() and replaces all {var, LineNum, Variable} forms with 
    %% {string, LineNum, ?VARIABLE_FILLER}.
    fill_vars(Form) ->
        erl_syntax:revert(
            erl_syntax_lib:map(
            fun(DeltaTree) ->
                case erl_syntax:type(DeltaTree) of
                    variable ->
                        erl_syntax:string(?VARIABLE_FILLER);
                    _ ->
                        DeltaTree
                end
            end,
            Form)). 
    ```

3.  在 2 的输出上执行 form_to_term/1，其中：

    ```
    form_to_term(Form) -> element(2, erl_eval:exprs([Form], [])). 
    ```

4.  在 3 的输出上执行 term_to_str/1，其中：

    ```
    -define(inject_str(FormatStr, TermList), lists:flatten(io_lib:format(FormatStr, TermList))).
    term_to_str(Term) -> ?inject_str("~p", [Term]). 
    ```

5.  Do `gsub(v(4), "\"_\"", "_")`，其中 v(4) 是 4 的输出，gsub 是：（取自[此处](http://onerlang.blogspot.com/2009/06/string-substitution-missing-in-erlang.html)）

    ```
    gsub(Str,Old,New) -> RegExp = "\\Q"++Old++"\\E", re:replace(Str,RegExp,New,[global, multiline, {return, list}]). 
    ```

6.  将变量（例如 M）绑定到 matching_fun(v(5))，其中：

    ```
    matching_fun(StrPattern) ->
        form_to_term(
            str_to_form(
                ?inject_str(
                    "fun(MsgFormat) ->
                        case MsgFormat of
                            ~s ->
                                true;
                            _ ->
                                false
                        end
                    end.", [StrPattern])
            )
        ).

    str_to_form(MsgFStr) ->
        {_, Tokens, _} = erl_scan:string(end_with_period(MsgFStr)),
        {_, Exprs} = erl_parse:parse_exprs(Tokens),
        hd(Exprs).

    end_with_period(String) ->
        case lists:last(String) of
            $. -> String;
            _ -> String ++ "."
        end. 
    ```

7.  最后，采用用户提供的消息格式（以字符串形式给出），例如 MsgFormat = "{a, B, {c, D}}"，然后执行：MsgFormatTerm = form_to_term(fill_vars(str_to_form(MsgFormat)))。然后你可以 M(MsgFormatTerm)。

例如，用户提供的消息格式 = {a, B, {c, D}} 和 Pid ！{a, B, C} 在代码中找到：

```
2> weaver_ext:fill_vars({tuple,24,[{atom,24,a},{var,24,'B'},{var,24,'C'}]}).
{tuple,24,[{atom,24,a},{string,0,"_"},{string,0,"_"}]}
3> weaver_ext:form_to_term(v(2)).
{a,"_","_"}
4> weaver_ext:term_to_str(v(3)).
"{a,\"_\",\"_\"}"
5> weaver_ext:gsub(v(4), "\"_\"", "_").
"{a,_,_}"
6> M = weaver_ext:matching_fun(v(5)).
#Fun<erl_eval.6.13229925>
7> MsgFormatTerm = weaver_ext:form_to_term(weaver_ext:fill_vars(weaver_ext:str_to_form("{a, B, {c, D}}"))).
{a,"_",{c,"_"}}
8> M(MsgFormatTerm).
true
9> M({a, 10, 20}).
true
10> M({b, "_", 20}).
false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:38:06.437

`erl_types`(HiPE)中有此功能。

不过，我不确定您是否拥有使用此模块的正确格式的数据。我似乎记得它需要 Erlang 术语作为输入。如果您解决了表单问题，您应该能够使用`erl_types:t_from_term/1`和做大部分您需要的事情`erl_types:t_is_subtype/2`。

我上次使用这些是很久以前的事了，我只做过测试运行时，而不是编译时。如果您想从我的旧代码（不再工作）中查看使用模式，您可以[在 github](https://github.com/dLuna/Erlang-type-checker/blob/master/lib/contracts/src/contracts.erl#L138-145)上找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:06:47.987

在一般情况下，我认为这在编译时是不可能的。考虑：

```
send_msg(Pid, Msg) ->
    Pid ! Msg. 
```

`Msg`看起来像 aa `var`，这是一个完全不透明的类型。您无法判断它是元组、列表还是原子，因为任何人都可以使用为`Msg`.

相反，这在运行时会容易得多。每次使用`!`运算符时，您都需要调用一个包装函数，它会尝试匹配您尝试发送的消息，并在模式匹配时执行额外的处理。

# android - 三星 Galaxy 平板电脑不允许在“数字”类型的输入中输入浮点数

> ID：11134903
> 
> 赞同：15
> 
> 时间：2012-06-21T09:06:59.840
> 
> 标签：android, html, android-browser, html-input, galaxy-tab

我们的客户希望我们为输入字段显示数字键盘，所以基本上我创建了一个字段，例如：

`<input type="number" name="quantity" step=".01" value="0.00" />`

但是，Galaxy Tablet 删除了“.”。并在其前后合并数字，也禁用“。” 在键盘中。

使用 type="text" 时，是否有其他方法可以解决此问题或在输入字段中显示数字键盘？

注意：我尝试使用**模式**属性（适用于 iPhone）。我在使用 Android 2.1+ 的各种 Android 设备上测试了这个问题。我在任何其他 HTC 和三星设备上都没有遇到此错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-30T13:17:17.727

是的，还有另一种方法。

1.  方式1：不使用`type="number"`但使用`type="text"`
2.  方式 2：仅适用于 Android 手机的方式 1。检测用户代理等
3.  方式 3：仅将方式 1 应用于损坏的实现。请参阅：[哪些型号的三星智能手机缺少 html5 input type="number" 的句点？](https://stackoverflow.com/questions/23205511/what-models-of-samsung-smartphones-do-not-support-html5-input-type-number)
4.  方式 4：`type="tel"'`仅用于 Android 或损坏。（不能在 iPhone 上使用，因为没有期间）
5.  方式5：使用`type="text"`自定义行为的javascript。看：

期间总是显示：http: [//jsbin.com/heqeduyi/1/](http://jsbin.com/heqeduyi/1/)

句号显示一次 3 位数：http: [//jsbin.com/yinaweho/1](http://jsbin.com/yinaweho/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T08:36:57.843

一种解决方法是使用`type="tel"`而不是`type="number"`. 不幸的是，iOS`type="tel"`上没有`,`在键盘上显示字符（至少我没有在那里找到它）。您可以检查 iOS 设备的用户代理，然后更改`type`为`"number"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T00:35:57.347

您是否尝试将步骤设置为“任何”。喜欢：

```
<input type="number" name="quantity" step="any" /> 
```

我拿出了“价值”，因为我认为你应该这样做，即使只是为了测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-08T06:40:41.937

我在 C#/Xamarin 中执行此操作，并且在代码方面（我动态构建表单）对我有用的是使用以下内容：

```
 EditText edittext1 = new EditText(view.Context);
   edittext1.InputType = Android.Text.InputTypes.NumberFlagDecimal; 
```

希望它可以帮助某人

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-13T12:19:16.463

要在 Android Samsung 设备上的数字键盘中使用小数点，请在 EditText 中使用：

```
 android:inputType="numberDecimal" 
```

# javascript - EmberJS 控制器未定义

> ID：11134905
> 
> 赞同：1
> 
> 时间：2012-06-21T09:07:04.493
> 
> 标签：javascript, ember.js, requirejs

所以我今天开始使用 EmberJS。

```
// js/main.js
require.config({
    baseUrl:'js/',
    paths:{
        ember: 'libs/emberjs/ember-0.9.8.1',
        text: 'libs/require/text',
    }
});

// Start the main app logic.
requirejs([
        'ember',
        'app/controller/users'
    ],
    function(ember, UsersController) {
        App = Em.Application.create();
        console.log(UsersController); // undefined
    }
);

// My Controller
// js/app/controller/users.js
define('app/controllers/users', [
    'text!app/views/users/index.handlebar'
],
function( UsersIndexTemplate ) {
    return Ember.Object.create({
        indexView: Ember.View.create({
            template: Ember.Handlebars.compile( UsersIndexTemplate )
        }),
        // Activates the views and other initializations
        init: function() {
            this.get( 'indexView' ).appendTo( '#content' );
        }
    });
}); 
```

我的问题是，为什么控制器未定义？我在阅读 TodoMVC 示例时构建了它，但不明白为什么它的工作方式不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:27:33.040

我找到了答案，太简单了。

要调用主应用程序逻辑，我需要使用`require()`NOT`requirejs()`

# jquery - 带有wordpress自定义主题的Pjax在firebug中给出301错误

> ID：11134915
> 
> 赞同：1
> 
> 时间：2012-06-21T09:07:29.823
> 
> 标签：jquery, wordpress, pjax

我正在尝试在 wordpress 中使用 pjax。但是每当我尝试单击通过 ajax 调用获取内容的链接时，什么都没有发生并且页面加载正常，firebug 控制台显示 301 aborted error 。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:11:07.167

如果您在 wordpress 中使用 ajax，则在您的 theam 的 function.php 文件中执行**操作**，如下例所示

```
add_action('wp_ajax_do_ajax', 'our_ajax_function');
function our_ajax_function(){
     // now we'll write what the server should do with our request here
} 
```

希望它会有所帮助:)

# android - getSupportFragmentManager getFragment 不带标签或 id

> ID：11134926
> 
> 赞同：5
> 
> 时间：2012-06-21T09:07:52.770
> 
> 标签：android, android-fragments, android-viewpager

我正在开发一个 Android 3.1 平板电脑应用程序。

我在一项活动中使用 ViewPager 和片段。我的问题是我不知道如何为片段设置 ID 或标签。

**活动**

```
public class FillEReportFragmentActivity extends FragmentActivity
{
    ...

    /**
     * View Pager to manage form parts.
     */
    private ViewPager mViewPager;
    /**
     * Page Adapter to handle fragments.
     */
    private FillEReportFragmentPagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstance)
    {
        Log.v("FillEReportFragmentActivity", "onCreate");

        super.onCreate(savedInstance);
        setContentView(R.layout.fill_ereport_paged);

        // Recoge los argumentos que le llegan de la actividad padre.
        Bundle extras = getIntent().getExtras();
        if (extras != null)
        {
            qapId = extras.getLong(BundleKeys.qapIdKey);
            orderId = extras.getLong(BundleKeys.orderIdKey);
            eReportId = extras.getLong(BundleKeys.eReportIdKey);
        }

        // Cargamos el E-Report o creamos uno nuevo. Además se recuperan los
        // artículos de la orden actual.
        LoadEReportAsyncTask task = new LoadEReportAsyncTask(this);
        task.execute(Long.toString(this.qapId));

        // Establezco los fragmentos (o partes del form) que se mostrarán en el
        // View Pager.
        mViewPager = (ViewPager)findViewById(R.id.pager);
        mPagerAdapter = new FillEReportFragmentPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mPagerAdapter);

        // Muestro en la parte inferior unos círculos para indicar donde me
        // encuentro dentro del E-Report.
        CirclePageIndicator mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mViewPager);

        // Creo unos tabs para poder navegar más facilmente a través de las
        // partes del E-Report.
        TabPageIndicator titleIndicator = (TabPageIndicator)findViewById(R.id.tabIndicator);
        titleIndicator.setViewPager(mViewPager);
    }

        ...
} 
```

**FragmentPagerAdapter**

```
public class FillEReportFragmentPagerAdapter extends FragmentPagerAdapter
{
    private static final String[] TITLES = new String[] { 
        "Factory", 
        "Items" 
    };

    public FillEReportFragmentPagerAdapter(FragmentManager fm)
    {
        super(fm);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int index)
    {
        switch (index)
        {
            case 0:
                return FactoryInfoFragment.newInstance();
            case 1:
                return ItemsFragment.newInstance();

        default:
            return null;
        }
    }

    @Override
    public int getCount()
    {
        return 2; // TODO: Este número hay que cambiarlo porque serán más.
    }

    public String getPageTitle(int position)
    {
        return TITLES[position];
    }
} 
```

**res/values/ids.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item type="id" name="frag_general_info_factory"/>
    <item type="id" name="frag_general_info_items"/>
</resources> 
```

**工厂信息片段**

```
public class FactoryInfoFragment extends Fragment
{
    public static FactoryInfoFragment newInstance()
    {
        FactoryInfoFragment frag = new FactoryInfoFragment();

        return frag;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState)
    {
        Log.v("FactoryInfoFragment", "onCreateView");

        View v = inflater.inflate(R.layout.frag_general_info_factory, container, false);
    view.setId(R.id.frag_general_info_factory);

        return v;
    }
} 
```

**frag_general_info_factory.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_margin="10dp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:shrinkColumns="*"  
    android:stretchColumns="*">

      <TableRow
        android:weightSum="1"> <!-- 0 -->
    <TextView
        android:id="@+id/txtGenInfo"
        android:layout_span="8"
        android:layout_gravity="center_horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/layout_title_general_information"
        android:textAppearance="?android:attr/textAppearanceLarge" />
      </TableRow>

      ...

</TableLayout> 
```

**在这里我想得到一个特定的片段**

```
private class LoadEReportAsyncTask extends AsyncTask<String, Void, Boolean>
{
    private Context mContext;
    private ProgressDialog loadingDialog;
    private EReport eReport;
    private QAP qap;

    public LoadEReportAsyncTask(Context context)
    {
        Log.v("LoadEReportAsyncTask", "constructor");
        eReport = null;
        qap = null;

        this.mContext = context;
        loadingDialog = new ProgressDialog(mContext);
        loadingDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        loadingDialog.setMessage(getString(R.string.msg_loading_ereport));
        loadingDialog.setCancelable(false);
        loadingDialog.show();
    }

    @Override
    protected Boolean doInBackground(String... params)
    {
        Log.v("LoadEReportAsyncTask", "doInBackground");
        ...
    }

    protected void onPostExecute(Boolean result)
    {
        Log.v("LoadEReportAsyncTask", "onPostExecute");

        FillEReportFragmentActivity parentActivity = (FillEReportFragmentActivity) mContext;
        if (result)
        {
            FactoryInfoFragment factFragment = (FactoryInfoFragment)getSupportFragmentManager().findFragmentById(R.id.frag_general_info_factory);
            factFragment.fillEReport(eReport, qap);

            Toast.makeText(getApplicationContext(), getString(R.string.msg_ereport_got_correct), Toast.LENGTH_SHORT).show();

            ItemsFragment fragment = (ItemsFragment)getSupportFragmentManager().findFragmentById(R.id.frag_general_info_items);
            fragment.setUpArticles(orderArticles);
        }
        else
        {
            Toast.makeText(getApplicationContext(), getString(R.string.msg_ereport_problem), Toast.LENGTH_LONG).show();
        }

        loadingDialog.dismiss();
    }
} 
```

**这里：**

`(FactoryInfoFragment)getSupportFragmentManager().findFragmentById(R.id.frag_general_info_factory);`

我`R.id.frag_general_info_factory`用来获取该片段引用，但我得到一个**null**。

如何将 Tag 或 Id 设置为`FactoryInfoFragment`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:35:06.613

您可以使用`id`ViewPager 将其添加到的 View 来获取 Fragment：

```
 getFragmentManager().findFragmentById(R.id.frameWhichFragmentHasBeenAddedTo); 
```

你的问题是找到这个 id。我已经浏览了源[代码](http://code.google.com/p/openintents/source/browse/trunk/compatibility/AndroidSupportV2/src/android/support/v2/view/ViewPager.java?r=3488)`ViewPager`并且它没有跳出来，如果我建议它使用它自己（a `ViewGroup`）所以你应该在这个实例中使用的 id 是`R.id.pager`；

**注意**

您可能还需要在混合时非常小心`android.support.v4.app.Fragment`-`android.app.Fragment`这意味着使用支持库或 Honeycomb+ API 中的功能之间的区别。

即，如果您使用`android.support.v4.app.Fragment`：

```
 getSupportFragmentManager(); 
```

否则，如果您使用`android.app.Fragment`：

```
 getFragmentManager(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:42:14.433

我没有尝试过，但我不知道`findFragmentById()`在这种情况下是否能正常工作，因为实际上有多个片段与 ViewPager 容器相关联。

如果您查看源代码，`FragmentPagerAdapter`您可以看到它是如何在内部使用标签的。然后，也许您`instantiateItem()`在自定义寻呼机适配器中覆盖，从代码中复制`FragmentPagerAdapter`并调整它以使用您也可以在代码中的其他地方使用的标签来自己检索片段。

例如，如果您的 PagerAdapter 实现可能特定于这一问题，您可以做一些简单的事情：

```
private String getTag(int position) {
    switch (position) {
    case 0:
        return FactoryInfoFragment.class.toString();
    case 1:
        return ItemsFragment.class.toString();
    default:
        return "unknown:" + position;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:38:35.550

在这种情况下，它看起来像`findFragmentById()`并且`findFragmentByTag()`不会完成这项工作，所以我要做的是将你的所有内容存储`Fragments`到一个中`ArrayList<Fragment>`，这样你就可以从你的`Adapter`和`AsyncTask`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:57:44.140

您可以尝试覆盖

```
public Object instantiateItem (ViewGroup container, int position) 
```

在您`FragmentPagerAdapter`保存或设置该容器的 id，`ViewGroup`然后调用`super`.

然后您可以使用该保存`getSupportFragmentManager().findFragmentById()`的 id 来检索片段。

让我知道这是否有效！

# c# - Rhino Mock 在“新”方法调用上使用期望

> ID：11134933
> 
> 赞同：1
> 
> 时间：2012-06-21T09:08:20.320
> 
> 标签：c#, .net, rhino-mocks

是否有可能在 rhino mock 中做某种形式的期望 NEW。

例子：

```
public void ToBeTested()
{
     ClassForExmaple classForExample = new ClassForExample();

     //Other logic.....
} 
```

所以我希望我的单元测试调用 ToBeTested()，但是当调用新的 ClassForExample 时，我希望它返回一个模拟版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:21:41.660

我没有使用过 Rhino mock，我不确定这是否是 RhinoMock 支持的东西，但是对象创建的控制嵌入在方法中的事实违反了 DI/IOC 的原则，因此更难测试.. 理想情况下，该类应该通过包含类的构造函数或方法本身注入到方法中。

因此

```
class A
{
    IClassForExample _classForExample;
    public A(IClassForExample classForExample)
    {
      _classForExample=classForExample;
    }
    public void ToBeTested()
    {
         var classForExample = _classForExample;

         //Other logic.....
    }
} 
```

RhinoSupport 是否扩展了非抽象/接口类 - 我不确定这个问题，但我确信它可以模拟接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:21:16.090

不，这是不可能的，出于同样的原因你不能期待`static`事情：它不是在实例上调用的。

如果您想对在测试代码中构建的对象使用模拟，您应该有这样的东西：

```
internal virtual ClassForExample NewClassForExempe()
{
    return new ClassForExample();
} 
```

然后在你的测试中模拟这个方法。

[注意：假设您在类的InternalsVisibleToAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)中声明了 rhino 模拟，我将方法放在内部。否则，您将不得不将其公开。

# perl - Spreadsheet::WriteExcel write_formula 有问题

> ID：11134938
> 
> 赞同：1
> 
> 时间：2012-06-21T09:08:44.907
> 
> 标签：perl, excel

我正在尝试使用 WriteExcel 编写公式

```
=SUMIF(J3:J54;"=xxx";H3:H54) 
```

但是那个代码：

```
$sheet->write_formula($row+1, 0, "=SUMIF(J" . ($row-($row-3)) . ":J" . ($row-2) . ";\"=xxx\";H" . ($row-($row-3)) . ":H" . ($row-2) . ")"); 
```

以。。结束

> test.pl 第 196 行公式中的未知定义名称 SUMIF

但是当我打印出那个公式（使用打印）时，我得到了与想要的完全相同的字符串（$row 的计算很好）

我很确定这段代码应该可以工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:40:38.627

您需要我们使用美式联合运算符“，”而不是欧式“;”：

```
=SUMIF(J3:J54,"=xxx",H3:H54) 
```

如果您修改公式字符串以替换；，它会工作。我测试了它。

# javascript - Toggle 嵌入循环

> ID：11134939
> 
> 赞同：0
> 
> 时间：2012-06-21T09:08:47.417
> 
> 标签：javascript, loops, embed, toggle

我试图找出一种方法，通过单击链接/图像，能够在当前播放后进行嵌入式对象循环或不再循环。我需要它不改变页面，所以当前的歌曲继续播放。

到目前为止，我已经尝试使用 Javascript GetElementByName 来设置 loop=true/false，而它的默认值当前设置为 true。

```
 <a href="javascript:void(0)" title="To be implimented"><IMG ID=mode SRC=repeat.gif HEIGHT=22 onclick="PlayerMode()">
<script type="text/javascript">

var L=0;
function PlayerMode()
  {
  if(L==0){
  document.getElementById("playmode").loop="true"
  document.getElementById("mode").src="repeat.gif";
  L++;
  }

  else{
  document.getElementById("playmode").loop="false"
  document.getElementById("mode").src="repeatoff.gif";
  L--;
  }}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:18:17.467

如果您希望链接触发 JavaScript 但之后不更改页面，请确保您的`onclick`代码返回`false`. 如果 JavaScript 被禁用或不支持（无论出于何种原因），也使用简单的“#”作为链接`href`将避免任何不良影响或错误消息。

```
<a href="#" onclick="PlayerMode(); return false;">...</a> 
```

作为替代方案，您也可以保留您的代码并让您的函数`return false;`在最后调用（参见最后的截图）：

```
<a href="#" onclick="PlayerMode();">...</a> 
```

一些进一步的优化，我会使用下面的代码（节省你使用全局变量）：

```
function toggleLoop() {
    var player = document.getElementById('playmode');
    document.getElementById('mode').src = (player.loop = !player.loop) ? 'repeat.gif' : 'repeatoff.gif';
    return false;
} 
```

请注意，在您当前的代码中，应该有一个已经考虑播放器循环`L`的初始值。`1`否则，您基本上会在第一次点击时启用循环（这不会改变任何东西）。

# android - 如何在运行时将主题设置为活动？在 onCreate 和 setContentView 之前调用 setTheme 不起作用

> ID：11134943
> 
> 赞同：24
> 
> 时间：2012-06-21T09:09:13.583
> 
> 标签：android, themes

我想`setTheme`在运行时进行活动，我已经通过谷歌搜索了一些解决方案。有人说`setTheme`在 onCreate 和 setContentView 可以工作之前调用，代码部分就像

```
public void onCreate(Bundle savedInstanceState) {
    setTheme(android.R.style.Theme_Translucent_NoTitleBar);
    super.onCreate(savedInstanceState);
    ...
    setContentView(...)
} 
```

但它不起作用，我想知道，是否有另一种解决方案可以将主题设置为活动？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-28T05:26:18.973

`super.onCreate(savedInstanceState);`试试这个 - 在前后设置你的主题`setContentView(...)`

就像下面的代码 -

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setTheme(android.R.style.Theme_Translucent_NoTitleBar); // Set here
    setContentView(...)
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T18:28:24.047

实际上，如果我在调用之前设置它，这只对我有用`super.onCreate(savedInstanceState);`

```
public void onCreate(Bundle savedInstanceState)
{
    final int themeRes = getIntent().getIntExtra(EXTRA_THEME_ID, 0);
    if (themeRes != 0) setTheme(themeRes);
    super.onCreate(savedInstanceState);
    //ect...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-27T07:42:28.513

```
setContentView(...);
setTheme(R.style.MyTheme);
setContentView(...); 
```

一定很好用。。

有关主题的更多信息，请阅读此 [http://entertheinfinity.blogspot.in/2016/06/designing-android-interface-themes.html](http://entertheinfinity.blogspot.in/2016/06/designing-android-interface-themes.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-21T14:44:53.747

在运行时设置主题并修复“黑色背景”问题：

1.  主题应该设置在之前`onCreate()`。

    ```
    public void onCreate(Bundle savedInstanceState) {
        setTheme(android.R.style.Theme_Translucent_NoTitleBar);
        super.onCreate(savedInstanceState);
        ...
        setContentView(...)
    } 
    ```

2.  android 清单中透明活动的主题应设置为具有透明背景的任何主题（例如对话框主题）。

    *   这告诉 Android 操作系统继续在透明活动后面绘制活动，这样您就不会以黑色背景结束。

    *   我正在使用`AppCompatActivity`; 我需要使用一个`AppCompat`主题：

        ```
        <?xml version="1.0" encoding="utf-8"?>
        <manifest
            xmlns:android="http://schemas.android.com/apk/res/android"
            package="com.example.app">
            ...
            <application
                ...>
                ...
                <activity
                    android:name=".TranslucentActivity"
                    android:theme="@style/Theme.AppCompat.DayNight.Dialog"
                    .../>
                ...
            </application>
        </manifest> 
        ```

# nodes - 将宽图的同一等级上的节点分布到不同的行

> ID：11134946
> 
> 赞同：11
> 
> 时间：2012-06-21T09:09:19.760
> 
> 标签：nodes, graphviz, dot

我有一个图表（组织图）如何：

```
digraph G {
nodesep=0.3;
ranksep=0.2;
margin=0.1;
node [shape=rectangle];
edge [arrowsize=0.8];
1 -> 2;
1 -> 3;
1 -> 4;
1 -> 5;
1 -> 6;
1 -> 7;
1 -> 8;
1 -> 9;
1 -> 10;
} 
```

![在此处输入图像描述](../Images/98671bd5b4c37fb94396aa3f916f2fc1.png)

我有 70 人的组织图，用 A4 打印是不可能的。我如何将节点放在 2 或 3 行中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T10:46:59.347

这里有两种可能性（另见[这个问题](https://stackoverflow.com/a/6436178/63733)）：

## 1.使用`unflatten`实用程序

Graphviz 提供了一个名为[`unflatten`](http://www.graphviz.org/pdf/unflatten.1.pdf). 如果您使用此命令行预处理图形：

```
unflatten -l 3 wide.gv | dot -Tpng -o wide.png 
```

输出图像将类似于下图。这稍微不那么宽，您可以使用该`-l`选项。

![graphviz 未展平图示例](../Images/ccadd4b3b2bd28fafb55d9f83cda631d.png)

## 2\. 使用 `rank=same' 和不可见的边缘

您可以使用标准技术使自动布局的图形看起来更像您想要的：

*   `rank=same`*对子图*中的节点进行分组并定义哪些节点应位于同一行
*   不可见边，以确保不同的子图出现在不同的等级上
*   也许有些`constraint=false`边缘会影响布局
*   `group`节点的属性以鼓励直边。

输出图不一定会更漂亮......

这是一个例子，你可能会做得更好。此外，如果图形是动态生成的，这可能不是很实用。

```
digraph G {
nodesep=0.3;
ranksep=0.2;
margin=0.1;
node [shape=rectangle];
edge [arrowsize=0.8];

edge[style=invis];
node[group=a];
2->5->8;
node[group=b];
1->3->6->9;
node[group=c];
4->7->10;

edge[style=solid];
1 -> 2;
1 -> 3;
1 -> 4;
edge[constraint=false];
1 -> 5;
1 -> 6;
1 -> 7;
1 -> 8;
1 -> 9;
1 -> 10;
} 
```

![图形输出](../Images/da6e9961f44474581ad706e2134e260c.png)

# javascript - Monkeytalk JS 获取表格长度

> ID：11134949
> 
> 赞同：1
> 
> 时间：2012-06-21T09:09:23.490
> 
> 标签：javascript, monkey-testing

我有一张表，我需要获取其中的行数。我正在尝试这个

```
this.app.table("#1").length 
```

但它返回 0 或 1。我对 javascript 不是很熟悉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:13:07.673

```
this.app.table("#1").get("x", "size"); 
```

这就是monkeytalk-forum 中的某个人所说的，它正在工作！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:20:02.423

尝试

```
this.app.table("#1")[0].rows.length 
```

# iphone - inappurchase apple id login alert 听“取消”按钮？

> ID：11134951
> 
> 赞同：1
> 
> 时间：2012-06-21T09:09:28.357
> 
> 标签：iphone, objective-c, ios, xcode

我试图弄清楚当用户尝试购买某些东西时，如何收听出现在“Apple ID 密码”警报中的“取消”按钮。你知道吗，苹果官方做的，看起来像：“Apple ID Password. [username] [password] [Cancel] [OK]”

我的流程是用户已经购买，并且再次购买恢复交易以在沙箱环境中登录测试用户`- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions`方法在测试用户登录警报取消时不调用交易失败！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T09:47:30.600

试试这个代码来取消按钮监听器：

您的问题是在`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];` 用户登录警报单击取消 SKPaymentQueue 恢复交易失败并出现错误方法时恢复已完成的交易，使用以下代码来帮助：

```
- (void)paymentQueue:(SKPaymentQueue *)queue restoreCompletedTransactionsFailedWithError:(NSError *)error
{
    NSLog(@"<><Canceled!><>");
} 
```

此方法出现的用户登录警报取消按钮！

欢迎！

# php - 检查是否安装了 MongoDB PHP 驱动程序

> ID：11134959
> 
> 赞同：8
> 
> 时间：2012-06-21T09:09:53.567
> 
> 标签：php, mongodb, driver

我正在为我的应用程序开发安装脚本，我将如何使用服务器上的 PHP 驱动程序检查 MongoDB 是否已安装？

非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T09:22:16.343

检查它的最简单方法是运行：

```
echo extension_loaded("mongo") ? "loaded\n" : "not loaded\n"; 
```

另见： http: [//php.net/manual/en/function.extension-loaded.php](http://php.net/manual/en/function.extension-loaded.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T09:12:57.557

[get_loaded_extensions](http://jp.php.net/manual/en/function.get-loaded-extensions.php) — 返回一个数组，其中包含已编译和加载的所有模块的名称。

```
print_r(get_loaded_extensions()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T09:22:50.837

您可以使用检查[`class_exists`](http://php.net/manual/en/function.class-exists.php)

```
if (class_exists('Mongo')) {
   // MongoDB is installed
}
else {
   // MongoDB is not installed
} 
```

# java - 附加日志记录 JBehave

> ID：11134963
> 
> 赞同：7
> 
> 时间：2012-06-21T09:10:04.003
> 
> 标签：java, logging, selenium-webdriver, bdd, jbehave

场景是这样的：

我们使用 JBehave 和 Selenium 进行系统、集成和端到端测试。我正在检查超过 20 个值的页面上的计算结果以进行验证。使用 Junit Assert，整个测试将在其中一个值不正确的第一个实例上失败。我想做的是，如果遇到断言失败，那么测试将继续执行，这样我就可以在一次测试运行而不是多次测试运行中整理所有不正确的值。

为此，我捕获断言并将验证失败的任何内容写入日志文件。这给我留下了几个问题：

1) 我写出断言失败的日志文件不包含发生异常时正在运行的 JBehave 故事或场景的名称。

2) JBehave 故事或场景被列为“通过”，我希望它被列为“失败”。

有什么方法可以将故事和场景的名称记录到附加日志文件中，或者将附加日志记录写入 JBehave 日志文件？

如何将故事/场景标记为失败？

在 JBehave 配置中，我有：

```
configuredEmbedder()
    .embedderControls()
    .doIgnoreFailureInStories(true)
    .doIgnoreFailureInView(false)
    .doVerboseFailures(true)
    .useStoryTimeoutInSecs(appSet.getMaxRunningTime()); 
```

和

```
.useStoryReporterBuilder(
    new StoryReporterBuilder()
    .withDefaultFormats()
    .withViewResources(viewResources)
    .withFormats(Format.HTML, Format.CONSOLE)
    .withFailureTrace(true)
    .withFailureTraceCompression(true)
    .withRelativeDirectory("jbehave/" + appSet.getApplication()) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T18:29:40.210

是的，您可以创建自己的 StoryReporter：

```
 public class MyStoryReporter implements org.jbehave.core.reporters.StoryReporter{
     private Log log = ...

     @Override
     public void successful(String step) {
        log.info(">>successStep:" + step);
     }

    @Override
    public void failed(String step, Throwable cause) {
        log.error(">>error:" + step + ", reason:" + cause);
    }

     ...
 } 
```

并像这样注册它：

```
.useStoryReporterBuilder(
    new StoryReporterBuilder()
         .withReporters(new MyStoryReporter())
.. 
```

# delphi - 创建运行时 TTabItem , firemonkey

> ID：11134965
> 
> 赞同：2
> 
> 时间：2012-06-21T09:10:09.120
> 
> 标签：delphi, firemonkey

好像我需要一些项目帮助。我有一个例程，它将运行时多个 TabItems 构建到 firemonkey 中的页面控件上，并且我希望在选项卡上有一个关闭按钮。新选项卡有一个复选框，用于从 tabitems 的样式器加载关闭按钮。该页面有一个默认选项卡，并且在某个按钮内，我正在添加运行时新选项卡项。我已经设法应用事件来关闭默认标签页，但在运行时创建的标签页中不起作用。任何帮助，将不胜感激。

这是运行时 tabitems 的一段代码

```
procedure TForm1.Button1Click(Sender: TObject);
var
  t : TTabItem;
  o : TFmxObject;
  i : Integer;
  c : TControl;
begin
  t := TTabItem.Create(pgeControl);

  t.Parent := pgeControl;

  o := FindBinding('imgCloseTabPage');
  if o<>nil then
  begin
    for i := 0 to ComponentCount - 1 do
    begin
      if Components[i] is TCheckBox then
      begin
        TCheckBox(Components[i]).OnClick := CheckBox1Click;
      end;
    end;
  end;

  if pgeControl.TabCount - 1 <= nTab then
  begin
    nTab := nTab + 1;
    t.Index := nTab
  end
  else
  begin
    t.Index := pgeControl.TabCount - 1;
    nTab := pgeControl.TabCount - 1;
  end;
  t.Tag := nTab;

  t.Text := 'Some text...' + ' ' + IntToStr(nTab);
  t.Name := 'tabPatient' + IntToStr(nTab);

  t.Height := 35;
  t.Width := 250;
  t.Margins.Top := 0;
  t.Margins.Left := 0;
  t.Margins.Bottom := 0;
  t.Margins.Right := 0;

  t.Padding.Top := -5;
  t.Padding.Left := 0;
  t.Padding.Bottom := 0;
  t.Padding.Right := 0;

  t.TextAlign := TTextAlign.taLeading;
  t.Width := (Length(t.Text) * 6 ) + 60;
  t.Font.Size := 15;
  t.StyleLookup := 'tabMainStyle1';

  l := TLayout.Create(t);
  l.Parent := t;
  l.Align := TAlignLayout.alClient;
  l.Margins.Top := -5;
  l.Margins.Left := 5;
  l.Margins.Right := 5;
  l.Margins.Bottom := 5;
  l.Padding.Top := 0;
  l.Padding.Left := 0;
  l.Padding.Bottom := 0;
  l.Padding.Right := 0;

  pgeControl.ActiveTab := pgeControl.Tabs[pgeControl.TabCount - 1];
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:21:58.243

您应该在应用自定义样式**后**调用 FindBinding 。目前你**之前**调用过这个，所以它找不到对象。此外，您在寻找对象时出现了错误。

所以把这个

```
o := t.FindBinding('imgCloseTabPage');
if o<>nil then
begin
  if o is TCheckBox then
    TCheckBox(o).OnClick := CheckBox1Click;
end; 
```

后

```
t.StyleLookup := 'tabMainStyle1'; 
```

并且应该分配事件。

# django - 无法登录 facebook (django-socialregistration)

> ID：11134973
> 
> 赞同：0
> 
> 时间：2012-06-21T09:10:24.787
> 
> 标签：django, facebook, social, facebook-access-token

我正在使用 django-socialregistration 应用程序允许人们通过 FB 登录我的网站。

```
http://django-socialregistration.readthedocs.org/en/latest/index.html 
```

对于 twitter，它工作正常，但对于 facebook，它在用户登录到 fb 后不断返回此错误：

```
Credentials could not be validated, the provider returned no access token. 
```

这是应用程序中设置的错误，将在函数中返回（应用程序附带）：

```
def get_access_token(self, code=None, **params):
    """
    Return the memoized access token or go out and fetch one.
    """
    if self._access_token is None:
        if code is None:
            raise ValueError(_('Invalid code.'))

        self.access_token_dict = self._get_access_token(code, **params)
        try:
            self._access_token = self.access_token_dict['access_token']
        except KeyError, e:
            raise OAuthError("Credentials could not be validated, the provider returned no access token.") 
```

所以我猜找不到或检索到访问令牌。

当我输入 url 时，Facebook 调试器工具会返回这个，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-   html40/loose.dtd">
<html>
<head><meta http-equiv="content-type" content="text/html; charset=utf-8"></head>
<body><p>Session expired.</p></body>
</html> 
```

这是网址：

```
www.site.com/social/facebook/callback/?code=AQCb0lWCOTKFYaCQ43imfKvsMgo-8wyA8aq1WxZDWuCel2868I6gou2rn4bN2kTyuL14FxR9cCvrilJB2R5-JOnQqCvo7ihQAi9outrUB81MQdU-XA-5ur7MT5Wlhz3wkb5bc0fwzUYYFpSyeHNjFrIOY6QdZNdrXLcivv1-3qMNOKijLHf0jmZc7bBqPBTkw-Q#_=_ 
```

FB调试器所说的响应代码是200。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:25:22.847

在此处查看解决方案：[https ://github.com/flashingpumpkin/django-socialregistration/issues/160](https://github.com/flashingpumpkin/django-socialregistration/issues/160)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:27:46.067

这可能不是您问题的解决方案，但它会产生更多信息来说明问题所在。

更改上面的代码以转储`access_token_dict`到标准输出：

```
 def get_access_token(self, code=None, **params):
        """
        Return the memoized access token or go out and fetch one.
        """
        if self._access_token is None:
            if code is None:
                raise ValueError(_('Invalid code.'))

            self.access_token_dict = self._get_access_token(code, **params)
            try:
                self._access_token = self.access_token_dict['access_token']
            except KeyError, e:
                print self.access_token_dict
                raise OAuthError("Credentials could not be validated, the provider returned no access token.") 
```

`socialregistration`由于初始化和回调 URL 不匹配而发生的最常见错误- 例如，您从Django 无法访问您的会话的位置开始`http://localhost:8000`并重定向回。`http://127.0.0.1:8000/*/callback/``localhost`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T19:53:28.487

您必须转到您的应用程序高级设置（转到[http://developers.facebook.com](http://developers.facebook.com)并导航到您的应用程序 -> 设置 -> 高级）并将您的服务器 IP 添加到白名单中。

我在这里解决了这个问题。

# report - Openerp6.0中rml报告中的页码格式

> ID：11134974
> 
> 赞同：1
> 
> 时间：2012-06-21T09:10:32.037
> 
> 标签：report, openerp, rml

在 rml 报告中，我如何将当前页码格式从 page:1 、page:2 等更改为不同的格式。例如：

page:1/2 在第一页和

page:2/2 在第二页...

我怎样才能做到这一点 ？我正在使用openerp6.0 目前我在openerp界面的公司页面中使用以下代码来获取页码。

```
<drawCentredString x="18.5cm" y="1.5cm"> Page: <pageNumber/></drawCentredString> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:37:37.170

这适用于我的 OpenERP 版本 6.1.1

更改是在我的 Ubuntu 服务器中完成的：

```
/opt/openerp/server/openerp/report/render/rml2pdf/trml2pdf.py 
```

然后使用以下命令重新启动 openerp-server：

```
sudo service openerp-server restart 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:34:25.810

我的问题得到了解决，只需应用以下补丁。

```
# HG changeset patch
# Parent 3fda5d5bbae001d42c56b5281e56fb2be0c8aa58
[FIX] use real page count for <pageCount/> flowable

diff --git a/bin/report/render/rml2pdf/trml2pdf.py b/bin/report/render/rml2pdf/trml2pdf.py
--- a/bin/report/render/rml2pdf/trml2pdf.py
+++ b/bin/report/render/rml2pdf/trml2pdf.py
@@ -118,7 +118,7 @@
 def draw(self):
     self.canv.beginForm("pageCount")
     self.canv.setFont("Helvetica", utils.unit_get(str(8)))
-        self.canv.drawString(0, 0, str(self.canv.getPageNumber()))
+        self.canv.drawString(0, 0, str(self.canv._pageCount))
     self.canv.endForm()

class PageReset(platypus.Flowable): 
```

# c - 使用 memset 和 int 值初始化整数数组 - 失败

> ID：11134976
> 
> 赞同：4
> 
> 时间：2012-06-21T09:10:36.613
> 
> 标签：c, cuda, initialization, fill, memset

我正在为 CUDA 程序编写主机代码，因此我无法使用标准 C 函数。我在使用该`memset`函数初始化整数数组的元素时遇到问题。我的印象是你可以用它`memset`来初始化一个整数数组，例如，像这样的所有 4：

```
int num_elements = 10;
int* array_example = (int*)malloc(num_elements * sizeof(int));
memset(array_example, 4, sizeof(array_example)); 
```

但是当我这样做时，它会将每个字节而不是每个字节设置`int`为 4。如果我说：

```
memset(array_example, 4, 1); 
```

我在第一个整数中得到 4，如果我说：

```
memset(array_example, 4, 2); 
```

我在第一个整数中得到 1024，在第二个整数中得到 0。我了解该`memset`函数将第三个参数中指定的字节数设置为 4，但是有没有办法使用 memset 将每个整数设置为 4 而不是每个字节？否则，我是否会使用 for 循环？我的 GPU 的计算能力很低，因此我无法访问一些更好的 CUDA 附加功能，这些附加功能允许更多的 C++ 使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:20:01.867

如果您知道表格的大小并希望将每个元素设置为某个值，您可以随时编写：

```
int array[10] = { 4, 4, 4, 4, 4, 4, 4, 4, 4, 4 }; 
```

如果你使用 gcc，你也可以这样做：

```
int array[10] = {[0 ... 9] = 4}; 
```

当您必须动态分配数组时，我怀疑是否有任何替代解决方案，然后只使用一个简单的循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T09:59:53.407

考虑到 int 本身的表示（例如 2-complement），如果表示 int 值的位具有逐字节常量的模式，则可以成功使用 memset（不是幸运问题）。

例如，如果您将数组设置为 4，则结果是每个 int 都使用 0x04040404 进行初始化（考虑 sizeof(int)=32），这取决于您的需要是否可以。

这适用于整数的初始化值的一些特定值。

但这导致几乎没有可移植的代码。

如果您要将每个 int 初始化为零，它应该始终有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T14:51:54.797

尽管我会添加一个选项并贡献几点：

1.  如果您使用的是 C++ 而不是 C，请尝试使用[`std::fill()`](http://www.cplusplus.com/reference/algorithm/fill/)通用的 - 并让编译器担心优化：

    ```
    std::fill_n(my_array, array_length, constant_value); 
    ```

2.  的签名`memset()`是：

    ```
    void *memset(void *s, int c, size_t n); 
    ```

    虽然它应该需要一个`int`，但它实际上需要一个（n 无符号）字节值（即介于`0`和之间`0xFF`）。

3.  继续[工具的答案](https://stackoverflow.com/a/15335668/1593077)-您可以执行的一些有用的 memset'ing 相当于使用（无符号）整数将数组设置为 0 或 to `UINT_MAX`，即 to`0xFFFF`或`0xFFFFFFFF`等，具体取决于`sizeof(unsigned)`.

4.  如果我们有[strided`memset()`](https://stackoverflow.com/questions/5138084/memset-with-stride)，您可以应用这两个中的四个，将 4 字节整数设置为一个数组。然而，我们没有，事实上，目前看来这样做比仅仅循环没有任何优势。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T09:19:25.673

写入整数的 memset 没有标准的替代方案。你必须写一个循环。

# mysql - 将表单字段保存在 MySQL DB 中使用 Flex

> ID：11134980
> 
> 赞同：0
> 
> 时间：2012-06-21T09:10:49.653
> 
> 标签：mysql, apache-flex, flex4, flex4.5, flexbuilder

我有一个 MySQL 数据库，我创建了一个数据库并将其命名为“PERSONDB”。在该数据库中，我创建了一个表并将其命名`Person`。此表有 3 个字段。`id,name,age`.

现在我需要将一些值从我的 flex 网站保存到我创建的 mySQL 'PERSONDB' 中。

我如何在 Flex 中做到这一点（Flax builder 4.6）

注意：我在 Flex 项目中添加了 2 个字段名称和年龄，当用户单击按钮时，我需要将这些值保存在数据库中。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:03:47.107

asSQL ( [http://code.google.com/p/assql/](http://code.google.com/p/assql/) ) 是使用 mySQL 的好方法。它允许从 AIR 或基于 Web 的任何应用程序直接访问 mySQL。我在编码中经常使用它，因此我不必编写 Java 或 PHP 作为后端，除非有充分的理由设置后端。

好的，这是我使用的代码：

```
 <assql:MySqlService id         ="DB"
                        hostname   ="localhost"
                        username   ="user"
                        password   ="password"
                        database   ="db"
                        autoConnect="true"
                        connect    ="handleConnected(event)"
                        sqlError   ="handleError(event)"/>

        private function getSelectedData() : void
        {
            DB.send("SELECT * from table WHERE number = '" + number.text + "'");
        } 
```

仅此而已。顶部设置连接，位于代码部分。其余部分在部分（ActionScript）中。当然，也可以直接在 ActionScript 中完成，但是这个解决方案使用了 MXML。

# php - 在mysql中用php更新值NULL

> ID：11134984
> 
> 赞同：0
> 
> 时间：2012-06-21T09:10:57.430
> 
> 标签：php, mysql, null

我有这个查询：

```
UPDATE `terms` 
   SET id = '15',
       taxonomy_id = '1',
       parent_id = NULL,
       level = 0,
       position = 1,
       active = '1',
       time_created = '2012-05-24 09:31:12',
       time_updated = '0000-00-00 00:00:00' 
 WHERE id = 15 
```

我想用 php 将 parent_id 设置为 NULL，但我该怎么做呢？
这些是错误的：

`$term->parent_id = 'NULL';`-> 这是一个字符串
`$term->parent_id = NULL;`-> 这是空
`$term->parent_id = 0;`的 -> 这是一个整数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:52:36.007

我的数据库类有问题，这就是为什么我的 parent_id 值总是空的，
这就是我修复它的方法：

旧代码：

```
public function set($data)
    {
        $this->query .= ' SET ';

        if(is_object($data))
            $data = get_object_vars($data);

        if(is_array($data))
        {
            $l = count($data);
            $t = 1;
            foreach($data as $k => $v)
            {
                $this->query .= $k . ' = ' . ((is_string($v)) ? '\'' . $this->_escape($v) . '\'' : $this->_escape($v));
                if($t < $l)
                    $this->query .= ',';
                $t++;
            }   
        }
        else
        {
            $this->query .= $data;
        }

        return $this;
    } 
```

新代码：

```
public function set($data)
    {
        $this->query .= ' SET ';

        if(is_object($data))
            $data = get_object_vars($data);

        if(is_array($data))
        {
            $l = count($data);
            $t = 1;
            foreach($data as $k => $v)
            {
                $this->query .= $k . ' = ';
                if(is_string($v))
                {
                    $this->query .= '\'' . $this->_escape($v) . '\'';
                } elseif (is_null($v)) {
                    $this->query .= 'NULL';

                } else {
                    $this->query .= $this->_escape($v);
                }

                if($t < $l)
                    $this->query .= ',';

                $t++;
            }   
        }
        else
        {
            $this->query .= $data;
        }

        return $this;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T09:14:38.697

**查询应为：**

一些查询编辑器需要 NULL 作为 null

```
UPDATE `terms` SET 
    id = '15',
    taxonomy_id = '1',
    parent_id = null,
    level = 0,
    position = 1,
    active = '1',
    time_created = '2012-05-24 09:31:12',
    time_updated = '0000-00-00 00:00:00' 
WHERE 
    id = 15 
```

# android - 如何根据两个微调器上的项目选择执行条件？

> ID：11134988
> 
> 赞同：0
> 
> 时间：2012-06-21T09:11:04.893
> 
> 标签：android, spinner

我的应用程序中有两个微调器。我希望如果我从微调器 1 中选择“第一”选项，从微调器 2 中选择“第二”选项，则执行该操作。但它显示“NUMBERFORMATEXCEPTION”。

这是代码

```
 if (((spinner.getItemAtPosition(pos).toString()=="first" &&        
(s2.getItemAtPosition(id).toString()=="second"))))
   {

       tv.setText(String.valueOf(gmtomilli(x)));
   } 
```

此代码有错误，如果我省略此代码，则应用程序运行正常，无需操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T09:12:31.567

使用进行`String`比较。`equals`

```
spinner.getItemAtPosition(pos).toString()=="first" 
```

改为使用：

```
spinner.getItemAtPosition(pos).toString().equals("first") 
```

同样适用于：

```
s2.getItemAtPosition(id).toString()=="second" 
```

改为使用：

```
s2.getItemAtPosition(id).toString().equals("second") 
```

阅读[此](https://stackoverflow.com/questions/767372/java-string-equals-versus)内容以获取更多信息。

`==`比较引用，而不是值。在您的情况下，您要检查值相等，而不是引用相等。

* * *

编辑：

既然你提到你的代码正在生成`NumberFormatException`，我可能相信要么`pos`或要么`id`是`String`生成`NumberFormatException`.

* * *

编辑2：

根据您的评论：

```
float x=Float.parseFloat(String.valueOf(et.getText())); 
```

您`getText()`返回的 a`String`无法实际解析为 a `float`。尝试检查内容是否实际上是`float`格式`String`。此外，`String.trim()`在解析之前使用以确保您`String`不包含任何生成`NumberFormatException`.

# jquery - 使2个链接在列中具有相同的高度？

> ID：11134990
> 
> 赞同：0
> 
> 时间：2012-06-21T09:11:07.213
> 
> 标签：jquery, css

我有一个设置，我在页面上有一个无序列表`x <li><a href="#">Link text</a></li>.`

它们通过 CSS 设置为每个 50% 的宽度，所以我每行有 2 个项目。我的问题是一行上有 2 个链接，因为它们有不同的链接文本，所以它们的高度可能会有所不同。我的问题是；我如何通过 jQuery 在同一行上为每个设置相同的高度（a 是带有边框底部的样式，所以如果它们对齐会看起来最好）？但并非所有部分都应具有相同的高度，仅在“公关线”的基础上。

希望它有意义:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:30:00.120

您要实现的称为具有***可变行高的******网格布局***。在 HTML 中做到这一点的唯一方法是 table 元素。

 *如果你真的想这样做，你将不得不牺牲你的标记的语义在结果之美的祭坛上。

你应该做的是创建一个两列的表，并将你以前`li`元素的内容放在`td`表的元素中。使用 td 的 vertical-align 属性及其样式属性来满足您的设计需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:32:49.157

这是小提琴：http: [//jsfiddle.net/aSJSm/1/](http://jsfiddle.net/aSJSm/1/)

这是代码：

`<html>`：

```
<ul>
<li><a href="javascript:void(0)">Item1 bla bla bla</a></li>
<li><a href="javascript:void(0)">Item2</a></li>
<li><a href="javascript:void(0)">Item3</a></li>
<li><a href="javascript:void(0)">Item4 ala bala bala</a></li>
<li><a href="javascript:void(0)">Item5</a></li>
<li><a href="javascript:void(0)">Item6</a></li>
<li><a href="javascript:void(0)">Item7</a></li>
<li><a href="javascript:void(0)">Item8</a></li>
</ul>​ 
```

`<css>`：

```
ul{
 width: 200px;   
 float:none;
}
ul li a{
 width: 50%;   
 float: left;   
 border-bottom: 1px solid black;    
}​ 
```

`<javascript>`：

```
var setList = function(){
    var listItems = $('ul').children();
    $.each(listItems, function(index){
        if (index % 2 == 0){
            var leftElementHeight = $(this).children('a').height();
            var rightElementHeight = $(this).next().children('a').height();
            if (leftElementHeight < rightElementHeight)
                $(this).children('a').css("height", rightElementHeight);
            else
                $(this).next().children('a').css("height", leftElementHeight);
        }    
    });
}
setList();​ 
```

确保您包含在 $(document).ready(function(){}) 中并且您拥有最新的 jquery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T09:54:44.453

如果你真的想在 jQuery 中这样做，你可以这样做：

```
​$('li:even').each(function(){ 

    var leftHeight = $(this).height();
    var rightHeight = $(this).next().height();

    var newHeight = (leftHeight <= rightHeight) ? rightHeight : leftHeight;

    $(this).next().andSelf().height(newHeight);

});​​​​​​​​​​ 
```

JSFiddle：http: [//jsfiddle.net/svenhanssen/VEnXp/](http://jsfiddle.net/svenhanssen/VEnXp/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T09:17:20.617

为 2 个链接设置一个 ID 或类。并使用以下方法设置高度。

```
$("#id").css("height", '100px'); 
```*

# oracle - 查询以查找所有空表

> ID：11134992
> 
> 赞同：5
> 
> 时间：2012-06-21T09:11:19.030
> 
> 标签：oracle, oracle11g

考虑到我有一个名为 SBST 的模式

我想在这个 SBST Schema 中找到所有空表列表。是否有任何 PL/SQL 程序可以找到它。我发现很少。但是那些正在使用我无法指定模式名称 SBST 的用户表。

我正在使用这个

```
select table_name from dba_tables where owner ='SBST'
having count(*)=0  group by table_name 
```

上面的查询有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:13:50.907

类似于@shareef 的答案，但使用[动态 SQL](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm)来避免创建临时`.sql`文件。您需要[`dbms_output`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_output.htm)可见，例如[`set serveroutput on`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve040.htm#sthref2166)在 SQL*Plus 中 - 不了解 Toad。

```
declare
    cursor c(p_schema varchar2) is
        select 'select ''' || table_name || ''' from ' ||
            p_schema ||'.' || table_name || ' where rownum < 2 ' ||
            ' having count(*) = 0' as query
        from all_tables
        where owner = p_schema
        order by table_name;
    l_table all_tables.table_name%TYPE;
begin
    for r in c('SBST') loop
        begin
            execute immediate r.query into l_table;
        exception
            when no_data_found then continue;
        end;

        dbms_output.put_line(l_table);
    end loop;
end;
/ 
```

Using`all_tables`似乎比`dba_tables`这里更有用，所以你知道你可以从它列出的表中进行选择。我还在`from`子句中包含了模式，以防其他用户有同名的表，因此如果您以不同的用户身份连接，您仍然可以看到它 - 也可能避免同义词问题。

* * *

具体来说，您的查询出了什么问题……您的`having`and`group by`子句使用了错误的方法；但无论如何它总是不会返回任何数据，因为如果 SBST 有任何表，那么它`count (*) from dba_tables`必须是非零的，所以`having`总是匹配；如果没有，那么，无论如何都没有数据，所以没有什么`having`可以匹配的。您正在计算有多少表，而不是每个表中有多少行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-19T12:23:51.367

您可以触发以下查询以查找没有数据的表列表

```
select * from ALL_TABLES 
where owner ='SBST'
AND NUM_ROWS = 0; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T09:20:15.107

直截了当的答案是

```
select 'select ''' || table_name || ''' from ' || table_name || ' 
    having count(*) = 0;' from dba_tables where owner='SBST'; 
```

**解释**

你可以运行这个......它只会输出那些没有行的表名：假设你使用 sqlplus 但我用 toad 来测试它，它工作得很好 set echo off heading off feedback off lines 100 pages 0;

```
spool tmp.sql
select 'select ''' || table_name || ''' from ' || table_name || ' 
having count(*) = 0;' from user_tables where owner='SBST';
spool off;

@tmp.sql 
```

如果你打开“tmp.sql”文件，你会看到所有的表......

```
select 'PERSONS' from PERSONS having count(*) = 0;
select 'DEPARTMENT' from DEPARTMENT having count(*)=0; 
```

**在您的情况下，如果您与用户SBST**连接，则您想要一个架构，并且架构是用户权限，但如果您与其他用户连接，则必须使用**DBA_TABLES**并将**所有者**属性分配给**SBST**

> **USER_TABLES**是您拥有的表**ALL_TABLES**是拥有的表，其他用户的表所有者，您已被授予对 DBA_TABLES 的显式访问权限**是**数据库中的所有表

像这样

```
set echo off heading off feedback off lines 100 pages 0;

spool tmp.sql
select 'select ''' || table_name || ''' from ' || table_name || ' 
having count(*) = 0;' from dba_tables where owner='SBST';
spool off;

@tmp.sql 
```

> 这三个都是底层 SYS 表的视图，但是 USER_ 和 ALL_ 视图加入了您的用户名/安全信息以限制结果

![我的结果图片上传](../Images/bfe59ba60a805a356e0f31e0f7edc828.png)

**概括 **

请运行此查询

```
select 'select ''' || table_name || ''' from ' || table_name || ' 
    having count(*) = 0;' from dba_tables where owner='SBST'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-03T08:20:11.220

如果表统计信息是最新的，那么您可以使用：

```
SELECT TABLE_NAME
FROM ALL_TAB_STATISTICS
WHERE (OWNER = 'ME')
  AND (NUM_ROWS = 0); 
```

# excel - Sumproduct 与 Substitute

> ID：11134993
> 
> 赞同：1
> 
> 时间：2012-06-21T09:11:19.243
> 
> 标签：excel, excel-2007

我有一个范围，包含数值和空白单元格。一些数值将以 * 作为后缀。

```
10* 5 7  9  25* 10 
```

当我执行 SUM(A1:A8) 时，我得到 5+7+9+10 = 31 的结果，即所需的输出。现在，无论 * 后缀如何，我还需要总和。我正在尝试通过使用来解决

```
SUMPRODUCT(SUBSTITUTE(A1:A8,"*","")) 
```

结果是

```
SUMPRODUCT({"10","5","7","","9","","25","10"}) 
```

并输出 0 因为都是文本值。当我使用

```
SUMPRODUCT(value(SUBSTITUTE(A1:A8,"*",""))) 
```

结果是

```
SUMPRODUCT({10,5,7,#VALUE!,9,#VALUE!,25,10}) 
```

最后输出#Value!。有人可以帮我解决这个问题吗？谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T09:42:13.863

我认为空白是问题所在，因为当您使用 =VALUE("") 时会出现错误。尝试将零连接到 SUBSTITUTE 的开头，以便空白变为零

`=SUMPRODUCT(VALUE(0&SUBSTITUTE(A1:A8,"*","")))`

或者您可以使用 +0 代替 VALUE，即

`=SUMPRODUCT((0&SUBSTITUTE(A1:A8,"*",""))+0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T09:38:32.537

尝试

```
=SUM(VALUE(SUBSTITUTE(A1:A8,"*",""))) 
```

并使用 Ctrl + Shift + Enter 输入，而不仅仅是 Enter。这使它成为一个数组公式，并将`A1:A8`范围视为`SUBSTITUTE()`函数的数组。因此，`SUBSTITUTE()`现在分别评估 A1:A8 中的每个单独的值。`VALUE()`将文本转换为数字，然后 sum() 将它们全部相加。

**编辑：**这个公式`=SUMPRODUCT(VALUE(SUBSTITUTE(A1:A8,"*","")))`似乎对我有用。（普通公式，不是数组公式）。

# sql-server-2008 - 由于日期参数，实体框架的存储过程很慢

> ID：11134995
> 
> 赞同：1
> 
> 时间：2012-06-21T09:11:27.220
> 
> 标签：sql-server-2008, entity-framework

我发现了一个有趣的问题，即存储过程从实体框架执行得非常慢。我已经解决了这个问题，但我想听听是否有人能告诉我为什么该解决方案有效。

**问题**

我有一个接收**DATETIME类型的****@date**参数的存储过程**GetLoginCount**。当我直接在数据库上执行此存储过程时，它会在一秒钟内执行。通过我的应用程序通过**Entity Framework**执行时，大约需要 45 秒。

 ******我尝试在存储过程上使用 WITH RECOMPILE 并清除服务器上的执行计划，以确保它没有缓存一些未使用正确索引的执行计划的慢版本。

**经过 2 天的实验后快进**，我发现如果我简单地将以下内容放在存储过程的开头：`DECLARE @date1 DATETIME = @date`并改用 @date1，存储过程会在 1 秒内执行，同样来自实体框架。

**为什么？**

我已经解决了我的问题，一切都很好，但我需要知道**为什么**这个特定的解决方案有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:42:00.097

Martin Smith 在评论中给出了正确答案，但由于他没有将其作为答案，我将其插入此处，因此我可以正确地将问题标记为已回答：

“分配给一个变量并使用该变量禁用参数嗅探。即 SQL Server 不再有一个特定的日期，它可以在统计信息中查找以获取选择性估计，并且只是根据 OPTIMIZE FOR UNKNOWN 进行猜测”

使用**OPTIMIZE FOR UNKNOWN**确实可以解决问题。******

# ios - 不同国家的联系地址格式

> ID：11134997
> 
> 赞同：4
> 
> 时间：2012-06-21T09:11:35.317
> 
> 标签：ios, iphone, objective-c, ipad

在一个应用程序中，我使用***ABRecordRef***显示联系人的详细信息。我正在使用键***kABPersonAddressCityKey****、**kABPersonAddressStateKey**、**kABPersonAddressZIPKey**、**kABPersonAddressCountryKey***。一切正常。但我不知道以哪种格式显示地址。我的意思是，如果您看到***联系人应用程序***，地址会以不同国家的特定格式显示。一些例子，

**我们**

> 街道
> 城市国家邮政编码
> 国家

**印度**

> 街道
> 省
> 城市 PIN
> 国家

**澳大利亚**

> 街道
> 郊区州邮政编码
> 国家

现在我不知道如何找到不同国家的格式。

1.有没有办法根据国家/国家代码找到地址格式？
2.有没有一种方法可以使用单个函数获取完全格式化的地址，例如我们使用**ABRecordCopyCompositeName()**来获取全名？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-15T14:37:10.407

从 iOS 9.0 / macOS 10.11 / watchOS 2.0 开始，您应该使用[CNPostalAddressFormatter](https://developer.apple.com/reference/contacts/cnpostaladdressformatter)代替：

> CNPostalAddressFormatter 类格式化联系人中的邮政地址。此类处理邮政地址的国际格式。

下面的代码在 Swift 3 中，但将其转换为 Objc 很简单

```
let postalAddress = CNMutablePostalAddress()
postalAddress.street = street
postalAddress.postalCode = zipCode
postalAddress.city = city
postalAddress.state = state
postalAddress.country = country
postalAddress.isoCountryCode = countryCode

let formattedAddress = CNPostalAddressFormatter.string(from: postalAddress, style: .mailingAddress) 
```

确保您设置了 ISO 国家代码属性，该属性用于确定地址的格式。

例子：

```
postalAddress.street = "Main Street 1"
postalAddress.postalCode = "67067"
postalAddress.city = "Ludwigshafen"
postalAddress.state = "Rhineland-Palatinate"
postalAddress.country = "Germany"
postalAddress.isoCountryCode = "DE" 
```

导致这个

> 大街 1 号
> 
> 67067 路德维希港
> 
> 德国

然而

```
postalAddress.isoCountryCode = "US" 
```

导致

> 大街 1 号
> 
> 路德维希港莱茵兰-普法尔茨 67067
> 
> 德国

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T05:44:45.607

试试这个链接 [ABCreateStringWithAddressDictionary](http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/AddressBookUI_Functions/Reference/reference.html)

看起来您需要使用：`ABCreateStringWithAddressDictionary`这将返回：

> 从地址属性返回格式化的地址。（来自苹果）

祝你好运