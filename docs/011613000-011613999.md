# StackOverflow 问答 11613000-11613999

# asp.net-mvc-3 - 按钮单击在 MVC3 中不起作用？

> ID：11613001
> 
> 赞同：0
> 
> 时间：2012-07-23T12:57:36.750
> 
> 标签：asp.net-mvc-3

大家好，这是我的aspx页面

```
 <body>
   <% Html.BeginForm("AssignWork", "Project", FormMethod.Post); %>
     <form action="AssignWork.aspx" method="post"></form>
<%:Html.ValidationSummary(true)%>
<div>

<div></div><div style="margin:62px 0 0 203px;"><a style="color:Orange;">Projects : </a><%:Html.DropDownList("Projects")%></div>
<fieldset style="color:Orange;">

    <legend>Employees</legend>
      <% foreach (var item in Model)
         { %>  
              <div>
              <%:Html.CheckBox("EmployeId",new { value=item.EmployeeName})%>
              <%:Html.LabelForModel(item.EmployeeName)%>
              </div>
      <%} %>          
       <p>

</p>       
</fieldset> 
<input type="button" value="Assign" name="Assign" />      
</div>
    <% Html.EndForm(); %>
 </body> 
```

这是我的问题，当我单击“分配”按钮时，它不会进入我控制的 post 方法。我在弹出窗口中显示此页面。谁能告诉我我哪里做错了。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:00:08.670

尝试提交输入而不是按钮

```
<input type="submit" value="Assign" name="Assign" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:00:36.560

将按钮的类型更改为“提交”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:03:22.840

你没有`Html.BeginForm()`正确使用。代替

```
<% Html.BeginForm("AssignWork", "Project", FormMethod.Post); %>
 <form action="AssignWork.aspx" method="post"></form> 
```

尝试这个：

```
<% using (Html.BeginForm("AssignWork", "Project", FormMethod.Post) { %>
    <!-- your form markup -->
<% } %> 
```

您不需要使用`<form>`标签，因为它由 渲染`Html.BeginForm()`，并且`Html.EndForm()`由于语句而没有必要`using`- 结束标签呈现在`using`控制块的末尾。

而且您可能还需要将输入类型更改为`submit`.

# php - 从 json 提要传递 html 标签

> ID：11613006
> 
> 赞同：0
> 
> 时间：2012-07-23T12:57:47.577
> 
> 标签：php, jquery, json

我得到一个 json 提要，它返回带有 HTML 标签的内容（因为它是从 CMS 生成的）。json feed 本身很好，但它在内容中呈现 html 标签，如下所示：

```
<p>First para</p><p>Second para</p> 
```

我希望它像这样呈现格式化的 html 标签：

第一段

第二段

我曾尝试使用 php 'html_entity_decode' 和 'htmlentities' 来操作内容，然后返回 json 无济于事。

我正在使用 jquery 模板来呈现 json 数据，如下所示：

```
var markup = '<h5>${title}</h5><p>${date}</p>${content}'; 
```

例如，我是否应该将 $content 格式化为 jquery .html() 对象，有关我缺少什么的任何想法？

编辑：这是模板代码 - 我在其中尝试了 .html() 但只有错误？

```
 function getArticle(type, id) { 
    $.getJSON("http://www.jsonexample.com/api/?type="+ type +"&aid="+ id +"", function(json) {     
       var markup = '<h5>${title}</h5><p>${date}</p>${content}';
       $.template( "articleTpl", markup );     
       $.tmpl( "articleTpl", json ).appendTo('#article');   
     }); 
} 
```

**似乎这有效，尽管在测试版中注意 {{html content}}：**

```
var markup = '<h5>${title}</h5><p>${date}</p>{{html content}}'; 
```

人们对在应用程序中使用此功能有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:01:00.010

我不完全确定我理解您的问题 - 但是如果您收到包含 HTML 标记的 JSON 并希望在您的页面中显示它们，请使用 jQuery 中的 .html(value) 函数。

你能分享你目前正在尝试使用的代码吗？

这是一个 jsfiddle 说明什么（我认为）是你的问题：http: [//jsfiddle.net/V33Zv/6/](http://jsfiddle.net/V33Zv/6/)

1）传递正确的标签

2) 使用 .html(string) 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:43:12.307

试试这样

```
function getArticle(type, id) { 
    $.getJSON("http://www.jsonexample.com/api/?type="+ type +"&aid="+ id +"", function(json) {     
       var markup = '<h5>${title}</h5><p>${date}</p>${content}';
      $.template( "articleTpl", $(markup).html() ); // here the changes. 
       $.tmpl( "articleTpl", json ).appendTo('#article');   
     }); 
```

# xml - Trac 到 MediaWiki 的转换

> ID：11613009
> 
> 赞同：2
> 
> 时间：2012-07-23T12:57:57.163
> 
> 标签：xml, perl, type-conversion, mediawiki, trac

我正在尝试将 xml 转储从 trac db 转换为 mediawiki 格式。我正在使用以下 perl 脚本来执行转换：

```
#!/usr/bin/perl
# trac2mw
# Converts a trac wiki to MediaWiki format
# Input:
#   MySQL XML export of the Trac database
# Output:
#   MediaWiki XML, suitable for feeding to Special:Import
#
# by Matthew Sachs <matthewg@zevils.com>
#
#This work is hereby released into the Public Domain. To view a copy
#of the public domain dedication, visit:
#  http://creativecommons.org/licenses/publicdomain/

# Name of your MediaWiki
use constant WIKI_NAME => "MyWiki";

# Front page of your MediaWiki
use constant WIKI_BASE => "http://example.com/Wiki/Main_Page";

# To whitelist pages, list them here, one per line, e.g.
#   @includePages = qw(
#   FooBar
#   FooBaz
#   );
#
# If any pages are listed, only pages on the list will be included.
my @includePages = qw(
);

# Pages can be renamed.
# Trac page name => MediaWiki page name
my %renamePages = (WikiStart => "Main Page");

# Trac -> MediaWiki author map.
# TracUser => [MediaWiki username, MediaWiki user ID]
# Example:
#   my %authors = (
#     matthew => ["Matthew", 1],
#     liz => ["Liz", 2]
#   );
my %authors = ();

# END CONFIGURATION

use strict;
use warnings;
use XML::LibXML;
use POSIX qw(strftime);

our $VERSION = "0.1";

sub fixWikiList {
  my($in) = @_;

  my $ret = "";
  my @rows = split(/\n/, $in);
  my @inlists = ();

  foreach my $row (@rows) {
    $row =~ s/^ ( *)([#*])//;
    my($space, $toplist) = ($1, $2);

    while(length($space) < @inlists) {
      pop @inlists;
    }
    push @inlists, $toplist;

    $ret .= join("", @inlists) . $row . "\n";
  }

  return $ret;
}

sub fixWikiTable {
  my($in) = @_;
  my $ret = "{|\n";
  my @rows = split(/\n/, $in);

  foreach my $row (@rows) {
    $ret .= "|-\n";
    $row =~ s/^\|\|//;
    $row =~ s/\|\|$//;
    foreach my $col (split(/\|\|/, $row)) {
      $ret .= "| $col\n";
    }
  }

  $ret =~ s/\n\| -$/\n/;
  $ret .= "|}\n";
  return $ret;
}

sub fixWikiText {
  my($text) = @_;

  # [wiki:Foo] -> [Foo]
  $text =~ s/\[wiki:/[/g;

  # [Link] -> [[Link]]
  $text =~ s/\[([a-z0-9 _-]+)\]/[[$1]]/ig;

  # <sp><sp>* -> **
  $text =~ s/((?:^(?: +)(?:[*#])(?:.*)$(?:\n?))+)/fixWikiList($1)/gem;

  # CamelCase -> [[CamelCase]]
  $text =~ s^ ([A-Z][a-z0-9]+[A-Z][a-z0-9]+[a-zA-Z0-9]*)\b^ [[$1]]^g;

  # Table syntax
  $text =~ s/((?:^\|\|.*\|\|$(?:\n?))+)/fixWikiTable($1)/gem;

  return $text;
}

my $parser = XML::LibXML->new();
my $doc = $parser->parse_file(shift);
my $root = $doc->documentElement();

my @wikiPages = $root->findnodes("//table_data[\@name='wiki']/row");
my %pages;
foreach my $node (@wikiPages) {
  my $name = $node->find("field[\@name='name']")->[0]->textContent();
  next unless grep { $_ eq $name } @includePages;

  $name = $renamePages{$name} if $renamePages{$name};

  my $text = $node->find("field[\@name='text']")->[0]->textContent();
  my $author = $node->find("field[\@name='author']")->[0]->textContent();
  my $time = $node->find("field[\@name='time']")->[0]->textContent();
  my $version = $node->find("field[\@name='version']")->[0]->textContent();
  $version--;
  $pages{$name} ||= [];
  $pages{$name}->[$version] = {
                               text => $text,
                               author => $author,
                               time => $time,
                              };
}

my $outDoc = XML::LibXML::Document->new();
my $mw = XML::LibXML::Element->new("mediawiki");
$outDoc->setDocumentElement($mw);

use constant MW_NS => "http://www.mediawiki.org/xml/export-0.3/";
use constant XSI_NS => "http://www.w3.org/2001/XMLSchema-instance";

$mw->setNamespace(XSI_NS, "xsi");
$mw->setNamespace(MW_NS);
$mw->setAttributeNS(XSI_NS, "schemaLocation", "http://www.mediawiki.org/xml/export-0.3/ http://www.mediawiki.org/xml/export-0.3.xsd");
$mw->setAttributeNS(MW_NS, "version", "0.3");
$mw->setAttribute("xml:lang", "en");

my $siteinfo = XML::LibXML::Element->new("siteinfo");
$mw->addChild($siteinfo);
$siteinfo->appendTextChild("sitename", WIKI_NAME);
$siteinfo->appendTextChild("base", WIKI_BASE);
$siteinfo->appendTextChild("generator", "trac2mw $VERSION");
$siteinfo->appendTextChild("case", "first-letter");

my $namespaces = XML::LibXML::Element->new("namespaces");
$siteinfo->addChild($namespaces);
foreach my $ns ([-2, "Media"], [-1, "Special"],
                [0, ""], [1, "Talk"],
                [2, "User"],
                [3, "User talk"],
                [4, WIKI_NAME],
                [5, WIKI_NAME . " talk"],
                [6, "Image"],
                [7, "Image talk"],
                [8, "MediaWiki"],
                [9, "MediaWiki talk"],
                [10, "Template"],
                [11, "Template talk"],
                [12, "Help"],
                [13, "Help talk"],
                [14, "Category"],
                [15, "Category talk"],) {

  my $nsElement = XML::LibXML::Element->new("namespace");
  $namespaces->addChild($nsElement);
  $nsElement->setAttribute("key", $ns->[0]);
  $nsElement->appendText($ns->[1]);
}

my $pageID = 1000;
while(my($page, $revisions) = each(%pages)) {
  my $pageNode = XML::LibXML::Element->new("page");
  $mw->addChild($pageNode);
  $pageNode->appendTextChild("title", $page);
  $pageNode->appendTextChild("id", $pageID);

  my $revID = 1;
  foreach my $revision(@$revisions) {
    my($text, $author, $time) = ($revision->{text},
                                 $revision->{author},
                                 $revision->{time});

    $text = fixWikiText($text);

    my $revision = XML::LibXML::Element->new("revision");
    $pageNode->addChild($revision);
    $revision->appendTextChild("id", $pageID + $revID);
    $revision->appendTextChild("timestamp",
                               strftime("%Y-%m-%dT%H:%M:%SZ",
                                        gmtime($time)));

    my $contributor = XML::LibXML::Element->new("contributor");
    $revision->addChild($contributor);
    my($user_id) = $authors{$author};
    if($user_id) {
      $contributor->appendTextChild("username", $user_id->[0]);
      $contributor->appendTextChild("id", $user_id->[1]);
    }

    my $textNode = XML::LibXML::Element->new("text");
    $revision->addChild($textNode);
    $textNode->setAttribute("xml:space", "preserve");
    $textNode->appendText($text);
  } continue {
    $revID++;
  }
} continue {
  $pageID += 1000;
}

$outDoc->toFH(\*STDOUT, 1); 
```

我的 xml 文件以：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
- phpMyAdmin XML Dump
- version 3.3.7deb7
- http://www.phpmyadmin.net
-
- Host: localhost
- Generation Time: Jul 23, 2012 at 04:21 PM
- Server version: 5.1.61
- PHP Version: 5.3.3-7+squeeze13
-->
<pma_xml_export version="1.0">
<!--
- Database: 'trac'
-->
<database name="trac">
    <!-- Table wiki -->
    <table name="wiki">
        <column name="name">TracAdmin</column>
        <column name="version">1</column>
        <column name="time">1205745178</column>
        <column name="author">trac</column>
        <column name="ipnr">127.0.0.1</column>
        <column name="text">= TracAdmin =
       [[TracGuideToc]]
   ... 
```

当我开始转换时，我收到以下错误：

```
# perl trac2mw.pl tracxmldump.xml
bad ns attribute! at /usr/lib/perl5/XML/LibXML.pm line 1574. 
```

这与脚本或 libxml 有关吗？我该如何解决？

# android - 在 StackView 小部件项目中设置 onClick 事件

> ID：11613022
> 
> 赞同：2
> 
> 时间：2012-07-23T12:58:45.393
> 
> 标签：android, android-widget, widget, onclick, stackview

我有一个带有集合的小部件（**这很重要！**）。它看起来像这样：

![安卓小部件截图](../Images/52c6d16a1b8bbf8d595c6a84abe61cac.png)

我的代码基于官方 Android 文档：[Android App Widgets](http://developer.android.com/intl/ru/guide/topics/appwidgets/index.html#collection_sample)。

所以对于小部件，我在 StackView 集合中使用带有自定义对象的集合。此集合由 StackRemoteViewsFactory 处理（实现 RemoteViewsService.RemoteViewsFactory）。如您所见，每个项目都有三个 ImageButtons 和一个 TextView。

**我知道**如何为整个 RemoteView 项目添加 onClick 行为。这在官方文档中有所描述。

但是我的每个视图（按钮和文本视图）都需要四个 onClick 行为。

**我的问题：** 对于带有 RemoteView 集合的小部件中的每个 StackView 项目，这可能有不同的 onClicks 视图吗？

现在我看不到任何可能性：（

* * *

更新：

我想在这个问题中与 onClicks 有类似的东西：[Processing more than one button click at Android Widget](https://stackoverflow.com/questions/2471875/processing-more-than-one-button-click-at-android-widget)。但是由于小部件实现的差异，该问题的解决方案不适用于具有 RemoteViews 集合的小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:08:37.453

如果您看过 StackView 小部件示例代码，您就会知道有提供程序类和服务类。在服务类中，尝试将 setOnClickFillInIntent 添加到 stackview 布局的每个 id，其中 Intent 包括“命令字”。并在提供程序类中设置 setPendingIntentTemplate 作为示例代码。这是重要的部分，在提供者类中，有 OnReceive()。setPendingIntentTemplate 将发送 Intent 包括您在 Provider 类中设置的特定操作和从服务类中设置到每个layour id 的“comman word” 的两件事。那么现在您知道用户从 Stack View 小部件中单击了哪些按钮。如果您需要更多提示，请告诉我我将添加示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-21T06:04:04.947

所以基本上你必须做两件事才能将 onClick 行为添加到 Android App Widget 的 StackView/ListView 中的按钮。

1.  在实现 RemoteViewService.RemoteServiceFactory 的 StackRemoteViewsFactory 的 getViewAt 函数中，为要添加函数的 id 添加一个 setOnClickFillingIntent()。例如。

    ```
     RemoteViews rv = new RemoteViews(mContext.getPackageName(), R.layout.widget__fan);
     Bundle extras = new Bundle();
     extras.putInt(TestWidget.EXTRA_ITEM, position);
     Intent fillInIntent = new Intent();
     fillInIntent.putExtras(extras);
     rv.setOnClickFillInIntent(R.id.fan_status, fillInIntent); // id of button you want to add a onClick function to. 
    ```

2.  在扩展 AppWidgetProvider 的 WidgetProvider 类的 onUpdate 函数中，添加一个 setPendingIntentTemplate()。例如。

    ```
     Intent toastIntent = new Intent(context, TestWidget.class);
     toastIntent.setAction(TestWidget.act1);
     toastIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
     intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
     PendingIntent toastPendingIntent = PendingIntent.getBroadcast(context, 0, toastIntent,PendingIntent.FLAG_UPDATE_CURRENT);
     rv.setPendingIntentTemplate(R.id.lview, toastPendingIntent); 
    ```

现在，已为该特定按钮设置了操作（在我的情况下为 R.id.fan_status）。您可以在 onRecieve() 函数中添加其功能。例如。

```
public void onReceive(Context context, Intent intent) {    
    if (intent.getAction().equals(act1)) {
       // Add your functionalities
    }
} 
```

# asp.net-mvc-3 - 停止 Quartez.net 调度程序

> ID：11613026
> 
> 赞同：0
> 
> 时间：2012-07-23T12:59:05.373
> 
> 标签：asp.net-mvc-3, quartz.net

我有一个 Web 应用程序，我想实现调度程序我正在使用 Quartez.Net 库

我将以下代码添加到 Global.asax 中的应用程序中

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        MyScheduler.StartScheduler();
    } 
```

我创建了以下课程来定期开始我的工作

```
public class MyScheduler
 {
      public void StartScheduler()
       {
        // First we must get a reference to a scheduler
        ISchedulerFactory sf = new StdSchedulerFactory();
        IScheduler sched = sf.GetScheduler();

        // computer a time that is on the next round minute
        DateTimeOffset runTime = DateBuilder.EvenMinuteDate(DateTimeOffset.UtcNow);

        // define the job and tie it to our HelloJob class
        IJobDetail job = JobBuilder.Create<MyJob>()
            .WithIdentity("job1", "group1")
            .Build();

           ITrigger trigger = TriggerBuilder.Create()
                .WithIdentity("trigger1", "group1")
                .WithDailyTimeIntervalSchedule(
                    x => x.StartingDailyAt(TimeOfDay.HourAndMinuteOfDay(14, 41))
                             .EndingDailyAt(TimeOfDay.HourAndMinuteOfDay(14,43))
                             .WithIntervalInSeconds(30))
                .Build();

        // Tell quartz to schedule the job using our trigger
        sched.ScheduleJob(job, trigger);

        // Start up the scheduler (nothing can actually run until the 
        // scheduler has been started)
        sched.Start();           
      }
   } 
```

我想知道如果我让调度程序运行而不停止它是否有任何问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:24:19.777

这就是它应该工作的方式，因为您正在运行调度程序。您必须意识到您的应用程序可能由于不活动而关闭，因此您的调度程序将无法工作。
[Phil Haack 写了关于它](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)的文章。

# python - 如何使用python脚本将C盘更改为F盘

> ID：11613029
> 
> 赞同：3
> 
> 时间：2012-07-23T12:59:07.357
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中设置当前工作目录？](https://stackoverflow.com/questions/1810743/how-to-set-the-current-working-directory-in-python)

如何`C:\>`改用`F:\>`Python

我试过了

```
import os
os.chdir("F:") 
```

但出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:03:00.023

您需要额外的反斜杠：

```
import os  
os.chdir("F:\\") 
```

# php - 支持 FPDF 中的挪威字符

> ID：11613030
> 
> 赞同：0
> 
> 时间：2012-07-23T12:59:11.273
> 
> 标签：php, linux, fpdf

我正在使用 fpdf 从 HTML 表单创建一些 pdf。

除了挪威字符 ÆØÅ 不起作用之外，一切都运行良好。他们根本不显示。因为我是为挪威人制作的，所以这些角色对于使它有用非常重要。

如何添加对 ÆØÅ 的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:08:43.697

请尝试[iconv](http://in.php.net/manual/en/function.iconv.php)：

标准 FPDF 字体使用 ISO-8859-1 或 Windows-1252。您可以尝试使用 iconv 来更改字符编码。

```
Example:
     $str = iconv('UTF-8', 'windows-1252', $str); 
```

如果您可以更改 PDF 生成代码，请查看[mpdf](http://www.mpdf1.com/mpdf/examples)：[UTF-8 multilingual](http://mpdf1.com/examples/example_utf8.pdf)

希望这有帮助！

# asp.net - MSBuild 在临时 ASP.NET 文件上失败

> ID：11613032
> 
> 赞同：0
> 
> 时间：2012-07-23T12:59:16.537
> 
> 标签：asp.net, msbuild, continuous-integration, jenkins

我正在尝试使用 MSBuild 插件设置 Jenkins。我让 Jenkins 从存储库中检查解决方案并运行构建。但是每个构建都失败了几个

```
error CS0433: The type 'CustomControls_WarningPopup' exists in both (...) 
```

`WarningPopup`定义`.ascx`了两次 - 每个网站项目一次，并且解决方案中有两个网站项目。问题是从 VS2010 编译整个解决方案时，这永远不会出现任何问题。我是否应该使用一些特定参数运行 MSBuild 以使其表现得像 VS？

我已经尝试移动`Temporary ASP.NET files`到自定义文件夹（就像在[这个](https://stackoverflow.com/questions/2686667/clean-conflicting-class-files-from-temporary-asp-net-files)答案中一样），但它没有帮助。可能我在这里遗漏了一些对 CI 专家来说显而易见的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:35:22.983

我找到了原因。第二个项目中还有另一个`UserControl`意外继承了同名的类。两个控件都在同一个目录中，编译期间的 Visual Studio 和 ReSharper 都没有发现任何问题。此外，MSBuild 在两个 Web 项目中都引发了错误，尽管重复的控件仅在其中一个中。最有趣的是，这种情况持续了几个月，从未出现任何问题……

无论如何改变这个控件的类解决了这个问题，最后自动构建成功了！

# c - 为什么 jpeg_decompress_create 崩溃而没有错误消息？

> ID：11613040
> 
> 赞同：1
> 
> 时间：2012-07-23T12:59:47.557
> 
> 标签：c, crash, exit, libjpeg, compression

我对这个代码示例有疑问：

```
struct jpeg_decompress_struct cinfo;
struct jpeg_error_mgr jerr;

cinfo.err = jpeg_std_error(&jerr);

jpeg_create_decompress(&cinfo); 
```

我的程序在`jpeg_create_decompress`没有错误消息的情况下退出。有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:14:53.467

我找到了解决方案！

在 Android 上，已经安装了一个 libjpeg.so，并且它似乎被优先加载。这个似乎配置不同。因此，您必须将共享库 libjpeg 重命名为不同的名称。

对我来说，我从 libjpeg.so 重命名为 libmyjpeg.so。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:02:11.427

你应该一直在做：

```
struct jpeg_decompress_struct cinfo;
struct jpeg_error_mgr jerr;
cinfo.err = jpeg_std_error(&jerr); // <<-- cinfo here!
jpeg_create_decompress(&cinfo); 
```

# pylons - 如何将多个 Pylons 应用程序移动到单个复合应用程序中？

> ID：11613044
> 
> 赞同：0
> 
> 时间：2012-07-23T13:00:04.107
> 
> 标签：pylons, composite-application

我们有几个单一的 Pylon 网站正在运行，但希望使这些网站更易于重用。

塔内有一个“复合应用程序”的概念，但关于如何实现这一点的说明似乎有限。

有没有人这样做或知道关于“如何将多个 pylons 应用程序转换为复合应用程序”的好教程？?

我已经尝试过——也许过于乐观——简单地将现有应用程序复制到另一个应用程序中并摆弄 development.ini 文件，但这似乎不起作用。（在这种情况下，我收到错误“pkg_resources.DistributionNotFound：wiki”）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:09:14.073

这是通过修改 WSGI 管道以根据请求属性（通常是 URL）将请求分派到不同的应用程序来完成的。修改管道的最简单方法是使用 PasteDeploy（控制 INI 文件的包）。

```
[composite:main]
use = egg:Paste#urlmap
/foo = foo
/bar = bar
/ = baz

[app:foo]
use = myapp#main

[app:bar]
use = yourapp#main

[app:baz]
use = myapp#baz 
```

这将创建一个复合应用程序，该应用程序根据 URL 前缀分派到不同的端点。

# linux - linux内核中的x86分页与mmu

> ID：11613048
> 
> 赞同：2
> 
> 时间：2012-07-23T13:00:14.223
> 
> 标签：linux, x86, kernel, paging, mmu

x86 arch, linux kernel 2.6.x, 32bit系统

我了解虚拟地址 0xC0000000 ~ 0xFFFFFFFF

为内核保留。

这个虚拟地址可以通过以下方式转换为物理地址

减去 0xC0000000。

但是，我认为即使结果相同，MMU 也会翻译

通过页表遍历内核虚拟地址（例如0xC0851000）到物理地址。

如

CR3 -> 页面目录 -> 页表 -> PFN。

我是对还是错？，如果我错了，请纠正我。

我需要在 x86、linux 32 位系统中开发基于硬件的内核监视器。

所以我需要知道这个问题

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:32:15.407

对于内核逻辑地址，您是正确的。然而，内核虚拟地址，如由 分配的内存`vmalloc`，不一定具有与表征逻辑地址空间的物理地址的一对一映射。

请记住，内核逻辑地址并不总是通过减去偏移量来转换为物理地址（这在 x86 中是正确的，但在 AVR32 中则不然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:47:34.347

“并且这个虚拟地址可以通过以下方式转换为物理地址

减去 0xC0000000"

由于内核虚拟地址的页表是这样配置的，因此人们想出了您提到的快捷方式。

# php - 在 MySQL 中加入 3 个表会给出具有值的重复行

> ID：11613055
> 
> 赞同：0
> 
> 时间：2012-07-23T13:00:35.177
> 
> 标签：php, mysql, select, join

我正在尝试在 MySQ 中加入三个表，但是当我按照自己的方式进行操作时，我得到了值不正确的重复行。看来我做得不对。

我需要加入三个表：

```
nt_stentyper
id | tagsten | varenr_tilb | prod_type | dk | no | sv

nt_tunliste
varenummer | tunnummer | beskrivelse 

nt_priser
varenummer | pris 
```

我希望找到的数据按`varenummer`in`nt_tunliste`和`nt_priser`. 那`varenummer`是为了`varenr_tilb`。

我试过这个：

```
SELECT * FROM nt_stentyper 
INNER JOIN nt_tunliste ON nt_stentyper.varenr_tilb = nt_tunliste.varenummer 
INNER JOIN nt_priser ON nt_stentyper.varenr_tilb = nt_tunliste.varenummer 
WHERE nt_stentyper.tagsten = 1 
ORDER BY nt_stentyper.prod_type ASC 
```

...但这给了我重复的行，例如：

```
ID  tagsten varenr_tilb prod_type   dk  no  sv  varenummer  tunnummer   beskrivelse  varenummer pris_dk
1   1       12345678    1           1   1   1   12345678    12131415    RT 801       11111111   213
1   1       12345678    1           1   1   1   12345678    12131415    RT 801       12345678   200
5   1       11111111    5           1   1   1   11111111    11111112    Gratbånd     11111111   213
5   1       11111111    5           1   1   1   11111111    11111112    Gratbånd     12345678   200 
```

...这不是我想要的。

查询应该只显示一个`varenummer`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:18:07.640

第二个连接的条件应该与`nt_priser`，但它是第一个连接条件的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:16:20.827

这是因为内连接中使用的任何一个表都具有连接中使用的列的重复值。

为避免这种情况，您可以从表中删除重复项，或者在选择记录时使用`GROUP BY nt_stentyper.varenr_tilb` 或使用。`SELECT DISTINCT *`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:23:55.990

不要选择 *，而是只选择您需要的字段。像这样的东西：

```
SELECT id, tagsten, nt_stentyper.varenr, prod_type, dk, no, sv, tunnummer, beskrivelse,     pris_dk FROM nt_stentyper 
INNER JOIN nt_tunliste ON nt_stentyper.varenr_tilb = nt_tunliste.varenummer 
INNER JOIN nt_priser ON nt_stentyper.varenr_tilb = nt_tunliste.varenummer 
WHERE nt_stentyper.tagsten = 1 
ORDER BY nt_stentyper.prod_type ASC 
```

在另一个不相关的说明中，我强烈建议您使用英语进行所有编码，因为您永远不知道是否有人（非丹麦人）稍后会查看您的代码:)

# php - Heroku + PHP + 教义 2

> ID：11613059
> 
> 赞同：1
> 
> 时间：2012-07-23T13:00:39.490
> 
> 标签：php, heroku, doctrine-orm

我在 Heroku 中有一个免费的应用程序，我用 MySQL + PHP + Doctrine 在本地开发了它。下一步是使用 Doctrine 创建 PostgreSQL 数据库模式。

我使用命令“php -f dictionary.php orm:schema-tool:create”在本地创建了模式，我认为我可以在这样的 PHP 脚本中从服务器执行它“exec(”php -f dictionary.php orm：架构工具：创建“）；”。但是，不幸的是，尚未创建数据库模式。所以我的问题是“如何使用 Doctrine 在 Heroku 中创建数据库模式？”。

我还有一些其他问题，例如“我怎么知道 db 编码是什么？即 UTF-8 以及如何更改它？” 老实说，我发现在 Heroku 上工作很困难，我想知道是否有提到 Heroku + PHP + Doctrine 的文档，或者是否有人遇到过类似的项目并且可以给我一些建议来部署应用成功。

提前致谢。

# java - java / android NullPointerException 抛出一个字符串

> ID：11613060
> 
> 赞同：1
> 
> 时间：2012-07-23T13:00:43.000
> 
> 标签：java, android, string, debugging, nullpointerexception

我有一个看起来非常简单的方法，用 java 编写，用于 android 应用程序：

编辑 1：私有字符串 newResponse；

```
public SOME METHOD CALLED FIRST
{
    newResponse = "";
} 
```

编辑结束 1

```
public synchronized void reportMessage(String message)
{
    try
    {
        newResponse = newResponse + message;

        confirmQE(); //Look for qe in the message
    }
    catch (Exception e)
    {
        response = e.getCause().toString();
    }
} 
```

当我在调试器模式下运行应用程序时，它“暂停”就行了：

```
newResponse = newResponse + message; 
```

它在调试窗口中说：

**Thread[<9> Thread-10]（暂停（异常 NullPointerException））**

这仅在某些时候发生。有时它运行良好。

它永远不会进入 catch 子句，当您单击继续时，应用程序会崩溃。线上没有断点，所以我什至不知道它为什么会挂在那里。

newResponse 是 String 类型，定义为全局变量。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:04:15.773

```
try
    {
        // NOW add following condition and initialize newResponce only when it is null
        if(null == newResponse)
        {
            newResponse = new String();
        }
        System.out.println("newResponse"+newResponse);  //<--Add this two lines
        System.out.println("message"+message); // and check which line gives you NullPointerException

        newResponse = newResponse + message;

        confirmQE(); //Look for qe in the message
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:04:36.630

```
public synchronized void reportMessage(String message)
{
    try
    {
        if(newResponse == null){
            newResponse = message;
        }else{
            newResponse = newResponse + message;
        }

        confirmQE(); //Look for qe in the message
    }
    catch (Exception e)
    {
        response = e.getCause().toString();
    }
} 
```

试试上面的代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:04:18.150

检查各个变量以查看哪个为空。

此外，`e.getCause()`也可能返回 null，因此您的异常处理程序中也可能有异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T09:59:07.053

我已经解决了这个问题。

对于任何想知道的人，我补充说

```
if("".equals(newResponse))
{ 
    newResponse = new String();
} 
```

前

```
newResponse = newResponse + message; 
```

这可以防止错误。

感谢大家的帮助。

# c++ - 在 C++ CLI 中加载托管 DLL，具体取决于本机 dll

> ID：11613061
> 
> 赞同：2
> 
> 时间：2012-07-23T13:00:45.773
> 
> 标签：c++, .net, c++-cli, dll

按照[类似的 SO question](https://stackoverflow.com/questions/3102590/c-cli-explicitly-load-managed-dll-at-runtime-the-equivalent-of-loadlibrary-fo)中提出的解决方案，我想在 C++ CLI 应用程序（或者实际上是 C#）中加载一个相当复杂的 dll 文件。目标架构始终设置为 64 位。

在这个应用程序中使用的 .dll 是在另一个项目中生成的，它是使用 C++ CLI 使用本地 C++ 库（例如 Ogre、Boost 等）编写的，并且依赖于它自己的 dll（所有这些都已编译为 64 位平台）。这些依赖 dll 与使用它们的讨厌的 .dll 一起复制到我的应用程序的输出文件夹中。

但是，当到达这条线时：

```
Assembly^ SampleAssembly;
SampleAssembly = Assembly::LoadFrom( "E:\\x64\\Debug\\OgreWrapper.dll" ); 
```

输出控制台显示：

```
'DumbTestCLR.exe': Loaded 'E:\x64\Debug\OgreWrapper.dll', Symbols loaded.
'DumbTestCLR.exe': Unloaded 'E:\x64\Debug\OgreWrapper.dll' 
```

并抛出一些致命的未捕获异常：

```
First-chance exception at 0x000007fefe32cacd (KernelBase.dll) in DumbTestCLR.exe: Microsoft C++ exception: EEFileLoadException * __ptr64 at memory location 0x0016d588..
First-chance exception at 0x77cace3b (ntdll.dll) in DumbTestCLR.exe: 0xC0000005: Access violation reading location 0xffffffffffffffff.
First-chance exception at 0x77cace3b (ntdll.dll) in DumbTestCLR.exe: 0xC0000005: Access violation reading location 0xffffffffffffffff.
First-chance exception at 0x77cace3b (ntdll.dll) in DumbTestCLR.exe: 0xC0000005: Access violation reading location 0xffffffffffffffff. 
```

[由于此处给出](https://stackoverflow.com/questions/11584626/c-sharp-exception-thrown-from-a-c-managed-dll-eefileloadexception-ptr64)的建议均不适用（即不是因为应用程序和 dll 之间的位数冲突），问题的根源可能是什么？我怀疑 dll 无法加载其他（本机）dll 并因此崩溃，但是如果可能是这种情况，如何检查哪些 dll 导致了问题？

很抱歉这个问题很长，也许是愚蠢的问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:11:57.570

使用**[Dependency Walker](http://www.dependencywalker.com/)**查看 dll 的依赖项是否都在那里。

# mvvm - MVVM Light 没有实例化我的 ViewModel

> ID：11613063
> 
> 赞同：0
> 
> 时间：2012-07-23T13:00:49.760
> 
> 标签：mvvm, mvvm-light

我有一个主 Silverlight 项目，此外我有一个用于我的视图的 Silverlight 项目，我有一个用于我的 ViewModel 的 Silverlight 类库。

在设计视图时，我可以看到绑定的 ViewModel。

在应用程序的主项目中，定位器指向 ViewModel 所在的类库。

当我运行我的应用程序时，我的 ViewModel 没有被实例化。

我错过了什么？

# android - ExpandableListView 中的 Android 分隔线

> ID：11613064
> 
> 赞同：1
> 
> 时间：2012-07-23T13:00:50.727
> 
> 标签：android, listview

我正在设置 childView 的分隔符。但是当我展开并看到 childRows 分隔线在子行和父行中的颜色变化时。为什么会这样？

我的可扩展列表视图的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ExpandableListView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:childDivider="@color/dark_orange"
android:indicatorLeft="?android:attr/expandableListPreferredItemIndicatorLeft"
android:indicatorRight="?android:attr/expandableListPreferredItemIndicatorRight"
android:groupIndicator="@drawable/group_indicator">
 </ExpandableListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:08:47.890

将您的 ExpandableListView 更改为

```
<?xml version="1.0" encoding="utf-8"?>

<ExpandableListView 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/list"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:layout_alignParentLeft="true"
  android:dividerHeight="2dp"<!--===========> problem is here-->
  android:divider="@drawable/yellow"
  android:childDivider="@color/dark_orange"
  android:indicatorLeft="?android:attr/expandableListPreferredItemIndicatorLeft"
  android:indicatorRight="?android:attr/expandableListPreferredItemIndicatorRight"
  android:groupIndicator="@drawable/group_indicator"
/> 
```

我认为问题在于设置子分隔器的高度。所以请纠正它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:47:15.800

我通过这样的代码设置了分隔线颜色：

```
int[] colors = {0, 0xFFFF0000, 0}; // red for the example 
lv.setChildDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors)); 
lv.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors)); 
```

请注意，这会将中间的分隔线设置为全色，在 bth 边缘逐渐消失，但它应该传达在代码中设置 ExpandableListView 分隔线的方法。将颜色设置为单一纯色同样容易。

# api - 从哪里开始使用 API

> ID：11613068
> 
> 赞同：0
> 
> 时间：2012-07-23T13:01:02.537
> 
> 标签：api, grails

我是 API 新手。我想在 grails 中创建一个。我相信另一个应用程序网站等只会发布到我的网络应用程序中的 URL，它会启动一个方法。哪里是开始我研究的好地方。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:24:25.183

这是我的第一个答案，但我希望它对你有用:)

以下是您在制作自己的 API 之前应该查看的一些资源：

REST - 这是关于您正在构建的 api 的整个概念的理论。请在维基百科上找到它。由于此处新帐户的链接限制为 2 个，我无法发布链接 :)

[http://en.wikipedia.org/wiki/SOAP](http://en.wikipedia.org/wiki/SOAP) - 这是 W3C 支持的用于交换消息的协议。使用标准应该可以帮助您的客户采用您的 api。

[http://en.wikipedia.org/wiki/Oauth](http://en.wikipedia.org/wiki/Oauth) - 显然你应该以某种方式验证你的用户。您可以使用 Oauth 来做到这一点——它广泛开放且易于实施。同样，您的客户将很容易连接到它。

您将在 Java 中或作为 Grails 插件本身找到所有这些技术的实现。

# php - 使用 PHP 在回发时保持 jQuery 手风琴状态

> ID：11613070
> 
> 赞同：2
> 
> 时间：2012-07-23T13:01:17.810
> 
> 标签：php, jquery-ui, accordion, state

我在我正在构建的网站上使用 jQuery UI 的手风琴作为子导航。问题是我一直没能找到维护页面之间状态的好方法。我想知道最好的方法是什么。

我曾想过将手风琴的索引存储在数据库中，但对于这样的问题来说，这似乎过于复杂。有没有更好的办法？显然 cookie 和 session 但这对于一个 subnav 来说同样复杂......有什么想法吗？

编辑：这是我的代码

```
$.post(
    accordion_ajax.ajaxurl,
    {
        type   : 'GET',
        action : 'accordion_ajax'
    },
    function(data){
        $(".accordion-main").accordion('option', 'collapsible', true);  
        $(".accordion-main").accordion('option', 'active', 0);
        // the accordion just does not work inside this ajax call, but if I put it outside the ajax call it works fine. Any thoughts?   
    }
);

$(".accordion-main").accordion({
    change: function(event, ui){
        $.post(
            accordion_ajax.ajaxurl,
            {
                type   : 'SET',
                action : 'accordion_ajax',
                data   : $(".accordion-main").accordion('option', 'active')

            }
        );
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:45:21.197

这是我要做的：

在手风琴的 change() 处理程序中，我将通过 AJAX 调用将当前手风琴部分的索引发送到服务器：

```
$( "#AccordionID" ).accordion({
    change: function(event, ui) {
        $.ajax({
            type:'POST',
            url: 'urlToPhpScript.php',
            data:'function=setAccordion&selectedAccordionSection='+ $("#AccordionID").accordion('option', 'active')
        });
    }
}); 
```

在服务器端，我会将此值存储在用户会话中：

```
<?php
// urlToPhpScript.php
session_start();

if($_GET['function']=='getAccordion') {
    if(isset($_SESSION['currentAccordion'])) {
        return $_SESSION['currentAccordion'];
    } else {
        return 0;
    }
}

if($_POST['function']=='setAccordion') {
    $_SESSION['currentAccordion'] = $_POST['AccordionID'];  
} 
```

然后在每个页面加载时，我都会向服务器发送一个 AJAX 调用，该调用将从用户会话中查询手风琴部分：

```
$(document).ready(function () {
    $.ajax({
        type: 'GET',
        url: 'urlToPhpScript.php',
        data: 'function=getAccordion',
        success: function(data) {
            $('#AccordionID').accordion('activate', data);
        }
    });
}); 
```

这样，您如何从一个页面导航到下一个页面都无关紧要，并且您不必担心在您网站的每个页面上都隐藏一个“currentAccordion”类型的隐藏字段。

# r - 为什么 list() 返回一个向量，而不是一个列表？

> ID：11613077
> 
> 赞同：1
> 
> 时间：2012-07-23T13:01:40.337
> 
> 标签：r

> **可能重复：**
> [为什么对象是矢量？](https://stackoverflow.com/questions/11597175/why-the-object-is-vector)

请看我的代码：

```
> x=function(z){z+1}  
> y=list(n1=1,n2="qwe",n3=TRUE,n4=x)  
> is.vector(y)

[1] TRUE 
```

为什么是`y`向量？`n1`是数字，`n2`是字符，`n3`是逻辑，`n4`是函数。

它们是不同的，那么为什么是`y`向量呢？当然`y`只能是一个列表？

```
> data
name sex age height
1 x1 F 18 162
2 x2 M 19 170
3 x3 M 21 178
4 x4 F 22 166
5 x5 F 23 165
> data[1,]
name sex age height
1 x1 F 18 162
> is.vector(data[1,])
[1] FALSE 
```

我对向量感到困惑，为什么这里的 data[1,] 不能是向量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T13:11:24.543

您正在使用`list`它创建一个*通用向量*。列表可以包含不同类型的对象，它们本身就是*向量*。

从而`is.vector`给出正确答案。请参阅[此处](http://cran.r-project.org/doc/manuals/R-lang.html#List-objects)了解更多信息。

此外，如果您键入`fix(y)`，您将看到结构：

```
structure(
 list(
  n1 = 1,
  n2 = "qwe",
  n3 = TRUE,
  n4 = function(z){z+1}
 ),
 .Names = c("n1", "n2", "n3", "n4")
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T13:28:47.757

`y` *是*一个列表：

```
> is.list(y)
[1] TRUE 
```

您会感到困惑，因为列表是向量，这在`?is.vector`. 同一句话说`is.vector`也将返回`TRUE`表达式：

```
> is.vector(as.expression(y))
[1] TRUE 
```

# raphael - Raphael Javascript 文本无法正确显示

> ID：11613079
> 
> 赞同：1
> 
> 时间：2012-07-23T13:01:44.113
> 
> 标签：raphael

我正在显示一些文本，并且我正在使用 Raphael JS 库。我希望“名字”文本的大小为 25 像素，但它不起作用。我将一个 JS 变量传递给 Raphael 部分，这可能是问题的一部分。如果有人可以帮助我，我将不胜感激。

```
<html> 
<head> 
<script src="raphael.js"></script> 
<script src="jquery-1.7.2.js"></script>  
<script type="text/javascript">   

var string = "J\no\ne"; 

</script>
</head> 

<body>  

Text: <input type="text" id="words" value="" /> 
<input type="button" value="Animate" onclick="animate()" /> 
<div id='msg'></div> 
<div id='num'></div>
<div id='letters'></div>
<!--<div id="letters2"></div>-->
<div id="draw-here-raphael" style="height: 200px; width: 400px; margin-top:0px;"> 
</div> 
<div id="elps" style="margin-left:100px;"/>  

<script type="text/javascript"> //all your javascript goes here  
var r = new Raphael("draw-here-raphael"); 
var firstname = r.text(95,100, string).attr({font: "25px"}); 
var name = r.text(100,100, string);
name.blur(1);
</script>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:05:06.673

尝试在 jQuery 文件之后调用 raphael js 文件。

```
<script src="jquery-1.7.2.js"></script>
<script src="raphael.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:12:30.187

尝试 var firstname = r.text(95,100, string).attr({"font-size": 25});

# php - 使用 z-index 进行动态分层？

> ID：11613080
> 
> 赞同：0
> 
> 时间：2012-07-23T13:01:44.440
> 
> 标签：php, css, dynamic, z-index

对于我正在开发的基于浏览器的游戏，我希望允许用户显示他们的单位。用户可以控制多个单元，这些单元由`.png`使用 CSS`z-index`属性分层的透明图像表示。PNG 的名称存储在 MySQL 数据库中。我使用的显示单个单元的方法是使用绝对定位来定位精灵的所有 4 层（皮肤、衣服、头发、面部）并设置 z-index 属性。问题是我不能将它用于无限数量的单位，否则它们都会在同一个地方结束。

我需要一些动态的方法来定位单元，以便我可以每行显示 5 个或沿着这些线显示。这是我正在尝试做的事情的一个例子（请原谅糟糕的艺术）：

*   [分层示例](http://www.angusgames.info/KK3/SO_demo.php)
*   [样式表](http://www.angusgames.info/KK3/style.css "样式表")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:17:43.497

为了获得更好的结构，您应该为每个单元设置一个 div。在您的单元的 div 中，您将拥有 4 层。

一个单元的 HTML：

```
<div id="character1" class="character">
    <div class="charlayer1"></div>
    <div class="charlayer2"></div>
    <div class="charlayer3"></div>
    <div class="charlayer4"></div>
</div> 
```

CSS：

```
.character {
    position: absolute;
}

#character1 {
    left: 60%;
    top: 200px;
}

.charlayer1, .charlayer2, .charlayer3, .charlayer4 {
    position: absolute;
    top:0;
    left:0;
}

.charlayer1 {z-index:-4;}
.charlayer2 {z-index:-3;}
.charlayer3 {z-index:-2;}
.charlayer4 {z-index:-1;} 
```

现在您可以使用相同的 html 结构添加多个单元，但更改其 ID 和位置。

希望能帮助到你！我可以详细说明，但我需要知道你想用你的图层做什么。

# javascript - 淘汰赛中的嵌套可观察对象

> ID：11613081
> 
> 赞同：2
> 
> 时间：2012-07-23T13:01:45.877
> 
> 标签：javascript, knockout.js, sammy.js

在基于 Knockoutjs 和 Sammy.js 的 Web 应用程序中，我有三个以父子方式相互依赖的可观察对象（第二个是第一个的孩子，第三个是第二个的孩子）。我的 HTML 包含三个部分，一次只能看到一个部分。每个部分都依赖于使用可见绑定的上述可观察对象之一。

我的 URL 方案的布局类似于 /#id-of-parent/id-of-child/id-of-grandchild（在 Sammy.js 中）。

如果我访问一个完整的 URL（一个具有所有三个 id 的 URL），我会遇到 observables 的麻烦。在 Sammy 规则函数中，我首先加载和存储父项，然后是子项，最后是孙子项（这实际上是用户想要查看的数据）。问题是父母和孩子的绑定也被触发了。

有没有办法避免触发绑定，或者有没有更好的方法来组织这样的应用程序？

这是我的 Sammy 路线：

```
Sammy(function() {
  this.get('#study/:id', function() {
    self.studylist(null);
    self.currentStudy(Study.loadById(this.params.id));
  });

  this.get('#study/:id/variableGroups', function() {
    self.variableGroupList(self.currentStudy().variableGroups());
    self.currentVariable(null);
  });

  this.get('#study/:id/variable-group/:variableGroup/variables', function() {
    var groupId = this.params.variableGroup;
    $.ajax(apiUrl + "/variable-group/" + groupId, {
      type: "GET",
      async: false,
      cache: false,
      context: this,
      success: function(data) {
        if (!self.currentStudy()) {
          self.currentStudy(Study.loadById(this.params.id));
        }
        self.currentVariableGroup(new VariableGroup(data.variablegroup));
        self.variableList(self.currentVariableGroup().variables);
      }
    });
  });

  this.get('#study/:id/:variableGroupId/:variableId', function() {
    var variableId = this.params.variableId;
    $.ajax(apiUrl + "/variable/" + variableId, {
      type: "GET",
      async: false,
      cache: false,
      context: this,
      success: function(data) {
        if (!self.currentStudy()) {
          self.currentStudy(Study.loadById(this.params.id));
        }
        if (!self.currentVariableGroup()) {
          self.currentVariableGroup(VariableGroup.loadById(this.params.variableGroupId));
        }
        self.currentVariable(new Variable(data.variable));
      }
    });
  });

  this.get("", function() {
    self.currentStudy(null);
    self.currentVariableGroup(null);
    self.currentVariable(null);
    $.get(apiUrl + "/study/all", function(data) {
      var mappedStudies = $.map(data.studies, function(item, index) {
        return new Study(item);
      });
      self.studylist(mappedStudies);
    });
  });

  this.get('', function() { this.app.runRoute('get', "")});

}).run(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:52:37.250

我认为这是不可能的，而且有充分的理由。在不通知订阅者的情况下更新订阅者违反了数据绑定的原则。我强烈建议您重构您的程序，以便更新`currentStudy`并且`currentVariableGroup`不会导致不必要的副作用。让其他一些因素决定所需的效果，也许是一个`activeTemplate`可观察的。

无论如何，[这里](https://github.com/SteveSanderson/knockout/blob/master/src/subscribables/observable.js)是`observable`. 请注意，内部值是私有成员，不能从外部访问。它只能通过调用 observable（通知订阅者）来设置。

```
ko.observable = function (initialValue) {
    var _latestValue = initialValue; //Value is in closure, inaccessible from outside

    function observable() {
        if (arguments.length > 0) {
            // Write

            // Ignore writes if the value hasn't changed
            if ((!observable['equalityComparer']) || !observable['equalityComparer'](_latestValue, arguments[0])) {
                observable.valueWillMutate();
                _latestValue = arguments[0];
                if (DEBUG) observable._latestValue = _latestValue;
                observable.valueHasMutated();
            }
            return this; // Permits chained assignments
        }
        else {
            // Read
            ko.dependencyDetection.registerDependency(observable); // The caller only needs to be notified of changes if they did a "read" operation
            return _latestValue;
        }
    } 
```

# python - Python 2.7 中的类型转换

> ID：11613082
> 
> 赞同：1
> 
> 时间：2012-07-23T13:01:47.257
> 
> 标签：python, arrays, casting, python-2.7

如何在 Python 2.7 中将浮点数转换为 long？

我在 Python 2.3 中也这样做：

```
from array import*
data = array('L',[12.34])
print data 
```

打印出来：

```
array('L',[12L]) 
```

我如何在 Python 2.7 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:03:03.153

也许像这样？

```
>>> long(12.34)
12L 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:08:11.797

`numpy`如今，从模块中查看数组比查看数组更为常见`array`，但是，您的数组可以构造为：

```
>>> from array import *
>>> array('L',map(long,[12.34]))
array('L', [12L]) 
```

使用 numpy，可以这样做：

```
>>> import numpy as np
>>> np.array([12.34],dtype=long) 
```

但是，这实际上并没有创建 python long，它实际上创建了一个`np.int64`整数数组（8 字节整数 - 不是像 python long 那样的任意精度）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:07:39.873

```
lst = [1.1,2.2]
data = map(long,lst) 
```

# asp.net-mvc-3 - 为什么 Razor 将验证属性放在 @Html.Hiddenfor() 助手中？

> ID：11613087
> 
> 赞同：4
> 
> 时间：2012-07-23T13:01:59.580
> 
> 标签：asp.net-mvc-3, razor

这没有任何意义，有没有办法让它不这样做？为了

```
@Html.HiddenFor(model=>model.Id) 
```

我明白了

```
<input type="hidden" value="e62fceab-588c-4777-bfe9-8516425a5028" name="Id" id="Id" data-val-required="The Id field is required."  data-val="true"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:33:22.207

MVC 会自动向所有不可为空的字段添加必需的验证。如果你不喜欢这个，那么你可以让你的 id 为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:25:12.693

它只是服务器端保护的附加层。使用像 Fiddler 这样的中间工具来更改传出的隐藏输入是微不足道的。

至于使其成为可选，几乎可以肯定有一个数据属性。或者，应该在模型中的属性名称后添加一个问号。

# mod-rewrite - mod-rewrite：.htaccess 中的 url-rewrite 不起作用

> ID：11613097
> 
> 赞同：0
> 
> 时间：2012-07-23T13:02:38.967
> 
> 标签：mod-rewrite, url-rewriting

我想将 URL 从 my-custom-url.com/abc/admin/anypage/ 重写为 my-custom-url.com/def/admin/anypage/

我已经看过[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)，“移动文档根目录”一章

我在根目录（指的是[http://www.my-custom-url.com/](http://www.my-custom-url.com/)）中打开 .htaccess ，查找`<IfModule mod_rewrite.c>`并包含以下代码：

```
RewriteEngine on  
RewriteRule   ^/abc/admin/$  /def/admin/  [R] 
```

我也试过：

```
RewriteRule /abc/admin/ /def/admin/ 
```

两者都没有工作。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:14:06.937

首先，请注意，您可以使用 .htaccess 和 modRewrite

采取舒尔：在您的 .htaccess 中写一些废话，例如 asdfasdf 作为 fasdfa 这应该执行内部服务器错误当您收到错误时，请删除废话.-)

然后试试这个：

```
RewriteEngine on 
RewriteRule ^test-the-world/$ http://www.google.de [L]
RewriteRule ^abc/admin/$ /def/admin/ [R,L] 
```

然后打开URI：

[http://example.com/test-the-world/](http://example.com/test-the-world/) -> 成功后进入 google.de

[http://example.com/abc/admin/](http://example.com/abc/admin/) -> 成功后进入 /def/admin/

# java - 如何获取我正在运行的 jar 文件所在目录的路径？

> ID：11613100
> 
> 赞同：1
> 
> 时间：2012-07-23T13:02:59.243
> 
> 标签：java, path, directory, executable

我尝试检索可执行 jar 文件所在目录的路径。这意味着：我有以下结构：

```
 --> Application (this is a folder somewhere in my file system)
     --> application.jar (this is my java application
     --> SomeData (folder in the same directory like the application)
         --> some other folders
         ...... 
```

当我通过命令行启动我的 application.jar 时，我想解析 SomeData 文件夹中的一些文件。在[https://stackoverflow.com/a/320595/1540630](https://stackoverflow.com/a/320595/1540630)他们已经展示了如何获取正在运行的 jar 文件的当前路径，但是当我执行语句时：

```
System.out.println(XMLParser.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

...我得到以下信息：

```
/.../Application/application.jar 
```

但我只想拥有：

```
/.../Application/ 
```

最好在后面的步骤中说我需要

```
/.../Application/SomeData/SomeFolder/data.xml 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:09:54.253

`CodeSource.getLocation()`给你一个`URL`，然后你可以创建相对于它的新 URL：

```
URL jarLocation = XMLParser.class.getProtectionDomain().getCodeSource().getLocation();
URL dataXML = new URL(jarLocation, "SomeData/SomeFolder/data.xml"); 
```

您*不能*简单地这样做`new File(...getCodeSource().getLocation().getPath())`，因为不能保证 URL 路径在所有平台上都是有效的本机文件路径。如果可以的话，坚持使用 URL 并将 URL 直接传递给 XML 解析器会更安全，但是如果你真的需要一个，`java.io.File`那么你可以使用[这样的习语](http://gate.svn.sourceforge.net/viewvc/gate/gate/tags/release-7.0/src/gate/util/Files.java?view=markup#l628)从 URL 创建一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:07:09.310

一旦你有了罐子的位置，你就可以使用

```
new File(new File(jarPath).getParent(), "SomeData/SomeFolder/data.xml"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T13:08:02.570

由于您已经将路径作为字符串。您可以尝试以下方法

```
String path = XMLParser.class.getProtectionDomain().getCodeSource().getLocation().getPath(); 

String parentFolder = new File(path).getParent(); 
```

# c# - Process.Start() 创建无限窗口

> ID：11613103
> 
> 赞同：0
> 
> 时间：2012-07-23T13:03:07.863
> 
> 标签：c#, process, cmd, system.diagnostics

我想通过我的一个 c# 程序使用命令提示符命令，所以我查找了一些简单的编码。我从字面上提取了 4 行代码，它们创建了 process 类和 processstartinfo 类的新实例，然后将文件名设置为 cmd 并将参数设置为我的命令。一旦 process.Start() 被调用，而不是像预期的那样只创建一个窗口，就会打开无数个命令提示符窗口，直到我必须重新启动计算机。我可能会补充一点，我将代码隔离到它自己的程序中，以确保它不是我的程序的任何外部代码创建了这种效果，并且我仍然得到相同的结果。有任何想法吗？

编辑：不包括主要方法/类，这是我使用的确切代码。它是从网上逐字提取的（论点除外）：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C tree";
process.StartInfo = startInfo;
process.Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:07:26.450

如果没有看到您正在使用的代码，就无法分辨。

尝试改用这个

```
ProcessStartInfo info = new ProcessStartInfo(); 
info.Arguments = "/C echo your command"; 
info.WindowStyle = ProcessWindowStyle.Hidden; 
info.CreateNoWindow = true; 
info.FileName = "cmd.exe"; 
Process.Start(info); 
```

或者，如果您不止一次使用它，则将其变成一种方法。

# c - 在 C 中使用 fork() 时出现分段错误

> ID：11613104
> 
> 赞同：0
> 
> 时间：2012-07-23T13:03:11.013
> 
> 标签：c, segmentation-fault, fork

基本上我要做的是从文件中读取一个数字，将值加一，然后将数字写回同一个文件。使用 fork() 应该让两个进程都访问文件但使用锁，因此它们轮流进行。我不断收到分段错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

void appendValue(FILE *, int *);
int readValue(FILE *, int *);
void lockFile(FILE *);
void unlockFile(FILE *);
void whatProcess(pid_t *pID);

int main(void) {
    pid_t pID;
    pID = fork();
    int value = 0, counter = 0;
    int *valPtr = &value;
    pid_t *pidPtr = &pID;
    FILE *file = fopen("output.txt", "a+");
    lockFile(file);

    while(counter < 1000) {
        whatProcess(pidPtr);
        value = readValue(file, valPtr);
        value++;
        appendValue(file, valPtr);
        rewind(file);
        counter++;
    }
    unlockFile(file);       
    fclose(file);
    printf("\n");
    return 0;
}

void whatProcess(pid_t *pID) {
    if(*pID > 0) {
        printf("\n --- In Parent ---");
    } else if(*pID == 0) {
        printf("\n --- In Child ---");
    } else {
            printf("\n --- fork() Failed ---");
    }
}

void lockFile(FILE *file) {
    int lock;
    lock = lockf(fileno(file), F_LOCK, 0);
        while(lock != 0) {}
        if(lock == 0) {
            printf("\nPID %d: Lock Successful", getpid());
        } else {
            printf("\nPID %d: Lock Unsuccessful", getpid());
        }   
}

void unlockFile(FILE *file) {
    int lock;
    lock = lockf(fileno(file), F_LOCK, 0);
        while(lock != 0) {}
        if(lock == 0) {
            printf("\nPID %d: Unlock Successful", getpid());
        } else {
            printf("\nPID %d: Unlock Unsuccessful", getpid());
        }   
}

void appendValue(FILE *file, int *value) {
    fprintf(file, "%d\n", *value);
}

int readValue(FILE *file, int *value) {
    while(!feof(file)) {
        fscanf(file, "%d", value);
    }
    return *value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:13:17.700

`fscanf`in`readValue`正在写入一个未分配的位置。您`value`作为指针传入，因此无需使用运算符的地址。

```
int readValue(FILE *file, int *value) {
    fscanf(file, "%d", value);
    printf("\nreadValue(): %d", *value);
    return *value;
} 
```

或者，甚至更好：

```
int readValue(FILE *file, int *value) {
    if (fscanf(file, "%d", value) == 1) {
        printf("\nreadValue(): %d", *value);
        return 0;
    }
    return -1;
} 
```

您当前的功能不指示它是成功还是失败。添加一个状态返回值（零，-1 很常见）或省略错误检查并改为执行此操作：

```
int readValue(FILE *file) {
    int buf;
    if (fscanf(file, "%d", &buf) == 1) {
        printf("\nreadValue(): %d", buf);
    } else {
        perror("readValue(): fscanf failed");
    }
    return buf; /* could be a garbage value, use at own risk */
} 
```

# ios - 不常见的png文件iOS显示

> ID：11613105
> 
> 赞同：0
> 
> 时间：2012-07-23T13:03:13.340
> 
> 标签：ios, png, retina-display, image-conversion

在[这篇文章](https://stackoverflow.com/q/11519152/127493)中，我想知道为什么我的 png 文件在视网膜显示器上显示不好。

我最终发现问题来自PNG文件本身：当我打开它并用photoshop或其他东西再次保存时，问题就消失了。

正如[这篇文章](https://superuser.com/a/145120/147736)所建议的那样，我使用 sips 命令来查看我的 PNG 文件究竟是由什么组成的。我有`original-image.png`（有故障）和`photoshoped-image.png`

命令

```
sips original-image.png -g all 
```

给我

```
 pixelWidth: 256
  pixelHeight: 256
  typeIdentifier: public.png
  format: png
  formatOptions: default
  dpiWidth: 72.000
  dpiHeight: 72.000
  samplesPerPixel: 3
  bitsPerSample: 8
  hasAlpha: no
  space: RGB 
```

和

```
sips photoshoped-image.png -g all 
```

给我

```
 pixelWidth: 256
  pixelHeight: 256
  typeIdentifier: public.png
  format: png
  formatOptions: default
  dpiWidth: 72.000
  dpiHeight: 72.000
  samplesPerPixel: 4
  bitsPerSample: 8
  hasAlpha: yes
  space: RGB
  profile: HD 709-A 
```

所以有3个区别：

*   每像素样本
*   有阿尔法
*   Photoshop 文件有一个配置文件。

但是这些属性在 sips 中是只读的，我想知道如何更改它们以准确了解错误的来源。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:09:14.897

所以使用 sips 你可以输出不同的文件。获取 Photoshop 文件并开始修改它。先去掉profile，然后去掉alpa通道（会影响前两个变量）。

这个图像很可能有效。PNG 有许多选项，原始图像可能具有使用这些工具看不到的其他一些功能。Photoshop 显然是在完全重写图像，使用 RGB 值作为文件之间唯一的共同属性。

我怀疑当您执行上述操作时，该图像也会起作用。原件有一些奇怪的地方。

在任何情况下，如果您使用带有 alpha 通道的 png，则在 iOS 上会更容易，因为如果基础图像没有，它会将它们转换为有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:31:53.710

在某些文件上，这有效：

sips -s format png '/Volumes/HD/Optimized PNG/TXT - Section Depth copy.png' --out '/Volumes/HD/Optimized PNG/TXT - Section Depth copy-.PNG' /Volumes/HD/Optimized PNG /TXT - 部分深度复制.png /Volumes/HD/Optimized PNG/TXT - 部分深度复制-.PNG mis-bhayward61p-swk:~ zav$

但是，有时它不会：

sips -s format png --setProperty hasAlpha 0 '/Volumes/HD/Optimized PNG/Subsection copy 2/Section Depth Text.png' --out '/Volumes/HD/Optimized PNG/Subsection copy 2/Section Depth Text-. PNG' /Volumes/HD/Optimized PNG/Subsection copy 2/Section Depth Text.png 错误：无法在文件/Volumes/HD/Optimized PNG/Subsection copy 2/Section Depth Text-.PNG mis-bhayward61p 上执行 --setProperty hasAlpha -swk:~ zav$

希望这能让你走得更远。

# windows - 确定谁实例化了 COM 接口

> ID：11613110
> 
> 赞同：0
> 
> 时间：2012-07-23T13:03:44.093
> 
> 标签：windows, security, com

我有一些 COM 接口，我想保护它免受攻击。这个想法是只允许通过本地计算机上编译的 .exe 文件来实例化接口，并找出谁试图实例化接口。然后我可以检查 .exe 文件的签名并对其进行比较，以便在数据库或类似的东西上进行一些哈希。

是否有可能找出哪个程序/进程/任何试图实例化 COM 接口的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:21:13.610

如果是进程内 COM，那么你的 COM DLL 被加载到调用进程中，你可以使用 GetCurrentProcessID 函数来查找当前进程的 ID。然后[枚举](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684865%28v=vs.85%29.aspx)系统中的进程以检查哪个是您的。

# c# - 实体框架和加密数据库

> ID：11613112
> 
> 赞同：8
> 
> 时间：2012-07-23T13:03:48.027
> 
> 标签：c#, asp.net, sql-server, entity-framework, encryption

我有一个在数据库（MS SQL Server）中加密的列（工资）。我正在使用实体框架从前端显示/编辑记录。知道如何解密前端的列以显示工资值吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:25:57.147

如果您在数据库级别进行加密，则必须使用数据库级别进行解密 - 用于`ObjectContext.ExecuteStoreQuery<YourEntityType>(...)`从数据库加载记录 - 将具有正确解密用法的 SQL 命令传递到该方法中。

# cuda - cuda fortran 加速

> ID：11613119
> 
> 赞同：0
> 
> 时间：2012-07-23T13:04:15.400
> 
> 标签：cuda, fortran

我正在尝试评估一个简单的 cuda fortran 代码的加速：数组的增量。

处理器版本：

```
module simpleOps_m
contains
subroutine increment (a, b)
implicit none
integer , intent ( inout ) :: a(:)
integer , intent (in) :: b
integer :: i, n

n = size (a)
do i = 1, n
a(i) = a(i)+b
enddo

end subroutine increment
end module simpleOps_m

program incrementTest
use simpleOps_m
implicit none
integer , parameter :: n = 1024*1024*100
integer :: a(n), b

a = 1
b = 3

call increment (a, b)

if ( any(a /= 4)) then
write (* ,*) '**** Program Failed **** '
else
write (* ,*) 'Program Passed '
endif
end program incrementTest 
```

显卡版本：

```
module simpleOps_m
contains
attributes ( global ) subroutine increment (a, b)
implicit none
integer , intent ( inout ) :: a(:)
integer , value :: b
integer :: i, n

n = size (a)

do i=blockDim %x*( blockIdx %x -1) + threadIdx %x ,n, BlockDim %x* GridDim %x
    a(i) = a(i)+b
end do

end subroutine increment
end module simpleOps_m

program incrementTest
use cudafor
use simpleOps_m
implicit none
integer , parameter :: n = 1024*1024*100
integer :: a(n), b
integer , device :: a_d(n)
integer :: tPB = 256

a = 1
b = 3

a_d = a
call increment <<< 128,tPB >>>(a_d , b)
a = a_d

if ( any(a /= 4)) then
write (* ,*) '**** Program Failed **** '
else
write (* ,*) 'Program Passed '
endif
end program incrementTest 
```

所以我用 pgf90 [http://www.pgroup.com/resources/cudafortran.htm编译了这两个版本](http://www.pgroup.com/resources/cudafortran.htm)

使用“时间”命令来评估执行时间，我得到：

* * *

CPU版本

$ 时间（cpu 可执行文件）

实际0m0.715s

用户 0m0.410s

系统 0m0.300s

* * *

适用于 GPU 版本

$ 时间（gpu 可执行文件）

真正的 0m1.057s

用户 0m0.710s

系统 0m0.340s

* * *

所以加速=（CPU exec.time）/（GPU exec.time）是< 1 是否有一些原因为什么加速不是应该达到的> 1？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-10T13:37:40.007

`a=1`这里的问题是，在这个相当人为的示例中，在主机 ( . 由于并行工作的总量与串行工作的总量大致相同，因此[阿姆达尔定律](https://en.wikipedia.org/wiki/Amdahl%27s_law)与通过在 GPU 上并行化一些代码来实现任何类型的显着加速非常不利。

通过将初始化和增量操作融合到 GPU 上的单个并行操作中，可能会实现更显着的加速。

[此答案已从评论中收集并添加为社区 wiki 条目，以将此问题从 CUDA 标签的未回答列表中删除]

# java - MySQL 不会在搜索查询中同时返回波斯语和英语数字

> ID：11613127
> 
> 赞同：2
> 
> 时间：2012-07-23T13:04:37.650
> 
> 标签：java, mysql, jpa, jpql

在 MySQL 中，我的数据库和表的整理是 utf8_persian_ci。这种特定的排序规则，与 utf8_general_ci 不同，认为 "1","2","3",... 和 "1","2","3",... 的权重相同（后者是波斯数字格式） . 相同的权重意味着在搜索查询中应该返回波斯语和拉丁语格式。尽管我的数据库、表甚至 collat​​ion_server（我在 my.cnf 中定义）都是 utf8_persian_ci，但我的搜索查询不会同时返回波斯和拉丁数字：

桌子：

```
 --------
|  col   |
|--------|
|   1    |
|--------|
|   ۱    |
---------- 
```

（col 类型为 varchar）

询问：

```
SELECT * FROM my_tbl tbl where tbl.col like "1" 
```

结果：

```
 --------
|  col   |
|--------|
|   1    |
|--------| 
```

我发现以下查询返回了我想要的结果：

```
SELECT * FROM my_tbl tbl where tbl.col like "1" collate utf8_persian_ci 
```

返回：

```
 --------
|  col   |
|--------|
|   1    |
|--------|
|   ۱    |
---------- 
```

我的第一个问题是我无法弄清楚为什么我必须编写**collat​​e utf8_persian_ci**，尽管 MySQL 服务器和数据库的默认排序规则是 utf8_persian_ci。

我的第二个问题是我正在处理的应用程序正在使用 JPA。所以我写的查询是不支持**collat​​e utf8_persian_ci**的 JPQL 。我需要一个等效代码来**整理**JPQL 中的 utf8_persian_ci，或者我应该将 MySQL 配置为 在查询结束时不使用**整理 utf8_persian_ci并获得指定的结果。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:32:09.377

虽然*server*、*database*和*table*的默认排序规则是`utf8_persian_ci`，但这些默认值可能已被列本身的定义覆盖。

您可以在列上强制执行所需的排序规则；例如：

```
ALTER TABLE my_tbl MODIFY col VARCHAR(123) COLLATE utf8_persian_ci 
```

# javascript - 有没有像 Yahoo Profile 这样的 jQuery 插件？

> ID：11613128
> 
> 赞同：0
> 
> 时间：2012-07-23T13:04:45.840
> 
> 标签：javascript, jquery

我正在创建一个网站，用户必须添加一些数据，如日期、地点等，我看到 Yahoo Profile 有一个很酷的东西，您可以通过单击该特定区域来添加例如您的姓名。我的问题是是否有人知道类似的插件，或者我应该如何开始构建它？

我的目标是让用户输入并提交。

![在此处输入图像描述](../Images/6276a7308d702f767b24c236429c3593.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:09:16.550

我不熟悉 yahoo 配置文件，但看起来[JEditable](http://www.appelsiini.net/projects/jeditable)可以帮助您入门。

# jquery - jQuery 反向展开

> ID：11613129
> 
> 赞同：2
> 
> 时间：2012-07-23T13:04:52.283
> 
> 标签：jquery

在我的页面上，我有一个按钮，可以将所有`<article>`内容从它的容器中解开，然后将每个容器分别包装到`<section>`. 我的问题是是否可以通过单击一个按钮来反转该操作，以便所有的`<article>`人都回到他们开始时的相同位置？

我创建了一个示例：

[http://jsfiddle.net/JCERK/9/](http://jsfiddle.net/JCERK/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:08:46.820

您需要预先标记每个`<article>`标签，以识别`<section>`它们所在的位置。将其放入其中`class`是个好主意，例如：

```
$('article').addClass(function() {
    return 'section-' + $(this).parent().index();
}); 
```

当您将它们包装起来时，您需要将它们分组`class`。

```
$('#wrapback').click(function() {
    $('article').unwrap();
    for (var i = 0; i < sections; ++i) {
        var articles = $('article.section-' + i);
        articles.wrapAll('<section/>');
    }
});​ 
```

[在http://jsfiddle.net/alnitak/QKLkV/](http://jsfiddle.net/alnitak/QKLkV/)工作演示

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T13:13:47.503

我的方法只是使用 jQuery`.clone();`方法。

参考：[**jsFiddle**](http://jsfiddle.net/mGb3a/)

**jQuery代码：**

```
var oldWrap = $('#wrapper').clone();

$('#unwrap').click(function() {
    $('article').unwrap();
    $('article').wrap('<section></section>');
});

$('#wrapback').click(function() {

    $('#wrapper').replaceWith(oldWrap);
    oldWrap = $('#wrapper').clone();

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T13:14:59.617

尝试添加一些属性或`.data`对每个属性`article`进行分组，然后使用`.wrapAll`.

也许最简单的方法是使用循环`addClass`的索引`.each`，因为您可以快速找到`articles`给定类的所有内容并将它们包装在一起。

一种实现：

```
$('#unwrap').on('click', function() {
    $('section').each(function(i, el) {
        $(this).find('article').addClass('_index_'+i).unwrap();
    });
    $('article').wrap('<section></section>');
});

$('#wrapback').on('click', function() {
    var idx = 0;
    while ($('article._index_' + idx).length) {
        $('article._index_' + idx).unwrap().wrapAll('<section>');
        idx += 1;
    };
});​ 
```

[http://jsfiddle.net/mblase75/JCERK/14/](http://jsfiddle.net/mblase75/JCERK/14/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:09:40.717

您可以使用重新包装它们[`.wrapAll`](http://api.jquery.com/wrapall/)。

基本代码是这样的：

演示：http: [//jsfiddle.net/SO_AMK/UhWqa/](http://jsfiddle.net/SO_AMK/UhWqa/)

jQuery：

```
$('#unwrap').click(function() {
    $('article').unwrap()
    $('article').wrap('<section></section>')
})
$("#wrapback").click(function() {
    $("article").unwrap().wrapAll("<section></section>");
});​ 
```

HTML：原始

CSS：原创

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T13:11:30.607

[jquery.wrapAll()](http://api.jquery.com/wrapAll/)是您需要的，但是您必须区分每组文章（例如将它们包装在 div 中），否则该`wrapAll`方法会将您的所有文章包装在一个中`section`

# android - 如何玩前卷？

> ID：11613130
> 
> 赞同：2
> 
> 时间：2012-07-23T13:05:03.453
> 
> 标签：android, android-intent, android-video-player

我想在我的应用程序中播放任何视频直播之前播放前贴片广告（就像你管一样）。现在我可以通过流媒体使用 URL 播放视频，但找不到任何播放预卷的方法，请有人帮助我实现这个目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:09:49.987

只需为您的媒体播放器提供一个 videoUrls 的 ArrayList。使用 OnCompletionListener 接口并在预卷完成后播放下一个（非预卷）视频。据我了解，您无法为 Android 媒体播放器提供 url 列表，您必须为每个视频设置数据源。

```
//Starting the mediaplayer
private void playVideo() {
mediaPlayer.setDataSource(videoUrlList.get(playlistPosition));
mediaPlayer.prepareAsync();     
}

@Override
public void onCompletion(MediaPlayer mp) {  
//Look if the list has more videos
if (playlistPosition < videoUrlList.size() - 1) {
playlistPosition++;

if(mediaPlayer != null)
mediaPlayer.reset();

playVideo();
}else{
//If no more videos, quit MoviePlayer Activity
finish();
} 
```

}

# android - java.lang.IllegalStateException: 这应该只在游标有效时调用

> ID：11613131
> 
> 赞同：2
> 
> 时间：2012-07-23T13:05:05.253
> 
> 标签：android

我正在使用 android 2.1 中的片段为此我使用 supportV4 jar。我在一个活动中有两个片段，一个用于新数据插入，另一个用于显示列表，我在片段中使用 ResourceCursorAdapter 来显示来自光标的所有数据，但是当我从这个活动移动到另一个活动时，我强制关闭它会产生这样的错误

```
 07-23 18:26:13.028: E/AndroidRuntime(25309): java.lang.IllegalStateException: this should only be called when the cursor is valid
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.support.v4.widget.CursorAdapter.getView(CursorAdapter.java:245)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.AbsListView.obtainView(AbsListView.java:1315)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1198)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.ListView.onMeasure(ListView.java:1109)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:381)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1029)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.View.measure(View.java:8171)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.os.Looper.loop(Looper.java:123)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at java.lang.reflect.Method.invokeNative(Native Method)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at java.lang.reflect.Method.invoke(Method.java:521)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-23 18:26:13.028: E/AndroidRuntime(25309):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-15T23:49:22.547

确保在投影中包含 _ID 列。光标适配器需要它才能工作。

# jsf - JSF 2 中带参数的自定义转换器

> ID：11613134
> 
> 赞同：15
> 
> 时间：2012-07-23T13:05:17.937
> 
> 标签：jsf, jsf-2, converter

我正在尝试实现一个自定义截断转换器，它在给定索引处截断字符串并添加一个延续符号。转换器工作正常，只有当我对参数进行硬编码时，因为它们没有被传递到后端。我究竟做错了什么？

参数是转换器类的属性：

```
@FacesConverter(value = TruncateConverter.CONVERTER_ID)
public class TruncateConverter implements Converter, StateHolder
{
    public static final String CONVERTER_ID = "bla.blablabla.Truncate";

    private int truncateIndex;
    private String contSymbol; 
```

这是我使用转换器（或尝试）的方式：

```
<h:outputText id="news-text-left" value="#{newsListBean.newsList_teaser.text}">
    <f:converter converterId="bla.blablabla.Truncate" truncateIndex="150" contSymbol="..." />
</h:outputText> 
```

我用谷歌搜索了很多，但找不到带有参数的 JSF2 转换器的单个示例……谢谢你们的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-28T10:28:18.963

您可以查看 JSF2.0 源代码。例如 DateTimeConverter...JSF 源代码在 svn 存储库中可用：[https ://svn.java.net/svn/mojarra~svn/trunk](https://svn.java.net/svn/mojarra~svn/trunk)

IMO 创建这样的转换器并不容易。它还需要创建转换器标签来注册转换器。

将一些数据传递给转换器的其他方式是属性。所以你可以写

```
<h:outputText ...>
  <f:converter converterId="bla.blablabla.Truncate" />
  <f:attribute name="truncateIndex" value="150"/>
</h:outputText> 
```

比`component.getAttributes().get("truncateIndex");` 在转换器代码中调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-23T08:39:08.140

基于[@Maks](https://stackoverflow.com/users/791085/maks)解决方案：可以将转换器和属性组合在一个标签中：

```
<facelet-taglib version="2.2"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-facelettaglibrary_2_2.xsd">
    <namespace>http://mycompany.com/some-identifier</namespace>
    <tag>
        <tag-name>truncate</tag-name>
        <converter>
            <converter-id>bla.blablabla.Truncate</converter-id>
        </converter>
        <attribute>
            <name>truncateIndex</name>
        </attribute>
    </tag>
</facelet-taglib> 
```

然后你可以像这样使用转换器：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:my="http://mycompany.com/some-identifier">

  <my:truncate truncateIndex="150" />

</ui:composition> 
```

您也不需要从组件属性中获取参数。将自动填充具有相同名称的 bean-property：

```
@FacesConverter("bla.blablabla.Truncate")
public class Truncate implements Converter {

    private String truncateIndex;

    // getters + setters

    ...

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T08:40:46.977

[http://jerryorr.blogspot.nl/2011/10/creating-jsf-12-custom-converter-with.html](http://jerryorr.blogspot.nl/2011/10/creating-jsf-12-custom-converter-with.html)是使用参数设置您的第一个自定义转换器的好指南

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T18:28:51.817

我就是这样做的（在一个单独的 jar 文件中，并使用 maven 的默认目录）：

1) 创建转换器的类（在 src/main/java 内）

2) 创建一个 .taglib.xml 类（在 src/main/resources/META-INF 内）

3) 创建 faces-config.xml (在 src/main/resources/META-INF 里面)

例子：

第1步）

```
package com.ocabit.jsf.converter;

import java.io.Serializable;
import java.math.BigDecimal;
import java.math.RoundingMode;
import java.text.NumberFormat;

import javax.faces.application.FacesMessage;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;
import javax.faces.convert.FacesConverter;

import org.springframework.stereotype.Service;

import com.ocabit.utils.currency.CurrencyUtils;

/**
 * Converter para valores BigDecimal.
 * 
 * @author Carlos Eduardo Pauluk
 * 
 */
@FacesConverter("bigDecimalConverter")
@Service("bigDecimalConverter")
public class BigDecimalConverter implements Converter, Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public static final String CONVERTER_ID = "com.ocabit.jsf.converter.BigDecimalConverter";

    /**
     * Em caso de null, força a saída para 0.0;
     */
    private boolean nullToZero = false;

    /**
     * Em caso de zero, força a saída para null;.
     */
    private boolean zeroToNull = false;

    /**
     * Só retorna números positivos.
     */
    private boolean onlyAbs = false;

    /**
     * Só retorna números negativos.
     */
    private boolean onlyNeg = false;

    /**
     * Quantidade de casas decimais.
     */
    private int decimals = 2;

    @Override
    public Object getAsObject(final FacesContext context, final UIComponent component, final String value) {
        try {
            BigDecimal bd = new BigDecimal(value);
            bd = bd.setScale(getDecimals(), RoundingMode.HALF_DOWN);

            if (bd.equals(BigDecimal.ZERO) && isZeroToNull()) {
                return null;
            }

            if (isOnlyAbs()) {
                bd = bd.abs();
            }
            if (isOnlyNeg()) {
                bd = bd.abs();
                bd = bd.negate();
            }

            return bd;
        } catch (final Exception e) {
            BigDecimal bd = null;
            if (isNullToZero()) {
                bd = CurrencyUtils.getBigDecimalCurrency("0.0");
                bd = bd.setScale(getDecimals(), RoundingMode.HALF_DOWN);
            }
            return bd;
        }
    }

    @Override
    public String getAsString(final FacesContext context, final UIComponent component, final Object value) {
        if (!(value instanceof BigDecimal)) {
            throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Erro ao converter o valor decimal.", ""));
        }

        final NumberFormat nf = NumberFormat.getInstance();
        // sempre terá 2 casas decimais
        nf.setMinimumFractionDigits(2);
        nf.setMaximumFractionDigits(2);
        return nf.format(((BigDecimal) value).doubleValue());
    }

    public boolean isNullToZero() {
        return nullToZero;
    }

    public void setNullToZero(boolean nullToZero) {
        this.nullToZero = nullToZero;
    }

    public boolean isZeroToNull() {
        return zeroToNull;
    }

    public void setZeroToNull(boolean zeroToNull) {
        this.zeroToNull = zeroToNull;
    }

    public boolean isOnlyAbs() {
        return onlyAbs;
    }

    public void setOnlyAbs(boolean onlyAbs) {
        this.onlyAbs = onlyAbs;
    }

    public boolean isOnlyNeg() {
        return onlyNeg;
    }

    public void setOnlyNeg(boolean onlyNeg) {
        this.onlyNeg = onlyNeg;
    }

    public int getDecimals() {
        return decimals;
    }

    public void setDecimals(int decimals) {
        this.decimals = decimals;
    }

} 
```

第2步）

```
<!DOCTYPE facelet-taglib PUBLIC
    "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
    "facelet-taglib_1_0.dtd">
<facelet-taglib version="2.2"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-facelettaglibrary_2_2.xsd">
    <namespace>http://ocabit.com.br/facelets</namespace>

    <tag>
        <tag-name>convertBigDecimal</tag-name>      
        <converter>
            <converter-id>com.ocabit.jsf.converter.BigDecimalConverter</converter-id>           
        </converter>    
    </tag>

</facelet-taglib> 
```

步骤 3)

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
        http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd"
    version="2.2">

    <converter>
        <description></description>
        <converter-id>com.ocabit.jsf.converter.BigDecimalConverter</converter-id>
        <converter-class>com.ocabit.jsf.converter.BigDecimalConverter</converter-class>
        <property>
            <property-name>nullToZero</property-name>
            <property-class>boolean</property-class>
            <description>Ao invés de retornar 'null', retorna '0.0'</description>
        </property>
        <property>
            <property-name>zeroToNull</property-name>
            <property-class>boolean</property-class>
            <description>Ao invés de retornar '0.0', retorna 'null'</description>
        </property>
        <property>
            <property-name>onlyAbs</property-name>
            <property-class>boolean</property-class>
            <description>Somente retorna números positivos</description>
        </property>
        <property>
            <property-name>onlyNeg</property-name>
            <property-class>boolean</property-class>
            <description>Somente retorna números negativos</description>
        </property>
        <property>
            <property-name>decimals</property-name>
            <property-class>int</property-class>
            <description>Quantidade de casas decimais</description>
        </property>
    </converter>

</faces-config> 
```

瞧。

# clojure - Clojure 不断和地图功能

> ID：11613135
> 
> 赞同：6
> 
> 时间：2012-07-23T13:05:18.977
> 
> 标签：clojure, functional-programming

为什么这段 Clojure 代码：

```
user=> (map (constantly (println "Loop it.")) (range 0 3)) 
```

产生这个输出：

```
Loop it.
(nil nil nil) 
```

我希望它打印三次“循环它”作为三次评估函数的副作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T13:09:27.750

`constantly`不会多次评估其论点。它是一个函数，而不是宏，因此在`constantly`运行之前，该参数只被评估一次。`constantly`所做的只是它接受它的（评估的）参数并返回一个函数，该函数在每次调用它时都返回给定的值（无需重新评估任何东西，因为正如我所说，参数甚至在运行之前就已经被评估了）`constantly`。

如果您只想调用`(println "Loop it")`范围内的每个元素，则应将其作为函数传递给 map 而不是`constantly`. 请注意，您实际上必须将其作为函数传递，而不是评估表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T16:46:45.897

[您可以通过反复](http://clojuredocs.org/clojure_core/clojure.core/repeatedly)使用和 lambda 表达式获得接近您意图的行为。

例如：

```
(repeatedly 3 #(println "Loop it")) 
```

除非您在 REPL，否则它需要被 a`dorun`或类似名称包围。`repeatedly`是懒惰的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T17:00:01.517

正如 sepp2k 正确指出的那样`constantly`，它是一个函数，因此它的参数只会被评估一次。

实现您在这里所做的惯用方法是使用`doseq`：

```
(doseq [i (range 0 3)]
  (println "Loop it.")) 
```

或者`dotimes`（在这种特殊情况下更简洁有效，因为您实际上并没有使用由 产生的序列`range`）：

```
(dotimes [i 3]
  (println "Loop it.")) 
```

这两种解决方案都是非惰性的，如果您只是为副作用运行一些代码，这可能是您想要的。

# apache - Htaccess 非 www 到 www 重定向

> ID：11613137
> 
> 赞同：2
> 
> 时间：2012-07-23T13:05:35.600
> 
> 标签：apache, .htaccess

我正在使用以下代码强制非 www URL 重定向到 www URL；

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
</IfModule>

<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
  RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</IfModule> 
```

但是，当我访问 mydomain.com 时，它不会重定向到 www.mydomain.com。

我正在使用 Red Hat Linux，想知道是否需要添加其他任何内容到 htaccess 才能使其正常工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:07:35.007

更改重写规则如下：

```
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L,NC,QSA] 
```

# java - “意外类型所需类发现类型参数攻击”

> ID：11613139
> 
> 赞同：3
> 
> 时间：2012-07-23T13:05:41.887
> 
> 标签：java, generics, copy-constructor, type-parameter

这是我的代码（试图为我的类编写一个复制构造函数）：

```
public class ArgumentTree<GameArgument, Attack> extends DelegateTree<GameArgument, Attack>
{
    public ArgumentTree()
    {super();}

    public ArgumentTree(ArgumentTree<GameArgument, Attack> sourceTree)
    {
        super();
        Attack atck = new Attack(); // I get the Error here
        more code....
    }
} 
```

我收到此错误：

```
unexpected type  
 required: class  
 found:   type parameter Attack 
```

只是为了澄清：我不想使代码通用。我已经知道我将使用的类型只有 GameArgument 和 Attack。此外，Attack 有自己适当的默认构造函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T13:08:46.377

您正在使用实际的类名作为类型变量。这没有意义。也许你想要类似的东西

```
public class ArgumentTree extends DelegateTree<GameArgument, Attack> 
```

# xaml - Caliburn Micro 中的屏幕事件（启动时显示消息框）

> ID：11613141
> 
> 赞同：0
> 
> 时间：2012-07-23T13:05:48.003
> 
> 标签：xaml, caliburn.micro

我想在应用启动时显示消息框。
我使用`OnActivated`第一个屏幕的方法来显示模态对话框。

它工作得很好。用户在不按确定的情况下停用应用程序的情况很好。再次激活应用程序后`messageBox`显示新的。完美的。

但问题是应用程序没有完全初始化，并且在等待 5 或 10 秒后操作系统杀死了应用程序。

我尝试使用`OnViewLoaded`事件。但是这个事件不会在每次 screen 时触发`navigatedTo`。

每次表单导航到但稍晚一点（如`OnViewLoaded`事件）时，我能否以某种方式触发一些事件？

或者

操作系统在什么时候停止其超时计时器？正如我所见，`OnNavigated`禁止显示模态对话框，但在`Loaded`处理程序中 - 已经可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:21:02.320

抱歉快速自我回答。突然发现了一个小窍门。

我已经像这样覆盖了 OnNavigatedTo 方法

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    base.InvalidateMeasure();
} 
```

我在 Caliburns`OnViewReady`方法中显示 MessageBox。

因此

1.  应用程序不会因为加载时间超过 10 秒而被操作系统杀死。
2.  在 deactivate-dorment-activate 循环后重新显示消息框。

# php - OCI8 PHP 错误 OCIEnvNlsCreate() 失败

> ID：11613143
> 
> 赞同：1
> 
> 时间：2012-07-23T13:05:53.697
> 
> 标签：php, oracle10g, oci8

在连接/运行 Oracle SQL 命令时，我经常收到随机错误。这在一天中 99% 的时间都有效，但随机运行大约 10 分钟，我们将收到大量错误，并且 SQL 查询全部失败。

**抱歉以下所有代码，只是想提供帮助**

错误是：

```
PHP Warning:  oci_connect() [<a href='function.oci-connect'>function.oci-connect</a>]:  OCIEnvNlsCreate() failed. There is something wrong with your system - please check that LD_LIBRARY_PATH includes the directory with Oracle Instant Client libraries in /var/www/db.php on line 59, referer: https://www.abc.com/abc.php 
```

Oracle 即时客户端：

```
root@server:/opt/oracle/instantclient# pwd
/opt/oracle/instantclient
root@server:/opt/oracle/instantclient# ls -l
total 99940
-rw-r--r-- 1 root root      238 2009-07-03 14:40 BASIC_README
-r--r--r-- 1 root root  1609607 2009-07-03 14:40 classes12.jar
-rwxr-xr-x 1 root root    67766 2009-07-03 14:40 genezi
lrwxrwxrwx 1 root root       17 2009-07-03 14:41 libclntsh.so -> libclntsh.so.10.1
-rwxr-xr-x 1 root root 19076649 2009-07-03 14:40 libclntsh.so.10.1
-r-xr-xr-x 1 root root  5656445 2009-07-03 14:40 libnnz10.so
lrwxrwxrwx 1 root root       15 2009-07-03 14:41 libocci.so -> libocci.so.10.1
-rwxr-xr-x 1 root root  1398244 2009-07-03 14:40 libocci.so.10.1
-rwxr-xr-x 1 root root 72698427 2009-07-03 14:40 libociei.so
-r-xr-xr-x 1 root root   120443 2009-07-03 14:40 libocijdbc10.so
-r--r--r-- 1 root root  1555682 2009-07-03 14:40 ojdbc14.jar
drwxrwxr-x 4 root root     4096 2008-02-17 08:58 sdk 
```

其他有用信息：

```
root@server:/# cat /etc/apache2/envvars
# envvars - default environment variables for apache2ctl
# Since there is no sane way to get the parsed apache2 config in scripts, some
# settings are defined via environment variables and then used in apache2ctl,
# /etc/init.d/apache2, /etc/logrotate.d/apache2, etc.
export APACHE_RUN_USER=www-data
export APACHE_RUN_GROUP=www-data
export APACHE_PID_FILE=/var/run/apache2.pid
export LD_LIBRARY_PATH=/opt/oracle/instantclient 
```

在脚本内部，我们调试任何错误，并在遇到这些错误时通过电子邮件发送报告，以尝试进一步调试问题。我正在执行以下操作：

```
if(isset($ocierr) && $ocierr!="")
   $mb.="Oracle OCI Error: ".$ocierr."\n\n";

$mb.="Oracle Error Message: ".print_r($errmsg,true)."\n\n";
$mb.="Debugging:\nLD_LIBRARY_PATH: ".var_export(getenv('LD_LIBRARY_PATH'),true); 
```

返回：

```
Oracle Error Message: 
Cannot contact to Oracle

Debugging:
LD_LIBRARY_PATH: '/opt/oracle/instantclient' 
```

# cocos2d-iphone - 在另一个之上添加 cclayer

> ID：11613147
> 
> 赞同：-2
> 
> 时间：2012-07-23T13:06:07.660
> 
> 标签：cocos2d-iphone, cclayer

我想在另一个之上添加一个 cclayer。我已经通过使用以下代码进行了尝试

```
+(id) scene
{
CCScene *scene = [CCScene node];

GameScreen *layer = [GameScreen node];
[scene addChild: layer];

GameScreen *newLayer=[GameScreen node];
[scene addChild:newLayer];

return scene;
} 
```

但可能会有一些错误，因为当我尝试在 newLayer 上添加一些东西时，它说使用未声明的变量，即使在 .h 文件中也声明了它。

你能帮我详细的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:19:46.547

不要在“场景”类方法中执行此操作，而是在 -(id)init{} 方法中添加“新”CCLayer：

```
-(id) init {
    self = [super init];
    if (self) {
        GameScreen *newLayer=[GameScreen node];
        [self addChild:newLayer];

         //Other code        

    } return self;
} 
```

# objective-c - 目标 c - 核心数据：无法调用 NSManagedObject 子类的私有方法

> ID：11613149
> 
> 赞同：0
> 
> 时间：2012-07-23T13:06:35.583
> 
> 标签：objective-c, ios5, core-data, nsmanagedobject

我对核心数据和`NSManagedObject`课程有疑问。我有一个带有实体“ `UserProfile`”的数据模型，其中包含几个属性，包括“ `userId`”、“ `username`”和“ `clientId`”，这些属性是必不可少的。所有这三个属性在核心数据模型中都被标记为“字符串”。

`UserProfile`源包含以下内容：

```
// UserProfile.h
#import <Foundation/Foundation.h>

@interface UserProfile : NSManagedObject

@property (nonatomic, retain) NSString* userId;
@property (nonatomic, retain) NSString* clientId;
@property (nonatomic, retain) NSString* userName;

// simple routine to display essential information about the user in the user table row
- (NSString*) obtainUserInfo;

// UserProfile.m
@implementation UserProfile

@dynamic userId;
@dynamic userName;
@dynamic clientId;

- (NSString*) obtainUserInfo
{
    return [NSString stringWithFormat:@"%@ - %@", [self valueForKey:@"clientId"], [self valueForKey:@"userName"]];
} 
```

当用户用一些文本字段填写表单并按下提交按钮时，我创建了 UserProfile 类的新实例。回调方法中的相关代码块如下：

```
Q3AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

NSManagedObjectContext *context = [appDelegate managedObjectContext];

NSEntityDescription *desc = [NSEntityDescription entityForName:@"UserProfile" inManagedObjectContext:context];

// this line creates the managed object instance and stores it!
UserProfile *newProfile = [[UserProfile alloc]initWithEntity:desc insertIntoManagedObjectContext:context];

// editing properties now causes the object's state to switch to "isChanged". Changes only persist if they're explicitely saved
[newProfile setUserId: [UUIDCreater generateUUID]];
[newProfile setClientId: clientField.text];
[newProfile setUserName: userNameField.text];

NSError *error = nil;
[context save:&error];

if (!error)
{
    // now send the result data to the other controller (via the delegate object)
    [delegate newProfileCreated];

    // dismiss this view
    [self dismissModalViewControllerAnimated:YES];
}
else 
{

    NSLog(@"Error: %@", error);

} 
```

接下来，表格视图控制器从核心数据存储中提取所有用户配置文件，并使用原型单元格显示它们。

好的，到目前为止这一切都有效，但我的问题开始于这个`UserProfilesTable`类的代码，它是 UserProfile 表视图的 ViewController。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"userProfileEntry";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...
UserProfile *obj = [_userProfileList objectAtIndex:indexPath.row];
NSLog(@"ClientId: %@", [obj valueForKey:@"clientId"]);
NSLog(@"UserName: %@", [obj valueForKey:@"userName"]);

// !!CRASH!!
NSLog(@"From Method: %@", [obj obtainUserInfo]);

cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@", [obj valueForKey:@"clientId"], [obj valueForKey:@"userName"]];   
return cell;
} 
```

前两个`NSLog`s 打印我刚刚在表单中输入的正确值以创建新的用户配置文件（因此，崩溃下方的命令也可以按预期工作）。所以.. 使用基本的 KVC，我从 UserProfile 实例中获取了 clientId 和 userName 的值，但是为什么应用程序会因...而崩溃

`NSInvalidArgumentException`（原因：-[NSManagedObject gainUserInfo]：无法识别的选择器发送到实例 0x6c40b90）[0x6c40b90 在这种情况下是我的 UserProfile 实例]

...如果我尝试从`UserProfile`做几乎相同的事情的类中访问方法，只是封装到一个单独的方法中以提高可变性和东西？

似乎仅仅因为我子类化`NSManagedObject`了它就不会让我再访问我的私有类方法了。我在该方法上设置了一个断点`obtainUserInfo`并且它没有被触发，这对我来说意味着应用程序甚至没有进入该方法。

我发现[另一个线程](https://stackoverflow.com/questions/11344891/unrecognized-selector-for-nsmanagedobject-base-class)与此问题基本相同，但是threadstarter自己回答并通过重新创建核心数据实体来解决它。我也做了同样的事情，但并没有解决我的问题。

我的提示不多了，所以任何建议都值得赞赏。

提前致谢。

**编辑：**固定。忘记将我的 UserProfile 类的类名分配给 XCode 的数据模型检查器中的核心数据实体。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:25:04.350

> 原因：-[NSManagedObject gainUserInfo]：无法识别的选择器发送到实例 0x6c40b90

此消息意味着正在接收（但未能处理）`obtainUserInfo`消息的对象是`NSManagedObject`.

> [0x6c40b90 在这种情况下是我的 UserProfile 实例]

不，不是。它是您的`UserProfile` *实体*的一个实例，但它仍然属于`NSManagedObject` *该类*。`valueForKey:`在这种情况下，被访问的基本属性仍然有效。

这可能意味着您的数据模型没有为 UserProfile 实体指定特定的托管对象子类，因此新实例将作为 NSManagedObjects 返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:28:54.027

在我看来，您尚未将实体的自定义子类设置为`UserProfile`. 您需要在数据模型检查器中设置实体的类。否则`NSManagedObject`从商店取货时将使用 s。

# css - 不透明度值如何工作？

> ID：11613156
> 
> 赞同：1
> 
> 时间：2012-07-23T13:07:10.887
> 
> 标签：css, opacity

我想在我的拖放游戏中设置可拖动对象的不透明度，但我真的不知道这些数字是什么意思......

有人可以解释一下我如何让它在悬停时真正引人注目吗？

```
$('.drag').hover(

function() {
$(this).stop().animate({
    opacity: "0.8"
});
}, 
function() {
$(this).stop().animate({
    opacity: "1"
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:09:24.007

想一想 0 = 0%，1 = 100%。

因此，例如，如果您想要 50% 透明的东西，请将数字设置为`0.5`，如果您想要完全透明的东西，请选择`0`。值为 的东西`0.9`只会非常轻微地透明。

这也为 rgba 分叉，例如：

```
rgba(0, 0, 0, 0.5) 
```

...将产生灰色，因为我们从黑色开始并使其 50% 透明（当然取决于背景）。

> 有人可以解释一下我如何让它在悬停时真正引人注目吗？

将悬停值设置为非常低的值，例如`0.4`，这很明显，您可以决定继续调整不透明度，直到悬停和正常状态很好地相互补充。

# css - 鼠标悬停时切换图标

> ID：11613157
> 
> 赞同：3
> 
> 时间：2012-07-23T13:07:13.547
> 
> 标签：css, twitter-bootstrap

我正在锚点中显示 Twitter Bootstrap 提供的图标之一。当我将鼠标悬停在锚点上时，我希望将默认图标切换为白色图标。

当您将鼠标悬停在导航栏中的锚点上时，效果应该是[这里](http://angularjs.org/)

这是怎么做到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:23:04.463

在悬停时使用 jQuery toggleClass() 将图标更改为白色。

看到这个[jsfiddle](http://jsfiddle.net/8g7HC/83/)。
HTML：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

<a href="#"><div class="btn btn-primary">
    <i class="glyphicon  glyphicon-print"></i>&nbsp;Click</div></a>
<br/> 
```

脚本：

```
$("document").ready(function(){
    $("a").hover(function(){
        $('i').toggleClass('glyphicon-envelope glyphicon-print');
    });
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T13:09:07.353

您使用 CSS 伪类 :hover 来设置不同的背景：

```
.menulink:hover { background-image: url('alternative_sprite.png'); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:36:05.030

只需切换 glyphicons 图像？

（从我的 css 中提取，这是一个 sass 版本，我的图像在不同的地方，但你明白了......）

```
&:hover{
  i{
    background-image: url("../images/bootstrap/glyphicons-halflings-white.png");
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T21:32:17.800

实际上，AngularJS 网站使用 webfont 来显示图标：

```
font-family: 'FontAwesome'; 
```

他们使用 CSS 伪类插入字体图标：之前：

```
[class^="icon-"]:before, [class*=" icon-"]:before {
    font-family: FontAwesome;
} 
```

[如果您决定创建自己的图标 web 字体](http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/)，这是一个绝妙的解决方案。

或者更好的是，您可以使用[Font-Awesome](http://fortawesome.github.com/Font-Awesome/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T13:11:06.390

使用 CSS 伪类 :hover..

```
.menulink:hover { background-image: url('myimage.png'); } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-29T14:14:35.377

上面的一些答案不起作用，并给出所有字形图标的背景图像。

这对我有用。请注意，我已更改图标的颜色以满足我的需要。

```
a:hover > [class^="icon-"] {
    background-image: url("bootstrap/img/glyphicons-halflings-orange-dark.png") !important;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-10T17:25:36.673

我知道已经发布了一些可以解决问题的快速解决方案。如果您想在不使用 JQuery 或 CSS 的情况下实现这一点，我想添加我的解决方案：

1.  创建一个`$scope`包含您想要默认设置的图标类名称的对象。

    ```
    $scope.myClass = "glyphicon glyphicon-ok" 
    ```

2.  添加`ng-class`指令并从中获取类名`$scope.MyClass`，添加指令`ng-mouseover`并`ng-mouseleave`更改`$scope.MyClass`值

    ```
    <span
         ng-class="myClass"
         ng-mouseover="myClass = 'glyphicon glyphicon-remove'"
         ng-mouseleave="myClass = 'glyphicon glyphicon-ok'">
    </span> 
    ```

# skype - 为此要求编写一个Skype插件

> ID：11613159
> 
> 赞同：3
> 
> 时间：2012-07-23T13:07:23.343
> 
> 标签：skype, video-conferencing

我正在开始对 Skype 编程进行一些研究。Skype 插件是否有一种技术，或者是否有多种框架或 API？我想制作一个插件，让我的数据库中的用户可以通过 Skype 相互通信（视频、音频、聊天），而不会看到彼此的真实 Skype ID - 可能吗？（我想是的，几年前我尝试过skycandy，实际上是一样的）有什么实现的提示吗？主要平台是 windows，但也可能是 android/ios（是否启用了移动版本插件？） Skype 是满足需求的好选择，还是对于没有预算的小项目有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:20:20.240

Skype 为其桌面客户端提供 API、桌面 API 和 SDK，供您构建自己的客户端。

桌面 API 处于维护模式，不支持客户端中的更新功能，并且存在许多已知错误。

在撰写本文时，SkypeKit 完全受支持，但目前不支持多部分视频。

这些技术都不能在移动设备上使用，就 SkypeKit 而言，它在许可条款中明确禁止，并且您不得混淆发送方或接收方的 Skype 名称，因为这是被禁止的。

有关其他信息，请参阅[http://developer.Skype.com](http://developer.Skype.com)

Allen Smith 社区经理 Skype 开发人员

# c - 在 Visual Studio 中运行简单的 C 代码时出错

> ID：11613161
> 
> 赞同：1
> 
> 时间：2012-07-23T13:07:25.257
> 
> 标签：c, visual-studio-2010

我编写了一个简单的 C 代码来在 Visual Studio 中显示矩阵，但它给出了以下错误：

**-错误1**​​错误 C2085：'main'：不在形式参数列表中

**-错误2**错误 C2143：语法错误：缺少 ';' 前 '{'

**-错误3**错误 C2084：函数 'void print_matrix(float (*)[3])'

因为我是 C 语言的新手，所以我不知道问题出在哪里以及如何处理它。谢谢你的帮助

这是书面代码：

```
#include <stdio.h>

void print_matrix (float a [3][3])

void main(void)
{
    float p [3][3] = { {1.0, 0.0, 0.0}, {0.0, 1.0, 0.0}, {0.0, 0.0, 1.0} };
printf("\nMatrix 1:\n");
print_matrix(p);
}

void print_matrix(float a [3][3])
{
    int ii,jj;
        for (ii=0;ii<3;ii++){
            for (jj=0;jj<3;jj++){
                printf("%f\t",a[ii][jj]);
    }
            printf("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T13:10:00.737

`;`您在函数声明后忘记了分号。`main`而且is `int main(void)`or `int main(int, char **)`, not的原型`void main(void)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:09:39.660

这是一个问题

```
void print_matrix (float a [3][3])               
                                  ^ 
```

需要一个分号：

```
void print_matrix (float a [3][3]);
                                  ^ 
```

您的函数标头`main`缺少返回类型`int`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T13:09:38.163

缺少`;`文本的第二行，即该`print_matrix`行。即你希望它是：

```
void print_matrix (float a [3][3]); 
```

# c# - 根据 int 字段对自定义列表进行排序

> ID：11613173
> 
> 赞同：0
> 
> 时间：2012-07-23T13:08:08.170
> 
> 标签：c#, list

我有一个简单的类，我添加到一个列表中，一旦我添加了我想要排序的所有内容`GridFieldOrder`，这应该很简单，但我无法将它放在一起。

```
List<UserSearchSetupReOrderIng> UserSearchSetupOmega = new List<UserSearchSetupReOrderIng>();

 class UserSearchSetupReOrderIng
{
    public string UID { get; set; }
    public string Name { get; set; }
    public int GridFieldOrder { get; set; }
    public string Column { get; set; }
} 
```

所以基本上，如果我的列表中有 100 个项目，我只想`GridFieldOrder`按从最低到最高的顺序对所有项目进行排序。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:10:17.383

`OrderBy`扩展方法应该可以解决问题。

[http://msdn.microsoft.com/en-us/library/bb534966.aspx](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

```
var sortedList = UserSearchSetupOmega.OrderBy(i => i.GridFieldOrder); 
```

为升序。（`OrderByDescending`用于降序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:10:22.523

使用 Linq - [Enumerable.OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx) - 根据键对序列的元素进行升序排序。

```
List<UserSearchSetupReOrderIng> sortedData = UserSearchSetupOmega
                                .OrderBy(data => data.GridFieldOrder).ToList(); 
```

如果你希望它按降序排列，那么就像上面一样使用[Enumerable.OrderByDescending扩展方法：](http://msdn.microsoft.com/en-us/library/bb534855)

```
List<UserSearchSetupReOrderIng> sortedData = UserSearchSetupOmega
                        .OrderByDescending(data => data.GridFieldOrder).ToList(); 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:10:49.597

```
var sorted = UserSearchSetupOmega.OrderBy(i => i.GridFieldOrder) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:10:56.500

```
List<UserSearchSetupReOrderIng> UserSearchSetupOmega = 
                      new List<UserSearchSetupReOrderIng>();

var sortedList = UserSearchSetupOmega.OrderBy(u => u.GridFieldOrder); 
```

# javascript - javascript函数的变量范围问题

> ID：11613176
> 
> 赞同：0
> 
> 时间：2012-07-23T13:08:14.107
> 
> 标签：javascript, jquery

我正在尝试使用 spin.js 创建一个函数。该函数加载微调器，然后如果使用它的参数再次调用它，则它会停止微调器。我无法正确获取变量范围。因此，当我调用该函数停止时，我在`submitSpinner`.

[http://jsfiddle.net/atlchris/tQdZB/1/](http://jsfiddle.net/atlchris/tQdZB/1/)

```
function submitSpinner(stopSpinner) {
    var theSubmitSpinner;

    if (stopSpinner === true) {
        theSubmitSpinner.stop();

        $('#overlay').remove();
    }
    else {
        $('body').append('<div id="overlay"><div id="spinner"></div></div>');

        theSubmitSpinner = new Spinner({
            lines: 13,
            length: 15,
            width: 5,
            radius: 20,
            color: '#ffffff',
            speed: 1,
            trail: 60,
            shadow: false
        }).spin(document.getElementById("spinner"));
    }
}

submitSpinner();

$(function() {
    $('#overlay').on('click', function() {
        alert('click');
        submitSpinner(true);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:17:21.933

你为什么不`Spinner`从函数中返回对象，并让调用者在它的时间调用 .stop() 呢？读起来更好，而且它不必用随机变量污染局部范围，也使得`submitSpinner()`更简单。

```
function createSubmitSpinner() {

    $('body').append('<div id="overlay"><div id="spinner"></div></div>');

    return new Spinner({
        lines: 13,
        length: 15,
        width: 5,
        radius: 20,
        color: '#ffffff',
        speed: 1,
        trail: 60,
        shadow: false
    }).spin(document.getElementById("spinner"));
}

$(function() {
    var spinner = createSubmitSpinner();
    $('#overlay').on('click', function() {
        alert('click');
        spinner.stop();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:12:34.917

问题是什么？如您所知，这是一个范围问题，只需将变量声明移到函数之外，使其成为全局变量，并且可以从所有函数调用中访问。

但是，最好*不要*将其设为全局，而是将停止函数（仅从单击处理程序调用）移至相同的范围：

```
function createSpinner() {
    var overlay = $('<div id="overlay">'),
        spinner = $('<div id="spinner">');
    $('body').append(overlay.append(spinner));
    var submitSpinner = new Spinner({
        lines: 13,
        length: 15,
        width: 5,
        radius: 20,
        color: '#ffffff',
        speed: 1,
        trail: 60,
        shadow: false
    }).spin(spinner);

    overlay.on('click', function() {
        submitSpinner.stop();
        overlay.remove();
    });
}

$(function() {
    createSpinner();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:12:38.810

移动“var theSubmitSpinner;” 函数外：http: [//jsfiddle.net/nXbaz/](http://jsfiddle.net/nXbaz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:13:55.750

```
submitSpinner(true); 
```

因为您的范围中有一个重载，所以您必须提供一个。

# javascript - jQuery SVG 创建折线，firefox 错误？

> ID：11613177
> 
> 赞同：1
> 
> 时间：2012-07-23T13:08:18.460
> 
> 标签：javascript, jquery, svg, jquery-svg

我有这个 javascript 文件（ $("#paper2") 是一个 div）

```
var lines=0;

$(document).ready(function() {        
    $("#paper2").svg({
        onLoad: function() {
            svg2 = $("#paper2").svg('get');
            root2= svg2.root();

            $("#paper2").mousedown(function(ev) {
                lines++;
                var polyline = svg2.polyline([[ev.pageX-1-this.offsetLeft , ev.pageY-this.offsetTop-1], [ev.pageX+1-this.offsetLeft , ev.pageY-this.offsetTop+1]],
                    {fill: 'none', stroke: 'black', strokeWidth: 3,
                    id: 'polyline'+lines})

                $("#paper2").mousemove(function(ev) {
                    var polyline= $('#polyline' + lines);
                    polyline.attr("points", polyline.attr("points")+ ' ' + (ev.pageX-this.offsetLeft)+','+(ev.pageY-this.offsetTop));
                });

                $("#paper2").mouseup(function(ev) {
                    var div= $("#paper2");
                    div.unbind('mousemove');
                    div.unbind('mouseup');
                })
            });             
        },
        settings: {}
    });

}); 
```

基本上，当我在 div 顶部按住鼠标键时，它开始绘制一条跟随鼠标的折线，允许进行一些基本绘图。它在 Opera 和 Chrome 上运行良好，但在 Firefox 上它在我绘制的第一条折线上运行良好，第二次（释放鼠标然后再次按下它）而不是绘制它就像我在拖动图像（所有 SVG 的东西那是在我的 div 中跟随我的鼠标）并且不会调用 mouse-up 事件。因此，一旦我第二次释放鼠标按钮，它就会开始正常绘制折线，但单击没有按下，如果我再次单击鼠标向上事件，它就会再次开始正常工作。这只发生在我第二次尝试画线时，第一次，第三次和之后的所有其他人都正常工作。

任何人都知道我是否做错了什么，或者这确实是一个 Firefox 错误，如果是这样，任何人都知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:26:11.790

你做错了什么。您需要在每个事件处理程序中调用 ev.preventDefault()。

# android - 框架和相对布局之间的区别？

> ID：11613193
> 
> 赞同：9
> 
> 时间：2012-07-23T13:09:08.437
> 
> 标签：android, android-layout, android-relativelayout, android-framelayout

我是 android 编程的新手，但从我对[文档](http://developer.android.com/guide/topics/ui/declaring-layout.html)布局的了解程度来看，RelativeLayout 主要用于当您需要基于某些规则的视图时，以及当您想要重叠视图时使用 FrameLayout。

但不幸的是，对于以下程序，我通过使用 RelativeLayout 完成了 FrameLayout 的工作。我完成了我的工作，但为了理解，我是否遗漏了一些差异？另外，这些按钮是如何覆盖我的图像的？（即使是另一张图像也是重叠的。）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/ic_launcher"
    />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/ic_launcher"
    android:layout_alignParentTop="true"
    android:layout_alignLeft="@id/imageView1"
    />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:gravity="center"
    android:orientation="horizontal"
    android:weightSum="1.0" >

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33"
    android:text="Login" />

<Button
    android:id="@+id/button2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33"
    android:text="Register" />

<Button
    android:id="@+id/button3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.33"
    android:text="Try application" />

</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T13:17:03.590

`RelativeLayout`可以使用：

```
android:layout_toEndOf="@id/some_view"
android:layout_toStartOf="@id/some_view"
android:layout_above="@id/some_view"
android:layout_below="@id/some_view" 
```

以确保彼此正确地排列视图。`FrameLayout`非常相似，只是它只使用重力来显示其视图（没有关系）。

我还建议您查看 ConstraintLayout 组件。ConstraintLayout 允许您创建具有平面视图层次结构（无嵌套视图组）的大型复杂布局。它与RelativeLayout 类似，所有视图都根据兄弟视图和父布局之间的关系进行布局，但它比RelativeLayout 更灵活，更易于与Android Studio 的布局编辑器一起使用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-01T08:15:22.817

**基于视图关系的**RelativeLayout 。**它是一个布局管理器，可帮助您根据某些规则排列 UI 元素。您可以指定以下内容：将其与父级左边缘对齐，将其放置在此元素的左侧/右侧等。**

 ****FrameLayout**允许沿 Z 轴放置。也就是说，您可以将您的视图元素堆叠在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T09:13:19.547

RelativeLayout - 正如这个视图组中的名称所暗示的那样，视图是相对于彼此放置的。最常用的 relativelayout 属性是

```
android:layout_toLeftOf="@id/some_view1"
android:layout_toRightOf="@id/some_view2"
android:layout_above="@id/some_view3"
android:layout_below="@id/some_view4"
android:layout_toendof="@id/some_view5"
android:layout_tostartof="@id/some_view6" 
```

视图相对于彼此放置。在开发复杂的设计时真的很有帮助。

FrameLayout - 它表现为单个对象视图不是相对于每个对象放置，而是根据 FrameLayout。FrameLayout 采用最大子视图的大小。

```
android:gravity="center_horizontal|center_vertical|bottom" 
```

使用上述属性子视图位置被修改。**

# javascript - 如何从 Aspx 页面发送 Json 数据

> ID：11613194
> 
> 赞同：2
> 
> 时间：2012-07-23T13:09:09.223
> 
> 标签：javascript, jquery, asp.net, json, json.net

我尝试使用 TokenInput Jquery 进行多值自动完成，它需要 JSON 响应作为输入数据

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

我使用 ASPX 页面作为源

```
<script type="text/javascript" >
    $(document).ready(function() {

    $("#txtTest").tokenInput("Complete.aspx", {
        theme: "facebook"
    });

    });

</script> 
```

**从这里编辑** 问题：如何以所需格式从 aspx 页面提供 JSON 数据，因为我有数据表，其值根据 Complete.aspx 中的 Querystring

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(Request.QueryString["q"]))
    {
        string json = "[{\"Id\":\"1\",\"name\": \"Test 1\"},{\"Id\":\"2\",\"name\": \"Test 2\"}]";
        Response.Clear(); 
        Response.ContentType = "application/json; charset=utf-8"; 
        Response.Write(json); 
        Response.End();              

    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:30:56.960

你应该看看WCF。 [WCF 具有对返回 JSON 的本机支持](http://msdn.microsoft.com/en-us/library/bb885100.aspx)，您不必担心字符串连接或 HTTP 内容类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:40:18.587

替代`WCF`, 您可以`WebMethod`在 .aspx 中创建。

```
 [WebMethod]
    public static string Info()
    {
        JavaScriptSerializer js = new JavaScriptSerializer();
        string result = js.Serialize(new string[] { "one", "two", "three" });
        return result;
    } 
```

并通过 Ajax 调用请求此 WebMethod。

```
<script type="text/javascript">
        $(function () {
            $("#button1").click(function () {
                $.ajax({
                    url: "Default.aspx/Info",
                    data: "{}",
                    contentType: "application/json",
                    success: function (data) {
                        alert(data.d);
                    },
                    type: "post",
                    dataType : "json"
                });
            });
        });
</script> 
```

编辑：

代码隐藏 - Page_Load 处理程序 (JsonPage.aspx)

```
 string json = "[{\"name\":\"Pratik\"},{\"name\": \"Parth\"}]";
  Response.Clear();
  Response.ContentType = "application/json; charset=utf-8";
  Response.Write(json);
  Response.End(); 
```

并`JsonPage.aspx`通过*TokenInput* `jQuery`请求。（Sample.aspx & JsonPage.aspx 在同一个文件夹中）

```
<script type="text/javascript">
        $(function () {
            $("#txt1").tokenInput("JsonPage.aspx");
        });
</script>

<body>
 <input type="text" id="txt1"/>
</body> 
```

# c# - 为什么通过 WMI 应用静态 IP 地址只工作一次？

> ID：11613196
> 
> 赞同：1
> 
> 时间：2012-07-23T13:09:15.287
> 
> 标签：c#, .net, windows, wmi

我即将写一个简单的网络配置工具，它可以静态设置IP地址等，也可以让它自动设置（DHCP），全部通过WMI。

不幸的是，静态设置地址只工作一次！因此，当您运行下面的测试函数一次时，一切正常（不要忘记 // DYNAMIC 处的断点！）。但是第二次查看控制面板属性页中的网络适配器IP地址和子网掩码的结果仍然是空的！当然不会抛出异常，并且方法调用的结果始终为零 (0)。该代码在两台不同的 Windows 7 机器上进行了测试，当然也以管理员身份进行了测试。

```
void Test()
{

    // find management object
    ManagementClass networkManagementClass = new ManagementClass("Win32_NetworkAdapterConfiguration");
    ManagementObjectCollection networkManagement = networkManagementClass.GetInstances();
    ManagementObject adapter = null;
    foreach (ManagementObject mo in networkManagement)
    {
        if ((bool)mo["IPEnabled"] && (string)mo["Caption"] == "[00000012] Intel(R) 82577LM Gigabit Network Connection")
        {
            adapter = mo;
            break;
        }
    }

    // STATIC

    var val = adapter.InvokeMethod("EnableStatic", new object[] {
        new string[] { "192.168.1.99" },
        new string[] { "255.255.255.0" }
    });

    val = adapter.InvokeMethod("SetGateways", new object[] {
        new string[] { "192.168.1.254" },
        new UInt16[] { 1 }
    });

    val = adapter.InvokeMethod("SetDNSServerSearchOrder", new object[] {
        new string[] { "192.168.1.254" }
    });

    // DYNAMIC

    adapter.InvokeMethod("SetDNSServerSearchOrder", new object[] { new string[0] });

    adapter.InvokeMethod("EnableDHCP", new object[] { });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T17:08:28.187

Finally I figured out a workaround for this (i guess) Windows bug: Fill the right values into the registry DIRECTLY and BEFORE the WMI calls:

```
// workaround of windows bug (windows refused to apply static ip in network properties dialog)
var settingID = adapter.GetPropertyValue("SettingID"); // adapter = the management object
using (var regKey = Registry.LocalMachine.OpenSubKey(@"SYSTEM\CurrentControlSet\services\Tcpip\Parameters\Interfaces\" + settingID, true))
{
    regKey.SetValue("EnableDHCP", 0);
    regKey.SetValue("IPAddress", networkState.IPAddress, RegistryValueKind.MultiString);
    regKey.SetValue("SubnetMask", networkState.SubnetMask, RegistryValueKind.MultiString);
} 
```

Works like a charm for me. Have fun :)

# objective-c - 如何使用 NSScrollview？

> ID：11613200
> 
> 赞同：3
> 
> 时间：2012-07-23T13:09:24.370
> 
> 标签：objective-c, macos, cocoa, scroll

我无法弄清楚如何实际使用`NSScrollview`. 我将滚动视图对象拖到`NSWindow`界面构建器中。然后我将一些`NSButtons`拖到滚动视图上。我的问题是：

我实际上如何使它向下滚动，例如原始高度的 2 倍？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T13:46:08.083

当然，用户可以使用他们的 UI 自动滚动。我假设您想要做的是以编程方式滚动。

一点背景知识： An`NSScrollView`有一个`documentView`，它是滚动视图显示一部分的底层视图，以及一个`clipView`，它是屏幕上显示的视图。所以剪辑视图就像一个进入文档视图的窗口。要以编程方式滚动，您告诉文档视图在剪辑视图中滚动。

关于如何以编程方式滚动，您有两种选择：

*   `- (void)scrollPoint:(NSPoint)aPoint`–– 这会滚动文档，因此给定点位于包含它的剪辑视图的原点。
*   `- (BOOL)scrollRectToVisible:(NSRect)aRect`–– 这会将文档滚动到最小距离，以便整个矩形可见。注意：这可能根本不需要滚动，在这种情况下它会返回 NO。

因此，例如，这是 Apple 的[Scroll View Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/NSScrollViewGuide/Articles/Scrolling.html#//apple_ref/doc/uid/TP40003463-SW1)中有关如何滚动到文档视图底部的示例。假设你有一个`IBOutlet`被调用的`scrollView`连接到`NSScrollView`你的 nib 文件中，你可以执行以下操作：

```
- (void)scrollToBottom
{
    NSPoint newScrollOrigin;

    if ([[scrollview documentView] isFlipped]) {
        newScrollOrigin = NSMakePoint(0.0,NSMaxY([[scrollview documentView] frame])
                                       -NSHeight([[scrollview contentView] bounds]));
    } else {
        newScrollOrigin = NSMakePoint(0.0,0.0);
    }
    [[scrollview documentView] scrollPoint:newScrollOrigin];
} 
```

# eclipse - Eclipse 支持 .xsl 文件中的断点？

> ID：11613208
> 
> 赞同：3
> 
> 时间：2012-07-23T13:09:44.240
> 
> 标签：eclipse, debugging, xslt

我想知道 Eclipse 在 .xsl 文件中设置断点的可能性。

它看起来不像调试器能够在 xslt 中停止在线，而渲染......是否有任何隐藏的 xsl 调试器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:23:05.290

前段时间我用 xslt 做了很多工作。我使用的是（商业）[Oxygen XML 编辑器](http://www.oxygenxml.com/)，它具有 xslt 调试功能和许多其他帮助我处理 XSLT 的功能。我没记错，他们实际上提供氧气作为 Eclipse 插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T17:48:01.357

***是的，它支持...***

```
 Please refer the below links
    https://wiki.eclipse.org/XSLT_Project/UserGuide/Launching
    http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.wst.xsl.doc%2Fhtml%2Flaunching%2Flaunching.html 
```

# asterisk - Asterisk 服务器是否实现了 Stun 和 Turn 服务器

> ID：11613215
> 
> 赞同：2
> 
> 时间：2012-07-23T13:10:08.773
> 
> 标签：asterisk

我遇到了 NAT 穿越问题。我不想使用 Asterisk 服务器，但我不知道它是否支持 TURN 和 STUN 协议，或者他可以配置为 STUN 和 TURN 服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:58:21.360

虽然这可能属于超级用户......

Asterisk 1.8 和 Asterisk 10 有 res_stun_monitor。该资源模块会将 STUN 请求发送到已配置的 STUN 服务器。如果检测到 STUN 服务器提供的外部 IP 地址或端口发生变化，IAX2 和 SIP 通道驱动程序都将收到通知并使用该信息。

Asterisk 1.8 和 Asterisk 10 都没有 TURN 支持。

Asterisk 11 将全面支持 ICE，其中包括对 STUN 和 TURN 的支持。

# c# - 与 C# 中的 Openfiledialog 控件相关的问题

> ID：11613216
> 
> 赞同：2
> 
> 时间：2012-07-23T13:10:14.167
> 
> 标签：c#, .net, winforms

我在 Win C# 2010 中有一个应用程序，

我在我的表单中添加了 OpenFileDialog 控件。我编写了以下代码

```
OpenFileDialog1.ShowDialog(); 
```

它抛出以下异常：

```
AccessViolationException:

"Attempted to read or write protected memory. This is often an indication that other memory is corrupt." 
```

有什么问题？以及如何解决？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:21:29.517

我找到了一个链接，这可能对你有帮助

[http://connect.microsoft.com/VisualStudio/feedback/details/638494/an-accessviolationexception-occurs-when-trying-to-call-the-savefiledialog-method-in-the-closed-event-handler](http://connect.microsoft.com/VisualStudio/feedback/details/638494/an-accessviolationexception-occurs-when-trying-to-call-the-savefiledialog-method-in-the-closed-event-handler)

另一个建议是禁用 AutoUpgrade 选项或将其设置为 false。

检查此链接也[尝试读取或写入受保护的内存](https://stackoverflow.com/questions/596413/attempted-to-read-or-write-protected-memory)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:13:54.173

这将是正确的方法：

```
OpenFileDialog of = new OpenFileDialog();
of.ShowDialog(); 
```

**编辑** 此外，在运行某些类型的驱动程序软件或防病毒程序的计算机上的 .NET Framework 2.0 Remoting 应用程序中可能会出现此问题。

[资源](http://support.microsoft.com/kb/923028)

**如需测试，请关闭杀毒软件。**

# jsf - JSF 接收 FacesContext 外部请求

> ID：11613218
> 
> 赞同：0
> 
> 时间：2012-07-23T13:10:21.733
> 
> 标签：jsf, facescontext

据我所知，FacesContext 仅在请求范围内可用。我创建了一个尝试接收 FacesContext 实例的线程，但它返回 null。

我的观点是每 10 秒更新一些应用程序范围的 bean。

线程的运行方法：

```
@Override
public void run()
{
    while (true)
    {
        try
        {
            TimeView timeView = (TimeView)FacesContext.getCurrentInstance().
                    getExternalContext().getApplicationMap().get("timeView"); 
            // FacesContext.getCurrentInstalce() returns null

            timeView.update();
            Thread.sleep(10000);
        }
        catch (InterruptedException ex)
        {
            System.out.println(ex);
        }
    }
} 
```

TimeView 的标题（我跳过了 getter/setter）：

```
@ManagedBean(eager=true, name="timeView")
@ApplicationScoped
public class TimeView implements Serializable
{
    private int hour;
    private int minutes;
    private int seconds;

    public TimeView()
    {
        update();
    }

    public void update()
    {
        Date date = new Date();
        setHour(date.getHours());
        setMinutes(date.getMinutes());
        setSeconds(date.getSeconds());
    } 
```

面孔-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <managed-bean>
        <managed-bean-name>timeView</managed-bean-name>
        <managed-bean-class>foogame.viewBeans.TimeView</managed-bean-class>
        <managed-bean-scope>application</managed-bean-scope>
    </managed-bean>
</faces-config> 
```

那么，有没有办法在这个线程中接收对我的应用程序范围 bean 的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:23:52.210

由于现在可以在 Servlet 环境之外访问/构造 FacesContext，因此我建议您将应用程序范围的对象传递给工作线程（执行批处理作业的线程）的构造函数。更新线程中的引用将导致更新应用程序范围的引用，因为它们都指向同一个实例。

如果您有 EJB3 环境，则可以使用 EJB 计时器 + @Singleton bean，而无需处理线程和范围。

# visual-studio-2010 - Visual Studio 2010 选项卡外观

> ID：11613222
> 
> 赞同：0
> 
> 时间：2012-07-23T13:10:25.097
> 
> 标签：visual-studio-2010, user-interface, customization, visual-studio-extensions

Visual Studio 2010 是否有任何扩展来调整标签栏的外观？我想念 Visual Studio 2005 中带有倾斜左边缘和低高度的选项卡的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T04:57:16.047

带有 Shaper 插件的 [Tabs Studio扩展（由我开发）可让您设置 VS 2005 之类的标签：](http://www.tabsstudio.com) [http ://www.tabsstudio.com/documentation/style.html#CommunityStyles](http://www.tabsstudio.com/documentation/style.html#CommunityStyles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:41:12.450

在 Visual Studio 2010 中调整选项卡栏外观的唯一扩展是[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)，但它不能让您从 Visual Studio 2005 中恢复成角度的外观。

# jquery - jQuery 如何同时使用 index() 和 text()？

> ID：11613223
> 
> 赞同：1
> 
> 时间：2012-07-23T13:10:24.857
> 
> 标签：jquery

我想获取带有特定文本的标签的索引。因此，如果我有 10 个以 Click Me 作为文本的链接，如果我点击第二个链接，我想要 2 个。

[JSfiddle](http://jsfiddle.net/XQ3ct/)

```
$(document).ready( function() {
  $('a').click(function () {
      if ($(this).text() != ""){
            var index = $("a").text().index(this);
            alert (index + 1);
      }
  });
}); 
```

示例 HTML 代码

```
<a href="#">Click Me</a><br /><Br />

<a href="#">Different</a><br /><Br />

<a href="#">Click Me</a><br /><Br />

<div>
<a href="#">Click Me</a><br /><Br />
    <div>
    <a href="#">Click Me</a><br /><Br />
    <a href="#">Different</a><br /><Br />
    </div>
</div>

<ul>
    <li><a href="#">Click Me</a></li>
    <li><a href="#">Click Me</a></li>
    <li><a href="#">Click Me</a></li>
    <li><a href="#">Click Me</a></li>
</ul>

<a href="#">Different</a><br /><Br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:18:18.767

如果我理解正确，您想要的是以下内容：

如果用户单击文本值为“First”的链接，它将检查您网站上包含相同文本值的所有链接，并返回当前单击的链接在具有“First”文本的所有链接的整个集合中的索引价值。

如果是这种情况，您应该考虑使用 jQuery`:contains()`选择器。有关示例，请参见此 jsfiddle：http: [//jsfiddle.net/PvwFZ/3/](http://jsfiddle.net/PvwFZ/3/)

获得平等（而不仅仅是包含）：http: [//jsfiddle.net/PvwFZ/10/](http://jsfiddle.net/PvwFZ/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:14:27.787

不确定你是否喜欢这样 - [http://jsfiddle.net/4MvJU/](http://jsfiddle.net/4MvJU/)。

它将获取索引，然后警告它并将其添加到当前元素。

你不能这样做，因为 text() 正在返回元素的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:13:43.817

`.text()`返回节点的文本，因此不可链接。您应该单独获取索引，如下所示：

```
$('a').click(function () {
  var $this = $(this),
      text = $this.text();
  var index;

  if (text !== ""){
        index = $('a').index(this);
        alert (index + 1);
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:43:13.613

通过使用 ":contains"，您可以生成一个 jQuery 对象，该对象由包含特定文本值的所有元素组成。

```
$('a').click(function () {
  var text = $(this).text();
  alert($('a:contains(' + text + ')').index(this) + 1);
});​ 
```

[演示](http://jsfiddle.net/pwKeg/)

# android - 如何在自定义列表中设置选定行的背景颜色？

> ID：11613224
> 
> 赞同：1
> 
> 时间：2012-07-23T13:10:30.753
> 
> 标签：android

我正在尝试更改列表视图中所选行的背景颜色，并且我能够做到。但是当我点击另一行时，之前选择的行的背景颜色保持不变。我有先前选择的行的位置，谁能帮我改变以前选择的行的背景颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T03:37:39.703

I think this might be easier if you look at it another way.

Currently, your logic is "if I click on this row, change its color to a special color and change the old row's color back to the original color". However, this doesn't seem to be the logic you *actually* want. Rather, you want the last clicked (aka selected) row to be a different color.

You haven't posted any code, so I don't know if you are implementing your own ListAdapter in this project. That is the approach I would take. Create a class which extends ListAdapter, and create an additional private variable that stores the position of the last selected row. Then in the overriden getView() method, do a quick check

```
if(rowPosition == lastSelectedRowPosition) 
   viewToReturn.setBackgroundColor(); 
```

If you aren't sure how to make your own list adapter, check out the tutorial at [http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx](http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:23:09.690

如果您跟踪并更新模型中的 listItems 单击状态，您只需将用于显示的代码放在`has been clicked-color`适配器中，然后调用

`adapter.notifyDatasetChanged();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:20:38.817

在您的活动中使用 Your_List 对象的 setOnItemClickListener。

请参阅演示代码：

```
list1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapter, View v, int position, long id) {
                v.setBackgroundColor(Color.BLUE); // <--- Use color you like here
            //  ^ this v gives current row. 
     }
}); 
```

这将使该行的背景颜色永远改变。

# git - Git 在成功提交后说一切都是最新的

> ID：11613225
> 
> 赞同：0
> 
> 时间：2012-07-23T13:10:34.940
> 
> 标签：git, git-push

我做了我提交的更改：

```
git commit -am "Setup new intention form"
[(null) 9a89b62] Setup new intention form
 3 files changed, 34 insertions(+), 15 deletions(-)
 rewrite intentions/templates/index.html (80%) 
```

然后我尝试推动，但我总是：

> 一切都是最新的

有人可以给我任何建议吗？

我的最后一次提交不在 git log 中，那么我在哪里可以找到这些提交？：/

git 分支给了我：

```
 (null)
* master 
```

我试过了：

git push git push origin master git push HEAD:master

没有任何效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:15:27.083

你用什么命令推送？A`git push`只会推送跟随远程分支的分支。

尝试运行`git push <remote-name> <remote-branch>`。如果该推送成功，则将您的跟踪分支设置为`git branch <local-branch> --set-upstream <remote-name/remote-branch>`.

将来您可以在创建本地分支时使用`--track`选项`git branch`来设置远程跟踪。

# asp.net-mvc - EF CF 问题和现有的一对一关系

> ID：11613226
> 
> 赞同：3
> 
> 时间：2012-07-23T13:10:35.213
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, one-to-one

我正在使用带有 EF Code First 的现有数据库并使用 modelBuilder 进行配置。我有两个表，其中一个会话可以有一个主题，类是这样的：

```
public class SessionItem {
   [Key]
   public int SessionId { get;set; }
   // Other Values
   public int Subject_ID { get;set; }

   public virtual Subject Subject { get;set; }
}

public class SubjectItem {
   [Key]
   public int Subject_ID { get;set; }
   // Other Values

   public virtual SessionItem Session { get;set; }
} 
```

然后modelBuilder代码是：

```
modelBuilder.Entity<SessionItem>().ToTable("tblTblSessions");
modelBuilder.Entity<Subject>().ToTable("tblTblSubjects");
modelBuilder.Entity<SessionItem>()
   .HasOptional<Subject>(u => u.Subject)                     
   .WithOptionalDependent(c => c.Session).Map(p => p.MapKey("Subject_ID")); 
```

起初这失败了，直到我从 SessionItem 类中删除了 Subject_ID，然后我得到了错误：发生关系多重性约束冲突：一个 EntityReference 不能有多个相关对象，但查询返回了多个相关对象。这是一个不可恢复的错误。

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:50:38.353

尝试这个：

```
public class SessionItem 
{
   [Key]
   public int SessionId { get;set; }
   // Other Values
   [ForeignKey("Subject")]
   public int? Subject_ID { get;set; }

   [ForeignKey("Subject_ID")]    
   public virtual SubjectItem Subject { get;set; }
} 
```

您需要使 Subject_ID 外键可以为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:39:04.977

不幸的是，实体框架不支持[一对一的外键关联](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)，因为 EF 不知道唯一键约束是什么（您`Subject_ID`在 Session 表中的列显然具有）。

您必须通过将关系映射为一对多来解决此问题。按照@flem 对实体的回答中的映射，对于`SessionItem`实体，`SubjectItem`要么完全删除它，要么将其`public virtual SessionItem Session { get;set; }`替换为

```
public virtual ICollection<SessionItem> Sessions { get; set; } 
```

对于这种关系，您不再需要使用 Fluent API 进行映射，或者如果您愿意，它应该是：

```
modelBuilder.Entity<SessionItem>()
    .HasOptional(se => se.Subject)                     
    .WithMany() // or WithMany(su => su.Sessions)
    .HasForeignKey(se => se.Subject_ID); 
```

当您将项目添加到该集合时，您必须在业务逻辑中确保您不会添加多个项目，因为 `Subject_ID`由于唯一键约束，您的数据库中不能有多个相同的行。当您从包括会话在内的数据库中加载主题时，会话集合要么是空的，要么只有一个元素，但不会更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T08:36:45.677

```
[Table("tblTblSessions")]
public class SessionItem {
    [Key]
    public int SessionId { get; set; }

    public virtual SubjectItem Subject { get; set; }
}

[Table("tblTblSubjects")]
public class SubjectItem {
    [Key, ForeignKey("Session")]
    public int Subject_ID { get; set; }

    public virtual SessionItem Session { get; set; }
} 
```

SubjectItem 和 SessionItem 之间的一对一关系，您可以摆脱所有 modelBuilder 代码 - 您所做的所有表命名和一对一映射都由上面的属性和属性处理。

编辑：修正了一个错字并标记了一对一的依赖方。

# javascript - 使用 Ember.js 将新行动态插入到 Table 上下文中

> ID：11613235
> 
> 赞同：1
> 
> 时间：2012-07-23T13:11:11.367
> 
> 标签：javascript, ember.js, html-table, handlebars.js

我是 Ember 和 Handlebars 的新手。我正在尝试创建一个包含动态内容的表格。我将代码添加到[jsfiddle](http://jsfiddle.net/AgyAk/)

我有以下代码：

```
<script type="text/x-handlebars">
<table border="1" bordercolor="FFCC00" style="background-color:FFFFCC" width="400" cellpadding="3" cellspacing="3">
  {{#each Table.tableController}}
  <tbody>
<tr>
    <td width ="30%">{{title}}</td>
    <td width ="30%">{{artist}}</td>
            <td width ="40%">{{genre}}</td>
</tr>
   </tbody>
  {{/each}}
</table> 
```

一个简单的表格，绑定了我的控制器中的内容。

这是我的控制器和应用程序：

```
Table = Ember.Application.create({});

Table.Cell = Ember.Object.extend({
title: null,
artist: null,
genre: null,
listens: 0
});

Table.tableController = Ember.ArrayProxy.create({
content: [],
init: function() {
    var data = Table.Cell.create({
    title: 'Ruby',
    artist: 'Kaiser Chiefs',
    genre: 'Indie Rock',
        });
    this.pushObject(data);
    data = Table.Cell.create({
    title: 'Somebody Told Me',
    artist: 'Killers',
    genre: 'Indie Rock',
        });
        this.pushObject(data);
    },
    createSong: function(title, artist, genre) {
    var cell = Table.Cell.create({
    title: title,
    artist: artist,
    genre: genre,
        });
    this.pushObject(cell);
    },
}); 
```

这工作得很好。

现在我想添加一首新歌，我通过 Chrome 控制台使用以下行来执行此操作：

```
 Table.tableController.createSong('Feiticeira', 'Deftones', 'Alternative'); 
```

我可以验证是否创建了一个新对象并将其插入到我的内容数组中。但是我的表没有任何变化。

我究竟做错了什么？为什么我的表没有创建新内容？

我将此代码推送到 jsfiddle 以帮助您帮助我。 [这是代码的链接。](http://jsfiddle.net/AgyAk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:22:38.160

**更新分析**

您忘记调用`this._super();`，`init`这会阻止您的实例进行绑定管理设置。（[固定修订](http://jsfiddle.net/MikeAski/AgyAk/11/)）

~~您在一个典型的 Ember 陷阱中感觉到：初始值永远不应该是对象，因为它们将被所有类实例共享...有关更多信息，请参阅[本文](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)。~~

## 

**FIX SAMPLE -*仍然推荐实施***

更新了您的 JSFiddle @ [http://jsfiddle.net/MikeAski/AgyAk/12/](http://jsfiddle.net/MikeAski/AgyAk/12/)并进行了一些改进*（最值得注意的是：使用控制器而不是直接使用控制器`ArrayProxy`。它更符合习惯并准备好切换到`Router`基础架构）*。

# ruby - 使用 Mechanize 检索网站的所有链接

> ID：11613241
> 
> 赞同：2
> 
> 时间：2012-07-23T13:11:41.663
> 
> 标签：ruby, recursion, mechanize, web-crawler

如何使用该`Mechanize`库查找网站上的所有链接？

我想递归解析内部链接以获取网站的所有链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:55:03.357

你看过[海葵](http://anemone.rubyforge.org/)宝石吗？它是专门为爬虫网站创建的。

您可以执行以下操作来获取并打印网站的所有链接：

```
require 'anemone'

Anemone.crawl("http://www.example.com/") do |anemone|
  anemone.focus_crawl { |page| puts page.links }
end 
```

如果您想爬取整个边，排除某些类型的链接，或者排除类似的链接，它有相当好的文档可供选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-14T21:15:04.617

不是红宝石解决方案，但我发现[这个脚本](https://github.com/adamdehaven/fetchurls)简单有效。

# android - ICS、意图和许可证上的斑马打印

> ID：11613242
> 
> 赞同：0
> 
> 时间：2012-07-23T13:11:43.383
> 
> 标签：android, printing, zebra-printers

我们正在开发一个新的内部使用应用程序，它将依赖 RW420 Zebra 打印机进行 POS 打印。我一直在寻找有关该问题的文档，但我仍然有三个无法解决的问题：

a) 定价：在商业应用上使用 SDK 是否需要支付任何费用？我们代表我们的最终客户开发它。我已经能够从他们的页面免费下载 SDK，但仍然对此感到担忧。

b) ICS 支持：自 2.1/2.2 Android 版本以来，SDK 似乎没有发展。这会是一个问题吗？目前可以在 ICS 下使用 Zebra 应用程序，但不想更深入地编程，只是为了看到所有的努力都是徒劳的。

c）我真的需要 SDK 还是可以使用意图（一无所获）？

如果您有其他类似的打印机建议来替代 Zebra，我将很高兴知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:27:29.077

1.  没有。 [1] ~~AFAIK 没有，但如果你想非常确定，请联系他们。~~
2.  不，ICS 应该与编程良好的 Android 2.1/2.2 应用程序和库完全向后兼容。
3.  为了使 Intent 工作，用户必须在他们的设备上安装一些 ZebraLink Android 应用程序才能处理 Intent。有一个应用程序“Zebra Utilities”，但它没有可用于打印的 Intent。[2] ~~AFAIK 没有这样的应用程序，所以没有。~~

资料来源：[1] 和 [2] 参见 OTisler（Zebra 员工）的评论。

# objective-c - 从它的 contentViewController 获取对 UIPopoverController 的引用

> ID：11613243
> 
> 赞同：0
> 
> 时间：2012-07-23T13:11:46.300
> 
> 标签：objective-c, ios, ipad, popover

嗯。在写主题时，我发现这是不可能的（根据[这个线程](https://stackoverflow.com/questions/9877729/how-to-dismiss-a-uipopovercontroller-from-within-its-contentviewcontroller)）。

我的目标很简单：里面有弹出框和按钮。我想在 touchUpInside 按钮上显示比当前弹出框大小更大的东西，所以我需要调整弹出框的大小。但由于我无法获得对弹出框的引用，因此我需要保留对弹出框的“超级视图控制器”的引用。那只是丑陋。

所以现在我正在寻找一些更优雅的解决方案。

**更新：**这很难看，因为我已经用那个表达式结束了：

```
[(UIPopoverController*)[[(AppDelegate*)[[UIApplication sharedApplication] delegate] calendarViewController] 
                        performSelector: @selector(popover)] 
 setPopoverContentSize:viewFrame.size animated: YES]; 
```

只是为了调整简单的弹出框:(

# assembly - 对 ELF 二进制文件进行逆向工程

> ID：11613246
> 
> 赞同：3
> 
> 时间：2012-07-23T13:12:00.133
> 
> 标签：assembly, reverse-engineering

我有一个在服务器上发现的潜在漏洞的二进制文件。我有兴趣将其反转，以确切了解该二进制文件旨在尝试利用的内容。我唯一的问题是 OBJDump 和其他类似的程序都会返回错误，表明无法读取文件。十六进制转储显示文件中确实存在 ELF 标头，但是我不够熟练，无法确定 ELF 是否完全基于十六进制正确构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:56:20.450

尝试[IDA](http://www.hex-rays.com/products/ida/index.shtml)（交互式反汇编程序）。[演示版](http://www.hex-rays.com/products/ida/support/download_demo.shtml)可以打开 ELF 文件。（我不确定[免费软件](http://www.hex-rays.com/products/ida/support/download_freeware.shtml)是否可以，而且它仅适用于 Windows）。我们努力让它接受损坏/故意损坏的文件，所以如果它不能被 IDA 加载但在实际操作系统中工作，我会对样本感兴趣。

免责声明：我为 Hex-Rays 工作。

# python - 从 python 源构建 Windows 可执行文件

> ID：11613250
> 
> 赞同：1
> 
> 时间：2012-07-23T13:12:11.690
> 
> 标签：python, windows

我们有一个 Py 模块，我们想以 Windows 可执行文件的形式提供给用户。是否有一个经过验证的好工具可以将 py 模块打包到 Windows exe 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:36:59.083

作为`py2exe`运行 Python 3.x 版本的替代方案，您可以使用`cx_freeze`( [http://cx-freeze.sourceforge.net/](http://cx-freeze.sourceforge.net/) )。它不会将程序打包到单个可执行文件中，但您可以将它生成的所有文件打包到自解压存档中以进行部署。有关详细信息，请参阅[https://stackoverflow.com/a/11511735/369977](https://stackoverflow.com/a/11511735/369977)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:16:45.727

您可以使用 Python 扩展[py2exe](http://www.py2exe.org/)。

在 Python 中，您可以使用以下代码：

```
from distutils.core import setup
import py2exe

setup(console=['test.py']) 
```

制作可执行的 test.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:16:09.050

```
from distutils.core import setup
import py2exe

setup(console=['hello.py']) 
```

只要您安装了[py2exe](http://www.py2exe.org)，它就会编译`hello.py`为一个 exe，（它实际上只是将 stdlib 和解释器捆绑到一个可执行文件中。）

# c# - 带有下划线的 MVC 3 模型绑定

> ID：11613253
> 
> 赞同：11
> 
> 时间：2012-07-23T13:12:20.300
> 
> 标签：c#, asp.net-mvc, json, asp.net-mvc-3, model-binding

我正在使用带下划线 ( `like_this`) 的变量名称发布 json，并尝试绑定到驼峰式 ( `LikeThis`) 的模型，但无法绑定这些值。

我知道我可以编写一个自定义模型绑定器，但由于下划线的约定是如此普遍，我希望已经存在解决方案。

我要发布的动作/模型是：

```
/* in controller */
[HttpPost]
public ActionResult UpdateArgLevel(UserArgLevelModel model) {
    // do something with the data
}

/* model */
public class UserArgLevelModel {
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
    public int ArgLevelId { get; set; }
} 
```

json数据如下：

```
{
    id: 420007,
    first_name: "Marc",
    surname: "Priddes",
    arg_level_id: 4
} 
```

（不幸的是，我无法更改 json 或模型的命名）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T14:33:51.110

您可以开始编写[自定义](https://gist.github.com/1042502) [Json.NET](http://james.newtonking.com/projects/json-net.aspx) `ContractResolver`：

```
public class DeliminatorSeparatedPropertyNamesContractResolver :
    DefaultContractResolver
{
    private readonly string _separator;

    protected DeliminatorSeparatedPropertyNamesContractResolver(char separator)
        : base(true)
    {
        _separator = separator.ToString();
    }

    protected override string ResolvePropertyName(string propertyName)
    {
        var parts = new List<string>();
        var currentWord = new StringBuilder();

        foreach (var c in propertyName)
        {
            if (char.IsUpper(c) && currentWord.Length > 0)
            {
                parts.Add(currentWord.ToString());
                currentWord.Clear();
            }
            currentWord.Append(char.ToLower(c));
        }

        if (currentWord.Length > 0)
        {
            parts.Add(currentWord.ToString());
        }

        return string.Join(_separator, parts.ToArray());
    }
} 
```

这是针对您的特殊情况的，因为您需要[蛇盒](http://en.wikipedia.org/wiki/Snake_case) `ContractResolver`：

```
public class SnakeCasePropertyNamesContractResolver :
    DeliminatorSeparatedPropertyNamesContractResolver
{
    public SnakeCasePropertyNamesContractResolver() : base('_') { }
} 
```

然后你可以编写一个自定义属性来装饰你的控制器动作：

```
public class JsonFilterAttribute : ActionFilterAttribute
{
    public string Parameter { get; set; }
    public Type JsonDataType { get; set; }
    public JsonSerializerSettings Settings { get; set; }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {    
        if (filterContext.HttpContext.Request.ContentType.Contains("application/json"))
        {
            string inputContent;
            using (var reader = new StreamReader(filterContext.HttpContext.Request.InputStream))
            {
                inputContent = reader.ReadToEnd();
            }

            var result = JsonConvert.DeserializeObject(inputContent, JsonDataType, Settings ?? new JsonSerializerSettings());
            filterContext.ActionParameters[Parameter] = result;
        }
    }
} 
```

最后：

```
[JsonFilter(Parameter = "model", JsonDataType = typeof(UserArgLevelModel), Settings = new JsonSerializerSettings { ContractResolver = new SnakeCasePropertyNamesContractResolver() })]
public ActionResult UpdateArgLevel(UserArgLevelModel model) {
{
    // model is deserialized correctly!
} 
```

# postgresql - 加速循环计算文档类型的plpgsql？

> ID：11613257
> 
> 赞同：1
> 
> 时间：2012-07-23T13:12:51.470
> 
> 标签：postgresql, query-optimization, plpgsql

有没有一种方法可以加快我们的 plpgsql 函数，该函数在一个循环中执行的查询中计算某些类型的文档？全部在一个查询中？

```
validador := (select count(id_doc) from webdte.doc_tip_cifra
              where id_doc = id_documento and id_tipo_cifra = 901); 

validador2 := (select count(id_doc) from webdte.doc_tip_cifra
               where id_doc = id_documento and id_tipo_cifra = 902); 

validador3 := (select count(id_doc) from webdte.doc_tip_cifra
               where id_doc = id_documento and id_tipo_cifra = 905); 

validador4 := (select count(id_doc) from webdte.doc_tip_cifra
               where id_doc = id_documento and id_tipo_cifra = 907); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:20:49.813

在一个查询中分配所有四个变量应该更快（只有一个表或索引扫描）：

```
SELECT INTO validador, validador2, validador3, validador4
            sum(CASE id_tipo_cifra WHEN 901 THEN 1 ELSE 0 END)
           ,sum(CASE id_tipo_cifra WHEN 902 THEN 1 ELSE 0 END)
           ,sum(CASE id_tipo_cifra WHEN 905 THEN 1 ELSE 0 END)
           ,sum(CASE id_tipo_cifra WHEN 907 THEN 1 ELSE 0 END)
FROM   webdte.doc_tip_cifra
WHERE  id_doc = id_documento; 
```

结果相同。

通常你必须额外检查`id_doc`，`NULL`但由于你有一个`WHERE`条件`=`，它不能是`NULL`.

# xml - 使用我的代码，Perl::Twig 缺少一个父节点？

> ID：11613262
> 
> 赞同：2
> 
> 时间：2012-07-23T13:13:21.863
> 
> 标签：xml, perl, perl-module, xmlnode, xml-twig

我不确定我的代码是否有问题，或者 XML::Twig 3.40 是否存在问题。目标是将**method="MODIF"** **“更改或添加”到****节点“attributez”**的父节点

 ****文件输入.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
    <world id="0" method="create">
     <continent id="0">
        <country id="18" method="create">
           <attributez>
              <info1>blabla</info1>
              <info2>blibli</info2>
           </attributez>
        </country>
     </continent>
   <attributez>
        <number_people>5billions</number_people>
        <number_continent>5</number_continent>
   </attributez>

     <oceans id="atlantic" method="create">
        <attributez>
           <name>ATLANTIC</name>
        </attributez>
     </oceans>

  </world> 
```

我的代码（从[http://xmltwig.org/xmltwig/tutorial/yapc_twig_s4.html](http://xmltwig.org/xmltwig/tutorial/yapc_twig_s4.html)稍作修改，示例 4）：

```
#!/bin/perl -w
use strict;
use XML::Twig;

my $twig= new XML::Twig( 
            twig_handlers =>                  # player will be called
              { attributez => \&player }         
                   );                        

$twig->parsefile( "input.xml");                     # build the twig
$twig->flush;                                     # flush the end of the twig  

sub player
{ my( $twig, $valeur)= @_;                      # handlers params are always
                                              # the twig and the element

($valeur-> parent)   ->set_att("method" => "MODIF");

$twig->flush;                                 # flush the twig so far   
} 
```

我们应该像这样更新根目录：

```
 <world id="0" method="MODIF"> 
```

相反，我们得到以下输出（根本不更新根属性）：

```
<?xml version="1.0" encoding="UTF-8"?>
<world id="0" method="create">
 <continent id="0">
    <country id="18" method="MODIF">
        <attributez>
            <info1>blabla</info1>
            <info2>blibli</info2>
        </attributez>
    </country>
</continent>

<attributez>
    <number_people>5billions</number_people>
    <number_continent>5</number_continent>
</attributez>

  <oceans id="atlantic" method="MODIF">
    <attributez>
        <name>ATLANTIC</name>
    </attributez>
  </oceans>
</world> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:28:01.940

我不得不删除最后一个（子程序播放器内的那个）

```
 $twig->flush; 
```

现在输出正常****

# sftp - sftp 网络驱动器 ssh 服务器设置 - 获取错误 10058

> ID：11613265
> 
> 赞同：2
> 
> 时间：2012-07-23T13:13:36.360
> 
> 标签：sftp, net-sftp

我正在尝试使用 Eldos 的 SFTP 网络驱动器将驱动器映射到虚拟 Ubuntu 服务器。我在使用密码进行身份验证时效果很好。我已经尝试了配置基于密钥的访问的正常/典型方法。但是，我收到错误 10058。我搜索了明确的说明但没有成功。

有人使用基于密钥的访问吗？请分享您如何配置它。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-01T10:16:51.567

如果您通过命令行连接（例如，使用“open /profile:server”命令行参数）并且您正在访问最近重新安装的服务器，则连接将因更改服务器 ssh 指纹而静默失败。

尝试手动重新连接（不使用命令行），接受新指纹，问题就会解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:15:29.263

这是因为服务器出于某种原因不接受密钥并关闭连接。通常这是错误服务器的一个指标，它通常应该发送错误数据包作为响应。

但是您的问题在 StackOverflow 上是题外话。

# entity-framework - 使用创建的 DbContext 模型类从 EF Code First 生成存储库

> ID：11613268
> 
> 赞同：2
> 
> 时间：2012-07-23T13:13:44.620
> 
> 标签：entity-framework, ef-code-first, repository-pattern

我正在开始一个新项目并想使用 EF Code First 模式，但我也想使用存储库模式。我一直在寻找一种从 dbcontext 模型生成存储库的方法，但到目前为止我看到的所有答案都是从 .edmx 或 DB 生成存储库。我不想创建 .edmx。

我要做的步骤是：
1\. 编写模型
2\. 使用 t4 模板生成存储库
3\. 从模型和存储库编写应用程序代码 4\. 运行 Add-Migration 以添加迁移代码
5\. 运行 update-database 以根据迁移进行更新代码

我可以用什么来告诉它根据模型类生成 t4 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:23:41.743

我现在已经找到了怎么做。使用 T4Scaffolding，我将能够根据需要生成存储库。它还允许我覆盖默认的 t4 模板并创建自定义脚手架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T07:38:47.217

我创建了一个 NuGet 包，它也可以执行此操作，它需要一个命名空间，您的模型不是 edmx 文件：

[https://www.nuget.org/packages/RepositoryGenerator/](https://www.nuget.org/packages/RepositoryGenerator/)

# java - 将 JMF 与 jffMPEG 一起使用

> ID：11613270
> 
> 赞同：1
> 
> 时间：2012-07-23T13:13:48.210
> 
> 标签：java, jmf

我正在用 Eclipse 用 Ja​​va 编程。在我的项目中，我在我的 java 应用程序中使用 JMF。我需要播放 mp4 文件，所以我尝试添加 jffMPEG 以与 JMF 一起使用，但同时没有成功。我按照[本](http://jffmpeg.sourceforge.net/download.html)教程进行操作。

但在第二步，注册以下我得到的“解复用器”

`"JMF Registry Error - Could not add item".`

任何人都可以帮我在 jPanel 中播放 MP4 或向我推荐如何在 java 中使用 jffMPEG 的好教程。

# cordova - 在 cordova-2.0.0 中未定义的 window.plugins

> ID：11613274
> 
> 赞同：11
> 
> 时间：2012-07-23T13:13:57.403
> 
> 标签：cordova, barcode-scanner, phonegap-plugins, blackberry-webworks

我正在尝试在 BlackBerry 设备中使用 Cordova 的 BarcodeScanner 插件，但没有运气。示例代码使用了这种结构：

```
window.plugins.BarcodeScanner... 
```

但是`window.plugins`是`undefined`。

我尝试了一个全新的应用程序并`window.plugins`继续使用`undefined`（我的意思是，没有任何添加的示例应用程序）。

api是否已更改并且文档已过时或者我缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T22:48:10.073

Cordova 2.0 删除了 BarcodeScanner 插件使用的“addPlugin”方法。因此，一个快速的解决方法是删除（或注释掉）用于添加插件的“addConstructor”函数，并将其替换为窗口对象的显式附件：

```
//cordova.addConstructor(function() {
//    cordova.addPlugin('barcodeScanner', new BarcodeScanner());
//});

window.barcodeScanner = new BarcodeScanner(); 
```

然后，由于没有使用“window.plugins”，您还需要更改调用“scan”方法的代码，因此替换

```
window.plugins.barcodeScanner.scan(... 
```

和

```
window.barcodeScanner.scan(... 
```

我已经用 Cordova 2.0 对此进行了测试，它可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:27:06.390

刚刚遇到了同样的问题。查看窗口对象后，我发现 BarcodeScanner 就在那里。`window.BarcodeScanner.prototype.scan(result, error)`诀窍也是如此。确保你等待科尔多瓦完全初始化，否则你可能会喜欢`has no method exec()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T18:26:40.887

所有，我今天早上推了一个新的 BarcodeScanner，它适用于 2.0.0。

[https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner/2.0.0](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner/2.0.0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T23:08:51.590

最后，我使用了cordova 1.9.0，因为插件还不是最新的。

谢谢大家！

# eclipse - 为什么 Eclipse API 使用数组而不是集合？

> ID：11613277
> 
> 赞同：5
> 
> 时间：2012-07-23T13:14:14.610
> 
> 标签：eclipse, api, eclipse-plugin, eclipse-rcp

在 Eclipse API 中，返回和参数类型大多是数组而不是集合。一个例子是`members`on 方法`IContainer`，它返回`IResources[]`.

我对为什么会这样很感兴趣。也许它是以下之一：

1.  API 是在泛型泛型可用之前设计的，因此`IResource[]`比仅仅`Collection`或`List`
2.  内存问题，例如，`ArrayList`内部保存了一个数组，该数组的空间比需要的多（以提供有效的实现`add`），而数组总是为所需的目标大小而构建
3.  不可能在数组上添加/删除元素，因此迭代是安全的（但防御性复制仍然是必要的，因为仍然可以更改元素，例如将它们设置为`null`）

有没有人有任何见解或其他想法为什么 API 是这样开发的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:08:19.327

将此作为答案发布，因此可以接受。

Eclipse 早于泛型，它们非常重视 API 稳定性。此外，在 SWT 的低级别，传递数组似乎用于反映正在包装的操作系统 API。一旦你有一堆使用数组的工具，我想保持一致是有意义的。另请注意，使用反射时，数组不会受到所有类型擦除问题的影响。

是的，我听说你的 collections api 通常更容易用于动态项目列表。

# java - 使用 java 和 lucene 3.6 进行分面搜索的教程

> ID：11613283
> 
> 赞同：1
> 
> 时间：2012-07-23T13:14:33.917
> 
> 标签：java, lucene, faceted-search

我正在寻找有关使用 java 和 lucene 3.6 进行分面搜索的教程。我不想使用 solr。我需要一些东西来描述制作索引所需的步骤（使用类别等）以及如何进行搜索、使用的类和方法等。在此先感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:24:28.050

我想这可能会对你有所帮助。这是官方的用户指南。1\. [http://lucene.apache.org/core/3_6_1/api/contrib-facet/org/apache/lucene/facet/doc-files/userguide.html](http://lucene.apache.org/core/3_6_1/api/contrib-facet/org/apache/lucene/facet/doc-files/userguide.html) 2\. [http://shaierera.blogspot.com/2012 /11/lucene-facets-part-1.html](http://shaierera.blogspot.com/2012/11/lucene-facets-part-1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:29:37.440

这是生成快速 Lucene 搜索的教程 - [http://www.hascode.com/2010/03/how-to-build-a-quick-lucene-search/](http://www.hascode.com/2010/03/how-to-build-a-quick-lucene-search/)

不过对你来说可能有点太基础了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:13:13.340

但是在同一个博客上，有一个教程如何使用 Hibernate Search 实现分面，因此引擎盖下有 Lucene 和 JPA，但也许这不是您正在搜索的组合：

*   [http://www.hascode.com/2012/03/hibernate-search-faceting-discrete-and-range-faceting-by-example/](http://www.hascode.com/2012/03/hibernate-search-faceting-discrete-and-range-faceting-by-example/)

在 Lucene 4.x 文档中有一整章关于这个主题，但它是一个早期版本：

*   [http://lucene.apache.org/core/4_0_0-ALPHA/facet/org/apache/lucene/facet/doc-files/userguide.html](http://lucene.apache.org/core/4_0_0-ALPHA/facet/org/apache/lucene/facet/doc-files/userguide.html)

如果您找到了更好的来源，请让我们保持最新:)

# python - 将项目添加到列表字典

> ID：11613284
> 
> 赞同：5
> 
> 时间：2012-07-23T13:14:53.503
> 
> 标签：python, dictionary

假设有以下玩具（来自一个 CSV 文件，其中列名是“键”，我只对放入“数据”的某些行感兴趣）：

```
keys = ['k1', 'k2', 'k3', 'k4']
data = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]] 
```

我想得到一个字典，每列都有一个列表，如下所示：

```
{'k1': [1, 5, 9, 13], 'k2': [2, 6, 10, 14], 'k3': [3, 7, 11, 15], 'k4': [4, 8, 
12, 16]} 
```

在我的代码中，我首先使用空列表初始化字典，然后迭代（按键的顺序）以将每个项目附加到列表中。

```
my_dict = dict.fromkeys(keys, [])
for row in data:
    for i, k in zip(row, keys):
        my_dict[k].append(i) 
```

但它不起作用。它构建了这个字典：

```
{'k3': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], 'k2': [1, 2, 3,
4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16], 'k1': [1, 2, 3, 4, 5, 6, 7, 8, 
9, 10, 11, 12, 13, 14, 15, 16], 'k4': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 
13, 14, 15, 16]} 
```

您可以看到所有元素都在所有列表中，而不是每个列表中只有四个元素。如果我在循环中打印 i, k 它会执行正确的项目和键对。所以我想问题是当我在键 k 的列表中添加项目 i 时。

有谁知道为什么所有元素都添加到所有列表中，以及构建我的字典的正确方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T13:23:06.693

压缩它，但先转置它：

```
>>> keys = ['k1', 'k2', 'k3', 'k4']
>>> data = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]
>>> print dict(zip(keys, zip(*data)))
{'k3': (3, 7, 11, 15), 'k2': (2, 6, 10, 14), 'k1': (1, 5, 9, 13), 'k4': (4, 8, 12, 16)} 
```

如果您想要列表而不是数组中的元组：

```
>>> print dict(zip(keys, [list(i) for i in zip(*data)])) 
```

如果您想使用您的版本，只需进行字典理解，而不是`fromkeys`：

```
my_dict = { k : [] for k in keys } 
```

您`my_dict`使用相同值初始化的问题：

```
>>> my_dict = dict.fromkeys(keys, [])
>>> my_dict
{'k3': [], 'k2': [], 'k1': [], 'k4': []}
>>> my_dict['k3'].append(1)
>>> my_dict
{'k3': [1], 'k2': [1], 'k1': [1], 'k4': [1]} 
```

当你做对时（使用字典/列表理解）：

```
>>> my_dict = dict((k, []) for k in keys )
>>> my_dict
{'k3': [], 'k2': [], 'k1': [], 'k4': []}
>>> my_dict['k3'].append(1)
>>> my_dict
{'k3': [1], 'k2': [], 'k1': [], 'k4': []} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T13:16:49.477

您遇到[了此答案中解释的问题](https://stackoverflow.com/questions/11509721/how-do-i-initialize-a-dictionary-of-empty-lists-in-python/11509759#11509759)：您的字典已使用为所有值重新使用*的相同列表对象进行初始化。*只需使用

```
dict(zip(keys, zip(*data))) 
```

反而。这会将行列表转换为列列表，然后将键和列压缩在一起。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T13:16:40.860

我认为这`dict(zip(keys, map(list,zip(*data)) ))`应该可以解决问题。

首先，我转置你的数据（`zip(*data)`），但返回元组......因为你想要列表，我使用 map 从元组构造列表。然后我们再次使用 zip 将键与列表中的项目匹配。例如`(key1,list1), (key2,list2),...`。这正是字典构造函数所期望的，所以你是金子。

另一种解决方案是使用`collections.defaultdict`：

```
d=collections.defaultdict(list)
tdata=zip(*data)  #transpose your data
for k,v in zip(keys,tdata):
    d[k].extend(v) 
```

当然，这会给您留下一个 defaultdict 而不是常规的，尽管它可以轻松地更改为常规的 `d=dict(**d)`：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:19:28.597

那应该工作：

```
keys = ['k1', 'k2', 'k3', 'k4']
data = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]
mydict = {}
for k in keys:
    b[k] = []
    for l in data:
        b[k].append(l[i])
    i += 1 
```

~~请注意， index() 是一个昂贵的函数。当你有一个庞大的数据集时不要使用它。在这种情况下增加一个变量。~~

~~**编辑：**不，它没有！抱歉，请稍等~~

**编辑：**现在可以了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T13:22:43.610

```
>>> keys = ['k1', 'k2', 'k3', 'k4']
>>> data = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16]]
>>> dict(zip(keys, zip(*data)))
{'k3': (3, 7, 11, 15), 'k2': (2, 6, 10, 14), 'k1': (1, 5, 9, 13), 'k4': (4, 8, 12, 16)} 
```

如果你真的需要列表：

```
>>> dict(zip(keys, map(list, zip(*data))))
{'k3': [3, 7, 11, 15], 'k2': [2, 6, 10, 14], 'k1': [1, 5, 9, 13], 'k4': [4, 8, 12, 16]} 
```

如果您使用的是 python 2，则`zip`返回`map`s `list`。如果您正在使用大型数据集，您可以使用`itertools.izip`并`itertools.imap`提高效率并避免创建中间列表。

# android - 无法捕获 NetworkOnMainThreadException

> ID：11613287
> 
> 赞同：2
> 
> 时间：2012-07-23T13:15:01.357
> 
> 标签：android, exception

我知道导致 NetworkOnMainThreadException 的原因以及如何修复它，但为了改善开发体验，我希望能够捕获异常并至少记录事件或提醒用户（谁仍然此时的开发人员）...

奇怪的是，我对这段代码没有任何运气（它通过我的 TCP 套接字发送和接收）：

```
try
{
    toServer.println (msg.trim());
    resp = fromServer.readLine();
}
catch (android.os.NetworkOnMainThreadException nex)
{ ... do something here ... } 
```

Eclipse 根本无法识别该异常，我从 Android 开发者网站复制粘贴了异常类型——我很确定我拼写正确...

关于Java（也许）有什么我不知道的东西使这个异常无法捕获吗？

谢谢，R。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:16:12.903

> 关于Java（也许）有什么我不知道的东西使这个异常无法捕获吗？

是的，[**`StrictMode`**](http://developer.android.com/reference/android/os/StrictMode.html)让它无法捕捉。不管怎样，你都不应该***捕捉***到这个异常。相反，您应该通过将代码包装在`AsyncTask`. 抛出此异常的原因是为了防止您通过阻塞 UI 线程来减慢应用程序的速度。

阅读我的博客文章了解更多信息：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:58:28.220

好吧，我刚刚在我的 eclipse 版本上测试了它，它工作得很好。我想我会检查你使用的是哪个版本的 api？看起来像抛出那个异常你需要一个最低的 api 版本 11。否则也许 eclipse 是罪魁祸首？我所知道的是这段代码是正确的，应该可以毫无问题地执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:48:03.257

您确定这是您的应用程序中首次使用网络吗？

如果您通常在那个时候连接到服务器，则应该抛出 NetworkOnMainThreadException。尝试在尝试之前添加一条日志语句，看看它是否出现。如果不是，则更早抛出异常。

# android - 如何使用jarsigner提取apk文件来获取密钥？

> ID：11613289
> 
> 赞同：0
> 
> 时间：2012-07-23T13:15:04.907
> 
> 标签：android, keystore, jarsigner

如何使用 jarsigner 提取 apk 文件以获取密钥库以更新我的 Android 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:45:58.913

这在数学上是不可能的。数字签名背后的全部要点是，它们不能被逆向工程，除非拥有比任何人都拥有的更多的计算能力。

您应该已经拥有您的应用程序的密钥库——您曾经使用过它来签署 APK 文件。如果您丢失了该密钥库文件，请从备份中恢复它。

# linux - 配置 baretail 以通过网络显示日志

> ID：11613293
> 
> 赞同：1
> 
> 时间：2012-07-23T13:15:07.980
> 
> 标签：linux, windows, logging, sftp

我正在寻找一个实时更新的日志阅读器。此外，我的日志文件在运行 Linux 的服务器上，而我在 Windows 系统上。

我找到了[Bare Metal 的 BareTail](https://www.baremetalsoft.com/baretail/)，我在配置时遇到了困难。我编写了一个简单的批处理来执行和打开日志文件，但它无法执行，这并不奇怪，因为服务器需要一个我不知道如何指定的用户名/密码。我的批次：

```
:: Set Path to BareTail.exe Location
set path=path;"D:\Installs"

:: Set Server Path & Folder Path
set server=10.10.10.20
set dir=\product\install\logs\

start baretail.exe \\%server%%dir%system.log 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:50:35.630

在 Linux 机器上，创建一个指向该`logs`目录的 SMB 共享。

在 Windows 资源管理器中，将 SMB 共享映射到驱动器号。在您的情况下，映射会打开服务器的登录对话框。然后只需将日志文件拖入baretail。

# vba - 比较两个不同工作簿中的字符串

> ID：11613301
> 
> 赞同：-1
> 
> 时间：2012-07-23T13:15:40.317
> 
> 标签：vba, excel, compare

我必须使用 VBA 比较 Excel 中 2 个工作簿的用户名。如何做到这一点？

例如 ：

*   在工作簿 1 中：A 列包含 10 个名称
*   在工作簿 2 中：A 列包含 10 个名称

我需要根据匹配将每个工作簿中 B 列的单元格设置为绿色或红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:50:12.197

我“认为”你的意思是这样的，但我知道我总是需要谨慎。下面的代码应该可以工作，但您可能希望更动态地设置范围。

```
Option Explicit
Sub Compare_Names()

Dim oBook_1             As Excel.Workbook
Dim oBook_2             As Excel.Workbook
Dim oRange_1            As Range
Dim iRange_1_Rows       As Integer
Dim oRange_2            As Range
Dim iRange_2_Rows       As Integer

Dim vArray              As Variant
Dim vArray_Found        As Variant
Dim iCnt                As Integer
Dim iCnt_B              As Integer

Application.ScreenUpdating = False
Application.DisplayAlerts = False

Set oBook_1 = Workbooks.Open("U:/Names_1.xls")
    Set oRange_1 = oBook_1.Sheets(1).Range("A1:A5") 'Can be dynamically set when needed
    iRange_1_Rows = oRange_1.Rows.Count
    ReDim vArray(1 To iRange_1_Rows, 1 To 1)
    vArray = oRange_1
    Set oRange_1 = Nothing
oBook_1.Close
Set oBook_1 = Nothing

Set oBook_2 = Workbooks.Open("U:/Names_2.xls")
    Set oRange_2 = oBook_2.Sheets(1).Range("A1:A5")
    iRange_2_Rows = oRange_2.Rows.Count
    For iCnt = 1 To iRange_1_Rows
        For iCnt_B = 1 To iRange_2_Rows

            ReDim vArray_Found(1 To iRange_2_Rows, 1 To 1)

            If Trim(vArray(iCnt, 1)) = Trim(oRange_2(iCnt_B)) Then
                oRange_2(iCnt_B).Interior.Color = vbGreen
                vArray(iCnt_B, 1) = True
            End If
        Next iCnt_B
    Next iCnt

    For iCnt = 1 To iRange_2_Rows
        If vArray(iCnt, 1) <> True Then
            oRange_2(iCnt).Interior.Color = vbRed
        End If
    Next iCnt

    Set oRange_2 = Nothing
oBook_2.Save
oBook_2.Close
Set oBook_2 = Nothing

End Sub 
```

如果您想要一个不区分大小写的比较，您可以使用：

```
if UCase(Trim(vArray(iCnt, 1))) = UCase(Trim(oRange_2(iCnt_B))) Then 
```

# html5-video - 视频元素过滤器上的 HTML5 摄像头未复制到画布

> ID：11613302
> 
> 赞同：1
> 
> 时间：2012-07-23T13:15:44.523
> 
> 标签：html5-video, html5-canvas

我正在使用谷歌浏览器新的 WebRTC 功能制作一个新的拼贴[应用程序，让我可以在 javascript 中访问相机。](http://www.lab.kaiserapps.com/webrtc/)我已经能够将相机源放在视频元素上，拍摄相机快照并将它们存储在变量中，然后将它们绘制到我的画布上。

我的新问题是，即使使用 css 更改视频元素上的 css -webkit-filter（通过单击视频预览），复制的数据也是原始数据且未过滤。有没有办法从视频元素中复制绘制过滤后的数据？或者在画布的区域上绘制过滤器？

# magento - 从代码中加载一个块并定义周围的布局？

> ID：11613303
> 
> 赞同：0
> 
> 时间：2012-07-23T13:15:56.870
> 
> 标签：magento, layout

我正在从控制器的代码中创建一个块：

```
$block = $this->getLayout()->createBlock('Mage_Core_Block_Template', 'some_name', array('template' => 'catalog/product/view/somephtml.phtml'));
$this->getLayout()->getBlock('content')->append($block);
$this->renderLayout(); 
```

这很好用，显示了 phtml 的内容。问题是，它在中心列中以 3 列布局显示。我只想要右栏而不想要左栏。我该如何定义呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:25:24.170

```
$this->getLayout()->getBlock('root')->setTemplate('page/2columns-right.phtml') 
```

# qt - QListWidgetItem 中不可见的图标

> ID：11613313
> 
> 赞同：2
> 
> 时间：2012-07-23T13:16:46.457
> 
> 标签：qt, pyqt4

即使在 QListWidgetItem 添加图标后，该图标也不会出现。以下是我为拥有一个带有图标的项目所做的事情。

`item = QtGui.QListWidgetItem(QtGui.QIcon("filename"), "text")` `listWidget.addItem(item)`

图标文件名是正确的（我检查过）。如果有人帮助我，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:38:58.123

尝试使用 seticon 添加图标，例如：

```
item = QtGui.QListWidgetItem('text')
item.setIcon(QtGui.QIcon('%s/blend.png'%(RESOURCE_PATH))) 
```

# c# - asp.net 日期时间操作

> ID：11613320
> 
> 赞同：0
> 
> 时间：2012-07-23T13:17:03.430
> 
> 标签：c#, asp.net, datetime

我有各种类型的字符串：`7/12/2012 12:02:39 AM` 并且想将它们全部转换为`7/12/2012 12:00:00 AM` 基本上日期需要相同，只是时间必须设置为 12:00:00 AM。

解决这个问题的最佳方法是什么？除了只是寻找“”并替换为 12:00:00 AM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:18:35.883

首先，将它们解析为`DateTime`. 然后您可以使用`Date`property(0h) 并将其解析回 a`String`通过使用[`DateTime.ToString`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)：

```
var oldDate = DateTime.Parse("7/12/2012 12:02:39 AM");
var usCulture = System.Globalization.CultureInfo.CreateSpecificCulture("en-US");
var newDateStr = oldDate.Date.ToString( usCulture ); 
```

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

[才注意到那`12 AM`是午夜而不是中午]

~~您可以通过以下方式创建新`DateTime`实例[`constuctor`](http://msdn.microsoft.com/en-us/library/272ba130)：~~

 ~~```
var newDate = new DateTime(oldDate.Year, oldDate.Month, oldDate.Day, 12, 0, 0); 
```~~ 

或在 DateTime(0h) 的日期部分添加 12 小时：

```
var newDate = oldDate.Date.AddHours(12); 
```

 ~~* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:19:03.920

1.  将它们解析为`DateTime`
2.  使用将它们写回字符串`yourDateTime.Date.ToString(@"G", CultureInfo.CreateSpecificCulture("en-us"))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:20:16.077

使用`DateTime.Parse`并指定`CulterInfo`

```
DateTime mydat = DateTime.Parse(myString, CultureInfo.InvariantCulture); 
```~~

# objective-c - 视图上的圆角

> ID：11613321
> 
> 赞同：2
> 
> 时间：2012-07-23T13:17:04.307
> 
> 标签：objective-c, ios

我使用以下方法在我的应用程序中的视图上获得圆角：

```
(objective-c:)
hoursTable.layer.cornerRadius = 5.0;
[hoursTable setClipsToBounds:YES];

(my actual code is in rubymotion:)
self.view.layer.cornerRadius = 10
self.view.layer.masksToBounds = true 
```

现在该视图的所有角都以 10pt 为圆角，我如何仅将效果应用于左上角和右上角，而使左下角和右下角保持正方形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:27:41.563

我在 UIView 上有这个代码的类别：

```
- (void)setRoundedCorners:(UIRectCorner)corners radius:(CGSize)size {
UIBezierPath* maskPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:corners cornerRadii:size];

CAShapeLayer* maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = self.bounds;
maskLayer.path = maskPath.CGPath;

self.layer.mask = maskLayer;
[maskLayer release];
} 
```

如果您使用 ARC，请删除最后一行。

使用示例：

```
[hoursTable setRoundedCorners:UIRectCornerTopLeft|UIRectCornerTopRight radius:CGSizeMake(5.0, 5.0)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:25:43.170

尝试手动创建路径

```
CAShapeLayer* shape = [CAShapeLayer layer];
CGMutablePathRef path = CGPathCreateMutable();
/*...*/
CGPathMoveToPoint(path, NULL, 0, 0);
/*create path for view*/

shape.path = path;
CGPathRelease(path);
view.layer.mask = shape; 
```

# zend-framework - zfdatagrid - 在注册表中找不到名为“表”的插件；

> ID：11613328
> 
> 赞同：0
> 
> 时间：2012-07-23T13:17:30.130
> 
> 标签：zend-framework, zfdatagrid

我刚刚安装了库并尝试了一个带有数组的简单表

```
$grid = Bvb_Grid::factory("Bvb_Grid_Deploy_Table");
$grid->setSource(new Bvb_Grid_Source_Array($this->pkg));
$myGrid = $grid->deploy(); 
```

我收到此错误：

**`Plugin by name 'Table' was not found in the registry; used paths: Bvb_Grid_Template_: Bvb/Grid/Template/`**

我不熟悉它是如何工作的，但会猜测它在`Bvb/Grid/Template/`目录中查看的错误，`Table.php`类中有一个`Bvb_Grid_Template_Table`。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:08:50.480

尝试一点不同。写“表”而不是“Bvb_Grid_Deploy_Table”。在我的示例中，还有网格配置文件...

```
$config = new Zend_Config_Ini(dirname(__FILE__) . '/../configs/grid.ini','clients');
$grid = Bvb_Grid::factory('Table', $config);
$model = new Sand_Model_DbTable_Asset();
$source = new Bvb_Grid_Source_Zend_Table($model);
$grid->setSource($source);
/*
   more code here...
*/
$myGrid = $grid->deploy();
$this->view->grid = $myGrid; 
```

# jquery - jQuery ajax 奇怪的错误

> ID：11613333
> 
> 赞同：1
> 
> 时间：2012-07-23T13:18:05.477
> 
> 标签：jquery, ajax

我试图通过为每种语言创建一个 xml 文件然后使用 ajax get 来本地化我的字符串。

```
var text = new Object();
$.ajax({
        async: false,
        type: 'GET',
        url: 'english.xml',
        dataType: "xml",
        error: function(xhr, status, error) {
              console.log("Lets see the error...");
              console.log(xhr.responseText);
        },
        success: function(xml){
                $(xml).find('text').each(function(){
                        text[$(this).attr('id')] = $(this).text();
                });
        }
});
console.log("Lets see the object...");
console.log(text); 
```

我添加了一些 console.logs 来排除故障。这是控制台的屏幕截图。 ![安慰](../Images/d888d5cc4af2a6d127a50395cf14967b.png)

所以你看到由于某种原因请求失败了..知道为什么吗？

English.xml 仅包含：

```
<text id="call">Caller</text>
<text id="chat">Chatter</text> 
```

更新：将数据类型更改为文本，现在获得成功响应，但“文本”对象没有更新？

```
var text = new Object();
$.ajax({
        type: 'GET',
        url: 'english.xml',
        dataType: "text",
        error: function(xhr, status, error) {
              console.log(xhr);
              console.log(xhr.responseText);
              console.log(status);
              console.log(error);
        },
        success: function(xml){
                $(xml).find('text').each(function(){
                        text[$(this).attr('id')] = $(this).text();
                });
                console.log(xml);
                console.log(text);
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:23:07.913

我会补充

```
<?xml version="1.0" encoding="utf-8"?> 
```

到文档的顶部。我有一种感觉，因为你告诉它你的返回类型将是 xml，它期待这个并且当它找不到它时出错。

您的响应类型也不应该是`"application/xml"`而不仅仅是`"xml"`？

此外，您将 async 设置为 false，这意味着您要求进行同步调用。万一你想知道

编辑：我已经编辑了，因为`application/xml`应该真正使用而不是`text/xml`

您还需要有一个根节点

```
<applicationCalls>
    <text id="call">Caller</text>
    <text id="chat">Chatter</text>
</applicationCalls> 
```

你可以随意调用你的根节点，只要试着让它有意义。

# string - 在 C++ 中将字符串转换为十六进制小端格式

> ID：11613335
> 
> 赞同：0
> 
> 时间：2012-07-23T13:18:08.440
> 
> 标签：string, c++-cli, hex, int, endianness

我有一个字符串 2290348 我需要它显示为 ACF22200（小端序）

因为输入 2290348 是通过文本框中的表单传入的，所以我尝试将其读取为字符串（例如。`this->textBox1->Text`）并将其转换为 int（例如。`Convert::ToInt32(this->textBox1->Text)`）。之后，我将它转换为十六进制，通过`ToString("x")`它我设法得到 22F2AC 我将 00 附加到 22F2AC 并得到 0022F2AC 仍然作为字符串现在我被困在将 0022F2AC 转换为 ACF22200

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:26:10.870

虽然仍然是`int`，但您可以使用 eg[`htonl`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738556%28v=vs.85%29.aspx)将其转换为“网络”字节顺序。

```
#include <winsock2.h>

int main()
{
    unsigned int x = 0x22F2AC;
    printf("x = 0x%08x\n", x);
    printf("htonl(x) = 0x%08x\n", htonl(x));
    return 0;
} 
```

上面的程序打印：

```
x = 0x0022f2ac
htonl(x) = 0xacf22200

```

# c# - 设计 Web 服务以调用另一个 Web 服务

> ID：11613338
> 
> 赞同：1
> 
> 时间：2012-07-23T13:18:30.963
> 
> 标签：c#, wcf

任务 1：我的 Web 服务（wService1）将接收 XML 格式的数据块（请求者）。请求数据将至少包含用户名、密码（安全服务）和一些数据，比如 xyzdata。现在这个 xyzdata 需要存储在数据库（DB1）中。

任务 2：我上面的 web 服务 (wService1) 需要调用现有的 web 服务 (wService2)，根据需要传递所有 xyzdata，执行任何格式化。

任务 3：现在 wService1 应该能够从 wService2 接收响应（以 XML 格式）并将返回的数据与数据库 (DB1) 中的相关数据进行对比。

任务 4：wService1 应以 XML 格式向请求者返回响应以及相关数据。

因此，我需要从头开始编写自己的 Web 服务 (wService1) 并调用现有服务，我无法弄清楚我应该如何设计它。另外，我不知道如何从另一个 Web 服务调用一个服务。

# c# - 从 COM 互操作调用时，C# 无法连接到 WCF 服务

> ID：11613342
> 
> 赞同：0
> 
> 时间：2012-07-23T13:18:54.697
> 
> 标签：c#, app-config, com-interop

我有一个从 C# 应用程序调用时可以正常工作的 C# 类库。但是，它也支持 COM 互操作，因此较旧的 C++ 客户端也可以调用它。C# 类库中有一个 WCF 服务引用。WCF 调用在 C# 调用中工作正常，但从 COM Interop 调用时，我收到一条错误消息：

```
"Could not find default endpoint element that references contract 'xxxx' in the ServiceModel client configuration section....." 
```

引用在 app.config 中，或者更具体地说是在构建 DLL 时构建的 .config 中。似乎当从 C# 应用程序调用时，DLL 知道在哪里查找此配置文件（即与 dll 相同的目录）并因此找到所需的信息。但是，当从 COM Interop 调用时，它似乎必须在其他地方寻找它而没有找到它。

有谁知道我如何解决这个问题并让它在两种情况下都能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:17:03.113

在 COM 服务器中使用 .config 文件是非常不切实际的。System.Configuration 查找的*不是*与 DLL 相关联，而是与 EXE 相关联。Is name 是`foo.exe.config`其中“foo”是 EXE 的名称，并且必须存储在与 .exe 相同的目录中。COM 服务器无法预测 EXE 将加载它。

但是您可以通过将具有正确名称的 .config 文件存储在正确的目录中来手动使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:17:23.153

在 .NET 中，具有配置文件的始终是可执行文件，而不是它使用的 .dll。即使是.dll 需要配置信息，也必须包含在应用程序的配置文件中。

默认情况下，CLR 将在与 exe 相同的目录中查找名为 .config 的配置文件。至少根据我的经验，如果这恰好是一个旧的 C++ 程序并没有什么区别。您只需将配置文件复制到 C++ 程序的目录，将其重命名以匹配可执行文件即可。

如果您想要一个适用于任何地方的解决方案，请考虑在代码中表达配置，可能是在从某个源手动加载所需的配置信息之后。

# ruby - 创建任意字符层次结构

> ID：11613352
> 
> 赞同：1
> 
> 时间：2012-07-23T13:19:42.027
> 
> 标签：ruby, string, compare

假设我有 4 个字符，A、P、B、N。我希望能够比较它们：

A > P > B > N > A

这将如何在 Ruby 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:42:34.180

从您的评论来看，您似乎*不是*试图将这些元素按*顺序排列*，而是在其中一些元素之间定义一些二元*关系*。在 Ruby 中可以通过多种方式做到这一点，这取决于您以后打算如何使用该关系。

最简单的就是定义相关元素的有序对：

```
MAP = [
  ['A', 'P'],
  ['P', 'B'],
  ['B', 'N'],
  ['N', 'A']
] 
```

然后在需要“比较”两个元素时使用它。

```
def beats? one, other
  MAP.member?([one, other])
end

beats? 'A', 'B'
# => false 
beats? 'A', 'P'
# => true 
beats? 'N', 'A'
# => true 
```

PS。您可以使用类似的东西从字符串生成地图

```
MAP = 'APBNA'.chars.each_cons(2).to_a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:25:05.543

一种可能的解决方案是创建一个类，例如，`character`and`weight`或 something。并在其中实现`<=>`运算符（方法）。

不要忘记在`Comparable`这个类中包含 mixin。

```
class ComparableCharacter
  include Comparable
  attr_accessor :character, :weight

  def <=>(another)
    weight <=> another.weight
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:28:17.810

```
a = "APBN"
h = {};(0...a.size).each{|i| h[a[i].chr] = i}
b = ['A','P','A','N', 'B','P']
b.sort_by{|t| h[t] } 
```

当然，这不适用于您的示例，因为您的排序错误 - 您永远不会有 A > P > A，但至少它向您展示了如何根据您想要的顺序进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:10:13.417

如果有人感兴趣，这是我的建议（三元比较——因为**比较不是二元运算！！！**）：

```
class RockPaperScissors

  ITEMS = %W(A P B N)

  def self.compare(item, other_item)
    new(item).compare other_item
  end

  def initialize(item)

    # input validations?

    @item = item
  end

  def compare(other_item)

    # input validations?

    indexes_subtraction = ITEMS.index(@item) - ITEMS.index(other_item)

    case indexes_subtraction
    when 1, -1
      - indexes_subtraction
    else
      indexes_subtraction <=> 0
    end

  end

end

require 'test/unit'
include MiniTest::Assertions

assert_equal RockPaperScissors.compare('A', 'A'), 0
assert_equal RockPaperScissors.compare('P', 'P'), 0
assert_equal RockPaperScissors.compare('B', 'B'), 0
assert_equal RockPaperScissors.compare('N', 'N'), 0
assert_equal RockPaperScissors.compare('A', 'P'), 1
assert_equal RockPaperScissors.compare('P', 'A'), -1
assert_equal RockPaperScissors.compare('P', 'B'), 1
assert_equal RockPaperScissors.compare('B', 'P'), -1
assert_equal RockPaperScissors.compare('B', 'N'), 1
assert_equal RockPaperScissors.compare('N', 'B'), -1
assert_equal RockPaperScissors.compare('N', 'A'), 1
assert_equal RockPaperScissors.compare('A', 'N'), -1 
```

* * *

## 解释

平等：**（A，A）**比较

1.  指数：iA：0；iA: 0
2.  iA - iA = 0
3.  A 等于 A，所以我们可以返回 0

多数：**（A，P）**

1.  指数：iA：0；知识产权：1
2.  iA - iP = -1
3.  A > P，所以我们必须得到1；我们可以使用`-`函数：`- (-1) -> 1`

少数：**（P，A）**

1.  指数：iP：1；iA: 0
2.  iP - iA = 1
3.  P < A，所以我们必须得到-1；我们可以使用`-`函数：`- (1) -> -1`

边缘情况 1：**（N，A）**

1.  指数：iN：3，iA：0
2.  iN - iA = 3
3.  N > A，所以我们必须得到1；我们可以使用`<=>`函数：`(3 <=> 0) -> 1`

边缘情况 2：**（A，N）**

1.  指数：iA：0，iN：3
2.  iA - iN = -3
3.  A < N，所以我们必须得到-1；我们可以使用`<=>`函数：`(3 <=> 0) -> 1`

剩下的就是重构：`0`可以`0`用`<=>`函数转换成。

# windows-phone-7 - WP7 API在环+振动与仅振动之间切换？

> ID：11613356
> 
> 赞同：1
> 
> 时间：2012-07-23T13:19:54.713
> 
> 标签：windows-phone-7

任何允许在振动/振铃设置之间切换的 API：

1.  环+振动
2.  仅振动

在这样的情况下，可以从应用程序内部更改铃声状态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:22:50.483

没有这样的 api 暴露给 3rd 方开发者

# javascript - JavaScript：从子 html 文档调用函数

> ID：11613357
> 
> 赞同：0
> 
> 时间：2012-07-23T13:19:57.800
> 
> 标签：javascript, html

在子 html 文档中执行 javascript 函数的最佳方法是什么？

在我的父文档中，我有这个：

```
function validate() {
        debugger;
        var firstName = frm.FirstName.value;
        var lastName = frm.LastName.value;
        var email = frm.Email.value;

        if (!validateFirstName(firstName)) {
            return false;
        }
        if (!validateLastName(lastName)) {
            return false;
        }
        if (!validateEmail(email)) {
            return false;
        }

        var disp = window.open("results.html");
        disp.window.setData(firstName, lastName, email, frm.Comments);

        if (disp.confirm("Is this information correct?")) {
            disp.close();
        }
    } 
```

在子文档（results.html）中，我有这个：

```
<script type="text/javascript">
    function setData(firstName, lastName, email, comments) {
        frm.FirstName.value = firstName;
        frm.LastName.value = lastName;
        frm.Email.value = email;
        frm.Comments.value = comments;
    }
</script> 
```

这是行不通的。请告诉我如何仅使用普通的 javascript 和 html（没有 JQuery 等）来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:27:06.940

您应该使用**opener**属性。它返回对创建窗口的窗口的引用。

使用 window.open() 打开窗口时，您可以使用目标窗口中的此属性来返回源（父）窗口的详细信息。

```
 <script type="text/javascript">
        function setData(firstName, lastName, email, comments) {
            opener.frm.FirstName.value = firstName;
            opener.frm.LastName.value = lastName;
            opener.frm.Email.value = email;
            opener.frm.Comments.value = comments;
        }
    </script> 
```

# .htaccess - .htaccess 采用文件系统路径

> ID：11613361
> 
> 赞同：0
> 
> 时间：2012-07-23T13:20:10.897
> 
> 标签：.htaccess

我试图得到一个足够简单的规则来工作：

```
Input URL: http://example.com/css/styles.css/t=123456
Expected output: http://example.com/css/styles.css 
```

代表文件的`t=123456`修改时间，在服务器端自动添加。目前，它是一个查询字符串，但显然在某些情况下不能正确缓存，所以我想在 url 中对其进行编码。

我尝试的规则很简单：

```
RewriteRule (.*)/t=[0-9]+ $1 
```

但由于某种原因，我不断收到 404 Not Found 错误。

我添加`[R=301]`以查看重写的去向，出于某种原因，我发现这是输出 URL：

```
http://example.com/home/evilzoro/public_html/css/styles.css 
```

因此，虽然它正确地剥离了参数，但它正在添加整个文件系统路径！

奇怪的是，其他类似的规则工作得很好，比如这个：

```
RewriteCond %{REQUEST_FILENAME} !\.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [QSA] 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:41:18.913

尝试在规则的目标中添加前导斜杠。Apache 必须猜测您指的是文件路径还是 URI 路径，有时它不会正确。

```
RewriteRule (.*)/t=[0-9]+ /$1 
```

# jquery - 使用 jQuery 为 DIV 设置动画

> ID：11613368
> 
> 赞同：0
> 
> 时间：2012-07-23T13:20:34.610
> 
> 标签：jquery, html, css

我试图在页面加载后为 div 的宽度设置动画，但我无法让它工作。

基本上 div 设置为 display:none ，我想在页面准备好后为其宽度设置动画。

```
<script>

$(document).ready(function() {

   $('.graph').animate({width:"40%"},{queue:false, duration:600, easing: 'easeOutBounce'})
});
});
</script>

.graph {width: 400px;
height: 250px;
position: absolute;
background-image: url(../images/roll.png);
display: none;
} 
```

我永远无法让 jquery 工作，叹息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:24:25.620

这`display: none;`也是您的代码无效的原因。

请检查这个 jsFiddle 示例，它将解决问题。

[http://jsfiddle.net/af2yj/](http://jsfiddle.net/af2yj/)

```
$(document).ready(function() {
    $(".graph").show();
    $('.graph').animate({width:"40%"},{queue:false, duration:600, easing: 'easeOutBounce'});
});
​ 
```

在您的示例中，您有未使用的 }); 并且您没有使用分号关闭 animate() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:25:22.307

```
$(".graph").show(); 
```

你必须 .show(); 首先... 那是因为 display: none; 隐藏它，你不显示它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:27:54.270

jQuery 不知道让你的元素完全可见。您告诉它使用 CSS 为您明确告诉浏览器隐藏的元素的宽度设置动画。因此，您需要首先显示元素，然后对其进行动画处理：

```
$(function(){
    $("#foo")
        .show()
        .animate(
            { width: "40%" }, 
            { duration: 600, easing: 'easeOutBounce' }
        );    
}); 
```

小提琴：http: [//jsfiddle.net/kjCnX/1/](http://jsfiddle.net/kjCnX/1/)

# google-chrome - https://chrome.google.com/webstore/ 上的 Chrome 扩展内容脚本

> ID：11613371
> 
> 赞同：26
> 
> 时间：2012-07-23T13:20:42.713
> 
> 标签：google-chrome, google-chrome-extension

Chrome 是否阻止访问网络商店网址？

我想制作一个在 +1 按钮旁边显示类似按钮的扩展程序，但看起来内容脚本不适用于[https://chrome.google.com/webstore/](https://chrome.google.com/webstore/) *

真的吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-23T14:22:09.160

TL;DR 网络商店不能由扩展程序编写脚本，并且以前允许您执行此操作的标志 ( `--allow-scripting-gallery`)[已在 Chrome 35 中删除](https://code.google.com/p/chromium/issues/detail?id=355677)。

Chrome 扩展程序无法执行内容脚本/在 Chrome 网上应用店中插入 CSS。[这在源代码](https://chromium.googlesource.com/chromium/src/+/d774155ed89969a8181932f9f2db8ebc179f5b5e/chrome/common/extensions/chrome_extensions_client.cc#249)中明确定义，在函数处`IsScriptableURL`（单击上一个链接查看完整逻辑）。

```
 // The gallery is special-cased as a restricted URL for scripting to prevent
  // access to special JS bindings we expose to the gallery (and avoid things
  // like extensions removing the "report abuse" link).
  // TODO(erikkay): This seems like the wrong test.  Shouldn't we we testing
  // against the store app extent?
  GURL store_url(extension_urls::GetWebstoreLaunchURL());
  if (url.host() == store_url.host()) {
    if (error)
      *error = manifest_errors::kCannotScriptGallery;
    return false;
  } 
```

`manifest_errors::kCannotScriptGallery`[在这里](https://chromium.googlesource.com/chromium/src/+/d774155ed89969a8181932f9f2db8ebc179f5b5e/extensions/common/manifest_constants.cc#268)定义：

```
const char kCannotScriptGallery[] =
    "The extensions gallery cannot be scripted."; 
```

`chrome.tabs.executeScript`当您使用在 Web Store 选项卡中注入脚本时，可以在后台页面的控制台中查看该错误。例如，打开[https://chrome.google.com/webstore/](https://chrome.google.com/webstore/)，然后在扩展的后台页面中执行以下脚本（通过控制台，用于实时调试）：

```
chrome.tabs.query({url:'https://chrome.google.com/webstore/*'}, function(result) {
    if (result.length) chrome.tabs.executeScript(result[0].id, {code:'alert(0)'});
}); 
```

# c# - 无法获取新的 TextArea 值并保存它

> ID：11613372
> 
> 赞同：0
> 
> 时间：2012-07-23T13:20:44.120
> 
> 标签：c#, textarea

我有一个在服务器端运行的文本区域。我正在将一些文本写入该区域，然后我想通过单击带有以下代码的保存按钮将其保存在文本文件中

```
protected void Button2_Click(object sender, EventArgs e)
{
    string v = codearea.InnerHtml.ToString();
    System.IO.File.WriteAllText(ConfigurationManager.AppSettings["path"].ToString() + txtpath.Text , v);
}

<textarea id="codearea" name="codearea" cols="200" runat="server"> 
```

当我调试变量 v 仍然是空的。有什么帮助吗？我不得不提一下，文本区域在 .ascx 页面中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:24:42.530

尝试`codearea.Value`改用。

**更新：**我也测试过`InnerHtml`，效果很好。在您的情况下，我们需要查看 textarea 的 HTML 代码。

**测试用例：**

```
 <textarea runat="server" id="test"></textarea>
 <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" /> 
```

`Button1`当我同时单击`InnerHtml`和`Value`时都是正确的。

# kml - KML gx：跟踪网络链接更新

> ID：11613376
> 
> 赞同：0
> 
> 时间：2012-07-23T13:20:57.367
> 
> 标签：kml, google-earth

我正在使用网络链接和网络链接控件将坐标添加到 gx:Track。我知道网络链接正在工作，因为它更改了我需要进行的其他更新，但它根本不会更改 gx:Track。我的意思是新坐标不会添加到轨道中。

这是我的更新代码：

```
<Folder id="movement">
  <name>Position</name>
  <Placemark id="known_mov">
    <name>Known Position - movement</name>
    <description>position according to GPS data for transmitted messages</description>
    <styleUrl>#multiTrack</styleUrl>
    <gx:Track id ="trans_pos_mov">
      <!-- UPDATES ADDED HERE -->
      </gx:Track>
  </Placemark> 
```

这是更新的代码：

```
<Create>
  <gx:Track targetId="trans_pos_mov">
    <when>12:56:25</when>
    <gx:coord>1 1 1</gx:coord>
  </gx:Track>
</Create> 
```

我在某处错过了一步吗？我没有在正确的位置调用 targetId 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:58:44.867

那应该行得通。您是否注意到在 id 之后、等号之前有一个空格？

```
id ="trans_pos_mov" 
```

这可以解释为什么您没有看到任何更新，id 属性将为空。

# c# - 比较两个自定义对象

> ID：11613380
> 
> 赞同：0
> 
> 时间：2012-07-23T13:21:22.543
> 
> 标签：c#, linq, dictionary, comparison, icomparable

```
public class Filter
{
    public int A { get; set; }
    public int B { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
} 
```

`Filter`根据有时一个，有时是所有属性比较两个对象的最佳方法是什么？我的意思是我有`Dictionary<Filter, string>`并且我需要找到所有`KeyValuePairs`与使用过的过滤器兼容的东西，例如：

```
var f1 = new Filter(){A = 1}
var f2 = new Filter(){A = 1, Start = DateTime.Now, End = DateTime.AddHour(2)}

var dict = new Dictionary<...>()
dict.Add(new Filter(){A = 1}, "asdf");
dict.Add(new Filter(){A = 1}, Start = DateTime.Now.AddHours(-1), "qwerty"); 
```

现在使用`f1`我想找到两者`KeyValuePairs`，但使用`f2`我只想找到第一个 KVP，因为`Start`在第二个对象中不满足条件`Start`+ `End`from `f2`（它在范围之外）

**编辑** 字典超出了这个问题的范围。它一定要是。我只需要比较机制。我不创建字典来做到这一点。我需要它来存储一些对我很重要的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:44:29.037

像这样的东西怎么样：

```
 IEnumerable<KeyValuePair<Filter, string>> DoIt(Dictionary<Filter, string> dict, Filter f)
    {
        return dict.Where
            (d => 
                (f.A == null || d.Key.A == f.A) && 
                (f.B == null || d.Key.B == f.B) && 
                (f.Start == null || f.Start < d.Key.Start) /* && Condition for End */);
    } 
```

我认为条件不是您想要的，但是您可能可以从这里弄清楚...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:24:10.997

你能用`IComparable` `interface`来实现你所需要的吗？

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.icomparable.aspx 。](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:24:35.910

如果你需要通过多个标准进行比较，一个`Dictionary<Filter, string>`是不够的。您可以`IEqualityComparer<Filter>`在实例化它时提供自定义，但它只允许您定义一个比较标准。

字典的重点是允许通过某个键进行快速查找，如果您希望更改您的键，您将无法从中受益。

您可以：

1.  为您计划使用的每个标准创建一个新的字典实例，并通过适当的`IEqualityComparer<Filter>`实现，或者

2.  使用一个普通的`List<Tuple<Filter, string>>`，然后使用过滤它`IEnumerable.Where`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:26:02.437

第一的。您不能为此使用字典。只有当您有一种比较键的方法时，字典才有效。那是通过 GetHashCode 和 Equals 覆盖所述关键对象。

如果你想比较两个对象，你可以实现一个[IComparer](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.compare%28v=vs.100%29.aspx)类，它有比较不同属性的参数。

# java - 哪个更快？List.contains() 或 Map.containsKey()

> ID：11613382
> 
> 赞同：33
> 
> 时间：2012-07-23T13:21:40.053
> 
> 标签：java, list, collections, map

我正在编写一个算法，在其中寻找成对的值，当它们相加时会产生我正在寻找的另一个值。

我发现使用 a`Map`可以从 O(n²) 加速我的算法。后来我意识到我并没有真正使用我的值中包含的值，`Map`所以一个`List`就足够了。

我在 Google 上进行了强力搜索，但在我的问题标题中没有找到有关这些方法的渐近运行时间的任何信息。

你能指出我应该在哪里寻找这些信息吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-23T13:23:52.323

> 后来我意识到我并没有真正使用我的值中包含的值，`Map`所以一个`List`就足够了。

`Map`不仅仅是键值对的列表，它是从键到值的唯一映射。因此，当您从 更改为`Map`时`List`，您将允许以前不允许的重复项。另一方面， a`Set`完全是 a`Map`没有值。所以考虑使用`HashSet`.

至于搜索的复杂性：

`list.contains`是 O(n)，`hashSet.contains`是 O(1)，`treeSet.contains`是 O(log n)。

有关 now `HashMap`works 的一般信息，请在谷歌搜索“哈希表”。对于`TreeMap`，谷歌“二叉树”或类似的。维基百科在这些主题上有很好的条目。

但是，要小心避免上课`Hashtable`。它是现代图书馆中的一件考古文物。对于您的情况`HashSet`可能是最好的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T13:40:55.677

`Map`并且`List`是接口，因此没有关于它们的实现和性能的信息。但是，如果您使用最新的实现（`LinkedList`或`ArrayList`for`List`和`HashMap`for `Map`），`contains()`在最坏的情况下，该方法必须遍历整个列表，并将您的元素与每个条目进行比较。这是一个 O(n) 操作。

如果使用 an `HashMap`，则实现完全不同：`HashMap`包含一个数组，其中的条目比其中的元素多（实际上，对于映射中的 n 个元素，数组大小在 4n/3 到 3n/2 之间）。它计算密钥的哈希值，它是一个 int，并将其包装在 0 和您的数组大小之间（假设这个数字是`i`）。然后它将元素放在`i`数组的索引处（或者`i+1`，`i+2`......如果先前的索引已经被占用）。因此，当您使用 来检查键是否存在时`containsKey`，它将重新计算散列和`i`值，并检查`i`, `i+1`... 索引，直到找到一个空数组单元格。理论上，你可以有一个 O(n) 最坏的情况，如果数组几乎满了，所有的键都几乎相同`i`值，但具有良好的散列函数，你有常数时间`contains`和`get`函数。（但是，如果您不需要调整数组的大小，那么添加元素会很快，这**真的**很慢 - 我认为您需要重新计算每个键的索引）。

因此，如果您需要检查集合中的键外观，并且不需要保持顺序（有一个`SortedHashMap`用于那个，但我不知道它的性能），那么映射确实更快，但它会占用更多内存。

此外，如果您不需要键值，您可以使用 a `HashSet`（在内部与 a 相同`HashMap`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-21T16:49:10.390

HashSet 似乎更快：

*   哈希图：267
*   数组列表：2183
*   哈希集：57

另请注意， .contains() 通常不需要在 HashMap 和 HashSet 上调用，但我将其保留在代码中以更准确地回答您的问题：

```
 long t = System.currentTimeMillis();
    HashMap<String, Boolean> map = new HashMap<>();
    for (int i = 0; i < 10000; i++) {
        String s = (Math.random() * 100) + "";
        if (!map.containsKey(s)) {
            map.put(s, true);
        }
    }
    System.out.println("HashMap: " + (System.currentTimeMillis() - t));

    t = System.currentTimeMillis();
    ArrayList<String> list = new ArrayList<>();
    for (int i = 0; i < 10000; i++) {
        String s = (Math.random() * 100) + "";
        if (!list.contains(s)) {
            list.add(s);
        }
    }
    System.out.println("ArrayList: " + (System.currentTimeMillis() - t));

    t = System.currentTimeMillis();
    HashSet<String> set = new HashSet<>();
    for (int i = 0; i < 10000; i++) {
        String s = (Math.random() * 100) + "";
        if (!set.contains(s)) {
            set.add(s);
        }
    }
    System.out.println("HashSet: " + (System.currentTimeMillis() - t)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:25:10.873

Map.containsKey() 考虑到您使用的是 HashMap，因为在 HashMap 中的搜索是在 O(1) 中完成的。

List.contains() 通常应该采用顺序搜索或二分搜索，因此复杂度至少为 O(log n)

# javascript - inner.html 中的 JavaScript 函数调用

> ID：11613386
> 
> 赞同：1
> 
> 时间：2012-07-23T13:21:50.470
> 
> 标签：javascript, cordova, innerhtml

我有这个带有外部函数调用和局部变量的 html 代码：

```
document.getElementById("data").innerHTML='<a href="#" onClick="cordova.exec("ChildBrowserCommand.showWebPage", "'+vivijesolo+'");"><img src="'+vivifoto+'" on;></a>'; 
```

问题是，它看到了变量，一切都很好，但函数 cordova.exec 不能执行。

为什么？？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:26:07.530

`"`正在破坏`onClick`属性。它只会看到`onClick="cordova.exec("`然后停止，因为引用结束了它

尝试这个

```
var elem = document.getElementById("data");
elem.innerHTML = '<a href="#"><img src="'+vivifoto+'"></a>';

elem.firstChild.onclick = function() {
    cordova.exec( "ChildBrowserCommand.showWebPage", vivijesolo );
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:36:18.643

我认为这里还有第二个问题。我不认为您可以通过这种方式创建您的活动。看看这个问题：

[是否可以在不破坏后代事件侦听器的情况下附加到 innerHTML？](https://stackoverflow.com/questions/595808/is-it-possible-to-append-to-innerhtml-without-destroying-descendants-onclick-fu)

简单地使用 innerHTML 恕我直言不会正确设置事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:25:57.180

您必须正确编码您的事件处理程序：

```
onClick="cordova.exec(&quot;ChildBrowserCommand.showWebPage&quot;,&quot;'+vivijesolo+'&quot);" 
```

# spring-security - spring security 3.1-使用上下文 url 重定向到登录页面

> ID：11613389
> 
> 赞同：2
> 
> 时间：2012-07-23T13:22:07.243
> 
> 标签：spring-security

我正在使用带有名称空间配置的 spring security3.1。如果我在浏览器中输入到上下文路径的 URL，而不是登录页面的完整 URL，我想重定向到登录页面。

例如，`http://xxx:8080/context/`改为`http://xxx:8080/context/login.html`

我能够显示带有完整 URL 的登录页面`http://localhost:8080/context/login.html`

我尝试了以下代码：

```
<http auto-config='true' authentication-manager-ref="authentication-manager" entry-point-ref="authenticationEntryPoint">

<beans:bean id="authenticationEntryPoint"      class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
 <beans:property name="loginFormUrl" value="/login.html"/>
 <beans:property name="forceHttps" value="true"/>
</beans:bean>

.... 
```

我添加了一个`LoginUrlAuthenticationEntryPoint`条目以重定向到登录页面，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:02:00.870

如果您添加一些安全约束，标准配置将重定向到登录页面。所以使用

```
<http use-expressions="true">
    <intercept-url pattern="/**" access="isAuthenticated()" />
    <form-login />
</http> 
```

如果您请求任何 URL，您将被自动重定向到登录页面。您无需配置`AuthenticationEntryPoint`.

在尝试自定义事物之前，请确保您可以获得基本示例。

此外，您的配置无效 - 您只发布了`http`块的开始元素。如果您仍然无法使其工作，请发布重现您的问题的完整配置。

# visual-studio-2012 - 在 VS 2012 中订购测试

> ID：11613400
> 
> 赞同：0
> 
> 时间：2012-07-23T13:22:50.283
> 
> 标签：visual-studio-2012

有没有办法在不使用测试管理器的情况下订购测试？我需要有序运行，而不是有序显示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:41:11.167

查看 Ordered Test 项目。它是一种包含其他测试的测试类型，并将按照您指定的顺序执行它们：

*   [http://msdn.microsoft.com/en-us/library/dd286704(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/dd286704(v=vs.110).aspx)
*   [http://msdn.microsoft.com/en-us/library/ms182631(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms182631(v=vs.110).aspx)

最好的，克里斯

# jsp - 如何在显示标签中声明UID的运行时值？

> ID：11613408
> 
> 赞同：0
> 
> 时间：2012-07-23T13:23:10.270
> 
> 标签：jsp, jsp-tags, displaytag

我对三个不同的模块使用相同的jsp。因为这三个模块包含近 10 到 12 列常见。所以我对三个模块使用相同的jsp。我的问题是在显示器内部使用“KeepStatus = true”：表。每个模块都有唯一的 UID 名称（因为 KeepStatus 属性），所以我声明了运行时值。它工作正常，但在一个模块中，值呈现在表格的顶部。其他模块没有问题。

## 文件名：- ratingElementInstances_All.jsp

```
<display:table name="${disputeForm.ratingInstanceList}" uid="${diplayTableUID}" sort="list" keepStatus="true"
    requestURI="${diplayTableReqURI}" excludedParams="method" decorator="com.ford.mpl.superg.decorator.DisputeRatingInstanceTableDecorator">
    <%@include file="/jsp/include/displaytag.jsp"%>
    <ui:resultsPerPage />
    <logic:notEqual name="disableActions" value="Y">
        <display:column property="actions" title="${Actions}" sortable="false" class="textAlignC inlineMenuTriggerWrapper" />
        <display:column property="checkbox" title="${disputeInstanceHeaderCheckbox}" sortable="false" />
    </logic:notEqual>
    <c:if test="${diplayTableUID.disputeNumber != null}">
        <display:column property="disputeNumber" title="${disputeNumberForLabel}" sortable="true"/>
    </c:if>
    <display:column property="disputeAnalystCDSID" title="${WQAnalyst}" sortable="true"/>
    <display:column title="${Status}" sortable="true">
        <c:if test="${diplayTableUID.disputeStatus != null}">
            <bean:message bundle="i18n" key="${diplayTableUID.disputeStatus}" />
        </c:if>
    </display:column>               
    <display:column property="disputeLastUpdatedCSDID" title="${LastUpdatedCDSID}" sortable="true"/>
    <display:column property="disputeLastUpdateDate" title="${LastUpdatedDate}" sortable="true"/>
</display:table> 
```

## 第一个 Jsp 页面：

```
<bean:define id="diplayTableUID" name="processRatingDisputeForm"/> 
<%@include  file="ratingElementInstances_All.jsp"%> 
```

## 第二个Jsp页面：

```
<bean:define id="diplayTableUID" name="returnPointsRatingDisputeForm"/> 
<%@include  file="ratingElementInstances_All.jsp"%> 
```

## 第三个Jsp页面：

```
<bean:define id="diplayTableUID" name="submitRatingDisputeForm"/>
<%@include  file="ratingElementInstances_All.jsp"%> 
```

为什么我在 bean 标签中使用整个表单的意思。我需要一些值来通过对象。例如，

```
<c:if test="${diplayTableUID.disputeNumber != null}"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:45:46.030

如果我理解正确，您希望能够访问当前的“行”对象，但由于它具有动态 ID，因此您被卡住了。以下应该有效：

```
<c:if test="${pageScope[diplayTableUID].disputeNumber != null}"> 
```

您还可以在开始标记之后定义一个别名，并在以下之后使用此别名：

```
<c:set var="currentRow" value="${pageScope[diplayTableUID]"/>
...
<c:if test="${currentRow.disputeNumber != null}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T08:15:00.720

用于`'htmlId'`客户端表的 id。

# android - 从片段内部的 ActionBar 中检索动作布局

> ID：11613410
> 
> 赞同：2
> 
> 时间：2012-07-23T13:23:16.133
> 
> 标签：android

如何从片段中检索 ActionBar 内项目的操作布局。我尝试通过 getActivity().findViewById 和 getActivity().findViewById(MenuItem).findViewById(ActionLayout) 直接访问布局。

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    MenuItem commentMenuItem = (MenuItem) getActivity().findViewById(R.id.menu_item_comment);
    View actionView = commentMenuItem.getActionView();
    TextView commentTextView = (TextView) 
            actionView.findViewById(R.id.action_bar_comment_item_textview);

    commentTextView.setText(article.getArticle_comment_count());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:43:59.193

调用`getActionView()`与`MenuItem`该动作布局对应的。你`MenuItem`从你得到`findItem()` 的`Menu`，你得到的`onCreateOptionsMenu()`。

# android - 如何在 Android 上获取 FB 聊天的 API 密钥和会话密钥和会话密钥

> ID：11613411
> 
> 赞同：0
> 
> 时间：2012-07-23T13:23:24.120
> 
> 标签：android, facebook-chat, asmack

我正在尝试在 android 中为 Facebook 构建一个聊天应用程序。我正在使用**X-Facebook 平台**身份验证方法。

如何获取*api key* & *session key & session secretkey*。我在一个教程中读到，我们通过以开发人员身份登录并创建一个新应用程序从 FB 获得它。有人可以详细解释一下吗？

我已经按照本教程[[https://stackoverflow.com/questions/8532328/problems-with-connecting-to-facebook-xmmp-md5-digest]](https://stackoverflow.com/questions/8532328/problems-with-connecting-to-facebook-xmmp-md5-digest) [1](https://stackoverflow.com/questions/8532328/problems-with-connecting-to-facebook-xmmp-md5-digest)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:00:50.740

我在这个 FB Xmpp 客户端上工作过。我为此使用了 smack 库，它对我有用，你必须使用[SASLXFacebookPlatformMechanism.java：](https://stackoverflow.com/questions/5317329/xmpp-with-java-asmack-library-supporting-x-facebook-platform/5843759#5843759)在这里查看我的问题[如何为 facebook 创建 XMPP 聊天客户端？](https://stackoverflow.com/questions/11045241/how-to-create-xmpp-chat-client-for-facebook). 它解决了你的问题..

# java - 如果包含空格的参数连接，但不使用 setString，则获取 resultSet

> ID：11613418
> 
> 赞同：1
> 
> 时间：2012-07-23T13:23:44.650
> 
> 标签：java, sql-server, jdbc, jtds

我有这段代码，带有准备好的语句。我知道查询是多余的。参数`id`是一个字符串`<space>413530`（“413530”）。请注意前面的空格字符。

```
String query = "SELECT RSCode as id FROM Customer WHERE RSCode=?";

PreparedStatement newPrepStatement = connection
        .prepareStatement(query);
newPrepStatement.setString(1, id);
resultSet1 = newPrepStatement.executeQuery();

while (resultSet1.next()) {
    System.out.println("Got a result set.");
    logindata.add(resultSet1.getString("id"));
} 
```

执行此查询后，我没有得到任何结果。

现在，如果我使用相同的语句并将参数附加为字符串的一部分，如下所示：

```
String query = "SELECT RSCode as id FROM Customer WHERE RSCode=" + id;

PreparedStatement newPrepStatement = connection
        .prepareStatement(query);
resultSet1 = newPrepStatement.executeQuery();

while (resultSet1.next()) {
    System.out.println("Got a result set.");
    logindata.add(resultSet1.getString("id"));
} 
```

在执行这个准备好的语句后，我得到了一个结果。同样也适用于`java.sql.statement`

我想知道为什么驱动程序忽略了第二段代码中的空格，但在第一部分有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:25:22.360

如果您使用`setString`该参数将被绑定为导致此 SQL 的字符串（将绑定参数视为 SQL 字符串）：

```
SELECT RSCode as id FROM Customer WHERE RSCode=' 0123'; 
```

如果您使用连接，则使用的 SQL 将是（将连接的值视为整数，因为作为 SQL 语法的一部分，空格将被忽略）：

```
SELECT RSCode as id FROM Customer WHERE RSCode=<space>0123; 
```

在这种情况下，我建议将其转换为`int`or`long`或任何它，并将其与正确的类型绑定。用`setInt()`或`setLong()`。

如果您的字段是一个字符串，您可以首先使用例如：

```
String normalizedValue = String.trim(value);
newPrepStatement.setString(1, normalizedValue); 
```

甚至直接在 SQL 中，例如：

```
SELECT RSCode as id FROM Customer WHERE RSCode=TRIM(?); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:32:12.450

在场景 1 中，查询将如下所示

“从客户那里选择 RSCode 作为 ID，其中 RSCode='413530'”

在场景 2 中，查询将如下所示

“从客户那里选择 RSCode 作为 id，其中 RSCode=413530”

# ipad - 为什么我的 UISearchDisplayController 不使用我的自定义 tableViewCell？

> ID：11613419
> 
> 赞同：0
> 
> 时间：2012-07-23T13:23:45.447
> 
> 标签：ipad, uitableview, uisearchbar, custom-cell, uisearchbardisplaycontrol

我有一个使用拆分视图控制器的 iPad 应用程序。在主视图中，我使用情节提要中定义的自定义表格单元格显示了一个项目列表。

单元格按照我在 Xcode 中选择的深色背景显示。

我正在使用一个`UISearchBar`和`UISearchDisplayController`。

当我开始搜索时，列表变为标准的白色表格单元格。

如何让 SearchDisplayController 使用我的自定义单元格？

当我在搜索字段中键入时，回调会更新过滤结果列表：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller
                         shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterAvailableChannelsForSearchText:searchString scope:[[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];
    [self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    return YES;
} 
```

我的表格视图处理使用它来呈现完整列表或过滤列表。CellIdentifier 与故事板中单元格的标识符匹配：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == self.searchDisplayController.searchResultsTableView)
        return [self.filteredAvailableChannel count];
    else
        return [[self availableChannelList] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"AvailableChannelCell";
    FVAvailableChannelCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    FVChannel *channel = nil;
    int row = [indexPath row];
    if (tableView == self.searchDisplayController.searchResultsTableView)
        channel = [self.filteredAvailableChannel objectAtIndex:row];
    else
        channel = [[self availableChannelList] objectAtIndex:row];

    cell.idLabel.text = channel.channelID;
    cell.nameLabel.text = channel.channelName;
    cell.unitLabel.text = channel.unitName;

    return cell;
} 
```

为什么我的 searchDisplayController 不使用我的自定义单元格？

**2012 年 7 月 31 日更新**：

在检查了所有情节提要的连接（似乎是正确的）之后，我注意到了一些东西……</p>

我可以看到我实际上正在**获取**一个自定义单元格 - 它**看起来**就像一个标准单元格。 

在我修好之后，`tableView:heightForRowAtIndexPath:`我注意到了一些事情。当我选择一个单元格时，我可以看到自定义单元格在那里，但由于它似乎忽略了我的自定义单元格的背景颜色，我将我的自定义白色文本放在标准白色背景之上，使其看起来像空单元格。

自定义单元类中的断点`initWithStyle:reuseIdentifier:`永远不会被击中，所以有些东西不在那里。  

任何指针：

1.  在 SearchResultsController 中的单元格上获取自定义背景颜色时缺少什么？
2.  为什么我的自定义单元格的 initWithStyle 没有被命中？它被设置为故事板中单元格的类。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T19:02:16.767

Apple 开发者论坛上的反馈以及以下帖子很有帮助：

[如何自定义 UITableViewCell 的背景颜色？](https://stackoverflow.com/a/1220985/143136)

简而言之，覆盖`tableView:willDisplayCell:`，您可以适当地设置背景颜色。

# wcf - 找不到“Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityToken”令牌的令牌身份验证器

> ID：11613420
> 
> 赞同：1
> 
> 时间：2012-07-23T13:23:46.977
> 
> 标签：wcf, azure, wif

我正在尝试使用 WS2007HttpRelayBinding 并将端到端安全模式设置为 TransportWithMessageCredential。我使用 IssuedToken 作为凭证​​类型。我从调用服务的 ADFS 2.0 获取令牌我在本地 wcf 跟踪日志中得到以下内容

找不到“Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityToken”令牌类型的令牌身份验证器。根据当前的安全设置，不能接受该类型的令牌。

更新：
这就是我配置服务主机的方式

```
ServiceConfiguration serviceConfiguration = new ServiceConfiguration();

            serviceConfiguration.ServiceCertificate = GetServiceCertificateWithPrivateKey();

            serviceConfiguration.CertificateValidationMode = X509CertificateValidationMode.None;

            serviceConfiguration.IssuerNameRegistry = new X509IssuerNameRegistry("localhost");

            serviceConfiguration.SaveBootstrapTokens = true;

            serviceConfiguration.SecurityTokenHandlers.AddOrReplace(new Saml2SecurityTokenHandler());

            serviceConfiguration.SecurityTokenHandlers.Configuration.AudienceRestriction.AllowedAudienceUris.Add(new Uri("https://mynamespace.servicebus.windows.net/Service1/"));

            FederatedServiceCredentials.ConfigureServiceHost(host, serviceConfiguration);

            host.Open(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:28:13.910

您能否验证是否添加了 Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityTokenHandler

```
 <securityTokenHandlers>
    <add type="Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityTokenHandler" />
  </securityTokenHandlers> 
```

编辑：并且还要确保验证证书配置。

编辑：也许这也将有助于[MSDN WCF 论坛](http://social.msdn.microsoft.com/Forums/en/wcf/thread/e8b1db31-1c2e-42eb-850f-4d0b34340ec6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:33:49.133

Alexey 的回答非常适合 web.config/app.config 修改。除此之外，您还可以在代码中配置令牌处理程序（示例来自~~[如何：使用用户名和密码对受 ACS 保护的 WCF 服务进行身份验证文章](http://msdn.microsoft.com/en-us/library/windowsazure/gg185954.aspx)~~ [(docs.microsoft.com) - 如何：使用用户名和密码进行身份验证](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/how-to-authenticate-with-a-user-name-and-password)):

```
//
// This must be called after all WCF settings are set on the service host so the
// Windows Identity Foundation token handlers can pick up the relevant settings.
//
ServiceConfiguration serviceConfiguration = new ServiceConfiguration();
serviceConfiguration.CertificateValidationMode = X509CertificateValidationMode.None;

// Accept ACS signing certificate as Issuer.
serviceConfiguration.IssuerNameRegistry = new X509IssuerNameRegistry( GetAcsSigningCertificate().SubjectName.Name );

// Add the SAML 2.0 token handler.
serviceConfiguration.SecurityTokenHandlers.AddOrReplace( new Saml2SecurityTokenHandler() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:40:50.033

绑定安全元素设置为查找 SAML 1.1 令牌。在构建“CustomBinding”元素后，我将以下代码添加到服务器

```
IssuedSecurityTokenParameters issuedTokenParameters = 
            myBinding.Elements.Find<TransportSecurityBindingElement>().EndpointSupportingTokenParameters.Endorsing[0] as IssuedSecurityTokenParameters;
        issuedTokenParameters.TokenType = "http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0"; 
```

# jquery - H3 的内容作为 H3 的 ID

> ID：11613435
> 
> 赞同：3
> 
> 时间：2012-07-23T13:24:28.960
> 
> 标签：jquery, html

我需要获取 an 的内容`<h3></h3>`，然后将内容小写并删除空格（用 - 或 _ 替换它们），然后将它们注入`<h3>`.

所以，例如...

```
<li class="widget-first-list"><h3>About This Stuff</h3></li>
<li class="widget-first-list"><h3 id="about-this-stuff">About This Stuff</h3> 
```

对于页面上的大量 h3，这应该存在，因此它需要在某处包含“$this”。

希望这是有道理的——我对 jQuery 没问题，但这给我带来了一些问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T13:27:57.337

由于您指定了 jQuery，因此您可以：

```
$("h3").each(function() {
    var me = $(this);
    me.attr("id",me.text().toLowerCase().replace(/[^a-z0-9-]/g,'-').replace(/--+/g,'-'));
}); 
```

这会将所有非字母数字字符替换为`-`，然后去除多个连续`-`字符。

在普通的 JS 中（效率更高）：

```
(function() {
    var tags = document.getElementsByTagName("h3"), l = tags.length, i;
    for( i=0; i<l; i++) {
        tags[i].id = tags[i].firstChild.nodeValue.toLowerCase().replace(/[^a-z0-9-]/g,'-').replace(/--+/g,'-');
    }
})(); 
```

* * *

更好的是，检查重复项：

```
(function() {
    var tags = document.getElementsByTagName("h3"), l = tags.length, i, newid, n;
    for( i=0; i<l; i++) {
        newid = tags[i].firstChild.nodeValue.toLowerCase().replace(/[^a-z0-9-]/g,'-').replace(/--+/g,'-');
        if( document.getElementById(newid)) {
            n = 1;
            do {n++;}
            while(document.getElementById(newid+'-'+n));
            newid += '-'+n;
        }
        tags[i].id = newid;
    }
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:30:41.587

一个办法：

```
$("h3").each(function() {

    var content = $(this).html().replace(/ /g,'_').toLowerCase();
    $(this).attr("id",content);

}); 
```

# sql - SQL utl_raw.cast_to_raw XML 单引号分隔符

> ID：11613437
> 
> 赞同：0
> 
> 时间：2012-07-23T13:24:29.333
> 
> 标签：sql, xml, delimiter

我正在尝试使用 utl_raw.cas_to_raw 将一些 XML 数据插入到 blob 列中。

但是我的 XML 包含一个单引号（作为查询的一部分），这会阻止我将该行插入 XML。

查询是这样的：

```
INSERT INTO ABCD 
VALUES (utl_raw.cast_to_raw('<?xml version="1.0" encoding="UTF-8"?><resource name="ID" ><value Type="multiple" query="select role_no, name from mytable where name='A'"/></resource>'),'C2','C3'); 
```

part- **name='A'**引起了问题。请帮我解决一下这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:26:06.057

您可以`'`使用 2 个单引号 ( `''`) 或反斜杠引号 ( ) 转义引号 ( `\'`)

# c# - 当我们在数据合约的对象中有不同的数据成员时，如何执行 for 语句？

> ID：11613443
> 
> 赞同：1
> 
> 时间：2012-07-23T13:24:56.147
> 
> 标签：c#, wcf

我创建了一个包含请求和响应数据协定的 API。此 API 将响应作为注释行获取。我有一个包含数据成员的请求数据

*   卡号
*   方法ID
*   noteline1, noteline2, ..., noteline18

我有一个响应数据合同，其中包含 18 个数据成员，如 noteline1、noteline2、...、noteline18。代码如下：

```
public CBNotesInqAndMaintResponse CBNote(CBNotesInqAndMaintRequest request)
{
    CBNotesInqAndMaintResponse response;
    try
    {
        var processCardBaseEnquiry = new CBNotesInqAndMaint();
        request.methodID = "01";
        response = processCardBaseEnquiry.Execute(request, clientIpAddress);
        processCardBaseEnquiry = null;
        return response;
    }
    catch(Exception ex){}

    if (response != null)
    {
        if (response.noteLine1 != null || response.noteLine1 != "")
        {
            request.methodID = "02";
            request.noteLine1 = response.noteLine1;
            processCardBaseEnquiry.Execute(request, clientIpAddress);
        }
        else if (response.noteLine2 != null || response.noteLine2 != "")
        {
            request.methodID = "02";
            response.noteLine2 = response.noteLine2;
            processCardBaseEnquiry.Execute(request, clientIpAddress);
        }

    // now I want to assign values to the request data from the response 
    // that I have received with methodID="02" and again execute the 
    // service to return the desired response. 

    ...
} 
```

我想在 for 循环的帮助下做到这一点，因为它应该减少代码行。我将如何通过分配注释文本的值来使用 for 循环

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:31:15.860

类似的东西？

```
//----------------------
//Response class
public class Responce
{
    List<string> MyData {get;set;}

    public Response()
    {
        MyData = new List<string>();
    }
}

//----------------------
//create response
var response = Response();
MyData.Add("result 1");
MyData.Add("result 2");

//----------------------
//and then later when you process it
var data = responce.MyData
foreach(string line in data)
{
    if(String.IsNullOrEmpty(line)
        continue;

    //do your processing
} 
```

# pdo - 更新 PDO 中重复条目的 blob

> ID：11613444
> 
> 赞同：0
> 
> 时间：2012-07-23T13:24:58.453
> 
> 标签：pdo, duplicates, blob

我有一个 MySQL 表，其中我将一系列应用程序图标（各种分辨率）存储为 blob 字段 - 每个表行标识一个应用程序和六个图标图像。我的 SQL 语句是这样的

```
INSERT INTO `appicons` (apid,apd16,apd57,apd72,apd114,apd128,apd144) 
  VALUES (:a,:b,:c,:d,:e,:f,:g); 
```

这工作正常。但鉴于每个`appid`都是独一无二的，我需要考虑更新应用程序图标的需要。所以我尝试了

```
INSERT INTO `appicons` (apid,apd16,apd57,apd72,apd114,apd128,apd144) 
  VALUES (:a,:b,:c,:d,:e,:f,:g) ON DUPLICATE KEY UPDATE apd16 = :bb; 
```

不用说在每种情况下都绑定适当的参数。但是，此更新不会将预期的 blob 数据添加到表中。相反，我在那个 blob 字段中得到一个 1 字节的条目。

正如我在这里需要做的那样，如何更新 blob 条目？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T14:02:35.397

简单的答案是——当将参数绑定到准备好的语句时，它们必须按顺序绑定——即使使用命名参数而不是 ?? 占位符。我一直以错误的顺序绑定更新位的参数。

# internationalization - Birt 国际化不起作用

> ID：11613450
> 
> 赞同：0
> 
> 时间：2012-07-23T13:25:15.013
> 
> 标签：internationalization, birt

这就是我所做的：我下载了 Birt Runtime 4.2。我部署了 WebViewerExample 并将我的报表设计添加到其中。

我创建了一些资源/属性文件并引用它们，如下所示：

![在此处输入图像描述](../Images/0e56ae1f4799701ee84eb26f5d0c3014.png)

然后我为报告中的图表标题选择了适当的键。

结果：在 Eclipse 中，键被列表顶部的资源文件中包含的值更改。在浏览器中，我的图表标题的默认值仍然显示...

我做了这里解释的一切[http://wiki.eclipse.org/BIRT/FAQ/Internationalization](http://wiki.eclipse.org/BIRT/FAQ/Internationalization)。我还尝试在 web.xml 中设置属性文件的路径：

```
 <!-- Resource location directory. Defaults to ${birt home} -->
    <context-param>
            <param-name>BIRT_RESOURCE_PATH</param-name>
            <param-value>resource/</param-value>
    </context-param> 
```

我尝试了不同的路径，例如 WebContent/resource 或绝对路径，都没有奏效。

我的语言环境设置了多次：在我放的 web.xml 中

```
<!-- Default locale setting.
-->
<context-param>
    <param-name>BIRT_VIEWER_LOCALE</param-name>
    <param-value>en-US</param-value>
</context-param> 
```

我还在 url 中放置了参数 __locale=en_US 以防万一它不起作用。但是标题不是用英文显示的，也没有使用我的任何属性文件。

我现在正在失去信心......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:53:30.150

终于改正了这个bug。问题的根源是资源的路径。

以下是如何做到这一点。如果您使用 Eclipse 并遇到与我相同的错误，请转到 Window > Preferences > Report Design > resource 并将资源文件夹更改为其中包含您的资源的文件夹（而不是 << Current Projet Folder >>）。

现在，参考你的基础资源文件（比如resources.properties，不是所有的语言，只是默认的，Birt会自己找到其他的resources_lang.properties等）。

你现在应该有这样的东西：（这里称为 birtText.properties 的资源文件）

![在此处输入图像描述](../Images/38aa9808fff80cd427bc1a8a4436e8f1.png)

如果报表设计器的版本与 Birt 运行时的版本不同，请小心。报表设计器将更改 report.design xml 源中的某些版本。您可能会遇到运行时问题。为避免这种情况，请检查旧 xml 和新 xml 之间的差异。并放回所有未链接到引用的新属性文件的所有内容（应该只有一组与链接有关的新行）。

编辑：只需将线路`<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.22" id="1">`恢复原状就足够了。

此错误来自 birt 报表设计器资源文件夹与 web.xml 中指定的默认资源路径不同的事实 - 由报表引擎使用（报表文件夹是默认的）。

希望这可以帮助。它解决了我的问题。

# c++ - 使用协议缓冲区连接 c# 和 c++

> ID：11613456
> 
> 赞同：2
> 
> 时间：2012-07-23T13:25:25.480
> 
> 标签：c++, .net, protocol-buffers, protobuf-net

我有一个用 c# 编写的大型解决方案，它使用 protobuf-net 库进行通信。我正在寻找编写一个 c++ 程序来与现有代码对话，并且我已经接近能够看到如何做到这一点。

这是计划：

1) 由于一切都是在 c# 中启动的，因此没有 .proto 文件。但是，我可以轻松编写一些从现有消息类 (GetProto) 中捕获 .proto 的代码。

2) 一些类型是非标准的，即它们是根据其他类型定义的：例如，bcl.DateTime 和 bcl.Decimal。使用此链接，我能够找到定义：[Protobuf-net - serializing .NET GUID - how to read this in C++?](https://stackoverflow.com/questions/2370090/protobuf-net-serializing-net-guid-how-to-read-this-in-c)

3）一旦我有了原型定义，我就可以运行谷歌代码来生成我的类，这需要一些额外的代码来处理非标准的东西。没有大碍。

**我目前唯一的问题是字典/地图的格式。**它们看起来像这样：

```
repeated Pair_Decimal_Int32 MyDict = 1 
```

我需要知道的是这种特殊类型是如何定义的。它当然与泛型相关联（取决于字典），所以也许有特殊的代码可以生成它？我不太清楚它在 protobuf-net 中的哪个位置处理这个问题，所以我正在寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:57:40.653

请注意，v2 中的 GetProto 是非常新实现的（如：几天前）并且可能有粗糙的边缘（它被标记为这样）。

对于日期时间，我建议考虑将它们公开为一种更简单的类型，以实现互操作 - 可能很长（进入时代）。字典只是键（字段 1）/值（字段 2）的重复版本。Decimal 在原始 protobuf 中也没有很好的表示；如果可能，请使用 long（按固定值缩放）或 double，IMO。

# ios - XMPPFramework - 更新配置文件昵称

> ID：11613460
> 
> 赞同：1
> 
> 时间：2012-07-23T13:25:49.647
> 
> 标签：ios, xmpp, xmppframework

我正在使用 XMPPFramework 来实现与 OpenFire 服务器通信的 jabber 客户端。到目前为止，一切都进行得很顺利。

但是现在我想更改我的个人资料的昵称，或者更确切地说是“displayName”，因为客户端从 XMPPUserCoreDataStorageObject 中检索它。

我的第一次尝试是使用 VCardTempModule 来更新我的 VCard，如下所示：

```
if (nickname) {
    [myVCard setNickname:nil];
    [myVCard setNickname:nickname];
}
[self.xmppvCardTempModule updateMyvCardTemp:myVCard]; 
```

似乎服务器已更新，因为客户端收到配置文件的 tempVCard 并带有更新的昵称：

```
RECV: <iq xmlns="jabber:client" type="result" from="myAccount@foo.com" to="myAccount@foo.com/564aa046"><vCard xmlns="vcard-temp"><PHOTO><BINVAL>{some binary image data}</BINVAL></PHOTO><NICKNAME>{my updated nickname}</NICKNAME></vCard></iq> 
```

但是，在其他客户端中找不到更新的昵称，而使用 XMPPVCardAvatar 模块可以很好地更新照片。

有谁知道，我可能做错了什么？

# java - spring-data-mongo - 可选查询参数？

> ID：11613464
> 
> 赞同：18
> 
> 时间：2012-07-23T13:25:59.920
> 
> 标签：java, spring, mongodb, spring-data, spring-data-mongodb

我将 spring-data mongo 与基于 JSON 的查询方法一起使用，并且不确定如何在搜索查询中允许可选参数。

例如 - 说我有以下功能

```
@Query("{ 'name' : {$regex : ?0, $options : 'i'}, 'createdDate' : {$gte : ?1, $lt : ?2 }} }")
List<MyItem> getItemsLikeNameByDateRange(String name, Date startDateRange, Date endDateRange); 
```

- 但我不想应用名称正则表达式匹配，或者如果将 NULL 值传递给方法，则不应用日期范围限制。

目前看来我可能必须使用 mongoTemplate 构建查询。

有没有其他选择 - 或者使用 mongoTemplate 是最好的选择？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-28T18:06:18.520

为了在布尔逻辑中实现这一点，我执行以下操作并转换为编程语言中可用的操作

```
:query != null -> field == :query
!(:query != null) || (field == :query)
(:query == null) || (field == :query) 
```

在普通的 SQL 中，这是这样完成的

```
where (null = :query) or (field = :query) 
```

在 MongoDB 中，这是通过 $where

```
{ $where: '?0 == null || this.field == ?0' } 
```

我们可以通过使用 Mongo Operations 来加快速度，*而不*是以牺牲一些可读性为代价构建函数的所有内容。不幸的是不起作用。

```
{ $or : [ { $where: '?0 == null' } , { field : ?0 } ] } 
```

所以你所拥有的是

```
@Query("{ $or : [ { $where: '?0 == null' } , { field : ?0 } ] }")
List<Something> findAll(String query, Pageable pageable); 
```

这可以进一步扩展以处理 in/all 子句的数组

```
@Query("{ $or : [ { $where: '?0.length == 0' } , { field : { $in : ?0 } } ] }")
List<Something> findAll(String query, Pageable pageable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-30T14:49:28.197

除了阿基米德的回答：
如果您需要匹配文档的计数，请替换`$where`为`$expr`.

```
@Query("{ $or : [ { $expr: { $eq: ['?0', 'null'] } } , { field : ?0 } ] }")
Page<Something> findAll(String query, Pageable pageable); 
```

# eclipse - CTRL+C / CTRL+V 在 Eclipse 中不起作用

> ID：11613468
> 
> 赞同：16
> 
> 时间：2012-07-23T13:26:06.143
> 
> 标签：eclipse, keyboard-shortcuts

这是一种非常奇怪的行为。我的**Juno Eclipse**中没有调用我的`Ctrl`+ `C`/ `Ctrl`+键盘快捷键。我知道它有点宽泛......但我真的迷路了。我使用的是 Ubuntu 12。这可能是操作系统配置问题吗？`V`

 *** * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T13:38:07.853

我在这里搜索了一下，发现了一个有趣的问题：正在调用我的`Ctrl`+ `C`/ `Ctrl`+命令，但是在错误的文件中！`V`我要解释一下：我正在编写两个不同的项目，其中两个项目都有同名的文件。当我打开两者并尝试在它们上写字时，Eclipse 会变得混乱并仅在其中一个中调用命令。我没有成功地从剪贴板**粘贴**，后来我在另一个文件中找到了**粘贴**的命令！很奇怪的问题。现在我想知道它可能是来自 Eclipse的**工作区错误。**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-26T08:13:42.797

在我的 Eclipse 上，只是`CTRL+C`一直不工作，尤其是当 Eclipse 运行很长时间时。然后`CTRL+V`只是粘贴以前复制的文本。

对我有用的是在 Eclipse Preferences (General -> Keys) 中取消绑定 CTRL+C。然后这个问题就再也没有出现过。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T19:52:26.250

您已经安装了 Android 开发工具并且遇到了[这个错误](http://code.google.com/p/android/issues/detail?id=34630)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-06T21:32:02.070

Dave 从 Eclipse 首选项中删除`CTRL`+的修复`C`（Window->Preferences->General->Keys : filter for ' `Ctrl`+ `C`', click 'Unbind Command'）也对我有用。谢谢戴夫！

“复制”功能继续有效，即使它未列在首选项列表中。

注意我在 Ubuntu 上运行带有 CDT 8.0.2.201202111 的 Eclipse 3.7.2。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T12:10:58.643

我刚刚遇到了完全相同的问题。

它是在安装 Swordfish 插件后开始的，所以我尝试卸载它，现在它恢复正常了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-21T12:33:39.920

在以下情况下也可能是这种情况：

`Ctrl+C` `Ctrl+P`您已分配关闭项目的快捷方式。这是完全可能的。我发现快捷方式方便且易于记忆。

但是快捷方式有一个副作用是使`Ctrl+C`复制的内容无效。

换句话说，恕我直言，日食确实允许我们使用`Ctrl+C` `Ctrl+P`，但管理不善……这对`Ctrl+C`.

我的意思是，如果您足够快地键入 C 和 P，它应该与仅键入 C 不同...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-20T15:50:43.243

当 CAPS LOCK 开启时，我遇到了这个问题。**

# python - python：读取和搜索 .txt 文件

> ID：11613480
> 
> 赞同：2
> 
> 时间：2012-07-23T13:27:12.733
> 
> 标签：python, file

所以我想我快到了。我正在搜索计算手数的扑克手历史 txt 文档。

在每手牌开始时，我们都有这样的语句“游戏#xxxxxx 开始”。

我正在寻找“开始”这个词。出现在每手牌的开始，所以我想计算所有出现的这种情况。

Hands_Played 总是返回为 0，所以我认为我正在寻找的词没有被正确拾取

任何想法我做错了什么？

```
Hands_Played = 0

def CountHands(Hands_Played):
    Hand_History_File = open("C:\xxxxx\blah_blah.txt", "r")
    data = Hand_History_File.read()
    print data
    print "Counting Hands..."
    for line in data:
        print "Loop" #Shows me that each line is being read
        if "starts." in Hand_History_File:
            Hands_Played = Hands_Played + 1
    return Hands_Played            

CountHands(Hands_Played)
print "Number of Hands Played: %s" % Hands_Played 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:28:20.703

**更新**：

您还需要将函数的返回值分配给变量，然后才能随后使用它：

```
CountHands(Hands_Played)
print "Number of Hands Played: %s" % Hands_Played 
```

应该

```
Hands_Played = CountHands(Hands_Played)
print "Number of Hands Played: %s" % Hands_Played 
```

否则，您永远不会收到计数，最终只会显示您在程序开始时设置的初始值 ( `0`)。

就此而言，除非您在函数调用之间保持计数，否则您实际上并不需要此函数的参数。只需在函数开始处本地创建 Hand_Played 变量，然后像现在一样返回它。你可以从你的函数头和你的调用中删除参数，你应该已经准备好了。

---*以前的，仍然适用。*

代替：

```
if "starts." in Hand_History_File: 
```

你可能想要

```
if "starts." in line: 
```

另外，完成后不要忘记显式关闭文件。即，在从函数返回`Hand_History_File.close()` *之前进行调用。*

更好的是，考虑使用该`with`构造来管理您的文件。当您完成它或遇到异常时，它将在块的末尾自动为您关闭文件。您还可以逐行处理文件并进一步简化代码。即，流线型版本，接近您的函数/代码的原始设计：

```
def CountHands():
    Hands_Played = 0
    with open(r"C:\xxxxx\blah_blah.txt") as Hand_History_File:
       for line in Hand_History_File:  # process file line-by-line
           if "starts." in line:
              Hands_Played +=  1
    return Hands_Played

Hands_Played = CountHands(Hands_Played)
print "Number of Hands Played: %s" % Hands_Played 
```

笔记：

我使用“原始”字符串（`r`路径前面有 ' '）来防止 Python 解释字符串中的某些字符组合。我不在`open`调用中使用“r”，因为它是打开文件时的默认值。我使用 `+=`运算符来缩短您的增量。当您离开以 . 开头的块时，您的文件将关闭`with`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:32:39.687

为什么不让 python 自己计算呢？

```
def CountHands(Hands_Played):
    with open("C:\xxxxx\blah_blah.txt", "r") as Hand_History_File:
        Hands_Played += Hand_History_File.read().count("starts.")
    return Hands_Played 
```

您在代码中做错的是：

1.  你应该使用`if "starts." in Hand_History_File`，在这里你检查“开始”的存在。在您的文件句柄中，而不是在文件的内容中

2.  您使用与全局和参数名称相同的变量名称。因此，函数中修改的参数不是全局参数，只是它的副本。要更正此问题，请尝试打印您的`CountHands()`电话返回的内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T13:35:01.433

问题是您[没有正确使用范围。](https://stackoverflow.com/questions/146359/python-scope)问题是python`Hands_Played`将函数的输入和`Hands_Played`函数外部解释为不同的变量。看下面的代码：

```
>>>variable = 10
>>>def addOne(variable):
    variable += 1
    return variable

>>>variable
10
>>>addOne(variable)
11
>>>variable
10 
```

您可以通过替换`CountHands(Hands_Played)`语句来解决此问题`Hands_Played = CountHands(Hands_Played)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:33:55.460

这是您迭代文件的方式：

```
with open('workfile') as f:
    for line in f:
        print line,
        # do something 
```

# .htaccess - 子域重定向到文件夹而不更改 URL

> ID：11613481
> 
> 赞同：0
> 
> 时间：2012-07-23T13:27:17.210
> 
> 标签：.htaccess, configuration, subdomain

当访问 subdomain.domain.nl 我被转发到 domain.nl/subdomain 但是......我想要的不是更改 URL。

我的 htaccess 中有以下代码：

```
RewriteCond %{HTTP_HOST} ^subdomain\.domain\.nl$
RewriteRule ^ http://www.domain.nl/subdomain%{REQUEST_URI} [L] 
```

因此，当访问 subdomain.domain.nl 时，我希望被无形地转发到 www.domain.nl/subdomain 中名为 subdomain 的文件夹，但不更改 URL。

我在这里检查了几个主题，但仍然找不到适合我的问题的答案，有人吗？

亲切的问候， Twan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:44:44.023

当你的目标有一个`http://`or`https://`时`RewriteRule`，它假定你想要一个 302 重定向。因此它重定向浏览器并且浏览器的 URL 地址栏发生变化。

如果虚拟主机`subdomain.domain.nl`和`www.domain.nl`具有相同的文档根目录，那么您只需从目标中删除主机部分：

```
RewriteRule ^ /subdomain%{REQUEST_URI} [L] 
```

而且它不会重定向。否则，您可以尝试使用该`[P]`标志进行内部代理。

# android - Android 图像的 RSS 解析

> ID：11613482
> 
> 赞同：0
> 
> 时间：2012-07-23T13:27:18.863
> 
> 标签：android, image, rss

我想解析 RSS 数据，只提供图片链接；查看源：http://rss.feedsportal.com/c/32727/f/510259/index.rss 是 rss 的链接。

图像如

```
<description>Olimpiyat Oyunları’nda basketbol, şimdiye kadar ABD ile başlamış ve ABD ile bitmiştir. En büyük dominasyonu kurdukları da olur, başarısız...&lt;img width='1' height='1' src='http://rss.feedsportal.com/c/32727/f/510259/s/219c12d9/mf.gif' border='0'/&gt;&lt;div class='mf-viral'&gt;&lt;table border='0'&gt;&lt;tr&gt;&lt;td valign='middle'&gt;&lt;a href="http://share.feedsportal.com/viral/sendEmail.cfm?lang=en&amp;title=21%3A08+Sovyetlerin+zafer+gecesi&amp;link=http%3A%2F%2Fspor.milliyet.com.tr%2Fsovyetlerin-zafer-gecesi%2Fbasketbol%2Fspordetay%2F23.07.2012%2F1570693%2Fdefault.htm" target="_blank"&gt;&lt;img src="http://res3.feedsportal.com/images/emailthis2.gif" border="0" /&gt;&lt;/a&gt;&lt;/td&gt;&lt;td valign='middle'&gt;&lt;a href="http://res.feedsportal.com/viral/bookmark.cfm?title=21%3A08+Sovyetlerin+zafer+gecesi&amp;link=http%3A%2F%2Fspor.milliyet.com.tr%2Fsovyetlerin-zafer-gecesi%2Fbasketbol%2Fspordetay%2F23.07.2012%2F1570693%2Fdefault.htm" target="_blank"&gt;&lt;img src="http://res3.feedsportal.com/images/bookmark.gif" border="0" /&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;br/&gt;&lt;br/&gt;&lt;a href="http://da.feedsportal.com/r/139262466254/u/192/f/510259/c/32727/s/219c12d9/a2.htm"&gt;&lt;img src="http://da.feedsportal.com/r/139262466254/u/192/f/510259/c/32727/s/219c12d9/a2.img" border="0"/&gt;&lt;/a&gt;&lt;img width="1" height="1" src="http://pi.feedsportal.com/r/139262466254/u/192/f/510259/c/32727/s/219c12d9/a2t.img" border="0"/&gt;</description> 
```

我该如何解析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:10:10.420

也许我误解了你，但你可以试试

```
Html.fromHtml(img, new ImageGetter() {

@Override
public Drawable getDrawable(String source) {

 }
}, null); 
```

从解析 RSS 时获得的 Html 中检索图像。（来源是图像的路径）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:16:01.703

我想如果你在 webView 中显示描述节点数据，它会自动获取图像..

```
webView.loadData(here description node value, "text/html", null); 
```

# html - 为什么在 HTML5 支持 Geo Location 的情况下在移动应用中使用 PhoneGap？

> ID：11613483
> 
> 赞同：0
> 
> 时间：2012-07-23T13:27:34.490
> 
> 标签：html, geolocation, cordova

我目前正在开发一个需要用户当前位置并在浏览器中运行的移动应用程序。我进行了一些搜索，发现人们推荐 PhoneGap。我想知道为什么我不能使用浏览器的地理位置，因为大多数浏览器现在都支持 HMTL5 规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:35:21.660

Phonegap 提供的不仅仅是地理定位——例如对联系人、加速度计、相机等的访问。事实上，默认情况下，Phonegap 应用程序无论如何都使用 HTML5 地理定位 API，尽管您可以覆盖它以使用本机实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:41:56.033

好吧，您可以在移动应用程序中使用地理定位。人们建议使用phonegap，因为它可以比普通的网络应用程序对设备功能进行更多的控制。其中包括 PhoneGap API 支持的硬件特定功能，包括：

**地理位置**

**振动**

**加速度计**

**声音**

和更多..

此外，它还支持 7 个平台。您可以只掌握 html5、js 等创建跨平台应用程序。如果 phonegap 不支持任何内容，那么您可以使用本机插件来实现此目的。

# c# - C# 指向对象的指针

> ID：11613490
> 
> 赞同：2
> 
> 时间：2012-07-23T13:27:50.520
> 
> 标签：c#, pointers, observablecollection

这里有一个小故事。我有一个`(typeof(ObservableCollection<Area>))`绑定树视图的公共属性。我想更新树，但我不想重绘整个事物并丢失所选项目、节点的折叠/展开状态以及我忘记实现的任何其他内容。所以我想我需要更新集合中的区域。我注意到使用 FirstOrDefault 语句并将其设置为等于某些值实际上并不会更改可观察集合中的区域：

```
var areas = GetAreaInfo(); //Entity Framework query returns ObservableCollection<Area>
foreach (Area a in areas)
{
    var αrea = Areas.FirstOrDefault(α => α.Id == a.Id);
    if (αrea != null)
        αrea = a;  //αrea changes, but Area[0] which is supposed to be αrea doesn't
} 
```

**我可以获取对象的引用或指针，这样我就不必遍历可观察集合并使用索引吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:32:10.983

你实际上并没有做你认为你正在做的事情。在您的情况下，面积只是一个变量。当您设置 area = a 时，您正在重置 'area' 变量指向的位置，根本不会更改可观察的集合。

最好的办法是更新 area 的所有属性以匹配 a 的属性。编写 Clone 或 Copy 方法将属性从对象的一个​​实例复制到另一个实例通常很容易。您的另一个选择是从集合中删除 area 并添加 a ，但这可能会导致一些订购问题。

编辑：在您的实际问题上，是的，*可以*在 C# 中获取指针，但这是一个坏主意。编写将需要更多的工作，需要您将代码标记为不安全，并且将更加难以维护。

# ruby-on-rails - 当类似的工作已经在运行时，Ruby Resque 重新排队？

> ID：11613493
> 
> 赞同：1
> 
> 时间：2012-07-23T13:27:56.993
> 
> 标签：ruby-on-rails, ruby, asynchronous, queue, resque

所以我注意到[resque-lock](https://github.com/defunkt/resque-lock)是关于防止作业排队。但是，如果我希望我的队列被完全填满，但我想在特定情况被锁定时重新排队怎么办。澄清一下：因为我的队列由一堆主机组成（例如 google.com、yahoo.com、yahoo.com 和 apple.com），我不希望两个相同的主机在同时！我怎么做？我得到了resque-lock，但我认为这对解决这个问题没有帮助。

**例子：**

队列：

```
google.com
yahoo.com
apple.com
apple.com
stackoverflow.com 
```

工人：

*   2 名工人正在寻找工作并找到：google.com 和 yahoo.com（好的）
*   2 名工人正在寻找新工作并找到：apple.com 和 apple.com
*   不行，将第二个 apple.com 作业重新放入队列并继续

关于如何通过[resque](https://github.com/defunkt/resque)获得这种行为的任何想法？我的示例描述了 2 个工作人员的情况，但主要思想是，具有相同主机的两个作业不应该能够同时运行，无论工作人员的数量如何。不允许运行的作业应重新放入队列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:53:35.177

我为此制作了自己的 resque 插件，名为[resque::workers::lock](https://github.com/bartolsthoorn/resque-workers-lock)。

# javascript - 在javascript中获取客户端ID

> ID：11613495
> 
> 赞同：-4
> 
> 时间：2012-07-23T13:28:07.630
> 
> 标签：javascript, jquery

我正在尝试修复其他人的代码，并且在整个 javascript 中都有这样的行 -

```
var dataDiv = document.getElementById("ctl00_cpMain_tcMainTabs_tResBDetails_tcDetailTabs_tBDetail_bmrDetailDataDiv") 
```

首选语法是什么？

仅供参考，这是一个支持 jQuery 的 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:38:06.323

我们曾经使用但在迁移到 MVC 时变得多余的技巧是这样的，当您使用 jquery 时也更容易

```
var datadiv = '#<%= bmrDetailDataDiv.ClientID %>' 
```

然后你可以使用 jquery 来调用它

```
$(datadiv) 
```

如果您不需要在页面上的其他任何地方使用它，或者简化是

```
$('#<%= bmrDetailDataDiv.ClientID %>') 
```

您可以使用匹配标识符，但我个人认为它没有那么优雅

```
$("div[id$='_bmrDetailDataDiv']"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:39:28.540

我正在四处走动，猜测这是一个 ASP.NET 应用程序？这看起来像是服务器端生成的客户端 ID。

您可以尝试将其替换为以下内容：

```
var dataDiv = document.GetElementById("<%: [serverSideControlId].ClientID %>"); 
```

例如

```
var dataDiv = document.GetElementById("<%: Button1.ClientID %>"); 
```

或者，如果使用 jQuery：

```
var dataDiv = $("#<%: Button1.ClientID %>")[0]; 
```

# asp.net - 网站中的 Dotnet Nuke IIS 配置问题

> ID：11613501
> 
> 赞同：0
> 
> 时间：2012-07-23T13:28:21.993
> 
> 标签：asp.net, iis-7, dotnetnuke

我正在 IIS 7 中配置我的 DNN (6.0) 应用程序。

A）我现在已经完成了添加新网站并配置了应用程序池等，我的应用程序正在站点 -> TestDNN 上运行。

现在，问题是现在 B）我想在站点 -> 默认网站 -> TestDNN 上创建我的应用程序。

我试图创建 TestDNN 虚拟目录并将其转换为应用程序。我已将所有设置与 A) 匹配，但它不起作用并在页面上显示 404.0 错误。

我已经在 PortalAlias 表的数据库中添加了 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:55:01.837

我会确保目录上的安全性是正确的，并且您已通过正确设置的身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:32:01.507

我从你的问题中了解到：

1.  您在 IIS 中有一个 dnn 实例作为网站运行（例如[http://abc.com:12345](http://abc.com:12345)）
2.  您想重复使用相同的实例，以便从[http://abc.com/testdnn/访问](http://abc.com/testdnn/)

这是您如何做到这一点的方法。

1.  由于您已经在[http://abc.com:12345](http://abc.com:12345)有一个正在运行的实例，请以主机身份登录该站点。
2.  转到主机 > 门户（在 6.x 主机 > 站点管理或其他内容中）
3.  选择默认门户
4.  添加新别名[http://abc.com/testdnn/](http://abc.com/testdnn/)
5.  在 localhost 站点下创建一个新的虚拟目录 testdnn 并将其指向与您指向[http://abc.com:12345相同的位置](http://abc.com:12345)
6.  确保默认网站的应用程序池使用 asp.net 4.0
7.  重置 IIS
8.  尝试从浏览器访问您的网站：http: [//abc.com/testdnn/default.aspx](http://abc.com/testdnn/default.aspx)

最有可能的是，如果您正在执行上述所有步骤并且您获得了像上面提到的@condemypantsoff 那样的适当权限，那么您将毫无问题地运行它。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:46:54.360

转到控制面板>>程序和功能>>打开或关闭Windows功能

然后转到 Internet 信息服务 >> 万维网服务 >> 应用程序开发功能

之后检查 ASP.net 框并单击确定。

# android - 如何在 Android 的 WebView 中打开本地 PDF 文件？

> ID：11613505
> 
> 赞同：20
> 
> 时间：2012-07-23T13:28:35.993
> 
> 标签：android, pdf, webview

我想在 WebView 中打开本地（SD 卡）PDF 文件。

我已经尝试过了：

```
webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setPluginsEnabled(true);
webview.getSettings().setAllowFileAccess(true);
File file = new File(Environment.getExternalStorageDirectory() + "/test.pdf");

final Uri uri = Uri.fromFile(file);

webview.loadUrl(uri.toString()); 
```

但它仍然没有打开它，所以让我知道如何在 WebView 中打开 PDF？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-03-29T07:45:43.747

我知道，这个问题很老了。

但我真的很喜欢 Xamarin 使用 Mozilla 的 pdf.js 的方法。它适用于较旧的 Android 版本，您不需要特殊的 PDF 查看器应用程序，您可以轻松地*在*应用程序视图层次结构中显示 PDF。

为此使用 Git： [https ://mozilla.github.io/pdf.js/](https://mozilla.github.io/pdf.js/)

其他默认选项（如标准缩放）： [https ://github.com/mozilla/pdf.js/wiki/Viewer-options](https://github.com/mozilla/pdf.js/wiki/Viewer-options)

只需将 pdfjs 文件添加到您的资产目录：

[![在此处输入图像描述](../Images/e14eacd95d867288f303badd6139e14b.png)](https://i.stack.imgur.com/39j8H.png)

并通过以下方式调用它：

```
// Assuming you got your pdf file:
File file = new File(Environment.getExternalStorageDirectory() + "/test.pdf");

webview = (WebView) findViewById(R.id.webview);
WebSettings settings = webview.getSettings();
settings.setJavaScriptEnabled(true);
settings.setAllowFileAccessFromFileURLs(true);
settings.setAllowUniversalAccessFromFileURLs(true);
settings.setBuiltInZoomControls(true);
webview.setWebChromeClient(new WebChromeClient());
webview.loadUrl("file:///android_asset/pdfjs/web/viewer.html?file=" + file.getAbsolutePath() + "#zoom=page-width"); 
```

很酷的事情：如果你想减少功能/控件的数量。转到 Assets/pdfjs/web/viewer.html 文件并将某些控件标记为隐藏。和

```
style="display: none;" 
```

例如，如果您不喜欢右侧的工具栏：

```
<div id="toolbarViewerRight" style="display: none;">...</div> 
```

**更新**

> '不支持 URL 方案“文件”'

可能会出现在较新版本的 pdfjs 上。使用版本`1.8.188`不会出现此错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T09:02:42.760

As @Sameer replied in your comment above, the only solution to view PDF in webview is through Google Docs' online viewer which will render and send back a readable version to your app.

Previously discussed here

*   [Open PDF in a WebView](https://stackoverflow.com/questions/9434487/open-pdf-in-a-webview)
*   [Open a pdf file inside a webview.](https://stackoverflow.com/questions/4947591/open-a-pdf-file-inside-a-webview)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T13:51:16.060

你不能。使用 Intent，您可以在 Acrobat Reader 等外部查看器应用程序中打开 PDF：

```
try
{
 Intent intentUrl = new Intent(Intent.ACTION_VIEW);
 intentUrl.setDataAndType(uri, "application/pdf");
 intentUrl.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
 mActivity.startActivity(intentUrl);
}
catch (ActivityNotFoundException e)
{
 Toast.makeText(mActivity, "No PDF Viewer Installed", Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-22T06:50:09.790

在浏览了几篇帖子后，我在 Quora 上发现了[这个](http://qr.ae/TU1tO4)简单的答案，它几乎可以完成这项工作。以下是步骤：-

在您的 gradle 文件中添加此依赖项：

```
compile 'com.github.barteksc:android-pdf-viewer:2.0.3' 
```

**activity_main.xml**

```
 <com.github.barteksc.pdfviewer.PDFView
    android:id="@+id/pdfView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     /> 
```

**MainActivity.java**

```
package pdfviewer.pdfviewer;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import com.github.barteksc.pdfviewer.PDFView;
import com.github.barteksc.pdfviewer.listener.OnLoadCompleteListener;
import com.github.barteksc.pdfviewer.listener.OnPageChangeListener;
import com.github.barteksc.pdfviewer.scroll.DefaultScrollHandle;
import com.shockwave.pdfium.PdfDocument;

import java.util.List;

public class MainActivity extends Activity implements OnPageChangeListener,OnLoadCompleteListener{
    private static final String TAG = MainActivity.class.getSimpleName();
    public static final String SAMPLE_FILE = "sample_pdf.pdf";
    PDFView pdfView;
    Integer pageNumber = 0;
    String pdfFileName;

    @Override    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        pdfView= (PDFView)findViewById(R.id.pdfView);
        displayFromAsset(SAMPLE_FILE);
    }

    private void displayFromAsset(String assetFileName) {
        pdfFileName = assetFileName;

        pdfView.fromAsset(SAMPLE_FILE)
                .defaultPage(pageNumber)
                .enableSwipe(true)

                .swipeHorizontal(false)
                .onPageChange(this)
                .enableAnnotationRendering(true)
                .onLoad(this)
                .scrollHandle(new DefaultScrollHandle(this))
                .load();
    }

    @Override    public void onPageChanged(int page, int pageCount) {
        pageNumber = page;
        setTitle(String.format("%s %s / %s", pdfFileName, page + 1, pageCount));
    }

    @Override    public void loadComplete(int nbPages) {
        PdfDocument.Meta meta = pdfView.getDocumentMeta();
        printBookmarksTree(pdfView.getTableOfContents(), "-");

    }

    public void printBookmarksTree(List<PdfDocument.Bookmark> tree, String sep) {
        for (PdfDocument.Bookmark b : tree) {

            Log.e(TAG, String.format("%s %s, p %d", sep, b.getTitle(), b.getPageIdx()));

            if (b.hasChildren()) {
                printBookmarksTree(b.getChildren(), sep + "-");
            }
        }
    }

} 
```

您必须确保您的资产文件夹包含 sample_pdf.pdf（库还支持从 Uri 和 SDCard 打开 pdf）

[![在此处输入图像描述](../Images/fced6025e4c1108280e7e83f02496cee.png)](https://i.stack.imgur.com/Z5i2P.png)

快乐编码:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-11T08:43:10.047

从 android **OS 5.0(lollipop) 开始，**您可以使用**`PdfRenderer instead of webview/library.`**您可以使用此类在应用程序中显示 pdf。

如果您想支持低于该操作系统的操作系统，则可以使用其他答案中提到的库/其他方法，因为没有本机支持。

[从文档](https://developer.android.com/reference/android/graphics/pdf/PdfRenderer)中阅读更多关于它的信息，您也可以参考这个[例子](https://github.com/googlesamples/android-PdfRendererBasic)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-01T14:01:03.397

WebView 可以很容易地用于从 web url 显示 PDF 文件，但是如果你有本地 PDF 文件，那么它就会变得很痛苦。

就我而言，我首先存储了本地文件的引用：-

```
File file = new File(getExternalFilesDir(null),"your_pdf_file.pdf"); 
```

然后我使用 FileProvider 获得了本地 PDF 文件的文件路径 URI，并开始使用可以打开 PDF 文档的现有应用程序打开它：-

```
try{
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(FileProvider.getUriForFile(BaseActivity.this,BuildConfig.APPLICATION_ID +".provider",file), "application/pdf");
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    startActivity(intent);
    } catch (ActivityNotFoundException e) {
    Toast.makeText(BaseActivity.this,"No Application Available to View PDF",Toast.LENGTH_SHORT).show();
    } 
```

同样要使用 FileProvider API，您需要在清单中将其声明为：-

```
 <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.provider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/file_paths" />
        </provider> 
```

并将 XML 资源文件夹下的 file_paths.xml 声明为：-

```
<paths>
    <external-path name="external_files" path="."/>
</paths> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-12T11:35:56.000

您可以使用 SkewPdfView 库从远程或本地 url 加载 pdf。

首先，在您的根 build.gradle 中添加以下内容：

```
allprojects {
    repositories {
        ...
        maven { url 'https://jitpack.io' }
    }
} 
```

并将`SkewPdfView`库添加为：

```
dependencies {
    implementation 'com.github.naya-aastra:SkewPdfView:1.1'
} 
```

现在在您的布局中包含 SkewPdfView：

```
<com.nayaastra.skewpdfview.SkewPdfView
    android:id="@+id/skewPdfView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/> 
```

将所有本地文件保存在 assets 文件夹中，然后按如下方式使用 SkewPdfView。以编程方式加载 PDF 文件：

```
SkewPdfView skewPdfView;
skewPdfView = findViewById(R.id.skewPdfView);
String pdfLink = "LINK TO ASSET FILE";
skewPdfView.loadPdf(pdfLink); 
```

SkewPdfView 库的 PS 链接

[SkewPdf查看Github页面](https://github.com/naya-aastra/SkewPdfView)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-07-17T09:39:57.020

WebView 无法打开 .pdf 文件。最流行的解决方案（google docs' url + 你在 WebView 中的 url）只显示你通过 google docs 图片转换。但是，仍然没有从 url 打开 .pdf 的简单方法。

# maven - 为什么没有检查我的 POM 存储库是否有工件？

> ID：11613508
> 
> 赞同：2
> 
> 时间：2012-07-23T13:28:41.860
> 
> 标签：maven, pom.xml

我依赖于不是我们部门存储库的 Nexus 实例提供的 jar。我们（还）不想更新我们的 Nexus 以镜像另一个存储库，也不想更改我们的（共享）`settings.xml`所以我将存储库添加到我们的 POM 中：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.company.department</groupId>
    <artifactId>simple-sample-app</artifactId>
    <packaging>war</packaging>
    <version>0.1</version>
    <name>simple-sample-app Maven Webapp</name>
    <repositories>
        <repository>
            <id>other-department</id>
            <name>other-department.company.com</name>
            <url>http://other-department.company.com/content/repositories/releases/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
    </repositories>
    ...
</project> 
```

但是：由于未检查存储库，因此 mvn 构建失败`<id>other-department</id>`。什么设置不正确？

编辑：这是我的 settings.xml

```
<settings>
    <offline>false</offline>
    <proxies>
        <proxy>
            <active>false</active>
            <host>internal-proxy.company.com</host>
            <port>8080</port>
            <nonProxyHosts>company.com</nonProxyHosts>
        </proxy>
    </proxies>
    <servers>
        <server>
            <id>releases</id>
            <username>deployment</username>
            <password>deploy</password>
        </server>
        <server>
            <id>snapshots</id>
            <username>deployment</username>
            <password>deploy</password>
        </server>
        <server>
            <id>site</id>
            <username>sitemanager</username>
            <password>sitemanager</password>
        </server>
    </servers>
    <mirrors>
        <mirror>
            <id>department-nexus-public-snapshots</id>
            <url>http://nexus.department.company.com/nexus/content/groups/public-snapshots</url>
            <mirrorOf>public-snapshots</mirrorOf>
        </mirror>
        <mirror>
            <id>department-nexus-public</id>
            <url>http://nexus.department.company.com/nexus/content/groups/public</url>
            <mirrorOf>external:*</mirrorOf>
        </mirror>
    </mirrors>

    <profiles>
        <profile>
            <id>development</id>
            <repositories>
                <repository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>central</id>
                    <url>http://central</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>

        <profile>
            <id>public-snapshots</id>
            <repositories>
                <repository>
                    <id>public-snapshots</id>
                    <url>http://public-snapshots</url>
                    <releases>
                        <enabled>true</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </repository>
            </repositories>
            <pluginRepositories>
                <pluginRepository>
                    <id>public-snapshots</id>
                    <url>http://public-snapshots</url>
                    <releases>
                        <enabled>false</enabled>
                    </releases>
                    <snapshots>
                        <enabled>true</enabled>
                    </snapshots>
                </pluginRepository>
            </pluginRepositories>
        </profile>
    </profiles>

    <activeProfiles>
        <activeProfile>development</activeProfile>
        <activeProfile>public-snapshots</activeProfile>
    </activeProfiles>
</settings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:03:36.283

感谢 Stefan H 和 @khmarbaise。问题出在镜像条目中。

我的旧 settings.xml 有这些镜像条目：

```
<settings>
  ...
  <mirrors>
    <mirror>
      <id>department-nexus-public-snapshots</id>
      <url>http://nexus.department.company.com/nexus/content/groups/public-snapshots</url>
      <mirrorOf>public-snapshots</mirrorOf>
    </mirror>
    <mirror>
      <id>department-nexus-public</id>
      <url>http://nexus.department.company.com/nexus/content/groups/public</url>
      <mirrorOf>external:*</mirrorOf>
    </mirror>
  </mirrors>
  ...
</settings> 
```

问题在于它`<mirrorOf>external:*</mirrorOf>`正在启动并有效地阻止了 POM 的回购。这是修复：

```
<settings>
  ...
  <mirrors>
    <mirror>
      <id>department-nexus-public-snapshots</id>
      <url>http://nexus.department.company.com/nexus/content/groups/public-snapshots</url>
      <mirrorOf>public-snapshots</mirrorOf>
    </mirror>
    <mirror>
      <id>department-nexus-public</id>
      <url>http://nexus.department.company.com/nexus/content/groups/public</url>
      <mirrorOf>external:*,!other-department</mirrorOf>
    </mirror>
  </mirrors>
  ...
</settings> 
```

现在我们的`department-nexus-public`条目不仅仅用于所有内容：`other-department`也可以检查（来自 POM 的 repo 的 ID）。

现在我的 POM 的 repo 正在检查工件。

# javascript - 将 div 连接到 javascript 对象

> ID：11613513
> 
> 赞同：0
> 
> 时间：2012-07-23T13:28:49.237
> 
> 标签：javascript, html, dom

我在javascript中存储了名称和价格的对象。我已经将它们附加到 html 中，每个对象都有单独的 div。当我单击 div 时，背景颜色会发生变化，表示您已选择对象。但是如何将屏幕上的 div 绑定到 javascript 对象？当用户单击 div 时，我希望该对象的“选择”属性变为“真”。

这是我的[代码](http://jsfiddle.net/wEF7b/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:32:47.077

将对象存储在数组中。

当你创建 div 时，给它一个`id`.`something_something_array_index`

`split`您可以使用正则表达式等从中提取 id 。

* * *

或者，您可以为 HTML Element 对象分配任意属性，因此您可以这样做：

```
myDiv.source_data = myObject; 
```

有些人认为这很方便，有些人认为添加非标准属性可能会导致未来的名称空间冲突。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T13:32:35.917

您可以更改您创建的属性。例如，每个 div 都可以有一个“selected”属性。您可以使用 jQuery 设置此属性：

二传手：

```
$(element).attr('selected', value) 
```

吸气剂：

```
if($(element).attr('selected') == value 
```

您可以在单击事件处理程序上使用它

# iphone - uitableview 每行显示 3 个对象

> ID：11613514
> 
> 赞同：0
> 
> 时间：2012-07-23T13:28:51.413
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个包含 20 个对象的数组。该数组中可以有更多对象。为简单起见，让我们说它在该数组中唯一的 nsstring 对象。

我想在每一行中显示其中的 3 个元素。所以行数是

```
- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
  int i = 0;

if ( ([myArray count] % 3) > 0 )
{
    i++;
}
return [myArray count] / 3 + i; 
```

}

我有一个帮手可验证`int lastObj=0`

```
 - (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
  ---instaniate the cell

   for (int i = 1; i <= 3; i++)
    {
        if (lastObj <= [myArray count])
        {
            --create cell content
            -- cellContent.myLabel.text=[myArray onbjectAtIndex:lastObj]
            --add cellContent to cell 
            lastObj++;

        }
    }
return cell;
} 
```

所以如果我在那个数组中有 5 个对象，那么它们就会正确显示。但如果列表有 14 个元素，则显示前 9 个元素，它从元素 0 开始，其余的不显示。在应用程序上，您可以看到 3 行，每行有 3 个数组元素。所以我试图模仿 3 列。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:42:29.427

```
- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
   return ceil(((float)[myArray count]) / 3.0);
  }

- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
  ---instaniate the cell
}
   //initiate 3 labels, then say:

   if(myArray.count-1 >= IndexPath.row * 3)
       cellContent.myLabel_1.text=[myArray onbjectAtIndex:IndexPath.row * 3];

   if(myArray.count-1 >= (IndexPath.row * 3)+1)
       cellContent.myLabel_2.text=[myArray onbjectAtIndex:(IndexPath.row * 3)+1];

   if(myArray.count-1 >= (IndexPath.row * 3)+2)
       cellContent.myLabel_3.text=[myArray onbjectAtIndex:(IndexPath.row * 3)+2];

   //the above "if"-s are to prevent reading values out of the array's bounds
   //add labels to cell 

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:41:06.507

当前，您尝试在其中插入 3 个文本标签的单元格中只有 1 个文本标签。您似乎很接近，但我认为最好的选择是创建一个包含三个文本标签的自定义表格单元格，然后按照您当前的方式设置它们在这里做的是设置自定义表格单元格的教程：http: [//www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:46:50.267

试试这个：

```
 - (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
      ---instaniate the cell
      cell = [[UITableViewCell alloc] init]; //If you don't ARC then retain accordingly. 

    }

       for (int i = indexPath.row * 3 ; i < indexPath.row * 3 + 3; i++)
        {

            if (i <= [myArray count])
            {

                --create cell content
                -- cellContent.myLabel.text=[myArray onbjectAtIndex:i]
                --add cellContent to cell 
                //forget about your last object helper. That would not work anyway. 

            }
        }
    return cell;
} 
```

关键是 cellForRowAtIndexPath 没有必要按特定顺序调用。从一开始就在第一排到第七排被调用，这是相当巧合的。理论上它可以按任何顺序调用。想一想：您的表有 30 行。其中 10 个是同时可见的。一开始它被称为第 0 到第 9 行。但请理解这是一个巧合。它可以按任何顺序调用。然后用户滚动 5 行。然后为单元格 10 到 14 调用该方法。在这种情况下，单元格将被重新使用。您的`if (cell==nil)`分支将不会被输入。又是一排。然后用户回滚 2 行。该方法的下一次调用将针对第 9 行和第 8 行 - 按该顺序。

所以永远不要在这里假设某个顺序，即使您似乎观察到某个顺序。

# android - Android - 自定义 ListView 适配器 - 多选删除 - Indexoutofbounds - 为什么？

> ID：11613517
> 
> 赞同：6
> 
> 时间：2012-07-23T13:29:01.563
> 
> 标签：android, listview, android-arrayadapter

我有一个使用适配器类来扩展 Item 类的 ArrayAdapter 的自定义 Listview。我有能力在 NONE、Single 和 Multi 的选择模式之间进行切换。这一切都很好。我现在要实现的是一种在多选模式下通过多项选择从列表视图（和适配器）中删除项目的方法。但是，在执行以下任一操作时，我会收到 IndexOutOFBounds 异常；1）在单选模式下删除列表视图中的最后一项（注意：最后一项之前的任何内容都可以删除） 2）在多选模式下，我再次无法删除最后一项 3）再次在多选模式下，我可以删除之前的单选项目最后一项但 2 个或更多选择再次导致索引超出范围错误。

我添加了调试日志以显示被删除的位置和 getCheckItemPositions() 的大小和我的 for 循环计数器（例如 i），最后是被删除项目的项目标题。如果我注释掉实际的 listadpter.remove(position) 行，那么日志输出似乎表明一切正常所以我现在怀疑问题属于我的适配器类 getView 方法。但是我的大脑已经筋疲力尽，我被困住了。

MainActivity.class - 从按钮视图对象调用的 removeItems 方法；

```
private void removeItems() {
    final SparseBooleanArray checkedItems = listView.getCheckedItemPositions();
    //final long[] checkedItemIds = listView.getCheckedItemIds();
    final int checkedItemsCount = checkedItems.size();

    Log.d("drp", "Adapter Count is: " + Integer.toString(mMyListViewAdapter.getCount()));
    if (checkedItems != null) {
        for (int i = checkedItemsCount-1; i >= 0 ; --i) {
            // This tells us the item position we are looking at
            // --
            final int position = checkedItems.keyAt(i);
            // This tells us the item status at the above position
            // --
            final boolean isChecked = checkedItems.valueAt(i);

            if (isChecked) {
                Item item = mMyListViewAdapter.getItem(position);
                Log.d("drp", "removing : " + Integer.toString(position) + " of " +Integer.toString(checkedItemsCount) + "-" + Integer.toString(i) + " - Title: " + mMyListViewAdapter.getItem(position).getTitle());
                mMyListViewAdapter.remove(item);

            }
        }
    }
} 
```

适配器类；

```
public class MyListViewAdapter extends ArrayAdapter<Item>  implements OnItemClickListener{

private LayoutInflater mInflator;

/**
 * This is my view holder for getView method so don't need to call
 * findViewById all the time which results in speed increase
 */
static class ViewHolder {

    public TextView txtTitle;
    public TextView txtDescription;
    public TextView txtSessionCount;
    public ImageView listThumbnailImage;
    public ImageView listStatusIndicatorImage;
    public InertCheckBox Checkbox;
}

/**
 * Constructor from a list of items
 */
public MyListViewAdapter(Context context, List<Item> items) {
    super(context, 0, items);
    mInflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // This is how you would determine if this particular item is checked
    // when the view gets created
    // --
    final ListView lv = (ListView) parent;
    final boolean isChecked = lv.isItemChecked(position);
    final int selectionMode = lv.getChoiceMode();

    // The item we want to get the view for
    // --
    Item item = getItem(position);

    // Re-use the view if possible (recycle)
    // --
    ViewHolder holder = null;
    if (convertView == null) {
        convertView = mInflator.inflate(R.layout.listview_row, null);
        holder = new ViewHolder();
        holder.txtTitle = (TextView) convertView.findViewById(R.id.title);
        holder.txtDescription = (TextView) convertView.findViewById(R.id.description);
        holder.txtSessionCount = (TextView) convertView.findViewById(R.id.session_count);
        holder.listThumbnailImage = (ImageView) convertView.findViewById(R.id.list_image);
        holder.listStatusIndicatorImage = (ImageView) convertView.findViewById(R.id.status);
        holder.Checkbox = (InertCheckBox) convertView.findViewById(R.id.inertCheckBox);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder)convertView.getTag();
    }
    holder.txtTitle.setText(item.getTitle());
    holder.txtDescription.setText(item.getDescription());
    holder.txtSessionCount.setText(item.getSessionCount());
    holder.listThumbnailImage.setImageBitmap((Bitmap) item.getThumbnailImage());        
    switch (selectionMode) {
    case ListView.CHOICE_MODE_NONE:
        holder.Checkbox.setVisibility(InertCheckBox.GONE);
        holder.listStatusIndicatorImage.setVisibility(ImageView.VISIBLE);
        holder.listStatusIndicatorImage.setImageBitmap((Bitmap) item.getListIndicatorImage());
        break;
    //case ListView.CHOICE_MODE_SINGLE: case ListView.CHOICE_MODE_MULTIPLE:
    default:
        holder.listStatusIndicatorImage.setVisibility(ImageView.GONE);
        holder.Checkbox.setVisibility(InertCheckBox.VISIBLE);
        holder.Checkbox.setButtonDrawable(R.drawable.checkbox);
        holder.Checkbox.setChecked(isChecked);
        break;
    }           

    return convertView;
}

@Override
public long getItemId(int position) {
    return getItem(position).getId();
}

@Override
public boolean hasStableIds() {
    return true;
} 
```

和项目类 - 上半部分；

```
public class Item implements Comparable<Item> {

private long id;
private String title;
private String description;
private String session_count;
private Bitmap listImage;
private Bitmap statusImage;

public Item(long id, String title, String description, String session_count, Bitmap listImage, Bitmap statusImage) {
    super();
    this.id = id;
    this.title = title;
    this.description = description;
    this.session_count = session_count;
    this.listImage = listImage;
    this.statusImage = statusImage;
}

public long getId() {
    return id;
}

public void setId(long id) {
    this.id = id;
}

public String getTitle() {
    return title;
} 
```

这是我的调试日志跟踪项目删除的可视化

```
07-23 22:59:14.910: D/drp(19104): Adapter Count is: 51
07-23 22:59:14.910: D/drp(19104): removing : 50 of 4-3 - Title: Test 50 - testing
07-23 22:59:14.910: D/drp(19104): removing : 49 of 4-2 - Title: Test 49 - testing
07-23 22:59:14.910: D/drp(19104): removing : 48 of 4-1 - Title: Test 48 - testing 
```

如果我再次注释掉“mMyListViewAdapter.remove(item);” MainActivity 中的行没有崩溃，并且日志似乎表明它按预期工作。任何人都可以看到导致我的索引超出范围异常的错误吗？

我也在使用 SDK 4.0.4 API 15。

非常感谢，

保罗。

加法 - 完整的日志输出

```
 07-25 00:21:53.235: D/AbsListView(25952): Get MotionRecognitionManager
        07-25 00:21:53.270: D/dalvikvm(25952): GC_CONCURRENT freed 89K, 3% free 13027K/13383K, paused 1ms+2ms
        07-25 00:21:53.430: D/dalvikvm(25952): GC_CONCURRENT freed 207K, 4% free 13232K/13703K, paused 3ms+2ms
        07-25 00:21:53.630: D/CLIPBOARD(25952): Hide Clipboard dialog at Starting input: finished by someone else... !
        07-25 00:21:54.930: D/dalvikvm(25952): GC_FOR_ALLOC freed 189K, 4% free 13331K/13767K, paused 10ms
        07-25 00:21:54.930: I/dalvikvm-heap(25952): Grow heap (frag case) to 13.610MB for 408976-byte allocation
        07-25 00:21:54.940: D/dalvikvm(25952): GC_FOR_ALLOC freed 6K, 4% free 13724K/14215K, paused 9ms
        07-25 00:21:54.950: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 4% free 13724K/14215K, paused 9ms
        07-25 00:21:54.950: I/dalvikvm-heap(25952): Grow heap (frag case) to 13.994MB for 408976-byte allocation
        07-25 00:21:54.960: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 4% free 14124K/14663K, paused 9ms
        07-25 00:21:54.970: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 4% free 14124K/14663K, paused 9ms
        07-25 00:21:54.975: I/dalvikvm-heap(25952): Grow heap (frag case) to 14.384MB for 408976-byte allocation
        07-25 00:21:54.995: D/dalvikvm(25952): GC_CONCURRENT freed 0K, 4% free 14523K/15111K, paused 1ms+1ms
        07-25 00:21:55.005: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 4% free 14523K/15111K, paused 9ms
        07-25 00:21:55.005: I/dalvikvm-heap(25952): Grow heap (frag case) to 14.774MB for 408976-byte allocation
        07-25 00:21:55.020: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 5% free 14923K/15559K, paused 9ms
        07-25 00:21:55.030: D/dalvikvm(25952): GC_FOR_ALLOC freed <1K, 5% free 14923K/15559K, paused 9ms
        07-25 00:21:55.030: I/dalvikvm-heap(25952): Grow heap (frag case) to 15.165MB for 408976-byte allocation
        07-25 00:21:55.040: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 5% free 15322K/16007K, paused 10ms
        07-25 00:21:55.055: D/dalvikvm(25952): GC_FOR_ALLOC freed 0K, 5% free 15722K/16455K, paused 9ms
        07-25 00:21:55.110: D/dalvikvm(25952): GC_FOR_ALLOC freed 157K, 5% free 16145K/16903K, paused 9ms
        07-25 00:21:56.565: E/SKIA(25952): FimgApiStretch:stretch failed
        07-25 00:21:56.690: E/SKIA(25952): FimgApiStretch:stretch failed
        07-25 00:21:56.710: E/SKIA(25952): FimgApiStretch:stretch failed
        07-25 00:22:00.545: D/drp(25952): Adapter Count is: 51
        07-25 00:22:00.545: D/drp(25952): removing : 49 of 2-2 - Title: Test 49 - testing
        07-25 00:22:00.545: D/drp(25952): removing : 48 of 2-1 - Title: Test 48 - testing
        07-25 00:22:00.545: D/drp(25952): removing : 47 of 2-0 - Title: Test 47 - testing
        07-25 00:22:00.550: D/AndroidRuntime(25952): Shutting down VM
        07-25 00:22:00.550: W/dalvikvm(25952): threadid=1: thread exiting with uncaught exception (group=0x40c6f1f8)
        07-25 00:22:00.560: E/AndroidRuntime(25952): FATAL EXCEPTION: main
        07-25 00:22:00.560: E/AndroidRuntime(25952): java.lang.IndexOutOfBoundsException: Invalid index 48, size is 48
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at java.util.ArrayList.get(ArrayList.java:304)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.ArrayAdapter.getItem(ArrayAdapter.java:337)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at au.drp.mylistview.MyListViewAdapter.getItemId(MyListViewAdapter.java:107)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.AbsListView.confirmCheckedPositionsById(AbsListView.java:5956)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.AbsListView.handleDataChanged(AbsListView.java:5999)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.ListView.layoutChildren(ListView.java:1535)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.AbsListView.onLayout(AbsListView.java:2254)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.View.layout(View.java:11467)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.View.layout(View.java:11467)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.View.layout(View.java:11467)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1502)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.View.layout(View.java:11467)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.View.layout(View.java:11467)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1721)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2678)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.os.Handler.dispatchMessage(Handler.java:99)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.os.Looper.loop(Looper.java:137)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at android.app.ActivityThread.main(ActivityThread.java:4514)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at java.lang.reflect.Method.invokeNative(Native Method)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at java.lang.reflect.Method.invoke(Method.java:511)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
        07-25 00:22:00.560: E/AndroidRuntime(25952):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T21:52:07.580

`confirmCheckedPositionsById`（acj 的答案中的第 7 条子弹）中的错误会导致`getItemId`在陈旧的位置上被调用。但是，它将以正确的位置再次调用以刷新布局。当我遇到这个问题时，我`getItemId`像这样更新了自定义适配器

```
@Override
public long getItemId(int position) {
    return position < getCount() ? getItem(position).getId() : -1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T19:03:54.473

似乎存在[`AbsListView`](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/AbsListView.java)导致此问题的错误。它可以发生在 的任何子类中`AbsListView`，包括`ListView`和`GridView`。

在单选和多选模式下，`ListView` 通过`notifyDataSetChanged()`验证`confirmCheckedPositionsById()`. 由于此时所选项目已从数据集中删除，因此适配器将引发异常。值得注意的是，仅当适配器的`hasStableIds()`方法返回时才会出现此问题`true`。

松散地说，这是相关的路径：

1.  您在 ListView 中选择一项或多项
2.  更新其`ListView`选定项目列表
3.  你点击删除按钮
4.  项目已从您的数据集中移除
5.  您调用`notifyDataSetChanged()`您的适配器，它会通知其观察者数据集已更改。是`ListView`那些观察者之一。
6.  下次`ListView`重绘时，它会看到适配器的通知并调用`handleDataChanged()`。此时，`ListView`仍然认为我们现在删除的项目被选中*并在数据集中*。
7.  `handleDataChanged()`方法调用`confirmCheckedPositionsById()`，它反过来尝试`getItemId()`使用过时的位置调用适配器。如果被删除的项恰好在列表的末尾附近，那么这个位置很可能超出了数组的范围，适配器会抛出`IndexOutOfBoundsException`.

两种可能的解决方法如下：

*   每次数据集更改时创建一个新适配器，如其他答案中所述。这具有丢失当前滚动位置的不幸效果，除非它是手动保存和恢复的。

*   `clearChoices()`在调用适配器之前，通过调用`ListView`（或）清除所选项目。无论如何都会删除所选项目，因此丢失当前选择状态不太可能成为问题。此方法将保留滚动位置，并应防止在更新列表时闪烁。`GridView``notifyDataSetChanged()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T03:21:50.390

好的，我解决了这个问题！！！耶！

为了防止 IndexOutOFBounds 异常，我必须做的是重置列表视图适配器以刷新列表视图内容。所以魔术线是

```
 listView.setAdapter(mMyListViewAdapter); 
```

但是，我认为这不是使用列表视图时使用的最佳实践，并且最好更新列表视图所附加的适配器的内容。但我不太确定该怎么做？

无论如何，他是我更新的删除方法代码。

```
private void removeItems() {
    final SparseBooleanArray checkedItems = listView.getCheckedItemPositions();

    if (checkedItems != null) {
        final int checkedItemsCount = checkedItems.size();

        // Lets get the position of the view to scroll to before the first checked 
        // item to restore scroll position
        //          
        int topPosition = checkedItems.keyAt(0) - 1;            

        listView.setAdapter(null);
        for (int i = checkedItemsCount - 1; i >= 0 ; i--) {
            // This tells us the item position we are looking at
            // --
            final int position = checkedItems.keyAt(i);

            // This tells us the item status at the above position
            // --
            final boolean isChecked = checkedItems.valueAt(i);
            if (isChecked) {
                Item item = mMyListViewAdapter.getItem(position);
                mMyListViewAdapter.remove(item);
                //mMyListViewAdapter.notifyDataSetChanged();

            }               
        }
        listView.setAdapter(mMyListViewAdapter);
        //if topPosition is -1 then item zero is positioned by default.
        listView.setSelection(topPosition);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T10:09:40.650

使用完全定制的 AlertDialog.Builder 过滤：-

```
((TextView) TabBarWithCustomStack.vPublic.findViewById(R.id.tv_edit)) .setVisibility(View.GONE);
    class DialogSelectionClickHandler implements
            DialogInterface.OnMultiChoiceClickListener {
        public void onClick(DialogInterface dialog, int clicked,
                boolean selected) {
            Log.i("ME", hosts.toArray()[clicked] + " selected: " + selected);
        }
    }

    class DialogButtonClickHandler implements
            DialogInterface.OnClickListener {
        public void onClick(DialogInterface dialog, int clicked) {
            switch (clicked) {
            case DialogInterface.BUTTON_POSITIVE:
                filteredList.clear();
                statusesSelected.clear();

                for (int i = 0; i < statusesStringArray.length; i++) {
                    // Log.i( "ME", statuses.toArray()[ i ] + " selected: "
                    // + isSelectedStatuses[i] );

                    if (isSelectedStatuses[i] == true) {

                        if (statuses.get(i).toString()
                                .equalsIgnoreCase("Accepted")) {
                            statusesSelected.add("1");
                        } else if (statuses.get(i).toString()
                                .equalsIgnoreCase("Rejected")) {
                            statusesSelected.add("2");
                        } else if (statuses.get(i).toString()
                                .equalsIgnoreCase("Pending")) {
                            statusesSelected.add("3");
                        }

                    }
                    isSelectedStatuses[i] = false;
                }

                Calendar currentCalender = Calendar.getInstance(Locale
                        .getDefault());

                Date currentDate = new Date(
                        currentCalender.getTimeInMillis());

                if (listSelected == 0) {
                    for (int j = 0; j < arr_BLID.size(); j++) {
                        if (Helper.stringToDate(
                                arr_BLID.get(j).getStart_ts().toString(),
                                Helper.SERVER_FORMAT).after(currentDate)) {
                            if (statusesSelected.contains(arr_BLID.get(j)
                                    .getStatus())) {
                                filteredList.add(arr_BLID.get(j));
                            }
                        }
                    }

                } else {
                    for (int j = 0; j < arr_BLID.size(); j++) {
                        if (currentDate.after(Helper.stringToDate(arr_BLID
                                .get(j).getStart_ts().toString(),
                                Helper.SERVER_FORMAT))) {
                            if (statusesSelected.contains(arr_BLID.get(j)
                                    .getStatus())) {
                                filteredList.add(arr_BLID.get(j));
                            }
                        }
                    }

                }

                lvBeeps.setAdapter(new EventsAdapter(ctx));

                break;

            case DialogInterface.BUTTON_NEGATIVE: {

                currentCalender = Calendar.getInstance(Locale.getDefault());

                currentDate = new Date(currentCalender.getTimeInMillis());

                if (listSelected == 0) {

                    filteredList.clear();
                    for (int i = 0; i < arr_BLID.size(); i++) {
                        if (Helper.stringToDate(
                                arr_BLID.get(i).getStart_ts().toString(),
                                Helper.SERVER_FORMAT).after(currentDate)) {
                            filteredList.add(arr_BLID.get(i));
                        }

                        if (i < isSelectedStatuses.length) {
                            isSelectedStatuses[i] = false;
                        } else {
                            continue;
                        }
                    }

                    lvBeeps.setAdapter(new EventsAdapter(ctx));
                } else {

                    filteredList.clear();
                    for (int i = 0; i < arr_BLID.size(); i++) {
                        if (currentDate.after(Helper.stringToDate(arr_BLID
                                .get(i).getStart_ts().toString(),
                                Helper.SERVER_FORMAT))) {
                            filteredList.add(arr_BLID.get(i));
                        }

                        if (i < isSelectedStatuses.length) {
                            isSelectedStatuses[i] = false;
                        } else {
                            continue;
                        }

                    }

                    lvBeeps.setAdapter(new EventsAdapter(ctx));

                }
            }
                break;
            }
        }
    }

    btnHost = (Button) view.findViewById(R.id.btnHost);
    btnHost.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            // ((TextView)((RelativeLayout)getActivity().getLayoutInflater().inflate(R.layout.event_filter_title,
            // null)).findViewById(R.id.tvDialogTitle)).setText("Hosts");

            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((TextView)((RelativeLayout)getActivity().getLayoutInflater().inflate(R.layout.event_filter_title,
            // null)).findViewById(R.id.tvDialogTitle)).getText());

            final LayoutInflater inflater123 = (LayoutInflater) getActivity()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            final View view123 = inflater123.inflate(
                    R.layout.event_filter_title, null);

            // Log.d( "Dialog object",
            // " static made dialog in view123--> "+view123);
            //
            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((CheckBox)view123.findViewById(R.id.cbSelectAll)));
            //
            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((CheckBox)inflater.inflate(R.layout.event_filter_title,
            // (ViewGroup) ((AlertDialog)
            // BeepsFragment.dialog).getCurrentFocus(),
            // true).findViewById(R.id.cbSelectAll)));
            //
            // Log.d( "Dialog object",
            // " static made dialog in checkbox--> "+((CheckBox)(((RelativeLayout)getActivity().getLayoutInflater().inflate(R.layout.event_filter_title,
            // null)).findViewById(R.id.cbSelectAll))));
            hostsDialog = new AlertDialog.Builder(getActivity())
                    .setCustomTitle(/*
                                     * Html.fromHtml(
                                     * "<b><font color=\"purple\">  Host</font></b>"
                                     * )
                                     */view123)
                    .setIcon(
                            getActivity().getResources().getDrawable(
                                    R.drawable.add_host))
                    .setMultiChoiceItems(hostsStringArray, isSelectedHosts,
                            new OnMultiChoiceClickListener() {

                                // android.content.DialogInterface.OnShowListener
                                // ocl = new
                                // DialogInterface.OnShowListener() {
                                //
                                // @Override
                                // public void onShow(DialogInterface
                                // dialog) {
                                // // TODO Auto-generated method stub
                                // BeepsFragment.dialog = dialog;
                                // }
                                // };

                                public void onClick(DialogInterface dialog,
                                        int clicked, boolean selected) {

                                    boolean all = true;
                                    Log.i("ME", hosts.toArray()[clicked]
                                            + " selected: " + selected);

                                    // for (int i = 0; i <
                                    // isSelectedHosts.length; i++ ){
                                    //
                                    // if(isSelectedHosts[i]==true){
                                    // all = true;
                                    // }else{
                                    // all = false;
                                    // }
                                    // }
                                    //
                                    // Log.i( "ME", all + " selected:--- "
                                    // +((CheckBox)view123.findViewById(R.id.cbSelectAll)));
                                    //
                                    // if(all = true){
                                    // ((CheckBox)view123.findViewById(R.id.cbSelectAll)).setChecked(true);
                                    // }else{
                                    // ((CheckBox)view123.findViewById(R.id.cbSelectAll)).setChecked(false);
                                    // }

                                    Log.d("Dialog object",
                                            " static made dialog --> "
                                                    + BeepsFragment.dialog
                                                    + " from parameter dialog --> "
                                                    + dialog);

                                }

                            })
                    .setPositiveButton(
                            Html.fromHtml("<b><font color=\"purple\">Apply Filter</font></b>"),
                            new DialogButtonClickHandler() {

                                // android.content.DialogInterface.OnShowListener
                                // ocl = new
                                // DialogInterface.OnShowListener() {
                                //
                                // @Override
                                // public void onShow(DialogInterface
                                // dialog) {
                                // // TODO Auto-generated method stub
                                // BeepsFragment.dialog = dialog;
                                // }
                                // };

                                public void onClick(DialogInterface dialog,
                                        int clicked) {
                                    switch (clicked) {
                                    case DialogInterface.BUTTON_POSITIVE:

                                        filteredList.clear();
                                        hostsSelected.clear();

                                        for (int i = 0; i < hostsStringArray.length; i++) {
                                            Log.i("ME",
                                                    hosts.toArray()[i]
                                                            + " selected: "
                                                            + isSelectedHosts[i]
                                                            + "\n\n\t hostStringArray-->"
                                                            + hostsStringArray[i]);

                                            if (isSelectedHosts[i] == true) {

                                                hostsSelected.add(hosts
                                                        .get(i));
                                                isSelectedHosts[i] = false;
                                            }
                                            // isSelectedHosts[i] = false;
                                        }

                                        Calendar currentCalender = Calendar
                                                .getInstance(Locale
                                                        .getDefault());

                                        Date currentDate = new Date(
                                                currentCalender
                                                        .getTimeInMillis());

                                        if (listSelected == 0) {
                                            for (int j = 0; j < arr_BLID
                                                    .size(); j++) {
                                                if (Helper
                                                        .stringToDate(
                                                                arr_BLID.get(
                                                                        j)
                                                                        .getStart_ts()
                                                                        .toString(),
                                                                Helper.SERVER_FORMAT)
                                                        .after(currentDate)) {
                                                    if (hostsSelected
                                                            .contains(arr_BLID
                                                                    .get(j)
                                                                    .getHost_name())) {
                                                        filteredList
                                                                .add(arr_BLID
                                                                        .get(j));
                                                    }
                                                    if (hostsSelected
                                                            .contains("Me"))
                                                        if (BeepApplication
                                                                .getSelfId() == arr_BLID
                                                                .get(j)
                                                                .getHost_id())
                                                            filteredList
                                                                    .add(arr_BLID
                                                                            .get(j));
                                                }
                                            }

                                        } else {
                                            for (int j = 0; j < arr_BLID
                                                    .size(); j++) {
                                                if (currentDate.after(Helper
                                                        .stringToDate(
                                                                arr_BLID.get(
                                                                        j)
                                                                        .getStart_ts()
                                                                        .toString(),
                                                                Helper.SERVER_FORMAT))) {
                                                    if (hostsSelected
                                                            .contains(arr_BLID
                                                                    .get(j)
                                                                    .getHost_name())) {
                                                        filteredList
                                                                .add(arr_BLID
                                                                        .get(j));
                                                    }
                                                    if (hostsSelected
                                                            .contains("Me"))
                                                        if (BeepApplication
                                                                .getSelfId() == arr_BLID
                                                                .get(j)
                                                                .getHost_id())
                                                            filteredList
                                                                    .add(arr_BLID
                                                                            .get(j));
                                                }
                                            }

                                        }
                                        lvBeeps.setAdapter(new EventsAdapter(
                                                ctx));
                                        break;
                                    }
                                }

                            })
                    .setNegativeButton(
                            Html.fromHtml("<b><font color=\"purple\">Remove Filter</font></b>"),
                            new DialogButtonClickHandler() {

                                public void onClick(
                                        final DialogInterface dialog,
                                        int clicked) {

                                    Calendar currentCalender = Calendar
                                            .getInstance(Locale
                                                    .getDefault());

                                    Date currentDate = new Date(
                                            currentCalender
                                                    .getTimeInMillis());

                                    if (listSelected == 0) {

                                        filteredList.clear();
                                        for (int i = 0; i < arr_BLID.size(); i++) {
                                            if (Helper.stringToDate(
                                                    arr_BLID.get(i)
                                                            .getStart_ts()
                                                            .toString(),
                                                    Helper.SERVER_FORMAT)
                                                    .after(currentDate)) {
                                                filteredList.add(arr_BLID
                                                        .get(i));
                                                if (i < isSelectedHosts.length) {
                                                    isSelectedHosts[i] = false;
                                                } else {
                                                    continue;
                                                }
                                            }
                                        }

                                        lvBeeps.setAdapter(new EventsAdapter(
                                                ctx));
                                    } else {

                                        filteredList.clear();
                                        for (int i = 0; i < arr_BLID.size(); i++) {
                                            if (currentDate.after(Helper
                                                    .stringToDate(
                                                            arr_BLID.get(i)
                                                                    .getStart_ts()
                                                                    .toString(),
                                                            Helper.SERVER_FORMAT))) {
                                                filteredList.add(arr_BLID
                                                        .get(i));
                                                if (i < isSelectedHosts.length) {
                                                    isSelectedHosts[i] = false;
                                                } else {
                                                    continue;
                                                }
                                            }
                                        }

                                        lvBeeps.setAdapter(new EventsAdapter(
                                                ctx));

                                    }
                                }
                            });

            final AlertDialog dlg = hostsDialog.create();

            dlg.show();

            ((TextView) view123.findViewById(R.id.tvDialogTitle))
                    .setText("Hosts");

            ((CheckBox) view123.findViewById(R.id.cbSelectAll))
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(
                                CompoundButton buttonView, boolean isChecked) {
                            // TODO Auto-generated method stub

                            if (isChecked == true) {

                                ListView list = dlg.getListView();
                                for (int i = 0; i < list.getCount(); i++) {

                                    isSelectedHosts[i] = true;
                                    list.setItemChecked(i, true);

                                }

                            }

                            else if (isChecked == false) {

                                ListView list = dlg.getListView();
                                for (int j = 0; j < list.getCount(); j++) {

                                    isSelectedHosts[j] = false;
                                    list.setItemChecked(j, false);
                                }
                                // }
                            }

                        }
                    });

        }
    });

    btnStatus = (Button) view.findViewById(R.id.btnStatus);
    btnStatus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            LayoutInflater inflater123 = (LayoutInflater) getActivity()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View view123 = inflater123.inflate(R.layout.event_filter_title,
                    null);

            statusDialog = new AlertDialog.Builder(getActivity())
                    .setIcon(
                            getActivity().getResources().getDrawable(
                                    R.drawable.add_host))
                    .setCustomTitle(/*
                                     * Html.fromHtml(
                                     * "<b><font color=\"purple\">  Status</font></b>"
                                     * )
                                     */view123)
                    .setIcon(
                            getActivity().getResources().getDrawable(
                                    R.drawable.add_host))
                    .setMultiChoiceItems(statusesStringArray,
                            isSelectedStatuses,
                            new DialogSelectionClickHandler())
                    .setPositiveButton(
                            Html.fromHtml("<b><font color=\"purple\">Apply Filter</font></b>"),
                            new DialogButtonClickHandler() {

                            })
                    .setNegativeButton(
                            Html.fromHtml("<b><font color=\"purple\">Remove Filter</font></b>"),
                            new DialogButtonClickHandler());

            final AlertDialog dlg = statusDialog.create();

            dlg.show();

            ((TextView) view123.findViewById(R.id.tvDialogTitle))
                    .setText("Status");
            ((CheckBox) view123.findViewById(R.id.cbSelectAll))
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(
                                CompoundButton buttonView, boolean isChecked) {
                            // TODO Auto-generated method stub

                            if (isChecked == true) {

                                ListView list = dlg.getListView();
                                for (int i = 0; i < list.getCount(); i++) {

                                    isSelectedStatuses[i] = true;
                                    list.setItemChecked(i, true);

                                }

                            }

                            else if (isChecked == false) {

                                ListView list = dlg.getListView();
                                for (int j = 0; j < list.getCount(); j++) {

                                    isSelectedStatuses[j] = false;
                                    list.setItemChecked(j, false);
                                }
                                // }
                            }

                        }
                    });

        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T04:59:02.530

这是一个记录在案的错误，请投票：

[https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=64596](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=64596)

我的用例是配置为 ListView.CHOICE_MODE_SINGLE 的 ListView，我尝试了@Peter Tran 的建议，但没有任何运气。这是对我来说成功的解决方法：

```
 myAdapter.deleteRow(listView.getCheckedItemPosition());
    int checkedIndex = listView.getCheckedItemPosition();
    System.out.println("checkedIndex="+checkedIndex);

    int count=myAdapter.getCount();
    if (checkedIndex==count) listView.setItemChecked(count-1, true); 
```

我的测试是手动选择列表中的最后一项（count-1）。我省略了对 count==0 情况的处理，但这很可能是需要的。我观察到 println() 总是打印已删除行的索引。myAdapter.deleteRow() 向侦听器通知数据更改，这对我说 ListView 没有正确更新它检查的索引。我已经尝试使用 hasStableIds() 从自定义适配器返回 true 和 false 的代码，结果相同。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-23T13:36:35.213

编辑为：

```
for (int i = checkedItemsCount-1; i >= 0 ; i--) {
                                          ^^^^^ 
```

**安装在**

```
for (int i = checkedItemsCount-1; i >= 0 ; --i) { 
```

# php - php - 将字符串转换为日期

> ID：11613520
> 
> 赞同：0
> 
> 时间：2012-07-23T13:29:36.633
> 
> 标签：php

我正在尝试`1899-12-30 19:00:00.000`使用此函数将格式中的给定字符串转换为日期：

```
$startDate = strtotime("1899-12-30 19:00:00.000"); 
```

但结果我得到了错误的日期，例如

```
30.10.2008 00:00:00 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:33:02.183

使用[`DateTime`](http://php.net/datetime)：

```
$date = DateTime::createFromFormat( 'Y-m-d H:i:s.u', '1899-12-30 19:00:00.000', new DateTimeZone( 'America/New_York'));
echo $date->getTimestamp() . ' ' . $date->format( 'Y-m-d H:i:s'); 
```

请注意，这将是一个负值，因为它是在 1970 年 1 月 1 日之前。上面的代码[输出](http://viper-7.com/2wp5hI)：

```
-2209093200 1899-12-30 19:00:00 
```

确保在构造函数中将正确的时区设置为`DateTimeZone`（或者您可以省略它以将其保留为默认值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T13:33:41.050

如果您使用的是 PHP 5 >= 5.3.0，您可以像这样使用[`date_parse_from_format`^(*Docs*)](http://php.net/date_parse_from_format)函数：

```
$date = "1899-12-30 19:00:00.000";
$dateObj = date_parse_from_format("Y-m-d H:i:s.000",$date); 
```

来源：[php.net](http://www.php.net/manual/en/function.date-parse-from-format.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T13:35:32.643

日期`1899-12-30 19:00:00.000`由 UNIX 时间戳表示`-2209096800`，它刚好在 32 位有符号整数的范围之外。在 64 位 PHP 系统上它可以工作，在 32 位系统上你会遇到问题。

使用`DateTime`类来表示这样的日期，它可以处理它。

# android - 我错过了什么 android.telephony.PhoneNumberUtils

> ID：11613521
> 
> 赞同：0
> 
> 时间：2012-07-23T13:29:40.890
> 
> 标签：android, sms

我有一个需要监听传入短信的 android 应用程序。然后我需要显示与发送电话号码关联的发件人姓名。我的问题是原始地址有国家代码前缀，而我的联系人没有。

我该如何应对这种情况？我希望

```
android.telephony.PhoneNumberUtils
```

可能会有所帮助，但在这种情况下，它的任何方法似乎都没有任何用处。

肯定有一些 android 实用程序可以在有和没有国家代码前缀的数字之间进行转换。

例如，smsManager 似乎总是给我带有 +44 前缀的 originatingaddress，而我的一些个人联系人没有附加这个前缀。我是否必须自己编写转换过程？或者在使用 contentResolver 获取我的电话联系人显示名称时使用 LIKE 谓词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:32:05.433

我正在使用`PhoneNumberUtils.compare(number1, number2)`，它工作得很好。

[http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#compare(java.lang.String, java.lang.String)](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#compare%28java.lang.String,%20java.lang.String%29)

# php - 将大数据从一台服务器发送到另一台服务器

> ID：11613522
> 
> 赞同：0
> 
> 时间：2012-07-23T13:29:59.410
> 
> 标签：php, curl, http-post

我正在使用 CURL 在服务器之间发送大量数据，正在使用 POST，这样可以吗，还是有更好/标准的方式来使用 curl 发送大量序列化数据？

问题出在 php 设置中的 max-post-size 中，我必须更改它（默认 2MB）。我还没有遇到任何问题，但是当系统在线时，每次发送的数据可能大于50MB！

有任何想法吗 ？谢谢你 。

**编辑 ：**

我正在发送 DATA 而不是 FILES ，一旦接收到的数据应该由第二台服务器处理并保存到数据库/文件/执行一些操作，并且可能需要在处理数据后发送响应。

我只是想知道，除了 max-post-size 我还会遇到其他问题吗？（忘记 curl 和 php 的超时），无论如何让服务器不查看 max_post_size ？也许通过使用 PUSH ？还是放？那个 post_size 会影响 PUSH 或 PUT 吗？以及如何通过 curl 使用它？这么多的问题 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:43:25.003

使用 cURL 非常好。

就个人而言，我宁愿不必通过 Web 服务器（例如 Apache）来执行此操作，因为在此过程中可能存在太多潜在故障，例如。PHP超时、web服务器超时、内存限制、无写权限、仅限web root等。

我更愿意通过为文件传输设计的机制来做到这一点：

*   FTP
*   `scp`（通常通过 SSH 进行 FTP）
*   Dropbox（有 API）
*   [Amazon S3（带有PHP 库](http://github.com/amazonwebservices/aws-sdk-for-php.git)的简单 API ）
*   等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:35:15.943

路还行。

还有两个想法给你：

1.  使用 FTP（您可以将大型序列化文件上传到可从您的服务器访问的 ftp 服务器
2.  使用 mysql（您可以将大型序列化内容存储在 mysql-server 上）

# c# - 在双显示器设置的同一显示器上关闭和打开表单

> ID：11613523
> 
> 赞同：4
> 
> 时间：2012-07-23T13:30:05.760
> 
> 标签：c#, winforms

我一直在环顾四周，发现了这两篇文章：

*   [使用多个监视器恢复窗口大小/位置](https://stackoverflow.com/questions/937298/restoring-window-size-position-with-multiple-monitors)
*   [C#：如何让表单记住它的边界和窗口状态（考虑双显示器设置）](https://stackoverflow.com/questions/495380/c-how-to-make-a-form-remember-its-bounds-and-windowstate-taking-dual-monitor)

问题是这些文章在我的问题的范围内，但我不能像我看到的那样使用它们（除非我让我的解决方案变得非常复杂）。虽然这篇文章谈到了在他们完全关闭应用程序时恢复表单，但这并不是我想要完成的任务。

我正在做的是在同一个正在运行的应用程序中关闭和打开同一个表单。发生这种情况时，我希望它具有与我关闭时相同的确切位置、状态和大小。这是直截了当的，因为我可以从表单对象中保存位置、状态和大小，处理它并将旧值应用于我的新表单。这可行，但如果我在监视器 2 上有一个最大化的窗口，并且关闭/打开功能运行，它会打开监视器 1 上最大化的表单。

在上述情况下，是否有任何简单的方法可以将其保留在监视器 2 上，还是我必须深入研究复杂的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:02:25.600

If I were you I would consider your problem to be a simple extension of those linked questions, the only change being that your application isn't being closed - only the window is (so you don't need to persist this information to disk, just keep it in memory).

The reason being that users can (and eventually one of them probably will) change display configuration (number of displays, display positions etc...) **while your application is running** (e.g. a laptop user unplugging an external screen), and so if you don't take this into account you will end up positioning your windows off screen where they can't be accessed by the user.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T22:40:02.767

尝试这个...

（Form2就是你要定位的表格，根据需要修改。）

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form2 : Form
    {
        static System.Drawing.Point _location = new Point();
        static System.Drawing.Size _size;
        static FormWindowState _state;

        public Form2()
        {
            InitializeComponent();

            this.Load += new EventHandler( Form2_Load );
            this.FormClosing += new FormClosingEventHandler( Form2_FormClosing );
        }

        void Form2_Load( object sender, EventArgs e )
        {
            // Restore the Form's position.
            //
            // Handle possibility that our previous screen location is no longer valid for
            // the current display environment (i.e., multiple->single display system).
            //

            Point location = _location;

            if ( location == new Point( 0, 0 ) || !IsScreenLocationValid( location ) )
            {
                if ( null != this.Parent )
                    this.StartPosition = FormStartPosition.CenterParent;
                else
                    this.StartPosition = FormStartPosition.CenterScreen;
            }
            else
            {
                this.Location = location;

                // Ensure that the Form's size is not smaller than its minimum allowed.
                //

                Size size = _size;

                size.Width = System.Math.Max( size.Width, this.MinimumSize.Width );
                size.Height = System.Math.Max( size.Height, this.MinimumSize.Height );

                this.Size = size;
            }

            // Only restore the Form's window state if it is not minimized.
            // (If we restore it as minimized, the user won't see it).
            //
            if ( _state == FormWindowState.Normal || _state == FormWindowState.Maximized )
            {
                this.WindowState = _state;
            }
        }

        /// <summary>
        /// Determines if the given screen location is valid for the current display system.
        /// </summary>
        /// <param name="location">A Point object describing the location</param>
        /// <returns>True if the location is valid; otherwise, false</returns>
        static bool IsScreenLocationValid( Point location )
        {
            Rectangle screenBounds = System.Windows.Forms.Screen.GetBounds( location );

            return screenBounds.Contains( location );
        }

        void Form2_FormClosing( object sender, FormClosingEventArgs e )
        {
            _state = this.WindowState;

            if ( _state == FormWindowState.Normal )
            {
                _location = this.Location;
                _size = this.Size;
            }
            else
            {
                _location = this.RestoreBounds.Location;
                _size = this.RestoreBounds.Size;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:23:31.687

按照原始帖子评论中的 Hans Passant 说明，正确设置值可以解决问题。我现在在我的 Forms OnLoad 事件中这样做：

```
if(UseGivenpositioningValues)
{
    Location = OverrideLocation;
    if (OverrideWindowState == FormWindowState.Normal)
        Size = OverrideSize;
    WindowState = OverrideWindowState;
    UseGivenpositioningValues = false;
} 
```

首先是位置，然后是状态。正如贾斯汀在他的回答中指出的那样，这不是一个完美的解决方案，因为用户可以更改他的设置，然后如果用户更改他的设置，表单可能会出现在屏幕外。但是，在我的具体情况下，这不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-07T13:20:16.263

我创建了一个扩展方法，无论您是关闭应用程序还是仅关闭当前窗口都可以使用。我在 form_load 事件上调用 RestoreLastLocation，在 form_closing 事件上调用 SaveLastLocation。这是旧代码，所以如果它有点粗糙，我深表歉意。

```
 public static void SaveLastLocation(this Form form, string UniqueName)
    {
        FormWindowState CurState = form.WindowState;
        if (CurState == FormWindowState.Minimized)
            CurState = FormWindowState.Normal;

        form.WindowState = FormWindowState.Normal;

        if (Properties.Settings.Default.WindowSettings == null)
            Properties.Settings.Default.WindowSettings = new System.Collections.Specialized.StringCollection();

        if(Properties.Settings.Default.WindowSettings.Count > 0)
            foreach (string S in Properties.Settings.Default.WindowSettings)
                if (S.Split('|').First().ToLower() == UniqueName.ToLower())
                {
                    Properties.Settings.Default.WindowSettings.Remove(S);
                    break;
                }

        Properties.Settings.Default.WindowSettings.Add(string.Format("{0}|{1}|{2}|{3}|{4}|{5}",
            UniqueName, form.Top.ToString(), form.Left.ToString(), form.Height.ToString(), form.Width.ToString(), form.WindowState.ToString()));

        Properties.Settings.Default.Save();
    }

    public static void RestoreLastLocation(this Form form, string UniqueName)
    {
        if (Properties.Settings.Default.WindowSettings != null && Properties.Settings.Default.WindowSettings.Count > 0)
            foreach (string S in Properties.Settings.Default.WindowSettings)
            {
                string[] Parts = S.Split('|');
                if (Parts[0].ToLower() == UniqueName.ToLower())
                {
                    form.Top = int.Parse(Parts[1]);
                    form.Left = int.Parse(Parts[2]);
                    form.Height = int.Parse(Parts[3]);
                    form.Width = int.Parse(Parts[4]);
                    form.WindowState = (FormWindowState)Enum.Parse(typeof(FormWindowState), Parts[5]);
                    break;
                }
            }
    } 
```

# mysql - MySQL OLAP 解决方案

> ID：11613527
> 
> 赞同：3
> 
> 时间：2012-07-23T13:30:35.357
> 
> 标签：mysql, olap, xmla

我正在.NET 上开发一个项目，我需要包含一个基于 OLAP 的报告模块。对于大型 MySQL 数据库（每个月将有大约 1000 万新行），支持 XML 分析 (XMLA) 的更好的 OLAP 解决方案是什么？

我已经尝试过 icCube、MicroStrategy、Tableau 和 Mondrian。还有其他选择吗？

# java - 如何以编程方式根据第二列对 glazedList 表进行排序？

> ID：11613529
> 
> 赞同：0
> 
> 时间：2012-07-23T13:30:38.490
> 
> 标签：java, jtable, swingworker, glazedlists

我有一个 GlazedList 表，它有 3 列。我可以通过单击列标题手动对死者和升序进行排序。

**我的问题是如何在应用程序启动时对表格进行排序？** 我的意思是表格根据第二列自动升序排序。

```
 // Build a filter
    FilterList<Code> radioFilterList = new FilterList<Code>(CodeModel.getCodeEventList(), new ThreadedMatcherEditor<Code>(filterPanel.getCodeMatcherEditor()));
    TextFilterator<Code> CodeTextFilterator = new TextFilterator<Code>() {
        public void getFilterStrings(java.util.List<String> strings, Code Code) {
            strings.add(Code.getName());
            strings.add(String.valueOf(Code.getDate()));
            strings.add(String.valueOf(Code.getSize()));
        }
    };
    MatcherEditor<Code> textMatcherEditor = new TextComponentMatcherEditor<Code>(filterPanel.getTextComponent(), CodeTextFilterator);
    filterList = new FilterList<Code>(radioFilterList, new ThreadedMatcherEditor<Code>(textMatcherEditor));

    // Build a JTable
    String[] propertyNames = new String[]{"name", "date", "size"};
    String[] columnLabels = new String[]{"Code Name", "Code Date", "Size"};
    TableFormat<Code> tableFormat = GlazedLists.tableFormat(Code.class, propertyNames, columnLabels);
    CodeSortedList = new SortedList<Code>(filterList, null);
    CodeTable = new JTable(new EventTableModel<Code>(CodeSortedList, tableFormat));
    TableComparatorChooser.install(CodeTable, CodeSortedList, TableComparatorChooser.MULTIPLE_COLUMN_MOUSE);

    // Configure the JTable
    CodeTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    CodeTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS); 
```

**编辑：** 只需添加`.appendComparator(1,0,true)`如下`TableComparatorChooser`。

`TableComparatorChooser.install(codeTable, codeSortedList, TableComparatorChooser.MULTIPLE_COLUMN_MOUSE).appendComparator(1,0,true);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:50:00.103

只需添加`.appendComparator(1,0,true)`如下`TableComparatorChooser`。

```
TableComparatorChooser.install(codeTable, codeSortedList, TableComparatorChooser.MULTIPLE_COLUMN_MOUSE).appendComparator(1,0,true); 
```

# ios - iOS 6 Beta 3 (ipad 3) 中的 UIAlertView 似乎不会触发委托中的代码

> ID：11613533
> 
> 赞同：0
> 
> 时间：2012-07-23T13:30:45.947
> 
> 标签：ios, ipad, uialertview, ios6, ipad-3

我遇到了 UIAlertView 不会触发委托中的任何处理程序的问题。它适用于所有 iOS 5.0 及更高版本/iOS 6 beta（iPhone4/4s、iPod、ipad1/2）设备，但问题仅在于 iPad 3 上的 iOS 6 beta 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:30:45.947

所以我找到了答案。这有点奇怪，但看起来如果你将 UIAlertView 的标题设置为 nil，它似乎可以工作。我知道这听起来很奇怪，但这就是我让它在 iPad3 iOS6 beta 3 上工作的方式。当你设置标题时，它似乎不起作用。对此有更好的解释吗？或者它只是一个错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:17:36.723

即使您的标题不是零，它也会崩溃，因为您在线程中调用它。在主线程结束后调用它。&您的问题将得到解决。:)

# html - 设置 div 全宽并修复

> ID：11613543
> 
> 赞同：0
> 
> 时间：2012-07-23T13:31:28.887
> 
> 标签：html, css

我想`div#divcontainerdata`使用 CSS 设置为适合屏幕的整个宽度。

我的简化 HTML 是：

```
<div class="container">
    <div class="leftDiv2" style="width:300px;float: left;"></div>
    <div class="leftDiv1" style="width:300px;float: left;"></div>
    <div class="divcontainerdata"></div>
</div> 
```

我希望最终产品看起来像这样：

```
|              |                  |
| div:leftdiv1 | divcontainerdata |
|              |                  |
| div:leftdiv1 |                  | 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:38:47.077

[这里](http://jsfiddle.net/Jfpak/3/)

此外，**导入 css 文件而不是使用内联样式是一种很好的做法。**我已经相应地修改了您的代码。

**HTML**

```
<div class="container">
            <div class="leftDiv2">
        </div>
            <div class="leftDiv1">
        </div>
            <div class="divcontainerdata">
        </div>
</div>​ 
```

**CSS**

```
div {
    height: 100px; /*optional*/
}

.leftDiv1 {
    background-color: red; /*optional*/
    clear: left;
    float: left;
    width: 300px;
}

.leftDiv2 {
    background-color: blue; /*optional*/
    clear:left;
    float: left;
    width: 300px;
}

.divcontainerdata {
    background-color: yellow; /*optional*/
    width: 100%;
    margin-left: 300px; /*margin-left = width of leftDiv1, leftDiv2*/
} 
```

​ ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:36:28.430

设置`float: left; clear: left`为前两个 div，然后设置`margin-left: 300px`为第三个 div。

```
.leftDiv1, .leftDiv2 {
    width: 300px;
    float: left;
    clear: left;
}

.divcontainerdata {
    margin-left: 300px; /* the width of the floated divs */
} 
```

[**演示**](http://dabblet.com/gist/3163650)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:51:43.620

```
<style>    
    #left {
    border: 1px solid #000000; /* Delete it */

    float: left;

    width: 300px;
    }

    #content {
    width: 100%;
    border: none;
    }
</style>

<div id="container">
    <div id="left">
    <div id="left_1">
        Left 1
    </div>
    <div id="left_2">
        Left 2
    </div>
    </div>
    <div id="content">
    Content
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:57:25.140

**HTML**

```
<div class="container">
    <div class="leftDiv2">div:leftdiv1</div>
    <div class="leftDiv1">div:leftdiv1</div>
    <div class="divcontainerdata">divcontainerdata</div>
</div>​ 
```

**CSS**

```
.leftDiv1, .leftDiv2{
    clear:left;
    width:300px;
    float: left;
    border:solid black 1px;
    margin:2px;
}
.divcontainerdata{
    border:solid black 1px;
    margin:2px;
    display:inline-block;
} 
```

[**演示**](http://jsfiddle.net/heera/cYp4T/)。

# cakephp - 使用某些路由“/”访问缓存视图时，CakePHP Auth 被忽略

> ID：11613545
> 
> 赞同：0
> 
> 时间：2012-07-23T13:31:36.483
> 
> 标签：cakephp, authentication, caching, routes, cakephp-1.3

我在控制器的索引操作上设置了视图缓存，使用

```
class DiaryController extends AppController {
  ...
  var $cacheAction = array('index' => "+56 hours");

  function index($week = null) {
    ...
  }
} 
```

在以下选项中`app/config/core.php`：

```
Configure::write('Cache.check', true);

...

Cache::config('default', array('engine' => 'File')); 
```

日记控制器（以及站点的其余部分！）上的索引操作应该只能由经过身份验证的用户访问，使用`AuthComponent`with

```
class AppController extends Controller {

  ...
  var $components = array('Auth', 'Security', 'Session','Cookie','RequestHandler');

  function beforeFilter() {

    $this->Auth->userModel = 'Admin';
    ...
  }
...
} 
```

我想使用将站点的根目录映射到我的登录表单

```
Router::connect('/', array('controller' => 'admin', 'action' => 'login')); 
```

在`app/config/routes.php`. 一切似乎都正常，直到我注销然后尝试`mytestsite.com/diary/index`在浏览器中访问。即使我没有登录，我仍然可以访问这些页面。我相信这是缓存的问题，因为我只能访问我有文件的 url `app/tmp/cache/views`。将索引操作的参数更改`$week`为我没有缓存文件的值会生成一条`You are not authorized to access that location.`消息。

奇怪的是，如果我将站点的根目录映射`DiaryController`到

```
Router::connect('/', array('controller' => 'diary', 'action' => 'index')); 
```

（再次`app/config/routes.php`）我没有这个问题。当我没有登录时，我无法访问缓存的日记索引视图。

有没有人遇到过这个问题？你能建议我可能错过的东西吗？或者您知道这是否是核心文件中的错误？我正在使用 CakePHP 1.3.15。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:50:10.137

这是一个较晚的响应，但原因是缓存视图操作会绕过所有控制器和组件回调。Auth 组件通过回调来完成它的工作。因此，当您缓存操作时，这些检查将被忽略。

您可以通过在 $cacheAction 中传递 'callbacks' => true 选项来强制触发回调，如下所示：

```
public $cacheAction = array(
    'index' => array('callbacks' => true, 'duration' => '+56 hours')
); 
```

但这部分违背了视图缓存的目的，即绕过所有控制器逻辑。

更多信息[在这里](http://book.cakephp.org/1.2/en/The-Manual/Developing-with-CakePHP/Controllers.html)。

# java - 当从 javascript 客户端调用 api 时，在 java api 中使用 2d 数组

> ID：11613546
> 
> 赞同：1
> 
> 时间：2012-07-23T13:31:36.217
> 
> 标签：java, javascript, api, cxf

我正在使用 Apache CXF 在 Java 中创建一个简单的 API，在 API 的一个函数中，其中一个输入需要是二维数组。

此 API 将从 javascript 客户端调用。

我对以下内容感到困惑-

(a) 我不想限制 Java 函数中二维数组参数的大小。这个参数的类型应该是什么 - 我应该使用数组列表吗？或者是其他东西？你能为二维数组的java部分提供一个示例声明吗？

(b) 当 javascript 客户端调用 API 时，它会发送二维数组中的数据。现在，有时数据将只是一个单维数组，而其他时候它将是一个二维数组......此外，每个维度的大小也会在 javascript 客户端对该函数的各种调用中有所不同。现在，Java API 收到函数调用后，如何处理 2d javascript 数组中包含的数据？

(c) 在从 Javascript 客户端发送 2d 数据时，我应该记住任何限制/规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:55:34.940

1.  使用列表列表而不是数组数组。
2.  如果客户端发送两种不同格式的数据，需要两种不同的方法，不能用同一种方法处理一维数组和二维数组
3.  在 java 端使用[Gson](http://code.google.com/p/google-gson/)序列化/反序列化 json 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:53:51.683

两种语言都没有二维数组类型。两者都使用数组数组处理此类数据。至于Java中的类型参数，只需使用方括号表示法`MyType[][]`，它表示一个对象数组的数组`MyType`。

当您说有时数据将是一维数组时，您将如何在 Java 中处理它，或者仅仅是您将拥有一个一维数组的数组？

用 Javascript 处理数据应该足够简单，只是一个嵌套循环。但是由于两种语言都不会强制每行具有相同长度的列的约束，如果您需要矩形二维数组，您可能需要做一些额外的事情。

不，对于您的 2d 数据进入 Javascript 没有特别的限制，只不过是将其他 Java 数据转换为 Javascript 的限制。

# python - python xml.sax错误“格式不正确 "

> ID：11613548
> 
> 赞同：1
> 
> 时间：2012-07-23T13:31:55.900
> 
> 标签：python, xml

假设我的 XML 文件中有以下标签：

```
<?xml version="1.0" encoding="utf-8"?>
<jobs>
<job>
<P class="Beaton"><FONT size=3><SPAN style="FONT-FAMILY: Symbol; COLOR: black; mso-ascii-font-family: 'Times New Roman'">�&lt;/SPAN><SPAN style="COLOR: black"><FONT face="Times New Roman"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Position accountability<o:p></o:p></FONT></SPAN></FONT></P>
<P class="Beaton"><FONT size=3><SPAN style="FONT-FAMILY: Symbol; COLOR: black; mso-ascii-font-family: 'Times New Roman'">�&lt;/SPAN><SPAN style="COLOR: black"><FONT face="Times New Roman"> <SPAN style="mso-spacerun: yes">&nbsp;</SPAN>55 FTEs <o:p></o:p></FONT></SPAN></FONT></P>
</job>
</jobs> 
```

以下是我的代码：

```
from xml.sax.handler import ContentHandler
import xml.sax

xml_path = 'windows/xml_file.xml'

try:
    parser = xml.sax.make_parser( )
    parser.parse(open(xml_path))

except (xml.sax.SAXParseException), e:
        print "*** PARSER error: %s" % e

Result :
*** PARSER error: windows/xml_file.xml:4:113: not well-formed <invalid token> 
```

谁能告诉我 p 标签有什么问题以及如何避免这种错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:34:47.837

问题可能出在您的`FONT`标签上；`size`应该引用属性的值，否则这根本不是有效的 XML。

您可能还会遇到问题`&nbsp;`，它不是有效的 XML 实体（尽管它在 XHTML 中有效）。此外，您的`<jobs>`标签未正确关闭；最后一行应该是`</jobs>`.

一般来说，如果您在读取 ​​XML 文件时遇到问题，第一件事始终是检查 XML 文件的格式是否正确。一种可能的方法是将其输入[W3C 验证器](http://validator.w3.org/check)。

# java - 分面搜索中的自动向下钻取

> ID：11613551
> 
> 赞同：1
> 
> 时间：2012-07-23T13:32:07.503
> 
> 标签：java, lucene, information-retrieval, faceted-search

**问题简介**

我使用 Apache 的 Lucene for java，我想知道如何在多面搜索中自动向下钻取。更准确地说，我想，给定一个分类级别，得到那个级别的各个方面。例如，如果我将 Open Directory 项目用作分类法，并且我在第 2 级寻找*剧院*，我想在分类法中下钻，采用更重要的路径。在这种情况下：艺术->表演艺术。这样我就可以对 perform_arts 中的类别进行事实搜索。

**问题**

我知道进行多面搜索很热门。在上面的示例中，我会这样做：

```
 // 2\. Query expansion
            IndexSearcher wnSearcher = new IndexSearcher(wnReader);
            //Query q = SynLookup.expand(querystr, wnSearcher, analyzer, "Contents", (float) 0.9);

            // 3\. Query             
            // the "title" arg specifies the default field to use
            // when no field is explicitly specified in the query.
            Query q = new QueryParser(Version.LUCENE_36, "Contents", analyzer).parse(querystr);            

            // 3\. search        
            Query matchAllDocs= new MatchAllDocsQuery();
            // Create the facets collector              
            FacetIndexingParams indexingParams = new DefaultFacetIndexingParams();
            FacetSearchParams facetSearchParams = new FacetSearchParams(indexingParams);
            CategoryPath top = new CategoryPath("Top/Arts/performing_arts",'/');
            FacetRequest neighborhoodFacetRequest = new CountFacetRequest(top, 13);          
            facetSearchParams.addFacetRequest(neighborhoodFacetRequest);
            FacetsCollector fc = new FacetsCollector(facetSearchParams, reader, taxonomyReader);
            IndexSearcher searcher = new IndexSearcher(reader);

            searcher.search(q, new QueryWrapperFilter(matchAllDocs), fc);

            // 4\. display results
            System.out.println("Results: ");
            List<FacetResult> res = fc.getFacetResults();
            printFacetResult(res); 
```

但是，我必须先知道创建 CategoryPath 的路径……而且我不知道如何获取整个结果集，然后达到我想要的级别。如果我将 CategoryPath 设置为 Top，我只会得到第一级的结果。

一个解决方案是首先获取第一级的结果，将具有最大权重的类别添加到路径中，然后执行新的分面搜索等等。但这非常低效！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:07:13.257

实际上，您不只是获得第一级，lucene 返回所有级别，但您需要使用 getSubResults 方法从 facetCollector 结果中获取它们。它实际上可以通过这种方式获得类别路径中的所有级别。除非您想提供对整个集合的深入分析，否则使用 MatchAllDocs 并不是那么好。使用多收集器并提供一些查询或过滤时间来限制您的结果可能更合适。

使用下面的代码片段，您可以遍历所有结果和所有子结果以找到您要查找的类别路径，然后在第一个查询上使用 DrillDown 查询

例如：

```
for (FacetResult res : fc.getFacetResults()){
//this is the top lvl facet
  FacetResultNode toplvl = res.getFacetResultNode();
  System.out.println(toplvl.getLabel() + " (" + toplvl.getValue() + ")");
  for (FaceResultNode secondlvl : toplvl.getSubResults()) {
      //second lvl facet categories
      System.out.println("  " + secondlvl.getLabel().getComponent(1) 
                    + " (" + secondlvl.getValue() + ")");
  }
}
//your orginal query 'q' + the your cat
 Query q2 = DrillDown.query(indexingParams, q, cat); 
```

# android - android：在应用程序中只显示来自 ldpi 的图像

> ID：11613553
> 
> 赞同：0
> 
> 时间：2012-07-23T13:32:09.947
> 
> 标签：android, hdpi, mdpi

我有我的安卓应用程序。为了测试，我在文件夹 drawable-ldpi、drawable-mdpi 和 drawable-hdpi 中放置了 3 个不同的图像。他们有相同的名字。我读过：240x320 - ldpi，320x480 - mdpi，480x800 - hdpi。我在我的设备（HTC Sensation）上测试了我的应用程序，但只有来自 drawable-ldpi 的图像显示（而且质量很差，很模糊）HTC 的感觉屏幕是 540x960。那么为什么来自drawable-hdpi的图像没有显示而来自drawable-ldpi的图像显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:37:02.613

几件事情要检查：

*   您的可绘制对象在每个资源文件夹中具有相同的名称
*   您在 AndroidManifest.xml 中设置了一个相当新的（自 hdpi 以来）api 版本

    使用-sdk android:minSdkVersion="8"

# mysql - 插入唯一行而不更新旧行

> ID：11613556
> 
> 赞同：0
> 
> 时间：2012-07-23T13:32:28.243
> 
> 标签：mysql, insert, insert-select

我在不同的数据库中有两个相似的表，我想从另一个插入一个。同时我想确保每次 mySql 遇到“重复 id”错误时，它都会在新表的底部插入行并分配一个新的唯一 id。我已经尝试过：
`INSERT...SELECT...ON DUPLICATE KEY UPDATE`
但是如果它找到“重复键”而不是更新前一行，我找不到让它插入新行的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:38:34.410

如果您可以`id`为复制到目标表的每条记录分配新的，无论`id`源表中的 先前是否存在于目标中，您都可以简单地不提供`id`并允许 MySQL 诉诸`NULL`导致值的默认`auto_increment`值待分配：

```
INSERT INTO destdb.tbl (colA, colB, colC)
SELECT colA, colB, colC
FROM   srcdb.tbl 
```

否则，您将需要使用类似的东西[`NULLIF()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_nullif)来`id`明确设置`NULL`它已经存在的位置，基于将表连接在一起`SELECT`：

```
INSERT INTO destdb.tbl (id, colA, colB, colC)
SELECT NULLIF(src.id, dst.id), src.colA, src.colB, src.colC
FROM   srcdb.tbl src LEFT JOIN destdb.tbl dst USING (id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:45:05.470

根据[http://dev.mysql.com/doc/refman/5.1/de/insert-select.html](http://dev.mysql.com/doc/refman/5.1/de/insert-select.html)上的文档，这可以通过以下查询来实现：

```
INSERT INTO `table2` SELECT (NULL, col1, col2, col3) FROM `table1` 
```

这样，自动增量值将保留为“NULL”，从而导致引擎为其提供一个新的 AI 值，而不是尝试将现有的值强制其中。

请不要因为语法给我扔石头，我还没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:46:22.890

```
If the id is autoincrement:
Create an additional column in the second table with a reference to the id value in the first table
Sample Select Query: 

SELECT unique_id, data FROM table_1 WHERE id='$id'

Sample Insert Query: 

INSERT INTO table_2 (table_1_unique_id, data) VALUES ($unique_id_from_first_table, $data)

This will solve any duplicate id problems and allow referencing between the two tables 
```

# php - 自动生成的表单输入字段，不会传递给注册表单

> ID：11613562
> 
> 赞同：1
> 
> 时间：2012-07-23T13:32:43.253
> 
> 标签：php, forms, autocomplete, registration, isset

我有一个注册表单，我使用脚本将位置转换为它的纬度和经度，我正在使用 lorenzsell / Geocoded-Autocomplete (https://github.com/lorenzsell/Geocoded-Autocomplete/blob/master/README )

它就像一个魅力，如果我填写地址，那么我的表单中带有 id filter_lat 和 filter_lng 的输入字段将填充正确的坐标。

所以我希望如果我将它发送到位于 register.php 中的注册表单，它会看到这些坐标。但它没有.. 其他所有内容都已定义，只有 filter_lat 和 filter_lng 没有。虽然这些是自动填写的，但这是否与它有关？

```
 <form method="POST" action="register.php">
                                    <table>
                                    <tr>
                                        <td>
                                            Email: <br/><input type="email" name="email" class="focussed_input" size="15" /><br>
                                        </td>
                                        <td>
                                            Password: <br/><input type="password" name="password" class="focussed_input" size="15" /><br />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Name:<br/><input type="text" name="name" class="focussed_input" size="15" /><br />
                                        </td>
                                        <td>
                                            Age: <br/><input type="text" name="age" class="focussed_input" size="15" /><br />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                        Address:<br/><input type=text id="mapaddress" class="focussed_input" /><br/>
                                        </td>
                                        <td>
                                            <input type="text" id="filter_lat" style="" />                                                                                                                  
                                            <input type="text" id="filter_lng" style="" />
                                            <input type="submit" value="I'm ready!" class="button_inverse" style="padding-left: 23px; padding-right:23px; margin-top:11px;" />
                                        </td>
                                    </tr>
                                </table>

                                </form> 
```

这就是表格，以及 register.php 代码：

```
<?php
echo $_POST['filter_lat'];
echo "include";
include("config.php");
echo "test";
if(isset($_POST["email"])&& isset($_POST["password"]) && isset($_POST["name"]) && isset($_POST["age"])){
    echo"na isset";
    $email = htmlentities(mysql_real_escape_string($_POST['email']));
                if(mysql_num_rows(mysql_query("SELECT * FROM users WHERE email ='$email';")) > 0){
                    echo "email already used";

                }
                else{
                    $password = hash('sha512', $salt . mysql_real_escape_string($_POST['password']));
                    $name = htmlentities(mysql_real_escape_string($_POST['name']));
                    $age = htmlentities(mysql_real_escape_string($_POST['age']));
                    $lat = htmlentities(mysql_real_escape_string($_POST['filter_lat']));
                    $lng = htmlentities(mysql_real_escape_string($_POST['filter_lng']));
                    $id = '';

                    mysql_query("INSERT INTO users (id, email, password, name, age, lat, lng, type) VALUES ('$id', '$email', '$password', '$name', '$age', '$lat', '$lng', '0');") or die(mysql_error());
                    echo "Account creation successful!";
                }
}

?> 
```

有人用过 lorenzsell 的自动填充器吗？或者有人知道如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:36:38.287

将 filter_lat 和 filter_lng 的 id 更改为 name。它应该看起来像这样 -

```
 <input type="text" name="filter_lat" style="" />                                                                                                                  
 <input type="text" name="filter_lng" style="" /> 
```

您在服务器端使用 $_POST 检索数据，但您无法检索没有名称的数据。所以基本上，您试图检索不存在的数据 filter_lat 。

属性 id 主要用于 CSS 和 javascript/jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:37:11.550

问题是他们没有定义“名称”属性：

```
<input type="text" id="filter_lat" style="" />                                                                                                                  
<input type="text" id="filter_lng" style="" /> 
```

改成：

```
<input type="text" id="filter_lat" style=""  name="filter_lat"/>                                                                                                                  
 <input type="text" id="filter_lng" style="" name="filter_lng"/> 
```

# api - 批量请求返回尝试创建广告组时发生未知错误

> ID：11613566
> 
> 赞同：3
> 
> 时间：2012-07-23T13:32:54.783
> 
> 标签：api, facebook-graph-api, ads

我使用批处理请求来完成操作。我发送了 50 次更新操作，它的返回成功没有问题。但是，如果我为创建新的广告组发出超过 15 个的批量请求，则它的返回数组；数组（[error_code] => 1 [error_msg] => 发生未知错误）

但是我检查了我的广告面板，每个操作都完成了！它返回错误，但我的操作也做了。所以我不知道新的广告组 ID。

如果我将批处理操作数限制为 15 个，我也会尝试，一切都很好，没问题。所以问题是当批量请求超过 15 个返回值时出错。我认为它的错误。

我使用最后一个 php sdk。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:46:56.727

这是 API 的一个已知问题；由于超时，大量的广告创建调用通常会失败 - 请参阅此错误报告以获取更多信息：[https ://developers.facebook.com/bugs/208797482578964](https://developers.facebook.com/bugs/208797482578964)

降低您的通话费率，应该没问题

# mysql - 影响2台服务器的存储过程

> ID：11613569
> 
> 赞同：1
> 
> 时间：2012-07-23T13:32:59.303
> 
> 标签：mysql, stored-procedures

当我向表中插入数据时，我想创建一个 MYSQL 存储过程，数据也会插入到其他服务器表中。

我知道这在 ORACLE 数据库中是可能的，但我不知道它是否适用于 MYSQL。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:41:35.230

是的，这可以在 MySQL 中使用以下方法：

1.  **表联合：**创建一个与主表相同的新联合表，`ENGINE=FEDERATED`该表将具有 MySQL 连接字符串用户名密码和其他服务器的主机 ID。在另一台服务器上，您需要创建一个新用户并向该用户授予插入权限。在主表上写入一个`TRIGGER`并`AFTER INSERT`在主表上插入到联合表中。

2.  **复制：**设置从 server1 (MASTER) 到 server2 (SLAVE) 的复制并将此表添加到复制中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:44:49.703

您想定期在多个数据库之间复制所有数据（表中的）吗？

[http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

或者你想传播一个插入？

你的答案可能在

[如何创建链接服务器 MySQL](https://stackoverflow.com/questions/5370970/how-to-create-linked-server-mysql)

# android - 在android中启动加载屏幕并显示直到网络建立

> ID：11613573
> 
> 赞同：-3
> 
> 时间：2012-07-23T13:33:16.370
> 
> 标签：android

我开发了一个android应用程序，它允许在配置后连接到WIFI，所以需要时间来完成。而且我认为窗口加载条件是在应用程序启动时开始，并在网络配置完成后消失。请帮我创建这个加载窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:37:28.100

您可以使用 Progess Dialog，在您的应用程序启动时启动它（例如，您的主要活动的 onCreate()）并在您连接到 Internet 时结束它。

# php - HTACCESS：如何简化我的 RewriteRule

> ID：11613577
> 
> 赞同：2
> 
> 时间：2012-07-23T13:33:24.377
> 
> 标签：php, .htaccess, mod-rewrite

我正在研究我的网站的照片部分，并在选择哪些图片查看您有不同的导航菜单以获得您想要的（最新，趋势，朋友，喜爱等），还可以按日期对图片进行排序, 评分, 意见等

哦，还有一个分页系统，我用它来每页只显示几张图片。

现在我有这个：

```
RewriteRule ^photo$ photo.php?tab=latest
RewriteRule ^photo/trending$ photo.php?tab=trending
RewriteRule ^photo/friends$ photo.php?tab=friends
RewriteRule ^photo/favorite$ photo.php?tab=favorite

RewriteRule ^photo/page:([0-9]+)/$ photo.php?tab=latest&page=$1
RewriteRule ^photo/trending/page:([0-9]+)/$ photo.php?tab=trending&page=$1
RewriteRule ^photo/friends/page:([0-9]+)/$ photo.php?tab=friends&page=$1
RewriteRule ^photo/favorite/page:([0-9]+)/$ photo.php?tab=favorite&page=$1

RewriteRule ^photo/sort:([A-Za-z0-9]+)/page:([0-9]+)/$ photo.php?tab=latest&page=$2&sort=$1
RewriteRule ^photo/trending/sort:([A-Za-z0-9]+)/page:([0-9]+)/$ photo.php?tab=trending&page=$2&sort=$1

And so on 
```

我想知道是否有某种可能性让 .htaccess 文件检测到任何`page:([0-9]+)`内容，并自动将带有页码的变量发送到 php 文件。这会很有帮助，因为我还有一篇文章、视频和论坛部分，它们将具有相同的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:54:49.710

尝试用这个替换：

```
# Extract out the "page" and "sort" parts of the URI, and append them to the query string
RewriteRule (.*)/page:([0-9]+)/(.*) /$1/$3?page=$2 [L,QSA]
RewriteRule (.*)/sort:([A-Za-z0-9]+)/(.*) /$1/$3?sort=$2 [L,QSA]

# Proceed with the regular routing
RewriteRule ^photo/?$ photo.php?tab=latest  [L,QSA]
RewriteRule ^photo/trending/?$ photo.php?tab=trending [L,QSA]
RewriteRule ^photo/friends/?$ photo.php?tab=friends [L,QSA]
RewriteRule ^photo/favorite/?$ photo.php?tab=favorite [L,QSA] 
```

这里的关键是在任何地方都使用`QSA`标志，这样当查询字符串放在一起时，可以根据需要添加新的位。另一件事是常规路由部分，我添加`/?`到正则表达式匹配的末尾，因为对于页面/排序处理，您可能会以斜杠结尾。

# c# - HRESULT 异常：0x80040E01

> ID：11613584
> 
> 赞同：0
> 
> 时间：2012-07-23T13:33:50.770
> 
> 标签：c#, sql, sharepoint, sharepoint-2010, sharepoint-search

我正在尝试使用以下代码查询共享点搜索

```
 protected ResultTable Search(String query, SPWeb currentWeb)
    {
        ResultTable rt = null;

        try
        {
            FullTextSqlQuery q = GetFullTextSqlQuery(currentWeb);

            q.QueryText = query;

            q.RowLimit = int.MaxValue;
            rt = ((ResultTableCollection)q.Execute())[ResultType.RelevantResults];
            //q.Dispose();

        }
        catch (Exception ex)
        {
            rt = null;
            Logging.LogException(ex);
        }

        return rt;
    }

    /// <summary>
    /// Create base FullTextSqlQuery
    /// </summary>
    /// <returns>FullTextSqlQuery</returns>
    protected static FullTextSqlQuery GetFullTextSqlQuery(SPWeb currentWeb)
    {
        FullTextSqlQuery q = new FullTextSqlQuery(currentWeb.Site);

        q.Culture = new CultureInfo(1033);

        q.EnableStemming = false;
        q.TrimDuplicates = true;

        if (SPSecurity.AuthenticationMode != System.Web.Configuration.AuthenticationMode.Windows)
        {
            q.AuthenticationType = QueryAuthenticationType.PluggableAuthenticatedQuery;
        }
        else
        {
            q.AuthenticationType = QueryAuthenticationType.NtAuthenticatedQuery;
        }

        q.RowLimit = 200;

        q.StartRow = 0;
        q.IgnoreAllNoiseQuery = false;
        q.ResultTypes = ResultType.RelevantResults;

        return q;

    } 
```

不管我做什么，我都会得到这个异常：HRESULT 的异常：0x80040E01

23-07-2012 14:53:45 Documenten 搜索 System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail] 来自 HRESULT 的异常：0x80040E01

服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) 在 System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)。 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) 在 System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)。 ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息）

在 [0] 处重新引发异常：在 Microsoft.Office 的 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Microsoft.Office.Server.Search.Administration.SearchServiceApplicationProxy.<> *c_DisplayClass4.b* _3(ISearchServiceApplication serviceApplication) 在 Microsoft.Office.Server.Search.Administration.SearchServiceApplicationProxy上的 Server.Search.Query.ISearchQueryServiceApplication.Execute(QueryProperties 属性) 。 DoSpLoadBalancedUriWsOp[T](WebServiceBackedOperation`1 webServiceCall, Int32 timeoutInMilliseconds, Int32 wcfTimeoutInMilliseconds, String operationName) at Microsoft.Office.Server.Search.Administration.SearchServiceApplicationProxy.DoWebServiceBackedOperation[T](String operationName, Int32 timeoutInMilliseconds, Int32 wcfTimeoutInMilliseconds, WebServiceBackedOperation`1 webServiceCall) 在 Microsoft.Office.Server.Search.Administration.SearchServiceApplicationProxy.Execute(QueryProperties 属性) 在 Microsoft.Office.Server.Search.Query.Query.Execute() 在 Rapportages.RapportageDocumenten.RapportageDocumenten.Search(字符串查询，SPWeb当前网络）

我阅读了我应该减少行限制的建议，但即使行限制低至 20，我也会遇到此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:45:01.177

将 fulltextsqlquery 放入 using 解决了该问题。不要问我为什么。

```
 using (FullTextSqlQuery q = GetFullTextSqlQuery(web))
                    {
                        q.QueryText = sqlQuery.ToString();
                        rt = ((ResultTableCollection)q.Execute())[ResultType.RelevantResults];
                        Logging.LogMessage(rt.RowCount.ToString());
                    } 
```

# c# - signalR 网络农场

> ID：11613585
> 
> 赞同：9
> 
> 时间：2012-07-23T13:33:52.290
> 
> 标签：c#, asp.net-mvc-3, signalr

我已经成功地使用 signalR 在 ASP.NET MVC3 中创建了一个简单的聊天应用程序。在我的开发机器上，一切都在本地运行良好。

应用程序是否会在具有多个 Web 服务器（例如上线）的 Web 场环境中以相同的方式工作？signalR 如何跨这些服务器管理其集线器？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T15:29:54.540

请参阅 David Fowler 关于 SignalR v0.5 中 webfarm 支持的博客文章：[http ://weblogs.asp.net/davidfowler/archive/2012/05/02/signalr-0-5.aspx](http://weblogs.asp.net/davidfowler/archive/2012/05/02/signalr-0-5.aspx)

简而言之，SignalR 目前支持 Redis 和 Windows Azure 服务总线，作为在 webfarm 中的多个服务器之间进行通信的一种方式。

# objective-c - 核心数据使用过滤器 NSPredicate 从文本字段创建新的 UIView

> ID：11613587
> 
> 赞同：0
> 
> 时间：2012-07-23T13:33:53.637
> 
> 标签：objective-c, uiview, uiviewcontroller, nspredicate

我有一些问题如何实现从选定的数据库及其属性组创建新视图。在我的应用程序中，所有资源（数据）都显示在 mainviewController.xib 中。在第二个 viewController 中，我有文本字段可以将数据添加到我的基础中。在这个文本字段中是组。当我向我的基地写一个新组时，我想添加新视图。当我的组名与我实际基地中的组名相同时，我什么也不做。在这里，我给出了一些我使用的代码。在我的代码中，grupa 作为组。此代码来自第二个视图。

```
- (IBAction) saveData
{
    NSLog(@"saveData");
    [self dismissKeyboard];
    Destination *dest = (Destination *)[NSEntityDescription insertNewObjectForEntityForName:@"Destination" 
                                                                     inManagedObjectContext:managedObjectContext];
    dest.nazwa = nazwaTextField.text;
    dest.zasob = zasobTextField.text;
    dest.grupa = grupaTextField.text;
    dest.typzasobu = typzasobuTextField.text;
    dest.tag = [NSNumber numberWithInt:[_arrayLogics indexOfObject:typzasobuTextField.text]];

    NSError *error;

    // here's where the actual save happens, and if it doesn't we print something out to the console
    if (![managedObjectContext save:&error])
    {
        NSLog(@"Problem saving: %@", [error localizedDescription]);
    }

    // **** log objects currently in database ****
    // create fetch object, this object fetch's the objects out of the database
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Destination" inManagedObjectContext:managedObjectContext];
    [fetchRequest setEntity:entity];
    NSArray *fetchedObjects = [managedObjectContext executeFetchRequest:fetchRequest error:&error];

    for (NSManagedObject *info in fetchedObjects)
    {
        NSLog(@"Nazwa Zasobu: %@", [info valueForKey:@"nazwa"]);
        NSLog(@"Zasób: %@", [info valueForKey:@"zasob"]);
        NSLog(@"Grupa: %@", [info valueForKey:@"grupa"]);
        NSLog(@"Typ zasobu: %@", [info valueForKey:@"typzasobu"]);
    }

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Potwierdzenie" message:@"Zasób zapisany" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];   

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:38:40.713

我*想*我明白了...

*   您的主视图上有一个资源列表 (Zasób)。
*   **这些资源按“Grupa”字段分组。**
*   您有另一个 viewController 可以在其中添加/编辑资源。

如果我错了，请纠正我，但我认为您希望您的主视图看起来非常像这样： ![在此处输入图像描述](../Images/d3fb0867d84746afd1468e0c8d244833.png)

如果这是正确的，我建议使用[UITableViewStyleGrouped](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/c/econst/UITableViewStyleGrouped)的表格样式查看[UITableViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)和 [UITableView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/c/econst/UITableViewStyleGrouped)。这样您就可以按照 Apple 推荐的方式添加/编辑资源列表。

流程看起来像这样： ![在此处输入图像描述](../Images/edc14a5c69795228cf0d438a1fb0da04.png)

您需要了解[NSSortDescriptor](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)（从数据存储中获取数据的顺序），以及如何插入表的[数据源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)和[委托方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)，但这是值得的

这里有一些资源可以帮助您获取知识：

*   [基本 UITableVIew 教程](http://kurrytran.blogspot.co.uk/2011/10/ios-5-storyboard-uitableview-tutorial.html)
*   [Apple 关于表格视图的指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

# ruby-on-rails - Ruby on Rails 中的多态关联

> ID：11613589
> 
> 赞同：0
> 
> 时间：2012-07-23T13:34:03.393
> 
> 标签：ruby-on-rails, ruby, polymorphic-associations, polymorphism

我的尝试是为模型创建一个多态关联，`Items`并且`Venues`与`Photos`. 我最初使用[Rails 最佳实践 - 你如何设计你的模型以进行多次上传？](http://rails-bestpractices.com/questions/7-how-do-you-design-your-model-for-multiple-upload) 但有一些错误，这是我到目前为止的代码：

```
class Item < ActiveRecord::Base
  has_many :photos, :as => :assetable, :class_name => "Item::Photo", :dependent => :destroy
  accepts_nested_attributes_for :photos

class Venue < ActiveRecord::Base
  has_many :photos, :as => :assetable, :class_name => "Photo", :dependent => :destroy
  accepts_nested_attributes_for :photos

class Photo < ActiveRecord::Base
  belongs_to :asset
end

class Asset < ActiveRecord::Base
  has_many :photos
  belongs_to :assetable, :polymorphic => true
  delegate :url, :to => :attachment
end

class Venue::Photo < Asset
  has_attached_file :attachment, 
    :styles => { 
      :large => "640x480", 
      :medium => "300x300", 
      :thumb => "100x100" 
    },
    :path => "/:style/:id/:filename"
end

class Item::Photo < Asset
  has_attached_file :attachment, 
    :styles => { 
      :large => "640x480", 
      :medium => "300xa300", 
      :thumb => "100x100" 
    },
    :path => "/:style/:id/:filename"

class VenuesController < ApplicationController

# GET /venues
# GET /venues.json
def index
  #@venues = Venue.all
  params[:page] ||= 1
  @venues = Venue.paginate(:page => params[:page])

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @venues }
  end
end

  # GET /venues/1
  # GET /venues/1.json
  def show
    @venue = Venue.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @venue }
    end
  end

  # GET /venues/new
  # GET /venues/new.json
  def new
    @venue = Venue.new
    5.times do 
      @venue.assets.build 
    end

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @venue }
    end
  end

  # GET /venues/1/edit
  def edit
    @venue = Venue.find(params[:id])
    5.times { @venue.assets.build }
  end

  # POST /venues
  # POST /venues.json
  def create
    @venue = Venue.new(params[:venue])
    #@venue.tag_list ="asian, chinese" 

    respond_to do |format|
      if @venue.save
        format.html { redirect_to @venue, notice: 'Venue was successfully created.' }
        format.json { render json: @venue, status: :created, location: @venue }
      else
        format.html { render action: "new" }
        format.json { render json: @venue.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /venues/1
  # PUT /venues/1.json
  def update
    @venue = Venue.find(params[:id])

    respond_to do |format|
      if @venue.update_attributes(params[:venue])
        format.html { redirect_to @venue, notice: 'Venue was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @venue.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /venues/1
  # DELETE /venues/1.json
  def destroy
    @venue = Venue.find(params[:id])
    @venue.destroy

    respond_to do |format|
      format.html { redirect_to venues_url }
      format.json { head :no_content }
    end
  end
end 
```

错误消息 当我尝试编辑场所时收到错误消息“未知属性：assetable_id”，当我尝试编辑项目时收到错误消息“nil:NilClass 的未定义方法 `photos'”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:46:52.307

您是否按照指南中的说明设置了 db？

你为什么定义模型`photo`和`has_many :photos`？

如果您的照片风格相同，则不需要 STI。

# java - DatatypeConverter.parseDate 输出错误的日期

> ID：11613590
> 
> 赞同：1
> 
> 时间：2012-07-23T13:34:09.333
> 
> 标签：java, datetime, timezone, date-conversion

鉴于这一小段代码：

```
// import javax.xml.bind.DatatypeConverter;

Date date = DatatypeConverter.parseDate("2012-07-12-04:30").getTime();
System.out.println(date);
Date date2 = DatatypeConverter.parseDate("2012-07-12+00:00").getTime();
System.out.println(date2); 
```

输出是：

```
Thu Jul 12 00:00:00 VET 2012
Wed Jul 11 19:30:00 VET 2012 
```

为什么转换日期比给定日期晚 4:30？我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:39:37.973

“2012-07-12+00:00” - UTC 时区 2012 年 7 月 12 日 00:00 或委内瑞拉时区 2012 年 7 月 11 日 19:30。

您在本地时区中获得该时间的字符串表示，但无论如何 Date 类是时区绑定到 UTC

# structuremap - ASP.NET WebApi 操作过滤器和依赖范围

> ID：11613592
> 
> 赞同：3
> 
> 时间：2012-07-23T13:34:15.210
> 
> 标签：structuremap, asp.net-web-api, ravendb

为了在 ASP.NET WebApi 中刷新对 RavenDB 的更改，我创建了以下操作过滤器：

```
public class RavenDbUnitOfWorkAttribute : ActionFilterAttribute
{
    public Func<IDocumentSession> SessionFactory { get; set; }

    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        var session = SessionFactory.Invoke();

        if (session != null && actionExecutedContext.Exception == null)
        {
            session.SaveChanges();
        }

        base.OnActionExecuted(actionExecutedContext);
    }
} 
```

为了注入，`IDocumentSession`我创建了一个自定义`IFilterProvider`，它遍历每个过滤器并使用 setter 注入（StructureMap）设置任何依赖项。

我想知道实例的`IFilterProvider`范围如何。阅读[这篇文章](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)，控制器似乎是根据请求创建的。

目前，我正在`IDocumentSession`使用 StructureMap 明确界定每个请求的范围。问题是，如果我改为依赖`IDependencyScope`（使用嵌套容器的）相同的实例会`IDocumentSession`被注入到我的动作过滤器中吗？

### [更新]

进一步测试，似乎动作过滤器不使用与控制器相同的依赖范围。但是，我不希望在我的 Controller 中有用于刷新会话的代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T11:21:12.323

[当您在JabbR](http://jabbr.net)中实际回答您自己的问题时，使用`GetDependencyScope`扩展方法`HttpRequestMessage`应该可以解决您的问题：

```
var session = Request.GetDependencyScope().GetService(typeof(IDocumentSession)); 
```

# android - Android：如何将字节数组转换为位图？

> ID：11613594
> 
> 赞同：12
> 
> 时间：2012-07-23T13:34:22.960
> 
> 标签：android, bitmap, bytearray

我正在尝试将一张图像从 byte[] 转换为 Bitmap 以在 Android 应用程序中显示该图像。

byte[] 的值是由数据库获取的，我检查它是否为空。之后，我想转换图像但无法成功。程序显示 Bitmap 的值为空。

我认为在转换过程中存在一些问题。

如果您知道任何提示，请告诉我。

```
byte[] image = null;
Bitmap bitmap = null;
        try {
            if (rset4 != null) {
                while (rset4.next()) {
                    image = rset4.getBytes("img");
                    BitmapFactory.Options options = new BitmapFactory.Options();
                    bitmap = BitmapFactory.decodeByteArray(image, 0, image.length, options);
                }
            }
            if (bitmap != null) {
                ImageView researcher_img = (ImageView) findViewById(R.id.researcher_img);
                researcher_img.setImageBitmap(bitmap);
                System.out.println("bitmap is not null");
            } else {
                System.out.println("bitmap is null");
            }

        } catch (SQLException e) {

        } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T13:42:56.473

使用下面的行将字节转换为位图，它对我有用。

```
 Bitmap bmp = BitmapFactory.decodeByteArray(imageData, 0, imageData.length); 
```

您需要将上述行**放在循环之外**，因为它需要字节数组并转换为位图。

PS :- 这里**imageData 是**图像的字节数组

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T13:41:22.083

从您的代码中，您似乎获取了字节数组的一部分并使用该`BitmapFactory.decodeByteArray`部分中的方法。您需要在方法中提供整个字节数组`BitmapFactory.decodeByteArray`。

**从评论编辑**

您需要更改您的选择查询（或至少知道将图像的 blob 数据存储在数据库中的列的名称（或索引））。也不要`getByte`使用[ResultSet](http://developer.android.com/reference/java/sql/ResultSet.html)类的`getBlob`方法。假设列名是. 有了这些信息，将您的代码更改为以下内容：`image_data`

```
byte[] image = null;
Bitmap bitmap = null;
    try {
        if (rset4 != null) {
                Blob blob = rset4.getBlob("image_data"); //This line gets the image's blob data
                image = blob.getBytes(0, blob.length); //Convert blob to bytearray
                BitmapFactory.Options options = new BitmapFactory.Options();
                bitmap = BitmapFactory.decodeByteArray(image, 0, image.length, options); //Convert bytearray to bitmap
        //for performance free the memmory allocated by the bytearray and the blob variable
        blob.free();
        image = null;
        }
        if (bitmap != null) {
            ImageView researcher_img = (ImageView) findViewById(R.id.researcher_img);
            researcher_img.setImageBitmap(bitmap);
            System.out.println("bitmap is not null");
        } else {
            System.out.println("bitmap is null");
        }

    } catch (SQLException e) {

    } 
```

# row - ace:dataTable 单双击行选择监听器

> ID：11613595
> 
> 赞同：2
> 
> 时间：2012-07-23T13:34:29.827
> 
> 标签：row, selection, icefaces-3, ace-datatable

是否可以在同一个 ace:dataTable 中处理甚至单击和双击行选择以便将它们关联两种不同的行为？示例：我需要通过双击选择打开行详细信息，并且我只需要通过单击选择行。

# menu - Wordpress 将子菜单添加到自定义菜单

> ID：11613597
> 
> 赞同：7
> 
> 时间：2012-07-23T13:34:33.850
> 
> 标签：menu, wordpress

在我正在创建的 wordpress 插件中，它正在创建一个带有子菜单页面的新顶级管理菜单。这是我的代码：

```
add_menu_page('Eastview Custom', 'Eastview Custom', 5,"eastview-custom");
add_submenu_page("eastview-custom","GLS Lunch Orders","GLS Lunch",5,'glsLunch','glsLunch'); 
```

所以这段代码创建了一个新的管理菜单，“Eastview Custom”。然后它添加了两个子链接：“Eastview Custom”和“GLS 午餐”。问题是我不希望“Eastview Custom”作为子链接。我希望唯一的子链接是“GLS 午餐”。我不知道该怎么做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T14:35:15.557

根据法典

> 在插件创建自己的顶级菜单的情况下，第一个子菜单通常与顶级菜单具有相同的链接标题，因此链接将被复制。通过第一次调用 add_submenu_page 函数并赋予 parent_slug 和 menu_slug 参数相同的值，可以避免重复的链接标题。

您可以在此页面上看到：http: [//codex.wordpress.org/Adding_Administration_Menus#Sub-Menus](http://codex.wordpress.org/Adding_Administration_Menus#Sub-Menus)

因此，根据 Codex，您应该能够拥有以下内容（请注意，我已将您的用户级别参数替换为已弃用的功能，并将其全部标准化为单引号）；

```
add_menu_page('Eastview Custom', 'Eastview Custom', 'manage_options', 'my-top-level-handle');
add_submenu_page( 'my-top-level-handle', 'GLS Lunch Orders', 'GLS Lunch', 'manage_options', 'my-top-level-handle'); 
```

现在你会认为这会根据 Codex 起作用——但事实并非如此。它不会仅仅因为只有一个子菜单项而显示任何子菜单项。如果您添加另一个项目，您会看到这有效，即；

```
add_menu_page('Eastview Custom', 'Eastview Custom', 'manage_options', 'my-top-level-handle');
add_submenu_page( 'my-top-level-handle', 'GLS Lunch Orders', 'GLS Lunch', 'manage_options', 'my-top-level-handle');
add_submenu_page( 'my-top-level-handle', 'New Item', 'New item', 'manage_options', 'new-handle'); 
```

希望这会有所帮助，可惜我找不到单个列表项的答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T15:13:31.617

另一种方法是您可以在创建主菜单后删除子菜单

```
add_menu_page('Eastview Custom', 'Eastview Custom', 5,"eastview-custom");
add_submenu_page("eastview-custom","GLS Lunch Orders","GLS Lunch",5,'glsLunch','glsLunch');
remove_submenu_page("eastview-custom", "eastview-custom"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T15:08:13.590

你可以使用这个功能

```
function custom_add_admin_menu_page($args = []) {
    $args = wp_parse_args($args, [
        'page_title' => '',
        'menu_title' => '',
        'capability' => 'manage_options',
        'function'   => false',
        'menu_slug'  => '',
        'icon_url'   => '',
        'position'   => 20,
    ]);
   add_menu_page(
        $args['page_title'],
        $args['menu_title'],
        $args['capability'],
        $args['menu_slug'],
        $args['function'],
        $args['icon_url'],
        $args['position']
    );

    add_action('admin_head', function () use ($args) {
        if (!$args['function']) {

            remove_submenu_page($args['menu_slug'], $args['menu_slug']);
        }
    }, 99);

} 
```

并使用如下

```
custom_add_admin_menu_page([
    'page_title' => __('your page title', 'your domain'),
    'menu_title' => __('your menu title', 'your domain'),
    'menu_slug'  => 'your slug',
    'icon_url'   => 'dashicons-page',
    'position'   => 20,
]); 
```

# android - 在另一个布局中包括布局

> ID：11613599
> 
> 赞同：2
> 
> 时间：2012-07-23T13:34:35.973
> 
> 标签：android

我想在我的一个应用程序的另一个布局中包含一个布局。但我无法在标签的帮助下做到这一点。它显示错误消息，您必须在包含标签中指定一个布局：。这里是两个xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

      <include 
        android:id="@layout/linearlayout"

        />  
</LinearLayout> 
```

这是第二个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/linearlayout"
    android:orientation="vertical"
    android:background="@color/LabelColorLight" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent"
    >
    <naseeb.bar.DashboardLayout
        android:id="@+id/dashboard"
        android:layout_width="match_parent" 
        android:layout_height="0dip"
        android:layout_weight="1">

        <Button
            android:id="@+id/myprofile"
            style="@style/HomeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableTop="@drawable/ic_home_myprofile"
            android:text="@string/home_myprofile" />

        <Button
            android:id="@+id/beermail"
            style="@style/HomeButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawableTop="@drawable/ic_home_beermail"
            android:text="@string/home_beermail" />

        <Button 
            android:id="@+id/beerstyles" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            style="@style/HomeButton"
            android:text="@string/home_beerstyles" 
            android:drawableTop="@drawable/ic_home_styles" />

        <Button 
            android:id="@+id/offlineratings" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            style="@style/HomeButton"
            android:text="@string/home_offlineratings" 
            android:drawableTop="@drawable/ic_home_offline" />

        <Button 
            android:id="@+id/places" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            style="@style/HomeButton"
            android:text="@string/home_places" 
            android:drawableTop="@drawable/ic_home_places" />

        <Button 
            android:id="@+id/top50" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            style="@style/HomeButton"
            android:text="@string/home_top50" 
            android:drawableTop="@drawable/ic_home_top50" />

        <Button 
            android:id="@+id/events" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            style="@style/HomeButton"
            android:text="@string/home_events" 
            android:drawableTop="@drawable/ic_home_events" />

        <Button 
            android:id="@+id/bycountry" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            style="@style/HomeButton"
            android:text="@string/home_bycountry" 
            android:drawableTop="@drawable/ic_home_bycountry" />
    <!--    <Button 
            android:id="@+id/naseeb"
            android:drawable="@drawable/ic_launcher"
            />  -->

    </naseeb.bar.DashboardLayout>
    </LinearLayout>
    <!--     <Button
        android:id="@+id/drinking_status"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="10dp"

        android:padding="10dip"
        android:background="@color/Orange" 
        android:gravity="center"
        android:visibility="gone" /> --> 
```

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T13:38:18.027

你的`include`标签应该有一个`layout`属性。与`id`任何其他元素一样使用。

```
<include android:id="@+id/whatever" layout="@layout/linearlayout" /> 
```

此外，与任何其他标签一样，该`id`属性不是必需的。

# email - 是否可以在 cakephp 开发模式下关闭电子邮件发送？

> ID：11613601
> 
> 赞同：0
> 
> 时间：2012-07-23T13:34:42.293
> 
> 标签：email, cakephp, development-mode

在开发模式下，没有必要发送电子邮件（并且在大多数情况下可能是垃圾邮件）。我们希望能够在日志中看到生成的电子邮件，但不执行电子邮件传递。

当站点以生产模式运行时，我们希望像往常一样发送交货。

这可能在某个配置文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:44:58.537

你*可以*做一些简单的事情：

```
if(Configure::read('debug')==0) {
   // send the email
} 

// log the email has been sent
// etc 
```

并且这只会在您处于生产状态时发送电子邮件（假设使用 Cake 的默认调试级别 -`0, 1, 2` 但这可能会产生很多额外的工作。uzyn 评论中的问题看起来像一个更强大的解决方案。

# javascript - 如何获取当前应用程序使用的总 html5 存储大小

> ID：11613604
> 
> 赞同：9
> 
> 时间：2012-07-23T13:34:47.747
> 
> 标签：javascript, html, local-storage

我需要一种方法来查找应用程序在运行时使用 HTML5 `sessionStorage`/所占用的总大小。`localStorage`

我不想要基于分析器的方法。

我目前正在做的是-

```
var data = 0;
for(var v in window.sessionStorage){
 data += window.sessionStorage.getItem(v); 
}

console.log(data);//.length to get char length 
```

然后我将此值复制粘贴到文本文件中并检查大小。

丑陋，仍然对我没有帮助。HTML5 API 中有没有内置的方法（任何方法）？

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-23T23:07:27.023

**不，不是跨浏览器**。IE[有它](http://msdn.microsoft.com/en-us/library/cc197016%28v=VS.85%29.aspx)，其他的没有。但当然，可以计算*域上*剩余的大小。请参阅以下示例。

仅适用于 IE：

```
var remSpace = window.localStorage.remainingSpace; 
```

对于 FF/Chrome/Safari：

```
 var limit = 1024 * 1024 * 5; // 5 MB
 var remSpace = limit - unescape(encodeURIComponent(JSON.stringify(localStorage))).length; 
```

Opera：5 MB 是标准的，但浏览器提供了增加限制，因为应用程序需要更多空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T01:52:54.163

我在尝试找到自己的解决方案时发现了这个问题，并想分享我最终的结果，以防万一它可能对其他人有帮助。

简而言之，当我向 localStorage 添加一个值时，我将它的键放入一个数组中。然后，在向 localStorage 写入其他内容之前，我会遍历这些键并获取它们的长度之和，以确保我没有超过我认为合适的阈值。

如果 localStorage 大于 2Mb（在这种情况下），则从 localStorage 中删除第一项，从数组中删除该条目，然后写入新条目。

```
// check the size of localStorage

var localStorageArray = [];
var localStorageSize = 0;

for ( var i=0; i < localStorageArray.length; i++ ) {
    localStorageSize += localStorage.getItem(localStorageArray[i]).length;
}

// save to localStorage if it has not been saved already

if ( !localStorage.getItem(key) ){
    if ( localStorageSize < 2000000 ) {
        localStorage.setItem(key, value);
        localStorageArray.push(key);
    } else {
        localStorage.removeItem(localStorageArray[0]);
        localStorageArray.shift();
        localStorage.setItem(key, value);
        localStorageArray.push(key);
    }
} 
```

# asp.net - ASP.NET 应用程序中的“数据库 x 已恢复”

> ID：11613605
> 
> 赞同：0
> 
> 时间：2012-07-23T13:34:53.087
> 
> 标签：asp.net, sql-server, sql-server-2005

我在 ASP.NET 3.5 和 SQL Server 2005 中提取报告。有时（不是所有时间）运行报告后，我收到此消息，表明数据库 XXX 正在恢复，请稍候...

我的问题是我什至没有在我的应用程序中使用该数据库。我的报告正在从另一个数据库中提取数据。这条消息的真正含义是什么？我需要担心吗。

我之前在开发环境中得到了几次，但现在我也在生产环境中得到了它。

# asp.net-mvc - 将对象从链接发送到控制器

> ID：11613613
> 
> 赞同：0
> 
> 时间：2012-07-23T13:35:15.670
> 
> 标签：asp.net-mvc

我有一个采用 Model 类型的视图

```
public class Product
{
    public string PartNumber { get; set; }
    public string ShortDescription { get; set; }
    public string LongDescription { get; set; }
    public string ImageUrl { get; set; }
    public List<Document> Documents { get; set; }

    public Product()
    {
        Documents = new List<Document>();
    }

} 
```

单击以下链接时，我想调用控制器并以某种方式将 List 作为参数传递给控制器

```
 <a href="@Url.Action("Browse", "Home", new { docList= Model.Douments})" data-role="button" data-icon="search" class="my-btn">Available Documents</a>

   public ActionResult Browse(List<Documentr> docList)
        {} 
```

如果我不必在我不想的查询字符串上传递列表。

寻求帮助修复我的代码以实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:42:03.253

您应该使用 ViewModel 来传递数据（最简单的方式）。

或者，您可以使用[此处描述的自定义操作过滤器或自定义模型绑定器来执行此](https://stackoverflow.com/a/4842923/1026898)操作。

您尝试的方法不起作用的原因是 MVC 没有通过默认模型绑定器正确处理将 List 作为参数传递。

* * *

**更新**

自从看到您将列表更新为更大 Product 类的一部分后，我想知道为什么您不只是在目标操作中通过 id 引用该产品？（我不知道您的实体 Key 的名称是什么，但我会假设它是“ `Id`”

你的链接会变成这样：

```
<a href="@Url.Action("DocumentList", "Home", new { id = Model.Id})" data-role="button" data-icon="search" class="my-btn">Available Documents</a> 
```

你会有你的行动：

```
public ActionResult DocumentList ( int id )
{
    var product = db.Product.Find(Id);
    return View(product.List)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:31:59.070

我认为你过于复杂了。我不明白您为什么要将*只读*数据发布到另一个控制器操作。这种方法的另一个问题是它有可能在点击链接时已经过时（可能性*很小*，但仍有可能）。另外，如果您的初始视图实际上没有显示任何文档，那么我会将其从模型中删除，因为它不是必需的，例如

```
public class ProductViewModel
{
    public int Id { get; set; }
    public string PartNumber { get; set; } 
    public string ShortDescription { get; set; } 
    public string LongDescription { get; set; } 
    public string ImageUrl { get; set; } 
}

public ActionResult Product(int id)
{
    var model = new ProductViewModel();
    ... // populate view model
    return new View(model);
} 
```

然后在您的视图中，链接到您的产品进行浏览

```
@Html.ActionLink("Browse Documents", "Home", "Documents", new { id = Model.Id }) 
```

然后让您的`Documents`操作再次拉出产品，这次发送文件

```
public ActionResult Browse(int productId)
{
    var product = ... // get product by id
    return View(product.Documents);
} 
```

一般经验法则 -**只给视图它需要的东西**

# python - Django：如何实例化表单集中的所有表单？

> ID：11613620
> 
> 赞同：1
> 
> 时间：2012-07-23T13:35:33.183
> 
> 标签：python, django, forms

我有这个模型：

```
class option(models.Model):
    warval = models.ForeignKey(war)
    caption = models.CharField(max_length=20)
    text = models.TextField(blank=True,null=True)
    url = models.URLField(blank=True,null=True)
    user = models.ForeignKey(User) 
```

并且还有以下形式：

```
class text_option(ModelForm):
    class Meta:
        model = option
        exclude = ('url','warval','user')

class url_option(ModelForm):
    class Meta:
        model = option
        exclude = ('text','warval','user') 
```

假设我创建了一个“text_option”表单的表单集。我想要的是用“war”：w 和“user”：u 实例化这个表单集中的所有表单。我该怎么做。另外，如果那不可能，那么我还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:50:41.163

你想要的是可能的。我现在不记得是否有一些基于类的视图可以自动为您执行此操作（我认为没有），但是您可以手动执行此操作而无需付出太多努力。

在您的 view post 方法中，在您将 formset 中的表单实例化（看看[这个](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-a-formset-in-views-and-templates)）并检查它是否有效之后，您可以[遍历 formset 的 forms](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#formsets)，并根据需要设置它们的 user 和 warval。

另一种选择是将 user 和 warval 设置为[初始值](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-initial-data-with-a-formset)，因此该表单集中的每个表单都将具有您想要的 user 和 warval。

如果你需要一个关于如何做所有这些事情的例子，我可以尝试添加一些来帮助你，但我认为 django 文档是最好的方法......

**编辑：** 与[模型的 clean 方法](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean)一样，您可以在表单集的 clean 方法中为您的表单集（或表单集中的表单）添加一些“默认”值。您可以尝试按照[以下](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#custom-formset-validation)步骤包含您自己的 clean 方法，然后像这样在您的表单集中实例化每个表单（**注意：**我没有在我的计算机上尝试这个，但如果我必须这样做，我会这样做）：

```
for form in formset:
    form.instance.user = user
    form.instance.warval = warval 
```

希望能帮助到你！

# jsf-2 - a4j：commandButton oncomplete 未触发

> ID：11613623
> 
> 赞同：1
> 
> 时间：2012-07-23T13:35:56.847
> 
> 标签：jsf-2, richfaces

我们正在将应用程序迁移到较新版本的 RichFaces 和 JSF（我相信分别为 4.2.2 和 2.0），并且我正在尝试进行必要的调整以使应用程序像以前一样运行（我没有大量使用 jsf/richfaces 的经验）。

在我们的一个页面上，当我们单击一个按钮时，我们需要显示一个弹出窗口，上面写着“请稍等...”，并且在处理完成后，弹出窗口需要消失。我开始尝试这样的事情：

```
<a4j:commandButton id="viewEditTop" value="#{SearchBean.mode}"
                        action="#{SearchResultsBean.processSelected}"
                        styleClass="generalButton" onclick="#{rich:component('wait-dialog')}.show()" oncomplete="#{rich:component('wait-dialog')}.hide()"/> 
```

但是 oncomplete 似乎没有触发。弹出窗口会显示，但永远不会消失。经过大量研究并尝试了各种事情（主要是尝试调用 a4j:status 并尝试查找有关如何触发 oncomplete 以及状态等的详细信息），我不知道下一步该做什么。

有谁知道如何让oncomplete触发？或者如果我应该使用 a4j:status，我将如何让状态正常工作？我定义了状态，添加了“onstart”和“onstop”来显示/隐藏弹出窗口，并将我的 a4j:commandButton 状态设置为引用我创建的状态，但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T06:18:26.800

```
<a4j:commandButton id="viewEditTop" value="#{SearchBean.mode}"
                            action="#{SearchResultsBean.processSelected}"
                            styleClass="generalButton" onbegin="#{rich:component('wait-dialog')}.show()" oncomplete="#{rich:component('wait-dialog')}.hide()"/> 
```

你可以试试这个我认为它会工作 4 u ...

# c# - 创建一个下拉列表，其中包含复选框

> ID：11613624
> 
> 赞同：4
> 
> 时间：2012-07-23T13:35:57.633
> 
> 标签：c#, javascript, html, checkbox, dropdownbox

如何使用普通的 Html 和 javascript 创建一个带有复选框的下拉列表？如果不可能，是否有机会使用 c#.net 来满足此要求？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:47:06.047

试试[这个](http://lab.arc90.com/2007/07/02/multiselect)。它将多项选择变成带有复选框的下拉列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:57:40.527

对于CSharp中带有复选框的下拉列表，您必须使用Windows Control的CheckedListBox。使用一些属性，您可以获得所需的内容。您可以为列表中的项目设置Checked-Unchecked。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:39:41.203

像[这样](http://jsfiddle.net/qG7c4/9/)的东西？

[或者总是可以使用这样](http://code.google.com/p/dropdown-check-list/)的 jQuery/javascript 插件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:42:07.657

创建您自己的下拉列表。

*   C#.Net 方法：[这](http://www.infragistics.com/community/forums/t/3962.aspx)正是您所需要的。我不会复制代码，因为它在链接中已明确说明。
*   HTML / JS 方法：

    ```
     <html> 
      <head> 
        <title>Scrolling Checkboxes</title> 
        <script type="text/javascript"> 
        </script> 
       </head> 
      <body> 
       <div id="ScrollCB" style="height:150;width:200px;overflow:auto"> 
        <Label><input type="checkbox" id="scb1" name="scb1" value="1" />First Item</Label><br /> 
        <Label><input type="checkbox" id="scb2" name="scb2" value="2" />Second Item</Label><br /> 
        <Label><input type="checkbox" id="scb3" name="scb3" value="3" />Third Item</Label><br /> 
        ...
       </div> 
      </body> 
     </html> 
    ```

你可以在这里试试：http: [//jsfiddle.net/aUQdW/](http://jsfiddle.net/aUQdW/)

# c++ - 有人可以解释这些编程术语：引用语义、非线性可变状态吗？

> ID：11613627
> 
> 赞同：0
> 
> 时间：2012-07-23T13:36:05.507
> 
> 标签：c++, reference, functional-programming, state, mutable

你能为我解释一下这些术语吗：引用语义和值语义（以及它们如何对比）和非线性可变状态。[在此链接http://lambda-the-ultimate.org/node/2849](http://lambda-the-ultimate.org/node/2849)的书评评论中提到了它们

这本书当然是《Programming: Principles and Practice Using C++》，许多评论者称这本书无用，因为忽略了引用语义，我几乎可以猜到这是什么意思，但我不是 100% 肯定。

我认为他们的意思是使用引用类型（例如类）进行编程与使用值类型（例如结构）进行编程相比

我怀疑我的理解，因为我怀疑 bjarne stroustup 会这样做，C++ 是关于类的......所以我认为术语引用语义有一些更深层次的东西，至少对我来说不太明显

还使用了术语线性和非线性状态，这看起来很有趣，但我不明白。

因此，如果有人可以解释这些术语，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:56:13.060

不要过多地阅读这些评论。他们不是那么有启发性。

基本上，“引用语义”意味着您正在使用`int*`，而值语义意味着您正在使用`int`. “Achillas Margaritis”抱怨书中使用的`vector<int>`，他认为实际上你通常有`vector<int*>`。（我显然不同意）。

“非线性可变状态”似乎就是我所说的非正交状态。例如，您可以设置`Foo.x`为 7 和`Foo.y`8，除非`Foo.z`是 9。特别是，这似乎意味着允许的突变集非常依赖于先前的操作。如果你是在管理`char[]`自己，那是真的，但`std::string`行为的变异者非常合理。

# c - 具有多个客户端的单服务器

> ID：11613628
> 
> 赞同：0
> 
> 时间：2012-07-23T13:36:05.667
> 
> 标签：c, webserver

我对服务器编程比较陌生，但我阅读了一些有用的教程。我有这个问题：

处理多个客户的最佳方式是什么？

我读到有几种解决方案，但我不知道其中一些对于我的应用程序来说是否过于复杂。我必须在微控制器上使用 C 代码（因为我已经拥有库），并且我需要一个 Web 服务器来定期监控某些传感器接收到的一些数据（每个传感器的温度和湿度）。我可能还想向客户发送一些数据。一些帮助我阅读此内容的示例代码和链接将非常有帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:03:28.550

如果 Web 服务器是 Microsoft IIS，则可以使用 ISAPI/CGI/FastCGI。基本上，您必须编写一个 DLL（在本机代码中，例如 C），其中包含为每个用户请求调用的函数，并生成一个输出。我认为这是最合适的方式，因为这些库（用于微控制器和传感器）也在 C 中，正如您所提到的。

还有一点需要注意的是，为了防止崩溃，IIS 使用进程隔离（如果我完全记得这个词的话），这意味着 DLL 是在每个请求的不同进程的上下文中调用的，而不是作为线程调用的。这在性能/资源管理方面可能不是很好，例如，如果您希望库只连接到硬件一次（在初始化期间）。不确定是否提供了创建线程（而不是单独的进程）的机制，因此请查看文档。否则，您可以创建另一个 DLL 并通过进程间通信技术（例如管道）连接到它，但这当然是额外的工作。

希望这可以帮助。

# python - 如何将构造函数方法传递给另一个方法并在那里调用它？

> ID：11613636
> 
> 赞同：2
> 
> 时间：2012-07-23T13:36:27.587
> 
> 标签：python, inheritance, methods

我试图避免在两个类的克隆方法中重复相同的代码，一个继承自另一个。我目前的方法是将两个类共有的代码放在基类的（非静态）克隆方法中，并从扩展类中调用它。为此，我试图将扩展类的构造函数传递给基类，以便可以在那里调用它。这是我目前正在做的一个简化示例：

```
class S(object):
    """Base class"""
    def __init__(self):
        self.a = 0

    def clone(self, constructor=None):
        if constructor is None:
            constructor = self.__init__
        cloned = constructor()
        # Expecting: cloned.a = 1, cloned.b = 7

        assert cloned is not None  # raises AssertionError
        cloned.a = self.a  # Set a to 2
        return cloned

class C(S):
    """Child class, extending Base"""
    def __init__(self):
        self.a = 1
        self.b = 7

    def clone(self):
        cloned = super(C, self).clone(self.__init__)
        # Expecting: cloned.a = 2, cloned.b = 7

        cloned.b = self.b  # Set b to 8
        return cloned

if __name__ == '__main__':
    c1 = C()
    c1.a = 2
    c1.a = 8
    c2 = c1.clone() 
```

在这一点上我的问题是：

*   为什么`None`调用`clone`基类的方法会返回？

*   我是否必须将方法绑定到一个类才能使用它，使用 `types.MethodType`or `__get__`？

*   你会建议什么更好的方式去？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:39:50.390

虽然`__init__()`在 Python 中通常称为构造函数，但实际上并非如此。它获取作为参数传入的实例`self`，然后返回`None`. 该实例是由该`__new__()`方法较早构造的，该方法是实际的构造函数。但是，您不应该传递对 的引用`__new__`。传入类型本身更容易、更直接。

**编辑**：实现方法的正确`clone`方法是另一种方法：坚持通常的 Python 协议，并在您的实例上实现[`__getstate__()`](http://docs.python.org/library/pickle.html#object.__getstate__)和。[`__setstate__()`](http://docs.python.org/library/pickle.html#object.__setstate__)然后，您可以使用`copy`模块中的功能正确克隆您的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:44:38.667

您的基类克隆方法是多余的。从任何上下文调用`self.__init__()`都将遵循对象特定实例的 MRO，这意味着调用`clone()`的实例将从代码`C`调用，而无需明确指定使用。`C.__init__()``S``c.__init__()`

如果您想要做的是能够自定义`clone()`而不必创建一个全新的类，或者根据其他因素具有不同的行为，我建议您查看工厂/构建器模式。

此外，特别是对于`clone()`类型操作，您可能希望查看重载`__copy__()`、`__getstate__()`和`__setstate__()`并使用`copy.copy()`and`copy.deepcopy()`而不是实现新的辩证元素。

# android - 在sqlite android中存储以0开头的数字

> ID：11613640
> 
> 赞同：2
> 
> 时间：2012-07-23T13:36:35.763
> 
> 标签：android, sqlite

假设我已将以下记录作为字符串存储在 sqlite 数据库中：

```
09575788
08902149
08902134
47889789
47889776
47889797
48250496 
```

我的任务是检查这些值是否存在于数据库中。所以我建立了一种方法来检查这些值是否存在。

因此，用户在 editText 中插入这些值之一，我必须检查该值是否存在。

出现的问题是，当我尝试搜索以“0”开头的数字时，查询始终返回 null，但是当我搜索任何其他数字时 - 不以“0”开头的查询会在D b。

这是我的代码：

```
 Cursor cursor = this.db.query(TABLE_NAME, new String[] {KEY1, KEY2, KEY3},
                KEY_CONDITION1 + " LIKE " + prefix1 + " AND " + KEY_CONDITION2 + "=" + prefix2, null, null, null, null);
        return cursor; 
```

知道如何解决吗？感谢您的回答

**重要信息**所有值都作为字符串存储在数据库中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:35:02.290

@Adrian，Alex K 给了你正确的答案，但我认为你误解了他。如果前导零是有意义的（例如，对于可以以零开头的美国邮政编码），那么您没有数字，而是有一个字符串。这种列的数据从属关系应该是文本（又名 varchar）。您不想将带有前导零的值转换为整数；您只是想通过将搜索词括在单引号中来查找字符串值；例如：

```
 ...  where zipcode = '01287' 
```

# jquery - 用百分号屏蔽输入

> ID：11613642
> 
> 赞同：5
> 
> 时间：2012-07-23T13:36:41.630
> 
> 标签：jquery, jquery-plugins

我想允许用户输入 1 个或两个数字，并显示数字后跟一个百分号。如果未输入数字，则应为空白。附件几乎可以工作，但如果只输入一位数字，则不显示百分号。任何人都可以帮忙吗？谢谢

[http://jsfiddle.net/dm8Mb/](http://jsfiddle.net/dm8Mb/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
<title>Mask</title> 

<script src="http://code.jquery.com/jquery-latest.js"></script> 
<script src="http://cloud.github.com/downloads/digitalBush/jquery.maskedinput/jquery.maskedinput-1.3.js" type="text/javascript"></script>

<script> 
$(function(){$(".percent").mask("9?9%");});
</script>

</head>

<body>
<input type="text" name="percent" class="percent" value="" />
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T13:48:46.117

试试这个 - [http://jsfiddle.net/dm8Mb/12/](http://jsfiddle.net/dm8Mb/12/)

```
$(function(){
    $(".percent").mask("9?9%");

    $(".percent").on("blur", function() {
        var value = $(this).val().length == 1 ? $(this).val() + '%' : $(this).val();
        $(this).val( value );
    })
}); 
```

# git - 在 git 中，A..B 和 A..B 有什么区别？

> ID：11613644
> 
> 赞同：0
> 
> 时间：2012-07-23T13:36:51.403
> 
> 标签：git

> **可能重复：**
> [Git 提交范围中的“..”和“...”有什么区别？](https://stackoverflow.com/questions/462974/whats-the-difference-between-and-in-git-commit-ranges)

我在各种教程中看到了两种不同的提交范围语法：

```
git log A..B
git log A...B 
```

两者之间究竟有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:39:29.757

第一个是：包括所有到 B 的提交，排除所有到并包括 A。第二个：包括所有提交到是，排除所有到并包括共同祖先。请参阅“**指定范围**`git help revisions`”部分。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:39:18.250

哎哟。

[Git 提交范围中双点“..”和三点“...”的区别](https://stackoverflow.com/questions/462974)是什么？.

为什么它没有出现在我的各种搜索中仍然是个谜。**

# ruby-on-rails - 如何为 RSpec 指定多个目录以从中提取测试？

> ID：11613645
> 
> 赞同：9
> 
> 时间：2012-07-23T13:36:54.440
> 
> 标签：ruby-on-rails, rspec

我有一些与我的项目一起开发的供应商 gem，我想告诉 rspec 为这些 gem 以及我的主应用程序运行测试。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T14:29:30.770

只需在目录之间放置空格，例如：

```
rspec spec/model/location.rb ../gem/spec/requests/user.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T02:08:28.740

如果您正在使用 rspec 并且所有规范文件都以结尾，`_spec.rb`那么您可以简单地定义 Rails 根目录：

```
rspec . 
```

根据您的代码库的大小，这可能会更慢，但在我的情况下，它没有任何区别，并且无论它们在哪个目录中都可以找到所有规范，例如在`engines/*/spec`.

# java - 从项目中获取 PDF

> ID：11613650
> 
> 赞同：-1
> 
> 时间：2012-07-23T13:37:10.570
> 
> 标签：java, pdf, attachment

您好，感谢您花时间回答我的问题。

我有一个 PDF 文件，可以在项目的一个文件夹中找到。我需要将 PDF 加载到文件类型中。我怎样才能做到这一点？我们正在接受Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:44:50.943

包中存在`File`类`java.io`。用法类似于：

`File pdf = new File("full_pdf_filename");`

[在这里](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)查看课程的完整文档`File`。

# javascript - JavaScript，提交时

> ID：11613654
> 
> 赞同：3
> 
> 时间：2012-07-23T13:37:18.983
> 
> 标签：javascript, onsubmit

我试图理解为什么 Javascript 的 onsubmit 使用匿名函数来获取它的值：

```
onsubmit = function() {return validForm();} 
```

我知道 onsubmit 采用的是 true 或 false 值，但我不明白匿名函数如何需要获取 onsubmit 事件的 true 或 false 值，如下所示：

```
onsubmit = validForm(); 
```

如果有人能帮助我理解这一点，我将非常感激，谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T13:40:55.047

一个有效的分配是：

```
onsubmit = validForm; 
```

您正在分配名为 validForm 的函数作为 onsubmit 处理程序。但是，当你这样做时：

```
onsubmit = validForm(); 
```

您将调用函数 validForm的*结果分配给 onsubmit 处理程序。*除非 validForm 返回一个*函数*，否则这是行不通的。

上面的匿名函数赋值起作用的原因是，它为 onsubmit 处理程序分配了一个*函数*——该函数在调用时又调用了 validForm 函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T13:41:39.730

您正在调用`validForm`并设置`onsubmit`其返回值。例如：

```
function foo () {
    return "hi";
}

onsubmit = foo() // eq to onsubmit = "hi";

onsubmit = foo // onsubmit now has the same function as foo 
```

# javascript - Ember.Select selectionBinding 在加载视图时触发

> ID：11613658
> 
> 赞同：2
> 
> 时间：2012-07-23T13:37:36.917
> 
> 标签：javascript, ember.js

我`selectionDidChange`为我的 Ember.Select 添加了事件，但是当我的视图加载时，它会在加载时为所有可用的下拉选项触发事件。原因是它在内部向下拉菜单添加选项并不断触发`selectionDidChange`事件....有什么办法可以停止初始事件触发

这是我的代码（测试代码）

```
App = Em.Application.create();
App.myView = Em.View.extend({
  templateName: 'myTemplate',
  myArr:[{category:"spend"},{category:"cashflow"}],
  selectedItem: '',
  dropDownView: Ember.Select.extend({
     contentBinding: 'parentView.myArr',
     selectionBinding: 'parentView.selectedItem',
     optionLabelPath: 'content.category'
     selectionDidChange: function(){
       alert("yes it changed");
     }
  })
}); 
```

我对应的 Handlebar(myTemplate.handlebars) 文件 {{view.dropDownView}}

现在，当我加载此视图时，它甚至在我选择下拉列表中的任何选项之前都会发出警报...

**额外信息：**当我正在使用 RaphaelJS 开发小部件时，我需要此功能，因此当我更改下拉选项时，我希望小部件更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:45:31.880

在中添加`selectionDidChange`函数`didInsertElement`：

```
dropDownView: Ember.Select.extend({
    didInsertElement: function(){
        this.set('selectionDidChange', function(){
            alert("yes it changed");
        });
    },
    contentBinding: 'parentView.myArr',
    selectionBinding: 'parentView.selectedItem',
    optionLabelPath: 'content.category'
}) 
```

# shell - 为什么我的 IF 语句不起作用？

> ID：11613663
> 
> 赞同：2
> 
> 时间：2012-07-23T13:37:59.133
> 
> 标签：shell, unix, scripting, if-statement, ksh

我的 if 语句没有正常工作，我不明白为什么。

这就是我所拥有的

```
for LINE in $(cat someFile.txt)
do
inst=$(echo $LINE | awk -F, '{print $4}')
echo $inst  # To verify is displaying correctly
if [ $inst == "UP" ]
then
    echo "Program skips this when $inst is UP"
elif [ $inst == "DN" ]
then
    echo "Program skips this when $inst is DN"
fi
done 
```

当我使用`-eq`IF 语句时，程序会显示这个`UP^M: 0403-009 The specified number is not valid for this command.`

有任何想法吗？？

* * *

编辑。找到答案：

出于某种原因，程序在最后添加了一个返回字符。

添加此：`inst=$(echo $inst | tr -d '\r')`在获取列值后立即解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:43:25.440

源文件上的 dos2 unix 也可能有帮助， someFile.txt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:49:53.530

找到答案：

出于某种原因，程序在最后添加了一个返回字符。

添加此：`inst=$(echo $inst | tr -d '\r')`在获取列值后立即解决问题。

# ms-access - 连续形式的组合框

> ID：11613670
> 
> 赞同：-1
> 
> 时间：2012-07-23T13:38:07.580
> 
> 标签：ms-access

我将组合框设置为将值列表作为行源，将表中的值设置为控制源。即使使用此设置，我也只能更改最后/最底部记录上的组合框的值。如果我尝试更改任何其他组合框的记录，则不会发生任何事情。我一直在寻找解决方案，但只找到了使用控制源的建议，我的组合框已经在这样做了。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:46:07.920

连续表单上的组合框必须绑定到表单所基于的表或查询中的字段才能正常工作，否则它将仅显示与当前记录相关的数据。

但是，在这种情况下，您的表单似乎设置为不允许编辑。确保属性选项卡上的允许编辑设置为是。

# ajax - 淘汰赛验证错误地验证了 ajax 加载的字段

> ID：11613674
> 
> 赞同：0
> 
> 时间：2012-07-23T13:38:21.480
> 
> 标签：ajax, asp.net-mvc, validation, knockout.js

我有一个带有几个部分视图的主视图。

当 partialView 被加载（通过 ajax）时，敲除验证似乎验证了输入，但没有将 validationElement 类分配给输入字段。我认为 ko.validation 在页面完全加载之前完成了验证。是否可以手动调用验证？

错误数组通过 console.log() 正确显示了验证消息，并且数量也正确。当我尝试输出错误数组时，它会在页面加载时快速显示错误，然后所有错误都会消失。

有解决方案的人吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:58:39.210

找到了问题的半解决方案。

将 PartialView(s) 移植到[ko.templates](http://knockoutjs.com/documentation/template-binding.html)并且一切正常。

# sockets - 同一接口的多个协议

> ID：11613675
> 
> 赞同：0
> 
> 时间：2012-07-23T13:38:25.103
> 
> 标签：sockets, tcp, udp, ethernet

是否可以将多个套接字链接到具有不同协议、UDP、TCP、RAW 等的一个接口（即以太网端口），因此如果通过以太网发送数据包，则仅由正确的套接字接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:38:36.767

我认为您在谈论套接字和以太网端口时使用的端口号之间的关系。

```
A Socket (TCP/UDP) Works in the Transport Layer.
A port number comes here in the Layer and this is not the Ethernet port. 

You can have a TCP Socket bound to  say port 88 as well as a UDP Socket bound to port 
88.
You may also have raw sockets, which can directly use the IP Headers.
This may  require   root/administrative priviledge.

Here seems you need to decode the IP packets and get to the specific protocol 
on top it. 
(There is a field in the IP header called Protocol which mentions which
upper layer  protocol the packet belongs to)
So there can be several sockets, which finally get the data from your ethernet port. 
```

请参考以下链接了解一些基本概念，

[http://en.wikipedia.org/wiki/Network_socket](http://en.wikipedia.org/wiki/Network_socket)

[http://en.wikipedia.org/wiki/Raw_socket](http://en.wikipedia.org/wiki/Raw_socket)

[http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzab6%2Fhowdosockets.htm](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Frzab6%2Fhowdosockets.htm)

# xml - Xsl 转换删除部分 xml

> ID：11613678
> 
> 赞同：2
> 
> 时间：2012-07-23T13:38:43.907
> 
> 标签：xml, xslt

您好，我一直在尝试删除 xml 的某些部分，但它根本不适合我。让我首先列出我的要求：

**1.**删​​除所有值为空白或值长度<1的节点属性，如示例：

`<pr:Text default="" approved="true" type="">Mon-Sun 12HR</pr:Text>`

应该成为`<pr:Text approved="true">Mon-Sun 12HR</pr:Text>`

我想我已经涵盖了这部分（我认为），如果我错了，请纠正我：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="@*|node()">
    <xsl:if test=". != ''">
      <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

**2.**删除其子节点没有文本值的整个节点（元素），例如：

```
<pr:WorkingHoursInfo>
    <pr:WorkingHoursList>
              <pr:WorkingHours dayOfweek="MONDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="TUESDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="WEDNESDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="THURSDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="FRIDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="SATURDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="SUNDAY">
            </pr:WorkingHours>
    </pr:WorkingHoursList>
</pr:WorkingHoursInfo> 
```

应该变成：

```
<pr:WorkingHoursInfo>
</pr:WorkingHoursInfo> 
```

所以如果可能的话，我应该一次性完成这两个转换。我目前被困在这个＃2上，任何帮助都可以得到

**问题更新：**

每个`Martin Honnen`答案将 xsl 文件更改为：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>
<xsl:template match="@*[not(normalize-space())]"/>
<xsl:template match="*[not(*/*) and not(*[normalize-space()])]"/>
</xsl:stylesheet> 
```

但是现在违反了要求**1.**现在`<pr:Text default="" approved="true" type="">Mon-Sun 12HR</pr:Text>`从 xml 中删除。

**另一个更新：**

从`Martin Honnen`几乎工作开始，所以`1`正在工作并且`2`正在工作（几乎）。一个例外是没有子元素且没有文本值的单个元素不会被删除，即：

`<pr:DescriptionAttribute Type="PRIMARY"/>`

这也应该删除。所以它几乎可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:55:06.317

你从

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template> 
```

然后为您的任务添加模板，即

```
<xsl:template match="@*[not(normalize-space())]"/> 
```

确保删除空属性并

```
<xsl:template match="*[not(normalize-space()) and not(*/*) and not(*[normalize-space()])]"/> 
```

确保删除没有任何大子元素且没有包含文本的子元素的元素。

[编辑] 这是一个完整的样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="@*[not(normalize-space())]"/>

<xsl:template match="*[not(normalize-space()) and not(*/*) and not(*[normalize-space()])]"/>

</xsl:stylesheet> 
```

当我使用 Saxon 6.5.5 将该样式表应用于输入时

```
<pr:root
  xmlns:pr="http://example.com/pr">

<pr:WorkingHoursInfo>
    <pr:WorkingHoursList>
              <pr:WorkingHours dayOfweek="MONDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="TUESDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="WEDNESDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="THURSDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="FRIDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="SATURDAY">
            </pr:WorkingHours>
              <pr:WorkingHours dayOfweek="SUNDAY">
            </pr:WorkingHours>
    </pr:WorkingHoursList>
</pr:WorkingHoursInfo>

<pr:Text default="" approved="true" type="">Mon-Sun 12HR</pr:Text>

<pr:DescriptionAttribute Type="PRIMARY"/>

</pr:root> 
```

那么结果是

```
<pr:root xmlns:pr="http://example.com/pr">

<pr:WorkingHoursInfo>

</pr:WorkingHoursInfo>

<pr:Text approved="true">Mon-Sun 12HR</pr:Text>

</pr:root> 
```

所以空元素`<pr:DescriptionAttribute Type="PRIMARY"/>`被删除。

# javascript - 从数据库中获取最新的 5 条数据

> ID：11613680
> 
> 赞同：1
> 
> 时间：2012-07-23T13:39:07.157
> 
> 标签：javascript, node.js, mongodb, express, database

我正在使用 node.js express 并使用 MongoDB，我有一个包含用户名和 ID 的数据列表。如果我想 console.log 5 插入数据库的最新数据，你会怎么做？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:26:41.857

ObjectID 是 _id 字段的默认值，包含一个时间戳。您可以通过 ObjectID 对数据进行排序（），以获取插入数据库的最新文档。

如果您使用不同的 _id，则需要确保在文档中的某处存储时间戳。

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D)

# oracle - Hibernate - 使用返回函数的值连接表

> ID：11613682
> 
> 赞同：1
> 
> 时间：2012-07-23T13:39:09.947
> 
> 标签：oracle, hibernate, function, join

是否可以使用非列值和返回 oracle 函数的值来连接表？像这样的东西：

```
@JoinColumn(referencedColumnName = "columnName", name = "PackageName.functionName(param)") 
```

# php - 将 DateTime 转换为 Date Doctrine php

> ID：11613688
> 
> 赞同：1
> 
> 时间：2012-07-23T13:39:34.517
> 
> 标签：php, mysql, datetime, date, doctrine

您好，我正在使用 Doctrine (php) 和 mysql。

我需要将我的`Datetime`字段转换为`Date`. 但是Doctrine日期操纵器功能很少见...

我尝试了一些操作，`DATE_ADD`但`DATE_DIFF`没有成功。

目的是 GROUP BY Date 以显示每天的统计数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:43:50.863

只需使用`GROUP BY DATE(your_column)`.

# mobile - 如何从 IMEI 中检索 TAC？

> ID：11613689
> 
> 赞同：7
> 
> 时间：2012-07-23T13:39:36.233
> 
> 标签：mobile, mobile-phones, telecommunication, imei

问题很简单。我有一个 IMEI，我想从中检索一个 TAC。我该怎么做？如果我只有一个 IMEI，有没有办法识别 TAC 应该有多少位数字？是否需要明确知道设备的生产年份才能知道？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T17:30:43.627

从头开始读取 8 位数字。具有 6 位数字的 TAC 很少见，而且在过去（自 2004 年以来）。

但是为了安全起见，你可以分析两次，从最长的版本开始，然后使用short。如果您找到手机型号，则使用该 TAC。如果不是，则使用 8 位数字，因为旧电话是众所周知的（在大多数情况下）。

要将 tac 转换为手机型号，请使用数据库：

*   ~~[http://www.numberingplans.com/](http://www.numberingplans.com/) - 付费，带有可下载的 CSV 示例文件~~
*   [http://imei-number.com/imei-number-lookup/](http://imei-number.com/imei-number-lookup/) - 免费一个，但带有验证码
*   [http://tacdb.osmocom.org/](http://tacdb.osmocom.org/) - 免费的，带有可下载的 CSV
*   [https://imeidb.gsma.com/imei/index](https://imeidb.gsma.com/imei/index) - “官方”imei 数据库。需要铭文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T16:54:21.943

IMEI 号码的前八位数字是 TAC 码。在 2004 年之前，前六位数字是实际的设备标识符，接下来的两位是代表设备制造地的最终组装代码 (FAC)。从那时起，FAC 部分已被删除。

TAC 代码由两个机构发布（北美的 CTIA 和其他地方的 GSM 协会），可通过前两位数字识别。由于 TAC 代码是按顺序发出的，因此您可以测试位置 3 到 6 以识别六位数的 TAC 代码。例如，我使用这样的代码：

```
if    substr(IMEI,1,2) = '01' and substr(IMEI,1,8) < '01015900'  /* CTIA */
   or substr(IMEI,1,2) = '35' and substr(IMEI,1,8) < '35150100'  /* GSMA */
   then TAC_TYPE = '6-digit';
   else TAC_TYPE = '8-digit'; 
```

这些范围是由我个人检查 TAC 代码表确定的，不能保证。

有关更多信息，请参阅[此 Wikipedia 链接](http://en.wikipedia.org/wiki/International_Mobile_Equipment_Identity)。

# css - 跨浏览器问题 - Firefox 和 Chrome

> ID：11613692
> 
> 赞同：-1
> 
> 时间：2012-07-23T13:39:42.957
> 
> 标签：css, firefox, google-chrome, browser, rendering

我有一个网站

但是当我从 Chrome 和 Firefox 中查看时，两者看起来都不同。有人可以帮助我，为什么会这样？

截图：

火狐： http: [//i.imgur.com/CfvbF.png](http://i.imgur.com/CfvbF.png) 铬：http: [//i.imgur.com/ERVtN.jpg](http://i.imgur.com/ERVtN.jpg)

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:59:31.523

AVG 刚刚告诉我，您的网站上有病毒 javascript。可能会吓到用户！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:00:04.513

你可以从这里开始[[http://www.findmebyip.com/litmus]](http://www.findmebyip.com/litmus)。检查以确保您使用的所有 CSS3 对每个浏览器都有一个备用。

# c# - 处理向网络服务发送 1000 个预订？

> ID：11613693
> 
> 赞同：1
> 
> 时间：2012-07-23T13:39:43.587
> 
> 标签：c#, asp.net, web-services

我有一个 asmx Web 服务，每天有 1000 次预订。它们由一个控制台应用程序分发，该应用程序将它们分布在 3 个不同的服务器上。

控制台应用程序是一个多线程应用程序。保留首先排队，然后提交到端点。问题是它运行速度非常慢，例如，排队的预订可能需要一个多小时才能到达端点。

我不知道预订是否在队列中等待很长时间或确切的问题是什么。我可以查看代码中的特定区域以查看导致此问题的原因或可以测量此问题或告诉我瓶颈在哪里的任何类型的分析器？

# android - Android：将 Activity 传递给 java 类并运行线程错误视图异常

> ID：11613694
> 
> 赞同：0
> 
> 时间：2012-07-23T13:39:44.937
> 
> 标签：android

我正在尝试将我的 Main 活动传递给具有正在运行的线程的 java 类。当线程被调用时，我必须在我的活动类中引用一些对象，这些对象做一些工作并更新 UI。我的代码看起来像这样。

```
/**
 *
 */
public class MainActivity extends Activity {

     Person person;

     @Override
     public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);

          person = new Person();
     }

     public void updateInfo(String action) {

          person.setAction(action);

          //redraw the person to the gui
          ImageView image = (ImageView) findViewById(R.id.action);
          int id = getResources().getIdentifier(person.getCurrentAction(),"drawable", getPackageName());
          image.setImageResource(id);

     }
 }

 /**
  *
  */
 public class ThreadClass {

     private MainActivity mainActivity;

     public SocketClient(MainActivity mainActivity) {
           this.mainActivity = mainActivity;
           new MyThread().start();
     }

     private class MyThread extends Thread {

          public void run() {
              try {
                  while(!isInterrupted() {
                      mainActivity.updateInfo("Person is running");
                  }
              }
          }

     }

 } 
```

当我这样做时，我会收到错误消息，即我没有在正确的线程中更新视图。android.View.ViewRoot$CalledFromWrongThreadException。我在这里做错了什么？此外，这段代码很可能不会编译它的伪代码，因为我必须去掉所有其他逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:46:47.100

如果我理解这个问题，我建议你从不同的角度工作。

你永远不应该通过你的活动课。活动类是控制器，是所发生事情的主人。

所以你将对象和数据传递给你的后台线程。当 Main UI 被调用时，UI 会从线程中询问这些对象并更新他的 UI。

如果您希望这在常规基础上发生，您应该在线程中实现一个监听器，这样主线程可以在更新它的数据时得到通知。

最后一种方法是使用良好的旧观察者模式，但我并不热衷于使用那个。

编辑：看看 AsyncTask：[AsyncTask Android 示例](https://stackoverflow.com/questions/9671546/asynctask-android-example)

# jsf-2 - 有没有办法点击 ap:messages 元素来关闭它？

> ID：11613695
> 
> 赞同：0
> 
> 时间：2012-07-23T13:39:48.557
> 
> 标签：jsf-2, primefaces

有没有办法添加`onclick`事件以在单击时关闭 p:messages 标记？顺便说一句，我还注意到它包含一个用于关闭的 X，但单击它什么也不做。

这是标签的`p:messages`代码：

```
<p:messages id="alarmMessages">
    <script>
        jQuery('#alarmMessages').effect("pulsate", {times:5}, 1000 );
        jQuery('#alarmMessages').show();
    </script>
</p:messages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:17:42.580

由于您使用的是 JQuery，我建议您将事件添加到关闭消息的某个按钮或链接。我不知道您页面的代码，您可以在 document.ready 中添加此事件：

```
$('#closeButtonId').click(function() {
    $('#alarmMessages').hide(); // you can also use fadeOut()
}) 
```

您可以将该事件添加到面板本身，但它不会非常直观。我会在消息面板的右下角添加一个小的关闭链接。

另一方面，您可以在面板中添加一个事件以在一段时间后将其隐藏，但这取决于您的实现以及您认为正确的方式。只需在 document.ready 函数中向您的面板添加一个事件：

```
$('#alarmMessages').delay(5000).fadeOut(); // you can also use setTimeOut if you like. 
```

注意：您所说的 X 按钮实际上可能是一个错误图标。它是红色背景中的白色X吗？

# c# - C#在函数数据集中将UTC转换为当地时间

> ID：11613696
> 
> 赞同：1
> 
> 时间：2012-07-23T13:39:48.650
> 
> 标签：c#, sql, datetime, dataset

我需要帮助来更改我的方法填充我的数据库的形式。

我使用 API 通过 OPC 协议与工业设备进行通信。

此 API 将通用时区 (UTC) 作为参数，但我在通用光栅 (UTC) 中有 +3 小时的差异。

在我的数据集中，我将此 API 用于返回三个属性的类：数据值、质量和时间戳

我需要及时转换为本地时间才能将此属性 Timestamp 保存在我的数据库中。

下面是我的班级的一个班级例子。

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using OpcLabs.EasyOpc.DataAccess;

namespace LogAsStringToSql
{
    class Program
    {
        static void Main()
        {
            const string connectionString =
                "Data Source=.\\SQLEXPRESS;Initial Catalog=QuickOPCExamples;Integrated Security=true";

            Console.WriteLine("Starting up...");
            using (var connection = new SqlConnection(connectionString))
            {
                connection.Open();

                // Create all necessary ADO.NET objects.
                var adapter = new SqlDataAdapter("SELECT * FROM SimpleLog", connection);
                var dataSet = new DataSet();
                adapter.FillSchema(dataSet, SchemaType.Source, "SimpleLog");
                adapter.InsertCommand = new SqlCommandBuilder(adapter).GetInsertCommand();
                DataTable table = dataSet.Tables["SimpleLog"];

                Console.WriteLine("Logging for 30 seconds...");
                // Subscribe to an OPC item, using an anonymous method to process the notifications.
                int[] handles = EasyDAClient.DefaultInstance.SubscribeMultipleItems(
                    new[]
                        {
                            new DAItemGroupArguments("", "OPCLabs.KitServer.2", "Simulation.Incrementing (1 s)", 100, null),
                            new DAItemGroupArguments("", "OPCLabs.KitServer.2", "Simulation.Ramp (10 s)", 1000, null),
                            new DAItemGroupArguments("", "OPCLabs.KitServer.2", "Simulation.Register_BSTR", 1000, null),
                            new DAItemGroupArguments("", "OPCLabs.KitServer.2", "Simulation.Register_BOOL", 1000, null)
                        },
                    (_, eventArgs) =>
                    {
                        Console.Write(".");
                        // In this example, we only log valid data. Production logger would also log errors.
                        if (eventArgs.Vtq != null)
                        {
                            // Fill a DataRow with the OPC data, and add it to a DataTable.
                            table.Rows.Clear();
                            DataRow row = table.NewRow();
                            row["ItemID"] = eventArgs.ItemDescriptor.ItemId;
                            row["Value"] = eventArgs.Vtq.Value; // The DataRow will make the conversion to a string.
                            row["Timestamp"] = (eventArgs.Vtq.Timestamp < (DateTime)SqlDateTime.MinValue)
                                                   ? (DateTime)SqlDateTime.MinValue
                                                   : eventArgs.Vtq.Timestamp;
                            row["Quality"] = (short)eventArgs.Vtq.Quality;
                            table.Rows.Add(row);

                            // Update the underlying DataSet using an insert command.
                            adapter.Update(dataSet, "SimpleLog");
                        }
                    }
                    );
                System.Threading.Thread.Sleep(60 * 1000);
                Console.WriteLine();

                Console.WriteLine("Shutting down...");
                EasyDAClient.DefaultInstance.UnsubscribeMultipleItems(handles);
            }

            Console.WriteLine("Finished.");
        }
    }
} 
```

我如何更改当前方法以在 DateTime 上使用 ToLocalTime () 方法来接收本地时间的时间戳？

```
row["Timestamp"] = (eventArgs.Vtq.Timestamp < (DateTime)SqlDateTime.MinValue)
                                                   ? (DateTime)SqlDateTime.MinValue
                                                   : eventArgs.Vtq.Timestamp; 
```

我无法理解如何改变这一点，非常欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:49:23.510

不就是像下面这样吗？

```
row["Timestamp"] = (eventArgs.Vtq.Timestamp < (DateTime)SqlDateTime.MinValue)
                                                   ? (DateTime)SqlDateTime.MinValue
                                                   : eventArgs.Vtq.Timestamp.ToLocalTime(); 
```

上面的代码仅确保您不会尝试将太旧的日期保存到数据库中，这会引发异常。如果不是这种情况，您可以将日期转换为当地时间。参见[?: 运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)

可能是我误解了你的问题。

# google-apps-script - 为 Google Apps Script webapp 存储资源（图标、图像等）的优雅方式

> ID：11613699
> 
> 赞同：9
> 
> 时间：2012-07-23T13:39:51.520
> 
> 标签：google-apps-script, web-applications, file-management

既然可以制作非容器绑定的 web 应用程序，那么能够将应用程序的资源（例如，一些图标和图像，可能是遗留数据库等）放入应用程序是有意义的 - 可能以类似于您的方式可以将更多 .gs 文件添加到项目中。这意味着它们不必上传到某些外部服务然后被引用，并且网络应用程序将是独立的。有没有办法做到这一点，或者我应该提出一个功能请求？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T03:04:42.417

对我来说非常有效的方法是将 Google Apps 脚本放入 Google Drive 中的一个文件夹中，并将所有其他资源添加到该文件夹​​中。然后，如果您与拥有该链接的任何人共享它们，则可以使用下载链接直接链接到它们。

例如，带有 ID 的文件`ID`可以通过`https://docs.google.com/uc?export=download&id=ID`. 您甚至可以链接到某些修订（在 Google Drive 中的文件上单击鼠标右键并打开修订对话框以找出修订密钥，然后添加`&revid=REVISION_TOKEN`到您的 URL）。

从某种意义上说，它不是 100% 独立的，您可以将所有资源复制到某个地方并让它快速运行，但该解决方案的美妙之处在于托管由 Google 提供，并且最有可能具有大致相同的可用性也可以作为您的 Google Apps 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-04T23:48:53.503

差不多十年后，将 Google Apps Script 网络应用程序的相关资源放在一起的情况几乎相同，我们仍然必须将资源存储在另一个地方，但有很多变化可能值得考虑。

`https://docs.google.com/uc?export=download&id=ID`仍然可以使用/之类的 URL 链接存储在 Google Drive 中的文件， `https://docs.google.com/uc?export=view&id=ID`但 Google Drive 对文件的“点击”数量有限制。对于低用户网络应用程序，这很可能不会成为问题。

现在 Google Apps 脚本项目可以链接到 Google Cloud 标准项目。这是自定义 OAuth 同意屏幕以及能够使用 Google 服务的某些功能所必需的。可能值得回顾一下 Google Cloud 文件托管服务，包括 Firebase。

顺便说一句，有些东西不再可用

1.  现在有一个新的 Google 协作平台，但 Google Apps 脚本站点服务不支持它们。
2.  Google 云端硬盘网页托管服务已停用

# javascript - Cufon 不适用于日文文本

> ID：11613700
> 
> 赞同：1
> 
> 时间：2012-07-23T13:39:52.887
> 
> 标签：javascript, asp.net-mvc-3, cufon

我在这里遇到了一些奇怪的情况。我有一个 MVC 视图，我在其中应用了 cufon 脚本来`h1`标记如下内容：

```
Cufon.replace('h2.title-1', { fontFamily: 'TheSansBold-BoldPlain' }); 
```

此替换适用于英语，但当文本为日语时，它不起作用。为什么我会遇到这个问题？无论如何，是否可以将这种替代推广到所有语言，而不仅仅是英语或日语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:47:04.003

该字体可能不支持日文字符集。我建议您选择另一种字体并确保该字体确实支持日语。

# javascript - 在javascript中将字符串转换为数字

> ID：11613705
> 
> 赞同：10
> 
> 时间：2012-07-23T13:40:16.900
> 
> 标签：javascript

我想解析包含经度和纬度的用户输入。我想要做的是将一个字符串强制为一个数字，保留它的符号和小数位。但我想做的是在用户输入无效时显示一条消息。我应该关注哪一个

```
parseFloat(x) 
```

第二

```
new Number(x) 
```

第三

```
~~x 
```

第四

```
+x 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T13:43:04.317

如果必须在这两者之间进行选择，我会使用`Number(x)`，因为它不允许尾随垃圾。（好吧，它“允许”它，但结果是`NaN`.）

也就是说，`Number("123.45balloon")`是`NaN`，但是`parseFloat("123.45balloon")`是`123.45`（作为一个数字）。

正如克林先生指出的那样，其中哪个“更好”取决于您。

*编辑*- 啊，你已经添加回来`+x`和`~~x`. 正如我在评论中所写，`+x`相当于使用`Number()`构造函数，但由于运算符的语法灵活性，我认为这有点冒险`+`。也就是说，剪切和粘贴很容易引入错误。如果你知道你想要一个整数（一个 32 位整数），那么这个`~~x`表格很好。但是，对于纬度/经度而言，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T13:43:57.010

第一个更好。这是明确的，而且是正确的。你说你想解析浮点数。`~~x`会给你一个整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T13:49:57.130

要测试是否`input`是数字，请使用以下命令：

```
function isNumeric(obj){
    return !isNaN( parseFloat(obj) ) && isFinite( obj );
} 
```

要`String`转换为`Number`，使用`+`，[这是最快的方法](http://jibbering.com/faq/notes/type-conversion/#tcNumber)：

> 一元 + 运算符还将其操作数类型转换为数字，因为它不执行任何额外的数学运算，它是将字符串类型转换为数字的最快方法

所以总的来说，你可能需要这个：

```
if(!isNumeric(inputValue)){
    alert('invalid number');
}else{
    var num = +inputValue;
} 
```

[`isNumeric`借来的`jQuery`]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T14:07:45.570

这是我要编写的代码，用于重复输入，直到获得正确的输入。

```
var d;

do {
    d = prompt("Enter a number");
    d = new Number(d);
} while( isNaN(d) );

document.write( d ); 
```

**注意：** 如果任何字符是非数字的，`new Number(d)`将始终给出，而将忽略尾随的无效字符。`NaN``parseFloat(d)`

# linux - 如何获取日期字段并对其进行操作

> ID：11613712
> 
> 赞同：0
> 
> 时间：2012-07-23T13:40:31.623
> 
> 标签：linux, bash

我试图弄清楚如何从日期中减去天数，假设我设置了当前日期

```
set $date 
```

我怎样才能从中减去几天并获得该期间的日期？

例如`27jul2012`减 5 变成`22jul2012`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:57:58.880

您可以使用`date`来计算差异，例如

```
date -d "27jul2012 - 5 days" +%d%b%Y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:53:12.247

先转换成秒，减去五天的秒数再转换回来：

```
date --date=@$(($(date --date='27 Jul 2012' +'%s') - $((5 * 24 * 3600)) )) +%x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:56:36.830

您可以使用 date 实用程序以秒为单位转换您的日期。请参阅[Bash 脚本比较两个日期变量](https://stackoverflow.com/questions/5895159/bash-script-compare-two-date-variables)。

您还可以从当前日期执行几种不同类型的加法和减法。看看那里： http: [//linuxconfig.org/addition-and-subtraction-arithmetics-with-linux-date-command](http://linuxconfig.org/addition-and-subtraction-arithmetics-with-linux-date-command)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T14:03:57.040

稍短的版本：

```
date --date="@$(expr $(date +%s) - 432000)" 
```

其中 432000 是 5 天内的秒数。

# c - GDB - 我可以在内存中找到大数据元素吗

> ID：11613713
> 
> 赞同：3
> 
> 时间：2012-07-23T13:40:32.953
> 
> 标签：c, gdb

我有一个程序，其中包含大量静态定义的变量。如果我在 GDB 中启动它，在 main 中有一个断点，然后运行 ​​pmap，我看到已经分配了大约 100MB 的数据：

```
08838000 107576K rw---    [ anon ] 
```

我已经找到了一堆函数，它们具有巨大的静态定义数组（例如 200,000 个整数），并在我找到它们时将它们删除。

有没有办法找出堆/数据段上最大的项目是什么？在 GDB 中还是通过任何其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:26:14.383

可以使用 nm(1) 等目标代码检​​查实用程序找到该信息：

```
nm --size-sort <object-file.o> 
```

此外，如果有足够的调试信息，objdump 可以为完全链接的程序提供额外的见解。

这些实用程序通常是特定于目标平台的，因此在交叉编译时必须注意使用正确的程序（即类似的东西`x86_64-linux-gnu-gcc-nm`而不是 just `nm`）。

# .htaccess - Nginx URL 重写搜索？q=string (opencart)

> ID：11613714
> 
> 赞同：1
> 
> 时间：2012-07-23T13:40:33.237
> 
> 标签：.htaccess, url, url-rewriting, nginx, opencart

我正在尝试做

```
http://site.com/index.php?route=product/search&filter_name=QUERY 
```

至

```
http://site.com/search?=QUERY 
```

这是我的规则；这没用。

```
rewrite ^/search?q=(.*)?$ /index.php?route=product/search&filter_name=$1 last; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:00:21.963

Nginx 不允许你匹配查询字符串，而是它有一个[$args](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)变量和[if](http://nginx.org/r/if) -s。您可以将其结合起来，使示例像这样工作：

**（使用 nginx if else 语句更新）**

```
location /search {
    if ($args ~ "q=(?<q>.*)?") {
        rewrite ^ /index.php?route=product/search&filter_name=$q last;
    }
    # Else (if no search query entered from form)
    rewrite ^ /index.php?route=product/search last;
} 
```

但是因为[如果 -s](http://wiki.nginx.org/IfIsEvil)在 nginx 配置中被认为是邪恶的，你应该使用（在你的情况下）[try_files](http://nginx.org/r/try_files)：

```
location /search
    try_files $uri /index.php?route=product/search&filter_name=$arg_q;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:53:07.810

问题是`$`标志。在这种情况下需要事先。解决方案：

```
rewrite ^/search?q=$(.*)$ /search.php?q=$1? last; 
```

# scorm - 设置 cmi.exit 变量时的正确行为是什么

> ID：11613715
> 
> 赞同：1
> 
> 时间：2012-07-23T13:40:37.537
> 
> 标签：scorm, scorm2004

**场景 A：**假设 SCO A 设置它`cmi.exit = suspend`，然后触发一个继续导航请求，并启动 SCO B。SCO B 触发前一个导航请求。在这种情况下，SCO A的Tracking Model（Objective Progress Info、Attempt Progress Info、Activity Progress Info）是否应该设置为默认？

**场景 B：**假设 SCO A 设置它`cmi.exit = normal`，然后触发一个继续导航请求，并启动 SCO B。SCO B 触发前一个导航请求。在这种情况下，SCO A的Tracking Model（Objective Progress Info、Attempt Progress Info、Activity Progress Info）是否应该设置为默认？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:17:57.370

在场景 A 中，所有跟踪数据将在终止 SCO A 时保存。当学习者再次尝试 SCO A 时，将检索所有数据，并且 SCO A 应该从触发 Continue Nav 请求时学习者所在的位置恢复。

在场景 B 中，SCO A 的所有跟踪数据都设置为默认值。

# domain-driven-design - “保存”方法是否属于业务域实体？

> ID：11613716
> 
> 赞同：6
> 
> 时间：2012-07-23T13:40:38.097
> 
> 标签：domain-driven-design, entity, 3-tier, business-logic-layer

我没有使用任何 ORM。因此，我正在争论“保存”方法是否实际上属于业务域实体，还是应该在某些将移交给业务域实体进行保存的服务中抽象出来？

例如

```
class Employee
{
    string Name;
    DateTime Birth;

    GetAge()
    {

    }

    Save()
    {
    }           

} 
```

或者

```
class Employee
{   
    string Name;
    DateTime Birth;

    GetAge()
    {

    }

}

SomePersistenceService
{
    Save(Employee emp)
        {
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T12:12:10.187

没有单一的最佳解决方案，您所说的问题是存储库和活动记录模式之间的选择。

通常，Repository 更适合单元测试，因为 Repository 接口易于模拟，而且 Repository 模式使用高内聚和单一职责原则（从 OOP 的角度来看，您的业务实体将包含用于将自身保存到数据库，通过网络传输自身，或导出到某些 XML 等）

Active Record 可能会在 RAD 开发中提供更快的速度，而像 Spring Roo 这样的一些工具最初设计时只支持 Active Record，据我所知，最近才添加了 Repository 支持。AFAIK Ruby On Rails 使用 Active Record，以及其他一些很棒的工具。

至于领域驱动设计，您应该按照 Jeroen 的建议使用 Repository，因为 Repository 是基本的 DDD 模式（它是 DAO 模式的以领域为中心的版本），但您应该检查您的工具是否直接支持这两种模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T15:11:43.650

由于这个问题被标记为“领域驱动设计”，因此您需要一个存储库来为您做这件事。

* * *

只需将 SomePersistenceService 重命名为 EmployeeRepository。所以你的第二个选择是正确的。*“抽象在一些服务中将被移交的业务领域实体”*在领域驱动设计中称为*存储库*

存储库是一种假装您的数据存储是一个集合的方法。所以它有类似`Add`and`Remove`而不是`Save`and的方法`Delete`。

# c - ANSI C 中的字符串

> ID：11613728
> 
> 赞同：2
> 
> 时间：2012-07-23T13:41:29.210
> 
> 标签：c

这是 C 语言的第三个程序。这个程序是为了演示字符串的概念。

从研究中我知道字符串末尾有一个空字符 '\0' 来终止字符串。

我写了那个代码：

```
main()
{
      char  name[8];

      strcpy(name, "Mahmoud");
      printf("The contents of name are %s\n", name);
      getchar();
} 
```

在这段代码中，我声明了 char 类型的数组以在其中保存字符串。我的名字“Mahmoud”是 7 个字符，我声明名称的大小为 8，“Mahmoud”为 7，“\0”为 1，它可以正常工作。

但是在下面的代码中：

```
main()
{
      char  name[8];

      strcpy(name, "MahmoudEmam");
      printf("The contents of name are %s\n", name);
      getchar();
} 
```

当我显示名称时，输出是“MahmoudEmam”，尽管名称的大小是 8。

它是怎么做的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:44:12.310

C 不执行任何数组边界检查（可能使用 C11...）。您正在写超出数组的末尾：这是一种未定义的行为（任何事情都可能发生）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T13:48:54.377

您看到显示的全名的事实是未定义的行为。基本上，您将超过 7 个字符和一个终止 0（总共 8 个字符）复制到仅为 7 个字符和一个终止 0 保留的存储中。

它恰好可以工作，但很容易导致您的程序崩溃。

这就是为什么 C 被认为是一种较低级别的编程语言，或者，正如多年前所说的那样，一种高级汇编编程语言。

您的程序员必须检查复制操作目标的长度，使用类似的构造`sizeof(name)`，并确保您正在复制的内容不会覆盖该空间。您还必须记住字符串终止，足够的空间 + 1 来说明终止的 '\0'。

不要忘记将 sizeof 与使用 malloc 分配的字符串一起使用将为 32 位指针或硬件的指针长度返回 4 值。在这种情况下，您将不得不依靠 strlen 来获取缓冲区长度，或者存储用于 malloc 字符串的大小。

最后，在将字符串指针传递给函数时，将函数编写为具有缓冲区长度非常有帮助。您无法获得真正的缓冲区长度。strlen 只返回字符串长度，而不是指针实际指向的缓冲区大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T13:45:03.390

在这种情况下你很幸运。发生的事情是您在堆栈上为 7 个字母的字符串（+ 一个用于`'\0'`）分配了足够的内存，但您正在写超出它的内容。

C 不会为您检测超出数组边界的读/写。

所以发生的事情是，你正在写数组的其余部分，破坏可能存在的任何其他内容。在较大的程序中，您很可能会遇到崩溃。

这是一个很好的例子，说明了为什么你应该学习使用[`strncpy`](http://linux.die.net/man/3/strncpy)，但请记住，如果缓冲区已满，`strncpy`则不会添加终止，你应该自己做。`'\0'`像这样的代码可以：

```
strncpy(name, "the text of your string, whatever it is", sizeof(name));
name[sizeof(name) - 1] = '\0'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T13:44:27.000

您正在调用未定义的行为。你不能依赖它，因为它有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T20:07:16.257

这个问题已经回答了，但如果可以的话，我想稍微改进一下。

如果您注意到，`strcpy()`不将缓冲区长度作为参数。那是因为它信任您，用户，注意不要溢出目标缓冲区。

C 中没有关于可以将哪些数据放置在内存中的哪个位置的限制。这同时是一种强大的工具，如果使用不当，也是一种危险的工具。

当您调用 时`printf()`，它会遍历您提供的缓冲区，直到找到第一个 0 并打印所有内容。如果您提供随机缓冲区，它将打印乱码。对于您编写的程序，您提供了一个缓冲区，其中包含您复制的字符串。即使您破坏了缓冲区，程序仍然设法找到并打印它，因为它甚至不知道内存已损坏。

缓冲区溢出是您能找到的最难的错误之一。它们通常会影响与导致损坏本身的模块无关的程序部分，并且通常需要很长时间才能感受到它们的影响。所以你应该非常小心，不要引起这样的错误！

# ruby-on-rails - 在 Rails 中创建基于控制器的通用路由

> ID：11613729
> 
> 赞同：1
> 
> 时间：2012-07-23T13:41:29.210
> 
> 标签：ruby-on-rails, configuration, routes

我有一个带有几个表单的超级基本 Rails 应用程序。我有 5 个控制器，每个控制器只有 1 个索引视图，将来可能还会更多。我想要实现的是，当我在浏览器中输入[http://example.com/discover](http://example.com/discover) Rails 时会自动加载发现控制器索引方法，如果我想要[http://example.com/discover/city](http://example.com/discover/city)它会加载发现控制器和“城”法。所以，我现在有我的 routes.rb 包含这个：

```
root :to => "home#index"
match '/discover/' => 'discover#index'
match '/start/' => 'start#index'
match '/blog/' => 'blog#index'
match '/help/' => 'help#index'
match '/about/' => 'about#index' 
```

我正在寻找一种编写通用路由规则的方法，如果我向链接添加辅助参数，它将始终使用控制器查找索引方法，以及控制器中的特定方法。

这似乎很容易，但我找不到这样做的直接方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:47:26.757

使用这个通配符路由：

```
match ':controller(/:action(/:id(.:format)))' 
```

请注意这一点，它可以让您访问您不想访问的内容。

# android - 在android中启动应用程序时如何设置值

> ID：11613731
> 
> 赞同：-1
> 
> 时间：2012-07-23T13:41:33.517
> 
> 标签：android, select, launch

我想在应用程序启动时设置一个值。即在我的应用程序中我必须在应用程序启动时选择一个位置名称。我的问题是当应用程序启动时应该有一个选项来选择位置并根据该位置我的应用程序应该加载details.but 它应该只在第一次启动时完成。我们关闭应用程序并重新打开它不应该再次询问位置它应该使用以前选择的位置 details.ofcourse 在应用程序内有一个更改位置的选项。如何请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:55:10.763

当用户第一次选择位置时，您可以将位置值保存到[SharedPreferences中。](http://developer.android.com/reference/android/content/SharedPreferences.html)

有关示例示例，请参见此[链接](https://stackoverflow.com/questions/5734721/android-shared-preferences)。

因此，下次应用程序启动时，请检查 SharedPreferences 值并根据 SharedPreferences 值呈现 UI。

# algorithm - 翻转两个三角形的边

> ID：11613737
> 
> 赞同：1
> 
> 时间：2012-07-23T13:41:43.383
> 
> 标签：algorithm, geometry, flip, vertices

我有一个带有索引的数组。其中三个指数组成一个三角形。现在我取一个三角形并搜索另一个具有共享边的三角形。这些三角形现在组成了一个对角分割的四边形。我如何（在代码中）翻转这个对角线边缘/三角形，使其连接对角线？我正在寻找的东西在 Blender、Maya、3ds max 等 3D 程序中通常被称为“翻转边缘”。

![四边形翻转](../Images/f628d5a62247313fa75b3a5ab8f3f9a4.png)

我被这个困住了。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:01:29.277

这取决于你如何实现你的结构。例如，如果您有这样的结构：

```
struct Vertex
{
    double position[3];
};

struct Triangle
{
    unsigned int vertices[3];
};

Vertex nodes[N_NODES];
Triangle triangles[N_TRIANGLES]; 
```

其中`vertices`是 的索引`nodes`，则给定两个三角形：

```
Triangle t1, t2; 
```

如果你有

```
t1.vertices[i1] = t2.vertices[j1];
t1.vertices[i2] = t2.vertices[j2]; 
```

这意味着`t1.vertices[i1] --- t1.vertices[i2]`是 和 的共享边`t2.vertices[j1] --- t1.vertices[j2]`，并且假设`i3`和分别是和`j3`的第三个顶点，如下图所示：`t1``t2`

![在此处输入图像描述](../Images/1682f111dc3187f0dd4d5336099bea39.png)

然后，您只需更改一些索引即可进行翻转。最直接的方法是：

```
unsigned int t1_v[3], t2_v[3];

t1_v[0] = t1.vertices[i1];  // shared
t1_v[1] = t1.vertices[i2];  // shared
t1_v[2] = t1.vertices[i3];  // not shared

t2_v[0] = t2.vertices[j1];  // shared (unnecessary)
t2_v[1] = t2.vertices[j2];  // shared (unnecessary)
t2_v[2] = t2.vertices[j3];  // not shared

t1.vertices[0] = t1_v[0];  // previously shared
t1.vertices[1] = t1_v[2];  // previously not shared
t1.vertices[2] = t2_v[2];  // previously not shared

t2.vertices[0] = t2_v[0];  // previously shared
t2.vertices[1] = t2_v[2];  // previously not shared
t2.vertices[2] = t1_v[2];  // previously not shared 
```

请注意，每个新三角形由 2 个未共享的顶点和一个共享的顶点组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:53:55.263

如果您将顶点放在一个数组中，我假设您通过一些固定的行长度识别不同的行，并根据某种模式制作三角形。我建议只是改变这种模式，如何将三个顶点分配在一起。如果有的话，你必须注意不成对的三角形

# c# - 为 Web 服务客户端实现 ActiveRecord

> ID：11613748
> 
> 赞同：0
> 
> 时间：2012-07-23T13:42:31.357
> 
> 标签：c#, asp.net-mvc, oop, json.net

我正在使用 C#/MVC 4 编写一个 Web 服务客户端，它与 REST-Webservice 通信，在客户端使用 JSON.net。到目前为止一切正常，但我想改进架构以使处理更加流畅。

我写了一个连接器类并像这样初始化它：

```
var conn = new MyConnector("admin", "admin", "http://localhost:9000"); 
```

然后我有一个像这样的 POCO 类：

```
public class MyRecord
{
    [JsonProperty("record_id")]
    public string RecordId;
    ... 
```

我通过对 Web 服务执行 PUT 请求来保存更改。看起来像：

```
var updated = conn.UpdateRecord("MyRecordId", new  NameValueCollection{{"title","new_title"}}); 
```

我想做的是更像 ActiveRecord 来实现它：

```
var myRecord = conn.GetRecord("myRecordId);
myRecord.title = "Foo";
myRecord.save(); 
```

这意味着 MyRecord 类必须知道连接处理程序。这对我来说似乎是糟糕的设计，因为 MyRecord 基本上是一个普通的对象。另一种选择是将连接处理程序传递给保存方法，但这也有味道。

有什么改进的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:00:46.260

如果你想要一个“普通记录”，你不应该实现 activerecord 模式。这是一个矛盾。在我看来，您对存储库模式更感兴趣。

作为参考，请查看： [Repository 模式与 Active Record 模式相同吗？](https://stackoverflow.com/questions/3486916/is-repository-pattern-as-same-as-active-record-pattern)

或更广泛地了解您的选择：

[http://msdn.microsoft.com/en-us/magazine/dd569757.aspx](http://msdn.microsoft.com/en-us/magazine/dd569757.aspx)

# mysql - Mysql通过某个字段计算带有组的计数（*）的中间值

> ID：11613751
> 
> 赞同：2
> 
> 时间：2012-07-23T13:42:34.893
> 
> 标签：mysql, select

我有这个查询：

```
select count(*) from logins group by user_id 
```

这将返回每个用户的用户登录号：

数数（*）

* * *

10

23

35

54

使用单一且高效的查询，如何选择（计算）这个的中间值？中等 = (10+23+35+54)/4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:47:11.990

```
select avg(num_login) 
  from (select count(*) as num_login 
  from logins group by user_id) as num_logins 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:45:09.923

```
select avg(count(*)) from logins group by user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T13:49:55.233

```
SELECT AVG(c) FROM (SELECT COUNT(*) AS c FROM logins GROUP BY user_id) AS v 
```

这有效..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T13:51:18.923

使用子查询，然后`AVG`对子查询的结果起作用：

```
SELECT AVG(logins_cnt) AS logins_cnt
FROM   (SELECT COUNT(1) AS logins_cnt
        FROM logins 
        GROUP BY user_id
       ) a; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-23T13:46:39.690

你试过平均功能吗？

```
select avg(select count(*) from logins group by user_id) 
```

# javascript - 试图在 vb.net 代码隐藏中获取 javascript 变量

> ID：11613753
> 
> 赞同：0
> 
> 时间：2012-07-23T13:42:43.377
> 
> 标签：javascript, asp.net, vb.net

我有一个函数，我试图获取用户输入的用户名和密码。它存储在客户端的“unixName”和“unixPass”中。我有 dUnixName 和 dUnixPass，其中一个是隐藏输入，另一个是标签。它们是不同的，因为我在玩弄不同的方法来让它发挥作用。

```
<script type="text/javascript">
//        Internet Explorer/Firefox needs this script to show radio selection after Modal Popup
function enableRDO() {
    document.getElementById("rdoUnix").checked = true;
   // document.getElementById("dUnixName").value = document.getElementById("unixName").value;
    //document.getElementById("dUnixPass").value = document.getElementById("unixPass").value;
    document.getElementById('<%=dUnixName.ClientID %>').value = document.getElementById("unixName").value;
    document.getElementById('<%=dUnixPass.ClientID %>').value = document.getElementById("unixPass").value;
    return true;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:00:33.243

如果我理解正确：您在 javascript 中有一个值，您想在回发时将其传递回服务器？没问题，将值存储在 ASP:HiddenField 中并在后面的代码中读出。如果我误解了你的问题，请告诉我。

请参阅：[在 JavaScript 中访问 asp:hiddenfield 控件](https://stackoverflow.com/questions/252222/access-an-asphiddenfield-control-in-javascript)

***例子***

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
        function test() {
            alert(document.getElementById('<%=txtBox.ClientID %>').value);

            return false;
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtBox" runat="server" />
        <button onclick='test()'>Client Side Test</button>

    </div>
    <asp:Button ID="btnServer" runat="server" Text="Server Side Test" 
        onclick="btnServer_Click" style="height: 26px" />
    </form>
</body>
</html>  

protected void btnServer_Click(object sender, EventArgs e)
{
    //read value here
    string test = txtBox.Text;
} 
```

# sql-server - 具有“自定义”键的 Ria 服务实体

> ID：11613754
> 
> 赞同：0
> 
> 时间：2012-07-23T13:42:49.997
> 
> 标签：sql-server, wcf-ria-services

这是针对 RIA 服务应用程序的：

我们有一个`A`看起来像这样的实体：

```
ID   int (PK, identity)
Code string 
```

由`Code`两个字符前缀`AB`、第二个两个字符前缀`CD`和一个四位整数组成。当实体被添加到数据库中时，用户应该输入`ABCD`作为代码，并且应用程序应该将最小可能的整数附加到代码中，该整数尚未在具有`AB`前缀的另一个代码中使用。例如，如果数据库看起来像：

```
ABCD0001
ABCD0002
ABEF0003
CDEF0001 
```

并且用户输入前缀`ABGH`，代码应该是`ABGH0004`。

会有多人同时使用这个应用程序，所以我不认为 Cient-Side 是一个很好的选择。有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:04:35.463

我认为如果您尝试在 RIA 服务或客户端内部执行此操作，那么您最大的问题是并发用户通过同时提交来破坏序列。

我的建议是使用数据库触发器来计算数据库中的这个值，这意味着任何同时提交都会得到正确的计算代码。

要使用新代码刷新客户端实体，因为我不相信它会在提交后自动更新，您需要再次将实体加载到客户端中，`LoadBehavior.RefreshCurrent`以强制它使用保存的价值。

这很麻烦，但真的没有一个好方法可以只在客户端做这个。

# enterprise-library - 管理业务层上的事务

> ID：11613756
> 
> 赞同：1
> 
> 时间：2012-07-23T13:42:54.920
> 
> 标签：enterprise-library, transactionscope

我想在我的业务层中使用**TransactionScope**类来管理数据访问层中的数据库操作。

这是我的示例代码。当我执行它时，它会尝试启用 dtc。我想在不启用 dtc 的情况下进行操作。

我已经检查了[https://entlib.codeplex.com/discussions/32592](https://entlib.codeplex.com/discussions/32592)文章。它对我不起作用。我阅读了很多关于这个主题的文章，但没有一篇真正触及企业库，或者我没有看到。

顺便说一句，我可以使用 dotnet sql 客户端使用 TransactionScope，它运行良好。

SampleInsert() 方法的内部是什么？

谢谢，

**业务层方法：**

```
public void SampleInsert()
        {
            using (TransactionScope scope = new TransactionScope())
            {
                Sample1DAL dal1 = new Sample1DAL(null);
                Sample2DAL dal2 = new Sample2DAL(null);
                Sample3DAL dal3 = new Sample3DAL(null);
                dal1.SampleInsert();
                dal2.SampleInsert();
                dal3.SampleInsert();
                scope.Complete();
            }
        } 
```

**数据访问层方法：**

```
//sampleInsert method structurally same for each 3 dal

public void SampleInsert()
        {
            Database database = DatabaseFactory.CreateDatabase(Utility.DATABASE_INFO); ;
            using (DbConnection conn = database.CreateConnection())
            {
                conn.Open();
                DbCommand cmd = database.GetStoredProcCommand("P_TEST_INS", "some value3");
                database.ExecuteNonQuery(cmd);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:00:46.980

嗨，是的，这将启用 dtc，因为您正在一个 TransactionScope 中创建 3 个数据库连接。当在同一个 TransactionScope 中创建多个数据库连接时，本地事务会升级为分布式事务，因此 dtc 将能够管理分布式事务。您必须以只为整个 TransactionScope 创建一个数据库连接的方式进行操作。我希望这会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:24:14.923

在研究和观察查询分析器之后，我改变了 SampleInsert() 主体如下，它工作了。问题是**伦理学**提到每次我访问数据库时都会打开新连接。

```
public void SampleInsert()
        {
            Database database = DatabaseFactory.CreateDatabase(Utility.DATABASE_INFO);
            using (DbCommand cmd = database.GetStoredProcCommand("P_TEST_INS", "some value1"))
            {
                database.ExecuteNonQuery(cmd);
            }
        } 
```

# javascript - jquery加1

> ID：11613761
> 
> 赞同：0
> 
> 时间：2012-07-23T13:43:08.040
> 
> 标签：javascript, jquery

下午，

对于显示的每个问题，我想将此代码中的数字增加 1。

```
 new_question = "<div id=\"" + res.qId + "\">" +
                            "<h1>Question 1</h1>" +
                            "<p><i>" + res.question + "</i></p>" +
                            "<div class=\"answer-grid\">" +
                            "<div id=\"a1\" class=\"answer\">" +
                            "<p>" + res.answer1 + "</p>" +
                            "<p>" + res.answer2 + "</p>" +
                            "<p>" + res.answer3 + "</p>" +
                            "</div>" +
                            "</div>"; 
```

有了这个，它会显示，问题1，问题2，等等......

请问我将如何在 jQuery 中执行此操作？

***更新***Victor 提供了我需要的东西，感谢大家的帮助。更新了下面的代码。

```
 var questionNumber = 1;
    $.each(result, function (index, res) {
        new_question = "<div id=\"" + res.qId + "\">" +
                        "<h1>Question " + (questionNumber++) + "</h1>" +
                        "<p><i>" + res.question + "</i></p>" +
                        "<div class=\"answer-grid\">" +
                        "<div id=\"a1\" class=\"answer\">" +
                        "<p>" + res.answer1 + "</p>" +
                        "<p>" + res.answer2 + "</p>" +
                        "<p>" + res.answer3 + "</p>" +
                        "</div>" +
                        "</div>";

        $('#pinfos').append(new_question); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:45:48.813

声明一个名为 questionNumber 的 var 并在每次调用时递增它

```
var questionNumber = 1;
        $.each(result, function (index, res) {
            new_question = "<div id=\"" + res.qId + "\">" +
                            "<h1>Question " + (questionNumber++) + "</h1>" +
                            "<p><i>" + res.question + "</i></p>" +
                            "<div class=\"answer-grid\">" +
                            "<div id=\"a1\" class=\"answer\">" +
                            "<p>" + res.answer1 + "</p>" +
                            "<p>" + res.answer2 + "</p>" +
                            "<p>" + res.answer3 + "</p>" +
                            "</div>" +
                            "</div>";

            $('#pinfos').append(new_question); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:50:30.803

在循环外声明一个变量并在循环内增加它并在标记中使用它。

```
var questionNumber=0;

$.each(someJsonData, function (index, res) {
{
 questionNumber++;
 new_question = "<div id=\"" + res.qId + "\">" +
                            "<h1>Question "+questionNumber+"</h1>" +
                            "<p><i>" + res.question + "</i></p>" +
                            "<div class=\"answer-grid\">" +
                            "<div id=\"a1\" class=\"answer\">" +
                            "<p>" + res.answer1 + "</p>" +
                            "<p>" + res.answer2 + "</p>" +
                            "<p>" + res.answer3 + "</p>" +
                            "</div>" +
                            "</div>";

} 
```

# jquery - jQuery Mobile 列表视图不起作用

> ID：11613765
> 
> 赞同：0
> 
> 时间：2012-07-23T13:43:22.270
> 
> 标签：jquery, listview, mobile

我正在尝试在静态页面上创建一个列表视图。一点动态都没有。查看我的[js fiddle](http://jsfiddle.net/67XFq/)以获取它不起作用的示例。这里还有下面的代码以防万一。

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head>
    <body>
        <div data-role="page" data-add-back-btn="true">
            <div data-role="header" data-position="fixed">
                <h1>Page Title</h1>
            </div>
            <div data-role="content"><div class="content-primary">
<ul data-roll="listview">
    <li data-role="list-divider">item1</li>
    <li><a href="/">item1</a></li>
    <li>item1</li>
    <li>item1</li>
    <li data-role="list-divider">item1</li>
    <li>item1</li>
    <li>item1</li>
    <li>item1</li>
</ul>
</div>            </div><!-- /content -->
            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul id=""><li class=""><a href="http://www.google.com" targe="" id="">My Link</a></li>
<li class=""><a href="http://www.google.com" targe="" id="">My Link</a></li>
</ul>                </div><!-- /navbar -->
            </div><!-- /footer -->
        </div><!-- page -->
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:46:28.213

检查你的sintax：

```
<ul data-roll="listview"> 
```

应该

```
<ul data-role="listview"> 
```

# mongodb - mongo db --smallfiles 开关缺点

> ID：11613769
> 
> 赞同：5
> 
> 时间：2012-07-23T13:43:31.423
> 
> 标签：mongodb

我想在我的新项目中使用 mongodb。问题是，mongo 使用预分配文件：

> 每个数据文件都预先分配给特定的大小。（这样做是为了防止文件系统碎片，以及其他原因。）数据库的第一个文件名是 .0，然后是 .1，等等。.0 将是 64MB，.1 128MB 等等，最多 2GB。一旦文件大小达到 2GB，每个连续的文件也是 2GB。因此，如果存在的最后一个数据文件是 1GB，那么如果它是最近创建的，那么该文件可能 90% 是空的。

从这里：[http ://www.mongodb.org/display/DOCS/Excessive+Disk+Space](http://www.mongodb.org/display/DOCS/Excessive+Disk+Space)

有很多 2GB 的文件，里面什么都没有，这很正常。有一个 --smallfiles 开关，将此文件限制为 512MB

> --smallfiles => 使用较小的初始文件大小 (16MB) 和最大大小 (512MB)

我想知道使用小文件对生产有好处吗？以及它的缺点是什么。

没有 noprealloc 开关，但它在生产中并不好。但没有关于小文件的说明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T15:16:52.917

如果您正在创建一大堆数据库，您通常只会使用小文件，如果您只使用几个数据库，它不会为您节省足够的麻烦。

对于拥有许多 DBS（并且实际上受益于小文件）的客户，我们还没有看到任何性能问题。不过，与其他安装相比，它们的活动水平通常略低。根据 Mongo 正在做的事情，执行某些操作可能会稍微慢一些，但我认为您不会注意到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-31T22:30:34.033

此外，如果在 AWS 云中运行并使用带有 SSD 的 m3.small 实例，您的存储空间将被限制为 4GB。设置此选项将允许您拥有一个小型 SSD 支持的 mongodb 节点。对于小任务可能就足够了

# c# - 搜索PDF文本，在获取坐标后通过绘制矩形突出显示找到的单词保存PDF并突出显示文本

> ID：11613771
> 
> 赞同：0
> 
> 时间：2012-07-23T13:43:33.570
> 
> 标签：c#, pdf, itextsharp

任何人都可以帮助如何获取文本坐标？这可能吗？因为我只想要一个 Windows 窗体应用程序，其中用户在文本框中键入一个单词，该应用程序使用 iTextSharp 读取现有 PDF，如果找到匹配的单词会突出显示，并使用突出显示的文本保存 PDF。到目前为止，我几乎完成了所有工作，包括绘制黄色矩形，但缺少的是如何获取匹配模式的文本坐标以突出显示它们，在此先感谢：（顺便说一句：sb 是搜索文本框, tb 是展示 PDF 文本的富文本框）

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.parser;
using iTextSharp.text;
using System.Text.RegularExpressions;

namespace manipulatePDF
{
    public partial class Form1 : Form
    {
        string oldFile;
        Document document = new Document();
        StringBuilder text = new StringBuilder();
    public Form1()
    {
        InitializeComponent();
    }
    private void open_Click(object sender, EventArgs e)
    {
        reset_Click(sender, e);

        openFileDialog1.Filter = "PDF Files (.pdf)|*.pdf";
        openFileDialog1.FilterIndex = 1;

        if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            label1.Text = "File Location: " + openFileDialog1.FileName;
            oldFile = openFileDialog1.FileName;

            // open the reader
            PdfReader reader = new PdfReader(oldFile);

            iTextSharp.text.Rectangle size = reader.GetPageSizeWithRotation(1);
            document.SetPageSize(size);

            for (int cPage = 1; cPage <= reader.NumberOfPages; cPage++)
            {
                ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
                string currentText = PdfTextExtractor.GetTextFromPage(reader, cPage, strategy);
                currentText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(currentText)));
                text.Append(currentText);
                reader.Close();
            }
            tb.Text = text.ToString();
        }
    }
    private void save_Click(object sender, EventArgs e)
    {
        saveFileDialog1.InitialDirectory = "C: ";
        saveFileDialog1.Title = "Save the PDF File";
        saveFileDialog1.Filter = "PDF files (*.pdf)|*.pdf";

        if (saveFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            PdfReader reader = new PdfReader(oldFile);
            string newFile = saveFileDialog1.FileName;

            // open the writer
            FileStream fs = new FileStream(newFile, FileMode.Create, FileAccess.Write);
            PdfWriter writer = PdfWriter.GetInstance(document, fs);

            document.Open();

            // the pdf content
            PdfContentByte cb = writer.DirectContent;

            // select the font properties
            PdfGState graphicsState = new PdfGState();
            graphicsState.FillOpacity = 10;
            cb.SetGState(graphicsState);

            int index = 0;
            while (index < text.ToString().LastIndexOf(sb.Text))
            {
                if (contain.Checked == true)
                {
                    tb.Find(sb.Text, index, tb.TextLength, RichTextBoxFinds.MatchCase);
                    tb.SelectionBackColor = Color.Gold;
                    index = tb.Text.IndexOf(sb.Text, index) + 1;
                }
                else if (exact.Checked == true)
                {
                    tb.Find(sb.Text, index, tb.TextLength, RichTextBoxFinds.WholeWord);
                    tb.SelectionBackColor = Color.Gold;
                    index = tb.Text.IndexOf(sb.Text, index) + 1;
                }
            }

            int count = 0; //counts the pattern occurance
            for (int cPage = 1; cPage <= reader.NumberOfPages; cPage++)
            {
                ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
                string currentText = PdfTextExtractor.GetTextFromPage(reader, cPage, strategy);
                currentText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(currentText)));
                string textToSearch = sb.Text;
                int lastStartIndex = currentText.IndexOf(textToSearch, 0, StringComparison.CurrentCulture);

                while (lastStartIndex != -1)//if the pattern was found
                {
                    count++;
                    lastStartIndex = currentText.IndexOf(textToSearch, lastStartIndex + 1, StringComparison.CurrentCulture);

                    BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
                    cb.SetFontAndSize(bf, 10);

                    cb.SetColorFill(new CMYKColor(0f, 0f, 1f, 0f));
                    cb.Rectangle(document.PageSize.Width - 500f, 600f, 100f, 100f);
                    cb.Fill();
                }

                if (count != 0)
                {
                    if (contain.Checked == true)
                    {
                        label2.Text = "Number of pages: " + cPage + " - " + textToSearch + " found " + count + " times. \n";
                    }
                    else if (exact.Checked == true)
                    {
                        //finds the words that are bounded by a space or a dot and store in cCount
                        //returns the count of matched pattern = count - cCount
                    }
                }

                text.Append(currentText);
                // create the new page and add it to the pdf
                PdfImportedPage page = writer.GetImportedPage(reader, cPage);
                cb.AddTemplate(page, 0, 0);

                document.NewPage();
                //PdfStamper stamper = new PdfStamper(reader, fs);
                ////Create a rectangle for the highlight. NOTE: Technically this isn't used but it helps with the quadpoint calculation
                //iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(60.6755f, 749.172f, 94.0195f, 735.3f);
                ////Create an array of quad points based on that rectangle. NOTE: The order below doesn't appear to match the actual spec but is what Acrobat produces
                //float[] quad = { rect.Left, rect.Bottom, rect.Right, rect.Bottom, rect.Left, rect.Top, rect.Right, rect.Top };

                ////Create our hightlight
                //PdfAnnotation highlight = PdfAnnotation.CreateMarkup(stamper.Writer, rect, null, PdfAnnotation.MARKUP_HIGHLIGHT, quad);

                ////Set the color
                //highlight.Color = BaseColor.YELLOW;

                ////Add the annotation
                //stamper.AddAnnotation(highlight, 1);
            }

            // close the streams
            document.Close();
            fs.Close();
            writer.Close();
            reader.Close();
        }
    }
    private void reset_Click(object sender, EventArgs e)
    {
        tb.Text = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T07:23:22.240

好吧，我添加了一个使用 Vb.NET 2010 制作的可下载示例，该示例完全符合您的需要，并且可以在 Chris 引用的同一线程的另一篇文章中找到。该代码适用于每种字体类型、字体大小，并将返回您搜索的单词/句子的所有匹配项，将每个匹配项作为具有 x/y 位置的矩形返回给 UI，最后突出显示它们并保存到新的PDF，您只需要提供一些初始参数，例如搜索词、文化比较类型、源 PDF 路径和目标 PDF 路径。唯一没有实现的是当搜索词/句子分成多行时的特殊情况，但它应该是一个简单的代码更改，因为您可以在 TextChunk 类中使用 SameLine() 方法。

# c# - 如何在 Active Directory 中找到具有 GUID(objectGUID) 参数的用户

> ID：11613772
> 
> 赞同：8
> 
> 时间：2012-07-23T13:43:34.997
> 
> 标签：c#, asp.net, active-directory, ldap, directoryentry

在我的 ASP.NET 应用程序中，我从 Active Directory 获取信息。我必须使用 GUID 信息获取有关用户的信息（例如：a28a6a34dsfdsf57d9e54f945a241），但我不知道如何使用过滤器进行此搜索：/

例如，如果我搜索用户姓氏：

```
DirectoryEntry Entry = new DirectoryEntry("LDAP://" + "Domain");

            string filter = "(&(objectClass=user)(objectCategory=person)(cn=" + txtBenutzer.Text + "*))";

            DirectorySearcher Searcher = new DirectorySearcher(Entry, filter);

            var q = from s in Searcher.FindAll().OfType<SearchResult>()
                    select new
                    {
                        //GetProperty(s, "objectGUID"),
                        Benutzer = GetProperty(s, "sAMAccountName"),
                        eMail = GetProperty(s, "mail"),
                        Vorname = GetProperty(s, "givenName"),
                        Nachname = GetProperty(s, "sn"),
                        Telefon = GetProperty(s, "telephoneNumber"),
                        UserID = s.GetDirectoryEntry().NativeGuid

                    };

            this.myListView.DataSource = q;
            this.myListView.DataBind(); 
```

现在我需要一个带有 GUID 的过滤器，我可以在 AD 中找到唯一的用户。我在字符串中的此搜索的 GUID UserID = Session["UserID"].toString()

塔拉索夫

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-23T14:28:08.943

你不需要搜索，如果你知道GUID，你可以直接绑定到对象，例如

```
var user = new DirectoryEntry("LDAP://<GUID=119d0d80-699d-4e81-8e4e-5477e22ac1b3>"); 
```

（替换为您的实际 ObjectGUID）。

检查此 MSDN 条目：[使用 ObjectGUID 绑定到对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677985%28v=vs.85%29.aspx)

# templates - 图表模板、配色方案和字体大小

> ID：11613773
> 
> 赞同：1
> 
> 时间：2012-07-23T13:43:40.783
> 
> 标签：templates, charts, powerpoint, office-interop

我正在尝试自动化一些 PowerPoint 图表，但在保留某些格式时遇到了问题。

当我使用图表模板添加图表时，图表不使用幻灯片配色方案，而是使用保存时使用的颜色。更改幻灯片的配色方案无济于事 - 图表未更新。要使图表更新为幻灯片的配色方案，我必须清除图表的格式。这样做的问题是所有字体大小都自动设置为 18pt。我找不到任何简单的方法来恢复图表的字体大小而不在调用清除之前保存所有大小，并在清除后将它们设置回来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:29:17.687

您是否考虑过使用格式刷功能，这取决于我在网上快速浏览的各种因素（谷歌搜索很多文章）。

此外，如果您已经完成了一个图表，您应该能够使用此处提到的粘贴特殊选项将格式从一个图表复制到另一个图表[http://www.pcreview.co.uk/forums/there-format-painter-equivalent -使用-many-charts-t3611646.html](http://www.pcreview.co.uk/forums/there-format-painter-equivalent-use-many-charts-t3611646.html)。

# c# - 使用 C# 根据目录中的文件前缀创建分页 tiff 文件

> ID：11613774
> 
> 赞同：0
> 
> 时间：2012-07-23T13:43:47.820
> 
> 标签：c#, file, tiff

不需要创建 tiff 文件，因为我已经有了它。我只是想弄清楚基于目录中文件名的前缀创建文件的算法。

我有一个名为`C:\Policy Images`. 在这个文件夹中是图片。图片名称如下：

保单编号/图片名称如下：

```
AAAAAAA-Pic1
AAAAAAA-Pic2
AAAAAAA-Pic3
ZZZZZZZ-Pic1
ZZZZZZZ-Pic2
FFFFFFF-Pic1
... 
```

创建 tiff 文件时，我需要为每个策略编号创建 1 个 tiff。基于上述，例如，Id 有这个：

```
 AAAAAAA-1 (containing 3 pages in this tiff file) 
 ZZZZZZZ-1 (containing 2 pages in this tiff file) 
 FFFFFFF-1 (containing 1 page in this tiff file) 
```

下面我的代码的问题是它正在为目录中的所有文件创建一个 tiff，而不是基于策略编号。代码中写着“ `foreach (string s in AllFilesInDirectory)`”的部分必须是真的`foreach`（策略 1/策略 2/策略 3 中的字符串 s 等）。

我该怎么做呢？我现在正用头撞墙。

这就是我到目前为止所拥有的：

```
string[] AllFilesInDirectory = Directory.GetFiles(SelectedDirectory);

//get the codec for tiff files
ImageCodecInfo info = null;

foreach (ImageCodecInfo ice in ImageCodecInfo.GetImageEncoders())
         if (ice.MimeType == "image/tiff")
         info = ice;

//use the save encoder
Encoder enc = Encoder.SaveFlag;

EncoderParameters ep = new EncoderParameters(1);
ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.MultiFrame);

Bitmap pages = null;

int frame = 0;

foreach (string s in AllFilesInDirectory)
{
   if (frame == 0)
   {
      pages = (Bitmap)Image.FromFile(s);
      //save the first frame
      pages.Save(AppVars.MergedPolicyImagesFolder + "\\" + PolicyNumber + ".tiff", info, ep);
     PolicyNumber++;
   }
   else
   {
      //save the intermediate frames
      ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.FrameDimensionPage);
      Bitmap bm = (Bitmap)Image.FromFile(s);
      pages.SaveAdd(bm, ep);
   }

   if (frame == AllFilesInDirectory.Length - 1)
   {
      //flush and close.
      ep.Param[0] = new EncoderParameter(enc, (long)EncoderValue.Flush);
      pages.SaveAdd(ep);
   }
 frame++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:15:33.380

为了实现您的目标，您首先需要一些拆分文件名的方法。在下面的代码中，我依赖于您作为示例给出的模式。如果真实的文件名有不同的模式，你需要调整代码的分割部分（也许在正则表达式的帮助下）。拆分后，您需要按策略分组。在 C# 中，这是通过扩展方法完成的`GroupBy`，这要归功于 LINQ。这是一个显示总体思路的小代码片段：

```
var data = new [] {
    "AAAAAAA-Pic1",
    "AAAAAAA-Pic2",
    "AAAAAAA-Pic3",
    "ZZZZZZZ-Pic1",
    "ZZZZZZZ-Pic2",
    "FFFFFFF-Pic1"
};

var splittedEntries = data.Select(entry => {
    var parts = entry.Split('-'); // adapt to real pattern of filenames
    return new { Policy = parts[0], Picture = parts[1] };
});

var groups = splittedEntries.GroupBy(entry => entry.Policy);
foreach (var grp in groups) {
    Console.WriteLine("Do somethin for group {0}", grp.Key);
    foreach (var entry in grp) {
        Console.WriteLine("  * {0}", entry.Picture);
    }
} 
```

# scala - 玩框架 + Scala + Couchbase？

> ID：11613775
> 
> 赞同：2
> 
> 时间：2012-07-23T13:43:48.463
> 
> 标签：scala, playframework-2.0, couchbase

我想在 Play Framework + Scala 项目中使用 Couchbase。我见过基于 Scala 的 Play 模块，例如[https://github.com/leon/play-salat](https://github.com/leon/play-salat)，用于连接 Play 和 MongoDB。只是想知道是否有人为 Couchbase 做过类似的事情，或者是否有人以前使用过 Couchbase 和 Play？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:23:26.307

[Michael Nitschinger](https://twitter.com/daschl)最近的一篇文章可能对您有所帮助。他使用 java 实现了 couchbase 解决方案，但在 scala 中的实现应该非常简单。你可以[在这里找到这篇文章](http://www.scoop.it/t/playframework/p/2189138216/a-real-time-chat-with-play-java-and-couchbase-part-1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T10:38:15.957

我使用过 Play 框架 + Scala + Couchbase，它就像一个魅力！我当然可以推荐你使用它。您可以使用一些模块使其真正易于使用： [http ://reactivecouchbase.org/](http://reactivecouchbase.org/)

它包括一个非常好的教程和示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:19:36.530

如果未在[模块页面](https://github.com/playframework/Play20/wiki/Modules)上列出，则可能不存在（或未大规模使用）。

您可以随时检查/使用/转换/调整现有框架的 Java 版本并为社区创建一个模块！;)

# sql - 更新火鸟链接表中的字段

> ID：11613778
> 
> 赞同：-1
> 
> 时间：2012-07-23T13:43:50.377
> 
> 标签：sql, triggers, firebird

我有两张桌子——卡片和日记。卡片的 ID（代码）是日志（卡片代码）中的链接器。一张卡片可以有许多日志，我需要使用触发器从日志更新此卡片表中的字段（时间） - 我已经编写了当前触发器，但它有错误。请帮我找到它。

```
 AS
 DECLARE VARIABLE currentTimeOfChanging timestamp;
begin
 select current_timestamp from rdb$database into currentTimeOfChanging;

 update card
 set card.lastupdate = currentTimeOfChanging;//!error
 where card.code = journal.cardcode
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T17:47:25.190

我想你想要这样的触发器：

```
CREATE TRIGGER SetLastUpdateTS FOR journal
ACTIVE AFTER UPDATE
AS
BEGIN
  UPDATE card SET lastupdate = CURRENT_TIMESTAMP WHERE code = NEW.cardcode;
END 
```

一些评论：

*   不需要`currentTimeOfChanging`temp 变量，可以`current_timestamp`直接在`UPDATE`语句中使用；
*   您必须在变量前面加上“：”并且没有“；” 在 PSQL 代码中的 UPDATE 语句中的变量之后。所以你原来的陈述应该是

    更新卡集 card.lastupdate = :currentTimeOfChanging where ...

*   而不是`journal.cardcode`使用`NEW`和/或`OLD`上下文变量来引用当前语句（触发触发器）的值。

# c# - 如何动态填充复选框值？

> ID：11613780
> 
> 赞同：0
> 
> 时间：2012-07-23T13:44:03.170
> 
> 标签：c#, vb.net

我在我的标记页面上：

```
<asp:CheckBox runat="server" ID="sections" class="checkAll" /> 
```

感谢@Raminson，它使用 jQuery 来选中/取消选中复选框。

然后我在代码文件上有这个： Me.sections.InputAttributes.Add("Value", "Miracle Alley")

这行得通。

我现在遇到的问题是我们想从数据库中动态填充复选框的值。

我有点卡住了。下面是我这样做的尝试。

```
Imports System.Data.SqlClient
Partial Class _Default
    Inherits System.Web.UI.Page

    Private Sub Page_Load(ByVal sender As Object, 
                          ByVal e As System.EventArgs) Handles Me.Load
        If Not Page.IsPostBack Then
            Dim strSQL As String = "SELECT section FROM myTable"
            Dim connStr As String = 
              ConfigurationManager.ConnectionStrings("connstr").ConnectionString
            Dim conn As New SqlConnection(connStr)
            Dim cmd As New SqlCommand(strSQL, conn)
            Dim objReader As SqlDataReader

            objReader = cmd.ExecuteReader()
            '   |||||   Loop through the Reader to retrieve data    
            '   |||||   and set each checkbox to appropriate data from datasource
            While objReader.Read()
                With objReader
                    sections.Checked = .Item("section")
                End With
            End While
            Me.sessions.InputAttributes.Add("Value", "sections")
        End If
    End Sub
End Class 
```

我很抱歉同时选择了 c# 和 vb.net 标签。任何口味的任何帮助将不胜感激。

问题之一是我不断收到此错误：

***输入字符串的格式不正确。*** 这是在这条线上：

section.Checked = .Item("section")

我只是想将 db 字段部分的值分配给复选框值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:08:13.417

> CheckBox 控件在 Web 窗体页上创建一个复选框，允许用户在真或假状态之间切换。

-- [http://msdn.microsoft.com/en-us/library/4s78d0k1(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/4s78d0k1(v=vs.71).aspx)

我建议使用 CheckBoxList 而不是 CheckBox。

标记：

```
<asp:CheckBox runat="server" ID="sections" CssClass="checkAll" />
<asp:CheckBoxList runat="server" ID="sect" CssClass="checkAll" >
</asp:CheckBoxList> 
```

代码背后：

```
 If Not Page.IsPostBack Then
        Dim strSQL As String = "SELECT section FROM myTable"
        Dim connStr As String = ConfigurationManager.ConnectionStrings("connstr").ConnectionString
        Dim conn As New SqlConnection(connStr)
        Dim cmd As New SqlCommand(strSQL, conn)
        Dim objReader As SqlDataReader

        objReader = cmd.ExecuteReader()
        '   |||||   Loop through the Reader to retrieve data    
        '   |||||   and set each checkbox to appropriate data from datasource
        While objReader.Read()
            With objReader
                Dim li As New ListItem(objReader(0).ToString())
                sect.Items.Add(li)
            End With
        End While

    End If 
```

PS -

我收到包含 class="checkAll" 值对的警告。

> 消息 1 验证 (ASP.Net)：属性“类”不是元素“CheckBox”的有效属性。

改用 CssClass。

更新（添加选中/取消选中所有功能）

标记：

```
<asp:Button runat="server" ID="btnCheck" Text="Check All" OnClick="btnCheck_Click" />
<asp:Button runat="server" ID="btnUncheck" Text="Uncheck All" OnClick="btnUncheck_Click" /> 
```

代码背后：

```
Protected Sub btnCheck_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnCheck.Click
    For Each listItem As ListItem In sect.Items
        listItem.Selected = True
    Next
End Sub

Protected Sub btnUncheck_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnUncheck.Click
    For Each listItem As ListItem In sect.Items
        listItem.Selected = False
    Next
End Sub 
```

不要忘记这些：

```
Protected WithEvents btnCheck As Button
Protected WithEvents btnUncheck As Button 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:08:50.100

好吧，我将假设部分列的类型是位？如果是这样，您可以使用读取器对象的 GetBoolean(0) 方法，我对 VB 不太熟悉，但 c# 等价物是`sections.Checked = reader.GetBoolean(reader.GetOrdinal("section"));`

希望这可以帮助

# android - 使用ANDPDF jar在Android中打开pdf非常慢

> ID：11613783
> 
> 赞同：1
> 
> 时间：2012-07-23T13:44:20.437
> 
> 标签：android, pdf

我正在使用这个[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library) - 基本上是一个用于 Android 的 andpdf 查看器的包装 jar。即使我已按照信中的活动创建说明进行操作，我也无法打开单个 pdf。它总是显示 pdf 加载。它是我唯一可以使用的，因为它在 LGPL 下，我必须将它合并到我的专有项目中。我发现其他的要么使用 GPL 下的 MuPDF，要么使用 itext，并且只能用于创建 PDF。我已经在 andpdf 和 wrapper 网站上提出了这个问题，但还没有收到回复。有没有人用 ANDPDF 解决了这个性能问题。或者有没有人使用 LGPL 下的 jar 在 android 中打开 pdf？

对于 andpdf jar - 我将文件的路径作为 URI 传递给 Jar 中的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:01:39.963

弄清楚了-实际上我将文件名传递给了错误的活动-它必须传递给 Jar 中的活动而不是本地创建的活动

# ios - appDelegate 中的 UIImageView 显示在模拟器中，但不在设备上

> ID：11613789
> 
> 赞同：0
> 
> 时间：2012-07-23T13:44:29.940
> 
> 标签：ios, uiimageview, ios-simulator

我有一个奇怪的问题：我想在我的一个应用程序中有一个图标，该图标位于所有其他控制器/视图之上。我的想法是在处理内容视图的 UITabBarController 上方的主 XIB 文件（项目在 iOS-5 之前开始）中创建一个 UIImageView。

我在 appDelegate 的 didFinishLaunchingWithOptions 中添加了 ImageView

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...
    // Add the icon view that shows current working status (working/pause)
    [self.window addSubview:self.statusIcon];
    ...
} 
```

ImageView 最初是隐藏的，只有在按下按钮时才会显示。然后我将分配 UIImage 并取消隐藏它：

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[delegate.statusIcon setImage:statusIconWorking];
[delegate.statusIcon setHidden:NO]; 
```

这适用于模拟器，但不适用于设备（​​在 iPod touch 4\. generation 和 iPad 3\. generation (retina) 上进行了测试）。

有人可以告诉我它不是这样工作的吗？这不是图像问题（它存在于设备上，我尝试在 ImageView 中加载其他图像，这些图像在应用程序的其他部分中正确显示）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:57:33.283

我曾经观察到同样的问题，但在这里没有找到解决方案。不过，一些提示很有帮助，所以我最终确定了它。它只发生过一次，我在 xcode 版本更改几天后注意到了它。但是，我从来没有发现解决方案是什么，以及这是否真的是由版本迁移引起的。

原因是图像文件不是捆绑包的一部分。检查您的边界设置。对您可能拥有的每个目标都这样做。

我的观察是：图像文件包含在模拟器的捆绑包中。它不仅从一个版本到下一个版本都保留在那里。即使我从模拟器中删除了应用程序，它也会重新安装。我这样做是使用模拟器的 gui 删除它，就像从真实设备中删除一样，然后我手动将它从模拟器的文件系统中删除 - 只是为了确定。无论如何，该文件已重新安装。

在设备上它是不同的。创建一个 IPA 或 APP 捆绑包，就像您为 beta 测试人员所做的那样，以提交到商店。看看它。（将文件名更改为 .zip 并解压缩可能有助于查看捆绑包。）我敢打赌，您不会在那里找到您的图像。

解决方案：仔细检查您的项目设置并确保分别为所有目标正确包含所有资源。

# shopify - Shopify Webhooks for Collections 不起作用

> ID：11613792
> 
> 赞同：2
> 
> 时间：2012-07-23T13:44:38.750
> 
> 标签：shopify

我为主题创建了新的 Shopify Webhook `collections/create`，`collections/update`并且`collections/delete`（如[Shopify API 文档](http://api.shopify.com/webhook.html)中所列）。

创建 Webhook 的正文为空，标头中没有集合 ID。

```
{
    "x-shopify-topic": "collections/create",
    "x-shopify-shop-domain": "myshop.myshopify.com",
    "x-shopify-hmac-sha256": "MiTUUuy****************xZXScg=",
    "x-real-ip": "204.93.213.120",
    "x-forwarded-for": "204.93.213.120",
    "user-agent": "Ruby",
    "host": "postcatcher.in",
    "content-type": "application/xml",
    "content-length": "474",
    "connection": "close",
    "accept": "*/*",
    "x-heroku-queue-wait-time": "0",
    "x-heroku-queue-depth": "0",
    "x-heroku-dynos-in-use": "1",
    "x-request-start": "1343050015180" 
} 
```

其他两个 Webhook（更新和删除）根本不会被调用。这是 Shopify 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:20:27.817

我将首先使用 API 列出商店的 webhook，以确保所有三个 webhook 都在那里。创建 webhook 时可能出现问题。

如果他们确实在那里，那么我会直接联系 Shopify 应用程序团队：apps@shopify.com

# numpy - 如何在 Eclipse Juno 中安装和运行 pandas python 库？

> ID：11613800
> 
> 赞同：1
> 
> 时间：2012-07-23T13:45:07.573
> 
> 标签：numpy, python-3.x, pandas

我在 Eclipse Juno 中使用 pydev 插件在 Windows 7 中进行 python 编程，我使用的是 python 3.2，它在运行使用标准 python 包的 python 应用程序时工作正常。对于我的一个项目，我必须使用 pandas 库，为此我下载并安装了适用于 python 3 的 numpy 和 pandas Windows 安装程序。但即使运行一个小程序，它也会显示错误消息。因此，任何人都知道如何使用 eclipse 在 Windows 7 中安装和测试 pandas，只需将其传递给我即可。

错误信息是这样的：

```
Traceback (most recent call last):
import numpy
File "C:\Python32\lib\site-packages\numpy\__init__.py", line 137, in <module>
from . import add_newdocs
File "C:\Python32\lib\site-packages\numpy\add_newdocs.py", line 9, in <module>
from numpy.lib import add_newdoc
File "C:\Python32\lib\site-packages\numpy\lib\__init__.py", line 4, in <module>
from .type_check import *
File "C:\Python32\lib\site-packages\numpy\lib\type_check.py", line 8, in <module>
import numpy.core.numeric as _nx
File "C:\Python32\lib\site-packages\numpy\core\__init__.py", line 40, in <module>
from numpy.testing import Tester
File "C:\Python32\lib\site-packages\numpy\testing\__init__.py", line 8, in <module>
from unittest import TestCase
File "C:\Python32\lib\unittest\__init__.py", line 59, in <module>
from .case import (TestCase, FunctionTestCase, SkipTest, skip, skipIf,
File "C:\Python32\lib\unittest\case.py", line 6, in <module>
import pprint
EOFError: EOF read where not expected 
```

在此先感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:00:45.303

我想你有安装熊猫：在这里你可以在这里找到适用于 Windows 的熊猫包 [https://pypi.python.org/pypi/pandas#downloads](https://pypi.python.org/pypi/pandas#downloads)

# rest - EnunciateJerseyServletContainer 中没有解析异常？

> ID：11613801
> 
> 赞同：0
> 
> 时间：2012-07-23T13:45:09.083
> 
> 标签：rest, jersey, jackson, enunciate

我有一个使用 jersey+enunciate 的休息项目，现在我想用恶意字符串测试端点。该程序的输出在我看来就像 JacksonParseException 但没有详细信息或堆栈跟踪：

```
Unexpected character ('6' (code 54)): was expecting comma to separate ARRAY entries
 at [Source: org.apache.catalina.connector.CoyoteInputStream@28fe53cf; line: 1, column: 35] 
```

我想捕获异常，但即使声明默认错误页面也无法完成工作，球衣中的 ExceptionMapper 也无法获得它。（在我看来，它之前在容器中被捕获并记录但没有被重新抛出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T18:21:56.393

Try applying a servlet filter that catches the exception.

# php - 计数、分组、内连接、php、mysql

> ID：11613802
> 
> 赞同：2
> 
> 时间：2012-07-23T13:45:08.823
> 
> 标签：php, mysql, sql, aggregate-functions

我目前（试图）开发一个论坛。现在我遇到了一个小障碍。我的数据库中有四个表；“类别”、“论坛”、“主题”和“回复”。他们都有一个id、一个父id和一个名字。

我现在的问题是我应该如何存储和获取每个类别和论坛的主题和回复的数量。一开始我想保存每个分类和论坛中的所有主题和回复，以及保存每个主题中的所有回复。

但这是我宁愿避免看到的事情，因为我必须为每个回复进行 1 次插入和 3 次更新；1 到类别，1 到论坛，1 到主题，最后是回复本身，插入。

所以相反，我想是否有可能（以及如何）使用 COUNT、GROUP BY 和 INNER JOIN 进行查询

沿线的东西

```
SELECT * 
  FROM `categories`
  JOIN (COUNT ( * )
         FROM `topics`
     GROUP BY `parent_id`
        WHERE `parent_id` = `categories`.`id`) as `amount_of_topics`
  JOIN (COUNT ( * )
         FROM `topics`
     GROUP BY `parent_id`
        WHERE `parent_id` = `topics`.`id`) as `amount_of_replies` 
```

只是我没有按照我想要的方式工作。

因此，要获取特定论坛的所有回复并计算它们，回复和论坛得到的连接是回复的 parent_id 属于一个主题，而该主题的 parent_id 属于一个论坛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:26:09.430

我不确定我是否正确理解了您的问题，但如果您只想要特定论坛的主题和回复数（前提是类别属于论坛而不是相反），您可以沿着这条线进行查询：

```
SELECT  forums.ID as forum_id
,       forums.name as forum_name
,       Count(topics.ID) AS count_of_topics
,       Count(replies.ID) AS count_of replies
FROM forums 
    LEFT JOIN categories ON forums.ID = categories.parent_id 
    LEFT JOIN topics ON categories.ID = topics.parent_id 
    LEFT JOIN replies ON topics.ID = replies.parent_id
GROUP BY forums.ID, forums.name, categories.ID, categories.name; 
```

如果您要按类别查找主题和回复的数量，请使用：

```
SELECT  categories.ID as category_id
,       categories.name as category_name
,       Count(topics.ID) AS count_of_topics
,       Count(replies.ID) AS count_of replies
FROM categories
    LEFT JOIN topics ON categories.ID = topics.parent_id 
    LEFT JOIN replies ON topics.ID = replies.parent_id
GROUP BY forums.ID, forums.name, categories.ID, categories.name; 
```

希望这会有所帮助，但如果这不是您想要达到的目标，请在您的问题中添加精确度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:48:44.717

我认为这是您想要的查询：

```
SELECT categories.*, `amount_of_topics`, `amount_of_replies`
FROM `categories` JOIN
      (select `parent_id`, COUNT ( * ) as `amount_of_topics` 
       FROM `topics`
       GROUP BY `parent_id`
     )  tp
     on tp.`parent_id` = `categories`.`id`) JOIN
     (select `topics`.`id`) , COUNT ( * ) as `amount_of_replies`
      FROM `topics` 
      GROUP BY `topics`.`id`
    ) ti
    on  tp.`parent_id` = ti.`id` 
```

这个想法是为您想要的每个主题组创建单独的子查询，然后将它们连接在一起。

# android - 获取数组适配器中的项目值

> ID：11613810
> 
> 赞同：0
> 
> 时间：2012-07-23T13:45:37.710
> 
> 标签：android, spinner, adapter, android-arrayadapter, arrays

我想在微调器中获取所选项目的值。我正在使用数组适配器。

```
<string-array name="my_list">
         <item value="">---Select the value from the List---</item>
    <item value="value1">data1</item>
    <item value="value2">data2</item>
    <item value="value3">data3</item>
    <item value="value4">data4</item>
    <item value="value5">data5</item>
</string-array> 
```

如果我在微调器中选择“data1”，我想获得“value1”......而不是“data1”

任何人都可以帮助我。快速响应对我帮助很大。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:13:25.847

我认为这不可能，前一阵子自己尝试过。也许您只是按照我的做法创建第二个数组，在同一索引上保存您想要的值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:16:10.200

你必须像这样添加一个值字符串数组而不是值属性

```
<string-array name="my_list">
    <item value="">---Select the value from the List---</item>
    <item>data1</item>
    <item>data2</item>
    <item>data3</item>
    <item>data4</item>
    <item>data5</item>
</string-array>

<string-array name="my_list_values">
    <item value="">---Select the value from the List---</item>
    <item>value1</item>
    <item>value2</item>
    <item>value3</item>
    <item>value4</item>
    <item>value5</item>
</string-array> 
```

要从 my_list_values 中检索值，您需要在侦听器的 onItemSelected 函数中编写它

```
String selectedValue = getResources().getStringArray(R.array.my_list_values)[parent.getSelectedItemPosition()]; 
```

你不能像你直接做的那样做，因为 Android 不支持 entryValues

# ios - iPhone 倾斜角度 - 使用陀螺仪？

> ID：11613811
> 
> 赞同：0
> 
> 时间：2012-07-23T13:45:38.963
> 
> 标签：ios, angle, gyroscope, pitch

我想知道 iPhone 直立时倾斜了多少度 - 也就是说，如果我将 iPhone 指向上方，我想知道它向上看的度数是多少？我认为我可以为此使用陀螺仪和核心运动，并且我认为这是我想要的**音高**，但是，**音高**是以弧度每秒为单位的“速度”。我对用户移动 iPhone 的速度并不感兴趣，我只对倾斜角度感兴趣。因此，如果我将手机指向上方拍照，我想知道指向的角度 - 有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T14:49:59.240

陀螺仪数据以每秒弧度为单位，但您要查找的是 CMMotionManager.attitude 属性。它以弧度表示物体相对于某个参考系的姿态。

创建类变量motionManager和init：

```
 motionManager = [[CMMotionManager alloc] init];
    motionManager.deviceMotionUpdateInterval = 0.1f;
    [motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue currentQueue] withHandler:^(CMDeviceMotion *motion, NSError *error) {
        [self processMotion:motion];
    }]; 
```

处理更新，您正在寻找音高，但在此示例中，它将向您显示所有三个值，以便您可以尝试并决定您需要什么：

```
 -(void)processMotion:(CMDeviceMotion*)motion {
        NSLog(@"Roll: %.2f Pitch: %.2f Yaw: %.2f", motion.attitude.roll, motion.attitude.pitch, motion.attitude.yaw);
} 
```

这些是欧拉角，您还可以选择获取旋转矩阵或四元数格式。每个都有自己的优点和缺点。

# java - 如何在 SmartGWT 中使用其他包中的类

> ID：11613818
> 
> 赞同：0
> 
> 时间：2012-07-23T13:46:19.307
> 
> 标签：java, gwt, smartgwt

如果我尝试使用另一个包中的方法，我会收到错误消息：

> [错误] [odminterface] - 'file:/C:/Eclipse%20EE%20WS/ODMInterface/src/com/odminterface/client/ODMInterface.java' 中的错误
> 
> [错误] [odminterface] - 第 71 行：没有可用于类型 com.testpack.test.PackTest 的源代码；你忘了继承一个必需的模块吗？
> 
> [错误] [odminterface] - 找不到类型“com.odminterface.client.ODMInterface”
> 
> [错误] [odminterface] - 无法从用户代理 'Mozilla/5.0 (Windows NT 6.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2' 在 127.0.0.1:6575 加载模块 'odminterface'

我的项目： [http ://s019.radikal.ru/i616/1207/2e/1e224907c5c1t.jpg](http://s019.radikal.ru/i616/1207/2e/1e224907c5c1t.jpg)

ODMInterface.gwt.xml 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='odminterface'>

<inherits name='com.google.gwt.user.User'/>
<inherits name='com.smartgwt.SmartGwt'/>

<inherits name='com.google.gwt.user.theme.clean.Clean'/>

<entry-point class='com.odminterface.client.ODMInterface'/>

<source path='client'/>
<source path='shared'/>
</module> 
```

包测试代码：

```
package com.testpack.test;

public class PackTest 
{

public void test()
{

}
} 
```

如果我将“PackTest”类放入“com.odminterface.client”pakage - 一切正常。

如何调用另一个包中的类方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:05:50.390

默认情况下，GWT会在`client`相对于模块包的包中查找 java 源（例如，模块`ODMInterface.gwt.xml`在包中`com.odminterface`，因此 java 源应该在 'com.odminterface.client' 中）。

可以使用`source`标签添加其他包（请参阅您`ODMInterface.gwt.xml`的示例用法，已经使用`source`标签添加了两个包）。

# multithreading - 在 UI 线程之外创建 UIElements，Silverlight

> ID：11613820
> 
> 赞同：0
> 
> 时间：2012-07-23T13:46:23.450
> 
> 标签：multithreading, silverlight, c#-4.0, backgroundworker, uielement

在我的 silverlight 4.0 应用程序中，有一次，在用户按下按钮后，我必须创建一些需要一些时间（5-10 秒）的 UI 对象。在此期间，用户界面当然会冻结。我决定将这些对象的创建放在后台工作人员中，这样 UI 至少可以显示进度条。

但是这个解决方案不起作用。要创建 UI 对象，您必须在 UI 线程中。如果我将这些对象的创建放在里面，那么`Dispatcher.BeginInvoke()`我的 UI 就会冻结。在大多数情况下甚至没有显示进度条。有没有解决的办法？

我可以在 silverlight 在后台创建 UI 对象时显示进度条吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:50:00.790

您可以在内部创建 UI 对象之前尝试显示自定义消息`BeginInvoke()`。

例子：

```
private void CreateObjects()
{
    myMsg.Text = "Loading...";
    Dispatcher.BeginInvoke(() => { AddObjects() });
} 
```

创建所有对象后，禁用该消息。

您也可以使用进度条尝试类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:03:29.707

看看这个论坛[帖子](http://forums.silverlight.net/t/110392.aspx/1)。它可能会有所帮助。

而不是使用：

```
System.Windows.Threading.Dispatcher.BeginInvoke(() => {}); 
```

他们使用：

```
System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() => {}); 
```

# android - 如何创建将在水平维度上充满的对话框

> ID：11613825
> 
> 赞同：35
> 
> 时间：2012-07-23T13:46:41.610
> 
> 标签：android, layout, dialog

当我在指定此对话框的布局中使用时，`android:layout_width="match_parent"`我得到此对话框：

![小对话框](../Images/b147e625bea9749a5e6aed695b7111ee.png)

我需要更广泛的对话。有任何想法吗？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-07-23T14:01:09.917

您可以通过抓取`Window`对话框使用的对象并重置宽度来做到这一点。这是一个简单的例子：

```
//show the dialog first
AlertDialog dialog = new AlertDialog.Builder(this)
        .setTitle("Test Dialog")
        .setMessage("This should expand to the full width")
        .show();
//Grab the window of the dialog, and change the width
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
Window window = dialog.getWindow();
lp.copyFrom(window.getAttributes());
//This makes the dialog take up the full width
lp.width = WindowManager.LayoutParams.MATCH_PARENT;
lp.height = WindowManager.LayoutParams.WRAP_CONTENT;
window.setAttributes(lp); 
```

这是最终结果。请注意，如果您需要微调某些内容（例如更改背景等），您可以对对话框进行更多样式设置。当我过去不得不这样做时，我通常使用这种方法，并`setView()`在构建器类上自定义对话框中使用的布局。

![例子](../Images/3e49e72328b4b23ea96719e9b6f8b4b2.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-23T06:49:00.370

解决此问题的另一种方法是使用：

```
import android.support.v7.app.AlertDialog; 
```

代替：

```
import android.app.AlertDialog; 
```

# emacs - 我在哪里可以下载 Emacs APEL 包？

> ID：11613826
> 
> 赞同：10
> 
> 时间：2012-07-23T13:46:44.813
> 
> 标签：emacs, lisp

我正在尝试安装允许在 Emacs 中进行多选项卡编辑的[ElScreen 。](https://github.com/knu/elscreen)

![Emacs 屏幕](../Images/1faddca42b2d90784d3283bf7caec680.png)

它的先决条件之一是调用[APEL](http://en.wikipedia.org/wiki/Apel_%28emacs%29)（便携式 Emacs 库）。但是，似乎我在任何地方都找不到可用的 APEL 下载链接：[wikipedia](http://en.wikipedia.org/wiki/Apel_%28emacs%29)、[Emacs-wiki](http://www.emacswiki.org/emacs/APortableEmacsLibrary)和 ElScreen 的[README](https://github.com/knu/elscreen)文件都给出了损坏的链接。还有人在使用这个包并且知道如何安装吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T01:35:52.470

我点击了 ubuntu 链接并能够从那里获取它（感谢 rvf0068），但我认为如果有一种比解压 .deb 更简单的方法来获取它会很好。

所以它现在也在 github 上（它适用于 emacs 24.2，我刚刚做到了）。

[https://github.com/jeffgran/APEL](https://github.com/jeffgran/APEL)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T03:10:41.483

如果您使用 Ubuntu（也可能是 Debian），则可以从存储库中安装 apel。参见例如：[http ://packages.ubuntu.com/precise/apel](http://packages.ubuntu.com/precise/apel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T04:55:30.760

[如果您使用 emacs 24，则可以在github](https://github.com/shosti/elscreen)中获得不依赖 APEL 的 Elscreen 的 fork 版本。您可以通过 ELPA（Emacs Lisp Package Archive）轻松安装它。我一直在使用它，没有任何问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T09:06:06.900

您可以在此处找到最新版本。 [http://git.chise.org/elisp/apel/index.html.en](http://git.chise.org/elisp/apel/index.html.en)

# javascript - 使用 WP UI 从选项卡到选项卡的 Jquery 文本链接

> ID：11613831
> 
> 赞同：0
> 
> 时间：2012-07-23T13:46:53.397
> 
> 标签：javascript, jquery, wordpress, hyperlink, tabs

我正在使用`jquery`标签插件`Wordpress`（该插件可在[http://wordpress.org/extend/plugins/wp-ui/](http://wordpress.org/extend/plugins/wp-ui/)下载）

我有一个带有 4 个选项卡的页面，我想要一个文本链接将人们从选项卡 1 带到选项卡 4。

我可以添加一个文本链接`#_enquire`，将我带到选项卡 4，但它还会在 URL 后面附加#_enquire，因此如果您然后单击返回选项卡 1 并单击文本链接，它将不再有效，因为它已经在该 URL 处。

我假设必须有一种相对简单的方法来应用当您单击选项卡本身到文本链接时使用的相同 jquery。因此，当您单击文本链接时，它就像您单击选项卡名称本身一样。

您可以在此处查看网站上的标签：[thailand-golf-tours.com/golf-tours/bangkok/bangkok-2-days-golf-package/](http://thailand-golf-tours.com/golf-tours/bangkok/bangkok-2-days-golf-package/)

我已将链接的锚版本留在选项卡 1 的底部（“单击此处查看选项卡 4”）

任何帮助将非常感激。我习惯使用 css/html，所以我对 javascript/jquery 不太擅长。我尝试通过他的网站以及 wordpress 网站和 twitter 联系插件作者，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:15:02.980

您需要使用 jquery 模拟点击，而不是使用链接“重定向”。

因此，单击文本链接“与单击第四个选项卡相同”。由于您没有发布您的代码，我将发布一些应该让您了解这个想法的代码。

```
jQuery("#the-name-of-the-link-id").on("click", function(e){
    e.preventDefault();
    jQuery("#the-name-of-the-tab-id").click();
}); 
```

当您单击链接时，这将模拟选项卡单击！

**编辑：**

尝试这个。

```
jQuery(document).ready(function($){ 
    $("#the-name-of-the-link-id").on("click", function(e){ 
         e.preventDefault(); 
         e.stopPropagation(); 
         $("#the-name-of-the-tab-id").click(); 
    }); 
}); 
```

再次不要使用`href`. 使用 an `id`，如果您必须使用 an ，则`href`执行此 selector `$('a[href="#_enquire"]')`，但这是一种不太直接的方法。

# facebook-login - facebook登录：登录后如何重定向到特定的URL

> ID：11613838
> 
> 赞同：1
> 
> 时间：2012-07-23T13:47:13.120
> 
> 标签：facebook-login

我的 html 中有以下代码：

```
<div class="fb-login-button" scope="email,user_checkins,user_events,friends_checkins">Login with Facebook</div> 
```

如何指定回调 URL？我想重定向到一个 URL，然后存储返回的身份验证令牌和其他详细信息。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:41:33.830

如果您添加`onlogin="..."`到您的 DIV，您可以指定登录后执行的功能，例如：

```
<div class="fb-login-button" scope="email,user_checkins,user_events,friends_checkins" onlogin="alert( 'Logged In' );">Login with Facebook</div> 
```

# php - 使用 php 删除所有文件、文件夹及其子文件夹

> ID：11613840
> 
> 赞同：22
> 
> 时间：2012-07-23T13:47:35.040
> 
> 标签：php, file-io, directory, subdirectory

我需要一个可以删除整个目录及其所有子文件夹、文件等的脚本。我尝试了几个月前在互联网上找到的这个功能，但它不能完全工作。

```
function deleteFile($dir) {
    if(substr($dir, strlen($dir)-1, 1) != '/') { 
        $dir .= '/'; 
    }
    if($handle = opendir($dir)) { 
        while($obj = readdir($handle)) { 
            if($obj != '.' && $obj != '..') { 
                if(is_dir($dir.$obj)) { 
                    if(!deleteFile($dir.$obj)) {
                        echo $dir.$obj."<br />";
                        return false;
                    }
                }
                elseif(is_file($dir.$obj)) { 
                    if(!unlink($dir.$obj)) {
                        echo $dir.$obj."<br />";
                        return false;
                    }
                }
            }
        }
        closedir($handle); 
        if(!@rmdir($dir)) {
            echo $dir.'<br />';
            return false;
        }
        return true;
    }
    return true;
} 
```

对于测试，我使用解压的 prestashop 存档，并尝试删除解压存档的文件夹，但它不起作用。

```
/home/***/public_html/prestashop/img/p/3/
/home/***/public_html/prestashop/img/p/3
/home/***/public_html/prestashop/img/p
/home/***/public_html/prestashop/img 
```

这些是问题文件夹。第一次我想-“可能是文件的chmod有问题”但是当我测试所有文件chmod权限755（之后是777）时-结果是一样的。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-23T14:07:58.470

```
<?php
  function rrmdir($dir) {
  if (is_dir($dir)) {
    $objects = scandir($dir);
    foreach ($objects as $object) {
      if ($object != "." && $object != "..") {
        if (filetype($dir."/".$object) == "dir") 
           rrmdir($dir."/".$object); 
        else unlink   ($dir."/".$object);
      }
    }
    reset($objects);
    rmdir($dir);
  }
 }
?> 
```

从[php.net试试上面的代码](http://www.php.net/manual/en/function.rmdir.php#98622)

对我来说工作得很好

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-21T10:06:40.393

```
function delete_files($dir) { 
  foreach(glob($dir . '/*') as $file) { 
    if(is_dir($file)) delete_files($file); else unlink($file); 
  } rmdir($dir); 
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-18T13:50:07.900

您可以使用更简洁的方法对目录进行递归删除。

例子：

```
function recursiveRemove($dir) {
    $structure = glob(rtrim($dir, "/").'/*');
    if (is_array($structure)) {
        foreach($structure as $file) {
            if (is_dir($file)) recursiveRemove($file);
            elseif (is_file($file)) unlink($file);
        }
    }
    rmdir($dir);
} 
```

用法：

```
recursiveRemove("test/dir/"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-22T10:38:57.367

[使用system()](http://php.net/manual/en/function.system.php)方法的最简单和最好的方法

```
$dir = dirname ( "/log" );
if ($handle = opendir($dir)) {
    while (( $file = readdir($handle)) !== false ) {
        if ($file != "." && $file != "..") {
            system("rm -rf ".escapeshellarg($dir.'/'.$file));
        }
    }
}
closedir($handle); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T13:49:12.350

```
/**
 * Deletes a directory and all files and folders under it
 * @return Null
 * @param $dir String Directory Path
 */
function rmdir_files($dir) {
 $dh = opendir($dir);
 if ($dh) {
  while($file = readdir($dh)) {
   if (!in_array($file, array('.', '..'))) {
    if (is_file($dir.$file)) {
     unlink($dir.$file);
    }
    else if (is_dir($dir.$file)) {
     rmdir_files($dir.$file);
    }
   }
  }
  rmdir($dir);
 }
} 
```

# c# - 我有一个带有词法分析器、解析器和评估器的自定义表达式程序。我如何对其进行 LINQ 化？

> ID：11613842
> 
> 赞同：4
> 
> 时间：2012-07-23T13:47:41.820
> 
> 标签：c#, linq, iqueryable

这是我的接口和枚举，稍微简化了一点。：

```
public interface IExpression
{
    ExpressionType ExpressionType { get; }
}

public interface ILiteralExpression : IExpression
{
    object Value { get; set; }
}

public interface IOperatorExpression : IExpression
{
    IExpression[] Operands { get; set; }

    string OperatorUniqueName { get; set; }

    IOperatorExpression SetOperand(int index, IExpression expression);
}

public enum ExpressionType
{
    Operator,
    Literal
} 
```

要创建一个表达式，我可以这样做：

```
var expression = ExpressionManager.Engines["Default"].Parser.Parse("1 + 3 * 4 + \"myVariable\""); 
```

这相当于这样的事情：

```
var expression1 = ExpressionManager.CreateOperator("Add", 2).
    SetOperand(0, ExpressionManager.CreateOperator("Add", 2).
        SetOperand(0, ExpressionManager.CreateLiteral(1)).
        SetOperand(1, ExpressionManager.CreateOperator("Multiply", 2).
            SetOperand(0, ExpressionManager.CreateLiteral(3)).
            SetOperand(1, ExpressionManager.CreateLiteral(4)))).
    SetOperand(1, ExpressionManager.CreateLiteral("myVariable")); 
```

我希望能够（有效地）做这样的事情：

```
(from e in expression
 where e is ILiteralExpression && "myVariable".Equals(((ILiteralExpression)e).Value)
 select (ILiteralExpression)e).ToList().
 ForEach(e => e.Value = 2); 
```

我想我需要做一些实施`IQueryable`或其他事情，但我不知道从哪里开始。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:01:25.870

[`System.Linq.Expressions`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx)遍历表达式树，并使用类的工厂方法将每个元素从命名空间转换为对象[`Expression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)。

如果你不能修改你的`IExpression`类来添加让你实现[*访问者模式*](http://en.wikipedia.org/wiki/Visitor_pattern)的方法，你可以依靠类型检查旧样式：

```
private static Expression ConvertExpression(IExpression expr) {
    if (expr is ILiteralExpression) {
        return Expression.Constant(((ILiteralExpression)expr).Value);
    }
    if (expr is IOperatorExpression) {
        var ops = ((IOperatorExpression)expr)
            .Operands
            .Select(ConvertExpression)
            .ToList();
        var res = ops[0];
        for (int i = 1 ; i != ops.Length ; i++) {
            if (((IOperatorExpression)expr).OperatorUniqueName == "+") {
                res = Expressions.Add(res, ops[i]);
            } else if (((IOperatorExpression)expr).OperatorUniqueName == "-") {
                res = Expressions.Subtract(res, ops[i]);
            } else if (...) {
            }
        }
        return res;
    }
} 
```

当然，在这种方法中你需要更多的逻辑。关键部分是传递参数：您需要弄清楚变量在哪里以及它们的类型是什么，`Expression.ParameterExpression`用来创建它，然后使用该方法将转换后的表达式编译成`Func<...>`某种形式。[`LambdaExpression.Compile`](http://msdn.microsoft.com/en-us/library/bb356928.aspx)使用已编译的 lambda，您可以将表达式插入到 LINQ 的内存框架中。

如果您可以使您的`IExpressions`可访问，请添加一个遍历表达式并使用堆栈将其转换为 LINQ 表达式的访问者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:50:55.733

您要做的是构建自己的 LINQ 查询提供程序。您可以选择要允许的 LINQ 操作（WHERE、OrderBy 等）

这是我写一篇博文时对我帮助最大的博文系列：http: [//blogs.msdn.com/b/mattwar/archive/2007/07/30/linq-building-an-iqueryable-provider-part- i.aspx](http://blogs.msdn.com/b/mattwar/archive/2007/07/30/linq-building-an-iqueryable-provider-part-i.aspx)

# sql - 在 Microsoft Access 中使用查询比较两个字段并查找多个匹配值

> ID：11613844
> 
> 赞同：3
> 
> 时间：2012-07-23T13:47:44.003
> 
> 标签：sql, vba, ms-access, duplicates

我有一个问题，我试图使用查询而不是 VBA 来解决。

我有两个字段，我们称之为“FPC”和“代码”。这两个字段都包含数字。FPC 值将与代码值匹配。我要确保的是，一旦 FPC 值与代码值匹配，相同的 FPC 值与不同的代码值不匹配，反之亦然 - 一旦使用代码值，我不希望代码值匹配多个FPC。

重要的是要注意两个字段中使用了重复的值。

这是一个例子：

```
FPC 代码
1 12
1 12
1 14
2 16
3 11
3 11
4 17
5 19
6 16
```

这里有两个错误：
1\. FPC“1”匹配了两个不同的代码值。
2\. Code“16”对应两个不同的FPC值。

请让我知道你的建议。我在想一个查询会有所帮助，然后运行 ​​VBA 来提取结果（有数万条记录）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:14:59.393

查询的目的是什么？只是为了发现问题？如果是，那么类似

```
select FPC, count(distinct(CODE)) from tableName where count(distinct(CODE)) >1 group by FPC 
```

（以及 CODE 与 FPC 的反向查询）应该没问题。

# actionscript-3 - 尝试通过接口使用 addEventListener 时出现编译器错误

> ID：11613847
> 
> 赞同：0
> 
> 时间：2012-07-23T13:48:01.320
> 
> 标签：actionscript-3

尝试将 addEventlistener 与接口一起使用，但出现编译器错误：=> 通过静态类型 IScene 的引用调用可能未定义的方法 addEventListener。

```
//IScene.as 

    public interface IScene 
        {

            function show():void

            function load():void;

            function unload():void;
        } 
```

* * *

```
//Main.as
                    var scene:IScene  ;

        scene= sceneView_Arr[scene_number] ;

        scene.addEventListener( GameEvent.ON_LOAD_SCENE , start );
        scene.load();
        scene.show(); 
```

那我应该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:12:30.903

而不是 Fox in socks answer，我会推荐一种稍微不同的方法：

```
public interface IScene extends IEventDispatcher 
```

然后对于您的实际场景类

```
public class MyScene extends EventDispatcher implements IScene 
```

然后你就可以像你已经拥有的那样使用它，而无需任何额外的代码。

```
scene.addEventListener(GameEvent.ON_LOAD_SCENE, start); 
```

# python - Cygwin、SWIG 和 Python

> ID：11613852
> 
> 赞同：1
> 
> 时间：2012-07-23T13:48:47.480
> 
> 标签：python, cygwin, swig

我想使用我在 SWIG 中使用 python 中的 Cygwin 创建的 DLL，但它在 cygwin 提供的 python 实现之外不起作用。这是怎么回事？当我在 cygwin 中时，我会：

```
 $python
    >>>import arraytest 
```

它工作得很好。

当我将 DLL 移动到 python 3.2.3 的 python 路径中（我使用的是 Windows）并尝试使用它时，我收到此错误：

```
 ImportError: DLL load failed: The specified module could not be found. 
```

我知道它在正确的路径中并且我以正确的方式引用它（因为否则我会收到“ImportError：没有名为...的模块”错误。

我需要这个 DLL 可以在任何 Python 平台上使用，所以如果 cygwin 创建的 DLL 只能由 cygwin 使用，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:38:11.523

我认为 Cygwin Python 和 Windows 的标准（MSVC 编译）Python 不能使用单个 DLL。您可能应该分发两个不同的 DLL，或者只使用 MSVC Express 来构建 DLL。

# javascript - Javascript onSubmit 事件

> ID：11613853
> 
> 赞同：0
> 
> 时间：2012-07-23T13:48:48.877
> 
> 标签：javascript

```
var themes2="dark";     
if(isCanvasSupported()){
            $('#body-wrapper').after('<div id="palette"> \
        <div id="paletteHeader"> \
            <div id="colorResult">#0199FE</div> \
            <a href="javascript:void(0);" class="closeButton"></a> \
            <a href="javascript:void(0);" class="openButton"></a> \
        </div> \
    <div id="paletteBody"> \
        <div id="colorPicker"></div> \
        <canvas id="colorPalette" width="150" height="150"></canvas> \
    </div> \
    <div id="ThemeSwitch"> \
        <a class="themeBtn light " href="javascript:void(0)" onclick="changeTheme(\'light\')">LIGHT</a> \
        <a class="themeBtn dark selected" href="javascript:void(0)" onclick="changeTheme(\'dark\')">DARK</a> \
    </div> \
    <form name="myform" method="post" onSubmit="**return onsubmitform()**;">
    <input type="submit" value="Kaydet"> \
    </form> \
</div>'); 
```

我编写了一些东西。作为回报 onsubmitform() 表单操作什么也不做。onsubmitform 函数：

```
function onsubmitform()
{
  document.myform.action ="?tasarim="+themes2;
  return true;
} 
```

我想要一些“index.php?tasarim=dark”，但浏览器只重定向“index.php”......我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:52:19.560

那是因为您在表单中指定的方法是`post`，如果您希望 url 像`index.php?tasarim=dark`将`method`表单中的`get`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:53:44.077

`themes2`可能没有在函数的范围内定义。相反，尝试这样的事情：

```
......
<form method="post" action="?tasarim='+themes2+'"> 
```

这消除了对事件处理程序的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:37:04.580

也许另一种方法可能是利用 jQuery 的链接并将提交事件绑定到您创建的那个 jQuery 对象（而不是内联它）？

# facebook - 如何检查 fb-token 何时过期

> ID：11613864
> 
> 赞同：1
> 
> 时间：2012-07-23T13:49:19.563
> 
> 标签：facebook, facebook-graph-api, facebook-authentication

是否有可能检查 fb 令牌何时到期？

我已经阅读[了身份验证作为应用程序](https://developers.facebook.com/docs/authentication/applications/)和[处理无效和过期的访问令牌](https://developers.facebook.com/docs/authentication/access-token-expiration/)，并在互联网上搜索了答案，但我找不到任何答案。

问候， Senad

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T12:25:50.777

好消息是，它现在有一个终点。

您可以通过向连接发出 GET 请求来检索与特定访问令牌相关的信息`debug_token`。就像是：

```
GET /debug_token?
     input_token={input-token}&
     access_token={access-token} 
```

您可以在[获取有关令牌和调试的信息](https://developers.facebook.com/docs/facebook-login/access-tokens/debugging-and-error-handling)参考中获得有关它的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:28:06.933

不幸的是，没有特定的端点可以告诉您 an`access_token`是否仍然有效，但是您可以使用令牌来获取任何内容并查看它是否返回错误。

但是，如果您使用服务器端流程进行身份验证，他们将向您发送一个`expire`参数，该参数将以秒为单位保存令牌保持有效的时间（sdk 可能会向您隐藏这一事实）。

但正如[处理无效访问令牌](https://developers.facebook.com/docs/facebook-login/access-tokens/#errors)页面所解释的那样，access_token 可能无效的原因有很多，因此仅过期字段无法告诉您令牌目前是否有效，因此唯一的方法是找出是尝试使用它并查看它是否返回错误，因为处理过期...页面状态，您必须为任何图形请求返回错误做好准备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:27:20.657

您可以在此处手动检查给定的访问令牌： [https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# jquery - 在 coffeescript 中使用 iPad Double Tap 插件

> ID：11613865
> 
> 赞同：0
> 
> 时间：2012-07-23T13:49:20.650
> 
> 标签：jquery, ruby-on-rails, coffeescript

我正在尝试在我的 rails 应用程序中使用带有咖啡脚本的 jQuery 双击插件。但我不能这样做。

您能否建议如何在咖啡脚本中调用双击事件。
以下是插件代码。

```
(function($) {
    $.fn.doubleTap = function(doubleTapCallback) {
             return this.each(function(){
             var elm = this;
             var lastTap = 0;
             $(elm).bind('vmousedown', function (e) {
                 var now = (new Date()).valueOf();
                 var diff = (now - lastTap);
                 lastTap = now ;
                 if (diff < 250) {
                      if($.isFunction( doubleTapCallback )){
                           doubleTapCallback.call(elm);
                      }
                  }      
         });
     });
   }
})(jQuery); 
```

其可用性的解决方案是

```
 $(".doubleTap").doubleTap(function(){
     // 'this' is the element that was double tap
  }); 
```

对于咖啡脚本，我需要与上述解决方案等效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:33:50.943

您需要的 CoffeeScript 是：

```
$('.doubleTap').doubleTap ->
  # 'this' is the element that was double tap 
```

[http://coffeescript.org](http://coffeescript.org)上有一个非常有用的在线编译器，用于试用 CoffeeScript，我发现在那里测试东西并查看编译后的 JavaScript 很方便。

# ruby-on-rails - 列出所有缓存片段的键

> ID：11613866
> 
> 赞同：8
> 
> 时间：2012-07-23T13:49:21.287
> 
> 标签：ruby-on-rails, caching, ruby-on-rails-3.2

我的网站上有很多缓存的片段，因为我使用片段缓存`action_suffix`来在我的应用程序模板中使用缓存。例如，我将它用于导航，......像这样：

```
<% cache(:action => params[:action], :action_suffix => "navigation_#{request.path}") %>
  <%= render 'navigation_entries/navigation' %>
<% end %> 
```

它工作得很好，但现在我在缓存片段过期时遇到了一个小问题。我需要的是缓存片段的所有键的列表。我不仅查看了文档，还没有找到任何东西。

有没有办法列出所有片段键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T06:53:29.657

您可以将 a 传递`Regexp`给[`expire_fragment`](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html#method-i-expire_fragment)：

```
expire_fragment(%r{navigation_}) 
```

根据文档

> 正则表达式过期仅在可以遍历所有键的缓存上受支持（与 memcached 不同）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T19:51:45.537

我无法在 rails 缓存上找到列出所有键的方法，但是如果您使用的是默认文件缓存，则可以通过查看文件系统来列出它们。当在 unix/linux 上的默认 rails 目录中时，您可以使用类似这样的东西来查看所有缓存文件（以键 url 编码命名）：

```
find ./tmp/cache -type f 
```

或者这也可以取消编码和剥离目录：

```
find ./tmp/cache -type f | xargs ruby -e 'require "cgi";puts CGI::unescape(ARGV.sort.join("\n")).gsub(/.*tmp\/cache\/\w*\/\w*\//,"")' 
```

使用正则表达式删除可以让您删除大多数键，但对于调试，如果您使用复杂键，有时可以很好地查看您正在存储的实际键。

# prolog - Prolog中的双重否定和执行模型

> ID：11613868
> 
> 赞同：7
> 
> 时间：2012-07-23T13:49:34.033
> 
> 标签：prolog, prolog-abstract-interpretation

我试图理解为什么 Prolog 实现不按照教科书中的执行模型运行——例如，Sterling 和 Shapiro 的“Prolog 的艺术”书中的那个（第 6 章，“Pure Prolog”，第 6.1 节， “Prolog 的执行模型”）。

我所指的执行模型是这样的（Sterling & Shapiro 的第 93 页）：

**输入：**一个目标 G 和一个程序 P

**输出：** G 的一个实例，它是 P 的逻辑结果，否则不是

**算法：**

```
Initialize resolvent to the goal G
while resolvent not empty:
    choose goal A from resolvent
    choose renamed clause A' <- B_1, ..., B_n from P
            such that A, A' unify with mgu θ
        (if no such goal and clause exist, exit the "while" loop)
    replace A by B_1, ..., B_n in resolvent
    apply θ to resolvent and to G
If resolvent empty, then output G, else output NO 
```

此外（同一本书的第 120 页），Prolog`choose goal A`以从左到右的顺序选择目标 ( )，并`choose renamed clause ...`按照它们在程序中出现的顺序搜索子句 ( )。

下面的程序有一个定义`not`（`n`在程序中调用）和一个单一的事实。

```
n(X) :- X, !, fail.
n(X).

f(a). 
```

如果我尝试证明`n(n(f(X)))`，它会成功（根据两本教科书以及 SWI Prolog、GNU Prolog 和 Yap）。但这不是有点奇怪吗？根据几本书公开的执行模型，这是我期望发生的（跳过变量重命名以保持简单，因为无论如何都不会有冲突）：

*   解决方案：`n(n(f(Z)))`

*   统一`X`在第一个子句中与`n(f(Z))`, 匹配，并用该子句的尾部替换目标。

*   解决方案：`n(f(Z)), !, fail`。

*   统一`X`在第一个子句中再次匹配`f(Z)`, 并用子句的尾部替换解析器中的第一个目标

*   解决方案：`f(Z), !, fail, !, fail`。

*   统一匹配`f(Z)`-> 成功！现在，这已从解决方案中消除。

*   解决方案：`!, fail, !, fail`。

而“ `!, fail, !, fail`”应该*不会*成功！切割后有一个失败。故事结局。（事实上​​，`!,fail,!,fail`在我有权访问的所有 Prolog 系统中，作为查询输入都会失败）。

那么我可以假设教科书中的执行模型并不是Prolog使用的吗？

**编辑**：将第一个子句更改为对`n(X) :- call(X), !, fail`我尝试过的所有 Prolog 都没有影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:28:34.380

您的程序不是纯 Prolog 程序，因为它在 n/1 中包含一个 !/0。您可能会问自己一个更简单的问题：根据您的定义，为什么查询`?- n(f(X)).` *会失败*，尽管您的程序中有一个事实 n(X)，这意味着 n(X) 对于*每个*X 都是正确的，因此应该特别适用于f(X) 也是？这是因为使用了!/0，不能再孤立地考虑程序的子句，不能使用纯Prolog的执行模型。这种不纯谓词的更现代和更纯粹的替代方法通常是约束，例如 dif/2，您可以使用它来约束变量与术语不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T22:26:20.380

下面的标题确实告诉你这个特定的算法是关于什么的：

> **图 4.2**逻辑程序的抽象解释器

此外，它的描述如下：

> **输出：***G*的一个实例，它是*P*的逻辑结果，否则不是。

也就是说，4.2 中的算法只向您展示了如何计算逻辑程序的逻辑结果。它只让您了解 Prolog 的实际工作原理。并且特别无法解释`!`。此外，4.2 中的算法只能解释如何找到一个解决方案（“结果”），但 Prolog 试图以一种称为时序回溯的系统方式找到所有解决方案。切割以一种非常特殊的方式干扰了时间回溯，这在该算法的级别上无法解释。

你写了：

> 此外（同一本书的第 120 页），Prolog`(choose goal A)`以从左到右的顺序选择目标，并`(choose renamed clause ...)`按照它们在程序中出现的顺序搜索子句。

这遗漏了您可以在第 120 页阅读的重要一点：

> **Prolog 的执行机制是从抽象解释器中获得的，方法是选择最左边的目标……并通过顺序搜索统一子句和回溯** 来替换子句的非确定性选择。

所以正是这个小小的添加“和回溯”使事情变得更加复杂。您在抽象算法中看不到这一点。

这是一个小例子，表明算法中没有明确处理回溯。

```
p :-
 q(X),
 r(X).

q(1).
q(2).

r(2). 
```

我们将从`p`重写为哪个开始`q(X), r(X)`（没有其他方法可以继续）。

然后，`q(X)`被选中，并且 θ = { `X`= 1}。所以我们有`r(1)`作为解决者。但是现在，我们没有任何匹配的子句，所以我们“退出 while 循环”并回答*no*。

但是等等，有一个解决方案！那么我们如何得到它呢？当`q(X)`被选中时，还有另一个选项 θ，即 θ = { `X`= 2}。算法本身并没有明确说明执行此操作的机制。它只是说：如果你在任何地方做出正确的选择，你就会找到答案。为了从那个抽象的算法中得到一个真正的算法，我们因此需要一些机制来做到这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T20:44:49.767

当您到达最后一步时：

*   解决：！，失败，！，失败

这里的~~cut`!`意思是“抹去一切”。所以解析器变成空的。（这当然是伪造的，但已经足够接近了）。~~削减在这里根本没有任何意义，第一个`fail`说翻转决定，第二个说`fail`把它翻转回来。现在解决方案是空的 - 决定是“是”，并且仍然如此，两次翻转。（这也是*伪造*的......“翻转”仅在存在回溯的情况下才有意义）。

您当然不能`!`在解决方案中的目标列表上进行削减，因为它不仅仅是要实现的目标之一。它具有*操作*意义，通常表示“停止尝试其他选择”，但该解释器*不*跟踪*任何选择*（它“好像”一次做出所有选择）。`fail`也不仅仅是一个要实现的目标，它说“你成功的地方说你没有~~，反之亦然~~”。

> 那么我可以假设教科书中的执行模型并不是Prolog使用的吗？

是的，当然，真正的 Prolog 具有`cut`并且`fail`不同于您提到的抽象解释器。该解释器没有显式回溯，而是通过魔术获得了多次成功（它的*选择*本质上是***不确定***的，就好像所有选择都是同时并行做出的一样 - 真正的 Prolog 仅通过显式回溯的顺序执行来*模拟**这*一点，`cut`即引用 - 否则它根本没有任何意义）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T11:59:45.343

我认为你几乎是对的。问题在这里：

```
RESOLVENT: !, fail, !, fail. 
```

首先 ！和失败来自*第二*次匹配第一个子句。另外两个是*第*一次。

```
RESOLVENT: ![2], fail[2], ![1], fail[1]. 
```

剪切和失败对正在处理的子句产生影响 - 而不是对“调用”它的子句产生影响。如果您再次完成这些步骤，但使用这些注释，您将获得正确的结果。

`![2], fail[2]`使第二次调用`n`失败而不回溯。但是*另一个*调用（第一个调用）仍然可以回溯——它会：

```
RESOLVENT: n(_) 
```

结果是“是”。

这表明 Prolog 使用堆栈规则保存有关回溯的信息。您可能对用作 Prolog 实现模型的虚拟机感兴趣。它比您提到的执行模型要复杂得多，但是将 Prolog 翻译到 VM 将使您对 Prolog 的工作方式有更准确的理解。这是沃伦抽象机（WAM）。[Hasan Aït-Kaci](http://wambook.sourceforge.net/)的教程是你能找到的最好的解释（它解释了剪辑，如果我没记错的话，原来的 WAM 描述中没有这个剪辑）。如果您不习惯抽象理论文本，您可以尝试先阅读 Peter van Roy 的文本：“ [1983-1993：顺序 Prolog 实现的奇迹年](http://www.info.ucl.ac.be/~pvr/official_report.ps)”。这篇文章很清楚，基本上是回顾了Prolog实现的历史，但是特别关注WAM。但是，它并没有展示cut是如何实现的。但是如果你*仔细*阅读它，你可能会挑选查看 Hasan 的教程并阅读他实现剪辑的部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T14:12:17.837

您的测试目标中有一个额外的嵌套级别：

```
n(n(f(X)) 
```

代替：

```
n(f(X)) 
```

事实上，如果我们尝试这样做，它会按预期工作：

```
$ prolog
GNU Prolog 1.3.0
By Daniel Diaz
Copyright (C) 1999-2007 Daniel Diaz
| ?- [user].
compiling user for byte code...
n(X) :- call(X), !, fail.
n(_X).
f(a).

user compiled, 4 lines read - 484 bytes written, 30441 ms

yes
| ?- f(a).

yes
| ?- n(f(a)).

no
| ?- n(f(42)).

yes
| ?- n(n(f(X))).

yes
| ?- n(f(X)).

no
| ?- halt. 
```

所以你对Prolog的理解是正确的，你的测试用例不是！

**更新**

显示否定的否定的效果：

```
$ prolog
GNU Prolog 1.3.0
By Daniel Diaz
Copyright (C) 1999-2007 Daniel Diaz
| ?- [user].                                                            
compiling user for byte code...
n(X) :- format( "Resolving n/1 with ~q\n", [X] ), call(X), !, fail.
n(_X).
f(a) :- format( "Resolving f(a)\n", [] ).

user compiled, 4 lines read - 2504 bytes written, 42137 ms

(4 ms) yes
| ?- n(f(a)).
Resolving n/1 with f(a)
Resolving f(a)

no
| ?- n(n(f(a))).
Resolving n/1 with n(f(a))
Resolving n/1 with f(a)
Resolving f(a)

yes
| ?- n(n(n(f(a)))).
Resolving n/1 with n(n(f(a)))
Resolving n/1 with n(f(a))
Resolving n/1 with f(a)
Resolving f(a)

no
| ?- n(n(n(n(f(a))))).
Resolving n/1 with n(n(n(f(a))))
Resolving n/1 with n(n(f(a)))
Resolving n/1 with n(f(a))
Resolving n/1 with f(a)
Resolving f(a)

yes
| ?- halt. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T15:06:00.150

虽然 mat 是正确的，因为您的程序不是纯序言（这与本章的标题是纯序言有关），不仅因为您使用了切割，而且因为您编写了处理其他谓词的谓词（纯序言是一阶逻辑的*子集*）这不是主要问题；你只是缺少回溯

虽然你确实有一个削减，但直到目标 n(f(X)) 成功才能达到这一点。但是，如您所知，这将失败，因此 prolog 将回溯并匹配第二个子句。

我看不出这与 6.1 中描述的模型有何矛盾（并且很难相信其他书籍会描述一个模型，在该模型中执行失败后将继续执行，从而允许削减以修剪其他解决方案）。无论如何，我发现得出“Prolog 实现不按照教科书中的执行模型行事”的结论与“编译器存在错误”非常相似，特别是因为“反例”的行为为它应该 (not(not(true)) 应该是真的)

# python - 如何使用 Selenium 和 Python 绑定禁用日志记录

> ID：11613869
> 
> 赞同：11
> 
> 时间：2012-07-23T13:49:41.653
> 
> 标签：python, selenium-chromedriver

简单的问题：如何在 Python 绑定中使用 Selenium 时完全禁用日志记录，前代码如下：

```
browser = webdriver.Chrome() 
```

我试过这样的事情：

```
options = webdriver.ChromeOptions();
options.add_argument('--log-level 3') 
browser = webdriver.Chrome(chrome_options=options) 
```

甚至：

```
options = webdriver.ChromeOptions();
options.add_argument('--disable-logging') 
browser = webdriver.Chrome(chrome_options=options) 
```

但文件“chromedriver.log”仍然出现在每次新的测试运行中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2020-03-06T13:26:53.803

您可以将`options.add_argument("--log-level=3")`Chrome 浏览器设置为与 Selenuim 一起运行，或者您可以将日志记录级别设置为更高的级别：

```
import logging
logger = logging.getLogger('selenium.webdriver.remote.remote_connection')
logger.setLevel(logging.WARNING)  # or any variant from ERROR, CRITICAL or NOTSET 
```

但是在这种情况下无论如何都会出现一些消息，包括启动 DevTools 消息或 SSL 握手错误消息。

**要在控制台中以完全静默模式**运行带有 Selenium 的 Chrome 浏览器，您应该使用以下代码段：

```
options = Options()
options.headless = True
options.add_experimental_option("excludeSwitches", ["enable-logging"]) 
```

该技巧将抑制来自 Selenium 驱动程序或浏览器本身的任何控制台消息，包括一`DevTools listening on ws://127.0.0.1`开始的第一条消息。

同时，一些运行时的分步数据可以保存到*服务日志文件*中，以防它的参数被添加。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-12T07:23:22.587

```
driver = webdriver.Chrome(service_log_path='/dev/null') 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-19T17:16:25.250

仅适用于 Windows 人员的示例：

```
webdriver.Firefox(log_path='NUL') 
```

接受的答案是正确的，但如果你像我一样不熟悉 Python / windows，这样的例子会减少你几个小时的谷歌时间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-06T13:56:21.817

Chrome 的 webdriver的[源代码](http://code.google.com/p/selenium/source/browse/py/selenium/webdriver/chrome/webdriver.py)`service_log_path`显示存在一个名为.

因此，如果您想删除该文件，可以将此属性设置为

*   `/dev/null`如果您在 Linux/Unix 下运行；
*   `NUL`在窗户下

希望能帮助到你

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-17T14:48:51.733

这对我有用：

```
chrome_options.add_experimental_option('excludeSwitches', ['enable-logging']) 
```

礼貌：

[https://joshuatz.com/posts/2020/selenium-webdriver-disabling-chrome-logging-messages/](https://joshuatz.com/posts/2020/selenium-webdriver-disabling-chrome-logging-messages/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-25T06:45:57.107

如果你设置 service_log_path = None，它不会生成 geckodriver.log 文件：

```
driver = webdriver.Firefox(options=options, service_log_path=None) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T12:35:05.327

我知道这很旧，但这仍然是当您寻找一种防止硒记录的方法时出现的第一件事，它并没有为我摆脱“开发监听”消息，我找到了一种方法：

```
ChromeDriverService service = ChromeDriverService.CreateDefaultService();
service.HideCommandPromptWindow = true;
IWebDriver driver = new ChromeDriver(service,options); 
```

# ms-access - 检测服务器或网络断开连接

> ID：11613870
> 
> 赞同：1
> 
> 时间：2012-07-23T13:49:46.217
> 
> 标签：ms-access, ado, vba

我有一个 Access 应用程序，用作 TimeClock 接口并查找定价信息。它用于触摸屏计算机以及专门使用无线的 Dell Latitude ST 平板电脑。

后端是本地 Windows 7“服务器”计算机上的 SQL Server R2 2008。我最近将应用程序转换为使用绑定到 ADO 记录集的表单，希望应用程序在发生断开连接的情况下更具弹性。我正在使用单个全局 ADO 连接对象。平板电脑配置为始终保持开启状态，但似乎偶尔会断开连接。我们可以花时间对设备和网络进行故障排除，以使其更加稳定。但是，我希望能够编写我的 Access 应用程序，以便它们可以在 WAN/Internet 上使用，这基本上会使网络稳定性超出我的想象和控制范围。相反，我选择专注于使这个特定的应用程序（一个相当小的应用程序）对数据库断开和中断更加友好。

我编写了一个全局函数，它基本上检查 ADO 连接是否打开/连接。但是，**如果我断开网络，连接对象仍然显示 State = adStateOpen。**

我最初编写了一个测试函数来通过打开一个基本的单记录记录集来测试连接。但是，如果服务器不可用，这会花费太长时间，并且似乎会导致错误沉淀，而不仅仅是测试功能（可能是一些错误的编码）。我什至更改了连接超时设置，但似乎这些超时被忽略了，因为如果服务器确实不可用，我的测试函数将需要大约 15 秒（或者是 30 秒）才能返回。

我现在更改了我的功能，每次都关闭连接，然后重新打开它。这似乎非常低效，但这是我发现在服务器断开连接后使我的应用程序正常工作的唯一方法，而无需关闭并再次打开应用程序。服务器断开连接或网络中断实际上非常罕见（基本上不存在），尤其是在有线机器上。

```
Public Function IsGConOpen(Optional bOpenCon As Boolean = True) As Boolean

    IsGConOpen = False

    If bOpenCon = True Then
        Dim sConString As String
        sConString = Config.ADOConString
        If sConString = "" Then
            Call InitGlobalSettings
            sConString = Config.ADOConString
        End If
        If sConString = "" Then Exit Function

        If gCon Is Nothing Then
            Set gCon = New ADODb.Connection
        Else
            If gCon.State = adStateOpen Then
                gCon.Close
            End If
        End If

        With gCon
            .Provider = "MSDataShape"
            .ConnectionString = sConString
            .CursorLocation = adUseClient
            .ConnectionTimeout = 5
            .CommandTimeout = 5
            .Open
        End With
        If gCon.State = adStateOpen Then
            IsGConOpen = True
        End If
    Else
        If gCon Is Nothing Then
            IsGConOpen = False
        ElseIf gCon.State = adStateOpen Then
            IsGConOpen = True
        End If
    End If

End Function 
```

[这是另一个论坛上的类似问题（VB6 而不是 Access）。](http://www.vbforums.com/showthread.php?t=178567)在我看来，没有达成任何解决方案。

有没有更好的方法来管理我的全局 ADO 连接并检测服务器/网络中断，而不必每次都关闭连接并重新打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:06:39.307

我总是喜欢对服务器的 IP 进行 ping 检查以查看是否有连接，这样我可以将等待 ping 检查的时间限制为尽可能短，我最初没有写以下代码，但确实根据我的需要进行了调整：

```
Public Function SystemOnline(ByVal IPAdd As String) As Boolean

    Dim oShell, oExec As Variant
    Dim strText, strCmd As String

    strText = ""
    strCmd = "ping -n 2 -w 1000 " & IPAdd
    Set oShell = CreateObject("WScript.Shell")
    Set oExec = oShell.Exec(strCmd)

    Do While Not oExec.StdOut.AtEndOfStream
        strText = oExec.StdOut.ReadLine()
        If InStr(strText, "Reply") > 0 Then
            SystemOnline = True
            Exit Do
        End If
    Loop

End Function 
```

然后我称之为：

```
If Not SystemOnline("11.111.11.111") Then
    'Disconnected
Else
    'Connected
End If 
```

也许您可以按设定的时间间隔触发它以查看连接的外观。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T08:49:07.040

ADO 只是另一个没有连接状态的 ODBC 接口。在 ODBC 中，您可以使用简单的方法来连接、执行操作（如果错误处理错误）。

我在我的 MS Access 程序中解决这个问题的方法是：-

1.  创建连接
2.  做事（选择、更新、插入和删除）
3.  如果出现错误，则重复一次该过程，然后在仍然存在的情况下显示错误。

这适用于基本语句，但是如果您发送多个语句，您可能需要进一步扩展它，例如：-

1.  连接“con.open”
2.  开始交易“con.BeginTrans”
3.  插入行“con.Execute”
4.  如果所有行都OK 提交事务“con.Commit”

这些行仅在您提交时存储在 taget ODBC 数据源中，因此即使您在插入行的过程中遇到网络断开连接，也不会存储数据。如果它是一个自动过程，您可以继续循环执行上述操作，或者如果需要在代码继续之前解决问题，您可以停止并出现用户错误。

# c# - 为静态类生成通用基类

> ID：11613871
> 
> 赞同：0
> 
> 时间：2012-07-23T13:49:47.910
> 
> 标签：c#, design-patterns, hierarchy, factory-pattern, base-class

我有一个静态类（VS 2010/C#），用于从模板生成 pdf 文档。我们使用 iTextSharp API 来生成 pdf。该类是静态的，仅提供一个公共方法来生成特定文档。

现在我们需要实现一个新的文档类来生成不同类型的文档。我想创建一个基类，因为一些方法将由两个类共享，而另一些方法将特定于每种文档类型。

为了保持特定（子）类静态并避免使基类公开或可从特定类外部调用，更好的方法是什么？

我目前正在研究工厂模式或组合。

编辑：这里是当前特定的类代码：

```
public static class SpecificDocGenerator
{
    /// <summary>
    /// Generates an international certificate.
    /// </summary>
    public static byte[] GenerateItDoc(DocInfo info)
    {
      //Here the document is generated and returned as byte array
    }

    /// <summary>
    /// Gets the resource.
    /// </summary>
    private static byte[] GetResource(string name)
    {
        //Gets a local resource (as example an image)
    } 
```

我会为常用方法创建一个基类（例如 GetResource）。但我想保持特定类静态或避免制作更多实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:09:54.790

您可以使用`Singleton`模式而不是静态类。这将允许您使用继承：

```
public sealed class SpecificDocGenerator : AbstractDocGenerator
{
    private static readonly SpecificDocGenerator _instance;

    static SpecificDocGenerator
    {
       _instance = new SpecificDocGenerator();
    }

    public SpecificDocGenerator Instance
    {
        get { return _instance; }
    }

    private SpecificDocGenerator()
    {
    }

    public byte[] GenerateItDoc(DocInfo info)
    {
       //Here the document is generated and returned as byte array
    }

    private byte[] GetResource(string name)
    {
        //Gets a local resource (as example an image)
    }
} 
```

您可以使用其他 Singleton 实现，但这是最简单的。用法：

```
SpecificDocGenerator.Instance.GenerateItDoc(info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:03:09.160

静态方法不是虚拟的，也不能被覆盖，所以你不能有一个带有抽象静态方法的基类。如果您想拥有一个类层次结构，那么您需要使该类以及至少一些方法是非静态的。话虽如此，仍然可以将单个公共静态方法保留为入口点，并在该单个静态方法的范围内完全使用实例方法。

# android - Android Service 更新时间过长

> ID：11613874
> 
> 赞同：0
> 
> 时间：2012-07-23T13:50:03.207
> 
> 标签：android, android-service

你好我已经实现了一个广播当前位置的服务。问题是它第一次更新它给了我 0.0 lat 和 0.0 lon，这破坏了 UI。我该如何解决这个问题？这是代码，谢谢

```
public class LocationService extends Service {
protected LocationManager locationManager;

final static String MY_ACTION = "MY_ACTION";
MyLocListener myloc = new MyLocListener();
@Override
public IBinder onBind(Intent arg0) {
// TODO Auto-generated method stub
return null;
}
@Override public void onDestroy() {

};
 @Override
public int onStartCommand(Intent intent, int flags, int startId){

 final Criteria criteria = new Criteria();
LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
criteria.setAccuracy(Criteria.ACCURACY_FINE);
criteria.setPowerRequirement(Criteria.POWER_LOW);
criteria.setAltitudeRequired(false);
criteria.setBearingRequired(true);
criteria.setSpeedRequired(false);
criteria.setCostAllowed(true);

LocationListener ll = new MyLocListener();
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 100, 0, ll);
Location location = new Location("abc");

ll.onLocationChanged(location);
Log.d("Last", ""+location.getLatitude());

return START_STICKY;
}

private class MyLocListener implements LocationListener {
public void onLocationChanged(Location location) {
Log.d("1provider",location.toString());
Log.d("1Provider LOCATION CHANGED", location.getLatitude() + "");
Log.d("1Provider LOCATION CHANGED", location.getLongitude() + "");

Intent intent = new Intent();
intent.putExtra("location", location);
intent.setAction(MY_ACTION);
sendBroadcast(intent);
    }

public void onProviderDisabled(String arg0) {
// TODO Auto-generated method stub
Log.d("1Provider DIsabled", "Provider Disabled");
}

public void onProviderEnabled(String provider) {
// TODO Auto-generated method stub
Log.d("1Provider Enabled", "Provider Enabled");
}

public void onStatusChanged(String provider, int status, Bundle extras) {
// TODO Auto-generated method stub
Log.d("1Provider Changed", "Service Status Changed");
}
     }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:12:13.793

onLocationChanged() 方法通常在第一次返回 0 - 只需检查此值而不更新 UI。至于时间太长，可能需要一段时间，因此在获取位置时将您的服务作为 AsyncTask 运行，以便您的 UI 线程等待，然后在您从 AsyncTask 获得返回时更新 UI。

# c# - 使用 MVC3 处理图像

> ID：11613876
> 
> 赞同：0
> 
> 时间：2012-07-23T13:50:23.977
> 
> 标签：c#, asp.net-mvc-3, image, upload, webserver

使用 MVC3 在 Web 服务器上处理图像的最佳方法是什么？有没有这方面的最佳实践？通过处理图像，我的意思是使用户能够将照片上传到 Web 服务器上，将它们保存在磁盘上，并在需要时检索它们以显示在页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:08:42.947

使用存储在数据库中的路径将图像保存到磁盘通常是最好和最快的方法。上传可以通过任何常规方式处理，但有一些很好的开源库可以帮助您（[plupload](http://www.plupload.com/)是我使用过的最完整的功能）。

您可以创建自己的`ActionResult`实现并返回和要显示的图像。您的控制器操作可以采用识别图像所需的任何参数，然后您可以从磁盘中检索它并`ImageResult`从您的操作中返回一个。

这是一个基本的实现（[信用](http://blog.maartenballiauw.be/post/2008/05/aspnet-mvc-custom-actionresult.aspx)）：

```
public class ImageResult : ActionResult 
{ 
    public ImageResult() { }
    public Image Image { get; set; } 
    public ImageFormat ImageFormat { get; set; }
    public override void ExecuteResult(ControllerContext context) 
    { 
        // verify properties 
        if (Image == null) 
        { 
            throw new ArgumentNullException("Image"); 
        } 
        if (ImageFormat == null) 
        { 
            throw new ArgumentNullException("ImageFormat"); 
        }
        // output 
        context.HttpContext.Response.Clear();
        if (ImageFormat.Equals(ImageFormat.Bmp)) context.HttpContext.Response.ContentType = "image/bmp"; 
        if (ImageFormat.Equals(ImageFormat.Gif)) context.HttpContext.Response.ContentType = "image/gif"; 
        if (ImageFormat.Equals(ImageFormat.Icon)) context.HttpContext.Response.ContentType = "image/vnd.microsoft.icon"; 
        if (ImageFormat.Equals(ImageFormat.Jpeg)) context.HttpContext.Response.ContentType = "image/jpeg"; 
        if (ImageFormat.Equals(ImageFormat.Png)) context.HttpContext.Response.ContentType = "image/png"; 
        if (ImageFormat.Equals(ImageFormat.Tiff)) context.HttpContext.Response.ContentType = "image/tiff"; 
        if (ImageFormat.Equals(ImageFormat.Wmf)) context.HttpContext.Response.ContentType = "image/wmf";
        Image.Save(context.HttpContext.Response.OutputStream, ImageFormat); 
    } 
} 
```

# android - Android 2.2 与更高版本的连接管理器处理方式不同

> ID：11613879
> 
> 赞同：1
> 
> 时间：2012-07-23T13:50:33.880
> 
> 标签：android, android-contentprovider, android-wifi

我有两台开发设备，一台是 android 2.2 手机，另一台是 Nexus7 平板电脑（没有手机）。两个都有wifi。如果在 2.2phone 上执行下面的代码，它会检测 Wifi 或移动数据是否打开并正常工作。如果我将相同的代码放在 Nexus7 平板电脑上，它会返回即使 wifi 开启也没有互联网连接。我必须做些什么才能使其在两种设备上都能正常工作？

```
 public boolean isOnline()
   {
ConnectivityManager connMgr =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
    return (networkInfo != null && networkInfo.isConnected());
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:16:17.037

当与路由器建立 WIFI 连接时，isConnected 将返回 true。您确定两台设备上的连接设置完全相同吗？

您也可以尝试 isConnectedOrConnecting() ，它几乎相同，但即使尚未与 ISP 建立连接但仍在建立过程中，它也会返回 true。

还要检查果冻豆的某些权限是否已更改，以允许您检查连接性。

除此之外，我认为这种方法没有理由在不同的设备上采取不同的行动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:35:18.013

看起来有一些错误`ConnectivityManager`。看起来这是一个记录在案的错误，还没有修复它：

[http://code.google.com/p/android/issues/detail?id=11891](http://code.google.com/p/android/issues/detail?id=11891)

否则，我今年早些时候开发了一个监听网络变化的应用程序。您可以尝试`networkInfo.getTypeName()`，这将返回“WIFI”或“null”（对于数据网络也将返回“MOBILE”）。您可以尝试摆脱这种情况。今年早些时候我用这条线作为广播接收器来监控网络变化，它从 2.2 到 4.0.4 都可以工作（还没有在 4.1 上测试过）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:40:55.507

事实证明问题出在其他地方。上面发布的代码正在运行，但是我收到了一个 Java 错误，并且它说不能写入 HEAD。我不需要，所以我注释掉了。该代码运行良好，没有在 2.2 下引发错误，但在 4.1 下引发了 JAVA 错误。很高兴我有设备可以测试，模拟器不会捕捉到这一点。为 2.2 编译。哇。

```
 File root = Environment.getExternalStorageDirectory();
   URL u = new URL(url);
   HttpURLConnection c = (HttpURLConnection) u.openConnection();
   c.setRequestMethod("HEAD");
// c.setDoOutput(true);   //<<< Allowed on 2.2 Not on 4.1
   c.connect();
   InputStream in = c.getInputStream();
   long dt=c.getLastModified(); 
```

# c - 使用哪种语言编写 C 编译器？

> ID：11613884
> 
> 赞同：0
> 
> 时间：2012-07-23T13:50:40.773
> 
> 标签：c, assembly, compiler-construction

PHP 的解释器是用 C 编写的。C 编译器是用哪种语言编写的？汇编语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:53:48.607

C 编译器是用 C 语言编写的，使用另一种语言的最小引导编译器

# php - File_get_contents 接收和发送 cookie

> ID：11613887
> 
> 赞同：0
> 
> 时间：2012-07-23T13:50:48.213
> 
> 标签：php, cookies, file-get-contents

我正在尝试使用 PHP 的函数 file_get_contents() 为服务器 Strava.cz 制作一个*非官方的 API*；但它不起作用。怎么了？![:'(](../Images/01ee78e51cd2fd33e420f448601a51fa.png)

```
function strava_czLogin($machine,$user,$pass){
//Sends the request
$src = file_get_contents(
            'http://m.strava.cz/Stravnik/formprihlaseni.aspx',
            false,
            stream_context_create(
             array('http'=>array('header' => "User-Agent:(none; StravaCekujNET; Linux x86_64; rv:1.0)\r\n"))
            )
           );
$src = mb_convert_encoding($src,'utf-8','auto'); //Encoding correction

//Works with the cookies (yummy!)
$cookies = array();
foreach ($http_response_header as $value) {
    if (preg_match('/^Set-Cookie:\s*([^;]+)/', $value, $matches)) {
        parse_str($matches[1], $tmp);
        $cookies += $tmp;
    }
}

$sessionId = "";
foreach ($cookies as $key => $value) {
    if ($key == "ASP_NET_SessionId"){$sessionId = $value;}
}

//Checks the result and returns the sessionId
if (preg_match('<form name="aspnetForm" method="post" action="stravnik.aspx" id="aspnetForm">',$src)){
     return array(true,$sessionId);
    }else{
     return array(false,null);
    }
}

function strava_czCheck($sessionId){
    //Sends request
    $src = file_get_contents('http://m.strava.cz/Stravnik/objednavky.aspx',false,stream_context_create(array('http'=>array('header' => "User-Agent:(none; StravaCekujNET; Linux x86_64; rv:1.0)\r\nCookie: ASP_NETSession=".$sessionId."\r\n"))));
    $src = mb_convert_encoding($src,'utf-8','auto'); //Zajistí správné kódování
    echo $src; //Prints the response - "Application Error"

    //Some irrelevant code here

    //Returns the result
    if ($arr==null) {return array(false,null);}
    else {return array(true,$arr);}
} 
```

服务器返回“应用程序错误”，就像您注销时一样。
不要问我为什么要这样做——我是那个问![:D](../Images/170c8436d89956957315a4801225b677.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:56:05.453

如果要处理 cookie，请使用 curl。也许这会有所帮助： [https ://rupeshpatel.wordpress.com/2012/05/12/general-purpose-function-for-curl/](https://rupeshpatel.wordpress.com/2012/05/12/general-purpose-function-for-curl/)

# java - 正则表达式获取两个标记中间的文本

> ID：11613888
> 
> 赞同：1
> 
> 时间：2012-07-23T13:50:48.510
> 
> 标签：java, regex

首先，感谢您的帮助，我在这个问题上停留了一个星期。我在这里谷歌搜索，但没有 Java 响应，只有 Python 和其他我不知道的语言。

我正在使用 java 开发一个搜索一对字符串并获取这两个单词中间的文本的应用程序。这个例子：

```
<A name=1></a>Some text with break lines<A name=300></a> 
```

主要问题是，我需要在这两个边界之间获取文本，直到 . 抓取此文本并将其添加到 StringBuffer。

我这样做了：

```
Pattern regex   = Pattern.compile("<A name=1><\\/a>((.|\\s)+?)<A name=300><\\/a>");
Matcher matcher = regex.matcher(htmlFileReading);

if (matcher.find()) {
    System.out.println("Finded");
    System.out.println(matcher.groupCount());
} 
```

它可以工作，但是当我尝试大于但不是那么大的东西时，它会返回堆栈溢出错误。

我怎样才能得到这两个标记之间的文字？非常感谢，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:23:15.803

不确定是正确的，但尝试这样的事情来进行“轻”递归：

```
// .* before and after if needed
Pattern regex   = Pattern.compile(".*<A name=1><\\/a>(.*?)<A name=300><\\/a>.*");
System.output.println(regex.matcher(myStringToSearchInside).replaceAll("$1")); 
```

*为 newLine 编辑包括*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:14:56.940

如果您的目标是从 xml 中提取文本，建议使用 XSLT

# ssl-certificate - 我可以创建自己的根证书以用于与 Go 的 SSL 连接吗？这安全吗？

> ID：11613889
> 
> 赞同：3
> 
> 时间：2012-07-23T13:50:54.807
> 
> 标签：ssl-certificate, go, ssl, self-signed

我正在使用 Go 编写一个简单的客户端和服务器。我不想为 SSL 证书付费，而且我已经读到自签名证书对于证明身份毫无用处，因为攻击者可以只是 MITM 并提供他自己的自签名证书。

但是，我了解到我可以让我的客户使用我想要的任何根证书。我可以自己创建，让客户信任，为我的服务器签署证书，并在受到 MITM 攻击保护的同时安全连接吗？如果是这样，我如何创建自己的根证书？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:15:01.117

自签名证书是部署您自己的 PKI 的一种特殊情况（推到了极端，即您在该 PKI 中只有一个证书）。

两者都可以用来防止 MITM 攻击，前提是客户端可以使用它预先知道的信任锚（证书）来验证服务器证书（并且已经以受信任的方式配置了它们）。

您可以创建自己的 CA 并将客户端配置为使用其根 CA 证书，或者，如果您只有一组非常有限的服务器，您通常可以将客户端配置为直接信任特定证书（自签名或非自签名）。

您可能对以下问题感兴趣，以获取工具链接：

*   [签署证书的解决方案](https://stackoverflow.com/questions/11557604/solutions-to-sign-certificates)
*   [针对 Linux 的证书管理工具的建议](https://security.stackexchange.com/q/7030/2435)
*   [OpenSSL 的 CA.pl](http://www.openssl.org/docs/apps/CA.pl.html)（有用，但可能缺少通用管理接口）

一旦您了解了基本原理，技术方面就不一定很困难，但真正困难的一部分在于您的 CA 的管理。

# html - 使用我们的任何尺寸的显示器进行网站布局和内容修复

> ID：11613892
> 
> 赞同：0
> 
> 时间：2012-07-23T13:51:13.947
> 
> 标签：html, css, web

当我们的显示器尺寸发生变化时，如何修复网站布局和网站内容？就像从 15" 显示器更改为 21" 显示器......网站中的所有内容都不会改变。有时，当我们在另一台具有不同显示器尺寸的笔记本电脑上看到我们的网站时，网站的内容就会崩溃。

我制作了一个使用 div 标签的应用程序，但一个问题是在其他或大分辨率显示器中它显示不同的视图，而其他一些显示器显示我网站的另一种视图。那么如何修复所有显示器分辨率的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:57:39.430

我认为媒体查询听起来像是你的救星。您可以使用它们来创建响应式网站 - 从移动设备到平板电脑再到台式机等。通过媒体查询，您可以针对不同的分辨率并使用 CSS 修复/排序/调整您的设计，从而为用户提供最佳的观看体验。这种方法被称为响应式网页设计，这是目前的流行语。

一些信息的快速链接：

[链接 1](http://webdesignerwall.com/tutorials/css3-media-queries)

[链接 2](http://stuffandnonsense.co.uk/blog/about/hardboiled_css3_media_queries/)

如果您想购买书籍/电子书，我建议：

[响应式网页设计](http://www.abookapart.com/products/responsive-web-design)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:32:44.513

那么来到响应式网页设计的世界，你的完美解决方案就在[这里](http://twitter.github.com/bootstrap/)

您还需要探索媒体查询、响应式图像。

# asp.net-mvc-3 - 如何在 Razor 中添加 HTML5 data-something 属性

> ID：11613894
> 
> 赞同：0
> 
> 时间：2012-07-23T13:51:14.773
> 
> 标签：asp.net-mvc-3, razor

我正在尝试生成这样的表

```
@foreach (var item in @Model.Where(o => o.Status == "Submitted")){
    <tr class="row" data_orderid="@item.Id">
     <td class="description">
        @item.Customer
     </td>
     <td class="description">
        @item.OrderDescription
     </td>
     ...etc...etc 
```

这样我就可以处理每个 tr 的点击事件，并根据被点击的 tr 的 data-orderid 属性值显示一些信息。

在 Visual Studio 中，我收到一条验证消息，说“data_orderid 不是 tr 的有效属性”，并且当它呈现 HTML tr 没有属性时，不是事件类。

我应该如何添加这样的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:54:23.750

HTML 5 data 属性的格式是这样的

```
data-AttributeName=AttributeValue 
```

例子 ：

```
data-name="John Resig" 
```

更改`underscore`为 a `hiphen`，它将正确呈现。

```
 <tr class="row" data-orderid="@item.Id"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:58:42.933

首先，您更有可能使用“data-xxx”（而不是“data_xxx”）属性。

其次，Visual Studio 不太可能（如果不是不可能的话）省略类和您的“data_orderid”属性。

确保 for 循环从您的条件 @Model.Where(o => o.Status == "Submitted" 中获取任何元素

此外，请注意，Razor 足够聪明，可以解释传递给元素的“html 属性”，如下所示：

```
@Html.TextBoxFor(m => m.Name, new { @data_orderid = item.id, @class="input-xxlarge" })) 
```

# java - 如何创建 Java 方法来计算 Oracle 表中的行数

> ID：11613897
> 
> 赞同：1
> 
> 时间：2012-07-23T13:51:31.713
> 
> 标签：java, sql, oracle11g

我想创建可以计算 Oracle 表中行数的 Java 方法。到目前为止，我做了这个：

```
public int CheckDataDB(String DBtablename, String DBArgument) throws SQLException {
    System.out.println("SessionHandle CheckUserDB:"+DBArgument);
    int count;
    String SQLStatement = null;

    if (ds == null) {
        throw new SQLException();
    }

    Connection conn = ds.getConnection();
    if (conn == null) {
        throw new SQLException();
    }

    PreparedStatement ps = null;

    try {
        conn.setAutoCommit(false);
        boolean committed = false;
        try {
            SQLStatement = "SELECT count(*) FROM ? WHERE USERSTATUS = ?";

            ps = conn.prepareStatement(SQLStatement);
            ps.setString(1, DBtablename);
            ps.setString(2, DBArgument);

            ResultSet result = ps.executeQuery();

            if (result.next()) {
                count = result.getString("Passwd");
            }

            conn.commit();
            committed = true;
        } finally {
            if (!committed) {
                conn.rollback();
            }
        }
    } finally {
        /* Release the resources */
        ps.close();
        conn.close();
    }

    return count;
} 
```

我想用于不同的表。这是我无法解决的问题：

```
count = result.getString("row"); 
```

你能帮我解决问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:59:54.697

```
count = result.getInt(1); 
```

这是必需的，因为 count 是 int。并且您可以指定查询返回的行的索引，您不需要按名称访问它。

但你也可以这样做：

```
count = result.getInt("count(*)"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:56:05.857

这应该这样做：

```
count = result.getInt("count(*)"); 
```

您需要使用与查询中指定的名称相同的名称来获取值。你也可以让你的

```
count = result.getString("row"); 
```

通过将查询更改为

```
SQLStatement = "SELECT count(*) as row FROM ? WHERE USERSTATUS = ?"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T14:27:42.773

您不能在 SQL 查询中使用绑定变量代替数据库对象，可以吗？它只能用于参数绑定。试试这个，

```
"SELECT count(*) as row_count FROM " + DBtablename + " WHERE USERSTATUS = ?"; 
```

这可能容易受到 SQL 注入的攻击，因此您可能需要检查 DBtablename 参数是否是有效的数据库对象名称（即最多 30 个字节长，不包含空格，并且仅包含数据库对象标识符的有效字符）。

```
count = result.getInt("row_count"); 
```

# html - 如何使浮动文本覆盖多行而不是破坏浮动？

> ID：11613902
> 
> 赞同：3
> 
> 时间：2012-07-23T13:51:58.087
> 
> 标签：html, css, twitter-bootstrap

我一定醒得太久了。因为我发现自己陷入了一个简单的 CSS 问题。

我正在 Twitter Bootstrap 中构建一个网站，我试图让标题浮动在缩略图旁边，但标题不想跨越两行，它更喜欢打破浮动并捕捉到下方缩略图 div。

[这个 jsFiddle 演示了这个问题](http://jsfiddle.net/jtwJe/).. 有人可以让我摆脱痛苦吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T13:58:11.900

**为什么会这样**

您的第一个缩略图具有`.pull_left`您为其设置的类`float:left`。因此，您的缩略图和标题都是浮动的。由于标题很短，它的宽度小到可以到缩略图的左侧。

您的第二个缩略图没有类`.pull_left`并且没有浮动。但是您的第二个标题是，它的自然行为是向左移动，位于 HTML 中它之前的任何元素下方（包括第二个标题）。

* * *

**解决方案**

浮动缩略图并将`270px`(= `350px`- `80px`) 的宽度添加到`.caption`.

[**演示**](http://jsfiddle.net/thebabydino/jtwJe/9/)

或者只浮动缩略图而不浮动`.pull_left`，然后你也不需要添加`width: 270px`。或者，您可以添加一个`margin-left: 80px`to`.caption`以防止非常长的文本在缩略图下换行。甚至比`80px`在缩略图和标题之间留出一点空间略大。

[**Demo**](http://jsfiddle.net/thebabydino/jtwJe/7/) //[**带边距的演示**](http://jsfiddle.net/thebabydino/jtwJe/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:05:23.370

你应该浮动你的缩略图而不是标题......标题内容将环绕你的图像......如果你想创建一个对峙，为你的标题添加边距。

[这里的例子](http://jsfiddle.net/Jayx/m7CMM/)。

# php - 滚动平均效率，php mysql

> ID：11613903
> 
> 赞同：2
> 
> 时间：2012-07-23T13:52:01.743
> 
> 标签：php, mysql, performance, average

此脚本使用 php 和 mysql 计算一分钟滚动平均值，以减少异常值对我的数据的影响（一分钟 = 6 10 秒行）。它可以正确计算所有内容，但效率不足以一次处理超过 150 行。我想一次做尽可能多的行，可能在 5-10,000 之间，因为我的表超过 150,000，我每天输入大约 8,000 行。

有没有人对我如何使这个脚本更有效地运行有任何建议？

谢谢！

```
<?php  

//connect to database  

mysql_connect("localhost","user","password");//database connection  
mysql_select_db("database");  

$result = mysql_query("SELECT Timestamp FROM table");  
if (!$result) {  
        die('Could not query:' . mysql_error());  
}  

//get number of rows in table  

$resultA = mysql_query("SELECT * FROM table");  
$num_rows = mysql_num_rows($result);  
echo "There are $num_rows rows.</br>";  

//select column to be averaged  

$resultB = mysql_query("SELECT PortRPMSignal FROM table");  
if (!$resultB) {  
        die('Could not query:' . mysql_error());  
}  

//set start equal to the first row you want to calculate the averages from, likely the first null row    

$start = 5;  

//calculate 1 minute average, the average is correct  

for($i = $start; $i<$num_rows; $i++){    
$output = mysql_result($result,$i);  
$test = mysql_result($resultB,$i)+mysql_result($resultB,$i-1)+mysql_result($resultB,$i-2)+mysql_result($resultB,$i-3)+mysql_result($resultB,$i-4)+mysql_result($resultB,$i-5);
$test2 = $test/6;  
$round = round($test2,4);  
$temp = mysql_query("SELECT Timestamp FROM table");  
if(!$temp){  
    die('Could not query:' . mysql_error());  
}  

//gets timestamp at row $i, and inserts new average value into that row in RPMAve column  

$time = mysql_result($result,$i);  
mysql_query("UPDATE table SET PortMinuteAveRPM = $round WHERE Timestamp =     '$time'");  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:09:43.640

[`COUNT()`](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)对于初学者，可以通过添加聚合来清理此处的初始“计数”块：

```
$resultA = mysql_query("SELECT * FROM table");  
$num_rows = mysql_num_rows($result);  
echo "There are $num_rows rows.</br>"; 
```

改成：

```
$resultA = mysql_query("SELECT COUNT(*) FROM table");  
$row = mysql_fetch_array($result);  
$num_rows = $row[0];
echo "There are $num_rows rows.</br>"; 
```

这本身应该会大大加快速度。没有它，您将从表中选择所有数据 - 一个查询只会随着您放入表中的越多而变得越慢。

对于您正在计算的平均值，是否有任何无法在 MySQL 查询中直接完成的逻辑？例如：

```
UPDATE table SET PortMinuteAveRPM=(SELECT AVG(PortRPMSignal) FROM table WHERE Timestamp BETWEEN '$startTime' AND '$endTime') WHERE TimeStamp='$endTime' 
```

如果可行的话，这可以使您免于循环遍历结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:01:40.997

听起来您正在尝试计算自回归移动平均线 (ARMA)，但您对数据的解释以及如何捕获数据存在许多问题。

如果您有一组完整的数据（尽管您的问题暗示您没有），那么计算出包含所需记录数量的时间间隔并直接从数据库中获取，例如

```
SELECT a.timestamp as base, AVG(b.PortRPMSignal) 
FROM table a, table b
WHERE b.timestamp BETWEEN a.timestamp AND a.timestamp+INTERVAL 6 HOUR
GROUP BY a.timestamp 
```

如果您想精简数据点，请尝试类似...

```
SELECT a.timestamp as base, AVG(b.PortRPMSignal) 
FROM table a, table b
WHERE b.timestamp BETWEEN a.timestamp AND a.timestamp+INTERVAL 6 HOUR
AND DATE_FORMAT(a.timestamp, '%i%s')='0000'
GROUP BY a.timestamp 
```

虽然如果您没有完整的数据集但只有少量的抖动，一个更好的解决方案是使用自动增量 id 的模数从“a”中挑选出更少的行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:02:46.650

这只是一个开始，但您可以将这一点装箱

```
//get number of rows in table 
$resultA = mysql_query("SELECT * FROM table");  
$num_rows = mysql_num_rows($result);  
echo "There are $num_rows rows.</br>"; 
```

因为下面一行

```
$resultB = mysql_query("SELECT PortRPMSignal FROM table"); 
```

...会给你一个可以使用 mysql_num_rows 的结果集。

在查询中使用`*`会增加数据库的负载。

在你的 for 循环中，你有这个

```
$temp = mysql_query("SELECT Timestamp FROM table");  
if(!$temp){  
    die('Could not query:' . mysql_error());  
} 
```

这意味着每次循环时都会运行此查询，而您甚至没有使用结果。

我不知道mysqli是否会给你更好的性能，但你应该使用它。

# jquery - 在 jQuery 中创建 img

> ID：11613904
> 
> 赞同：2
> 
> 时间：2012-07-23T13:52:03.337
> 
> 标签：jquery, html, image

如何在 jQuery 中创建 img 标签并将其设置为仅某些 div 的内容？

如果目标 div 有一些内容，请将其替换并放入动态创建的 img 标签。

这是我尝试过的：

```
 $(".someClass").click(function(){

             var $img = $('<img allowfullscreen  ></img>', {
                'width': 650,
                'height': 580,              
                'src': $(this).find('img').attr('data')
             });
             $('#someId').html($img);

        }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T13:53:57.520

```
var $img=$("<img />",{"src":url});
$(target_id).html($img); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:55:36.623

你可以像这样创建一个`Image`对象：

```
var img = new Image() 
img.src = 'image.jpg' 
```

# asp.net - 为什么我的查询没有返回 6 个项目？

> ID：11613905
> 
> 赞同：1
> 
> 时间：2012-07-23T13:52:08.890
> 
> 标签：asp.net, linq, linq-to-sql

下午，

任何人都可以看到为什么我的查询没有返回随机的 6 个项目吗？

```
 public class GetQuestions
 {
   public int qId { get; set; }
   public string question { get; set; }
   public string answer1 { get; set; }
   public string answer2 { get; set; }
   public string answer3 { get; set; }
}

  [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<GetQuestions> Questions()
    {
        using (QuizDataContext dc = new QuizDataContext())
        {
            var query = from q in dc.tblquizs
                        orderby Guid.NewGuid()
                        select new GetQuestions
                        {
                            qId = q.id,
                            question = q.q,
                            answer1 = q.a1,
                            answer2 = q.a2,
                            answer3 = q.a3,
                        };
            return query.Take(6).ToList();
        } 
```

**更新**添加 GetQuestions 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T08:13:27.113

我使用以下代码来解决此问题。

```
 var qry = from q in dc.tblwhiskysprintquizs.AsEnumerable()
                      orderby Guid.NewGuid()
                      select new GetQuestions
                        {
                            qId = q.id,
                            question = q.q,
                            answer1 = q.a1,
                            answer2 = q.a2,
                            answer3 = q.a3,
                        };
            return qry.Take(6).ToList(); 
```

就像在查找中添加 .AsEnumerable 一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:57:25.677

你不能通过使用获得随机顺序

```
orderby Guid.NewGuid() 
```

您可以通过执行以下查询并查看结果来对此进行测试：

```
from q in dc.tblquizs
select Guid.NewGuid() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:29:01.287

Entity Framework 4.3.1 会将 Guid.NewGuid() 调用转换为 newid() - 如果您的 DAL 支持，这绝对是首选方法。但是，您使用的任何 DAL 都可能无法正确转换调用（在这种情况下，它可能会在发送到数据库服务器之前被转换为 GUID，从而产生用于排序的静态值）。您应该使用数据库分析器来查看您的 DAL 正在做什么。

如果 Guid.NewGuid 调用未正确转换为 newid()，您还有另外两个选择：

1.  使用存储过程
2.  使用下面的 LINQ 之类的东西（作为最后的手段）

    ```
     var context = new ScratchContext();
        var products = new List<Product>();
        for (int i = 0; i < num; i++)
        {
            Product product = null;
            while (product == null)
            {
                int randomId = r.Next(context.Products.Count());
                product = context.Products.FirstOrDefault(p => p.ID == randomId);
            }
            products.Add(product);
        }
        return products.AsQueryable(); 
    ```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T14:00:40.560

```
orderby Guid.NewGuid() 
```

生成数据库中可能不存在的随机数

# ios - 在 UIButton 的选择器上传递参数

> ID：11613906
> 
> 赞同：1
> 
> 时间：2012-07-23T13:52:16.890
> 
> 标签：ios, parameters, uibutton, selector

我在 a`detailDisclousure`的标注上有一个按钮`MKAnnotation`。当按下这个按钮时，我需要调用一个方法，传递一个参数来标识`annotation`调用它的人。怎么可能做到？

这是我对注解的看法：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

if ([annotation isKindOfClass:[Annotation class]])
{
    static NSString* identifier = @"identifier";

    MKPinAnnotationView* pinView = (MKPinAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

    if (pinView == nil) 
    {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier]autorelease];
    }

    Annotation *antt = annotation;

    pinView.canShowCallout = YES;
    pinView.draggable =    YES;

    UIButton* detailButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

    [detailButton performSelector:@selector(goToViewWithAnnotation:) withObject:antt];

    pinView.rightCalloutAccessoryView = detailButton;

    return pinView;
}

else 
{
    return nil; 
}
} 
```

这是应该使用参数调用的方法：

```
-(void)goToViewWithAnnotation:(Annotation *)annotation
{
    NextViewController *nextView = [[NextViewController alloc]initWithNibName:@"NextViewController" bundle:nil];

nextView.id = annotation.id;

[self.navigationController nextView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T15:24:55.713

您可以通过唯一`NSInteger`的`tag`属性传递任何。`UIButton`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T13:59:32.730

无法使用`-addTarget:action:forControlEvent:`for发送数据`UIButton`：

```
[detailButton addTarget:self action:@selector(goToViewWithAnnotation:) forControlEvents:UIControlEventTouchUpInside]; 
```

当您触发选择器时，尝试以其他方式处理数据。就像根据需要保存指针或变量一样。

`UIButton`如您所见，有这些来电者：

```
- (void)action
- (void)action:(id)sender
- (void)action:(id)sender forEvent:(UIEvent *)event 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:10:03.807

我认为您可以在 .h 文件中添加一个属性（即 (Annotation *)annotation）。然后你可以在“-(void)goToViewWithAnnotation”方法中使用注解。或者您可以自定义一个继承 UIControl 的新按钮

# sql-server-2008 - 从多个表中检索数据的存储过程？

> ID：11613911
> 
> 赞同：0
> 
> 时间：2012-07-23T13:52:37.140
> 
> 标签：sql-server-2008, stored-procedures

我有五张看起来像这样的桌子

```
BugHistory             
--------------------   
BugHistoryID
BugId
EmployeeId                  

Bugs
--------------------
BugID
Description
ProjectID
PriorityID

Employee                    
-------------------      
EmployeeId
EmployeeName   

Projects                
-------------------     
ProjectID
ProjectName    

Priority
-------------------
PriorityID
PriorityName 
```

我想从所有表中检索数据，制作`BugHistory`主表。

我需要`[Description],[ProjectName],[PriorityName]`剩下的四个表中`EmployeeID`的关键在哪里。

应根据 BugHistory 表中的 EmployeeID 检索数据；我将根据登录名获取 EmployeeID。谁能帮我写这个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T13:58:39.903

这应该可以满足您的需求。

```
SELECT b.Description
    , pj.ProjectName
    , pr.PriorityName
FROM BugHistory bh
INNER JOIN Employee e
     ON bh.EmployeeId = e.EmployeeId
INNER JOIN Bugs b
     ON bh.BugId = b.BugId
INNER JOIN Project pj
    ON b.ProjectId = pj.ProjectId
INNER JOIN Priority pr
    ON b.PriorityId = pr.PriorityId 
```

# actionscript-3 - 在 Flash cs5 中禁用嵌入字体的文本字体别名

> ID：11613913
> 
> 赞同：0
> 
> 时间：2012-07-23T13:52:44.537
> 
> 标签：actionscript-3, flash

有没有办法关闭嵌入字体的抗锯齿功能？我正在使用以下代码，但遗憾的是我在 Actionscript 3 参考中没有看到任何选项，当使用动态文本字段并在 Aliasing 下选择了 Bitmap text [no anti-alias] 选项时，我可以获得相同的结果.

```
TF = new TextField();
TF.embedFonts = true;
TF.selectable = false;
TF.defaultTextFormat = new TextFormat(_font, _fontSize, _fontColor);
TF.autoSize = TextFieldAutoSize.LEFT;
TF.height = _maskHeight;
TF.x = _maskWidth;
TF.text = getNextMessage();
TF.antiAliasType = AntiAliasType.ADVANCED;
addChild(TF); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:37:51.053

根据 Adob​​e 提供的文档，您无法关闭嵌入字体的抗锯齿：“嵌入字体是抗锯齿的，这意味着它们的边缘被平滑以便于阅读。这在文本较大时尤其明显。” 您可以在此处更详细地查看它：http: //livedocs.adobe.com/flex/3/html/help.html?content= [fonts_04.html](http://livedocs.adobe.com/flex/3/html/help.html?content=fonts_04.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T17:10:36.740

我也一直在寻找这样做，因为我有一个奇怪的问题，即日文文本无法在 Myriad Pro 中呈现，除非 CS6 TextField 属性中的“抗锯齿”下拉菜单设置为“位图文本 [无抗锯齿]”检查器 - 但似乎没有任何方法可以通过 ActionScript 选择此设置...！

有趣的是，尝试在舞台上创建两个除了实例名称和此设置之外相同的 TextField，然后测试电影 > 调试 > 列出变量并得到以下输出：

对于使用“位图文本”作为抗锯齿设置的 TextField：

```
Edit Text: Target="_level0.bitmaptext_txt"
textColor = 0, multiline = true, scroll = 1,
antiAliasType = "normal",
mouseWheelEnabled = true, variable = null, restrict = null,
gridFitType = "pixel",
selectable = false, bottomScroll = 1, filters = [object #1, class 'Array'] [], background = false,
maxhscroll = 0, styleSheet = undefined,
type = "dynamic",
autoSize = "none",
textWidth = 98, wordWrap = true, maxChars = null, hscroll = 0,
thickness = 0, borderColor = 0, html = false, backgroundColor = 16777215,
condenseWhite = false,
text = "hello world",
htmlText = "hello world",
sharpness = 0, textHeight = 26, border = false, password = false,
embedFonts = true, length = 11, tabIndex = undefined, maxscroll = 1 
```

对于以“动画抗锯齿”作为抗锯齿设置的 TextField：

```
Edit Text: Target="_level0.antialiasanimation_txt"
textColor = 0, multiline = true, scroll = 1,
antiAliasType = "normal",
mouseWheelEnabled = true, variable = null, restrict = null,
gridFitType = "pixel",
selectable = false, bottomScroll = 1, filters = [object #2, class 'Array'] [], background = false,
maxhscroll = 0, styleSheet = undefined,
type = "dynamic",
autoSize = "none",
textWidth = 93, wordWrap = true, maxChars = null, hscroll = 0,
thickness = 0, borderColor = 0, html = false, backgroundColor = 16777215,
condenseWhite = false,
text = "hello world",
htmlText = "hello world",
sharpness = 0, textHeight = 26, border = false, password = false,
embedFonts = true, length = 11, tabIndex = undefined, maxscroll = 1 
```

如您所见，除了“对象#1”、“对象#2”属性之外，两者之间没有明显的区别—​​—我不敢相信这真的有什么作用吗？

# ssas - 如何设置 WebForms 身份验证 Web 应用程序以连接到 SSAS？

> ID：11613917
> 
> 赞同：0
> 
> 时间：2012-07-23T13:53:04.493
> 
> 标签：ssas, webforms

我正在尝试将 Web 表单应用程序连接到 SSAS 多维数据集。该应用正在使用 Web 表单身份验证，并且正在使用 Azure 中的 Web 角色。SSAS 多维数据集位于 Azure 中的虚拟机上。没有安装域。该网络应用程序正在使用[GrapeCity 的 Active Analysi](http://www.gcpowertools.com/products/ActiveAnalysis)控件。运行应用程序时出现错误“现有连接被远程主机强行关闭”。在服务器上进行分析时，我得到了“匿名登录”尝试。

我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:02:54.533

SSAS 仅使用 Windows 身份验证，因此：

1）您以某种方式让您的 Web 应用程序的应用程序池在可以访问立方体框的 Windows 帐户下运行（听起来不太可能）。

2）您的应用程序池在 Windows 帐户下运行，并在立方体框上创建一个具有相同用户名/密码的 Windows 帐户，并为其分配权限（以前可以工作，我认为它仍然可以）。

3) 您允许匿名登录读取您的多维数据集的权限。我知道您可以在服务器级别（开发环境..）执行此操作，我还没有在多维数据集角色级别尝试过。

这些是我所知道的，祝你好运。

编辑：抱歉，以为我忘记了，如果将 IIS 添加为额外层，则有基本身份验证，您必须将其设置为通过 MSDMPump.dll 进行，完整说明如下：http: [//msdn.microsoft。 com/en-us/library/gg492140.aspx](http://msdn.microsoft.com/en-us/library/gg492140.aspx)

# javascript - jQuery 可搜索复选框列表和三态复选框

> ID：11613919
> 
> 赞同：0
> 
> 时间：2012-07-23T13:53:08.710
> 
> 标签：javascript, jquery

我正在构建一个简单的 asp 页面，在该页面上，每个名称的左侧都有带有复选框的人员列表。我设法创建了一个简单的 jQuery 脚本，它允许根据输入隐藏和显示表格行：http: [//jsfiddle.net/Tq97v/](http://jsfiddle.net/Tq97v/)（第一部分）

如您所见，我可以输入部分名称，然后隐藏特定行。使用红色“x”我可以取消选中所有复选框。

我现在要做的是将静态红色“x”更改为三态复选框。甚至不知道如何开始。

我是否必须将更改侦听器添加到列表中的每个复选框？

第二件事 - 如何在网站上创建相同“插件”的多个实例。现在我正在通过它来识别输入，但是使用该输入作为参数调用函数会很好，并且它会在该输入之后生成表格并创建必要的逻辑。这样我可以在页面上多次调用函数以获得多个列表。

我不是要求完整的解决方案（当然它总是受欢迎的:)）但我需要的是如何以有效的方式和尽可能优化的方式完成此任务，因为有时我的列表有 500 多个元素。

PS不要看HTML代码，是ASP生成的。

* * *

我找到了这个插件：[https](https://github.com/bcollins/jquery.tristate) ://github.com/bcollins/jquery.tristate ，但我不知道如何在我的列表中使用它。

* * *

**更新：**

我已经设法将我的代码变成了函数，但现在我必须为每个列表调用 3 个函数。
这是我更新的代码： http: [//jsfiddle.net/65MEV/4/](http://jsfiddle.net/65MEV/4/)
如何将其更改为一个功能？会更好吗？
这是我更新的代码。仍在考虑使用该 Indeterminate Checkbox 而不是我的删除图像的方法。

**更新2**

我构建了工作代码:)
[http://jsfiddle.net/65MEV/9/](http://jsfiddle.net/65MEV/9/)
但我想尽可能地改进它。
欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:58:30.940

三态复选框就像三通道设备：一种幻觉。

您真正想要的是制作复选框`indeterminate`（通过将同名的属性设置为`true`）。要实现这一点，您需要在每个复选框上都有一个`change`（或`click`）处理程序，然后您需要检查它们是否都处于相同状态，如果不是，则设置`indeterminate`属性。确实很麻烦，因为您很少看到`indeterminate`复选框，因此大多数用户不知道如何处理它们。尽量避免。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:15:19.533

相对于其他元素创建相同插件访问元素的多个实例。

例如：在您的情况下，不要将项目保留在 jQuery 对象中，而是`var $tableRows = $('table.myList tr');`在事件中访问它们。

```
$('#user_name').keyup(function () {
    var sValue = $.trim($('input#user_name').val());
    if(lastInput==sValue) return;
    var $tableRows = $(this).next().next().find("table.myList tr");
    if (sValue == '') {
        $tableRows.show();
    } else {
        $tableRows.each(function () {
            var oLabel = $(this).find('label');
            if (oLabel.length > 0) {
                if (oLabel.text().toLowerCase().indexOf(sValue.toLowerCase()) >= 0) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            }
        });
        lastInput=sValue;
    }
}); 
```

你只有你的实际清单。

对于树状态复选框，您不需要插件，只需添加一个按钮或链接，每次点击检查它的状态，您可以通过[jQuery 数据](http://api.jquery.com/jQuery.data/)保持状态并根据此数据更改元素图像。

# php - 在加载时运行 onChange

> ID：11613924
> 
> 赞同：0
> 
> 时间：2012-07-23T13:53:28.580
> 
> 标签：php, jquery, html, ajax

我有这个三重下拉列表，效果很好

[http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

是否可以在加载时运行下面的函数 getState 以及当前的 onChange？这适用于编辑页面，因此某些下拉菜单可能具有需要选择的值。

我已经修改了查询以在外部页面中执行我希望的操作，但我认为第一个框需要在页面加载时运行以使外部查询正常工作。

我试过添加

```
 jQuery(document).ready(function() {
jQuery('#networks').trigger('change');
 }); 
```

但我认为这是错误类型的装载机

```
 function getXMLHTTP() { //function to return the xml http object
    var xmlhttp=false;  
    try{
        xmlhttp=new XMLHttpRequest();
    }
    catch(e)    {       
        try{            
            xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch(e){
            try{
            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch(e1){
                xmlhttp=false;
            }
        }
    }

    return xmlhttp;
}

function getState(network) {        

    var strURL="findfolder.php?network="+network+"&perant="+<?php echo $row_rs_doc['parentid']; ?>;
    var req = getXMLHTTP();

    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('folderdiv').innerHTML=req.responseText;                        
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }       
} 
```

和我的第一个选择列表

```
 <select  name="network" onchange="getState(this.value)">
  <?php
       do {  
    ?>
    <option value="<?php echo $row_rs_net['idnetworks']?>"<?php if (!(strcmp($row_rs_net['idnetworks'], $row_rs_doc['network']))) {echo "selected=\"selected\"";} ?>><?php echo $row_rs_net['netname']?></option>
    <?php
      } while ($row_rs_net = mysql_fetch_assoc($rs_net));

    ?>
   </select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T13:55:18.960

# 选项1

改变：

```
<select name="network" onchange="getState(this.value)"> 
```

到：

```
<select id="network" name="network" onchange="getState(this.value)"> 
```

# 选项 2

改变：

```
jQuery('#networks').trigger('change'); 
```

到：

```
jQuery('[name="networks"]').trigger('change'); 
```

# iphone - 如何将所有 \u**** 字符串转换为真正可读的 NSString？

> ID：11613925
> 
> 赞同：1
> 
> 时间：2012-07-23T13:53:29.397
> 
> 标签：iphone, unicode, nsstring

> **可能重复：**
> [如何将 Unicode 字符串（\u00e2 等）转换为 NSString 以进行显示？](https://stackoverflow.com/questions/2831935/how-to-convert-unicode-strings-u00e2-etc-into-nsstring-for-display)

我正在将网页下载到 NSString 中。

下载后发现有些网页中的很多字符是这样的：

`**\u003c**div style\u003d\"float:left;padding-right:10px\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cdiv\u003e\u003ca title\u003d\"Click here to read Penn State NCAA Sanctions: Four-Year Bowl Ban, Vacated Wins, $60 Million Fine, Significant Scholarship Reductions\"`

我希望使用正则表达式`<img[^>]*>`来解析所有图像，但是有了这些`\u****`东西，我不能这样做。

`\u****`有没有办法将所有这些东西预先转换成可读的字符`<`？

谢谢

# django - Django 和模型/视图，AttributeError

> ID：11613934
> 
> 赞同：0
> 
> 时间：2012-07-23T13:53:52.243
> 
> 标签：django

我在 django 中使用我的 miniportfolio，不确定错误告诉我什么。

模型.py

```
class Page(models.Model):
    title = models.CharField(max_length=30)
    slug = models.SlugField()
    content = models.TextField()

def get_absolute_url(self):
    return "/%s" % self.slug

def __unicode__(self):
    return self.title

def __repr__(self):
    return self.name 
```

视图.py

```
def page_view(request, **kwargs):
    slug = kwargs.get('slug')
    page = get_object_or_404(Page, slug=slug)   
    content = page.content
    title = page.title
    return render_to_response("base.html", {"content":content, "title":title}) 
```

网址.py

```
url(r'^(?P<page>)/$', page_view), 
```

当我从管理界面创建一个新页面时，我得到了一些非常奇怪的 url。127.0.0.1:3020/admin/r/7/3/ <--我不知道他们为什么会这样。提示？当我访问我创建的页面时，我得到一个 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:22:24.717

```
def page_view(request, **kwargs):
    slug = kwargs.get('page') # hello page! I found you
... 
```

因为你使用`page`的变量不在`slug`urls.py

```
url(r'^(?P<page>)/$', page_view), 
```

* * *

或者你可以写视图

```
def page_view(request, page=None):
    page_from_db = get_object_or_404(Page, slug=page)
    return render(request, "base.html", {"page": page_from_db}) 
```

在 tpl

```
{{ page.content }} 
```

* * *

如果你使用 1.4 使用`from django.shortcuts import render`

[自动渲染](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)使用上下文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:07:39.563

改变：

```
def get_absolute_url(self):
    return ('page', (), {
    'slug': self.slug,
    'id': self.id,
    }) 
```

类似于：

```
def get_absolute_url(self):
    return "/APP_URL_PATH/%s/" % self.slug # or use id, there's no need for two unique identifiers 
```

和

```
def my_view(request, slug, id):
    page = get_object_or_404(pk=id) 
```

类似于：

```
def my_view(request, **kwargs):
    slug = kwargs.get('slug')
    page = get_object_or_404(Page, slug=slug) 
```

由于复制粘贴，您的缩进可能很糟糕，您可能想要编辑您的帖子。查看 django 的文档以了解有关 url 捕获组的想法

# matlab - matlab定时器函数

> ID：11613937
> 
> 赞同：0
> 
> 时间：2012-07-23T13:53:55.780
> 
> 标签：matlab

我想在程序中调用函数 A。该函数内部有一个 for 循环，我想缩短迭代次数，而不仅仅是更改上限。在这种情况下我该怎么做？我在想Matlab是否能够做类似的事情：一个函数内部（或者循环内部）的一个计时器和调用这个函数的主程序中的第二个？但只是粗略的想法，我是初学者。如果这是个好主意，请反馈，如何实施？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:22:41.273

听起来您在谈论在循环中具有最大经过时间条件，类似于，

```
MAX_T = 10;
tic; 
for n=1:NMAX
  % Call your loop functions 
  .  
  . 
  % Break if youve spent too much time in the loop 
  if toc > MAX_T; break; end;
end 
```

还有一些优化的方法，比如每 N 次迭代只检查一次 toc 的值。

# javascript - 如何将 Web 服务作为字符串传递给 javascript？

> ID：11613940
> 
> 赞同：0
> 
> 时间：2012-07-23T13:54:08.267
> 
> 标签：javascript, asp.net, web-services

我目前有一个 ajax 自定义控件，它调用 Web 服务作为其功能的一部分。我需要将调用哪个 Web 服务作为参数传递给控件。目前，我在 .vb 文件中使用字符串参数并将其传递给 javascript。我通过将行构建为字符串，然后在其上使用 eval() 来执行对 Web 服务的调用。

从[这里](https://stackoverflow.com/questions/912596/how-to-turn-a-string-into-a-javascript-function-call)，我可以看到 eval 很糟糕。就像该页面上的函数调用一样，有什么方法可以将 Web 服务用作我可以调用的东西？

请注意，我正在从 Web 服务调用方法。它不是 stringservice(parameters)，而是 stringservice.start(parameters)。我只是得到字符串没有启动方法的错误。

有什么解决方案，还是我坚持使用 eval？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:58:20.897

如果您的字符串是 JSON 格式，您可以使用`JSON.parse`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:24:17.440

[您也可以使用括号语法](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators)访问全局对象的属性：

```
window[this.WebService](this.ProcessID, this.ProcessName, params); 
```

但是，我建议将可用功能捆绑在 Web 服务对象中，例如

```
var webservices = {
    a: function(id, name, params) { ... },
    b: function(id, name, params) { ... },
    ...
};

...

webservices[this.WebService](this.ProcessID, this.ProcessName, params); 
```

# python - 扭曲等待另一个客户

> ID：11613941
> 
> 赞同：2
> 
> 时间：2012-07-23T13:54:18.057
> 
> 标签：python, twisted

这是我在类中的 render_GET 函数，它继承自扭曲 HTTP 服务器中的 resource.Resource：

```
 def render_GET(self, request):
           file = request.args['file'][0]
           altitude, azimuth, distance = request.args['position'][0].split(",")
           self.update_render(file, altitude, azimuth, distance, request.args['clientID'][0])
           # update_render() starts a thread that contacts this server again and POSTs data once done
           self.add_client(request.args['clientID'][0])

           while not self.client_data[request.args['clientID'][0]]:
                 # I GET STUCK HERE - the thread CANT send data to this dict since server is locked in this loop
                 time.sleep(0.5)

           return "DONE" 
```

发生的情况是我需要扭曲的服务器等到函数`update_render`执行某些操作（此函数是异步的，所以通过调用`self.update_render()`我只是启动它，不确定何时写入实际数据。的返回数据`update_render()`写入 self.client_data 字典。

我需要在循环中检测这个dict的内容但是我被困在那里 - 似乎服务器被锁定在这个循环中但我需要它来响应其他客户端（它们异步填充self.client_data）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:20:57.853

你永远不想在使用 Twisted 的应用程序中编写这样的 while 循环。

理想情况下，您需要一个比`update_render`返回延迟的 API 更好的 API。Deferred 为您提供了一个统一的、可组合的、方便的 API 来管理回调。回调对于使用 Twisted 进行编程非常重要。

`update_render`获取客户端数据后应使用`Deferred`'`callback`方法 - 而不是将其放入`self.client_data`. 通过使用`Deferred`，它在 Twisted 的事件驱动系统中运行良好。您（调用者）附加到的回调`Deferred`可以将结果发送给客户端。

Twisted Web 有一个小怪癖，您需要`twisted.web.server.NOT_DONE_YET`从该`render_GET`方法返回以让服务器知道响应即将到来。

查看[Twisted Web In 60 Seconds](http://twistedmatrix.com/documents/current/web/howto/web-in-60/index.html)了解一些异步生成响应的示例。

# android - 我如何使用“uri”将图像发送到另一个班级？（安卓）

> ID：11613943
> 
> 赞同：0
> 
> 时间：2012-07-23T13:54:23.287
> 
> 标签：android, image, uri

我从画廊拍了一张图片，我想在另一堂课上使用它。是否可以使用“uri”？

```
Uri  selectedImage = data.getData();
String path = selectedImage.getPath();

Intent sintent = new Intent(FromFile.this, OurView.class);
startActivity(sintent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:01:18.103

在创建意图后添加它。

```
sintent.putExtra("image", path); 
```

在 OurView 通话中

```
String path = getIntent().getStringExtra("image"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:01:59.327

您可以将`Uri`要发送的图像放在发送者的意图中`Activity`。像这样的东西：

```
Intent sintent = new Intent(FromFile.this, OurView.class);
intent.putExtra("selectedImage", selectedImage.toString());
startActivity(sintent); 
```

`Activity`然后要检索它，请在被调用的代码中使用此代码：

```
//Where OurView is assumed to be the class name of your Activity that is being called
Uri selectedImage = Uri.parse(OurView.this.getIntent().getExtras().getString("selectedImage")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:04:30.467

1）如果您想将路径传递给下一个活动。尝试这个 -

```
Intent sintent = new Intent(FromFile.this, OurView.class);
sintent.putExtra("pathvalue", path);
startActivity(sintent); 
```

在 nextActivity(OurView.java) -

```
String path = getIntent().getStringExtra("image"); 
```

2）如果你想将 Uri 传递给下一个 Activity。尝试这个 -

```
Uri  selectedImage = data.getData();
String path = selectedImage.getPath();

Intent intent = new Intent(FromFile.this, OurView.class);
intent.setData(Uri.parse(selectedImage));
startActivity(intent); 
```

在 nextActivity(OurView.java) -

```
Uri selectedImage = getIntent().getData(); 
```

# android - 谷歌云消息 - 同一设备多个应用程序

> ID：11613945
> 
> 赞同：0
> 
> 时间：2012-07-23T13:54:26.563
> 
> 标签：android, google-cloud-messaging

我运行 Google Cloud 消息传递的示例演示应用程序，我收到了推送的消息。我的问题是我的设备上是否有 2 两个程序，并且我想根据我的选择将消息推送到这两个程序。例如，我想将消息推送到 Program1，然后我想仅将另一条消息推送到 Program2。

提前致谢。

# c++ - C++：在头文件中声明一个外部向量容器会导致错误

> ID：11613948
> 
> 赞同：-2
> 
> 时间：2012-07-23T13:54:36.630
> 
> 标签：c++, class, vector, header, extern

我尝试寻找解决方案，但找不到。

所以我有一个头文件`items.h`：

```
#ifndef ITEMS_H
#define ITEMS_H

#include <vector>

using std::vector;

int create_item();

class itemClass
{

public:

    short int xTile;
    short int yTile;

    bool playerHas;

    short int category;
    short int weaponCategory;

}extern vector<itemClass> items;

#endif 
```

然后我在`items.cpp`哪里尝试使用这个向量`create_item()`：

```
#include "stdafx.h"
#include "SDL.h"
#include "items.h"
#include <vector>

using namespace std;

vector<itemClass> items;

int index = 0;

int create_item()
{
    //select category for the created item
    short int itemCategory = rand() % 3;

    switch(itemCategory)
    {
    case WEAPON:

        //increase weapons list by one
        items.resize(items.size() + 1);

        index = items.size();

        //set appropriate item category
        items.at(index).category = itemCategory;

        items.at(index).weaponCategory = rand() % 9;

        break;

     } 
```

我遗漏了一些不重要的部分。无论如何，只要我不在标头中将向量声明为 extern，此代码就可以正常工作，而只是将其保留在本地。当我尝试这样做时，为什么会导致错误？

编辑：对不起，我忘了包括错误：

> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(12)：错误 C2371：'items'：重新定义；不同的基本类型
> 
> 1>
> c:\users\aske\documents\c++\roguelike\roguelike\items.h(53) ：参见“项目”的声明
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(36): error C2228: left of '.resize' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(36): error C2228: left of '.size' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(38): error C2228: left of '.size' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(41): error C2228: left of '.at' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(41): error C2228: left of '.category' must have class/struct/union
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(43): error C2228: left of '.at' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(43): error C2228: left of '.weaponCategory' must have class/struct/union
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(46): error C2228: left of '.at' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(46): error C2228: left of '.weaponCategory' must have class/struct/union
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(47): error C2228: left of '.at' must have class/struct/union
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(47): error C2228: left of '.weaponCategory' must have class/struct/union
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(48): 错误 C2228: '.at' 的左边必须有类/结构/联合
> 
> 1> 类型是'int'
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(48): error C2228: left of '.weaponCategory' must have class/struct/union
> 
> 1>c:\users\aske\documents\c++\roguelike\roguelike\items.cpp(50): error C2228: left of '.at' must have class/struct/union

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:07:26.513

您需要文件中的`;`before ，然后它应该编译 - 但您实际上不需要在 .h 文件中定义项目向量。`extern``items.h`

# xml - 读取 XPath 值时出错

> ID：11613949
> 
> 赞同：1
> 
> 时间：2012-07-23T13:54:36.833
> 
> 标签：xml, xpath, error-handling, cdata

我的回复如下所示

```
<Response xmlns="http://example.com">
<PartnerCustomerNumber>24554691755043</PartnerCustomerNumber>
<ResultInfo>
  <ResultCode>0</ResultCode>
  <ResultMessage>Success</ResultMessage>
</ResultInfo>
</Response> 
```

我需要使用 xpath 读取合作伙伴客户编号。我用了

```
/Response/PartnerCustomerNumber and //PartnerCustomerNumber 
```

两者都返回错误说`Error parsing source entry[error:Unexpected element:CDATA]`

如何绕过 CDATA 继续读取预期值。

这适用于我的其他电话。所以我不能修改我的大部分代码，但修改我的 xpath。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:29:21.913

您的 XPath 表达式显然是错误的，因为它忽略了元素位于名称空间中的事实。但是关于 CDATA 的错误消息似乎与此无关。

# r - ggplot2中直方图条的反向填充顺序

> ID：11613950
> 
> 赞同：13
> 
> 时间：2012-07-23T13:54:44.910
> 
> 标签：r, ggplot2

我注意到在使用 plot 创建的直方图中填充条形的默认设置是反向字母顺序，而图例则按字母顺序排列。我有什么办法让两者都按字母顺序排列？问题在下面的示例图中很明显。额外的问题：我如何将从左到右的条形顺序从字母顺序更改为递减计数？谢谢

```
df <- data.frame(
  Site=c("A05","R17","R01","A05","R17","R01"),
  Group=c("Fungia","Fungia","Acro","Acro","Porites","Porites"),
  Count=c(6,8,6,7,2,9),
  Total=c(13,10,15,13,10,15)
)

  Site   Group Count Total
1  A05  Fungia     6    13
2  R17  Fungia     8    10
3  R01    Acro     6    15
4  A05    Acro     7    13
5  R17 Porites     2    10
6  R01 Porites     9    15

qplot(df$Site,data=df,weight=df$Count,geom="histogram", fill=df$Group, ylim = c(0,16)) + 
  xlab("Sites") + 
  ylab("Counts") + 
  scale_fill_hue(h=c(0,360), l=70, c=70,name = "Emergent Groups") 
```

![在此处输入图像描述](../Images/b92e913ab4a7af541aecbaff78430c5b.png)

我试图从高到低排序计数和填充颜色，以便它们与图例的字母顺序相匹配。我一直在尝试使用最初帖子中的提示调整它几个小时，但没有成功。对此的任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T16:17:06.840

如果您只想要颜色顺序匹配，您可以反转图例：颜色顺序将匹配，但图例将按字母顺序倒序：

```
qplot(df$Site,data=df,weight=df$Count,geom="histogram", fill=df$Group, ylim = c(0,16)) + 
  xlab("Sites") + 
  ylab("Counts") + 
  scale_fill_hue(h=c(0,360), l=70, c=70,name = "Emergent Groups") +
  guides(fill = guide_legend(reverse = TRUE)) 
```

![在此处输入图像描述](../Images/9bfb003396c1dee9aa31a2737752109e.png)

要恢复字母顺序，请在上述代码之前对 Group 因子进行重新排序：

```
# reorder the groups
df$Group <- factor(df$Group , 
                   levels=levels(df$Group)[order(levels(df$Group), decreasing = TRUE)])

qplot(df$Site,data=df,weight=df$Count,geom="histogram", fill=df$Group, ylim = c(0,16)) + 
  xlab("Sites") + 
  ylab("Counts") + 
  scale_fill_hue(h=c(0,360), l=70, c=70,name = "Emergent Groups") +
  guides(fill = guide_legend(reverse = TRUE)) 
```

![在此处输入图像描述](../Images/1099f78b2357e2158b97fd1da3a75867.png)

对于奖金（通过减少总计数来排序条形图），重新排序 Site 变量的因子顺序：

```
# reorder the sites
df$Site <- factor(df$Site, 
                  levels = levels(df$Site)[order(aggregate(Count ~ Site, data = df, sum)$Count, 
                                                 decreasing = TRUE)])
# reorder the groups
df$Group <- factor(df$Group , 
                   levels=levels(df$Group)[order(levels(df$Group), decreasing = TRUE)])

qplot(df$Site,data=df,weight=df$Count,geom="histogram", fill=df$Group, ylim = c(0,16)) + 
  xlab("Sites") + 
  ylab("Counts") + 
  scale_fill_hue(h=c(0,360), l=70, c=70,name = "Emergent Groups") +
  guides(fill = guide_legend(reverse = TRUE)) 
```

![在此处输入图像描述](../Images/c0567c245608c14c9ddf5e507f04b303.png)

# r - 使用ggplot从单列中提取多行

> ID：11613951
> 
> 赞同：3
> 
> 时间：2012-07-23T13:54:51.903
> 
> 标签：r, ggplot2

我有一个如下所示的数据框。我需要基于区域、日期作为 x 轴和 AveElapsedTime 作为 y 轴来绘制图表。

```
 >avg_data
             date  region AveElapsedTime
    1  2012-05-19 betasol           1372
    2  2012-05-22  atpTax           1652
    3  2012-06-02 betasol           1630
    4  2012-06-02  atpTax           1552
    5  2012-06-02     Tax           1552
    6  2012-06-07 betasol           1408
    7  2012-06-12 betasol           1471
    8  2012-06-15 betasol           1384
    9  2012-06-21 betasol           1390
    10 2012-06-22  atpTax           1252
    11 2012-06-23 betasol           1442 
```

如果我根据地区重新排列上述一个，它将如下所示。如果特定日期没有值（NA），则不应绘制。

```
 date atpTax betasol  Tax
    1 2012-05-19     NA    1372   NA
    2 2012-05-22   1652      NA   NA
    3 2012-06-02   1552    1630 1552
    4 2012-06-07     NA    1408   NA
    5 2012-06-12     NA    1471   NA
    6 2012-06-15     NA    1384   NA
    7 2012-06-21     NA    1390   NA
    8 2012-06-22   1252      NA   NA
    9 2012-06-23     NA    1442   NA 
```

我尝试使用以下 ggplot 命令，但出现 geom_path 错误。

```
 ggplot(avg_data, aes(date, AveElapsedTime)) + geom_line(aes(col=region)) + opts(axis.text.x = theme_text(angle=90, hjust=1))
    geom_path: Each group consist of only one observation. Do you need to adjust the group aesthetic?

    > str(avg_data)
    'data.frame':   11 obs. of  3 variables:
     $ date          : Factor w/ 9 levels "2012-05-19","2012-05-22",..: 1 2 3 3 3 4 5 6 7 8 ...
     $ region        : Factor w/ 3 levels "atpTax","betasol",..: 2 1 2 1 3 2 2 2 2 1 ...
     $ AveElapsedTime: int  1372 1652 1630 1552 1552 1408 1471 1384 1390 1252 ... 
```

请就此提出建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T14:04:28.983

如错误消息所示，您需要指定`group`. 像这样：

```
ggplot(avg_data, aes(date, AveElapsedTime, colour=region, group=region)) + 
  geom_point() + geom_line() 
```

![在此处输入图像描述](../Images/74a194f1aaf1b71598e04c9c658cb275.png)

# windows - 搜索注册表，我需要使用 VBscript 从服务器列表中输出路径

> ID：11613952
> 
> 赞同：0
> 
> 时间：2012-07-23T13:54:58.640
> 
> 标签：windows, vbscript, for-loop

下面的脚本工作正常，它获取我正在搜索的密钥的路径。请有人帮我找到从文本文件中读取服务器列表的方法。我正在学习 vbscript 并尝试了一些方法来读取它失败的文本文件。

```
Const HKEY_LOCAL_MACHINE = &H80000002
strComputer = "Server name" 
const REG_SZ = 1 
const REG_EXPAND_SZ = 2 
const REG_BINARY = 3 
const REG_DWORD = 4 
const REG_MULTI_SZ = 7 
strOriginalKeyPath = "SOFTWARE\VMware, Inc.\VMware Tools" 
FindKeyValue(strOriginalKeyPath) 
'------------------------------------------------------------------------- 
Function FindKeyValue(strKeyPath) 
    Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" &_        
          strComputer & "\root\default:StdRegProv") 
    errorCheck = oReg.EnumKey(HKEY_LOCAL_MACHINE, strKeyPath, arrSubKeys)        

    If (errorCheck=0 and IsArray(arrSubKeys)) then        
          For Each subkey In arrSubKeys            
          strNewKeyPath = strKeyPath & "\" & subkey            
          FindKeyValue(strNewKeyPath)        
          Next    
    End If 
oReg.EnumValues HKEY_LOCAL_MACHINE, strKeyPath, _            
          arrValueNames, arrValueTypes     
If (errorCheck=0 and IsArray(arrValueNames)) then        
           For i=0 To UBound(arrValueNames)            
          'Wscript.Echo "Value Name: " & arrValueNames(i)        
 if arrValueNames(i) = "InstallPath" then            
          strValueName = arrValueNames(i)            
          oReg.GetDWORDValue HKEY_LOCAL_MACHINE, strKeyPath, strValueName, dwValue            
          wscript.echo strComputer & "\" & strkeyPath & vbNewLine              
  end if        
  Next    
End if 
end Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:38:23.890

以下是我用来读取机器名称列表的一些代码，例如：

```
MACHINE1
MACHINE2
MACHINE3 
```

进入一个数组，然后您可以使用“For”语句循环遍历该数组。

```
pcList = readlist("C:\temp\testlist.txt")

'
' Reads in a list of PC names from a file and returns
' an array containing one PC name per member.
'
' Blank lines are ignored.
' Lines starting with ";" are treated as comments and
' are not added to the list.
'
'
function ReadList(listfile)

   const forReading = 1

   dim thelist()
   redim thelist(1)
   listLen = 0

   set theFSO = createobject("Scripting.FileSystemObject")
   set listFile = theFSo.openTextFile(listfile,forReading)

   while not listFile.atendofstream

     pcname = ltrim(rtrim(listFile.readline))

     if len(pcname)>1 and left(pcname,1)<>";" then

        if listlen = 0 then
           thelist(0) = pcname
           listlen = listlen+1
        else
           redim preserve thelist(listlen)
           thelist(listlen) = pcname
           listlen = listlen + 1
        end if

     end if

   wend

   listfile.close
   set listfile = nothing
   set thefso = nothing

   ReadList = theList

end Function 
```

# asp.net-mvc-3 - FormsAuthentication.SignOut() 不想重定向到注销视图

> ID：11613953
> 
> 赞同：0
> 
> 时间：2012-07-23T13:55:01.470
> 
> 标签：asp.net-mvc-3, forms-authentication

当用户单击注销但 mvc 拦截重定向时，我试图重定向到注销视图。

```
public ActionResult LogOff()
{
FormsAuthentication.SignOut();
return RedirectToAction("Logout", "Account"); 
}

public ActionResult Logout()
{
return View("LogOff");
} 
```

我想在注销后显示 LogOff 视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:00:54.843

我猜你已经用`Authorize`属性标记了完整的帐户控制器。您应该只装饰需要授权的操作。

# c++ - Typedef C ++中的位域/掩码

> ID：11613955
> 
> 赞同：4
> 
> 时间：2012-07-23T13:55:06.977
> 
> 标签：c++, enums, typedef, bit-fields

我在 C++ 中遇到了这个问题：我可以键入一个其值来自枚举的位域吗*？*

代码将更具解释性：

```
typedef {
 AUDIO    = 0x01,
 VIDEO    = 0x02,
 SUBTITLE = 0x04,
 DATA     = 0x08,
 GUARD,
 ALL      = 0xFF
} my_enum_e;

// I'd like to replace 'unsigned int' by 'my_enum_e' or similar
int myFunction( unsigned int mask ) 
{
  // code
}

// called like this:
myFunction( AUDIO|VIDEO|DATA ); 
```

在函数的原型中，我想将其`my_enum_e`用作输入值类型，以便在探索代码时，您可以立即知道应该放入哪些值。

现在，将原型更改为

```
int myFunction( my_enum_e mask ); 
```

使编译器抱怨转换错误。我无法通过像这样转换函数调用来修复它：

```
int myFunction( my_enum_e mask )
{
    // code
}

myFunction( (my_enum_e)(VIDEO|AUDIO|DATA) ); 
```

但我觉得这很可怕，我什至不确定它是否合法（它会截断值吗？？）。
你有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T14:13:17.287

`|`为和可能的其他运算符添加显式重载。

```
my_enum_e operator|(my_enum_e a, my_enum_e b) 
    { return my_enum_e(unsigned(a)|unsigned(b)); } 
```

可以编写一个宏，为给定的位掩码类型定义所有需要的运算符。

```
#define BITMASK_OPERATORS(T)   T operator|(T a, T b) { return T(unsigned(a)|unsigned(b)); } \
                                 T operator^(T a, T b) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:06:11.070

如何实现一个特殊的功能来处理这个：

```
template <typename Enum>
Enum bitField(unsigned bits) {
  return static_cast<Enum>(bits);
} 
```

它增加了你正在做的事情的表现力：

```
myFunction(bitField<my_enum_e>(VIDEO|AUDIO|DATA)); 
```

如果你想要更复杂，你可以这样做：

```
template <typename Enum>
struct BitField {
  Enum value;
  BitField(Enum value) : value(value) {}
  BitField operator|(Enum more) {
    return BitField(value | more);
  }
  BitField operator&(Enum more) {
    return BitField(value & more);
  }
  BitField operator~() {
    return BitField(~value);
  }
  operator Enum() {
    return value;
  }
} 
```

这将允许你写

```
myFunction(BitField<my_enum_e>(VIDEO) | AUDIO | DATA); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:00:29.043

当您执行按位运算时，编译器会将*VIDEO|AUDIO|DATA*视为整数值，因此您必须使用 *my_enum_e* 对其进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:59:40.553

我建议您查看此线程：[您使用的是 C++ 中的哪个类型安全枚举？](https://stackoverflow.com/questions/217549/which-typesafe-enum-in-c-are-you-using)`enum_rev4.6.zip`- [Boost Vault]（文件名）中提到的实现。[1](https://github.com/boost-vault/Miscellaneous)还提供了声明 a 的可能性`BOOST_BITFIELD`：

```
BOOST_BITFIELD(my_enum_e, 
  (AUDIO)    (0x01)
  (VIDEO)    (0x02)
  (SUBTITLE) (0x04)
  (DATA)     (0x08)
); 
```

然后你可以声明你的函数：

```
int myFunction( const my_enum_e & in_enum ) 
{
  if ( in_enum[AUDIO] ) ...
} 
```

那么用法就是

```
void callerFunction()
{
  my_enum_e mask;
  mask.set(my_enum_e::AUDIO);
  mask.set(my_enum_e::VIDEO | my_enum_e::SUBTITLE );
  cout << mask << " = " << hex << mask.value() << endl; // will print: AUDIO|VIDEO|SUBTITLE = 0x7
  myFunction( mask );

} 
```

api的文档不是很好。但是这些软件包附带了一个显示几种用法的测试。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-23T14:08:05.047

解决它的一种方法是`typedef int MY_FLAGS;`，然后 #define 你所有的值： `#define AUDIO 0x01`等等。这样编译器就不会抱怨，你仍然会在函数调用中获得类型：

```
int myFunction( MY_FLAGS mask );

myFunction( VIDEO|AUDIO|DATA ); 
```

# app-store-connect - 提交 Mac App 时签名无效

> ID：11613964
> 
> 赞同：1
> 
> 时间：2012-07-23T13:55:42.103
> 
> 标签：app-store-connect, code-signing, mac-app-store, appstore-sandbox

我在 Mac App Store 上有一个 1.0 版的应用程序。

后来，我升级到了 Mountain Lion GM 和 Xcode 4.4 GM。

我已经向应用程序添加了功能，我正在尝试将其作为 1.2 版提交。

它通过验证并成功提交，但我不断收到“无效二进制”和“无效签名”错误。

当我尝试

```
 codesign -dvvv myapp.app 
```

它成功打印出标识符、权限等。

我完全迷失了，因为除了代码和包含沙盒之外，什么都没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:51:54.687

我最终删除了我所有的个人资料和证书并重新下载它们。

# emacs - *shell 命令输出* 缓冲区如何保存在后台？

> ID：11613974
> 
> 赞同：9
> 
> 时间：2012-07-23T13:56:12.633
> 
> 标签：emacs

`*Shell Command Output*`当调用这样的 shell 命令时，如何告诉 emacs 不要弹出缓冲区？

```
(shell-command MY_COMMAND) 
```

当前 emacs 将当前窗口分成两部分，显示（大部分不相关的）输出缓冲区。对我来说，如果我以后愿意的话，以后再看就足够了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T15:08:01.103

也许使用`shell-command`是问题的根源。我想我找到了一个可行的解决方案`call-process`，尽管可能有一种更优雅的方式：

```
(call-process-shell-command
 "cat ~/.emacs.d/init.el"
 nil "*Shell Command Output*" t
 ) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T14:08:13.830

`shell-command`接受一个可选参数`OUTPUT-BUFFER`，您可以在其中指定要输出到的缓冲区。如果它是`t`（实际上不是缓冲区名称而不是`nil`），它将在当前缓冲区中输出。所以我们把它包装成 a`with-temp-buffer`并且永远不必打扰它：

```
(with-temp-buffer
  (shell-command "cat ~/.emacs.d/init.el" t)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-27T23:01:34.507

根据我的经验，如果**shell 命令本身**没有输出，那么 emacs`*Shell Command Output*`缓冲区将不会弹出。

因此，要避免输出缓冲区，请使命令的输出静音。

一种简单的方法是：

*   添加`" > /dev/null 2>&1"`到任何 shell 命令的末尾。

（警告：我不确定是否`/dev/null`存在 100% 可以运行 emacs 的平台，但在每个 Linux 发行版上都应该没问题。）

如果对 elisp 函数的调用`shell-command`是在 elisp 脚本中，那么您可以更改：

```
(shell-command cmd) 
```

对此：

```
(shell-command (concat cmd " > /dev/null 2>&1")) 
```

如果您偶尔确实想监视输出，那么您可以创建一个通过 抑制输出的`/dev/null`包装函数和一个不抑制输出的包装函数，并根据需要在它们之间切换。

上述建议在*lcy01-07 的 2017-09-20 的 GNU Emacs 24.5.1 (x86_64-pc-linux-gnu, GTK+ Version 3.18.9) 上进行了测试，由 Debian 修改*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-12T13:29:58.810

此实用程序功能可能会有所帮助。它返回shell命令的实际值

```
(defun shell-command-as-string (cmd)
  (with-temp-buffer
    (shell-command-on-region (point-min) (point-max)
                             cmd t)
    (buffer-string))) 
```

# android - 为什么我在设备上运行时看不到我的应用程序创建的文件

> ID：11613976
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:22.220
> 
> 标签：android, file, device

我正在开发 Android 应用程序，我想要有日志文件。我可以在模拟器上创建日志文件并查看它，但是当我在设备上运行应用程序时，不会生成日志文件。不仅如此，在/data/data/下没有创建包名的目录。

```
FileOutputStream   loggerFile; 
OutputStreamWriter LOGGER; 
Calendar c ;
private static String LOG_FILE_NAME = "QuickPark.log";
loggerFile = openFileOutput(LOG_FILE_NAME,
                MODE_APPEND);           
        LOGGER = new OutputStreamWriter(loggerFile);

        LOGGER.write("Application started to run on " + c.get(Calendar.DATE) + " -- " + c.get(Calendar.HOUR_OF_DAY)); 
```

更多说明：我在设备上运行此代码，连接到它并没有看到带有包名的目录。

请帮助我了解我所缺少的。

谢谢，杜迪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:02:24.553

据我所知，您通常无权访问 Android 设备上的 /data/data，前提是它已植根

您将不得不在您的应用程序中编写一些代码来访问/复制文件，这是一个使用 sqlite db 完成的示例

[DDMS 文件资源管理器无法访问数据\数据 (HTC Desire HD)](https://stackoverflow.com/questions/4935388/ddms-file-explorer-cant-access-data-data-htc-desire-hd)

或者首先将日志文件放在 SDCard 上

# jquery - jQuery/JavaScript：使用动态添加内容进行克隆

> ID：11613977
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:24.053
> 
> 标签：jquery, clone

我在这里有一个站点，用户可以在其中单击一些 div。然后我使用以下代码向它添加一个“X”：

```
function addEx( elem, insertClass ) {
        var element = $( elem );
        var newInsertClass = insertClass.replace('.', '');
        var insert = "<span class='" + newInsertClass + "'> X </span>";

        element.click(function(){
            var $this = $(this);

            if( $this.text().indexOf( "X" ) >= 0 ) {
                var id = $this.attr( "id" );
                $( "#" + id + " " + insertClass ).remove();
            } else {
                $this.append( insert );
            }   
        })
    } 
```

如您所见，如果“X”已经存在，我将其删除。如果它不存在，我添加它。这工作正常。

用户还可以单击“获取结果”按钮。然后将用户单击的 div 与正确答案进行比较。据此，我将类添加到正确单击、过多或忘记单击的 div 中。这也有效，但内容（“X”）会丢失。所以我可以看到我为这些类提供的 CSS-stlying，但是在用克隆替换原始内容后，div 内的“X”丢失了。为了添加类，我使用以下代码：

```
var test = $(".test");
var clone = test.clone(true,true);

function correction() {
    clone.children().filter(function() {
        return $.inArray('#' + this.id, forgotten) != -1;
    }).addClass("forgotten").end().filter(function() {
         return $.inArray('#' + this.id, toomuch) != -1;
    }).addClass("toomuch").end().filter(function() {
         return $.inArray('#' + this.id, correct) != -1;
    }).addClass("right");

   test.replaceWith(clone);                   
 } 
```

我在这里克隆元素，然后在克隆上添加适当的类并用克隆替换原来的类。

所以我的问题是：如何防止这种内容丢失？我猜这是因为“X”是动态添加的？或者我还有一个以上的元素`.test`- 这可能是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:02:42.423

**John Resig**回答了一个关于使用 jQuery 克隆对象的[问题。](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)它可能会帮助你

# javascript - 有谁知道在固定大小的弹出矩形上设置 x/y 位置的简单方法

> ID：11613979
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:27.510
> 
> 标签：javascript, jquery, popup

我需要有一个简单的弹出矩形，最好使用 jQuery 或类似的，它只是显示一个按比例缩小的画布（例如，1:2，代表一个 1000 像素 x 1600 像素的浏览器窗口），可以单击它来获取 x/ y 在整个窗口中的位置。

这实际上只是一种简单、直观的方式来帮助客户在页面上定位内容（它必须完全由他们控制，而不是在网格上）。

有没有人知道那里已经做了这样的事情？（我正在寻找 wordpress 管理员，但应该可以做任何事情）。

编辑以澄清。如果没有任何东西可以做到这一点，我认为这可能会起作用：

如果您单击一个按钮，jQ 一个绝对定位的 div（灯箱样式），其大小与我谈到的一样，然后在单击它时关闭 div，但以某种方式获取单击它的 div 中的 x/y 位置，然后缩放它有一些数学...

我认为我在这里不知道该怎么做是获取相对于特定 div 大小的 x/y 位置。

抱歉，我认为这可能是一个措辞可怕的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:59:32.020

```
$('#popup').css("top", ($(window).height()) / 2 + $(window).scrollTop() + "px");
$('#popup').css("left", ($(window).width()) / 2 + $(window).scrollLeft() + "px"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:04:45.540

你的画布需要设置为

```
position: relative 
```

那么这个元素内的任何东西都可以设置为

```
position : absolute
top:  [your Y position from top side of the canva]px;
left: [your X position from left side of the canva]px; 
```

绝对位置总是指第一个没有默认定位的元素，在这种情况下是相对的。

# oop - 应用层与 UI

> ID：11613983
> 
> 赞同：3
> 
> 时间：2012-07-23T13:56:34.933
> 
> 标签：oop, design-patterns

向你们这些拥有真实知识的异想天开的居民问好，

有一个快速的你会：

我想知道应用程序层是否类似于 UI 层？

我正在阅读 Evans DDD 的书，他一直在提到应用层，但没有明确提到 UI，所以我想知道。

有人可以帮我区分一下吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T14:11:06.003

**应用层**包含应用行为，即当用户点击某处时会发生什么。在应用程序层前面通常有一个**表示层**，它定义了应用程序的外观和使用的特定 GUI 小部件。这些共同构成了 UI。

域 <- 应用程序 <- 表示

[DDD](http://www.methodsandtools.com/archive/archive.php?id=97)主要关注领域层和形成无处不在的模型/语言。它通常不关心层是如何定义的，除了非领域概念被排除在领域层和其他层（如应用层）之外。

# php - PHP：如何遍历一个类的所有对象？

> ID：11613986
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:44.943
> 
> 标签：php, class, object

我有一个代码，其中一个数组包含对象，其中包含对象，例如：

```
<?php
class person {
    public $name;
    public $foods=array();
}
class food {
    public $foodnames=array() ;
}
$peoplearray[$name] = new person;
$peoplearray[$name]->name = 'john' ;
$peoplearray[$name]->foods[$key] = new food;
$peoplearray[$name]->foods[$key]->foodnames[$key] = 'ice cream' ;
$peoplearray[$name]->foods[$key] = new food;
$peoplearray[$name]->foods[$key]->foodnames[$key] = 'banana' ;

$peoplearray[$name] = new person;
$peoplearray[$name]->name = 'julie' ;
$peoplearray[$name]->foods[$key] = new food;
$peoplearray[$name]->foods[$key]->foodnames[$key] = 'chocolate' ;
$peoplearray[$name]->foods[$key] = new food;
$peoplearray[$name]->foods[$key]->foodnames[$key] = 'coffee' ;
$peoplearray[$name]->foods[$key] = new food;
$peoplearray[$name]->foods[$key]->foodnames[$key] = 'rice' ;
?> 
```

现在我也需要遍历食物类中的所有对象，以便获取它们的属性。有谁知道这样做最有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:02:57.273

在类 food 中声明一个静态属性，并在构建时将你的食物对象放入其中：

```
class food {
  public static $collection = array();
  // other properties ...

  public function __construct() {
    // Stuff
    self::$collection[] = $this;
  }
}

// Create foo objects
$f = new food();

// Iterate
foreach(food::$collection as $foodobj) {
  // Stuff
} 
```

# macos - 如何使用 Cocoa 获取序列号（处理器托盘）

> ID：11613987
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:46.737
> 
> 标签：macos, cocoa, serial-number

通过键入：system_profiler SPHardwareDataType | grep 'Serial Number' 我得到 2 个序列号。

第一个（“序列号（系统）”）可以输入`NSString`：

```
(NSString *)IORegistryEntryCreateCFProperty(IORegistryEntryFromPath(kIOMasterPortDefault, "IOService:/"), CFSTR(kIOPlatformSerialNumberKey), kCFAllocatorDefault, 0) 
```

我没有找到如何获得第二个：序列号（处理器托盘）

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T11:29:50.713

以更优雅的方式:)

```
#import <Foundation/Foundation.h>

int main()
{
    CFTypeRef aCFProperty;

    if ((aCFProperty = IORegistryEntryCreateCFProperty(IORegistryEntryFromPath(kIOMasterPortDefault, "IOService:/"), CFSTR("processor-memory-board-serial-number"), kCFAllocatorDefault, 0)) != NULL )
    {
        NSLog(@"Processor tray Serial Number : %@", aCFProperty);
        CFRelease(aCFProperty);
    }

    return 1;
} 
```

然后：clang SnTray.m -framework IOKit -framework Foundation -o SnTray.o

然后./SnTray.o

我不能做更多:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T20:10:00.030

回答：

```
(NSString *)IORegistryEntryCreateCFProperty(IORegistryEntryFromPath(kIOMasterPortDefault, "IOService:/"), CFSTR("processor-memory-board-serial-number"), kCFAllocatorDefault, 0); 
```

# java - 如何从类加载器获取类路径？

> ID：11613988
> 
> 赞同：56
> 
> 时间：2012-07-23T13:56:47.250
> 
> 标签：java, classloader, contextclassloader

我正在使用一些第三方代码，当给定“-classpath”命令行参数时，它不会设置 java.class.path，而是创建一个类加载器，将命令行指定类路径上的项目的所有 url 添加到类加载器，然后将其设置为上下文类加载器。在我编写的这段代码的插件类中，我得到了这个类加载器的一个实例，并且不知何故需要使用它来取回底层的类路径，以便我可以在调用 JavaCompiler.getTask(... ) 并即时编译一些其他代码。但是，似乎无论如何都无法从 ClassLoader 获取 ClassPath，并且由于 java.class.path 未设置，我似乎无法访问应用程序最初调用的底层类路径......有什么想法吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-23T14:01:33.807

如果类加载器使用 URL，它必须是`URLClassloader`. 您可以访问的是为它定义**类路径**及其父级的 URL `ClassLoader`。

要获取 URL，只需执行以下操作：

```
((URLClassLoader) (Thread.currentThread().getContextClassLoader())).getURLs() 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-08-03T11:13:08.637

今天枚举类路径最简洁的方法是使用[ClassGraph](https://github.com/classgraph/classgraph)库（我是作者）。请注意，如果您希望您的代码在今天具有可移植性，那么读取`java.class.path`属性或调用的旧答案`((URLClassLoader) (Thread.currentThread().getContextClassLoader())).getURLs()`是非常不合适的，因为许多运行时环境不再使用`java.class.path`，和/或它们的类加载器不扩展`URLClassLoader`，和/或它们使用一些晦涩的机制用于扩展类路径（如`Class-Path:`jar 清单文件中的属性），和/或您的代码可以作为 JDK 9+ 中的模块运行（或者您的代码将在 JDK9+ 中的传统类路径上运行，但标准 JDK 类加载器用于传统的类路径甚至`URLClassLoader`不再扩展）。

ClassGraph 自动处理大量的[类路径规范机制和类加载器实现](https://github.com/classgraph/classgraph/wiki/Classpath-Specification-Mechanisms)。对于大多数受支持的类加载器，已经为 ClassGraph 编写了自定义反射代码，以从类加载器获取类路径（这是必需的，因为`ClassLoader`API 没有任何获取类路径的标准机制）。您可以为此编写自己的代码，但它可能只支持`URLClassLoader`而无需花费大量精力——因此最好只使用 ClassGraph，因为工作已经为您完成。

要获取类路径（以及添加到模块路径的非系统模块化 jar），只需调用：

```
List<URI> classpath = new ClassGraph().getClasspathURIs(); 
```

请注意，在 Java 9+ 中，模块（或 jlink'd jars）可能会出现在带有`jrt:`URI 的列表中，您无法直接使用它（除了使用 ClassGraph 从中读取资源和类之外，因为 ClassGraph 还可以使用JPMS API 来访问这些资源和类）。您还可以使用 ClassGraph 枚举或扫描类路径中的所有类和/或所有资源（请参阅[ClassGraph wiki](https://github.com/classgraph/classgraph/wiki)）。

在 Java 9+ 的模块化项目中，您可能还希望获取[`ModuleReference`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/module/ModuleReference.html)系统中可见模块的对象列表。这些可以通过调用以下命令来获得（这[`ModuleRef`](https://github.com/classgraph/classgraph/wiki/API:-ModuleRef)是一个向后兼容的包装器`ModuleReference`，因此您可以在 JDK 7/8 上编译代码，但仍然可以利用 JDK 9+ 上的模块功能）：

```
List<ModuleRef> modules =
    new ClassGraph()
        .enableSystemPackages() // Optional, to return system modules
        .getModules(); 
```

或者，您可以通过调用以下命令获取传递到命令行（ 、 等）的实际模块路径`--module-path`，`--patch-module`并返回对象列表：`--add-exports`[`ModulePathInfo`](https://github.com/classgraph/classgraph/wiki/API:-ModuleInfo#modulepathinfo)

```
List<ModulePathInfo> modulePathInfo = new ClassGraph().getModulePathInfo(); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-12T06:42:42.653

以供将来参考，以防您需要将类路径传递给`ProcessBuilder`：

```
StringBuffer buffer = new StringBuffer();
for (URL url :
    ((URLClassLoader) (Thread.currentThread()
        .getContextClassLoader())).getURLs()) {
  buffer.append(new File(url.getPath()));
  buffer.append(System.getProperty("path.separator"));
}
String classpath = buffer.toString();
int toIndex = classpath
    .lastIndexOf(System.getProperty("path.separator"));
classpath = classpath.substring(0, toIndex);
ProcessBuilder builder = new ProcessBuilder("java",
    "-classpath", classpath, "com.a.b.c.TestProgram"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-21T02:29:26.410

如果其他答案不起作用，请尝试以下操作：

```
ClassLoader cl = ClassLoader.getSystemClassLoader();
URL[] urls = ((URLClassLoader) cl).getURLs();
for (URL url: urls) {
    System.out.println(url.getFile());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T13:37:31.187

将此代码放到一个空的 jsp 页面中，以查看在每个级别加载的 classLoader 层次结构和关联的 jar。

下面的 visit() 方法也可以单独使用

```
<%!
    public void visit(StringBuilder sb, int indent, ClassLoader classLoader) {
        if (indent > 20 || classLoader == null)
            return;
        String indentStr = new String(new char[indent]).replace("\0", "    ");
        sb.append("\n");
        sb.append(indentStr);
        sb.append(classLoader.getClass().getName());
        sb.append(":");
        if (classLoader instanceof java.net.URLClassLoader) {
            java.net.URL[] urls = ((java.net.URLClassLoader)classLoader).getURLs();
            for (java.net.URL url : urls) {
                sb.append("\n");
                sb.append(indentStr);
                sb.append(url);
            }
        }
        sb.append("\n");
        visit(sb, indent + 1, classLoader.getParent());
    }

%>

<%
StringBuilder sb = new StringBuilder();
visit(sb,1,this.getClass().getClassLoader());
%>
<pre>
<%=sb%>
</pre> 
```

# ruby - Ruby 在 POSIX 中是否有一些 API，例如 select()？

> ID：11613989
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:53.037
> 
> 标签：ruby

例如，如果我创建一些 UDP 套接字来接收不同端口的数据。我怎样才能在一个进程中同时等待它们？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:08:45.823

[`Kernel#select`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-select)是你所追求的：

> 调用 select(2) 系统调用。它监视给定的 IO 对象数组，等待一个或多个 IO 对象准备好读取，准备好写入，并有相应的未决异常，并返回一个包含这些 IO 对象数组的数组。如果给定了可选的超时值并且在超时秒内没有准备好 IO 对象，它将返回 nil。

# sql - 汇总/递归加法 SQL Server 2008

> ID：11613990
> 
> 赞同：0
> 
> 时间：2012-07-23T13:56:57.290
> 
> 标签：sql, sql-server-2008, tsql

我有一个`with rollup`输出数据的查询（查询有点忙，但如有必要我可以发布）

```
range    subCounts    Counts    percent
1-9      3            100       3.0
10-19    13           100       13.0
20-29    30           100       33.0
30-39    74           100       74.0
NULL     100          100       100.0 
```

怎么可能保持一个运行总和`percent`？假设我需要找到底部的 15 个百分位数，在这种情况下`3+13=16`，我希望最后一行返回读取

```
range    subCounts    counts    percent
10-19    13           100       13.0 
```

**EDIT1：**这里是查询

```
select '$'+cast(+bin*10000 + ' ' as varchar(10)) + '-' + cast(bin*10000+9999 as varchar(10)) as bins, 
    count(*) as numbers,
    (select count(distinct patient.patientid) from patient 
    inner join tblclaims on patient.patientid = tblclaims.patientid
    and patient.admissiondate = tblclaims.admissiondate
    and patient.dischargedate = tblclaims.dischargedate
    inner join tblhospitals on tblhospitals.hospitalnpi = patient.hospitalnpi
    where (tblhospitals.hospitalname = 'X') 
    ) as Totals
    , round(100*count(*)/cast((select count(distinct patient.patientid) from patient 
    inner join tblclaims on patient.patientid = tblclaims.patientid
    and patient.admissiondate = tblclaims.admissiondate
    and patient.dischargedate = tblclaims.dischargedate
    inner join tblhospitals on tblhospitals.hospitalnpi = patient.hospitalnpi
    where (tblhospitals.hospitalname = 'X')) as float),2) as binsPercent

from
(

select tblclaims.patientid, sum(claimsmedicarepaid) as TotalCosts, 
    cast(sum(claimsmedicarePaid)/10000 as int) as bin
    from tblclaims inner join patient on patient.patientid = tblclaims.patientid
    and patient.admissiondate = tblclaims.admissiondate 
    and patient.dischargedate = tblclaims.dischargedate
    inner join tblhospitals on patient.hospitalnpi = tblhospitals.hospitalnpi
    where tblhospitals.hospitalname = 'X'
    group by tblclaims.patientid
)   as t 
group by bin with rollup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:13:45.337

This isn't exactly what i was looking for, but it's on the same track: [http://blog.tallan.com/2011/12/08/sql-server-2012-windowing-functions-part-1-of-2-running-and-sliding-aggregates/](http://blog.tallan.com/2011/12/08/sql-server-2012-windowing-functions-part-1-of-2-running-and-sliding-aggregates/) and [http://blog.tallan.com/2011/12/19/sql-server-2012-windowing-functions-part-2-of-2-new-analytic-functions/](http://blog.tallan.com/2011/12/19/sql-server-2012-windowing-functions-part-2-of-2-new-analytic-functions/) - check out PERCENT_RANK CUME_DIST PERCENTILE_CONT PERCENTILE_DISC

Sorry for the lame answer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:03:58.170

好的，所以对于任何可能将此作为参考的人，我都知道我需要做什么。

我添加`row_number() over(bin) as rownum`到查询中并将所有这些保存为视图。

然后我用

```
SELECT *,
          SUM(t2.binspercent) AS SUM
FROM t t1
INNER JOIN t t2 ON t1.rownum >= t2.rownum
GROUP BY t1.rownum,
         t1.bins, t1.numbers, t1.uktotal, t1.binspercent
ORDER BY t1.rownum 
```

通过加入 t1.rownum >=t2.rownum 你可以获得滚动计数之类的东西。

# c - 包含苹果的网格

> ID：11613992
> 
> 赞同：1
> 
> 时间：2012-07-23T13:57:04.847
> 
> 标签：c, algorithm, optimization, structure

我在编程论坛上发现了这个问题：

**给出了一个由 N*M 个单元组成的表格，每个单元有一定数量的苹果。你从左上角开始。在每个步骤中，您可以向下或向右移动一个单元格。如果您从左上角移动到右下角，请设计一种算法来找到您可以收集的最大苹果数。**

我想到了三种不同的复杂性[在时间和空间方面]：

方法1[最快]：

```
for(j=1,i=0;j<column;j++)
    apple[i][j]=apple[i][j-1]+apple[i][j];
for(i=1,j=0;i<row;i++)
    apple[i][j]=apple[i-1][j]+apple[i][j];

for(i=1;i<row;i++)
{
    for(j=1;j<column;j++)
    {
        if(apple[i][j-1]>=apple[i-1][j])
            apple[i][j]=apple[i][j]+apple[i][j-1];
        else
            apple[i][j]=apple[i][j]+apple[i-1][j];
    }
}
printf("\n maximum apple u can pick=%d",apple[row-1][column-1]); 
```

方法二：

结果是所有插槽最初为 0 的临时数组。

```
int getMax(int i, int j)
{
    if( (i<ROW) && (j<COL) )
    {
        if( result[i][j] != 0 )
            return result[i][j];
        else
        {
            int right = getMax(i, j+1);
            int down = getMax(i+1, j);

            result[i][j] = ( (right>down) ? right : down )+apples[i][j];
            return result[i][j];
        }
    }
    else
        return 0;
} 
```

方法3[使用最少的空间]：

它不使用任何临时数组。

```
int getMax(int i, int j)
{
    if( (i<M) && (j<N) )
    {
            int right = getMax(i, j+1);
            int down = getMax(i+1, j);
            return apples[i][j]+(right>down?right:down);
    }
    else
        return 0;
} 
```

**我想知道解决这个问题的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T14:06:31.960

方法 1 和 2 之间几乎没有区别，方法 1 可能稍微好一点，因为它不需要堆栈来进行方法 2 使用的递归，因为这会倒退。

方法 3 具有指数时间复杂度，因此它比其他两种复杂度为 O(rows*columns) 的方法要差得多。

您可以制作方法 1 的变体，沿对角线继续使用 O(max{rows,columns}) 额外空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:12:49.507

## 改进第一种方法

你真的需要临时数组是 N 乘 M 吗？

不。

如果初始二维数组有 N 列和 M 行，我们可以用长度为 M 的一维数组来解决这个问题。

### 方法

在您的第一种方法中，您可以随时保存所有小计，但是当您移动到下一列时，您实际上只需要知道左侧和上方单元格的苹果值。一旦你确定了这一点，你就不会再看那些以前的单元格了。

然后解决方案是在您从下一列开始时改写旧值。

代码如下所示（我实际上不是 C 程序员，请耐心等待）：

### 编码

```
int getMax()
{
    //apple[][] is the original apple array
    //N is # of columns of apple[][]
    //M is # of rows of apple[][]
    //temp[] is initialized to zeroes, and has length M

    for (int currentCol = 0; currentCol < N; currentCol++)
    {
        temp[0] += apple[currentCol][0]; //Nothing above top row

        for (int i = 1; i < M; i++)
        {
            int applesToLeft = temp[i];
            int applesAbove = temp[i-1];

            if (applesToLeft > applesAbove)
            {
                temp[i] = applesToLeft + apple[currentCol][i];
            }
            else
            {
                temp[i] = applesAbove + apple[currentCol][i];
            }
        }
    }

    return temp[M - 1];
} 
```

注意：没有任何理由将 applesToLeft 和 applesAbove 的值实际存储到局部变量中，您可以随意使用 ? : 赋值的语法。

此外，如果列数少于行数，则应旋转它以使一维数组的长度更短。

这样做是对您的第一种方法的直接改进，因为它可以节省内存，并且迭代相同的一维数组确实有助于缓存。

我只能想到一个使用不同方法的原因：

## 多线程

为了在这个问题上获得多线程的好处，你的第二种方法是正确的。

在您的第二种方法中，您使用备忘录来存储中间结果。

如果您使您的备忘录线程安全（通过锁定或使用无锁哈希集），那么您可以启动多个线程，所有线程都试图获得右下角的答案。

[// 编辑：实际上由于将整数分配给数组是一个原子操作，我认为您根本不需要锁定]。

对 getMax 的每次调用随机选择是先执行左侧 getMax 还是先执行 getMax。

这意味着每个线程处理问题的不同部分，并且由于有备忘录，它不会重复不同线程已经完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:08:15.017

就时间而言，解决方案 1 是最好的，因为没有递归函数。递归函数的调用需要时间

# windows - 如何在 Windows 设备管理器下导出设备的属性 -> 详细信息？

> ID：11613997
> 
> 赞同：1
> 
> 时间：2012-07-23T13:57:26.420
> 
> 标签：windows, device, administrator

在 Windows 7 或同等系统下：

我想一次将所有这些信息导出到 txt：

转到控制面板 -> 设备管理器 -> 磁盘驱动器 -> Volume0 -> 属性 -> 详细信息：

下拉菜单中的所有属性，全部导出而不是自己一个一个做，比如‘设备描述’、‘硬件ID’等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:10:19.873

它很容易做。如果是 windows XP 或 7 Go

```
Start-Programs-Accessories-System tools-System Information 
```

或者

```
Start-Run-msinfo32.exe-ok-System Information 
```

现在转到`File-Export-Select Directory-Save` 包含系统信息的文本文件将保存到目录！

参考

[如何保存](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/msinfo_save_text.mspx?mfr=true)
[如何打开系统信息](http://support.microsoft.com/kb/308549)

# llvm - 如何使 LLVM 在不同的查看器中显示图形？

> ID：11613999
> 
> 赞同：0
> 
> 时间：2012-07-23T13:57:37.540
> 
> 标签：llvm

LLVM 可以以[Graphviz](http://www.graphviz.org/)的“点”格式创建图形，并自动调用查看器来显示它们。默认情况下，它用于`dotty`显示这些图表。我知道我可以更改它以使用不同的查看器，但我无法找到有关如何执行此操作的精确说明。

我怎样才能让它用不同的查看器打开图表？

我在 Linux 上运行，但也对 Windows 的答案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:54:30.270

我发现我应该更改`CMakeCache.txt`构建文件夹中的文件。例如，要使用[XDot](http://code.google.com/p/jrfonseca/wiki/XDot)而不是 dotty，我编辑了`LLVM_PATH_XDOT_P`该文件中的属性以指向我`xdot.py`文件的完整路径。

现在，在重建项目后，它会成功打开备用查看器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:54:54.377

我只需要这样做。我设法通过一种解决方法做到了这一点：备份了 dotty（以防万一）并创建了一个从 dotty 到 XDot 的链接。

```
cp /usr/bin/dotty /usr/bin/dotty_copy
ln -s /usr/bin/dotty /usr/bin/xdot 
```

我相信您也可以在配置步骤中设置一些变量（可能是 LLVM_PATH_DOTTY），但我从未尝试过，因为我不想重新编译 LLVM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T14:21:21.027

您可以尝试破解该[`DisplayGraph`功能](http://llvm.org/doxygen/GraphWriter_8cpp_source.html#l00075)或修改 makefile，直到您设法启用其中一个`#ifdef`.`DisplayGraph`