# StackOverflow 问答 10379000-10379999

# sql - 处理表参数中存在的不同条件以用作“AND”而不是“OR”

> ID：10379001
> 
> 赞同：0
> 
> 时间：2012-04-30T05:44:12.803
> 
> 标签：sql, cross-join

我有一个页面，用户在其中动态添加搜索条件以过滤掉记录。我将这些条件发送到 TVP 中的存储过程。现在我需要编写一个查询，将这些过滤器用作“AND”而不是“OR”

考虑一个学生表的例子

```
ID          Name         Marks
----------- ---------    -------
2           bab          65
4           bad          75
6           baf          85 
```

我在 TVP 中获得了 Stored proc 的条件（我正在发送列和运算符的 ID，但为了清楚起见，我在本示例中使用了列名和运算符）

```
 Column     Operator    Value
----------- ---------   -------
Name        Contains    a
Marks       >=          75 
```

现在我需要使用这个 TVP 从学生表中过滤掉记录，在这个例子中，学生表的最后 2 行将显示给用户。

谁能帮我写一个查询，我尝试在学生表和TVP之间进行交叉连接，但查询是ORing而不是TVP中的条件

**示例查询：**

```
 DECLARE @tmpCond TABLE
(
    ColumnId SMALLINT,
    OperatorId SMALLINT,
    Value VARCHAR(10)
)

INSERT INTO @tmpCond
        ( ColumnId ,
          OperatorId ,
          Value
        )
VALUES  ( 1,1,'a')
        ,(2,2,'75')

SELECT * FROM dbo.Student A
CROSS JOIN @tmpCond B
WHERE 
    (B.ColumnId = 1 AND B.OperatorId = 1 AND A.NAME LIKE '%'+B.Value+'%')
    OR
    (B.ColumnId = 2 AND B.OperatorId = 2 AND A.Marks >= B.Value) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:09:32.543

您需要执行以下操作：

1.  将初步查询创建**为 string**，缺少 where 参数：`query = 'select * from student where xxx order by name, marks'`。我们将替换`xxx`为适当的内容。
2.  为查询部分创建一个变量`where_part = ''`
3.  使用游标遍历 TVP 中的每一行
4.  对于`column, operator, value`TVP 中的每个，构建一个类似的字符串`name + operator + value + ' and '`并将其附加到`where_part`.
5.  从 TVP 处理完所有行后，删除最后一个`' and '`，在这个意义上：'条件和条件和条件~~和~~'。
6.  替换`'xxx'`为`query`_`where_part`
7.  运行`exec(@query)`（tsql，其他数据库有不同的语法）。另请参阅[本文](http://www.dba-sql-server.com/sql_server_tips/t_super_sql_460_dynamic_sql.htm)和 google 以获取“存储过程中的动态 sql”。

# c# - Asp.Net WebApi 上的自定义授权属性

> ID：10379002
> 
> 赞同：1
> 
> 时间：2012-04-30T05:44:31.837
> 
> 标签：c#, asp.net-web-api, restful-authentication

使用 ASP.Net Web Api 授权用户时如何返回值？我尝试在 Authorize 属性上覆盖 OnAuthorize，但方法类型是“void”，所以我不能返回任何值，或者我应该将我想要的值附加到标头上作为响应标头？

这是我想要实现的目标：

1.  用户传递 api 密钥和共享密钥
2.  当用户被授权时，自定义属性会返回用户的Id和Name
3.  Id 将用于作为参数传递 Rest Methods

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T17:32:54.473

此代码示例可能会对您有所帮助。

```
public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
{
    base.OnAuthorization(actionContext);
    IManageUsers manageUser = new ManageUsers();
    //get authentication token from header + email
    string authenticationToken = string.Empty;
    string email = string.Empty;
    if (actionContext.Request.Headers.GetValues("email") != null && (!string.IsNullOrEmpty(Convert.ToString(actionContext.Request.Headers.GetValues("email").FirstOrDefault()))))
    {
        if (actionContext.Request.Headers.GetValues("authenticationToken") != null && (!string.IsNullOrEmpty(Convert.ToString(actionContext.Request.Headers.GetValues("authenticationToken").FirstOrDefault()))))
        {
            authenticationToken = Convert.ToString(actionContext.Request.Headers.GetValues("authenticationToken").FirstOrDefault());
            email = Convert.ToString(actionContext.Request.Headers.GetValues("email").FirstOrDefault());
            //check if user is activated 
            User user = manageUser.GetByEmail(email);
            if (user != null)
            {
                //if user is not authentication
                if (user.AuthenticationStatus != AuthenticationStatus.Authenticated)
                {
                    HttpContext.Current.Response.AddHeader("AuthenticationStatus", "NotAuthenticated");
                    actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Forbidden);
                    return;
                }

                //user is authentication, now check authorization
                string authenticationTokenPersistant = user.AuthorizationToken;
                //if length is not equal to the saved token
                var authenticationTokenEncrypted = manageUser.EncryptAuthenticationTokenAes(authenticationTokenPersistant, user.Key, user.IV);
                if (authenticationToken != authenticationTokenEncrypted)
                {
                    HttpContext.Current.Response.AddHeader("Email", email);
                    HttpContext.Current.Response.AddHeader("authenticationToken", authenticationToken);
                    HttpContext.Current.Response.AddHeader("AuthenticationStatus", "NotAuthorized");
                    actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.Forbidden);
                    HttpContext.Current.Response.AddHeader("ErrorMessage", "Invalid token");
                    return;
                }

                HttpContext.Current.Response.AddHeader("Email", email);
                HttpContext.Current.Response.AddHeader("authenticationToken", authenticationToken);
                HttpContext.Current.Response.AddHeader("AuthenticationStatus", "Authorized");
                actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.OK);
            }
            else
            {
                actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.PreconditionFailed);
                HttpContext.Current.Response.AddHeader("ErrorMessage", "Email does not exist");
                return;
            }
        }
        else
        {
            actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.PreconditionFailed);
            HttpContext.Current.Response.AddHeader("ErrorMessage", "Please provide authentication token");
            return;
        }
    }
    else
    {
        actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.PreconditionFailed);
        HttpContext.Current.Response.AddHeader("ErrorMessage", "Please provide email address");
        return;
    }
} 
```

# android - 想要在安装应用程序时有声音

> ID：10379003
> 
> 赞同：0
> 
> 时间：2012-04-30T05:44:31.710
> 
> 标签：android, broadcastreceiver

我想在安装我的应用程序时发出声音。我通过在我的应用程序中使用广播接收器来尝试这个。在广播接收器中，我正在运行服务以启动媒体播放器。但是我无法进入广播接收器的接收方法。但如果我尝试安装另一个应用程序，我会收到该事件。如何仅在我的应用程序中获取事件。我在清单文件中的权限

```
<uses-permission android:name = "android.permission.INSTALL_PACKAGES"/>
    <uses-permission android:name="android.permission.RESTART_PACKAGES"/>

<receiver android:name=".DemoReceiver" >
        <intent-filter >
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <action android:name="android.intent.action.PACKAGE_INSTALL" />
             <action android:name="android.intent.action.PACKAGE_CHANGED" />
              <action android:name="android.intent.action.PACKAGE_RESTARTED" />               
    <action android:name="android.intent.action.PACKAGE_REPLACED"/>

    <action android:name="android.intent.action.USER_PRESENT"/>
    <data android:scheme="package"/>
        </intent-filter>
    </receiver> 
```

并在广播接收器中

```
import android.content.BroadcastReceiver; 
```

导入android.content.Context；导入android.content.Intent；

```
public class DemoReceiver extends BroadcastReceiver {
     @Override
     public void onReceive(final Context context, final Intent bootintent) {
         System.out.println("entered broadcast receiver");
           if(bootintent.getAction() != null)
         {               
              context.startService(new Intent(context, DemoService.class));
         }

     }
     } 
```

服务是

```
public class DemoService extends Service {

 MediaPlayer player;

 private class LogTask extends TimerTask {
  public void run() {
   Log.i(LOGTAG, "scheduled");
  }
 }
 private LogTask mLogTask;

 @Override
 public IBinder onBind(final Intent intent) {
  return null;
 }

 @Override
 public void onCreate() {
  super.onCreate();
  Log.v("StartServiceAtBoot", "StartAtBootService Created");
  player=MediaPlayer.create(this, R.raw.sirensound);
  player.setLooping(false);
 }

 public void onStart(Intent intent, int flags, int startId) {

       Log.v("StartServiceAtBoot", "StartAtBootService -- onStartCommand()");        

       player.start();

      }
 @Override
      public void onDestroy() {
            super.onDestroy();

            Log.v("StartServiceAtBoot", "StartAtBootService Destroyed");

      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:59:45.103

如果您想从您的应用程序执行任何代码，它必须已经安装，所以我认为..当您的应用程序安装时，您无法从您的应用程序接收广播。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:03:05.247

在我的应用程序中，当用户在我的应用程序运行时摇动设备时，我设法创建了声音......

```
public class SensorTest extends Activity implements SensorEventListener,
    OnCompletionListener {
private SensorManager sensorManager;
private boolean color = false;
private long lastUpdate;
private MediaPlayer mMediaplayer;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    sensorManager.registerListener(this, sensorManager
            .getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);
    lastUpdate = System.currentTimeMillis();
}

public void onSensorChanged(SensorEvent event) {
    if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
        float[] values = event.values;

        float x = values[0];
        float y = values[1];
        float z = values[2];

        float accelationSquareRoot = (x * x + y * y + z * z)
                / (SensorManager.GRAVITY_EARTH * SensorManager.GRAVITY_EARTH);
        long actualTime = System.currentTimeMillis();
        if (accelationSquareRoot >= 2) //
        {
            if (actualTime - lastUpdate < 200) {
                return;
            }
            lastUpdate = actualTime;

            if (color) {

            } else {

                try {

                    AssetFileDescriptor afd = getAssets().openFd(
                            "gavel_single.wav");
                    mMediaplayer = new MediaPlayer();
                    mMediaplayer.setDataSource(afd.getFileDescriptor(), afd
                            .getStartOffset(), afd.getLength());
                    afd.close();
                    mMediaplayer.prepare();
                    mMediaplayer.start();

                } catch (Exception e) {
                    e.printStackTrace();
                }

            }

        }

    }

}

public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // TODO Auto-generated method stub

}

@Override
protected void onResume() {
    super.onResume();
    // register this class as a listener for the orientation and
    // accelerometer sensors
    sensorManager.registerListener(this, sensorManager
            .getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_NORMAL);
}

@Override
protected void onPause() {
    // unregister listener
    sensorManager.unregisterListener(this);
    super.onStop();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    if (mMediaplayer != null) {
        mMediaplayer.release();
        mMediaplayer = null;
    }

}

public void onCompletion(MediaPlayer mp) {
    mp.seekTo(0);
    mp.release();

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:05:43.483

您不能在标准的 Android 平台上执行此操作，至少在从正常来源分发时（您可能可以通过使用 javascript 打开网页和指向您自己服务器上的 apk 的链接来做某事，但用户必须首先在他们的设置中启用“未知来源”）

但是，您可以在首次运行时播放声音。但是，只有当用户从安装程序中单击“打开”或从主屏幕等启动它时，安装才会运行。

# vb6 - 如何读取 Excel 文件中的所有工作表

> ID：10379004
> 
> 赞同：0
> 
> 时间：2012-04-30T05:44:44.283
> 
> 标签：vb6

我有一个包含 7 到 8 个工作表（sheet1，sheet2 ....）的 excel 文件，我想一张一张地阅读所有工作表。有人可以建议我如何在 VB6.0 中实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:56:21.703

您可以使用[WorkSheets](http://msdn.microsoft.com/en-us/library/aa224508%28v=office.11%29.aspx)集合。它有一个`Count`包含工作表数量的属性，您可以`2`通过`Worksheets(2)`- 您不需要知道工作表的名称来访问工作表。

# ios - 在 Xcode 中制作 RGB 颜色

> ID：10379009
> 
> 赞同：64
> 
> 时间：2012-04-30T05:45:18.060
> 
> 标签：ios, objective-c, uicolor

我正在使用来自 Photoshop 的颜色的 RGB 值，并在 Xcode 中使用相同的值，这些值是.Color-R-160,G-97,B-5 ... Photoshop 中的颜色显示为黄色，但在我使用时在 Xcode 中

```
myLabel.textColor = [UIColor colorWithRed:160 green:97 blue:5 alpha:1] ; 
```

颜色呈白色。

为什么会发生这种差异？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-04-30T05:47:12.300

## Objective-C

您必须给出 0 到 1.0 之间的值。所以将 RGB 值除以 255。

```
myLabel.textColor= [UIColor colorWithRed:(160/255.0) green:(97/255.0) blue:(5/255.0) alpha:1] ; 
```

**更新：**

你也可以使用这个宏

```
#define Rgb2UIColor(r, g, b)  [UIColor colorWithRed:((r) / 255.0) green:((g) / 255.0) blue:((b) / 255.0) alpha:1.0] 
```

你可以像这样打电话给你的任何一个班级

```
 myLabel.textColor = Rgb2UIColor(160, 97, 5); 
```

## 迅速

这是正常的颜色合成

```
myLabel.textColor = UIColor(red: (160/255.0), green: (97/255.0), blue: (5/255.0), alpha: 1.0) 
//The values should be between 0 to 1 
```

Swift 对宏不太友好

> 复杂的宏在 C 和 Objective-C 中使用，但在 Swift 中没有对应物。复杂宏是不定义常量的宏，包括带括号的、类似函数的宏。您在 C 和 Objective-C 中使用复杂的宏来避免类型检查约束或避免重新输入大量样板代码。但是，宏会使调试和重构变得困难。在 Swift 中，您可以使用函数和泛型来获得相同的结果，而不会做出任何妥协。因此，您的 Swift 代码无法使用 C 和 Objective-C 源文件中的复杂宏。

所以我们为此使用扩展名

```
extension UIColor {
    convenience init(_ r: Double,_ g: Double,_ b: Double,_ a: Double) {
        self.init(red: r/255, green: g/255, blue: b/255, alpha: a)
    }
} 
```

你可以像这样使用它

```
myLabel.textColor = UIColor(160.0, 97.0, 5.0, 1.0) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-30T06:04:05.347

你已经得到了正确的答案，但是如果你`UIColor`像我一样不喜欢这个界面，你可以这样做：

```
#import "UIColor+Helper.h"
// ...
myLabel.textColor = [UIColor colorWithRGBA:0xA06105FF]; 
```

UIColor+Helper.h：

```
#import <UIKit/UIKit.h>

@interface UIColor (Helper)
+ (UIColor *)colorWithRGBA:(NSUInteger)color;
@end 
```

UIColor+Helper.m：

```
#import "UIColor+Helper.h"

@implementation UIColor (Helper)

+ (UIColor *)colorWithRGBA:(NSUInteger)color
{
    return [UIColor colorWithRed:((color >> 24) & 0xFF) / 255.0f
                           green:((color >> 16) & 0xFF) / 255.0f
                            blue:((color >> 8) & 0xFF) / 255.0f
                           alpha:((color) & 0xFF) / 255.0f];
}

@end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T05:57:43.183

是的.ios 仅支持 RGB 值在 0 和 1 之间的范围内..它的接近范围 [0,1]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-10T15:02:34.260

**Interface Builder 的颜色选择器插件**

Panic 有一个不错的颜色选择器，它适用于 IB： http: [//panic.com/~wade/picker/](http://panic.com/~wade/picker/)

**Xcode 插件**

这个为您提供了一个用于选择颜色的 GUI：[http ://www.youtube.com/watch?v=eblRfDQM0Go](http://www.youtube.com/watch?v=eblRfDQM0Go)

**Objective-C**

```
UIColor *color = [UIColor colorWithRed:(160/255.0) green:(97/255.0) blue:(5/255.0) alpha:1.0]; 
```

**迅速**

```
let color = UIColor(red: 160/255, green: 97/255, blue: 5/255, alpha: 1.0) 
```

**Pod 和库**

有一个不错的 pod，名为`MPColorTools`：[https ://github.com/marzapower/MPColorTools](https://github.com/marzapower/MPColorTools)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T14:33:04.453

这些值由图像的位确定。8 位 0 到 255

16 位...一些荒谬的数字..0 到 65,000 左右。

32位是0到1

我将 .004 与 32 位图像一起使用...乘以 255 后得到 1.02

# admob - 如何使用 AdMod 和 Mono for Android？

> ID：10379010
> 
> 赞同：1
> 
> 时间：2012-04-30T05:45:30.947
> 
> 标签：admob, xamarin.android

您有使用 Mono for Android 和 AdMob 的经验吗？你能描述一下你是如何完成它的吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:46:40.117

James 在这里基于 Greg Shackles v4 绑定创建了一个不错的绑定项目： [https ://github.com/jamesmontemagno/MonoDroid-Admob6](https://github.com/jamesmontemagno/MonoDroid-Admob6)

# html - 使用 multipart/form-data 时如何从请求中获取字符串参数？

> ID：10379013
> 
> 赞同：2
> 
> 时间：2012-04-30T05:45:47.370
> 
> 标签：html, google-app-engine, servlets, file-upload, servlet-filters

我制作了 html 页面来上传带有描述形式的文本框的图像。我使用了 multipart/form-data ；在 servlet 的 dopost 中，我使用 ServletFileUpload upload = new ServletFileUpload(); 获取文件

要获取字符串参数，我使用了 request.getparameter(); 但它总是给我NULL ??? 我怎么才能得到它 ？？

html ::

```
<form name="filesForm" action="/upload" method="post" enctype="multipart/form-data">

File : <input type="file" name="file">  
<textarea name = "description"  
 rows = "4" cols = "30">Enter comments here.</textarea>
<input type="submit" name="Submit" value="Upload File"> 
```

在小服务程序：

```
ServletFileUpload upload = new ServletFileUpload(); 
upload.setSizeMax(500000000);
 FileItemIterator iterator = null;
    try {
        iterator = upload.getItemIterator(req);
    } catch (FileUploadException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } //  to handle contents or 
    // instances  of request.
    FileItemStream item = null;
    try {
        item = iterator.next();
    } catch (FileUploadException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } // get  access each item on iterator.
    java.io.InputStream in = item.openStream(); // allows to read the items contents. 

    Blob imageBlob = new Blob(IOUtils.toByteArray(in)); // store each item on Blob 

    // object after converting them to Bytes.
    /*……….
    Note: we are concerned on uploading images files. So the type of files is either (.jpg or gif)
    ……….
    */
    PersistenceManager pm = PMF.get().getPersistenceManager();
    String counter="1";
    ServletOutputStream outt = resp.getOutputStream();
     //match incoming request Content type and invoke appropriate method for handel request 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:18:13.067

这是因为当你有 form 时`enctype="multipart/form-data"`。您无法通过使用获取其他表单字段`request.getParameter("paramnName");`。它总是会给你NULL。

您必须使用`FormItem`'s`isFormField()`检查其常规字段或文件。

例子：

```
 try {
            ServletFileUpload upload = new ServletFileUpload();
            response.setContentType("text/plain"); 

            FileItemIterator iterator = upload.getItemIterator(request);

            while (iterator.hasNext()) {
              FileItemStream item = iterator.next();

              InputStream stream = item.openStream();

              if (item.isFormField()) {
                  System.out.println("Got a form field: " + item.getFieldName()  + " " +item);

              } else{
                  System.out.println("Got an uploaded file: " + item.getFieldName() +
                          ", name = " + item.getName());
                int len;
                byte[] buffer = new byte[8192];
                while ((len = stream.read(buffer, 0, buffer.length)) != -1) {

                  response.getOutputStream().write(buffer, 0, len);

                }

            }

        }
} catch (FileUploadException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T02:27:30.837

添加答案并解决问题@Sayo Oladeji

要获取输入字段的值，您可以使用以下命令：

```
System.out.println("Got a form field: " + item.getFieldName()  + " " + Streams.asString(stream)); 
```

# html - 如何在 HTML 中使用代码块

> ID：10379015
> 
> 赞同：5
> 
> 时间：2012-04-30T05:45:55.440
> 
> 标签：html, css

我需要做一些博客发布。为此，我需要粘贴我的程序的一些代码。

我想使用与此类似的代码块

```
Similar to this 
```

我尝试使用**code**或**pre**但它没有产生相同的输出。

如何在 HTML 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T05:53:15.253

您可能希望在级联样式表 ( [CSS](http://en.wikipedia.org/wiki/CSS) ) 中执行此操作。创建一些具有您想要的外观的 CSS，并且标记为的内容`<code>`应该具有该外观。例如：

```
<html>
<head>
<style type="text/css">
code { background-color: gray; color: blue; }
</style>
</head>
<body>
<p>Some code:</p>
<code>My code...</code>
</body>
</html> 
```

您可以在 CSS 中进行*大量*格式化。用于`<span class="small_block">`短文本块（如关键字）或`<div class="big_block">`更大的块。在标题的样式部分中为 small_block 和 big_block 创建条目以定义外观，但请使用比这些更好的类名:)。玩得开心！

* * *

更新：在深处，突出显示是通过 CSS 正确完成的，上面简单手动显示（技术上内联样式也是可能的，但这是一个丑陋的解决方案）。正如其他答案所示，有些库可以通过 JavaScript 在呈现页面时检查并突出显示您的源代码块，从而自动化突出显示过程。它们基本上提供了丰富的 CSS 并自动应用`span`和`div`标记，并且可以应用特定于语言的规则使代码看起来非常精细地格式化，就像现代 IDE 编辑器一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T02:21:18.360

我建议你使用这个

```
<code> how to use <span style="background-color: #33cccc;">for </span> in nectoPoint.</code> 
```

它更容易，因为颜色看起来像是被标记为

# mips - MIPS 代码中执行的指令总数？

> ID：10379019
> 
> 赞同：1
> 
> 时间：2012-04-30T05:46:40.090
> 
> 标签：mips, instructions

在这个 MIPS 程序中

当这段代码片段运行时，一共会执行多少条指令？

```
i1: ori $t0, $0, 1000
i2: ori $t1, $0, 2000
i3: addi $t2, $t0, 100
i4: lw $t3, 0($t1)
i5: lw $t4, 0($t0)
i6: add $t3, $t3, $t4
i7: sra $t3, $t3, 1
i8: sw $t3, 0($t0)
i9: sw $t3, 0($t1)
i10: addi $t0, $t0, 4
i11: addi $t1, $t1, 4
i12: slt $t3, $t0, $t2
i13: bne $0, $t3, i4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:09:59.090

在每个循环中，它将 $t0 加 4，初始化为 1000。在循环结束时，它检查 $t0 是否大于 $t2，初始化为 1100。如果是，则循环中断。所以，它是最初的 13 条指令，每个周期加上 10 条指令，直到它中断。它会额外循环 25 次。而且我可能添加了错误，但如果没有，那就是 263 指令。

# apache-flex - 收到错误“安装的 Flash Player 不是调试器”

> ID：10379030
> 
> 赞同：1
> 
> 时间：2012-04-30T05:47:49.793
> 
> 标签：apache-flex, flex3

我已经将 Flash Player 从 9 升级到 11，所以我收到一个错误，它不是调试器版本。那么如何克服这种情况，我必须在我的应用程序中使用 flash player 11，并且我使用的是 adobe Flex Builder 3.0。在这里，我在调试应用程序时向您展示错误。请帮我。

![在此处输入图像描述](../Images/d22305664e6bf048ae0054b50d473cb6.png)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:28:07.653

嗨，我在 Ranhiru Cooray 的帮助下解决了这个问题。Ranhiru Cooray 在评论中提供的链接非常有帮助，我刚刚下载了 2 个东西并安装

1) 下载 Windows Flash Player 11.2 ActiveX 控件内容调试器（适用于 IE） 2) 下载 Windows Flash Player 11.2 插件内容调试器（适用于与 Netscape 兼容的浏览器）

现在错误没有出现，我已经解决了这个问题。

# android - 如何编写json的java代码

> ID：10379031
> 
> 赞同：2
> 
> 时间：2012-04-30T05:47:52.310
> 
> 标签：android, arrays

我想将 JSON 转换为 java 代码。我的 jsoncode 如下所示。

```
{
"nodes": [
    {
        "node": {
            "Name": "rahul Patel",
            "Address": "\n\tAhmedabad",
            "Date of Birth": "1991-05-03",
            "Occupation": "developer",
            "Member Since": "3 weeks 4 days"
        }
    }
] 
```

爪哇代码

```
try {
            JSONObject objResponse = new JSONObject(strResponse);

            JSONArray jsonnodes = objResponse
                    .getJSONArray(nodes);

            System.out.println("=hello this is DoinBackground");
            for (i = 0; i < jsonnodes.length(); i++) {

                System.out.println("hello this is for loop of DoinBackground");
                JSONObject jsonnode = jsonnodes.getJSONObject(i);

                JSONObject jsonnodevalue = jsonnode
                        .getJSONObject(node);

                bean = new UserProfileBean();

                bean.name = jsonnodevalue.getString(Name);

                listActivities.add(bean);

            }
        } catch (JSONException e) {

            e.printStackTrace();
        }
} 
```

在 logcat 中，我打印了 for 循环之前的值`System.out.println("=hello this is DoinBackground");`，但值无法在 for 循环下打印`System.out.println("hello this is for loop of DoinBackground");`

注意：请让我知道，是否有可能我们不能在代码中使用 for 循环？如果是，那么给出解决方案，对于这个给定的问题还有另一种解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:56:13.117

尝试使用 Gson - [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)。会省去很多头痛。

但是，在您的代码中，请确保正确解析您的 JSON 字符串。只是为了确定`objResponse.getJSONArray(nodes)`应该是`objResponse.getJSONArray("nodes")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:00:05.523

你的 json 字符串是错误的。它必须以`}`. 解决这个问题，它会工作。

**固定 json 字符串：**

```
{
    "nodes": [
        {
            "node": {
                "Name": "rahul Patel",
                "Address": "\n\tAhmedabad",
                "Date of Birth": "1991-05-03",
                "Occupation": "developer",
                "Member Since": "3 weeks 4 days"
            }
        }
    ]
} 
```

**要测试的示例代码：**

```
String j = "{\r\n" + 
        "    \"nodes\": [\r\n" + 
        "        {\r\n" + 
        "            \"node\": {\r\n" + 
        "                \"Name\": \"rahul Patel\",\r\n" + 
        "                \"Address\": \"\\n\\tAhmedabad\",\r\n" + 
        "                \"Date of Birth\": \"1991-05-03\",\r\n" + 
        "                \"Occupation\": \"developer\",\r\n" + 
        "                \"Member Since\": \"3 weeks 4 days\"\r\n" + 
        "            }\r\n" + 
        "        }\r\n" + 
        "    ]\r\n" + 
        "}";

try{
    JSONObject objResponse = new JSONObject(j);

    JSONArray jsonnodes = objResponse.getJSONArray("nodes" );

    for (int i = 0; i < jsonnodes.length(); i++) {

        JSONObject jsonnode = jsonnodes.getJSONObject(i);

        JSONObject jsonnodevalue = jsonnode
                .getJSONObject("node");

        Log.v("name", jsonnodevalue.getString("Name"));
        Log.v("address", jsonnodevalue.getString("Address"));
        Log.v("occupation", jsonnodevalue.getString("Occupation"));
    }

}
catch (Exception e) {
    e.printStackTrace();
} 
```

# ios - ksystemsoundid_vibrate 在 iphone4 和 ipad 中不起作用

> ID：10379032
> 
> 赞同：2
> 
> 时间：2012-04-30T05:48:03.583
> 
> 标签：ios, ios5, ios4, ios-simulator, core-audio

在我的应用程序中，当用户输入错误的密码时，我需要振动。

我的设备操作系统：iOS5

它在 iPhone3G 中振动，但在 iPhone4 和 iPad 中不振动。

我已按照以下步骤操作：

1.将 AudioToolbox 框架添加到我的应用程序中。

1.  在要触发振动的文件中，导入 AudioToolbox 头文件：

    ```
     #import <AudioToolbox/AudioServices.h> 
    ```

2.  最后，调用以下行使设备振动：

    ```
     AudioServicesPlayAlertSound(kSystemSoundID_Vibrate); 
    ```

有什么，我错过了…………谢谢……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-12T16:24:45.093

我试图让振动 api 在我的 iphone5 中工作，但我发现如果振动设置已关闭，它将无法工作。（转到系统设置\声音=>响铃振动。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T10:41:25.777

我导入这个框架`AudioToolbox/AudioToolbox.h`并调用

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

试试看。

# jmeter - 吞吐量控制器的目的？

> ID：10379033
> 
> 赞同：7
> 
> 时间：2012-04-30T05:48:08.873
> 
> 标签：jmeter, load-testing

我需要一些帮助才能使用 JMeter。我想记录两个不同的场景，比如点击 2 个不同的按钮。如果我尝试为 2 个用户运行，一个用户应该点击第一个按钮，另一个应该同时点击另一个按钮。

我知道这是基本问题。但我是新手。这就是为什么在这里问。我试过如下：

```
 Thread Group
 -Throughput Controller
       --Login
       --Clicking 1st button
 -Throughput controller
       --Login
       --Clicking 2nd button 
```

当我使用 CSV 数据集配置与 2 个用户一起运行时，两个登录都需要相同的用户。

而且我还需要测试并发性。我不确定如何正确执行此操作。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T15:02:34.890

1.  如果您有多个单次迭代，吞吐量控制器将正常工作。
    即你应该有N个循环（例如使用循环控制器），子吞吐量控制器设置X百分比（X是整数，0 <= X <= 100） - 所以来自N个循环的X％也是整数值。
    您可以查看[此讨论](http://jmeter.512774.n5.nabble.com/How-throughput-controller-work-td3328412.html)以获得更好的示例和解释。

2.  对于您的情况，您可以尝试使用如下构造：

```
 **Thread Group**
Number of Threads = 2
Loop Count = 1
+- **While Controller**
   Condition = ${__javaScript("${login}"!="<EOF>",)}
   +- **CSV Data Set Config**
      Filename = users.csv
      Variable Names = login,pwd
      Delimiter = ,
   +- **Loop Controller**
      Loop Count = 10
      +- **Login**
      +- **Throughput Controller**
         Percent Execution
         Throughput = 50.0
         +- Clicking 1st button
      +- **Throughput Controller**
         Percent Execution
         Throughput = 50.0
         +- Clicking 2nd button
      +- **Logout** 
```

其中
- 有 2 个线程（线程组：线程数 = 2）同时启动，每个线程都使用从 csv 文件（而控制器 + CSV 数据集配置）中提取的唯一凭据，用于登录；
- 整个测试流程 - 登录 > 单击按钮（第一个或第二个）> 注销 - 将使用循环控制器重复 N 次，这使吞吐量控制器工作。

# asp.net-mvc-3 - 在 asp.net mvc3 中插入 数据失败

> ID：10379035
> 
> 赞同：0
> 
> 时间：2012-04-30T05:48:43.933
> 
> 标签：asp.net-mvc-3

我有一张桌子

```
帖子（p_id，u_id（FK），日期，标题，类型，查看者）
```

和一个带有（p_id，u_id，日期，标题，类型）的模型类 UserModel.cs。当我在后控制器中创建新帖子时，我尝试过

```
公共 ActionResult 创建（PostModel p）
        {

```
 if (ModelState.IsValid)
        {
          p.date =  DateTime.Today;
          post post = new Models.DB.post();
          post.u_id = User.Identity.Name;
          post.date = p.date;
          post.title = p.title;
          post.type= p.type;
          post.viwer=1;

          try{      db.posts.AddObject(post);
                db.SaveChanges();
         return RedirectToAction("LoggedIndex");
         }
        catch{ return RedirectToAction("Index"); }
      }
    return View(p);
   } 
```

它不工作。我认为从不提交时我提交总是返回视图。我创建了 stronly 类型的创建视图。在 create.cshtml 我有两个隐藏字段 user_id 和 postModel 对象的日期。我是 MVC 的新手。请帮助我提前谢谢....
            回答 #1

赞同：0

时间：2012-04-30T05:58:42.393

**使用 MVC 模型将数据从视图发送到控制器**

我是这样理解的：您有一个 mvc3 页面，并希望将一些自定义数据发送到您的控制器：

**控制器：**

```
[http-post]
    public ActionResult Create(PostModel p)
        { 
        if (ModelState.IsValid)
        {
          p.date =  DateTime.Today;
          post post = new Models.DB.post();
          post.u_id = User.Identity.Name;
          post.date = p.date;
          post.title = p.title;
          post.type= p.type;
          post.viwer=1;

                db.posts.AddObject(post);
                db.SaveChanges();
         return RedirectToAction("LoggedIndex");
      }
    return View(p);
   }

public ActionResult Create()
        { 

    return View(new post());
   } 
```

**看法：**

```
@model post

@using (Html.BeginForm("Create", "Controller-Name", FormMethod.Post, new { id = "FORM" }))
{
 @Html.EditorFor(model => model.date)

 @Html.EditorFor(model => model.name)

 @Html.EditorFor(model => model.title)

 @Html.EditorFor(model => model.type)
} 
```

更多信息：[http ://weblogs.asp.net/scottgu/archive/2010/07/27/introducing-asp-net-mvc-3-preview-1.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/27/introducing-asp-net-mvc-3-preview-1.aspx)

```

# java - 重构箭头反模式

> ID：10379036
> 
> 赞同：2
> 
> 时间：2012-04-30T05:48:52.590
> 
> 标签：java, refactoring

我有一些数据正在以一种方法查询。它已经到了成为箭头反模式的地步。它看起来像这样：

```
void queryData()
{
    int masterIndex = getMasterIndex();
    if (masterIndex != -1)
    {
        byte[] pageData = getMasterPage(masterIndex);
        if (pageData) != null)
        {
            Item1 i1 = getItem1(pageData);
            Item2 i2 = getItem2(pageData);

            if (i1 != null && i2 != null)
            {
                showResults(i1, i2);
            }
        }
    }
} 
```

想象上面但更大。更多的 if 语句和每个被调用的方法都有相当多的逻辑。

现在我能做的是重构上面的方法，这样所有的 if 语句都是肯定的，如果为真，则提前返回。

我觉得将每个查询和有效性检查分解到他们自己的类中会更干净。每个动作都将继承/实现如下接口：

```
public interface Action
{
    public void run();
    public boolean wasSuccessful();
} 
```

我会创建一个所需操作的列表，并一次完成一个。通过这种方式，很明显可以看出每个操作属于什么逻辑。

这是过度架构吗？以上是我还不知道的现有模式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:23:53.867

我首先会滥用 IDE 的“提取方法”功能（如果有的话），然后将每个逻辑分支提取到自己的方法中。这样可以使代码更具可读性。

您可能希望首先开始编写单元测试，以确保重构的结果不会破坏或更改代码本身的业务逻辑。一旦您重构为更小的方法并确信代码仍能按最初预期工作，您就可以查看是否可以创建类并将代码提取到这些类中。

我不会说创建类来进行查询和有效性检查会被过度设计，只要它有意义并且可读。正如你所说，你可以有一个`List<Action>`然后循环调用`run()`每个方法，然后检查`wasSuccessful()`每个并根据需要输出信息。

这样，如果您想更改给定操作的验证或查询，只需更改封装功能的类，而不必更改实际执行代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:57:27.263

看看简单的早期回报有多干净：

```
void queryData()
{
    int masterIndex = getMasterIndex();
    if (masterIndex == -1) 
        return;
    byte[] pageData = getMasterPage(masterIndex);
    if (pageData == null)
        return;
    Item1 i1 = getItem1(pageData);
    Item2 i2 = getItem2(pageData);
    if (i1 == null || i2 == null)
        return;
    showResults(i1, i2);
} 
```

我认为这是比创建额外的类结构更好的方法。

# matlab - 矩阵除法的问题

> ID：10379037
> 
> 赞同：2
> 
> 时间：2012-04-30T05:48:58.890
> 
> 标签：matlab, matrix, sparse-matrix

我有这个矩阵除法问题。我有这样的东西

```
(AxB)/(C*C). 
```

我想我可以写成

```
(A/C) * (B/C). Correct me if I am wrong. 
```

现在有什么办法可以消除这种形式。B 和 C 都是非常大的矩阵，在 matlab 中计算 B/C 需要将近 1 分钟。那么我还有其他方法可以操纵它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:38:46.287

如果您的所有矩阵都是正方形，那么对于您的第一个表达式，您具有等价性

```
A * B / (C * C) <==> A * B * inv(C * C) <==> A * B * inv(C) * inv(C) 
```

另一方面，您的第二个表达式相当于

```
(A / C) * (B / C) <==> A * inv(C) * B * inv(C) 
```

由于矩阵通常不会通勤，因此它们不必相同。如果我们把右边等同起来，我们会发现（只要`A`和`C`是可逆的）我们可以做一些抵消，最后得到等式

```
B * inv(C) == inv(C) * B 
```

即如果`B`与 .commutes 通勤，这两个表达式是相同的`inv(C)`。事实上，我们可以左右乘以`C`，得到

```
C * B = B * C 
```

所以这与要求`B`与`C`.

# asp.net-mvc-4 - MVC4 Web API 默认 JSON 序列化器

> ID：10379043
> 
> 赞同：2
> 
> 时间：2012-04-30T05:50:11.320
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我今天偶然发现了一些事情。以下是我的示例课程。

```
public class Employee
{
public string Name{get;set;}
Public Department Dept {get;set;}
public IList<Roles> Roles;
}

public Department{
public string Name{get;set;}
}

public Role {
public string Name{get;set;}
}

 sampleApiController : ApiContrller{
 public IEnumerable<string> Get(){
 return new List<string>{"Pavan", "Josyula"};
}
public Employee GetEmp(int id){

Employee e = new Employee();
e.Dept = "IT";
e.Name="Pav";
IList<Roles> r = new IListRoles();
r.Add(new Role{Name="Integrator"});
e.Roles = r;
return e;

  }
} 
```

现在，当我从我的浏览器中调用此 GetEmp 方法时，无论我在 AcceptHeaders 中的内容类型是什么，它总是以 JSON 格式给我响应。但是当我调用我的 Get 方法时，它会返回 XML 格式的字符串集合，它也基于请求标头中的接受动词。有人能告诉我自定义类型的这种默认 JSON 行为的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:41:27.603

这是因为 XmlSerializer 不能序列化`IList<T>`。请阅读以下答案以获取更多详细信息：

*   [MVC 4 中集合和单个值之间的内容协商差异](https://stackoverflow.com/questions/9686876/differences-in-content-negotiation-between-collections-and-single-values-in-mvc/9687840#9687840)

# css - IE8、IE9 上的 CSS 样式表

> ID：10379044
> 
> 赞同：1
> 
> 时间：2012-04-30T05:50:18.473
> 
> 标签：css, stylesheet

我正在开发一个 Web 应用程序，现在 css 可以与 Opera、Chrome、Firefox 和 Safari 完美配合。我只是对 IE8 和 IE9 有一些特定的问题。我的疑问是，最好的选择是为 IE 编写一个专有的 css 还是只为 IE 合并特定的行？

这适用于 Chrome、Firefox、Safari 和 Opera：

```
#table{
    width: 60%;
    margin-top: 60px;
    margin-left: auto;
    margin-right:  auto;
} 
```

资源管理器代码：

```
#table{
    width: 60%;
    margin-top: 60px;
    margin-left: 20%;
    margin-right:  auto;
} 
```

我正在寻找负载最快的选择。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:04:00.497

我发现最容易将调整隔离到特定于 IE 的样式表中，然后使用条件注释（无论如何只有 IE 理解）在正常 CSS 之后加载它们。

这是我的一个项目（一个 ASP.NET MVC2 项目）的示例：

```
<!--[if lte IE8]>
<link rel="stylesheet" type="text/css" href="<%: Url.Content("~/content/ie-fix.css") %>" />
<![endif]--> 
```

# php - 作为 cronjob 运行时，facebook.php 标头发送错误

> ID：10379046
> 
> 赞同：2
> 
> 时间：2012-04-30T05:50:40.463
> 
> 标签：php, facebook, header, cron

我有一个包含 facebook.php 的文件，如果我直接运行 URL，它运行没有任何错误。但是当我将它作为 cronjob 运行时，我在电子邮件中收到以下错误

```
<br />
<b>Warning</b>:  session_start() [<a
href='function.session-start'>function.session-start</a>]: Cannot send session
cookie - headers already sent in
<b>/home/username/public_html/pathtofile/facebook.php</b> on line
<b>37</b><br /> 
```

在包含 facebook.php 之前没有任何回应，因为该文件包含在顶部。

```
require('facebook.php');
include_once("config.php");
include_once("functions.php");
 $app_id = 'my_app_id';
 $app_secret = 'my_app_secret';
 $facebook = new Facebook(array(
   'appId'  => $app_id,
   'secret' => $app_secret,
 )); 
```

可能的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:33:59.883

也许您的会话已经开始

```
if(!session_id()){
session_start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:31:58.353

同样的问题。我无法从中获得太多用处，但我确实找到了这个（如果你还没有看到它）：[php 命令行问题](https://stackoverflow.com/questions/4831797/issues-with-php-command-line)

我在我的 facebook.php 包含文件中注释掉了 session_start() 行作为一种解决方法......似乎尽我所能。对我来说没有多大意义，但是你们有没有提出明确的理由和/或方向？我有点惊讶没有更多关于它的讨论/谷歌结果....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T16:03:57.823

问题在于 php 命令行，因此最好使用 wget 而不是 php-q 在 cron 上运行

我在 cron url使用 wget [http://exampl.com/url_for_script.php](http://exampl.com/url_for_script.php)

它对我有用

# android - Android ListView 展开项目列表

> ID：10379049
> 
> 赞同：1
> 
> 时间：2012-04-30T05:50:54.087
> 
> 标签：android, listview

我正在一个 android 活动中创建一个列表视图，我想展开当前选定的项目以显示更多详细信息，

for example, contact list display only first and last name, and when select contact item, expand the selected item to display more details for that contact like first name, last name, mail, telephone numbers...etc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:57:36.437

请为此使用可扩展列表视图。

请参考[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T05:57:54.947

使用[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html).

# php - 带有mysql结果集的PHP变量变量

> ID：10379053
> 
> 赞同：0
> 
> 时间：2012-04-30T05:51:23.880
> 
> 标签：php, mysql

所以我有一个 mysql 表，它有一个可以动态添加的 id 列（sid）。现在我正在做一个查询，以获取分组到每个 sid 中​​的所有条目的计数，如下所示：

```
SELECT SUM(IF(sid = 71, 1, 0)) as count71,
SUM(IF(sid = 72, 1, 0)) as count72,
SUM(IF(sid = 75, 1, 0)) as count75,
SUM(IF(sid = 81, 1, 0)) as count85
FROM `table`
WHERE userid=44; 
```

请注意，所有 SUM 字段都是动态创建的，我不知道实际的 sid 是什么。现在的问题是如何使用 PHP 的变量变量遍历每个计数的结果集？我已经尝试过了，但没有用。

```
$count_var = "rs['count71']"
$$count_var // holds number of entries where sid is 71; 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T05:54:50.653

我可以建议这个吗：

```
select sid, count(*) from `table` where userid = 44 group by sid ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T05:59:46.513

你可以这样做：

```
 $count_var = "rs['count71']";
echo eval('return $'. $count_var . ';'); 
```

但当然@troelskn 的答案可能是您想要的最佳解决方案

# session - 会话超时和多个 webapps

> ID：10379057
> 
> 赞同：0
> 
> 时间：2012-04-30T05:51:54.873
> 
> 标签：session, web-applications, spring-mvc, timeout

我在当前项目中遇到了一个奇怪的问题：

我在 Glassfish 3.1 服务器上部署了多个基于 Spring MVC 的 Web 应用程序——我需要能够根据用户各自 web.xml 中的“会话超时”参数“超时”用户——无论在哪个应用程序中用户开启。请不要问为什么应用程序在单独的 WAR 中——架构就是这样。用户通过 WebApp A 登录并被重定向到 WebApp B - 然后用户可以继续跳转到不同的 Web 应用程序 - 我想你明白了。WebAppB 等也有许多 Ajax 调用（我什至不去那里）。我想，这个问题归结为我无法在 WebApp A 和 WebApp B 之间共享会话数据（我可能在这里错了——这是我需要帮助的地方），所以我没有任何通过检查知道的方法

```
httpServletRequest.getSession(false) 
```

在 WebAppB 中，因为它在第一个请求命中 WebAppB 和第一个请求“在”会话超时“之后”的两种情况下都返回 null。我必须在 WebAppA 的会话中保留“某些东西”并检查它在 WebAppB 的会话中是否存在——这让我回到了在 Web 应用程序中共享会话数据的问题。我不能使用数据库存储，因为这意味着每个请求都会调用数据库。我通过谷歌搜索 Tomcat 中的“crossContext”东西在这种情况下有帮助得到了一个方向 - 但这样的东西在 Glassfish 中会有帮助（我最近发现 sun-web-app.xml 有一个“crossContextAllowed”属性）。

我已经被这个问题困扰了很长一段时间了，我什至不确定这是一个值得你花时间的问题——所以在此先感谢你的帮助。

特里舒尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:27:57.940

我无法帮助您实现 Glassfish，但您需要的是一种 Web 应用程序之间的单点登录形式。

要实现这种形式的 SSO，您通常需要做两件事：

1.  确保您的所有 webapps 共享一个公共根上下文，即 webapp A 在 /commonroot/webappA 上，而 webapp B 在 /commonroot/webappB 上。这样做的原因是，当用户在它们之间切换时，必须将相同的会话 Id 传递给两个 webapp。会话 ID 通常存储在 cookie 中，浏览器根据路径传递 cookie。Glassfish 上必须有一个设置（就像在 Tomcat 和 Jetty 上一样），它可以“强制”webapp A 在路径“/commonroot”（而不是 /commonroot/webappA）和 webappB 上提供 cookie 来做同样的事情。然后，对 webapp A 或 webapp B 的任何访问都将从与 /commonRoot 路径关联的 cookie 中提取并提供唯一的会话 ID。
2.  一旦您在同一个“SSO 上下文”中的所有 Web 应用程序为用户共享一个公共会话，您需要让这些 Web 应用程序从一个公共的、唯一的商店访问该会话。DB 是一种常用的方法，但如果您正在寻找速度，则 memcached 或 hazelcast 之类的东西可能更合适。使用 DB 的优势在于它还提供了会话持久性：如果您的会话存储被退回，使用未过期会话进行呼叫的用户将透明地重新连接，而无需再次登录。

Servlet/JavaEE 容器通常会提供 SSO 领域/会话管理器或等效的示例，它们将直接实现您的需求，或者您可以根据自己的需要进行微调。

# windows-8 - 在非联网机器上调试 C# Metro 应用程序

> ID：10379070
> 
> 赞同：0
> 
> 时间：2012-04-30T05:54:15.367
> 
> 标签：windows-8, windows-runtime, visual-studio-2012

我正在尝试创建我的第一个 Metro 应用程序，为了调试和运行它，我需要开发人员许可证吗？如果我的机器没有连接到网络 - 我该怎么办？没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T21:02:04.450

您只需打开适用于 Windows 8 或 VS 11 Beta 的 Visual Studio 11 Express，它就会从 Microsoft 获得免费许可，我相信它会免费使用一个月左右。到目前为止，他们每个月都在延长它。我相信您确实需要在线才能获得它。

# google-app-engine - 无法将应用部署到应用引擎

> ID：10379073
> 
> 赞同：1
> 
> 时间：2012-04-30T05:54:25.027
> 
> 标签：google-app-engine

我有一个基于 GWT 的 Web 应用程序，之前已上传到 Appspot。但是现在，我收到此错误：

```
Unable to update:
com.google.appengine.tools.admin.JspCompilationException: Failed to compile jsp files.
    at com.google.appengine.tools.admin.Application.compileJsps(Application.java:583)
    at com.google.appengine.tools.admin.Application.createStagingDirectory(Application.java:434)
    at com.google.appengine.tools.admin.AppAdminImpl.doUpdate(AppAdminImpl.java:327)
    at com.google.appengine.tools.admin.AppAdminImpl.update(AppAdminImpl.java:52)
    at com.google.appengine.eclipse.core.proxy.AppEngineBridgeImpl.deploy(AppEngineBridgeImpl.java:400)
    at com.google.appengine.eclipse.core.deploy.DeployProjectJob.runInWorkspace(DeployProjectJob.java:148)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

*   应用程序使用了 JDK（不是 JRE）
*   war文件上有一个JSP文件（虚拟）
*   该应用程序在托管模式下工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:35:19.333

先做一个干净的构建。Alt+P，日食中的 N。如果失败，请删除 /war/WEB-INF/classes 并重试。如果这也失败，请右键单击您的战争文件夹并选择验证；这将告诉您 jsp 文件中是否存在任何实际错误。

如果失败，您的 appengine jar 可能已损坏。尝试解压缩新的 SDK 并使用它进行部署。

另外，您最近是否更改了 java 版本？编译 JSP 需要 JAVA_HOME 指向 JDK，而不是 JRE。结果是`echo $JAVA_HOME`什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T12:40:17.720

此线程将解决您的问题 [无法获取系统 Java 编译器。请使用 JDK，而不是 JRE](https://stackoverflow.com/questions/15985363/cannot-get-the-system-java-compiler-please-use-a-jdk-not-a-jre/26945894#26945894)

否则，您需要将 JAVA_HOME 设置为指向您的 jdk 文件夹并在 eclipse.ini 中添加 javaw.exe 路径

# ruby-on-rails - Rails：路由错误

> ID：10379074
> 
> 赞同：1
> 
> 时间：2012-04-30T05:54:24.930
> 
> 标签：ruby-on-rails, routing

我的 show.html.erb 文件中有一个 button_to 标记。

```
 <%= link_to 'Click HERE to open file', @user.image.url  %><br/><br/><br/>
<%= label_tag(:q, "Parse CSV File:") %><br/>
<%= button_to 'Parse CSV', {:controller => "users_controller", :action => "process" } %>
  <% end %> 
```

然后我将它添加到我的 users_controller.rb 文件中

```
# GET /users/1/process
def process
 puts 'To be Implemented'
end 
```

我在路由文件中遇到错误

```
No route matches [POST] "/assets" 
```

这是我的路由文件的外观：

```
resources :users

resources :listings 
```

我应该改变什么。我有点困惑，非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:19:37.130

1）在视图中，使用控制器名称，如 'users'，而不是 'users_controller' 。

```
<%= button_to 'Parse CSV', {:controller => "users", :action => "process" } %> 
```

2) 默认情况下，rails 定义了很少的路线，但对于其他路线，您需要自己定义。声明如下路线：

```
 resources :users do
    :member => {
     :process => :get
    }
  end 
```

希望有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:57:20.297

请更正您的路线并像这样定义

```
<%= button_to 'Parse CSV', {:controller => "users", :action => "process" } %> 
```

然后在路由文件中

```
 resources :users do
      collection do
         get: process
     end
    end 
```

它肯定会工作

# java - 如何在java中绘制框图？

> ID：10379076
> 
> 赞同：1
> 
> 时间：2012-04-30T05:54:26.513
> 
> 标签：java, user-interface, jform-designer

我需要有`GUI`这样的：

![框图](../Images/ca493da8155bd107789aedebb1fcef7e.png)

这里所有的矩形都必须是按钮。我怎样才能做到这一点？建议我一些工具，例如`JFormDesigner`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T05:59:06.950

[我对JGraph](http://www.jgraph.com/jgraph.html)有很多很好的经验！

请参阅文档和一些您可以[在此处实现的示例](http://www.jgraph.com/doc/mxgraph/index_javavis.html#1.3)

图表中的每个节点都可以被点击，事件可以被监听并采取行动，就像按钮一样。事实上我认为你可以将`JButton`s 放入图中的节点中，但我可能错了。

编辑：只是使用常规 Java Swing 代码的布局将是这样的

```
import java.awt.BorderLayout;
import java.awt.Container;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class LayoutTest {

    public static void main(String[] args) {

        JFrame window = new JFrame();
        Container container = window.getContentPane();
        container.setLayout(new BorderLayout());

        JPanel centerPanel = new JPanel();
        centerPanel.add(new JButton("Center"));
        container.add(centerPanel, BorderLayout.CENTER);

        JPanel topPanel = new JPanel();
        topPanel.add(new JButton("b1"));
        container.add(topPanel, BorderLayout.NORTH);

        JPanel rightPanel = new JPanel();
        rightPanel.add(new JButton("b3"));
        container.add(rightPanel, BorderLayout.EAST);

        JPanel bottomPanel = new JPanel();
        bottomPanel.setLayout(new BorderLayout());

        JPanel bottomNorthPanel = new JPanel();
        bottomNorthPanel.add(new JButton("b2"));
        bottomPanel.add(bottomNorthPanel, BorderLayout.NORTH);

        JPanel bottomSouthPanel = new JPanel();
        bottomSouthPanel.add(new JButton("b2-1"));
        bottomSouthPanel.add(new JButton("b2-2"));

        bottomPanel.add(bottomSouthPanel, BorderLayout.SOUTH);

        container.add(bottomPanel, BorderLayout.SOUTH);

        window.setSize(320, 240);
        window.setVisible(true);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:22:21.807

我想您是在询问有关 Java Swing 的内容。您可以使用 drawLine() 和 drawRect()，并且您必须控制对组件的绘制。一旦你很好地理解了这一点，并创建了适合你需要的基本类，你就可以做得很好。
有关信息：请参阅 Schildt 在 Swing: A Beginner's Guide 中的示例。在第 495 页。对于列表 - [http://www.mhprofessional.com/getpage.php?c=computing_downloads.php&cat=112](http://www.mhprofessional.com/getpage.php?c=computing_downloads.php&cat=112)（到底部）

希望这可以帮助..

# svn - Dreamweaver CS5 SVN 代理设置

> ID：10379077
> 
> 赞同：2
> 
> 时间：2012-04-30T05:54:29.073
> 
> 标签：svn, proxy, dreamweaver

当我有直接的 Internet 连接时，Dreamweaver 中的 SVN 运行良好。但是，当我在工作时，我必须输入局域网的代理和端口以及浏览器提示的用户名和密码。我不确定如何在 Dreamweaver 中执行此操作，因为我觉得这是 SVN 无法工作的原因。

在 Dreamweaver 中测试 SVN 时，出现以下错误：

**服务器和项目不可访问 (175002)**

请帮忙！

# python - 在模板标签中解析自定义 html，django 1.4

> ID：10379081
> 
> 赞同：0
> 
> 时间：2012-04-30T05:55:00.377
> 
> 标签：python, django, django-templates

如何在自定义标记类 (template.Node) 中使解析器呈现带有标记的 html 片段？例如：

```
@register.tag(name='addspam')
class AddSpam(template.Node):
    def __init__(self, parser, token): ...
    def render(self, context):
        spam_html = "SPAM {{ any_tag_here }} SPAM"
        return spam_html 
```

在这里，AddSpam 在“调用”时返回“SPAM {{ any_tag_here }} SPAM”，而不呈现 any_tag_here。这显然是可以预测的，但是我怎样才能更改返回值，以便将 any_tag_here 呈现为好像它是“本机”的？有什么方法可以使用我可以使用的上下文吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:58:34.143

```
def render(self, context):
    spam_html = "SPAM %(any_tag_here)s SPAM" % context
    return spam_html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:19:10.703

我无法解决问题。我选择了另一种方法：而不是在我现在正在做的 html 中呈现标签

```
{% addspam %}
    {{ any_tag_here }}
{% end_addpsam %} 
```

这有助于我的代码松散耦合，并且在我遇到的特定情况下工作得很好。

# javascript - .offset Height 属性对于连续数据失败？

> ID：10379083
> 
> 赞同：0
> 
> 时间：2012-04-30T05:55:14.680
> 
> 标签：javascript, jquery

我有一个 div：

```
<div id="temp" style="width:124px; text-align: justify; display: none;">
</div> 
```

我正在执行一些操作以根据 div 的`.offsetHeight`属性限制内容。但是`.offsetHeight`，如果数据中没有空间，则如果数据是连续的，则属性会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:38:39.337

.offesetheight 属性返回对象可见区域的高度。尝试使用 scrollHeight 它的跨浏览器解决方案来获取文档的总大小。

# jquery - mouseover- mouseout/hover/moudeenter-mouseleaves 使 to 闪烁

> ID：10379086
> 
> 赞同：1
> 
> 时间：2012-04-30T05:55:22.957
> 
> 标签：jquery, mouseevent, jquery-events, onmouseover

```
<div id="risk-free-logo" style="float:left;margin-left:30px;height:100px;width:100px">
       </div>
 <div id="risk-free-info-div" style="border: 2px solid; display:none; position: relative; background-color: rgb(255, 255, 255); z-index:         100; height: 170px; width: 300px; margin-left: 150px;" class="popupbox"></div>

$(document).ready(function(){
 $('#risk-free-logo').mouseenter(
    function(){
          $(this).siblings('.popupbox').css('display','block');
              }); 
    $('#risk-free-logo').mouseleave(
       function(){
         $(this).siblings('.popupbox').css('display','none');
           }   
    );
}); 
```

Onmouseover 我必须显示一个 div。但是使用任何事件都会使闪烁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:20:49.727

毫无疑问，您现在已经回答了这个问题，或者找到了替代方案，因此对于从 Google 到这里的任何其他人来说，以下内容将无闪烁（我无法让您的代码工作或创建闪烁）。

在您的代码中替换`$(this).siblings('.popupbox')`为`$('.popupbox')`

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script>
$("#risk-free-logo").mouseenter(function (event) {
    $('.popupbox').css('display','block');
});
$("#risk-free-logo").mouseout(function (event) {
    $('.popupbox').css('display','');
}); 
</script>

<style>
#risk-free-logo {border: 2px solid red; float:left;margin-left:30px;height:100px;width:100px; }
#risk-free-info-div {border: 2px solid; display:none; position: relative; background-color: rgb(255, 255, 255); z-index:100; height: 170px; width: 300px; margin-left: 150px; }
</style>

<div id="risk-free-logo">Mousenter me to display...</div>
<div id="risk-free-info-div" class="popupbox">...my friend over here</div> 
```

完成后，它不会闪烁 - 请参阅我在此处创建的[JSFIDDLE](http://jsfiddle.net/y8Ptn/)。

# java - Java-Spring-quartz：为什么工作会在循环中被解雇？

> ID：10379088
> 
> 赞同：2
> 
> 时间：2012-04-30T05:55:42.497
> 
> 标签：java, spring, quartz-scheduler

我正在努力解决一个奇怪的问题，让我发疯。

我在这里遵循了很好的教程：[http ://www.mkyong.com/spring/spring-quartz-scheduler-example/](http://www.mkyong.com/spring/spring-quartz-scheduler-example/)

我选择了 cron 触发器，只是将其更改为在上午 10:45 运行。但是一旦工作开始，它就会进入一个循环并一遍又一遍地打印相同的消息。

这是我的软件：

*   春天：3.0.5
*   石英：1.8.5
*   爪哇：1.6.31

我没有更改上述教程附带的 spring-quartz.xml（cron 表达式除外）。

已编辑（添加 bean xml 内容）：

```
<bean id="runMeTask" class="com.test.RunMeTask" />
<bean name="runMeJob"
class="org.springframework.scheduling.quartz.JobDetailBean">

    <property name="jobClass" value="com.test.RunMeJob" />

    <property name="jobDataAsMap">
        <map>
            <entry key="runMeTask" value-ref="runMeTask" />
        </map>
    </property>

</bean>
<!-- Simple Trigger -->
<bean id="simpleTrigger"
    class="org.springframework.scheduling.quartz.SimpleTriggerBean">

    <property name="jobDetail" ref="runMeJob" />
    <property name="repeatInterval" value="5000" />
    <property name="startDelay" value="1000" />

</bean>
<!-- Cron Trigger -->
<bean id="cronTrigger"
    class="org.springframework.scheduling.quartz.CronTriggerBean">

    <property name="jobDetail" ref="runMeJob" />
    <property name="cronExpression" value="* 45 10 * * ?" />

</bean>
<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="jobDetails">
        <list>
        <ref bean="runMeJob" />
        </list>
    </property>
    <property name="triggers">
        <list>
        <ref bean="cronTrigger" />
        </list>
    </property>
</bean> 
```

已编辑（添加代码作业和任务代码）：

```
public class RunMeTask 
{
public void printMe() {
    try{
    System.out.println("Run Me ~");
    }
    catch(Exception e){
        e.printStackTrace();
    }
}
} 
```

***这是工作类***

```
public class RunMeJob extends QuartzJobBean
 {
private RunMeTask runMeTask;

public void setRunMeTask(RunMeTask runMeTask) {
    this.runMeTask = runMeTask;
}

protected void executeInternal(JobExecutionContext context){
    try{

    runMeTask.printMe();
    }
    catch(Exception e){
            e.printStackTrace();
    }

}
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:54:21.403

为什么你认为它是不正确的？

```
<property name="cronExpression" value="* 45 10 * * ?" /> 
```

这个 CRON 表达式意味着：~~***每天**10:45 运行作业*~~ ***在每天10:45的**每一秒**运行作业*（第一个星号是第二个）。按设计工作。也许在您的情况下（在给定时间运行一次）`SimpleTrigger`更合适（参见：）[`SimpleTriggerBean`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/scheduling/quartz/SimpleTriggerBean.html)。**

 **更新：如果您想在每天 10:45 运行一次作业，这是正确的表达式：

```
<property name="cronExpression" value="0 45 10 * * ?" /> 
```**

# php - php修剪掉不需要的文本

> ID：10379094
> 
> 赞同：0
> 
> 时间：2012-04-30T05:56:27.923
> 
> 标签：php

我在 mysql 数据库中有以下数据，它是来自 u-tube 的 iframe：-

```
`<iframe width="560" height="315" src="http://www.youtube.com/embed/Om2fabTIKE4" frameborder="0" allowfullscreen></iframe>` 
```

尽管如此，在 php 代码中，上述 iframe 存在一个当前阶段，其中我只需要 Om2fabTIKE4 作为要填充的变量。

```
I would like to ask, is there any way that I can trim away 
```

`<iframe width="560" height="315" src="http://www.youtube.com/embed/`

和

`frameborder="0" allowfullscreen></iframe>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:25:30.537

试试这个：

```
$html = '<iframe width="560" height="315" src="http://www.youtube.com/embed/Om2fabTIKE4" frameborder="0" allowfullscreen></iframe>';
$dom = new DOMDocument();                                                                           
$dom->loadHTML($html);                                                                              
$tags = $dom->getElementsByTagName('iframe');                                                       
foreach ($tags as $tag)                                                                             
  $link = explode('/',parse_url($tag->getAttribute('src'),PHP_URL_PATH));                           
var_dump($link[2]); 
```

您可以在此处了解有关[DOMDocument 类](http://php.net/manual/en/class.domdocument.php)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:03:55.573

使用[str_replace](http://php.net/manual/en/function.str-replace.php)删除文本

# java - 如何避免在 Java 中创建对象？

> ID：10379097
> 
> 赞同：3
> 
> 时间：2012-04-30T05:56:43.487
> 
> 标签：java, jakarta-ee

我是 java 编程新手，我有一个类，对于这个类，我创建了两个对象（obj1，obj2）。我不想创建这些对象以外的对象，如果有任何人想为这个类创建一个对象应该只引用第一个或第二个对象（而不是再创建一个对象）。如何做到这一点？请参考下面的代码

```
class B 
{ 
 void mymethod()
     {  
       System.out.println("B class method");
          } 
 }   
class Myclass extends B
{ 
 public static void main(String s[])
     {  
       B  obj1=new B();//this is obj1
       B  obj2=new B();//this is obj1
       B  obj3=new B();//don't allow to create this and refer this to obj1 or obj2
          } 
 } 
```

谢谢阿扎姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T05:58:22.390

查看[Singleton](http://www.javabeginner.com/learn-java/java-singleton-design-pattern)设计模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T06:01:42.267

您需要的是[单例](http://en.wikipedia.org/wiki/Singleton_pattern)设计模式。

`Class B`应该看起来像这样：

```
class B
{
    private static B instance = null;

    private B()
    {
         //Do any other initialization here
    }

    public static B getInstance()
    {
        if (instance == null)
        {
            instance = new B();
        }
        return instance;
    }
} 
```

然后，在您的 中`Myclass`，只需执行以下操作：

```
B obj1 = B.getInstance();
B obj2 = B.getInstance(); 
```

注意：这**不是**线程安全的。如果您正在寻找线程安全的解决方案，请查阅 Wiki 页面。

编辑：你也可以有一个静态初始化程序

```
class B
{
    private static B instance = null;
    static
    {
         instance = new B();
    }

    private B()
    {
         //Do any other initialization here
    }

    public static B getInstance()
    {       
        return instance;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T06:07:17.783

从 Java 6 开始，您可以使用单元素枚举类型进行单例化。根据 Joshua Bloch 的《**Effective Java》一书，这种方式是目前在 Java 1.6 或更高版本中实现单例的最佳方式。**

```
package mypackage;
public enum MyEnumSingleton {
INSTANCE;

  // other useful methods here
} 
```

.

```
"This approach is functionally equivalent to the public field approach,
 except that it is more concise, provides the serialization machinery for free, 
 and provides an ironclad guarantee against multiple instantiation, even in the 
 face of sophisticated serialization or reflection attacks. While this approach 
 has yet to be widely adopted, a single-element enum type is
 the best way to implement a singleton." 
```

在 Java 1.6 之前，一个应该是单例的类可以定义如下。

```
public class Singleton {
private static Singleton uniqInstance;

private Singleton() {
}

public static synchronized Singleton getInstance() {
    if (uniqInstance == null) {
        uniqInstance = new Singleton();
    }
    return uniqInstance;
  }
  // other useful methods here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T06:06:54.607

是的，单身人士似乎是考虑您在此处提供的信息的正确方法。

默认的单例实现如下：

```
public class Singleton {
     //holds single instance reference
     private static Singleton instance = null;

     //private constructor to avoid clients to call new on it
     private Singleton()
     {}

     public static Singleton getInstance() 
     {
        if(null == instance)
        {
           instance = new Singleton();
        }

        return instance;
     }
} 
```

现在您可以通过调用来获取对象的单个实例： Singleton instance = Singleton.getInstance();

请记住，如果您在线程环境中工作，默认情况下单例不是线程安全的。

您应该使 getInstance 方法同步以避免意外返回。

```
public synchronized static Singleton getInstance() 
{
            if(null == instance)
            {
               instance = new Singleton();
            }

            return instance;
} 
```

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T06:02:18.860

一般来说，您需要一个单例模式。您需要使构造函数成为私有方法。然后创建一个方法来实例化 B 类，因此 B 类只能由该方法实例化。看看单例模式。这是你想要的，我相信。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T06:02:41.137

您可以使用单例。你有 2 种可能性。
1\. **延迟创建**（在这里您在调用函数时创建实例`getInstance()`并检查实例是否已存在）：

```
class B {
    static private B instance;

    private void mymethod() {
        System.out.println("B class method");
    }

    static public B getInstance() {
        if (instance == null) {
            instance = new B();
        }
        return instance;
    }
}

class Myclass extends B {
    public static void main(String s[]) {
        B obj1 = B.getInstance(); // this is obj1
        B obj2 = B.getInstance();

    }
} 
```

2\. **渴望创建**（在这里您在第一次调用 Class 时创建实例）：

```
class B {
    static private B instance = new B();

    private void mymethod() {
        System.out.println("B class method");
    }

    static public B getInstance() {
        return instance;
    }
}

class Myclass extends B {
    public static void main(String s[]) {
        B obj1 = B.getInstance(); // this is obj1
        B obj2 = B.getInstance();

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T06:04:37.953

创建单例类，例如

```
public Class A {
    private static Class a = new A();

    public A getA() {
        return a;
    }
} 
```

A 类的对象已经在 A 类本身中创建。您无需在外部创建它。只需使用 getA() 方法来检索类 A 的对象。喜欢 ：

```
A  objA = A.getA(); 
```

这称为单例模式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T07:49:16.180

请注意，使用单例对您的代码来说是一个很大的限制。当无法实例化多个对象时，这可能会非常烦人。

尤其是当您无法访问源时....

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-06T18:06:12.873

我想人们还没有理解问题陈述。它说，不应创建超过 2 个对象。Singleton 创建单个对象并阻止任何进一步的实例化。

1.  在你的对象类中维护一个静态变量，在创建对象的同时递增1到对象的上限
2.  当需要创建 object > bounds 时，在 range[1,bound] 中选择一个随机数并返回该对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-24T12:51:15.900

多线程应用程序中的有效方法，以下逻辑可能会有所帮助

```
public class Singleton {
    private static volatile Singleton _instance;
    private Singleton(){}
    public static Singleton getInstance() {
        if (_instance == null) {
            synchronized (Singleton.class) {
                if (_instance == null)
                    _instance = new Singleton();
            }
        }
        return _instance;
    }
} 
```

# c - 检测命令行参数

> ID：10379100
> 
> 赞同：2
> 
> 时间：2012-04-30T05:57:06.010
> 
> 标签：c, instrumentation

我正在编写一个通过 pintools 运行的程序，以执行动态污点分析并遇到问题。问题是，当用户通过 scanf 或 get 或任何此类函数向程序提供数据时，它归结为低级 read()，我可以通过检测系统调用并找到用户提供的数据执行 read() 并最终通过查看 read() 系统调用的参数和返回值来获取数据的系统调用！然而，如果数据是由用户作为命令行参数提供的，我认为它不会归结为 read() 系统调用，也不知道如何获取该数据！有关此的任何信息都会有所帮助。请让我知道您是否需要更多信息，或者我的问题描述是否模棱两可？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:03:43.990

命令行参数通常`main`以`char**`.

如果您将主要方法重新定义为

```
int main(int argc, char *argv[]) {} 
```

除非您的环境以非常奇怪的方式运行，否则您应该在 中获取命令行参数`argv`和参数数量。`argc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:51:05.427

如果我了解您要做什么，您应该能够通过跟踪 sys 调用来查看命令行参数`execve()`。

# python - 为什么这个 Python 上的小（155 行）吃豆人游戏运行这么慢？

> ID：10379102
> 
> 赞同：0
> 
> 时间：2012-04-30T05:57:08.957
> 
> 标签：python, optimization, pygame

我已经从主循环中删除了所有可能的内容。我还优化了动态和静态对象的碰撞，大大减少了迭代次数。但是在他的机器上它仍然很慢。我会为有人想要测试它的情况发布整个文件，但您可以在“while Exit==false:”处跳转到主循环。

```
import pygame
from pyeuclid import Vector2
from math import sin,cos,pi
from random import random

class Thing:
    def __init__(self,pos):
        self.pos = pos
        things.append(self)
    def update(self): pass
    def draw(self,img): pass
    def collide(self,who): pass

class DynamicThing(Thing):
    def __init__(self,pos):
        Thing.__init__(self,pos)
        self.vel = Vector2(0,0)
        self.lastPos = pos
        self.col = (255,255,0)
        self.r = 12
        dynamic_things.append(self)
    def update(self):
        self.lastPos = self.pos
        self.pos = self.pos + self.vel
    def draw(self,img):
        pygame.draw.circle(img, (0,0,0), [int(n) for n in self.pos], self.r, self.r)
        pygame.draw.circle(img, self.col, [int(n) for n in self.pos], self.r-2, self.r-2)
    def collide(self,obj):
        Thing.collide(self,obj)
        if isinstance(obj,Wall): 
            self.pos = self.lastPos

class Wall(Thing):
    def draw(self,img):
        x,y = self.pos.x, self.pos.y
        pygame.draw.rect(img, (90,90,200), (x-16,y-16,32,32), 0)

class Pacman(DynamicThing):
    def __init__(self):
        DynamicThing.__init__(self,Vector2(32*9+16,32*12+16))
        self.col = (255,255,0)
    def update(self):
        DynamicThing.update(self)
        if (keyPressed[pygame.K_LEFT]): self.vel.x = -1
        if (keyPressed[pygame.K_RIGHT]): self.vel.x = 1
        if (keyPressed[pygame.K_DOWN]): self.vel.y = 1
        if (keyPressed[pygame.K_UP]): self.vel.y = -1
        if (self.vel.x==-1 and not keyPressed[pygame.K_LEFT]): self.vel.x = 0
        if (self.vel.x==1 and not keyPressed[pygame.K_RIGHT]): self.vel.x = 0
        if (self.vel.y==1 and not keyPressed[pygame.K_DOWN]): self.vel.y = 0
        if (self.vel.y==-1 and not keyPressed[pygame.K_UP]): self.vel.y = 0
    def collide(self,obj):
        DynamicThing.collide(self,obj)
        if isinstance(obj,Ghost):
            self.pos = Vector2(32*9+16,32*12+16)

class Ghost(DynamicThing):
    def __init__(self):
        DynamicThing.__init__(self,Vector2(32*9+16,32*10+16))
        self.col = (int(random()*255),int(random()*255),int(random()*255))
        self.vel = Vector2(0,-2)
    def update(self):
        DynamicThing.update(self)
        if random()<0.01:
            self.vel = [Vector2(2,0),Vector2(-2,0),Vector2(0,2),Vector2(0,-2)][int(random()*4)]
    def collide(self,obj):
        DynamicThing.collide(self,obj)
        if isinstance(obj,Wall):
            self.vel = [Vector2(2,0),Vector2(-2,0),Vector2(0,2),Vector2(0,-2)][int(random()*4)]

def thingAtPos(pos):
    tile_pos = Vector2(int(pos.x/32),int(pos.y/32))
    return map[tile_pos.y][tile_pos.x]

# initializate stuff
pygame.init()
clock = pygame.time.Clock()
screen = pygame.display.set_mode([32*19,32*22])
points_in_unit_circle_border = [Vector2(cos(float(a)/8*2*pi),sin(float(a)/8*2*pi)) for a in xrange(8)]
things = []
dynamic_things = []
exit = False

map =  [[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
        [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1],
        [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],
        [1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1],
        [1,1,1,1,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1],
        [1,1,1,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1],
        [1,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,1],
        [1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1],
        [1,1,1,1,0,1,0,0,0,0,0,0,0,1,0,1,1,1,1],
        [1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1],
        [1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
        [1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1],
        [1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1],
        [1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1],
        [1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1],
        [1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,1],
        [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]

#create pacman, walls, ghosts
pacman = Pacman()
for y in xrange(len(map)):
    for x in xrange(len(map[y])):
        if (map[y][x]==1):
            map[y][x] = Wall(Vector2(x*32+16,y*32+16))
for i in xrange(4):
    Ghost()

while exit==False:
    clock.tick(45)

    screen.fill([255,255,255])
    keyPressed = pygame.key.get_pressed()

    # events
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            exit = True
        if event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
            exit = True

    # more ghosts
    if random()<0.001: Ghost()

    # updates e draws
    for thing in things:
        thing.update()
        thing.draw(screen)

    # collisions
    for A in dynamic_things:
        #dynamic vs dynamic
        for B in dynamic_things:
            if A!=B and abs(A.pos-B.pos)<(A.r+B.r):
                A.collide(B)
                B.collide(A)
        #dynamic vs walls
        for circle_point in points_in_unit_circle_border:
            thing_in_a_border = thingAtPos(A.pos+circle_point*12)
            if isinstance(thing_in_a_border,Wall):
                A.collide(thing_in_a_border)

    pygame.display.flip()

pygame.quit () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:14:16.157

您在每个循环中都在重绘和翻转整个屏幕。我没有测试你的程序，但是在我知道的 pacman 上，屏幕上只有 5 个移动精灵，你应该尝试只在每一帧中对它们进行 blit（当然，如果其他东西发生了变化，那也是如此）。并且不要 display.flip()，只需更新您更改的屏幕区域（通常会加快*很多*速度）。

当然，您需要为此停止每一帧都使屏幕空白，并且要对要更新的内容进行大量管理。[在 pygame http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.DirtySprite](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.DirtySprite)中有一些对脏精灵的额外支持，可以帮助您。或者您可以通过将它们所在的位置消隐并将它们重新绘制到新位置（显然这两个区域中的所有内容）来更新所有“活动”精灵。在列表中收集受影响的矩形并将其传递给 update_rects() 而不是翻转屏幕。应该没有必要在吃豆人游戏中每一帧都画墙……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T18:50:50.623

可能不是缓慢的主要来源，但是“while exit==False:”需要比“while not exit:”多一点的字节码来执行。

# xml - XML 仅允许在使用 DTD 的元 素中进行某些输入

> ID：10379106
> 
> 赞同：1
> 
> 时间：2012-04-30T05:57:24.293
> 
> 标签：xml, dtd

好吧，我试图在类别元素中只允许以下输入（电子产品、杂货、家庭），但是我无法找出正确的方法。我正在使用内部 DTD，并且有两个完整的示例来说明我希望它如何处理文档。这是代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE manufacturer[
    <!ELEMENT manufacturer (companyName, address, phone, contactPerson?, products)>
    <!ATTLIST manufacturer identifier CDATA #REQUIRED>
    <!ELEMENT companyName (#PCDATA)>
    <!ELEMENT address (#PCDATA)>
    <!ELEMENT phone (#PCDATA)>
    <!ELEMENT contactPerson (#PCDATA)>
    <!ELEMENT products (product+)>
    <!ELEMENT product (model, price, description, category)>
    <!ATTLIST product code CDATA #REQUIRED>
    <!ELEMENT model (#PCDATA)>
    <!ELEMENT price (#PCDATA)>
    <!ELEMENT description (#PCDATA)>
    <!ELEMENT category (household|groceries|electronics)
    ]>

<manufacturer identifier = "m1">
    <companyName>Kitchen Manufacturers International</companyName>
    <address>1256 Factory Lane, Cleveland, OH 44111</address>
    <phone>216-333-4444</phone>
    <contactPerson>Fred Smith</contactPerson>
    <products>
        <product code = "X345">
            <model>Sun Beam Mixer</model>
            <price>14.75</price>
            <description>Popular handheld mixer</description>
            <category>household</category>
        </product>
        <product code = "MW30">
            <model>GE30 Microwave</model>
            <price>99.95</price>
            <description>A popular model</description>
            <category>household</category>
        </product>
    </products>
</manufacturer>

<manufacturer identifier = "m3">
    <companyName>Kraft Foods Incorporated</companyName>
    <address>1515 Kraft Avenue, Chicago, IL 37897</address>
    <phone>222-333-4444</phone>
    <products>
        <product code = "345DR">
            <model>Jiffy Peanut Butter</model>
            <price>4.95</price>
            <description>America’s favorite, made from real peanuts</description>
            <category>groceries</category>
        </product>
        <product code = "321SD">
            <model>Mac N' Cheese</model>
            <price>1.99</price>
            <description>Every child’s favorite dinner</description>
            <category>groceries</category>
        </product>
        <product code = "123DD">
            <model>Rice Krispies</model>
            <price>2.99</price>
            <description>Snap Crackle and Pop</description>
            <category>groceries</category>
        </product>
    </products>
</manufacturer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:01:50.940

您不能使用 DTD 指定对 XML 元素内容的限制。您指定的是唯一的子元素`category`可以是`household`...等。

# c++ - 使用 exit 和全局对象

> ID：10379108
> 
> 赞同：4
> 
> 时间：2012-04-30T05:57:33.293
> 
> 标签：c++

我有以下程序，我在析构函数中调用 exit() 。当我在 main() 内创建一个 sample 类型的对象时，析构函数被调用一次并且程序正常退出。但是当我创建一个样本类型的全局对象时，“Destructing..”会被无限打印出来。谁能解释一下如何？

```
#include "iostream"
#include "conio.h"

using namespace std;

class sample
{
      public:
     ~sample() {
                    cout <<"Destructing.."<<endl;
                    exit(0);
                }
};

sample obj;

int main()
{
 getch();   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:10:20.407

我同意 Micheal Slade 的观点，即在析构函数中这样做是糟糕设计的标志。但是，如果您认为有充分的理由这样做（例如，开发问题），请`abort()`使用`exit(0)`. 这将防止调用更多的析构函数并使您退出递归循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:07:27.300

正在发生的事情是，该`exit()`函数正在让程序调用所有全局对象的析构函数。并且由于在您的类的析构函数调用`exit(1);`该对象时尚未认为该对象已被破坏，因此再次调用析构函数，从而导致无限循环。

你可以摆脱这个：

```
class sample {
    bool exiting;
public:
    sample() { exiting = false; }
    ~sample() {
        cout << "Destructing.." << endl;
        if(exiting) return;
        exiting = true;
        exit(0);
    }
}; 
```

但是调用析构函数`exit()`是个坏主意。考虑以下备选方案之一：

*   为退出创建一个单独的普通（非析构函数）方法
*   创建一个一直运行到“程序”完成的函数并从中调用它`main()`
*   使用`abort()`而不是`exit()`（感谢金发姑娘提到这个）。 绕过通常在被调用时和返回时`abort()`完成的所有清理。然而，这也不一定是一个好主意，因为程序中的某些清理操作可能非常关键。 仅适用于已经严重到需要绕过清理的错误。`exit()``main()``abort()`

我之前建议过异常，但记得从析构函数内部抛出异常并改变了主意。[这就是为什么。](http://www.parashift.com/c++-faq-lite/exceptions.html#faq-17.9)

另请注意，行为并不一致 - 一些编译器/环境会导致无限循环，而有些则不会。它归结为在析构函数中的哪个点对象被认为被销毁。我猜这个标准要么没有涵盖这一点，要么说这种情况下的行为是未定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T06:03:19.617

您的破坏性析构函数调用 exit 进而调用破坏析构函数，该析构函数调用 exit 又调用 ... （是的，它持续了很长时间）。

# nosql - UNQL 与 COUCHBASE

> ID：10379113
> 
> 赞同：1
> 
> 时间：2012-04-30T05:57:53.497
> 
> 标签：nosql, couchbase, unql

我有一个要求，我想使用 UNQL 将记录插入到 COUCHBASE，任何人都可以建议我如何使用 UNQL 连接 COUCHBASE。

问候普拉迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:12:31.530

Unql 是一个开放项目和一个预览版，旨在帮助讨论使用这些较新数据库的查询语言的用例。目前，它不包含在 Couchbase 的任何版本中。

有关如何插入数据等的信息，请参见[couchbase.com/develop 。](http://couchbase.com/develop)

# reporting-services - 在 Windows 应用程序中调用 SSRS 报告

> ID：10379116
> 
> 赞同：1
> 
> 时间：2012-04-30T05:58:09.727
> 
> 标签：reporting-services

我在 asp.net c# 中有一个 Windows 应用程序，我想在按钮单击事件上调用 SSRS 报告。如何在 Windows 应用程序上调用 SSRS 报告。我在 Web 应用程序中做了同样的事情，我想做什么改变在程序层面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:29:31.730

你是如何在windows应用程序上做到这一点的？您可以通过 3 种方式从应用程序与 SSRS 进行交互，即报表服务器 Web 服务 (SOAP)、URL 访问和 Visual Studio 2005 的 reportViewer 控件。

我想说的最简单的方法是控件。在这种情况下，您可以在本地模式或远程模式下配置它们。在本地模式下，您不依赖于 SSRS 服务器并且需要将报告文件与您的应用程序一起部署（该文件需要是 .rdlc，而不是 .rdl）。在远程模式下，您可以直接访问 SSRS 并从中呈现报告。还有其他区别，比如在本地处理上，报告只能使用 PDF、excel 和图像显示

# actionscript-3 - 使用它的 labelName 或其他字段扩展 flex 中的树项

> ID：10379125
> 
> 赞同：0
> 
> 时间：2012-04-30T05:58:40.767
> 
> 标签：actionscript-3, apache-flex, tree, expand

嗨朋友这是我的要求：

当我双击“搜索”选项卡中的一个项目时，应该在“测试组树”选项卡中打开（展开）该特定项目。搜索选项卡中的项目是**列表**，**测试组树**中的项目是 TreeItem。据我所知，在其他选项卡中展开树项目的唯一方法是使用其标签名称（唯一）。

在这里，我使用下面提到的代码来实现我的要求。现在，当我双击“搜索”选项卡中的项目时，“测试组树”选项卡正确打开，但 SelectedItem 未展开（按预期在另一个选项卡中打开 - 只有“**测试组树”**选项卡打开，没有其他反应）。请帮我实现我的要求。

```
private function TSTree_itemDoubleClick(event:ListEvent):void{
    var selectedItem: TSTreeItem = TSTreeItem(TSTreeTestGroup.getSelectedFolderItem());
    this.TSTreeTestGroup.tabMain.selectedIndex=0; // Here i am trying to open a next tab(it works)

    //var selectedSampleItem: TSTreeItem = PLTreeItem(TSTreeTestGroup.treTree.getChildByName(selectedItem.label));
    TestGroupTree(TestGroupManager(this).TSTreeTestGroup).loadPartialTreeItem(selectedItem);  // Here i actually want to refresh the particular tree item       
    TestGroupTree(TestGroupManager(this).TSTreeTestGroup).treTree.expandItem(selectedItem,true,false); // here i am trying to expand the particular tree item
    //TestGroupManager(TestGroupTree(TSTree(event.currentTarget).parentDocument).parentDocument).TSTreeTestGroup.treTree.expandItem(selectedItem, true, false);
    //TestGroupManager(TestGroupTree(TSTree(event.currentTarget).parentDocument).parentDocument).TSTreeTestGroup.loadPartialTreeItem(this.TSTreeTestGroup.treTree.getChildByName(selectedItem.label);
    // in the following i am tryin to get the TreeItemName and expand it accordingly
    TestGroupTree(TestGroupManager(this).TSTreeTestGroup).treTree.expandItem(this.TSTreeTestGroup.treTree.getChildByName(selectedItem.label), true, true);
}

<?xml version="1.0"?>
<mx:Box xmlns:mx="http://www.adobe.com/2006/mxml" implements="integras.TS.component.TSTreeComponent"
    show="Component_Show();" 
    remove="Component_Remove();" >
<mx:TabNavigator id="tabMain" change="tabMain_Change();" styleName="plTitleWindowTabNavigator"  creationPolicy="all" >
        <mx:Canvas label="Test Group Tree">
            <ns1:TSTree dataProvider="{dpTree}" updateComplete="treTree_UpdateComplete();" iconFunction="getTreeIcon" labelField="label" iconField="icon" showRoot="false"  allowMultipleSelection="true" id="treTree" doubleClickEnabled="true" itemDoubleClick="treTree_ItemDoubleClick(event);"  itemClick="treTree_ItemClick(event);" itemOpen="treTree_ItemOpen(event);" >
            </ns1:TSTree>
        </mx:Canvas>
        <mx:Canvas label="Search" width="100%" height="100%" horizontalScrollPolicy="off" verticalScrollPolicy="off">
            <mx:Canvas>
                <mx:HRule/>
                <mx:List dataProvider="{dpSearch}"  dragEnabled="false" labelField="label" iconField="icon" id="lstSearch" doubleClickEnabled="true" itemDoubleClick="lstSearch_ItemDoubleClick(event);" itemClick="lstSearch_ItemClick(event);">
                </mx:List>
            </mx:Canvas>
    </mx:Canvas>
</mx:TabNavigator>
</mx:Box> 
```

提前致谢。如果您有任何疑问，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:53:04.133

如果找到展开节点，请尝试在树中搜索所选项目。我认为问题可能是您传递给树以进行扩展的所选项目。

检查此示例是否对您有帮助

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="horizontal" verticalAlign="middle">
    <mx:Script>
        <![CDATA[
            import mx.messaging.management.Attribute;
            import mx.events.ListEvent;

            import mx.controls.Alert;
            import mx.collections.XMLListCollection;

            [Bindable]
            private var searchResult:XMLList;
            private var searchResultIndex:uint = 0;

            private function findByLabel(event:Event):void
            {
                var searchStr:String = List(event.currentTarget).selectedItem.@label;
                tabMain.selectedIndex = 0;
                tree.openItems = [];
                //xmlDP.descendants().(@label == List(evt.currentTarget).selectedItem.@label)[0]
                searchResult = xmlDP.descendants().(@label.toLowerCase().search(searchStr.toLowerCase()) > -1);
                searchResultIndex = 0;
                if (searchResult[searchResultIndex] != undefined)
                    expandNode(searchResult[searchResultIndex]);
            }

            private function expandNode(xmlNode:XML):void
            {
                while (xmlNode.parent() != null) {
                    xmlNode = xmlNode.parent();
                    tree.expandItem(xmlNode, true, false);
                }
            }
      ]]>
    </mx:Script>

    <!-- Sample tree data -->
     <mx:XML id="xmlDP">
        <root>
                <node label="Parent 1">
                    <node label="Child 1"/>
                    <node label="Child 2">
                        <node label="Grandchild 1"/>
                        <node label="Grandchild 2"/>
                    </node>
                    <node label="Child 3"/>
                    <node label="Child 4"/>
                    <node label="Child 5">
                        <node label="Grandchild 1"/>
                        <node label="Grandchild 2"/>
                    </node>
                </node>
            </root>
    </mx:XML>

    <mx:XMLListCollection id="xmlMenuList" source="{xmlDP.*}"/>

    <mx:XMLList id="listData">
          <data>
            <node label="Parent 1" />
            <node label="Child 1"/>
            <node label="Child 2"/>
            <node label="Grandchild 1"/>
            <node label="Grandchild 2" />
            <node label="Child 3"/>
            <node label="Child 4"/>
            <node label="Child 5"/>
            <node label="Grandchild 1"/>
            <node label="Grandchild 2" />
        </data>
    </mx:XMLList>

    <mx:TabNavigator id="tabMain" creationPolicy="all" width="100%" >
            <mx:Canvas label="Test Group Tree">
                <mx:Tree dataProvider="{xmlMenuList}" labelField="@label" iconField="icon" showRoot="false"  
                         allowMultipleSelection="true" id="tree" doubleClickEnabled="true" width="100%">
                </mx:Tree>
            </mx:Canvas>
            <mx:Canvas label="Search" width="100%" height="100%" horizontalScrollPolicy="off" verticalScrollPolicy="off">
                <mx:Canvas width="100%">
                    <mx:HRule/>
                    <mx:List dataProvider="{listData.node}"  dragEnabled="false" labelField="@label" id="lstSearch"
                             width="100%" itemClick="findByLabel(event)">
                    </mx:List>
                </mx:Canvas>
            </mx:Canvas>
    </mx:TabNavigator>

</mx:Application> 
```

# sql - 多语言数据库设计

> ID：10379129
> 
> 赞同：1
> 
> 时间：2012-04-30T05:59:01.547
> 
> 标签：sql, database-design, relational-database, multilingual, hierarchical-data

我正在尝试为多语言应用程序设计数据库模式。到目前为止，我已经从这个地址找到了一个样本。[http://fczaja.blogspot.com/2010/08/multilanguage-database-design.html](http://fczaja.blogspot.com/2010/08/multilanguage-database-design.html)

但我还没有理解这个样本。我应该先在 app_product 上插入 Id 值吗？我怎么知道这些值对于 app_product_translation 上的 ProductId 是正确的？

```
CREATE TABLE ref_language (
  Code Char(2)NOT NULL,
  Name Varchar(20) NOT NULL,
  PRIMARY KEY (Code)
);

CREATE TABLE app_product (
 Id Int IDENTITY NOT NULL,
 PRIMARY KEY (Id)
);

CREATE TABLE app_product_translation (
 ProductId Int NOT NULL,
 LanguageCode Char(2) NOT NULL,
 Description Text NOT NULL,
 FOREIGN KEY (ProductId) REFERENCES app_product(Id),
 FOREIGN KEY (LanguageCode) REFERENCES ref_language(Code)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:12:49.290

它看起来像 SQLServer 代码，基于该假设进行。

是的，您必须先插入 app_product。但是您不能插入 id 列的值。它是自动分配的，因为它是一个标识列。

您可以检查两件事...在插入后查找标识列的值。

1.  INSERT 语句的 OUTPUT 子句。它可以返回任何插入的值，而不仅仅是标识列。
2.  @@Identity 变量。（到目前为止更传统和流行）

> ```
> declare @lastid int
> insert into x values (1,2,3)
> set @lastid = @@identity
> 
> insert into y values (@lastid, a, b, c) 
> ```

# android - 从另一个活动完成一个活动

> ID：10379134
> 
> 赞同：112
> 
> 时间：2012-04-30T05:59:38.007
> 
> 标签：android, android-intent, android-activity

我想从另一项活动中完成一项活动，例如：

在 Activity [A] 中，单击按钮时，我正在调用 Activity [B] 而不完成 Activity [A]。

现在在 Activity [B] 中，有两个按钮，**新建**和**修改**。当用户单击修改时，然后从堆栈中弹出一个活动 [A] 并勾选所有选项..

但是当用户从 Activity [B] 中单击**New**按钮时，我将不得不从堆栈中完成 Activity [A] 并将该 Activity [A] 重新加载到堆栈中。

我正在尝试，但我无法从堆栈中完成 Activity [A] ......我该怎么做？

我将代码用作：

来自活动 [A]：

```
Intent GotoB = new Intent(A.this,B.class);
startActivityForResult(GotoB,1); 
```

同一活动中的另一种方法

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {

    if (requestCode == 1)
    {
        if (resultCode == 1) {
            Intent i = getIntent();
            overridePendingTransition(0, 0);
            i.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            finish();

            overridePendingTransition(0, 0);
            startActivity(i);
        }
    }
} 
```

在活动 [B] 中，单击按钮：

```
setResult(1);
finish(); 
```

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-04-30T06:40:37.947

1.  在清单文件中创建您的活动 A：`launchMode = "singleInstance"`

2.  当用户单击新建时，执行`FirstActivity.fa.finish();`并调用新的 Intent。

3.  当用户点击修改时，调用新的 Intent 或简单地完成活动 B。

**第一种方式**

`Activity object`在您的第一个活动中，像这样声明一个，

```
public static Activity fa;
onCreate()
{
    fa = this;
} 
```

现在在另一个中使用该对象`Activity`来完成这样的第一个活动，

```
onCreate()
{
    FirstActivity.fa.finish();
} 
```

**第二种方式**

在调用您`FirstActivity`想要继续完成的活动时，您可以在调用时添加标志`FirstActivity`

```
intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY); 
```

但是使用这个标志，即使你不希望它完成，活动也会完成。有时`onBack`如果你想展示`FirstActivity`你将不得不使用意图来调用它。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2012-04-30T06:14:07.660

你可以这样做，但我认为你不应该打破正常的活动流程。如果你想完成你的活动，那么你可以简单地从你的活动 B 发送一个广播到活动 A。

在开始您的活动 B 之前创建一个广播接收器：

```
BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context arg0, Intent intent) {
        String action = intent.getAction();
        if (action.equals("finish_activity")) {
            finish();
            // DO WHATEVER YOU WANT.
        }
    }
};
registerReceiver(broadcastReceiver, new IntentFilter("finish_activity")); 
```

当您想从 B 完成活动 A 时，从活动 B 向活动 A 发送广播

```
Intent intent = new Intent("finish_activity");
sendBroadcast(intent); 
```

我希望它对你有用...

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-30T06:15:21.657

这是一个相当标准的沟通问题。一种方法是在活动 A 中使用 ResultReceiver：

```
Intent GotoB=new Intent(A.this,B.class);
GotoB.putExtra("finisher", new ResultReceiver(null) {
    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        A.this.finish();
    }
});
startActivityForResult(GotoB,1); 
```

然后在活动 B 中，您可以像这样按需完成它：

```
((ResultReceiver)getIntent().getExtra("finisher")).send(1, new Bundle()); 
```

尝试类似的东西。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-30T06:44:18.940

您可以在您的情况下使用一种方法。

Step1：从Activity A启动Activity B

```
startActivity(new Intent(A.this, B.class)); 
```

Step2：如果用户点击修改按钮启动Activity A，使用`FLAG_ACTIVITY_CLEAR_TOP`.Also，额外传递flag。

```
Intent i = new Intent(B.this, A.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.putExtra("flag", "modify");
startActivity(i);
finish(); 
```

第三步：如果用户点击添加按钮，使用 .Also 启动 Activity A `FLAG_ACTIVITY_CLEAR_TOP`，额外传递标志。`FLAG_ACTIVITY_CLEAR_TOP`如果在目标活动中没有定义启动模式，将清除所有打开的活动直到目标并重新启动

```
Intent i = new Intent(B.this, A.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.putExtra("flag", "add");
startActivity(i);
finish(); 
```

Step4：现在`onCreate()`Activity A的方法，需要检索那个标志。

```
String flag = getIntent().getStringExtra("flag");
if(flag.equals("add")) {
    //Write a code for add
}else {
    //Write a code for modifying
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-07-12T14:23:06.217

使用请求代码开始您的活动：

```
StartActivityForResult(intent,1234); 
```

你可以从任何其他活动中关闭它：

```
finishActivity(1234); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-30T06:12:58.200

请参阅[我对 Stack Overflow 问题*Finish All previous activity*](https://stackoverflow.com/questions/6330260/finish-all-previous-activities/6330456#6330456)的回答。

您需要的是添加`Intent.FLAG_CLEAR_TOP`. 此标志确保堆栈中目标活动之上的所有活动都已完成并显示。

您需要的另一件事是`SINGLE_TOP`旗帜。如果堆栈中已经创建了一个活动，则使用这个可以防止 Android 创建一个新活动。

请注意，如果活动已经创建，带有这些标志的意图将`onNewIntent(intent)`在目标活动中调用的方法中传递（您需要重载它来处理它）。

然后，`onNewIntent`您有一个名为 restart 的方法，或者会调用`finish()`并向自身发起新意图的`repopulate()`方法，或者有一个设置新数据的方法。我更喜欢第二种方法，它更便宜，你总是可以将 `onCreate`逻辑提取到一个单独的方法中，你可以调用它来填充。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-03-29T12:01:44.047

我刚刚应用了 Nepster 的解决方案，并且效果很好。有一个小的修改可以从 Fragment 运行它。

到你的片段

```
// sending intent to onNewIntent() of MainActivity
Intent intent = new Intent(getActivity(), MainActivity.class);
intent.putExtra("transparent_nav_changed", true);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

对于您想要重新启动的 Activity 的 OnNewIntent()。

```
// recreate activity when transparent_nav was just changed
if (getIntent().getBooleanExtra("transparent_nav_changed", false)) {
    finish(); // finish and create a new Instance
    Intent restarter = new Intent(MainActivity.this, MainActivity.class);
    startActivity(restarter);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-26T14:45:02.980

我认为我有最简单的方法...在 B 中按 new ..

```
Intent intent = new Intent(B.this, A.class);
intent.putExtra("NewClicked", true);
 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

并在 A 中得到它

```
 if (getIntent().getBooleanExtra("NewClicked", false)) {
        finish();// finish yourself and make a create a new Instance of yours.
      Intent intent = new Intent(A.this,A.class);
      startActivity(intent);
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-09T03:34:16.010

我知道这是一个老问题，其中一些方法对我不起作用，所以对于任何展望未来或遇到麻烦的人来说，这对我有用

我覆盖`onPause`并在该方法内部调用`finish()`。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2018-01-29T15:42:43.340

先调用`startactivity()`后使用`finish()`

# html - 在鼠标悬停和鼠标单击时更改菜单颜色

> ID：10379145
> 
> 赞同：1
> 
> 时间：2012-04-30T06:00:43.060
> 
> 标签：html, menu, colors, background, onclick

下面给出了我的菜单项的 html 代码

```
<div id="menuBar">
<ul>
<li><a href="${pageContext.request.contextPath}/jsp/Main.jsp?menu=3&skin=1&p=Javascript-Menus">Home</a></li>
<li><a href="${pageContext.request.contextPath}/jsp/RootSipResourceUI.jsp?menu=3&skin=1&p=Horizontal-Menus">Add</a></li>
<li><a href="${pageContext.request.contextPath}/jsp/EditAppId.jsp?menu=3&skin=1&p=Web-Menus" onclick="changeColor(this);">Edit</a></li>
<li><a href="${pageContext.request.contextPath}/jsp/EditAppId.jsp?menu=3&skin=1&p=Web-Menus">Remove</a></li>
</ul>
</div> 
```

我需要使用 javascript 或 css html 在 mouseover 和 mouseclick 事件上更改菜单项的背景颜色。请帮我。我试过。但没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:04:37.057

您的链接可能需要`class`hrefLink 的名称，而不是共享相同的`id`.

你的 CSS 应该有如下条目：

```
#menuBar a { style... }
#menuBar a:hover { style... } 
```

希望有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T08:41:59.673

[参考这个网站。我认为这就是你所需要的。](http://www.menucool.com/horizontal/javascript-menu)

[代码在这里](http://www.menucool.com/horizontal/menu-code?menu=3&skin=2&p=1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T06:49:49.140

以上所有答案都是正确的，它们完全满足您的要求。就 onmouseclick 而言，如果您想使用 Jquery，那么....

```
<script>
$(document).ready(function() {
$("#menuBar > a").click(function() {
$(this).addClass("active");
});
});
</script>

<style>
.active { background:#3d3d3d; }
</style> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T06:09:22.723

由于您的链接中有 id 属性，因此您需要使用 css 来设置链接的样式，例如

```
#hrefLink a { background-color:white; }
#hrefLink a:hover { background-color:black; } 
```

Css id 元素应该只出现在页面上一次，所以我会推荐使用 css 类和上面给出的示例。

```
.hrefLink a { style... }
.hrefLink a:hover { style... } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T06:37:38.450

试试这个：

```
.ClassA:hover
{
 background-color: #245250;
}
.ClassB:active
{
 background-color: #FFFFFF;
} 
```

# database - RavenDB 中 GetDatabaseNames 函数中的分页

> ID：10379147
> 
> 赞同：1
> 
> 时间：2012-04-30T06:01:10.693
> 
> 标签：database, pagination, ravendb

我正在使用 RavenDB build 701，在 GetDatabaseNames(int pageSize) 函数中，我需要一次获取 5 个数据库。获取数据库的数量非常容易，但是如果我想要接下来的 5 个数据库等等，那么我找不到任何具有此功能的分页方案。请告诉我这样做的正确方法。太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:16:56.663

Rajdeep，API 目前不支持此功能。您可以直接向[http://raven-server/databases/?pageSize=5&start=5发出 http 请求](http://raven-server/databases/?pageSize=5&start=5)

（给我 5 - 10 个数据库）

# jquery - 从 AJAX 结果中删除元素

> ID：10379150
> 
> 赞同：0
> 
> 时间：2012-04-30T06:01:22.533
> 
> 标签：jquery, arrays

[这是我的代码](http://jsfiddle.net/5Yj8g/1/)`removeElements`...如果存在，我想删除“”数组中列出的元素。所以我通过那个数组做了一个循环。如果该数组以变量 X 中存在的元素开头，则一切正常。像 ：

```
var removeElements = new Array(".cindymenubar", ".menu", ".drop-menu-layout", ".right-menu", ".menu-box", "#nav", "#MainHMenu", "#MainVMenu", ".slide-menu-layout"); 
```

但如果它以变量 X 中未使用的元素开头，`null`则会返回

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:04:33.997

```
 $.each(removeElements, function(index, val) {
       $(x).remove(val);
    }); 
```

**或者：**

```
 var TempHTML = $('<div/>').html(x);
     $(removeElments.join(', '), TempHTML).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:30:19.173

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            //Variable that holds Html returns from ajax onsuccess callback
            var x = "<div id='SB_ContentsBlock_seo' class='SB_ContentsBlock'>  <!--@SBML_SEO--><h1>Testing</h1><br />  <div class='SB_ContentsBlockHolder'>Testing For Remove Elements From AJAX Result </div></div>    <div class='cindycontent'>  <div class='cindyheader'>  <div class='cindybanner'>  <div id='SB_ContentsBlock_banner'>  <!--@SBML_BANNER-->  </div>  </div>  <div class='cindylogo'>  <div id='SB_ContentsBlock_paragraph01' class='SB_ContentsBlock'>  <!--@SBML_PARAGRAPH01-->  <div class='SB_ContentsBlockHolder'> </div></div>  </div>  </div>  <div class='cindymenubar'><ul style='display:none;' id='MainHMenu'><li><a href='index.html' target='_self'><p>خانه</p></a><ul><li><a href='orderproduct.html' target='_self'><p>فرم سفارش محصول</p></a></li></ul></li><li><a href='contact.html' target='_self'><p>تماس با ما</p></a></li><li><a href='artciles_sub3.html' target='_self'><p>تست منو</p></a><ul><li><a href='nTest.html' target='_self'><p>آزمايشي</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='nTest2.html' target='_self'><p>تست</p></a></li><li><a href='page.html' target='_self'><p>تست 2</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='mainpagebank.html' target='_self'><p>تست3</p></a></li></ul></li><li><a href='testpage2.html' target='_self'><p>صفحه آزمايشي2</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='javascript:void(0)' style='cursor:default;'><p>هويج</p></a></li><li><a href='testpage.html' target='_self'><p>صفحه آزمايشي 3</p></a></li></ul></li></ul></li><li><a href='articles.html' target='_self'><p>مقالات</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='modules_test.html' target='_self'><p>ماژول ها</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='newsmod.html' target='_self'><p>ماژول اخبار</p></a></li><li><a href='productsmod.html' target='_self'><p>ماژول محصولات</p></a></li></ul></li><li><a href='articles_sub.html' target='_self'><p>زير صفحه مقالات</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='faq.html' target='_self'><p>سوال و جواب</p></a></li></ul></li></ul></li></ul></li><li><a href='memberspage.html' target='_self'><p>صفحات اعضا</p></a><ul><li><a href='signinusers.html' target='_self'><p>ورود و خروج اعضاء</p></a><div class='sitebaansubmenuarrow'></div><ul></ul></li><li><a href='msginbox.html' target='_self'><p>صندوق پيامها</p></a></li><li><a href='0000000.html' target='_self'><p>Inbox</p></a></li><li><a href='signupsite.html' target='_self'><p>عضويت در سايت</p></a><div class='sitebaansubmenuarrow'></div><ul></ul></li><li><a href='memberssearch.html' target='_self'><p>جستجوي اعضاء</p></a></li><li><a href='profileedit.html' target='_self'><p>ويرايش پروفايل</p></a></li><li><a href='tetstetst.html' target='_self'><p>ليست اعضاء</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='menuchildtest.html' target='_self'><p>تست زير صفحه منو</p></a></li></ul></li></ul></li><li><a href='fruitlist.html' target='_self'><p>ميوه فروشي</p></a><ul><li><a href='viewbill.html' target='_self'><p>نمايش صورت حساب</p></a></li><li><a href='mybasket.html' target='_self'><p>سبد خريد</p></a></li></ul></li><li><a href='mypagessss.html' target='_self'><p>صفحه من</p></a><ul><li><a href='templatetest.html' target='_self'><p>تست قالب</p></a></li></ul></li><li><a href='showarticles.html' target='_self'><p>نمايش مقلات</p></a></li><li><a href='formcontact.html' target='_self'><p>فرم</p></a><ul><li><a href='filmorder.html' target='_self'><p>سفارش فيلم</p></a></li><li><a href='adv_form.html' target='_self'><p>فرم ساز پيشرفته</p></a></li></ul></li><li><a href='myhavij.html' target='_self'><p>هويج</p></a><ul><li><a href='continue2.html' target='_self'><p>دنباله دوم</p></a></li><li><a href='continue3.html' target='_self'><p>دنباله سوم</p></a></li></ul></li><li><a href='hesabi.html' target='_self'><p>حسابي</p></a><ul><li><a href='subbpage.html' target='_self'><p>زيرصفحه</p></a></li><li><a href='test_hesabi.html' target='_self'><p>test</p></a></li></ul></li></ul>      </div>  <div class='cindypagecontent'>  <div class='cindyleft'>  <div id='SB_ContentsBlock_paragraphleft' class='SB_ContentsBlock'>  <!--@SBML_PARAGRAPHLEFT-->  <div class='SB_ContentsBlockHolder'> </div></div>  </div>  <div class='cindymodules'>        <div id='SB_ContentsBlock_contentpane' class='SB_ContentsBlock'>  <!--PRID 1931-->    <div id='SB_Paragraph_1931'  style='  clear:both;  width: 98%; border-style: solid; border-color: #000000; border-width: 0px 0px 0px 0px ; float: none; margin: 3px 3px 10px 3px; padding: 3px 3px 3px 3px;'>  <div class='SB_Paragraph_Content'></div>    <div style='direction:inherit;width:100%;background-color:transparent; border:0px solid #E2E2E2;'>    <table style='border-collapse: collapse;width:100%;'>  <tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  1  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=i6b1g4i5006e&cntid=2649'>  هدايت الله درياني  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>2,230,002,000</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/12/08</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  2  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=p5i9n4p5006e&cntid=2649'>  باباشاه  </a>  </td>  <td style='width:150px'>babashah@msn.com</td>  <td>445,003,660</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/20</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  3  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=h7y2f6h6006e&cntid=2649'>  ايمان محمدي  </a>  </td>  <td style='width:150px'>credo61@gmail.com</td>  <td>220,033,666</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  4  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=c7u2z5c6006e&cntid=2649'>  زرطزر  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>طزرطزر</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  5  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=g4y8e2g3006e&cntid=2649'>  نادر نيکفر  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>1,422,222</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  6  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=n3f7l1n2006e&cntid=2649'>  کوروش نعمتي  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>9,123,182,230</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  7  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=m3e7k1m2006e&cntid=2649'>  ليلا شبستري  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>2,558,833,699</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  8  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=w3o7u1w2006e&cntid=2649'>  رحيم مشايي  </a>  </td>  <td style='width:150px'>rahim@msn.com</td>  <td>9,123,182,230</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  9  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=p2h6m9p1006e&cntid=2649'>  صبورچي  </a>  </td>  <td style='width:150px'>saboorchi@pic.ir</td>  <td>2,203,366,666</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  10  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=oof6o4dn006e&cntid=2649'>  يدالله تارنتينو  </a>  </td>  <td style='width:150px'>yadolah.tarentno@gmail.com</td>  <td>2,358,222,000</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  11  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=jilb5bv4006e&cntid=2649'>  احسان سميعي  </a>  </td>  <td style='width:150px'>ehsan@yahoo.com</td>  <td>33,253,690</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/09</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  12  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=96xd6y9g006e&cntid=2649'>  حسن کچل  </a>  </td>  <td style='width:150px'>hasankachal@yahoo.com</td>  <td>25,500,366</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/09</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  13  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=7lyc81ns006e&cntid=2649'>  جوليا اندرسون  </a>  </td>  <td style='width:150px'>julia@yahoo.com</td>  <td>225,522,200</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/07</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  14  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=nne5n3cl006e&cntid=2649'>  رها اعتمادي  </a>  </td>  <td style='width:150px'>raha@yahoo.com</td>  <td>2,522,336,666</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/07</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  15  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=ff6wgu3e006e&cntid=2649'>  حسن حسني  </a>  </td>  <td style='width:150px'>hasan@yaahoo.com</td>  <td>2,253,231,321</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  16  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=kimc6cw5006e&cntid=2649'>  سيم سيم  </a>  </td>  <td style='width:150px'>simsim@yahoo.com</td>  <td>654,456,464</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  17  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=srj9s8hq006e&cntid=2649'>  جورابيان  </a>  </td>  <td style='width:150px'>joorabian@yahoo.com</td>  <td>2,503,300</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  18  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=om2iy2z8006e&cntid=2649'>  تينا رحماني  </a>  </td>  <td style='width:150px'>tina@yahoo.com</td>  <td>91,250,032,009</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  19  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=clz18fcv006e&cntid=2649'>  ايمان محمدي  </a>  </td>  <td style='width:150px'>credo61@asd.com</td>  <td>sdf</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/04</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  20  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=wvyoko9j006e&cntid=2649'>  عباس  </a>  </td>  <td style='width:150px'>abbas@msn.com</td>  <td>145,000,036</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/04</td>  </tr>  </table>          </td></tr><tr>    </tr>    <tr>  <td colspan='1'>    <div align='center'>  <table class='mgpagecount' style='border-collapse:collapse; background-color:Transparent; color:#000000;font:11px Tahoma; font-weight:300;'>    <tr>  <td>    <span style='filter: alpha(opacity=40); opacity: 0.4;cursor:default;'>صفحه قبل</span>    </td>  <td><span>| 1</span> / <span>2 |</span></td>  <td>    <a style='text-decoration: none;color:#000000;' href='?page=2&'>صفحه بعد</a>    </td>  </tr>    </table>  </div>    </td>  </tr>    </table>    </div>      </div>    <!--PRID 1931 END-->  <!--@SBML_CONTENTPANE-->  <div class='SB_ContentsBlockHolder'> </div></div>      </div>  <div class='cindyright'>    <div id='SB_ContentsBlock_paragraphright' class='SB_ContentsBlock'>  <!--@SBML_PARAGRAPHRIGHT-->  <div class='SB_ContentsBlockHolder'> </div></div>    <ul style='display:none;' id='MainVMenu'><li><a href='orderproduct.html' target='_self'><p>فرم سفارش محصول</p></a></li></ul>        </div>  </div>    <div class='cindycopyright'>  <div id='SB_ContentsBlock_copyright'>  <!--@SBML_COPYRIGHT-->  </div>  </div>  </div>";

            var TempHTML = $(x).remove('.cindymenubar, .menu, .drop-menu-layout, .right-menu, .menu-box, #nav, #MainHMenu, #MainVMenu, .slide-menu-layout').html();

            $('body').html(TempHTML);
        });  
    </script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T14:36:56.813

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var removeElements = new Array(".cindymenubar", ".menu", ".drop-menu-layout", ".right-menu", ".menu-box", "#nav", "#MainHMenu", "#MainVMenu", ".slide-menu-layout");

            //Variable that holds Html returns from ajax onsuccess callback
            var x = "<div id='SB_ContentsBlock_seo' class='SB_ContentsBlock'>  <!--@SBML_SEO--><h1>Testing</h1><br />  <div class='SB_ContentsBlockHolder'>Testing For Remove Elements From AJAX Result </div></div>    <div class='cindycontent'>  <div class='cindyheader'>  <div class='cindybanner'>  <div id='SB_ContentsBlock_banner'>  <!--@SBML_BANNER-->  </div>  </div>  <div class='cindylogo'>  <div id='SB_ContentsBlock_paragraph01' class='SB_ContentsBlock'>  <!--@SBML_PARAGRAPH01-->  <div class='SB_ContentsBlockHolder'> </div></div>  </div>  </div>  <div class='cindymenubar'><ul style='display:none;' id='MainHMenu'><li><a href='index.html' target='_self'><p>خانه</p></a><ul><li><a href='orderproduct.html' target='_self'><p>فرم سفارش محصول</p></a></li></ul></li><li><a href='contact.html' target='_self'><p>تماس با ما</p></a></li><li><a href='artciles_sub3.html' target='_self'><p>تست منو</p></a><ul><li><a href='nTest.html' target='_self'><p>آزمايشي</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='nTest2.html' target='_self'><p>تست</p></a></li><li><a href='page.html' target='_self'><p>تست 2</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='mainpagebank.html' target='_self'><p>تست3</p></a></li></ul></li><li><a href='testpage2.html' target='_self'><p>صفحه آزمايشي2</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='javascript:void(0)' style='cursor:default;'><p>هويج</p></a></li><li><a href='testpage.html' target='_self'><p>صفحه آزمايشي 3</p></a></li></ul></li></ul></li><li><a href='articles.html' target='_self'><p>مقالات</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='modules_test.html' target='_self'><p>ماژول ها</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='newsmod.html' target='_self'><p>ماژول اخبار</p></a></li><li><a href='productsmod.html' target='_self'><p>ماژول محصولات</p></a></li></ul></li><li><a href='articles_sub.html' target='_self'><p>زير صفحه مقالات</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='faq.html' target='_self'><p>سوال و جواب</p></a></li></ul></li></ul></li></ul></li><li><a href='memberspage.html' target='_self'><p>صفحات اعضا</p></a><ul><li><a href='signinusers.html' target='_self'><p>ورود و خروج اعضاء</p></a><div class='sitebaansubmenuarrow'></div><ul></ul></li><li><a href='msginbox.html' target='_self'><p>صندوق پيامها</p></a></li><li><a href='0000000.html' target='_self'><p>Inbox</p></a></li><li><a href='signupsite.html' target='_self'><p>عضويت در سايت</p></a><div class='sitebaansubmenuarrow'></div><ul></ul></li><li><a href='memberssearch.html' target='_self'><p>جستجوي اعضاء</p></a></li><li><a href='profileedit.html' target='_self'><p>ويرايش پروفايل</p></a></li><li><a href='tetstetst.html' target='_self'><p>ليست اعضاء</p></a><div class='sitebaansubmenuarrow'></div><ul><li><a href='menuchildtest.html' target='_self'><p>تست زير صفحه منو</p></a></li></ul></li></ul></li><li><a href='fruitlist.html' target='_self'><p>ميوه فروشي</p></a><ul><li><a href='viewbill.html' target='_self'><p>نمايش صورت حساب</p></a></li><li><a href='mybasket.html' target='_self'><p>سبد خريد</p></a></li></ul></li><li><a href='mypagessss.html' target='_self'><p>صفحه من</p></a><ul><li><a href='templatetest.html' target='_self'><p>تست قالب</p></a></li></ul></li><li><a href='showarticles.html' target='_self'><p>نمايش مقلات</p></a></li><li><a href='formcontact.html' target='_self'><p>فرم</p></a><ul><li><a href='filmorder.html' target='_self'><p>سفارش فيلم</p></a></li><li><a href='adv_form.html' target='_self'><p>فرم ساز پيشرفته</p></a></li></ul></li><li><a href='myhavij.html' target='_self'><p>هويج</p></a><ul><li><a href='continue2.html' target='_self'><p>دنباله دوم</p></a></li><li><a href='continue3.html' target='_self'><p>دنباله سوم</p></a></li></ul></li><li><a href='hesabi.html' target='_self'><p>حسابي</p></a><ul><li><a href='subbpage.html' target='_self'><p>زيرصفحه</p></a></li><li><a href='test_hesabi.html' target='_self'><p>test</p></a></li></ul></li></ul>      </div>  <div class='cindypagecontent'>  <div class='cindyleft'>  <div id='SB_ContentsBlock_paragraphleft' class='SB_ContentsBlock'>  <!--@SBML_PARAGRAPHLEFT-->  <div class='SB_ContentsBlockHolder'> </div></div>  </div>  <div class='cindymodules'>        <div id='SB_ContentsBlock_contentpane' class='SB_ContentsBlock'>  <!--PRID 1931-->    <div id='SB_Paragraph_1931'  style='  clear:both;  width: 98%; border-style: solid; border-color: #000000; border-width: 0px 0px 0px 0px ; float: none; margin: 3px 3px 10px 3px; padding: 3px 3px 3px 3px;'>  <div class='SB_Paragraph_Content'></div>    <div style='direction:inherit;width:100%;background-color:transparent; border:0px solid #E2E2E2;'>    <table style='border-collapse: collapse;width:100%;'>  <tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  1  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=i6b1g4i5006e&cntid=2649'>  هدايت الله درياني  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>2,230,002,000</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/12/08</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  2  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=p5i9n4p5006e&cntid=2649'>  باباشاه  </a>  </td>  <td style='width:150px'>babashah@msn.com</td>  <td>445,003,660</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/20</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  3  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=h7y2f6h6006e&cntid=2649'>  ايمان محمدي  </a>  </td>  <td style='width:150px'>credo61@gmail.com</td>  <td>220,033,666</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  4  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=c7u2z5c6006e&cntid=2649'>  زرطزر  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>طزرطزر</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  5  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=g4y8e2g3006e&cntid=2649'>  نادر نيکفر  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>1,422,222</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  6  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=n3f7l1n2006e&cntid=2649'>  کوروش نعمتي  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>9,123,182,230</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  7  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=m3e7k1m2006e&cntid=2649'>  ليلا شبستري  </a>  </td>  <td style='width:150px'>mbarzi@gmail.com</td>  <td>2,558,833,699</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  8  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=w3o7u1w2006e&cntid=2649'>  رحيم مشايي  </a>  </td>  <td style='width:150px'>rahim@msn.com</td>  <td>9,123,182,230</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  9  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=p2h6m9p1006e&cntid=2649'>  صبورچي  </a>  </td>  <td style='width:150px'>saboorchi@pic.ir</td>  <td>2,203,366,666</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  10  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=oof6o4dn006e&cntid=2649'>  يدالله تارنتينو  </a>  </td>  <td style='width:150px'>yadolah.tarentno@gmail.com</td>  <td>2,358,222,000</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/10</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  11  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=jilb5bv4006e&cntid=2649'>  احسان سميعي  </a>  </td>  <td style='width:150px'>ehsan@yahoo.com</td>  <td>33,253,690</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/09</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  12  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=96xd6y9g006e&cntid=2649'>  حسن کچل  </a>  </td>  <td style='width:150px'>hasankachal@yahoo.com</td>  <td>25,500,366</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/09</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  13  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=7lyc81ns006e&cntid=2649'>  جوليا اندرسون  </a>  </td>  <td style='width:150px'>julia@yahoo.com</td>  <td>225,522,200</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/07</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  14  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=nne5n3cl006e&cntid=2649'>  رها اعتمادي  </a>  </td>  <td style='width:150px'>raha@yahoo.com</td>  <td>2,522,336,666</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/07</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  15  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=ff6wgu3e006e&cntid=2649'>  حسن حسني  </a>  </td>  <td style='width:150px'>hasan@yaahoo.com</td>  <td>2,253,231,321</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  16  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=kimc6cw5006e&cntid=2649'>  سيم سيم  </a>  </td>  <td style='width:150px'>simsim@yahoo.com</td>  <td>654,456,464</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  17  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=srj9s8hq006e&cntid=2649'>  جورابيان  </a>  </td>  <td style='width:150px'>joorabian@yahoo.com</td>  <td>2,503,300</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  18  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=om2iy2z8006e&cntid=2649'>  تينا رحماني  </a>  </td>  <td style='width:150px'>tina@yahoo.com</td>  <td>91,250,032,009</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/06</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  19  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=clz18fcv006e&cntid=2649'>  ايمان محمدي  </a>  </td>  <td style='width:150px'>credo61@asd.com</td>  <td>sdf</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/04</td>  </tr>  </table>          </td></tr><tr>    <td style='padding:0px;width:100%;'>      <table class='mymgreport'  style='width:100%;'>  <tr>  <td style='width:20px;border-right:3px solid #a7c6eb;'>  20  </td>  <td style='width:150px;'>  <a href='?m=mg&mc=showdetails&m_id=wvyoko9j006e&cntid=2649'>  عباس  </a>  </td>  <td style='width:150px'>abbas@msn.com</td>  <td>145,000,036</td>  <td>@@MG:HAVIJ@@</td>  <td>1389/11/04</td>  </tr>  </table>          </td></tr><tr>    </tr>    <tr>  <td colspan='1'>    <div align='center'>  <table class='mgpagecount' style='border-collapse:collapse; background-color:Transparent; color:#000000;font:11px Tahoma; font-weight:300;'>    <tr>  <td>    <span style='filter: alpha(opacity=40); opacity: 0.4;cursor:default;'>صفحه قبل</span>    </td>  <td><span>| 1</span> / <span>2 |</span></td>  <td>    <a style='text-decoration: none;color:#000000;' href='?page=2&'>صفحه بعد</a>    </td>  </tr>    </table>  </div>    </td>  </tr>    </table>    </div>      </div>    <!--PRID 1931 END-->  <!--@SBML_CONTENTPANE-->  <div class='SB_ContentsBlockHolder'> </div></div>      </div>  <div class='cindyright'>    <div id='SB_ContentsBlock_paragraphright' class='SB_ContentsBlock'>  <!--@SBML_PARAGRAPHRIGHT-->  <div class='SB_ContentsBlockHolder'> </div></div>    <ul style='display:none;' id='MainVMenu'><li><a href='orderproduct.html' target='_self'><p>فرم سفارش محصول</p></a></li></ul>        </div>  </div>    <div class='cindycopyright'>  <div id='SB_ContentsBlock_copyright'>  <!--@SBML_COPYRIGHT-->  </div>  </div>  </div>";

            var TempHTML = $(x).remove(removeElements.join(',')).html();

            $('body').html(TempHTML);
        });
    </script>
</head>
<body>
</body>
</html> 
```

# c - C中的示例方程翻译？

> ID：10379153
> 
> 赞同：2
> 
> 时间：2012-04-30T06:01:42.580
> 
> 标签：c, equation

最初我问：如何将方程转换为编程指令。从@Wikipedia 找到的内容来看[：类别：方程式](http://en.wikipedia.org/wiki/Category:Equations)这对于简单的问答来说显然太模糊了。所以我把它删了。

因为我通过例子学得最好，所以我想看看这个等式在 C 中作为一个函数是什么样子的。

![一个图像](../Images/5288281edd2fed0e61fbf3a743ab175a.png)

（期望航向为 d，地速为 Vg，航向为 a，真实空速为 Va，风向为 w，风速为 Vw。d、a 和 w 是角度。Vg、Va 和 Vw 是一致的速度单位。\ pi 是 3.14159...)

上式用于计算真实地速 取自[E6B 飞行计算机](http://en.wikipedia.org/wiki/Flight_computer)

需要明确的是：我不是在寻求建议、意见或修辞。我不是要你做我的功课。我正在寻求帮助以了解从方程式到功能实现的转换过程。请耐心等待，我知道在这样的努力中需要注意很多方面，我只是想用我自己的知识、能力和理解来探索这两个符号系统之间的对称性。

由于我想探索对称性，我应该要求您尽可能保持程序标识符与其在公式中的表示密切相关。在上下文中与此示例翻译相关的关键字、流行语和规则参考（代码注释）是一个加分项。

如果我的问题由于监督而有缺陷，请在下面的评论中表达您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:13:10.650

您可以像在图形计算器中一样输入公式。带有 cos 的部分将如下所示：

```
#include <math.h>

int main(void) {
    double d, w, da;
    double result;

    result = cos( ( M_PI * ( d - w + da ) ) / ( 180 * M_PI / 180 ) );
} 
```

您可能可以很容易地添加公式的其余部分。当然，在计算结果之前，你必须用一些合理的东西来初始化你的所有变量，最后用它做一些事情。不要全部放在一行上，使用临时变量（因此在下一步中，您将先前的结果替换为整个 cos 表达式）并将计算拆分为您可以在特定领域术语中有意义地描述的部分，如果可能的话。

现在关于与数学出版物相比在编程中做哪些不同的事情，其他程序员通常不会成为您所在领域的专家。例如，我根本不知道该公式仅通过查看它的作用。因此，我很高兴重命名变量并添加与公式的实际使用相关的注释（您的问题最初并没有解释变量名称的含义，所以我想出了非常合理的名称）。像这样：

```
#include <math.h>

int main(void) {
    double density, angledelta;
    double weight; /* Weight of cake with plate included. */
    double deg2rad;
    double result;

    deg2rad = M_PI / 180;

    /* Calculate X coordinate of next cake slice intersection with cake perimeter
       using fair cake splitting with density heuristics. */

    result = cos( ( M_PI * ( density - weight + angledelta ) ) / ( 180 * deg2rad ) );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:27:06.547

要天真地将方程转换为 c，您可以根据运算顺序将其分解为多个部分。然后，您可以根据需要对其进行细化。

我将其分解的方式：

该函数将具有以下参数：d、w、deltaA、Va、Vw

1.  步骤 1 = d - w + ΔA

2.  步骤 2 = `Math.PI`* 步骤1

3.  Step3 = Step2 / 180*忽略单位（度）*

4.  Step4 = cos(Step3)

5.  步骤 5 = Va * Va

6.  步骤6 = Vw * Vw

7.  步骤 7 = 2 * Va * Vw

8.  步骤 8 = 步骤 5 + 步骤 6 - 步骤 7

9.  步骤 9 = 步骤 8 * 步骤 4

10.  步骤 10 =`Math.sqrt(Step9)`

11.  返回 Step10

# jstl - Jetty 8 Standalone 没有检测到 jstl taglib jar

> ID：10379160
> 
> 赞同：1
> 
> 时间：2012-04-30T06:02:31.767
> 
> 标签：jstl, jetty

我已经开始了一个简单的 servlet 3.0 项目，它现在包含一个我正在使用 jstl 核心标签的 jsp 页面。如果我从 mvn jetty:run 开始，我可以看到正确计算的输出。但是，如果我将项目打包为战争并将其部署到独立的码头服务器中，则同一页面将失败

```
PWC6188: The absolute uri: http://java.sun.com/jsp/jstl/core cannot be resolved in either web.xml or the jar files deployed with this application 
```

我检查了jstl-1.2.jar在WEB-INF/lib下的war中。我还错过了什么？

我在 Maven 和独立安装中使用 jetty 8.1.3.v20120416。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T18:35:37.750

这可能与[无法在嵌入式 Jetty 服务器中加载 JSTL taglib有关](https://stackoverflow.com/questions/2151075/cannot-load-jstl-taglib-within-embedded-jetty-server)

确保您的 WEB-INF/lib 中没有重复的 jar，尤其是 servlet-api、jstl 和标准 jar。

# window - 是否可以在 KDE 中更改任意窗口标题？

> ID：10379169
> 
> 赞同：2
> 
> 时间：2012-04-30T06:03:21.697
> 
> 标签：window, x11, kde

是否可以在 KDE 中更改不属于我的应用程序（由应用程序 PID 或窗口描述符标识）的任意窗口的窗口标题？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-08T15:18:20.697

对于也在搜索这个的任何人，以上内容帮助我找到了从命令行执行此操作的方法......

您将需要安装*wmctrl* ....

从命令行可以这样实现：首先（可选）列出所有窗口：

```
wmctrl -l 
```

然后，假设您有一个名为“foo 这是一个窗口栏”的窗口，发出

```
wmctrl -r "this is a window" -N "Full new title" 
```

将此窗口的标题设置为*全新标题*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:14:56.213

是的，这是可以做到的。

1.  遍历 X11 窗口并检查一个`_NET_WM_PID`属性设置为的窗口`PID`，产生`XID`窗口的 ；
2.  然后更改该`WM_NAME`窗口的属性。

但请注意，如果`_NET_WM_PID`程序没有在其窗口上设置此属性，您将无法通过`PID`. 请注意，一个程序可能会`_NET_WM_PID`在其所有窗口上设置，因此第一步的结果可能不是单个窗口。

# jquery - 是否有 jquery 和 jquery UI 文件的组合版本并由谷歌托管？

> ID：10379170
> 
> 赞同：0
> 
> 时间：2012-04-30T06:03:27.183
> 
> 标签：jquery, jquery-ui, fancybox

是否有任何 jquery 文件结合了以下所有这些文件并从 google 托管？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript">
<script src="/js/fancybox/jquery.mousewheel-3.0.4.pack.js" type="text/javascript">
<script src="/js/fancybox/jquery.fancybox-1.3.4.pack.js" type="text/javascript"> 
```

文件：Jquery 和 Jquery ui 和 Fancybox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:14:48.947

不，没有组合文件。这也无关紧要，因为只有使用 Google 的 CDN 从任何网站进行的初始下载才会允许浏览器缓存文件。由于浏览器缓存，合并文件并没有显着提高性能。

# c# - 如何从给定的图像路径（实时 URL）直接将图像上传到 FTP

> ID：10379179
> 
> 赞同：0
> 
> 时间：2012-04-30T06:04:19.410
> 
> 标签：c#, asp.net, xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:12:42.347

也许这会起作用：

```
 // Get the object used to communicate with the server.
    FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://www.contoso.com/test.htm");
    request.Method = WebRequestMethods.Ftp.UploadFile;

    // This example assumes the FTP site uses anonymous logon.
    request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com");

    // Copy the contents of the file to the request stream.
    StreamReader sourceStream = new StreamReader("testfile.txt");
    byte [] fileContents = Encoding.UTF8.GetBytes(sourceStream.ReadToEnd());
    sourceStream.Close();
    request.ContentLength = fileContents.Length;

    Stream requestStream = request.GetRequestStream();
    requestStream.Write(fileContents, 0, fileContents.Length);
    requestStream.Close();

    FtpWebResponse response = (FtpWebResponse)request.GetResponse();

    Console.WriteLine("Upload File Complete, status {0}", response.StatusDescription);

    response.Close(); 
```

# java - 使用 Jdom 和 SAX 解析器解析 XML 文件

> ID：10379185
> 
> 赞同：0
> 
> 时间：2012-04-30T06:04:58.637
> 
> 标签：java, xml, sax, jdom

我有一个 XML 格式：

```
<response>

<result name="response" numFound="295" start="0">
<doc>
<str name="Content">...</str>
<str name="Latitude">36.48617</str>
<str name="Longitude">-89.97065</str>
<str name="id">00000001 pages 1-249.pdf</str>
</doc>
<doc>
<str name="Content">...</str>
<str name="Latitude">33.59927</str>
<str name="Longitude">-86.69304</str>
<str name="id">100-449923 section 26 -114.pdf</str>
</doc>
<doc> 
```

我需要在变量中找到内容、纬度和经度的值。到目前为止，我的代码是：

```
SAXBuilder sax=new SAXBuilder();
Document doc= (Document) sax.build(new StringReader(xmlstr));
Element rootElem=doc.getRootElement();
out.println("rootElem = " + rootElem.toString());
Element res=rootElem.getChild("result");
List docs=res.getChildren("doc");

for(int i=0;i<docs.size();i++)
{
    out.println("docsSize = " + docs.size());
    Element row= (Element)docs.get(i);
    //List strs= docs(i).getChildren("str");
    List strs=row.getChildren("str");
    for(int j=0;j<strs.size();j++){
        out.println("strs = " + strs.size());
        //out.println(strs.get(j).getValue());
        List column =  (List)strs.get(j);
        if(column.getAttribute("name").getValue()=='Content')
            {
            out.println("Hi");
            out.println(column.getAttribute("name").getValue());
            out.println("Bi");
            }
        //String Content = column.getAttribute("name").get(1).getValue();
        //String value = column.getText();
        //out.println("Content = " + Content);
        //out.println("value = " + value);
    }
    //out.println(content);
    break;
}
}catch(Exception e)
{
    out.println(e);
} 
```

但是我仍然无法获得纬度和经度的值，即使我得到了它们所在数组的大小。你能建议同样的吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:15:56.773

这 if(column.getAttribute("name").getValue()=='Content') 将只允许内容。所以纬度和经度不会进入你的 if 条件，你打印值。

试试这个**if(column.getAttribute("name").getValue()!='id')**，它会打印内容、纬度和经度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:03:37.563

在 Java 中编写这样的低级导航代码非常冗长且容易出错。为什么不将 XPath 与您的 Java 代码结合使用，或者更好的是，用 XQuery 或 XSLT 编写整个东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:35:54.190

如果要按名称检索属性：

```
for(int j=0;j<strs.size();j++){
    out.println("strs = " + strs.size());
    Element column =  (Element) strs.get(j);
    out.println("Content: " + column.getAttributeValue("Content"));
    out.println("Latitude: " + column.getAttributeValue("Latitude"));
    out.println("Longitude: " + column.getAttributeValue("Longitude"));
    out.println("id: " + column.getAttributeValue("id"));
} 
```

如果要遍历属性：

```
for(int j=0;j<strs.size();j++){
    out.println("strs = " + strs.size());
    Element column =  (Element) strs.get(j);
    for (Attribute a : column.getAttributes())
      out.println("Name: " + a.getName() + " Value: " + a.getValue());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T09:47:48.950

你有几个问题。

如果您修复字符串比较，我认为您的代码将达到您的预期......

```
if(column.getAttribute("name").getValue()=='Content') 
```

永远不会工作。在 String 值上使用 == 运算符很少是“正确”的事情。

尝试：

```
if("Content".equals(column.getAttribute("name").getValue())) 
```

哦，我看到你的整个单引号意味着你没有给我们你真正的 Java 代码......围绕“内容”的单引号甚至不会编译......

# php - 将图像保存到文件夹最佳实践

> ID：10379187
> 
> 赞同：0
> 
> 时间：2012-04-30T06:05:04.950
> 
> 标签：php, image, upload, directory, root

请我希望你能告诉我如何最好地（文件夹）保存上传的用户个人资料图片。在我以前的项目中，我通常上传到主项目文件夹内的文件夹中，即

```
 www/projectFolder/upload 
```

这对效率和安全性有好处吗？

我已经通过 .htaccess 禁用了文件夹导航（来自 URL）

这个问题

[用php上传文件并将路径保存到sql](https://stackoverflow.com/questions/2879266/upload-file-with-php-and-save-path-to-sql)

提示我的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:45:27.973

为什么不使用数据库来保存它们？我想这是最好的选择。
无论如何，如果您出于任何原因无法将它们保存在数据库中并且您必须将图像保存在文件系统上的目录中，我想最好将它们保存在您的网络服务器 htdoc 目录（和子目录）之外的某个地方，所以访问无法直接通过 Web 服务器访问这些文件。当然，您需要足够的权限来允许您的 php 脚本读取、写入和修改目标目录中的文件。
还建议查看 .htaccess 文件在 apache 上的用法。

# c# - Asp.net 从 C# 代码中获取变量

> ID：10379188
> 
> 赞同：1
> 
> 时间：2012-04-30T06:05:14.630
> 
> 标签：c#, asp.net, variables, if-statement

我想在asp代码中使用继承的变量

我的代码看起来像这样

```
namespace WebApplication2
{

    public class Global : System.Web.HttpApplication
    {
    public bool abcdef = true;   // my variable that i want to use in my asp code      
    ...
    }
} 
```

ASP 部分如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">   
<% 
if(webapplication1.main.abcdef) //this is incorrect, i want to correct that 
{%> 
my first web page 
<%}
else 
{%> 
my second web page 
<%} %>

</html> 
```

如何`abcdef`在我的 asp 代码中使用我的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:25:25.683

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="index.aspx.cs" MasterPageFile="MasterPage.Master"
    Inherits="Namespace.YouClass" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<script>
if(<%#this.abcdef%>)
{
//do your work
}
</script> 
```

# c# - 如何存储 50,000 个英语单词，以便尽可能少地占用内存

> ID：10379189
> 
> 赞同：1
> 
> 时间：2012-04-30T06:05:24.787
> 
> 标签：c#, data-structures, trie

我必须在内存中存储约 50,000 个英文单词，我想知道就内存占用（和加载速度）而言，最好的数据结构是什么。会是特里吗？我如何将其序列化为文件？还有什么比这更好的吗？

本质上，一旦将大约 50,000 个单词加载到内存中，我只需要检查该单词是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:52:37.397

好吧，根据您提供的指南，一个简单的`List`会更好。

获取时间显然会比 a `Trie`or慢`Dictionary`，但是

> “就内存占用（和加载速度）而言”

它将需要很少的内存开销，并且加载速度更快（因为没有构建索引/前缀数据结构）。

有关一些内存比较的详细信息，请参阅此[博客文章](http://ejohn.org/blog/javascript-trie-performance-analysis/)（在 JavaScript 中，但仍然适用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:12:07.667

根据[这个](https://stackoverflow.com/questions/8570201/most-efficient-in-memory-data-structure-for-read-only-dictionary-access)答案，[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)类是您所需要的。根据 MSDN 文档，您应该使用[TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)方法来访问您的数据：

> 如果您的代码经常尝试访问不在字典中的键，请使用 TryGetValue 方法。使用此方法比捕获 Item 属性抛出的 KeyNotFoundException 更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:13:52.887

建议使用 Dictionary 对象。阅读这些：

[用于只读字典访问的最有效的内存数据结构](https://stackoverflow.com/questions/8570201/most-efficient-in-memory-data-structure-for-read-only-dictionary-access)

[为什么字典比哈希表更受欢迎？](https://stackoverflow.com/questions/301371/why-dictionary-is-preferred-over-hashtable-in-c)

有关实施的帮助，请阅读以下内容：

[http://msdn.microsoft.com/en-us/library/xfhwa508.aspx](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

要序列化字典对象或哈希表，请阅读此参考：

[http://blogs.msdn.com/b/adam/archive/2010/09/10/how-to-serialize-a-dictionary-or-hashtable-in-c.aspx](http://blogs.msdn.com/b/adam/archive/2010/09/10/how-to-serialize-a-dictionary-or-hashtable-in-c.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:23:57.603

是的，trie 听起来不错。对于序列化，您有两个选择：

1.  使用原始单词列表并重建 trie。我猜它应该足够快，但你可能想要分析它。
2.  只需对该类型使用普通的 .NET 序列化并将其转储到文件中。不过，这会阻止其他语言的程序读取它。

# asp.net - asp.net中的投标系统

> ID：10379190
> 
> 赞同：0
> 
> 时间：2012-04-30T06:05:30.063
> 
> 标签：asp.net

我正在尝试创建一个具有这种结构的投标系统：用户可以预订拍卖，然后当拍卖开始时，用户可以点击一个按钮，这个按钮将提高基本价格。问题是 ：

我想显示所有用户的最后一个订单，这将每隔一秒发生一次，这将在一个更新面板中，其中包括我的数据列表（显示正在运行的拍卖），并且每隔一秒这个更新面板应该更新，数据源应该获取数据很慢。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:09:57.333

阅读[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)。

基本上你会得到一个投标事件，然后你需要发布它。请参阅[发布-订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)。

也谷歌搜索`pub sub asp.net`。

编辑＃1：谷歌`http push`也是如此。

# jquery - Telerik Grid Client 模板数据在按下提交按钮时未保存

> ID：10379191
> 
> 赞同：0
> 
> 时间：2012-04-30T06:05:30.560
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, razor, telerik

当我将客户端模板用于列时，我在项目中使用 Telerik 控件，但数据出现在客户端模板中，但在按下提交按钮时未保存，它显示为空模板。下面是我的代码

```
@(Html.Telerik().Grid<edairy.Models.ReceiptsEntry.mst_stock_dtl>()
    .Name("gdStkDetails")
            .ToolBar(commands =>{ commands.Insert();
               commands.SubmitChanges();
            } )

           .DataKeys(keys => keys.Add(c => c.Trans_No))
             .Pageable(paging =>
                    paging.PageSize(10)
                          .Style(GridPagerStyles.NextPreviousAndNumeric)
                          .Position(GridPagerPosition.Bottom))
                          .Sortable(sorting => sorting
                          .SortMode(GridSortMode.MultipleColumn))
                                  .ClientEvents(e => e.OnDataBound("onDataBound"))

                          .DataBinding(databing => databing.Ajax()
                                                           .Select("SelectStock", "ReceiptsEntry")
                                                           //.Insert("AddStock", "ReceiptsEntry")
                                                           .Update("Editproduct", "ReceiptsEntry")
                                                           //.Delete("DeleteStock", "ReceiptsEntry")
                                                           )

           .Columns(columns =>
            {
               columns.Bound(c => c.Trans_No).Title("Transaction No").Width(100);
               columns.Bound(c => c.Product_cd).Title("Product Code").EditorTemplateName("GrdDropdown").Width(150);
               columns.Bound(c => c.Prouduc_desc).Title("Product Desc").EditorTemplateName("text").Width(100);
               columns.Bound(c => c.Prouduc_desc).Title("Product Desc").ClientTemplate("<input type='text' id='text' name='ProductDesc' /> ").Width(100);
               columns.Bound(c => c.Receipt_Quantity).Title("Receipt Qty").Width(150);
            columns.Command(commands =>
            {
           // commands.Edit();
            commands.Delete();
              });
            })

            .Editable(editing => editing.Mode(GridEditMode.InCell))
            //.Editable(editing => editing.Mode(GridEditMode.PopUp))

                )

                </text>);
        })
        .SelectedIndex(0)
        .Render();
} 
```

请在这个问题上帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:13:14.183

尝试将您的操作更改为以下内容：

```
[AcceptVerbs(HttpVerbs.Post)]
        [GridAction]
public ActionResult Editproduct([Bind(Prefix = "updated")]IEnumerable<edairy.Models.ReceiptsEntry.mst_stock_dtl> data) 
```

是，当您更改网格上的数据时要小心，您需要确保焦点离开文本框，因为网格需要知道文本框上的值已更改.. 试试看。

希望这个，帮助。

# sql - 简单的 Select 语句不返回任何结果

> ID：10379196
> 
> 赞同：5
> 
> 时间：2012-04-30T06:05:56.537
> 
> 标签：sql, database, sql-server-2008

我有一个数据库表名`test123`和列`name`。它包含像`'nir,kal,man'`现在这样的数据，当我使用 select 语句查询表时，如下所示：

```
select * from test123 where name = 'nir,kal,man'; 
```

但这不会返回任何结果...为什么会这样。？我如何编写查询以便返回结果？我正在使用 Sql server 2008。

谢谢...！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:08:32.837

`=`运算符返回完全匹配，因此如果您的单元格包含您需要使用`LIKE`运算符的“喜欢”数据：

```
select * from test123 where name like '%nir,kal,man%' 
```

where`%`将被替换为任何字符集。

还要检查您是否使用全名定位正确的数据库

```
select * from yourdb.dbo.test123 where.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T06:09:21.957

如果 Nir ​​在第一行 Kal 在第二行，而 man 在第三行，那么你应该像这样编写查询

```
select * from test123 where name in ('nir','kal','man') 
```

# multithreading - 多线程理论场景

> ID：10379198
> 
> 赞同：0
> 
> 时间：2012-04-30T06:06:07.000
> 
> 标签：multithreading, performance, theory

我有一个使用 10 个线程的线程池的多线程应用程序。每个线程需要 5 分钟来处理输入。是否有一个法律/公式来管理处理 n 个输入所花费的总时间？

换句话说，是否可以说每 5 分钟可以处理 10 个输入，那么处理 100 个输入需要 50 分钟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:34:30.930

除了计算能力（处理器/内核）和硬件资源依赖（硬盘、I/O 竞争等）之外，还应考虑数据依赖。例如，如果每个输入的处理包括由所有其他线程更新共享数据，这需要锁定（互斥），那么总吞吐量将小于 10 倍，即使它是一个多核处理器。 10个核心。最大加速取决于临界区的比例。如果需要公式，请参考著名的阿姆达尔定律：[en.wikipedia.org/wiki/Amdahl's_law](http://en.wikipedia.org/wiki/Amdahl%27s_law)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:16:10.640

并非如此，您必须考虑所需的总计算能力。例如，如果一个线程需要 5 分钟来完成工作，并且在此期间处理器完全耗尽，那么额外的线程将无济于事。在另一个极端，如果处理器利用率接近于零（例如，所有时间都花在等待 I/O 上），那么您建议的计算将起作用。因此，您必须考虑计算所使用的实际资源。

# eclipse-cdt - Eclipse C++ 在 ubuntu

> ID：10379199
> 
> 赞同：3
> 
> 时间：2012-04-30T06:06:16.973
> 
> 标签：eclipse-cdt

我试图在 ubuntu 12.04 的 eclipse 中运行以下代码，但它一直给我错误。你能告诉我为什么会这样吗？谢谢。

```
 #include <iostream>
   using namespace std;

  int main()
  {
  cout << "Hello World!" << endl;
  return 0;
  } 
```

无法解析符号“std” 无法解析符号“cout” 无法解析符号“endl”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T23:16:57.570

这是找不到符号的 Eclipse 的 C++ 解析器。

您可以将配置添加到您已经创建的项目中，但这可能会很痛苦。所以只需创建一个新的 C++ 项目：

文件 > 新建 > C++ 项目

然后 ：

选择你想要的项目类型，比如“Executable > Empty Project”（或者可能是“Makefile Project > Empty Project”），并确保在工具链中选择*Linux GCC*。这将在配置中添加所有默认包含，以便 C++ 解析器找到所有内容。单击完成，将您的代码粘贴到 C++ 文件中并开始使用。

有关信息，您可以在 Project Properties > C/C++ General > Paths and Symbols > Includes > GNU C++ 中查看这些包含路径。

# android - 如何将搜索地点添加到 Android 地图中的收藏夹？

> ID：10379200
> 
> 赞同：0
> 
> 时间：2012-04-30T06:06:20.880
> 
> 标签：android, maps

我想在 Android 地图程序中将搜索地点添加到收藏夹。我已成功获取搜索地点，如何将其添加到收藏夹列表中。

请分享一些示例代码或给出一些说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:41:06.387

当您获得搜索地点结果时，您可以将其数据作为一行存储在数据库中，例如，您可以从此[SO 链接](https://stackoverflow.com/questions/7113980/add-multiple-geopoints-and-markers-automatically-in-google-maps)获得想法。

要在 android 中使用 SQLite，请参阅此[链接 Vogella](http://www.vogella.com/articles/AndroidSQLite/article.html)。

你也可以参考这个[从 SQlite 获取地理点](https://stackoverflow.com/questions/7121924/get-geopoints-from-sqlite-db)

# iphone - 如何在我的 iPhone 应用程序中添加 Twitter 关注按钮？

> ID：10379201
> 
> 赞同：7
> 
> 时间：2012-04-30T06:06:29.737
> 
> 标签：iphone, ios5, twitter, twitter-follow

我正在开发一个 iPhone 应用程序。从我的应用程序用户可以`to follow my twitter account`。我想添加`Follow twitter button in my app`. 当用户按下按钮时，使用户关注我的 Twitter 帐户。在我没有使用之前`twitter api and twitter functionality`，我正在努力做到这一点。你能帮我从应用程序本身关注另一个 Twitter 用户帐户吗？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T06:11:24.107

无需插入另一个 twitter 应用程序或任何东西，您就可以打开一个 URL 来完成这项工作。

```
 - (IBAction)followMeOnTwitter:(id)sender {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"https://twitter.com/intent/user?screen_name=<twitter_screen_name>"]];
 } 
```

只需将该 URL 的末尾替换为您的 Twitter 帐户名称，它就会打开以在浏览器中关注该帐户。确保将按钮连接到“followMeOnTwitter”，方法是将其包含在视图的 .h 文件中。

# asp.net-mvc - 我可以将 Orchard CMS 设置为我的“真实”网站的子目录吗？

> ID：10379202
> 
> 赞同：2
> 
> 时间：2012-04-30T06:06:41.793
> 
> 标签：asp.net-mvc, content-management-system, orchardcms, virtual-directory

我有一个网站，我想为其添加一些 CMS 功能（博客、论坛、评论、RSS 等）。理想情况下，我想将我现有的 asp.net MVC 网站与像 Orchard 这样的 CMS 共同托管，它应该位于 mysite.com/cms 或 mysite.com/blog 下。

我怎么能设置呢？

或者，我想可以设置一个子域，例如 cms.mysite.com，但我对部署复杂性和 SEO 影响持谨慎态度。对此类情况有任何反馈吗？

我想我也可以反过来做，让我的真实网站有一个子目录，让 CMS 位于网站的根目录。我只需要把两个结婚。如果可能，我想避免 URL 重写，如[如何在 IIS7 中的 Orchard CMS 下添加 ASP.NET MVC 子应用程序？](https://stackoverflow.com/questions/8849584/how-to-add-an-asp-net-mvc-sub-application-under-orchard-cms-in-iis7)因为它可能有它自己的复杂性（例如，应用程序不知道它的真实 url）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:37:38.660

Orchard 并非旨在为现有站点添加功能。它需要在自己的 IIS 应用程序中运行。

# c# - 从哈希表填充下拉列表

> ID：10379203
> 
> 赞同：0
> 
> 时间：2012-04-30T06:06:44.130
> 
> 标签：c#, asp.net, collections

`private Hashtable myHashTable = new Hashtable();`
我正在尝试使用以下方法从 Hashtable 中填充下拉列表，即从数据库中提取的 HashTable 键和值：

```
void LoadmyHashTable()
{

    bussinessObject bs = new bussinessObject();
    myDataset ds = new myDataset();
    ds = bs.GetPosType(-1);

    int rowsCount = ds.myTable.Rows.Count;
    for (int i = 0; i < rowsCount; i++)
    {
     myHashTable.Add(ds.myTable.Rows[i]["dTypeName"],ds.myTable.Rows[i]["dTypeId"] );

    }
} 
```

然后，在调用页面 load() 中的方法
并尝试用 hashTable 值填充下拉列表之后：

```
 myDropdownlist.DataSource = myHashTable;
        myDropdownlist.DataTextField = "key";
        myDropdownlist.DataValueField = "value";
        myDropdownlist.DataBind(); 
```

我的下拉列表出现的问题是空的！提前致谢。
ASP.NET,C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:10:01.583

我有如下修改代码，请尝试。

```
void LoadmyHashTable()
{

    bussinessObject bs = new bussinessObject();
    DataSet ds = new DataSet();
    ds = bs.GetPosType(-1);      
    if (ds.Tables.Count > 0 )
    {
        for (int i = 0; i < ds.Tables[0].Rows.Count-1; i++)
        {
            myHashTable.Add(ds.Tables[0].Rows[i]["dTypeId"], ds.Tables[0].Rows[i]["dTypeName"]);

        }
    }

} 
```

使用代码进行页面加载，如下所示

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!Page.IsPostBack)
    {
        LoadmyHashTable();
        if (myHashTable.Count > 0)
        {
            myDropdownlist.DataSource = myHashTable;
            myDropdownlist.DataTextField = "Value";
            myDropdownlist.DataValueField = "Key";
            myDropdownlist.DataBind();

        }
    }
} 
```

希望这会帮助你......快乐的编码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:10:25.537

和值需要分别对应绑定源中的一个属性`DataTextField`。`DataValueField`您的代码假定一组对象至少具有一个名为“key”的属性和另一个名为“value”的属性。由于这不是真的，因此没有项目被绑定。

**编辑：此代码***根本*没有经过测试，但您应该能够使用 LINQ 将数据集投影到匿名集合中：

```
var myHashTable = ds.myTable.Rows.Select( row => new { key = row["dTypeName"], value = row["dTypeId"] } ); 
```

然后您正在使用的绑定应该可以工作。

# exception - 不能抛出 DataAccessException 类型的异常；异常类型必须是 Throwable 的子类

> ID：10379207
> 
> 赞同：11
> 
> 时间：2012-04-30T06:07:04.443
> 
> 标签：exception, exception-handling

我的源代码如下。它有一个错误，“不能抛出 DataAccessException 类型的异常；异常类型必须是 Throwable 的子类”。

我不明白为什么会发生错误。让我知道。谢谢。

```
package com.sds.afi.cosmos.cmm.db.impl;

import java.sql.SQLException;
import java.util.HashMap;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.DataAccessException;
import org.springframework.orm.ibatis.SqlMapClientTemplate;
import org.springframework.orm.ibatis.support.SqlMapClientDaoSupport;
import org.springframework.stereotype.Repository;

import com.sds.afi.cosmos.cmm.db.MainDao;

@Repository
//@SuppressWarnings("unchecked")   // 부적절한 컴파일러의 경고를 제거
public class MainDaoImpl extends SqlMapClientDaoSupport  implements MainDao {

    @Autowired
    private SqlMapClientTemplate sqlMapClientTemplate;

    @SuppressWarnings("unchecked")
    @Override
    public List<HashMap> getUserInfo() throws DataAccessException {

        List<HashMap> lists;

        lists = sqlMapClientTemplate.queryForList("common.getList");

        return lists;
    }

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T11:46:00.097

如果异常的类型层次结构中的某个类不在类路径上，则可能会发生这种情况。在这种情况下，无法验证异常是否真的扩展了 Throwable，它是否是已检查的，等等。因此出现了错误。例如，Dataaccessexception 的超类：类路径中可能缺少 NestedRuntimeException，因为它位于不同的 jar 中，即 spring-core。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:14:41.037

您的 DataAccessException 不是 Throwable 类的子类（扩展 Throwable）。它应该是，如果没有这种继承，你的代码就不能用当前的 throws 子句编译。

这是一个例子：[http ://www.osix.net/modules/article/?id=754](http://www.osix.net/modules/article/?id=754)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-18T12:16:34.900

当我升级到 5.XX 版本时，我遇到了同样的问题。我添加了 Spring-core.jar 文件，它对我来说效果很好。只需在此处添加此内容，因为它可能对某些人有所帮助。Spring txn jar ， dao jar 和 spring core 是必须的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:11:17.127

这意味着在您的`getUserInfo()`方法中没有引发该异常的代码。因此，只需`throws`从您的方法声明中删除该子句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T17:45:01.027

我面临同样的问题。我做错了什么是我自己创建了异常类（错误地）。在其他程序中，我试图扩展异常类（默认），但编译器（eclipse）正在加载用户定义的异常类，给我同样的错误。所以请确保你没有覆盖任何默认类。

# sorting - 我们可以在排序中使用两个标准吗

> ID：10379208
> 
> 赞同：2
> 
> 时间：2012-04-30T06:07:11.593
> 
> 标签：sorting, collections, groovy

我一直在使用以下代码对域的结果进行排序

> vpisort.sort{it.price}

我想知道我是否可以使用类似的东西

> vpisort.sort{it.price-it?.discount}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:12:15.937

我找到[了这个](http://kousenit.wordpress.com/2012/01/13/elvis-carried-away-by-spaceships/)帖子。您可以尝试在您的情况下使用它：

```
vpisort.sort { a, b -> a.price <=> b.price ?: a?.discount <=> b?.discount } 
```

它首先比较价格，然后只有当 a 和 b 按价格相等且结果为零时，才使用 Elvis 运算符比较 a 和按折扣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:11:25.543

嗯。这不是一个 grails，而是一个时髦的问题。考虑到这一点，解决方案很简单：

打开 groovy 控制台并尝试一下。或查看以下示例：

[http://groovy.codehaus.org/JN1015-Collections](http://groovy.codehaus.org/JN1015-Collections)

SO上还有另一个像这样的问题：

[Groovy list.sort 按第一个，第二个，然后是第三个元素](https://stackoverflow.com/questions/1467641/groovy-list-sort-by-first-second-then-third-elements)

希望有帮助！

**更新：**如果您想为您的域类设置默认排序顺序，请查看此 GORM 功能：[http://grails.org/doc/latest/guide/single.html#ormdsl](http://grails.org/doc/latest/guide/single.html#ormdsl)（5.5.3 默认排序顺序)

# python - 需要看懂这段python代码

> ID：10379211
> 
> 赞同：0
> 
> 时间：2012-04-30T06:07:14.170
> 
> 标签：python

在下面的代码中理解两件事时遇到问题。问题1：我不明白什么是地图以及它的用途。通常当我们创建带有 2 个参数的函数时，如下所示：

`def find_city(themap,state):`我们不应该在运行程序时输入 2 个参数的值 `themap`吗？`state`然而，我们只给出状态值，即我们输入 CA OR MI OR FL 。我不明白这是`themap`用来做什么的。

问题 2：我不明白我在`cities['_find'] = find_city` 谷歌搜索的那一行`'_find' python`，我发现的唯一一件事是参考了 zed shaw 的书。它属于哪个类别，或者我应该阅读什么以了解有关此行的更多信息？

```
cities = {'CA': 'San Francisco', 'MI': 'Detroit',
                     'FL': 'Jacksonville'}

cities['NY'] = 'New York'
cities['OR'] = 'Portland'

def find_city(themap, state):
    if state in themap:
        return themap[state]
    else:
        return "Not found."

# ok pay attention!
cities['_find'] = find_city

while True:
    print "State? (ENTER to quit)",
    state = raw_input("> ")

    if not state: break

    # this line is the most important ever! study!
    city_found = cities['_find'](cities, state)
    print city_found 
```

编辑：您能否告诉我应该学习哪个章节或 python 主题才能更好地理解这一点。我的意思是，为了更好地理解我提出的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:12:19.267

这条线

```
city_found = cities['_find'](cities, state) 
```

正在打电话

```
def find_city(themap, state): 
```

所以

```
themap ==> cities
state ==> state 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:12:58.497

当调用到时`find_city`（注意之前的分配`cities['_find'] = find_city`）

```
city_found = cities['_find'](cities, state) 
```

您将字典`cities`与`state`. 标识符在函数中`cities` 重新映射（如果您愿意，可以重命名），在这部分代码中保持不变：`themap``state`

```
def find_city(themap, state) 
```

即，在您的“主程序”中，您将字典称为`cities`但当您调用该函数时，该函数将其称为`themap`. `state`保持不变。名称由调用中的标识符和函数头中列出的标识符之间的位置匹配。

`cities[_find]`允许您在函数中使用索引到`cities`字典 中。`state``find_city`

阅读更多关于函数和参数传递机制、函数赋值（到变量）和 Python 中的字典应该有助于巩固你对这种类型的代码结构的理解。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T06:27:49.367

> def find_city(themap,state)：我们在运行程序时不应该输入themap和state这2个参数的值吗？

不; *当我们调用*函数时，我们应该**将**两个参数传递给函数。

 *并非程序使用的每条数据都必须来自用户。它可以提供自己的数据，从文件中读取内容等。

> 我不明白这行城市['_find'] = find_city

`cities`是一本字典。因此`cities[<anything in here>] = <anything over there>`，将`<anything over there>`值与 key 一起放入字典中`<anything over here>`。这里我们的键是字符串`'_find'`，值是函数`find_city`。是的，在 Python 中，一切都是对象，其中包括函数。所以我们当然可以将函数存储在容器中:)

```
city_found = cities['_find'](cities, state) 
```

在这里，我们评估`cities['_find']`- 即，我们`'_find'`在字典中查找键`cities`，找到函数`find_city`；然后我们将该结果与`(cities, state)`. 因此，它就像我们写的一样`find_city(cities, state)`；这是一个正常的函数调用。`state`是用户输入的值，它被传递为`state`; 并且`cities`是字典，它作为`themap`. 在函数内部，在`cities`字典中查找命名状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T07:19:17.927

```
city_found = cities['_find'](cities, state) 
```

这里你使用了一个调用函数，它调用了预定义的函数 DEF ---
它为城市调用“themap”，
为州调用“state”

但问题仍然存在，为什么要在“查找”之前使用“_”符号……谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T06:14:29.267

1.  是的，你是对的 - find_city 接受两个参数，并且在调用它时给出了多少，即

    城市['_find']（城市，州）

2.  这只是意味着将一个条目添加到城市地图中。条目的键是字符串“_find”，值是函数 find_city。这就是为什么表达式 city['_find'] 返回函数然后你用两个参数调用它的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T06:15:18.597

嗯，`themap`是一个所谓的地图或字典或基于散列的**容器**。它就像一个数组一样使用，因为它`operator[]`以某种方式被重载（我来自 C++ 背景，它在 C++ 中是可行的）。当您分配`'New York'`给`cities['NY']`键时，会自动创建“NY”，并且与该键对应的值是“New York”。

要回答您的第二个问题，`find_city`是某种与 key 配对的**函数指针**`'_find'`。这`_find`是任意键的选择。您可以使用`find`或`Find`其他任何您想要的东西。难怪你在谷歌上没有找到任何关于它的东西。该行`cities['_find'](cities, state)`实际上在内部被翻译为`find_city(cities, state)`.

希望我有所帮助，:)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T06:12:07.200

地图不是地理意义上的城市地图。Python 地图是一种数据类型。很明显，该函数正在传递一个带有城市的容器，并且在该函数中它传递了一个要在容器中查找的城市。也许你真的是新手——在函数的上下文中，参数有不同的名称，但在函数顶部具有相同的值。

在 python 中，任何东西都有一个可以赋值的值，甚至是函数。您要问的问题 2 只是同一功能的新名称。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T10:40:00.950

函数是可以传递的值。

Saying`cities['_find']`等价于 say `find_city`，因为它们都对那个函数求值。fn = 城市['_find'] fn（城市，州）

在 python 中，应用于一个值的函数调用语法会尝试使用参数调用该值（如果它是可调用的）。所以在你的情况下，`cities['_find'].__call__(cities, state)`最终被执行。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-01-26T08:00:00.760

您只需查看代码中的两行：

1.  `cities['_find'] = find_city`

2.  `city_found = cities['find'](cities, state)`

### (1) 的解释：

由于城市是您使用之前的字典`cities['_find']`。打印它...

```
print(cities)
Output: {'CA': 'San Francisco', 'MI': 'Detroit', 'FL': 'Jacksonville', 'NY': 'New York', 'OR': 'Portland'} 
```

现在使用后`cities['_find']=find_city`，

```
print(cities)  
Output: {'CA': 'San Francisco', 'MI': 'Detroit', 'FL': 'Jacksonville', 'NY': 'New York', 'OR': 'Portland', *'_find': <function find_city at 0x01BAB738*>} 
```

这里最后一个字典项添加了键`_find`，值是函数`find_city`。

### (2) 的解释：

现在`city_found = cities['find'](cities, state)`

现在我们知道 find_city 在 dict 中`_find`，这意味着我们可以使用它。它可以这样分解：

1.  Python 看到`city_found =`并知道我们想要创建一个新变量。

2.  然后它读取城市并找到该变量，它是一个字典。

3.  然后是`['_find']`which 将索引到 city dict 并取出任何位于`_find`.

4.  什么是`['_find']`我们的函数`find_city`，所以 Python 知道它有一个函数，并执行函数调用。

5.  参数城市，状态被传递给这个函数`find_city`，它运行是因为它被调用了。

6.  `find_city`然后尝试查找城市内的州，并返回它找到的内容。

7.  Python 获取`find_city`返回的内容，最后将其分配给`city_found`.*

# snmp - SNMP MIB 表中的 RowStatus

> ID：10379219
> 
> 赞同：1
> 
> 时间：2012-04-30T06:08:36.407
> 
> 标签：snmp, mib

在下面的示例 MIB 条目中：

```
--
-- Logging configuration
--

nsLoggingTable     OBJECT-TYPE
  SYNTAX      SEQUENCE OF NsLoggingEntry
  MAX-ACCESS  not-accessible
  STATUS      current
  DESCRIPTION
    "A table of individual logging output destinations, used to control
     where various levels of output from the agent should be directed."
  ::= { nsConfigLogging 1 }

nsLoggingEntry     OBJECT-TYPE
  SYNTAX      NsLoggingEntry
  MAX-ACCESS  not-accessible
  STATUS      current
  DESCRIPTION
    "A conceptual row within the logging table."
  INDEX       { nsLogLevel, IMPLIED nsLogToken }
  ::= { nsLoggingTable 1 }

NsLoggingEntry ::= SEQUENCE {
  nsLogLevel          INTEGER,
  nsLogToken          DisplayString,
  nsLogType           INTEGER,
  nsLogMaxLevel       INTEGER,
  nsLogStatus         RowStatus
} 
```

这里的 RowStatus 条目是 NsLoggingEntry 中的最后一个，**我们可以将这个 RowStatus 条目放在 NsLoggingEntry 中的任何位置（例如在“nsLogToken DisplayString”之后）**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:48:50.307

可以将条目移动到序列中的*不同*`nsLogStatus RowStatus`位置，但您需要更新列对象的顺序以匹配序列的顺序。`NsLoggingEntry`

 *更详细地说，`NsLoggingEntry ::= SEQUENCE`定义将构成`nsLoggingTable`. MIB 文件应该对每一列都有进一步的定义，看起来像，

```
nsLogStatus OBJECT-TYPE
  SYNTAX      RowStatus
  MAX-ACCESS  read-only
  STATUS      current
  DESCRIPTION "<Some great description of this column>"
  ::= { nsLoggingEntry 5 } 
```

该定义的关键部分是`::= { nsLoggingEntry 5 }`断言`nsLogStatus`将是 in 行中的第五列的行`nsLoggingTable`。如果更改序列的`NsLoggingEntry`顺序，则应确保各个列定义遵循该序列。

例如，如果您将顺序更改为，

```
NsLoggingEntry ::= SEQUENCE {
  nsLogLevel          INTEGER,
  nsLogToken          DisplayString,
  nsLogStatus         RowStatus,
  nsLogType           INTEGER,
  nsLogMaxLevel       INTEGER
} 
```

每列的 OID 分配应变为，

```
nsLogLevel    ::= { nsLoggingEntry 1 }
nsLogToken    ::= { nsLoggingEntry 2 }
nsLogStatus   ::= { nsLoggingEntry 3 }
nsLogType     ::= { nsLoggingEntry 4 }
nsLogMaxLevel ::= { nsLoggingEntry 5 } 
```

还有一件事要记住：表的索引应该是序列中的第一列，所以`nsLogLevel`应该保留在它的当前位置，就像`nsLogToken`.*

# c++ - Generic Memory allocation crash for overloding new and delete in C++

> ID：10379223
> 
> 赞同：0
> 
> 时间：2012-04-30T06:09:20.263
> 
> 标签：c++

I am having following code. Following code is crashing when I am deleting the allocated memory i.e., Rational::deleteMemPool();

Getting output as

> > mempool value is 00000000 mempool value is 003462E8 mempool value is 003462E8

// Here for delete crashing though we have valid pointer.

Can any one please help me what is bug here?

```
#include <string>
#include <iostream>

template < class T >
class MemoryPool {
public:
    MemoryPool (size_t size = EXPANSION_SIZE);
    ~MemoryPool ();
    inline void* alloc (size_t size); // Allocate a T element from the free list.
    inline void free (void *someElement); // Return a T element to the free list.
private:
    MemoryPool<T> *next; // next element on the free list.
    enum { EXPANSION_SIZE = 32}; // If the freeList is empty, expand it by this amount.
    void expandTheFreeList(int howMany = EXPANSION_SIZE); // Add free elements to the free list
};

template < class T > MemoryPool < T > :: MemoryPool (size_t size) {
    expandTheFreeList(size);
}

template < class T > MemoryPool < T > :: ~MemoryPool () {
    MemoryPool<T> *nextPtr = next;
    for (nextPtr = next; nextPtr != NULL; nextPtr = next) {
        next = next->next;
        delete [] nextPtr;
    }
}

template < class T > inline void* MemoryPool < T > :: alloc (size_t) {
    if (!next) {
        expandTheFreeList();
    }

    MemoryPool<T> *head = next;
    next = head->next;
    return head;
}

template < class T > inline void MemoryPool < T > :: free (void *doomed) {

    MemoryPool<T> *head = static_cast <MemoryPool<T> *> (doomed);
    head->next = next;
    next = head;
}

template < class T > void MemoryPool < T > :: expandTheFreeList(int howMany) {
    // We must allocate an object large enough to contain the next pointer.
    size_t size = (sizeof(T) > sizeof(MemoryPool<T> *)) ? sizeof(T) : sizeof(MemoryPool<T> *);
    void *pNewAlloc = new char[size];
    MemoryPool<T> *runner = static_cast <MemoryPool<T> *> (pNewAlloc);
    next = runner;
    for (int i = 0; i < howMany ; i++) {
        void *pNewAlloc = new char[size];
        runner->next = static_cast <MemoryPool<T> *> (pNewAlloc);
        runner = runner->next;
    }
    runner->next = 0;
}

class Rational {
public:
    Rational (int a = 0, int b = 1 ) : n(a), d(b) {}
    void *operator new(size_t size) { return memPool->alloc(size); }
    void operator delete(void *doomed,size_t size)  { memPool->free(doomed); }

    static void newMemPool() { 
        std::cout << "mempool value is " << Rational::memPool << std::endl;
        memPool = new MemoryPool <Rational>; 
        std::cout << "mempool value is " << Rational::memPool << std::endl;
    }
    static void deleteMemPool() { 
        std::cout << "mempool value is " << Rational::memPool << std::endl;
        delete memPool; 
    }

private:
    int n; // Numerator
    int d; // Denominator
    static MemoryPool <Rational> *memPool;
};

MemoryPool <Rational> *Rational::memPool = 0;
int main() {

    Rational *array[1000];

    Rational::newMemPool();

    // Start timing here
    for (int j = 0; j < 1; j++) {
        for (int i = 0; i < 10; i++) {
            array[i] = new Rational(i);
        }

        for (int i = 0; i < 10; i++) {
            delete array[i];
        }
    }

    // Stop timing here
    Rational::deleteMemPool();

} 
```

Stacktrace:

```
Stack trace:>
ReadParsing.exe!Rational::deleteMemPool() Line 75   C++
ReadParsing.exe!main() Line 107 C++
ReadParsing.exe!__tmainCRTStartup() Line 586 + 0x19 bytes   C
ReadParsing.exe!mainCRTStartup() Line 403   C
kernel32.dll!7c817077() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:08:32.860

You have a problem with how you're deleting the blocks in your memory pool. When you allocate blocks, you use `new char[size]` in `expandTheFreeList(i)`.

But when you delete those blocks, you use `delete [] nextPtr`:

```
template < class T > MemoryPool < T > :: ~MemoryPool () {
    MemoryPool<T> *nextPtr = next;
    for (nextPtr = next; nextPtr != NULL; nextPtr = next) {
        next = next->next;
        delete [] nextPtr;     //  <-- problem
    }
} 
```

And since `nextPtr` is a `memoryPool<T>*`, you're freeing the wrong thing (and it ends up recursing into this destrcutor to boot).

Changing that problem line to:

```
delete [] reinterpret_cast<char*>(nextPtr); 
```

seems to make thing not crash. Of course, there may be other problems.

# signalr - 网页关闭时的 SignalR 录制

> ID：10379226
> 
> 赞同：2
> 
> 时间：2012-04-30T06:09:29.267
> 
> 标签：signalr

我正在使用带有 SignalR 的 MassTransit 请求和响应。该网站向创建文件的 Windows 服务发出请求。创建文件后，Windows 服务将向网站发送回响应消息。该网站将打开该文件并使其可供用户查看。我想处理用户在创建文件之前关闭网页的情况。在这种情况下，我希望将创建的文件通过电子邮件发送给他们。

无论用户是否关闭了网页，都会运行响应消息的消息处理程序。我想要做的是在响应消息处理程序中以某种方式知道网页已关闭。这是我已经做过的。它不起作用，但它确实说明了我的想法。在我的网页上

```
$(window).unload(function () {
            if (event.clientY < 0) {
                // $.connection.hub.stop();
                $.connection.exportcreate.setIsDisconnected();
    }
}); 
```

exportcreate 是我的 Hub 名称。在 setIsDisconnected 中，我会在 Caller 上设置一个属性吗？假设我成功设置了一个属性以指示网页已关闭。如何在响应消息处理程序中找出该值。这就是它现在所做的

```
 protected void BasicResponseHandler(BasicResponse message)
    {
        string groupName = CorrelationIdGroupName(message.CorrelationId);

        GetClients()[groupName].display(message.ExportGuid);
    }

    private static dynamic GetClients()
    {
        return AspNetHost.DependencyResolver.Resolve<IConnectionManager>().GetClients<ExportCreateHub>();
    } 
```

我将消息相关 ID 用作一个组。现在对我来说，消息上的 ExportGuid 非常重要。那是用来识别文件的。因此，如果我要通过电子邮件发送创建的文件，我必须在响应处理程序中进行，因为我需要 ExportGuid 值。如果我确实在我的集线器中的 Caller 上存储了一个值以关闭网页，我将如何在响应处理程序中访问它。

以防万一你需要知道。显示在网页上定义为

```
 exportCreate.display = function (guid) {
                setTimeout(function () {
                    top.location.href = 'GetExport.ashx?guid=' + guid;
                }, 500);
            }; 
```

GetExport.ashx 打开文件并将其作为响应返回。

谢谢，

问候本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:35:42.917

我认为更好的选择是实施适当的连接处理。具体来说，让您的集线器实现 IDisconnect 和 IConnected。然后，您将拥有 connectionId 到文档 Guid 的映射。

```
 public Task Connect()
    {
        connectionManager.MapConnectionToUser(Context.ConnectionId, Context.User.Name);
    }

    public Task Disconnect()
    {
        var connectionId = Context.ConnectionId;
        var docId = connectionManager.LookupDocumentId(connectionId);
        if (docId != Guid.Empty) 
        {
           var userName = connectionManager.GetUserFromConnectionId(connectionId);
           var user = userRepository.GetUserByUserName(userName);
           bus.Publish( new EmailDocumentToUserCommand(docId, user.Email));
        }
    }

    // Call from client
    public void GenerateDocument(ClientParameters docParameters) 
    {
        var docId = Guid.NewGuid();
        connectionManager.MapDocumentIdToConnection(Context.ConnectionId, docId);
        var command = new CreateDocumentCommand(docParameters);
        command.Correlationid = docId;
        bus.Publish(command);
        Caller.creatingDocument(docId);
    }

    // Acknowledge you got the doc.
    // Call this from the display method on the client.
    // If this is not called, the disconnect method will handle sending
    // by email.
    public void Ack(Guid docId) 
    {          
       connectionManager.UnmapDocumentFromConnectionId(connectionId, docId);
       Caller.sendMessage("ok");
    } 
```

当然，这是我的想法。

# java-me - 在诺基亚触摸设备中按下菜单按钮时调用的事件

> ID：10379229
> 
> 赞同：3
> 
> 时间：2012-04-30T06:09:42.583
> 
> 标签：java-me, nokia

我为诺基亚C7，N8等诺基亚触摸设备制作了一个J2ME应用程序（2D游戏）。当我在游戏开启时按下菜单按钮时，我到达设备上的主屏幕，但在后台，游戏音乐仍在播放. 谁能告诉我按下菜单按钮时会调用哪个事件，以及解决此问题的任何可能方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T11:26:24.530

调用画布`player.stopPlayer()`的`hideNotify()`方法。可能是您的应用程序的 gameCanvas。

您可以在`showNotify()`gameCanvas 中重新启动音乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:54:50.643

`Canvas.hideNotify()`当 midlet 进入后台时调用参见这篇[文章](http://library.developer.nokia.com/topic/Java_Developers_Library/GUID-574FCC00-89F1-4A21-BE03-3BB5D4151DE3.html?resultof=%22background%22%20)

# c# - 使用 mvc 3 razor 引擎访问父视图控制器中的用户控制文本框

> ID：10379235
> 
> 赞同：0
> 
> 时间：2012-04-30T06:10:35.663
> 
> 标签：c#, asp.net-mvc-3, razor

我正在尝试在 mvc3 中创建用户控件。我正处于这个过程的中间，我也有点困惑。如何使用 razor 引擎在 mvc3 中创建用户控件以及如何在多个视图中重用相同的用户控件？我还必须访问父视图控制器中用户控件内的控件。这个怎么做？

**我的场景是，我将在用户控件中生成一些动态字符串并分配给用户控件中的文本框。现在我必须从父视图的控制器访问该文本框中的值**。

更新：

我在用户控件（部分视图）中有按钮来生成动态字符串。所以总的来说，我有两个按钮，一个在用户控件内，另一个在父视图内。两者都是独立的过程。局部视图内的按钮必须调用某个控制器来生成动态字符串并分配给局部视图内的文本框。但是父视图控制器内的按钮必须获取该值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:26:08.577

为什么不尝试使用局部视图，然后从父视图访问在局部视图中创建的元素。

[http://www.c-sharpcorner.com/UploadFile/aravindbenator/mvc-3-razor-and-partial-view/](http://www.c-sharpcorner.com/UploadFile/aravindbenator/mvc-3-razor-and-partial-view/)

# javascript - Ajax 调用返回“0000000154”为 108

> ID：10379244
> 
> 赞同：0
> 
> 时间：2012-04-30T06:12:03.433
> 
> 标签：javascript, ajax, return-value, jquery-callback

在我的 Web 应用程序中，我使用 ajax 生成序列号。序列号始终为 10 位长。因此，如果它的开头附加了少于 10 个数字的“0”。

我正在执行 ajax 调用，该方法将序列号返回为 108 而不是“0000000154”。

我可以在我的 java 函数中得到“0000000154”作为字符串，但是当我在 javascript 中得到这个值时，它显示 108。

为什么会这样？

下面是我在后端的java代码

```
@RequestMapping(value = "/genNextSerialNumber", method = RequestMethod.GET)
public @ResponseBody
String genNextSerialNumber() {
    log.info("generating serial number");
    String serialNumber= employeeService.genNextSerialNumber();
    return serialNumber;
} 
```

下面是我的前端代码。

```
$.getJSON(url +"?t="+getTimestamp(), function(nextSerialNumber) {
    var nextSerialNumberObj = document.getElementById("nextSerialNumber");
    alert(nextSerialNumber);
    nextSerialNumberObj .value = nextSerialNumber;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:26:14.983

`String`除非发送给您的数据是形式的，否则您无法对其进行任何操作。前导零[的整数是八进制形式](http://jsfiddle.net/Vp6TJ/)。

像这样的东西

```
{
    "foo":0000000012 //gives me a "10". octal
} 
```

不同于：

```
{
    "foo":"0000000012" //gives "0000000012"
} 
```

# java - Why are WebMethods blocked when threads are synchronized?

> ID：10379245
> 
> 赞同：4
> 
> 时间：2012-04-30T06:12:07.090
> 
> 标签：java, multithreading, web-services, jax-ws, synchronized-block

Please see my code example of a JAX-WS Webservice:

```
@WebService
public class ClassA {

@WebMethod
public synchronized void doSomething() {
    new Thread(new Runnable() { // Thread X
        @Override
        public void run() {
            synchronized (ClassA.this) {
                // Do something which should be run in this separate
                // thread, but not twice at the same time
                try {
                    System.out.println("Thread X Start");
                    Thread.sleep(10000);
                    System.out.println("Thread X End");
                } catch (InterruptedException e) {
                }
            }
        }
    }).start();
} 
```

}

If the WebMethod is called twice, the second call is waiting for thread X to complete - why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:16:45.880

seams like both threads synchronize on the instance of ClassA (ClassA.this)

what do you want to synchronize?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:09:21.893

The problem is that you have synchronized also doSomething. This should definitely be removed as it prevents multi-threading in your webservice. For the inner synchronized block, I would also remove it and try to use a [single-Thread ThreadPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html) so that the jobs are executed one at a time.

```
 // Initiate you thread pool and make sure it is unique
    ExecutorService service = Executors.newFixedThreadPool(1);

    ...
    // In your web method:
    Future<?> futureResult = service.submit(new Runnable()/or new Callable());
    // Using callable, you will get a Typed Future

    Object result = futureResult.get();// If you need to wait for the result of the runnable/callable.
    ... 
```

This is available since Java 1.5

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:44:35.980

*For some reasons, Thread B is waiting for Thread A-X (X originated by A) to be
finished - any idea why? I expected that only B-X (X originated by B) is waiting for the lock.*

After this code part is executed in method `webRequests`:

```
new Thread(new Runnable() { // Thread A
             doSomething();
         }).start(); 
```

The instruction is expected most likely to continue with the second part of the method:

```
new Thread(new Runnable() { // Thread B
             doSomething();
         }).start(); 
```

But it will not whatsoever. WHY?:

BECAUSE the main thread which is executing the code can't access the object code anymore, even the above remaining part of the method. because access is denied on this object because of:

```
synchronized(ClassA.this) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:17:59.987

You have done two synchronizations in a row:

1.  `doSomething()`
2.  The thread in `doSomething()`

# php - 包含数字的PHP插入语句是错误的

> ID：10379254
> 
> 赞同：0
> 
> 时间：2012-04-30T06:12:39.577
> 
> 标签：php, mysql

我有这样的声明：

```
 $query="INSERT INTO error_report(task_id,url_is_route, forbidden_word, google_host_fail, google_cache_fail, google_title_fail, google_element_fail, robots_noindex_nofollow, xrobots_noindex_nofollow, title_fetch_warn, h1_fail,h2_fail,h3_fail ,h1_warn ,h2_warn, h3_warn)
         VALUES (".$this->task_id.",0,0,0,0,0,0,0,0,0,0,0,0,0,0)";   

mysql_query($query) or die(mysql_error()); 
```

我明白了：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '0,0,0,0,0,0,0,0,0,0,0,0,0,0)' 附近使用正确的语法

问题出在哪里？

**更新**

```
$query="INSERT INTO error_report(task_id,url_is_route, forbidden_word, google_host_fail, google_cache_fail, google_title_fail, robots_noindex_nofollow, xrobots_noindex_nofollow, title_fetch_warn, h1_fail,h2_fail,h3_fail ,h1_warn ,h2_warn, h3_warn)
             VALUES ('".$this->task_id."','0','0','0','0','0','0','0','0','0','0','0','0','0','0')"; 
```

现在我得到：

> 不正确的整数值：第 1 行的列 'task_id' 的 ''

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:20:47.287

1.  使用引号
2.  您正在尝试更新 16 列但仅输入 15 个值。纠正那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:29:54.877

> 不正确的整数值：第 1 行的列 'task_id' 的 ''

`$this->task_id`是空的，并且不包含您怀疑的 116。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T06:16:23.493

如何将字段的默认值设置为**0**并执行以下操作：

```
 $query="INSERT INTO error_report(task_id) VALUES (".$this->task_id.")"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T06:29:47.343

检查这些

1.  $this->task_id 包含值而不是空的
2.  $this->task_id 中有一个整数值或任何字符。我认为该列是 int，因此如果它包含非整数值，则会引发错误

# facebook - 在 Open Graph Post 中添加额外链接

> ID：10379256
> 
> 赞同：0
> 
> 时间：2012-04-30T06:12:48.620
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我们正在使用 Open Graph 制作文章阅读应用程序。当用户阅读应用程序上的任何文章时，它会作为活动发布，他的朋友可以看到它。

问题是如果用户点击提要标题，他会被带到权限页面，他必须授予阅读文章的权限。我知道这是 Open Graph 的核心，但我们觉得如果我们能在通常的帖子之外提供一个像“立即阅读”这样的链接，那将是非常棒的，它可以将用户直接带到文章而无需授予任何权限。显然，他将无法在该页面上看到任何朋友的活动，也不允许我们代表他发帖，但这很好，因为用户的意图只是阅读那篇特定的文章。

有没有人做过这样的事情？

任何指针将不胜感激

高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:44:54.417

我不确定您是如何发布此链接的，如果它是使用 javascript sdk 还是来自服务器，但[Post 对象](http://developers.facebook.com/docs/reference/api/post/)具有以下*操作*字段：

> 帖子上可用操作的列表（包括评论、点赞和可选的应用指定操作）

例如使用 js sdk：

```
FB.ui({
    method: "feed",
    link: "LINK_URL",
    ...
    actions: [
        { name: "Read Now", link: "URL TO THE READ NOW " }
    ]
}, function(response) { console.log(response); }); 
```

如果你用不同的方法发帖，你显然可以做同样的事情，因为它都是基于 http 请求的。

另一件事是您可以完全解决所有这些问题。当用户看到一篇文章时，检查他是否经过身份验证，如果他没有问题，否则向他显示类似“您可以阅读文章或登录，阅读并分享体验的社交方面......”的消息。和两个选项，继续阅读或安装应用程序，如果他选择安装应用程序，那么您将他带到身份验证对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T09:21:04.113

由您控制身份验证流程。如果您关闭了经过身份验证的推荐，那么当用户单击提要中的文章链接时，他们将被带到您的应用程序。然后，您可以决定是否要对它们进行身份验证。

你可以做以下三件事之一：

*   强制用户授权应用阅读文章。这确保了每个读者都可以发布一个阅读操作，从而扩展您的应用程序，但它是一种激进的用户体验。
*   不强制用户授权应用阅读文章。这提供了出色的用户体验（在提要中查看故事、点击、阅读故事），但这些未经身份验证的用户无法发布阅读操作，因此您的应用很难发展。在阅读完文章后让这些用户进行身份验证几乎是不可能的
*   当用户登陆文章时，显示一个模式对话框，询问用户是否要进行身份验证。明确表明这是您希望他们做的事情，并让他们知道好处（朋友可以看到您正在阅读的内容，您可以看到您的朋友正在阅读的内容）-但是此对话框包含“不，谢谢”选项这只是让他们阅读未经授权的文章。

一些应用程序喜欢卫报作为用户在阅读文章之前进行身份验证，但是如果用户在身份验证对话框中按下“取消”，他们会设置一个 cookie 并将它们重定向到 Guardian.co 上的非社交上下文中的文章。英国。cookie 意味着他们下次点击新闻源中的文章时，将绕过社交应用程序并直接在 Guardian.co.uk 上阅读内容。这样，想要社交体验的用户就会得到一个，而那些不想要的用户：不要。

# java - 在android中扩展ArrayAdapter

> ID：10379261
> 
> 赞同：19
> 
> 时间：2012-04-30T06:13:01.647
> 
> 标签：java, android, android-arrayadapter, inner-classes

我需要覆盖`getFilter()`类中的一个方法，我[在 github 中](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/ArrayAdapter.java)`ArrayAdapter` 找到了源代码

```
//package name

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import android.content.Context;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.Filterable;

public class CustomAdapter<T> extends ArrayAdapter<T> implements Filterable{

    private ArrayList<T> mOriginalValues;
    private List<T> mObjects;
    private CustomFilter mFilter;
    private final Object mLock = new Object();
    public CustomAdapter(Context context, int textViewResourceId, T[] objects) {
        super(context, textViewResourceId, objects);

        mObjects = Arrays.asList(objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        if (mFilter == null) {
            mFilter = new CustomFilter();
        }
        return mFilter;
    }

    private class CustomFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence prefix) {
            FilterResults results = new FilterResults();
            Log.d("bajji", "its ---> " + prefix);
            if (mOriginalValues == null) {
                synchronized (mLock) {
                    mOriginalValues = new ArrayList<T>(mObjects);
                }
            }

            if (prefix == null || prefix.length() == 0) {
                ArrayList<T> list;
                synchronized (mLock) {
                    list = new ArrayList<T>(mOriginalValues);
                }
                results.values = list;
                results.count = list.size();
            } else {
                String prefixString = prefix.toString().toLowerCase();

                ArrayList<T> values;
                synchronized (mLock) {
                    values = new ArrayList<T>(mOriginalValues);
                }

                final int count = values.size();
                final ArrayList<T> newValues = new ArrayList<T>();
                final ArrayList<T> approxValues = new ArrayList<T>();
                final ArrayList<T> secondApproxValues = new ArrayList<T>();

                for (int i = 0; i < count; i++) {
                    final T value = values.get(i);
                    final String valueText = value.toString().toLowerCase();
                    boolean flag = true;
                    // First match against the whole, non-splitted value
                    if (valueText.startsWith(prefixString)) {
                        newValues.add(value);
                        flag = false;
                    } else {
                        final String[] words = valueText.split(" ");
                        final int wordCount = words.length;

                        // Start at index 0, in case valueText starts with space(s)
                        for (int k = 0; k < wordCount; k++) {
                            if (words[k].startsWith(prefixString)) {
                                newValues.add(value);
                                flag = false;
                                break;
                            } 
                        }
                    }

                    if(flag) {
                        if(approxMatch(valueText, prefixString) <= 3) { //change the stuff and do a levi work
                            approxValues.add(value);
                        }
                        else {
                            final String[] words = valueText.split(" ");
                            final int wordCount = words.length;

                            // Start at index 0, in case valueText starts with space(s)
                            for (int k = 0; k < wordCount; k++) {
                                if(approxMatch(words[k], prefixString) <= 3) {
                                    //leve work
                                    secondApproxValues.add(value);
                                    break;
                                }
                            }
                        }
                    }
                }
                newValues.addAll(approxValues);
                newValues.addAll(secondApproxValues);
                results.values = newValues;
                results.count = newValues.size();
            }
            return results;
        }
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            //noinspection unchecked
            mObjects = (List<T>) results.values;
            if (results.count > 0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }
    }

    private int approxMatch (String s, String t) {
          // an approxmimate string matching algo
          return p;
    }
} 
```

问题是 getFilter 方法有一个私有内部类的对象，`ArrayFilter`它有一个方法`peformFiltering`，我需要在那里放一个不同的代码，所以我必须覆盖这个类。我在方法中遇到了一个异常。

在扩展 ArrayAdapter 的派生类中，我创建了一个类似于`ArrayFilter`并调用它的私有内部类，`MyFilter`我在方法中再次得到相同的异常`performFiltering`。

我找到了解决我的问题的解决方案。我复制了`ArrayAdapter`类中的所有代码并创建了一个名为的新类`MyAdapter`，并在内部类中更改了一些代码`ArrayFilter`，应用程序按照我想要的方式运行。但我觉得它不是最好的解决方案。

Android 有各种 api 级别，所以如果数组适配器在不同的 api 级别更改，那么我必须在我的代码中添加这些更改。所以我觉得最好的方法是扩展类`ArrayAdapter`来创建`MyAdapter`而不是仅仅复制和粘贴代码`ArrayAdapter`

我如何覆盖父类的内部私有类..？

编辑：我得到的例外.. ![例外](../Images/98bd2e37f9afad37e9fab50302c777fe.png)

Edit2：现在我在问题中添加了完整的代码。如果我复制和编辑数组适配器，它就可以完美地工作..问题只是当我扩展时..！！现在代码和搜索工作正常。我用`Log.i`.. 检查了它，但 UI 中自动完成建议的下拉列表不起作用.. 我只得到我输入的第一个字符，下一个字符过滤发生，但 UI 更新没有发生。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T04:30:52.033

在stackoverflow社区的一些帮助之后，我删除了异常，后来我发现返回的建议并没有真正改变，因为它`mObjects`是从超类或基类返回的。问题是有两个公共方法`getCount()`，`getItem(int position)`它们从基类中获取计数并从 mObjects 中获取列表。所以我只需要在我的课堂上添加这两种方法..

```
public int getCount() {
    return mObjects.size();
}

public T getItem(int position) {
    return mObjects.get(position);
} 
```

现在`mObjects`将返回派生类。在 UI 的下拉列表中更新了哪些内容。

我不是Java专家，但这解决了我的问题。如果您有任何改进代码的建议，请在评论中添加或随时编辑答案。！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T06:13:06.330

## 更新：

您应该覆盖类中的`toString()`方法`T`并返回过滤条件字符串。

例如，

```
class T {

    String firstName;
    String lastName;
    ...
    ...
    @override
    String toString() {
        return firstName + lastName;
    }
} 
```

默认情况下，类的`toString()`实现`Object`返回`getClass().getName() + '@' + Integer.toHexString(hashCode())`

## 原来的：

数组列表引用应传递给`ArrayAdapter`构造函数。我认为您没有这样做，因此它无法获得过滤列表。

在此示例代码`objects`中，数组引用被传递给超级构造函数。

```
public CustomAdapter(Context context, int tvResId, ArrayList<String> objects) {
    super(context, textViewResourceId, objects);
    this.objects = objects;
} 
```

如果您的过滤基于列表项中的简单字符串，那么您可以`TextWatcher`按照@Iiorry 的建议实施。但如果过滤比这复杂一点，那么你也需要实现`Filterable`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T13:35:03.187

您不需要实现自己的过滤器......只需按照@Waqas 的建议覆盖 getFilter 。

这就是我所做的并且它有效。随意调整它以适应您的需求...

希望它会有所帮助。

**EditText（搜索文件）：**

```
searchFilter.addTextChangedListener(mOnSearchBoxTextChanged);
private TextWatcher mOnSearchBoxTextChanged = new TextWatcher() {

        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            mAdapter.getFilter().filter(s.toString());
        }

    }; 
```

**适配器 getFilter()：**

```
 class MyAdapter extends BaseAdapter implements Filterable {

            //the rest of the adapter....

            @Override
            public Filter getFilter() {
                if (newFilter == null) {
                    newFilter = new Filter() {
                        @Override
                        protected void publishResults(CharSequence prefix,
                                FilterResults results) {

                            CLog.logD( "Friends list filtered");

                            mAdapter.notifyDataSetChanged();
                        }

                        @Override
                protected FilterResults performFiltering(CharSequence constraint) {
                    constraint = constraint.toString().toLowerCase();

                    filteredFriendList = new ArrayList<FriendsListItemView>();

                    if (constraint!= null && constraint.toString().length() > 0) {
                        for (int i = 0; i < friendsList.size(); i++) {
                            FriendsListItemView newFriend = friendsList.get(i);
                            String name = newFriend.userName.getText().toString();

                            if (name.toLowerCase().contains(constraint)) {
                                filteredFriendList.add(newFriend);
                            } 
                        }

                    } else {
                        if (filteredFriendList.size() == 0) {
                            filteredFriendList = friendsList;
                        }
                    }

                    FilterResults newFilterResults = new FilterResults();
                    newFilterResults.count = filteredFriendList.size();
                    newFilterResults.values = filteredFriendList;
                    return newFilterResults;
                }
            };
                }
                return newFilter;
            }
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T08:57:41.720

也许这可以帮助你：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import android.content.Context;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Filter;

public class CustomAdapter<T> extends ArrayAdapter<T> {

    private final ArrayList<T> mOriginalValues;
    private List<T> mObjects;
    private CustomFilter mFilter;
    private final Object mLock = new Object();
    public CustomAdapter(Context context, int textViewResourceId, T[] objects) {
        super(context, textViewResourceId, objects);

        mObjects = Arrays.asList(objects);
        mOriginalValues = (ArrayList<T>) Arrays.asList(objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        if (mFilter == null) {
            mFilter = new CustomFilter();
        }
        return mFilter;
    }

    private class CustomFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence prefix) {
            FilterResults results = new FilterResults();
            Log.d("bajji", "its ---> " + prefix);

            if (prefix == null || prefix.toString().trim().length() == 0) {
                ArrayList<T> list;
                synchronized (mLock) {
                    list = new ArrayList<T>(mOriginalValues);
                }
                results.values = list;
                results.count = list.size();
            } else {
                String prefixString = prefix.toString().toLowerCase();

                ArrayList<T> values;
                synchronized (mLock) {
                    values = new ArrayList<T>(mOriginalValues);
                }

                final int count = values.size();
                final ArrayList<T> newValues = new ArrayList<T>();
                final ArrayList<T> approxValues = new ArrayList<T>();
                final ArrayList<T> secondApproxValues = new ArrayList<T>();

                for (int i = 0; i < count; i++) {
                    final T value = values.get(i);
                    final String valueText = value.toString().toLowerCase();
                    boolean flag = true;
                    // First match against the whole, non-splitted value
                    if (valueText.startsWith(prefixString)) {
                        newValues.add(value);
                        flag = false;
                    } else {
                        final String[] words = valueText.split(" ");
                        final int wordCount = words.length;

                        // Start at index 0, in case valueText starts with space(s)
                        for (int k = 0; k < wordCount; k++) {
                            if (words[k].startsWith(prefixString)) {
                                newValues.add(value);
                                flag = false;
                                break;
                            } 
                        }
                    }

                    if(flag) {
                        if(approxMatch(valueText, prefixString) <= 3) { //change the stuff and do a levi work
                            approxValues.add(value);
                        }
                        else {
                            final String[] words = valueText.split(" ");
                            final int wordCount = words.length;

                            // Start at index 0, in case valueText starts with space(s)
                            for (int k = 0; k < wordCount; k++) {
                                if(approxMatch(words[k], prefixString) <= 3) {
                                    //leve work
                                    secondApproxValues.add(value);
                                    break;
                                }
                            }
                        }
                    }
                }
                newValues.addAll(approxValues);
                newValues.addAll(secondApproxValues);
                results.values = newValues;
                results.count = newValues.size();
            }
            return results;
        }
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            //noinspection unchecked
            mObjects = (List<T>) results.values;
            notifyDataSetChanged();
            clear();
            for(T tmp : mObjects){
                add(tmp);
            }

            notifyDataSetChanged();
        }
    }

    private int approxMatch (String s, String t) {
          // an approxmimate string matching algo
          return p;
    }
} 
```

现在在`getView`适配器的方法中，您需要参考**mObjects**对象来获取 ListView 的最新可用值

# c# - 跟踪应安装在哪个驱动器中并保持跟踪的程序

> ID：10379266
> 
> 赞同：0
> 
> 时间：2012-04-30T06:13:21.107
> 
> 标签：c#, windows, winforms

我有一个问题。无法解决，所以在这里发布。实际上，当进行任何安装时，它会询问用户我们应该安装哪个驱动器。所以它安装在那里并跟踪它的安装位置。

所以以同样的方式，我希望通过 C# 程序询问用户他想在哪个驱动器中保存文件，然后我应该能够跟踪它。

我的意思是说假设用户稍后安装在 C 盘中，他将其卸载并安装在 D 盘中。我想知道不是通过搜索而是以任何其他方式将它放在哪个驱动器中。就像一个注册表，我可以检查它的位置并从中获取详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:21:01.637

使用[注册表](http://msdn.microsoft.com/en-us/library/85t3c3hf%28v=vs.80%29.aspx)，如果它是仅限 Windows 的应用程序，您已经自己回答了 :)

其他方法可能包括配置文件、将此信息嵌入到可执行文件中，或设置保存有关每次安装的数据的 Web 服务。（有一天这将比注册表更简单...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T12:12:12.487

您想安装任何 Windows 应用程序还是只想将一些文件放入目录中。对于第一种情况，您可以使用`Application.StartupPath`

[更多细节](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:21:03.947

我认为你需要`System.Windows.Forms.Application.ExecutablePath`.

# mongodb - Mongo 仅在大于特定数量时导出记录

> ID：10379270
> 
> 赞同：0
> 
> 时间：2012-04-30T06:13:28.910
> 
> 标签：mongodb

仅当基于查询的记录总数大于 100 时，我才想从 Mongo DB 导出记录

```
Example: db.userInfo.find('some query here').count({$gt:100}) 
```

有人能告诉我这样的事情是否可能吗？基本上我不想要在我的网站上几乎没有任何活动的用户信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:57:52.540

您的意思是在找到少于 100 个元素的情况下，您想从查询中返回一个空光标。您可能可以使用 map/reduce 来执行此操作。 [http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Overview](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Overview) 但是在应用程序代码中处理计数小于 100 的事实并忽略该结果可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:59:34.890

您正在猜测新语法。不，在查询级别上是不可能的。在您的应用程序代码中实现一些东西。

# c++ - 错误的输入会导致程序退出

> ID：10379274
> 
> 赞同：6
> 
> 时间：2012-04-30T06:14:04.487
> 
> 标签：c++

看看这段代码：

```
#include <iostream>
using namespace std;
int main()
{
    string s;
    int n;
    float x;
again:
    cout << "Please Type this: ABC456 7.8 9 XYZ\n";
    cin >> s >> n >> x >> s;
    cout << "\nDo you want to try Again(y/n)? ";
    char t;
    cin >> t;
    if (t=='y' || t=='Y')
        goto again;
    return 0;
} 
```

只需尝试键入“ABC456 7.8 9 XYZ”并按回车，将导致程序退出，然后提示用户重试。我知道输入是错误的，它们不在它们的类型中，但为什么会导致退出？以及如何避免这种退出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T06:18:47.350

改变

```
cin >> s >> n >> x >> s; 
```

到

```
cin >> s >> x >> n >> s; 
```

当您`7.8`作为第二个输入输入时，您将它收集在一个整数变量而不是浮点变量中。因此，当您输入时：

```
ABC456 7.8 9 XYZ 
```

`s`获取`ABC456`，`n`获取`7`（因为它是 int 类型并且输入缓冲区仍然`.8 9 XYZ\n`在其中）。下一个`n`得到`.8`，最后`s`得到`"9"`。现在输入缓冲区已经`XYZ\n`在其中了。下次当您将输入读入`t`以获取用户的选择时，`X`会被读入`t`并且因为它不是`y`or `Y`，所以循环退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T06:28:58.430

在后面输入调试行`cin`

```
cout << "s = " << s << "   n = " << n << "   x = " << x; 
```

并运行

```
Please Type this: ABC456 7.8 9 XYZ
ABC456 7.8 9 XYZ
s = 9   n = 7   x = 0.8 
```

很明显，第一个 ABC456 被读入字符串`s`。下一个是整数，因此只有`7`被读入`n`，`0.8`部分被读入`float` `x`。`9`现在再次分配下一个输入`s`，因此最终值为`s`字符串“9”。现在 的第一个字符`X`被送入下一个`cin`它被分配到的位置`t`。`cout << "\nt = " << t;`要确认，只需在输入后插入另一条调试行`t`。因此，分配给“X”`if`的值是假的，`t`因此程序退出。

如果您输入`ABC456 7.8 9 YZ`，程序将再次要求输入，因为现在`t`将有“​​Y”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T06:38:52.727

当流提取运算符`>>`遇到无效输入时，它会将流置于不再提取输入的模式。

您可以使用布尔测试（例如 ）检测此模式`if ( cin )`，并使用 重置它`cin.clear()`。这样做之后，无效的输入仍保留在`cin`的输入缓冲区中，因此您需要以某种方式对其进行处理，例如 by `ignore`。

更好的是，提取运算符返回`cin`，因此您可以在提取时进行测试：

```
if ( ! ( cin >> s >> n >> x >> s ) ) {
    cout << "You fail horribly!\n";
    cin.clear();
    cin.ignore( std::numeric_limits< std::streamsize >::max(), '\n' );
} 
```

如需更深入的了解，请参阅*[basic_ios 上的标志语义](https://stackoverflow.com/questions/4258887/semantics-of-flags-on-basic-ios)*（我确信此站点上的一些问题与此完全相同）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T08:14:42.800

回答[https://stackoverflow.com/a/10379322/924727](https://stackoverflow.com/a/10379322/924727)说明会发生什么。关于*为什么*，我们必须深入一点哲学。

C++ 流模型不考虑“人机交互”：它是一种通用转换器，可将几乎无限的字符序列转换为以*空格*分隔的“值”列表，然后再转换为提供的“变量”。

没有“对话的输入和输出交错”的概念。如果您将输入写入文本文件，例如`myinput.txt`（取消正确输入）

```
ABC456 9 7.8 XYZ
Y
ABC456 5 6.7 XYZ
N 
```

并从命令提示符运行您的程序，例如

```
 myprogram < myinput.txt 
```

您的程序将运行......并且不需要“暂停”即可查看输出，因为没有人坐在那里查看并回答它。

程序暂停等待用户输入不是因为`cin >>`，而是因为`cin`没有处于失败状态并且缓冲区为空并且缓冲区重新映射的源是控制台。在返回之前等待'\n'的是控制台，而不是cin。

什么时候`cin >> n`叫...

*   该`operator>>`函数被调用，它...
*   从流语言环境中获取 num_get facet 并调用它的 get 函数...
*   重复调用流缓冲区`sbumpc`以获取数字并计算数值。
*   如果缓冲区有内容，它只是一个接一个地返回它的字符。当没有更多字符存在时（或者如果它是空的）......
*   缓冲区要求操作系统从低级文件中读取。
*   如果文件是控制台，则调用控制台内部行编辑器：
*   这使得控制台卡住让用户按下字符和一些控件（例如退格），直到按下 Enter 时
*   控制台行编辑器将该行返回给操作系统，这将使输入 CON 文件的内容可用...
*   这是由填充自身的缓冲区读取的（在将读取的字符传递给 cvt 语言环境方面，但这是一个细节之后）。
*   现在做自己的回报展开。

所有这些机制都使得 - 如果您键入的内容超过要求 - 缓冲区内容仍然可用于下一次`>>`调用，独立于它是否是另一个程序行。

正确的“更安全”的解析需要，在读取输入后，要清除流状态并忽略以下内容直到下一个`'\n'`. 这通常是通过

```
cin.clear(); 
cin.ignore(numeric_limits<std::streamsize>::max(), '\n'); 
```

这样，任何输入的内容都会被丢弃，接下来会`cin>>`找到一个没有数据的缓冲区（只是`'\n'`, 被修剪为“开始空间”），从而导致控制台再次进入行编辑模式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T06:18:55.260

程序在尝试将错误的数据类型放在一起时遇到问题或异常。也许您想查看 cin 上的 >> 运算符的文档，查找当它遇到错误的数据类型输入时它会做什么的详细信息，并查看 cin>> 行和您的输入以查找可能存在的任何地方发生，因此您可以验证输入是否正确处理

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-30T07:01:11.040

当你调用 cin.clear() 时，你应该同时调用 cin.sync()。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-30T08:10:06.230

一旦流检测到错误，它就处于错误状态，并且所有进一步的输入尝试都将是无操作的。在没有首先测试读取是否成功的情况下访问流读取的变量是未定义的行为，因此至少在理论上，您的程序可以做任何事情。（实际上，如果未初始化变量的类型为`char`，那么您所冒的风险就是一个随机值。）

读取面向行的输入时，最好的解决方案是使用 `std::getline`. 然后使用输入的字符串构造一个 `std::istringstream`来解析行。这使输入流处于良好状态，并且已经为下一个输入同步。我会使用类似的东西：

```
void
getInput()
{
    std::string line;
    std::cout << "Please type this: ABC456 7.8 9 XYZ" << std::endl;
    std::getline( std::cin, line );
    if ( ! std::cin ) {
        //  Very unexpected error... 
        throw SomethingSerious();
    }
    std::string s;
    int n;
    float f;
    std::istringstream toParse( line );
    toParse >> s >> f >> n >> s;
    if ( ! toParse ) {
        //  Input incorrect...
    }
}

bool
tryAgain()
{
    std::cout << "Do you want to try again (y/n)? ";
    std::string line;
    std::getline( std::cin, line );
    return line.size() == 1 && (line[0] == 'y' || line[0] == 'Y');
        //  But I'd be more tolerant with regards to spaces...
}

bool
oneInput()
{
    getInput();
    return tryAgain();
}

int
main()
{
    while ( oneInput() ) {
    }
    return 0;
} 
```

# javascript - 在 DerbyJS 中使用从 MongoDB 导入的文档

> ID：10379276
> 
> 赞同：2
> 
> 时间：2012-04-30T06:14:18.430
> 
> 标签：javascript, node.js, mongodb, derbyjs

我有一个 MongoDB 集合，其中包含未通过我的 Derby 应用程序保存的数据。我想对此进行查询并将其拉入我的 Derby 应用程序。

所以，我想通了，这是执行此操作的代码：

```
get '/:year', (page, model, params) ->
  query = model.query 'years', 
    where:
      year: (parseInt params.year, 10)
    limit: 1
  model.subscribe query, (err, year) ->
    if err
      console.log err

    page.render
      y: year.get(),
      year: params.year 
```

唯一的问题是文档没有*derby* id，因此它将 MongoDB objectid (_id) 设置为*derby* id。这是`model.get()`返回的 JSON 示例：[https ://gist.github.com/0a5426d2b28a940e8803](https://gist.github.com/0a5426d2b28a940e8803)

我无法知道查询之前的 objectid 是什么。如果最近返回的 id ( `currID`) 位于对象的顶层，我会很高兴，这样我就可以查询它并设置模型引用。我现在构建了一个 hack 来绕过它，但它并不像我希望的那样顺利。代码如下：

```
getId = (obj, year) ->
  for x of obj
    return obj[x].id if obj[x].year is year
  -1 
```

另外，有什么方法可以更新模板而不破坏屏幕上已经存在的一些模板？而不是做一个完整的`page.render`只是做一个`template.render`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:52:51.013

Racer 查询刚刚在 0.3.11 中更新，并在此自述文件中进行了描述：[https ://github.com/codeparty/racer/blob/master/lib/descriptor/query/README.md](https://github.com/codeparty/racer/blob/master/lib/descriptor/query/README.md)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T07:24:28.720

**注意：这不再需要。查询系统已更新。请参阅内特的回答。**

我与 DerbyJS (nateps) 的开发人员进行了交谈，他告诉我他们正在努力改进查询系统。它仍在进行中。

现在，我已经构建了一个 hack，它需要一个对象来测试和一个参数对象

```
getId = (obj, params) ->
  ids = []
  for x of obj
    i = 0
    for y of params
      if obj[x][y] isnt params[y]
        break
      else if (++i is params.length)
        ids.push
          id: obj[x].id
  return ids 
```

例如，您可以输入这样的对象：

```
var obj = {
  "lskjfalksj23423": {
    id: "lskjfalksj23423",
    name: "random day",
    year: 2012,
    month: 12,
    day: 1
  },
  "aklsdjflkasdfd": {
    id: "aklsdjflkasdfd",
    name: "random day 2",
    year: 2012,
    month: 8,
    day: 1
  }
} 
```

然后是一个要测试的对象（确保添加一个长度键）

```
var params = {
  month: 12,
  day: 1,
  length: 2
} 
```

它将返回一个匹配 id 的数组：`[{id: "lskjfalksj23423"}]`

注意：我没有测试过这个例子，所以如果你遇到问题，请告诉我。无论如何，当进一步构建查询系统时，这应该在几个月内过时。

# javascript - 动画工作在双击而不是单击

> ID：10379277
> 
> 赞同：0
> 
> 时间：2012-04-30T06:14:28.973
> 
> 标签：javascript, css, html

我有一个网页，我想在其中滑动图像问题是当我双击按钮时它会滑动而单击它不会滑动我不知道为什么会这样。

我用于滑动的 Java 脚本

```
 <script>
            function class1(id, newclass){
                myid=document.getElementById(id);
                myid.className=newclass;
                }
            </script>

     <div id="page_three" class="panel">
     <div class="main_heading_three">DRAXXIN</div>
     <div class="menu">
           <ul>
                    <li class="stix"></li>
                    <li><a href="#page_one"><img src="image/overview.gif" /></a></li>
                    <li class="stix"></li>
                    <li><a href="#page_two"><img src="image/strategy.gif"/></a></li>
                    <li class="stix"></li>
                    <li><a href="#page_three" onclick="class1('img_one_slide','img_one');class1('img_two_slide','img_two');"><img src="image/draxxin_active.png"/></a></li>                         <li class="stix"></li>
                    <li><a href="#page_four"><img src="image/excede.gif"/></a></li>
                    <li class="stix"></li>
                    <li><a href="#page_five" onclick="class1('test','img_six_2');"><img src="image/results.gif"/></a></li>
                    <li class="stix"></li>
                    <li><a href="#"><img src="image/reference.gif"/></a>
                            <ul>
                            <li><a target='_blank' href="DRAXXIN-Product-Insert.pdf"><img src="image/dropdown1.png"/></a></li> 
                            <li><a target='_blank' href="DRAXXIN-Product-Insert.pdf"><img src="image/dropdown2.png"/></a></li>
                            </ul>
                    </li> 
                    <li class="stix"></li>
                </ul>
            </div>
            <div class="rightclass_two"><img src="image/whiteslide.png"/></div>  
            <div>
                <ul>
                    <li class="midmenu_3"><a href="#page_two"><img src="image/backward.png"/></a></li>     
                    <li class="midmenu_4"><a href="#page_four"><img src="image/forward.png"/></a></li>
                </ul>
            </div>                
            <div class="text_paragraph_3">
                <p>DRAXXIN ® (<i>tulathromycin</i>) keeps working for up to 14 days.<span class="superscript">1, 2</span>
                </p>
            </div>
            <div class="text_paragraph_4">
               A single dose of DRAXXIN ® (<i>tulathromycin</i>):
                <ul><li>Controls and treats the four major BRD pathogens, including <i>Mycoplasma bovis</i></li>
                    <li>Decreases the total number of treatments</li>
                    <li>Reduces associated labor and treatment costs</li>
                </ul>

            </div>
            <div class="text_paragraph_5">
                <p class="para">Pre-slaughter Withdrawal Time 18 days </p>
                <p class="para_2">IMPORTANT SAFETY INFORMATION</p>
                <p class="para_1">Do not use DRAXXIN in calves to be processed for veal. A pre-slaughter withdrawal time has not been determined for pre-ruminating calves. Effects on reproductive performance, pregnancy and lactation have not been determined. 
                </p>
           </div>
           <div class="right_text_page3">
           <p>With longer duration, DRAXXIN extends your PMIs or PTIs for a greater return on your investment.
           </p>
           </div>
           <div class="right_text_page4"> 
           <p>
           DRAXXIN has been shown to work with a 14-day PMI on high-risk cattle compared with other antimicrobials using a 3-day PMI<span class="superscript">7</span>
           </p>
           </div>
           <div class="right_text_page5"> 
           <small>
           <p>
           a,b Different superscripts identify statistically different values (P=0.0005) through 208 days.
           </p>
           <p>*Least square means.</p>
           </small>
           </div>
           <div class="right_text_page6"> 
           <p>
           A study<span class="superscript">8</span> of DRAXXIN shows, even at 7-, 10- or 14-day
           PTIs, extending the PTI resulted in no change to
           treatment responses, or slight improvement
           </p>
           </p></div>
           <div class="right_text_page7"> 
           <p>
           At 7, 10 or 14 days, there were no differences in
           mortality rate or ADG<span class="superscript">8</span>
           </p>
           <p>
           (<small><i>P=0.34</i></small>)
           </p>
           </p>
           </div> 
```

这些是滑动的图像。

```
 <div id="img_one_slide" class="img_one_in"><img src="image/graph_one.png"/></div>      
    <div id="img_two_slide" class="img_two_in"><img src="image/graph_two.png"/></div>

 <!--Draxxin page light box--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:32:05.063

您需要从元素 a 中删除 href 或将 onclick 移动到另一个元素。

事实上，a 元素上的两个“指令”（由 onclick 设计的，自然跳转到 href）是冲突的。

编辑 ：

这是一种（使用 jquery）进行页面内跳转和滑动的方法：

```
function doThing() {
    $('html, body').animate({
        scrollTop: $('a[name="page_three"]').offset().top + 'px'
    }, 'fast');
    class1('img_one_slide','img_one');
    class1('img_two_slide','img_two');
}

<li><img style="cursor:pointer;" src=... onclick="doThing();"> 
```

我添加了光标：指针；让用户知道图像是可点击的。

# android - 如何为android listview实现过滤器

> ID：10379279
> 
> 赞同：0
> 
> 时间：2012-04-30T06:14:40.080
> 
> 标签：android, listview, filter

我有一组模型对象数据，并且我在我的自定义 ArrayAdapter 中的模型对象数组中显示列表视图中的文本和图像。

它就像 android 联系人视图，我想实现搜索功能。

谁能给我建议，如何为自定义适配器实现过滤器，它显示来自模型对象的数据。

示例链接或代码片段也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:26:38.717

你只需要过滤底层集合（像这样：[过滤Java集合的最佳方法是什么？](https://stackoverflow.com/questions/122105/java-what-is-the-best-way-to-filter-a-collection)）

当过滤条件发生变化时，您只需发出数据集已更改的信号并使用过滤列表实例来提供条目数量和单个视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:05:22.190

我实际上不喜欢复制原始列表的方法。它既耗时又耗内存。我采取的方法是让想要的物品可见，而不需要的物品消失。我的示例是用于过滤 TableRows 的 TableLayout，每个都有一个 TextView。

```
public void filter(TableLayout tl, String regex) {
    TableRow tr;
    TextView tv;
    Pattern p;
    Matcher m;

    p = Pattern.compile(regex);
    int n = tl.getChildCount();
    for(int i = 0; i < n; i++) {
        tr = (TableRow) tl.getChildAt(i);
        tv = (TextView) tr.getChildAt(0);
        m = p.matcher(tv.getText());
        if(m.find()) {
            tr.setVisibility(View.VISIBLE);
        } else {
            tr.setVisibility(View.GONE);
    }
} 
```

我没有分析它，但我很确定它比复制列表的所有元素然后过滤然后显示新列表要快。

随着您的列表越来越大，优势应该会更加明显。

但是，需要注意的是，我必须承认，虽然它可以很好地过滤数百行，但我担心当行数如此之大以至于过滤需要超过 5 秒时会发生什么。然后它应该触发应用程序无响应对话框。
我试图让它成为一个线程，但是因为我直接处理视图可见性，我收到一条错误消息，只有原始线程可以接触视图。我正在努力，我相信我会找到解决方案。

# servlets - servlet 未在 tomcat v6.0.35 和 eclipse helios 上运行

> ID：10379283
> 
> 赞同：1
> 
> 时间：2012-04-30T06:15:03.650
> 
> 标签：servlets

我正在尝试在 eclipse Helios 中的 Tomcat v6.0.35 上运行一个简单的 Web 应用程序。当我尝试运行 servlet 时，我在浏览器上收到以下错误。

状态报告：“此 URL 不支持消息 HTTP 方法 GET”描述：“请求的资源不允许指定的 HTTP 方法（此 URL 不支持 HTTP 方法 GET）”这是我的 web.xml 代码。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
<display-name>servletDemo</display-name> 
```

```
<servlet-name>DemoServlet</servlet-name>
<servlet-class>com.lara.DemoServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>DemoServlet</servlet-name>
<url-pattern>/servletDemo.do</url-pattern>
</servlet-mapping>
</web-app> 
```

这是 html 文件 index.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="DemoServlet"method="post">
 <input type="submit" value="submit">
</form>
</body>
</html> 
```

现在这是 DemoServlet.java

```
package com.lara;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

 public class DemoServlet extends HttpServlet 
{
private static final long serialVersionUID = 1L;      
   public DemoServlet() 
   {
    super();       
   }

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    PrintWriter pw=response.getWriter();
    System.out.print("1st appp demo...!!!");
}
} 
```

我的文件夹结构是这样的...

![在此处输入图像描述](../Images/16c66e0d55395f55ab47b94a524e2c17.png)

类文件也进入 WEB-INF\classes 文件夹，并尝试进入具有不同映射样式的 web.xml，如 \servletDemo 和 index.html 等，但我的 servlet 没有在浏览器上运行，尽管索引文件正在运行浏览器..:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:16:44.363

您的错误是因为您的 servlet 未实现`doGet`：尝试将`doGet`函数添加到类中。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    PrintWriter pw=response.getWriter();
    System.out.print("1st appp demo...!!!");
} 
```

# facebook - 在 Facebook 产品页面上显示状态 HTML 的最简单方法是什么

> ID：10379284
> 
> 赞同：0
> 
> 时间：2012-04-30T06:15:05.970
> 
> 标签：facebook

单击 Facebook 产品页面顶部的按钮之一时，我想显示一些静态 html。

完成此任务的最简单方法是什么？我真的需要 SSL 证书来执行此操作吗？

我有一个可以获取 html 的 Web 服务器，但如果这需要 SSL，我可能会想只添加静态 html 而不是从该网站引导页面。

任何初学者指南都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:37:29.373

如果您需要在自己的服务器上运行应用程序，
在 Facebook（画布/时间线选项卡）内，您将需要签名 SSL，
但如果您在域上运行应用程序，则不需要 SSL。

此外，您可以使用 Facebook 提供的免费 Heroku 帐户。
这样您就不需要拥有服务器或 ssl 证书，并且您的应用程序可以在云上运行。

您可以在 Developer App/Basic Info/Hosting URL 中找到 Heroku 选项。

[https://developers.facebook.com/blog/post/558/](https://developers.facebook.com/blog/post/558/)

# iphone - 如何将单例类中的 Web 服务用于不同的 url

> ID：10379291
> 
> 赞同：0
> 
> 时间：2012-04-30T06:15:52.947
> 
> 标签：iphone, ios5

我正在开发一个应用程序，我必须在其中调用许多 Web 服务。那么，我们是否可以将所有 Web 服务放在一个单例类方法中。并且访问每个类中的那些方法是可能的。请帮助我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:52:56.803

您可以使用带有参数“queryType”的方法。将所有 Web 服务放在该方法中，并检查以调用“queryType”上的服务。检查可以是“if”或“switch”。为此，您需要解决逻辑问题。希望这可以帮助。

# mysql - 运算符 Like、字段类型时间戳和西里尔文？MySQL错误？

> ID：10379299
> 
> 赞同：4
> 
> 时间：2012-04-30T06:16:39.080
> 
> 标签：mysql, character-encoding, internationalization, pdo

好像是 MySQL 错误；要求：

```
 SELECT  *
        FROM table
        WHERE (
        id LIKE          '%тест 199%' 
        OR `user` LIKE     '%тест 199%' 
        OR `user_datetime` LIKE '%тест 199%' 
        OR `user_comments` LIKE '%тест 199%' )
        ORDER BY id desc
        LIMIT 0, 10 
```

**[Err] 1271 - 操作“like”的排序规则的非法混合**

当我们使用拉丁语时。要求：

```
 SELECT  *
        FROM table
        WHERE (
        id LIKE          '%test 199%' 
        OR `user` LIKE     '%test 199%' 
        OR `user_datetime` LIKE '%test 199%' 
        OR `user_comments` LIKE '%test 199%' )
        ORDER BY id desc
        LIMIT 0, 10 
```

**请求成功；**

如何处理？

我所有的请求都是自动生成的，我不能改变逻辑因为函数生成器有很多依赖。

**设置：**

```
SET NAMES utf8
Character set utf8 -- UTF-8 Unicode
Collation utf8_general_ci 
```

**@eggyal 的**UPD****

 **```
Request: 
SHOW CREATE TABLE `comments`
Response:
CREATE TABLE `comments` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user` varchar(255) NOT NULL DEFAULT '',
  `user_datetime` timestamp NULL DEFAULT NULL,
  `user_comments` varchar(128) DEFAULT NULL,
  UNIQUE KEY `id` (`id`) USING BTREE,
  KEY `user_comments` (`user_comments`),
) ENGINE=InnoDB AUTO_INCREMENT=128456 DEFAULT CHARSET=utf8 
```

MySQL 版本 5.5.10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:02:25.257

您使用的是什么版本的 MySQL？如[手册](http://dev.mysql.com/doc/refman/5.5/en/type-conversion.html)所述：

> 从 MySQL 5.5.3 开始，将数值或时间值隐式转换为字符串会产生一个值，该值具有由[`character_set_connection`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_character_set_connection)和[`collation_connection`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_collation_connection)系统变量确定的字符集和排序规则。（这些变量通常用 设置[`SET NAMES`](http://dev.mysql.com/doc/refman/5.5/en/set-statement.html)。有关连接字符集的信息，请参阅[第 10.1.4 节，“连接字符集和排序规则”</a>。）](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)
> 
> [](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)
> 
> [此更改意味着此类转换会生成字符（非二进制）字符串（a](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)[`CHAR`](http://dev.mysql.com/doc/refman/5.5/en/char.html)、[`VARCHAR`](http://dev.mysql.com/doc/refman/5.5/en/char.html)或[`LONGTEXT`](http://dev.mysql.com/doc/refman/5.5/en/blob.html)值），除非连接字符集设置为`binary`。在这种情况下，转换结果是二进制字符串（a [`BINARY`](http://dev.mysql.com/doc/refman/5.5/en/binary-varbinary.html)、、[`VARBINARY`](http://dev.mysql.com/doc/refman/5.5/en/binary-varbinary.html)或[`LONGBLOB`](http://dev.mysql.com/doc/refman/5.5/en/blob.html)值）。
> 
> 在 MySQL 5.5.3 之前，无论连接字符集如何，隐式转换总是产生二进制字符串。当字符串值更常见时，这种对字符串的隐式转换通常发生在传递数值或时间值的函数中，因此可能会产生超出转换值类型的影响。

因此，如果您使用早于 5.5.3 的 MySQL 版本，则`TIMESTAMP`在使用运算符时将列隐式转换为字符串`LIKE`将*始终*导致字符集的字符串（奇怪的是，sqlfiddle 也是这种情况，声称是5.5.20）；由于此类字符串无法与字符集中的字符串进行比较，因此您必须将列显式转换为 UTF-8 字符串：`binary``SET NAMES``utf8``user_datetime`

```
SELECT   *
FROM     `comments`
WHERE (
         `id`                                LIKE '%тест 199%' 
     OR  `user`                              LIKE '%тест 199%' 
     OR  CONVERT(`user_datetime` USING utf8) LIKE '%тест 199%' 
     OR  `user_comments`                     LIKE '%тест 199%'
)
ORDER BY `id` DESC
LIMIT    0, 10 
```**

# iphone - iPhone中的缩放和TapGesture

> ID：10379306
> 
> 赞同：0
> 
> 时间：2012-04-30T06:17:00.717
> 
> 标签：iphone, objective-c

如何在不使用 scrollView 的情况下在 UIImageView 中添加缩放（使用捏合手势）和触摸（使用 tapGesture）？是否可以？我使用了 UIImageView 和 UIScrollView。这是我放在 viewDidLoad 上的代码。

```
 [scrollView addSubview:imgView];
    scrollView.minimumZoomScale = 1.0;
    scrollView.maximumZoomScale = 12.0;
    scrollView.delegate = self;

    [scrollView setZoomScale:scrollView.userInteractionEnabled];
    [[self view] addSubview:imgView];

    [scrollView bringSubviewToFront:self.view];

//gesture recognizer
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleGesture:)];
    [imgView addGestureRecognizer:tap]; 
```

如果我尝试使用此代码。Tap 可以正常工作，但缩放不起作用，因为 Imageview 隐藏了滚动视图。有什么想法，如何在 UIImageview 上添加缩放和触摸功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:40:12.237

可以在 uiimage 视图上添加缩放和点击手势，只需查看我在网上找到的[这段代码](https://github.com/AalokParikh/pinch-and-uiguesture)，这将帮助您满足您的需求。享受编码 ;)

# lwuit - Lwuit 触摸屏上的不同行为（显示箭头键）

> ID：10379307
> 
> 赞同：1
> 
> 时间：2012-04-30T06:17:01.950
> 
> 标签：lwuit, lwuit-button

我的 lwuit 应用程序在我的 qwerty 手机上运行良好。

但是，当我将它传输到触摸屏手机时，应用程序会出现一个丑陋的黑色键盘。键盘由 4 个方向键和 4 个键 {A,B,C,D} 组成。这个键盘几乎占据了屏幕的 40%。

我添加了拖动事件，以便用户可以使用触控笔浏览应用程序。

1）如何禁用箭头键出现？

我尝试将 VKB 设置为 null，但这不起作用。

2) 我的应用程序有一些绘画问题。我使用了 button.flatten 属性，它在我的 qwerty 手机上运行良好。但是在触摸屏上，它有时会起作用，有时则不起作用。

我该如何解决这些问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:03:06.907

要禁用箭头键出现，如果您有诺基亚手机，您必须在您的 jad 文件中添加一个属性，Nokia-MIDlet-On-Screen-Keypad。看看这个网站： http: [//www.developer.nokia.com/Community/Wiki/Using_on-screen_keypad_in_MIDlets_in_S60_5th_Edition_devices](http://www.developer.nokia.com/Community/Wiki/Using_on-screen_keypad_in_MIDlets_in_S60_5th_Edition_devices)
抱歉，我不明白第二期发生了什么。

# javascript - JavaScript 中的 OnMouseOver 效果

> ID：10379313
> 
> 赞同：0
> 
> 时间：2012-04-30T06:17:29.293
> 
> 标签：javascript

我正在尝试在我的 HTML 文件中加入 JavaScript 的 Cool OnMouseOver 效果。我有一张带地图的照片。我在该地图中有大约 7 个不同的区域。我想为每个区域添加一个 OnMouseOver 效果，以便它们可以平滑地放大。有人知道我怎么能做到这一点？非常感谢！！

-迭戈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:22:40.950

我能想到的就是将该地图拆分为 7 张图像，当单击其中一张图像时，您可以对其进行缩放 - 诸如 jQuery 之类的库可以帮助解决此问题。

[您可以在此处](http://forum.jquery.com/topic/animate-the-size-of-an-image)找到有关使用 jQuery 设置动画图像大小的说明。

# java - Keep-alive 如何与 ThreadPoolExecutor 一起工作？

> ID：10379314
> 
> 赞同：62
> 
> 时间：2012-04-30T06:17:42.873
> 
> 标签：java, multithreading, keep-alive

继续我发布的[问题](https://stackoverflow.com/q/10346187/181870 "如何实现 ExecutorService 以轮换执行任务？")，我正在尝试在我的代码库中使用[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。即使在反复尝试从 Java API 文档中理解之后，我也无法清楚地理解`keepAliveTime`要在构造函数中传递的参数背后的功能/目的。希望有人能用一些好的工作例子来解释我。

**Java文档的摘录：**

```
public ThreadPoolExecutor(int corePoolSize,
                          int maximumPoolSize,
                          long keepAliveTime,
                          TimeUnit unit,
                          BlockingQueue<Runnable> workQueue) 
```

***`keepAliveTime`***-*当线程数大于核心时，这是多余的空闲线程在终止前等待新任务的最长时间。*

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-04-30T06:22:12.267

假设您的核心大小为 5，最大大小为 15。由于某种原因，您的池变得繁忙，并使用了所有 15 个可用线程。最终你没有工作要做 - 所以你的一些线程在完成他们的最终任务时变得空闲。因此，允许其中 10 个线程死亡。

但是，为了避免它们被过快杀死，您可以指定保持活动时间。因此，如果您将 1 指定为值`keepAliveTime`和值，则每个线程将在完成执行任务后等待一分钟，以查看是否还有更多工作要做。如果仍然没有给它更多的工作，它会让自己完成，直到池中只有 5 个线程 - 池的“核心”。`TimeUnit.MINUTE``unit`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T06:22:35.427

以下是来自 Javadoc 的更多描述：

```
<dt>Keep-alive times</dt>
 *
 * <dd>If the pool currently has more than corePoolSize threads,
 * excess threads will be terminated if they have been idle for more
 * than the keepAliveTime (see {@link
 * ThreadPoolExecutor#getKeepAliveTime}). This provides a means of
 * reducing resource consumption when the pool is not being actively
 * used. If the pool becomes more active later, new threads will be
 * constructed. This parameter can also be changed dynamically
 * using method {@link ThreadPoolExecutor#setKeepAliveTime}. Using
 * a value of <tt>Long.MAX_VALUE</tt> {@link TimeUnit#NANOSECONDS}
 * effectively disables idle threads from ever terminating prior
 * to shut down.
 * </dd>
 * 
```

本质上，这只允许您控制空闲池中剩余的线程数。如果您将其设置得太小（对于您正在做的事情），您将创建太多线程。如果你让它太大，你将消耗你不需要的内存/线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T14:36:22.400

这是代码示例，它演示了**keepAliveTime的工作** [ThreadPoolExecutor 的 maximumPoolSize 是如何工作的？](https://stackoverflow.com/questions/12236694/how-does-maximumpoolsize-of-threadpoolexecutor-works/38615877#38615877)

# iphone - 如何在popover中设置当前的rootview？

> ID：10379315
> 
> 赞同：0
> 
> 时间：2012-04-30T06:17:54.733
> 
> 标签：iphone, ios, ipad, uisplitviewcontroller

我有 UISplitView 控制器，在一个按钮上单击我删除了 rootView 和 detailView 并添加了一个新的 rootView 和 DetailView，但是当我在 potrait 模式下打开 iPad 并且当我单击弹出按钮时，它显示旧的 rootView 而不是显示新的 rootViewController .....任何帮助？？？

```
UINavigationController *rootNav=[[UINavigationController alloc]initWithRootViewController:attractObj]; 
UINavigationController *detailNav=[[UINavigationController alloc]initWithRootViewController:attDetailObj]; 
splitViewController.viewControllers = [NSArray arrayWithObjects:rootNav,detailNav,nil];
splitViewController.delegate=rootViewController; 
[window addSubview:splitViewController.view]; 
//[attDetailObj.view sizeToFit] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:33:25.357

我从你上面的问题中想到了什么。当你第一次设置 UIPopoverController 的 ViewController 时。然后在横向模式下更改根视图控制器后不会更改。

所以你必须用新的视图控制器来代表 UIPopover 视图控制器。因为没有那个 UIPopover 就不会刷新并且总是显示旧的视图控制器。

谢谢。

# jmeter - 重放日志以进行负载测试 - 是否有任何工具模拟请求之间的实际用户时间？

> ID：10379316
> 
> 赞同：4
> 
> 时间：2012-04-30T06:18:04.823
> 
> 标签：jmeter, load-testing, performance-testing, apachebench

我需要对具有模拟用户负载的站点进行负载测试。为此，我打算记录普通用户给定 10 分钟使用情况的 Web 服务器日志，并使用它在多个并发线程上重放以模拟实际负载。

这是我查看并拒绝的工具：

**Apache benchmark** ...可以对其进行编程以通过愚蠢的请求访问服务器...但不能模拟用户负载。

**HTTPerf** - 可以将用户日志作为输入来模拟普通用户，但只使用来自日志的请求 URL……而不是请求时间。

**Tsung** - 与 HTTPerf 相同的问题...我可以记录用户会话...但我仍然必须对用户“思考”时间进行编程...

**JMeter**可以将用户会话日志作为输入。不知道它是否可以模拟用户会话，包括“思考”时间。

总之......有一堆工具会给我“日志重播”，但他们似乎都使用日志只是为了收集请求 URL 来模拟用户会话。他们都没有真正使用时间戳来模拟真实用户及其“思考”时间。

1.  JMeter 似乎是我唯一没有尝试过的工具。JMeter 会解决这个问题吗？
2.  通过在我的服务器日志上使用 sed/awk 并创建一个 ruby​​ 脚本来解析请求 URL 和“思考”时间，然后启动并发线程，这是否更容易解决？

也欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:52:44.980

再次投票给 JMeter，它是满足您需求的好工具。但是，不管使用哪种工具，请谈谈您的方法：遗憾的是，实际上不可能仅将工具指向网络服务器日志并获得有效的负载测试作为回报。日志中存储的数据不足以为您提供这些数据（除非您的所有页面都是完全静态的）。

但这并不难，重要的是确定您希望您的站点支持的峰值吞吐量（请求/秒），并使用节奏（计时器）和用户（线程）来构建代表这一点的测试。使用 JMeter，恒定吞吐量计时器对此特别有用。

笔记。正确获得这个峰值吞吐量水平很重要，否则您最终会导致负载过高（您浪费时间解决不是问题的问题）或过低（您找不到真正的问题）但是如果您已经拥有显示站点使用情况的访问日志，那么稍微保守一点，这应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:02:50.043

JMeter 能够在您的测试计划中注入恒定和随机的细节，请查看[4.4 Timers](http://jmeter.apache.org/usermanual/test_plan.html#timers)，尤其是[18.6 Timers](http://jmeter.apache.org/usermanual/component_reference.html#timers)：

> *   恒定定时器
>     
>     
> *   高斯随机定时器
>     
>     
> *   统一随机定时器
>     
>     
> *   恒定吞吐量定时器
>     
>     
> *   同步定时器
>     
>     
> *   豆壳定时器
>     
>     
> *   BSF 定时器
>     
>     
> *   JSR223 定时器
>     
>     
> *   泊松随机定时器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T01:30:12.803

有一个类似的问题 - 需要一个工具来重播生产服务器的日志，保持所有间隙不变。另外，想操纵一些http标头。

作为系统管理员，首先使用 ab 在 bash 上编写脚本。速度上不是很好。

如果 Jmeter 易于使用，它就很棒。

因此，最终编写了自己的工具来通过重播日志来进行负载测试。它是用红宝石写的。考虑到任何重播日志的工具大部分时间都花在网络 io 等待上，而不是在 cpu 上，ruby GIL 应该不是问题。它是多线程的，按原样重播日志，尊重日志条目之间的间隙，如果你有的话:)

如果您正在运行 varnish，您还可以使用 varnishncsa 实时回放。可以上github：[https ://github.com/maxchk/grad](https://github.com/maxchk/grad)

希望这可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-22T09:00:20.367

我通过使用芹菜解决了这个问题。Celery 本质上会产生异步工作者，这正是你所需要的。任务还可以采用“倒计时”参数，以便您可以安排请求。

任务相当简单：

```
import requests

from celery.task import task

@task(max_retries=0, ignore_result=True)
def get_url(url, user_agent):
    headers = {"User-Agent": user_agent}
    try:
        r = requests.get(url, headers=headers)
    except requests.ConnectionError:
        print "Couldn't fetch %s" % url 
```

我使用 Django 的管理命令系统来解析日志，因为我不想费心学习如何在普通的 Python 环境中与 Celery 对话。您的日志格式可能不同，因此请根据需要进行调整。部分内容`management/commands/my_command.py`（超出质量-我很着急）：

```
import sys
import csv

import dateutil

from django.core.management.base import BaseCommand, CommandError
from django.utils import timezone

class Command(BaseCommand):

    def handle(self, *args, **options):
        now = timezone.now()
        URL_PREFIX = "http://my.site.com"
        pth = sys.argv[-1]
        fp = open(pth, "r")
        fieldnames=[
            "ip",
            "dc1",
            "cache_result",
            "datetime_a",
            "datetime_b",
            "request_time",
            "upstream_time",
            "dc2",
            "path_raw",
            "status_code",
            "size_bytes",
            "header_url",
            "user_agent"
        ]
        reader = csv.DictReader(fp, fieldnames=fieldnames, delimiter=" ", quotechar='"')
        reader = list(reader)[-1000:]
        fp.close()
        processed = []
        first_diff = None
        for row in reader:
            method, url, b = row["path_raw"].split()
            if method.lower() not in ("get", "head"):
                continue              
            sent_raw = "%s %s:%s:%s" % tuple(row["datetime_a"].lstrip("[").split(":"))\
                + " " + row["datetime_b"].rstrip("]")
            sent = dateutil.parser.parse(sent_raw)
            if first_diff is None:
                first_diff = (now - sent).seconds + 1
            get_url.apply_async(
                (URL_PREFIX + url, row["user_agent"]),
                countdown=first_diff - (now - sent).seconds
            ) 
```

开始芹菜`manage.py celery worker -B --loglevel=info`。

使用 运行管理命令`manage.py my_command /path/to/file.log`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-12T13:15:52.657

聚会迟到了，但[这个例子](https://www.blazemeter.com/blog/stop-making-assumptions-learn-how-replay-your-production-traffic-jmeter)似乎准确地描述了你正在寻找的东西，只使用 Jmeter。

[https://www.blazemeter.com/blog/stop-making-assumptions-learn-how-replay-your-production-traffic-jmeter](https://www.blazemeter.com/blog/stop-making-assumptions-learn-how-replay-your-production-traffic-jmeter)

（诀窍是使用 BeanShell 计时器来获得与日志中相同的确切请求间隔）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-07T00:08:47.180

也许戈尔？

> Gor 是一个开源工具，用于捕获实时 HTTP 流量并将其重播到测试环境中，以便使用真实数据持续测试您的系统。它可用于增加对代码部署、配置更改和基础架构更改的信心。 [https://goreplay.org](https://goreplay.org)

否则，关于轰炸机的答案`grad`似乎也很棒。

# mysql - 从备份恢复数据时，自动增量主字段会发生什么

> ID：10379317
> 
> 赞同：5
> 
> 时间：2012-04-30T06:18:09.163
> 
> 标签：mysql

我的 MySQL 表是这样的：

```
userid(AI,PRIMARY)    name    password
1                     aa       dfsdfsdfds
2                     ioi      kjkjkjkjk
(3) user deleted his account
4                     ghghj    jhjhkhj 
```

还有一张有信息的桌子

```
userid( will be userid from above table)    address    phone
1                                            sfdsfds   9999999
2                                            dfsdfdsf   333333
3 (deleted)
4                                            sdfdsf     999999 
```

当我将备份和恢复数据时，我的表 1 的表数据会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:25:00.190

当您导出数据（即使用`mysqldump`）时，所有键（及其值）都将按原样导出。备份基本上是这样的：

```
CREATE TABLE yourtable (
    userid INT(10) unsigned NOT NULL auto_increment,
    name VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL,
    PRIMARY KEY (userid)
) AUTO_INCREMENT=5;
INSERT INTO TABLE yourtable ( userid, name, password )
VALUES 
(1, 'aa', 'dfsdfsdfds'),
(2, 'ioi', 'kjkjkjkjk'),
(4, 'ghghj', 'jhjhkhj') 
```

正如您在示例中看到的：

*   您的密钥正在完全备份和恢复
*   MySQL 会记住最后一个自增值并在下一个时返回该值`INSERT`。（下一个用户将获得 id `5`）

# android - Android 使用不同帐户（Gmail、Twitter 等）登录

> ID：10379320
> 
> 赞同：3
> 
> 时间：2012-04-30T06:18:28.193
> 
> 标签：android

我开发了一个带有用户名和密码的登录屏幕的应用程序。现在我想让用户使用他们的 Gmail、Facebook、Twitter 和 Linked In 帐户登录。有没有人有任何想法或链接可以为我提供上述第三方 API 的登录描述？

![在此处输入图像描述](../Images/34ddeb5ad564a0b9c08bca967de85d27.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:29:40.803

您可以只使用 Spring Social。这已经设置了所有这些帐户登录和 api，您只需要来自每个服务的开发人员帐户的密钥。也有关于如何使用它的示例和文档。唯一的缺点是它会使应用程序有点重（大约 2 mb），但如果您打算使用 API，那就没问题了。

[春季社交](http://www.springsource.org/spring-social)

这里也是 GitHub 示例项目的链接。 [SpringAndroidDemo](https://github.com/SpringSource/spring-android-samples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:35:31.430

一般来说，不同服务的认证过程是这样的：

*   您向`AUTH_TOKEN`服务请求一个。

*   您将其发送`AUTH_TOKEN`到您的服务器，然后使用您可能从服务中获得的所有信息（姓名、电子邮件、位置等）创建一个新用户，或者如果现有用户已存在于数据库中，则将其与现有用户合并。

*   当用户将来登录时，您将知道他是否`AUTH_KEY`对应于数据库中的用户。

现在对于 API，对于 Twitter，您可以使用[Twitter4j](http://twitter4j.org/en/index.html)，对于 Facebook，您可以使用他们的[官方 SDK](https://github.com/facebook/facebook-android-sdk/)，这些 SDK 确实针对移动体验进行了优化。其余的，我不知道有任何 Android SDK，所以你可以使用[Spring Social](http://www.springsource.org/spring-social)作为@Darko 提到的或直接使用他们的[REST API](https://developer.linkedin.com/documents/authentication)。

# solr - 在 Solr 数据库中更新文档的最简单方法

> ID：10379321
> 
> 赞同：0
> 
> 时间：2012-04-30T06:18:33.637
> 
> 标签：solr

Solr[插入文档](http://wiki.apache.org/solr/UpdateXmlMessages)所需的 XML 格式不同于用于[检索文档](http://wiki.apache.org/solr/XMLResponseFormat)的 XML 格式。更新一个字段值的简单用例需要重写整个文档。

唯一的区别是数据类型反映在查询格式中，例如，`<int name="foo">5</int>`但提交格式`<field>`对所有内容都使用标签。

是否有一些选项可以避免更改所有这些标签的繁琐工作，同时仍然使用 HTTP + XML？

换句话说，我希望 Solr 接受`<int>`HTTP POST 正文中的`<field>`标签或返回 GET 正文中的标签。（从响应中省略标头也很好。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:10:05.500

我想您主要关心的是模拟就地更新。

XSLT 是否强大到足以将 Solr 的 XML 响应转换为与 Solr 的更新格式更兼容的 XML 格式？有[XSLT 响应](http://wiki.apache.org/solr/XsltResponseWriter)编写器将 Solr 的响应重写为其他格式。抱歉，我对 XSLT 还不够熟悉。

* * *

**Kludgy 方法 2** JSON 更新程序和响应写入程序（对于 CSV、AFAIK 相同）使用彼此一致的语法。您愿意使用中间格式的 JSON/CSV 吗？

* * *

关于 Solr 的**响应编写器**（XML、XSLT、JSON、CSV 等）： http: [//lucidworks.lucidimagination.com/display/solr/Response+Writers](http://lucidworks.lucidimagination.com/display/solr/Response+Writers)

关于更新 JSON： [http ://wiki.apache.org/solr/UpdateJSON](http://wiki.apache.org/solr/UpdateJSON)

关于更新 CSV： [http ://wiki.apache.org/solr/UpdateCSV](http://wiki.apache.org/solr/UpdateCSV)

# html - 输入类型在 div 元素后面提交

> ID：10379329
> 
> 赞同：0
> 
> 时间：2012-04-30T06:19:53.333
> 
> 标签：html, input, form-submit

我曾经使用过输入类型提交，但现在我想将其更改为按钮样式。为此，我使用了以下代码：

```
<div class="cartbutton">
     <input type="submit" name="shortname" value="product1" class="add_to_cart" />
     <div class="buttoninner">
          <div class="buttontext">Add to Cart</div><div class="cartimage"></div>
     </div>
</div> 
```

我`buttoninner`使用下面的 CSS 将 div 元素定位在 input-type 提交之上：

```
.cartbutton {
    position: relative;
    width: 178px;
}

.add_to_cart {
    background: none repeat scroll 0 0 transparent;
    border: 0 none;
    cursor: pointer;
    height: 38px;
    opacity: 0;
    width: 177px;
    z-index: 2;
}

.buttontext {
    background-color: #333333;
    border: 0 none;
    color: white;
    cursor: pointer;
    float: left;
    font-family: "Segoe UI",helvetica,arial,sans-serif;
    font-size: 20px;
    padding: 5px 20px;
}
.cartimage {
    background-color: #F7941D;
    background-image: url("/Content/en-US/Sales/Images/small_cart.png");
    background-position: 5px 50%;
    background-repeat: no-repeat;
    float: left;
    height: 38px;
    width: 40px;
}
.buttoninner {
    position: absolute;
    top: 0;
    z-index: 1;
} 
```

不幸的是，按钮帖子不起作用。如何激活 div 元素后面的提交按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:28:06.213

```
 why are you using div you can use 
 <input type="image" src="image path">
  it also works like submit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:35:04.153

```
<div class="cartbutton" >
 <input type="submit" name="shortname" value="product1" class="add_to_cart" />
 <div class="buttoninner">
 <div class="buttontext">Add to Cart</div><div class="cartimage"></div>
 </div>
 </div>

 <script type="text/javascript">
 $('.cartbutton').click(function(){
 $('#formid').submit();
  });
  </script>
 use jquery 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:28:10.673

您可以在 php echo 中的任何位置创建按钮或打印它。Css 类可以根据需要进行修改。

```
print "<div class='links' id='edit-submit'><input type='button' class='form-submit' value='Signup to Invitation' onClick=\"location.href='?q=rsvp/".$rsvp->rid."/register';\" \></div>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:26:37.727

原因似乎是因为您的按钮实际上没有被点击，因为您在它上面覆盖了 div。您可以做的只是给您的 div 一个 onclick 事件并通过它处理提交操作。在这种情况下，您不需要单独的提交按钮

# php - 使用服务器路径而不是 URL 访问文件

> ID：10379330
> 
> 赞同：0
> 
> 时间：2012-04-30T06:20:08.970
> 
> 标签：php, codeigniter

我有 2 个问题。

1.  我目前正在运行 XAMP，我想禁止人们打开 /htdocs/db/resource/data 中的 .xml 文件。我相信这是一个 .htaccess 解决方案。

2.  我还想从我的 PHP 中获取那些 .xml 文件。由于我不能使用 URL 文件路径，我尝试只使用 'resource/data/filename.xml' 但它似乎不起作用。我想我在这里遗漏了一些东西。

3.  只是添加这个因素。我正在使用 CI，它安装在我的 XAMPP 中的 htdocs/db/ 中。我可以通过 url 访问 .xml，但我想通过服务器中的文件路径访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:23:25.997

在主文件即 index.php 中为根目录定义一个常量

像这样

```
if(!defined('SITEPATH')){
   define('SITEPATH',dirname(__FILE__).'/');
} 
```

现在您可以像使用 r 一样使用 url 来获取任何文件。

请享用

**编辑：**

```
<?php
$xmls = array(
                'customxml_name1' => 'RelativePath1',
                'customxml_name2' => 'RelativePath2',
            );

if(isset($_GET['data'])&&!empty($_GET['data'])){
    echo file_get_contents(dirname(__FILE__).'/'.$xmls[$_GET['data']]);
}
?> 
```

将此脚本放在您的根文件夹中。使用自定义名称将路径添加到 xml，然后使用`get parameter`=>`data`作为`customxml_name`xml 调用脚本 url。

享受 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:25:55.683

1.  是的，Apache 配置将支持这一点

    ```
    # /htdocs/db/resource/data/.htaccess

    <FilesMatch "\.xml$">
        Order allow,deny
        Deny from all
    </FilesMatch> 
    ```

2.  应该工作，例如

    ```
    // /htdocs/db/some-file.php

    $xml = simplexml_load_file(__DIR__ . '/resource/data/filename.xml'); 
    ```

# iphone - 在光标所在位置插入字符串

> ID：10379333
> 
> 赞同：0
> 
> 时间：2012-04-30T06:20:29.130
> 
> 标签：iphone, ios, ios4

我想在光标当前所在的位置插入文本，所以我有以下代码

```
 NSString *contentsToAdd = [myData objectAtIndex:row];
    NSMutableString *tfContent = [[NSMutableString alloc] initWithString:[self.myTextView text]];
    // add content where the cursor was 
   [tfContent insertString:contentsToAdd atIndex:myCursorPosition.location];
  [self.myTextView setText:tfContent];
   [tfContent release]; 
```

这工作如下

```
 Hi
    HiFriend 
```

我想在附加文本之前和之后留一个空格（嗨，朋友）。

那我应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:36:32.007

尝试类似：

```
NSString *contentsToAdd = [myData objectAtIndex:row];
NSMutableString *tfContent = [[NSMutableString alloc] initWithString:[self.myTextView text]];
// add content where the cursor was 
NSString *contentsToAddPadded = [NSString stringWithFormat:@" %@ ", contentsToAdd];
[tfContent insertString:contentsToAddPadded atIndex:myCursorPosition.location];
[self.myTextView setText:tfContent];
[tfContent release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:16:58.383

尝试这样的事情：

```
NSString *beginning = [self.myTextView.text substringToIndex:currentRange.location];
NSString *ending = [self.myTextView.text substringFromIndex:currentRange.location];
self.myTextView.text = [NSString stringWithFormat:@"%@% @% @",beginning, contentsToAdd, ending, nil]; 
```

# php - CakePHP ACL 教程 initDB 函数警告

> ID：10379335
> 
> 赞同：2
> 
> 时间：2012-04-30T06:20:35.023
> 
> 标签：php, cakephp

我正在关注[http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/part-two.html)教程，我得到了一些稍微不同的组（第 4 组和第 5 组) 4 是访客，5 是管理员

```
 function initDB() {
 10         $group = $this->User->Group;
 11         //Allow admins to everything
 12         $group->id = 5;      
 13         $this->Acl->allow($group, 'controllers');
 14        //^doesnt work
 15        //$this->Acl->allow(array( 'model' => 'Group', 'foreign_key' => 5), 'controllers');
 16        
 17        
 18         $group->id = 4;
 19         $this->Acl->deny($group, 'controllers');
 20         $this->Acl->allow($group, 'controllers/User/login');
 21         $this->Acl->allow($group, 'controllers/User/logout');
 22        /*
 23        $this->Acl->deny(array( 'model' => 'Group', 'foreign_key' => 4), 'controllers');
 24        $this->Acl->allow(array( 'model' => 'Group', 'foreign_key' => 4), 'controllers/User/login');
 25        $this->Acl->allow(array( 'model' => 'Group', 'foreign_key' => 4), 'controllers/User/logout');
 26 */      
 27         
 28         
 29         echo "all done";
 30         exit();
 31     } 
```

但是当我运行此功能时，出现以下错误

```
Warning (512): DbAcl::allow() - Invalid node [CORE/Cake/Controller/Component/AclComponent.php, line 387]
Warning (512): DbAcl::allow() - Invalid node [CORE/Cake/Controller/Component/AclComponent.php, line 387]all done 
```

是什么赋予了？！

编辑 - 我的 App Controller 看起来像这样

```
<?php

class AppController extends Controller {
    public $components = array(
            'Acl',
            'Auth' => array(
                'authorize' => array(
                    'Actions' => array('actionPath' => 'controllers')
                    )   
                ),  
            'Session'
            );  
    public $helpers = array('Html', 'Form', 'Session');

    public function beforeFilter() {
        $this->Auth->actionPath = 'controllers/';
        //Configure AuthComponent
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
        $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
        $this->Auth->loginRedirect = array('controller' => 'images', 'action' => 'index');
        $this->Auth->allow('display');
    }   
}

?> 
```

编辑 2：完整警告看起来像这样

```
Warning (512): DbAcl::allow() - Invalid node [CORE/Cake/Controller/Component/AclComponent.php, line 387]
Code Context
DbAcl::allow() - CORE/Cake/Controller/Component/AclComponent.php, line 387
AclComponent::allow() - CORE/Cake/Controller/Component/AclComponent.php, line 128
UsersController::initDB() - APP/Controller/UsersController.php, line 20
ReflectionMethod::invokeArgs() - [internal], line ??
Controller::invokeAction() - CORE/Cake/Controller/Controller.php, line 473
Dispatcher::_invoke() - CORE/Cake/Routing/Dispatcher.php, line 107
Dispatcher::dispatch() - CORE/Cake/Routing/Dispatcher.php, line 89
[main] - APP/webroot/index.php, line 96 
```

如果您希望我发布任何其他代码，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T10:13:08.320

根据警告，并且您调用了 3 次`$this->Acl->allow()`，`$this->Acl->deny()`但似乎只收到 2 个警告，我假设发出警告的行如下：

```
$this->Acl->allow($group, 'controllers/User/login');
$this->Acl->allow($group, 'controllers/User/logout'); 
```

I don't use AclExtras to synchronize the acos table with the existing actions, but AFAIK when checking the permissions the AclComponent requires the controller aliases in the acos table to be pluralized. So I assume that your acos table doesn't contain any record with alias `User` but a record with alias `Users`.

This would explain why you don't have any node in your acos table that can be identified by `'controllers/User/login'` nor by `'controllers/User/logout'`.

If my assumptions are correct, the following code would work:

```
$this->Acl->allow($group, 'controllers/Users/login');
$this->Acl->allow($group, 'controllers/Users/logout'); 
```

# forms - PDF Javascript计算日期之间的天数

> ID：10379337
> 
> 赞同：2
> 
> 时间：2012-04-30T06:20:45.510
> 
> 标签：forms, pdf

我发现了很多 JavaScript 脚本来计算两个日期之间的天数......这是我的并发症......

1 - 我需要删除周末

2 - 我需要在 PDF 表单的单元格内设置值

此 Javascript 在 PDF 表单中运行

所以这里是如何工作的：

单元#1 = 第一天

单元格 #2 = 最后一天

单元格#3 = TOTALDAYS

我需要计算两天之间的天数差异并删除周末......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:01:52.043

不确定从 PDF 表单字段的获取值/设置值，但此函数应计算两个日期之间的工作日数：

 `````
var startDate = new Date('04/30/2012');
var endDate = new Date('05/31/2012');
var weekDaysElapsed = getWeekDaysElapsed (startDate, endDate);

function getWeekDaysElapsed (startDate, endDate) {
    var oneDayInMillis = 1000 * 60 * 60 * 24;
    var elapsedDays = 0;
    if (startDate < endDate) {
        var day = startDate.getDay();
        if (day != 6 && day != 0) {   //6=Sat, 0=Sun
            elapsedDays = 1;
        }
        startDate = new Date(startDate.getTime() + oneDayInMillis);
        return elapsedDays + getWeekDaysElapsed (startDate, endDate);
    }
    return elapsedDays;
} 
`````

# xml - XML 验证致命错误 - 文档中根元素之后的标记必须格式正确

> ID：10379344
> 
> 赞同：0
> 
> 时间：2012-04-30T06:21:37.460
> 
> 标签：xml, dtd, xml-validation

当我尝试验证以下 XML 代码时，出现错误（致命错误 - 根元素之后的文档中的标记必须格式正确）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE manufacturer[
    <!ELEMENT manufacturer (companyName, address, phone, contactPerson?, products)>
    <!ATTLIST manufacturer identifier CDATA #REQUIRED>
    <!ELEMENT companyName (#PCDATA)>
    <!ELEMENT address (#PCDATA)>
    <!ELEMENT phone (#PCDATA)>
    <!ELEMENT contactPerson (#PCDATA)>
    <!ELEMENT products (product+)>
    <!ELEMENT product (model, price, description, category)>
    <!ATTLIST product code CDATA #REQUIRED>
    <!ELEMENT model (#PCDATA)>
    <!ELEMENT price (#PCDATA)>
    <!ELEMENT description (#PCDATA)>
    <!ELEMENT category (#PCDATA)>
]>

<manufacturer identifier = "m1">
    <companyName>Kitchen Manufacturers International</companyName>
    <address>1256 Factory Lane, Cleveland, OH 44111</address>
    <phone>216-333-4444</phone>
    <contactPerson>Fred Smith</contactPerson>
    <products>
        <product code = "X345">
            <model>Sun Beam Mixer</model>
            <price>14.75</price>
            <description>Popular handheld mixer</description>
            <category>household</category>
        </product>
        <product code = "MW30">
            <model>GE30 Microwave</model>
            <price>99.95</price>
            <description>A popular model</description>
            <category>household</category>
        </product>
    </products>
</manufacturer>

<manufacturer identifier = "m3">
    <companyName>Kraft Foods Incorporated</companyName>
    <address>1515 Kraft Avenue, Chicago, IL 37897</address>
    <phone>222-333-4444</phone>
    <products>
        <product code = "345DR">
            <model>Jiffy Peanut Butter</model>
            <price>4.95</price>
            <description>America’s favorite, made from real peanuts</description>
            <category>groceries</category>
        </product>
        <product code = "321SD">
            <model>Mac N' Cheese</model>
            <price>1.99</price>
            <description>Every child’s favorite dinner</description>
            <category>groceries</category>
        </product>
        <product code = "123DD">
            <model>Rice Krispies</model>
            <price>2.99</price>
            <description>Snap Crackle and Pop</description>
            <category>groceries</category>
        </product>
    </products>
</manufacturer> 
```

代码错误发生在这里，我很困惑为什么会出现这个错误，以及为什么其他类似的行没有错误：

```
<manufacturer identifier = "m3"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:24:33.233

XML 只允许一个根元素，您有两个 ( `manufacturer`)。

# php - phpStorm远程调试在远程调试期间选择发送错误的IP地址

> ID：10379353
> 
> 赞同：1
> 
> 时间：2012-04-30T06:22:32.657
> 
> 标签：php, remote-debugging, phpstorm

有谁知道如何设置 phpstorm 发送的用于远程调试的接口 ip？我正在调试一个远程站点，它不断发送错误的接口（我有几个）

当我开始调试时，它会启动浏览器：

[http://192.168.0.251/?start_debug=1&send_sess_end=1&debug_start_session=1&debug_session_id=19689&debug_port=10137&debug_host=169.254.98.211%2C127.0.0.1&debug_stop=1](http://192.168.0.251/?start_debug=1&send_sess_end=1&debug_start_session=1&debug_session_id=19689&debug_port=10137&debug_host=169.254.98.211%2C127.0.0.1&debug_stop=1)

IP 地址 169.254.98.211 应该是 192.168.0.135 如果我手动更改它，它可以工作！

所以我在哪里设置这个？

汗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:40:59.943

使用**PHP Web Application** Debug 配置时，`debug_host`用户无法定义的值，它是硬编码的：

```
 public static String getDebugHost() {
    try {
      final InetAddress localHost = Inet4Address.getLocalHost();
      return localHost.getHostAddress() + ",127.0.0.1";
    }
    catch (UnknownHostException e) {
      return "127.0.0.1";
    }
  } 
```

一种解决方法是使用[**零配置调试**](http://blog.jetbrains.com/webide/2011/02/zero-configuration-debugging-with-xdebug-and-phpstorm-2-0/)，您可以在其中定义小[书签生成器](http://www.jetbrains.com/phpstorm/marklets/)中的主机 IP 地址。不要被 xdebug 弄糊涂了，Zend Debugger 几乎是一样的。

# java - 二十一点程序返回卡为空？

> ID：10379355
> 
> 赞同：1
> 
> 时间：2012-04-30T06:22:40.567
> 
> 标签：java

主类：

公共课二十一点{

```
static Deck D;
static Hand P;
public static void main(String[] args) {
    init();
}

private static void init() {
    D=new Deck();
    P=new Hand(D);
    startGame();
}

private static void startGame() {
    System.out.print("Your cards are: "+P.H.get(0)+", "+P.H.get(1));
} 
```

}

手类：

```
import java.util.ArrayList;
import java.util.Random;

public class Hand {
ArrayList<String> H;
Random R;
public Hand(Deck D){
    R=new Random();
    H=new ArrayList<String>();
    int C=R.nextInt(D.getP().length);
    H.add(D.getP()[C]);
    D.removeFromDeck(C);
    int E=R.nextInt(D.getP().length);
    H.add(D.getP()[E]);
    D.removeFromDeck(E);
} 
```

}

甲板等级

```
public class Deck {
String[] P;
public Deck(){
    P=new String[52];
    String Suit="Default";
    int C=0;
    for(int A=1;A<=4;A++){
        switch(A){
        case 1:
            Suit="Hearts";
            break;
        case 2:
            Suit="Diamonds";
            break;
        case 3:
            Suit="Clubs";
            break;
        case 4:
            Suit="Spades";
            break;
        }
        for(int B=1;B<=13;B++){
            if(B>10){
                switch(B){
                case 11: P[C]="Joker of "+Suit; 
                break;
                case 12: P[C]="Queen of "+Suit;
                break;
                case 13: P[C]="King of "+Suit;
                break;
                }
            }else{
                P[C]=B+" of "+Suit;
            }
        }
    }
}
public void setP(String[] p) {
    P = p;
}
public String[] getP() {
    return P;
}
public void removeFromDeck(int C){
    System.arraycopy(P, C + 1, P, C,
            P.length - C - 1);
} 
```

}

当我编译并运行这段代码时，它打印出我的 2 张卡是空的，空的。我查看了代码，似乎找不到我的错误。也许你可以？TY 为您提供任何帮助。

编辑：它现在只返回黑桃，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:24:55.190

你的两个循环都有错误的条件：

```
for(int A=1;A>=4;A++)

   ...
   for(int B=1;B>=13;B++) 
```

这些都不会执行任何迭代。他们应该是：

```
for(int A=1;A<=4;A++)

   ...
   for(int B=1;B<=13;B++) 
```

此外，您没有分配足够的大小：

```
P=new String[51]; 
```

背面有 52 张牌，而不是 51 张。

编辑：正如评论中所指出的，你总是会得到黑桃发布的代码，因为你选择西装的 switch 语句没有任何中断。我原以为这会导致编译时警告。你*真的*应该注意警告。您可以像这样添加中断语句：

```
switch(A) {
    case 1:
        S = "Hearts";
        break;
    case 2:
        S = "Diamonds";
        break;
    case 3:
        S = "Clubs";
        break;
    case 4:
        S = "Spades";
        break;
} 
```

最后，我*强烈*建议您使用更有意义的变量名，最好遵循 Java 命名约定。（实际上我会对您的代码进行各种其他更改，但从这些更改开始。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:28:02.443

乍一看，问题似乎在这里：`for(int A=1;A>=4;A++){`和这里`for(int B=1;B>=13;B++){`。这些循环将永远不会执行，因为在您的第一个循环中，在第一次迭代中 A 将为 1，因此小于 4，这意味着它打破了第一个循环的条件，同样适用于第二个循环。替换`>`with`<`应该会给你一些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:10:07.127

我很困惑为什么你还没有封装这个`Card`类，因为它会使卡片的实例化更容易。此外，您始终可以将西装抽象到自己的类或枚举中。

无论如何，我可能会为你做太多的设计工作，但这里有一些事情可以让你开始：

```
public enum Suit {
    Spade,
    Heart,
    Diamond,
    Club;

    public static Suit getSuit(int suit) {
        switch (suit) {
            case 3: 
                return Suit.Spade;
            case 2:
                return Suit.Heart;
            case 1:
                return Suit.Diamond;
            case 0:
            default:
                return Suit.Club;
        }
    }
} 
```

这是一个`Card`使用这套衣服的简单类。

```
public class Card {

    private Suit suit;
    private int value;

    public Card(Suit suit, int value) {
        this.suit = suit;
        this.value = value;
    }

    public Card(int suit, int value) {
        this(Suit.getSuit(suit), value);
    }

    public int getValue() { return value; }
    public Suit getSuit() { return suit; }

} 
```

创建甲板很简单。这是一个简单的工厂，可以帮助您入门：

```
public class DeckFactory {

    public static List<Card> BuildDeck() {
        List<Card> cards = new ArrayList<Card>();

        for (int value = 1; value <= 13; ++value) {
            for (int suit = 0; suit < 4; ++suit) {
                cards.add(new Card(value, suit));
            }
        }

        return cards;
    }

} 
```

我将把它放入一个`Deck`或`Hand`类的实际实现留给你自己。在您的`Card`类中，您可以重写该`toString()`方法以返回 Card 对象的更好的字符串表示形式。

```
// in Card.java
@override
public String toString() {

   String output = "";

   switch(this.value) {
       1: 
           output += "Ace ";
           break;
       11: 
           output += "Jack ";
           break;
       12: 
           output += "Queen ";
           break;
       13: 
           output += "King ";
           break;
       default:
           output += this.value;
           break;
   }

   output += " of ";

   output += this.suit.toString();
       // returns the name of the enum

   return output;

} 
```

希望这会有所帮助。

# iphone - 将 UIButton 添加到 tableView headerView

> ID：10379357
> 
> 赞同：0
> 
> 时间：2012-04-30T06:22:41.463
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试将 UIButton 添加到 tableView，但是当我执行以下操作时：

```
UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frameWidth, 200)];

UIButton *addSource = [UIButton buttonWithType:UIButtonTypeCustom];
[addSource addTarget:self action:@selector(addBoard:) forControlEvents:UIControlEventTouchUpInside];
[addSource setImage:[UIImage imageNamed:@"addsource.png"] forState:UIControlStateNormal];
[addSource setBackgroundColor:[UIColor grayColor]];
[headerView addSubview:addSource];

self.tableView_.tableHeaderView = headerView; 
```

我在那里没有看到 UIButton。当我尝试使用 UILabel 时，它就在那里。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:24:29.357

您的 addSource 按钮没有任何框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:29:04.997

使用此代码...

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

     UIButton *headername = [[UIButton alloc]initWithFrame:CGRectMake(20, 5, 270, 34)];
     headername.backgroundColor = [UIColor greenColor];

     UIView *headerView = [[UIView alloc] init];
     UIImageView *tempimage = [[UIImageView alloc]initWithFrame:CGRectMake(10, 5, 300,34)];
     tempimage.image = [UIImage imageNamed:@"GrayButton.png"];
     [headerView addSubview:tempimage];
     [headerView addSubview:headername];
     return  headerView;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:04:14.437

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
     UIButton *name = [[UIButton alloc]initWithFrame:CGRectMake(30, 10, 120, 45)];
     name.backgroundColor = [UIColor greenColor];
     UIView *header = [[UIView alloc] init];
     UIImageView *image = [[UIImageView alloc]initWithFrame:CGRectMake(30, 10, 200,45)];
     image.image = [UIImage imageNamed:@"Button.png"];
     [header addSubview:image];
     [header addSubview:name];
     return  header;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:31:13.147

请试试这个

`UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 100, 45)];`

将其替换为

`UIButton *addSource = [UIButton buttonWithType:UIButtonTypeCustom];`

这将在标题视图中显示 0,0 点宽度 100 和高度 45 的按钮。这会帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T06:39:11.067

为您的按钮设置框架。通过您的按钮的默认框架将是 CGRectZero 意味着。宽度和高度都将为零..因此将其框架设置为在相对位置绘制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T06:39:47.040

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{        
    UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0,0, 320, 44)] autorelease]; 

    UIButton *addSource = [UIButton buttonWithType:UIButtonTypeRoundedRect];    
    addSource.frame = CGRectMake(80.0, 0, 160.0, 40.0);
    [addSource setTitle:@"rep" forState:UIControlStateNormal];
    [addSource addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchDown];        

    [headerView addSubview:addSource];
    return headerView;    
} 
```

也不要忘记实施。

```
tableView:heightForHeaderInSection: 
```

# ruby-on-rails-3 - Rails 3 命名路由 - 在控制器中动态调用不同的操作作为具有相同命名路由的参数

> ID：10379358
> 
> 赞同：0
> 
> 时间：2012-04-30T06:22:42.480
> 
> 标签：ruby-on-rails-3, routes, custom-routes

假设我有一个带索引的控制器并且没有任何其他 RESTful 操作。我想从具有如下命名路由的同一控制器调用不同的操作作为参数。

例子，

我有 TargetsController，我应该可以打电话

```
targets_path(any_action, params) 
```

我可以打电话吗

```
resources :targets do 
  get :action_name, :on => :member 
end 
```

在没有 Restful 动作的控制器上

我如何在 routes.rb 中写这个？我发现的所有文档都没有谈到如何在控制器中调用相同的路由。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:23:58.810

最终用 url_for 帮手做

# html - MS Excel 用颜色显示 HTML 表格？

> ID：10379359
> 
> 赞同：1
> 
> 时间：2012-04-30T06:22:58.680
> 
> 标签：html, excel, colors, html-table

MS Excel 有没有办法不仅可以打开我的 HTML，还可以显示颜色？我尝试过使用样式、字体和颜色标签，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:36:35.250

**如果数据实际上是一个 HTML 页面并且不是由 ASP、PHP 或其他脚本语言创建的**：

打开 Internet Explorer，只需右键单击表格并浏览菜单。您应该看到“*导出到 Microsoft Excel* ”。单击菜单项，经过几次提示后，它将被导入 Excel。

**如果数据是使用任何脚本语言制作的：**

这是使用一行代码将 HTML 表格导出到 Excel 的简单方法。要使该技术发挥作用，您必须在计算机上安装 Excel。复制以下代码并将其粘贴到记事本中。将其保存为 ASP 页面，然后在浏览器中打开它以查看实时操作。

注意：不要忘记粘贴您将通过查看要转换为 excel 的 html 文件的源获得的表格的代码

```
<% The main feature of this technique is that %>
<% you have to change Content type to ms-excel.%>
Response.ContentType = "application/vnd.ms-excel"
<TABLE>
<TR><TD>2</TD></TR>
<TR><TD>3</TD></TR>
<TR><TD>=SUM(A1:A2)</TD></TR>
</TABLE> 
```

不要包含普通的 HTML、TITLE、HEAD 和 BODY 标签。他们会制造一个问题。

***编辑：***

**如果您有 html 表，则用于复制颜色：**

只需将完整的静态表格复制到 word 中，然后从 word 中再次复制，然后右键单击所需的 excel 单元格并单击“选择性粘贴”

# wpf - 设置单个 WPF 用户控件的区域性

> ID：10379364
> 
> 赞同：4
> 
> 时间：2012-04-30T06:23:28.910
> 
> 标签：wpf, user-controls, culture

我编写了一个与“en-US”以外的文化不兼容的用户控件。此外，将这个用户控件嵌入到具有非“en-US”文化的应用程序中也是不可避免的。那么是否可以强制应用程序不更改此用户控件的文化？
最好在用户控件内部有一个解决方案。
我已阅读此线程： [Localizing a WinForms Application with Embedded WPF User Controls](https://stackoverflow.com/questions/374518/localizing-a-winforms-application-with-embedded-wpf-user-controls) 但我不能使用**WpfLocalization.LocalizationScope.SetCulture**
这个功能真的存在吗？

还有一个可以设置为**False的****Localizable**标记，但它仅用于**.csproj**文件中的资源定义：http: [//msdn.microsoft.com/en-us/library/ms788718.aspx](http://msdn.microsoft.com/en-us/library/ms788718.aspx)

 ****那么有没有人对这个问题有任何想法？

* * *

**更多说明：**
假设我们有一个具有文化 X 的应用程序和一个与文化“en-US”兼容的用户控件。此用户控件具有 DateTime 类型的依赖属性，它通过以下方式获取其值：

```
<my:uc1 x:Name="UserControl1" Date="4234/12/22" /> 
```

当应用程序文化为“en-US”时，用户控件将获得**“4234/12/22”**，但当应用程序文化为其他内容时，它会自动将**“4234/12/22”**转换为应用程序自己的日历并提供**“0744/04” /08"**到用户控制并破坏用户控制背后的每一个逻辑！这完全是一场灾难。

我想通过将用户控件的文化专门设置为“en-US”来防止这种转换。

希望我已经澄清了足够的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:41:15.647

您可以设置[`FrameworkElement.Language`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.language.aspx)控件的属性或将`xml:lang`属性应用于控件的 XAML。您必须设置的值为`en-US`.

您使用此属性/属性设置的区域性会影响特定区域性字符串在控件中的转换方式。例如，如果您`DateTime`使用`D`（长日期）格式显示，您会得到类似`Monday, 30 April 2012`when`xml:lang="en-US"`和`30\. april 2012`when的内容`xml:lang="da-DK"`。

但是，如果您在 XAML 中指定日期，例如

```
<my:uc1 x:Name="UserControl1" Date="4/30/2012" /> 
```

该日期使用`CultureInfo.InvariantCulture`（基本上`en-US`）解析。这不是您似乎描述的行为。您对实际问题的描述有点含糊，但要验证我的说法，您可以尝试输入`30/4/2012`日期并查看它无法编译。它不仅适用于 Visual Studio 的当前文化，`en-US`而且在我的情况下`da-DK`（日期格式为`d/M/yyyy`）也是如此。****

# emacs - 文本选择操作由 Emacs 渲染非常慢

> ID：10379368
> 
> 赞同：0
> 
> 时间：2012-04-30T06:23:52.877
> 
> 标签：emacs

我不知道为什么，但是在迁移到 Fedora16.1 + Emacs 23.3.1 之后，文本选择操作很慢。因此，例如，如果我按 Ctrl+Space 放置标记并快速按下箭头，选择区域呈现非常慢，我需要等待几秒钟才能到达当前光标位置？可能是您知道为什么会发生这种情况吗？

# c - 无法理解输出的原因

> ID：10379381
> 
> 赞同：3
> 
> 时间：2012-04-30T06:25:15.310
> 
> 标签：c

我正在运行一个代码片段。但我无法理解它产生的代码和输出。

```
#include <stdio.h>
int main()  
{ 
  int a, b,c, d;    
  a=3;    
  b=5;    
  c=a,b;    
  d=(a,b);      
  printf("c = %d" ,c);    
  printf("\nd = %d" ,d);    
  return 0;
} 
```

这个程序的输出是：

```
c=3
d=5 
```

我不知道输出是怎么来的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T06:27:45.177

1.  当您有逗号时，表达式被评估为正确的参数，这就是为什么`d=(a,b);`被评估为`d=b`.
2.  `=`具有比逗号[更高的优先级](http://isthe.com/chongo/tech/comp/c/c-precedence.html)，因此表达式`c=a,b;`被计算为`(c=a),b;`

不是答案的一部分，但值得一提的是，整个`c=a,b;`表达式被评估为`b`，而不是 a，例如，如果你写`d=(c=a,b);`你得到`c=a`AND `d=b`;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T06:27:44.687

考虑 C 的逗号运算符的优先级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T06:36:27.790

请注意逗号运算符可能在 C++ 中被重载。因此，实际行为可能与预期的非常不同。

例如，Boost.Spirit 非常巧妙地使用逗号运算符来实现符号表的列表初始值设定项。因此，它使以下语法成为可能且有意义：

```
keywords = "and", "or", "not", "xor"; 
```

请注意，由于运算符优先级，代码（故意！）与

```
(((keywords = "and"), "or"), "not"), "xor"; 
```

也就是说，调用的第一个运算符是keywords.operator =("and")，它返回一个代理对象，在该对象上调用剩余的运算符：

```
keywords.operator =("and").operator ,("or").operator ,("not").operator ,("xor"); 
```

# c# - 混淆+包装器，这行得通吗？

> ID：10379385
> 
> 赞同：0
> 
> 时间：2012-04-30T06:25:24.893
> 
> 标签：c#, obfuscation, wrapper

我想放入我的程序运行时包装器（**Microsoft.CSharp**，**cssscript**左右）。我还想用**Eazfuscator.NET**混淆我的代码。这行得通吗？

例如，在我的程序中有一个**Lool2**类的 Object **Lol 。**在混淆整个解决方案之后，是否可以在我的程序包装器中使用该对象，如 Lol.doanything() ？

 **我有疑问，这就是我在这里问的原因。虽然我在网上找不到答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:29:58.693

我不知道 Eazfuscator.NET，但此信息适用于大多数混淆器。

大多数混淆器默认重命名**非公共**类型和成员以隐藏其含义。公共类型未重命名。它们通常还具有**内部化**功能，该功能首先将所有`public`s 更改为`internal`s（因此它们包含在重命名功能中）。

它们还允许您禁用整体或特定类型的重命名（使用`System.Reflection.ObfuscationAttribute`），即使它们不公开。当您使用反射访问非公共成员时，这是必需的。

如果您不使用反射，另一种方法是将应用程序与包装器合并（也是很多混淆器具有的功能）并内化所有内容。这样所有类型都可以重命名。**

# c# - 如何使用 C#.NET 使用 sharpsvn 将本地文件导入 SVN

> ID：10379391
> 
> 赞同：1
> 
> 时间：2012-04-30T06:26:16.230
> 
> 标签：c#, visualsvn

我正在开发一个类似于 SVN 的项目，能够创建存储库、签出、创建用户和提交，但在导入期间出现错误“工作副本 'E:\Admin\admin' 太旧（格式 10，由 Subversion 创建1.6)" 和一些它显示找不到路径。

```
 using (SvnClient client = new SvnClient())
        {
            SvnAddArgs saa = new SvnAddArgs();
            saa.Force = true;
            saa.Depth = SvnDepth.Infinity;

            SvnImportArgs ca = new SvnImportArgs();

            ca.LogMessage = "some log message";

            SvnCommitResult result;

            Uri uri = new Uri(getPathToRepository());

            String fileName = getPathToFile();
            client.Authentication.DefaultCredentials = new System.Net.NetworkCredential("koteswar", "neeraja");

            client.Import(fileName, uri, ca, out result);

        } 
```

## 这件事怎么能解决，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:05:35.777

我找到了解决方案，但它对我的情况非常具体。

```
client.Import(fileName, 
new Uri("https://koteshwar:8443/svn/"+comboBox1.SelectedItem+"/trunk"), ca, out result);. 
```

# java - 如何在 blobstoreService.createUploadUrl 中管理 Session

> ID：10379395
> 
> 赞同：3
> 
> 时间：2012-04-30T06:26:43.300
> 
> 标签：java, google-app-engine, jsp, session

我在 Google App Engine 中创建了一个应用程序.....该应用程序将 xml 文件作为输入和一些 xpaths。每次点击提交按钮后都会生成一个报告。如果我使用浏览器返回按钮返回主页，则会话是被破坏了。有没有办法让会话保持活跃？

主页代码：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<%@ page import="com.google.appengine.api.blobstore.BlobstoreService.*" %>

<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>

<%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%>
<html>
      <head>
          <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
          <script language="javascript">
function Checkfiles()
{
var fup = document.getElementById('myFile');
var fileName = fup.value;
var ext = fileName.substring(fileName.lastIndexOf('.') + 1);
if(ext == "xml")
{
return true;
}
else
{
alert("Upload an XML File");
fup.focus();
return false;
}
}
</script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>XSD Checking Tool</title>

            <style rel="stylesheet" type="text/css">
body {
  color: #000000;
  background-color: #ffffff;
  font-family: arial, verdana, sans-serif;
  font-size: 14pt;
}

fieldset {
  font-size: 14px;
 width: 600px;
}

.formPrompt {
  text-align: right;
}
.footer, .push {
    background-color: #ffffff;
height: 4em;
  font-size: 8pt;

}

input {
  border-style: solid;
  border-color: #000000;
  border-width: 1px;
  background-color: #f2f2f2;
}

            </style>
    </head>
   <body  bgcolor="Silver">
       <center>
       <h2 style="background-color:skyblue; bottom:20">XPath Checking Tool</h2>
       </center>

            <form action="<%= blobstoreService.createUploadUrl("/FileUpload") %>" onsubmit="return Checkfiles();" method="post" enctype="multipart/form-data">
<center>
Browse The File to Check XPaths:
<input type="file" name="myFile" id="myFile">

<hr />

<div style="font-size:12pt; color: black">
    <fieldset>
<legend>Paste the xpaths Here</legend>

<table>
    <td>
        <TEXTAREA NAME="xpath" id="xpath" ROWS="20" cols="40"></TEXTAREA><br>
</td>

</table>

    </fieldset>
        </div>
         </center>
                <center>
                <p><input type=submit value="Submit"></p>
                </center>
         <hr />

</form>
<center>
<div class="footer">
            <p style="background-color:skyblue">Copyright (c) 2012 Developed by Soumitra Chatterjee,Arpish Chatterjee & Dwaipayan Mukherjee</p>
        </div>
    </center>
</body>

</html> 
```

# sharepoint - SharePoint 2010：CommonViewFields 中调用的某些值未出现在 CQWP 中

> ID：10379399
> 
> 赞同：0
> 
> 时间：2012-04-30T06:27:19.870
> 
> 标签：sharepoint, sharepoint-2010

我已经为内容查询 Web 部件创建了一些要使用 CommonViewFields 显示的自定义字段。并修改了 ItemStyle 以反映它。现在，我遇到的问题是，一些信息没有显示出来。

确切地说，这是一个任务摘要 CQWP，我需要*标题*的值、*截止日期*、*完成百分比*和*分配给*任务的人员，以便在站点上可用。一切都正常显示，但是，仅显示*分配给*字段的一些名称。某些任务未显示*分配给*的人员。

我已经仔细检查以确保内容类型中的字段类型正确。

这有什么原因吗？我怎样才能克服它？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:53:49.060

我发现了为什么会这样。令人惊讶的是，内容查询 Web 部件不允许对值字段进行多项选择（在原始列表设置中，因为此 CQWP 正在从 SharePoint 站点中可用的列表中提取数据）。因此，所有未出现的名称要么分配了几个人，要么将多项选择设置为“是”。

将设置更改为“否”后，所有名称看起来都很好。

现在尝试查找是否有一种方法可以显示更多值。

# css - 无法在 JSP 页面中加载外部 CSS

> ID：10379403
> 
> 赞同：0
> 
> 时间：2012-04-30T06:27:53.720
> 
> 标签：css, jsp

我正在尝试在我的 jsp 页面中加载外部 css 页面，但通常的做法没有帮助，有什么遗漏的吗？

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

 <title>Login Page</title>
<head>

    <link rel="stylesheet" type="text/css" href="style.css"/>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:09:20.353

您的`href`链接元素中的 指定了一个相对于 URL 的路径，该路径仅在 css 文件与 位于同一文件夹中`JSP`并且`JSP`直接寻址时才有效。

由于您提到它`css`与`JSP`. 检查您如何处理 JSP。

您需要将上下文路径插入到您的 web 应用程序（例如 /webapp/styles.css）或使用相对路径或使用 HTML`<base>`标记。它表示最终 HTML 输出中使用的所有相对 URL 的基本 URL。

```
<head>
    <base href="${pageContext.request.contextPath}">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="text/javascript" src="js/script.js"></script>
</head> 
```

# html - IE 不支持基本标签吗？

> ID：10379407
> 
> 赞同：9
> 
> 时间：2012-04-30T06:28:11.147
> 
> 标签：html, internet-explorer, hyperlink, meta-tags

我不清楚 IE 对`<base>`标签的支持。一些文章建议它仅适用于绝对 href 路径。但这对我不起作用。

```
<base href="http://domain.net/qu/en/" />

<a href="sample">Sample Link</a> 
```

在 chrome 和 FF 上，单击链接将带我到`http://domain.net/qu/en/sample`但在 IE9 中，它带我到`http://domain.net/qu/sample`

我也和亲戚一起试过`<base>`，但似乎没有用。

我只在 IE9.08 中测试过这个

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-30T07:28:23.213

IE一直支持`<base href>`。根据规范，它始终仅在`href`值为绝对 URL 时定义，尽管某些浏览器即使在相对 URL 的情况下也已解释它。它必须放在`<head>`文件的一部分；否则浏览器可能会忽略它。基地址在一个文档中只能设置一次。（如果违反了这一点，浏览器往往会忽略除第一个之外的所有内容。）

在这种情况下，我的猜测是在标签之前有一些字符，在任何标签之外`<base>`。考虑一下：

```
<base href="http://domain.net/qu/en/" />
<a href="sample">Sample Link</a> 
```

`<base>`这是无效的，因为标签前有不间断的空格字符。在 HTML 解析中，非空格字符的不间断空格会隐式关闭`<head>`元素并打开`<body>`元素。这意味着`<base>`标签现在将位于`<body>`. 一些浏览器可能仍然接受它，但正如 Tieson T 的回答中引用的文档所说：“Internet Explorer 7 [和更高版本] 严格强制在文档**头部使用****基本**标签，并将忽略放错位置的标签。”</ p>

**要检查事情，请使用[验证器](http://validator.w3.org)——它会报告此类问题。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:50:59.763

根据微软的说法，IE 7 和更新版本：http: [//msdn.microsoft.com/en-us/library/ms535191%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms535191%28v=vs.85%29.aspx)**

# javascript - 如何一次删除一个类元素？

> ID：10379408
> 
> 赞同：2
> 
> 时间：2012-04-30T06:28:11.800
> 
> 标签：javascript, jquery, html, mobile-application

如果我有一系列带有 class="filler" 的元素，我怎样才能一次删除一个而不删除所有元素？这是没有给他们所有的ID；有很多。

例如，假设我有这个：

```
<br class="filler"/>
<hr class="filler"/>
<br class="filler"/>
<hr class="filler"/>
<br class="filler"/>
<hr class="filler"/>
<br class="filler"/>
<hr class="filler"/> 
```

这重复了很多次。每次调用函数时，我想删除一个 br 和一个 hr。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:33:06.110

要删除第一个`br`并`hr`使用 jquery：

```
$("br.filler").first().remove();
$("hr.filler").first().remove(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:35:05.713

用这个：

```
$("br.filler").first().remove();
$("hr.filler").first().remove(); 
```

参考：[http ://api.jquery.com/first/](http://api.jquery.com/first/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:37:08.543

[http://jsfiddle.net/Bongs/bnmzr/](http://jsfiddle.net/Bongs/bnmzr/)

HTML

```
Click on div to remove
<div class="filler"></div>
<div class="filler"></div>
<div class="filler"></div>
<div class="filler"></div>
<div class="filler"></div> 
```

JS

```
//add the event on which you want to remove the div...
$(".filler").live("click", function(){
    $(this).remove();     //the div on which you click will be removed from DOM
})​ 
```

CSS

```
.filler
{
    border: 1px solid #000;
    height: 10px;
    width: 50px;
}​ 
```

你可以玩代码... :)

# yii - yii中的多文件上传

> ID：10379415
> 
> 赞同：0
> 
> 时间：2012-04-30T06:29:25.777
> 
> 标签：yii

我是 yii 框架的新手。我需要像这样的表单中的多个文件上传字段`http://www.eha.ee/labs/yiiplay/index.php/en/site/widget?view=multifileupload`。

但是我在这个网址中找不到详细的代码和上传方法。我还需要将上传图像的 url 数组保存在我的数据库中。有详细的参考吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:43:19.027

使用 CMultiFileUpload 上传多张图片看这里

[http://www.yiiframework.com/wiki/176/uploading-multiple-images-with-cmultifileupload/](http://www.yiiframework.com/wiki/176/uploading-multiple-images-with-cmultifileupload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:43:02.883

您可以使用它`CUploadedFile`来管理上传到服务器的文件。要处理多个只是格式化您的模型和正确的规则，应该没有问题。

看看这里开始：

*   [http://www.yiiframework.com/doc/api/1.1/CUploadedFile](http://www.yiiframework.com/doc/api/1.1/CUploadedFile)
*   [http://www.yiiframework.com/wiki/2/](http://www.yiiframework.com/wiki/2/)

如果您遇到特定问题，请返回。

# c# - 自定义实体框架 4.1 代码优先模板

> ID：10379419
> 
> 赞同：0
> 
> 时间：2012-04-30T06:30:29.693
> 
> 标签：c#, entity-framework, templates, ef-code-first, code-first

我自己不喜欢包含大量代码的 SO 问题，但我将其包括在这里，因为这个问题是关于代码生成策略而不是故障排除。

我已经从自己的代码生成器切换到 EF，并且遇到了生成的实体与 ObjectContext 的紧密绑定程度的问题。使用代码优先方法似乎为您提供了更多的杠杆作用，因为您可以像普通 POCO 类一样抛出实体对象，而 EF 没有牛。

来自代码生成背景，我定制了 T4 模板，为我的代码所期望的实体类添加了一些标准实现。下面是一个例子：

`

```
public partial class Action:
    Task,
    CloudTech.ATS.Library.Interfaces.ICloneable<CloudTech.ATS.Templates.Action>,
    CloudTech.ATS.Library.Interfaces.IPersistXml<CloudTech.ATS.Templates.Action>
{
    #region Constructors, Destructor and Initializers.

    //====================================================================================================
    // Constructors, Destructor and Initializers.
    //====================================================================================================

    public Action ()
    {
        this.InitializeData();
    }

    public void InitializeData ()
    {
        // Native Types.
        this.TemplateId = default(int);

        // Complex Types.

        // Foreign Keys.
        this.Template = new CloudTech.ATS.Templates.Template();

        // Child Objects.
        this.ActionParameters = new System.Collections.Generic.List<CloudTech.ATS.Templates.ActionParameter>();
    }

    #endregion Constructors, Destructor and Initializers.

    #region Interface Implementation: CloudTech.ATS.Library.Interfaces.ICloneable<T>.

    //====================================================================================================
    // Interface Implementation: CloudTech.ATS.Library.Interfaces.ICloneable<T>.
    //====================================================================================================

    public CloudTech.ATS.Templates.Action Clone ()
    {
        return (new CloudTech.ATS.Templates.Action().CopyFrom(this));
    }

    public CloudTech.ATS.Templates.Action CopyFrom (CloudTech.ATS.Templates.Action source)
    {
        this.InitializeData();

        // Native Types.
        this.TemplateId = source.TemplateId;

        // Complex Types.

        // Foreign Keys.
        this.Template.CopyFrom(source.Template);

        // Child Objects disabled for XML.
        //this.ActionParameters.CopyFrom(source.ActionParameters);

        return (this);
    }

    public CloudTech.ATS.Templates.Action CopyTo (CloudTech.ATS.Templates.Action destination)
    {
        return (destination.CopyFrom(this));
    }

    #endregion Interface Implementation: CloudTech.ATS.Library.Interfaces.ICloneable<T>.

    #region Interface Implementation: CloudTech.ATS.Library.Interfaces.IPersistXml<T>.

    //====================================================================================================
    // Interface Implementation: CloudTech.ATS.Library.Interfaces.IPersistXml<T>.
    //====================================================================================================

    public System.Xml.XmlElement ToXmlElement (System.Xml.XmlDocument document)
    {
        System.Xml.XmlElement element = null;

        element = document.CreateElement(this.GetType().Name);

        // Native Types.
        try { element.Attributes.Append(document, "TemplateId", this.TemplateId.ToString()); }
        catch { element.Attributes.Append(document, "TemplateId", ""); }

        // Complex Types.

        // Foreign Keys.
        element.AppendChild(this.Template.ToXmlElement(document));

        // Child Objects commented for XML.
        //element.AppendChild(this.ActionParameters.ToXmlElement(document));

        return (element);
    }

    public bool FromXmlElement (System.Xml.XmlElement element)
    {
        bool result = true;

        this.InitializeData();

        // Native Types.
        try { this.TemplateId = int.Parse(element.Attributes ["TemplateId"].Value); }
        catch { result = false; }

        // Complex Types.

        // Foreign Keys.
        this.Template.FromXmlElement(element ["Template"]);

        // Child Objects.
        //this.ActionParameters.FromXmlElement(element ["ActionParameters"]);

        return (result);
    }

    #endregion Interface Implementation: CloudTech.ATS.Library.Interfaces.IPersistXml<T>.
} 
```

`

以上是除 EF CF 当然生成的标准实体声明之外的所有生成代码。

我现在正在寻找一种以某种方式更改构造函数的方法，以便我自己的自定义类可以声明一个无参数构造函数，而不会与生成的构造函数发生冲突。我宁愿不必使用工厂方法，因为 Initialize() 和 InitializeData() 对我们来说是一个非常古老的约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:14:04.563

> 我现在正在寻找一种以某种方式更改构造函数的方法，以便我自己的自定义类可以声明一个无参数构造函数，而不会与生成的构造函数发生冲突。

目前尚不清楚您的意思是什么。如果您将默认构造函数添加到自动生成的类，您就完成了 - 您不能对它做任何其他事情。如果您不将其添加到类生成器中，您可以自己创建类的第二部分`Action`和默认构造函数。如果您想要由生成器创建默认构造函数，同时您想要“修改”构造函数为每个实体类型初始化的内容，您可以创建构造函数调用的部分方法。

```
public partial class Action
{
    public Action()
    {
        Initialize();
    }

    partial void Initialize();
} 
```

现在您可以声明该类的第二部分`Action`并 int 可以实现`Initialize`方法的新部分：

```
public partial class Action
{
    partial void Initialize()
    {
        // Do something
    }
} 
```

如果您不实现部分方法，编译器只会`Initialize`从构造函数中删除对的调用，它仍然可以工作。

# javascript - 在不访问对象键的情况下迭代对象值

> ID：10379420
> 
> 赞同：1
> 
> 时间：2012-04-30T06:30:37.057
> 
> 标签：javascript

我有一个非常大的对象，我只想遍历它的值。

如果我写一个像下面这样的循环，对于一个有 1m 个键的对象，散列函数和散列查找将被调用 1m 次。出于性能原因，我想避免这种情况。

```
for (var key in myObj) {sum+=myObj[key]} 
```

我可以以某种方式只遍历值而不关心键吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:43:47.790

我建议这里可能存在误解。

您可能知道 Javascript 对象不是简单的数组，它们的特定内部实现对 Javascript 代码是隐藏的。对象是键值集合，我相信没有任何保证的顺序。

你怎么知道使用 for (var key in myObj) 进行哈希键查找？

我不认为有任何保证，事实上，这样做需要知道从中计算散列的键的知​​识。然而，您在没有指定键的情况下要求所有值。

有一个合理的可能性是 for (var key in myObj) 已经做了最接近你想要的东西（取决于使用的浏览器或 js 引擎）。我怀疑它更有可能直接扫描内部结构并避免计算哈希，因为您需要所有键。

更多的 js 实现专家，标准可能在这方面提供更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:39:19.957

对于这种情况，我建议保留 2 个不同的数组：一个用于键，一个用于值。

IE

```
keys[0]="user"
values[0]={name:"aaa",email:".......
keys[1]..... 
```

所以你可以非常快速地迭代两者

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T06:37:19.243

不，在普通的 JavaScript 解释器上，没有属性的名称就无法获取属性的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:57:52.597

不，没有办法避免在这里使用一个键循环。顺便说一句，您在问题中描述的内容更像是一个只有数值的数组。你确定这是一个对象？然后我要做的第一个优化是使用数组来计算总和。之后，世界就在你的脚下：有很多[方法可以循环数组](http://ajaxian.com/archives/how-many-ways-can-you-iterate-over-an-array-in-javascript)。

[额外链接](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#Iteration_methods)
[额外链接 2](http://bonsaiden.github.com/JavaScript-Garden/#array.general)

如果真的是性能问题，看看[@Duffs Device](http://home.earthlink.net/~kendrasg/info/js_opt/jsOptMain.html#duffsdevice)

# javascript - 使用 CSS 忽略 CSS :hover, :active, :focus 声明

> ID：10379425
> 
> 赞同：1
> 
> 时间：2012-04-30T06:31:07.933
> 
> 标签：javascript, css, yui, pseudo-class

我有几个链接，点击后会打开一个子菜单。这是通过我的样式表中的 、 和 声明`:hover`来`:focus`实现的。`:active`

效果与此相同：[http](http://www.cssplay.co.uk/menus/cssplay-click-flyout.html) ://www.cssplay.co.uk/menus/cssplay-click-flyout.html 。

问题是，虽然 CSS 实现有效，但存在各种缺点，我想用 JavaScript 来解决。我使用[YUI 3.5.0](http://yuilibrary.com)作为我的 javascript 库。是否可以使用 JavaScript 忽略样式表中的`:hover`,`:focus`和声明？`:active`

我知道我可以将这些声明放入一个单独的类中并使用 JavaScript 更改元素的类，但它对我来说似乎不是很干净。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:37:04.487

> 我知道我可以将这些声明放入一个单独的类中并使用 JavaScript 更改元素的类，但它对我来说似乎不是很干净。

这是尽可能干净的。一个不太卫生的解决方案是复制通用规则中的样式并将它们直接注入到您的元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:53:56.157

我认为更改类的解决方案是最干净的，但仅举例来说，您可以使用 javascript 覆盖悬停：

使用 jQuery：

```
$('#js').hover(
    function() { $(this).css('color', 'blue'); },
    function() { $(this).css('color', 'black'); }
); 
```

请参阅[此示例](http://jsfiddle.net/Z8t2U/)。

没有 jQuery：

```
document.getElementById('js').onmouseenter = function() {
    this.style.color = 'blue';
}
document.getElementById('js').onmouseleave = function() {
    this.style.color = 'black';
} 
```

另请参阅[此示例](http://jsfiddle.net/Z8t2U/2/)。

与 YUI：

```
Y.one('#js').on('mouseenter', function(e) {
    e.currentTarget.setStyle('color', '#00f');
});
Y.one('#js').on('mouseleave', function(e) {
    e.currentTarget.setStyle('color', '#000');
}); 
```

另请参阅[此示例](http://jsfiddle.net/Z8t2U/3/)。

# assembly - 将间接寻址的值移入 AL 有效，但将其移入 8 位 rXb 寄存器在 yasm 中不起作用

> ID：10379428
> 
> 赞同：2
> 
> 时间：2012-04-30T06:31:33.910
> 
> 标签：assembly, x86-64, nasm, yasm

我在 .data 中声明了一个字节数组的字符

```
chars db 'spipopd' 
```

我已将 rdi 设置为指向该数组的基本索引

```
mov rdi, chars 
```

在某些时候，我想将数组中的一个字符放入一个 8 位寄存器中。下面的第一条语句产生一个有效值，但第二条语句`void`在输入 gdb 命令时导致 r9b 包含`print $r9b`。

```
mov al, [rdi]   ; produces valid value in gdb
mov r9b, [rdi]  ; r9b = void, according to gdb 
```

寄存器 r8b 到 r15b 中的任何一个都具有相同的效果。据我了解，`al`和`r9b`都是 8 位的，那么为什么一个可以工作，而另一个不能呢？我的预感是，虽然它们都是 8 位大小，但它们有一些我无法理解的细微差别。

英特尔文档指出：

> “REX 前缀用于生成 64 位操作数大小或引用寄存器 R8-R15。”

这与我的问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:32:37.060

“void”实际上并不是寄存器可以具有的值，因此看起来 gdb 只是没有将 r9b 识别为寄存器名称。

请注意，低字节寄存器有两种不同的表示法，`r9b`和`r9l`，并且不同的源使用不同的名称。

在 main 中破坏一个随机程序并自己尝试，我得到以下输出：

```
(gdb) print $r9b
$1 = void
(gdb) print $r9l
$2 = 16 
```

显然 gdb 只识别`$r9l`符号。

# javascript - 如何加载 .js 文件 UIWebView

> ID：10379429
> 
> 赞同：2
> 
> 时间：2012-04-30T06:31:34.300
> 
> 标签：javascript, iphone, uiwebview

我想在 UIWebView 中加载 .js(javaScript) 文件，而不仅仅是一个函数

```
 [webView stringByEvaluatingJavaScriptFromString:@""]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:48:53.047

```
NSString *javaScript=[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"javascript" ofType:@"js"] encoding:NSUTF8StringEncoding error:nil];

[webView stringByEvaluatingJavaScriptFromString:javaScript]; 
```

[1] [http://www.iphonedevsdk.com/forum/iphone-sdk-development/22703-loading-local-javascript-file-into-uiwebview-problem.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/22703-loading-local-javascript-file-into-uiwebview-problem.html)

[2] [http://iphoneincubator.com/blog/windows-views/how-to-inject-javascript-functions-into-a-uiwebview](http://iphoneincubator.com/blog/windows-views/how-to-inject-javascript-functions-into-a-uiwebview)

# java - 哈希桶数

> ID：10379433
> 
> 赞同：9
> 
> 时间：2012-04-30T06:31:47.530
> 
> 标签：java, hashmap

在[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)文档中，提到：

*   **初始容量**只是创建哈希表时的 容量
*   **容量**是哈希表中的桶数。

现在假设我们的初始容量为 16（默认），如果我们继续将元素添加到 100 个，则 hashmap 的容量为 100 * loadfactor。

请问哈希桶的数量是100还是16？

**编辑：**
从我读到的解决方案：存储桶不仅仅是添加的元素。以此为观点：所以如果我们添加字符串作为键，我们将得到一个元素/桶，从而导致大量的空间消耗/复杂性，我的理解对吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T06:41:00.113

既不是 100 也不是 16 桶。很可能会有 256 个存储桶，但文档并不能保证这一点。

从[更新的文档链接](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)：

> 负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表的桶数*大约增加一倍。*

（强调我的）

因此，如果我们忽略上面的“大约”一词，我们会确定每当哈希表满 75%（或您在构造函数中指定的任何负载因子）时，哈希桶的数量都会翻倍。这意味着每当您插入第 12、24、48 和 96 个元素时，桶的数量就会翻倍，总共留下 256 个桶。

然而，正如我在文档片段中强调的那样，这个数字*大约*是之前大小的两倍，所以它可能不完全是 256。事实上，如果倒数第二个加倍被替换为稍微大一点的增加，最后一个加倍可能永远不会发生，所以最终的哈希表可能小到 134 个桶，也可能大于 256 个元素。

注意我得到了 134 数字，因为它是最小的`N`整数`0.75 * N > 100`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T06:43:28.147

查看源代码`HashMap`我们看到以下内容：

```
threshold = capacity * loadfactor
size = number of elements in the map

if( size >= threshold ) {
  double capacity
} 
```

因此，如果初始容量为 16，负载因子为 0.75（默认值），则初始阈值为 12。如果添加第 12 个元素，容量将上升到 32，阈值为 24。下一步将是容量64和阈值48等等等。

因此，对于 100 个元素，您应该有 256 个容量和 192 个阈值。

请注意，这仅适用于标准值。如果您知道地图将包含的大致元素数量，您应该使用足够高的初始容量创建它，以防止在容量增加时复制。

*更新*：

关于容量的一句话：即使您定义了不同的初始容量，它也始终是 2 的幂。然后哈希图会将容量设置为大于或等于提供的初始容量的 2 的最小幂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T06:41:19.873

从您的链接：

> 当哈希表中的条目数超过负载因子与当前容量的乘积时，通过调用rehash方法，容量大致翻倍。

这意味着如果我们的初始容量为 16，当超过时，容量将增加 32，下一次增加 64，依此类推。

在您的情况下，您要添加 100 个。因此，当您到达第 16 个数字时，大小将增加 32，因此现在总大小为 48。再次继续添加直到第 48 个数字，大小将增加 64。因此，在您的情况下，存储桶的总大小为 112。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T06:53:48.473

在[文档中](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

```
When the number of entries in the hash table exceeds the product of the 
load factor and the current capacity, the capacity is roughly doubled by 
calling the rehash method.

threshold=product of the  load factor and the current capacity 
```

让我们试试.. hashmap 的初始大小是 16
，默认加载因子是`0.75` 所以第一个阈值是 12 所以添加 12 个元素下一个容量将是.. (16*2) =32第二个
阈值是 24 所以在添加第 24 个元素后下一个容量将是(32*2)=64

等等..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T06:42:57.773

每个实际项目*至少有*一个桶。如果您添加的项目超过 16 个，则必须调整表的大小并重新散列。

> 现在假设我们的初始容量为 16（默认），如果我们继续将元素添加到 100 个，则 hashmap 的容量为 100 * loadfactor。

实际上它说：

> 如果初始容量大于最大条目数除以负载因子，则不会发生重新哈希操作。

即，如果最多有 100 个项目并且容量为 100/0.75 = 133，则不应该发生重新散列。请注意，这意味着*即使表未满*，也可能必须在接近满时重新散列。因此，如果您期望 <=100 个项目，使用默认加载因子设置的理想初始容量约为 135+。

# python - psycopg2.ProgrammingError：无法适应类型“DictRow”

> ID：10379440
> 
> 赞同：8
> 
> 时间：2012-04-30T06:32:37.903
> 
> 标签：python, postgresql, psycopg2

我想在以下位置使用 dict 光标`psycopg2`：

```
self.__db_conn = psycopg2.extras.DictConnection("host=... dbname=...") 
```

这是我的查询：

```
cur.execute('INSERT INTO scm_main.tbl_ack(ack_summary_id, ack_local_timestamp, ack_user_id) '
    'SELECT summary_id AS ack_summary_id, now() AS ack_local_timestamp, us.user_id AS ack_user_id '
    'FROM scm_main.tbl_summary AS s '
    'INNER JOIN scm_main.vu_usr_stn AS us ON (s.summary_station_id = us.station_axis_id) '
    'WHERE ((s.summary_id > (SELECT COALESCE(max(a.ack_summary_id),0) FROM scm_main.tbl_ack AS a WHERE a.ack_user_id = %(user_id)s)) '
    'AND (s.summary_company_specific_id <> 0) '
    'AND (us.user_name = %(user_name)s) AND (s.summary_timestamp < (now() - \'00:25:00\'::interval))) '
    'ORDER BY s.summary_id ASC', { 'user_id': self.__user_id, 'user_name': self.__company }) 
```

但它给了我这个：

```
<class 'psycopg2.ProgrammingError'> exception: can't adapt type 'DictRow' 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T14:34:24.423

复杂类型，如`DictRow`（即完整的结果行，可按列名索引）不能自动适应简单的 SQL 类型，而 psycopg 只是告诉你这一点。您的代码看起来不错，因此错误几乎可以肯定是您想将查询结果放在`self.__user_id`and`self.__company`属性中，但最终将整个结果集（即 , `DictRow`）放在其中一个或两个中。检查获取结果的代码。

# templates - 如何在模板中获取 Meteor.call 函数的结果

> ID：10379445
> 
> 赞同：5
> 
> 时间：2012-04-30T06:33:15.437
> 
> 标签：templates, callback, handlebars.js, meteor

我正在尝试制作一个用于 Meteor 客户端的分页功能。因此我需要知道服务器上的记录数。

在服务器上（在 server/bootstrap.coffee 中）我有这个代码：

```
Meteor.methods
  ContactsCount: ->
    Contacts.find().count()
    console.log("Totalrecords: " + Contacts.find().count()) 
```

调用服务器部分（它在控制台上显示正确的数字 - 40）

在客户端我有：

```
$.extend Template.pager,
  GetRecordCount: ->
    Meteor.call("ContactsCount", (error,result) ->
    console.log('r', result) 
```

从浏览器控制台 Template.pager.RecordCount() 返回

> 未定义
> r 30

我知道“未定义”是 Template.pager.RecordCount() 的返回，它首先返回。

当结果可用时，它会显示在控制台上。

**但是如何在我的寻呼机模板中获取结果的值？**

我现在正在搜索 java 回调几个小时，但无论我尝试什么，我都无法让它工作。
请帮忙。

这是一个更新。

我查看了无效的文档。但是这个例子对我帮助不大。温度在客户端中通过函数调用中的参数设置。所以没有使用回调。回调是我的问题。

我是这样解决的：

```
Meteor.call("ContactsCount", myFunc)

### This is the call back function when the server
    function 'Meteor.call("ContactsCount", myFunc)' is called
    When the result from the server call is returned, this will be executed ###
myFunc = (error, result) ->
if !error
    pages = result / Session.get("page_size")
    Session.set "total_pages", Number(pages.toFixed(0) + 1)
    Session.set "total_records", result
if error
    console.log(error) 
```

这行得通。我仍然想知道这是否是最好的解决方案。我有很多 Session.set() 调用，也许有太多的触发发生。

```
### This function will set the css classes
    for enabling or disabling the pager buttons
    in the Pager Template in myapp.html ###
SetPagerButtons = ->
 Meteor.call("ContactsCount", myFunc)
 if Session.get("current_page") <= 1
    Session.set "nextEnabled", ""
    Session.set "lastEnabled", ""
    Session.set "firstEnabled", "disabled"
    Session.set "previousEnabled", "disabled"
    Session.set "last_record", false
 else if Session.get("last_record") or Session.equals("current_page",  Session.get("total_pages"))
    Session.set "nextEnabled", "disabled"
    Session.set "lastEnabled", "disabled"
    Session.set "firstEnabled", ""
    Session.set "previousEnabled", ""
 else
    Session.set "nextEnabled", ""
    Session.set "lastEnabled", ""
    Session.set "firstEnabled", ""
    Session.set "previousEnabled", ""
    Session.set "last_record", false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:35:46.303

您需要使模板无效，这可以通过在模板助手中使用会话、使用集合或使用无效上下文来完成：

```
http://docs.meteor.com/#invalidate 
```

更新：

老实说，您所说的内容是正确的，我只是尽量减少会话次数。基本上有三种方法可以使模板失效：使用 context.invalidate() 强制失效，更新客户端集合或更新会话。

所以是的，您可以使用此代码（Sudo messy，因为我不使用咖啡脚本）

```
//client server call
total_records = 0
page_numbers_context = null

Meteor.call("ContactsCount", contactsCountCallback)

contactsCountCallback = (error, result) ->
if !error
    total_records = result
    if page_numbers_context
        page_numbers_context.invalidate();
if error
    console.log(error)

//Add template handler
Handlebars.registerHelper('page_numbers', pageNumberCallback);
pageNumberCallback = (options)  ->
    page_numbers 

    var context = Meteor.deps.Context.current;
    if context && !page_numbers_context
        page_numbers_context = context
        context.on_invalidate ->
            page_numbers_context = null

    pages = total_records / page_size
    total_pages = Number(pages.toFixed(0) + 1)
    //HTML code built with ifs here

//In template:
{{#page_numbers}}{{/page_numbers}} 
```

# python - 在 Python 中以分别显示所有边的方式绘制有向图

> ID：10379448
> 
> 赞同：29
> 
> 时间：2012-04-30T06:33:52.337
> 
> 标签：python, networkx, graph-visualization

我正在使用 Python 来模拟在有向图上发生的过程。我想制作这个过程的动画。

我遇到的问题是大多数 Python 图形可视化库将成对的有向边组合成一条边。例如，[NetworkX](http://networkx.lanl.gov)在显示下图时仅绘制两条边，而我想分别显示四个边中的每一条：

```
import networkx as nx
import matplotlib.pyplot as plt 

G = nx.MultiDiGraph()

G.add_edges_from([
    (1, 2),
    (2, 3),
    (3, 2),
    (2, 1),
])

plt.figure(figsize=(8,8))
nx.draw(G) 
```

![NetworkX 的输出； 平行边是重叠的，所以只显示两条线](../Images/46f213f7784bae9399195342c39e7f13.png)

我想显示这样的东西，每个平行边分别绘制：

![所需的输出格式； 平行边分别绘制](../Images/7d9fbbc1008947fcdd0dabce2ca3727c.png)

问题[R reciprocal edges in igraph in R](https://stackoverflow.com/questions/5711540/r-reciprocal-edges-in-igraph-in-r)似乎解决了同样的问题，但解决方案是针对 R igraph 库，而不是 Python 库。

有没有一种简单的方法可以使用现有的 Python 图形可视化库来生成这种风格的绘图？如果它可以支持多图，那将是一个奖励。

我对调用外部程序来生成图像的解决方案持开放态度。我想生成一系列动画帧，所以解决方案必须是自动化的。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-02T18:33:58.767

[Graphviz](http://www.graphviz.org/)工具似乎显示了不同的边缘。

例如，给出这个：

```
digraph G {
  A -> B;
  A -> B;
  A -> B;
  B -> C;

  B -> A;
  C -> B;
} 
```

产生`dot`：

![示例图](../Images/1c2970f4582982f0a2b5a2334e7ab908.png)

Graphviz 的输入语言非常简单，因此您可以自己生成它，尽管搜索“python graphviz”确实会出现几个库，包括[`graphviz`PyPI 上的一个模块](https://pypi.org/project/graphviz/)。

`graphviz`这是使用模块生成上述图表的python ：

```
from graphviz import Digraph

dot = Digraph()
dot.node('A', 'A')
dot.node('B', 'B')
dot.node('C', 'C')
dot.edges(['AB', 'AB', 'AB', 'BC', 'BA', 'CB'])

print(dot.source)
dot.render(view=True) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-24T00:10:34.693

使用 NetworkX，避免文件 I/O 并通过 pydot 使用 dot 进行布局的可能解决方法是：

```
import networkx as nx
import matplotlib.pyplot as plt
import matplotlib.image as mpimg
from io import BytesIO

g = nx.dodecahedral_graph()
d = nx.drawing.nx_pydot.to_pydot(g)
    # `d` is a `pydot` graph object,
    # `dot` options can be easily set
    # attributes get converted from `networkx`,
    # use set methods to control
    # `dot` attributes after creation
png_str = d.create_png()
sio = BytesIO() # file-like string, appropriate for imread below
sio.write(png_str)
sio.seek(0)
img = mpimg.imread(sio)
imgplot = plt.imshow(img)
plt.show()  # added to make the script wait before exiting 
```

为什么`seek(0)`需要，请参阅[如何从 python 中的字符串创建图像](https://stackoverflow.com/questions/1664861/how-to-create-an-image-from-a-string-in-python)

如果在 IPython (qt) 控制台中，则上述内容将内联打印，更直接的方法是：

```
import networkx as nx
from IPython.display import Image

g = nx.dodecahedral_graph()
d = nx.drawing.nx_pydot.to_pydot(g)

png_str = d.create_png()
Image(data=png_str) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-01-26T09:59:15.093

也许我有点晚了，但我找到了另一个解决你问题的方法。我发布它是为了如果有人遇到同样的问题，它会有所帮助。

通过将参数传递给函数，可以`networkx`使用 using以边缘单独出现的方式绘制有向图：`matplotlib`[`connectionstyle`](https://networkx.org/documentation/latest/reference/generated/networkx.drawing.nx_pylab.draw_networkx_edges.html)[`networkx.drawing.nx_pylab.draw`](https://networkx.org/documentation/latest/reference/generated/networkx.drawing.nx_pylab.draw.html)

```
import matplotlib.pyplot as plt
import networkx as nx

# create a directed multi-graph
G = nx.MultiDiGraph()
G.add_edges_from([
    (1, 2),
    (2, 3),
    (3, 2),
    (2, 1),
])
# plot the graph
plt.figure(figsize=(8,8))
nx.draw(G, connectionstyle='arc3, rad = 0.1')
plt.show()  # pause before exiting 
```

在这里你可以看到结果：

![结果](../Images/eee35255065540b44f2e586928646f11.png)

另请参阅about the argument的[文档`matplotlib.patches.ConnectionStyle`](https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.ConnectionStyle.html)`connectionstyle`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-30T13:26:13.953

您可以通过使用 matplotlib 接口来做到这一点：

```
G=nx.MultiGraph ([(1, 2),
   (2, 3),
   (3, 2),
   (2, 1)])
pos = {1: (0.4,0.5), 2: (0.5,0.5), 3: (0.6,0.5)}
nx.draw_networkx_nodes(G, pos, node_color = 'k', node_size = 100, alpha = 1)
ax = plt.gca()
for e in G.edges:
    ax.annotate("",
                xy=pos[e[0]], xycoords='data',
                xytext=pos[e[1]], textcoords='data',
                arrowprops=dict(arrowstyle="->", color="0.5",
                                shrinkA=5, shrinkB=5,
                                patchA=None, patchB=None,
                                connectionstyle="arc3,rad=rrr".replace('rrr',str(2*(e[2]-0.5))
                                ),
                                ),
                )
plt.axis('off')
plt.show() 
```

[![在此处输入图像描述](../Images/430987a0266c3f23351c4d76468c07e5.png)](https://i.stack.imgur.com/YYj57.png)

# c# - 仅字母数字到数字

> ID：10379464
> 
> 赞同：9
> 
> 时间：2012-04-30T06:35:52.927
> 
> 标签：c#, .net

寻找将字母数字转换为纯数字字符串的快速/有效方法

例如 +123-456/7890 变为 1234567890 等。

现有代码是

```
foreach(char c in str.ToCharArray() )
  if ( char.IsDigit(c) ) stringBuilder.Append(c);

return stringBuilder.ToString(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:03:19.747

LINQ 解决方案：

```
return new string(str.Where(char.IsDigit).ToArray()); 
```

不确定它是否更有效；至少它不是正则表达式！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T06:38:02.300

```
string str="+123-456/7890";
long onlyNumbers= Convert.ToInt64(Regex.Replace(str, @"\D", "")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T06:40:13.803

**是的，RegEx 速度更快，您可以使用RegexOptions.Compiled**使比较更快，以匹配负/正案例并将它们分开（如果可以存在此类字符串）

例如

```
Regex numberOnlyRegEx = new Regex(@"[^0-9]+", RegexOptions.Compiled);

if (!numberOnlyRegEx.IsMatch(str))
  return 0; //default value;

return Convert.ToInt32(numberOnlyRegEx .Replace(str, "[^0-9]+", "")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T06:43:10.627

这是找到的另一个解决方案

```
string justNumbers = new String(text.Where(Char.IsDigit).ToArray());
int numbers = Convert.ToInt32(justNumbers); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T07:15:02.347

在看到许多尝试在这种情况下不使用正则表达式的答案之后，我想说实际上正则表达式在这种特殊情况下的工作速度要快得多。[我尝试使用此代码段](https://stackoverflow.com/questions/3773473/any-tool-that-says-how-long-each-method-takes-to-run/3773538#3773538)计算执行时间

建议的方法

*   **Imran Rizvi**需要**1291 Ticks** [Ideone 说时间：0.06s 内存：36992 kB](http://ideone.com/0t29Z)
*   **Chuck Norris**需要**1336 Ticks** [Ideone 说时间：0.06s 内存：37080 kB](http://ideone.com/uTCHt)
*   **Andy**需要**12866 Ticks** [Ideone 说时间：0.04s 内存：36888 kB](http://ideone.com/1oPPW)
*   **COLD TOLD**需要**18855 Ticks**；[时间：0.03s 内存：36904 kB](http://ideone.com/l8idA)

**编辑：**这些给出了两个完全相反的输出，我不知道我们是否应该完全信任 Ideone 而不是 Visual Studio IDE。

# wpf - 在禁用的网格内启用特定按钮

> ID：10379466
> 
> 赞同：6
> 
> 时间：2012-04-30T06:36:00.247
> 
> 标签：wpf, button, grid, isenabled

我在网格中有一个按钮，其中包含许多其他按钮和控件，例如

```
<Grid IsEnabled="false">
    <Grid.ColumnsDefinition>
        <ColumnDefinition/>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnsDefinition>
    <Button Content="Run"/>
    <Button Grid.Column="1" Content="Test"/>
    <Button Grid.Column="2" Content="Cancel" IsEnabled="true"/>
</Grid> 
```

如您所见，网格已禁用，但应该启用其中的取消按钮。

我遇到的问题是，即使我将内部按钮设置为启用，它仍然处于禁用状态，可能是因为它的父级被禁用。

有什么方法可以覆盖此行为并强制启用按钮？

我将它用于后台运行较长进程的情况，因此应禁用除取消进程之外的所有 UI 操作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:54:35.803

不可以。将`IsEnabled`属性设置为 false 会导致禁用所有嵌套的可视元素。人们应该将元素的内容视为其存在的一部分。禁用元素意味着禁用其所有部分。

最简单的解决方法是更改​​标记以满足您的需求。我宁愿把*Cancel*按钮去掉，`Grid`这样它就不会受到`IsEnabled`属性的影响`Grid`

# java - 共享首选项上的空指针异常

> ID：10379474
> 
> 赞同：-2
> 
> 时间：2012-04-30T06:37:08.587
> 
> 标签：java, android, android-activity

我的活动中有一个方法，如何从另一个类（不是活动）调用该方法，因为我需要将参数传递给该类。如果我为我的活动创建一个对象，我会得到 nullPointerException，请任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:40:34.467

不要将您的数据放在 Activity 类中。一般从活动到活动 Bundle params 用于传递数据。但是，如果您告诉我您的确切问题，那么我们可能会找到任何解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:42:12.533

不知道我是否理解正确，但是，

您不能将 Activity 的引用传递给“其他”类方法吗？喜欢 ：

```
class YourClass {
   //bla bla bla

  public void yourMethod(Activity activity) 
  {
    if(null != activity)
     activity.method();
    else
     //something
  }
} 
```

干杯

# c# - 在没有 Intellisense 的情况下自定义 Entity Framework 4.1 Code First T4 模板

> ID：10379475
> 
> 赞同：0
> 
> 时间：2012-04-30T06:37:15.433
> 
> 标签：c#, entity-framework, code-generation, t4, codesmith

我正在自定义 EF CF T4 模板，而缺少 Intellisense 是一大痛苦。

有没有办法解决这个问题而不必切换到另一个 IDE，比如 CodeSmith？

我是否必须编写自己的 VS 扩展程序，还是有一种不那么放纵的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:02:36.040

检查 Visual Studio 库（扩展管理器）。VS 有多个扩展（如 Visual T4 或有形 T4 编辑器），它们将为 T4 模板添加更好的编辑器（使用 Intellisense）。

# java - 不能为字段分配内存吗？

> ID：10379478
> 
> 赞同：1
> 
> 时间：2012-04-30T06:37:42.250
> 
> 标签：java, android

我是 Java 新手。我在包含`myImageViews[0].v1 = new ImageView(context)`. 有什么问题吗？

```
class MyImageViews
{
    ImageView v1;
    ImageView v2;
}

MyImageViews[] myImageViews;

protected class MyLayout extends RelativeLayout {
    public MyLayout(Context context) {
        super(context);
        myImageViews = new MyImageViews[10];
        myImageViews[0].v1 = new ImageView(context); //runtime error at this line   
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:40:20.020

`MyImageViews`您已经创建了一个可以包含实例但尚未创建实例 的数组。`myImageViews[0]`一片空白。

尝试改变

```
myImageViews = new MyImageViews[10]; 
```

至

```
myImageViews = new MyImageViews[10];
for (int i = myImageViews.length; --i >= 0;) {
  myImageViews[i] = new MyImageViews();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:39:57.653

你要

```
 myImageViews[0] = new MyImageViews(); 
 myImageViews[0].v1 = new ImageView(context); 
```

# php - 创建/访问在 AJAX 调用上创建的 Javascript 全局变量

> ID：10379480
> 
> 赞同：0
> 
> 时间：2012-04-30T06:38:00.537
> 
> 标签：php, javascript, ajax

如何从 AJAX 调用创建 Javascript 全局变量？我目前收到一个未定义的错误。我已将代码剪切到相关部分。如果需要，我会添加更多。

```
#index.php
#(Calls form.php)
  if(ajaxRequest.status == 200){
    document.getElementById("response").innerHTML = "<script">; #new
    document.getElementById("response").innerHTML += ajaxRequest.responseText;
    document.getElementById("response").innerHTML += "</script">; #new
  }

#form.php
  print("<script>var message = 'Hello World';</script>");
  print("<input type=\"button\" onClick=\"printMessage()\" />");

#index.js
#(Sent to the browser before AJAX. Executed after AJAX call.)
  function printMessage(){
    alert(message);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:17:50.817

问题是`<script>`通过添加的标签`innerHTML`不会被执行。

看看：[可以用 innerHTML 插入脚本吗？](https://stackoverflow.com/q/1197575/511300)

如果您可以使用 JQuery，这将起作用：

```
$('#response').html(ajaxRequest.responseText); 
```

* * *

你也可以`<script>`像这样使用 JavaScript 创建标签：

```
var ajax_response='var message="Hello World!";';

var sc=document.createElement('script');
sc.text=ajax_response;

document.body.appendChild(sc);

alert(message); 
```

演示：http: [//jsfiddle.net/6ChZG/](http://jsfiddle.net/6ChZG/)

* * *

像这样的东西应该工作：

```
#index.php
#(Calls form.php)
  if(ajaxRequest.status == 200){
    var res=document.getElementById("response");
    res.innerHTML = "<input type=\"button\" onclick=\"printMessage()\" value=\"test\" />";
    var sc=document.createElement('script');
    sc.text=ajaxRequest.responseText;
    res.appendChild(sc);    
  }

#form.php
  print("var message = 'Hello World';");

#index.js
#(Sent to the browser before AJAX. Executed after AJAX call.)
  function printMessage(){
    alert(message);
  } 
```

演示：http: [//jsfiddle.net/XbM7v/](http://jsfiddle.net/XbM7v/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:25:21.017

尝试这个：

替换`var message`为`message`。未声明为的变量`var ..`将添加到全局范围。

并且，在ajax 调用完成`printMessage()` **后调用。**

```
 if( (ajaxRequest.status == 200 ) && ( ajaxRequest.readyState==4 ) ){
    document.getElementById("response").innerHTML = ajaxRequest.responseText;
    //printMessage() call here...
  } 
```

希望这可以帮助。

# apache-flex - 在服务器和手机之间发送数据

> ID：10379482
> 
> 赞同：2
> 
> 时间：2012-04-30T06:38:15.103
> 
> 标签：apache-flex, mobile, flexbuilder

我必须从服务器获取大量数据到移动应用程序。目前我正在以 XML 格式传递数据，这似乎可行。我想知道是否有另一种更好的方法来做到这一点。此外，我可能需要使用页面视图显示数据。

注意：使用 Flex builder 4.6 开发应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:41:04.777

当服务器设备之间存在数据传输时，JSON 总是更好的选择。它重量轻且易于解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:17:43.623

我个人使用 blazeds 作为带有 amf 通道的服务器，用于数据 tr/rx...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T09:48:53.223

对于大型数据集，您最好使用 AMF，这是一种二进制格式，将由 flash 播放器本地解码。

根据您在服务器端使用的技术，您需要一些将数据编码到 AMF 中的桥接器。（用于 Java 的 BlazeDS/GraniteDS，用于 PHP 的 AMFPHP，...）

# iphone - 在 UITableView 编辑模式中更改复选标记颜色？

> ID：10379484
> 
> 赞同：7
> 
> 时间：2012-04-30T06:38:38.453
> 
> 标签：iphone, ios, uitableview

在互联网上搜索了很长时间，但没有得到适当的答案。我将 UITableView 置于编辑模式并一次选择多行。它工作得很好，但我想将复选标记的颜色从红色更改为蓝色，就像在 iPhone 电子邮件应用程序中一样。

任何帮助，将不胜感激。

**编辑版本：**

这是我的代码...

在我的 ViewDidLoad 函数中：

```
- (void)viewDidLoad
{
   ...

   [deviceTableVIew setAllowsSelectionDuringEditing:YES];
   [deviceTableVIew setAllowsMultipleSelectionDuringEditing:YES];

   [super viewDidLoad];
} 
```

我有两个 UIButtons 设置 tableview 的编辑模式如下：

```
-(IBAction)control:(id)sender{
   btnControl.enabled = false;
   btnControl.hidden = true;        
   btnCancel.enabled = true;
   btnCancel.hidden = false;    
   stateToggleToolbar.hidden = false;    
   [self.deviceTableVIew setEditing:YES animated:YES];
}

-(IBAction)cancel:(id)sender{
   btnCancel.enabled = false;
   btnCancel.hidden = true;
   btnControl.enabled = true;
   btnControl.hidden = false;    
   stateToggleToolbar.hidden = true;
   [self.deviceTableVIew setEditing:NO animated:YES];
} 
```

UITableView 委托方法是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

   //setting up the cells here

   return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
     ...

     if ([tableView isEditing] == YES) {
       // Do Nothing
     }else{
       [self.navigationController pushViewController:viewController animated:YES];
     }

  }

  -(void) tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath{

  }

  - (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{

      return 3;
  } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-07-01T07:42:13.810

**一条线**解决方案在这里）

只需在**cellForRow:atIndexPath**方法中设置单元格**tintColor 。**

 **```
cell.tintColor = UIColor.red 
```

下面是快速代码：

```
func tableView(tableView: UITableView,
        cellForRowAtIndexPath indexPath: NSIndexPath)
        -> UITableViewCell 
```

{

```
 //get cell to configure from tableView
    let cell = tableView.dequeueReusableCellWithIdentifier("myCellIdentifier", forIndexPath: indexPath) as UITableViewCell

    //This line will change checkmark color of your awesome cell
    cell.tintColor = UIColor.redColor()

    // Configure cell  
    // ...

    //work is done! Let put the cell back to the tableView))
    return cell
} 
```

这是选定和未选定单元格的结果[![在此处输入图像描述](../Images/5541bb37ac0989603928dc3bff0a2dd2.png)](https://i.stack.imgur.com/Z88Co.png)：：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T10:09:07.500

您不能更改复选标记颜色，因为它不受支持。您可以做的是制作图像并在您的 cellForRowAtIndexPath 中添加以下代码

```
 - (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    selected=[[NSMutableArray alloc] init];
    for(int i=0;i<10;i++){
        [selected addObject:@"0"];
    }
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.text=[NSString stringWithFormat:@"hello %d",indexPath.row];
    if([[selected objectAtIndex:indexPath.row] isEqualToString:@"1"]){
        cell.accessoryType=UITableViewCellAccessoryCheckmark;
    }
    else{
        cell.accessoryType=UITableViewCellAccessoryNone;
    }
    // Configure the cell...

    return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([[selected objectAtIndex:indexPath.row] isEqualToString:@"0"]){
        [selected replaceObjectAtIndex:indexPath.row withObject:@"1"];
    }
    else{
        [selected replaceObjectAtIndex:indexPath.row withObject:@"0"];
    }
    [tbl reloadData];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-25T22:37:56.613

您可以更改复选标记图像。使用复选标记图像和颜色创建复选标记图像。然后在下面的代码中替换图像名称。这适用于 iOS 6 及更低版本

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
     [super setSelected:selected animated:animated];
     if (self.isEditing) {
          if (selected){
              for (UIView *subview in self.subviews) {
                if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]) {
                for (UIView *aView in subview.subviews) {
                    if ([NSStringFromClass([subview class]) isEqualToString:@"UITableViewCellEditControl"]) {
                        [aView.layer setContents:(id)[UIImage imageNamed:@"delete_check.png"].CGImage];
                }
             }
          }
       }
    }
  }
} 
```**

# aptana - Aptana Studio 3 作为插件无法启动

> ID：10379490
> 
> 赞同：2
> 
> 时间：2012-04-30T06:39:31.580
> 
> 标签：aptana

我在 Ubuntu 12.04 上通过 PPA 安装了 Eclipse 3.7.2，随后我点击了添加新软件和指向 64Bit Aptana studio 3 的链接。

它找到了插件并正确安装了它。

现在，当我启动 Eclipse 时，我收到此错误：

```
An internal error has occurred.
No more handlesNative code library failed to load. (java.lang.UnsatisfiedLinkError: /home/xxx/.eclipse/org.eclipse.platform_3.7.0_155965261/plugins/com.aptana.swt.webkitbrowser.linux.x86_64_1.0.0.1295409059/os/linux/x86_64/libcefjni.so: libjpeg.so.62: cannot open shared object file: No such file or directory) 
```

**更新：**

我想知道是不是因为我使用的是 Oracle 的 jdk 7 而不是 Sun jdk 6？这是Eclipse的日志文件

```
!SESSION 2012-04-30 07:48:06.985 -----------------------------------------------
eclipse.buildId=I20110613-1736
java.version=1.7.0_04
java.vendor=Oracle Corporation
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_GB
Command-line arguments:  -os linux -ws gtk -arch x86_64

!ENTRY org.eclipse.osgi 4 0 2012-04-30 07:48:07.951
!MESSAGE Application error
!STACK 1
java.lang.UnsatisfiedLinkError: Could not load SWT library. Reasons:
        no swt-gtk-3740 in java.library.path
        no swt-gtk in java.library.path
        Can't load library: /home/xxx/.swt/lib/linux/x86_64/libswt-gtk-3740.so
        Can't load library: /home/xxx/.swt/lib/linux/x86_64/libswt-gtk.so

        at org.eclipse.swt.internal.Library.loadLibrary(Library.java:285)
        at org.eclipse.swt.internal.Library.loadLibrary(Library.java:194)
        at org.eclipse.swt.internal.C.<clinit>(C.java:21)
        at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:63)
        at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)
        at org.eclipse.swt.widgets.Display.<clinit>(Display.java:132)
        at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:695)
        at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T22:29:47.633

我找到了解决方案：

库**libjpeg62**是必需的，否则会出现 java.lang.UnsatisfiedLinkError。

如果使用 OpenJDK 试试这个：

```
sudo apt-get install openjdk-7-jdk libjpeg62 libwebkitgtk-1.0-0 git-core 
```

如果使用 Oracle (sun) Java 试试这个：

```
sudo apt-get install libjpeg62 libwebkitgtk-1.0-0 git-core
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

[资源](http://www.samclarke.com/2012/04/how-to-install-aptana-studio-3-on-ubuntu-12-04-lts-precise-pangolin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:29:27.063

这是有关如何在 Ubuntu 12.04 LTS（Precise Pangolin）上安装 Aptana Studio 3 的完整指南。使用相同的解决方案提到了您遇到的相同错误。但可能对想要进行完整安装的人有所帮助。

[http://www.samclarke.com/2012/04/how-to-install-aptana-studio-3-on-ubuntu-12-04-lts-precise-pangolin/](http://www.samclarke.com/2012/04/how-to-install-aptana-studio-3-on-ubuntu-12-04-lts-precise-pangolin/)

# netty - 似乎 Netty HashedWheelTimer 在繁重的 CPU 负载下无法工作

> ID：10379491
> 
> 赞同：0
> 
> 时间：2012-04-30T06:39:41.473
> 
> 标签：netty

我们有一个基于 Netty 的应用程序，它在 CPU 负载过重时停止工作。我很确定原因是 HashedWheelTimer 以 100% 的 CPU 使用率跳过存储桶，并且从不触发其主要部分任务的执行。

这种高负载不时发生在我们的服务器上，并且是不可预测的，但不会持续很长时间。无论如何，这对于我们客户的设备来说已经足够了 DDoS 我们的服务器不会因为 HashedWheelTimer 故障而断开未经授权的设备。

所以问题是：我说的对吗？HashedWheelTimer 真的有这个问题吗？我们实现了计时器类，它将触发所有时间到的事件。而且我认为在标准的 Netty 发行版中需要这样的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:39:21.370

如果是这样，请在我们的[问题跟踪器](https://github.com/netty/netty)中打开一个错误。

# php - MySQL选择查询性能问题

> ID：10379500
> 
> 赞同：2
> 
> 时间：2012-04-30T06:40:20.937
> 
> 标签：php, mysql, sql

我正在使用一个表进行登录，该表有 2500 条记录。当我尝试登录时，加载需要近 30-40 秒。我正在使用 PHP 和 MySQL。我需要使 sql 查询更快地检查数据。欢迎解决方案提前谢谢请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:31:21.620

在定位性能问题的原因时，在您的应用程序堆栈中有很多事情需要考虑：

1.  数据库：索引、连接、查询形成
2.  介于两者之间的网络：路由问题、带宽、连接速度
3.  代码：检查您的代码结构是否没有造成不必要的延迟，例如，有些人的验证跨越客户端和服务器都在一个方法中，这会延长方法的生命周期。尝试将验证的核心逻辑放在数据库端，就像在存储过程中一样。尝试使用开销较小的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:27:42.137

您应该包含您的查询，以便我们对其进行检查。不要提取所有记录（例如，不要使用 Select * from users）然后循环查找匹配项。相反，使用 WHERE 子句将您的记录限制为（即一行）。那是

SELECT col1,col2,.. FROM Users WHERE username='username' AND password='password'

你可以试试看性能...

# c# - 将两个字符串合并为 DateTime

> ID：10379504
> 
> 赞同：1
> 
> 时间：2012-04-30T06:40:32.300
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我有两个变量。一个变量表示来自 windows phone 上的 datepicker 的日期，另一个变量表示来自 timepicker 的时间。现在我想将这两个字符串组合成一个字符串来表示整个值。

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:13:00.703

您可以[解析](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)它们的串联以创建您的时间：

```
var myTime = DateTime.Parse(DateValue + " " + TimeValue); 
```

或者如果你有你的 datetimepicker 和 timepicker：

```
var myTime = datetimepicker.Value.Date
                    .AddMilliseconds(timepicker.Value.TotalMiliseconds); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:42:01.287

**如果您只想组合字符串：**

```
 string combination = datetimepicker.ToString() + " " + timepicker.ToString(); 
```

更多： http: [//www.dotnetperls.com/string-append](http://www.dotnetperls.com/string-append)

```
datetimepicker.Hour = timepicker.Hour ;

datetimepicker.Second= timepicker.Second;

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:42:08.143

```
date.ToString() + " " + time.ToString(); 
```

# java - 在标题图像后的 iText 上插入图像

> ID：10379506
> 
> 赞同：2
> 
> 时间：2012-04-30T06:40:34.577
> 
> 标签：java, itext

我生成了一个事件，用于在我的 pdf 文档的每个页面上添加页眉和页脚，问题是当我向页面添加新图像时，新图像出现在页眉图像下方。我曾试图找到解决方案，但我找不到它，我尝试使用设置了 Alpha 通道的 png 上的图像，但问题并没有消失。

```
 class PieCabecera extends PdfPageEventHelper{
    public int numeroPagina;
    public Image imagen;
    public PdfPTable tabla;
    public PdfTemplate tpl;
    public Phrase cabecera;
    Font smallBold = new Font(Font.FontFamily.HELVETICA, 1, Font.BOLD);

    /**
     * 
     * @param writer
     * @param documento 
     */
    @Override
    public void onStartPage(PdfWriter writer, Document documento){
        numeroPagina++;
        try{
            imagen = Image.getInstance("D:/Users/Operador/Documents/NetBeansProjects/ServiciosWeb-dev/web/img/logoPDF.jpg");
            imagen.setAbsolutePosition(50, 0);
            PdfContentByte cbCabecera = writer.getDirectContent();
            tpl = cbCabecera.createTemplate(600, 250);
            tpl.addImage(imagen);
            cbCabecera.addTemplate(tpl, 0, 750);
            cabecera = new Phrase(cbCabecera + ".", smallBold);
            documento.add(cabecera);
            Paragraph parrafo0 = new Paragraph();
            parrafo0.setSpacingBefore(12);
            parrafo0.setSpacingAfter(14);
            documento.add(parrafo0);
            /*Línea de separación*/
            LineSeparator ls = new LineSeparator();
            documento.add(new Chunk(ls));
            Paragraph parrafo = new Paragraph();
            parrafo.setSpacingBefore(4);
            documento.add(parrafo);
        }catch(BadElementException e){
            LOGGER.log(Level.SEVERE, "Error: {0}", e.getStackTrace());
        }catch( IOException e){
            LOGGER.log(Level.SEVERE, "Error: {0}", e.getStackTrace());
        }catch( DocumentException e){
            LOGGER.log(Level.SEVERE, "Error: {0}", e.getStackTrace());
        }
    }

    /**
     * 
     * @param writer
     * @param documento 
     */
    @Override
    public void onEndPage(PdfWriter writer, Document documento){
        Rectangle rect = writer.getBoxSize("art");
        //header
        ColumnText.showTextAligned(writer.getDirectContent(),Element.ALIGN_CENTER, cabecera, rect.getRight(), rect.getTop(), 0);
        //footer
        ColumnText.showTextAligned(writer.getDirectContent(), Element.ALIGN_CENTER, new Phrase(String.format("Página %d", numeroPagina)), (rect.getLeft() + rect.getRight()) / 2, rect.getBottom() - 18, 0);
    }
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:12:17.887

您是否设置了边距`Document`以便考虑页眉和页脚的高度？

# flash - 在 Flash Builder 4.6 中：将 ArrayCollection 中对象的数据显示为标签

> ID：10379517
> 
> 赞同：0
> 
> 时间：2012-04-30T06:41:29.427
> 
> 标签：flash, apache-flex, flex4, flash-builder

我有一个包含 3 个字符串的对象，保存在 ArrayCollection 中。

```
package valueObjects
{
    public class User
    {
        public var rowid:String;
        public var userID:String;
        public var username:String;
    }      
} 
```

保存到名为“logins”的 ArrayCollection

我正在努力显示其中的单个条目。我本以为`<s:Label text="{logins.username}" />`可以解决问题，但显然不是，这只会引发错误并 `<s:Label text="{logins}" />`仅显示`[object User]`

我对 Flash Builder 还很陌生，我正在努力解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:44:37.150

您必须手动将第一个对象的用户名作为值分配给标签属性，您可以执行 {logins.getItemAt(0).username} 但这不安全，您有时可以使用空指针，因此最好手动分配..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T21:40:29.630

避免空指针的更高级方法

```
<Label text="{logins.length > 0 ? logins.getItemAt(0).username : Alert.show("There are + {logins.length} + Individuals")}" /> 
```

# sql-server - 简单的选择查询耗时太长

> ID：10379519
> 
> 赞同：0
> 
> 时间：2012-04-30T06:41:33.897
> 
> 标签：sql-server

我有一个表，某周有大约 18k 行，另一周有 22k 行。

我正在使用视图和索引来检索数据，就像这样

```
SELECT TOP 100 * FROM my_view 
WHERE timestamp BETWEEN @date1 AND
@date2 
```

但不知何故，有 22k 的一周检索数据的速度更快（大约 3-5 秒），而另一个则至少需要一分钟。这些导致我的 wcf 超时。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:38:02.263

在时间戳字段上应用索引。

如果您已经有时间戳索引，请检查执行计划中用于此查询的索引。

索引提示只会在您的查询涉及连接表的情况下发挥作用，并且用于连接到另一个表的列与多个索引匹配。在这种情况下，数据库引擎可能会选择使用一个索引来进行连接，并且从调查中您可能会知道，如果它使用另一个索引，则查询将执行得更好。在这种情况下，您提供索引提示，告诉数据库引擎使用哪个索引。

示例代码使用索引提示：

```
select [Order].[OrgId], [OrderDetail].[ProductId]
  from [Order] 
 inner join [OrderDetail] **with(index(IX_OrderDetail_OrderId))** on [Order].[OrderId] = [OrderDetail].[OrderId] 
```

# c++ - 非静态全局对象与指向动态对象的全局指针

> ID：10379522
> 
> 赞同：1
> 
> 时间：2012-04-30T06:42:03.730
> 
> 标签：c++, global-variables, object-initializers, non-static

出现以下无法解释的行为：

# 情况1：

`a.cpp`编译为 .dll 库并在 main() 中使用`main.cpp`

```
Bar b; 

//constr
Bar::Bar(){
  //... initialize members
}

//private library init
Bar::init(){ ...}

//public API init
bool lib_init(){
  b.init();
} 
```

据我了解，这种方法可能会由于全局变量的未定义初始化行为而失败。

# 案例二：

`a.cpp`编译为 .dll 库并在 main() 中使用`main.cpp`

```
Bar* b; 

//constr
Bar::Bar(){
  //... initialize members
}

//private library init
Bar::init(){ ...}

//public API init
bool lib_init(){
  b = new Bar;
  b->init();
} 
```

这一次它起作用了，当使用动态分配时。

# 案例3（最令人惊讶）

`a.cpp`编译为 .dll 库并在 main() 中使用`main.cpp`

```
static Bar& getBarObj()
{
  static Bar g_objBar;
  return g_objBar;
}

//constr
Bar::Bar(){
  //... initialize members
}

//private library init
Bar::init(){ ...}

//public API init
bool lib_init(){
  getBarObj().init();
} 
```

与可能未定义 Bar obj 实例化的情况 1 相反，在情况 3 中，它是“根据请求”使用的。然而，案例 3 提供了与案例 1 相同的行为。

我的问题是……谁能解释这里发生了什么？一切都是用 VC2008 发布模式构建的（这个项目没有调试模式选项）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:24:29.340

情况 1 可能会失败，因为 的构造`b`本质上是由链接顺序决定的（这不受 C++ 规范的控制：它是 C++ 的未定义行为，但行为可以由链接器定义！）无论如何，一旦你调用`lib_init` `b`被授予在同一个模块中构建`lib_init`和离开。`b`

情况 3 在需要时构造 b，并将在终止时以构造相反的顺序将其与所有其他静态和全局对象一起销毁。这可能会给旧的编译器带来一些问题，如果`Bar::Bar()`调用内部`foo_init()`有一个静态`Foo`：你需要`Bar`并且`Bar`需要`Foo`，但是在mat 仍然需要它之前`Bar`创建`Foo`并`Foo`销毁。`Bar`自 2003 年规范以来，这一事实应该不再发生。需要在构造完成后进行销毁调度（因此`Foo`ctor 在`Bar`ctor 之前完成，因此 bar dtor 将在`Foo`dtor 之前终止时被调用。

案例 2 是“丑陋的”：像案例 3（按需创建）一样工作，但有两个问题：

*   指针应该是静态的，只是为了避免在多次调用 lib_init() 和...的情况下创建多个对象
*   谁会摧毁巴尔？Os 将在终止时收回内存，但不会调用 dtor。

案例 2 可能更好地定义为

```
void lib_init()
{
    static std::unique_ptr<Bar> p(new Bar);
    p->init();
} 
```

但这会让它像案例3一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:56:46.177

C++ 中未定义来自不同文件的全局变量的初始化顺序（您肯定有这种情况）。这意味着如果您依赖于`Bar b`在不同编译单元中的全局初始化期间构建，您的程序是未定义的。

为什么案例 3 应该起作用，是因为它强制您使用一个函数来引用，`Bar b`并且该函数保证`Bar b`在该函数返回时已经构造了该函数。

如果您告诉我们您得到了什么确切的未定义行为，并提供最少量的代码进行分析，我们可能会提供进一步的帮助。

PS您的`Bar`构造函数是否依赖于已构造的另一个全局变量？

# python - html5lib 返回

> ID：10379524
> 
> 赞同：0
> 
> 时间：2012-04-30T06:42:08.240
> 
> 标签：python, html5lib

在教程的第一步中，`html5lib`我看到了相当混乱的行为。

[文档](http://code.google.com/p/html5lib/wiki/UserDocumentation)告诉：

```
import html5lib
f = open("mydocument.html")
doc = html5lib.parse(f) 
```

> 这将返回自定义“simpletree”格式的树。

作为文件，我有一个普通的 html 文档。但就我而言，这是：

```
<None>
>>> doc is None
False 
```

我相信这不好，但我不知道会发生什么。

# 编辑

`read`如果我在打开的文件上调用方法，它会以字符串形式返回文件：

```
f = open("mydocument.html")
f.read()
# returns string with html 
```

之后`doc = html5lib.parse(f)`，`f.read()`返回空字符串，就像文件已经被读取的文件一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:28:11.273

*   这`<None>`并不意味着您的文档没有被解析，它只是意味着您的文档没有名称。如果你这样做

    ```
    doc.name = "test"
    print(doc) 
    ```

    它应该显示`<test>`

*   `parse`也可以将字符串作为参数，在这种情况下它会为你加载文件，不需要你自己打开它。

*   尝试`print(doc.toxml())`

# java - 尝试从 JTextfield 获取输入并在另一种方法中使用

> ID：10379527
> 
> 赞同：2
> 
> 时间：2012-04-30T06:42:41.957
> 
> 标签：java, swing

我在尝试存储`JTextfield`位于方法 GuessGame() 中的值并将它们放入位于 findMiddleNumber() 的数组中时遇到问题。程序结束时我得到的只是用户的最后一个输入，即随机数。

有人可以看看我的代码，看看我哪里出错了

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class GuessGame extends JFrame
{
Container container;
int currentDistance;

int inputGuess;
int lastDistance;
int medianValue = 40;
int middleNumber;
int positionIndex = 5;

private JButton newGame;
private JLabel message;
private JLabel prompt; 
private JLabel numberInput;
private JTextField guessInput;
private int countGuess;
private int randomNumber;

public GuessGame()
{
    super( "Play Guess A Number Game Version 2.1" );
    setLayout( new FlowLayout() );

    countGuess = 0;

    prompt = new JLabel( "A random number between N and 100 has been"
            + " selected." );
    numberInput = new JLabel( "Write your number and press enter key: ");

    guessInput = new JTextField( 5 );
    guessInput.addActionListener( new GuessHandler() );
    message = new JLabel( "The result will be shown here." );

    newGame = new JButton( "Start New Game" );
    newGame.addActionListener( new ActionListener()
    {
        @Override
        public void actionPerformed( ActionEvent event )
        {

            guessInput.setText("");
            guessInput.setEditable(true);

            generateNumber();

        }
    });

    container = getContentPane();
    container.add( prompt);
    container.add( numberInput );
    container.add( guessInput );
    container.add( message );
    container.add( newGame );

    setSize( 380, 150 );
    setVisible( true );

    generateNumber();

}

private void generateNumber()
{
    randomNumber = ( int ) ( Math.random() * 93 + 7 );
    System.out.println( randomNumber );

}        

public void processGuessedNumber( int usersGuess )
{
    countGuess++;

    if ( countGuess == 1 )
    {
        lastDistance = Math.abs( usersGuess - randomNumber );

        if ( usersGuess > randomNumber )
            message.setText( "Higher than correst guess." );
        else
            message.setText( "Lower than correct guess." );

    }

    else 
    {
        currentDistance = Math.abs( usersGuess - randomNumber );

        if ( usersGuess > randomNumber )
        {
            message.setText( "Higher than correct guess." );

            lastDistance = currentDistance;

        }

    else if ( usersGuess < randomNumber )
    {
        message.setText( "Lower than correct guess." );

        lastDistance = currentDistance;

    }

        else
        {
            message.setText( "Congratulations, your guess is correct!" );

            guessInput.setEditable( false );
            countGuess = 0;

            findMiddleNumber();
        }
    }
}
public void findMiddleNumber()
{
    int num_of_guesses = 0; 

    Scanner inputs = new Scanner( System.in );

    int [] testArray = new int[ 20 ]; 

    do 
    { 
        if ( inputGuess != randomNumber ) 
        { 
            inputGuess  = inputs.nextInt();      

        } 
        else  
            testArray[ num_of_guesses ] = inputGuess; 
            num_of_guesses++; 

            if ( inputGuess >= randomNumber) 
            { 
                break;      
            }  

    }  
    while ( inputGuess != randomNumber); 

    middleNumber = testArray[( num_of_guesses)/ 2]; 

    System.out.printf( "\nMiddle is: " + middleNumber);

    finalOutput();
}

public void finalOutput()
{
    JOptionPane.showMessageDialog( null,"Congratulations, your guess "
        + "is correct." + "\n\n1\. Middle number from all guessed "
        + "numbers by the user is: " + middleNumber + "\n\r2\. Median "
        + " value of all guessed numbers by the user is: " 
        + medianValue + "\n\r3\. A position (array index) of correctly "
        + "guessed number in sorted array is: " + positionIndex, 
        "Final Output", JOptionPane.PLAIN_MESSAGE );  

}

public static void main( String [] args )
{
    GuessGame application = new GuessGame();
    application.setDefaultCloseOperation( EXIT_ON_CLOSE );

}        

class GuessHandler implements ActionListener
{
    @Override
    public void actionPerformed ( ActionEvent event )
    {
        inputGuess = Integer.parseInt( guessInput.getText() );
        processGuessedNumber( inputGuess );

    }
}   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:28:07.890

您需要在用户到来时获取用户的输入并存储它们。在你`actionPerformed()`正在谈论的值中`JTextField`，将这些值存储在一个数组`test[]`中，然后你调用你的`ProcessGuessedNumber`，然后如果它匹配，你的`findmidlenumber`被调用，*我不知道为什么你过去常常从其中获取输入`system.in`并将它们存储在一个数组中`inputGuess`匹配`randomNumber`，*所以很明显你的`inputGuess`最新值将是最后一个，即`randomNumber`.

当他输入时将用户输入数组中，`middleNumer()`如果它等于randomNumber，控件将自动移动到您的位置。因此，在您的 GuessHandler 中`actionPerformed()`：

```
 public void actionPerformed ( ActionEvent event )
{
    inputGuess = Integer.parseInt( guessInput.getText() );
    test[i]= inputGuess;
    processGuessedNumber( inputGuess );
    i++;

} 
```

然后使用这个数组来计算你想要的任何东西，比如：

```
middleNumber = test[( i)/ 2]; 
System.out.printf( "\nMiddle is: " + middleNumber);
finalOutput(); 
```

**`Complete Code`**

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class GuessGame extends JFrame {
Container container;
int currentDistance;

int inputGuess;
int lastDistance;
int medianValue = 40;
int middleNumber;
int positionIndex = 5;
int test[] = new int[20];
int num_of_guess = 0;

private JButton newGame;
private JLabel message;
private JLabel prompt;
private JLabel numberInput;
private JTextField guessInput;
private int countGuess;
private int randomNumber;

public GuessGame() {
    super("Play Guess A Number Game Version 2.1");
    setLayout(new FlowLayout());

    countGuess = 0;

    prompt = new JLabel("A random number between N and 100 has been"
            + " selected.");
    numberInput = new JLabel("Write your number and press enter key: ");

    guessInput = new JTextField(5);
    guessInput.addActionListener(new GuessHandler());
    message = new JLabel("The result will be shown here.");

    newGame = new JButton("Start New Game");
    newGame.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent event) {

            guessInput.setText("");
            guessInput.setEditable(true);

            generateNumber();

        }
    });

    container = getContentPane();
    container.add(prompt);
    container.add(numberInput);
    container.add(guessInput);
    container.add(message);
    container.add(newGame);

    setSize(380, 150);
    setVisible(true);

    generateNumber();

}

private void generateNumber() {
    randomNumber = (int) (Math.random() * 93 + 7);
    // randomNumber = 45;
    System.out.println(randomNumber);

}

public void processGuessedNumber(int usersGuess) {
    countGuess++;

    if (countGuess == 1) {
        lastDistance = Math.abs(usersGuess - randomNumber);

        if (usersGuess > randomNumber)
            message.setText("Higher than correst guess.");
        else
            message.setText("Lower than correct guess.");

    }

    else {
        currentDistance = Math.abs(usersGuess - randomNumber);

        if (usersGuess > randomNumber) {
            message.setText("Higher than correct guess.");

            lastDistance = currentDistance;

        }

        else if (usersGuess < randomNumber) {
            message.setText("Lower than correct guess.");

            lastDistance = currentDistance;

        }

        else {
            message.setText("Congratulations, your guess is correct!");

            guessInput.setEditable(false);
            countGuess = 0;

            findMiddleNumber();
        }
    }
}

public void findMiddleNumber() {
    /*
     * int num_of_guesses = 0;
     * 
     * Scanner inputs = new Scanner( System.in );
     * 
     * int [] testArray = new int[ 20 ];
     * 
     * do { if ( inputGuess != randomNumber ) {
     * 
     * 
     * {inputGuess = inputs.nextInt();
     * System.out.println("inputGuess:"+inputGuess); }
     * 
     * 
     * } else testArray[ num_of_guesses ] = inputGuess;
     * System.out.println("testarr "
     * +num_of_guesses+" :"+testArray[num_of_guesses]); num_of_guesses++;
     * 
     * if ( inputGuess >= randomNumber) { break; }
     * 
     * } while ( inputGuess != randomNumber);
     */

    middleNumber = test[(num_of_guess) / 2];

    System.out.printf("\nMiddle is: " + middleNumber);

    finalOutput();
}

public void finalOutput() {
    JOptionPane.showMessageDialog(null, "Congratulations, your guess "
            + "is correct." + "\n\n1\. Middle number from all guessed "
            + "numbers by the user is: " + middleNumber + "\n\r2\. Median "
            + " value of all guessed numbers by the user is: "
            + medianValue + "\n\r3\. A position (array index) of correctly "
            + "guessed number in sorted array is: " + positionIndex,
            "Final Output", JOptionPane.PLAIN_MESSAGE);

}

public static void main(String[] args) {
    GuessGame application = new GuessGame();
    application.setDefaultCloseOperation(EXIT_ON_CLOSE);

}

class GuessHandler implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent event) {
        inputGuess = Integer.parseInt(guessInput.getText());
        // System.out.println("inputGuess"+inputGuess);
        test[num_of_guess] = inputGuess;
        //System.out.println(num_of_guess + ":" + test[num_of_guess]);
        processGuessedNumber(inputGuess);
        num_of_guess++;

    }
}
} 
```

# ssl - 使用代理的 https 请求

> ID：10379528
> 
> 赞同：0
> 
> 时间：2012-04-30T06:42:53.233
> 
> 标签：ssl, proxy

假设您想对某个网站执行 https 请求，但中间有一个代理。

在用户代理使用 HTTP CONNECT 方法（如[http://www.web-cache.com/Writings/Internet -草稿/草稿-luotonen-web-proxy-tunneling-01.txt](http://www.web-cache.com/Writings/Internet-Drafts/draft-luotonen-web-proxy-tunneling-01.txt)）。

现在我的问题如下：在代理打开与目标 Web 服务器的 SSL 连接后，它是否也应该将处理与客户端连接的套接字也升级到 SSL？如果是这样，它如何在不嗅探实际内容的情况下将数据包转发到服务器？

我的意思是，如果代理实际上从 SSL 客户端套接字读取数据并将它们转发到 SSL 服务器套接字，则数据不会被加密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:06:30.043

代理有一个向客户端开放的明文连接，通过它接收 CONNECT 命令。它打开到服务器的明文连接。此后，它只是在两个方向上复制字节。来自客户端和服务器的字节都是 SSL，所以这在代理不知道密文中的内容的情况下工作。

# ruby - Watir-webdriver：脚本在 Firefox 上运行，但在 Chrome 或 Opera 上失败。为什么？

> ID：10379529
> 
> 赞同：0
> 
> 时间：2012-04-30T06:42:54.980
> 
> 标签：ruby, automated-tests, watir, watir-webdriver

我正在 ark.com 上对此进行测试..

以下代码非常适用于带有 watir-webdriver 的 firefox，但分别给我 google chrome 和 opera 浏览器的错误。

继承人的代码：

```
require "rubygems"
require "watir-webdriver"

b = Watir::Browser.new :ff
b.goto "http://www.ark.com"

# Signing in
7.times{b.link(:text, "Sign in").flash}
sleep 3
b.link(:text, "Sign in").click
sleep 3
# Popup
b.text_field(:name, "login_email").set "email@gmail.com"
b.send_keys :tab
b.text_field(:name, "login_password").set "password"
b.button(:value, "Sign in").click
puts b.title 
```

如下更改代码会给我错误：

```
b = Watir::Browser.new :chrome 
```

或者

```
b = Watir::Browser.new :opera 
```

我收到以下错误消息：

```
You may only interact with visible elements (Selenium::WebDriver::Error::ElementNotVisibleError) 
```

我尝试了以下堆栈溢出建议但无济于事[如何使用 Watir::Waiter::wait_until 强制 Chrome 等待？](https://stackoverflow.com/questions/4356281/how-do-i-use-watirwaiterwait-until-to-force-chrome-to-wait)

此外，我的代码在 Firefox 中完美运行，但在其他浏览器中却没有，为什么会这样？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:17:30.067

如其他一些[帖子](https://stackoverflow.com/questions/6126311/setting-browser-window-size-in-watir-webdriver)中所述，您可以使用以下命令全屏显示浏览器：

```
screen_width = b.execute_script("return screen.width;")
screen_height = b.execute_script("return screen.height;")
b.driver.manage.window.resize_to(screen_width,screen_height)
b.driver.manage.window.move_to(0,0) 
```

然后就像 anonygoose 说的那样，登录链接应该在那里（假设你的屏幕不是太小）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T14:08:36.437

在 Chrome 和 Firefox 中查看该网站，我会说它存在某种错误或不需要的功能。

如果您使用的网络浏览器宽度太窄，则注册按钮会完全消失。

我会说这就是为什么你会遇到奇怪的错误。

通过在 Chrome 浏览器启动后立即将其最大化来对此进行测试。根据我的测试，这允许找到注册按钮。

我不确定默认情况下最大化任一浏览器的方法，但也许这里的其他人会知道或能够建议一种方法来解决它。

# sql-server-2005 - SQL Server 2005 中的 SELECT 查询

> ID：10379533
> 
> 赞同：0
> 
> 时间：2012-04-30T06:43:13.060
> 
> 标签：sql-server-2005

我在 SQL Server 2005 中的 4 行和 1 列中有以下值。

```
7,75,8,95,55
8,75,8,95,66 
6,75,86,7,55 
74,75,84,95,55 
```

如果我在 SQL 查询中传递值 7，我需要获取值为 7 的确切行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:55:24.347

据推测，您希望将“7”匹配为一个数字，但可能*不是*包含数字“7”的其他数字（例如，75）。

你用这个做的任何事情都会很丑陋，所以如果可能的话，你最好简单地改变桌子。我想如果你别无选择，你可以这样做：

```
select whatever from your_table where 
     your_column like '7,%' or 
     your_column like '%,7,% or 
     your_column like '%,7' 
```

第一个涵盖当“7”是组中的第一个数字时。第二个覆盖当它位于组的中间时，第三个覆盖它是组中的最后一个。

这很难看，除非您处理*非常*少量的数据，否则几乎可以肯定它也会非常缓慢。我再重复一遍：改用基本设计，你真的会好*很多。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:55:45.597

```
declare @T table
(
  Col varchar(20)
)

insert into @T values
('7,75,8,95,55'),
('8,75,8,95,66'), 
('6,75,86,7,55'), 
('74,75,84,95,55')

declare @Val varchar(10)
set @Val = '7'

select Col
from @T
where ','+Col+',' like '%,'+@Val+',%' 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/68328)

# html - 如何阻止文本从输入中溢出

> ID：10379536
> 
> 赞同：-1
> 
> 时间：2012-04-30T06:43:28.743
> 
> 标签：html, textarea

假设我在存储在数据库中的文本区域框中输入 5000 个单词，然后将其调用到页面上。我该怎么做才能让它停在某个点并从下一行开始旅行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:12:13.313

您可以使用`word_wrap`

```
$formated_string = wordwrap($str,1000,"<br>",true); 
```

[http://www.php.net/manual/en/function.wordwrap.php](http://www.php.net/manual/en/function.wordwrap.php)

# php - PHP 使用正则表达式查找和删除字符串中的变量

> ID：10379537
> 
> 赞同：0
> 
> 时间：2012-04-30T06:43:40.060
> 
> 标签：php, regex

使用 PHP，我正在打开一个文件，它看起来像这样：

```
var people = {
vikram: { time1: [ '8:00am', '8:20am', '8:40am', '9:00am',  ], time2: [ '10:20am', '10:40am', '11:00am', '11:20am',  ], time3: [ '8:00am', '8:20am', '8:40am',  ], }}; 
```

我要删除的变量将包含一个时间（例如上午 8:00），我会知道 timeIndex（例如 time1）。我也想保持所有其他时间不变。

例如，如果我将变量设置为上午 8:40，我希望正在创建的新文件如下所示：

```
var people = {
vikram: { time1: [ '8:00am', '8:20am', '9:00am',  ], time2: [ '10:20am', '10:40am', '11:00am', '11:20am',  ], time3: [ '8:00am', '8:20am', '8:40am',  ], }}; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:47:42.307

您显示的格式表示 JSON 格式的字符串。您可以使用 json_decode() 函数从字符串创建一个数组，然后遍历该数组并取消设置（）您不需要的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:49:43.837

您可以`preg_replace()`为此使用：

```
<?php
$filename = 'yourfile.js';
$search = '8:40am';

$content = file_get_contents( $filename );

$pattern = '/(\s*time1:\s*\[.*)([\'"]' . 
           preg_quote($search) .
           '[\'"],?\s*)(.*\])/U';

$content = preg_replace( $pattern, '\1\3', $content ); 

file_put_contents( $filename, $content );
?> 
```

[这是对我在类似主题上](https://stackoverflow.com/questions/10345846/how-to-remove-a-particular-part-of-a-string-in-a-javascript-file)回答您的上一个问题的代码示例的修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:34:16.433

这是我的做法。基本上，我使用 json_decode 将您的 json 解析为 php 对象。但是，我还发现您的输入不是 php 格式正确的 json（[参见示例 3](http://php.net/manual/en/function.json-decode.php)）。虽然我的代码看起来不太好和通用，但我希望它对你有所帮助。

```
<?php
$json_data = '{
    "vikram": {
        "time1": ["8:00am", "8:20am", "8:40am", "9:00am"], 
        "time2": ["10:20am", "10:40am", "11:00am", "11:20am"], 
        "time3": ["8:00am", "8:20am", "8:40am"]
    }
}';

$obj = json_decode($json_data);

//var_dump($obj->vikram);

$value = "8:40am";
$time1 = "time1";

$delete_item;

foreach($obj->vikram as $name=>$node)
{
    foreach($node as $i => $time)
    {
        if($time==$value && $name=$time1)
        {
            $delete_item = $i;
        }
    }
}

unset($obj->vikram->time1[$delete_item]);
var_dump($obj->vikram); 
```

# ruby-on-rails - RSpec 对页面上的元素抛出误报

> ID：10379538
> 
> 赞同：2
> 
> 时间：2012-04-30T06:43:42.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, tdd

我在试图弄清楚我的应用程序目前正在发生的事情时遇到了一些实际问题。我正在努力确保我可以根据用户用于注册的方法（OAuth 与否）在“编辑个人资料”页面上向用户显示不同的内容。

在浏览器中手动测试时，我只需将 OAuth 属性添加到我的用户模型并对其进行测试，就可以正常工作。

但是，在 RSpec 中我无法正确测试。事实上，无论我告诉它在页面上寻找什么元素，它都会声称它们实际上就在那里。

```
describe "edit user" do

  let(:user) { FactoryGirl.create(:user) }
  before { sign_in user }

  describe "correct edit account options shown to normal users" do
    before do
      visit edit_user_registration_path(:user) 
    end

    it { should have_selector('h2',      text: 'Edit User') }
    it { should have_selector('input',   id:   'user_names')}
    it { should have_selector('input',   id:   'user_email', value: user.email) }
    it { should have_selector('input',   id:   'user_password') }
    it { should have_selector('input',   id:   'user_password_confirmation') }
    it { should have_selector('input',   id:   'user_current_password') }
    it { should have_selector('input',   type: 'submit') }
  end

  describe "correct edit account options shown to oauth users" do

    before do 
      user.update_attributes!(:oauth => true)
      visit edit_user_registration_path(:user)
    end

    it { should have_selector('h2',          text: 'Edit User') }
    it { should have_selector('input',       id:   'user_names')}
    it { should_not have_selector('input',   id:   'user_email') }
    it { should_not have_selector('input',   id:   'users_password') }
    it { should_not have_selector('input',   id:   'users_password_confirmation') }
    it { should_not have_selector('input',   id:   'user_current_password') }
    it { should have_selector('input',       type: 'submit') }
  end
end 
```

我的 RSpec 集成测试的完整代码在这里：[https ://gist.github.com/2556055](https://gist.github.com/2556055)

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T02:14:42.890

很幸运能从#rubyonrails 的人那里解决这个问题

原因是 have_selector 不接受多个参数（因此为什么 ID 没有区别）。因此，它们应该被替换为 have_css 方法。

所以正确的实现是：

```
describe "edit user" do
let(:user) { FactoryGirl.create(:user) }
before { sign_in user }

describe "correct edit account options shown to normal users" do
 before do
    visit edit_user_registration_path(:user) 
 end
 it { should have_selector('h2',      text: 'Edit User') }
 it { should have_css('input#user_name')}
 it { should have_css('input#user_email') }
 it { should have_css('input#user_password') }
 it { should have_css('input#user_password_confirmation') }
 it { should have_css('input#user_current_password') }
 it { should have_selector('input',   type: 'submit') }
end

describe "correct edit account options shown to oauth users" do

before do 
  user.update_attributes!(:oauth => true)
  visit edit_user_registration_path(:user)

end

  it { should have_selector('h2', text: 'Edit User') }
  it { should have_css('input#user_name')}
  it { should_not have_css('input#user_email') }
  it { should_not have_css('input#users_password') }
  it { should_not have_css('input#users_password_confirmation') }
  it { should_not have_css('input#user_current_password') }
  it { should have_selector('input', type: 'submit') }
 end
 end 
```

# stack - 堆栈的实际应用

> ID：10379540
> 
> 赞同：4
> 
> 时间：2012-04-30T06:43:46.460
> 
> 标签：stack

我试图在现实生活中思考堆栈概念的一些非 CS 相关应用，不像函数调用、解析、DFS 等，但想不出任何。对于队列，我可以想到几个，例如工厂的装配线，银行的客户服务等，但我无法想到仅在我们日常生活的非 CS 部分中通过推送和弹出来工作的类似队列。有人可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T06:56:55.380

你的工作。

在裁员时，许多公司受协议和法规的约束，使用“后进先出”来决定谁去谁留下。

会计师喜欢这样，因为较短的服务等同于较低的冗余支付。工会或其他员工代表喜欢这样，因为它消除了选择中任何偏袒、偏见或受害的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:49:07.130

有一个真实的例子甚至使用了先进先出和后进先出的术语：会计。

每当一家公司购买供应品时，它都会将这些供应品计入费用，而不是在购买时计入费用，而是在使用时计入费用。例如，一家公司今天可能购买了一千支铅笔，但使用了一年多，出于财务报告的目的，它可以报告一年多的时间。

但是，如果公司今天和一个月后购买铅笔，而价格在此期间发生了变化怎么办？出于财务报告的目的，公司必须在使用铅笔时为其选择价格。一年后，由于它使用了最后一千支铅笔，它可以使用今天铅笔的价格，也可以使用下个月铅笔的价格。

会计准则并没有给公司补价的余地，因此成本必须来自实际供应（而且你不能用一个月的价格来支付两批供应的费用），但在美国至少有一些为会计目的订购供应品的余地。在 FIFO 下，假设铅笔在队列中：最旧的铅笔首先被花费。在 LIFO 下，假设铅笔是堆叠的：最新的铅笔首先被花费。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T06:53:22.913

嗯，嗯，之所以叫“栈”，是因为它就像是桌子上的一沓纸。您将文件“放在”堆栈的顶部（推）并从顶部“取出”它们（弹出）。

# javascript - 想要显示打印预览

> ID：10379552
> 
> 赞同：0
> 
> 时间：2012-04-30T06:44:45.730
> 
> 标签：javascript, jquery, asp.net, print-preview

我想显示打印预览，所以我选择使用[这个插件](https://github.com/etimbo/jquery-print-preview-plugin)。

我已将其添加到我的代码中：

```
<%@ Page language="c#" AutoEventWireup="false" Inherits="System.Web.UI.Page" %>
<%@ Register TagPrefix="CP" TagName="TitleBar" Src="WebUserControl.ascx" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" > 
<html>
  <head>
    <title>MyPage</title>
    <link href="css/print-preview.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print" />
    <script type="text/javascript" src="jquery.tools.min.js"></script>
    <script src="jquery.print-preview.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        $(function () {

            /*
            * Initialise print preview plugin
            */
            // Add link for print preview and intialise
            $('#aside').prepend('<a class="print-preview">Print this page</a>');
            $('a.print-preview').printPreview();

            // Add keybinding (not recommended for production use)
            $(document).bind('keydown', function (e) {
                var code = (e.keyCode ? e.keyCode : e.which);
                if (code == 80 && !$('#print-modal').length) {
                    $.printPreview.loadPrintPreview();
                    return false;
                }
            });
        });
    </script>
  </head>
  <body>
  <form id="form1" runat="server">
  <CP:TitleBar Title="User Control Test" TextColor="green" Padding="10" runat="server" />
  <div id="aside"></div>
  </form>
  </body>
</html> 
```

在`UserControl`我这样做：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="WebUserControl.ascx.cs" Inherits="WebUserControl" %>
<script src="jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript">
   $(document).ready(function () {

    $("p").text("The DOM is now loaded and can be manipulated.");
});
</script>
<p>Not loaded yet.</p>
<table>
<tr>
    <td>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    </td>
</tr>
</table> 
```

问题是，当我在中添加脚本时`UserControl`，`Print-Preview-Plugin`它不起作用。

当我从作品中删除脚本时，`UserControl`效果`print-preview-plugin`很好。

我的问题是，为什么当我将脚本添加到 UserControl 时插件不起作用？我应该如何调用打印预览插件文件代码？

```
/*!
 * jQuery Print Previw Plugin v1.0.1
 *
 * Copyright 2011, Tim Connell
 * Licensed under the GPL Version 2 license
 * http://www.gnu.org/licenses/gpl-2.0.html
 *
 * Date: Wed Jan 25 00:00:00 2012 -000
 */

(function($) { 

    // Initialization
    $.fn.printPreview = function() {
        this.each(function() {
            $(this).bind('click', function(e) {
                e.preventDefault();
                if (!$('#print-modal').length) {
                    $.printPreview.loadPrintPreview();
                }
            });
        });
        return this;
    };

    // Private functions
    var mask, size, print_modal, print_controls;
    $.printPreview = {
        loadPrintPreview: function() {
            // Declare DOM objects
            print_modal = $('<div id="print-modal"></div>');
            print_controls = $('<div id="print-modal-controls">' + 
                                    '<a href="#" class="print" title="Print page">Print page</a>' +
                                    '<a href="#" class="close" title="Close print preview">Close</a>').hide();
            var print_frame = $('<iframe id="print-modal-content" scrolling="no" border="0" frameborder="0" name="print-frame" />');

            // Raise print preview window from the dead, zooooooombies
            print_modal
                .hide()
                .append(print_controls)
                .append(print_frame)
                .appendTo('body');

            // The frame lives
            for (var i=0; i < window.frames.length; i++) {
                if (window.frames[i].name == "print-frame") {    
                    var print_frame_ref = window.frames[i].document;
                    break;
                }
            }
            print_frame_ref.open();
            print_frame_ref.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">' +
                '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">' + 
                '<head><title>' + document.title + '</title></head>' +
                '<body></body>' +
                '</html>');
            print_frame_ref.close();

            // Grab contents and apply stylesheet
            var $iframe_head = $('head link[media*=print], head link[media=all]').clone(),
                $iframe_body = $('body > *:not(#print-modal):not(script)').clone();
            $iframe_head.each(function() {
                $(this).attr('media', 'all');
            });
            if (!$.browser.msie && !($.browser.version < 7) ) {
                $('head', print_frame_ref).append($iframe_head);
                $('body', print_frame_ref).append($iframe_body);
            }
            else {
                $('body > *:not(#print-modal):not(script)').clone().each(function() {
                    $('body', print_frame_ref).append(this.outerHTML);
                });
                $('head link[media*=print], head link[media=all]').each(function() {
                    $('head', print_frame_ref).append($(this).clone().attr('media', 'all')[0].outerHTML);
                });
            }

            // Disable all links
            $('a', print_frame_ref).bind('click.printPreview', function(e) {
                e.preventDefault();
            });

            // Introduce print styles
            $('head').append('<style type="text/css">' +
                '@media print {' +
                    '/* -- Print Preview --*/' +
                    '#print-modal-mask,' +
                    '#print-modal {' +
                        'display: none !important;' +
                    '}' +
                '}' +
                '</style>'
            );

            // Load mask
            $.printPreview.loadMask();

            // Disable scrolling
            $('body').css({overflowY: 'hidden', height: '100%'});
            $('img', print_frame_ref).load(function() {
                print_frame.height($('body', print_frame.contents())[0].scrollHeight);
            });

            // Position modal            
            starting_position = $(window).height() + $(window).scrollTop();
            var css = {
                    top:         starting_position,
                    height:      '100%',
                    overflowY:   'auto',
                    zIndex:      10000,
                    display:     'block'
                }
            print_modal
                .css(css)
                .animate({ top: $(window).scrollTop()}, 400, 'linear', function() {
                    print_controls.fadeIn('slow').focus();
                });
            print_frame.height($('body', print_frame.contents())[0].scrollHeight);

            // Bind closure
            $('a', print_controls).bind('click', function(e) {
                e.preventDefault();
                if ($(this).hasClass('print')) { window.print(); }
                else { $.printPreview.distroyPrintPreview(); }
            });
        },

        distroyPrintPreview: function() {
            print_controls.fadeOut(100);
            print_modal.animate({ top: $(window).scrollTop() - $(window).height(), opacity: 1}, 400, 'linear', function(){
                print_modal.remove();
                $('body').css({overflowY: 'auto', height: 'auto'});
            });
            mask.fadeOut('slow', function()  {
                mask.remove();
            });             

            $(document).unbind("keydown.printPreview.mask");
            mask.unbind("click.printPreview.mask");
            $(window).unbind("resize.printPreview.mask");
        },

        /* -- Mask Functions --*/
        loadMask: function() {
            size = $.printPreview.sizeUpMask();
            mask = $('<div id="print-modal-mask" />').appendTo($('body'));
            mask.css({              
                position:           'absolute', 
                top:                0, 
                left:               0,
                width:              size[0],
                height:             size[1],
                display:            'none',
                opacity:            0,                          
                zIndex:             9999,
                backgroundColor:    '#000'
            });

            mask.css({display: 'block'}).fadeTo('400', 0.75);

            $(window).bind("resize..printPreview.mask", function() {
                $.printPreview.updateMaskSize();
            });

            mask.bind("click.printPreview.mask", function(e)  {
                $.printPreview.distroyPrintPreview();
            });

            $(document).bind("keydown.printPreview.mask", function(e) {
                if (e.keyCode == 27) {  $.printPreview.distroyPrintPreview(); }
            });
        },

        sizeUpMask: function() {
            if ($.browser.msie) {
                // if there are no scrollbars then use window.height
                var d = $(document).height(), w = $(window).height();
                return [
                    window.innerWidth ||                        // ie7+
                    document.documentElement.clientWidth ||     // ie6  
                    document.body.clientWidth,                  // ie6 quirks mode
                    d - w < 20 ? w : d
                ];
            } else { return [$(document).width(), $(document).height()]; }
        },

        updateMaskSize: function() {
            var size = $.printPreview.sizeUpMask();
            mask.css({width: size[0], height: size[1]});
        }
    }
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:14:14.483

`$('a.print-preview').printPreview()` really is not a function, because it doesn't have such.

Try something like:

`$('a.print-preview').onClick(printPreview);`

# jquery - jQuery插件无法获取图像的高度

> ID：10379555
> 
> 赞同：0
> 
> 时间：2012-04-30T06:45:01.873
> 
> 标签：jquery, jquery-plugins

我正在尝试从 jquery plugins basic book 学习创建插件，但是以下插件不显示图像的高度它总是显示 0 图像高度我应该怎么做才能获得图像高度

```
(function($) {
    jQuery.fn.gallery = function() {
        return this.each(function() {
            var e = $(this);
            console.log(e);
            var h = e.height();
            console.log(h);
            var w = e.width();
            //     e.height(40);
            //       e.width(40);
            e.click(function() {
                console.log(h);
                //    $('#gal').remove();
                e.clone().prependTo("body").center().click(function() {
                    $(this).remove();
                });

            });
        });
    };
})(jQuery);​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:07:03.360

试试这个

```
(function($) {
    jQuery.fn.gallery = function() {
        return this.each(function() {
            var e = $(this);
            console.log(e);
            var h = e.attr("height");
            console.log(h);
            var w = e.attr("width");              
            e.click(function() {
                console.log(h);
                //    $('#gal').remove();
                e.clone().prependTo("body").center().click(function() {
                    $(this).remove();
                });

            });
        });
    };
})(jQuery);​ 
```

在 <img> 标签中使用 width 和 height 属性， **或者**

clientWidth 和 clientHeight 是 DOM 属性，显示 DOM 元素内部尺寸的当前浏览器内大小（不包括边距和边框）。因此，对于 IMG 元素，这将获得可见图像的实际尺寸。

```
var img = document.getElementById('imageid'); 
//or however you get a handle to the IMG
var width = img.clientWidth;
var height = img.clientHeight; 
```

# objective-c - 为什么在检索 intValue 时要转换 NSMutableArray 的 NSNumber 内容？

> ID：10379558
> 
> 赞同：2
> 
> 时间：2012-04-30T06:45:30.813
> 
> 标签：objective-c, types, casting, nsarray

在一些示例代码中，将 an`NSNumber`添加到可变数组中：

```
// In the .h, as an instance variable:
NSMutableArray *sequence;

// In the .m file:
sequence = [[NSMutableArray alloc] initWithCapacity:100];

[sequence addObject:[NSNumber numberWithInt:123]]; 
```

然后稍后，当需要整数时，它使用：

```
[(NSNumber *)[sequence objectAtIndex:aCounter] intValue] 
```

我只是想知道为什么`(NSNumber *)`需要演员表？因为没有它，程序也可以正常运行。这只是一个好习惯吗？如果是这样，它可以防止发生什么？如果有一个错误使得一个元素不是`NSNumber *`，那么强制转换它也会产生奇怪的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:49:14.053

强制转换只会使编译器相信该对象（它以 type 的形式返回`id`，即没有其他信息的通用对象类型！）实际上是一个`NSNumber`，因此它可以识别其`intValue`等方法的正确性。它不会在运行时使事情有所不同。如果对象不是 NSNumber，那么无论是否进行强制转换，它都会在运行时崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:49:36.943

没有强制转换就可以了，强制转换只是明确表明您将其视为 NSNumber，如果您有错误并且这不是`NSNumber`（或更准确地说，不响应`intValue`），您会得到一些无论如何，奇怪的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:31:57.093

> 我只是想知道为什么需要演员表（NSNumber *）？

*如果在运行时实际调用的选择器的签名对翻译可见，并且所有对翻译可见的选择器签名与被调用的选择器匹配，则*不需要它。

您可能在想*“什么？这很复杂！这也容易出错，尤其是随着我的程序不断发展！”*

如果同一选择器的多个选择器签名可见并且您发送消息`id`，那么您应该期待未定义的行为，因为未键入 objc 集合并且编译器可能与正确的选择器不匹配（如果您的警告级别很高并且您的包含都是正确的，您可以看到有关此的警告）。

避免这种情况的简单方法是通过赋值重新引入正确的类型：

```
NSNumber * n = [array objectAtIndex:i];
int a = [n intValue]; 
```

或通过铸造：

```
int a = [(NSNumber*)[array objectAtIndex:i] intValue]; 
```

因此编译器可以根据类型适当地匹配选择器，并在对象可能不响应给定选择器、参数或返回类型不匹配、或者您将其转换为的类型的接口是在翻译中不可见——毕竟，您应该对集合包含的内容有所了解。

适当地引入类型安全是一种非常好的做法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T06:58:06.107

//在Objective-C中，任何对象都可以向任何其他对象发送消息。//所以这里两个statmenst都是完全有效的，但是

[(NSNumber *)[sequence objectAtIndex:aCounter] removeFromSuperview]; //这会引发警告并让你知道 removeFromSuperview 不会被调用

[[sequence objectAtIndex:aCounter] removeFromSuperview];//这里你不会得到任何警告

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T06:51:19.450

只需要强制转换来阻止编译器抱怨它不确定你知道你在做什么。

编译器在编译时为您做的一件事是检查消息接收者的接口是否表示他们响应您发送的消息（`intValue`在这种情况下）。的接口`NSNumber`确实说它响应`intValue`，但返回类型`objectAtIndex:`是`id`，它是一个通用指针。编译器无法知道该指针另一端的对象类型是什么——直到运行时才知道。

强制转换告诉编译器您确实知道类型并且它不需要警告您（或者，在某些情况下，在 ARC 下，给出错误）关于它不确定消息的接收者是否响应的事实。

请注意，如果您将强制转换的类更改为不响应的内容`intValue`（例如`NSDate`），编译器会抱怨您，**但**如果对象确实仍然是`NSNumber`，则消息在运行时仍然会成功。铸造不能改变对象的类型；它只是编译器的注释。*

* * *

*在某些情况下，它还可以增加代码的可读性。

# asp.net-mvc-3 - 如何跨回发维护基本类型集合中的项目类型？

> ID：10379559
> 
> 赞同：3
> 
> 时间：2012-04-30T06:45:40.140
> 
> 标签：asp.net-mvc-3

我有一个基类、一组子类和一个集合容器，用于使用局部视图动态创建和填充控件。

```
// base class
public class SQControl
{
    [Key]
    public int ID { get; set; }
    public string Type { get; set; }
    public string Question { get; set; }
    public string Previous { get; set; }
    public virtual string Current { get; set; }
}

// subclass
public class SQTextBox : SQControl
{
    public SQTextBox()
    {
        this.Type = typeof(SQTextBox).Name;
    }
}

//subclass
public class SQDropDown : SQControl
{
    public SQDropDown()
    {
        this.Type = typeof(SQDropDown).Name;
    }

    [UIHint("DropDown")]
    public override string Current { get; set; }
} 

// collection container used as the Model for a view
public class SQControlsCollection
{
    public List<SQControl> Collection { get; set; }
    public SQControlsCollection()
    {
        Collection = new List<SQControl>();
    }

} 
```

我在运行时根据需要使用 SQControl 的不同子类填充 Collection 控件，并且在 EditorTemplates 中我为每个子类提供了单独的视图。在集合项目上使用 Html.EditorFor 我可以使用适当的控件动态生成表单。

这一切都很好。

我遇到的问题是，当我保存表单时，MVC 绑定无法判断 Collection 中的每个项目是用什么子类创建的，而是将它们绑定到基类 SQControl 的实例。

这会使视图引擎感到困惑，因为它无法确定要加载的正确视图，而只是加载默认视图。

我目前的解决方法是将子类的“类型”保存为模型中的一个字段，然后在回发时，我将集合复制到一个新容器中，根据中的信息使用正确的子类重新创建每个对象类型字段。

```
public static SQControlsCollection Copy(SQControlsCollection target)
    {
        SQControlsCollection newCol = new SQControlsCollection();

        foreach (SQControl control in target.Collection)
        {
            if (control.Type == "SQTextBox")
            {
                newCol.Collection.Add(new SQTextBox { Current = control.Current, Previous = control.Previous, ID = control.ID, Question = control.Question });
            }
            else if (control.Type == "SQDropDown")
            {
                newCol.Collection.Add(new SQDropDown { Current = control.Current, Previous = control.Previous, ID = control.ID, Question = control.Question });
            }
            ...

        }

        return newCol;
    } 
```

所以我的问题是，有没有更好的方法来维护回发之间的基本类型集合中的项目类型？我知道在 MVC 中为每个模型都有一个类型化的视图是一种做法，但我希望能够使用可重用的部分视图基于 XML 文档动态构建视图。

# sencha-touch-2 - 使用卡片布局在 sencha2.0 中从另一个表单调用一个表单

> ID：10379561
> 
> 赞同：0
> 
> 时间：2012-04-30T06:46:00.720
> 
> 标签：sencha-touch-2

我正在开发 sencha2.0。我有一个登录表单，我想在单击登录表单中的提交按钮时调用另一个表单。我希望使用卡片布局，其中一个表单将是卡片的一个项目，另一个表单作为另一个项目卡片。我对逻辑很清楚，但需要一些类似的例子作为参考。你能给我一些很好的例子供参考吗？请帮助我在下面的代码中找到问题：

```
Ext.define('senchaApp.view.activation', {
    extend : 'Ext.Container',
    xtype : 'activation',
    requires: "Ext.form.FieldSet",
    id : 'activation',

    constructor : function(config) {
        var formContainer = Ext.create('Ext.Panel',{

            id:'formPanel',
            layout:'card',
            fullscreen:'true',
            items:[{
                xtype:'fieldset',
                title:'Login',
                items:[
                       {xtype:'textfield',
                        name:'name',
                        id:'name',
                        label:'Name',
                        clearIcon:false,
                        cls:'fields'
                        },
                        {xtype:'emailfield',
                            style:'margin-top:10px;',
                            name:'email',
                            id:'email',
                            label:'Email',
                            clearIcon:false,
                            cls:'fields'
                        },
                            {xtype:'emailfield',
                            style:'margin-top:10px;',
                            name:'reTypeEmail',
                            id:'reTypeEmail',
                            label:'Retype Email',
                            clearIcon:false,
                            cls:'fields'
                        },
                            {xtype:'passwordfield',
                            style:'margin-top:10px;',
                            name:'pass',
                            id:'pass',
                            label:'Password',
                            clearIcon:false,
                            cls:'fields'
                        },
                            {xtype:'passwordfield',
                            style:'margin-top:10px;',
                            name:'reTypePass',
                            id:'reTypePass',
                            label:'Retype Password',
                            clearIcon:false,
                            cls:'fields'
                        },
                        {xtype:'numberfield',
                            style:'margin-top:10px;',
                            name:'mobilePhone',
                            id:'mobilePhone',
                            label:'Mobile Phone',
                            clearIcon:false,
                            cls:'fields'
                        },
                        {
                            xtype:'textfield',
                            name:'secretQuestion',
                            id:'secretQuestion',
                            style:'margin-top:10px;',
                            label:'Secret Question',
                            clearIcon:false,
                            cls:'fields'
                        },
                        {
                            xtype:'textfield',
                            name:'secretAnswer',
                            id:'secretAnswer',
                            label:'Secret Answer',
                            style:'margin-top:10px;',
                            clearIcon:false,
                            cls:'fields',
                        },
                        {
                            xtype:'numberfield',
                            style:'margin-top:10px;',
                            name:'authCode',
                            id:'authCode',
                            label:'Auth Code',
                            clearIcon:false,
                            cls:'fields'
                        },
                        {
                            xtype:'button',
                            style:'margin-top:10px;float:right;width:10%;',
                            cls:'next',
                            id:'next',
                            text:'Next',
                            ui:'action-round',
                            action:'next',
                        }
                    ]
                },
                {   xtype:'fieldset',
                    title:'Activation',
                    items:[
                            {
                            xtype:'textfield',
                            name:'user',
                            id:'user',
                            label:'Username',
                            clearIcon:false,
                            cls:'fields'
                            },
                            {xtype:'passwordfield',
                            style:'margin-top:10px;',
                            name:'pass',
                            id:'pass',
                            label:'Password',
                            clearIcon:false,
                            cls:'fields'
                            },
                            {xtype:'button',
                            cls:'submitBtn',
                            id:'submit',
                            ui:'action-small',
                            action:'submitLogin',
                            style:'background-image: url("app/resources/images/img_btnStrip.png");width:186px;margin: 0 auto;height:66px;margin-top:20px;background-color:none;'
                            }
                          ]
                }
            ]
        });

        var formContentHolder = Ext.create('Ext.Panel',{

            cls:'middleContainer',
            items:[formContainer]
        });

        config.items = [formContentHolder];

        this.callParent(arguments);
    },

    initialize : function() {
        this.callParent(arguments);
    }

}); 
```

下面提到的是控制器下 Main.js 的代码：

```
Ext.define('senchaApp.controller.Main',{
    extend:'Ext.app.Controller',

    init: function(){
        Ext.create('senchaApp.view.Viewport');

            this.control({
                '#submit':{
                    tap: this.showIndicesOverlay
            }
        });
    },
    showIndicesOverlay: function(){
        Ext.getCmp('activation').setActiveItem(1);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:45:24.830

假设您的 Container 有`layout: 'card'`并且`id: 'your-container-id'`有 2 个项目：

```
items: [
  {xtype: 'login-form'},
  {xtype: 'another-form'},
] 
```

然后当你的登录表单的提交按钮被点击时，在做任何你想做的事情之后，只需使用`Ext.getCmp('your-container-id').setActiveItem(1)`

据我所知，最简单的方法。希望这可以帮助。

# c# - 在 C# 控制台应用程序中测试类

> ID：10379562
> 
> 赞同：0
> 
> 时间：2012-04-30T06:46:11.673
> 
> 标签：c#, class, parsing, datetime

**以下是控制台应用程序练习的要求。我已经建立了类，我只是不知道如何测试它们。**

您最近被 NU 银行聘为其不断壮大的开发团队的一员。你的第一个任务是设计和构建两个类，用于银行网站和内部应用程序。第一个是代表贷款合同的贷款类别。第二个是代表接受贷款的个人的客户类别。每个类的要求如下： 1\. 每个类必须至少有 2 个成员和 2 个方法。2\. 客户类必须至少存储客户的姓名、电话号码和出生日期。3\. 贷款类必须至少存储合同号、执行日期和关联客户。4\. 将客户对象分配到贷款对象时，客户必须年满 21 岁。如果客户未满 21 岁，则该分配必须被拒绝。

出于测试目的，您将编写一个小型控制台应用程序。通过控制台收集填充对象所需的任何信息。应用程序的输出必须显示每个对象的内容，并表明客户对贷款的分配是否成功。

**这是我到目前为止...**

**贷款类**

```
 class Loan
{
    private int contractNumber;
    private DateTime doe;
    private double loanAmt;

    public int ContractNumber
    {
        get
        {
            return contractNumber;
        }
        set
        {
            contractNumber = value;
        }
    }

    public double LoanAmt
    {
        get 
        { 
            return loanAmt; 
        }
        set 
        { 
            loanAmt = value; 
        }
    }

    public Loan()
    {
        doe = DateTime.Now;
        loanAmt = 0.00;
    }

    public Loan(DateTime doe, double loanAmt)
    {
        doe = DateTime.Now;
        loanAmt = LoanAmt;
    }
} 
```

**和客户类**

```
 class Customer
{
    private string firstName;
    private string lastName;
    private DateTime dob;
    private long phoneNumber;

    public string FirstName
    {
        get
        {
            return firstName;
        }
        set
        {
            firstName = value;
        }
    }

    public string LastName
    {
        get
        {
            return lastName;
        }
        set
        {
            lastName = value;
        }
    }

    public DateTime DoB
    {
        get
        {
            return dob.Date;
        }
        set
        {
            dob = value;
        }
    }

    public long PhoneNumber
    {
        get
        {
            return phoneNumber;
        }
        set
        {
            phoneNumber = value;
        }
    }

    public Customer()
    {
        DateTime defaultDate = new DateTime(1991, 04, 29);
        firstName = "Enter first name here.";
        lastName = "Enter last name here.";
        dob = Convert.ToDateTime("04/30/1991");
        phoneNumber = 1234567890;
    }

    public Customer(string firstName, string lastName, DateTime dob, long phoneNumber)
    {
        firstName = FirstName;
        lastName = LastName;
        dob = DoB;
        phoneNumber = PhoneNumber;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:25:22.883

简单的错误， DateTime 的构造如下：

`DateTime defaultDate = new DateTime(1991, 04, 29);`

不是：

`DateTime defaultDate = new DateTime(1991 / 04 / 29);`

否则你到目前为止所做的一切看起来都很好。您现在只需要一个驱动程序`Console.ReadLine()`来获取输入、解析它并在测试约束时创建您的对象。

# c# - 'MapPath' 方法在其过程移动到 C# 类文件后立即停止工作

> ID：10379563
> 
> 赞同：1
> 
> 时间：2012-04-30T06:46:31.263
> 
> 标签：c#, asp.net

我正在使用 C# ASP.NET VS2010。

我在 .aspx.cs 上有一个程序，它读取 XML 文件并且工作得很好。

它是这样的：

```
string fileName = "~/App_Data/" + filename + ".xml";
DataSet ds = new DataSet();
ds.ReadXml(MapPath(fileName)); 
```

我经常使用这个过程来读取各种文件的变化很小（文件名），因此，我试图把这个过程放在一个 Class1.cs 文件中（在 App_Code 文件夹中），但我收到了这个错误消息：

```
The type or namespace name 'MapPath' does not exist in the namespace 'Microsoft.SqlServer.Server' (are you missing an assembly reference?) 
```

我使用此 MapPath 以这种方式将 XML 文件读入数据集：

```
ds.ReadXml(Server.MapPath(fileName)); 
```

文件名是前面几行声明的字符串变量：

```
string fileName = "~/App_Data/" + inputString + ".xml"; 
```

将此行放入 class.cs 文件后，VS2010 要求`Server`通过将其替换为`Microsoft.SqlServer.Server`本地（在同一行而不是通过添加命名空间）来解决丢失问题，因此新形式中的行如下所示：

```
ds.ReadXml(Microsoft.SqlServer.Server.MapPath(fileName)); 
```

作为记录，我确保源 .aspx.cs 文件上的所有命名空间都在类文件中。

为什么 Class1.cs 和 .aspx.cs 有区别？

我该如何解决这个问题？

为了从这个新的类文件中读取 XML 文件，我应该改变什么？

是否可以替代我的行来将 XML 文件读入数据集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T06:58:15.633

`MapPath`是`System.Web.HttpServerUtility`类的方法，你需要这个类的一个实例来调用该方法。在 ASP 页面中，页面的 Server 成员中提供了一个实例；在其他地方，你必须提供它。要么作为

```
HttpContext.Current.Server.MapPath(fileName); 
```

如果您在其中，它将使用当前`Server`变量。类包含许多您用于通过成员访问的与 HTTP 相关的对象 - 例如请求、响应、服务器。静态属性为您当前正在处理的请求提供上下文。在您的 ASP Web 项目的 App_Code 文件夹中的类中，您可以安全地假设存在一个活动上下文。`HttpContext``HttpContext``Page``Current`

如果你想将你的类移动到一个单独的程序集中，最好将服务器（或上下文）作为方法的参数，并让调用者负责提供一个参数：

```
public class Class1
{
    public void MyMethod(HttpServerUtility server)
    {
        //...
        server.MapPath(fileName);
        //...
    }
} 
```

然后从 ASP 页面调用它`class1instance.MyMethod(this.Server);`

`Microsoft.SqlServer.Server`与它无关，只有类/成员名称相同，Visual Studio 弄错了。

# mysql - 如果返回记录则退出循环

> ID：10379564
> 
> 赞同：1
> 
> 时间：2012-04-30T06:46:43.790
> 
> 标签：mysql, stored-procedures, loops

我在按预期工作的存储过程中有以下循环。它生成给定数量的 sql 查询。如果返回一条或多条记录，我需要做的是退出循环。

```
set hour_inc = 1 ;
days_loop: loop
    if  hour_inc > p_hours then         
        leave days_loop ;
    end if ;    

        set @sqlstr = some sql query ;   

        PREPARE stmt FROM @sqlstr;
        EXECUTE stmt  ;
        DEALLOCATE PREPARE stmt;  

    set hour_inc = hour_inc + 1 ;
end loop days_loop ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:29:59.653

您可以使用[`FOUND_ROWS`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_found-rows)：

```
IF FOUND_ROWS() > 0 THEN
  LEAVE days_loop;
END IF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:51:35.097

尝试[离开](http://dev.mysql.com/doc/refman/5.1/en/leave-statement.html)以跳出循环

# c# - 将类对象绑定到wpf中的listview

> ID：10379565
> 
> 赞同：2
> 
> 时间：2012-04-30T06:46:52.937
> 
> 标签：c#, wpf, vb.net, listview, data-binding

我在 wpf 中创建了一个用户控件，它由一个文本框和一个列表视图组成。现在，我想将一个类对象从我将使用此控件的表单绑定到列表视图。所以，基本上我想动态设置列表视图的绑定。

这可能很简单，但我是 wpf 的新手，这对我来说是一项艰巨的任务。请为此提出解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T07:08:12.487

您需要将您`ListView`的`ItemsSource`属性绑定到您的类实例的集合（我建议为此使用 ObservableCollection）。例如，您可以将集合放入`ListView`'s`DataContext`中。然后绑定将只是

```
<ListView ItemsSource={Binding} .../> 
```

`UserControl`创建一个类来包含此集合以及您可能需要的任何其他对象并将此类的实例传递给`UserControl`'s会更有用`DataContext`。这指的是[MVVM](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)模式。

**编辑**

您可以在代码隐藏或 xaml 中设置 DataContext。假设我们有一个包含集合的类：

```
public class ViewModel
{
    public ViewModel()
    {
        Products = new ObservableCollection<Product>()
        {
            new Product("book"),
            new Product("chair"),
            new Product("table"),
            new Product("bookshelf"),
        }
    }

    ObservableCollection<Product> Products { get; set; }
} 
```

以下是如何在代码中设置 UserControl 的 DataContext：

```
userControl.DataContext = new ViewModel(); 
```

其中 userControl 是您的 UserControl 的一个实例。

以下是在 xaml 中的操作方法：

```
<UserControl ...
             xmlns:vm="namespace_containing_class_ViewModel">
    <UserControl.DataContext>   
        <!-- Following line instantiates the ViewModel class and calls its parameterless constructor -->
        <vm:ViewModel />
    </UserControl.DataContext>

    ...
    <ListView ItemsSource="{Binding Products}"/>
    ...
</UserControl> 
```

两种变体都做同样的事情。请注意，这`ItemsSource="{Binding Products}"`意味着该`Binding.Path`属性设置为“Products”，并且将在 ListView 的 DataContext 中搜索此路径。如果 ListView 的 DataContext 没有显式设置（如上面提到的情况），它的 DataContext 与它的 Parent 的 DataContext 相同。如果未设置父级的 DataContext - 那么它与父级的父级 DataContext 相同，依此类推。因此在这种情况下，ListView 的 DataContext 与 UserControl 的 DataContext 相同，并且是一个 ViewModel 类实例，其中包含产品集合。达达！:)

# android - 在android中更改日期格式的功能

> ID：10379568
> 
> 赞同：0
> 
> 时间：2012-04-30T06:47:03.773
> 
> 标签：android

我输入了以下格式的日期（mm - dd - yyyy），我想从 android 将其发送到服务器（yyyy -mm -dd）。

编写一个函数将输入日期转换为输出日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:49:43.167

使用 SimpleDateForat

```
SimpleDateFormat curFormater = new SimpleDateFormat("MM-dd-yyyy"); 
          Date dateObj = null;
        try 
        {
            dateObj = curFormater.parse(oldDateStr);
        } 
        catch (ParseException e) 
        {

            e.printStackTrace();
        } 
          SimpleDateFormat postFormater = new SimpleDateFormat("yyyy-MM-dd"); 

         String newDateStr = postFormater.format(dateObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:50:24.550

> 我写了一个类以新格式返回日期，

## 2013-03-27 13:48:50 至 3 月 27 日下午 1 点

> 最初我也收到了错误的值 JAN 而不是 MARCH，我意识到我确实使用了结果
> 
> ## mmm dd, hha 而不是 MMM dd, hha

```
public class DateFormatConvertor {

public String changeDateFormat(String dateString) {

    SimpleDateFormat recivedFormat = new SimpleDateFormat(
            "yyyy-MM-dd hh:mm:ss", Locale.US);
    SimpleDateFormat outputFormat = new SimpleDateFormat("MMM dd, hha",
            Locale.US);
    Date dateObj = null;
    try {
        dateObj = recivedFormat.parse(dateString);
    } catch (ParseException e) {
        e.printStackTrace();
        return "-";
    }
    return outputFormat.format(dateObj);
} 
```

}

# iphone - Xcode 4 中身份检查器下的标签颜色

> ID：10379569
> 
> 赞同：8
> 
> 时间：2012-04-30T06:47:20.467
> 
> 标签：iphone, xcode, interface-builder, identity, cube

在 Identity Inspector 下，我们都知道 label 属性用于在界面生成器中更容易地识别对象，但是它底部的颜色是用来做什么的呢？我试图选择一种颜色，但在界面生成器中没有任何变化。

编辑：截图：

![在此处输入图像描述](../Images/7fab4faa1c2adfb35831f58985db62bb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:11:48.553

If you don't already use color labels to sort your files and folders, then you really should consider it. Using color labels allows you to enhance your file organization by assigning certain colors to certain files. You can assign color labels to files by doing a "Get Info" (highlight the file, then press command + i) on the file/folder and selecting a color from the label section.

What is the use of these labels if you can't search them? Well, you can! Open a new Finder window and press command + F. In the "kind" drop-down box, select "other" then find "File Label" in the list. Click it, then click "OK."

Now, you can narrow down your search by the color of its label. Note that if you are using Mac OS X Tiger, you will see "Color Label" instead of "File Label."

**See the following image that help you more to understand use of identity color label..**

**Image when you selected first cross cube** //Some file in search result

![enter image description here](../Images/40ef9bb0466fcf5424f71a284b74ac1a.png)

**Image when you selected last(gray color) cross cube** //No file in search result

![enter image description here](../Images/c012dcb74454547963a9e860eb1e8a74.png)

Hope, this will help you..

# c# - 根据集合 B 填充集合 A

> ID：10379570
> 
> 赞同：2
> 
> 时间：2012-04-30T06:47:38.580
> 
> 标签：c#, linq

我在 c# 中有两个集合

```
A: {
      {id:4, name:"", age:1},
      {id:3, name:"", age:3},
      {id:2, name:"", age:5},
}

B: {
      {id:2, name:"aa"},
      {id:4, name:"bb"},
      {id:3, name:"cc"},
} 
```

我想根据集合 B 填充集合 A

```
A: {
      {id:2, name:"aa",age:5},
      {id:4, name:"bb",age:1},
      {id:3, name:"cc",age:3},
} 
```

我怎样才能做到这一点？（我应该使用 linq 吗？）

我用了：

```
 private static void FillIsCpHidden(ref Collection A)
        {
            var B= CollectionB.ToDictionary(item => item.id);

            foreach (var item in A)
            {
                item.name= B[item.id].name;
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:53:27.740

您可以从 B 创建字典

```
var dictB = B.ToDictionary(b=>b.id); 
```

然后创建一个新列表。

```
var c = A.Select(a=>new{ a.id, name=dictB[a.Id].name,a.age   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:50:52.810

**我会用 LINQ 来解决这个问题：**

```
 var d = (from i in A select new { id = i.id, age=i.age, 
name = (from b in B where b.id == i.id select b.name).SingeleOrDefault()}).ToList(); 
```

**不创建新变量的另一种可能性：**

```
 A =  A.Select(d=>new{ d.id, name=a=>new{ a.id, name=dictB[a.Id].name,d.age}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T06:52:05.510

你可以试试linq

```
 var collectionB = collectionA.Select(p=>new B() { id=p.id, name=p.name}); 
```

或者

```
var collectionA = collectionB.Select(p=>new A() { id=p.id, name=p.name}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:13:07.230

您可以使用连接：

```
var result = a.Join(b,
                    o => o.Id,
                    i => i.Id,
                    (o, i) => new { o.Id, i.Name, o.Age }); 
```

# android - Android Facebook 注销崩溃

> ID：10379573
> 
> 赞同：0
> 
> 时间：2012-04-30T06:48:18.427
> 
> 标签：android, facebook, logout

我已经从 Facebook 的 android 教程中复制了注销代码。每次我尝试注销时，都会出现空指针异常。

这是代码...

```
private AsyncFacebookRunner mAsyncRunner; 
```

...

```
 mAsyncRunner.logout(home.this, new RequestListener() {
              @Override
              public void onComplete(String response, Object state) 
              {
                 /* mPrefs.edit().putBoolean("firstTime", true).commit();
                  userName.setText("Logged out!");*/
              }

              @Override
              public void onIOException(IOException e, Object state) {
                  Log.d("IOExcenption", e.toString());
              }

              @Override
              public void onFileNotFoundException(FileNotFoundException e,
                    Object state) {
                  Log.d("FileNotFoundException", e.toString());
              }

              @Override
              public void onMalformedURLException(MalformedURLException e,
                    Object state) {
                  Log.d("MalformedUrlExpection", e.toString());
              }

              @Override
              public void onFacebookError(FacebookError e, Object state) {
                  Log.d("FacebookError", e.toString());
              }
            }); 
```

日志

```
 04-29 23:41:35.523: E/AndroidRuntime(1011): java.lang.NullPointerException
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at rageup.android.home.onClick(home.java:177)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.View.performClick(View.java:2364)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.View.onTouchEvent(View.java:4179)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.widget.TextView.onTouchEvent(TextView.java:6541)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.View.dispatchTouchEvent(View.java:3709)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.os.Handler.dispatchMessage(Handler.java:99)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.os.Looper.loop(Looper.java:123)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at android.app.ActivityThread.main(ActivityThread.java:4363)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at java.lang.reflect.Method.invokeNative(Native Method)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at java.lang.reflect.Method.invoke(Method.java:521)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
 04-29 23:41:35.523: E/AndroidRuntime(1011):    at dalvik.system.NativeStart.main(Native Method)
 04-29 23:41:35.534: I/dalvikvm(1011): threadid=7: reacting to signal 3
 04-29 23:41:35.534: E/dalvikvm(1011): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
 04-29 23:41:37.283: I/Process(1011): Sending signal. PID: 1011 SIG: 9 
```

关于为什么会发生这种情况的任何建议？空指针异常是指第二个代码块的第一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:10:16.810

你的`mAsyncRunner`似乎是`null`。

你初始化了吗？

像这样初始化它：

```
mAsyncRunner = new AsyncFacebookRunner(mFacebook);  //mFacebook is your facebook object. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:06:52.410

试试下面的代码，

```
public void logout(final Context context,
                   final RequestListener listener,
                   final Object state) {
    new Thread() {
        @Override public void run() {
            try {
                String response = fb.logout(context);
                if (response.length() == 0 || response.equals("false")){
                    listener.onFacebookError(new FacebookError(
                            "auth.expireSession failed"), state);
                    return;
                }
                listener.onComplete(response, state);
            } catch (FileNotFoundException e) {
                listener.onFileNotFoundException(e, state);
            } catch (MalformedURLException e) {
                listener.onMalformedURLException(e, state);
            } catch (IOException e) {
                listener.onIOException(e, state);
            }
        }
    }.start();
}

public void logout(final Context context, final RequestListener listener) {
    logout(context, listener, /* state */ null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:18:08.090

检查上下文是否为空并尝试使用

```
 facebook.logout(this); 
```

# wpf - 从 WPF 中的 DoubleAnimation Completed 事件获取目标控件？

> ID：10379575
> 
> 赞同：3
> 
> 时间：2012-04-30T06:48:27.147
> 
> 标签：wpf, animation

我希望有人可以帮助我解决我认为相对简单的问题。

我正在使用 DoubleAnimation 对象在代码中设置淡出动画。它淡出图像，然后在完成后触发 Completed 事件。

我想从事件处理程序中获取应用淡出动画的控件的名称，但我找不到方法。

任何帮助表示赞赏。谢谢。

```
DispatcherTimer timer = new DispatcherTimer();

public MainWindow()
{
    InitializeComponent();

    image1.Visibility = System.Windows.Visibility.Visible;
    image2.Visibility = System.Windows.Visibility.Collapsed;

    timer.Interval = TimeSpan.FromSeconds(2);
    timer.Tick += new EventHandler(timer_Tick);
    timer.Start();
}

void FadeOut(UIElement element)
{
    DoubleAnimation FadeOut = new DoubleAnimation(1, 0, new Duration(TimeSpan.FromSeconds(0.5)));
    FadeOut.Completed += new EventHandler(FadeOut_Completed);
    element.BeginAnimation(OpacityProperty, FadeOut);
}

void FadeOut_Completed(object sender, EventArgs e)
{
    // How to find out which control was targeted?
}

void timer_Tick(object sender, EventArgs e)
{
    if (image1.Visibility == System.Windows.Visibility.Visible)
    {
        FadeOut(image1); 
        //image1.Visibility = System.Windows.Visibility.Collapsed;
        //image2.Visibility = System.Windows.Visibility.Visible;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:39:23.000

以下代码为您提供完成动画的目标。将它放在 FadeOut_Completed() 处理程序中：

```
DependencyObject target = Storyboard.GetTarget(((sender as AnimationClock).Timeline as AnimationTimeline)) 
```

但是，这仅在指定动画目标对象时才有效。为此，将以下内容添加到 FadeOut() 方法：

```
Storyboard.SetTarget(FadeOut, element); 
```

# algorithm - 求 1/x+1/y=1/Nfactorial 的积分解数

> ID：10379576
> 
> 赞同：0
> 
> 时间：2012-04-30T06:48:29.643
> 
> 标签：algorithm

这道题是 interviewstreet.com 上的一道练习题。

> 求1/x+1/y=1/N的积分解数！对于给定的 N

对于 N=1，答案是 1。
我试图解决这个问题，但无法预测从哪里开始。我不是数学背景。

我正在寻找方法，我应该如何着手解决。有没有直接的公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:53:01.670

尝试将其作为一个迭代问题来解决。N-1 的所有解也对 N 有效。唯一未发现的解是 x 和 y 都不能被 N 整除，这应该更容易计算。

# oop - 缓存在不属于类的私有字段数组中是否有意义？

> ID：10379587
> 
> 赞同：0
> 
> 时间：2012-04-30T06:49:17.097
> 
> 标签：oop

我班的一种方法需要一些数组的新副本来存储内部的东西，所以我应该写这样的东西：

```
public void FrequentlyCalledMethod {
    int[] a = new int[100];
    .... 
```

但是因为经常调用方法并且因为数组的内容没有意义（无论如何都会被替换）并且因为数组足够大，所以我想优化并编写类似的东西：

```
private int[] a = new int[100];
public void FrequentlyCalledMethod {
    .... 
```

假设该方法每秒调用 100 次，我每秒将节省大约 100 * 100 * sizeof(int) 字节的堆内存。

问题是现在类声明是“脏的”。它在字段中包含只有一种方法需要的信息。拥有太多这样的字段会使类变得非常“不可读”，因为“普通”字段将与“性能优化”字段混合。

我能做些什么？还是我应该选择性能或可读性？我可以同时拥有两者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:57:32.060

如果是第一种情况，内部的数组`FrequentlyCalledMethod` 是使用局部变量引用的，所以当方法结束时它将被垃圾收集：在那种情况下没有堆过度使用。

但是，如果您将数组声明为成员属性；数组实例将在您的所有父对象生命周期中持续存在，即使该方法`FrequentlyCalledMethod` 是否被调用。

总之，如果您想保留堆空间并提高程序的内存效率，请使用**本地属性**并在您的特定情况下避免使用实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:00:10.980

**不**，您的班级声明不脏。**仅当您破坏其公共接口时，类声明才是脏的。**这是一个私人领域。私有字段用于此。

如果您太担心私有变量过多，请尝试使用小类。如果一个方法需要 3 个私有变量，您可以使用这 3 个变量创建一个类，并将对象作为私有文件存储在当前类中。

```
class A{
    private int a;
    private int b;
    private int c;
    public int get_num(){
        return a+b+c;
    }
} 
```

你可以用这个，

```
class B{
    private int a;
    private int b;
    private int c;
    public int get_num(){
        return a+b+c;
    }
}

class A{
    private B b;
    public int get_num(){
        return b.get_num();
    }
} 
```

# elasticsearch - elasticsearch中实时数据的最佳设置

> ID：10379590
> 
> 赞同：4
> 
> 时间：2012-04-30T06:49:33.437
> 
> 标签：elasticsearch

我正在尝试使用 elasticsearch 进行实时数据过滤。现在我使用一台不断推送新数据的机器（每 3 秒通过 _bulk）。即便如此，我确实设置了一个 ttl，索引在一天左右后变得相当大，然后弹性搜索挂起。我当前的映射：

```
curl -XPOST localhost:9200/live -d '{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 0,
    "analysis": {
      "analyzer": {
        "lowercase_keyword": {
          "type": "custom",
          "tokenizer": "whitespace",
          "filter": [
            "lowercase"
          ]
        },
        "no_keyword": {
          "type": "custom",
          "tokenizer": "whitespace",
          "filter": []
        }
      }
    }
  },
  "mappings": {
    "log": {
      "_timestamp": {
        "enabled": true,
        "path": "datetime"
      },
      "_ttl":{
        "enabled":true,
        "default":"8h"
      },
      "properties": {
        "url": {
          "type": "string",
          "search_analyzer": "lowercase_keyword",
          "index_analyzer": "lowercase_keyword"
        },
        "q": {
          "type": "string",
          "search_analyzer": "no_keyword",
          "index_analyzer": "no_keyword"
        },
        "datetime" : {
          "type" : "date"
        }
      }
    }
  }
}' 
```

我认为一个问题是清除旧文件，但我可能是错的。关于如何优化我的设置的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T10:49:57.807

为避免 elasticsearch 挂起，您可能希望增加 Java 进程可用的内存量。

如果您的所有文档都具有相同的 8 小时寿命，则使用滚动[别名](http://www.elasticsearch.org/guide/reference/api/admin-indices-aliases.html)而不是 ttl 可能更有效。基本思想是定期（例如，每小时）创建一个新索引并使用别名来跟踪当前索引。随着时间的推移，您可以更新您搜索的别名中的索引列表，并简单地删除超过 8 小时的索引。删除索引比使用 ttl 删除索引要快得多。可以在[此处](https://github.com/elasticsearch/elasticsearch/issues/1500)找到演示如何创建滚动别名设置的示例代码。

我不太确定您要保留多少实时数据，但如果您只是针对一组查询测试传入数据，您也可以考虑使用[Percolate API](http://www.elasticsearch.org/guide/reference/api/percolate.html)而不是索引数据。

# c# - 如何根据条件在silverlight的代码隐藏按钮上显示图像？

> ID：10379599
> 
> 赞同：0
> 
> 时间：2012-04-30T06:50:16.383
> 
> 标签：c#, silverlight, xaml

> 如何根据条件使用silverlight中的代码显示或显示图像到按钮？

我是新手。

> 有一些条件取决于我需要在按钮上显示图像，请帮助。`

```
<Button x:Name="myButton" Width="24" Height="24">
    <Image Source="myImage.png" Stretch="None"/>
</Button> 
```

> 如何根据后面代码中的条件更改图像源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:43:41.030

```
<Button x:Name="myButton" Width="24" Height="24"> 
    <Image x:Name="myImage" Source="myImage.png" Stretch="None"/> 
</Button> 
```

然后做：

```
if (someCondition)
{
    myImage.Visibility = Visibility.Visible;
}
else
{
    myImage.Visibility = Visibility.Collapsed;
} 
```

那对你有用吗？

# vb.net - VB，如何解决这个错误

> ID：10379605
> 
> 赞同：0
> 
> 时间：2012-04-30T06:51:05.647
> 
> 标签：vb.net, visual-studio-2008

我的代码有一些问题：

```
For i = 0 To Split(awal, vbCrLf).Length - 1
    For j = 0 To Split(hasil(i), " ").Length - 1
        hasil1(j) = hasil(i).Split(" ")
    Next j
Next i 
```

它带有错误：

> "hasil1(j) = hasil(i).Split(" ") " 部分中的“'1-dimensional array of String' 类型的值不能转换为 'String'”。

任何人都可以向我解释如何解决这个问题，好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:39:25.913

目前尚不清楚如何初始化 hasil 数组，
但是，您可以通过这种方式使用 List(Of String) 简化代码

```
Dim hasil() as String = New String() {"abcd 123","efgh 11","ijkl"}
Dim hasil1 as List(Of String) = New List(Of String)()
For i = 0 To hasil.Length - 1 
    hasil1.AddRange(hasil(i).Split(" "))
Next i 
```

您始终可以使用以下命令将其转换回字符串数组：

```
Dim s() as String = hasil1.ToArray() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:02:57.117

您的问题是您正在尝试将数组添加到字符串数组。

该`Split()`函数返回一个`Array`，这导致了错误。

如果您的意图是获得一个数组数组，请以这种方式制作变量，如果不是，那么`Split(" ")`在该行上使用的目的是什么？

**编辑：**

根据您的评论：

您必须再次循环才能完成：

```
Dim it As Integer
Dim tmp() As String
it = 0

For i = 0 To Split(awal, vbCrLf).Length - 1
    For j = 0 To Split(hasil(i), " ").Length - 1
        tmp = hasil(i).Split(" ")

        For k = 0 To tmp.Length - 1
            hasil1(it) = tmp(k)
            it += 1
        Next
    Next j
Next i 
```

我在 VB.Net 中的技能已经生锈了，而且我不在我的开发机器上，所以试试这个，如果有什么不起作用，请告诉我。

# objective-c - 如果引用没有指向任何实例，为什么仍然可以调用实例方法？

> ID：10379613
> 
> 赞同：0
> 
> 时间：2012-04-30T06:52:09.157
> 
> 标签：objective-c, objective-c-runtime

> **可能重复：**
> [向 nil 发送消息？](https://stackoverflow.com/questions/156395/sending-a-message-to-nil)

如果一个引用`NSMutableArray`根本没有指向任何对象，因为没有实例化，为什么仍然可以调用实例方法而没有任何运行时错误？

```
NSMutableArray *foo = nil;
NSLog(@"[null count] is %i", [foo count]);

NSLog(@"[null count] again is %i", [(NSMutableArray *) nil count]); 
```

上面的行都打印出来，`0`而不是导致错误的内存访问或导致没有实例的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:56:22.023

直接来自*Objective-C 编程语言：* [在 Objective-C 中，向 nil 发送消息是有效的——它在运行时根本没有效果。](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW7)

如果你进一步阅读，你会明白为什么`[nil count]`返回`0`。

# mongodb - heroku 中的应用程序错误（使用播放框架）

> ID：10379614
> 
> 赞同：5
> 
> 时间：2012-04-30T06:52:11.543
> 
> 标签：mongodb, heroku, playframework

我在 java 中使用 play-1.2.4 框架并使用 MongoDB 数据库。成功将项目推送到 heroku 存储库中。并尝试打开我的页面，我仍然看到一个错误：应用程序错误

```
An error occurred in the application and your page could not be served. Please try again in a few moments.

If you are the application owner, check your logs for details. 
```

当我输入此`heroku logs`命令时，出现以下错误

```
heroku logs
   2012-05-05T06:00:13+00:00 app[web.1]: ~        _            _
2012-05-05T06:00:13+00:00 app[web.1]: ~  _ __ | | __ _ _  _| |
2012-05-05T06:00:13+00:00 app[web.1]: ~ |  __/|_|\____|\__ (_)
2012-05-05T06:00:13+00:00 app[web.1]: ~ | '_ \| |/ _' | || |_|
2012-05-05T06:00:13+00:00 app[web.1]: ~ |_|            |__/
2012-05-05T06:00:13+00:00 app[web.1]: ~
2012-05-05T06:00:13+00:00 app[web.1]: ~ play! 1.2.4, http://www.p
layframework.org
2012-05-05T06:00:13+00:00 app[web.1]: ~ framework ID is prod
2012-05-05T06:00:13+00:00 app[web.1]: ~ Ctrl+C to stop
2012-05-05T06:00:13+00:00 app[web.1]: ~
2012-05-05T06:00:13+00:00 app[web.1]: ~
2012-05-05T06:00:13+00:00 app[web.1]:
2012-05-05T06:00:14+00:00 heroku[web.1]: Process exited with stat
us 0
2012-05-05T06:00:14+00:00 heroku[web.1]: State changed from start
ing to crashed
2012-05-05T06:05:17+00:00 heroku[run.1]: State changed from creat
ed to starting
2012-05-05T06:05:19+00:00 app[run.1]: Awaiting client
2012-05-05T06:05:20+00:00 heroku[run.1]: State changed from start
ing to up
2012-05-05T06:05:49+00:00 app[run.1]: Error R13 (Attach error) ->
 Failed to attach to process
2012-05-05T06:05:50+00:00 heroku[run.1]: Process exited with stat
us 1
2012-05-05T06:05:50+00:00 heroku[run.1]: State changed from up to
 complete 
```

当我使用运行 heroku 进程时`heroku ps`，它告诉我

```
Process  State           Command
-------  --------------  ------------------------------------
web.1    crashed for 5m  play run --http.port=$PORT $PLAY_O.. 
```

当我运行时`heroku run console`，它向我显示以下错误：

正在运行连接到终端的控制台...

```
C:/Program Files/Heroku/l ib/heroku/client/rendezvous.rb:33:in `initialize': A connection a ttempt failed because the connected party did not properly respon d after a period of time, or established connection failed becaus e connected host has failed to respond. - connect(2) (Errno::ETIM EDOUT)
        from C:/Program Files/Heroku/lib/heroku/client/rendezvous .rb:33:in `open'
        from C:/Program Files/Heroku/lib/heroku/client/rendezvous .rb:33:in `block in start'
        from C:/Program Files/ruby-1.9.3/lib/ruby/1.9.1/timeout.r b:58:in `timeout'
        from C:/Program Files/Heroku/lib/heroku/client/rendezvous .rb:27:in `start'
        from C:/Program Files/Heroku/lib/heroku/command/run.rb:35 :in `index'
        from C:/Program Files/Heroku/lib/heroku/command.rb:148:in  `run'
        from C:/Program Files/Heroku/lib/heroku/cli.rb:9:in `star t'
        from C:/Program Files/Heroku/bin/heroku:28:in `<main>' 
```

我在这里错过了什么？谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:19:12.257

您需要`%prod`在 Heroku 上以模式运行 Play。确保您`--%prod`的`Procfile`. 这是一个示例`Procfile`：

```
web:    play run -Xmx256M --%prod --http.port=$PORT -Dprecompiled=true 
```

# xcode - 如何在不启动 Xcode 的情况下运行 iPhone 模拟器？

> ID：10379622
> 
> 赞同：252
> 
> 时间：2012-04-30T06:53:03.760
> 
> 标签：xcode, osx-lion, ios-simulator

在我运行 Snow Leopard 的旧 Mac 上，我可以在聚光灯下键入“ios”，它会自行启动 iPhone/iPad 模拟器。

从那以后，我不得不让一台新机器运行 Lion。我已经为 Lion 安装了 Xcode，我已经从首选项面板安装了开发人员工具选项。

但是“ios”选项不再存在:(现在唯一的方法似乎是运行 Xcode，创建一个空项目，然后使用运行选项启动模拟器。

我已经搜索并搜索了 intertubes 和 facewebs，但没有任何帮助。

有谁知道如何只在 Lion 上运行模拟器？

更新：这是对下面@ike_love 线程的回应。不能保证该答案适用于所有优胜美地机器。

[![在此处输入图像描述](../Images/8bbf6998f4b43e2ee7bc4a0e92d40488.png)](https://i.stack.imgur.com/mtMeC.png)

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2012-04-30T07:02:53.040

假设您已经安装了 Xcode `/Applications`，那么您可以从命令行执行此操作以启动 iPhone 模拟器：

```
$ open /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app 
```

（Xcode 6+）：

```
$ open /Applications/Xcode.app/Contents/Developer/Applications/iOS Simulator.app 
```

您可以从您的桌面创建一个符号链接以使其更容易：

```
$ ln -s /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app ~/Desktop 
```

（Xcode 6+）：

```
$ ln -s /Applications/Xcode.app/Contents/Developer/Applications/iOS Simulator.app ~/Desktop 
```

正如@JackHahoney 所指出的，您还可以`alias`在您的`~/.bash_profile`:

```
$ alias simulator='open /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/De‌​veloper/Applications/iPhone\ Simulator.app' 
```

（Xcode 6+）：

```
$ alias simulator='open /Applications/Xcode.app/Contents/Developer/Applications/iOS\ Simulator.app' 
```

（Xcode 7+）：

```
$ alias simulator='open /Applications/Xcode.app/Contents/Developer/Applications/Simulator.app' 
```

这意味着您可以使用一个易于记忆的单词从命令行启动 iPhone 模拟器：

```
$ simulator 
```

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2013-02-17T09:57:26.293

无需摆弄命令行的最简单方法：

1.  启动 Xcode 一次。
2.  运行ios模拟器
3.  拖动 ios 模拟器图标以停靠它。

下次要使用它时，只需单击 Dock 中的 ios 模拟器图标即可。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2015-09-23T23:54:58.150

在 XCode 7+ 中，位置现在是

```
/Applications/Xcode.app/Contents/Developer/Applications/Simulator.app 
```

从命令行运行它

```
$ open -a Simulator 
```

希望对某人有所帮助

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2019-10-16T19:43:29.397

从终端你必须运行：

```
open -a Simulator 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2015-11-02T16:31:21.033

无需在命令行上执行任何操作。

只需使用聚光灯运行simulator.app

[![聚光灯搜索simulator.app的屏幕截图](../Images/308790df6ebc9df836b2e40aa518f966.png)](https://i.stack.imgur.com/Q2tr9.png)

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2012-04-30T07:02:48.340

看图对你有帮助吗![在此处输入图像描述](../Images/5cb2f0fd9420f2e7134a795e6e601587.png)

**编辑**

现在使用新的 Xcode，如果 Xcode 的图标在停靠栏上，您只需右键单击它并形成您可以选择的菜单`Open Developer Tool`，在子菜单中您可以选择`iOS Simulator`打开模拟器而不打开 Xcode。！![在此处输入图像描述](../Images/9ca214e5fc7b229596ec6a24d2def493.png)

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2014-04-04T19:04:47.883

如果您为其创建 Automator 启动器，则可以通过聚光灯启动它*：*

1.  打开`Automator.app`
2.  选择应用类型
3.  选择操作 > 库 > 实用程序 > 启动应用程序
4.  打开可以启动的应用程序的下拉菜单并选择其他
5.  您不能直接选择模拟器应用程序，因为它在`Xcode.app`包内。因此，您必须在单独的 Finder 窗口中导航到它并将其拖到文件选择器窗口中。根据您的 Xcode 版本（从最旧到最新），它将位于以下路径之一：
    *   `/Applications/Xcode.app/Contents/Developer/iOS Simulator.app`
    *   `/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iOS Simulator.app`
    *   `/Applications/Xcode.app/Contents/Developer/Applications/Simulator.app`
6.  最后，将此 Automator 应用程序保存在您的应用程序文件夹中`iOS Simulator.app`

![创建 Automator 应用程序](../Images/3fd3a5a79f2b25e7e8f71d59b8820b11.png)

要为您刚刚制作的 Automator 应用程序获得一个漂亮的图标，您可以执行以下操作：

1.  右键单击`iOS Simulator.app`并选择获取信息
2.  单击左上角的图标并`Cmd-C`复制它
3.  右键单击您的 Automator 应用程序并选择获取信息
4.  点击左上角的图标并做`Cmd-V`粘贴

![复制图标](../Images/079cd51f4e339c71fb5ce8fbf300e8d0.png)

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2016-04-21T17:09:10.937

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2012-04-30T07:02:34.333

尝试以下启动 iphone 模拟器的说明：

转到**应用程序文件夹**--> **Xcode**应用程序--> 右键**单击​​以显示包内容**--> 现在在 xcode**内容**中显示文件-->**开发人员**-->**平台**--> **iPhoneSimulator.platform** -->**开发人员**-->**应用程序**- > 现在显示**iOS 模拟器**应用点击启动 iphone 模拟器...！

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2014-09-22T08:36:24.513

在 Xcode 6 中，模拟器的位置已更改为：

```
/Applications/Xcode.app/Contents/Developer/Applications/iOS Simulator.app 
```

在这里找不到了：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app 
```

我希望这对某人有所帮助，因为我有时想从终端启动模拟器。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2013-09-25T09:01:50.850

上面的解决方案在 ZSH 中对我不起作用。我需要转义 iPhoneSimulator.platform 中的点。这对我有用：

```
alias simulator="open /Applications/Xcode.app/Contents/Developer/Applications/iOS\ Simulator.app" 
```

这可能是更具弹性的版本：

```
alias simulator="open -a 'iOS Simulator'" 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2015-07-15T22:30:55.597

有一个更简单的方法：

1.  点击`command`+ `space`，将出现 Spotlight Search
2.  输入`iOS Simulator`并点击`return`

完毕。

----- 跟进@E。Maggini 投反对票---

是的，您仍然可以`iOS Simulator`使用`Spotlight`.

![在此处输入图像描述](../Images/9e2cd39b035734bc6565c12b45119878.png)

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-07-12T09:53:55.357

在终端中：对于 Xcode 9.x 及更高版本

```
$ open /Applications/Xcode.app/Contents/Developer/Applications/Simulator.app 
```

对于 Xcode-beta 9.x 及更高版本

```
$ open /Applications/Xcode-beta.app/Contents/Developer/Applications/Simulator.app 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2020-08-21T14:15:46.347

我知道这是一个老问题，但这可能对使用**Xcode11+**和**macOS Catalina**的人有所帮助。

要通过终端查看可用模拟器的列表，请键入：

```
$ xcrun simctl list 
```

这将返回设备列表，例如 iPhone 11 Pro Max (6A7BEA2F-95E4-4A34-98C1-01C9906DCBDE)（关机）。长字符串是设备 UUID。

要通过终端启动设备，只需键入：

```
$ xcrun simctl boot 6A7BEA2F-95E4-4A34-98C1-01C9906DCBDE 
```

要关闭它，请键入：

```
$ xcrun simctl shutdown 6A7BEA2F-95E4-4A34-98C1-01C9906DCBDE 
```

或者，要启动模拟器：

```
open -a simulator 
```

来源：[如何在 Mac 上启动 iOS 模拟器和 Android 模拟器](https://medium.com/@abrisad_it/how-to-launch-ios-simulator-and-android-emulator-on-mac-cd198295532e)

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2019-05-28T06:57:49.487

最简单的方法是使用 Spotlight 搜索。只需单击 CMD+Space 并输入搜索模拟器。像这样：

[![在此处输入图像描述](../Images/d745d28b07cdf968d18bf0c0002afac2.png)](https://i.stack.imgur.com/3P7hb.png)

几秒钟后，模拟设备将被加载：

[![在此处输入图像描述](../Images/a8d9598f14b41df89019ac6419f1af5b.png)](https://i.stack.imgur.com/bgfQp.jpg)

要切换到另一台设备，您可以使用**硬件 -> 设备下的菜单**

您可以在硬件菜单下使用几种不同的酷工具，例如方向更改、手势、按钮、FaceID、键盘或音频输入。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-09-19T22:44:50.023

1.  进入查找器。
2.  在边栏上，单击应用程序。
3.  在应用程序中查找 Xcode。
4.  通过您拥有的任何设置右键单击 Xcode（通常是两指单击 [not tap]）。
5.  单击“显示包内容”。
6.  进入目录文件夹。
7.  搜索模拟器。
8.  等待 30 秒以使其加载。
9.  向下滚动并找到 iOS 模拟器。
10.  您可以将其拖到 Dock 上以便于访问。

我希望这有帮助！

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-08-06T15:40:19.180

我根据@trojanfoe 的回答创建了一个自动化应用程序，因此您可以直接从您的 Dock 启动 iOS 模拟器[https://github.com/tsdexter/ios-simulator-expo-utilities/](https://github.com/tsdexter/ios-simulator-expo-utilities/)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-10-02T15:14:38.967

## 如果您试图一次打开多个不同的模拟器：

打开*模拟器*应用程序，**而不是**Xcode。

然后文件>>打开设备>>选择iOS版本>>选择设备。

[![在此处输入图像描述](../Images/efcbb1d4886feac213f11c93f1141df8.png)](https://i.stack.imgur.com/YdZB6.jpg)

[“开放设备”的位置在不同的 Xcode 版本中发生了变化，因此它可能位于不同的位置]

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-04-17T02:59:48.433

从终端只需运行以下命令：

```
ios-sim  start 
```

或者，将其添加到您的`~/.profile`代码中以节省一些击键：

```
alias ios="ios-sim  start" 
```

不确定此命令可用的 Max OS X 和 Xcode 版本。我分别运行 10.10.3 和 6.3。

# jquery - 如何将值参数传递给 Bootstrap 中的 modal.show() 函数

> ID：10379624
> 
> 赞同：29
> 
> 时间：2012-04-30T06:53:09.387
> 
> 标签：jquery, twitter-bootstrap, modal-dialog, jquery-events

我有一个页面显示当地咖啡馆的列表。当用户点击某个咖啡馆时，会显示一个模式对话框，其中已经预先填写了“咖啡馆名称”。该页面包含许多咖啡馆名称，表单应包含他单击的“咖啡馆名称”。

以下是生成为带有链接按钮的文本的咖啡馆名称列表

```
 <table class="table table-condensed  table-striped">
      <tbody>   
        <tr>
          <td>B&Js
          </td>
          <td>10690 N De Anza Blvd </td>
          <td>
              <a class="btn btn-primary" data-toggle="modal" onClick="$('#createFormId').modal('show')" >Announce</a>
          </td>
        </tr>

        <tr>
          <td>CoHo Cafe
          </td>
          <td>459 Lagunita Dr </td>
          <td>
              <a class="btn btn-primary" data-toggle="modal" onClick="$('#createFormId').modal('show')" >Announce</a>
          </td>
        </tr>

        <tr>
          <td>Hot Spot Espresso and Cafe
          </td>
          <td>1631 N Capitol Ave </td>
          <td>
              <a class="btn btn-primary" data-toggle="modal" onClick="$('#createFormId').modal('show')" >Announce</a>
          </td>
        </tr>

      </tbody>
    </table> 
```

这是模态形式

```
<div class="modal hide fade" id="createFormId"">
<div class="modal-header">
    <a href="#" class="close" data-dismiss="modal">&times;</a>
    <h3>Create Announcement</h3>
</div>
<div class="modal-body">
    <form class="form-horizontal" method="POST" commandName="announceBean" action="/announce" >
        <input type="hidden" name="cafeId" value="104" />
        <fieldset>
            <div class="control-group">
                <label class="control-label" for="cafeName">Where I am Coding</label>
                <div class="controls">
                    <input id="cafeName" name="cafeName" class="input-xlarge disabled" type="text" readonly="readonly" type="text" value="B&amp;Js"/>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="date">Date</label>
                <div class="controls">
                    <input type="text" class="input-xlarge" id="date" name="date" />
                    <p class="help-block"></p>
                </div>
            </div>
            <div class="control-group">
                <div class="controls">
                    <input type="submit" class="btn btn-primary" value="create" />
                    <input type="button" class="btn" value="Cancel" onclick="closeDialog ();" />
                </div>
            </div>
        </fieldset>
    </form>
</div> 
```

问题是如何将实际值传递给模态表单的“值”属性？

```
<input type="hidden" name="cafeId" value="104" /> 
```

表单“show”事件由“onlick”事件触发

```
<a class="btn btn-primary" data-toggle="modal" onClick="$('#createFormId').modal('show')" >Announce</a> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-30T07:19:13.643

你可以这样做：

```
<a class="btn btn-primary announce" data-toggle="modal" data-id="107" >Announce</a> 
```

然后使用 jQuery 绑定点击并发送 Announce data-id 作为 modals #cafeId 中的值：

```
$(document).ready(function(){
   $(".announce").click(function(){ // Click to only happen on announce links
     $("#cafeId").val($(this).data('id'));
     $('#createFormId').modal('show');
   });
}); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-18T17:44:43.760

利用

```
$(document).ready(function() {
    $('#createFormId').on('show.bs.modal', function(event) {
        $("#cafeId").val($(event.relatedTarget).data('id'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-19T10:30:37.557

我想分享我是如何做到这一点的。在过去的几天里，我一直在思考如何将几个参数传递给引导模式对话框。经过多次头部抨击，我想出了一个相当简单的方法来做到这一点。

这是我的模态代码：

```
<div class="modal fade" id="editGroupNameModal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div id="editGroupName" class="modal-header">Enter new name for group </div>
        <div class="modal-body">
          <%= form_tag( { action: 'update_group', port: portnum } ) do %>
          <%= text_field_tag( :gid, "", { type: "hidden" })  %>
          <div class="input-group input-group-md">
          <span class="input-group-addon" style="font-size: 16px; padding: 3;" >Name</span>
          <%= text_field_tag( :gname, "", { placeholder: "New name goes here", class: "form-control", aria: {describedby: "basic-addon1"}})  %>
        </div>
        <div class="modal-footer">
          <%= submit_tag("Submit") %>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div> 
```

这是更改 gid 和 gname 输入值的简单 javascript：

```
function editGroupName(id, name) {
    $('input#gid').val(id);
    $('input#gname.form-control').val(name);
  } 
```

我刚刚在链接中使用了 onclick 事件：

```
//                                                                              &#39; is single quote
//                                                                                   ('1', 'admin')
<a data-toggle="modal" data-target="#editGroupNameModal" onclick="editGroupName(&#39;1&#39;, &#39;admin&#39;); return false;" href="#">edit</a> 
```

onclick 首先触发，更改输入框的 value 属性，因此当对话框弹出时，值已就位以供表单提交。

我希望有一天这对某人有所帮助。干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-26T09:40:05.417

这就是我如何称呼我的模态

```
<a data-toggle="modal" data-id="190" data-target="#modal-popup">Open</a> 
```

这是我在模态中获得价值的方式

```
$('#modal-popup').on('show.bs.modal', function(e) {
    console.log($(e.relatedTarget).data('id')); // 190 will be printed
}); 
```

# jquery - IE 中的 jQuery 选择器太慢了

> ID：10379625
> 
> 赞同：1
> 
> 时间：2012-04-30T06:53:12.403
> 
> 标签：jquery, performance, internet-explorer

如果您在 IE7/IE8 中运行此页面[http://jsfiddle.net/atoswchataigner/euX5F ，您将获得：](http://jsfiddle.net/atoswchataigner/euX5F)

停止运行此脚本？此页面上的脚本导致 Internet Explorer 运行缓慢。如果它继续运行，您的计算机可能会变得无响应。

我基本上运行所有这些脚本来对选择中的选项进行分组。

您是否看到更好的方法来进行这种转换并在 IE 中摆脱这种警报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:12:21.940

你正在运行大量的选择器操作，每一个都不是很有效，尤其是在旧浏览器中。

做一个选择器操作并处理该操作中的所有选项值要好得多。您可以通过为选项值构建一个查找表来为您提供适当的类名称来做到这一点。这是一个例子。我没有填写整个表格，因为它需要输入很多内容（您可以输入其余部分），但这是它的工作方式。

这应该比你所拥有的快很多倍（可能快 100 倍以上）：

```
 // class names used for various options
    var optionClasses = [
        "ART - LETTRES - SPECTACLE",
        "ECONOMIE",
        "ETRANGER"
    ];
    // the number in the option map corresponds to an array index 
    // in the optionClasses array.  This is done to avoid repeating
    // the same string over and over
    var optionMap = {
        'ART - LETTRES - SPECTACLE': 0,
        'A la une ALS': 0,
        'Cirque' : 0,
        'Festival multidisciplinaire': 0,
        'Littérature-édition': 0,
        'Musique classique': 0,
        'Photographie': 0,
        'Cinéma': 0,
        /* .... */
        'ECONOMIE': 1,
        'A la une Economie': 1,
        /* ... */
        'ETRANGER': 2,
        'A la une Etranger': 2
        /* fill in the rest of the data here */
    };

    jQuery("select option").each(function() {
        if (this.value && this.value in optionMap) {
            var clsNum = optionMap[this.value];
            $(this).addClass(optionClasses[clsNum]);
        }
    }); 
```

它很简单，并且执行速度应该比以前快很多倍。它有一个选择器操作，然后使用哈希表查找来为给定的选项值找到适当的类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:04:28.287

这些选择器在 Firefox 中似乎也很慢。

我猜想“[option value='...']”部分会导致 jQuery 扫描整个文档中的所有元素以寻找匹配的元素。它对每个选择器中的每个*术语*（',' 之间的部分）执行此操作。这是很多工作。

我有一个小提琴，发现在 Firefox 中，如果我使用这样的方法，它的响应速度会更快：

```
var options = $("option");
var $XXX = options.filter("[value=VALUE1], [value=VALUE2], [value=VALUE3]");
// etc 
```

这样做是首先创建一个仅包含选择选项的 jquery 对象/集合，然后从那里使用选择器过滤掉所需的选项。

尝试修改您的代码以使用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:06:22.850

据我了解，您的代码所做的是根据第一个选择加载第二个选择的选项。

将如此大量的元素放在 DOM 上是很费力的。与其加载异常长的 DOM 元素行，不如将数据存储为数组和对象，并在必要时加载。这样，选择开始时将是空白的。

```
//storing second options as objects and arrays
var second = {
    art : [
        {text:'artOption1Text',value:'artOption1Value'},
        {text:'artOption2Text',value:'artOption2Value'},
        {text:'artOption3Text',value:'artOption3Value'}
        ...
    ],
    social : [
        {text:'socialOption1Text',value:'socialOption1Value'},
        {text:'socialOption2Text',value:'socialOption2Value'},
        {text:'socialOption3Text',value:'socialOption3Value'}
        ...
    ]
    ...
}

var secondSelect = $('secondselect');          //reference your second select

$('firstselect').on('change',function(){       //on change of first select
    var newOptions = second[this.value];       //get the new values

    secondSelect.children().remove();          //remove current options

    $.each(newOptions,function(index,option){ //add the new options

        $('<option>')
            .attr('value',option.value)
            .text(option.text)
            .appendTo(secondSelect);
    });
} 
```

# locking - 使用JPA时如何使用mysql get_lock？

> ID：10379626
> 
> 赞同：2
> 
> 时间：2012-04-30T06:53:21.493
> 
> 标签：locking, jpa-2.0

我想利用 mysql 的 get_lock() 函数作为全局锁，但这看起来不可能，因为我也使用 JPA 作为我的数据库层。因为 get_lock() 是基于连接的，这意味着您必须使用相同的连接来锁定/解锁，但是，没有本地方法可以从 JPA 检索 JDBC 连接。这是否意味着 get_lock()/release_lock() 在 JPA 中是完全不可能的？我不喜欢打开底层 JPA 实现，因为它不可移植。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:29:32.037

我终于通过使用 JDBC 数据源和 JPA 解决了这个问题

# eclipse - Eclipse 在 JRE 中运行，但需要 JDK

> ID：10379630
> 
> 赞同：-1
> 
> 时间：2012-04-30T06:53:46.460
> 
> 标签：eclipse, java

当我重新启动 eclipse 时，我总是遇到上述错误。我已经浏览了 stackoverflow 中的其他帖子并了解如何解决问题（即通过更改 windows>preferences 中的配置并编辑 eclipse.ini 文件）。

但基本问题是该错误的含义是什么？请有人解释并提供有关 Eclipse 如何在内部使用这些偏好设置的资源的链接。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:37:19.777

JRE 运行 Java 应用程序。JDK 还可以编译 Java 源代码，这正是您的 Eclipse 正在尝试做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:15:38.800

基本上， [Apache Maven](http://maven.apache.org)需要一个 Java 编译器 (javac)，它不是 Java 运行时环境的一部分。(JRE) 所以它要求使用 Java 开发工具包 (JDK)，因为 JDK 包含 Java 编译器。可以在下面的链接中找到最近的解释。

[http://wiki.eclipse.org/M2E_FAQ](http://wiki.eclipse.org/M2E_FAQ)问题“无法找到 Javac 编译器错误”。[可以在此处](http://kthoms.wordpress.com/2011/01/10/using-the-jdt-compiler-in-normal-maven-builds/)找到如何强制 Apache Maven 使用 Eclipse Java 开发工具 (JDT) 作为其默认编译器。

# php - 带有php和delphi的简单套接字？

> ID：10379635
> 
> 赞同：6
> 
> 时间：2012-04-30T06:53:58.967
> 
> 标签：php, delphi, sockets

我有一个使用 TTCPServer 组件用 Delphi 编写的简单服务器应用程序，它有一个非常基本的 OnAccept 事件过程，如下所示......

“127.0.0.1 上的侦听器通过端口：10000”

```
procedure TMainWindow.TcpServerAccept(Sender: TObject;
  ClientSocket: TCustomIpClient);
var
  S: String;
begin
  S := ClientSocket.Receiveln();
  ShowMessage(S);
  ShowMessage(IntToStr(Length(S)));

  Memo1.Lines.Add(S);
end; 
```

还有一个像这样的简单的php页面......

```
<?php
$address = '127.0.0.1';
$port = 10000;
$sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
socket_connect($sock, $address, $port);

socket_set_option($sock, SOL_SOCKET, SO_KEEPALIVE, 1);
$msg = 'Hello...!';
echo socket_write($sock, $msg, strlen($msg));

socket_close($sock);
?> 
```

现在的问题是，当我尝试使用 php 页面写入连接的套接字时，没有发生错误，但是 Delphi 应用程序（侦听器）中接收到的文本向我显示了错误的结果，例如“效汬⹯⸮！”

我应该怎么办 ？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T07:48:36.777

此功能应该满足您的需求（我希望）

```
function UTF8ToUTF16(AUTF8String: RawByteString): String;
begin
  SetCodePage(AUTF8String, 0, False);
  Result := AUTF8String;
end; 
```

现在你应该能够做到这一点：

```
procedure TMainWindow.TcpServerAccept(Sender: TObject;
  ClientSocket: TCustomIpClient);
var
  S: String;
begin
  S := UTF8ToUTF16(ClientSocket.Receiveln());
  ShowMessage(S);
  ShowMessage(IntToStr(Length(S)));

  Memo1.Lines.Add(S);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:25:59.220

正如**“Remy Lebeau”**所说，Delphi 2009+ 默认情况下以 Unicode 形式读取和写入字符串，但 PHP 十年关于根据字符串变量上下文进行编码。为了解决这个问题，我们需要在 Delphi 监听器应用程序中使用类似“Unicode2Ascii”的函数......

# javascript - 如何识别网页是否有地址栏或隐藏

> ID：10379636
> 
> 赞同：-1
> 
> 时间：2012-04-30T06:54:00.313
> 
> 标签：javascript, html, ipad

> **可能重复：**
> [如何检测 Web 应用程序正在应用程序模式或 safari 模式下运行](https://stackoverflow.com/questions/10379867/how-to-detect-that-web-app-is-runing-in-app-mode-or-in-safari-mode)

我希望如果我的网页在 safari 上使用地址栏打开，它应该加载 browser.css 文件，如果它从 iPAd 设备的桌面打开，那么它会在没有地址栏的情况下加载，那么它应该使用 ipad.css 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:24:36.593

如果没有太大变化，您可以根据视口的高度使用媒体查询应用样式：http: [//www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

```
@media (orientation: portrait, min-height: 800px) { background-color: red; } 
```

这样做的问题是您必须事先知道分辨率（如果它是特定于 iPad 的应用程序，这是完全可用的）

# c# - 将 XML 文档的一部分创建为字符串

> ID：10379641
> 
> 赞同：0
> 
> 时间：2012-04-30T06:54:37.380
> 
> 标签：c#, asp.net, .net, xml, xmldocument

我得到一组具有默认值的“属性”，我想创建一个字符串，它是如下的部分 xml 文档（不是完整的 xml 文档）。我想在每个属性之间都有一个“标签”。在这种情况下，我发现字符串连接是可行的选择。在.Net中有没有更好的方法来做到这一点？

```
<XmlNodes>
<ChildNode Attribute1 ="100"    Attribute2="200"    Attribute3 ="0"/>
<ChildNode Attribute1="100"     Attribute2="200"    Attribute3 ="0"/>
...
</XmlNodes> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:12:06.340

Here's a fun little hack that at least only resorts to string manipulation late in the piece:

```
var nodes = new XElement("XmlNodes");
foreach (var i in Enumerable.Range(1,10))
{
    nodes.Add(new XElement("ChildNode", 
        new XAttribute("Attribute1", 100), 
        new XAttribute("Attribute2", 200), 
        new XAttribute("Attribute3", 0)));
}

var result = nodes.ToString().Replace("\" A", "\"\tA"); // **" A** becomes **"\tA** 
```

But I maintain that if this is about providing 'templates' for people to edit then you're best off getting them to edit it in a non-XML format (like CSV) and then convert to XML when you parse it.

# .net - 更好的字符串椭圆实现

> ID：10379642
> 
> 赞同：0
> 
> 时间：2012-04-30T06:54:38.297
> 
> 标签：.net

如果长度超过某个限制，我想省略字符串。我已经从一个简单的例子中看到了很多关于椭圆的例子，如果一个限制超过其他的考虑使用完整的单词，那么它不会破坏句子的可读性并且不会将单词修剪成两半。

手机使用基于第二种方法的文本修剪。我想知道我们是否可以通过字符串椭圆实现更进一步？喜欢考虑`,` `( )` `[ ]`等？

这就是我到目前为止所做的

```
public static string TrimString(string str, int charLength)
        {
            if (str.Length >= charLength)
            {
                str = str.Substring(0, charLength - 3);
                var chunks = str.Split(' ');
                if(chunks.Length >1)
                    chunks = chunks.Take(chunks.Length - 1).ToArray();
                str = string.Format("{0}...", string.Join(" ", chunks));
            }
            return str;
        } 
```

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:59:50.710

org.apache.commons.lang3.StringUtils 中有几个方法。

# html - ipod 和 xcode 模拟器之间的 HTML 元素位置存在差异？

> ID：10379643
> 
> 赞同：0
> 
> 时间：2012-04-30T06:54:38.407
> 
> 标签：html, css, scroll, mobile-application

这是我的代码。底部按钮上有一个 jQuery 函数，它使列表向上滑动进入视图（这里的列表是空白的，它由 javascript 填充。这里只是空白行，如您所见。）

该列表从按钮的正上方向上滑动到视图中，并在它碰到顶部的 Home div 时停止。然后我可以滚动列表，而按钮和主 div 保持固定在屏幕的顶部和底部。反正在模拟器上。在 ipod 上，一旦列表弹出视图，当我向下滚动时，主 div 和按钮与其他所有内容一起向上移动，就好像它们是列表中的元素一样！有没有搞错？

这是一个使用PhoneGap 制作的移动应用程序。

```
 <body>

        <div style="position:fixed; width:100%; border-bottom: 3px solid; z-index: 19; background:#FFFFFF; padding:5px;"> 
            <a style="text-decoration:none; z-index:20;" href="index.html">Home</a>
        </div>
        <br />

        <div id="map_canvas" style="width:100%; margin-top:10px; height:400px;"></div>

        <div style="position:relative">

            <div id="resultsList" style="background: #FFFFFF; width:100%; margin-top:15px; height: 400px; z-index:1; position:absolute; bottom:0; left:0; display:none">

                <br id="top"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/>
                <hr class="filler"/>
                <br class="filler"/> 

            </div>

        </div>

        <div style="position:fixed; width:100%; border-top: 3px solid; z-index: 19; background:#FFFFFF; padding:5px;"> 
            <button id="bottombar" type="button" style="z-index:20; padding-bottom:5px;">Show as List</button>
        </div>

        <!--Maps API Key
         AIzaSyD52tRfTY1FtEgXQpvu9-jN5AOz-2pxQg0
         -->

    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:40:10.547

这就是一些智能手机处理位置的方式：固定的，当你滚动时它们会移动然后回弹。

[Sencha Touch](http://www.sencha.com/products/touch/)或[jQuery Mobile](http://jquerymobile.com/)可能会帮助您以一种不会出错的方式实现您的样式

# javascript - 如何使用 jquery 更改标签上的永久颜色？

> ID：10379644
> 
> 赞同：0
> 
> 时间：2012-04-30T06:54:55.897
> 
> 标签：javascript, jquery, html, css

单击按钮时，我的 .Post() 中有以下代码：

```
if (Comment != null && Grade > 0) {
    $("navigation").attr('a[data-id="' + QuestionID + '"]')
                   .css({ "background-color": "green" });
} else if (Comment == null && Grade == null) {
    $('a[data-id="' + QuestionID + '"]').css({ "background-color": "#D8D8D8" }); 
```

如果我关闭我的 web 应用程序或只是刷新它，颜色就消失了。即使我关闭或刷新，如何使颜色永远保持不变我必须添加类或其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:10:37.110

好的，那么简短的回答：**你不能**。

**长答案：** CSS 文件存储在**远程**服务器上并根据请求提供（通过`<link />`HTML 文档头部的标签）。JavaScript 在您的**本地**计算机上的浏览器中执行（除非您正在运行 node.js，我想）。因此，只要该特定脚本实例/页面视图正在运行，您的更改就存在。重新加载页面会重新请求（取决于缓存设置）CSS 文件并重新加载它。

因此，除非您希望用户能够自由修改您的服务器文件（一个非常糟糕的主意），否则您真的无法做您想做的事……

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T06:58:31.373

将此代码移至 javascript 函数，例如函数 colorChange() 并调用此函数 onLoad() 和 onClick()（按下按钮时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:05:55.413

我认为你必须找到一种方法来永久标记它，比如添加一个类，因为这样你就可以编辑你的 CSS 并且它已经解决了。
我想你是想发表评论？在服务器端代码中添加该类或其他内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T07:11:21.617

您需要将颜色状态保存在浏览器 cookie 中，否则您无法处理页面刷新。将颜色更改保存在 cookie 中，并添加 onLoad 处理程序，该处理程序应检查 cookie 是否存在并相应地标记更改

我假设您使用的是 jQuery，因此您可以尝试

```
$.cookie("colorSet", "true", { expires: 7 }); 
```

和您页面的 onLoad 方法，您可以再次检查

```
$.cookie("colorSet") == "true" 
```

再次进行更改。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-30T07:06:12.693

在 jquery 中，您可以在单击功能完成后添加一个类：

```
$(".navigation").onclick{function(){
        $(".class_name").addClass(); 
    }
)}; 
```

# opengl - 如何在OpenGL中绘制多个立方体

> ID：10379645
> 
> 赞同：8
> 
> 时间：2012-04-30T06:55:11.230
> 
> 标签：opengl

我想`glutSolidCube`在空间的某些点上绘制几个立方体。我发现的示例只是调用`glutSolidCube`并且它可以工作，但是为我绘制立方体的唯一方法是如果线包含在 中`glBegin(GL_POLYGON)`，这在我看到的示例中不是必需的，我只得到一个立方体而不是一些。我所拥有的是：

```
glColor3f(1, 0, 0);
glLoadIdentity();
glTranslatef(5,2,1);
glutSolidCube(1);

glLoadIdentity();
glTranslatef(10,8,0);
glutSolidCube(1);

glLoadIdentity();
glTranslatef(3,7,9);
glutSolidCube(1);

glLoadIdentity();
glTranslatef(1,4,6);
glutSolidCube(1); 
```

当我运行它时，什么也没有发生。我知道这些点在我的视野之外没有问题，因为如果我在相同的点上绘制顶点，我可以看到它们。据我从阅读的示例和文档中可以看出，我没有做任何不正确的事情。有人可以告诉我我做错了什么或者给我一段绘制多个立方体的代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T18:44:01.893

尝试这个：

```
glColor3f(1, 0, 0);
glPushMatrix();
glTranslatef(5,2,1);
glutSolidCube(1);
glPopMatrix();

glPushMatrix();
glTranslatef(10,8,0);
glutSolidCube(1);
glPopMatrix();

glPushMatrix();
glTranslatef(3,7,9);
glutSolidCube(1);
glPopMatrix();

glPushMatrix();
glTranslatef(1,4,6);
glutSolidCube(1);
glPopMatrix(); 
```

无需重新设置模型视图矩阵`glLoadIdentity()`。请注意，首先您需要调用`glOrtho()`或`glPerspective()`设置一次相机。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T18:45:54.733

```
#include <GL/glut.h>

void init()
{
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_COLOR_MATERIAL);
}

void display()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    GLint viewport[4];
    glGetIntegerv(GL_VIEWPORT, viewport);
    double aspect = (double)viewport[2] / (double)viewport[3];
    gluPerspective(60, aspect, 1, 100);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    // move back a bit
    glTranslatef( 0, 0, -35 );

    static float angle = 0;
    angle += 1.0f;

    glPushMatrix();
        glTranslatef(0,0,0);
        glRotatef(angle, 0.1, 0.2, 0.5);
        glColor3ub(255,0,255);
        glutSolidCube(5);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(10,-10,0);
        glRotatef(angle, 0.1, 0.2, 0.5);
        glColor3ub(255,0,0);
        glutSolidCube(5);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(10,10,0);
        glRotatef(angle, 0.1, 0.2, 0.5);
        glColor3ub(0,255,0);
        glutSolidCube(5);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(-10,10,0);
        glRotatef(angle, 0.1, 0.2, 0.5);
        glColor3ub(0,0,255);
        glutSolidCube(5);
    glPopMatrix();

    glPushMatrix();
        glTranslatef(-10,-10,0);
        glRotatef(angle, 0.1, 0.2, 0.5);
        glColor3ub(255,255,0);
        glutSolidCube(5);
    glPopMatrix();

    glutSwapBuffers();
}

void reshape(int w, int h)
{
    glViewport(0, 0, w, h);
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitWindowSize(640,480);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);
    glutCreateWindow("CUBES");

    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutTimerFunc(0, timer, 0);

    init();

    glutMainLoop();
    return 0;
} 
```

# ruby-on-rails - 在 Rails 中初始化数据库值

> ID：10379651
> 
> 赞同：0
> 
> 时间：2012-04-30T06:55:53.130
> 
> 标签：ruby-on-rails

在我的项目中，我遇到了用户运行应用程序时的情况。系统应该在整个应用程序使用的表中插入一些值。（这些值应该在项目第一次执行时只插入一次）

我试图找出是否有任何初始化函数，如 Rails 中的构造函数。我尝试使用**config/application.rb**，但我不确定它是正确的方法。

请建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T06:58:38.543

如果您要插入一些默认字典数据，如月份名称等，您应该查看`seed.rb`文件，甚至更好地考虑使用`seed_fu`gem ( [https://github.com/mbleigh/seed-fu](https://github.com/mbleigh/seed-fu) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:20:03.700

**是**的，您可以使用迁移将记录插入/编辑/删除表中：

1）创建迁移。

2）在执行中运行数据库查询。喜欢 ：

执行“插入用户（名称，角色）值（'vik'，'admin'）”

3) 在所有插入操作之后运行迁移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:25:02.260

如果您更新了布尔字段或任何类型的整数字段来维护您的应用程序中的状态。第一次，用户运行应用程序，您的代码将在 db 中为该用户插入必要的值并更新布尔/状态字段并将被缓存（仅用于更好的性能，而不是每次都从 db 获取值）。但是每次清除缓存后，它都会将查询发送到数据库；但是获取布尔值（检查用户状态）比检查该用户的所有插入值更快。

# charts - 如何在 Visual Studio 2008 中使用图表控件创建折线图

> ID：10379659
> 
> 赞同：0
> 
> 时间：2012-04-30T06:56:52.310
> 
> 标签：charts, c#-3.0, webforms, asp.net-charts

我下载了 Visual Studio 2008 版本的 MSchart.exe。当我选择图表控件时，它只显示条形图，但我想在带有 X 和 Y 轴的折线图中实现。

考虑在 y 轴上，值以 mm 为单位，从 1 到 1400 值范围。在 x 轴日期/时间上。

我是这个图表控件的新手，如何在 web 表单中使用图表控件创建折线图？

有什么建议吗！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:36:11.223

添加系列后，

```
series.ChartType = SeriesChartType.Line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T06:48:48.940

![在此处输入图像描述](../Images/df3ba72aa8057febe62f8e248778fcf1.png) 属性---系列---图表类型---祝你好运:)

# spring - @Repository 的 XML 替代方法，用于将本机异常转换为 DataAccessException

> ID：10379661
> 
> 赞同：2
> 
> 时间：2012-04-30T06:56:59.610
> 
> 标签：spring, exception

我正在尝试仅使用 XML 语法配置 spring，并遇到将本机资源异常转换为`DataAccessException`. 根据文档，我总是需要放置`@Repository`存储库 bean 并声明`PersistenceExceptionTranslationPostProcessor`bean。我认为这应该是使用 AOP 定义某种过滤器的方法，该过滤器将执行异常翻译，但在文档中找不到类似的东西。这个想法是引入约定，例如“对于以 Dao 结尾的所有内容都应用本地异常翻译”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T09:27:39.237

类似于 @Repository 注释 spring xml 配置看起来像：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
           xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd">
...
        <bean id="translationInterceptor" class="org.springframework.dao.support.PersistenceExceptionTranslationInterceptor" />

        <aop:config>
            <aop:advisor advice-ref="translationInterceptor" pointcut="within(org.example.spring.dao..*Dao)" />
        </aop:config>
...
    </beans> 
```

切入点 "within(org.example.spring.dao..*Dao)" 将拦截器应用于位于包 org.example.spring.dao 的类中的方法，其子包以 "Dao" 后缀结尾

# c# - 使用 BindingNavigator 的双向数据绑定组合框

> ID：10379662
> 
> 赞同：3
> 
> 时间：2012-04-30T06:57:01.430
> 
> 标签：c#, winforms, data-binding

好的，这就是我的困境。我有一个用于维护 SQL 表的 windows 窗体。SQL 表具有指向代码表的外键。我正在使用 BindingNavigator 和 BindingSource 使用文本框、组合框和日期选择器在表单中一次一行地显示该表的内容。该表单在屏幕顶部的组框中显示表的关键字段 BindingNavigator 和称为“Brief Description”的主表字段之一。该组的目的是允许用户键入一个 ID 号，或从组合框中选择一个项目来查看/编辑。（由于我是新用户，无法发布图片）。
我已经设法让表单上显示的数据根据​​ BindingNavigator 的导航进行更改，即返回、前进等，但是当从简要说明组合框中选择一个项目时，我无法让表单显示适当的数据。这一定与我的控件绑定有关。可能我只有一个与 BindingSource 的 Oneway 绑定，而不是 TwoWay 绑定，但我不知道如何使其成为 TwoWay 绑定。

这是设置在 FormLoad 事件中运行的表单的代码：

```
private void SoftwareRequestMaint_Load(object sender, EventArgs e)
{
    try
    {
        //Open connection
        conn.Open();
        //string sqlQuery = "SELECT * FROM Requests; SELECT * FROM Priority; SELECT * FROM Category;" + 
        //    " SELECT * FROM Users; SELECT * FROM System";
        string sqlQuery = "SELECT * FROM Requests ORDER BY BriefDesc; " +
            "SELECT combined = Description + ' [' + convert(varchar,Priority_ID) + ']', Priority_ID  FROM Priority ORDER BY combined; " +
            "SELECT combined = Description + ' [' + convert(varchar,Category_ID) + ']', Category_ID FROM Category ORDER BY combined; " +
            "SELECT combined = Givname + ' ' + Surname, User_ID FROM Users ORDER BY combined; " + 
            "SELECT combined = Description + ' [' + convert(varchar,System_ID) + ']', System_ID FROM System ORDER BY combined";
        da.SelectCommand = new SqlCommand(sqlQuery, conn);

        //due to mulitple SELECTs, set up table mappings other wise need to use Table, Table1, Table2 etc...
        da.TableMappings.Add("Table", "Requests");
        da.TableMappings.Add("Table1", "Priority");
        da.TableMappings.Add("Table2", "Category");
        da.TableMappings.Add("Table3", "Users");
        da.TableMappings.Add("Table4", "System");

        //Go get the data
        da.Fill(ds);

        //Set relationships
        DataColumn colParent =
            ds.Tables["Requests"].Columns["Priority"];
        DataColumn colChild =
             ds.Tables["Priority"].Columns["Priority_ID"];
        DataRelation RequestsPriority =
             new DataRelation("RequestsPriority", colParent, colChild, false);
        ds.Relations.Add(RequestsPriority);

        //Bind the dataset to the binding source
        bsRequests.DataSource = ds.Tables["Requests"];
        bsRequests.Binding.Mode = BindingMode.TwoWay;

        //Bind the Textbox's Text property to the Bindingsource's Requests_ID column
        uxIDTxt.DataBindings.Add("Text", bsRequests, "Requests_ID");
        uxMenuOptTxt.DataBindings.Add("Text", bsRequests, "MenuOpt");
        uxProcessNameTxt.DataBindings.Add("Text", bsRequests, "ProcessName");

        //Set up data sources for combos
        uxBriefDescCbo.DataSource = bsRequests; // ds.Tables["Requests"]; //which one is correct?
        uxBriefDescCbo.DisplayMember = "BriefDesc";
        uxBriefDescCbo.ValueMember = "Requests_ID";
        uxBriefDescCbo.DataBindings.Add("SelectedValue", bsRequests, "Requests_ID");

        uxSystemCbo.DataSource = ds.Tables["System"];   //the source of the data for this cbo
        uxSystemCbo.DisplayMember = "combined";         //the column name of the table to display
        uxSystemCbo.ValueMember = "System_ID";          //the id for that item/record
        uxSystemCbo.DataBindings.Add("SelectedValue", bsRequests, "System"); //Bind the cbo to the Navigator's data source, i.e. the binding source

        uxPriorityCbo.DataSource = ds.Tables["Priority"];
        uxPriorityCbo.DisplayMember = "combined";
        uxPriorityCbo.ValueMember = "Priority_ID";
        uxPriorityCbo.DataBindings.Add("SelectedValue", bsRequests, "Priority");

        uxCategoryCbo.DataSource = ds.Tables["Category"];
        uxCategoryCbo.DisplayMember = "combined";
        uxCategoryCbo.ValueMember = "Category_ID";
        uxCategoryCbo.DataBindings.Add("SelectedValue", bsRequests, "Category");

        uxRequestedByCbo.DataSource = ds.Tables["Users"];
        uxRequestedByCbo.DisplayMember = "combined";
        uxRequestedByCbo.ValueMember = "User_ID";
        uxRequestedByCbo.DataBindings.Add("SelectedValue", bsRequests, "RequestedBy");

        uxAssignedToCbo.DataSource = ds.Tables["Users"];
        uxAssignedToCbo.DisplayMember = "combined";
        uxAssignedToCbo.ValueMember = "User_ID";
        uxAssignedToCbo.DataBindings.Add("SelectedValue", bsRequests, "AssignedTo");

        uxSignedOffByCbo.DataSource = ds.Tables["Users"];
        uxSignedOffByCbo.DisplayMember = "combined";
        uxSignedOffByCbo.ValueMember = "User_ID";
        uxSignedOffByCbo.DataBindings.Add("SelectedValue", bsRequests, "SignedOffBy");

        //Bind text boxes to combos
        uxRequestDetailsRtb.DataBindings.Add("Text", bsRequests, "Details");
        uxItemsChangedRtb.DataBindings.Add("Text", bsRequests, "ItemsChanged");
        uxInstallationInstructionsRtb.DataBindings.Add("Text", bsRequests, "InstallInstr");
    }
    catch (Exception excp)
    {
        SAPSCommon.Instance.ShowErrorMsg(excp.Message);
    }
    finally
    {
        if (conn.State == ConnectionState.Open)
            conn.Close();
    }

    //Reset dirty data flag after populating controls
    dirtyData = false;
} 
```

顺便说一句，组合框是未排序的，即它们的 Sorted 属性设置为“False”。排序是作为 SQL SELECT 语句的一部分完成的。

我究竟做错了什么？有任何想法吗？

问候，沃尔特

# version-control - 在源代码管理中禁用移动命令

> ID：10379673
> 
> 赞同：21
> 
> 时间：2012-04-30T06:58:17.527
> 
> 标签：version-control

我目前必须在我们的 TFS 源代码控制中清理一些源。由于某些原因，某些文件夹的菜单中禁用了移动命令。我能够很好地移动其他文件夹。

为什么某些文件夹显示为灰色？

*   我以 TFS 管理员身份登录
*   我得到了最新版本的资源
*   所有文件夹都已映射
*   没有来自任何用户的待定更改

任何的想法？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-21T08:36:36.487

这通常是因为您没有在本地映射父文件夹。

此外，如果父文件夹映射到不同的位置，从而导致本地映射的结构与服务器文件夹的结构不匹配，也会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-24T12:03:20.250

您应该验证的另一件事是您尝试移动的整个文件夹是否在本地显示。这意味着您必须`Get Latest Version`在移动文件夹之前执行此操作。

在本地显示文件夹下的所有源后，该`Move...`选项变为可用。

# gwt - RequestContext#fire() 中的累积方法调用顺序？

> ID：10379676
> 
> 赞同：1
> 
> 时间：2012-04-30T06:58:25.567
> 
> 标签：gwt, gwt2, requestfactory

Javadoc for`RequestContext#fire()`只说：

> 发送与 RequestContext 关联的累积更改和方法调用。

Flow 部分下的[GWT Moving Parts wiki 条目仅显示：](http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryMovingParts#RequestContext)

> *   通过遍历代理的属性，所有累积的操作都将应用于域对象。
> *   有效负载中的所有方法调用都会被执行。

`ReqestContext`但是这些方法是否会按照它们在客户端实例上“执行”（累积）的顺序在服务器端执行？

对于我的情况，如果我在客户端执行：

```
context.persist().using(proxy)
context.find(proxy.stableId().to(updatingReceiver))
context.fire() 
```

那么我可以确定在服务器端`find()`将被调用，`persist()`所以我`updatingReceiver`将获得更新（`persist()`'ed）实体的代理作为参数？

编辑：

更进一步，我是否可以确定在 response 之后返回客户端`Reciever`将按照与累积相应方法的顺序完全相同的顺序调用？

最后，在所有 s 的操作之后，有没有办法添加一些将在响应处理结束时调用`Receiver`的操作？

我认为这样的事情可能会奏效：

```
requestContext.fire(new Receiver<Void>() {
    @Override
    public void onSuccess(Void response) {
        //Things to do after all receivers
    }); 
```

它似乎真的像我预期的那样工作，但是因为 Javadoc 告诉我的关于`RequestContext.fire(Receiver)`方法的所有内容是：

> 仅用于接收错误或验证失败。

我不是 100% 确定我的假设是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:25:21.607

是的，方法调用的顺序被保留，无论是在服务器端，然后在调用`Reciever`s 时返回到客户端。

队列很简单`ArrayList`，其中附加了调用对象。在服务器端，它们按照收到的顺序进行处理。

-level*`Request-Context`总是* `Receiver`在调用之后调用。`onSuccess`无论调用的结果如何（即使它们都失败），它总是被调用，以表明这批调用已成功处理。它`onFailure`仅在*一般故障*的情况下调用，即网络错误，或在服务器端（反）序列化请求/响应时出现错误。
请参阅[http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/web/bindery/requestfactory/shared/impl/AbstractRequestContext.java?r=10835第345章](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/web/bindery/requestfactory/shared/impl/AbstractRequestContext.java?r=10835#345)

# android - 在 Android 中访问嵌套布局

> ID：10379677
> 
> 赞同：2
> 
> 时间：2012-04-30T06:58:30.640
> 
> 标签：android, android-layout

我有 3 个嵌套布局，并且在访问其中的视图时遇到了困难。下面的主要 xml(A.xml) 包含一个 B 实例，其中包含多个 C.xml。C.xml中有3张图片

说

**A.xml** -> 这是主要的 xml

```
 <include
        android:id="@+id/b"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/B" /> 
```

**B.xml** -> 这是第 2 级

```
 <include
        android:id="@+id/c1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/C" />

    <include
        android:id="@+id/c2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/C" />

    <include
        android:id="@+id/c3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/C" /> 
```

**C.xml** - 这是第 3 级

```
<ImageView
        android:id="@+id/a1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/img1" />

    <ImageView
        android:id="@+id/a2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/img2" />

    <ImageView
        android:id="@+id/a3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/img3" /> 
```

所以在这里，main 包括 B 上的一个实例，该实例又包括 C 的多个实例。所以如果我想从 B 访问 id C3 并且在 C3 中我想让 a2 可见，我应该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:03:48.900

You can Access all views by getting the reference of each views and sub-views as shown below as your example.

```
 View view = findViewById(R.id.b);
        view = view.findViewById(R.id.c1);
        ((TextView)view.findViewById(R.id.txt1)).setText("Got the First one");

        view = findViewById(R.id.b);
        view = view.findViewById(R.id.c1);
        ((TextView)view.findViewById(R.id.txt2)).setText("Got the Second one");

        view = findViewById(R.id.b);
        view = view.findViewById(R.id.c2);
        ((TextView)view.findViewById(R.id.txt1)).setText("Got the forth one"); 
```

similarly you can access other elements also.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:27:30.770

我有一个类似于问题中描述的嵌套布局结构，并且在从我的主视图中获取嵌套一两个级别的视图时没有遇到问题。我将我的 Activity 的内容视图设置为`a.xml`，然后直接从我的 Activity 中找到我需要的视图（无需从二级视图中找到三级视图），如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.a);
  ImageView a1 = (ImageView)findViewById(R.id.a1);
} 
```

# android - sax 解析：从 div 标签中获取值

> ID：10379680
> 
> 赞同：0
> 
> 时间：2012-04-30T06:58:37.190
> 
> 标签：android, xml-parsing, sax

我正在做一个Android应用程序。在我的应用程序中，我必须解析一个 xml 页面。xml 页面中的数据采用以下格式。

```
<root>
<tag1>data</tag1>

<tag2> 
<div>data1</div><div>data2</div>
</tag2>
</root> 
```

试图通过 sax 解析获取数据。

```
 if (localName.equalsIgnoreCase("tag1"))
if (localName.equalsIgnoreCase("tag2")) 
```

但是我没有从 tag2 获取任何数据，而是从 tag1 获取值。我想获取所有数据，包括 div 标签，然后只有我可以在 html 页面中显示数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:07:00.260

使用此示例代码

```
public class SAXParserDemo extends DefaultHandler {

    private String currentTag = "";
    private StringBuffer responseTag;
    private String str;

    @Override
    public void startDocument() throws SAXException {
        super.startDocument();

    }

    @Override
    public void endDocument() throws SAXException {
        super.endDocument();
    }

    @Override
    public void startElement(String uri, String localName, String name,
            Attributes attributes) throws SAXException {
        super.startElement(uri, localName, name, attributes);

        currentTag = localName;
        if ("tag1".equalsIgnoreCase(localName)) {
            responseTag = new StringBuffer();
        }else if ("tag2".equalsIgnoreCase(localName)) {
            responseTag = new StringBuffer();
        }else if ("div".equalsIgnoreCase(localName)) {
            responseTag = new StringBuffer();
        }
    }

    @Override
    public void endElement(String uri, String localName, String name)
            throws SAXException {
        super.endElement(uri, localName, name);
        String responseValue = responseTag.toString().trim();

        if ("tag1".equalsIgnoreCase(localName)) {
            Log.v("TAG", "Tag 1 value "+responseValue);
        }else if ("tag2".equalsIgnoreCase(localName)) {
            Log.v("TAG", "Tag 2 value "+responseValue);
        }else if ("div".equalsIgnoreCase(localName)) {
            Log.v("TAG", "div value "+responseValue);
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        super.characters(ch, start, length);
        str = new String(ch, start, length);

        if ("tag1".equalsIgnoreCase(currentTag)) {
            responseTag.append(str);
        }else if ("tag2".equalsIgnoreCase(currentTag)) {
            responseTag.append(str);
        }else if ("div".equalsIgnoreCase(currentTag)) {
            responseTag.append(str);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:09:19.073

如果您使用 SAX 解析，则需要查找`div`元素，并且需要跟踪父元素（您自己）并确保它是`tag2`. 您正在获取`tag1`元素中的数据（字符），因为它直接包含这些字符。该`tag2`元素不包含任何（非空白）字符，仅包含其他元素。

# asp.net-mvc - Azure 找不到对 EntityFramework 的引用

> ID：10379682
> 
> 赞同：1
> 
> 时间：2012-04-30T06:59:06.553
> 
> 标签：asp.net-mvc, azure, entity-framework-4.3

我的 ASP.NET MVC 4 应用程序在 IIS 和 IEExpress 环境中完美运行。不幸的是，EntityFramework 的不同版本似乎存在问题。所有引用都对 EF 4.1.0.0 的出现进行了双重和三重检查。现在一切都在取消 EF 4.3.0.0。系统似乎在某个地方引用了 4.1.0.0 并试图找到它。没有成功。

所有相关的外部库都标记为“copy local=true”

```
 Microsoft.WindowsAzure.ServiceRuntime Critical: 201 : Role entrypoint could not be created:
System.TypeLoadException: Unable to load the role entry point due to the following exceptions:
-- System.IO.FileLoadException: Die Datei oder Assembly "EntityFramework, Version=4.1.0.0,      Culture=neutral, PublicKeyToken=b77a5c561934e089" oder eine Abhängigkeit davon wurde nicht gefunden.     Die gefundene Manifestdefinition der Assembly stimmt nicht mit dem Assemblyverweis überein. (Ausnahme von HRESULT: 0x80131040)
Dateiname: "EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"

=== Zustandsinformationen vor Bindung ===
LOG: Benutzer = COREI7\markus
LOG: DisplayName = EntityFramework, Version=4.1.0.0, Culture=neutral,   PublicKeyToken=b77a5c561934e089
 (Fully-specified)
LOG: Appbase = file:///D:/Dev/TFS/BettrFit/BettrFit.Azure/csx/Debug/roles/BettrFit/approot/bin
LOG: Ursprünglicher PrivatePath =   D:\Dev\TFS\BettrFit\BettrFit.Azure\csx\Debug\roles\BettrFit\approot\bin
Aufruf von Assembly : System.Web.Http.Data.EntityFramework, Version=4.0.0.0, Culture=neutral,  PublicKeyToken=31bf3856ad364e35.
===
LOG: Diese Bindung startet im default-Load-Kontext.
LOG: Es wurde keine Anwendungskonfigurationsdatei gefunden.
LOG: Die Hostkonfigurationsdatei wird verwendet: 
LOG: Die Computerkonfigurationsdatei von C:\Windows\Microsoft.NET\Framework64\v4.0.30319 \config\machine.config wird verwendet.
LOG: Verweis nach der Richtlinie: EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
LOG: Download von neuem URL   file:///D:/Dev/TFS/BettrFit/BettrFit.Azure/csx/Debug/roles/BettrFit/approot/bin/EntityFramework.DLL.
WRN: Der Vergleich des Assemblynamens führte zum Konflikt: Nebenversion.
ERR: Das Setup der Assembly konnte nicht abgeschlossen werden (hr = 0x80131040). Die Suche wurde beendet.

 ---> System.Reflection.ReflectionTypeLoadException: Mindestens ein Typ in der Assembly kann  nicht geladen werden. Rufen Sie die LoaderExceptions-Eigenschaft ab, wenn Sie weitere Informationen  benötigen.
   bei System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   bei System.Reflection.RuntimeModule.GetTypes()
   bei System.Reflection.Assembly.GetTypes()
   bei Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly    entryPointAssembly)
   --- Ende der internen Ausnahmestapelüberwachung ---
   bei Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly  entryPointAssembly)
   bei Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.CreateRoleEntryPoint(RoleType roleTypeEnum)
   bei Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeRoleInternal(RoleType    roleTypeEnum)
Das Programm "[2372] WaIISHost.exe: Verwaltet (v4.0.30319)" wurde mit Code -1 (0xffffffff) beendet. 
```

希望各位大神给点提示，如何解决这个问题。

我调查了 Data.EntityFramework 程序集：

```
Assembly a = System.Reflection.Assembly.Load("System.Web.Http.Data.EntityFramework, Version=4.0.0.0, Culture=neutral,  PublicKeyToken=31bf3856ad364e35");

foreach (AssemblyName i in a.GetReferencedAssemblies())
{
     Trace.TraceInformation("Ref Assemblies:" + i.Name+" "+i.Version);
} 
```

**它表明它依赖于 EntityFramework 4.1.0.0 作为默认值。** 我怎么能改变呢？Web.Config 似乎在加载时没有使用 - 在这里我已经尝试过重新绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:06:51.047

我通过为我的 Web 角色项目提供 app.config 文件来修复它。似乎 Azure 启动代码使用的是 App.Config 文件，而不是通常使用的 Web.Config。

我的 app.config 添加了 runtime/assemplyreferences 重定向绑定代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T06:32:20.823

请尝试使用程序集重定向将 4.1.0.0 重定向到 4.3.0.0：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
      <bindingRedirect oldVersion="4.0.0.0 - 4.2.0.0" newVersion="4.3.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

此致，

明旭。

# mysql - JPA 映射的性能

> ID：10379683
> 
> 赞同：1
> 
> 时间：2012-04-30T06:59:18.047
> 
> 标签：mysql, performance, hibernate, jpa

现在我正在使用 JPA。我想知道的是：

我有很多表相互映射。当我查看日志时，我看到在一个简单的查询之后，正在从数据库中提取大量信息。如果一次有很多查询会发生什么？或者它会正常工作吗？如何提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:50:43.033

如果你真的有很多实体映射在一起，这确实会导致性能问题。如果您有很多`@OneToMany`或`@ManyToMany`映射，通常会出现这种情况：

```
@Entity
public class A {
    @OneToMany
    private List<B> listB;

    @ManyToMany
    private List<C> listC;

    @OneToMany
    private List<D> listD;
    ...
} 
```

但是，您可以做的一件事是使用延迟获取。这意味着字段的加载可能会延迟到第一次访问。您可以通过使用以下`fetch`属性来实现此目的：

```
@Entity
public class A {
    @OneToMany(fetch=FetchType.LAZY)
    private List<B> listB;

    @ManyToMany(fetch=FetchType.LAZY)
    private List<C> listC;

    @OneToMany(fetch=FetchType.LAZY)
    private List<D> listD;
    ...
} 
```

在上面的示例中，它意味着 listB、listC、listD 在第一次访问列表之前不会从数据库中获取。

延迟获取的具体实现取决于您的 JPA 提供者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:59:34.107

ORM 框架有一个开销。`EntityManager`因为它的级别相当高，它有时需要生成大量的原生 SQL 查询，以便在一两行 JPQL 或纯操作中得到你想要的。

但是，JPA 使用两个缓存 - L1 和 L2。一个在实体级别上运行，另一个在 PersistenceUnits 级别上运行。因此，您可能会看到生成了很多 SQL 查询，但一段时间后，您应该会缓存一些数据。

如果您对性能不满意，可以尝试使用延迟加载的集合或自己获取所需的数据（您可能对[Bozho 的帖子](http://techblog.bozho.net/?p=645)感兴趣）。

最后，如果您发现缓存没有提高您的性能并且手工制作的 JPQL 查询没有正确完成工作 - 您始终可以恢复为普通 SQL 查询。请注意，这些查询会绕过 JPA 缓存，并且可能需要您在执行本机查询（或在活动事务开始时调用它）之前进行一些刷新。

尽管您将选择优化路线 - 首先在您的环境中**对其进行测试，**如果您需要此优化，请自行回答。做一些繁重的测试，性能测试等等。

*“过早的优化是万恶之源。”* D. 克努特

# java - 使用 for 循环遍历对象和方法列表

> ID：10379685
> 
> 赞同：0
> 
> 时间：2012-04-30T06:59:30.437
> 
> 标签：java, object, methods, iteration, accumulator

完整的代码可以在这篇文章的底部找到，但我真正关心的唯一部分是，

```
for(zed = 0; zed<photoes.size(); zed++) {
totesPrice += photoes<zed>.getCost();
totesSize += photoes<zed>.getMegabytes();
totesSpeed = photoes<zed>.getSpeed();
} 
```

理想情况下，totesPrice、totesSize 和 totesSpeed 将是存储在 photoes 列表数组中的对象的 get 方法的总和。

```
// Import classes for class
import java.util.Arrays;
import java.util.List;
import javax.swing.*;
import java.awt.event.*;
import java.text.DecimalFormat;
import java.util.ArrayList;

public class DigitalMain
{
  public static void main(String args[])
  {
    String cont = "Y";
    String heightString,width,bitpsString = "";
    String widthString = "";
    int zed;
    double bitps,pHS,pWS = 0.0;
    double totesSpeed = 0.0;
    double totesPrice = 0.0;
    double totesSize = 0.0;
    DecimalFormat wholeDigits = new DecimalFormat("0");
    DecimalFormat dec = new DecimalFormat("0.00");

    List<DigitalPhoto> photoes = new ArrayList<DigitalPhoto>();
    do
    {
    DigitalPhoto photo = new DigitalPhoto();
    heightString = JOptionPane.showInputDialog("Please enter height");
    pHS = Double.parseDouble(heightString);
    photo.setHeight(pHS);
    widthString = JOptionPane.showInputDialog("Please enter width");
    pWS = Double.parseDouble(widthString);
    photo.setWidth(pWS);
    JOptionPane.showMessageDialog(null, "Height: " + photo.getHeight() + "\nWidth: " + photo.getWidth() + "\nResolution: " + photo.getResolution() + " DPI\nCompression Ratio: " + photo.getCompression() + "\nRequired Storage: " + dec.format(photo.getKilo()) + " Kilobytes.\nPrice of Scanned Photo: $" + dec.format(photo.getCost()) + " dollars.");
    do
    {
    bitpsString = JOptionPane.showInputDialog("Please enter your internet connection speed in BITS not BYTES please.");
    bitps = Double.parseDouble(bitpsString);
    } while (bitps < 0 && bitps > 99999999);
    photo.setSpeed(bitps);

    for(zed = 0; zed<photoes.size(); zed++) {
    totesPrice += photoes<zed>.getCost();
    totesSize += photoes<zed>.getMegabytes();
    totesSpeed = photoes<zed>.getSpeed();
    }
    cont = JOptionPane.showInputDialog("\nType \'Y\' to try again or anything but \'Y\' to use values.");
    photoes.add(photo);
    } while (cont.equalsIgnoreCase("Y"));

    double seconds = transferTime(totesSize, totesSpeed);
    double minutes = seconds / 60;
    double realsec = seconds % 60;

    JOptionPane.showMessageDialog(null, "You will be paying: " + totesPrice + "\nRequired Storage is: " + totesSize + "Required time for transfer is: " + wholeDigits.format(minutes) + " minutes, and " + wholeDigits.format(realsec) + " seconds.");

  }

  public static double transferTime(double totalStorage, double netSpeed) {
    double bits, seconds;
    bits = (totalStorage * 8);
    seconds = (bits / netSpeed);
    return seconds;
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:07:37.867

我认为你必须使用你的泛型...... [因为：每个](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)
你都可以试试这个......

```
 for (DigitalPhoto digitalPhoto : photoes) {
        totesPrice += digitalPhoto.getCost();
        totesSize += digitalPhoto.getMegabytes();
        totesSpeed = digitalPhoto.getSpeed();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:38:14.070

您可以改用迭代器：

```
 Iterator it = photoes.iterator();
  while(it.hasNext())
  {
    DigitalPhoto temp = it.next();
    totesPrice += temp.getCost();
    totesSize += temp.getMegabytes();
    totesSpeed = temp.getSpeed();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:05:13.577

```
for(zed = 0; zed<photoes.size(); zed++) 
{
   totesPrice += photoes.get(zed).getCost();
   totesSize += photoes.get(zed).getMegabytes();
   totesSpeed = photoes.get(zed).getSpeed();
} 
```

尝试这个。

# node.js - 为什么这个咖啡脚本代码总是返回 true？

> ID：10379688
> 
> 赞同：1
> 
> 时间：2012-04-30T06:59:42.943
> 
> 标签：node.js, coffeescript, redis

当我发布到服务器时，无论我给 auth 函数提供什么信息，它都会返回 true。我的预感是我正在尝试同步做一些事情，这本质上是异步的，但我不知道如何解决它。

```
auth = (username, api_key, device) ->
  hashed_key = hash.sha256(username + api_key + device, salt) 
  winston.debug('Checking auth for ' + username)
  redis_client.get hashed_key, (err, data) ->
    if data == username
        true

# Main Handler for posting data for a device.
server.post "/:customer/:site/:device", create = (req, res, next) ->
    message = JSON.parse(req.body)
    winston.info(server.name + ': Recieved event from ' + req.params.device)
    authenticated = auth(message.username, message.api_key, message.device)
    winston.debug('****' + authenticated)
    if authenticated == true 
        winston.debug('Auth passed, got a valid user/device/api combination: ' + message.username)
        redis_client.publish('device_events', req.body)
        return next()
    else
        winston.debug('Auth failed, cant find device ' + message.device + ' for ' + message.username)
        return next(restify.NotAuthorizedError) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:14:44.483

如果您知道（或有预感）某事是异步的，您应该将之后要做的事情作为回调函数传递。我不确定您的服务器的 post 功能是如何工作的，但如果它像[Node HTTP 的请求](http://nodejs.org/api/http.html)一样，您应该执行以下操作：

```
get = (location, callback, retriever, filterer, formatter)->
  decoratedCallback = (data)->
    callback formatter.applyFormat filterer.applyFilter data
  retriever.retrieve location, decoratedCallback

module.exports = get 
```

# c++ - 使用 __LINE__ 为不同的变量名创建宏

> ID：10379691
> 
> 赞同：14
> 
> 时间：2012-04-30T07:00:04.580
> 
> 标签：c++, visual-studio-2010, macros, concatenation, c-preprocessor

> **可能重复：**
> [使用## 和**LINE**创建 C 宏（与定位宏的标记连接）](https://stackoverflow.com/questions/1597007/creating-c-macro-with-and-line-token-concatenation-with-positioning-macr)

我正在尝试使用`__LINE__`宏来生成不同的变量名。我有一个名为 Benchmark 的范围基准类（位于 utils 命名空间中），它的构造函数接受一个字符串。这是我创建的宏定义：

```
#define BENCHMARK_SCOPE utils::Benchmark bm##__LINE__(std::string(__FUNCTION__)) 
```

不幸的是，这会导致以下错误：

`<some_file_name>(59): error C2374: 'bm__LINE__' : redefinition; multiple initialization`

这使我得出结论，`__LINE__`宏没有得到扩展。我根据[这篇文章](https://stackoverflow.com/a/1675203/812912)创建了我的宏。你有什么想法为什么`__LINE__`不被扩展？

**编辑**：可能编译器信息也是相关的。我正在使用视觉工作室 2010。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-30T07:15:22.763

您需要使用 2 个宏的组合：

```
#define COMBINE1(X,Y) X##Y  // helper macro
#define COMBINE(X,Y) COMBINE1(X,Y) 
```

然后将其用作，

```
COMBINE(x,__LINE__); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T07:13:39.713

试试这个代码，我在一个旧项目中使用过它

```
#define CONCATENATE_DIRECT(s1, s2) s1##s2
#define CONCATENATE(s1, s2) CONCATENATE_DIRECT(s1, s2)
#ifdef _MSC_VER // Necessary for edit & continue in MS Visual C++.
# define ANONYMOUS_VARIABLE(str) CONCATENATE(str, __COUNTER__)
#else
# define ANONYMOUS_VARIABLE(str) CONCATENATE(str, __LINE__)
#endif 

int ANONYMOUS_VARIABLE(var) 
```

编辑：

我认为只有在使用预编译头文件的情况下，你才应该在 Visual Studio 中使用**COUNTER 。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-30T07:47:08.730

您正在使用令牌粘贴。这发生*在*递归宏扩展之前（以便您可以标记粘贴以获取要调用的宏的名称）。因此：

```
#define PASTE(a,b) a ## b 
```

将粘贴传递给的确切参数`PASTE`，然后尝试扩展生成的新标记。要获得您想要的效果，您需要额外的间接级别：

```
#define PASTE_HELPER(a,b) a ## b
#define PASTE(a,b) PASTE_HELPER(a,b) 
```

在这里，将在调用`PASTE`之前展开的参数。`PASTE_HELPER`

# android - Android光标强制应用程序停止

> ID：10379695
> 
> 赞同：0
> 
> 时间：2012-04-30T07:00:19.887
> 
> 标签：android, cursor

我正在尝试通过启动打开联系人选择器的意图来访问电话号码。一切都很好，直到我尝试制作光标。我可以获取联系人的 ID，但在光标初始化的那一行，应用程序停止工作。

编码 ：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        Uri result = null ;
        switch (requestCode) {
        case 1001:
            Bundle extras = data.getExtras();
            Set<String> keys = extras.keySet();
            Iterator<String> iterate = keys.iterator();
            while (iterate.hasNext()) {
                String key = iterate.next();
                l(key + "[" + extras.get(key) + "]");
            }
            result = data.getData();
            l( "Got a result: "+ result.toString());

            break;
        }
            String id = result.getLastPathSegment();  
            l("key:" + id) ; 
//Line with the problems  , here the app stops

            Cursor cur = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, new String[]{id}, null);

            if(cur.getCount() > 0) {
                while (cur.moveToNext()) {
                    String idst = cur.getString(
                                cur.getColumnIndex(ContactsContract.Contacts._ID));
                String name = cur.getString(
                                cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    //Query phone here.  Covered next
                    }
                    }
            }
    } else {

        l( "A problem occured");
    }
} 
```

}

错误 ：

```
 04-30 10:42:01.669: E/AndroidRuntime(2819): FATAL EXCEPTION: main
04-30 10:42:01.669: E/AndroidRuntime(2819): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1001, result=-1, data=Intent { dat=content://com.android.contacts/contacts/lookup/3034i335793838dba8dd3/2345 flg=0x1 (has extras) }} to activity {me.Messaging.planner/me.Messaging.planner.MyMessageActivity}: android.database.sqlite.SQLiteException: bind or column index out of range: handle 0xc1c560
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2918)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2970)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.ActivityThread.access$2000(ActivityThread.java:132)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1068)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.os.Looper.loop(Looper.java:150)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.ActivityThread.main(ActivityThread.java:4277)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at java.lang.reflect.Method.invokeNative(Native Method)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at java.lang.reflect.Method.invoke(Method.java:507)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at dalvik.system.NativeStart.main(Native Method)
04-30 10:42:01.669: E/AndroidRuntime(2819): Caused by: android.database.sqlite.SQLiteException: bind or column index out of range: handle 0xc1c560
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:378)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.content.ContentProviderProxy.query(ContentProviderNative.java:414)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.content.ContentResolver.query(ContentResolver.java:264)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at me.Messaging.planner.MyMessageActivity.onActivityResult(MyMessageActivity.java:252)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.Activity.dispatchActivityResult(Activity.java:4108)
04-30 10:42:01.669: E/AndroidRuntime(2819):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2914)
04-30 10:42:01.669: E/AndroidRuntime(2819):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:07:36.353

只需使用

```
cur.moveToFirst() 
```

在while循环之前。

# iphone - 如何将csv文件数据转换成NSMutabledictionary

> ID：10379696
> 
> 赞同：0
> 
> 时间：2012-04-30T07:00:24.040
> 
> 标签：iphone, csv, nsmutablearray

我想用实时链接解析 csv 数据并在 NSMutabledictionary 中转换相同的数据。这是我用于 csv 文件的链接。

[http://ichart.yahoo.com/table.csv?s=BAS.DE&d=2&e=30&c=2012](http://ichart.yahoo.com/table.csv?s=BAS.DE&d=2&e=30&c=2012)

请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:13:46.637

[这个](http://rndm-snippets.blogspot.com/2011/08/xcode4-csv-parser-for-iphoneipad-ios.html)链接应该有你需要的。但是，您是否将该链接作为文件下载到您的应用程序目录中？如果是这样，在 import 之后`parseCSV`，很容易通过 csv 文件的行：

```
CSVParser *parser = [CSVParser new];
NSString *csvFilePath = [[NSBundle mainBundle] pathForResource:@"myCsvFile" ofType:@"csv"];
[parser openFile:csvFilePath];
NSArray *csvContentArray = [parser parseFile];

for (int i=0; i<csvContentArray.count; i++)
    NSLog(@"parsed %d %@", i, [csvContentArray objectAtIndex:i]);

[parser closeFile]; 
```

# javascript - top.location.href 等价于redirect_to 还是render？

> ID：10379698
> 
> 赞同：0
> 
> 时间：2012-04-30T07:00:53.637
> 
> 标签：javascript, ruby-on-rails

是否有等效的方法在 Rails 控制器中执行“top.location.href”javascript 类型重定向？我想最终在 iframe 之外的控制器中执行 before_filter 重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:59:05.013

我不相信有一个内置的 Rails 方法可以实现你想要的。但是，您可以像这样呈现 javascript 内联：

```
class FooBarController < ApplicationController
  before_filter :inline_redirect

  def inline_redirect
    if some_condition
      render :layout => false, :inline => '<script>window.top.location = "http://someurl.com";</script>'
    end
  end
end 
```

我想这不是真正的最佳实践。你真的应该创建一个视图并将 javascript 放在那里。请注意，某些用户可能禁用了 javascript，因此您也需要处理这种情况。

# android - 在android中创建笔记本页面ui

> ID：10379702
> 
> 赞同：3
> 
> 时间：2012-04-30T07:01:31.230
> 
> 标签：android

我想在笔记本页面上创建文本视图，在笔记本页面行上方的每行之间具有相等的间距。以下链接[http://www.photos-public-domain.com/wp-content/uploads/2011/01/yellow- notebook-paper-texture.jpg](http://www.photos-public-domain.com/wp-content/uploads/2011/01/yellow-notebook-paper-texture.jpg)
以及在 mdpi 和 ldpi 中，textview 间距是否仍能与可绘制的背景图像保持一致？

请让我知道如何进行。提前致谢。

# android - 有没有办法以编程方式获得显示刷新率？

> ID：10379708
> 
> 赞同：16
> 
> 时间：2012-04-30T07:02:36.297
> 
> 标签：android

作为标题，我想获取 android 手机的刷新率然后显示给用户。有什么办法吗？

更新：什么是刷新率？ [http://en.m.wikipedia.org/wiki/Refresh_rate](http://en.m.wikipedia.org/wiki/Refresh_rate)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-05T17:24:52.310

解决方案是：

```
Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
float refreshRating = display.getRefreshRate(); 
```

感谢帮助者。

# firefox - Firefox 的默认字体大小问题

> ID：10379716
> 
> 赞同：0
> 
> 时间：2012-04-30T07:03:19.793
> 
> 标签：firefox, font-size

我注意到 Firefox 下默认字体大小选项的奇怪行为（我不是在谈论高级选项卡下的最小字体大小）：转到此页面[http://fr-region.xb83studio.ch/2012/lachen/](http://fr-region.xb83studio.ch/2012/lachen/)并将默认字体大小设置为 44 像素或更高。有人可以解释为什么第二个列表低于第一个吗？里面的文本具有指定的字体大小，因此默认字体大小功能不会修改它们。

起初，默认字体大小为 17 像素或更高时出现问题。我将宽度减少了 3 像素，现在它可以达到 40 像素。但我仍然不明白为什么会出现这个问题。我真的很感激解释。

顺便说一句，我在 Windows 7 Professional SP1 下运行 Firefox 12.0

谢谢你的想法

勒内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:51:25.927

您有两个宽度为 207 像素、左边距为 32 像素的内联块元素。它们在一个宽度为 488px 的容器中（573px 宽度的 div 包含一个具有自动宽度、55px 左边距和 30px 右边距的部分）。在您的标记中，`</ul>`第一个内联块和`<ul>`第二个内联块之间有空格，因此在渲染中它们之间有一个空格，就像任何两个由空格分隔的字符之间一样。该空格的宽度是容器字体中空格字符的宽度。

因此，第二个列表将在第一个列表下方换行一次`488px-2*(207px+32px) = 10px`，该宽度小于容器字体中空格字符的宽度。

如果您之前的内联块宽度为 210 像素，那么一旦空间的宽度超过 6 像素，就会发生换行；对于典型的可变宽度西方字体来说，大约 17 像素的字体大小听起来很合适。

# java - 使用外键列的单向 OneToMany

> ID：10379720
> 
> 赞同：1
> 
> 时间：2012-04-30T07:04:06.440
> 
> 标签：java, hibernate, jpa

我想为我的每个实体维护 ACL 信息。为此，我有以下实体：

```
@Entity
public class ACLEntry {
  ...
  @Id
  private Long id;

  private Long sid;

  private Integer permissionMask;
} 
```

应为其维护 acl 信息的实体如下所示：

```
@Entity
public class Folder {
  ...

  @Id
  private Long id;

  @OneToMany
  @JoinColumn(name="entity_id")
  private List<ACLEntry> aclEntries;
} 
```

从休眠文档：

> 在拥有的实体中使用外键列的单向一对多并不常见，也不推荐

为什么不建议这样做，为什么我应该使用可连接的？

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:11:16.873

ACLEntry 应该有对父文件夹 @ManyToOne 的引用

# c# - 找出 (i) 的左子串在反转时是否等于 (i) 的右子串？

> ID：10379721
> 
> 赞同：5
> 
> 时间：2012-04-30T07:04:08.747
> 
> 标签：c#

在一次入门级 C# 开发人员角色的面试中，我有 30 分钟的时间来完成以下任务，我能做到的最接近的任务是找出当前索引两边的字符是否相互匹配。

> 构造一个数组，该数组接受一个字符串并确定索引 (i) 处的子字符串是否为
> 
> (i) 的左侧反转时，等于 (i) 右侧的子字符串。
> 
> 例如：“赛车”
> 
> 在 index(3) 处，左子字符串为“rac”，反转时等于右子字符串“car”。
> 
> 返回 (i) 如果满足这样的条件，否则返回 -1。如果字符串长度小于 3，则返回 0；

```
 if (str.Length < 3)
            return -1;

        for (int i = 0; i < str.Length - 1; i++)
        {
            if(str[i-1] == str [i+1])
               return i;
        }
                return -1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:09:59.823

如果`i != n/2`你应该返回 false，那么只需检查`i==n/2`：

```
int n = str.Length;
for (int i=0;i<=n/2;i++)
{
   if (str[i] != str[n-i-1])
     return -1;
}
return n/2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:14:17.493

我想出了这个，但我真的希望当他们问这个时你正坐在 Visual Studio 前面......

```
using System.Linq;

class Program {

    // New version: in fact, we are only looking for palindromes
    // of odd length
    static int FancyQuestion2(string value) {
        if (value.Length % 2 == 0) {
            return -1;
        }
        string reversed = new string(value.ToCharArray().Reverse().ToArray());
        if (reversed.Equals(value,  StringComparison.InvariantCultureIgnoreCase)) {
            return (int)(value.Length / 2);
        }
        return -1;
    }

    static void Main(string[] args) {
        int i1 = FancyQuestion2("noon"); // -1 (even length)
        int i2 = FancyQuestion2("racecar"); // 3
        int i3 = FancyQuestion2("WasItACatISaw"); // 6
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:06:42.067

```
 public static int check(string str)
    {
        if(str.Length < 3)
            return 0;

        int n = str.Length;
        int right = str.Length-1;
        int left = 0;

        while (left < right)
        {
            if (str[left] != str[right])
                return -1;

            left++;
            right--;
        }
        return n / 2;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:16:20.830

```
 public static bool check(string s, int index)
        {

            if (s.Length < 3)
                return false;

            string left = s.Substring(0, index);
            Char[] rightChars = s.Substring(index + 1).ToCharArray();
            Array.Reverse(rightChars);
                string right =new string (rightChars);
                return left.Equals(right);
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T07:27:07.267

试试这个

```
 static void Main(string[] args)
    {
        string theword = Console.ReadLine();
        char[] arrSplit = theword.ToCharArray();
        bool status = false;
        for (int i = 0; i < arrSplit.Length; i++)
        {
            if (i < theword.Length)
            {
                string leftWord = theword.Substring(0, i);
                char[] arrLeft = leftWord.ToCharArray();
                Array.Reverse(arrLeft);
                leftWord = new string(arrLeft);
                string rightWord = theword.Substring(i + 1, theword.Length - (i + 1));
                if (leftWord == rightWord)
                {
                    status = true;
                    break;
                }
            }
        }
        Console.Write(status);
        Console.ReadLine();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T07:31:22.387

纯 C，但希望工作流程可以帮助您实现目标。谢谢你分享这个。

```
int is_palindrome (const char str[], unsigned int index)
{
    int len = strlen(str);
    int result = index;

    //index not valid?
    if (index >= len)
        return -1;

    int i;
    for (i = 0; ((index+i) < len && (index - i) >= 0); ++i) {
        if(str[index-i] != str[index+i])
            return -1;
        else
            continue;
    }

    return result;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T07:33:11.917

您的方法是正确的，但实施是错误的。您需要一个与 不同的循环变量`i`，因为它包含字符串中（假定）中心字符的索引。

此外，您不能从循环内部返回索引，那么您只会检查一对字符。您必须遍历字符串，然后检查结果。

```
int checkPalindrome(string str, int i) {
  // check that the index is at the center of the string 
  if (i != str.Length - i - 1) {
    return -1;
  }
  // a variable to keep track of the state
  bool cont = true;
  // loop from 1 until you reach the first and last characters
  for (int j = 1; cont && i - j >= 0; j++) {
    // update the status
    cont &= str[i - j] == str[i + j];
  }
  // check if the status is still true
  if (cont) {
    return i;
  } else {
    return -1;
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T07:46:22.707

这是我能想到的最短的：

```
using System;
public class Test
{
    public static void Main()
    {            
        string example = "racecar";
        bool isPal = IsBothEndsPalindrome(example, 3);
        Console.WriteLine(isPal);
    }

    static bool IsBothEndsPalindrome(string s, int i) {
        while(i-- > 0) {
            if(s[i] != s[s.Length - i - 1]) return false;
         }
         return true;
    }
} 
```

它是如何运作的：http: [//ideone.com/2ae3j](http://ideone.com/2ae3j)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-30T08:27:08.630

另一种方法，返回时测试 -1，我能想到的最短：

```
using System;
public class Test
{
    public static void Main()
    {       
            TestPal( "Michael", 3 );                
            TestPal( "racecar", 3 );
            TestPal( "xacecar", 3 );
            TestPal( "katutak", 3 );
            TestPal( "able was i ere i saw elba", 7 );
            TestPal( "radar", 2 );
            TestPal( "radars", 2 );
            // This is false, space is not ignored ;-)
            TestPal( "a man a plan a canal panama", 9 );
    }

    static void TestPal(string s, int count) {
        Console.WriteLine( "{0} : {1}", s, IsBothEndsPalindrome(s, count) );
    }

    static bool IsBothEndsPalindrome(string s, int count) {           
        while(--count >= 0 && s[count] == s[s.Length - count - 1]);        
        return count == -1;
    }
} 
```

输出：

```
Michael : False
racecar : True
xacecar : False
katutak : True
able was i ere i saw elba : True
radar : True
radars : False
a man a plan a canal panama : False 
```

注意：最后一个为False，空格不被代码忽略

# asp.net-mvc - asp.net mvc视图中使用JSON循环数据

> ID：10379725
> 
> 赞同：-1
> 
> 时间：2012-04-30T07:05:11.523
> 
> 标签：asp.net-mvc, json

我对带有 JSON 的 asp.net mvc 非常陌生。现在我想从列表中获取数据，在我的控制器中查询它。使用 JSON 循环所有数据以在我的视图中查看。有什么想法吗？因为我以前从未尝试过。感谢您的所有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:10:47.513

我认为[这](http://mazharkaunain.blogspot.com/2012/02/aspnet-mvc-using-jsonresult.html)就是你要找的

# android - 如何设置 ListView 行高

> ID：10379727
> 
> 赞同：40
> 
> 时间：2012-04-30T07:05:16.923
> 
> 标签：android, android-layout, android-listview, baseadapter

我正在向您展示下面的图像，其中行的高度不同我希望行应该具有相同的高度。

![在此处输入图像描述](../Images/5e9c82fd2f96ea8bd04724c7e2b2e218.png)

在我的程序中，我从我解析的 XML 服务获取数据并在列表视图上显示结果，但 ListView 行的高度不同。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:background="@drawable/list_selector"
  android:padding="3dip"
  android:layout_width="match_parent"
  android:gravity="center"
  android:layout_height="10dp">

    <TextView android:layout_height="wrap_content" android:text="ITEM"
        android:layout_width="wrap_content" android:id="@+id/txtItem"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="15dip"
        android:textStyle="bold"
        android:textColor="#040404"></TextView>

    <TextView android:layout_height="wrap_content" android:text="MANUFACTURER"
        android:layout_width="wrap_content" android:id="@+id/txtItemTwo"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="14dip"
        android:textColor="#FF7F50"

        ></TextView>

</LinearLayout> 
```

我已经设置了高度

> android:layout_height="10dp"

但在 listView 上显示时仍然不一样。

这是我的 getView 自定义适配器：-

```
 public class MyEventAdapter extends BaseAdapter {

     ArrayList < String > listTitle;
     ArrayList < String > listFullText;

     Activity activity;

     public MyEventAdapter(Activity activity, ArrayList < String > listTitle, ArrayList < String > listFullText) {
         super();
         this.listTitle = listTitle;
         this.listFullText = listFullText;

         this.activity = activity;
     }

     public int getCount() {
         // TODO Auto-generated method stub
         return listTitle.size();
     }

     public Object getItem(int position) {
         // TODO Auto-generated method stub
         return null;
     }

     public long getItemId(int position) {
         // TODO Auto-generated method stub
         return 0;
     }

     private class ViewHolder {
         TextView txtViewTitle;
         TextView txtViewTitleTwo;

     }

     public View getView(int position, View view, ViewGroup parent) {
         // TODO Auto-generated method stub

         ViewHolder title;
         LayoutInflater inflater = activity.getLayoutInflater();

         if (view == null) {
             view = inflater.inflate(R.layout.lview_row, null);
             title = new ViewHolder();

             title.txtViewTitle = (TextView) view.findViewById(R.id.txtItem);
             title.txtViewTitleTwo = (TextView) view.findViewById(R.id.txtItemTwo);

             view.setTag(title);
         } else {
             title = (ViewHolder) view.getTag();
         }

         title.txtViewTitle.setText(listTitle.get(position));
         title.txtViewTitleTwo.setText(listFullText.get(position));

         return view;
     }
 } 
```

任何人都请我以正确的方式获得所需的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-06-22T16:19:06.037

问题是您误用了充气机，不要将 null 作为根节点

如果您将 null 作为根节点传递，则您在 xml 中设置的所有大小参数都无法正常工作

正确的代码是

```
view = inflater.inflate(R.layout.lview_row, parent, false); 
```

[http://www.doubleencore.com/2013/05/layout-inflation-as-intended/](http://www.doubleencore.com/2013/05/layout-inflation-as-intended/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T08:37:23.257

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:background="@drawable/list_selector"
  android:padding="3dip"
  android:layout_width="match_parent"
  android:gravity="center"
  android:layout_height="match_parent">

    <TextView android:layout_height="wrap_content" android:text="ITEM"
        android:layout_width="wrap_content" android:id="@+id/txtItem"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="15sp"
        android:textStyle="bold"
        android:textColor="#040404"></TextView>

    <TextView android:layout_height="wrap_content" android:text="MANUFACTURER"
        android:layout_width="wrap_content" android:id="@+id/txtItemTwo"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="14sp"
        android:textColor="#FF7F50"

        ></TextView>

</LinearLayout> 
```

如果您的文本中有不止一行，请将您的文本设置为单行，这样它就不会出现在第二行并改变每行的高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:57:46.243

`getView(int position, View convertView, ViewGroup parent)`在您的`MyEventAdapter`类中覆盖方法并用于`view.setMinimumHeight(minHeight);`设置视图的最小高度。

在方法 `getView(int position, View convertView, ViewGroup parent)' 中设置视图的最小高度，如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder title;
    LayoutInflater inflater = activity.getLayoutInflater();

    if (view == null) {
        view = inflater.inflate(R.layout.lview_row, null);
        view.setMinimumHeight(minHeight); //set minimum height of view here
        title = new ViewHolder();

        title.txtViewTitle = (TextView) view.findViewById(R.id.txtItem);
        title.txtViewTitleTwo = (TextView) view.findViewById(R.id.txtItemTwo);

        view.setTag(title);
    } else {
        title = (ViewHolder) view.getTag();
    }

    title.txtViewTitle.setText(listTitle.get(position));
    title.txtViewTitleTwo.setText(listFullText.get(position));

    return view;    
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-22T14:44:48.563

如果您的文本中有不止一行，请将您的文本设置为单行，这样它就不会出现在第二行并改变每行的高度。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-30T07:32:24.003

首先，您应该使用**sp**来指定文本的大小而不是 dip (dp)，其次我认为您有一些矛盾的尺寸，您在只有 10 dp 的布局中有 2 个 15 + 14 dp 的文本字段。尝试将布局高度增加到 40 dp 并更改 textview 的尺寸以使用 sp

# c++ - 如何自动生成 eclipse-indigo 方法块注释？

> ID：10379728
> 
> 赞同：0
> 
> 时间：2012-04-30T07:05:23.607
> 
> 标签：c++, comments, eclipse-indigo

我想像这样使用 eclipse-Indigo 生成块注释。我是 C++ 程序员。

```
/**
 * 
 * @param bar
 * @return
 */
int foo(int bar); 
```

我怎么能这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:37:19.407

如果您的输入几乎是静态的，您可以编写一个可以工作的简化词法分析器，需要简单的字符串处理。string 具有许多不错的编辑功能，其中包含 .substr() 和 .find() 。你所要做的就是弄清楚perens在哪里。您知道您可以选择将其作为字符串流处理，这使得 FAR 更容易（不要忘记使用 std::skipws 来跳过空格。

[http://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)

[http://www.cplusplus.com/reference/string/string/find/](http://www.cplusplus.com/reference/string/string/find/)

```
#include <vector>
#include <string>

typedef STRUCT arg_s {
string sVarArgDataType, sVarArg;
} arg_s ARG;
ARG a;
vector<ARG> va;
char line[65000];

filein.getline(line, 65000);
line[65000-1]='\0'; //force null termination if it hasn't happened
get line and store in string sline0
size_t firstSpacePos=sline.find(' ');
size_t nextSpacePos = sline.find(' ',firstSpacePos+1);
size_t prevCommaPos = string::npos;
size_t nextCommaPos = sline.find(',');
size_t openPerenPos=sline.find('(');
size_t closePerenPos=sline.find(");");
string sReturnDataType, sFuncName;
if (
    string::npos==firstSpacePos||
    string::npos==semicolonPos||
    string::npos==openPerenPos||
    string::npos==closePerenPos) {
    return false; //failure
}
while (string::npos != nextSpacePos) {
    if (string::npos != nextCommaPos) {
        //found another comma, a next argument. use next comma as a string terminator and prevCommaPos as an arg beginning.
        //assume all keywords are globs of text
        a.sVarArgDataType=sline.substr(prevCommaPos+1,nextSpacePos-(prevCommaPos+1));
        a.sVarArg=sline.substr(nextSpacePos+1,nextCommaPos-(nextSpacePos+1));
    } else {
        //didn't find another comma. use ) as a string terminator and prevCommaPos as an arg beginning.
        //assume all keywords are globs of text
        a.sVarArgDataType=sline.substr(prevCommaPos+1,nextSpacePos-(prevCommaPos+1));
        a.sVarArg=sline.substr(nextSpacePos+1,closePerenPos-(nextSpacePos+1));
    }
    va.push_back(a); //add structure to list
    //move indices to next argument
    nextCommaPos = sline.find(',', secondSpacePos+1);
    nextSpacePos = sline.find(' ', secondSpacePos+1);
}
int i;

fileout<<"/**
 * 
";
for (i=0; i < va.size(); i++) {
    fileout<<" * @param "<<va[i].sVarArg;
}
fileout<<"
 * @return
 */
"<<sReturnDataType<<" "<<sFuncName<<'(';
for (i=0; i < va.size(); i++) {
    fileout<<va[i].sArgDataType<<" "<<va[i].sVarArg;
    if (i != va.size()-1) {
        fileout<<", "; //don;t show a comma-space for the last item
    }
}

fileout<<");"<<std::endl; 
```

这将处理任意数量的参数，除了 ... 变量参数类型。但是您可以为此输入自己的检测代码以及在 ... 和 2 关键字参数类型之间切换的 if 语句。在这里，我的结构中只支持 2 个关键字。您可以通过使用 while 搜索下一个之前的所有空格来支持更多，逗号或 ) 在 while 循环内将可变数量的字符串添加到`vector<string>`要替换的结构内 - 不，只需制作一个`vector<vector<string> >`. 或者，只有一个向量，然后`va.clear()`在每个函数完成后执行一个。

我刚注意到eclipse标签。我对日食了解不多。我什至无法让它工作。一些程序。

# mysql - 当两个表具有不同的字段时如何将数据移植到表中

> ID：10379729
> 
> 赞同：1
> 
> 时间：2012-04-30T07:05:37.953
> 
> 标签：mysql

```
 mysql> desc oldtable;
 +---------------+--------------+------+-----+---------+----------------+
 | Field         | Type         | Null | Key | Default | Extra          |
 +---------------+--------------+------+-----+---------+----------------+
 | uid           | int(11)      | NO   | PRI | NULL    | auto_increment |
 | active        | char(1)      | NO   |     | NULL    |                |
 | field3        | char(256)    | NO   |     | NULL    |                |
 | field4        | char(256)    | NO   |     | NULL    |                |
 +---------------+--------------+------+-----+---------+----------------+

 mysql> desc newtable;
 +------------+--------------+------+-----+---------+----------------+
 | Field      | Type         | Null | Key | Default | Extra          |
 +------------+--------------+------+-----+---------+----------------+
 | uid        | int(11)      | NO   | PRI | NULL    | auto_increment |
 | active     | tinyint(1)   | NO   |     | 0       |                |
 | field5     | int(12)      | NO   |     | 0       |                |
 | field6     | varchar(12)  | NO   |     | 0       |                |
 | field7     | varchar(12)  | NO   |     | 0       |                |
 +------------+--------------+------+-----+---------+----------------+ 
```

这类似于我之前[的查询通过脚本更改字段和端口 mysql 表数据？](https://stackoverflow.com/questions/9792443) [我想将旧表中的数据（转储）移植到新表中。一个问题是，早先该表使用 char(1) 来存储值“Y”或“N”的活动。现在 newtable 将其存储为 int 1 或 0。

在移植数据之前如何解决这个问题？我应该使用 shell 脚本进行此类修复和移植吗？任何示例脚本或提示:)]

但是这个问题，如果两个表有不同的 no.of 字段，如何实现相同的移植？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:17:16.697

答案类似于上一个问题的答案：

```
INSERT INTO newtable (uid, active, field5, field6, field7 )
SELECT uid,FIELD(active,'Y') as active, 0,'',''
FROM oldtable 
```

然后用新的字段值更新 newTable：

```
update newTable
set 
  field5 = (select someExpression from someTable5 t where t.uid=newTable.uid),
  field6 = (select someExpression from someTable6 t where ...),
  field7 = (select someExpression from someTable7 t where ...) 
```

此外，您可以将新字段定义为允许为空，并使该字段没有值。

# facebook - 在 Facebook 应用程序设置中找不到“升级到请求 2.0”

> ID：10379730
> 
> 赞同：0
> 
> 时间：2012-04-30T07:05:46.143
> 
> 标签：facebook, facebook-apps, facebook-app-requests

正如这篇博文中提到的那样[http://developers.facebook.com/blog/post/464/](http://developers.facebook.com/blog/post/464/)

`....enable “Upgrade to Requests 2.0” in your Developer App settings on the “Advanced” tab. This switch controls the bookmark counts seen by your users and synchronizes the count with sent requests.`

我已经彻底检查了我的应用程序设置中的“高级”选项卡，但我找不到任何这样的“升级到请求 2.0”选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:59:52.107

您显然是在 2011 年 9 月之后创建的应用程序。从那时起，此选项不再适用于新创建的应用程序。

根据[已完成的更改列表](http://developers.facebook.com/roadmap/completed-changes/)：

> **2012 年 1 月 1 日**
> 所有应用程序都将选择“升级到 Requests 2.0”和“Requests 2.0 Efficient”迁移现有应用程序将选择“Requests 2.0 Efficient”和“升级到 Requests 2.0”迁移，所有开发人员必须确保他们是使用正确的 request_id 格式并适当地删除请求。详情[在这里](http://developers.facebook.com/blog/post/569/)。

此外[，Requests 2.0](http://developers.facebook.com/blog/post/569/)博客文章的改进（自 2011 年 9 月 30 日起）指出：

> **从今天开始，新应用程序**将自动选择“升级到 Requests 2.0”和“Requests 2.0 Efficient”，并且这些迁移将不再在新应用程序的应用程序设置中可用。这需要开发人员使用`request_id`上面详述的新格式。此外，当用户被定向到您的应用程序时，通过单击应用程序、游戏仪表板或请求通知中的请求，您必须在请求被接受后将其删除。一旦点击它们就不会自动删除它们，因此开发人员有责任在它们被使用后清除它们。请参阅上面的示例，了解如何删除这些请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:18:44.000

也许您正在使用新的应用程序？
此选项仅适用于使用旧选项创建应用程序的用户。
所有新应用程序都支持请求 2，因此您无需激活支持方法即可使用。

# sql - 有人可以纠正这个连接查询吗？

> ID：10379734
> 
> 赞同：1
> 
> 时间：2012-04-30T07:06:02.363
> 
> 标签：sql

```
SELECT * 
FROM {$dbp}auctions au, ic.imgurl 
LEFT JOIN {$dbp}cache ic ON au.cache_id = ic.id 
```

我对在哪里设置第二个表 ( `ic`) 的别名感到困惑，但仍然只选择一列 ( `imgurl`)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:07:31.747

```
"SELECT au.*, ic.imgurl FROM {$dbp}auctions au  
LEFT JOIN {$dbp}cache ic ON au.cache_id = ic.id" 
```

我认为这接近你想要的。您的原始查询正在选择所有内容。

# delphi - 编译器忽略 Exit 命令缺少的括号

> ID：10379738
> 
> 赞同：11
> 
> 时间：2012-04-30T07:06:17.280
> 
> 标签：delphi, delphi-2009, delphi-xe

为什么 Delphi 编译器会忽略这个缺失的括号？

```
function Test: Boolean;
begin
  Exit(True;    // <-- eek! it compiles...
end; 
```

我发现我的一些代码看起来像这样，并且首先认为 Delphi 忽略了我的单元 - 但它只是忽略了这种类型的语法错误。所以现在我当然想知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:17:18.230

我猜`Exit`它本身被认为是一个标记，因此在同一范围内定义的任何内容都`Exit`被编译器简单地忽略（因为它无论如何都无法执行这些指令）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:55:25.923

也许编译器认为 1\. 本身有一个出口，或者 2\. 有一个带有一组括号 () 的出口。如果它没有找到#2，它会转到#1。

# dataset - TF-IDF 和向量模型的数据集帮助

> ID：10379741
> 
> 赞同：-1
> 
> 时间：2012-04-30T07:06:33.490
> 
> 标签：dataset, corpus, tf-idf, cosine-similarity

我想比较 TF-IDF、Vector 模型和 TF-IDF 算法的一些优化。为此，我需要一个数据集（至少 100 个英文文本文档）。我找不到一个。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:58:47.657

这取决于您使用 TF-IDF 的应用程序。例如，如果您想查找关键字，您可以使用“Mendely”数据集或使用“Delicious”数据进行标记。

# html - Magento 中的 HTML5 画布

> ID：10379744
> 
> 赞同：0
> 
> 时间：2012-04-30T07:06:40.287
> 
> 标签：html, magento

我是 magento 的新手，我想知道。在我的项目中，我想在产品视图页面中有一些自定义的产品视图。但我对此一无所知。请让我知道在 magento 1.6 中使用 HTML5 画布的可能性。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:11:56.873

是的，有可能，您可以编辑`catalog/product/view/media.phtml`产品图像所在的模板文件。

# mysql - 我可以在一个语句中选择这个吗？

> ID：10379750
> 
> 赞同：0
> 
> 时间：2012-04-30T07:07:08.247
> 
> 标签：mysql

我是个 SQL 菜鸟；对不起。

我有一张桌子

```
mysql> describe activity;
+--------------+---------+------+-----+---------+-------+
| Field        | Type    | Null | Key | Default | Extra |
+--------------+---------+------+-----+---------+-------+
| user         | text    | NO   |     | NULL    |       |
| time_stamp   | int(11) | NO   |     | NULL    |       |
| activity     | text    | NO   |     | NULL    |       |
| item         | int     | NO   |     | NULL    |       |
+--------------+---------+------+-----+---------+-------+ 
```

通常`activity`是一个两步过程；1）“签出”和2“使用”

除非`item`使用，否则不能第二次签出。

现在，我想查找已签出但未使用项目的任何情况。

愚蠢，我会在同一个项目上使用两个选择，一个用于签出和一个用于使用，然后比较时间戳。

是否有一个 SELECT 语句可以帮助我选择已签出但未使用的项目？

多重结账的可能性很棘手。还是我应该只编码

```
loop over activity, form oldest until newset
  if find a checkout and there is no newer used time then i have a hit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:27:24.910

您可以获取每次结帐或使用的最后日期，然后对每个项目进行比较：

```
SELECT MAX(IF(activity='check out', time_stamp, NULL)) AS last_co, 
MAX(IF(activity='use', time_stamp, NULL)) AS last_use
FROM activity
GROUP BY item
HAVING NOT(last_use >= last_co); 
```

之所以`NOT(last_use >= last_co)`这样写是因为`NULL`比较行为是如何工作的：如果为空，`last_use`<`last_co`将不起作用。`last_use`

如果没有适当的索引，这个查询将不会执行得很好。另外，您可能希望使用`WHERE`条件绑定查询。

# c# - 从命令行发布 WPF 项目

> ID：10379751
> 
> 赞同：2
> 
> 时间：2012-04-30T07:07:11.893
> 
> 标签：c#, visual-studio-2010, command-line, msbuild

我有一个仅包含一个 WPF 项目的解决方案，当我尝试使用 msbuild(commandline) 从该项目创建一个包时，出现错误

> 当前项目中不存在目标“包”。

特洛伊狩猎在此链接中讨论此问题[为什么当前项目中不存在目标“包”。](http://www.troyhunt.com/2010/10/why-target-package-does-not-exist-in.html)，但这对我没有帮助，可能是因为我使用的是 WPF 项目，而该示例是针对 Web 项目的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T10:20:46.963

我试图创建发布项目使用

msbuild MyProject.csproj /t:**包**/p:configuration=release

上面的行对于 web 项目非常有效，但对于 windows 项目它应该是

msbuild MyProject.csproj /t:**发布**/p:configuration=release

我希望它可以节省某人的时间

# twitter - jQuery模板内的推文按钮

> ID：10379753
> 
> 赞同：3
> 
> 时间：2012-04-30T07:07:15.517
> 
> 标签：twitter, jquery-templates

我想在 jquery 模板中集成推文按钮。我正在尝试“带有 javascript 的推文按钮”（[链接](https://dev.twitter.com/docs/tweet-button)）。但我的 html 模板只显示链接，不显示按钮。我在 jquery-templ 脚本之外尝试了锚标记。然后它工作正常。我很困惑为什么这在 jquery-tmpl 中不起作用。

代码如下所示：

```
<script type="text/x-jquery-tmpl">

<a href="https://twitter.com/share" class="twitter-share-button" data-via="twitterapi"   data-lang="en">Tweet</a>   

</script>

<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s) [0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="http://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:30:48.397

`</script>`因为浏览器没有正确解析结束标签。

你可以改写`</scr{{= ""}}ipt>`...

关键是，浏览器不理解`<script>`标签的嵌套，所以每当它解析 a 时`</script>`，它都会关闭最外层的 script 标签。因此，结束`</script>`标记与模板脚本匹配。

您可以通过添加 来欺骗浏览器忽略脚本标记，`{{= ""}}`模板引擎将使用该标记生成空字符串。`</scr{{= ""}}ipt>`将导致`</script>`, 模板化后。

# gwt - DynamicForm 上有多个 SelectItem 的问题

> ID：10379759
> 
> 赞同：1
> 
> 时间：2012-04-30T07:07:49.167
> 
> 标签：gwt, smartgwt

我正在修复我们的应用程序中的 UI 错误，现在我遇到了 DynamicForm 上的多个 SelectItem 的问题。

正如我们所知，如果pickList 的宽度未设置SmartGwt 调整pickList 宽度以适合内容。问题是当一个 SelectItem 的内容比其他内容更宽时。例如，我们有 2 个 SelectItem，**第一个 SelectItem 的内容宽度小于第二个**。重现此问题的步骤：

1.  使用宽度最小的内容打开第一个 SelectItem - pickList 的宽度与内容一样
2.  打开第二个 SelectItem ，其内容大于前一个 - pickList 的宽度与内容一样
3.  再次打开第一个 SelectItem - 现在 pickList 的宽度与第二个 SelectItem 的 pickList 相同

问题是**如何强制 SmartGwt 分别为每个 SelectItem 重新计算 pickList 的宽度**？

一些代码示例：

```
// Constructor of our DynamicForm
public PriceItemFilterForm(DataSource datasource) {

    // SelectItem with content with the smallest width
    SelectItem priceItemType = new SelectItem(PRICE_ITEM_TYPE_NAME,
            toolMessages.priceItemTypeFilterTitle());

    // Second SelectItem with content with bigger with than previous one
    SelectItem evalTimeType= new SelectItem(EVAL_TIME_NAME,
            toolMessages.evaluationTimeFilterTitle()){
        @Override
        protected String getLocalizedMessage(String text) {
            return toolConstants.getString(text);
        }
    };
    evalTimeType.setStartRow(true);

    setFields(priceItemType, evalTimeType);
} 
```

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:02:37.113

我升级到 2.5 smart gwt 版本。我得到了同样的错误。我升级到 3.0 Smart GWT，问题就解决了！

# vb.net - Http 敏捷包 xpath

> ID：10379760
> 
> 赞同：0
> 
> 时间：2012-04-30T07:07:57.467
> 
> 标签：vb.net, xpath, html-agility-pack

我有一个问题，我不能正确使用HTTP AGILITY包PACK，例如，想检索“样式”中包含的图像的地址，我想知道是否有人建议我使用xpath。

代码 HTML

```
<TABLE id=uezszu_24 class="uiGrid fbPhotosGrid" cellSpacing=0 cellPadding=0>
 <TBODY>
  <TR>
    <TD class="vTop">
      <DIV class=Wrapper>
       <A class="uiMediaThumb uiScrollableThumb uiMediaThumbHuge" href="www.cccc.com/index.php" 
        name=43563463 rel=theater aria-label="photo" ajaxify="dsgdgbdfgr45y6ghd">
        <I style="BACKGROUND-IMAGE: url(http://www.fressdgf.com/image.jpg)"></I>
       </A>
      </DIV>
    </TD>
  </TR>
 </TBODY>
</TABLE> 
```

代码 VB

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    Dim site As HtmlAgilityPack.HtmlWeb = New HtmlWeb()
    Dim document As HtmlAgilityPack.HtmlDocument = site.Load("https://www.site.com")
    For Each table As HtmlNode In document.DocumentNode.SelectNodes("//tr")

        ListBox1.Items.Add(table.InnerText)

    Next
End Sub 
```

编辑：代码缩进改进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:31:57.343

我建议您使用 Linq 而不是 XPath。如果要获取内部节点的背景图像，可以这样做：

```
For Each tableRow As HtmlNode In document.DocumentNode.SelectNodes("//tr")
    Dim italicNode As HtmlNode = tableRow.DescendantNodes().Where(Function(n) n.Name = "i")
    Dim styleValue As String = italicNode.GetAttributeValue("style",String.Empty)
    ListBox1.Items.Add(styleValue)
Next 
```

希望对你有帮助

# c# - 未找到 RemoteDeviceConnectEventArgs？

> ID：10379764
> 
> 赞同：1
> 
> 时间：2012-04-30T07:08:11.117
> 
> 标签：c#, windows-mobile, compact-framework, rapi

我正在尝试获取 RAPI2 的示例代码以进行编译：[http](http://rapi2.codeplex.com/documentation) ://rapi2.codeplex.com/documentation但除其他错误外，它似乎无法找到“RemoteDeviceConnectEventArgs”任何想法，这是为什么？我已经包含了它附带的 DLL 并包含了 System.Devices （但我在任何地方都没有 System.Devices.Interop 并且不确定它是否是 hte 库应该提供的东西，或者我是否应该为该命名空间包含另一个程序集） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T15:50:22.697

我遇到过同样的问题。我通过在此处下载最新版本的 RAPI2 解决了这个问题：[http ://rapi2.codeplex.com/downloads/get/347232](http://rapi2.codeplex.com/downloads/get/347232)

由于未知原因，我之前下载的版本似乎不是最新的。

# cqrs - 在最终一致的系统中，您如何确保一致的客户端读取？

> ID：10379766
> 
> 赞同：4
> 
> 时间：2012-04-30T07:08:15.597
> 
> 标签：cqrs, eventual-consistency

我正在研究 CQRS，并且正在寻找有关如何在最终一致的系统中解决客户端读取问题的文章。例如，考虑一个网上商店，用户可以在其中将商品添加到他们的购物车中。如果“AddItemToCart”命令的实际处理是异步完成的，如何确保客户端显示购物车中的商品？我了解基于域事件异步调度命令和更新读取模型异步的原则，但是我看不到从客户端的角度来看这是如何处理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T15:49:00.687

有几种不同的方法。

## 等待用户直到一致

只需轮询服务器，直到您更新读取模型。这与 Ben 所展示的相似。

## 通过 2PC 确保一致性

你有一个支持 DTC 的队列；并且您的命令首先放在那里。然后他们是；执行、发送事件、更新读取模型；都在一个事务中。但是，您实际上并没有通过这种方法获得任何收益，因此请不要这样做。

## 骗客户

将读取的模型放在客户端的本地存储中，并在发送相应事件时更新它们——但无论如何您都期待这个事件，所以您已经更新了购物车的 javascript 视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:30:05.857

我建议您查看[Microsoft Patterns & Practices 团队对 CQRS 的指导](https://github.com/mspnp/cqrs-journey-doc/)。尽管这仍在进行中，但他们已经为您提出的问题提供了一种解决方案。

他们对需要反馈的命令的方法是异步提交命令，重定向到另一个控制器操作，然后轮询读取模型以获取预期的更改或发生超时。这是使用 Post-Redirect-Get 模式，该模式与浏览器的前进和后退导航按钮配合得更好，并在 MVC 控制器开始轮询之前为基础架构提供更多时间来处理命令。

[RegistrationController](https://github.com/mspnp/cqrs-journey-code/blob/dev/source/Conference/Conference.Web.Public/Controllers/RegistrationController.cs)中使用 ASP.NET MVC 4 异步控制器的示例代码。

```
[HttpGet]
[OutputCache(Duration = 0, NoStore = true)]
public Task<ActionResult> SpecifyRegistrantAndPaymentDetails(Guid orderId, int orderVersion)
{
    return this.WaitUntilOrderIsPriced(orderId, orderVersion)
        .ContinueWith<ActionResult>(

        ...

    );
}

...

private Task<PricedOrder> WaitUntilOrderIsPriced(Guid orderId, int lastOrderVersion)
{
    return
        TimerTaskFactory.StartNew<PricedOrder>(
            () => this.orderDao.FindPricedOrder(orderId),
            order => order != null && order.OrderVersion > lastOrderVersion,
            PricedOrderPollPeriodInMilliseconds,
            DateTime.Now.AddSeconds(PricedOrderWaitTimeoutInSeconds));
} 
```

我可能会使用 AJAX 轮询，而不是在服务器上阻止 Web 请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-04T21:27:54.920

**重定向后获取**

您希望 save 命令在调用 Get 之前按时执行。如果命令需要 10 秒才能在后端完成，但 Get 在 1 秒内被调用怎么办？

**本地存储**

在命令执行时将命令的结果存储在客户端上，您假设命令将无错误地通过。如果后端在处理命令时遇到错误怎么办？那么你在本地拥有的东西并不一致。

**轮询**

轮询似乎是实际上符合最终一致性的选项；你不是假装或假设。作为页面的一部分，您的轮询机制可以是异步的，例如购物车页面组件轮询直到它获得更新而不刷新页面。

**回调**

*如果*客户端能够接收此类，您可以引入类似网络挂钩的东西来向客户端进行回调。通过在命令被后端接受后提供关联Id，一旦命令完成处理，后端可以将命令的状态以及命令是否成功通过的关联Id通知给前端. 使用这种方法不需要任何类型的轮询。

# security - 从浏览器中检测设备

> ID：10379767
> 
> 赞同：0
> 
> 时间：2012-04-30T07:08:30.643
> 
> 标签：security, browser, identification

一些平台提供了安全机制来识别用户是否曾经从某个设备登录。如果您从计算机登录，您从未这样做过，他们会在登录时询问您特殊问题。他们如何识别设备？这只是地理定位（不会覆盖同一地区的多个设备，对吗？）。或者仅使用会导致 cookie 清理麻烦的 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:12:35.530

据我所知，cookie 确实是您可以做到这一点的唯一方法。服务器将它可以从浏览器中获取的有关您的设备的任何信息存储在 cookie 中。通过地理位置，我假设您的意思是 IP 地址的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:13:20.490

我见过这样做的都是基于 cookie 的，如果用户删除他们的 cookie，确实会造成麻烦。

通过 IP 地址执行此操作会给 Web 代理或共享连接后面的任何人带来麻烦。对于网关根据蜂窝塔连接而改变的移动用户来说，这也将是痛苦的。地理位置也会给移动中的移动用户带来问题。

# c# - C# 中 == 和 Equals 的区别

> ID：10379769
> 
> 赞同：-6
> 
> 时间：2012-04-30T07:08:37.773
> 
> 标签：c#, .net, equals

> **可能重复：**[和 .Equals()](https://stackoverflow.com/questions/814878/c-sharp-difference-between-and-equals)
> [之间的 C# 区别`==`](https://stackoverflow.com/questions/814878/c-sharp-difference-between-and-equals)

为了比较两个变量，我们可以使用 == 或 Equals 方法。例如，

```
 string a = new string(new char[] {'a', 'b', 'c', 'd'});
        string b = new string(new char[] {'a', 'b', 'c', 'd'});

        Console.WriteLine (a==b);
        Console.WriteLine (a.Equals(b)); 
```

我的问题是什么时候应该使用 == 什么时候应该使用 Equals？两者有什么区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T07:13:29.023

== 是一个运算符，当不重载时，它表示类的“引用相等”（以及结构的字段相等），但可以重载。它是重载而不是覆盖的结果是它不是多态的。

Equals 是一个虚方法；这使它具有多态性，但这意味着您需要小心不要在空实例上调用它。

根据经验：

*   如果你知道某事物的类型，并且知道它有 == 重载（大多数核心类型，如字符串、int、float 等具有 == 含义），那么使用 ==
*   如果您不知道类型，可能会推荐使用 Equals(a,b)，因为这样可以避免 null 问题
*   如果您真的想检查相同的实例（引用相等），请考虑使用 ReferenceEquals(a,b)，因为即使 == 被重载并且 Equals 被覆盖，这也将起作用
*   使用泛型时，考虑`EqualityComparer<T>.Default.Equals(a,b)`哪个可以避免 null 问题，支持 Nullable-of-T，并支持 IEquatable-of-T

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T07:09:43.970

John Skeet 的这篇文章将回答您的问题：

> 那么，什么时候应该使用哪个运算符呢？我的经验法则是，对于几乎所有引用类型，当您想要测试相等性而不是引用标识时，请使用 Equals。字符串是个例外——用 == 比较字符串确实让事情变得更简单、更易读，但你需要记住，运算符的两边都必须是字符串类型的表达式，才能使比较正常工作。
> 
> 对于值类型，我通常使用 == 来获得更易于阅读的代码。如果值类型为 == 提供与 Equals 不同的重载，事情就会变得棘手，但我认为这种类型一开始设计的非常糟糕。
> 
> [作者：乔恩斯基特]

[http://blogs.msdn.com/b/csharpfaq/archive/2004/03/29/when-should-i-use-and-when-should-i-use-equals.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/29/when-should-i-use-and-when-should-i-use-equals.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:09:57.327

> 当 == 用于对象类型时，它将解析为 System.Object.ReferenceEquals。
> 
> Equals 只是一个虚拟方法并且行为如此，因此将使用覆盖的版本（对于字符串类型比较内容）。

[https://stackoverflow.com/a/814880/655293](https://stackoverflow.com/a/814880/655293)

# amazon-s3 - 为什么 AWS MapReduce 中的 Elastic MapReduce 作业流失败？

> ID：10379773
> 
> 赞同：2
> 
> 时间：2012-04-30T07:08:58.430
> 
> 标签：amazon-s3, amazon-ec2, elastic-map-reduce, amazon-iam

我在 AWS MapReduce 中创建了一个作业流，我创建了一个上下文广告（Hive 脚本）的作业流 - 完成了“启动交互式 Hive 会话”，选择了 m1.small 实例，在没有 VPC 子网 ID 的情况下继续，并在配置引导操作中配置 Hadoop。现在，作业流进入启动状态，15-20 分钟后进入失败状态，不会进入等待状态。它显示“上次状态更改原因：用户帐户无权调用 EC2”我通过 IAM 将 PowerUserAccess 授予自己。我也给自己提供了以下政策。

1.AmazonEC2FullAccess 2.AmazonElasticMapReduceFullAccess 3.IAMFullAccess

在给出所有这些策略后，它仍然显示“用户帐户无权调用 EC2”

请指导。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:48:27.490

EMR 建立在您还需要订阅的其他 AWS 服务之上。授予 IAM 调用 ec2、s3 和 emr 的权限是不够的。

# android - 检测和处理 Webview 中的弹出窗口并在新选项卡或窗口中打开 url

> ID：10379774
> 
> 赞同：11
> 
> 时间：2012-04-30T07:08:59.410
> 
> 标签：android, popup, android-webview, android-browser

我只想知道是否有任何其他方法可以处理 android Webview 中网站的弹出窗口并在新选项卡中打开或使用 webview 在新窗口中打开。

在普通浏览器中通常在新窗口中打开的打开网址。

我还在学习浏览器的实现，所以我的问题可能有点幼稚，请多多包涵:)

# iphone - 如何防止解除弹出控件？

> ID：10379780
> 
> 赞同：1
> 
> 时间：2012-04-30T07:09:30.567
> 
> 标签：iphone, ios, ipad

当我触摸任何视图时，我不想关闭弹出框控制器。是否可以？我正在使用以下代码来显示弹出框控制器。

```
UIPopoverController* popoverCamera;

popoverCamera= [[UIPopoverController alloc] initWithContentViewController:videoRecorder];

[popoverCamera presentPopoverFromRect:CGRectMake(cropRectangleButton.frame.origin.x,cropRectangleButton.frame.origin.y,0,0) inView:innerview permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
NSLog(@"start recording-->%d",[videoRecorder startVideoCapture]);
[videoRecorder startVideoCapture];
[self presentModalViewController:videoRecorder animated:YES];  
[videoRecorder release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:17:47.510

是的，有可能。实现以下委托方法：

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController
{
     return NO;
} 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:17:48.410

从链接[禁用 uipopoverview 控制器的解雇](https://stackoverflow.com/questions/6898347/disable-dismissal-of-uipopoverview-controller)

显示时，在弹出窗口外点击会导致弹出窗口自动消失。要允许用户与指定的视图交互而不关闭弹出框，您可以将一个或多个视图分配给 passthroughViews 属性。弹出窗口内的点击不会自动导致弹出窗口被关闭。您的视图和视图控制器代码必须显式处理弹出框内的操作和事件，并根据需要调用 dismissPopoverAnimated: 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:15:32.237

实现弹出委托

```
/* Called on the delegate when the popover controller will dismiss the popover. Return NO to prevent the dismissal of the view.
 */
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-16T21:17:42.780

func popoverShouldClose(_ popover: NSPopover) -> Bool { return false }

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-30T07:19:23.560

在你不想关闭弹出窗口的地方试试这个： -

```
[popOverController dismissPopoverAnimated:NO]; 
```

希望这可以帮助 ：）

# xcode - XCODE中的重复符号_winSocks

> ID：10379784
> 
> 赞同：0
> 
> 时间：2012-04-30T07:09:47.103
> 
> 标签：xcode

我在 /users/..../xxx.o 和 /users/..../yyy.o 中出现重复符号 _winsocks 的错误

谁能告诉我如何在 XCODE 中避免这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:18:30.987

我不具体了解 XCODE，但这种错误意味着两个目标文件都定义了`__winsocks`符号（这意味着它们是用定义这个的东西（可能是头文件）编译的。如果你可以提供编译/链接指令对于他们每个人，也许我们可以给你更多的帮助。

# .net - 异步 Web 服务回调 - 如何在服务器端使用两个函数实现

> ID：10379794
> 
> 赞同：1
> 
> 时间：2012-04-30T07:10:24.747
> 
> 标签：.net, web-services, asynchronous

服务器和客户端都使用.Net 4，

并且目前使用回调来进行异步 Web 服务调用。

但是服务器正在做的工作需要很长时间，我希望能够释放服务器上的请求线程（类似于客户端）。

是否可以使用 .Net Callbacks 在服务器上调用函数 A。

并且函数 B（在服务器上）会将答案返回给客户端回调函数？

我正在使用[.NET Framework](http://msdn.microsoft.com/en-us/library/aa480512.aspx)（不带 WCF）通过 HTTP 进行异步 Web 服务调用。

谢谢

拉斐尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:23:51.123

在此示例代码中，客户端调用 ECF 服务器上的函数，服务器也调用客户端函数。

在以下示例中，您还可以找到事件订阅。

**示例代码 SampleServiceClient ：**

```
using System;
using System.Collections.Generic;
using System.ServiceModel;
using System.Text;
using SampleServiceClient.SampleServiceReference;
using System.Windows.Forms;
using System.Threading;
using System.ComponentModel;

namespace SampleServiceClient
{
    /*WCF duplex use a SynchronizationContext by default, which means the callback will happen on UI threadm,  
     * so that you can update UI in your callback.  But your client are calling your server in on the UI thread,  
     * so the callback will never be able to be delivered to your client.  that's the orignal reason why it blocked.
     * 
        Now if you use Synchronization=false,  the callback will be delivered to you by a non-UI thread,  
     * that's why you can receive the callback now.

     * After you receive the callback,  you still want to update the UI in the UI thread,  
     * but the UI thread is still blocking now waiting for server response,  so that's why it is blocking again,  is it right?*/

    [CallbackBehavior(UseSynchronizationContext = false)] 
    class SampleCallback : IService1Callback
    {
        frmClient frm; 
        public SampleCallback()
        {

        }
        public SampleCallback(frmClient  Form1)
        {

            frm = Form1;
        }
        public void ShowCallbackMessage(string message)
        {
            SetText("Callback message --> " + message);
        }

        public void OnPriceChanged(int value)
        {
            SetText("On Price Changed by client number : " + value.ToString());
        }

        private void SetText(String str)
        {
            SendOrPostCallback instance = new SendOrPostCallback(frm.AddItem);
            frm.BeginInvoke(instance, str);
        }

    }
} 
```

**服务器端代码：**

```
using System;
using System.Collections.Generic;
using System.ServiceModel;
using System.Text;

namespace SampleService
{
    //No Service Contract Tag for Callback Inteface
    interface ISampleCallback
    {
        [OperationContract(IsOneWay = true)]
        void ShowCallbackMessage(string message);

        [OperationContract(IsOneWay = true)]
        void OnPriceChanged(int value);

    }

 //Name of Callback Contract on the WCF Service Contract which we want to expose to client
    //You can assosiate only one CallBack Interface with a WCF Service Contract
    [ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(ISampleCallback))]
    public interface IService1
    {
        [OperationContract]
        string GetData(int value);

        [OperationContract (IsOneWay=true)]
        void ChangePrice(int value);

        //Code to Show Events Programming
        [OperationContract]
        bool SubscribeToPriceChangedEvent();

        [OperationContract]
        bool UnsubscribeFromPriceChangedEvent();
    }

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession,
                 ConcurrencyMode = ConcurrencyMode.Reentrant)]
    public class Service1 : IService1
    {
        static List<ISampleCallback> clients = new List<ISampleCallback>();
        private ISampleCallback callback=null;
        internal ISampleCallback Callback
        {
            get { return callback; }
            set { callback = value; }
        }

        public string  GetData(int value)
        {
            //Invoke the callback operation in the client operation
            callback = OperationContext.Current.GetCallbackChannel<ISampleCallback>();
            //All WCF channels implements the ICommunicationObject interface.
            //If State is not opened then the service should not attempt to use callback.
            if (((ICommunicationObject)callback).State == CommunicationState.Opened)
            {

                 Callback.ShowCallbackMessage("You are the client number " + value.ToString());
            }
            return string.Format("Callback message sent to client number " + value.ToString());
        }

        public void ChangePrice(int value)
        {
            raisePriceChangedEvent(value);
        }

        //Event Programming
        public bool SubscribeToPriceChangedEvent()
        {
            try
            {
                Callback = OperationContext.Current.GetCallbackChannel<ISampleCallback>();
                if (!clients.Contains(Callback))
                {
                    clients.Add(Callback);
                }
                return true;
            }
            catch (Exception)
            {
                return false;
            }

        }

        public bool UnsubscribeFromPriceChangedEvent()
        {
            try
            {
                Callback = OperationContext.Current.GetCallbackChannel<ISampleCallback>();
                clients.Remove (Callback);
                return true;
            }
            catch (Exception)
            {
                return false;
            }
        }

        private void raisePriceChangedEvent(int value)
        {
            clients.ForEach(delegate(ISampleCallback oCallback)
               {
                   if (((ICommunicationObject)oCallback).State == CommunicationState.Opened)
                   {
                       oCallback.OnPriceChanged(value);
                   }
                   else
                   {
                       clients.Remove(oCallback);
                   }

                });
        }
    }
} 
```

# linux - 如何使用差异（bash）仅显示不同的行

> ID：10379795
> 
> 赞同：24
> 
> 时间：2012-04-30T07:10:27.683
> 
> 标签：linux, bash, unix, diff

如何在单独的文件中使用 diff 仅显示不同的行？

例如，文件编号 1 包含以下行：

```
1;john;125;3
1;tom;56;2
2;jack;10;5 
```

文件编号 2 包含以下行：

```
1;john;125;3
1;tom;58;2
2;jack;10;5 
```

如何使以下发生？

```
1;tom;58;2 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-30T07:14:59.837

一个.txt：

```
1;john;125;3
1;tom;56;2
2;jack;10;5 
```

b.txt：

```
1;john;125;3
1;tom;58;2
2;jack;10;5 
```

使用[通讯](http://en.wikipedia.org/wiki/Comm)：

```
comm -13 a.txt b.txt 
1;tom;58;2 
```

命令行选项`comm`非常简单：

> -1 抑制第 1 列（FILE1 独有的行）
> 
> -2 抑制第 2 列（FILE2 独有的行）
> 
> -3 抑制第 3 列（出现在两个文件中的行）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-30T07:15:32.237

假设您只想保留文件 2 独有的行，您可以执行以下操作：

```
comm -13 file1 file2 
```

请注意，该`comm`命令要求这两个文件按排序顺序排列。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-08-28T22:19:20.473

Here's a simple solution that I think is better than `diff`:

`sort file1 file2 | uniq -u`

*   `sort file1 file2` concatenates the two files and sorts it
*   `uniq -u` prints the unique lines (that do not repeat). It requires the input to be pre-sorted.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-26T18:29:55.287

使用组格式说明符，您可以禁止打印未更改的行并仅打印更改的行以进行更改

`diff --changed-group-format="%>" --unchanged-group-format="" file1 file2`

# java - 当我重新部署应用程序时，Bouncycastle 无法加载

> ID：10379799
> 
> 赞同：14
> 
> 时间：2012-04-30T07:10:57.823
> 
> 标签：java, bouncycastle

我按照此说明添加 bouncycastle： http: [//www.bouncycastle.org/wiki/display/JA1/Provider+Installation](http://www.bouncycastle.org/wiki/display/JA1/Provider+Installation) 但我还有一个问题。有时当我重新部署我的应用程序时，找不到这个提供程序，所以我的应用程序抛出异常。此问题每 100 次重新部署仅发生一次（可能更少）。当我重新启动我的服务器 - weblogic 然后它再次开始工作。对于为什么会出现此问题的任何建议，我将不胜感激

编辑：

我在上面的链接中使用了这两种方法，因为当我只使用其中一种时它不起作用我添加到 java.security 这个provder，然后在我的类中我注册了这个provder：

```
static {
    Security.addProvider(new BouncyCastleProvider());
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-05T23:48:10.763

你可能有一个`NoClassDefFoundError`. 这是 JSSE 实现的一个已知问题。

这是场景：

*   您的容器在特定于应用程序的 ClassLoader 中加载充气城堡类
*   您创建的提供程序实例取决于该类等该 ClassLoader
*   然后通过顶级 JVM ClassLoader 中的静态字段将提供程序注册到 JRE API
*   重新部署时，容器丢弃应用程序ClassLoader创建一个新的
*   由于算法已知，第二个提供者插入失败
*   使用该算法时，提供程序实例根本无法使用，因为 ClassLoader 已被丢弃
*   然后唯一的选择是重新启动容器以解决问题。

由于没有针对 undeploy 事件的标准侦听器，因此无法同时触发 JSSE 提供程序删除。

避免该问题的推荐方法是在您的 JVM ClassPath 或容器 ClassPath 中添加充气城堡类。您必须将其从您的应用程序中删除。现在您需要使用静态初始化程序的替代选项注册 BC 提供程序。WebLogic 提供了[在服务器启动时触发代码的方法](http://docs.oracle.com/cd/E23943_01/web.1111/e13728/notifications.htm#JMXCU222)（我使用了服务器启动类），该代码将负责在整个服务器/JVM 生命周期内注册 JSSE 提供程序。

另一种选择是在 JRE`java.security`文件中添加以下行，其中包含 bouncy castle jar，`jre/lib/ext`但我不喜欢这种方式，因为更新时它可能会丢失：`security.provider.7=org.bouncycastle.jce.provider.BouncyCastleProvider`

因此，应用程序只希望实现存在，添加算法可用性测试以向操作员和用户报告任何问题可能是一个好主意。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T12:49:00.867

我使用这项工作在 Tomcat 中重新部署应用程序：

```
public class GenSignCastle {
    BouncyCastleProvider        bcProvider = null;

public GenSignCastle() {
    if ( bcProvider == null ) {
        bcProvider = new BouncyCastleProvider();
        Provider[] providers = Security.getProviders();

        String name = bcProvider.getName();
        Security.removeProvider( name ); // remove old instance

        Security.addProvider( bcProvider );
    }
}
.
.
.
} 
```

有趣的是我必须先删除 BouncyCastleProvider 才能在重新部署后再次使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T14:05:29.250

通过以下代码和 sun.security.jce 包的使用，可以轻松解决此问题：

```
ProviderList list = Providers.getFullProviderList();
ProviderList.add(list, new BouncyCastleProvider());
Providers.beginThreadProviderList(list); 
```

该列表将扩展为使用充气城堡提供程序，并且新列表将作为本地线程注入。这可以在 servletfilter 或其他东西中使用。请求完成后可能需要将列表重置为旧值

```
Providers.endThreadProviderList(this.oldList); 
```

# asp.net - JQueryUI Dialog IE9 未打开

> ID：10379801
> 
> 赞同：0
> 
> 时间：2012-04-30T07:11:02.360
> 
> 标签：asp.net, jquery-ui, dialog, internet-explorer-9

我有一个包含用 JQueryUI 定义的对话框的 aspx 页面

```
$('#dialog').dialog({
    modal: true,
    autoOpen: false,
    minWidth: 500,
    title: 'my dialog',
    buttons: { Finished: function() { $(this).dialog("close"); }
    }
}); 
```

在页面内我有一个按钮应该打开对话框

```
<button class="button" id="dialogLoader">Open</button> 
```

打开对话框的 JavaScript 是

```
$('#dialogLoader').live('click', function(event) {
    event.preventDefault();
    $('#dialog').dialog("open");
    loadDialogContent();
}); 
```

在 Chrome Firefox 等中一切都很好，但 IE9 不加载对话框，即使在调试时所有代码似乎都可以正常执行。

有任何想法吗

**更新**

仍然有这个问题我已经更新了上面的代码以表明我现在正在使用 preventDefault(); 我认为这是问题的原因（如果问题确实是事件冒泡）。但如果这是纯 HTML，我仍然无法解决这个问题，但我担心 ASP 的参与会导致渲染出现一些不规则性，不幸的是没有返回错误。

**更新**

此按钮位于 JQueryUI 选项卡中的事实是否会导致 IE9 中的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:25:55.740

当你写你的调试信息是干净的，这只是一个想法。我希望这会有所帮助。资源管理器的附加事件。

```
var button = document.getElementById('dialogLoader');
if (button.addEventListener) {
    button.addEventListener('click', function() {
        //action
    }, true);
} else if (button.attachEvent) {
    button.attachEvent('click', function() {
        //action
    }, true);
} 
```

# mysql - 使用“ndb --initial”会导致 MySQL 集群上的数据丢失？

> ID：10379805
> 
> 赞同：3
> 
> 时间：2012-04-30T07:11:22.610
> 
> 标签：mysql, mysql-management, data-loss

我有一个带有 1 个管理节点、2 个数据节点和 2 个 mysql 节点的 MySQL 集群。

我关闭了集群，然后在管理节点和数据节点上**都**使用“--initial”标志启动它，只是稍后才注意到“--initial”在数据节点上的作用与在数据节点上的作用完全不同管理。

在我这样做之后，我的表消失了，我在日志中看到这样的行：

```
2012-04-30 04:40:33 [MgmtSrvr] INFO     -- Node 2: Local checkpoint 91 started. Keep GCI = 149842 oldest restorable GCI = 107834
2012-04-30 04:40:36 [MgmtSrvr] INFO     -- Node 2: Local checkpoint 91 completed 
```

这是一个测试数据库，我在 2 个表上只有几十行，但这种情况已经持续了大约 4 天。

我在 Red Hat Enterprise 5 和 mysql-5.1.51 ndb-7.1.9 上运行。提到这一点，因为 MySQL 文档提到在某些操作系统上可能需要大量时间才能重建恢复文件。

问题是，如果我等待足够长的时间，它会恢复我的数据还是应该重新开始？如果是这样，我是否需要做一些特别的事情或者只是重新创建相同的表和数据就足够了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T16:03:26.123

除非您已执行备份，否则您应该重新开始。--initial 命令将删除数据节点中的所有数据

# sql - 从数据库填充下拉列表

> ID：10379808
> 
> 赞同：0
> 
> 时间：2012-04-30T07:11:54.483
> 
> 标签：sql, asp.net-mvc, razor

我正在尝试从 webforms 转移到 MVC，老实说，进展并不顺利。

我需要`DropDownList`从我的数据库中填充值，我很难理解如何做到这一点。我在想，我需要创建一个模型，使用实体框架，并参考我`DropDownList`的？但是我如何将它指向那个模型呢？另外，如果我从数据库表中创建模型，我该如何调整选择命令，所以我只能得到某些值，而不是整个表？

我知道这是一个广泛的问题，我没有列出任何示例，但我很难找到关于我的问题的信息，我可以理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:18:47.523

这个怎么样

你的视图模型

```
 public class CategoryViewModel
   {
    public Category Category { get; set; }   
    public IEnumerable<SelectListItem> CategoryTitles { get; set; }   
   } 
```

你的控制器

```
 public ActionResult Create()
    {
       var categoryviewmodel = new CategoryViewModel();              
       categoryviewmodel.Category = new Category();
       var list = categoryRepository.AllCategoryTitles().ToList().Select(t => new SelectListItem
          {
                Text = t.CategoryName,
                Value = t.CategoryID.ToString()
          })
          .ToList();           
          list.Insert(0, new SelectListItem { Value = "0", Text = "Please Selext" });          

        categoryviewmodel.CategoryTitles = list;
        return View(categoryviewmodel);
    } 
```

您的存储库

```
 public IQueryable<Category> AllCategoryTitles()
    {       
        var query = context.Categories.Where(m => m.ParentCategoryID == null && m.IsActive==true);
        return query;
    } 
```

你的看法

```
 @Html.DropDownListFor(model => model.CategoryParentID, Model.CategoryTitles) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:40:03.270

我将从这个开始，如果您还没有这样做，这应该可以让您创建项目，这样您就可以准备好模型

[http://msdn.microsoft.com/en-us/data/gg685489](http://msdn.microsoft.com/en-us/data/gg685489)

为了创建一个下拉列表这里是一个例子

```
ViewBag.dropdownlist = new SelectList(db.tablename, "Valuefiled", "NameGField"); 
```

其中 Valuefiled=数据库中要用于值的列的名称

"NameGField"=数据库中要用于名称的列的名称

获取下拉列表以查看

```
@Html.DropDownList("dropdownlist") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T08:19:11.523

您可以使用视图模型。这是一个带有一些假设的示例解决方案。请参阅下拉列表（在下拉列表中，我列出了“InBound”类型的部门

员工模型

```
public class EmployeeModel
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int DeptId { get; set; }
} 
```

部门模型

```
public class DepartmentModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Type { get; set; }
} 
```

ViewModel（要传递到视图中）

```
public class EmployeeViewModel
{
    public EmployeeModel Employee { get; set; }
    public IEnumerable<DepartmentModel> Departments { get; set; }
} 
```

控制器

```
public ActionResult Index()
    {
        EmployeeViewModel vm = new EmployeeViewModel();

        //This is hardcoded. However you will write your own method to pull the department details with filtering
        List<DepartmentModel> departments = new List<DepartmentModel>() { new DepartmentModel { Id = 1, Name = "Accounts", Type = "InBound" }, new DepartmentModel { Id = 2, Name = "Finance", Type = "OutBound" }, new DepartmentModel { Id = 3, Name = "HR", Type = "InBound" } };
        vm.Departments = departments.Where(d => d.Type == "InBound"); 

        return View(vm);
    } 
```

看法

```
 @model Test1.ViewModels.EmployeeViewModel
    @{
          ViewBag.Title = "Index";
     }

     <h2>Index</h2>
     @using (Html.BeginForm())
     {
         @Html.HiddenFor(model => model.Employee.Id);
      <table>
        <tr>
            <td>@Html.LabelFor(model => model.Employee.FirstName)</td>
            <td>@Html.EditorFor(model => model.Employee.FirstName)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(model => model.Employee.LastName)</td>
            <td>@Html.EditorFor(model => model.Employee.LastName)</td>
        </tr>
        <tr>
            <td>@Html.Label("Department")</td>
            <td>@Html.DropDownListFor(model => model.Employee.DeptId, new SelectList(Model.Departments, "Id", "Name"))</td>
        </tr>
    </table>
} 
```

# ms-access - 访问 VBA CommandBarButton.OnAction 不起作用

> ID：10379813
> 
> 赞同：1
> 
> 时间：2012-04-30T07:12:20.127
> 
> 标签：ms-access, vba, toolbar, commandbar, vbe

我正在尝试在 Access VBA 编辑器中创建自己的工具栏按钮（commandbarbutton）。它是一个在名为“RunTests”的公共模块中运行过程的按钮。我做了这样的按钮：

```
Public Sub CreateToolbar()
    Dim cmdBar As CommandBar
    Dim cmdButton As CommandBarButton
    Set cmdBar = Application.VBE.CommandBars.Add("Run Tests")
    Set cmdButton = cmdBar.Controls.Add(msoControlButton)
    cmdButton.FaceId = 558
    cmdButton.DescriptionText = "Run the tests"
    cmdButton.Caption = "Run Tests"
    cmdButton.OnAction = "RunTests"
    cmdButton.Enabled = True
    cmdButton.Style = msoButtonIconAndCaption
    cmdBar.Visible = True
End Sub 
```

我运行该程序作为测试。它创建了按钮就好了。但是“点击”动作没有响应。该按钮似乎不可点击。有人知道为什么吗？

**编辑：找到解决方案：http: [//support.microsoft.com/default.aspx](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q280607) ?scid=kb;en-us;Q280607 - 我会尽快回答我自己的问题以关闭它。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-20T18:02:12.557

对我来说，关键是让“RunTests”成为一个公共子程序。当它是私有的时，它不起作用。

```
cmdButton.OnAction = "=RunTests()"

public sub RunTests() 
```

`private sub RunTests()`不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:00:10.537

找到解决方案 - 要使其工作，您必须实施此处描述的解决方法：http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;Q280607](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q280607)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T22:47:44.993

不幸的是，我试图在一个类中定义我的按钮和菜单。OnAction 子例程在本地定义为类的一部分时从未执行过。它只会在类定义之外定义时执行。

当我将我的类重新定义为包含许多子程序和函数的模块时，执行了 OnAction 子例程。可能与范围和可见性有关，或者我没有正确的 OnAction 语义来调用类方法。底线是在模块中定义按钮/菜单/小部件，这会容易得多。（我使用的是 Excel VBA，但我认为 Access 和 Excel VBA 是相同的。）

# java - 为 Web 应用程序选择 java 自动化测试工具

> ID：10379816
> 
> 赞同：12
> 
> 时间：2012-04-30T07:12:42.893
> 
> 标签：java, automated-tests

我对网络自动化测试工具非常陌生。我想自动化我的网络功能测试。

请向我推荐一些网络自动化测试工具。我想用Java来写我的自动化测试工具。

我访问了以下站点以选择一个好的工具，但由于我不知道很难为我选择一个合适的工具。 [http://java-source.net/open-source/web-testing-tools](http://java-source.net/open-source/web-testing-tools)

任何人都可以建议我一个很好的网络测试工具吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-30T07:21:43.473

**Web 应用程序测试工具**

[Selenium](https://code.google.com/p/selenium/)是广泛用于 Web 应用程序的可移植软件测试框架。Selenium 提供了一个记录/回放工具，用于在不学习测试脚本语言的情况下编写测试。

Selenium 得到了一些最大的浏览器供应商的支持，这些供应商已经（或正在）采取措施使 Selenium 成为其浏览器的本机部分。它也是无数其他浏览器自动化工具、API 和框架的核心技术。

[Aneater](http://freshmeat.net/projects/anteater-ant/)是一个围绕 Ant 设计的测试框架，来自 Apache Jakarta 项目。它基本上是一组 Ant 任务，用于对网站和 Web 服务进行功能测试（功能测试是：点击 URL 并确保响应符合特定标准）。可以测试 HTTP 参数、响应代码、XPath、regexp 和 Relax NG 表达式。Aneater 还包括 HTML 报告（基于 junitreport）和用于快速配置大型测试脚本的分层分组系统。当收到 Web 请求时，Anteater 可以检查请求的参数并相应地发送响应。这使得它对测试 SOAP 和 XML 应用程序很有用。

等待传入 HTTP 消息的能力是 Anteater 独有的，这使得它在为使用基于 SOAP 的高级通信（如 ebXML 或 BizTalk）的应用程序构建测试时特别有用。使用这些协议编写的应用程序通常会接收 SOAP 消息并发回无意义的响应。只是稍后他们才使用客户端上的 HTTP 请求通知客户端处理结果。这些就是所谓的异步 SOAP 消息，并且是许多基于 SOAP 或 XML 消息的高级协议的核心。

用Java写的，HttpUnit 模拟浏览器行为的相关部分，包括表单提交、Javascript、基本 HTTP 身份验证、cookie 和自动页面重定向，并允许 Java 测试代码以文本、XML DOM 或表单、表格容器的形式检查返回的页面，和链接。

[jWebUnit](http://freshmeat.net/projects/jwebunit/)是一个 Java 框架，它有助于为 Web 应用程序创建验收测试。它提供了一个用于导航 Web 应用程序的高级 API，并结合了一组断言来验证应用程序的正确性。这包括通过链接导航、表单输入和提交、表格内容的验证以及其他典型的业务 Web 应用程序功能。它在幕后使用 HttpUnit。与仅使用 JUnit 和 HttpUnit 相比，简单的导航方法和即用型断言允许更快地创建测试。

[Bugkilla](http://freshmeat.net/projects/bugkilla/)是一个工具集，用于创建、维护、执行和分析 Web 应用程序的功能系统测试。对于 Web 前端和业务逻辑层，测试的规范和执行都是自动化的。一个目标是与现有框架和工具集成（存在 Eclipse 插件）

[Grinder](http://freshmeat.net/projects/grinder/)是一个在 BSD 风格的开源许可下免费提供的 Java 负载测试框架，使用图形控制台应用程序可以轻松地在多台机器的许多进程中编排测试脚本的活动。测试脚本使用包含在 Java 插件中的客户端代码。The Grinder 的大多数用户自己不编写插件。他们使用提供的插件之一。Grinder 带有一个用于测试 HTTP 服务的成熟插件，以及一个允许自动记录 HTTP 脚本的工具。

[Jameleon](http://freshmeat.net/projects/jameleon/)是一种自动化测试工具，可将应用程序分离为功能，并允许将这些功能独立绑定在一起，从而创建测试用例。然后，这些测试用例可以由数据驱动并针对不同的环境执行。Jameleon 将应用程序分解为功能并允许在任何级别进行测试，只需为同一测试传入不同的数据。因为 Jameleon 基于 Java 和 XML，所以不需要学习专有技术。

它是一个验收测试工具，用于测试应用程序提供的功能，目前支持Web应用程序的测试。它与常规 HttpUnit 和 jWebUnit 的不同之处在于它将功能测试与实际测试用例本身分开。如果我理解正确，您可以单独编写功能测试，然后将它们一起编写成可重用的测试用例。顺便说一句，您还可以使这些测试用例由数据驱动，这为在特定环境中运行特定测试提供了一种简单的方法。

该框架有一个插件架构，允许使用不同的功能测试工具，还有一个使用 HttpUnit/jWebUnit 测试 Web 应用程序的插件。测试用例脚本是用 XML 和果冻。

Jameleon 结合XDoclet,Ant 和 Jelly 为您的 Web 应用程序的可靠功能测试提供了一个潜在的强大框架。它在脚本和编码之间取得了很好的平衡，并允许您通过 CSV 文件提供输入来为每个测试设置多个输入。伴随着灵活性而来的是复杂性和维护开销，但您正在为您的 Web 应用程序进行测试。

[LogiTest](http://freshmeat.net/projects/logitest/)是 LogiTest 套件中的核心应用程序。LogiTest 旨在帮助测试网站功能。它目前支持 HTTP 和 HTTPS 协议、GET 和 POST 方法、多文档视图、自定义标题等。LogiTest 应用程序提供了一个简单的图形用户界面，用于创建和回放测试以测试基于 Internet 的应用程序。

[Solex](http://freshmeat.net/projects/solex/)是一组 Eclipse 插件，提供 Web 应用程序服务器的非回归和压力测试。借助内置的 Web 代理，可以从 Internet 浏览器记录测试脚本。对于某些 Web 应用程序，请求取决于先前服务器的响应。为了解决这样的要求，Solex 引入了提取和替换规则的概念。与 HTTP 消息内容相关的提取规则会将提取的值与变量绑定。替换规则将使用可变内容替换 HTTP 消息的任何部分。

因此，该工具提供了一种简单的方法来提取 URL 参数、标头值或请求或响应的任何部分，将它们的值与变量绑定，然后用变量内容替换 URL 参数、标头值或请求的任何部分. 用户可以为每个响应添加断言。收到响应后，将调用此响应的所有断言以确保其有效。如果不是，则停止播放过程。提供了几种规则和断言。最复杂的支持正则表达式和 XPath。

[Tclwebtest](http://freshmeat.net/projects/tclwebtest/)是一个用 Tcl 编写 Web 应用程序自动化测试的工具。它实现了一些基本的 HTML 解析功能，为结果页面的 HTML 元素（最重要的表单）上的操作提供舒适的命令。

[TagUnit](http://freshmeat.net/projects/tagunit/)是一个框架，通过它可以在容器内测试自定义标签，并与最终使用它们的页面隔离开来。本质上，它是一个标签库，用于测试 JSP 页面中的标签。这意味着很容易对标签进行单元测试，包括它们生成的内容以及它们对环境的副作用，例如脚本变量的引入、页面上下文属性、cookie 等。

[Web Form Flooder](http://freshmeat.net/projects/formflood/) 是一个 Java 控制台实用程序，它分析 Web 页面，使用合理的数据完成页面上存在的任何表单，并提交数据。它爬取站点内的链接，以识别和泛滥可能存在的其他表单。它非常适合对 Web 表单进行负载测试，检查所有链接是否正常工作以及表单是否正确提交。

[XmlTestSuite](http://freshmeat.net/projects/xmltestsuite/) 提供了一种强大的方法来测试 Web 应用程序。编写测试只需要 HTML 和 XML 知识。作者希望 XmlTestSuite 被没有 Java 背景的测试人员、业务分析师和 Web 开发人员采用。XmlTestSuite 支持“测试驱动开发”。它使您可以将页面结构与测试和测试数据分开。它还可以验证数据库。它类似于 JWebUnit，但具有简单的 XML 测试定义和可重用的页面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T07:15:15.840

对于 Web 测试，请使用 Selenium (WebDriver) 它可能是[**GoogleCode上用于此目的的最佳工具**](http://code.google.com/p/selenium/)

你可以在 google 上找到很多例子， [**seleniumhq.org**](http://seleniumhq.org/docs/03_webdriver.html)上 的文档对初学者很有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T07:17:33.953

Selenium 是用于 Web UI 测试的最成熟和最广泛使用的工具（无论如何都是开源的，尽管我认为也没有更好的专有工具）。它最大的优点是它使用实际的浏览器引擎，因此也可以用来测试 AJAX 繁重的页面。

# view - Yii 渲染函数的区别

> ID：10379817
> 
> 赞同：16
> 
> 时间：2012-04-30T07:12:46.390
> 
> 标签：view, yii, render, partial

我有时会被三种渲染方法搞砸：

*   `Controller::render()`
*   `Controller::renderPartial()`
*   `Controller::renderFile()`

请你解释一下。谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-30T08:59:39.330

**`render()`**通常用于呈现与用户在应用程序中看到的“页面”相对应的视图。它首先渲染您指定的视图，然后渲染当前控制器操作的布局（如果适用），将第一次渲染的结果放入布局中。然后它执行输出处理（此时意味着自动插入任何必要`<script>`的标签并更新动态内容）并最终输出结果。

**`renderPartial()`**通常用于渲染页面的“片段”。主要区别在`render()`于此方法不会*将*渲染结果放置在布局中。默认情况下，它也不执行输出处理，但您可以使用`$processOutput`参数覆盖此行为。

**`renderFile()`**是一种低级方法，它完成繁重的渲染工作：它提取当前范围内的数据变量，然后运行视图代码。其他两种方法在内部调用此方法，但实际上您应该永远不需要自己调用它。如果这样做，请记住您需要传入*文件路径*（而不是视图路径）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T08:38:45.303

**渲染文件**：

将使用设置的渲染引擎在给定文件上运行渲染方法。这在 Yii 中相当低级，仅在内部或控制台命令中真正使用。

**渲染部分**：

这采用给定的别名，并使用所有局部变量（例如当前运行的控制器和模块以及别名定义）将其转换为文件路径。然后它几乎只使用渲染文件。

**渲染**：

这是渲染部分的组合，使我们的生活更轻松。它将在当前活动的控制器或已定义的控制器上渲染布局，渲染其中的所有内容，处理渲染缓存，并处理客户端脚本的输出。

希望清除它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T08:44:09.587

renderPartial() 对于在页面中显示 ssi 组件非常有用 - 即页眉、页脚、小部件等。

# iphone - 查找循环引用

> ID：10379822
> 
> 赞同：2
> 
> 时间：2012-04-30T07:13:25.170
> 
> 标签：iphone, objective-c, circular-dependency, circular-reference

我无法编译我的 iPhone 项目。在我的`CType.h`我收到错误：

> 找不到“CType”超类“NSObject”的接口声明。

这会导致许多其他错误也在同一个头文件中。

我读过这可能是由于我的项目中的循环引用。因此，我尝试将我的许多标头导入更改为前向声明。还有一些我还没有设法进行前向声明（例如，如果该类从另一个类继承，那么它需要导入，并且如果我使用的是委托。不过，可能有一种解决方法）。

我已经多次搜索我的项目，但我没有设法找到循环引用。是否有任何提示或技巧来查找循环引用？我以为这与我的有关`CType`，但似乎并非如此。

**编辑：**

这是我的 CType：

界面：

```
#import <Foundation/Foundation.h>

@interface CType : NSObject

/*
 * Type ID
 */
@property (nonatomic, assign) NSInteger typeId;

/*
 * Type
 */
@property (nonatomic, strong) NSString *type;

/*
 * Initialize with type ID and type
 */
- (id)initWithId:(NSInteger)typeId type:(NSString *)type;

/*
 * Type with type ID and type
 */
+ (CType *)typeWithId:(NSInteger)typeId type:(NSString *)type;

@end 
```

执行：

```
#import "CType.h"

@implementation CType

/* Create setters and getters */
@synthesize typeId;
@synthesize type;

/* Initialize with type ID and type */
- (id)initWithId:(NSInteger)_typeId type:(NSString *)_type
{
    if (self = [super init])
    {
        self.typeId = _typeId;
        self.type = _type;
    }

    return self;
}

/* Type with type ID and type */
+ (CType *)typeWithId:(NSInteger)typeId type:(NSString *)type
{
    return [[CType alloc] initWithId:typeId type:type];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:29:53.753

我倾向于同意@Hot Licks。这很可能是文件损坏或配置错误，因为理论上您的代码没有任何问题。

这就是我的建议：

创建一个新类（命名为 CType 以外的名称）并将代码从 CType 迁移到新类。然后删除旧的 CType 文件。如果那时一切正常，那么将您的新类重命名为 CType 并看看会发生什么。此外，请仔细检查您的应用程序 prefix.pch 文件以查看其中导入了哪些标头。

# html - IE 无法正确解析 HTML

> ID：10379827
> 
> 赞同：1
> 
> 时间：2012-04-30T07:13:44.077
> 
> 标签：html, internet-explorer, dom

**这是我在 IE9 中单击查看源代码后查看**的 HTML 代码的快照。我在记事本++中打开

![我的 HTML 代码的快照](../Images/4abfac785abf753270806f7b9d6e5127.png)

以下是 IE9 的开发者工具解析的代码：

![在此处输入图像描述](../Images/e7bd65a15e65c095de1e3f478752559c.png)

为什么两者之间会出现脱节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:21:05.127

Developer Tool 不会向您显示代码的来源，它会显示 DOM（文档对象模型），这就是存在差异的原因。您可以在此处阅读有关 DOM 的更多信息：[https ://developer.mozilla.org/en/DOM/](https://developer.mozilla.org/en/DOM/)

Developer Tool 中显示的内容代表您解析的源代码，经过一些修改以提高可读性且没有错误标签，总之，它没有显示确切的源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:59:03.073

正如@Shadow Wizard 在评论中所建议的那样，可能的原因是`<!DOCTYPE ...>`声明前的某些数据字符。例如，通过获取有效的 XHTML 文档并在文档的开头插入不间断空格字符（NBSP，U+00A0），可以重现该问题。但是一开始就存在 BOM*不会*导致问题（至少在 IE 9 上不会，几乎在任何正在使用的浏览器上都不会）。有大量不可见或几乎不可见的字符可能会导致问题。

# android - 如何向 Android Spinner 添加搜索选项？

> ID：10379829
> 
> 赞同：6
> 
> 时间：2012-04-30T07:13:49.507
> 
> 标签：android, android-spinner

我在 android spinner 中有很长的数据显示列表。所以我想为这个微调器添加一个搜索选项？任何人都可以帮助我提供一个简单的示例代码..（我看到了一些关于此的答案，但它们还不够）..

我是 android 新手，我知道实际上这不是正确的方法。但我想将这种选项添加到微调器。当您在搜索框上点击一个字母时，项目列表将显示在与该字母相关的微调器中。非常感谢。

公共无效搜索（查看视图）{

```
 cursor = db.rawQuery("SELECT * FROM tblRepTeritories WHERE RepCode like?", 
        new String[]{"%" + searchText.getText().toString() + "%"});

    SimpleCursorAdapter adapter1 = new SimpleCursorAdapter(
            this, 
            android.R.layout.simple_spinner_item, 
            cursor, 
            new String[] {"TeriCode"}, 
            new int[] {android.R.id.text1});

adapter1.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
// get reference to our spinner
Spinner s1 = (Spinner) findViewById( R.id.spinner2 );

s1.setAdapter(adapter1);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T12:10:42.867

使用`TextWatcher`然后调用`notifyDataSetChanged()`您的适配器：

```
searchText.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void afterTextChanged(Editable s) {
        cursor = db.rawQuery("SELECT * FROM tblRepTeritories WHERE RepCode like?", 
            new String[] {"%" + searchText.getText().toString() + "%"});
        adapter1.notifyDataSetChanged();

    }
}); 
```

# asp.net-mvc-3 - 如何在控制器中检索 CheckBox 值 - Asp.Net MVC 3 和 Jquery

> ID：10379830
> 
> 赞同：0
> 
> 时间：2012-04-30T07:13:51.113
> 
> 标签：asp.net-mvc-3, jquery, json

**问题：** *controller.cs 中复选框值显示为空。*但根据从 jqgrid 中选择的行，它工作得很好。但是，当我选择任何行并更新所有字段时，它将使用修改后的值传递给控制器​​，但只有 IsEnabled 字段为空。

**我有名为 IsEnabled 的数据库字段，它具有 Bit 数据类型。**

我在 .cshtml 中编写了以下代码

```
<input type="checkbox" value='Yes' offval='No' name="IsEnabled" /> 
```

我正在使用以下代码来绑定数据库中的复选框值

```
grid.jqGrid('GridToForm', gsr, "#order"); 
```

我有保存按钮。当我单击保存时，将执行以下代码

```
$("#btnSave").click(function () {
                var data = JSON.stringify($('#order').serializeObject());
                var href = '@Url.Action("SaveData", "Users")';
                var ajaxResponse = $.ajax({
                    type: "post",
                    url: href,
                    dataType: 'json',
                    data: data,
                    contentType: "application/json; charset=utf-8",
                    success: function (result) {
                        if (result.Success == true) {
                            alert("Success");
                        }
                        else {
                            alert("Error: " + result.Message);
                        }
                    }
                }); 
```

以下用 Controller.cs 编写的代码

（**在 FormValue 中，它将正确显示除 IsEnabled 之外的所有更新值，它将始终显示为 null。**）

```
[AcceptVerbs(HttpVerbs.Post)]
        public ActionResult SaveData(User FormValue)
        {
            string message = "";
            return Content(message);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T05:57:10.930

您必须删除此代码（如果使用 jquery ajax）

`[AcceptVerbs(HttpVerbs.Post)]`

当您使用回发并发送类时，请使用上面的代码

使用 jQuery 发送类使用此代码：试试看：

```
$.ajax({
                type: "post",
                url: href,
                dataType: 'json',
                data: SON.stringify({ FormValue : { ID : $('#controlIdName').val() , Name : $('#ControlName').val() } }),
                contentType: "application/json; charset=utf-8",
                success: function (result) {
                    if (result.Success == true) {
                        alert("Success");
                    }
                    else {
                        alert("Error: " + result.Message);
                    }
                } 
```

# jquery - 在没有画布或画布的html中保存带有表单元素的div？

> ID：10379834
> 
> 赞同：1
> 
> 时间：2012-04-30T07:14:24.157
> 
> 标签：jquery, html

我试图用画布捕获 div，它工作正常，但它不保存表单元素，我有像漫画语音气泡一样的图像，并且我在其中放置了 textarea，用户在其中键入他/她的文本，当用户点击 Save 按钮，它应该将 Comic-speech 气泡与插入其中的文本一起保存为**IMAGE**。那么有人可以帮我解决这个问题吗？

# c# - 未找到 C# Sharepoint 2010 警报列表

> ID：10379835
> 
> 赞同：1
> 
> 时间：2012-04-30T07:14:32.020
> 
> 标签：c#, .net, sharepoint

我正在尝试编写一个应用程序来为所有在站点集合中已经拥有至少一个警报的人设置警报。我知道如何为所有这些用户获取用户对象，但是当我尝试为每个用户设置警报时，就会出现问题。对于某些用户来说，会出现一个 SPException，表示该列表不存在。我查看了 user.Alerts 属性，并且有一个 Web 字段，其中站点集合名称位于不工作的用户处。它仅适用于拥有正确网络以访问列表并设置警报的用户。有谁知道一种解决方法，以便我可以为我想要的所有用户设置警报？这是我用来设置警报的代码：

```
SPAlert alert = user.Alerts.Add();
alert.AlertType = SPAlertType.List;
alert.EventType = SPEventType.Add;
Console.WriteLine(alertWeb.Url+" "+ alertingListName);
alert.List = alertWeb.Lists.TryGetList(alertingListName);
alert.AlertFrequency = SPAlertFrequency.Immediate;
alert.AlwaysNotify = false;
alert.Update(false); 
```

提前感谢您帮助我

我现在已经解决了自己的问题。我在这里发布解决方案，以便有相同问题的人可以找到它。问题是在用户对象属性中 user.alerts.web 是错误的网络。我通过不是从 web.alerts 集合而是从 web.allusers 集合获取用户对象来解决这个问题，以便正确的网络位于属性中。

# map - Printing unique or distinct values

> ID：10379836
> 
> 赞同：0
> 
> 时间：2012-04-30T07:14:38.443
> 
> 标签：map, hadoop, mapreduce, reduce

I am new to map reduce and writing a reduce function to print the values in a Iterable. Below is my print function:

```
public class Reduce extends Reducer<Text, Text, Text, Text> {
  protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {

      StringBuilder builder = new StringBuilder();
        for (Text value : values) {
        builder.append("<");
          builder.append(value);
          builder.append(",");
          builder.append(key);
          builder.append(">");
          builder.append("\n");
          context.write(new Text(builder.substring(0, builder.length())), key);
        }  
  }

} 
```

Output is:

![Output](../Images/f82a191cf9f86c0c1ad8d94c52fa0f37.png)

Issue is that the values are getting repeated i.e. <2,1> is repeated 2 times... My requirement is after <2,1> I should directly get <3,1> and then <4,1>. In short all my should be unique.

My final output should be:

```
<2,1>
<3,1>
<4,1>
<3,2>
<4,2>
<1,2>
<4,3> 
```

Please suggest.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:21:20.280

```
 StringBuilder builder ;
        for (Text value : values) 
        {
          builder = new StringBuilder();
          builder.append("<");
          builder.append(value);
          builder.append(",");
          builder.append(key);
          builder.append(">");
          builder.append("\n");
          context.write(new Text(builder.substring(0, builder.length())), key);
        } 
```

Try this.

# python - mongodb 操作失败...

> ID：10379852
> 
> 赞同：0
> 
> 时间：2012-04-30T07:15:52.317
> 
> 标签：python, mongodb

当我尝试使用 Python 中的新聚合框架时，我收到了下一条消息：

```
OperationFailure: command SON([('aggregate', 'call_log'), ('pipeline', [{'$project': {u'date': '1', u'status': '1', u'number': '1', u'description': '1'}}])]) failed: exception: field path references must be prefixed with a '$' ("1" 
```

蟒蛇的代码：

```
db.command('aggregate', 'test_collection', pipe_line=[{'$project':{u'date': '1', u'status': '1', u'number': '1', u'description': '1'}}]) 
```

这个消息是什么意思？错误在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:31:21.183

假设，你应该写 not `'1'`, but `1`。`'1'`（带引号）被解释为字符串，这会导致错误。

# twitter - Twitter 登录页面始终显示

> ID：10379853
> 
> 赞同：0
> 
> 时间：2012-04-30T07:15:57.370
> 
> 标签：twitter, oauth, dotnetopenauth

我已经在我的网站上使用 DotNetOpenAuth lib 使用 asp.net mvc 3 实现了 Sign in with Twitter。

我的问题是，每次用户单击使用 twitter 登录时，它都会将他重定向到 twitter 页面（即使他已经登录到 twitter）。

我看到像 www.pinterest.com 这样的网站以某种方式避免了这种情况。

如果用户已经登录 Twitter，如何避免重定向到 Twitter 登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:18:46.847

这称为[使用 Twitter 登录](https://dev.twitter.com/docs/auth/sign-twitter)。将用户重定向到`https://api.twitter.com/oauth/authenticate?oauth_token=xyz`而不是`https://api.twitter.com/oauth/authorize?oauth_token=xyz`. 如果用户与 twitter.com 有活动会话并且之前已授权应用程序，他们将被静默重定向到回调 url。

# extjs - stbuild 未找到

> ID：10379857
> 
> 赞同：4
> 
> 时间：2012-04-30T07:16:27.290
> 
> 标签：extjs, sencha-touch-2

我正在尝试使用 sencha touch 为 ios 构建本机应用程序，但每次我使用打包命令时，它都会给我错误，即 stbuild 不是外部和内部命令。我在这个问题上进行了很多搜索，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:15:22.490

我有同样的问题。
但是当我运行 SenchaSDKTools/stbuild.pkg 时它起作用了。

如下所示：

> /Applications/SenchaSDKTools-2.0.0-Beta/stbuild.pkg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:41:39.850

你安装了“ [`Sencha SDK Tools`](http://www.sencha.com/products/sdk-tools/)”吗？如果没有，那么你应该安装它。

您还可以使用该`sencha`命令对应用程序进行本机打包。

喜欢，

```
sencha package generate <configTemplate.json> 
```

*   [Sencha Touch 2 Android 原生打包](http://docs.sencha.com/touch/2-0/#!/guide/native_android)
*   [Sencha Touch 2 iOS 原生打包](http://docs.sencha.com/touch/2-0/#!/guide/native_packaging)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T01:48:36.630

如果您***已经***安装了 Sencha SDK Tools，可执行文件 stbuild.exe 文件将被安装到 windows 系统根文件夹（例如 C:\Windows）中，同时一个名为 stbuild 的子目录将安装在同一文件夹中。检查它是否存在。如果不是，可以从[http://dl.dropbox.com/u/8793605/stbuild.msi](http://dl.dropbox.com/u/8793605/stbuild.msi)单独下载。

如果 SenchaTouch 安装程序出错，就会发生这种情况。在我的情况下，安装程序不会在我的 Windows 7 系统上运行，所以我从 Windows XP 安装中手动复制了它的效果。

**注意**：从我的研究看来，从 2.1 版工具开始，stbuild 将安装到 sencha 工具位置，不再安装到 windows 系统目录中（它一直应该是这样！-我不知道是什么他们在想）。

# iphone - 找不到实例方法'-jsonValue'（返回类型默认为'id'）

> ID：10379859
> 
> 赞同：1
> 
> 时间：2012-04-30T07:16:49.180
> 
> 标签：iphone, objective-c, cocoa-touch

我在以下陈述中遇到问题。

```
 NSArray *feedsData = [strFeedsResponse JSONValue]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:37:10.310

我认为`strFeedsResponse`是`NSString`. 没有像`JSONValue`中这样的方法`NSString`。您需要 NSString**类别**并在那里添加`JSONValue`方法。

您可以使用例如**SBJson**库[https://github.com/stig/json-framework/](https://github.com/stig/json-framework/)，其中包含 NSString+SBJson.h 标头，其中添加了`JSONValue`NSString 的方法。

此标头必须在要使用该`JSONValue`方法的源文件中导入：

```
#import NSString+SBJSON.h 
```

有关类别的更多信息，例如：http: [//macdevelopertips.com/objective-c/objective-c-categories.html](http://macdevelopertips.com/objective-c/objective-c-categories.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:41:10.227

正在发生两件事之一：

1.  strFeedsResponse 实际上不是 NSString 的实例。可能它为 null 或者它已使用不正确的值启动。您可以在代码中添加断点以检查存储在 strFeedsResponse 中的值，然后再对其调用 JSONValue。

2.  您尚未将您正在使用的 JSON 框架正确导入到您的课程中。您需要将 JSON 标头添加到您的类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T15:49:59.900

希望这有助于未来的搜索者解决这个错误......

错误的原因是当前版本的 SBJson 似乎不包含早期发布者提到的 NSString 类别“NSString+SBJSON.h”。因此，您可以轻松编写自己的代码，或者直接使用 SBJsonParser 类（“address”只是一个 NSString，其中包含“24 Elm Street, Yourtown, New Mexico”）：

```
NSString     *esc_addr       = [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString     *req            = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];
NSString     *response       = [NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL];
SBJsonParser *parser         = [[SBJsonParser alloc] init];
NSDictionary *googleResponse = [parser objectWithString:response]; 
```

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:22:13.980

```
 NSArray *feedsData = [[strFeedsResponse JSONValue] mutableCopy]; 
```

使用这条线，它会对你有用..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T07:36:14.240

这个错误一般是在找不到方法的时候出现的。这里是因为没有找到**JSONValue**函数。
请确保在调用此函数的位置包含 json 头文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T07:45:18.517

如果您使用的是网络服务，请提供相应的 URL。

试试这个方法...

```
NSArray* latestentry = (NSDictionary*)[responseString JSONValue]; 
```

# java - Java字符IO，专门写入文件

> ID：10379860
> 
> 赞同：0
> 
> 时间：2012-04-30T07:16:56.603
> 
> 标签：java, file, input

所以我有这样一个读者作家：

```
File f2 = new File("thisfileexists.txt");
BufferedReaeder reader = new BufferedReader(new InputStreamReader(System.in), 10000 * 1024);
PrintWriter fos = new Printwriter(new FileOutputStream(f2)); 
```

以及稍后在程序中的阅读循环

```
List<Integer> compressed = new ArrayList<Integer>();
String l;
while((l = reader.readLine()) != null){
    compressed.add(Integer.parseInt(l)); //assume only valid integer values
} 
```

以后我去的时候

```
String result = "";
for(int k : compressed){
    String entry;
    //affect entry here

    fos.write(entry);
    result += entry;
} 
```

循环完成执行后，fos 正在写入的文件为空。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:19:02.407

你关闭你的`FileOutputStream`？

```
String result = "";
for(int k : compressed){
  String entry;
  //affect entry here

  fos.write(entry);
  result += entry;
}

fos.close();       // close the file descriptor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:19:21.683

完成后关闭文件吗？没有

```
fos.close(); 
```

文件的结尾可能会丢失。如果文件足够小，你得到的只是一个空文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:20:51.173

写入所有数据后是否关闭了流？:)

# ios - 使用 plist 或其他可能一次更改所有主题的方式更改背景主题

> ID：10379861
> 
> 赞同：1
> 
> 时间：2012-04-30T07:16:56.850
> 
> 标签：ios, xcode, themes

我想知道有什么方法可以一次更改所有 xib 的背景。我想在更改主题名称时一次性更改 xib 的所有背景。例如：如果我选择“theam1”，它会立即更改所有视图。然后，如果我更改为“theme2”，它会再次进行更改。

就像在android中一样，有“style.xml”可以一次性做出改变。我可以在xcode中获得这种类型的功能吗？

我知道我们可以将其更改为每次都在 viewwillappear 中设置或在 appdelegate 文件中设置，但我会通过 plist 或其他方式一次性更改所有视图吗？请给我建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:25:29.953

如果所有视图都具有相同的背景，则相对简单。按照应用程序委托上的这些步骤从 plist 或您想要使用哪个主题的任何其他方式读取图像文件名。然后在 mainwindow.xib 文件中设置图像。并通过将颜色设置为 clearcolor 使整个应用程序中的所有视图透明。这样窗口的背景将在所有视图控制器的视图后面可见。希望这可以帮助。

如果您想从 xml 或 plist 中读取更多自定义值，并根据 viewDidLoad 方法中的视图控制器分配图像。

# objective-c - NSError 到 OSStatus

> ID：10379865
> 
> 赞同：4
> 
> 时间：2012-04-30T07:17:16.840
> 
> 标签：objective-c, macos, nserror

是否可以从 NSError 制作 OSStatus 变量？例如，我得到代码为 513(OSStatus 等效 = -5000) 的 NSError，但要在我的应用程序中处理它，我需要将 NSError(513) 转换为 OSStatus(-5000)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T21:36:19.583

NSError 代码是特定于域的，您可以使用自己的 @"Kira" 域和自定义状态代码 1337 轻松创建 NSError，它不会映射到任何 OSStatus。

某些 NSError 代码和 OSStatus 值之间的等价纯属巧合，无论如何，您不应依赖 OSStatus 的实际数值，而应使用定义的常量/枚举。

# eventbrite - Eventbrite 使用 API 代码获取用户数据

> ID：10379866
> 
> 赞同：1
> 
> 时间：2012-04-30T07:17:30.037
> 
> 标签：eventbrite

我已经下载了 PHP 的 Eventbrite API 代码。我已经使用 API 代码成功地与 Eventbrite 建立了连接，但我还不能检索用户数据。

所以请帮助我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:21:51.053

确保您已使用用户的[身份验证令牌](http://developer.eventbrite.com/doc/authentication)初始化 API 客户端，以便访问私有用户数据。

[user_list_events() 方法](http://developer.eventbrite.com/doc/users/user_list_events/)应该提供来自经过身份验证的用户帐户的所有事件内容。

# javascript - 如何检测 Web 应用程序是否在应用程序模式或 safari 模式下运行

> ID：10379867
> 
> 赞同：1
> 
> 时间：2012-04-30T07:17:30.333
> 
> 标签：javascript, ipad, html

如何检查网页是否在带有地址栏的 Safari 模式下或在 iPad 中没有地址栏的应用模式下运行

```
 <script>
              if (window.navigator.standalone) {

                  <link type="text/css" href="ipad.css" rel="stylesheet" />

              }

              els{

                  <link type="text/css" href="safari.css" rel="stylesheet" />

              }

              </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:29:30.783

在应用程序模式下，我假设您的意思是从主屏幕启动时：

```
if (window.navigator.standalone) {

    /* Launched from home screen code */

} 
```

这适用于所有 iOS 设备 ASAIK。

# android - Android - 折线编码算法？

> ID：10379870
> 
> 赞同：11
> 
> 时间：2012-04-30T07:17:44.560
> 
> 标签：android, google-maps

在我的 android 项目中，我有 GeoPoints 列表。我有一个[算法来解码](http://jeffreysambells.com/posts/2010/05/27/decoding-polylines-from-google-maps-direction-api-with-java/)编码的折线字符串。谁能帮我将地理点列表编码为折线字符串，以便将其保存在共享首选项中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-16T14:01:35.363

您应该包含[适用于 Android 的新 googlemaps utils 库](http://googlemaps.github.io/android-maps-utils/)，然后使用[PolyUtil](http://googlemaps.github.io/android-maps-utils/javadoc/com/google/maps/android/PolyUtil.html)：

```
PolyUtil.encode(latLngPath)
PolyUtil.decode(encodedPath) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-17T00:00:18.313

对于 Java，官方的[Google Maps Services for Java](https://github.com/googlemaps/google-maps-services-java)库也有一个实用程序。

```
PolylineEncoding.decode(String);
PolylineEncoding.encode(List<LatLng>); // Note that this is not the Android LatLng 
```

代码在[这里](https://github.com/googlemaps/google-maps-services-java/blob/master/src/main/java/com/google/maps/internal/PolylineEncoding.java)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-10T04:48:44.200

来自谷歌：

[http://groups.google.com/group/google-maps-api/browse_thread/thread/c85319eb7fd930dc](http://groups.google.com/group/google-maps-api/browse_thread/thread/c85319eb7fd930dc)

看起来像一个 Java Polyline impl。进行中。

来自 Github：

[https://github.com/markrambow/JavaPolylineEncoder](https://github.com/markrambow/JavaPolylineEncoder)

[https://github.com/petpen/JavaPolylineEncoder2](https://github.com/petpen/JavaPolylineEncoder2)

规格在这里：

[https://developers.google.com/maps/documentation/utilities/polylinealgorithm](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)

# computer-science - 难以理解大 O 的常数部分

> ID：10379875
> 
> 赞同：0
> 
> 时间：2012-04-30T07:18:04.607
> 
> 标签：computer-science, big-o

有人可以向我解释大 O 符号的常量部分的目的吗？

我将尝试在理解方面解释我现在所处的位置：

`f(x) = x^2 + 1`基本上你有一个功能，例如`g(x) = x^3`

所以，`f(x)`是`O( g(x) )`，因为对于 , 的某个值`x`，`k`对于每个`x > k`, `f(x) <= **C**|g(x)|`。

所以对于这个方程，`k = 2`。

我可能已经错了，如果是，请纠正我。

**这看起来很直观，但我对常数值C**有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:43:15.913

以下行措辞不佳：

> f(x) 是 O( g(x) )，因为对于 x 的某个值 k，对于每个 x > k ，f(x) <= C|g(x)|

以下更准确：

> f(x) 是 O( g(x) )，因为存在一个值 k 和一个值 C，使得对于任何大于 k 的 x 值：f(x) <= C|g(x)|。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:24:07.710

这只是一些常数。要证明 f(x) 是 O(g(x))，您必须选择一些特定的常数 C 和 k 并证明它们满足该条件。什么这么混乱？

# ruby-on-rails - 如何修复由咖啡脚本/资产管道产生的这个奇怪的 LoadError 错误？

> ID：10379882
> 
> 赞同：4
> 
> 时间：2012-04-30T07:18:31.953
> 
> 标签：ruby-on-rails, heroku, coffeescript, asset-pipeline

我正在使用 Rails 3 资产管道。我遇到了一种情况，我需要以特定方式订购我的 Javascript 文件，因此我将它们全部显式添加到 application.js 中，如下所示：

```
//= require admin
//= require application
//= require users
...
//= require_self
... 
```

它在本地工作，但是当我推送到 Heroku 时，我遇到了一个疯狂的 javascript (coffeescript) 错误：

```
Uncaught Error: LoadError: no such file to load -- ["ok", "(function() {\n\n ... 
```

这将继续我包含的第一个咖啡脚本文件的全部内容。也就是说，错误信息中包含了一堆javascript代码。就像它试图包含一个名称是一堆代码的文件一样。

我该如何解决这个错误，或者有更好的方法来手动指定我的 javascript 包含的顺序吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T23:41:23.243

这不是 Heroku 的问题，而是资产编译 Rails 范围内的问题

我修复了将 ExecJS 恢复到 1.3.0 版的问题，似乎上周三发布的[1.3.1](https://github.com/sstephenson/execjs/commit/59fb97075ab4d6c02c461a147a001c50428c8fed)的更改改变了它尝试编译 Javascript 的方式

# c++ - 如何遍历旋转的网格

> ID：10379883
> 
> 赞同：0
> 
> 时间：2012-04-30T07:18:35.077
> 
> 标签：c++, grid

我希望能够以设定的步长遍历网格元素。这个问题的有趣之处在于网格将被旋转。我开发了一种算法来做到这一点，并且在某些情况下它是成功的。下图说明了问题：

![在此处输入图像描述](../Images/15c7246fabadc3c637a313477764213b.png)

问题的条件是，将提供一个网格间距，它是网格长度和宽度的一个因素（作为旁注，网格可以是矩形的）。算法必须遍历网格并打印出它的位置。这是一些代码及其工作示例：

```
int main() {
vector< vector<double> > bound;
vector<double> point;
point.push_back(0);
point.push_back(4);

bound.push_back(point);
point[0] = 6; point[1] = 10;
bound.push_back(point);
point[0] = 4; point[1] = 0;
bound.push_back(point);
point[0] = 10; point[1] = 6;
bound.push_back(point);

double d = 0.5;
double x, y;
int countx = 0, county = 0;
for (double i = bound[0][0]; i < bound[2][0]; i+=d) {
    //std::cout << "I: " << i << std::endl;
    for (double j = bound[0][1]; j < bound[1][1]; j+=d) {
        //std::cout << "J: " << j << std::endl;
        x = i+d+(double)county*d;
        y = j-(double)countx*d;
        ++county;
        std::cout << "i, j, x and y: " << i << "\t" << j << "\t" << x << "\t" << y << std::endl;
    }
    std::cout << "new Row--------------------\n";
    ++countx;
    county = 0;
}   
} 
```

上面的代码可以正常工作并正确打印网格元素，即：

```
x and y: 4, 0.5
x and y: 4.5, 1
etc. 
```

但是，当尝试带边界的矩形时：

```
[(0.5, 6), (3, 8.5), (5.5, 1), (8, 3.5)] 
```

步长 (d) 为 1

它迭代到矩形边界之外。我可以看到为什么会发生这种情况，for 循环中的迭代器条件不会包含它，因为额外的 +d。

我的问题是，有没有更好的方法来解决这个问题，我将如何解决？

有谁知道这是否已经实现过并且有一些源代码？

为帮助喝彩。

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:07:12.830

我最终采用的方法是通过毕达哥拉斯规则在两个边上计算矩形的长度和宽度。然后我在一个虚拟矩形上制作了一个网格，该矩形与其原点的底角对齐。然后通过使用预先开发的矩阵旋转和平移库，我通过将它们平移到左下角的位移并将它们旋转到矩形的计算角度来单独转换这些点。

这类似于上述解决方案，但使用了完整的变换矩阵。答案最终比我想象的要简单。

谢谢您的帮助。

# liferay - Liferay 消息总线

> ID：10379885
> 
> 赞同：-3
> 
> 时间：2012-04-30T07:18:52.407
> 
> 标签：liferay, messaging

我想创建一个自定义消息侦听器，它也发回响应，我正在实现 MessageListener ，但它只有 void 类型方法 **public void receive(Message arg0) throws MessageListenerException** 我试图做 arg0.setResponse("Test");

但它导致了一个例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:17:51.550

MessageListener 仅用于侦听消息而不响应。对于响应，您可以再次使用`MessageProducer`。

# spring - 读取“属性”文件

> ID：10379887
> 
> 赞同：0
> 
> 时间：2012-04-30T07:19:04.260
> 
> 标签：spring, google-app-engine, rest, resteasy

我有一个使用 Resteasy（在 Appengine 之上运行）的 Rest 服务，具有以下伪代码：

```
@Path("/service")
public class MyService {
  @GET
  @Path("/start")
  public Response startService() {
     // Need to read properties file here.
     // like: servletContext.getResourceAsStream("/WEB-INF/config.properties")
  }
} 
```

但是很明显，这里无法访问 servlet 上下文。

和像这样的代码：

```
 InputStream inputStream = this.getClass().getClassLoader()
                .getResourceAsStream("/WEB-INF/config.properties"); 
```

无法在 Appengine 环境中执行。

**编辑：**

我试过用 Spring 来做，比如：

**appContext.xml**

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" value="/WEB-INF/auth.properties"/>
</bean> 
```

然后，把它放在实际的类字段上：

```
@Path("/service")
public MyService{
    @Autowired
    @Value("${myservice.userid}")
    private String username;
    @Autowired
    @Value("${myservice.passwd}")
    private String password;
 // Code omitted
} 
```

但是，`MyService`抱怨的部分代码因为`username`and`password`没有被“注入”，我的意思是它是空的，尽管它在`auth.properties`文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:43:27.897

如果您将文件放入`/WEB-INF/classes/`（重要的是，位于类路径中），这应该可以工作，将 config.properties 指定为顶级文件。

```
this.getClass().getClassLoader().getResourceAsStream("/config.properties"); 
```

看到这个类似的问题：[如何在 Google App Engine 中加载属性文件？](https://stackoverflow.com/questions/1362545/how-to-load-properties-file-in-google-app-engine)

**编辑**：现在您已编辑，我将回复并回答与 Spring 相关的问题。因此，将 auth.properties 放入 /WEB-INF/classes/ ，然后指定类路径，如下所示。

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:auth.properties"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:46:36.813

在 RESTEasy 中，您可以通过 @Context 注释轻松注入 Servlet 上下文：http: [//docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html_single/index.html#_Context](http://docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html_single/index.html#_Context)

可以在此处找到示例：[Rest easy 和 init params - 如何访问？](https://stackoverflow.com/questions/5434667/rest-easy-and-init-params-how-to-access)

# kannel - 使用 Kannel 的 Motorola Razer v3i 调制解调器检测错误

> ID：10379888
> 
> 赞同：1
> 
> 时间：2012-04-30T07:19:05.137
> 
> 标签：kannel

请帮助我运行承载箱时出现此错误

```
[root@localhost sbin]# ./bearerbox -v 1 /usr/local/smskannel.conf
2012-04-30 11:56:28 [13417] [0] INFO: Debug_lvl = 1, log_file = <none>, log_lvl = 0
2012-04-30 11:56:28 [13417] [0] WARNING: DLR: using default 'internal' for storage type.
2012-04-30 11:56:28 [13417] [0] INFO: DLR using storage type: internal
2012-04-30 11:56:28 [13417] [0] INFO: HTTP: Opening server at port 13003.
2012-04-30 11:56:28 [13417] [0] INFO: BOXC: 'smsbox-max-pending' not set, using default (100).
2012-04-30 11:56:28 [13417] [0] INFO: Set SMS resend frequency to 60 seconds.
2012-04-30 11:56:28 [13417] [0] INFO: SMS resend retry set to unlimited.
2012-04-30 11:56:28 [13417] [0] INFO: DLR rerouting for smsc id <FAKE> disabled.
2012-04-30 11:56:28 [13417] [0] INFO: DLR rerouting for smsc id <(null)> disabled.
2012-04-30 11:56:28 [13417] [0] INFO: AT2[/dev/ttyACM0]: configuration doesn't show modemtype. will autodetect
2012-04-30 11:56:28 [13417] [0] INFO: ----------------------------------------
2012-04-30 11:56:28 [13417] [0] INFO: Kannel bearerbox II version 1.4.3 starting
2012-04-30 11:56:28 [13417] [7] INFO: AT2[/dev/ttyACM0]: opening device
2012-04-30 11:56:28 [13417] [0] INFO: MAIN: Start-up done, entering mainloop
2012-04-30 11:56:31 [13417] [7] INFO: AT2[/dev/ttyACM0]: speed set to 115200
2012-04-30 11:56:33 [13417] [7] INFO: AT2[/dev/ttyACM0]: Closing device
2012-04-30 11:56:33 [13417] [7] INFO: AT2[/dev/ttyACM0]: detect speed is 115200
2012-04-30 11:56:33 [13417] [7] INFO: AT2[/dev/ttyACM0]: opening device
2012-04-30 11:56:34 [13417] [7] INFO: AT2[/dev/ttyACM0]: speed set to 115200
2012-04-30 11:56:36 [13417] [7] PANIC: AT2[/dev/ttyACM0]: Cannot detect modem and generic not found
2012-04-30 11:56:36 [13417] [7] PANIC: ./bearerbox(gw_panic+0xc2) [0x80cc0e2]
2012-04-30 11:56:36 [13417] [7] PANIC: ./bearerbox [0x806ca62]
2012-04-30 11:56:36 [13417] [7] PANIC: ./bearerbox [0x806d5f1]
2012-04-30 11:56:36 [13417] [7] PANIC: ./bearerbox [0x80c2971]
2012-04-30 11:56:36 [13417] [7] PANIC: /lib/libpthread.so.0 [0xb9649b]
2012-04-30 11:56:36 [13417] [7] PANIC: /lib/libc.so.6(clone+0x5e) [0xaed42e] 
```

我正在使用带有 Redhat 的 USB 电缆使用 Motorola Razer v3i。该设备也在 /dev 中被检测为 ttyACM0 这是我的 smskannel.conf

* * *

```
group = core
admin-port = 13003
smsbox-port = 13004
admin-password = bar
#status-password = foo
#admin-deny-ip = ""
#admin-allow-ip = ""
#log-file = "/tmp/kannel.log"
#log-level = 0
box-deny-ip = "*.*.*.*"
box-allow-ip = "127.0.0.1"
#unified-prefix = "+923,0092,0;+,00"
#access-log = "/tmp/access.log"
#store-file = "kannel.store"
#ssl-server-cert-file = "cert.pem"
#ssl-server-key-file = "key.pem"
#ssl-certkey-file = "mycertandprivkeyfile.pem"

#---------------------------------------------
# SMSC CONNECTIONS

group = smsc
smsc = fake
smsc-id = FAKE
port = 10000
connect-allow-ip = 127.0.0.1

#this is for Motorola Razer V3i

group = smsc
smsc = at
modemtype = auto
device=/dev/ttyACM0
my-number = 00923478847037
sms-center= 00923455000010
connect-allow-ip = 127.0.0.1
log-level = 0

#-----------------Modem Group------------
group = modems
id = Motorola
name = "Motorola"
init-string = "AT+C=1"
need-sleep = true
enable-mms = true
speed = 115200
message-storage = "SM" 

#---------------------------------------------
# SMSBOX SETUP
#

group = smsbox
bearerbox-host = 127.0.0.1
sendsms-port = 13013
global-sender = 13013
#sendsms-chars = "0123456789 +-"
#log-file = "/tmp/smsbox.log"
#log-level = 0
#access-log = "/tmp/access.log"

#---------------------------------------------
# SEND-SMS USERS

group = sendsms-user
username = tester
password = foobar
#user-deny-ip = ""
#user-allow-ip = ""

#---------------------------------------------
# SERVICES

group = sms-service
keyword = nop
text = "You asked nothing and I did it!"

group = sms-service
keyword = default
text = "No service specified" 
```

* * *

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:04:42.677

试试这个初始化字符串：

```
init-string = "AT+CMEE=2;+CNMI=3,1,0,0,0". 
```

它适用于我的 Motorola Razr2 v8：我能够发送和接收消息。[这个人](http://old.nabble.com/Motorola-Razr-V3-SMS-Receive-td10272601.html)建议了我提供的解决方案，它适用于他的 Razr v3。

有关 AT 命令和解释的完整列表，我发现[此参考](http://www.scribd.com/doc/53163558/AT-Commands-Reference-for-Motorola-Handsets)非常有用。

# php - 站点在服务器上工作，但不在 XAMPP 中 - （注意：会话已经开始，注意：未定义的变量）

> ID：10379891
> 
> 赞同：1
> 
> 时间：2012-04-30T07:19:16.023
> 
> 标签：php, xampp

我正在修改我发现的一个脚本，该脚本检查它是否已安装并且

- 如果是，则显示登录屏幕

- 如果不是，它会显示安装屏幕。

在线安装但在 XAMPP 中无法正常工作

在 XAMPP 中，它安装正常，但是当进入管理员根目录时，会显示安装屏幕，如下所示。

> 注意：会话已经开始 - 忽略第 2 行 C:\xampp\htdocs\testa\admin\admin_config.php 中的 session_start()
> 
> 注意：未定义变量：第 17 行 C:\xampp\htdocs\testa\main_admin.php 中的 dbhost
> 
> 注意：未定义变量：第 17 行 C:\xampp\htdocs\testa\main_admin.php 中的 dbuname
> 
> 注意：未定义的变量：第 17 行 C:\xampp\htdocs\testa\main_admin.php 中的 dbpass
> 
> 注意：未定义变量：第 18 行 C:\xampp\htdocs\testa\main_admin.php 中的 dbname

我不明白为什么它可以在 Web 服务器上运行而不是在 XAMPP 中运行......你们有什么想法吗？？？

这是相关文件中的代码

配置文件

```
<?php
$dbhost="localhost"; //It is usually "localhost"

$dbuname="user";     //Database Username

$dbpass="pass";          //Database Password

$dbname="test";     //Database Name
?> 
```

管理员/index.php

```
 <?php
    session_start();

header("Content-Type: text/html; charset=utf-8");

if (isset($_REQUEST["uname"]))
    {
    $uname=$_REQUEST["uname"];
    $pass=$_REQUEST["pass"];
    include('../config.php');
    $db=mysql_connect($dbhost, $dbuname, $dbpass);
    mysql_select_db($dbname, $db);
    $check_security=mysql_query("select * from settings where admin_id='$uname' and password='$pass'", $db);

    if ($rec=mysql_fetch_row($check_security))
        {
        header('Location: index.php');
        $_SESSION['testa']="testa";
        }
    else
        header('Location: index.php');
    include('../main.php');
    }
else
    {
    include('admin_config.php');

    if (!isset($_SESSION['testa']))
        {
        echo ('<script language="JavaScript"> 
        <!-- 
        function CheckForm(formID) { 
        if (formID.uname.value == "") { alert("' . _ADMIN_ENTER_USERNAME . '"); 
        formID.uname.focus(); return false; } 
        if (formID.pass.value == "") { alert("' . _ADMIN_ENTER_PASSWORD . '"); 
        formID.pass.focus(); return false; }        
        return true; 
        } 
        //--> 
        </script> ');

        echo ('<br><br><br><br><br><br><br><br><br>
<form method="POST" action="index.php" onSubmit="return CheckForm(this);" autocomplete="off">
    <div align="center">
        <table width="250" border="1"  height="118" dir="' . $rtl_input . '"><tr>
            <td height="22" colspan="2">

    <p align="center"><font face="Tahoma" color="#FFFFFF"><span style="font-size: 9pt"><b>' . _ADMIN_SYSTEM_ALERT . '</b></span></font></td></tr><tr>
                <td height="31">

    <p align="' . $align . '"><font face="Tahoma" color="#FFFFFF"><span style="font-size: 9pt">' . _ADMIN_USERNAME . ':</span></font></td>
                <td height="31">

    <p align="left"><input type="text" name="uname" dir="ltr" size="20"></td></tr><tr>
                <td height="31">
                <p align="' . $align . '"><font face="Tahoma" color="#FFFFFF">
                <span style="font-size: 9pt">' . _ADMIN_PASSWORD . ':</span></font>
                </td><td height="31">
                <p align="left">
    <input type="password" name="pass" dir="ltr" size="20"></td></tr><tr>
                <td colspan="2" valign="bottom" height="38">
    <p align="center"><font face="Tahoma"><span style="font-size: 9pt"><input type="submit" value="' . _ADMIN_ENTER . '" name="B1"></span></font></p>
    </td></tr></table>
    </div>
</form>');
        }
    else
        {
        echo ('blahblahblah.................blah');
        }
    }
?>

</body>

</html> 
```

main_admin.php

```
<?php

include('config.php');

include('jdf.php');

$db=mysql_connect($dbhost, $dbuname, $dbpass);
mysql_select_db($dbname, $db);
$result=mysql_query("select * from settings where id = '1'", $db);

if (!$result)
    {
    include('language/farsi.php');

    echo ('<html dir="rtl">');

    include('header_admin.php');

    echo ('<SCRIPT LANGUAGE=JAVASCRIPT> 
    function dosubmit() { 
    document.forms[0].action = "users.php" 
    document.forms[0].method = "POST" 
    document.forms[0].submit() 
}</SCRIPT><script language="JavaScript"> 
        <!-- 
        function CheckForm(formID) { 
        if (formID.admin_id.value == "") { alert("' . _ADMIN_INSTALL_ENTER_USERNAME . '"); 
        formID.admin_id.focus(); return false; } 
        if (formID.password.value == "") { alert("' . _ADMIN_INSTALL_ENTER_PASSWORD . '"); 
        formID.password.focus(); return false; } 
        if (formID.password_confirm.value == "") { alert("' . _ADMIN_INSTALL_ADD_USER_ENTER_CONFIRM_PASSWORD . '"); 
        formID.password_confirm.focus(); return false; } 
        if (formID.password_confirm.value !== formID.password.value) { alert("' . _ADMIN_INSTALL_ADD_USER_PASSWORD_AND_CONFIRM_NOT_MATCH . '");
        formID.password.focus(); return false; } 
        return true; 
        } 
        //--> 
        </script> ');
    ///////////////////////

    echo ('<br /><br /><br /><br /><form method="POST" action="../install/" onSubmit="return CheckForm(this);"><div align="center">
                <table border="1" width="600" dir="rtl">
        ******************************************************
************************************blahblablah*************************************
    </table>
</div>
            </form>
            ');

    die();
    //////////////End form

    }
else
    {
    $rec=mysql_fetch_row($result);
    $system_language=$rec[3];
    include('language/' . $rec[3] . '.php');

    if ($rec[4] == 1)
        echo ('<html dir="rtl">');
    else
        echo ('<html>');
    $result_rtl=mysql_query("select * from settings where id = '1'", $db);
    $rtl_array=mysql_fetch_row($result_rtl);

    if ($rtl_array[4] == 1)
        {
        $system_align=$align="right";
        $system_rtl_input=$rtl_input="rtl";
        }
    else
        {
        $system_align=$align="left";
        $system_rtl_input=$rtl_input="ltr";
        }
    include('header_admin.php');
    }
//////////////bg
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-30T07:24:26.537

啊，知道了，您必须使用与`database name`服务器相同的表单。

您必须在其中创建一个新表`phpmyadmin`并将所有表从服务器数据库复制到 xampp 数据库并`dbname` `dbuname` `dbupass`相应地进行更改。

**编辑：**

还有一件事，如果您再次在 xampp 上安装该站点，然后删除 config.php

因为 cms 必须首先检查 config.php，然后如果找到它就建立与 db 的连接。在这种情况下，没有找到 db 并发送输出。这会生成会话启动的错误。

# image - 如何使用 /dev/loop0 创建和挂载镜像？

> ID：10379897
> 
> 赞同：1
> 
> 时间：2012-04-30T07:19:33.857
> 
> 标签：image, mount, ext3, loopback

我想从目录的内容创建一个图像（比如“/home/sid/folder/”）。然后我想使用 /dev/loop0，将其格式化为 ext3 格式。最后将我刚刚创建的图像与 loop0 关联并挂载它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:27:41.793

创建所需大小的图像文件：

```
dd if=/dev/zero of=./your.img bz=1M count=<number of megabytes you want> 
```

格式化

```
mkfs.ext3 ./your.img 
```

（在运行之前重新检查该命令，阅读打印出来的内容。）

安装它：

```
mount -o loop ./your.img /some/mount/point 
```

你完成了。在将映像文件复制/发送到任何地方之前，请不要忘记卸载。

# jquery - 从 AJAX 返回变量以供以后处理

> ID：10379898
> 
> 赞同：0
> 
> 时间：2012-04-30T07:19:46.053
> 
> 标签：jquery, html, ajax, json, global-variables

由于，似乎是使用 INNERHTML 的错误，其中我的 SELECT OPTION 标记变为空白（基于我已经能够做的研究） - 我不得不尝试弄清楚如何为以后创建一个变量根据以下返回的 JSON 数据使用包含我的 OPTION 标签，并且没有任何乐趣；

```
[
{"saying":"Select a saying..."},
{"saying":"I rock the camera!"},
{"saying":"Ask me about Holland"},
{"saying":"I'm with the Photographer!"},
{"saying":"I'd love to frame you!"}
] 
```

下面是我的两个核心函数（函数 loadlist 和函数 ()），后者是启用选择标签的填充并将参数传递给第一个然后从 mysql DB 获取数据的核心函数。{注意：选择标签适用于我今天拥有的代码，如果仅在 html 文件的正文中，它仅在 INNERHTML 中并使用 document.getElementById 失败。

我在 IE、FireFox、Safari 和 Chrome 上试过这个。我为什么要这样做？我正在努力创建一个模式弹出窗口，其中包含许多 T 恤的可选选项，并基于这些选项指导您选择说法等。如果 INNERHTML 可以工作，我会完成，因为它按预期更改了 DIV除了我的 SELECT 标签。

工作代码：......

```
<div id='target' class="target">
<p>in the div</p>
<p><select id="say1" name="say1" onchange="custom(this.id)" size="1"></select></p>
</div> 
```

…………

不工作代码：......

```
 {
    div = document.getElementById('target'); 
    str = '<select id="say1" name="say1" onchange="custom(this.id)" size="1"></select>';
    div.innerHTML = str; 
    } 
```

.....................

```
/*function to load a list*/
function loadlist(selobj,url,nameattr)
{

 $(selobj).empty();
    $.getJSON(url,{ data: 123, t: (new Date()).getTime() },function(data) {
        $.each(data, function(i,obj)
            {
                $(selobj).append(
                    $('<option></option>')
                        .val(obj[nameattr])
                        .html(obj[nameattr]));
            });
    });
}

    $(function()
    { 
       //By default, jQuery will load from cache if the request is same
       loadlist($('select#colour').get(0), 'getcolours.php?getlist=colour','colour');
       loadlist($('select#saying').get(0), 'getsaying.php?getlist=adultsaying','saying');
   loadlist($('select#say1').get(0), 'getsaying.php?getlist=adultsaying','saying');
    }); 
```

社区有什么帮助是向我展示我在 loadlist 函数中的哪个位置编写了将 JSON 数据返回到以后可以使用的变量的能力，理想情况下添加打开和关闭 OPTION 标记？

我对其中的一些有点陌生，这些概念正在逃避我，因为我必须完成这个项目，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:32:45.560

您至少需要一个选项才能使 onchange 功能正常工作

```
 div = document.getElementById('target'); 
    str = '<select id="say1" name="say1" onchange="custom(this.id)" size="1"><option value="1">1</option><option value="2">2</option></select>';
    div.innerHTML = str; 
```

# sharepoint - 在 Sharepoint Web 部件中未调用 PageLoad

> ID：10379899
> 
> 赞同：0
> 
> 时间：2012-04-30T07:19:57.207
> 
> 标签：sharepoint, sharepoint-2010

我有许多带有自定义 harepoint 可视化 Web 部件的页面。在这些 Web 部件的页面加载中，我正在做一些我需要在每次页面加载时触发的逻辑。问题是当我使用浏览器后退按钮或 javascript 将用户重定向到上一页时，没有调用页面加载。似乎正在从缓存中检索该页面。这可以轻松禁用吗？是否有任何其他解决方法可以确保每次呈现页面时都会触发代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:46:53.997

使用后退按钮将从缓存中加载，您是正确的。

要禁用缓存，您需要在页面的 head 部分设置一个“expires”= -1 元标记，但这似乎有点激烈，以便触发页面的逻辑。

我建议使用 jQuery 文档就绪方法而不是页面加载。无论从哪里加载页面信息，这都会触发。

```
$(document).ready(function() {

// Insert code here

}); 
```

# mysql - Codeigniter 风格的 Mysql 在 IE 8 上不会产生任何结果

> ID：10379903
> 
> 赞同：0
> 
> 时间：2012-04-30T07:20:28.107
> 
> 标签：mysql, codeigniter, internet-explorer-8

我正在运行这个查询

```
$q = $this
        ->db
        ->select('R_ID,B_ID,NETWORK,Interface,Mask')
        ->where('R_ID', $rid)
        ->where('B_ID', $bid)          
        ->get('IpPlan');

return $q->result_array(); 
```

它在 IE9、Firefox 和 Chrome 等浏览器中返回结果，但在 IE8 中不返回结果。

我已经试过了

```
return $q->result(); 
```

但仍然没有运气。有谁知道这个问题的原因？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:43:29.587

选择（在 CodeIgniter DB 层中运行）给出不同的结果几乎是不可能的，这取决于您的浏览器。CSS 甚至 HTML 解析可能会有所不同，但从这个角度来看，SQL 是可靠的。所以你应该检查你的变量链：

*   也许您的浏览器存储了变量的旧值（初始化它们）
*   清除浏览器缓存
*   重启浏览器
*   尝试其他浏览器

等等

# upload - 一个谷歌账号可以在安卓市场上传不同的应用吗？

> ID：10379904
> 
> 赞同：0
> 
> 时间：2012-04-30T07:20:36.493
> 
> 标签：upload, google-play

我可以使用同一个 google 帐户在 android market 上上传许多不同的应用程序，还是我必须为不同的应用程序创建不同的应用程序？谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:53:55.807

我想你可以。开发人员可以制作不止一个应用程序；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:56:24.537

您可以通过一个 Google Play（不再是 Market）开发者帐户发布任意数量的应用程序。

# php - 基于 int 的自定义字段排序

> ID：10379906
> 
> 赞同：1
> 
> 时间：2012-04-30T07:20:47.150
> 
> 标签：php, mysql

如果我有一个数据库字段列表：

```
id    order    title
1     3        This is a post
2     1        This is another post
3     2        This is also a post
4     4        This is still a post 
```

我想根据 order 更改这些的*顺序*。
如果我将 id #1 上的订单设置为 2，我希望将 id #3 上的订单设置为 3。
如果我将 id #4 上的订单设置为 1，我希望 id #1 上的订单为 4，将 id #2 上的订单设置为为 2，id #3 上的订单为 3 等等。

我怎样才能做到这一点？我认为这应该很简单，但我无法弄清楚。
我已经搜索了，但我不知道要搜索什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:46:24.263

您可以在 SQL 中使用两个`UPDATE`语句来执行此操作：

```
START TRANSACTION;
SELECT order FROM t WHERE order BETWEEN $new_order AND $old_order FOR UPDATE;

UPDATE t SET order = order + 1  WHERE order BETWEEN $new_order AND $old_order;
UPDATE t SET order = $new_order WHERE id = $id;

COMMIT; 
```

我在这些更新期间锁定了表以防止并发问题（但是，请注意事务/锁仅适用于 InnoDB 表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:42:27.910

首先，您必须找到`$other_row`具有`order`您想要重用的价值的 。然后更改每一行的值。

```
$id_to_set = 1;
$order_to_set = 2;

// Find the order that will need to be swapped
$result = mysql_query("select order from xxx where id = $id_to_set");
$row = mysql_fetch_row($result);
// Find the other row that will be modified
$result = mysql_query("select id from xxx where order = $order_to_set");
$other_row = mysql_fetch_row($result);

// Do the actual swapping
mysql_query("update xxxx set order = $order_to_set where id = $id_to_set");
mysql_query("update xxxx set order = " . $row['order'] . " where id = " . $other_row['id']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T07:23:24.777

有两种方法：阅读 SQL 文档并在查询中使用 ORDER BY close

阅读 PHP 文档并使用 usort 函数

# forms - 在其他电子邮件客户端中使用 Outlook 2010 表单？

> ID：10379908
> 
> 赞同：3
> 
> 时间：2012-04-30T07:20:53.070
> 
> 标签：forms, email, outlook, sendmail

我用 C# 创建了自己的电子邮件客户端，我可以发送和接收电子邮件，我想从我自己的电子邮件客户端发送自定义的 Outlook 2010 表单（*或任何自定义表单）。*

我的项目必须向客户发送表格，他们可以填写。将包含所有数据的表单发回。

我对 Outlook 很陌生，所以如果你的答案可以使用非常基本的 Outlook 术语，我将非常感激。

### 问题...

1.  我可以将 Outlook 表单与其他电子邮件客户端一起使用吗？

2.  我的回复电子邮件将如何显示？收到回复时使用outlook表格是填写的表格吗？

3.  Outlook 自定义表单会是我的想法更容易的选择吗？一个好的可靠重定向也是一个合适的答案，我不希望找到另一个死胡同。

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:53:39.827

其他电子邮件客户端（如 Gmail、雅虎等）无法读取外观表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:48:40.447

一个更便携的解决方案是一封电子邮件，其中包含指向带有表单的网页的链接。根据您想到的其他客户，这可能是唯一可行的选择。Microsoft 的架构显然是非标准的，但如果您只针对 Windows 用户（他们还没有手机！），也许您可​​以在这个孤岛/焦油坑中取得一些成果。

# jquery - jQuery：使用 .next() 选择下一个选择器

> ID：10379909
> 
> 赞同：0
> 
> 时间：2012-04-30T07:20:56.460
> 
> 标签：jquery

这是我的 HTML 代码：

```
 <div id="slides">
    <ul>
      <li><a href="" class="current">2</a></li>
      <li><a href="">3</a></li>
      <li><a href="">4</a></li>
      <li><a href="">5</a></li>
      <li><a href="">6</a></li>
      <li><a href="">7</a></li>
    </ul>
  </div> 
```

和这个 jQuery 代码：

```
$('#slides li a.current').next('li a').addClass("current"); 
```

但这不起作用，我的错误在哪里？

[http://jsfiddle.net/636vV/](http://jsfiddle.net/636vV/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:29:35.193

```
$('#slides a.current').parent('li').next("li").find("a").addClass("current"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:23:09.253

```
$('#slides a.current').parent('li').next('li').find('a').addClass("current"); 
```

**或者**

```
$('#slides a.current').parent('li').next('li').children('a').addClass("current"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T07:24:16.203

```
$('#slides li a.current').parent().next().find('a').addClass("current"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T07:26:34.630

```
$('#slides li a.current').parent().next().find('a').addClass("current");​​​ 
```

[**现场演示**](http://jsfiddle.net/636vV/15/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T07:36:57.437

在这里你去演示= [http://jsfiddle.net/ncdjU/1/](http://jsfiddle.net/ncdjU/1/)

希望这会有所帮助，祝你有个愉快的经历！

**jQuery代码**

```
 $('#slides > ul > li').click(function() {

    $('#slides > ul > li > a.current').removeClass('current');

    $(this).find('a').addClass("current");

});​ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-30T07:28:38.217

```
$('#slides li:has(a[class="current"])').next().find('a').addClass("current") 
```

[JSFiddle](http://jsfiddle.net/636vV/23/)

# wpf - WPF 画笔在画布上显示负元素

> ID：10379917
> 
> 赞同：0
> 
> 时间：2012-04-30T07:22:30.400
> 
> 标签：wpf, vb.net, canvas

我正在制作一个拖放应用程序，当我在画布内拖动一个元素时，当坐标为负时，画笔会显示该元素，这会在画笔中产生奇怪的调整大小，女巫也会显示负元素。我怎样才能让视觉画笔只绘制画布的真实大小，或者画布的正子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:42:57.810

视口也总是显示具有负值的项目。我不想在我的画笔中出现这种效果，所以我不得不找到另一个解决方案。

```
 myBrush.Visual = TheCanvas
    Dim _viewRect As Rect
    Private _viewGeo As RectangleGeometry 
```

每次画布大小更改时，我都会调用此方法，因此当我将负面成员拖入时，它不会在画笔上显示。不要在启动时调用此方法，因为您的画布宽度和高度将没有值。

```
 _viewRect = New Rect(0, 0, TheCanvas.Width, TheCanvas.Height)
    _viewGeo  = New RectangleGeometry(_viewRect)
    TheCanvas.Clip = _viewGeo 
```

# java - “无法解析符号”编译 servlet

> ID：10379918
> 
> 赞同：-1
> 
> 时间：2012-04-30T07:22:58.753
> 
> 标签：java, regex, servlets

我正在使用 Java Servlet。在那里，我必须使用正则表达式来过滤掉文本。但是，java 编译器在 import java.util.regex.Pattern 的导入处说；“无法解析符号”

因此，我所有的连续匹配器和模式功能都不起作用。

我们不能在 servlet 中使用正则表达式包吗？我无法使用字符串的 contians 函数，因为它也给了我一个错误。有什么替代品吗？

```
import java.io.IOException;
import java.io.PrintWriter;
import java.io.StringReader;
import java.util.List;
import java.util.regex.Pattern;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.PostMethod;
import org.jdom.Document;
import org.jdom.Element;
import org.jdom.input.SAXBuilder;

public class HelloWorldExample extends HttpServlet {
public void doGet(HttpServletRequest request,HttpServletResponse response)throws IOException, ServletException
{
response.setContentType("text/plain;charset=ISO-8859-1");
PrintWriter out = response.getWriter();
String keyword = request.getParameter("inputValue");
HttpClient cl = new HttpClient();
String temp = "http://localhost:8080/solr/select/?q=*%3A*&version=2.2&start=0&rows=2000&indent=on";
PostMethod pst = new PostMethod(temp);

String XMLstr="<GIS>";
Perl5Util perl=new Perl5Util();

 try{
    cl.executeMethod(pst);
    String xmlstr=pst.getResponseBodyAsString();
    SAXBuilder sax=new SAXBuilder();
    Document doc= (Document) sax.build(new StringReader(xmlstr));
    Element rootElem=doc.getRootElement();
    Element res=rootElem.getChild("result");
    List docs=res.getChildren("doc");
    for(int i=0;i<docs.size();i++)
    {
        out.println("docsSize = " + docs.size());
        Element row= (Element)docs.get(i);
        List strs=row.getChildren("str");
        out.println("strs = " + strs.size());
        out.println("Hello");
        Element strRow=(Element)strs.get(0);
        String strContent=strRow.getText().toString();
        Element strRow1=(Element)strs.get(1);
        String Lati=strRow.getText().toString();
        Element strRow2=(Element)strs.get(2);
        String Longi=strRow.getText().toString();
        Element strRow3=(Element)strs.get(3);
        String FileName=strRow.getText().toString();
        if(strContent.contains(keyword))
        {
                //out.println("XMLstr: ");
                XMLstr+="<File><id>"+FileName+"</id><Lat>"+Longi+"</Lat><Long>"+F+"</Long>";
                //out.println("XMLstr: "+XMLstr);
            }   
        //out.println(strRow.getText());
        break;
    }
}catch(Exception e)
{
    out.println(e);
}   
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:26:44.930

你不想`java.util.regex.Pattern`吗？（不是`utils`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:28:22.637

根据[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，包应该是`java.util.regex.Pattern`而不是`java.utils.regex.Pattern`。

编辑：你确定你有适当的语法吗？( `<%@ page import java.util.regex.Pattern %>`)。也许您使用的是旧版本的 Java？该类`Pattern`在 Java 1.5 中可用。

要查看您当前正在运行的版本，请打开命令提示符或终端并输入`java -version`. 这应该会产生您在机器上运行的 Java 版本。

# java - 列中的多个值

> ID：10379919
> 
> 赞同：2
> 
> 时间：2012-04-30T07:23:05.780
> 
> 标签：java, sql

我的代码是这样的

```
ResultSet rs = statement.executeQuery(
    "SELECT SUM(column1) FROM table where column2=name "); 
system.out.println(rs) 
```

那是对的吗？或者我如何从 Java 中的 SQL 列中获取总和值？你能写一个小例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:28:09.340

```
ResultSet rs = statement.executeQuery(
   "SELECT SUM(column1) FROM table where column2=name "); 
System.out.println(rs);// this is wrong 
```

这将打印 ResultSet 对象。

这应该是

```
ResultSet rs = statement.executeQuery(
   "SELECT SUM(column1) FROM table where column2=name "); 
if(rs.next()){
System.out.println(rs.getInt(1));
} 
```

# android - 请推荐一款适用于 Android 的 2d 游戏/物理引擎

> ID：10379927
> 
> 赞同：1
> 
> 时间：2012-04-30T07:23:35.120
> 
> 标签：android

我期待为 android 制作 2d 游戏，并且想知道当今最好的引擎是什么？

基本上我需要的是能够定义固体物理对象，如地面或一些障碍物，以及一些能够四处移动、撞到东西、碰撞等的角色对象。

从我目前发现的情况来看，andengine.org 似乎是最受欢迎的，你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:25:48.470

使用 cocos2d-x 对 IOS + Android 都有好处.. :) 检查[http://cocos2d-x.org/](http://cocos2d-x.org/)了解更多信息..

# javascript - 创建另一个画布后，HTML5 画布不显示

> ID：10379940
> 
> 赞同：1
> 
> 时间：2012-04-30T07:25:03.537
> 
> 标签：javascript, css, html, canvas

嗨，我是在这个论坛上发帖的新手，但以前用它来回答一些问题。我正在做一个学校项目，使用 HTML5、CSS 和 JS 来制作一些教学课程。我正在使用画布制作一些交互式工具，我的问题是：我有几个面板上有不同的内容，在一个面板上我使用画布来显示一些图像和信息，我现在正试图在不同的地方创建另一个画布面板，但是当我这样做时，新画布中不会显示任何内容。当我删除旧的画布代码时，新的画布代码将显示，但我认为必须有一种方法让它们都显示，非常感谢帮助，我真的需要让这个为学校工作。对不起，如果这很难理解，我的英语仍然不是很好。如果有帮助，这里是代码示例。

```
<div class="panel">
<!DOCTYPE HTML>
<html>
<head>
<style>
body {
margin: 0px;
padding: 0px;
}
#myCanvas {
border: 1px solid #9C9898;
}
</style>
<script>
window.onload = function() {
var canvas = document.getElementById("h1Canvas");
var context = canvas.getContext("2d");

context.moveTo(100, 150);
context.lineTo(450, 50);
context.lineWidth = 10;

// set line color
context.strokeStyle = "#ff0000";
context.stroke();
};

</script>
</head>
<body>
<canvas id="h1Canvas" width="578" height="200"></canvas>
</body>
</html>

</div>

<div class="panel">
  <!DOCTYPE HTML>
<html>
<head>
<style>
body {
margin: 0px;
padding: 0px;
}
#myCanvas {
border: 1px solid #9C9898;
}
</style>
<script>
window.onload = function() {
var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");

context.moveTo(100, 150);
context.lineTo(450, 50);
context.lineWidth = 10;

// set line color
context.strokeStyle = "#ff0000";
context.stroke();
};

</script>
</head>
<body>
<canvas id="myCanvas" width="578" height="200"></canvas>
</body>
</html>
</div> 
```

所以第一个面板中的所有内容都不会显示，但第二个面板会。如果我从第二个面板中删除画布，则将显示第一个面板。

```
<div class="panel">

<head>
<style>
body {
margin: 0px;
padding: 0px;
}
#myCanvas {
border: 1px solid #9C9898;
}
</style>
<script>
window.onload = function() {
var canvas = document.getElementById("myCanvas");
var context = canvas.getContext("2d");

context.moveTo(100, 150);
context.lineTo(450, 50);
context.lineWidth = 10;
context.strokeStyle = "#ff0000";
context.stroke();
};

</script>
</head>
<body>
<div><canvas id="myCanvas" width="578" height="200"></canvas></div>
</body>

</div>

<div class="panel">

<head>
<style>
body {
margin: 0px;
padding: 0px;
}
#myCanvas {
border: 1px solid #9C9898;
}
</style>
<script>
window.onload = function() {
var h1canvas = document.getElementById("h1Canvas");
var cntxt = h1canvas.getContext("2d");

cntxt.moveTo(100, 150);
cntxt.lineTo(450, 50);
cntxt.lineWidth = 10;
cntxt.strokeStyle = "#ff0000";
cntxt.stroke();
};

</script>
</head>
<body>
<div><canvas id="h1Canvas" width="578" height="200"></canvas></div>
</body>

</div> 
```

Canveses 位于不同的 div 中，因为每个 div 都是轮播中的不同面板，因此它们需要在那里而不是放在同一页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:37:34.693

你的 HTML 结构是错误的，你需要这样的东西：

```
<html>
    <head>
        <!-- Here goes your css and js -->
    </head>
    <body>
        <!-- Here goes your html elements -->
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T16:01:23.343

除了糟糕的结构之外，您还有两个由同一个变量“canvas”引用的画布和由同一个变量“context”引用的两个上下文。因此，您实际上只有一个画布和一个上下文。

编辑好的，你的代码已经整理好了，而且我已经改变了你的第二个画布中的坐标，这样两张图就不会重叠。您可以根据需要更改坐标。

```
<!DOCTYPE HTML>
<html>
<head>
<style>
body {
margin: 0px;
padding: 0px;
}
#h1Canvas {
border: 1px solid #9C9898;
}
#myCanvas {
border: 1px solid #9C9898;
}
</style>
<script>
window.onload = function() {
var hcanvas = document.getElementById("h1canvas");
var hcontext = hcanvas.getcontext("2d");

hcontext.moveTo(100, 150);
hcontext.lineTo(450, 50);
hcontext.lineWidth = 10;

// set line color
hcontext.strokeStyle = "#ff0000";
hcontext.stroke();

var mcanvas = document.getElementById("myCanvas");
var mcontext = mcanvas.getContext("2d");

mcontext.moveTo(200, 250); //add 100 to coordinates so that two drawings do not lie on top of each other change as needed
mcontext.lineTo(550, 150);
mcontext.lineWidth = 10;

// set line color
mcontext.strokeStyle = "#ff0000";
mcontext.stroke();
};
</script>
</head>
<body>
<canvas id="h1Canvas" width="578" height="200"></canvas>
<canvas id="myCanvas" width="578" height="200"></canvas>
</body>
</html> 
```

# json - 如何将 Json 发布到 Play Framework Morphia 控制器

> ID：10379943
> 
> 赞同：2
> 
> 时间：2012-04-30T07:25:23.917
> 
> 标签：json, playframework, morphia

我首先尝试使用带有 morphia 1.2.6a 的 play 1.2.4 将 json 数据发布到我的控制器。这总是以播放内部某处的空指针异常结束，所以我切换到播放 1.2.3 并且我更进一步，但仍然感到困惑。post 调用现在成功，但数据似乎永远不会到达。

路线

```
 POST /mytest    mycontroller.myposttest 
```

我的控制器.java

```
 public static void myposttest(SampleObject item){
       Gson gs = new GsonBuilder().create();
       System.out.printf(gs.toJson(item));
       //NOTE: item is empty every time
    } 
```

mytest.java

```
 String jsonText = "{name=\"foo\"}"; 
    Response response = POST("/mytest/","application/json",jsonText);
    //NOTE: the post call succeeds but the jsonText data is not found on the other side 
```

我读过的例子表明这只是工作，但我已经搞砸了很长时间并且没有弄清楚。这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:44:00.063

1.  Play 无法将 Json 直接绑定到对象
2.  您的帖子数据没有名为“item”的参数

您应该将您的邮政编码更改为：

```
Response response = POST("/mytest/","application/json",{item: jsonText}); 
```

你的控制器代码应该是：

```
public static void myposttest(String item){
    Gson gs = new GsonBuilder().create();
    SampleObject obj = gs.fromJson(item);
    obj.save();
    ok();
} 
```

# android - 如何通过蓝牙安卓手机向有蓝牙的医疗设备发送/接收数据

> ID：10379944
> 
> 赞同：10
> 
> 时间：2012-04-30T07:25:26.643
> 
> 标签：android, bluetooth

我想通过蓝牙将我的 android 手机与医疗设备连接。一次我想连接 3 个设备并不断从一个设备获取数据并发送到另一个也存储在 SD 卡中的设备。

此外，数据采用不同的格式，如十六进制和八进制。那么有可能吗，是否有任何 API 可以做到这一点？给我一些链接或任何代码表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:50:48.997

我找到了一个关于这个主题的非常好的页面。 [http://www.ars2000.com/Bluetooth-IEEE-11073.html](http://www.ars2000.com/Bluetooth-IEEE-11073.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T04:45:49.997

Antidote 是一个开放的 IEEE 11073 堆栈，也适用于 Android：http://oss.signove.com/index.php/Antidote: [_IEEE_11073-20601_stack](http://oss.signove.com/index.php/Antidote:_IEEE_11073-20601_stack)

基于 Antidote 的 Android 示例应用程序： [https ://github.com/brasileiroaraujo/HealthServiceAndroid](https://github.com/brasileiroaraujo/HealthServiceAndroid)

# php - 如何使用 PHP 加密 URL（或者更确切地说是它的 GET 参数部分）？

> ID：10379946
> 
> 赞同：2
> 
> 时间：2012-04-30T07:25:40.140
> 
> 标签：php, url

我正在开发一个功能，通过我们的应用程序的内置电子邮件发件人发送表单的链接，我打算只发送一个包含它被发送到的实体的 id 和类型的 url，表单的 id 和一个标识符，告诉我在哪个数据库中查看（我们有多个包含客户数据的数据库）。我正在寻找一种简单的方法来编码这些信息。

我想过只发送一个 ID 并将所有内容保存在数据库中，但由于这些电子邮件可能会被大量发送用于营销或忠诚度活动，我认为这不是一个好主意。

我用谷歌搜索了一些加密功能，但我尝试过的那些有时会返回带有“？”等非法字符的结果。和“&”破坏了我的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:23:27.883

由于您不希望客户端可以解码信息，这意味着您不需要完整的 URL - 执行线程必须返回到您的服务器进行处理。在这种情况下，为什么要费心加密费用——只需分配一个引用原始 id 的随机数（检查冲突）。显然，随机数集越稀疏，发生冲突的可能性就越小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T07:30:38.870

在我所有的应用程序中，我在另一端使用[base64_encode](http://uk3.php.net/base64_encode)和[base64_decode对 URL 进行了编码。](http://uk3.php.net/base64_decode)

我相信这是最好的方法，因为您不会将敏感数据传输给客户端。

否则，您应该将这些 URL 保存在数据库中（或者可能是参数），然后发送一个 ID

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:30:30.307

如果您需要加密，请寻找像 AES 这样的对称加密，然后对结果进行 base64 编码。

如果您只需要编码，然后通过 Base64 编码，这是您的最佳选择。

并非在这两种情况下，您都需要注意某些浏览器 URL 长度或 Web 服务器 GET 支持是有限的……一定长度（在 2000 到 80000 之间，具体取决于浏览器和 Web 服务器）

还要考虑需要如何传输链路。很长的网址不方便。您可以非常轻松地安装[yourls.org](http://yourls.org)或类似网站以缩短您的 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T13:25:32.493

在我自己开发的 CMS 控制面板中，如果您尝试访问一个 URL 并且没有登录，您将被重定向到一个如下所示的 URL（例如）：`/?return=Epf7psjPeRHeEsCoa56xvvF9QiaT%2B02P5FUSbA0Ttl%2Bv3LalZ26sqzSAV6WrNKNWK%2FDD%2FngSbVjJ%2FyUuG9QIWA%3D%3D`

成功验证后，您将返回正确的 URL。如果您试图篡改这些数据，它会（以压倒性的可能性）将您踢到主页。

如果这就是你要找的，这就是我实现它的方式：

```
if ($_SERVER['REQUEST_URI'] !== '/') {
    if (empty($_SESSION['cms_user_id_key_here'])) {
        $encrypted = \Defuse\Crypto\Crypto::encrypt(
            $_SERVER['REQUEST_URI'],
            URL_KEY_CONST
        );
        header('Location: /?return='.urlencode(base64_encode($encrypted)));
        exit;
    }
} 
```

然后，在成功登录后：

```
if (isset($_GET['return'])) {
    try {
        $decrypted = \Defuse\Crypto\Crypto::encrypt(
            base64_decode($_GET['return'],
            URL_KEY_CONST
        );

        // Defense-in-depth; we always want a relative URL:
        if ($decrypted[0] === '/') {
            header('Location: '.$decrypted);
        } else {
            header('Location: /');
        }
    } catch (\Defuse\Crypto\Exception\CryptoException $e) {
        header('Location: /');
    }
    exit;
} 
```

你问这是什么神秘`\Defuse\Crypto\Crypto::encrypt()`的`\Defuse\Crypto\Crypto::decrypt()`？当然是[defuse/php 加密](https://github.com/defuse/php-encryption)。

在几乎所有情况下，您都应该优先使用提供经过身份验证的加密的库，而不是滚动您自己的未经身份验证的加密。

# python - 默认列表设计

> ID：10379948
> 
> 赞同：2
> 
> 时间：2012-04-30T07:25:50.383
> 
> 标签：python, defaultdict

我试图`defaultlist`通过类比来创建`defaultdict`. 这个想法是，有时我想要一个预先填充（实际上！）的列表，其中包含未明确设置值的所有索引处的一些元素。不同之`defaultdict`处在于我实际上并没有将默认值添加到列表中，除非由于用户分配而必须扩展列表。

1）这个设计有问题吗？

2）这是我要使用的实现。有什么问题吗？

```
class defaultlist(list):
  def __init__(self, default_factory, arg = ()):
    # note: cannot use arg = None since list(None) is not the same as list()
    # alternatively can use:
    # def __init__(self, default_factory, *args, **kwargs)
    self.default_factory = default_factory
    super().__init__(arg)

  def __getitem__(self, key):
    try:
      return super().__getitem__(key)
    except IndexError:
      return self.default_factory()

  def __setitem__(self, key, value):
    for i in range(len(self), key):
      self.append(self.default_factory())
    self.append(value) 
```

编辑：最初，我有两个错误。抱歉，感谢您指出答案中的两个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:44:25.443

问题。

1.  您的`__init__`函数尝试将所有参数转发到基类。但是，您编写它的方式只能转发 1 个参数，并且构造函数将始终期望第二个参数。在 Python 中执行此操作的正确方法是：

    ```
    def __init__(self, default_factory, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.default_factory = default_factory 
    ```

2.  该`__setitem__`函数尝试填充所有尚不存在的索引，但您错过了`key`它本身——注意`range`最后是排他的——因此该`super().__setitem__`方法将失败。你应该`.append`在这种情况下使用。

    ```
    def __setitem__(self, key, value):
        try:
            super().__setitem__(key, value)
        except IndexError:
            for i in range(len(self), key):
                self.append(self.default_factory())
            self.append(value) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:34:49.277

我认为您的原因`TypeError`只是您使用`def`而不是`class`在“ `def defaultlist(list):`”行中，因此`defaultlist`被视为函数而不是类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T08:37:21.917

您已接近解决方案。您正在混淆超级内置函数的使用和参数打包的工作方式。（注意：正如@weronika 指出的那样，您的问题中使用 def 而不是 class，但您的错误消息来自您的代码正在使用 class 进行测试）

尝试这个：

```
class defaultlist(list):
  def __init__(self, default_factory, arg = ()):
    super(defaultlist, self).__init__(arg)
    self.default_factory = default_factory

  def __getitem__(self, key):
    try:
      return super(defaultlist, self).__getitem__(key)
    except IndexError:
      return self.default_factory()

  def __setitem__(self, key, value):
    for i in range(len(self), key):
      self.append(self.default_factory())
    super(defaultlist, self).__setitem__(key, value)

lst = defaultlist(int, [3, 4, 5]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T03:20:24.127

还有另一个问题，例如，如果您希望有一个默认列表。目前的`__getitem__(..)`实现将返回一个新列表，但不会将其存储在默认列表中。

解决方法很明显，例如在这个答案中：[https ://stackoverflow.com/a/8749640/1143274](https://stackoverflow.com/a/8749640/1143274)

# sql-server-2008 - 将一个值与从 sql server 中的子查询产生的多个值进行比较

> ID：10379955
> 
> 赞同：0
> 
> 时间：2012-04-30T07:26:00.697
> 
> 标签：sql-server-2008

如何将一个值与子查询产生的多个值进行比较

```
if(select COUNT(si.s_id)--==========>1  check if student has 4 passed courses
from students.student_study_subjects,students.study_info si,students.subjects,admins.years
where students.student_study_subjects.degree>=students.subjects.min_degree 
AND students.student_study_subjects.subj_code=students.subjects.subj_code
AND si.d_id=students.student_study_subjects.d_id
AND si.year=admins.years.year_num
AND si.year=(select max(admins.years.year_num)-1 from admins.years)
group by si.d_id,si.year)=4
begin 
insert into study_info
(s_id,year,dept_id,s_state,group_num)
select students.study_info.s_id,max(admins.years.year_num),students.study_info.dept_id,'new',students.study_info.group_num+1
from students.study_info,admins.years
group by students.study_info.s_id,students.study_info.dept_id,students.study_info.group_num
end 
```

一般来说，如果这个子查询返回值等于 4，我想在表中插入一些值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:31:31.933

你可以试试这个：

1.  将 存储`output(count)`在一个变量中。
2.  检查变量是否等于 4。
3.  如果是，那么您可以运行插入查询

# java - 解析类似 SQL 的语法、设计模式

> ID：10379956
> 
> 赞同：16
> 
> 时间：2012-04-30T07:26:06.797
> 
> 标签：java, sql, design-patterns, antlr, abstract-syntax-tree

我正在尝试模拟 sql 语法来构建一个类似于键值存储的简单 sql 接口。这些值本质上是 POJO

一个例子是

```
select A.B.C from OBJ_POOL where A.B.X = 45 AND A.B.Y > '88' AND A.B.Z != 'abc'; 
```

OBJ_POOL 只是同一类的 POJO 列表。在此示例中，A 将是基类。

```
Class A
    Class B
        String C
        Integer X
        String Y
        String Z 
```

现在 ABC 等价于 A.getB().getC()

我正在使用 Antlr 解析上述语句以获取 AST，然后`hoping`使用 Apache BeanUtils 反射性地获取/设置字段名称。

我写了构建 AST 的语法 ![上述语句的 AST](../Images/cce581525c321ff0cd6bef7ab5f212e2.png) 现在我面临两个问题

1.  对于 where 子句应该如何实现访问者？ABX = 45 意味着所有对象的字段 X 为 45，过滤应该如何发生，有什么好的方法可以做到这一点吗？
2.  有没有什么方法可以遍历生成的 AST 而不会用自定义逻辑（存储访问、属性获取器/设置器等）混淆访问者代码

第二个问题更令人担忧，因为该语句可能会做很多事情。

简而言之，任何建议/链接/设计模式很好地解析一小部分 sql select 语句将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-01T19:13:03.183

您可以像我在[博客文章](http://bkiers.blogspot.com/2011/03/creating-your-own-programming-language.html)中演示的那样执行此操作（因为我知道您已经阅读了这些内容，所以我不会详细介绍）。在这种情况下，唯一的区别是您的每一行数据都有自己的范围。传递此范围的一种简单方法是将其作为参数提供给`eval(...)`方法。

下面是如何实现它的快速演示。请注意，我根据我的博客文章快速破解了这个：并非所有功能都可用（请参阅许多`TODO`，并且其中也可能存在（小）错误。使用风险自负！）。

除了 ANTLR v3.3 之外，您还需要以下 3 个文件用于此演示：

## 选择.g

```
grammar Select;

options {
  output=AST;
}

tokens {
  // imaginary tokens
  ROOT;
  ATTR_LIST;
  UNARY_MINUS;

  // literal tokens
  Eq     = '=';
  NEq    = '!=';
  LT     = '<';
  LTEq   = '<=';
  GT     = '>';
  GTEq   = '>=';
  Minus  = '-';
  Not    = '!';
  Select = 'select';
  From   = 'from';
  Where  = 'where';
  And    = 'AND';
  Or     = 'OR';
}

parse
 : select_stat EOF -> ^(ROOT select_stat)
 ;

select_stat
 : Select attr_list From Id where_stat ';' -> ^(Select attr_list Id where_stat)
 ;

attr_list
 : Id (',' Id)* -> ^(ATTR_LIST Id+)
 ;

where_stat
 : Where expr -> expr
 |            -> ^(Eq Int["1"] Int["1"]) 
                 // no 'where', insert '1=1' which is always true
 ;

expr
 : or_expr
 ;

or_expr
 : and_expr (Or^ and_expr)*
 ;

and_expr
 : eq_expr (And^ eq_expr)*
 ;

eq_expr
 : rel_expr ((Eq | NEq)^ rel_expr)*
 ;

rel_expr
 : unary_expr ((LT | LTEq | GT | GTEq)^ unary_expr)?
 ;

unary_expr
 : Minus atom -> ^(UNARY_MINUS atom)
 | Not atom   -> ^(Not atom)
 | atom
 ;

atom
 : Str
 | Int
 | Id
 | '(' expr ')' -> expr
 ;

Id    : ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '_' | Digit)*;
Str   : '\'' ('\'\'' | ~('\'' | '\r' | '\n'))* '\'' 
        {
         // strip the surrounding quotes and replace '' with '
         setText($text.substring(1, $text.length() - 1).replace("''", "'"));
        }
      ;
Int   : Digit+;
Space : (' ' | '\t' | '\r' | '\n') {skip();};

fragment Digit : '0'..'9'; 
```

## SelectWalker.g

```
tree grammar SelectWalker;

options {
  tokenVocab=Select;
  ASTLabelType=CommonTree;
}

@header {
  import java.util.List;
  import java.util.Map;
  import java.util.Set;
}

@members {

  private Map<String, List<B>> dataPool;

  public SelectWalker(CommonTreeNodeStream nodes, Map<String, List<B>> data) {
    super(nodes);
    dataPool = data;
  }
}

query returns [List<List<Object>> result]
 : ^(ROOT select_stat) {$result = (List<List<Object>>)$select_stat.node.eval(null);}
 ;

select_stat returns [Node node]
 : ^(Select attr_list Id expr) 
    {$node = new SelectNode($attr_list.attributes, dataPool.get($Id.text), $expr.node);}
 ;

attr_list returns [List<String> attributes]
@init{$attributes = new ArrayList<String>();}
 : ^(ATTR_LIST (Id {$attributes.add($Id.text);})+)
 ;

expr returns [Node node]
 : ^(Or a=expr b=expr)   {$node = null; /* TODO */}
 | ^(And a=expr b=expr)  {$node = new AndNode($a.node, $b.node);}
 | ^(Eq a=expr b=expr)   {$node = new EqNode($a.node, $b.node);}
 | ^(NEq a=expr b=expr)  {$node = new NEqNode($a.node, $b.node);}
 | ^(LT a=expr b=expr)   {$node = null; /* TODO */}
 | ^(LTEq a=expr b=expr) {$node = null; /* TODO */}
 | ^(GT a=expr b=expr)   {$node = new GTNode($a.node, $b.node);}
 | ^(GTEq a=expr b=expr) {$node = null; /* TODO */}
 | ^(UNARY_MINUS a=expr) {$node = null; /* TODO */}
 | ^(Not a=expr)         {$node = null; /* TODO */}
 | Str                   {$node = new AtomNode($Str.text);}
 | Int                   {$node = new AtomNode(Integer.valueOf($Int.text));}
 | Id                    {$node = new IdNode($Id.text);}
 ; 
```

## 主.java

*（是的，将所有这些 Java 类放在同一个文件中`Main.java`：）*

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;
import java.util.*;

public class Main {

  static Map<String, List<B>> getData() {
    Map<String, List<B>> map = new HashMap<String, List<B>>();
    List<B> data = new ArrayList<B>();
    data.add(new B("id_1", 345, "89", "abd"));
    data.add(new B("id_2", 45, "89", "abd"));
    data.add(new B("id_3", 1, "89", "abd"));
    data.add(new B("id_4", 45, "8", "abd"));
    data.add(new B("id_5", 45, "89", "abc"));
    data.add(new B("id_6", 45, "99", "abC"));
    map.put("poolX", data);
    return map;
  }

  public static void main(String[] args) throws Exception {
    String src = "select C, Y from poolX where X = 45 AND Y > '88' AND Z != 'abc';";
    SelectLexer lexer = new SelectLexer(new ANTLRStringStream(src));
    SelectParser parser = new SelectParser(new CommonTokenStream(lexer));
    CommonTree tree = (CommonTree)parser.parse().getTree();  
    SelectWalker walker = new SelectWalker(new CommonTreeNodeStream(tree), getData());  
    List<List<Object>> result = walker.query();
    for(List<Object> row : result) {
      System.out.println(row);
    }
  }
}

class B {

  String C;
  Integer X;
  String Y;
  String Z;

  B(String c, Integer x, String y, String z) {
    C = c;
    X = x;
    Y = y;
    Z = z;
  }

  Object getAttribute(String attribute) {
    if(attribute.equals("C")) return C;
    if(attribute.equals("X")) return X;
    if(attribute.equals("Y")) return Y;
    if(attribute.equals("Z")) return Z;
    throw new RuntimeException("Unknown attribute: B." + attribute);
    // or use your Apache Bean-util API, or even reflection here instead of the above...
  }
}

interface Node {
  Object eval(B b);
}

class AtomNode implements Node {

  final Object value;

  AtomNode(Object v) {
    value = v;
  }

  public Object eval(B b) {
    return value;
  }
}

abstract class BinNode implements Node {

  final Node left;
  final Node right;

  BinNode(Node l, Node r) {
    left = l;
    right = r;
  }

  public abstract Object eval(B b);
}

class AndNode extends BinNode {

  AndNode(Node l, Node r) {
    super(l, r);
  }

  @Override
  public Object eval(B b) {
    return (Boolean)super.left.eval(b) && (Boolean)super.right.eval(b);
  }
}

class EqNode extends BinNode {

  EqNode(Node l, Node r) {
    super(l, r);
  }

  @Override
  public Object eval(B b) {
    return super.left.eval(b).equals(super.right.eval(b));
  }
}

class NEqNode extends BinNode {

  NEqNode(Node l, Node r) {
    super(l, r);
  }

  @Override
  public Object eval(B b) {
    return !super.left.eval(b).equals(super.right.eval(b));
  }
}

class GTNode extends BinNode {

  GTNode(Node l, Node r) {
    super(l, r);
  }

  @Override
  public Object eval(B b) {
    return ((Comparable)super.left.eval(b)).compareTo((Comparable)super.right.eval(b)) > 0;
  }
}

class IdNode implements Node {

  final String id;

  IdNode(String i) {
    id = i;
  }

  @Override
  public Object eval(B b) {
    return b.getAttribute(id);
  }
}

class SelectNode implements Node {

  final List<String> attributes;
  final List<B> data;
  final Node expression;

  SelectNode(List<String> a, List<B> d, Node e) {
    attributes = a;
    data = d;
    expression = e;
  }

  @Override
  public Object eval(B ignored) {
    List<List<Object>> result = new ArrayList<List<Object>>();
    for(B b : data) {
      if((Boolean)expression.eval(b)) {
        // 'b' passed, check which attributes to include
        List<Object> row = new ArrayList<Object>();
        for(String attr : attributes) {
          row.add(b.getAttribute(attr));
        }
        result.add(row);
      }
    }
    return result;
  }
} 
```

如果您现在生成词法分析器、解析器和 tree walker 并运行 Main 类：

```
java -cp antlr-3.3.jar org.antlr.Tool Select.g 
java -cp antlr-3.3.jar org.antlr.Tool SelectWalker.g 
javac -cp antlr-3.3.jar *.java
java -cp .:antlr-3.3.jar Main 
```

您将看到查询的输出：

```
select C, Y from poolX where X = 45 AND Y > '88' AND Z != 'abc'; 
```

输入：

```
C           X       Y       Z
"id_1"      345     "89"    "abd"
"id_2"      45      "89"    "abd"
"id_3"      1       "89"    "abd"
"id_4       45      "8"     "abd"
"id_5"      45      "89"    "abc"
"id_6"      45      "99"    "abC" 
```

是：

```
[id_2, 89]
[id_6, 99] 
```

并注意，如果`where`省略语句，`1 = 1`则自动插入表达式，导致查询：

```
select C, Y from poolX; 
```

打印以下内容：

```
[id_1, 89]
[id_2, 89]
[id_3, 89]
[id_4, 8]
[id_5, 89]
[id_6, 99] 
```

# algorithm - 如果我有要删除的元素索引和要添加的元素列表，如何修改集合？

> ID：10379960
> 
> 赞同：0
> 
> 时间：2012-04-30T07:26:25.300
> 
> 标签：algorithm, collections

我有这样的功能

```
applyDiff(List orders, List ordersToAdd, int[] ordersToRemove) {
} 
```

这个函数应该添加订单和删除一些订单，`orderToAdd`要删除的订单的索引在数组中传递。`orders``orders``ordersToRemove`

问题是：每次将 order from`ordersToAdd`插入到position 的`orders`某个位置时，所有来自该 a 的`pos`索引都必须增加 at 。`orderToRemove``pos``1`

那么我应该动态修改`ordersToRemove`数组吗？

当我应该同时添加-删除元素并且我有要删除的元素索引时，什么是通用“算法”或修改集合？

请注意，我不能在两个（添加订单，删除订单）中中断此任务，因为订单非常重要，并且其中的功能决定了应该添加和删除订单的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:56:54.130

您没有明确指定如何确定您插入的确切位置，也没有指定语义`int[] ordersToRemove`（尽管对于后者，我认为考虑到您的笔记，它是要删除的对象的索引）。但是我仍然可以建议一个“算法”，您将相应地应用它：

在您的方法中再引入一个变量`indexIncrease`。将其初始化为`0`. 每次添加都会`ordersToAdd`增加这个变量。每次考虑一个值时，`int[] ordersToRemove`不要只考虑这个值，而是考虑`ordersToRemove[i] + indexIncrease`. 因此，您将获得更新的值，`ordersToRemove`而无需迭代整个数组并在每次添加后增加值。

请注意，应用此“算法”可以确保列表`orders`始终处于当前状态，但`ordersToRemove`根本不会更新。希望这对你有用。

**编辑**根据评论和完全改变的问题描述：

*   `ordersToRemove`如果使用[二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)，则可以避免循环遍历 的所有元素。有了它，每个修改都变得`O(log n)`复杂，其中 n 是将存在的订单总数。
*   考虑到你给索引树的输入限制比你已经拥有的蛮力解决方案要糟糕得多：每次迭代的元素数量很少，性能缺陷可以忽略不计，索引树的虚假复杂性太多。

从整体上看：**我建议您坚持当前的解决方案**。

# c# - 在 Windows Phone 7 上呼叫失败，但在 Windows 和 Xbox 360 上有效

> ID：10379961
> 
> 赞同：2
> 
> 时间：2012-04-30T07:26:28.937
> 
> 标签：c#, windows-phone-7, xna, windows-phone-7.1, xna-4.0

所以，我在这里遇到了一个奇怪的问题。我在 Windows、Xbox 360 和 Windows Phone 7 上使用相同的 XNA 代码。我可以让它大部分工作，但是当 Level 尝试在 Windows Phone 7 版本上调用 TileMap 时，它永远不会到达 TileMap。但是，在 Windows 和 Xbox 360 上，它工作得很好。我在这里有什么额外的事情要做吗？

还有一些细节。在 Windows Phone 版本上，对于某些值，我从调试器中收到“无法计算表达式”消息。这在 Windows 版本上不会发生。同样，如果我让它持续足够长的时间，我会得到 OutOfMemoryException，即使我调用的图像大小约为 KB，并且 .map 文件只会创建一个 3x3 矩阵。

游戏画面.cs

```
 private Level level;
    ...
    public override void LoadContent()
    {
        if (Content == null)
            Content = new ContentManager(ScreenManager.Game.Services, "Content");
        //Create Sprite Batch for drawing textures
        //spriteBatch = new SpriteBatch(GraphicsDevice);

        //Load fonts
        hudFont = Content.Load<SpriteFont>("Fonts/hud");

        lifeIcon = Content.Load<Texture2D>("Sprites/Player/lifeIco");

        //Load overlays
        //winOverlay = Content.Load<Texture2D>("Overlays/win");
        //loseOverlay = Content.Load<Texture2D>("Overlays/lose");

        try
        {
            MediaPlayer.IsRepeating = true;
            MediaPlayer.Play(Content.Load<Song>("Sounds/music"));
        }
        catch { }

        LoadNextLevel();

        //Camera.InitializeScreen(graphics);

        base.LoadContent();
    } //end LoadContent

    /// <summary>
    /// Loads the next level.
    /// </summary>
    public void LoadNextLevel()
    {
        //Set the next level
        levelIndex = (levelIndex + 1) % numberOfLevels;

        if (level != null)
            level.Dispose();

        level = new Level(ScreenManager.Game.Services, levelIndex);

    } //end LoadNextLevel() 
```

级别.cs

```
 private TileMap levelMap;
    public Level(IServiceProvider service, int levelIndex)
    {
        //Create content manager for current level.
        content = new ContentManager(service, "Content");

        //Load level map
        //This is where the code hangs
        levelMap = new TileMap(this, levelIndex, content.Load<Texture2D>(@"Tiles/tiles"));

        //Load sounds
        //exampleSound = content.Load<SoundEffect>("Sounds/example");

        //Initialize Camera
        Camera.InitializeLevel(levelMap);
        player = new Player(this, start);
    } //end Level 
```

TileMap.cs

```
 public TileMap(Level level, int levelIndex, Texture2D tileSheet)
    {
        // Never reaches here on Windows Phone 7 Version
        // Comes right here on Windows and Xbox 360 Version
        this.tileSheet = tileSheet;

        string levelPath = string.Format("Content/Levels/{0}.map", levelIndex); 
```

我已经建议并尝试做的一些事情：

我试图在调用 Tile Map 之外调用“Tiles/tiles”，并尝试使用 DXT 压缩来压缩图块。“瓷砖/瓷砖”加载得很好，但调用仍然失败，我仍然得到 OutOfMemoryException。我的内容的总文件大小为 1.23 MB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:04:14.230

在 Level.cs 中，不是将内容作为服务传递，而是传递预先加载的所有内容：{Texture2D，Sound}。在 XNA 中，您通常会将所有内容加载到主游戏类或组件中。我是 95% 这是“无法评估表达式”的原因。

此外，查看 .NET Compact Framework 2.0 并了解垃圾收集器的工作原理：

[http://blogs.msdn.com/b/stevenpr/archive/2004/07/26/197254.aspx](http://blogs.msdn.com/b/stevenpr/archive/2004/07/26/197254.aspx)

# iphone - iPhone：使用第三方解析器格式化 Json 参数

> ID：10379963
> 
> 赞同：0
> 
> 时间：2012-04-30T07:26:29.900
> 
> 标签：iphone, json

我想创建 JSON 对象参数，例如下面。我曾在 iOS 5 设备上工作过，并且可以使用 NSJSONSerialization API 来实现这一点。例如，我创建了一个通用函数“makeJSONObject()”并使用它。

```
Sample Payload 1:
{
  token: "kjsdfjl23kkj23kk"
  entries: [
    {
      "title": "welcome",
      "name": "myself",
      "date": "2012-02-06T00:14:20Z",
    },{
      "title": "Hi",
      "name": "martin",
      "date": "2012-02-06T00:14:20Z",
    }
  ]
}

Sample Payload 2:
{
  "email" : "me@company.com",
  "password" : "pswrd"
} 
```

**代码：**

```
NSString *jsonRequest = [appDelegate makeJSONObject:[NSArray arrayWithObjects: emailStr, passwordStr, nil] :[NSArray arrayWithObjects: @"email", @"password", nil] ];

-(NSString *) makeJSONObject :(NSArray *)objects :(NSArray *)keys
{
    NSString *theBodyString = NULL;

    NSDictionary *data = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

    //NSLog(@"data: %@", data);

    NSError *writeError = nil;    
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:data options:NSJSONWritingPrettyPrinted error:&writeError];

    theBodyString = [[NSString alloc] initWithData:jsonData encoding:NSASCIIStringEncoding];

    return theBodyString;
} 
```

但是，我现在想支持 4.0 设备，我现在不能使用 NSJSONSerialization API。我想我可能不得不使用 SBJson 或类似的东西，但我不知道。有人可以帮助我如何修改上面的通用函数以使用 SBJson 或一些第三方解析器类吗？

请帮忙！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:37:38.477

NSString *jsonRequest = [NSString stringWithFormat:@"&json_data=%@",[[NSString stringWithFormat:@"{\"listInvoice\":{\"client_id\":\"\",\"date_from\":\" \",\"date_to\":\"\",\"invoice_number\":\"\",\"invoice_record_status\":\"\",\"invoice_status\":\"\",\"页\":\"1\",\"per_page_record\":\"20\"}}"] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:40:12.340

试试我的 NSArray/NSDictionary 扩展，从这些基本数据类型构建 JSON 字符串。 [https://github.com/H2CO3/CarbonateJSON](https://github.com/H2CO3/CarbonateJSON)

# css - IE 不按 css 文件显示图像

> ID：10379967
> 
> 赞同：0
> 
> 时间：2012-04-30T07:26:46.203
> 
> 标签：css, internet-explorer

我正在开发一个网络应用程序。我有一个 CSS 文件

```
body.login {
    background: url('abc.jpg')
}
body.loginSuccess {
    background: url('xyz.jpg')
} 
```

在 Chrome 中它工作正常（即在登录页面中显示图像 abc，在 loginSuccess 页面中显示图像 xyz）

但在 IE 中，相同的图像 abc 显示在两个页面中。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:30:25.000

执行以下操作之一：

*   按下`Contrl+F5`以重新加载所有没有缓存的资源
*   清除 cookie 和缓存文件（工具 > Internet 选项）
*   尝试后缀路径，例如`url(abc.jpg?v=123)`

# c# - 列表 vs List I need to create a heterogeneous List of objects (custom classes). My first thought was to create a List <isomemarkerinterface>but I quickly learned that this is not what I want 问问题 问问题 2012-04-30T07:26:46.423 36275 次 This question shows research effort; it is useful and clear 21 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I need to create a heterogeneous List of objects (custom classes). My first thought was to create a List <isomemarkerinterface>but I quickly learned that this is not what I want. My next thought was List <dynamic>and this didn't seem to be a bad idea. However, I was doing some research and came across this article about boxing and unboxing and in the example, they're doing basically what I want using List. Aside from the fact that dynamic will be evaluated at runtime and Object at compile-time, what is the difference between List <dynamic>and List? Aren't they essentially the same thing? The difference is that if you use object and you try to access some member of your object it will be a compile time error (because object doesn't have this member). In order to work you need to know what the type is and cast it. With dynamic you can access any member - no compile time error. If the member doesn't exist at runtime it would be a runtime error. This is the way to go if you know that your heretogeneous objects all have the same member for example. However if this is the case there is another more clear solution: You can define an interface, with this member and then make all your heretogeneous objects implement it and your list can be List<iyourinterface>. Keep in mind that dynamic's performance might be slightly worse, because of the, well, dynamic type resolution. c#asp.net 4 2 回答 2 This answer is useful 25 There are 3 "general" types (although not all are real types) in C#: object, var and dynamic. Object An actual type, like any other type, with one special rule: if a type doesn't inherit, it inherits from object. From this, it follows that all types inherit from object, directly or indirectly. Emphasis: object is a type. An object can be of type object, and the type has its methods, like ToString(). Since everything inherits from object, everything can be upcast into object. When you assign an object to an object reference, you are doing upcasting just like when you assign an Elephant type object to an Animal reference where Elephant inherits from Animal. SomeType x = new SomeType(); object obj = x; obj.DoSomething(); obj is treated as being of type object at compile time, and will be of type object at runtime (which is logical, since it is an actual type - obj is declared as object so can only be of that type) obj.DoSomething() will cause a compile-time error, as object does not have this method, regardless of whether SomeType has it. Var This is not an actual type, it is merely shorthand for "compiler, figure out the type for me based on the right side of the assignment". SomeType x = new SomeType(); var obj = x; obj.DoSomething(); obj is treated as being of type SomeType at compile time, and will be of type SomeType at runtime, just as if you had written "SomeType" instead of "var". if SomeType has a method DoSomething(), this code will work if SomeType doesn't have the method, the code will cause a compile-time error Dynamic This is a type that tells the compiler to disable compile-time type checking on the variable. An object is treated as having the type dynamic at compile-time and run-time. SomeType x = new SomeType(); dynamic obj = x; obj.DoSomething(); obj is of type dynamic at compile and run time if SomeType has a method DoSomething(), this code will work if SomeType doesn't have the method, the code will compile, but throw an exception at run-time note that dynamic can cause exceptions very easily if used carelessly: public void f(dynamic x) { x.DoSomething(); } This will throw an exception if x is of a type that doesn't have the DoSomething method, but it will still be possible to call it and pass any object as the parameter without a compile-time error, causing an error that only shows itself at run-time, and possibly only in specific circumstances - a potential bug. So if you use dynamic in any kind of public interface of a class, you should always manually type-check at runtime using reflection, carefully deal with exceptions, or not do it in the first place. Note: the object being referred to never changes its type, of course. While obj may be object, the x that it refers to is still SomeType. 于 2012-04-30T08:14:41.257 回答 This answer is useful 2 不同之处在于，如果您使用 object 并尝试访问 object 的某些成员，这将是编译时错误（因为 object 没有此成员）。为了工作，您需要知道类型是什么并进行转换。 使用动态您可以访问任何成员 - 没有编译时错误。如果该成员在运行时不存在，则将是运行时错误。例如，如果您知道您的异质对象都具有相同的成员，那么这就是要走的路。 但是，如果是这种情况，还有另一个更清晰的解决方案：您可以使用此成员定义一个接口，然后使您的所有异类对象都实现它，并且您的列表可以是List<iyourinterface>. 请记住，动态的性能可能会稍差，因为动态类型解析。 于 2012-04-30T07:33:26.330 回答 Related 2 javascript - 任意重新排序和排序对象文字的javascript数组 1 android - 重置 Wi-Fi 连接后，Android 套接字行为异常 1 python - 我可以用 np.array 中的值替换文本文件中的值（空格分隔）的列吗 2 algorithm - 在MATLAB中查找具有公共重叠区域的多个圆 1 php - 在 localhost 上执行二进制文件 1 javascript - 如何在给定的地图投影中执行 d3.svg.arc？ 1 sql - 循环遍历表 A 并使用 PL/SQL 更新表 B 列 C 5 html - 为边缘设置 CSS 边框颜色 1 wpf - 如何在 CWnd 中调整 WPF 控件的大小？ 1 java - Java setReadTimeout() 不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10379968
> 
> 赞同：21
> 
> 时间：
> 
> 标签：c#, asp.net

I need to create a heterogeneous `List` of objects (custom classes). My first thought was to create a `List<ISomeMarkerInterface>` but I quickly learned that this is not what I want. My next thought was `List<dynamic>` and this didn't seem to be a bad idea. However, I was doing some research and came across this [article about boxing and unboxing](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx) and in the example, they're doing basically what I want using `List<Object>`.

Aside from the fact that `dynamic` will be evaluated at runtime and `Object` at compile-time, what is the difference between `List<dynamic>` and `List<Object>`? Aren't they essentially the same thing?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-30T08:14:41.257

There are 3 "general" types (although not all are real types) in C#: object, var and dynamic.

**Object**

An actual type, like any other type, with one special rule: if a type doesn't inherit, it inherits from *object*. From this, it follows that *all* types inherit from *object*, directly or indirectly.

Emphasis: **object is a type**. An object can be of type *object*, and the type has its methods, like ToString(). Since everything inherits from *object*, everything can be upcast into *object*. When you assign an object to an *object* reference, you are doing upcasting just like when you assign an *Elephant* type object to an *Animal* reference where *Elephant* inherits from *Animal*.

```
SomeType x = new SomeType();
object obj = x;
obj.DoSomething(); 
```

*   *obj* is treated as being of type *object* at compile time, and will be of type *object* at runtime (which is logical, since it is an actual type - *obj* is declared as *object* so can only be of that type)
*   *obj.DoSomething()* will cause a compile-time error, as *object* does not have this method, regardless of whether SomeType has it.

**Var**

This is not an actual type, it is merely shorthand for "compiler, figure out the type for me based on the right side of the assignment".

```
SomeType x = new SomeType();
var obj = x;
obj.DoSomething(); 
```

*   *obj* is treated as being of type *SomeType* at compile time, and will be of type *SomeType* at runtime, just as if you had written "SomeType" instead of "var".
*   if *SomeType* has a method *DoSomething()*, this code will work
*   if *SomeType* doesn't have the method, the code will cause a compile-time error

**Dynamic**

This is a type that tells the compiler to disable compile-time type checking on the variable. An object is treated as having the type *dynamic* at compile-time and run-time.

```
SomeType x = new SomeType();
dynamic obj = x;
obj.DoSomething(); 
```

*   obj is of type *dynamic* at compile and run time
*   if *SomeType* has a method *DoSomething()*, this code will work
*   if *SomeType* doesn't have the method, the code will compile, but throw an exception at run-time
*   note that *dynamic* can cause exceptions very easily if used carelessly:

    ```
    public void f(dynamic x)
    { 
        x.DoSomething();
    } 
    ```

This will throw an exception if *x* is of a type that doesn't have the *DoSomething* method, but it will still be possible to call it and pass any object as the parameter without a compile-time error, causing an error that only shows itself at run-time, and possibly only in specific circumstances - a potential bug. So if you use dynamic in any kind of public interface of a class, you should always manually type-check at runtime using reflection, carefully deal with exceptions, or not do it in the first place.

Note: the object being referred to never changes its type, of course. While *obj* may be *object*, the *x* that it refers to is still *SomeType*.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:33:26.330

不同之处在于，如果您使用 object 并尝试访问 object 的某些成员，这将是编译时错误（因为 object 没有此成员）。为了工作，您需要知道类型是什么并进行转换。

使用动态您可以访问任何成员 - 没有编译时错误。如果该成员在运行时不存在，则将是运行时错误。例如，如果您知道您的异质对象都具有相同的成员，那么这就是要走的路。

但是，如果是这种情况，还有另一个更清晰的解决方案：您可以使用此成员定义一个接口，然后使您的所有异类对象都实现它，并且您的列表可以是`List<IYourInterface>`.

请记住，动态的性能可能会稍差，因为动态类型解析。</iyourinterface></iyourinterface></dynamic></dynamic></isomemarkerinterface></isomemarkerinterface>

# magento - mageintern 商店登录扩展 magento 问题

> ID：10379974
> 
> 赞同：0
> 
> 时间：2012-04-30T07:27:22.417
> 
> 标签：magento

我正在使用 mageintern 商店登录 magento 扩展。只是我已经安装了它，从管理员启用它，也可以在前端看到，但它的 css 在哪里。有什么建议吗？？

任何帮助将不胜感激。请指导我。

谢谢

JS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T08:46:05.743

其作品 ！我在 shoplogin_page.phtml 中更改了 33 行号

```
<link rel="stylesheet" type="text/css" href="<?php echo($this->getSkinUrl('css/shoplogin.css')) ?>" media="all" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T06:21:01.777

这个对我有用

相同的变化

```
<link rel="stylesheet" type="text/css" href="<?php 

echo($this->getSkinUrl('css/shoplogin.css')) ?>" media="all" /> 
```

# c++ - C++ - lambda 表达式、捕获子句和类成员

> ID：10379976
> 
> 赞同：8
> 
> 时间：2012-04-30T07:27:29.440
> 
> 标签：c++, lambda, parallel-processing, ppl

我正在使用 PPL 和 parallel_for 语法来创建一个 for 循环。在捕获子句中，我有 3 个变量，其中一个是类成员。由于在捕获子句中的变量中存在类成员，导致编译错误。但是，如果我在 lambda 主体中有这个类成员，它也不会编译，并且错误声明是封闭范围内的变量应该在捕获子句中。如何进行？我应该事先将变量成员复制到局部变量中，并将其传递到捕获子句中吗？

这是代码，其中 formulaCommand 是类成员。

```
parallel_for (m_rowStart,m_rowEnd+1,[&functionEvaluation,varModel_,formulaCommand](int i)
    {       
            MLEquationVariableModel  model_(varModel_);
            model_.addVariable("i", i);
            model_.addVariable("j", 1);
            MLEquationCommand* command_ = formulaCommand->duplicate(&model_);
            double d = command_->execute().toDouble();
            if(d==NO_VALUE)
            {
                functionEvaluation.local()  = NO_VALUE;
            }
            else
            {
                functionEvaluation.local() += d;
            }
            delete command_;
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T07:30:18.107

您需要捕获`this`才能访问成员变量（记住，`formulaCommand`它相当于`this->formulaCommand`）。

```
[&functionEvaluation, varModel_, this](int i) { ... } 
```

（顺便说一句，您可能应该使用智能指针（`unique_ptr<MLEquationCommand>`）而不是手动`delete`输入原始指针`command_`。）

# java - 如何将操作类的数据检索到其生成的 jsp 页面

> ID：10379981
> 
> 赞同：0
> 
> 时间：2012-04-30T07:27:56.130
> 
> 标签：java, jakarta-ee, struts2

我们在 Java Web 应用程序中使用 Struts2。有一个成员表（列名，phoneno.etc.），它使用映射表成员地址（旧代码，没有机会更改成员表以添加列）映射到地址表（列街道，城市，邮政编码，国家）其中的地址并删除地址表）。

当用户想要编辑会员资料时，他点击设置，这会将他引导到操作类的 execute() 方法。正在获取具有登录成员 ID 的地址对象。类似于下面的代码。

```
protected String execute() throws Exception {

    Member loginMember = memberDAO.getLoggedInMember();
    memberId = loginMember.getId();
    if (StringUtils.isNotBlank(memberId)) {
        loginMember = memberDAO.getById(memberId);
        Memberaddress memberAddress =   
                      memberAddressDAO.getByMemberId(loginMember.getId());
        Address newAddress = null;
        if (memberAddress != null && memberAddress.getId() != null) {
            newAddress = addressDAO.getById(memberAddress.getId().getAddressid());
        } else {
            newAddress = new Address();
        }
    }
    return SUCCESS;
} 
```

如果结果是 Success，它会定向到其结果页面 memberprofile.jsp，其中包含输入表单字段。在这里，我想显示现有的配置文件详细信息，包括地址对象实例变量，即街道、城市、邮政编码。我应该如何在 jsp 页面中获取成员对象和地址对象。我在尝试

```
<s:set var="address" value="newaddress"/> 
```

并像这样在 jsp 的输入名称字段中输入其数据。

```
<input id="addressStreet" type="text"    
 value="<s:property value="#address.addressstreet" escape="false"/>"/> 
```

但我在萤火虫中得到了 value="" 。我在检索输出时做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:00:56.380

使用下面的代码

```
<s:property value="#request.address.addressstreet"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T09:50:51.040

Struts2 将使您的生活变得轻松，它会负责将您的对象从动作转移到 ValuStack 以及您需要使用的所有东西以`OGNL`从 Value-stack 中获取值。

我相信您想将数据放在`newAddress`对象中，并希望在受尊重的`JSP`. 您只需要使用 getter 和 setter 在您的操作类中定义属性，然后让 S2 填充对象并将其传输到您的 valuestack。

您只需要`newAddress`使用 OGNL 访问 ValueStack 中的对象的属性，例如

```
<s:property name="addressStreet"/> 
```

当成功结果从您的操作类发回时，S2 将放置`newAddress`在值堆栈的顶部，我们有 OGNL 访问它们。

# c++ - 按引用返回与按值返回。C++

> ID：10379988
> 
> 赞同：0
> 
> 时间：2012-04-30T07:28:26.063
> 
> 标签：c++, visual-c++

如果您不通过引用返回某个函数的内容，在什么情况下会产生错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:45:28.337

**如果您不通过引用返回某个函数的内容，在什么情况下会产生错误？**

将答案限制为确切询问的内容，
每当您希望函数的返回值充当左值并且您不通过引用返回时，它将产生错误。

更常见的示例是重载`operator []`（数组订阅运算符），您必须通过引用返回才能使用`[]`lhs 或更正确地将其用作左值。

**[一个例子](http://ideone.com/mVYb8)**：

```
class Myclass 
{ 
     int i;
     public:
     /*Not returned by reference- gives error*/
     int operator[](int idx){ return i;}

     /*Returned by reference- gives no error*/
     //int& operator[](int idx){ return i;}
};

int main()
{
   Myclass  obj;
   obj[1]= 10;
   return 0;
} 
```

**输出：**

> prog.cpp：在函数'int main（）'中：
> prog.cpp：16：错误：左值需要作为赋值的左操作数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T07:40:47.597

默认操作应该是按值返回。您想要返回引用的主要情况是当您想要公开较大对象的某些“部分”时；例如向量或地图中的元素。重要的是，引用的对象必须具有超出调用函数的生命周期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T07:29:45.003

问题应该是什么时候通过引用返回是不安全的。每当您通过引用将局部变量返回给方法时，您都在调用未定义的行为。

当您没有正确实现复制构造函数时，按值返回是不安全的。

如果复制构造函数被声明为私有并且您尝试按值返回，则会出现错误。

# php - PHP 正则表达式返回值为空的数组

> ID：10379990
> 
> 赞同：0
> 
> 时间：2012-04-30T07:28:33.820
> 
> 标签：php, regex

所以我正在阅读一堆 PHP 文件，试图找到函数调用的每个准确度，

我正在寻找的功能是`".lng("something")." OR '.lng('something').'`

我正在使用以下功能进行搜索

```
function fetchAllBetween($needle1,$needle2,$haystack,$include=false){

        $matches = array();

        $exp = "|{$needle1}(.*){$needle2}|U";
        //exit($exp);
        preg_match_all($exp,$haystack,$matches);

        $i = ($include == true) ? 0 : 1 ;

        return $matches[$i];

    } 
```

所以我像这样运行它

```
$tmp2 = fetchAllBetween("lng('","')", $theData);
    print_r($tmp2); 
```

这将返回空数组，但是如果我尝试运行以下

```
$tmp2 = fetchAllBetween("lng",".", $theData); 
```

它返回一个值为空的数组...任何人都可以帮我解决这个问题吗？基本上我正在尝试检索在一堆文件中传递给 lng() 函数的参数..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:36:53.333

这个正则表达式会做

```
preg_match_all('#\.lng\(([\'"])(.*?)(?:\1)\)#', $str, $matches); 
```

[http://ideone.com/IQCzX](http://ideone.com/IQCzX)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T07:37:42.240

您得到的表达式是`lng(('".*"'))`，您需要更改几件事。尝试使用这个：

```
$tmp2 = fetchAllBetween("\.lng\(['\"]","[\"']\)\.", $theData);
    print_r($tmp2); 
```

注意事项：

*   我添加了`.`（并逃脱了它）
*   我已经逃脱了括号
*   I've put the single *and* double quotes in a character class so it will match either (and escaped the double for the PHP string)