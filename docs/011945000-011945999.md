# StackOverflow 问答 11945000-11945999

# android - 如何在图形布局编辑器中选择 FrameLayout 的视图？

> ID：11945005
> 
> 赞同：0
> 
> 时间：2012-08-14T02:31:18.400
> 
> 标签：android, android-layout, adt, android-framelayout, graphical-layout-editor

我有一个`FrameLayout`包含两个`RelativeLayouts`. 当我尝试在 ADT 中使用图形布局选项卡时，只有第二个中的两个 ImageView`RelativeLayout`是可选的。布局如下所示：

```
<FrameLayout>
    <RelativeLayout>

        <ScrollView>
            <TextView/>
        </ScrollView>

        <ImageView/>

        <ScrollView>
            <TextView/>
        </ScrollView>
    </RelativeLayout>

    <RelativeLayout>
        <ImageView/>

        <ImageView/>
    </RelativeLayout>
</FrameLayout> 
```

无论我在哪里单击，它都会选择整个第二个`RelativeLayout`本身，并且不能单击第一个中的任何单个视图`RelativeLayout`。

有没有办法循环浏览视图/布局，以便我可以编辑我在屏幕上看到的内容？或者这是编辑器的错误/限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:50:21.380

一种非常笨拙的方法是：

1.  切换到文本编辑器选项卡。

2.  在要编辑的视图 XML 中移动光标。

3.  切换回图形编辑器并选择元素。

# process - 从处理器的自旋循环

> ID：11945006
> 
> 赞同：0
> 
> 时间：2012-08-14T02:31:28.737
> 
> 标签：process, processor

在我的系统中，我有一个主处理器和一个从处理器。从属处理器在启动时继续循环返回自循环（单次跳转到自身指令）。从属处理器以这种方式运行是否正常？可以做些什么来使处理器脱离这种状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:34:43.140

可以使用中断来执行此操作。它可用于将从机重定向到独立于正常执行流程的 ISR（中断服务程序）。

另一个示例可能是主处理器更改跳转指令以将从属处理器发送到完全不同的地方。*如果您的硬件足够复杂（例如，在完全不同*的 ROM中切换库），甚至可以在 ROM 中完成此操作。

这是几种方式，可能还有几十种方式。如果不是偷偷摸摸，工程师就什么都不是:-)

# java - Java 在特定时间间隔内可以执行多少个循环？用于确定遗传算法效率

> ID：11945008
> 
> 赞同：1
> 
> 时间：2012-08-14T02:31:30.367
> 
> 标签：java, genetic-algorithm

我认为不同的机器对此有不同的答案，让我假设这个测试是在同一台机器上进行的。

实际上我在想是否值得对我的一个问题实施遗传算法，我认为它具有大约 20 的组合/排列！（！是factoria，它不是真正的20，它可能或多或少）。

如果数量在允许的范围内，我将使用遗传算法的蛮力（循环遍历所有可能）插入，因为设计 GA 和可能性因子（交叉，突变率）并不容易。

我将如何确定 GA 是否适合问题域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:08:09.953

好问题。没有准确的答案，这取决于一些“经验法则”和一些逻辑。

我的建议：

*   计算一下**详尽的搜索需要多长时间**。这相对简单，因此值得预先估计。如果搜索空间很大（并且 20！可能足够大......），那么详尽的搜索可能是不切实际的 - 例如，如果每个解决方案只需要 1 毫秒来评估，那么做 20！仍将花费你 7700 万年。即使运行 1000 个内核的并行搜索也需要 7.7 万年。
*   请记住，**GA 通常不会找到最佳解决方案**——它们通常会在复杂问题中收敛到“局部最小值”。您需要确定这对于您的需求是否“足够好”（通常是这样）。
*   考虑到**当评估函数的计算量很大时**（例如，您必须运行一个小型模拟来评估每个解决方案），GA 会相对更好。这是因为昂贵的评估使得 GA 算法本身的开销基本上无关紧要，而且它是值得的，因为它避免了在搜索空间中对大量不适合的解决方案进行评估。
*   正如您所指出**的，GA 的设置和微调非常棘手**- 特别是选择良好的基因型表示和交叉/突变运算符通常会对您的算法的有效性产生巨大影响。您还需要注意如何保持人口的多样性，每一代人的规模有多大等等。这本身就是一个公平的项目，让 GA 运行良好 - 涉及很多“黑魔法”，你只会学习经验。

当然，很可能穷举搜索和 GA 都不适合您的问题。有些问题可以通过其他方法更好地解决，如果你能找到一个使用动态规划或分而治之的智能算法来解决你的特定问题，那么你可能会发现你 7700 万年的穷举搜索实际上可以在一毫秒。**一旦问题变得足够大，更好的算法总是会击败原始计算能力**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:37:15.387

我认为您应该调查 Hadooping 或并行化您的解决方案。GA 似乎非常适合这种方法。

像这个：

[http://geneticalgorithms.ai-depot.com/Libraries.html](http://geneticalgorithms.ai-depot.com/Libraries.html)

这对我来说比担心你原来的问题更有意义。答案是毫无意义的，因为对您而言唯一重要的衡量标准是循环可以多快处理包含您的代码的主体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T02:54:33.163

20！是一个很大的数字。

执行 1 次代码迭代需要多长时间？

您可以简单地使用这个整数增量来计算循环数（甚至使用像手表秒针这样的粗略计时器并在间隔结束时读取总数）。

x=1；do while x!=0 x=x+1 循环

但是您的代码不会这么简单，处理每个循环需要更长的时间，而且这不考虑硬件的处理器速度（这是您主要关心的问题）。像达菲莫所说的那样，有一些环境因素使这个问题变得毫无意义。

祝你好运找到你需要的东西。

# java - 在 Tomcat 中读出传入的证书

> ID：11945013
> 
> 赞同：13
> 
> 时间：2012-08-14T02:32:21.113
> 
> 标签：java, tomcat, ssl, certificate, ssl-client-authentication

我使用带有客户端身份验证的 tomcat http 连接器。如果客户端启动到我的服务器的新连接并发送他的证书，我可以获取证书并从我的 java 代码中的传入证书中读取公用名。如果是，如何？

谢谢阿迪

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T11:37:46.460

`javax.servlet.request.X509Certificate`您可以通过获取`HttpServletRequest`. 这是一个[`X509Certificate`s](http://docs.oracle.com/javase/7/docs/api/java/security/cert/X509Certificate.html)数组，其中第一个（位置 0）是实际的客户端证书（如果需要中间 CA 证书，则链的其余部分可能存在）。

```
X509Certificate certs[] = 
    (X509Certificate[])req.getAttribute("javax.servlet.request.X509Certificate");
// ... Test if non-null, non-empty.

X509Certificate clientCert = certs[0];

// Get the Subject DN's X500Principal
X500Principal subjectDN = clientCert.getSubjectX500Principal(); 
```

然后，您可以在此主体（例如 CN）中获取各种 RDN（相对专有名称），如[本答案](https://stackoverflow.com/a/7634755/372643)中所述：

```
import javax.naming.ldap.LdapName;
import javax.naming.ldap.Rdn;

String dn = subjectDN.getName();
LdapName ldapDN = new LdapName(dn);
for(Rdn rdn: ldapDN.getRdns()) {
    System.out.println(rdn.getType() + " -> " + rdn.getValue());
} 
```

（您也可以使用 BouncyCastle`X509Name`获取每个 RDN。）

在 X.509 证书中，Subject DN 是 RDN 的有序序列，每个 RDN 都是一组 AVA（属性值断言），例如`CN=...`或`O=...`。原则上，每个 RDN 可以有多个 AVA，这会在这里引起问题，但这种情况非常罕见。您几乎可以假设每个 RDN 只有一个 AVA。（也许[这个答案](https://stackoverflow.com/a/3196955/372643)可能很有趣。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:53:15.030

归功于 mazaneicha：

```
 String cipherSuite = (String) req.getAttribute("javax.servlet.request.cipher_suite");

        if (cipherSuite != null) {
            X509Certificate certChain[] = (X509Certificate[]) req.getAttribute("javax.servlet.request.X509Certificate");
            if (certChain != null) {
                for (int i = 0; i < certChaNin.length; i++) {
                    System.out.println ("Client Certificate [" + i + "] = "
                            + certChain[i].toString());
                }
            }
        } 
```

# ruby-on-rails - Time.zone & in_time_zone 在视图中显示错误的时间

> ID：11945017
> 
> 赞同：0
> 
> 时间：2012-08-14T02:32:42.563
> 
> 标签：ruby-on-rails, ruby, time

因此，当我设置 Time.zone 时，我从视图中的日期得到了一些不一致的结果。我希望有人能告诉我发生了什么。我在 ubuntu 服务器 12.04 上运行了 ruby​​ on rails 应用程序

在我的应用程序控制器中，我有一个 before_filter 设置来自 current_user 公司的 time_zone 记录的 Time.zone。

```
before_filter :set_user_time_zone

private

def set_user_time_zone
  Time.zone = current_user.company.time_zone if user_signed_in?
end 
```

我正在测试的用户位于“中部时间（美国和加拿大）”

原始数据库记录是 2012-08-13 20:10:54

在我看来，我使用以下代码来格式化日期：

```
servicedata.service_last_run_time.strftime('%b %e, %Y %l:%M%P') 
```

我希望返回“2012 年 8 月 13 日晚上 8:10”，这将是“中部时间（美国和加拿大）”的上述记录，但是我得到“2012 年 8 月 13 日上午 9:10”

我在 Rails 控制台中测试了相同的代码，它工作正常。我不确定为什么它不起作用。

在我找到 before_filter 的想法之前，我只是在我的所有视图中链接了“in_time_zone”，但得到了相同的结果。例子

```
servicedata.service_last_run_time.in_time_zone(current_user.company.time_zone).strftime('%b %e, %Y %l:%M%P') 
```

同样 Time.zone 或手动将 in_time_zone 链接到日期对象在 Rails 控制台中工作正常，但在视图中返回一个可怕的错误时间。

我测试了服务器是时候确保它们与以下 UTC 保持不变：

```
Rails Console : 2012-08-14 02:06:29 +0000
Ubuntu Shell: Tue Aug 14 02:06:38 UTC 2012 
```

我不知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:31:56.967

你想使用 I18n.localize - 请参阅[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)，特别是 - [http://guides.rubyonrails.org/i18n.html#adding-date-time-formats](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)

在 config/locals/en.yml 中已经有一些可以使用的内置格式，你也可以添加自己的，所以你可以这样做

```
<%= I18n.localize(servicedata.service_last_run_time, :format => :long) %> 
```

您可以在配置中添加自己的，只需使用格式为 arg 的新定义的键

```
<%= I18n.localize(servicedata.service_last_run_time, :format => :my_super_special_format) %> 
```

请注意，您可以编写这 4 种不同的方式，当您在 Rails 视图中时，它们都是相同的

```
<%= I18n.localize(servicedata.service_last_run_time, :format => :long) %>
<%= I18n.l(servicedata.service_last_run_time, :format => :long) %>
<%= localize(servicedata.service_last_run_time, :format => :long) %>
<%= l(servicedata.service_last_run_time, :format => :long) %> 
```

如果 datetime 值为 nil，它将抛出异常（不幸），因此如果 nil 有效，则添加一些条件

```
<%= localize(servicedata.service_last_run_time, :format => :long) if servicedata.service_last_run_time %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:45:35.393

我弄清楚出了什么问题。这不是我在 time_zone 中显示日期的方法

我不知道我试图显示的记录来自计算机报告，当该计算机报告时，它会抓取机器的当前时区。

所以我试图花时间在中央并再次转换它。哎呀。

# c - Ruby C 扩展，如何从分段错误中恢复

> ID：11945020
> 
> 赞同：2
> 
> 时间：2012-08-14T02:33:56.467
> 
> 标签：c, ruby, ruby-c-extension

我写了一个简单的 Ruby C 扩展。一个方法期望第二个参数是一个字符串值。

```
VALUE method_foo(VALUE self, VALUE key) {

  puts(RSTRING(key)->ptr);

  return key;
} 
```

通过传递整数而不是字符串很容易导致分段错误。我应该如何检测到这一点并在 C 方法中防止或恢复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:43:28.720

您应该考虑调用`Check_Type (key, T_STRING)`（如果您想引发异常）或使用`TYPE (key)`手动检查它（如果您想做除了引发异常之外的*其他事情）。*

或者，您可以简单地声明`method_foo`需要一个字符串并将其留给调用者处理。毕竟，你的 API 是调用者和被调用者之间的契约，如果调用者违反规则，它是对崩溃的完全有效的响应。

我可能不会那样做，因为我更喜欢健壮的软件，但有一种观点认为人们不应该总是受到保护，以免自己愚蠢。它只会鼓励他们保持愚蠢:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T13:06:51.860

StringValuePtr(value) 和 StringValueCStr(value) 进行类型检查并返回字符串指针。AFAIK，它们是从 C 扩展中的 Ruby 字符串中提取 char* 的公认方法。其中（据我记得当我查看它时），它们都确保返回的值不是 NULL（在某些情况下可能是），并且 StringValueCStr 还确保它是一个以 0 结尾的字符串。由于 Ruby 字符串使用写时复制，因此字符串的一部分可能不是以 0 结尾的。

# ios - iPhone 可达类

> ID：11945024
> 
> 赞同：2
> 
> 时间：2012-08-14T02:34:27.183
> 
> 标签：ios, automatic-ref-counting, reachability

我添加了两个文件 Reachability.h/m。我遇到的问题出在 ReachabilityCallback 方法中

```
NSCAssert([(NSObject*) info isKindOfClass: [Reachability class]], @"info was wrong class in ReachabilityCallback"); 
```

错误消息是：C 指针类型 'void *' 到 Objective-C 指针类型 'NSObject * 的转换需要桥接转换

```
NSAutoreleasePool* myPool = [[NSAutoreleasePool alloc] init]; 
```

错误：“NSAutoreleasePool”不可用：在自动引用计数模式下不可用

```
SCNetworkReachabilityContext    context = {0, self, NULL, NULL, NULL}; 
```

错误：ARC 不允许将 Object-C 指针隐式转换为“void *”

有一堆 ARC 禁止发送“release”/“autorelease”的显式消息。

是否有适用于 ARC 的代码版本？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T13:05:07.643

尝试这个

```
NSCAssert([(__bridge NSObject*) info isKindOfClass: [Reachability class]], @"info was wrong class in ReachabilityCallback"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:38:04.753

试试 tonymillion 的[Reachability](https://github.com/tonymillion/Reachability#readme)类，它们与 ARC 和 GCD 兼容。

# java - FreeMarker 标头和分页符

> ID：11945026
> 
> 赞同：0
> 
> 时间：2012-08-14T02:34:45.827
> 
> 标签：java, freemarker

我正在使用 Free Marker API 进行文本报告，我需要准备带有分页符的报告。需要任何样品。示例报告标题如下，如何实现第 1 页，共 2 页。

GP2602P 报告运行日期：08/16/2012 04:50:13 第 1 页，共 3 页 GPP GTB 仪表板报告日期：08/16/2012 04:50:13

# asp.net - 如何以漏斗状排列一堆 DIV 标签？

> ID：11945027
> 
> 赞同：0
> 
> 时间：2012-08-14T02:35:26.167
> 
> 标签：asp.net, css, html

我正在开发一个 asp.net Web 应用程序。

我有一堆 DIV 标签..其中又包含链接按钮。

我想以 Tunerl 形式显示这些...如下所示。

有人可以建议我一个很好的方法。

**我需要这些动态**

```
 |            |
   |            |
   \           /
    \         /
      \      /
       \    /
        |   | 
```

我可以使用多边形作为容器吗？

我的意思是定义一个多边形……并根据可用的 div 标签将空间划分为多边形……并用 DIV 标签填充多边形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:51:35.647

网站是建立在[盒子模型](http://www.w3.org/TR/CSS2/box.html)上的，所以如果你正在寻找一个“多边形形状的 div”是不可能的。如果您希望`div`标签位于外部，则可以每次都在具有较短宽度容器的各行 div 上使用`float: left;`和。`float: right;`如果您希望`div`标签本身是漏斗形状，那么您只需为每一行设置一个 div，并且随着它们在页面下方的移动而改变宽度。

# php - PHP fread 完成后显示弹出窗口

> ID：11945028
> 
> 赞同：0
> 
> 时间：2012-08-14T02:35:28.677
> 
> 标签：php, javascript, fwrite, fread, fsockopen

我想发出一个弹出窗口或其他东西来提醒用户在第一个动作完成后执行第二个动作。第一个动作是

```
fwrite($fp, $str);
$read = fread($fp, 16);
$read = explode(";", $read);
if ($read[0] != "OK") {
    echo "Write Error";
    fclose($fp);
} else {
    $send = substr($str, 3);
    verification($send, $fp);
} 
```

第二个动作是`verification()`。

在 之前`verification()`，我想做一些提醒用户第一个动作已经完成的东西。弹出窗口或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:47:10.937

可以编写一个 javascript 警报：

```
<script>window.alert('insert reminder here');</script> 
```

之后，使用 php 的`flush()`命令将直到该点的所有内容输出到浏览器，但在完成 if 语句之前您可能很难做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:58:33.117

您不能在 PHP、html 中使用 javascript，并且 javascript 将在 php 脚本被解释后运行。要执行您想要的操作，您必须将验证（）放在另一个页面中，在您的第一个操作后发出警报，然后重定向到另一个执行验证（）的页面。

# html - HTML页面错误

> ID：11945030
> 
> 赞同：0
> 
> 时间：2012-08-14T02:35:45.373
> 
> 标签：html

我有这个页面的问题。标题后面的区域（它说 Hello！）应该是 #33333（灰色）而不是绿色。我知道这将是一件非常简单的事情。有什么帮助吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<LINK REL="icon" HREF="favicon.ico" TYPE="image/x-icon">
<LINK REL="shortcut icon" HREF="favicon.ico" TYPE="image/x-icon"> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Unavit</title>
<style type="text/css"></style>
<link href="css/layout.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="css/css.css" type="text/css">
<!--[if lt IE 8]><link rel="stylesheet" type="text/css" href="css/early_ie.css" /><![endif]-->
<style type="text/css">

</style>
</head>
<body>
<div id="mapsHeader">
        <div id="mapsBanner"></div>
</div>
<div id="mapsContent">
    <div id="mapsBodyArea">
      Hello!
    </div>
</div>
<div id="footer">
    <div id="container">
        <div id="bottomNav">
            <table width="1029"> 
                <tr> 
                    <td align ="center" width="87"><font color = "#333"><a href="index.html">HOME</a></font></td> 
                    <td>|</td>
                    <td align ="center" width="121"><font color = "#333"><a href="aboutus.html">ABOUT US</a></font></td> 
                    <td>|</td>
                    <td align ="center" width="99"><font color = "#333"><a href="joinus.html">JOIN US</a></font></td> 
                    <td>|</td>
                    <td align ="center" width="134"><font color = "#333"><a href="contact.html">CONTACT US</a></font></td> 
                    <td>|</td>
                    <td align ="center" width="61"><font color = "#333"><a href="faq.html">FAQ</a></font></td> 
                    <td>|</td>
                    <td align ="center" width="213"><font color = "#333"><a href="terms.html">PRIVACY & TERMS</a></font></td>
                    <td align ="center" width="175"><font color = "#333">&copy;Unavit 2012</font></td>
                    <td align ="center" width="48" height="50"><a href="http://twitter.com" target="_blank"><img src="images/tweet.png" width="50" height="50"/></a></td>
                    <td align ="center" width="51" height ="50"><a href="http://facebook.com" target="_blank"><img src="images/face.png" width="50" height="50"/></a></td>
                </tr>
            </table>       
        </div> 
    </div>
</div>
</body>
</html> 
```

这是CSS：

```
* {
    margin: 0px;
    padding: 0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 19px;
    color: #33333;
}
ol {
    margin:1em 0 1em 3em;
}
ul {
    list-style:disc;
    margin:1em 0 1em 3em;
}
li {
    margin:.3em 0
}
body {
    background-color: #9FCC3A;
    font-family: "Comic Sans MS", cursive;
}
a {
    text-decoration: none;
    color: #333;
}
a:link {
    text-decoration:none;
    color: #333;
}
a:hover{
    text-decoration:none;
    color: #333;
}
a:visited{
    text-decoration:none;
    color: #333;
}
a:active {
    text-decoration: none;
    color: #333;
}

#header {
    background-color: #33C0C5;
    height: 240px;
    overflow: hidden;
    width: 100%;
}

#mapsHeader {
    height: 67px;
    overflow: hidden;
    width: 100%;
}

#header #banner {
    width: 1028px;
    left: auto;
    right:auto;
    margin-right: auto;
    margin-left: auto;
}

#mapsHeader #mapsBanner {
    width: 100%;
    height: 67px;
    left: auto;
    right: auto;
    margin-right: auto;
    margin-left: auto;
    background-image: url(../images/mapsBanner.png);
    background-repeat: repeat-x;
}
#mapsContent {
    width: 100%;
    height: auto;
    background-color: #33333;
    overflow: hidden;
}

#mapsContent #mapsBodyArea{
    width: 1028px;
    margin-right: auto;
    margin-left: auto;
}

#content {
    width: 100%;
    height: auto;
    background-color: #FFFFFF;
    overflow: hidden;
}

#content #bodyArea{
    width: 1028px;
    margin-right: auto;
    margin-left: auto;
}

#content #bodyArea #mapsRight {
    width: 773px;
    float: right;
}
#content #bodyArea #mapsLeft {
    width: 255px;
    float: left;
}

#content #bodyArea #leftJoin{
    width: 107px;
    float: left;
}

#content #bodyArea #rightJoin{
    width: 921px;
    float: right;
}

#content #bodyArea #mapBoxSpacer {
    height: 33px;
}

#content #bodyArea #mapBoxSpacer2 {
    height: 50px;
}

#content #bodyArea #spacer{
    height: 100px;
}

#content #bodyArea #smallSpacer {
    height: 15px;
    clear: both;
}

#content #bodyArea #spacer1{
    height: 50px;
}

#content #bodyArea #left {
    width: 586px;
    float: left;
}

#content #bodyArea #aboutTitle {
    width: 1028;
}

#content #bodyArea #leftAbout {
    width: 450px;
    float: left;
}

#content #bodyArea #rightAbout {
    width: 574px;
    float: left;
}

#content #bodyArea #left #nav {
    position: relative;
}
#img2 {
    position: absolute;
    left: 21px;
    top: 25px;
}
#img3 {
    position: absolute;
    left: 21px;
    top: 75px;
}
#img4 {
    position: absolute;
    left: 21px;
    top: 125px;
}
#img5 {
    position: absolute;
    left: 21px;
    top: 175px;
}
#img6 {
    position: absolute;
    left: 21px;
    top: 225px;
}
#navFont {
    font-size: 15pt;
    font-family: Arial, Helvetica, sans-serif;
}

#content #bodyArea #left #spacerLeft {
    height:15px;
}
#content #bodyArea #right {
    width: 442px;
    float: right;
}
#content #bodyArea #right #spacerRight {
    height: 10px;
}
#content #bodyArea #right #clear {
    width: 590px;
    clear: both;
}
#content #bodyArea #right #rightLeft {
    width: 295px;
    float: left;
}
#content #bodyArea #right #rightRight {
    width: 290px;
    float: right;
}
#content #bodyArea #right #rightRight #spacerRightRight {
    height: 10px;
}
#footer {
    background-color: #9FCC3A;
    width: 100%;
    overflow: hidden;
}

#footer #container {
    clear: both;
    width: 1028px;
    height: 50px;
    margin-right: auto;
    margin-left: auto;
}
#footer #container #bottomNav {
    width: 1028px;
    float: right;
    color: #333;
}
#footer #container #spacerFooter {
    width: 191 px;
    float: left;
}
#footer #container #clearFooter {
    clear:both;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:39:14.003

你的规则是：

```
#mapsContent {
    width: 100%;
    height: auto;
    background-color: #33333;
    overflow: hidden;
} 
```

什么时候应该

```
background-color: #333333; 
```

你差了一个三分。

# macos - 如何设置工具链以在 OS X 上为 beaglebone 编译？

> ID：11945031
> 
> 赞同：3
> 
> 时间：2012-08-14T02:35:57.760
> 
> 标签：macos, cross-compiling, beagleboard

我希望能够在我的 MacBook 上交叉编译 C 代码，目标是我的新 beaglebone 上的 ARM7a。有很多关于如何在 linux 中执行此操作的示例，但它们都需要尚未在 OS X 上设置的软件包。

所以，我想把一个工具链放在一起......如果我能弄清楚，那么我会发布它是如何完成的。

我不知道我需要编译和安装哪些包。我确定我需要一个用于手臂的 binutils，fink 似乎可以安装...我有 Xcode 和命令行工具，所以有 gcc。

有谁知道我还需要做什么才能完成这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:44:37.770

您将需要与 Linux 相同的软件包，但有时您似乎需要做额外的工作。我建议使用 macports，因为它有助于设置依赖项，并查看 Linux 示例中正在执行的操作。

# file-upload - GAS : 使用 HTML 服务上传文件

> ID：11945033
> 
> 赞同：1
> 
> 时间：2012-08-14T02:36:00.147
> 
> 标签：file-upload, google-apps-script

我正在构建我的第一个使用 Google Apps Script & HTMLService 的应用程序。我需要一个允许将文件上传到 Google 文档列表的表单。这是我当前的代码，它不起作用。

index.html ：此页面包含一个简单的表单（action="<=? action ?>"），其中包含一个输入文件（名称和 ID 等于 myFile）和提交按钮

代码.gs：

```
function doGet(e) {
var template = HtmlService.createTemplateFromFile(index.html');
template.action = ScriptApp.getService().getUrl();
return template.evaluate();
}

function doPost(e) {
var template = HtmlService.createTemplateFromFile('Thanks.html');
var f = DocsList.createFile(e.parameter.myFile);
return template.evaluate();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:42:06.523

文件不会以这种方式显示到 doPost。让我想想是否有一个好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:19:37.493

我刚刚阅读了文档 DocList.createFile(blob) 仅适用于 Google Apps 帐户：

> 方法 createFile(blobSource)
> 
> 在 DocsList 中创建具有给定名称和内容的文件。此方法仅适用于 Google Apps 帐户。

[https://developers.google.com/apps-script/class_docslist?hl=es-ES#createFile](https://developers.google.com/apps-script/class_docslist?hl=es-ES#createFile)

# php - 此 Ajax 可用于调试 (Firebug)，但并非没有它

> ID：11945037
> 
> 赞同：0
> 
> 时间：2012-08-14T02:37:10.690
> 
> 标签：php, javascript, jquery, ajax

当我在 Firebug 中调试代码时，它工作正常 - 它在我的数据库中插入记录并重定向到 URL。但它不起作用。`alert('error')`当我不使用调试器时，它给了我一个错误。为什么？`val`是一个序列化数组，

```
$('#target').submit(function() {
    if (validation == true) {
        $.ajax({
            type: "POST",
            url: "some url",
            dataType: "jsonp",
            data: val,
            success: function(data, textStatus) {
                alert('success');
            },
            error: function(data) {
                alert("error");
            }
        });
    }
    else {
        return false;
    }
});​

//PHP Code
$return['url']= "/index.php?action=jobSeeker/jobSeekerRegistrationConfirmation";
echo $_GET['callback']."(".json_encode($return).");"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:47:27.660

您说过，当这种行为正确时，您会将用户定向到新的 URL。如果是这种情况，这可能是您的表单提交并在您的 JS 成功调用有机会执行之前重定向到新页面的问题吗？

如果你改变

```
$('#target').submit(function() { 
```

至

```
$('#target').submit(function(e) {
    e.preventDefault(); 
```

您的 $.ajax 成功回调应该运行，然后您需要在 JS 的帮助下继续 URL 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:28:47.690

我觉得你的问题是这样的

您正在使用 发出`POST`请求`ajax`，但是在 php 中

```
echo $_GET['callback']."(".json_encode($return).");"; 
```

寻找 a `$_GET`，因此响应将不是有效`jsonp`的格式化响应。虽然执行将更新数据库。这就是出现错误的原因。重定向也将成功，因为它与 没有任何关系`ajax success`。

# javascript - Chrome 开发工具中的非活动断点

> ID：11945038
> 
> 赞同：1
> 
> 时间：2012-08-14T02:37:12.940
> 
> 标签：javascript, google-chrome, google-chrome-devtools

我开始使用 Google Chrome 开发工具，但有时断点会变为非活动状态，并且调试窗口的文件选项卡上会出现一个星号。有谁知道为什么？我想这是一种常见的行为，但我想知道如何避免这种情况。谢谢

![在此处输入图像描述](../Images/7f53fc3609bd2cc0a9e5fd4236bdb519.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:06:35.073

这是因为您在 Chrome 的检查器中编辑了 javascript 文件。

Chrome 允许您直接在浏览器中编辑 javascript，但是一旦您编辑了 javascript，您设置的断点将不会被命中，直到您保存编辑的文件 (ctrl-s)。

由于选项卡中名称旁边的星号，您可以看出您已经修改了文件。ie `on_cell_change.js*`-`*`文件被编辑的意思。

为避免发生这种情况，请不要在 javascript 源代码中输入内容。

# xcode - 在 Xcode 中逐个查看文件

> ID：11945040
> 
> 赞同：0
> 
> 时间：2012-08-14T02:37:27.667
> 
> 标签：xcode, text-editor

在 XCode 中，如何查看一个文件下方的另一个文件？目前我只能并排查看文件。相反，我只想查看 2 个文件，一个在另一个之下。我正在使用 Xcode 4.4.1 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:43:24.127

您可以在 View > Assistant Editor 菜单中更改 Xcode 编辑器的布局：

![Xcode 视图 > 助理编辑器菜单](../Images/aae5298c2d941fb9a124bf4f323e50df.png)

“底部的助理编辑”或“垂直堆叠的所有编辑”都会按照您想要的方式排列编辑。

# java - 检索 JPA 实体列表和元数据

> ID：11945041
> 
> 赞同：8
> 
> 时间：2012-08-14T02:37:29.023
> 
> 标签：java, hibernate, jpa, eclipselink

我想知道是否有一种方法可以获取 JPA 中特定持久单元的所有实体类及其元数据。

我所说的元数据不仅是指字段，还包括它们的列名、长度、精度、数据类型，还有表名和我能得到的任何东西。我尝试使用元模型，但我认为这仅适用于 JPQL 查询。

我需要能够向用户显示某个 PU 的所有活动实体，并且我不想将它们硬编码到某个数组或数据库中，我希望 API 告诉我它有哪些实体。而且，如果可能的话，获取每个实体的托管实例。

我想我可以尝试使用反射来获取带有 @Entity 注释的所有类，但这不会很漂亮，而且更难知道哪个属于特定的 PU，所以如果 api 已经公开了这个信息，那就是伟大的。

我更喜欢 JPA 兼容的解决方案，但如果不可能，Hibernate 或 EclipseLink 特定的答案可以做到。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T10:49:47.290

是的，您可以从中获取所有实体和有关实体的相应元数据信息`EntityManager`。

`EntityManager.getMetamodel()`将使`Metamodel`您可以访问您可以访问的界面`EntityType`并`ManagedType`获取实体的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:36:48.330

实体在定义时独立于任何持久性单元。它们在persistence.xml 的定义中与持久性单元相关联。为给定持久单元管理实体管理器的 EntityManagerFactory 似乎没有任何 API 来获取它管理的实体列表。Hibernate 的 SessionFactory，EntityManagerFactory 的对应物，确实具有获取类元数据的 API（[http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/SessionFactory.html](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/SessionFactory.html)）。

# jquery - HTML & CSS - 显示和隐藏 div

> ID：11945042
> 
> 赞同：-1
> 
> 时间：2012-08-14T02:37:34.927
> 
> 标签：jquery, css, html, show-hide

我有一个 id 为“切换”的 div。我只想有一个链接或按钮，按下时将显示 div，然后再次单击时隐藏 div。尽管我可能会犯错误，但我似乎无法让 jQuery 工作，但我更希望它像 jQuery 一样具有动画效果。那么我该怎么做呢？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T02:40:18.690

```
 $('#youAnchorId').click(function(e){ 
    e.preventDefault():
    $('#toggle').toggle(); //use .fadeToggle() if you want fade animation.
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:42:29.683

看看这个[演示](http://jsfiddle.net/Z5rCc/2/)。

这是JS：

```
$('button').click(function() {
    $('#redBox').fadeToggle();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T02:41:44.557

```
$('#toggleDiv').on('click', function () {
    e.preventDefault();
    $('#toggle').fadeToggle('slow');
    return false;
}); 
```

​jsFiddle [DEMO](http://jsfiddle.net/GmUHE/)

# android - Android - 如何获得 wifi SNR（信噪比）？

> ID：11945047
> 
> 赞同：2
> 
> 时间：2012-08-14T02:39:06.433
> 
> 标签：android, android-wifi

是否有任何 API 可以获取**android WiFi SNR**？从我目前的搜索来看，只有 CellNetwork 和 GPSSatellite SNR。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T18:09:21.560

这个问题的基本答案是您无法通过 Android API 获得它。您可以通过修改 Android 固件或连接到特定设备的驱动程序来为单个芯片执行此操作。但是，您应该知道大多数 wifi 卡*不报告*SNR！ [（链接..）](http://www.rigacci.org/wiki/doku.php/doc/appunti/linux/sa/wifi_signal_quality)因此，肯定无法通过Android SDK类获得SNR，即使您确实有能力修改固件也可能没有任何方法（出于所有实际目的，您没有）。我挖掘了所有 Android SDK 特定的`android.net.wifi`资源，但没有找到任何支持这一点的东西。

# asp.net - 成员资格提供程序产生意外的 SQL 错误

> ID：11945049
> 
> 赞同：0
> 
> 时间：2012-08-14T02:39:11.797
> 
> 标签：asp.net, impersonation, sqlmembershipprovider

在特定页面上调用 Membership.GetUser() 时出现以下错误（网站上的第一页这样做，因为我们实施了适当的安全控制）

System.Data.SqlClient.SqlException (0x80131904)：用户 'IIS APPPOOL\UAT SITE' 登录失败。在 .... 在 System.Web.Security.SqlMembershipProvider.GetUser(String username, Boolean userIsOnline) 在 System.Web.Security.Membership.GetUser(String username, Boolean userIsOnline)

该站点在 IIS Express 下运行良好，但 UAT 在 2008R2 的 IIS 7.5 下运行

网络配置

```
<authentication mode="Windows" />
    <identity impersonate="True" />
    <authorization>
      <deny users="?" />
      <allow users="*" />
    </authorization>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="DatabaseGTN" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="GTN" />
      </providers>
    </membership>
    <roleManager enabled="true">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="DatabaseGTN" applicationName="GTN" />
      </providers>
    </roleManager> 
```

在站点的“身份验证”节点下，仅启用了 ASP.NET 模拟和 Windows 身份验证。根据服务器管理器安装 Web 服务器 Windows 身份验证功能。

站点上的所有其他页面都使用相同的连接字符串引用完美地运行，审计日志表明正确的用户名 COMPANY\MyName 正在由 MS SQL 中的 SYSTEM_USER 返回，因此看起来每个其他 SQL 请求都在按预期进行模拟.

对于我可能忽略的配置选项的任何建议将不胜感激。

我应该更清楚地说明这一点。我不想添加额外的数据库用户或角色，而是想让模拟正常工作。或者我想能够告诉我的老板为什么不能这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:47:55.620

看到您的错误，我唯一能想到的就是确保将对您的数据库的访问权限添加到“IIS APPPOOL\UAT SITE”。

要检查这一点，只需打开 Sql Server 管理控制台并查看安全节点是否存在此用户。

比在该用户的属性中查看“用户映射”下的权限，以查看您的数据库的授权是否正常。

# python - 为什么在这种情况下我不能用'int'增加'IntegerProperty'？（TypeError：+ 不支持的操作数类型）

> ID：11945053
> 
> 赞同：2
> 
> 时间：2012-08-14T02:39:24.717
> 
> 标签：python, google-app-engine, datastore

我正在尝试修改优秀书籍 Programming Collective Intelligence 提供的朴素贝叶斯分类器的代码，使其适应 GAE 数据存储（提供的代码使用 pysqlite2）。但试图做到这一点，我在这一行遇到：

```
update.count = count + 1 
```

从这个块：

```
def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      fc_value = fc(feature = f, category = cat, count = 1)
      fc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM fc where feature =:feature AND category =:category", feature = f, category = cat).get()
        update.count = count + 1
        update.put()
#      self.con.execute(
 #       "update fc set count=%d where feature='%s' and category='%s'"
  #      % (count+1,f,cat)) 
```

这个错误：

```
 File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 221, in post
    sampletrain(nb)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 206, in sampletrain
    cl.train('Nobody owns the water.','good')
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 144, in train
    self.incf(f,cat)
  File "C:\Users\CG\Desktop\Google Drive\Sci&Tech\projects\naivebayes\main.py", line 82, in incf
    update.count = count + 1
TypeError: unsupported operand type(s) for +: 'IntegerProperty' and 'int' 
```

而且我不明白：为什么我不能`count`用 1 递增？

为什么`update = db.GqlQuery("SELECT count FROM cc where category =:category", category = cat).get() update.count = count + 1`是“IntegerProperty”而不是整数？

我该如何解决？`update.count = count + 1`执行此操作的正确语法是什么？

这里是整个代码：

```
import os

import random

import re

import math

from google.appengine.ext import db

import webapp2

import jinja2

from jinja2 import Environment, FileSystemLoader

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class fc(db.Model):
    feature = db.StringProperty()
    category = db.StringProperty()
    count = db.IntegerProperty()

class cc(db.Model):
    category = db.StringProperty()
    count = db.IntegerProperty()

def getfeatures(doc):
  splitter=re.compile('\\W*')
  # Split the words by non-alpha characters
  words=[s.lower() for s in splitter.split(doc)
          if len(s)>2 and len(s)<20]
  return dict([(w,1) for w in words])

class classifier:
  def __init__(self,getfeatures, filename=None):
    # Counts of feature/category combinations
    self.fc={}
    # Counts of documents in each category
    self.cc={}
    self.getfeatures=getfeatures

#  def setdb(self,dbfile):
#    self.con=sqlite.connect('db_file')
#    self.con=sqlite3.connect(":memory:")
#    self.con.execute('create table if not exists fc(feature,category,count)')
#    self.con.execute('create table if not exists cc(category,count)')

  def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      fc_value = fc(feature = f, category = cat, count = 1)
      fc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM fc where feature =:feature AND category =:category", feature = f, category = cat).get()
        update.count = count + 1
        update.put()
#      self.con.execute(
 #       "update fc set count=%d where feature='%s' and category='%s'"
  #      % (count+1,f,cat))

  def fcount(self,f,cat):
    res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
    logging.debug('This is a log message.')
#    res=self.con.execute(
#      'select count from fc where feature="%s" and category="%s"'
#      %(f,cat)).fetchone()
    if res is None: return 0
    else:
        res = fc.count
        return res
#        return float(res[0])

  def incc(self,cat):
    count=self.catcount(cat)
    if count==0:
      #  self.con.execute("insert into cc values ('%s',1)" % (cat))
      cc_value = cc(category = cat, count = 1)
      cc_value.put()
    else:
        update = db.GqlQuery("SELECT count FROM cc where category =:category", category = cat).get()
        update.count = count + 1
        update.put()
#      self.con.execute("update cc set count=%d where category='%s'"
#                       % (count+1,cat))

  def catcount(self,cat):
#    res=self.con.execute('select count from cc where category="%s"'
 #                        %(cat)).fetchone()
    res = db.GqlQuery("SELECT count FROM cc WHERE category =:category", category = cat).get()
    if res is None: return 0
#    else: return float(res[0])
    else: return float(res)

  def categories(self):
#    cur = self.con.execute('select category from cc');
    cur = db.GqlQuery("SELECT category FROM cc").fetch(999)
    return [d[0] for d in cur]

  def totalcount(self):
   # res=self.con.execute('select sum(count) from cc').fetchone();
    all_cc = db.GqlQuery("SELECT * FROM cc").fetch(999)
    res = 0
    for cc in all_cc:
        count = cc.count
        res+=count
#    res = db.GqlQuery("SELECT sum(count) FROM cc").get()
#    if res==None: return 0
    if res == 0: return 0
#    return res[0]
    return res

  def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features.keys():
##    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
#    self.con.commit()

  def fprob(self,f,cat):
    if self.catcount(cat)==0: return 0
    # The total number of times this feature appeared in this
    # category divided by the total number of items in this category
    return self.fcount(f,cat)/self.catcount(cat)

  def weightedprob(self,f,cat,prf,weight=1.0,ap=0.5):
    # Calculate current probability
    basicprob=prf(f,cat)
    # Count the number of times this feature has appeared in
    # all categories
    totals=sum([self.fcount(f,c) for c in self.categories()])

    # Calculate the weighted average
    bp=((weight*ap)+(totals*basicprob))/(weight+totals)
    return bp

class naivebayes(classifier):
  def __init__(self,getfeatures):
    classifier.__init__(self, getfeatures)
    self.thresholds={}

  def docprob(self,item,cat):
    features=self.getfeatures(item)
    # Multiply the probabilities of all the features together
    p=1
    for f in features: p*=self.weightedprob(f,cat,self.fprob)
    return p

  def prob(self,item,cat):
    catprob=self.catcount(cat)/self.totalcount()
    docprob=self.docprob(item,cat)
    return docprob*catprob

  def setthreshold(self,cat,t):
    self.thresholds[cat]=t

  def getthreshold(self,cat):
    if cat not in self.thresholds: return 1.0
    return self.thresholds[cat]

  def classify(self,item,default=None):
    probs={}
    # Find the category with the highest probability
    max=0.0
    for cat in self.categories():
      probs[cat]=self.prob(item,cat)
      if probs[cat]>max:
        max=probs[cat]
        best=cat
    # Make sure the probability exceeds threshold*next best
    for cat in probs:
      if cat==best: continue
      if probs[cat]*self.getthreshold(best)>probs[best]: return default
    return best

def sampletrain(cl):
  cl.train('Nobody owns the water.','good')
  cl.train('the quick rabbit jumps fences','good')
  cl.train('buy pharmaceuticals now','bad')
  cl.train('make quick money at the online casino','bad')
  cl.train('the quick brown fox jumps','good')

class MainHandler(webapp2.RequestHandler):
    def get(self):
        template_values = {"given_sentence":'put a name here'}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

    def post(self):
        nb = naivebayes(getfeatures)
        sampletrain(nb)
        given_sentence = self.request.get("given_sentence")
        spam_result = nb.classify(given_sentence)
        submit_button = self.request.get("submit_button")
        if submit_button:
            self.redirect('/test_result?spam_result=%s&given_sentence=%s' % (spam_result, given_sentence))

class test_resultHandler(webapp2.RequestHandler):
    def get(self):
        spam_result = self.request.get("spam_result")
        given_sentence = self.request.get("given_sentence")
        test_result_values = {"spam_result": spam_result,
                             "given_sentence": given_sentence}
        template = jinja_environment.get_template('test_result.html')
        self.response.out.write(template.render(test_result_values))

app = webapp2.WSGIApplication([('/', MainHandler), ('/test_result', test_resultHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:51:21.733

“属性”通常意味着在对象实例上访问，而不是在类上访问。尝试改变：

```
class fc(db.Model):
    feature = db.StringProperty()
    category = db.StringProperty()
    count = db.IntegerProperty() 
```

类似于：

```
class fc_class(db.Model):
    feature = db.StringProperty()
    category = db.StringProperty()
    count = db.IntegerProperty()
fc = fc_class() 
```

（并不是说这是一个很棒的设计，但我认为它会解决您遇到的问题 - 即属性对象仅在通过类实例而不是通过类本身访问时才会获得特殊行为。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:06:19.627

查看您的代码，似乎问题可能出在`res`作业中：

```
def fcount(self,f,cat):
  res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
  logging.debug('This is a log message.')
  if res is None: return 0
  else:
    res = fc.count
    return res 
```

据我所知，您正在分配一个 to 的未绑定方法`class fc`，`res`正如@Hamish 指出的那样，它确实是一个`IntegerProperty()`. 相反（同样，这里不是专业人士），您可能希望返回如下值：

```
def fcount(self,f,cat):
  res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
  logging.debug('This is a log message.')
  if res is None: return 0
  else:
    return res.count 
```

我相信这`res`已经是一个 Query 实例（这是您想要的），然后您可以拉取`count`属性以获取您想要的值。

# integration - 网络方法 6.5 调度程序在 IS 重新启动后丢失

> ID：11945057
> 
> 赞同：3
> 
> 时间：2012-08-14T02:40:18.897
> 
> 标签：integration, middleware, webmethods

我们的 Web 方法集成服务器存在问题，当我们每次执行重新启动时，调度程序要么已更改，要么已丢失。当我们比较IntegrationServer/config文件夹中的jobs.cnf文件时，每次重启前后，我们可以看到文件已经被改变了。处理这个问题的最佳方法是什么？Web 方法有没有什么可以让我们在不发生这种情况的情况下重新启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:06:45.323

我记得，几年前，我们遇到了同样的问题。我不记得我们是用补丁修复了它，还是在我们升级 webmethods 后它就停止了。6.5已经很老了。

# c# - Gtksharp 编程问题

> ID：11945063
> 
> 赞同：-1
> 
> 时间：2012-08-14T02:41:03.370
> 
> 标签：c#, linux, mono, gtk

我是 Gtk 编程的新手，我在 windows 上用 VS2010 编写了一个演示，并在 windows 7 x64 上顺利运行，但在尝试在 linux 上运行时遇到问题，我无法简要说明，所以我在这里粘贴错误：

```
lucid@lucid-desktop:~/Desktop/Debug$ mono NetLockAlert.EmbeddedUI.exe
mono: ../../src/xcb_io.c:249: process_responses: Assertion `(((long) (dpy-          >last_request_read) - (long) (dpy->request)) <= 0)' failed.
Stacktrace:

  at (wrapper managed-to-native) Gtk.Application.gtk_main () <0xffffffff>
  at Gtk.Application.Run () <0x0000b>
  at LionvilleSystems.NetLockAlert.EmbeddedUI.MainClass.Main (string[]) <0x00047>
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object     (object,intptr,intptr,intptr) <0xffffffff>

  Native stacktrace:

mono() [0x80e0124]
[0x9e1410]
/lib/tls/i686/cmov/libc.so.6(abort+0x182) [0x13da82]
/lib/tls/i686/cmov/libc.so.6(__assert_fail+0xf8) [0x133718]
/usr/lib/libX11.so.6(+0x41a8d) [0x305a8d]
/usr/lib/libX11.so.6(_XEventsQueued+0x56) [0x306356]
/usr/lib/libX11.so.6(XPending+0x68) [0x2eea68]
/usr/lib/libgdk-x11-2.0.so.0(+0x53909) [0xb3e909]
/lib/libglib-2.0.so.0(g_main_context_check+0x2c9) [0xda7799]
/lib/libglib-2.0.so.0(+0x3f0ce) [0xda80ce]
/lib/libglib-2.0.so.0(g_main_loop_run+0x187) [0xda8817]
/usr/lib/libgtk-x11-2.0.so.0(gtk_main+0xb9) [0x110e3d9]
[0xa375b0]
[0xa37574]
[0x28bd30]
[0x28bddf]
mono() [0x8062cf8]
mono(mono_runtime_invoke+0x40) [0x8144ad0]
mono(mono_runtime_exec_main+0xd6) [0x81487b6]
mono(mono_main+0x1845) [0x80bb445]
mono() [0x805944a]
/lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6) [0x126bd6]
mono() [0x8059291]

 Debug info from gdb:

  mono: ../../src/xcb_io.c:249: process_responses: Assertion `(((long) (dpy-   >last_request_read) - (long) (dpy->request)) <= 0)' failed.
Aborted
lucid@lucid-desktop:~/Desktop/Debug$ ptrace: No such process. 
```

--------------------------错误----------- ------------------------------

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:11:02.410

很难从这个错误中分辨出来：它是否一致？每次启动时或以后都会发生吗？

最可能的原因是您从多个线程调用 GUI：这是不允许的。如果您不在主循环线程中，您应该使用 Gtk.Application.Invoke() 之类的东西，此页面中提供了示例：[http](http://www.mono-project.com/Responsive_Applications) ://www.mono-project.com/Responsive_Applications 。

# c# - 如何比较这两个字符串

> ID：11945064
> 
> 赞同：1
> 
> 时间：2012-08-14T02:41:19.347
> 
> 标签：c#, sql

我有一个关于如何比较两个字符串的问题。

这是代码。

```
 string stringA = "This is a test item";
        string stringB = "item test a is This"; 
```

显然，stringB 包含 stringA 中的每个单词，但顺序不同。

我想要的结果应该是 TRUE。

我的问题是，我该怎么办？我曾尝试使用 .Contains() 方法，但结果为 FALSE。

感谢大家。

**更新**

感谢大家的热心回复。

**这是我的澄清**

我实际上正在使用 LINQ 和 EF 构建数据库搜索功能。

假设一个项目的名称为“这是一个测试项目”。

如果用户输入“test a is this”，我希望该功能足够智能以捕获上述项目。

有什么建议吗？

**另一个更新**

再次感谢你的帮助。

我确实喜欢 Peter Ritchie、codesparkle、Dave 和 EdFred 的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T02:47:32.850

'String.Split' 使用空格分隔符将单词排序，将结果数组排序到列表中，然后比较列表。例如：

```
var x = new List<string>(stringA.Split(' '));
x.Sort();
var y = new List<string>(stringB.Split(' '));
y.Sort();
bool areEqual = x.SequenceEqual(y); 
```

**更新**如果你想要不区分大小写：

```
var x = new List<string>(stringA.Split(' '));
x.Sort();
var y = new List<string>(stringB.Split(' '));
y.Sort();
bool areEqual = x.SequenceEqual(y, StringComparer.OrdinalIgnoreCase); 
```

但是，如果您正在寻找将在 SQL Server 中执行的东西，那么您可能需要其他东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T02:45:55.720

试试这个方法：

*   将每个字符串中的每个单词放入字符串数组中
*   按字母顺序对每个单词数组进行排序
*   比较数组是否相等

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T02:54:08.960

我会将字符串拆分为标记并测试 stringA 中的所有标记是否存在于 stringB 的标记列表中。就像是：

```
var stringBTokens = stringB.Split(" ");
foreach(string token in stringA.Split(" "))
{
    if(stringBTokens.Contains(token) == false) return false;
}
return true; 
```

可能有一些奇怪的正则表达式可以做到这一点，但这是一个相当直接的测试。如果你想变得花哨，你可以像这样使用 Linq Any 方法：

```
var stringBTokens = stringB.Split(" ");
return !stringBTokens.Any(token => stringA.Contains(token)); 
```

这基本上是在做同样的事情，只是后者我觉得更优雅一点。我希望没有错误，我在我的 macbook pro 上并且没有安装任何与 .net 相关的（或单声道等）来验证它是否有效。

**更新**

根据您的说明，我会看看[http://en.wikipedia.org/wiki/Inverted_index](http://en.wikipedia.org/wiki/Inverted_index)

这听起来像你想要达到的目标。我之前创建了这些以在数据库中进行快速文本搜索，并且它非常有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T02:55:18.597

仿照伯纳德的解释。

很多人漏掉了一个关键部分。在进行比较之前，您需要转换字符串 .ToLower()。

编辑：这就是你需要的。使用 Linq 使其更具可读性。

```
 public static bool Compare (string wordOne, string wordTwo)
    {
        //split into words
        var wordsOne = wordOne.ToLower().Split(' ').ToList();
        var wordsTwo = wordTwo.ToLower().Split(' ').ToList();

        if (wordsOne.Count() != wordsTwo.Count()) {
            return false;
        }

        //sort alphabetically
        wordsOne.Sort((x,y) => string.Compare(x, y));
        wordsTwo.Sort((x,y) => string.Compare(x, y));

        //compare
        for (int i = 0; i < wordsOne.Count(); i++) {
            if(wordsOne[i] != wordsTwo[i])
                return false;
        }

        return true;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T03:57:48.143

基于 Peter Richie 的极好建议，使用`Array.Sort()`而不是`List<T>.Sort()`，没有重复但打包成一个简洁的扩展方法：

```
public static bool ContainsSameWordsAs(this string first, string second)
{
    return first.GetSortedWords().SequenceEqual(second.GetSortedWords());
    // if upper and lower case words should be seen as identical, use:
    // StringComparer.OrdinalIgnoreCase as a second argument to SequenceEqual
}

private static IEnumerable<string> GetSortedWords(this string source)
{
    var result = source.Split().ToArray();
    Array.Sort(result);
    return result;
} 
```

**用法**

```
string stringA = "This is a test item";
string stringB = "item test a is This";
string stringC = "Not the Same is This";
bool result = stringA.ContainsSameWordsAs(stringB);    // true
bool different = stringA.ContainsSameWordsAs(stringC); // false 
```

* * *

**编辑：** ~~很难理解为什么您接受了不符合问题中所述要求的答案。~~如果你真的想要字符串`"This is a test item"`并`"test a is this"`匹配，你需要使用一些更复杂的东西，例如：

```
public static bool ContainsSameWordsAs(this string first, string second)
{
    var ignoreCase = StringComparer.OrdinalIgnoreCase;
    return first.Split().Any(word => second.Split().Contains(word, ignoreCase));
} 
```

不过，您可能想提出一个更好的算法，因为这个算法非常松散——两个相同的单词足以算作匹配。但这*将*符合您在问题中所述的要求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T02:46:12.373

```
stringA.OrderBy(c => c).SequenceEqual(stringB.OrderBy(c => c)); 
```

**编辑** 哎呀。错误的做法。那会教我回答太快。

我相信这应该有效：

```
stringA.Split(' ').OrderBy(w => w).SequenceEqual(stringB.Split(' ').OrderBy(w => w)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-14T02:46:36.443

我会做一个2阶段的比较：

1.  使用 .Split(' ') 方法通过 ' ' 拆分字符串，并确保它们具有相同数量的元素（.Count 属性）。

2.  将新创建的数组（拆分字符串）转换为 Sets 并执行 A 集合差异 B 并集 B 集合差异 A。

然后如果测试 1 通过并且集合中没有由集合差异的并集创建的元素（在测试 2 中），则您已经成功地比较了字符串中的单词，如上所述。

迈克尔·G。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T02:47:08.413

您可以在空白处拆分字符串并比较两个结果集合。您可以使用linq 中的[集合操作](http://msdn.microsoft.com/en-us/library/bb546153.aspx)：

如果第一个字符串中的单词在集合 words1 中，而第二个字符串中的单词在 words2 中，则可以执行以下操作：

```
if(!words1.Intersect(words2).Except( words1).Any()) -> your sentences are 'equal' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-14T02:59:15.973

```
 bool match = true;
        string[] stringBSplit = stringB.Split(' ');
        foreach (string aString in stringA.Split((' ')))
        {
            if (!stringBSplit.Contains(aString))
            {
                match = false;
                break;
            }
        } 
```

# ios - subjectAreaChangeMonitoringEnabled 仅适用于某些相机设备

> ID：11945067
> 
> 赞同：0
> 
> 时间：2012-08-14T02:41:32.903
> 
> 标签：ios, camera, avcapturedevice

我一直在尝试使用`AVCaptureDevice`'`subjectAreaChangeMonitoringEnabled`属性来监视具有潜在运动检测应用程序的运动。

对于 iPhone 4S 和 iPad 2 的后置摄像头，我会`AVCaptureDeviceSubjectAreaDidChangeNotification`在我期望的时候收到 s，但是在这两种设备上，当我尝试在前置摄像头上启用它时，我根本没有收到任何通知。

为什么这在前置摄像头上不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:41:32.903

根据此[开发者论坛响应](https://devforums.apple.com/message/707449#707449)中的一位 Apple 工程师的说法，这是预期的行为：

> subjectAreaChangeMonitoring 旨在告诉您场景是否发生了足够的变化，以至于它可能失焦，因此您应该重新聚焦。因此，该功能仅适用于支持对焦的相机。

所以你不能依赖这个 API 来进行运动检测，至少对于前置摄像头来说是这样。

# ruby-on-rails - 如何在 RoR 中初始化模型对象？

> ID：11945070
> 
> 赞同：5
> 
> 时间：2012-08-14T02:41:51.943
> 
> 标签：ruby-on-rails

我正在创建一个网站，我希望每个用户从他们的属性的某些值开始。

这是课程：

```
class User < ActiveRecord::Base

  attr_accessible :name, 
              :email, 
              :goal, 
              :measurement, 
              :bmr_formula, 
              :fat_factor, 
              :protien_factor

end 
```

在 rails console --sandbox 我可以更改这些值。但我想以某些值开始对象。

例如，我希望测量以“US”开头，bmr_formula 以“Katch”开头……等等，而不是 nil。

现在，一切都从零开始。

我将继续展示我尝试过的每次尝试的结果。

* * *

* * *

**这是有效的：**

```
after_initialize do 
   self[:measurement] = "US" 
   self[:bmr_formula] = "katch"
   self[:fat_factor] = 0.655
   self[:protein_factor] = 1.25
   puts "User has been initialized!"
end

1.9.3p125 :001 > user = User.new
User has been initialized!
=> #<User id: nil, name: nil, email: nil, goal: nil, measurement: "US", bmr_formula: 
"katch", fat_factor: 0, protein_factor: 0, created_at: nil, updated_at: nil> 
1.9.3p125 :002 > 
```

**感谢大家的帮助！**

* * *

* * *

全班：

```
attr_accessible :name, 
              :email, 
              :goal, 
              :measurement, 
              :bmr_formula, 
              :fat_factor, 
              :protien_factor

def initialize(measurement)                
@measurement = measurement
# bmr_formula = "katch"
# fat_factor = 0.655
# protien_factor = 1.25
  end 
```

安慰：

```
1.9.3p125 :001 > user = User.new("US")
 => #<User not initialized> 
```

* * *

类的底部：

```
 def initialize               
    @measurement = "US"
    # bmr_formula = "katch"
    # fat_factor = 0.655
    # protien_factor = 1.25
  end 
```

安慰：

```
1.9.3p125 :001 > user = User.new
 => #<User not initialized> 
1.9.3p125 :002 > 
```

* * *

类的底部：

```
self.@measurement = "US" 
```

安慰：

```
SyntaxError: /Users/Nick/Code/Rails/fitness_app/app/models/user.rb:10: syntax error, unexpected tIVAR
self.@measurement = "US" 
```

* * *

班级：

```
after_initialize :measurement, 
                 :bmr_formula, 
                 :fat_factor, 
                 :protien_factor

 def defaults
   self.measurement = "US"
   self.bmr_formula = "katch"
   self.fat_factor = 0.655
   self.protien_factor = 1.25
  end 
```

安慰：

```
1.9.3p125 :001 > user = User.new
 => #<User id: nil, name: nil, email: nil, goal: nil, measurement: nil, bmr_formula:    
nil, fat_factor: nil, protien_factor: nil, created_at: nil, updated_at: nil> 
1.9.3p125 :002 > user.measurement
=> nil 
1.9.3p125 :003 > user.bmr_formula
=> nil 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T02:46:17.347

我会使用`after_initialize`回调：

```
after_initialize :default_values
def default_values
  self.status ||= 'P'
  self.measurement = "US"
  self.bmr_formula = "katch"
  self.fat_factor = 0.655
  self.protien_factor = 1.25
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:47:02.573

您可以使用 before_create 在第一次保存对象之前进入那里并弄脏东西。如果您在保存之前需要它，您可以使用 before_initialize 来完成类似的操作。

您还只想设置 self.measurement，而不是 self.@measurement。

# php - 表格中的多个表单，多个提交按钮。我可以只用 PHP 和 HTML 来做吗？

> ID：11945071
> 
> 赞同：1
> 
> 时间：2012-08-14T02:41:56.583
> 
> 标签：php

我正在尝试为跆拳道学校制定时间表，我希望管理员能够对他们的桌子进行 CRUD。

这就是我希望它看起来的样子：

![在此处输入图像描述](../Images/d786c90806fc9be053c1599d38b574a6.png)

这是我现在的代码：

```
<?php require_once("../../includes/initialize.php"); ?>
<?php if (!$session->is_logged_in()) { redirect_to("login.php"); } ?>
<?php
  $schedules = Schedule::find_all();
  ?>
<?php include_layout_template('admin_header.php'); ?>

<h2>Schedule</h2>
<?php  
if(isset($_POST['delete'])){
    $schedule = Schedule::find_by_id($_GET['id']);
        if($schedule && $schedule->delete()) {
            $session->message("The line was deleted.");
            redirect_to('schedule.php');
        }else{
            $session->message("The line could not be deleted.");
            redirect_to('schedule.php');
        }
}
?>

<?php 
if(isset($_POST['submit'])){
    $schedule = new Schedule();
    $schedule->belt = $_POST['belt'];
    $schedule->age = $_POST['age'];
    $schedule->monday = $_POST['monday'];
    $schedule->tuesday = $_POST['tuesday'];
    $schedule->wednesday = $_POST['wednesday'];
    $schedule->thursday = $_POST['thursday'];
    $schedule->friday = $_POST['friday'];
    $schedule->saturday = $_POST['saturday'];
    if($schedule->save()) {
        $session->message("line added successfully.");
        redirect_to('schedule.php');
    } else {
        $message = join("<<br />", $schedule->errors);
    }
}
?>

<?php 
if(isset($_POST['update'])){
    $schedule = Schedule::find_by_id($_POST['id']);
    $schedule->belt = $_POST['belt'];
    $schedule->age = $_POST['age'];
    $schedule->monday = $_POST['monday'];
    $schedule->tuesday = $_POST['tuesday'];
    $schedule->wednesday = $_POST['wednesday'];
    $schedule->thursday = $_POST['thursday'];
    $schedule->friday = $_POST['friday'];
    $schedule->saturday = $_POST['saturday'];
    if($schedule->save()) {
        $session->message("line updated successfully.");
        redirect_to('schedule.php');
    } else {
        $message = join("<<br />", $schedule->errors);
    }
}
?>

<?php echo output_message($message); ?>
<table id="schedule">
     <tr>
        <th>Belt</th>
        <th>Age</th>
        <th>Monday</th>
        <th>Tuesday</th>
        <th>Wednesday</th>
        <th>Thursday</th>
        <th>Friday</th>
        <th>Saturday</th>
        <th></th>
     </tr>
    <?php foreach($schedules as $schedule): ?>
    <tr>
        <form action="schedule.php" enctype="multipart/form-data" method="post">
        <input type="hidden" name="id" value="<?php echo $schedule->id;?>" />

        <td><input type="text" size="15" name="belt" value="<?php echo $schedule->belt; ?>" /></td>
        <td><input type="text" size="5" name="age" value="<?php echo $schedule->age; ?>" /></td>
        <td><input type="text" size="7" name="monday" value="<?php echo $schedule->monday; ?>" /></td>
        <td><input type="text" size="7" name="tuesday" value="<?php echo $schedule->tuesday; ?>" /></td>
        <td><input type="text" size="7" name="wednesday" value="<?php echo $schedule->wednesday; ?>" /></td>
        <td><input type="text" size="7" name="thursday" value="<?php echo $schedule->thursday; ?>" /></td>
        <td><input type="text" size="7" name="friday" value="<?php echo $schedule->friday; ?>" /></td>
        <td><input type="text" size="7" name="saturday" value="<?php echo $schedule->saturday; ?>" /></td>
        <td><input type="submit" name="update" value="Update" /><input type="submit" name="delete" value="Delete" onclick="return confirm('Are you sure you want to delete?');"/></td>
        </form>
    </tr>
    <?php endforeach;?> 

    <tr>    
        <form action="schedule.php" enctype="multipart/form-data" method="post">
        <td><input type="text" size="15" name="belt" value="" /></td>
        <td><input type="text" size="5" name="age" value="" /></td>
        <td><input type="text" size="7" name="monday" value="" /></td>
        <td><input type="text" size="7" name="tuesday" value="" /></td>
        <td><input type="text" size="7" name="wednesday" value="" /></td>
        <td><input type="text" size="7" name="thursday" value="" /></td>
        <td><input type="text" size="7" name="friday" value="" /></td>
        <td><input type="text" size="7" name="saturday" value="" /></td>
        <td><input type="submit" name="submit" value="Add new line" /></td>
        </form>
    </tr>
</table>

        <br /><br />

<?php include_layout_template('admin_footer.php'); ?> 
```

我很想进行一些额外的改进，但我无法弄清楚这种形式。在我添加更新功能之前，它工作正常。现在，当我在其中一行中添加一些新数据并单击更新时-它不会给我会话消息并且不会更新视图中的字段（但我认为它在数据库中）。

任何意见，将不胜感激。我想我可以用一些 AJAX 来解决这个问题 - 但我有一段时间没有碰过它，坦率地说不记得如何......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:46:43.247

它没有在屏幕上显示更新的原因是因为

```
$schedules = Schedule::find_all(); 
```

上面是要更新的代码。所以 $schedules 不会改变。我建议改变

```
<?php foreach($schedules as $schedule): ?> 
```

到

```
<?php foreach(Schedule::find_all() as $schedule): ?> 
```

# wpf - WPF 动画只触发一次

> ID：11945084
> 
> 赞同：3
> 
> 时间：2012-08-14T02:43:51.537
> 
> 标签：wpf, datatrigger

我有一个小椭圆，每次依赖属性设置为 true 时我都想闪烁它。因为该属性可以在几毫秒内快速从 true 变为 false，所以我需要使用动画而不是简单的样式数据触发器来执行此操作。基本上，我只想要真正的价值来 ping 椭圆上的动画。

```
<Ellipse Height="10" Width="10" Stroke="#FFFFFFFF" Margin="5,3,0,0">
    <Ellipse.Fill>
        <SolidColorBrush />
    </Ellipse.Fill>
    <Ellipse.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsReceiving}" Value="True" >
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="Fill.Color">
                                    <ColorAnimationUsingKeyFrames.KeyFrames>
                                        <DiscreteColorKeyFrame KeyTime="0:0:0" Value="Red"/>
                                        <DiscreteColorKeyFrame KeyTime="0:0:0.25" Value="Transparent"/>
                                    </ColorAnimationUsingKeyFrames.KeyFrames>
                                </ColorAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Ellipse.Style>
</Ellipse> 
```

此动画似乎有效，但仅在值第一次达到 true 时触发。我错过了什么吗？

更新：感谢大家的投入。事实证明，这是一个线程问题。最初，我在控件上有一个 DP，该控件绑定到实现 INotifyPropertyChanged 的​​视图模型。然后我尝试删除控件上的 DP 并将我的视图模型属性转换为 DP。繁荣，那时我开始收到一个错误，指出另一个线程拥有该对象。我意识到我需要像在应用程序的其他部分中所做的那样，使用响应式扩展来合并一些 Observable。我使用 PropertyChanged() 恢复到视图模型的传统属性，并将其简单地绑定到控件的动画。现在一切都完美无缺。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-07T07:11:37.360

我有一个类似的问题，当 DP 更改时，我有一个“输入”和“输出”动画要触发。第一个周期运行良好，但之后没有任何反应。我通过`RemoveStoryboard`在操作之前添加 EnterActions来解决它`BeginStoryboard`。

```
<Border Name="Zyzzyx" Grid.Row="1" Background="DarkRed" Height="0" VerticalAlignment="Bottom">
    <Border.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=SelectionState, ElementName=ControlRoot, Mode=OneWay}" Value="Selecting">
                    <DataTrigger.EnterActions>
                        <RemoveStoryboard BeginStoryboardName="AnimateIn" />
                        <RemoveStoryboard BeginStoryboardName="AnimateOut" />
                        <BeginStoryboard Name="AnimateIn" HandoffBehavior="SnapshotAndReplace">
                            <Storyboard FillBehavior="HoldEnd" Duration="0:0:5">
                                <DoubleAnimation To="30" Duration="0:0:5" Storyboard.TargetProperty="Height" />
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=SelectionState, ElementName=ControlRoot, Mode=OneWay}" Value="Deselecting">
                    <DataTrigger.EnterActions>
                        <RemoveStoryboard BeginStoryboardName="AnimateIn" />
                        <RemoveStoryboard BeginStoryboardName="AnimateOut" />
                        <BeginStoryboard Name="AnimateOut" HandoffBehavior="SnapshotAndReplace">
                            <Storyboard FillBehavior="HoldEnd" Duration="0:0:5">
                                <DoubleAnimation To="0" Duration="0:0:5" Storyboard.TargetProperty="Height" />
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Border.Style>

<!-- Border content -->

</Border> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-23T16:52:22.823

```
 <DataTrigger.EnterActions>
                    <RemoveStoryboard BeginStoryboardName="AnimateIn" />
                    <RemoveStoryboard BeginStoryboardName="AnimateOut" />
                    <BeginStoryboard ...>
                </DataTrigger.EnterActions> 
```

有效，但我认为最好使用

```
 <DataTrigger.EnterActions>
                    <BeginStoryboard Name="FadeIn"...>
                </DataTrigger.EnterActions>
                <DataTrigger.ExitActions>
                    <RemoveStoryboard BeginStoryboardName="FadeIn" />
                </DataTrigger.ExitActions> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-13T07:53:01.337

我还看到了一个类似的问题来解决我的问题，我发现我必须在 DataTrigger 的 ExitActions 中添加一个 StopStoryboard 标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T09:42:22.933

```
 <Ellipse Height="10" Width="10" Stroke="#FFFFFFFF" Margin="5,3,0,0">
        <Ellipse.Fill>
            <SolidColorBrush />
        </Ellipse.Fill>
        <Ellipse.Style>
            <Style>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsReceiving,Mode=TwoWay}" Value="True" >
                        <DataTrigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="Fill.Color">
                                        <ColorAnimationUsingKeyFrames.KeyFrames>
                                            <DiscreteColorKeyFrame KeyTime="0:0:0" Value="Red"/>
                                            <DiscreteColorKeyFrame KeyTime="0:0:0.25" Value="Transparent"/>
                                        </ColorAnimationUsingKeyFrames.KeyFrames>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </DataTrigger.EnterActions>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Ellipse.Style>
    </Ellipse> 
```

尝试使用 Mode=TwoWay

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T04:18:13.920

您需要提供 IsReceiving 属性的定义以确定。基于您有一个在 True 和 False 之间切换的属性 (IsReceiving) 的假设，这将触发此动画效果：如果您只看到触发一次的效果：

1) 检查该属性是否为 DependencyProperty 或正确利用 INotifyPropertyChanged 向视图发出更新信号。
2) 检查属性设置器是否实际上从 True 更改为 False 并返回。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T12:02:32.807

我无法重现您的问题。这是我的代码隐藏：

```
public partial class MainWindow : Window
{
    public static readonly DependencyProperty IsReceivingProperty =
        DependencyProperty.Register("IsReceiving",
                                    typeof(bool), typeof(MainWindow));

    public bool IsReceiving
    {
        get { return (bool)GetValue(IsReceivingProperty); }
        set { SetValue(IsReceivingProperty, value); }
    }

    public MainWindow()
    {
        InitializeComponent();

        myEllipse.DataContext = this;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        this.IsReceiving = true;
        this.IsReceiving = false;
    }
} 
```

# ajax - CakePHP ajaxupload 和 Uploader

> ID：11945085
> 
> 赞同：0
> 
> 时间：2012-08-14T02:44:07.553
> 
> 标签：ajax, cakephp, upload, uploader, input-field

我想使用这个 CakePHP-Plugin 上传多张图片，我用它来将上传附加到模型： http: [//milesj.me/code/cakephp/uploader](http://milesj.me/code/cakephp/uploader) 不幸的是，文档在这方面不是很有帮助。我的计划是逐个提交文件以规避问题，如果一次上传多张较大的图片可能会出现问题。我需要做的（至少我希望如此）是发送一个包含本地文件路径的 JSON 请求并等待回调。如何使用输入字段（使用 html5 的 muliple = multiple）通过 javascript 获取本地文件名？另一个问题是，如果可能有任何问题，我还没有想到。我不确定回调机制将如何工作，因为数据发送只是一个文本，而上传本身由插件处理。

编辑：这是我在不使用 ajax 的情况下尝试过的。虽然这在某些情况下适用于多个小文件，但有时不适用于多个较大的图像，也不会返回任何错误。

```
 public function add($album_id = null, $album_title = null) {
    $this->set('album_id', $album_id);
    $this->set('album_title', $album_title);                
    // debug($this->data);
    if (!empty($this->request->data)) {
        $data = $this->request->data;
        $data['Picture']["album_id"]= $album_id;
        foreach ($data['Picture']['files'] as $file){
            $tmp_data = $data;              
            $tmp_data['Picture']['files']="";
            $tmp_data['Picture']['file']=$file;
            debug ($tmp_data);  
            $this->Picture->saveAll($tmp_data, array('deep' => true));
        }           
    }        
    } 
```

# java - Apache James 无法投递的电子邮件

> ID：11945092
> 
> 赞同：0
> 
> 时间：2012-08-14T02:45:18.153
> 
> 标签：java, email, james

如果地址由于某种原因无法送达，有没有办法让 Apache James 将无法送达的电子邮件发送到某种默认电子邮件？如果将邮件文件夹存储在数据库中，使用某种其他机制来收集无法送达的电子邮件会更好，但我认为将电子邮件退回是我最有可能的选择。我是否缺少某种配置选项？我正在使用詹姆斯 2.3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:17:36.110

检查此链接[http://wiki.apache.org/james/HelpOnConfiguration/EmailSupport](http://wiki.apache.org/james/HelpOnConfiguration/EmailSupport) 创建一个通用邮件 ID 并配置 mail_from 此值用于发送的电子邮件中的“发件人：”标头，如果没有更好的值是已知的。因此，如果用户回复它，它就会返回到这个通用邮箱。

# c# - 从用户控件传递值（MVC 2，Json）

> ID：11945093
> 
> 赞同：0
> 
> 时间：2012-08-14T02:45:18.737
> 
> 标签：c#, jquery, json, model-view-controller, asp.net-mvc-2

这些是我在当前项目中使用的以下技术： - WCF - MVC 2 - Json

我只是 MVC 2 和 Json 的新手。我的问题是，如何将值从用户控件传递回调用它的页面？

请回答我的问题或给我任何参考链接，我可以从中提取想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:29:25.440

我建议，当您的用户控件找到用户时，将用户详细信息保留在会话中。然后从您的控制器或应用程序的任何位置访问该会话变量。

```
//After your user controller find the User
Session.add("userName",UserNameProperty);

from your controller//
if(Session("userName") != null){
  string _uName = Session("userName").ToString()
// Do your logic
} 
```

# android - 为我的自定义 DialogPreference 设置主题？

> ID：11945095
> 
> 赞同：2
> 
> 时间：2012-08-14T02:45:24.810
> 
> 标签：android, dialog, android-theme

我有一个`DialogPreference`用于`SeekBar`. 我从 XML 覆盖`style="@style/Theme.Putio.Dialog"`和扩展布局。

问题是，生成的对话框使用默认的 Android 对话框样式，我希望它使用我的。

我在哪里告诉它使用我的对话框？如有必要，我会发布代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:32:59.967

您可以在styles.xml 中为您的对话框定义自定义样式

```
<style name="CustomDialogTheme" parent="@android:style/Theme.Dialog">
<item name="android:windowBackground">@drawable/dialogback</item>
<item name="android:windowFrame">@null</item>
<item name="android:windowIsFloating">true</item>
<item name="android:windowNoTitle">true</item></style> 
```

并在创建对话框时使用以下代码。

```
final Dialog CustomDialog = new Dialog(MyActivity.this,R.style.CustomDialogTheme); 
```

# objective-c - arraycontroller nsmutablearray 以编程方式添加

> ID：11945099
> 
> 赞同：0
> 
> 时间：2012-08-14T02:45:50.193
> 
> 标签：objective-c, xcode, cocoa, nsmutablearray, nsarraycontroller

我试图通过绑定到 NSMutableArray 的数组控制器在表视图上添加数据。在 IB 属性上，它看起来像这样：

![盈透地产](../Images/40e9937df7154d017f367457595597bf.png) ![文件所有者](../Images/eebc1fd0853a691bd411d0d12eeebf7b.png)

在我尝试动态添加 NSMutableArray 然后重新加载视图的代码上，没有发生任何事情。

```
for(int i=0;i<10;i++){
        NSMutableDictionary *group = [[NSMutableDictionary alloc]init];
        [group setValue:[NSString stringWithFormat:@"%@-%d", @"Group", i] forKey:@"groupname"];
        [contentArray addObject:group];
    }
    [tableContent reloadData]; 
```

我一直在谷歌它并在stackoverflow中浏览相同的问题，但没有找到有用的问题。

任何的想法 ？

谢谢

**更新**

我在 File 的所有者类中编写了上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:10:41.020

我认为问题在于数组需要向数组控制器发送 KVO 通知（或者可能是表视图，我不确定）。这样做的方法是：

self.contentArray = contentArray; （或 _contentArray 如果这是您的 ivar 的名称）。我假设 contentArray 是一个属性，如果不是，你应该让它成为一个。

# ruby-on-rails-3 - 检查图像名称是否存在于视图之外的更好方法

> ID：11945105
> 
> 赞同：0
> 
> 时间：2012-08-14T02:46:19.550
> 
> 标签：ruby-on-rails-3, asset-pipeline

基本上我在索引视图中有一个表，如果图片名称 = Army.unit_name，那么它会呈现该图片。如果没有，它会以文本形式显示图像丢失。我还是 Rails 的新手，但必须有办法将此条件检查放在视图以外的其他地方。有人可以启发我吗？我在模型中做吗？

```
<% @armies.each do |army| %>
  <tr>
<% if File.exists?("/users/<name>/Ruby Projects/thrones/app/assets/images/#{army.unit_name}.png") %>
      <td><span class="picture-hover"><%= image_tag("#{army.unit_name}.png" %></span></td>
    <% else %>
      <td>Unit Card art missing</td>
<% end %>
<td><%= link_to army.unit_name, army_path(army) %></td>
  </tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:37:00.490

你可以试试这个

```
...
<% if Rails.application.assets.find_asset "#{army.unit_name}.png" %>
... 
```

# makefile - 使用 makefile 构建 .o 文件，需要说明

> ID：11945109
> 
> 赞同：1
> 
> 时间：2012-08-14T02:46:31.733
> 
> 标签：makefile

我的 makefile 包含以下几行

```
 11 SRC := $(shell echo src/*.cpp)
 12 SRC += $(shell echo $(TEST_ROOT)/*.cpp)
 13 
 14 OBJECTS = $(SRC:.cpp=.o)

 22 # [debug] target
 23 $(TARGET): $(OBJECTS)
 24   $(CC) $(OBJECTS) -o $(TARGET)
 25 
 26 # [debug] .o
 27 $(OBJECTS): $(SRC)
 28   $(CC) $(CFLAGS) $(DEBUG_FLAGS) -c $(SRC) $(OBJECTS) 
```

失败是因为......好吧，以下显然不是一种方法

```
g++ -pedantic -Wall -Werror -O0 -g -Wno-format -DUSE_MEASURE -c src/Timer.cpp test/TimerTest.cpp src/Timer.o test/TimerTest.o 
```

我应该如何修改第 28 行以从我的所有来源生成 .o？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:04:09.627

这应该可以解决问题：

```
$(OBJECTS): %.o : %.cpp
    $(CC) $(CFLAGS) $(DEBUG_FLAGS) -c $< $@ 
```

此规则将构建一个对象文件，Make 将为其他规则需要的每个对象调用一次。您可以编写一条规则，一次性构建所有目标文件，但这没有任何好处。

**编辑：**

假设`SRC`是`src/foo.cpp src/bar.cpp testroot/baz.cpp`，
所以`OBJECTS`是`src/foo.o src/bar.o testroot/baz.o`

我们可以为每个单独的规则：

```
src/foo.o : src/foo.cpp
    ...

src/bar.o : src/bar.cpp
    ...

testroot/baz.o : testroot/baz.cpp
    ... 
```

但这是多余的（因为命令非常相似）并且不方便（因为我们不想在添加/删除目标时添加/删除规则）。所以我们使用[模式规则](http://www.gnu.org/software/make/manual/make.html#Pattern-Rules)：

```
%.o : %.cpp
    ... 
```

现在Make要构建`src/foo.o`的时候，看到target匹配pattern `%.o`，stem（对应`%`）是`src/foo`，对应的prereq`src/foo.cpp`存在，所以使用这个规则。

但是我们有一个变量`OBJECTS`，它列出了我们想用这个规则构建的目标，所以我们可以将它限制为一个[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)，它看起来差不多，但有一些我们不需要在这里讨论的优点：

```
$(OBJECTS) : %.o : %.cpp
    ... 
```

现在来说说这`...`部分。该命令告诉编译器扫描 prereq ( `src/foo.cpp`) 并构建目标 ( `src/foo.o`)，因此我们必须在命令中引用这些内容。[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)对此有所帮助；`$@`是目标的名称，并且`$<`是第一个（在这种情况下也是唯一的）先决条件的名称：

```
$(OBJECTS): %.o : %.cpp
    $(CC) $(CFLAGS) $(DEBUG_FLAGS) -c $< $@ 
```

# list - 我想通过 coronasdk 获取可用 wifi 设备的列表

> ID：11945114
> 
> 赞同：0
> 
> 时间：2012-08-14T02:47:00.090
> 
> 标签：list, networking, wifi, coronasdk

现在，我通过 coronasdk tools(www.coronasdk.com) 开发

我想通过 coronasdk 获取可用 wifi 设备的列表

这个怎么做？

程序流程

1）查看介绍

2）扫描网络（仅wifi）

3)查看wifi SSID列表

4）选择SSID

5）连接选择SSID的设备

6）获取使用JSON的远程设备文件列表

...

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:10:11.897

[Autolan](http://developer.coronalabs.com/code/autolan)应该为你做！它是实现多人游戏的一个非常有用的库。

# windows - 自签名证书 Windows 模拟器 - node.js 应用程序

> ID：11945121
> 
> 赞同：0
> 
> 时间：2012-08-14T02:47:25.637
> 
> 标签：windows, node.js, azure

您好，我想从在 windows azure 模拟器下运行的 node.js 网站进行 https 调用，但我不确定如何使用 IIS Express 启用 ssl？

有人有什么想法吗？我已经阅读并尝试实施不同的想法，但似乎没有一个适用于例如

[https://tootallnate.net/setting-up-free-ssl-on-your-node-server](https://tootallnate.net/setting-up-free-ssl-on-your-node-server)

我正在创建一个 Facebook 应用程序，它需要我对图形等进行一些 https 调用，但是 IIS Express 每次遇到警告消息等时都会崩溃，并且调用永远不会通过。

任何人都有一个在模拟器中工作的简单自签名证书，他们可以分享他们是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:14:15.590

使用 SSL 从您的服务（例如，使用 facebook）进行传出呼叫与接受传入的 ssl 呼叫（例如，从浏览器）是有区别的。如果您正在拨打电话，标准节点库应该可以工作，并且您只需要在您的应用程序中包含一个 .pem 证书即可使用其中的大部分。如果您在服务器上接受 https 调用，则 iis (express) 会处理证书，并且您的服务器可以将传入呼叫视为 http

# android - android更改列表视图项的位置

> ID：11945126
> 
> 赞同：0
> 
> 时间：2012-08-14T02:47:37.190
> 
> 标签：android, listview, position

我正在尝试通过单击电话号码将显示电话号码数组的列表视图项目发送到列表的底部位置。

我的 main.xml 有 listview 和一些按钮，而 R.layout.numberlayout 有行的布局，带有一个 CheckBox 和 2 个 TextViews（heregoesthenumber 和 heregoestheid）。

我正在尝试在我的 ListNumberAdapter 上定义一个 OnClickListener 到 TextView heregoesthenumber 所以每次单击该数字时，该数字都会出现在列表的底部。我尝试使用 tvn.setOnClickListener 执行此操作，创建一个与单击它的数字完全相同的新数字并删除原始数字，但 ListView 的复选框丢失了它

主活动加载数字： my_Adapter = new ListNumberAdapter(this, R.layout.numberlayout, numberList); numberView.setAdapter(my_Adapter); }

我的 NumberItem 类是电话号码类，带有一个布尔值和两个字符串。

NumberListClass 扩展了 ArrayList，它有几个方法，与我的问题公共类 NumberListClass 扩展 ArrayList 无关。

这是我的主要适配器：

公共类 ListNumberAdapter 扩展 ArrayAdapter{

```
private NumberListClass numeros;
private Context context;
public ListNumberAdapter(Context contexto, int textViewResourceId,
        NumberListClass listaNumeros) {
    super(contexto, textViewResourceId, listaNumeros);
    this.numeros=listaNumeros;
    this.context=contexto;
}           
@Override
public View getView(final int position, View convertview, ViewGroup parent){
    View v = convertview;
    if (v == null){
        LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         v = vi.inflate(R.layout.numberlayout, null);               
         }      
    final NumberItem numberI = this.numeros.get(position);
    if (numberI != null){
        final CheckBox rb = (CheckBox) v.findViewById(R.id.checkBox);
        TextView tvn=(TextView) v.findViewById(R.id.hereGoesTheNumber);
        TextView tvID=(TextView) v.findViewById(R.id.hereGoesTheId);
        if (rb !=null){rb.setChecked(numberI.getStatus());  }
        if (tvn!=null){ tvn.setText(numberI.getNumber()+numberI.getStatus());}
        if (tvID!=null){tvID.setText(""+numberI.getIfSelected());}                                                                                                              

        rb.setOnCheckedChangeListener(new OnCheckedChangeListener(){
            @Override
            public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                numberI.changeStatus();
                notifyDataSetChanged();
                buttonView.refreshDrawableState();
            }           
        } 
        );
        tvn.setOnClickListener(new OnClickListener (){

            @Override
            public void onClick(View v) {
            // WHAT CAN I DO HERE???                    
            }           
        });
    }
    return v;} 
```

请您的帮助！

# python - 将 Django 连接到本地网络上的远程 mysql 服务器

> ID：11945128
> 
> 赞同：9
> 
> 时间：2012-08-14T02:48:09.690
> 
> 标签：python, mysql, django

我已经设置了 Django，并且是一个完整的新手。我已成功连接到本地主机上的 mysql 数据库，但无法连接到本地网络上另一台机器上托管的数据库。

本地主机是：192.168.1.51（又名“笔记本电脑”）远程是：192.168.1.50（又名“台式机”）

settings.py 看起来像这样：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'NAME': 'mydb',                      
        'USER': 'root',                      
        'PASSWORD': 'mypass',                  
        'HOST': '192.168.1.50',                      
        'PORT': '3306',                      
    }
} 
```

我运行“python manage.py runserver”并得到一个错误：

> _mysql_exceptions.OperationalError: (1045, "Access denied for user 'root'@'laptop.local' (using password: YES)")

我已授予对“root@laptop”的访问权限，但我不知道为什么要添加“.local”……我这样做对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:00:54.307

默认情况下，root账户只能用于本地登录mysql。您首先需要从主机授予 root 用户登录权限。

# c++ - C++ - 在堆上分配而不是使用新对象作为参考来维护接口

> ID：11945135
> 
> 赞同：3
> 
> 时间：2012-08-14T02:49:47.440
> 
> 标签：c++, reference, heap-memory

我的应用程序中有一个案例，我需要根据从外部源返回的类型信息动态创建一个新对象。基本上，我有 A 类来处理这个任务。该类将创建类 B、C 或 D 等（例如 B 是基类，C 和 D 是派生类型）。然后我想将此对象传递给一个现有接口，该接口充满了需要 B 类型引用参数的方法。最终，这个动态分配的对象存储在另一个类的 boost::shared_ptr 成员对象中（我使用 reset() shared_ptr 上的方法）。因此，此时内存正在由某人管理。

基本上，这对我来说似乎是一个糟糕的设计（我正在到处传递这个动态分配的对象，在某一点取消引用它，然后稍后再次获取指向它的指针）。另一方面，我不想更改接口的几个方法来获取指针而不是引用。当我将对象传递给接口以进行进一步处理时，我想不理会该接口并取消引用指针。我在某处读到，当您有一个采用引用参数的方法时，您会说“我不关心这里的内存管理”和“这个对象将被初始化 - 即不能为 NULL”。该对象最初是在堆上创建的，最终将由另一个管理其内存的类“拥有”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:26:58.993

我认为在对象使用和生命周期方面设计的主要目标应该是对象的所有权在任何时候都是清晰且易于理解的。理想情况下，创建和删除只在一个地方处理，或者当您在其他地方创建和移交时明确标示——同样，这应该只在一个地方完成。

我的偏好是，在该对象完全由某段代码拥有之前，应该使用指针。一旦拥有它，所有者就可以将其作为参考传递。

*   使用指针，可以解释为*“这是一个对象 - 有人想要它吗？”*
*   对于引用，您是在说*“这是我的对象 - 您可以使用它”*

但是，如果这迫使您使其余的代码变得丑陋和混乱，那么保持这种理想就不值得您付出代价。如果您至少可以使创建和移交看起来干净，那么您可以将古怪的东西隐藏在代码的其他一些（有据可查的）部分中......

```
B * myInst = A::BFactory( current_state_of_universe );
bool bSubmitted = SubmitForMagic( myInst );
if( !bSubmitted ) delete myInst; 
```

# joomla - 如何在文件夹中创建自定义页面模板

> ID：11945138
> 
> 赞同：4
> 
> 时间：2012-08-14T02:49:58.987
> 
> 标签：joomla, joomla2.5, joomla-template, joomla-article

如果我想要一个从服务器提取产品信息的页面（如 iPhone），我如何为其创建一个新的页面模板并将其链接回主页？我不需要创建新的模板目录。我只想创建一个以非常具体的方式列出产品的页面。

您可以在 Wordpress ( [http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates) ) 中轻松完成，但在 Joomla 中几乎是不可能的，无需跳过障碍！

编辑：我所说的是如何为我称之为产品页面的东西添加不同的页面布局，然后拥有一个主页（index.php）。本质上，有没有办法在一个模板文件中有两个模板布局？如果我想调整简单页面的布局，必须创建一个新的模板目录似乎很浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:54:23.773

我不确定您所说的“提取产品信息”是什么意思，但这就是您创建新“页面”的方式

要创建新的“页面”，您需要做的就是创建一篇新文章。为此，请访问：

```
Joomla Backend >> Content >> Article Manager >> New 
```

那么你需要创建一个新的菜单项。为此，请访问：

```
Joomla Backend >> Menus >> Main Menu (optional) >> New 
```

并将菜单项链接到您创建的文章。

如果您需要更具体的内容来满足您的需求，请尝试使用[Joomla 扩展目录](http://extensions.joomla.org/)

# ruby-on-rails - 如何在 twitter 引导下拉菜单中使用 mixpanel？

> ID：11945140
> 
> 赞同：5
> 
> 时间：2012-08-14T02:50:17.523
> 
> 标签：ruby-on-rails, twitter-bootstrap, mixpanel

我的代码如下所示：

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav pull-right">
        <% if user_signed_in? %>
        <li class="dropdown" id="menu7">
           <a class="dropdown-toggle" id="username" data-toggle="dropdown" href="#">
             <%= current_user.full_name %>
             <b class="caret"></b>
           </a>
          <ul class="dropdown-menu">
            <li><%= link_to('Edit my account', edit_user_registration_path, 
                  :id => 'edit_account') %></li>
            <li><%= link_to('Logout', destroy_user_session_path, :method => 'delete',
                  :id => 'logout_link') %></li>
          </ul>
        </li>
        <% else %>
          <li><%= link_to('Login', new_user_session_path, :id => 'login_link') %></li>
          <li><%= link_to('Sign up', new_user_registration_path, :id => 'signup_link') %></li>
        <% end %>
     </ul>
  </div>
</div> 
```

我的javascript事件是这些：

```
 mixpanel.track_links('#username', 'Username clicked')
  mixpanel.track_links('#edit_account', 'Edit account link clicked')
  mixpanel.track_links('#logout_link', 'Logout link clicked') 
```

我不知道为什么（我真的看起来很奇怪！）只有“点击用户名”事件有效。有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-26T18:27:23.737

一种可能性是您需要在选择器中包含链接标签：

```
 mixpanel.track_links('#username a', 'Username clicked')
  mixpanel.track_links('#edit_account a', 'Edit account link clicked')
  mixpanel.track_links('#logout_link a', 'Logout link clicked') 
```

这就是[Mixpanel 文档](https://mixpanel.com/help/reference/javascript)中的做法。

另一种选择是您可能会以错误的方式处理此问题。不是跟踪链接的点击，也许你想使用 ruby​​ API 并将你的跟踪器放在控制器中，如[文档的这一部分](https://mixpanel.com/help/reference/ruby)所示。

因此，您将在用户控制器中执行以下操作：

```
def edit
  track_event "edits account"
end 
```

在会话控制器中：

```
def destroy
  track event "logs out"
end 
```

# php - mysqli multi_query 后跟查询

> ID：11945142
> 
> 赞同：3
> 
> 时间：2012-08-14T02:50:25.363
> 
> 标签：php, mysql, database, mysqli, mysqli-multi-query

我目前正在执行以下操作：

```
$mysqli = new mysqli($server, $username, $password, $database);

$mysqli->multi_query($multiUpdates);
while ($mysqli->next_result()) {;} // Flushing results of multi_queries
$mysqli->query($sqlInserts); 
```

有没有更快的方法来转储结果？

我不需要它们，只想运行下一个查询，但是出现错误：

> 命令不同步；你现在不能运行这个命令

问题是`while ($mysqli->next_result()) {;}`大约需要 2 秒，这对于我不想要的东西来说是一种浪费。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:06:14.993

找到了一个更快的解决方案，在更新 500 条记录和插入 500 条记录时可以节省大约 2-3 秒。

```
function newSQL() {
    global $server, $username, $password, $database;
    $con = new mysqli($server, $username, $password, $database);
    return $con;
}

$mysqli = newSQL();
$mysqli->multi_query($multiUpdates);
$mysqli->close();

$mysqli = newSQL();
$mysqli->query($sqlInserts);
$mysqli->close(); 
```

不知道它有多实用，但对于速度来说效果很好。

# javascript - 如何通过客户端javascript函数触发服务器端程序（shell脚本）的执行？

> ID：11945143
> 
> 赞同：2
> 
> 时间：2012-08-14T02:50:25.460
> 
> 标签：javascript

我想从 Web 浏览器中运行的 JavaScript 代码触发服务器端脚本（.sh 文件）的执行。

我搜索了谷歌，但没有找到适合我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:51:23.230

您需要首先使用运行 .sh 文件的服务器端语言（如 PHP、Python、RoR、PERL、ASP.NET 或 JSP）创建一个文件。然后您必须使用 Ajax 来请求该页面。

在 PHP 中，类似：

`<?= shell_exec('sh /home/user/public_html/scripts/script.sh'); ?>`

然后，对于 JS，类似：

```
<script src="//code.jquery.com/jquery-1.8.0.min.js"></script>
<script>
var runShellScript = function () {
    $.get('/scripts/script.php', function () {
        alert('Shell script done!');
    });
};

// Some stuff
runShellScript();
</script> 
```

如果您不想使用 jQuery 或 Ajax，您可能会使用 JSONP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T09:18:27.487

确保您的 .sh 文件以：

```
#!/bin/sh
echo "Content-type: text/html"
echo "" 
```

并且 .htaccess 文件被设置为执行 .sh 文件：

```
Options +ExecCGI
AddHandler cgi-script sh 
```

然后，您可以简单地使用 XMLHttpRequest 从 url 调用文件。[http://en.wikipedia.org/wiki/XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)，甚至可能让您的脚本返回一些 json 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:51:52.947

我相信您不能直接使用客户端 JavaScript 执行此操作。但是，您可以调用 url 请求让服务器端语言（PHP、Java、Ruby ......几乎任何语言）来完成任务。并且一定要考虑安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T02:52:17.223

我不知道Javascript是否`.sh`特别打开文件，但您可以使用filereader API来打开文件。

# java - 如何在 JSF 2 中的值表达式和方法表达式中传递参数？

> ID：11945145
> 
> 赞同：6
> 
> 时间：2012-08-14T02:50:31.957
> 
> 标签：java, jsf, jsf-2, javabeans, parameter-passing

这是来自 Oracle JavaEE 6 教程文档的引用，用于在 JSF 2 中传递值表达式和方法表达式中的参数。

> 值表达式和方法表达式都支持参数。在以下示例中，它是来自 guessNumber 应用程序的修改标记，随机数作为参数提供，而不是从用户输入到方法调用：

```
<h:inputText value="#{userNumberBean.userNumber('5')}"> 
```

上面的例子使用了一个值表达式。

这是默认的：

`<h:inputText value="#{userNumberBean.userNumber}">`

豆类——

```
import java.util.Random;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped; 

@ManagedBean
@SessionScoped
public class UserNumberBean {

    Integer randomInt = null;
    Integer userNumber = null;

    public UserNumberBean() {
        Random randomGR = new Random();
        randomInt = new Integer(randomGR.nextInt(10));
        System.out.println("Duke's number: " + randomInt);
    } 

    public void setUserNumber(Integer user_number) {
        userNumber = user_number;
    }

    public Integer getUserNumber() {
        return userNumber;
    }

} 
```

以下表达式未将 5 作为参数传递给 inputText：

`<h:inputText value="#{userNumberBean.userNumber('5')}">`

它实际上会在运行时导致错误。

**我的问题**：我如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:16:40.657

您不需要在提供的示例中传递参数。

在这种情况下，getter 和 setter 会在您的支持 bean 上自动调用。

以下代码将调用*getUserNumber*和/或*setUserNumber*来检索和/或修改*inputText*组件的值：

`<h:inputText value="#{userNumberBean.userNumber}">`

用户输入的表单值将作为参数传递给*setUserNumber 。*

* * *

要将参数传递给支持 bean 方法，您可以执行以下操作：

```
<h:commandButton  action="#{userNumberBean.displayAlert('Hey')}"    value="Say Hey"/>
<h:commandButton  action="#{userNumberBean.displayAlert('Later')}"  value="Say Bye"/> 
```

这将调用如下所示的方法：

`public String displayAlert(String someText)`

* * *

正如 Bhesh Gurung 的回答所暗示的，您可以在构造函数中将*userNumber*默认设置为 5。

您还可以使用[此处建议](https://stackoverflow.com/questions/3180265/default-value-for-hinputtext)的方法之一来应用默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T05:07:25.123

要将（显示）5 设置为文本框中的默认值，请在视图中进行以下更改 -

```
<h:inputText value="#{userNumberBean.userNumber}"> 
```

并在 managedbean 中设置属性的值：

```
@ManagedBean
@SessionScoped
public class UserNumberBean {

    private Integer randomInt = null;
    private Integer userNumber = null;

    public UserNumberBean() {
        //...            
        this.userNumber = 5; // try this here
    }

    //getter/setter 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T04:09:04.037

使用 JBoss EL。请参阅 JBoss EL 的此[文档](http://docs.jboss.com/seam/snapshot/en-US/html/elenhancements.html)。

# drupal - Drupal 7 在管理面板中自定义添加内容的字段

> ID：11945148
> 
> 赞同：0
> 
> 时间：2012-08-14T02:50:45.193
> 
> 标签：drupal

[http://www.photouploads.com/images/customfiel.jpg](http://www.photouploads.com/images/customfiel.jpg)

我已将分类配置为内容类型的字段，但我想将复选框标签（与 iphone 一起使用）替换为作为该分类的图像字段的图像（参见照片）。

现在我只知道通过添加代码来更改第 290 行的 node.pages.inc：

```
$form['product_label'] = array(
    '#type' => 'checkboxes',
    '#title' => 'Checkboxes Title',
    '#title_display' => 'before',
    '#default_value' => array(0,2),
    '#options' => array(
      0 => 'option one',
      1 => 'option two',
      2 => 'option three', 
    ), 
    '#theme' => 'testmodule_checkboxes',
  ); 
```

product_label 是复选框名称，上面的代码是覆盖当前复选框字段。但我认为这不是最好的方法.. 任何人都可以为我提供指导吗？什么模块或编码可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:58:17.263

[您不应该破解核心（如果您真的知道自己在做什么，那么在极少数情况下除外）。](http://drupal.org/best-practices/do-not-hack-core)

最好的地方是在你的主题中。在`template.php`中，您需要使用[hook](http://api.drupal.org/api/drupal/includes!module.inc/group/hooks/7)来[`hook_form_alter()`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)更改该特定形式。[您可以在此处](http://drupal.org/node/751826)和[此处](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7)找到有关 FAPI（表单 API）的更多信息。

有几种方法可以更改表单以获得您想要的结果。最简单的方法是将每个图标的唯一类添加到每个表单项的[属性](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#attributes)数组。然后，您可以使用 CSS[将文本替换](http://css-tricks.com/css-image-replacement/)为图标（这使得它更易于访问，因为屏幕阅读器仍然能够阅读文本）。

# asp.net - 视觉工作室附加到进程不起作用

> ID：11945152
> 
> 赞同：1
> 
> 时间：2012-08-14T02:51:27.470
> 
> 标签：asp.net, visual-studio-2010, iis

我正在尝试使用本地系统上的代码调试我的生产网站。我用的是VS2010，试了各种办法还是不行。我尝试使用 VS Development Server，并尝试使用 IIS 仍然无法正常工作。当我附加进程调试器启动但断点没有命中。我尝试将进程附加到 W3wp 进程，并尝试将其附加到 IE。仍然没有达到断点。知道是什么原因造成的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:05:55.600

您想要做的就是所谓的“远程调试”。

这是一个 MSDN 链接，可帮助您入门：[MSDN](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGIQFjAA&url=http://msdn.microsoft.com/en-us/library/233w9kd4.aspx&ei=XH4qUIn2M87qiQLRoYCgCg&usg=AFQjCNE3qZ68sUE_YQ1-7G7KpK2Fe5IeHg&sig2=JwmaaK0mUBeBADuflFMP2g)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-08T09:30:30.143

尝试清除 Visual Studio Tools->Import and Export Settings Wizard->Reset all settings->No...->next 的设置并设置

对我有用的另一种选择是以安全模式打开VS。它将 100% 工作：打开 Windows 资源管理器，然后导航到 \Common7\IDE；Devenv /SafeMode：在加载最小窗口的安全模式下启动 IDE。

# azure - Azure 托管具有持久性的工作流活动，用于 Windows8 推送通知

> ID：11945157
> 
> 赞同：0
> 
> 时间：2012-08-14T02:52:37.883
> 
> 标签：azure, windows-8, workflow-foundation-4

我对 Windows Azure 和 Windows 工作流范围的事物完全陌生。

但基本上，我要实现的是云网络应用程序，它将负责将磁贴更新/徽章/toast 通知推送到我的 Winodws 8 应用程序。

运行以发送磁贴通知等的代码很好，但需要每隔一小时左右执行一次。

我决定最直接的方法是制作一个具有 WebAPI 的 MVC 应用程序，这个 WebAPI 将负责从发送它的 ModernApplication 接收 ChannelURI，并将其存储在 SQL Azure 上。

然后将有一个具有静态方法的类，该方法执行收集新数据和生成新 Tile/Badge/Toast 的逻辑。

我创建了一个简单的活动工作流，它有一个带有 DoWhile(true) 活动的序列。在这个 DoWhile 的主体内部，包含一个具有 InvokeMethod 和 Delay 的序列，InvokeMethod 将调用我的包含静态方法的类。延迟设置为一小时。

所以这似乎一切都好。然后我通过 Global.asax 中的 Application_Start 使用以下行启动此活动：

```
 this.ActivityInvoker = new WorkflowInvoker(new NotificationActivity());
    this.ActivityInvoker.InvokeAsync(); 
```

所以我只是用它测试了它，它似乎在设定的时间间隔运行我的自定义静态方法。

这一切都很好，但现在我有三个关于这种处理方式的问题：

*   这是执行此操作的正确/最佳方法吗？如果没有，我应该研究哪些其他方法。
*   如果在 Azure 上启动了一个新实例，我如何确保两个实例的运行工作流不会互相踩踏？即我如何确保 InvokeMethod 不会运行两次，我只希望它每小时运行一次，而不管有多少实例。
*   如果实例崩溃/关闭，我如何确保它的状态保持不变？

非常感谢任何帮助、指导等。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T06:20:34.570

我很想回答几个好问题，但是尝试在这样的论坛上做一些事情会很困难。但让我们试一试。至少要开始。

1）您实施计划任务的方法没有任何问题。我可以想到其他几种方法。就像使用 Do{Thread.Sleep(); 运行一个简单的 Worker 角色一样。...} 简单但有效。还有更复杂/优雅的方法，包括使用外部库和框架在 Azure 中安排任务。

2）您需要在您的工作流/作业处理引擎中实现某种单例类型模式。例如，您可以在作业开始时获得 1Kb blob 记录的租约，并且不允许另一个实例启动等。

有关更详细的答案，我建议我们将其离线并进行 Skype 通话并详细讨论您的要求。你知道如何通过电子邮件联系到我 :) 期待它。

# scrapy - 为什么 Scrapy 很慢？

> ID：11945159
> 
> 赞同：2
> 
> 时间：2012-08-14T02:52:57.533
> 
> 标签：scrapy

我正在抓取一个网站并解析一些内容+图像，但是即使对于具有 100 页左右的简单网站，也需要花费数小时才能完成这项工作。我正在使用以下设置。任何帮助将不胜感激。我已经看到了这个问题 - [Scrapy 的 Scrapyd 调度蜘蛛太慢，](https://stackoverflow.com/questions/9161724/scrapy-s-scrapyd-too-slow-with-scheduling-spiders)但无法收集太多见解。

```
EXTENSIONS = {'scrapy.contrib.logstats.LogStats': 1}
LOGSTATS_INTERVAL = 60.0
RETRY_TIMES = 4
CONCURRENT_REQUESTS = 32
CONCURRENT_REQUESTS_PER_DOMAIN = 12
CONCURRENT_ITEMS = 200
DOWNLOAD_DELAY = 0.75 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:20:38.827

Are you sure the website is responding OK?

Setting DOWNLOAD_DELAY = 0.75 will force requests to be sequential and add a delay of 0.75 seconds between them. Your crawl will certainly be faster if you remove this, however, with 12 concurrent requests per domain be careful you are not hitting websites too aggressively.

Even with the delay it should not take hours, so that's why I am wondering if the website is slow or unresponsive. Some websites will do this to bots.

# ios - ios - 从 .html 文件打印 HTML 在 UIWebView 中不起作用

> ID：11945162
> 
> 赞同：1
> 
> 时间：2012-08-14T02:53:24.400
> 
> 标签：ios, ios5, uiwebview

在我将一些 html 硬编码到我的 UIWebView 函数中后，我得到了要打印的“hello world”文本，但现在我试图将该 HTML 移动到文件系统上其他位置的文件中，并且它没有呈现。

这是我所拥有的：

```
- (void)viewDidAppear:(BOOL)animated
{   
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"learn" ofType:@"html" inDirectory:@"src/html_files"];

    NSString* htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
    [theWebView loadHTMLString:htmlString baseURL:nil];
} 
```

我的 HTML 文件位于我创建的名为 src/html_files 的目录中，该文件名为 learn.html

HTML 没有在屏幕上呈现，我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:02:56.150

好的，所以**Groups**只是 Xcode 中的一个构造，用于保持应用程序的资源井井有条。尽管 Xcode 使用了小文件夹图标，但这并不一定意味着它们实际上是（Mac 或 iOS）文件系统上的单独文件夹。

但是，听起来您已将该文件添加为*捆绑资源*。这也是您发布的代码的样子，但我不得不问一下，以确保。

最有可能的是，唯一错误的是：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"learn" 
                                                     ofType:@"html" 
                                                inDirectory:@"src/html_files"]; 
```

应该是这样的：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"learn" 
                                                     ofType:@"html"]; 
```

从[NSBundle 的 Apple 文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)，

```
+ (NSString *)pathForResource:(NSString *)name 
                       ofType:(NSString *)extension 
                  inDirectory:(NSString *)bundlePath 
```

> *捆绑路径*
> 
> 顶级捆绑目录的路径。这必须是有效路径。例如，要为 Mac 应用程序指定捆绑目录，您可以指定路径 /Applications/MyApp.app。

该`bundlePath`参数并不意味着指定捆绑资源的相对路径。`pathForResource:ofType:`没有参数的版本`bundlePath`几乎总是你会使用的。一旦安装了您的应用程序，它将在任何位置找到**learn.html文件，并返回该文件的完整路径。**您实际上不必担心它是如何嵌套的。它只是一个捆绑资源。

试试看。不过，正如我在评论中所建议的，我始终建议利用`error`参数进行调试：

```
NSError* error;
NSString* htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error: &error];
if (error != nil) {
    NSLog(@"Error with stringWithContentsOfFile: %@", [error localizedDescription]);
} 
```

# script# - 将编译行为添加到 ScriptSharp(Script#)

> ID：11945163
> 
> 赞同：0
> 
> 时间：2012-08-14T02:53:53.430
> 
> 标签：script#

我需要更改[脚本#](https://github.com/nikhilk/scriptsharp)编译器的代码以添加一个`Attribute`以在类上使用以生成 javascript 类型，就像[extjs 新类系统一样](http://docs.sencha.com/ext-js/4-1/#!/guide/class_system)

[在对来自github](https://github.com/nikhilk/scriptsharp)的源代码进行一些爬取之后，我发现编译器的 dll 在`nikhilk-scriptsharp-f7215c5\bin\ref\ScriptSharp.dll`

[但编译器源代码在github](https://github.com/nikhilk/scriptsharp)上不可用

脚本# 是开源的吗？如果是的话，我可以在哪里下载编译器源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:54:31.350

我们已经通过 github 和直接邮件介绍了这一点，直到编译器的源将加入 github 存储库中更广泛的 script# 项目的其他源。

也就是说，重新考虑问题的一种方法是简单地重写 mscorlib.js。

mscorlib.js 提供了编译器期望的类型系统契约……例如，有一个名为 Type.registerClass 的 API 等等。Type.registerClass 和相关方法可以完全重新实现，以充当不同 OOP 模拟（例如 Ext 类系统）的桥梁。

是的，mscorlib.js 的源代码已经在 github 存储库中。

# ruby-on-rails - Rails: `rescue in apply': 使用 rvm gem 1.11.3.5 或更新版本。（运行时错误）

> ID：11945165
> 
> 赞同：0
> 
> 时间：2012-08-14T02:54:01.650
> 
> 标签：ruby-on-rails, rvm

我正在尝试使用[RailsApps 教程之一中的](http://railsapps.github.com/tutorial-rails-devise-rspec-cucumber.html)应用程序模板。我得到这个`RuntimeError`。

```
...  
extras  creating RVM gemset 'myApp'
     run    rvm rvmrc trust from "."
Marked /Users/dB/railsApp/myApp/Gemfile as trusted
  extras  switching to gemset 'myApp'
https://raw.github.com/RailsApps/rails3-application-templates/master/rails3-devise-rspec-cucumber-template.rb:1096:in `rescue in apply': Use rvm gem 1.11.3.5 or newer. (RuntimeError) 
```

我很困惑，因为我使用的是 rvm 版本 1.14.2，而`>`不是他们似乎要求的版本 (1.11.3.5)。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:28:36.337

rvm lib 代码在 1.11.3 版本中被提取到 gem 中，从那时起只应用了错误修复，因此除了第四位显示更新外，没有进行版本碰撞。

rvm 在安装新 ruby​​ 期间为您安装了 gem，因为 rvm gem 包含在 global.gems 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:25:52.773

好吧，我想我明白了。我使用的是旧版本的 Ruby。我下载了最新的，但忘记在 RVM 中将其设置为当前版本。一旦我使新版本成为最新版本，这个错误就消失了。

# objective-c - 目标 C：在 ARC 上收到内存警告

> ID：11945172
> 
> 赞同：0
> 
> 时间：2012-08-14T02:55:15.067
> 
> 标签：objective-c, ios, memory, automatic-ref-counting

我的应用程序出现内存警告，然后它崩溃了。这个错误，我认为是在我的触摸绘图功能上，因为当我尝试使用 alloc 工具运行它时，当我继续在屏幕上移动手指时，内存开始增加。

这是我的代码。

```
 touchSwiped = YES;

    UITouch *touch = [touches anyObject];

    previousPoint2 = previousPoint1;
    previousPoint1 = currentTouch;
    currentTouch = [touch locationInView:self.view];

    CGPoint mid1 = midPoint(previousPoint2, previousPoint1); 
    CGPoint mid2 = midPoint(currentTouch, previousPoint1);

    UIGraphicsBeginImageContext(CGSizeMake(480 , 320));
    [drawView.image drawInRect:CGRectMake(0, 0, 480,320)];  

    CGContextRef context = UIGraphicsGetCurrentContext();    

    CGContextSetLineCap(context,kCGLineCapRound);
    CGContextSetLineWidth(context, inkWidth);
    CGContextSetBlendMode(context, blendMode);
    CGContextSetRGBStrokeColor(context,redColor, greenColor, blueColor, 1);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGContextStrokePath(context);

    drawView.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsGetCurrentContext(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:35:07.477

使用时`UIGraphicsBeginImageContext`，应始终与用`UIGraphicsEndImageContext`完后平衡，否则清理不干净。按照您的方法运行的代码仍然会认为当前的 UI 上下文是您手动发布的，可能会带来灾难性的后果。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-14T05:37:24.100

我做了 Ohr 在他的评论中所说的，它对我有用。

我发布了`CGContextRef`这样的`CGContextRelease(context);`

# ruby - 在 Ruby 类上定义哪种方法来为其实例提供 dup / clone？

> ID：11945176
> 
> 赞同：12
> 
> 时间：2012-08-14T02:55:40.313
> 
> 标签：ruby, clone, dup

我有一个`Pointer`具有单个属性的类`:contents`，它指向类的一个对象`MyObject`。

```
class MyObject
  def hello; "hello" end
end

class Pointer
  attr_reader :contents
  def initialize( cont ); @contents = cont end
  # perhaps define some more state
end 
```

我希望我`Pointer`能够复制自己。我知道该`#dup`方法是默认定义的，而`#clone`方法应该被覆盖以便能够进行深层复制。但在这里，副本不必太深。所以，我遇到的第一个难题是，我是否应该重写`#dup`方法，因为我真的不想复制 my 的附加状态`Pointer`，只需创建一个指向同一个`MyObject`实例的新状态？或者我应该避免 overridine `#dup`，因为我不是“应该”并`#clone`用一种制作浅拷贝的方法覆盖？

我欢迎对上述内容发表评论，但假设我会选择覆盖`#dup`. 我可以这样做：

```
class Pointer
  def dup; self.class.new( contents ) end
end 
```

但在网上，我读到类似“ *dup*方法将调用*初始化复制*方法”之类的内容。此外，[这个人](http://jonathanleighton.com/articles/2011/initialize_clone-initialize_dup-and-initialize_copy-in-ruby/)写了关于`#initialize_clone`,`#initialize_dup`和`#initialize_copy`Ruby 的文章。这让我想知道，最好的做法可能是这样的吗？

```
class Pointer
  def initialize_copy
    # do I don't know what
  end
end 
```

还是像这样？

```
class Pointer
  def initialize_dup
    # do I don't know what
  end
end 
```

还是我应该忘记为迷惑初学者而编写的在线咆哮而无忧无虑地去压倒一切`#dup`？

另外，我知道我可以在`#dup`不定义任何 custom的情况下直接调用`#dup`，但是*如果*我想定义`#dup`不同的行为怎么办？

此外，同样的问题适用于`#clone`- 我应该尝试定义`#initialize_clone`还是只是`#clone`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T13:00:31.490

根据我的经验，重载#initialize_copy 工作得很好（从未听说过initialize_dup 和initialize_clone）。

原始的 initialize_copy（它用原始对象的值初始化每个实例变量）可以通过 super 获得，所以我通常这样做：

```
class MyClass
  def initialize_copy(orig)
    super
    # Do custom initialization for self
  end
end 
```

# iphone - 获取数组对象的索引

> ID：11945177
> 
> 赞同：1
> 
> 时间：2012-08-14T02:55:42.513
> 
> 标签：iphone, objective-c, ios, xcode

这是我要完成的代码

```
-(IBAction)theButtonIsSelected:(id)sender {

    NSMutableDictionary *mutDict = [NSMutableDictionary dictionaryWithDictionary:[detailsDataSource objectAtIndex:detailIndex]];
    [mutDict setObject:@"Yes" forKey:@"Favorite"];

    NSString *nameString = [mutDict valueForKey:@"Name"];

    NSArray *allObjects;
    allObjects = [[NSArray alloc] initWithContentsOfFile:path];

    NSMutableArray *tmpMutArr = [NSMutableArray arrayWithArray:allObjects];
    int index;
     //I think I just need a little piece right here to set the current allObjectsIndex to match nameString?
    [tmpMutArr replaceObjectAtIndex:index withObject:[NSDictionary dictionaryWithDictionary:mutDict]];

    allObjects = nil;
    allObjects = [[NSArray alloc] initWithArray:tmpMutArr];

    [allObjects writeToFile:path atomically:YES];
    } 
```

这是我的问题：

```
if (what I'm trying to do above can be done) {
How to finish it?
} else {
How to make a function to change the "Favorite" key's value of plist object, 
when detailsDataSource not always containing the complete list of objects?
That's why I'm trying to include allObjects and index in this code.
} 
```

编辑：

代码现在看起来像这样：

```
 NSMutableDictionary *mutDict = [NSMutableDictionary dictionaryWithDictionary:[detailsDataSource objectAtIndex:detailIndex]];
     [mutDict setObject:@"Yes" forKey:@"Favorite"];

     NSString *nameString = [[detailsDataSource objectAtIndex:detailIndex] valueForKey:@"Name"];

     NSArray *allObjectsArray = [[NSArray alloc] initWithContentsOfFile:path];

     NSMutableArray *tmpMutArr = [NSMutableArray arrayWithArray:allObjectsArray];

     if(int i=0;i<[tmpMutArr count];i++)
//Errors ^here              and here^
     {
     if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]])
     {
     NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
     if([tempDict valueForKey:@"Name" == [NSString stringWithFormat:@"@%", nameString];) //Is this correct?
     {
     index = i; //index of dictionary
     }
     }
     }

     [tmpMutArr replaceObjectAtIndex:i withObject:[NSDictionary dictionaryWithDictionary:mutDict]];

     allObjectsArray = nil;
     allObjectsArray = [[NSArray alloc] initWithArray:tmpMutArr];

     [allObjectsArray writeToFile:path atomically:YES]; 
```

错误：1 预期的表达式 2 未声明的标识符 'i' 如何声明 I 并修复其他错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:44:37.363

您可以像这样获取字典的索引：

```
 if(int i=0;i<[tmpMutArr count];i++)
 {
   if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]])
   {
      NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
      if([tempDict objectForKey:@"Favorite")
      {
         index = i; // here u have your index of dictionary
      }
   }
 } 
```

# java - IBM WebSphere MQ 覆盖 TextMessage 属性

> ID：11945180
> 
> 赞同：2
> 
> 时间：2012-08-14T02:56:14.770
> 
> 标签：java, properties, ibm-mq

我在 TextMessage 上设置 Long 属性`msg.setLongProperty("publishSequence", pubSeq);`，并将其发送到本地 IBM WebSphere MQ 队列管理器以发送到远程队列。消息发送正常，但 MQ 在将 MQ 属性放入消息头时删除了 Long 属性。

以前有没有其他人遇到过这个问题？如果是这样，您是如何解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:29:43.660

以下链接能够回答我的问题。我已经测试过了，它可以工作。

我`queue.setMessageBodyStyle(WMQConstants.WMQ_MESSAGE_BODY_JMS);`在 MQQueue 对象上使用将主体样式设置为 JMS，以便保留该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:32:03.400

您设置的属性不会映射到消息头。在旧版本的 WMQ 中，它映射到 RFH2 标头，但在新版本的 WMQ（V7.1 和更高版本）中，可以使用消息属性 setter/getter 方法访问该属性，因此通常看不到 RFH2 标头。

[队列](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/mi203605.htm)和[通道](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/mi203606.htm)`PROPCTL`上存在一个属性来控制您是否看到 RFH2 标头。根据其设置方式，这些属性在有效负载中将不可见，因为不会生成 RFH2 标头。如果您设置 PROPCTL，那么您可以让 WMQ 传递带有 RFH2 标头的消息，您可以在那里看到该属性。否则，您将需要使用属性 getter 方法，但在任何情况下都不会在消息头中看到该属性，因为它不是在那里映射的。

请参阅信息中心主题[*将 JMS 字段映射到 WebSphere MQ 字段（传出消息）*](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/jm25460_.htm)以获取更多信息。

# eclipse-plugin - 可用于为 SalesForce 平台相关 Apex 类生成测试用例的工具或 Eclipse 基础插件

> ID：11945181
> 
> 赞同：1
> 
> 时间：2012-08-14T02:56:20.340
> 
> 标签：eclipse-plugin, salesforce, apex-code

谁能告诉我是否有任何类型的工具或 Eclipse 基础插件可用于为 SalesForce 平台相关的 Apex 类生成相关测试用例。似乎代码覆盖率并不像我们期望的 JUnit 那样出现，他们希望覆盖测试用例是否通过源类的流程（如代码通过）。请不要把这篇文章弄错，我不希望任何人为我的代码编写测试用例:)。由于 SalesForce 的性质期望代码覆盖率应该是，我已经发布了这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:38:23.770

尽管 Salesforce 要求您的测试用例具有一定比例的代码覆盖率，但您确实需要编写用于检查结果的用例，以确保代码按设计运行。

因此，即使有一个工具可以生成代码以 100% 覆盖您的测试类，它也无法测试这些方法调用的结果，从而让您产生一种“已测试代码”的错误感觉。

我发现将长方法分解为单独的、有时是静态的方法可以更容易地进行单元测试。您可以测试每个单独的方法，而不必太担心将参数调整为单个方法，以便它涵盖所有执行路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-28T04:30:03.193

现在可以为您的类/触发器/批处理自动生成测试类。您可以从 AppExchange 安装“测试类生成器”应用程序并查看它是否正常工作。

这将真正帮助您生成测试类并节省大量开发时间。

# c# - 依赖注入如何帮助对象组合？

> ID：11945182
> 
> 赞同：1
> 
> 时间：2012-08-14T02:56:23.540
> 
> 标签：c#, design-patterns, dependency-injection

所以说我有 A、B 和 C 类。A 类有一个单一的责任，但需要 B 类和 C 类的功能，所以起初我想让 A 从 B 和 C 继承，然后通过遵循“继承的组合”来实现原则和使 AI 的 B 和 C 成员可以降低设计的刚性，并使这两个类更具可重用性。

起初 B 和 C 只需要在 A 的构造函数中进行实例化，但最终它们的方法需要在其他两三个地方调用——因为我在其他地方重用了这些类，我忘记调用正确的地方会造成很多不必要的缺陷和浪费时间......我的问题是依赖注入是否有助于解决这个问题，它是否有助于降低使用组合的复杂性，如果是的话如何？

```
public class A
{
     private mB;
     private mC;
     public A(IB b, IC c)
     {
         mB = b;
         mC = c;
     }
     public MethodX()
     {
         mB.DoWhatever();
     }
     public MethodY()
     {
         mC.DoSomething();
     }
} 
```

据我了解，DI 可以让我配置 IB 和 IC 的哪些具体类像这样通过构造函数并处理它的创建 - 但它还有什么帮助（复杂性方面）？

由于不理解这篇文章，我决定问这个问题：http: [//lostechies.com/chadmyers/2010/02/13/composition-versus-inheritance/](http://lostechies.com/chadmyers/2010/02/13/composition-versus-inheritance/)

对于现实生活中的示例，假设我有一个包含 EventListener 类的 State 类，该类必须在 State 调用其 Begin 方法时注册其事件，在调用其 End 方法时取消注册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:19:34.273

依赖注入根本不帮助对象组合。在使用注入之前，您需要一定程度的可组合性。通常，依赖反转用于反转传统的依赖，以便依赖可以通过抽象来建模，这些抽象本身可以被注入到其他东西中，而无需直接耦合。注入是一种反演形式，有助于解耦，而不是合成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:52:15.197

你的推理是合理的，你在正确的轨道上。

通过接口/抽象使用 DI 和组合使得 bot 更容易测试和构建代码。您可以在构建 A 时使用 B 和 C 的临时“假”实现，如果这有助于您的过程。

典型的解决方案是将 A、B 和 C 的构造和配置分解为工厂类或 A 的子类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:17:02.827

我认为您对 DI 的理解是正确的。通过从类 A 中删除类 B 和 C 的实例化，DI 减少了它们之间的耦合。现在类 A 依赖于抽象接口 IB 和 IC，而不是它们的具体实现。这使得 A 类的代码更加灵活（如果需要，您可以通过简单地重新配置 DI 容器轻松地注入 IB 和 IC 的其他一些实现），并且可测试（您可以注入 IB 和 IC 的模拟实现）。此外，可以说它使 A 类的代码更具可读性，因为现在它对协作者 IB 和 IC 的依赖已通过构造函数的签名明确体现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:46:58.743

在处理依赖关系时，依赖注入通过自动化和管理这些依赖关系的创建，在一定程度上抵消了复杂性。（当使用 Autofac 或 Unity 等 IOC 容器实现时）在 A、B 和 C 的简单示例中，可能很难看到任何真正的节省。您开始看到复杂性降低的地方是当您实现依赖于 C 的 D 类时。促进您的 DI 的 IOC 容器将知道如何组合 A、B 和 C（使用 A 和 B），因此您的手卷代码不需要担心创建对象实例以作为依赖项传递。通过复杂性，我指的是管理依赖项所需的代码/保姆数量。

正如 Peter 所指出的那样，IOC 和 DI 真正闪耀的地方在于将依赖关系相互分离，以便可以单独测试代码。如果您想为 C 类编写单元测试，但 C 创建了 A 和 B 的实例，则不能与 A 和 B 隔离测试。当 A 或 B 类似于数据服务或文件服务时，这可以进行单元测试痛苦。利用 IOC，C 接受对那些可以模拟的服务的合约接口的引用。通过这种方式，C 可以通过其依赖项的可预测行为进行测试。

# python - 在 PyQt 中避免崩溃/挂起的良好做法是什么？

> ID：11945183
> 
> 赞同：39
> 
> 时间：2012-08-14T02:56:36.447
> 
> 标签：python, pyqt, pyqt4

我喜欢 python 和 Qt，但对我来说很明显 Qt 在设计时并没有考虑到 python。有许多方法可以使 PyQt / PySide 应用程序崩溃，其中许多方法都非常难以调试，即使使用适当的工具也是如此。

我想知道：在使用 PyQt 和 PySide 时，避免崩溃和锁定的良好做法是什么？这些可以是任何东西，从一般的编程技巧和支持模块到高度具体的解决方法和要避免的错误。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-14T02:56:36.447

# 一般编程实践

*   如果您必须使用多线程代码，永远不要从非 GUI 线程访问 GUI。始终通过发出信号或其他一些线程安全机制来向 GUI 线程发送消息。
*   小心模型/查看任何东西。TableView、TreeView 等。它们很难正确编程，任何错误都会导致无法追踪的崩溃。使用[模型测试](http://qt-project.org/wiki/Model_Test)来帮助确保您的模型在内部是一致的。
*   了解 Qt 对象管理与 Python 对象管理交互的方式以及可能出错的情况。请参阅[http://python-camelot.s3.amazonaws.com/gpl/release/pyqt/doc/advanced/development.html](http://python-camelot.s3.amazonaws.com/gpl/release/pyqt/doc/advanced/development.html)
    *   没有父对象的 Qt 对象由 Python “拥有”；只有 Python 可以删除它们。
    *   具有父对象的 Qt 对象由 Qt“拥有”，如果它们的父对象被删除，Qt 也会将其删除。
    *   示例：[使用 PyQt4 的核心转储](https://stackoverflow.com/questions/18416201/core-dump-with-pyqt4)
*   QObject 通常不应引用其父级或其任何祖先（弱引用是可以的）。这充其量只会导致内存泄漏和偶尔的崩溃。
*   请注意 Qt 自动删除对象的情况。如果 python 包装器没有被告知 C++ 对象已被删除，那么访问它会导致崩溃。由于 PyQt 和 PySide 在跟踪 Qt 对象方面存在困难，这可能以许多不同的方式发生。

    *   复合小部件如QScrollArea及其滚动条、QSpinBox及其QLineEdit等（Pyside没有这个问题）
    *   删除 QObject 将[自动删除其所有子](http://qt-project.org/doc/qt-4.8/qobject.html#dtor.QObject)对象（但 PyQt 通常会正确处理此问题）。
    *   从 QTreeWidget 中删除项目将导致任何关联的小部件（使用 QTreeWidget.setItemWidget 设置）被删除。

        ```
        # Example:
        from PyQt4 import QtGui, QtCore
        app = QtGui.QApplication([])

        # Create a QScrollArea, get a reference to one of its scroll bars.
        w = QtGui.QWidget()
        sa = QtGui.QScrollArea(w)
        sb = sa.horizontalScrollBar()

        # Later on, we delete the top-level widget because it was removed from the 
        # GUI and is no longer needed
        del w

        # At this point, Qt has automatically deleted all three widgets.
        # PyQt knows that the QScrollArea is gone and will raise an exception if
        # you try to access it:
        sa.parent()
        Traceback (most recent call last):
          File "<stdin>", line 1, in <module>
        RuntimeError: underlying C/C++ object has been deleted

        # However, PyQt does not know that the scroll bar has also been deleted.
        # Since any attempt to access the deleted object will probably cause a 
        # crash, this object is 'toxic'; remove all references to it to avoid 
        # any accidents
        sb.parent()
        # Segmentation fault (core dumped) 
        ```

# 具体解决方法/错误

*   更改 QGraphicsItems 的边界而不首先调用 prepareGeometryChange() 可能会导致崩溃。
*   在 QGraphicsItem.paint() 中引发异常可能会导致崩溃。始终在paint() 中捕获异常并显示一条消息，而不是让异常继续未被捕获。
*   QGraphicsItems 永远不应该保留对它们所在的 QGraphicsView 的引用。（weakrefs 可以）。
*   反复使用 QTimer.singleShot 会导致死机。
*   避免将 QGraphicsView 与 QGLWidget 一起使用。

# 避免退出崩溃的实践

*   不属于 QGraphicsScene 的 QGraphicsItem 可能会导致退出时崩溃。
*   引用其父级或任何祖先的 QObjects 可能会导致退出崩溃。
*   没有父级的 QGraphicsScene 会导致退出崩溃。
*   避免退出崩溃的最简单方法是在 python 开始收集 Qt 对象之前调用 os._exit() 。但是，这可能很危险，因为程序的某些部分可能依赖于正确的退出处理才能正常运行（例如，终止日志文件或正确关闭设备句柄）。至少，应该在调用 os._exit() 之前手动调用 atexit 回调。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-15T11:22:18.180

只是补充一点：

如果您必须在基于 qt 的程序中使用线程，您确实必须禁用自动垃圾收集器并在主线程上进行手动收集（如[http://pydev.blogspot.com.br/2014/03/should- python-garbage-collector-be.html](http://pydev.blogspot.com.br/2014/03/should-python-garbage-collector-be.html)）-请注意，即使您确保对象没有循环，也应该这样做（通过循环，您基本上可以使对象存活，直到 python 循环垃圾收集器出现，但是有时，如果您有例外情况，则可能会保持帧处于活动状态，因此，在这种情况下，您的对象可能仍然保持活动的时间比您预期的要长）...在这些情况下，垃圾收集器可能会遇到问题在辅助线程中，这可能导致 qt 段错误（qt 小部件必须始终收集在主线程中）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-20T16:47:53.533

仅供参考，我将[PyQt 的作者对](http://python.6.x6.nabble.com/Keeping-references-to-parent-objects-td5089540.html)Luke 的回答发表评论：“这是垃圾。”

我认为这很重要，因为有人可以跳入这篇文章并仍然对所有这些（不存在的）“问题”感到困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-01T07:41:50.027

发出信号而不是同步 UI 控制是我在实现逻辑电路模拟器时避免问题的关键

# ruby-on-rails - 如何更改设计 401 重定向地址？

> ID：11945185
> 
> 赞同：0
> 
> 时间：2012-08-14T02:56:56.243
> 
> 标签：ruby-on-rails, ruby, authentication, devise

我有一个带有 Devise 的 Rails 3.2.7 应用程序，我想知道在他尝试访问他无法访问的页面后，如何更改 Devise 在 401 上将用户重定向到的 URL。此地址默认为，`http://localhost:3000/users/sign_in`但我想将其更改为指向另一个操作？我怎么做？我必须在我的应用程序中添加猴子补丁 Devise 吗？我觉得这个想法很尴尬...

我很感激任何帮助，

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T03:05:43.737

不幸的是，您将不得不对其进行修补。你可以在这里看到一个很好的教程：[devise wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)

# ruby-on-rails - 阿帕奇和轨道

> ID：11945187
> 
> 赞同：0
> 
> 时间：2012-08-14T02:57:01.680
> 
> 标签：ruby-on-rails, apache

伙计们。

好的。尝试在 apache 上部署 rails 项目。我已经删除了 public/index.html 文件。我无法通过“它有效！” 屏幕。我猜这是一个路由问题——我必须给它正确的文档根目录，这样它才能找到我创建的应用程序的主页，对吧？问题是，我什么都试过了——公用文件夹之外的任何东西似乎都不存在。这是我的 apache 站点可用文件：

```
<VirtualHost *:80>

ServerName localhost
ServerAlias localhost
DocumentRoot /home/feenix/public_html/CRRC/public    

</VirtualHost> 
```

我将rails根更改为“home#index”。我已经尝试将其作为 apache 的文档根目录，但它无法识别它。任何帮助将不胜感激，我应该在哪里寻找正确的文档根目录 - 我是否必须在 rails 项目的公用文件夹中添加一些内容？任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:00:08.230

有用！是 Apache 默认值。这意味着您还没有正确指向 Rails。

你的 DocumentRoot 是正确的。

你有 NameVirtualHosts *:80 设置吗？另外，是否启用了乘客？我假设你正在使用它。

# haskell - 如何从 Haskell 模块导入感叹号（或其他运算符）

> ID：11945188
> 
> 赞同：19
> 
> 时间：2012-08-14T02:57:03.153
> 
> 标签：haskell, import, module

Haskell 有一个[Data.Map](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html)模块，其中包括一个[`!`function](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/containers-0.3.0.0/Data-Map.html#v%3a!)。

```
fromList [(5,'a'), (3,'b')] ! 1    Error: element not in the map
fromList [(5,'a'), (3,'b')] ! 5 == 'a' 
```

虽然我可以将 Data.Map 模块中的其他函数导入到我的代码中......

```
import Data.Map(Map, keys, fromList) 
```

...以下不起作用...

```
import Data.Map(Map, keys, fromList, !) 
```

我收到以下错误：

```
parse error on input `!' 
```

导入项目的正确语法是`!`什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-14T02:57:03.153

正确的答案是将函数名称（实际上，它是一个*运算符*：函数的特殊情况）括在括号中，就像这样......

```
import Data.Map(Map, keys, fromList, (!)) 
```

# windows - 致命：找不到可启动媒体！系统暂停

> ID：11945190
> 
> 赞同：2
> 
> 时间：2012-08-14T02:57:16.243
> 
> 标签：windows, windows-xp, virtual-machine, virtualbox

从 Microsoft.com 下载 Windows XP SP3 ISO 映像[http://www.microsoft.com/en-us/download/details.aspx?id=25129](http://www.microsoft.com/en-us/download/details.aspx?id=25129)我正在使用 Oracle 的 VM VirtualBox 创建一个新的 VM。我使用 VM 加载它并选择媒体作为我刚刚下载的 545 MB .iso，我得到“致命：找不到可启动媒体！系统停止”。

帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T02:58:47.753

该 CD 仅包含 SP3 更新。
它不是完整的 Windows XP 安装 CD，也不能启动。

# mysql - 逗号分隔名称的 MySQL 搜索查询

> ID：11945192
> 
> 赞同：1
> 
> 时间：2012-08-14T02:57:48.453
> 
> 标签：mysql

我正在尝试对带有人名的 sql 表进行“模糊”搜索：

这是表格：

```
+----+------------+
| T1 | T2         |
+----+------------+
| 1  | Last,First |
| 2  | Last,First |
| 3  | Last,First |
+----+------------+ 
```

我想获得一个选择语句，我在其中`T2`使用**`LIKE`**运算符进行查询，这样即使您的查询是**“First Last” ，它也可以工作**

我能想到的唯一方法是拆分值并将它们连接起来，然后再次搜索条目。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:01:52.633

是的，如果您有可能将两者都`last, first`放入`first last`数据库中，那么更好的方法是正确设计您的模式。

如果您发现自己试图搜索或以其他方式操作列的*某些部分，**那么*您的架构几乎肯定会损坏。它几乎肯定会扼杀性能。

 *正确的方法是有这样的表：

```
T1  FirstName  LastName
==  =========  ========
 1  Pax        Diablo
 2  Bob        Smith
 3  George     Jones 
```

然后，您可以更有效地拆分用户输入的名称（一次，在运行查询之前），而不是尝试拆分数据库中的每个名称。

* * *

在*数据库*始终保存的情况下`last, first`，实际上可能不需要模式更改。

在这种情况下，您遇到的问题只是解释用户输入的内容之一。

尽管它是性能杀手，但一种可能性是`like`为每个单独的单词做一个。因此，如果用户输入`pax diablo`，您的查询结果可能是：

```
select T1 from mytable
    where T2 like '%pax%'
      and T2 like '%diablo%' 
```

这样，您就不会太在意订单了。

但是，鉴于我不喜欢缓慢的查询，除非绝对必要（或者您的数据库相对较小并且可能保持这种状态），否则我会尽量避免这种情况。

有各种方法可以加快这些查询的速度，例如：

*   使用您的 DBMS 拥有的任何全文搜索功能。
*   通过在插入/更新触发器期间提取和存储单词（并在删除触发器期间删除它们）来模拟这种能力。
*   前一种情况，但也确保额外的列与当前列的小写值一起使用（为了速度）。
*   告诉用户他们需要使用`last, first`表单进行搜索。
*   尽量避免`%something%`搜索字符串（使用`something%`, 索引仍然可以使用）。
*   我之前提到的“将名称分成两列”的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:01:32.393

你可以试试这个。但更好的是通过分隔名称来重建表的模式。

```
SELECT *
FROM myTable
WHERE T2 LIKE CONCAT('%', 'First', '%','Last', '%') OR
      T2 LIKE CONCAT('%', 'Last', '%','First', '%') 
```*

# php - 使用 array_multisort

> ID：11945196
> 
> 赞同：0
> 
> 时间：2012-08-14T02:58:47.890
> 
> 标签：php, mysql, sorting

查询数据库后，我在脚本开头使用 array_multisort。工作正常。数组已排序。

稍后在同一个脚本中，在对数据库进行另一次查询后，我再次使用 array_multisort。第二次调用的数组长度相同，但长度与最初使用的数组不同。

我在 error_log 中收到“array_multisort 数组大小不一致”警告。数组是否从一个调用持续到下一个调用，因此导致此错误？如果是这样，有没有办法清理函数并删除第二次调用之前使用的初始数组？

以下是包含 var_dump 输出的代码摘要视图：

```
...1st query...

...1st array_multisort use based on the query...
array_multisort($shiftdate, $beg24, $uniquename, $subunit, $unit, $dept, $shiftdetail, $scheduledStaff);

...1st var_dump values based on array_multisort...
array(3) {
  [0]=>
  array(10) {
    ["uniquename"]=>
    string(3) "Bob"
    ["shiftdate"]=>
    string(10) "2012-08-12"
    ["subunit"]=>
    string(1) "1"
    ["unit"]=>
    string(1) "1"
    ["dept"]=>
    string(1) "1"
    ["shiftdetail"]=>
    string(5) "7a-3p"
    ["firstname"]=>
    string(0) ""
    ["lastname"]=>
    string(0) ""
    ["email"]=>
    string(0) ""
    ["beg24"]=>
    string(4) "7.00"
  }
  [1]=>
  array(10) {
    ["uniquename"]=>
    string(4) "Cara"
    ["shiftdate"]=>
    string(10) "2012-08-12"
    ["subunit"]=>
    string(1) "1"
    ["unit"]=>
    string(1) "1"
    ["dept"]=>
    string(1) "1"
    ["shiftdetail"]=>
    string(5) "7a-3p"
    ["firstname"]=>
    string(0) ""
    ["lastname"]=>
    string(0) ""
    ["email"]=>
    string(0) ""
    ["beg24"]=>
    string(4) "7.00"
  }
  [2]=>
  array(10) {
    ["uniquename"]=>
    string(4) "Ryan"
    ["shiftdate"]=>
    string(10) "2012-08-12"
    ["subunit"]=>
    string(1) "1"
    ["unit"]=>
    string(1) "1"
    ["dept"]=>
    string(1) "1"
    ["shiftdetail"]=>
    string(5) "7a-3p"
    ["firstname"]=>
    string(0) ""
    ["lastname"]=>
    string(0) ""
    ["email"]=>
    string(0) ""
    ["beg24"]=>
    string(4) "7.00"
  }
}

...2nd query...

...2nd array_multisort use based on the query...
array_multisort($shiftdate, $beg24, $uniquename, $subunit, $unit, $dept, $shiftdetail, $firstname, $lastname, $email, $scheduledStaffAndThoseWithDetail);

...NOTE: error_log warning occurs at this second array_multisort use...PHP Warning:  array_multisort() [<a href='function.array-multisort'>function.array-multisort</a>]: Array sizes are inconsistent...

...2nd var_dump values based on array_multisort...
array(2) {
  [0]=>
  array(10) {
    ["uniquename"]=>
    string(4) "Ryan"
    ["shiftdate"]=>
    string(10) "2012-08-12"
    ["subunit"]=>
    string(1) "1"
    ["unit"]=>
    string(1) "1"
    ["dept"]=>
    string(1) "1"
    ["shiftdetail"]=>
    string(5) "7a-3p"
    ["firstname"]=>
    string(4) "Ryan"
    ["lastname"]=>
    string(5) "Dobbs"
    ["email"]=>
    string(17) "dobbsr@gmail.com"
    ["beg24"]=>
    string(4) "7.00"
  }
  [1]=>
  array(10) {
    ["uniquename"]=>
    string(4) "Cara"
    ["shiftdate"]=>
    string(10) "2012-08-12"
    ["subunit"]=>
    string(1) "1"
    ["unit"]=>
    string(1) "1"
    ["dept"]=>
    string(1) "1"
    ["shiftdetail"]=>
    string(5) "7a-3p"
    ["firstname"]=>
    string(4) "Cara"
    ["lastname"]=>
    string(6) "Smith"
    ["email"]=>
    string(14) "cara@gmail.com"
    ["beg24"]=>
    string(4) "7.00"
  }
} 
```

# git - git smart http 在 info/refs?service=XXX 上没有身份验证，在 git-upload-pack 和 git-receive-pack 上有身份验证

> ID：11945197
> 
> 赞同：2
> 
> 时间：2012-08-14T02:58:51.107
> 
> 标签：git, apache

如果没有东西被推/拉，我不想提供密码。并允许 git ls-remote 无需密码即可运行

```
*.git/info/refs?service=git-upload-pack
*.git/info/refs?service=git-receive-pack 
```

我只需要验证

```
*.git/git-upload-pack
*.git/git-receive-pack 
```

/etc/apache/httpd.conf

```
<LocationMatch "^/git/.*/git-(upload|receive)-pack$">
    AuthType Basic
    AuthName "staff only"
    AuthUserFile /etc/apache/apache.pwd
    Require valid-user
</LocationMatch> 
```

但是，这不起作用。它根本不要求输入密码。

我使用 Ubuntu 10.04、Apache 2.2.14、Git 1.7.11.3。

目录结构：从 /git 到 .git 文件夹的路径的任意深度（超过 1 个子目录）

# java - >> & 和 0xff 是什么意思

> ID：11945200
> 
> 赞同：-5
> 
> 时间：2012-08-14T02:59:41.273
> 
> 标签：java

> **可能重复：**
> [Java 中按位运算的好教程](https://stackoverflow.com/questions/1956160/good-tutorials-on-bitwise-operations-in-java)
> [是 &、|、^ 位运算符还是逻辑运算符？](https://stackoverflow.com/questions/11597978/are-the-bitwise-operators-or-logical-operators)

代码如下：

```
int rgb[] = new int[] {     
(argb >> 16) & 0xff, //red     
(argb >>  8) & 0xff, //green     
(argb      ) & 0xff  //blue 
}; 
```

我看到一个从 INT 值获取 RGB 值的代码，操作如上，但我以前从未见过这样的操作，我想找到更多关于它们是什么以及它们能做什么的信息，符号 >> 和 &和 0xff。

那么，你们都用 Java 解决了哪些问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T04:07:19.853

位运算的进一步解释。让我们假设 int 位如下所示：

```
00000000 10101010 01010101 11011011
unused   red      green    blue 
```

要获得蓝色的 int 值，您需要关闭除低 8 位之外的所有位。执行此操作的简单方法是使用按位与。0xff 也可以写成 0x000000ff，将高 24 位设置为 0，只打开低 8 中已经设置为 1 的位。

```
argb & 0xff ==> 00000000 00000000 00000000 11011011
                                           blue

argb >> 8 ==> 00000000 00000000 10101010 01010101 
                                red      green
(argb >> 8) & 0xff ==> 00000000 00000000 00000000 01010101 
                                                  green

argb >> 16 ==> 00000000 00000000 00000000 10101010
                                          red
(argb >> 16) & 0xff ==> 00000000 00000000 00000000 10101010
                                                   red 
```

即使认为红色值上的 & 0xff 似乎没有必要，也不能保证调用者可能没有设置一些未使用的高位位，因此您希望安全并关闭所有这些位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:05:51.440

```
int rgb[] = new int[] {     
(argb >> 16) & 0xff, //red     
(argb >>  8) & 0xff, //green     
(argb      ) & 0xff  //blue 
}; 
```

`>>`: 算术右移。也称为有*符号*移位。

`&`: 按位与

`0x....`: 十六进制数。

但它在做什么？

`(argb >> 16) & 0xff`将 16 位的值右移`argb`，然后执行按位与运算以仅捕获 8 位。这实际上是从位 16-23 获取字节

# c# - 如何获取网址的内容类型？

> ID：11945201
> 
> 赞同：9
> 
> 时间：2012-08-14T02:59:43.630
> 
> 标签：c#, .net, c#-4.0, content-type

我想获取网址的类型。例如[，这](http://feed.2barnamenevis.com/2barnamenevis)是一个 Html 页面，它的页面类型是`text/html`但是[this](http://feed.2barnamenevis.com/2barnamenevis?format=xml)的类型是`text/xml`。[此](http://bayanbox.ir/user/ahmadalli/images/div.png)页面的类型似乎是，`image/png`但它是`text/html`.

**我想知道如何检测这样的网址的内容[类型](http://bayanbox.ir/user/ahmadalli/images/div.png)？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T03:07:56.507

它应该是这样的

```
 var request = HttpWebRequest.Create("http://www.google.com") as HttpWebRequest;
    if (request != null)
    {
        var response = request.GetResponse() as HttpWebResponse;

        string contentType = "";

        if (response != null)
            contentType = response.ContentType;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:13:01.377

阅读 HTTP 标头。

HTTP 标头会告诉您内容类型。例如：

> 内容类型：应用程序/xml。

有两种方法来确定内容类型

1.  URL 调用的文件扩展名
2.  http 标头内容类型

第一个是微软在过去有点推广的，不再是一个好的做法。

如果客户端具有仅接受某些内容类型的显示约束，它将向服务器请求标头，例如

```
accept: application/json
accept: text/html
accept: application/xml 
```

然后，如果服务器可以提供其中一个并选择 XML，它将返回带有标题的内容

```
content-type: application/xml. 
```

但是，某些服务包括更多信息，例如

```
content-type: application/xml; charset=utf-8 
```

而不是使用自己的标头进行字符编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:04:15.810

HTTP 响应标头：`content-type`

如需更详细的回复，请提供更详细的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T03:05:09.340

您可以`Content-Type`通过响应的 Http 标头来检测，对于[http://bayanbox.ir/user/ahmadalli/images/div.png](http://bayanbox.ir/user/ahmadalli/images/div.png)，标头是

```
Connection:keep-alive
Content-Encoding:gzip
Content-Type:text/html; charset=utf-8
Date:Tue, 14 Aug 2012 03:01:41 GMT
Server:bws
Transfer-Encoding:chunked
Vary:Accept-Encoding 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T03:07:23.643

```
using (MyClient client = new MyClient())
    {
        client.HeadOnly = true;
        string uri = "http://www.google.com";
        byte[] body = client.DownloadData(uri); // note should be 0-length
        string type = client.ResponseHeaders["content-type"];
        client.HeadOnly = false;
        // check 'tis not binary... we'll use text/, but could
        // check for text/html
        if (type.StartsWith(@"text/"))
        {
            string text = client.DownloadString(uri);
            Console.WriteLine(text);
        }
    } 
```

无需下载页面即可从标题中获取 mime 类型。只需在响应标头中查找内容类型。

# php - WordPress - 单个帖子不吸引人

> ID：11945202
> 
> 赞同：-1
> 
> 时间：2012-08-14T02:59:55.650
> 
> 标签：php, wordpress

我已经建立了一个基于 2011 主题的 wordpress 模板。我似乎在某个地方出错了......在一个帖子上，我没有在头疼。

我已经完全删除了 single.php 以试图追查问题，页面仍然显示相同。

这是我指的页面...

[http://bost.themediafeed.com/taken-on-a-recent-lunch-and-learn-tour-of-the/attachment/372/](http://bost.themediafeed.com/taken-on-a-recent-lunch-and-learn-tour-of-the/attachment/372/)

```
<?php

/**
* The Header for our theme.
*
* Displays all of the <head> section and everything up till <div id="main">
*
 * @package WordPress
 *
*/

?><!DOCTYPE html>

<head>

<meta charset="<?php bloginfo( 'charset' ); ?>" />

<meta name="viewport" content="width=device-width" />

<title><?php

/*

 * Print the <title> tag based on what is being viewed.

 */

global $page, $paged;

wp_title( '|', true, 'right' );

// Add the blog name.

bloginfo( 'name' );

// Add the blog description for the home/front page.

$site_description = get_bloginfo( 'description', 'display' );

if ( $site_description && ( is_home() || is_front_page() ) )

    echo " | $site_description";

// Add a page number if necessary:

if ( $paged >= 2 || $page >= 2 )

    echo ' | ' . sprintf( __( 'Page %s', 'twentyeleven' ), max( $paged, $page ) );

?></title>

<link rel="profile" href="http://gmpg.org/xfn/11" />

<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" />

<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />

<!--[if lt IE 9]>

<script src="<?php echo get_template_directory_uri(); ?>/js/html5.js" type="text/javascript"></script>

<![endif]-->

<?php

if ( is_singular() && get_option( 'thread_comments' ) )

    wp_enqueue_script( 'comment-reply' );

wp_head();

?>

</head> 
```

```
<?php get_header(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:32:28.610

您正在链接到附件页面，而不是帖子。如果不存在特定的附件页面，我相信附件默认为 page.php 模板。

# python - 如何通过Django中的外键访问过滤器参数中的数据？

> ID：11945206
> 
> 赞同：1
> 
> 时间：2012-08-14T03:00:12.823
> 
> 标签：python, django, django-models, foreign-keys, django-views

我有两个模型：用户（由 Django 预定义）和通过外键连接的 UserProfile。

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, related_name="connect")
    location = models.CharField(max_length=20, choices=LOCATION_CHOICES)
    gender = models.CharField(max_length=20, choices=GENDER_CHOICES) 
```

User 模型包含诸如用户名、名字、姓氏和密码等字段。

在我看来，我想使用位于用户对象中的用户名字段来查找用户配置文件对象。要使用用户名字段过滤/获取 UserProfile 对象，我需要“遍历”外键以访问用户模型。

但是，我在尝试执行此操作时遇到了几个错误。有谁知道我该怎么做？

这是我到目前为止所拥有的：

```
def edit(request):
    #the line below is where I am facing troubles. 
    #The error I'm getting is SyntaxError: keyword can't be an expression
    user = UserProfile.objects.filter(user.username=request.user.username)

    form1 = UserEditForm()
    form2 = UserProfileEditForm()
    c = RequestContext(request, {
        'action': 'update/',
        'button': 'Update', 
        'form1': form1,
        'form2': form2,
        })
    return render_to_response('registration/user_profile.html', c) 
```

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T03:01:33.690

使用双下划线 ( `__`) 来遍历关系。例如：

```
user = UserProfile.objects.filter(user__username=request.user.username) 
```

但是，在您的情况下，您不需要这样做。`request.user` *是*一个`User`对象，所以要让他们`UserProfile`做：

```
user = request.user.get_profile() 
```

甚至：

```
UserProfile.objects.get(user=request.user) 
```

请注意，您的第一个示例应返回`QuerySet`带有 1 个结果的结果，而第二个示例应返回单个对象。换句话说：

```
request.user.get_profile() == 
    UserProfile.objects.filter(user__username=request.user.username)[0] 
```

# php - 如何在 Symfony2 Doctrine2 中获得不同的 DBAL 连接

> ID：11945213
> 
> 赞同：2
> 
> 时间：2012-08-14T03:01:48.260
> 
> 标签：php, symfony, doctrine-orm

我的 config.yml 文件中有两个连接

```
doctrine:
      dbal:
         default:
         connection2 
```

然后在我的课上，我用这个

`$em = $this->container->get('doctrine')->getEntityManager();`

但它正在获得默认连接。我如何使用第二个连接

我可以从服务中使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:29:12.097

您必须在 config.yml 中定义 DBAL 连接和实体管理器

```
doctrine:
    dbal:
        default_connection:   connection1
        connections:
            connection1:
                ...
            connection2:
                ...
    orm:
        default_entity_manager: em1
        entity_managers:
            em1:
                 connection: connection1
                 ....
            em2:
                 connection: connection2 
```

不，您可以通过以下方式访问实体管理器：

```
$em = $this->container->get('doctrine')->getEntityManager();
// Returns $em1/connection1

$em = $this->container->get('doctrine')->getEntityManager('em1');
// Returns $em1/connection1

$em = $this->container->get('doctrine')->getEntityManager('em2');
// Returns $em2/connection2 
```

# google-maps-api-3 - 如何在谷歌地图 api v3 中更新 kml 文件？

> ID：11945214
> 
> 赞同：0
> 
> 时间：2012-08-14T03:01:49.767
> 
> 标签：google-maps-api-3, kml

我的 KML 文件已上传到我的 Google 地图帐户。但是如何在不再次上传的情况下更新它。例如，我想允许用户在网站中更改一个多边形的颜色。用户可以使用我的帐户更新我的 KML 文件并动态显示吗？

首先，我尝试使用 Google Maps Data API 并登录我的帐户，但它不起作用。

```
 <form  method="post" action="https://www.google.com/accounts/ClientLogin"> 
<input type="hidden" name="accountType" value="GOOGLE" /> 
<input type="hidden" name="Email" value="**@gmail.com" /> 
<input type="hidden" name="Passwd" value="***" /> 
<input type="hidden" name="service" value="local" /> 
<input type="hidden" name="source" value="mycompany-myapp-1" /> 
<input type="submit" name="submit" value="Submit" /> 
</form> 
```

然后我得到 auth="DQ* *** "，并使用此身份验证执行下一步：

```
 <form method="get" action="http://maps.google.com/maps/feeds/maps/default/full"> 
<input type="hidden" name="Authorization" value="GoogleLogin" /> 
<input type="hidden" name="auth" value="DQ***"/> 
<input type="submit" name="submit" value="submit" /> 
```

会报错......

其实我只是想做一个网页，让用户自己制作阴影贴图。我有一个组合许多多边形的 KML 文件。这些多边形有不同的风格。用户如何更新多边形的样式？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:41:34.377

其他用户无法更改您的 Google 地图帐户数据。

一种选择是将 kml 导入 FusionTable，然后使用动态样式更改其颜色。如果您希望他们能够更改颜色并保存更改，您可以编写代码来更改 FusionTable 中的样式信息，但是每个人都会看到更改，不清楚这是否是您想要的。

# javascript - JavaScript：“函数体后缺少语法错误}”

> ID：11945216
> 
> 赞同：7
> 
> 时间：2012-08-14T03:02:06.193
> 
> 标签：javascript, ajax, syntax-error

好的，所以你知道错误，但我到底为什么会得到它？

当它在本地运行时，我完全没有错误，但是当我上传我的项目时，我得到了这个烦人的语法错误。我检查了[Firebug](https://en.wikipedia.org/wiki/Firebug_%28software%29)错误控制台，它没有帮助，因为它把我所有的源代码放在同一行，我通过 Lint 解析它似乎也没有找到问题 - 我刚刚结束了格式化我的牙套以我讨厌的方式不同；与声明在同一行，bleug。

```
function ToServer(cmd, data) {
    var xmlObj = new XMLHttpRequest();
    xmlObj.open('POST', 'handler.php', true);
    xmlObj.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xmlObj.send(cmd + data);
    xmlObj.onreadystatechange = function() {
        if(xmlObj.readyState === 4 && xmlObj.status === 200) {
            if(cmd == 'cmd=push') {
                document.getElementById('pushResponse').innerHTML = xmlObj.responseText;
            }
            if(cmd == 'cmd=pop') {
                document.getElementById('messages').innerHTML += xmlObj.responseText;
            }
            if(cmd == 'cmd=login') {
                if(xmlObj.responseText == 'OK') {
                    self.location = 'index.php';
                }
                else {
                    document.getElementById('response').innerHTML = xmlObj.responseText;
                }
            }
        }
    }
}

function Login() {
    // Grab username and password for login
    var uName = document.getElementById('uNameBox').value;
    var pWord = document.getElementById('pWordBox').value;
    ToServer('cmd=login', '&uName=' + uName + '&pWord=' + pWord);
}

// Start checking of messages every second
window.onload = function() {
    if(getUrlVars()['to'] != null) {
        setInterval(GetMessages(), 1000);
    }
}

function Chat() {
    // Get username from recipient box
    var user = document.getElementById('recipient').value;
    self.location = 'index.php?to=' + user;
}

function SendMessage() {
    // Grab message from text box
    var from = readCookie('privateChat');
    var to = getUrlVars()['to'];
    var msg = document.getElementById('msgBox').value;
    ToServer('cmd=push','&from=' + from + '&to=' + to + '&msg=' + msg);
    // Reset the input box
    document.getElementById('msgBox').value = "";
}

function GetMessages() {
    // Grab account hash from auth cookie
    var aHash = readCookie('privateChat');
    var to = getUrlVars()['to'];
    ToServer('cmd=pop','&account=' + aHash + '&to=' + to);
    var textArea = document.getElementById('messages');
    textArea.scrollTop = textArea.scrollHeight;
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
    });
    return vars;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T03:13:31.487

问题是您服务器上的脚本在一行中，并且您在其中有注释。后面的代码`//`将被视为注释。这就是原因。

```
function ToServer(cmd, data) { var xmlObj = new XMLHttpRequest(); xmlObj.open('POST', 'handler.php', true); xmlObj.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); xmlObj.send(cmd + data); xmlObj.onreadystatechange = function() { if(xmlObj.readyState === 4 && xmlObj.status === 200) {  if(cmd == 'cmd=push') {  document.getElementById('pushResponse').innerHTML = xmlObj.responseText;  }  if(cmd == 'cmd=pop') {  document.getElementById('messages').innerHTML += xmlObj.responseText;  }  if(cmd == 'cmd=login') {  if(xmlObj.responseText == 'OK') {   self.location = 'index.php';  }  else {   document.getElementById('response').innerHTML = xmlObj.responseText;  }  }   } };}function Login() { // Grab username and password for login var uName = document.getElementById('uNameBox').value; var pWord = document.getElementById('pWordBox').value; ToServer('cmd=login', '&uName=' + uName + '&pWord=' + pWord);}// Start checking of messages every secondwindow.onload = function() { if(getUrlVars()['to'] != null) { setInterval(GetMessages(), 1000); }}function Chat() { // Get username from recipient box var user = document.getElementById('recipient').value; self.location = 'index.php?to=' + user;}function SendMessage() { // Grab message from text box var from = readCookie('privateChat'); var to = getUrlVars()['to']; var msg = document.getElementById('msgBox').value; ToServer('cmd=push','&from=' + from + '&to=' + to + '&msg=' + msg); // Reset the input box document.getElementById('msgBox').value = "";}function GetMessages() { // Grab account hash from auth cookie var aHash = readCookie('privateChat'); var to = getUrlVars()['to']; ToServer('cmd=pop','&account=' + aHash + '&to=' + to); var textArea = document.getElementById('messages'); textArea.scrollTop = textArea.scrollHeight;}function readCookie(name) { var nameEQ = name + "="; var ca = document.cookie.split(';'); for(var i=0;i < ca.length;i++) { var c = ca[i]; while (c.charAt(0)==' ') c = c.substring(1,c.length); if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length); } return null;}function getUrlVars() { var vars = {}; var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) { vars[key] = value; }); return vars;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:05:14.010

您缺少一个分号：

```
function ToServer(cmd, data) {
    var xmlObj = new XMLHttpRequest();
    xmlObj.open('POST', 'handler.php', true);
    xmlObj.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xmlObj.send(cmd + data);
    xmlObj.onreadystatechange = function() {
        if(xmlObj.readyState === 4 && xmlObj.status === 200) {
            if(cmd == 'cmd=push') {
                document.getElementById('pushResponse').innerHTML = xmlObj.responseText;
            }
            if(cmd == 'cmd=pop') {
                document.getElementById('messages').innerHTML += xmlObj.responseText;
            }
            if(cmd == 'cmd=login') {
                if(xmlObj.responseText == 'OK') {
                    self.location = 'index.php';
                }
                else {
                    document.getElementById('response').innerHTML = xmlObj.responseText;
                }
            }           
        }
    }; //<-- Love the semi
} 
```

额外缺少的分号：

```
// Start checking of messages every second
window.onload = function() {
    if (getUrlVars()['to'] != null) {
        setInterval(GetMessages(), 1000);
    }
}; //<-- Love this semi too! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T03:08:52.113

我认为您可以在这里采用[分而治之的](http://en.wikipedia.org/wiki/Divide_and_conquer_algorithm)方法。删除脚本的后半部分，看看是否出现错误。如果没有，请删除第一部分并查看。这是我遇到此类问题时遵循的一种技术。一旦你找到有错误的那一半，然后再细分那一半，直到你确定错误的位置。

这将帮助我们识别实际的错误点。

我认为这个脚本没有任何问题。

这可能不是您想要的确切解决方案，但它是一种定位和解决问题的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T03:17:23.167

![在此处输入图像描述](../Images/903290611893af9e8af3dc8ae25bbed0.png)

看起来它被解释为全部在一条线上。[在Fiddler 2](https://en.wikipedia.org/wiki/Fiddler_%28software%29)中查看相同的结果。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-29T16:41:23.627

这个问题可能是由于您的 JavaScript 代码的注释被缩小了。如果是这样并且您想保留您的评论，那么请尝试更改您的评论 - 例如，从此：

`// Reset the input box`

...到...

`/* Reset the input box */`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T03:15:48.147

似乎也应该在以下代码中添加另一个分号：

```
// Start checking of messages every second
window.onload = function() {
    if(getUrlVars()['to'] != null) {
        setInterval(GetMessages(), 1000);
    }
};  <---- Semicolon added 
```

同样在此代码中，定义`var`函数的顶部

```
function readCookie(name) {
    var i;
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-21T21:24:49.427

“嗯，我想我找到了线索……我正在使用[Notepad++](https://en.wikipedia.org/wiki/Notepad%2B%2B)，直到最近才使用我的[cPanel](https://en.wikipedia.org/wiki/CPanel)文件管理器来上传我的文件。在我使用[FireZilla](https://duckduckgo.com/html/?q=Wikipedia%20FireZilla) FTP 客户端之前一切都很好。我假设 FTP 客户端正在改变我的 JS 和 PHP 文件的格式或编码。-"

我相信这是你的问题（你可能已经解决了）。在遇到这个愚蠢的错误后，我刚刚尝试了一个不同的 FTP 客户端，它运行得完美无缺。我假设我使用的代码（由不同的开发人员编写）也没有正确关闭评论。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-14T04:57:15.953

添加注释：非常奇怪的是，这个错误非常随机地出现，一切正常。

> 函数体后缺少语法错误 } | 在 index.html 的第 0 行

看来我在脚本的不同部分使用了一些花哨的 Unicode 字符来获得不同的注释`/**/`。`//`

为了清晰和解析，这对我很有用。

但是，如果在执行任何 JavaScript 之前，在注释中的 JavaScript 文件中使用了这个**Unicode 字符和可能的其他一些字符，则错误是随机产生的。**

这可能与 JavaScript 文件在被父页面调用和读取之前不是 UTF-8 的事实有关。当 DOM 准备好时，它是 UTF-8。我说不出来。

# xml - 在应用程序中使用数据库/数据源的组合

> ID：11945217
> 
> 赞同：0
> 
> 时间：2012-08-14T03:02:14.157
> 
> 标签：xml, database, web-applications, nosql

构建一个使用两种不同方法在应用程序中存储数据的应用程序是否有意义？用一个例子来澄清我的意思可能最容易：

假设我在经营一家在线书店，需要跟踪书籍、客户、订单等。我的本能是使用关系数据库来保存此类信息。现在，假设当我的客户有我的帐户时，他们可以通过各种方式配置他们的主页。例如，假设有一个时钟小部件，它可以有不同的类型（模拟/数字）、颜色，并且可以放置在页面上的任何位置（或根本不显示）。我们希望存储此信息，以便在客户登录时，小部件的类型、颜色和位置都正确。也许客户可能使用或不使用多个小部件，每个小部件都有自己的属性。换句话说，客户特定的属性需要灵活。我对这种事情的直觉是将这些信息以另一种格式存储，例如 XML，尽管到目前为止我还不需要在任何项目中使用 XML。在我看来，像 MongoDB 这样的东西可能对保存这类信息有意义，但我对它的了解还不够多，无法做出明智的判断。

分离出此类信息是否有意义，或者是否应该抽象关系数据库以保存此类信息？我敢肯定这里没有正确的答案，但您的见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:20:06.150

最确定的是，例如，我开发了一个 Ruby on Rails 社交应用程序，它结合使用了[Couchbase](http://www.couchbase.com/)（NoSQL 文档数据库）和[Neo4J](http://neo4j.org)（NoSQL 图形数据库），将 Couchbase 用于大量数据，包括实时聊天和评论（类似推特的流），Neo4J 有一些重复的数据，但主要用于通过社交网络（图表）进行内容发现。

在性能、一致性和可扩展性方面，Couchbase 处于领先地位，并且有许多依赖于它的大容量和可扩展应用程序示例。Couchbase 和 MongoDB 将数据存储为 JSON，但您也可以存储序列化的对象。如果您使用的是 XML，则转换为 JSON 并返回非常简单。

# java - 禁用 JButtons 从键盘读取事件

> ID：11945221
> 
> 赞同：1
> 
> 时间：2012-08-14T03:03:08.277
> 
> 标签：java, swing, jpanel, jbutton, keyboard-events

我有两个 JPanel。在第一个中，我有 3 个 JButton，第二个是根据从键盘读取的事件绘制图像。如果我设置 JButtons，`setEnabled(false);`我可以按预期使用键盘事件（如果我按下向上箭头，图像会向上移动），但是当按钮启用时，图像不会发生任何事情。甚至，如果我按下空格键，它的行为就像我点击按钮一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:06:52.623

问题不在于 JButton，而可能是因为您使用了 KeyListener。如果可以避免，请不要将 KeyListeners 与 Swing GUI 一起使用，而是使用 Key Bindings。KeyListeners 仅在被监听的组件具有焦点时才起作用，并且当您存在 JButtons 时，它们将获取焦点并阻止您的 KeyListener 工作。键绑定，如果做得好，可以避免这个问题。

例如，请[在此处](https://stackoverflow.com/a/8395148/522444)查看我的代码示例。

# php - 在 PHP 中比较两个日期

> ID：11945222
> 
> 赞同：0
> 
> 时间：2012-08-14T03:03:09.077
> 
> 标签：php, date, datepicker

我在比较两个日期时遇到问题。用户将从 Datepicker 中选择具有格式 ('Ymd') 的日期。如果输入不等于当前日期，则会显示错误消息，否则将显示输出。

我有这个代码：

```
$today = date("Y-m-d");
$date = $_REQUEST['selected_date']; // date selected
$first = strtotime($today);             
$second = strtotime($date);

if ($first != $second){
    //error message 
}else{
    //some code
} 
```

这在本地工作正常，但是当我尝试上传它时，它不再工作了。相反，可以接受前一个日期而不是当前日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:05:55.040

服务器上的时区设置可能与本地计算机上的设置不同。

尝试打印出 和 的`$first`值`$second`。

[`date_default_timezone_set()`](http://php.net/manual/en/function.date-default-timezone-set.php)如果您使用任何旧式 PHP 日期函数（等）`date`，您可以（并且应该）设置 PHP 使用的时区。`strtotime`

虽然我建议使用带有新代码的[`DateTime`](http://www.php.net/manual/en/class.datetime.php)&[`DateTimeZone`](http://www.php.net/manual/en/class.datetimezone.php)类，但它们更易于使用，尤其是当您正在做任何涉及多个时区的事情时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:15:48.207

希望我能正确理解你的情况。直接攻击这个会失败很多次，因为服务器时区（你通过`date()`的）将与客户端时区不同。为避免此问题，您需要通过 javascript 将客户端时间发送到您的服务器。jQuery 示例可能如下所示：

```
var date = new Date();

$.post("index.php", { today: (today.getMonth() + 1) + "/" + today.getDate() + "/" + today.getFullYear()}, function(data) {

alert(data); //server response here

}); 
```

在服务器上，您可以通过`$_POST['today']`. 然后您可以决定如何处理它并将其输出给您的客户。

或者，您所描述的问题可以仅通过 JavaScript 解决，而无需将其发送到您的服务器，除非您想在您的服务器上对其进行处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:07:08.520

服务器是否有可能与请求来自不同的时区？我认为这可能会导致不匹配。

# ruby-on-rails-3 - 关系模型 university.campus 的 Method_missing

> ID：11945225
> 
> 赞同：0
> 
> 时间：2012-08-14T03:03:51.937
> 
> 标签：ruby-on-rails-3

我有 3 个表：用户、大学和校园。他们的模型如下：

```
class User < ActiveRecord::Base
  belongs_to :university
end

class Campus < ActiveRecord::Base
  belongs_to :university
end

class University < ActiveRecord::Base
  has_many :users, dependent: :destroy
  has_many :campuses, dependent: :destroy
end 
```

但是我在从大学获得校园协会时遇到了问题。检查这个：

```
1.9.2p290 :012 > u = University.find(3)
 => #<University id: 3, name: "myuni", email: "uni.com", created_at: "2012-06-04 03:48:59", updated_at: "2012-06-13 03:22:18"> 
1.9.2p290 :013 > u.users
 => [#<User id: 21, name: "myname", email: "myemail", password: "asdfgh", created_at: "2012-08-10 23:42:40", updated_at: "2012-08-10 23:42:40", university_id: 3>] 
1.9.2p290 :014 > u.campus
NoMethodError: undefined method `campus' for #<University:0x000000031c8a10>
        from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/activemodel-3.0.10/lib/active_model/attribute_methods.rb:392:in `method_m
issing'
        from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.0.10/lib/active_record/attribute_methods.rb:46:in `method_
missing'
        from (irb):14
        from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in `start'
        from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in `start'
        from /home/mari/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.0.10/lib/rails/commands.rb:23:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

这可能是由于校园的多元化，但[我也无法解决这个问题](https://stackoverflow.com/questions/11943432/naming-convention-in-rails-with-table-named-campus)。所以我尝试了 u.campu、u.campuses、u.campues，但我得到了相同的“NoMethodError”。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:59:21.230

似乎添加：

```
 set_table_name 'campus' 
```

模型：campus.rb 修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:07:18.730

语法是`u.campuses`或`u.campuses.first`

我还将表格组织为：

```
class User < ActiveRecord::Base
  belongs_to :campus
end

class Campus < ActiveRecord::Base
  has_many :users, dependent: :destroy
  belongs_to :university
end

class University < ActiveRecord::Base
  has_many :campuses, dependent: :destroy
end 
```

# ruby-on-rails - 无论如何要撤消rails控制台中的activerecord删除吗？

> ID：11945227
> 
> 赞同：23
> 
> 时间：2012-08-14T03:04:08.533
> 
> 标签：ruby-on-rails, rails-activerecord

我在脚本/控制台中犯了一个令人难以置信的可怕错误：

```
user.delete 
```

有没有办法在同一个脚本/控制台会话中撤消它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-11-22T16:55:49.513

好吧，如果您仍然可以访问已删除的记录，您可以像这样创建一个新副本

```
User.new(user.attributes_hash).save 
```

这只会创建一个具有*完全相同*属性的用户（是的，也是 id）并将其保存到数据库中。我用它来撤消使用闪光灯的破坏动作。

**警告。**如果您使用了该`User#destroy`方法并且您的模型与`dependent: :destroy`or有关系`dependent: :delete`，那么那些依赖记录（如果在执行命令时存在）将丢失。当然，除非您对已删除/销毁的记录有活动引用，即变量。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-14T12:16:24.880

我也不知道有什么办法，你的 shell 历史中可能仍然有这些信息。（只需向上滚动直到您执行`user.delete`）。您可以手动恢复用户实例，如果您有依赖项/关联，这会变得很棘手。

对于未来：您可能希望通过以下方式以沙盒模式启动控制台：

```
rails console -s 
```

关闭后，所有更改都将回滚。

**编辑：请查看[Arne L.'s Answer](https://stackoverflow.com/a/27079964/980524)**如果对象仍然可用，它显示了一种将用户保存到数据库的方法。这比我建议的要好得多（“手动恢复用户”）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T03:10:25.463

抱歉不行。除非您使用像 Papertrail 这样的 gem 来保存您的更改历史记录，否则记录就消失了。

# joomla - 如何显示所有语言的默认页面？

> ID：11945237
> 
> 赞同：0
> 
> 时间：2012-08-14T03:05:26.900
> 
> 标签：joomla, joomla2.5

我正在 Joomla 2.5 中建立一个多语言网站。是否可以使用“语言全部”显示默认页面？

open example.com/ ------ 选择语言 en/zh
if 'en'
go to example.com/en/
else if 'zh'
go to example.com/zh/

我的问题是，当我打开“example.com/”时，它总是直接跳转到“example.com/en/”或“example.com/zh/”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:58:38.233

安装多语言包后，Joomla 将重定向到默认语言包。如果您想更好地控制您的语言并为用户提供语言选择器，那么我建议您安装[JoomFish](http://www.joomfish.net/)。

我已经很长时间没有使用 JoomFish，但可能有一个参数可以在进入站点时禁用 url 末尾的语言代码，如果不需要，可能需要 htaccess 配置。

# objective-c - 使用 suez 在目标 c 中传递复杂对象

> ID：11945238
> 
> 赞同：0
> 
> 时间：2012-08-14T03:05:31.753
> 
> 标签：objective-c, ios, sudzc

我正在使用 sudzc 与 WCF 服务进行通信。该方法需要一个复杂的对象（“Category”）并处理请求。调用服务的代码是：

```
SDZiPadDocSyncService *service = [SDZiPadDocSyncService service];
SDZCategory *cat = [[SDZCategory alloc]init];
cat.categoryId = (int) catId;
[service getDocsByCatId:self action:@selector(getDocsByCatIdHandler:) category:cat]; 
```

处理程序的代码是：

```
- (void) getDocsByCatIdHandler: (id) value {
        NSLog(@"value=%@",value);
        NSMutableArray* result = (NSMutableArray*)value;
    NSLog(@"getDocsByCatId returned the value: %@", result);     
    } 
```

“NSLog”（值和结果）都返回空白结果，即其中没有任何数据。我必须以不同的方式调用该方法吗？

编辑：- 我在前一行初始化“catId”。所以，catId 不是空白的。

# c# - 设置 RadioButton 的 Checked 属性后选项卡索引不起作用

> ID：11945242
> 
> 赞同：2
> 
> 时间：2012-08-14T03:05:58.463
> 
> 标签：c#, winforms

我有一个包含 2 个组框的表单，每个组框都包含一个单选按钮调用 radioButton1（选项卡索引：0）和 radioButton2（选项卡索引：1）。

![在此处输入图像描述](../Images/5206571dd74e74f28506575e6574cfe2.png)

在第一次运行时，radioButton1会被选中而另一个没有，当我在键盘上按Tab键时，焦点会跳转到radiobutton（见上图，真的很好），但是当我选中radiobButton2然后按Tab键时，焦点没有跳转到radioButton1，这是为什么呢？这是我检查radioButton2时的方法：

```
private void radioButton2_CheckedChanged(object sender, EventArgs e)
    {
        radioButton1.Checked = false;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T03:22:55.357

清除选中的属性就是清除单选按钮上的 tabstop 属性。

重置它将解决问题：

```
 private void radioButton2_CheckedChanged( object sender, EventArgs e )
  {
     radioButton1.Checked = false;
     radioButton1.TabStop = true;
  } 
```

# java - 检查空字符串以进行错误检查

> ID：11945243
> 
> 赞同：-2
> 
> 时间：2012-08-14T03:05:59.533
> 
> 标签：java, swing, object, methods, if-statement

为什么此方法会导致运行时错误？我知道 calc 不适用于空字符串，所以如果是这种情况，我将 hour 设置为 0。

称呼：

```
String hoursJLabel = actionObject.calculateHours();
totalHours.setText(hoursJLabel); 
```

方法：

```
public String calculateHours (){
    double sum = 0;
    double hour = 0;
    for (int i = 0; i < 7; i++) {
        if (hourArray[i].getText() != "") {
            hour = Double.parseDouble(hourArray[i].getText());
        }
        else  {
            hour = 0;
        }
    }
    sum += hour;
    return String.format("%.2f", sum);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:11:59.080

要检查非 null`String`是否为空，请使用`length()`方法：

```
if (hourArray[i].getText().length() == 0) ... 
```

如果字符串可以是，请在长度*前*`null`添加一个检查，如下所示：

 *```
String str = hourArray[i].getText();
if (str != null && str.length() == 0) ... 
```

如果您使用 Java-6 或更高版本，则可以进一步简化它：

```
String str = hourArray[i].getText();
if (str != null && str.isEmpty()) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:47:02.023

有多种可能发生运行时错误`calculateHours()`：

*   `hourArray`是`null`并抛出一个`NullPointerException`
*   any`hourArray[i]`为 null 并抛出一个`NullPointerException`
*   `hourArray[i].getText()`无法解析为 a`Double`并抛出 a`NumberFormatException`
*   您的`hourArray`可能包含少于 7 个元素，这会引发`IndexOutOfBoundsException`

除此之外，这`hourArray[i].getText() != ""`是一个不好的比较，因为它不检查`null`并检查两个对象是否是同一个对象，而不是它们是否相等。

另外，我猜你想`sum += hour`在循环里面有，否则`sum`会包含最后一个值`hourArray`。

因此，您的方法应如下所示：

```
public String calculateHours (){
    double sum = 0;
    if(hourArray != null){ // hourArray might be null
        double hour = 0;
        for (int i = 0; i < hourArray.length; i++) { // use .length here
            // check for nulls and empty String
            if (hourArray[i] != null && hourArray[i].getText() != null 
                                     && !"".equals(hourArray[i].getText())) {
                try{ // the text might can not be parsed to a double
                    hour = Double.parseDouble(hourArray[i].getText());
                }catch(NumberFormatException ex){
                    hour = 0;
                }
            }
            else  {
                hour = 0;
            }
            sum += hour; // I guess you want that inside your loop
        }
    }
    return String.format("%.2f", sum);
} 
```

无论如何，如果这个类的编写方式不必检查`calculateHours()`方法中的所有这些可能性，那就更好了。您会注意到，如果必须在此处完成所有这些检查，阅读将变得多么困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:27:22.010

FI：Apache commons StringUtils 有一个方法 isBlank 可以处理 null、empty 和只有空格的字符串等，*

# unicode - 在程序员编辑器中使用 unicode / utf-8

> ID：11945248
> 
> 赞同：2
> 
> 时间：2012-08-14T03:06:34.993
> 
> 标签：unicode, utf-8, editor

有很多程序员编辑器声称支持 unicode/utf-8。我尝试了其中的一些（UltraEdit、jedit、emedit），但没有一个告诉你如何将 unicode 字符实际输入到文件中。其中一些告诉您如何将默认文件编码更改为 utf-8 或如何选择对 utf-8 有良好支持的字体，但不告诉您如何使用他们的编辑器将 utf-8 输入文件。

Go 语言（和其他一些语言）支持 utf-8，我喜欢将实际的 utf-8 符号用于变量而不是像 omega 这样名称的变量的想法。不过，我还没有找到真正允许您执行此操作的程序员编辑器。

我发现唯一可以让您输入 unicode 的编辑器/文字处理器是 Microsoft Word。键入 unicode 和 Alt+X 和 Word 将其转换。要获取希腊字母 omega，请键入“03c9”，然后按 Alt+X。UltraEdit 将允许您将 utf-8 从网页复制到其中，但他们的文档没有说明如何在文件中实际输入 utf-8，以及他们的技术。支持的人也不知道。

这应该很简单，但似乎完全没有记录。是否有一些组合键约定可以让您在这些编辑器中输入 unicode，这些编辑器应该支持 unicode，就像 Ctrl-F 广泛用于搜索一样？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:11:08.447

标准程序员的编辑器*vim* (1) 支持有限的 Unicode 输入，即使您的操作系统应该太坏而无法这样做（还有这样的吗？）。

只需输入`^VuXXXX`，其中`XXXX`正好代表四个十六进制数字。

这将允许您输入分配给基本多语言平面的约 6% 的 Unicode。其余的对你是禁止的。

这可能会在较新的版本中得到修复。

否则，只需使用鼠标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:01:49.710

如果缺少编辑器，我会使用一些技术：

1.  使用 Windows`charmap.exe`实用程序选择字符并粘贴到文档中。
2.  安装输入法编辑器 (IME) 以使用特定语言进行书写。
3.  [Windows ALT 键码](http://tlt.its.psu.edu/suggestions/international/accents/codealt.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T08:38:17.743

最好将您的键盘设置为在所有 Windows 应用程序中生成 Unicode 字符，而不是依赖单个应用程序的自定义输入功能 IMO。

使用该[`EnableHexNumpad`功能](http://en.wikipedia.org/wiki/Unicode_input#In_Microsoft_Windows)，您可以使用 Alt+numbad-plus,hexcode 在基本多语言平面中键入任何字符。（不过，在没有数字键盘的笔记本电脑上可能没有多大用处。）

或者，如果您想大量输入特定字符，请找到允许您直接输入它们的键盘布局。例如[eurokb可能会覆盖它，或者您可以使用](http://www.doxdesk.com/software/win/eurokb.html)[MSKLC](http://msdn.microsoft.com/en-us/goglobal/bb964665.aspx)自己制作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T19:07:12.733

老问题，但你可以在 GNU Emacs 或 Vim 中输入很多 unicode

*   GNU Emacs：（`M-x set-input-method RET tex`或`C-x RET C-\ tex`）会让你输入`\omega`生成 ω

*   Vim：Vim *digraphs*可以生成 unicode；`C-k w *`在插入模式下给你ω。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-21T23:26:56.137

deceze 一针见血。（S）他只是没有详细说明。bobince 给了更多。

我冒昧地猜测您是从事 L14N 或 I18N 工作的开发人员或测试人员。我也猜想你需要做的不仅仅是在这里或那里的几个字符，否则你会对从另一个应用程序粘贴感到满意。所以，我会分享一些建议。（注意：这里，“你”指的是下一个看这里的人。我敢肯定原来的海报现在已经不在乎了。:-)）

如果您使用的是 Windows 10，请安装适当的键盘驱动程序，以便您在任何应用程序中输入所需的字符。我确信 Linux 支持同样的事情。

例如，我正在自学印地语 (हिंदी)，因此我安装了 Windows 的印地语 (Devanangari) 支持。我使用该支持在印地语中输入了“印地语”，然后我切换回美国英语来完成这篇文章的其余部分。如果您只需要来自西欧语言的重音字符，您可以安装 INTL 英语支持并直接输入 español 或 français 或其他任何内容。

不要将输入 Unicode 字符视为在英文文本中输入某种特殊数据。这只是别人的语言。使用他们的键盘。输入他们的语言。

我正在编写一个抽认卡应用程序来帮助我的学习。我正在使用印地语键盘支持在 Word、写字板、Excel 和 Visual Studio 编辑器中输入字符。印地语键盘支持*在所有这些应用程序中的工作方式完全相同*，因为我希望它几乎可以在任何支持 Unicode 的文本编辑器中工作。正如您在上面看到的，它也适用于 Chrome 中的简单文本编辑控件。没有复制和粘贴。不记得特殊代码。它和 ctrl-F 一样无处不在。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-15T03:45:50.090

看起来程序员编辑器中的 unicode 支持（某些 Microsoft 产品除外）大多是只读的。他们可以使用 unicode 打开文件并显示字符，但在文件中输入 unicode 则是另一回事。如果您想在程序员编辑器中输入 unicode，您可以从其他地方（网页或 Microsoft Word 或记事本）复制它并将其粘贴到编辑器中，但编辑器使输入 unicode 变得困难或不可能。

UltraEdit 技术支持向我介绍了[这个网页](http://www.fileformat.info/tip/microsoft/enter_unicode.htm)，它解释了很多。不幸的是，没有一个解决方案适用于 UltraEdit。

Microsoft Word 和记事本支持 unicode 输入。键入 unicode 值，后跟 Alt+X，它将转换十六进制并显示它。然后，您可以将其复制并粘贴到 UltraEdit 或其他程序员编辑器之一。正如其他人提到的，对 unicode 的支持取决于操作系统和编辑器中的支持。

让我对在源代码文件中使用 unicode 感兴趣的是 Mark Summerfield 的书 Programming in Go。他包含一个使用 unicode 的示例 .go 文件。将 unicode 希腊字符用于变量名而不是名为“omega”或“theta”的变量会很棒。

然而，在源代码中使用 unicode 是个坏主意。程序员编辑器对 unicode 的支持很糟糕，开发人员必须将他们的源代码文件保存或转换为 utf-8 而不是 ASCII。不管这个想法听起来多么简洁，开发人员的工具还没有准备好用 unicode 编写代码。

# iphone - iPhone中单个文件的最大大小是多少？

> ID：11945249
> 
> 赞同：1
> 
> 时间：2012-08-14T03:06:46.700
> 
> 标签：iphone, ios

我搜索了一些帖子，但找不到 iPhone 下的最大文件大小。

*   [iOS 应用程序的最大大小](https://stackoverflow.com/questions/4753100/max-size-of-an-ios-application)
*   [iOS 上 sqlite 或数据库的最大大小](https://stackoverflow.com/questions/5953856/what-is-the-maximum-size-of-sqlite-or-core-data-database-on-ios)

正如上面的帖子所说，最大文件大小取决于可用磁盘空间。那么，我可以将所有内容存储到 sqlite 文件中并且文件大小可以超过 4GB 或 10GB 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:54:30.410

根据我发现的以下链接，

1.  [Mac OS、HFS 文件系统卷和文件限制](http://support.apple.com/kb/HT2422)
2.  [iOS 文件系统，HFSX](https://stackoverflow.com/questions/5805623/ios-filesystem-hfs)
3.  [HFS，维基](http://en.wikipedia.org/wiki/HFS_Plus)

正如第一个链接所说，“Mac OS 扩展文件系统的理论最大文件大小为数百万兆字节。实际上，**最大文件大小等于最大卷大小**，除了为文件保留的少量磁盘空间系统信息。”

因为最大文件大小等于最大卷大小，并考虑有关可用磁盘空间的因素。

因此，在我的结论中，单个文件的最大大小取决于可用磁盘空间。

# java - 如何使用 Java 代码登录到 Oracle 11g 中的“xe”连接？

> ID：11945255
> 
> 赞同：2
> 
> 时间：2012-08-14T03:07:53.517
> 
> 标签：java, jdbc, oracle11g

我想做只做这个的java代码：

登录到 Oracle 11g 数据库中的“xe”连接。就这样。怎么可能呢？

编辑：是的，我正在使用 JDBC，但无法登录到该连接。我的 url 是`jdbc:oracle:thin:@//localhost:1521/xe`,用于 xe 或 sys 连接`username = sys`。`password = 123456`那为什么我不能登录到那个连接？

编辑：

很抱歉，我忘了补充，除了第一个错误，我还看到了另一个错误，即

```
SQLException: ORA-28009: connection as SYS should be as SYSDBA or SYSOPER 
```

紧随其后的是——

```
Exception in thread "main" java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T06:43:55.057

如果要以 SYS 身份连接，则必须使用`sys as sysdba`

所以在你的java代码中试试下面的代码

```
 String url = "jdbc:oracle:thin:@//localhost:1521:xe";
    String username = "sys as sysdba";
    String password = "123456";
Connection connection= DriverManager.getConnection(url, username, password); 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:06:48.240

不幸的是，你的答案有点太模糊了。

*   如果要通过 Java 登录数据库，请使用 JDBC。
*   如果您想自动登录外部程序，那么您的语言是错误的 :)
*   如果您想验证数据库是否已启动，请参阅第一点。

总的来说，看看 JDBC。Oracle 的 JDBC 文档可以[在这里找到](http://www.orafaq.com/wiki/JDBC)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-07T03:07:36.070

**您应该编写以下代码：**

```
private String driver="oracle.jdbc.driver.OracleDriver";
private String dbURL="jdbc:oracle:thin:@localhost:1521:XE";
private String dbUserName="sys as sysdba";
private String dbPassword="123456";

try{
Class.forName(driver);
con=DriverManager.getConnection(dbURL,dbUserName,dbPassword);
-----//Rest of your Code//-------
}catch(Exception e){
e.printStackTrace();
} 
```

# ajax - 正在进行 Ajax 调用时的页面导航

> ID：11945260
> 
> 赞同：0
> 
> 时间：2012-08-14T03:08:23.137
> 
> 标签：ajax

在我们的应用程序中，我们在最终提交按钮上进行 ajax 调用，并显示一个带有进度条的模式对话框。成功处理后，对话框将使用响应进行更新。现在我的要求是将模式对话框更改为非对话框，并允许用户在 ajax 调用完成时导航到另一个页面。

如果我将模态窗口更改为非模态窗口会有什么影响。ajax 调用会继续还是会中止。如果它继续，它将引用对话框以使用响应更新它。

请让我知道你的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:17:03.977

在进行 AJAX 调用时，无论您在操作视图方面做什么，都不会影响 AJAX 调用本身。只要您让 AJAX 调用完成并在回调中显示更改，就可以了。不用说，您无法更改您所在的实际页面，但如果我理解正确，您无论如何都不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-05T20:28:44.100

# 一个简单的实验来尝试这个想法

我编写了一个简单的示例，其中我有一个带有指向另一个页面的链接的 HTML 页面。当我单击该链接时，它会向 PHP 脚本发送一个 AJAX 请求，该脚本模拟一个长过程（等待 10 秒），然后更改会话中的一个变量。然后目标页面回显该变量。

当我单击该链接时，该页面会启动一个长 AJAX 请求，但它也会导航到另一个页面。结果是AJAX请求被*取消*，其他页面打印“nothing”。

这是server.php：

```
session_start();
$x = isset($_SESSION['x']) ? $_SESSION['x'] : 0;
sleep(10); /* simulates long process */
$_SESSION['x'] = ++$x;
echo $x; 
```

index.html（重要部分）：

```
<a href="other.php">Click here</a> 
```

index.html 中的 AJAX 请求（在 <script> 标签内）：

```
document.querySelector('a').onclick = function(e) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function(e) {
      console.log(JSON.parse(xhr.responseText));
    }
    xhr.open('POST', 'server.php');
    xhr.send();
  } 
```

## 可能的解决方案

如果您的请求仅在服务器上耗时，请创建一个返回该过程进度的端点，然后在您的所有页面中添加一个 javascript 代码以使用此端点并向您的用户显示进度。

# java - Java 变量随机变化

> ID：11945264
> 
> 赞同：1
> 
> 时间：2012-08-14T03:08:56.133
> 
> 标签：java, opengl, lwjgl

我正在开发一个粒子引擎，在 Windows 7 上的 Eclipse 中，我遇到了一个我以前从未见过的问题。我的代码中有这个：

```
float start = startPosition.getY();
p.position.addTo(p.moveVector);

float end = startPosition.getY();
if(start != end){
System.out.println("hit");
} 
```

而且它确实经常受到影响。我这样做的原因是 startPosition 被改变了，它弄乱了我的程序。

我还进入调试器并查看打印机命中时的值，我得到了这个，所有变量都在位置和 moveVector：1.0E-5 我不知道该怎么做。

这是我的代码。

粒子发射器[http://tinyurl.com/9ahwodx](http://tinyurl.com/9ahwodx)

粒子[http://tinyurl.com/8rw979d](http://tinyurl.com/8rw979d)

矢量 3f [http://tinyurl.com/9do6v2k](http://tinyurl.com/9do6v2k)

有问题的代码位于 ParticleEmitter 的底部。

如果您想查看或了解其他任何信息，请告诉我，但我认为这就是所有相关信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T03:21:16.777

您的particleEmiter 构造函数创建了一堆Particle 对象，每个对象的位置为startPosition。

Java 通过~~引用~~传递事物[共享对象（对象“引用”通过值传递，因此每个人都共享同一个对象）]，因此您的每个 Particle 实例都针对它们的位置引用同一个 Vector3f 对象。

当您执行 p.position.addTo(...) 时，您将更改*所有*Particle 的位置，以及 startPosition。

调用 Particle 构造函数时需要克隆位置。

**编辑：**

克隆只是“构造具有相同值的新对象”的术语。您可以通过以下方式逐案执行此操作：

```
new Vector3f(startPosition.x, startPosition.y, startPosition.z) 
```

而不是开始位置。

但这不是很健壮，因为如果 Vector3f 要获得某种状态，则需要更新这些调用。 ~~请参阅[Cloneable](http://docs.oracle.com/javase/6/docs/api/java/lang/Cloneable.html)以获取可以让您直接调用的接口`startPosition.clone()`。~~ [呃，大脑冻结]

**编辑 2：**或者如指出的那样，在 Vector3f 上放置一个带有 Vector3f 参数的构造函数。`new Vector3f(startPosition)`当您将位置传递给 Particle 构造函数时，您的代码就变成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:12:52.483

要回答您的第一个问题，1.0E-5 基本上为零。

总的来说，我认为你的问题是你试图比较`float`变量是否相等，这绝不是一件好事。我的猜测是这些值实际上并没有“改变”，而是每次运行用于的浮点近似值时`start`，`end`它们的表示方式都会有所不同。这将解释您所看到的行为，其中相同的代码似乎每次表现都有些不同。

查看此内容以获取更多详细信息：

[在 Java 中使用 == 比较浮点数有什么问题？](https://stackoverflow.com/questions/1088216/whats-wrong-with-using-to-compare-floats-in-java)

# ios - 根据字体选择ios显示键盘

> ID：11945269
> 
> 赞同：0
> 
> 时间：2012-08-14T03:10:25.803
> 
> 标签：ios, xcode, fonts

我想创建一个字母（字符）跟踪和学习应用程序。这将是多语言应用程序。不同语言的字体将附加在应用程序资源文件夹中。第一个用户选择语言和喜欢。根据语言选择，将显示键盘。然后用户输入一个字符并跟踪。是否可以根据语言选择显示键盘。或者我必须创建自定义键盘。请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:36:19.370

不幸的是，除非您创建自定义键盘，否则您无法控制显示哪个键盘。如果您有控制权，您可能会要求显示用户未在其设置中启用的键盘，这会导致问题。您可以请求打开的唯一键盘是[UIKeyboardType中列出的键盘](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html#//apple_ref/doc/c_ref/UIKeyboardType)

# javascript - JavaScript：日期的 toString() 和 toLocaleString() 方法之间的区别

> ID：11945272
> 
> 赞同：16
> 
> 时间：2012-08-14T03:10:46.630
> 
> 标签：javascript, date

我无法理解JavaScript 中对象的`toString()`和`toLocaleString()`方法之间的区别。`Date`我知道的一件事是，只要需要将对象转换为字符串，`toString()`就会自动调用它。`Date`

以下代码始终返回相同的结果：

```
​var d = new Date();
document.write( d + "<br />" );
document.write( d.toString() + "<br />" );
document.write( d.toLocaleString() ); 
```

​ 输出为：

```
Tue Aug 14 2012 08:08:54 GMT+0500 (PKT)
Tue Aug 14 2012 08:08:54 GMT+0500 (PKT)
Tue Aug 14 2012 08:08:54 GMT+0500 (PKT) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T03:13:40.637

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleString)

基本上，它将日期格式化为调用该函数的计算机上的格式化方式，例如美国的前一天，世界其他大部分地区的前一天。

**编辑：**

因为其他一些人指出上述参考资料不一定可靠，所以这来自[ECMAScript 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)：

> **`15.9.5.2 Date.prototype.toString ( )`**
> 
> > 此函数返回一个字符串值。String 的内容是 implementation->> 相关的，但旨在以方便、人类可读的形式表示当前时区中的 Date。
> 
> **`15.9.5.5 Date.prototype.toLocaleString ( )`**
> 
> > 此函数返回一个字符串值。String 的内容是 implementation->>dependent，但旨在以一种方便的、人类可读的形式表示当前时区中的 Date，该形式对应于宿主环境的当前语言环境的约定。

由于您可以希望假设大多数实现都会反映规范，因此不同之处在于`toString()`它只需要可读性，`toLocaleString()`应该以一种符合用户期望的格式可读，基于他们的语言环境。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T03:15:04.463

> 使用操作系统的语言环境约定将日期转换为字符串。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleString)

> 在转换操作系统格式不正确的年份时，toLocaleString 的行为类似于 toString。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-04T12:46:01.250

我刚刚在 Chrome 的控制台中检查了日期，并发现了演示格式的差异。希望这会有所帮助。

```
var d = new Date();

console.log(d.toLocaleString()); //"04.09.2016, 15:42:44"
console.log(d.toString());       //"Sun Sep 04 2016 15:42:44 GMT+0300 (FLE Daylight Time)" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T03:55:58.517

很多参考，但没有一个是权威的。请注意，Mozilla 的文档是针对 JavaScript 的，这是他们针对浏览器的 ECMAScript 版本。其他浏览器使用其他实现，因此，虽然 MDN 文档很有用，但它不具有权威性（它也是一个社区 wiki，因此甚至不是官方 Mozilla 文档）并且不一定适用于其他浏览器。

最终参考是 ECMAScript 语言规范，其中[Date.prototype.toString](http://es5.github.com/#x15.9.5.2)和[Date.prototype.toLocaleString](http://es5.github.com/#x15.9.5.5)的行为都以独立于浏览器的术语进行了解释。

值得注意的是对于这两种方法，字符串是**依赖于实现**的，这意味着不同的浏览器将返回不同的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-16T10:10:35.967

只是补充。除了日期之外，它还转换/格式化普通变量。 **这两个函数都用于将传递的参数格式化/转换为字符串，但参数的格式是要看的。**

**toLocalestring()**用于根据调用函数的地理位置返回**格式化字符串。**

为了简单起见。举这个例子。它显示了**toString() 如何不格式化**变量，但**toLocaleSting() 将**根据地理位置的语言环境设置对其进行格式化。

```
let number = 1100;
console.log(number.toString()); // "1100"
console.log(number.toLocaleString())  // 1,100 
```

```
let number = 1100;
console.log(number.toString());
console.log(number.toLocaleString());
```

这对程序员避免编写额外的函数来格式化字符串或日期有很大的帮助。toLocaleString() 会处理这个问题。

希望你会觉得它有些帮助和有趣。

# android - Android，Intent.FLAG_ACTIVITY_CLEAR_TOP 似乎不起作用？

> ID：11945274
> 
> 赞同：3
> 
> 时间：2012-08-14T03:10:57.833
> 
> 标签：android, android-intent, flags

在我的菜单中，我有一些项目。Home 是其中的一项，我想成为我的应用程序的根，每当用户单击它时，Android 都会清除堆栈，然后返回主屏幕。

这是我的代码：

```
menu.setOnItemClickedListener(new MenuClickedListener() {
            public void eventOccured(int id) {          

                Intent intent = null;
                switch(id) {
                    case 1: intent = new Intent(context, More.class);           break;
                    case 2: intent = new Intent(context, FavoriteScreen.class); break;
                    case 3: intent = new Intent(context, VideoShowList.class);  break;
                    case 4: intent = new Intent(context, ShoppingList.class);   break;
                    case 5: intent = new Intent(context, MainScreen.class); 
                            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            break;                  
                }       

                if(intent != null)
                    context.startActivity(intent); 
            }
        }); 
```

菜单工作正常，但似乎标志不起作用，因为从主屏幕，我进入第二个和第三个屏幕，然后我单击菜单的主项并返回主屏幕。现在，当我点击后退按钮时，我会转到第三个屏幕、第二个屏幕和主屏幕。

我将此菜单设计为小部件，以便一次性设置它并在我的所有屏幕上重复使用它。

任何建议，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-04-05T12:39:10.157

我已经尝试过**Intent.FLAG_ACTIVITY_CLEAR_TOP**但没有得到适当的解决方案所以最后这对我有帮助

```
 Intent intent = new Intent(getApplicationContext(), LoginActivity.class);
ComponentName cn = intent.getComponent();
Intent mainIntent = IntentCompat.makeRestartActivityTask(cn);
startActivity(mainIntent); 

```

这将清除所有堆栈并仅运行**LoginActivity**

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-01T04:30:32.903

**读一遍，flag_activity_clear_top 的使用永远不会有问题**

以下是关于**Flag_Activity_Clear_Top 用法的简单说明。**

**一种正确使用的衬垫配方：**

***它总是清除调用活动和被调用活动之间的中间活动（如果有的话）。***

这是一个活动流程：

活动 A -> 活动 B -> 活动 C（使用标志活动清除​​顶部转到 D）-> 活动 D

**在上面的序列中，当我们按回到达 D 时，我们将得到 Activity C->Activity B-> Activity A**，***因为在 Activity C 和 Activity D 之间没有中间活动***

**这里一些开发人员的神话是 -**

通过使用 C 中的标志 activity clear top 到达活动 D 后，他们期望从 D 中按下后退键会将他们带到应用程序之外。*这永远不会发生*。

**Flag_Activity_Clear_Top 总是清除两个活动之间的中间活动（如果有）**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-14T04:21:55.343

尝试使用这个`intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`代替 `intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`

```
 Intent intent = new Intent(getApplicationContext(),
            yourActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-02T10:53:40.973

如果您想启动一个 Activity 成为唯一存在的一个（即**清除整个 backstack**），请使用以下标志：

```
Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK 
```

需要 API 级别 >= 11。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-31T11:38:03.670

我遇到了同样的问题，我的问题是意图中的活动具有launchMode =“singleInstance”。更改为 singleTask 并且代码可以正常工作。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-14T03:23:42.120

也许这有效：

```
intent = new Intent(getApplicationContext(), MainScreen.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

# python - 此程序中的 Python 空白

> ID：11945276
> 
> 赞同：0
> 
> 时间：2012-08-14T03:11:10.980
> 
> 标签：python, whitespace, removing-whitespace

```
#/usr/bin/python2.4 -tt

import sys

def mult_table(x,y):
  for i in range(1,y+1):
    for n in range(1,x+1):
      if n == 1:
        print i*n,
      elif n == x:
        print repr(i*n).rjust(3)
      else:
        print repr(i*n).rjust(3),

mult_table(12,3)
sys.exit(0) 
```

我将这个简短的程序提交给[CodeEval](https://www.codeeval.com/)。它唯一的工作就是制作一个乘法表。问题是它不应该有任何尾随空格，当我提交它时，最后一行在 36 之后有一个空格。我测试了自己，我没有这个问题。到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:43:18.730

`mult_table(1,1)`您的代码为not for添加了一个空格`mult_table(12,3)`。

因此，您需要修复您的`if n == 1`案例（也检查`n == x`，就像您稍后在代码中所做的那样）。

我会做一些不同的事情，所以核心`mult_table`是这样的：

```
 if n == 1:
        print i*n,
      else:
        print repr(i*n).rjust(3), 
```

然后只是`print`外部 for 循环中的换行符。

带回家：测试你的边界条件！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:16:50.363

当您在一个环境中生成结果并在另一个环境中显示它时，可能会导致问题。

```
0000000: 3120 2020 3220 2020 3320 2020 3420 2020  1   2   3   4
0000010: 3520 2020 3620 2020 3720 2020 3820 2020  5   6   7   8
0000020: 3920 2031 3020 2031 3120 2031 320D 0A32  9  10  11  12..2
0000030: 2020 2034 2020 2036 2020 2038 2020 3130     4   6   8  10
0000040: 2020 3132 2020 3134 2020 3136 2020 3138    12  14  16  18
0000050: 2020 3230 2020 3232 2020 3234 0D0A 3320    20  22  24..3
0000060: 2020 3620 2020 3920 2031 3220 2031 3520    6   9  12  15
0000070: 2031 3820 2032 3120 2032 3420 2032 3720   18  21  24  27
0000080: 2033 3020 2033 3320 2033 360D 0A          30  33  36.. 
```

我的 Windows 7 系统的输出中有 0D0A (CRLF)，使用标准输出到文件运行您的代码。也许这在您的情况下被解释为空白？

您可能需要澄清您的代码如何运行以及它如何输出结果，以及以何种格式输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T11:43:20.153

好吧，我喜欢我之前的回答，因为它发现了您的程序发出空白空间的情况。

但是，我在 CodeEval 上检查了问题，发现挑战要求您打印**12x12**的表格，而不是 12x3。

挑战描述只为您提供正确输出*的前三行*。

现在，当您检查 CodeEval 的程序输出报告时，是的，有一个额外的空间。（我尝试过这个）。但这是一个 CodeEval 错误，不是你的。你的程序没有发出那个。

红鲱鱼汤有人吗？

*带回家：*仔细阅读问题。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T03:22:20.260

由于换行符本身是空格，因此您的程序设计具有尾随空格。如果你想做一个特殊的情况，你可以禁止表格的末尾写一个换行符。

当我测试你的程序时，我在最后一个值之后没有看到空格（ASCII 0x20）：

```
$ ~/src/test/x.py | xxd
0000000: 3120 2020 3220 2020 3320 2020 3420 2020  1   2   3   4
0000010: 3520 2020 3620 2020 3720 2020 3820 2020  5   6   7   8
0000020: 3920 2031 3020 2031 3120 2031 320a 3220  9  10  11  12.2
0000030: 2020 3420 2020 3620 2020 3820 2031 3020    4   6   8  10
0000040: 2031 3220 2031 3420 2031 3620 2031 3820   12  14  16  18
0000050: 2032 3020 2032 3220 2032 340a 3320 2020   20  22  24.3
0000060: 3620 2020 3920 2031 3220 2031 3520 2031  6   9  12  15  1
0000070: 3820 2032 3120 2032 3420 2032 3720 2033  8  21  24  27  3
0000080: 3020 2033 3320 2033 360a                 0  33  36. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T03:43:41.080

我运行了这个（输出到文件），但在结果文件中没有发现任何额外的空白

```
import sys

def mult_table(x,y):
    with open('data.txt', 'w') as f:
        for i in range(1,y+1):
            for n in range(1,x+1):
                if n == 1:
                    print i*n,
                    print >> f,  i*n,
                elif n == x:
                    print repr(i*n).rjust(3)
                    print >> f, repr(i*n).rjust(3)
                else:
                    print repr(i*n).rjust(3),
                    print >> f, repr(i*n).rjust(3),

mult_table(12,3)
sys.exit(0) 
```

36 之后有一个`0a`- 换行符，但我认为这很正常，在你的情况下这是否被认为是一个问题？

# class - 关于 C# 类和从其他类继承的基本信息

> ID：11945278
> 
> 赞同：0
> 
> 时间：2012-08-14T03:11:30.393
> 
> 标签：class, c#-4.0

我想编写一个扩展 MembershipProvider 和 MembershipUser 功能的类。但我在这方面的知识可悲地缺乏。

我的 cs 文件看起来像这样：

```
namespace Mech
{
    public class Mechs : MembershipProvider
    {
        private static Database dbConn = DatabaseFactory.CreateDatabase("main");

        public override MembershipUser GetUser(string username, bool userIsOnline)
        {

        }
    }
} 
```

在这一点上，它抱怨所有抽象成员都没有被实现。我真的不需要更改membershipProvider 的每个成员，只需要更改少数。那么这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:35:33.817

查看[codeguru 上的这篇文章](http://www.codeguru.com/csharp/.net/net_security/article.php/c19415/Writing-a-Custom-Membership-Provider-for-the-Login-Control-in-ASPNET-20.htm)。你只需要实现你将要使用的东西，你可以让其余的抛出 NotImplementedExceptions。此外，您可以扩展现有的提供者（例如`SqlMembershipProvider`）并覆盖`ValidateUser`或任何其他您想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:19:23.707

> 当您从抽象类继承时，您需要实现所有非抽象方法和属性。

你不一定要改变一切。您可以在实施后将它们保留原样。

> 您可以使用 VS 的智能功能来避免大量输入，并且父类有很多抽象成员和方法。

点击 MembershipProvide ，等待 Intellisences 显示如下图所示的提示：（或者按**Alt+Shift+F10**） ![在此处输入图像描述](../Images/7e444c19db47cbcdb1551e1f20e70402.png)

现在就是这样，您将让您的类实现所有抽象方法和属性。

![在此处输入图像描述](../Images/0cd2f4f96cf18c110f9cbeb84f8f8130.png)

那么当您尝试访问 Field1 时会发生什么：

```
StackOverflow stackOverFlow = new StackOverflow();
            String myString = stackOverFlow.Field1; 
```

![在此处输入图像描述](../Images/d51c92c390ff00d08b632a2bbf3353fb.png)

# php - 在 symfony2 服务中使用标签需要什么

> ID：11945280
> 
> 赞同：1
> 
> 时间：2012-08-14T03:11:32.760
> 
> 标签：php, symfony

[我已经阅读了关于标记服务](http://symfony.com/doc/current/components/dependency_injection/tags.html)的 symfony2 文档

但我无法理解他们的例子。是否有任何其他来源或教程可以帮助我理解为什么要使用它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:18:07.250

从[*服务容器一章的*](http://symfony.com/doc/master/book/service_container.html)[*标签*](http://symfony.com/doc/master/book/service_container.html#tags)部分：[](http://symfony.com/doc/master/book/service_container.html)

 *> 就像网络上的博客文章可能会被标记为“Symfony”或“PHP”之类的东西一样，容器中配置的服务也可以被标记。在服务容器中，标签意味着服务旨在用于特定目的。

基本上，您为其他服务和/或组件标记服务，以了解它们可以将其用于特定目的。*

# matlab - 用于动态数据集数量的matlab图形绘图

> ID：11945281
> 
> 赞同：0
> 
> 时间：2012-08-14T03:11:36.713
> 
> 标签：matlab

有没有办法传入 N 个数据集并使用 for 循环将它们绘制成折线图？我通过传递固定数量的参数（例如 M1、M2、M3、M4）来做到这一点，然后像下面那样手动重复绘图。但我想知道是否有办法动态编码函数？假设我可以传入 4 个数据集或 40 个数据集，并通过循环将它们绘制在一个图中。

```
function plot_four_cdf(M1,M2,M3,M4)

[ycdf1,xcdf1] = cdfcalc(M1);
ycdf1 = ycdf1(2:length(ycdf1));
plot(xcdf1, ycdf1, '-+k', 'LineWidth', 1);

hold on;
[ycdf2,xcdf2] = cdfcalc(M2);
ycdf2 = ycdf2(2:length(ycdf2));
plot(xcdf2, ycdf2, '-ok', 'LineWidth', 1);
hold off;

hold on;
[ycdf3,xcdf3] = cdfcalc(M3);
ycdf3 = ycdf3(2:length(ycdf3));
plot(xcdf3, ycdf3, '-*k', 'LineWidth', 1);
hold off;

hold on;
[ycdf4,xcdf4] = cdfcalc(M4);
ycdf4 = ycdf4(2:length(ycdf4));
plot(xcdf4, ycdf4, '-sk', 'LineWidth', 1);

legend('M100','M80','M50','M20',...
   'Location','SE')

xlabel('Relative Error');
ylabel('CDF');
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:37:39.783

您可以将所有数据分组到一个单元格数组中并将其传递给函数：

```
function plot_cdfs(M)

    figure, hold on

    linestyles = {...
        '-+k', '-ok', '-*k', '-sk', ...
        '-+r', '-or', '-*r', '-sr');

    legendentries = cell(size(M));

    for ii = 1:numel(M)
        [ycdf, xcdf] = cdfcalc(M{ii});
        plot(xcdf, ycdf(2:end), linestyles{ii}, 'LineWidth', 1);
        legendentries{ii} = ['M' num2str(ii)];    
    end

    legend(legendentries{:}, 'Location','SE')

    xlabel('Relative Error');
    ylabel('CDF');

end 
```

请注意，`M`它的构造类似于

```
M = {M1, M2, M3, ...} 
```

也可能在自己的循环中。另请注意，`legendentries`现在有点难以定义。您可以将它们作为单独的参数传递给函数（更好的选择），或者将它们填充到`M`它们描述的数据旁边的同一个单元格数组中（不是很便携）。

另请注意，您必须进行一些错误检查（现在，只能制作 8 种不同的图。如果您做的更多，则会导致错误）。

# sql - SQL CLR 存储过程中的 System.management 参考

> ID：11945283
> 
> 赞同：1
> 
> 时间：2012-08-14T03:12:34.543
> 
> 标签：sql, assembly, clrstoredprocedure

我正在尝试构建一个引用 IBM WebSphere MQ dll 的 SQL CLR 存储过程。我在我的工作机器上执行此操作时遇到问题，所以我决定看看我是否可以使用 localhost 让它在我的家庭计算机上工作。我在遇到不同的错误方面取得了进展，但是我不确定这意味着什么：

消息 10301，级别 16，状态 1，第 1 行程序集“amqmdnet”引用程序集“system.management，version=2.0.0.0，culture=neutral，publickeytoken=b03f5f7f11d50a3a.”，当前数据库中不存在。SQL Server 试图从引用程序集所在的同一位置定位并自动加载引用程序集，但该操作失败（原因：2（系统找不到指定的文件。））。请将引用的程序集加载到当前数据库中，然后重试您的请求。

# redirect - google 是如何处理 www.google.com/ncr 的？

> ID：11945285
> 
> 赞同：0
> 
> 时间：2012-08-14T03:12:52.047
> 
> 标签：redirect, header, http-headers

我试图找出这一点，并得到[http://www.google.com/ncr](http://www.google.com/ncr)使用 302（或 301）重定向（不确定是否真的如此）。

我也明白了，服务器端重定向（301 和 302）不会改变原来的引用者，即如果我直接访问[http://www.google.com/ncr](http://www.google.com/ncr)，那么请求会转到 google.com，但什么也没有在标题中可以显示我来自[http://www.google.com/ncr](http://www.google.com/ncr)。

所以我想知道谷歌是如何做到这一点的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:22:17.530

人们经常使用 servlet 执行此操作。servlet 将检测到某种模式并发出重定向到聚合 url。重定向是针对浏览器的。就像浏览器已经激活/单击了一个新链接。

就像您在 url 栏上输入 google.com/abc 然后在地址栏上输入 google.com 一样。由于隐私问题，浏览器不会让服务器知道它之前访问过的 URL。

当然，如果你在同一个会话中，访问同一个站点，谷歌将有服务器端和客户端 cookie 跟踪你，你刚刚来自另一个谷歌 url。如果是网络服务提供商，我肯定会利用了解您的浏览历史。

因此，由于您的浏览历史 www.whatever。com 会针对不同的用户或会话重定向到不同的页面。

**附录**：

“由于隐私问题，浏览器不会让服务器知道它之前访问过的 URL。” 不太正确。

更完整的规范是

> 如果引用页面是使用安全协议传输的，则客户端不应在（非安全）HTTP 请求中包含Referer 头字段。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec15.html)

谷歌强迫我们使用 https 的另一个原因使我们受益。

**非安全http的重定向流**

假设我们有

*   URL A 有一个指向 B 的链接，该链接指向 URL B。
*   URL B 是对 URL C 的重定向

URL C 的服务器会将引用者视为 URL A，而不是 URL B。也就是说，浏览器会将引用者设置为 URL A。

**使用 cookie 重定向**

我相信您应该能够在 30x 重定向中包含一个 setcookie 标头。我没有尝试过，所以我不知道哪个浏览器会忽略或尊重它。

**顺便提一句**

我非常怀疑我的回答是否能满足您的问题。我个人觉得它是不完整的，我希望有人提出一个更好的答案，你应该选择它作为答案。事实上，我认为您应该取消选择此作为答案，以便您的问题重新回到未回答的问题池中。对不起。

# r - 如何使用 R 创建包含聚合均值的列？

> ID：11945288
> 
> 赞同：2
> 
> 时间：2012-08-14T03:13:27.960
> 
> 标签：r, dataframe, aggregate

在 R 中，我在数据框中有一堆数据，例如：

```
state | zip   | value
______|_______|______
CA    | 94555 | 18
CA    | 94556 | 5
OH    | 12345 | 22
OH    | 12346 | 10 
```

等等。

我想在每一行中添加一列，列出该状态的平均“值”。

我可以通过“ `(aggregate(data$value, list(State = data$state), mean))`”获得手段的数据框。这给了我一个包含 50 行的数据框，每个州一个。但是我需要返回到原始数据框并将状态的平均值放在属于该状态的行中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T03:35:24.377

和一个`data.table`解决方案

```
library(data.table)
DT <-  data.table(state = c("CA","CA","OH","OH"), 
                   zip = c(94555,94556,12345,12346), 
                   value = c(18, 5, 22, 10))

DT[, mean := mean(value), by = state]

##    state   zip value mean
## 1:    CA 94555    18 11.5
## 2:    CA 94556     5 11.5
## 3:    OH 12345    22 16.0
## 4:    OH 12346    10 16.0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T03:20:19.973

使用合并命令，例如

```
df = data.frame(state=c('CA','CA','OH','OH'),zip=c(94555,94556,12345,12346),value=c(18,5,22,10))
df2 = aggregate(df$value,list(state=df$state),mean)
merge(df,df2) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T03:25:49.627

您可以使用`plyr`

```
library(plyr)
df<-data.frame(state=c("CA","CA","OH","OH"),zip=c(94555,94556,12345,12346),value=c(18,5,22,10))
out<-ddply(df,.(state),transform,mean=mean(value))
> out
  state   zip value mean
1    CA 94555    18 11.5
2    CA 94556     5 11.5
3    OH 12345    22 16.0
4    OH 12346    10 16.0 
```

正如 mnel 所指出的，`mutate`也可以使用并且应该更快

```
ddply(df,.(state),mutate,mean=mean(value)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T04:00:48.203

这是使用遗忘`ave`功能的最佳时机：

```
dat <- data.frame(state = c('CA','CA','OH','OH'), 
    zip = c('94555','94556','12345','12346'), 
    value = c(18,5,22,10))

dat$mean <- ave(dat$value, dat$state, FUN=mean) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T03:25:40.607

合并是这里的关键。

```
data <- data.frame(state = c('CA','CA','OH','OH'), zip = c('94555','94556','12345','12346'), value = c(18,5,22,10))
aggs <- aggregate(data$value, list(State = data$state), mean)
names(aggs) <- c('state','avg')
merge(data, aggs, by = 'state') 
```

# git - git push origin 给出 refspec 的远程部分不是有效名称

> ID：11945289
> 
> 赞同：16
> 
> 时间：2012-08-14T03:13:28.817
> 
> 标签：git

[我在https://github.com/darKoram/sphero_tracker.git](https://github.com/darKoram/sphero_tracker.git)使用我的 GitHub 帐户创建了一个远程仓库 。到目前为止，它只包含一些 wiki 页面，但我已准备好上传我的代码。

我用

```
git push origin git@github.com:/darkoram/shpero_tracker.git 
```

我也试过

```
git push origin https://github.com/darKoram/sphero_tracker.git 
```

两次我都得到

> [refspec 的远程部分在https://github.com/darKoram/sphero_tracker.git](https://github.com/darKoram/sphero_tracker.git)中不是有效名称

我以前推过没有问题。只是不知道我在这里做错了什么。

* * *

我走得更远了。按照 marshall 的说明和下面的 generation-ssh-keys 链接，但仍然得到

git push -u origin master 错误：找不到存储库。致命：远端意外挂断

我已经确定我的 ssh 密钥是好的，并通过将我的 id_rsa.pub 中的内容添加到我的 github（它说密钥已经存在）来验证它们是否存在于 github 上。

$ ssh -T git@github.com 嗨，darKoram！您已成功通过身份验证，但 GitHub 不提供 shell 访问权限。

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

ssh -T -p 443 git@ssh.github.com 无法建立主机'[ssh.github.com]:443([207.97.227.248]:443)'的真实性。RSA 密钥指纹为 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48。您确定要继续连接（是/否）？是 警告：将 '[ssh.github.com]:443,[207.97.227.248]:443' (RSA) 永久添加到已知主机列表中。嗨达科拉姆！您已成功通过身份验证，但 GitHub 不提供 shell 访问权限

git remote -v origin git@github.com:darKoram/shpero_tracker.git (fetch) origin git@github.com:darKoram/shpero_tracker.git (push)

但回购当然似乎存在 [http://www.pasteall.org/pic/show.php?id=36560](http://www.pasteall.org/pic/show.php?id=36560)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T03:19:46.870

为什么不按照[GitHub 给您的说明](https://help.github.com/articles/create-a-repo)进行操作？

```
git remote add origin git@github.com:darkoram/shpero_tracker.git
git push -u origin master 
```

您发出的命令是“推送到名为`origin`分支的远程仓库`git@github.com:/darkoram/shpero_tracker.git`”，这显然是不正确的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-28T00:30:02.123

原始海报的原始问题说：

> 我用
> 
> ```
> git push origin git@github.com:/darkoram/shpero_tracker.git 
> ```
> 
> 我也试过
> 
> ```
> git push origin https://github.com/darKoram/sphero_tracker.git 
> ```
> 
> 两次我都得到
> 
> > [refspec 的远程部分在https://github.com/darKoram/sphero_tracker.git](https://github.com/darKoram/sphero_tracker.git)中不是有效名称

该错误是指您没有使用有效的参考规范。refspec 采用以下形式（in 中的项目`[]`是可选的，in 中的项目`<>`是参数）：

```
[+]<source>[:<destination>] 
```

在上面的格式中，源和目标都是引用，而 Git 中的分支是引用，因此您可以将分支用作 refspecs。例如，以下都是有效且等效的 refspec：

```
master
master:master 
```

使用两个 refspecs `git push`：

```
git push origin master
git push origin master:master 
```

都会将本地分支推送到远程`master`命名的分支。`master``origin`

## 你的问题

你用过

```
git push origin git@github.com:/darkoram/shpero_tracker.git 
```

`git@github.com:/darkoram/shpero_tracker.git`不是一个空的参考/分支，它是你的远程仓库的 URL。这可能就是 Git 抱怨 refspec 无效的原因。

推送分支的正确方法是

```
git push origin <branch> 
```

## 也可以看看

*   有关 refspec 语法的更详细说明，请[参阅`git push`](https://www.kernel.org/pub/software/scm/git/docs/git-push.html).
*   有关 refspecs 的另一种解释，请参阅[Pro Git § 9.5 Git Internals - The Refspec](http://git-scm.com/book/en/Git-Internals-The-Refspec)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-25T18:37:36.627

> 我用
> 
> git push origin git@github.com:/darkoram/shpero_tracker.git
> 
> 我也试过
> 
> git 推送来源[https://github.com/darKoram/sphero_tracker.git](https://github.com/darKoram/sphero_tracker.git)
> 
> 两次我都得到
> 
> [refspec 的远程部分在 > https://github.com/darKoram/sphero_tracker.git](https://github.com/darKoram/sphero_tracker.git)中不是有效名称

解决方案是将分支名称放在 git 命令的末尾：

```
git push https://github.com/darKoram/sphero_tracker.git master 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T05:42:14.797

请考虑您用于这些远程地址的**大小写（大写、小写）：**

```
git remote add origin git@github.com:darKoram/shpero_tracker.git
# NOT:
git remote add origin git@github.com:darkoram/shpero_tracker.git # won't work
#                                      ^^^
#                                       | 
```

看：

*   “[为什么 Github 项目文档页面 url 区分大小写？有什么负面影响？](https://stackoverflow.com/questions/6650488/why-are-github-project-document-page-urls-case-sensitive-what-are-the-negative/6650592#6650592) ”
*   “ [GitHub 推送/拉取错误](https://stackoverflow.com/questions/9937055/github-pushing-pulling-error/9937756#9937756)”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T13:57:54.777

最后，我能够连接，但是在尝试 git push origin master 时，我遇到了“快进”错误，尽管事实上我的仓库是用默认的 Readme.md 创建的。我尝试了手册页中的建议，但最后，当我的开发文件夹被推送到 github 时，该文件夹显示为绿色并且无法打开。我所做的 git pull --rebase 也以某种方式从我的本地 git repo 中排除了我的开发文件，我发现没有办法将它们添加回来。

最后，我不得不创建一个新的 github 仓库和一个新的本地仓库。该过程的关键是第 3 步，它在尝试推送之前将几乎空的（Readme.md 除外）存储库拉出。

1.  创建 github 仓库
2.  git add remote origin (https://...github页面窗口中的url)
3.  git clone 起源大师
4.  创建本地仓库；添加; 犯罪;
5.  git推送起源

我想如果我不接受为 repo 创建自述文件的对话框提议，那么 3 将是不必要的，但令我感到奇怪的是，这个默认选项会破坏简单的 repo 创建过程，正如许多关于该主题的教程中所阐述的那样。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-03T14:47:55.870

就我而言，我也遇到了同样的错误。

> 致命：refspec 的远程部分不是[https://github.com/username/repo.git中的有效名称](https://github.com/username/repo.git)

首先，我认为这是由于更改了用户名（因为我最近在 github 上更改了用户名），但这不是问题。

当我尝试**git fetch 然后 git pull**但得到同样的错误。

最后这只是解决了

```
git push origin master 
```

不知道，但这有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-29T18:01:40.160

我今天遇到了类似的问题。FWIW，这修复了它：

`git fetch`其次是`git pull origin mybranch`（响应：“已经是最新的”）

然后`git push origin mybranch`。

我怀疑可能需要获取与上游父分支相关的内容（？）。如果其他人可以解释为什么会修复它，我会全神贯注。

# iphone - 当我尝试使用 iPhone SDK 的 Finch 库播放声音时，为什么我的应用程序会崩溃？

> ID：11945292
> 
> 赞同：0
> 
> 时间：2012-08-14T03:13:35.883
> 
> 标签：iphone, cocoa-touch, audio, openal, finch

我完全按照自述文件中的说明进行操作，但由于某种原因，在我的应用程序中，每次我点击与代码对应的 UIButton 以播放声音“[soundA play]; 应用程序只是崩溃，没有任何详细的错误描述，除了对于 lldb。我使用 Finch 因为它使用 OpenAL 播放音频，并且我需要将 OpenAL 用于我正在制作的应用程序类型，因为 AVAudioPlayer 或系统声音不适用于我正在制作的内容。这是代码我正在使用。

**主文件：**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
soundFactory = [[FIFactory alloc] init];
engine = [soundFactory buildSoundEngine];
[engine activateAudioSessionWithCategory:AVAudioSessionCategoryPlayback];
[engine openAudioDevice];
soundA = [soundFactory loadSoundNamed:@"1.caf" maxPolyphony:16 error:NULL];
soundB = [soundFactory loadSoundNamed:@"2.caf" maxPolyphony:16 error:NULL];
soundC = [soundFactory loadSoundNamed:@"3.caf" maxPolyphony:16 error:NULL];
soundD = [soundFactory loadSoundNamed:@"4.caf" maxPolyphony:16 error:NULL];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}
- (IBAction) PlaySoundA {[soundA play];}
- (IBAction) PlaySoundB {[soundB play];}
- (IBAction) PlaySoundC {[soundC play];}
- (IBAction) PlaySoundD {[soundD play];}

@end 
```

**头文件：**

```
#import <UIKit/UIKit.h>
#import "FISoundEngine.h"
#import "FIFactory.h"
#import "FISound.h"

@interface ViewController : UIViewController {
FIFactory* soundFactory;
FISoundEngine* engine;
FISound* soundA;
FISound* soundB;
FISound* soundC;
FISound* soundD;
}

@end 
```

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:24:21.463

声音播放器很可能找不到您的声音文件。尝试右键单击音频文件并在查找器中选择视图。确保文件实际上在您的项目目录中，而不是

# ios - 检查 DISPATCH_QUEUE_PRIORITY_BACKGROUND 是否存在的最佳实践？

> ID：11945294
> 
> 赞同：1
> 
> 时间：2012-08-14T03:13:46.510
> 
> 标签：ios, ios5, grand-central-dispatch

Apple 的文档[明确指出](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，`DISPATCH_QUEUE_PRIORITY_BACKGROUND`它仅适用于 iOS 5 或更高版本。检查它在运行时环境中是否可用的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:02:05.667

如果您针对 iOS 5 SDK 或更高版本进行构建，则只需调用`dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0)`并检查非 NULL 返回值是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:21:34.857

[检查操作系统的版本，](https://stackoverflow.com/questions/3339722/check-iphone-ios-version)看它是否大于或等于 5

# javascript - 如何使用仅在运行时知道的变量名调用 JavaScript 函数？

> ID：11945295
> 
> 赞同：3
> 
> 时间：2012-08-14T03:13:54.060
> 
> 标签：javascript, arrays, string, variables, loops

对于这个问题，我有一段 PHP 代码在目录中查找并返回文件列表。然后我遍历数组并使用 echo 将每个文件名存储为 JavaScript 变量

考虑以下示例，女巫不包括用于生成图像名称的 PHP：

```
//result of PHP
image1="cow.jpg"  
image2="pig.jpg"
image3="dog.jpg"

imgIndex=0 //global variable that will be incremented

function setBG(image) {
    someElement.style.backgroundImage= "url(/images/" + image + ")"
};

function nextBG(){
    imgIndex++
    currentIMG="image"+imgIndex;
    setBG(currentIMG);
}; 
```

当调用函数`nextBG()`将不起作用。但这将：

```
function nextBG(){
    setBG(image1);
}; 
```

我相信它不起作用的原因是因为第二个示例是使用定义的变量（cow.jpg）的值调用函数。但是第一个示例是使用 string 调用函数`"image1"`，witch 显然不是图像的路径名。

有没有办法让我使用变量调用函数`image1`，然后`image2`等等`image3`，而不会被解释为只是一个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:18:35.957

最简单的解决方案是将所有图像存储在一个数组中：

```
var bgImages = [
    // All can be got with a call to encode your PHP array as JSON.
    "cow.jpg",
    "horse.jpg",
    "dog.jpg",
    "pig.jpg"
    ],
    imageIndex = 0,
    maxLength = bgImages.length - 1;

function setBG(image) {
    someElement.style.backgroundImage= "url(/images/" + image + ")"
};

function nextBG(){
    var currentIMG = bgImages[imageIndex];
    setBG(currentIMG);
    imageIndex = imageIndex > maxLength ? 0 : imageIndex + 1;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:19:02.217

使您的变量成为对象的成员。然后您可以使用 [] 使用字符串访问对象成员：

```
var images = {
  image1 : "cow.jpg",  
  image2 : "pig.jpg",
  image3 : "dog.jpg"
};

function nextBG(){
    imgIndex++
    currentIMG="image"+imgIndex;
    setBG(images[currentIMG]);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:19:39.313

那是因为 currentIMG 是一个字符串，而不是一个变量。这就是你想要做的。你有你的数组 $images，它只是图像名称。在您的 HTML 中，您执行此操作

```
var images = <?php echo json_encode($images); ?>; 
```

然后你可以像这样使用JavaScript

```
for(var i=0; var i < images; i++)
{
    setBG(images[i]);
} 
```

# java - 如何通过查询石英表来获得失败的工作？

> ID：11945296
> 
> 赞同：0
> 
> 时间：2012-08-14T03:14:02.417
> 
> 标签：java, quartz-scheduler

我想编写一个 SQL 脚本来获得失败的工作，有一些像 QRTZ_TRIGGERS 这样的表，我该如何实现 sql？也许比较 next_fire_time + misfireThreshold< now()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:18:10.187

它是这样的：

```
SELECT TRIGGER_NAME
FROM QRTZ_TRIGGERS
WHERE NOT (MISFIRE_INSTR = -1)
  AND NEXT_FIRE_TIME < 1345050693000 
  AND TRIGGER_STATE = 'WAITING' 
```

基本上，您要求所有等待触发器的`NEXT_FIRE_TIME`参数远在过去。多远？Quartz 假设所有[`org.quartz.jobStore.misfireThreshold`](http://nurkiewicz.blogspot.no/2012/04/quartz-scheduler-misfire-instructions.html)迟到的触发器都会失火。默认情况下，如果触发器被安排在一分钟前运行，则 Quartz 将其视为未触发。所以采取：

```
new Date() - 60 * 1000 * 1000 
```

有关[`StdJDBCConstants`](http://grepcode.com/file/repo1.maven.org/maven2/org.quartz-scheduler/quartz/2.1.5/org/quartz/impl/jdbcjobstore/StdJDBCConstants.java)更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T12:28:17.877

“TRIGGER_STATE”列显示每个作业的状态，包括 MISFIRED 的：

```
SELECT *
FROM QRTZ_TRIGGERS
WHERE TRIGGER_STATE = 'MISFIRED' 
```

我还想建议运行此查询

```
SELECT TRIGGER_STATE, COUNT(*)
FROM QRTZ_TRIGGERS
GROUP BY TRIGGER_STATE
ORDER BY TRIGGER_STATE 
```

在几分钟的时间间隔内，查看触发机制的更加动态的行为。

# objective-c - Mac 上的 tableView:indexPathForCell

> ID：11945298
> 
> 赞同：0
> 
> 时间：2012-08-14T03:14:21.540
> 
> 标签：objective-c, macos, nstableview

有没有等效的方法

```
tableView:indexPathForCell 
```

在 Mac 上？

我正在尝试获取按下按钮的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:19:48.553

尝试使用连接到您的按钮的此方法。代码需要在作为表视图委托的类中。

```
-(IBAction)buttonClick:(NSButton *)sender {
    NSInteger buttonRow = [self.tv rowForView:sender]; //tv is IBOutlet for the tableView
    NSLog(@"%ld",buttonRow);
} 
```

# java - 需要 ActionListener 代码解释

> ID：11945305
> 
> 赞同：1
> 
> 时间：2012-08-14T03:15:19.317
> 
> 标签：java, swing, compiler-errors, jbutton, actionlistener

```
blueButton.addActionListener(new blueButtonListner()); 
```

输入此代码会发生什么？

我认为Java编译器创建了一个名为的对象`blueButtonListner()`，它成为（参数）的输入`addActionListener`

如果这是正确的，我猜那么这段代码也应该工作：

```
redButton.addActionListener(rr);
redButtonListener rr =new redButtonListener(); 
```

但它显示一个错误。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T03:18:00.140

侦听器对象需要在使用**前**声明：

```
redButtonListener rr = new redButtonListener();
redButton.addActionListener(rr); 
```

你是对的`blueButton.addActionListener(new blueButtonListner());`。该语句创建了一个类的*实例*`blueButtonListener`，该实例立即传递给`addActionListener`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:19:10.390

这是一个优先级的问题，在它被创建之前你不能拥有它

```
redButton.addActionListener(rr); redButtonListener rr =new redButtonListener(); 
```

行不通，因为`rr`尚未定义，编译器不知道它是什么。

相比之下

```
blueButton.addActionListener(new blueButtonListner()) 
```

编译器创建一个临时对象并将其传递给`addActionListener`方法。

你可以用这个更正你的代码

```
redButtonListener rr =new redButtonListener();
redButton.addActionListener(rr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:18:15.070

反过来尝试代码：

```
redButtonListener rr =new redButtonListener();

redButton.addActionListener(rr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T03:18:52.607

需要先创建监听器，然后才能添加。尝试以下操作：

```
redButtonListener rr =new redButtonListener();
redButton.addActionListener(rr); 
```

请注意，我们会收到一个错误，通常仔细阅读错误内容应该会给我您需要的答案。在这种情况下，它应该告诉您 rr 未定义，这显然是因为当您使用它时，它还不存在。

# php - PHP如何拆分文本中具有相同分隔符的文本？

> ID：11945306
> 
> 赞同：0
> 
> 时间：2012-08-14T03:15:21.827
> 
> 标签：php, split, explode, delimiter

我无法分隔文本。
这是场景：

`$check = "Apple|Orange|Animal|Dog|Grape";`

假设通过使用explode，我可以用“|”分隔单词，但是因为我检索到的值“Animal|Dog”应该是一个单词，所以在这种情况下，解决方案是什么？我也不能使用限制，因为文本的位置或数量可能不同。

区分文本的唯一方法是 Animal 关键字。php中有没有类似于mysql LIKE语法的函数？

如果情况 2

```
$check = "Apple|Orange|Animal:Dog|Cat|Grape";
OR
$check = "Apple|Orange|Animal:Fish|Bird|Grape"; 
```

动物的名称可能会有所不同。
输出
`"Apple|Orange|Animal:Dog,Cat|Grape" or "Apple|Orange|Animal:Fish,Bird|Grape"`
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:43:31.120

如果您只想替换“动物|” 用“动物：”然后你可以做一个简单的[`str_replace`](http://php.net/manual/en/function.str-replace.php)：

```
$check = "Apple|Orange|Animal|Dog|Grape";
$newCheck = str_replace("Animal|","Animal:"); // will be set to 'Apple|Orange|Animal:Dog|Grape' 
```

这是你的意思吗？

**编辑，对于案例 2：**

我假设您有一个类似 的字符串`"Apple|Orange|Animal:Dog|Cat|Grape"`，它的类别后跟该类别的 2 个成员。根据您所说，您希望将此字符串转换为`"Apple|Orange|Animal:Dog,Cat|Grape"`用逗号分隔两个组成员而不是管道。这比第一种情况更复杂 - 类别名称可能会有所不同，并且您不能简单`str_replace`地以冒号开头，因为该组的第一个成员也可能会有所不同。对于这种情况，您需要使用正则表达式来匹配和替换字符串的模式。这是代码：

```
$check = "Apple|Orange|Animal:Dog|Cat|Grape";
$newCheck = preg_replace("#(Animal:\w+)\|#", "$1,", $check); // will be set to "Apple|Orange|Animal:Dog,Cat|Grape" 
```

[**演示**](http://sandbox.onlinephpfunctions.com/code/d2ae089f00d22851809660b0344d3c1148f5913f)

让我解释一下这是做什么的，以防您不熟悉正则表达式。[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)函数的第一个参数`"#(Animal:\w+)\|#"`, 告诉 PHP 查找所有`$check`以文本“Animal”开头的子字符串，后跟冒号，然后是包含一个或多个字符的单词字符串，并以管道结尾。这将在您的字符串中查找类别名称以及该类别的第一个成员。第二个参数 ,`":$1,"`告诉 PHP 将此模式之后的第一个管道更改为逗号。如果您有不同的类别名称，只需更改作为第一个参数传递给`preg_replace`函数的模式：

```
$check = "Apple|Orange|Animal1:Fish|Bird|Grape";
$newCheck = preg_replace("#(Animal1:\w+)\|#", "$1,", $check); // will be set to "Apple|Orange|Animal1:Fish,Bird|Grape" 
```

让我知道这是否难以理解！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:19:41.393

Apple 和 orange 之间有空格，例如 Apple | 橙子。但是 Animal 和 Dog 之间没有空格 Like this Animal|Dog。如果是这种情况，可以这样爆

```
$check = "Apple | Orange | Animal|Dog | Grape";
$ex=explode(" | ", $check); 
```

它将以格式返回数组

```
array("Apple","Orange","Animal|Dog","Grape"); 
```

您可以再次操作上述数组以获取 Animal

我希望这就是你的意思

编辑：粗略的解决方案可能是：

```
<?
$check = "Apple|Orange|Animal|Dog|Grape";
$ex=explode("|",$check);
if(in_array("Animal",$ex))
{
    echo "Animal:";
}
if(in_array("Dog",$ex)){
    echo "Dog";
}
?> 
```

所以在这种情况下，动物和狗的位置无关紧要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:31:43.530

我处理这个问题的方法是使用 / 而不是 | 类别和项目之间。或者如果您真的想保留 |，请使用不同的分隔符 在类别和项目之间。

```
$check = "Apple|Orange|Animal/Dog|Grape";
$ex=explode("|", $check); 
```

但是如果你不想这样做......那么如果你知道你的类别名称就像“动物”，你可以在 | 上爆炸数组 并假设如果您当前的值是“动物”，那么数组中的下一个元素将是“狗”、“猫”等等。不过，这不是一个好的解决方案，并且不适用于多个类别级别。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T03:37:05.467

str_replace("动物|","动物:",$check); 然后爆炸

# php - PHP PDO插入多选数据

> ID：11945311
> 
> 赞同：1
> 
> 时间：2012-08-14T03:16:27.400
> 
> 标签：php, pdo

我不擅长编程和英语，而且我 40++。我对 PHP PDO 和 Multi Select 的东西有几个问题..

我在一个表单中创建了一个多选菜单，它调用数据库中的值，如下所示：-

```
<select multiple=multiple id="imsohot">

<?php

echo '<option value="$row[id]">';

?>

</select> 
```

它工作正常。

我还创建了一个新文件来处理表单以将数据提交到数据库，它适用于正常的数据库插入，它看起来像这样：-

```
$qry="query goes here";

stmt=conn->prepare($qry);

stmt->bindParam(1, $_POST['varname']);

stmt->execute(); 
```

我的问题是：但是当它没有固定数组时如何将值提交到数据库中？喜欢在选择某些数据时提交`#imsohot`多选菜单。

关于我的问题，这两个链接中的哪一个可以解决我的问题？

[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

[http://php.net/manual/en/pdo.query.php](http://php.net/manual/en/pdo.query.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:32:52.867

答案都不是:)

要使用 PDO 将数据保存到数据库，您必须首先准备好 SQL 语句。[这个 PDO::exec() 示例](http://www.php.net/manual/en/pdo.exec.php#100850)显示了您要执行的操作。

注意它是如何使用**while 循环通过****PDO::prepare()**和**PDO::execute()运行的。**您需要做的就是在他传递**$data**的地方使用您的表单数据。

 ****HTH :)****

# c# - 使用 ASP.NET 成员资格提供程序（没有登录逻辑？）

> ID：11945312
> 
> 赞同：3
> 
> 时间：2012-08-14T03:16:31.797
> 
> 标签：c#, asp.net, sql-server-2008, login, asp.net-membership

我是使用 asp.net 会员提供程序的新手，我已成功将我的应用程序链接到 aspnet 会员数据库，并使用了登录屏幕等附带的 asp.net 模板。我不明白它是如何登录的?，我没有看到登录文件背后的任何逻辑。

```
public partial class Login : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        RegisterHyperLink.NavigateUrl = "Register.aspx?ReturnUrl=" + HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"]);
    }
} 
```

上面的代码就是全部了。我可以在任何地方访问这样的代码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:25:24.267

逻辑是登录控件。查看您的 ASPX 文件，您将在那里看到控制标记。但是，我不相信您将能够看到控件的来源。

前往 MSDN 以查看您可以自定义登录控件的所有方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:26:02.290

一旦会员设置让您连接到 aspnetdb，登录几乎是“免费的”。

您所指的默认登录页面使用 ASP.NET[登录控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.aspx)，该控件通过您在 web.config 中设置的默认成员资格提供程序执行登录过程。

你可以在这里看到我在 MSDN 上如何工作的很好的总结：[ASP.NET Login Controls Overview](http://msdn.microsoft.com/en-us/library/ms178329.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T15:45:18.457

当您查看 web.config 文件时，您将看到成员资格。

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear/>
    <add name="DefaultMembershipProvider" .../>
  </providers>
</membership> 
```

默认情况下，登录控制使用该成员资格提供程序。例如，当您登录时，它会在后台调用 Membership 提供程序的 ValidateUser 方法。如果要拦截登录逻辑-

1) 在登录控件的[LoggingIn](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggingin.aspx)事件中编写代码或

2) 创建您自己的[自定义会员提供程序](http://msdn.microsoft.com/en-us/library/f1kyba5e.aspx)

如果您想要加盐和散列的密码，自定义会员提供程序是您的选择。

# scala - 并发程序中的 Scala 模式匹配

> ID：11945318
> 
> 赞同：5
> 
> 时间：2012-08-14T03:17:08.600
> 
> 标签：scala, concurrency, pattern-matching

我是 Scala 的新手，我想编写一些带有模式匹配的多线程代码，我想知道我是否可以将模式匹配代码视为原子的。

例如：

```
abstract class MyPoint
case class OneDim(x : Int) extends MyPoint
case class TwoDim(x : Int, y : Int) extends MyPoint

var global_point : MyPoint = new OneDim(7)

spawn {
    Thread.sleep(scala.util.Random.nextInt(100))
    global_point = new TwoDim(3, 9)
}
Thread.sleep(scala.util.Random.nextInt(100))

match global_point {
    case TwoDim(_, _) => println("Two Dim")
    case OneDim(_) => println("One Dim")
} 
```

是否有可能执行如下：

1.  主线程到达“匹配 global_point”代码，发现 *global_point* 不是*TwoDim*类型并暂停（返回到调度程序）。
2.  生成的线程将 *global_point* 更改为*TwoDim类型*
3.  主线程返回，发现 *global_point* 不是*OneDim*类型，认为没有匹配到 *global_point* 并引发 NoMatch 异常。

Scala是否在内部避免了这种执行？如果是这样，那怎么办？匹配是否拍摄对象的快照，然后尝试将其与模式匹配？快照深度是否有限制（匹配模式可能很复杂和嵌套）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:18:13.163

这不是规范中的确凿证据，但它说明了编译器为您所做的一些事情，这应该允许您将**一些**匹配块视为原子 -**但绝对不是全部**。如果您自己同步代码，或者使用不可变对象，这会更安全。

## 平面示例

如果您使用以下脚本运行`scala -print`：

```
var m: Option[String] = _

m match {
  case Some(s) => "Some: " + s
  case None => "None"
} 
```

您将看到编译器创建的脱糖中间代码（为简洁起见，我删除了一些代码）：

```
final class Main$$anon$1 extends java.lang.Object {
  private[this] var m: Option = _;

  private <accessor> def m(): Option = Main$$anon$1.this.m;

  def this(): anonymous class Main$$anon$1 = {
    <synthetic> val temp1: Option = Main$$anon$1.this.m();

    if (temp1.$isInstanceOf[Some]()) {
      "Some: ".+(temp1.$asInstanceOf[Some]().x())
    else if (scala.this.None.==(temp1))
      "None"
    else
      throw new MatchError(temp1)
  }
} 
```

引用的可能共享对象`m`获得一个本地别名`temp1`，因此如果`m`在后台更改以使其指向另一个对象，则匹配仍然发生在所`m`指向的旧对象上。因此，您上面描述的情况（更改`global_point`为指向 a`TwoDim`而不是指向 a `OneDim`）不是问题。

## 嵌套示例

通常情况下，编译器似乎会为绑定在匹配案例保护中的所有对象创建本地别名，但它不会创建深层副本！对于以下脚本：

```
case class X(var f: Int, var x: X)

var x = new X(-1, new X(1, null))

x match {
  case X(f, ix) if f >  0 || ix.f > 0  => "gt0"
  case X(f, ix) if f <= 0 || ix.f <= 0 => "lte0"
} 
```

编译器创建这个中间代码：

```
private[this] var x: anonymous class Main$$anon$1$X = _;

private <accessor> def x(): anonymous class Main$$anon$1$X = Main$$anon$1.this.x;

final <synthetic> private[this] def gd2$1(x$1: Int, x$2: anonymous class Main$$anon$1$X): Boolean = x$1.>(0).||(x$2.f().>(0));

final <synthetic> private[this] def gd3$1(x$1: Int, x$2: anonymous class Main$$anon$1$X): Boolean = x$1.<=(0).||(x$2.f().<=(0));

def this(): anonymous class Main$$anon$1 = {
  <synthetic> val temp6: anonymous class Main$$anon$1$X = Main$$anon$1.this.x();

  if (temp6.ne(null)) {
    <synthetic> val temp7: Int = temp6.f();
    <synthetic> val temp8: anonymous class Main$$anon$1$X = temp6.x();

    if (Main$$anon$1.this.gd2$1(temp7, temp8))
      "gt0"
    else if (Main$$anon$1.this.gd3$1(temp7, temp8))
      "lte0"
    else
      throw new MatchError(temp6)
  } else
    throw new MatchError(temp6)
} 
```

`x`在这里，编译器为您匹配的对象及其两个子对象`x.f`（绑定到`f`）和`x.x`（绑定到）创建本地别名`ix`，但不为`ix.f`. 因此，如果您匹配的结构是深度嵌套的，并且您的案例依赖于您未在本地绑定的嵌套对象，则可能会发生竞争条件。众所周知，由于墨菲定律，并且会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T07:01:27.023

我认为为模式匹配生成的代码中没有任何类型的锁定或快照。如果是这样，它肯定会在语言规范中提到。话虽如此，如果您将模式匹配代码放入一个方法中，您至少可以确保该方法获得的引用在方法执行时不会改变。如果 TwoDim 和 OneDim 也是不可变的，那么您无需担心线程安全。即使它们不是不可变的，只要您在它们的可变字段之一上不匹配也没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:13:20.980

在 Scala 中，首选的并发解决方案是使用`Actor`s。在那些`Actor`s 中，您需要使用模式匹配来添加行为。`Actor`我使用与您类似的 scalas 构建了一个示例。

```
import scala.actors.Actor
import scala.actors.Actor._

abstract class MyPoint
case class OneDim(x: Int) extends MyPoint
case class TwoDim(x: Int, y: Int) extends MyPoint

case object Next
case object End

class OneDimSlave extends Actor {

  def act() {
    println("Starting OneDimSlave")
  loop {
        receive {
          case End => println("Stoping OneDimSlave"); exit()
          case Next => sender ! OneDim(scala.util.Random.nextInt(100))
        }
      }
}

}

class TwoDimSlave extends Actor {

  def act() {
    println("Starting TwoDimSlave")
  loop {
    receive {
      case End => println("Stopping TwoDimSlave"); exit()
      case Next => sender ! TwoDim(scala.util.Random.nextInt(100),scala.util.Random.nextInt(100))
    }
  }
}

}

class Master extends Actor {

  val oneDimSlave = new OneDimSlave
  val twoDimSlave = new TwoDimSlave

  oneDimSlave.start
  twoDimSlave.start

  def act {
    println("Starting Master")
for (_ <- 0 to 9) { oneDimSlave ! Next; twoDimSlave ! Next }
var count = 0
loop {
  if (count >= 20) { oneDimSlave ! End; twoDimSlave ! End; println("Stopping Master"); exit() }
  receive {
    case _ :OneDim => count += 1; println(count + ". One Dim")
    case _: TwoDim => count += 1; println(count + ". Two Dim")
  }
}
  }

}

object Main extends App {
  val master = new Master
  master.start
} 
```

首先，我创建了消息。你只在 s 之间发送不可变`Actor`，所以我使用了 case 对象。您也可以包装答案，但在这种情况下，不需要它。接下来我创建了两种奴隶，`MyPoint`如果他们收到一个新的，他们只是返回一个。最后我创建了一个大师。主服务器初始化两个从服务器，每种一个，然后启动它们。之后，他向`Next`每个人发送了 10 次。然后他收到回复并打印出来。当收到所有响应时，主机发送`End`到每个从机并终止。我得到以下输出：

```
Starting TwoDimSlave
Starting OneDimSlave
Starting Master
1\. One Dim
2\. Two Dim
3\. Two Dim
4\. Two Dim
5\. Two Dim
6\. Two Dim
7\. Two Dim
8\. Two Dim
9\. Two Dim
10\. Two Dim
11\. Two Dim
12\. One Dim
13\. One Dim
14\. One Dim
15\. One Dim
16\. One Dim
17\. One Dim
18\. One Dim
19\. One Dim
20\. One Dim
Stopping Master
Stopping OneDimSlave
Stopping TwoDimSlave 
```

# python - django 模板中“none”的等价物是什么？

> ID：11945321
> 
> 赞同：122
> 
> 时间：2012-08-14T03:17:29.210
> 
> 标签：python, django, django-forms, django-templates, django-views

我想看看 Django 模板中是否没有字段/变量。正确的语法是什么？

这是我目前拥有的：

```
{% if profile.user.first_name is null %}
  <p> -- </p>
{% elif %}
  {{ profile.user.first_name }} {{ profile.user.last_name }}
{% endif%} 
```

在上面的示例中，我将使用什么来替换“null”？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-08-14T04:40:52.740

`None, False and True`所有这些都在模板标签和过滤器中可用。`None, False`，空字符串 ( `'', "", """"""`) 和空列表/元组在评估`False`时都评估为`if`，因此您可以轻松地做到

```
{% if profile.user.first_name == None %}
{% if not profile.user.first_name %} 
```

提示：@fabiocerqueira 是对的，将逻辑留给模型，将模板限制为唯一的表示层，并在模型中计算类似的东西。一个例子：

```
# someapp/models.py
class UserProfile(models.Model):
    user = models.OneToOneField('auth.User')
    # other fields

    def get_full_name(self):
        if not self.user.first_name:
            return
        return ' '.join([self.user.first_name, self.user.last_name])

# template
{{ user.get_profile.get_full_name }} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-03-05T14:46:27.133

您还可以使用其他内置模板`default_if_none`

```
{{ profile.user.first_name|default_if_none:"--" }} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-23T21:10:25.347

您还可以使用内置的模板过滤器`default`：

如果 value 评估为 False（例如 None、空字符串、0、False）；显示默认的“--”。

```
{{ profile.user.first_name|default:"--" }} 
```

文档： [https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#default](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#default)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-27T03:47:20.293

[`is`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#is-operator)运算符：Django 1.10 中的新功能

```
{% if somevar is None %}
  This appears if somevar is None, or if somevar is not found in the context.
{% endif %} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-27T10:52:38.350

看看[yesno](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#yesno)助手

例如：

```
{{ myValue|yesno:"itwasTrue,itWasFalse,itWasNone" }} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-14T03:19:32.557

`{% if profile.user.first_name %}`有效（假设您也不想接受`''`）。

`if`在 Python 中，一般将`None`, `False`, `''`, `[]`, `{}`, ... 都视为错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-28T07:59:56.167

只是关于以前答案的注释：如果我们想显示一个字符串，一切都是正确的，但如果你想显示数字，请注意。

特别是当您有一个 0 值`bool(0)`评估为`False`，因此它不会显示并且可能不是您想要的。

在这种情况下更好地使用

```
{% if profile.user.credit != None %} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-30T21:17:34.377

你可以试试这个：

```
{% if not profile.user.first_name.value %}
  <p> -- </p>
{% else %}
  {{ profile.user.first_name }} {{ profile.user.last_name }}
{% endif %} 
```

这样，您实际上是在检查表单字段`first_name`是否具有与之关联的任何值。请参阅循环遍历 Django 文档`{{ field.value }}`中[的表单字段](https://docs.djangoproject.com/en/3.0/topics/forms/#looping-over-the-form-s-fields)。

我正在使用 Django 3.0。

# drupal-6 - 在哪里可以看到 Drupal 源代码

> ID：11945322
> 
> 赞同：0
> 
> 时间：2012-08-14T03:17:52.653
> 
> 标签：drupal-6, xampp, drupal-views

我是 Drupal 网站开发的新手。我的基本问题是我在哪里可以看到文件，例如：HomePage.PHP 或其他。

我在 Drupal 中保存了一个块，但在 drupal 文件夹下找不到相同的块。那么我错过了什么？

请帮我。

仅供参考：我正在使用 Drupal 6

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:53:50.997

如果要将这些页面移动到另一台服务器，只需移动 db。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:31:56.533

您没有 index.php，它是由 drupal “推出”的。但是，您应该能够编辑主题（页面格式）。在 ./sites/all/themes/THEMENAME/page.tpl.php 下。

此外，您应该在[此处](http://drupal.org/project/drupal)使用 Drupal 7.x。

[最后，这里](http://drupal.org/node/171194)是查看 Drupal 页面结构的好地方。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:29:07.483

由于您已从管理员端将所有这些页面创建为节点，因此您的所有页面都将保存到数据库中。您可以在数据库的节点表中检查它。最后，如果您想将所有这些页面移动到服务器，那么只需将数据库移动到服务器即可。

我希望它会帮助你。

# java - 设置 GlassFish 服务器

> ID：11945326
> 
> 赞同：0
> 
> 时间：2012-08-14T03:18:17.393
> 
> 标签：java, jsp, glassfish

我正在 GlassFish 服务器上使用 NetBeans 开发 JSP 项目。该项目使用 MS Access 文件作为数据库。我需要将 MDB 文件放在哪里，以便 JSP 类可以在运行时找到它？

我的代码

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
location = loc.getAbsolutePath().substring(0, loc.getAbsolutePath().length() - 2);
String filename = location + "\\myDB.mdb";
System.out.print(filename);
String database;
database = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=";
database += filename.trim() + ";DriverID=22;READONLY=true}";
c = (DBM) DriverManager.getConnection(database, "", ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:37:34.750

您应该需要设置获得连接的 DSN。请参阅以下步骤；

1.  如下打开 Windows 的 ODBC 数据源管理器：选择开始 > 设置 > 控制面板 > 管理工具 > 数据源。
2.  在 ODBC 数据源管理器对话框中，单击系统 DSN 选项卡。
3.  单击添加以将新的 DSN 添加到列表中。
4.  向下滚动并选择 Microsoft Access (.MDB) 驱动程序。
5.  输入数据源名称的名称“yourDataSourceName”（不加引号，但大小写相同）
6.  单击 CREATE 并选择一个文件来保存数据库（我选择了“d:\java\test.mdb”）——这将创建一个新的空白 MS Access 数据库。
7.  一直点击“确定”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:57:21.703

将 MDB 文件放在机器上的哪个位置并不重要。重要的部分是 Java 需要 JDBC，Java 世界相当于 ODBC。（不完全等同，但你让我漂移）。但是 MS Access 不支持 JDBC，只支持 ODBC。您需要按照 Sai 所说的设置 ODBC。Sun 很久以前创建了 JDBC-ODBC 桥作为桥，直到所有 DB 都创建了 JDBC 驱动程序（但不是每个人都这样做......像 Access）。它很久以前就打算消失了，但它仍然存在，您需要使用它并对其进行配置。如果你用谷歌搜索“jdbc odbc bridge”，有很多关于如何做到这一点的例子，但这里有一个指向这个网站的链接开始：

[带有 ms-access 的 JDBC？](https://stackoverflow.com/questions/9863482/jdbc-with-ms-access)

但实际上，你最好看看这个。有很多高质量的网站会向您展示。首先查找有关 Oracle 的教程，然后再查找其他地方。远离印度玫瑰或任何所谓的东西。这是如何不做的事情。

我建议不要使用 MS Access。除了熟悉之外，您还有什么理由使用 MS Access？最好使用具有本机 jdbc 驱动程序的数据库。有很多高质量的数据库都有现成的 JDBC 驱动程序，这些驱动程序肯定比 MS Access 质量更好、更稳定。

如果您想要开箱即用的易于启动和使用的东西，并且有免费的查询和数据库维护工具，请尝试 MySQL。只需确保将其设置为使用“InnoDB”选项。这使它表现为一个“酸”兼容的数据库。

我的首选是 PostgreSQL，但如果你以前没有使用过它，一开始设置它可能有点令人生畏，并且没有核心团队构建的 GUI 工具（它有一些来自关联项目，但远不及是由 MySQL 提供的）。它有一些需要完成的配置才能允许 TCP/IP 连接，以及一些关于如何允许用户连接的安全配置。MySQL 使新用户不那么痛苦。事实上，我认为它与 MS Access 一样易于使用。（FWIW 我使用 Postgres 是因为我认为 DB 引擎质量更好，功能更强大，适用于更大的项目……比如开源 Oracle）。

那里还有其他免费的，但如果您从 MS Access 迁移，MySQL 很可能是您可以轻松使用的。

# entity-framework - EntityFramework - 如何从 userId 匹配的另一个表中获取与任何 IDS 匹配的行？

> ID：11945328
> 
> 赞同：0
> 
> 时间：2012-08-14T03:18:40.300
> 
> 标签：entity-framework

我不确定如何在 EF 中获取我需要的行。在 SQL 中，它看起来像这样：

```
SELECT * FROM [Recipes] 
JOIN [UserFavorites] ON [UserFavorites].[RecipeId] = [Recipes].[Id]
WHERE [UserFavorites].[UserId] = @UserId 
```

我知道如何获得与用户 ID 匹配的用户收藏夹，如下所示：

```
db.UserFavorites.Where(x => x.UserId == userId 
```

但是，我如何获得与这些用户收藏中的 recipeIds 匹配的所有食谱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:25:29.843

您可以使用 LINQ 并构造查询：

```
var recipes = from r in db.Recipes
              join f in db.UserFavorites on r.Id equals f.RecipeId
              where f.UserId = userId
              select r 
```

或者您可以将 lambda 语法与导航属性一起使用，假设您已为相关关系设置了它们

```
var recipes = db.Recipes.Where(r => r.UserFavorites.Any(f => f.UserId == userId)); 
```

当然，您可以使用等效的 lambda 语法构造第一节中描述的实际查询（因为查询语法只是一种语言功能，可以编译为使用匿名委托对扩展方法的等效调用），但这往往阅读起来有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:41:06.400

怎么样：

```
var recipes = context.Recipes
                  .SelectMany(r => r.Users, (r, u) => new { Recipe = r, User = u }
                  .Where(o => o.User.UserId = userId)
                  .Select(o => o.Recipe); 
```

这意味着 UserFavorites 是 Recipes 和 Users 之间的交集表

```
Recipes >- UserFavorites -< Users 
```

# facebook - 如何以编程方式将应用程序邀请请求发送到 Facebook iOS SDK 3.0 中的好友列表？

> ID：11945332
> 
> 赞同：0
> 
> 时间：2012-08-14T03:19:04.733
> 
> 标签：facebook, user-interface

如何以编程方式将应用程序邀请请求发送到 iOS SDK 3.0 中的好友列表？

通常在桌面 UI 上我们使用 FB.UI() 但我们在 iOS 上使用的是 3.0 FB SDK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T05:15:55.113

[http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/](http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/)

Apprequests 似乎没有在 3.0 SDK 中更新。它仍然使用与以前几乎相同的方法，因此您需要导入“不推荐使用的标头”。

# xml - jqgrid（邻接）中带有json的treegrid，jqgrid不显示带有json的数据？

> ID：11945340
> 
> 赞同：1
> 
> 时间：2012-08-14T03:19:47.583
> 
> 标签：xml, json, jqgrid, treeview

我在寻找如何在邻接模型中为 jqgrid 转换 json 中的 xml 的示例时遇到了麻烦，xml 可以工作，但是在文档中没有 json [docs](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aadjacency_model)中的示例，所以有人可以指导我在 json 中转换这个 xml 吗？ ？，我还在想办法怎么做，帮助真的很感激

这是我的代码：

```
if ( stristr($_SERVER["HTTP_ACCEPT"],"application/xhtml+xml") ) {
        header("Content-type: application/xhtml+xml;charset=utf-8"); } else {
        header("Content-type: text/xml;charset=utf-8");
}
if(isset($_REQUEST['nodeid'])==FALSE) {
    $node =0;
}
else{
    $node = (integer)$_REQUEST["nodeid"];
}
$clsJqGrid = new redCuidadana();
$et = ">";
echo "<?xml version='1.0' encoding='utf-8'?$et\n";
echo "<rows>";
echo "<page>1</page>";
echo "<total>1</total>";
echo "<records>1</records>";

if($node >0) { //check to see which node to load
   $wh = 'parent_id='.$node; // parents
   //$n_lvl = $n_lvl+1; // we should ouput next level
} else {
   //$wh = 'ISNULL(parent_id)'; 
   $wh ='parent_id=0';// roots
}
$mostrarRegistros= $clsJqGrid->mostrarRegistros($wh);
foreach ($mostrarRegistros as $row){
   echo "<row>";         
   echo "<cell>".$row["id_ciudadano"]."</cell>";
   echo "<cell>".$row["distrito"]."</cell>";
   echo "<cell>".$row["seccion"]."</cell>";
   echo "<cell>".$row["rol"]."</cell>";
   echo "<cell>".$row["clave_electoral"]."</cell>";
   echo "<cell>".$row["nombre"]."</cell>";
   echo "<cell>".$row["apaterno"]."</cell>";
   echo "<cell>".$row["amaterno"]."</cell>";
   echo "<cell>".$row["level"]."</cell>";
   echo "<cell><![CDATA[".$row["parent_id"]."]]></cell>";
   if($row["level"] == "2"){echo "<cell>"."true"."</cell>";}
   else{echo "<cell>".$row["isLeaf"]."</cell>";}
   echo "<cell>".$row["expanded"]."</cell>";
   echo "</row>";
}
echo "</rows>";
?> 
```

这就是我到目前为止所拥有的

```
 <?php
require_once '../../sesion/model/clsSesion.php';
require_once '../../red_ciudadana/model/modelRedCuidadana.php';

if(isset($_REQUEST['nodeid'])==FALSE) {
    $node =0;
}
else{
    $node = (integer)$_REQUEST["nodeid"];
}

if($node >0) {
    $wh = 'parent_id='.$node;
    }
    else{

    $wh ='parent_id=0';
    }

header("Content-type: text/html;charset=utf-8");

$response->total = 1;
$response->page = 1;
$response->records = $count=1;
$i=0;

$clsJqGrid = new redCuidadana();
$mostrarRegistros= $clsJqGrid->mostrarRegistros($wh);

foreach ($mostrarRegistros as $row){

    if($row["level"] == "2"){$cosa= "true";}
        else{$cosa=$row["isLeaf"];}

     $response->rows[$i]['id']=$row["id_ciudadano"];
     $row["expanded"];
     $response->rows[$i]['cell']= array($row["distrito"],
     $row["seccion"],
     $row["rol"],
     $row["clave_electoral"],
     $row["nombre"],
     $row["apaterno"],
     $row["amaterno"],
     $row["level"],
     $row["parent_id"],
     $cosa, 
     $row["expanded"]
     );

    $i++;
}

echo json_encode($response);

?> 
```

**但是 jqgrid 没有显示数据**，这是我得到的 json

```
{"total":1,"page":1,"records":1,"rows":[{"id":"1","cell":["01","1001","Coordinador Distrital","ACBJ1975000001","JOSE RAUL","ACEVES","BARRIGA","0","0","false","false"]}]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:23:28.850

我不知道 php，但这就是我在 c# (ASP.NET MVC3) 中的做法：这是用于自动加载树，而不是一次加载树。

动作方法：

```
public JsonResult GetSPTreeJSON(string nodeid, string n_level, string currentUser)
        {
            List<TreeNode> list = _clientService.GetTreeNodeList(nodeid, n_level);

            var jsonData = new
            {
                page = 1,
                total = 1,
                records = 1,
                rows = (
                    from TreeNode u in list
                    select new
                    {
                        cell = new object[] { u.Id.ToString(), u.name, u.level, u.ParentId, u.isLeaf, false }
                    }).ToList()
            };

            return Json(jsonData, JsonRequestBehavior.AllowGet);

        } 
```

建立TreeNodes列表的方法：

```
public List<TreeNode> GetTreeNodeList(string nodeid, string n_level)
    {
        List<Tree> root = null;

        Guid? currentNode;
        if (nodeid == null)
            currentNode = null;
        else
            currentNode = new Guid(nodeid);

        if (nodeid == null) 
            root = ssdsContext.Trees.Where(x => x.ParentId == null).ToList(); 
        else
            root = ssdsContext.Trees.Where(x => x.ParentId == currentNode).ToList();

        List<TreeNode> list = new List<TreeNode>();

        int newLevel = n_level == null ? 0 : Convert.ToInt32(n_level) + 1;

        foreach (Tree t in root)
        {
            TreeNode n = new TreeNode
            {
                expanded = false,
                Id = t.UserId,
                isLeaf = t.IsUser,
                name = t.Name,
                ParentId = t.ParentId,
                level = newLevel
            };
            list.Add(n);
        }
        return list;
    } 
```

树节点类：

```
public class TreeNode
    {
        public Guid Id;
        public string name;
        public int level;
        public Guid? ParentId;
        public bool isLeaf;
        public bool expanded;
    } 
```

示例 JSON（注意我们的 id 是 GUIDS）：

```
{
   "page":1,
   "total":1,
   "records":1,
   "rows":[
      {
         "cell":[
            "29846baa-ede0-4582-b9ed-39bcc486f2c2", //Id
            "Level1 Group", //Name
            1, //Level
            "5a1a9742-3e0f-11d3-941f-006008032006", //Parent Id
            false, //Is Leaf
            false //Expanded
         ]
      },
      {
         "cell":[
            "fd62f214-e25c-4d68-aa38-6805adfb4305",
            "Level1 Group",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            false,
            false
         ]
      },
      {
         "cell":[
            "39cc2783-811f-4885-9af6-d35b1a1385a2",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "5a1a9743-3e0f-11d3-941f-006008032006",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "466d78df-6f39-43ff-abfd-58e7bf91f8c8",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "c80ca2d1-8210-4c11-8c6d-005c97fce9cb",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "d1f870ed-bca6-4cc8-8b96-b19fa251c2f8",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "3061ce07-bff6-4d9a-a84a-a8a7d47ebd7a",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "d9dadce8-a9ce-4343-a8a0-b80844aa36ad",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      },
      {
         "cell":[
            "9042ded8-09ee-46f9-beac-8746ed1cdd17",
            "Level 1 Node",
            1,
            "5a1a9742-3e0f-11d3-941f-006008032006",
            true,
            false
         ]
      }
   ]
} 
```

也许你会很容易转换。

# python - 使用 Python 重置 NTFS 文件夹的继承权限

> ID：11945343
> 
> 赞同：4
> 
> 时间：2012-08-14T03:20:13.290
> 
> 标签：python, permissions, ntfs, pywin32

我在 NTFS 分区（在 Windows 2008 上）上有很多文件夹，它们没有从他们的父母那里继承他们的权限。

我想重置它，以便它们确实包含那些父权限（相当于选中“高级安全设置”区域下的“包括来自该对象的父级的可继承权限”复选框）。

由于我们在这里将 Python 用于其他一些系统管理任务，因此如果可能的话，我想用 Python 来完成（我知道如何在 VBScript 中完成，但这不会是一次性脚本，而是定期运行，因此应该与我们的代码库的其余部分集成）。

我一直在使用来自[http://timgolden.me.uk/python/win32_how_do_i.html](http://timgolden.me.uk/python/win32_how_do_i.html)和 Google 的优秀 pywin32 扩展和示例来开始使用，但我看不出有任何方法可以简单地说“从父级继承权限。 "

使用 AddAccessAllowedAceEx，我什至可以通过添加 INHERITED_ACE 标志来伪造某些东西的继承，无论它是否真的来自父级：

```
dacl.AddAccessAllowedAceEx( \
  win32security.ACL_REVISION_DS \
, win32security.OBJECT_INHERIT_ACE | win32security.CONTAINER_INHERIT_ACE | win32security.INHERITED_ACE \
, ntsecuritycon.FILE_GENERIC_READ | ntsecuritycon.FILE_GENERIC_EXECUTE \
, some_sid_here \
) 
```

但是，除非我从根文件夹遍历整个路径并一直构建继承，否则我怎么知道要继承哪些东西呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:50:07.630

需要在根文件夹的 ACE 上设置 OBJECT_INHERIT_ACE 和 CONTAINER_INHERIT_ACE。您可能还想清除直接在每个子文件夹和文件上设置的任何权限。（那些将是在其 ACE 标志中不包含 INHERITED_ACE 的那些）。

# firefox - 下颚未宣布滚动条的咏叹调角色

> ID：11945349
> 
> 赞同：1
> 
> 时间：2012-08-14T03:21:23.853
> 
> 标签：firefox, scrollbar, wai-aria, jaws-screen-reader

我正在将 FF 与 Jaws 一起使用，并且我已经在 div 上设置了“滚动条”的角色，但 Jaws 没有接收到它：

wai aria 规范说 aria-valuemax、min 和 now 是滚动条角色的强制属性，但我不确定在这种情况下它是否有意义，因为我所拥有的只是一个垂直可滚动区域......想法？

FF 14.0.1 大白鲨 13.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:01:58.933

目前，JAWS 不支持滚动条角色。因此，如果您指定一个具有不受支持的角色的元素，例如，在使用 JAWS 时可能会导致意外结果，它有时会尝试宣布某些状态，而在其他情况下，它会忽略它们。

关于您关于 aria-valuemax、aria-valuemin 和 aria-valuenow 的第二个问题，这些属性有助于确定相对于拇指位置在查看区域中显示滚动内容的百分比。它将帮助盲人用户了解可以向上或向下滚动多少内容。

aria-valuenow 可以根据拇指位置和滚动条的高度计算如下：

假设查看区域的高度为 200 像素，拇指高度为 30 像素。因此，最初当拇指位置距顶部为 0 时，该区域中当前显示的内容为 aria-valuemin=aria-valuenow，当拇指距顶部 170px 时，滚动内容完全显示 aria-valuemax=100。

如果你有兴趣，你可以看看这个关于现在计算 aria-value 的[演示。](http://jsbin.com/ohimoq/4)您可以通过标签浏览元素，JAWS 不会宣布任何角色，但似乎最初会宣布值，并且不会以与[滑块相同的方式更新值](http://test.cita.illinois.edu/aria/slider/slider1.php)

也可以看看：

*   [官方 JAWS 咏叹调支持列表](http://freedomscientific.com/PDF/visionloss/manuals/DevDoc/JAWS-ARIA-Support.doc)

# c - 谁能帮我调试这个二维数组？

> ID：11945350
> 
> 赞同：0
> 
> 时间：2012-08-14T03:21:29.573
> 
> 标签：c, hash

我正在尝试增加二维数组的大小，而 hm 是一个包含数组 x 长度的结构。我使用值 -99999991 来指示数组的结尾。

这是正确的方法吗？

```
 hm->value = realloc(hm->value,(hm->x+1)*sizeof(int));
            hm->value[hm->x] = malloc(sizeof(int));
            hm->value[hm->x][0] = -999999991;
            hm->value[hm->x-1] = realloc(hm->value[hm->x-1],2*sizeof(int));
            hm->value[hm->x-1][1] = -999999991;
            hm->value[hm->x-1][0] = value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:46:40.533

如果可以调整大小，则没有二维数组，您有一个指向 int 指针的指针。

数组：

```
int A[n][m];
Accessing the array: A[2][3] = 4; // Equivalent to *(A + 2*m + 3) 
```

可变大小的二维“数组”：

```
int **A;
A = malloc(n*m*sizeof(int));
A[2][3] = 4; // Equivalent to *A + 2*??? + 3) 
```

编译器不知道您的数组是一维的，还是二维的，那么二维的大小是多少。这已经无法计算了。此外，realloc 无法将数据放在正确的位置。考虑一个 2x2 2D 数组到一个 2x3 2D 数组：

```
int **A = {{0,1}, {2,3}}; // for berevity - this isn't valid C!
// stored in memory as [0,1,2,3]
A = realloc(A, 2*3* sizeof(int)); 
```

存储在内存中的新数组为 [0,1, , 2, 3, ]; 这需要复制数据。

有两个不错的解决方案（尽管它们并不漂亮）：1）将您的二维数组视为一维数组的列表

```
int **A;
A = malloc(m*sizeof(void *));
for (i = 0; i < m; ++i) {
    A[i] = malloc (n*sizeof(int);
} 
```

（现在 realloc 应该适用于这两个数组，但访问元素将需要两个指针取消引用而不是指针算术）

2）如果数组的维度之一是固定的，那么我们可以在内存中使用二维数组并根据需要重新分配它。

```
#define M 16
int **A;
A = malloc(M*n*sizeof(int)); // realloc also works
// access an element:
*(A + 3*M + 2) = 4; // (3*M is compile time constant) 
```

在第二个例子中，我们总是在二维数组的末尾增长（所以我从 2x2 到 2x3 的例子是非法的——第二个 2 是*固定*长度）。

# node.js - 为什么我不能使用 node.js 将对象插入 mongodb？

> ID：11945353
> 
> 赞同：1
> 
> 时间：2012-08-14T03:21:40.450
> 
> 标签：node.js, mongodb

```
 var express = require('express');
    var routes = require('./routes');
    var socket = require('socket.io');
    var fs = require('fs');
    var app = module.exports = express.createServer();
    var Server = require('mongodb').Server,
        Db = require('mongodb').Db,
        Connection = require('mongodb').Connection;
    var host = 'localhost';
    var port = Connection.DEFAULT_PORT;
    var db = new Db('node-mongo-examples', new Server(host, port, {}), {native_parser:false});

    db.open(function(err, db) {
        console.log('opened');   
        app.listen(3000); 

    });

    db.collection('locations', function(err, collection) {
          var object= {word:'TEST'};
          collection.insert(object, {safe:true}, function(err, result) {
            var array = collection.findOne({word:'TEST'}, function(err, item) {});            
             console.log(array);// <----always  "undefined" 
          });        
    }); 
```

我尝试将对象插入数据库。通过每次使用“console.log(array)”，我发现它总是“未定义”。是无法插入数据库还是无法从数据库中找到。我该如何解决？

但是，“console.log(item)”显示“null”。它是否成功插入数据库，或者我应该更改另一种方式从数据库中获取对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:42:24.920

`collection.findOne`是异步的，所以不要使用函数的返回值；相反，您应该`console.log(item)`从（当前为空的）回调内部。

```
 db.collection('locations', function(err, collection) {
     var object= {word:'TEST'};
     collection.insert(object, {safe:true}, function(err, result) {
       collection.findOne({word:'TEST'}, function(err, item) {
          console.log(item);
       });
     });        
 }); 
```

# php - CakePHP 和 Lightview JQuery 插件：增加查看次数

> ID：11945359
> 
> 赞同：0
> 
> 时间：2012-08-14T03:23:02.413
> 
> 标签：php, javascript, jquery, cakephp

我在我的网页中使用以下插件：

[http://www.nickstakenburg.com/projects/lightview/](http://www.nickstakenburg.com/projects/lightview/)

该脚本在显示照片和它应该做的所有其他事情方面效果很好，但是，我想完成以下我无法做到的事情：

```
Have the plugin increment view count everytime an image is displayed 
```

我在我的`photo.php`模型中创建了以下操作，但我无法找到使用插件调用的方法：

```
function incrementViewCount($id) {
    $this->updateAll(
        array('Photo.viewed' => 'Photo.viewed+1'),                    
        array('Photo.id' => $id)
    );

} 
```

我在我的网站上按照以下内容进行了设置：

```
<?php
    foreach ($photocategory['Photo'] as $photo){
?>
<li>
<a 
        href="/img/uploads/photos/<?php echo photo['photocategory_id']."/".$photo['image']; ?>" 
        class="lightview" 
        data-lightview-group="shared_options"
    >
    <img 
            style="width:155px;height:113px;" 
            src="/img/uploads/photos/<?php echo $photo['photocategory_id']."/thumb/".$photo['image']; ?>" 
            alt="" 
    />
</a>
</li>
<?php } ?> 
```

如果有人知道关于这个插件或 jQuery 的任何信息，并且如果你能提出一种方法来实现这一点，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T09:33:50.153

如果您使用的是 CakePHP，这个 [https://github.com/sliker/CakePHP-Counter-Plugin](https://github.com/sliker/CakePHP-Counter-Plugin)可能会有所帮助。

具有用于递增计数器的简单调用方法。

# java - 如何将文件内容放入 JList

> ID：11945360
> 
> 赞同：0
> 
> 时间：2012-08-14T03:23:02.907
> 
> 标签：java, swing, io, java.util.scanner, jlist

如何将 examplefile.dat 的内容放入 Jlist examplefile.dat

埃文：乔：兰斯：史蒂夫

用冒号分隔的名称将被转换为数组并将其放入 JList 或 JComboBox

这是我加载和打印文件的代码

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.*;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class FileScanner {

    /**
     * @param args the command line arguments
     * @throws FileNotFoundException
     * @throws IOException  
     */
    public static void main(String[] args) throws FileNotFoundException, IOException {
        JPanel panel = new JPanel();
        JFrame frame = new JFrame();
        final JTextField input0 = new javax.swing.JTextField(20);
        JButton load = new javax.swing.JButton("Load");
        frame.add(panel);
        frame.setSize(240,200);
        panel.add(input0);
        panel.add(load);

        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setVisible(true);
        load.addActionListener(new ActionListener() {
                            @Override
                            public void actionPerformed(ActionEvent e) {
                                 FileReader fin = null;
                                 String filename = input0.getText();
                            try {
                                 fin = new FileReader(filename);
                                } catch (FileNotFoundException ex) {
                                   Logger.getLogger(FileScanner.class.getName()).log(Level.SEVERE, null, ex);
                                }
                                 Scanner src = new Scanner(fin);
                                 src.useDelimiter(":");
                                 while (src.hasNext()) {
                                 String lol = src.nextLine();
                                 System.out.println(lol); 
                                }
                                } 
                                });

        }
} 
```

好的，这是我的代码..

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.DefaultListModel;
import javax.swing.DefaultListSelectionModel;
import javax.swing.ListSelectionModel;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Jfetizanan
 */
public class IOtestForm extends javax.swing.JFrame {

    /**
     * Creates new form IOtest
     */
    public IOtestForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        list = new javax.swing.JList();
        input0 = new javax.swing.JTextField();
        load = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jScrollPane1.setViewportView(list);
        DefaultListSelectionModel m = new DefaultListSelectionModel();
        m.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        m.setLeadAnchorNotificationEnabled(false);
        list.setSelectionModel(m);
        list.addListSelectionListener(new ListSelectionListener() {
            @Override
        public void valueChanged(ListSelectionEvent e) {
        int selected[] = list.getSelectedIndices();
        for (int i = 0; i < selected.length; i++) {
        String element = (String) list.getModel().getElementAt(selected[i]);
        input0.setText(element);
        }}});

        load.setText("Load");
        load.addActionListener(new ActionListener() {
                            @Override
            @SuppressWarnings("unchecked")
                            public void actionPerformed(ActionEvent e) {
                                 FileReader fin = null;
                            try {
                                 fin = new FileReader("data.dat");
                                } catch (FileNotFoundException ex) {
                                   Logger.getLogger(IOtestForm.class.getName()).log(Level.SEVERE, null, ex);
                                }
                                 Scanner src = new Scanner(fin);
                                 src.useDelimiter("\n");
                                DefaultListModel model = new DefaultListModel();
                                while (src.hasNext()) {
                                String lol = src.nextLine();
                                model.addElement(lol);
                                }
                                list.setModel(model);
                                } 
                                });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
                    .addComponent(input0)
                    .addComponent(load, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(13, 13, 13)
                .addComponent(load)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(input0, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(94, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(IOtestForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new IOtestForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField input0;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JList list;
    private javax.swing.JButton load;
    // End of variables declaration
} 
```

@MadProgrammer 看看我发布的新代码.. 它的作用是加载文件并在 JList 中显示其中的所有内容，当我单击它时.. 它在 textarea 中显示该行.. 但我希望 Jlist 显示只有列表中的数字以及当我单击它时。它显示行中其余字符串中的其余字符

这必须是 data.dat 的内容

1 大声笑

2 大声笑

3 大声笑

4 大声笑

*不要介意行之间的空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:25:47.550

```
JList list = new JList(); // You need to create the JList first
JScrollPane scrollPane = new JScrollPane(list);
// Add the scrollpane to the UI

...

// At some time in the future, load the results...
DefaultListModel model = new DefaultListModel();
while (src.hasNext()) {
    String lol = src.nextLine();
    model.addElement(lol);
}
list.setModel(model); 
```

也许你想读一读

*   [如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)
*   [如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

更多有用的信息

# jsf - 如何通过更新 我无法使用 globalFilter 数据更新输入文本。 我可以在 bean 中看到 globalFilter 值，并且我还使用 Firebug 检查我使用了正确的 id，但 play 值仍然为空。 <p:datatable 0="" 3661="" id="osTable" var="object" 问问题="" 2012-08-14t03:23:13.127="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我无法使用="" globalfilter="" 数据更新输入文本。="" 我可以在="" bean="" 中看到="" 值，并且我还使用="" firebug="" 检查我使用了正确的="" id，但="" play="" 值仍然为空。="" <p:datatable="" value="#{bean.lazyModel}" selection="#{bean.selectedObject}" selectionmode="single" rowkey="#{object.ID}" paginator="true" paginatorposition="bottom" paginatortemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}" rowsperpagetemplate="5,10,15" rows="10" widgetvar="tableWidgetVar"><p:ajax event="filter" listener="#{bean.onFilter}" update="osTable:play"><f:facet name="header"><p:outputpanel id="panel" style="float: left"><h:panelgrid columns="3"><p:inputtext id="globalFilter" onkeypress="if (event.keyCode == 13) {tableWidgetVar.filter()}" style="width: 100px"><p:commandbutton value="Clear Filter" ajax="true" action="#{bean.update}" onclick="document.getElementById('osTable:globalFilter').value = ''"></p:commandbutton></p:inputtext></h:panelgrid></p:outputpanel></f:facet>知道为什么吗？ 谢谢 Modernizr 不为 CSS3 功能提供任何 polyfill。它确实提供了一个简单的 polyfill 来启用旧浏览器中 HTML5 元素的样式。除此之外，它主要用作通过将类名添加到页面的 html 标记来检测特征的方法。 所以在你的CSS中，你可以做类似的事情 .borderradius .mydiv { border-radius: 8px; } 如果您的浏览器支持，Modernizer 会将 .borderradius 类名添加到页面的 html 标记中……或者您可以在 js 中使用它来选择性地回退到插件等。 jsfjsf-2 4 0 回答 0 Related 2 timeout - 来自 NSAPI 插件的消息：没有可用于连接的后端服务器：10 秒后超时或幂等设置为 OFF 3 c# - C# & DB2 错误：在“get_profile_internet”之后发现了一个意外的标记“END-OF-STATEMENT” 1 java - 在纹理中切割出一个半透明的正方形 2 maven - java.lang.NoClassDefFoundError 部署由 Maven 覆盖创建的战争文件 1 vba - Run-Time error 91 I'm creating a macro that automatically creates a visio diagram from an excel spreadsheet where the diagram is representative of connections in a row on the exce 0 c++ - FFTW 方法 fftw_cleanup() 导致 SIGABRT 1 sql - Oracle Apex - 逗号分隔的 LOV 3 regex - Perl Use of uninitialized value in substitution 3 ruby-on-rails - Convert an ActiveRecord column to PostGIS Point 4 php - php 中的 $_SESSION 变量（逐页） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</p:ajax></p:datatable>

> ID：11945362
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jsf, jsf-2

我无法使用 globalFilter 数据更新输入文本。

我可以在 bean 中看到 globalFilter 值，并且我还使用 Firebug 检查我使用了正确的 id，但 play 值仍然为空。

```
<p:dataTable id="osTable"       
                 var="object" 
                 value="#{bean.lazyModel}" 
                 selection="#{bean.selectedObject}" 
                 selectionMode="single"
                 rowKey="#{object.ID}"
                 paginator="true"
                 paginatorPosition="bottom"
                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                 rowsPerPageTemplate="5,10,15"
                 rows="10"
                 widgetVar="tableWidgetVar">
        <p:ajax event="filter" listener="#{bean.onFilter}" update="osTable:play"/>
        <f:facet name="header">  
            <p:outputPanel id="panel" style="float: left">
                <h:panelGrid columns="3">
                    <p:inputText id="globalFilter" onkeypress="if (event.keyCode == 13) {tableWidgetVar.filter()}" style="width: 100px"/>
                    <p:commandButton value="Clear Filter" ajax="true" action="#{bean.update}" onclick="document.getElementById('osTable:globalFilter').value = ''"/>
                </h:panelGrid>
            </p:outputPanel>  
            <h:inputText id="play" value="#{bean.filter}"/>
        </f:facet> 
```

知道为什么吗？

谢谢

# windows - 退出 For 循环

> ID：11945365
> 
> 赞同：0
> 
> 时间：2012-08-14T03:23:56.450
> 
> 标签：windows, batch-file, dos

我想在获得第一个字符串后退出 for 循环。我怎样才能做到这一点？我应该使用 for 循环还是其他东西？

```
for /F "delims=" %%c in ('dumpbin "%%i" /headers ^| findstr "(x86)"') do set Result3=%%c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:48:45.213

您可以使用 GOTO 提前退出 FOR 循环。当执行 GOTO 时， FOR 和 FOR /F 都会立即终止。

```
for /F "delims=" %%c in ('dumpbin "%%i" /headers ^| findstr "(x86)"') do set Result3=%%c&goto :break
:break 
```

FOR /L 将在 GOTO 后立即退出，因为 DO 子句的内容将不再执行。但是 FOR /L 将默默地继续计数，直到达到其结束条件。

如果您的意图不仅是立即离开 FOR 循环，而且还退出子例程或批处理脚本，那么使用 EXIT /B 而不是 GOTO :LABEL 会更有效。

# javascript - 如何通过 JSP 代码将隐藏字段 (Javascript) 插入 XML？

> ID：11945366
> 
> 赞同：0
> 
> 时间：2012-08-14T03:24:03.620
> 
> 标签：javascript, xml, jsp, hidden

我正在尝试将 Javascript 隐藏字段中的数据插入 XML，但是只有“null”出现。我已经声明了变量，但它似乎无法捕获隐藏字段。我束手无策，希望我的问题能得到解决。

```
**<<-----I use session to pass the value to the XML page----->>**

<%
String X = (String)session.getAttribute("X");
    String Y = (String)session.getAttribute("Y");
    String W = (String)session.getAttribute("W");
    String H = (String)session.getAttribute("H");       
session.setAttribute("X",X);
session.setAttribute("Y",Y);
session.setAttribute("W",W);
session.setAttribute("H",H);
%>

**<<------Snippet of Javascript codes------->>**

function moveIt(){ 

if (!moveEnabled||!MovableItem) return;

// display info during testing

X = MovableItem.offsetLeft;

Y = MovableItem.offsetTop;

W = MovableItem.offsetWidth;

H = MovableItem.offsetHeight;

 ==Some codes here==

  document.getElementById('X').value = X;     
  document.getElementById('Y').value = Y;
  document.getElementById('W').value = W;
  document.getElementById('H').value = H; 
```

}

```
**<<-----JSP codes that I need to pass the values onto an XML----->>**

 <form name='form1' action='UpdateXML.jsp' method='post'>

<input type='hidden' name=source value="<%=src%>" />
<input type='hidden' id="X" name="X" value="<%=X%>"/>
<input type='hidden' id="Y" name="Y" value="<%=Y%>"/>
<input type='hidden' id="W" name="W" value="<%=W%>"/>
<input type='hidden' id="H" name="H" value="<%=H%>"/> 

<button type="button" onclick="window.location.href='editcompany.jsp'">Back!</button>
<button type="submit">Insert Into XML!</button>
</form> 
```

*我需要将隐藏字段（数据）插入 XML。我试过了，但它显示为“空”。有没有人可以帮我解决这个问题？非常感谢！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:34:01.507

第一个文件是UpdateXML.jsp 吗？如果是这样，不应该有request.getParameter()吗？

似乎下面的 4 行 session.setAttribute() 没有任何用处：

```
<%
String X = (String)session.getAttribute("X");
String Y = (String)session.getAttribute("Y");
String W = (String)session.getAttribute("W");
String H = (String)session.getAttribute("H");       
session.setAttribute("X",X);
session.setAttribute("Y",Y);
session.setAttribute("W",W);
session.setAttribute("H",H);
%> 
```

# php - 使用 php - pdf 和 jpeg 进行图像上传文件类型验证

> ID：11945371
> 
> 赞同：1
> 
> 时间：2012-08-14T03:24:56.067
> 
> 标签：php, mysql, image, file-upload

对于允许文件上传的表单的一部分，我有以下脚本，完整的脚本在这里：[图像上传问题 php: undefined index](https://stackoverflow.com/questions/11750866/issue-with-image-upload-php-undefined-index)。它可以正常工作，因为如果没有选择文件，它会停止脚本并在表单完全填充时上传（仅适用于登录用户）

到目前为止，我正在尝试做的事情没有运气，但是将上传类型限制为 pdf 和 jpeg。

欢迎任何建议

```
 <?php         
    if (is_uploaded_file ($_FILES ['image']['tmp_name'])) {
    if (move_uploaded_file($_FILES ['image']['tmp_name'], 
    "uploads/{$_FILES['image']['name']}")) { // Move the file over.
    echo '<p>The file has been uploaded!</p>';
    } else { // Couldn't move the file over.
    echo '<p><font color="red"> The thumbnail image could not be uploaded.</font></p>';
    $i = FALSE;
    }
    $i = $_FILES['image']['name'];
    } else {
    $i = FALSE;
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:33:17.623

您应该阅读手册[$_FILE type](http://www.php.net/manual/en/reserved.variables.files.php) 它会是这样的：

```
if ($_FILES['file']['type'] == 'image/jpeg')  && ($_FILES["file"]["type"] == "application/pdf") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:51:39.767

这将为您解决问题...

```
 <?php
    if(isset($_FILES['image'])&&(!empty($_FILES['image']))){  
    if (($_FILES['image']['type']== "image/jpeg")||($_FILES['image']['type'] == "application/pdf")){
$filename =$_FILES['image']['name'];
    $copy = copy($_FILES['image']['tmp_name'], "uploads/".$filename);
    if($copy){
    echo '<p>The file has been uploaded!</p>';
    }else{
    echo 'File is not a jpeg or pdf';
    }
    }else{
    echo '<p><font color="red"> The thumbnail image could not be uploaded.</font></p>';
    }
    }else{
    echo 'no image is selected';
    } 
    ?> 
```

# c# - 通过吞下异常将 WPF 文本框限制为整数

> ID：11945375
> 
> 赞同：2
> 
> 时间：2012-08-14T03:25:20.790
> 
> 标签：c#, wpf

我编写了以下内容来限制 WPF 文本框只接受整数并且只接受小于或等于 35 的数字：

在我的 WindowLoaded 事件中，我为“OnPaste”创建了一个处理程序：

```
DataObject.AddPastingHandler(textBoxWorkflowCount, OnPaste); 
```

OnPaste 包括以下内容：

```
private void OnPaste(object sender, DataObjectPastingEventArgs e)
{
    if (!IsNumeric(e.Source.ToString(), NumberStyles.Integer)) e.Handled = true;
} 
```

我们只强制数字的功能如下：

```
public bool IsNumeric(string val, NumberStyles numberStyle)
{
    double result;
    return double.TryParse(val, numberStyle, CultureInfo.CurrentCulture, out result);
} 
```

出现错误的特定文本框也应限制为数字 <=35。为此，我添加了以下 TextChanged 事件：

```
private void TextBoxWorkflowCountTextChanged(object sender, TextChangedEventArgs e)
        {
            try
            {
                if (textBoxWorkflowCount == null || textBoxWorkflowCount.Text == string.Empty || Convert.ToInt32(textBoxWorkflowCount.Text) <= 35) return;
                MessageBox.Show("Number of workflow errors on one submission cannot be greater then 35.", "Workflow Count too high", MessageBoxButton.OK, MessageBoxImage.Warning);
                textBoxWorkflowCount.Text = "";
            }
            catch(Exception)
            {
                // todo: Oh the horror! SPAGHETTI! Must fix. Temporarily here to stop 'pasting of varchar' bug
                if (textBoxWorkflowCount != null) textBoxWorkflowCount.Text = "";
            }

        } 
```

虽然这可以完成工作并且工作它非常讨厌/骇人听闻，我很想知道如何为了提高自己而做得更好......尤其是不必吞下例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:54:12.743

这对你有用吗？将 的内容替换为`TextBoxWorkflowCountTextChanged`：

```
if (textBoxWorkflowCount == null || textBoxWorkflowCount.Text == string.Empty) return;
int workflowcount = 36;
if (int.TryParse(textBoxWorkflowCount.Text, out workflowcount) && workflowcount > 35) {
    MessageBox.Show("Number of workflow errors on one submission cannot be greater then 35.", "Workflow Count too high", MessageBoxButton.OK, MessageBoxImage.Warning);
    textBoxWorkflowCount.Text = "";
}
else if (workflowcount == 36) {
    textBoxWorkflowCount.Text = "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:07:26.120

基于 QtotheC 的答案，经过更多重构后，我得出了以下答案。在这里为未来的访客添加:)

```
 private void TextBoxWorkflowCountTextChanged(object sender, TextChangedEventArgs e)
    {
        if (string.IsNullOrEmpty(textBoxWorkflowCount.Text))
            return;

        int workflowCount;

        if (!int.TryParse(textBoxWorkflowCount.Text, out workflowCount) || workflowCount <= 35) return;
        MessageBox.Show("Number of workflow errors on one submission cannot be greater then 35.", "Workflow Count too high",
                        MessageBoxButton.OK, MessageBoxImage.Warning);
        textBoxWorkflowCount.Text = "35";
    } 
```

# c++ - 在 AIX 上使用 C++ 获取系统模型名称

> ID：11945388
> 
> 赞同：0
> 
> 时间：2012-08-14T03:27:10.273
> 
> 标签：c++, aix

我需要（通过 C++ 程序）获取系统型号名称。平台是 AIX 5.3。基本上我需要获得与“uname -M”命令相同的信息。例如 IBM，1234-E4A

我尝试使用 uname() 但无法获取此信息。

任何帮助/建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:30:14.607

我很惊讶您似乎没有通过`uname`. 调用时结构中`machine`字段的内容是什么？这就是它应该在的地方：`utsname``uname`

```
#include <stdio.h>
#include <errno.h>
#include <sys/utsname.h>
int main (void) {
    struct utsname uts;
    if (uname (&uts) == -1)
        printf ("Error, errno = %d\n", errno);
    else
        printf ("%s\n", uts.machine);
    return 0;
} 
```

实际上，基于 IBM 的 doco，他们的处理`machine`方式略有不同。

> `subroutine uname utsname.machine`: 32 位唯一系统标识符，以十六进制字符串表示，例如“0123454C”。

所以这是系统 ID 而不是机器类型。

* * *

作为最后的手段，你总是可以做一些笨拙的事情`system ("uname -M >/tmp/myfile");` ，然后读入`myfile`标准的 CI/O 东西。

然而，尽管这可能是标准 C 所必需的，但我们可以在 AIX 中做得更好，因为我们有`popen`可用的。这使我们能够运行命令并检查其输出*，而*无需创建和读取临时文件。

像这样的东西：

```
#include <stdio.h>
int main (void) {
    int ch;
    FILE *fin = popen ("uname -M", "r");
    if (fin != NULL) {
        while ((ch = fgetc (fin)) != EOF) {
            putchar (ch);
        }
        fclose (fin);
    }
    return 0;
} 
```

# iphone - 未知类型名称“TransportViewController”

> ID：11945390
> 
> 赞同：0
> 
> 时间：2012-08-14T03:27:24.037
> 
> 标签：iphone, objective-c, ios, xcode4.3

这可能是一个简单的错误，但我似乎无法找出错误的问题所在`Unknown type name 'TransportViewController'`。我正在尝试将 2`double`值的 xCoor 和 yCoor 传递给我的第二个视图，即 TransportViewController。这是我的代码：

```
TransportViewController *xCoor;
TransportViewController *yCoor;
@property (retain, nonatomic) TransportViewController *xCoor;
@property (retain, nonatomic) TransportViewController *yCoor; 
```

这 4 行给了我错误

**MapViewController.h 文件**

```
#import "TransportViewController.h"
@interface MapViewController : UIViewController{
    TransportViewController *xCoor;
    TransportViewController *yCoor;
}
@property (retain, nonatomic) TransportViewController *xCoor;
@property (retain, nonatomic) TransportViewController *yCoor; 
```

**MapViewController.m 文件**

```
#import "TransportViewController.h"
@implementation MapViewController
@synthesize xCoor;
@synthesize yCoor;
.
.
.
- (IBAction) publicTransportAction:(id)sender{
    TransportViewController *view = [[TransportViewController alloc] initWithNibName:nil bundle:nil];
    self.xCoor = view;
    self.yCoor = view;
    xCoor.xGPSCoordinate = self.mapView.gps.currentPoint.x;
    yCoor.xGPSCoordinate = self.mapView.gps.currentPoint.y;
    [self presentModalViewController:view animated:NO];
} 
```

**TransportViewController.h 文件**

```
#import "MapViewController.h"
@interface TransportViewController : UIViewController<UITextFieldDelegate>
{
    double xGPSCoordinate;
    double yGPSCoordinate;
}
@property(nonatomic)double xGPSCoordinate;
@property(nonatomic)double yGPSCoordinate;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:52:58.030

你有一个循环依赖。简而言之，您已经指导了编译器：

*   `MapViewController.h`需要`TransportViewController.h`
*   和`TransportViewController.h`需要`MapViewController.h`

实际上 -标题中*都不*需要。在这两种情况下，您都可以使用**前向声明**。

**MapViewController.h**

```
@class TransportViewController; // << forward declaration instead of inclusion

@interface MapViewController : UIViewController {
    TransportViewController *xCoor;
    TransportViewController *yCoor;
}
@property (retain, nonatomic) TransportViewController *xCoor;
@property (retain, nonatomic) TransportViewController *yCoor;
@end 
```

**TransportViewController.h**

```
@class MapViewController; // << not even needed, as MapViewController
                          //    does not exist in this header

@interface TransportViewController : UIViewController<UITextFieldDelegate>
{
    double xGPSCoordinate;
    double yGPSCoordinate;
}
@property(nonatomic)double xGPSCoordinate;
@property(nonatomic)double yGPSCoordinate;
@end 
```

然后你`#import`的 s 可以`*.m`在需要的地方进入文件。

你应该阅读前向声明。你不能在任何地方使用它们，但是你可以经常在 headers 中使用它们而不是`#import`，并且可以真正减少你的构建时间。

# javascript - jQuery onclick 删除 i++

> ID：11945392
> 
> 赞同：1
> 
> 时间：2012-08-14T03:28:44.833
> 
> 标签：javascript, jquery

我有很多由 del1、del2、del3 等定义的项目。

如何将我的 .click 设置为 .del1 delete(1) 和 .del2 delete(2)？

```
<li>
    <a href="http://www." target="new">http://www.</a>
    <a href="#">
        <img class="del1" src="images/page_white_delete.png" title="Delete">
    </a>
</li>
<li>
    <a href="http://www." target="new">http://www.</a>
    <a href="#">
        <img class="del2" src="images/page_white_delete.png" title="Delete">
    </a>
</li> 
```

jQuery：

```
$(".del1").click(function(){
   favs.webdb.deleteTodo(1);
}); 
```

旧代码是这样写的：

```
 <li><a href="http://www.tes.com" target="new">http://www.tes.com</a>
<a href="javascript:void(0);" onclick="favs.webdb.deleteTodo(1);">
<img src="images/page_white_delete.png" title="Delete">
</a></li> 
```

我还认为我可能需要进行 jquery 实时点击，因为 webdb 在页面完成加载之前不会加载。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T03:34:32.883

使用泛型类和`data-*`属性：

```
<img class="del" data-number="1" src="images/page_white_delete.png" title="Delete">
<img class="del" data-number="2" src="images/page_white_delete.png" title="Delete">

$(".del").click(function(){
    favs.webdb.deleteTodo($(this).data("number"));
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T03:30:27.560

如果无法修改 HTML，可以从`class`名称中提取数字：

```
$('img[class^="del"]').click(function() {
  var class = $(this).attr('class');
  var number = parseInt(class.slice(3), 10);

  favs.webdb.deleteTodo(number);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T03:37:55.967

你最好设置一个特殊的属性，如：

```
<img class="del" data-node-id="1" src="images/page_white_delete.png" title="Delete"> 
```

然后：

```
 $('img.del').click(function(){ 
      favs.webdb.deleteTodo( $(this).data('node-id') ); 
 }) 
```

# php - 想知道 PHP 和 WAMP Server 的区别

> ID：11945394
> 
> 赞同：0
> 
> 时间：2012-08-14T03:29:44.450
> 
> 标签：php, wamp, wampserver

我想下载 PHP，谷歌搜索后，我看到我可以下载 WAMP 服务器。

PHP 和 WAMP 服务器有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:32:39.807

PHP 只是 PHP 解释器。WAMPServer 是一个软件堆栈，包括适用于 Windows 的 Apache2、PHP 和 MySQL。它会自动为您安装所有三个程序，并进行设置，这样您就不必单独安装它们。WAMPServer**包括**PHP

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:32:59.890

`PHP`是一种编程语言。

`WAMP`是**一套**开发工具，其中包括：

*   阿帕奇（网络服务器）
*   MySQL（开源数据库）
*   PHP（脚本语言）

还有其他类似的**套装**。看看[AppServ](http://www.appservnetwork.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:35:33.743

WampServer 是一个软件包（包括 php）和大多数支持 php 的服务器所拥有的其他软件。

这包括：

*   php
*   mysql
*   phpmyadmin
*   阿帕奇
*   xdebug
*   sqlbuddy
*   网络研磨

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T03:36:17.847

WAMP 基本上是一堆不同的东西。尽管我对其进行了很多简化，但可以将 WAMP 视为可让您查看文件的工具，例如`http://localhost/`（它使用[Apache](http://www.apache.org/)来执行此操作）。PHP 是真正通过您的文件并找到这些`<?php ?>`代码片段的东西。然后，它处理 PHP 并将其输入到您的浏览器可以理解的 HTML 代码中。Apache 然后将其显示给您的网络浏览器。

所以它并不是真正的 WAMP 与 PHP：PHP 是 WAMP 的一部分。WAMP 是一个通过为您安装一堆不同的东西来让您的生活更轻松的软件包。

# asp.net-mvc - 如何在 ASP.net MVC 中使用 @Ajax.ActionLink() 获取数据

> ID：11945398
> 
> 赞同：0
> 
> 时间：2012-08-14T03:30:30.697
> 
> 标签：asp.net-mvc, razor, asp.net-ajax

我想使用@Ajax.ActionLink() 方法获取数据。我尝试过以下方式
**Create.chtml**

```
 function UpdatePoDetails() {

    document.getElementById("poSearchbtn").href = "/MaterialReceivePO/SearchPO?searchID=" + document.getElementById('POID').value
}
@using (Ajax.BeginForm(new AjaxOptions
        {
            UpdateTargetId = "searchData",
            LoadingElementId = "loading"
        }

    ))
{
  <input id="POName" type="text" />

  @Ajax.ActionLink("Search", "SearchPO", null, new AjaxOptions
                                                        {

                                                            UpdateTargetId = "PoDetailsDiv",

                                                            HttpMethod = "GET" 

                                                        },
                                              new
                                              {
                                                  onclick = "UpdatePoDetails()" ,
                                                  id = "poSearchbtn"
                                              }
                            )

}
  @using (Ajax.BeginForm(new AjaxOptions
        {
            UpdateTargetId = "MainBody",
            LoadingElementId = "loading"
        }))
     {
         <div id="PoDetailsDiv">
          </div>
      } 
```

**控制器方法**

```
 public ActionResult SearchPO(string searchID)
    {
        int id = int.Parse(searchID);
        List<PurchaseOrderDetailsModel> podetails = (

                                                         from c in po.GetPoListDetails(id)
                                                         select new PurchaseOrderDetailsModel()
                                                         {
                                                             PoDetailsID = c.PoDetailsID,
                                                             ItemID = c.ItemID.Value,
                                                             Quantity = c.Quantity,
                                                             UnitPrice = c.UnitPrice,
                                                             TotalPrice = c.TotalPrice,
                                                             DiscountPer = c.DiscountPer,
                                                             FinalPrice = c.FinalPrice,
                                                             CurrencyID = c.CurrencyID,
                                                             ProductID = c.ItemID.Value,
                                                             ProductName = c.ProductName,
                                                             ProductCode = c.ProductCode,
                                                             Description = c.Description
                                                         }
                                                    ).ToList();

        return View("SearchPO",podetails);
    } 
```

**搜索PO.chtml**

```
@model IEnumerable<ERP_Web.Areas.Inventory.Models.PurchaseOrderDetailsModel>

<table class="grid-table">
    <tr>
        <th>
            Product Name
        </th>
        <th>
            Code
        </th>
        <th>
            Quantity
        </th>
        <th>
            Unit price
        </th>
        <th>
            Total
        </th>
        <th>
            Discount
        </th>
        <th>
            Final price
        </th>
        <th>
            Receive Quantity
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.ProductName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ProductCode)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Quantity)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UnitPrice)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TotalPrice)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DiscountPer)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FinalPrice)
            </td>
            <td>
                @Html.TextBox("reQuantity");
            </td>
        </tr>
    }
</table> 
```

问题是当单击 Ajax 链接时，它会转到控制器。控制器代码执行良好，但最后返回时不调用 SearchPO 视图。我的代码有什么问题或我缺少什么。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T14:34:22.860

```
@Ajax.ActionLink("Search", "SearchPO", null, 
new AjaxOptions{UpdateTargetId = "PoDetailsDiv",HttpMethod = "GET" },new {id = "poSearchbtn"}) 
```

我不明白你为什么需要这个**onclick = "UpdatePoDetails()"**

```
public ActionResult SearchPO(string searchID)
    {
    //Do your logic here
    //Build Mark-up of the result
    string GeneratedMarkUp = BuildMarkUpFOrtheResult();
    return Json(GeneratedMarkUp);
    } 
```

# java - 如何在这个 Java 项目中打开可执行文件？我已经尝试打开所有 .jar 文件

> ID：11945399
> 
> 赞同：0
> 
> 时间：2012-08-14T03:31:03.280
> 
> 标签：java, jar, applet, executable-jar

如何在这个 Java 项目中打开可执行文件？我想玩这个游戏。我已经尝试打开所有 .jar 文件，但我得到“无法从文件加载主类清单属性”

[https://github.com/lisaglendenning/softquor](https://github.com/lisaglendenning/softquor)

可执行文件位于 /dist/softquor.jar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:51:59.063

正如其他人已经说过的，这个 jar 不是一个独立的应用程序。它实际上是一个客户端服务器应用程序。

我快速浏览了一下，您可以像这样锻炼客户端：

假设`softquor.jar`在您当前的工作目录中。

在一个控制台中，启动服务器

```
java -cp softquor.jar softquor.Server 8080 
```

在另一个控制台中启动文本客户端（您可以启动多个客户端！）

```
java -cp  softquor.jar softquor.TextClient localhost 8080 
```

从类名中我确实说 TextClient 会让你输入一些命令并玩游戏。如果你得到类似的东西，`ClassNotFoundException`则意味着该项目正在使用一些第三方 jar 文件。不幸的是，您必须自己找出这些依赖关系，因为没有明确的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:36:14.837

我假设 /dist/softquor.jar 中的文件是可执行文件。

您可以像使用 winzip 的任何其他 zip 文件一样浏览 JAR 文件的内容。在里面你会发现一个 /META-INF/ 文件夹，里面有入口类。

在命令提示符下，您可以像运行任何其他 .jar 文件一样运行它。只要确保你使用完整的包名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:44:38.737

softquor.jar 不可执行。jar 清单中没有定义 Main-Class。我短暂地环顾四周，并没有看到一个明显的`main`入口点，它不在测试类中。虽然有一个扩展 JApplet 的类，所以您可以使用 java 插件从网页运行 jar。

很难说，因为除了一个简短的 README 文件之外，这个项目似乎没有任何文档。

# javascript - 使用可写流写入文件时出现 Node.js EBADF 错误

> ID：11945405
> 
> 赞同：1
> 
> 时间：2012-08-14T03:31:55.640
> 
> 标签：javascript, node.js, fs

我尝试使用 Node.js 处理一个 500MB 的 Apache 日志文件，将其语法从

```
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26 
```

到

```
ip.ip.ip.ip - - 02/Aug/2012:05:01:17 GET /path/of/access/ HTTP/1.1 302 26 
```

，然后写入另一个文本文件。

为了更好的内存控制和性能，我使用了`fs.createReadStream`and `fs.createWriteStream`，但只设法将第一行写入`output.txt`，因为脚本以错误结尾：

`{ [Error: EBADF, write] errno: 9, code: 'EBADF' }`

在这里，我发布了一些可能有助于调试的信息。

负责人`input.txt`：

```
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26
ip.ip.ip.ip - - [02/Aug/2012:05:01:18 -0600] "GET /path/of/access/ HTTP/1.1" 302 26 
```

内容`output.txt`：

```
ip.ip.ip.ip - - [02/Aug/2012:05:01:17 -0600] "GET /path/of/access/ HTTP/1.1" 302 26 
```

整个脚本：

```
var fs = require('fs');
var data ='';
var n=0;                    //For line control
var r = fs.createReadStream('./input.txt',{
    encoding: 'ascii',
    start:0,
    // end: 100000,
});
var w = fs.createWriteStream('./output.txt',{
    encoding:'ascii'
});
function put(line){         //write into w;
    ++n;
    w.write(line+'\n');
}
function end(){
    r.destroy();
    w.destroy();
}
function onData(chunk){
    var hasNewline = chunk.indexOf('\n')!==-1;
    if(hasNewline){
        var arr = chunk.split('\n');
        var first = arr.shift();
        var last = arr.pop();
        data+=first;
        put(data);          //write a complete line
        arr.forEach(function(line){
            put(line);      //write a complete line
        });
        data=last;
    }else{
        data+=chunk;
    }
    if(n>100){
        end();
    }
}
function onErr(e){
    console.log(e);
}

r.addListener( "data", onData);
r.addListener( "end", end);
r.addListener('error',onErr);
w.addListener('error',onErr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:50:20.397

你有两个我可以看到的问题。

首先是您的`end`函数调用`destroy`ReadStream，但在一般情况下，这是由`end`事件触发的，这意味着流已经关闭，它将`destroy`自动调用。这意味着`r.destroy`将被调用两次，触发错误。这是您看到打印错误的原因。

第二个问题是您正在调用`destroy`WriteStream。我建议你去阅读文档：[http ://nodejs.org/api/stream.html#stream_stream_destroy_1](http://nodejs.org/api/stream.html#stream_stream_destroy_1)

具体来说`Any queued write data will not be sent`，这就是为什么您缺少一些输出的原因。

基本上，`destroy`如果你希望它提前关闭，你应该只调用 ReadStream，就像你的`n > 100`情况一样。然后，您想改用 WriteStream `end`，因此流有时间写入所有缓冲数据。

这是一个简化版本，我认为它应该可以工作。我也不会打扰绑定`error`，因为无论如何错误都会自动打印到控制台。

```
var fs = require('fs');
var data ='';
var n=0;                    //For line control

var r = fs.createReadStream('./input.txt',{
    encoding: 'ascii',
    start:0,
    // end: 100000,
});

var w = fs.createWriteStream('./output.txt',{
    encoding:'ascii'
});

r.addListener( "data", function(chunk){
    data += chunk;
    var lines = data.split('\n');
    data = lines.pop();

    lines.forEach(function(line){
      if (!r.readable) return; // If already destroyed
      if (n >= 100) {
          // Stop any more 'data' events and close the file.
          // This will also trigger 'close' below and close the writestream.
          r.destroy();
          return;
      }

      n++;
      w.write(line + '\n');
    });
});
r.addListener( "end", function(){
    // When we hit the end of the file, close the write stream,
    // and write any remaining line content
    w.write(data);
});
r.addListener("close", function(){
  w.end();
}); 
```

# mysql - 催化剂 DBIx::Class::TimeStamp 设置插入数据库的时间不起作用

> ID：11945409
> 
> 赞同：0
> 
> 时间：2012-08-14T03:32:11.413
> 
> 标签：mysql, macos, perl, datetime, dbix-class

我正在使用 Catalyst 和[DBIx::Class::TimeStamp](https://metacpan.org/module/DBIx::Class::TimeStamp?)并且我的 ResultSet 类之一配置为在插入行时将 DateTime 列设置为当前时间：

```
__PACKAGE__->load_components("TimeStamp");

__PACKAGE__->add_columns(
   start_time => { data_type => 'datetime', set_on_create => 1 }
); 
```

每当创建一行时都会插入一个时间，但未来大约是 6 小时。每当我使用 MySQL 及其 NOW() 函数插入时间时，它都会正确获取时间。有谁知道为什么会这样？我正在Mac上开发，如果有帮助的话。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:55:00.850

`DBIx::Class::TimeStamp`用于`DateTime->now`获取时间，因此结果取决于您的计算机设置。但是 MySQL 的`NOW()`结果取决于 MySQL 的设置。查看您的计算机、数据库服务器和 MySQL 上的时区设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T17:24:43.487

在开始时间哈希中，添加：

时区 => '本地'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:25:54.033

您总是可以只覆盖`get_timestamp`Result 类中的列并返回具有正确时区集的 DateTime 对象。例如：

```
package My::Schema::Result::MyTable;

# ... snip ...

sub get_timestamp {
    return DateTime->now( time_zone => "GMT" );
} 
```

# javascript - 正则表达式货币格式 - javascript

> ID：11945412
> 
> 赞同：4
> 
> 时间：2012-08-14T03:32:25.437
> 
> 标签：javascript, regex, currency

我目前正在使用以下正则表达式来验证我的 html 输入表单字段中的货币：

```
/[1-9]\d*(?:\.\d{0,2})?/ 
```

但是，它允许通过以下值：13000.234.12

这不是一个有效值。以下是我想允许的有效值：

**有效的**

```
125
1.25
1000.15
700.1
80.45
0.25 
```

**无效的**

```
130.1.4
21.......14 
```

感觉应该有一个标准的正则表达式模式，想法？

**旁注**：我正在通过事件键侦听器阻止字母数字字符和美元符号，因此它们已经无法输入，这应该会使这个问题更容易一些。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T03:37:04.847

像这样的东西应该工作：

```
^(\d*\.\d{1,2}|\d+)$ 
```

它匹配：

```
1.00
1
0.23
0.2
.2 
```

它不匹配：

```
.
1.1. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:38:41.317

```
/^(\d*?)(\.\d{1,2})?$/ 
```

所以它是（开始）（任何数量的**数字**，甚至为零），（。然后**只有数字**，一个或两个，但不必在那里）结束

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-14T18:52:25.827

我使用逗号作为小数分隔符。这里我的朋友：

```
^([0]?(,\d{1,2})?|([1-9]{1,3})?((\.\d{3})*|([1-9])*)?(,\d{1,2})?)?$ 
```

# objective-c - 更改 UINavigationBar 和 UITabBar 的大小后更改查看区域的大小

> ID：11945414
> 
> 赞同：0
> 
> 时间：2012-08-14T03:32:32.053
> 
> 标签：objective-c, ios, ios5, uinavigationbar, uitabbar

我目前正在开发我的第一个应用程序，我已经更改了 UINavigationBar 和 UITabBar 的大小，现在我在一般查看区域（等 ViewController、DetailViewController）中有额外的空间黑色空间。如何更改查看区域以适应这个新尺寸？

我已经粘贴了我当前如何为 UINavigationBar 和 UITabBar 设置新大小。

```
/* Get the screenarea of the device */
CGRect screenArea = [[UIScreen mainScreen] applicationFrame];

/* Define the size of the navigation bar */
CGRect viewHeaderbBarFrame = navigationBar.frame;
viewHeaderbBarFrame.origin.y = screenArea.origin.y;
viewHeaderbBarFrame.origin.x = screenArea.origin.x;
viewHeaderbBarFrame.size.height = 44;
viewHeaderbBarFrame.size.width = screenArea.size.width;
navigationBar.frame = viewHeaderbBarFrame;

/* Define the size of the footer bar */
CGRect viewTabBarFrame = tabBar.frame;
viewTabBarFrame.origin.y = screenArea.size.height - 26;
viewTabBarFrame.origin.x = screenArea.origin.x;
viewTabBarFrame.size.height = 46;
viewTabBarFrame.size.width = screenArea.size.width;
tabBar.frame = viewTabBarFrame; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:28:11.090

您永远不必以这种方式弄乱视图高度。视图被推送到导航栏。它们的大小应设置为适合 320 x 480 的屏幕减去标签、导航和标题栏。您应该将 AutoResize 宽度/高度设置为灵活，将左侧/右侧/顶部/底部设置为不灵活（只需将它们排除在外）。

> view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight

iOS 喜欢所有东西都被弹簧加载并相互固定。然后，当您旋转物体时，它会全部粘住并正确移动。他们为您完成所有工作。所以，最好接受他们处理事情的时髦方式。界面生成器 gui 可以提供帮助。如果需要，它甚至可以让您测试旋转。您也可以设置选项卡/导航/标题栏的选项。或者，如果您理解它，那么您也可以手动执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:47:35.027

基本上通过缩小标签栏和导航栏，您需要扩展视图。我假设您正在使用标签栏进行主要导航。

找出合适的尺寸并像这样调整您的视图：

```
[[self.tabBarController.view.subviews objectAtIndex:0] setFrame:CGRectMake(newX,newY,newWidth,newHeight)]; 
```

在买家当心类别中，如果您的目标是应用商店，您最好查看修改这些元素的指南。我不确定所有的具体点，但我认为苹果皱着眉头对清晰显示的核心导航元素进行这样的更改。

此外，这种方法适用于当前的屏幕尺寸，但如果传闻属实并且下一款手机的屏幕更大，则可能无法奏效。

好起来。

# node.js - Node.js console.log 无法使用 2012 年 8 月的 Azure SDK

> ID：11945415
> 
> 赞同：0
> 
> 时间：2012-08-14T03:32:38.920
> 
> 标签：node.js, azure

我正在关注 Windows Azure Node.js 站点上的教程：

[http://www.windowsazure.com/en-us/develop/nodejs/tutorials/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/)

但是我的 server.js.logs 文件没有被创建？

在我的 server.js 文件中，我发出了 console.log 语句，但没有写入日志文件。这是为什么？August SDK 中发生了什么变化以防止我的日志被写入？

或者我需要启用什么才能编写 console.log 语句？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:40:51.023

请参阅[https://github.com/tjanczuk/iisnode/issues/168](https://github.com/tjanczuk/iisnode/issues/168)，链接自[https://github.com/tjanczuk/iisnode/wiki/iisnode-releases（v0.1.20](https://github.com/tjanczuk/iisnode/wiki/iisnode-releases)注释）。

最新的 Windows Azure Node.js SDK 必须选择更新版本的 iisnode，并且 iisnode 更改了放置日志文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:09:07.430

是的，iisnode 现在将日志文件放在 ~/iisnode 目录中，并为您可以浏览的日志文件写入索引。它还包含一个新的 node.js 脚本，interceptor.js，它允许您将日志文件写入*任何*位置

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T16:51:30.493

您必须了解 node.js 中的 console.log 主要用于客户端日志记录。我刚刚测试过，当您在 Windows Azure 上运行的 node.js 应用程序中使用 console.log 时，无法创建标准输出日志文件，因此您不会获得任何日志。

如果您想将日志记录添加到在 Web 服务器上运行的代码中，您应该使用服务器端日志记录代码，我发现连接库对于此目的是最强大和最有用的： [https ://github.com/senchalabs/Connect](https://github.com/senchalabs/Connect)

正如您所建议的那样，您的代码在 Compute Emulator 中运行意味着您正在创建 Windows Azure 云服务，您应该按照下面的文章一步一步进行操作，您将使其正常工作：

[https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)

请注意，当您的 node.js 代码在 Compute Emulator 中运行时，console.log 仍然不会显示任何内容。

# php - 如何为“1,3,5,2”之类的东西制作正则表达式？

> ID：11945417
> 
> 赞同：0
> 
> 时间：2012-08-14T03:32:47.497
> 
> 标签：php

我正在尝试为此制作一个正则表达式：

```
1
1,1
1,1,1
1,1,1,1 
```

1 可以是任何数字（0 到 9）

我想它会是这样的：

```
/^\d{1}+(,+\d{1})?+(,+\d{1})$/ 
```

但我不知道如何将逗号放在表达式中并确保最多可以有 4 位数字，用 3 个逗号分隔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:37:26.107

你可以试试这个。

```
/^\d(,\d){0,3}$/ 
```

# mysql - 无法安装 mysql2 gem OS X Mountain Lion

> ID：11945425
> 
> 赞同：6
> 
> 时间：2012-08-14T03:33:35.210
> 
> 标签：mysql, ruby-on-rails, macos, gem, mysql2

我是 RoR 的新手，我正在尝试安装 Mysql2 -v '0.3.11'。我有 OS X Mountain Lion，rails 3.2.6，ruby 1.9.3。

以下是我得到的错误。我到处找，什么也没找到。

```
$gem install mysql2 -v '0.3.11'
Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
ERROR: Failed to build gem native extension.

    /Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/bin/ruby extconf.rb
checking for rb_thread_blocking_region()... yes
checking for rb_wait_for_single_fd()... yes
checking for mysql.h... yes
checking for errmsg.h... yes
checking for mysqld_error.h... yes
creating Makefile

make
compiling client.c
In file included from client.c:1:
In file included from ./mysql2_ext.h:8:
In file included from /Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby.h:32:
/Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/ruby.h:105:37:     error: 'ruby_check_sizeof_long' declared as an array with a negative size
typedef char ruby_check_sizeof_long[SIZEOF_LONG == sizeof(long) ? 1 : -1];
                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin12.0.0/ruby/config.h:24:21: note: expanded from macro 'SIZEOF_LONG'
#define SIZEOF_LONG 8
                ^
In file included from client.c:1:
In file included from ./mysql2_ext.h:8:
In file included from /Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby.h:32:
/Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/ruby.h:109:38: error: 'ruby_check_sizeof_voidp' declared as an array with a negative size
typedef char ruby_check_sizeof_voidp[SIZEOF_VOIDP == sizeof(void*) ? 1 : -1];
                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin12.0.0/ruby/config.h:28:22: note: expanded from macro 'SIZEOF_VOIDP'
#define SIZEOF_VOIDP 8
                 ^
In file included from client.c:1:
In file included from ./mysql2_ext.h:8:
In file included from /Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby.h:32:
In file included from /Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/ruby.h:1377:
In file included from /Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/intern.h:34:
/Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/ruby/st.h:67:45: error: 'st_check_for_sizeof_st_index_t' declared as an array with a negative size
typedef char st_check_for_sizeof_st_index_t[SIZEOF_VOIDP == (int)sizeof(st_index_t) ? 1 : -1];
                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/curiosity/.rvm/rubies/ruby-1.9.3-p125/include/ruby-1.9.1/x86_64-darwin12.0.0/ruby/config.h:28:22: note: expanded from macro 'SIZEOF_VOIDP'
#define SIZEOF_VOIDP 8
                 ^
3 errors generated.
make: *** [client.o] Error 1

Gem files will remain installed in /Users/curiosity/.rvm/gems/ruby-1.9.3-p125/gems/mysql2-0.3.11 for inspection.
Results logged to /Users/curiosity/.rvm/gems/ruby-1.9.3-p125/gems/mysql2-0.3.11/ext/mysql2/gem_make.out 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-14T03:50:34.477

您使用的是 RVM 而不是 10.8 附带的 Ruby。好的。现在，停止使用 10.8 附带的 MySQL。

安装和更新**[Homebrew](https://brew.sh/)**。现在运行

```
brew install mysql 
```

在您的项目中使用`/Gemfile`来安装`mysql2`gem。添加

```
gem "mysql2" 
```

到你的`/Gemfile`. 然后通过运行使用 Bundler 更新您的应用程序

```
bundle install 
```

让包管理器*（Homebrew 和 Bundler）*为您工作。

这应该可以解决您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T02:54:37.630

正如[Deefour](https://stackoverflow.com/users/605707/deefour)所说，我必须使用 RVM。答案是他，我只是无法评论他的答案。+1

但是`rvm exec bundle install`给了我一个错误：

`rvm do bundle install`被删除，使用`rvm 1.9.2,1.9.3 do bundle install`或`rvm all do bundle install`代替。

我用过 `sudo rvm all do bundle install` ，从那以后一切都完美无缺。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T20:06:02.003

我在 mac10.10 中也遇到了相同类型的错误，并使用了以下对我有用的命令：

1.  使用以下命令安装和升级 Homebrew：

    冲泡安装mysql

2.  使用以下命令运行安装 Mysql gem 文件：

    宝石安装 mysql2 -v '0.3.11'

3.  运行捆绑安装

# c - glibc/NPTL/Linux 健壮互斥锁中的竞争条件？

> ID：11945429
> 
> 赞同：16
> 
> 时间：2012-08-14T03:34:07.887
> 
> 标签：c, linux, pthreads

jilles 在对 2010 年[Unix 崩溃时自动释放互斥锁](https://stackoverflow.com/questions/4149266/automatically-release-mutex-on-crashes-in-unix?rq=1)问题的评论中声称：

> glibc 强大的互斥锁是如此之快，因为 glibc 采用了危险的捷径。当内核将其标记为“将导致 EOWNERDEAD”时，不能保证互斥锁仍然存在。如果互斥锁被销毁并且内存被内存映射文件替换，该文件恰好在正确的位置包含最后拥有线程的 ID，并且最后拥有线程在写入锁定字之后终止（但在从其列表中完全删除互斥锁之前）拥有的互斥体），文件已损坏。Solaris 和即将成为 FreeBSD9 的健壮互斥体较慢，因为它们不想冒这个风险。

我无法理解这种说法，因为销毁互斥锁​​是不合法的，除非它被解锁（因此不在任何线程的健壮列表中）。我也找不到任何搜索此类错误/问题的参考资料。这种说法是完全错误的吗？

我问并且我感兴趣的原因是，这与我自己基于相同 Linux 健壮互斥原语构建的实现的正确性有关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T18:34:37.700

我想我找到了比赛，而且确实很丑陋。它是这样的：

线程 A 持有健壮的互斥体并将其解锁。基本程序是：

1.  把它放在线程健壮列表头的“待定”槽中。
2.  从当前线程持有的健壮互斥锁链表中删除它。
3.  解锁互斥锁。
4.  清除线程健壮列表标题的“待处理”槽。

问题在于，在第 3 步和第 4 步之间，同一进程中的另一个线程可以获得互斥锁，然后将其解锁，并且（正确地）相信自己是互斥锁的最终用户，销毁并释放/munmap 它。之后，如果进程中的任何线程创建了文件、设备或共享内存的共享映射，并且它恰好被分配了相同的地址，并且该位置的值恰好与仍在步骤之间的线程的 pid 匹配在解锁的第 3 和第 4 步中，如果进程被杀死，内核将通过设置它认为是互斥体所有者 ID 的 32 位整数的高位来破坏映射文件。

解决方案是在上面的第 2 步和第 4 步之间对 mmap/munmap 进行全局锁定，这与我对这个问题的回答中描述的障碍问题的解决方案完全相同：

[可以在 Linux 上实现正确的故障安全进程共享屏障吗？](https://stackoverflow.com/questions/6935769/can-a-correct-fail-safe-process-shared-barrier-be-implemented-on-linux)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T22:45:24.210

FreeBSD pthread 开发者 David Xu 对比赛的描述：http: [//lists.freebsd.org/pipermail/svn-src-user/2010-November/003668.html](http://lists.freebsd.org/pipermail/svn-src-user/2010-November/003668.html)

我不认为比赛严格要求 munmap/mmap 循环。这块共享内存也可能有不同的用途。这不常见但有效。

正如该消息中还提到的，如果具有不同特权的线程访问一个通用的健壮互斥锁，则会出现更多“乐趣”。因为拥有的健壮互斥锁列表的节点位于互斥锁本身中，所以具有低权限的线程可能会破坏高权限线程的列表。这很容易被利用来使高权限线程崩溃，并且在极少数情况下，这可能会导致高权限线程的内存被破坏。显然，Linux 强大的互斥锁仅设计用于具有相同权限的线程。这可以通过使健壮列表成为完全在线程内存中的数组而不是链表来轻松避免。

# windows-server-2008 - 无法使用 VS2012 安装用于远程调试的 Windows Web 服务 API

> ID：11945430
> 
> 赞同：7
> 
> 时间：2012-08-14T03:34:15.660
> 
> 标签：windows-server-2008, remote-debugging, visual-studio-2012, wwsapi

我正在尝试使用 Visual Studio 2012 和 Windows Server 2008 而不是 R2 进行远程调试。设置远程调试器时收到以下错误。

有没有其他人能够在不是 R2 的 Windows 服务器 2008 上安装 2012 远程调试器？

这是我点击配置远程调试后的完整错误消息。

![在此处输入图像描述](../Images/8a520cbbd395ce843848d0dccdb454aa.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T22:48:05.857

根据[VS 2012 系统要求](http://www.microsoft.com/visualstudio/eng/products/compatibility)，Windows Server 2008 不支持远程调试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T00:49:06.963

在[这个 MS 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/11bd5a3a-263d-49ec-b50e-45cb0ffa4c6f)Brad Sullivan 中，Visual Studio 调试器的程序经理发布了以下内容：

> Visual Studio 2012 远程工具的安装程序中存在一个已知问题，该问题会破坏 Windows Server 2008 上的远程调试。在我们解决此问题时，您可以使用以下解决方法：
> 
> 1) 如果尚未安装，请从 Window Update 安装“Platform Update for Windows Server 2008 (KB971644)”。它将在“控制面板 -> 程序和功能 -> 已安装的更新”中安装 KB971512、KB971513 和 KB960362。
> 
> [2) 从http://go.microsoft.com/fwlink/?LinkID=255474](http://go.microsoft.com/fwlink/?LinkID=255474)安装 Windows Live Essentials
> 
> 遵循这些说明应该可以防止您看到有关 Windows Web 服务 API 的错误。

听起来很奇怪，但我可以确认这已经为我解决了这个问题。

# eclipse - ecplise cdt cygwin，如何设置查找路径

> ID：11945433
> 
> 赞同：0
> 
> 时间：2012-08-14T03:35:17.340
> 
> 标签：eclipse, eclipse-cdt

我使用 ecplise、cdt 和 cygwin 作为 windows 平台上的 c++ IDE。我使用eclipse 4.2。我不知道如何设置“查找路径”，“查找路径”是什么意思？

谁能给我一些帮助？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:51:17.623

它是您的源代码应该位于的路径，以便对其进行编译。

有关配置，请查看[链接](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_dbg_src.htm)

# java - 运行集成测试时“转储”hql 数据库

> ID：11945434
> 
> 赞同：0
> 
> 时间：2012-08-14T03:35:18.887
> 
> 标签：java, database, unit-testing, spring-mvc, hsqldb

我正在内存 HSQL 数据库上使用 dbunit 执行一些集成测试。一个问题是我没有用户界面（如 pgAdmin）来检查测试之间的数据。

dbunit 是否支持我可以“转储”HSQL 数据库的快照，以便在测试完成后查看它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:50:20.553

您可以将其导出为 XML 文件，但使用 DBUnit 的数据库比较工具不是更好吗？

您只需制作 d/b 外观的文件版本，然后将内存数据库与该版本进行比较。

# python - 如何避免多个循环来获得我在这个 sqlalchemy 查询中需要的排序？

> ID：11945435
> 
> 赞同：3
> 
> 时间：2012-08-14T03:35:18.237
> 
> 标签：python, sqlalchemy, pyramid

我正在学习金字塔和 sqlalchemy，并且正在努力解决如何在没有嵌套 foreach 循环的情况下最好地在数据库中执行查询。我相信有一种更有效的方法。

我有以下型号：

```
 class User(Base):
        __tablename__ = 'users'
        id = Column(Integer, primary_key=True)
        username = Column(Text)
        topicsfollowing = relationship('Topic', secondary=users_topics,
                                       backref='followers')

    class Article(Base):
        __tablename__ = 'articles'
        id = Column(Integer, primary_key=True)
        name = Column(Text)
        body = Column(Text)
        datepublished = Column(DateTime)
        focusid = Column(Integer, ForeignKey("topics.id"))
        focus = relationship("Topic", backref=backref('articles', order_by=id))

    class Topic(Base):
        __tablename__ = 'topics'
        id = Column(Integer, primary_key=True)
        name = Column(Text) 
```

并且我还设置了用户和主题之间的M2M关系如下：

```
 users_topics = Table('users_topics', Base.metadata,
                  Column('userid', Integer, ForeignKey('users.id')),
                  Column('topicid', Integer, ForeignKey('topics.id'))) 
```

本质上，我的用户可以关注主题，并且有关于每个主题（焦点）的文章。我想弄清楚的是一种有效的方法，可以从用户关注的所有主题的集合中获取最近撰写的 10 篇文章的列表。例如，一个特定主题可以提供所有 10 个最新的，或者可能有 10 个主题，每个主题提供一篇最近的文章。

我能想到的唯一方法是：

```
 user = DBSession.query(User).filter_by(id=logged_in).first()
    for topic in user.topicsfollowing:
        for article in topic.articles:
            # from here assemble a list of all articles from all followed
            # topics and then sort them descending by datepublished and take 
            # the first 10 in the list 
```

但我知道必须有一种更有效的方法来做到这一点。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:02:01.963

您只需执行一次查询即可获取用户关注的主题 ID 列表，然后执行以下操作：

```
query(Article).filter(Article.focusid.in_(topic_ids)).order_by(desc(Article.datepublished)).limit(10) 
```

我或多或少地在脑海中写下它，所以我不确定它是否 100% 正确，但请参阅[文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#common-filter-operators)中的“IN”运算符。

# python - 不同的守护进程实现

> ID：11945447
> 
> 赞同：1
> 
> 时间：2012-08-14T03:36:46.250
> 
> 标签：python, daemon, background-process, daemons

我对 python 比较陌生，到目前为止我只浏览了编程的表面，这就是我对守护进程感到困惑的原因。我通常知道他们做什么，但我不确定在 python 中实现它们的最佳方法是什么。我找到[了这个](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)链接，它演示了如何在 python 中创建守护进程。但是，我想知道这是否

```
#!/usr/bin/env python3.2
import threading

class Update(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)

    def run(self):
        pass        #something you want to run in the background

continous = Update
continous.daemon = True
continous.start() 
```

会一样有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:14:45.200

来自[`threading`文档](http://docs.python.org/library/threading.html#threading.Thread.daemon)：“当没有活着的非守护线程时，整个 Python 程序退出”。守护线程将在应用程序完成后终止。

为了在 python 中实现系统守护进程，你应该使用[os.fork](http://docs.python.org/library/os#os.fork)。看一下[简单守护进程的例子](http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/)。

# clrstoredprocedure - 在哪里可以找到 System.management dll

> ID：11945452
> 
> 赞同：2
> 
> 时间：2012-08-14T03:37:17.340
> 
> 标签：clrstoredprocedure, system.management

我正在尝试构建一个引用 IBM WebSphere MQ dll 的 SQL CLR 存储过程。我在我的工作机器上执行此操作时遇到问题，所以我决定看看我是否可以使用 localhost 让它在我的家庭计算机上工作。我在遇到不同的错误方面取得了进展，但是我不确定 system.management dll 的位置...

这是错误消息的副本：

消息 10301，级别 16，状态 1，第 1 行程序集“amqmdnet”引用程序集“system.management，版本=2.0.0.0，文化=中性，publickeytoken=b03f5f7f11d50a3a.”，当前数据库中不存在。SQL Server 试图从引用程序集所在的同一位置定位并自动加载引用程序集，但该操作失败（原因：2（系统找不到指定的文件。））。请将引用的程序集加载到当前数据库中，然后重试您的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T12:27:25.827

这是安装在 GAC 中的，检查系统上的 .Net 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T12:32:40.343

您必须在 SQL Server 中注册此程序集

```
create assembly [System.Management]
from 'c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Management.dll'
with permission_set = unsafe 
```

# gps - GPS报告精度、误差函数

> ID：11945455
> 
> 赞同：3
> 
> 时间：2012-08-14T03:37:30.853
> 
> 标签：gps, core-location, sensors, sensor-fusion

大多数 GPS 系统以米为单位报告“准确度”，该数字在数量级上变化。这个数字是什么意思？如何将其转换为用于估计的误差函数，即给定 GPS 读数及其报告精度的实际位置概率？

根据关于 GPS 精度[的 Wikipedia 文章](http://en.wikipedia.org/wiki/Error_analysis_for_the_Global_Positioning_System)，通过精确计时到达接收器的无线电信号，可以实现低至 3 米的读数。这似乎与例如 iPhone 报告的最严格的误差范围相对应。但这并不能解释外部信号失真。

听起来一个误差函数应该有两个域，一个平缓的线性斜率输出到报告的精度，然后一个多项式或指数增加更远。

有比修补它更好的方法吗？不同的 GPS 芯片组供应商是否符合任何一种标准含义，或者他们是否都只提供某种数字以实现功能对等？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T19:29:07.863

报告的数字通常称为 HEPE，即水平估计位置误差。理论上，67% 的时间测量应该在真实位置的 HEPE 范围内，33% 的时间测量应该超过 HEPE 的水平误差。

在实践中，没有人非常仔细地检查 HEPE，根据我的经验，HEPE 报告的 3 或 4 颗卫星修复比他们需要的要大得多。也就是说，根据我的经验，3 颗卫星定位在 HEPE 距离内的准确率远远超过 67%。

“假定的”误差分布是圆形高斯分布。因此，原则上您可以找到圆形高斯的正确比率并得出 95% 的概率半径等等。但是要使这些数字有意义，您需要进行广泛的统计测试以验证您确实得到了大约 95%。

以上是我多年来在 GPS 精度较低的敏感部分工作的印象。可以想象，使用 GPS 进行飞机着陆的人可能对如何预测错误和错误率有更好的了解，但他们使用的技术和方法可能不适用于消费类 GPS 设备。

# binding - AngularJS如何绑定地图

> ID：11945457
> 
> 赞同：3
> 
> 时间：2012-08-14T03:37:35.700
> 
> 标签：binding, controller, scope, angularjs

这是我的 HTML：

```
<div ng-app="angularApp">
    <div ng-controller="testCtrl">
        testKey = {{testKey}}<br />
        Test 1: <input type="text" ng-model="test.myKey" />{{test[testKey]}}<br />

        Test 2: <input type="text" ng-model="test[testKey]" />{{test[testKey]}}
    </div>
</div> 
```

这是js：

```
angular.module('angularApp', []);

function testCtrl($scope)
{
    $scope.testKey = "myKey";
}​ 
```

[我在这里](http://jsfiddle.net/tadchristiansen/cZVAt/3/)设置和示例

为什么测试 1 有效但测试 2 无效？ng-model 指令中不允许使用“[”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:52:10.667

[这](http://jsfiddle.net/cZVAt/4/)是一个工作示例。问题很简单，`test.[testKey]`无效，你要`test[testKey]`。而且您需要`test`在控制器上定义为对象，因为您无法设置未定义变量的属性。

# java - 高效的 Java 注释

> ID：11945460
> 
> 赞同：2
> 
> 时间：2012-08-14T03:38:04.617
> 
> 标签：java, annotations

我是 Java 注释的忠实拥护者，但每次我想自己制作时都必须包含 Google 的[Reflections](https://code.google.com/p/reflections/)或[Scannotations ，这让我很头疼。](http://scannotation.sourceforge.net/)

在没有容器或类似工具的帮助下，我无法找到任何关于 Java 能够自动扫描注释并适当使用它们的文档。

**问题：**我是否遗漏了一些关于 Java 的基本知识，或者注解的设计总是需要手动扫描和检查？是否有一些处理注释的内置方法？

*进一步澄清*

我希望能够以编程方式更多地处理 Java 中的注释。例如，假设您想构建 a `List`of `Car`s。为此，您使用可以为您填充列表的类来注释列表。例如：

```
@CarMaker
List<Car> cars = new List<Car>(); 
```

在此示例中，`CarMaker`Java 接近注释，Java 达成交易并询问他们想要提供多少辆汽车。然后由`CarMaker`注释/类为他们提供要包含的汽车的列表。这可能是所有带有`@CarType`注释的类和一个`Car`接口。

*另一种看待它的方式*是，如果你知道你想要构建这样的东西：`List<Car> cars`，你可以用 注释它`@ListMaker<Car>`。这`ListMaker`是Java内置的东西。它查找所有用 注释的类`@CarType`，并相应地填充列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T03:48:37.397

您可以创建自己的注释并将它们应用到您自己的类中。

如果您指定在运行时可检测到注释，则可以使用反射轻松处理它。

例如，您可以使用类似这样的方法来打印已用*Funky*注释标记的类中每个字段的名称：

```
for (Field someField : AnnotatedClass.getClass().getDeclaredFields()) {
    if (someField.isAnnotationPresent(Funky.class)) {
        System.out.println("This field is funky: " + someField.getName());
    }
} 
```

声明*Funky*注释的代码如下所示：

```
package org.foo.annotations;

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Funky { } 
```

这是一个使用注解的类：

```
package org.foo.examples;

import org.foo.annotations.Funky;

public class AnnotatedClass {
    @Funky
    private  String   funkyString;
    private  String   nonFunkyString;
    @Funky
    private  Integer  funkyInteger;
    private  Integer  nonFunkyInteger;
} 
```

这里有[更多关于 Annotations 的阅读](http://docs.oracle.com/javase/6/docs/technotes/guides/language/annotations.html)。

以下是上面使用的类的 javadocs：

*   [保留注释](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/Retention.html)
*   [RetentionPolicy 枚举](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/RetentionPolicy.html)
*   [目标注释](http://docs.oracle.com/javase/6/docs/api/java/lang/annotation/Target.html)
*   [字段类](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html)
*   [isAnnotationPresent() 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/AccessibleObject.html#isAnnotationPresent%28java.lang.Class%29)
*   [getDeclaredFields() 方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredFields%28%29)

* * *

我正在尝试了解您的汽车示例，但我不确定我是否遵循您的要求。

如果您有一个对象列表（Jaguar、Porche、Ferrari、Kia），这些对象扩展 Car 并标有各种与汽车相关的注释，您可以创建一个基于注释过滤列表的对象。

代码可能如下所示：

```
@WorldsFinestMotorCar
class Jaguar extends Car {
    // blah blah
}

@BoringCar
class Porche extends Car {
    // blah blah
} 

@BoringCar
class Ferrari extends Car {
    // blah blah
}

@IncredibleCar
class Kia extends Car {
    // blah blah
} 
```

您可以实现一个*AnnotationFilter*类，从列表中删除没有特定注释的汽车。

它可能看起来像这样：

```
List<Car> carList = getListOfRandomCars();
AnnotationFilter<Car> annoFilter = new AnnotationFilter<Car>(BoringCar.class);
List<Car> boringCars = annoFilter.filter(carList); 
```

那是你想做的吗？

如果是这样，那绝对可以做到。

AnnotationFilter 的实现可能如下所示：

```
public class AnnotationFilter<T> {
    private Class filterAnno;

    public AnnotationFilter(Class a) {
        filterAnno = a;
    }

    public List<T> filter(List<T> inputList) {
        if (inputList == null || inputList.isEmpty()) {
            return inputList;
        }
        List<T> filteredList = new ArrayList<T>();
        for (T someT : inputList) {
            if (someT.getClass().isAnnotationPresent(filterAnno)) {
                filteredList.add(someT);
            }
        }
        return filteredList;
    }
} 
```

如果这不是你所追求的，一个具体的例子会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:22:12.830

Java 没有内置任何东西，这就是 Reflections 出现的原因。没有什么像你所说的那样特别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:10:25.280

注释只是标记类元素的一种方式；如何解释这些注释取决于定义这些注释的代码。

> 是否有一些处理注释的内置方法？

注释以多种不同的方式使用，以至于很难想出一些“内置方式”来处理它们。有些源代码级别的注释（例如`@Override`和`@Deprecated`）根本不影响代码的行为。然后是运行时注释，它们通常非常特定于某个库，例如。JAXB 的绑定注解仅在 a 中有意义，`JAXBContext`而 Spring 的自动装配注解仅在`ApplicationContext`. Java 怎么会仅仅通过查看使用它们的类就知道如何处理这些注释？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T04:07:15.563

用户定义的注释：我们将看到如何注释我们在日常生活中可能遇到的对象。想象一下，我们要将对象信息持久化到一个文件中。一个名为 Persistable 的注解可用于此目的。重要的是我们要提及存储信息的文件。我们可以在 Annotation 本身的声明中拥有一个名为 fileName 的属性。Persistable Annotation 的定义如下：

```
Persistable.java

@Target({ElementType.FIELD, ElementType.LOCAL_VARIABLE})
    public @interface Persistable
    {
        String fileName();
    } 
```

# actionscript-3 - 如何从许多图像制作动画（Actionscript）

> ID：11945461
> 
> 赞同：0
> 
> 时间：2012-08-14T03:38:21.227
> 
> 标签：actionscript-3, flash, animation, actionscript

我需要多少图像才能制作一个好的动画人物或像火柴人这样的人？

例如，我创建了一个 Person 类，并在那里添加了一个事件监听器 onEnterFrame，所以每个火柴人都有自己的动画

```
private function onEnterFrame(e:Event):void{

  addChild(image[i])
  i++;

  //thus every times increasing the i++, and add a new image

} 
```

例如，如果我的速度为 24 fps，图像变化很快，动画效果不够好，你能给我建议如何做到这一点吗？

ps：如何添加和删除child删除不需要的之前的图像？在 onEnterFrame 事件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:07:37.183

使用`graphics`容器 Sprite/MovieClip。参考：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html)

假设 image[i] 是`Bitmap`

```
graphics.clear();
var bitmapData:BitmapData = image[i].bitmapData;
graphics.beginBitmapFill(bitmapData, new Matrix());
graphics.endFill(); 
```

# bash - 检查数据库是否存在

> ID：11945468
> 
> 赞同：3
> 
> 时间：2012-08-14T03:39:26.110
> 
> 标签：bash, mongodb

如何检查 bash 中是否存在数据库？

我打算制作一个自动备份脚本，其中每个网站的数据库名称是：

```
(siteName) mysite.com  = mysite_com (dbName) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T04:37:20.290

您可以使用 -e bash 命令检查文件是否存在。MongoDB 为每个数据库创建一个命名空间文件，因此请搜索这些文件。就像是

```
if [ -e /data/db/$DBNAME.ns ]; then
  `mongodump -d $DBNAME --out /backup/directory`
fi 
```

假设您的数据存储在 /data/db

查看可用于从您的 mongo 数据库实例 [http://www.mongodb.org/display/DOCS/Backups备份数据的 mongodump 命令](http://www.mongodb.org/display/DOCS/Backups)

# networking - 向连接到 LAN 的每个人发送消息

> ID：11945469
> 
> 赞同：3
> 
> 时间：2012-08-14T03:39:41.410
> 
> 标签：networking, operating-system, browser

我想向我的子网（LAN）中的每个人（广播）发送一条消息，以防止他们由于即将发生的维修工作而使用 Internet。我怎么做 ？我不能使用“墙”，因为没有人登录某个服务器。
我想发送一个数据包，在 Web 浏览器中打开一个新选项卡，并显示在一定时间内停止使用 Internet 的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:23:50.963

[http://en.wikipedia.org/wiki/ARP_spoofing](http://en.wikipedia.org/wiki/ARP_spoofing)

你可能对这样的事情感兴趣。我不确定这是否适用于您的 LAN 环境，但通常它会弄乱整个 LAN :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:04:52.303

这是我的前辈分享的一个解决方案（希望它可以帮助任何查看此帖子的人）。我们可以做的是进行 DNS 欺骗并将每个人的请求重定向到您可以显示所需消息的服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:47:53.670

您可以使用套接字向局域网中连接的每个人发送消息，您可以使用 java，当您想向所有客户端发送消息时，每个客户端都会看到一个带有您想要显示的信息的 msgbox....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T11:17:10.713

`net send`命令将在 Windows 机器中有所帮助。我不确定Linux。

请参阅以下链接以获取更多信息。

[http://www.cezeo.com/tips-and-tricks/net-send-command/](http://www.cezeo.com/tips-and-tricks/net-send-command/)

# linq - 如何通过 Linq 获取字符串中的元素

> ID：11945475
> 
> 赞同：0
> 
> 时间：2012-08-14T03:41:01.243
> 
> 标签：linq

我需要大家的帮助

我有一个字符串：“123456”

如何使用 Linq 分别获得“1”、“2”、“3”、“4”、“5”、“6”？

很多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T03:52:56.033

```
var str = "123456";
var digits = str.Select(c => c.ToString()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:51:27.733

```
"123456".First() 
```

此外，您可以选择包含谓词函数。例如，

```
"123456".First(n => n > '1') 
```

但是您可以考虑改用 foreach 语句。我不确定这是否被认为是 LINQ 的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:48:23.517

如果您希望将其用作 LINQ 查询，则可以使用它：

```
IEnumerable<string> query =
    from c in "123456"
    select c.ToString(); 
```

如果您很高兴拥有可枚举的字符，则可以这样做：

```
IEnumerable<char> query =
    from c in "123456"
    select c; 
```

# python - 创建一个列表，其中每个元素都是根据 python 中嵌套列表的索引创建的

> ID：11945478
> 
> 赞同：0
> 
> 时间：2012-08-14T03:41:25.223
> 
> 标签：python

例如

```
alist = [[1,2],[10,10],[5,5]] 
```

我想创建一个新列表，其中包含每个 lists[nth] 元素和 lists[n+1] 元素的平均值。其中 n 是列表的大小。如果步长为 2，我希望它具有您对范围内步长所期望的行为（[start]，stop，[step]）。

所以从所需的输出向后工作

```
output = [[5.5,6],[5,5]]

output = [[(1 + 10)/2 , (2 + 10)/2], [5,5]] # The last list has no matching list, so it remains unchanged

output = [[(alist[0][0] + alist[1][0]) / 2, (alist[0][1] + alist[1][1]) / 2), alist[2],alist[2]

output = alist[nth ][yth] + alist[n + 1][y + 1] .... 
```

我走了好几条路试图完成这项工作，但从未找到解决方案。我觉得迭代器模块中的某些内容应该会有所帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:57:20.090

```
>>> [[(x+y)*.5  for x,y in zip(*item)] for item in zip(alist, alist[1:])]
[[5.5, 6.0], [7.5, 7.5]] 
```

您可以使用 itertools 做一个内存效率更高的版本

```
>>> from itertools import izip, islice
>>> [[(x+y)*.5  for x,y in izip(*item)] for item in izip(alist, islice(alist,1,None))]
[[5.5, 6.0], [7.5, 7.5]] 
```

**编辑：**仍然不确定 OP 对于一般情况想要什么，但这里有几个选择

```
>>> alist = [[1,2],[10,10],[5,5]]
>>> if len(alist)%2:
...     alist.append(alist[-1])
... 
>>> [[(x+y)*.5  for x,y in zip(*item)] for item in zip(alist, alist[1:])]
[[5.5, 6.0], [7.5, 7.5], [5.0, 5.0]]
>>> [[(x+y)*.5  for x,y in zip(*item)] for item in zip(alist[::2], alist[1::2])]
[[5.5, 6.0], [5.0, 5.0]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:34:27.917

为什么不是一个易于阅读的版本？

```
alist = [[1,2],[10,10],[5,5]] 
output = []

for i in range(0, len(alist) - 2):
    avg1 = (alist[i][0] + alist[i + 1][0]) / 2.0
    avg2 = (alist[i][1] + alist[i + 1][1]) / 2.0
    output.append([avg1, avg2]) # append averages
output.append([1.0 * j for j in alist[-1])
# append final list as a list of floats ([5.0, 5.0] in this case)

>>> output
[[5.5, 6.0], [5.0, 5.0]] 
```

# ruby-on-rails - Rails 迁移：可以使用“nil”作为布尔字段的默认值吗？

> ID：11945480
> 
> 赞同：5
> 
> 时间：2012-08-14T03:41:31.993
> 
> 标签：ruby-on-rails, postgresql, activerecord

将布尔字段默认为`nil`而不是`false`ActiveRecord 迁移以与 Postgres 一起使用有什么问题吗？

我喜欢它提供少量额外数据的方式——该字段是否已被标记为真或假。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T03:49:55.853

没有什么可以阻止您在布尔值上使用 nil - 但我个人喜欢我的布尔值是真还是假，我发现拥有 nil 会导致一些丑陋的代码

# c++ - 为什么某些情况需要使用“按位”运算符而不是“逻辑”/“相等”运算符？

> ID：11945481
> 
> 赞同：3
> 
> 时间：2012-08-14T03:41:32.353
> 
> 标签：c++, event-handling, sdl, bitwise-operators, boolean-logic

前几天，我尝试使用 SDL 多媒体库编写一个小型 C++ 编程，但遇到了这个小问题，我最终通过反复试验解决了这个问题。问题是，我了解我为解决问题所做的工作，但我并不真正了解问题的本质！

问题在于 SDL 中的键盘事件处理。处理单个按键以退出程序的代码非常简单明了。[eventQueue 是一个 SDL_Event 结构]

```
//checks for keypress events..
if ( eventQueue.type == SDL_KEYDOWN )
{ 
    //note: uses the boolean logical '==' equals operator..
    if ( eventQueue.key.keysym.sym == SDLK_ESCAPE )
    {
        running = false;
    }
} 
```

在上面的代码中，只需按下 ESCAPE 键就可以结束主循环并导致程序清理并关闭......

**但是... 处理使用修饰键**(shift/alt/ctrl) 的按键所需的代码不能与“==”运算符一起正常工作。我花了很长时间才发现我需要使用**按位 AND 运算符而不是相等（逻辑？）运算符。**

```
//checks for keypress events..
if ( eventQueue.type == SDL_KEYDOWN )
{ 
    //note: requires the use of the bitwise AND operator..
    if (( eventQueue.key.keysym.mod & KMOD_ALT ) && (eventQueue.key.keysym.sym == SDLK_F4 ))
    {
        running = false;
    }
} 
```

我在这里的困惑来自这样一个事实，当使用'keysym.sym'成员时，逻辑运算符'=='工作正常，但是，当使用'keysym.mod'成员时，有必要使用'&'按位与运算符。

现在，如果我不得不猜测，我会说这与“keysym.sym”只需要处理代表键盘上单个键的单个数值有关，而“keysym.mod”有处理 shift、ctrl 和 alt 键的各种组合...？

**总结一下我的问题：**为什么会这样？除了反复试验之外，是否需要学习某条数据是否需要与按位或逻辑/相等运算符进行比较？为什么“keysym.sym == SDLK_F4”工作正常，但“keysym.mod == KMOD_ALT”却不行？为什么涉及十进制数的运算与比较位值的运算具有不同的结果？是否还有逻辑运算有效而按位运算无效的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:57:53.247

按位与有些特殊。`==`检查是否相等，但按位 AND 运算符允许您使用数字的各个位。

想象一下，您的事件被定义为一个键列表：

```
event = ['a', 'shift', 'ctrl'] 
```

然后，您可以很容易地检查特定修饰符是否是事件的一部分：

```
if 'shift' in event:
  # ... 
```

按位与有点像一个`in`语句。您可以将事件定义为二进制数，如下所示：

```
event = 00010010 
```

现在，当您执行按位与时，您可以轻松检查是否已将某个修饰符应用于事件，因为修饰符也表示为二进制数：

```
 00010001  # event (18)
& 00010000  # shift key (8)
----------
  00010000  # you get a non-zero answer, so the shift key is in the event
----------

  00010001  # event (18)
& 00001000  # "z" key (4)
----------
  00000000  # you get zero because the "z" key wasn't a part of the event
---------- 
```

您可以使用按位 OR 构造这样的事件：

```
 00000001  # shift key (1)
| 10100000  # "a" key (160)
----------
  10100001  # resulting event (161)
---------- 
```

维基百科很好地总结了[按位运算：](http://en.wikipedia.org/wiki/Bitwise_operation)

> 按位运算在一个或多个位模式或二进制数字的各个位级别上进行操作。它是处理器直接支持的快速、原始的操作，用于操作值以进行比较和计算。在简单的低成本处理器上，按位运算通常比除法快得多，比乘法快几倍，有时比加法快得多。尽管现代处理器由于其较长的指令流水线和其他架构设计选择，通常执行加法和乘法运算的速度与按位运算一样快，但由于资源使用减少，按位运算通常使用较少的功率/性能。

基本上，按位运算符允许您有效地处理存储在整数位中的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T03:57:13.960

你在这里做了什么

```
eventQueue.key.keysym.mod & KMOD_ALT 
```

不是*比较*操作，而是位屏蔽操作。比较操作在 C 和 C++ 中是隐含的：计算结果为零的表达式表示“假”，所有非零值都表示“真”。在像您这样的逻辑表达式中使用时，这是

```
(eventQueue.key.keysym.mod & KMOD_ALT) != 0 
```

现在到位操作：某些值表示两个或多个值的位组合。例如，`keysym.sym`表示 ALT 的位模式（它本身是左右 ALT 的组合）和任何其他可能同时按下的键的组合。为了从组合中分离一个值，使用了一种位掩码技术：在感兴趣的位中具有 1 并且在所有其他位中具有 0 的值（即`KMOD_ALT`）与组合值（在您的情况下为`keysym.sym`）进行与运算由s`keysym.sym`指示的位中的位。`1``KMOD_ALT`

最终结果是`eventQueue.key.keysym.mod & KMOD_ALT`仅当按下 ALT 时才会为非零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T04:00:51.937

*免责声明：我对 SDL 几乎一无所知。我在这里回答的主要是猜测。*

无论按下多少其他键，键盘上都有许多键会产生键事件。`Shift`, `Alt`,等修饰键`Ctrl`就是这样的键（不确定是否还有更多），键盘制造商必须确保它们可以同时按下。其余的键是普通键，如果同时按下，可能会也可能不会产生键事件，具体取决于每个键盘的电路。

当按下普通键时，会触发一个键事件（不确定按下修饰键是否会触发事件）。普通键是 in`sym`以及在按下普通键时是否正在按下任何修改键被记录在 中`mod`。我很确定，在实现方面，其中的某些位`mod`用于定义是否按下某个修饰键。要检查该位是否打开，您需要逐`&`位使用定义哪个位用于指示修改键是否被按下的常量。

# ruby-on-rails - 如何为不同类型的用户切换登录登陆页面？

> ID：11945483
> 
> 赞同：0
> 
> 时间：2012-08-14T03:41:54.067
> 
> 标签：ruby-on-rails, routes

我有两种不同类型的用户（管理员、教师）。管理员拥有查看所有内容的全部权限，因此当他尝试登录页面时，它应该登陆`'home#index'`页面。当老师尝试登录时，它应该登陆`'localhost:3000/post/new'`而不是`'home#index'`

路由文件包含：

```
resources :session, :only => [:update]
   match 'login' => 'user_sessions#new', :as => :login
   match 'logout' => 'user_sessions#destroy', :as => :logout
   root to: 'home#index' 
```

那么，如何将教师类型的用户的登录页面切换`'home#index'`到不同的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:46:34.663

是否有一个令人信服的理由，如果传入用户是教师，您不能只在索引操作中添加一个条件来重定向？

```
if user.teacher?
  redirect_to new_post_path
end 
```

类似的东西？似乎这比搞砸路线更容易。

# php - 在给定可能重复的情况下选择表中的前 100 个最大值

> ID：11945485
> 
> 赞同：0
> 
> 时间：2012-08-14T03:42:40.153
> 
> 标签：php, mysql, steam

我有一个具有以下结构的表 - steamid、itemid、eventid、value，所有这些都只是记录我插入的每小时数据的整数或大整数。因此，用户很可能有多个条目具有相同的 steamid、itemid 甚至值。

我正在尝试获得 100 个最高值 - 但同一项目不得重复。

到目前为止我所拥有的是

```
SELECT itemid,value,steamid 
FROM $table 
GROUP BY itemid 
ORDER BY value DESC 
LIMIT 0,100 
```

这给了我这个数据集（仅在此处提供示例）：

```
itemid      value   steamid
=================================================
599291414   66397   76561198032389066
779150329   62882   76561198001229760
773965297   51895   76561198014617403
332883551   43201   76561197992659494
333434836   40880   7656119799359013 
```

但是，由于某种原因，这忽略了表中列出的真正最大值。我不确定我还能如何格式化它，以便我可以忽略具有相同 itemid 和 steamid 的重复条目。我认为我不能按 steamid 分组，因为那样它会忽略可能与 steamid 关联的其他项目。

如果我选择不分组，这是前几个。

```
 itemid     value   steamid
 =====================================
 1011809265 753665  76561198010314894
 376615188  101684  76561197989760193
 478937438  83448   76561198010314894
 478937438  83448   76561198010314894
 376662587  72693   76561197989760193
 376662587  72693   76561197989760193
 599291414  66454   76561198032389066
 599291414  66454   76561198032389066
 599291414  66454   76561198032389066 
```

洞察力表示赞赏，我很乐意回答任何可能有助于解决这个问题的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:50:54.243

尝试

```
SELECT * FROM (

  SELECT itemid,value,steamid FROM $table GROUP BY itemid ORDER BY value DESC
) as tbl1

GROUP BY itemid, value

LIMIT 0,100 
```

这应该是唯一的 itemid，但随后只给您单个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:47:20.420

尝试添加不同的。

```
SELECT DISTINCT itemid, value, steamid 
FROM $table 
ORDER BY value DESC 
LIMIT 0,100 
```

# c - 如何在 C 中创建一个交互式菜单，该菜单从一个功能移动到另一个功能而不重绘菜单

> ID：11945486
> 
> 赞同：0
> 
> 时间：2012-08-14T03:42:53.177
> 
> 标签：c

我的目标是生成一个程序，该程序将文件作为输入并通过将字符向前移动 3 来“编码”其中的文本（因此“a”将变为“d”）。它应该生成一个带有编码文本的输出文件。该菜单用于接受用户输入并执行分配给所选数字的功能。

我很早就开始创建这个程序，但是时间不够用，并且正在努力解决如何构建它。目前，我有菜单显示，但是当一个子函数被调用时，它会显示，但随后菜单会覆盖它，我不知道为什么。任何帮助，将不胜感激。这是我到目前为止的代码......

```
#include <stdio.h>
#define INPUT_FILE 1    //define statements
#define OUTPUT_FILE 2
#define NUM_TO_SHIFT 3
#define ENCODE 4
#define QUIT 0

int menu();     //function prototypes
int input();
int output();
int shift();
int encode();
void quit();

int main()
{
    int choice;     // main variables
    char user_filename[100];

    choice = menu();   // get user's first selection

    while(choice != QUIT)   //execute so long as choice is not equal to QUIT
    {
        switch(choice)
            {
                case INPUT_FILE:
                    printf("Enter the filename of the file to encode:\n");
                    printf("(hit the Enter key when done)\n");
                    gets(user_filename);
                    break;
                case OUTPUT_FILE: output();
                    break;
                case NUM_TO_SHIFT: shift();
                    break;
                case ENCODE: encode();
                    break;
                case QUIT: quit();
                    break;
                default:    printf("Oops! An invalid choice slipped through. ");
                            printf("Please try again.\n");
            }
      choice = menu(); /* get user's subsequent selections */
   }

   printf("Bye bye!\n");
   return 0;
}

int menu(void)
{
    int option;

    printf("Text Encoder Service\n\n");
    printf("1.\tEnter name of input file (currently 'Secret.txt')\n");
    printf("2.\tEnter name of output file (currently not set)\n");
    printf("3.\tEnter number of characters data should be shifted (currently +7)\n");
    printf("4.\tEncode the text\n\n");
    printf("0.\tQuit\n\n");
    printf("Make your selection: ");

    while( (scanf(" %d", &option) != 1) /* non-numeric input */
          || (option < 0)               /* number too small */
          || (option > 4))              /* number too large */
    {
      fflush(stdin);                    /* clear bad data from buffer */
      printf("That selection isn't valid. Please try again.\n\n");
      printf("Your choice? ");
    }
    return option;
}

int input()
{

}

int output()
{
    return 2;
}

int shift()
{
    return 3;
}

int encode()
{
    return 4;
}

void quit()
{
    printf("Quiting...Bye!");
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:59:22.590

[正如在 Stackoverflow](https://stackoverflow.com/questions/1836509/c-function-exiting-before-input?rq=1)突出显示为匹配项的问题中一样，您需要清除缓冲区以删除在那里等待的换行符。

阅读有效的菜单选项后添加此代码：

```
do
{
    c = getchar();
} while (c != EOF && c != '\n'); 
```

哪里`c`是 a`char`声明的`option`。这会循环输入流中的剩余字符，直到到达`EOF`(End Of File) 或换行符，这意味着它们不会影响您对`gets()`. 请注意，这`gets()`被认为是不安全的，因为它不能防止缓冲区溢出，用户可以轻松输入超过 100 个字符（包括换行符）并开始写入不应被他们的输入触及的内存。当您看到像这样的函数调用周围的编译器警告时，您最好查找安全等效项，通常它们采用第二个参数，该参数是被读入的缓冲区的最大大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:49:33.993

使用 getchar(); 在获取（用户文件名）之后不久；它将等待获得角色

```
 gets(user_filename);
 getchar();
 break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:53:45.353

您不应该使用`gets(user_filename)`来获取文件名，因为`gets()`读取到 a`\n`并停止读取。当用户键入菜单选项时，您`scanf`的 for menu 选项不会读取行尾的 。`\n`本质上，您正在`gets`读取一个没有单词的字符串。您*要*阅读的行实际上是下一行。使用`scanf`而不是`gets`将修复它。

否则，您的程序将按预期工作 - 只是您的功能尚未执行任何操作，您的菜单正在“覆盖”子菜单。请参阅[http://ideone.com/F2pEs](http://ideone.com/F2pEs)了解使用`scanf`而不是`gets`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-07T12:18:45.357

好吧，这个答案已经很晚了，但是遇到了它，我忍不住写了点东西。让我们直接开始吧。您将拥有一组菜单，其中数组元素是您想要在菜单中使用的选项。然后在一个真实的条件下，循环遍历数组的元素，选择你想要的选项。

```
#include "stdio.h"
#include "stdlib.h"
#include "string.h"
//function prototypes
int input();
int output();
int shift();
int encode();
void quit();
int main(){
int menus_on = 1;
  const char *menus[5] = {"Input","Output","Shift","Encode","Quit"};
  while(menus_on){
    int menu,*temp;

    for(int i =0;i<6;i++){
      printf("%d: %s\n",i,menus[i]);
    }
      printf("Select menu\n");
      scanf("%d",temp);
      menu = *temp;
      printf("Selected menu::%d\n",menu);
      switch(menu){
        case 0:
        input();
        break;
        case 1:
        output();
        break;
        case 2:
        shift();
        break;
        case 3:
        encode();
        break;
        case 4:
        quit();
        break;
        default:
        printf("Invalid selection\n");
        break;
      }
  }
  return 0;
}
int input() {
return 0;
}
int encode () {
return 0;
} 
```

# ruby-on-rails - 您如何在 Rails 中为“喜欢”建模？

> ID：11945487
> 
> 赞同：11
> 
> 时间：2012-08-14T03:43:03.297
> 
> 标签：ruby-on-rails, ruby, model

我有 3 个模型：用户、对象、喜欢

目前，我有模型：一个用户有很多对象。如何进行建模：

1) 一个用户可以喜欢很多对象

2）一个对象可以有很多喜欢（来自不同的用户）

所以我希望能够做这样的事情：

User.likes = 用户喜欢的对象列表

Objects.liked_by = 对象喜欢的用户列表

下面的模型肯定是错误的......

```
class User < ActiveRecord::Base
  has_many :objects
  has_many :objects, :through => :likes
end

class Likes < ActiveRecord::Base
  belongs_to :user
  belongs_to :object
end

class Objects < ActiveRecord::Base
  belongs_to :users
  has_many :users, :through => :likes    
end 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T07:21:20.270

为了进一步详细说明我对 Brandon Tilley 的回答的评论，我建议如下：

```
class User < ActiveRecord::Base
  # your original association
  has_many :things

  # the like associations
  has_many :likes
  has_many :liked_things, :through => :likes, :source => :thing
end

class Like < ActiveRecord::Base
  belongs_to :user
  belongs_to :thing
end

class Thing < ActiveRecord::Base
  # your original association
  belongs_to :user

  # the like associations
  has_many :likes
  has_many :liking_users, :through => :likes, :source => :user
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T03:46:04.933

你很近；要使用`:through`, 关系，您首先必须设置您正在经历的关系：

```
class User < ActiveRecord::Base
  has_many :likes
  has_many :objects, :through => :likes
end

class Likes < ActiveRecord::Base
  belongs_to :user
  belongs_to :object
end

class Objects < ActiveRecord::Base
  has_many :likes
  has_many :users, :through => :likes    
end 
```

请注意`Objects`should `has_many :likes`，以便外键位于正确的位置。（另外，你可能应该使用单数形式`Like`和`Object`你的模型。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:34:16.943

这是实现此目的的简单方法。基本上，只要您使用 :class_name 选项指定正确的类名，您就可以根据需要创建任意数量的关系。但是，这并不总是一个好主意，因此请确保在任何给定请求期间只使用一个，以避免额外的查询。

```
class User < ActiveRecord::Base
  has_many :likes, :include => :obj
  has_many :objs
  has_many :liked, :through => :likes, :class_name => 'Obj'
end

class Like < ActiveRecord::Base
  belongs_to :user
  belongs_to :obj
end

class Obj < ActiveRecord::Base
  belongs_to :user
  has_many :likes, :include => :user

  has_many :users, :through => :likes

  # having both belongs to and has many for users may be confusing 
  # so it's better to use a different name

  has_many :liked_by, :through => :likes, :class_name => 'User'   
end

u = User.find(1)
u.objs # all objects created by u
u.liked # all objects liked by u
u.likes # all likes    
u.likes.collect(&:obj) # all objects liked by u

o = Obj.find(1)
o.user # creator
o.users # users who liked o
o.liked_by # users who liked o. same as o.users
o.likes # all likes for o
o.likes.collect(&:user) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:24:46.107

## 根据导轨建模的命名约定的模型和关联

```
class User < ActiveRecord::Base
  has_many :likes
  has_many :objects, :through => :likes
end

class Like < ActiveRecord::Base
  belongs_to :user
  belongs_to :object
end

class Object < ActiveRecord::Base
  belongs_to :user

  has_many :likes
  has_many :users, :through => :likes    
end 
```

此外，您可以使用已经内置的 gems，比如[acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on/)，在没有代码的情况下拥有相同的功能:)

# sql - 同一列的多个 WHERE 子句

> ID：11945489
> 
> 赞同：2
> 
> 时间：2012-08-14T03:43:30.380
> 
> 标签：sql, tsql

我在下面编写了查询，它返回了我需要的数据。但是，我不禁想到有更好的方法来编写它。我需要的是`Table1`在供应商所属的类别中找到价格高于指定供应商价格的所有唯一行。（理论上，供应商可以属于的类别数量没有限制）。

*   表 1 是一个交叉引用表，包含`VendorID`、`Category`和`price`
*   表 2 包含供应商信息
*   有一个包含类别名称的类别表。

...

```
SELECT DISTINCT Table2.name, Table2.city, Table2.state
FROM Table1 INNER JOIN Table2 ON Table1.VendorID = Table2.VendorID
WHERE Table1.Category IN (49,50,45)
    AND Table1.price > (SELECT price FROM Table1 WHERE VendorID = 69041 AND Category = 50)
    AND Table1.price > (SELECT price FROM Table1 WHERE VendorID = 69041 AND Category = 49)
    AND Table1.price > (SELECT price FROM Table1 WHERE VendorID = 69041 AND Category = 45) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T03:58:05.367

也许只是最大化它？

```
SELECT DISTINCT Table2.name, Table2.city, Table2.state
FROM Table1 INNER JOIN Table2 ON Table1.VendorID = Table2.VendorID
WHERE Table1.Category IN (49,50,45)
    AND Table1.price > (SELECT MAX(price) FROM Table1 WHERE VendorID = 69041 AND Category = IN (49,50,45)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T03:50:18.613

您可以使用公共表表达式或子查询首先提取您需要的所有数据，然后将您的表连接到该“视图”：

```
;WITH MaxPricePerCategory
AS
    (
    SELECT MAX(Price) AS [Price]
        -- You can remove category if you just need the maximum price
        , Category
    FROM Table1
    WHERE VendorID = 69041
    AND Table1.Category IN (49,50,45)
    GROUP BY Category
    )
SELECT DISTINCT Table2.name
    , Table2.city
    , Table2.state
FROM Table1 
JOIN Table2 
    ON Table1.VendorID = Table2.VendorID
JOIN MaxPricePerCategory MPPC
    ON Table1.Category = MPPC.Category
        AND Table1.price > MPPC.Price 
```

# iphone - 将表格单元格的名称传递给详细视图

> ID：11945492
> 
> 赞同：-1
> 
> 时间：2012-08-14T03:43:49.343
> 
> 标签：iphone, ios, ios4, sdk

我如何能够将在主视图控制器中单击的表格单元格的名称传递给详细视图控制器。我希望稍后在我的详细视图中使用它，尽管我想通过`self.navigationItem.title =`. 任何人都可以提供如何实现这一点的基本代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:10:15.937

如果您只想设置导航标题，您可以在将 detailViewController 推送到导航控制器堆栈之前进行设置。

```
detailViewController.title = @"whatever you want"; 
```

如果您确实需要其他地方的单元格名称，则`NSString`在 DetailViewController 中创建一个属性，并在推送之前设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:11:18.527

简单的方法是在详细视图控制器中创建一个属性并将其设置为标题。然后可以在 ViewDidLoad 中使用来设置标题。

伪代码：

*   创建详细的视图控制器
*   设置属性
*   推到导航栏上
*   在 ViewDidLoad 中获取属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:13:56.963

您将要使用该`didselectrowatindexpath`方法。像这样，初始化新视图并设置标题：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
        DetailViewController *myDetViewCont = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];

        NSInteger row = indexPath.row;
        NSString *title = [ListOfItems objectAtIndex:row];

        myDetViewCont.navigationItem.title = title;
        [self.navigationController pushViewController:myDetViewCont animated:YES];

    } 
```

# facebook - url 请求重定向，但

> ID：11945496
> 
> 赞同：0
> 
> 时间：2012-08-14T03:44:50.387
> 
> 标签：facebook, button

当我通过 Facebook 调试器传递 url 时，我收到“严重错误” **“URL 请求 HTTP 重定向，但无法遵循”。** 重定向的 URL 与 Fetched 和 Canonical 相同，但添加了**"?AspxAutoDetectCookieSupport=1"**。所以链接拒绝了这个。我在 Web.config 尝试了 cookieless = UseCookies 以避免 URL 中的 cookiesupport 参数，但没有任何反应，仍然存在。

这是 web.config 中的部分：
`<sessionState cookieless="UseCookies"/>`

这样好吗？另一种抑制参数的方法？是 Facebook 缓存问题吗？你可以试试： [https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fdisaweb.com%2FModulos%2Ftorre-noria-11.aspx](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fdisaweb.com%2FModulos%2Ftorre-noria-11.aspx)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:51:17.317

您的链接重定向到：

[http://disaweb.com/modulos/torre-noria-11.aspx/?AspxAutoDetectCookieSupport=1](http://disaweb.com/modulos/torre-noria-11.aspx/?AspxAutoDetectCookieSupport=1)

但这会将 302 返回到同一位置。您不能将 301 或 302 返回到请求的完全相同的位置。

# php - PHP 静态类或命名空间

> ID：11945497
> 
> 赞同：5
> 
> 时间：2012-08-14T03:45:12.063
> 
> 标签：php, namespaces, static-class

我想衡量人们对使用静态类而不是命名空间的看法。我来自 C++ 背景，非常喜欢它的语法以及它如何让您构建代码。我最近决定需要将我的代码分组为逻辑单元，而不仅仅是文件。例如，我更喜欢像 User::login 这样的调用而不是 user_login。所以，我做了一些谷歌搜索，发现 PHP 有命名空间，我松了一口气。不过我的解脱并没有持续多久，我真的不喜欢这种语法。它给我的函数调用增加了更多的混乱。所以，目前我正在使用静态类来模拟命名空间。这有什么缺点吗？

[我在PHP Namespaces vs Classes with static functions](https://stackoverflow.com/questions/9322376/php-namespaces-vs-classes-with-static-functions)中发现了一个类似的问题，但没有太多讨论。

另外，有没有办法避免以下情况：

```
class Test {
 public static void myFunc() {
  Test::myOtherFunc();
 }
 public static void myOtherFunc() {

 }
} 
```

我认为可以在不指定名称的情况下调用同一类中的函数，但显然不是。是否有任何解决方法（例如在 C++ 中有 using 关键字）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T04:03:05.103

巧合的是，我实际上一直在朝着完全相反的方向前进：

1.  使用命名空间来组织域类（或函数）
2.  使用依赖注入，否则我会使用静态类

使用静态类来模拟命名空间的问题是您不能将它们组织到多个文件中，所有内容都必须在一个文件中定义；这很可能取决于个人口味。

静态类的另一件事是，你开始时没有任何状态，慢慢地一些状态管理会慢慢出现，最终你会得到一些奇怪的锁定依赖。状态应该为实例保留。目前我唯一值得注意的静态类是站点范围的配置。

最后，静态类中的自引用是显式的，而在命名空间中它的工作方式与 C++ 完全一样：您指定函数名称，然后首先在命名空间中查找它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T04:05:49.670

如果从代码结构的角度来看，静态类方法和命名空间函数没有区别。它们最终都在全球范围内。唯一的区别是，使用静态类方法，您试图伪造 OOP。

因此，如果您真正需要的是独立/实用函数，最好使用命名空间函数。命名空间用于对事物（函数和类）进行分组。

至于你的`User::login()`例子，这将是一个不好的做法。相反，您应该拥有一个能够包含状态的真实对象。

```
$mapper = new UserMapper;
$user = new User;
$user->setNickname( $name );

$mapper->fetch( $user );

if ( $user->hasPassword( $password ) )
{
    $user->setLastLogin( time() );
}
else
{
    // log the access attempt
    // set error state
}

$mapper->save( $user ); 
```

底线是：如果您使用的是静态结构（函数或方法），则它不是 OOP。你只是在假装它。相反，您应该使用真正的 OOP 和[依赖注入](http://www.youtube.com/watch?v=RlfLCWKxHJ0)。

如果你的代码到处都使用静态方法和变量，它会导致类之间的紧密耦合，添加[全局状态](http://www.youtube.com/watch?v=-FRm3VPhseI)，并使你的代码库[更难维护和测试](http://www.youtube.com/watch?v=wEhu57pih5w)。这不是特定于 PHP 的。

# c++ - 设计一个 C++ REST 客户端

> ID：11945499
> 
> 赞同：2
> 
> 时间：2012-08-14T03:45:38.960
> 
> 标签：c++, multithreading, rest, coding-style, client

我目前正准备设计一个 C 或 C++ 库来访问现有的 Rest 服务，但我不确定：

我见过的大多数这样的 API 客户端库只是提供了一种非常接近 ReST API 的调用方式，您必须阅读 ReST API 文档才能使用它。它们并不是真正用语言的原生风格编写的，IMO。他们基本上包装了一个 http 库，可能是一个 XML/JSON 库并处理一些特殊的东西，比如 auth：

**风格1：**

```
paramList.add( "name", "Joe" )
response = makeARestCall( POST, "path/to/resource", paramList, miscAuthData );
if( result.code == 200 ) {
    //success
    xml = response.getXml();
    somethingWeCareAbout = xpath.parse( xml, "response/something/we/care/about" );
    print somethingWeCareAbout
} else {
    print "Something went wrong"
} 
```

对我来说，使用语言的约定而不是 API 似乎更自然。考虑将 API 用作调用函数而不是访问资源。

**风格2：**

```
try {
   Api.setName( UserId, "Joe" );
   print Api.getSomethingWeCareAbout();
} catch( ApiException e ) {
   print e.getMessage();
} 
```

我用后一种风格编写了 API 库，它们需要做更多的工作，但我发现它们更自然地使用和集成到应用程序中，特别是对于复杂的 ReST API，但我在这方面并不是很有经验。

一种风格明显优于另一种风格吗？除了易于开发之外，是否有其他原因，大多数似乎都是以第一种风格编写的？

这个库肯定会在多线程应用程序和 UI 中使用，所以请记住线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:25:33.680

在考虑了这一点之后，我自己的问题的部分答案是第一种样式可能更容易多线程。使用该库的人可以创建如下函数：

```
void asyncRestCall( Method method, String resource, map<String,String> parameters, misc misc, function onCompletion ) {
    //fork a new thread
    ...

    //do the call
    result = makeARestCall( method, resource, parameters misc );

    //back in original thread
    ...

    onCompletion( result );
} 
```

而对于样式 2 中的每个函数调用都执行一次，则工作量要大得多。

# jquery - 同时使用表单提交和重定向

> ID：11945501
> 
> 赞同：1
> 
> 时间：2012-08-14T03:46:12.683
> 
> 标签：jquery, ajax, forms, iframe

我目前有一个表单，它使用 GET 方法向会员提交数据。问题是，当用户填写表单时，他们被重定向到与 GET 操作相同的 URL，这是一个随机代码的 api 页面。

我需要将填写表单的用户重定向到我托管的感谢页面，而表单中的信息仍会发送到该附属 api 页面。

我无法操纵附属 api 页面。我该怎么做呢？我听说过不同的答案，包括 POST、Iframe、ajax、onsubmit。

有人可以确认哪种方法效果最好，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:06:16.653

**编辑**在聊天中讨论了一些事情后，我们得出结论，服务器端发布是一种更好的方式。下面是一个实现示例：

*HTML：*

```
<form id="my_form">
<!-- form elements -->
</form>
<div id="status_message"></div> 
```

*Javascript：*

```
$('#my_form').on('submit', function (e){
    $.ajax({
      type: "POST",
      url: "localProxy.php",
      data: $('#my_form').serialize(),
      success: function (response) {
         // do something!
      },
      error: function () {
         // handle error
      }
    });
}); 
```

*PHP (localProxy.php)*

```
$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, 'http://thirdpartydomain.internet/login_url.php'); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_POSTFIELDS, $_POST);
curl_setopt ($ch, CURLOPT_POST, 1);
$result = curl_exec ($ch);
curl_close($ch);

// do something with the data on your end (if anything), or render the "thank you" page
die('<h1>Thanks!</h1>'); 
```

* * *

**原始答案**

有几种方法。

第一种方式，您（通过标签）提到您拥有 jQuery——在这种情况下，您可以使用 jquery 的`ajax`方法将数据发布到 API*并将*其发布到您自己的服务器以获取感谢消息。

```
<form id="my_form">
<!-- form elements -->
</form>
<div id="status_message"></div> 
```

...在您的“就绪”功能中：

```
var API_URL = 'http://www.some-api-provider.com/api.php';
var MY_URL = 'http://www.my-website.net/post_handler.php';
$('#my_form').on('submit', function (e){
    e.preventDefault();
    var error = false;

    // validation here, if there is an error, set error = true;

    if (error == true) {
        alert('There was a problem!'); // do something better than this!
        return false;
    }

    $.ajax({
      type: 'GET',
      url: API_URL,
      data: $('my_form').serialize(),
      success: function () {
        $.ajax({
          type: 'POST',
          url: MY_URL,
          data: $('#my_form').serialize(),
          success: function (response) {
            $('status_message').html(response);
          },
          error: function () {
            alert('There was a problem!'); // do something better than this!
          }
        });
      },
      error: function () {
        alert('There was a problem!'); // do something better than this!
      }
    });
    return false;
}); 
```

那里发生了什么？我们使用`on`事件将事件侦听器绑定到表单的“提交”事件。当用户单击提交按钮时，将调用该侦听器代码。

反过来，它会序列化表单的数据，然后通过 GET 将其发送到 API。只要它有效，它就会调用成功函数，该函数又会通过 POST 将数据发送到您的服务器。div`status_message`将使用服务器返回的结果进行更新。

另一种方法是将数据正常发布到您的服务器，然后使用 cURL 或其他一些服务器端 HTTP 连接将数据提交到 API。我可能会喜欢这种方法，因为它不太依赖于 javascript；如果您的用户关闭了脚本，则 javascript 方法将失败。

在不知道您使用的是什么服务器端技术的情况下，我无法举出任何示例，但是如果您走这条路遇到麻烦，您可以随时提出另一个问题！

**文档**

*   `jQuery.ajax()`- [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)
*   `jQuery.on()`- [http://api.jquery.com/on/](http://api.jquery.com/on/)
*   PHP `curl`- [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)
*   ASP.net`WebRequest`教程 - [http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:53:18.610

使用 ajax 和 onSubmit 事件将数据发送到您的 api，并重定向。

```
$('form').onSubmit(function(){
 $.ajax({
  ... //your informations to send to the api
  success:function(){
    ...//your redirection to the success page
  }
 });
}); 
```

更多关于[jquery 中 ajax 的信息](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:55:11.623

使用 jquery 是一个很好的方法。这就是我将如何做到的

```
$("#formID").submit(function()
{
    $.get('getUrl', { param1Name: param1Data, param2Name: param2Data (etc...) }, function(data)
    {
        document.location = "redirectURL";
    });

    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T04:01:17.810

最好使用 Ajax，并且在 Ajax 函数成功时使用重定向

window.location.href = "thankyou.html";

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T04:02:03.053

jquery ajax 方法是最好的方法，像这样使用它们

```
$.ajax({   
    type: "POST",   
    url: method path here,   
    data: jsonText,   
    contentType: "application/json; charset=utf-8",   
    dataType: "json",   
    success: function (response) {   
    if (response.d != '') {   
    //redirect code           
     }   
     },   
     failure: function (response) {   
     alert(response.d);   
     }
     }); 
```

# meteor - 为什么此复选框不会在 Meteor 中按预期刷新？

> ID：11945509
> 
> 赞同：0
> 
> 时间：2012-08-14T03:47:52.353
> 
> 标签：meteor

我想为流星简化[TodoMVC 应用程序。](https://github.com/marcandre/todomvc/tree/meteor_bug)我认为目前有些`observe`不需要。我简化了一点，但是当[我尝试](https://github.com/marcandre/todomvc/compare/marcandre%3ameteor_simplify...marcandre%3ameteor_bug)进一步简化时，更新无法正常工作。

例如，当我单击待办事项列表中的所有项目时，它应该被选中，但没有。当我刷新页面时，它被选中。

**编辑**：感谢@TomColeman，摆脱了一个不相关的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:44:52.503

我在应用补丁之前看到了该错误。这是由于`Meteor.flush`在线74。

我不确定为什么需要冲洗？（我也不确定为什么会出现错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:48:08.970

原来这仅仅是因为正确的 html 是`checked="checked"`，而不仅仅是`checked`.

# vim - vim: yank lines above the current line together with the current line

> ID：11945510
> 
> 赞同：4
> 
> 时间：2012-08-14T03:47:53.123
> 
> 标签：vim

I find myself doing `Nyy` very often to yank the current line and `N-1` lines below. So `3yy` would yank the current line and 2 more lines (so all together 3).

I know how to yank `N` lines above the current line (`yNk`), but this does not include the current line. What I want is to yank the current line and `N-1` lines above. How do I do this (ideally also with the `yy` command)?

Edit: Apparently `yNk` includes the current line as well. I must have missed it. Thx for the comments.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T03:51:00.310

The following will yank the current line plus two above:

```
2yk 
```

Obviously changing the `2` will alter the number of lines yanked above. No number is an implicit `1`, so `yk` is equivalent to `1yk`.

# python - 使 Python 类方法在 Mongodb 中可搜索

> ID：11945512
> 
> 赞同：1
> 
> 时间：2012-08-14T03:47:58.173
> 
> 标签：python, class, mongodb, pymongo

我有一个 Mongodb 集合，并且为集合中的文档创建了一个 Python 类。该类具有一些不随文档存储的属性和方法。我应该尝试存储它们以使属性可搜索，还是不应该存储它们并在 Python 中搜索对象？

这是一个例子：

```
# Child
class Child:
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

    @property
    def parent(self):
        try:
            return Parent(**db.Parents.find_one({'child':self._id}))
        except:
            return None

# Parent
class Parent:
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

    @property
    def child(self):
        try:
            return Child(**db.Children.find_one({'parent':self._id}))
        except:
            return None 
```

在这个例子中，要搜索所有父母的名字是“foo”的孩子，我必须这样做：

```
results = [Child(**c) for c in db.Children.find() if c.parent.name == 'foo'] 
```

这意味着我必须从 Mongodb 中提取所有 Children 文档并进行搜索。将父数据（或其子集）写入子文档是否更聪明，所以我可以使用 Mongodb 进行搜索？所以我的 Child 类可能如下所示：

```
# Child
class Child:
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

    @property
    def parent_name(self):
        try:
            return db.Parents.find_one({'child':self._id})['name']
        except:
            return None

    def _save(self):
        # something like this to get and save all the properties
        data = {m[0]:getattr(self,m[0]) for m in inspect.getmembers(self)}
        db.Children.find_and_modify({'_id':self._id},{'$set':data},upsert=True)

# search
results = [Child(**c) for c in db.Children.find({'parent_name':'foo'})] 
```

所以搜索效率更高，但我认为必须保持子对象更新可能是痛苦和危险的。如果我更改父级的名称，我还必须重写它的子级。感觉不对。有更好的主意吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:51:00.410

您不必加载*所有* `Children`.

```
parent_ids = db.Parents.find({'name': 'foo'}).distinct('_id')
children = db.Children.find({'parent': {'$in': parent_ids}}) 
```

（另外，为什么你有`child`一个父字段*和*一个`parent`子字段？）

# python - 在视图中强制应用程序/json MIME 类型（Flask）

> ID：11945523
> 
> 赞同：53
> 
> 时间：2012-08-14T03:49:53.217
> 
> 标签：python, json, mime-types, flask

我不知道如何为`application/json`Flask 中的视图强制使用 MIME 类型。这是我为演示目的而汇总的一个简单视图：

```
@app.route("/")
def testView():
    ret = '{"data": "JSON string example"}'
    return ret 
```

JSON字符串（保存在变量中`ret`）是从其他地方收集的（使用来自另一个程序的stdout [`subprocess`](http://docs.python.org/library/subprocess.html)），所以我不能使用[`jsonify`](http://flask.pocoo.org/docs/api/#flask.jsonify)Flask提供的。

我已经查看了[“Returning Json”文档](http://flask.pocoo.org/docs/api/#returning-json)和[这个](https://stackoverflow.com/questions/7086448/)Stackoverflow 问题，但到目前为止我还没有运气。我已经四处寻找了一段时间，并将继续搜索，但我想我会在这里问一下，以防万一有人遇到这个问题。

谢谢。

* * *

请看[下面的答案](https://stackoverflow.com/a/11945643/586621)

解决方案：

```
@app.route("/")
def testView():
    ret = '{"data": "JSON string example"}'

    resp = Response(response=ret,
                    status=200,
                    mimetype="application/json")

    return resp 
```

我发现这个网站很有用：[Implementing a RESTful Web API with Python & Flask](http://blog.luisrei.com/articles/flaskrest.html)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-05T11:11:09.910

如果您使用：

```
from flask import jsonify 
```

然后在您的代码中：

```
return jsonify(somedict) 
```

然后 jsonify() 自动将 mime 类型设置为 'application/json'

编辑：

这***以前***被认为是一种风险，但现在不再存在了，Flask 也更新了它的建议：*“ECMAScript 5 关闭了这个漏洞，所以只有非常旧的浏览器仍然容易受到攻击。所有这些浏览器都有其他更严重的漏洞，所以这个行为被改变了并且 jsonify() 现在支持序列化数组。”* [http://flask.pocoo.org/docs/1.0/security/#json-security](http://flask.pocoo.org/docs/1.0/security/#json-security)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-14T04:06:24.497

就像[soulseekah](https://stackoverflow.com/users/482864/soulseekah)注意到的那样，在这种情况下，[make_response](http://flask.pocoo.org/docs/api/#flask.Flask.make_response)可能是一个更好的选择。然后设置 mimetype 属性。

```
r = make_response( data )
r.mimetype = 'application/json'
return r 
```

# emacs - 启用“截断长行”时，如何在emacs中使用鼠标滚轮水平滚动？

> ID：11945526
> 
> 赞同：0
> 
> 时间：2012-08-14T03:50:06.960
> 
> 标签：emacs, scroll, mousewheel

在截断模式下，窗口中只显示部分行。我知道`C-x <`并且`C-x >`可以左右滚动，但我想要一种更方便的方式来处理水平滚动——就像我们用鼠标滚轮垂直滚动的方式（可能结合按下其他修改键）。有没有办法设置它`.emacs`？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:29:24.067

mwheel-scroll 内部调用

（funcall mwheel-向下滚动功能）

分别 向上

切换命令可能会将此功能替换为向左滚动。另一个地方...-对。

# optimization - 如何优化内网网站

> ID：11945527
> 
> 赞同：0
> 
> 时间：2012-08-14T03:50:07.283
> 
> 标签：optimization, web, system, intranet

我为我的校园内联网创建了一个网站（PHP、MySQL）。校园网络有一个代理和 Web 服务器，但我在工作组中使用了一台 PC 作为服务器，使用 XAMPP 1.7.7 进行测试。当我从同一工作组中的不同 PC 访问网站时，加载索引页面或其他页面需要 30 多秒。

使用的网络浏览器是 Firefox，它绕过了本地地址的代理服务器。index.php 页面只有 5KB 大小。在 index.php 中，如果有的话，我已经销毁了当前会话，数据库连接以检索最新的 03 新闻并调用两个外部 css 文件。每页使用的图像少于 5 张（总容量少于 5 KB）。XAMPP 处于默认设置中。

我可以做些什么来优化和减少加载时间。欢迎您提出意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:20:51.327

那很慢。您的页面不是那么大。如果页面在本地加载速度很快，请不要费心尝试进行更多优化。通过工作组复制文件需要多长时间？或者更好的是，将文件 FTP 到您的“服务器”？

您可以使用 tracert (http://support.microsoft.com/kb/162326) 来更好地了解减速的位置。

更一般地说，理想的解决方案实际上取决于您最终要实现的目标。XAMPP 显然更适合个人本地主机工作。您打开了端口并正确托管了所有设置，看来您的直接问题是需要进一步诊断的网络问题。

# iphone - 归档 iphone 时应用程序大小翻倍

> ID：11945529
> 
> 赞同：2
> 
> 时间：2012-08-14T03:50:31.653
> 
> 标签：iphone, ios, xcode, app-store

我检查了我的应用程序产品大小约为 10MB，但是当我构建它以进行归档时，它显示 Appstore 大小为 20MB，即它几乎翻了一番。但是当我在文件夹中看到存档时，它的大小仍然是 10MB，我不知道为什么会发生这种情况，因为它支持两种架构，即 armv6 和 armv7。如果我提交 20MB 的应用程序，我在 Appstore 上的最终大小会是多少。如果有人有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T13:07:28.260

iOS 应用商店服务器将加密您的应用程序包中的可执行二进制文件以供客户下载，从而使应用程序的可压缩性远低于您当前的存档。这是因为加密产生的随机位在任何地方都不像 armv6 或 armv7 机器代码那样可压缩。

因此，获得更真实的 App Store 下载大小的方法是从您的应用程序包中删除可执行文件，压缩包，记下 zip 大小，然后添加未压缩的可执行文件大小。

如果您不想混淆 C 代码中的大量静态数据，那么将这些静态数据移动到捆绑包中的数据文件可能有助于减少应用商店的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:58:17.987

您是否尝试过解压缩 ipa 文件（将 .ipa 重命名为 .zip）并查看 Payload？首先查找不需要的文件。如果您不进行干净的构建，那么有效负载将包含比您预期的更多的垃圾。此外，请根据发布版本（而不是调试版本）检查大小，因为两者之间的设置可能不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:25:25.153

Xcode 现在将您的调试符号（.dSYM 文件）与您的应用程序包（.ipa）一起保存，以便以后可以正确地符号化崩溃报告。.dSYM 文件往往很大，因此您的整个应用程序包 (.ipa) 可能比单独的应用程序 (.app) 大得多。归档应用程序时，您通常只会看到总 .ipa 大小。那时，可以很好地估计应用程序在 App Store 上的实际规模。

# android - 带有 HashMap 的 ListView 适配器

> ID：11945531
> 
> 赞同：1
> 
> 时间：2012-08-14T03:50:37.473
> 
> 标签：android, android-listview, hashmap, android-arrayadapter

我有一个带有文本视图和复选框的列表视图。文本值存储在 HashMap 中。从数据库中检索数据。地图键是 ID，地图值是位置。当我将 HashMap 传递给适配器时，它从位置 0（零）开始打印。因此，我得到一个空文本（没有值）并错过了 HashMap 中的一个值（最后一个）。我不能使用 HashMap 作为数据源吗？

编辑：这是代码

```
public class LocationActivity extends Activity{

myAdapter myA;
Map<Integer,String> locLables;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.locationmain);

    ListView listview = (ListView) findViewById(R.id.listView1);

    String selectQuery = "SELECT  * FROM " + DatabaseHandler.TABLE_LOCATIONLABLES;
    SQLiteDatabase db = new DatabaseHandler(this).getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    locLables = new HashMap<Integer, String>();

    if(cursor != null){
        if (cursor.moveToFirst()) {
            do {

                locLables.put(new Integer(cursor.getString(0)),cursor.getString(1));
                System.out.println(cursor.getString(0)+"  "+ cursor.getString(1));
            } while (cursor.moveToNext());
        }
    }
    cursor.close();db.close(); 
    //System.out.println(locLables);
    myA = new myAdapter(this, locLables, listview);
    listview.setAdapter(myA);

    listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            if(arg2 == 0 )
                arg2 = arg2+1;
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), locLables.get(arg2), Toast.LENGTH_SHORT).show();

        }
    });
} 
```

这是适配器类

```
class myAdapter extends BaseAdapter{

ListView listView;
Activity cntx;
Map<Integer,String> locations;
List<Integer> locids = new LinkedList<Integer>();

public myAdapter(Activity context,Map<Integer,String> locLables, ListView lv){
    cntx = context;
    locations = locLables;
    listView = lv;
    System.out.println(locations);
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return locations.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    View row=null;
    final int posi = position;

    LayoutInflater inflater=cntx.getLayoutInflater();
    row=inflater.inflate(R.layout.locationmain_entry, null);

    TextView tv = (TextView)row.findViewById(R.id.textView12);
    final CheckBox cb = (CheckBox)row.findViewById(R.id.checkBox12);

    if(locids.contains(posi))
        cb.setChecked(true);

    //here I get a null value as the first element and misses the last value..

        tv.setText(locations.get(position));

    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            // TODO Auto-generated method stub
            if(isChecked){
                System.out.println("Chedked" + posi+ locations.get(posi));
                //cb.setChecked(true);
                if(!locids.contains(posi))
                    locids.add(posi);
                //System.out.println(locids.get(posi));
            }else if(!isChecked){
                //cb.setChecked(false);
                if(locids.contains(posi))
                    locids.remove(new Integer(posi));
                System.out.println("NOt checked" +posi + locations.get(posi));
            }
        }
    });

    return row;
} 
```

它针对 Map 中的元素数量运行。由于它使用 0（按位置变量），它也错过了最后一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:41:55.553

**你能做的是**

```
ArrayList<Hashmap<Integer,String>> myList = new ArrayList<Hashmap<Integer,String>>();

 if(cursor != null){
    if (cursor.moveToFirst()) {
        do {
            locLables = new HashMap<Integer, String>();
            locLables.put(new Integer(cursor.getString(0)),cursor.getString(1));
            myList.add(locLables);
           } while (cursor.moveToNext());
    }
}
cursor.close();db.close(); 
myA = new myAdapter(this, myList, listview);
listview.setAdapter(myA); 
```

您必须更改**“myAdapter”**适配器的构造函数以保存“ArrayList> myList”而不是“Map locLables”。

这将有所帮助......让我知道问题是否仍然存在......

# ruby - Array.index(a) 不返回任何内容

> ID：11945532
> 
> 赞同：0
> 
> 时间：2012-08-14T03:50:40.377
> 
> 标签：ruby

编辑：现在全部修复。初学者的错误，但我认为我的故障排除对于我的初学者水平来说已经足够好了。但是我不记得要检查的最基本的事情。

我试图在数组中找到 X 的位置。根据一个网站，它应该像这样工作：

```
a = [ "a", "b", "c" , "d"]

a.index("d") 
```

但是，这不会自行返回任何内容。但是我添加了一个 if 语句：

```
a = [ "a", "b", "c" , "d"]

if a.index("d") == 3
  puts "ok"

else 

puts "error"

end 
```

这有效。然而，显然这不是最优的，因为我不会在 4 个数组元素之间猜测，而是在数千个元素之间进行猜测。第一个代码应该工作吗？如果不是，我如何获得数组编号？

第二个问题：在搜索这个值“d”（上面的代码）并得到它的位置之后。如何获取位置信息，将其放入一个整数中，以便对其应用数学运算。然后获取新数组？

此外，如果可以在此索引之外控制正在搜索的值，那也是最好的。如何使索引指向包含要搜索的内容的字符串？

谢谢和抱歉，我对编程完全陌生。到目前为止，我做得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:53:21.973

`a.index("d")`将偏移量返回到数组中：

```
a = [ "a", "b", "c" , "d"]
a.index("d") # => 3 
```

请记住，数组索引从 0 开始，而不是 1，因此`"d"`从索引 3 开始，而不是 4。

```
target_index = a.index("d")
puts target_index
# >> 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:55:15.380

这个对我有用。

您使用的是什么 ruby​​ 版本（`ruby -v`）。

我的代码（使用 ruby​​ 1.9.3）：

```
$ irb
1.9.3-p125 :001 > a = [ "a", "b", "c" , "d"]  => ["a", "b", "c", "d"] 
1.9.3-p125 :002 > a.index("d")  => 3 
```

获取“下一个”元素，例如获取“b”之后的下一个 1 元素：

```
a[a.index("b")+1]

=> "c" 
```

如您所见，oucrse "c" 位于位置 2（数组从零开始编号）

```
a.index(a[a.index("b")+1])
=> 2 
```

# java - 为下面列出的特定用例处理哈希图中的冲突

> ID：11945544
> 
> 赞同：0
> 
> 时间：2012-08-14T03:52:02.837
> 
> 标签：java, collision-detection

我编写了一个基于 java 的 Web 应用程序，现在很简单，因为我是这个领域的初学者。当用户在 jsp 页面中输入此人的姓名时，它会查找此人的电话号码。我现在使用的是哈希图，我创建了两个对象，人和数字，基本上地图是人与数字的关联。我将 person 作为对象的原因是稍后我计划向 person 对象添加更多信息。我还计划最终将关联移至数据库。**但是，在我有哈希图的这种特定情况下，如何处理“同名人员”的用例可以是两个不同的用户，因为根据我的哈希图，键是人员对象。具体来说，用户可以通过姓名查找此人。**我还考虑将系统生成的 id 添加到 person 对象以使其唯一，但这并不能解决两个人同名的用例，因为当用户查询电话号码时，他只会输入人名.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:01:18.660

最简单的解决方案是让您的值类型是人员列表，因此：

```
Map<String, List<Person>> map = new HashMap... 
```

听起来你的设计可以做一些工作。例如，当您进行原型设计（预数据库）时，是否有任何理由需要使用 HashMap？为什么不只存储 a `List<Person>`，并在每次要搜索时迭代列表？这也可以让您轻松搜索一个人的其他属性。

**编辑：**回应凤凰城的评论。

该方法是将具有给定名称的所有人的列表存储在地图内的列表中。

要添加一个新人，您需要检查一个人是否已经以他们的名字存在，如果还没有一个人，则创建一个空列表将其放入。[对不起，我手边没有编译器，所以没有编译或测试过这个，但想法应该是对的]

```
void add(Map<String, List<Person>> map, Person p) {

    if (!map.containsKey(p.name()) {
        map.put(p.name(), new ArrayList<Person>());
    } 
    // The map will always have a (possibly empty) list of people with a given name now
    map.get(p.name()).add(p);
} 
```

找人很容易。要打印所有具有给定名称的人：

```
void printPeople(BufferedWriter out, Map<String, List<Person>> map, String name) {
    for (Person p : map.get(name)) {
        out.println(p.toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:11:17.310

那这个呢？

```
Map<String, List<Person>> map = new HashMap<String, List<Person>>();

if(!map.contains(personName)){
    map.put(personName, new ArrayList<Person>());
}

// Construct Person person = new Person(personName, phoneNumber);

map.get(personName).add(person); 
```

您保留 Martin 建议的人员列表，并将值作为人员列表而不是单个人员。

在迭代时...

```
for(Person person : map.get(personName)){
    // Process person.getPhoneNumber();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T04:31:10.507

我在这里添加第二个答案。我的另一个答案显示了如何用 a 来实现它`Map`，但我认为这不值得。

如果您使用 a 是`HashMap`因为您担心性能，那么一旦您将数据库后端放入您提到的内容中，您就会解决这个问题。作为一般规则，不要花精力优化您知道无论如何都会丢弃的代码，或者不确定是否需要优化。

我的解决方案（等待真正的后端）是只使用一个列表。你不必担心你的`hashCode`算法是否正确，我怀疑它会显着变慢，除非你有成千上万的条目。

```
public class People {
    private List<Person> people = new ArrayList<Person>();

    public void add(Person p) {
        people.add(p);
    }

    public List<Person> findByName(String name) {
        List<Person> result = new ArrayList<Person>();
        for (Person p : people) {
            if (p.getName().equals(name)) {
                result.add(p);
            }
         }
         return result;
     } 
```

它比`Map`解决方案更简单、更清晰。

# javascript - Javascript：应该将 max 初始化为什么？

> ID：11945546
> 
> 赞同：1
> 
> 时间：2012-08-14T03:52:32.200
> 
> 标签：javascript

应该将 max 初始化为什么？我一直在努力解决它，但没有运气。

```
NUMBER_OF_INPUTS = 5;

var i;
var max;
var userInput; // Input from user

max = ???? ;
for(i=0; i<NUMBER_OF_INPUTS; i++)
{ userInput = parseInt(prompt('Enter input: '));
if (userInput > max)
max = userInput;
}

alert('Max: ' + max); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T03:54:50.343

怎么样[`-Infinity`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Infinity)？或者，您可以使用`null`, 和特殊情况：

```
if (max == null || userInput > max) {
    max = userInput;
} 
```

如果您想变得非常花哨，请根本不要自己编写循环。让我们[`Math.max`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max)做这项工作：

```
var i;
var userInputs = [];
var max;

for (i = 0; i<NUMBER_OF_INPUTS; i++)
{
    userInputs.push(parseInt(prompt('Enter input: '), 10));
                                                 // ↑↑↑↑ always pass the radix
                                                 // to parseInt()
}

max = Math.max.apply(null, userInputs); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:08:47.180

[`Number.NEGATIVE_INFINITY`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/NEGATIVE_INFINITY)可能是一个不错的选择，但实际上，您不必*将*其初始化为任何内容，还有其他几个选项。您可以“取消循环”第一次迭代，以便强制分配`max`：

```
NUMBER_OF_INPUTS = 5;
var i;
var max;
var userInput;

userInput = parseInt (prompt ('Enter input: '));
max = userInput;
for (i = 1; i < NUMBER_OF_INPUTS; i++) {
    userInput = parseInt (prompt ('Enter input: '));
    if (userInput > max)
        max = userInput;
}
alert('Max: ' + max); 
```

虽然这会导致一些代码重复，而且*看起来*很不干净。

或者，您可以使用`i`控制变量在循环的第一次迭代中强制它：

```
NUMBER_OF_INPUTS = 5;
var i;
var max;
var userInput;

for (i = 0; i < NUMBER_OF_INPUTS; i++) {
    userInput = parseInt (prompt ('Enter input: '));
    if ((i == 0) || (userInput > max))
        max = userInput;
}
alert('Max: ' + max); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:54:35.363

使用 Javascript[`Number.NEGATIVE_INFINITY`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/negative_infinity)常量。这样，任何用户输入都将大于变量初始化的值，因为`NEGATIVE_INIFINTY`它小于 JS 可以表示的所有其他数字。

# entity-framework - 使用导航属性的实体框架查询

> ID：11945552
> 
> 赞同：0
> 
> 时间：2012-08-14T03:53:27.530
> 
> 标签：entity-framework

用户有很多角色。角色有许多特权。我需要根据用户可能拥有的角色获取分配给用户的权限列表。我有这样的想法，但它给了我一个 IEnumerable of Privilege 的 IEnumerable：

```
List<Privilege> privileges = user.Roles.Select(r=>r.Privileges.Where(p=>p.IsActive)); 
```

如何使用导航属性来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:55:32.183

```
SelectMany 
```

当你去的时候，它会压平可枚举

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:18:50.663

试试这个：

```
user.Roles.SelectMany(r => r.Privileges).Where(p=>p.IsActive).ToList(); 
```

# java - 如何在不使用 selenium/webdriver 方法的情况下切换到新窗口

> ID：11945554
> 
> 赞同：3
> 
> 时间：2012-08-14T03:54:02.200
> 
> 标签：java, javascript, selenium, webdriver

目前，我正在使用的应用程序有许多工作流程，一个接一个地打开新窗口。我使用以下方式将焦点切换到新窗口：

```
for (String popUpHandle : driver.getWindowHandles()) {
driver.switchTo().window(popUpHandle);
if(driver.getCurrentUrl().equalsIgnoreCase(URL of the new window)
...
} 
```

同样，我将它与页面标题一起使用。使用 selenium.isElementPresent present 进入条件并在新窗口中执行某些操作。

上述三种解决方案工作正常，但在 IE 中在一个工作流程中花费太多时间，2-3 个窗口保持隐藏状态。

在我们单击某些链接或按钮后打开新窗口后立即切换焦点新窗口的任何指导，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T04:03:06.873

加快速度的一个技巧是始终忽略父窗口。所以做类似的事情：

```
//before any pop ups are open
String parentHandle = driver.getWindowHandle();

//after you have pop ups
for (String popUpHandle : driver.getWindowHandles()) {
  if(!popUpHandle.equals(parentHandle)){
    driver.switchTo().window(popUpHandle);
    if(driver.getCurrentUrl().equalsIgnoreCase(URL of the new window)){
      //do something here
    }
  }
} 
```

您也可以通过这种方式切换到最近打开的窗口，因为应该订购集合（* 我认为，目前无权访问 Selenium 设置来测试 *）：

```
String newWindowHandle = driver.getWindowHandles()[driver.getWindowHandles().length - 1];
driver.switchTo().window(newWindowHandle); 
```

最后，不确定您使用的是哪个版本的 Selenium，但最新的 IEDriver 明显更快： [http ://code.google.com/p/selenium/wiki/InternetExplorerDriver](http://code.google.com/p/selenium/wiki/InternetExplorerDriver)

# php - 按时间顺序对 MySQL 记录进行排序？

> ID：11945555
> 
> 赞同：0
> 
> 时间：2012-08-14T03:54:06.597
> 
> 标签：php, mysql, sorting

我在 MySQL 表中有一堆记录，每条记录都有一个日期属性 (mdY) 和一个存储为 hr:min:sec 的时间属性。我想根据日期和时间按时间顺序对它们进行排序。我将如何使用 PHP/MySQL 做到这一点？

**编辑**：如果您认为在数据库中存储我的日期和时间有更有效的方法，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:58:07.333

> 如果您认为在数据库中存储我的日期和时间有更有效的方法，请告诉我。

是的，`datetime`在`timestamp`你的表中创建一个字段，根据这个字段创建一个索引并按它排序。

查询：

```
/* add a column */
alter table `table` add column `created_at` datetime not null default "0000-00-00 00:00:00"
/* create an index */
alter table `table` add index `created_at` (`created_at`)
/* sort */
select * from `table` order by `created_at` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T04:03:00.733

如果您想根据日期和时间对它们进行排序，您可能应该考虑使用 TIMESTAMP。如果您使用该字段进行记录保存，您可以将默认值设置为 CURRENT_TIMESTAMP，MySQL 将自动为您插入此信息。

然后，像下面这样的简单查询将获取所有记录并按 TIMESTAMP 字段对它们进行排序。

```
SELECT * FROM table WHERE something = 'matches' ORDER BY thetimestampfield DESC 
```

示例 PHP 代码：

```
<?php
  // $c is a reference to mysql_connect() somewhere else in your code
  $q = "SELECT * FROM table WHERE something = 'matches' ORDER BY thetimestampfield DESC";
  $r = mysql_query($q, $c);
  while($row = mysql_fetch_assoc($r)) {
    // do your thing
  }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T03:59:25.247

您可以合并这两个属性，因为 MySQL 具有`DateTime`数据类型。`DateTime`由于您必须使用属性，因此您仍然可以通过连接两个属性并将其转换为实际值来对记录进行排序。

```
SELECT *
FROM tablename
ORDER BY STR_TO_DATE(CONCAT(`date`, ' ', `time`), '%m/%d/%Y') ASC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T03:58:22.867

将数据存储为时间戳或日期时间，然后使用 PHP 中的 date() 函数进行格式化会更有效。

```
$var1 = date("m.d.Y", timestamp);
$var1 = date("h:i:s", timestamp); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T03:59:13.057

好的，在你的 MySQL 表中，创建一个新列，不管名称是什么，类型为 DateTime 或 Timestamp，你可以将默认设置为 CURRENT TIMESTAMP 或类似的东西，我不记得具体叫什么了，但在 PHPMyAdmin 中很容易做到。然后，您可以按此订购。该列将自动填写。或者，您可以根据需要手动填写。然后你只需 ORDER BY( `ColumnName`);

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T03:59:19.360

为什么不将 Mysql 表字段数据类型指定为“DATETIME”，而从 php 中可以保存数据，例如`date("Y-m-d H:i:s")`？

您可以选择记录并按此日期字段以降序或升序对其进行排序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-14T04:00:17.687

一定要尽可能地尝试利用数据库。

在 SELECT 的末尾使用 ORDER BY date_field, time_field。

如果列实际上是字符串，则考虑创建一个新表并更改列类型，使其分别为日期和时间。STR_TO_DATE 函数可以将字符串转换为日期。如果您喜欢将它们组合成一个日期时间列。如果你想这样做，可能需要一个 CONCAT 或其他字符串函数。

# python - 使用 blobkey 删除实体而不删除相应的 blob

> ID：11945560
> 
> 赞同：0
> 
> 时间：2012-08-14T03:54:47.893
> 
> 标签：python, google-cloud-datastore, blob, blobstore

假设我在数据存储中有一些实体具有指向 blobstore 中特定 blob 的 blobkey 属性。现在，如果我删除这些实体，那么在没有任何东西指向它的情况下，blobstore 中的 blob 会发生什么？它会永远留在 blobstore 中吗？有没有可能以某种方式删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:06:22.917

该 blob 将一直保留，直到您明确[删除](https://developers.google.com/appengine/docs/python/blobstore/functions)它为止。

您应该仍然能够使用[blobinfo 类](https://developers.google.com/appengine/docs/python/blobstore/blobinfoclass)检索 blob 信息。

# ruby-on-rails - 将二进制数据库数据推送到heroku会被破坏

> ID：11945562
> 
> 赞同：0
> 
> 时间：2012-08-14T03:54:55.757
> 
> 标签：ruby-on-rails, database, heroku, taps

您可以使用 taps gem 将本地数据库推送到您的 Heroku 应用程序。命令是：

`heroku db:push`

除了推送二进制数据时，这对我来说很好。

数据变了。例如，这里是我本地二进制数据的前几个字符：`\x89PNG\r\n\x1A\n\x0`这是被推送后在 heroku 上的：`x89504e470d0a1a0a000`

似乎编码丢失了，或者数据没有转义..我不太确定。

~~我的本地数据库是 Sqlite3，远程数据库是 Postgres，但它适用于其他一切。~~我尝试在本地和远程使用 Postgres。

我尝试使用 --debug 标志运行，但没有任何输出似乎暗示了任何线索。

有没有人弄清楚这一点？

# android - ListView 的回收机制是如何工作的

> ID：11945563
> 
> 赞同：152
> 
> 时间：2012-08-14T03:54:56.450
> 
> 标签：android, android-listview, android-gridview

所以我之前遇到过这个问题，自然而然就在[这里](https://stackoverflow.com/questions/11919033/why-do-i-need-to-call-removeview-in-order-to-add-a-view-to-my-linearlayout/11920159#11920159)求助了。Luksprog 的回答很棒，因为我不知道 ListView 和 GridView 如何通过回收视图优化自身。因此，根据他的建议，我能够更改将视图添加到 GridView 的方式。问题是现在我有一些没有意义的东西。这是我`getView`的`BaseAdapter`：

* * *

```
public View getView(int position, View convertView, ViewGroup parent) {
        if(convertView == null) {
            LayoutInflater inflater = LayoutInflater.from(parent.getContext());
            convertView = inflater.inflate(R.layout.day_view_item, parent, false);
        }
        Log.d("DayViewActivity", "Position is: "+position);
        ((TextView)convertView.findViewById(R.id.day_hour_side)).setText(array[position]);
        LinearLayout layout = (LinearLayout)convertView.findViewById(R.id.day_event_layout);

        //layout.addView(new EventFrame(parent.getContext()));

        TextView create = new TextView(DayViewActivity.this);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(0, (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 62, getResources().getDisplayMetrics()), 1.0f);
        params.topMargin = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());
        params.bottomMargin = (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 1, getResources().getDisplayMetrics());
        create.setLayoutParams(params);
        create.setBackgroundColor(Color.BLUE);
        create.setText("Test"); 
        //the following is my original LinearLayout.LayoutParams for correctly setting the TextView Height
        //new LinearLayout.LayoutParams(0, (int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 60, getResources().getDisplayMetrics()), 1.0f)   
        if(position == 0) {
            Log.d("DayViewActivity", "This should only be running when position is 0\. The position is: "+position);
            layout.addView(create);
        }

        return convertView;
    }

} 
```

* * *

问题是当我滚动时，会发生这种情况，而不是在位置 0... 看起来像位置 6 和位置 8，加上它在位置 8 中放置了两个。现在我仍在尝试掌握使用 ListView 和 GridView 的窍门，所以我这样做了不明白为什么会这样。我提出这个问题的主要原因之一是帮助可能不了解 ListView 和 GridView 的回收 View，或者[本文](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)所说的方式，ScrapView 机制的其他人。

![在此处输入图像描述](../Images/528d6842e151cd8aca1ac855ce42a124.png)

**稍后编辑**

添加指向谷歌 IO 谈话的链接，基本上你只需要了解 ListView 是如何工作的。链接死在评论中。所以 user3427079 很好地更新了那个链接。[这](https://www.youtube.com/watch?v=N6YdwzAvwOA)是为了方便访问。

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2013-01-01T07:24:30.057

最初，我也不知道listview回收和convertview使用机制，但经过一整天的研究，通过参考[android.amberfog中的图像，我非常了解listview的机制](http://android.amberfog.com/?p=296) ![在此处输入图像描述](../Images/820c94a69c76da041d0f320ee77d00f9.png)

每当您的列表视图被适配器填充时，它基本上会显示列表视图可以在屏幕上显示的**行**数，并且即使您滚动浏览列表，行数也不会增加。这是 android 使用的技巧，以便 listview 更有效和更快地工作。现在 listview 引用图像的内幕，如您所见，最初 listview 有 7 个可见项目，然后，如果您向上滚动直到项目 1 不再可见，getView() 将此视图（即 item1）传递给回收站，你可以使用

```
System.out.println("getview:"+position+" "+convertView); 
```

在你的里面

```
public View getView(final int position, View convertView, ViewGroup parent)
{
    System.out.println("getview:"+position+" "+convertView);
    ViewHolder holder;
    View row=convertView;
    if(row==null)
    {
        LayoutInflater inflater=((Activity)context).getLayoutInflater();
        row=inflater.inflate(layoutResourceId, parent,false);

        holder=new PakistaniDrama();
        holder.tvDramaName=(TextView)row.findViewById(R.id.dramaName);
        holder.cbCheck=(CheckBox)row.findViewById(R.id.checkBox);

        row.setTag(holder);

    }
    else
    {
        holder=(PakistaniDrama)row.getTag();
    }
            holder.tvDramaName.setText(dramaList.get(position).getDramaName());
    holder.cbCheck.setChecked(checks.get(position));
            return row;
    } 
```

您会在您的 logcat 中注意到，最初，convertview 对于所有可见行都是空的，因为最初在回收器中没有视图（即项目），所以您的 getView() 为每个可见项目创建一个新视图，但是当您向上滚动并且项目 1 移出屏幕时，它将以其当前状态发送到**回收**器（例如 TextView 'text' 或在我的情况下，如果选中复选框，它将与视图相关联并且存储在回收站中）。

现在，当您向上/向下滚动时，您的列表视图不会创建新视图，它将使用回收站中的视图。在您的**Logcat**中，您会注意到“convertView”不为空，这是因为您的新项目 8 将使用 convertview 绘制，即基本上它从回收站获取项目 1 视图并在其位置膨胀项目 8，您可以观察在我的代码中。如果您有一个复选框，并且您在位置 0 选中它（假设 item1 有一个复选框并且您选中了它），那么当您向下滚动时，您会看到第 8 项复选框已经选中，这就是为什么 listview 重新使用相同的视图，由于性能优化，不会为您创建新的。

**重要的事**

**1** . 永远不要将您的列表视图的`layout_height`and设置为，因为这将迫使您的适配器获取一些子项来测量要在列表视图中绘制的视图的高度，并且可能导致一些意外行为，例如即使列表未滚动也返回转换视图。始终使用或修复宽度/高度。`layout_width``wrap_content``getView()``match_parent`

**2** . 如果您想在列表视图之后使用一些布局或视图，并且如果我将列表视图设置`layout_height`为`fill_parent`视图后列表视图将不会显示在屏幕下方，那么您可能会想到问题，因此最好将您的列表视图放在布局。例如线性布局，并根据您的要求设置该布局的高度和宽度，并将列表视图的**高度**和**宽度**属性设置为您的布局（例如，如果您的布局宽度为**320**，高度为**280）**然后您的列表视图应该有相同的**高度**和**宽度**. 这将告诉 getView() 要呈现的视图的确切高度和宽度，并且 getView() 不会一次又一次地调用一些随机行，并且不会发生其他问题，例如在滚动之前返回转换视图，我有测试这是我自己，除非我的列表视图在 lineaLayout 内，否则它也会遇到重复视图调用和转换视图等问题，将 Listview 放入 LinearLayout 对我来说就像魔术一样。（不知道为什么）

```
01-01 14:49:36.606: I/System.out(13871): getview 0 null
01-01 14:49:36.636: I/System.out(13871): getview 0 android.widget.RelativeLayout@406082c0
01-01 14:49:36.636: I/System.out(13871): getview 1 android.widget.RelativeLayout@406082c0
01-01 14:49:36.646: I/System.out(13871): getview 2 android.widget.RelativeLayout@406082c0
01-01 14:49:36.646: I/System.out(13871): getview 3 android.widget.RelativeLayout@406082c0
01-01 14:49:36.656: I/System.out(13871): getview 4 android.widget.RelativeLayout@406082c0
01-01 14:49:36.666: I/System.out(13871): getview 5 android.widget.RelativeLayout@406082c0
01-01 14:49:36.666: I/System.out(13871): getview 0 android.widget.RelativeLayout@406082c0
01-01 14:49:36.696: I/System.out(13871): getview 0 android.widget.RelativeLayout@406082c0
01-01 14:49:36.706: I/System.out(13871): getview 1 null
01-01 14:49:36.736: I/System.out(13871): getview 2 null
01-01 14:49:36.756: I/System.out(13871): getview 3 null
01-01 14:49:36.776: I/System.out(13871): getview 4 null 
```

但现在它解决了，我知道，我不太擅长解释，但我花了一整天的时间来理解，所以我认为像我这样的其他初学者可以从我的经验中得到帮助，我希望现在你们会有一点理解**ListView**框架是如何工作的，因为它真的很乱而且很棘手，所以初学者发现理解它有太多问题

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-14T10:56:11.737

请注意，在 Holder 模式中，如果您在 Holder 对象中设置位置，您应该每次都设置它，例如：

```
@Override
public final View getView(int position, View view, ViewGroup parent) {
    Holder holder = null;
    if (view == null) {
        LayoutInflater inflater = (LayoutInflater) App.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(getContainerView(), parent, false);
        holder = getHolder(position, view, parent);
        holder.setTag(tag);
        view.setTag(holder);
    } else {
        holder = (Holder) view.getTag();
    }
    holder.position = position;
    draw(holder);
    return holder.getView();
} 
```

这是一个抽象类的例子，其中

```
getHolder(position, view, parent); 
```

做所有的设置操作

```
ImageViews, TextViews, etc.. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-19T13:24:35.440

使用 Holder 模式，您可以实现您想要的：

[您可以在此处找到此模式的描述：](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)

当您向下滚动屏幕并且上面的列表视图项目被隐藏时，会发生列表视图的回收。它们被重用于显示新的列表视图项。

# ruby - 使用 XMPP4r 获取 RID 和 SID

> ID：11945565
> 
> 赞同：2
> 
> 时间：2012-08-14T03:55:03.580
> 
> 标签：ruby, xmpp4r

在使用 XMPP4r gem 连接到我的 jabber 服务器后，我遇到了如何获取 SID 和 RID 的问题。我可以成功连接，我只需要 SID 和 RID 将其传递给 javascript。

我在[这里](http://home.gna.org/xmpp4r/rdoc/)搜索了文档，但对我没有多大帮助。

任何帮助或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T06:18:57.953

以防万一其他人将来会遇到同样的障碍，我通过直接访问实例变量来解决这个问题，如下所示：

首先，需要httpbinding客户端，而不是客户端

```
require 'xmpp4r/httpbinding/client' 
```

然后通过做连接

```
@client = Jabber::HTTPBinding::Client.new("your_jabber_id_with/resource")
@client.connect("your_bosh_url")
@client.auth("your_jabber_password") 
```

实例变量是@http_sid 和@http_rid，因为它们无法访问，所以我做了

```
sid = @client.instance_variable_get("@http_sid")
rid = @client.instance_variable_get("@http_rid") 
```

然后我将这些变量存储在我的会话中，以便我可以在我的 Strophe.js 客户端上使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T22:44:51.497

这就是我为所有 Openfire 用户所做的：

```
require 'xmpp4r'
require 'xmpp4r/httpbinding/client'

class PageController < ApplicationController
  def index

    Jabber::debug = true
    @client = Jabber::HTTPBinding::Client.new('sankalpsingha@sankalpmacbook') # This is the JID
    @client.connect('http://localhost:7070/http-bind/') # This is the bosh address
    @client.auth('sankalp') # This is the password 
    @sid = @client.instance_variable_get('@http_sid')
    @rid = @client.instance_variable_get('@http_rid')

  end
end 
```

# ios - 斯坦福 cs193p 2011 秋季课程在第 9 讲中犯了一个错误？

> ID：11945567
> 
> 赞同：0
> 
> 时间：2012-08-14T03:55:11.700
> 
> 标签：ios, cs193p

第9课老师说numberOfSectionsInTableView:方法默认返回1，但是我自己创建项目的时候发现默认返回0，导致我的table view cell消失了！我发现问题出在哪里，并通过设置 numberOfSectionsInTableView: return 1 来解决它，问题消失了。那么，这是否意味着斯坦福犯了一个错误？

当我在 .m 文件中添加 UITableViewController 的新子类时，Xcode 生成了以下代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 0;
} 
```

顺便说一句，我正在使用 Xcode 4.3.3 ...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T04:19:50.833

您误解了默认值的含义。当苹果或老师或某人提到一个方法的默认返回值是什么时，这意味着只要该方法没有实现，它就会以这种方式运行。

当您编写自己的方法时，您返回的值为 0。如果您使用模板，则该模板将覆盖该方法以将其设置为 0。如果您想要默认行为，只需删除该方法。

这些委托方法在大多数情况下确实具有默认值。控制单击头文件上的 Delegate 实现，您将看到 @Optional 方法，它们是大多数时间具有默认值的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:17:13.410

我相信“默认”它们的意思是，如果您`UITableViewDataSource`没有实现`numberOfSectionsInTableView:`，则假定值为 1。Xcode 模板可能包含上述代码（返回 0），但这与框架的默认值不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:06:58.403

恐怕我们的斯坦福朋友是对的。默认值为 1。我很少包含此方法。可以肯定的是，我通过从我正在开发的应用程序中删除该方法来测试它，果然，只有 1 个部分。我已经开发了从 1.0 版到当前版本的应用程序。

确保您的代表设置为正确的类。并确保您的 xib 具有文件所有者的正确类名。那个让我偶尔。

# caching - clojure.core.cache 只是无法使用他们自己的示例

> ID：11945574
> 
> 赞同：8
> 
> 时间：2012-08-14T03:56:27.650
> 
> 标签：caching, clojure, core, leiningen

我刚刚在我的项目中添加了 clojure.core.cache 0.6.1，做了一个 lein deps，在这里遵循了非常简短和清晰的示例：[https](https://github.com/clojure/core.cache) ://github.com/clojure/core.cache它只是完全不起作用.

例子：

```
$lein repl
REPL started; server listening on localhost port 20513
user=> (require '[clojure.core.cache :as cache])
nil
user=> (def fifoc (cache/fifo-cache-factory {}))
#'user/fifoc
user=> (cache/has? fifoc :foo)
false
user=> (cache/miss fifoc :foo "bar")
{:foo "bar"}
user=> (cache/has? fifoc :foo)
false 
```

这里出了什么问题？我完全错过了重点吗？我已经尝试过使用其他缓存后端，结果都相同。尝试使用不同的键、不同的值、不同的命名空间、不同的别名 - nada。运行测试给了我这个：

```
$ lein test clojure.core.cache.tests

Testing clojure.core.cache.tests

Ran 13 tests containing 273 assertions.
0 failures, 0 errors. 
```

这让这一切变得更加神秘。我查看了测试，虽然它们：导入缓存后端并以 java 方式实例化它们（miss (BasicCache. {}) ...），我也尝试过，但对我来说也以完全相同的方式失败。

在我实施一个可行的方法之前有什么帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T04:35:32.943

`cache/miss`返回一个新的缓存对象，您需要将其用于进一步的操作。

前任：

```
user=> (cache/has? (cache/miss fifoc :foo "bar") :foo)
true 
```

您的示例变为：

```
user=> (def fifoc (atom (cache/fifo-cache-factory {})))
#'user/fifoc
user=> (swap! fifoc  #(cache/miss % :foo "bar"))
{:foo "bar"}
user=> (cache/has? @fifoc :foo)
true 
```

# c++ - 如何更改 Visual Studio 中的默认宏路径

> ID：11945575
> 
> 赞同：1
> 
> 时间：2012-08-14T03:57:01.780
> 
> 标签：c++, visual-studio

宏喜欢 $(Configuration) 是解决方案中的相对目录，我想将其更改为绝对路径。

我不想添加宏或环境变量，我只想更改默认宏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T11:09:55.407

1.  从项目属性>链接器>附加库目录>宏这将允许您更改宏。
2.  使用批处理文件。

# java - 如何在 Java 中创建受密码保护的 Excel？

> ID：11945581
> 
> 赞同：4
> 
> 时间：2012-08-14T03:58:05.447
> 
> 标签：java, excel, passwords

在 java 中，我需要创建一个没有任何第三方 jar 的受密码保护的 excel。

没有任何第三方 api 我们可以在 java 中创建 excel 文件。因为 xls 文档类似于 html 文档，而 xlsx 文件是一个 zip 文件，而这个 zip 包含许多 xml。

对于这里的加密，一些信息可用 [http://chicago.sourceforge.net/devel/docs/excel/encrypt.html](http://chicago.sourceforge.net/devel/docs/excel/encrypt.html)

但我不知道如何实现这种加密。我能怎么做 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T04:09:29.113

如果没有第三方，您将无法创建 Excel 文档`JARs`。

这是因为 Excel 归 Microsoft(R) 所有并拥有版权。他们确实有可用的 API，人们已经将它应用到 Java，其中之一是[JExcelApi](http://jexcelapi.sourceforge.net/)。

但是 JExcelApi 不支持密码保护。为此，我只知道商业上可用的产品，例如[Aspose.Total for Java](http://www.aspose.com/categories/java-components/aspose.total-for-java/default.aspx)。但是，请记住使用 Java 很容易绕过密码保护：（[请参阅此处）](http://k2java.blogspot.com.au/2011/06/reading-password-protected-excel-file.html)。可能值得重新考虑您如何进行密码保护:)

**答案总结：** Java 本身并没有内置的方式来操作 Excel；您需要使用外部库。

# c# - Remove single event handler from a user control

> ID：11945600
> 
> 赞同：0
> 
> 时间：2012-08-14T04:00:01.760
> 
> 标签：c#, events, user-controls

Say I have two user controls and I want to remove an event handler from one instance of the control.

To illustrate I've just made it a button as user control:

```
public partial class SuperButton : UserControl
{
public SuperButton()
{
    InitializeComponent();
}

private void button1_MouseEnter(object sender, EventArgs e)
{
    button1.BackColor = Color.CadetBlue;
}

private void button1_MouseLeave(object sender, EventArgs e)
{
    button1.BackColor = Color.Gainsboro;
}
} 
```

**I've added two super buttons to the form and I want to disable the MouseEnter event firing for SuperButton2.**

```
public partial class Form1 : Form
{
public Form1()
{
    InitializeComponent();
    superButton2.RemoveEvents<SuperButton>("EventMouseEnter");
}
}

public static class EventExtension
{
public static void RemoveEvents<T>(this Control target, string Event)
{
    FieldInfo f1 = typeof(Control).GetField(Event, BindingFlags.Static | BindingFlags.NonPublic);
    object obj = f1.GetValue(target.CastTo<T>());
    PropertyInfo pi = target.CastTo<T>().GetType().GetProperty("Events", BindingFlags.NonPublic | BindingFlags.Instance);
    EventHandlerList list = (EventHandlerList)pi.GetValue(target.CastTo<T>(), null);
    list.RemoveHandler(obj, list[obj]);
}

public static T CastTo<T>(this object objectToCast)
{
    return (T)objectToCast;
}
} 
```

The code runs but it doesn't work - the MouseEnter and Leave events still fire. I'm looking to do something like this:

superButton2.MouseEnter -= xyz.MouseEnter;

**Update:** Read this comments questions...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:09:53.510

In your case, you don't need to remove *all* event handlers at once, just the specific one you're interested in. Use `-=` to remove a handler in the same way you use `+=` to add one:

```
button1.MouseEnter -= button1_MouseEnter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:03:04.383

Why not just set `superButton2.MouseEnter = null;`? That should do the trick until somewhere `MouseEnter` is assigned a value.

Just for an update, another way to handle it, and perfectly legal :)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace TestControls
{
    class SimpleButton:Button
    {
        public bool IgnoreMouseEnter { get; set; }

        public SimpleButton()
        {
            this.IgnoreMouseEnter = false;
        }

        protected override void OnMouseEnter(EventArgs e)
        {
            Debug.Print("this.IgnoreMouseEnter = {0}", this.IgnoreMouseEnter);

            if (this.IgnoreMouseEnter == false)
            {
                base.OnMouseEnter(e);
            }
        }
    }
} 
```

# django - 即时创建新表

> ID：11945601
> 
> 赞同：2
> 
> 时间：2012-08-14T04:00:06.220
> 
> 标签：django

我是 Django plotform 的新手。我正在尝试编写一个基本上接受 post 方法的程序。传入数据的内容是`storename, bookname, bookserial`。该部分已经实施并且运行良好。当我发布诸如`storename=John's shopping center, bookname=Love is beatiful, bookserial=123`. 它创建一个表并将这些东西保存到一个表中。但是，问题是我不仅要为每个商店创建一个表。因为，我可以有多个`storename`，每个商店都应该有自己的桌子。当我`storename`即时发布时，它应该检查`storename`，然后如果它的表已经创建，`bookname`并且`bookserial`应该插入它的表。如果没有，则应创建一个新表，然后将传入的数据插入新表。新的表名应该是`storename`以及。所以，正如我所说，我只需要学习如何在运行中创建新表。你能帮我怎么做吗，任何意见和想法表示赞赏....

一个清楚的例子，

```
Table-1=John's shopping center
    bookname=Love is beatiful
    bookserial=123

  Table-2= John's shopping center-2
     bookname=Time is important
     bookserial=456 
```

因此，每个购物中心的模型都是相同的，但每个 sopping center 是一个带有购物中心名称的不同表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:44:39.263

在传统意义上，在 django 中动态创建具体的表是不可能的。模型必须注册为应用程序启动的一部分，以便 ORM 可以正确管理所有关系。考虑一下如果您定义了一个新模型，该模型为其他模型设置了约束或反向引用，会发生什么情况。那些其他模型，即类，已经设置并在内存中。他们不能再通过他们的元类步骤来连接新的关系。你可以很容易地破坏东西。

您的选择仅限于涉及可以动态描述不同实体的几个表的解决方案，或者使用不关心模式并允许您随时存储任何内容的 nosql 后端。

有关详细信息，请参阅此问答：[Django 动态模型字段](https://stackoverflow.com/questions/7933596/django-dynamic-model-fields/7934577#7934577)

动态创建具体表格的唯一方法是让 django 应用程序完全重新启动以作为响应。

# android - 使用 JavaMail API 发送邮件失败

> ID：11945602
> 
> 赞同：4
> 
> 时间：2012-08-14T04:00:11.513
> 
> 标签：android, email, exception, exception-handling, gmail

我有以下代码试图在后台发送电子邮件。我已经使用 textview 来查看异常。但是，虽然 textview 中没有显示任何内容，但我也无法收到邮件。所以我不确定邮件是否已成功发送。任何人都可以帮助我吗？

根据建议，我修改了我的程序如下：

新发件人.java

```
public class Sender extends Activity {
    Button Send;
    TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sender);

        Send = (Button) findViewById(R.id.mail);
        text = (TextView) findViewById(R.id.textView1);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
        .permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        Send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new SendMail().execute();
            }
        });

    }

    private class SendMail extends AsyncTask<String, Void, String> 
    { 
        ProgressDialog pd = null;
        String error = null;
        Integer result;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(Sender.this);
            pd.setTitle("Uploading");
            pd.setMessage("Uploading logs. Please wait");
            pd.setCancelable(false);
            pd.show();
        }

        @Override 
        protected String doInBackground(String... params) { 
            // TODO Auto-generated method stub 

            MailSender sender = new MailSender("me@gmail.com", "password"); 

            String[] toAddress = {"me@gmail.com"};
            sender.setTo(toAddress);
            sender.setFrom("me@gmail.com");
            sender.setSubject("Test mail");
            sender.setBody("This is the mail body");
            try {
                if(sender.send()) {
                    System.out.println("Message sent");
                    result = 1;
                } else {
                    result = 2;
                }
            } catch (Exception e) {   
                error = e.getMessage();
                Log.e("SendMail", e.getMessage(), e);    
            }

            result = 3; 
            return null;
        } 

        protected void onPostExecute() {
            pd.dismiss();
            if(error!=null) {
                text.setText(error);
            }
            if(result==1) {
                Toast.makeText(Sender.this,
                    "Email was sent successfully.", Toast.LENGTH_LONG)
                    .show();
            } else if(result==2) {
                Toast.makeText(Sender.this,
                        "Email was not sent.", Toast.LENGTH_LONG).show();
            } else if(result==3) {
                Toast.makeText(Sender.this,
                        "There was a problem sending the email.",
                        Toast.LENGTH_LONG).show();
            }
        }
    }   
} 
```

新的 MailSender.java

```
public class MailSender extends Authenticator {
    private String user;
    private String password;

    private String [] to;
    private String from;

    private String port;
    private String sport;

    private String host;

    private String subject;
    private String body;

    private boolean auth;
    private boolean debuggable;

    private Multipart multi;

    public MailSender(){
        host = "smtp.gmail.com";
        port = "465";
        sport = "465";

        user = "";
        password = "";
        from = "";
        subject = "";
        body = "";

        debuggable = false;
        auth = true;

        multi = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
        CommandMap.setDefaultCommandMap(mc); 
    }

    public MailSender(String user, String password){
        this();      
        user = user;
        password = password;   
    }

    public boolean send() throws Exception {
        Properties props = setProperties();

        try{
            Session session = Session.getInstance(props, this);
            session.setDebug(true);

            MimeMessage msg = new MimeMessage(session);

            msg.setFrom(new InternetAddress(from));

            InternetAddress[] addressTo = new InternetAddress[to.length];
            for(int i=0; i<to.length; i++){
                addressTo[i] = new InternetAddress(to[i]);
            }

            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);
            msg.setSubject(subject);
            msg.setSentDate(new Date());

            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setText(body);
            multi.addBodyPart(messageBodyPart);

            msg.setContent(multi);

            Transport transport = session.getTransport("smtps");
            transport.connect(host, 465, user, password);
            transport.sendMessage(msg, msg.getAllRecipients());
            transport.close();
            return true;
        } catch (Exception e) {
            return false;
        }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);

        multi.addBodyPart(messageBodyPart);
    }

    @Override 
      public PasswordAuthentication getPasswordAuthentication() { 
        return new PasswordAuthentication(user, password); 
      }

    private Properties setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", host);

        if(debuggable) {
            props.put("mail.debug", "true");
        }

        if(auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", port);
        props.put("mail.smtp.socketFactory.port", sport);
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        return props;
    }

    public void setTo(String[] toAddress) {
        this.to = toAddress;
    }

    public void setFrom(String fromAddress) {
        this.from = fromAddress;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public void setBody(String body) { 
        this.body = body; 
    }
} 
```

更改程序后，当我单击按钮时，它会停止在执行前状态，显示“正在上传日志。请稍候”。邮件无法发出。

在错误日志中：

```
08-14 16:26:29.872: I/System.out(22439): DEBUG: setDebug: JavaMail version 1.4.1
08-14 16:26:29.888: I/System.out(22439): DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc.,1.4.1]
08-14 16:26:29.896: I/System.out(22439): DEBUG SMTP: useEhlo true, useAuth false
08-14 16:26:29.896: I/System.out(22439): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true
08-14 16:26:30.568: I/System.out(22439): 220 mx.google.com ESMTP nq6sm593334pbc.56
08-14 16:26:30.568: I/System.out(22439): DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
08-14 16:26:30.568: I/System.out(22439): EHLO localhost
08-14 16:26:30.716: I/System.out(22439): 250-mx.google.com at your service, [202.155.209.250]
08-14 16:26:30.716: I/System.out(22439): 250-SIZE 35882577
08-14 16:26:30.716: I/System.out(22439): 250-8BITMIME
08-14 16:26:30.716: I/System.out(22439): 250-AUTH LOGIN PLAIN XOAUTH
08-14 16:26:30.716: I/System.out(22439): 250 ENHANCEDSTATUSCODES
08-14 16:26:30.716: I/System.out(22439): DEBUG SMTP: Found extension "SIZE", arg "35882577"
08-14 16:26:30.716: I/System.out(22439): DEBUG SMTP: Found extension "8BITMIME", arg ""
08-14 16:26:30.716: I/System.out(22439): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
08-14 16:26:30.716: I/System.out(22439): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
08-14 16:26:30.716: I/System.out(22439): DEBUG SMTP: Attempt to authenticate
08-14 16:26:30.724: I/System.out(22439): AUTH LOGIN
08-14 16:26:30.872: I/System.out(22439): 334 VXNlcm5hbWU6
08-14 16:26:30.872: I/System.out(22439): 
08-14 16:26:31.021: I/System.out(22439): 334 UGFzc3dvcmQ6
08-14 16:26:31.021: I/System.out(22439): 
08-14 16:26:31.169: I/System.out(22439): 334 UGFzc3dvcmQ6
08-14 16:26:31.177: I/System.out(22439): DEBUG SMTP: useEhlo true, useAuth false
08-14 16:26:31.177: I/System.out(22439): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true
08-14 16:26:31.552: D/dalvikvm(22439): GC_CONCURRENT freed 341K, 4% free 11097K/11527K, paused 13ms+3ms, total 37ms
08-14 16:26:31.794: I/System.out(22439): 220 mx.google.com ESMTP st6sm593199pbc.58
08-14 16:26:31.794: I/System.out(22439): DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
08-14 16:26:31.794: I/System.out(22439): EHLO localhost
08-14 16:26:31.943: I/System.out(22439): 250-mx.google.com at your service, [202.155.209.250]
08-14 16:26:31.943: I/System.out(22439): 250-SIZE 35882577
08-14 16:26:31.943: I/System.out(22439): 250-8BITMIME
08-14 16:26:31.943: I/System.out(22439): 250-AUTH LOGIN PLAIN XOAUTH
08-14 16:26:31.943: I/System.out(22439): 250 ENHANCEDSTATUSCODES
08-14 16:26:31.950: I/System.out(22439): DEBUG SMTP: Found extension "SIZE", arg "35882577"
08-14 16:26:31.950: I/System.out(22439): DEBUG SMTP: Found extension "8BITMIME", arg ""
08-14 16:26:31.950: I/System.out(22439): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
08-14 16:26:31.950: I/System.out(22439): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
08-14 16:26:31.950: I/System.out(22439): DEBUG SMTP: Attempt to authenticate
08-14 16:26:31.950: I/System.out(22439): AUTH LOGIN
08-14 16:26:32.099: I/System.out(22439): 334 VXNlcm5hbWU6
08-14 16:26:32.099: I/System.out(22439): 
08-14 16:26:32.247: I/System.out(22439): 334 UGFzc3dvcmQ6
08-14 16:26:32.247: I/System.out(22439): 
08-14 16:26:32.403: I/System.out(22439): 334 UGFzc3dvcmQ6
08-14 16:27:00.200: I/Choreographer(22439): Skipped 35 frames!  The application may be doing too much work on its main thread. 
```

由于它不起作用，所以我尝试隐藏 onpreexecute 功能，但没有任何变化，无法发送邮件，以下是错误日志中的消息：

```
08-14 16:31:18.958: I/System.out(22759): DEBUG: setDebug: JavaMail version 1.4.1
08-14 16:31:18.974: I/System.out(22759): DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc.,1.4.1]
08-14 16:31:18.974: I/System.out(22759): DEBUG SMTP: useEhlo true, useAuth false
08-14 16:31:18.974: I/System.out(22759): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true
08-14 16:31:19.739: I/System.out(22759): 220 mx.google.com ESMTP og7sm597805pbb.62
08-14 16:31:19.739: I/System.out(22759): DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
08-14 16:31:19.739: I/System.out(22759): EHLO localhost
08-14 16:31:19.888: I/System.out(22759): 250-mx.google.com at your service, [202.155.209.250]
08-14 16:31:19.888: I/System.out(22759): 250-SIZE 35882577
08-14 16:31:19.888: I/System.out(22759): 250-8BITMIME
08-14 16:31:19.888: I/System.out(22759): 250-AUTH LOGIN PLAIN XOAUTH
08-14 16:31:19.888: I/System.out(22759): 250 ENHANCEDSTATUSCODES
08-14 16:31:19.888: I/System.out(22759): DEBUG SMTP: Found extension "SIZE", arg "35882577"
08-14 16:31:19.888: I/System.out(22759): DEBUG SMTP: Found extension "8BITMIME", arg ""
08-14 16:31:19.888: I/System.out(22759): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
08-14 16:31:19.888: I/System.out(22759): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
08-14 16:31:19.888: I/System.out(22759): DEBUG SMTP: Attempt to authenticate
08-14 16:31:19.896: I/System.out(22759): AUTH LOGIN
08-14 16:31:20.044: I/System.out(22759): 334 VXNlcm5hbWU6
08-14 16:31:20.044: I/System.out(22759): 
08-14 16:31:20.185: I/System.out(22759): 334 UGFzc3dvcmQ6
08-14 16:31:20.185: I/System.out(22759): 
08-14 16:31:20.341: I/System.out(22759): 334 UGFzc3dvcmQ6
08-14 16:31:20.341: I/System.out(22759): DEBUG SMTP: useEhlo true, useAuth false
08-14 16:31:20.341: I/System.out(22759): DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 465, isSSL true
08-14 16:31:20.786: I/System.out(22759): 220 mx.google.com ESMTP og7sm597845pbb.62
08-14 16:31:20.786: I/System.out(22759): DEBUG SMTP: connected to host "smtp.gmail.com", port: 465
08-14 16:31:20.786: I/System.out(22759): EHLO localhost
08-14 16:31:20.935: I/System.out(22759): 250-mx.google.com at your service, [202.155.209.250]
08-14 16:31:20.935: I/System.out(22759): 250-SIZE 35882577
08-14 16:31:20.935: I/System.out(22759): 250-8BITMIME
08-14 16:31:20.935: I/System.out(22759): 250-AUTH LOGIN PLAIN XOAUTH
08-14 16:31:20.935: I/System.out(22759): 250 ENHANCEDSTATUSCODES
08-14 16:31:20.943: I/System.out(22759): DEBUG SMTP: Found extension "SIZE", arg "35882577"
08-14 16:31:20.943: I/System.out(22759): DEBUG SMTP: Found extension "8BITMIME", arg ""
08-14 16:31:20.943: I/System.out(22759): DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH"
08-14 16:31:20.943: I/System.out(22759): DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
08-14 16:31:20.943: I/System.out(22759): DEBUG SMTP: Attempt to authenticate
08-14 16:31:20.943: I/System.out(22759): AUTH LOGIN
08-14 16:31:21.091: I/System.out(22759): 334 VXNlcm5hbWU6
08-14 16:31:21.091: I/System.out(22759): 
08-14 16:31:21.239: I/System.out(22759): 334 UGFzc3dvcmQ6
08-14 16:31:21.239: I/System.out(22759): 
08-14 16:31:21.380: I/System.out(22759): 334 UGFzc3dvcmQ6
08-14 16:31:49.357: W/IInputConnectionWrapper(22759): clearMetaKeyStates on inactive InputConnection 
```

我已经在AsyncTask中进行了发送操作，请问为什么还是不行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T05:59:43.590

如日志所示，您正在从主 UI 线程调用网络相关任务。您必须使用`AsyncTask`这些通信。`StrictMode`并通过做删除

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
    .permitAll().build();

StrictMode.setThreadPolicy(policy); 
```

另请参阅我在这篇文章中关于[JavaMail API 使用的](https://stackoverflow.com/questions/11340023/connecting-directly-to-gmail-with-android/11340883#11340883)回答。

**编辑：**在此处添加了代码内联包 com.max.mactest；

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class Sender extends Activity {
    Button Send;
    TextView text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_login);

        Send = (Button) findViewById(R.id.cmdDoLogin);
        text = (TextView) findViewById(R.id.textView2);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
        .permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        Send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                new SendMail().execute();
            }
        });

    }

    private class SendMail extends AsyncTask<String, Void, Integer> 
    { 
        ProgressDialog pd = null;
        String error = null;
        Integer result;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(Sender.this);
            pd.setTitle("Sending Mail");
            pd.setMessage("Please wait...");
            pd.setCancelable(false);
            pd.show();
        }

        @Override 
        protected Integer doInBackground(String... params) { 
            // TODO Auto-generated method stub 

            MailSender sender = new MailSender("yourmail@gmail.com", "yourpassword"); 

            sender.setTo(new String[]{"tomail@gmail.com"});
            sender.setFrom("yourmail@gmail.com");
            sender.setSubject("Test mail");
            sender.setBody("This is the mail body");
            try {
                if(sender.send()) {
                    System.out.println("Message sent");
                    return 1;
                } else {
                    return 2;
                }
            } catch (Exception e) {   
                error = e.getMessage();
                Log.e("SendMail", e.getMessage(), e);    
            }

            return 3; 
        } 

        protected void onPostExecute(Integer result) {
            pd.dismiss();
            if(error!=null) {
                text.setText(error);
            }
            if(result==1) {
                Toast.makeText(Sender.this,
                    "Email was sent successfully.", Toast.LENGTH_LONG)
                    .show();
            } else if(result==2) {
                Toast.makeText(Sender.this,
                        "Email was not sent.", Toast.LENGTH_LONG).show();
            } else if(result==3) {
                Toast.makeText(Sender.this,
                        "There was a problem sending the email.",
                        Toast.LENGTH_LONG).show();
            }
        }
    }   
} 
```

更新`MailSender`

```
import java.util.Date;
import java.util.Properties;

import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.Authenticator;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class MailSender extends Authenticator {
    private String user;
    private String password;

    private String [] to;
    private String from;

    private String port;
    private String sport;

    private String host;

    private String subject;
    private String body;

    private boolean auth;
    private boolean debuggable;

    private Multipart multi;

    public MailSender(){
        host = "smtp.gmail.com";
        port = "465";
        sport = "465";

        user = "";
        password = "";
        from = "";
        subject = "";
        body = "";

        debuggable = false;
        auth = true;

        multi = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
        CommandMap.setDefaultCommandMap(mc); 
    }

    public MailSender(String user, String password){
        this();      
        this.user = user;
        this.password = password;   
    }

    public boolean send() throws Exception {
        Properties props = setProperties();

        try{
            Session session = Session.getInstance(props, this);
            session.setDebug(true);

            MimeMessage msg = new MimeMessage(session);

            msg.setFrom(new InternetAddress(from));

            InternetAddress[] addressTo = new InternetAddress[to.length];
            for(int i=0; i<to.length; i++){
                addressTo[i] = new InternetAddress(to[i]);
            }

            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);
            msg.setSubject(subject);
            msg.setSentDate(new Date());

            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setText(body);
            multi.addBodyPart(messageBodyPart);

            msg.setContent(multi);

            Transport transport = session.getTransport("smtps");
            transport.connect(host, 465, user, password);
            transport.sendMessage(msg, msg.getAllRecipients());
            transport.close();
            return true;
        } catch (Exception e) {
            e.printStackTrace();
            return false;
        }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);

        multi.addBodyPart(messageBodyPart);
    }

    @Override 
      public PasswordAuthentication getPasswordAuthentication() { 
        return new PasswordAuthentication(user, password); 
      }

    private Properties setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", host);

        if(debuggable) {
            props.put("mail.debug", "true");
        }

        if(auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", port);
        props.put("mail.smtp.socketFactory.port", sport);
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        return props;
    }

    public void setTo(String[] toAddress) {
        this.to = toAddress;
    }

    public void setFrom(String fromAddress) {
        this.from = fromAddress;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public void setBody(String body) { 
        this.body = body; 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T04:15:24.643

将以下链接中的 3 个 jars 添加到您的 Android 项目（右键单击项目-添加外部 jars）

*   [邮件.jar](http://javamail-android.googlecode.com/files/mail.jar)
*   [激活.jar](http://javamail-android.googlecode.com/files/activation.jar)
*   [附加的.jar](http://javamail-android.googlecode.com/files/additionnal.jar)

[单击此处 - 如何添加外部 JAR](https://stackoverflow.com/a/6859020/28557)

运行项目并检查邮件的收件人邮件帐户。干杯！！

希望这可以帮助..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T04:50:45.060

一旦检查我的工作`Email Application`。我把它放在[这里](https://sites.google.com/site/ramkiranworks/customization/Sendmail.zip?attredirects=0&d=1)

在此之前请确认您已添加

`<uses-permission android:name="android.permission.INTERNET"/>`在清单中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T05:47:01.320

我猜你正在使用 API 级别 9+

您需要阅读有关`StrictMode`.

在您的情况下，您试图阻止主 UI 线程上的网络 API，这就是发生错误的原因。

作为一种解决方案，您可以在您的`onCreate()`

```
if (android.os.Build.VERSION.SDK_INT > 9) {
      StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
      StrictMode.setThreadPolicy(policy);
    } 
```

* * *

阅读：[此博客](http://android-developers.blogspot.in/2010/12/new-gingerbread-api-strictmode.html)，[API 指南](http://developer.android.com/reference/android/os/StrictMode.html)，

另请阅读`AsyncTask`并使用它来执行您在主线程上执行的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T07:00:20.243

对于 NetworkOnMainThreadException，您需要使用 AsyncTask 来执行网络活动。为此，您可以尝试查看以下代码。我还没有检查它，也许你需要对代码进行一些调整。

首先为 AsyncTask 创建一个类，例如：

```
private class SendMail extends AsyncTask<String, Void, String>
{

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        try {    
            MailSender sender = new MailSender("me@gmail.com", "password"); 
            sender.sendMail("Testing",    
                    "This is a test mail",    
                    "me@gmail.com",    
                    "me@gmail.com");    
        } catch (Exception e) {    
            text.setText(e.getMessage());
            Log.e("SendMail", e.getMessage(), e);    
        }

        return null;
    }

} 
```

`new SendMail().execute()`现在您可以通过在您的`onCreate`方法中 调用来简单地完成您的网络活动任务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T08:50:02.010

如果您使用异步任务发送电子邮件，请遵循此

```
private class DownloadImageTask extends AsyncTask<String, String, Void> {
    int flag=0;
    protected Void doInBackground(String... arg0) {
        try{
            m = new Mail(emailaddress, password);
            m.setFrom(emailaddress.trim());
            toArr =   email.split(",");
            for(int i=0;i<toArr.length;i++)
            {
                                    // checking all emails entered are correct or not
                if (toArr[i].trim().matches(EMAIL_PATTERN))
                {
                    emailflag = true;
                }
                else
                {
                    emailflag = false;
                    break;
                }
            }
            m.setTo(toArr);
            if(!Subject.equals(""))
            {
                m.setSubject(txtSubject.getText().toString());
            }
            else   
            {
                m.setSubject("No Subject");
            }
            if(!EmailBody.equals(""))
            {
                m.setBody(txtEmailBody.getText().toString());
            }
            else  
            {
                m.setBody("No Message");                    
            }
            if(!attachefile.equals(""))
            {
                String[] temp;
                temp = attachefile.split("\\*");
                if(temp.length>0)
                {
                    for(int i =0; i < temp.length ; i++)
                    {   
                        m.addAttachment(temp[i]);
                    }
                }
            }
            if(emailflag && m.send())
            {
                flag=1;
                Intent intent = new Intent(SendEmail.this,SendEmail.class);
                startActivity(intent);
            }
            else
            {
                flag = 0;
            }

        }catch(Exception e){

                e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void result) 
    {
        progressDialog.dismiss();
        if(flag==1)
        {
            Toast.makeText(SendEmail.this, "Sent Successfully", Toast.LENGTH_SHORT).show();
        }
        else
        {
            Toast.makeText(SendEmail.this, "Failed please give correct email address", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

这是电子邮件的正则表达式..

```
private static final String EMAIL_PATTERN = 
        "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"; 
```

# r - R中的3d圆锥和圆柱

> ID：11945604
> 
> 赞同：1
> 
> 时间：2012-08-14T04:00:31.787
> 
> 标签：r

你如何在 R 中绘制 3d 圆锥和圆柱？我认为您正在使用线框，但我在任何地方都找不到任何示例。我正在尝试做 Matlab 和 Mathematica 通常用来做的事情。如果绘制 3d 对象可以像那些程序一样简单，我真的很喜欢 R。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T05:47:19.207

这就是 Jaakko Nevalainen 和 Deepayan Sarkar 使用 lattice 的方式来自： [https ://stat.ethz.ch/pipermail/r-help/2009-April/196715.html](https://stat.ethz.ch/pipermail/r-help/2009-April/196715.html)

```
library(lattice)

A<-matrix(ncol=2, nrow=64)

for(i in 0:63) {  A[i+1,1]<-sin(i/10)  
A[i+1,2]<-cos(i/10) }

Sigma<-matrix(c(0.5,0.1,0.1,0.25),byrow=TRUE,nrow=2) 
G<-eigen(Sigma)

E1<-t(G$vector%*%t(A)) 
E2<-t(diag(sqrt(G$values))%*%t(E1)) 
mu<-c(0.1,0.2) 
E3<-sweep(E2,2,-mu)

a<-sqrt(max(rowSums(sweep(E3,2,mu)**2))) 
b<-sqrt(min(rowSums(sweep(E3,2,mu)**2)))

astar<-as.numeric(a+abs(mu[1])) 
bstar<-as.numeric(b+abs(mu[2]))

xstar<-seq(-astar,astar,len=50) 
ystar<-seq(-bstar,bstar,len=50)

g<-expand.grid(x=xstar,y=ystar)

p1<-2*g$x*mu[1]/a**2+2*g$y*mu[2]/b**2 
p2<-(g$x**2/a**2+g$y**2/b**2) 
p3<-mu[1]**2/a**2+mu[2]**2/b**2-1

q<-(p1+sqrt(p1**2-4*p2*p3))/(2*p2) 
z<-sqrt(1-(q*g$x)**2-(q*g$y)**2) 
zstar<-(z/q) 
ind0<-!(q<1) 
g$z<-zstar 
sc<-matrix(c(rep(c(-1,-1,-1),sum(ind0))),nrow=sum(ind0),byrow=TRUE) 
gstar<-rbind(g[ind0,],sc*g[ind0,])

group<-c(rep(1,nrow(gstar)/2),rep(2,nrow(gstar)/2)) 
gstar$group<-group
gstar <- g 
gstar$z[!ind0] <- NA 
gstar$z2 <- -gstar$z 
wireframe(z + z2 ~ x * y, gstar, colorkey=TRUE,drape=TRUE, scales=list(arrows=FALSE)) 
```

![在此处输入图像描述](../Images/cf3962563c254076ae6f6b62b00bd137.png)

# c# - 添加控制器时无法获取元数据 mvc4

> ID：11945623
> 
> 赞同：3
> 
> 时间：2012-08-14T04:03:14.453
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在尝试创建我的第一个 mvc 类并且在开始时遇到问题。我在我的主机帐户上使用共享数据库并创建了以下类

```
namespace MvcApplication2.Models
{
    public class tUsers
    {

            public int UserID { get; set; }
            public string Username { get; set; }
            public string UserEmail { get; set; }
            public string UserPassword { get; set; }
            public int GroupId { get; set; }

    }

    public class tUsersDBContext : DbContext
    {
        public DbSet<tUsers> tUsers { get; set; }
    }
} 
```

这是我的连接字符串

```
 <add name="DefaultConnection" connectionString="Data Source=gdfgdfgdfg;Initial Catalog=fsdf_fdsf;Persist Security Info=True;User ID=ddd_reddntal;Password=fgfggfdg" providerName="System.Data.SqlClient" /> 
```

我得到的错误是

> Unable to retrieve metadata for 'mvcapplication2.models.tusers' 在模型生成过程中检测到一个或多个验证错误：
> 
> 实体类型用户没有受保护的密钥。

我的模型名称还需要与我的表名称完全匹配吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T04:21:47.130

Entity Framework 无法识别您的`tUsers`类的主键属性。`UserID`用属性注释`Key`属性。如果您的表名与类名不同，请使用该`Table`属性来指定表名。

尝试对类名使用正确的命名约定。`User`在这种情况下，它不应该`tUsers`。

```
[Table("MyTableName")]
public class tUsers
{       
        [Key]
        public int UserID { get; set; }
        public string Username { get; set; }
        public string UserEmail { get; set; }
        public string UserPassword { get; set; }
        public int GroupId { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T03:59:27.853

请确保您已将 Id 定义为表中的主键，并确保您为模型类正确定义了属性。除了应用程序提供的 DefaultConnection 之外，还请将您的正确连接字符串添加到配置文件中。我希望这将有所帮助。

谢谢

# visual-studio-lightswitch - 在运行时定义列的 Lightswitch Grid

> ID：11945624
> 
> 赞同：0
> 
> 时间：2012-08-14T04:03:43.983
> 
> 标签：visual-studio-lightswitch

我有一张米表。然后是一个仪表读数表（其中引用了仪表表，还有一个日期列和一个读数值列）。这个想法是，每天都会记录给定仪表的读数。使用列表和详细信息屏幕，我可以在列表部分选择一个仪表，然后详细信息部分显示与所选仪表关联的读数。因此，要添加新一天的读数，用户将选择一个仪表，然后在读数网格的新行中，输入新的日期和读数。但是，我想要实现的是：拥有一个网格，其中每一行代表一天，每一列代表一个仪表。这样，用户可以更快地输入以添加新的一天，然后遍历列，输入每个仪表的当天读数。这在 Lightswitch 中可行吗？关于这个的好方法的任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:44:53.870

是的，这可以通过自定义控件实现。我已经构建了类似的东西来可视化房间预订。基本上，它与您的设置非常相似：您有一个父子关系，在子表中您有“时间线字段”。您可以在此处找到更多详细信息：[http](http://blog.pragmaswitch.com/?p=318) ://blog.pragmaswitch.com/?p=318 当然，这并不完全是您想要的，但我希望它能给您指明方向。

# command-line - 如何使用 AutoIt 命令行在不打开新 shell 的情况下运行命令

> ID：11945625
> 
> 赞同：0
> 
> 时间：2012-08-14T04:03:44.343
> 
> 标签：command-line, autoit, windows-shell

我目前正在 AutoIt 中编写一个命令行应用程序，并且无法将其打印回我打开它的同一命令行。我的目标是让整个程序在单个 shell 中工作。这是我最初尝试的：

```
;myprogram.au3
$MyCommand = 'dir'
Run(@ComSpec & " /c " & $MyCommand, @SystemDir, @SW_Show)
Run(@ComSpec & " /c @echo off && echo Command completed successfully. && @echo on", @SystemDir, @SW_Show) 
```

然后我编译它并通过命令行运行它（每个代码框代表一个新的 shell）：

```
C:\Users\Matthew>myprogram.au3
C:\Users\Matthew> 
```

打开新外壳 ↓</p>

```
Volume in drive C has no label.
Volume Serial Number is 0287-990C
Directory of C:\Users\Matthew
<Finishes normal dir command output> 
```

完成后，列出我的目录中退出的文件和

打开新外壳 ↓</p>

```
The command completed successfully. 
```

那个窗口立即关闭。

我正在寻找的输出是相同的，但在一个窗口中，如下所示：

```
C:\Users\Matthew>myprogram
*Output of dir command*
The command completed successfully
C:\Users\Matthew> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:28:39.013

您将项目编译为控制台应用程序以使其工作。您可以通过在编译时选中名称有点神秘的“创建 CUI 而不是 GUI EXE”复选框来做到这一点。然后`myprogram.exe`从 shell 调用而不是`.au3`.

```
#include <Constants.au3>

;myprogram.au3
$MyCommand = 'dir'
Local $foo = Run(@ComSpec & " /c " & $MyCommand & " \& echo Command completed successfully.", @SystemDir, @SW_HIDE, $STDERR_CHILD + $STDOUT_CHILD)

Local $output
While 1
    $output = StdoutRead($foo)
    If @error Then ExitLoop
    ConsoleWrite($output)
Wend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T08:03:47.707

由于这个问题没有答案：

```
$MyCommand = 'ping www.google.com && ping www.stackoverflow.com'
Run(@ComSpec & " /c " & $MyCommand, @SystemDir, @SW_Show) 
```

像这样，两个命令都在同一个 CMD-Box 中执行。

# python - 所有可能的因素对

> ID：11945626
> 
> 赞同：1
> 
> 时间：2012-08-14T04:04:04.940
> 
> 标签：python, math

我正在尝试编写一个程序，该程序接受一个带有单个前导整数和任意数量的尾随零的数字，然后打印两个因素的所有可能组合。

IE。

100

因数是 2^2, 5^2

所以程序会打印：

(2,50),(4,25),(5,20)

或者

600

因数为 2^3,3,5^2

(2,300),(4,150),(8,75),(3,200),(5,120),(25,24),(6,100),(12,50),(15,40),(30,20), (60,10)

......我想这就是全部？是吗？我可以用一个程序来检查...

```
import itertools

facts=[[2,2,2],[3],[5,5]]
for n in itertools.product(*facts)
    print(n) 
```

我看到我使用不正确，但这是我第一次尝试它。

这只是给 (2,3,5) 十次。

我想要（2）*（2,3,5,5）和（2,2）*（3,5.5）之类的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:08:53.890

这是我的做法：

```
def factors(n):
  # Fill this in

def factor_pairs(n):
  for i in factors(n):  # You need to write the factor() function
    yield i, n / i

if __name__ == '__main__':
  n = input('Enter an integer: ')

  for i, j in factor_pairs(n):
    print i, j 
```

我不会完全为你编写代码，但你明白了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T04:44:43.227

[在给定素数的情况下生成一个数的所有因数](https://stackoverflow.com/a/1010460/4279)：

```
#!/usr/bin/env python
import itertools, operator

def all_factors(prime_dict):
    series = [[p**e for e in range(maxe+1)] for p, maxe in prime_dict.items()]
    for multipliers in itertools.product(*series):
        yield reduce(operator.mul, multipliers) 
```

### 例子

```
prime_dict = {2:3, 3:1, 5:2}
L = sorted(all_factors(prime_dict))
number_of_divisors = reduce(lambda prod, e: prod*(e+1), prime_dict.values(),1)
assert len(L) == number_of_divisors
# -> [1, 2, 3, 4, 5, 6, 8, 10, 12, 15, 20, 24,
#     25, 30, 40, 50, 60, 75, 100, 120, 150, 200, 300, 600] 
```

产生对：

```
n, isodd = divmod(len(L), 2)
print(zip(L[:n], reversed(L[n + isodd:])))
if isodd: # number is perfect square
   print((L[n], L[n])) 
```

### 输出

```
[(1, 600), (2, 300), (3, 200), (4, 150), (5, 120), (6, 100),
 (8, 75), (10, 60), (12, 50), (15, 40), (20, 30), (24, 25)] 
```

它适用于小数字。您可以使用它来测试您的解决方案，该解决方案可能会考虑到您的数字的特殊形式：`x00000...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:11:29.780

我认为这会做你想要的：

```
n = input('Enter a number? ')
factors = []

for i in range(int(sqrt(n))):
  if n % i == 0:
    factors.append((i, n / i)) 
```

根据因子的定义，您必须检查的最大数字是该数字的平方根，因此如果您可以对此进行编码，则应该进行设置。

如果您可以对此进行编码，则应该进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T04:26:24.883

你可以把它全部放在一个列表理解中

```
import math
n = 600 # or whatever...
[(x, n/x) for x in range(1, int(math.sqrt(n))+1) if n % x == 0] 
```

回报：

```
[(1, 600), (2, 300), (3, 200), (4, 150), (5, 120), (6, 100), (8, 75), (10, 60), (12, 50), (15, 40), (20, 30), (24, 25)] 
```

如果您不想要 (1,600)，只需使用 range(2, int(math.sqrt(n))+1)。

# algorithm - 需要帮助了解 Sardinas-Patterson 算法（提供算法和示例）

> ID：11945627
> 
> 赞同：2
> 
> 时间：2012-08-14T04:04:08.610
> 
> 标签：algorithm, math

我很难从下面的幻灯片中理解 Sardinas-Patterson 算法：

![在此处输入图像描述](../Images/7b40b603c904933f36e7fedeea38f335.png)

我们如何得到C1和C2？？？

我也从网上得到了这样的信息：

该算法是有限的，因为添加到列表中的所有悬空后缀都是有限码字集的后缀，并且一个悬空后缀最多可以添加一次。

*   {0,01,11}。码字 0 是 01 的前缀，所以加上悬空后缀 1\. { 0, 01, 11, 1 }。码字 0 是 01 的前缀，但悬空后缀 1 已经在列表中；码字 1 是 11 的前缀，但悬空后缀 1 已经在列表中。没有其他悬空后缀，因此可以得出结论，该集合是唯一可解码的。
*   {0,01,10}。码字 0 是 01 的前缀，因此将悬空后缀 1 添加到列表中。{ 0, 01, 10, 1 }。码字 1 是 10 的前缀，而悬空后缀 0 是码字。因此，得出结论，该代码不是唯一可解码的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T04:42:45.247

[wiki文章](http://en.wikipedia.org/wiki/Sardinas%E2%80%93Patterson_algorithm)是一个很好的解释

幻灯片中的 C 对应于 wiki 文章中的 S [i]。

这是我的描述：

重要的操作是从 C 中获取两个字符串，如果其中一个是另一个的前缀，则记录删除前缀后留下的后缀。这就是C [1]的获得方式。

使用以下 C [2]， C [3]等。您再次要查找 C 中的单词，这些单词是 C [i]中单词的前缀并取剩余的后缀，但是您还想查看 C_i 中的单词并删除单词 from C 是前缀。C [(i+1)]是这些集合的并集。

一旦某个 C [i]包含来自 C 的单词，您就知道该代码不是唯一可解码的。

所以：

C = 1、011、01110、1110、10011

C [1] = 110（因为 (1)110 在 C 中），0011（因为 (1)0011 在 C 中），10（因为 (011)10 在 C 中）

C [2] = {10 (因为 (1)10 在 C [1]中), 0 (因为 (1)0 在 C [1]中)} union { 011, 因为 (10)011 在 C }

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T04:47:26.450

通过查看 C 中的任何代码字是否是 C 中任何其他代码字的前缀来找到 C1，如果是，则将后缀添加到集合 C1。例如，1 是 1110 的前缀，因此您会得到添加到 C1 的后缀 110。

对于 C2，首先检查 C 中的代码字是否是 C1 中任何其他代码字的前缀，如果它是所有“悬空后缀”的集合，然后检查 C1 是否是任何代码的前缀如果是 C 中的单词，则再次制作一组所有“悬空后缀”。然后你取这两组的并集，得到 C2。

希望这有点道理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T04:40:36.717

集合 C1 和 C2 对应于[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Sardinas%E2%80%93Patterson_algorithm#Precise_description_of_the_algorithm)中的 S1 和 S2 。

具体来说，C1 是在我们从 C 中取出一个单词并删除其也在 C 中的一些前缀之后可以保留的单词集。

对于 C2，在我们从 C 中取出一个词并从 C1 中删除一个前缀之后，或者在我们从 C1 中取出一个词并从 C 中删除一个前缀之后，我们可以保留这些词。

如果我们想计算 C3，我们将在我们从 C 中取出一个词并删除它在 C2 中的一些前缀之后，取出可以保留的词，以及在我们从 C2 中取出一个词并删除它的一些前缀之后可以保留的词那是在C中。

因此，C3 将是：{[empty word], 0, 011, 10, 11, 1110}。它包含空字，因此算法停止并确定 C 不是唯一可解码的。

# asp.net - 关键字“订单”附近的语法不正确

> ID：11945629
> 
> 赞同：0
> 
> 时间：2012-08-14T04:04:35.833
> 
> 标签：asp.net, sql

我在关键字“订单”附近出现错误语法错误。

```
protected void btnSubmit_Click(object sender, EventArgs e)
{      
    SqlCommand cmd = new SqlCommand("Insert INTO Order (Cust_Num, Sale_Num) VALUES (@cust_num, @sale_num))", conn);
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@cust_num", txtBxCustNum.Text);
    cmd.Parameters.AddWithValue("@sale_num", txtBxSaleNum.Text);

    conn.Open();
    cmd.ExecuteNonQuery();
    conn.Close(); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T04:06:15.843

`Order`是一个关键词`Order by`

像这样正确

```
SqlCommand cmd = new SqlCommand("Insert INTO [Order] (Cust_Num, Sale_Num) VALUES (@cust_num, @sale_num))", conn); 
```

使用 [] 转义出现在表或列名称中的关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T04:06:37.837

`Order`是一个保留字，因此恕我直言，表的名称不好。尽管如此，您需要通过将其包含在方括号中来转义该名称：

```
SqlCommand cmd = new SqlCommand("Insert INTO [Order] (Cust_Num, Sale_Num) VALUES (@cust_num, @sale_num))", conn); 
```

# asp.net - 如何在 Xcode 中将视频上传到 ASP.NET？

> ID：11945631
> 
> 赞同：0
> 
> 时间：2012-08-14T04:04:45.703
> 
> 标签：asp.net, objective-c, xcode

我还没有看到任何与将视频从 iPhone (Xcode) 上传到 ASP.NET 相关的帖子，到目前为止只有 Facebook、Youtube 和 PHP。

我遵循了一个上传视频的示例，但上传到 php (http://www.youtube.com/watch?v=zqRnnwFpRqk)

但不知何故它不起作用。该文件到达 ASP.NET 端，因为只有标题，没有视频内容。我可以使用文本编辑器打开并查看带有帖子标题的文件。

有什么问题？

```
NSCharacterSet *mov = [NSCharacterSet characterSetWithCharactersInString:@".MOV"];
self.mediaPath = [self.mediaPath stringByTrimmingCharactersInSet:mov];
NSData *videoData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:self.mediaPath ofType:@"MOV"]];
NSString *urlString = @"http://mysite.com/mobileupload.aspx";
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];
NSString *boundary = @"---------------------------14737809831466499882746641500";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
NSString *platformType = kMETRO_PLATFORM_TYPE_IOS;
[request addValue:platformType forHTTPHeaderField:@"SD-Platform"];
mediaType = kTYPE_VIDEO;
[request addValue:mediaType forHTTPHeaderField:@"SD-Category"];
videoFilename = [NSString stringWithFormat:@"%@%@", [self GenerateUuid], @".mov"];
[request addValue:videoFilename forHTTPHeaderField:@"SD-Filename"];
self.mediaPath = [NSString stringWithFormat:@"%@%@", kVIDEOS_URL, videoFilename];
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", videoFilename] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: binary\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:videoData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

在后面的 ASP.NET 代码中，这就是我所拥有的

```
string uploadPath = "~/upload/";
HttpFileCollection fileCollection = Request.Files;
fileCollection[0].SaveAs(Server.MapPath(uploadPath + fileCollection[0].FileName]); 
```

就这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:59:20.467

我想分享一个链接，它可以帮助您找到更好的解决方案。给定的链接具有在 .net 服务器上上传音频的代码，但上传视频只需稍作修改即可。

[您可以在如何在 iPhone 的网络服务器上上传大小不超过 5 mb 的 mp3 文件](https://stackoverflow.com/a/11862693/790794)中找到其余代码 。

要上传音频：

```
[request addData:audioData withFileName:audioName andContentType:@"audio/caf" forKey:@"audioFile"]; 
```

要上传视频：

```
[request addData:audioData withFileName:videoName andContentType:@"video/mov" forKey:@"videoFile"]; 
```

# php - 使用 PDO PHP 对嵌套数据进行 Json 编码

> ID：11945632
> 
> 赞同：0
> 
> 时间：2012-08-14T04:04:59.740
> 
> 标签：php, json, pdo

我有以下表格：

```
+---------+-----------+      +----------+---------+-------------+
| item_id | item_name |      | image_id | item_id |  image_url  |
+---------+-----------+      +----------+---------+-------------+
|       1 | phone     |      |        1 |       1 | http://url1 |
|       2 | computer  |      |        2 |       1 | http://url2 |
|       3 | keyboard  |      |        3 |       2 | http://url2 |
+---------+-----------+      +----------+---------+-------------+ 
```

我应该在 php 中使用 PDO 和 json 编码做什么以获得以下输出：

```
[
    {
        "item_id":"1",
        "name":"phone",
        "images": [
            {
                "image_id":"1",
                "url":"http://url1"
            },
            {
                "image_id":"2",
                "url":"http://url2"
            }
        ]
    },
    {
        "item_id":"2",
        "name":"computer",
        "images": [
            {
                "image_id":"3",
                "url":"http://url3"
            }
        ]
    },
    {
        "item_id":"3",
        "name":"keyboard",
        "images": []
    }
] 
```

我必须在**foreach循环中使用****foreach**来获得这个结果吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:46:35.630

不，使用单个循环和单个 SQL 查询。

首先，SQL查询是

```
SELECT im.image_id, im.image_url, im.item_id
       it.item_name
FROM images im 
   LEFT JOIN items it ON it.item_id=im.item_id
ORDER BY im.item_id, im.image_id 
```

而您的 PHP（意译）是：

```
$lastItemId = -1;
$aJson = array();
while ($row = GetNextRow()) {    // Depends on your class
    $itemID = $row['item_id'];
    if (!isset($aJson[$itemID])) {
        $aJson[$itemID] = array('item_id'=$itemID, 'item_name'=$row['item_name'], images=>array());
    }
    $aJson[$itemID]['images'] = array('image_id'=>$row['image_id'], 'image_url'=>$row['image_url']);

}
echo json_encode($aJson); 
```

您应该可以从那里进行调整？**

# applescript - 如何将此 AppleScript 转换为 osascript？

> ID：11945633
> 
> 赞同：1
> 
> 时间：2012-08-14T04:05:02.580
> 
> 标签：applescript, launchd, login-script, osascript

我已经编写了一个 AppleScript 并希望将其转换为 osascript，以便我可以在启动时使用 launchd 运行它。有什么方法可以将其转换为 osascript 还是必须将整个脚本重写为 osascript？如果无法完成，是否至少有一种方法可以在终端中将其作为 osascript 运行？谢谢！

```
on idle
       tell application "System Events" to ¬
    if exists process "Launchpad" then run script
        tell application "Launchpad"
            delay 0
            tell application "System Events" to keystroke "b" using {control down, option down, command down}
            delay 0
            tell application "System Events" to keystroke "b" using {control down, option down, command down}
            delay 0
            tell application "System Events" to keystroke "b" using {control down, option down, command down}
            delay 0
        end tell
end idle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:21:08.097

如果您只需要每秒运行一次或更频繁地运行它，则可以将其保存为普通脚本：

```
tell application "System Events"
    if not (exists process "Launchpad") then return
    repeat 3 times
        keystroke "b" using {control down, option down, command down}
    end repeat
end tell 
```

并使用 launchd 重复运行脚本：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN
http://www.apple.com/DTDs/PropertyList-1.0.dtd>
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.stackoverflow.11945633</string>
    <key>ProgramArguments</key>
    <array>
        <string>osascript</string>
        <string>/Users/username/Library/Scripts/script.scpt</string>
    </array>
    <key>StartInterval</key>
    <integer>1</integer>
</dict>
</plist> 
```

必须使用 手动加载属性列表`launchctl load ~/Library/LaunchAgents/com.stackoverflow.11945633.plist`。应用更改需要卸载和加载它。

默认情况下，程序会在 20 秒后发送一个 SIGKILL 信号。您可以通过添加`ExitTimeOut`密钥来覆盖超时。见`man launchd.plist`。

该脚本实际上不适用于更改 Launchpad 背景。Launchpad.app 只是一个虚拟应用程序，在打开时会立即退出。

如果您只想更改背景样式，可以使用`defaults write com.apple.dock springboard-background-filter -int 2; killall Dock`.

# spring - spring-security-xxx添加时出现spring错误

> ID：11945635
> 
> 赞同：1
> 
> 时间：2012-08-14T04:05:24.777
> 
> 标签：spring, spring-security

我尝试在我的项目中使用弹簧安全性。但是当我将 spring-security-xxx.jar 添加到我的 lib 文件夹时，会出现以下错误。

我对此一无所知。有人知道吗？

* * *

**spring-cms-root.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

        <context:property-placeholder location="classpath:setting.properties" file-encoding="UTF-8"/>

        <import resource="spring-cms-database.xml"/>
        <import resource="spring-cms-dispatcher.xml"/>
        <import resource="spring-cms-security.xml"/>
        <import resource="spring-cms-view.xml"/>

     </beans> 
```

**spring-cms-database.xml （这是包含 ${...} 的 applicationcontext**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">

    <!-- enable transaction demarcation with annotations -->
    <tx:annotation-driven />

    <!-- database connection datasource -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="\${i18n.jdbc.driverClassName}" />
        <property name="url" value="\${i18n.jdbc.url}" />
        <property name="username" value="\${i18n.jdbc.username}" />
        <property name="password" value="\${i18n.jdbc.password}" />
        <property name="initialSize" value="3" />
        <property name="maxActive" value="10" />
    </bean>

    <!-- transaction manager, use JtaTransactionManager for global tx -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

</beans> 
```

spring-cms-security （即使没有这个导入，仍然会出现错误）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="jimi" password="jimispassword" authorities="ROLE_USER, ROLE_ADMIN" />
                <user name="bob" password="bobspassword" authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

    <http auto-config="true">
        <intercept-url pattern="/**" access="ROLE_USER" />
    </http>

</beans:beans> 
```

**pom.xml**

```
 ...
        <!-- When these below three security added Spring propertyConfigurer error occurs -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jms</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-core</artifactId>
            <version>${tiles-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>${tiles-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-api</artifactId>
            <version>${tiles-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>${tiles-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-template</artifactId>
            <version>${tiles-version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-compat</artifactId>
            <version>${tiles-version}</version>
        </dependency>
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis</artifactId>
            <version>${mybatis-version}</version>
        </dependency>
        <dependency>
            <groupId>org.mybatis</groupId>
            <artifactId>mybatis-spring</artifactId>
            <version>1.1.1</version>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>

        <!-- i18n SQLite -->
        <dependency>
            <groupId>org.xerial</groupId>
            <artifactId>sqlite-jdbc</artifactId>
            <version>3.7.2</version>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>
            ... 
```

**这里控制台错误消息**

```
심각: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'propertyConfigurer' defined in class path resource [spring-beans/spring-cms-root.xml]: Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:649)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:88)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:210)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:182)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 25 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:50:15.070

我假设 ${spring-version} euqals 3.1.2.Release。如果是这样，这里的问题是由于 spring security 3.1.2 没有像您预期的那样使用 Spring-Core 3.1.2。这会导致您的类路径中存在两个版本的 Spring 核心，然后导致异常。因此，您必须在 pom.xml 中显式排除对 Spring Security 的 Spring 核心的依赖项。请参阅[http://search.maven.org/remotecontent?filepath=org/springframework/security/spring-security-core/3.1.2.RELEASE/spring-security-core-3.1.2.RELEASE.pom](http://search.maven.org/remotecontent?filepath=org/springframework/security/spring-security-core/3.1.2.RELEASE/spring-security-core-3.1.2.RELEASE.pom)。

# ruby - Redmine 安装问题 Ubuntu 12.04

> ID：11945636
> 
> 赞同：1
> 
> 时间：2012-08-14T04:05:33.817
> 
> 标签：ruby, rake, redmine

我正在尝试根据官方 Wiki 安装 Redmine，但是当我尝试运行时`rake generate_secret_token`显示以下错误

```
rake aborted!
Don't know how to build task 'generate_secret_token' 
```

我已经进入这个问题没有成功

[Redmine：安装时出现 rake 错误](https://stackoverflow.com/questions/9997784/redmine-rake-error-when-installing)

** 对于上面的问题，我相信运行命令`rake secret`已经解决了，因为我调用时没有列出 generate_secret_token `rake -T`**

当我尝试运行 RAILS_ENV=production rake`redmine:load_default_data`我得到

```
rake aborted!
Don't know how to build task 'redmine:load_default_data' 
```

以下是跟踪：

```
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rak /task_manager.rb:49:in `[]'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:115:in `invoke_task'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `load'
/home/nuno/.rvm/gems/ruby-1.9.3-p194@global/bin/rake:19:in `<main>'
/home/nuno/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/home/nuno/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:14:38.077

该`generate_secret_token`任务仅适用于 Redmine >= 2.0.0。如果您使用旧版本（似乎很可能），则相关任务称为`generate_session_store`因此，请尝试

```
bundle exec rake generate_session_store 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T19:13:25.593

最后，我解决了为 Redmine 安装 Bitnami 软件包的问题[http://bitnami.com/stack/redmine](http://bitnami.com/stack/redmine)

# android - android，修改属性后自动动画？

> ID：11945646
> 
> 赞同：0
> 
> 时间：2012-08-14T04:06:39.260
> 
> 标签：android, android-layout

由于我在布局中有一个按钮，
我知道如何动态修改控制器的属性，例如

```
layout1.setGravity(Gravity.BOTTOM)  
btn1.setPadding() 
```

但它只是突然传送到新位置
，有什么办法可以在前一个和新位置之间自动启动动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:36:20.917

检查此[链接](http://android-er.blogspot.in/2012/02/apply-animation-on-button.html)。它已将动画从左向右翻译。你根据你的改变它。愿这对你有所帮助。

# iphone - Objective-C - 计算 x ^ y

> ID：11945658
> 
> 赞同：-6
> 
> 时间：2012-08-14T04:07:54.207
> 
> 标签：iphone, objective-c

> **可能重复：**
> [如何通过 12 的幂来提高双精度值？](https://stackoverflow.com/questions/1816055/how-to-raise-a-double-value-by-power-of-12)
> [10\. 功率/计算/功率计算](https://stackoverflow.com/questions/5810108/in-10-power-calculation-power-calculations)

在 iPhone 的对象 C 中，我将如何计算 x^y？通过弹出堆栈获取值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:17:07.837

你应该`#include <math.h>`然后你可以使用

```
double res=pow(10, 1.5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:16:17.467

您可以使用 pow(x,y)。

它返回一个**双精度**值。

要转换为整数，myPowerNum = (int)pow((double)x, (double)y);

# linux - Ubuntu命令行强制从辅助（或特定）监视器运行应用程序

> ID：11945659
> 
> 赞同：1
> 
> 时间：2012-08-14T04:07:55.363
> 
> 标签：linux, bash, ubuntu, vlc, multiple-monitors

我正在创建一个应用程序（命令行脚本）来将视频直接播放到通过 VGA 或 HDMI 连接的辅助监视器。

视频播放器本身是 cvlc，使用命令 cvlc -f myvideo.avi。

任何人都可以请有关脚本的帮助，以将 cvlc 直接运行到辅助监视器，无论它是从哪个监视器启动的。

我试过 DISPLAY=":0.1" vlc -f myvideo.avi，但结果是一个乱码无法使用的视频播放器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:59:38.050

尝试使用`--x11-display :0.1`标志。它不是`--help`输出的一部分，但我在我的 2.0.1 vlc 上使用它。

# javascript - Chrome 扩展 API webRequest 在响应时效果不佳

> ID：11945665
> 
> 赞同：2
> 
> 时间：2012-08-14T04:08:58.687
> 
> 标签：javascript, google-chrome-extension

所以我正在尝试 Chrome API webRequest。一切都按要求正常工作，但在响应时，我遇到了问题。

我的测试非常简单：

```
function func(obj)
{
    var resHeaders=obj.responseHeaders;
    for(var i=0;i<resHeaders.length;i++)
    {
        if(resHeaders[i].name=="X-Powered-By" && resHeaders[i].value.indexOf("PHP")>=0)
        {
            resHeaders[i].value="Extension";
            resHeaders.push({name:"X-Test",value:"Found"});
            chrome.pageAction.show(obj.tabId);
            break;
        }
    }
    return {responseHeaders:resHeaders};
}

chrome.webRequest.onHeadersReceived.addListener(func,{urls:["<all_urls>"]},["blocking","responseHeaders"]); 
```

* * *

> 令我惊讶的是，即使标题已正确修改，Chrome 开发者工具总是显示原始标题（我必须用它 `XMLHttpRequest.getAllResponseHeaders()`来告诉）。这很不方便，因为我必须制作许多 XHR 来调试，而不是在现实世界的网页上尝试。

**编辑**：@RobW 确认，这是一个错误，所以它属于 crbug.com ......

* * *

更大的问题是，如果没有在加载事件之前的最后一个请求上进行修改，pageAction 图标将不会显示。

例如，如果一个页面包含四个请求：

> HTML -> 触发修改
> 
> CSS
> 
> JS
> 
> [加载事件]
> 
> HTML inside `iframe`-> 触发修改

pageAction 图标保持不变；

但是如果一个页面包含三个请求：

> HTML -> 触发修改
> 
> CSS
> 
> JS
> 
> [加载事件]

pageAction 图标会出现然后消失（我可以在慢速 XP 机器上看到它；在快速机器上它只是不显示）。

但是，如果我随后手工制作了 XHR（触发修改），则 pageAction 图标正确地停留在地址栏上。

这个问题很烦人，因为我必须让用户（如果有的话）知道扩展是有效的。

* * *

同样的事情发生在 Win 7 和 XP，最新的 Chrome（21+，稳定）。这是预期的，还是我做错了什么？

# android - 显示路线路径名称

> ID：11945681
> 
> 赞同：2
> 
> 时间：2012-08-14T04:11:30.807
> 
> 标签：android, google-maps, android-mapview, kml, driving-directions

//此类中的主要活动在评论中显示如下两个错误

```
import android.graphics.Color;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class NewroutepathActivity extends MapActivity {
    /** Called when the activity is first created. */
     MapView mapView;
    private String US_API;

    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        //mapView = (MapView) findViewById(R.id.mapview);
        MapView mapView = (MapView) findViewById(R.id.mapview); //or you can declare it directly with the API key

  Route route = directions(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));

//the obove line also getting error

 RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
        mapView.getOverlays().add(routeOverlay);

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
    private Route directions(final GeoPoint start, final GeoPoint dest) {
        Parser parser;
        String jsonURL = "maps.google.com/maps/api/directions/json?";
        final StringBuffer sBuf = new StringBuffer(jsonURL);
        sBuf.append("origin=");
        sBuf.append(start.getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(start.getLongitudeE6()/1E6);
        sBuf.append("&destination=");
        sBuf.append(dest.getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(dest.getLongitudeE6()/1E6);
        sBuf.append("&sensor=true&mode=driving");
        parser = new GoogleParser(sBuf.toString());

     Route r =  parser.parse();// here getting error

 return r;
    }

} 
```

googleparser 类在这里出现一个错误

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

import com.google.android.maps.GeoPoint;

public class GoogleParser extends XMLParser implements Parser {
        /** Distance covered. **/
        private int distance;

        public GoogleParser(String feedUrl) {
                super(feedUrl);
        }

        /**
         * Parses a url pointing to a Google JSON object to a Route object.
         * @return a Route object based on the JSON object.
         */

        public Route parse() {
                // turn the stream into a string

 final String result = convertStreamToString(this.getInputStream());

//The above line is getting one error

//Create an empty route
                final Route route = new Route();
                //Create an empty segment
                final Segment segment = new Segment();
                try {
                        //Tranform the string into a json object
                        final JSONObject json = new JSONObject(result);
                        //Get the route object
                        final JSONObject jsonRoute = json.getJSONArray("routes").getJSONObject(0);
                        //Get the leg, only one leg as we don't support waypoints
                        final JSONObject leg = jsonRoute.getJSONArray("legs").getJSONObject(0);
                        //Get the steps for this leg
                        final JSONArray steps = leg.getJSONArray("steps");
                        //Number of steps for use in for loop
                        final int numSteps = steps.length();
                        //Set the name of this route using the start & end addresses
                        route.setName(leg.getString("start_address") + " to " + leg.getString("end_address"));
                        //Get google's copyright notice (tos requirement)
                        route.setCopyright(jsonRoute.getString("copyrights"));
                        //Get the total length of the route.
                        route.setLength(leg.getJSONObject("distance").getInt("value"));
                        //Get any warnings provided (tos requirement)
                        if (!jsonRoute.getJSONArray("warnings").isNull(0)) {
                                route.setWarning(jsonRoute.getJSONArray("warnings").getString(0));
                        }
                        /* Loop through the steps, creating a segment for each one and
                         * decoding any polylines found as we go to add to the route object's
                         * map array. Using an explicit for loop because it is faster!
                         */
                        for (int i = 0; i < numSteps; i++) {
                                //Get the individual step
                                final JSONObject step = steps.getJSONObject(i);
                                //Get the start position for this step and set it on the segment
                                final JSONObject start = step.getJSONObject("start_location");
                                final GeoPoint position = new GeoPoint((int) (start.getDouble("lat")*1E6), 
                                        (int) (start.getDouble("lng")*1E6));
                                segment.setPoint(position);
                                //Set the length of this segment in metres
                                final int length = step.getJSONObject("distance").getInt("value");
                                distance += length;
                                segment.setLength(length);
                                segment.setDistance(distance/1000);
                                //Strip html from google directions and set as turn instruction
                                segment.setInstruction(step.getString("html_instructions").replaceAll("<(.*?)*>", ""));
                                //Retrieve & decode this segment's polyline and add it to the route.
                                route.addPoints(decodePolyLine(step.getJSONObject("polyline").getString("points")));
                                //Push a copy of the segment to the route
                                route.addSegment(segment.copy());
                        }
                } catch (JSONException e) {
                        Log.e(e.getMessage(), "Google JSON Parser - " + feedUrl);
                }
                return route;
        }

        /**
         * Convert an inputstream to a string.
         * @param input inputstream to convert.
         * @return a String of the inputstream.
         */

        private static String convertStreamToString(final InputStream input) {
        final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
        final StringBuilder sBuf = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sBuf.append(line);
            }
        } catch (IOException e) {
                Log.e(e.getMessage(), "Google parser, stream2string");
        } finally {
            try {
                input.close();
            } catch (IOException e) {
                Log.e(e.getMessage(), "Google parser, stream2string");
            }
        }
        return sBuf.toString();
    }

        /**
         * Decode a polyline string into a list of GeoPoints.
         * @param poly polyline encoded string to decode.
         * @return the list of GeoPoints represented by this polystring.
         */

        private List<GeoPoint> decodePolyLine(final String poly) {
                int len = poly.length();
                int index = 0;
                List<GeoPoint> decoded = new ArrayList<GeoPoint>();
                int lat = 0;
                int lng = 0;

                while (index < len) {
                int b;
                int shift = 0;
                int result = 0;
                do {
                        b = poly.charAt(index++) - 63;
                        result |= (b & 0x1f) << shift;
                        shift += 5;
                } while (b >= 0x20);
                int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                lat += dlat;

                shift = 0;
                result = 0;
                do {
                        b = poly.charAt(index++) - 63;
                        result |= (b & 0x1f) << shift;
                        shift += 5;
                } while (b >= 0x20);
                        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                        lng += dlng;

                decoded.add(new GeoPoint(
                        (int) (lat*1E6 / 1E5), (int) (lng*1E6 / 1E5)));
                }

                return decoded;
                }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:39:09.560

这也发生在我身上。为了解决这个问题 - 在函数 'direction' 中，当您开始构建 jsonURL 字符串时，在开头添加 'http://'，就在 'map.google.com...' 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:33:51.157

我认为这里的问题是您的目标是更新的 API，这需要访问不在主线程中的网络。更改 getInputStream() 的定义（在 XMLParser？）以支持单独线程中的网络。

# java - 在java中生成给定集合的nCr组合

> ID：11945682
> 
> 赞同：1
> 
> 时间：2012-08-14T04:11:31.240
> 
> 标签：java, combinations, ncr

我想要生成给定集合的 nCr 组合的 java 实现。例如，如果 set 是 {"java","php",".net","python"} 程序应该返回给定集合的所有可能的 nCr 集合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:24:16.560

适应[Gosper 的 hack](http://en.wikipedia.org/wiki/Combinatorial_number_system#Applications)，这可以达到 n = 64。

```
List<String> inputs;
List<List<String>> ncr = new ArrayList<List<String>>();
for (long x = (1 << r) - 1; (x >>> r) == 0;) {
  // x contains a 1 bit for each input we should choose;
  // iterate over the 1 bits of x
  long y = x;
  List<String> combination = new ArrayList<String>();
  for (int i = Long.numberOfTrailingZeros(y);
       y != 0; i = Long.numberOfTrailingZeros(y)) {
    combination.add(inputs.get(i));
    y &= ~(1 << i);
  }
  long u = x & -x;
  long v = u + x;
  x = v + ((v ^ x) / u) >>> 2;
} 
```

# php - 我在数据库中有一个名为 schedule 的表，其中 2 TIME 一个是 openHour，另一个是 closeHour

> ID：11945683
> 
> 赞同：0
> 
> 时间：2012-08-14T04:11:45.087
> 
> 标签：php, html

我需要做的是使用 php 和 html 在页面中显示一系列小时

我需要该范围位于 .tpl 中的“选择”内，但我不想在 7 天内为每小时“选择”执行 23 个“选项”，为分钟选择执行 59 个“选项” ，这就像每天选择 2 个选项，其中一个选项有 23 个选项，另一个选项有 59 个选项。

我已经连接到数据库，我只想在“选择”中显示小时，在另一个“选择”中显示分钟。

我想要的是在每一天而不是整个星期中选择开放业务和关闭业务的时间表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:18:12.687

这是我的做法。我有 2 个功能。

```
//function to create Hour drop down
function hourDropDown($hour, $day, $type){
    echo "\n<select name=\"" . $day . "_" . $type . "_hour\">\n";
    $selected[$hour] = ' selected="selected"';

    for($i=0;$i <= 23; $i++) {
        if ($i < 10) {$i= 0 . $i;}
        $sel = (isset($selected[$i])) ? $selected[$i] : "";
        echo "  <option value=\"$i\"$sel>$i</option>\n";
    }
    echo "</select>\n\n";
}

//function to create Minute drop down
function minuteDropDown($minute, $day, $type){
    echo "\n<select name=\"" . $day . "_" . $type . "_minute\">\n";
    $selected[$minute] = ' selected="selected"';

    for($i=0;$i <= 59; $i++) {
        if ($i < 10) {$i= 0 . $i;}
        $sel = (isset($selected[$i])) ? $selected[$i] : "";
        echo "  <option value=\"$i\"$sel>$i</option>\n";
    }
    echo "</select>\n\n";
} 
```

然后你可以调用函数 -

```
echo hourDropDown('08', 'monday', 'open');
echo minuteDropDown ('00', 'monday', 'open');

echo hourDropDown('18', 'monday', 'close');
echo minuteDropDown ('30', 'monday', 'close');

....

echo hourDropDown('09', 'friday', 'open');
echo minuteDropDown ('15', 'friday', 'open');

echo hourDropDown('20', 'friday', 'close');
echo minuteDropDown ('45', 'friday', 'close'); 
```

# .net - n 层应用程序，去哪里和程序集名称

> ID：11945689
> 
> 赞同：0
> 
> 时间：2012-08-14T04:12:22.250
> 
> 标签：.net, architecture

我创建了一个项目，我需要在 n 层应用程序（3 层）中拆分操作

我从一个项目开始，然后开始添加我所有的课程。外汇

```
public IServiceFoo()
{
  DoIt();
}

public ServiceFoo : IServiceFoo
{
  ...
} 
```

添加了 IoC 和所有这些。开始重构，但碰壁了。我有 4 个组件。

1.  型号/领域
2.  服务/基础设施
3.  达尔
4.  ASP.NET MVC 作为视图。

我在哪里粘贴我的 IServiceFoo 接口？唯一合乎逻辑的位置是在域/模型程序集中，因为所有其他项目都知道这一点，因此可以跨应用程序使用。

我是否调用我的程序集：模型的域 instad，因为它不再只是模型？

服务也是如此？这更像是一个基础设施，因为它包含服务类和计算逻辑。

希望你能帮忙？谢谢。

-- 编辑- 08142012 -- 我的解决方案领域：一家商店，用于教育和更好的建筑知识。

```
Solution (a 3 layers application :D then!)
  DAL - assembly (only pulls data up and save data)
    - ProductDAL : IProductDal
    - GroupDAL : IGroupDAL
    - UserDAL : IUserDAL

  Service - assembly
    - ProductService : IProductService (calculate products, load product by DAL)
    - GroupService : IGroupService (do some stuff with group, maybe delete group in list with no product)
    - UserService : IUserService (validate if a user can login, load user by dal, check password)
  Models - assembly
    - Product
    - Group
    - User
- Webshop - assembly (ASP.NET MVC) (with all the viewmodel and models, UI Helpers)
          Using DI/IoC as the glue, that sticks it all to getter. 
```

另外：网上商店引用所有程序集。除了接口之外，服务层和 dal 层都知道彼此的注意事项。

我的 Service 和 DAL 接口的最佳位置在哪里？希望这会有所帮助：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:43:22.297

分层规则是依赖关系以一种方式进行，一层只能连接到另外两个层（上层和下层）。一旦定义了程序集所在的层，您必须确保它们在项目中的引用方式符合该规则。较低层不能“引用”较高层。如果您违反了这些规则，那么您的类型不在正确的程序集中。

![在此处输入图像描述](../Images/0edc8447e08e261dfa33db040cb11291.png)

在此图中，BL“连接”到另外两个层，即上层 (UI) 和下层 (DA)。箭头表示 UI 引用了 BL，但 BL 没有引用 UI 层。与 BL 和 DA 相同，BL 对 DA 进行引用，但 DA 不对 BL 进行引用。

# asp.net-mvc-3 - 如何在我的查询的 WHERE 子句中使用值数组

> ID：11945690
> 
> 赞同：0
> 
> 时间：2012-08-14T04:12:31.287
> 
> 标签：asp.net-mvc-3, visual-studio-2010, kendo-ui

我正在使用 asp.net mvc3。我想使用 parameterMap 将数组从视图传递到控制器，如下所示。在我看来：

```
 parameterMap:
            function (data, options) {
               if (options === "read") {
               sessionStorage.setItem("value","array");
               val = sessionStorage.getItem("value"); // contains array
               return { model: JSON.stringify(val) }; //passing array to controller
                }
            } 
```

在控制器中：

```
 public ActionResult SearchDetails( string model)     
  {
     var query = (from ......).where();//want to compare array values in controller

  } 
```

但我无法在控制器中检索这些值。如何在不使用循环语句的情况下在控制器中检索这些值数组？

我的数组只包含整数值（ids），在调试时，当我将光标放在操作方法的参数上时，值将出现在 ""[{\"id\":1},{\"id\":2} ]““ 格式。如何在查询的 WHERE 子句中使用这个值数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:57:19.667

如果您被约束并决心坚持使用字符串输入，我认为调用**Split**会起作用。但是，如果您将其从作为字符串引入更改为仅引入模型，则会容易得多。您是否尝试过类似的方法：

```
 public ActionResult SearchDetails( model model)     
  {
     var query = (from ......).where();//want to compare array values in controller

  } 
```

您是否正在尝试执行与 SQL IN 等效的操作？如果是这种情况，请在查询中使用 .Contains。例如：

```
public ActionResult SearchDetails(model model)
{
    var query = from d in context.data
                where model.Contains(d.id)
                select d;
} 
```

# android - 为什么我的 Android REST 客户端无法连接到我的 REST 服务？

> ID：11945693
> 
> 赞同：1
> 
> 时间：2012-08-14T04:12:53.000
> 
> 标签：android, web-services, rest, mobile

我有一个运行良好的 java REST 服务，我正在尝试通过 Android 客户端访问它，但从未建立连接。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ipn.escom.clientRest.activity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="com.mx.ipn.escom.clientRest.activity.ClientRestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的客户端类，它试图访问我的服务[TemaClient](http://pastebin.com/zix6bfKP)。这是我的 logcat 输出[LogCat](http://pastebin.com/6B7kXm5t)，我不明白为什么从未建立连接。

我的 REST 服务位于 Windows XP 计算机中，我用来访问它的 IP 地址是 ipconfig 显示给我的，如果我将相同的 IP 放在 Web 浏览器上，我会收到响应，但 Android 客户端永远不会连接。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:24:37.490

它接缝你正在访问代理后面的网络，使用代理后面的网络启动模拟器

```
emulator -avd avdname -http-proxy http://192.168.1.1:8080 
```

我假设 avdname 是 avdname 并且代理网关 ip 是 192.168.1.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:44:04.507

修复了这个问题，我必须确保我的 Android 设备连接到与我的 REST 服务相同的网络。

# java - 使用 jpanel 变量在 Jframe 中加载图像

> ID：11945695
> 
> 赞同：1
> 
> 时间：2012-08-14T04:13:41.783
> 
> 标签：java, swing, layout-manager, graphic

我正在使用netbeans 使用swings 构建图像查看器。使用netbeans swing builder GUI 我得到了以下代码，我在父jframe 中放置了一个jpanel。我现在要做的就是在jpanel中打开一个图像并将其添加到jframe

这是代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JPanel;

/**
 *
 * @author Tempo
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() throws IOException {
        initComponents();
        final BufferedImage gray_img=ImageIO.read(new File("C:/Users/Tempo/Pictures/sucess.png"));
                    this.setBounds(0, 0, gray_img.getWidth(), gray_img.getHeight());
                    this.jPanel1 =new JPanel(){
                    @Override
                    public void paint(Graphics g) {
                            // TODO Auto-generated method stub
                            super.paint(g);
                            g.drawImage(gray_img, 0, 0, null);
                    }

                                    };
                    this.add(jPanel1);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 440, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 276, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(153, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>                        

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    NewJFrame frame=new NewJFrame();
//                    frame.setPreferredSize(new Dimension(800,600));
//                    frame.setMinimumSize(new Dimension(200,400));

                    frame.setVisible(true);
                } catch (IOException ex) {
                    Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
                }

            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JPanel jPanel1;
    // End of variables declaration                   
} 
```

当文件运行时，它只显示一个没有图像/（Jpanel）的空白jframe！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:20:25.767

您没有对 提供任何约束`LayoutManager`，它似乎忽略了您的面板。

另一种解决方案是，在一个单独的类文件中创建一个包含所需绘制例程的自定义面板，编译项目，将自定义窗格拖放到 NewJFrame 表单中

或者，在您掌握它之前，手动编码布局。它将使您对正在发生的事情有更大的了解，并使将来更容易解决这些问题。

另外，除非您有充分的理由这样做，否则不要覆盖“paint”，使用它会更好`paintComponent`。

哦，这`this.setBounds(0, 0, gray_img.getWidth(), gray_img.getHeight())`真是个坏主意。您可能会发现布局管理器已经覆盖了这些值。

最好将 a`JScrollPane`用于可变宽度/高度组件。而且您可能需要提供首选尺寸详细信息

# php - php：运算符优先级

> ID：11945699
> 
> 赞同：3
> 
> 时间：2012-08-14T04:13:58.400
> 
> 标签：php, operator-keyword, operator-precedence

我在[http://www.phpinterviewquestions.com/php-interview-questions/operator-precedence/找到了这个问题](http://www.phpinterviewquestions.com/php-interview-questions/operator-precedence/)

以下操作是对还是错？（运算符优先级）

```
$one = true;
$two = null;
$a = isset($one) && isset($two);
$b = isset($one) and isset($two);

echo $a.'<br>';
echo $b; 
```

我试过上面的代码。但只有 $b 被回显为 1（这是真的）。$a 没有得到回应。可能是什么原因？我期待 $a 为 0（假）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T04:15:22.197

这不是关于优先级，而是关于隐式类型转换

使用`var_dump($a);`代替`echo $a;`

`$a`实际上是`false`，但是被回显被强制`false`转换为空字符串。

# visual-c++ - 让 SQLBindParameter 在 C++ 中工作的问题

> ID：11945701
> 
> 赞同：0
> 
> 时间：2012-08-14T04:14:00.037
> 
> 标签：visual-c++, odbc

我下载了一个用 C++ 编写的小示例程序，它打开与 SQL Server 的 ODBC 连接、发出查询并打印结果。

当查询字符串包含参数并且我调用 SQLBindParameter 时，查询执行返回 SQL_SUCCESS 但随后无法获取任何记录。

如果我直接在 SQL Management Studio 中执行等效查询，它就可以工作。

这是代码。请注意，为了**简短起见**，我已经删除了我没有遇到问题的地方的错误检查。真正的连接字符串被混淆了。

```
SQLHANDLE sqlenvhandle = 0;    
SQLHANDLE sqlconnectionhandle = 0;
SQLHANDLE sqlstatementhandle = 0;
SQLHANDLE sqlstatementhandle2 = 0;
SQLRETURN retcode = 0;
SQLWCHAR retconstring[1024];

retcode = SQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &sqlenvhandle);
retcode = SQLSetEnvAttr(sqlenvhandle,SQL_ATTR_ODBC_VERSION, (SQLPOINTER)SQL_OV_ODBC3, 0);
retcode = SQLAllocHandle(SQL_HANDLE_DBC, sqlenvhandle, &sqlconnectionhandle);
retcode = SQLDriverConnect(sqlconnectionhandle, NULL, (SQLWCHAR*)_T("--connectionstring--"),
                            SQL_NTS, retconstring, 1024, NULL, SQL_DRIVER_NOPROMPT);

retcode = SQLAllocHandle(SQL_HANDLE_STMT, sqlconnectionhandle, &sqlstatementhandle2);

SQLWCHAR *query = _T("SELECT * FROM gbm_models WHERE stagename like ?");
SQLWCHAR *searchname = _T("Yuk%\0");

retcode = SQLPrepare (sqlstatementhandle2, query, SQL_NTS);
SQLINTEGER xxx = SQL_NTS;
retcode = SQLBindParameter( sqlstatementhandle2, 1, SQL_PARAM_INPUT, SQL_C_CHAR,
                            SQL_VARCHAR, 5, 0, searchname, 0, &xxx );

SQLWCHAR sqlbuffer[400];
SQLINTEGER buflen = 0;

retcode = SQLExecute (sqlstatementhandle2);

char name[512];
int id;

while(SQLFetch(sqlstatementhandle2) == SQL_SUCCESS)
{
    SQLGetData(sqlstatementhandle2, 1, SQL_C_ULONG, &id, 0, NULL);
    SQLGetData(sqlstatementhandle2, 4, SQL_C_CHAR, name, 500, NULL);
    cout << id << " " << name << endl;
}

SQLFreeHandle(SQL_HANDLE_STMT, sqlstatementhandle2 );
SQLFreeHandle(SQL_HANDLE_STMT, sqlstatementhandle );
SQLDisconnect(sqlconnectionhandle);
SQLFreeHandle(SQL_HANDLE_DBC, sqlconnectionhandle);
SQLFreeHandle(SQL_HANDLE_ENV, sqlenvhandle); 
```

这些调用都没有返回错误。**发生的情况是对SQLFetch**的调用返回 SQL_NO_DATA。如果我替换“？” 在具有实际名称字符串的初始查询字符串中，并注释掉**SQLBindParameter**调用，它可以正常工作并检索预期的数据。很明显，搜索字符串没有正确进入查询。

有什么想法有什么问题吗？有人知道在完成参数替换的情况下获取已**处理的查询字符串的方法吗？**我认为**SQLNativeSql**函数可以做到这一点，但是当我调用它时，我只是取回了原始查询，所以我不确定它是否工作正常或什么。会不会是 Unicode 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:51:35.903

请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms714556(v=vs.85).aspx上的数据类型](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714556(v=vs.85).aspx)

`SQL_C_CHAR`与 不兼容，`SQLWCHAR`因此您的绑定无法正常工作-它使用的是指向双字节宽字符的指针，并且生成的“C-string”不是您所期望的。

使用兼容的数据类型，在您的情况下，只需使用：

```
SQLCHAR *searchname = "Yuk%"; 
```

# android - 在android中按照日期的升序重新排列数据库中的行顺序

> ID：11945704
> 
> 赞同：0
> 
> 时间：2012-08-14T04:14:55.980
> 
> 标签：android, database, sqlite, listview

我有一个sqlite数据库，其中有几行和几列，一列包含日期和时间。我必须根据该日期和时间列的升序重新排列整个数据库这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:18:09.490

```
"select * from " + DB_TABLE + " order by " + KEY_DATE + " asc"; 
```

那会做的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:32:17.027

```
Cursor cursor = this.db.query(TABLE_NAME_2, new String[] { "empid,username,emp_date,imagepath"},
              null , null, null, null, "empid asc"); 
```

你也可以给`empid desc`empid 的降序..

# php - 从其他数组构建数组

> ID：11945708
> 
> 赞同：0
> 
> 时间：2012-08-14T04:15:30.620
> 
> 标签：php, arrays, for-loop

我正在尝试从 simpleXmlElement 构建一个新数组。我得到了我想要的信息，只是不在正确的层次结构中。

```
$xmlNew1 = new SimpleXMLElement($responseNew1);
$test = array();
foreach ($xmlNew1->children() as $newChild){
    $classIden[] = (string)$xmlNew1->class['id'];
    $item[] = (string)$xmlNew1->code;
    $family[] = (string)$xmlNew1->family;
    for($i=0, $count = count($classIden); $i < $count; $i++) {
        $test[$item[$i]][$family[$i]]= $classIden[$i];
    }
}

print_r($test); 
```

这给了我：

```
Array
(
[9522] => Array
    (
        [Mens Hats] => 44
    )

[9522-NC-NO SIZE] => Array
    (
        [Mens Hats] => 44
    )

[B287CSQU] => Array
    (
        [Boys] => 1
    ) 
```

但我想要

```
Array
(
[9522] => Array
(
    [family] => Mens Hats
    [classId] => 44
) 
```

有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:24:43.830

这可能应该这样做（以替换主循环内容）：

```
$id = (string)$newChild->class['id'];
$code = (string)$newChild->code;
$family = (string)$newChild->family;

$items[$code] = array(
    'family' => $family,
    'classId' => $id,
); 
```

**编辑**

忘记使用`$newChild`而不是`$xmlNew1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:00:05.093

我不知道您的层次结构，因为我对 HTML 了解不多。你已经隐藏了结构。但是，您可能应该以您直接查找的格式构建数组。

让我们试着让它变得不那么复杂。假设您有一个包含所有孩子的变量。因此，您可以拆分迭代并加载这些子项。加载：

```
 $xmlNew1 = new SimpleXMLElement($responseNew1);
 $newChildren = $xmlNew1->children(); 
```

我不能说你是否`$xmlNew1->children()`足以让你得到你正在寻找的所有 xml 元素，但我们假设是这样。

下一部分是关于迭代的。如所写，您应该`$test`在迭代孩子时构建数组 - 正如您部分已经做过的那样：

```
$test = array();
foreach ($newChildren as $newChild) {
    ...
} 
```

现在缺少的部分是在以下位置创建您的结构`$test`：

```
Array(
    [9522] => Array(
        [family] => Mens Hats
        [classId] => 44
    ) 
```

我喜欢[@Jack 在](https://stackoverflow.com/a/11945777/367456)这里给出的建议，首先将要提取的值分配给它们自己的变量，然后创建条目。

```
$newItem = array(
    'family' => $family,
    'classId' => $id,
);
$test[$code] = $newItem; 
```

自然，您必须将其放入迭代中。迭代完成后，`$test`数组应该具有您要查找的格式。

我希望这是有帮助的。

# php - PDO中各种数据库的DSN

> ID：11945710
> 
> 赞同：0
> 
> 时间：2012-08-14T04:15:55.093
> 
> 标签：php, database, pdo, helpers

我正在创建一个辅助类并在其中添加一个 PDO 实例。我希望类方法能够连接到各种数据库。绕过它的最佳方法是什么？到目前为止，我有：

```
 public static function connect($dbType, $database, $host, $username,
    $password, $options = array())
{
    switch($dbType)
    {
        case "pgsql":
            $DSN = "pgsql:dbname=$database;host=$host";
            break;

        case "mysql":
            $DSN = "mysql:host=$host;dbname=$database";
            break;

        case .....
    }
} 
```

有没有更好的方法来执行此操作而无需一遍又一遍地检测 $dbType ？有没有更动态的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:37:10.247

我个人认为不需要提供这么多数据库，因为 PDO 并没有抽象出每个驱动程序的复杂查询语言差异和功能:)

话虽如此，您可以创建一个函数来生成 DSN：

```
function generateDSN($type, array $params)
{
    return "$type:" . join(';', array_map(function($v, $k) {
        return "$k=$v";
    }, $params, array_keys($params)));
}

echo generateDSN('mysql', array(
        'dbname' => 'test',
        'host' => 'localhost',
        'charset' => 'utf8',
));

mysql:dbname=test;host=localhost;charset=utf8 
```

# java - 在 android 的可扩展列表视图中创建 2 个组

> ID：11945711
> 
> 赞同：0
> 
> 时间：2012-08-14T04:16:07.057
> 
> 标签：java, android, expandablelistview

嗨，我必须在我的可扩展 listview android 应用程序中创建 2 个组。但我无法开发这个。请帮助我。这是我的代码：

```
SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,
                createGroupList(),              // Creating group List.
                R.layout.group_row,             // Group item layout XML.
                new String[] { "OrderInfo","CustomerInfo"},  // the key of group item.
                new int[] { R.id.order,R.id.customer},

                // ID of each group item.-Data under the key goes into this TextView.
                createChildList(),              // childData describes second-level entries.
                R.layout.single_list_item,  
              //  new String[] {"KEY_ARTIST"},  
               // new int[] { R.id.payment_label}  // Keys in childData maps to display.
                  // Layout for sub-level entries(second level).
               new String[] {"KEY_ARTIST","KEY_DURATION","KEY_SUBTOTAL","KEY_DISCOUNT","KEY_COUPON","KEY_COST"},  
               new int[] { R.id.payment_label,R.id.total_label,R.id.discount_label,R.id.discount_label,R.id.coupon_label,R.id.cost_label}// Keys in childData maps to display.
             //   new int[] { R.id.payment_label,R.id.total_label}     // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }
}

/* Creating the Hashmap for the row */
@SuppressWarnings("unchecked")
private List createGroupList() {
      ArrayList result = new ArrayList();
      for( int i = 0 ; i < 2 ; ++i ) { // 15 groups........
        HashMap m = new HashMap();
       m.put( "OrderInfo","CustomerInfo " + i ); // the key and it's value.

        result.add( m );
      }
      return (List)result;

} 
```

在这里我必须创建 2 组 orderinfo 和 customerinfo..如何创建上面的代码..请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:29:26.530

我认为这是创建的正确方法`Expandable List View`。但可能有一些问题。所以只要通过这个[链接](http://mylifewithandroid.blogspot.in/2011/02/3-level-expandable-lists.html)。

请检查您是否必须通过以下方式扩展您的活动`ExpandableListActivity`

和

在布局中给出 id`android:id="@+id/android:list"`为`ExpandableListView`

# entity-framework - 如何使用实体框架在多层应用程序中正确管理 ObjectContext 生命周期？

> ID：11945715
> 
> 赞同：3
> 
> 时间：2012-08-14T04:16:39.853
> 
> 标签：entity-framework, database-connection

我在 MVC3 应用程序中看到了许多使用实体框架的示例，它们是非常简单的演示，其中只有一个带有 edmx 的 mvc3 Web 项目。

因此，他们可以通过“使用”语句使用打开和关闭连接的最佳实践：

```
using(var context = new SchoolEntities())
{
    // do some query and return View with result.
} 
```

而且，它可以在“使用”语句中正确使用延迟加载（导航属性），因为上下文尚未释放：

```
foreach(var item in student.Course)
{
    // do something with the navigation property Course
} 
```

在成为 n 层应用程序之前，一切似乎都很完美。

我创建了 DAL、BLL 和 MVC3 UI。

**DAL**里面有 edmx，还有像 SchoolDA.cs 这样的操作符类**：**

```
public class StudentDA()
{
    public Student FindStudent(int studentId)
    {
        using(var context = new SchoolContext())
        {
            // do query, return a student object.
        }
    }
} 
```

然后，在 BLL 中，如果我使用：

```
var student = studentDa.FindStudent(103); 
```

然后调用它的**导航属性**：

```
student.Course 
```

我会得到一个错误（当然）：

**ObjectContext 实例已被释放，不能再用于需要连接的操作。**

所以，我必须像这样更改 StudentDA.cs：

```
public class StudentDA() : IDisposable
{
    private SchoolEntites context;

    public StudentDA()
    {
        context = new SchoolEntities();
    }

    public void Dispose()
    {
        context.Dispose();
    }

    public Student FindStudent(int studentId)
    {
        // do query, return a student object.
    }
} 
```

然后，BLL 会变成这样：

```
public Student FindStudent(int id)
{
    using(var studentDa = new StudentDA())
    {
        // this can access navigation properties without error, and close the connection correctly.
        return studentDa.FindStudent(id);
    }
} 
```

在遇到 Update() 方法之前，一切似乎都再次完美。

现在，如果我想更新从 BLL.FindStudent() 获取的学生对象，**context.SaveChanges() 将返回 0，因为上下文已经在 BLL.FindStudent() 中处理**，并且不会更新任何内容数据库。

```
var optStudent = new StudentBO();
var student = optStudent.FindStudent(103);
student.Name = "NewValue";
optStudent.Update(student); 
```

有人知道如何在 3 轮胎应用程序中使用 EntityFramework 吗？或者我怎样才能正确管理上下文。我会经常在 web 层使用导航属性，但我不能总是保持连接打开来消耗服务器内存。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T07:10:00.090

有多种方法可以处理 EF 上下文的生命周期。在 Web 应用程序中，通常上下文对于 HttpRequest 是唯一的。例如，如果您想在 Web 应用程序中手动处理此问题并拥有每个 Thread/HttpRequest EF 上下文，则可以使用以下方法执行此操作（从[http://www.west-wind.com/weblog/posts复制的代码/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management](http://www.west-wind.com/weblog/posts/2008/Feb/05/Linq-to-SQL-DataContext-Lifetime-Management)）：

```
internal static class DbContextManager
{
    public static DbContext Current
    {
        get
        {
            var key = "MyDb_" + HttpContext.Current.GetHashCode().ToString("x")
                      + Thread.CurrentContext.ContextID.ToString();
            var context = HttpContext.Current.Items[key] as MyDbContext;

            if (context == null)
            {
                context = new MyDbContext();
                HttpContext.Current.Items[key] = context;
            }
            return context;
        }
    }
} 
```

然后您可以轻松使用：

```
var ctx = DbContextManager.Current 
```

但我建议您将生命周期管理留给[Autofac](http://code.google.com/p/autofac/)、 [Castle Windsor](http://www.castleproject.org/projects/windsor)或[Ninject](http://www.ninject.org/)等 IoC 框架，它们会自动处理您注册对象的创建/处置以及许多其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T11:47:38.617

感谢您的回答卡米亚尔。我在寻找一种无需使用 IoC 框架来管理 ObjectContext 生命周期的简单策略时遇到了这个问题，这对于我的需求来说似乎有点矫枉过正。

我还在这里看到了你的另一篇文章[，](https://stackoverflow.com/a/11947397/3099615)用于在请求结束时处理上下文。

认为这可能对遇到此问题的其他人有用，因此只需在此处发布我的代码实现：

上下文管理器类 -

```
internal static class MyDBContextManager
    {
        //Unique context key per request and thread
        private static string Key
        {
            get
            { 
                return string.Format("MyDb_{0}{1}", arg0: HttpContext.Current.GetHashCode().ToString("x"),
                    arg1: Thread.CurrentContext.ContextID);
            }
        }

        //Get and set request context
        private static MyDBContext Context
        {
            get { return HttpContext.Current.Items[Key] as MyDBContext; }
            set { HttpContext.Current.Items[Key] = value; }
        }

        //Context per request
        public static MyDBContext Current
        {
            get
            {
                //if null, create new context 
                if (Context == null)
                {
                    Context = new MyDBContext();
                    HttpContext.Current.Items[Key] = Context;
                }
                return Context;
            }
        }

        //Dispose any created context at the end of a request - called from Global.asax
        public static void Dispose()
        {
            if (Context != null)
            {
                Context.Dispose();
            }
    }
} 
```

Global.asax (MVC) -

```
 public override void Init()
    {
        base.Init();
        EndRequest +=MvcApplication_EndRequest; 
    }

    private void MvcApplication_EndRequest(object sender, EventArgs e)
    {
        MyDBContextManager.Dispose();
    } 
```

# mysql - 从多个 ID 获取最后日期的行

> ID：11945716
> 
> 赞同：0
> 
> 时间：2012-08-14T04:16:40.880
> 
> 标签：mysql, sql, database

我目前正在制作应用程序更新程序的后端，并且我使用我的服务器来跟踪所有文件和修订。

目前我的数据库中有两个表：

```
dev_version_control_files
Columns: FileID, FileName

dev_version_control_versions
Columns: VersionID, FileID, Version, DateReleased, FileLocation 
```

files 表为受版本控制的每个文件保留一条记录。版本表为每个文件的每个版本以及它的发布日期、版本号和位置保留一个记录。

现在我想要的是获取文件表中每个文件的最后一条记录（更新）。这应该由日期字段决定，该字段包含从发布时开始的 unix 时间戳。

我不想在每次发出更新请求时都遍历版本表中的每一行，那么可以在一个查询中执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:27:36.890

我不是 SQL 专家，但这行得通吗？

```
SELECT f.*, v.DateReleased
FROM dev_version_control_files f
INNER JOIN (
  SELECT FileId, MAX(DateReleased) AS DateReleased
  FROM dev_version_control_versions
  GROUP BY 1) v ON f.FileID = v.FileID 
```

我现在将在示例表上对此进行测试以查看（我认为某些语法可能已关闭），但想法是从`versions`表中提取最大日期并按 ID 对它们进行分组，然后在 ID 上加入`files` 表。这是你已经在做的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T04:46:39.840

您需要先获得`DateReleased`每个人的最大值，`FileID`然后再加入他们，`dev_version_control_files`然后`dev_version_control_versions`

```
SELECT a.*, b.Version, DateReleased
FROM    dev_version_control_files a 
            INNER JOIN dev_version_control_versions b
                on a.FileID = b.FileID
            INNER JOIN
            (
                SELECT FileID, MAX(DateReleased) MaxDate
                FROM dev_version_control_versions
                GROUP BY FileID
            ) c ON b.FileID = c.FileID AND
                   b.DateReleased = c.MaxDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T04:30:19.407

假设您在第二个表中至少有一个版本记录：

```
SELECT FileID, FileName, MAX(DateReleased)
FROM dev_version_control_files
INNER JOIN dev_version_control_versions ON FileID
GROUP BY FileID, FileName 
```

这不是精确的 SQL，它是我将如何去做的一个粗略的想法。

# xcode - Xcode 4.4 中的 Clang Analyzer 未显示任何问题

> ID：11945717
> 
> 赞同：0
> 
> 时间：2012-08-14T04:16:42.377
> 
> 标签：xcode, clang, static-analysis

在 Xcode 4.4 中对我的项目运行分析显示没有问题。为了测试这一点，我注释掉了一些发布声明，但仍然没有显示任何内容。它曾经显示来自 3rd 方库的一些问题，现在，nada。我该怎么做才能让它再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T16:29:24.047

我通过进入**Xcode -> Preferences -> Locations**并将派生数据的位置更改为**Default**来解决此问题。（不知道它是如何变成非默认的）

# uitableview - NSDate 使我的应用程序崩溃，我不知道为什么

> ID：11945719
> 
> 赞同：0
> 
> 时间：2012-08-14T04:16:59.263
> 
> 标签：uitableview, ios5, crash, nsdate, uidatepicker

基本情况如下：

我需要用 1 个 UIDatePicker 控制 2 次（NSDate）。我在 XCode (v 4.4.1) 中创建了一个新的 Single View 项目，只是为了开始摆弄我需要的项目。我在创建项目时使用了故事板，很容易。在情节提要中，我摆脱了视图控制器并拖出了一个导航控制器。删除了作为根视图控制器的表视图，并添加了一个常规视图控制器作为根视图控制器。在那里我放置了一个按钮。我拖出另一个视图控制器并使用“推送”将根视图控制器上的那个按钮连接到这个新的视图控制器。非常简单。我测试了它，它有效，基本。

我为刚刚添加的新视图控制器创建了一个类，并将情节提要中的视图控制器设置为该类型。然后，在情节提要中，我添加了一个 UIDatePicker、一个 UIButton 和一个 UITableView（请记住，这只是我在尝试让事情正常工作并尝试学习如何使用所有东西，对此仍然很陌生）。

我的 ViewController 类的代码如下：

**新视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface Reminders : UIViewController <UITableViewDataSource, UITableViewDelegate> {
NSInteger selectedRow;
}

@property (nonatomic, retain) NSDate *amTime;
@property (nonatomic, retain) NSDate *pmTime;

@property (nonatomic, retain) IBOutlet UITableView      *tbl;
@property (nonatomic, retain) IBOutlet UIDatePicker *picker;

- (IBAction)timeChange:(id)sender;
- (IBAction)pickerChange:(id)sender;

- (NSString *)dateAsString: (NSDate *)date;

@end 
```

**新视图控制器.m**

```
#import "Reminders.h"

@interface Reminders ()

@end

@implementation Reminders

@synthesize tbl, picker;
@synthesize amTime, pmTime;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    NSLog(@"init");

}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
NSLog(@"did load");

amTime = [NSDate date];
NSLog(@"AM time viewDidLoad: %@", [self dateAsString:amTime]);

pmTime = [NSDate date];
NSLog(@"PM time viewDidLoad: %@", [self dateAsString:pmTime]);

selectedRow = (NSInteger)1;
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

-(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
return 3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
//NSLog(@"cell for row");
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"MyIdentifier"];
}

if (indexPath.row == 0) {
    cell.textLabel.text = @"Dose";
    cell.detailTextLabel.text = @"120";
}
else if (indexPath.row == 1) {
    cell.textLabel.text = @"AM";
    //cell.detailTextLabel.text = @"time am";

    cell.detailTextLabel.text = [self dateAsString:amTime];

}
else if (indexPath.row == 2) {
    cell.textLabel.text = @"PM";
    //cell.detailTextLabel.text = @"time pm";

    cell.detailTextLabel.text = [self dateAsString:pmTime];
}

if (selectedRow == indexPath.row) {
    [tbl selectRowAtIndexPath:[NSIndexPath indexPathForRow:indexPath.row inSection:0] animated:NO scrollPosition:0];
}

return cell;
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (indexPath.row == 0) {
    selectedRow = 0;
}
else if (indexPath.row == 1) {
    selectedRow = 1;
    [picker setDate:amTime];
}
else if (indexPath.row == 2) {
    selectedRow = 2;
    [picker setDate:pmTime];
}
}

- (IBAction)timeChange:(id)sender {
if (selectedRow == 1) {
    amTime = [NSDate date];
    NSLog(@"time change: %@", [self dateAsString:amTime]);
}
else if (selectedRow == 2) {
    pmTime = [NSDate date];
    NSLog(@"time change: %@", [self dateAsString:pmTime]);
}
else {

}

[tbl reloadData];
}

- (IBAction)pickerChange:(id)sender {
if (selectedRow == 1) {
    amTime = [picker date];
    NSLog(@"PICKER time change: %@", [self dateAsString:amTime]);
}
else if (selectedRow == 2) {
    pmTime = [picker date];
    NSLog(@"PICKER time change: %@", [self dateAsString:pmTime]);
}
else {
    NSLog(@"picker does NOTHING");
}

[tbl reloadData];
}

- (NSString *)dateAsString:(NSDate *)date {
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

NSString *stringFromDate = [formatter stringFromDate:date];

return stringFromDate;

} 
```

是的，我完全意识到按钮和日期选择器的操作都在改变时间以及按钮和相应操作存在的原因是因为当我无法让它按我想的方式工作时我开始添加东西它应该一直在工作。

反正。时间似乎开始得很好，但是从我通过检查可以看到的情况来看，有些点是无效的objective-c对象。当它试图将“amTime”放入单元格详细信息文本时，它会阻塞 cellForRowAtIndexPath 方法。

这是踢球者......我创建了相同的应用程序，使用我上面提到的相同步骤，相同的代码（复制粘贴），在另一台机器（具有正确的代码签名密钥的机器）上，并且该版本正常工作，即使我在我当前的机器上运行该项目。当我在当前机器上创建项目时，它崩溃了。

我为这篇文章的长度道歉，但我想尽量提供尽可能多的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:27:53.393

看来您的变量被释放得太早了。我将在实例变量中保存`amTime`和，并在我的代码中通过和访问它们：因为它们是属性，getter/setters 方法将适当地保留/释放。`pmTime``self.amTime``self.pmTime`

raywenderlich.com 上有一个精彩的三部分教程，解释了 iOS 开发中内存管理的基础知识：必读。

[http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial](http://www.raywenderlich.com/2657/memory-management-in-objective-c-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:39:46.730

ARD 在我没有太多努力的情况下完成了这个技巧，但没有 ARC，它只是在 amTime 和 pmTime 变量上加入一些保留。

# java - 如何使用 TermVector Lucene 4.0

> ID：11945728
> 
> 赞同：11
> 
> 时间：2012-08-14T04:17:45.027
> 
> 标签：java, search, lucene

在索引方法中，我使用以下行：

```
Field contentsField = new Field("contents", new FileReader(f), Field.TermVector.YES); 
```

但是，在 Lucene 4.0 中，此构造函数已被弃用，`new TextField`应使用`new Field`.

但问题`TextField`在于它不接受`TermVector`其构造函数。

有没有办法使用新的构造函数在我的 Lucene 4.0 索引中包含术语向量？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T03:41:40.163

我遇到了同样的问题，所以我只是简单地创建了自己的字段：

```
public class VecTextField extends Field {

/* Indexed, tokenized, not stored. */
public static final FieldType TYPE_NOT_STORED = new FieldType();

/* Indexed, tokenized, stored. */
public static final FieldType TYPE_STORED = new FieldType();

static {
    TYPE_NOT_STORED.setIndexed(true);
    TYPE_NOT_STORED.setTokenized(true);
    TYPE_NOT_STORED.setStoreTermVectors(true);
    TYPE_NOT_STORED.setStoreTermVectorPositions(true);
    TYPE_NOT_STORED.freeze();

    TYPE_STORED.setIndexed(true);
    TYPE_STORED.setTokenized(true);
    TYPE_STORED.setStored(true);
    TYPE_STORED.setStoreTermVectors(true);
    TYPE_STORED.setStoreTermVectorPositions(true);
    TYPE_STORED.freeze();
}

// TODO: add sugar for term vectors...?

/** Creates a new TextField with Reader value. */
public VecTextField(String name, Reader reader, Store store) {
    super(name, reader, store == Store.YES ? TYPE_STORED : TYPE_NOT_STORED);
}

/** Creates a new TextField with String value. */
public VecTextField(String name, String value, Store store) {
    super(name, value, store == Store.YES ? TYPE_STORED : TYPE_NOT_STORED);
}

/** Creates a new un-stored TextField with TokenStream value. */
public VecTextField(String name, TokenStream stream) {
    super(name, stream, TYPE_NOT_STORED);
} 
```

}

希望这可以帮助

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-14T14:01:53.047

对于需要没有术语向量的索引字段的用户，TextField 是一个便利类。如果您需要术语向量，只需使用[Field](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/document/Field.html)。它需要几行代码，因为您需要先创建一个[FieldType](http://lucene.apache.org/core/4_0_0-ALPHA/core/org/apache/lucene/document/FieldType.html)`storeTermVectors`的实例，将其设置`tokenizer`为 true，然后在构造函数中使用此`FieldType`实例。`Field`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-02T21:39:21.163

我被这件事难住了一段时间。这里的其他答案很有帮助，但即使有他们，情况对我来说并不明显。因此，在我终于亮起灯后，我决定添加这个额外的答案，以便让下一个人更清楚。

`Field`支持术语向量的签名被贬值的原因是因为它使用了`Field.TermVector enum`从 Lucene 4.0 开始贬值的签名。

`Field`在 Lucene 4.0 中，向支持传递 a 的类添加了一个新的方法签名`FieldType`。该类`FieldType`比旧`enum`方法更灵活，并且提供了设置比以前可用的更多字段选项的能力。

`FieldType`下面是一个示例，说明如何通过在实例化对象时传递对象来创建支持术语向量的非存储文本字段`Field`。

```
 FieldType specialTextFieldType = new FieldType(TextField.TYPE_NOT_STORED);
     specialTextFieldType.StoreTermVectors = true;

     Document exampleDoc = new Document();
     exampleDoc.Add(new Field("SomeField", someData, specialTextFieldType )); 
```

# php - 如何通过php从mysql中删除一行

> ID：11945729
> 
> 赞同：0
> 
> 时间：2012-08-14T04:17:48.010
> 
> 标签：php, mysql, while-loop, delete-row

复习 php 并处理一个我遇到问题的简单程序。我似乎无法弄清楚如何删除 mysql 行。我将把我的脚本链接到一个粘贴文档中，这样你就可以看到我是如何设置它的。

我不熟悉 AJAX 或 Javascript.. 所以我只是将删除按钮做成了一个表单。如果我能让它发挥作用，我想暂时保持这种状态。

[馅饼在这里](http://pastie.org/4471078)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:22:04.753

改变：

```
mysql_query("DELETE FROM name WHERE name=.'$del'."); 
```

到：

```
mysql_query("DELETE FROM name WHERE name='".$_POST['$del']."'"); 
```

因为：
1.你应该摆脱 . 在查询中，点用于字符串连接。
2.你要使用的值`$_POST['$del']`--参数`$del`没有设置

**更新：**

1.  更改`<input type="hidden" name="del" />` 为：`<input type="hidden" name="del" value="theNameYouWantToDelete"/>`
2.  您为所有表单元素指定相同的名称（name="del"） - 不建议这样做！最好为每个对象设置不同的名称。
3.  请不要使用`mysql_*`- 它已被弃用并且容易受到 sql-injection 的影响，请改用 PDO 或 MySQLi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:20:41.660

您没有正确连接`$del`变量。你可以简单地使用：

```
mysql_query("DELETE FROM name WHERE name='$del'"); 
```

另外，您需要在查询`$del`之前进行设置。`DELETE`该变量在您尝试使用它之前尚未声明，因此它将是`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:34:28.497

在第 30 行，您有两个名为 的输入`del`，第二个不包含要删除的名称

```
echo '<form id="del" method="post"><input type="submit" name="del" value="X" /><input type="hidden" name="del" /></form>'; 
```

需要更改为 -

```
echo '<form id="del" method="post"><input type="submit" name="del_submit" value="X" /><input type="hidden" name="del" value="'.$del.'" /></form>'; 
```

然后将第 12-13 行更改为

```
if (isset($_POST['del_submit'])) {
mysql_query("DELETE FROM name WHERE name='".$_POST['del']."'"); 
```

请注意，`mysql_`函数是贬值的，你会受到sql注入的影响。

# javascript - 使用 javascript 将站点 A 中的数据插入站点 B 的表单中

> ID：11945732
> 
> 赞同：0
> 
> 时间：2012-08-14T04:18:09.090
> 
> 标签：javascript, forms, submit

A站是各种学术论文的数据库，B站是各种学术数据的书目数据数据库。

我知道如何使用javascript 和greasemonkey 从站点A 获取和格式化我喜欢的任何数据（例如，作者、标题、提交日期等）。我想获取该数据的一个子集并将其提交到站点 B 上的表单。

站点 B 包括如下输入：

```
<input name="au" size="40" value=""> 
```

各种参考资料都提出了类似的建议

```
document.forms["myform"].submit(); 
```

哪个不起作用。该网页没有类似的东西

```
<form id="myForm"... 
```

虽然它确实有

```
<form method="post" action="/partOfUrl"> 
```

像

```
document.getElementsByName("au").value = "authorName"; 
```

或者

```
document.getElementsByName("au").post = "authorName"; 
```

似乎什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:23:22.030

`getElementsByName`返回一个元素数组，即使只有一个...所以要编辑字段的值 try `document.getElementsByName("au")[0].value = "authorName";`。jQuery 提供了一个不错的表单处理系统，您可以使用它来提交表单，或者您可以在表单的提交按钮上触发点击事件，而不是直接调用提交处理程序

# android - 一次性计费的 Android 应用内计费

> ID：11945734
> 
> 赞同：2
> 
> 时间：2012-08-14T04:18:14.877
> 
> 标签：android, in-app-billing

假设：用户需要登录账户来运行应用程序和购买应用程序项目。
故事：有一位名叫约翰的用户。他在名为“John1”和“John2”的应用程序中注册了两个帐户。
其次，John 使用他唯一的一个 gmail 帐户购买物品 - “john@gmail.com”
问题是，John 以 John1 的身份登录并购买 item1。然后，他注销并以 John2 身份登录。
由于 item1 设置为一次性计费，John2 是否需要再次支付购买 item1 的费用？
对我来说，因为他使用的是单独的帐户，他应该再次支付。
但我不知道谷歌如何处理它。
那么，对于这两个基础，我应该如何以编程方式处理它们？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:19:23.140

我假设“一次性计费”是指“托管”项目。如果是这样，用户将无法再次购买该商品，因为他在 Google Play 上的帐户已经购买了该商品。

如果您想让用户再次购买，请将项目设为“非托管”并将数据存储在您的服务器端数据库中，以了解哪些应用程序用户（而不是 Google Play 用户）购买了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:48:21.707

您不应该允许用户使用相同的电子邮件注册。他必须为不同的帐户使用不同的电子邮件，这是正确和常见的方式。

# ios - iOS 笔刷硬度，如 Photoshop

> ID：11945735
> 
> 赞同：5
> 
> 时间：2012-08-14T04:18:16.747
> 
> 标签：ios, core-graphics, brush, stroke

如何像photoshop一样获得以下画笔平滑度（硬度）效果？ ![](../Images/e3de8ca015d962048d483446687d684c.png)

我的尝试：

```
CGContextRef context = UIGraphicsGetCurrentContext(); 
CGContextSaveGState(context);
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, 30);
CGContextSetStrokeColorWithColor(context, [UIColor colorWithRed:1.0f green:0.0f blue:0.0f alpha:0.5f].CGColor);
CGContextSetShadowWithColor(context, CGSizeMake(0, 0), 20.0f, [UIColor colorWithRed:1.0f green:0.0f blue:0.0f alpha:1.0f].CGColor);
CGContextAddPath(context, path);
CGContextStrokePath(context);
CGContextRestoreGState(context); 
```

我尝试调整 alpha 值和阴影模糊因子，但没有成功的结果。

有人对此有解决方案吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-08T23:05:10.007

在此图像上，您可以看到以下代码结果。我相信这与您想要的几乎相同。

![在此处输入图像描述](../Images/08d1ad4850d88740429e318cb8568cd5.png)

只是外阴影不足以产生平滑的效果，这就是为什么我添加一些内阴影来塑造白色的形状。

```
- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Shadows
    UIColor* shadow = UIColor.redColor;
    CGSize shadowOffset = CGSizeMake(0.1, -0.1);
    CGFloat shadowBlurRadius = 11;
    UIColor* shadow2 = UIColor.whiteColor; // Here you can adjust softness of inner shadow.
    CGSize shadow2Offset = CGSizeMake(0.1, -0.1);
    CGFloat shadow2BlurRadius = 9;

    // Rectangle Drawing
    UIBezierPath* rectanglePath = [UIBezierPath bezierPathWithRoundedRect: CGRectMake(59, 58, 439, 52) cornerRadius: 21];
    CGContextSaveGState(context);
    CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, [shadow CGColor]);
    [UIColor.redColor setFill];
    [rectanglePath fill];

    // Rectangle Inner Shadow
    CGContextSaveGState(context);
    UIRectClip(rectanglePath.bounds);
    CGContextSetShadowWithColor(context, CGSizeZero, 0, NULL);

    CGContextSetAlpha(context, CGColorGetAlpha([shadow2 CGColor]));
    CGContextBeginTransparencyLayer(context, NULL);
    {
        UIColor* opaqueShadow = [shadow2 colorWithAlphaComponent: 1];
        CGContextSetShadowWithColor(context, shadow2Offset, shadow2BlurRadius, [opaqueShadow CGColor]);
        CGContextSetBlendMode(context, kCGBlendModeSourceOut);
        CGContextBeginTransparencyLayer(context, NULL);

        [opaqueShadow setFill];
        [rectanglePath fill];

        CGContextEndTransparencyLayer(context);
    }
    CGContextEndTransparencyLayer(context);
    CGContextRestoreGState(context);

    CGContextRestoreGState(context);
} 
```

关于形状的大小，您必须调整内部和外部阴影模糊半径。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-25T14:11:01.690

通过将阴影与笔画混合，您可以获得类似于您想要实现的效果

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextAddPath(context, path);
CGContextSetLineCap(context, kCGLineCapRound);
CGContextSetLineWidth(context, self.lineWidth);
CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);
CGContextSetShadowWithColor(context, CGSizeMake(0.f, 0.f), self.lineWidth/4, [self.lineColor CGColor]);
CGContextSetBlendMode(context, kCGBlendModeMultiply);
CGContextSetAlpha(context, self.lineAlpha);
CGContextStrokePath(context); 
```

使用正片叠底混合模式，使用白色作为笔触颜色并将您想要的画笔颜色设置为阴影，您会得到以下结果：

[![在此处输入图像描述](../Images/e649cf2e42f42f0d824f4152ef83e65c.png)](https://i.stack.imgur.com/KwAfK.png)

我已经将绘图功能连接到 touchesMoved 事件，这样我绘制图像的一部分所花费的时间越长，“画笔”绘制的越难（见黑线）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T09:38:40.683

这可能不是完美的答案，但它是我能为我的需要做的最好的。

获取 FXBlurView：[https ://github.com/nicklockwood/FXBlurView](https://github.com/nicklockwood/FXBlurView)

完成绘图后，您可以在 FXBlurView 上绘制笔画或将 UIView 转换为 UIImage（使用我从这个答案[https://stackoverflow.com/a/22494886/505259](https://stackoverflow.com/a/22494886/505259)获取的代码）：

```
+ (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0f);
    [view drawViewHierarchyInRect:view.bounds afterScreenUpdates:NO];
    UIImage * snapshotImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return snapshotImage;
} 
```

并在 UIImage 上使用 FXBlurView 的类别：

```
- (UIImage *)blurredImageWithRadius:(CGFloat)radius
                         iterations:(NSUInteger)iterations
                          tintColor:(UIColor *)tintColor; 
```

模糊生成的图像，使其具有 Photoshop 软笔刷般的外观。

不过，我仍在寻找真正的答案。我有一个 OpenCV 项目，它需要 Photoshop 软笔刷工具的精确复制品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T16:37:18.817

我一直在努力绘制具有内在光芒的路径，并且以某种方式成功（至少在我看来）。

[我已经在levinunnick 的 Smooth-Line-View](https://github.com/levinunnink/Smooth-Line-View)上实现了绘图代码。该代码已获得 MIT 许可，因此您需要将其添加到您的项目中。

目前，您可以为要绘制的线条分配线条颜色、宽度和平滑度。注意平滑度，使用 0 - 1 之间的浮点数。我更改了触摸方法，因为我需要从另一个视图访问绘图方法。如果要恢复到触摸方法，请检查原始代码。

我没有优化代码，如果您有更好的主意，请编辑此答案。

这是H文件：

```
@interface LineView : UIView
- (instancetype)initWithFrame:(CGRect)frame andColor:(UIColor *)lineColor andWidth:(CGFloat)lineWidth andSmoothness:(CGFloat)lineSmooth;    
- (void)touchStartedWith:(CGPoint)location;    
- (void)touchMovedWith:(CGPoint)location;
@end 
```

这是 M 文件：

```
#import "LineView.h"

static const CGFloat kPointMinDistance = 0.05f;
static const CGFloat kPointMinDistanceSquared = kPointMinDistance * kPointMinDistance;

@interface LineView ()
@property (strong) UIColor *lineColor;
@property (assign) CGFloat lineWidth;
@property (assign) CGFloat lineSmooth;

@property (assign) CGPoint currentPoint;
@property (assign) CGPoint previousPoint;
@property (assign) CGPoint previousPreviousPoint;
@end

@implementation LineView
{
@private
  CGMutablePathRef _path;
}

- (instancetype)initWithFrame:(CGRect)frame andColor:(UIColor *)lineColor andWidth:(CGFloat)lineWidth andSmoothness:(CGFloat)lineSmooth
{
  self = [super initWithFrame:frame];
  if ( self ) {
    _path = CGPathCreateMutable();

    if ( lineSmooth < 0 ) lineSmooth = 0;
    if ( lineSmooth > 1 ) lineSmooth = 1;

    self.backgroundColor = [UIColor clearColor];
    self.lineColor = lineColor;
    self.lineWidth = lineWidth;
    self.lineSmooth = lineWidth * ( lineSmooth / 4 );
    self.opaque = NO;
  }
  return self;
}

- (void)drawRect:(CGRect)rect
{
  [self.backgroundColor set];
  UIRectFill(rect);

  @autoreleasepool {

    CGColorRef theColor = self.lineColor.CGColor;
    UIColor *theClearOpaque = [[UIColor whiteColor] colorWithAlphaComponent:1];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextAddPath(context, _path);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, self.lineWidth);
    CGContextSetStrokeColorWithColor(context, theColor);

    // Outer shadow
    CGSize shadowOffset = CGSizeMake(0.1f, -0.1f);
    CGFloat shadowBlurRadius = self.lineSmooth;
    CGContextSetShadowWithColor(context, shadowOffset, shadowBlurRadius, theColor);

    CGContextStrokePath(context);

    if ( self.lineSmooth > 0 ) {
      // Inner shadow
      CGRect bounds = CGPathGetBoundingBox(_path);
      CGRect drawBox = CGRectInset(bounds, -2.0f * self.lineWidth, -2.0f * self.lineWidth);

      CGContextSaveGState(context);
      UIRectClip(drawBox);
      CGContextSetShadowWithColor(context, CGSizeZero, 0, NULL);

      CGContextSetAlpha(context, CGColorGetAlpha(theClearOpaque.CGColor));
      CGContextBeginTransparencyLayer(context, NULL);
      {
        // Outer shadow
        UIColor *oShadow = [theClearOpaque colorWithAlphaComponent:1];
        CGContextSetShadowWithColor(context, CGSizeMake(0.1f, -0.1f), self.lineWidth / 64 * self.lineSmooth, oShadow.CGColor);
        CGContextSetBlendMode(context, kCGBlendModeSourceOut);
        CGContextBeginTransparencyLayer(context, NULL);

        [oShadow setFill];

        // Draw the line again
        CGContextAddPath(context, _path);
        CGContextSetLineCap(context, kCGLineCapRound);
        CGContextSetLineWidth(context, self.lineWidth);
        CGContextSetStrokeColorWithColor(context, oShadow.CGColor);
        CGContextStrokePath(context);

        CGContextEndTransparencyLayer(context);
      }
      CGContextEndTransparencyLayer(context);
      CGContextRestoreGState(context);
    }
  }
}

- (void)touchStartedWith:(CGPoint)location
{
  self.previousPoint = location;
  self.previousPreviousPoint = location;
  self.currentPoint = location;

  [self touchMovedWith:location];
}

- (void)touchMovedWith:(CGPoint)location
{
  CGRect drawBox;

  @autoreleasepool {
    CGFloat dx = location.x - self.currentPoint.x;
    CGFloat dy = location.y - self.currentPoint.y;

    if ( ( dx * dx + dy * dy ) < kPointMinDistanceSquared ) {
      return;
    }

    self.previousPreviousPoint = self.previousPoint;
    self.previousPoint = self.currentPoint;
    self.currentPoint = location;

    CGPoint mid1 = midPoint(self.previousPoint, self.previousPreviousPoint);
    CGPoint mid2 = midPoint(self.currentPoint, self.previousPoint);

    CGMutablePathRef subpath = CGPathCreateMutable();
    CGPathMoveToPoint(subpath, NULL, mid1.x, mid1.y);
    CGPathAddQuadCurveToPoint(subpath, NULL, self.previousPoint.x, self.previousPoint.y, mid2.x, mid2.y);

    CGRect bounds = CGPathGetBoundingBox(subpath);
    drawBox = CGRectInset(bounds, -2.0f * self.lineWidth, -2.0f * self.lineWidth);

    CGPathAddPath(_path, NULL, subpath);
    CGPathRelease(subpath);
  }

  [self setNeedsDisplayInRect:drawBox];
}

- (void)dealloc
{
  CGPathRelease(_path);
  _path = NULL;
}
@end 
```

# jquery - 黑莓智能手机 WebWorks jQuery 教程

> ID：11945739
> 
> 赞同：1
> 
> 时间：2012-08-14T04:19:03.637
> 
> 标签：jquery, blackberry-webworks

我需要学习如何使用 Webworks 和 jQuery 进行移动开发，但我是移动编程和 Webworks 的新手。知道任何适合初学者的教程，因为我是移动编程、Webworks 和 Black 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:21:44.113

有一些链接

[移植 jQuery 功能](https://developer.blackberry.com/html5/documentation/porting_jquery_intro_1985571_11.html)

[基础指南：从 jQuery 到 WebWorks](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Fundamentals-Guide-From-jQuery-to-WebWorks/ta-p/1530269)

# ios - 是否可以在网页滚动视图中有一个指示器 - 我的意思是我想要一个可以按住并向上/向下滚动的支架/按钮？

> ID：11945743
> 
> 赞同：0
> 
> 时间：2012-08-14T04:19:35.010
> 
> 标签：ios, cocoa-touch, uiwebview, uiscrollview, xcode4.3

我想在 webview 中有一个滚动支架——基本上我有一个 UIWebView，我在其中打开一个 pdf——这个 pdf 有 100 多页，所以我不希望用户继续滚动直到他的手指开始疼痛但寻找滚动持有人快速向上/向下滚动...

有任何想法吗 ？想法 ？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:32:25.690

您可以沿着 UIWebView 的一侧创建一个单独的视图并在其上处理触摸事件。您还可以添加 UISlider 来处理分页。

# jsp - DisplayTag 中的总属性

> ID：11945752
> 
> 赞同：2
> 
> 时间：2012-08-14T04:21:02.140
> 
> 标签：jsp, jakarta-ee, struts

下面是我的 jsp ，当我向 display:column 添加总属性时，我得到以下异常

```
Caused by: javax.servlet.jsp.JspException: ServletException in '/jsp/frm_Rslt.jsp': /jsp/frm_Rslt.jsp(5,2) The content of elements must consist of well-formed character data or markup. 
```

frm_Rslt.jsp

```
<jsp:root version="1.2" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:display="urn:jsptld:http://displaytag.sf.net">
  <jsp:directive.page contentType="text/html; charset=UTF-8" />

<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%>
<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>

<%AppUtil oAppUtil=new AppUtil();%>
<jsp:useBean id="realTimeIssuance" scope="session" class="com.actionform.afRealTimeIssuance"></jsp:useBean>

<display:table name="realtimereportcol" export="true" pagesize="25" sort="list" id="data" requestURI="" class="tablelist" decorator="org.displaytag.decorator.TotalTableDecorator">
        <display:setProperty name="export.csv" value="false"/>
        <display:setProperty name="export.xml" value="false"/>
        <display:setProperty name="export.excel.filename">RealTimeIssuance_<%=oAppUtil.getSystemDateTime()%>.xls</display:setProperty>

        <display:column title="SUB_CHANNEL" sortable="true" property="sub_channel" group="1"></display:column>
        <display:column title="AGENT_NAMES" sortable="true" property="agent_names"></display:column>
        <display:column title="FTD" sortable="true" property="ftd" total="true"></display:column>
        <display:column title="MTD" sortable="true" property="mtd" total="true"></display:column>
        <display:column title="QTD" sortable="true" property="qtd" total="true"></display:column>

</display:table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:33:18.120

如果您查看标签的[文档](http://www.displaytag.org/1.2/displaytag/tlddoc/display/column.html)，`<display:column>`您会发现该`total`属性的以下描述：

> **total：**如果为真，将汇总此列的内容。该值可通过表的 varTotals 中命名的 Map 获得。***列值需要是 Numbers***。

所以请检查列`FTD`,`MTD`和`QTD`是否为数字。

# .net - 在 COM (Visual Basic 6) 中引用未签名的 .NET 程序集

> ID：11945767
> 
> 赞同：2
> 
> 时间：2012-08-14T04:23:24.370
> 
> 标签：.net, com

在我深入研究兔子洞之前......一个快速的问题......

是否可以？

我们在 Visual Basic 6 中创建了这个遗留系统，我们开始将它移植到 .NET，我们希望它是未签名的。问题是我们每次有更新时都必须签署我们的公共库。（公共库在不同产品之间共享）。

由于我们无法立即移植所有内容，因此我们首先开始移植服务器。目前，我们将客户端接口设计为 COM 可见，以便 Visual Basic UI 可以调用它们。

我们拥有的通用框架 dll 是未签名的，目前许多项目都在使用它。但是对于这个产品，我们需要重新签名，这是太多的工作要做。

如果这是不可能的，是否有任何其他方式，如包装，或一些技术来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:59:07.400

我认为这会很棘手，因为有两件事（我猜你可能已经发现了）：

1.  您不能对未签名的库进行 regasm，以便将其公开给 COM。
2.  您不能从已签名的库中引用未签名的库。

也许有人有更好的主意，但考虑到这两个限制，我认为你唯一能做的就是反思一些令人讨厌的事情......

假设您在一个未签名的库中有一个类，您想向 COM 公开它，如下所示：

```
public class TestClass
{
    public string SaySomething()
    {
        return "Hello";
    }
} 
```

您可以从未签名的程序集中引用已签名的程序集，因此第一步可能是为您希望向 COM 公开的类的位创建一个接口，并将这些接口放入一个新的**已签名**程序集中。在我们的例子中，假设我们这样定义接口（您可以摆弄各种 COM 属性以使其符合您的喜好）：

```
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface ITestClass
{
    string SaySomething();
} 
```

现在从您的原始程序集引用该新程序集并更改类定义以使其实现接口。

```
public class TestClass : ITestClass 
```

现在，回到你签名的程序集并添加一个看起来像这样的小助手工厂（这样做是可选的，但我认为在一个地方这样做是个好主意）：

```
internal static class ClassFactory
{
    // Depending on how you aer hosting this you can use a relative 
    // path here (maybe) - this gets a bit tricky to sort out and is
    // most likely what will cause problems
    private static readonly Assembly UnsignedAssembly =
        Assembly.LoadFrom(@"C:\...\COMClassLibrary.dll");

    internal static T CreateClass<T>(string typeName)
    {
        return (T)Activator.CreateInstance(UnsignedAssembly.GetType(typeName));
    }
} 
```

最后一步是创建你的类的打包版本，你可以像这样向 COM 公开：

```
[ClassInterface(ClassInterfaceType.None)]
[ProgId("MyClasses.TestClass")]
public class TestClassWrapped : ITestClass
{
    private readonly ITestClass _original;

    public TestClassWrapped()
    {
        _original = ClassFactory.CreateClass<ITestClass>(
            "COMClassLibrary.TestClass");
    }

    public string  SaySomething()
    {
        return _original.SaySomething();
    }
} 
```

现在使用 regasm 为 COM 注册您的签名程序集，这样就可以了。非常乏味，但考虑到您的限制，这是我唯一能想到的。

推荐阅读：

*   [类接口属性](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.classinterfaceattribute.aspx)
*   [接口类型属性](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.interfacetypeattribute.aspx)
*   [RegAsm 命令行](http://msdn.microsoft.com/en-us/library/tzat5yw6%28v=vs.71%29.aspx)

# task - CancellationTokenSource vs 手动结束任务

> ID：11945770
> 
> 赞同：3
> 
> 时间：2012-08-14T04:24:06.693
> 
> 标签：task, cancellationtokensource

说我创建一个任务

```
bool aBoolean = true;

Task.Factory.StartNew(() =>
    while(aBooloean)    {
       ...
    }
} 
```

通过全局布尔值退出任务是否更好地退出任务？

还是使用 CancellationTokenSource 更好？

什么时候适合使用 CancellationTokenSource 结束任务？

当您使用 CancellationTokenSource 并使事物处于不一致状态时，它是否只是抛出异常？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:45:16.943

拥有“全局”布尔值存在被优化或缓存到 CPU 缓存中的风险，您可能看不到值的变化。 `CancellationTokenSource`是取消 a 的*推荐*方法`Task`。Task 使用 Token 来测试是否请求取消并简单地从 Task 的 Action 委托返回。如果您不想，则无需抛出异常。

# javascript - 为什么我的网站中的脚本出现此错误？

> ID：11945771
> 
> 赞同：0
> 
> 时间：2012-08-14T04:24:13.400
> 
> 标签：javascript, jquery, css, menubar

我正在尝试通过添加以下由该社区中一位出色的开发人员和人员建议的代码来解决我在网站中使用 JQuery LavaLamp 菜单栏所面临的问题：

```
<script>
if ($.browser.version < 9.0 && $.browser.msie) {
document.getElementsByTagName("head")[0].innerHTML = '<script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script><script type="text/javascript" src="./Scripts/jquery.preloader.js"></script><script type="text/javascript"  src="./Scripts/jquery.lavalamp.js"></script><script type="text/javascript" src="./Scripts/lavalamp-config.js"></script>';
}
else {
    document.getElementById("head")[0].innerHTML = '<script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script><script type="text/javascript" src="./Scripts/jquery.preloader.js">';
}

​​&lt;/script>​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

在 Visual Studio 2010 中，出现以下错误

> 未终止的字符串常量

在以下行下：

```
document.getElementsByTagName("head")[0].innerHTML = '<script type="text/javascript" src="./Scripts/jquery.easing.1.1.js"></script><script type="text/javascript" src="./Scripts/jquery.preloader.js"></script><script type="text/javascript"  src="./Scripts/jquery.lavalamp.js"></script><script type="text/javascript" src="./Scripts/lavalamp-config.js"></script>'; 
```

**那么我该如何解决这个问题呢？**

**更新＃1：**

我将代码更新为您建议的内容，但仍然遇到相同的错误。此外，这是错误的快照：

![在此处输入图像描述](../Images/2b58860e191eb1b2dbfd0a15d4cf52d7.png)

**更新#2** 我修改了我的代码，让母版页包含以下代码，但我仍然收到与上面快照中显示的页面顶部相同的错误。

```
<head>
<script type="text/javascript">
function getInternetExplorerVersion()
    // Returns the version of Internet Explorer or a -1
    // (indicating the use of another browser).
    {
        var rv = -1; // Return value assumes failure.
        if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null)
                rv = parseFloat(RegExp.$1);
        }
        return rv;
    }
</script>

<script type="text/javascript">
 if (getInternetExplorerVersion() < 9.0 && browser_type  = "Microsoft Internet Explorer") {
    document.getElementsByTagName("head")[0].innerHTML = "<script  type='text/javascript' src='./Scripts/jquery.easing.1.1.js'></script><script type='text/javascript' src='./Scripts/jquery.preloader.js'></script><script type='text/javascript'  src='./Scripts/jquery.lavalamp.js'></script><script type='text/javascript' src='./Scripts/lavalamp-config.js'></script>";
 }  else {
       document.getElementById("head")[0].innerHTML = "<script type='text/javascript' src='./Scripts/jquery.easing.1.1.js'></script><script type='text/javascript' src='./Scripts/jquery.preloader.js'>";
   }
​​&lt;/script>​​​​​​​​​​​​​​​​​​​​​​​​​​​
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:54:05.470

结束脚本标记很可能被浏览器解释为当前脚本块的结尾，即使它们位于字符串文字内，这反过来意味着特定的字符串文字未终止。

在您的字符串中，而不是

```
'</script>' 
```

你可以做

```
'<\/script>' 
```

（当 JS 运行时，反斜杠被忽略。）或者有时你会看到类似的东西：

```
'<' + '/script>' 
```

或将 替换`<`为等效的字符代码：

```
'\x3C/script>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:28:41.043

试试这个，使用下面的函数来获取浏览器版本号

```
 function getInternetExplorerVersion()
    // Returns the version of Internet Explorer or a -1
    // (indicating the use of another browser).
    {
        var rv = -1; // Return value assumes failure.
        if (navigator.appName == 'Microsoft Internet Explorer') {
            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null)
                rv = parseFloat(RegExp.$1);
        }
        return rv;
    } 
```

和下面用于获取浏览器名称

var browser_type = navigator.appName ("Microsoft Internet Explorer")

所以你的新功能看起来像

```
 if (getInternetExplorerVersion() < 9.0 && browser_type  = "Microsoft Internet Explorer") {
    document.getElementsByTagName("head")[0].innerHTML = "<script  type='text/javascript' src='./Scripts/jquery.easing.1.1.js'></script><script type='text/javascript' src='./Scripts/jquery.preloader.js'></script><script type='text/javascript'  src='./Scripts/jquery.lavalamp.js'></script><script type='text/javascript' src='./Scripts/lavalamp-config.js'></script>";
 }  else {
       document.getElementById("head")[0].innerHTML = "<script type='text/javascript' src='./Scripts/jquery.easing.1.1.js'></script><script type='text/javascript' src='./Scripts/jquery.preloader.js'>";
   } 
```

# java - 带有aspectj注释的Spring AOP

> ID：11945775
> 
> 赞同：0
> 
> 时间：2012-08-14T04:24:37.443
> 
> 标签：java, spring, aop, aspectj

很抱歉我的问题有点傻，但我需要理解，我正在尝试编写一个基于 spring aop 的记录器，我知道有几种实现方式，比如基于 xml 的模式或 aspectj 注释，以防我更喜欢aspectj annotations 是否意味着我根本不需要 xml 配置文件？我已经阅读了很多教程和示例，其中一些是使用 xml 的，而另一些则不是，现在我已经搞砸了，有人可以为新手或母马提供一个很好的解释吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T13:36:14.203

如果您指的是在 Spring AOP 中使用 AspectJ 注释，那么您将需要在 Spring 端进行一些 XML 配置，但主要可以使用注释来管理方面。您需要的 XML 配置至少是：

1.  打开 AOP 自动代理`<aop:aspectj-autoproxy/>`
2.  使用 Spring 组件扫描来查找带注释的方面`<context:component-scan base-package="package.of.some.aspect" />`

一个例子可以在[这里找到](http://weblogs.java.net/blog/seemarich/archive/2007/11/annotation_base.html)

您应该注意，AspectJ 注释如何应用于 Spring AOP 有几个限制，可以在[Spring 文档中找到](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)

# c++ - C中的蓝牙MAC地址

> ID：11945776
> 
> 赞同：2
> 
> 时间：2012-08-14T04:24:37.677
> 
> 标签：c++, windows, bluetooth

如何在Windows中找到蓝牙网络接口的MAC地址（硬件地址）？问题不是找到地址，问题是识别网络接口类型是否为蓝牙。

我尝试过的两种方法都没有区分以太网卡和蓝牙（至少我没有看到区别）-[`GetAdaptersAddresses`](http://msdn.microsoft.com/en-us/library/aa450393.aspx)返回蓝牙接口（`IF_TYPE_ETHERNET_CSMACD`与WiFi 相同，尽管存在无线类型`WMI`）`AdapterTypeID`。`Ethernet 802.3`

我目前看到的唯一可能性是搜索文本“蓝牙”的名称或描述字符串，但这似乎不是好的解决方案;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T15:04:52.677

您可以使用`BluetoothFindFirstRadio`和。适配器的本地 MAC 地址则位于以下字段中：`BluetoothFindNextRadio``BluetoothGetRadioInfo``address``BLUETOOTH_RADIO_INFO`

```
BLUETOOTH_FIND_RADIO_PARAMS btfrp;
btfrp.dwSize = sizeof(btfrp);
HANDLE hRadio;
HBLUETOOTH_RADIO_FIND hFind = BluetoothFindFirstRadio(&btfrp, &hRadio);

if(hFind == NULL)
{
    DWORD err = GetLastError();
    switch(err)
    {
    case ERROR_NO_MORE_ITEMS:
        // No bluetooth radio found
        break;
    default:
        // Error finding radios
    }

    return;
}
do
{
    BLUETOOTH_RADIO_INFO radioInfo;
    radioInfo.dwSize = sizeof(radioInfo);
    DWORD err = BluetoothGetRadioInfo(hRadio, &radioInfo);
    if(err != ERROR_SUCCESS)
    {
       // Error during BluetoothGetRadioInfo
        continue;
    }
    // The mac address is in radioInfo.address

}
while(BluetoothFindNextRadio(hFind, &hRadio));

BluetoothFindRadioClose(hFind); 
```

# java - 加载 jniopencv_core7109340164936655704.dll：用于 javacv

> ID：11945778
> 
> 赞同：0
> 
> 时间：2012-08-14T04:24:45.843
> 
> 标签：java, opencv, javacv

我的电脑是 32 位的，我下载了适用于 win32 和 i ins 的 opencv 2.4.2 版本。，我也包括环境变量的路径。但我仍然有以下异常

线程“主”java.lang.UnsatisfiedLinkError 中的异常：C:\Users\Francis\AppData\Local\Temp\jniopencv_core7109340164936655704.dll：找不到依赖库

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:35:59.750

以下是完整的配置步骤。让它检查。

> 1.  安装 Microsoft Visual C++ Redistributable Packages x86[下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=5555)
>     
>     
> 2.  解压 OpenCV-2.4.2-win-superpack.exe 到根目录 C:\
>     
>     
> 3.  配置路径：在系统路径中添加以下环境变量（确保文件夹路径正确）32位版本的JDK：
>     `C:\opencv\build\common\tbb\ia32\vc10\;C:\opencv\build\x86\vc10\bin\;`
>     
>     
> 4.  添加 .jar 文件（与您的系统版本匹配）以构建项目路径。

# asp.net - 如何匹配 vb.net 和 asp.net 中的答案？

> ID：11945781
> 
> 赞同：1
> 
> 时间：2012-08-14T04:25:18.823
> 
> 标签：asp.net, vb.net

我随机将 3 个问题显示在 asp.net 页面上。我想将安全问题与数据库中的正确答案相匹配。但是当我在文本框中输入正确答案并单击“下一步”按钮后，答案与屏幕上显示的当前问题不匹配。但是，如果我单击“下一步”按钮，显示的下一个问题与我在上一个问题的文本框中输入的答案相匹配。我认为这是因为刷新页面后答案与问题和答案相匹配。请帮忙。这是我的代码。谢谢

vb.net代码

```
Dim SecurityQuestion As New DBDataContext
Dim randomNumber As Integer

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim SecurityQuestion As New DBDataContext
    Dim rowCount As Integer = (From t In SecurityQuestion.tblSecurityQuestions Select t).Count + 1
End Sub

Protected Sub btnNext_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnNext.Click
    ValidateAnswer()
End Sub

Private Sub LoadSecurityQuestion()
    Dim SecurityQuestion As New DBDataContext
    Dim mySecurityQuestion = (From c In SecurityQuestion.tblSecurityQuestions Where c.PkID = randomNumber Select c)
    Dim rowCount As Integer = (From t In SecurityQuestion.tblSecurityQuestions Select t).Count + 1
    randomNumber = New Random().Next(1, rowCount)
    With gvQuestion
        .DataSource = mySecurityQuestion
        .DataBind()
    End With
End Sub

Private Sub ValidateAnswer()
    Dim SecurityQuestion As New DBDataContext
    Dim validate = (From r In SecurityQuestion.tblRegistrations From s In SecurityQuestion.tblSecurityQuestions _
        Where s.PkID = r.Q01 And r.A01 = txtSecurityAns.Text And r.UserID = ad And s.PkID = randomNumber _
        Select r)

    If validate.Count > 0 Then
        Msg3.Text = "Correct Answer"
    Else
        Msg3.Text = "Invalid Answer"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:41:06.647

在我发布此答案时，您的代码*似乎**可能*丢失了一小部分。例如，我看不到您实际调用方法 LoadSecurityQuestion 的位置，但*听起来*您可能会在验证成功后重新调用方法 LoadSecurityQuestion。

我*认为*您可以通过使用“if”限定符包装对 LoadSecurityQuestion 的调用来解决此问题。例如，*假设*您在 Load Event 处理程序中调用 LoadSecurityQuestion。如果您这样做了，您的新 Load 事件处理程序可能会显示如下内容：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    ...
    If IsPostBack Then
        ' If you wrap all of your Me.LoadSecurityQuestion calls 
        ' with "If" statements like this one, then it should keep
        ' the security question from changing when the user 
        ' enters the correct answer
        If Msg3.Text <> "Correct Answer" Then                
            Me.LoadSecurityQuestion()
        End If
    End If
    ...
End Sub 
```

# iphone - iphone gwtphonegap 地理位置始终开启

> ID：11945782
> 
> 赞同：1
> 
> 时间：2012-08-14T04:25:36.347
> 
> 标签：iphone, gwt, cordova, geolocation

在**gwtphonegap 1.7.0.0** (iPhone) 上，我使用地理定位服务在应用程序的开头只获取一次用户的位置

```
 GeolocationOptions options = new GeolocationOptions();
    options.setMaximumAge(1000);
    options.setEnableHighAccuracy(true);
    phoneGap.getGeolocation().getCurrentPosition(callback, options); 
```

调用仅在开始时进行一次，之后无需更新位置。

问题是，当我在 iPhone 上运行我的应用程序时，状态栏上的 GPS 指示器一直亮着，即使我获得了正确的位置。这可能会导致无用的电池使用。

有没有办法告诉地理定位服务在获得位置后停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:40:52.007

底层 phonegap 库似乎有[start() 和 stop() 方法](https://github.com/sintaxi/phonegap/blob/master/iphone/PhoneGapLib/javascripts/core/geolocation.js)。您可能需要扩展 gwtphonegap。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:13:23.367

似乎我们缺少 gwt phonegap 实现中的例程。我刚刚重新检查过，它们不是文档的一部分。

我刚刚发布了 gwt-phonegap 项目的问题：[http ://code.google.com/p/gwt-phonegap/issues/detail?id=57](http://code.google.com/p/gwt-phonegap/issues/detail?id=57)

作为一种解决方法，您可以转到 jsni 并直接调用 start/stop 方法。

# jquery - 为什么我不能 在 Google Chrome 中使用 jQuery 1.7.2 切换可见性？

> ID：11945783
> 
> 赞同：4
> 
> 时间：2012-08-14T04:25:38.730
> 
> 标签：jquery

看到这个小提琴： http: [//jsfiddle.net/Walkman/ZpF8F/](http://jsfiddle.net/Walkman/ZpF8F/)
如果我尝试`.toggle()` `<br>`元素，它们不会消失，但`.hide()`它可以工作。为什么 ？

这两种方法有什么区别？
此外，如果您先隐藏它们，然后再`.toggle()`取消隐藏它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:36:12.550

这是 jquery 网站上的错误票证，这可能会清除您的疑问

[http://bugs.jquery.com/ticket/11289](http://bugs.jquery.com/ticket/11289)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:30:21.480

**Toggle**将隐藏一个带有内容的标签，这里是一个[例子](http://jsfiddle.net/SZfVf/)，而**hide**只是隐藏标签，即使里面没有内容。

有关差异的更多详细信息，您仍然可以查看[jquery 1.8 的源代码](http://code.jquery.com/jquery-1.8.0.js)

# java - 在 Eclipse 中使用 antlr-3.4-complete.jar 很慢

> ID：11945784
> 
> 赞同：0
> 
> 时间：2012-08-14T04:25:48.700
> 
> 标签：java, eclipse, antlr

不久前我深入研究了 Antlr，但我注意到编译时间长得令人难以置信（当 Eclipse 抱怨 Antlr 时，编译时间将保持在 100% 5 分钟）。当所有 Antlr 引用都被删除，但仍包含 antlr-3.4-complete.jar 时，问题仍然存在。一旦它从构建路径中删除，编译时间就会回到无穷小。

此外，在 Eclipse 会话中多次编译会导致内存不足错误。

会发生什么？真的每次都重新编译整个 ANTLR 库吗？如何及时编译？

**编辑**： eclipse 给出的投诉是关于内部类的警告（如下所示）。

> [2012-08-13 22:23:39 - HoloCalc] Dx 警告：忽略不带有关联 EnclosureMethod 属性的匿名内部类 (antlr.TokenStreamRewriteEngine$1) 的 InnerClasses 属性。此类可能是由不针对现代 .class 文件格式的编译器生成的。推荐的解决方案是从源代码重新编译类，使用最新的编译器并且不指定任何“-target”类型选项。忽略此警告的后果是此类上的反射操作将错误地指示它*不是*内部类。

# javascript - 与超类的依赖关系

> ID：11945790
> 
> 赞同：0
> 
> 时间：2012-08-14T04:27:31.733
> 
> 标签：javascript, node.js, coffeescript

我正在更新这个，因为虽然问题得到了回答，但与标题无关的是:) 我怎样才能最好地管理 CoffeeScript 类的依赖关系？

假设我有一个超级类，'utils.coffee'：

```
fs = require 'fs'
# another bazillion libs

class Utils

  doThis: () ->
    console.log 'done!'

exports.Utils = Utils 
```

在我的子类中，我可以轻松调用`doThis`. 但我无法`fs`在没有收到错误的情况下引用：`ReferenceError: fs is not defined`. `myclass.coffee`：

```
{Utils} = require './utils.coffee'

class MyClass extends Utils

  doThat: () ->

    fs.readFile 'any_old_file', (error, fd) =>   
      buffer = fd.toString()

      # do stuff

exports.MyClass = MyClass 
```

比我们运行它：

```
{MyClass} = require('./myclass.coffee')
myclass = new MyClass()

myclass.doThis() # Cool!
myclass.doThat() # Not good 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:45:19.663

你不应该把`@`你的`trace`方法放在前面。这使它成为类级函数而不是实例级函数，以及该类中的所有其他方法。

```
trace: (className, method) -> 
```

我还建议您将 require 调用移到顶级范围内，因为没有理由在每次实例化对象时调用 require。

而不是这个：

```
@restler = require('restler')
@_ = require('underscore') 
```

只需将其放在顶部：

```
restler = require 'restler'
_ = require 'underscore' 
```

还有更好的 Coffeescript 方法来做到这一点：

```
Utils = require('./utils.coffee').Utils 
```

这是：

```
{Utils} = require './utils.coffee' 
```

而不是这个：

```
(if (results and results.length > 1) then results[1] else '') 
```

只需这样做：

```
if results?.length > 1 then results[1] else '' 
```

我也认为：

```
@buildKey: (args) 
```

应该可能是一个splat，并且可以像这样重写：

```
buildKey: (args...)
    @debug(@getName(), 'buildKey', "arg: #{arg}") for arg in args
    return args.join ':' 
```

### 编辑

我建议您熟悉 CoffeeScript 范围规则，因为这似乎是您大多数问题的根源。

你班上有`@fs = fs`。`Utils`这相当于`Utils.fs = fs;`用 JavaScript 编写。然后你尝试`fs`在你的`MyClass`类中使用它来访问它，这是没有意义的，因为 fs 不在范围内，因为它附加到 Utils。

`Utils.fs.readFile 'any_old_file', (error, fd) =>`如果您想访问`fs`之前保存的参考，您必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:01:08.317

仅引用文件`fs`内部`utils.coffee`，但在外部`Utils`，不允许我从另一个文件访问它。我不得不这样设置：

```
fs = require 'fs'
# another bazillion libs

class Utils

  @fs = fs

  doThis: () ->
    console.log 'done!'

exports.Utils = Utils 
```

比，我只是像这样访问它：

```
{Utils} = require './utils.coffee'

class MyClass extends Utils

  doThat: () ->

    Utils.fs.readFile 'any_old_file', (error, fd) =>   
      buffer = fd.toString()

      # do stuff

exports.MyClass = MyClass 
```

# java - 错误显示xls的内容

> ID：11945793
> 
> 赞同：0
> 
> 时间：2012-08-14T04:28:06.987
> 
> 标签：java, apache-poi

我写了一个程序：可以从 1 到 49 中选择 12 个数字，生成的组合数字会自动显示在电子表格中，因此每列将有 6 个数字。

下面是我的代码。

```
import java.io.FileOutputStream;
import java.io.IOException;
import org.apache.poi.ss.usermodel.CreationHelper;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class Lotto {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
         int lotto[ ] = new int [12];
            boolean drawn;
            for (int i=0; i<12; i++) {
                    do {
                            drawn = false;
                            lotto[i] = (int)(49*Math.random())+ 1;
                            for (int j=0; j<i; j++)
                                    if (lotto[i] == lotto[j])
                                            drawn = true;
                    } while (drawn);
            }

            for(int i=0;i<12;i++){
                System.out.println(lotto[i]);
            }
            XSSFWorkbook wb = new XSSFWorkbook();
            FileOutputStream fileOut = new FileOutputStream("D:/workbook.xlsx");
            CreationHelper createHelper = wb.getCreationHelper();
            XSSFSheet sheet = wb.createSheet("new sheet");
            int i=0;
            while(i<lotto.length/6){
                 XSSFRow row = sheet.createRow(i);
            for(int k=0;k<6;k++){
                for(int j=0;j<lotto.length;j++){

            row.createCell(k).setCellValue(lotto[j]);
                }
            }
            i++;
    }
           // FileOutputStream fileOut = new FileOutputStream("workbook.xls");
            wb.write(fileOut);
            fileOut.close();

    }

} 
```

例如上面程序生成的随机数如下。

```
30 44 39 7 6 33 19 28 31 21 49 22 
```

但在 xls 文件中，它插入为

```
30 30 30 30 30 30
44 44 44 44 44 44 
```

我需要输出为

```
30 44 39 7 6 33
19 28 31 21 49 22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:29:56.760

我认为这可能是一个逻辑问题。尝试这个：

```
XSSFRow row = null;
int rowCounter = 0;
int cellCounter = 0;
for (int i = 0; i < lotto.length; i++) {
   if ((i % 6) == 0) {
      cellCounter = 0;
      row = (XSSFRow) sheet.createRow(rowCounter);
      rowCounter++;
   }
   row.createCell(cellCounter).setCellValue(lotto[i]);
   cellCounter++;
} 
```

# ruby-on-rails - Rails：助手返回正确的 SQL 结果但忽略列

> ID：11945797
> 
> 赞同：0
> 
> 时间：2012-08-14T04:28:25.533
> 
> 标签：ruby-on-rails, ruby, activerecord

我的 ApplicationHelper 文件中有一个可以正常工作的助手：

```
def latest_issue
  @issue = Issue.find(:all, :order => "id DESC", :limit => 1)
  return @issue
end 
```

之后， using`@issue`在任何视图中都可以正常工作，但考虑到`@issue`有一个名为`message`using的列会`@issue.message`返回无方法错误。

任何帮助都会很棒！干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:01:04.653

正如[Kyle C 所说](https://stackoverflow.com/a/11945830/229044)，当您应该从助手返回一个问题时，您正试图访问*一系列*`message`问题的成员。

 *假设您使用的是 Rails 3，您的助手的一个大大改进的版本将这样编写：

```
def latest_issue
  Issue.order(:id).last
end 
```

关于编写 idomatic Ruby 的一些注意事项：

*   避免显式 `return`语句，让最后一个语句作为方法的返回值
*   使用可链接的方法，如`order()`, `where()`, 和`limit()`而不是将参数传递给`find`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T04:33:10.807

问题实例变量返回一个对象数组而不是实例。如果您想选择一个问题对象的属性，您需要返回该对象的一个​​实例。

```
 @issue = Issue.find(:last)
 @issue.message 
```

您可能正在尝试输出问题对象的所有消息属性，如果是这种情况，您需要将 @issue 传递给块

```
 @issue.each do  |issue|
   issue.message
 end 
```*

# python - Python + 使函数更通用

> ID：11945798
> 
> 赞同：2
> 
> 时间：2012-08-14T04:28:29.947
> 
> 标签：python, django

如果可能的话，我想要一些关于如何使它更通用的指导：

```
def get_industry_choices(self):
    industries = Industry.objects.all().order_by('name')
    ind_arr = [(ind.id, ind.name) for ind in industries]

    return ind_arr 
```

基本上，此函数将按`choices`预期返回`forms.ChoiceField`。我需要在几个地方这样做，并且想让上面的函数更通用。我知道如何获得`industries = Industry.objects.all().order_by('name')`通用的，但第二部分是我不确定的。创建元组时，它具有`(ind.id, ind.name)`. 可以是任何值，`ind.name`具体取决于传入的模型（它可能并不总是`name`在模型中）。

我试图在几个地方阅读此内容，包括：

[将带参数的函数传递给Python中的另一个函数？](https://stackoverflow.com/questions/803616/passing-functions-with-arguments-to-another-function-in-python)

上面的资源显示了如何使用传入的函数来完成它，但这似乎有点矫枉过正？如果无论如何我都必须将一个函数作为参数传递，那么用一个更多的函数使它更通用有什么意义呢？

**[编辑]**

基本上我想产生类似的东西：

```
TITLE_CHOICES=(
    (1, 'Mr.'),
    (2, 'Ms.'),
    (3, 'Mrs.'),
    (4, 'Dr.'),
    (5, 'Prof.'),
    (6, 'Rev.'),
    (7, 'Other'),
) 
```

因此，当我这样做时，`forms.ChoiceField`我可以通过`TITLE_CHOICES`例如可能的选择。第一个值是我在提交表单时得到的值，第二个值是用户在表单上看到的值。我希望能够以编程方式使用任何模型创建它，我在上面的示例中传入模型名称和一个字段，`name`. 我想创建这样的元组`(id, name)`。但是`name`可以用不同型号的任何东西代替...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:37:40.417

从你的问题很难看出，但我认为你缺少的是[getattr()](http://docs.python.org/library/functions.html#getattr)。例如

```
ind = something()
for field in ['id', 'name']:
    print getattr(ind, field) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:26:27.473

实际上，Django 已经为此提供了一个快捷方式：`values_list`.

```
Industry.objects.all().values_list('id', 'name') 
```

或者

```
fields = ['id', 'name']
Industry.objects.all().values_list(*fields) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:02:58.640

也许这有帮助：

```
from some_app.models import SomeModel

def generate_choices(model, order=None *args):
    choices = model.objects
    if order:
        choices = choices.order_by(order)
    return choices.values_list('pk', *args)

class MyForm(forms.Form):
    my_choice_field = CharField(max_length=1,
                                choices=generate_choices(SomeModel, 'name'))
    other_choice_field = CharField(max_length=1,
                                   choices=generate_choices(SomeModel, 'city', 'state')) 
```

# jquery - 如何使用 jQuery 获取多个复选框值？

> ID：11945802
> 
> 赞同：64
> 
> 时间：2012-08-14T04:28:50.013
> 
> 标签：jquery

如何获取使用 jQuery 选择的复选框的值？

我的 HTML 代码如下：

```
<input  id="ad_Checkbox1" class="ads_Checkbox" type="checkbox" value="1" />
<input  id="ad_Checkbox2" class="ads_Checkbox" type="checkbox" value="2" />
<input  id="ad_Checkbox3" class="ads_Checkbox" type="checkbox" value="3" />
<input  id="ad_Checkbox4" class="ads_Checkbox" type="checkbox" value="4" />
<input type="button" id="save_value" name="save_value" value="Save" /> 
```

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-14T04:32:22.307

尝试这个

```
<input name="selector[]" id="ad_Checkbox1" class="ads_Checkbox" type="checkbox" value="1" />
<input name="selector[]" id="ad_Checkbox2" class="ads_Checkbox" type="checkbox" value="2" />
<input name="selector[]" id="ad_Checkbox3" class="ads_Checkbox" type="checkbox" value="3" />
<input name="selector[]" id="ad_Checkbox4" class="ads_Checkbox" type="checkbox" value="4" />
<input type="button" id="save_value" name="save_value" value="Save" /> 
```

功能

```
 $(function(){
      $('#save_value').click(function(){
        var val = [];
        $(':checkbox:checked').each(function(i){
          val[i] = $(this).val();
        });
      });
    }); 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-07-15T15:15:21.193

要从多个选中的复选框中获取一组值，请使用 jQuery map/get 函数：

```
$('input[type=checkbox]:checked').map(function(_, el) {
    return $(el).val();
}).get(); 
```

这将返回带有检查值的数组，如下所示：`['1', '2']`

这是关于 jsfiddle 的工作示例：http: [//jsfiddle.net/7PV2e/](http://jsfiddle.net/7PV2e/)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-08-14T04:30:03.367

你可以这样做，

```
$('.ads_Checkbox:checked') 
```

您可以遍历它们`each()`并用复选框值填充数组。

**[现场演示](http://jsfiddle.net/z5aJN/653/)**

*获取数组中选中复选框的值*

```
var i = 0;
$('#save_value').click(function () {
       var arr = [];
       $('.ads_Checkbox:checked').each(function () {
           arr[i++] = $(this).val();
       });      
}); 
```

**编辑，使用 .map()**

您还可以使用[jQuery.map](http://api.jquery.com/jquery.map/)来`get()`获取选定复选框值的数组。

作为旁注，使用`this.value`而不是`$(this).val()`会提供更好的性能。

**[现场演示](http://jsfiddle.net/z5aJN/652/)**

```
$('#save_value').click(function(){
    var arr = $('.ads_Checkbox:checked').map(function(){
        return this.value;
    }).get();
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-14T04:33:56.403

你可以像这样得到它们

```
$('#save_value').click(function() {
    $('.ads_Checkbox:checked').each(function() {
        alert($(this).val());
    });
}); 
```

[jsfiddle](http://jsfiddle.net/TpKAR/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-12-14T15:09:54.017

```
$('input:checked').map(function(i, e) {return e.value}).toArray(); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-04-25T05:53:13.827

试试这个，jQuery 如何获取多个复选框的值

[对于演示或更多示例](https://www.tutsmake.com/jquery-multiple-checkbox-values-to-comma-separated-string/)

```
 $(document).ready(function() {
        $(".btn_click").click(function(){
            var test = new Array();
            $("input[name='programming']:checked").each(function() {
                test.push($(this).val());
            });

            alert("My favourite programming languages are: " + test);
        });
    });
```

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>jQuery Get Values of Selected Checboxes</title>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script> 
</head>
<body>
    <form>
        <h3>Select your favorite Programming Languages :</h3>
        <label><input type="checkbox" value="PHP" name="programming"> PHP</label>
        <label><input type="checkbox" value="Java" name="programming"> Java</label>
        <label><input type="checkbox" value="Ruby" name="programming"> Ruby</label>
        <label><input type="checkbox" value="Python" name="programming"> Python</label>
        <label><input type="checkbox" value="JavaScript" name="programming"> JavaScript</label>
        <label><input type="checkbox" value="Rust" name="programming">Rust</label>
        <label><input type="checkbox" value="C" name="programming"> C</label>
        <br>
        <button type="button" class="btn_click" style="margin-top: 10px;">Click here to Get Values</button>
    </form>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-14T04:46:29.230

你可以试试；

```
$('#save_value').click(function(){
    var final = '';
    $('.ads_Checkbox:checked').each(function(){        
        var values = $(this).val();
        final += values;
    });
    alert(final);
}); 
```

这将在单个实例中返回所有复选框值。

***[这](http://jsfiddle.net/blasteralfred/TKYaq/1/)***是一个有效的现场演示。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-14T04:34:54.037

由于您对所有复选框都有相同的类名，因此

```
 $(".ads_Checkbox") 
```

会给你所有的复选框，然后你可以使用每个循环来迭代它们，比如

```
$(".ads_Checkbox:checked").each(function(){
   alert($(this).val());
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-03T08:43:04.850

你也可以使用`$('input[name="selector[]"]').serialize();`. 它返回 URL 编码字符串，如：“selector%5B%5D=1&selector%5B%5D=3”

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-18T05:29:06.167

尝试`getPrameterValues()`从多个复选框中获取值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-08-12T20:29:29.460

试试这个..（伙计们，我是一只新蜜蜂..所以如果我错了，我真的很抱歉。但我通过这种方式找到了解决方案。）

```
var suggestion = [];
$('#health_condition_name:checked').each(function (j, ob) {

    var odata = {
        health_condition_name: $(ob).val()
    };

    health.push(odata);
}); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-03-21T12:59:46.233

```
$(document).ready(function(){
$(".chk").click(function(){
var d = $("input[name=test]"); if(d.is(":checked")){
//
}
});
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="checkbox" name="test"> `test1`
<input type="checkbox" name="test"> `test2`
<input type="checkbox" name="test"> `test3`
<input type="button" value="check" class='chk'/>
```

# python - 调用 Python 会引发 Objective-C 的错误

> ID：11945803
> 
> 赞同：0
> 
> 时间：2012-08-14T04:28:55.593
> 
> 标签：python, objective-c, xcode, osx-lion, bridge

我一直在阅读使用 Python Objective c 桥可以找到的所有内容。我的主要应用程序在 Objective C 中。在这个阶段，我只想能够在 Python 中调用函数。我认为我做错了一些基本的事情，但就是看不到。顺便说一句，我正在运行 Lion，使用 XCode 4 并链接到 Python.framework。

在包中，我建立了一个名为 PythonStuff.py 的文件，如下所示...

```
import objc
from Foundation import *
NSObject = objc.lookUpClass('NSObject')

class PythonStuff(NSObject):
    def init(self):
        self = super(PythonStuff, self).init()
        return self

    def pySetAString_(self, aString):
        #self._whatisit(aNumber)
        try:
            self.MyString = aString
        except:
            self.MyString = "blah" 
        return 
```

然后我设置了以下协议

```
#import <Foundation/Foundation.h>
@class PythonStuff;

@interface NSObject (PythonMethods)

-(void) pySetAString:(NSString *) value;

@end 
```

最后，要调用它，我运行以下代码

```
if( ! Py_IsInitialized() )
        Py_Initialize();
PyThreadState *tstate = Py_NewInterpreter();
Class PythonStuffClass = NSClassFromString(@"PythonStuff");
id myPythonStuff;

myPythonStuff = [[PythonStuffClass alloc] init];
[myPythonStuff pySetAString:@"some silly string"]; 
```

从我看到的一些样本中，我认为它会起作用，但我就是不明白为什么它不起作用。我可以设置没有任何函数的简单 Python 类，它们似乎可以工作，至少它们不会出错，但是当我尝试调用函数时，调用中止，对我来说，这看起来像是某种库在 Objective-C 或作为 Python 导入中丢失。

我已经为 Objective-C 加入了一个异常处理程序。这是它显示的内容：-

0 objc_exception_throw 4 ffi_closure_SYSV 5 -[EditorViewItem runThread:] 6 [NSThread main]

# asp.net-mvc-3 - 单击按钮时将参数从视图传递到控制器

> ID：11945806
> 
> 赞同：0
> 
> 时间：2012-08-14T04:29:23.290
> 
> 标签：asp.net-mvc-3, razor

我创建了自己的扩展程序：

```
public static MvcHtmlString hSearch(this HtmlHelper helper, string labelName, string labelCaption, string textName, string textValue, string tableName, string buttonId, 
        string actionName, string controllerName, object routeValues, object htmlAttributes)
    {            
        var textbuilder = new TagBuilder("input");
        textbuilder.MergeAttribute("id", textName);
        textbuilder.MergeAttribute("name", textName);
        textbuilder.MergeAttribute("value", textValue);
        textbuilder.MergeAttributes(new RouteValueDictionary(htmlAttributes));

        ModelMetadata metadata = ModelMetadata.FromStringExpression(labelName, helper.ViewData);
        String innerText = labelCaption ?? (metadata.DisplayName ?? (metadata.PropertyName ?? labelName.Split('.').Last())); 
        if (String.IsNullOrEmpty(innerText)) 
        { 
            return MvcHtmlString.Empty; 
        }
        TagBuilder labelbuilder = new TagBuilder("label");
        labelbuilder.Attributes.Add("for", TagBuilder.CreateSanitizedId(helper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(labelName)));
        labelbuilder.MergeAttributes(new RouteValueDictionary(htmlAttributes));
        labelbuilder.SetInnerText(innerText);            

        //return new MvcHtmlString(textbuilder.ToString());
        var buttonBuilder = new TagBuilder("button");
        buttonBuilder.MergeAttribute("id", buttonId);
        buttonBuilder.SetInnerText(buttonId);

        var formBuilder = new TagBuilder("form");
        var urlHelper = new UrlHelper(helper.ViewContext.RequestContext);

        formBuilder.Attributes.Add("action", urlHelper.Action(actionName, controllerName, routeValues));

        formBuilder.Attributes.Add("method", "Post");

        formBuilder.MergeAttributes(new RouteValueDictionary(htmlAttributes));

        formBuilder.InnerHtml = labelbuilder.ToString() + textbuilder.ToString() + buttonBuilder.ToString();
        return new MvcHtmlString(formBuilder.ToString());
    } 
```

我在视图中使用了扩展：

```
 @Html.hSearch("lblSrch", "Company", "companyName", (string)TempData["cName"], "CHComp", "Search", "Fetch", "Home", null, null) 
```

现在我想在单击按钮时将 tableName 传递给控制器​​。我的控制器如下所示：

```
 public ActionResult Fetch(string search, string tablename)
    {
        var c = cbo.fetchData(search, tablename);
        return PartialView(c.ToList());
    } 
```

等待回复。。谢谢。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:40:21.177

您没有向我们提供您的助手的代码，但猜测它会写出一个标签、一个文本字段 (textName) 和一个按钮。如果是这种情况，它将`companyName=someValue`通过 HTTP 发布/获取回您的控制器。

`FormCollection`如果字段是从视图动态发送的，您通常需要将 a 添加到控制器中。或者，为什么不将文本搜索输入的名称保持为静态，例如`name="search"`，它将绑定到控制器的同名参数。

**编辑** 您可以将 tableName 传递回隐藏字段（`<input type='hidden' name='tableName' value='{tableNameGoesHere}'`）中的控制器

但如上所述，您的搜索字符串将具有不同的名称 - 模型绑定器不会将其识别为`string search`.

# ruby-on-rails - 访问 ruby /rails 实例变量的属性时返回 nil

> ID：11945813
> 
> 赞同：0
> 
> 时间：2012-08-14T04:30:40.087
> 
> 标签：ruby-on-rails, ruby

当我尝试访问实例变量 id 作为下面的@line_item.id 时，我收到一个错误（当我记录调试值时为零）。但是 [:id] 工作正常为什么会这样？

```
@cart = current_cart
@line_item = @cart.line_items.find_by_id(params[:id])
@line_item =  @line_item.decrement_quantity(@line_item[:id]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:08:29.143

正如@Kyle 所说，@line_item.id 和@line_item[:id] 应该返回相同的值。

另外，当您在对象上调用实例方法时，`@line_item`您不需要 `@line_item.id`作为该方法的参数。您可以直接访问`self.id`内部方法

我建议写一些像 -

```
@cart = current_cart
@line_item = @cart.line_items.find_by_id(params[:id])
@line_item.decrement_quantity

## inside model 
class LineItem < 
  def decrement_quantity
    puts self.id # will print the id of object calling method
  end
end 
```

# math - 方位角等距投影中的公式

> ID：11945814
> 
> 赞同：4
> 
> 时间：2012-08-14T04:30:59.950
> 
> 标签：math, gis, formula

给定一个位置（lat，lng），我想在[Azimuthal Equidistant Projection](http://en.wikipedia.org/wiki/Azimuthal_equidistant_projection)中获得它的坐标。[这里](http://mathworld.wolfram.com/AzimuthalEquidistantProjection.html)解释了这些公式。

以下是网页截图。 ![公式](../Images/99d754702f7b16616557bbcff9d34382.png)

在该页面的末尾，它指出 ![C](../Images/1698583b57190617b7a7a6a6307073e2.png)

它看起来像给定任何位置（lat [-Pi/2, +Pi/2], lng [0, +2Pi)）和投影的中心（latCenter, lngCenter），我可以计算它的坐标（x, y ) 在地图中，由于没有提供地图半径，x 和 y 的值将落在 [-1, +1] 或 [-Pi, +Pi] 的范围内。

我的问题是，公式中的**c是什么？**如果是从 (x, y) 计算出来的值，怎么能用来计算 (x, y)？

有人可以帮我理解这些公式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:48:05.293

`c`当从 lat/long 投影到 x,y 时，使用等式 4 进行计算。等式 7 用于计算逆，即从 x,y 到 lat/long。为了您的目的，制作地图，请忽略等式 7。

`c`是从投影中心 (phi0, lambda0) 到另一点 (phi, lambda) 的大圆弧在地球中心所对的角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T14:17:30.053

由于您没有在此处说明您正在使用的编程语言，因此是最近一篇博文中的 F#[实现](http://www.samuelbosch.com/2014/02/azimuthal-equidistant-projection.html)。

```
open System
module AzimuthalEquidistantProjection =

    let inline degToRad d = 0.0174532925199433 * d; // (1.0/180.0 * Math.PI) * d

    let project centerlon centerlat lon lat =
        // http://mathworld.wolfram.com/AzimuthalEquidistantProjection.html
        // http://www.radicalcartography.net/?projectionref
        let t:float = degToRad lat
        let l:float = degToRad lon
        let t1 = degToRad centerlat // latitude center of projection
        let l0 = degToRad centerlon // longitude center of projection
        let c = Math.Acos ((sin t1) * (sin t) + (cos t1) * (cos t) * (cos (l-l0)))
        let k = c / (sin c)
        let x = k * (cos t) * (sin (l-l0))
        let y = k * (cos t1) * (sin t) - (sin t1) * (cos t) * (cos (l-l0))
        (x, y) 
```

[其他版本（带有度量单位的 F#、Python 和 Julia）](http://www.samuelbosch.com/2014/02/azimuthal-equidistant-projection.html)

# linux - 如何启动 linux subshel l 以使 SSH_ASKPASS 在 linux 中工作

> ID：11945815
> 
> 赞同：1
> 
> 时间：2012-08-14T04:31:00.543
> 
> 标签：linux, ssh

我正在尝试创建一个 bash 脚本来执行带有 SSH_ASKPASS 和 DISPLAY 变量的无密码 ssh 命令。在我的 bash 脚本中，我在命令之前和之后添加了括号，以便在新的子 shell 中启动它。该脚本在一个新的 shell 中启动（获取一个新的 PID），但仍附加 TTY。据我了解，要使 SSH_ASKPASS 正常工作，不应附加 TTY。请让我知道是否有人对此有解决方案。我只想用 shell/bash 脚本来做。

```
#!/bin/bash
SSH_ASKPASS=/tmp/abc
DISPLAY=localhost:0.0
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null 10.10.10.10 -lroot /bin/ls 
```

/tmp/abc 只包含密码

当我执行脚本时，它会要求输入密码。

感谢进阶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-12T10:02:54.157

灵感来自[“强制 ssh 始终使用 SSH_ASKPASS”](https://unix.stackexchange.com/q/125427/17696)：您需要分离终端。尝试`setsid`：

```
#!/bin/bash
SSH_ASKPASS=/tmp/abc
DISPLAY=localhost:0.0
setsid ssh -o StrictHostKeyChecking=no \
           -o UserKnownHostsFile=/dev/null 10.10.10.10 -lroot /bin/ls 
```

# python - 如何从属性定义中访问类方法

> ID：11945817
> 
> 赞同：0
> 
> 时间：2012-08-14T04:31:21.917
> 
> 标签：python, google-app-engine

我有一个模型，我想使用类方法来设置属性的默认值：

```
class Organisation(db.Model):
    name=db.StringProperty()
    code=db.StringProperty(default=generate_code())

    @classmethod
    def generate_code(cls):
        import random
        codeChars='ABCDEF0123456789'
        while True: # Make sure code is unique
            code=random.choice(codeChars)+random.choice(codeChars)+\
                    random.choice(codeChars)+random.choice(codeChars)
            if not cls.all().filter('code = ',code).get(keys_only=True):
                return code 
```

但我得到一个 NameError：

```
NameError: name 'generate_code' is not defined 
```

如何访问 generate_code()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T05:47:36.080

正如我在评论中所说，我将使用类方法充当工厂并始终通过那里创建您的实体。它使事情变得更简单，并且没有讨厌的钩子来获得你想要的行为。

这是一个简单的例子。

```
class Organisation(db.Model):
    name=db.StringProperty()
    code=db.StringProperty()

    @classmethod
    def generate_code(cls):
        import random
        codeChars='ABCDEF0123456789'
        while True: # Make sure code is unique
            code=random.choice(codeChars)+random.choice(codeChars)+\
                    random.choice(codeChars)+random.choice(codeChars)
            if not cls.all().filter('code = ',code).get(keys_only=True):

        return code

    @classmethod
    def make_organisation(cls,*args,**kwargs):
        new_org = cls(*args,**kwargs)
        new_org.code = cls.generate_code()
        return new_org 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:26:25.013

```
import random

class Test(object):

    def __new__(cls):
        cls.my_attr = cls.get_code()
        return super(Test, cls).__new__(cls)

    @classmethod
    def get_code(cls):
        return random.randrange(10)

t = Test()
print t.my_attr 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T05:09:19.040

您需要指定类名：`Organisation.generate_code()`

# c# - 用 MVVM 实现“关闭窗口”命令

> ID：11945821
> 
> 赞同：44
> 
> 时间：2012-08-14T04:31:59.887
> 
> 标签：c#, wpf, mvvm, relaycommand

所以我的第一次尝试是从后面的代码中完成所有事情，现在我正在尝试重构我的代码以使用 MVVM 模式，遵循[盒子](http://karlshifflett.wordpress.com/2010/11/07/in-the-box-ndash-mvvm-training/)信息中 MVVM 的指导。

我已经创建了一个视图模型类来匹配我的视图类，并且我正在将代码从后面的代码中移到从命令开始的视图模型中。

我的第一个障碍是尝试实现一个“关闭”按钮，如果数据没有被修改，它会关闭窗口。我已经安装了一个 CloseCommand 来替换 'onClick' 方法，除了代码尝试运行的位置之外，一切都很好`this.Close()`。显然，由于代码已从窗口移至普通类，“this”不是窗口，因此不可关闭。但是，根据 MVVM，viewmodel 不知道视图，所以我不能调用`view.Close()`.

有人可以建议我如何从 viewmodel 命令关闭窗口吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-14T08:31:42.133

我个人使用一种非常简单的方法：对于与可关闭视图相关的每个 ViewModel，我创建了一个基本 ViewModel，如下例所示：

```
public abstract class CloseableViewModel
{
    public event EventHandler ClosingRequest;

    protected void OnClosingRequest()
    {
        if (this.ClosingRequest != null)
        {
            this.ClosingRequest(this, EventArgs.Empty);
        }
    }
} 
```

然后在继承自的 ViewModel 中，`CloseableViewModel`只需调用命令即可。`this.OnClosingRequest();``Close`

在视图中：

```
public class YourView
{
    ...
    var vm = new ClosableViewModel();
    this.Datacontext = vm;
    vm.ClosingRequest += (sender, e) => this.Close();
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-14T08:09:23.777

您不需要将 View 实例传递给您的 ViewModel 层。您可以像这样访问主窗口 -

```
Application.Current.MainWindow.Close() 
```

如上所述，我认为在 ViewModel 类中访问您的主窗口没有问题。根据 MVVM 原则，您的 View 和 ViewModel 之间不应存在紧密耦合，即它们应该在工作时忽略其他操作。在这里，我们没有从 View 向 ViewModel 传递任何东西。如果您想寻找其他选项，这可能会对您有所帮助 -[使用 MVVM 关闭窗口](http://www.codeproject.com/Articles/413517/Closing-Windows-and-Applications-with-WPF-and-MVVM "使用 MVVM 关闭窗口")

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-08-29T06:33:00.817

我在单击按钮时从视图模型中关闭窗口的解决方案如下：

在视图模型中

```
public RelayCommand CloseWindow;
Constructor()
{
    CloseWindow = new RelayCommand(CloseWin);
}

public void CloseWin(object obj)
{
    Window win = obj as Window;
    win.Close();
} 
```

在View中，设置如下

```
<Button Command="{Binding CloseWindowCommand}" CommandParameter="{Binding ElementName=WindowNameTobeClose}" Content="Cancel" /> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-14T07:16:18.610

我通过创建一个名为 DialogResult 的附加属性来做到这一点：

```
public static class DialogCloser
{
    public static readonly DependencyProperty DialogResultProperty =
        DependencyProperty.RegisterAttached(
            "DialogResult",
            typeof(bool?),
            typeof(DialogCloser),
            new PropertyMetadata(DialogResultChanged));

    private static void DialogResultChanged(
        DependencyObject d,
        DependencyPropertyChangedEventArgs e)
    {
        var window = d as Window;
        if (window != null && (bool?)e.NewValue == true) 
                window.Close();
    }

    public static void SetDialogResult(Window target, bool? value)
    {
        target.SetValue(DialogResultProperty, value);
    }
} 
```

然后在窗口标签中将这个写给你 XAML

```
WindowActions:DialogCloser.DialogResult="{Binding Close}" 
```

终于在 ViewModel

```
 private bool _close;
    public bool Close
    {
        get { return _close; }
        set
        {
            if (_close == value)
                return;
            _close = value;
            NotifyPropertyChanged("Close");
        }
    } 
```

如果将 Close 更改为 true，则窗口将关闭

```
Close = True; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-07T12:56:06.940

这里是最简单纯粹的 MVVM 方案

视图模型代码

```
public class ViewModel
{
    public Action CloseAction { get; set; }

    private void CloseCommandFunction()
    {
        CloseAction();
    }
} 
```

这是 XAML 查看代码

```
public partial class DialogWindow : Window
{
    public DialogWindow()
    {
        ViewModel vm = new ViewModel();
        this.DataContext = vm;

        vm.CloseAction = new Action(() => this.Close());
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-10-02T13:48:34.017

该解决方案快速简便。缺点是层之间存在一些耦合。

在您的视图模型中：

```
public class MyWindowViewModel: ViewModelBase
{

    public Command.StandardCommand CloseCommand
    {
        get
        {
            return new Command.StandardCommand(Close);
        }
    }
    public void Close()
    {
        foreach (System.Windows.Window window in System.Windows.Application.Current.Windows)
        {
            if (window.DataContext == this)
            {
                window.Close();
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-01-21T07:33:20.320

MVVM-light 带有自定义消息通知以避免窗口处理每个通知消息

在视图模型中：

```
public class CloseDialogMessage : NotificationMessage
{
    public CloseDialogMessage(object sender) : base(sender, "") { }
}

private void OnClose()
{
    Messenger.Default.Send(new CloseDialogMessage(this));
} 
```

在窗口构造函数中注册消息：

```
Messenger.Default.Register<CloseDialogMessage>(this, nm =>
{
    Close();
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-03T21:06:20.883

这与 eoldre 的回答非常相似。它在功能上是相同的，因为它通过相同的 Windows 集合查找具有视图模型作为其数据上下文的窗口；但我使用了 RelayCommand 和一些 LINQ 来实现相同的结果。

```
public RelayCommand CloseCommand
{
    get
    {
        return new RelayCommand(() => Application.Current.Windows
            .Cast<Window>()
            .Single(w => w.DataContext == this)
            .Close());
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-19T10:15:16.397

使用 MVVM-light 工具包：

在视图模型中：

```
 public void notifyWindowToClose()
{
    Messenger.Default.Send<NotificationMessage>(
        new NotificationMessage(this, "CloseWindowsBoundToMe")
    );
} 
```

在视图中：

```
 Messenger.Default.Register<NotificationMessage>(this, (nm) =>
{
    if (nm.Notification == "CloseWindowsBoundToMe")
    {
        if (nm.Sender == this.DataContext)
            this.Close();
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-27T20:32:20.157

这取自 ken2k 答案（谢谢！），只需将`CloseCommand`也添加到 base`CloseableViewModel`中。

```
public class CloseableViewModel
{
    public CloseableViewModel()
    {
        CloseCommand = new RelayCommand(this.OnClosingRequest);
    }

    public event EventHandler ClosingRequest;

    protected void OnClosingRequest()
    {
        if (this.ClosingRequest != null)
        {
            this.ClosingRequest(this, EventArgs.Empty);
        }
    }

    public RelayCommand CloseCommand
    {
        get;
        private set;
    }
} 
```

您的视图模型，继承它

```
public class MyViewModel : CloseableViewModel 
```

然后在你查看

```
public MyView()
{
    var viewModel = new StudyDataStructureViewModel(studyId);
    this.DataContext = viewModel;

    //InitializeComponent(); ...

    viewModel.ClosingRequest += (sender, e) => this.Close();
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-30T13:10:31.800

给个方法，请检查

[https://stackoverflow.com/a/30546407/3659387](https://stackoverflow.com/a/30546407/3659387)

简短的介绍

1.  从 INotifyPropertyChanged 派生您的 ViewModel
2.  在 ViewModel 中创建一个可观察的属性 CloseDialog，每当您想关闭对话框时更改 CloseDialog 属性。
3.  在视图中为此属性更改附加一个处理程序
4.  现在你几乎完成了。在事件处理程序中使 DialogResult = true

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-12T20:28:19.890

首先给你的窗口起一个名字，比如

```
x:Name="AboutViewWindow" 
```

在我的关闭按钮上，我定义了命令和命令参数，例如

```
CommandParameter="{Binding ElementName=AboutViewWindow}"
Command="{Binding CancelCommand}" 
```

然后在我的视图模型中

```
private ICommand _cancelCommand;        
public ICommand CancelCommand       
{
   get          
     {
        if (_cancelCommand == null)
           {
              _cancelCommand = new DelegateCommand<Window>(
                    x =>
                    {
                        x?.Close();
                    });
            }

            return _cancelCommand;          
     }      
} 
```

# java - Java BoneCP MySQL 连接超时

> ID：11945833
> 
> 赞同：5
> 
> 时间：2012-08-14T04:33:57.680
> 
> 标签：java, mysql, bonecp

我有一个应用程序设置为与 BoneCP 共享 mysql 连接。目前，该应用程序没有得到大量使用，因此连接的使用不那么频繁。一段时间后，曾经有效的查询开始失败，我收到类似于以下内容的消息：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 2,618,063 milliseconds ago.      The last packet sent successfully to the server was 44,734 milliseconds ago.
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3567)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3456)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3997)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:1379)
at com.jolbox.bonecp.PreparedStatementHandle.execute(PreparedStatementHandle.java:138) 
```

我正在这样设置 BoneCP：

```
BoneCPConfig config = new BoneCPConfig();
config.setJdbcUrl("jdbc:mysql://" + hostname + "/" + database);
config.setUsername(username); 
config.setPassword(password);
config.setMinConnectionsPerPartition(minPoolSize);
config.setMaxConnectionsPerPartition(maxPoolSize);
config.setIdleConnectionTestPeriodInMinutes(60);
config.setIdleMaxAgeInMinutes(240);
config.setPartitionCount(1);
connectionPool = new BoneCP(config); 
```

我不确定如何找出 mysql 服务器的超时时间（它没有从默认值更改），但是在大约 5 或 10 分钟没有连接池活动后出现此错误，这似乎极短。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T05:23:12.843

要么您必须配置 mysqls 空闲超时（设置 wait_timeout = X / interactive_timeout = X），要么您可以配置连接池以发出 keep-alive 语句：

```
config.setIdleConnectionTestPeriodInMinutes(10);
config.setConnectionTestStatement("/* ping */ SELECT 1"): 
```

# visual-studio-lightswitch - 设置 Lightswitch 电子邮件地址编辑器宽度

> ID：11945834
> 
> 赞同：0
> 
> 时间：2012-08-14T04:34:10.480
> 
> 标签：visual-studio-lightswitch

我有一个带有电子邮件地址输入的 Lightswitch 2011 应用程序。

出于某种原因，我无法在其上设置宽度 - 它会忽略它，除非我将其设置为 Stretch（但随后控件居中，这不是我想要的）。

当用户在文本框中键入时，它会展开。货币编辑器控件也会发生相同的行为。

如何设置此控件的宽度？我已经包含一个视频来演示这个问题。

[宽度设置问题的视频](http://screencast.com/t/DG6jHmcJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:35:13.557

您需要选择除*Stretch*以外的任何内容（在您的情况下，在视频中显示，我建议*Left*），然后选择*Pixels*选项，输入您想要的*宽度*。

您可能已经尝试过这种组合，但除非您按照正确的顺序进行操作，否则它有时会忽略您的选择。这是 LS 2011 中的一个已知错误。我希望它在 V2 中得到修复，但我还没有开始使用 V2，所以我无法确认它已被修复。

我用来解决这个问题的顺序如下：

1.  选择左侧
2.  选择像素
3.  输入宽度
4.  在保存之前单击另一个文本框

编辑：从第 4 步中删除“或移至下一个控件”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:46:42.910

正如 Yann 指出的那样 - 这是 LS 2011 中的一个已知错误，并且**在我在 Visual Studio 2012 中升级到 LS 12 后工作正常**（即如预期的那样）

# objective-c - IBOutlets 与绑定

> ID：11945840
> 
> 赞同：0
> 
> 时间：2012-08-14T04:34:35.300
> 
> 标签：objective-c, binding, iboutlet

为什么使用使用 IBOutlets 而不是绑定？

IB 中的绑定似乎更简单。

IBOutlets 能做哪些绑定不能做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:11:00.240

绑定不是插座的替代品，它们只是连接 UI 某些方面的另一种方式。也就是说，有很多事情绑定不是很有效，例如，实现`NSTableViewDataSource`将允许您处理（并且您可以使用插座连接所述数据源）。

此外，您不打算通过绑定获取相关视图供控制器进行交互，但您可以将它们与插座连接起来。从某种意义上说，出口是您组织对象的方式——它们自己可能不会做太多事情，但它们提供了数据，否则您将不得不不必要地四处挖掘才能获得（筛选具有给定标签的视图的子视图不会很有趣，而且确实是浪费精力，因为您有渠道可以为您简化整个过程）。

不过，我的主要观点是，您不应该将绑定视为插座的替代品——它们不是。绑定不能代替插座，插座也不能代替绑定。绑定在一定程度上取决于插座，因此如果您愿意，您无法摆脱它们。另一方面，奥特莱斯只是在那里说明什么去哪里。所以那`NSTextView`进入财产`statusField`，那`NSTableView`进入财产`messagesTableView`。

所以，再一次，出口是组织，它们不仅仅是你用来代替绑定的东西。

# android - 如何将当前纬度、经度文本朗读成语音

> ID：11945842
> 
> 赞同：0
> 
> 时间：2012-08-14T04:35:24.973
> 
> 标签：android, google-maps, gps, text-to-speech

我想将我当前的纬度、经度文本转换为语音。我有查找当前纬度、经度的代码。但是我在 Location 类中初始化了 TextToSpeech 方法，我只有 latLongString。我无法得到 EX：你当前的位置是 lat= 1.222，长=22.335。

这是我的代码：

```
public class SpeakActivity extends Activity implements OnInitListener{
         private TextToSpeech tts;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_speak);

        LocationManager locationManager; 
        String context = Context.LOCATION_SERVICE; 
        locationManager = (LocationManager)getSystemService(context); 

        Criteria crta = new Criteria(); 
        crta.setAccuracy(Criteria.ACCURACY_FINE); 
        crta.setAltitudeRequired(false); 
        crta.setBearingRequired(false); 
        crta.setCostAllowed(true); 
        crta.setPowerRequirement(Criteria.POWER_LOW); 
        String provider = locationManager.getBestProvider(crta, true); 

       // String provider = LocationManager.GPS_PROVIDER; 
        Location location = locationManager.getLastKnownLocation(provider); 

       tts = new TextToSpeech(this, this);
        updateWithNewLocation(location);    

    }

    public void speak(String text2say){

             tts.speak(text2say, TextToSpeech.QUEUE_FLUSH, null);

          }

    @Override

       public void onInit(int status) {

          say("latLongString");    

       }

    private void updateWithNewLocation(Location location) { 
        String latLongString;
        TextView myLocation; 
        myLocation= (TextView) findViewById(R.id.myLocation);

        if(location!=null) { 

        double lat = location.getLatitude(); 
        double lon = location.getLongitude(); 
        latLongString = "Lat:" + lat + "\nLong:" + lon;     

        }else{

            latLongString="no location found";
        }
        myLocation.setText("Your current position is:\n" + latLongString);

        speak(latLongString);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_speak, menu);
        return true;
    }

@Override

public void onDestroy() {

   if (tts!= null) {

      tts.stop();

      tts.shutdown();

   }   

   super.onDestroy();

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:24:51.540

将您的 lat long 字符串传递到 speakOut() 中的文本中，如 spk 给出的示例。并调用这个函数来说话。

```
private void speakOut() {

        String text = txtText.getText().toString();

        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:27:47.080

`onInit`按以下方式更改您的。你只会误认为那个。

```
@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

    if (status == TextToSpeech.SUCCESS) {

        int result = tts.setLanguage(Locale.ENGLISH);

        // tts.setPitch(5); // set pitch level

        // tts.setSpeechRate(0); // set speech speed rate

        if (result == TextToSpeech.LANG_MISSING_DATA
                || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "Language is not supported");
        } else {
        }

    } else {
        Log.e("TTS", "Initilization Failed");
    }

} 
```

否则，试试这个工作示例。

```
public class LocationSampleActivity extends Activity implements OnInitListener 
{
    TextView tv;
    private TextToSpeech tts;
    Location speakLoc;

    @Override 
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);         
        tv = (TextView)this.findViewById(R.id.txtLocation);
        tts = new TextToSpeech(this, this);
        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        LocationListener ll = new mylocationlistener();
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, ll);    
    }

    private class mylocationlistener implements LocationListener 
    {
        @Override 
        public void onLocationChanged(Location location) {    
            if (location != null) {
            Log.d("LOCATION CHANGED", location.getLatitude() + "");
            Log.d("LOCATION CHANGED", location.getLongitude() + "");
            String str = "\n CurrentLocation: "+
                "\n Latitude: "+ location.getLatitude() + 
                "\n Longitude: " + location.getLongitude();       
              tv.append(str);  
              speak(location);
            } 
        }

        @Override
        public void onProviderDisabled(String provider) {
            Toast.makeText(LocationSampleActivity.this,"Error onProviderDisabled",Toast.LENGTH_LONG).show();
        }    
        @Override
        public void onProviderEnabled(String provider) {
            Toast.makeText(LocationSampleActivity.this,"onProviderEnabled",Toast.LENGTH_LONG).show();
        }
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            Toast.makeText(LocationSampleActivity.this,"onStatusChanged",Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onInit(int status) {
        // TODO Auto-generated method stub

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.ENGLISH);

            // tts.setPitch(5); // set pitch level

//           tts.setSpeechRate(0); // set speech speed rate

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "Language is not supported");
            } else {
            }

        } else {
            Log.e("TTS", "Initilization Failed");
        }

    }

    public void speak(Location lo)
    {
        speakLoc = lo;

        double lat = speakLoc.getLatitude();
        double lon = speakLoc.getLongitude();

        String speak = "Your location is:" + lat + lon;

        tts.speak(speak, TextToSpeech.QUEUE_FLUSH, null);
    }
} 
```

并且，根据您的需要进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T05:12:23.960

而不是说（latLongString）；你可以这样做 speak(myLocation.getText); 所以它会说你当前的位置是'LatLong'。

# javascript - Apple store 风格的固定 div 在 LEFT

> ID：11945854
> 
> 赞同：5
> 
> 时间：2012-08-14T04:37:37.840
> 
> 标签：javascript, jquery, css, css-position

我正在为此拔头发。我有一个网页，我想在左侧有一个固定位置的 div（鹦鹉和翻译器）在向下滚动时跟随页面。 [http://www.cartoonizemypet.com/new/help/](http://www.cartoonizemypet.com/new/help/)

我设法遵循这个 tut [http://jqueryfordesigners.com/fixed-floating-elements/](http://jqueryfordesigners.com/fixed-floating-elements/)并获得了我认为完美的效果！然后我试着在我的手机上查看它……当我放大爆炸的 div 时，它就移到了文本上！:( 您可以通过缩小浏览器窗口并向右滚动来查看对常规浏览器的影响。

有谁知道防止鹦鹉水平移动的方法？我一直在寻找解决方案，但似乎开始变得不可能。

这是相关的CSS

```
#content {
    padding-top:20px;
    padding-bottom:713px;   /* Height of the footer element */
    width:888px;
    margin-left:auto;
    margin-right:auto;
    position:relative;
}

#help-col1 {
    left:0;
    width:218px;
    position:absolute;
    height:500px;
}

#parrot-box {
    position:absolute;
    top:0;
    margin-top: 20px;
}

#parrot-box.fixed {
    position:fixed;
    top:0;
}

#help-col2 {
    width:634px;
    float:right;
} 
```

随意查看页面源 (http://www.cartoonizemypet.com/new/help/) 以查看 SCRIPT 和 HTML。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:24:26.793

当鹦鹉获得“固定”类时，鹦鹉（在#help-col1 内）的“左”值为 0。这意味着他将始终被附加到页面的左侧......不管是什么窗口的尺寸，以及它如何滚动。

您要求的是当用户垂直滚动而不是水平滚动时，他的行为就像一个固定定位的元素。据我所知，这是不可能的。固定是固定的... x 和 y。

但是，有一些解决方案（[比如这个](https://stackoverflow.com/questions/4676131/how-do-i-get-a-fixed-position-div-to-scroll-horizontally-with-the-content-using)）谈论使用 javascript 来解决这个问题。这里的理论是，当页面水平滚动时，一点 javascript 可以监听，如果有，则相应地将鹦鹉推回原位。

就个人而言，我会考虑使用[css 媒体查询](http://www.htmlgoodies.com/beyond/css/introduction-to-css-media-queries.html)来制作特定于移动设备的布局。您可以为网站的移动版本分配特定的 CSS，因此希望用户根本不需要缩放（或水平滚动）=）

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:24:28.903

已建议使用 JS 滚动事件侦听器，但依赖它的所有实现都系统性地滞后。我认为使用媒体查询来确定固定定位是否合适（即，如果窗口/设备足够宽，则可以，如果不合适，则用替代行为代替）。

实际上，您可以将 parrot 留在顶部以用于窄屏幕并保留一些空间，并解决旧的移动 Safari 版本无法正确解释`position:fixed`. 您当然可以实现一种更精细的方法，但这应该是一个很好的起点 - 要尝试它，请在您的页面上执行以下脚本（在控制台中就可以了）：

```
$('head').append('<style type="text/css">#parrot-box.fixed {position:absolute;}</style><style type="text/css" media="screen and (min-width: 982px)">#parrot-box.fixed {position:fixed !important;}</style>'); 
```

首先它会覆盖原始`#parrot-box.fixed`声明，然后将浮动样式应用于窗口至少为 982px 宽（您的页面包装器宽度）时。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-18T00:55:22.310

不用担心每个人，我丈夫想出了另一种方法来完成这项工作！:)

而不是随着页面移动鹦鹉；我将在答案 div 中有多个版本的鹦鹉。这样，当用户点击答案时，它会弹出并出现在它旁边的鹦鹉。

不是我最初计划的方式，但我认为我可以让这种新方式看起来更好！

无论如何感谢您的帮助！:)

# jquery - JQuery 选择器多参数

> ID：11945859
> 
> 赞同：3
> 
> 时间：2012-08-14T04:38:26.763
> 
> 标签：jquery, selector

```
$('.field[id^=stat_]')

$('.field[value!=""]') 
```

是否可以将这些组合成一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T04:40:42.750

你可以试试：`$('.field[id^=stat_][value!=""]')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T04:40:59.947

像这样尝试，这将完成你的工作

```
$('.field[id^=stat_][value!=""]'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T04:39:42.877

有可能的：

```
$('.field[id^=stat_][value!=""]') 
```

另请参阅：[jquery.com - 多属性选择器](http://api.jquery.com/multiple-attribute-selector/)
工作示例：http: [//jsbin.com/ugafam/1/](http://jsbin.com/ugafam/1/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T04:39:48.550

当然！

```
$('.field[id^=stat_][value!=""]'); 
```

# dart - dart 中#resource ('main.css') 的状态是什么

> ID：11945860
> 
> 赞同：5
> 
> 时间：2012-08-14T04:38:37.093
> 
> 标签：dart

我看不到它被太多使用了，DartEditor 似乎声称它已被弃用，它被弃用了吗？有没有人对此有一些公开追踪的历史？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:38:06.133

根据[dartbug 4429](http://dartbug.com/4429 "飞镖 4429")，它正在被贬值并从规范中删除。

此外，根据这个[source commit](https://code.google.com/p/dart/source/detail?r=4493 "源提交")，该`#resource`指令被 VM(s) 忽略并且仅由 DartEditor 本身使用。

更新：关于 D​​art-misc 讨论组的官方[通知](https://groups.google.com/a/dartlang.org/d/topic/misc/M6w_dTvl79o/discussion)确认 #resource 将被删除。

# java - 在 WAS 上部署应用程序时出现 NoClassDefFoundError

> ID：11945862
> 
> 赞同：1
> 
> 时间：2012-08-14T04:38:54.770
> 
> 标签：java, web-applications, websphere

我正在尝试在 WAS 6.1 服务器上部署应用程序。

但是，我收到以下错误：

```
java.lang.NoClassDefFoundError: org.apache.log4j.Logger
at myPackage.myClass.<clinit>(myClass.java:40)
at java.lang.J9VMInternals.initializeImpl(Native Method)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:194)
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1328)
at com.ibm.ejs.container.EJSContainer.loadBeanMetaData(EJSContainer.java:1756)
at com.ibm.ejs.container.HomeOfHomes.loadBeanMetaData(HomeOfHomes.java:1073)
at com.ibm.ejs.container.HomeRecord.getHomeAndInitialize(HomeRecord.java:454)
at com.ibm.ejs.container.EJSContainer.getHomeWrapperCommon(EJSContainer.java:1322)
at com.ibm.ejs.container.EJSContainer.getHomeInstance(EJSContainer.java:1231)
at com.ibm.ejs.container.EJSContainer.startBean(EJSContainer.java:1217)
at com.ibm.ws.runtime.component.EJBContainerImpl.startBean(EJBContainerImpl.java:3385)
at com.ibm.ws.runtime.component.EJBContainerImpl.startModule(EJBContainerImpl.java:2589)
at com.ibm.ws.runtime.component.EJBContainerImpl.start(EJBContainerImpl.java:3719)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:1304)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart(DeployedApplicationImpl.java:1165)
at com.ibm.ws.runtime.component.DeployedModuleImpl.start(DeployedModuleImpl.java:587)
at com.ibm.ws.runtime.component.DeployedApplicationImpl.start(DeployedApplicationImpl.java:832)
at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:950)
at com.ibm.ws.runtime.component.ApplicationMgrImpl$AppInitializer.run(ApplicationMgrImpl.java:2131)
at com.ibm.wsspi.runtime.component.WsComponentImpl$_AsynchInitializer.run(WsComponentImpl.java:342)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1473)
Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger
at com.ibm.ws.classloader.CompoundClassLoader.findClass(CompoundClassLoader.java:579)
at com.ibm.ws.classloader.CompoundClassLoader.loadClass(CompoundClassLoader.java:414)
at java.lang.ClassLoader.loadClass(ClassLoader.java:597)
... 22 more 
```

在

```
Admin Console -> Servers -> Application Servers -> myServerName -> Java and Process Management -> Process Definition -> Java Virtual Machine -> ClassPath 
```

我有一个条目如下：

```
${MY_JARS}\log4j-1.2.15.jar 
```

在“自定义属性”中，MY_JARS 键包含值作为 log4j jar 的路径

我做了无数次服务器清理并重新启动、重新发布、重新部署应用程序。但是这个错误不会发生。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:25:26.807

要使用`${MY_JARS}`这种方式，您需要在`Environment`>中定义它`WebSphere Variables`，而不是在`Custom Properties`.

但是，我会提醒您以这种方式添加 log4j。我似乎记得如果一个 jar 在多个应用程序之间共享，log4j 可能无法正常工作。我认为我们尝试使用 log4j 作为共享库（可能是更推荐的方式来做你想做的事情，顺便说一句），但最终需要部署到每个应用程序的 WEB-INF/lib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T20:04:57.053

正如 dbreaux 已经指出的那样，您必须创建具有正确范围的环境变量。自定义属性在运行时可用，但不适用于服务器配置级别。

在 WAS 中，您可以检查加载了哪些库。IIRC 您必须单击应用程序，然后单击 Web 模块，然后您应该能够检查类加载器。如果您打开类加载器，您将看到加载了哪些库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:42:43.757

请确保 log4j.jar 在您的应用程序的 CLASSPATH 中。例如；在 WEB-INF\lib 下

# java - 使用Mysql的JSP搜索功能

> ID：11945863
> 
> 赞同：0
> 
> 时间：2012-08-14T04:39:02.497
> 
> 标签：java, mysql, jsp

我想在我的 JSP 中添加更新功能。我已经添加了所有功能，例如添加，删除，更新所有功能都可以正常工作。包含搜索功能，但是当我点击搜索功能时，如果在 JSP 页面中未显示的数据库中找到数据。其他部分正在显示。任何人都可以帮助解决问题吗？我在下面添加了代码。

```
<% 
    if (request.getAttribute("dName") != null) {
        out.println("Your query is Found");
        String dName = (String) request.getAttribute("dName");
        String dId = (String) request.getAttribute("dId");

        out.println("Department Name:" + dName);
        out.println("Department Id:" + dId);    

        request.setAttribute("dName", null);
        request.setAttribute("dId", null);
    } else {
        out.flush();
        out.println("dhfdhfj");
    }
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:50:05.763

变成

```
 Integer dId = (Integer) request.getAttribute("dId"); 
```

# groovy - 在 Groovy 中，如何将地图中某个属性的值相加？

> ID：11945864
> 
> 赞同：14
> 
> 时间：2012-08-14T04:39:15.783
> 
> 标签：groovy

我有以下地图：

```
def map = [];
map.add([ item: "Shampoo", count: 5 ])
map.add([ item: "Soap", count: 3 ]) 
```

我想得到`count`地图中所有属性的总和。在使用 LINQ 的 C# 中，它将类似于：

```
map.Sum(x => x.count) 
```

我如何在 Groovy 中做同样的事情？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T07:54:44.867

假设你有一个这样的列表：

```
List list = [ [item: "foo", count: 5],
              [item: "bar", count: 3] ] 
```

然后有多种方法可以做到这一点。最易读的可能是

```
int a = list.count.sum() 
```

或者您可以在整个列表中使用 sum 的闭包形式

```
int b = list.sum { it.count } 
```

或者您甚至可以使用更复杂的路线，例如注入

```
int c = list.count.inject { tot, ele -> tot + ele } // Groovy 2.0
//  c = list.count.inject( 0 ) { tot, ele -> tot + ele } // Groovy < 2.0 
```

所有这些都给出相同的结果。

```
assert ( a == b ) && ( b == c ) && ( c == 8 ) 
```

我会用第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:44:34.750

您想使用`collect`运算符。我用 groovysh 检查了以下代码：

```
list1 = []
total = 0
list1[0] = [item: "foo", count: 5]
list1[1] = [item: "bar", count: 3]
list1.collect{ total += it.count }
println "total = ${total}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:04:00.583

首先，您在示例中混淆了 map 和 list 语法。总之，Groovy 向所有集合注入了一个[.sum(closure)](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#sum%28groovy.lang.Closure%29)方法。

例子：

```
[[a:1,b:2], [a:5,b:4]].sum { it.a }
===> 6 
```

# iphone - 架构 i386 的未定义符号：“_OBJC_CLASS_$_RequestHandler”

> ID：11945870
> 
> 赞同：-2
> 
> 时间：2012-08-14T04:40:09.513
> 
> 标签：iphone, objective-c, ios

我正在尝试以 Json 格式向服务器发送和接收数据。为此，我使用了 RequestHandler 类来处理发送和接收数据的请求。但是我在运行应用程序时遇到了这个错误。

体系结构 i386 的未定义符号：“_OBJC_CLASS_$_RequestHandler”...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:11:49.930

确保您的 RequestHandler 类已编译，该类的 .m 文件必须在“构建阶段”中的“编译源”列表中

# c++ - 在 VC++ 中链接 FFTW 时出错

> ID：11945872
> 
> 赞同：0
> 
> 时间：2012-08-14T04:40:25.937
> 
> 标签：c++, visual-c++, fftw

我在 VC++ 中使用 FFTW 库并尝试运行此代码。当我运行它时，我收到以下错误

> 链接：致命错误 LNK1104：无法打开文件“libfftw3l-3.dll”

我按照 FFTW 网站上的说明制作了 dll 和 lib 文件，并使用*Linker > Input > Additional Dep*将 dll 文件添加到我的项目中。

```
#include <fftw3.h>
#include <math.h>

int main(void)
{
    fftw_complex *in, *out;
    fftw_plan p;
    int nx = 5;
    int ny = 5;
    int i;
    float M_PI = 3.14;

    /* Allocate the input and output arrays, and create the plan */
    in = (fftw_complex*)fftw_malloc(sizeof(fftw_complex) * nx * ny);
    out = (fftw_complex*)fftw_malloc(sizeof(fftw_complex) * nx * ny);
    p = fftw_plan_dft_2d(nx, ny, in, out, FFTW_FORWARD,
FFTW_ESTIMATE);

    /* Now fill the input array with the input data */
    /* We'll simply make a sine wave */
    for (i = 0; i < (nx * ny); i++) {
        in[i][0] = sin(i / 10.0 * M_PI);    /* Real part */
        in[i][1] = 0.0;                          /* Imaginary part */
    }

    /* Actually execute the plan on the input data */
    fftw_execute(p);

    /* Print out the results */
    for (i = 0; i < (nx * ny); i++)
        printf("Coefficient %d: %f%+f*i\n", i, out[i][0], out[i][1]);

    /* Clean up after ourselves */
    fftw_destroy_plan(p);
    fftw_free(in); fftw_free(out);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-24T14:04:31.053

这`libfftw3l-3.dll`是`long double`FFTW 的版本。您的计算机上似乎没有此文件。但是，由于您不使用任何`long double`函数或任何单精度`float`函数，您只需要链接到`libfftw3-3.dll`库。

# java - 迭代器应该返回 HashSet 但充当对象

> ID：11945879
> 
> 赞同：0
> 
> 时间：2012-08-14T04:41:18.670
> 
> 标签：java, iterator, hashset

```
private ArrayList<HashSet<Integer>> sets = new ArrayList<HashSet<Integer>>();

            Iterator i = this.sets.iterator();
            while (i.hasNext()){

                if(i.next().containsAll(union)){
                    return true;
                }
            } 
```

我得到以下异常，因为它假设 .next() 获取 Object 类型的对象

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    Type mismatch: cannot convert from Object to HashSet<Integer>
    The method containsAll(HashSet<Integer>) is undefined for the type Object 
```

当我得到对象哈希集时

```
 while (i.hasNext()){
            System.out.println(i.next().getClass().getName());
        } 
```

印刷

```
java.util.HashSet
java.util.HashSet
java.util.HashSet 
```

这是怎么回事 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:44:20.973

确保您的迭代器也作为类型`HashSet`

```
Iterator<HashSet<Integer>> i = this.sets.iterator(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:44:25.560

很简单，更换

```
Iterator i = this.sets.iterator(); 
```

和

```
Iterator<HashSet<Integer>> i = this.sets.iterator(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:45:02.980

您需要显式转换或使其通用

```
private ArrayList<HashSet<Integer>> sets = new ArrayList<HashSet<Integer>>();

            Iterator<HashSet<Integer>> i = this.sets.iterator();
            while (i.hasNext()){

                if(i.next().containsAll(union)){
                    return true;
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T04:50:47.260

我认为您还需要在

```
 Iterator<HashSet<Integer>> i = sets.iterator(); 
```

然后它应该能够自动将其转换为 HashSet。否则，您将需要进行显式转换

```
if(((HashSet<Integer>)i.next()).containsAll(union)){
                //return true;
            } 
```

# php - 如何在 symfony2 的独白日志中定义通道和级别

> ID：11945880
> 
> 赞同：5
> 
> 时间：2012-08-14T04:41:23.580
> 
> 标签：php, symfony, doctrine-orm

有什么方法可以在 symfony2 的独白中定义我的自定义级别。

我这样做

`$logger->err('An error occurred');`

然后在数据库中我添加了这个。

通道是`app`，电平是`500`

有什么办法可以做到这一点

```
$logger->log("message",(channel),(level)
$logger->log("Object with is 212 deleted",'DELETE',NORMAL); 
```

这样我就可以在数据库中有单独的东西用于报告和查看

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-06T19:12:32.727

使用 MonologBu​​ndle 的 2.4 及更高版本（注意，MonologBu​​ndle 的发布周期不再与 symfony 同步），您现在可以通过配置非常简单地定义新通道，而无需定义服务。

```
monolog:
    channels: ["my_channel"] 
```

现在只需在控制器中为新通道自动创建记录器：

```
$logger = $this->get('monolog.logger.my_channel');
$logger->info('somelogcontent'); 
```

消息级别是通过使用适当的方法来定义的。查看[`LoggerInterface`](https://github.com/php-fig/log/blob/master/Psr/Log/LoggerInterface.php)所有日志记录方法（确实由 monolog 实现）。这里需要提到一些级别：

```
$logger->info('Info message for interesting things');
$logger->warning('Some application warnings, but the application works');
$logger->error('Error which can influence the application flow/output'); 
```

* * *

`MonologBundle` `~2.4`我知道老问题，但应该提到这个新功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T12:52:34.620

根据[Monolog 文档](https://github.com/Seldaek/monolog/blob/master/doc/01-usage.md)，频道与记录器相关联，基本上记录器的名称就是您的频道。这意味着您不能在给定的记录器中指定另一个通道，但您可以创建具有不同通道的新记录器。

级别只是数字和[常量](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Logger.php#L77)，因此您可以创建自己的级别。使用正确的格式化程序，您将获得与您的自定义级别相对应的字符串。

# php - PHP：如何使用 Snappy（wkhtmltopdf 包装器）

> ID：11945883
> 
> 赞同：3
> 
> 时间：2012-08-14T04:41:39.477
> 
> 标签：php, wkhtmltopdf

我正在尝试使用 Snappy 生成 pdf。我已经阅读了[https://github.com/KnpLabs/snappy](https://github.com/KnpLabs/snappy)上的文档并尝试了代码。

```
require_once '/KnpLabs/src/autoload.php';

use Knp\Snappy\Pdf;

$snappy = new Pdf('C:\Program Files (x86)\wkhtmltopdf');

// Display the resulting image in the browser
// by setting the Content-type header to jpg
$snappy = new Pdf('C:\Program Files (x86)\wkhtmltopdf');
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename="file.pdf"');
echo $snappy->getOutput('http://localhost/pdfTester/try.php'); 
```

当我单击 try.php 上的链接时，会弹出一个打开 pdf 文件的窗口，当我选择打开时，会出现一条消息。

> Adobe Reader 无法打开“file.pdf”，因为它不是受支持的文件类型或文件已损坏

顺便说一句，我刚刚获得了一个月大的 php 经验，我已经在搜索相同的主题，但看起来帮不上什么忙。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:52:27.400

*   您的路径`C:\Program Files (x86)\wkhtmltopdf`看起来像是指向一个文件夹而不是二进制文件。如果您的 wkhtmltopdf 安装到`C:\Program Files (x86)\wkhtmltopdf\`二进制文件可能是的文件夹中，可以`C:\Program Files (x86)\wkhtmltopdf\wkhtmltopdf.exe`尝试指向可执行文件以查看是否有效？
*   如果这不起作用，当您尝试从命令行运行命令时会发生什么？那它行得通吗？

    `wkhtmltopdf http://localhost/pdfTester/try.php test.pdf`

# php - php中特定日期后一周

> ID：11945885
> 
> 赞同：0
> 
> 时间：2012-08-14T04:41:57.420
> 
> 标签：php, mysql, date

您对如何指定特定日期之后的星期几有任何想法吗？我正在使用日期选择器来获取我的开始时间，这就是我将其转换为日期的方式。

```
$formatdate = str_replace("(/\)", "-", $startdate);
$time2 = strtotime( $formatdate );
$date = date('Y-m-d', $time); 
```

我需要知道开始日期 1 周后的日期，以便像这样在我的 mysql 查询中使用它。

```
SELECT * FROM `table` WHERE `date` BETWEEN '$stardate' AND '$enddate' 
```

感谢你们！任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:46:25.833

尝试这个

```
<?php
$currentDate=date("Y-m-d");
$dateOneWeekAdded = strtotime(date("Y-m-d", strtotime($currentDate)) . " +1 week");
echo date("Y-m-d",$dateOneWeekAdded);
?> 
```

**编辑：**对于特定日期，您可以将上面的代码重写为

```
<?php
$currentDate="08/14/2012";
$dateOneWeekAdded = strtotime(date("Y-m-d", strtotime($currentDate)) . " +1 week");
echo date("Y-m-d",$dateOneWeekAdded);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:51:56.600

```
$formatdate = str_replace("(/\)", "-", $startdate);
$start = new DateTime( $formatdate );
$startdate = $start->format("Y-m-d H:i:s");
$next_week = clone $start;
$next_week->add(new DateInterval("P1W"));
$enddate = $next_week->format("Y-m-d H:i:s");
$sql = "SELECT * FROM `table` WHERE `date` BETWEEN '$stardate' AND '$enddate'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:01:00.163

更少的代码行：

```
$end = new DateTime("today +1 week"); 
print $end->format('Y-m-d'); 
```

对于给定的日期：

```
$start = "2012-10-24";
$end = new DateTime("$start +1 week"); 
print $end->format('Y-m-d'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:51:09.283

或者，您可以使用 MySQL 执行此操作：

`SELECT * FROM table WHERE date BETWEEN '$stardate' AND DATE_ADD('$stardate', INTERVAL 7 DAY)`

# google-app-engine - Google Application Engine 重置 TCP 连接

> ID：11945886
> 
> 赞同：0
> 
> 时间：2012-08-14T04:42:13.897
> 
> 标签：google-app-engine, http, tcp, connection

我们观察到 TCP 连接有时会被 Google 应用程序引擎重置。确切的行为如下：

*   TCP 握手完成（SYN、SYN/ACK、ACK）
*   Http POST 由客户端发送
*   Google Application servlet 发送 RST

请参阅随附的屏幕截图。有什么理由吗？我们是否应该简单地在客户端再次发送 POST 请求？

BR 斯坦

![在此处输入图像描述](../Images/168fb5ab333cd23474dca348dd28a828.png)

# javascript - 我应该在 HTML 中添加哪些标头或 javascript 来拒绝旧版浏览器？

> ID：11945887
> 
> 赞同：1
> 
> 时间：2012-08-14T04:42:26.183
> 
> 标签：javascript, browser, compatibility

在开发前端实时 javascript 应用程序时，我们决定放弃对旧浏览器的支持，因为支持它们需要付出太多努力。

我们应该在 HTML 中添加什么标头或 javascript，以便当他们点击 URL 时，我可以在继续我们的应用程序之前重定向一个页面以获取更新的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:49:57.893

您可以使用导航器对象的以下属性

```
 navigator.appCodeName 
 navigator.appName 
 navigator.appVersion
 navigator.cookieEnabled 
navigator.platform 
 navigator.userAgent 
```

您还可以使用 jquery 浏览器对象 [http://api.jquery.com/jQuery.browser/](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:49:59.630

更好的选择是使用特征检测。例如，要测试浏览器是否支持地理位置，可以使用以下命令：

```
if (navigator.geolocation)
{
    // interact with geolocation features
} 
```

* * *

但是，如果您坚持使用浏览器检测，则可以使用以下方法检测浏览器是否使用 IE 8 或更低版本：

```
function getInternetExplorerVersion()
// Returns the version of Windows Internet Explorer or a -1
// (indicating the use of another browser).
{
   var rv = -1; // Return value assumes failure.
   if (navigator.appName == 'Microsoft Internet Explorer')
   {
      var ua = navigator.userAgent;
      var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
      if (re.exec(ua) != null)
         rv = parseFloat( RegExp.$1 );
   }
   return rv;
}

var ver = getInternetExplorerVersion(); // example: 8.0
var belowIE8 = ver <= 8.0; 
```

在这里找到：[http ://www.mkyong.com/javascript/how-to-detect-ie-version-using-javascript/](http://www.mkyong.com/javascript/how-to-detect-ie-version-using-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:48:38.423

如果您想根据特定的 JavaScript 版本确定这一点，请参见下面的代码（未经测试）：

```
<script language="javascript1.5">
var supported = true;
</script>
<script>
if ('undefined' === typeof supported) {
    alert('not at least 1.5 supported');
} 
```

不过，进行特征检测仍然更好，因为这与您将要使用它的目的更好地联系起来。

# jquery - 如何使用jQuery更改另一个文件的div的宽度

> ID：11945888
> 
> 赞同：0
> 
> 时间：2012-08-14T04:42:33.087
> 
> 标签：jquery

我正在将这样的 fonts.php 文件加载到students.php。

```
$("#details").load('fonts.php?id=2', function() {
    $("#details").show();
    $(".gallery").css("width", "80%");
}); 
```

Gallery 是 fonts.php 文件中的一个 div。在加载到students.php文件后，我需要改变这个div的宽度。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:01:06.393

不，没有任何改变。和以前一样。

# iphone - 删除其他框架后获取无法识别的选择器

> ID：11945894
> 
> 赞同：1
> 
> 时间：2012-08-14T04:43:20.457
> 
> 标签：iphone, objective-c, ios, uitableview

编辑：我在这里找到了解决方案[SDWebImage ： setImageWithURL 用于设置 UITableViewCell 的图像时失败](https://stackoverflow.com/questions/8504953/sdwebimage-setimagewithurl-fails-when-used-to-set-image-of-a-uitableviewcell?rq=1)

我有使用 SDWebImage 的 UITableView，效果很好，但我决定从我的应用程序中删除 ShareKit。我相信我所做的只是删除 ShareKit，删除对它的所有引用，然后重新安装 ObjectiveFlickr、JSONKit 和 LFWebAPIkit。所有这些我都没有在这张表中使用。在我这样做之后，一切正常，除了这个表视图。

我收到此错误：

```
-[UIImageView setImageWithURL:placeholderImage:]: unrecognized selector sent to instance 0x86b31a0 
```

我在编译和自动完成方面没有问题，我什至删除并重新添加了 SDWebImage，但它什么也没做。一切运行正常，但是当它尝试使用 UIImageView 加载表时，它会立即在这一行崩溃：

```
[cell.imageView setImageWithURL:[v thumbURL] placeholderImage:[UIImage imageNamed:@"46-movie-2.png"]]; 
```

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"YTVVideoTableCell";

YTVVideoTableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[YTVVideoTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

Video *v = [[[VideoStore sharedStore] allItems] objectAtIndex:[indexPath row]];;

[cell.imageView setImageWithURL:[v thumbURL] placeholderImage:[UIImage imageNamed:@"46-movie-2.png"]];

[cell setController:self];
[cell setTableView:[self tableView]];

[[cell titleLabel] setText:[v title]];
[[cell titleLabel] alignBottom];

return cell; 
```

}

关于我删除 ShareKit 时出了什么问题的任何想法？任何想法如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:16:19.473

这将解决问题：打开“构建设置”选项卡，在“链接”部分，找到“其他链接器标志”设置并添加“-ObjC”标志： ![在此处输入图像描述](../Images/b5757765d70a27e12f1f41426e52f60b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:48:05.007

检查您是否已将 SDWebImage 标头导入到您的类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:57:03.767

我在这里找到了答案：[SDWebImage : setImageWithURL failed when used to set image of a UITableViewCell](https://stackoverflow.com/questions/8504953/sdwebimage-setimagewithurl-fails-when-used-to-set-image-of-a-uitableviewcell?rq=1)

我将“-force_load ${BUILT_PRODUCTS_DIR}/libSDWebImageARC.a”添加到我的构建设置“其他链接器标志”中，它现在可以工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T16:29:55.160

`SDWebImage`通过 Cocoapods使用时出现此错误。事实证明，该`SDWebImage`pod 列在 Podfile 中不正确的目标下。将它移到文件顶部对我有用。

# python - DataFrame.from_records 将（Django）日期时间转换为 datetime64：值错误

> ID：11945897
> 
> 赞同：1
> 
> 时间：2012-08-14T04:43:43.517
> 
> 标签：python, django, datetime, pandas

`DataFrame`我的错误与升级到 pandas 0.81 后构建 Pandas 的日期时间转换有关。具体来说，传递带有时区感知日期时间的 Django Queryset 的*.from_records()*方法会引发 datetime64 转换错误：

```
type(data)
> django.db.models.query.QuerySet

dv = data.values('begin_time', 'datum')
dv[0]
> {'begin_time': datetime.datetime(2006, 4, 27, 12, 40, tzinfo=<UTC>),
   'datum': Decimal('13.3097500')}

df = pd.DataFrame.from_records( dv, index='begin_time' )
> ValueError: Tz-aware datetime.datetime cannot be converted to datetime64
  unless utc=True 
```

Django 日期时间是时区感知的，并且在我看来它设置为 UTC，所以我发现错误消息有点神秘，但这可能是我的失败。我对 Python 比较了解。

所以，我认为要么我需要： 1\. 在某个地方设置 utc=true，如错误所示，但我不知道确切的位置或 2\. 在 .from_records 中关闭到 datetime64 的转换，但我也没有知道在哪里。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:26:42.120

您在解析时区时遇到了 pandas 0.8.1 中的错误：[https ://github.com/pydata/pandas/issues/1693](https://github.com/pydata/pandas/issues/1693)

标记为增强功能，所以也许我不理解并且可能有解决方法，但我很确定这只是一个错误。已经修复，但必须等待 0.8.2。这适用于 0.8.0（我只在升级后遇到了同样的错误）。您可以尝试回退到 0.8.0：

```
pip install -I pandas==0.8.0 
```

只要 0.8.0 仍然满足在您的应用程序中使用 pandas 的任何其他要求。

或者您可能会尝试从[https://github.com/pydata/pandas](https://github.com/pydata/pandas)获取最新的并构建它，但可能不太稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:02:38.547

我在这里创建了一个问题：http: [//github.com/pydata/pandas/issues/1825](http://github.com/pydata/pandas/issues/1825)。我最近只是在研究这些东西，显然把它弄坏了（除非它现在可以在 git master 上运行）。

# ruby-on-rails-3 - rspec 渲染视图无法包含可变数据

> ID：11945899
> 
> 赞同：0
> 
> 时间：2012-08-14T04:44:06.190
> 
> 标签：ruby-on-rails-3, rspec, views

我有一个失败的 rspec 视图测试，但代码有效 - 我可能有一个变量设置不正确，但无法弄清楚它是什么。

当我在规范中显示@incident_report (pp @incident_report) 的内容时，它会正确显示 FactoryGirl 创建的记录。

当我显示实际渲染的内容（渲染的放置）时，它会显示我使用 FactoryGirl 创建的记录中的值...

但是“rendered.should contains(work_order)”规范失败了：

```
1) incident_reports/show.html displays the work order number on the incident
   Failure/Error: rendered.should contain(work_order)
     expected the following element's content to include "54785": 
```

并且不显示任何数据，仅显示 HTML 模板

* * *

规范/视图/incident_report/show.html.haml_spec.rb 代码

```
require 'spec_helper'

describe "incident_reports/show.html" do
  before(:each) do
    @incident_report = Factory(:incident_report)
  end

  it "displays the work order number on the incident" do
    work_order = @incident_report.work_order
    pp @incident_report    #displays an incident_report, id => 1
    assign(:incident_report, @incident_report)
    render 
    puts rendered  #this DOES have the content from @incident_report
    rendered.should contain("Work Order:")
    rendered.should contain(work_order)
    end
  end 
```

* * *

show.html.haml 代码

```
%h1 Display Incident Report
.navigation
  = link_to 'Edit', edit_incident_report_path(@incident_report)
  |
  \#{link_to 'Back', incident_reports_path}

= render 'form'

.navigation
  = link_to 'Edit', edit_incident_report_path(@incident_report)
  |
  \#{link_to 'Back', incident_reports_path} 
```

必须是一些非常简单的东西，我忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:14:40.703

原来是因为我使用的是 simple_form 并且当 simple_form 显示“显示”操作时，它会将字段值作为 'value="54785"' 属性放入 html 中。如果在浏览器中显示它，标签和值都会正确显示，但 rspec 看不到它们。

我不得不添加

```
rendered.should have_tag 'input', :with => { :value => "54765", :name => 'incident_report[work_order]' } 
```

以我的示例使其正常工作。

似乎应该有更好的解决方案，但至少现在我可以继续测试。

# ruby - 解析来自 API 的字符串

> ID：11945908
> 
> 赞同：1
> 
> 时间：2012-08-14T04:45:12.833
> 
> 标签：ruby, json, parsing

我有一个来自 API 的这样的字符串：

```
 "{\"region\":{\"span\":{\"latitude_delta\":0.11197800000000058,\"longitude_delta\":0.10020299999999338},..... 
```

我应该怎么做才能访问`my_returned_object.region`？现在它只是一个字符串，我不知道如何将它转换为另一种对象类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:47:01.840

它是一个包含编码[JSON](http://en.wikipedia.org/wiki/JSON)的字符串。

您需要[安装并使用 JSON 解析器](https://stackoverflow.com/questions/5410682/parsing-a-json-string-in-ruby)将其转换为哈希。

首先，安装gem：

```
gem install json 
```

然后使用它：

```
require 'json'

data = JSON.parse("{\"region\":{\"span\":{\"latitude_delta\":0.11197800000000058,\"longitude_delta\":0.10020299999999338}}}")

puts data["region"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:51:47.007

这似乎是一个 JSON 编码的对象。你可以试试

```
require 'json'
my_hash = JSON.load(my_returned_object).symbolize_keys
puts my_hash[:region] 
```

json 是 Ruby 1.9 的一部分，如果您使用 1.8（或其他 Ruby 实现），您可能需要使用 gem install json 安装 json gem。

# php - 致命错误：调用未定义的方法 mysqli::error()

> ID：11945912
> 
> 赞同：3
> 
> 时间：2012-08-14T04:45:21.630
> 
> 标签：php, mysqli

我可以连接，但是当涉及到准备好的语句时，这是我得到的错误。有什么问题吗？

代码：

```
 // Open connection
    $db = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE);

    //check connection
    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    // Create statement object
    $stmt = $db->stmt_init();   

    // sql statement
    $sql = "INSERT INTO ch_users ('uid','admin','password','directory','size','format','locationid') VALUES (?, 1, ?, ?, ?, ?, 1)";

    // Create a prepared statement
    $stmt = $db->prepare($sql) or die($db->error()); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-08-17T08:27:54.503

对于那些偶然发现此页面的人。

你得到的错误

```
Fatal error: Call to undefined method mysqli::error() 
```

这是因为我们需要将错误作为**变量**而不是**函数来访问**

所以正确的代码是

```
if(! empty( $mysqli->error ) ){
   echo $mysqli->error;  // <- this is not a function call error()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:47:32.610

我的错，列字段的 sql 语句中不应该有引号。现在它起作用了！

# sencha-touch - 在 sencha touch 中使用 Web 服务？

> ID：11945913
> 
> 赞同：0
> 
> 时间：2012-08-14T04:45:43.177
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我是 sencha touch 2 开发的新手。

我的疑问是：-

1)如何在sencha touch 2中使用webservice？

2）如何将参数传递给webservice方法作为该服务方法的输入？

我请你帮忙。

任何参考或教程都会对我有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T06:46:59.980

我使用 ajax 请求来实现这个目标，如下所示：

```
 var resp = Ext.Ajax.request({
        method: 'post',
        url: url,
        jsonData: {
            'method' : 'Product.search',
            'params' : {
                'pageSize' : 20,
                'pageIndex' : 0
            }
        },
        async : true,
        success : function(response, options){
            var sResult = Ext.decode(response.responseText);
            Ext.Array.each(sResult['result']['datas'], function(obj){
                productModel = Ext.create('transport.model.Product', obj);
                productStore.add(productModel);
            });
            callback();
        },
        failure : function(response, options){

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:12:00.320

假设这就是您所说的，这里有一个很好的入门教程：http: [//miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/](http://miamicoder.com/2012/how-to-create-a-sencha-touch-2-app-part-1/)

我个人使用带有 AJAX 代理的 PHP/MySQL 后端

# ruby-on-rails - 我是否正确使用了 ApacheBench？

> ID：11945914
> 
> 赞同：0
> 
> 时间：2012-08-14T04:45:46.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, concurrency, apachebench

在视频控制器 - 显示动作中，我尝试了两种情况。第一个使用`increment_counter`, 并直接写入数据库：

```
Video.increment_counter(:views_count, @video.id) 
```

第二种方法使用该`save`方法。

```
@video.views_count = @video.views_count + 1
@video.save 
```

在 ApacheBench 中，我这样做：

```
ab -n 100 -c 10 http://127.0.0.1:3000vidoes/18 
```

视频 ID 为 18。我确保`views_count`在每次运行时通过`Video.find(18).update_attribute(:views_count, 18)`.

在两种情况下运行 ApacheBench 后，`views_count`都保持在 100。我想`increment_counter`比`save`方法更准确，因为它直接写入数据库。

我的卧推正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:18:20.427

使用这两种方法都得到正确答案的原因是您并没有真正在这里测试并行性。当 apachebench 触发 10 个并发请求时，您的 rails 服务器一次只处理其中一个。尝试以下方法之一来利用第二种情况中存在的竞争条件：

*   启动多个 Rails 服务器并将它们放在负载均衡器后面。您可以使用乘客来执行此操作，或者使用类似的东西`thin -s 4`，然后将所有这些服务器放在 nginx 或 haproxy 实例后面。
*   切换到使用避免 GIL 的线程解决方案，例如在 puma 下运行的 JRuby 或 rubinius

# php - 访问另一个 PHP 文件的 PHP 文件

> ID：11945924
> 
> 赞同：1
> 
> 时间：2012-08-14T04:46:53.000
> 
> 标签：php

我有一个 PHP 文件（可在我的网站上访问），它可以修改 MySQL 数据库中的行。如果行数较少，则文件加载速度很快。但是，如果有大量行（超过一千行并且还在攀升），**则会出现明显的停顿，我认为这可能会超时**。此外，**出于安全原因，我希望用户不要直接与此文件交互**。

我想制作一个用户可以直接与之交互的 PHP 文件，但是当他们单击确定时，此页面立即显示“完成”。但是，它应该连接到后台的第一个 PHP 文件并允许修改行。我对 PHP 没有太多的经验……我应该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:52:16.217

你可以这样做：

```
echo "<html><h1>Finished!</h1></html>";
// now continue with your logic here
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:00:26.863

使“工作”PHP 在 CLI 中可运行，并在“界面”PHP 中使用：

（视窗）

```
<body>
<?php
pclose(popen("start /B php work.php","r"));
?>
<h1>Finished!</h1>
</body> 
```

(Linux)

```
<body>
<?PHP
pclose(open("php work.php > /dev/null","r"));
?>
<h1>Finished!</h1> 
```

如果您需要传递参数，请将它们存储在某个地方（例如数据库或临时文件）并让“工作”PHP 在那里读取它们。

您可以`set_time_limit(0);`在“工作”中使用 PHP 使其不受时间限制地运行。

# php - 使用 AJAX 和 PHP 检测按钮按下

> ID：11945939
> 
> 赞同：0
> 
> 时间：2012-08-14T04:48:41.130
> 
> 标签：php, ajax

我正在尝试使用 AJAX 和 PHP 检测是否按下了按钮（当然这是测试的一部分，而不是我的实际目标）。每当我在文本框中输入内容时，我都可以检测到，但无法检测到按钮是否被按下。

```
<html>
<head>
<script type="text/javascript">
function insert(){

if (window.XMLHttpRequest)
    xmlhttp=new XMLHttpRequest();
else
    xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');

xmlhttp.onreadystatechange=function(){
if (xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById('adiv').innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open('GET','AJAX.inc.php?search='+document.getElementById('search_text').value+'search_button=Search!', true);
xmlhttp.send();
}
</script>
</head>
<body>
<input type="text" id="search_text" name="search" onkeyup="load();">
<input type="submit" name="search_button" value="Search!">
<div id="adiv"></div>
</body>
</html>

And here's my AJAX file:

<?php
if(isset($_GET['search_button'])){
echo 'You pressed a button!';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:53:07.883

如果您的按钮不在 a 中`form`，您可以简单地使用`<button>`or `<input type="button">`。

您可以使用`<button onclick="insert();">Search!</button>`监听按钮按下事件。

# javascript - 使用 javascript 在弹出窗口中填充显示标签

> ID：11945949
> 
> 赞同：0
> 
> 时间：2012-08-14T04:50:10.830
> 
> 标签：javascript, ajax, jquery, spring-mvc, displaytag

在我的应用程序中，我使用 jQuery-Ajax 来获取要在弹出窗口中填充的列表。我在 javascript 代码中得到一个列表，例如 [["1","abc"],["2","bcd"]].. 我在弹出窗口部分使用显示标签来显示弹出窗口。

我的javascript函数就像

```
function getData()
{
     $.ajax({
            url: 'getLists.jav',
            type: 'GET',
            success: function(data){
                $.each(data, function(key, value){
                    alert("Success"+value);
                });
            },
            error: function(data){
                alert("Error");
            }
          });
} 
```

我需要我的显示标签使用 javascript 填充该数据。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:15:54.400

如果您要填充下拉列表是较小的表格，则在 javascript 中这样做很好。但是如果表格表格的列数更多，那么它就有点困难了。在下面的例子中，function(index, value) 中的 value 是 domail 对象，它具有 code、value、codeValue 及其 getter 和 setter 属性。我曾经通过渲染 JSp 来刷新目录，因为它有更多的列数。让我知道您的其他技术（Java/Struts/.Net），以便我可以帮助您。

```
$.ajax({
            type :"POST",
            url  :methodArguments[1]+value,
            data :"&random="
                    + Math.random(),
                    dataType: "json",
            success : function(data) {
            $.each(data.lstJSONValues, function(index, value){
            $("#"+methodArguments[2]).append($("<option/>").attr("value", value.code).text(value.valueCode)); 
               });
            },
            error:function(data)
            {
                alert(data);
            }
        }); 
```

# javascript - Google maps api：强制地图不处理信息框内的点击

> ID：11945951
> 
> 赞同：1
> 
> 时间：2012-08-14T04:50:25.120
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

在我的应用程序中，用户在按地图点击时创建标记。所以这样的代码：

```
function placeMarker(map, location) {
     var marker = new google.maps.Marker({
         position: location,
         map: map
     //other...
     var infowindow = new google.maps.InfoWindow({
         content: ballon.get(0)
     });

     ballon.find("#delete-btn").click(function(){
        infowindow.close();
        $mapPreview.data("markers")[id].marker.setMap(null);
        delete $this.data("markers")[id];
     });
}); 
```

`"#delete-btn"`在里面`infowindow`。问题是当用户单击时，`"#delete-btn"`他还会在地图上创建新标记。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:51:29.670

```
baloon.find("#delete-btn").click(function(e){
    e.stopPropagation(); 
```

将事件变量传递给 click 函数`(e)`，然后使用停止事件传播`e.stopPropagation()`

这将阻止事件通过 DOM 冒泡并被其他各种侦听器（例如地图上的侦听器）拾取。

# c++ - 使用C++开发Linux系统相关程序

> ID：11945955
> 
> 赞同：0
> 
> 时间：2012-08-14T04:50:48.167
> 
> 标签：c++, c, linux

我在做 C++ 相关的 Linux 工作时正在考虑这个问题。

我想问几个问题：

1.  C++ 风格的动态分配是否支持 Linux 系统调用？

    由于 C++ 使用 new/delete，在手册页中，linux 系统调用使用 C 风格的动态分配。我们可以互换使用它们还是限制将 C++ 风格的动态变量传递给 C 风格的动态变量？或者只要保持一致，就可以了？

    我希望以良好的编码风格回答（例如易于维护，易于调试）

2.  另外，这个问题更侧重于如何使用C++开发Linux系统相关的工作？

    我是否只在需要时使用 C，否则我只是将 C++ 用于我的主要工作？或者有更好的方法来做到这一点？

3.  在头文件中，比方说 glob.h，在 C++ 程序中，我们应该只是`#include <glob.h>`还是有其他方法？

我真的很想知道这个问题的行业标准是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:03:22.610

> 1.C++风格的动态分配是否支持Linux系统调用？
> 
> 由于 C++ 使用 new/delete，在手册页中，linux 系统调用使用 C 风格的动态分配。我们可以互换使用它们还是限制将 C++ 风格的动态变量传递给 C 风格的动态变量？或者只要保持一致，就可以了？

`new`并且`delete`不能安全地与和`malloc`混合。但是，C++ 本身可以使用,和，有时很好，但是对于正确的“对象”，它只会让你到目前为止：许多现有的 C++ 库代码硬编码使用and并且你需要处理“放置新”和自己破坏物体。您可以探索根据 and 定义您自己的和运算符- 我从未见过它完成过。典型的 C 堆函数可能针对较大的平均分配大小进行了优化，而 C++ 可能涉及大量小请求，因此可能存在性能和内存包效率方面的考虑......`realloc``free``malloc``realloc``free``new``delete``new``delete``malloc``free`

> 我希望以良好的编码风格回答（例如易于维护，易于调试）

为了可维护性和一致性，C++ 程序倾向于最小化或消除对`malloc`等的使用。

> 2.另外，这个问题更侧重于如何使用C++开发Linux系统相关的工作？
> 
> 我是否只在需要时使用 C，否则我只是将 C++ 用于我的主要工作？或者有更好的方法来做到这一点？

C++ 几乎是 C 的超集，具有一些非常好的特性，可用于编写大型、可维护和高效的程序。如果您知道如何使用它，恕我直言，您应该默认使用它。当您需要更多的可移植性，或者想要与您不能信任的其他人一起工作以明智地使用 C++ 时，请使用 C！（我是认真地说的。）

> 3.在头文件中，比如说glob.h，在C++程序中，我们应该只#include还是有其他方式？

是的...但是您可能希望`extern "C" {`在上一行和`}`下一行将其括起来以抑制 C++ 符号名称重整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:57:00.943

# 1\. 是的

#2。

> 我是否只在需要时使用 c，否则我只是将 c++ 用于我的主要工作？

是的。

linux 的绝大多数特性都是由 C 接口提供的。 `boost`是一个很好的反例。你不会在那里找到特定于 linux 的特性，但通用特性比`glibc`.

# 3\. 是的，你可以这样做，或者你可以考虑`boost::filesystem`（或类似的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:15:37.823

IIRC（自从我在 *nix 上编写 C++ 以来大约 5 年）C++ 可以像 C 程序一样编写和编译，使用相同的 C 语法等，具体取决于编译器。我相信 gnu 编译器支持这一点。C 程序员在迁移到 C++ 时会遇到危险，因为他们编写的 C++ 程序实际上是 C 程序，但末尾带有 cpp。:D

我的意思是，当您编写 C++ 程序时，您可以调用系统函数，与调用 C++ 中的任何函数的方式几乎没有区别，因为它们只是函数调用。*你*是负责分配内存和清理它的人（或者更确切地说，你是通过内置的 C++ 内存管理，如“new”和“destroy”或与项目关联的任何垃圾收集器。事实上，你正在调用 Linux 系统函数真的没关系。只需像调用任何可能创建的类 C 函数一样调用它们即可。

我想说用你所学的任何方式编写代码都是好的 C++ 编码风格。我认为你的担心会比你想象的要少。

# bioinformatics - 识别宏基因组中的 16s rRNA

> ID：11945956
> 
> 赞同：-1
> 
> 时间：2012-08-14T04:51:01.563
> 
> 标签：bioinformatics

我有一个从 EBI 宏基因组下载的项目数据库。这些是包含序列读取的 fasta 文件，并且已经过基本处理（重复屏蔽、长度截断 - 100 等）我想从这里提取 16 秒读取的序列。有人会知道执行此功能的好工具吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:37:32.340

我们（EBI 宏基因组学）将很快发布一项新功能，因此如果您可以等待，将会有一个选项来下载与 16S 基因模型匹配的序列。我们还打算提供基于这些序列的分类树。16S 读数的选择将使用 rRNASelector 完成，这是一个开源软件工具，您可以在 Internet 上找到。希望对 EBI 宏基因组学有所帮助并密切关注（https://www.ebi.ac.uk/metagenomics）。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T08:46:53.480

您可以使用我们称为 C16S 的工具（由 Biosciences R&D, TCS Innovation Labs 开发）。

C16S：一种 16S rDNA 分类算法，使用特定属的隐马尔可夫模型 (HMM) 对 16S rDNA 序列进行分类。为了达到高水平的准确度，C16S 分类器结合了一系列步骤，这些步骤试图通过考虑 HMM 比对的质量来细化 16S rDNA 片段的最终分配。

链接： http: [//metagenomics.atc.tcs.com/C16S/](http://metagenomics.atc.tcs.com/C16S/)

# zend-framework - zend 2 翻译验证错误

> ID：11945958
> 
> 赞同：1
> 
> 时间：2012-08-14T04:51:13.260
> 
> 标签：zend-framework

有很多关于如何在 zend 1 上执行此操作的示例，但在 zend 2 上还没有。有人知道该怎么做吗？

我在模型中使用注释来定义实体。这似乎也不起作用：（它不会在任何地方返回mandatory_translation_key）

```
 /**
 * @ORM\Column(type="string", length=100, name="Name")
 * 
 * @Annotation\Filter({"name":"StringTrim"})
 * @Annotation\Validator({"name":"StringLength", "options":{"min":1, "max":100}})
 * @Annotation\ErrorMessage("mandatory_translation_key")
 */
 protected $name; 
```

# javascript - 我需要用 Javascript 绘制数据的最快、最简单的方法

> ID：11945959
> 
> 赞同：-1
> 
> 时间：2012-08-14T04:51:24.650
> 
> 标签：javascript, jquery, plot

我正在为一种在 Javascript 中运行的轻量级通用机器学习算法进行概念验证，以便在 Web 应用程序中使用。

我需要一种快速可视化大量数据的方法，例如，将 50,000 个浮点数绘制为数组中索引的函数。

有什么东西可以直接从数据数组中生成这样的图表吗？有人指点我visualize.js，但我真的不想在学习过程中搞砸生成标记，Javascript本身就足够慢了。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:06:41.523

试试 jqPlot：[http ://www.jqplot.com](http://www.jqplot.com)

它有比你想象的更多的选项来定制它，它会显示你想要的每一种图表。文档有点复杂，但除此之外，这是一个非常快速的设置。

直接下载链接（2012 年 8 月 13 日）：[https ://bitbucket.org/cleonello/jqplot/downloads/jquery.jqplot.1.0.3r1117.tar.gz](https://bitbucket.org/cleonello/jqplot/downloads/jquery.jqplot.1.0.3r1117.tar.gz)

# javascript - 固定标题 jQuery Mobile

> ID：11945966
> 
> 赞同：4
> 
> 时间：2012-08-14T04:51:58.337
> 
> 标签：javascript, jquery, css, jquery-mobile, header

是否有可能获得固定的标题 jQuery Mobile，在顶部设置一行，如下面的链接所示？

[http://www.expedia.com.au/p/promos/Beach-Breaks.htm](http://www.expedia.com.au/p/promos/Beach-Breaks.htm)

如果您看到标题图像上方的链接上升并且标题出现并固定在顶部。

**向上滚动之前** ![在此处输入图像描述](../Images/6131bffc932ba8122b174d88df9db98e.png)

**向上滚动后** ![在此处输入图像描述](../Images/87b73b0c1d9d3b7d0856ec82885c5adb.png)

我已经尝试使用 iScroll 来获得固定的标题，但不能获得上面链接中的效果。有没有关于这个问题的链接或教程？非常感谢您的时间和提前帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T06:07:20.790

好的，所以你让我想知道如何在 jQuery Mobile 中实现它，因为它可以在我正在处理的项目中派上用场。

使用[JQuery Waypoints](http://imakewebthings.com/jquery-waypoints/)，可以检查某些元素何时到达页面顶部，以及当时页面滚动的方向。我已经设置了以下 jsbin 来向您展示一个可能的解决方案：

[http://jsbin.com/iyowog/3/edit](http://jsbin.com/iyowog/3/edit)

航点代码非常简单，只需在关闭 body 标签之前将脚本包含在站点底部即可。然后，您可以使用`.waypoint()`. 我在我的示例中使用了以下代码，它在您向下滚动时修复标题，并在您再次向上滚动超过其原始点时取消修复它。

```
$('#header').waypoint(function(event, direction) {

   if (direction === 'down') {
         $('#header').attr('data-position', 'fixed');
         $('#header').addClass('ui-header-fixed');

   } else {
        $('#header').attr('data-position', '');
        $('#header').removeClass('ui-header-fixed');
   }
}); 
```

最好的部分是它是动态的，无论页眉在页面中的哪个位置，它都能够判断它何时到达页面顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T06:05:32.760

您可以尝试此代码。这应该可以工作。请注意，我尚未在手机浏览器中对其进行测试。如果有帮助，请告诉我。

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
        $(document).on("pageshow","#page",function(){
            $(this).css("top","100px");
            $(".ui-header-fixed").css("position","absolute");
        })

        $(window).scroll(function(event){
           if($(window).scrollTop() >= 100){
                $(".ui-header-fixed").css("position","fixed");
           }
           else{
                $(".ui-header-fixed").css("position","absolute");
           }
        });
    </script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
</head> 
<body> 
<div style="height:100px;background-color:#ccc"></div>
<div data-role="page" id="page">

    <div data-role="header" data-position="fixed">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content" style="height:1500px;">    
        <p>Lorem ipsum dolor</p>        
    </div><!-- /content -->

</div><!-- /page -->

</body>
</html> 
```

这里有一个演示 - [http://jsfiddle.net/Xg86Z/](http://jsfiddle.net/Xg86Z/)

# jquery - jquery打印对话框和webmethod

> ID：11945979
> 
> 赞同：0
> 
> 时间：2012-08-14T04:53:30.863
> 
> 标签：jquery, printing, webmethod

我在使用 jquery、webmethod 和打印时遇到问题。

我我的jQuery代码：

```
 $("#PrintBtn").click(function () {
            $("#printDialog").dialog({
                modal: true, autoResize: true, height: $(window).height() - 10, width: '90%',
                buttons: {
                    "CANCEL": function () {
                        $(this).dialog("close");
                    },
                    "PRINT ALL": function () {
                        $("#ProcessMsg").dialog({ modal: true, width: 320, height: 200 });
                        FillFe(function () {
                            PageMethods.ProcessPrintRequest(null, $("#hidPDF").val(), FreeEditFields, CreatePostItObjectArray(), function (link) {
                                printResult(link);
                                $("#ProcessMsg").dialog("close");
                                $(this).dialog("close");
                            });
                        });
                    },
                    "PRINT SELECTED PAGES": function () {
                        if (SelectedPages.length > 0) {
                            $("#ProcessMsg").dialog({ modal: true, width: 320, height: 200 });
                            FillFe(function () {
                                PageMethods.ProcessPrintRequest(SelectedPages, $("#hidPDF").val(), FreeEditFields, CreatePostItObjectArray(), function (link) {
                                    printResult(link);
                                    $("#ProcessMsg").dialog("close");
                                    $(this).dialog("close");
                                });

                            });
                        }

                    },
                    "UNCHECK": function () {
                        $(".checkPrint").prop("checked", false);
                        SelectedPages = new Array();
                    }
                }
                , open: function () {
                    SelectedPages = new Array();
                    $("#BookMenu").fadeOut(500);
                    BookMenuShow = false;
                    // $(".checkPrint").prop("checked", false);
                    justShow = false;
                    currentPrTn = PageIndex;
                    //Popluate the chapter box 
                    $("#slChapters").empty();
                    for (var ch = 0; ch < chaptsAndPages.length; ch++) {
                        var chPg = chaptsAndPages[ch].split(",");
                        $("#slChapters").append($("<option></option>")
                                        .attr("value", chPg[0])
                                        .text(chPg[1]));
                    }
                    PopulatePrintBoxEx();
                }
            });
        }); 
```

我的网络方法代码

```
 [WebMethod(true)]
    public static string ProcessPrintRequest(string[] selected, string PDFName, List<FreeEditField> freeEditFields, List<PostItNote> PostIts)
    {
        string pdfName = PDFName + ".pdf";
        string pathToOrginalPdf;
        pathToOrginalPdf = HttpContext.Current.Server.MapPath(pdfName);
        if (selected == null || select.length == 0)
        {
            List<string> ss = new List<string>();
            QuickPDFAX0816.PDFLibrary qp = new PDFLibrary();
            qp.UnlockKey("xxxxxcodexxxx");
            qp.LoadFromFile(pathToOrginalPdf, "");
            int n = qp.PageCount();
            for (int t = 1; t < n + 1; t++)
            {
                ss.Add(t.ToString()); 
            }
            selected = ss.ToArray(); 
        }
        return Common.pdfUtilites.PrintSelectedPages(pathToOrginalPdf, Path.GetFileNameWithoutExtension(Path.GetRandomFileName()) + ".pdf", selected.ToList(), freeEditFields, PostIts);
    } 
```

我的实用程序代码

```
 public static string PrintSelectedPages(string pathToPDF, string docName, List<string> selectedPages, List<FreeEditField> freeEdits, List<PostItNote> PostIts)
    {
        QuickPDFAX0816.PDFLibrary qp = new PDFLibrary();
        qp.UnlockKey("xxxcodexxxx");
        if (qp.LoadFromFile(pathToPDF, "") == 1)
        {
            string pages = "";
            foreach (string s in selectedPages)
            {
                pages = pages + s + ",";
            }
            qp.ExtractPageRanges(pages);
            StringBuilder sb = new StringBuilder(); 
            sb.Append("var pp=this.getPrintParams();"); 
            sb.Append("pp.interactive = pp.constants.interactionLevel.automatic;"); 
            sb.Append("this.print(pp);");

            qp.SetOpenActionJavaScript("var pp=this.getPrintParams();this.print(pp);"); 
            qp.SaveToFile(HttpContext.Current.Server.MapPath("../TmpForDownloads/print" + docName));
            qp = null;

            string doc = AddEditFieldData(freeEdits, "../TmpForDownloads/print" + docName, selectedPages);
            doc = AddPostItNotes(PostIts, "../TmpForDownloads/print" + docName, selectedPages);
            return doc;
        }
        else
        {
            return "ERROR";
        }
    } 
```

我的问题的链接。

[http://www.agflipbooks.com/books/book.aspx?bookid=301](http://www.agflipbooks.com/books/book.aspx?bookid=301)

这是正在发生的事情。我去单击看起来像打印机的右下角图标上的打印按钮。大约 2 到 3 分钟后，我单击打印所有对话框显示系统进程。出现第二个框，说初始化然后注意。我让它静置了大约 15 分钟，没有任何东西被冻结。

点击上面的链接，自己看看。我转到目录 TmpForDownloas 并且 pdf 在那里我单击 pdf 并创建所有文件。

AddPostItNotes 添加任何添加到书籍页面的 postits，如果有带有文本的字段添加到 pdf，则与 AddEditFieldData 相同。

任何帮助将不胜感激？

我也有这个。

```
function printResult(res) {
        var userAgent = navigator.userAgent.toLowerCase();
        $.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase());
        $.browser.safari = /safari/.test(navigator.userAgent.toLowerCase());
        $.browser.mozilla = /mozilla/.test(navigator.userAgent.toLowerCase());
        var time = 3000; 
        var OSName = "Unknown OS";

        if (navigator.appVersion.indexOf("Win") != -1) OSName = "Windows";
        if (navigator.appVersion.indexOf("Mac") != -1) OSName = "MacOS";
        if (navigator.appVersion.indexOf("X11") != -1) OSName = "UNIX";
        if (navigator.appVersion.indexOf("Linux") != -1) OSName = "Linux";

        $("#pdfPrintDialog").dialog({ modal: true, width: 640, height: 500,
            open: function () {
                var objectTag = "<object data='" + res + "#view=Fit&toolbar=1' type='application/pdf' width='100%' height='100%'><p>It appears your Web browser is not configured to display PDF files. No worries, just <a href='../TmpDownloads/testpdf.pdf'>click here to download the PDF file.</a></p>"
                $("#pdfArea").html(objectTag);
            },
            buttons: {
                "Done": function () { $(this).dialog("close"); }
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:30:30.993

问题已修复，这是图像到 pdf 的缓存问题。我减少

# c++ - 使用 C++ 的 SQLite 插入语句

> ID：11945980
> 
> 赞同：4
> 
> 时间：2012-08-14T04:53:42.903
> 
> 标签：c++, sqlite

下面是我在 test2.cpp 上尝试过的代码

我检查了我的数据库，发现没有添加新记录。我的陈述实际上出了什么问题？

```
#include <iostream>
#include <sqlite3.h>

//g++ -o test2 test2.cpp -lsqlite3
using namespace std;

int main()
{
int counter = 0;

    sqlite3 *db;
    sqlite3_stmt * stmt;

string username = "panda";
string name = "Kungfu Panda";
string department = "normal";
string password = "hellopassword";

string sqlstatement = "INSERT INTO abe_account (" + username + "," + name + "," + department + "," + password + ");";

    if (sqlite3_open("abeserver.db", &db) == SQLITE_OK)
    {
    sqlite3_prepare( db, sqlstatement.c_str(), -1, &stmt, NULL );//preparing the statement
    sqlite3_step( stmt );//executing the statement
        }
    else
    {
        cout << "Failed to open db\n";
    }

    sqlite3_finalize(stmt);
    sqlite3_close(db);

    return 0;

} 
```

我想问是否有可能知道该语句是否也成功执行。就像添加的一行一样，来自 sqlite3 的某种形式的确认。如果出现错误，它是否也能识别出来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:31:26.937

当您进行插入时，您通常按照您要提供数据的顺序指定字段。否则，您必须以正确的顺序指定所有数据（按照定义的顺序为表中的所有字段传递一个值）。

因此，您的语法不完整......要么这样做：

```
INSERT INTO tablename (field1, field2, field3) VALUES (value1, value2, value3); 
```

或这个：

```
INSERT INTO tablename VALUES (value1, value2, value3) 
```

此外，由于您没有将数据绑定到准备好的查询，因此您需要引用您的字符串。只替换用户名是不行`panda`的。您需要提供`'panda'`. 因此，字符串是这样输入的：

```
"('" + username + "','" + name + "','" + department + "','" + password + "');" 
```

因为这很容易搞砸（并且有特殊字符的转义码，*例如*单引号），您可能更喜欢创建一个函数来引用字符串，它*至少*会这样做：

```
string quotesql( const string& s ) {
    return string("'") + s + string("'");
} 
```

然后：

```
"(" + quotesql(username) + "," + quotesql(name) + ... 
```

所以，你最终可能会得到这个（假设字段名）：

```
string sqlstatement =
    "INSERT INTO abe_account (username, name, department, password) VALUES ("
    + quotesql(username) + ","
    + quotesql(name) + ","
    + quotesql(department) + ","
    + quotesql(password) + ");"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:18:50.067

尝试在字符串周围添加一些单引号：

```
string sqlstatement = "INSERT INTO abe_account ('" + username + "','" + name + "','" + department + "','" + password + ");"; 
```

不熟悉 sqllite，但通常 INSERT 看起来像：

```
string sqlstatement = "INSERT INTO abe_account (ColumnName1, ColumnName2, ColumnName3, ColumnName4) VALUES ('" + username + "','" + name + "','" + department + "','" + password + "');"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:41:51.500

是的，您可以知道它失败的原因。

# 包括“sqlite_exception.h”

按照这种方式：

```
int m = sqlite3_step(stmt);
if(m == SQLITE_BUSY)
{ 
```

/*尝试再次执行 sqlite3_step，使用 sleep() 延迟 ****** / }

```
if(m == SQLITE_ERROR)
    std::cout(sqlite3_sql(stmt), sqlite3_errmsg(db));
if(m == SQLITE_MISUSE)
    std::cout(sqlite3_sql(stmt), sqlite3_errmsg(db)); 
```

看看这些： [http ://www.sqlite.org/c3ref/c_abort.html](http://www.sqlite.org/c3ref/c_abort.html)

# iis - 如何从头开始在 IIS 上运行 NuGetGallery？

> ID：11945984
> 
> 赞同：2
> 
> 时间：2012-08-14T04:54:00.300
> 
> 标签：iis, nuget

我正在尝试在我的工作站上设置一个[NuGet 库](https://github.com/NuGet/NuGetGallery)来玩，但我似乎无法按顺序获得先决条件或配置。我在[构建](https://github.com/NuGet/NuGetGallery/issues/120)源代码时遇到了问题，但我想我解决了这个问题。我能够在 WebMatrix/IIS Express 中运行它，但我想“升级”并让它在完整的 IIS 中运行。

运行本地 NuGet 库的最简单步骤是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:59:51.030

最终为我工作的步骤是......

1.  安装 ASP.NET MVC（从[Web 平台安装程序](http://www.microsoft.com/web/downloads/platform.aspx)）
2.  注册 ASP.NET v4.0 ( `cmd> aspnet_regiis.exe -i`)
3.  下载[NuGetGallery](https://github.com/NuGet/NuGetGallery)并构建它
4.  将网站输出放在磁盘上的某个位置
5.  在 IIS 中创建一个指向该输出的新网站（使用`DefaultAppPool`）
6.  更改`DefaultAppPool`为使用 .NET 4.0
7.  `DefaultAppPool`将身份更改为`NetworkService`（使用高级设置）
8.  创建一个名为“NuGetGallery”的 SQLEXPRESS 数据库</li>
9.  `NetworkServic`在 SQLEXPRESS 实例上为 e 创建一个登录名（具有系统管理员权限？）
10.  回收应用池，重启网站

您已准备好运行您的网站！您可能想选择一个很酷的地址，例如，`nuget.mycompany.com`或`mycompany.com/nuget`。

# android - Android SDK 未检测到我的 Android 2.3 手机，但我的系统仍能识别我的设备

> ID：11945988
> 
> 赞同：2
> 
> 时间：2012-08-14T04:54:39.457
> 
> 标签：android, sdk

我安装了 Android SDK 并连接了我的 Android 2.3 设备（可调试），但由于某种原因，SDK 管理器无法识别我的设备。有什么我做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:34:40.943

您是否尝试过重新启动 adb 服务器？

如果不试试这个：

*   创建一个名为的批处理文件`restart-adb-server.bat`
*   将此批处理文件复制到`platform-tools`您的 Android SDK 安装目录的目录中。
*   然后双击批处理文件重新启动 abd 服务器并列出连接的设备

批处理文件内容

```
adb kill-server
adb start-server
cls
adb devices

pause 
```

这可能会对您有所帮助。

# c - windows中char *和LPSTR的区别

> ID：11945990
> 
> 赞同：20
> 
> 时间：2012-08-14T04:54:47.413
> 
> 标签：c, windows, winapi, visual-c++

如果这是一个基本或愚蠢的问题，我深表歉意。`char*`和有什么区别`LPSTR`。在我的编译器中`sizeof`两者都给出了 4 个字节。有人可以详细解释我。谢谢..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-14T05:02:06.773

`LPSTR`是一种*Windows*类型，无论您在什么平台上编译，都意味着相同。它是一个指向字符串的长指针。

回到分段架构的时代（旧的 64K 段，而不是新的基于选择器的分段内存），您有微型、小型、中型、大型和巨大的内存模型，重要的是 Windows 类型始终相同，不管是什么类型的指针`char *`。

因此，如果您遵循底层类型不同的不同编译器，则`windows.h`头文件将定义`LPSTR`以弥补这一点。

例如，Borland C 可能有一个 16 位`char *`，并且`LPSTR`可能必须`far char *`针对它进行定义。在`char *`已经是长/远指针的编译器中，`LPSTR`将只使用它。

如今，对于 32 位以上的平面模型，可能没有真正需要这种恶作剧，尽管在 64 位和 32 位代码之间转换之类的事情仍然*可能发生。*尽管如此，那里定义的类型仍然存在，并且仍然在使用中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T05:00:46.153

基本上，LP* 指针用于指示在 16 位版本的 Windows 上使用 32 位指针：

来自[维基书籍](http://en.wikibooks.org/wiki/Windows_Programming/Handles_and_Data_Types#Hungarian_Notation)

> 字母“LP”或前缀“lp”代表“长指针”，与32位机器上的常规指针完全相同。当需要区分指针和长指针时，LP 数据对象只是从 Windows 3.1 或更高版本继承而来的遗留对象。在现代 32 位系统上，这些前缀可以互换使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T05:00:11.217

差异隐藏在时间的深处。LPSTR 代表“指向字符串的长指针”。回到 32 位处理器之前，指向可能位于不同内存段（想想，在内存中很远）的内存的指针需要额外的空间来存储。

在 32 位（及更高版本）处理器上，它们完全相同。Microsoft 仅出于历史原因使用 LPSTR。

# javascript - jQuery幻灯片 - 想要随机但需要从相同的图像开始

> ID：11945992
> 
> 赞同：1
> 
> 时间：2012-08-14T04:55:03.950
> 
> 标签：javascript, jquery, random, slideshow

所以我发现了这个很棒的 jQuery 幻灯片，叫做 Skitter。这很棒！所以我在我最新的项目中实现了它。我明白了@ [http://thiagosf.net/projects/jquery/skitter/#documentation](http://thiagosf.net/projects/jquery/skitter/#documentation)

是否有可能（如果可以，我该如何）让图像随机显示，但总是以特定的开头？例如，假设我希望用户加载页面时显示的第一张图片是带有欢迎消息的特定图片。但是对于“之后”的每个图像，它都是随机的。

我的头部有“show_randomly: true”部分，我当前的幻灯片随机化成功。我只希望有一个“开始”的形象。

所以在它的主页上，我做了“自定义功能”并将它给我的代码复制/粘贴到我的页面头部......

```
<!-- CSS -->
<link type="text/css" href="scripts/SkitterSlideshow/css/skitter.styles.css"
      media="all" rel="stylesheet" />

<!-- JS -->
<script type="text/javascript" 
      src="scripts/SkitterSlideshow/js/jquery-1.6.3.min.js"></script>
<script type="text/javascript" 
      src="scripts/SkitterSlideshow/js/jquery.easing.1.3.js"></script>
<script type="text/javascript" 
      src="scripts/SkitterSlideshow/js/jquery.animate-colors-min.js"></script>
<script type="text/javascript" 
      src="scripts/SkitterSlideshow/js/jquery.skitter.min.js"></script>

<!-- Init Plugin -->
<script>
        $(document).ready(function() {
            $(".box_skitter_large").skitter({
                animation: "randomSmart", 
                dots: true, 
                preview: true, 
                controls_position: "center", 
                numbers_align: "right", 
                hideTools: true, 
                show_randomly: true, 
                controls: true, 
                interval: 5000,
                velocity: 0.5,
            });
        });
</script> 
```

所以就像我说的，我有一个成功的幻灯片运行，它正在随机化图像。只需要一种方法让它始终从列表中的一个特定图像开始。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:39:19.487

据我所知，这不是 Skitter 脚本的功能。但是，您可以轻松添加它。从打开`jquery.skitter.js`文件开始（很难对您现在使用的 .min.js 文件进行更改，以后您可以随时将其最小化）。

找到以下行：

```
if (this.settings.show_randomly) this.settings.images_links.sort(function(a,b) {
    return Math.random() - 0.5;
}); 
```

紧接着，添加这个：

```
/* START INITIAL FIXED IMAGE MOD */
if (this.settings.show_randomly) { /* Only use a fixed initial image if show_randomly is enabled */

    /* The following function is used to move an item in an array from fromIndex to toIndex */
    Array.prototype.move = function(fromIndex, toIndex) {
        this.splice(toIndex, 0, this.splice(fromIndex, 1)[0]);
    };

    initialIndex = 0;

    /* The following function finds the desired initial image and stores it's location */
    $.each(this.settings.images_links, function(index, item) {
        if (item[1].slice(0,9) == "[initial]") initialIndex = index;
    });

    this.settings.images_links[initialIndex][1].replace("[initial]", ""); /* Removes the [initial] tag so the link works properly */
    this.settings.images_links.move(initialIndex, 0); /* Move it to the front of the array so it's displayed first */
}
/* END INITIAL FIXED IMAGE MOD */ 
```

然后，要声明一个初始（开始）图像，只需添加`[initial]`到所需图像的 href 属性的开头即可。假设您在脚本选项中启用了 show_randomly，以下示例将始终从 images/003.jpg 开始。

```
<div class="box_skitter box_skitter_large">
    <ul>
        <li><a href="#cube"><img src="images/001.jpg" class="cube" /></a><div class="label_text"><p>cube</p></div></li>
        <li><a href="#cubeRandom"><img src="images/002.jpg" class="cubeRandom" /></a><div class="label_text"><p>cubeRandom</p></div></li>
        <li><a href="[initial]#block"><img src="images/003.jpg" class="block" /></a><div class="label_text"><p>block</p></div></li>
        <li><a href="#cubeStop"><img src="images/004.jpg" class="cubeStop" /></a><div class="label_text"><p>cubeStop</p></div></li>
        <li><a href="#cubeHide"><img src="images/005.jpg" class="cubeHide" /></a><div class="label_text"><p>cubeHide</p></div></li>
        <li><a href="#cubeSize"><img src="images/006.jpg" class="cubeSize" /></a><div class="label_text"><p>cubeSize</p></div></li>
    </ul>
</div> 
```

如果你想再次最小化这个，有几个 Internet 服务，例如[http://www.minifyjavascript.com](http://www.minifyjavascript.com)、[http://refresh-sf.com/yui](http://refresh-sf.com/yui)或[http://jscompress.com](http://jscompress.com)。

# java - C++中Java接口的等价物？

> ID：11945993
> 
> 赞同：28
> 
> 时间：2012-08-14T04:55:04.877
> 
> 标签：java, c++, overriding, abstract-class, virtual-inheritance

> **可能重复：**
> [如何在 C++ 中声明接口？](https://stackoverflow.com/questions/318064/how-do-you-declare-an-interface-in-c)
> [c++中的java接口？](https://stackoverflow.com/questions/6831161/interface-as-in-java-in-c)

我是一名学习 C++ 的 Java 程序员，我想知道 C++ 中是否有类似 Java 接口的东西，即另一个类可以实现/扩展多个类的类。谢谢。ps 新来的，如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-14T04:58:16.323

在 C++ 中，仅包含纯虚方法的类表示接口。

例子：

```
// Define the Serializable interface.
class Serializable {
     // virtual destructor is required if the object may
     // be deleted through a pointer to Serializable
    virtual ~Serializable() {}

    virtual std::string serialize() const = 0;
};

// Implements the Serializable interface
class MyClass : public MyBaseClass, public virtual Serializable {
    virtual std::string serialize() const { 
        // Implementation goes here.
    }
}; 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-14T06:06:30.187

要模拟 Java `interface`，您可以使用仅具有纯虚函数的普通基础。

您需要使用虚拟继承，否则您可能会得到**重复继承**：同一个类可以在 C++ 中多次成为基类。这意味着在这种情况下，对该基类的访问将是模棱两可的。

C++**没有**提供与 Java 完全等价的`interface`功能：在 C++ 中，重写虚函数只能在具有虚函数声明的类的派生类中完成，而在 Java 中，`interface`可以在 a 中声明方法的重写器基类。

[例子：

```
struct B1 {
    void foo ();
};

struct B2 {
    virtual void foo () = 0;
};

struct D : B1, B2 {
    // no declaration of foo() here
}; 
```

`D`也继承了函数声明：`B1::foo()`和`B2::foo()`.

`B2::foo()`是纯虚拟的，`D::B2::foo()`也是如此；`B1::foo()`不会覆盖`B2::foo()`，因为`B2`它不是`B1`.

因此，`D`是一个抽象类。

--结束示例]

无论如何，**您为什么要在 C++ 中模拟 Java 的任意限制？**

编辑：添加示例以进行说明。

# android - 收到通知时如何更改自定义选项卡的图像

> ID：11945997
> 
> 赞同：0
> 
> 时间：2012-08-14T04:55:33.887
> 
> 标签：android

我有一个自定义选项卡，我正在后台运行一项服务，该服务在 1 分钟后访问 Web 服务并从 Web 获取一些数据。现在我希望在收到数据时第一个选项卡图像被更改。请帮助。在此先感谢。

我的代码

```
 public class MainTabActivity extends TabActivity {

 public static TabHost mTabHost;
 public static TextView offLineText;

private void setupTabHost() {
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);             
    mTabHost.setup();  
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);        
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab_test);  
    offLineText=(TextView)findViewById(R.id.offlinetext);
    setupTabHost();  
    mTabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider); 
    setupTab(new TextView(this), "New Order!","NewOrderActivity.class",R.drawable.neworder);
    setupTab(new TextView(this), "Viewed Orders","ViewedOrderActivity.class",R.drawable.viewd);
    setupTab(new TextView(this), "Settings", "SettingActivity.class",R.drawable.setting);
    setupTab(new TextView(this), "Dashboard","DashboardActivity.class",R.drawable.view);      

}

private void setupTab(final View view, final String tag, final String className, int neworder) {
    View tabview = createTabView(mTabHost.getContext(), tag, mTabHost.getContext().getResources().getDrawable(neworder));

    Intent intent; 
    intent = new Intent().setClass(this, NewOrderActivity.class);
    if (className.equals("NewOrderActivity.class")) {
        intent = new Intent().setClass(this, NewOrderActivity.class);}
    if (className.equals("ViewedOrderActivity.class")) {
        intent = new Intent().setClass(this, ViewedOrderActivity.class);}    
    if (className.equals("SettingActivity.class")) {
        intent = new Intent().setClass(this, SettingActivity.class);}
    if (className.equals("DashboardActivity.class")) {

        intent = new Intent().setClass(this, DashboardActivity.class);
        }  

    TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tabview).setContent(intent); {
    };
    mTabHost.addTab(setContent);
}

private static View createTabView(final Context context, final String text,final Drawable drawable) {

    View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
    TextView tv = (TextView) view.findViewById(R.id.tabsText);
    tv.setText(text); 
    ImageView imageview=(ImageView) view.findViewById(R.id.imgTab);                   
    imageview.setImageDrawable(drawable);

    return view;        

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:08:52.657

你试过用`Handler`吗？[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

# iphone - 当我还使用自定义表格视图单元格时，如何通过 NSArray 设置表格视图的文本？

> ID：11945998
> 
> 赞同：0
> 
> 时间：2012-08-14T04:55:44.487
> 
> 标签：iphone, ios, xcode, uitableview, ios4

我有一个通过自定义表格视图单元设计的 UITable 视图。我希望每个单元格上的文本都不同，所以我`label`在我的 CustomCell 中添加了一个，并将一个连接`IBOutlet`到它，但是我很难将我的头脑围绕在代码的逻辑部分上。到目前为止我有这个：

// 这是在我的表视图控制器类中。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *object = [[NSBundle mainBundle]loadNibNamed:@"TableOfContentsCell" owner:self options:nil];

        for (id currentObject in object) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {

            cell = (TableOfContentsCell *)currentObject;
            break;
            }
        }

    }

    //cell.textLabel.textColor = [UIColor whiteColor];

    // Configure the cell...

    return cell;
}

//This is in my Custom Table View Cell Class.

-(void)setTableText{
cellLabel.text = [table.tableCellText objectAtIndex:0];
} 
```

当我想要的文本位于数组内时，我无法弄清楚如何设置文本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T05:44:21.597

我不清楚您为什么要将数据加载到自定义单元格中的标签，请澄清。
其次，在评论配置单元格下方，您可以自定义您的单元格。正如您设置 textColor 所做的那样。
只需在表视图控制器类中声明该数组

然后编写下面的代码：

```
 // Configure the cell...

    cell.cellLabel.text = [yourArrayName objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:08:52.430

只需从 tableView:cellForRowAtIndexPath 填充它

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    // Configure the cell...
    cellLabel.text = [table.tableCellText objectAtIndex:indexPath.row];
    return cell;
} 
```

只需确保 tableview 可以访问 table.tableCellText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:09:35.173

不需要单独的方法。在您的 qn 代码中，有两行注释...（//配置单元格...）将此代码添加到该部分

假设您的自定义单元格中有两个标签，然后向它们添加标签（此处为 1 和 2）并通过 viewwithtag: 方法在代码中获取其引用

```
UILabel *label=(UILabel *)[cell viewWithTag:1];
[label setText:@"2"];

UILabel *label2=(UILabel *)[cell viewWithTag:2];
[label2 setText:@"sasd"]; 
```

您必须保持的条件是单元格的内容必须被唯一标记，并且使用此方法您可以获得自定义单元格中任何视图的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:16:47.587

根据您的需要创建您的自定义单元格类。然后。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

 TableCustomCell *cell = (TableCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

//.....................

cell.yourLabel.text = [yourArray objectAtIndex:indexPath.row];

return cell;
} 
```

# windows-phone-7 - 跨 WiFi/域网络的客户端/服务器对等发现

> ID：11945999
> 
> 赞同：1
> 
> 时间：2012-08-14T04:56:05.307
> 
> 标签：windows-phone-7, networking, client-server, wifi, p2p

我正在尝试创建一个客户端/服务器应用程序（带有 Windows Phone 7 客户端和 Windows PC 服务器），它可以在网络上自动发现彼此，而无需任何干预服务器或预先存在的对等网络。我已经能够使用多播 UDP 为简单的发现模型创建原型客户端/服务器实现。当两台机器都配置为使用相同的 WiFi 网络时，此方案运行良好。但是，在服务器 (PC) 通过以太网连接到域网络的情况下，客户端 (WP7) 和服务器将无法再发送或接收 UDP 多播数据包。两者配置了不同的网关服务器，但奇怪的是，如果使用服务器的显式 IP 地址，它们仍然可以通过 TCP/IP 建立连接。

当客户端/服务器在以这种方式配置的网络上时，它们自动发现彼此的正确方法是什么？是否有自动发现的标准机制？这可能是网络问题还是可以在应用层解决？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:59:55.900

多播 UDP 通常不会跨路由器边界传播。因此，传统是使用一些中央服务器来发现对等点。当您需要发现*服务器*时，事情变得更加棘手。在某些情况下，可以使用 DNS（您可以将自定义记录放入 DNS，该记录将引用服务器的地址）。在 Active Directory 环境中，您可能可以使用一些 AD 服务器来保存类似的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:42:59.957

以上是我的想法，不知道是否准确。用UDP方式做应该没问题，我猜像Totem这样的协议依赖于UDP。UDP 是网络协议也用于自动服务发现的东西。

但是，当您处理 UDP 不可靠的跨域问题时，您将不得不使用 TCP。TCP 将确保可靠性，但我怀疑它是否有能力进行自动发现。

我认为一个好方法是让服务器注册到像 LDAP 这样的命名服务器 .. 这样客户端就可以查询 LDAP 并获​​取服务器详细信息。但这更像是我的一种应用层方法。

我在我们的产品中看到我们使用 TCP 上的 Gossip 协议来检查分布式系统的心跳。