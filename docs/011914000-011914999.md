# StackOverflow 问答 11914000-11914999

# php - 使用 PHP 在 Facebook 墙上发布博客消息

> ID：11914000
> 
> 赞同：-4
> 
> 时间：2012-08-11T10:45:46.263
> 
> 标签：php, facebook

我希望能够从我的博客网站帖子中自动在 Facebook 墙上发帖。例如，一旦用户使用表单在我的博客网站上发布消息，该消息将自动发布在 Facebook Wall（类似于 Twitter）上。我们如何使用 PHP 做到这一点？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T10:49:53.890

如何将您的博客添加到 facebook[在 facebook 上进行了说明](https://www.facebook.com/notes/blogging-with-beth/how-to-publish-your-blog-posts-to-facebook-automatically/245596473016)。

[此处解释了](http://raventools.com/blog/facebook-comments/)如何向 facebook 添加评论。

如果您搜索该主题，Google 还有很多其他资源。

# android - 通知下载文件

> ID：11914004
> 
> 赞同：0
> 
> 时间：2012-08-11T10:46:28.983
> 
> 标签：android, notifications

加载应用程序时冻结。正确执行没有通知的下载文件。可能是什么问题？

```
 protected void onProgressUpdate(final Integer... values) {
                       new Thread(new Runnable() {
                            public void run() {

                                    mHandler.post(new Runnable() {
                                        public void run() {
                                             int progress=(int) ((values[0] / (float) values[1]) * 100);
                                                Integer textProgress=new Integer(progress);
                                               notification.contentView.setProgressBar(R.id.progressBar1, 100, progress, false);
                                               notification.contentView.setTextViewText(R.id.progress, textProgress.toString()+"%");
                                               myNotificationManager.notify(NOTIFY_ID, notification);
                                        }
                                    });
                                }
                            }).start();

                  } 
```

这一行日志猫

```
 08-13 05:52:34.039: E/ActivityManager(59): ANR in com.example.webbrawsermanat (com.example.webbrawsermanat/.WebBrawser)
    08-13 05:52:34.039: E/ActivityManager(59): Reason: keyDispatchingTimedOut
    08-13 05:52:34.039: E/ActivityManager(59): Load: 2.06 / 0.9 / 0.35
    08-13 05:52:34.039: E/ActivityManager(59): CPU usage from 23968ms to 36ms ago:
    08-13 05:52:34.039: E/ActivityManager(59):   system_server: 79% = 77% user + 1% kernel / faults: 2446 minor 12 major
    08-13 05:52:34.039: E/ActivityManager(59):   webbrawsermanat: 19% = 19% user + 0% kernel / faults: 271 minor 3 major
    08-13 05:52:34.039: E/ActivityManager(59):   m.android.phone: 0% = 0% user + 0% kernel / faults: 247 minor
    08-13 05:52:34.039: E/ActivityManager(59):   ndroid.launcher: 0% = 0% user + 0% kernel / faults: 133 minor
    08-13 05:52:34.039: E/ActivityManager(59):   kswapd0: 0% = 0% user + 0% kernel
    08-13 05:52:34.039: E/ActivityManager(59):   mmcqd: 0% = 0% user + 0% kernel
    08-13 05:52:34.039: E/ActivityManager(59):   qemud: 0% = 0% user + 0% kernel / faults: 3 minor
    08-13 05:52:34.039: E/ActivityManager(59):   adbd: 0% = 0% user + 0% kernel
    08-13 05:52:34.039: E/ActivityManager(59):   ronsoft.openwnn: 0% = 0% user + 0% kernel / faults: 157 minor
    08-13 05:52:34.039: E/ActivityManager(59):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 156 minor
    08-13 05:52:34.039: E/ActivityManager(59):   zygote: 0% = 0% user + 0% kernel / faults: 179 minor
    08-13 05:52:34.039: E/ActivityManager(59):   d.process.media: 0% = 0% user + 0% kernel / faults: 129 minor
    08-13 05:52:34.039: E/ActivityManager(59):   com.android.mms: 0% = 0% user + 0% kernel / faults: 130 minor 1 major
    08-13 05:52:34.039: E/ActivityManager(59): TOTAL: 99% = 97% user + 1% kernel + 0% iowait 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:47:16.793

您实际上并不需要所有的 Threads 和 Runnables 嵌套。假设这是在一个`AsyncTask`子类中，只需使用它：

```
protected void onProgressUpdate(final Integer... values) {
   int progress=(int) ((values[0] / (float) values[1]) * 100);
   Integer textProgress=new Integer(progress);
   notification.contentView.setProgressBar(R.id.progressBar1, 100, progress, false);
   notification.contentView.setTextViewText(R.id.progress, textProgress.toString()+"%");
   myNotificationManager.notify(NOTIFY_ID, notification);
} 
```

`onProgressUpdate()`将在主（UI）线程上调用，因此直接执行 UI 操作是安全的。

# awk - 如何使用awk增加文本文件中列之间的空间？

> ID：11914010
> 
> 赞同：0
> 
> 时间：2012-08-11T10:46:52.957
> 
> 标签：awk

如何使用 awk 增加文本文件中列之间的空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:04:22.617

最简单的方法可能是使用格式宽度说明符。这取决于您的数据。

```
{ 
    for (i = 1; i <= NF; i++) {
        printf("%9s  ", $i);
    }
    printf("\n") ;
} 
```

上面告诉 awk在`%9`9 个字符宽的空间中打印每个字段。如果数据的宽度超过 9 个字符，awk 将根据需要使用尽可能多的空间。

`printf()`非常灵活。例如，对于具有四个字段的输入文件，您可以执行以下操作来控制输出格式。

```
printf("%d   %9s        $d:    %s\n", $1, $2, $3, $4); 
```

[GNU gawk 中的格式宽度](http://www.gnu.org/software/gawk/manual/html_node/Format-Modifiers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:43:05.837

如果你想让你的输出更漂亮，请使用[`column`](http://man.cx/column)：

```
$ printf "%s %s %s\n" one two three four five six seven eight nine
one two three
four five six
seven eight nine

$ printf "%s %s %s\n" one two three four five six seven eight nine | column -t
one    two    three
four   five   six
seven  eight  nine 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:03:56.887

这可能对您有用：

```
cat <<\! >file
> a b c d
> w x y z
> !
cat file
a b c d
w x y z
awk -v OFS='     ' '{$1=$1};1' file
a     b     c     d
w     x     y     z 
```

# php - 在 Wordpress 中设置数组

> ID：11914012
> 
> 赞同：0
> 
> 时间：2012-08-11T10:47:05.280
> 
> 标签：php, arrays, wordpress, multidimensional-array, set

我目前正在尝试在 Wordpress 中设置搜索，但由于我目前正在丢失查询中的搜索词而遇到问题。我相信这是因为我正在运行一个新查询而不是设置 WP 查询。

## 当前问题

目前我正在运行以下命令（我希望搜索分类`feature`和`location`搜索词的示例。

```
if ($s_feature != "" && $s_location != "")
    {
        $s_feat_array = array(
            'taxonomy' => 'feature',
            'terms' => array($s_feature),
            'field' => 'slug',
            'relation' => 'AND',
            );
        $s_loc_array = array(
            'taxonomy' => 'location',
            'terms' => array($s_location),
            'field' => 'slug',
            );
        $housequery['tax_query'] = array(
            'relation' => 'AND',
            'orderby' => 'title',
            'order' => 'ASC',
            $s_feat_array,
            $s_loc_array
        );
        query_posts($housequery);
    } 
```

不幸的是，这不是搜索提交的搜索词或任何其他查询。

## 我的尝试

因此，我认为应该将其“设置”为`$query`而不是运行新命令。我已经看到以下代码确实有效：

```
$query->set('post_type',array('houses')); 
```

但是，我尝试按如下方式修改查询，但我得到了一个致命错误（调用非对象上的成员函数）：

```
$query->set(array('taxonomy','location','terms',
array($s_location),'field',array('slug'))); 
```

我认为这与数组结构不正确有关，尽管我真的很困惑，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:12:48.480

`$housequery['tax_query']`是索引 tax_query 处的数组中的一项。然后你把它变成一个数组。但是当您调用 query_posts 时，您不会引用`$housequery['tax_query']`.

`query_posts($housequery['tax_query']);`如果可以，请尝试或完全删除 tax_query。

```
$housequery = array(
            'relation' => 'AND',
            'orderby' => 'title',
            'order' => 'ASC',
            $s_feat_array,
            $s_loc_array
        ); 
```

# sql - 存储过程将超链接添加到列

> ID：11914013
> 
> 赞同：-1
> 
> 时间：2012-08-11T10:47:10.100
> 
> 标签：sql, stored-procedures

我已经`SELECT`在存储过程中修改了我的语句，以便它的“票证”列包含指向某些 javascript 操作的超链接，但它给了我错误提示`Invalid Column Name Ticket`

```
Set @SQL = 'Select ''<a href=' + CHAR(39) + 'javascript:editTicketByIDAction(' + CONVERT(VarChar(Max), Ticket) + ')' + CHAR(39) + '>' + CONVERT(VarChar(Max), Ticket) + '</a>'' Ticket,VendorTicket[Vendor Ticket],Comments From dbo.VendorTickets Where NotifyOn <= GetDate() And IsNull(NotifyOn,0)<>0 ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:09:39.230

这是应该的

```
DECLARE @SQL varchar(250)='Select ''<a href="javascript:editTicketByIDAction('' + CONVERT(VarChar(Max), Ticket) + '')">'' + CONVERT(VarChar(Max), Ticket) + ''</a>'', Ticket,[Vendor Ticket],Comments From dbo.VendorTickets Where NotifyOn <= GetDate() And IsNull(NotifyOn,0)<>0  ' 
```

# merge - 合并两列

> ID：11914019
> 
> 赞同：0
> 
> 时间：2012-08-11T10:47:52.237
> 
> 标签：merge, sed, grep, while-loop, paste

输入文件

```
A B C D;X;Y 0
C D E F;Z;X 1 
```

输出文件

```
A B C D;X;Y;0
C D E F;Z;X;1 
```

我想将 input_file 的最后一列与倒数第二列合并，并用“;”分隔最后一列的值 在倒数第二列中（就像在 input_file 的第 4 列中一样）。因此 output_file 少了一列。每行没有不同的模式，因此我可以使用 grep，但我可以使用“while read line”，但不知道如何将 sed 应用于每行中的最后一列条目。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:33:23.917

将最后一个值附加到倒数第二个值上，然后删除最后一个值：

```
awk '{$(NF-1) = $(NF-1) ";" $NF; NF--} 1' 
```

或者，将文件视为分号分隔并拆分最后一列

```
awk 'BEGIN {FS = OFS = ";"} {gsub(/[[:space:]]+/, FS, $NF)} 1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:51:08.930

```
awk '{$NF=";"$NF;print}' input_file>output_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:09:48.677

```
sed -e 's/ \(.\)$/;\1/' input_file > output_file 
```

或者如果您的最后一列可能有多个字符

```
sed -e 's/ \([[:alnum:]]*\)$/;\1/' input_file > output_file 
```

# python - 在 Matplotlib 中修改绘制线的属性

> ID：11914021
> 
> 赞同：2
> 
> 时间：2012-08-11T10:48:00.340
> 
> 标签：python, matplotlib

我使用 Matplotlib stem 命令绘制了两个数组，如下所示：

```
markerline, stemlines, baseline = stem(n,x,linefmt='b')
axis([0,6,0,1.2])
grid()
setp(stemlines, 'linewidth','2.0') 
```

现在我想修改茎线的颜色，所以我尝试了以下语法，但它给了我错误。

```
setp(stemlines, 'linfmt','b-')
setp(stemlines, 'color','b-') 
```

有没有办法我可以修改这些行的颜色或其他属性，而不必在实例化时指定它们（即使用 stem 命令）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:03:51.120

您只能使用颜色键。您正在使用颜色+线型

```
setp(stemlines, 'color', 'b') 
```

请注意，您可以使用 matlab 或 python 样式，尽管我更喜欢 python 样式：

```
>>> setp(stemlines, 'linewidth', 2, 'color', 'r')  # MATLAB style

>>> setp(stemlines, linewidth=2, color='r')       # python style 
```

您还可以从词干列表中一一修改您的行。例如：

```
for line in stemlines:
     line.set_color('r') 
```

# objective-c - IAP 的问题 - response.products 数组中没有产品

> ID：11914022
> 
> 赞同：1
> 
> 时间：2012-08-11T10:48:14.983
> 
> 标签：objective-c, ios, storekit

我对应用内购买有疑问。向服务器发送请求后，没有返回任何产品`SKProductsRequest`。

我这样发送请求：

```
 NSMutableSet *identificators = [[NSMutableSet alloc] init];
    [identificators addObject:kInAppPurchaseOneWeekIdentifier];
    [identificators addObject:kInAppPurchaseOneMonthIdentifier];
    [identificators addObject:kInAppPurchaseSixMonthsIdentifier];

    SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:identificators];
    request.delegate = self;
    [request start];

    [identificators release]; 
```

在 Consts.h 我有那些

```
// In App Purchase
#define kInAppPurchaseOneWeekIdentifier              @"com.astroboxapp.iap.OneWeek"
#define kInAppPurchaseOneMonthIdentifier             @"com.astroboxapp.iap.OneMonth"
#define kInAppPurchaseSixMonthsIdentifier            @"com.astroboxapp.iap.SixMonths" 
```

在我的课堂上我已经实现了

```
-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response {

    if ( [response.products count] > 0 ) {
     // i've do my stuff - show the IAP to the user
    } else {
     // here goes the error handling
    }

} 
```

在我的情况下`[response.products count]`是空数组/字典，所以我抛出一个错误。

编辑：我做了什么？

1.  我创建了一个新的 IAP 并将它们与我的应用程序相关联，我也更改了产品 ID 并在我的 Consts.h 中更改它们

2.  我试图以某种方式将应用程序版本从 1.0 更改为 1.1，这有助于我更改此版本的 IAP。

3.  仍然无法在我的设备上运行，而在模拟器中有我的 IAP 条目但我可以测试 - 因为 StoreKit 不允许测试从 sumulator 购买。

4.  在我的设备上，我正在从商店注销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:25:19.440

如果 [response invalidProductIdentifers] 数组不为空，则表示您的产品无法下载，因此产品数量为空是正常的。请检查您的响应

# php - 检查mongo中是否存在字段中的数组键

> ID：11914024
> 
> 赞同：2
> 
> 时间：2012-08-11T10:48:42.033
> 
> 标签：php, mongodb

```
{
 "_id": ObjectId("502626aad4ebdf600b000000"),
 "created_at": ISODate("2012-08-11T09: 32: 26.0Z"),
 "excerpt": "lotto results for August 11, 2012",
 "results": {
    "1-digit" : {
        "0" : "1",
    },
    "2-digit" : {
        "0" : "1",
        "1" : "2",
    },
    "3-digit" : {
        "0" : "1",
        "1" : "2",
        "2" : "3",
    }
    }
} 
```

我应该如何检查是否`results.1-digit`存在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T10:50:31.570

您可以运行查询`{results.1-digit : {$exists : true }}`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T07:32:47.017

我相信在 shell 中添加引号同样重要

```
{"results.1-digit" : {$exists : true }} 
```

# spring-mvc - 是否可以使用 Spring MVC + PrimeFaces？

> ID：11914032
> 
> 赞同：8
> 
> 时间：2012-08-11T10:50:10.693
> 
> 标签：spring-mvc, primefaces

我想知道这是否可能以及如何将 Spring MVC 与 PrimeFaces 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T02:03:12.723

经过 3 天的研究，我认为开箱即用是不可能的。与 JSF 完全一致的 Spring MVC - Web Flow 是另一回事。Spring Roo 直接让您选择是使用 Spring MVC 还是 JSF。

在使用 Jetty 的最新库版本中，没有一个所谓的集成两者的示例对我有用。在这一点上，我不会完全惊讶于它们中的一些确实可以与其他容器一起使用，因为我在尝试使用 Tomcat 时确实得到了不同的结果。大多数示例都做同样的事情而没有解释太多——它们确实使用了 Spring MVC 调度程序 servlet 并单独声明了 faces servlet，它应该如何工作都是一个谜，尤其是当它不起作用时。

我对这一切都很陌生，但对我来说，理想的事情是让 Spring 调度程序开箱即用地处理 JSF2，JSF2 已经出现了一段时间，但我无法在谷歌上搜索任何试图这样做甚至表达的人相同的情绪；我的想法有什么本质上的错误吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-02T09:13:37.910

您尝试构建的技术堆栈当然是可能的（根据下面的链接）

我正在尝试做类似的事情。我正在尝试构建的技术堆栈是使用 Eclipse Juno 在 Tomcat 7 上构建的 JSF2+Primefaces3.5+springMVC3+hibernate+MySQL。

我从谷歌找到了这个.. [http://www.javacodegeeks.com/2012/04/jsf-2-primefaces-3-spring-3-hibernate-4.html](http://www.javacodegeeks.com/2012/04/jsf-2-primefaces-3-spring-3-hibernate-4.html)

这个链接是我一直试图遵循的。到目前为止，我已经让我的 webapp 在 primefaces+JSF+tomcat 上运行。我已经创建了自己的模型和控制器。但我想通过 Spring MVC 完成它们。这个，我目前正在尝试设置。

我希望它可以帮助您前进。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-31T10:37:57.713

您可以通过使用 MangedBean 而不是 @Controller 和 Springframework 的其他组件（如 @Service @Repository ）来做到这一点。它将以这种方式工作。我希望这能帮到您

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-09T05:36:17.343

[http://www.springfuse.com/](http://www.springfuse.com/)。他们有一个 mvn pom，它将对您的数据库模式进行逆向工程，并为基于您的 JSF2+Primefaces3.5+springMVC3+hibernate+MySQL 技术堆栈的持久性应用程序生成所有样板代码

# asp.net-mvc-4 - 将数据从控制器传递到视图

> ID：11914033
> 
> 赞同：1
> 
> 时间：2012-08-11T10:50:18.327
> 
> 标签：asp.net-mvc-4

假设我有一个用于创建新项目的视图。项目仅包含两个属性 - 名称和组。

所以我想要一个有一个文本框和一个 DropDownList 的视图。我使用 DropDownList 是因为用户不应该在 Group 字段中输入他想要的任何内容 - 已经有一些预定义的组，View 应该允许用户只选择一个组。

我有 ItemModel 类，它有两个属性 - Name (string) 和 GroupId (int)。我的视图是对 ItemModel 的强类型。

我的问题如下：我应该如何传递应该在 DropDownList 中作为选项呈现的有效组列表？我应该为此在 ItemModel 中创建另一个属性，还是使用 ViewBag 传递它或做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:06:03.987

在您的控制器中添加：

```
ViewBag.MyGroups = new SelectList(db.Groups.Where(t => t.TGroupId == "1").ToList(), "MyGroups", "Description", 1); 
```

在您添加的视图中：

```
@Html.DropDownList("MyGroups "); 
```

基本上，创建一个新的选择列表并将其传递给 ViewBag。

# asp.net-mvc - 使用 razor 添加 html5 属性以形成输入

> ID：11914046
> 
> 赞同：1
> 
> 时间：2012-08-11T10:52:15.737
> 
> 标签：asp.net-mvc

```
@Html.TextBox("UserName", null, new { /* ... */ }) 
```

我将如何向 htmlattributes 对象添加`data-foo="bar"`和之类的属性？`required`

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T11:19:18.193

如果您使用的是 MVC3，您可以在 html 属性中使用下划线，它们将转换为破折号

```
@Html.TextBox("UserName", null, new { data_foo = "bar", required = "" }) 
```

html结果

```
<input data-foo="bar" id="UserName" name="UserName" required="" type="text" value=""> 
```

第二种选择。使用字典而不是匿名对象

```
@Html.TextBox("UserName", null, new Dictionary<string, object> { {"data-foo", "bar"}, {"required", ""} }) 
```

# javascript - ajax 请求给出不需要的响应

> ID：11914051
> 
> 赞同：0
> 
> 时间：2012-08-11T10:53:39.677
> 
> 标签：javascript, html, ajax, jsp

我有一个 html 页面`index.htm`，其中有一个链接，该链接通过 ajax 请求获取 div 到另一个 html `zoom.htm`，并将其附加到正文，但是当我在 中进行更改时`zoom.htm`，更改不会反映，它类似于`zoom.htm`保存在某处（缓存）并且它正在从该缓存（我不知道它是否真正缓存）页面中获取 div。即使我从项目中删除了 zoom.htm，它仍然显示其内容。

```
$.get('zoom.htm', function(html) {
 $(html).hide().appendTo('body').fadeIn(500);
}, 'html'); 
```

1.  每次我提出请求时，如何获得 zoom.htm 的新副本。
2.  当我用 zoom.jsp 替换 zoom.htm 时（这是我想要做的，但我正在使用 html 页面进行测试），它无法正常工作（所有 html 都与 zoom.htm 相同）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:20:29.353

测试获取的 zoom.htm 是否为缓存版本的最简单方法是清除浏览器缓存。例如，Firefox 中的“编辑 > 首选项 > 高级：缓存的 Web 内容 => 立即清除”。

然后，假设您的服务器类似于 Apache，您可以使用 Header 指令（即在您的项目目录中创建一个 .htaccess 文件）阻止浏览器缓存您的 zoom.htm 文件，如下所示：

```
<filesMatch "\.(html|htm|js|css)$">
    FileETag None
    <ifModule mod_headers.c>
        Header unset ETag
        Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
    </ifModule>
</filesMatch> 
```

如[askapache](http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html)所示。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:58:53.670

为了防止获得缓存的响应，您只需确保每次 url 都是唯一的，例如附加时间戳：

```
'zoom.htm?' + new Date().getTime() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:12:37.450

如果您得到的响应来自缓存，请尝试检查您的调试器。在 Chrome 开发者工具中，通常它们被标记为“（来自缓存）”。在 Chrome 中，您也可以强制禁用缓存。打开开发者工具，点击右下角的齿轮。然后会显示一个叠加层。单击“禁用缓存”。进一步的请求将不会使用缓存的对象。

此外，如果您使用某种 CMS，您可能还希望禁用服务器端缓存（如果它可以选择这样做）

* * *

另一方面...您正在编辑正确的文件吗？您可能正在编辑文件的副本，而不是您要检索的文件。一直发生在我身上。

# c# - 多个相同类型的对象集

> ID：11914052
> 
> 赞同：8
> 
> 时间：2012-08-11T10:53:47.570
> 
> 标签：c#, entity-framework, ef-code-first

我尝试在 EF5 RC 中创建类似于以下内容的数据上下文：

```
class WordContext : DbContext {
    public DbSet<Word> PossibleWords { get; set; }
    public DbSet<Word> UsedWords { get; set; }
} 
```

当我尝试更新数据库时，我收到一个异常消息：*不支持每种类型的多个对象集。对象集“PossibleWords”和“UsedWords”都可以包含“TestProject.Word”类型的实例。*

经过一番谷歌搜索后，似乎在 EF 中构建这样的数据上下文实际上是不可能的。

我的问题是：**存储这样的数据有什么好的代码优先设计？**

我想一个微不足道的可能是这样的：

```
class WordContext : DbContext {
    public DbSet<Words> Words { get; set; } 
}

class Words {
    public int ID { get; set; }
    public IList<string> PossibleWords { get; set; }
    public IList<string> UsedWords { get; set; }
} 
```

但这只是感觉很**糟糕**。

编辑：当然，另一个简单的方法是使用 2 种不同的 Word 类型，例如

类可能词 { ... } 类 BannedWord { ... }

其实现在写下来也没那么糟，嗯……

编辑2：

以防万一其他人也遇到这种情况，我将展示它最终是如何解决的：

```
class Word {
    [Key]
    public string String { get; set; }
}
class PossibleWord : Word { }
class UsedWord : Word { }

class WordContext : DbContext {
    public DbSet<PossibleWord> PossibleWords { get; set; }
    public DbSet<UsedWord> UsedWords { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T10:59:04.107

大概您正在尝试在原始代码中表示 2 个不同的表。我会考虑两个类，UsedWord 和 PossibleWord，并让它们都实现一个通用接口，比如：IWord？或者更简单，只在 Word 上有一个布尔“IsUsed”字段和一个表/类型。

# python - 在 utf-8 中打开时出现“需要整数”错误，否则在 python 中出现 unicode 错误

> ID：11914053
> 
> 赞同：0
> 
> 时间：2012-08-11T10:54:16.637
> 
> 标签：python, xml, unicode

我收到错误说**整数是必需的**

这是我的代码：

```
from xml.dom.minidom import parseString

file =open('lang.xml','rb',"utf-8")
data=file.read()
file.close()
dom=parseString(data)
xmlTag=dom.getElementsByTagName('child')[0]
print (xmlTag.attributes['name'].value) 
```

如果我尝试在没有 UTF-8 编码的情况下阅读，我会得到：

**UnicodeDecodeError：“charmap”编解码器无法解码位置 57 中的字节 0x81：字符映射到**

我的 lang.xml 文件包含我需要根据属性名称获取的不同语言的翻译。

请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:04:40.277

了解您的文档：

[http://docs.python.org/release/3.0.1/library/functions.html#open](http://docs.python.org/release/3.0.1/library/functions.html#open)

文档清楚地告诉您编码参数是可选的。这是一个关键字参数 - 所以你必须使用

```
fp = open(filename, 'rb', encoding='utf-8') 
```

# android - 当前位置不显示

> ID：11914056
> 
> 赞同：1
> 
> 时间：2012-08-11T10:54:45.310
> 
> 标签：android, google-maps

我使用下面的代码来显示当前位置。

但它没有显示我当前的位置。

我已启用设置-> 位置和设置-> 使用网络提供商并使用 gps 卫星。

但不显示当前位置。

代码是：

```
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.RelativeLayout;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class ShowLocation extends MapActivity {

    private MapController mapController;
    private MapView mapView;
    private LocationManager locationManager;

    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        setContentView(R.layout.main);

        // create a map view
        RelativeLayout linearLayout = (RelativeLayout) findViewById(R.id.mainlayout);

        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);
        mapView.setStreetView(true);
        mapController = mapView.getController();
        mapController.setZoom(14); // Zoom 1 is world view

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
                0, new GeoUpdateHandler());
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    public class GeoUpdateHandler implements LocationListener {

        // Called when the location has changed
        public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lng = (int) (location.getLongitude() * 1E6);
            GeoPoint point = new GeoPoint(lat, lng);
            mapController.animateTo(point); //  mapController.setCenter(point);
        }

        // Called when the provider is enabled by the user
        public void onProviderDisabled(String provider) {}

        // Called when the provider is disabled by the user
        public void onProviderEnabled(String provider) {}

        // This method is called when a provider is unable to fetch a location or if the provider 
        // has recently become available after a period of unavailability
        public void onStatusChanged(String provider, int status, Bundle extras) {}
    }
} 
```

# cakephp - CakePHP - 在 xampp 上工作，不在 wamp 上工作

> ID：11914060
> 
> 赞同：0
> 
> 时间：2012-08-11T10:55:18.317
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有一个可以在 XAMPP（登录）（Windows）上运行的应用程序，当我将它部署在服务器上或使用 WAMPP 的其他本地计算机上时，它不会登录。数据库相同，配置相同。

XAMPP 和 WAMPP 之间有什么区别（mod_rewrite 都在工作）？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:32:46.337

未指定 Notepad++ 中没有 BOM 的 UTF-8，所以这就是问题所在。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:44:45.427

将文件编辑`httpd.conf`为：

```
load mod_rewrite 
```

...我确实在这样做之后重新启动了 Apache 服务。

# php - getJSON: NetworkError: 500 内部服务器错误

> ID：11914062
> 
> 赞同：1
> 
> 时间：2012-08-11T10:55:24.733
> 
> 标签：php, javascript, mysql, json

我编写了一个使用**getJSON**的代码（见下文）。FireBug 返回以下错误消息：

```
"NetworkError: 500 Internal Server Error - http://localhost:10088/test/myquery.php?query=SELECT%20tm%20FROM%20schedule%20WHERE%20val=%27BT009%27;" 
```

我无法弄清楚这个错误的原因。非常感谢任何帮助。

PS 我在 MySQL 查询浏览器中测试了这个 SQL 查询。它返回了 3 行。

**主页.php**

```
<script>
function updateList(){
   var query = "SELECT tm FROM schedule WHERE val='BT009';";

   $.getJSON(
           'myquery.php?query='+query,
           function(data) 
           {
               alert(data);
           }   
   );

}

$(document).ready(function() {
    updateList();
});

</script> 
```

**我的查询.php**

```
<?php
include_once 'include/connect_db.php';

if (isset($_GET['query'])) {
    $query = $_GET['query'];

    $condb = connectDB();
    $result=execute_query($query);
    closeDB($condb);

    $rows = array();

    if ($result && mysql_num_rows($result)) {
        while($row = mysql_fetch_array($result)) {
            $rows[] = $row['tm'];
        }
    }   

    var_dump($rows);

    echo json_encode($rows);

} else {
    echo json_encode("Failed");
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T10:57:01.607

内部[服务器错误（代码 500）](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#5xx_Server_Error)是服务器端错误，与 AJAX 无关。这通常是由错误的服务器端代码引起的。您可能想检查您的语法并尝试通过浏览器查看页面。该页面可能还打印了一些错误详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:19:29.773

我将冒险猜测服务器难以理解您的查询参数。尝试对其进行编码：

```
'myquery.php?query='+encodeURIComponent(query) 
```

就像其他人所说的那样，您所做的事情并不安全。您不应该为要执行的服务传递查询！

编辑：另一种可能性是您没有将三个参数传递给 $.getJSON()。尝试：

```
$.getJSON(
   'myquery.php',
   {query: query},
   function(data) {
      alert(data);
   }   
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T11:25:53.343

尝试使用firebug。在浏览器中执行此代码时运行firebug。它会给出错误的原因以及需要更正的地方。希望它会有所帮助。

# java - SLF4J 桥接所需的配置文件

> ID：11914064
> 
> 赞同：1
> 
> 时间：2012-08-11T10:55:39.807
> 
> 标签：java, log4j, slf4j, apache-commons-logging, java.util.logging

我正在编写一个 Java 应用程序，它将使用 SLF4J 来处理具有 JUL 运行时绑定（Java Utils Logging）的日志记录。因此，我的类路径将拥有`slf4j-api-1.6.4.jar`它`slf4j-jdk14-1.6.4.jar`。

JUL 可以通过配置，`logging.properties`所以我的类路径中也需要它。

为了确保我的所有 3rd 方依赖项都记录到相同的 JUL 配置，我计划将以下所有桥接器也放在我的类路径中：

*   `jcl-over-slf4j-1.6.4.jar`
*   `log4j-over-slf4j-1.6.4.jar`

JCL 是通过配置的`commons-logging.properties`，Log4J 是通过配置的`log4j.properties`。

我的问题：**我是否需要在我的类路径中放置`commons-logging.properties`和`log4j.properties`，或者由于 SLF4J 桥，这是否不必要？**

我 90% 确定我不必这样做，但需要在这里进行健全性检查！我的理论是，这些桥将普通的 JCL/Log4J 类替换为只是盲目地调用 SLF4J API 调用的存根。

反过来，这些 SLF4J API 调用，就像我的代码一样，使用它们在运行时绑定的任何实现。由于我的绑定是 JUL，因此只需要一个`logging.properties`文件。

但我不是伐木专家，我宁愿安全也不愿后悔。那么我是否需要这些额外的配置文件，如果需要，请解释原因，以便我更好地了解 SLF4J 的工作原理！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:44:35.643

不，你不需要在你的类路径中放置`commons-logging.properties`和`log4j.properties`，因为 SLF4J 桥，这没有必要。你对新娘的理解是正确的。

如果您使用 Maven，您可能希望使用[Banned Dependencies](http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html)强制执行规则来避免对 log4j、commons-logging 或 logback 的依赖。

# vb.net - 在循环中使用 IsNumeric 函数提高性能，该函数在 VB.net 中执行 1 比 1 caror 或更多

> ID：11914065
> 
> 赞同：0
> 
> 时间：2012-08-11T10:55:40.537
> 
> 标签：vb.net, vb.net-2010, isnumeric

我有一个用 VB.net 编写的函数，代码如下所示。

```
For rowIndex As Integer = 0 To nRows - 1
        Dim max As Integer = -1
        Dim arrTemp() As String
        arrTemp = Nothing

        For columnIndex As Integer = 0 To nCols - 1
            If IsNumeric(arrTranspose(rowIndex, columnIndex)) Then
                Dim iVal As Integer = arrTranspose(rowIndex, columnIndex)

                If iVal < 0 Then
                    iVal = Math.Abs(iVal)
                End If

                If max < iVal Then
                    max = iVal
                    ReDim Preserve arrTemp(max)
                End If
                arrTemp(iVal) += String.Format("{0},", (columnIndex + 1))
            End If
        Next
        arrRespondentIDs(rowIndex) = arrTemp
    Next 
```

nRow = 210 nCols = 64772

在上面的代码中，第一次循环执行需要 4 到 5 分钟，我进行了研究并观察到，然后由于 IsNumeric 函数需要更多时间，对此不确定。

任何人都可以知道代码的哪一部分导致性能问题。请分享你的想法。

谢谢，穆罕默德萨迪克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:27:48.370

您编写的代码复杂度为 O(n^2)，无法很好地扩展。从外观上看，您对此无能为力。改进内循环内部代码的具体方法：

*   您使用 IsNumeric() 这是一个非常昂贵的函数，因为它处理很多极端情况。就像表示货币金额的值一样，*可能*包括负数的括号或像 $ 或“USD”这样的单位。但您实际上只对可以转换为**Integer**的值感兴趣，接下来您要做的事情是 IsNumeric() 函数不会告诉您这一点。当然，这样的货币金额不会很好地转换。所以使用更准确的转换函数，也更快，比如 Integer.TryParse()。

*   测试`If iVal < 0 Then`毫无意义，Math.Abs​​() 函数已经做到了。直接调用就行了。

*   ReDim Preserve arrTemp(max) 非常昂贵，令人惊讶的是它没有在您的个人资料会话中弹出。您将一遍又一遍地重新分配和复制数组。你真的应该使用 List(Of String) 而不是数组。它特别擅长最大限度地减少这种费用。

*   这个`arrTemp(iVal) += String.Format("{0},", (columnIndex + 1))`声明代价高昂，而且犯下了让你一开始就陷入这种麻烦的同一种罪。将数据存储为字符串是非常不明智的，它是一种非常笨拙的数据格式，永远需要转换回来，消耗 CPU 周期没有任何好处。当人们查看数据时，您只关心字符串，这只发生在代码中的不同位置。如果数据以二进制格式保存，则程序运行效率最高。这里没有歧义，columnIndex 始终是一个整数。结合上一个项目符号，arrTemp 不应该是一个字符串数组，而是一个 List(Of Integer)。

通过在代码的其余部分中去掉 String 作为数据类型，找到改进此代码的其他方法。甚至 Object 也比 String 好。

# javascript - jQuery - 甚至在后面的元素上触发点击

> ID：11914068
> 
> 赞同：5
> 
> 时间：2012-08-11T10:56:04.773
> 
> 标签：javascript, jquery

我的问题是我有这个盒子，也就是容器。在该容器内有用户可以单击的框。

为了在视觉上帮助用户，我制作了带有灰色淡出颜色的覆盖框，告诉他们可以在这里使用这些框。

但我的问题是点击事件在覆盖框后面的框上。

那么有没有办法忽略一个元素`.click()`并使用下一个目标？

![在此处输入图像描述](../Images/743e7b2fc957417cad67d40c1c64eba8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T11:00:41.500

您可以使用 CSS[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)属性：

> CSS 属性`pointer-events`允许作者控制特定图形元素在什么情况下（如果有）可以成为鼠标事件的目标。

```
#element {
  pointer-events: none;
} 
```

或者你可以`trigger`事件`click`：

```
$('#box').click(function(){
   $('#target').trigger('click')
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:41:32.330

避免 CSS `pointer-events`...

首先，确保包含的框都具有类名`box`（或类似名称）。

其次，使用 , 使框处于非活动状态`.addClass('inactive')`（在样式表中使用相应的 CSS 指令来处理背景颜色和边框）。要重新激活框，只需`.removeClass('inactive')`.

第三，将点击框的处理委托给容器，如下所示：

```
$('#container').on('click', '.box', function() {
    //common behaviour (pre)
    if($(this).hasClass("inactive")) {
        //inactive box behaviour
    }
    else {
        //active box behaviour
    }
    //common behaviour (post)
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T00:59:39.933

[您可以使用由Ivan Castellanos](https://stackoverflow.com/users/800817/ivan-castellanos)开发的立即调用函数表达式 (IIFE)，该表达式将检测您的鼠标指针在 (x,y) 的位置，并在您选择的元素上评估为真或假，如果实际上，鼠标在那个元素。

通过利用 Ivan 的代码，我能够生成这个概念证明，它会产生与浏览器相同的结果，`pointer-events: none;`但在浏览器之间的兼容性稍好一些。它使用 jQuery`.offset()`方法。在 jsFiddle 中，有一个包含 3 个元素的页面，两个`<button>`'s 和一个`<div>`以 50% 的不透明度覆盖在按钮顶部。在正常情况下，如果不调整 z-index，您将无法单击这些元素。

[jsFiddle 示例](http://jsfiddle.net/dixalex/mngtozwg/14/)

```
//CSS Hitbox Solution 08-26-2015
//StackOverflow - https://stackoverflow.com/questions/32233084/show-an-element-without-hitbox-does-not-take-mouse-touch-input
//Detect MouseOver https://stackoverflow.com/questions/1273566/how-do-i-check-if-the-mouse-is-over-an-element-in-jquery
//Source: https://stackoverflow.com/questions/3942776/using-jquery-to-find-an-element-at-a-particular-position
//https://css-tricks.com/snippets/jquery/get-x-y-mouse-coordinates/
(function($) {
  $.mlp = {
    x: 0,
    y: 0
  }; // Mouse Last Position
  function documentHandler() {
    var $current = this === document ? $(this) : $(this).contents();
    $current.mousemove(function(e) {
      jQuery.mlp = {
        x: e.pageX,
        y: e.pageY
      };
    });
    $current.find("iframe").load(documentHandler);
  }
  $(documentHandler);
  $.fn.ismouseover = function(overThis) {
    var result = false;
    this.eq(0).each(function() {
      var $current = $(this).is("iframe") ? $(this).contents().find("body") : $(this);
      var offset = $current.offset();
      result = offset.left <= $.mlp.x && offset.left + $current.outerWidth() > $.mlp.x && offset.top <= $.mlp.y && offset.top + $current.outerHeight() > $.mlp.y;
    });
    return result;
  };
})(jQuery);
$('.notification-box').on("click", function() {
  $("button").each(function(i) {
    var iteratedButton = $('button:eq(' + i + ')');
    var buttonID = iteratedButton.attr("id");
    if (iteratedButton.ismouseover()) {
      iteratedButton.toggleClass(buttonID);
    }
  });
});
```

```
.notification-box {
  position: absolute;
  height: 100vw;
  width: 100vw;
  background-color: black;
  opacity: 0.5;
  /*pointer-events: none;*/
  z-index: -10;
  overflow: visible;
}
button {
  position: absolute;
  top: absolute;
  width: 50px;
  z-index: -10;
}
button#no {
  margin-top: 25px;
}
.yes {
  color: red;
  font-weight: bold;
}
.no {
  color: blue;
  font-weight: bold;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<button id='yes'>Yes</button>
<button id='no'>No</button>
<div id='no' class="notification-box" />
```

# string - 为什么我不能将 const(char)* 连接到 D 中的字符串？

> ID：11914070
> 
> 赞同：6
> 
> 时间：2012-08-11T10:56:23.310
> 
> 标签：string, concatenation, d

编码

```
string bar = "Hello ";
const(char) * foo = "world!";
bar ~= foo; 
```

第三行编译失败。为什么？我有什么优雅的选择？

错误输出是`Error: cannot append type const(char)* to type string`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T12:21:37.623

不要使用`const(char)*`?

```
string bar = "Hello ";
string foo = "world!";
bar ~= foo; 
```

D 中的字符串文字是 type `string`，你不应该使用 a `const(char)*`，除非与 C 代码交互。

D 不允许这种连接的原因是因为`const(char)*`它不是一个字符串，在任何意义上。D 中的字符串是`immutable(char)[]`（这是`alias`'d by `string`）。A`const(char)*`只是一个指向常量字符的指针。与 C 和 C++ 不同，没有隐含的空终止符，因此 D 不能也不会假设存在空终止符。

如果出于某种原因您绝对必须使用 a`const(char)*`并且您*知道*它是空终止的，那么您可以`const(char)[]`通过切片来制作 a ，然后您可以将其附加到 a `string`：

```
string bar = "Hello ";
const(char)* foo = "world!";
bar ~= foo[0..strlen(foo)]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T17:49:09.243

`string`是 的别名`immutable(char)[]`，即不可变字符的可变切片。`bar`在您的代码中是这种类型的数组切片。

和 D 中的字符串字面量之间的关系`const(char)*`只是字符串字面量总是以 null 结尾，并且键入为`immutable(char)[]`(ie `string`)，或者`immutable(char)*`为了方便与 C 代码的互操作性；后者可隐式转换为`const(char)*`. 重要的是要注意，这仅适用于*字符串文字*：在一般情况下，数组不一定以 null 结尾，并且它们**不能**隐式转换为等效的指针（尽管`.ptr`任何切片的成员`T[]`都是类型`T*`并指向第一个切片的元素）。

连接运算符与数组以及具有相关运算符重载的用户定义类型一起使用，仅此而已。由于 D 不允许为内置类型重载运算符，因此不可能使它们与指针一起使用。

解决方案是通过使用适用于数组和指针的 slice 运算符对指针指向的字符串进行切片：

```
import core.stdc.string : strlen;

string bar = "Hello ";
const(char)* foo = "world!";
bar ~= foo[0 .. strlen(foo)]; 
```

在上面，表达式`foo[0 .. strlen(foo)]`是类型的`const(char)[]`，它可以与`bar`类型`immutable(char)[]`（即`string`）连接。

# symfony - symfony2 按属性对对象集合进行排序

> ID：11914075
> 
> 赞同：9
> 
> 时间：2012-08-11T10:57:20.863
> 
> 标签：symfony, doctrine-orm, twig

我有这个实体：

```
class Categoria {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue
     */

    protected $id;

    /** @ORM\Column(type="string", length=100) */
    protected $nom;

    /** @ORM\Column(type="string", length=100) */
    protected $slug;

    /** @ORM\Column(type="decimal", precision=3, scale=0) */
    protected $ordre;

    /** @ORM\Column(type="boolean", nullable=true) */
    protected $actiu=FALSE;

    /** @ORM\Column(type="decimal", precision=4, scale=0, nullable=true) */
    protected $enllaç=null;

    /** @ORM\OneToMany(targetEntity="LoPati\MenuBundle\Entity\subCategoria", mappedBy="categoria", cascade={"persist", "remove"} )*/
     protected $subCategoria; 
public function __construct()
{
    $this->subCategoria = new \Doctrine\Common\Collections\ArrayCollection();

}

/**
 * Add subCategoria
 *
 * @param LoPati\MenuBundle\Entity\subCategoria $subCategoria
 */
public function addsubCategoria(\LoPati\MenuBundle\Entity\subCategoria $subCategoria)
{
    $this->subCategoria[] = $subCategoria;
}

/**
 * Get subCategoria
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getSubCategoria()
{
    return $this->subCategoria;
} 
```

和

```
class SubCategoria {

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue
 */

protected $id;

/** @ORM\Column(type="string", length=100) */
protected $nom;

/** @ORM\Column(type="string", length=100) */
protected $slug;

/** @ORM\Column(type="decimal", precision=3, scale=0) */
protected $ordre;

/** @ORM\Column(type="boolean", nullable=true) */
protected $actiu=FALSE; 

/** @ORM\Column(type="boolean", nullable=true) */
protected $llista=FALSE;

/** @ORM\Column(type="decimal", precision=4, scale=0, nullable=true) */
protected $enllaç=null;

/** @ORM\ManyToOne(targetEntity="Categoria", inversedBy="subCategoria") */

protected $categoria; 
```

在类别实体中，我想对子类别对象的集合进行排序`$ordre`。

我该怎么做？是否可以在 Twig 模板或实体的定义中做到这一点？

谢谢

问候

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-11T11:42:31.040

使用此注释：

```
/** 
 * @ORM\OneToMany(targetEntity="LoPati\MenuBundle\Entity\subCategoria", mappedBy="categoria", cascade={"persist", "remove"} )
 * @ORM\OrderBy({"order" = "DESC", "id" = "DESC"})
*/
protected $subCategoria; 
```

...

# javascript - 为什么调用window.open()后还要写alert()？

> ID：11914076
> 
> 赞同：1
> 
> 时间：2012-08-11T10:57:20.907
> 
> 标签：javascript

我`index.jsp`在此链接上有一个可用页面[https://www.dropbox.com/s/0smy7nlcmilkqt4/index.jsp](https://www.dropbox.com/s/0smy7nlcmilkqt4/index.jsp)。

此文件包含一个名为`validateloginForm()`并用于验证输入字段的 JavaScript 方法。

如果填写了这些字段，那么它将重定向到另一个 JSP 页面，但是当我删除该`alert("after");`行下方的`window.open()`行时，它不会重定向到另一个页面。

`alert("after")`请让我知道为什么我在打电话后需要这个`window.open()`。

```
function validateloginForm()
{
    var empId = document.getElementById("empId").value;
    var empPass = document.getElementById("empPass").value;

    if( empId == "" )
    {
        alert("Enter id !");
    }
    else if( empPass == "" )
    {
        alert("Enter password !");
    }
    else
    {                 window.open("validateUser.jsp?"+"empId="+empId+"&empPass="+empPass,"_parent","",""); 
         alert("after");   
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:09:36.080

因为之后的代码`window.open`会立即执行，并且此时没有加载窗口。

使用`.alert`只是一个巧合，如果您在加载窗口之前关闭警报，它仍然无法正常工作。

```
var newwin = window.open("validateUser.jsp?"+"empId="+empId+"&empPass="+empPass,"_parent","",""); 
newwin.onload = function() {
    //do stuff
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:09:23.507

浏览器在返回之前不会等待引用的 URL`window.open()`加载。因此，如果没有`alert()`，您的“validateloginForm”函数将立即返回。

通常浏览器中的东西是**异步**的。特别是没有办法等待`window.open()`完成。当然，您可以将页面中的代码加载到新窗口中调用父（“opener”）页面上的某些函数。

# python - 如何根据数据（输入）类型打印一些东西？

> ID：11914083
> 
> 赞同：0
> 
> 时间：2012-08-11T10:58:01.803
> 
> 标签：python

`input()`当获得不同的数据类型时，我想打印不同的东西。我有以下脚本：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

f = input("Please enter a number: ")

if f == type(int):
    print("That's good")
elif f == type(str):
    print("That isn't a number.")
else:
    print("BrainOverflow") 
```

此脚本始终返回 else 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:07:55.377

由于 input() 调用的结果始终是字符串，因此您尝试尝试没有任何意义。您的代码需要一些专用方法来检查字符串是否表示整数。看

[Python：检查一个字符串是否代表一个 int，而不使用 Try/Except？](https://stackoverflow.com/questions/1265665/python-check-if-a-string-represents-an-int-without-using-try-except)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:07:42.787

不建议在 python 中进行类型检查，因此您可以尝试以下操作：

```
f = input("Please enter a number: ")
try:
    f=int(f)
    print("That's good")
except ValueError:
    print("That isn't a number.") 
```

或者 ：

```
f = input("Please enter a number: ")
if f.isdigit():
    print("That's good")
else:
    print("That isn't a number.") 
```

# jsf - p:commandLink 放置在 p:dialog 中的 p:dataTable 中时未调用

> ID：11914085
> 
> 赞同：0
> 
> 时间：2012-08-11T10:58:41.237
> 
> 标签：jsf, primefaces, datatable, dialog, commandlink

我使用primefaces，我想从数据库中下载不同格式（pdf，jpg，png，）的文件，但我没有意识到这一点我见过很多这样的话题，但他们的方法对我不起作用这是html：

```
<ui:repeat value="#{histCommController.selectedCommande.listFichiers}" var="jjjjj">
                            <tr>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{jjjjj.nom}" />
                                </td>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{jjjjj.taille}" />
                                </td>
                                <td>
                                    <p:commandButton id="downloadLink" value="Download" ajax="false"   
                                                     icon="ui-icon-arrowthichk-s">  
                                        <p:fileDownload value="#{jjjjj.convertFichieru}" /> 
                                    </p:commandButton>
                                </td>
                            </tr>

                        </ui:repeat> 
```

这是java：

```
 public StreamedContent convertFichier(byte[] bytes) {
    InputStream is = new ByteArrayInputStream(bytes);
    System.out.println("size file : "+bytes.length);
    StreamedContent image = new DefaultStreamedContent(is);
    System.out.println("dans le convertisseur : "+image.getContentType());
    return image;
} 
```

总是， image.getContentType() 返回 null 并且 bytes.length 不为 null

你有什么主意吗

谢谢你

* * *

我只知道问题所在，我将下载链接放在对话框中，因为当我在对话框之外进行测试时，它在这里起作用的是它起作用的测试：

```
 <h:form>

            <p:commandLink id="downloadLink" value="Download" ajax="false">  
                <p:fileDownload value="#{histCommController.test}" />  
            </p:commandLink> 
            </h:form> 
```

这是对话框内的测试：

```
<p:dialog header="Car Detail" widgetVar="carDialog" resizable="false" id="carDlg"  
                          showEffect="fade" hideEffect="explode" modal="true">  

                    <table id="gradient-style" >
                        <tr style="border: hidden;">
                            <th>
                                <h:outputLabel value="Model:" />
                            </th>
                            <td>
                                <h:outputLabel style="font-weight: bold;" value="#{histCommController.selectedCommande.id}" />
                            </td>                                       
                        </tr>
                        <tr style="border: hidden;">
                            <th>
                                <h:outputLabel value="Year:" />
                            </th>
                            <td>
                                <h:outputLabel style="font-weight: bold;" value="#{histCommController.selectedCommande.etat}" />
                            </td>                                       
                        </tr>
                        <tr style="border: hidden;">
                            <th>
                                <h:outputLabel value="Manufacturer:" />
                            </th>
                            <td>
                                <h:outputLabel style="font-weight: bold;" value="#{histCommController.selectedCommande.dateEnvoi}" />
                            </td>                                       
                        </tr>
                        <tr style="border: hidden;">
                            <th>

                                <h:outputLabel value="Color:" />
                            </th>
                            <td>
                                <h:outputLabel style="font-weight: bold;" value="#{histCommController.selectedCommande.dateLivraisonRecommande}" />
                            </td>                                       
                        </tr>
                    </table>
                    <table id="gradient-style" >
                        <th>Nom Fichier</th><th>Taille</th><th>Télécharger</th>
                        <ui:repeat value="#{histCommController.selectedCommande.listFichiers}" var="jjjjj">
                            <tr>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{jjjjj.nom}" />
                                </td>
                                <td>
                                    <h:outputLabel style="font-weight: bold;" value="#{jjjjj.taille}" />
                                </td>
                                <td>
                                    <p:commandLink id="downloadLink" value="Download" ajax="false">  
                                        <p:fileDownload value="#{histCommController.test}" />  
                                    </p:commandLink>
                                </td>
                            </tr>

                        </ui:repeat>

                    </table>

                </p:dialog> 
```

后者不起作用

你知道如何在对话框中使用下载链接吗

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:01:25.983

您应该自己设置内容类型。看看[DefaultStreamedContent 的构造函数](http://www.primefaces.org/docs/api/3.2/org/primefaces/model/DefaultStreamedContent.html)。所以而不是

```
StreamedContent image = new DefaultStreamedContent(is); 
```

你应该写

```
StreamedContent image = new DefaultStreamedContent(is, "image/jpeg", "fileName.jpg"); 
```

确保使用[正确的内容类型](http://en.wikipedia.org/wiki/Internet_media_type)和文件名扩展名。

# symfony - Symfony2/Doctrine2：OrderBy 另一个实体的计数（ManytoOne）

> ID：11914088
> 
> 赞同：0
> 
> 时间：2012-08-11T10:59:28.353
> 
> 标签：symfony, doctrine-orm

我有实体 1: `Upload`，它`oneToMany`与`comments`

我有一个上传的自定义存储库，我想找到评论最多的上传。

所以当我这样做的时候

```
/**
 * @param $sortBy String
 * @param $limit Int
 */
public function getWeekTopUploads($sortBy,$limit){

    $qb = $this->getEntityManager()->createQueryBuilder();

    $qb->add('select', 'u')
        ->add('from', 'TrackerMembersBundle:Upload u')
        // ->where('u.created')
        ->orderBy('u.comments', 'DESC')
        ->setMaxResults( $limit );

    $query = $qb->getQuery();

    $result = $query->getResult();

    return $result;

} 
```

我得到错误：

```
[Semantical Error] line 0, col 55 near 'comments DES': Error: Invalid PathExpression. StateFieldPathExpression or SingleValuedAssociationField expected.
500 Internal Server Error - QueryException 
```

似乎不想接受按评论数量排序，我该如何解决这个问题，或者查询生成器的正确重写是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:20:47.727

您必须将“u”作为参数传递给 createQueryBuilder() 函数，并在 UploadRepository 中声明 getWeekTopUploads() 函数：

```
$qb = $this->createQueryBuilder('u');
        ->where('u.created' >= new \DateTime("1 week ago"))
        ->orderBy('u.comments', 'DESC')
        ->setMaxResults($limit)
        ->getQuery()->getResult();

return $qb; 
```

# actionscript-3 - 用于游戏开发的 flashdevelop

> ID：11914089
> 
> 赞同：0
> 
> 时间：2012-08-11T10:59:36.010
> 
> 标签：actionscript-3, flash, apache-flex, flashdevelop, flex4.6

我正在尝试使用 flashdevelop 进行 Flash 游戏编程。我四处搜索，任何好的资源都告诉我 flash IDE 的做事方式。再次搜索，我遇到了 flex、mxml、flex sdk。我现在想打人。（大声笑。我在开玩笑）。

在 flashdevelop 上打开一个新项目时，我看到了“AS3 项目”、“flex 4 项目”（使用 mxml 和 flex 4）之类的东西。mxml有什么意义？和弯曲？AS3 项目将带我去哪里？

任何 stackoverflower 都可以将我引导到一个很好的资源，该资源显示了使用 flashdevelop 工作以创建一个简单的 flash 游戏的工作流程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:55:12.623

开始之前要知道的事情

1.  像 FlashDevelop 这样的工具没有像您在 Flash Professional 中看到的那样的用户界面构建器。时间线也不可用。它更像是一个源编译器。
2.  您在 Flash Professional 中看到的库（在其中添加了在运行时检索的 MovieClip、Sprite）在任何其他替代方案中均不可用。
3.  您可以将基本资源文件存储在一个文件夹中，然后使用 Actionscript 将它们嵌入到您的 swf 中。参考：[http ://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60546-7ff2.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf60546-7ff2.html)
4.  这些资源文件将在您编译时添加到 SWF。
5.  使用 FlashDevelop，您可以嵌入和加载在 Flash Professional 中创建并导出到 SWF 文件的影片剪辑。

您将从以下网站获得帮助

*   [http://flashpunk.net/2011/05/setting-up-flashdevelop/](http://flashpunk.net/2011/05/setting-up-flashdevelop/)
*   [http://active.tutsplus.com/tutorials/beginners-guide-to-flashdevelop-intro-basix/](http://active.tutsplus.com/tutorials/beginners-guide-to-flashdevelop-intro-basix/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T20:07:32.213

Flex 框架利用 MXML 作为声明性标记语言（XML 来描述 UI），是 Adob​​e 用于开发应用程序的 UI 框架。你可能不需要那个；）

也不要将它与 Adob​​e Flex SDK 混淆，后者是纯 AS3 和 MXML 的命令行编译器（FlashDevelop 会为您下载它）。

你想使用一个 AS3 项目，或者更好的是，一个带有 Preloader 的 AS3 项目，如果你想将你的游戏打包成一个在开始时有一个很好的加载动画的游戏，它最终会很方便。

这些模板项目将只配置从头开始启动纯 AS3 应用程序或游戏所需的内容。由于它是纯 AS3，因此您从相当低级的 AS3 API 开始，这需要相当多的学习才能让任何东西在屏幕上移动。

如果你想玩 2D 游戏，我建议你阅读这篇很棒的教程，了解如何使用一个很好的 Flash 游戏库，它会处理大部分细节： [http ://www.photonstorm.com/archives/1200/flash- game-dev-tip-6-setting-up-flashdevelop-and-flixel-for-the-first-time](http://www.photonstorm.com/archives/1200/flash-game-dev-tip-6-setting-up-flashdevelop-and-flixel-for-the-first-time)

# ruby - 拆分、重新排列和连接字符串

> ID：11914092
> 
> 赞同：1
> 
> 时间：2012-08-11T10:59:47.587
> 
> 标签：ruby, regex

如果我有一个字符串，例如`string = "08/01/2012"`

如何在 Ruby 中一行返回“2012-08-01”？

例如，取最后一个“/”之后的一组数字，将它们插入到开头，然后将“/”替换为“-”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:10:07.000

由于您正在处理日期，因此我将浏览`Date`库（您必须`require 'date'`使用某些功能），因为它是最灵活和最稳定的方法：

```
Date.strptime(string, '%m/%d/%Y').strftime('%Y-%m-%d')
#=> "2012-08-01" 
```

如您所见，`strptime`("string parse time") 和`strftime`("string format time") 都采用了准确描述它们正在做什么的格式字符串。

如果你不想通过`Date`，你可以`gsub`这样使用：

```
string.gsub(%r{(\d+)/(\d+)/(\d+)}, '\3-\1-\2')
#=> "2012-08-01" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:24:16.623

迈克尔科尔的答案是正确的

只是另一个答案

```
Date.parse(string).strftime('%Y-%d-%m') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T11:02:52.763

```
m, d, y = string.split("/")
"#{y}-#{m}-#{d}" 
```

或者

```
string.split("/").rotate(-1).join("-") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T11:02:40.683

```
month, day, year = string.split('/').map(&:to_i)
rearranged = sprintf "%04d-%02d-%02d", year, month, day 
```

它做了一些额外的工作（因为它对`to_i`每个元素都做了），但以后可能会派上用场。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-24T07:42:31.537

我觉得更简单：

```
'30/10/2016'.split('/').reverse().join('-') 
```

# spring - Spring，JPA，Hibernate，Atomikos - 奇怪的启动错误

> ID：11914094
> 
> 赞同：3
> 
> 时间：2012-08-11T10:59:59.390
> 
> 标签：spring, hibernate, jpa, atomikos

正如线程标题中所述，我们使用 Spring 框架、带有休眠提供程序的 JPA 和 Atomikos 作为事务提供程序。

大多数情况下，这种设置是有效的，但在启动 Tomcat 时会出现奇怪的警告：

```
WARN : atomikos - Local heuristic termination of coordinator 127.0.1.1.tm0000100030 with state COMMITTING 
```

它重复了几次，但数字不同，比如`tm0000300030`

这个警告的原因是什么？atomikos 是否在应用程序启动期间尝试将某些内容存储在数据库中，并且在提交期间他被停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:00:38.247

它看起来像 Atomikos 中的一个错误，请参阅[此讨论](http://fogbugz.atomikos.com/default.asp?community.6.2615.3)。

在 JTA 事务管理器启动之前，我还收到了大约 4 条关于 Spring + OpenJPA + Derby + Tomcat 的这些消息。我们只在自动化集成测试中使用 Atomikos，所以我从来没有真正关心过。

# c++ - strace 可以阻止程序的正确执行吗？

> ID：11914097
> 
> 赞同：2
> 
> 时间：2012-08-11T11:00:13.730
> 
> 标签：c++, c, strace, futex

我想知道 strace 是否会导致它正在跟踪的程序出现异常。目前，我正在尝试跟踪一个随机分段错误错误（但当我使用 strace 时，程序似乎永远不会以这种方式崩溃），这是在我调用`pthread_cond_wait()`.

当我直接运行我的程序时——它实际上是 c/c++ 的混合体，它有时会按预期工作，但如前所述，有时它会崩溃`pthread_cond_wait()`（顺便说一句，如果有人想帮助我解决这个问题，[请参阅此处](https://stackoverflow.com/questions/11816284/pthread-cond-wait-random-segmentation-fault/)，任何帮助将不胜感激）。

如果我直接运行我的程序并将 strace 附加到这样的进程：

```
strace -ttTD -o strace_today.txt -p PROCESS_ID 
```

输出是单行的，它说它正在等待一个 futex（实际上像这样：）

```
futex(x,FUTEX_WAIT_PRIVATE,x) 
```

如果我像这样从 strace 运行我的程序：

```
strace -ttTD -o strace_today.txt example_program 
```

然后在我的文件输出的某个时刻，准确地说，当我调用 时`pthread_cond_wait()`，它会不断发送类似这样的多行垃圾邮件（并且每次`futex()`调用等待的值都比以前高，这里是 15）

```
12:46:15.636366 semop(11599962, {{0, -1, 0}}, 1) = 0 <0.000031>
12:46:15.636512 futex(0x8053838, FUTEX_WAKE_PRIVATE, 1) = 0 <0.000033>
12:46:15.636637 futex(0x8053864, FUTEX_WAIT_PRIVATE, 15, NULL) = ? ERESTARTSYS (To be restarted) <0.002034>
12:46:15.638832 futex(0x8053864, FUTEX_WAIT_PRIVATE, 15, NULL) = 0 <0.001449>
12:46:15.640436 clone(child_stack=0xb6cd0484, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0xb6cd0bd8, {entry_number:6, base_addr:0xb6cd0b70, limit:1048575, seg_32bit:1, contents:0, read_exec_only:0, limit_in_pages:1, seg_not_present:0, useable:1}, child_tidptr=0xb6cd0bd8) = 25403 <0.000045>
12:46:15.640598 semop(11599962, {{0, -1, 0}}, 1) = 0 <0.000015> 
```

我还尝试将 strace 作为一个孩子而不是该过程的父母来运行（希望它会有所作为）。即使我试图捕捉那个随机分段错误错误，它也从未出现/发生过。

现在我的问题是这是否常见和故意，或者我的 strace-call 是否是虚假的。如果没有，是否有任何系统调用我需要注意，因为它们可能不适用于 strace，或者这种奇怪的行为是否涉及一组系统调用？有没有办法解决？

我正在使用 debian-squeeze，如果这可能相关的话。

## 更新 1

我完全忘了提到我正在运行多个线程（POSIX 线程）和几个孩子。虽然不`pthread_cond_wait()`应该遇到任何比赛，因为它绝对是 a 之后的第一个调用，`pthread_mutex_lock()`它访问`pthread_cond_t`和`pthread_mutex_t`我正在解析为参数。但我不知道里面是否`pthread_cond_wait()`可能有任何竞争条件。如有必要，我将提供程序代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:10:44.597

导致此类问题的最可能原因是 strace 会影响应用程序的时间，这可能会暴露锁定错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T11:11:50.883

几乎所有 C++ 和 C 段错误在某些时候都包含未定义的行为。因此，编译器可以自由地实现一个在运行 strace 时不会触发的崩溃系统。

严肃地说，程序中的某个地方是否存在时序问题而不会在 strace 下发生？这些时间问题对于多线程来说尤其小气（例如，死锁仅在释放模式下发生）。

# mysql - 从 SINGLE TABLE 中选择两个用户之间的所有共同项目

> ID：11914100
> 
> 赞同：1
> 
> 时间：2012-08-11T11:00:39.020
> 
> 标签：mysql, sql, select

我有桌子

xyz（存储用户和项目之间的关系）

```
| user_id |  item_id |
---------------------- 
```

一个项目可以属于一个或多个用户，反之亦然。

那么，给定**user_id = A**和**user_id = B**我如何进行 mysql 查询来选择***同时属于用户 A 和用户 B 的所有项目***？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:03:02.850

试试这个：

```
SELECT Item_ID
FROM xyz
WHERE  User_ID IN ('A','B')
GROUP BY Item_ID
HAVING COUNT(distinct user_id) = 2 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/63ad5/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:04:42.673

```
SELECT a.item_id
FROM xyz AS a
  JOIN xyz AS b
    ON b.item_id = a.item_id
WHERE a.user_id = 'A'
  AND b.user_id = 'B' ; 
```

如果 的 组合`(user_id, item_id)`不是唯一的，请制作`SELECT DISTINCT`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T11:06:51.857

另外一个选项：

```
select item_id from xyx
where item_id IN(select item_id from xyz where user_id ='A')
and item_id IN(select item_id from xyz where user_id ='B') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T11:09:10.760

这就足够了：[http ://sqlfiddle.com/#!2/63ad5/6](http://sqlfiddle.com/#!2/63ad5/6)

```
select item_id
from xyz
group by item_id
having sum(user_id in ('A','B')) = 2 
```

ANSI SQL'y 方式：

```
select item_id
from xyz
group by item_id
having sum(case when user_id in ('A','B') then 1 end) = 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T12:23:15.213

**一种方法可以是**

SELECT temp1.item_id FROM (SELECT DISTINCT item_id FROM pcadminlogging WHERE userid='A') AS temp1 JOIN (SELECT DISTINCT item_id FROM pcadminlogging WHERE userid='B') AS temp2 ON temp1.item_id=temp2.​​item_id WHERE temp1.userid in ( 'A','B')

# codeigniter - Codeigniter 不加载视图

> ID：11914103
> 
> 赞同：0
> 
> 时间：2012-08-11T11:00:51.470
> 
> 标签：codeigniter

我是 Codeigniter 的新手，但由于某种原因我无法让它工作。我想做的很简单。我在文件夹中有一个`post.php`文件`controller`。内容`post.php`如下：

```
 class Posts extends CI_Controller{
        function index(){
            $this->load->view('hello.php');
        }
    } 
```

然后我的`hello.php`文件在`views`文件夹内。它只是一个静态 HTML 页面。只是想先让它工作。

文件夹结构如下：`htdocs/codeignitor`

我希望在访问时获得 hello.php 的内容：

```
http://localhost:8888/codeigniter/index.php/posts 
```

当我访问上面的网址时，它说**`Page Not Found`**。但是默认的欢迎页面运行良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T11:03:31.553

```
$this->load->view('hello'); 
```

您的文件应按如下方式放置：

```
htdocs
|
+-- codeignter
    |
    +-- application
        |
        +-- controllers
        |  |
        |  +-- posts.php
        +-- views
           |
           +-- hello.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:56:18.980

用于加载时切勿使用“文件范围”：您建议使用：

```
$this->load->view('hello'); 
```

而已;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T18:23:42.283

不要添加“.php”扩展名。像这样：

$this->load->view('hello');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T17:44:16.350

plz check the file-name it should be `posts.php` if ur class name is `Posts` and if this is correct then check the `config.php` for the `$config['base_url']` and set ur site url properly.

# c++ - 关于回调函数和线程的一般查询

> ID：11914105
> 
> 赞同：16
> 
> 时间：2012-08-11T11:00:55.550
> 
> 标签：c++, multithreading, callback, function-pointers, callstack

我有一个关于线程和回调的一般性问题。例如，我们有一个线程与主程序一起连续运行。

主程序已经向线程注册了一个回调函数。所以线程可以随时调用回调函数。通常，我们通过将函数指针传递给线程来注册回调。我想知道线程何时调用该回调函数，它是该线程的一部分还是主程序的一部分。我想知道这个过程的机制，比如当线程调用回调时，主程序执行是如何停止或中断的。另一件事是调用回调时函数调用堆栈的行为方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-11T11:12:49.977

作为一般规则，函数调用总是在调用者的上下文（线程）中进行。被调用者是函数、成员函数、仿函数对象还是其他任何东西都没有关系。

换句话说，当线程调用你的回调时，调用发生在线程中。主线程不会停止以执行回调。事实上，它与回调的执行没有任何关系。

各种框架提供了一些技巧，使一个线程看起来可以直接调用另一个线程，但这总是通过某种编组的消息传递机制以协作的方式完成。线程通常不会相互旋转堆栈。

# image - 带有图像的jquery移动手风琴

> ID：11914111
> 
> 赞同：0
> 
> 时间：2012-08-11T11:02:04.317
> 
> 标签：image, listview, jquery-mobile, accordion

如果转到**[此页面](http://jquerymobile.com/test/docs/content/content-collapsible-set.html)**，您会发现 jquery mobile 手风琴。这个手风琴的问题是它太简单了。我想通过 addind 图像而不是显示**+**或**-**号使这个accordin 看起来像列表视图。请你指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:07:46.367

您可以通过覆盖 CSS 样式表中的样式来更改图标。

```
 .CollapsibleSetPage .ui-collapsible-set .ui-icon{
        background-image:url(images/icons-18-white.png)//your custom icon
    }
    .CollapsibleSetPage .ui-collapsible-set .ui-icon-plus{
        background-position:-108px
    }
    .CollapsibleSetPage .ui-collapsible-set .ui-icon-minus{
        background-position:-144px;
    } 
```

我在页面中添加了“CollapsibleSetPage”类，以区别于其他页面以覆盖此行为。

可折叠集的自定义图标示例。

[https://dl.dropbox.com/u/49735179/Stackoverflow/CustomCollapsibleIcons/test.html](https://dl.dropbox.com/u/49735179/Stackoverflow/CustomCollapsibleIcons/test.html)

# cakephp - fetch 函数在 cakephp 布局视图中的工作原理

> ID：11914112
> 
> 赞同：7
> 
> 时间：2012-08-11T11:02:20.797
> 
> 标签：cakephp

我是 CakePHP 的新手，想知道这些行在 CakePHP 中是如何工作的

```
echo $this->fetch('meta');
echo $this->fetch('css');
echo $this->fetch('script'); 
```

正在获取的元标记、css 和 javascript 文件从哪里来？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-11T11:35:51.953

`$this->fetch('something');`

根据 cakephp book ，该`fetch`函数正在寻找`blocks`命名`something`和`echo`它们。

在您的示例中，据我了解，它在您的视图中寻找类似的东西：

```
$this->Html->script('carousel', array('inline' => false));
$this->Html->css('carousel', null, array('inline' => false)); 
```

并将其视为一个块。所以`$this->fetch('script')`将得到所有`html->script(....)`并打印它们。

阅读更多：[http ://book.cakephp.org/2.0/en/views.html](http://book.cakephp.org/2.0/en/views.html)

# sql - 在sql中使用聚合函数更新语句

> ID：11914115
> 
> 赞同：0
> 
> 时间：2012-08-11T11:02:58.997
> 
> 标签：sql, sql-server

在一次采访中，他们要求我编写查询“更新具有最大百分比的行”......该列由`studentName,maths,science,percentage`......

请帮助我使用聚合函数编写更新查询...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:04:39.807

```
update  YourTable
set     col1 = 42
where   percentage = 
        (
        select  max(percentage)
        from    YourTable
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:19:39.557

[SQL 小提琴演示](http://sqlfiddle.com/#!3/07170/9)

```
create table dummy (user_id int,name varchar(50),percentage int)
insert into dummy values(1,'Amit',99);
insert into dummy values(2,'Michle',80);
insert into dummy values(3,'Naval',60);
insert into dummy values(4,'Jack',56);

update dummy set percentage='100'
where percentage=(select max(percentage) from dummy) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:15:32.827

```
;WITH x AS 
(
  SELECT 
     studentName, maths, science, 
     r = RANK() OVER (ORDER BY percentage DESC)
  FROM dbo.table_name
)
UPDATE x 
  SET studentName = studentName + ' - Gold star'
  WHERE r = 1; 
```

# ios - Cocos2d 2.0：顶点和精灵

> ID：11914117
> 
> 赞同：1
> 
> 时间：2012-08-11T11:03:15.003
> 
> 标签：ios, cocos2d-iphone, sprite, shader, alpha

我正在从[这个很酷的 raywenderlich 教程](http://www.raywenderlich.com/10862/how-to-create-cool-effects-with-custom-shaders-in-opengl-es-2-0-and-cocos2d-2-x)中学习 OpenGL ES 2.0 着色器，我想知道为什么说 Sprite 有 4 个顶点。**是否有超过 4 个顶点的情况？**

我知道这听起来很傻，但我希望它必须有**尽可能多的顶点才能形成**精灵可见部分的边界。换句话说，我认为 alpha 通道是一种分隔精灵的方法。

然后我检查了我的游戏中的子弹碰撞方法（我使用了一个模板开始它），它们使用了精灵边界框。方框意味着四个顶点:)，所以我不应该感到惊讶。但是，我仍然期待 Cocos2D 有一种方法来检测不可见像素。

任何人都可以帮我澄清一下吗？是否有更多方法可以进行仅检测可见像素的子弹碰撞检测？[我找到了一些[答案](https://stackoverflow.com/questions/4364061/get-the-alpha-value-at-the-touched-point-on-a-sprite-in-cocos2d)，但没有被接受，而且似乎需要很多步骤，我认为可能有一个内置的 Cococs2d 方法]。

或者这是我在 OpenGL ES 2.0 中学习了着色器之后必须弄清楚的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:28:28.857

精灵是显示在屏幕上的纹理，具有缩放、旋转、位置、颜色等属性。

纹理是矩形，因为它们是内存中的图像。要绘制一个矩形，您需要 4 个顶点。从历史上看，GPU 仅适用于二次方、二次方纹理，因为这是在硬件中实现的最简单的方法。后来的纹理可以是任何矩形，在更现代的 iOS 设备（我认为是 iPhone 3GS）上，您还可以使用 NPOT 纹理（非 2 的幂）。但总的来说，纹理是并且将永远是矩形的。

为了使纹理部分透明，它有一个 Alpha 通道。这就像 3 个 RGB 通道之一，只是它控制像素的透明度。在某些纹理格式中，Alpha 通道仅存储打开或关闭（1 位 Alpha）。

因此，当 GPU 将纹理渲染到屏幕上时，所有关联 alpha 值为 0 的像素都不会被绘制，从而允许背景像素显示出来。

跟踪图像的可见部分以获取碰撞多边形需要运行相对复杂的算法。例如 PhysicsEditor 采用这种机制从图像中生成物理碰撞信息（[参见 0:15 的视频](http://www.codeandweb.com/physicseditor/features)）。

GPU 不使用该技术，因为：

*   初始追踪成本高昂
*   生成的多边形会很复杂（100+ 个顶点）
*   根据图像的不同，多边形的复杂性会有很大差异，这使得优化渲染变得困难

从本质上讲，遍历整个纹理而不渲染 0 alpha 像素而不是专注于仅查找、存储和渲染可见像素要容易和快捷得多。

# javascript - 从本地 html/javascript 访问 google api（没有网络服务器）

> ID：11914119
> 
> 赞同：7
> 
> 时间：2012-08-11T11:03:24.003
> 
> 标签：javascript, google-api

是否可以从本地 html 文件（使用 javascript）访问 google api（日历 v3）？我想在我的浏览器中打开 c:\temp\gsotto\gsotto.htm 而不是通过 IIS 提供文件。

如果我从

```
http://localhost/ 
```

通过网络服务器。在 google api 控制台中，我有一个“Web 应用程序的客户端 ID”：

```
Redirect URIs:  http://localhost
JavaScript origins:     http://localhost 
```

和浏览器应用程序的“简单 api 访问”密钥（带有引用者）

```
Firebug shows me this when accessing through http://localhost/gsotto/gsotto.htm
GET http://localhost/gsotto/gsotto.htm
GET https://apis.google.com/js/client.js?onload=handleClientLoad
GET https://apis.google.com/_/apps-static/_/js/gapi/client....cb=gapi.loaded_0
GET https://ssl.gstatic.com/accounts/o/...-postmessagerelay.js
GET https://accounts.google.com/o/oauth2/auth?client_id=.....&authuser=0
GET https://ssl.gstatic.com/accounts/o/....-postmessage.js

and this when access through c:\...
GET https://apis.google.com/js/client.js?onload=handleClientLoad
GET https://apis.google.com/_/apps-static/_/js/gapi/client.....cb=gapi.loaded_0
GET https://ssl.gstatic.com/accounts/o/.....-postmessagerelay.js
and nothing more....

do i need to use other settings in the google api console for this to work?

<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
  </head>
  <body>
    <!--Add a button for the user to click to initiate auth sequence -->
    <button id="authorize-button" style="visibility: hidden">Authorize</button>
    <script type="text/javascript">
        // google calendar id
      var calId = "....";

      var clientId = "..."; // oAuth2 webapp
      var apiKey = "....";// Key for browser apps (with referers) 

      // google authentication scopes
      var scopes = 'https://www.googleapis.com/auth/calendar';
              //https://www.googleapis.com/auth/calendar.readonly

      // Use a button to handle authentication the first time.
      function handleClientLoad() {
          console.log('handleClientLoad');
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth,1);
      }

      function checkAuth() {
          console.log('checkAuth');
          try {

        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
          }
          catch(e)
          {
              console.log('e');
              console.log(e);
          }
      }

      function handleAuthResult(authResult) {

          console.log('handleAuthResult');
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult && !authResult.error) {
            console.log('result ok');
          authorizeButton.style.visibility = 'hidden';
          makeApiCall();
        } else {
          console.log('authresult null or error');
          console.log(authResult);
          authorizeButton.style.visibility = '';
          authorizeButton.onclick = handleAuthClick;
        }
      }

      function handleAuthClick(event) {
        console.log('handleAuthClick');
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        return false;
      }

function makeApiCall() {
        console.log('makeApiCall');
  gapi.client.load('calendar', 'v3', function() {
    var request = gapi.client.calendar.events.list({
      'calendarId': calId
    });

    request.execute(function(resp) {
        console.log('result:');
        console.log(resp);

      for (var i = 0; i < resp.items.length; i++) {
        var li = document.createElement('li');
        li.appendChild(document.createTextNode(resp.items[i].summary));
        document.getElementById('events').appendChild(li);
      }
    });
  });
}
    </script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <div id="content">
    <ul id="events"></ul>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T22:18:26.150

`file://`根据您的浏览器，您会发现由于跨站点（或跨协议）的原因从协议运行时无法使用 AJAX 。您看到的 GET 不是 XHR/AJAX 而是`<script>`标签，因此对于大多数现代浏览器来说答案是否定的。请参阅[此处的讨论](https://stackoverflow.com/questions/3397644/jquery-running-ajax-locally-without-a-webserver)。如果您使用`--allow-file-access-from-files`和`--disable-web-security`([链接](http://joshuamcginnis.com/2011/02/28/how-to-disable-same-origin-policy-in-chrome/)) 运行 Chrome，您可能会使其正常工作。

# java - 在 Eclipse 中调试 Android 时如何查看异常详细信息？

> ID：11914121
> 
> 赞同：3
> 
> 时间：2012-08-11T11:03:34.147
> 
> 标签：java, android, eclipse, debugging

我刚刚开始学习如何为 Android 开发应用程序。目前，我使用[Eclipse 4.2](http://en.wikipedia.org/wiki/Eclipse_%28software%29) (Juno) 作为[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)。问题是我看不到正常的方法来查看我自己的代码中发生的异常。例如：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    List<BasicObject> objects = _objectRepository.GetAllObjects();
    Iterator<BasicObject> iterator = objects.iterator();

    while(iterator.hasNext())
    {
        ObjectListItemView itemView= new ObjectListItemView(this,iterator.next());
    }
} 
```

在`onCreate`运行时，_objectRepository 为 null，因此抛出 NullReference。之后 Eclipse 显示“找不到源”，这确实不是我所期望的。然后我按`F8`（继续）多次；进程退出并且调试器停止。只有在那之后，我才能在 LogCat 中看到一些堆栈跟踪（从那里很难导航到我自己的代码）。

如您所见，所有这些捕获异常的过程非常耗时。有没有其他方法可以查看异常，我做错了什么？

我没有使用 Android 模拟器，我使用的是真实设备 ( [HTC Desire S](http://en.wikipedia.org/wiki/HTC_Desire_S) )。我已经有 LogCat，但我想要更方便/实用的东西。

为了说明，在 Visual Studio 中，我可以在调试时看到异常。Visual Studio 在发生异常的行上设置了一个中断，我可以在异常窗口中查看我想要的任何信息（堆栈跟踪局部变量，实际上是所有东西）（请参阅*[{not much used} Debug->Exceptions... 窗口技术](http://www.codehappiness.com/post/Debug-Exceptions-window.aspx)*） .

在 Eclipse 中，我在 LogCat 中获得了异常详细信息（使用起来非常不舒服），并且只有在调试器停止之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:11:16.943

您可以像这样为 Android 启用 LogCat：

在 Eclipse 中，转到*Window* -> *Show View* -> *Other* -> *Android* -> *Logcat*。

Logcat 只不过是您的模拟器或设备的控制台。

[如何在 Eclipse for Android 中启用 logcat/Console？](https://stackoverflow.com/questions/3280051/how-to-enable-logcat-console-in-eclipse-for-android)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T11:13:50.900

操作系统必须做一些事情才能向 logcat 发送消息；这些是由（未捕获的）异常触发的。如果您尝试在调试器中单步执行它们，这会很乏味，并且您会经常收到“找不到源”（这是系统代码，而不是您的）。

令人恼火，但可以肯定的是，异常之后发生的任何事情都不会发生在您的应用程序内部，因此您最好还是在那一点停下来。如果您需要快速查看异常的 logcat 报告，只需在没有调试器的情况下运行应用程序即可。

# php - 如何获取三个表中的类别计数？

> ID：11914124
> 
> 赞同：0
> 
> 时间：2012-08-11T11:03:51.497
> 
> 标签：php, mysql, sql

```
category  table 

-----------------------
catid  | catname
-------------------------

Deal table
------------------------
dealid |  name | catid |
-----------------------

Cement Table
-----------------------
cid |  cname  | catid
-----------------------

ordertable
---------------------
oid | oname | catid
--------------------- 
```

以上三个表使用我想获取catid的总数并使用desc子句的顺序。如何编写sql查询？

```
the result like this way

catid  catcount catname
-----------------------
1       20        xxx
2       19        YYY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:06:52.740

您可以使用 a`union`创建包含所有类型类别的子查询：

```
select  c.name
,       count(*) as TotalCount
from    (
        select  catid
        from    deal
        union all
        select  catid
        from    comment
        union all
        select  catid
        from    ordertable
        ) as lst
join    category c
on      c.catid = lst.catid
group by
        c.name
order by
        count(*) desc 
```

# validation - 将验证与 scalaz 7 相结合

> ID：11914126
> 
> 赞同：7
> 
> 时间：2012-08-11T11:04:11.670
> 
> 标签：validation, scala, scalaz, scalaz7

给定以下功能：

```
def foo( a: A ): ValidationNEL[String,Seq[B]] = ...

def bar( b: B ): ValidationNEL[String,C] = ... 
```

我想将它们组合起来，例如构建一个函数，该函数调用`foo`然后最终调用`bar`中的每个元素`Seq`，例如得到一个`ValidationNEL[String,Seq[C]]`：

```
def fooAndBar( a: A ): ValidationNEL[String,Seq[C]] 
```

Scalaz 7 中的文档非常短，我找不到任何相关示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T12:30:02.503

对 B 序列进行一次硬核遍历。请注意，我在这里使用了 List ，因为 Scalaz 7 似乎没有 typeclass 实例`Seq`，但是如果真的需要，编写自己的实例应该不会太难。

```
import scalaz.{ValidationNEL, Traverse, NonEmptyList}
import scalaz.std.list.listInstance
case class A(a: Int)
case class B(b: Int)
case class C(c: Int)

def foo( a: A ): ValidationNEL[String,List[B]] = Validation.success(List(B(1), B(2)))
def bar( b: B ): ValidationNEL[String,C] = Validation.failure(NonEmptyList("error in " + b.b))//Validation.success(C(b.b * 2))

type ValNEL[A] = ValidationNEL[String, A]

def foobar(a: A): ValidationNEL[String, List[C]] =
  foo(a) flatMap { bs =>
    Traverse[List].traverse[ValNEL, B, C](bs)(bar)
  }

val r: scalaz.ValidationNEL[String, List[C]] = foobar(A(3)) 
```

**更新：**另请参阅宝贵的[Haskellwiki Typeclassopedia](http://www.haskell.org/haskellwiki/Typeclassopedia#Traversable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:42:24.040

看看这个 gist 使用 kleisli 来做到这一点[https://gist.github.com/3240574](https://gist.github.com/3240574)和验证[https://gist.github.com/3230464](https://gist.github.com/3230464)

# html - 测试时事通讯视图的最佳在线工具？

> ID：11914134
> 
> 赞同：1
> 
> 时间：2012-08-11T11:05:08.063
> 
> 标签：html, email, html-email, email-validation

有谁知道一个在线工具来查看时事通讯的 html 的样子？我的意思是一个工具，我将我的 HTML 代码放入其中，他给了我电子邮件客户端的屏幕截图或类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:32:55.353

我知道有一种工具可以让您测试电子邮件客户端如何解释您编写的 HTML，称为[Litmus](http://litmus.com/)。这是一个您必须付费的工具，但有 7 天的试用期。 [Mailchimp](http://mailchimp.com/)也提供类似类型的服务。

除了使用工具测试您的电子邮件通讯之外，还有很多关于标记电子邮件通讯时可以做什么和不能做什么的文章。[本文](http://www.kratedesign.com/blog/2010/04/28/avoiding-pitfalls-and-building-better-html-email/)有几个很好的建议，可以有效地标记兼容的电子邮件通讯。除此之外，[Mailchimp](http://mailchimp.com/resources/guides/html/email-marketing-field-guide/)还提供了创建优质电子邮件通讯的现场指南。本指南涵盖了从设计到标记的各个方面。

# iphone - 呈现模式视图控制器 - 与呈现视图控制器交互

> ID：11914135
> 
> 赞同：1
> 
> 时间：2012-08-11T11:05:13.833
> 
> 标签：iphone, objective-c, cocoa-touch, uiviewcontroller, modalviewcontroller

当呈现一个模态视图控制器时，一旦呈现的视图控制器被解除，一个人如何与父视图控制器交互。

据我了解`viewWillAppear`，在关闭模式视图控制器时不会在父视图控制器上调用。那么如何根据模态视图控制器上的输入来更新 UI？

模态视图控制器可以在其父视图控制器上调用方法吗？即`[self.parentViewController doWhatIWant];`？

或者，当模态视图控制器被解除时，是否有一种方法可以在父视图控制器上调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:21:02.580

您可以在模态显示之前为模态控制器提供一个父实例，让它回调您：

```
@class ParentViewController;

@interface ControllerToBeShownModally : UIViewController

@property (nonatomic, readwrite) ParentViewController* parentViewController;

// More items

@end 
```

显示`ControllerToBeShownModally`：

```
ControllerToBeShownModally *ctrl = [[ControllerToBeShownModally alloc] init...];
ctrl.parentViewController = self; // Store the back reference here
[self presentModalViewController:ctrl animated:YES]; 
```

打回去：

```
[self.parentViewController doWhatIWant]; 
```

# iphone - UIColor 到无符号整数

> ID：11914137
> 
> 赞同：3
> 
> 时间：2012-08-11T11:05:23.320
> 
> 标签：iphone, ios

[我在这里](https://gist.github.com/1292152)`UIImage`找到了一个用于替换颜色的类别

问题是方法签名接收一个无符号整数颜色代码：

```
- (UIImage *)imageByRemovingColorsWithMinColor:(uint)minColor maxColor:(uint)maxColor 
```

如何从 a 中获取正确的无符号整数值`UIColor`？

我实际上想用紫色代替黑色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T11:12:50.617

如果您查看了源代码，您会发现他们使用这个无符号整数值作为十六进制颜色代码，其中

```
colorcode = ((unsigned)(red * 255) << 16) + ((unsigned)(green * 255) << 8) + ((unsigned)(blue * 255) << 0) 
```

因此，您可以使用以下方法从 UIColor 对象中获取这样的十六进制值：

```
@implementation UIColor (Hex)

- (NSUInteger)colorCode
{
    float red, green, blue;
    if ([self getRed:&red green:&green blue:&blue alpha:NULL])
    {
        NSUInteger redInt = (NSUInteger)(red * 255 + 0.5);
        NSUInteger greenInt = (NSUInteger)(green * 255 + 0.5);
        NSUInteger blueInt = (NSUInteger)(blue * 255 + 0.5);

        return (redInt << 16) | (greenInt << 8) | blueInt;
    }

    return 0;
}

@end 
```

然后像这样使用它：

```
NSUInteger hexPurple = [[UIColor purpleColor] colorCode]; 
```

# matlab - MATLAB 中的三角分布随机变量（PDF 和 CDF）

> ID：11914142
> 
> 赞同：0
> 
> 时间：2012-08-11T11:06:29.030
> 
> 标签：matlab, plot, probability-density, cdf, probability-distribution

我在绘制三角形分布的 CDF 时遇到了一些错误；[我可以使用在 MATLAB 中生成三角形分布](http://stackoverflow.com/questions/9241904/generating-a-triangular-distribution-in-matlab)来绘制直方图，但是如何绘制 CDF？

```
n = 10000; %Random number 
a = 0.26; %Min 
b = 0.46; %Max
c = 0.35; %Mode 
u = rand(n, 1); 
x = zeros(n, 1);
for i = 1:n   
    U = u(i);   
    if U < (c-a)/(b-a);    
        X = a + sqrt(U*(b-a)*(c-a)); 
    else       
        X = b - sqrt((1-U)*(b-a)*(b-c));  
    end    
    x(i) = X; 
end 
hist(x,100)

if a <= x && a <=c
  cdf = (x-a)^2/12
elseif c <= x && x <= b
  cdf = 1-(b-x)^2/4
end

if 0 <= p && p <= 0.75
  INV = a+2*sqrt(3*p);
elseif 0.75 <= p && p <= 1
  INV = b-2*sqrt(1-p)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T06:33:39.947

我可能会错过一些东西，但是为什么以下不做呢？y=hist(x,100); cdf=cumsum(y); 情节（cdf）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-12T00:11:54.733

使用统计工具箱中的[概率分布对象](https://www.mathworks.com/help/stats/working-with-probability-distributions.html)[`makedist()`](https://www.mathworks.com/help/stats/makedist.html)使用、[`pdf()`](https://www.mathworks.com/help/stats/prob.normaldistribution.pdf.html)和[`cdf()`](https://www.mathworks.com/help/stats/prob.normaldistribution.cdf.html)函数，这一点变得非常容易。

**方法 1：使用概率分布对象**（需要 Statistics Toolbox）
概率[密度函数 (PDF)](https://en.wikipedia.org/wiki/Probability_density_function)可从`pdf(pd,X)`. [累积分布函数 (CDF)](https://en.wikipedia.org/wiki/Cumulative_distribution_function)通过获得`cdf(pd,X)`。

```
% MATLAB R2019a
% Setup
a = 0;   % lowerbound
m = 5;   % mode 
b = 12;  % upperbound
pd = makedist('Triangular',a,m,b)     % Create probability distribution object

X = a:0.1:b;                          % domain of X   (useful for plotting)

figure
s(1) = subplot(1,2,1)
    plot(X,pdf(pd,X))
s(2) = subplot(1,2,2)
    plot(X,cdf(pd,X))
sgtitle('X ~ Triangular(a,m,b)')

ylabel(s(1),'PDF')
ylabel(s(2),'CDF') 
```

[![三角分布 PDF 和 CDF](../Images/f234a56bae2cb07492b52a9341a7f2ae.png)](https://i.stack.imgur.com/cn1ay.jpg)

* * *

**方法 2：解析公式**
您还可以使用已知的解析公式（封闭形式）来绘制[三角形分布](https://en.wikipedia.org/wiki/Triangular_distribution)，并以此方式直接绘制[PDF](https://en.wikipedia.org/wiki/Probability_density_function)和[CDF](https://en.wikipedia.org/wiki/Cumulative_distribution_function)。

# cuda - 使用具有更多流式多处理器的 GPU 卡

> ID：11914145
> 
> 赞同：1
> 
> 时间：2012-08-11T11:06:37.270
> 
> 标签：cuda, gpu

目前我正在使用带有 2 个 SM 的 GeForce GPU 卡。我正在该 GPU 卡上运行一些实验，并观察到与类似的 CPU 实现相比，该代码的执行速度快了 5 倍。我很好奇，如果我在更强大的 GPU 卡（例如 Tesla GPU）中运行完全相同的代码，与使用 GeForce 卡获得的时间相比，我是否会获得更好的执行时间。如果是，为什么会这样？如果没有，我应该如何修改我的代码（在高级别），因为我希望更强大的 GPU 卡可以给我更多的加速。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:37:16.177

每个 SM 一次最多可以运行 8 个左右的块（通常更少，对于需要更多资源的块，例如共享内存），因此具有大量 SM 的 GPU 可以运行相应数量更多的块。

为了让您的代码在未来适用于更大的 GPU，请在内核调用中指定基于（并且大于）系统中 SM 数量的块数。这可以通过查看`deviceProp::multiProcessorCount`或调用`cuDeviceGetAttribute`来查询`CU_DEVICE_ATTRIBUTE_MULTIPROCESSOR_COUNT`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T22:48:01.377

如果满足以下所有条件，则应该期望具有更多 SM 的 GPU 具有更好的性能：

*   新的 GPU 与您现有的 GPU 具有相同或更新的架构，
*   新的 GPU 具有相同或更好的时钟速度，
*   新的 GPU 具有相同或更好的内存吞吐量，并且
*   （到目前为止，最重要的是），代码使用了足够多的线程块来保持超过 2 个 SM 的忙碌。

请注意，当前的硬件趋势是增加内核数量，因此最大化线程数量通常非常重要。例如，相对于 Fermi 架构，Kepler 架构的核心数量增加了三倍。

# python - 如何在 SendKey 和 PywinAuto 模块中使用 Python 发送 TAB 按钮

> ID：11914152
> 
> 赞同：5
> 
> 时间：2012-08-11T11:07:42.927
> 
> 标签：python, pywinauto

这是我的代码，它将打开窗口并将密钥发送到窗口，但某些屏幕无法正常工作

```
from pywinauto.application import *
import time
app=Application.Start("Application.exe")
app.window_(title="Application")
time.sleep(1)
app.top_window_().TypeKeys("{TAB 2}") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T08:47:14.127

1.  确保您使用的是完全需要的窗口。 `top_window_()`可能会返回另一个窗口。

要检查，请运行：

```
app.top_window_().DrawOutline() #Highlight the window 
```

2.窗口可以不活动，输入前设置焦点：

```
window = app.top_window_()
window.SetFocus()
window.TypeKeys("{TAB 2}") 
```

3.更多，您可能需要点击窗口。

```
window.Click()
window.TypeKeys("{TAB 2}") 
```

# mysql - 脚本到 Amazon EBS 上的 mysql db 快照

> ID：11914156
> 
> 赞同：0
> 
> 时间：2012-08-11T11:08:04.020
> 
> 标签：mysql, backup, yum, amazon-ebs, amazon-ami

我确实搜索了相关问题，但仍然无法在论坛中找到任何答案。我正在编写一个简单的脚本来自动在亚马逊 ebs 上创建 mysql db 快照。我的实例托管在 amazon linux 映像上。我在网上找到的脚本要么是为 debian 编写的，要么是从我的计算机上运行的，而不是从需要键值对的服务器上运行的。我很确定从服务器创建快照不需要 .pem 文件。

# c# - 在 C# 中加密和解密对象

> ID：11914157
> 
> 赞同：1
> 
> 时间：2012-08-11T11:08:04.393
> 
> 标签：c#, wcf, encryption

我使用 WCF Web 服务以数据对象的形式通过 Internet 将数据从服务器发送到客户端。我创建了一个可序列化的类，并使用该类发送我的数据。

下面是我的课的一个例子：

```
[Serializable]
public class DBOList
{
    public string A{ get; set; }
    public string B { get; set; }
} 
```

我是否可以加密此对象中的数据，并将其作为流发送到客户端？

如果不是，实现这一目标的最佳方法是什么？

加密代码：

```
 DBOList NewLst = new DBOList();
        NewLst.A = "Value 1";
        NewLst.B = "Value 2";

        byte[] key = { 1, 2, 3, 4, 5, 6, 7, 8 };
        byte[] iv = { 1, 2, 3, 4, 5, 6, 7, 8 };

        DESCryptoServiceProvider des = new DESCryptoServiceProvider();

        // Encryption
        using (var fs = new MemoryStream())
        {
            var cryptoStream = new CryptoStream(fs, des.CreateEncryptor(key, iv), CryptoStreamMode.Write);
            BinaryFormatter formatter = new BinaryFormatter();

            // This is where you serialize the class
            formatter.Serialize(cryptoStream, NewLst);
            cryptoStream.FlushFinalBlock();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:27:39.487

最好改用 SSL，这将增加您需要的所有安全性，同时避免大多数陷阱。

除此之外，您当然可以使用`CryptoStream`. 您只能加密字节，但您已经通过提及`Serializable`.

请注意，如果您想创建自己的安全流，您将需要：

*   两个安全生成的密钥，以及加密和一个 MAC 密钥
*   安全密码，例如`AesManaged`
*   使用（默认值）CBC 和 PKCS7Padding 设置
*   检索随机生成的 IV 并将其添加到密文中
*   创建一个`HMACSHA256`结果

合理安全。如果这没有响起任何铃声，*请使用最新的 TLS 实施*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-26T09:54:45.730

## AES加密和解密C#中的类对象

这是在 C# 中对类对象进行 AES 加密和解密的最佳方式。这里我解释一下 AES Key 和 AES IV 的使用。并提供一个**示例，使用 AES 加密和解密 C# 中的类对象将 byte[] 写入和读取文件流**。

1.  创建新班级

```
 public class Profile
    {
        [JsonPropertyName("name")]
        [JsonProperty(PropertyName = "name")]
        internal string Name { get; set; }

        [JsonPropertyName("password")]
        [JsonProperty(PropertyName = "password")]
        internal string Password { get; set; }

        [JsonPropertyName("profileData")]
        [JsonProperty(PropertyName = "profileData")]
        public byte[] ProfileData { get; set; }
    } 
```

2.  **AES KEY**使用对称算法的密钥。这是秘钥，是你保密的东西。任何知道您的密钥（或可以猜到它）的人都可以解密您用它加密的任何数据（或伪造您用它计算的任何验证码等）。

3.  **AES IV**用作对称算法的初始化向量 (IV)。初始化向量，在其最广泛的意义上，只是用于开始一些迭代过程的初始值。因此，您可以在代码本身中进行维护。

```
 private readonly static byte[] Key = Convert.FromBase64String("AsISxq9OwdZag1163OJqwovXfSWG98m+sPjVwJecfe4=");

        private readonly static byte[] IV = Convert.FromBase64String("Aq0UThtJhjbuyWXtmZs1rw=="); 
```

4.  使用 AES 加密和解密 C# 中的类对象将字节 [] 写入和读取文件流的示例。

```
class Program
    {
        private readonly static byte[] Key = Convert.FromBase64String("AsISxq9OwdZag1163OJqwovXfSWG98m+sPjVwJecfe4=");

        private readonly static byte[] IV = Convert.FromBase64String("Aq0UThtJhjbuyWXtmZs1rw==");

        public static Profile Profile { get; set; }

        static void Main(string[] args)
        {
            Profile = new Profile();
            string fileName = "D:\\Profile.txt";
            Profile.Name = "Ramesh";
            Profile.Password = "Password";
            Console.WriteLine("Enter your option:");
            Console.WriteLine("1\. Encryption");
            Console.WriteLine("2\. Decryption");
            string option = Console.ReadLine();

            if (option == "1")
            {
                FileStream fsWrite = new FileStream(fileName, FileMode.Create, FileAccess.Write);
                string serializeProfile = Newtonsoft.Json.JsonConvert.SerializeObject(Profile);
                Profile.ProfileData = EncryptStringToBytes(serializeProfile);
                fsWrite.Write(Profile.ProfileData, 0, Profile.ProfileData.Length);
                fsWrite.Close();
            }
            else
            {
                FileStream fsRead = new FileStream(fileName, FileMode.Open, FileAccess.Read);
                BinaryReader br = new BinaryReader(fsRead);
                long numBytes = new FileInfo(fileName).Length;
                string decryptedText = DecryptStringFromBytes(br.ReadBytes((int)numBytes));
                Profile DeserializeProfile = Newtonsoft.Json.JsonConvert.DeserializeObject<Profile>(decryptedText);
                Console.WriteLine("Name :" + DeserializeProfile.Name);
                Console.WriteLine("Password :" + DeserializeProfile.Password);
                Console.ReadKey();
                fsRead.Close();
            }
        }

        private static byte[] EncryptStringToBytes(string profileText)
        {
            byte[] encryptedAuditTrail;

            using (Aes newAes = Aes.Create())
            {
                newAes.Key = Key;
                newAes.IV = IV;

                ICryptoTransform encryptor = newAes.CreateEncryptor(Key, IV);

                using (MemoryStream msEncrypt = new MemoryStream())
                {
                    using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                    {
                        using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                        {
                            swEncrypt.Write(profileText);
                        }
                        encryptedAuditTrail = msEncrypt.ToArray();
                    }
                }
            }

            return encryptedAuditTrail;
        }

        private static string DecryptStringFromBytes(byte[] profileText)
        {
            string decryptText;

            using (Aes newAes = Aes.Create())
            {
                newAes.Key = Key;
                newAes.IV = IV;

                ICryptoTransform decryptor = newAes.CreateDecryptor(Key, IV);

                using (MemoryStream msDecrypt = new MemoryStream(profileText))
                {
                    using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
                    {
                        using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                        {
                            decryptText = srDecrypt.ReadToEnd();
                        }
                    }
                }
            }

            return decryptText;
        }
    } 
```

5.  控制台输出快照

[控制台输出快照](https://i.stack.imgur.com/cb7fc.png)

6.  GitHub链接：[https ://strramesh.github.io/EncryptionAndDecryption/](https://strramesh.github.io/EncryptionAndDecryption/)

# string - php不区分大小写的俄语字符比较

> ID：11914158
> 
> 赞同：2
> 
> 时间：2012-08-11T11:08:16.873
> 
> 标签：string, comparison, case

如何不区分大小写地比较俄语字符。我试过了：

```
if(strcasecmp($content->title, 'О нас') == 0){
        $about=$content->title;
    } 
```

并且

```
if(strtolower($content->title) == strtolower('О Нас')){
        $about=$content->title;
    } 
```

他们都没有工作。如果我将两个字符串都放在同一个“大小写”中，则返回 true，否则返回 false。$content->title 从 Mysql 数据库返回 'О Нас' 并且第二个字符串也是 'О Нас' 但是如果我创建第二个 str 'О нас' 并使用上述比较之一，它会返回 false，为什么？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-12T16:37:52.350

我不知道为什么，但使用[mb_strtolower](http://php.net/manual/en/function.mb-strtolower.php)函数找到了一种可行的解决方案：

```
mb_strtolower($content->title) == mb_strtolower('О Нас') 
```

## 我对为什么第一个选项不起作用的猜测：

来自[strtolower](http://php.net/manual/en/function.strtolower.php)文档：

> 请注意，“字母”由当前语言环境决定。这意味着，例如在默认的“C”语言环境中，诸如变音符号-A (Ä) 之类的字符将不会被转换。

来自[mb_strtolower](http://php.net/manual/en/function.mb-strtolower.php)文档：

> 与 strtolower() 相比，“字母”由 Unicode 字符属性确定。因此，此函数的行为不受语言环境设置的影响，它可以转换任何具有“字母”属性的字符，例如 A-umlaut (Ä)。

还要确保两个可比较的字符串都使用相同的编码（字符串文字使用源文件编码），或者您可以使用`mb_strtolower`函数的第二个参数来设置每个字符串的编码。

# php - 错误 500：DateTime::__construct()：无法解析时间字符串

> ID：11914161
> 
> 赞同：0
> 
> 时间：2012-08-11T11:09:11.680
> 
> 标签：php, date, joomla

在 Joomla 组件 com_search 中，我修改了以下行：

```
<?php if ($this->params->get('show_date')) echo JText::sprintf('Published %s', $result->created).'. '; ?> 
```

至：

```
<?php if ($this->params->get('show_date')) echo '<span>'.JText::_('PUBLISHED').':     '.'</span>'.JText::sprintf('%s', JHtml::_('date',$result->created, JText::_('d. m. Y, H:i'))); ?> 
```

搜索时出现错误 500：

```
DateTime::__construct(): Failed to parse time string (19\. 06\. 2012) at position 0 (1): Unexpected character 
```

哪里有问题？

来自 com_search (default_results.php) 的完整代码以便更好地理解：

```
<div class="items">

<?php foreach ($this->results as $result) : ?>
<article class="item">

    <header>

        <?php if ( $result->href ) : ?>
        <h1 class="title"><a href="<?php echo JRoute::_($result->href); ?>" <?php if ($result->browsernav == 1 ) echo 'target="_blank"'; ?>><?php  echo $this->escape($result->title); ?></a></h1>
        <?php else : ?>
        <h1 class="title"><?php echo $this->escape($result->title); ?></h1>
        <?php endif; ?>

        <?php if ($result->section || $this->params->get('show_date')) : ?>
        <p class="meta">

            <?php if ($this->params->get('show_date')) echo '<span>'.JText::_('PUBLISHED').': '.'</span>'.JText::sprintf('%s', JHtml::_('date',$result->created, JText::_('d. m. Y, H:i'))); ?>
            <?php if ($result->section) echo JText::_('TPL_WARP_POSTED_IN').' '.$this->escape($result->section); ?>
        </p>
        <?php endif; ?>

    </header>

    <div class="content clearfix"><?php echo $result->text; ?></div>

</article>
<?php endforeach; ?>

</div>
<?php echo $this->pagination->getPagesLinks(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:30:29.790

> DateTime::__construct()：无法在位置 0 (1) 解析时间字符串 (19\. 06\. 2012)：意外字符

`19\. 06\. 2012`不是 PHP 的`DateTime`类接受的日期格式，请参阅 PHP 手册页“[日期格式](http://php.net/manual/en/datetime.formats.date.php)”了解可以理解的格式列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-25T16:32:15.253

在 Joomla 中，当尝试安装任何类型的扩展时也会发生此错误，但 PHP 代码无法写入 temp 和 logs 目录。

如果进入系统、系统信息和目录权限，都应该是可写的。可以在 configuration.php 或使用 Global Configuration 菜单和 System and Server 选项卡更改 temp 和 logs 目录的路径。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T18:24:34.613

我刚刚将您的新行复制并粘贴到 Joomla 2.5.6 的本地托管副本中，它工作得非常好 - 完全没有错误！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-29T16:31:24.463

在谷歌上花了四个小时解决这个问题后，结果发现我的原因是不可写`/logs`和`/tmp`文件夹。

要进行验证，请执行以下步骤：

1.  加载以下 URL（替换您自己的域和主机名）：
    `http://www.example.com/administrator/index.php?option=com_admin&view=sysinfo`
2.  导航到“所有者权利”
3.  检查是否`logs`可`tmp`写
4.  *如果没有，您应该在您的configuration.php*文件中更改这些文件的路径。

这是来自[Joomla 论坛主题](http://forum.joomla.org/viewtopic.php?t=421827QUOTE)的相关引用，它帮助我得出了这个结论：

> 您好，我最近遇到了同样的问题，但找到了窍门！
> 
> 日志目录 ($log_path) ./logs/ 不可写
> 临时目录 ($tmp_path) ./tmp/ 不可写
> 
> 正确的目录路径必须是：
> 日志目录 ($log_path) ../logs/
> 日志目录 ($log_path) ../tmp/

# excel - 分离数据并放置在单独的工作表中 Excel VBA

> ID：11914163
> 
> 赞同：3
> 
> 时间：2012-08-11T11:09:29.653
> 
> 标签：excel, worksheet-function, vba

我有一个大型数据集，其中包含以下形式的 80K 条目：

```
 Name                        Date           Value
        1T17_4H19_3T19_3T21_2_a_2   09-Aug-11   -9.3159
        1T17_4H19_3T19_3T21_2_a_2   10-Aug-11   -6.9662
        1T17_4H19_3T19_3T21_2_a_2   11-Aug-11   -3.4886
        1T17_4H19_3T19_3T21_2_a_2   12-Aug-11   -1.2357
        1T17_4H19_3T19_3T21_2_a_2   15-Aug-11   0.1172
        5 25_4Q27_4T30_4H34_3_3_3   19-Jun-12   -2.0805
        5 25_4Q27_4T30_4H34_3_3_3   20-Jun-12   -1.9802
        5 25_4Q27_4T30_4H34_3_3_3   21-Jun-12   -2.8344
        5 25_4Q27_4T30_4Q32_a_a_a   25-Sep-07   -0.5779
        5 25_4Q27_4T30_4Q32_a_a_a   26-Sep-07   -0.8214
        5 25_4Q27_4T30_4Q32_a_a_a   27-Sep-07   -1.4061 
```

这些数据都包含在一个工作表中。我希望 excel 根据名称分隔数据，然后将每个时间序列放在同一工作簿中的单独工作表中。VBA可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T05:11:40.243

如果要录制宏以查看发生了什么，请按照下列步骤操作：

1.  打开宏记录器
2.  按名称对数据进行排序
3.  从名字复制数据
4.  将其粘贴到另一张纸上（如果需要，请添加一张纸）
5.  为工作表命名
6.  重复下一个名字

我还编写了一些代码，你可以用来开始。为此，您需要将数据选项卡命名为“MasterList”。代码按名称对 MasterList 上的行进行排序，然后为列表中的每个唯一名称创建一个新工作表并将适当的数据复制到新工作表，重复该过程直到所有名称都复制到新工作表。

将此代码添加到模块并运行该`DispatchTimeSeriesToSheets`过程。

```
Sub DispatchTimeSeriesToSheets()
    Dim ws As Worksheet
    Set ws = Sheets("MasterList")
    Dim LastRow As Long

    LastRow = Range("A" & ws.Rows.Count).End(xlUp).Row

    ' stop processing if we don't have any data
    If LastRow < 2 Then Exit Sub

    Application.ScreenUpdating = False
    SortMasterList LastRow, ws
    CopyDataToSheets LastRow, ws
    ws.Select
    Application.ScreenUpdating = True
End Sub

Sub SortMasterList(LastRow As Long, ws As Worksheet)
    ws.Range("A2:C" & LastRow).Sort Key1:=ws.Range("A1"), Key2:=ws.Range("B1")
End Sub

Sub CopyDataToSheets(LastRow As Long, src As Worksheet)
    Dim rng As Range
    Dim cell As Range
    Dim Series As String
    Dim SeriesStart As Long
    Dim SeriesLast As Long

    Set rng = Range("A2:A" & LastRow)
    SeriesStart = 2
    Series = Range("A" & SeriesStart).Value
    For Each cell In rng
        If cell.Value <> Series Then
            SeriesLast = cell.Row - 1
            CopySeriesToNewSheet src, SeriesStart, SeriesLast, Series
            Series = cell.Value
            SeriesStart = cell.Row
        End If
    Next
    ' copy the last series
    SeriesLast = LastRow
    CopySeriesToNewSheet src, SeriesStart, SeriesLast, Series

End Sub

Sub CopySeriesToNewSheet(src As Worksheet, Start As Long, Last As Long, _
                                                        name As String)
    Dim tgt As Worksheet

    If (SheetExists(name)) Then
        MsgBox "Sheet " & name & " already exists. " _
        & "Please delete or move existing sheets before" _
        & " copying data from the Master List.", vbCritical, _
        "Time Series Parser"
        End
    End If

    Worksheets.Add(After:=Worksheets(Worksheets.Count)).name = name
    Set tgt = Sheets(name)

    ' copy header row from src to tgt
    tgt.Range("A1:C1").Value = src.Range("A1:C1").Value

    ' copy data from src to tgt
    tgt.Range("A2:C" & Last - Start + 2).Value = _
        src.Range("A" & Start & ":C" & Last).Value
End Sub

Function SheetExists(name As String) As Boolean
    Dim ws As Worksheet

    SheetExists = True
    On Error Resume Next
    Set ws = Sheets(name)
    If ws Is Nothing Then
       SheetExists = False
    End If
End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T08:22:31.863

我尝试了这段代码，它对我有用。

这将拆分数据（基于唯一名称）并将其粘贴到一个单独的工作表中，该工作表的名称将与 A 列中的名称相同。

```
Sub SplitData()
    Dim DataMarkers(), Names As Range, name As Range, n As Long, i As Long

    Set Names = Range("A2:A" & Range("A1").End(xlDown).Row)
    n = 0

    DeleteWorksheets

    For Each name In Names
        If name.Offset(1, 0) <> name Then
            ReDim Preserve DataMarkers(n)
            DataMarkers(n) = name.Row
            Worksheets.Add(After:=Worksheets(Worksheets.Count)).name = name
            n = n + 1
        End If
    Next name

    For i = 0 To UBound(DataMarkers)
        If i = 0 Then
            Worksheets(1).Range("A2:C" & DataMarkers(i)).Copy Destination:=Worksheets(i + 2).Range("A1")
        Else
            Worksheets(1).Range("A" & (DataMarkers(i - 1) + 1) & ":C" & DataMarkers(i)).Copy Destination:=Worksheets(i + 2).Range("A1")
        End If
    Next i
End Sub

Sub DeleteWorksheets()
    Dim ws As Worksheet, activeShtIndex As Long, i As Long

    activeShtIndex = ActiveSheet.Index

    Application.DisplayAlerts = False
    For i = ThisWorkbook.Worksheets.Count To 1 Step -1
        If i <> activeShtIndex Then
            Worksheets(i).Delete
        End If
    Next i
    Application.DisplayAlerts = True
End Sub 
```

我在这段代码中所做的是：

1.  删除除具有初始数据表的工作表之外的所有工作表
2.  向下处理“名称”列并创建一个“标记”数组，指示每个数据拆分的位置
3.  创建一个新工作表并根据数组中的值将数据复制到其中

# asp.net - 如何使用母版页在活动菜单项上设置 css 类？

> ID：11914164
> 
> 赞同：0
> 
> 时间：2012-08-11T11:09:29.840
> 
> 标签：asp.net, css, c#-4.0, master-pages

当我单击 asp.net 母版页中的子子菜单项或主项时，如何设置活动菜单项颜色。

我的代码是（母版页源）

```
<ul class="art-menu">
      <li><a href="#" class="{ActiveItem}"><span class="l"></span><span class="r"></span><span
                            class="t">Submission</span> </a>
                            <ul>
                                <li><a href="../QuoteStatus.aspx">Search Submission</a></li>
                                <li><a href="../NewQuote.aspx">New Submission</a></li>
                            </ul>
                        </li>
                        <li><a href="#"><span class="l"></span><span class="r"></span><span class="t">Requests</span></a>
                            <ul>
                                <li><a href="../Requests/IssueCertificates.aspx">Issue Certificates</a></li>
                                <li><a href="../Requests/QuoteCancellation.aspx">Cancellation</a></li>
                                <li><a href="../Requests/LossRuns.aspx">Loss Runs</a></li>
                                <li><a href="../Requests/Endorsements.aspx">Endorsements</a></li>
                            </ul>
                        </li>
                        <li><a href="#"><span class="l"></span><span class="r"></span><span class="t">Reports</span></a>
                        </li>
                        <li><a href="#"><span class="l"></span><span class="r"></span><span class="t">Configuration</span></a>
                            <ul>
                                <li><a href="../Administration/UserInformation.aspx">User Information</a></li>
                                <li><a href="../SignUp.aspx">New User</a></li>
                                <li><a href="../Administration/AdminSettings.aspx">Admin Settings</a></li>
                            </ul>
                        </li>
</ul> 
```

如何编写代码，请给我建议...

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:00:18.213

这就是我所做的。可能有更好的方法。你可以试试。

注意：您的链接应该有`runat="server"`，以便您可以从代码隐藏中访问它们

```
protected void Page_Load(object sender, EventArgs e)
{            
    string curlink = Request.RawUrl;

    if (curlink.Contains("/administration/school")) 
    {
        schoolinfolink.Attributes["class"] = "selected";
    }
    else if (curlink.Contains("/administration/result"))
    {
        resultlink.Attributes["class"] = "selected";
    }
    else if (curlink.Contains("/administration/staff"))
    {
       staffslink.Attributes["class"] = "selected";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:49:08.197

我不熟悉 ASP ，但在 php 中，我将通过添加一个检查哪个页面是当前页面的函数来处理它。我会在 HTML 之上调用它，然后你就可以使用它了。

算法：

1.获取当前网址

2.从中获取当前文件名

3.将当前文件名保存为变量（“selectedPage”）

4.打印菜单时，使用条件将“selectedPage”与项目的文件名进行比较。

考虑使用数组和循环打印菜单（因此，您只需编写一个 X 条件）

# css - 盒子的（复杂的）水平居中

> ID：11914167
> 
> 赞同：2
> 
> 时间：2012-08-11T11:09:39.307
> 
> 标签：css, html, centering

我需要水平（我不在乎垂直）居中三个框（div 或 span，我不在乎），这样中间的总是居中，并且它的宽度是文本（单个单词）所需的最小宽度包含，以下列方式：

用简短的文字（一个单词）：

```
--------------------------------------------------------------
|                                                            |
| ----------------------  ----------  ---------------------- |
| |                    |  |xxxxxxxx|  |                    | |
| |                    |  |        |  |                    | |
| ----------------------  ----------  ---------------------- |
|                                                            |
-------------------------------------------------------------- 
```

带有长文本（又是一个单词）：

```
--------------------------------------------------------------
|                                                            |
| -----------  ------------------------------  ------------- |
| |         |  |xxxxxxxxxxxxxxxxxxxxxxxxxxxx|  |           | |
| |         |  |                            |  |           | |
| -----------  ------------------------------  ------------- |
|                                                            |
-------------------------------------------------------------- 
```

这可能吗？

我最后的诱惑远未成功（因为盒子重叠，我不想要这个）：

```
<div style="position:relative;";>
<span style="display:block;width:100px;margin:0 auto;text-align:center;border:1px solid red"><h1>mid_text</h1>
<span style="text-align:right;position:absolute;top:0em;left:0;display:block;width:50%;float:left;border:1px solid red">left text</span>
<span style="text-align:left;position:absolute;top:0em;left:50%;display:block;float:right;width:50%;border:1px solid red">right text</span>
</span>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T11:35:06.857

## CSS

将此添加到您的 CSS 文件中：

```
body
{
    padding:20px;
}
.wrapper
{
    display:table;
    width:100%;
}
.wrapper .left,
.wrapper .center,
.wrapper .right
{
    padding:0 20px;
    display:table-cell;
}
.wrapper .left,
.wrapper .right
{
    width:50%;
    background-color:#2b88f1;
}
.wrapper .center
{
    text-align:center;
    background-color:#fff;
} 
```

## HTML

这就是您的 HTML 代码的样子：

```
<div class="wrapper">
   <div class="left">
       left
    </div>
    <div class="center"> 
        center
    </div>
    <div class="right">
        right
    </div>
</div>

<hr>

<div class="wrapper">
   <div class="left">
       left
    </div>
    <div class="center"> 
        ceeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeenter
    </div>
    <div class="right">
        right
    </div>
</div> 
```

​ 示例：http: [//jsfiddle.net/YVhLt/](http://jsfiddle.net/YVhLt/)

# asp.net - 无法将 SQL 参数值设置为字符串数组

> ID：11914170
> 
> 赞同：0
> 
> 时间：2012-08-11T11:09:52.100
> 
> 标签：asp.net, vb.net, sql-server-2008

我想传递一个字符串数组作为 SQL 参数，但是当我执行命令时，它会抛出一个异常，上面写着“对象必须实现 IConvertible”。这是代码（所有三列都是nvarchar）：

```
Public Sub sendsms(messageBodies As String(), ByVal recipientNumbers As String(), Optional ByVal chkMsgIds As string() = Nothing) 
    Dim con As New SqlConnection
    con.ConnectionString = connection.Sms
    Dim cmd As New SqlCommand("insert into sentmessage (text,id,number) values (@text,@id,@number)", con)
    cmd.Parameters.Add("@text", Data.SqlDbType.NVarChar, n).Value = messageBodies 
    cmd.Parameters.Add("@id", Data.SqlDbType.NVarChar, n).Value = chkMsgIds
    cmd.Parameters.Add("@number", Data.SqlDbType.NVarChar, n).Value = recipientNumbers
    con.Open()
    cmd.ExecuteNonQuery()
    con.Close()
    cmd.Dispose()
End Sub 
```

我创建了这个例程来将大量记录插入数据库，正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:29:39.583

通常，您只需执行多个插入命令，每行一个，例如：

```
Public Sub sendsms(messageBodies As String(), ByVal recipientNumbers As String(), Optional ByVal chkMsgIds As string() = Nothing) 
    Using con As New SqlConnection()
        con.ConnectionString = connection.Sms
        con.Open()
        For Each body As String In messageBodies
            Using cmd As New SqlCommand("insert into sentmessage (text,id,number) values (@text,@id,@number)", con)
                cmd.Parameters.Add("@text", Data.SqlDbType.NVarChar, n).Value = body
                cmd.Parameters.Add("@id", Data.SqlDbType.NVarChar, n).Value = chkMsgIds
                cmd.Parameters.Add("@number", Data.SqlDbType.NVarChar, n).Value = recipientNumbers
                cmd.ExecuteNonQuery()
            End Using
        Next
    End Using
End Sub 
```

但是，在 SQL Server 2008 中，他们添加了对新的多行插入语法的支持，此处对此进行了说明：

[http://blog.sqlauthority.com/2008/07/02/sql-server-2008-insert-multiple-records-using-one-insert-statement-use-of-row-constructor/](http://blog.sqlauthority.com/2008/07/02/sql-server-2008-insert-multiple-records-using-one-insert-statement-use-of-row-constructor/)

例如，您可以执行如下命令：

```
insert into sentmessage (text,id,number) values 
('First',1,1),
('Second',2,2),
('Third',3,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:42:04.950

只需使用：

```
cmd.Parameters.AddWithValue("@text", messageBodies )
cmd.Parameters.AddWithValue("@id",chkMsgIds)
cmd.Parameters.AddWithValue("@number", recipientNumbers) 
```

# java - 将 String 中的 unicode 转换为 char

> ID：11914171
> 
> 赞同：3
> 
> 时间：2012-08-11T11:09:54.253
> 
> 标签：java, string, unicode

这是一个基本问题，但我在 SA 上找不到完全相同的副本：

我有这个字符串：

```
String s = "surname\":\"B\\u00f6rner\"},{\"forename\"" 
```

我想得到的是：

```
String s = "surname\":\"Börner\"},{\"forename\"" 
```

有什么方法可以在 Java 中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:33:09.297

手动删除反斜杠将使 Java 像这样解释 unicode。如果您无法修改从 API 调用收到的字符串，您可以使用：

```
s = s.replaceAll("\\\\u00f6", "\u00f6"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:35:16.440

```
 String s = "surname\":\"B\u00f6rner\"},{\"forename\"" ;
    try {
        String t = URLDecoder.decode(s, "UTF-8") ;
        System.out.println(t) ;
    }
    catch( Throwable t ) {
        t.printStackTrace(System.err) ;
    } 
```

输出：`surname":"Börner"},{"forename"`

正如其他人所说，您必须找到一种方法来删除额外的 \。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:17:02.100

只要您不需要 Unicode 基本平面之外的字符，这应该不是很困难：

```
final Matcher m = Pattern.compile("\\\\u(.{4})").matcher(
    "surname\":\"B\\u00f6rner\"},{\"forename\"");
final StringBuffer b = new StringBuffer();
while (m.find())
  m.appendReplacement(b, String.valueOf(((char)Integer.parseInt(m.group(1), 16))));
m.appendTail(b);
System.out.println(b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T11:35:28.223

如果那是 Java 源代码，那么这两个字符串文字的含义完全相同……前提是（在后一种情况下）您告诉 Java 编译器源文件编码的字符集。或者，[`nativetoascii`](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/native2ascii.html)命令（带有`-reverse`命令）可用于将`\uxxxx`文件中的 unicode 转义符转换为本机字符。

如果这些字符串值实际上是字符串值，而不是字符串文字，那么您将需要进行某种运行时转换。（我确信有一个 3rd 方库方法可以做到这一点......）

# php - 查询自昨天以来的时间戳数据

> ID：11914173
> 
> 赞同：0
> 
> 时间：2012-08-11T11:10:09.857
> 
> 标签：php, date, time

目前我检查我的网站每天有多少新会员；像这样：

```
$daystart = strtotime("00:00:00");
$newusers = mysql_num_rows(mysql_query("SELECT * FROM users WHERE createtime>'$daystart' OR createtime='$daystart'")); 
```

该`createtime`行是`int(11)`，时间存储在 unix 时间戳中。

我的问题是，我怎样才能使上述查询从昨天开始？（前一天有多少新成员）

我试过了，`strotime('-1 day')`但效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:13:37.717

也许你可以使用`DateTime`：

```
$yesterday = new DateTime("yesterday"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:13:51.713

```
strtotime('yesterday'); 
```

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:15:19.840

```
SELECT * from users WHERE DATE(FROM_UNIXTIME(createtime)) = DATE(DATE_ADD(Now(), INTERVAL '-1' DAY)) 
```

未经测试，但可能有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T12:44:28.463

由于您使用的是 Unix 时间戳，因此您可以使用一天的 00:00:00 和 23:59:59 的时间戳，并获取其间添加的所有内容。

```
$starttime = date('U', strtotime('Yesterday 00:00:00'));
$endtime = date('U', strtotime('Yesterday 23:59:59'));
$query = "SELECT * FROM users WHERE createtime >= $starttime AND createtime <= $endtime;"; 
```

您也可以使用 SQL BETWEEN 语句，但有时它不会检索所有数据。

# sql-server - SQL Server 中跨三个表的 GROUP BY

> ID：11914174
> 
> 赞同：1
> 
> 时间：2012-08-11T11:10:16.360
> 
> 标签：sql-server, group-by

我发现我不知道如何在 SQL Server 中对查询结果进行分组。我有三个表的 SQL Server 2005：

**域：**

```
- id
- name 
```

**实体：**

```
- domain_id
- user_id 
```

**用户：**

```
- id
- login 
```

因此，跨第三个表的两个表之间存在常见关系，其中多个域可能与一个用户相关。

T-SQL 查询：

```
SELECT domain.name, users.login 
FROM domain, entity, users 
WHERE domain.id = entity.domain_id AND entity.user_id = users.id 
GROUP BY users.login, domain.name 
```

返回：

```
+------+-------+
| name | login |
+------+-------+
| dom1 | user1 |
| dom4 | user1 |
| dom5 | user1 |
| dom2 | user2 |
| dom3 | user3 |
+------+-------+ 
```

我的问题是如何创建返回与 MySQL 相同的 T-SQL 查询：

```
SELECT domain.name, user.login 
FROM domain, entity, user 
WHERE domain.id = entity.domain_id AND entity.user_id = user.id 
GROUP BY user.login

+------+-------+
| name | login |
+------+-------+
| dom5 | user1 |
| dom2 | user2 |
| dom3 | user3 |
+------+-------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:34:16.793

创建返回与 MySQL 相同的 MS SQL（和大多数标准实现）

```
SELECT MAX(domain.name), user.login  
FROM domain, entity, user  
WHERE domain.id = entity.domain_id AND entity.user_id = user.id  
GROUP BY user.login 
```

在这两种环境中，FROM / WHERE 连接最好表示为

```
FROM domain
    INNER JOIN entity
         ON domain.id = entity.domain_id 
    INNER JOIN user  
         ON entity.user_id = user.id 
```

# module - 为什么在 Joomla 文章的介绍中没有加载 Newsflash 模块的 {loadposition myposition}？

> ID：11914179
> 
> 赞同：0
> 
> 时间：2012-08-11T11:10:47.653
> 
> 标签：module, joomla, joomla2.5, joomla-article

假设我定义了 position `special_position_to_be_in_an_article's_intro`。

我在那个位置放了两种类型（a`Newsflash`和 a `Latest News`）的s。`module`

我`{loadposition special_position_to_be_in_an_article}`在一篇文章的介绍中输入了这一行。

`Latest News`显示在文章的介绍中，但我应该如何使`Newsflash`可见呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:07:31.980

您可以只创建第二个自定义模块位置，例如 custom_position2，然后在第一个之后立即执行 {loadposition custom_position2}。

# java - GWT 和 Google App Engine：拆分登录和主要应用

> ID：11914180
> 
> 赞同：1
> 
> 时间：2012-08-11T11:10:50.807
> 
> 标签：java, security, google-app-engine, gwt

我最近观看了来自 Google I/O 的有关 GWT 安全性最佳实践的视频，演讲者的强烈建议之一是将您的应用程序实际分离为两个不同的应用程序：

*   **登录应用程序**- 用于显示登录屏幕并验证主应用程序的用户；和
*   **主要应用程序**- 应用程序的其余部分

他的理由是所有客户端代码都可能受到损害，即使使用 GWT 疯狂的混淆方法也是如此。不要让自己受到不必要的攻击，因此通过拥有两个独立的应用程序，攻击者（甚至无权登录和使用系统）将只能拉下*登录应用程序*的客户端代码而不会获得他掌握了*Primary App*的客户端代码。

我喜欢这种方法，但计划将我的应用程序部署到 GAE，这严格禁止您使用多个应用程序 (WAR) 来相互协调（在条款和条件中明确说明！）。

所以看来谷歌开发者自己在这里也有分歧！一方面，GWT 团队出于安全目的希望您的应用程序被拆分，但 GAE 团队不希望 2 个以上的应用程序出于计费目的而相互“联盟”。我的印象是谷歌*希望*开发者拥抱他们的整个平台，同时使用 GWT 和 GAE。

那么这里的交易是什么？！？有没有办法在不产生单独的 WAR（从而安抚 GAE）的情况下分解我的代码库，但是在您登录之前无法看到我的*Primary App*的代码？

我认为“是”，但是 GWT 会强制您一次下载所有内容（以最大程度地减少往返和昂贵的 HTTP 请求）。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T12:29:24.777

我认为这个想法是在 GWT 中有单独的模块来进行登录并运行真正的应用程序。

例如，您可能会看到： [https ://github.com/ashtonthomas/GwtAdvancedLogin](https://github.com/ashtonthomas/GwtAdvancedLogin)

> 这个 Google Web Toolkit (GWT) 应用程序是一个示例，说明如何创建一个单独的登录模块，然后将其汇集到一个或多个包含主应用程序登录的其他模块。
> 
> 您可以使用这种类型的设置来完全控制您的登录页面，而不是将其包含在您的主模块中。

顺便说一句，Gwt 不会强迫您一次下载所有内容。您可以轻松拆分代码。 [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

我认为拥有单独的模块是您想要的，而不是代码拆分。

# sharepoint - 新添加的内容类型未显示在 sharepoint 中

> ID：11914184
> 
> 赞同：0
> 
> 时间：2012-08-11T11:11:33.523
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-list

我创建了一种内容类型，并将其保存在一个组中。现在我创建了一个列表并为该列表启用了 **允许托管内容类型** 。现在我正在尝试将该内容类型添加到我的列表中。当我转到列表设置并单击**从现有内容类型添加时，**它不显示新添加的内容类型。这有什么问题。我错过了任何一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:59:15.213

没有发表？我知道这听起来很简单，但检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T15:00:49.630

评论中提到了答案，但没有明确指出。所以：

**新的内容类型需要从 List 或 Folder 内容类型继承**，以便能够将其添加到 List。例如，您可以从“Item”内容类型继承。

如果它继承自“文档”内容类型，则不会出现。

# ruby-on-rails - c.draw“文本”中的特殊字符与 mini_magick (rails)

> ID：11914185
> 
> 赞同：2
> 
> 时间：2012-08-11T11:11:39.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, imagemagick, minimagick

我很难让 mini_magick 在图像上绘制包含引号、双引号等的文本。我尝试了各种修改`c.draw`无济于事。转义这些字符的最佳方法是什么，以便 c.draw 无错误地显示它们？

错误：`non-conforming drawing primitive definition`m'`

由。。。生产

```
 c.draw "text 8,8 'I'm'" 
```

包含其他特殊字符（例如 é）也会导致错误。我希望能够接受来自用户的文本字符串作为输入，因此需要 Unicode 兼容性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:16:18.583

你有没有看到...

*   ...这些用法示例[**“在文本字符串中绘制特殊字符”**](http://www.imagemagick.org/Usage/draw/#text)和
*   ...此论坛主题：[**“Bash 脚本中的引号问题”**](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20787&start=0)

?

无论如何，以下命令在命令行上对我有用：

```
convert \
   -size 500x100 xc:none \
   -box yellow \
   -pointsize 72 \
   -gravity center \
   -draw "text 8,8 '  \'I\'m\'  '" \
   -trim \
   +repage \
    special-chars.png 
```

并产生这个：
![显示使用 ImageMagicks 文本绘制功能创建的特殊字符的示例 PNG](../Images/85e0d256f88858eb70f8c26a1b11a4f5.png)

对于更复杂的文本绘图要求，强烈建议您通过将绘图命令写入单独的`*.mvg`（[Magick Vector Graphic](http://www.imagemagick.org/script/magick-vector-graphics.php)）文件来规避所有转义。例如，在以下内容中`1.mvg`：

```
 text 8,8 "öäü ß ÄÖÜ é" 
```

这个命令：

```
convert \
   -size 250x100 xc:none \
   -box yellow \
   -pointsize 72 \
   -gravity center \
   -draw @1.mvg \
   -trim \
   +repage \
    special-chars.png 
```

你会得到
![通过 .mvg 文件获取更多特殊字符](../Images/7fd8fb7cdd1e311f0e75722341f73832.png)

甚至，与`2.mvg`：

```
推送图形上下文
 视框 0 0 600 100
 推送图形上下文
   填充“橙色”
   矩形 0,0 600,100
 流行图形上下文
 推送图形上下文
   填充“白色”
   字体 Palatino-Roman
   字体大小 48
   笔画宽度 2
   重力东南
   文本 8,8 "äöü ß ÄÖÜ é"
 流行图形上下文
 推送图形上下文
   填写“绿色”
   矩形 10,10 300,90
 流行图形上下文
 推送图形上下文
   填写“红色”
   字体 Palatino-Bold-Italic
   字体大小 28
   笔画宽度 1
   文本 18,40 "€ ¥ © ℉ ậ ḁ å ǎ à ç ë ĵ"
 流行图形上下文
流行图形上下文

```

这个命令：

```
convert 2.mvg 2.png 
```

你可以得到：
![...甚至更多特殊字符](../Images/9818e8ce43556b5d0a61ee87fc5894be.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:30:21.273

```
#Try lightweight GD2: https://www.ruby-toolbox.com/search?q=GD2

require 'gd2-ffij'
PATH_TO_FONT   = "/usr/share/fonts/truetype/DroidSans.ttf"
    image = GD2::Image::TrueColor.new(512, 512)
    image.draw do |pen|
      pen.font = GD2::Font::TrueType[PATH_TO_FONT, 32]
      pen.color = image.palette.resolve(GD2::Color[128, 16, 16])
      pen.move_to(256, 128)
      pen.text(GD2::VERSION, 5)
    end
image.export('./one.jpg') 
```

# python - 在 Python 上使用 Netscape 书签文件格式？

> ID：11914188
> 
> 赞同：2
> 
> 时间：2012-08-11T11:12:06.707
> 
> 标签：python, html, google-chrome, bookmarks

我的 Chrome 书签太乱了。所以我将它导出，并决定编写一个 Python 程序来清理我的书签。*例如：按关键字对它们进行排序。*

我找到了美丽的汤。但问题是，导出文件使用的是网景书签文件格式，而不是标准的 XML。Beautiful Soup 会尝试将它们转换为标准的 XTML 格式。Chrome 将无法读取它。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T11:17:44.207

默认情况下，Chrome 将您的书签存储为 JSON，例如：

```
C:\Users\user\AppData\Local\Google\Chrome\User Data\Default\Bookmarks 
```

对于 Linux 用户：

```
~/.config/chrome/Default/Bookmarks 
```

（当然，此文件的位置会因您的平台而异。）

您可能会发现此文件比 HTML 导出更容易操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:49:33.367

我也有同样的问题。现在我正在做一个 Python 书签工具包，只是为了从 Chrome 中清理我凌乱的书签。

github 上的书签：[https ://github.com/allengaller/bookmarkit](https://github.com/allengaller/bookmarkit)

我认为用 Chrome 定位书签文件对你/我没有帮助。除非您将 JSON 文件解析为 Dict（我看到您对此提出了另一个问题，并且我认为您已经留下了 SGML 书签文件。）

我的解决方案是：

1.  使用 CLI 管理书签是死路一条，因为对于真正需要一个工具来管理书签的人来说这是一个非常艰难的进步（他们中的大多数人像我一样拥有 10M+ 的书签文件），我将使用 PyGTK 或 PyQT 来提供简单的基于拖放的 GUI。

2.  关于 BS 更改您的文件：忘记 BS 将对您的书签文件所做的更改。每次解析完文件，生成一个NETSCAPE-BOOKMARK文件，不使用原始文件（即使它没有被改变）

3.  试试 ElementTree 库。
    请参见此处：[http](http://docs.python.org/library/xml.etree.elementtree.html) ://docs.python.org/library/xml.etree.elementtree.html 我认为解析 SGML 比直接更改 Chrome 正在使用的 JSON 文件更安全。因为像我这样的重度用户非常重视我们的数据，我宁愿小心导出，导入我的 Toolkit，完成我的工作，然后再导入 Chrome。这种进展最好是***明确***的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-16T01:52:36.290

我想出了如何用 Node.js 做到这一点。只需安装cheerio (npm install -Scheerio) 并通过环境变量或命令行参数添加 inputFile 和 outputFile 的名称。这是我的解决方案：

```
const fs = require('fs')
const path = require('path')
const cheerio = require('cheerio')
const inputFile = process.env.INPUT || process.argv[2] || 'bookmarks.html'
const outputFile = process.env.OUTPUT || process.argv[3] || 'bookmarks.json'
const inputFilePath = path.resolve(inputFile)
const outputFilePath = path.resolve(outputFile)

fs.readFile(inputFilePath, { encoding: 'utf8' }, (error, data) => {
  if (error)
    return console.error(error)
  const $ = cheerio.load(data)
  function parseTerm(element, out) {
    const item = {}
    if (element.name === 'dt') {
      parseTerm($(element).children(':not(p)').first().get()[0], out)
    } else if (element.name === 'h3') {
      item.title = $(element).text()
      item.type = 'folder'
      item.updated = $(element).attr('last_modified')
      item.children = []
      out.push(item)
      parseList($(element).next(), item.children)
    } else if (element.name === 'a') {
      item.title = $(element).text()
      item.type = 'link'
      item.added = $(element).attr('add_date')
      item.href = $(element).attr('href')
      item.icon = $(element).attr('icon')
      out.push(item)
    }
  }
  function parseList(list, out) {
    list.children(':not(p)').each(function (index) {
      parseTerm(this, out)
    })
  }
  const out = []
  parseList($('dl').first(), out)
  fs.writeFile(outputFilePath, JSON.stringify(out, null, 2), error => {
    if (error)
      return console.error(error)
    console.log('Success!')
  })
}) 
```

# java - org.xml.sax.SAXParseException 调用 WebServices 时出错

> ID：11914192
> 
> 赞同：0
> 
> 时间：2012-08-11T11:12:36.533
> 
> 标签：java, web-services, tomcat, wsdl, saxparseexception

我是网络服务和数字证书以及签名的新手。我正在使用 Eclipse 和 Tomcat 服务器来测试我使用的 soapUI。我已经给出了一个 WSDL 并从给定的 WSDL 生成了 java 类和 jar。

现在我在调用 Web 服务时遇到错误，我在其中将签名和证书编码作为参数传递给 Web 服务。

`Error Message 4; nested exception is: org.xml.sax.SAXParseException: The markup in the document preceding the root element must be well-formed.`

谁能告诉我如何解决它？

我收到以下原始回复。

```
HTTP/1.1 500 Internal Server Error
Date: Mon, 13 Aug 2012 04:20:00 GMT
Server: Oracle-Application-Server-10g/10.1.3.1.0 Oracle-HTTP-Server
Last-Modified: Wed, 12 Nov 2008 14:09:58 GMT
ETag: "15d5db-f02-491ae3b6"
Accept-Ranges: bytes
Content-Length: 3842
Connection: close
Content-Type: text/plain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T19:26:12.373

你在哪里得到这个例外？在 Eclipse 或 SoapUI 中？该消息只是意味着进入我们的 XML 在某处缺少结束标记。尝试在没有输入参数的情况下编写服务，只是为了消除导致错误的因素。

您是否编写了 Web 服务，或者您只是在使用该服务？在 SoapUI 中，输入端旁边的屏幕上有一个选项卡，上面写着 Raw。如果单击它，它将以 xml 形式显示数据，并且可以在右侧进行相同的输出。这也可以帮助您找到丢失的结束标签。

* * *

尝试运行您的代码，但注释掉对 Web 服务部分的实际调用，以查看问题是否在此之前发生。

# php - 在 PHP 中完成页面处理之前捕获上传文件的时刻？

> ID：11914194
> 
> 赞同：0
> 
> 时间：2012-08-11T11:12:38.060
> 
> 标签：php, javascript, html

我正在通过 iframe 包装器中的 POST 上传一些文件，这些文件可能需要异常多的时间来处理。

在我输出要由 iframe 的 onload 事件捕获的结果之前，我想让用户以某种方式知道上传已经完成，现在处理已经开始。

否则用户可能会因漫长的等待而感到困惑。

我正在考虑显示一条初始消息，然后在完成后添加另一行，然后在 iframe 中比较输出页面的内容。但由于某种原因，这种方法永远不会奏效。

例子：

```
print 'processing started';
for ($i=0; $i < 10; $i++) { 
    echo '...still processing';
    sleep(1);
}
echo 'done'; 
```

（期待看到“处理开始”消息，一旦完成加载就“完成”，但它只是在等待 10 秒后一次性吐出）。

所以我想知道如何做到这一点？

我的另一个想法是在页面的开头设置一个重定向标题，这样一旦文件上传，它就会重定向到其他页面，在那里它会进行处理。然后尝试捕获重定向和最终响应。

但这是一种奇怪的方式，它还需要传递提交的参数并将上传的文件从临时文件夹中移动到某个位置，因此一旦输出了 php 脚本，它们就不会被删除。

...所以我想知道是否有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:46:11.473

文件上传完成后，您的 PHP 将被调用，以便您可以 (a) 将文件放在您想要的位置，(b) 向浏览器发出一些 HTML 作为响应，以及 (c) 在您的情况下，开始处理。

所以我要做的是保存文件，然后将处理作为服务器上的后台作业启动（使用命令行 PHP 运行单独的 PHP 脚本，该命令行通过诸如 exec 之类的系统调用之一启动）。给作业一个唯一的 ID，您可以 (a) 创建一个根据 ID 命名的临时文件，(b) 在 HTML 中的某处传递给浏览器，以便我们可以查询该文件是否仍然存在；(c) 当作业完成时，它会删除该文件，因此我们知道它已经完成。

现在响应上传的 HTML 页面可以说“上传完成，处理开始”，然后运行一些 Javascript 来轮询服务器（使用 Ajax - 在 jQuery 中非常简单，直接使用 XMLHttpRequest 不太难）询问作业是否已经完成（通过轮询请求的 URL 中的查询字符串识别作业）。服务器上的轮询脚本查看相关文件是否仍然存在，如果存在，则相应地表示“不，仍在工作”或“是的，完成”。

如果作业有办法告诉它有多远，例如，如果您正在按顺序处理上传的文件，您可以让作业定期将进度百分比写入文件并返回以响应轮询，并在客户端显示为进度条。

# android - Android phonegap 应用程序：从浏览器打开链接到应用程序

> ID：11914195
> 
> 赞同：1
> 
> 时间：2012-08-11T11:12:43.227
> 
> 标签：android, cordova

我正在构建一个将安装在 android 上的 phonegap 应用程序。

我想以某种方式允许在 twitter 等上共享功能。因此，您可以在应用程序中创建一个“帖子”，人们可以在 twitter 上共享它，可能链接到包含该帖子的域。

phonegap 中是否有任何方法可以让这个链接从说 twitter（在浏览器中）在已安装的应用程序版本中打开？

安装的应用程序遵循与网络版本相同的 url 组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:02:27.137

我的教程：[TMT5P1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)允许用户从应用程序登录到他们的 Twitter 帐户。然后他们可以从 PhoneGap / Android 应用程序中发布推文、查看推文、提及等。Twitter 动作被集成到应用程序中，而不是让用户离开应用程序去访问 Twitter 网站。

需要子浏览器插件才能安全登录。

# c# - 将数据导出到excel手机

> ID：11914199
> 
> 赞同：3
> 
> 时间：2012-08-11T11:13:18.980
> 
> 标签：c#, windows-mobile, compact-framework, export-to-excel, windows-mobile-6

是否可以通过将 excel 应用程序作为 com 对象运行并使用 excel 对象模型填充工作表来将数据从我的 .netcf 应用程序导出到 excel 移动设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:51:09.193

没有。Pocket Excel/Excel Mobile 没有对象模型或自动化接口。最好的办法是将数据导出为 CSV，然后可以在 Excel 中打开。

# google-chrome - 除了浏览器的（W3C）“navigator.geolocation”对象之外，如何获取定位？

> ID：11914200
> 
> 赞同：0
> 
> 时间：2012-08-11T11:13:26.610
> 
> 标签：google-chrome, geolocation, file-uri, w3c-geolocation

我知道如何使用[W3C `navigator.geolocation`API](http://dev.w3.org/geo/api/spec-source.html)，但刚刚发现在 Google Chrome 下，当页面位于本地文件系统而不是 Web 服务器上时它不起作用：[[1]](https://stackoverflow.com/questions/5423938/html-5-geo-location-prompt-in-chrome)，[[2]](https://stackoverflow.com/questions/11725594/html-navigator-user-denied-geolocation)。

我可以使用哪些其他技术来获取我当前位置的纬度和经度或国家代码？

（我从本地文件系统运行我的项目，因为理想情况下它不需要自己的服务器。事实上，我什至没有自己的域或托管等（过去用我的上网本搭便车环游世界年）。它在 3rd 方服务器上调用 Web API，但没有自己的服务器。）

^(（是的，我知道我可以通过运行诸如 Python 的 SimpleHTTPServer 之类的本地 Web 服务器来解决这个问题，但是对于这个问题，我们假设这种解决方法是不可能的。）)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:30:23.337

如果您可以打开 ajax 的跨域请求（例如，如果您正在开发它以在移动设备上本地运行），您可以向您的服务器发出 ajax 请求，然后对来自它的全球 IP 地址进行地理定位。地理位置有时不准确（例如，我在犹他州，而我手机的 IP 出现在俄克拉荷马州）。

您还可以将用户重定向到托管在另一台服务器上的页面并执行相同的操作，然后使用查询字符串中的 GPS 坐标将其转发回去。

这两个都有点难看，但除了地理定位之外，我真的不知道任何其他方式来获取 GPS 坐标。

# ruby-on-rails - Heroku 使用自定义函数部署 Ruby on Rails 应用程序

> ID：11914208
> 
> 赞同：1
> 
> 时间：2012-08-11T11:14:23.490
> 
> 标签：ruby-on-rails, sqlite, postgresql, ruby-on-rails-3.1, heroku

我设计了一个 ruby​​ on rails 3.2 应用程序，其中有一个用户模型。我编写了一个自定义函数，以便通过另一个移动应用程序验证用户名和密码。在 localhost 中一切正常，我可以从移动应用程序进行身份验证。所以，我更进一步，将它部署在 Heroku 中。现在验证功能不起作用。

在我的**Gem 文件**中，我包含以下内容：

```
group :production do
  gem 'pg'
end

group :development do
  gem 'sqlite3'
end 
```

在我的**users_controller.rb**中，我编写了自定义**身份验证**函数：

```
 # http://wgo-ror.herokuapp.com/users/authenticate?userName=ramy&password=123456
  def authenticate     
     usr = params[:userName]
     pwd = params[:password]
     @getUser = User.where("userName = ? AND password = ?", params[:userName], params[:password])     
     if (@getUser!=[])       
       respond_to do |format| 
        format.html { render :json => {:Success => true, :Data => @getUser}, :callback => params[:callback] }
        format.json { render :json => {:Success => true, :Data => @getUser}, :callback => params[:callback] }
       end
     else           
      respond_to do |format|
        format.html { render :json => {:Success => false, :Data => @getUser}, :callback => params[:callback] }
        format.json { render :json => {:Success => false, :Data => @getUser}, :callback => params[:callback] }
      end 
     end
  end 
```

我还编写了另一个名为**saveUser**的自定义函数。即使在我将它部署到 heroku 之后，这个特定的功能也能**正常工作。**

```
 # http://wgo-ror.herokuapp.com/users/saveUser?id=1&userName=yrkapil&password=123456&email=yrkapil@gmail.com  
  def saveUser
     @user = User.find(params[:id])              
     @user.update_attributes(:userName => params[:userName], :password => params[:password], :email => params[:email] )
  end 
```

在我的**routes.rb 中**，我包含了以下内容：

```
 match 'users/authenticate' => 'users#authenticate', :as => :authenticate
  match 'users/saveUser' => 'users#saveUser', :as => :saveUser

  resources :users

  resources :festivals

  root :to => 'users#index' 
```

我错过了什么还是因为postgresql？我不知道该怎么做。请帮帮我，伙计们。我真的需要让这个工作。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:37:55.807

您的`userName`专栏中可能有案例问题。

您使用以下内容创建了`userName`列：

```
t.string :userName 
```

这将导致 Rails 将这样的 SQL 发送到数据库：

```
create table users (
    "userName" varchar(255),
    ...
) 
```

`userName`注意标识符周围的引号；引号使该列名区分大小写。但是，PostgreSQL 中不带引号的标识符被折叠成小写（SQL 标准说大写，但这在这里无关紧要）。本质上，引号意味着您`"userName"`在提及该列时始终必须说，您不能说`username`或`userName`或其他任何内容。

另一方面，SQLite 对 SQL 的解释非常松散，因此您可以执行以下操作：

```
create table t ("userName" text);
insert into t values ('x');
select * from t where username = 'x'; 
```

一切都会奏效。

每次让 ActiveRecord 构建列名时，它都会引用它，所以：

```
 @user.update_attributes(:userName => params[:userName], :password => params[:password], :email => params[:email] ) 
```

最终会这样做：

```
update users
set "userName" = ... 
```

每个人都很高兴。但是，您在这里使用的是 SQL 片段：

```
@getUser = User.where("userName = ? AND password = ?", params[:userName], params[:password]) 
```

没有引用你的`userName`标识符，所以 PostgreSQL 可能在抱怨一个未知的列。如果你这样做：

```
@getUser = User.where('"userName" = ? AND password = ?', params[:userName], params[:password]) 
```

你会有更好的运气。或者你可以这样做：

```
@getUser = User.where(:userName => params[:userName], :password => params[:password]) 
```

或这个：

```
@getUser = User.where(:userName => params[:userName]).where(:password => params[:password]) 
```

你应该做两件事：

1.  停止使用大小写混合的列名。使用下划线分隔单词的小写列名和表名是 PostgreSQL（以及 Ruby 和 Rails 的常见做法）。
2.  如果您要部署到 Heroku，请停止在 SQLite 之上进行开发并开始在 PostgreSQL 之上进行开发。您的开发堆栈和部署堆栈应该相同（或尽可能接近相同）。

# alfresco - Alfresco：在没有 imap 的情况下提取电子邮件

> ID：11914210
> 
> 赞同：1
> 
> 时间：2012-08-11T11:14:47.607
> 
> 标签：alfresco

在露天，我需要从我的组织邮件 ID（邮件客户端：Outlook）中提取电子邮件。但是在我的组织中，没有启用 imap 服务器。因此，我需要一些其他替代方法来将电子邮件从我的组织邮件 ID 提取到露天存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:49:26.483

我建议您使用[DavMail](http://davmail.sourceforge.net/)。这提供了 Exchange OWA 和 IMAP 之间的桥梁。您使用您的 Exchange 凭据配置 DavMail 的副本，然后将 Alfresco 指向 DavMail，以便它可以获取电子邮件。

好吧，要么这样，要么在 Alfresco 中启用入站 SMTP 功能，并安排将所有电子邮件转发/退回到 Alfresco 上的地址。不过，那将是推而不是拉，不确定这是否适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T22:00:19.940

配置 Alfresco 的入站电子邮件。

将 Alfresco 作为帐户链接到您的 Outlook：[SMTP 入站服务器](https://wiki.alfresco.com/wiki/Inbound_SMTP_Email_Server_Configuration)

然后按照本指南在 Outlook 中创建一个 Marco：[Forward Macro](http://www.techsupportforum.com/forums/f57/outlook-rule-with-send-from-account-option-566130.html)

然后创建一个规则以根据您想要的某些条件触发脚本，并且您会自动将收到的邮件转发到 Alfresco。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:28:36.903

如果您打算手动进行（拖放），到目前为止，我发现拖动到 CIFS 文件夹更快且可扩展。唯一的问题是 Alfresco 不提供对*.msg 文件的自动支持，因此您必须创建规则和脚本来提取文本和附件。幸运的是，Alfresco 已经使用了 POI（有 3 个 POI jar 文件），您可以使用这些库来提取文件。请记住，此类脚本必须位于 Alfresco 类路径中，否则将无法使用 POI 库。此外，您可能必须将 POI* .jar 文件移动到 tomecat/lib 目录，以便您的脚本可以使用这些 jar。有关脚本的更多详细信息，请查看 Mozilla Rhino 参考。

# android - 列表视图更新

> ID：11914215
> 
> 赞同：0
> 
> 时间：2012-08-11T11:15:27.733
> 
> 标签：android, listview, android-activity

我有两个使用 ListView 的**活动。**这两个活动有单独的布局文件。首先有 myListView01，其次有 myListView02。如何更新 listView 的适配器？我这样做：

```
ListView list = (ListView)findViewById(R.id.myListView01);
myAdapter = new ArrayAdapter<String>(this, R.layout.item01, R.id.label, array01);  
list.setAdapter(myAdapter); 
```

我从 array01 中删除了一些项目，我需要在没有这些元素的情况下更新我的 listView。但是这个**ListActivity**的解决方案不起作用：

```
myAdapter.notifyDataSetChanged(); 
```

我的代码：

```
package ...;
import ...;
public class Class01 extends Activity
{
    ArrayAdapter<String> mAdapter;

    ArrayList<String> array01 = new ArrayList<String>();

    @Override  
    public void onCreate(Bundle savedInstanceState)
    {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.layout01);

        ListView list = (ListView)findViewById(R.id.my_list01);
        mAdapter = new ArrayAdapter<String>(this, R.layout.item01, R.id.label, array01);  

        list.setAdapter(mAdapter);
    }
    public void onListItemClick (ListView parent, View v, int position, long id)
    {  
        array01 = deleteElementByPosition(array01, position);

        mAdapter.notifyDataSetChanged(); //does not work
    }  
    public void deleteElementByPosition()
    {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T10:07:47.647

您还没有[为](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)您的`ListView`. 扩展您`Class01`的`ListActivity`. `Activity`类没有`onListItemClick()`方法，所以它永远不会被调用。或者使用[setOnItemClickListener()](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemClickListener%28android.widget.AdapterView.OnItemClickListener%29)为您的`ListView`.

# windows-phone-7 - 要在循环选择器中显示的 WP7 项目

> ID：11914217
> 
> 赞同：0
> 
> 时间：2012-08-11T11:16:09.560
> 
> 标签：windows-phone-7

我正在使用循环选择器来可视化标志，这些标志以经典方式加载到列表中，如图所示：

```
public MainPage()
{
    InitializeComponent();

    List<DataContinent> data = new List<DataContinent>(); 
    data.Add(new DataContinent() { Flag = new Uri("/Images/Albania.png", UriKind.Relative).ToString() });
    data.Add(new DataContinent() { Flag = new Uri("/Images/Andorra.png", UriKind.Relative).ToString() });
    ...
    ...
    this.loopingSelectorContinent.DataSource = new ListLoopingDataSource<DataContinent>() {Items = data, SelectedItem = data[0]};
} 
```

是否可以在运行时根据所选大陆在循环选择器中加载不同的图像，或者作为替代方案，防止某些项目的循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:00:56.057

我找到了一种解决我将要描述的问题的简单方法，因为它可能对其他人有用。基本上，与其在 Main 内部初始化循环选择器，不如在外部完成，然后在必要时调用适当的函数。这里有一个例子：

```
public MainPage()
{
    InitializeComponent();
    Europe(); //standard visualization
}

public void Europe()
{
    List<DataContinent> data = new List<DataContinent>(); 
    data.Add(new DataContinent() { Flag = new Uri("/Images/Albania.png", UriKind.Relative).ToString() });
    data.Add(new DataContinent() { Flag = new Uri("/Images/Andorra.png", UriKind.Relative).ToString() });
    ...
    ...
    this.loopingSelectorContinent.DataSource = new ListLoopingDataSource<DataContinent>() {Items = data, SelectedItem = data[0]};
}
public void Africa()
{
    List<DataContinent> data = new List<DataContinent>(); 
    data.Add(new DataContinent() { Flag = new Uri("/Images/Algeria.png", UriKind.Relative).ToString() });
    data.Add(new DataContinent() { Flag = new Uri("/Images/Angola.png", UriKind.Relative).ToString() });
    ...
    ...
    this.loopingSelectorContinent.DataSource = new ListLoopingDataSource<DataContinent>() {Items = data, SelectedItem = data[0]};
}

private void button1_Click(object sender, RoutedEventArgs e) //loopingselector populated with European flags
{
Europe();
}

private void button2_Click(object sender, RoutedEventArgs e) //loopingselector populated with African flags
{
Africa();
} 
```

# postgresql - 为什么从rails检索postgresql的时间戳数据时日期时间不同1小时

> ID：11914218
> 
> 赞同：0
> 
> 时间：2012-08-11T11:16:17.093
> 
> 标签：postgresql, ruby-on-rails-3.2, migrate, rails-postgresql, timestamp-with-timezone

我有一个问题是我从 Rails 迁移数据库表。在表列中还包括带有时区的时间戳。

当我将数据插入数据库时​​，时间戳列将当前时间保存为（例如 2012-08-09 12:00:00 UTC+6:30）

我认为这意味着 2012-08-09 18:30。但是当我从 rails 3.2.6 检索这些数据时，它显示为 2012-08-09 5:30

为什么它显示为与实际时间不同的 1 小时。有什么想法吗？请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:29:56.467

猜测一下，您使用一种`timezone`设置存储它并使用不同的设置检索它。

例如，如果 Rails 认为你在 UTC+6:30 但 PostgreSQL 认为你在 UTC+5:30，并且如果 Rails 将日期发送到 Pg 时区限定但从 Pg 读取它们并假设它们在当地时间，这会发生。确保您的数据库驱动程序始终读取*和*写入符合时区的日期是最安全的。

鉴于一小时的差距，我想知道是否涉及夏令时，但也可能只是您的时区偏离了一小时。

```
regress=# create table test ( x timestamp with time zone );
CREATE TABLE
regress=# insert into test (x) values ('2012-08-09 12:00:00 UTC+6:30');
INSERT 0 1
regress=# SET TIMEZONE = '-5:30';
SET
regress=# select * from test;
             x             
---------------------------
 2012-08-10 00:00:00+05:30
(1 row)

regress=# SET TIMEZONE = '-6:30';
SET
regress=# select * from test;
             x             
---------------------------
 2012-08-10 01:00:00+06:30
(1 row) 
```

或者，您的数据库可能位于时区“-1:00”，而您的应用程序在读取日期时正在剥离时区，因此日期似乎偏离了一小时。用现有的信息很难说。

为了真正帮助您，您有必要展示：

*   插入日期的代码
*   `INSERT`真正插入日期的语句，通过启用`log_statement = 'all'`in捕获`postgresql.conf`，以及`SET TIMEZONE`会话在`INSERT`.
*   `SELECT`之后从数据库中读取该列的结果`SET TIMEZONE = 'UTC'`
*   以及读取日期的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:24:44.060

时间

> 2012-08-09 12:00:00 UTC+6:30

保存时在时区中`UTC+6:30(GMT+6:30)`。

当你检索它时，你会得到时`GMT`区的时间。

两者的时间相同`2012-08-09 5:30 GMT = 12:00:00 GMT+6:30`。

## 编辑：

这是为了`@CraigRinger`...

比方说...

```
UTC is London and UTC + 6:30 is Rangoon so... 

6:30 at Rangoon = 12:00 at London
                         Subtracting 6:30 from both    
12:00 at Rangoon = 5:30 at London
12:00 UTC+6:30 = 5:30 UTC
Data stored in UTC+6:30 = Data retrieved in UTC 
```

# iphone - 是否允许为单例类中的变量定义属性和综合？

> ID：11914219
> 
> 赞同：0
> 
> 时间：2012-08-11T11:16:25.520
> 
> 标签：iphone, objective-c, ios, xcode, singleton

允许在单例类中为变量定义属性和综合？，如下面的接口，

```
@property(nonatomic,assign)NSInteger value; 
```

在实现文件中，

```
@synthesize value; 
```

或者我们只需要声明一个如下所示的变量，

```
@interface SingletonDataClass : NSObject
{
    NSInteger value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:25:02.997

您可以在常规课程中做的任何事情都可以用单身人士做。

没有称为“单例”的语言概念，它只是常规 Objective C 类的常见使用模式。使一个类成为单例的是您确保其实例化只发生一次的方式，即您自己的支持代码。

# php - 在 cakephp 中表单重定向后打印输入元素的值

> ID：11914223
> 
> 赞同：-3
> 
> 时间：2012-08-11T11:17:01.243
> 
> 标签：php, cakephp, cakephp-2.0

我对 cakephp 非常陌生。我创建了一个带有输入控件的简单表单，如下所示：

```
 <?php
    echo $this->Form->create();
    echo $this->Form->input('name');
    echo $this->Form->input('address', array('rows' => '3'));
    echo $this->Form->input('aaa', array(
        'type'      => 'date',
        'label'     => 'select',
        'before'    => '--before--',
        'after'     => '--after--',
        'between'   => 'Date',
        'separator' => '****',
        'empty'     => '--select--'
    ));
    echo $this->Form->checkbox('subjects', array('value' => 'Java'));
?>
java
<?php
    echo $this->Form->input('gen', array(
        'type' => 'radio',
        'options' => array('m', 'f')
    ));
    echo $this->Form->input('file', array('type' => 'file'));
    echo $this->Form->input('listbox', array('options' => array(1,2,3,4,5), 'multiple' => 'multiple'));
    echo $this->Form->end('Submit');
?> 
```

我希望将在这些组件中输入的值打印在另一页上。我怎么做？我试图在会话（这似乎不合适）的帮助下做到这一点，如下所示：

```
public function contactus() {
        if ($this->request->data!=null) {
            $var=$this->request->data;
            $this -> Session -> write('myvar', $this->request->data);
            //$this->set($var, $this->request->data);
            $this->redirect(array('action' => 'contactview'));
        }
    } 
```

但它输出数组，我不能使用会话来存储每个组件的值。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:42:18.693

根据 cakephp 书（表格：[http](http://book.cakephp.org/1.3/view/1384/Creating-Forms) ://book.cakephp.org/1.3/view/1384/Creating-Forms ）

```
 <?php 
    echo $this->Form->create(null, 
  array('url' => array('controller' => 'recipes', 'action' => 'add'))); 
    ?>

     //Output:
    <form method="post" action="/recipes/add"> 
```

因此，只需更改您的`create`功能并添加`url`选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:45:13.890

我没有使用会话，而是使用`this->data`并且它能够解决我的问题。

# php - Xpath 删除文本之间的空格

> ID：11914224
> 
> 赞同：1
> 
> 时间：2012-08-11T11:17:03.707
> 
> 标签：php, html, parsing, xpath, html-parsing

我正在使用以下 XPath 从 html 页面中选择一些数据。我试图选择的值之间有一些空格：

```
example=value1    value2       value3 
```

我的 XPath 表达式正在选择值，但会删除文本之间的额外空格，如下所示：

```
value1 value2 value3 
```

如何确保不删除多余的空格？

我的xpath：

```
//*something/div/input[1]/@value 
```

我从中选择值的示例 HTML：

```
<input type="radio" name='radio1' value="R92392   12132                           sdlasldkaskl                  " id='some' > 
```

请注意，我得到的值为`R92392 12132 sdlasldkaskl`. 但我希望保留文本之间的空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T11:38:49.813

我的 XPath 引擎没有删除空格，所以它一定是由于 PHP 设置。我不确定您的情况，因为您没有提供太多代码，但以下内容可能对您有用：

```
$doc->preserveWhiteSpace = true; // This setting should fix it
$doc->Load('document.xml');
$xpath = new DOMXPath($doc);
$query = '//div/input[1]/@value'; 
```

# mongodb - BSON 解码器异常

> ID：11914225
> 
> 赞同：2
> 
> 时间：2012-08-11T11:17:07.990
> 
> 标签：mongodb, bson

由于 Mongo 使用 BSON，我使用 Java API 中的 BSONDecoder 从 Mongo 查询中获取 BSON 文档并打印字符串输出。在下面的 byte[] 数组中存储了 MongoDB 文档的字节（当我打印十六进制值时，它们与 Wireshark 中的相同）

```
 byte[] array = byteBuffer.array();
  BasicBSONDecoder decoder = new BasicBSONDecoder();
  BSONObject bsonObject = decoder.readObject(array);
  System.out.println(bsonObject.toString()); 
```

我收到以下错误：

```
 org.bson.BSONException: should be impossible 
```

原因：java.io.IOException：org.bson 的 org.bson.BasicBSONDecoder$BSONInput.read(BasicBSONDecoder.java:364) 的 org.bson.BasicBSONDecoder$BSONInput._need(BasicBSONDecoder.java:327) 出现意外 EOF。 BasicBSONDecoder.decodeElement(BasicBSONDecoder.java:118) at org.bson.BasicBSONDecoder._decode(BasicBSONDecoder.java:79) at org.bson.BasicBSONDecoder.decode(BasicBSONDecoder.java:57) at org.bson.BasicBSONDecoder.readObject(BasicBSONDecoder .java:42) 在 org.bson.BasicBSONDecoder.readObject(BasicBSONDecoder.java:32) ... 4 更多

查看实现 [https://github.com/mongodb/mongo-java-driver/blob/master/src/main/org/bson/LazyBSONDecoder.java](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/org/bson/LazyBSONDecoder.java)看起来它被困在

```
 throw new BSONException( "should be impossible" , ioe ); 
```

以上发生在对数据库的查询中（通过查询，我的意思是 byte[] 数组包含文档长度之后的所有字节）。查询本身包含字符串“ismaster”或十六进制为“x10 ismaster x00 x01 x00 x00 x00 x00”。我怀疑是 {isMaster: 1} 的 BSON 格式，但我还是不明白为什么会失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T16:33:19.967

你说：

> byte[] 数组包含文档长度之后的所有字节

如果您要剥离返回的 BSON 的第一部分，则您没有将有效的 BSON 文档传递给解析器/解码器。

有关详细信息，请参阅[BSON 规范](http://bsonspec.org/#/specification)，但简而言之，前四个字节是小端格式二进制文档的总大小。

您在[代码](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/org/bson/BasicBSONDecoder.java#L358)中遇到了一个异常，该异常基本上是在尝试读取预期的字节数。它将第一个 int32 读取为长度，然后尝试将其其余部分解析为 BSON 元素（并在下一个字节中找不到有效类型时出现异常）。将您从查询中返回的所有内容传递给它，包括文档大小，它将正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T21:52:02.540

这工作得很好：

```
byte[] array = new BigInteger("130000001069734d6173746572000100000000", 16).toByteArray();
BasicBSONDecoder decoder = new BasicBSONDecoder();
BSONObject bsonObject = decoder.readObject(array);
System.out.println(bsonObject.toString()); 
```

并产生这个输出：

> {“是大师”：1}

byteBuffer 中的字节有问题。请注意，您*必须*包含整个文档（包括大小的前 4 个字节）。

# jquery - 如何制作选定的元素并附加选项？

> ID：11914229
> 
> 赞同：2
> 
> 时间：2012-08-11T11:17:22.807
> 
> 标签：jquery

我正在尝试使用一些选项制作一个选择器组件。我没有得到任何结果。我这样做的方式有问题。

谁能帮我这个？

```
var object = {
               "id":"countries",
               "label":"Country",
               "name":"countries",
               "type":"select",
               "options":[
                  {
                     "value":"",
                     "text":"Select Country"
                  },
                  {
                     "value":"in",
                     "text":"India",
                      "selected":"true"
                  },
                  {
                     "value":"us",
                     "text":"United Stated"

                  },
                  {
                     "value":"uk",
                     "text":"United Kingdom"
                  },
                  {
                     "value":"cn",
                     "text":"Canada"
                  }
               ]
};
var select = "";

var mapInfo = function (element,info) {
    $.map(info, function(val,num){
console.log(val);        
    })
}

var generateSelector = function (info){

    select +='<select'+info.id+'></select>'
    select +=mapInfo(select,info.options)

   $('body').append(select);

}(object); 
```

[jsfiddle在这里](http://jsfiddle.net/vYeFS/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:39:06.863

尝试这个：

```
var $select = $("<select id='"+obj.id+"' name='"+obj.name+"'/>");
var selected = '';
var generateSelector = function (info){
    $.each(obj.options, function(i, ob){
        if (ob.hasOwnProperty('selected')) {
             selected = ob.value;
        }
        $select.append('<option value='+ob.value+'>'+ ob.text+'</option>')
    })

   $('body').append($select);
   $('select').val(selected)
} 
```

[演示](http://jsfiddle.net/vYeFS/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:23:24.427

```
 $(document).ready(function () {
        var jsonObject = {
            "id": "countries",
            "label": "Country",
            "name": "countries",
            "type": "select",
            "options": [
                  {
                      "value": "",
                      "text": "Select Country"
                  },
                  {
                      "value": "in",
                      "text": "India",
                      "selected": "true"
                  },
                  {
                      "value": "us",
                      "text": "United Stated"

                  },
                  {
                      "value": "uk",
                      "text": "United Kingdom"
                  },
                  {
                      "value": "cn",
                      "text": "Canada"
                  }
               ]
        };

        var selectedvalue = '';

        $("body").append($("<label />", { html: jsonObject.label, 'for': jsonObject.name }),
        $("<select id='ddlSelect' />", { id: jsonObject.id, name: jsonObject.name }).html($.map(jsonObject.options, function (entity, i) {
            if (entity.selected == "true")
                selectedvalue = entity.value;
            return '<option value="' + entity.value + '">' + entity.text + '</option>';
            //return $("<option />", { value: entity.value, text: entity.text });
        }).join('')));

        $('#ddlSelect').val(selectedvalue).trigger('change');
    }); 
```

演示见这个链接：http: [//jsfiddle.net/nanoquantumtech/vUwVq/](http://jsfiddle.net/nanoquantumtech/vUwVq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:56:16.010

尝试这个

```
function generateSelector(obj) {
var selector = $('<div></div>');
var label = $('<label for="' + obj.id + '">' + obj.label + '</label>');
var selectElem = $('<select id="' + obj.id + '" name="' + obj.name + '"></select>');
for (var i = 0; i < obj.options.length; i++) {
    var option = $('<option value="' + obj.options[i].value + '">' + obj.options[i].text + '</option>');
    if (obj.options[i].selected)
        option.attr('selected', 'selected');
    option.appendTo(selectElem);
}
label.appendTo(selector);
selectElem.appendTo(selector);

return selector; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T11:40:40.693

用 JavaScript 编写 HTML 会变得很麻烦。在这种情况下，您将 id 与 select 标签连接起来。改用 DOM：

```
var select = document.createElement("select"), i, opt; //create a select element
select.id = info.id;  //set the id
for(i = 0; i<info.options.length; i++) {
    opt = new Option();  //create a new option and set its properties
    opt.text = info.options[i].text;
    opt.value = info.options[i].value;
    opt.selected = info.options[i].selected;
    select.appendChild(opt); //add the option to the select element
} 
```

[jsFiddle](http://jsfiddle.net/vYeFS/9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T12:09:09.733

这是我的生成器版本。:)

```
$(object).each(function(i,v) {
    var label = $("<label />", { html: v.label, 'for': v.name });
    var element;
    switch(v.type) {
        case "select":
            element = $("<select />", { id: v.id, name: v.name  });
            $(v.options).each(function(x,y) {
                var option = $("<option />", { value : y.value, html : y.text });
                element.append(option)
            });
        break;
    }
    $("body").append(label, element);        
}); 
```

*[[看到它在行动]](http://jsfiddle.net/Starx/eMnx5/1/)*

*   这可以处理多组数据
*   作为可扩展性，它可以扩展到涵盖的不仅仅是选择类型。

# javascript - 我的希尔伯特曲线有什么问题？

> ID：11914233
> 
> 赞同：0
> 
> 时间：2012-08-11T11:17:50.167
> 
> 标签：javascript, geometry, hilbert-curve

我有一个 Javascript 库可以在[希尔伯特曲线](http://en.wikipedia.org/wiki/Hilbert_curve)上绘制点，但是点确定有问题。

我编写了一个测试页，在路径上绘制了 256 个点。虽然它应该看起来像[这样](http://corte.si/posts/code/hilbert/portrait/index.html)，但它却是这样出来的：

![似乎有一些不连续性。](../Images/7211fa8d2d7778c194f3b9e1c1a4c5d3.png)

[您可以在http://jsbin.com/oheloc/1/edit](http://jsbin.com/oheloc/1/edit)检查页面背后的源（对于踢，解锁递归深度并将其提高到高于点指数以查看整个路径变得更加变形）。

这张照片有什么问题？我认为这与（至少）其中一个象限转换不正确有关，但我无法弄清楚它应该是什么。

# php - 如何使用mysql连续显示每3个结果？

> ID：11914234
> 
> 赞同：-2
> 
> 时间：2012-08-11T11:17:51.640
> 
> 标签：php, mysql, html

通过使用下面的代码，我显示了 9 张图像，但所有图像并排对齐，如何在一行中显示每 3 张图像，在另一行中显示另外 3 张图像？

```
<table align="center" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<?php $sel = $db->query("select * from gallery order by gallery_cat_id asc    limit 1,1"); 
while($row=mysql_fetch_array($sel)){ ?>
<tr><td align="left" valign="top"><table align="center" border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody><?php $sel1 = $db->query("SELECT DISTINCT ( i.gallery_album_id ) 
FROM mov_gallery_album AS a, mov_gallery_images AS i
WHERE a.gallery_album_id = i.gallery_album_id
AND a.gallery_cat_id =".$row['gallery_cat_id']."
ORDER BY a.gallery_album_id DESC
LIMIT 0 , 9 "); if(mysql_num_rows($sel1)>0){ ?>
</tr><tr>

<?php 
while($row1=mysql_fetch_array($sel1)){
$dis1 = $db->getRow("select * from ".ALBUMS." where gallery_album_id=".$row1['gallery_album_id']." limit 0,1"); 
$dis2 = $db->getRow("select * from ".GALLERY." where gallery_id=".$dis1['gallery_id']." limit 0,1"); 
$dis3 = $db->getRow("select * from ".ALBUMSIMAGES." where gallery_album_id=".$row1['gallery_album_id']." limit 0,1"); 
$dis4 = $db->getRow("select * from ".GALLERYCATEGORY." where gallery_cat_id=".$dis2['gallery_cat_id']." limit 0,1"); 
?>

<td align="left" width="100%"><table border="0" cellpadding="5" cellspacing="0">
<tbody><tr><td align="center" height="8" valign="middle" width="80">
<div style="border:0px;clear:both;padding-bottom:100px;margin-left:-110px;">
<div class="image_stack1"><a href="<?php echo SITE; ?>album/<?php echo  ucfirst($dis1['gallery_cat_id']); ?>/<?php echo ucfirst($dis1['gallery_id']); ?>/<?php echo ucfirst($row1['gallery_album_id']); ?>/">
<img id="photo3" src="<?php echo SITE; ?>uploads/gallery/<?php echo $dis4['folder']; ? >/<?php echo $dis2['folder']; ?>/<?php echo $dis1['folder']; ?>/thumb/<?php echo   $dis3['image']; ?>"width="80" height="80">
<div class="namehover1"><?php echo substr(ucfirst($dis1['name']),0,13); ?></div>
</a></div></div></td></tr></tbody></table></td><?php } ?></tr><tr><td class="midtitle" align="center" valign="middle">&nbsp;</td></tr>
<tr><td style="padding-right: 10px;" align="right" colspan="4"><a href="<?php echo SITE; ?>gallery/<?php echo ucfirst($row['gallery_cat_id']); ?>/" class="midtitle">
<img src="http://www.img./viewall.png" border="0"/>
</a></td></tr><?php } ?></tbody></table></td></tr><?php  } ?></tbody></table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:59:03.030

使用 div 而不是 table 是明智的。一些css行可以解决问题。您不必在逻辑上确定在 3 张图像后移至下一行。这是在 css 中如何使用它让所有图像都有一个 div 容器。

```
<style>
#photo_wrapper {
    width:600px;
}
.photo {
width:150px;
height:150px;
display:block;
float:left;
border:6px #c5d0d6 solid;
margin-right:5px;
margin-bottom:5px;
overflow:hidden;
}
</style>
<div id="photo_wrapper">
    <img src="image.jpg" class="photo"/>
    <img src="image.jpg" class="photo"/>
    <img src="image.jpg" class="photo"/>
    <img src="image.jpg" class="photo"/>
    <img src="image.jpg" class="photo"/>
    <img src="image.jpg" class="photo"/>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:29:17.740

这通常使用模（除法后的余数）运算符完成：

```
foreach ($results as $nr => $row) {
  if (($nr % 3) == 0) echo '<tr>';
  ...
  if (($nr % 3) == 0) echo '</tr>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:26:40.437

这个概念很简单，每次使用一个计数器`this counter MOD 3 is zero`，开始一个新行。或者只数到 3 并重置计数器。

```
$i = 1;
while( $data = ....)
{
  if($i == 1)
  {
   echo "<tr>"; //new line
  }

 echo "<td> .... </td>";

  if($i == 3)
  {
    $i = 1;
    echo "</tr>";
  }
  else
  {
   $i++;
  }
}

//IMPORTANT! PLEASE NOTICE TO THIS PART: (OUT OF THE LOOP)
if($i < 3)
 echo "</tr>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T11:39:06.033

您可以将 9 张照片放在一个 div 中，然后固定该 div 的宽度，使其足以容纳一行中的 3 张照片。并设置浮动：左；CSS中的img标签。

# android - cocos2d-x v 2.0 和 Linux

> ID：11914237
> 
> 赞同：1
> 
> 时间：2012-08-11T11:18:07.410
> 
> 标签：android, cocos2d-x

我是移动开发的新手。[cocos2d-x 教程](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Tutorials)说：

> 但请注意，linux 端口只存在于 cocos2d-x v1.x 版本，我们在 v2.0 中删除了这个端口

这是否意味着我无法在 Linux 机器上设置开发环境以针对 Android 等应用程序，或者这意味着我可以在 Linux 机器上设置开发环境，但不能针对 Linux 应用程序。

更新：链接已更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:43:02.383

我的理解是：你可以在 Linux 上开发并部署到 Android，但你不能用 cocos2d-x 2.0 构建原生 Linux 应用程序。

我假设这是因为他们在谈论“端口”，这通常是指引擎本身而不是开发环境。此外 cocos2d-x 2.0 存储库仍然包含许多 Linux 文件，包括构建示例项目所需的文件。

但不能保证，这就是我在查看他们的 wiki 和 github repo 后的理解。

# java - 在所有其他作业之后播放框架运行作业

> ID：11914238
> 
> 赞同：0
> 
> 时间：2012-08-11T11:18:16.000
> 
> 标签：java, playframework, playframework-1.x

我想在所有其他作业都执行后运行一个作业。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:24:18.430

“简单的方法是只使用一个带有 @OnApplicationStart 注释的作业来安排其他任务......”

[https://groups.google.com/forum/?fromgroups#!topic/play-framework/teNk2W_0o-E%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/play-framework/teNk2W_0o-E%5B1-25%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:22:07.123

您可以为此使用数据库计数器。每次作业完成时更新计数器（可能也想处理作业失败的情况）并使用 @Every 注释运行您的作业并轮询该计数器。

当计数器达到作业总数时，然后执行您的依赖作业。

# python - 多个 wxpython 选项卡严重处理 matplotlib 事件

> ID：11914239
> 
> 赞同：0
> 
> 时间：2012-08-11T11:18:25.073
> 
> 标签：python, event-handling, matplotlib, wxpython

我非常努力地理解这一点，感觉如此接近！我有一个循环，我在其中创建了一些 wxpanels 并将它们附加到笔记本选项卡上。每个选项卡都包含一个图。最初对绘图的事件调用没有通过正确的绘图面板，因此事件处理函数报告了错误绘图的位置。我想我会用一个字典来解决这个问题：

```
 self.plotdict ["plot" + str(plotcounter)] = wx.Panel(self, id=wx.ID_ANY) 
```

然后我能够更改我的函数，使其传递 dict 键而不是情节，无论如何我感觉更好。

```
 self.plotdict ["plot" + str(plotcounter)].canvas.mpl_connect('motion_notify_event', lambda event: self.cbUpdateCursor(event, ("plot" + str(plotcounter)))) 
```

然而，即使这个循环已经运行了很多次，并且我在选项卡中有很多图，循环中的这一行总是将相同的键发送到函数 self.cbUpdateCursor，就好像它只使用最后一个选项卡的函数调用/情节创建。

```
 def cbUpdateCursor(self, event, plot):
    if event.inaxes:
        text = 'x = %5.4f, y = %5.4f' % (event.xdata, event.ydata)
        print text
        print plot
        print self.plotdict[plot]
        print id(self.plotdict [plot])
        self.plotdict [plot].cursor_pos.SetLabel(text) 
```

这意味着该函数的打印（仅用于测试）显示相同的绘图参考，无论哪个选项卡以及鼠标事件发生在哪个绘图上。

```
 Print results for mouse over plot1
    x = -127.8006, y = 135.9350
    plot3
    <wx._windows.Panel; proxy of <Swig Object of type 'wxPanel *' at 0x2f63758> >
    52125616
  Print results for mouse over plot2
    x = -185.0618, y = 137.9096
    plot3
    <wx._windows.Panel; proxy of <Swig Object of type 'wxPanel *' at 0x2f63758> >
    52125616 
```

为什么我的画布上的鼠标事件会调用与绘图 3 相关的函数，而不管我的鼠标在哪个绘图上？（在这种情况下，情节 3 是最后一个创建的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:33:36.837

我认为您的问题可能是因为您需要关闭运动通知事件功能。可以在[这里](https://stackoverflow.com/questions/233673/lexical-closures-in-python)找到一些关于闭包的非常好的答案。

也许是这样的：

```
for plot_count in plot_counts:
    def update_plot(event, plot_count=plot_count):
        self.cbUpdateCursor(event, 'plot%s' % plot_count)

    self.plotdict['plot%s' % plot_count].canvas.mpl_connect('motion_notify_event', update_plot) 
```

但是，由于您没有提供[SSCCE](http://sscce.org) ，因此我无法测试是否确实如此。

# regex - 如何为多个目录创建 htaccess 重定向

> ID：11914241
> 
> 赞同：0
> 
> 时间：2012-08-11T11:18:30.367
> 
> 标签：regex, linux, .htaccess

我必须在根级图像目录的路径中为多个图像目录创建 htaccess 重定向。这些路径都有一个变量，在我的例子中，一个以城市/州命名的目录......

我们的公司网站中有许多迷你网站，每个迷你网站都有自己的图像目录：`.../images/u/whatever.jpg`

例子：

> 根/存储/本地/伯明翰-al/images/u/
> 
> 根/存储/本地/mongomery-al/images/u/
> 
> 根/商店/本地/纳什维尔-tn/images/u/

我需要一个快速重定向来告诉服务器使用新的共享图像目录，而不是从每个`/images/u/`

所有服务器请求都应将图像请求重定向到：

> 根/imagecdn

我该怎么做才能只影响那些 /images/u/ 目录中的图像？

我很讨厌正则表达式，但我确信它可以做到。我们需要将此作为快速修复，而不是手动更改 1000 多个路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:43:44.567

这个正则表达式是否满足您的需求？

```
/^.*/images/u(.*)$/gm 
```

替换字符串是`root/imagecdn$1`.

[例子](http://regexr.com?31qal)

# c# - 在 DataGridView 中显示之前将时间戳（Datetime.ticks）从数据库转换为 Datetime 值

> ID：11914243
> 
> 赞同：0
> 
> 时间：2012-08-11T11:18:45.000
> 
> 标签：c#, winforms, datagridview, sql-server-ce

我在我的 winform 应用程序中使用 SQL Server 精简版作为后端。

我的一张表中有一个列**时间戳**。我存储的时间戳如下：

```
DateTime dt = System.DateTime.Now;
long timestamp = dt.Ticks; 
```

它将表示当前日期和时间的长值存储到数据库中。

我想通过设置**DataSource**属性在**DataGridView控件中显示表的数据。**

 **当我使用 SQL 查询“select * from my-table”检索表数据并附加到 DataSource 时，它​​只是将时间戳显示为长值。

我的**问题**是：在 DataGridView 中显示之前，如何将时间戳转换回 dd-mm-yyyy 格式的 DateTime 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:26:43.107

怎么样

```
Datetime dt = new DateTime(longvaluefromdatabase); 
```

> 将 DateTime 结构的新实例初始化为**指定的刻度数**。

读[这个](http://msdn.microsoft.com/en-us/library/z2xf7zzk.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:03:58.983

如果你使用数据表，你可以这样做：

```
resultDataTable.Columns.Add(new DataColumn("DateTime", typeof(DateTime)));
foreach (DataRow r in dt.Rows)
{
    r["DateTime"] = new DateTime(Convert.ToInt32(r["Timestamp"]);
}
dt.Columns.Remove("Timestamp"); 
```

选中此项以将 sqlceresultset.resultview 转换为数据表：[Convert SQLCEResultSet resultview to datatable](https://stackoverflow.com/questions/2582530/convert-sqlceresultset-resultview-to-datatable)**

# java - Google App Engine 和 HTTPS 策略

> ID：11914244
> 
> 赞同：1
> 
> 时间：2012-08-11T11:18:57.950
> 
> 标签：java, google-app-engine, http, gwt, ssl

我正在设计我的第一个 GAE 应用程序，显然需要使用 HTTPS 来实现登录功能（不能以明文形式发送我的用户 UID 和密码！）。

但是我对初次登录后如何处理请求感到困惑/紧张。在我看来，我有两种策略：

*   一切都使用 HTTPS
*   从 HTTPS（用于登录）切换回普通 ole' HTTP

第一个选项更安全，但可能会引入性能开销（？）并可能将我的服务账单发送到屋顶。第二种选择更快、更容易，但安全性较低。

这里的另一个因素是这将是一个“单页应用程序”（使用 GWT），UI 的某些部分将能够接受付款，并且需要安全传输财务数据。所以一些 AJAX 请求*可能*是 HTTP，但其他的*必须*是 HTTPS。

所以我问：

*   GAE 有一张漂亮的表格来解释传入/传出带宽资源，但从未具体定义可以为 HTTPS 分配多少 I/O 带宽。有人知道这里的限制吗？我计划使用“启用计费”并为该应用程序支付一点费用（以及更高的资源限制）。
*   是否有可能有一个 GWT/单页应用程序，其中 UI 的某些部分使用 HTTP，而其他部分使用 HTTPS？还是“全有或全无”？
*   使用全 HTTPS 策略是否有任何*实际性能？*

了解这些将帮助我在 HTTP/S 混合解决方案或纯 HTTPS 解决方案之间做出选择。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:29:20.620

[您为传入带宽支付的 http 和 https 费用](https://developers.google.com/appengine/docs/billing)相同，并且您应该看到实例小时数的任何差异。唯一的区别是您需要为 SNI 或 VIP 支付的[一次性费用](https://www.globalsign.com/blog/ssl-with-google-app-engine.html)（每月）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:58:28.093

如果您开始混合使用 http 和 https 请求，您将与使用 http 一样安全，因为任何 http 请求都可能被拦截并可能引入 XSS 攻击。

如果您认真对待您的安全性，请阅读它，假设您只需要 https 来获取敏感数据并使用 http 传输其余部分会给您带来很多麻烦。

# c++ - 使用标签制作程序

> ID：11914245
> 
> 赞同：0
> 
> 时间：2012-08-11T11:19:16.690
> 
> 标签：c++, c, tabs, propertysheet

有没有办法在没有 MFC 的情况下使用 C++ 创建带有选项卡的程序？以纯 WinAPI 为例。使用属性表或选项卡控件。我不确定 Tab Control 是否是特定于 MFC 的类。

我找不到关于使用属性表或其他任何东西执行此操作的好例子。每个示例都使用 MFC，但我需要一个非 MFC 示例。

没有MFC有没有办法做到这一点？使用属性表，还是使用选项卡控件？

![像这个](../Images/73b3c6c661dbde76caf697f0b5edcb99.png)

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:00:55.930

这些基本上是您的可能性：

1.  使用标准 Win32 属性表，请参阅[此](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774540%28v=vs.85%29.aspx)；
2.  利用实现它的 GUI 库；
3.  创建一个带有选项卡控件的对话框并向其添加页面（您可以将页面创建为子窗口并自己处理显示/隐藏），但让 Windows 处理对话框消息循环，请参阅[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452%28v=vs.85%29.aspx)；
4.  创建一个带有选项卡控件的窗口，并使用它使其外观和行为像一个[对话框](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645498%28v=vs.85%29.aspx)。

最后一个提供了最大的灵活性，但也是最难实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:35:12.293

当然，这是可能的。MFC 只是 Windows API 的包装器。如果您愿意花更多时间开发“纯”Win32 应用程序，请查看 Tab Control - [Win32中的 Tab Control 示例](http://www.pismotek.com/brainout/content/windows_tab_example.php)

# javascript - Jquery UI拖放在IE9中不起作用

> ID：11914249
> 
> 赞同：0
> 
> 时间：2012-08-11T11:19:28.900
> 
> 标签：javascript, jquery, internet-explorer-9

我有 Jquery 拖放在 Firefox 中工作，但它在 IE9 中不起作用。

我在 IE9 上打开了显示脚本错误，但它没有显示任何错误..

演示站点是[http://www.aussiehaulage.com.au/default.aspx](http://www.aussiehaulage.com.au/default.aspx)

我有最新版本的 Jquery 和 UI

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:41:55.667

此问题将通过此修复得到修复。在您的代码中使用此修复程序并享受。

[http://forum.jquery.com/topic/jquery-ui-sortable-and-draggable-do-not-work-in-ie9](http://forum.jquery.com/topic/jquery-ui-sortable-and-draggable-do-not-work-in-ie9) 这将在 jQuery UI 1.8.6 中。

如果你不能升级到 1.8.6（还），这个修补程序将允许旧版本的 jQuery UI 拖放与 IE9 一起工作：

```
<script>
// HOTFIX: We can't upgrade to jQuery UI 1.8.6 (yet)
// This hotfix makes older versions of jQuery UI drag-and-drop work in IE9

(function($){
    var a=$.ui.mouse.prototype._mouseMove;
    $.ui.mouse.prototype._mouseMove=function(b){
        if($.browser.msie&&document.documentMode>=9){
            b.button=1
        };
        a.apply(this,[b]);
    }
}(jQuery));
</script> 
```

# android - 如何在 android 中使用 HttpUrlConnection 发布-> 出现错误：java.io.IOException：内容长度承诺 82 字节，但收到 43

> ID：11914253
> 
> 赞同：2
> 
> 时间：2012-08-11T11:19:39.197
> 
> 标签：android, httpurlconnection

您好，我正在尝试从 android 到服务器的发布数据。我正在尝试使用`HttpURLConnection`.

在这里，我发送用户名和密码进行身份验证，以便在 drupal 中为特定用户输入数据。我也尝试过用其他各种方法发布数据。使用 DefaultHttpClient 但没有运气。使用 DefaultHttpClient 时出现 401 错误。

这是我在stackoverflow上提出的问题链接。[身份验证错误：无法响应任何这些质询：{} Android - 401 Unauthorized](https://stackoverflow.com/questions/11878896/authentication-error-unable-to-respond-to-any-of-these-challenges-android)

所以请帮忙。谢谢收听。

这是我的代码。

```
 public static class post_idea extends AsyncTask<Void, Void, Void> {

  String strResponse1;
  @Override
  protected void onPreExecute() {
   // TODO Auto-generated method stub
   super.onPreExecute();

   pgb.setVisibility(View.VISIBLE);
  }

  @Override
  public Void doInBackground(Void... params) {
   // TODO Auto-generated method stub

   // String url = "http://testingd7.mobileapplicationtesters.com/my_android_drupal/user/login";
      String url = "http://testingd7.mobileapplicationtesters.com/my_android_drupal/node.json";
  // String url = "http://mobiappdevelopers.com/drupal_test/my_android_drupal/node.json";
   //String url = "http://www.drupal7.mobileapplicationtesters.com/my_services/node.json";

   strResponse1 = makeWebForPostIdea(url,title,body);

   System.out.println("=========> Response from post  idea => "
     + strResponse1);

   return null;
  }

  @Override
  protected void onPostExecute(Void result) {
   // TODO Auto-generated method stub
   super.onPostExecute(result);

   pgb.setVisibility(View.GONE);

  }

public static String makeWebForPostIdea(String url123, String title,String body)
  {

      HttpURLConnection httpcon = null;

      JSONObject json = null;
      JSONObject jsonnode = null;

        try {
            JSONObject jsonvalue = new JSONObject();
            jsonvalue.put("value", body.toString());

            JSONArray array = new JSONArray();
            array.put(jsonvalue);

            jsonnode = new JSONObject();
            jsonnode.put("und", array);

            System.out.println("@@@@@@2    jsonnode=======>"+jsonnode.toString());

            json = new JSONObject();
            json.put("title",title);
            json.put("body", jsonnode);
            json.put("type","article");

            System.out.println("value of the combine node=======>"+json.toString());  

        } catch (JSONException e3) {
            // TODO Auto-generated catch block
            e3.printStackTrace();
        }

      try {
          httpcon = (HttpURLConnection) ((new URL(url123).openConnection()));
          httpcon.setDoOutput(true);
          httpcon.setRequestProperty("Content-Type", "application/json");
          httpcon.setRequestProperty("Accept", "application/json");
        httpcon.setRequestMethod("POST");

        String urlParameters =
                "type=" + URLEncoder.encode("page", "UTF-8") +
                "title=" + URLEncoder.encode(title, "UTF-8") +
                "body" + URLEncoder.encode(jsonnode.toString(), "UTF-8") ;

        httpcon.setRequestProperty("Content-Length", "" + 
                 Integer.toString(urlParameters.getBytes().length));

    } catch (ProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

      try {
        httpcon.connect();
         byte[] outputBytes = "{\"username\":\"uname\",\"password\":\"pass\"}".getBytes("UTF-8");
          OutputStream os = httpcon.getOutputStream();
          os.write(outputBytes);

          os.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:32:03.543

您在此处设置内容长度：

```
httpcon.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length)); 
```

但是您发送的内容来自这里：

```
byte[] outputBytes = "{\"username\":\"uname\",\"password\":\"pass\"}".getBytes("UTF-8");
OutputStream os = httpcon.getOutputStream();
os.write(outputBytes); 
```

所以报告的 Content-Length 与实际的内容长度不匹配。

忽略`httpcon.connect();`中间的，[它什么都不做，因为你已经连接了。](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#connect%28%29)

相反，您需要执行以下操作：

```
byte[] outputBytes = "{\"username\":\"uname\",\"password\":\"pass\"}".getBytes("UTF-8");
httpcon.setRequestProperty("Content-Length", Integer.toString(outputBytes.length()));
OutputStream os = httpcon.getOutputStream();
os.write(outputBytes); 
```

# java - 没有SpingIOC.jar我们怎么能实现Spring IOC

> ID：11914254
> 
> 赞同：0
> 
> 时间：2012-08-11T11:19:55.763
> 
> 标签：java, spring

Spring IOC 用于通过避免在类中创建对象而从 bean 中创建对象来消除紧密耦合。为此，我们需要 Spring IOC Jar。

现在我有一个疑问...

假设我们不使用 Spring IOC jar ..我们只使用 Spring.jar 并使用 ClassPathResource 和 XMLBeanFactory 我们仍然在完成同样的事情......

现在我们不是在不使用 Spring IOC Jar 的情况下完成与 Spring IOC 相同的事情吗......？

我们不是在 Class 内部而是使用 Bean 创建对象。这与我们在 Spring IOC 中实现的不一样吗......？

如果是这样，那么我们如何在不使用 SpringIOC jar 的情况下实现相同的目标。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:46:51.763

Java 类基本上不知道包含它们的 JAR 文件的名称。（并非总是如此，但大多数情况下，让他们意识到只会让人头疼的事情是个坏主意。）

现在，这意味着 Spring 的实现很大程度上与它所包含的 JAR 无关，实际上可以发现它可以作为单独的部分（控制反转容器是基础部分）或组合构建（通常称为`spring.jar`）。较新的版本往往只能以拆分的形式提供，因为它是一个需要整个 Spring 3 的罕见应用程序（它做了很多）。我猜您对此感到困惑：*相同*的类可以存在于*多个*JAR 文件中。

很多人所做的是使用包管理系统（例如，[Apache Maven](http://maven.apache.org/index.html)，虽然这不是唯一的）将他们依赖的东西——连同他们自己的代码——组装到他们的应用程序中，当确切的列表是什么时他们所在的文件不再具有相关性。（嗯，除了某些类型的管理报告，每一个额外的细节都有助于使报告看起来更重......）公平地说，使用这样的系统*并不*容易，但它比尝试做同样的工作要简单得多手和 Spring 现在已经足够复杂，值得采用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:36:45.783

不知道你说的是哪个版本的spring。但关键是我们可以重命名`SpringIOC.jar`为`Spring.jar`ie 两者可以相同。或者那些可能与版本不同（新旧）。

# php - 将值数组从表单传递到 sql 查询 WHERE IN 子句

> ID：11914257
> 
> 赞同：0
> 
> 时间：2012-08-11T11:20:32.817
> 
> 标签：php, mysql, arrays, forms

我有一个带有多个复选框的表单，这些复选框是从 MySQL 表中的唯一值生成的：

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<?php
    $query5="SELECT distinct from_user from tracks WHERE uploaded_page='$this_path_short' ORDER BY from_user";
    $result5=mysql_query($query5) or die(mysql_error());
    while ($row = mysql_fetch_array($result5)) {
        $from_user = $row['from_user'];
        echo "<input type=\"checkbox\" name=\"from_user[]\" value=\"AND ".$from_user."\" checked=\"checked\">".$from_user."<br>";
    }
?>
<input type="submit" name="submit" value="filter"><br> 
```

然后我想将“from_user”值的数组传递给页面上的另一个 MySQL 查询。我可以得到这样的值：

```
$names=implode(" ", $_POST['from_user']); 
```

但我不确定如何在以下 MySQL 查询中包含此数组：

```
$query1="SELECT * FROM tracks WHERE from_user IN **array goes here**)"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:29:41.607

```
$query1='SELECT * FROM tracks WHERE from_user IN ('.implode(',',$_POST['from_user']).')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:35:14.017

删除`AND`所以复选框值如下所示：

```
echo "<input type=\"checkbox\" name=\"from_user[]\" value=\"".$from_user."\" checked=\"checked\">".$from_user."<br>";
    } 
```

`IN`需要逗号分隔的值：

```
$names=implode(",", $_POST['from_user']);    
$query1="SELECT * FROM tracks WHERE from_user IN (".$names."))"; 
```

**！！！！但是：**请，请，请使用准备好的语句，因为您的代码对 SQL 注入是开放的：http: [//php.net/manual/de/mysqli.prepare.php](http://php.net/manual/de/mysqli.prepare.php)

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
  printf("Connect failed: %s\n", mysqli_connect_error());
  exit();
}

$result = null;
$names = implode(",", $_POST['from_user']);  

/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT * FROM tracks WHERE from_user IN (?)")) {

  /* bind parameters for markers */
  $stmt->bind_param("s", $names);

  /* execute query */
  $stmt->execute();

  /* bind result variables */
  $stmt->bind_result($result);

  /* fetch value */
  $stmt->fetch();

  print_r($result);

  /* close statement */
  $stmt->close();
}

/* close connection */
$mysqli->close(); 
```

# java - 使用多个重量的组合测量一个重量

> ID：11914260
> 
> 赞同：0
> 
> 时间：2012-08-11T11:20:48.923
> 
> 标签：java, algorithm

```
 I'm very new to java, so i need a help . here is my problem: 
```

我有两个重量 1 克和 5 克。现在用户将给出他/她想要计算的重量，用户还将给出 1 克和 5 克的计数。如果程序可以计算，则返回 true，否则返回 false。我给你举个例子：

1 克的计数是 5（比方说） 5 克的计数是 3（比方说） 重量来测量 12 克

通过使用两个 1 克和两个 5 克，我可以制作 12 克。所以它会返回true。

请帮我这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:35:07.530

因为这是家庭作业，所以这里是解决算法的提示

**加法方式**

首先，您应该从要测量的重量中取出 5 的倍数。剩余重量应等于 1 克重量的数量。

例如：

> 当输入是`3x5gm`并且`2x1gm`您想要称重时`12gms`

```
12 / 5 = 2 (5 gram weights)
12 % 5 = 2 (1 gram weights) 
```

如果这些数字小于您拥有的权重数量，那么您就有答案了。

**减法**

首先，您应该从要测量的重量中取出 5 的倍数。

例如：

> 当输入是`3x5gm`并且`2x1gm`您想要称重时`13gms`

```
13 / 5 = 2 (5 gram weights)
13 % 5 = 3 (1 gram weights) 
```

由于您没有足够的重量这样做，那么您可以看看您是否可以用 1 个额外的 5gm 和剩余的`5-1gm weights`ie来管理剩余部分`1x5gm`，`5-3=2x1gm weights`因此答案将是`3x5gm`和`2x1gm`

# asp.net - 在 ASP.NET 中的几个动态创建的 Div 中从 WebService 异步填充数据？

> ID：11914264
> 
> 赞同：0
> 
> 时间：2012-08-11T11:21:04.250
> 
> 标签：asp.net, web-services, gridview, dynamic, asynchronous

***问题总结：***

我有一页有一个文本框和一个按钮。单击按钮时，它会读取一些 XML 并获取以下数据。

*   获取要连接的数据库连接器列表。甲、乙、丙
*   获取链接到每个连接器的查询列表。A[0,1,2], B[0], c[0, 1, 2, 4]

现在遍历每个数据库连接器、连接、运行每个查询、获取数据、创建动态控件和面板并以这种方式显示。

> ---A----
> Gridview A[0] 结果
> Gridview A[1] 结果
> Gridview A[2] 结果
> 
> ---B---
> Gridview B[0] 结果

如果我尝试同步连接连接器，它可以正常工作并显示。页面冻结了几秒钟，但最后当所有操作完成时，它会正确显示。当任何连接器关闭时会发生问题。例子。如果 A 关闭，那么直到我们收到连接器超时消息，B 和 C 也会等待并且页面加载时间增加。

现在有一个业务需求，它应该异步运行，这意味着所有连接器应该像并行一样同时连接和查询。我试图通过使用**WebService**来实现这一点。但徒劳无功。创建并关闭 Div，然后填充网格/数据。由于 div 是动态创建的，我不知道如何将 gridviews 放置在这些 div 中。

我目前的逻辑是：

```
Loop through Connectors {
 Create <Div class="Container">
 Create <Div class="conLabel">Label</div>

 Loop through Queries for this connector {
   WebSevice _WS = new WebService();
   __WS.GetDataCompleted += new GetDataCompletedEventHandler(__WS_GetDataCompleted);
   __WS.GetDataAsync(Parameters Here);
 }
 Create </Div>
}

void __WS_GetDataCompleted(object sender, GetDataCompletedEventArgs e) {
  Get result here from e.Result
  Create New gridview and bind to it.      
} 
```

它是这样显示的。

> ---A----
> ---B---
> 
> Gridview A[0] 结果
> Gridview A[1] 结果
> Gridview A[2] 结果
> 
> Gridview B[0] 结果

我不确定这是否是正确的方法。我对 WebService 很陌生。我如何在一些本身是动态创建的 div 中创建网格视图。

有人可以帮我找到任何其他方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:15:37.930

我通过添加 ASP.NET 面板而不是将动态文字控件创建为 .

```
Loop through Connectors {
 Panel myPanel = new Panel();
 myPanel.ID = "UNIQUEID"; // Using this ID i am identifying the container

 Loop through Queries for this connector {
   WebSevice _WS = new WebService();
   __WS.GetDataCompleted += new GetDataCompletedEventHandler(__WS_GetDataCompleted);
   __WS.GetDataAsync(Parameters Here);
 }
} 
```

# c++ - C ++在强制转换运算符和可变参数构造函数之间混淆

> ID：11914266
> 
> 赞同：7
> 
> 时间：2012-08-11T11:21:54.563
> 
> 标签：c++, c++11, variadic-templates, typecast-operator

C++（更具体地说，MinGW 的 g++ 实现）正在变得混乱。我有一个数学向量类，其中包含任意数量的任意类型的元素。元素类型和元素数量在编译时指定。

Vector 类在它的构造函数之一和我称之为“resize”运算符之间变得混淆了。resize 运算符允许程序员将一个大小的向量转换为另一个任意大小的向量。如果转换向量的元素多于基向量，则用 1 填充。这是实现：

```
/*
 * resize operator:
 * T is the type of element the base vector holds
 * N is the number of elements the base vector holds
 * rN is the size of the new vector
 */
template<typename T, unsigned int N, unsigned int rN>
operator Vector<T, rN>() const 
{
    Vector<T, rN> resize;

    for (unsigned int i = 0; i < rN; i++)
    {
        resize[i] = i < N ? this->elements[i] : 1;
    }

    return resize;
} 
```

vector 类还有一个类型安全的可变参数构造函数，它可以采用任意数量的任意元素组合（必须是 T 类型）和任意数量的 Vectors（可以包含任意数量的元素并且必须是 T 类型），所以只要添加到提供的向量中的元素数的裸元素数等于构造向量包含的元素数。

因此这将是有效的：

```
vec3 foo(vec2(1, 2), 3); 
```

但不是这个。

```
vec3 bar(vec4(1, 2, 3, 4), 5); 
```

我确保在编译时通过使用计数器递归所有元素来提供正确数量的元素，然后我使用静态断言来确保计数器以向量可以包含的元素数量结束。这通常效果很好，除了以下代码：

```
vec4 bar(1, 2, 3, 4);
(vec3) bar; //PROBLEM HERE 
```

发生的事情是 C++ 认为 (vec3) bar 正在请求可变参数构造函数，而实际上它应该调用 resize 运算符。我试过让它们明确，但没有奏效。当我有上述代码而不是可变参数构造函数时，如何确保 C++ 使用 resize 运算符？

简而言之，我如何告诉 C++ 使用它：

```
//resize operator
template<typename T, unsigned int N, unsigned int rN>
Vector<T, N>::operator Vector<T, rN>(); 
```

而不是这个：

```
//constructor
template<typename T, unsigned int N, typename ... Args>
Vector<T, N>::Vector(Args ... arguments); 
```

当我有这个代码时：

```
(vec3) someVec4; 
```

如果不清楚，则 vec3 和 vec4 定义如下：

```
typedef Vector<float, 3> vec3;
typedef Vector<float, 4> vec4; 
```

**编辑**：

新闻，大家！即使我使用 static_cast(someVec4) 它仍然使用 vec4 参数调用 vec3 构造函数。我不知道为什么。

**另一个编辑**：

使构造函数显式允许隐式转换工作，但不允许显式转换。也就是说，这段代码有效：

```
vec3 foo = someVec4; 
```

但是这段代码仍然给我一个静态断言失败：

```
vec3 foo = static_cast<vec3>(someVec4); 
```

这基本上没有意义，因为我显式地声明了可变参数构造函数，因此不应该在那里调用它。

此外，根据要求，这是一个[SSCCE](http://pastebin.com/1Rg5QzJx)

TL;DR 版本是，当我尝试显式调用类型转换运算符时，我的代码正在调用显式构造函数，但当我尝试隐式调用它时却没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:01:41.387

没有混乱。构造函数总是优先于转换函数，并且在您的情况下，您的类型*始终*可以从任何类型的参数构造。这是一个大大简化的示例：

```
struct foo {
    template<typename T>
    foo(T t);
}

template<typename T>
foo::foo(T)
{ static_assert( std::is_same<T, int>::value, "" ); } 
```

注意模板构造函数的声明（我故意将声明与定义分开）：通过采用`T`，可以接受*任何*类型的初始值设定项。`std::is_constructible<foo, T>::value`对所有人都成立`T`，即使 only`int`会产生一个正确的程序。其他类型将`static_assert`在构造函数实例化时触发。

有一种秘方可以实现你想要的，它的名字叫 SFINAE——希望你以前听说过它。松散地解释一下（如果你没有），如果你将一个潜在的错误从模板的主体移动到声明中的某个地方，那么在重载解决过程中会丢弃会产生这种错误的特化。把它放在代码中：

```
struct foo {
    template<
        typename T
        , typename std::enable_if<
            std::is_same<T, int>::value
            , int
        >::type...
     >
     foo(T t);
}; 
```

这将是前一个人为示例的 SFINAE 版本。有了这样的声明，那么类似的东西`foo f = 42.;`就不会产生与以前相同的错误。编译器会抱怨，例如没有适当的从`double`to转换`foo`，就好像构造函数根本不存在一样。这就是我们想要的，因为如果不存在这样的构造函数，那么规则规定将搜索适当的转换运算符。（好吧，在这种情况下这并不是一个很大的帮助，`double`但没关系。）

请注意，有几种方法可以使用 SFINAE，而这恰好是我最喜欢的一种形式。您可以通过了解 SFINAE 找到其他人。（为了记录，正确使用模板别名并没有那么可怕，它最终看起来像`EnableIf<std::is_same<T, int>>...`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T11:52:20.557

使您的构造函数显式并使用：

```
vec4 someVec4; 
// ....
vec3 someVec3 = someVec4; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T15:42:37.957

查看您的[SSCCE](http://pastebin.com/1Rg5QzJx)，您可以应用一些清理步骤。

通用构造函数模板的大问题是它匹配*所有内容*，除非非模板构造函数完全匹配。如果你连 cv 限定都错了，通用构造函数模板将被选中。当我遇到类似问题时，建议我添加一个标记值作为第一个参数：

```
enum my_marker { mark };
//...
template<typename T, unsigned int N>
class Vector
{
    //...
    template<typename ... Args>
    explicit Vector(my_marker, Args ... args);
};
//...
Vector<int, 4>  va( mark, a1, a2 ); 
```

您的其他构造函数不会使用此标记，因此现在您可以区分它们。顺便说一句，您与可以`T`取值的构造函数有另一个重叠：

```
template<typename T, unsigned int N>
class Vector
{
    //...
    Vector( T empty );
    Vector( std::initializer_list<T> set );
    //...
};
//...
Vector<int, 4>  vb{ 5 };  // always chooses the list ctr
Vector<int, 4>  vc( 6 );  // I think this uses the single-entry ctr. 
```

当您将数组作为函数参数时，默认情况下它将被视为指针，忽略任何大小信息。如果需要保持大小，则必须通过引用传递：

```
template<typename T, unsigned int N>
class Vector
{
    //...
    Vector( T const (&set)[N] );  // "T set[N]" -> "T *set"
    //...
};
//...
int             aa[ 4 ] = { 1, 2, 3, 4 }, bb[ 3 ] = { 5, 6, 7 };
Vector<int, 4>  vd( aa );  // The new signature won't accept bb. 
```

这种数组到指针的转换可以防止数组直接赋值，但在计算特殊函数时它们是隐式可赋值的。这意味着不需要您的赋值运算符；默认代码将做正确的事情。

你听说过迭代器吗？如果是这样，那么使用这些加上委托构造函数、标准算法和初始化程序可以减少您的代码。

```
#include <algorithm>
#include <cassert>
#include <initializer_list>

enum mark_t  { mark };

template< typename T, unsigned N >
class Vector
{
    // The "set" functions are unnecessary, see below.
public:
    // The automatically defined copy-ctr, move-ctr, copy-assign, and
    // move-assign are OK.

    T elements[N];

    Vector()  : elements{}  {}
    // Vector()  : Vector( T{} )  {}  // ALTERNATE
    // Can be removed if following constructor uses a default argument.

    Vector(T empty)
    // Vector(T empty = T{})  // ALTERNATE
    { std::fill( elements, elements + N, empty ); }

    Vector(T const (&set)[N])
    { std::copy( set, set + N, elements ); }

    Vector(std::initializer_list<T> set)
        : elements{}
    {
        assert( set.size() <= N );
        std::copy( set.begin(), set.end(), elements );
        // If you were willing to use std::for_each, why not use a more
        // appropriate algorithm directly?  The lambda was overkill.
        // WARNING: there's an inconsistency here compared to the cross-
        // version constructor.  That one fills unused spots with ones,
        // while this one does it with zeros.
        // WARNING: there's an inconsistency here compared to the single-
        // value constructor.  That one fills all elements with the same
        // value, while this one uses that value for the first element but
        // fills the remaining elements with zeros.
    }

    template<typename ... Args>
    explicit Vector( mark_t, Args ... args)
        : elements{ args... }
        //: elements{ static_cast<T>(args)... }  // ALTERNATE
    {}
    // Array members can now be directly initialized in the member part
    // of a constructor.  They can be defaulted or have each element
    // specified.  The latter makes the private "set" methods unnecessary.
    // The compiler will automatically issue errors if there are too
    // many elements for the array, or if at least one "Args" can't be
    // implicitly converted to "T", or if you have less than "N" elements
    // but "T" doesn't support default-initialization.  On my system, the
    // example "main" flags int-to-float conversions as narrowing and post
    // warnings; the alternate code using "static_cast" avoids this.

    template < unsigned R >
    explicit Vector( Vector<T, R> const &v )
        : Vector( static_cast<T>(1) )
    { std::copy( v.elements, v.elements + std::min(R, N), elements ); }

    T &operator [](unsigned int param)
    { return this->elements[param]; }
    const T &operator [](unsigned int param) const
    { return this->element[param]; }
};

typedef Vector<float, 2> vec2;
typedef Vector<float, 3> vec3;
typedef Vector<float, 4> vec4;

int main()
{
    vec4 someVec4(mark, 1, 2, 3, 4);
    vec3 foo = static_cast<vec3>(someVec4);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T13:53:35.160

我认为让您的代码正常工作的最简单方法是用转换构造函数替换转换运算符。由于该构造函数比可变参数构造函数更专业，因此它应该始终具有优先权。

# javascript - 是否可以使用 CSS 从底部开始将 div 放置在另一个顶部？

> ID：11914268
> 
> 赞同：5
> 
> 时间：2012-08-11T11:22:20.460
> 
> 标签：javascript, html, css

我有一个使用 HTML、CSS 和 JS 制作的聊天窗口。我想将消息从下到上定位。示例：底部的第一个消息 div，第一个顶部的第二个消息 div 依此类推。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:50:12.817

![在此处输入图像描述](../Images/d8e691ecf4ac0efb836106b250af5b9a.png)

* * *

我知道这不是您问题的答案，而是您应该考虑在聊天窗口中实施的更好选择。

**最新的评论应该在底部，这就是大多数基本聊天窗口的工作方式。**

接下来，您可以使用 css 来完成这一切： **因为这样的设计需要使用表格行或列表元素** 显然您必须使用 javascript 来使用 ajax，以便您可以异步获取消息和个人资料图片等用户记录

* * *

**CSS：**

```
<style type="text/css">
table#chat_window {
}
tr#message_row {
}
td#profile_pic {
}
td#message {
}
</style> 
```

**HTML结构：**

```
<table id="chat_window">
  <tr id="message_row">
    <td id="profile_pic"></td>
    <td id="message"></td>
  </tr>
</table> 
```

**或使用列表：**

```
<ul id="chat_window">
  <li id="message_row">
    <div id="profile_pic"></div>
    <div id="message"></div>
  </li>
</ul> 
```

* * *

现在你只需要使用 javascript:ajax 来获取值并添加一个孩子：

1.  如果您使用的是基于表格的聊天窗口，那么您必须使用 javascript 获取表格 ID，并`<tr>`为您获取的每个值/消息添加行元素。
2.  如果您使用基于列表的聊天窗口，那么您必须使用 javascript 获取列表 ID，并`<li>`为您获取的每个值/消息添加列表元素。

    * * *

如果有任何错别字，我很抱歉，我的时间更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T11:33:52.627

我无法想象一个纯 CSS 解决方案。但是使用 jQuery，如果你的项目已经有了这个库，你可以这样写：

```
$(':button').click(function() {
   var message = $('input[type=text]').val();
    $('#chat').prepend('<div class="line">'+message);
}); 
```

**演示：http:** [//jsfiddle.net/Vbd67/1/](http://jsfiddle.net/Vbd67/1/)

**我根据评论更改`append`为`prepend`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:29:55.077

你可以使用 jQuery 来做到这一点；

```
var first = $('div > div:first-child');
first.appendTo(first.parent()); 
```

要处理几个元素，您可以这样做：

```
$('div > div').each(function() {
    $(this).prependTo(this.parentNode);
}); 
```

***[这](http://jsfiddle.net/blasteralfred/SLPaY/1/)***是一个有效的现场演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T11:54:53.267

您应该使用`display:table-cell`和的组合`vertical-align:bottom`。我使用 Sotiris 的小提琴并修复了它的 CSS。

HTML是

```
<div  style="display:table; height:200px;">
    <div style="display:table-row">
            <div id="chat" style="width:400px; border:1px solid black;display:table-cell; vertical-align:bottom">
            </div>
    </div>

</div>
<input type="text"><input type="button" value="post">
​ 
```

这是 JavaScript 代码

```
$(':button').click(function() {
   var message = $('input[type=text]').val();
    $('#chat').append( $('<div/>').text(message) );
});
​ 
```

如果有问题，请告诉我。

这是[小提琴](http://jsfiddle.net/fBCHQ/2)

我一直在寻找更好的解决方案，因为表格布局对我来说总是很可疑，但是我发现了关于它[的 css-tricks 文章](http://css-tricks.com/centering-in-the-unknown/)，它们和我做的一样......所以我想这个解决方案是正确的。

添加 - 保持滚动到底部代码

由于底部有新消息，我们需要保持滚动到底部。我更新了小提琴链接

# java - Selenium：从数组中的字符串匹配 xpath

> ID：11914270
> 
> 赞同：1
> 
> 时间：2012-08-11T11:22:26.963
> 
> 标签：java, arrays, selenium, webdriver

使用 Selenium WebDriver，我试图通过从 Excel 文件中读取的字符串来选择网页上的下拉菜单元素：

```
 Xls_Reader data = new Xls_Reader("src//com//testexcel//data//data3.xlsx");
        String values = data.getCellData("DropList", "Index_Value", 2);
        String selections[] = values.split(","); 
```

它们采用这种形式：建筑、工程、法律等。

我尝试选择的每个元素如下所示：

```
<div class="ui-dropdownchecklist-item ui-state-default" style="white-space: nowrap;">
<input id="ddcl-selInd-i3" class="active" type="checkbox" tabindex="0" index="3" value="11">
<label class="ui-dropdownchecklist-text" for="ddcl-selInd-i3" style="cursor: default;">Construction</label>
</div>

<div class="ui-dropdownchecklist-item ui-state-default" style="white-space: nowrap;">
<input id="ddcl-selInd-i5" class="active" type="checkbox" tabindex="0" index="5" value="03">
<label class="ui-dropdownchecklist-text" for="ddcl-selInd-i5" style="cursor: default;">Engineering</label>
</div> 
```

这是代码：

```
package com.selftechy.parameterization;

import java.util.ArrayList;
import java.util.List;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;

public class JobServe {

    static WebDriver driver = new FirefoxDriver();

    public static void main(String[] args) throws InterruptedException {

        driver.get("https://www.jobserve.com/gb/en/Candidate/Home.aspx");
        driver.findElement(By.xpath(".//*[@id='ddcl-selInd']/span")).click();

        readExcelWords();

    public static void readExcelWords() {
        Xls_Reader data = new Xls_Reader("src//com//testexcel//data//data3.xlsx");
        String values = data.getCellData("DropList", "Index_Value", 2);
        String selections[] = values.split(",");

//help  
List<WebElement> iList = driver.findElements(By.xpath("//*[@id='ddcl-selInd-ddw']"));
    for (int i=0; i<selections.length; i++) {
    driver.findElement(By.xpath("//*[text()='" + selections[i] + "']")).click(); 
```

我知道 xpath 是错误的，并且可能是我使用数据类型的方式。我需要一种基于数组值进行 xpath 选择的方法。我对 Java 和 Selenium 比较陌生，希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:33:06.557

尝试

```
findElement(By.xpath("//label[.='xyz']/../input")); 
```

`xyz`建筑，工程等之一在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:01:24.680

我会建议尝试使用名称并使用

```
findElement(By.name("xyz")); 
```

在您的输入代码中使用*名称属性后。*

就像是 -

```
<div class="ui-dropdownchecklist-item ui-state-default" style="white-space: nowrap;">
<input name ="Construction" id="ddcl-selInd-i3" class="active" type="checkbox" tabindex="0" index="3"value="11">
<label class="ui-dropdownchecklist-text" for="ddcl-selInd-i3" style="cursor: default;">Construction</label>
</div> 
```

我可以使用上面给出的一些伪代码使用这种方法找到一个元素。

# python - 使用 Python 从列表项中删除标点符号

> ID：11914276
> 
> 赞同：0
> 
> 时间：2012-08-11T11:23:21.580
> 
> 标签：python

```
from glob import glob
pattern = "D:\\report\\shakeall\\*.txt"
filelist = glob(pattern)
def countwords(fp):
    with open(fp) as fh:
        return len(fh.read().split())
print "There are" ,sum(map(countwords, filelist)), "words in the files. " "From directory",pattern
import os
import re
import string
uniquewords = set([])
for root, dirs, files in os.walk("D:\\report\\shakeall"):
    for name in files:
        [uniquewords.add(x) for x in open(os.path.join(root,name)).read().split()]
wordlist = list(uniquewords) 
```

此代码计算唯一字数和总字数。但是，问题是，如果我写 len(uniquewords) ，它会显示不合理的数字，因为它可以识别例如 'shake' 'shake!' “摇一摇”和“摇一摇？” 作为不同的独特词。我试图通过制作列表并修改它来从 uniquewords 中删除标点符号，但一切都失败了。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:43:17.157

1.  使用带有`\w+`模式的正则表达式来匹配单词并排除标点符号。
2.  在 Python 中使用计数时`collections.Counter`

此代码的示例数据附加在末尾：

```
import re
from collections import Counter

pattern = re.compile(r'\w+')

with open('data') as f:
    text = f.read()

print Counter(pattern.findall(text)) 
```

给出：

```
Counter(
{'in': 4, 'the': 4, 'string': 3, 'matches': 3, 'are': 2,
'pattern': 2, '2': 2, 'and': 1, 'all': 1, 'finditer': 1,
'iterator': 1, 'over': 1, 'an': 1, 'instances': 1,
'scanned': 1, 'right': 1, 'RE': 1, 'another': 1, 'touch': 1,
'New': 1, 'to': 1, 'returned': 1, 'Return': 1, 'for': 1,
'0': 1, 're': 1, 'version': 1, 'Empty': 1, 'is': 1,
'match': 1, 'non': 1, 'unless': 1, 'overlapping': 1, 'they': 1, 'included': 1, 'The': 1, 'beginning': 1, 'MatchObject': 1,
'result': 1, 'of': 1, 'yielding': 1, 'flags': 1, 'found': 1,
'order': 1, 'left': 1}) 
```

数据：

> re.finditer(pattern, string, flags=0) 返回一个迭代器，该迭代器在字符串中的 RE 模式的所有非重叠匹配中产生 MatchObject 实例。从左到右扫描字符串，并按找到的顺序返回匹配项。空匹配包含在结果中，除非它们触及另一个匹配的开始。2.2 版中的新功能。

# objective-c - 数组不显示值

> ID：11914279
> 
> 赞同：1
> 
> 时间：2012-08-11T11:23:30.437
> 
> 标签：objective-c, ios, cocoa-touch, nsarray

**你好！**

我尝试从数组（**prepTime**）中提取值，但它没有显示它们。当我编译程序时，我得到一个错误：

```
0xec80b0:  cmpl   (%eax), %ecx        Thread 1: EXC_BAD_ACCESS (code=1, address=0xff31e10) 
```

**在这里，我创建了数组：**

```
{
    NSArray *tableData;
    NSArray *thumbnails;
    NSArray *prepTime;    //Here I created the array
} 
```

**在这里，我用值填充它：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Initialize table data
    tableData = [NSArray arrayWithObjects:@"Egg Benedict", ... @"Angry Birds Cake", @"Ham and Cheese Panini", nil];

    // Initialize thumbnails
    thumbnails = [NSArray arrayWithObjects:@"egg_benedict.jpg", ... @"angry_birds_cake.jpg", @"ham_and_cheese_panini.jpg", nil];

    //Initialize prep time
    prepTime=[NSArray arrayWithObjects: @"90 min", "60 min", "45 min", ... "10 min", "60 min", "40 min",   nil];
} 
```

如您所见，我的代码中定义了三个数组并填充了值，但只有“ **prepTime** ”数组不会在我的表格单元格中显示它的值，而是在编译时给出错误。

***为什么会发生？***

**非常感谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:27:20.377

看起来您`@`在某些字符串文字中遗漏了一些符号：

```
prepTime=[NSArray arrayWithObjects: @"90 min", "60 min", "45 min", ... "10 min", "60 min", "40 min",   nil];
//                                             ^Here     ^Here         ^Here     ^Here     ^Here 
```

尝试访问生成的 C 字符串`NSString`会导致访问错误。

# ios - UITextView如何实现搜索功能？

> ID：11914282
> 
> 赞同：1
> 
> 时间：2012-08-11T11:23:49.703
> 
> 标签：ios, search, uitextview, uisearchbar

我有40多个意见与自己的各自`UITexView`。我想实现一个搜索功能，允许用户在`UITextViews`. 实际上，我什至不知道如何实现 1 的搜索功能`UITextView`。因此，我根本不知道这是否可能。

我已经在网上搜索并在这里寻找它，但没有找到我想要的东西。

我很感激你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:36:36.383

这是一个非常简单（我可以说很明显吗？）的任务。想一想。在文本视图中搜索是什么意思？嗯，这意味着获取它的文本并查看一个特定的字符串（被搜索的那个）是否是文本的子字符串，如果是，它在里面的位置。假设您使用 UISearchBar 来保存要搜索的文本：

```
NSString *subs = searchBar.text;
NSString *wholeText = textView.text;

NSRange r = [wholeText rangeOfString:subs];
if (r.location == NSNotFound)
{
    // The term to be searched couldn't be found...
}
else
{
    // The string to be searched for is in the text view, r.location contains where exactly it is.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:34:48.090

您可以像这样在 TextView 中搜索文本：

```
[TextView.text rangeOfString:] 
```

搜索 UITextView 没有内置控制器，您必须使用上述功能自行实现此功能。

# c - 如何使用结构正确地将文件的内容传递给 qsort？

> ID：11914284
> 
> 赞同：1
> 
> 时间：2012-08-11T11:24:16.060
> 
> 标签：c, arrays, struct

我试图让程序读取一个文本文件，其中包含诸如“1001 姓名 姓氏 10 20 30”之类的信息、学生人数、姓名、姓氏和他的 3 个年级。这是我的代码：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>

 struct Student {
     int number;
     char name[30];
     char surname[30];
     int midterm1,midterm2,midterm3;
 } Student;

 int comp(const void * aa, const void * bb)
 {
    struct Student a = *(struct Student*)aa;
    struct Student b = *(struct Student*)bb;
    if (a.midterm1==b.midterm1)
            return 0;
    else if (a.midterm1 < b.midterm1)
            return -1;
    else
            return 1;
  } // comp

  int main(void)
  {
      int choice,studentnumber,midterm1,midterm2,midterm3,i,n;
      char surname;
      FILE *cfPtr;

      struct student *name;
      name = malloc( 10 * sizeof(Student));

      if ((cfPtr = fopen("grades.txt", "r")) == NULL)
          return 1;

      const int STUDENTSMAX = 100;
      struct Student students[STUDENTSMAX];
      char buff[1024];
      while(1)
      {
          memset(buff, 0, sizeof(buff));
          fgets(buff, sizeof(buff) -1, cfPtr);
          if (feof(cfPtr)) {
              break;
          }
          sscanf(buff, "%d %s %s %d %d %d", &students[i].number, students[i].name, students[i].surname, &students[i].midterm1, &students[i].midterm2, &students[i].midterm3);
          printf("%4d %15s %15s %10d %10d %10d\n", students[i].number, students[i].name, students[i].surname, students[i].midterm1, students[i].midterm2, students[i].midterm3);
          i++;
      } // while

      while (!feof(cfPtr))
      {
          fscanf(cfPtr, "%d%s%s%d%d%d", &students[i].number, &students[i].name,&students[i].surname, &students[i].midterm1, &students[i].midterm2, &students[i].midterm3);
          printf("%4d%15s%15s%10d%10d%10d\n", students[i].number, students[i].name,students[i].surname, students[i].midterm1, students[i].midterm2, students[i].midterm3);
           i++;
      } // while

      printf("What would you like to do? \n"
      "1- Sort according to midterm 1\n"
      "2- Sort according to midterm 2\n"
      "3- Sort according to midterm 3\n"
      "4- Exit\n");
      scanf("%d",&choice);

      scanf("%d",&choice);
      switch (choice) {
          case 1:
              qsort(students, i, sizeof(struct Student), comp);
              for (n = 0;  n < i; n++) {
                  printf("%4d %15s %15s %10d %10d %10d\n", students[n].number, students[n].name, students[n].surname, students[n].midterm1);
              } // for
              break;    
          case 2:
              qsort(students, i, sizeof(struct Student), comp);
              for (n = 0;  n < i; n++) {
                  printf("%4d %15s %15s %10d %10d %10d\n", students[n].number, students[n].name, students[n].surname, students[n].midterm2);
              } // for
              break;   
          case 3:
              qsort(students, i, sizeof(struct Student), comp);
              for (n = 0;  n < i; n++) {
                  printf("%4d %15s %15s %10d %10d %10d\n", students[n].number, students[n].name, students[n].surname, students[n].midterm3);
              } // for
              break;                          
      } // switch
  } // main?                  
  fclose(cfPtr);

  system("PAUSE");  
  return 0;
  } // the editor failed to find the corresponding '{' !OP should fix this 
```

此当前代码向我返回此错误：

```
95 C:\Users\UseR\Desktop\main.c [Warning] parameter names (without types) in function declaration 
95 C:\Users\UseR\Desktop\main.c [Warning] data definition has no type or storage class 
98 C:\Users\UseR\Desktop\main.c syntax error before string constant 
98 C:\Users\UseR\Desktop\main.c [Warning] data definition has no type or storage class 
 C:\Users\UseR\Desktop\Makefile.win [Build Error]  [main.o] Error 1 
```

该程序正在编译和运行没有任何问题，但它仍然给出错误并且根本没有排序。我在这里做错了什么？

编辑：这是我的输入文件；

```
100201 al beaver 40 50 70
100202 andrew matthews 30 90 75
100203 leah doga 60 55 80
100204 rob kurt 45 80 60
100205 aliah devon 65 70 50
100206 sally pir 70 40 85
100207 eric bekta 75 65 55
100208 nile coul 55 75 65
100209 mina umur 72 60 90
100210 john hot 73 63 87 
```

PS 是的，这是在任何人问之前的功课，我的时间不多了，而且我已经尝试了好几天，没有任何扎实的进展。我被问到的主要是“

> 1.  按降序排列所选考试的成绩，输出文件将仅包含三列：所选考试的姓名、姓氏和分数。
> 2.  定义一个名为“student”的结构体，将每个学生的姓名、姓名和分数存储在同一个变量名下。因此，文件中的所有数据都将存储在一个名为“学生”的新数据类型数组中。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T15:01:55.240

您在这段代码中有很多问题，我将逐节回顾我所做的更改。由于这是家庭作业，因此我不会发布完全修改过的程序，但您（或将来发现此内容的人）可以使用足够的信息来使您的代码正常工作。

第一件事是，您不需要类型定义的结构。只需声明一个结构：

改变这个：

```
 typedef struct {
 int number;
 char name[30];
 char surname[30];
 int midterm1,midterm2,midterm3;
 } Student; 
```

对此：

```
struct Student {
        int number;
        char name[30];
        char surname[30];
        int midterm1,midterm2,midterm3;
}; 
```

第二个问题是您的比较函数原型不正确。`qsort()`期望回调恰好采用 type 的两个参数`const void*`，因此将其更改为如下所示：

```
int comp(const void * aa, const void * bb) 
```

这将消除您看到的警告，但它实际上只是一个警告。你没有`qsort()`用正确的论据打电话。我们稍后再讨论，我在运行您的程序时发现了其他问题。

第三个问题是不处理文件打开失败，导致段错误（老师一般给段错误打分差），所以改成这样：

```
 if ((cfPtr = fopen("grades.txt", "r")) == NULL)
    printf("File cannot be opened.\n");
 else { 
```

只是退出，你不能运行，没有必要再用永远无法达到的逻辑缩进。例如：

```
 if ((cfPtr = fopen("grades.txt", "r")) == NULL) {
      printf("File cannot be opened.\n");
      return 1;
 } 
```

第四个问题是，您正在从文件中读取虚假输入，而不是对其进行测试。我更喜欢使用缓冲区`sscanf()`而不是`fscanf()`，但这只是偏好。无论如何，我就是这样做的：

```
 const int STUDENTSMAX = 100;
    struct Student students[STUDENTSMAX];
    char buff[1024];
    while (1)
    {
            memset(buff, 0, sizeof(buff));
            fgets(buff, sizeof(buff) -1, cfPtr);
            if (feof(cfPtr)) {
                    break;
            }
            sscanf(buff, "%d %s %s %d %d %d", &students[i].number, students[i].name, students[i].surname, &students[i].midterm1, &students[i].midterm2, &students[i].midterm3);
             printf("%4d %15s %15s %10d %10d %10d\n", students[i].number, students[i].name, students[i].surname, students[i].midterm1, students[i].midterm2, students[i].midterm3);
            i++;
    } 
```

请注意，`#include <string.h>`如果您走那条路线并用于`memset()`在每次迭代时重置缓冲区，则必须添加。另请注意，我*不会*取消引用`char[]`您在结构中声明的数组（请参阅`&`解释时的缺席`name`和`surname`给定的模式）。

然后，这段代码：

```
scanf("%d",&choice);

 while (choice != 4) {

  switch (choice) {

       case 1:
            qsort(students,10,sizeof(int),comp);
        printf("%4d%15s%15s%10d%10d%10d\n", students[i].number, students[i].name,students[i].surname, students[i].midterm1);

   }
   }        
   } 
```

...进入无限循环。一旦他们选择 1，结构将永远如此快速地排序和打印，因为没有选项可以处理任何其他退出选项，而且它飞得如此之快，用户无论如何都无法进入它。我把它改成了这样，这更明智一些：

```
 scanf("%d",&choice);
    switch (choice) {
            case 1:
            qsort(students, i, sizeof(struct Student), comp);
            for (n = 0;  n < i; n++) {
                     printf("%4d %15s %15s %10d %10d %10d\n", students[n].number, students[n].name, students[n].surname, students[n].midterm1, students[n].midterm2, students[n].midterm3);
            }
            break;
    } 
```

注意`break`. 您以前没有突破`switch()`或`while()`需要两者都做的地方。我修改的代码中没有`while()`周围`switch()`。

现在，修改后的调用`qsort()` *应该*向您显示输入未排序的原因。你有这个：

```
qsort(students,10,sizeof(int),comp); 
```

第二个参数可以是`i`，因为`i`知道你有多少元素。第三个参数需要是您要排序的*成员*的大小，而不是整数的大小（不太确定您是如何沿着这条路径徘徊的）。这就是排序结构被截断的原因。

从手册页：

> ```
>  void qsort(void *base, size_t nmemb, size_t size,
>               int(*compar)(const void *, const void *)); 
> ```
> 
> 描述 qsort() 函数对具有大小为大小的 nmemb 元素的数组进行排序。基本参数 > 指向数组的开头。

如您所见，它想要（按此顺序）：

*   你在排序什么？
*   它有多少成员？
*   每个成员的大小是多少？
*   我应该使用什么回调函数来做出决定？

由于您将在回调中往返`void *`，`Student`因此您需要对其进行修改：

```
int comp(const void * aa, const void * bb)
{
        struct Student a = *(struct Student*)aa;
        struct Student b = *(struct Student*)bb;
        if (a.midterm1 == b.midterm1)
                return 0;
        else if (a.midterm1 < b.midterm1)
                return -1;
        else
                return 1;
} 
```

有关详细信息，请参阅[此答案。](https://stackoverflow.com/a/2561703/50049)

最后一点，`main`应该是`int main(void)`，因为你不期待争论。

您还需要进行一些其他修改，或者您可以根据我提供的反馈快速修复您所拥有的内容。我摆脱了所有未使用的值，您分配的结构（不确定那是什么）并真正清理了它。如果你想取得好成绩，我建议你也这样做。

还有很多我没有完全解释，因为这个答案已经足够长了，我不想让你做更多的研究。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:56:36.200

比较函数应该有两个指向学生的指针。它应该是这样的：

```
 int comp(const Student * a, const Student * B)
 {
 if (a->midterm1==b->midterm1)
 return 0;
 else
 if (a->midterm1 < B->midterm1)
        return -1;
 else
  return 1;
 } 
```

qsort 调用也应该是这样的

```
qsort(students, 10, sizeof(Student), comp); 
```

最后为什么你将 10 传递给 qsort 它应该是从文件中读取的实际学生人数。

# php - 对动态生成的按钮执行不同的操作。PHP

> ID：11914286
> 
> 赞同：0
> 
> 时间：2012-08-11T11:24:18.787
> 
> 标签：php

我正在开发一个 PHP Gallery 应用程序，在这里需要一些帮助。实际上我有一个页面，其中直接显示来自特定目录的图像。显示的每张图像都有一个动态生成的提交按钮，用于分别删除相应的图像。

每个图像都有自己的提交按钮，用于删除该图像。作为 php 新手，我需要一些可以调用的方法来从实际或物理目录中仅删除该图像。

图像和按钮之间存在相似性，我对其进行了编码，因此每个图像及其各自的按钮都有名称，例如“img_1”，其按钮是“del_1”。

```
<form id="albumGallery" name="albumGallery" method="POST">
<?php

   $dir =  htmlspecialchars($_GET["p"]) . "/";
    $imgs = array();

    if ($dh = opendir($dir)) {
        while (($file = readdir($dh)) !== false) {
        if (!is_dir($file) && preg_match("/\.(bmp|jpe?g|gif|png)$/", $file)) {
            array_push($imgs, $file);
        }
    }

    closedir($dh);
} else {
    die('cannot open ' . $dir);
}
$i=0;
echo "<div id='images'>";
foreach ($imgs as $idx=>$img) {
    //$class = ($idx == count($imgs) - 1 ? ' class="last"' : '');
    echo '<table style="float: left; border: 1px solid #EFEFEF; border-radius: 5px; padding: 5px; margin: 5px;"><tr><td><a href="'. $dir . $img .'" rel="example_group" ><img src="' . $dir . $img . '" alt="' . $img . '" id="'. "img_" . $i .'"/>
    </a></td></tr><tr><td><input type="submit" class="ctrlDelete" value="" id="'. "del_" . $i .'"/></td></tr></table>';
    $i++;
}
  echo "</div>";
  ?></form> 
```

所以，我需要制定一个方法，以便每个按钮删除其各自的图像，并将表单发回给自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:26:57.870

对于您的问题，最好使用锚点。如果需要，您可以将它们设置为伪按钮。然后只生成类似的链接`delete.php?id=23`，它将执行适当的删除脚本并`$_GET`传递参数。

下面是非常简单的实现：

```
<table>

    <tr>
        <td>Title</td>
        <td>Image</td>
        <td>Actions</td>
    <tr>

    <?php

    foreach ($table as $row)
    {
        echo "<tr>";
        echo "<td>".$row['title']."</td>";
        echo "<td>".$row['image']."</td>";
        echo "<td>";
        echo "<a href='delete.php?id=".$row['id']."'>Delete</a>";
        echo "<a href='edit.php?id=".$row['id']."'>Edit</a>";
        echo "</td>";
        echo "</tr>";
    }

    ?>

</table> 
```

`delete.php`并`edit.php`应在最后包含以下代码：

```
<?php

header("Location: http://www.example.com/");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T04:40:45.657

@Edward Ruchevits 感谢您的帮助：D，

我没有使用 header(); 方法，但使用了 javascript 的 settimeout(); 重定向我的页面。这是我的代码...

```
<script type="text/javascript">
setTimeout("window.location = '<?php echo $_SERVER['HTTP_REFERER'] ?>'", 1);
</script>

<?php

$path =  htmlspecialchars($_GET["p"]);

unlink($path);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:34:59.590

我建议在你的 foreach 循环中添加表单标签，并将这些表单中的每一个发布给 self. 每个表单都可以简单地包含一个带有图像 ID 的隐藏字段。然后每次页面加载时，您只需检查图像的 $_POST 变量并在提供页面之前将其删除。

或者，您可以考虑使用图像旁边的复选框 - 然后一个表单和一个提交按钮可以同时执行多个删除 - 我认为效率更高。

希望这可以帮助！

# android - 如何将一组 TextViews 添加到 ListView 中？

> ID：11914289
> 
> 赞同：0
> 
> 时间：2012-08-11T11:25:23.713
> 
> 标签：android, listview, arraylist, textview

我得到了这段代码，它创建了 new `TextView`，然后将其添加到 Array 中`ArrayList<View>`，当它完成添加`TextViews`到 Array 时，它会将该 Array 添加到`ListView`. 但不知何故，我`ListView`的似乎是空的。知道我在做什么错吗？

这是代码：

```
ListView lv = (ListView) findViewById(R.id.listView1);
ArrayList<View> textvs = new ArrayList<View>();
for (int i=0; i<10;i++) {
TextView tv = new TextView(MainActivity.this);
tv.setText(""+i);
textvs.add(tv);
}
lv.addTouchables(portit); // lv is my listview 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:05:24.657

你应该使用`ArrayAdapter`. 你这样做是错误的。这是一个示例：

```
public class ArrayAdapterDemo extends ListActivity {
   String[] items = { "this", "is", "a", "really", "silly", "list" };
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       setListAdapter(new ArrayAdapter<String>(this,
         android.R.layout.simple_expandable_list_item_1,
         items)); 
   } 
```

# android - 使用 onResume 和 onPause

> ID：11914290
> 
> 赞同：3
> 
> 时间：2012-08-11T11:26:34.620
> 
> 标签：android, android-activity, onresume, onpause

假设我有两个活动，活动 1 和活动 2。我想从活动 1 导航到活动 2，从活动 2 获取一些信息并将其插入活动 1，而且我不想在离开时丢失活动 1 的先前状态。我怎样才能保存它的状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:06:20.857

您所描述的是使用该`Activity.startActivityForResult()`方法的完美经典理由。

这是谷歌在这个方法文档中写的：

> 启动一项您希望在完成后获得结果的活动。当此活动退出时，您的 onActivityResult() 方法将使用给定的 requestCode 调用

所以你应该做的是：从你的activity1开始活动的结果，并从activity2使用`setResult(int resultCode, Intent data)`你希望你的activity1返回的数据的方法，然后调用`finish()`（它将回到`onActivityResult()`activity1之前的相同状态..） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T12:01:41.783

覆盖[`onSaveInstanceState(Bundle)`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)以`activity1`保存您想要的任何数据，然后[`onRestoreInstanceState(Bundle)`](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)在同一活动中覆盖以取回值。使用[`Bundle`](http://developer.android.com/reference/android/os/Bundle.html)，您可以存储几乎任何您想要的数据。我会推荐这样的东西：

```
public class MainActivity extends Activity {
    ...
    public static final String DATA1_KEY = "data1";

    private boolean value1;
    ...

    @Override 
    protected void onSaveInstanceState (Bundle outState) {
        outState.putBoolean(DATA1_KEY, value1);
    }

    @Override
    protected void onRestoreInstanceState (Bundle savedInstanceState) {
        value1 = savedInstanceState.getBoolean(DATA1_KEY);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:43:48.327

你应该覆盖`onSaveInstanceState(Bundle savedInstanceState)`

请检查[此](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)答案以获取示例代码

或使用`SharedPreferences`. 检查[此](http://www.eigo.co.uk/Managing-State-in-an-Android-Activity.aspx)代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T12:30:32.203

用户在您的应用程序中执行启动新活动的操作。创建第二个活动时，当前活动将停止。如果用户随后按下返回按钮，则重新启动第一个活动。

当您的活动停止时，活动对象将保留在内存中，并在活动恢复时被调用。您不需要重新初始化在导致 Resumed 状态的任何回调方法期间创建的组件。系统还会跟踪布局中每个视图的当前状态，因此如果用户在 EditText 小部件中输入文本，则该内容会保留，因此您无需保存和恢复它。

**注意**：即使系统在停止时破坏了您的活动，它仍会在 Bundle（键值对的 blob）中保留 View 对象（例如 EditText 中的文本）的状态，并在用户导航返回时恢复它们到同一个活动实例。
CommonsWare[这里](https://stackoverflow.com/questions/4204356/android-wont-save-the-current-state-of-an-activity/4204507#4204507)说：

> 当用户“按下 BACK 按钮”时，来自 onSaveInstanceState()（如果有）的 Bundle 将被丢弃，因为用户已指示他们已完成活动。onSaveInstanceState() Bundle 用于用户尚未说他们完成活动（例如，他们接受了来电）但Android 选择销毁活动以释放RAM 的情况。

文件说：

> 请注意，将持久数据保存在 onPause() 而不是 onSaveInstanceState(Bundle) 中很重要，因为后者不是生命周期回调的一部分，因此不会在其文档中描述的所有情况下都被调用。

换句话说，将非 View 对象的保存/恢复代码放在 onPause() 和 onResume() 中，而不是 onSaveInstanceState(Bundle) 和 onRestoreInstanceState(Bundle) 中。**最后我猜你不需要保存任何状态，如果你只有 View 对象**，如果你有任何其他可以使用的状态`preferences`，`file`或者`sqlite`将它们保存`onPause()`并检索它们`onResume()`。

您可以在这些页面中查看更多详细信息：
[停止和重新启动 Activity](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=5&ved=0CHIQFjAE&url=http://developer.android.com/training/basics/activity-lifecycle/stopping.html&ei=a0QmUKq3OsrU0QWwr4DACg&usg=AFQjCNEYzqOs1SHkxgkHvNrztfbzY1ytPQ&sig2=aAF8Kvn8JxrkCgof6nD9iQ)
[保存 Android 中的 Activity 状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android/2909211#2909211)
[Android 不会保存 Activity 的当前状态](https://stackoverflow.com/questions/4204356/android-wont-save-the-current-state-of-an-activity)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T12:04:38.100

如果您只想在运行时保持数据活动，请考虑使用静态成员。然后，您可以从任何活动中访问和操作这些成员。例如：

```
public class FirstActivity extends Activity
{
    public static String data = null;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(...);
        data = "This is a test!";
    }
} 
```

从您的第二个活动中，您可以访问这些静态变量，例如

```
public class SecondActivity extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(...);
        if(FirstActivity.data!=null)
        {
            //You can use it:
            System.out.println(FirstActivity.data);
        }
    }
} 
```

当然，您可以添加 getter/setter 函数以使其更安全、更优雅。

如果您想存放更长时间，请考虑使用：

*   [共享首选项](http://developer.android.com/reference/android/content/SharedPreferences.html)
*   [SQLite](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)
*   或将您的数据存储在在线数据库中。

# ruby-on-rails - 禁用rails中的视图和控制器？

> ID：11914296
> 
> 赞同：0
> 
> 时间：2012-08-11T11:27:15.920
> 
> 标签：ruby-on-rails, api

我想使用 GRAPE（api gem）实现一个仅提供 api 的 rails 应用程序，该应用程序提供一些 json 内容。因为我不需要视图和控制器的功能，所以我想知道是否可以禁用这两个功能。有什么建议吗？还是我应该忽略它们，因为它们无论如何都不会使用太多的内存和资源？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:36:02.007

网上有几个资源展示了最小的 Rails 设置的样子。看看 railscast 模块化情节：[http ://railscasts.com/episodes/349-rails-modularity](http://railscasts.com/episodes/349-rails-modularity)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T11:38:01.673

正如您所提到的，禁用未使用的组件绝对值得，这可以提高速度并减少 RAM 消耗。这是一篇关于它的有趣[帖子](http://pivotallabs.com/users/jdean/blog/articles/1419-building-a-fast-lightweight-rest-service-with-rails-3-)。比这更好的是，还有特殊版本的 rails 旨在满足这种需求：[rails-api](https://github.com/spastorino/rails-api)

# ios4 - 无法将自定义字体添加到 iOS 4.3

> ID：11914300
> 
> 赞同：0
> 
> 时间：2012-08-11T11:27:59.923
> 
> 标签：ios4, custom-font

我知道这个问题已经被问过好几次了，我已经尝试了所有提到的步骤，但它仍然对我不起作用:(

我有字体文件名“spyv3b.ttf”。我将它添加到我的项目中，在 info.plist 文件中将其名称添加为“spyv3b.ttf”。它也被复制到捆绑资源中。我在字体书中安装了这个字体，它被命名为“Spylord Bold”。我通过以下方式签入了我的项目：

`NSLog(@"%@",[UIFont FontWithName:@"Spylord Bold" size:22]);`

它返回空值。谁能告诉我哪里错了？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:02:12.407

这很容易，但有点棘手。按照列出的步骤操作：

*   在“资源”标题下的项目中添加字体 .ttf 文件
*   在项目 info.plist 文件中添加所有字体详细信息。
*   使用 NSLog(@"%@",[UIFont familyNames]); 检查您所需的字体在 Xcode 字体系列中是否可用

## 控制台输出：

2012-08-12 07:49:27.278 Quiz[1134:c07]（吞武里，“Snell Roundhand”，“Academy Engraved LET”，“Marker Felt”，“Geeza Pro”，“Arial Rounded MT Bold”，“Trebuchet MS ”，Arial，Marion，“Gurmukhi MN”，“Malayalam Sangam MN”，“Bradley Hand”，“Kannada Sangam MN”，“Bodoni 72 Oldstyle”，Cochin，“Sinhala Sangam MN”，“Hiragino Kaku Gothic ProN”，Tahoma , Papyrus, Verdana, "Zapf Dingbats", Courier, "Hoefler Text", "Euphemia UCAS", Helvetica, "Hiragino Mincho ProN", "Bodoni Ornaments", "Apple Color Emoji", Optima, "Gujarati Sangam MN", "Devanagari Sangam MN”, “Times New Roman”, Kailasa, “Telugu Sangam MN”, “Heiti SC”, Futura, “Bodoni 72”, Baskerville, “Chalkboard SE”, “Heiti TC”, Copperplate, “Party LET”, “美国打字机”、AppleGothic、“Bangla Sangam MN”、Noteworthy、Zapfino、“Tamil Sangam MN”、“DB LCD Temp”、“Arial 希伯来语”、乔治亚州 Chalkduster、“Helvetica Neue”、“Gill Sans”、Palatino、 “Courier New”、“Oriya Sangam MN”、Didot、“Bodoni 72 Smallcaps”）“Bodoni 72”、Baskerville、“Chalkboard SE”、“Heiti TC”、Copperplate、“Party LET”、“美国打字机”、AppleGothic、“Bangla Sangam MN”、值得注意的、Zapfino、“Tamil Sangam MN”、“DB LCD Temp”、“Arial 希伯来语”、Chalkduster、Georgia、“Helvetica Neue”、“Gill Sans”、Palatino、“Courier New”、“Oriya Sangam MN”、Didot、“Bodoni 72 Smallcaps”）“Bodoni 72”、Baskerville、“Chalkboard SE”、“Heiti TC”、Copperplate、“Party LET”、“美国打字机”、AppleGothic、“Bangla Sangam MN”、值得注意的、Zapfino、“Tamil Sangam MN”、“DB LCD Temp”、“Arial 希伯来语”、Chalkduster、Georgia、“Helvetica Neue”、“Gill Sans”、Palatino、“Courier New”、“Oriya Sangam MN”、Didot、“Bodoni 72 Smallcaps”）“DB LCD Temp”、“Arial 希伯来语”、Chalkduster、Georgia、“Helvetica Neue”、“Gill Sans”、Palatino、“Courier New”、“Oriya Sangam MN”、Didot、“Bodoni 72 Smallcaps”）“DB LCD Temp”、“Arial 希伯来语”、Chalkduster、Georgia、“Helvetica Neue”、“Gill Sans”、Palatino、“Courier New”、“Oriya Sangam MN”、Didot、“Bodoni 72 Smallcaps”）

* * *

*   使用 NSLog(@"%@",[UIFont fontNamesForFamilyName:@"Tahoma"]); 检查字体系列中字体的确切名称

## 控制台输出：

2012-08-12 07:49:27.280 测验[1134:c07]（“Tahoma-Bold”）

* * *

*   使用 NSLog(@"%@",[UIFont fontNamesForFamilyName:@"Tahoma"]); 之后显示的名称的字体
*   lblQuizName.font = [UIFont fontWithName:@"Tahoma-Bold" size:64.0];

## 快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T00:40:33.197

我遇到了一个非常奇怪的问题——我想没有人会遇到这个问题……我从头到尾的每一步都很好。问题是由于存在两个**app-Info.plist**文件……！我不知道我什么时候添加了第二个。删除一个 plist 文件后，当我仍然没有成功时，我创建了新项目，将我以前的项目文件添加到其中并重复添加自定义字体的所有步骤。

现在一切都很好:)

# php - 用php创建白色图像

> ID：11914301
> 
> 赞同：8
> 
> 时间：2012-08-11T11:28:31.937
> 
> 标签：php, gd

我尝试用 php 创建空白图像，这是我的代码

```
$bg = imagecreatetruecolor(120, 20);

imagejpeg($bg,"test/myimg.jpg",100); 
```

但这创建了黑色图像，我想创建白色，请告诉如何设置图像，例如白色？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T11:36:51.520

```
<?php
$img = imagecreatetruecolor(120, 20);
$bg = imagecolorallocate ( $img, 255, 255, 255 );
imagefilledrectangle($img,0,0,120,20,$bg);
imagejpeg($img,"myimg.jpg",100);
?> 
```

# iphone - 整数声明问题

> ID：11914303
> 
> 赞同：1
> 
> 时间：2012-08-11T11:28:51.270
> 
> 标签：iphone, ios, nsinteger

我正在努力解决程序中的错误。最后我明白了。这里整数在声明时显示值 1。我清理并再次构建。但它显示 1 个值？

请任何人解释我为什么会这样？

![在此处输入图像描述](../Images/236d3d94773d58f5718fd90c38ed4930.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T11:31:34.743

当你声明一个局部变量而不指定一个值时，你需要先分配它，然后再读取它才有效。`1`您在整数变量中看到的可能是任何垃圾值，它是未指定的。读取此值是未定义的行为。

```
int numberOfRecords = 0; 
```

这与默认初始化的实例变量不同。

# sql - SQL Server中如何统计每位老师的学生和班级？

> ID：11914305
> 
> 赞同：3
> 
> 时间：2012-08-11T11:29:31.093
> 
> 标签：sql

假设有 3 个这样的表：

**老师：**

```
teacher_id, name, ... 
```

**学生：**

```
student_id, teacher_id, ... 
```

**班级：**

```
class_id, teacher_id, ... 
```

是否有一个 SQL 查询来获取每个老师分配了多少学生和班级？

结果应该是这样的：

```
teacher_id  name    students    classes 
t_001       AAA        3           2 
t_002       BBB        1           2 
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:38:36.950

尝试这样的事情：

```
SELECT 
    t.teacher_id, t.name,
    Classes = (SELECT COUNT(*) FROM Class c WHERE c.teacher_id = t.teacher_id),
    Students = (SELECT COUNT(*) FROM Student s WHERE s.teacher_id = t.teacher_id)
FROM teacher t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:09:27.497

```
with teacher_students as (
  select t.teacher_id,
         t.name,
         count(s.student_id) as students
    from Teacher t
    left outer join Student s
      on t.teacher_id = s.teacher_id
   group by t.teacher_id, t.name
),
teacher_classes as (
  select t.teacher_id,
         count(c.class_id) as classes
    from Teacher t
    left outer join Class c
      on t.teacher_id = c.teacher_id
   group by t.teacher_id
)
select ts.teacher_id,
       ts.name,
       ts.students,
       tc.classes
  from teacher_students ts
  join teacher_classes tc
    on ts.teacher_id = tc.teacher_id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T11:50:43.517

尝试这个：

```
SELECT       T.TEACHER_ID
           , T.NAME,
           , COUNT(C.TEACHER_ID ) AS   CLASSES
           , COUNT(S.TEACHER_ID ) AS   STUDENTS
FROM TEACHER T 
LEFT OUTER JOIN CLASS C
ON  T.TEACHER_ID = C.TEACHER_ID
LEFT OUTER JOIN STUDENT S 
ON T.TEACHER_ID = S.TEACHER_ID
GROUP BY T.TEACHER_ID, T.NAME 
```

# java - 获取选定的菜单项并在框架上显示相应的项目

> ID：11914310
> 
> 赞同：3
> 
> 时间：2012-08-11T11:30:15.663
> 
> 标签：java, swing, menu, jframe, menuitem

我有 3 个条件（菜单中有 3 个菜单项）。在这 3 个项目中，如何在框架打开后立即选择一个菜单项并默认显示该项目的内容？

稍后如果我们选择其他菜单项，则框架上的相应内容将照常显示。我为这个 GUI 写了很长的代码，所以无法粘贴到这里。却在此时卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:05:17.677

在您的 GUI 完全构建后，只需调用`actionPerformed()`您的方法即可。`ActionListener`如果您已经实现了`Action`接口，这将特别容易，如[*如何使用操作*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)中所示。

使用此[示例](https://sites.google.com/site/drjohnbmatthews/graphpanel)，在附近添加以下行`setVisible()`以模拟向图中添加一些随机节点：

```
gp.control.random.actionPerformed(new ActionEvent(gp, 0, null)); 
```

为了模拟单击按钮，此行模拟添加选定节点：

```
gp.control.defaultButton.doClick(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T15:23:00.903

默认情况下，所有菜单项在创建时都不会被选中。要在应用程序中显示菜单项之前选择它，您应该更改模型的状态。对于项目，通过和`JMenu`很容易。对于你必须的项目。您可以在. `setSelected(true)``setPopupMenuVisible(true)``JMenuItem``setArmed(true)``actionPerformed`

# windows-phone-7 - 7.5 的 WP 应用程序也可以在 WP8 上运行吗？

> ID：11914313
> 
> 赞同：6
> 
> 时间：2012-08-11T11:30:23.550
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

在 wp7.5 上运行的应用程序也可以在 wp8 上运行吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T11:32:43.120

是的，WP 7、WP 7.5 应用程序将继续在 WP8 上运行，包括使用 XNA 框架的应用程序。尽管 WP8 应用程序无法在旧平台上运行（这是预期的）。

任何现有的 WP 设备都不会收到 WP8 更新。他们将获得 WP 7.8 更新，其中包括新的开始屏幕和“用户体验”，但仅此而已。

如果您编写针对 WP7.5 的应用程序，它将适用于所有设备。

**2012 年建立的更新：**

*   Windows Phone 8 SDK 现已公开发布。
*   您现有的所有针对 WP 7 或 WP 7.5 的应用程序都将“正常工作”
*   您可以像将 WP 7 升级到 WP 7.5 一样将您的应用程序更新到 WP8 平台，尽管这会使您的应用程序仅适用于 WP8 设备。~~（AFAIK。无法证实这一点。）~~

如果您将您的应用程序标记为 WP8 应用程序，**它将无法在 WP7 或 WP 7.5 上运行**。虽然您可以将应用程序标记为 WP7.5 应用程序，但您可以使用反射来查找所需的 API，并调用它们（并在这些 API 不可用的 WP7.5 设备上正确降级。）

在我看来，反射是混乱的，但你仍然可以选择使用相同的代码来支持两者，直到 WP 7.5 设备消失。（使用反射时您可能需要格外小心，因为 AFAIK 对 WinRT 的反射有一些限制，以避免安全和稳定性问题，对于 WP8+ 可能仍然如此）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T17:27:57.660

就像我对当前可用的 WP8 仿真器和 WP8 原型设备的实验的附加信息一样。不确定最终版本中是否会更改以下内容：

1.  当应用程序针对 7.5 和 8 编译时，本机 Silverlight 应用程序的某些 UI 控件在同一个 WP8 模拟器上看起来不同。例如，当应用程序编译为 7.5 时，复选框看起来像 WP7，如果为 WP8 编译应用程序，则看起来更现代。

2.  HTML5 应用程序和 WebBrowser 控件。如果您的应用程序是为 7.5 编译的，它将继续运行旧的 IE9，即使在 WP8 上也是如此。如果将其重新编译为 WP8，WebBrowser 控件将使用 IE10，并进行了许多改进和优化。由 Microsoft WP IE 团队确认。

因此，在 WP8 上运行的 WP7/8 应用程序存在一些细微差别。

# javascript - 使用 jquery 更改下拉列表的选定值

> ID：11914315
> 
> 赞同：0
> 
> 时间：2012-08-11T11:31:13.887
> 
> 标签：javascript, jquery, html, yii, html-select

我有一个下拉列表（yii 框架），我想更改它的选定值。这是下拉列表：

```
<?php
                $t = is_null($dataProvider[$key]['room']) ? 'NA' : $dataProvider[$key]['room'];

                echo 'Room Number : ' . CHtml::dropDownList(Rooms::model(), 'roomID', CHtml::listData(Rooms::model()->findAll(array(
                                    'condition' => 'status = :status or roomID = :roomID',
                                    'params' => array(
                                        ':status' => 'ready',
                                        ':roomID' => $dataProvider[$key]['room']
                                    )
                                )), 'roomID', 'roomID'), array('id' => 'room', 'class' => 'ui-widget-content', 'empty' => 'NA',
                'options' => array($t => array('selected' => true))))
                ;
                ?> 
```

现在这个下拉列表是我想克隆的父母的孩子，所以我可以再次使用它，所以我用它来克隆它：

```
var test =$("#users-contain").children(':last').clone(true,true);
        test.children("#room option[value='3']").attr('selected', 'selected');
        test.children('table').children('tbody').children('tr').empty();
        var inner = test.clone(true,true); 
```

我将使用 var inner 更改元素中的一些内容并将其克隆到页面上。现在这是我的问题，对于我的新克隆，即 var 测试，我想更改下拉列表的选定值，但它根本不起作用，我尝试了这个：

```
test.children("#room option[value='3']").attr('selected', 'selected'); 
```

还有这个 ：

```
test.children('#room').val(3); 
```

没有任何效果，我还尝试了其他我不记得的东西，但是我应该注意使用最后一个，当我调试它时：

```
console.log(test.children("#room").val()); 
```

它输出一个正确的“3”值，但是当我在页面上显示它时，旧下拉列表的选定值不会改变。这是结果：

```
<select id="room" class="ui-widget-content" name="">
<option value="">NA</option>
<option value="1">1</option>
<option value="2" selected="selected">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
</select> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:39:26.293

该行`test.children("#room option[value='3']").attr('selected', 'selected')`具有基本思想，但仅`children`获取**子元素**并对其进行过滤。所以它会得到`#room`，但它不会得到`option`元素，因为`<option>`s 是 的孙子`test`。而是使用`find`，它搜索所有后代元素。这是代码：
`test.find("#room option[value='3']").attr('selected', 'selected')`

# android - android.permission.ACCESS_LOCATION_EXTRA_COMMANDS

> ID：11914318
> 
> 赞同：1
> 
> 时间：2012-08-11T11:31:21.843
> 
> 标签：android

> **可能重复：**
> [Android ACCESS_LOCATION_EXTRA_COMMANDS 权限使用](https://stackoverflow.com/questions/9917888/android-access-location-extra-commands-permission-uses)

我想知道...

以下android权限是什么：

```
android.permission.ACCESS_LOCATION_EXTRA_COMMANDS 
```

它比其他**位置**权限给了我什么？那些“额外命令”是什么？

# iphone - 如何删除或清除 iPhone 中的 Tabbar 图像？

> ID：11914321
> 
> 赞同：1
> 
> 时间：2012-08-11T11:31:38.527
> 
> 标签：iphone, ios, tabbar

目前，我正在使用简单的 iPhone 应用程序，使用 Tabbar 创建三个选项并在每个视图控制器中设置三个图像，然后单击第二个 tabbar 显示 viewcontroller2 并导航到另一个屏幕，此时我想清除或删除 tabbar 图像从这个屏幕，但我无法解决这个问题，请帮助我。

提前致谢

我试过这个：

```
[[UITabBar appearance] setAlpha:0.5]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T05:14:48.280

使用它来解决它：

```
UITabBarItem *filterTab = [self.tabBarController.tabBar.items objectAtIndex:3];
[filterTab setImage:[UIImage imageNamed:@""]]; 
```

您还可以传递属性的`nil`值`setImage`。喜欢：`[filterTab setImage:nil];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:02:51.697

在您想要隐藏标签栏视图的位置执行此操作。（也许在您从 viewcontroller2 导航到的另一个屏幕中的 viewWillAppear 中。

```
[self.tabbarcontroller.tabbar setHidden:YES] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:49:47.030

如果你这样做是可能的

```
presentModalViewController 
```

上`UIWindow`

我想，这会解决你的问题

希望对你有帮助......

# javascript - 如何检查是否使用 jQuery 选择了 asp.net 文本框中的文本？

> ID：11914325
> 
> 赞同：1
> 
> 时间：2012-08-11T11:32:21.343
> 
> 标签：javascript, jquery, asp.net

我想知道这是否可能，我想检查用户是否在文本框控件中选择了文本，就像[这个解决方案](https://stackoverflow.com/questions/5001608/how-to-know-if-the-text-in-a-textbox-is-selected)一样（但这仅适用于 html 输入控件而不是 asp.net 服务器控件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:40:17.613

就该示例而言，您需要`nothing to change`服务器控制。`except the syntax`

```
<asp:TextBox id="txt1" runat="server" value="Selected?"><asp:TextBox>

<asp:Button id="btnSubmit" runat="server" OnClientClick="alert(isTextSelected();" ></asp:Button>

    function isTextSelected() {
input = document.getElementById('<%= test.ClientID %>'))
        if (typeof input.selectionStart == "number") {
            return input.selectionStart == 0 && input.selectionEnd == input.value.length;
        } else if (typeof document.selection != "undefined") {
            input.focus();
            return document.selection.createRange().text == input.value;
        }
    } 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:04:55.543

您可以通过使用简单地实现这一点

```
$('select, input').click(function(){
   $(this).removeClass('disabled');
}); 
```

# c++ - 使用 LLVM 遍历 AST

> ID：11914334
> 
> 赞同：2
> 
> 时间：2012-08-11T11:33:28.390
> 
> 标签：c++, c, compiler-construction, clang, llvm

是否有任何辅助方法来遍历 LLVM 编译器为 C 代码生成的 AST、基本块等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T00:44:14.920

如果您尝试加载模块（从 .c 文件编译的 .bc 文件`clang -emit-llvm`）并遍历其功能、基本块等，那么您可能需要从[`llvm::Module`class](http://llvm.org/docs/doxygen/html/classllvm_1_1Module.html)开始。它具有遍历全局变量和函数的函数。然后[`llvm::Function`该类](http://llvm.org/docs/doxygen/html/classllvm_1_1Function.html)具有遍历基本块的功能。然后[`llvm::BasicBlock`该类](http://llvm.org/docs/doxygen/html/classllvm_1_1BasicBlock.html)具有用于迭代指令的功能。

或者，如果您愿意，可以遍历 Clang 创建的 AST 结构。这是一些示例代码：[http](http://eli.thegreenplace.net/2012/06/08/basic-source-to-source-transformation-with-clang/) ://eli.thegreenplace.net/2012/06/08/basic-source-to-source-transformation-with-clang/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-19T08:48:53.213

基本上，不可能对 LLVM 中的 AST 进行完整的操作。因为 LLVM 通行证在位码级别上工作，而不是在 AST 上。我认为你想要的是一个 AST 迭代器。

您可以参考[Artem Degrachev: Clang Static Analyzer: A Checker Developer's Guide](https://github.com/haoNoQ/clang-analyzer-guide/releases/download/v0.1/clang-analyzer-guide-v0.1.pdf)中的第 3 章。

Clang 现在有一个供检查器开发人员使用的[页面](http://clang-analyzer.llvm.org/checker_dev_manual.html)。您可以通过链接找到更多信息。

# php - 在第一行之后添加一行代码 我需要更新一个正在移动到新主机的网站。我想在每个文件中添加以下行，只有一次，在第一次出现之后; $txt =~ s|) { if ($first && s|; $txt =~ s|) { if ($first && s|

> ID：11914336
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, linux, perl

我需要更新一个正在移动到新主机的网站。我想在每个文件中添加以下行，只有一次，在第一次出现之后`<?php`：

```
define('FRAMEWORK_LOCATION', '/home/someUser/framework.php'); 
```

我已经尝试了这个 Perl oneliner 的几种变体：

```
$ find . -name '*' -print0 | xargs -0 perl -pi -e 's|<?php|<?php\rdefine('\''FRAMEWORK_LOCATION'\'', '/home/someUser/framework.php');' 
```

但是，可以看出它会影响所有行。我并不特别担心初始代码之后的附加代码的情况，`<?php`但如果解决方案确实考虑到了这一点，那么这对我也有好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:51:57.777

```
perl -ie 'undef $/; $txt = <>; $txt =~ s|<?php|<?php\rdefine("FRAMEWORK_LOCATION", "/home/someUser/framework.php")|; print $txt;' 
```

或者

```
perl -ie '$first = 1; while (<>) { if ($first && s|<?php|<?php\rdefine("FRAMEWORK_LOCATION", "/home/someUser/framework.php")|) { $first= 0; } print; }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:56:35.280

试试这个：

```
find . -name "*" -print0 | xargs -0 sed '0,/<?php/s/<?php/<?php\n\tdefine(...)/' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T11:58:24.330

您可以直接使用 sed，而无需调用 perl：

```
$ find . -name '*' -type f -print0 | xargs -0 sed -e '0,/<?php/s||&\ndefine("FRAMEWORK_LOCATION","/home/someUser/framework.php")|' 
```

相关位是：

```
sed -e '0,/<?php/s||&\nNEW_TEXT|' 
```

您在哪里指定：

1.  范围`0,/<?php`：从第一行到第一次出现`<?php`
2.  替换`s||&\nNEW_TEXT|`：您将先前的匹配替换为`<?php`自身，然后是带有一些新文本的新行。

请注意，我添加了`-type f`用于`find`过滤目录的开关。

# php - PHP从文本文件中提取数据并写入另一个文件

> ID：11914337
> 
> 赞同：1
> 
> 时间：2012-08-11T11:34:03.907
> 
> 标签：php

这是我在互联网上的第一篇文章，以寻求编码方面的帮助，所以请多多包涵！几年来，我一直在互联网上找到开放代码并对其进行修改以做我想做的事情，但我似乎遇到了这个问题，我确信它非常简单。如果您能帮助我，将不胜感激。

我有以下页面：

```
 <?php 
    $text = $_REQUEST['message'];
    $f = file_get_contents("all.txt"); 
    $f = explode(", ", $f); 

    function modFile($pos, $tothis, $inthis)
    { 
        foreach($inthis as $pos => $a){ 
        } 
        $newarr = implode("\r\n", $inthis); 
        $fh = fopen("example.txt", "w"); 
        fwrite($fh, $newarr); 
        fclose($fh); 
    } 

    modFile(4, '', $f); 
```

我有一个文件（all.txt），其中包含以下内容：

```
 11111111111, 22222222222, 33333333333, 44444444444 
```

我希望这样显示：

```
 11111111111 
    22222222222
    33333333333
    44444444444 
```

并在每个数字后添加一个空格，然后在每行上的文本相同的地方添加一些文本：

```
 11111111111 text here
    22222222222 text here
    33333333333 text here
    44444444444 text here 
```

我有一个 html 表单，它传递要附加到每一行的自定义文本。我需要保持文件 all.txt 完整，然后用不同的名称保存新格式化的文件。

我已经尝试将变量放入我目前拥有“\r\n”的内爆中，但这不起作用。

非常感谢任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:21:50.990

关于您的代码的一些注意事项：您正在传递`$pos`给函数，但它会在`foreach`. 也是`foreach`空的，那有什么用呢？而且我也没有看到您`$text`在任何地方使用。

要获得所需的输出，请尝试以下操作：

```
file_put_contents(
    '/path/to/new.txt',
    preg_replace(
        '/[^\d+]+/',
        ' some text' . PHP_EOL,
        file_get_contents('all.txt')
    )    
); 
```

该模式`[^\d+]+`将匹配任何不是连续数字的字符串，并将其替换为“some text”和一个新行。

实现相同功能的更复杂的版本是：

```
file_put_contents(
    '/path/to/new.txt', 
    implode(PHP_EOL, array_map(
        function ($number) {
            $message = filter_var(
                $_POST['message'], FILTER_SANITIZE_SPECIAL_CHARS
            );
            return sprintf('%s %s', trim($number), $message);
        },
        array_filter(str_getcsv(file_get_contents('/path/to/all.txt')))
    )
)); 
```

这将（从内到外）：

*   加载 all.txt 的内容并将其作为 CSV 字符串解析到一个数组中。每个数组元素对应一个数字。
*   这些数字中的每一个都附加了来自 POST 超全局的消息内容（[您不想使用 REQUEST](https://stackoverflow.com/questions/2142497/whats-wrong-with-using-request)）。
*   然后将生成的数组连接回单个字符串，其中连接字符是换行符。
*   结果字符串被写入新文件。

如果上面的内容太难理解，这里是一个使用临时变量但没有 lambda 的版本：

```
$allTxtContent = file_get_contents('/path/to/all.txt');
$numbers = array_filter(str_getcsv($allTxtContent));
$message = filter_var($_POST['message'], FILTER_SANITIZE_SPECIAL_CHARS);
$numbersWithMessage = array();
foreach ($numbers as $number) {
    $numbersWithMessage[] = sprintf('%s %s', trim($number), $message);
};
$newString = implode(PHP_EOL, $numbersWithMessage);
file_put_contents('/path/to/new.txt', $newString); 
```

它做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:44:17.953

您的 foreach() 右括号位于错误的位置。您错过了运行新文件创建执行的确切部分。这里：

```
$text = $_REQUEST['message'];
$f = file_get_contents("all.txt"); 
$f = explode(", ", $f);
function modFile($pos, $tothis, $inthis, $text){ 
    $fh = fopen("example.txt", "w");
    foreach($inthis as $pos => $a){ 
        $newarr = $a." ".$text."\r\n";
        fwrite($fh, $newarr);
    }
    fclose($fh);
} 
modFile(4, "", $f, $text); 
```

这是为了根据需要格式化新文件，但是，您没有传递要附加到新文件的新 $text['message'] 。您可以修改您的 mod_file() 方法，也可以在运行时在 foreach() 循环中传递它。

编辑* 刚刚更新了整个代码，现在应该是你的目标。如果是，请将答案标记为已接受。

# python - 更快的方式来做 .format()

> ID：11914338
> 
> 赞同：2
> 
> 时间：2012-08-11T11:34:09.590
> 
> 标签：python, performance, string.format

我正在编写一个需要进行大量字符串格式化的程序，我注意到这`.format()`会占用少量但大量的 cpu 时间。这是我使用它的方式：

`str = 'vn {0:.15f} {1:.15f} {2:.15f}\n'.format(normal_array[i].x, normal_array[i].y, normal_array[i].z)`

有谁知道是否有更快的方法来做到这一点，因为一小部分 X 100000 可以加起来

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:46:39.227

您也可以尝试迁移到`PyPy`，有[一篇](http://morepypy.blogspot.com/2011/08/pypy-is-faster-than-c-again-string.html)关于 cpython 和 PyPy 中的字符串格式比较的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T11:39:40.430

尝试`.format`用`%`表达式替换并预先计算 normal_array：

```
item = normal_array[i]
'vn %.15f %.15f %.15f\n' % (item.x, item.y, item.z) 
```

同样用迭代值替换索引可以稍微提高速度：

```
for item in normal_array:
    'vn %.15f %.15f %.15f\n' % (item.x, item.y, item.z) 
```

**基准：**

```
def gen_data(n):
    l = []
    for k in xrange(n):
        l.append(collections.namedtuple('normal', ('x', 'y', 'z'))(random.random(), random.random(), random.random()))
    return l

if __name__ == '__main__':
    times = 1000
    print 'format:'
    print timeit.Timer('for i in xrange(len(normal_array)):\n    str = "vn {0:.15f} {1:.15f} {2:.15f}\\n".format(normal_array[i].x, normal_array[i].y, normal_array[i].z)\n',
            'from __main__ import gen_data; normal_array = gen_data(1000)').timeit(times)
    print '%s:'
    print timeit.Timer('for i in xrange(len(normal_array)):\n    str = "vn %.15f %.15f %.15f\\n".format(normal_array[i].x, normal_array[i].y, normal_array[i].z)\n',
            'from __main__ import gen_data; normal_array = gen_data(1000)').timeit(times)
    print '%s+iteration:'
    print timeit.Timer('for o in normal_array:\n    str = "vn %.15f %.15f %.15f\\n".format(o.x, o.y, o.z)\n',
            'from __main__ import gen_data; normal_array = gen_data(1000)').timeit(times) 
```

**结果（越低越好）**

```
format:
5.34718108177
%s:
1.30601406097
%s+iteration:
1.23484301567 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T11:37:48.643

`.format()`通过替换`%`格式指令来尝试这种（老派）方法：

```
str = 'vn %.15f %.15f %.15f\n' % (normal_array[i].x, normal_array[i].y, normal_array[i].z ) 
```

似乎使用`%`会更快：

```
timeit str='%.15f %.15f %.15f\n' % (a, b, c)
100000 loops, best of 3: 4.99 us per loop

timeit str2='{:.15f} {:.15f} {:.15f}\n'.format(a, b, c)
100000 loops, best of 3: 5.97 us per loop 
```

XP SP2 下的 Python v 2.7.2、变量`a`、`b`和`c`是浮点数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T23:00:18.103

如果浮点转换仍然是一个瓶颈，您可能会尝试将格式转换为 a `multiprocessing.Pool`，并使用`multiprocessing.map_async`or`multiprocessing.imap`打印结果字符串。这将使用您机器上的所有内核进行格式化。尽管将数据传入和传出不同进程的开销可能掩盖了并行化格式化的改进。

# asp.net - asp.net mvc3 身份验证

> ID：11914343
> 
> 赞同：0
> 
> 时间：2012-08-11T11:34:46.853
> 
> 标签：asp.net, asp.net-mvc-3, authentication, httpmodule

当cookie过期时，是否有将用户重定向到登录页面的解决方案？

我创建`formsauthenticationticket`和 cookie。有效期设置为 10 分钟。

到期后，用户在 20 分钟内没有发出任何请求，然后在某个链接上单击他，他将被重定向到登录页面并再次登录。

我`HttpModule`在程序集中，它在 web 项目中被引用。

在这个模块中，我有一个`PreRequestHandlerExecute()`事件，我控制每个请求，如果用户通过身份验证并刷新 cookie 超时。

但如果用户未通过身份验证，他将被重定向到登录页面。有什么解决办法吗？我知道`AuthorizeAttribute`，但是有没有其他方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:15:23.143

一旦用户的 cookie 过期，它将不会在请求中发送，因此您无法知道谁是新用户，谁是 cookie 已过期的用户，因为两个用户都不会在他们的页面请求中发送 cookie。

一种*解决方法*是将 cookie 设置为 10 分钟，但使用[Meta Refresh 标签](http://www.pageresource.com/html/metref.htm)在 9 分 50 秒后重定向到登录页面。注意：登录页面也需要注销用户，否则会再次刷新会话。

# c++ - 为 apache 编写基于 C++11 线程的模块

> ID：11914345
> 
> 赞同：1
> 
> 时间：2012-08-11T11:34:50.457
> 
> 标签：c++, linux, apache, http, c++11

我想用 C++11 (GCC 4.7) 为 Apache 编写一个模块并配置它：

*   我的代码中的自定义初始化函数在服务器启动时调用一次。
*   请求处理工作者由 apache 作为 pthread 生成，都在同一个进程中。（不分叉进程）
*   HTTP 请求由来自工作线程的函数调用处理，该函数调用调用我在代码中编写的阻塞函数。

这一切有可能吗？或者 Apache 不是这样设计的？如果可能的话，如何配置它以及构建和附加模块的草图是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:47:40.980

自从我编写 Apache 模块以来已经有很长时间了，但我认为模块无法控制子节点是否作为新的分叉或进程产生，我认为这是一个服务器范围的设置。

否则，这一切都很有可能。Apache 提供了可用于在服务器运行时的不同时间调用模块代码的钩子。

回到 Apache 1.3.x 时代，我曾经使用《[用 Perl 和 C 编写 Apache 模块](http://shop.oreilly.com/product/9781565925670.do)》一书，它主要侧重于使用 Perl，但有足够的关于 C API 的信息来弄清楚它。Apache 2.4的[开发人员文档](http://httpd.apache.org/docs/2.4/developer/)展示了如何使用钩子和控制请求处理。

# java - 在jasper报告API java中获取组部分

> ID：11914359
> 
> 赞同：0
> 
> 时间：2012-08-11T11:36:05.167
> 
> 标签：java, jasper-reports

如何使用 jasper 报告 api 在我的 java 程序中获取组标题部分。我必须使用其键从组标题部分获取一个元素，但我无法使用 jasper 报告 API 获取组标题部分。任何帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:31:25.780

```
JasperReport report = ...;
report.getGroups();
// identify group by name
JRGroup group = ...;
group.getGroupHeaderSection(); 
```

# ios - iPhone 主屏幕上的图标看起来很奇怪

> ID：11914362
> 
> 赞同：0
> 
> 时间：2012-08-11T11:36:56.233
> 
> 标签：ios, xcode, image

请检查左右角，图标在其他情况下看起来不错，原来的图标也很好看，但是当它显示在iphone的主屏幕上时，拐角处有一条黑线，如下图：

![在此处输入图像描述](../Images/2e43cf5708a476afdacfc64379b7503f.png)

![视网膜](../Images/39196eeab8736186d03bf304d94e5086.png)

![非视网膜](../Images/192fa184b21e46764944909abe5aae20.png)

第一个是原始的，第二个是视网膜的，第三个是非视网膜的。怎么了？如何解决这个问题？
谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:51:22.017

如[iOS HIG](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2)中所述，您不应为您提供的图标添加圆角。角将在主屏幕上自动变圆。你可能把半径弄错了一两个像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:51:13.080

默认情况下，所有 iOS 主屏幕图标都会出现光晕和阴影。您可以通过添加来更改它：

> UIPrerenderedIcon 是

到您的 Plist 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:19:48.840

我建议改用此[链接](http://www.pixelresort.com/blog/app-icon-template/)提供的模板。此模板中有一个脚本，它将自动输出您的应用所需的所有必要格式。只需提供一个方形图像作为原始图像，模板就会自动将遮罩应用到您想要圆角的部分，因此您不应该面对您在此处观察到的问题。正如 DrummerB 所提到的，您不应该提供带有圆角的图标图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T12:23:12.577

解决此问题的方法是复制您的方形视网膜图标，将其重命名为与当前非视网膜图标相同的名称，使用预览打开它，将其大小调整一半，保存，将旧的圆形图标替换为您刚刚制作的图标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T12:46:24.643

您不需要使图标图像的角变圆，它会自动变圆。

尝试不使用圆角图像。

# android - 在 Android ndk 应用程序中使用第三方 .a 库

> ID：11914370
> 
> 赞同：0
> 
> 时间：2012-08-11T11:38:06.917
> 
> 标签：android, android-ndk

我们正在尝试在我们的 Android 应用程序中使用第三方 .a 静态库。.a 库是为 x86 构建的，我们将它与 PC linux 机器一起使用没有问题。

然后我们尝试通过这个 Android.mk 在 Android 上使用它：

```
LOCAL_PATH:= $(call my-dir)

# first lib, which will be built statically
#
include $(CLEAR_VARS)

LOCAL_MODULE    := libtwolib-first
LOCAL_SRC_FILES := rwl.a
LOCAL_MODULE_SUFFIX := .a

include $(PREBUILT_STATIC_LIBRARY)

# second lib, which will depend on and include the first one
#
include $(CLEAR_VARS)

LOCAL_MODULE    := libtwolib-second
LOCAL_SRC_FILES := second.c

LOCAL_STATIC_LIBRARIES := libtwolib-first

include $(BUILD_SHARED_LIBRARY) 
```

我们得到这个错误：

```
could not read symbols: File in wrong format 
```

是因为 .a 文件是用 x86 编译的并且我们正在为 arm 构建吗？

.a 文件是遗留文件，很可能无法从源代码重新编译。如果这是问题，还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:27:26.043

您需要获取第三方库的源代码并将其交叉编译为原生 Android 的 NDK，使其二进制兼容。

简单地将 x86 静态库放入 Android 的 NDK 构建**中**是行不通的。

# android - 使用 365 imageviews 制作安卓应用

> ID：11914379
> 
> 赞同：0
> 
> 时间：2012-08-11T11:39:22.813
> 
> 标签：android, database, memory, bitmap, imageview

我需要帮助了解我将如何制作一个允许用户滚动浏览 365 个不同位图的 Android 应用程序。我担心我会超出android允许的内存限制。我试过谷歌搜索，但无法理解如何解决这个问题。有人可以写一个非常简短的提示我可以从哪里开始研究这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:44:56.460

如何使用从 AdapterView 扩展的任何类（如 listView、gridView、...）？

这个想法是，由于用户并没有真正同时看到所有视图，您可以重新使用滚动时消失的视图，并将它们显示为新视图。

观看谷歌名为“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”的视频。

无论如何，如果您不想使用此解决方案，请考虑在内存上非常“便宜”，因为您是正确的 - 如果您使用太多 RAM，android 会杀死您的应用程序。

[您可以在此处](http://developer.android.com/training/displaying-bitmaps/index.html)阅读有关处理位图的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:05:34.380

这取决于这些的来源。我认为您想使用“延迟加载 ListView”。 [签出这个](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level)

# python - Python循环编程，循环不运行

> ID：11914382
> 
> 赞同：-1
> 
> 时间：2012-08-11T11:39:48.290
> 
> 标签：python, loops

我是 Python 新手，虽然我在教程中逐字输入，但我没有得到我应该得到的结果。基本上，我期望该范围内有多个答案，但我只得到一个结果。

```
>>> sum = 0
>>> for i in range (10): sum = sum + i
>>> print (sum)    
45 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T11:44:08.653

***请注意***，使用`sum`是一个坏主意，因为[sum()](http://docs.python.org/library/functions.html#sum)已经是 Python 内置函数。我`total`在这里改用：

```
total = 0
for i in range(10): 
    total = total + i  # same as total += i
    print(total) 
```

给出：

```
0
1
3
6
10
15
21
28
36
45 
```

这是您期望/想要的输出吗？

在 Python 中，空格/缩进是*至关重要*的，因此如果您希望语句成为函数/循环/等的一部分，则需要将其缩进到与块中其他语句相同的级别。

相比之下，您的原始代码看起来像这种格式更传统：

```
total = 0
for i in range(10): 
    total = total + i  # same as total += i
print(total) 
```

所以你可以看到它只在循环完成执行后被`print`调用*一次。**缩进*使两个版本之间的所有区别。

*最后*， [PEP8 - The Python Style Guide提到](http://www.python.org/dev/peps/pep-0008)[函数名和它的参数之间不](http://www.python.org/dev/peps/pep-0008/#pet-peeves)应该有空格，所以`range(10)`首选 to `range (10)`, `print()`to`print ()`等

[PEP 8](http://www.python.org/dev/peps/pep-0008)是任何 Python 程序员的好读物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T11:42:55.280

这实际上是您应该期待的正确答案。[这是证明](http://jsfiddle.net/k38Js/)（希望你不介意一点 JS 来证明我的观点）

现在，如果您希望在`sum`循环的每次迭代中都打印该变量，您应该修改您的代码，使其如下所示：

```
sum = 0
for i in range (10):
    sum = sum + i
    print (sum) 
```

间距在 Python 中很重要。很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T11:43:51.970

这里没有错。在每一步中，您都将下一个数字相加，因此在每一步中，它都是 0、1、3、6、....、45。然后您将答案打印出来。

如果要打印出每个步骤，则需要确保 print 位于 for 块内：

```
for i in range (10):
    sum = sum + i
    print (sum) 
```

（注意缩进）

PS。不要`sum`用作变量名。它已经是一个全局函数，所以通过分配`sum=0`你正在删除旧的含义 - 签`sum(range(10))`入一个新的 python shell

# ios5 - 如果文本内容大于标签大小，则为 UILabel 中的文本设置动画

> ID：11914386
> 
> 赞同：2
> 
> 时间：2012-08-11T11:40:25.333
> 
> 标签：ios5

我有一个大于 UILabel 大小的文本。当标签文本超过标签宽度时，如何水平动画标签文本（自动收报机动画）？

我不知道如何做到这一点。

谢谢，请帮助

# c++ - 使用 Poco 将图像发送到网络服务器

> ID：11914388
> 
> 赞同：0
> 
> 时间：2012-08-11T11:40:41.503
> 
> 标签：c++, http, poco-libraries

我正在尝试使用 POCO::Net::HTMLForm 将图片上传到 appengine。请看下面的代码。我遇到的问题是图像数据没有发送。令牌和角色名称（其用于开源动作 rpg）传输没有任何问题。知道我可能做错什么吗？

提前致谢 ：）

C++代码：

```
 // prepare session
        Poco::URI uri(backend_url + "/api/update_character_avatar");
        Poco::Net::HTTPClientSession session(uri.getHost(), uri.getPort());

        // prepare path
        std::string path(uri.getPathAndQuery());
        if (path.empty()) path = "/";

        Poco::Net::HTTPRequest req(Poco::Net::HTTPRequest::HTTP_POST, path);
        Poco::Net::HTMLForm form;
        form.add("token", sw_token);
        form.add("charname", sw_charname);

        Poco::Buffer<char> imgBuffer(mImgPtr->size());
        mImgPtr->read(imgBuffer.begin(), imgBuffer.end()-imgBuffer.begin());
        std::string s(imgBuffer.begin(), mImgPtr->size());

        std::ostringstream out;
        Poco::Base64Encoder b64enc(out);
        b64enc.write(imgBuffer.begin(), imgBuffer.end()-imgBuffer.begin());
        b64enc.close();
        Poco::Net::StringPartSource *prtsrc = new Poco::Net::StringPartSource(out.str());
        form.addPart("imagedata", prtsrc);

        form.prepareSubmit(req);
        std::ostream& send = session.sendRequest(req);
        form.write(send);

        // get response
        Poco::Net::HTTPResponse res;

        // print response
        std::istream &is = session.receiveResponse(res);
        std::ostringstream stream;
        Poco::StreamCopier::copyStream(is, stream);
        std::cout << stream.str() << std::endl; 
```

应用引擎的 Python 处理程序：

```
class UpdateCharacterAvatarHandler(webapp2.RequestHandler):
def post(self):
    token = self.request.get("token")
    charname = self.request.get("charname")
    imagedata = self.request.get("imagedata")

    logging.error(self.request.body)

    self.response.write("test") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:25:24.020

我希望 imagedata 显示为 post 字段而不是 get，所以我会尝试     `imagedata = self.request.post("imagedata")`. 或者尝试将其发布到允许您设置断点并检查请求内容的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T11:47:17.573

抱歉，我无法理解您在这段代码中到底想做什么。您已经采取了许多无用的步骤来上传文件，因为只需使用 HTMLForm 类即可完成。这是执行此操作所需的最少代码 -

> ```
>  HTTPRequest request(HTTPRequest::HTTP_POST, "/fileupload/upload_file.php",    HTTPMessage::HTTP_1_1);
>     HTMLForm form;
>     form.setEncoding(HTMLForm::ENCODING_MULTIPART);
>     form.addPart("file", new FilePartSource("/home/abc/Pictures/sample.png"));
>     form.prepareSubmit(request);
> 
>     HTTPClientSession *httpSession = new HTTPClientSession("localhost");
>     httpSession->setTimeout(Poco::Timespan(20, 0));
>     form.write(httpSession->sendRequest(request));        
> 
>     Poco::Net::HTTPResponse res;
>     std::istream &is = httpSession->receiveResponse(res);
>     Poco::StreamCopier::copyStream(is, std::cout); 
> ```

相应的上传服务器使用标准 PHP 代码上传 HTML 表单文件。

# iphone - 按钮在按下更改的按钮标题时触发两个动作

> ID：11914392
> 
> 赞同：0
> 
> 时间：2012-08-11T11:41:57.617
> 
> 标签：iphone, ios5, xcode4, uibutton, title

我以编程方式更改了 UIButton 的按钮标题。我还分配了一个动作来更改按钮标题。现在，当我点击按钮时，它会触发两个操作（一个按钮标题相同，一个按钮标题更改）。但是，我只想为更改的标题按钮触发一个操作。

我该怎么做？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:05:01.277

两种解决方案。在方法之间切换目标/动作或根据某些状态决定要做什么。

1.

```
- (void)method1:(id)sender;
{
  [sender removeTarget:nil action:NULL forControlEvents:UIControlEventTouchUpInside];
  [sender addTarget:self action:@selector(method2:) forControlEvents:UIControlEventTouchUpInside];
}

- (void)method2:(id)sender;
{
  [sender removeTarget:nil action:NULL forControlEvents:UIControlEventTouchUpInside];
  [sender addTarget:self action:@selector(method1:) forControlEvents:UIControlEventTouchUpInside];
} 
```

2a。

```
- (void)buttonTapped;
{
  if (self.someState) {

  } else {

  }
} 
```

2b。

```
- (void)buttonTapped:(UIButton *)button;
{
    if ([[button titleForState:UIControlStateNormal] isEqualToString:@"First title"]) {

    } else {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:47:36.713

如果您为控制状态 touchupinside 的同一个按钮分配两个动作，它将始终触发两者。您应该在添加第二个动作时删除第一个动作并删除第二个动作本身并在选择器函数的末尾再次添加第一个动作。

以下是按钮的默认动作；

```
[button addTarget:self:action:@selector(actionOne)forControlEvents:UIControlStateTouchUpInside] 
```

在 actionOne 中，您可以为第一个操作调用删除观察者并添加第二个操作。

```
 [button addTarget:self:action:@selector(actionTwo)forControlEvents:UIControlStateTouchUpInside] 
```

而在 actionTwo 函数中，你做相反的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:51:19.650

而不是提出两个条件

```
f([urlresponse status code] == 200) 
{
[myButton setTitle:@"Unfollow" forState:UIControlStateNormal]; //title changed 

[myButton addTarget:self action:@selector(unfollowButtonPressed:) forControlEvents:UIControlEventTouchUpInside];

} 
```

这可能对您的情况有所帮助。

# c# - 我可以跨项目使用“锁定”吗？

> ID：11914396
> 
> 赞同：3
> 
> 时间：2012-08-11T11:42:09.130
> 
> 标签：c#, multithreading, locking

我有一个项目和一个类库。

我需要类库来更新存储项目。在我的项目中，我需要访问这些存储项目。我可以`lock`在不同项目的同一个实例上使用它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T11:43:51.737

只要您锁定的是真正相同的对象，那绝对可以正常工作。如果您使用不同的 AppDomain，事情会变得更加复杂，但如果只是（比如说）项目 A 和项目 B 都锁定了最初来自项目 C 的对象，那应该不是问题。

至少，它会在*技术上*起作用。就我个人而言，我通常更喜欢尽可能地保持锁的私密性——例如，`this`我通常会创建一个*唯一目的*是锁定的对象，而不是锁定或从其他地方获得的引用：

```
public class Foo
{
    private readonly object mutex = new object();

    ...
} 
```

这样我就知道*唯一*可以获得该锁的代码是`Foo`. 它使锁更容易推理。

# javascript - 选择带有纯 js 与 C++ 实现的 node.js 库

> ID：11914399
> 
> 赞同：0
> 
> 时间：2012-08-11T11:42:21.270
> 
> 标签：javascript, node.js, heroku, timezone

选择纯 js 库而不是带有一些 C++ 代码的库的优缺点是什么？前任。timezone-js(pure js) over node-time(cpp addon) 用于支持时区的日期。

PS：应用需要托管在 Heroku

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:23:36.093

假设这些库在功能上相似，我可以想到几个优点和缺点：

### C++ 优点

*   通常比纯 JS 实现更快（这可能并不总是正确的——总是自己测试）
*   能够在线程池中异步执行 CPU 密集型工作

### C++ 缺点

*   可能无法在所有平台上编译，通常在插件需要一些第三方库时发生
*   可能更难调试/修复问题（取决于您在 C++/V8 方面的专业水平）

如果您更喜欢使用 C++ 插件但担心它无法在 Heroku 上运行，请创建一个使用它并部署它的小型测试应用程序。如果您更喜欢使用 JS 库但又担心速度，那么您真的需要进行自己的实际性能测试，看看它是否真的是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T19:13:39.533

全 Javascript 解决方案更易于维护和部署。

在以下情况下，可以使用 C++ 模块：

*   您要完成的工作没有 Javascript 库。
*   服务器的那部分是 Javascript 中受 CPU 限制的瓶颈。通常情况并非如此，除了媒体处理等场景。毕竟，Node.js 的设计是基于服务器进程大部分时间都在等待的假设。

Since node-time isn't CPU-intensive, and a Javascript alternative exists, I recommend the simpler solution, which in this case is timezone-js.

# c# - 如何修复“检测到 Pinvoke 堆栈不平衡”错误

> ID：11914406
> 
> 赞同：2
> 
> 时间：2012-08-11T11:43:33.193
> 
> 标签：c#, pinvoke

我正在尝试使用 PostMessage 将密钥发送到窗口。但是在我的程序发送密钥后，调试窗口中出现错误。

出现的错误是：检测到 PInvoke 堆栈不平衡。

我想我调用 DLL 是错误的：

```
[DllImport("user32.dll")]
public static extern bool PostMessage(IntPtr hWnd, uint Msg, int wParam, Int64 lParam); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T11:54:45.440

方法签名在错误中。试试这个：

```
[return: MarshalAs(UnmanagedType.Bool)]
[DllImport("user32.dll", SetLastError = true)]
static extern bool PostMessage(HandleRef hWnd, uint Msg, IntPtr wParam, IntPtr lParam); 
```

您使用的是 32 位计算机，并且`Int64`您的问题类型错误。见[pinvoke.net](http://www.pinvoke.net/default.aspx/user32.postmessage)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T13:14:14.913

> 出现的错误是：检测到 PInvoke 堆栈不平衡。

您所看到的只是一点背景，Ria 的回答将解决您的问题。这实际上不是错误，而是MDA 产生的*警告。*托管调试助手，它是添加到 CLR、框架和调试器的额外代码，用于密切关注意外的运行时问题，并在使用调试器运行时激活。您可以查看可用的 MDA，使用 Debug + Exceptions 并展开“Managed Debugging Assistants”节点来查看它们。默认情况下，它们中的很多都被禁用，因为它们往往很吵，或者往往会产生错误的警告，或者以后已经产生了异常。请注意 pInvokeStackImbalance MDA 实际上并未在此处列出，它很特别，因为它无法关闭。

[此处](http://msdn.microsoft.com/en-us/library/d21c150d)记录了 MDA 的完整列表。pInvokeStackImbalance 的描述包含对它检测到的问题原因的体面描述：

> 平台调用调用的托管签名可能与被调用方法的非托管签名不匹配。这种不匹配可能是由于托管签名没有声明正确数量的参数**或没有为参数指定适当的大小**。MDA 也可以激活，因为调用约定（可能由 DllImportAttribute 属性指定）与非托管调用约定不匹配。

我强调了您案例的真正原因，您的 lParam 参数类型错误。wParam 类型也是错误的，但碰巧有正确的大小。当您的代码在 64 位操作系统上运行时，这些事故往往会发生。

尽管这只是一个警告，并且当您忽略它并继续运行时，您的代码似乎运行良好，但堆栈不平衡是一种非常严重的运行时问题。故障模式是不可预测的，它可能在 Debug 版本中运行得很好，但在 Release 版本中会用一个难以理解的异常来轰炸你的程序。这里的具体问题是，当您调用该方法时，您在堆栈上推送了太多数据，而 Windows 没有从堆栈中弹出足够多的数据。当你经常调用它时，它会用这个站点的名称来轰炸你的程序。这个问题往往被隐藏起来，因为从 C# 方法返回会重新平衡堆栈。在发布模式下，抖动优化器内联该方法时，所有赌注都关闭。仅当您没有附加调试器时才会这样做，这是尝试诊断的最糟糕的错误。

找到正确的 pinvoke 声明并不是特别容易。声明它们的方法不止一种，您经常会发现关于声明的故意“谎言”，以使函数更容易被调用。pinvoke.net 网站是一个相当不错的来源，尽管它倾向于过度指定声明。就像在 Ria 的示例中一样，[return:] 属性是不必要的，因为这已经是 bool 的默认编组。当您不拥有窗口句柄时，HandleRef 没有多大意义。但它会工作得很好。另一个相当不错的来源是 Pinvoke Interop Assistant，您可以[在此处找到](http://clrinterop.codeplex.com/)该工具。它产生自动生成的声明，它们并不漂亮。

最后但同样重要的是，您不能使用 PostMessage 可靠地将击键插入另一个进程的窗口。当您需要进程的键盘状态准确时，您会遇到麻烦，尤其是 Shift、Alt 和 Ctrl 键。像 Alt+Gr 这样的死键出现在具有不同布局的键盘上，特别是对于有很多变音符号或大字母表的语言。要戳打字键，您应该改用 WM_CHAR。

# ubuntu - Ubuntu>剪贴板复制，SSHK

> ID：11914407
> 
> 赞同：27
> 
> 时间：2012-08-11T11:43:47.260
> 
> 标签：ubuntu

我必须从 id_rsa.pub 复制 GitHub 的 SSH 密钥。我可以使用什么剪贴板实用程序，以及复制到剪贴板的命令行是什么。完成了，如何从剪贴板复制到文本文件或任何地方。请指教。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-11T12:21:23.003

如果您正在运行 X Window 系统，则可以使用该`xclip`实用程序。

安装：`sudo apt-get install xclip`

复印：`xclip id_rsa.pub`

复制到剪贴板：`xclip -o | xclip -sel clip`

粘贴：`xclip -o -sel clip > file.txt`

阅读源代码中的 README 文件，`xclip`了解如何使用它的更多信息。

# asp.net-mvc-4 - API 控制器 MVC 4 - 返回类型

> ID：11914415
> 
> 赞同：2
> 
> 时间：2012-08-11T11:44:34.317
> 
> 标签：asp.net-mvc-4, asp.net-web-api

在 HTTPGet API 方法中，似乎默认情况下它会以 XML 格式返回对象。我怎样才能让它以 JSON 格式返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:49:54.513

ASP.NET Web API 具有内置的内容协商，您只需在 HTTP 请求的[Accept](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-p3-payload-19#section-6.1)标头字段中指定您想要`json`的而不是`xml`.

[您可以在本文](http://weblogs.asp.net/gunnarpeipman/archive/2012/04/19/asp-net-web-api-how-content-negotiation-works.aspx)中开始了解有关内容协商的更多信息。

# android - 在 Android 中创建 PDF

> ID：11914417
> 
> 赞同：0
> 
> 时间：2012-08-11T11:44:49.257
> 
> 标签：android, pdf

我们可以在android中创建PDF文件吗？

*   我已经尝试了所有谷歌搜索。
*   还看到了更多的例子。
*   我试过这个，

    ```
    File f=new File("/data/data/com.pdf/test1.pdf");  
    Log.d("test", "created");  
    Document document = new Document();  
    PdfWriter.getInstance(document, new FileOutputStream(f));  
    document.open();            
    document.addTitle("My first PDF");
    document.addSubject("Using iText");
    document.addKeywords("Java, PDF, iText");  
    document.addAuthor("Lars Vogel");
    document.addCreator("Lars Vogel");
    Paragraph paragraph = new Paragraph("This is left aligned text with indentation");
    paragraph.setAlignment(Element.ALIGN_LEFT);
    paragraph.setIndentationLeft(50);
    document.add(paragraph);
    document.close();
    Toast.makeText(this, "Pdf Created", Toast.LENGTH_LONG).show(); 
    ```

但这给出了错误，

```
08-11 16:53:38.446: E/AndroidRuntime(2484): FATAL EXCEPTION: main
08-11 16:53:38.446: E/AndroidRuntime(2484): java.lang.NoClassDefFoundError:          com.itextpdf.text.Document
08-11 16:53:38.446: E/AndroidRuntime(2484):     at com.pdf.PDFReaderActivity.onCreate(PDFReaderActivity.java:28)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.Activity.performCreate(Activity.java:4465)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.os.Looper.loop(Looper.java:137)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at java.lang.reflect.Method.invokeNative(Native Method)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at java.lang.reflect.Method.invoke(Method.java:511)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at com .android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-11 16:53:38.446: E/AndroidRuntime(2484):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:16:01.580

我猜想包含 PdfWriter 类的 jar 没有导出到 apk 文件中。

[在这里](https://stackoverflow.com/questions/10323069/could-not-find-class-oauth-signpost-commonshttp-commonshttpoauthconsumer/10323245#10323245)寻找解决方案。

# ruby-on-rails - Ruby，检查日期是否是周末？

> ID：11914422
> 
> 赞同：31
> 
> 时间：2012-08-11T11:45:49.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的 rails 应用程序中有一个 DailyQuote 模型，其中包含股票的**日期**和**价格**。已为此模型捕获数据库中的数据，包括周末。周末价格值已设置为 0。

我想将周六和周日的所有周末价格更改为周五的价格。在 Ruby 中执行此操作的最佳方法是什么？要确定日期是在星期六还是星期日，并将其值更改为那个周末的星期五？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-11T12:07:18.440

[TFM](http://ruby-doc.org/core-1.9.3/Time.html)展示了一种识别星期几的有趣方法：

```
t = Time.now
t.saturday?    #=> returns a boolean value
t.sunday?      #=> returns a boolean value 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-06-05T00:23:09.100

## 最简单的方法：

```
today = Date.today

if today.saturday? || today.sunday? 
  puts "Today is a weekend!"
end 
```

* * *

您也可以在一周中的任何其他日子执行此操作。Ruby 非常棒，并且提供了很多这样的酷方法。我建议当你被难倒时，通过运行`.methods`它来查看类可用的内容。因此，如果您运行`Date.today.methods`，您将看到这些可用。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-11T12:00:22.663

```
require 'date'
today = Date.today
ask_price_for = (today.wday == 6) ? today - 1 : (today.wday == 0) ? today - 2 : today 
```

或者

```
require 'date'
today = Date.today
ask_price_for = (today.saturday?) ? today - 1 : (today.sunday?) ? today - 2 : today 
```

`ask_price_for`现在保存一个您想要询问价格的日期。

获取与您日期相对应的实际价格取决于您的模型和您的 ORM 库（即 ActiveRecord）。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-08-11T11:48:43.753

```
class Time
  def is_weekend?
    [0, 6, 7].include?(wday)
  end
end

time = Time.new

puts "Current Time : " + time.inspect
puts time.is_weekend? 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-12-03T12:02:49.360

从 Rails v5 开始：

```
Date.current.on_weekend? 
```

参考：

*   [api文档](https://apidock.com/rails/v5.2.3/DateAndTime/Calculations/on_weekend%3F)
*   [导轨文件](https://api.rubyonrails.org/v6.0.3.4/classes/DateAndTime/Calculations.html#method-i-on_weekend-3F)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-24T07:27:12.707

Date.today.instance_eval { 星期六？|| 星期日？}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-08T10:17:29.480

检查红宝石中两个日期范围内的周末（星期六和星期日）

```
 weekend_days = [0,6]
 if (start_date.to_date..end_date.to_date).to_a.select {|k| weekend_days.include?(k.wday)}.present?
    # you code
 end 
```

# iphone - Xcode 4.4 , IOS 5.1 simulator. Twitter framework issue

> ID：11914429
> 
> 赞同：5
> 
> 时间：2012-08-11T11:47:19.143
> 
> 标签：iphone, ios, xcode, twitter, app-store

Just upgraded to Xcode 4.4 in Mountain Lion and faced with an issue. Built-in Twitter framework doesn't work on IOS Simulator now. Looks like many developers who is upgraded to Xcode 4.4 have the same problem :

[https://dev.twitter.com/discussions/4850](https://dev.twitter.com/discussions/4850)

So the questions:

*   Is it an issue of a simulator? Would that twitter-code work in real device?
*   It's known that from IOS 6 it will be another built-in framework to connect with social media. Can the app with IOS 5 twitter-code be rejected from appstore now?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T12:16:18.857

> Is it an issue of a simulator? Would that twitter-code work in real device?

According to the thread you linked to it's a simulator-only problem. But you should **always** test your code on an actual iOS device before distributing to the store.

> It's known that from IOS 6 it will be another built-in framework to connect with social media. Can the app with IOS 5 twitter-code be rejected from appstore now?

Actually the Twitter framework was available as a built-in framework from iOS 5 onwards. So your iOS 5 compatible implementation isn't going to be rejected in iOS 6 (all things being equal). In fact, if you have a custom, non-'Twitter framework' integration this will still be acceptable - Apple aren't forcing you to use the supplied Twitter framework exclusively.

# linq - 在 .NET 2.0 中替换 VAR 数据类型

> ID：11914436
> 
> 赞同：0
> 
> 时间：2012-08-11T11:48:16.200
> 
> 标签：linq, google-maps, var

我使用的是 .NET 2.0，需要在这里实现 VAR 数据类型：

```
var doc = XDocument.Parse(result);
var sw = doc.Descendants("viewport").Elements("southwest").SingleOrDefault();
if (sw != null)
{
   var lat = (double)sw.Element("lat");
   var lng = (double)sw.Element("lng");
   // do stuff
} 
```

我改用 STRING

```
public string getLatLang(string address)
{
    string latlang = "";
    string url = "http://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&sensor=false";
    System.Net.WebClient client = new System.Net.WebClient();
    string result = client.DownloadString(url);
    string doc = System.Xml.Linq.XDocument.Parse(result).ToString();
    string sw = doc.Descendants("viewport").Elements("southwest").SingleOrDefault();
    if (sw != null)
    {
        string lat = (double)sw.Element("lat");
        string lng = (double)sw.Element("lng");
        latlang = lat + "," + lang;
        // do stuff
    }
    return latlang;
} 
```

但我得到一个错误：

> “字符串”不包含“后代”的定义

请帮我在这里更换`VAR`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:06:05.240

要替换 var，请研究方法的实际返回类型并将其更改为该类型。例如，XDocument.Parse 可以在 MSDN [here](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)上找到。在文档中，它声明“从字符串创建新的 XDocument”，因此，返回类型必须是 XDocument。如果您深入研究其中一个方法重载（[例如这个](http://msdn.microsoft.com/en-us/library/bb345532.aspx)），您将看到实际方法的签名，它确认它确实返回了一个 XDocument。

此外，Visual Studio 具有智能感知功能，因此如果您将鼠标悬停在某物上，您通常可以获得有关它的详细信息。尝试键入`System.Xml.Linq.XDocument.Parse(`，当您键入第一个括号时，您应该会在 Visual Studio 中看到一个弹出窗口，告诉您正在使用的方法的返回类型是什么。如果智能感知不起作用，请检查以确保您有对 DLL 的引用。

另请注意，Visual Studio 具有所谓的`Object Explorer`. 这将允许您查看正在使用的每个对象的方法签名，其中包括返回类型。只需右键单击任何对象或方法，然后选择“转到定义”。希望您使用的 Visual Studio 版本具有此功能，如果没有，请考虑升级，因为它非常有用。

```
public string getLatLang(string address) 
{ 
    string latlang = ""; 
    string url = "http://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&sensor=false"; 
    System.Net.WebClient client = new System.Net.WebClient(); 
    string result = client.DownloadString(url); 
    XDocument doc = System.Xml.Linq.XDocument.Parse(result); 
    XElement sw = doc.Descendants("viewport").Elements("southwest").SingleOrDefault(); 
    if (sw != null) 
    { 
        string lat = sw.Element("lat").Value;  
        string lng = sw.Element("lng").Value;  
        latlang = String.Format("{0},{1}", lat, lng); 
        // do stuff 
    } 
    return latlang; 
} 
```

编辑：请注意，由于 LINQ 和重新分发 System.Core 违反 EULA，如果没有一些黑客攻击，此解决方案将无法在 .NET 2.0 中运行，因此您可能必须将 XDocument 更改为 XmlDocument 并弄清楚如何将其与 Google 的返回值。我相信它有一个 Load 方法，或者 LoadXml 方法，不记得哪个是哪个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T11:59:37.620

var 本身不是数据类型，它只是从相等运算符的另一端获取数据类型。[在此处阅读更多信息](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

因此，用字符串替换每个 var 将无济于事，您将不得不使用正确的数据类型，而不是`var`如果您不能使用`var`.
你的情况下的错误是源于你我认为在`string doc = System.Xml.Linq.XDocument.Parse(result).ToString();`替换 var 时你应该使用的这一行，[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)但你使用 a`string`来适应使用`ToString()`函数的错误。
**编辑： - 评论后**

```
public string getLatLang(string address)
{
    string latlang = "";
    string url = "http://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&sensor=false";
    System.Net.WebClient client = new System.Net.WebClient();
    string result = client.DownloadString(url);
    XDocument doc = System.Xml.Linq.XDocument.Parse(result);
    XElement sw = doc.Descendants("viewport").Elements("southwest").SingleOrDefault();
    if (sw != null)
    {
        string lat = (double)sw.Element("lat").Value;
        string lng = (double)sw.Element("lng").Value;
        latlang = lat + "," + lang;
        // do stuff
    }
    return latlang;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:06:42.823

`var`关键字用于隐式类型变量。您让编译器推断变量的类型。但在幕后，一旦发生编译，变量仍然被分配特定的类型。

你做错了什么是调用`.ToString()`你的`XDocument`. 现在你只有一个大字符串，你试图把它当作仍然是一个`XDocument`.

试试这个。

```
XDocument doc = System.Xml.Linq.XDocument.Parse(result);
XElement = doc.Descendants("viewport").Elements("southwest").SingleOrDefault(); 
```

**编辑**

终于来到一台装有 Visual Studio 的电脑前。你还有几个问题。

以下将在 .NET 3.5+ 中编译。

```
public string getLatLang(string address)
{
    string latlang = "";    
    string url = "http://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&sensor=false";
    System.Net.WebClient client = new System.Net.WebClient();
    string result = client.DownloadString(url);
    XDocument doc = System.Xml.Linq.XDocument.Parse(result);
    XElement sw = doc.Descendants("viewport").Elements("southwest").SingleOrDefault();

    if (sw != null)
    {
        string lat = sw.Element("lat").ToString();
        string lng = sw.Element("lng").ToString();
        latlang = lat + "," + lng;
        // do stuff
    }
    return latlang;
} 
```

（请注意，您稍后将值显式转换为`double`并且仍将其类型定义为`string`）。

至于您在评论中提到的错误，我不确定......该成员包含在（[MSDN](http://msdn.microsoft.com/en-us/library/system.xml.linq.extensions)`Elements<T>(IEnumerable<T>, XName)` ）的扩展类中，所以它应该可以工作。确保您还将该指令包含在其他指令中：`System.Xml.Linq``System.Linq``using`

`using System.Linq;`

顺便说一句，我实际上看不到您编写的大量代码将在 .NET 2.0 中运行。和命名空间直到 .NET 3.5 才引入`System.Xml.Linq`。`System.Linq`如果您真的在使用 .NET 2.0，那么您可能希望参考[此线程](https://stackoverflow.com/questions/5904813/xdocument-for-net-2-0)来解决您正在使用的框架版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:37:03.473

好的，现在我用**.NET 2.0**尝试了所有可能的方法，我想出了这个解决方案，我知道这是***非常低级的编码***，但它是***2.0 唯一可能的解决方案***，这对于**.NET 2.0**来说非常好！

```
public string getLatLang(string address)
{
    string latlang = "";
    string url = "http://maps.googleapis.com/maps/api/geocode/xml?address=" + address + "&sensor=false";
    System.Net.WebClient client = new System.Net.WebClient();
    string result = client.DownloadString(url);

    int firstlat = result.IndexOf("<lat>");
    int lastlat = result.IndexOf("</lat>");

    int firstlng = result.IndexOf("<lng>");
    int lastlng = result.IndexOf("</lng>");

    string _latitude = result.Substring(firstlat+5, (lastlat-5) - firstlat);
    string _longitude = result.Substring(firstlng+5, (lastlng-5) - firstlng);

    latlang = _latitude + "," + _longitude;
    return latlang;
} 
```

# c - 我是否使用循环来迭代小尺寸（比如 2 或 3）的数组？

> ID：11914442
> 
> 赞同：2
> 
> 时间：2012-08-11T11:49:03.697
> 
> 标签：c, performance, loops

考虑这个简单的问题：

假设我有一个 1x4 数组。我必须在它的每个元素中添加 5。那么是否建议使用循环。消除代码因素的大小和良好的代码组织，还有其他原因为什么我应该使用循环？会不会比执行 4 行直线代码花费更多的时间，其中我向每个元素添加 5，因为控件必须返回 5 次并更改循环变量的值？如果我们考虑一个 1x2 数组呢？然后我们甚至没有大小问题，两种类型的代码都包含 2 行。

虽然我在 C 中标记了这个问题，但我也想用其他语言了解这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T11:54:44.933

你真的不需要担心这个。以您认为更容易阅读的方式编写，然后让编译器决定是否有必要执行一些循环展开优化。信任编译器供应商，他们的开发人员非常擅长理解这些与优化相关的东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:51:39.913

这是一个微优化。如果您不必保存循环级别，则不必担心展开这样的循环。重要的因素是可读性和可维护性。对于两次迭代的循环，我认为您不会通过添加循环来增加可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:57:06.403

当你拿这些小例子时，你不应该太在意代码的性能......以更容易理解的方式编码......

使用循环为您提供了一种扩展示例的方法，而无需在任何地方进行重大更改。

# php - 仅在特定时间每分钟运行一次 cron 作业？

> ID：11914445
> 
> 赞同：24
> 
> 时间：2012-08-11T11:49:18.523
> 
> 标签：php, cron, centos

您如何仅在特定时间每分钟运行一次 cron 作业？像这样：

> 它只会检查从上午 11 点到上午 12 点、下午 4 点到下午 5 点和晚上 9 点到晚上 10 点的每一分钟

这对我来说似乎很复杂，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-11T12:11:17.937

正确的解决方案：

```
* 11,16,21 * * * 
```

因为如果您使用以前的解决方案：

```
0-59 11-12,16-17,21-22 * * * * 
```

工作将在 12:40 或 17:59 开始。它不在上午 11 点到 12 点、下午 4 点到下午 5 点和晚上 9 点到 10 点的范围内。

**更新：**

传统（继承自 Unix）cron 格式由五个用空格分隔的字段组成：

```
*    *    *    *    *  command to be executed
┬    ┬    ┬    ┬    ┬
│    │    │    │    │
│    │    │    │    │
│    │    │    │    └───── day of week (0 - 6) (0 is Sunday, or use names)
│    │    │    └────────── month (1 - 12)
│    │    └─────────────── day of month (1 - 31)
│    └──────────────────── hour (0 - 23)
└───────────────────────── min (0 - 59) 
```

[nnCron](http://www.nncron.ru/)可以使用传统和“增强”版本的 cron 格式，它有一个额外的（第 6 个）字段：Year。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T11:52:12.087

按照[cron 格式](http://www.nncron.ru/help/EN/working/cron-format.htm)

```
<Minute> <Hour> <Day_of_the_Month> <Month_of_the_Year> <Day_of_the_Week> <Year>

* * * * * *
| | | | | | 
| | | | | +-- Year              (range: 1900-3000)
| | | | +---- Day of the Week   (range: 1-7, 1 standing for Monday)
| | | +------ Month of the Year (range: 1-12)
| | +-------- Day of the Month  (range: 1-31)
| +---------- Hour              (range: 0-23)
+------------ Minute            (range: 0-59) 
```

解决方案应该是

```
* 11,16,21 * * * * 
```

# php - mysql中数组的数据类型

> ID：11914446
> 
> 赞同：8
> 
> 时间：2012-08-11T11:49:38.870
> 
> 标签：php, mysql, arrays, blob

我有一个数组类型的变量，我想将它按原样存储在数据库（mysql）中，当我应用我通常在 java 中使用的 tinyblob 进行显示时，它返回异常输出。那么 php.ini 中数组的正确数据类型是什么？

```
$countryGoup=array("USA","FRANCE","GERMANY","BRITAIN"); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-11T11:52:36.290

你可以：

## 1) 如果值很少且固定，则使用 SET 数据类型

`CREATE TABLE`您将语句中的列定义为`SET('USA', 'France', 'Germany', ...) NOT NULL`（非 null 可选），并使用如下查询：

```
INSERT INTO myTable SET countries="USA,Germany"; 
```

* * *

## 2) 使用带有外部引用的查找表

所以你定义一个`countries`表：

```
id_country|name
----------+-----------
1         |USA
2         |Germany
3         |France 
```

并定义一个将您的主要对象（例如“用户”）链接到国家/地区的**数据透视表**，从而建立**多对多关系**。

F.ex.，`users_countries`表格将以这种方式将表格链接`users`到`countries`表格：

```
id_user|id_country
------------------
1      |1
1      |2
2      |1 
```

在此示例中，用户 1 与 ID 为 1 和 2 的国家（美国和德国）相关联，用户 2 仅与美国相关联，依此类推

* * *

## 3) 使用逗号分隔的字符串，或其他分隔符，或序列化数组

这涉及使用服务器端语言（在您的情况下为 PHP）将值与一些分隔符（例如逗号`,`或管道`|`）连接起来：

```
$countries = array("USA", "Russia", "Iran");
$countriesString = implode (",", $countries); // $countriesString = "Usa,Russia,Iran"
$query = "INSERT INTO mytable SET countries = '" . $countriesString . "'"; 
```

> （注意：字符串值未转义以用于示例目的，但这不是一个好习惯）

当您从数据库中*检索*值时，您将检索您放入的字符串，并再次获得一个带有 的数组`$array = explode(",", $retrievedValueFromDb)`，提供相同的分隔符。

**更新：**

## 4) 检索值 find_in_set() MySQL 函数

您还可以依赖该`find_in_set(needle, field)`函数，如果字符串存在于逗号分隔值字段中，该函数将返回大于零的整数。

因此，如果您使用方法 1) 并具有类似的字符串字段`"USA,Germany"`，则可以使用以下方法获取其中`USA`存在的列：

```
SELECT * FROM myTable WHERE find_in_set('USA', countries) <> 0 
```

* * *

**如果您的固定值很少，方法 1)**可以工作，查询也很容易。缺点是您只能使用 64 个值，这些值必须是固定的，并且不能包含逗号 (,) 作为分隔符。

**方法 2)**是最标准化和最正确的，它也是规范化和查询效率最高的

**方法 3)**很简单，但需要额外的处理，对于 SQL 来说并不那么容易

如其他地方所述， dbms**中没有“数组”数据类型**，您必须使用一些解决方法。

# ruby-on-rails - 在设计注册中保留查询字符串

> ID：11914447
> 
> 赞同：7
> 
> 时间：2012-08-11T11:49:43.853
> 
> 标签：ruby-on-rails, ruby, devise, query-string

我正在使用带有设计的rails进行注册。我还添加了一个邀请码，所以不是每个人都可以注册。

邀请码通过“/users/sign_up?invite_code=wajdpapojapsd”之类的查询字符串传输，并通过“f.hidden_​​field :invite_code, :value => params[:invite_code] 添加到注册表单的隐藏字段中”。

这工作得很好。唯一的问题是，如果注册没有得到验证和拒绝，设计重定向到“/users”并丢失其中包含invite_code的查询字符串。

由于尝试失败后电子邮件仍保留在注册表单中，我相信这也适用于邀请码。作为最坏的解决方案，在注册失败并丢失电子邮件后重定向 :back，但保留邀请码，会比现在的工作方式更好。

编辑：到目前为止，我已经为设计设置了一个注册控制器，但不知道如何获得所需的行为。

任何关于如何保留查询字符串或只是邀请代码的帮助都会很棒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T13:10:13.537

我现在找到了一个可行的解决方案。

我使用 jstr 的答案来设置控制器以进行设计并添加了“会话”行。

```
class MyRegistrationsController < Devise::RegistrationsController
  prepend_view_path "app/views/devise"

  def create
    super
    session[:invite_code] = resource.invite_code
  end

  def update
    super
  end
end 
```

之后我在 devise/registrations/new.html.erb 中添加了以下内容

```
<% if params[:invite_code]
  @invite_code = params[:invite_code]
else
  @invite_code = session[:invite_code]
end %> 
```

并将 hidden_​​field 更改为

```
<%= f.hidden_field :invite_code, :value => @invite_code %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:01:25.383

您可能需要制作自己的子类 Devise 控制器才能使其正常工作。

[这个答案](https://stackoverflow.com/a/4546122/387310)很好地描述了如何做到这一点。

基础：

1.  如果您还没有安装 Devise 视图`rails generate devise:views`
2.  创建一个子类`Devise::RegistrationsController`
3.  更新您的设计路线声明以让设计使用您的子类控制器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-25T13:03:38.687

@James Lever 的解决方案有一个缺点。*邀请码*保持在会话中。在某些解决方案中，它可能会导致问题。另一种选择是：

```
def create
  # set invite code to session:
  session[:invite_code] = resource.invite_code
  # here the form is rendered and invite code from session would be used:
  super

  # delete invite code from session: 
  session.delete('invite_code')
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:04:42.040

为什么不使用这样的实例变量

```
@invite_code = params[:invite_code] 
```

然后，当注册未通过验证时，您可以在视图中使用该变量，该变量将显示为注册失败。

我的意思是，它被重定向了，您应该将邀请代码参数与实例变量一起保留。对不起，如果我弄错了。

# php - 模型缺失，Codeigniter

> ID：11914449
> 
> 赞同：0
> 
> 时间：2012-08-11T11:50:26.937
> 
> 标签：php, codeigniter, models

我正在使用并且一直在使用框架 CodeIgniter 一段时间。它在我的本地主机上完美运行，一旦我将它上传到服务器，它会给出以下错误消息

> > 找不到您指定的模型：auth_model

需要指出的是，它可以完美地在我的 apache 上运行，您知道问题出在哪里吗？我正在与 webbhotel 的客户支持人员交谈，但他们似乎找不到任何东西。

提前致谢。

编辑：它设法加载许多不同的文件、会话库、我自己的控制器、帮助程序和视图文件。它只是它停止的模型，我将它们都命名为“Auth_model.php”、“Login_model.php”等。模型本身被声明为 class Auth_model extends CI_Model {}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:26:37.210

事实证明，webhotel (one.com) 在您上传时出现延迟，因此实际解决它有点麻烦，但它就在这里。除了 MY_Controller 之外的每个文件名都需要小写。所以有人指出了答案。

问题出在 codeigniter 上，因为它只在某些情况下寻找小写字母。所以，是的，从现在开始，模型应该是小写的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:18:59.420

听起来像路径问题，

我会首先检查您的起点并获取一些数据进行比较

*   CodeIgniter FCPATH 和 APPATH 都在主 index.php 文件中设置，

    *   FCPATH = 根
    *   APPATH = 应用程序文件夹

找出你的路径设置，检查你的 config/config.php 文件，确保那里有正确的信息。

只是一个想法，您是否使用通用的身份验证库？Sucb asfreak/ion/bit/etc auth's

会话错误是由回显数据引起的，您可以通过谷歌搜索错误并从那里获得对错误的正确理解。

# java - 将偶数和奇数写入 dat 文件

> ID：11914450
> 
> 赞同：0
> 
> 时间：2012-08-11T11:50:26.653
> 
> 标签：java, file-io

我已经开始学习 Java，并且遇到了一个应该将一些内容写入`numbers.dat`文件的简单程序的问题。

我面临两个问题：

1.  我得到的输出如下：

    > 2, 6, 12, 20, 30, 42, 56, 72, 90, 110, 132, 156, 182, 210, 240, 272, 306, 342, 380, 420, 462, 506, 552, 600, 650, 702, 756, 812, 870, 930, 992, 1056, 1122, 1190, 1260, 1332, 1406, 1482, 1560, 1640, 1722, 1806, 1892, 1980, 2070, 35562, 2450, 24556, 2 ..

    什么时候应该：

    对于偶数：

    > 2,4,6,8,10,12,14,……,98,100

    对于奇数：

    > 2,4,6,8,10,12,14,……,98,100,1,3,5,7,9,……..97,99

2.  我的第二个问题是输出没有写入`numbers.dat`文件！都是空白。

我试图解决的书中的问题是：

> 编写一个名为 TextFileIO.java 的程序来创建一个名为 numbers.dat 的文件。然后创建一个算法，写入从 1 到 100 的所有偶数整数，用逗号分隔。
> 
> 创建文件后，关闭并重新打开文件并将结果显示在屏幕上。显示结果后，将 1 到 100 的奇数整数附加到文件末尾，用逗号分隔。重新打开文件并显示结果。文件的内容应该是从 1 到 100 的偶数，用逗号分隔，然后是从 1 到 100 的奇数，用逗号分隔。该程序的输出将类似于以下内容：
> 
> 2,4,6,8,10,12,14,……,98,100
> 
> 2,4,6,8,10,12,14,……,98,100,1,3,5,7,9,……..97,99

以下是我到目前为止尝试过的代码：

**文本文件IO.java**

```
package package1;

import java.io.*;
import java.util.*;

//class definition
public class textFileIO{

    //The main function
    public static void main(String args[]) {

        //This declares a file to open.
        File outFile = new File("numbers.dat");

        int sumEven = 0;
        int sumOdd = 0;

        //File IO requires a try/catch block to prevent the program from crashing
        try {

            //a buffered writer is used to allow us to write to the file.
            BufferedWriter writer = new BufferedWriter(new FileWriter(outFile));

            //This for loop handles adding all of the numbers together
            for(int i = 1; i < 100; i += 2) {
                sumEven += i + 1;
                writer.write("" + sumEven + ", ");
            }

            //adding a new line and closing the file
            writer.newLine();
            writer.close();

            //A buffered Reader is used for reading a new file.
            BufferedReader reader = new BufferedReader(new FileReader(outFile));

            //Because I only add a new line at the end, I only need to read the first line.
            System.out.println(reader.readLine());

            //I need to write again, so I close the reader and open the writer.
            reader.close();

            //you need to create another object to append to the file
            //writer.open();
            BufferedWriter writer2 = new BufferedWriter(new FileWriter(outFile));

            //This for loop is identical to the previous one, except for odd numbers
            for(int i = 1; i < 100; i += 2) {
                sumOdd += i;
                writer2.write("" + sumOdd + ", ");
            }

            writer.newLine();
            writer.close();

            //The same here. You need to create another reader
            //reader.open();
            BufferedReader reader2 = new BufferedReader(new FileReader(outFile));
            System.out.println(reader2.readLine());

        }
        catch (Exception e) {

        }
    }
} 
```

**编辑 2**

我更改了我的代码，这是我最新的代码。我仍然有问题。控制台输出屏幕显示 49 和 50 作为输出，我的 numbers.dat 文件现在仅显示逗号分隔的奇数列表。我现在做错了什么？

```
import java.io.*;
    import java.util.*;
    public class TextFileIO {
        public static void main(String[] args) throws Exception {
            //Clear the contents of numbers.dat if already exists and populated
            File fileOne = new File("numbers.dat");
            fileOne.delete();
            File newFile = new File("numbers.dat");
            newFile.createNewFile();
            //Create writer object
            PrintWriter writer = new PrintWriter(new FileWriter("numbers.dat"));
            //Loop from 1 to 100
            for (int i = 1; i <= 100; i++) {
                //If number is even, write to file  
                if (i % 2 == 0) {
                    writer.print(i + ",");
                }
            }
            //Close writer object.
            writer.close();
            //Read from file
            FileInputStream fileStream = new FileInputStream("numbers.dat");
            DataInputStream in = new DataInputStream(fileStream);
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            //Print line
            System.out.println(reader.read());
            reader.close();
            //Write all odd numbers to file
            PrintWriter writer2 = new PrintWriter(new FileWriter("numbers.dat"));
            //Loop from 1 to 100
            for (int i = 1; i <= 100; i++) {
                //If number is odd, write to file  
                if (i % 2 == 1) {
                    writer2.print(i + ",");
                }
            }
            writer2.close();
            //Read from file
            FileInputStream fileStream2 = new FileInputStream("numbers.dat");
            DataInputStream in2 = new DataInputStream(fileStream2);
            BufferedReader reader2 = new BufferedReader(new InputStreamReader(in2));
            //Print line
            System.out.println(reader2.read());
            reader.close();
        }

    } 
```

**编辑 3：**我仍然无法获得所需的输出。我仍然在控制台中得到 49 和 50 的输出，在 numbers.dat 文件中，输出仍然只是用逗号分隔的奇数。我无法理解我的代码到底要改变什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:02:52.983

要打印正确的数字，您应该更改

偶数循环：

```
//This for loop handles adding all of the numbers together
for(int i = 2; i <=100; i += 2) {
writer.write("" + i + ", ");
} 
```

奇数循环：

```
//This for loop is identical to the previous one, except for odd numbers
for(int i = 1; i < 100; i += 2) {
writer2.write("" + i + ", ");
} 
```

并替换您的以下语句：

```
System.out.println(reader.read()); 
```

和

```
System.out.println(reader.readLine()); 
```

你应该完成了。

# 编辑

```
public class textFileIO {
    public static void main(String[] args) throws Exception {
        //Clear the contents of numbers.dat if already exists and populated
        File fileOne = new File("numbers.dat");
        fileOne.delete();
        File newFile = new File("numbers.dat");
        newFile.createNewFile();
        //Create writer object
        PrintWriter writer = new PrintWriter(new FileWriter("numbers.dat"));
        //Loop from 1 to 100
        for (int i = 1; i <= 100; i++) {
            //If number is even, write to file  
            if (i % 2 == 0) {
                writer.print(i + ",");
            }
        }
        //Close writer object.
        writer.close();
        //Read from file
        FileInputStream fileStream = new FileInputStream("numbers.dat");
        DataInputStream in = new DataInputStream(fileStream);
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        //Print line
        System.out.println(reader.readLine());
        reader.close();
        //Write all odd numbers to file
        PrintWriter writer2 = new PrintWriter(new FileWriter("numbers.dat"));
        //Loop from 1 to 100
        for (int i = 1; i <= 100; i++) {
            //If number is odd, write to file  
            if (i % 2 == 1) {
                writer2.print(i + ",");
            }
        }
        writer2.close();
        //Read from file
        FileInputStream fileStream2 = new FileInputStream("numbers.dat");
        DataInputStream in2 = new DataInputStream(fileStream2);
        BufferedReader reader2 = new BufferedReader(new InputStreamReader(in2));
        //Print line
        System.out.println(reader2.readLine());
        reader.close();
    }
} 
```

这对我来说非常有效，这是输出......

> 2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50, 52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100, 1, 3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51, 53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:00:47.157

一些东西：

1.  对于第二个写入器（writer2），您需要在 FileWriter 构造函数中传入一个“true”值。否则，它将简单地用新内容覆盖 outfile（请参阅[FileWriter Constructor](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)）

    PrintWriter writer2 = new PrintWriter(new FileWriter("numbers.dat" **, true** ));

2.  正如 Govan 提到的，你没有关闭 writer2。这就是为什么你的文件是空白的。如果您调用 writer2.close，则会调用 BufferedWriter 的“flush”方法。“flush”实际上是强制写入器将数据写入文件（[何时刷新 BufferedWriter](https://stackoverflow.com/questions/908168/when-to-flush-a-bufferedwriter)）。

3.  正如 Bharat 提到的，您应该重新编写循环以使用“i”变量来编写，而不是 sumEven。你 sumEven 的写法，你会得到以下内容：

    i=1, sumEven = sumEven + i + 1 = 0 + 1 + 1 = 2

    i=3, sumEven = sumEven + i + 1 = 2 + 3 + 1 = 6

    i=5, sumEven = sumEven + i + 1 = 6 + 5 + 1 = 12

    ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:14:58.237

你的第一个循环可以是这样的

```
for (i = 0; i < 100 ; i+2)
{ 
   if (i != 0) {
    writer.print(", ");
   } 
    writer.print(i+2);
} 
```

第二个应该是这样的

```
for (i = 0; i < 100 ; i+2)
{ 
    writer.print( ", " +(i+1));
} 
```

否则你必须在行尾多加一个逗号！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T21:26:49.997

我对您的代码进行了一些更改。

首先，您不需要两个作者，也不需要两个读者。

您的单个写入器可以写入偶数和奇数，因为您只写入一个文件。我将考虑两个编写器的情况是，如果您同时分别编写一个奇数文件和一个偶数文件。

无论如何，我只是注释掉了绒毛的东西。如果你删除所有的评论，代码应该更简单，更有效，尤其是更易读。

```
import java.io.*;
    import java.util.*;
    public class TextFileIO {
        public static void main(String[] args) throws Exception {
            //Clear the contents of numbers.dat if already exists and populated
            File fileOne = new File("numbers.dat");
            fileOne.delete();
            File newFile = new File("numbers.dat");
            newFile.createNewFile();
            //Create writer object
            PrintWriter writer = new PrintWriter(new FileWriter("numbers.dat"));
            //Loop from 1 to 100
            for (int i = 1; i <= 100; i++) {
                //If number is even, write to file  
                if (i % 2 == 0) {
                    writer.print(i + ",");
                }
            }
            //Close writer object.
            //writer.close();
            //Read from file
            //FileInputStream fileStream = new FileInputStream("numbers.dat");
            //DataInputStream in = new DataInputStream(fileStream);
            //BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            //Print line
            //System.out.println(reader.readLine());
            //reader.close();
            //Write all odd numbers to file
            //PrintWriter writer2 = new PrintWriter(new FileWriter("numbers.dat"));
            //Loop from 1 to 100
            for (int i = 1; i <= 100; i++) {
                //If number is odd, write to file  
                if (i % 2 == 1) {
                    writer.print(i + ",");
                }
            }
            writer.close();
            //Read from file
            FileInputStream fileStream2 = new FileInputStream("numbers.dat");
            DataInputStream in2 = new DataInputStream(fileStream2);
            BufferedReader reader2 = new BufferedReader(new InputStreamReader(in2));
            //Print line
            System.out.println(reader2.readLine());
            reader2.close();
        }

    } 
```

稍微清理一下代码，你会得到下面的

```
import java.io.*;
import java.util.*;
public class TextFileIO {
    public static void main(String[] args) throws Exception {
        //Clear the contents of numbers.dat if already exists and populated
        File fileOne = new File("numbers.dat");
        fileOne.delete();
        File newFile = new File("numbers.dat");
        newFile.createNewFile();
        //Create writer object
        PrintWriter writer = new PrintWriter(new FileWriter("numbers.dat"));
        //Loop from 1 to 100
        for (int i = 1; i <= 100; i++) {
            //If number is even, write to file  
            if (i % 2 == 0) {
                writer.print(i + ",");
            }
        }
        //Loop from 1 to 100
        for (int i = 1; i <= 100; i++) {
            //If number is odd, write to file  
            if (i % 2 == 1) {
                writer.print(i + ",");
            }
        }
        writer.close();
        //Read from file
        FileInputStream fileStream = new FileInputStream("numbers.dat");
        DataInputStream in = new DataInputStream(fileStream);
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        //Print line
        System.out.println(reader.readLine());
        reader.close();
    }
} 
```

# java - 会话找不到以前会话的变量

> ID：11914455
> 
> 赞同：0
> 
> 时间：2012-08-11T11:51:35.263
> 
> 标签：java, html, jsp, web-applications, servlets

我正在处理多个文件和 servlet，并通过以下方式将变量作为标志传递：

managerPage.jsp：

```
<fieldset>
  <legend>To open a new account</legend> 
  <form action="employeeTransaction1">    
      <input type="hidden" name="hdField" value="managerFlagOn" />
      <input type="submit" value="Press here to continue" />
  </form>
</fieldset> 
```

现在我转到**employeeTransaction1** servlet：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{

    HttpSession session = request.getSession();
    synchronized(session) 
    {
        String hiddenValue = request.getParameter("hdField");

        // then the redirection was made from a Manager's page
        if (hiddenValue.equals("managerFlagOn") == true) 
        {
            session.setAttribute("managerQuery1", hiddenValue);
        }
        // forwards to the page employeeOpenNewAccount.jsp
        request.getRequestDispatcher("/WEB-INF/results/employeeOpenNewAccount.jsp").forward(request, response);
    }

} 
```

在这里，我获取隐藏的值并将其放在 name 下`managerQuery1`。

然后我被转发到`employeeOpenNewAccount.jsp`：

**员工OpenNewAccount.jsp：**

```
<!-- EMPLOYEE OP 1 -  open a new account -->

<!DOCTYPE html>
<html>
<head><title>Employee's transaction page - open a new account</title>
<link rel="stylesheet"
      href="./css/styles.css"
      type="text/css"/>
</head>
<body>

<h1>Employee's transaction page!</h1>
<h1>
Open a new Bank account
</h1>

<!-- from here redirecting to the servelet that's called "employeeOperation1" -->

<fieldset>
  <legend>Please fill the followings</legend>
  <form action="employeeOperation1"> 
    First-name : <input type="text" name="firstName"><br>
    Last-name : <input type="text" name="lastName"><br>
    Address : <input type="text" name="address"><br>
    ID-number : <input type="text" name="idNumber"><br>
    User-name : <input type="text" name="userName"><br>
    Password : <input type="text" name="password"><br>
    <input type="submit" value="Register">
  </form>
</fieldset>

</body></html> 
```

现在我去`employeeOperation1`servlet ：

**员工操作1：**

```
@WebServlet("/employeeOperation1")
public class EmployeeServlet1 extends HttpServlet {
    private static final long serialVersionUID = 1L;

    HttpSession session = request.getSession();
    synchronized(session) 
    {

       String manager = request.getParameter("managerQuery1");   // the value is null
        ...
        ...
    }
} 
```

而现在`manager` 抢后的价值`managerQuery1` 是`null`。

为什么它是空的？我认为会话变量应该一直保留到程序结束。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T11:57:14.497

您在会话属性中设置 managerQuery1，并尝试从请求参数中获取它。

从会话中获取它，你就完成了。

```
String manager = session.getAttribute("managerQuery1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T05:13:00.473

```
String manager = session.getAttribute("managerQuery1"); 
```

**我认为你需要转换成 String**

```
String manager =(String) session.getAttribute("managerQuery1"); 
```

**您可以关注以获得更多想法。**

```
 javax.servlet.http.HttpSession session = request.getSession(); 
```

**完成后，您可以像这样设置会话对象：** session.setAttribute("name","value");

**要检索该值，请执行以下操作：**

```
 String foo = (String) session.getAttribute("name"); 
```

# pygtk - 替换 gnome.help_display()

> ID：11914458
> 
> 赞同：1
> 
> 时间：2012-08-11T11:51:59.040
> 
> 标签：pygtk, gnome, pygobject, gnome-3

我正在考虑将 pygtk 应用程序移植到 Gtk 3 和 gobject-introspection。在菜单中选择帮助时，代码会调用`gnome.help_display('appname')`以显示它。

该`gnome`软件包是 Gnome 2 的一部分——在 Ubuntu 中，它是[python-gnome2](http://packages.ubuntu.com/precise/python-gnome2)的一部分，具有许多 Gnome 2 依赖项。我找不到 Gnome 2 的任何等效包。有没有办法在不依赖 Gnome 2 的情况下实现相同的功能？

除了该函数调用之外，该应用程序对 Gnome 库没有特殊要求。因此，以 Docbook 格式显示帮助的独立于桌面的方式将是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T23:58:24.643

您可以使用`Gtk.show_uri()` 例如：

```
$ python
>>> from gi.repository import Gtk
>>> Gtk.show_uri(None, "help:evince", 0) 
```

第一个参数是屏幕，第二个是 URI，第三个是时间戳。

关于文档，我建议您使用[Mallard](http://projectmallard.org/)，它比 DocBook 更简单，并且面向构建面向主题的文档。

# cakephp - CakePHP 错误中的自定义帮助程序

> ID：11914459
> 
> 赞同：2
> 
> 时间：2012-08-11T11:52:00.710
> 
> 标签：cakephp, helper, cakephp-2.1, view-helpers

经验丰富的程序员，但对 CakePHP 2.1 很陌生，我花了一天的时间努力让自定义 Helper 按照手册在 View 中工作：http: [//book.cakephp.org/2.0/en/views/helpers.html](http://book.cakephp.org/2.0/en/views/helpers.html)

我无法找到答案，非常感谢任何 Cake 专业知识。

我在 app/Helper/EntriesHelper.php 中的帮助文件：

```
App::uses('AppHelper', 'View/Helper');

class EntriesHelper extends AppHelper {

    public function __construct(View $view, $settings = array()) {
        parent::__construct($view, $settings);
    }

    public function spanWrapper($content) {

        if(substr($content,0,1) == "@") {
            return "<span class='label label-warning'>$content</span>";
        }
        else if(substr($content,0,1) == "#") {
            return "<span class='label label-default'>$content</span>";
        } 
        else if (substr($content,0,4) == "http" || substr($content,0,3) == "www") {
            return "<span class='label'>$content</span>";
        }

        return $content;

    }

} 
```

我在 app/Controller/EntriesController 中的控制器：

```
App::uses('AppController', 'Controller');

class EntriesController extends AppController {

    public $helpers = array('Form', 'Html', 'Js', 'Time');

    #public $components = array('RequestHandler');

    #public $viewClass = 'Json';

    public function index() {

        $helpers[] = 'spanWrapper';
        $this->Entry->recursive = 1;
        $this->set('entries', $this->paginate());
        #$this->set('_serialize', array('entries'));

    }
} 
```

但是来自我的视图的呼叫失败：

```
$this->Entries->spanWrapper($entry['Entry']['title']); 
```

出现错误：

```
Notice (8): Undefined property: View::$Entries [CORE/Cake/View/View.php, line 806]
Fatal error: Call to a member function spanWrapper() on a non-object in <path removed>/app/View/Entries/index.ctp on line 35 
```

因此，未定义属性的通知可能会导致致命错误......但是为什么会这样，如果它是按照食谱实现的呢？

达伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:01:04.443

正确的语法是`$this->helpers[] = 'spanWrapper';`在方法中加载帮助程序，或者将其添加到公共`$helpers`数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:54:16.150

如果你想在整个控制器中使用你的助手，你应该将它添加到`$helpers`你的数组中`EntriesController`：

```
class EntriesController extends AppController {

  public $helpers = array('Form', 'Html', 'Js', 'Time', 'Entries');

  /* ... */

} 
```

如果您在整个应用程序中需要帮助程序，您可以将其添加到`AppController`相同的方式中。

如果另一方面您只需要在一个视图中使用它，您可以选择仅在其中动态加载它。在您看来，请[`HelperCollection->view()`](http://api20.cakephp.org/class/helper-collection#method-HelperCollectionload)在您第一次使用帮助程序之前调用：

```
$this->Helpers->load('Entries'); 
```

CakePHP 书中对这三种方法都有[很好的记录。](http://book.cakephp.org/2.0/en/views/helpers.html)

# jquery - jQuery .hide() 和 .show() 在点击页面之前不起作用

> ID：11914464
> 
> 赞同：0
> 
> 时间：2012-08-11T11:52:23.733
> 
> 标签：jquery

好吧，这很奇怪。在我的页面上，每当我在一个元素上调用 .hide() 或 .show() 时，除非我单击页面上的其他位置（任何位置），否则什么都不会发生。这种行为没有更早发生，我不确定我做了什么导致它蔓延。

我使用 jQuery 1.7.2 和 bootstrap 作为我的 css 框架（有很多修改）。该行为发生在 Chrome、Firefox 和 Safari（在 OSX 上）。我已经将 javascript 缩减为 jQuery 和我的 .hide() 调用，但它仍然会发生。控制台中没有显示错误消息。

我什至不知道如何调试这个问题。我觉得这绝对是奇怪的，谷歌搜索没有发现任何东西。我可以用开发工具或类似工具做些什么来找出 .hide() 没有按预期工作的原因吗？

我正在使用咖啡脚本。这是咖啡脚本；

```
$('#recipient_type').blur ->
  if $(this).val() == 'Other'
    $('#recipient-details').show()
  else
    $('#recipient-details').hide() 
```

这是它编译成的 javascript；

```
$('#recipient_type').blur(function() {
      if ($(this).val() === 'Other') {
        return $('#recipient-details').show();
      } else {
        return $('#recipient-details').hide();
      }
    }); 
```

但这种现象不仅发生在我的代码中。例如，bootstrap-alert.js 警报解除脚本给了我同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T11:56:15.467

您可以在执行隐藏的代码上设置断点，以查看它是否正在执行。

这是一个模糊，因此，根据定义，在您离开活动对象之前它不会执行。

# javascript - 在 Java 中调用 Javascript 事件

> ID：11914465
> 
> 赞同：0
> 
> 时间：2012-08-11T11:52:28.527
> 
> 标签：javascript, java, ajax, dom-events, main

我是这种类型的开发新手，我需要帮助在我的 Java 应用程序中创建依赖于 Javascript 事件的主要方法。

如果我希望它调用将触发 Java 方法的 Javascript 事件（提交按钮 onClick 事件），主要 Java 方法应该是什么样子或者它最重要的部分是什么？

如果我在这里混合了东西，请随时纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:42:46.947

看起来您想要创建客户端服务器交互，其中服务器侦听来自客户端的单击事件，对其进行操作并将响应返回给客户端。有几种方法可以做到这一点。我通常使用一些 MVC 框架，例如 Spring MVC 或 Struts 2。它们为这种开发提供了内置支持。在 Spring 的情况下，您可以将客户端事件映射到控制器，或者在 struts 的情况下映射到动作。对于这两个框架，网络上有很多示例/教程。

您也可以使用 jquery。它带有带有 url 参数的 $.ajax 方法。此参数的值可以是您要在单击事件上调用的服务器方法。同样，网络上有很多这样的例子。

# extjs - Ext.button click() 方法

> ID：11914469
> 
> 赞同：17
> 
> 时间：2012-08-11T11:52:53.177
> 
> 标签：extjs, extjs4.1

**ExtJS 4.1。**

`Ext.button.click();`Ext.button 类上有类似方法吗？

是否可以使用一种方法以编程方式“单击”按钮？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-13T06:51:04.910

或者，如果您有 MVC 结构，则可以触发按钮的单击事件，如果您正在控制器中侦听该事件并具有关联的函数，它将被调用。

```
button.fireEvent('click', button); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-11T13:22:01.743

这个论坛上的最后一个答案可能会让您更深入地了解如何在这里做到这一点 -

```
1)Create the event code in a function and call the function from both sides: btn.on("clic", ...) and from the code you want to simulate the click.

2)Use: btnView.btnEl.dom.click(); 
```

来自 - [http://www.sencha.com/forum/showthread.php?37772-Solved-Programmatically-click-an-Ext.Button](http://www.sencha.com/forum/showthread.php?37772-Solved-Programmatically-click-an-Ext.Button)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-11T19:56:43.967

ExtJS 4.2.1

```
Ext.get('component-id-of-extjs-button').el.dom.click();
Ext.get('toggle-button2').el.dom.click(); 
```

为我工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-29T09:16:43.637

如果按钮使用handler，可以直接调用按钮的函数。

考虑`button`是一个 Ext JS 组件，你可以使用：

```
 button.handler(button); 
```

或者如果你想达到事件“点击”的功能：

```
 button.listeners.click(button); 
```

这也可以调用不同的按钮事件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-31T08:06:04.483

因为很多按钮都需要它，所以在按钮类上实现覆盖更容易，它添加了一个点击功能：

```
Ext.define('Ext.override.Button',{
    override:'Ext.button.Button',
    click:function() {
        this.getEl().dom.click();
    }
}) 
```

将此覆盖添加到代码库后，以下内容就像一个魅力：

```
Ext.getCmp("MyButton").click() 
```

与 fireEvent 或 fireHandler 不同，这将适用于所有类型的按钮 - 无论它们是否具有单击事件或处理程序，或者它们是否是切换按钮，单击的按钮也必须标记为按下。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-10T20:11:25.723

如果您需要执行按钮的“处理程序”，只需运行它（使用 ExtJS 4.2 测试）

```
button.fireHandler() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-11T18:25:21.427

如果您想在测试脚本中执行此操作，请查看我的[Ext.ux.Test 库](https://market.sencha.com/users/30/extensions/121)。如果您需要它来做其他事情，我建议您重新考虑您的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-08T06:38:55.210

其他答案都不适合我，但我发现了一些我认为更简单的东西：

```
var button=Ext.get('the_id_div');
button.dom.click(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-22T11:25:46.543

```
 document.getElementById("someButtonId").click(); 
```

# python - 如何在 Python3 中使用 StringIO？

> ID：11914472
> 
> 赞同：585
> 
> 时间：2012-08-11T11:53:30.690
> 
> 标签：python, python-3.x, io

我正在使用 Python 3.2.1，但无法导入该`StringIO`模块。我使用 并且它可以工作，但我`io.StringIO`不能像这样使用它：`numpy``genfromtxt`

```
x="1 3\n 4.5 8"        
numpy.genfromtxt(io.StringIO(x)) 
```

我收到以下错误：

```
TypeError: Can't convert 'bytes' object to str implicitly 
```

当我写`import StringIO`它时说

```
ImportError: No module named 'StringIO' 
```

* * *

## 回答 #1

> 赞同：989
> 
> 时间：2013-08-17T03:43:30.490

> 当我写 import StringIO 它说没有这样的模块。

来自[Python 3.0 的新增功能](http://docs.python.org/3.0/whatsnew/3.0.html)：

> 和模块不见了`StringIO`。`cStringIO`相反，导入`io` 模块并分别使用`io.StringIO`或`io.BytesIO`用于文本和数据。

.

* * *

修复一些 Python 2 代码以在 Python 3 中也可以工作的一种可能有用的方法（警告购买者）：

```
try:
    from StringIO import StringIO ## for Python 2
except ImportError:
    from io import StringIO ## for Python 3 
```

> *注意：此示例可能与问题的主要问题无关，并且仅作为一般解决缺失`StringIO`模块时要考虑的内容而包含在内。* 有关更直接的解决方案消息`TypeError: Can't convert 'bytes' object to str implicitly`，请参阅[此答案](https://stackoverflow.com/a/11970414/86967)。

* * *

## 回答 #2

> 赞同：156
> 
> 时间：2016-03-17T10:15:11.767

就我而言，我使用过：

```
from io import StringIO 
```

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2012-08-15T13:44:25.480

在 Python 3 上`numpy.genfromtxt`需要一个字节流。使用以下内容：

```
numpy.genfromtxt(io.BytesIO(x.encode())) 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-05-22T23:34:17.750

感谢 OP 的提问，以及 Roman 的回答。我不得不搜索一下才能找到这个；我希望以下内容对其他人有所帮助。

**蟒蛇 2.7**

请参阅：[https ://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html](https://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)

```
import numpy as np
from StringIO import StringIO

data = "1, abc , 2\n 3, xxx, 4"

print type(data)
"""
<type 'str'>
"""

print '\n', np.genfromtxt(StringIO(data), delimiter=",", dtype="|S3", autostrip=True)
"""
[['1' 'abc' '2']
 ['3' 'xxx' '4']]
"""

print '\n', type(data)
"""
<type 'str'>
"""

print '\n', np.genfromtxt(StringIO(data), delimiter=",", autostrip=True)
"""
[[  1\.  nan   2.]
 [  3\.  nan   4.]]
""" 
```

**蟒蛇 3.5：**

```
import numpy as np
from io import StringIO
import io

data = "1, abc , 2\n 3, xxx, 4"
#print(data)
"""
1, abc , 2
 3, xxx, 4
"""

#print(type(data))
"""
<class 'str'>
"""

#np.genfromtxt(StringIO(data), delimiter=",", autostrip=True)
# TypeError: Can't convert 'bytes' object to str implicitly

print('\n')
print(np.genfromtxt(io.BytesIO(data.encode()), delimiter=",", dtype="|S3", autostrip=True))
"""
[[b'1' b'abc' b'2']
 [b'3' b'xxx' b'4']]
"""

print('\n')
print(np.genfromtxt(io.BytesIO(data.encode()), delimiter=",", autostrip=True))
"""
[[  1\.  nan   2.]
 [  3\.  nan   4.]]
""" 
```

**在旁边：**

dtype="|Sx"，其中 x = { 1, 2, 3, ...} 中的任何一个：

[类型。Python中S1和S2的区别](https://stackoverflow.com/questions/14790130/dtypes-difference-between-s1-and-s2-in-python)

“|S1 和 |S2 字符串是数据类型描述符；第一个表示数组保存长度为 1 的字符串，第二个表示长度为 2....”

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2018-12-11T22:15:41.297

Roman Shapovalov 的代码应该在 Python 3.x 和 Python 2.6/2.7 中工作。这里又是一个完整的例子：

```
import io
import numpy
x = "1 3\n 4.5 8"
numpy.genfromtxt(io.BytesIO(x.encode())) 
```

输出：

```
array([[ 1\. ,  3\. ],
       [ 4.5,  8\. ]]) 
```

Python 3.x 的说明：

*   `numpy.genfromtxt`接受一个字节流（一个类似文件的对象，被解释为字节而不是 Unicode）。
*   `io.BytesIO`接受一个字节串并返回一个字节流。`io.StringIO`另一方面，将采用 Unicode 字符串并返回 Unicode 流。
*   `x`被分配一个字符串文字，在 Python 3.x 中是一个 Unicode 字符串。
*   `encode()`获取 Unicode 字符串`x`并从中生成一个字节字符串，从而给出`io.BytesIO`一个有效的参数。

Python 2.6/2.7 的唯一区别是它`x`是一个字节字符串（假设`from __future__ import unicode_literals`未使用），然后`encode()`取出字节字符串`x`并仍然从中生成相同的字节字符串。所以结果是一样的。

* * *

由于这是 SO 最受欢迎的问题之一`StringIO`，这里有一些关于 import 语句和不同 Python 版本的更多解释。

以下是接受字符串并返回流的类：

*   [`io.BytesIO`](https://docs.python.org/3/library/io.html#binary-i-o)（Python 2.6、2.7 和 3.x）- 采用字节字符串。返回一个字节流。
*   [`io.StringIO`](https://docs.python.org/3/library/io.html#text-i-o)（Python 2.6、2.7 和 3.x）- 采用 Unicode 字符串。返回一个 Unicode 流。
*   [`StringIO.StringIO`](https://docs.python.org/2/library/stringio.html#)(Python 2.x) - 采用字节字符串或 Unicode 字符串。如果是字节串，则返回一个字节流。如果是 Unicode 字符串，则返回一个 Unicode 流。
*   [`cStringIO.StringIO`](https://docs.python.org/2/library/stringio.html#module-cStringIO)(Python 2.x) - 更快的版本`StringIO.StringIO`，但不能接受包含非 ASCII 字符的 Unicode 字符串。

请注意，`StringIO.StringIO`导入为`from StringIO import StringIO`，然后用作`StringIO(...)`。要么，要么你这样做`import StringIO`，然后使用`StringIO.StringIO(...)`. 模块名和类名恰好是相同的。它类似于`datetime`这种方式。

使用什么，取决于您支持的 Python 版本：

*   *如果您只支持 Python 3.x：*只需使用`io.BytesIO`或`io.StringIO`取决于您正在使用的数据类型。

*   *如果您同时支持 Python 2.6/2.7 和 3.x，或者正在尝试将代码从 2.6/2.7 转换到 3.x：*最简单的选择仍然是使用`io.BytesIO`or `io.StringIO`。尽管`StringIO.StringIO`它很灵活，因此似乎更适合 2.6/2.7，但这种灵活性可能会掩盖 3.x 中出现的错误。例如，我有一些使用`StringIO.StringIO`或`io.StringIO`依赖于 Python 版本的代码，但我实际上传递的是一个字节字符串，所以当我开始在 Python 3.x 中对其进行测试时，它失败了，必须修复。

    使用的另一个优点`io.StringIO`是支持通用换行符。如果将关键字参数传递给`newline=''`，`io.StringIO`它将能够在 、 或 中的任何一个上`\n`分割`\r\n`行`\r`。我发现这尤其`StringIO.StringIO`会绊倒`\r`。

    请注意，如果您 import`BytesIO`或`StringIO`from [`six`](https://pythonhosted.org/six/)，您将获得Python 2.x 和Python 3.x 中`StringIO.StringIO`的相应类。`io`如果您同意我之前段落的评估，这实际上是您应该避免的一种情况，`six`而只是从中导入`io`。

*   *如果您支持 Python 2.5 或更低版本和 3.x：*您将需要`StringIO.StringIO`2.5 或更低版本，因此您不妨使用`six`. 但是要意识到同时支持 2.5 和 3.x 通常非常困难，因此您应该考虑尽可能将支持的最低版本提升到 2.6。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2016-05-31T16:04:35.653

您可以使用来自[六个](https://pythonhosted.org/six/)模块的[StringIO ：](https://pythonhosted.org/six/#six.StringIO)

```
import six
import numpy

x = "1 3\n 4.5 8"
numpy.genfromtxt(six.StringIO(x)) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-12-19T16:05:23.300

为了使[此处](https://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)的示例 适用于 Python 3.5.2，您可以重写如下：

```
import io
data =io.BytesIO(b"1, 2, 3\n4, 5, 6") 
import numpy
numpy.genfromtxt(data, delimiter=",") 
```

更改的原因可能是文件的内容在数据（字节）中，在以某种方式解码之前不会生成文本。`genfrombytes`可能是一个比 . 更好的名字`genfromtxt`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-07-06T09:37:29.330

这是**Python 3**的另一个示例。它将使用两个函数将两个数字相加，然后使用 CProfile 保存`.prof`文件。然后它将使用`pstats.Stats`和```StringIO``加载保存文件以将数据转换为字符串以供进一步使用。

### 主文件

```
import cProfile
import time
import pstats
from io import StringIO

def add_slow(a, b):
    time.sleep(0.5)
    return a+b

def add_fast(a, b):
    return a+b

prof = cProfile.Profile()

def main_func():
    arr = []
    prof.enable()
    for i in range(10):
        if i%2==0:
            arr.append(add_slow(i,i))
        else:
            arr.append(add_fast(i,i))
    prof.disable()
    #prof.print_stats(sort='time')
    prof.dump_stats("main_funcs.prof")
    return arr

main_func()
stream = StringIO();
stats = pstats.Stats("main_funcs.prof", stream=stream); 
stats.print_stats()
stream.seek(0)
print(16*'=',"RESULTS",16*'=')
print (stream.read()) 
```

用法：

```
python3 main.py 
```

输出：

```
================ RESULTS ================
Tue Jul  6 17:36:21 2021    main_funcs.prof

         26 function calls in 2.507 seconds

   Random listing order was used

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
       10    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
        5    2.507    0.501    2.507    0.501 {built-in method time.sleep}
        5    0.000    0.000    2.507    0.501 profiler.py:39(add_slow)
        5    0.000    0.000    0.000    0.000 profiler.py:43(add_fast)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects} 
```

评论：我们可以观察到，在上面的代码中，time.sleep 函数用了大约 2.507 秒。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-12-06T10:28:04.690

**我希望这能满足你的要求**

```
import PyPDF4
import io

pdfFile = open(r'test.pdf', 'rb')
pdfReader = PyPDF4.PdfFileReader(pdfFile)
pageObj = pdfReader.getPage(1)
pagetext = pageObj.extractText()

for line in io.StringIO(pagetext):
    print(line) 
```

# c# - c# regex - 从类文件 (.cs) 中选择类属性名称、方法名称和字段

> ID：11914473
> 
> 赞同：5
> 
> 时间：2012-08-11T11:53:34.733
> 
> 标签：c#, regex, properties, methods, match

我想匹配（从类文件中选择）方法名、属性名和字段名。

这是示例类：

```
class Perl
{
    string _name;
    public string Name { get; set; }
    public Perl()
    {
    // Assign this._name
    this._name = "Perl";
    // Assign _name
    _name = "Sam";

    // The two forms reference the same field.
    Console.WriteLine(this._name);
    Console.WriteLine(_name);
    }
    public static string doSomething(string test)
    {
        bla test;
    }
} 
```

我得到了方法的代码：

```
(?:public|private|protected)([\s\w]*)\s+(\w+)\s*\(\s*(?:\w+\s+(\w+)\s*,?\s*)+\) 
```

我有问题：

*   上面的正则表达式代码获取所有方法，它工作得很好，但我也希望它选择方法名称但没有参数和访问器。所以从 exaplmce 类使用我的代码结果将是： **public Perl()**和**public static doSomething(string test)**但我想要那种结果： **Perl()**和**doSomething()**。所以 - 我的代码匹配得很好，但我希望像我在前一句中写的那样显示结果。
*   如何选择属性？显示结果：类型和属性名称。所以从 exaple 类结果将是：**字符串名称**
*   如何选择具有结果的字段：键入 field_name。在这种情况下，它将是：**string _name**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:02:32.187

用这个`Regex`

对于方法

```
(?:public\s|private\s|protected\s|internal\s)?[\s\w]*\s+(?<methodName>\w+)\s*\(\s*(?:(ref\s|/in\s|out\s)?\s*(?<parameterType>\w+)\s+(?<parameter>\w+)\s*,?\s*)+\) 
```

并获取名为`methodName`and`parameterType`和的组`parameter`。

对于字段：

```
(?:public\s|private\s|protected\s)\s*(?:readonly\s+)?(?<type>\w+)\s+(?<name>\w+) 
```

并获取名为`type`and的组`name`。

例如，您的方法代码可以是这样的：

```
var inputString0 = "public void test(string name, out int value)\r\nvoid test(string name, int value)";
foreach (Match match in Regex.Matches(inputString0, @"(?:public\s|private\s|protected\s)?[\s\w]*\s+(?<methodName>\w+)\s*\(\s*(?:(ref\s|/in\s|out\s)?\s*(?<parameterType>[\w\?\[\]]+)\s+(?<parameter>\w+)\s*,?\s*)+\)"))
{
    var methodName = match.Groups["methodName"].Value;
    var typeParameterPair = new Dictionary<string, string>();
    int i = 0;
    foreach (var capture in match.Groups["parameterType"].Captures)
    {
        typeParameterPair.Add(match.Groups["parameterType"].Captures[i].Value, match.Groups["parameter"].Captures[i].Value);
        i++;
    }
} 
```

您也可以使用来自*codeplex的*[Irony - .NET Language Implementation Kit](http://irony.codeplex.com/)。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:43:06.800

正如对您的答案的评论中所述，更可靠的方法是编译您的 .cs 文件，然后使用反射来询问您感兴趣的成员的类型。它将涉及以下内容：

1.  使用 C# 编译器 (csc.exe) 编译您的文件。MSDN 包含有用[的示例和提示](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)。您可以手动执行此操作，或者，如果您想使整个事情自动化，您可以使用[`Process`class](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)以编程方式执行 csc.exe 。
2.  使用[Assembly.LoadFile()](http://msdn.microsoft.com/en-us/library/b61s44e8.aspx)方法加载生成的程序集。
3.  您现在可以使用反射从程序集中[获取类型](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)并[询问](http://msdn.microsoft.com/en-us/library/system.type_methods)它们。

**编辑：**作为 csc.exe 的替代方案，您可以使用[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx) - 有一个[示例](http://simeonpilgrim.com/blog/2007/12/04/compiling-and-running-code-at-runtime/)包含您需要的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T06:28:20.060

像 C# 这样的语言接受的语句语法变化太多，只能使用正则表达式进行解析。在正则表达式之上，您需要一个上下文语法解析器。

我想试试[Roslyn](http://blogs.msdn.com/b/csharpfaq/archive/2012/06/05/announcing-microsoft-roslyn-june-2012-ctp.aspx)：它是一个 C# 编译器，它的内部结构可以从您的代码中访问。让 Roslyn 解析代码并查询您需要的任何信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T06:53:03.917

我建议查看`Microsoft.VisualStudio.CSharp.Services.Language`命名空间和其他*Visual Studio 可扩展性*功能。这将消除编译的需要。*

# .net - 自定义控件未激活

> ID：11914474
> 
> 赞同：-1
> 
> 时间：2012-08-11T11:53:53.647
> 
> 标签：.net, winforms, visual-studio-2010, custom-controls

我创建了自定义控件。

我想使用它，但控件未激活。 ![在此处输入图像描述](../Images/63bc9659bfa6a4e5bda5bf5c20e273ae.png)

知道如何激活海关控制吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:06:26.213

我曾经遇到过类似的问题，我在工具箱中的所有自定义控件都变灰了。我可以看到它们，但它们在 Visual Studio 2010 中被禁用。我通过右键单击工具箱项然后重置工具箱来修复它。

# android - Android：闹钟打盹后返回主屏幕

> ID：11914475
> 
> 赞同：0
> 
> 时间：2012-08-11T11:53:54.673
> 
> 标签：android, alarmmanager

我在我添加了贪睡功能的应用程序中使用了闹钟。我想要那个，当我按下贪睡按钮时，我应该去主屏幕但不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:00:00.687

根据您的要求，使用以下任何命令：

1.  [MainActivity.this.finish()](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

2.  [MainActivity.this.moveTaskToBack(true)](http://developer.android.com/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)

3.  启动启动器应用程序：

代码：

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

# matlab - 散点距离分析

> ID：11914479
> 
> 赞同：0
> 
> 时间：2012-08-11T11:54:38.303
> 
> 标签：matlab, matlab-figure, matlab-compiler

我通过散点算法随机生成了3组点，算法是

```
M = randi(1000,200);
AP = randi(1000,12);
BS = randi(1000,7);
scatter(M(:,1),M(:,20),21,'b.'); hold on
scatter(AP(:,1),AP(:,9),80,'k*');hold on
scatter(BS(:,1),BS(:,4),'r');hold off 
```

现在，我必须为AP设置覆盖区域并分析AP和M之间的距离，它在覆盖范围内。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:21:52.457

首先提取AP的覆盖区域：

```
ExtractedM=[M(:,1) M(:,20)];
ExtractedAP=[AP(:,1) AP(:,9)];%Just creating two different matrices for plotted points

%calculating coverage area of AP i.e. bounding box for coordinates of AP
yMax=max(ExtractedAP(:,2));
yMin=min(ExtractedAP(:,2));
xMax=max(ExtractedAP(:,1));
xMin=min(ExtractedAP(:,1));

%Finding the points from M which lie in the coverage area of AP
[positionBoundedPointsMx1,dummy]=find(ExtractedM(:,1)>=xMin & ExtractedM(:,1)<=xMax);
[positionBoundedPointsMx2,dummy]=find(ExtractedM(:,2)>=yMin & ExtractedM(:,2)<=yMax);
positionBoundedPointsMx=intersect(positionBoundedPointsMx1,positionBoundedPointsMx2,'rows');
boundedPointsM=ExtractedM(positionBoundedPointsMx,:);

%Making sure that correct sets of points in M have been extracted
scatter(M(:,1),M(:,20),21,'b.'); hold on
scatter(AP(:,1),AP(:,9),80,'k*');hold on
scatter(BS(:,1),BS(:,4),'r');hold on;
scatter(boundedPointsM(:,1),boundedPointsM(:,2),'ko'); 
```

M 中提取的点由黑色圆圈内的蓝点表示。它看起来是正确的，因为 M 中的所有点都位于 AP 的覆盖范围内。

现在，我不确定您要计算什么。假设您只想计算两点之间的欧几里得距离，因此，我将`ExtractedAP`and`boundedPointsM`转换为向量并使用`pdist2`

```
ExtractedAP_Vec=ExtractedAP(:);  %24x1 vector 
boundedPointsM_Vec=boundedPointsM(:);  %224x1 vector

%calculate distance between each point of 'ExtractedAP_Vec' and every point in 'boundedPointsM_Vec'.
dist_AP_M=pdist2(ExtractedAP_Vec,boundedPointsM_Vec); 
```

PS 绘制散点图并自行验证。我不能在这里发布图片，对不起。

# image - iOS-App在第二次进行图像处理时无缘无故崩溃

> ID：11914484
> 
> 赞同：0
> 
> 时间：2012-08-11T11:54:50.817
> 
> 标签：image, cocoa, crash, touch

我在这里真的很困惑。我正在 Cocoa Touch 中进行一些图像处理，一切正常。我的应用程序使用了大约 120MB 的内存，这很好，而且完全没有泄漏，我使用 Instruments 进行了检查。但是，当我使用图像处理类的全新实例（当然在删除第一个实例之后）第二次运行例程时，应用程序在我的 iPhone 4 上崩溃。它在我的 iPad 3 上仍然可以正常工作。每当我调用“CGContextDrawImage( )" 是崩溃。显然没有抛出异常或类似的东西。我真的不知道为什么会这样，因为应该有足够的可用内存。在我的 iPad 3 上的 Instruments 中运行它表明它从不使用超过 120MB 的内存。

请在下面找到导致崩溃的代码。同样，它只会在第二次执行此操作时崩溃，并且仅在我的 iPhone 4 上崩溃。

```
CGImageRef imageref = [image1 CGImage];    
uint8_t *inBitmap1 = (uint8_t *) malloc(vectorsizeI);
CGContextRef context1 = CGBitmapContextCreate(inBitmap1, width, height, bitsPerComponent, bytesPerRowI, colorSpace, kCGImageAlphaNoneSkipFirst);
CGContextDrawImage(context1, CGRectMake(xOffset1, yOffset1, imwidth, imheight), imageref); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:57:46.210

显然内存不足。也许在 iPad 上有，但在 iPhone 上没有。请记住，操作系统仅为您的应用程序保留一小部分物理可用 RAM（0.5 或 1 GB），如果超过该限制，系统将终止看似有害的进程。尝试以某种方式减少应用程序的内存指纹，120 MB 并不“好”。

# django - 在 Django 中添加 Pushover 集成

> ID：11914488
> 
> 赞同：2
> 
> 时间：2012-08-11T11:55:12.753
> 
> 标签：django

我最近开始使用 Pushover.net，我进行了一些搜索，但找不到任何与 django 项目集成的示例。

由于我找不到任何示例，因此我决定自己尝试一下会很有趣。我感兴趣的是你会建议我怎么做。我希望实际的 pushover 部分尽可能地解耦，因此将其作为应用程序进行。

我不完全确定如何处理的是用户授权。这个想法是用户输入他们的pushover用户密钥并将其保存在使用django的用户配置文件模型中`AUTH_PROFILE_MODULE`，`has_pushover` 但显然我想要一些安全性，因此用户密钥不会以明文形式存储。人们对此有何建议？

我可以使用一些内置的 django 安全性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T00:02:51.337

过去，当我需要加密 Django 字段时，我使用了[django-fields](https://github.com/svetlyak40wt/django-fields)中可用的加密字段。您可以在 UserProfile 模型上使用其中一个，并在模型上定义一个`has_pushover()`方法，该方法基本上返回 pushover 令牌字段是否`None`存在。

我猜是因为您正在谈论存储每个用户的 Pushover 令牌，您想要构建一个应用程序来向您网站的用户推送任意通知？这与让网站仅向您自己推送站点事件的通知形成对比。

# iframe - 亚马逊产品不会出现在 iframe 中

> ID：11914491
> 
> 赞同：5
> 
> 时间：2012-08-11T11:55:49.620
> 
> 标签：iframe, amazon

我正在尝试通过 iframe 将亚马逊商店嵌入到我的网站中。

[http://outdated.link](http://outdated.link)

它工作正常，除了当我点击任何产品时，该产品不显示。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-01-09T22:55:31.397

# 广告拦截

Adblock 需要被禁用。

（因此，如果您将框架放在您的网站上 - 写一个字条告诉极客禁用它或使用隐身模式）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T16:08:47.360

我在 Chrome 中尝试了您的链接，并在单击其中一种产品时看到以下错误：

`Refused to display document because display forbidden by X-Frame-Options.`

亚马逊商品详情页面请求返回以下响应标头：

`X-Frame-Options: SAMEORIGIN`

基于[“X-Frame-Options 响应头定义”](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)，这意味着“页面只能显示在与页面本身同源的框架中。”。亚马逊可能会强制执行此操作以防止[Clickjacking](http://en.wikipedia.org/wiki/Clickjacking)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-22T08:51:36.010

就我而言，[Avira](https://www.avira.com)阻止了广告。

[![在此处输入图像描述](../Images/bd9576431f8ef4d743e390bc60dc1229.png)](https://i.stack.imgur.com/cQoUA.jpg)

# java - 覆盖方法，为什么我不能引用新的自己的方法？

> ID：11914493
> 
> 赞同：1
> 
> 时间：2012-08-11T11:56:01.303
> 
> 标签：java, inner-classes

我不明白这一点：

```
OnGlobalLayoutListener listener = new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
         System.out.println("I am override a method");
    }

    public void hello(){
         System.out.println("This is a new method");
    }
};

//listener.hello(); Why I cannot do it? 
```

没有这个我可以做到：

```
new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
             System.out.println("I am override a method");
        }

        public void hello(){
             System.out.println("This is a new method");
        }
    }.hello(); 
```

为什么在第一种情况下我不能调用方法 hello() 而在第二种情况下我可以做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:00:54.077

您正在创建一个新的匿名类型，其中包含一个名为 的新方法`hello`。

您可以调用`hello`该表达式`new OnGlobalLayoutListener() { }`，因为该表达式的类型*是*您的新匿名类型。

您*无法*调用`hello`，`listener`因为`listener`is的编译时类型`OnGlobalLayoutListener`没有`hello`方法。

如果您想添加额外的方法，我个人建议您在当前类中创建一个新的嵌套类。你*可以*在一个方法中声明一个新的命名类，但我不建议这样做，就它造成的混乱而言。

请注意，覆盖`onGlobalLayout`与问题完全无关。如果你尝试写作，你会看到同样的事情：

```
new Object {
    public void hello() { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:14:19.860

在这两种情况下，您都通过创建[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)来实例化一个对象，但是您引用该`hello()`方法的方式不同：

在第一种情况下，您将实例化的类分配给`OnGlobalLayoutListener` *interface*的引用。问题是接口没有声明`hello()`方法，所以不能调用。但是，如果您尝试调用`onGlobalLayout()`.

在第二种情况下，该`hello()`方法是可访问的，因为您在引用刚刚实例化的*类时调用它。*与接口相比，该类有两个方法，覆盖方法`onGlobalLayout()`和请求`hello()`方法。

# perl - 在 perl 中使用替换运算符跳过字符串中的特定位置

> ID：11914499
> 
> 赞同：2
> 
> 时间：2012-08-11T11:56:39.460
> 
> 标签：perl, skip, string-substitution

昨天，我陷入了 perl 脚本。让我简化一下，假设有一个字符串（比如 ABCDEABCDEABCDEPABCDEABCDEPABCDEABCD），首先我必须在“E”出现的每个位置断开它，其次，在用户想要的位置专门断开它。但是，条件是，程序不应该在 E 后面跟着 P 的位置进行切割。例如，这个序列中有 6 个 E，所以应该得到 7 个片段，但是由于 2 个 E 后面跟着 P，所以只能得到 5 个片段输出中的片段。

我需要关于第二种情况的帮助。假设用户不想在序列中 E 的第 5 和第 10 位剪切这个序列，那么对应的脚本应该是什么让程序只跳过这两个站点？我的第一种情况的脚本是：

```
my $otext = 'ABCDEABCDEABCDEPABCDEABCDEPABCDEABCD';

$otext=~ s/([E])/$1=/g; #Main cut rule.

$otext=~ s/=P/P/g;

@output = split( /\=/, $otext);

print "@output"; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:55:35.083

要在“E”上拆分，除了后面跟着“P”的地方，你应该使用否定的前瞻断言。

从[`perldoc perlre`](http://perldoc.perl.org/perlre.html)“环顾断言”部分：

> *   (?!pattern)
>     一个零宽度的负前瞻断言。
>     **例如`/foo(?!bar)/`匹配任何出现的“foo”，但后面没有“bar”。**

```
my $otext = 'ABCDEABCDEABCDEPABCDEABCDEPABCDEABCD'; 
#                E    E    EP    E    EP    E
my @output=split(/E(?!P)/, $otext); 
use Data::Dumper; print Data::Dumper->Dump([\@output]);"

$VAR1 = [
          'ABCD',
          'ABCD',
          'ABCDEPABCD',
          'ABCDEPABCD',
          'ABCD'
        ]; 
```

* * *

现在，为了不削减出现 #2 和 #4，您可以做 2 件事：

1.  编造一个非常奇特的正则表达式，在给定的情况下自动无法匹配。为了完整起见，我将把它留给其他人尝试回答。

2.  只需将正确的片段缝合在一起。

    我太脑残了，无法想出一个好的惯用方法，但是简单而肮脏的方法是：

    ```
     my %no_cuts = map { ($_=>1) } (2,4); # Do not cut in positions 2,4
      my @output_final;
      for(my $i=0; $i < @output; $i++) {
          if ($no_cuts{$i}) {
              $output_final[-1] .= $output[$i];
          } else {
              push @output_final, $output[$i];
          } 
      }
      print Data::Dumper->Dump([\@output_final];

      $VAR1 = [
                'ABCD',
                'ABCDABCDEPABCD',
                'ABCDEPABCDABCD'
              ]; 
    ```

    或者，更简单：

    ```
     my %no_cuts = map { ($_=>1) } (2,4); # Do not cut in positions 2,4
      for(my $i=0; $i < @output; $i++) {
          $output[$i-1] .= $output[$i]; 
          $output[$i]=undef; # Make the slot empty
      }
      my @output_final = grep {$_} @output; # Skip empty slots
      print Data::Dumper->Dump([\@output_final];

      $VAR1 = [
                'ABCD',
                'ABCDABCDEPABCD',
                'ABCDEPABCDABCD'
              ]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:31:32.260

这是一个利用两个事实的肮脏把戏：

*   normal text strings never contain null bytes (if you don't know what a null byte is, you should as a programmer: [http://en.wikipedia.org/wiki/Null_character](http://en.wikipedia.org/wiki/Null_character), and nb. it is not the same thing as the number 0 or the character 0).
*   perl strings *can* contain null bytes if you put them there, but be careful, as this may screw up some perl internal functions.

The "be careful" is just a point to be aware of. Anyway, the idea is to substitute a null byte at the point where you don't want breaks:

```
my $s = "ABCDEABCDEABCDEPABCDEABCDEPABCDEABCD";

my @nobreak = (4,9);

foreach (@nobreak) {
    substr($s, $_, 1) = "\0";
} 
```

`"\0"` is an escape sequence representing a null byte like `"\t"` is a tab. Again: it is not the character 0\. I used 4 and 9 because there were E's in those positions. If you print the string now it looks like:

```
ABCDABCDABCDEPABCDEABCDEPABCDEABCD 
```

因为空字节不显示，但它们在那里，我们稍后将它们交换回来。首先拆分：

```
my @a = split(/E(?!P)/, $s); 
```

然后将零字节交换回来：

```
$_ =~ s/\0/E/g foreach (@a); 
```

如果你`@a`现在打印，你会得到：

```
ABCDEABCDEABCDEPABCD
ABCDEPABCD
ABCD 
```

这正是你想要的。请注意， split 删除了分隔符（在本例中为 E）；如果您打算保留那些，您可以在之后再次将它们重新添加。如果分隔符来自更动态的正则表达式，则稍微复杂一些，请参见此处：

[http://perlmeme.org/howtos/perlfunc/split_function.html](http://perlmeme.org/howtos/perlfunc/split_function.html)

“示例 9\. 保留分隔符”

如果这些`@nobreak`位置有可能不是 E，那么在交换它们时还必须跟踪这些位置，以确保再次替换为正确的字符。

# windows-phone-7 - WINDOWS 电话认证测试结果 - 失败

> ID：11914505
> 
> 赞同：1
> 
> 时间：2012-08-11T11:57:18.207
> 
> 标签：windows-phone-7

第二次拒绝证明申请。

```
Comments: The application's long description and/or UI content is presented in Ukrainian not natively supported in the OS. 
For an application to be presented in a language not natively supported in the OS, its description must satisfy the following 
requirements:
1\. A statement to indicate the application is not in the targeted language.
2\. A full description text in the targeted language.
3\. A full description text in the language supported by the application. 
```

第二次我有目标语言的描述并由thr应用程序支持，但App Center拒绝再次认证该应用程序。我做错什么了？

这点是什么意思？

```
1\. A statement to indicate the application is not in the targeted language. 
```

我不知道该怎么办。

什么时候我必须在目标语言中做描述文本并得到应用程序的支持？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:57:25.730

我在瑞典获得支持之前将瑞典应用程序提交到市场时遇到了这个问题。我所做的是有这样的应用程序描述：

> 注意：此应用程序仅使用瑞典语。
> 
> 完整的瑞典语描述
> 
> - 英语 -
> 
> 英文完整说明

之后，该应用程序通过了认证，没有任何问题。所以把瑞典语改成乌克兰语，你应该没问题。

# c# - asp.net WebForms 中的休眠事务管理

> ID：11914508
> 
> 赞同：2
> 
> 时间：2012-08-11T11:57:59.980
> 
> 标签：c#, asp.net, nhibernate, transactions, webforms

我一直在研究 NHibernate for ASP.Net 应用程序（Webforms）的事务管理。我发现的大多数文章都倾向于支持按请求事务处理的方法。虽然我了解每个请求的会话，并且完全赞成它。但是，我并不完全理解每个请求的事务背后的原因。

我的应用程序使用版本字段进行并发检查。如果抛出了一个问题，比如 StaleObjectException，或者其他任何东西，一旦你调用`Transaction.Commit()`. 我的问题是，如果这是在请求的末尾，你不能轻易知道哪个方法实际上有问题的代码，并且很难从问题中回滚。

例如，在 StaleObjectException 中，通常只需使用更新的数据重新运行该方法。

关于此的任何想法，以及交易管理的任何实践？根据业务逻辑，我倾向于支持尽可能多的交易。多个事务的问题是实际开始/结束事务的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:21:10.813

当您退后一步并考虑 Web 应用程序的底层性质时，按请求事务处理范式是有意义的。它是一个请求/响应系统，仅此而已。用户提交对“某事”的请求，应用程序将其转换为执行一个动作或一系列动作，然后应用程序向用户发送响应以指示其当前更新的状态。

在此模型中，对应用程序的每个操作请求都可以（可以说*应该*）是原子的。毕竟，从用户的角度来看，概念上发生错误时失败是什么？请求失败。发生此类故障时，应用程序应以两种方式响应：

1.  回滚与处理请求相关的任何部分更改，以便持久化数据不会处于“部分”或“未定义”状态。

2.  通知用户（在响应中）请求以某种方式失败。

    > 我的问题是，如果这是在请求的末尾，你不能轻易知道哪个方法实际上有问题的代码，并且很难从问题中回滚。

你能用代码展示一个例子吗？我想知道这个问题是否可以通过应用程序设计的其他元素而不是事务结构来解决。也许请求的处理不是适当的原子或封装。

*（评论表明以下可能是个人观点，是NHibernate的正常行为）*

> 例如，在 StaleObjectException 中，通常只需使用更新的数据重新运行该方法。

虽然我当然不是 NHibernate 方面的专家，但我不愿理解这里所说的内容。通常，当异常发生时，简单地“重试”*通常*不是处理异常的好方法。

# java - 在java中创建一个受密码保护的文件

> ID：11914514
> 
> 赞同：5
> 
> 时间：2012-08-11T11:59:22.297
> 
> 标签：java, file, passwords, protected

我想在 JAVA 中创建一个受密码保护的文件。我的意思是，一旦我启动程序，我的程序创建的一个文件将直接受到先前确定的密码的保护。

有简单的方法吗？

再一次，我的目标不是创建一个文件然后为其添加密码，而是在创建过程中通过密码保护文件。 **实际上，如果他/她之前设置了密码，我希望当前的运行程序无法读取/编辑创建的文件。**

所以无论如何，如果你们中的一些人知道在编写文件时使用 java 保护文件的简单方法，我将不胜感激。

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:31:52.640

你想用密码加密你的文件（的内容）。这是一个非常知名的图书馆：[http ://www.jasypt.org/](http://www.jasypt.org/)

从他们的网站：

```
..encrypting and decrypting a text...

BasicTextEncryptor textEncryptor = new BasicTextEncryptor();
textEncryptor.setPassword(myEncryptionPassword);
String myEncryptedText = textEncryptor.encrypt(myText);
...
String plainText = textEncryptor.decrypt(myEncryptedText); 
```

您可以将加密内容读/写到您的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:37:18.163

当您想加密文件、字符串等时，有两种主要方法。您应该首先构建一个类或方法来将您的字符串/文件转换为字节数组。构建另一种方法将字节数组转换回字符串/文件。

您可以使用 2 种方法加密文件： 1 - 对称密钥 - 一个密码（通常是一大串字符或用户设置的密码）将加密您的文件和密码，并且将使用相同的密码进行解密。2 - 非对称密钥 - 您生成一对密钥。一个称为公钥，另一个称为私钥。公钥用于加密文件，私钥用于解密。这将是更“专业”的方法。

如果你想要一个真正安全的方法，你应该下载 GnuPG。GnuPG 是一个管理非对称加密的可执行文件，您可以构建一个类来使用 GnuPG 并让 GnuPG 管理您的加密/解密过程。

有一种不安全的方法，它是 java（对称密钥）的“本机”，可能对您有用：

加密：

```
byte[] key = //... password converted to an array of bytes
byte[] dataToSend = ...

Cipher c = Cipher.getInstance("AES");
SecretKeySpec k =
  new SecretKeySpec(key, "AES");
c.init(Cipher.ENCRYPT_MODE, k);
byte[] encryptedData = c.doFinal(dataToSend); 
```

解密：

```
byte[] key = //
byte[] encryptedData = //

Cipher c = Cipher.getInstance("AES");
SecretKeySpec k =
  new SecretKeySpec(key, "AES");
c.init(Cipher.DECRYPT_MODE, k);
byte[] data = c.doFinal(encryptedData); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:39:09.457

如果文件是纯文本文件，那么在您的程序中不让用户在没有密码的情况下访问文件并不能真正对数据进行密码保护，因为用户可以使用其他程序打开文件。所以如果文件是文本文件，那么我认为你必须使用加密。

您可以使用@mazaneicha 的评论来帮助您开始朝这个方向发展。如果您想深入了解它，可以查看[Java Cryptography architecturere](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html)和[javax.crypto java docs](http://docs.oracle.com/javase/6/docs/api/index.html?javax/crypto/CipherOutputStream.html)。

如果您的文件不是人类可读的，并且只有您的程序可以理解它，那么我会将文件的第一行或前 n 个字节作为密码。如果您愿意，您可以在同一目录中保存另一个密码文件并使用它来验证用户，然后再决定用户是否有权查看该文件。加密密码的常用方法是使用 MD5 哈希函数。用户输入密码，您计算它的哈希值，然后将计算的哈希值与从文件中读取的哈希值进行比较：

```
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

/**
 * Use to encrypt passwords using MD5 algorithm
 * @param password should be a plain text password.
 * @return a hex String that results from encrypting the given password.
 */
static String encryptPassword(String password) {
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update(password.getBytes());
        byte byteData[] = md.digest();
        StringBuilder hexString = new StringBuilder();
        for (int i=0;i<byteData.length;i++) {
            String hex=Integer.toHexString(0xff & byteData[i]);
            if(hex.length()==1) 
               hexString.append('0');
            hexString.append(hex);
        }
        return hexString.toString();
    }
    catch(java.security.NoSuchAlgorithmException missing) {
        return password;
    }
} 
```

# javascript - 在特殊标签外使用 javascript 正则表达式替换？

> ID：11914519
> 
> 赞同：1
> 
> 时间：2012-08-11T12:00:29.130
> 
> 标签：javascript, regex

我想使用 javascript 替换（删除）[code] bbcode 之外的 html 标签。例如：

```
 <script>these</script> [code]<script>alert</script>[/code]<script>that</script> 
```

应该成为

```
 these [code]<script>alert</script>[/code]that 
```

如何使用 RegEx 替换/删除 [代码] 之外的标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:17:41.563

将此替换`/(\[code\][\s\S]*?\[\/code\])|<[\s\S]*?>/g`为`$1`：

```
your_string.replace(/(\[code\][\s\S]*?\[\/code\])|<[\s\S]*?>/g, '$1'); 
```

它会首先找到所有`[code]`标签，保存它们，然后它会找到剩余的 html 标签（*不会*在`[code]`标签中）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-11T14:00:08.323

好的，我找到了解决方案：

```
replace(/<(?=[^\[]*\[\/code\])/gi,"&_lt_;");
replace(/>(?=[^\[]*\[\/code\])/gi,"&_gt_;");

DO OTHER REPLACEMENT/CUSTOMIZATION HERE

replace(/&_lt_;/gi,"<");
replace(/&_gt_;/gi,">"); 
```

那它！:)

# php - 山狮 php 梨和 pecl

> ID：11914524
> 
> 赞同：10
> 
> 时间：2012-08-11T12:00:56.930
> 
> 标签：php, pear, osx-mountain-lion, pecl

我已经升级到 Mountain Lion 并安装了 php5.4，这需要稍微调整一下[Mountain Lion 更改 php 位置](https://stackoverflow.com/questions/11913850/mountain-lion-change-php-location/)

我的下一个问题是如果我跑步`pear -v`或`pecl -v`这些返回

```
Could not open input file: /usr/lib/php/pear/pearcmd.php

Could not open input file: /usr/lib/php/pear/peclcmd.php 
```

我是否需要更改 pear 和 pecl 以指向安装在 /usr/local/php5/bin/ 中的新 php

如果是这样，我该怎么做？我会丢失以前安装的所有扩展，例如 phpunit？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-12T19:20:08.697

我通过再次安装 pear 对此进行了排序。下载 go-pear.phar 然后运行

```
sudo php -d detect_unicode=0 go-pear.phar 
```

在安装中有更改 pear 正在使用的目录的选项。他们已经为我的新 php 设置了正确的位置，例如 /usr/local/php5/bin

然后我必须将该路径添加到我的 bash_profile 中，以便识别 pear 命令。

```
export PATH=$PATH:/usr/local/php5/bin 
```

为了让 pecl 再次工作，我从 /usr/bin 中删除了 pecl 然后符号链接到 /usr/local/php5/bin 中的 pecl

```
sudo ln -s /usr/local/php5/bin/pecl /usr/bin/pecl 
```

我尝试安装的第一个软件包是 APC，但出现错误

```
Cannot find autoconf. Please check your autoconf installation and the
$PHP_AUTOCONF environment variable. Then, rerun this script.

ERROR: `phpize' failed 
```

这是按照[phpize](https://stackoverflow.com/questions/8430977/phpize-wont-work-on-mac-os-x-lion)的说明进行排序的

更新：我很好地安装了 PHPUnit 然后运行`phpunit --version`

这给出了一个错误

```
PHP Warning:  require(/usr/lib/php/pear/PHPUnit/Autoload.php): failed to open stream: No such file or directory in /usr/bin/phpunit on line 43 
```

运行`which phpunit`返回`/usr/bin/phpunit`

通过更多符号链接解决

```
sudo ln -s /usr/local/php5/bin/phpunit phpunit 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-12T17:31:45.913

在 Mavericks 上有一个`/usr/lib/php`名为的文件`install-pear-nozlib.phar`

一切都只需 `sudo php install-pear-nozlib.phar`从该目录运行即可。然后添加`/usr/lib/php/pear`到 php.ini 中的包含路径

希望对某人有所帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T13:01:59.907

我的一位用户在我的 Mac 上遇到了这个问题。它与另一个工作正常。所以我想这可能与使用其他用户安装梨有关（这就是我所做的）。

我对此没有解决方案，但是您可以尝试再次安装 pear 并尝试选择将其安装到系统而不是本地，看看是否可行。

编辑：我尝试这样做，但是梨开始起作用，但不是 pecl。

# extjs - Ext JS 4 - 如何在控制器内控制 rowEditor

> ID：11914525
> 
> 赞同：3
> 
> 时间：2012-08-11T12:00:59.223
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我想了解如何在控制器中控制 rowEditor 插件。

这是 rowEditor 定义：

```
Ext.define(appName + '.view.department.DepartmentGrid', {

    initComponent: function() {

       this.rowEditor = Ext.create('Ext.grid.plugin.RowEditing', {
          clicksToEdit: 2
       });

    }

} 
```

** 控制器**

```
this.control({
    'departmentgrid': {
        // ??
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T12:37:25.570

它在文档中：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.RowEditing-event-edit](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.RowEditing-event-edit)

```
this.control({
    'departmentgrid': {
        edit: this.onDepartmentGridEdit
    }
}); 
```

# c++ - 为什么使用 std::vector<> 而不是 std::list<> 会导致代码大小增加？

> ID：11914526
> 
> 赞同：0
> 
> 时间：2012-08-11T12:01:00.837
> 
> 标签：c++, stl

在工作中的项目中使用了很多 std::list 和 std::vector。由于很少需要随机插入，我开始将 std::lists 更改为 std::vectors。但是随着每次切换，生成的代码大小都会增加（不是固定数量，而是平均大约 1kB）。鉴于已经使用了 std::vector，我不明白为什么将 std::list 切换到 std::vector 会增加代码大小。任何想法为什么？使用的编译器是 g++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:21:23.933

也许您添加了一个新类型的向量（例如，在您使用的原始代码中`vector<int>`，现在您添加了一个`vector<string>`: 它们是不同的类型，因此代码大小将增加以包含新类型）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:25:33.727

好吧，没有更多细节，我们只能猜测。

向量内存是连续的（由标准保证），但列表内存不是。因此，编译器可能能够更好地矢量化和展开基于矢量的代码，从而导致更大的指令和更长的二进制代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:10:54.397

这是在调试模式吗？如果是，则可能是增加代码大小的内联范围检查代码。请注意，这对于列表来说不是必需的，您只需要检查下一个节点是否为空。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-11T12:06:17.190

std::vector 包含比列表更多的函数和代码（列表中没有随机访问）

# c# - 使用存储过程从 SQLCommand 填充 WPF 数据网格

> ID：11914531
> 
> 赞同：1
> 
> 时间：2012-08-11T12:01:45.587
> 
> 标签：c#, .net, datagrid, ado.net

我目前正在尝试使用使用 SQLCommand 执行存储过程并返回结果的类的成员来填充数据网格。

我的班级成员（以及我认为问题所在）是：

```
public DataView DisplayHealthIndicator(DateTime startDate, DateTime endDate)
{
    string queryString =
        "DECLARE @RC int"
        + "DECLARE @date_from datetime = dateadd(day, 0, datediff(day, 0, getdate()))"
        + "DECLARE @date_to datetime = dateadd(day, 0, datediff(day, 0, getdate()))"

        + "EXECUTE @RC = [Testing].[marlin].[support_retrieve_workflow_history] "
            + "@date_from "
            + ",@date_to"
        + "GO";

    using (SqlConnection connection = new SqlConnection(GetConnectionString()))
    {
        using (var cmd = new SqlCommand(queryString, connection))
        {
            connection.Open();

            var reader = cmd.ExecuteReader();

            var dt = new DataTable();
            dt.Load(reader);

            return dt.DefaultView;
        }
    }

} 
```

我打电话给这个成员使用：

```
var db = new DatabaseHandle();
        dataGridWorkflow.ItemsSource = db.DisplayHealthIndicator(DateTime.Now, DateTime.Now); 
```

然而！我目前收到错误：

> ```
> Incorrect syntax near @date_from
> 
> Must declare the scalar variable @RC 
> ```

在一定程度上我理解错误 - 我相信我不能在我的 sqlQuery 字符串中声明变量......但是，我该怎么做呢？

我相当确定它对此没有任何影响，但如果确实如此，这是存储过程的内容：

```
create procedure marlin.support_retrieve_workflow_history
(
    @date_from datetime,
    @date_to datetime
)
as
select  dateadd(day, 0, datediff(day, 0, e.event_date)) as 'Date',
        c.setting_secondary 'Workflow Category' ,
        d.setting_main as 'Error Type' ,
        sum(e.event_count) as 'Total'
from    marlin.support_events e
        inner join marlin.support_config c
            on e.event_category = c.setting_code
            and c.config_code = 60
        inner join marlin.support_config d
            on e.event_type = d.setting_code
            and d.config_code = 70
where   e.event_date between @date_from and @date_to
group by 
        e.event_date,
        c.setting_secondary ,
        d.setting_main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:12:18.017

`cmd.Parameters["@ReturnValue"]`包含返回值 - 您不需要在动态 SQL 中添加参数

将参数添加到 cmd

```
cmd.Parameters.AddWithValue("ParamName", Value); 
```

还将 cmd.CommandType （可能不会被称为，检查 cmd 的成员）更改为 StoredProcedure

例如

```
using (SqlConnection connection = new SqlConnection(GetConnectionString()))
{
    using (var cmd = new SqlCommand(queryString, connection))
    {
        connection.Open();

        cmd.CommandType = ??.StoredProcedure; // Can't remember what enum name is prob SqlCommandType or something
        cmd.Parameters.AddWithValue("date_from", DateTime.blah.blah);
        cmd.Parameters.AddWithValue("date_to", DateTime.blah.blah);
        var reader = cmd.ExecuteReader();

        var dt = new DataTable();
        dt.Load(reader);

        return dt.DefaultView;
    }
} 
```

免责声明：其中一些道具名称，返回值参数的名称可能不正确，因此请查看文档 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T21:08:58.087

这篇文章有点老了......但是，我想分享我如何动态填充 WPF DataGrid

```
private void Fill_DataGrid_ServiceName()
    {
        this.Cursor = Cursors.Wait;

        // create an instance
        DatabaseClass objDatabaseClass = new DatabaseClass(_connectionString);

        // if we are able to open and close the SQL Connection then proceed
        if (objDatabaseClass.CheckSQLConnection())
        {
            try
            {
                // create an instance. variable 'con' will hold the instance
                SqlConnection con = new SqlConnection(_connectionString);

                con.Open();

                // Query to populate the Grid
                string Query = @"SELECT 
                                cm_mktdata_mdsservice_fits_to_finance_id_unique AS [Id Unique]
                                ,cm_mktdata_mdsservice_fits_to_finance_MDSService_fits AS [FITS MDSService]
                                ,cm_mktdata_mdsservice_fits_to_finance_MDSService_finance AS [Finance MDSService]
                                ,'[ ' + CONVERT(varchar, user_detail_user_info_id_user) + ' ] ' + user_detail_user_info_nm_login AS [Last Modified By]
                                ,cm_mktdata_mdsservice_fits_to_finance_record_version AS [Record Version]
                                ,cm_mktdata_mdsservice_fits_to_finance_dt_modified AS [Dt Modified]
                                ,cm_mktdata_mdsservice_fits_to_finance_ind_active AS [Ind Active]
                            FROM 
                                dbo.v_mktdata_ui_mdsservice_fits_to_finance_detail
                            WHERE
                                cm_mktdata_mdsservice_fits_to_finance_ind_operational = 1
                            ORDER BY
                                cm_mktdata_mdsservice_fits_to_finance_MDSService_fits";

                SqlCommand createCommand = new SqlCommand(Query, con);
                createCommand.ExecuteNonQuery();

                // transfer the results of createCommand to the dataGrid
                SqlDataAdapter dataAdapter = new SqlDataAdapter(createCommand);
                DataTable dt = new DataTable("vcm_mktdata_mdsservice_fits_to_finance");
                dataAdapter.Fill(dt);
                dataGrid_ServiceName.ItemsSource = dt.DefaultView;
                dataAdapter.Update(dt);

                con.Close();

                // Enable the Refresh Grid Button
                btn_RefreshGrid_ServiceName.IsEnabled = true;

                // get DataGrid row count                    
                lbl_dataGrid_RowCount_ServiceName.Content = dataGrid_ServiceName.Items.Count.ToString() + " rows";

                //return true;
            }
            catch (SqlException ex)
            {
                MessageBox.Show(ex.ToString());
                //return false;
            }
        }
        else
        {
            MessageBox.Show("Connection not established to the SQL Server. " + Environment.NewLine + "The SQL Server may be offline or valid credentials are not yet granted.", "SQL Server Connection Error", MessageBoxButton.OK, MessageBoxImage.Error);

            this.Close();
        }

        this.Cursor = Cursors.Arrow;
    } 
```

DatabaseClass如下

```
 class DatabaseClass
{
    // Variables
    private string _connectionString = "";

    public DatabaseClass(string connectionString)
    {
        _connectionString = connectionString;  
    }

    /// Check to see if Connection can be opened
    /// 
    /// Returns True if the connection can be open else it returns False
    ///
    public bool CheckSQLConnection()
    {
        SqlConnection con = new SqlConnection(_connectionString);

        try 
        {           
            con.Open();
            con.Close();

            return true;
        }
        catch (SqlException ex)
        {       
           return false;
        }
    }

} 
```

对于连接字符串，它将如下所示

```
public static string SQLDataSourceStr = "Data Source=MySQL-DB-DV;Initial Catalog=My_Data;Integrated Security=True"; 
```

# orm - Symfony2 Doctrine ManyToOne 依赖于所有者

> ID：11914532
> 
> 赞同：0
> 
> 时间：2012-08-11T12:02:00.483
> 
> 标签：orm, doctrine

我有一个带有姓名和姓氏的用户对象。用户可以设置为幽灵。如果用户是幽灵，我想让其他用户可以随意命名他。

```
|User   |   |Representation|
|-------|   |--------------|
|ID     |   |owner         |
|isGhost|   |ghost         |
|name   |   |name          |
|surname|   |surname       | 
```

`owner`并且`ghost`引用`User`
`owner`始终是登录用户

我想要实现的是 - 如果用户不是幽灵 - （作为所有者）我想看到`User.name`，`User.surname`但如果用户是幽灵 - （作为所有者）我想看到`Representation.name`和`Representaion.surname`.

如何为这种情况进行映射以最有效？

**编辑：** 还有什么 - 我有一个参考用户的 Relation 对象，并且在 Relation 中使用`getUser()`我想查看正确的名称和姓氏，具体取决于用户是否是幽灵。

也许使用 ArrayCollection 而不是附加表并将所有表示保存在 ghost User 中？每个幽灵用户的预测最大表示约为 5-10。不多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:21:09.040

您应该像设计两个表一样继续操作：`OneToMany`在 ghost 上建立一个关系 bw User 和 Representation，以及另一个`OneToMany`关系 bw User 和 Owner。

确保拥有方是用户，因为您不想在每次查询用户时加载表示对象。

然后，仅`->getRepresentations()`在必要时为用户获取相关表示，例如：当 true === isGhost;

问题是，如果用户是幽灵并且没有所有者的代表，你会显示什么？

你可以做这个功能：

```
public function getUsername($ownerRepresentation = false)
{

    // user is ghost mode, but we do not have an owner for its representation
    if ($this->isGhost && false === $ownerRepresentation) {
        return '~';
    }

    // user is ghost, and we have provided an owner to search for his representation
    if ($this->isGhost && false !== $ownerRepresentation) {
        $representations = $this->getRepresentations();

        foreach ($representations as $representation) {
            if ($representation->getOwner()->getId() === $ownerRepresentation->getId()) {
                return $representation->getName() . ' ' . $representation->getSurname();
            }
        }

        // no representation found for this owner
        return '~';
    }

    // user is no ghost, we can freely display his real name
    return $this->getName() . ' ' . $this->getSurname();
} 
```

# oauth-2.0 - OAuth2 + GData 客户端 API - 用法

> ID：11914535
> 
> 赞同：1
> 
> 时间：2012-08-11T12:02:41.227
> 
> 标签：oauth-2.0, gdata-api, picasa

我正在尝试构建一个页面，用户可以在其中使用他的 google id 登录并访问 Picasaweb 相册。

我正在使用 gdata-java-client-1.47.1.zip（从[这里](http://code.google.com/p/gdata-java-client/downloads/detail?name=gdata-src.java-1.47.1.zip)下载）、google-oauth-java-client-1.10.1-beta.zip（从[这里](http://code.google.com/p/google-oauth-java-client/downloads/detail?name=google-oauth-java-client-1.10.1-beta.zip&can=2&q=)下载）和 google-api-java-client-1.10 .3-beta.zip（从[这里](http://code.google.com/p/google-api-java-client/downloads/detail?name=google-api-java-client-1.10.3-beta.zip&can=2&q=)下载）

设置 OAuth2 工作流程并获取访问令牌后，我创建了 Credential 对象

```
return new GoogleCredential.Builder().setClientSecrets(CLIENT_ID, CLIENT_SECRET)
          .setJsonFactory(jsonFactory).setTransport(transport).build().setAccessToken(gtresponse.getAccessToken()).setRefreshToken(gtresponse.getRefreshToken()); 
```

当我尝试创建 PicasawebService 对象并按此[链接](https://stackoverflow.com/a/10249530/829542)中所述设置 OAuth2Credentials 时，我在 PicasawebService 对象可用的方法列表中看不到 setOAuth2Credentials 方法。我只能看到 setOAuthCredentials(parameters, signer) 方法可用。这是预期的吗？

不确定如何访问网络相册数据？有点卡住了！请帮忙？

谢谢，

萨提亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:35:05.140

尝试[按此示例](http://code.google.com/p/google-api-java-client/source/browse/picasa-cmdline-sample/src/main/java/com/google/api/services/samples/picasa/cmdline/PicasaSample.java?repo=samples)`PicasaClient`中的方式使用：

```
PicasaClient client = new PicasaClient(HTTP_TRANSPORT.createRequestFactory(credential)); 
```

您可能必须手动包含[`PicasaClient`,`PicasaUrl`和`model`类。](http://code.google.com/p/google-api-java-client/source/browse/?repo=samples#hg%2Fshared%2Fgdata%2Fshared-sample-picasa%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgoogle%2Fapi%2Fservices%2Fpicasa)

另一种选择是使用[已弃用](https://developers.google.com/accounts/docs/AuthSub)但支持到 2015 年 4 月的[AuthSub 方式](https://developers.google.com/picasa-web/docs/2.0/developers_guide_java)。

# ruby-on-rails - 无法在深层资源树中批量分配受保护的属性错误

> ID：11914545
> 
> 赞同：0
> 
> 时间：2012-08-11T12:04:03.433
> 
> 标签：ruby-on-rails, nested, nested-attributes

> **可能重复：**
> [无法批量分配受保护的属性](https://stackoverflow.com/questions/9742842/cant-mass-assign-protected-attributes)

我的资源树：

```
camrade has_many resumes 
resumes has_many experiences 
experience belongs_to company 
```

同志和简历、经历相互嵌套。

我想在一页上改变这一切。在控制器中我有字符串：

```
 @camrade.update_attributes(params[:camrade]) 
```

从提交后的视图来看，这个参数是：

```
"camrade"=>{
    "resumes_attributes"=>{
      "0"=>{
        "title"=>"first",
        "id"=>"4"},
      "1"=>{
        "title"=>"second",
        "experiences_attributes"=>{
          "1344617107870"=>{
            "company_name"=>"Some company"
          }
        }
      }
    }
  } 
```

因为 Experience 没有 company_name，所以我这样写：

```
 class Experience < ActiveRecord::Base
      belongs_to :company
      def company_name
        company.try(:name)
      end
      def company_name=(name)
        self.company = Company.find_or_create_by_name(name) if name.present?
      end
    end 
```

但仍然出现错误“无法批量分配受保护的属性：company_name”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:25:11.143

添加`attr_accessible :company_name`到您的体验模型。您更新的代码应类似于：

```
class Experience < ActiveRecord::Base
  attr_accessible :company_name
  belongs_to :company

  def company_name
    company.try(:name)
  end

  def company_name=(name)
    self.company = Company.find_or_create_by_name(name) if name.present?
  end
end 
```

您可以在此处阅读有关 Rails 批量分配保护的更多信息：http: [//guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

# javascript - 在 javascript 数组中搜索最接近的下一个值

> ID：11914546
> 
> 赞同：2
> 
> 时间：2012-08-11T12:04:07.653
> 
> 标签：javascript

我有一个类似的javascript数组`var test = [2,5,8,12,56];`，现在我想搜索最接近的下一个值9。所以在这种情况下输出是12（而不是8！）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T12:13:33.087

那么这里有一个简单的方法来做到这一点：

```
function getNextVal(arr, val) {
    // omit the next line if the array is always sorted:
    arr = arr.slice(0).sort(function(a,b){return a-b;});

    for (var i=0; i < arr.length; i++)
        if (arr[i] >= val)
            return arr[i];

    // return default value when val > all values in array
} 
```

如果搜索值在数组中，您不会说要返回什么，所以我假设您想要返回它。如果通过“最接近的下一个值”表示它应该始终返回*高于*搜索值更改的下一个数字`arr[i] >= val`以使用`>`而不是`>=`.

如果你有一个大数组，你可能想要某种二进制排序，而不是从头开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:13:12.270

如果数组已排序，您可以尝试以下方法，您需要针对边界情况进行调整，这只是为了算法的想法......

```
NUM is input
TEST is your array
INDEX is index variable

For INDEX from 0 .. TEST.SIZE -1 
    IF NUM > TEXT[INDEX]
        RETURN TEXT[INDEX] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:19:03.817

下面给出了一个非常简单的代码。希望对你有帮助

```
 var test = [2,5,8,12,56];
var key = 9;
var closestNext=1000;
for(var i=0;i<test.length;i++)
{
    if(test[i] > key)
    {
         if(test[i]<closestNext)
         {
             closestNext = test[i];
         }
    }

} 

alert(closestNext);
​ 
```

[在这里看到工作的](http://jsfiddle.net/g8Zrm/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T12:26:26.200

1 首先对数组进行排序，使用`arr.sort();`，只需按升序 ( `3,6,4,7,1 --> 1,3,4,6,7`) 对值进行排序，然后迭代：

```
function getNext(inputVal,arr)
{
    arr.sort();;
    for (var i=0;i<arr.lenght;i++)
    {
        if (arr[i] >= inputVal)
        {
            return arr[i];
        }
    }
    throw new Error('Out of range');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T13:13:37.080

如果您*知道*数组总是会被排序，或者如果事先对数组进行排序是合理的（例如，当数组不经常更改但您需要大量检索时），您可以对已排序的数组使用二进制搜索大批。

如果在数组中找不到该值，则返回上限，该上限指示大于给定值的最小元素。这平均给出了 O(log n) 的复杂度，而简单的方法（循环整个数组）平均给出了 O(n) 的复杂度。

```
// Binary search
// Adapted from http://jsfromhell.com/array/search
function binarySearch(arr, val, insert) {
    var high = arr.length, low = -1, mid;
    while (high - low > 1) {
        mid = (high + low) >> 1;
        if (arr[mid] < val) low = mid;
        else high = mid;
    }
    if (arr[high] == val || insert) {
        return high;
    } else {
        return -1;
    }
}

function getClosestNext(arr, val) {
    // Get index
    var i = binarySearch(arr, val, true);
    // Check boundaries
    return (i >= 0 && i < arr.length) ? arr[i] : null;
} 
```

# android - 根据主题属性设置视图背景使应用程序崩溃

> ID：11914547
> 
> 赞同：7
> 
> 时间：2012-08-11T12:04:15.557
> 
> 标签：android, android-layout

我正在尝试根据当前主题属性设置 ListView 背景颜色，但每次显示 ListView 时它都会崩溃。似乎我做错了什么，但我看不到什么......

这就是我正在做的事情：

首先，创建背景颜色：

```
<resources>
    <color name="userlist_background_light">#fff0f0f0</color>
    <color name="userlist_background_dark">#ff040404</color>
</resources> 
```

其次，为我的自定义主题创建属性：

```
<resources>
    <attr name="userlist_background" format="reference|color" />
</resources> 
```

第三，在我的主题中设置这个属性：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Light" parent="Theme.Sherlock.Light">
        <item name="userlist_background">@color/userlist_background_light</item>
    </style>

    <style name="Dark" parent="Theme.Sherlock">
        <item name="userlist_background">@color/userlist_background_dark</item>
    </style>
</resources> 
```

最后，在 ListView xml 中使用这个属性：

```
<ListView
        android:id="@+id/user_bar"
        android:layout_width="0dip"
        android:layout_height="0dip"
        android:background="?attr/userlist_background"
        android:cacheColorHint="?userlist_background"
        android:visibility="gone" /> 
```

甚至 Eclipse 布局视图崩溃。当然，如果我直接在背景属性中使用“@color/”就可以了。如果我使用说“？android：attr/colorBackground”，它甚至可以工作。

消息错误是：

> android.view.InflateException: Binary XML file line #8: Error inflating class android.view.ListView 原因：android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x2 /d=0x7f010068 a=-1}

我很确定我做错了什么，因为它适用于 android 属性，但我无法在我的谷歌搜索中找到什么。

我希望你能帮助我！

非常感谢，

塞巴斯蒂安。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T13:48:28.793

好的，我修复了它，这是由于一个错误！

我有两个`themes.xml`文件，一个用于 Honeycomb+，一个用于 Gingerbread-。我只将新属性添加到`themes.xml`目标 Gingerbread-，并且正在 ICS 上进行测试。

也许它会帮助其他会犯同样错误的人！

# servlets - 码头 HTTP 413 标头完整错误 - Java/Scala

> ID：11914555
> 
> 赞同：5
> 
> 时间：2012-08-11T12:05:41.623
> 
> 标签：servlets, jetty, scalatra

我正在使用 Jetty 7.6 和 Scalatra Web 框架。在一些请求中，我需要向客户端发送一个大文本作为响应正文，我使用 HttpServletResponse.getWriter() 来编写响应。

我注意到在客户端我收到 413 Header Full 错误。显然，在 Jetty 中解决此问题的一种方法是增加 jetty 的 header-buffer-size 值。

我想知道 HttpServletResponse.getWriter() 与请求标头的大小有什么关系？！据我了解 HttpServletResponse.getWriter() 写入响应正文而不是响应标头。

如果有人可以解释这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:14:00.660

不幸的是，这不仅仅是重要的标题（如 joakime thougth）。Jetty 有一个用于标头的缓冲区和一个用于请求的缓冲区。

*   如果完整的请求（http 数据流）适合听者的缓冲区，则没有问题。
*   如果它超过了头部的缓冲区，请求缓冲区将是用户的。
*   如果它超过了请求缓冲区，那么你会得到一个状态为 413 的标准 Http 响应。

答案有相同的东西（缓冲区），但希望 Http 旨在发送“分块”响应。

我在上传时面临同样的问题。

我发现您可以设置这些缓冲区的大小。请参阅：http: [//download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/nio/SelectChannelConnector.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/nio/SelectChannelConnector.html)

[http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/nio/AbstractNIOConnector.html](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/nio/AbstractNIOConnector.html)

[http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/AbstractConnector.html#setRequestHeaderSize(int](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/server/AbstractConnector.html#setRequestHeaderSize(int) )

您可以使用 jetty.xml 文件来执行此操作：

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN"     "http://jetty.mortbay.org/configure.dtd">
<Configure id="Server" class="org.eclipse.jetty.server.Server">
 <Call name="addConnector">
  <Arg>
   <New class="org.eclipse.jetty.server.nio.SelectChannelConnector">
    <Set name="port"><SystemProperty name="jetty.port" default="8080"/></Set>
    <Set name="requestHeaderSize">8192</Set>
   </New>
  </Arg>
 </Call>
</Configure> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T13:30:48.810

[HTTP 响应代码 413](https://www.rfc-editor.org/rfc/rfc2616#section-10.4.14)是 HttpStatus。[REQUEST_ENTITY_TOO_LARGE](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/http/HttpStatus.html#REQUEST_ENTITY_TOO_LARGE_413)。

它与您的 HttpServletResponse.getWriter() 无关。

捕获并检查请求标头，您正在向服务器发送不合理数量的标头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-09T19:13:55.270

如果您正在使用或升级到 Jetty 9，他们已经删除了 SelectChannelConnector。这是更新的 jetty.xml -

```
<New id="httpConfig" class="org.eclipse.jetty.server.HttpConfiguration">
  <Set name="requestHeaderSize">8192</Set>      
</New> 

<Call name="addConnector">
  <Arg>
    <New class="org.eclipse.jetty.server.ServerConnector">
      <Arg name="server"><Ref id="Server" /></Arg>
      <Arg name="factories">
        <Array type="org.eclipse.jetty.server.ConnectionFactory">
          <Item>
            <New class="org.eclipse.jetty.server.HttpConnectionFactory">
              <Arg name="config"><Ref id="httpConfig" /></Arg>
            </New>
          </Item>
        </Array>
      </Arg>
      <Set name="port">8080</Set>
    </New>
  </Arg>
</Call> 
```

请参阅[http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html](http://www.eclipse.org/jetty/documentation/current/configuring-connectors.html)

# scala - Scala：我们可以在密封案例类声明中将保护条件与模式匹配预先结合起来吗

> ID：11914556
> 
> 赞同：7
> 
> 时间：2012-08-11T12:05:43.590
> 
> 标签：scala

是否可以在密封案例类声明中将保护条件与模式匹配结合起来？

我意识到它可以在匹配块中包含保护条件，但我认为在密封案例类中预先定义这些条件是有益的。这将允许开发人员定义一组严格的可能输入，编译器将在模式匹配时检查这些输入。

所以总而言之，我希望能够做类似这样的事情：

```
// create a set of pattern matchable cases with guards built in

sealed abstract class Args
case class ValidArgs1(arg1:Int,arg2:Int) if arg1>1 && arg2<10 extends Args
case class ValidArgs2(arg1:Int,arg2:Int) if arg1>5 && arg2<6 extends Args
case class InvalidArgs(arg1:Int,arg2:Int) if arg1<=1 && arg2>=10 extends Args

// the aim of this is to achieve pattern matching against an exhaustive set of 
// pre-defined possibilities

def process(args:Args){
    args match 
    {
        case ValidArgs1 = > // do this
        case ValidArgs2= > // do this
        case InvalidArgs = > // do this
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T15:29:13.410

+1 提出一个有趣的推测性问题。由于您不是在类型级别操作，因此您无法在编译时验证实例化，除非可能对宏进行非常特殊的检查，例如当您将文字传递给构造函数时。

另一方面，您的场景（模式匹配）是运行时操作。为此，您可以使用提取器而不是案例类。

```
case class Args(arg1: Int, arg2: Int)
object ValidArgs1 {
  def apply(arg1: Int, arg2: Int): Args = {
    val res = Args(arg1, arg2)
    require(unapply(res))
    res
  }
  def unapply(args: Args): Boolean = args.arg1 > 1 && args.arg2 < 10
}

def process(args: Args) = args match {
  case ValidArgs1() => "ok"
  case _            => "invalid"
}

process(ValidArgs1(2, 9))
process(Args(1, 10))
process(Args(3, 4)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T12:36:16.743

我不相信您将能够在 Scala 中在编译时检查一般约束/断言，因为 Scala 没有执行此操作所需的[静态验证器。](http://en.wikipedia.org/wiki/Formal_verification)如果您有兴趣，请查看（研究）语言/工具，例如[ESC/Java](http://en.wikipedia.org/wiki/ESC/Java)、[Spec#](http://research.microsoft.com/en-us/projects/specsharp/)、[Dafny](http://research.microsoft.com/en-us/projects/dafny/)或[VeriFast](http://people.cs.kuleuven.be/~bart.jacobs/verifast/)。

[可能有一些方法可以通过使用类型级编程](http://apocalisp.wordpress.com/2010/06/08/type-level-programming-in-scala/)或[Scala 宏](http://scalamacros.org/)对常规编译器 Scala 进行非常有限的静态检查，但这只是我的一个疯狂猜测，因为我不熟悉它们中的任何一个。老实说，我必须承认，如果宏真的可以在这里提供帮助，我会感到非常惊讶。

有效的是运行时断言检查，例如

```
case class Foo(arg1: Int, arg2: Int) {
  require(arg1 < arg2, "The first argument must be strictly less than " +
                       "the second argument.")
}

Foo(0, 0)
  /* java.lang.IllegalArgumentException: requirement failed:
   *     The first argument must be strictly less than the second
   *     argument.
   */ 
```

但这可能不是您的想法。

# jquery - 没有克隆的jQuery滑块

> ID：11914557
> 
> 赞同：0
> 
> 时间：2012-08-11T12:05:52.480
> 
> 标签：jquery, slider

是否可以使用 jquery 进行不克隆的连续/旋转滑块？要求加载最后一张和上一张幻灯片的 25% 的一半应与第一张/当前幻灯片一起显示。当用户点击下一个/上一个按钮时，它必须是旋转的。

我已经尝试过克隆，但是较小的分辨率很好，在较大的分辨率下甚至显示了 clonnig div。我不应该显示克隆 div。

如果有任何堵塞，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:24:26.577

```
<div id="MainSliderContent" style="display: table-cell;">
    <div class="Message">
        Test 1
    </div>
    <div class="Message">
        Test 2
    </div>
    <div class="Message">
        test 3
    </div>
    <div class="Message">
        Test 4
    </div>
</div>​

 $(document).ready(function () {
        //if ($('#MainSliderContent').find('div.Message').length > 1) {
        $('#MainSliderContent').find('div.Message:not(:first)').hide();

        $('#MainSliderContent').live({
            mouseenter: function () {
                $(this).addClass('Hover');
            },
            mouseleave: function () {
                $(this).removeClass('Hover');
            }
        });

        setInterval(function () {
            if (!$('#MainSliderContent').hasClass('Hover')) {
                var $messageObj = $('#MainSliderContent').find('div.Message:visible');
                $messageObj.slideUp('slow').next('div.Message').slideDown('slow');
                $('#MainSliderContent').find('div.Message:last').after($messageObj);
            }
        }, 1 * 1000);
        //}
    });​ 
```

演示见这个链接：http: [//jsfiddle.net/nanoquantumtech/BJ6R7/](http://jsfiddle.net/nanoquantumtech/BJ6R7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:10:39.733

您可以使用任何滑块

[https://github.com/ProLoser/AnythingSlider/wiki/Usage](https://github.com/ProLoser/AnythingSlider/wiki/Usage)

用于克隆的代码是

```
slider.$items//callback argument 
```

# php - 是什么导致了这种语 法差异？

> ID：11914558
> 
> 赞同：0
> 
> 时间：2012-08-11T12:05:54.027
> 
> 标签：php

看看下面的代码

```
<?php
echo "$_SERVER[HTTP_HOST] <br />";
echo $_SERVER['HTTP_HOST'], "\n\n";
?> 
```

两个 echo 语句都使用相同的技术从超全局数组 $_SERVER 返回 HTTP_HOST 索引的值？我的问题是导致语法差异的原因是什么？我注意到以下差异：

1.  第一个 echo 语句中的 HTTP_HOST 没有用单引号括起来，这与我在第二个 echo 语句中使用的语法相反。如果我将 HTTP_HOST 括在第一个 echo 语句的单引号中，我会收到以下错误

> 解析错误：语法错误，意外的 '' (T_ENCAPSED_AND_WHITESPACE)，在第 2 行的 C:\xampp\htdocs\php-blog\simple-blog\server.php 中需要标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING)

1.  为什么在第二个 echo 语句中的 ['HTTP_HOST'] 之后需要逗号，而在第一个 echo 语句中不需要逗号？如果我丢弃这个逗号，我会收到以下错误。

> 解析错误：语法错误，意外 '"\n\n"' (T_CONSTANT_ENCAPSED_STRING)，需要 ',' 或 ';' 在 C:\xampp\htdocs\php-blog\simple-blog\server.php 第 3 行

我是编程新手，需要指导，请帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:09:44.787

您的第一个语句调用 echo 只有一个参数。参数是一个包含变量的字符串。这样做时，您应该使用方括号来确保 php 理解您的变量是否开始：

```
 echo "{$_SERVER['HTTP_HOST']} <br>"; 
```

您还可以用点连接字符串：

```
 echo $_SERVER['HTTP_HOST'] . "<br>"; 
```

逗号只是一次写入多个回声的另一种方式：

```
echo 1, 2; 
```

是相同的

```
echo 1;
echo 2; 
```

[http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:11:52.883

php 语法允许引用双引号内的变量。
例如：

```
$x = "hello";
echo "$x world"; 
```

类似于：

```
echo $x . " world"; 
```

或者

```
echo $x , " world"; 
```

一切都会输出`hello world`。

请注意，不允许在单引号内引用变量，因此
`echo '$x world';`
是无效的。

# windows-phone-7 - WP7 更改应用程序名称

> ID：11914562
> 
> 赞同：3
> 
> 时间：2012-08-11T12:06:21.527
> 
> 标签：windows-phone-7

我已经创建了一个应用程序，我即将将它推向市场。我想更改应用程序的名称。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T13:31:13.373

您在名为 WMAppmanifest.xml 的文件中更改应用程序的标题。在 App-tag 内有一个 Title 字段。

# c# - 尝试托管我的 WCF 服务时出现错误：服务脱机或代理设置问题？

> ID：11914564
> 
> 赞同：0
> 
> 时间：2012-08-11T12:06:31.637
> 
> 标签：c#, wcf

该服务在我的本地系统上运行良好，但是当我在测试环境中部署时，它给了我以下错误，我使用 wcftestclient.exe 和这个 url [Link to wsdl](http://leadtransfer.testquote.co.uk/Service.svc?wsdl)。

在错误详细信息中，它说的是以下内容：

```
`The content type text/html; charset=UTF-8 of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 1024 bytes of the response were: '<HTML><HEAD><link rel="alternate" type="text/xml" href="http://leadtransfer.testquote.co.uk/Service.svc?disco"/><STYLE type="text/css">#content{ FONT-SIZE: 0.7em; PADDING-BOTTOM: 2em; MARGIN-LEFT: 30px}BODY{MARGIN-TOP: 0px; MARGIN-LEFT: 0px; COLOR: #000000; FONT-FAMILY: Verdana; BACKGROUND-COLOR: white}P{MARGIN-TOP: 0px; MARGIN-BOTTOM: 12px; COLOR: #000000; FONT-FAMILY: Verdana}PRE{BORDER-RIGHT: #f0f0e0 1px solid; PADDING-RIGHT: 5px; BORDER-TOP: #f0f0e0 1px solid; MARGIN-TOP: -5px; PADDING-LEFT: 5px; FONT-SIZE: 1.2em; PADDING-BOTTOM: 5px; BORDER-LEFT: #f0f0e0 1px solid; PADDING-TOP: 5px; BORDER-BOTTOM: #f0f0e0 1px solid; FONT-FAMILY: Courier New; BACKGROUND-COLOR: #e5e5cc}.heading1{MARGIN-TOP: 0px; PADDING-LEFT: 15px; FONT-WEIGHT: normal; FONT-SIZE: 26px; MARGIN-BOTTOM: 0px; PADDING-BOTTOM: 3px; MARGIN-LEFT: -30px; WIDTH: 100%; COLOR: #ffffff; PADDING-TOP: 10px; FONT-FAMILY: Tahoma; BACKGROUND-COLOR: #003366}.intro{MARGIN-LEFT: -15px}</STYLE><TITLE>Service Service</TITLE></HEAD><BODY><DIV id="content"><P clas'.

Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at ILeadTransfer.TransferLead(LeadTransfer lead)
   at LeadTransferClient.TransferLead(LeadTransfer lead)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:21:20.010

确保您对测试环境有足够的权限。您得到的是 HTML 响应而不是 XML。查看整个响应以实际了解问题所在。

# javascript - 如何在 js / jquery 中绑定“附加数据”事件？

> ID：11914565
> 
> 赞同：0
> 
> 时间：2012-08-11T12:06:38.953
> 
> 标签：javascript, jquery

目前，我有一段代码如下所示：

```
$("#somediv").append(data);
somethingToDoAfterDataAppended(); 
```

看起来数据是异步追加的，因此在实际追加数据后不一定会调用下一个函数。

我正在考虑一种将这个函数与“附加数据”事件绑定的方法——这可能吗？

任何其他解决方案同样有用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T14:16:25.010

很简单。您可以更改附加方法并为您的特殊事件插入触发器。

```
$.fn.append = (function(old){
   return function(){

       $(this).trigger('beforeAppend'); // if needed
       var result = old.apply(this,arguments);
       $(this).trigger('afterAppend');
       return result;

       }

    })($.fn.append); 
```

在您的初始化逻辑中的某处：

```
$("#somediv").bind('afterAppend',somethingToDoAfterDataAppended); 
```

和 ：）

```
("#somediv").append(data); 
```

# c - 从带有 MSG_ERRQUEUE 标志的 recvmsg 读取 ICMP 有效负载

> ID：11914568
> 
> 赞同：1
> 
> 时间：2012-08-11T12:06:48.137
> 
> 标签：c, sockets, recv, traceroute

我正在使用 BSD 套接字来构建不需要 root 权限的高级跟踪路由程序（如跟踪路径）。使用 UDP 和绑定套接字，我调用：

```
recvmsg(socket, header, MSG_ERRQUEUE) 
```

我收到有关先前发送的数据包已触发的假定 ICMP 通知的信息。您知道是否可以访问 ICMP 有效负载（应该是先前发送的数据包）？

我从 recvmsg 手册页中读到：

```
[..] The payload of the original packet that caused the error
is passed as normal data via msg_iovec. [..] 
```

但是我在那里找不到任何有用的东西，它似乎只是随机数据（我使用wireshark交叉检查数据）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T00:22:28.823

您可以使用此示例代码来检查您遇到的 ICMP 错误并进行处理（示例包含一些注释和链接）：

```
#define BUFFER_MAX_SIZE 1024
int on = 1;
/* Set the option, so we can receive errors */
setsockopt(socket, SOL_IP, IP_RECVERR,(char*)&on, sizeof(on));
/* Other code here */
/* .... */
/* Handle receving ICMP Errors */
int return_status;
char buffer[BUFFER_MAX_SIZE];
struct iovec iov;                       /* Data array */
struct msghdr msg;                      /* Message header */
struct cmsghdr *cmsg;                   /* Control related data */
struct sock_extended_err *sock_err;     /* Struct describing the error */ 
struct icmphdr icmph;                   /* ICMP header */
struct sockaddr_in remote;              /* Our socket */

for (;;)
{
    iov.iov_base = &icmph;
    iov.iov_len = sizeof(icmph);
    msg.msg_name = (void*)&remote;
    msg.msg_namelen = sizeof(remote);
    msg.msg_iov = &iov;
    msg.msg_iovlen = 1;
    msg.msg_flags = 0;
    msg.msg_control = buffer;
    msg.msg_controllen = sizeof(buffer);
    /* Receiving errors flog is set */
    return_status = recvmsg(socket, &msg, MSG_ERRQUEUE);
    if (return_status < 0)
        continue;
    /* Control messages are always accessed via some macros 
     * http://www.kernel.org/doc/man-pages/online/pages/man3/cmsg.3.html
     */
    for (cmsg = CMSG_FIRSTHDR(&msg);cmsg; cmsg = CMSG_NXTHDR(&msg, cmsg)) 
    {
        /* Ip level */
        if (cmsg->cmsg_level == SOL_IP)
        {
            /* We received an error */
            if (cmsg->cmsg_type == IP_RECVERR)
            {
                fprintf(stderror, "We got IP_RECVERR message\n");
                sock_err = (struct sock_extended_err*)CMSG_DATA(cmsg); 
                if (sock_err)
                {
                    /* We are interested in ICMP errors */
                    if (sock_err->ee_origin == SO_EE_ORIGIN_ICMP && sock_err->ee_type == ICMP_DEST_UNREACH) 
                    {
                        /* Handle ICMP destination unreachable error codes */
                        switch (sock_err->ee_code) 
                        {
                            case ICMP_NET_UNREACH:
                                /* Handle this error */
                                fprintf(stderror, "Network Unreachable Error\n");
                                break;
                            case ICMP_HOST_UNREACH:
                                /* Handle this error */
                                fprintf(stderror, "Host Unreachable Error\n");
                                break;
                            /* Handle all other cases. Find more errors :
                             * http://lxr.linux.no/linux+v3.5/include/linux/icmp.h#L39
                             */

                        }
                    }
                }
            }
        } 
    }
} 
```

# php - 在 cakephp 中检索 json 数据

> ID：11914570
> 
> 赞同：0
> 
> 时间：2012-08-11T12:07:02.010
> 
> 标签：php, json, cakephp, cakephp-1.3, itunes

我需要从[http://itunes.apple.com/search?term=jack+johnson检索 json 输出数据](http://itunes.apple.com/search?term=jack+johnson)

我正在使用 cakephp 1.3。

知道我们如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:33:15.667

```
$json = file_get_contents("http://www.......");
$array = json_decode($json);

print_r($array); 
```

那是你要找的吗？应该管用 ：）

# wcf - 具有传输安全性的 WCF wsHttpBinding

> ID：11914571
> 
> 赞同：2
> 
> 时间：2012-08-11T12:07:06.597
> 
> 标签：wcf, security, wcf-binding

[这里](http://msdn.microsoft.com/en-us/library/system.servicemodel.wshttpsecurity)在 MSDN 上以及[在](http://msdn.microsoft.com/en-us/library/ms734679.aspx)处理时说明`wsHttpBinding`，传输安全性是通过 SSL 处理的。

在[有关 SSL 和 WCF 的 MSDN 页面上，](http://msdn.microsoft.com/en-us/library/ms734679.aspx)它指出当 ServiceHost 托管在 IIS 中时，ServiceHost 将 SSL 留给 IIS 处理。

这是否意味着如果`binding/securityMode="Transport"`, 任何`wsHttpBinding/binding/security/transport/clientCredentialType`值都将被忽略，因为它们的任何选项都不需要设置 SSL 传输？

当它声明时，它甚至似乎在[这里说了些什么](http://msdn.microsoft.com/en-us/library/ms731884.aspx)

> “将安全模式设置为 TransportWithMessageCredential 时，传输确定提供传输级安全性的实际机制。例如，HTTP 协议在 HTTP (HTTPS) 上使用安全套接字层 (SSL)。因此，设置任何的 ClientCredentialType 属性传输安全对象（如 HttpTransportSecurity）被忽略。换句话说，您只能设置消息安全对象的 ClientCredentialType（对于 WSHttpBinding 绑定，NonDualMessageSecurityOverHttp 对象）。

然而[在这里](http://msdn.microsoft.com/en-us/library/ms734679.aspx)for`basicHttpBinding`和 for `wsHttpBinding`，他们都明确强调如果安全模式设置为 Transport ，请将 binding/transport/clientCredentialType 设置为某些东西（例如：Windows）。

`Transport`和之间的确切区别是`TransportWithMessageCredential`什么？

而且我的棒子有错误吗，`SecurityType`枚举（`None|Message|Transport|Mixed`）不仅是为了隐私，而且是为了对服务器进行身份验证？

如果传输安全是由 SSL 加密提供的，那么身份验证/授权是如何陷入这个阶段的呢？

非常感谢您帮助我更好地了解这一切是如何结合在一起的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T13:01:01.943

据我所知，TransportWithMessageCredential 是一种“两全其美”。通道在传输层上是安全的，因此客户端和服务之间存在安全连接（这可以非常快，在硬件中实现），而且消息使用消息凭据进行签名，因此它可以在到达服务之前经历多个跃点（在 WCF 中验证）。

当然，您可以使用传输层不支持的消息凭据，例如用户名/密码。

# php - 格式化日期时间

> ID：11914572
> 
> 赞同：-3
> 
> 时间：2012-08-11T12:07:10.013
> 
> 标签：php, mysql, html

我正在尝试格式化来自数据库的日期时间，格式为

```
2012-06-11 21:39:54 
```

但是我希望它以以下格式显示`June 11`

怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:10:51.820

```
echo date('M d', strtotime('2012-06-11 21:39:54')); 
```

[输出](http://codepad.org/tXxxLXMS)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T12:21:14.940

您还可以使用 DateTime 对象。

```
$date = new DateTime($yourString);
$date->format($yourFOrmat); 
```

我认为这将是最好的方法，因为 DateTime 确实比 timestamp 和 date/strtotime 函数更强大。从我上面给出的代码中，您可以添加诸如修改日期、迭代时间、比较 2 个没有诸如 str_to_time 之类的函数的日期之类的功能...

```
$date->modify('+1 day');//the day after for example
foreach(new DatePeriod($date,new DateInterval('PT1M'),10){
    $date->format($yourFormat);//iterate each minute
} 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:12:32.173

PHP 手册提供了有关使用日期/时间函数的优秀文档。基本上，您将需要两个函数的组合：[strtotime()](http://www.php.net/manual/en/function.strtotime.php)和[date()](http://www.php.net/manual/en/function.date.php)。

`strtotime()`会将您的日期转换为可以`date()`作为第二个参数提供的 Unix 时间戳。

您需要的日期格式为：`M d`.

**替代方案**：此外，您还可以尝试不需要转换为 UNIX 时间戳的 MYSQL 对应项。它记录[在这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)。假设您使用`date`日期时间字段，您将需要这样的东西，

```
SELECT id,..,DATE_FORMAT(`date`, '%M %d') as f_date FROM table 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-11T14:05:44.577

对于使用 php 格式化日期，您需要将日期的时间戳
和格式说明符作为参数传递给 date 函数。例如 echo date('M d',strtotime('2012-06-11 21:39:54'));

# mysql - 在 WIndows 7 Home Basic Edition 上安装 XAMPP 时出错

> ID：11914577
> 
> 赞同：0
> 
> 时间：2012-08-11T12:07:55.357
> 
> 标签：mysql, windows, apache, installation, xampp

我最近购买了一台配置不错的戴尔笔记本电脑和 Windows 7 Home Basic X64 Edition。现在，当我安装 XAMPP 时，它给了我以下错误。你知道有什么解决办法吗？

![安装 XAMPP Home Basic Edition 时出错](../Images/0df68708cc07fc0a978e7d30d4e6e951.png)

我在网上搜索，并尝试打开“lusrmgr.msc”，但它说“这台计算机运行的是 Windows 7 Home Basic。此版本可能无法使用 snapin。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:13:52.953

只需在开始菜单或控制面板搜索框中输入 UAC。 ![在此处输入图像描述](../Images/263272d8f0277b6c823fa54a9b9e48d2.png)
您可以简单地向下拖动滑块，如果将其一直拖到底部**(NEVER Notify)**，您将完全禁用它。

![在此处输入图像描述](../Images/9e418699ece637ed57bec708492cc9f8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:14:51.233

右键单击 Xampp 设置并单击

```
Run as Administrator 
```

我认为这将达到您的目的。

# loops - 循环迭代器命名约定

> ID：11914581
> 
> 赞同：5
> 
> 时间：2012-08-11T12:08:57.453
> 
> 标签：loops, iterator, naming-conventions

我们知道，不知何故，我们非常普遍地在循环中使用`i`和`j`变量。如果需要双`for`循环，很可能会使用以下内容：

```
for (int i = 0; i < n; i++)
{
    for (int j = 0; j < m; j++)
    {
        // do some stuff...
    }
} 
```

但是，如果我需要`for`在这些循环中使用第三个循环，则我对第三个迭代器没有任何命名约定。我，可能使用以下变量：`r`, `k`, `ii`,`jj`等等...

第三个（等等......）循环的迭代器是否有命名约定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T12:46:30.327

可读性最重要的应该是**明显的名称**。
*i 和 j*不是最明显的，但对于简单的情况可能没问题。考虑这个（诚然有些考虑不周）的例子；

```
static void Main(string[] args)
{
    for(int i = 0; i < 100; i++)
        for (int j = 0; j < 100; j++)
            for (int k = 0; k < 100; k++)
                Console.WriteLine("" + i + "-" + j + "-" + k);
} 
```

对比

```
static void Main(string[] args)
{
    for(int survey = 0; survey < 100; survey++)
        for (int question = 0; question < 100; question++)
            for (int option = 0; option < 100; option++)
                Console.WriteLine("" + survey + "-" + question + "-" + option);
} 
```

很容易看出哪个更有意义。但是，当我们这样做时，如何使它更具可读性，同时进一步消除您的命名问题？

```
static void Main(string[] args)
{
    for(int survey = 0; survey < 100; survey++)
        PrintSurvey(survey);
}

private static void PrintSurvey(int survey)
{
    for (int question = 0; question < 100; question++)
        PrintQuestion(survey, question);
}

private static void PrintQuestion(int survey, int question)
{
    for (int option = 0; option < 100; option++)
        PrintOption(survey, question, option);
}

private static void PrintOption(int survey, int question, int option)
{
    Console.WriteLine("" + survey + "-" + question + "-" + option);
} 
```

对于这个简单的循环，可能有点矫枉过正/冗长，只是想说明有更多方法可以处理嵌套循环的命名问题，而不仅仅是找到唯一的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T12:44:06.310

在计算机视觉应用程序中看到嵌套循环并不少见，正如其他人所说，没有约定，至少在字母的顺序上，但通常人们倾向于使用字母`i,j,k,l,m,n,q,h...`

例如，这是用于过滤图像的二维离散卷积的可能实现：

```
/* The Input image I and Output image O have M*N pixels.  
 * The kernel H has size (2k+1)*(2k+1)
 */
for (i=k; i<M-k; i++) {
    for (j=k; j<N-k; j++) {
        temp=0;
        for (m=-k; m<=k; m++)
            for (n=-k; n<=k; m++)
                temp = temp + I[i-m,j-n] * H[m+k,n+k];
        O[i,j] = temp;
    }
} 
```

[在这里](http://www.songho.ca/dsp/convolution/convolution.html#cpp_conv2d)，您可以看到 C++ 中的另一个实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T12:19:23.300

这些事情没有既定的惯例。`i`适用于基本循环。对于更复杂的循环或实现一目了然的地方，您应该考虑明确命名迭代器，例如`surveyIndex`and `questionIndex`，而不是`i`and `j`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-07T16:01:14.920

实际上，我几乎从不使用 i，我更喜欢`cnt`, or `index`, or之类的东西`id`。因为一个`cnt`仍然很短而且打字很快。此外，人们在查看您的代码时会立即知道它是什么，它是一个计数器，最重要的是，当您尝试使用搜索类似的东西时，`"i"`您会得到很多您不想看到的垃圾

```
include <iostream>

int main ()

//hi there, this is a comment

for (int i = 0; i < 5; i++) 
```

而如果您`Ctrl+F`使用**index**而不是**i**，或者更使用**cnt**，您只会看到您期望的内容，因此导航起来会更加舒适。

对于更复杂的循环，尽管您绝对应该输入变量的全名，否则您只会感到困惑

# eclipse - 通过 FTP 使用 Eclipse 进行协作实时编辑

> ID：11914584
> 
> 赞同：1
> 
> 时间：2012-08-11T12:09:20.560
> 
> 标签：eclipse, ftp, connection, collaborative

有一个名为“Saros”的 Eclipse 插件，它使您有机会与一个或多个朋友实时编辑和共享项目，并与您的朋友实时编辑文件（您可以在同一行上写）。

但这只能在本地服务器上完成。

今天我尝试通过我的连接按钮分享一个项目，但没有成功（我认为“Saros 无法通过连接按钮看到”）

无论如何。还有另一种方法可以通过 FTP 使用 Eclipse 或其他程序来编辑我的项目，现场直播？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:17:47.487

可以尝试作为替代 aptana 工作室。[http://www.aptana.org/products/studio3/download](http://www.aptana.org/products/studio3/download)

# c++ - 从原生 C/C++ 生成和运行 LLVM 代码

> ID：11914590
> 
> 赞同：10
> 
> 时间：2012-08-11T12:10:42.000
> 
> 标签：c++, c, gcc, llvm, clang

是否可以从本机`C`或`C++`编译程序 (gcc) 中执行这些操作：

1.  调用`clang`并编译给定`C`的函数代码，作为`const char *`.
2.  获取指针并在 LLVM 虚拟机中运行。
3.  在本机程序中获取结果并继续。

如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T16:46:41.727

有关简约示例，请参阅[Clang 解释器](http://llvm.org/svn/llvm-project/cfe/trunk/examples/clang-interpreter/main.cpp)。

[Cling](http://root.cern.ch/drupal/content/cling)是这种方法的更实际的例子。

# php - Google Feed - 唯一产品标识符无效

> ID：11914595
> 
> 赞同：-1
> 
> 时间：2012-08-11T12:11:10.857
> 
> 标签：php, feed, uniqueidentifier

我在文本文件中有一个谷歌提要。当我在 Google Merchant 上上传时，它显示 90 种产品存在“无效的唯一产品标识符”问题。谁能告诉我这是怎么回事或问题？

谢谢，扎因·雷扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:30:58.730

如果不知道您发送的提要的更多细节，我不能肯定地说，但我确实发现这个页面可能会有所启发：http: [//support.google.com/merchants/bin/answer。 py?hl=en&answer=160161](http://support.google.com/merchants/bin/answer.py?hl=en&answer=160161)

从此；听起来您属于以下类别之一：

*   数字太多或太少
*   字母或符号（而不仅仅是数字）
*   校验位无效

当我们遇到这个问题时；对我们来说最常见的原因是我们使用内部 UPC（即它们是我们的独家产品，因此没有注册的 UPC 代码；不像你去零售店看背面一块糖果）。（根据文档，您可以申请豁免）

我可能会从那里开始，然后确保我没有任何字母/符号，然后继续确保您发送正确数量的数字。

# java - 子活动未接收数据？

> ID：11914596
> 
> 赞同：0
> 
> 时间：2012-08-11T12:11:15.027
> 
> 标签：java, android, eclipse, android-activity

我正在学习android，所以我正在练习一个程序，在该程序中我用一个按钮开始一个新的活动，然后用户在前一个活动的edittext中输入的任何文本都必须显示在新启动的活动的文本视图中但是当我将用户输入传递给新活动时，它不显示任何内容。这里的问题可能是代码：让我们说这个父活动：

```
 case R.id.Sfr:
        Intent data= new Intent(SendData.this, RecieveData.class);
        Bundle check = new Bundle();

        check.putString("UmerData", cheese);
        medt.setText(cheese);
        data.putExtras(check);
        startActivityForResult(data, 5); // It is used to return data from child activity
        break; 
```

应该显示传递给它的用户输入的子活动是：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recievedata);
    Initialize(); 
    Bundle got = getIntent().getExtras();

    rt1.setText(got.getString("UmerData"));

} 
```

为什么这个子活动不显示已传递给它的用户输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:17:43.807

尝试这个 -

```
case R.id.Sfr:
    Intent data= new Intent(SendData.this, RecieveData.class);
    Bundle check = new Bundle();
    check.putString("UmerData", cheese);
    medt.setText(cheese);
    data.putExtras(check);
    startActivity(data);
    break; 
```

应该显示传递给它的用户输入的子活动是：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recievedata);
    InitializeFuck();
    Bundle got = getIntent().getExtras();
    rt1.setText(got.getString("UmerData"));
} 
```

看看这些现有的答案 -

1.  [在活动之间传递数据](https://stackoverflow.com/a/2965248/940096)

2.  [如何在活动之间传递数据](https://stackoverflow.com/a/2091482/940096)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:31:33.980

写在第一个活动中：-

```
Intent intent = new Intent(Activity1.this, Activity2.class);
intent.putStringExtra("keyForData", Value);
startActivity(intent); 
```

在第二个活动中编写代码：-

```
Intent intent = Activity2.this.getIntent();
String data  =intent.getStringExtra("KeyForData"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:58:11.957

**1.**使用`Intent`with`putExtra()`发送**数据**到`Another Activity`.

**例如：**

```
 Intent i = new Intent(Your_Class.this, Desired_Class.class);

   i.putExtra("NameKey","name");

   startActivity(i); 
```

**2.**现在`getIntent()`在**接收活动**上使用获取`Starting Intent`，然后使用 `getExtras()`and`getString()`获取**与键关联的字符串值**。我们也有`getInt()` **等等。。**

**例如：**

```
 Intent intent = getIntent();

   String name = intent.getExtras().getString("NameKey"); 
```

# android - 根据 EditText Android 中的输入设置列表视图的位置

> ID：11914605
> 
> 赞同：-1
> 
> 时间：2012-08-11T12:13:19.997
> 
> 标签：android, android-listview

我正在制作一个字典应用程序，我打算在其中包含很多单词。（大约 10 万）我将它与单词的含义一起呈现在一个列表中。

我正在使用自定义数组适配器来填充 listView 并在 listview 中填充自定义布局。

这是我的场景：

1> 我有 edittext 允许用户输入他们正在寻找的单词。2>一旦用户输入单词，例如**R**，我想设置列表视图的选择，其中第一个字母是 R ，一旦用户输入下一个工作，比如说**RE**，列表视图位置应更改为列表位置前两个字母是**RE**。

为了实现这一点，我已将 addTextchanged Listner 添加到 edittext 并过滤了适配器，但它不起作用。一旦我输入一些东西，列表就会变空。

您能否建议我更好的方法或如何实现以下功能。

任何帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:03:24.657

如果我正确理解您的要求，那么您希望通过基于键入的字母滚动列表来最小化用户必须在您的字典应用程序中进行的键入。
您可以使用自动完成文本视图代替编辑文本来实现相同的结果。
当用户键入一些字母时，android 将显示以这些单词开头的所有单词。
当用户选择正确的单词时，列表可以滚动到该位置。这是示例代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <AutoCompleteTextView
        android:id="@+id/edit"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:completionThreshold="3" />

</LinearLayout> 
```

公共类 AutoCompleteActivity 扩展 Activity 实现 OnItemClickListener{

```
private AutoCompleteTextView edit;

private static final String[] items={"lorem", "ipsum", "dolor",
    "sit", "amet", "consectetuer", "adipiscing", "elit", "morbi",
    "vel", "ligula", "vitae", "arcu", "aliquet", "mollis","etiam",
    "vel", "erat", "placerat", "ante", "porttitor", "sodales", 
    "pellentesque", "augue", "purus"};

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);
    edit=(AutoCompleteTextView)findViewById(R.id.edit);
    edit.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line,
            items));

    edit.setOnItemClickListener(this);
}

@Override
public void onItemClick (AdapterView<?> parent, View v, int position, long Id)
{
    Toast.makeText(AutoCompleteActivity.this, items[position], Toast.LENGTH_SHORT).show();
    // scroll the list to the correct position
    //listView.setSelection(position);
} 
```

}

这里的适配器附加了 autoCompleteText 视图，当用户键入时，它会
在下拉列表中显示以这些字母开头的所有单词，并且当用户
单击列表中的任何单词时，将调用 onItemClick 方法。

我希望这个能帮上忙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:53:01.133

这里有两个建议给你。
**1**、[`Search Interface`](http://developer.android.com/guide/topics/search/search-dialog.html)搭配使用`Content Provider`。这种方式有点复杂，但对管理大数据更有效。这`Dictionary sample`提供了两个搜索选项
- 键入关键字和带有匹配项的建议列表视图下拉菜单。您只需单击并获取单词的含义
- 键入**不**完整的关键字并按放大镜图标，它会返回相对匹配项列表视图。

您可以下载示例并导入或只是`Create a sample project`在`Eclipse`选择`SearchableDictionary`示例。

**2**、贴`Edittext`滤`ListView`。添加您的代码，以便我们为您提供帮助。

在我看来`AutoCompleteTextView`，`ListView`下面是不方便的`User`。您曾建议下拉列表视图（在 中`AutoCompleteTextView`），用户希望在单击建议时获得单词的含义，而不是在下面的 ListView 中再次单击（两次单击以获取单词的含义）。一个`AutoCompleteTextView`带有`TextView`显示词意义的词似乎很合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-18T07:05:46.643

```
public class SearchableDictionary extends Activity {

    private TextView mTextView;
    private ListView mListView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTextView = (TextView) findViewById(R.id.text);
    mListView = (ListView) findViewById(R.id.list);

    Intent intent = getIntent();

    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        // handles a click on a search suggestion; launches activity to show word
        Intent wordIntent = new Intent(this, WordActivity.class);
        wordIntent.setData(intent.getData());
        startActivity(wordIntent);
        finish();
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        // handles a search query
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }
}

/**
 * Searches the dictionary and displays results for the given query.
 * @param query The search query
 */
private void showResults(String query) {

    Cursor cursor = managedQuery(DictionaryProvider.CONTENT_URI, null, null,
                            new String[] {query}, null);

    if (cursor == null) {
        // There are no results
        mTextView.setText(getString(R.string.no_results, new Object[] {query}));
    } else {
        // Display the number of results
        int count = cursor.getCount();
        String countString = getResources().getQuantityString(R.plurals.search_results,
                                count, new Object[] {count, query});
        mTextView.setText(countString);

        // Specify the columns we want to display in the result
        String[] from = new String[] { DictionaryDatabase.KEY_WORD,
                                       DictionaryDatabase.KEY_DEFINITION };

        // Specify the corresponding layout elements where we want the columns to go
        int[] to = new int[] { R.id.word,
                               R.id.definition };

        // Create a simple cursor adapter for the definitions and apply them to the ListView
        SimpleCursorAdapter words = new SimpleCursorAdapter(this,
                                      R.layout.result, cursor, from, to);
        mListView.setAdapter(words);

        // Define the on-click listener for the list items
        mListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                // Build the Intent used to open WordActivity with a specific word Uri
                Intent wordIntent = new Intent(getApplicationContext(), WordActivity.class);
                Uri data = Uri.withAppendedPath(DictionaryProvider.CONTENT_URI,
                                                String.valueOf(id));
                wordIntent.setData(data);
                startActivity(wordIntent);
            }
        });
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.search:
            onSearchRequested();
            return true;
        default:
            return false;
    }
} 
```

}

# c# - 如何在 Windows 服务 C# 中获取系统启动事件？

> ID：11914611
> 
> 赞同：1
> 
> 时间：2012-08-11T12:14:34.120
> 
> 标签：c#, .net, service, windows-services, systemevent

我正在编写一个 Windows 服务。我想做一些关于系统启动、系统锁定、关机的功能。如何在 windows 服务中获取启动、锁定和关闭事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:33:27.380

尝试使用 Microsoft.Win32.SystemEvents 类。

# objective-c - 核心情节：如何将两个 y 轴的轴标题定位在同一高度？

> ID：11914613
> 
> 赞同：1
> 
> 时间：2012-08-11T12:15:01.423
> 
> 标签：objective-c, ios, uiview, core-plot

我在散点图中使用了两个 y 轴（y 和 y2），我想将每个轴的标题放置在相同的高度。

请参考下面的示例图表，其中我有两个标题（y：“USD”和 y2：“ev/ebit”）。不幸的是，我没有找到将两个标题绘制在完全相同的高度（y 值）的方法。

这就是我目前计算标题的 y 位置的方式：

```
double yTitleLocation = plotSpace.yRange.lengthDouble + plotSpace.yRange.locationDouble;
yAxis.titleLocation = CPTDecimalFromDouble(yTitleLocation);
yAxis.title = self.issue.company.contrCurrency;
yAxis.titleRotation = 2 * M_PI;
yAxis.titleOffset = -15;

double y2TitleLocation = valuationPlotSpace.yRange.lengthDouble + valuationPlotSpace.yRange.locationDouble;
y2Axis.titleLocation = CPTDecimalFromDouble(y2TitleLocation);
y2Axis.title = self.valuation.id;
y2Axis.titleRotation = 2 * M_PI; 
```

我将如何更改我的代码以在两个 y 轴的相同 y 值处绘制标题？

您建议将我的标题左对齐 y 轴并右对齐 y2 轴。我目前正在为 y 轴使用 titleOffset，但相信可能有更好的方法来做到这一点。

谢谢！ ![轴标题](../Images/7849abb208a4ba09bddf9596f5c83900.png)

Core-Plot框架中bug修复后的图表：（请参考下面的答案1）

![在此处输入图像描述](../Images/9827718ff34f53c78a6f8cabaa82ec23.png)

# 编辑：这就是我设置图表的方式：

我添加了这个代码片段来展示我如何设置图表和两个散点图（股票价格和估值）：

```
graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
self.hostView.hostedGraph = graph;
[graph applyTheme:[CPTTheme themeNamed:kCPTPlainWhiteTheme]];    
graph.frame = self.view.bounds;
graph.plotAreaFrame.masksToBorder = NO;
graph.plotAreaFrame.cornerRadius  = 0.0f;

CPTScatterPlot *sharePricePlot = [[CPTScatterPlot alloc] initWithFrame:graph.bounds];
sharePricePlot.identifier = @"CloseSharePricePlot";
sharePricePlot.dataLineStyle = sharePricePlotLineStyle;
sharePricePlot.dataSource = self;

CPTScatterPlot *valuationPlot = [[CPTScatterPlot alloc]initWithFrame:graph.bounds];
valuationPlot.dataSource = self;

CPTXYPlotSpace *valuationPlotSpace = [[CPTXYPlotSpace alloc] init];
valuationPlotSpace.identifier = ValuationPlotSpaceIdentifier;
[graph addPlotSpace:valuationPlotSpace];

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

[plotSpace scaleToFitPlots:[NSArray arrayWithObject:sharePricePlot]];
[valuationPlotSpace scaleToFitPlots:[NSArray arrayWithObject:valuationPlot]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T14:09:54.583

那是一个核心情节错误，[在此处](http://code.google.com/p/core-plot/source/detail?r=dadcf0d88006e6313b0fd5456b6f34bad2e16324)修复。您现在可以在您的 Core Plot 副本中进行更改。每当发生这种情况时，它将成为下一个版本的一部分。我会这样写标题代码：

```
yAxis.titleLocation = plotSpace.yRange.maxLimit;
yAxis.title = self.issue.company.contrCurrency;
yAxis.titleRotation = 0.0;
yAxis.titleOffset = -15;

y2Axis.titleLocation = valuationPlotSpace.yRange.maxLimit;
y2Axis.title = self.valuation.id;
y2Axis.titleRotation = 0.0;
y2Axis.titleOffset = -15; 
```

您可以使用绘图空间计算确切的标题位置。例如，要将标题放置在绘图区域上方 15 像素处，请尝试以下操作：

```
CGRect plotAreaBounds = graph.plotAreaFrame.plotArea.bounds;
CGPoint viewPoint = CGPointMake(CGRectMinX(plotAreaBounds), 
                                CGRectMaxY(plotAreaBounds) + 15.0);

NSDecimal plotPoint[2];
[plotSpace plotPoint:plotPoint forPlotAreaViewPoint:viewPoint];

yAxis.titleLocation = plotPoint[CPTCoordinateY]; 
```

# java - 如何编写带有其他语言绑定的 Qt 插件系统？

> ID：11914614
> 
> 赞同：3
> 
> 时间：2012-08-11T12:15:33.790
> 
> 标签：java, c++, python, qt, plugins

我正在用 Qt 编写一个我想用插件扩展的应用程序。我的应用程序还有一个插件将使用的库。所以，我需要一种双向沟通。基本上，插件可以调用库，加载插件的应用程序将调用它们。

现在，我的库是用 C++ 编写的，所以它有一些类。插件可以包含头文件，链接到它并使用它。我的接口也有一个头文件，它是插件必须实现的抽象基类。他们还应该导出一个函数，该函数将返回指向该类的指针，并使用 C 链接。

至此我相信一切都清楚了，一个标准的插件界面。但是，有 3 个主要问题或子任务：

1.  如何使用其他语言的库？我只用 Python 试过这个。我使用 SIP 生成了一个 Python 组件，该组件已成功导入到 test.py 文件中，并从库中的一个类中调用了函数。我没有尝试过任何其他语言。

2.  如何为其他语言的抽象类生成适当的声明或存根？由于插件必须实现这个类，我应该能够以某种方式生成与其他语言中的标头等效的内容，例如 Python 的 .py 文件、Java 的 .class 文件等。我还没有尝试过，但我假设有其他语言的生成器。

3.  我将如何在插件中创建对象的实例？如果我到了这一点，该类将在插件中实现。现在我需要调用返回已实现抽象类实例的函数，并获取指向它的指针。根据我的研究，为了完成这项工作，我必须获得 Python 解释器、JVM 等的句柄，然后从那里与插件进行通信。

它看起来并不太复杂，但是当我开始研究时，即使是最简单的案例也需要大量的工作。我成功地只达到了第一点，而且只在 Python 中。这让我想知道我是否采取了正确的方法？你对此有什么想法..也许我不应该在我的库和抽象基类中使用 Qt，而只使用纯 C++。它可能会使事情变得更容易一些。或者也许我应该在我的库中只使用 C，并让插件返回一个 C 结构而不是一个类。我相信这会使事情变得更容易，因为调用图书馆将是一件微不足道的事情。而且我相信 C 结构的实现会比实现 C++ 类容易得多，甚至比实现使用 Qt 对象的 C++ 类更容易。

请指出我正确的方向，并分享您在这方面的专业知识。另外，如果您知道任何有关该主题的书籍，我将非常乐意购买。或者一些处理这个的链接会做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:45:45.540

C++ 破坏了它的符号，并且具有定义类的特殊魔力，这有点像在标准 (C) 目标文件之上被破解。您不希望其他语言的文件能够理解这种魔力。所以我当然会遵循你自己的建议，用纯 C 做所有事情。

但是，这并不意味着您不能使用 C++。只有*接口*必须是 C，而不是实现。或者更严格地说，生成的目标文件不能使用其他语言不使用的特殊功能。

虽然插件可以链接到您的程序并因此使用其中的函数，但我个人认为在加载插件函数后调用插件函数，传递一个函数指针数组，它更易读（因此可维护）插件。

1.  每种语言都支持打开共享对象（SO 或 DLL）文件。用那个。

2.  您的接口将由具有多个参数和返回类型的函数组成，这些函数可能对如何传递或检索它们有特殊需求。这可能有自动化系统，但我个人只会手动编写接口文件。最重要的是您正确记录界面，因此人们可以使用他们想要的任何语言，只要他们知道如何从他们的语言加载目标文件。

3.  不同的语言有非常不同的存储对象的方式。我建议让数据的创建者同时也是内存的所有者。因此，如果您的程序有一个带有构造函数的类（它包含在插件接口的 C 函数中），则该类是创建数据的类，并且您的程序而不是插件应该拥有它。这意味着插件需要在完成后通知您的程序，此时您的程序可以销毁它（当然，除非仍然需要它）。在支持它的语言中，例如 Python 和 C++，这可以在它们的接口对象被销毁时自动完成。（我在这里假设插件将创建一个对象以与实际对象进行通信；该对象的行为类似于真实对象，但使用目标语言而不是 C。）

将任何库（例如 Qt）保留在界面之外。您可以允许“将资源#x 放在屏幕上的这个位置”之类的功能，但不能允许“把这个 Qt 对象放在屏幕上的这个位置”之类的功能。原因是当您需要插件传递 Qt 对象时，他们需要了解 Qt，这使得编写插件变得更加困难。

如果插件完全受信任，您可以允许它们将（不透明）指针传递给这些对象，但对于与使用其他数字类型没有任何不同的接口。只是不要求他们对对象做任何事情，除了在你的程序中调用函数。

# c# - C# - 重载性能增强查询

> ID：11914615
> 
> 赞同：1
> 
> 时间：2012-08-11T12:15:52.073
> 
> 标签：c#, performance, overloading

所以我读过这篇文章[C# Overloads](http://www.dotnetperls.com/overload)说你可以使用重载方法来消除复杂性并提高性能，它们提供了以下示例：

使用系统；

```
class Program
{
    public static void Main()
    {
    ShowString(string.Empty);
    ShowString("Category");
    }

    static void ShowString(string value)
    {
    if (value == string.Empty)
    {
        Console.WriteLine("Popular");
    }
    else
    {
        Console.WriteLine(value);
    }
    }
} 
```

然后他们使用重载重写：

```
using System;

class Program
{
    public static void Main()
    {
    ShowString();
    ShowString("Category");
    }

    static void ShowString()
    {
    // Send default argument to overload.
    ShowString("Popular");
    }

    static void ShowString(string value)
    {
    // We don't need an if check here, which makes
    // ... calling this method directly faster.
    Console.WriteLine(value);
    }
} 
```

**使用重载变体会比使用具有默认参数值的方法提供更好的性能结果吗？**

像：

```
using System;

class Program
{
    public static void Main()
    {
    ShowString();
    ShowString("Category");
    }

    static void ShowString(string value = "Popular")
    {
    // We don't need an if check here, which makes
    // ... calling this method directly faster.
    Console.WriteLine(value);
    }
} 
```

*还是最后一段代码等同于第一段代码？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:24:18.963

重载不一定与性能有关。在这种情况下，差异很小；无参数版本是：

```
call, ldstr, call 
```

带参数的版本是（包括默认参数版本，不管是否指定值）：

```
ldstr, call, ldarg_0, call 
```

但是，这不会影响性能；这里唯一与性能相关的是调用控制台，这比其他任何事情都要慢得多**。**

Aka：除非您认为存在实际问题，否则请不要担心。

当特定方法允许优化版本时，重载更有用，例如删除装箱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T12:24:26.977

不，默认参数至少与重载一样快，因为您的最后一个示例编译为：

```
....
ShowString("Popular");
ShowString("Category");
.... 
```

您的第二个示例（使用重载）（如果为 Release 而不是 Debug 构建）可能会在运行时内联，以便性能与上一个示例（默认参数）相同。

这个例子有点傻，因为成本`value == string.Empty`几乎没有，但我想它可以说明这一点。但是，这可能是您应该从这个答案中得到的最重要的一点：**在过早优化之前，您应该始终使用更清晰/更可维护的代码**，因此可用性应该是确定在给定情况下应该使用什么的最重要因素。

# mysql - 如何设计数据库以将属性的属性存储到数据库中

> ID：11914617
> 
> 赞同：1
> 
> 时间：2012-08-11T12:16:03.840
> 
> 标签：mysql, database-design

我正在为珠宝网站设计数据库，其中将存储很多产品。在为产品属性设计表格时，我卡住了。我的问题是如何在数据库中存储产品属性和子属性等。

到目前为止，我已经为产品和属性创建了 3 个表 -

1.  tbl_attribute

    ```
    Structure: attribute_id*, attribute_name 
    ```

2.  tbl_products

    ```
    Structure: product_id*, category_id(FK), product_name, seo, description, metatags, length, width, height, weight, image, status 
    ```

3.  tbl_products_attribute

    ```
    Structure: product_id(fk), attribute_id(fk), value 
    ```

* * *

我有一个情况假设项链有5个石头（石头是属性），每个石头都有以下子属性1.石头名称2.石头颜色3.石头处理方法4.石头净度5.石头形状6.石头价格

等等等等……我有**很多属性，比如石头**，所以你能帮我设计一下这些属性的桌子吗？

取决于我必须在前端搜索（过滤器 || 分面搜索）产品的属性。

喜欢：[www.firemountaingems.com](http://www.firemountaingems.com/Shop/Pendants?T=T1B)

* * *

详细属性和子属性列表：

```
Alphabatical
Availability (Sold Individualy, Sold in Bulk)
Birth Stone
Brands
Color (red, green, blue)
Design Type
Gender (Male, Female)
Images 
Karat (18k, 22k, 24k)
Link
Make (Hand, Machine, Oxidised)
Making Percent
Material Type (Leather, Gemstone, etc)
Metal Art
Metal Stamp
Metal Type (Gold, Silver, PLatinum etc)
Model
Name
Price
Purity
Shapes (round, oval, emerald, diamond etc)
Short Description
Sides (single, both,)
Size (small, big etc)
Special Price
Status
Stone (Name, Color, Treated Method, Clearity, Shape, Price, Main Stone Color (Red, Pink, Green))
Stringing Material
Warranty
Wastage Percent
Weight
Wire - Wrapping Wire 
```

到目前为止，我已经在网上搜索了很多教程和文章以及堆栈溢出。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:42:35.437

在这种情况下，您无法负担创建这样的表，最好的方法是只有 1 个产品表和 1 个属性表，它们将具有产品的所有属性，但具有列 attribute_level 和 parent_id，其中 parent_id 指的是同一张表的 id。

示例：产品表：

```
ID | Name
----------
1  | Necklace

ID | ParentID | AttributeName | ProductID | AttributeLevel | AttributeDescription
----------------------------------------------------------------------------------
1  |          | Stone         | 1         | 1              | stone description in general
2  | 1        | StoneName     | 1         | 2              | Ruby 
```

通过这种方式，您可以在一个表中对属性级别进行分级。

# c - 包括解析器正则表达式

> ID：11914618
> 
> 赞同：2
> 
> 时间：2012-08-11T12:16:10.753
> 
> 标签：c, regex, string, text, include

我正在尝试制作一个小程序，它会告诉 mi 哪些文件是，哪些文件不包含在我的应用程序中。我尝试使用这个正则表达式：

```
#include (<|")([^\r\n;#">]*)(>|") 
```

它工作得很好，但它也会得到错误的输出：

```
#include <stdio.h" 
```

这在 C 编译器中是不可能的。所以问题是：有人知道如何正确编辑我的正则表达式吗？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:28:59.290

```
#include (?:<([^\r\n;#">]*)>|"([^\r\n;#">]*)") 
```

所以不是接受`[<"]x[>"]`你接受`<x>`或`"x"`。[例子](http://regexr.com?31q9n)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:41:04.150

我尝试了不同的方式，但似乎没有简单的方法，至少我没有看到。

1.  `#include (<|")([^\r\n;#">]*)(\1)`
    是的，这真的很好`"cstdio"`，也不是`<cstdio>`。失败。
2.  `#include (<(?=[^\r\n;#">]*>)|"(?=[^\r\n;#">]*"))([^\r\n;#">]*)(>|")`
    这里我们检查是否`<`通过`"`匹配符号转发。重的。
3.  `#include (<[^\r\n;#">]*>|"[^\r\n;#">]*")`
    只需检查这两种情况，如果我们有`<...>`or `"..."`。

等待更好的答案，我也很感兴趣。有点我在想，这已经很好了。

PS：在情况 2 和 3 中，我们最好保存`[^\r\n;#">]*`在单独的字符串中并连接到正则表达式的其他部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:55:15.970

```
#include\s{1,}(<|\")[^(>&\")]*(>|\") 
```

# java - 如何将字符串转换为正确的枚举常量（多个枚举实现一个通用接口）？

> ID：11914621
> 
> 赞同：1
> 
> 时间：2012-08-11T12:16:40.887
> 
> 标签：java, interface, enums, type-conversion

假设我有一个界面......

```
public interface Feature
{
    public abstract void doSmth();
} 
```

...以及实现该接口的多个枚举：

// 第一个枚举

```
public enum FeatureA implements Feature
{
    A1
    {
        @Override public void doSmth() { System.out.println("A ==== A1"); }
    },

    A2
    {
        @Override public void doSmth() { System.out.println("A ==== A2"); }
    };

    @Override public abstract void doSmth();
} 
```

//第二个枚举

```
public enum FeatureB implements Feature
{
    B1 
    {
        @Override public void doSmth() { System.out.println("B ==== B1"); }
    },

    B2
    {
        @Override public void doSmth() { System.out.println("B ==== B2"); }
    },

    B3
    {
        @Override public void doSmth() { System.out.println("B ==== B3"); }
    };

    @Override public abstract void doSmth();
} 
```

// 和许多其他实现 Feature 的枚举

现在假设我像这样组装一组对应于枚举常量名称的字符串（这对于第三方代码是必需的）......

```
Set<String> singleEnum = new LinkedHashSet<String>();
singleEnum.add("A2");
singleEnum.add("A1"); 
```

...稍后我需要将此类集合中的每个 String 转换为枚举常量，然后应用 doSmth() 方法。singleEnum 仅包含 FeatureA 常量的名称，因此在这种情况下我可以应用 valueOf(String) 方法：

```
for (String s : singleEnum)
{
    FeatureA.valueOf(s).doSmth();
} 
```

但是如果集合中的字符串对应于不同的枚举常量呢？例如：

```
Set<String> multipleEnums = new LinkedHashSet<String>();
multipleEnums.add("A1");
multipleEnums.add("B2");
multipleEnums.add("A2"); 
```

我想做这样的事情：

```
for (String s : multipleEnums)
{
    Feature./* convert s to the correct enum */.doSmth();
} 
```

有没有简单的方法可以做到这一点？Eclipse 允许应用于 Feature 的唯一方法是 Feature.class，我真的不知道如何从那里着手。我正在处理庞大的数据集，因此性能很重要。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:30:54.510

您可以使用每个枚举的名称创建一个 Map

```
static final Map<String, Feature> map = ...
static <F extends Enum & Feature> void addEnums(F... features) {
    for(F f: features)
       map.put(f.name(), f);
}

addEnums(FeatureA.values());
addEnums(FeatureB.values()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:31:40.580

> 有没有简单的方法可以做到这一点？

我不这么认为。如果它只是一个枚举，您可以使用枚举的静态`valueOf`方法进行转换。但是对于多个枚举，您需要调用它们中的每一个......并处理 IllegalArgumentExceptions。

我认为您将不得不`Map<String, Feature>`为所有枚举值创建和填充 a 。

# javascript - 分配后，您可以更改 Facebook 应用程序 ID 吗？

> ID：11914623
> 
> 赞同：0
> 
> 时间：2012-08-11T12:17:10.013
> 
> 标签：javascript, facebook

由于服务器更改导致我的应用程序出现一些问题，这意味着 IP 地址已更改，似乎拥有新的 IP 地址会导致应用程序 ID 出现问题。是否可以在无需创建新应用的情况下为我的应用获取新的应用 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T15:11:01.423

不，这是不可能的。没有机会。

# jvm - 命令行中用于编译和运行 .java 文件的目录

> ID：11914624
> 
> 赞同：0
> 
> 时间：2012-08-11T12:17:18.550
> 
> 标签：jvm, java

我在运行 windows XP 的 PC 上安装了 JDK，JDK 的默认目录是：

> C:\Program Files\Java\jdk1.7.0_05\bin

我正在按照[教程](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html#win32-2b "Oracle 的 Hello World 程序") 做一个示例
我的名为**HelloWorld的****源文件**位于另一个目录中：**`E:\NotePad\Code`**

 **正如教程所说：“要编译源文件，请将当前目录更改为文件所在的目录”，因此我将命令的当前目录更改为`E:\NotePad\Code`，但问题是**“javac”未被识别为内部或外部命令**

好吧，本教程有一个[解决](http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html) 这个问题的方法，看来我应该将命令行的**当前目录**更改为安装 JDK 的位置：`C:\Program Files\Java\jdk1.7.0_05\bin`

完成后，我尝试使用以下命令：`javac HelloWorld.java`编译文件，但它说

> javac：找不到文件：HelloWorld.java

这意味着安装的JDK无法编译**HelloWorld.java**文件 我尝试将**HelloWorld.java**文件放入，它工作正常 `E:\NotePad\Code``C:\Program Files\Java\jdk1.7.0_05\bin`
**`C:\Program Files\Java\jdk1.7.0_05\bin`**

 **所以问题是：**如何编译和运行安装在不同目录中的 JDK 文件**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:22:39.380

您将需要`C:\Program Files\Java\jdk1.7.0_05\bin`在您的`PATH`, 或直接使用引用编译器

```
C:\Program Files\Java\jdk1.7.0_05\bin\javac 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:22:43.177

听起来您需要更新 PATH 变量，请参见此处：[http ://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html#path](http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html#path)****

# php - 可以从 php 中的 $_GET 获取密钥吗？

> ID：11914625
> 
> 赞同：0
> 
> 时间：2012-08-11T12:17:25.233
> 
> 标签：php

我只是问是否可以从 $_GET 获取密钥...

我想做一个 switch 语句，比如

```
switch($_GET key)  //here I don't know
{
   case "login": .... break;   //if "login" key exists in $_GET then show page.
   ....
} 
```

对不起白痴问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T12:18:41.837

`array_keys();`将从传递的参数返回一个 assoc 键数组。

```
$arrKeys = array_keys($_GET);//$arrKeys will now contain all keys of $_GET (as an array) 
```

看看：[array_keys()](http://php.net/manual/en/function.array-keys.php)

如果您已经知道键，并且想要从键中获取特定元素的值，请执行以下操作：

```
echo $_GET['myKey'];//which will print the value of the 'myKey' element 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T12:24:27.230

您可以使用简单的 for 循环来迭代数组和键。 `$_GET`只不过是一个关联数组（它使用字符串作为数组索引）。

使用`foreach($_GET as $key => $value)`php 将在对应的数组 key in`$key`和数组 value in 中拆分出数组中的每个条目`$value`。

```
foreach($_GET as $key => $value)
     {
     if($key === 'mykey')
         {
         // Do things with this key
         }
     if($key === 'login')
         {
         // Do login stuff etc...
         if($value === 'adminarea')
              {
              // login to adminarea
              }
         if($value === 'forum')
              {
              // Login to forum
              }
         }
     } 
```

您也可以使用`array_key_exists`. 这将检查某个是否存在，如果存在，您可以对其进行处理。

```
if(array_key_exists('myKey', $_GET) && $value = $_GET['myKey']) {
    // do stuff with $value
} 
```

但这有点麻烦。我个人更喜欢将此函数用于简单的数组。

```
function array_get($array, $key, $default = null) 
{
    return (is_array($array) && array_key_exists($key, $array) ? $array[$key] : $default);
} 
```

然后你可以做

```
if($value = array_get($_GET, 'myKey')) {
    // do stuff with mykey
} 
```

这更清洁并且具有描述性。它总是返回 null 作为默认值，或者您可以设置自己的默认值。

```
 $music_intensity = array_get($_GET, 'intensity', 11); 
```

如果没有定义值，那么它将`11`作为值返回。`$music_intensity``$_GET`

# jquery - 使用“按钮”类型而不是表单的“提交”类型进行 JQuery 验证

> ID：11914626
> 
> 赞同：6
> 
> 时间：2012-08-11T12:17:29.020
> 
> 标签：jquery, html, asp.net-mvc-3, validation, button

$('selector').validation() 似乎是为“输入”类型按钮而不是“按钮”类型构建的。我如何让它与表单中的按钮类型一起使用？

```
@using(Html.BeginForm(new {id="TheForm"}))
{
     // code here
     <input id="TheButton" type="button">
} 
```

查询：

```
$(document).ready(function() {
      $("#TheForm").validate({
            rules: {
                 "AuditDoc.Title": {
                       required: true
                  }
            }
      });
      $("#TheButton").click(function() {

      });
}); 
```

使用这个基本思想，我将如何让 jquery validate 使用按钮而不是提交类型按钮？我见过一些例子，当使用提交类型不满足规则时，JQuery 会自动显示错误消息，但它似乎不适用于按钮类型。我会很感激任何建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T13:04:11.017

```
$(document).ready(function () {
        $("#TheForm").validate({
            rules: {
                "AuditDoc.Title": {
                    required: true
                }
            }
        });

        $("#TheButton").click(function () {
            if (!$("#TheForm").validate()) { // Not Valid
                return false;
            } else {
                $("#TheForm").submit()
            }
        });

        $('#btnReset').live('click', function (e) {
            //var $validateObj = $('#formId');
            //Or
            var $validateObj = $(this).parents('form');

            $validateObj.find("[data-valmsg-summary=true]").removeClass("validation-summary-errors").addClass("validation-summary-valid").find("ul").empty();
            $validateObj.find("[data-valmsg-replace]").removeClass("field-validation-error").addClass("field-validation-valid").empty();
        });
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T13:09:18.837

```
$(document).ready(function(){

     $("#myform").validate();
     $("#byuttion").click(function() {

       if($("#myform").valid())
       {
          $("#myform").submit();
       }
       else 
      {
          return false;
      }

      });

}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-11T12:25:22.780

一种骇人听闻的方式可能是：

```
$("#TheButton").click(function() {
     $("#TheForm").submit()
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-11T12:30:46.087

它的工作原理与普通输入几乎相同，只是它不支持提交方法。preventDefault 只是阻止页面执行默认请求。

```
$("#TheButton").click(function(event) {
    event.preventDefault(); //or return false
    getData();
}); 
```

# c++ - glibc 检测到双重释放或损坏

> ID：11914630
> 
> 赞同：1
> 
> 时间：2012-08-11T12:18:18.787
> 
> 标签：c++, crash, glibc

下面的代码有什么问题。对于某些输入，它运行得非常好，而对于某些特殊输入，它会崩溃？

```
#include<iostream>
#include<string>
#include<fstream>

using namespace std;

struct event { 

string date,time,content;
bool is_high_priority;

};

int main() {

event one,two;
one.is_high_priority=false;
char tmp;

ofstream out_file("events" , ios::binary );

    cout<<"\nEnter Date(dd.mm) ";
    cin>>one.date;
    cout<<"\nEnter Time(hh:mm:ss) ";
    cin>>one.time;
    cout<<"\nenter content";
    cin>>one.content;

    if(tmp == 't') 
        one.is_high_priority = true;
    else
        one.is_high_priority = false;

    out_file.write((char*) &one, sizeof(one) );

    out_file.close();

    ifstream in_file("events" , ios::binary );
    in_file.read((char*)&two,sizeof(two));

    cout<<two.date<<" "<<two.time<<" "<<two.content<<" "<<two.is_high_priority;

    in_file.close();

} 
```

它因这些输入而崩溃： Enter Date(dd.mm) ankmjjdn md

输入时间(hh:mm:ss) 输入内容njs sjnsn

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T12:24:19.533

您不能只将`std::string`对象的字节保存到文件中，然后再次加载它们。包含指向动态分配内存的`std::string`指针，您的保存/加载只会复制指针本身，而不是指向数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:23:11.740

```
if(tmp == 't') 
```

`tmp`是一个本地*未初始化*的变量，您正在使用它，如上所示。

因此，您的代码会调用未定义的行为。没有什么可以说的了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T16:04:00.150

正如@sth 所指出的，将指针复制到文件并重新解释它们，最终会出现无重复的情况。

但是，我认为还有一些更微妙的东西，如果我错了，请纠正我。该程序并不总是在所有输入上崩溃。它甚至不依赖于字符串的长度。我尝试用一​​些测试用例运行程序。

请注意，字符“空格”被视为分隔符。即使您提供输入，空格后面的字符也会被下一个字符串占用。

因此，第三个字符串占用该值直到 'space' 剩余的输入（直到回车）仍在输入缓冲区中。

我怀疑当从 ​​istream 构造第二个对象时，“空格”之后的字符串会覆盖指针，这会导致损坏检测。

# java - 可以使用 dls 或 sf2 文件的 java 合成器

> ID：11914636
> 
> 赞同：1
> 
> 时间：2012-08-11T12:19:14.583
> 
> 标签：java, audio, midi, javasound, synthesizer

我正在寻找一种可以与 javax.sound.midi 类一起使用的合成器，它允许我使用 Beatnik 以外的音库格式。我找不到一个，一个[6 岁的信息](http://jsresources.org/faq_midi.html#soundfont)告诉我没有可用的。但是我想知道从那以后是否有新项目出现。

我问了一个[相关的问题](https://superuser.com/questions/459594/midi-software-synthesizer-that-plays-wave-files)，用不同的方法根据 java 中的音序器生成的 midi 序列播放我自己的样本，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:58:03.957

在 Java 7 中，sf2-soundbanks 可以通过运行良好的类 SF2Soundbank 加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:44:01.283

试试[Java Sound API 提供的高品质产品：Soundbanks](http://java.sun.com/products/java-media/sound/soundbanks.html)。

# android - Android 高 CPU 使用率

> ID：11914643
> 
> 赞同：0
> 
> 时间：2012-08-11T12:20:22.477
> 
> 标签：android, cpu-usage, postdelayed

所以，我有一个问题，我无法解决。我的应用程序使用了超过 45% 的 CPU 三星 SII。我认为主要原因是postDelayed。这是我的代码的一部分：

```
 Handler a=new Handler(); 
           a.post(new Runnable(){

        @Override
        public void run() {    
        Calendar cal = Calendar.getInstance(Locale.US); 
        cal.setTime(curr); 
        Format formatter = new SimpleDateFormat("\r EE \n d");
        int currentDOW = cal.get(Calendar.DAY_OF_WEEK);
        cal.add(Calendar.DAY_OF_YEAR,(currentDOW*-1)+i+2);
        den.setText(formatter.format(cal.getTime()));  
        }
            a.postDelayed(this,400); 
        }); 
```

所以，这是我代码的一部分，它可以工作，但我认为，这是 CPU 使用率高的主要原因。请帮我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:49:43.607

我有这个问题。在我将以下代码添加到`run()`工作线程中的方法之前，我的应用程序使用了大约 60% 的 CPU 时间：

```
@Override
public void run()
{
    while( _running )
    {
        // do usual stuff
        // ...

        // ** add the following to the end of your loop **

        try
        {
            Thread.sleep( 5 );
        }
        catch( InterruptedException e )
        {
            _running = false;
            /* at least we tried */
        }
    }
} 
```

它现在使用约 8% 的 CPU，没有明显差异。

尝试使用值“5”。我添加了一个应用程序设置，以允许用户平衡更好的图形（即低于 5 的数字）和更好的电池使用（高于 5 的数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:07:34.943

您可以稍微优化一下代码，但我怀疑您根本不需要在不需要时停止更新，因此正在积累越来越多的更新。

例如，如果您更改方向，它将添加更多先前活动（已被破坏）的事件，并且您最终会获得双倍的更新率。

# php - MediaWiki 自定义身份验证要求

> ID：11914651
> 
> 赞同：1
> 
> 时间：2012-08-11T12:21:29.953
> 
> 标签：php, authentication, mediawiki

我正在尝试创建一个 wiki，其查看和编辑 wiki 必须仅限于两个小组用户。

由于它是一个大学社团，我们已经有一个由大学运行的外部认证系统，我已经实现了`$_SERVER['REMOTE_USER']`用于认证的系统。但是，这允许访问大学中的任何人。我想创建两个能够查看和编辑 wiki 的用户“exec”和“steering_committee”的小子集。

我一直在使用我一直在使用的身份验证插件，但是当我尝试返回时`false`，`authenticate($user, $pwd)`我没有看到任何访问禁止警告。

所以我的问题是，创建这种身份验证的最佳方法是什么？我希望能够添加有关用户（执行职位、前执行职位）的数据，这些数据包含在两个表中`wiki_exec`，`wiki_user_former_positions`以便 wiki 可以使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:26:08.370

最好的方法是使用 MultiAuth 插件，虽然它确实不是特别容易扩展（尽管可能需要更熟悉 MedaiWiki）。

[http://www.mediawiki.org/wiki/Extension:MultiAuthPlugin](http://www.mediawiki.org/wiki/Extension:MultiAuthPlugin)

（感谢@Christian 为我指明了正确的方向）

# google-play - Google Play 的英语语言

> ID：11914653
> 
> 赞同：2
> 
> 时间：2012-08-11T12:21:41.133
> 
> 标签：google-play

对于我的硕士论文，我需要自动将来自 Google Play 的不同 android 应用程序的信息写入文本文件。所以我使用 perl 脚本语言来实现这种自动化。我的 perl 脚本可以在该文本文件中写入信息，该文件在 Google Play 网站上提供，但不是英文。由于我位于瑞典，我正在获取这些应用程序信息的瑞典语版本。我尝试了不同的方法（通过更改设置中的语言）将 Google 和 Google Chrome 的默认语言设为英语，但书面信息仍为瑞典语版本。但我的浏览器和一切都是英文的。有人可以在这个问题上帮助我吗？我无法使用瑞典语信息进行进一步分析。

提前谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T12:26:58.193

添加查询字符串参数`hl=en`怎么样？谷歌在它的一些网站上支持它，很可能谷歌播放网站也支持它。

如果我通过以下方式调用 Google Play 网站：

[https://play.google.com/store?hl=en](https://play.google.com/store?hl=en)

我有英语语言环境。如果我用

[https://play.google.com/store?hl=de](https://play.google.com/store?hl=de)

我有德语语言环境等。

# c++ - C++\Win32 以低优先级模式运行应用程序/线程？

> ID：11914659
> 
> 赞同：0
> 
> 时间：2012-08-11T12:23:01.970
> 
> 标签：c++, multithreading, winapi

我正在为我的线程使用 CreateThread。

一个线程占用了很多 cpu %，我需要减少它。

是的，我知道我可以只调用 Sleep()，但在这种情况下，实现起来很复杂。

如何将线程设置为以低优先级运行，或者如果不可能，那么如何以低优先级运行我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:33:05.467

使用SetThreadPriority函数，详情搜索msdn

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:44:28.817

SetThreadPriority 将设置各个线程的优先级。或者，如您所问，您可以使用 SetPriorityClass 更改进程的基本优先级。正是这个基本优先级与线程优先级相结合，从中派生出实际的线程优先级。

# sql - 根据列值优先级选择唯一记录

> ID：11914664
> 
> 赞同：0
> 
> 时间：2012-08-11T12:23:26.780
> 
> 标签：sql, sqlite, select

这是我之前的问题的[延续](https://stackoverflow.com/questions/11913588/select-records-based-on-column-priority)。

在以下示例中：

```
id       PRODUCT ID    COLOUR
1        1001          GREEN
2        1002          GREEN
3        1002          RED
4        1003          RED 
```

给定一个产品 ID，我只想检索一条记录 - 如果存在绿色，则为绿色，否则为红色。听起来我需要以某种方式使用 DISTINCT，但我不知道如何提供优先级规则。

我敢肯定，这很基础，但我的 SQL 技能不仅仅是生疏……

**编辑：**谢谢大家。请再问一个问题：如何使它适用于多条记录，即。如果 WHERE 子句返回不止一条记录？LIMIT 1 将限制整个集合，而我想要的是限制在每个产品中。

例如，如果我有类似 SELECT * FROM table WHERE productID LIKE "1%" ... 我如何检索每个唯一产品，但仍然尊重颜色优先级（绿色>红色）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:42:00.447

试试这个：

```
SELECT top 1 *
FROM <table>
WHERE ProductID = <id>
ORDER BY case when colour ='GREEN' then 1 
              when colour ='RED' then 2 end 
```

如果您想根据其他颜色订购，可以在案例声明中给出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:26:31.577

```
SELECT * 
FROM yourtable
WHERE ProductID = (your id)
ORDER BY colour 
LIMIT 1 
```

（绿色将出现在红色之前，你看。LIMIT 子句只返回一条记录）

对于您的后续编辑，您可以执行此操作

```
select yourtable.*
from
    yourtable
    inner join 
    (select productid, min(colour) mincolour 
    from yourtable
    where productid like '10%'
    group by productid) v
    on yourtable.productid=v.productid
    and yourtable.colour=v.mincolour 
```

# javascript - 为什么 Javascript sort() 函数没有给出预期的输出？

> ID：11914665
> 
> 赞同：7
> 
> 时间：2012-08-11T12:24:06.420
> 
> 标签：javascript, sorting, integer

> **可能重复：**
> [排序不适用于整数？](https://stackoverflow.com/questions/1063007/sort-not-working-with-integers)
> [如何在 javascript 排序方法中对数字进行排序](https://stackoverflow.com/questions/4576903/how-to-sort-number-in-javascript-sort-method)
> [Array.sort() 不能正确排序数字](https://stackoverflow.com/questions/7000851/array-sort-doesnt-sort-numbers-correctly)

代码：

```
var x = [40,100,1,5,25,10];
x.sort(); 
```

输出：

```
1,10,100,25,40,5 
```

我的预期输出：

```
1,5,10,25,40,100 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T12:26:06.217

默认情况下，JavaScript Array`.sort()`函数在进行比较之前将数组元素转换为字符串。

您可以覆盖它：

```
x.sort(function(e1, e2) { return e1 - e2; }); 
```

（根据第一个元素是小于、等于还是大于第二个元素，传递的函数应该返回一个负数、零或正数。）

我从未见过这种语言奇怪方面的理由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T12:30:43.343

根据[MDN Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

> 如果未提供 compareFunction，则通过将元素转换为字符串并按字典（“字典”或“电话簿”，而不是数字）顺序比较字符串来对元素进行排序。例如，“80”按字典顺序排在“9”之前，但在数字排序中，9 排在 80 之前。

所以你应该做类似的事情：

```
function compareNumbers(a, b)
{
  return a - b;
}
var x = [40,100,1,5,25,10];
x.sort(compareNumbers); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-11T12:26:35.317

```
var x = [40,100,1,5,25,10];
x.sort(function(a,b){return a-b}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T12:33:35.963

它默认按字母顺序升序排序（对 1 个字符进行排序.. 1,1_,1_ *,* 2,4_ ,5），并提供比较函数更改该行为

更多信息可以在这里找到： http: [//www.w3schools.com/jsref/jsref_sort.asp](http://www.w3schools.com/jsref/jsref_sort.asp)

# python - python使用sqlalchemy将列表存储到sql数据库中

> ID：11914666
> 
> 赞同：5
> 
> 时间：2012-08-11T12:24:10.297
> 
> 标签：python, sqlalchemy

简短的代码是这样的：

```
 class Word(Base):
        __tablename__ = 'word'
        eng                 = Column(String(32),primary_key=True)
        chinese             = Column(String(128))

word = Word(eng='art',chinese=[u'艺术',u'美术'])
session.add(word)
session.commit() 
```

我正在尝试将 word.chinese 存储为字符串。在python中它是一个列表......好吧，当我自己编写sql时，我可以 str(word.chinese) 然后插入数据库。当需要获取它时，我可以简单地 eval(result) 来获取原始的 python 对象。但由于我使用 sqlalchemy 来存储我的对象，我想知道在哪里改变以达到我的目标......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T14:30:48.010

要将列表存储在数据库中，您可以使用新表：

```
class Word(Base):
    __tablename__ = "words"

    id = Column(Integer, primary_key=True)
    eng = Column(String(32), unique=True)
    chinese = relationship("Chinese", backref="eng")

    def __init__(self, eng, chinese):
        self.eng = eng
        self.chinese = map(Chinese, chinese)

class Chinese(Base):
    __tablename__ = "chinese_words"

    word = Column(String(128), primary_key=True)
    eng_id = Column(Integer, ForeignKey('words.id'), primary_key=True)

    def __init__(self, word):
        self.word = word 
```

查看[完整示例](https://gist.github.com/ad49f71aa86e8cbd65ea#file_model.py)。

不要使用`str()`/`eval()`如果你想存储`chinese`为你可以使用的blob `json.dumps()`。`json.loads()`使用[@thebjorn](https://stackoverflow.com/a/11915214/4279) `TypeDecorator`建议的：

```
class Json(TypeDecorator):

    impl = String

    def process_bind_param(self, value, dialect):
        return json.dumps(value)

    def process_result_value(self, value, dialect):
        return json.loads(value)

class Word(Base):
    __tablename__ = "words"

    eng = Column(String(32), primary_key=True)
    chinese = Column(Json(128)) 
```

查看[完整示例](https://gist.github.com/ad49f71aa86e8cbd65ea#file_as_a_blob.py)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-11T13:44:07.067

`TypeDecorator`您将在（[http://docs.sqlalchemy.org/en/rel_0_7/core/types.html#sqlalchemy.types.TypeDecorator](http://docs.sqlalchemy.org/en/rel_0_7/core/types.html#sqlalchemy.types.TypeDecorator)中找到您要求的功能- 您必须创建例如列表让它工作）。

**但是，**您要做的是为英语艺术字存储两种不同的翻译（至少这是 google translate 告诉我的 :-)。将它们作为逗号分隔的列表存储在文本字段中不是第一个标准形式。您应该存储两条记录

```
('art', u'艺术')
('art', u'美术') 
```

并更改您的数据库结构以允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:01:53.923

我认为您可能希望进一步改进您的数据模式，而不是对模型属性之一中的字符串/列表执行难看的操作。

我假设每个人都`eng`可以有 1 个或多个“中文”，在这种情况下，您需要一个一对多的[关系](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#building-a-relationship)和两个表/映射对象。

你的代码会更干净。

`eval`'ing 字符串只是一个非常糟糕的主意。总是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:40:44.467

问题是字符串化列表没有像你预期的那样工作（我从你的帖子中得出的结论）。您可以将中文单词存储在数据库中，而不是作为字符串在数据库中生成和存储值`str(word.chinese)`。`u''.join(word.chinese)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-09T14:38:32.893

这是一个老问题，值得更新答案。

截至 2022 年，您可以使用 sqlalchemy 中的 MutableList，如以下答案所示：`https://stackoverflow.com/a/64356997/2719980`

# facebook - 在 facebook 上分享漂亮的 url - 在我的墙上使用复制和过去

> ID：11914667
> 
> 赞同：0
> 
> 时间：2012-08-11T12:24:13.237
> 
> 标签：facebook, unicode, copy-paste, arabic, sharing

我有一个不错的 URL，包括 Unicode 阿拉伯文本，如下所示：

[http://www.ivotenow.org/ar/polls/view/1003/%D8%A3%D9%83%D8%AB%D8%B1%20%D8%A3%D9%86%D8%AF%D9 %8A%D8%A9%20%D9%83%D8%B1%D8%A9%20%D8%A7%D9%84%D9%82%D8%AF%D9%85%20%D9%81%D9 %8A%20%D8%A7%D9%84%D8%B3%D8%B9%D9%88%D8%AF%D9%8A%D8%A9%20%D8%AC%D9%85%D8%A7 %D9%87%D9%8A%D8%B1%D9%8A%D8%A9%20%D9%87%D9%88%20%D8%9F](http://www.ivotenow.org/ar/polls/view/1003/%D8%A3%D9%83%D8%AB%D8%B1%20%D8%A3%D9%86%D8%AF%D9%8A%D8%A9%20%D9%83%D8%B1%D8%A9%20%D8%A7%D9%84%D9%82%D8%AF%D9%85%20%D9%81%D9%8A%20%D8%A7%D9%84%D8%B3%D8%B9%D9%88%D8%AF%D9%8A%D8%A9%20%D8%AC%D9%85%D8%A7%D9%87%D9%8A%D8%B1%D9%8A%D8%A9%20%D9%87%D9%88%20%D8%9F)

当我将它复制并粘贴到我的墙上时，我会得到如下预览：

[http://www.ivotenow.org/ar/polls/view/1003](http://www.ivotenow.org/ar/polls/view/1003) /أكثر%20أندية%20كرة%20القدم%20في%20السعودية%20جماهيرية%20هو%20؟

我使用了 Facebook 的调试工具，它显示了正确的预览：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

请注意，当我使用 shraethis.com 小部件时，它可以正常工作。

请有任何想法。

问候， 生态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:43:49.073

我只是在调试工具中测试了以下网址（[单击此处查看结果](https://developers.facebook.com/tools/debug/og/object?q=http://www.ivotenow.org/ar/polls/view/1022/%25D9%2587%25D9%2584%2520%25D8%25AF%25D8%25B1%25D8%25B3%25D8%25AA%2520%25D9%2581%25D9%258A%2520%25D8%25A7%25D9%2584%25D8%25AC%25D8%25A7%25D9%2585%25D8%25B9%25D8%25A9%2520%25D8%25B9%25D8%25A8%25D8%25B1%25D8%259F)）：

[http://www.ivotenow.org/ar/polls/view/1022/%D9%87%D9%84%20%D8%AF%D8%B1%D8%B3%D8%AA%20%D9%81 %D9%8A%20%D8%A7%D9%84%D8%AC%D8%A7%D9%85%D8%B9%D8%A9%20%D8%B9%D8%A8%D8%B1%D8 %9F](http://www.ivotenow.org/ar/polls/view/1022/%D9%87%D9%84%20%D8%AF%D8%B1%D8%B3%D8%AA%20%D9%81%D9%8A%20%D8%A7%D9%84%D8%AC%D8%A7%D9%85%D8%B9%D8%A9%20%D8%B9%D8%A8%D8%B1%D8%9F)

图像和标题都在那里，但仍然有一些警告你应该修复：

> *   应该显式提供“og:url”属性，即使可以从其他标签推断出一个值。
> *   og：类型丢失。og:type 元标记对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。
> *   缺少 fb:admins 和 fb:app_id 标签。这些标签对于 Facebook 呈现产生高点击率的新闻提要故事是必要的。

# gwt - GWT RootPanel 没有交互

> ID：11914670
> 
> 赞同：0
> 
> 时间：2012-08-11T12:24:24.360
> 
> 标签：gwt, cordova

我创建了登录类：

```
public class LoginPage extends VerticalPanel implements ClickHandler {

ApplicationMethods appMthd;
private RootPanel rootPanel;
TextBox txtUserEmail;
PasswordTextBox txtPassword;

Button btnLogin;

String strEmail, strPass;

public LoginPage(ApplicationMethods appMthd) {

    this.appMthd = appMthd;

    rootPanel = RootPanel.get();
    rootPanel.setSize("320", "480");

    btnLogin = new Button("Login");
    btnLogin.setText("Login");
    rootPanel.add(btnLogin, 224, 256);
    btnLogin.setSize("79px", "35px");
    btnLogin.addClickHandler(this);

    txtUserEmail = new TextBox();
    rootPanel.add(txtUserEmail, 36, 161);
    txtUserEmail.setSize("240px", "20px");

    txtPassword = new PasswordTextBox();
    rootPanel.add(txtPassword, 36, 207);
    txtPassword.setSize("240px", "20px");
    }

@Override
public void onClick(ClickEvent event) {
    // TODO Auto-generated method stub

    if(event.getSource() == btnLogin)
    {
        strEmail = txtUserEmail.getText().toString();
        strPass = txtPassword.getText().toString();

        appMthd.onLogin(strEmail, strPass);
    }
    else
    {
        Window.alert("Coming Soon..!!");
    }
} 
```

}

但我无法访问任何文本框或单击按钮。因为 Parent 类是 RootPanel。

如果我使用：

```
add(txtUserEmail);
    add(txtPassword);
    add(btnReg);
    add(btnLogin);
    btnLogin.addClickHandler(this); 
```

然后，它是可访问的。在此，父类是 VerticalPanel。

那么，如何为 RootPanel 解决这个问题。？

请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:01:29.830

当您使用 VerticalPanel 时，您不能指定 x,y 如果您想指定 x,y 当然可以扩展 AbsolutePanel，但是由于您正在为移动设备编程，这是一件好事。

如果你想用 phonegap 和 gwt 创建移动应用程序

你应该检查[mgwt](http://www.m-gwt.com/)和[hello world mgwt](http://code.google.com/p/mgwt/wiki/HelloWorldExample)

```
public LoginPage() {

    rootPanel = RootPanel.get();
    rootPanel.setSize("320", "480");
    rootPanel.add(this);

    btnLogin = new Button("Login");
    btnLogin.setText("Login");
    add(btnLogin);
    btnLogin.setSize("79px", "35px");
    btnLogin.addClickHandler(this);

    txtUserEmail = new TextBox();
    add(txtUserEmail);
    txtUserEmail.setSize("240px", "20px");

    txtPassword = new PasswordTextBox();
    add(txtPassword);
    txtPassword.setSize("240px", "20px");
} 
```

# php - 无法在 PHP 中重定向页面

> ID：11914675
> 
> 赞同：2
> 
> 时间：2012-08-11T12:24:51.210
> 
> 标签：php, session

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

```
<?php 
include_once 'session.php';
$uid='0';
error_reporting(E_ALL); ini_set('display_errors', 'On'); 
if($uid=='0' or empty($uid) or $uid=='')
{
header("Location:index.php");
exit;
}
include_once 'top.php';
?> 
```

我的 session.php 如下。它甚至不输出一个字。

```
 <?php error_reporting(0);// Turn off all error reporting
if (!isset($_SESSION)) {
session_start();
}
if(isset($_SESSION['uid']))
{
    $uid=$_SESSION['uid'];
    $sid='0';
}
else
{
    $uid='0';
    $sid='0';
}
?> 
```

在上面的代码中，我得到如下错误

```
Warning: Cannot modify header information - headers already sent by 
(output started at /home/content/41/9717441/html/session.php:1) 
in /home/content/41/9717441/html/ask.php on line 7 
```

我在代码中做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:30:31.660

也许你在像这样的 php 打开标签之前在 session.php 中有一个空格输出

```
 [space]<?php
 .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:26:20.643

`session.php`输出一些东西。在发送标题之前，您不能输出文档的正文。

# android - 两个 MapView 之间的意外连接

> ID：11914678
> 
> 赞同：0
> 
> 时间：2012-08-11T12:25:15.607
> 
> 标签：android, android-mapview

我有两个活动，每个活动都有一个 Mapview。问题是，当 Mapview 改变其中心或缩放时，另一个也会改变。我已经意识到每个 Mapview 都有不同的 id（在 xml 中）和不同的 name 变量。但问题依然存在。

每个活动的代码太长，这里就不贴了，因为它实现了很多功能。但我发布了最重要的部分：

活动 A)

```
 mapview_publish = (MapView) findViewById(R.id.mapview_publish);
    mapview_publish.setBuiltInZoomControls(true);
    mapController = mapview_publish.getController();
    mapController.setZoom(16); / 
```

XML A)

```
 <com.google.android.maps.MapView
            android:id="@+id/mapview_publish"
            android:layout_width="fill_parent"
            android:layout_height="87dp"
            android:layout_marginLeft="7dp"
            android:layout_marginRight="7dp"
            android:layout_marginTop="12dp"
            android:apiKey="myapikey"
            android:clickable="false" /> 
```

活动 B)

```
 mapView = (MapView) findViewById(R.id.mapview);
    mapview.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(20); 
```

XML B)

```
 <com.google.android.maps.MapView
        android:id="@+id/mapview"
        style="@style/mapView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:apiKey="myapikey"
        android:background="@color/black"
        android:clickable="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:43:34.703

如果您在每个进程中使用多个 MapView，则可能会发生冲突。

[https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapActivity](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapActivity)

> 每个进程只支持一个 MapActivity。同时运行的多个 MapActivity 可能会以意想不到的方式干扰。

And also see my reply on [How to use multiple MapActivities/MapViews per Android application/process](https://stackoverflow.com/questions/3379575/how-to-use-multiple-mapactivities-mapviews-per-android-application-process)

But as SpK commented, please provide the code of your activities.

# c++ - 复制省略：在返回语句中使用三元表达式时未调用移动构造函数？

> ID：11914691
> 
> 赞同：12
> 
> 时间：2012-08-11T12:26:32.440
> 
> 标签：c++, c++11

考虑以下示例：

```
#include <cstdio>

class object
{
public:
    object()
    {
        printf("constructor\n");
    }

    object(const object &)
    {
        printf("copy constructor\n");
    }

    object(object &&)
    {
        printf("move constructor\n");
    }
};

static object create_object()
{
    object a;
    object b;

    volatile int i = 1;

// With #if 0, object's copy constructor is called; otherwise, its move constructor.
#if 0
    if (i)
        return b; // moves because of the copy elision rules
    else
        return a; // moves because of the copy elision rules
#else
    // Seems equivalent to the above, but behaves differently.
    return i ? b : a; // copies (with g++ 4.7)
#endif
}

int main()
{
    auto data(create_object());

    return 0;
} 
```

并考虑 C++11 工作草案中的这一点，n3337.pdf，12.8 [class.copy]，第 32 点：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，**并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的**. 如果重载决议失败，或者如果所选构造函数的第一个参数的类型不是对对象类型的右值引用（可能是 cv 限定的），则再次执行重载决议，将对象视为左值。[注意：无论是否会发生复制省略，都必须执行此两阶段重载解决方案。它确定如果不执行省略则要调用的构造函数，并且即使调用被省略，所选构造函数也必须是可访问的。——尾注]

因此，如果我们`#if 1`在示例中使用，则在返回对象时首先尝试移动构造函数，然后再尝试复制构造函数。由于我们有一个移动构造函数，它被用来代替复制构造函数。

然而，在最后一条`return`语句中`create_object()`，我们观察到没有使用移动构造函数。这是否违反了语言规则？该语言是否要求在最后一条`return`语句中使用移动构造函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T15:27:35.687

条件运算符的规范非常复杂，令人恐惧。但我相信你的编译器的行为是正确的。见 5.16 [expr.cond]/p4：

> 如果第二个和第三个操作数是相同值类别的glvalues并且具有相同的类型，则结果是该类型和值类别...

另见 12.8 [class.copy], p31, b1 描述了何时允许复制省略：

> 在`return`具有类返回类型的函数的语句中，当表达式是具有与函数返回类型相同的 cv-非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，复制/移动操作可以省略...

该表达式不是自动对象的名称，而是一个条件表达式（并且该条件表达式是一个左值）。所以这里不允许复制省略，并且没有其他说明左值表达式可以假装为重载决议的右值。

# objective-c - segmentedControl 和 TextView 刷新/重新加载 - xcode

> ID：11914694
> 
> 赞同：1
> 
> 时间：2012-08-11T12:26:58.047
> 
> 标签：objective-c, ios, uitextview, selection, uisegmentedcontrol

我有以下代码，它是用于语言选择选项的 segmentedControl。案例 0 用于英语，案例 1 用于希腊语，然后传递给 a `UITextView`。问题是，每次我按下案例 1 或 0 的按钮时，我都必须返回上一个视图控制器，它是一个表格视图控制器，然后返回到“detailViewController”以显示正确的语言。有没有办法做到这一点而无需在视图控制器之间来回切换？诸如小动画或刷新或重新加载方法之类的`UITextView`.

```
 int a;

- (IBAction)languageSeg:(id)sender {

switch (((UISegmentedControl *)sender).selectedSegmentIndex) {

 case 0:

 a=0;

        break;

    case 1:
        a=1;

        break;

    default:

        break;
}
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

-(void) viewWillAppear:(BOOL)animated{

[super viewWillAppear:YES];

UIImage *saladImage = [UIImage imageNamed:@"salad.jpg"];

UIImage *fishImage = [UIImage imageNamed:@"fish.jpg"];

 [textDetail setScrollEnabled:YES];

 [textDetail setContentSize:CGSizeMake(320, 190)];

//Switch the UIImages and UILabel based on item

switch (itemNumber) {
    case 0:
        itemName.text = @"Salad";
        itemPic.image = saladImage;
        self.title = @"Salads";

        if (a==0){

            textDetail.text = @"description in english";

        }

        if (a==1){

            textDetail.text = @"description in greek";
        }

        break;

      case 1:

       // etc. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:55:02.723

您可以在 languageSeg: 方法中更新 textView 的文本，方法与您最初在 viewWillAppear 中设置的方式相同：

我将创建一个单独的方法来处理语言切换，然后从 viewWillAppear 和 languageSeg 以及您需要的任何其他地方调用该方法。

例如，您的语言设置方法将包括当前位于 viewWillAppear 底部的代码：

```
- (void) languageSetter {

    switch (itemNumber) {
       case 0:
            itemName.text = @"Salad";
            itemPic.image = saladImage;
            self.title = @"Salads";

            if (a==0){
                textDetail.text = @"description in english";
            }
            if (a==1){
               textDetail.text = @"description in greek";
            }
      break;

      case 1:
        // etc.
      break;

      default:
      // default case
      break;
    }
} 
```

然后您的 viewWillAppear: 方法将如下所示：

```
-(void) viewWillAppear:(BOOL)animated{

     [super viewWillAppear:YES];
     UIImage *saladImage = [UIImage imageNamed:@"salad.jpg"];
     UIImage *fishImage = [UIImage imageNamed:@"fish.jpg"];

     [textDetail setScrollEnabled:YES];
     [textDetail setContentSize:CGSizeMake(320, 190)];

     [self languageSetter];
} 
```

你的 languageSeg: 方法看起来像这样：

```
- (IBAction)languageSeg:(id)sender {

    switch (((UISegmentedControl *)sender).selectedSegmentIndex) {

       case 0:
           a=0;
           break;

       case 1:
           a=1;
           break;

       default:
           break;
    }

    [self languageSetter];
} 
```

很多实现将取决于您的其余代码的设置方式和您的个人需求，但这是一般的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:47:03.633

我有一个带有语言选择器的应用程序，并且我使用 NSUserDefaults。奇迹般有效。在带有选择器的视图控制器中：

```
- (IBAction)languageSeg:(id)sender {

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

switch (((UISegmentedControl *)sender).selectedSegmentIndex) {

    case 0:

       [defaults setInteger:0 forKey:@"language"];
        break;

    case 1:

        [defaults setInteger:1 forKey:@"language"];
        break;

    default:

        break;
}
} 
```

在`vieWillAppear`viewController 中显示语言：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([defaults integerForKey:@"language"] == 0) {
        textDetail.text = @"description in english";

    }else{
        textDetail.text = @"description in greek";
    } 
```

现在，在该`viewDidLoad`方法中，如果用户还没有设置任何值，您需要给它一个默认值，如下所示：（再次在您的视图控制器中显示设置，而不是选择器视图。）

```
 if (![defaults integerForKey:@"language"]) {
        [defaults setInteger:0 forKey:@"language"];
    }

textDetail.text = @"description in english"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:45:40.887

`switch (itemNumber)`接到电话的在哪里？

如果它在诸如`viewDidLoad`或之类的方法中`viewWillAppear`，它只会在这个视图出现时被调用。

您可能需要将这部分提取为方法，并将其放入`(IBAction)languageSeg:(id)sender`. 例如：

```
- (void)updateView
{
    switch (itemNumber) {
    case 0:
    itemName.text = @"Salad";
    itemPic.image = saladImage;
    self.title = @"Salads";

    if (a==0){

        textDetail.text = @"description in english";

    }

    if (a==1){

        textDetail.text = @"description in greek";
    }

    break;

  case 1:

   // etc.
} 
```

然后在 switch 块中`viewDidLoad`和之后调用此方法。 `languageSeg:`

# facebook - 为 Facebook 应用程序生成具有随机数据的测试用户的脚本

> ID：11914698
> 
> 赞同：0
> 
> 时间：2012-08-11T12:27:57.400
> 
> 标签：facebook, testing

我想用最多 500 个可用的测试用户来测试我的 Facebook 应用程序。我已经尝试过使用 facebook 提供的界面和另一个名为“FacebookTestUserManager”的好界面，但是这些会创建空白的用户个人资料，我想用随机信息填充个人资料的某些部分，例如个人资料图片、教育等。

我不认为获取这些数据应该太难（我正在考虑一个选项列表并获得一个随机数生成器来选择一个选项），但我对如何将这些信息输入帐户以及如何输入这些信息感到困惑我运行我的脚本。

这个[http://developers.facebook.com/docs/test_users/](http://developers.facebook.com/docs/test_users/)基本上是我能找到的关于此事的唯一资源，但它非常简短。我的问题是：

**1）在我开始之前，是否有任何公共脚本已经这样做了？**

**2) 我如何运行执行此帐户生成过程的脚本？我认为它没有写在我的应用程序中，因为我只希望它运行一次！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:49:55.160

> 如何运行执行此帐户生成过程的脚本？

就像你运行任何其他脚本一样……</p>

> 我认为它没有写在我的应用程序中，因为我只希望它运行一次！

它不必在任何东西的“内部”，它只需要在进行 Graph API 调用时使用您的应用程序访问令牌。

* * *

*我认为您提到的文档中的所有内容对于对应用程序及其与 Grapf API 的交互工作方式有扎实基础知识的开发人员来说应该很容易理解。如果您还没有这样的知识……那么我认为测试一个已经有 500 个测试用户的应用程序没有任何用处。*

# emacs - 在找不到库时使用 edebug 进行 elisp 失败

> ID：11914700
> 
> 赞同：3
> 
> 时间：2012-08-11T12:28:49.973
> 
> 标签：emacs, elisp

尝试使用 edebug 处理 emacs lisp 库。当我运行 defun 时，我可以有效地设置断点并中断它们，不幸的是，当我使用 i 进入某些东西时，我得到了错误：

```
Can't find library /usr/share/emacs/23.3/lisp/emacs-lisp/cl-macs.el 
```

这不是说谎，那个库不存在，只有编译版本（.elc）存在。它是使用以下方式安装的：

```
apt-get install emacs23-nox 
```

关于如何进行的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T14:26:16.963

在 Debian 派生的发行版上，裸`emacs23`包不包括 Elisp 源代码（也不包括任何文档等）。要安装它们，`sudo apt-get install emacs23-el`

# c# - 事件处理现在被监听器弄糊涂了

> ID：11914702
> 
> 赞同：0
> 
> 时间：2012-08-11T12:29:00.003
> 
> 标签：c#, asp.net, .net, wpf, event-handling

到目前为止，我认为我对事件处理有很好的理解，因为我正在阅读这个[路由事件概述](http://msdn.microsoft.com/en-us/library/ms742806%28VS.85%29.aspx)，其中提到了**事件侦听器**

这是我的理解

```
<!-- Sources -->
<Button x:Name="aButton" Click="MyHandler" />
or
<asp:Button ID="aButton" OnClick="MyHanlder" />

//handler
protected void MyHanlder(object source, EventArgs e)
{

} 
```

从文档中，在**什么是路由事件**部分下有此声明

> 该事件可以在元素树根的**侦听**器上调用**处理程序，然后沿着树节点路由到作为****事件源的节点元素的后续子元素**

 ****从我上面显示的代码中我知道这些（如果错了请纠正我）：

*   事件*处理程序*是`MyHanlder(....)`
*   事件*源*是`aButton`

问题是我不明白这里的*事件监听器是什么*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:54:12.173

事件侦听器只是事件处理程序的另一个名称。

从带有处理程序的对象的角度来看，它有一个处理程序。
（这个对象实现了一个处理程序。）

从调用监听器的对象的角度来看，它是一个监听器。
（这个对象调用一个监听器。）

他们是一样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T18:51:32.147

事件列表器是您布局中的一个元素，如此处所述：http: [//msdn.microsoft.com/en-us/library/ms742806.aspx](http://msdn.microsoft.com/en-us/library/ms742806.aspx)

> 路由事件侦听器和路由事件源不需要在其层次结构中共享公共事件。任何 UIElement 或 ContentElement 都可以是任何路由事件的事件侦听器。因此，您可以将整个工作 API 集中可用的全套路由事件用作概念“接口”，从而应用程序中的不同元素可以交换事件信息。这种用于路由事件的“接口”概念特别适用于输入事件。****

# google-chrome - 如何在没有所有浏览器控件（选项卡、地址行、按钮）的情况下运行 Chrome？

> ID：11914703
> 
> 赞同：15
> 
> 时间：2012-08-11T12:28:59.763
> 
> 标签：google-chrome

如何在没有所有浏览器控件（选项卡、地址行、按钮）的情况下运行 Chrome？

仅加载了特定 URL 的页面区域

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-05-04T14:14:01.517

假设您要打开一个特定的 URL（比如说[http://www.example.com](http://www.example.com)），这里有 3 个选项供您考虑。对于所有选项，首先创建 Chrome.exe 的快捷方式，您将通过在快捷方式的“目标”属性中添加标志/开关来编辑该快捷方式。

1.  **作为应用程序打开**- 使用这样的“目标”：

    "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --app= [http://www.example.com](http://www.example.com)

这将在通用 Windows 窗口中打开网页，没有可用的浏览器 Chrome，但您仍然可以访问浏览器工具，例如，按 F12 打开开发者工具。

2.  **打开全屏**- 使用这样的“目标”：

    “C:\Program Files (x86)\Google\Chrome\Application\chrome.exe” [http://www.example.com](http://www.example.com) --start-fullscreen

这将在 Chrome 窗口中打开网页，该窗口将全屏启动，除非已经打开了另一个 Chrome 实例，在这种情况下，页面将在该实例中打开。如果按 F11，浏览器将返回其正常查看模式。

3.  **在 Kiosk 模式下打开**- 使用这样的“目标”：

    “C:\Program Files (x86)\Google\Chrome\Application\chrome.exe” [http://www.example.com](http://www.example.com) --kiosk

这将在 Chrome 窗口中打开网页，该窗口将以 Kiosk 模式启动，除非已经打开了另一个 Chrome 实例，在这种情况下，页面将在该实例中打开。据我了解，关闭它的唯一方法是按 Alt+F4。

正如 mr_kazz 解释的那样，您可以参考[http://www.chromium.org/developers/how-tos/run-chromium-with-flags](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)以查看在启动 Chrome 快捷方式时可以使用哪些标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:35:10.037

您需要在“Kiosk 模式”下启动 Chrome

这是 Windows 的教程：http: [//think2loud.com/868-google-chrome-full-screen-kiosk-mode/](http://think2loud.com/868-google-chrome-full-screen-kiosk-mode/)

如果您正在构建一个更精细的信息亭解决方案，您可以将此命令放在一个 shell/bash 脚本中，该脚本将持续运行它（并在再次执行之前等待退出）。这是如果您的用户按下 Alt+F4 它将再次启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T16:14:35.350

[http://www.chromium.org/developers/how-tos/run-chromium-with-flags](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)

上面的页面链接到一个包含大量参数列表的页面，也许可以这样实现。我也想知道如何做到这一点。

我目前使用它来打开 µTorrent 服务器的 webUI

```
chromium-browser --window-size=900,700 http://admin:@localhost:8080/gui/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-20T23:21:21.330

您可以将网页作为应用程序打开。要了解如何执行此操作，请在搜索引擎中搜索“将 chrome 网页作为应用程序打开”并按照说明进行操作。我可以在此处粘贴说明，但是一旦您知道如何搜索它，就很容易了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-15T08:57:24.143

使用“--kiosk”开关运行它：-

```
"C:\Program Files\Google\Chrome\Application\chrome.exe"  --kiosk 
```

或其他任何可能安装的地方。

# vb.net - Access 数据库上的 VB.NET 多线程

> ID：11914708
> 
> 赞同：0
> 
> 时间：2012-08-11T12:29:09.973
> 
> 标签：vb.net, multithreading, ms-access

我有一个更新 2,800,000 条记录访问数据库的大循环，我将循环划分为 7 个线程，因此每个线程处理 400,000 条记录，循环需要大约 0.7 秒来更新一条记录，因为要完成很多计算。

我确信线程将有助于使进程更快，因为我在 7200RPM HDD 和 SSD 和 ramdisk 上测试了应用程序，速度差异并不明显，因此 IO 不是瓶颈。

我希望第一个线程处理前 400k 记录，第二个线程处理接下来的 400k 记录，依此类推。

- 这样做的正确方法是什么？

- 每个线程都应该有自己的数据表和绑定源吗？

-当过程完成时，您将如何将结果合并到一个表中并在 datagridview 中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:49:00.133

访问数据库只是一个文件。在读写它的时候，你会遇到瓶颈，最重要的是，它很有可能在做这样的事情时被破坏。想象一下对数据的 xml 文件做同样的事情。

一切都取决于您对数据所做的工作。如果任何键或索引中的任何列都没有更改，并且并非所有记录都会读取/更改。然后一个要读写的线程和一个要处理的池可能会让你到达某个地方。该处理必须足够重要，以使其值得旋转多个线程。因为他们将在磁盘 io 上等待，除非有大量磁盘。如果您有会更改的索引并且您不必在操作中使用它们。放下它们，处理然后再放回去。

如果您正在对数据进行重大更改，那么也许

从现有数据库中读取一个线程然后创建七个（可能希望根据合理的处理器数量来调整）空数据库，其中只有这个表 从父级读取，放入处理器池（如果值得拥有一个） ，然后写入“七个”副本之一然后清除原始数据并从其他副本中写回数据（串行并重新组合在一起）

所有所说的放弃访问，请使用完整的 dbms，因为您可能已经看到了一些您所期望的改进。

并行处理时要记住的事情。瓶颈在哪里？在您的情况下，可能是磁盘 IO，多个线程没有解决这个问题，您最终得到了 7 个线程在等待磁盘驱动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T03:08:54.080

我建议尝试从另一个角度来解决这个问题。遍历这么多记录并单独更改它们总是很慢。

我建议您尝试发出一次更新许多记录的更新语句，并尝试通过将其分解为逻辑语句来封装您的业务逻辑。例如：

```
UPDATE stock SET retail = 0.95 WHERE retail  < 1.5
UPDATE stock SET retail = 1.95 WHERE retail >= 1.5 and retail < 2.5
UPDATE stock SET retail = 2.95 WHERE retail >= 2.5 and retail < 3.5
UPDATE stock SET retail = 3.95 WHERE retail >= 3.5 and retail < 4.5
UPDATE stock SET retail = 4.95 WHERE retail >= 4.5 and retail < 5.5 
```

如果您可以将业务逻辑分解为单独的语句，您会发现一次更新许多记录的速度要快得多。

做不到这一点，如果可以的话，发布更多细节！

# go - 在 Go 中编写通用数据访问函数

> ID：11914712
> 
> 赞同：2
> 
> 时间：2012-08-11T12:29:50.680
> 
> 标签：go

我正在编写允许从数据库访问数据的代码。但是，我发现自己对相似的类型和字段重复相同的代码。我怎样才能为它编写通用函数？

例如我想要达到的目标......

```
type Person{FirstName string}
type Company{Industry string}

getItems(typ string, field string, val string) ([]interface{}) {
    ...
}

var persons []Person
persons = getItems("Person", "FirstName", "John")

var companies []Company
cs = getItems("Company", "Industry", "Software") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:50:18.010

joshlf13 有一个很好的答案。我会对其进行一些扩展以保持一些额外的类型安全性。我会使用收集器函数而不是标准函数。

```
// typed output array no interfaces
output := []string{}

// collector that populates our output array as needed
func collect(i interface{}) {
 // The only non typesafe part of the program is limited to this function
 if val, ok := i.(string); ok {
   output = append(output, val) 
 }
}

// getItem uses the collector  
func getItem(collect func(interface{})) {
    foreach _, item := range database {
        collect(item)
    }
}

getItem(collect) // perform our get and populate the output array from above. 
```

这样做的好处是不需要您在调用 getItems 后循环通过您的 interface{} 切片并进行另一次强制转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T00:53:37.553

所以你肯定是在正确的轨道上返回一片 nil 接口类型的想法。但是，当您尝试访问特定成员或调用特定方法时，您会遇到问题，因为您不会知道要查找的类型。这就是类型断言会派上用场的地方。稍微扩展您的代码：

```
getPerson(typ string, field string, val string) []Person {
    slice := getItems(typ, field, val)
    output := make([]Person, 0)
    i := 0
    for _, item := range slice {
        // Type assertion!
        thing, ok := item.(Person)
        if ok {
            output = append(output, thing)
            i++
        }
    }
    return output
} 
```

所以它的作用是执行通用搜索，然后只清除那些类型正确的项目。具体来说，类型断言：

```
thing, ok := item.(Person) 
```

检查变量`item`是否是 type `Person`，如果是，则返回值和 true，否则返回 nil 和 false（因此检查 ok 告诉我们断言是否成功）。

实际上，如果需要，您可以更进一步，并`getItems()`根据另一个布尔函数定义函数。基本上，这个想法是让`getItems()`函数在数据库中的每个元素上传递它，并且只有在元素上运行函数返回 true 时才将该元素添加到结果中：

```
getItem(critera func(interface{})bool) []interface{} {
    output := make([]interface{}, 0)
    foreach _, item := range database {
        if criteria(item) {
            output = append(output, item)
        }
    }
} 
```

（老实说，如果是我，我会做两者的混合，它接受标准函数但也接受字段和值字符串）

# c# - C# 中的 NumPy/SciPy 与 Visual Studio 2008

> ID：11914714
> 
> 赞同：1
> 
> 时间：2012-08-11T12:29:59.720
> 
> 标签：c#, visual-studio-2008, .net-3.5, numpy, scipy

我想从 c# 访问 NumPy/SciPy 库。

根据[这个网站](http://pytools.codeplex.com/wikipage?title=NumPy%20and%20SciPy%20for%20.Net)，*“NumPy 和 SciPy 的 IronPython 端口是完整的 .NET 端口，包括到通用原生 C 核心的自定义 C#/C 接口。这意味着完整的功能不仅适用于 IronPython，而且适用于所有 .NET 语言例如 C# 或 F#，通过直接访问 C# 接口对象或有时通过评估来自其他 .NET 语言的 IronPython 表达式。”*

根据[在.net 上设置skipy 的说明](http://www.enthought.com/repo/.iron/)，安装skipy 的第一步是*“下载并安装IronPython 2.7，**这将需要.NET v4.0。** ”*。

我不反对安装net4.0，但为了开发，我目前卡在Visual Studio 2008，它只支持net3.5。

我搜索了获取 net3.5 的 Ironpython 版本的说明，但这种方法似乎值得怀疑。有没有办法为此目的使用 net4.0 版本的 ironpython？（我不需要在 Visual Studio 2008 中工作 Ironpython，我只想从 C# 访问 numpy 库）

或者为 net 3.5 构建 ironpython 以及 NumPy/ScyPy 有多难？我不得不承认，到目前为止，我什至无法找到任何暗示 NumPy Visual Studio 端口曾在 vs2008 下成功构建过。

在 Visual Studio 2008 项目中获取 NumPy/SciPy 类的推荐方法是什么？

有没有人成功做到这一点？

# html - Bootstrap Carousel 图片以外的其他内容

> ID：11914716
> 
> 赞同：41
> 
> 时间：2012-08-11T12:30:02.673
> 
> 标签：html, css, twitter-bootstrap

我想在个人项目中使用 twitter 引导轮播。到目前为止，它运行得非常好，因为我使用了引导主页的示例。

现在我想在那里放置简单的 html 内容而不是图像。然后，此内容应以与图片相同的方式旋转。我输入的文本显示在 carousel-caption 中，而我输入的 carousel 标题中的文本未显示。

例子：

```
 <div class="item">
        This is the text or html code i want to place
        <div class="carousel-caption">
            <h4>Thumbnail label</h4>
            <p>Carousel caption text<p>
        </div>
    </div> 
```

有没有办法得到这个工作？也许有一种方法可以声明一个白色跨度，比如 300 x 300 像素，我可以在其中放置一些内容。

你应该知道我是初学者。我现在正在学习 html、css、js、mongodb、bootstrap、node.js。但这对我来说有点过分了。

非常感谢丹尼尔

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-11T14:09:54.847

```
<head>
  <style type="text/css">
    div.new_html_code {
      width:150px;
      height:100px;
      min-width:150px;
      min-height:100px;
      max-width:200px;
      max-height:100px;
      overflow:hidden;
      display:block;
      border:1px solid red;
    }
  </style>
</head>
<body>
<!--
some html stuff here, I am just giving the basic layout
-->
    <div class="item">
        <div class="new_html_code"></div>
        <div class="carousel-caption">
            <h4>Thumbnail label</h4>
            <p>Carousel caption text<p>
        </div>
    </div>
</body> 
```

* * *

如果您从轮播中替换了 html/css 并且无法更正它，请取回原始内容。然后慢慢开始用你的代码替换，并且要非常小心下面的 css 属性，它们不仅有助于发现错误（比如最有用的 css 边框），而且它们还有助于阻止添加的新内容，以免之前的臃肿一（最大宽度/高度CSS属性）。

密切注意以下 css 属性：

```
 min-width:150px;
      min-height:100px;
      max-width:200px;
      max-height:100px;
      overflow:hidden;
      border:1px solid red; 
```

不要修改 z-indexes 和 opacity，首先使用我上面给出的那些，然后开始做复杂的事情，再次询问您是否有疑问并为错别字抱歉，我的时间较少。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-27T19:58:58.733

上课对`carousel-caption`你不利。如果您不想显示图片，请不要使用它，您可以。将您的 html 内容定义为*标题*甚至在语义上是错误的。离开班级并使用平原`div`

```
<div>
    <h4>Thumbnail label</h4>
    <p>Carousel caption text<p>
</div> 
```

这些平滑的阴影也会消失。这很好，因为我们不希望它们出现在纯文本上（尽管它们在图片上可能看起来不错）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-07T15:18:06.887

@GLES 有一种非常简单的方法可以在没有任何图像的情况下使用轮播。*实际上.carousel-caption*的位置属性导致了问题。只需将其设置为*静态*

```
.carousel-caption { position:static; } 
```

这是演示

[演示](http://jsfiddle.net/esy38/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-11T13:15:34.850

你没有关闭`carousel-caption`div。大概是你的问题。如果您查看引导轮播的文档，则在每个项目中使用图像或文本没有什么不同。

```
<div id="myCarousel" class="carousel slide">
   <!-- Carousel items -->
   <div class="carousel-inner">
     <div class="active item"><p>1</p></div>
     <div class="item"><p>2</p></div>
     <div class="item"><p>3</p></div>
   </div>
<!-- Carousel nav -->
<a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
<a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

在 jsfiddle 中查看这段代码的行为：http: [//jsfiddle.net/QYFa2/](http://jsfiddle.net/QYFa2/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-05T18:15:56.053

Rondell 可能是一个 jQuery 插件，用于以您希望的方式显示画廊和不同的内容。

[查看演示](http://projects.sebastianhelzle.net/jquery.rondell/)我已经使用了这个插件，它很容易使用，下载[源代码](http://projects.sebastianhelzle.net/jquery.rondell/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-24T01:16:38.923

只需**删除 carousel-caption**类，一切都会很棒

# c++ - 将 GP 和 OOP 概念结合起来遇到问题

> ID：11914717
> 
> 赞同：4
> 
> 时间：2012-08-11T12:30:29.783
> 
> 标签：c++, oop, generics

我有一个带有模板化成员函数的类：

```
class Person
{
  template <typename TItem>
  void DoSomething(TItem item)
  {
    item.Action();
  } 
}; 
```

这允许我通过一个 Action 成员函数传递任何项目，并且该人将对该项目执行该操作。所以我可以这样做：

```
Person person;
BaseballBat bat;
person.DoSomething(bat); 
```

这种结构允许我使用任何类型的对象调用函数。但是，如果我想*存储*任何类型的对象，我必须模板类：

```
template <TItem>
class Person
{
public:
  void DoSomething()
  {
    this->Item.Action();
  }

  void SetItem(TItem item)
  {
    this->Item = item;
  }
private:
  TItem Item;
};

Person<BaseballBat> person;
BaseballBat bat;
person.SetItem(&bat);
person.DoSomething(); 
```

这很烦人，因为我必须重新实例化 Person 类来更改对象的类型。

或者，我可以从父类派生项目：

```
class Person
{
public:
  void DoSomething()
  {
    this->Item.Action();
  }

  void SetItem(TItem* item)
  {
    this->Item = item;
  }

private:
  ParentItem* Item;
};

class ParentItem{};

class BaseballBat : public ParentItem
{}

Person person;
BaseballBat bat;
person.SetItem(&bat);
person.DoSomething(); 
```

这很烦人，因为我必须维护所有项目的继承结构（这似乎非常“非 GP”）。

当我有多层“包含对象的对象”时，问题就真的出现了——也就是说，我必须将函数模板参数从一个非常“顶级”的调用“传递”到包含的类：

```
class BaseballBat
{
  void DoAction();
};

class Child
{
  template <typename TItem>
  void DoAction(TItem item)
  {
    item.DoAction();
  }
};

class Person
{
  Child child;

  // This is annoying to have to pass the item to the person, who then has to pass it to the child. I'd rather "give" the child an Item, then just be able to call child.DoAction(), where the Person doesn't know anything about the item.
  template <typename TItem>
  void PlayWithChild(TItem item)
  {
    child.DoAction(item);
  }
} 
```

任何人都可以评论如何正确混合函数模板和将对象存储为成员数据的这两种想法吗？（以上只是试图证明的俗气的例子——如果它们没有意义或者你有更好的例子，我会全神贯注:)）。

--------- 编辑 --------- 也许一个更好的例子是我的真实案例的简化。我有一个具有成员函数的类 Matcher：

```
template<typename TDistanceFunctor, typename TPropagationFunctor>
void Matcher::Compute(TDistanceFunctor distanceFunctor, TPropagationFunctor propagationFunctor); 
```

然后我有另一个类 ImageAlgorithm，它使用了 Matcher：

```
template<typename TMatcher>
void ImageAlgorithm::Compute(TMatcher matcher)
{
  matcher.Compute(...); // How do I get the DistanceFunctor and the PropagationFunctor here?
} 
```

我想这样称呼这些东西：

```
Matcher myMatcher;
.... Setup matcher (how?) ...
ImageAlgorithm algorithm;
algorithm.Compute(myMatcher); 
```

我不知道如何通过 ImageAlgorithm 对象“通过”DistanceFunctor 和 PropagationFunctor，以便它可以到达 ImageAlgorithm::Compute 调用中的 Matcher 对象。当然，我可以在 TDistanceFunctor 上模板 Matcher 并将 TDistanceFunctor 存储为成员变量，但后来我无法将匹配器使用的距离仿函数更改为不同类型的距离仿函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:44:48.997

您可以尝试使用[boost::any](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)来保存您的类型变体成员。

从概述：

> boost::any 类 (...) 支持复制任何值类型并严格根据其类型安全检查提取该值。

**编辑**

你是对的，使用 boost any 调用存储的函子是有问题的。所以我建议另一种解决方案：使用 std::function （或 boost::function）来包装你的仿函数。这样，Matcher 可以保存相关语法的函数对象（例如，没有参数），并且不需要在仿函数类型上进行模板化。

函数对象已经为您完成了 OO（至少在某种意义上）和 GP 之间的组合。

# xml - 从 Internet 读取 VB.net 中的 XML 文档

> ID：11914726
> 
> 赞同：0
> 
> 时间：2012-08-11T12:31:20.783
> 
> 标签：xml, vb.net

举个例子。。

```
Private Sub Button2_Click_1(sender As Object, e As EventArgs) Handles Button2.Click

        WebBrowser1.Navigate("http://example.com/page.xml")

    End Sub 
```

上面的代码显示了 Button_Click 上 webbrowser1 控件中的 XML 内容。但我不想在浏览器中显示。我想从 xml 文档中读取内容以在其他地方使用。

我只需要知道如何让这个 XML 文件从一个网址在其他地方（除了 webbrowser 控件）使用......

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T12:42:32.090

该`XmlDocument.Load`方法可以指定本地文件名或网址 URL，例如：

```
Dim doc As New XmlDocument()
doc.Load("http://example.com/page.xml") 
```

和类的`Load`方法也以同样的方式工作。`XDocument``XElement`

如果您想将 XML 文档作为字符串获取，那么您可以通过其他一些方式对其进行解析，例如`XmlSerializer`，您可以使用`HttpWebRequest`该类。有关示例，请参见此页面：

[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx)

# entity-framework - ObjectCollection.Where(o => o.Related == EntityObject)：“无法创建常量值”

> ID：11914729
> 
> 赞同：0
> 
> 时间：2012-08-11T12:31:35.097
> 
> 标签：entity-framework, linq-to-entities

给定一个 EntityObject，我想要一种面向对象的方式来查找所有相关项目作为我的数据源查询的一部分。

以下产生了正确的输出，但将所有行都带到了电线上。

```
Parent.                                             // EntityObject
Children.                                           // EntityCollection
Where(o => o.Gender == 'm').                        // IEnumerable (local!)
OrderBy(o => o.Age).                                // IOrderedEnumerable
Skip(pages * pageSize).Take(pageSize);              // (Inefficient paging!) 
```

我需要用这个来支持 UI（在通过网络返回结果之前使用其他条件进行过滤、排序和分页）。我重新排序以利用 Queryable：

```
Repository.                                         // Repository
Children.                                           // ObjectSet
Where(o => o.Parent == Parent && o.Gender == 'm').  // ObjectQuery, runtime error
OrderBy(o => o.Age).                                // IOrderedQueryable
Skip(pages * pageSize).Take(pageSize); 
```

但这会产生错误：

**无法创建类型为“DataModel.Parent”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。**

是否有一种自然的、面向对象的方式来查询这种关系，使用 Linq to Entities？或者我是否必须为此回退到 SQL？

我想了一会儿[CreateSourceQuery](http://msdn.microsoft.com/en-us/library/cc716708)将成为答案，但它不能应用于 EntityObject。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:48:24.227

我无法对我所说的进行测试，但我认为您会收到错误消息，因为 EF 不知道如何将*o.Parent == Parent*转换为 SQL 语句。尝试比较两个父母的ID.. `o.Parent.Id == Parent.Id`

# c++ - C++ for-loop - 测试部分

> ID：11914734
> 
> 赞同：0
> 
> 时间：2012-08-11T12:32:09.647
> 
> 标签：c++, for-loop

这是一个简单的问题，但我被卡住了。[这是本文](http://www.cse.cuhk.edu.hk/%7Ettwong/papers/udpoint/udpoint.pdf)中的准随机数生成器的代码。

```
void PlaneHammersley(float *result, int n)
{
float p, u, v;
int k, kk, pos;

for (k=0, pos=0 ; k<n ; k++) {

u = 0;
for (p=0.5, kk=k ; kk ; p*=0.5, kk>>=1)
   if (kk & 1) // kk mod 2 == 1
     u += p;
v = (k + 0.5) / n;
result[pos++] = u;
result[pos++] = v;
}
} 
```

我尝试用 Python 翻译，而第二个 for 循环对我来说很神秘。结束条件是`kk`一个 int，我不知道它何时评估为 True。有人可以解释发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:36:48.487

相当于：

```
for (p=0.5, kk=k ; kk != 0; p*=0.5, kk>>=1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:35:06.317

如果整数不为零（即严格为正或负），则其计算结果为真。这也代表各种其他类型：浮点值在非零时也为真，不等于指针的`NULL`指针也被认为是真。

# ruby-on-rails - Rails 两个 has_many

> ID：11914737
> 
> 赞同：0
> 
> 时间：2012-08-11T12:32:27.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

有两种不同类型的用户：摄影师和正在寻找摄影师的人（尽管都是用户）。普通用户可以选择一组摄影师并向该组发布“简报”。最好的模型关联设置是什么？

```
Brief
  belongs_to :user # a user looking for a photographer
  has_many :photographers, :class_name => "User", :through => :jobs # photographers who have been selected to participate in this brief

User
  has_many :briefs
  has_many :jobs, :class_name => "Brief", :through => :jobs 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T18:29:20.053

为用户/摄影师/客户查找单表继承。

顺便说一句，“has_many :jobs, :through => :jobs”对你没有帮助。

我想你想要这个：

```
Class Person < User
  has_many :briefs, :foreign_key => "poster_id"
end

Class Photographer < User
 has_many :briefs, :foreign_key => "photographer_id"
end 
```

# git - 推送到 git-hub 存储库时自动忽略选定的代码更改

> ID：11914741
> 
> 赞同：3
> 
> 时间：2012-08-11T12:33:02.220
> 
> 标签：git, github

在我从事的编码项目类型中，通常有一个人们使用的通用代码库，然后在其上构建自己的个性化代码。一种方法是将通用基本代码保留在它自己的 git-hub 存储库中，然后人们可以对其进行分叉和修改。

但是，在将更改推送到公共基础代码存储库时，您不想包含您的个性化代码，因此在合并时必须小心不要包含它。有没有一种简单的方法可以做到这一点，而不必每次都告诉 git 忽略个性化代码？

如果可能的话，我宁愿避免为了更改基本代码的特定目的而对基本代码进行单独的分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:39:45.830

如果个性化仅限于某些文件，通过一种方法来检测只是查看其内容，那么您可以：

*   仅版本*模板*文件，将始终推​​送到您的“通用内容”存储库
*   保留*私有*值文件（其中包含正确值的文件，您的 git repo 始终忽略这些文件并且从不推送）
*   版本脚本文件能够获取模板文件、值文件，并自动生成正确的值最终结果文件。该生成的文件也不会被推送，并且也会被您的 git repo 忽略。

这个想法是在结账时自动生成这一代。
您可以通过声明内容过滤器驱动程序来做到这一点。

![内容过滤器驱动程序](../Images/d6b6d97823405b90eb6b10718aaa7586.png)

结帐时，在`smudge`脚本中**[检测模板文件的*内容*](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)**（那些“过滤驱动程序”脚本没有它们正在过滤的文件的名称），并通过在特定文件中查找值文件来生成正确的内容小路。

# silverlight - 尝试添加资源时出现未知的解析器错误

> ID：11914752
> 
> 赞同：5
> 
> 时间：2012-08-11T12:34:41.300
> 
> 标签：silverlight, windows-phone-7, xaml

我在向我的 wp7 项目添加资源时遇到问题。我已经添加了

```
 <resources:LocalizedStrings x:Key="LocalizedStrings"/> 
```

在运行应用程序后，我收到这样的 XamlParseException: Unknown parser error: Scanner 2147500037。

这是代码。

```
 <Application 
x:Class="MyProject.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:vm="clr-namespace:MyProject.ViewModels;assembly=MyProject.ViewModels"
xmlns:resources="clr-namespace:MyProject.Resources;assembly=MyProject.Resources">
<Application.Resources>
    <ResourceDictionary>

        <resources:LocalizedStrings x:Key="LocalizedStrings"/>
        <vm:ViewModelLocator x:Key="Locator"/>

        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="styles/globalstyles.xaml"/>
            <ResourceDictionary Source="styles/UserStyles.xaml"/>
            <ResourceDictionary Source="styles/DialogStyles.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources>

<Application.ApplicationLifetimeObjects>
    <shell:PhoneApplicationService 
        Launching="Application_Launching" Closing="Application_Closing" 
        Activated="Application_Activated" Deactivated="Application_Deactivated"/>
</Application.ApplicationLifetimeObjects></Application> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:36:03.760

通过创建项目 MyProject.LocalizedResources 而不是 MyProject.Resources 解决此问题

xmlns:resources="clr-命名空间:MyProject.LocalizedResources;assembly=MyProject.LocalizedResources"

现在效果很好。

项目名称中的单个单词资源导致错误！:(

# php - 我如何在 foreach php 上使用 foreach

> ID：11914753
> 
> 赞同：-2
> 
> 时间：2012-08-11T12:34:52.813
> 
> 标签：php, curl, foreach

嗨，伙计们，我有这个脚本，但显然我没有使用 foreach 对我想知道是否可以将这两个请求结合起来作为一个请求

```
$url = "http://api.website.com/1.0/country?source=ballsche&programid=5380&campaignid=100000";
$ch = curl_init();
$timeout = 0;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$rawdata = curl_exec($ch);
curl_close($ch);
$array = json_decode($rawdata,true);
foreach($array as $obj) {
    $country = $obj['country'];
    $countrycode = $obj['countryCode'];

}
foreach($countrycode as $did) {
    $wgurl = "http://api.website.com/1.0/city?source=ballsche&programid=5380&campaignid=100000&country-code=$did";
    $wgch = curl_init();
    $wgtimeout = 0;
    curl_setopt($wgch, CURLOPT_URL, $wgurl);
    curl_setopt($wgch, CURLOPT_HEADER, 0);
    curl_setopt($wgch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($wgch, CURLOPT_CONNECTTIMEOUT, $wgtimeout);
    $wgrawdata = curl_exec($wgch);
    curl_close($wgch);
    $wgarray = json_decode($wgrawdata,true);
}
foreach($wgarray as $wgobj) {
    $city = $wgobj['city'];
    $citycode = $wgobj['cityCode'];
    if($city){
        $sql = "INSERT INTO `pt_city` (city, citycode) VALUES ('$city', '$citycode')";
        database_queryModify($sql,$result);
        }else{
        echo "dint work";
    }

} 
```

必须有一个简单的方法来做到这一点我猜想从数据中创建另一个数组但我不能完全正确我不断收到错误我尝试过这个和其他一些事情我的问题是我需要循环通过县代码并提出请求那里的代码有 150 个请求，我需要循环获取所有城市信息，并且对于每个请求，我需要解码返回的 json 并将其插入到我的城市表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:48:13.827

像这样把foreach放在彼此里面

```
$url = "http://api.website.com/1.0/country?source=ballsche&programid=5380&campaignid=100000";
$ch = curl_init();
$timeout = 0;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
$rawdata = curl_exec($ch);
curl_close($ch);
$array = json_decode($rawdata,true);
foreach($array as $obj) {
    $country = $obj['country'];
    $countrycode = $obj['countryCode'];

    foreach($countrycode as $did) {
        $wgurl = "http://api.website.com/1.0/city?source=ballsche&programid=5380&campaignid=100000&country-code=$did";
        $wgch = curl_init();
        $wgtimeout = 0;
        curl_setopt($wgch, CURLOPT_URL, $wgurl);
        curl_setopt($wgch, CURLOPT_HEADER, 0);
        curl_setopt($wgch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($wgch, CURLOPT_CONNECTTIMEOUT, $wgtimeout);
        $wgrawdata = curl_exec($wgch);
        curl_close($wgch);
        $wgarray = json_decode($wgrawdata,true);

        foreach($wgarray as $wgobj) {
            $city = $wgobj['city'];
            $citycode = $wgobj['cityCode'];
            if($city){
                $sql = "INSERT INTO `pt_city` (city, citycode) VALUES ('$city', '$citycode')";
                database_queryModify($sql,$result);
            } else {
                echo "dint work";
            }
        }
    }   
} 
```

# wpf - 样式功能区控件

> ID：11914756
> 
> 赞同：0
> 
> 时间：2012-08-11T12:35:04.433
> 
> 标签：wpf, devexpress, richedit

任何人都可以指出一些关于如何主题化或样式化 dev express 丰富的编辑功能区控件的好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:32:44.983

要设置任何 DevExpress 控件的样式，我建议您使用 WPF 主题编辑器工具。 ![在此处输入图像描述](../Images/242b361a347b3bddbccfaa8659890546.png) 这是一个独立的应用程序，旨在帮助开发人员轻松创建新的和修改现有的 DevExpress WPF 主题。

相关链接：[WPF 的主题编辑器](http://devexpress.com/Products/NET/Controls/WPF/Themes/Theme-Editor.xml)

教程视频：
[开始](http://www.youtube.com/embed/Wh6iF8hg49E?autoplay=1)
[使用 Expression Blend](http://www.youtube.com/embed/x4JeINuXTas?autoplay=1)

# ruby-on-rails - 无法集成facebook登录

> ID：11914761
> 
> 赞同：0
> 
> 时间：2012-08-11T12:35:26.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems

[为什么根据https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)上的指南尝试执行 oauth 登录时出现以下错误？

```
`add_camelization': undefined method `[]=' for nil:NilClass (NoMethodError)
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/omniauth-oauth2-1.1.0/lib/omniauth/strategies/oauth2.rb:117:in `<top (required)>'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:251:in `require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:251:in `block in require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/activesupport-3.2.7/lib/active_support/dependencies.rb:251:in `require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/oa-oauth-0.0.1/lib/omniauth/oauth.rb:8:in `<top (required)>'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
    from /home/jeevan/gypsy/config/application.rb:7:in `<top (required)>'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands.rb:53:in `require'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands.rb:50:in `tap'
    from /home/jeevan/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.7/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

# iphone - 应用内购买错误

> ID：11914762
> 
> 赞同：1
> 
> 时间：2012-08-11T12:35:51.183
> 
> 标签：iphone, xcode, app-store, in-app-purchase, sandbox

我已经完成了应用内购买的所有步骤。

但是，当 xcode 程序执行下面的代码时。

```
[[SKPaymentQueue defaultQueue] addPayment:[SKPayment paymentWithProduct:productID]]; 
```

错误发生并保持相同的错误。

> 'NSInvalidArgumentException'，原因：'无效的产品标识符：（null）'

如何解决这个问题呢？

任何有经验的 xcode 开发人员会分享应用内购买的完整步骤吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:38:01.520

检查您的捆绑标识符，如果它与为该应用程序设置的相同。

仅当捆绑标识符设置不正确时才会出现此错误。

希望对你有帮助......

# android - 在 Android 中：我可以将广播意图从一个应用程序接收到第二个应用程序吗

> ID：11914763
> 
> 赞同：2
> 
> 时间：2012-08-11T12:35:56.650
> 
> 标签：android, android-intent, broadcastreceiver

我有一个应用程序`Application1`，其中包含 2 个 java 类`Sender`（用于发送广播意图）和`Receiver`（用于接收由广播的广播意图`Sender`）。

那么我可以在其他应用程序的一个类中接收由`Sender`of广播的意图吗，假设？是否可以将一个应用程序广播的意图接收到另一个应用程序？`Application1``Receiver``Applications2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:48:07.843

答案是——是的，你可以。`BroadcastReceiver`是在应用程序之间传递数据的正确（也是唯一的）方式。从 application1 广播意图并在 application2 中使用适当的意图过滤器接收它没有问题。此外 - 谷歌建议这样做。您需要知道的一件事 - 您的意图过滤器应该是唯一的，并且不容易被恶意应用程序猜到想要拦截一些您不想与他们共享的私人用户数据。

# php - PHP BBcode 解析

> ID：11914764
> 
> 赞同：-2
> 
> 时间：2012-08-11T12:36:06.527
> 
> 标签：php, parsing, bbcode

> **可能重复：**
> [如何将 HTML 转换为 BBCode](https://stackoverflow.com/questions/4308734/how-to-convert-html-to-bbcode)

我该如何解析

```
<tag attr="z">
<tag attr="y">
<tag attr="x"></tag>
</tag>
</tag> 
```

到

```
<tag attr="z">
[tag=y]
<tag attr="x"></tag>
[/tag]
</tag> 
```

不使用扩展...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T12:36:43.500

PHP 可以自己处理 BBCode。**[看这里](http://il.php.net/bbcode)**

# plugins - TRAC：如何将组件/里程碑添加到 wiki 页面？

> ID：11914767
> 
> 赞同：0
> 
> 时间：2012-08-11T12:36:28.883
> 
> 标签：plugins, trac

TRAC 倾向于将 wiki 页面和工单分开很多，但肯定存在交叉引用的争论。

我知道[TagsPlugin](http://trac-hacks.org/wiki/TagsPlugin)统一了工单“关键字”和 wiki 页面的新“标签”列表。我正在寻找`component`s 和`milestone`s 的类似功能。TRAC 0.11 可以吗？如果没有，那么更新的版本呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T18:31:47.833

我是否理解正确，您请求/投票标记 Trac 资源`milestone`和`component`？这是合理的，并且可以做到，因为[TagsPlugin](http://trac-hacks.org/wiki/TagsPlugin)只需通过实现`ITagProvider`接口（即通过子类化）就可以标记任意 Trac 领域`DefaultTagProvider`，并且您可以使用 Trac db 表中的通用标记存储`tags`作为标记存储来启动和运行。

或者您的要求是否更多地是关于提供的功能

*   [ComponentsProcessorMacro](http://trac-hacks.org/wiki/ComponentsProcessorMacro) - 列出带有描述的项目组件
*   [ListMilestonesMacro](http://trac-hacks.org/wiki/ListMilestonesMacro) - 显示选定里程碑的列表
*   [MilestoneCompactMacro](http://trac-hacks.org/wiki/MilestoneCompactMacro) - 显示在紧凑表或列表中的里程碑
*   [MilestoneQueryMacro](http://trac-hacks.org/wiki/MilestoneQueryMacro) - 显示匹配里程碑的列表
*   [PlannedMilestonesMacro](http://trac-hacks.org/wiki/PlannedMilestonesMacro) - 列出按截止日期排序的里程碑

# php - 使用网络摄像头或设备摄像头拍摄照片

> ID：11914772
> 
> 赞同：0
> 
> 时间：2012-08-11T12:36:45.100
> 
> 标签：php, javascript, flash, html

你好，最近我读了很多关于这个 API 的内容`getusermedia()`，据我所知，这个 API 在最终的应用程序中使用是不可靠的。我想建立一个网页，允许用户拍摄照片或上传照片。

所以我需要替代品。从网络摄像头或设备摄像头捕捉照片的*最佳*多平台（pc/mac、ipad、iphone、android 等）方法是什么？爪哇？闪光？其他？

欢迎任何文章或教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:39:31.850

该`getUserMedia`API 目前仅[在 Chrome 和 Opera 中受支持](http://caniuse.com/#search=getusermedia)。因此，最好的多平台方法几乎肯定需要将 Flash 作为后备。因为 iOS 既不支持 Flash 也不支持`getUserMedia`API（目前），您可能需要考虑开发一个原生应用程序来支持这个平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:44:21.053

您可以使用此库集成到您的应用程序：

[http://code.google.com/p/jpegcam/](http://code.google.com/p/jpegcam/)

# objective-c - Xcode 中的奇怪错误

> ID：11914778
> 
> 赞同：0
> 
> 时间：2012-08-11T12:37:33.760
> 
> 标签：objective-c, ios, xcode

我最近在我的应用程序中更改了几行代码，结果全部搞砸了。我想在这里指出一些奇怪的错误，希望你们中的一些人知道解决方法-

首先-我在我的应用程序中实现 UITextField 的委托，将其放入那些，但当我尝试实现此方法时仍在我的 .m 文件中-

```
- (void)textFieldDidBeginEditing:(UITextField *)textField 
```

它显示此错误 - 使用未声明的标识符“textFieldDidBeginEditing”。第二和第三，有两个解析问题 - 预期的 '}' 和缺少的 '@end'。当我从红色圆圈中添加 Missing @end 并在其中添加一个白色小方块按钮时，它再次向我显示相同的错误 - 无限循环。我该如何解决这些？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T12:39:43.413

问题是实际的错误不是你（和编译器）认为的。从您收到的错误消息中推断，您的代码部分缺少一个右大括号 ( `}`)，该部分位于出错的行*之前。*

# php - 我可以安全地删除 codeigniter 中每个目录中的 index.html 文件吗？

> ID：11914783
> 
> 赞同：3
> 
> 时间：2012-08-11T12:39:05.507
> 
> 标签：php, codeigniter

我的 codeingiter Web 应用程序中目录“应用程序”和“系统”内的每个子目录都有一个 index.html 文件。在这个 HTML 文件中，有一条看似标准的错误消息。它包含以下代码：

```
<html>
    <head>
        <title>403 Forbidden</title>
    </head>
    <body>
        <p>Directory access is forbidden.</p>
    </body>
</html> 
```

我假设这些是创建的，因此如果有人试图访问“应用程序”或“系统”内的目录，它不会列出所有文件，而是会显示错误。

尽管我在每个目录中添加了一个 .htaccess 以拒绝所有访问，但这些似乎是多余的。这两个目录中的每个 PHP 文件也都有第一行：

```
if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

这应该意味着根本没有人可以查看这些文件中的任何一个（因为我一次受到 .htaccess 的保护，一次受到那行 PHP 的保护）。

因此，我的问题是 - 为了让我的 Web 应用程序井井有条，整洁有序，我可以安全地删除这些 index.html 文件吗？这会对我的 codeigniter Web 应用程序造成任何不良副作用吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T12:48:39.793

**是**的，您可以删除它们。

但即使您拥有适当的权利，您也应该拥有这些权利。因为它们只是出于目的，以防万一您忘记实施正确的目录浏览权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T12:52:15.580

就您设置的`.htaccess`文件而言，该文件没有重定向到您的文件或与您的文件没有关系`index.html`，您可以安全（且无需保留）删除您的`index.html`. 但是你应该小心。`index.html`如果您失败了，可以提供帮助`.htaccess`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:53:23.773

一般来说，您可以删除那些 index.html 文件，但您需要确保在 Web 服务器配置中禁用目录索引。

对于 Apache Web 服务器，您可以在全局配置或 .htaccess 文件中使用**Options -Indexes ，如下所示：**

```
<Directory /wwwdata/ >

    #disable directory index
    Options -Indexes

    #other options ...

</Directory> 
```

CodeIgniter 中的那些 index.html 文件会阻止（在任何情况下）目录列表，这会导致严重的安全流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T12:48:50.213

虽然我同意 .htaccess 和基本路径条件检查已经足够好，但我并不认为在两个目录中有两个 html 文件真的会使任何事情变得混乱。将东西放到网络上时，你永远不会足够小心，CodeIgniter 的人肯定会在添加它之前考虑过它。

我真的看不到任何附加值可以消除它们，但是如果这是您想要做的，请继续。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T12:50:13.803

但我建议也保留 index.html。保留 index.html 不会损害您的应用程序，但可以肯定它会起到某种保护作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T12:53:27.760

如果您说您已经禁止使用 .htaccess 访问目录，那么您可以安全地删除它们，让您的后顾之忧！

但是，如果 PHP 脚本出于某种原因使用了该目录并将某些内容放入这些目录中，然后向用户提供了一个链接，例如，它将无法正常工作，您将不得不删除您的 .htaccess 限制。

我只是建议只留下一个空白*index.html*，当用户到达目录时，只会显示一个空白页面。

*或者您可以使用index.php*强制将用户重定向到主页，例如：

```
<?php
  header("Location: ../");
?> 
```

# python - 如何点击gtk.Window？

> ID：11914785
> 
> 赞同：3
> 
> 时间：2012-08-11T12:39:13.593
> 
> 标签：python, gtk, window, pygtk

就像在统一通知上一样。set_accept_focus() 不是我需要的，而且我在 gtk.gdk 常量中看不到有用的东西......似乎我的 google-fu 失败了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T19:54:20.893

所以，答案是：

```
win.show_all()
#win.window.input_shape_combine_mask(img,0,0)
def set_mask(win):
    #b=gtk.gdk.bitmap_create_from_data(win.window,8,win.window.get_size())
    size=win.window.get_size()
    print size
    bitmap=gtk.gdk.Pixmap(win.window,size[0],size[1],1)

    cr = bitmap.cairo_create()
    cr.set_operator(cairo.OPERATOR_SOURCE)
    cr.set_source_rgba(0.0,0.0,0.0,0.0)
    cr.rectangle((0,0)+size)
    cr.fill()  

    win.window.input_shape_combine_mask(bitmap,0,0)
    print 'ready'
gobject.timeout_add(5000, set_mask, win) 
```

# java - Enum.valueOf(String) 方法从何而来？

> ID：11914792
> 
> 赞同：26
> 
> 时间：2012-08-11T12:40:08.157
> 
> 标签：java, compiler-construction, enums, value-of

在 Java SE 7（很可能是以前的版本）中，Enum 类声明如下：

```
 public abstract class Enum<E extends Enum<E>>
 extends Object
 implements Comparable<E>, Serializable 
```

Enum 类有一个带有这个签名的静态方法：

```
 T static<T extends Enum<T>> valueOf(Class<T> enumType, String name) 
```

但是没有静态方法：`valueOf(String)`在 Enum 类中定义，也没有在 Enum 所属的层次结构中向上定义。

问题是`valueOf(String)`从哪里来？它是语言的一个特性，即编译器内置的特性吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-11T12:44:39.310

此方法由编译器隐式定义。

从文档中：

> 请注意，对于特定的枚举类型 T，可以使用该枚举上隐式声明的 public static T valueOf(String) 方法而不是此方法来从名称映射到相应的枚举常量。枚举类型的所有常量都可以通过调用该类型的隐式 public static T[] values() 方法获得。

来自[Java 语言规范，第 8.9.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)：

> 此外，如果 E 是枚举类型的名称，则该类型具有以下隐式声明的静态方法：

```
/**
* Returns an array containing the constants of this enum 
* type, in the order they're declared.  This method may be
* used to iterate over the constants as follows:
*
*    for(E c : E.values())
*        System.out.println(c);
*
* @return an array containing the constants of this enum 
* type, in the order they're declared
*/
public static E[] values();

/**
* Returns the enum constant of this type with the specified
* name.
* The string must match exactly an identifier used to declare
* an enum constant in this type.  (Extraneous whitespace 
* characters are not permitted.)
* 
* @return the enum constant with the specified name
* @throws IllegalArgumentException if this enum type has no
* constant with the specified name
*/
public static E valueOf(String name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:20:33.067

我想这一定是语言的一个特点。一方面，通过制作一个来创建一个枚举，它不需要扩展枚举：

```
public enum myEnum { red, blue, green } 
```

仅此一项，就是语言功能，否则您需要这样做：

```
public class  MyEnum extends Enum { ..... } 
```

其次，方法 ,`Enum.valueOf(Class<T> enumType, String name)`必须在您使用时由编译器生成`myEnum.valueOf(String name)`。

这似乎是可能的，因为 new`Enum`既是一个语言特性，也是一个可以扩展的类。

# c# - MP3 拆分 - 输出文件没有正确的文件信息

> ID：11914794
> 
> 赞同：0
> 
> 时间：2012-08-11T12:40:20.327
> 
> 标签：c#, split, mp3, naudio

我已成功使用以下 SO 问题中的代码： [NAudio to split mp3 file](https://stackoverflow.com/questions/6094287/naudio-to-split-mp3-file) to split some test MP3s。

输入文件的比特率恒定为 198kbps。调试显示，分裂发生在正确的时间（每 120 秒）。

问题是，Windows 和音频播放器显示的文件信息不正确。比特率和文件持续时间也不同。

我需要做什么来更正输出文件中的信息？

# java - 如何在word文档中格式化Java代码

> ID：11914798
> 
> 赞同：8
> 
> 时间：2012-08-11T12:41:19.823
> 
> 标签：java

我需要编写一份报告，其中可能包含一些 Java 代码片段。我需要代码显示为彩色和行号。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-05T20:59:24.540

转到[http://hilite.me/](http://hilite.me/)并从预览窗格直接复制到 word（使用 MS Word2007 测试）。支持行号，但不是很好。非常适合片段。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T12:43:35.737

一种方法是直接从 Eclipse 复制和粘贴。它保留了所有颜色格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T12:49:17.190

**-**你可以**直接将东西从一个复制** `IDE`到你的`Word Document`.

**-**在复制代码之前，请确保您已**打开** `Line Numbering`编辑器。`IDE`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T12:51:41.463

尝试使用这个：http: [//quickhighlighter.com/](http://quickhighlighter.com/)

选择行号复制和粘贴

您还可以使用其他在线格式化工具（http://stackoverflow.com/questions/206441/online-code-beautifier-and-formatter），但如果您希望在插入 Word 文档后进行着色，请使用突出显示的来源代码 html 源代码必须是内联样式的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-21T16:51:45.753

*   **您可以使用颜色**进行复制，但首先您必须**打开所有折叠，**否则颜色会消失。

*   行编号副本在 Eclipse 中不起作用。

示例说明： [https ://cmanios.wordpress.com/2012/03/08/copypaste-source-code-from-eclipse-to-microsoft-word/](https://cmanios.wordpress.com/2012/03/08/copypaste-source-code-from-eclipse-to-microsoft-word/)

# jquery - 请告诉我是否可以使用单个 jquery 语句选择以下提到的元素

> ID：11914800
> 
> 赞同：0
> 
> 时间：2012-08-11T12:41:36.263
> 
> 标签：jquery, html

假设我们有一个名为“slide_down_div”的 div，其中包含两个 ul(lists)。我想做出以下选择：

1.  `$('#slide_down_div ul:eq(0)');` 和第二个..
2.  `$('#slide_down_div ul:eq(1)');` 我需要你的帮助

现在，在第二个语句中，我还想选择第一个和第五个 li（列表项）以便对它们应用一些样式......有没有办法？请建议。

此外，请告诉我是否可以将上述两个 jquery 语句合并为一个。

```
<ul>
    <li><img src='images/WindowsLogo.png'/>Windows</li>
    <li><img src='images/OfficeLogo.png'/>Office</li>
    <li><img src='images/OfficeLogo.png'/>Xbox</li>
    <li><img src='images/PhoneLogo.png'/>Windows Phone</li> 
    <li><img src='images/IELogo.png'/>Internet Explorer</li>
    <li><img src='images/logo_skype.png'/>Skype</li>
</ul>   

<ul>
    <li>For Home</li>
    <li>Security Essentials</li>
    <li>Microsoft Update</li>
    <li>PC Hardware</li>
    <li>PC Gaming</li>
    <li>For Work</li>
    <li>Small &amp; Medium Businesses</li>
    <li>IT Specialist Locator</li>
    <li>Enterprise</li>
    <li>Server &amp; Tools</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T12:49:49.020

```
var $first = $('#slide_down_div ul:first'); 
var $second = $('#slide_down_div ul:eq(1)');
$second.find('li:eq(0), li:eq(4)').foo() 
```

```
var $both = $('#slide_down_div').find('ul:first, ul:eq(1)') 
```

[演示](http://jsfiddle.net/7SjLE/1/)

`:lt()`选择器：

```
var $both = $('#slide_down_div ul:lt(2)') 
```

[演示](http://jsfiddle.net/7SjLE/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T12:57:00.600

您想`<li/>`为每个添加第一个和最后一个 CSS 类`<ul/>`吗？

```
<div id="slide_down_div">
    <ul class="test">
        ...
    </ul>
    <ul class="test">
        ...
    </ul>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('#slide_down_div').find('ul.test').each(function () {
            $(this).find('li:eq(0), li:eq(4)').addClass('TestClass');
            //Or
            $(this).find('li:first, li:last').addClass('TestClass');
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T12:59:51.793

获取第一个`li`中的两个第一个元素`ul`：

```
var first = $("#slide_down_div ul:eq(0) li:lt(2)")​​​​​​​​​​​​​​​​​; 
```

获取第二个中的第一个和第五个`li`元素`ul`：

```
var second = $("li:eq(0), li:eq(4)", "#slide_down_div ul:eq(1)"); 
```

将两者连接到一个选择器

```
var both = first.add(second); 
```

[**小提琴**](http://jsfiddle.net/AmPN9/)

# postgresql - 多个线程会导致受约束集的重复更新吗？

> ID：11914804
> 
> 赞同：6
> 
> 时间：2012-08-11T12:42:10.870
> 
> 标签：postgresql, transactions, isolation-level

在 postgres 中，如果我运行以下语句

```
update table set col = 1 where col = 2 
```

在默认[`READ COMMITTED`隔离级别](http://www.postgresql.org/docs/9.1/static/transaction-iso.html)下，来自多个并发会话，我保证：

1.  在单个匹配的情况下，只有 1 个线程将获得 1 的 ROWCOUNT（意味着只有一个线程写入）
2.  在多重匹配的情况下，只有 1 个线程将获得 ROWCOUNT > 0（意味着只有一个线程写入批处理）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-11T13:29:57.620

您声明的保证适用于这种简单的情况，但不一定适用于稍微复杂的查询。有关示例，请参见答案的末尾。

## 简单的案例

假设 col1 是唯一的，只有一个值“2”，或者具有稳定的顺序，因此每个都`UPDATE`以相同的顺序匹配相同的行：

这个查询会发生什么，线程将找到 col=2 的行，并且都尝试在该元组上获取写锁。其中有一个会成功。其他人将阻塞等待第一个线程的事务提交。

第一个 tx 将写入、提交并返回行数 1。提交将释放锁。

其他 tx 将再次尝试获取锁。他们会一个接一个地成功。每笔交易将依次经历以下过程：

*   在有争议的元组上获得写锁。
*   `WHERE col=2`获得锁后重新检查条件。
*   重新检查将显示条件不再匹配，因此`UPDATE`将跳过该行。
*   没有其他行，`UPDATE`因此它将报告零行更新。
*   提交，为下一次尝试获取它的 tx 释放锁。

在这个简单的情况下，行级锁定和条件重新检查有效地序列化更新。在更复杂的情况下，不是那么多。

你可以很容易地证明这一点。打开说四个 psql 会话。`BEGIN; LOCK TABLE test;`^(首先，用*)锁定表。在其余会话中运行相同`UPDATE`的 s - 它们将阻塞表级锁。`COMMIT`现在通过ting 你的第一个会话来释放锁。看他们比赛。只有一个会报告行数为 1，其他人会报告 0。这很容易自动化并编写脚本以重复并扩展到更多连接/线程。

要了解更多信息，请阅读[PostgreSQL 并发问题](http://www.postgresql.org/files/developer/concurrency.pdf)的第 11 页[并发写入规则](http://www.postgresql.org/files/developer/concurrency.pdf#page=11)- 然后阅读该演示文稿的其余部分。

## 如果 col1 不是唯一的？

正如凯文在评论中指出的那样，如果`col`不是唯一的，因此您可能会匹配多行，那么不同的执行`UPDATE`可能会得到不同的排序。如果他们选择不同的计划（比如一个是通过 a `PREPARE`，`EXECUTE`另一个是直接的，或者你在搞乱`enable_`GUC）或者他们都使用的计划使用不稳定的等值，就会发生这种情况。如果他们以不同的顺序获取行，则 tx1 将锁定一个元组，tx2 将锁定另一个元组，然后他们将各自尝试锁定彼此已经锁定的元组。PostgreSQL 会以死锁异常中止其中一个。*这也是为什么您的所有*数据库代码都应该*始终*准备好重试事务的另一个很好的理由。

如果您小心确保 concurrent`UPDATE`始终以相同的顺序获取相同的行，您仍然可以依赖答案第一部分中描述的行为。

令人沮丧的是，PostgreSQL 没有提供`UPDATE ... ORDER BY`，因此确保您的更新始终以相同的顺序选择相同的行并不像您希望的那么简单。A`SELECT ... FOR UPDATE ... ORDER BY`后跟一个单独`UPDATE`的通常是最安全的。

## 更复杂的查询、排队系统

如果您正在执行具有多个阶段的查询，涉及多个元组或除相等之外的条件，您可能会得到与串行执行结果不同的令人惊讶的结果。特别是，任何类似的并发运行：

```
UPDATE test SET col = 1 WHERE col = (SELECT t.col FROM test t ORDER BY t.col LIMIT 1); 
```

或其他构建简单“队列”系统的努力*将**失败*按您的预期工作。有关更多信息，请参阅[有关并发的 PostgreSQL 文档](http://www.postgresql.org/docs/9.1/static/mvcc.html)和[此演示文稿](http://www.postgresql.org/files/developer/concurrency.pdf)。

如果您想要一个由数据库支持的工作队列，那么有经过充分测试的解决方案可以处理所有令人惊讶的复杂极端情况。最受欢迎的之一是[PgQ](http://wiki.postgresql.org/wiki/SkyTools#PgQ)。有一篇关于该主题的有用[PgCon 论文，](http://www.pgcon.org/2008/schedule/events/79.en.html)[谷歌搜索“postgresql queue”](http://google.com/?q=postgresql+queue)充满了有用的结果。

* * *

^* *顺便说一句，`LOCK TABLE`您可以使用而不是 a`SELECT 1 FROM test WHERE col = 2 FOR UPDATE;`来获取元组上的写锁。这将阻止针对它的更新，但不会阻止对其他元组的写入或阻止任何读取。这使您可以模拟不同类型的并发问题。*

# box-api - Box Rest API：登录后获取用户信息

> ID：11914805
> 
> 赞同：0
> 
> 时间：2012-08-11T12:42:11.920
> 
> 标签：box-api

我知道执行此调用后验证用户和获取用户信息的步骤：

`GET https://www.box.com/api/1.0/rest?action=get_auth_token&api_key={your api key}&ticket={your ticket}`

但我真正想要的是在执行某些操作（例如上传新文件）后获取用户信息，特别是用户配额：

```
<space_amount>1234567</space_amount>
<space_used>1234</space_used> 
```

有没有办法在不再次调用“get_auth_token”的情况下获得最新的用户配额？据我了解，“get_auth_token”将生成我想避免的新 auth_token。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:31:13.897

v2 API 中还没有完全等效的方法。但是您可以利用 v1 API 中的[get_account_info 方法](http://developers.box.net/w/page/12923928/ApiFunction_get_account_info)来检索此信息。

# dynamic-linking - VC6 项目缺少 msvcp71d.dll？

> ID：11914806
> 
> 赞同：0
> 
> 时间：2012-08-11T12:42:19.230
> 
> 标签：dynamic-linking, visual-c++-6, msvcrt

我已经搜索了一段时间，我了解到 msvcp71d.dll 用于.Net 2003 的动态链接-调试-CRT 库？

现在该项目将在 VS.net 2003 或 VC6 中使用，这就是自述文件中所写的内容。所以我在 VC6 中打开了项目（我更习惯于 C++），我不明白为什么它需要（在调试时）71d 的 dll，不应该要求 msvcpd.dll 或 msvcp60d.dll ?

我认为该项目被链接到错误的 CRT 库，可能是由于被转换为 VC.net 2003 。所以我想知道是否有办法将项目链接回VC6的旧CRT库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T12:51:05.390

您需要将链接器指向您要使用的正确库。

.libs 总是一对： - 一个大的静态库或 - 一个在执行时需要 dll 的小库，每个小库都与一个特定的 dll 相关。所以你需要问链接器：请使用这个mylib..v6...lib，所以我在执行时需要相应的mylib..6...dll。

# elasticsearch - 对 ElasticSearch 中的文档数进行基本排序

> ID：11914813
> 
> 赞同：1
> 
> 时间：2012-08-11T12:43:02.893
> 
> 标签：elasticsearch

我在 ES 索引中保存用户关系

IE

{'id' => 1, 'User_id_1' => '2001', 'relation' => '朋友', 'User_id_2' => '1002'} {'id' => 2, 'User_id_1' => '2002 ', '关系' => '朋友', 'User_id_2' => '1002'}

{'id' => 3, 'User_id_1' => '2002', 'relation' => '朋友', 'User_id_2' => '1001'} {'id' => 4, 'User_id_1' => '2003 ', '关系' => '朋友', 'User_id_2' => '1003'}

不，我想得到拥有最多朋友的 user_id_2，

在上述情况下，它的 1002 是 2001，而 2002 是它的朋友。（计数 = 2）

我只是无法弄清楚查询

谢谢。

编辑：

正如@imotov 所建议的那样，术语方面是非常好的选择，但是

我遇到的问题是 2 个索引

第一个索引用于保存主要文档，第二个索引用于保存关系

现在的问题是

假设我的主索引中有 100 个 USER Docs，其中只有 50 个建立了关系，所以我的关系索引中只有 50 个 USER Docs

因此，当我实现“术语方面”时，它会对结果进行排序并给出我想要的正确输出，但我错过了那些还没有任何关系的剩余 50 个用户，我需要在 50 个排序后的最终输出中使用它们用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:14:02.950

首先，我们需要确保 ES 中保存的关系是唯一的。可以通过将任意 id 替换为由 user_id_1、relation 和 user_id_2 构造的 id 来完成。我们还需要确保 user_ids 的分析器不会产生多个令牌。如果 id 是字符串，它们必须被索引 not_analyzed。在满足这两个条件的情况下，我们可以简单地对由relation:friend限制的结果列表中的字段user_id_2使用[terms facet查询。](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)此查询将检索按索引中出现次数排序的前 user_id_2 id。总而言之，它可能看起来像这样：

```
curl -XPUT http://localhost:9200/relationships -d '{
    "mappings" : {
        "relation" : {
            "_source" : {"enabled" : false },
            "properties" : {
                "user_id_1": { "type": "string", "index" : "not_analyzed"},
                "relation": { "type": "string", "index" : "not_analyzed"},
                "user_id_2": { "type": "string", "index" : "not_analyzed"}
            }
        }
    }
}'

curl -XPUT http://localhost:9200/relationships/relation/2001-friend-1002 -d '{"user_id_1": "2001", "relation":"friend", "user_id_2": "1002"}'
curl -XPUT http://localhost:9200/relationships/relation/2002-friend-1002 -d '{"user_id_1": "2002", "relation":"friend", "user_id_2": "1002"}'
curl -XPUT http://localhost:9200/relationships/relation/2002-friend-1001 -d '{"user_id_1": "2002", "relation":"friend", "user_id_2": "1001"}'
curl -XPUT http://localhost:9200/relationships/relation/2003-friend-1003 -d '{"user_id_1": "2003", "relation":"friend", "user_id_2": "1003"}'
curl -XPOST http://localhost:9200/relationships/_refresh
echo

curl -XGET 'http://localhost:9200/relationships/relation/_search?pretty=true&search_type=count' -d '{
  "query": {
    "term" : {
      "relation" : "friend"
    }
  },
  "facets" : {
      "popular" : {
          "terms" : {
              "field" : "user_id_2"
          }
      }
  }
}' 
```

请注意，由于构面计算的分布式特性，如果使用多个分片，构面查询报告的计数可能低于实际记录数。请参阅[弹性搜索问题 1832](https://github.com/elasticsearch/elasticsearch/issues/1832)

编辑：

编辑后的问题有两种解决方案。一种解决方案是在两个字段上使用 facet：

```
curl -XPUT http://localhost:9200/relationships -d '{
    "mappings" : {
        "relation" : {
            "_source" : {"enabled" : false },
            "properties" : {
                "user_id_1": { "type": "string", "index" : "not_analyzed"},
                "relation": { "type": "string", "index" : "not_analyzed"},
                "user_id_2": { "type": "string", "index" : "not_analyzed"}
            }
        }
    }
}'
curl -XPUT http://localhost:9200/users -d '{
    "mappings" : {
        "user" : {
            "_source" : {"enabled" : false },
            "properties" : {
                "user_id": { "type": "string", "index" : "not_analyzed"}
            }
        }
    }
}'

curl -XPUT http://localhost:9200/users/user/1001 -d '{"user_id": 1001}'
curl -XPUT http://localhost:9200/users/user/1002 -d '{"user_id": 1002}'
curl -XPUT http://localhost:9200/users/user/1003 -d '{"user_id": 1003}'
curl -XPUT http://localhost:9200/users/user/1004 -d '{"user_id": 1004}'
curl -XPUT http://localhost:9200/users/user/1005 -d '{"user_id": 1005}'
curl -XPUT http://localhost:9200/relationships/relation/2001-friend-1002 -d '{"user_id_1": "2001", "relation":"friend", "user_id_2": "1002"}'
curl -XPUT http://localhost:9200/relationships/relation/2002-friend-1002 -d '{"user_id_1": "2002", "relation":"friend", "user_id_2": "1002"}'
curl -XPUT http://localhost:9200/relationships/relation/2002-friend-1001 -d '{"user_id_1": "2002", "relation":"friend", "user_id_2": "1001"}'
curl -XPUT http://localhost:9200/relationships/relation/2003-friend-1003 -d '{"user_id_1": "2003", "relation":"friend", "user_id_2": "1003"}'
curl -XPOST http://localhost:9200/relationships/_refresh
curl -XPOST http://localhost:9200/users/_refresh
echo

curl -XGET 'http://localhost:9200/relationships,users/_search?pretty=true&search_type=count' -d '{
    "query": {
        "indices" : {
          "indices" : ["relationships"],
          "query" : {
              "filtered" : {
                  "query" : {
                      "term" : {
                          "relation" : "friend"
                      }
                  },
                  "filter" : {
                      "type" : {
                          "value" : "relation"
                      }
                  }
              }
          },
          "no_match_query" : {
              "filtered" : {
                  "query" : {
                      "match_all" : { }
                  },
                  "filter" : {
                      "type" : {
                          "value" : "user"
                      }
                  }
              }

          }      
        }
    },
    "facets" : {
        "popular" : {
          "terms" : {
              "fields" : ["user_id", "user_id_2"]
          }
        }
    }
}' 
```

另一种解决方案是在创建用户时为每个用户的关系索引添加“自我”关系。我更喜欢第二种解决方案，因为它似乎不那么复杂。

# c# - `unsafe` 在 Java 和 C# 中的表现

> ID：11914818
> 
> 赞同：2
> 
> 时间：2012-08-11T12:43:45.703
> 
> 标签：c#, java, performance, image-processing, unsafe

我正在尝试学习数字图像处理，我发现我的朋友使用 c#。他使用C#有一个很重要的原因：`unsafe`c#中有关键字，他的代码（算法部分）的性能可以达到c++相同代码的75%，这对他来说已经足够好了。

他鼓励我转向 c#，但我是多年的 java 程序员。我知道`Unsafe`java中也有一个类，但我从未使用过它，不确定性能是否与C#一样好。

所以我想知道在java中的性能，`Unsafe`用java进行图像处理是不是一个好主意？

* * *

**更新**

只是将不安全的代码用于一些性能感知任务，而不是在任何地方使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:07:18.407

不安全意味着您可以避免托​​管环境中的所有开销。所有范围和类型检查、垃圾收集、反射等。您的代码是否会更快使用 unsafe 都取决于您编写的内容。我敢说主要的优化点将是处理大块原始内存，而不是说 OO 会引导你走向的像素类或结构的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T13:11:12.557

我喜欢 C#，但是因为一个功能范围非常有限而选择一种语言而不是另一种语言，这对我来说似乎是一个非常薄弱的​​论据。不要根据您朋友的意见选择语言，而是根据您的需求和偏好！编程语言只是一种工具。你会像那样认真地抛弃多年的经验吗？使用您最熟悉的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:03:23.587

[检查这个讨论它在这里](https://stackoverflow.com/questions/5574241/interesting-uses-of-sun-misc-unsafe)提出了关于它的优点和缺点

虽然这篇文章取自 C# 文章，但我认为它也适用于 Java - 在不安全代码或换句话说非托管代码中[检查这里是可以声明和使用指针的。](http://www.codeproject.com/Articles/1099/Writing-Unsafe-code-using-C)但问题是我们为什么要编写非托管代码？如果我们想要编写与操作系统接口的代码，或者想要访问内存映射设备或者想要实现时间关键算法，那么使用指针可以带来很多好处。

但是使用指针也有一些缺点。如果在编译时将指针选择为 32 位数量，则代码将被限制为 4gig 的地址空间，即使它在 64 位机器上运行也是如此。如果在编译时将指针选择为 64 位，则代码无法在 32 位机器上运行。

# javascript - 提交时加载 url 的下拉表单

> ID：11914829
> 
> 赞同：0
> 
> 时间：2012-08-11T12:45:31.410
> 
> 标签：javascript, forms, url

I am trying to make a basic drop down forum which when options are selected they will load a URL on a submit button click.

我想要这样的东西

下拉一个

自行车品牌：KTM BMW Ect

自行车型号：（如果上面选择了 ktm 会显示）990 EXC Ect

（如果上面选择的宝马会显示）GS Adventure Ect

因此，如果自行车的品牌是 ktm 并且型号是 990，点击提交按钮将加载 Www.website.com/ktm/990

这是我拥有的代码，我已经对拣选部分进行了排序，所以如果您选择 KTM，它会向您显示 KTM 的型号，并且与 BMW 相同，唯一的问题是我根本无法让 URL 正常工作并且不知道该怎么做它。

```
<script language="javascript" type="text/javascript">
<!--
 function setOptions(chosen) {
var selbox = document.myform.model;

selbox.options.length = 0;
if (chosen == " ") {
  selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');

}
if (chosen == "BMW") {
  selbox.options[selbox.options.length] = new
Option('R1200-GS-Adventure','R1200-GS-Adventure');
  selbox.options[selbox.options.length] = new
Option('R1200-GS','R1200-GS');
  selbox.options[selbox.options.length] = new
Option('R1200-RT','R1200-RT');
  selbox.options[selbox.options.length] = new
Option('1150-GS-Adventure','1150-GS-Adventure');
  selbox.options[selbox.options.length] = new
Option('1150-GS','1150-GS');
}
if (chosen == "KTM") {
  selbox.options[selbox.options.length] = new
Option('990','990');
  selbox.options[selbox.options.length] = new
Option('640','640');
}
if (chosen == "Yamaha") {
  selbox.options[selbox.options.length] = new
Option('Tenére 660XT','Tenére 660XT');
  selbox.options[selbox.options.length] = new
Option('Super Tenére 1200XT','Super Tenére 1200XT');
}
}
// -->
</script> 
```

和表格代码

```
 <form name="myform"><div align="center">
<select name="bike" size="1"
onchange="setOptions(document.myform.bike.options[document.myform.bike.selectedIndex].value);">
<option value=" " selected="selected"> </option>
<option value="BMW">BMW</option>
<option value="KTM">KTM</option>
<option value="Yamaha">Yamaha</option>
</select><br> <br>
<select name="model" size="1">
<option value=" " selected="selected">Please select one of the options above first</option>
</select>
<input type="button" name="go" value="Search"
onclick="alert(document.myform.model.options[document.myform.model.selectedIndex].value);">
</div></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:01:34.493

`location = "<new URL>"`您可以使用所选选项的简单连接来创建 URL，并通过在按钮单击处理程序中进行设置来重定向到所选页面：

```
onclick="location='http://www.website.com/' + myform.bike.options[myform.bike.selectedIndex].value + '/' + myform.model.options[myform.model.selectedIndex].value;" 
```

如果您需要有效的解决方案，请告诉我。

您还应该检查以确保用户在允许单击按钮之前已在自行车下拉列表中选择了某些内容。否则 URL 将无效。

编辑：这是一个显示完整解决方案的 JSFiddle：http: [//jsfiddle.net/V8jPn/1/](http://jsfiddle.net/V8jPn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:23:46.160

将此函数添加到您的脚本中

Javascript：

```
function loadURL(){

    var bike = document.myform.bike.options[document.myform.bike.selectedIndex].value;
    var model = document.myform.model.options[document.myform.model.selectedIndex].value;

    if(bike != ' ' && model != ' '){

        var url = 'http://YOURWEBSITE.com/' + bike + '/' + model;
        window.location = url;

    }//if

} 
```

并将其设为您的提交按钮

HTML

```
<input type="button" name="go" value="Search" onclick="loadURL();"> 
```

# lua - 如何在电晕中创建覆盖流？

> ID：11914836
> 
> 赞同：0
> 
> 时间：2012-08-11T12:46:36.653
> 
> 标签：lua, coronasdk

我是新的 corona sdk，有兴趣在 corona sdk 工作。我不知道要像下面的图片那样创建封面流程。任何人都可以帮助我喜欢那个谢谢 ![Cover Flow功能](../Images/095fe720038e47aaf7c35fc0188c5f4a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T10:36:30.427

鉴于您现在所处的位置，您的问题太复杂，无法在单个 StackOverflow 答案中回答。相反，我将为您提供您需要遵循的高级步骤。

1.  从学习 Lua 语言开始，如果你还不知道的话。[Lua 编程](http://www.lua.org/pil/)是一个很好的免费资源。
2.  下一步是学习如何使用 Corona 在屏幕上放置图像。
3.  然后学习如何使用 Corona 在屏幕上放置多个图像。
4.  然后学习如何使用手指让它们“左右滚动”。
5.  您还需要学习如何让每张图片对触摸事件做出“反应”。
6.  最后，学习如何为图像“添加透视”，这样你就可以在侧面做效果了。

然后你将有一个工作封面流程。

分别尝试每个步骤。如果您卡在某个步骤中，请为它打开一个新问题。例如，如果您在第 3 步上遇到困难，请创建一个与此类似的问题：

> **如何在 Corona SDK 中向左/向右滚动图片库？**
> 
> 我正在尝试在 Corona SDK 中创建一个封面流。我一直试图让图像左右滚动。我试过这段代码[把代码放在这里]，但它不起作用，因为我看到了[你看到的]。我希望它[您希望它做什么]

祝你好运！

# lua - luajit2进程之间的通信？

> ID：11914838
> 
> 赞同：1
> 
> 时间：2012-08-11T12:47:08.013
> 
> 标签：lua, luajit

我可以在同一台机器上轻松启动两个或多个单独的 Lua 程序（在 LuaJIT2 上运行）。但是这些程序有什么方法可以交流吗？

我能想到的最好的解决方案是每个程序都可以编写一个程序可以读取的文本文件。但这是非常缓慢的解决方案（即使文本文件保存在虚拟 RAM 磁盘上）。

我知道thera是zeromq和其他可能对此有所帮助的东西......问题是指令太长而且复杂/令人困惑（至少对我来说）。

有什么建议吗？尤其是一些*工作*代码示例，无论多么简单，都会受到赞赏。甚至如何将一个变量的值从一个 LuaJIT2 进程传递到另一个。

（我使用的是 Windows XP SP3，如果这很重要的话......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:53:19.030

本质上，您应该寻找的关键字是“IPC”（进程间通信）。

您可能想要探索的一些选项：

*   共享文件
*   共享内存
*   网络套接字
*   管道（在 POSIX 系统上）
*   利用上述之一的中间件

我真的不能说其中之一是*最好*的。选择将取决于您未提供的其他因素（所需的速度、延迟、您想要交流的内容）。我只是希望我为您指明了正确的方向。

另外，如果 ZeroMQ 太复杂，我强烈建议您多阅读，而不是寻找更简单的代码示例。Lua 是“自己动手”的语言。

如果您不是真的坚持使用 Lua，请查看 PyRo（Python 远程对象）。或者你可能想自己实现这样的东西。

# android - 单击通知时未打开对话框

> ID：11914839
> 
> 赞同：0
> 
> 时间：2012-08-11T12:47:12.707
> 
> 标签：android, dialog, notifications

我试图在单击通知时打开对话框，但无法执行此操作：

这是我的代码：

```
Intent in = new Intent(context, SnoozeEvent.class);
    in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent Sender = PendingIntent.getBroadcast(context, 0, intent, 0);
    manager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
    notification = new Notification(R.drawable.icon, "Wake up alarm", System.currentTimeMillis());
    notification.setLatestEventInfo(context, "Hanuman Chalisa", "Wake Up...", Sender);
    manager.notify(1, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T21:33:15.050

错误是您将 PendingIntent 指向一个不存在的意图（它指向一个名为“intent”的意图 - 您创建了一个名为“in”的意图）。

替换以下行：

```
PendingIntent Sender = PendingIntent.getBroadcast(context, 0, intent, 0); 
```

有了这个（所以它指向您创建的意图）：

```
PendingIntent Sender = PendingIntent.getBroadcast(context, 0, in, 0); 
```

如果你这样做，那么一切都应该正常。

# javascript - 闭包中的 clearTimeout

> ID：11914840
> 
> 赞同：0
> 
> 时间：2012-08-11T12:47:16.463
> 
> 标签：javascript, jquery

我创建了一个具有以下结构的 jquery 插件：

```
(function($){

var timer_handle, i = 5 ;

 $.my_plugin = function(){
  return{
    // provide $.my_plugin.reset() public method to reset
    reset : function(){ clearTimeout(timer_handle); }
  }
}();

 $.fn.my_plugin = function(){

    // init codes ...

    function tick(){
      i -= 1;
      console.log(i+'sec elapsed');
      if(i == 0){
      console.log('time over');   
      $.my_plugin.reset();
      }
        timer_handle = setTimeout(tick, 1000);
    }
    tick();
 }
 })(jQuery);

$('body').my_plugin(); 
```

当我在控制台看到时，经过 0 秒后，计数器仍在负数运行，即 setTimeout 尚未清除。正如我检查的那样，公共方法 $.my_plugin.reset(); 从外部调用清除计时器，但在滴答关闭内部调用的 $.my_plugin.reset() 不会清除计时器。

**这种情况的解决方案可能是什么？？？？？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:57:39.400

因为您是`$.my_plugin.reset();`从函数*内部*调用，所以`tick()`没有超时清除。先前安排的超时已经发生，这`tick()`就是执行的原因。（这与代码是否在闭包中无关。）

`i`相反，如果已达到，请不要设置下一个超时`0`：

```
function tick(){
  i -= 1;
  console.log(i+'sec elapsed');
  if(i == 0){
    console.log('time over');
  } else {
    timer_handle = setTimeout(tick, 1000);
  }
} 
```

如果您要从*外部*`$.my_plugin.reset();`的其他代码调用，*则*会有一个可以清除的未完成超时，因此它将再次停止运行。 *`tick()` *`tick()`**

 **请注意，在立即调用的匿名函数中声明您的`timer_handle`和`i`变量意味着对插件的所有调用都将访问这些相同的变量，因此如果您同时针对页面上的多个元素运行插件，您将获得不正确的行为。**

# c++ - 将 const 成员函数强制转换为非常量

> ID：11914845
> 
> 赞同：5
> 
> 时间：2012-08-11T12:48:29.917
> 
> 标签：c++, casting, constants

是否强制转换`const`C++ 中定义的成员函数指针？以下是有效代码吗？

```
struct T {
  void foo(int i) const { std::cout << i << std::endl;};
};

void (T::*f1)(int) const = &T::foo;
void (T::*f2)(int)       = reinterpret_cast<void (T::*)(int)>(f1);
T t;
(t.*f2)(1); 
```

**更新：**

我需要这个的原因是我正在编写一个函数，它接受一个对象和一个指向该对象的成员函数指针。我需要一个用于 const 对象的版本（只接受 const 函数）和一个普通的版本。由于我不想要重复的代码，我的想法是将实际代码放在非常量版本中并从 const 版本中调用它，丢弃任何 const。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:10:25.397

编译器吃掉它。但是向后转换更有用。

再一次但是 - 最好不要使用它， const_cast 通常只是一个快速而肮脏的解决方案，只有在没有任何其他解决方案时才应用它。

**回答更新**

如果我理解正确，您将使用一个对象和两个函数。第一个函数接受 const 对象和 const 成员函数，第二个 - 非常量对象和非常量成员函数。

根据给定的信息，您可以更改第二个函数以接受非常量对象和 const 成员函数。并给他们一个非常量对象及其 const 成员函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:05:41.470

是的，它已定义，但如果函数真的是 const，你可能不想要它，因为一些编译器优化（即返回值缓存）依赖于函数是 const。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:27:52.660

可以，但是没有意义，哪里可以调用f2，也可以调用f1。你应该以另一种方式投射。但是如果有的话，你应该转换对象，而不是函数。

```
void (T::*f1)(int) const = &T::foo;
void (T::*f2)(int)       = reinterpret_cast<void (T::*)(int)>(f1);
T t;
(t.*f2)(1); // compiles
(t.*f1)(1); // this compiles too!! 
```

但如果你有

```
const T t;
(t.*f2)(1); // error t is const
(t.*f1)(1); // still compiles 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T02:39:15.297

解决歧义的唯一方法是执行 static_cast，这基本上是一种语言功能

```
#include <boost/typeof/typeof.hpp>
struct Test
{
    const int& foo();
    const int& foo() const;
};

int main()
{
    typedef const int&(Test::*non_const_ptr)();
    typedef const int&(Test::*const_ptr)()const;
    BOOST_TYPEOF(static_cast<non_const_ptr>(&Test::foo)) ss;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-11T13:09:02.637

我看不出这样做的理由：即使你可以，你也会使其更具限制性。假设你有一个类 Foo：

```
class Foo {
  void f() const;
  void g();
} 
```

还有一些代码片段：

```
Foo a;
const Foo b; 
```

然后你可以同时调用`a.f()`and `a.g()`，但不能`b.g()`因为`b`is `const`。如您所见，放在`const`成员函数之后会减少限制，而不是增加限制。

而且，通过`reinterpret_cast`ing 这个指针，您将获得具有完全相同值的指针（由于 的性质`reinterpret_cast`），如果您尝试调用它，您将进入相同的 T::foo()

# iphone - 为什么我在定义方法后会收到“无法识别的选择器发送到实例”错误？

> ID：11914851
> 
> 赞同：0
> 
> 时间：2012-08-11T12:49:23.347
> 
> 标签：iphone, ios, xcode, unrecognized-selector

我正在 Xcode (4.4.1) 上构建一个 iOS (5.1) 应用程序，我几乎完成了第一阶段的开发，但我被困在最后一行代码上。我一直在使用 Kumulos 作为后端和 API 解决方案，目前所有 API 都运行良好，除了这一点：

```
Kumulos* k = [[Kumulos alloc]init];
[k setDelegate:self];
[k createNewTimePointWithJourneyIDFK:[journeyID integerValue]
    andTime:currentDate andLat:[lat floatValue] andLon:[lon floatValue]]; 
```

当它遇到 createNewTimePointWithJourneyIDFK: 方法时，它会终止。在日志中它提到了这个方法，并说一个无法识别的选择器被发送到一个实例。

现在我意识到这个问题已经在 SO 上被问了一百万次，但我已经 1）检查了该方法是否已定义，以及 2）它是否已正确调用（或至少据我所知）。我完成上述的方式就是我完成其余 API 调用的方式，它们运行良好，所以我看不出问题出在哪里。非常令人沮丧，我在最后一行花了几个小时！所以请不要以为我在几分钟不知道该怎么做之后就听到了。

**错误信息**

```
2012-08-11 22:36:58.769 busApp4Kumulos[5485:707] -[Kumulos
createNewTimePointWithJourneyIDFK:andTime:andLat:andLon:]:
unrecognizedselector sent to instance 0x3d1b70 2012-08-11 22:36:58.778
busApp4Kumulos[5485:707]
*** Terminating app due to uncaught exception
'NSInvalidArgumentException', reason: '-[Kumulos
createNewTimePointWithJourneyIDFK:andTime:andLat:andLon:]:
unrecognized selector sent to instance 0x3d1b70'
*** First throw call stack:
(0x35add88f 0x37e84259 0x35ae0a9b 0x35adf915 0x35a3a650 0x3ef5
0x37f86de3 0x37f86785 0x37f80e3f 0x35ab1b01 0x35ab112f 0x35ab0351
0x35a334a5 0x35a3336d 0x376cf439 0x3353fcd5 0x2dd9 0x2d74)
terminate called throwing an exception(lldb) 
```

**方法**

它位于 Kumulos.m 文件中。

```
-(KSAPIOperation*) createNewTimePointWithJourneyIDFK:(NSInteger)journeyIDFK
     andTime:(NSDate*)time andLat:(float)lat andLon:(float)lon{

 NSMutableDictionary* theParams = [[NSMutableDictionary alloc]init];
        [theParams setValue:[NSNumber numberWithInt:journeyIDFK] forKey:@"journeyIDFK"];
                [theParams setValue:time forKey:@"time"];
                [theParams setValue:[NSNumber numberWithFloat:lat] forKey:@"lat"];
                [theParams setValue:[NSNumber numberWithFloat:lon] forKey:@"lon"];

KSAPIOperation* newOp = [[KSAPIOperation alloc]initWithAPIKey:theAPIKey
     andSecretKey:theSecretKey andMethodName:@"createNewTimePoint"
     andParams:theParams];
[newOp setDelegate:self];
[newOp setUseSSL:useSSL];

//we pass the method signature for the kumulosProxy callback on this thread

[newOp setCallbackSelector:@selector( kumulosAPI: apiOperation: createNewTimePointDidCompleteWithResult:)];
[newOp setSuccessCallbackMethodSignature:[self methodSignatureForSelector:@selector(apiOperation: didCompleteWithResult:)]];
[newOp setErrorCallbackMethodSignature:[self methodSignatureForSelector:@selector(apiOperation: didFailWithError:)]];
[opQueue addOperation:newOp];

return newOp;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:11:52.080

我唯一能想到的就是你的项目中有些东西过时了。您是否尝试过清洁（通过*Product* → *Clean*）和重建？

# xpages - xpage app中适当使用.recycle

> ID：11914856
> 
> 赞同：4
> 
> 时间：2012-08-11T12:50:01.587
> 
> 标签：xpages

我已经看到了一些关于使用 .recycle 来确保 xPage 没有内存问题的参考资料，但是我不确定应该如何以及在何处使用它。我检查了 mastering xpages 书，并没有找到任何具体的参考资料。我怀疑这对于那些有 java 背景的人来说可能更明显。

当有人登录应用程序、在 xpage 之间导航时是否应该使用它？这种使用的含义是什么？它会清除当前会话，还是用户存储的 sessionScope 变量？它是用户特定的吗？

一个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T18:13:48.980

只有 domino java 对象需要回收，而不是 XPage 特定的问题。当你不再需要它时，你应该回收每一个多米诺骨牌，这是黄金法则。

Domino 对象包括 NotesSession、NotesDatabase 等。它们在内部作为 C 对象访问，这就是手动“销毁”它们很重要的原因。如果您在代码中直接访问这些对象的类型，则必须自己回收它们。特定于 XPage 的对象（如作用域变量）是纯 Java 代码，将被垃圾收集器正确杀死。

有关更多详细信息，请查看此技术说明：[为什么对每个 Java 对象使用 Recycle() 方法很重要](http://www-01.ibm.com/support/docview.wss?uid=swg21097861)

# websocket - Websockets 抽象/兼容性

> ID：11914857
> 
> 赞同：0
> 
> 时间：2012-08-11T12:50:07.497
> 
> 标签：websocket

由于 Websockets 现在并不总是被实现，一些库试图通过例如 Flash 插件来规避这一点。但是，这并不总是可用的，并且框架中也有与 Ajax 连接类似的 Websocket 功能。但是，是否有符合 Websocket 标准的抽象库在任何情况下都提供可靠的 Websocket？例如。跨浏览器，防火墙安全等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:11:11.433

[Socket.IO](http://socket.io/)可能是最接近的东西。Node.js 中有一个主服务器实现，但 Socket.IO 也可以被认为是一个更高级别的协议层，它可以在下面使用各种传输（首选 WebSockets），因此还有其他 Socket.IO 服务器的实现其他语言。

# ssl - 购买并安装了 ssl 证书，但仍标识为 *.herokuapp.com

> ID：11914858
> 
> 赞同：3
> 
> 时间：2012-08-11T12:50:08.637
> 
> 标签：ssl, heroku, dnsimple

我按照这里的信中的说明进行操作 - [https://devcenter.heroku.com/articles/ssl-certificate](https://devcenter.heroku.com/articles/ssl-certificate) - 他们很有帮助，特别是因为 DNSimple 是我选择的注册商。据我所知，我已经启动并运行了所有东西，购买了证书（通过 DNSimple 和 RapidSSL），结合了 crt 和 CA 包，并通过 heroku 客户端发送了它们：

```
$ heroku ssl
www.website.com has a SSL certificate registered to /serialNumber=…
website.com has a SSL certificate registered to /serialNumber=… 
```

但是当我访问我的应用程序（我什至重新启动它们）时，它们仍在使用 *.herokuapp.com 的证书。有什么我错过的吗？为什么会出现 *.herokuapp.com？

从顶部开始，以下是相关方提供给我的作品。

*   来自 DNSimple（在证书详细信息页面上）：*私钥*
*   来自 DNSimple（在证书详细信息页面上）：*证书*
*   从 RapidSSL 的 CA 下载页面（*从*DNSimple 链接）：*[CA 捆绑包“pem”](https://knowledge.rapidssl.com/library/VERISIGN/ALL_OTHER/RapidSSL%20Intermediate/RapidSSL_CA_bundle.pem)*
*   来自 RapidSSL / Geotrust 发送的电子邮件：*Web 服务器证书*
*   来自 RapidSSL / Geotrust 发送的电子邮件：*中级 CA*

我想“私钥”是我在`heroku ssl:add`舞蹈的第二部分需要的：`heroku ssl:add site.pem private.key`

但是，当我将要发送的第一个文件的“pem”文件放在一起时，我似乎做错了`heroku ssl:add`。在上面的部分中-需要结合什么才能使其起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-15T02:48:34.657

我知道这个问题很老，但我只是遇到了同样的问题并找到了答案，至少在我的情况下。

我的 DNS 指向 my-app.herokapp.com，但 SSL 端点不同。您可以像这样找到 SSL 端点：

```
$ heroku certs
Endpoint                  Common Name(s)                Expires               Trusted
------------------------  ----------------------------  --------------------  -------
osaka-5565.herokussl.com  www.example.com, example.com  2014-05-18 09:32 UTC  True 
```

您的端点将与此不同。更改 CNAME 和/或 ALIAS 记录以指向 SSL 端点后，您将获得自己的证书，而不是 herokuapp 通配符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T16:11:12.373

确保您没有查看裸域名，Heroku 上的 SSL 不支持 https://yourwebsite.com，而[https://www.yourwebsite.com](https://yourwebsite.com)[支持](https://www.yourwebsite.com)。

如果这最终成为问题，您必须确保裸域名重定向到像 www 这样的子域。

# android - sqlite查询检索所有不为空的行

> ID：11914860
> 
> 赞同：4
> 
> 时间：2012-08-11T12:50:28.813
> 
> 标签：android

美好的一天，我在这里有两个问题：

首先是背景资料。

从 android 文档中，查询数据库时，我们必须返回一个名为“_id”的列，以便它与游标适配器一起使用。现在在我的实现中，假设我有 3 列“_id”、“column A”、“column B”。

所以如果我的数据库表中有 8 个条目行，其中 A 列中的第 3 行被填充，B 列中接下来的 5 行被填充。如果我在数据库中查询 B 列并在我的 bindview 中使用下面的代码，则光标返回所有行，这将导致前 3 个条目为空，最后 5 个项目显示在我的图像网格视图中。

这是我的绑定视图：

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
     ViewHolder holder = (ViewHolder)view.getTag();
 int columnIndex = cursor.getColumnIndexOrThrow(columnName);
 final String name = cursor.getString(columnIndex);
     while(cursor.moveToNext()){

            if(name != null){
             Log.d(TAG, "string name in gridimageadapter is " + name);

             BitmapFactory.Options options = new BitmapFactory.Options();
             Bitmap bitmap = BitmapFactory.decodeFile(name);

             Bitmap newbitmap = Bitmap.createScaledBitmap(bitmap, 200, 200, false);
             if(holder.image != null){
                 holder.image.setImageBitmap(newbitmap); 
             }
             bitmap.recycle();

            }
     }
} 
```

所以我的问题是：

1.  我如何编写一个 sqlite 查询来返回一个行不为空的列？我目前的实现是：

    公共游标检索标签（字符串标签）{

    ```
     String[] condition = {KEY_ID,tag};
    Cursor cursor = db.query(DATABASE_TABLE, condition, null, null, null, null, null);      
        return cursor;
    } 
    ```

2.  从 BindView 代码中，如果我使用这种条件，例如

    if( !name.equals(null) || !name.equals("")){ }

我得到一个 NullPointerException 。为什么会这样？...这是测试字符串的正确方法对吗？...

希望我的问题很清楚，任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T13:03:47.283

通过使用 Sql 查询，您可以管理没有空值的数据，请参见下面的代码。

```
Cursor c=db.rawQuery("Select columnB from tablename where columnB IS NOT NULL"); 
```

# python - 从变量继承，Python？

> ID：11914862
> 
> 赞同：0
> 
> 时间：2012-08-11T12:51:00.570
> 
> 标签：python, oop, inheritance

我想告诉一个班级每次使用它时要继承什么。

这是一个例子

```
class widget(var):
    def __init__(self,var):
        #I really have no idea

bob=widget(wx.ComboBox) #I want the class to inheirit from wx.ComboBox
steve=widget(wx.ListBox) #I want the class to inheirit from wx.ComboBox 
```

请不要问诸如“你为什么要这样做？”之类的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T12:53:13.567

每次从您想要的任何基类子类化时，您都需要创建一个*不同的类。*您可以使用动态创建类的函数轻松完成此操作：

```
def widget(var):
   class Widget(var):
       pass
   return Widget() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:05:05.347

希望对你有帮助：

```
class A:
    v = 'a'

class B:
    v = 'b'

def C(x):
    class C(x): pass
    return C
x = A
print C(x).v 
```

**UPD 注意：**如果您还没有，请查看[python 装饰器。](http://wiki.python.org/moin/PythonDecorators)

# google-bigquery - Big Query 服务帐号的访问权限已被撤销？

> ID：11914864
> 
> 赞同：0
> 
> 时间：2012-08-11T12:51:20.483
> 
> 标签：google-bigquery

几天来，我一直在使用服务帐户成功访问 Google Big Query。我有几个测试可以成功连接并执行单个功能。

现在，无需更改任何代码或通过 API 控制台更改任何内容，我始终可以从所有 API 调用中获得“invalid_grant”。

我现在已经到了 - 几乎违反了礼貌请求限制，并且我启用了计费功能。

我可以做些什么来撤销我的访问权限吗？

我尝试使用另一个私钥等创建另一个服务帐户，但没有成功。

我已将我的新凭据放入此处给出的示例代码中：[Authenticating Google API with a service account with Java API](https://stackoverflow.com/questions/11827817/authenticating-google-api-with-a-service-account-with-java-api) without success。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:13:29.353

如果您过去曾成功使用 BigQuery 的服务帐户授权，但它突然停止工作（并且始终无法正常工作），我猜想这个问题与您服务器上的时钟有关。

我会先检查一下 - 如果时钟似乎关闭了，请使用 NTPdate (http://doc.ntp.org/3-5.93e/ntpdate.html) 之类的东西来确保它与 NTP 服务器同步。

# jquery - 在 Rails 3.2 中安装 Jquery 插件

> ID：11914867
> 
> 赞同：0
> 
> 时间：2012-08-11T12:51:46.247
> 
> 标签：jquery, ruby-on-rails, jquery-plugins, ruby-on-rails-3.2, asset-pipeline

我查看了互联网并找到了有关此问题的一些说明：

[在 Rails 3 中使用 jQuery 插件](https://stackoverflow.com/questions/5362597/using-jquery-plugins-in-rails-3)

[http://ridingwithrails.wordpress.com/2011/12/28/rails-3-1-installing-lightbox-jquery-plugin/](http://ridingwithrails.wordpress.com/2011/12/28/rails-3-1-installing-lightbox-jquery-plugin/)

这正是我在 Rails 中安装 Jquery 插件的方法。我永远无法访问控制台中的新方法。（我收到错误，该功能不存在）

1 - 我下载插件并将其放入：

```
vendor/assets/javascripts/plugin.js 
```

2 - 我在 application.js 中添加文件的路径：

```
//= require jquery
//= require jquery_ujs
//= require plugin 
//= require_tree . 
```

3 - 如果适用，我对 css 做同样的事情。（在 css 文件夹中）

我尝试过的一些插件是： jquery-cookie jquery-star-rating 但它永远不会起作用。我做错了什么？

谢谢你的回答

编辑：当我检查我的视图的来源时，插件的 *.js 文件包括在内，但是每当我尝试使用这些插件中的函数时，我都会得到例如：

```
[17:18:59,927] TypeError: $.cookie is not a function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T13:12:13.107

尝试以下方法来帮助调试问题所在：

1.  在 plugin.js 文件的顶部定义一个全局函数并尝试从控制台调用它。（你可以在这里调用一个 alert() 并得到类似的结果）。如果您能够调用此函数，则插件文件已包含在您声称的内容中。如果没有，那么您的资产路径可能已关闭，因此请尝试在 config/application.rb 中添加这样的行

    ```
    config.assets.paths << Rails.root.join("Vendor", "assets", "javascripts") 
    ```

2.  在 javascript 控制台打开的情况下，在 chrome 或 firebug 中打开您的页面，并确保没有 javascript 错误。错误可能会阻止插件正确加载。

3.  尝试使用最简单的插件（例如来自[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)的插件），如果可行，那么问题出在您尝试使用的特定插件上。

4.  尝试将插件包装在文档就绪块中，因为它可能需要 DOM 就位（注意：并不总是推荐这样做，因为它可能导致页面加载未优化，但值得一试）

    ```
    $(function() {
      // put the plugin code here
    }); 
    ```

5.  您是否正在加载`$`在其命名空间中使用的其他 javascript，例如原型？

6.  这是一个普通的 Rails 应用程序，还是一个大型复杂的应用程序？如果是后者，请查看您是否可以在最小的失败示例中重现该问题。

# c++ - 极慢的随机字符串生成器

> ID：11914871
> 
> 赞同：4
> 
> 时间：2012-08-11T12:52:00.307
> 
> 标签：c++

我想出了下面的代码来生成 100001 个随机字符串。这些字符串应该是唯一的。但是，下面的代码需要几个小时才能完成这项工作。有人可以让我知道如何优化它，为什么这么慢？

```
string getRandomString(int length) {     
    static string charset = "abcdefghijklmnopqrstuvwxyz";   
    string result;
    result.resize(length);
    for (int i = 0; i < length; i++) {
        result[i] = charset[rand() % charset.length()];   
    }
    return result; 
} 
void main(){

    srand(time(NULL));
    vector<string> storeUnigrams;
    int numUnigram = 100001; 
    string temp = "";
    int minLen = 3;
    int maxLen = 26;
    int range = maxLen - minLen + 1;
    int i =0;

    while(i < numUnigram){
        int lenOfRanString = rand()%range   + minLen;
        temp = getRandomString(lenOfRanString);
        bool doesithave = false;
        for(int j =0 ; j < storeUnigrams.size() ; j++){
            if(temp.compare(storeUnigrams[j]) == 0){
                doesithave = true;
                break;
            }
            if(temp.compare(storeUnigrams[j]) < 0){
                break;
            }
        }
        if(!doesithave){
            storeUnigrams.push_back(temp);
            sort(storeUnigrams.begin(),storeUnigrams.end());
            i++;
        }

    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T13:01:18.890

有两个因素会使您的代码变慢：

1.  通过线性搜索检查字符串是否已经存在 - O(n)
2.  在每次迭代中对向量进行排序 - O(n log n)

使用例如 a`set`来存储字符串——它是自动排序的，并且检查是否存在很快：

```
int main(){

    srand(time(NULL));
    set<string> storeUnigrams;
    int numUnigram = 100001; 
    int minLen = 3;
    int maxLen = 26;
    int range = maxLen - minLen + 1;

    while(storeUnigrams.size() < numUnigram){
        int lenOfRanString = rand()%range   + minLen;
        storeUnigrams.insert(getRandomString(lenOfRanString));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:12:03.683

菲利普的回答很好。另一种方法是使用像[红黑树这样的](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)[自平衡二叉搜索](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)树而不是向量。您可以在 log(n) 时间内执行搜索和插入。如果搜索为空，则插入元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T14:28:42.113

此代码仅生成一次唯一的随机数并将其存储在`random_once[i]`.

第一个`for`循环生成广告存储随机数。

第二个循环用于获取存储在数组`for`中的预渲染随机数 。`random_once[i]`

是的，生成`100001`随机数将需要数小时甚至数天。

```
#include <ctime>
#include <iostream>
using namespace std;

int main()
{
      int numUnigram = 3001;
      int size=numUnigram;
      int random_once[100001];

      cout<<"Please wait: Generatng "<<numUnigram<<" random numbers   ";
      std::cout << '-' << std::flush;
      srand(time(0));

      for (int i=0;i<size;i++)  

      {

           //This code generates a unique random number only once
           //and stores it in random_once[i]

            random_once[i]=rand() % size;
            for(int j=0;j<i;j++) if (random_once[j]==random_once[i]) i--; 

            //loading animation  
            std::cout << "\b\\" << std::flush;
            std::cout << "\b|" << std::flush;
            std::cout << "\b/" << std::flush;
            std::cout << "\b-" << std::flush;

      }

      cout<<" \n";

      // this code dispays unique random numbers stored in random_once[i]
      for ( i=0;i<size;i++) cout<<" "<<random_once[i]<<"\t";
      cout<<" \n";

  return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-11T12:57:10.460

在 while 循环之外定义变量 - 因为它们在每次迭代中都被重新定义

```
int lenOfRanString = rand()%range   + minLen; ;
bool doesithave = false; 
```

**更新**

认为在许多书籍中都建议这样做，在所有新编译器的实践中，这不会显着提高性能

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-11T12:54:41.493

使用 char 数组而不是字符串（字符串类在幕后做了很多事情）

# objective-c - 组织多个依赖的 Objective-C 库的最佳方式是什么？

> ID：11914874
> 
> 赞同：2
> 
> 时间：2012-08-11T12:52:24.910
> 
> 标签：objective-c, xcode, frameworks, project-organization

首先，让我说是的，这个问题可能是主观的。但是，如果考虑到所有相关因素，我相信可能会有一个“最佳”答案。无论如何，值得试一试并询问:)

假设我有三个库，A、B 和 C。

库 B 使用库 A。库 C 使用库 A。

我希望人们能够同时使用 A、B 和 C，或者如果他们愿意，可以任意组合使用 A、B 和 C。

我希望能够分发带有源代码的库，以便人们可以根据需要自行构建它们，或者只是抓取并使用单个文件。

我真的不想将它们分布在一个大的整体块中。

除了散装问题，我不想这样做是有充分理由的。假设 B 对它旨在使用的其他一些库具有外部依赖关系。我不想强迫只想使用 C 的人必须链接到另一个库，只是因为 B 使用它。因此，将 A、B 和 C 放在一个包中并不好。

我想让那些只想要 C 的人更容易抓住 C 并知道他们拥有使用它所需的一切。

鉴于以下情况，处理此问题的最佳方法是什么：

*   有问题的语言是Objective-c
*   我首选的交付机制是一个或多个框架（但我会考虑其他选项）
*   我首选的托管机制是 git / github
*   我宁愿不需要包管理器

这似乎是一个相对简单的问题，但*在你潜入并这么说之前*，我可以建议它实际上非常微妙。为了说明，这里有一些可能的，也可能有缺陷的解决方案。

## 遏制/子模块

B 和 C 使用 A 的事实表明它们可能应该包含 A。这很容易通过 git 子模块实现。但是当然，在他们自己的项目中同时使用 B 和 C 的人最终得到了 A 的两个副本。如果他们的代码也想使用 A，那么它使用哪一个？如果 B 和 C 包含稍微不同的 A 版本怎么办？

## 相对位置

另一种方法是设置 B 和 C，以便他们期望 A 的副本存在于相对于 B 和 C 的某个已知位置。例如，在与 B 和 C 相同的包含文件夹中。

像这样：

```
libs/
  libA/
  libB/ -- expects A to live in ../
  libC/ -- expects A to live in ../ 
```

这听起来不错，但它没有通过“让人们抓住 C 并拥有一切”的测试。仅抓住 C 本身是不够的，您还必须抓住 A 并将其安排在正确的位置。

这很痛苦——例如，如果你想设置自动化测试，你甚至必须自己做——但更糟糕的是，哪个版本的 A？您只能针对给定版本的 A 测试 C，因此当您将其发布到野外时，您如何确保其他人可以获得该版本。如果 B 和 C 需要不同的版本怎么办？

## 隐式要求

这是上述“相对位置”的变体——唯一的区别是您没有将 C 的项目设置为期望 A 位于给定的相对位置，您只需将其设置为期望它位于搜索路径中某处。

这是可能的，尤其是在 Xcode 中使用工作区。如果您的 C 项目希望添加到也添加了 A 的工作区，您可以安排一些事情，以便 C 可以找到 A。

但是，这并没有解决“相对位置”解决方案的任何问题。您甚至不能为 C 提供示例工作区，除非该工作区对 A 的相对位置做出假设！

## 分层子模块

上述解决方案的变体如下：

*   A、B 和 C 都生活在自己的仓库中
*   您公开“集成”存储库（我们称它们为 BI 和 CI），它们可以很好地安排事情，以便您可以构建和测试（或使用）B 或 C。

所以 CI 可能包含：

```
- C.xcworksheet
- modules/
    - A (submodule)
    - C (submodule) 
```

这看起来好一点。如果有人只想使用 C，他们可以抓住 CI 并拥有一切。

由于它们是子模块，它们将获得正确的版本。当您发布新版本的 CI 时，您会隐含地说“此版本的 C 可与此版本的 A 一起使用”。好吧，希望，假设你已经测试过了。

使用 CI 的人将获得一个工作区来构建/测试。CI 存储库甚至可以包含示例代码、示例项目等。

但是，想要同时使用 B 和 C 的人仍然存在问题。如果他们只接受 BI 和 CI，他们最终会得到两个 A 副本。这可能会发生冲突。

## 各种组合的分层子模块

不过，上述问题并非不可克服。

您可以提供如下所示的 BCI 存储库：

```
- BC.xcworkspace
- modules/
    - A (submodule)
    - B (submodule)
    - C (submodule) 
```

现在你说“如果你想同时使用 B 和 C”，我知道这是一个有效的发行版。

这一切听起来都不错，但维护起来有点困难。我现在可能不得不维护和推送以下存储库的各种组合：A、B、C、BI、CI、BCI。

到目前为止，我们只讨论了三个库。这对我来说是一个真正的问题，但在现实世界中，我可能有大约十个。那一定很痛

所以，我对你的问题是：

*   **你会怎么做？**
*   **有没有更好的办法？**
*   **我是否必须接受在小模块和大型单体框架之间进行选择是在模块用户更好的灵活性和维护者更多工作之间的权衡？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:25:14.067

图书馆就像洋葱，有很多层。层违规会造成讨厌的洋葱；内层不能包含外层。

*   创建 3 个独立的静态库项目（假设您的目标可能是 iOS）；甲、乙、丙

*   B 可以包含来自 A 的标头，C 可以包含来自 A 的标头

*   B 和 C 不能包含彼此的标题。A 不能包含来自 B 或 C 的标头

*   为您想要支持的每个库组合创建一个工作区

*   将适当的项目添加到工作区

*   在每个工作区中创建一个新项目以包含该组合的测试应用程序和/或单元测试

关键是工作区。使用工作区，您可以组合任意一组项目，只要它们的配置相同（调试与发布），构建/运行/分析/配置文件将正确确定依赖关系（您可以手动设置它们），将所有内容构建到一个派生数据/产品文件夹中，它就可以工作了。

如果你想独立构建 C 项目，那么 A 将需要按预期安装（通常安装到 /usr/local/，但也可以安装到 ~/ 中），并且与客户系统上的完全一样（如果您要支持二进制库安装）。

这正是我们中有多少人在 Apple 管理我们的项目，而且效果很好。在管理方面，尽量保持简单。你不可能有一个完整的团队致力于构建和配置，因此你的配置应该很简单。

如果您要诚实地评估情况并得出结论，A 永远不会被 B 使用，那么将 B 折叠到 A 中并完成它。编写可重用的 API 很难做好。我已经看到许多项目陷入了试图为应该只是一个特定用途创建一个完全通用的解决方案的困境中，在这个过程中浪费了大量的时间（有时会失败）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T16:47:02.687

当你注意到

> 我宁愿不需要包管理器

我仍然会向你推荐[CocoaPods](https://github.com/CocoaPods/CocoaPods/)。它完成了所有其他的事情，比如深度依赖管理，对 git 非常友好，并且总体上安装和使用都非常简单。

尽管如此，这并不是您设定的要求的确切答案。

# c# - 一段时间后生成回发

> ID：11914875
> 
> 赞同：-1
> 
> 时间：2012-08-11T12:52:48.877
> 
> 标签：c#, javascript, asp.net, postback

是否可以在一段时间后生成回发？假设：我有一些用户必须在文本框中输入的文本。如果他在接下来的 1 分钟内没有输入任何内容，则应刷新页面并显示警告或其他内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:00:41.847

这篇文章应该会有所帮助： http: [//www.codeproject.com/Articles/12293/Auto-postback-in-ASP-NET](http://www.codeproject.com/Articles/12293/Auto-postback-in-ASP-NET)

但是，您必须集成自己的业务逻辑来回发，或者不是因为您没有包含源代码。但是，此示例包含一个`StopTheClock()`方法，因此您可能希望将某种“OnChange”事件附加到文本框，以在值不为空时停止时钟。

另一种方法是在每个刻度之后（在这种情况下为 1 秒）和回发之前（form.submit）检查文本框的值，然后如果 textbox.value 不为空，则简单地停止计时器。

```
<script language="JavaScript" type="text/javascript">
<!--
// Script to generate an automatic postBack to the server
var secs
var timerID = null
var timerRunning = false
var delay = 1000
function InitializeTimer()
{
    // Set the length of the timer,
     // in seconds. Your choise
    secs = 5

    StopTheClock()
    StartTheTimer()
}
function StopTheClock()
{
    if(timerRunning)
        clearTimeout(timerID)
    timerRunning = false
}
function StartTheTimer()
{
    if (secs==0)
    {
        StopTheClock()

        //Generate a Postback to the server
        document.forms[0].submit()  

    }
    else
    {
        secs = secs - 1
        timerRunning = true
        timerID = self.setTimeout("StartTheTimer()", delay)
    }
}
//-->
</script>

<body onload="InitializeTimer()">
<form id="form1" runat="server">
 <div>
       The time is:   <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div>
</form>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:15:17.127

我强烈建议反对这样的方法。您所需要的只是通知用户或修改页面的一部分。完整的回发真的很浪费。相反，我建议使用 Ajax。也许使用 javascript 添加一个计时器，侦听所需的事件并根据需要引发 ajax 请求。

# mysql - 对平面表的查询排序结果

> ID：11914876
> 
> 赞同：0
> 
> 时间：2012-08-11T12:52:54.587
> 
> 标签：mysql, sql, flat

我有一个非常基本的单表场景；

```
tblFamiles
entryID : Int
name: Text
parentID: Int 
```

让我们添加以下行；

```
entryID : name                  : parentID
1       : Grandmother Jones     : 0
2       : Grandmother Thompson  : 0
3       : Mother Jones          : 1
4       : Mother Thompson       : 2
5       : 1st Daughter Jones    : 3
6       : 2nd Daughter Jones    : 3
7       : 1st Daughter Thompson : 4 
```

在这里，我们存储了两个家族的三代，琼斯家族和汤普森家族（例如）。我想查询该表，但按 parentID 对结果进行排序（但不只是像普通 old 一样`ORDER BY 'parentID' DESC`，因此它们是相对顺序的。我想要这样的输出；

```
SELECT (SOME MAGIC) FROM `tblFamiles`;
entryID : name                  : parentID
1       : Grandmother Jones     : 0
3       : Mother Jones          : 1
5       : 1st Daughter Jones    : 3
6       : 2nd Daughter Jones    : 3
2       : Grandmother Thompson  : 0
4       : Mother Thompson       : 2
7       : 1st Daughter Thompson : 4 
```

从逻辑上讲，我能看到如何做到这一点的唯一方法是遍历所有 entryID，然后遍历每个 entryID；循环遍历所有其他记录，根据当前 entryID 检查它们的 parentID 字段，并将这些记录带到结果集的顶部，在当前行下。但我看不到如何在 MySQL 中做到这一点。

**更新**

我在上面使用了家庭作为示例，但我所追求的是一种存储嵌套条目并将它们放在单个查询中的方法，以提高效率。我可以进行多个`SELECT`查询，但这很难看；

```
(Pseudo)
SELECT entryID, name WHERE parentID = 0 LIMIT 0,1;
print name;
 Sub query:
 SELECT entryID, name WHERE parentID = $above-entryID
 print name;
  (Keep looping through this till the second query returns no results, 
  then go back to the first query and move onto the next entryID) 
```

**第二次更新**

您甚至可以忘记该`name`列甚至存在，我只是以它为例，这里最重要的是`entryID`，`parentID`因为这是链接和控制所有内容的两个列。可能有 20 个额外的列 以及`name`，但它们都围绕`entryID`和`parentID`，它只是链接或嵌套（哪个术语更合适）ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T14:18:49.820

“但我看不到如何在 MySQL 中做到这一点。”

**简短的回答**

你不能。

**稍微长一点的回答。**

您要解决的问题并不是关系数据库是解决问题的好方法。您尝试做的将需要一个对象关系数据库。

对于理论，我建议阅读两者之间的区别：

[http://en.wikipedia.org/wiki/Relational_database](http://en.wikipedia.org/wiki/Relational_database)

[http://en.wikipedia.org/wiki/Object-relational_database](http://en.wikipedia.org/wiki/Object-relational_database)

以及关于stackoverflow的问题，关于为什么每个都是好/坏的。

[https://stackoverflow.com/questions/800/object-oriented-vs-relational-databases](https://stackoverflow.com/questions/800/object-oriented-vs-relational-databases)或 [关系数据库中的面向对象的结构](https://stackoverflow.com/questions/600684/object-oriented-like-structures-in-relational-databases)

包括这个答案[https://stackoverflow.com/a/600765/778719](https://stackoverflow.com/a/600765/778719)导致 [计算机科学的越南](http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx)。

这实际上更多是关于将对象映射到关系数据库中，但它确实向您展示了您刚刚遇到的问题的深度（以及缺乏明显的解决方案）。

当您实际需要另一个时使用另一个的实际问题称为对象关系阻抗不匹配 [http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)

**实际上可能有用的答案**

您描述的问题是最好由对象处理的问题。我建议现在坚持将它们存储在关系数据库中，只需接受这样一个事实，即您的逻辑需要存在于应用程序代码层而不是 SQL 层中，因此如果您需要获取，请对数据库进行多次查询每个“对象”或可能的每个“层”对象。

这将一直持续到某个点，此时您将更好地理解问题并处于更好的位置来使用不同的技术，或者至少了解不同解决方案之间的权衡。

**可怕的奖金**

[家谱软件中的循环](https://stackoverflow.com/questions/6163683/cycles-in-family-tree-software)

# google-app-engine - 如何在数据库级别设计我的 GWT 应用程序

> ID：11914878
> 
> 赞同：0
> 
> 时间：2012-08-11T12:53:02.753
> 
> 标签：google-app-engine, google-cloud-sql

上周我思考并阅读了很多关于 GWT、AppEngine 和 CloudSQL 的内容，但我仍然无法在数据库级别找到适合我的应用程序的设置。

我的要求是：

*   我想使用 GWT，因为我擅长 Java

*   我正在创建一个大数据挖掘项目。

*   我将使用 Matlab 分析数据库中的数据（使用 JDBC 上的数据库工具箱）

*   之后，用户可以将该应用程序用作协作式 Web 2.0 应用程序

*   我想要一个简单的解决方案，我不会每天都跑，同时由于设计不正确而发展成愚蠢的 Class*Exceptions

我考虑了以下设置：

1.  GWT + Appengine + CloudSQL + 本地 MySQL 数据库：

    我会尽量让 CanSQL 数据库和我的 MySQL 数据库保持同步。然后我可以使用 MySQL 数据库在本地运行我的数据挖掘算法。

2.  GWT + MySQL：我将 GWT 直接连接到我的本地 MySQL 数据库。

3.  GWT + Appengine + NoSQL 数据存储 + 使用 Approcket (http://code.google.com/p/approcket/) 与本地 MySQL 数据库同步数据。然后，我将在同步的 MySQL 数据库上运行我的数据挖掘算法。

注释：

我喜欢 1\. 和 3\. 的可能性，可以利用扩展的优势快速部署我的应用程序。使用解决方案 2。我需要自己托管它。此外，我没有标准化的（谷歌）解决方案。

关于解决方案 1 和 3。我担心，让我的云和本地数据保持同步非常复杂。

关于解决方案 2。我无法使用 AppEngine 的优势。此外，设置它比谷歌提出的解决方案 1\. 和 3\. 更难。

您认为解决我的问题的最佳和最简单的方法是什么？

非常感谢！

# python - Fastest way to uniquify a list of objects based on object attribute

> ID：11914890
> 
> 赞同：1
> 
> 时间：2012-08-11T12:55:38.253
> 
> 标签：python, list, unique

Im currently uniquifying a list of objects based on their name attribute by creating a dict of objects with the name value as the dict key like this:

```
obj_dict = dict()

for obj in obj_list:
    if not obj.name in obj_dict:
        obj_dict[obj.name] = obj

new_obj_list = obj_dict.items() 
```

And I was wondering if there was a quicker or more pythonic way to do this.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T12:58:43.563

If two objects with the same name should always considered identical you could implement `__eq__` and `__hash__` accordingly. Then your solution would be as easy as storing all your objects in a `set()`:

```
new_obj_list = list(set(obj_list)) 
```

Converting the list back to a set is probably not even necessary since the order is lost anyway so unless you need to do something with it that only works with a list but not with a set just keep using the set.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:16:16.460

And if you need ordering:

```
oset = set()
new_obj_list = []
for o in obj_list:
    if o not in oset:
        oset.add(o)
        new_obj_list.append(o) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:22:05.287

I would also go the set approach but then figured you want to be able to look-up by name I guess..., but here's another approach that doesn't require amending the class... (albeit a bit more expensive)... Note that you could add further sort parameters to `sorted` to order by other priorities (such as age, or gender etc...)

```
from operator import attrgetter
from itetools import groupby
unique_by_name = {key: next(item) for key, item in groupby(attrgetter('name'), sorted(obj_list, key=attrgetter('name')))} 
```

There's a unique last seen recipe in itertools too.

Otherwise for different ordering requirements, put them as different class methods, (or one called 'sort' that takes a known order and calls an internal function)...

# excel - 在多个字段中将日期从excel转换为matlab

> ID：11914891
> 
> 赞同：0
> 
> 时间：2012-08-11T12:56:01.760
> 
> 标签：excel, matlab, datetime, data-conversion

我在 matlab 中有一个结构（gilts），其中包含许多字段（gilt_name）。该结构是从 excel 导入的工作簿，每个字段对应于该工作簿中的一个工作表。每个工作表都是日期的时间序列和相应的后备母猪价格。在导入 matlab 之前，我按照[何时从 Excel 文件转换日期](http://www.mathworks.co.uk/help/techdoc/import_export/f5-100860.html#br0xp1s)中的说明将 excel 中的日期转换为字符串。但是如何在 matlab 中同时将此转换应用于多个字段？我有数百个与每个 gilt_name 对应的数据数组，它可以为我节省大量时间。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:39:24.767

假设我们有一个 Excel 电子表格，其中包含三张工作表，每张工作表都包含一系列日期和一些相应的值：

![擅长](../Images/0c3e079540f5c15537c4e40c723f8af8.png)

考虑使用以下代码将数据导入 MATLAB：

```
%# for each of the three sheets
data = cell(3,1);
for i=1:3
    %# read the sheet as unprocessed data (both text and numeric)
    [~,~,raw] = xlsread('data.xlsx', i);

    %# parse strings as serial dates and combine into a matrix
    data{i} = [datenum(raw(:,1),'dd/mm/yyyy') cell2mat(raw(:,2))];
end 
```

现在单元格数组中的每个单元格`data`都有第 i 个工作表的数据。日期表示为序列日期编号。例如，我们可以将第一个时间序列绘制为：

```
plot(data{1}(:,1), data{1}(:,2))
datetick('x', 'dd', 'keepticks')
xlabel('days'), ylabel('prices') 
```

![截屏](../Images/56dabc1327194c06f1d2ee6ef99ee96f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T14:39:13.520

嘿，您可以列出您的字段名称

```
names = fieldnames(gilts) 
```

然后，您需要做的就是在 for 循环中循环，通过增量计数器访问 names 变量。

例如，

```
names = fieldnames(gilts);
for i = 1 : length(gilts),
   n = [gilts(i,1). 'names(i)' (:,:)];
   eval(n); % and do what you need to do
end 
```

因此，您可以通过这种方式将“名称”中的字符串索引为 gilts 的字段。

# c++ - Syntastic cpp：致命错误“QApplication：没有这样的文件或目录”

> ID：11914899
> 
> 赞同：2
> 
> 时间：2012-08-11T12:57:45.567
> 
> 标签：c++, qt, vim, syntastic

不知道 Perl，我无法为我试验的较新的 c++ 库配置语法。Vim 拒绝识别头文件。这是一个编译良好但 syntastic 显示错误的程序：

```
 #include <QApplication>            <----------- line of error as in title
 #include <QPushButton>

 int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);

     QPushButton hello("Hello world!");
     hello.resize(100, 30);

     hello.show();
     return app.exec();
 } 
```

这是我在 vim 的 syntax-checkers 子目录中的 cpp.vim 文件。注意我试图在这个中添加到 Qt4 的路径但没有用

```
" in order to also check header files add this to your .vimrc:
" (this usually creates a .gch file in your source directory)
"
"   let g:syntastic_cpp_check_header = 1
"
" To disable the search of included header files after special
" libraries like gtk and glib add this line to your .vimrc:
"
"  let g:syntastic_cpp_no_include_search = 1
"
" To enable header files being re-checked on every file write add the
" following line to your .vimrc. Otherwise the header files are checked only
" one time on initially loading the file.
" In order to force syntastic to refresh the header includes simply
" unlet b:syntastic_cpp_includes. Then the header files are being re-checked
" on the next file write.
"
"   let g:syntastic_cpp_auto_refresh_includes = 1
"
" Alternatively you can set the buffer local variable b:syntastic_cpp_cflags.
" If this variable is set for the current buffer no search for additional
" libraries is done. I.e. set the variable like this:
"
"   let b:syntastic_cpp_cflags = ' -I/usr/include/libsoup-2.4'
"
" Moreover it is possible to add additional compiler options to the syntax
" checking execution via the variable 'g:syntastic_cpp_compiler_options':
"
let g:syntastic_cpp_compiler_options = ' -std=c++0x'

if exists('loaded_cpp_syntax_checker')
    finish
endif
let loaded_cpp_syntax_checker = 1

if !executable('g++')
    finish
endif

let s:save_cpo = &cpo
set cpo&vim

function! SyntaxCheckers_cpp_GetLocList()
    let makeprg = 'g++ -fsyntax-only '.shellescape(expand('%'))
    let errorformat =  '%-G%f:%s:,%f:%l:%c: %m,%f:%l: %m'

    if expand('%') =~? '\%(.h\|.hpp\|.hh\)$'
        if exists('g:syntastic_cpp_check_header')
            let makeprg = 'g++ -c '.shellescape(expand('%'))
        else
            return []
        endif
    endif

    if exists('g:syntastic_cpp_compiler_options')
        let makeprg .= g:syntastic_cpp_compiler_options
    endif

    if !exists('b:syntastic_cpp_cflags')
        if !exists('g:syntastic_cpp_no_include_search') ||
                    \ g:syntastic_cpp_no_include_search != 1
            if exists('g:syntastic_cpp_auto_refresh_includes') &&
                        \ g:syntastic_cpp_auto_refresh_includes != 0
                let makeprg .= syntastic#c#SearchHeaders()
            else
                if !exists('b:syntastic_cpp_includes')
                    let b:syntastic_cpp_includes = syntastic#c#SearchHeaders()
                endif
                let makeprg .= b:syntastic_cpp_includes
            endif
        endif
    else
        let makeprg .= b:syntastic_cpp_cflags
    endif

    return SyntasticMake({ 'makeprg': makeprg, 'errorformat': errorformat })
endfunction
let &cpo = s:save_cpo
unlet s:save_cpo
let s:default_includes = [ '.', '..', 'include', 'includes' ]
let s:default_includes = [ '.', '..', 'include', 'includes','../include', '../includes' ]

 function! s:GetIncludeDirs()

     let include_dirs = s:default_includes
 endfunction
" vim: set et sts=4 sw=4: 
```

以及我的 .gvimrc 中的语法相关行：

```
"===============================SYNTASTICSETTINGS================================================
"set statusline+=%#warningmsg#
"set statusline+=%{SyntasticStatuslineFlag()}
"set statusline+=%*
let g:syntastic_cpp_include_dirs = ['../include','include']
let g:syntastic_cpp_check_header = 1
let g:syntastic_enable_signs=1
let g:syntastic_quiet_warnings=1
set wildchar=<Tab> wildmenu wildmode=full 
```

我希望能帮助我学习语法检查器和语法检查器的工作原理，因为我怀疑这个问题会在我每次练习不同的开发工具包时再次出现。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:02:47.730

你试过设置`syntastic_cpp_include_dirs`吗`/usr/include/qt4/QtGui`？看起来它应该给出标头所在的目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T21:27:04.113

好吧，我复制了托管在 [https://github.com/scrooloose/syntastic上的最新文件版本](https://github.com/scrooloose/syntastic)

现在 syntastic 不再给我带来问题了。我以前的版本一直给我带来问题是 [http://www.vim.org/scripts/script.php?script_id=2736](http://www.vim.org/scripts/script.php?script_id=2736)

# mysql - 数据库结构：为日历工作名册/时间表（mySQL）设置表的最佳方法？

> ID：11914906
> 
> 赞同：2
> 
> 时间：2012-08-11T12:59:13.737
> 
> 标签：mysql, calendar

搜索后我找不到这样的问题，所以我发布了。

1.  为我的 10 位同事制定工作计划以取乐

2.  它是基于日历的（我们每周 7 天轮班，不同的轮班有不同的职责 - （周一上午 8 点至下午 5 点任务 1，周一上午 8 点至下午 5 点任务 2，周六下午 5 点至上午 8 点（晚上）任务 2 等）

3.  使用 mySQL

我无法理解设置 mySQL 表的最佳方法。有人对此有经验吗？

说这个下周一：

```
Monday days - Joe - Task 1
Monday days - Sally - task 2
Monday days - Mike - task 3
Monday nights - Bob - task 1,2,3
Tuesday days - Joe - Task 1
..etc.. 
```

显然这个表设置是低效的：

```
id,  date, worker, shift, task 
```

它效率低下，因为“日期”字段在一年中的每一天都会有很多条目......有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:48:34.797

一个非常有趣的问题，也是一个出了名的难题。阅读 Scott Rosenberg 的*Dreaming in Code*，了解与此问题和类似问题的一些斗争。

你有一个基本的设计选择。您可以枚举日期和班次，也可以使用类似通配符的方案来描述时间间隔。（例如“2013 年的所有工作日”或“2012 年 9 月的星期五和星期六”或你有什么。）

正如您所观察到的，枚举日期和班次会生成大量记录。但它很容易编程。而且，MySQL 可以轻松处理数万条记录。

另一方面，类似通配符的方案更优雅。但它在语义上要复杂得多。Unix / BSD / Linux crontab 系统 (http://crontab.org/) 包含一种简单但丑陋的方式来指定这类事情。

对于这类事情的精彩实现，请查看 Google 日历的重复约会功能集。

# osgi - 找到导出包的 OSGI 包？

> ID：11914913
> 
> 赞同：7
> 
> 时间：2012-08-11T13:00:30.867
> 
> 标签：osgi, apache-felix

如何找到导出包的捆绑包？

我正在使用 felix 并且我有一个像“com.test”这样的字符串，我怎么知道哪个包导出了那个包？

我不想使用 PackageAdmin，因为它已被弃用，我也不想为每个包获取 Export-Package 标头并对其进行解析。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T03:45:34.947

听起来您想以编程方式执行此操作，而不是在 Gogo shell 中……至少我会从您的问题的措辞中假设这一点。

没有真正的方法可以说“哪个包”导出给定的包，因为可以有许多包导出任何给定的包，并且该包可以被许多包从许多包中使用。如果你有一个特定的包并且你想知道哪个包`com.test`为它提供包，你可以获取导入包的连接`Bundle.adapt(BundleWiring.class)`，然后`BundleWiring.getRequiredWires()`用来获取包的所有依赖项的提供者。

从那里你只需要找到`osgi.wiring.package`你想要的包的名称空间线，然后该线的提供者将是你感兴趣的包`BundleCapability`的一个。`BundleRevision`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T07:54:35.503

Apache Felix OSGi 控制台的最新版本包括一个“依赖项查找器”插件，它列出了导出给定包或类的包。[http://www.6dlabs.com/blog/dklco/2012-05-04/new-cq-55-dependency-finder](http://www.6dlabs.com/blog/dklco/2012-05-04/new-cq-55-dependency-finder)有一些截图（其中提到了CQ5，但插件不依赖于此）。

这在管理员级别很有用，如果您需要在代码中找到它，您可以查看该插件的源代码，请参阅[https://issues.apache.org/jira/browse/FELIX-3045](https://issues.apache.org/jira/browse/FELIX-3045)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-02-27T17:06:27.020

一个快速的解决方案是遍历包，列出 id 和导出包头。

```
g! each (bundles) { echo ($it bundleId) (($it headers) get Export-Package) } 
```

请注意，您需要在`{`and周围放置空格`}`！这会打印每个包、它的 id 和它的 Export-Package 标头。你可以把它放在一个cmd中：

```
g! exports= { each (bundles) { echo ($it bundleId) (($it headers) get Export-Package) } } 
```

然后，您可以更轻松地使用它`grep`：

```
g! exports | grep webconsole
12 org.apache.felix.webconsole;version="3.3.0";uses:="javax.servlet,javax.servlet.http,org.osgi.framework",org.apache.felix.webconsole.bundleinfo;version="1.0.0";uses:="org.osgi.framework",org.apache.felix.webconsole.i18n;version="1.0.0";uses:="org.osgi.framework"
true 
```

导出包的官方命令是`inspect`

```
g! inspect cap osgi.wiring.package 
```

但是，输出非常混乱且难以 grep。但是，如果您知道包名称，则可以询问（已弃用）包管理员。

```
g! r=servicereference org.osgi.service.packageadmin.PackageAdmin
....
g! pa=service $r
org.apache.felix.framework.PackageAdminImpl@2c7b40e3
g! $pa exportedpackages org.osgi.framework
org.osgi.framework; version=1.10.0
org.osgi.framework; version=1.9.0
org.osgi.framework; version=1.10.0
org.osgi.framework; version=1.9.0
g! each ($pa exportedpackages org.osgi.framework) { $it exportingbundle  }
0|Active     |    0|org.apache.felix.framework (0.1.0.SNAPSHOT) 
```

不幸的是，Package Admin 方法被重载，Gogo 会选择第一个匹配的方法，否则会容易得多:-(

如果您有一组捆绑包，那么`bnd`命令行会很有用。你可以[在这里](https://github.com/bndtools/bnd/wiki/Install-bnd-on-the-command-line)安装它。

然后你可以这样做：

```
$ bnd find -e "com.example*" jars/*.jar 
```

或者

```
$ bnd grep -e "com.example*" jars/*.jar 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-11T22:33:58.020

您是否尝试过：出口 | grep com.test ?

# git - git 致命错误 带有 a 的路径没有意义

> ID：11914919
> 
> 赞同：15
> 
> 时间：2012-08-11T13:00:52.143
> 
> 标签：git, sourceforge

我的计算机上有现有代码，然后我在 sourceforge 上注册了我的帐户，开始了一个 git 项目。现在我需要将我的本地项目发送到 sourceforge 远程空间。在 sf 上有说明页面：

**第一次使用 Git**

```
cd miorep-code
git init
git commit -a -m 'Initial commit'
git remote add origin ssh://****/p/miorep/code
git push origin master 
```

**现有存储库**

```
cd miorep-code
git remote add origin ssh://****/p/miorep/code
git push origin master 
```

如果我遵循第一组说明，我有一个

> “致命：带有 -a 的路径没有意义”

当我得到`git commit -a -m 'Initial commit'`.

如果我遵循第二组指令，我会得到：

> 错误：src refspec master 不匹配任何内容。错误：未能将一些参考推送到 'ssh:// *** */p/ravenna/code'

当我执行最后一个命令时。

在我的情况下，正确的指令集是什么？为什么我得到那个错误？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-10-04T00:24:55.957

单引号 ' 是问题所在。将其更改为双引号，例如“初始提交”。**在Windows-cmd**中使用双引号而不是单引号。

@AndrewC：在进行否决之前阅读此内容：[http ://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Skipping-the-Staging-Area](http://git-scm.com/book/en/Git-Basics-Recording-Changes-to-the-Repository#Skipping-the-Staging-Area)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-11T13:19:06.867

第一组指令没有意义：

```
cd miorep-code
git init
git commit -a -m 'Initial commit' 
```

需要有一个`git add`between `git init`and `git commit`，否则`git`不知道*你*想提交什么。你的第二个错误...

```
error: src refspec master does not match any. error: failed to push some refs to 'ssh://**/p/ravenna/code' 
```

...意味着您实际上还没有向本地存储库提交任何内容，因此没有`master`要推送的分支。

你想做的是：

```
cd miorep-code
git init
git add .
git commit -m 'initial commit'
git push origin master 
```

您会注意到这与您的第一组指令*几乎*相同，除了我们添加了一个`git add .`意思是“将我当前目录和以下目录中的所有内容添加到我的存储库”。

# wix - 如何在 WiX 中使用自定义分隔符将安装路径写入注册表？

> ID：11914921
> 
> 赞同：1
> 
> 时间：2012-08-11T13:01:03.090
> 
> 标签：wix

我想向注册表写入一个值，该值由安装路径和一些附加路径组成。分隔符必须是'/'，例如

```
Value="[INSTALLLOCATION]/folder1/folder2" 
```

如何格式化此值，以便安装路径也使用“/”分隔符而不是“\”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:57:57.450

MSI 格式不支持此功能。您必须编写一个自定义操作来读取属性，重新格式化字符串并将其写入新属性（INSTALLLOCATIONFORMATTED），然后您可以在注册表表中使用该属性。

更大的问题和更简单的答案是......“为什么？”

你在做类似 file://c:/foo/bar.txt 的事情吗？

file://C:\foo\bar.txt 应该也可以工作，因为 \ 是 Windows 平台上的标准。最好将读取此注册表值的任何代码修改为接受 \ 而不是 /。这导致安装程序更简单且不易损坏。

# vaadin - Vaadin 表行

> ID：11914929
> 
> 赞同：1
> 
> 时间：2012-08-11T13:01:48.703
> 
> 标签：vaadin

我正在为 UI 使用 vaadin，我有一个具有 @OneToMany 关系的实体类，所以实体类有一个列表。所以我想在 vaadin 表中显示这些值，谁能解释我该怎么做？谢谢，这是我的课程详情

```
@OneToMany
private List<Driver> driverList = new ArrayList<Driver>() 
```

TempLocation 类中的此字段。

所以当我从数据中查询时，我会得到一个城市和司机名单。在 vaadin 表中，我可以在一行中显示查询结果（假设我在数据库中只有一条记录，并且有多个驱动程序）

假设我的表有两列“位置”和“驱动程序”，所以我想在多行中显示结果，我想浏览列表并在显示城市时采取一个驱动器

目前它在表格中的显示方式。

**|司机*_ _* __ *_* __ *_* __ *_* ____| 位置 |** (表头)
[Driver1,Driver2,Driver3] | 科隆南瓦（行）

我想显示这个

**|司机*_ _* __ *_* __ *_* __ *_* ___ *| 位置 |*** *（表头）
Driver1* ***_* __ *_* __ *_* __ *_* __ *_* _** |Kolonnawa（第 1 行）
Driver2_ ***_* __ *_* __ *_* __ *_* __ *_*** | Kolonnawa（第 2 行）
Driver3_ ***_* __ *_* __ *_* __ *_* ___** | 科隆南瓦（第 3 行）

"_" 用于显示空格，

希望你能得到我想要表达的东西，谁能告诉我该怎么做？提前谢谢xx

谢谢，干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:11:51.350

如果您只想要一种不同的填表方式，我建议您只遍历您的司机列表并为每个人创建一行（假设每个司机都知道他的城市）

检查这个例子：

```
/* Create the table with a caption. */
Table table = new Table("This is my Table");

/* Define the names and data types of columns.
 * The "default value" parameter is meaningless here. */
table.addContainerProperty("Driver", String.class,  null);
table.addContainerProperty("City",  String.class,  null);

/* Add a few items in the table. */
int i = 1; 
for(Driver driver : driverslist){
table.addItem(new Object[] {
driver.getName(),driver.getCity(), new Integer(i));
i++
} 
```

addItem() 方法中的整数用于行号。

请查看 vaadin 书中关于[表格组件](https://vaadin.com/book/-/page/components.table.html)使用的文章。

# antlr - ANTLR 解析多个文件以生成一个 AST

> ID：11914930
> 
> 赞同：5
> 
> 时间：2012-08-11T13:01:55.223
> 
> 标签：antlr

我如何解析多个源文件并最终只使用一个 AST 来执行分析和代码生成？通常，我发现 ANTLR 的示例用法形式为

```
public void process(String source) 
{
    ANTLRStringStream Input = new ANTLRStringStream(input);
    TLexer lex = new TLexer(Input);
    CommonTokenStream tokens = new CommonTokenStream(lex);
    TParser parser = new TParser(tokens);
    var tree = parser.parse().Tree; 
} 
```

但是词法分析器和解析器似乎都无法获取其他文件。我应该创建一个词法分析器和解析器公关吗？inputfile 并使用 tree.Add() 将其他文件中的树添加到第一个文件的树中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:08:34.657

您可以通过以下三种方式执行此操作：

1.  使用 Bart 的建议并将文件合并到一个缓冲区中。这将需要添加一个实现与 C++ #line 指令相同功能的词法分析器规则。

2.  组合解析器规则返回的树。

3.  使用单个词法分析器使用多个输入流。这可以通过使用类似于处理[包含文件](http://web.archive.org/web/20130120150251/http://www.antlr.org/wiki/pages/viewpage.action?pageId=557057)的代码来完成，方法是在词法分析之前将所有缓冲区推入堆栈。

第二种选择可能是最简单的。我不使用 Java 目标，因此无法提供所有这些解决方案都需要的代码详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T05:59:49.363

我认为这接近你所追求的。我已经硬编码了两个要处理的文件，但是您可以通过创建一个循环来处理任意数量的文件。在这一步，`// create new parent node and merge trees here into fulltree`请参阅 Bart[关于复制树](https://stackoverflow.com/questions/6781019/antlr-duplicate-a-tree)的答案。它具有创建父节点并将子节点附加到它的步骤（抱歉，我没有这样做，也没有时间集成他的代码和测试）。

```
public class OneASTfromTwoFiles {
    public String source1 = "file1.txt";
    public String source2 = "file2.txt";

    public static void main(String[] args)
    CommonTree fulltree;
    {
        CommonTree nodes1 = process(source1);
        CommonTree nodes2 = process(source2);
        // create new parent node and merge trees here into fulltree
        CommonTreeNodeStream nodes = new CommonTreeNodeStream(fulltree); //create node stream
        treeEval walker = new treeEval(fulltree);
        walker.startRule(); //walk the combined tree
    }

    public CommonTree process(String source)
    {
        CharStream afs = null;
        // read file; exit if error
        try { 
            afs = new ANTLRFileStream(source);
        }
        catch (IOException e) {
            System.out.println("file not found");
            System.exit(1);
        }

        TLexer lex = new TLexer(afs);
        CommonTokenStream tokens = new CommonTokenStream(lex);
        TParser parser = new TParser(tokens);
        //note startRule is the name of the first rule in your parser grammar
        TParser.startRule_return r = parser.startRule(); //parse this file
        CommonTree ast = (CommonTree)r.getTree(); //create AST from parse of this file
        return ast; //and return it
    }
} 
```

# google-shopping - Google 购物网址中的 CID 参数是什么？

> ID：11914931
> 
> 赞同：0
> 
> 时间：2012-08-11T13:02:30.130
> 
> 标签：google-shopping

我注意到我在 Google 购物网站检查的每个产品页面中都存在“cid”参数？我们可以依靠这个参数来唯一标识每个产品吗？谷歌未来是否有可能将相同的参数值用于另一款产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:05:18.377

是的，`cid`用于唯一标识产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T18:05:00.363

CID 代表客户 ID，这是访问者独有的 ID，不应用于产品。CID 是一个通用唯一标识符 (UUID)，是一个 128 位数字，用于识别计算机系统中的信息。此值存储在 _utma Google Analytic Cookie 中以跟踪分配给它的设备。附加参考：[https ://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cid](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#cid)

# git - 致命：不是 git 存储库：'.git' 错误

> ID：11914933
> 
> 赞同：11
> 
> 时间：2012-08-11T13:02:44.843
> 
> 标签：git, hook, git-bash

我创建了一个预提交挂钩，它获取数据库转储并将其保存在我的应用程序/文件夹下的文件中，该文件也在 git repo 中，保存后我将文件添加到提交列表。以下是我的预提交文件中的代码

```
 D:/xampp/mysql/bin/mysqldump -u root -pxyz --skip-extended-insert [database] > D:/xampp/htdocs/app/application/[database].sql

cd D:/xampp/htdocs/app/application
git add [database].sql 
```

我尝试通过命令提示符直接运行预提交代码，它可以正常工作，但是当我尝试通过 git bash 提交代码时出现此错误

```
fatal: Not a git repository: '.git' 
```

我假设它是因为预提交文件中使用了 git 命令，谁能告诉我这个文件有什么问题以及我应该如何修改它

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T14:30:53.160

有疑问，在您的钩子中，明确设置`git-dir`和`work-tree`参数：

```
git --git-dir .git --work-tree . add ... 
```

您甚至可以确定完整路径：

```
git --git-dir D:/xampp/htdocs/app/application/.git --work-tree D:/xampp/htdocs/app/application/. add ... 
```

这样，您就可以排除这些环境问题`git-dir`或`work-tree`陷入另一条路径，该路径不是您正在进入的存储库之一。有关该问题的示例，
请参见“[从](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook)[钩子中](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook)[调用 ' '”。`git pull``git post-update`](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-11T19:42:04.263

我有和你一样的问题，并找到了这个解决方案：

而不是做

```
cd D:/xampp/htdocs/app/application
git add [database].sql 
```

我只是做了

```
git add D:/xampp/htdocs/app/application/[database].sql 
```

这样我就不会通过 cd-ing 进入另一个文件夹来激怒 git :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:12:06.667

确保你在有 .git 文件夹的目录中？确保，尝试运行

```
git status 
```

看看发生了什么。如果您仍然收到此类消息，我认为您的 git 尚未设置。

请按照以下步骤进行设置：

```
git init
git add .
git commit -m "your message"
git push 
```

# c# - FileSystemWatcher 无效数据异常错误

> ID：11914935
> 
> 赞同：1
> 
> 时间：2012-08-11T13:03:21.573
> 
> 标签：c#, xml, winforms, filesystemwatcher

![在此处输入图像描述](../Images/7b23ed8fa56a4ce8d4249ba4c1d71d92.png)
如果特定 xml 文件发生更改，我想刷新我的 datagridview。我有一个 FileSystemWatcher 来查找文件中的任何更改并调用 datagirdview 函数来重新加载 xml 数据。

当我尝试时，我得到了`Invalid data Exception error`有人请告诉我我在这里做错了什么？

```
 public Form1()
            {
                InitializeComponent();
                FileSystemWatcher watcher = new FileSystemWatcher();

                watcher.Path = @"C:\test";
                watcher.Changed +=  fileSystemWatcher1_Changed;
                watcher.EnableRaisingEvents = true;
                //watches only Person.xml
                watcher.Filter = "Person.xml";

                //watches all files with a .xml extension
                watcher.Filter = "*.xml";

            }

            private const string filePath = @"C:\test\Person.xml";
            private void LoadDatagrid()
            {
                try
                {
                    using (XmlReader xmlFile = XmlReader.Create(filePath, new XmlReaderSettings()))
                    {
                        DataSet ds = new DataSet();
                        ds.ReadXml(xmlFile);
                        dataGridView1.DataSource = ds.Tables[0]; //Here is the problem
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.ToString());
                } 
            }

            private void Form1_Load(object sender, EventArgs e)
            {
                LoadDatagrid();
            }

private void fileSystemWatcher1_Changed(object sender, FileSystemEventArgs e)
            {
                LoadDatagrid();
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:00:54.673

这是因为在`FileSystemWatcher`不同的线程上运行，而不是 UI 线程。在 winforms 应用程序上，只有 UI 线程（程序的主线程）可以与视觉控件交互。如果您需要与来自另一个线程的可视控件进行交互（例如这种情况），`Invoke`则必须调用目标控件。

```
 // this event will be fired from the thread where FileSystemWatcher is running.
 private void fileSystemWatcher1_Changed(object sender, FileSystemEventArgs e)
 {
      // Call Invoke on the current form, so the LoadDataGrid method
      // will be executed on the main UI thread.
      this.Invoke(new Action(()=> LoadDatagrid()));
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:58:26.417

FileSystemWatcher 在单独的线程中运行，而不是在 UI 线程中。为了维护线程安全，.NET 阻止您从非 UI 线程（即创建表单组件的线程）更新 UI。

要轻松解决问题，请从您的 fileSystemWatcher1_Changed 事件中调用目标 Form 的 MethodInvoker 方法。有关如何执行此操作的更多详细信息，请参阅[MethodInvoker Delegate 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)关于如何执行此操作还有其他选项，包括。设置一个同步（即线程安全）对象来保存任何事件的结果/标志，但这不需要更改表单代码（即在游戏的情况下，可以只在主游戏循环中轮询同步对象等）。

```
private void fileSystemWatcher1_Changed(object sender, FileSystemEventArgs e)
{
    // Invoke an anonymous method on the thread of the form.
    this.Invoke((MethodInvoker) delegate
    {
        this.LoadDataGrid();
    });
} 
```

编辑：更正了之前在委托中有问题的答案，LoadDataGrid 缺少这个。它不会这样解决。

# android - Rss解析器android与图像上的文本

> ID：11914942
> 
> 赞同：-2
> 
> 时间：2012-08-11T13:04:48.337
> 
> 标签：android, parsing, rss

我正在考虑一个可以解析来自 rss 的图像和文本的应用程序，并且输出将是这样的：http: [//gromdroid.99k.org/Screenshot_2012-08-11-15-00-07.png](http://gromdroid.99k.org/Screenshot_2012-08-11-15-00-07.png) 但我的问题是我如何从 rss 中以 fill_parent 作为宽度的 imageview 获取图像，并且在 imageview 上会有一个 textview。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:06:43.450

取自这篇[文章](https://stackoverflow.com/questions/10040030/listing-images-and-text-from-rss-feed-in-android-list-view)

> 请参阅此自定义或动态[Listview 示例](https://stackoverflow.com/questions/10040030/listing-images-and-text-from-rss-feed-in-android-list-view)
> 
> 另请参阅如何[从 URL 加载图像](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)
> 
> ![在此处输入图像描述](../Images/b60584201085cc1b4b834551dbde4fde.png)

这也是我发现的最全面的[RSS 阅读器教程。](http://www.ibm.com/developerworks/xml/tutorials/x-androidrss/)

# javascript - 如何以编程方式将内容脚本添加到 iframe 文档

> ID：11914945
> 
> 赞同：2
> 
> 时间：2012-08-11T13:05:07.567
> 
> 标签：javascript, google-chrome, iframe, google-chrome-extension

我正在编写一些诊断工具并尝试为其创建 chrome 扩展。我拥有的是一个带有 iframe 的页面。iframe 包含正在放置的站点`diffrent domain`。

我需要的是这两个站点之间的通信。我发现我可以简单地`content script`向每个文档添加一个（到 iframe 文档和我的顶部窗口文档），并通过`background script`消息流在它们之间设置通信。

问题是我现在不知道 iframe 中文档的地址是什么，用户可以将多个不同的页面放入 iframe。因此，我无法`content script`使用`manifest.json`文件添加，因为我不知道将什么放入`matches`属性中。

我尝试使用`chrome.tabs.executeScript`将`allFrames`标志设置为 true 的方法。当 iframe 文档与顶部窗口文档位于同一域时，它工作正常，但当它位于不同域时，它不会添加`content script`到框架文档中。

问题很奇怪，因为如果我在设计时知道 iframe url，那么我可以像从清单文件中一样添加这些脚本......

**在这种情况下，如何将内容脚本添加到 iframe 文档？**

我还会告诉你，我有权访问我`manifest.json`文件中的每一页。它看起来像这样：`"permissions": ["tabs", "http://*/", "https://*/"]`。额外的障碍是我不能嵌入 iframe 文档内容，它是第三方代码。

有任何想法吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:54:40.460

发表评论后`Rob W`，问题在于时机。我试图在加载之前将脚本注入 iframe。我在 iframe 上使用了事件来确定应该调用`onload`该方法的时刻。`executeScript`

现在一切正常。谢谢罗布。

# ruby-on-rails - 验证失败时不会呈现操作

> ID：11914951
> 
> 赞同：0
> 
> 时间：2012-08-11T13:06:57.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个相当标准的控制器，带有一个创建方法和一些验证。

```
def create
  @type = Type.new(params[:type])    
  respond_to do |format|
    if @type.save
      format.html { redirect_to types_path, notice: 'Type was successfully created.' }
      format.json { render json: @type, status: :created, location: @type }
    else
      format.html { render action: "new" }
      format.json { render json: @type.errors, status: :unprocessable_entity }
    end
  end
end 
```

问题是，当验证失败时，我得到错误`Missing template ontology/types/create`，就好像`render action: "new"`不存在一样。如果我用 a 替换它，`redirect_to`那么它会按预期工作，但似乎我无法传递表单错误。

我知道在 new 的原始调用中有一个 @type 实例（带有 @type.errors），并在渲染调用确认这一点之前将其抛出。

当更新验证失败时也会发生同样的事情看起来渲染调用被忽略了！

注意：我的路由结构有点不合常规，但我看不出这应该相关的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:19:48.020

这看起来非常相似：[在控制器中定义的路径和动作被忽略，Ruby on Rails](https://stackoverflow.com/questions/10127664/path-defined-in-controller-and-action-is-getting-ignored-ruby-on-rails)

根据对该问题的回答，我猜测缺少渲染`new`视图所需的某些内容，因此 rails 只是`render`完全跳过调用并渲染`create`。

你能显示`new`控制器的动作和视图吗？

# javascript - 如何将复杂对象存储在 Razor 中的 jQuery / 数据属性中？

> ID：11914957
> 
> 赞同：2
> 
> 时间：2012-08-11T13:07:35.620
> 
> 标签：javascript, jquery, asp.net-mvc, razor, custom-data-attribute

在我的 Razor 标记中，我正在循环浏览我的模型集合并输出表行。目前，我将项目 ID 存储在每个表行的“data-id”属性中。不过，我需要每行存储整个对象，这样可以为我节省一些未来的 ajax 调用。什么是在 Razor 输出上存储每行完整对象以供我的 jQuery 以后使用的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:35:43.193

您还可以使用具有编码的 json 字符串的隐藏字段，然后您可以在 javascript 代码中按需解析 json。根据您的要求，每行都有一个隐藏字段..

```
@foreach(var item in Model.Whatever) {
 <tr data-id="@item.Id"> ... etc </tr>
 <input type="hidden" val="@Json(model)" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:32:10.870

您是否考虑过使用类似[Knockout.js](http://knockoutjs.com/)或任何其他基于模型的模板 Javascript 语言（有很多，包括 Backbone、Angular 等）？您可以简单地将整个模型绑定到 Javascript（将其序列化为 JSON）。然后，您可以使用模板来生成表格。这是我能给你的最好建议。

如果您想要一种快速/简单的方式，您可以随时执行以下操作：

```
<script>
var dataMap = {};
</script>

@foreach(var item in Model.Whatever) {
 <tr data-id="@item.Id"> ... etc </tr>
 <script>
dataMap['@item.Id'] = @Json(item); // you'd have to make a Html helper to do this
</script>
} 
```

# windows - 将目录添加到 Windows Path 变量会影响性能吗？

> ID：11914960
> 
> 赞同：6
> 
> 时间：2012-08-11T13:08:11.110
> 
> 标签：windows, performance, path, environment-variables

环境变量 Path 包含 Windows 查找程序以运行具有不同扩展名的文件的位置。更多的目录意味着更多的地方可以查找相关程序，因此如果有很多目录，Windows 性能会随着时间的推移而下降吗？

我确实尝试在谷歌上搜索，但我找不到任何支持或反对我的问题的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-21T09:45:14.303

如果将其放在 PATH 中，会影响您的性能的一件事是网络位置。

你真的想避免这种情况，尤其是在不稳定的网络上。尝试访问 PATH 上不可用的位置在性能方面是可怕的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:20:15.790

从技术上讲，很可能需要更多时间来搜索更多路径。实际上，除非有人极端地添加*数千*条路径，否则它可能并不重要。Windows 还为文件系统使用一些缓存来加速此类搜索。

# iphone - 异常 CPMessageException: (null) in uiwebview

> ID：11914961
> 
> 赞同：0
> 
> 时间：2012-08-11T13:08:27.617
> 
> 标签：iphone, ios, ipad, uiwebview

我是 iPhone 的新手，我正在尝试在 UIWebView 中打开 .doc 文件，我编写了以下代码

```
NSString *urlAddress = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@.doc", docName] ofType:nil]; 

NSLog(@"in search the document url address: %@", urlAddress);

NSURL *url  = [NSURL fileURLWithPath:urlAddress];
NSURLRequest *requestObj  = [NSURLRequest requestWithURL:url];

[_webView loadRequest:requestObj]; 
```

该应用程序不会崩溃，但它给了我以下信息：

```
EXCEPTION CPMessageException: (null) 
```

并加载一个空白页

在这个问题上有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T14:14:09.873

查看这两个 SO 帖子： [Reading Open-XML documents in IOS](https://stackoverflow.com/questions/2131430/reading-microsoft-word-document-in-iphone) [any objective-c library to parse/read word documents？](https://stackoverflow.com/questions/8849144/any-objective-c-library-to-parse-read-word-documents)

# cakephp - 如何限制cakephp中的递归

> ID：11914963
> 
> 赞同：0
> 
> 时间：2012-08-11T13:08:53.010
> 
> 标签：cakephp, find, cakephp-2.0, limit, recursive-query

我正在做一个电影网站项目。我需要限制每个电影页面 5 条评论。

```
$this->Movie->find('first', array(
    'conditions' => array('Movie.url' => $req ), // URL to fetch the required page
    'recursive' => 1
)); 
```

使用上面的代码，我得到了 1 部电影的详细信息以及所有（目前近 20 条）与该电影相关的评论。那么如何将评论限制为 5 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:31:39.040

你可以试试这个：

```
$this->Movie->find('all', array(
    'conditions' => array('Movie.url' => $req ), // URL to fetch the required page
    'limit'=>5,
    'recursive' => -1
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:35:16.167

我想没有人知道如何解决，我找到了一些我可以暂时解决的方法。请有人告诉我最佳做法。

```
$movie = $this->Movie->find('first', array(
     'conditions' => array('Movie.url' => $req ),
 'recursive' => 0
));
$this->loadModel('MovieReview');
$movieReview = $this->MovieReview->find('all',array(
    'conditions' => array('MovieReview.movie_id' => $movie['Movie']['id'] ),
    'limit' => 5,
    'recursive' => -1
));
$movie['MovieReview'] = $movieReview; 
```

如果有人需要回答这个问题，请回答最佳实践。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T16:05:05.040

```
$this->Movie->find('all', array(
    'conditions' => array('Movie.url' => $req ), // URL to fetch the required page
    'contain' => array('MovieReview' => array('limit' => 5))
)); 
```

有了这个，你将只获得 5 MovieReview 对于每部电影返回

*对不起我的英语不好*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T22:57:18.930

尝试关联，设置限制选项

```
 /**
     * hasMany associations
     *
     * @var array
     */
    public $hasMany = array(
        'MovieReview' => array(
            'className' => 'MovieReview',
            'foreignKey' => 'movie_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '25',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    ); 
```

# java - 爬取ajax加载的内容

> ID：11914964
> 
> 赞同：0
> 
> 时间：2012-08-11T13:08:54.120
> 
> 标签：java, javascript, ajax, web-crawler

现在很多网站都包含一些通过ajax加载的内容（例如，一些视频网站中的评论）。通常我们无法爬取这些数据，得到的只是一些js源代码。那么问题来了：在获得 html 响应并到达我们想要的最终页面后，我们可以通过哪些方式执行 javascript 代码？

我知道 HtmlUnit 具有执行后台 js 的能力，但是存在一些错误和错误。还有其他工具可以帮助我吗？

有人告诉我，我可以爬取ajax请求的url，分析它的参数，然后再次发送请求，从而获取数据。如果事情不能按照我上面提到的方式解决，谁能告诉我如何提取 ajax url 并以正确的格式发送请求？

顺便说一句，如果语言是java，那将是最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T18:18:16.970

是的，Netwoof 可以轻松爬取 Ajax。它的 API 和机器人构建器让您无需一行代码即可完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T20:28:21.250

这就是 HTTP 的伟大之处，您甚至不需要 java。我用于调试 AJAX 的 goto 工具是 chrome 扩展[Postman](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCsQFjAA&url=https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en&ei=zzhQU_3-PM2msATBvYCQBQ&usg=AFQjCNHaecLwAKk91gpdCY_y1x_ViIrHwQ&sig2=uETmIUWNb-s9ynxuTvikYQ&bvm=bv.64764171,d.cWc)。我首先查看 chrome 调试器中的请求并识别显着位（url 或表单编码参数等）

然后它可以像使用 Postman 在服务器上打开一个选项卡并启动请求一样简单。只要它们都在同一个浏览器上下文中，您的所有 cookie（用于身份验证等）也将一起发送。

# ios - 使用 iCloud（手动保存）

> ID：11914966
> 
> 赞同：0
> 
> 时间：2012-08-11T13:09:01.577
> 
> 标签：ios, icloud-api

我正在尝试实现我自己的文档方式 - 我的用户创建一个文档，然后他选择是否将其上传到 iCloud。上传到 iCloud 后，我希望文档只能以只读方式使用——这意味着我已经确定了它的名称，用户编写了内容，选择上传，从现在开始他只能查看文档内容并且名称或完全删除文档 - 但不能修改的是内容或名称。（该文档仅包含文本）。

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:38:45.153

是的。那应该是很有可能的。

您可以为您的文档扩展 UIDocument 并让管理您的文档的类提供不同的功能，您可以根据文档的 url 是否返回 true 来选择实现`[[NSFileManager defaultManager] isUbiquitousItemAtURL:fileURL]`。

# c++ - c++ ListView - 使用 ListView_DeleteAllItems 后无法插入新项目

> ID：11914971
> 
> 赞同：2
> 
> 时间：2012-08-11T13:09:27.020
> 
> 标签：c++, listview, winapi, mfc

我有一个 ListView 控件，其中包含在 WM_CREATE proc 中初始化的 4 列。

```
 hListView1 = CreateWindowEx(WS_EX_CLIENTEDGE, WC_LISTVIEW, NULL, WS_CHILD|WS_VSCROLL|WS_HSCROLL|WS_VISIBLE|LVS_REPORT|LVS_SHOWSELALWAYS, 230, 20, 300, 250, hwnd, (HMENU)ID_EDIT1, GetModuleHandle(NULL), NULL);
        ListView_SetExtendedListViewStyle(hListView1, LVS_EX_FULLROWSELECT | LVS_EX_HEADERDRAGDROP);
            lvCol.mask = LVCF_FMT | LVCF_WIDTH | LVCF_TEXT | LVCF_SUBITEM;
        lvCol.fmt = LVCFMT_LEFT;

        lvCol.iSubItem=0;
        lvCol.cx=30;
        lvCol.pszText="";
        ListView_InsertColumn(hListView1, 0, &lvCol);

        lvCol.iSubItem=1;
        lvCol.cx=150;
        lvCol.pszText="Name";
        ListView_InsertColumn(hListView1, 1, &lvCol);

        lvCol.iSubItem=2;
        lvCol.cx=50;
        lvCol.pszText="Size";
        ListView_InsertColumn(hListView1, 2, &lvCol);

        lvCol.iSubItem=3;
        lvCol.cx=80;
        lvCol.pszText="Modified";
        ListView_InsertColumn(hListView1, 3, &lvCol); 
```

然后我有一个可以插入项目的函数（在我调用 deleteallitems 之前它工作正常）

```
...
LVITEM lvItem;
j = 0;
while(FindNextFile(hFind,&FindFileData)){
lvItem.iItem = j;
        lvItem.iImage = 1;
        if(FindFileData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY){
            lvItem.iImage = 0;
        }
        ListView_InsertItem(hListView1, &lvItem);
        ListView_SetItemText(hListView1, j, 1, FindFileData.cFileName);
        ListView_SetItemText(hListView1, j, 2, msg1);
        ListView_SetItemText(hListView1, j, 3, msg2);
        j++;
} 
```

但是每当我打电话时

```
ListView_DeleteAllItems(hListView1); 
```

如果在我调用插入项目的函数后，我的列表视图被清除（列仍然存在）但没有插入新项目。我听说索引未清除但我无法弄清楚。

提前致谢 ;-）

解决方案：添加

```
 lvItem.mask = LVIF_IMAGE | LVIF_STATE;
lvItem.state = 0;
lvItem.stateMask = 0;
lvItem.iSubItem = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:20:35.147

您没有设置`lvItem.mask`，因此`ListView_InsertItem`不知道哪些字段有效，哪些字段无效。

尝试这样的事情：

```
...
LVITEM lvItem;
lvItem.mask = LVIF_IMAGE | LVIF_DI_SETITEM;
j = 0;
... 
```

# php - 简单Joomla模块中的PHP严格标准错误？

> ID：11914972
> 
> 赞同：0
> 
> 时间：2012-08-11T13:09:37.050
> 
> 标签：php, joomla

我正在做一个关于 joomla 模块的教程，但是我遇到了一个严格的 PHP 标准错误。

错误：

> 严格标准：非静态方法 modReviewsHelper::getReviews() 不应在 C:\wamp\www\Joomla_2.5\modules\mod_reviews\mod_reviews.php 中的第 7 行调用堆栈中静态调用

mod_reviews.php

```
<?php

defined('_JEXEC')or die('Restricted access here?');

require_once(dirname(__FILE__).DS.'helper.php');

$reviews = modReviewsHelper::getReviews($params);

require(JModuleHelper::getLayoutPath('mod_reviews'));
?> 
```

助手.php

```
<?php
class modReviewsHelper{

    function getReviews( $params ){
        return 'I am a happy user!';
    }
}
?> 
```

tmpl/default.php

```
<?php
defined('_JEXEC')or die('Restricted access here?');
echo $reviews;
?> 
```

我该如何解决这个问题并确保将来不会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:24:28.233

```
<?php
class modReviewsHelper{

    static function getReviews( $params ){
        return 'I am a happy user!';
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:09:40.297

在 joomla 中转到后端
1) 单击管理员 -> 全局配置
2) 转到**服务器**选项卡
3) 进行错误报告：服务器设置中的“无”:-)

# c# - 从 sql server 2008 获取/选择数据到数据网格视图中

> ID：11914974
> 
> 赞同：3
> 
> 时间：2012-08-11T13:09:48.220
> 
> 标签：c#, sql, database, visual-studio-2010

任何人都可以帮助我进行数据库查询，以将从 Sql Server 2008 获取/选择的数据显示到 c# 桌面应用程序中。我已附上所需的表格图和数据网格视图，请尽快回答。我需要在gridview中显示的是：

1.  仓库编号
2.  仓库名称
3.  类型名称
4.  计数名称
5.  包
6.  每袋磅
7.  总磅

图表： ![在此处输入图像描述](../Images/bcef3ef4528a7a95ef84f6e102dc0b70.png)

![在此处输入图像描述](../Images/1a3eb68b129a0bd2a5184fccb01d958d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:29:53.413

我得到了答案：

```
select 
    g.godown_id, g.godown_name, t.type_name, b.count, r.bags_received,
    b.lb_per_bag, s.supplier_name
from
    tbl_yarn_book b, tbl_godown g, tbl_godown_transaction gt, 
    tbl_yarn_receive r, tbl_yarn_supplier s, tbl_yarn_type t                        
where
    gt.godown_id = g.godown_id 
    and gt.receive_id = r.receive_id
    and r.book_id = b.book_id 
    and b.type_id = t.type_id 
    and b.supplier_id = s.supplier_id 
```

# wcf - 从 WCF 服务检索数据

> ID：11914976
> 
> 赞同：1
> 
> 时间：2012-08-11T13:09:56.850
> 
> 标签：wcf, linq-to-sql

假设我有两个表的数据库 -`Groups`和`Items`.

*   表`Groups`只有两列：`Id`和`Name`。
*   表`Items`有三列`Id`：`GroupId`和`Name`。

`Groups`如您所见，和之间存在一对多的关系`Items`。

我正在尝试使用 WCF 和 LINQ 构建 Web 服务。我添加了新的 LINQ to SQL 类文件，并导入了这两个表。Visual Studio 自动为我生成了适当的类。

之后，我为服务创建了简单的客户端，只是为了检查一切是否正常。调用`GetAllGroups()`方法后，我从`Groups`表中获取所有组。但他们的财产`Items`总是空的。

所以我的问题是 - 有没有办法强制 WCF 返回整个班级（整个`Group`班级和所有`Items`属于它的班级）？或者这是它应该表现的方式？

编辑：这是 WCF 服务中返回所有的函数`Groups`：

```
 public List<Group> GetAllGroups()
    {
        List<Group> groups = (from r in db.Groups select r).ToList();

        return groups;
    } 
```

我在调试时检查过，函数`Group`内的每个对象`GetAllGroups()`都有它的项目，但是在客户端收到它们之后 - 每个`Items`属性都设置为`null`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T15:31:03.270

最有可能的是，您遇到了 Linq-to-SQL 的默认“延迟加载”行为。当您调试并查看`.Items`集合时 - 这会导致项目被加载。但是，当您的服务代码正常运行时，这不会发生。

但是，您可以强制“急切加载”这些项目 - 尝试如下操作：（*有关更多详细信息，**请参阅[使用 DataLoadOptions 控制延迟加载](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/10/06/linq-to-sql-deferred-loading-lazy-load.aspx)或[LINQ to SQL、延迟加载和预取](http://www.west-wind.com/weblog/posts/2009/Oct/12/LINQ-to-SQL-Lazy-Loading-and-Prefetching)*）

```
public List<Group> GetAllGroups()
{
    // this line should really be where you *instantiate* your "db" context!
    db.DeferredLoadingEnabled = false;

    DataLoadOptions dlo = new DataLoadOptions();
    dlo.LoadWith<Group>(g => g.Items);

    db.LoadOptions = dlo;

    List<Group> groups = (from r in db.Groups select r).ToList();

    return groups;
} 
```

当您调用您的服务时，您现在是否填充了`Items`集合？

# vim - Vim E139：解决方法

> ID：11914977
> 
> 赞同：2
> 
> 时间：2012-08-11T13:10:06.847
> 
> 标签：vim, vi

我有一个`MoveToFile`将选定文本附加到文件然后将其删除的函数。

```
command! -nargs=* -complete=file -range=% -bang -bar MoveToFile
\   :<line1>,<line2>call MoveToFile(<q-args>, <bang>0)
function! MoveToFile(fname, overwrite) range
    let r = a:firstline . ',' . a:lastline
    exe r 'w>>' . ' !'[a:overwrite] . fnameescape(a:fname)
    exe r 'd'
endfunction 
```

当我试图追加的文件已经在 Vim 中打开时，就会出现问题。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:26:53.113

你可以抓住`E139: File is loaded in another buffer`. 如果您确实需要处理这种极端情况，请拉出内容，通过 打开现有缓冲区`:buffer {fname}`，然后粘贴它们：

```
try
   exe r 'w>>' . ' !'[a:overwrite] . fnameescape(a:fname)
catch /^Vim\%((\a\+)\)\=:E139/
    exe r 'yank'
    exe 'sbuffer' fnameescape(a:fname)
    $put
    hide
endtry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:33:02.660

您可以使用`writefile()`（请注意，这将覆盖文件，因此必须首先获取当前内容，因此不适用于大型文件）：

```
function MoveToFile(fname, _) range abort
    let lines=readfile(a:fname, 'b')
    if !empty(lines) && empty(lines[-1])
        call remove(lines, -1)
    endif
    let [first, last]=((a:firstline>a:lastline)?([a:lastline, a:firstline]):([a:firstline, a:lastline]))
    let lines+=getline(first, last)+['']
    call writefile(lines, a:fname, 'b')
    execute first.','.last.'delete _'
endfunction 
```

`:w>>`注意：要获得与您需要替换行相同的编码

```
 let lines+=getline(first, last)+[''] 
```

和

```
 let lines+=map(getline(first, last), 'iconv(v:val, &enc, &fenc)')+[''] 
```

. 还要尊重`'dos'`文件格式：

```
 let lines+=map(getline(first, last), 'iconv(v:val, &enc, &fenc)'.((&ff is# 'dos')?('."\r"'):('')))+[(&ff is# 'dos')?("\r"):('')] 
```

（尊重`'mac'`文件格式比较棘手）。

# java - 从多个整数数组创建一个字符串数组

> ID：11914978
> 
> 赞同：-1
> 
> 时间：2012-08-11T13:10:14.790
> 
> 标签：java, arrays

我长期以来一直陷入以下问题 -

我想从 3 个 Int 数组创建一个字符串数组 StrTime。

**输入数组**

```
int Time1[]={"1.1","2.1","4.1"};
int Time2[]={"2.5","4.7","5.1"};
int Time3[]={"12.55","1.11","2.1"};

CurrentTime = 2.0; 
```

所以循环遍历每个整数数组，检查 Time1，第一个大于 2.0 的数组项应该放在我们的 String 数组中，不检查 Time2 是否相同，检查 Time3。

最后我们应该得到输出字符串数组 -

**输出数组**

```
String strTime[] ={"2.1","None","2.1"} 
```

有人能帮我吗？？？？

# 更新：

还有一种方法可以创建如下所示的双 []-\ {1,2,,3,4,,5}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:40:28.310

当你编译它时，你可以使用`org.apache.commons.collections.CollectionUtils`and`org.apache.commons.collection.Predicate`来过滤而不使用循环。

```
CollectionUtils.find( getACollectionOfYourArray() , new Predicate() {
            public boolean evaluate(Object val) {
                // if is gt 2
                return true;
            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:15:26.270

可能是一个错字，但这是初始化数组的方法（它们应该是`double`）：

```
double time1[]={1.1, 2.1, 4.1};
double time2[]={2.5, 4.7, 5.1};
double time3[]={12.55, 1.11, 2.1}; 
```

提示：

*   为结果创建一个新`String`数组
*   `for`- 遍历第一个数组
*   将当前值与您的阈值进行比较，`if`当前值更大，然后将其存储在字符串数组的第一个槽中（需要将其转换为字符串），然后`break`退出循环。
*   对其他两个数组重复最后一步

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:16:54.863

采用：

```
 double time1[]={1.1, 2.1, 4.1};
    double time2[]={2.5, 4.7, 5.1};
    double time3[]={12.55, 1.11, 2.1}; 
```

# javascript - js/jquery 比较的正确语法？

> ID：11914981
> 
> 赞同：1
> 
> 时间：2012-08-11T13:10:33.593
> 
> 标签：javascript, jquery, syntax

我已经尝试了很多不同的组合，但它们似乎都无法正常工作，我知道它必须与我的语法有关......

基本上，我有一排复选框。十月至三月。如果仅选中一个复选框，并且其中一个复选框是十月或三月，则触发。

这是我的代码。（我已经能够正确地抓住 noofmonths 了。）

```
if (noofmonths == "1" && ( $('#month_oct:checked') || $('#month_mar:checked') )) {
        tempbase = tempbase + 200;
    }
alert(tempbase); 
```

我遇到的问题是它似乎并不关心我检查了几个月。无论哪个月，我总是添加 200.... noofmonths 确实可以正常工作，因为如果我选中了多个复选框，这不会触发。

我在这里想念什么？感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T13:13:56.817

问题是`$('someselector')`即使没有元素匹配，它也总是返回一个 jQuery 对象`'someselector'`。任何对象，即使是空的，都是“真实的”。

你应该做的是：

```
if (noofmonths == "1" && ( $('#month_oct:checked').length > 0
                        || $('#month_mar:checked').length > 0 )) {

// OR

if (noofmonths == "1" && ( $('#month_oct').is(':checked')
                        || $('#month_mar').is(':checked')) { 
```

当没有元素匹配时，生成的 jQuery 对象`length`将是`0`. `.is()`另一方面，该方法返回一个布尔值。

话虽如此，我会考虑一种不同的方式来获得这种效果。我会给整行复选框一个公共类（除非它们已经共享一个`name`属性？），然后给特殊的复选框（Oct & Mar）一个额外的类：

```
<input type="checkbox" class="month" value="Jan">
...
<input type="checkbox" class="month oneonly" value="Mar">
... 
```

因为那时你可以这样做：

```
var $checked = $(".month:checked");
if ($checked.length === 1 && $checked.hasClass("oneonly")) {
    ... 
```

也就是说，首先将所有选中的框检索到`$checked`变量中，然后如果数字为 1 并且该数字具有将其标记为 3 月或 10 月的类...这样，如果将来 7 月突然变得“特别”，那么你d 只需在 html 中将“oneonly”类（或任何您喜欢的名称）添加到 July，您根本不需要更改 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:13:46.643

您可以使用该`length`属性：

```
var len = $('#month_oct:checked, #month_mar:checked').length;
if (noofmonths == "1" && len > 0) {
    tempbase = tempbase + 200;
} 
```

[演示](http://jsfiddle.net/KKyRK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T13:13:38.640

您必须测试匹配查询的长度。

```
if (noofmonths == "1" && ( $('#month_oct:checked').length || $('#month_mar:checked').length )) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:15:16.473

您只是在选择复选框，而不是检查它们是否真的被选中。

```
if (noofmonths == "1" && ( $('#month_oct')[0].checked || $('#month_mar')[0].checked )) {
    tempbase = tempbase + 200;
} 
```

or`$('#month_oct').is(':checked');`也会返回一个布尔值，或者您可以实际选中复选框，并检查选择器是否有长度，如其他答案中所示。

# c++ - C++/Win32 不推荐使用的字符串函数：mbstowcs、wcstombs，安全还是不安全？

> ID：11914982
> 
> 赞同：0
> 
> 时间：2012-08-11T13:10:51.530
> 
> 标签：c++, string, winapi

编译器（VC 2010）一直抱怨我使用它们。

如果不安全，请提供最简单的更换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T13:13:04.227

好吧，您拥有最常见的字符串函数的安全版本，它们结束于`_s`并提供了指定缓冲区长度的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:19:45.447

如果“安全”是指您可以使用这些功能而不必担心它们将来会消失？在这种情况下，很可能是的，因为这些函数是 C（可能还有 C++）标准的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T15:58:35.500

许多 Windows DLL 使用（导入、导出）这些不安全（也称为“过时”或“禁止”）的 API。这些是 Win32 的一部分！

![在此处输入图像描述](../Images/85b3497e4bc2c31c89693226f001a3be.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:17:10.497

我在 win-32 GDI+ 字符串绘制函数中使用了它们，该函数采用一个 char 数组，然后将它们转换为宽字符字符串，然后在屏幕上绘制。我也使用 VC++ 2010 express！工作没有任何泄漏。

# php - include_once 包括什么？仅变量/函数或其他东西？

> ID：11914985
> 
> 赞同：0
> 
> 时间：2012-08-11T13:11:03.203
> 
> 标签：php

我有一个包含以下代码的文件 test.php

```
<?php
//name of this file is test.php
$foo = "some value";
include_once 'extras.php';
$bar = "another value";
echo "test.php: foo is $foo and bar is $bar <br />";
?> 
```

另一个包含代码的文件

```
<?php
echo "extras.php: foo is $foo and bar is $bar <br />";
?> 
```

输出表明来自 extras.php 的 echo 语句也包含在 test.php 中，而我作为新手假设 include_once 或 include 构造仅处理变量和函数而忽略其他内容。什么是正确的，请指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:15:25.477

`include_once`将整个脚本包含到调用脚本中，*只要它之前没有包含过*。这包括所有变量、函数、`echo`s...一切。实际上，代码被导入到该`include_once`行所在的空间中，因此可以`included`在调用脚本中引用 ed 脚本的变量。

您发布的脚本在`include`处理 s 后如下所示：

```
<?php
//name of this file is test.php
$foo = "some value";
echo "extras.php: foo is $foo and bar is $bar <br />";
$bar = "another value";
echo "test.php: foo is $foo and bar is $bar <br />";
?> 
```

请注意，如果找不到文件，脚本不会出错，但不会设置`include`d 脚本中设置的变量。为此，使用`require_once`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:18:33.400

您可以将其[`include_once`](http://php.net/manual/en/function.include-once.php)视为“如果尚未包含该文件，请删除此行并将文件的内容粘贴到此处”。

对我来说有一个有点奇怪的例外，就是这样思考与包含文件中定义的变量的变量范围有关（它们最终会在全局范围内）。更多关于[这里](http://www.php.net/manual/en/function.include.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T13:22:36.953

你更好地理解`include`和`include_once`

例如，我们可能取 3 个文件；

**函数.PHP**

```
<?php
function foo(){
echo 'some code';
}
?> 
```

**GLOBALS.PHP**

```
<?php
include('FUNCTIONS.PHP');
foo();
?> 
```

**头文件.PHP**

```
<?php
include('FUNCTIONS.PHP');
include('GLOBALS.PHP');
foo();
?> 
```

现在如果你尝试打开`HEADER.PHP`你会得到一个错误，因为已经`GLOBALS.PHP`包含`FUNCTIONS.PHP`了。你会得到一个错误，说`function foo()`已经在 中声明`GLOBALS.PHP`，并且我也包含在`HEADER.PHP`- 这意味着我已经包含`FUNCTIONS.PHP`了两次。

所以为了确保我只包含`FUNCTIONS.PHP`一次，我应该使用这个`include_once()`函数，所以我`HEADER.PHP`应该是这样的：

```
<?php
include_once('FUNCTIONS.PHP');
include('GLOBALS.PHP');
?> 
```

现在当我打开时`HEADER.PHP`，我不会再收到错误了，因为 PHP 知道`FUNCTIONS.PHP`只包含**一次**文件。

所以为了避免出错，在你的 php 代码中使用`include_once()`而不是函数是安全的。`include()`

如果你知道你的 PHP 代码很乱，那么`include_once()`使用`include()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T13:19:36.393

您应该首先阅读PHP 手册中的[include](http://php.net/manual/en/function.include.php)和[include_once](http://www.php.net/manual/en/function.include-once.php)函数参考。长话短说 - 两个语句基本上合并原始/包含文件中的代码，因此包含文件中的所有内容都在源文件中运行/可用，无论是函数、变量、类、回显语句......（但是，include_once 为该名称已经暗示该文件仅包含一次，如果尚未包含，则第一次包含该文件，无论您在其中放置了多少 include_once 语句）...

# asp.net - 使用 ASP.NET 在母版页中显示访问者位置，如国家、州和城市

> ID：11914989
> 
> 赞同：1
> 
> 时间：2012-08-11T13:12:00.813
> 
> 标签：asp.net, c#-4.0

如何使用 ASP.NET 获取国家、州和城市等访问者位置，我看到了一些示例 所有都基于 IP 地址来获取详细信息（基于一些免费服务），现在我的问题是上面的示例，服务只能注册 IP地址，但现在我的任务是当用户浏览我的 asp.net 网站时，显示国家、州和城市如何可能，请给我任何建议，紧急

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T14:05:42.847

如果您[注册](http://ipinfodb.com/ip_location_api.php)（免费）一个 api 密钥，您可以使用 WebClient 请求到类似 ipinfodb 的东西：

```
var client = new System.Net.WebClient();
var ip = Request.UserHostAddress;
var url = string.Format("http://api.ipinfodb.com/v3/ip-city/?key={0}&ip={1}", apiKey, ip);
var info = client.DownloadString(url).ToString(); 
```

然后解析并显示`info`在您的页面中。

IP 定位器 API 有很多，不管你用哪一个，大体思路都是一样的，但是你会`info`根据服务的不同，解析出不同的结果。

但是 walther 是正确的，从 IP 地址获取位置信息并不总是可靠的。

# android - 使用自定义 ArrayAdapter 向 listView 添加一行而不更新整个列表

> ID：11914991
> 
> 赞同：0
> 
> 时间：2012-08-11T13:12:03.360
> 
> 标签：android, android-layout, android-listview

我在 android 聊天应用程序中有一个用于 listView 的自定义 ArrayAdapter。我在 editText 组件中输入了一些文本，然后在按下按钮时提交文本。

问题是，当我的自定义适配器中的 getView 方法被调用时，整个列表都会被刷新，并且我列表中的每一行都与最后提交的信息相同。

有人知道如何使用自定义 ArrayAdapter 和其他行在 listView 中添加一行以获得原始文本吗？

这就是我调用适配器的方式：

```
m_discussionThread = new ArrayList<String>();
    m_discussionThreadAdapter = new ChatListAdapter(this, m_discussionThread);
    list.setAdapter(m_discussionThreadAdapter);

    Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {

            String text = message.getText().toString();

            Message msg = new Message(to, Message.Type.chat);
            msg.setBody(text);
            m_connection.sendPacket(msg);               
            m_discussionThread.add(text);   
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    m_discussionThreadAdapter.notifyDataSetChanged();

                }
            });
        }
    }); 
```

这是适配器：

```
public ChatListAdapter(Context context, ArrayList<String> chatValue) {  
    super(context,R.layout.list_row_layout_even, chatValue);
    this.context = context;     
    this.chatValue = chatValue;     
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);         
    View rowView  = inflater.inflate(R.layout.list_row_layout_even, parent, false);
    TextView chatText = (TextView) rowView.findViewById(R.id.chat_message);
    chatText.setText(chatValue.get(chatValue.size()-1).toString());
    return rowView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T13:45:40.983

在底部附近，您将获得 data element `chatValue.size()-1`。这意味着通过 getView() 加载的每个视图都将具有最后一个数据元素的属性。您应该改用`position`. 例子：

```
private Context mContext;
private LayoutInflater mInflater = null;

private ArrayList<String> mChatValue;

public ChatListAdapter(Context context, ArrayList<String> chatValue) {  
    super(context,R.layout.list_row_layout_even, chatValue);
    mContext = context;     
    mChatValue = chatValue;     
}

private LayoutInflater getInflater(){
    if(mInflater == null)
        mInflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    return mInflater;       
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView;
    if(convertView == null) // Only inflating if necessary is great for performance
        rowView = getInflater().inflate(R.layout.list_row_layout_even, parent, false);
    else
        rowView = convertView;

    TextView chatText = (TextView) rowView.findViewById(R.id.chat_message);
    chatText.setText(mChatValue.get(position));

    return rowView;
} 
```

# iphone - 发布一个ios应用程序？

> ID：11914996
> 
> 赞同：1
> 
> 时间：2012-08-11T13:12:21.903
> 
> 标签：iphone, ipad, ios5, release

我有一个由其他人开发的 iOS 项目，现在我必须更新它并为客户端构建一个版本，以便他们对其进行测试。我已经更新了它，在发布模式下存档时，得到错误-

> 身份“iPhone Developer: XYZ”与默认钥匙串中的任何有效、未过期的证书/私钥对不匹配

我是 iOS 新手。我有一些想法，我必须更改开发人员 ID 或证书中的类似内容。但不知道如何。谁能帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T13:20:37.350

您需要拥有该配置文件所在帐户的 Apple 开发证书和 .p12 文件。

如果您没有，则需要从钥匙串创建它，方法是向授权机构请求证书-> 生成 csr 并在您的开发者帐户中提交。

希望它对你有帮助............

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T13:53:11.397

您需要进行“临时”分发。

1.  为“发布”构建您的应用程序。
2.  转到“组织者”并选择存档。
3.  在存档中选择您的构建。
4.  使用“分发”按钮并选择中间的单选按钮。“保存用于企业或临时分发”。

这将产生一个 .ipa 并询问您要将其保存在哪里。你可以把它放在你的桌面上并分发它。

为了构建一个 Ad Hoc Build，你必须给自己一个“Ad Hoc Distribution”证书。您可以在供应门户区域的 Apple iPhone 开发人员站点中执行此操作，该区域位于此处： [iOS 供应门户](https://developer.apple.com/ios/manage/overview/index.action)

您还需要以与授权自己的设备进行开发相同的方式授权要在其上运行测试版本的设备。

如果您必须在许多测试设备上运行应用程序并且测试人员不是技术人员。我建议你看看一个很好的在线服务，叫做“TestFlightApp”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T15:33:32.800

您没有用于开发人员证书的有效钥匙串项目，这就是错误告诉您的内容。这是一个创建并安装它的案例。

但是对于交付测试版本 - 您需要使用包含测试设备的 udid 的分发证书来创建临时分发。

在任何一种情况下——以及进一步的故障排除——Apple 都有一个方便的[技术说明](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html)来处理这些类型的问题以及如何解决它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T20:19:00.370

如果你去你的项目`Build Settings -> Code Signing -> Code Signing Identity`，你可以将签名证书更改为你自己的。

# php - 如何使这个 MySQL 查询更快？

> ID：11914998
> 
> 赞同：0
> 
> 时间：2012-08-11T13:12:56.303
> 
> 标签：php, mysql, performance

我有一个 MySQL 查询，有时需要超过 1 秒才能执行。查询如下：

```
SELECT `id`,`totaldistance` FROM `alltrackers` WHERE `deviceid`='FT_99000083426364' AND (`gpsdatetime` BETWEEN 1341100800 AND 1342483200) ORDER BY `id` DESC LIMIT 1 
```

此查询在循环中运行以检索一个月中某些天的行等。这会导致页面有时需要超过 25 秒才能加载...

表结构如下：

```
CREATE TABLE IF NOT EXISTS `alltrackers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `deviceid` varchar(50) NOT NULL,
  `lat` double NOT NULL,
  `long` double NOT NULL,
  `gpsdatetime` int(11) NOT NULL,
  `version` int(11) DEFAULT NULL,
  `totaldistance` int(11) NOT NULL DEFAULT '0',
  `distanceprocessed` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `id_deviceid` (`id`,`deviceid`),
  UNIQUE KEY `deviceid_id` (`deviceid`,`id`),
  KEY `deviceid` (`deviceid`),
  KEY `deviceid_gpsdatetime` (`deviceid`,`gpsdatetime`),
  KEY `gpsdatetime_deviceid` (`gpsdatetime`,`deviceid`),
  KEY `gpsdatetime` (`gpsdatetime`),
  KEY `id_deviceid_gpsdatetime` (`id`,`deviceid`,`gpsdatetime`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=677242 ; 
```

我添加了各种索引组合（请告诉我要删除哪个），以尝试让 MySQL 使用索引进行查询，但无济于事。

这是解释输出：

```
id  select_type  table  type  possible_keys  key  key_len  ref  rows  Extra  
1 SIMPLE alltrackers index deviceid_id,deviceid,deviceid_gpsdatetime,gpsdatet... PRIMARY 4 NULL 677238 Using where 
```

我使用 ORDER BY ASC/DESC LIMIT 1 的原因是因为我需要查询的第一行和最后一行。在没有 LIMIT 1 的情况下运行查询并使用 PHP 检索第一行和最后一行会更快吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:24:49.433

我能想到的几件事：

1.) 无论如何我都不是 mySQL/DBA 大师，但那里的索引似乎有点矫枉过正。通常，我会确保对查询或连接的列进行索引；所以你想要一个用于 deviceid 和 gpsdatetime。每次查询 1 秒并不可怕，因此您在这里的回报可能会受到限制。

2.) 尝试消除循环。如果您要返回数据库 25 次；只需打开/关闭连接等，您就会产生开销。访问数据库一次，然后使用 PHP 处理结果以获得所需的最终数据可能会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T13:25:06.757

我不能说你的确切情况，但我发现查询所有行并忽略除第一个之外的所有行比限制语句更快（虽然这是使用 SQL Server）。它很容易做到 - 删除您的限制 1 条款并试一试。然后，您可以使用 PHP 读取第一个和最后一个，从而减少 MySQL 实例的负载（即运行单个查询而不是 2 个）。

顺便说一句，为什么你有 2 个具有相同列的唯一键 - id_deviceid 和 deviceid_id？删除所有索引，然后重新添加它们，对于快速数据库，您确实希望尽可能少的索引。

# grails - 无法解析属性：日期

> ID：11914999
> 
> 赞同：-1
> 
> 时间：2012-08-11T13:12:59.127
> 
> 标签：grails, groovy, gsp, named-query

我正在研究一些代码来查询特定日期。

我的 Person.groovy 中有这个：

```
Date dateCreated
static constraints = {
dateCreated type:"date"
}

static namedQueries = {
dateMe{ q->
eq("date.created", q)   
}
} 
```

我在 gsp 中这样称呼它：

```
<g:set var="dated" value="${Person.dateMe(personInstance.dateCreated)}"/> 
```

但我收到此错误“无法解析属性：日期：project.Person”我错过了什么吗？我应该在查询之前格式化日期吗？请帮忙，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T13:17:21.570

我相信

```
eq("date.created", q) 
```

应该

```
eq("dateCreated", q) 
```