# StackOverflow 问答 10748000-10748999

# c# - 在一个窗口中模拟鼠标 - C#

> ID：10748005
> 
> 赞同：1
> 
> 时间：2012-05-25T03:09:58.893
> 
> 标签：c#, mouse, simulation

我知道这是可能的，因为我已经看到一些类似于我正在开发的应用程序使用它，但我对如何实现它一无所知。基本上，我需要在自己的应用程序表单中创建一个鼠标。即使表单被最小化，它也应该能够点击表单上的东西。

到目前为止，我的研究只发现了数百人要求使用 mouse_event 使用 Windows API 模拟鼠标事件。这不是我需要的，因为它只点击屏幕而不是潜在的隐藏表单。

希望有人可以在这里为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:25:04.807

如果你真的强调“鼠标**模拟**”。Autoit 是一个不错的选择。-*一种免费软件，类似 BASIC 的脚本语言，专为自动化 Windows GUI 和通用脚本而设计。*
语法简洁易学。免费的 autoit 编辑器可以生成 exe，您可以在应用程序中执行它。

**示例 1**：模拟单击某些坐标：

```
MouseClick ( "button" [, x, y [, clicks [, speed]]] ) 
```

[http://www.autoitscript.com/autoit3/docs/functions/MouseClick.htm](http://www.autoitscript.com/autoit3/docs/functions/MouseClick.htm)

**示例 2**：模拟单击按钮

```
ControlClick ("My Window", "", "[CLASS:Button; TEXT:Finish; INSTANCE:2]") 
```

[http://www.autoitscript.com/autoit3/docs/functions/ControlClick.htm](http://www.autoitscript.com/autoit3/docs/functions/ControlClick.htm)

如果您真的想要在您的应用程序中进行鼠标模拟，我认为没有任何解决方法最终不会通过 WinAPI 发送鼠标事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T13:17:21.990

SendMessage 和 PostMessage 应该适用于隐藏表单，将它们与 WM_MOUSEXXXX 代码一起使用，并在 wp 或 lp 参数中提供鼠标位置，我忘记了。

# android - 参考外部项目库源码树

> ID：10748008
> 
> 赞同：1
> 
> 时间：2012-05-25T03:10:34.160
> 
> 标签：android, android-library

首先，我知道有几个针对这个主题的问题，但没有一个对我有帮助。

* * *

我正在使用 Android/ADT 插件开发我的第一个 Android 项目，我想使用[这个库](https://github.com/mrn/numberpicker)。我在 SO 和官方文档中搜索了如何完成此操作，并找到[了如何引用库项目](http://developer.android.com/guide/developing/projects/projects-cmdline.html#ReferencingLibraryProject)。

我运行了以下命令：

```
$ android update project --target 8 /path/to/workspace/myproject /path/to/workspace/numberpicker/lib
Resolved location of library project to: /path/to/workspace/numberpicker/lib
Updated project.properties
Updated local.properties
No project name specified, using Activity name 'SplashActivity'.
If you wish to change it, edit the first line of build.xml.
Added file /path/to/workspace/myproject/build.xml
Updated file /path/to/workspace/myproject/proguard-project.txt 
```

显然这一步工作正常。但是当我尝试`com.michaelnovakjr.numberpicker.NumberPicker`在 xml 布局中引用时，Eclipse 抱怨它找不到这个类。

然后我找到[了这个答案](https://stackoverflow.com/a/10643968/563154)并改变了我的`project.properties`：

```
# Before
android.library.reference.1=/path/to/workspace/numberpicker/lib
# After
android.library.reference.1=../numberpicker/lib 
```

但没有解决我的问题。

或许值得一提的是，这个库不是 Eclipse 项目，所以我无法在 Eclipse 中打开它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:28:50.337

库项目必须存在于同一个工作区中才能让 Eclipse 正确构建依赖项目，有关更多详细信息，请参阅开发指南[管理项目 - 库项目](http://developer.android.com/guide/developing/projects/index.html#LibraryProjects)：

> 但是，库项目与标准 Android 应用程序项目的不同之处在于，您不能将其直接编译为自己的 .apk 并在 Android 设备上运行。同样，您不能将库项目导出到自包含的 JAR 文件，就像对真正的库所做的那样。相反，您必须通过在依赖应用程序中引用库并构建该应用程序来间接编译库。
> 
> When you build an application that depends on a library project, the SDK tools compile the library into a temporary JAR file and uses it in the main project, then uses the result to generate the .apk. In cases where a resource ID is defined in both the application and the library, the tools ensure that the resource declared in the application gets priority and that the resource in the library project is not compiled into the application .apk. This gives your application the flexibility to either use or redefine any resource behaviors or values that are defined in any library.

In order to use numberpicker library, you need imported it as an Android Project in Eclipse, choose `File -> New -> Other ... -> Android -> Android project`, in the wizard window, check `Create projet from existing source` and choose the location.

# android - 如何在 Eclipse 中运行示例 MuPDF？

> ID：10748012
> 
> 赞同：2
> 
> 时间：2012-05-25T03:11:10.233
> 
> 标签：android, eclipse, mupdf

我在这里使用 Windows XP 和 Eclipse IDE 进行开发。我对如何使用 MuPDF 做了很多研究，发现了这个[，](https://stackoverflow.com/a/8587527/998732)但我不知道如何执行步骤 5-7。然后我对 MuPDF 进行了另一项研究，发现并遵循了这个[Readme.txt](http://mupdf.com/repos/mupdf/android/ReadMe.txt)，但我可以'没有得到第 3 步和第 6 步，在第 3 步中我在运行 Cygwin 时遇到错误，如果搜索 mintty，它会显示 Windows，在第 6 步中，我在哪里可以找到文件 pregen '**还从同一个地方获取 pregen 包并将其解压缩到 mupdf/pregen 中。**'。

[MuPDF](http://mupdf.com)是否有关于如何在 Android 中使用它的简单分步说明？或者有人可以指导我如何在 Windows 和 Eclipse IDE 中使用它？我对 android 很陌生，对 Cygwin、NDK 和 ANT 不熟悉。

# php - jquery 使用 .load 方法获取下拉列表

> ID：10748017
> 
> 赞同：0
> 
> 时间：2012-05-25T03:11:37.810
> 
> 标签：php, javascript, jquery, html

**我如何将 jquery ajax .load 函数用于下拉列表？**

这是我的 php 页面

```
<? 
$query="SELECT Name FROM supplier";
$result=mysql_query($query);
?>
<select name="ddlSupplier">
<option>Supplier Name</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value><?=$row['Name']?></option>
<? } ?>
</select> 
```

加载后如何获得价值？

```
$("#ddlSupplier").val()? this.val()? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:16:31.123

我没有您调用的标记`.load()`，因此我将`#placeholder`用作您将注入下拉列表的选择器：

```
$('#placeholder').load('yourphppage.php', function(html) {
   $(this).find('select[name=ddlSupplier]').val();
}); 
```

请注意，回调是在 HTML 插入之后调用的，因此您可以执行`find()`. [文档](http://api.jquery.com/load/)：

> 如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:13:56.057

你应该能够得到它，如你所说`.val()`

```
$(function () {
     $("#ddlSupplier").on('change', function () {
         var value = $(this).val();
     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:15:52.247

几个问题：

首先在 PHP 中，您尝试通过 an 选择下拉列表，`ID`但您没有设置下拉列表。所以添加了。此外，您实际上并没有为`<option>`'s 提供值，所以它也被添加了。

```
<? 
$query="SELECT Name FROM supplier";
$result=mysql_query($query);
?>
<select id="ddlSupplier" name="ddlSupplier">
<option>Supplier Name</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value="<?=$row['Name']?>"><?=$row['Name']?></option>
<? } ?>
</select> 
```

最后，在 JS 中，您需要获取选择选项的值，而不是`select`列表的值（因为`select`没有值）。

```
$("#ddlSupplier option:selected").val() 
```

# java - 如何将文件中所有使用的 ASCII 字符放入字典/数组/列表中并为每个字符分配一个值？

> ID：10748021
> 
> 赞同：0
> 
> 时间：2012-05-25T03:12:20.233
> 
> 标签：java, python

我基本上想读取一个文件（可以是 mp3 文件或其他文件）。扫描文件中所有使用的 ASCII 字符，并将它们放入字典、数组或列表中。然后从那里为每个字符分配一个数值。

例如：

假设我加载了文件 blabla.mp3 （显然这种类型的文件是经过编码的，所以它不仅仅是简单的英文字符。）

这是它的内容：

╤dìúúH»╓╒:φººMQ╤╤╤╤┤i↔↔←GGGΦ⌠i←E::2E┤tti←╙╤ΦΦ⌠·:::::%Fæ╤╤:6Å⌠tSN│èëåD¿╢ÄÄÄÄÄÄÄÄÄÅO ^↔:::.ÄÄÄÄÄÄÄèHΦΦ■ï»ó⌐╙-↔→E┤tttttttt}▲î╤╤dì"Ü:::)ú$tm‼º╤╓q╤╙·:.ñÇ°"V├╡ ΦPa↨/úúúúúúΦ╞îHΦ║*ÄèúóΦΦΦΦΦ»DΦΦ·tΘ○_Nïúkî►"DëÜ)#ú»→·:4Äïúúúúúúó¿║:(·:ç↑PR"$RGH◄◘úúó¿ΦΦΦΦ┌&HΦΦ┌+⌠ WºGG╤m→GF╘±"¿ΦñïúúúóΦò↨FæTtt╓ìú⌠ΦΦΦ⌠z:::=:::::≥E╤╤╤╤╤╤╤Tm↔↔▬Hªèi⌠ztz:::tt

我想弄清楚正在使用哪些字符，并为每个字符分配一个从 0 到 255 的值，并且每个值对于该字符都是唯一的。

所以 ╤ = 0; Φ = 56; ú = 25 等等等等

现在我一直在搜索 python 和 java 文档，但我不太确定我知道我在搜索什么。而且我不知道我是否应该担心 ASCII 字符或 HEX 或文件的原始字节。

我只需要有人指出我正确的方向。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:16:01.577

每个字节 *是*一个从 0 到 255 的数字。包含这些数字的数组准确地说是包含文件内容的数组。我完全不清楚你想用这个数组（或字典等）做什么，但让它变得很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:17:28.050

您读入的每个字节已经是 0 到 255 之间的值（因此是一个字节）。你有理由不能只使用它吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:23:13.187

我不清楚你到底想要完成什么。您可以创建一个`char`长度为 256 的数组。每个条目都存储您要与该索引关联的字符。如果你想走另一条路，我推荐一个`HashMap<Character, Integer>`. 您可以像这样处理每个新字符：

```
Map<Character, Integer> map = new HashMap<Character, Integer>();
for (each character c in the file) {
    Integer code = map.get(c);
    if (code == null) {
        // new character
        code = map.size();
        map.put(c, code); // assign next number
    }
    // use code as the encoding for c
} 
```

# html - 在 CSS 中使用 id.class 跨浏览器是否兼容？

> ID：10748022
> 
> 赞同：2
> 
> 时间：2012-05-25T03:12:24.887
> 
> 标签：html, css, cross-browser

在编写 CSS 选择器时使用 id.class 是否安全？例如：

```
<div id="foo" class="bar"></div>

#foo.bar { border: 1px solid #000; } 
```

哪些浏览器不支持此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:13:50.033

每个浏览器都会支持这一点（尽管它可能是不必要的，因为 ID 无论如何都是唯一标识该元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:22:16.160

根据您使用它的方式，它可能会触发IE6 上[的错误](http://jan.moesen.nu/code/html-css/ie-id-class-combo-bug/)。

# visual-studio-2010 - 从 Visual Studio 发布到 IIS 不转换 web.config

> ID：10748031
> 
> 赞同：1
> 
> 时间：2012-05-25T03:13:44.593
> 
> 标签：visual-studio-2010, iis, deployment

我有我的 web.config。我将“解决方案配置”上的框设置为发布，我所做的是将 web.release.config 修改为如下所示（当然，实际连接详细信息已编辑）：

```
<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <connectionStrings>
   <add name="ApplicationServices"
     connectionString="data source=mysite.com;Database=mydb;uid=myuser;pwd=mypassword;"
     providerName="MySql.Data.MySqlClient"/>
  </connectionStrings>
  <system.web>
   <compilation xdt:Transform="RemoveAttributes(debug)" />
  </system.web>
</configuration> 
```

但是，每当我使用发布功能将它放在我的生产服务器上时，我添加的 connectionString 都不会被包含在内。关于我缺少的一些关键步骤有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T03:36:38.507

您需要在元素中指定转换。添加元素`xdt:Locator="Match(name)" xdt:Transform="SetAttributes(connectionString)"`。`add`检查[MSDN](http://msdn.microsoft.com/en-us/library/dd465326.aspx)参考。

# wordpress - 在 WordPress 中的帖子之间添加空格

> ID：10748044
> 
> 赞同：0
> 
> 时间：2012-05-25T03:15:31.827
> 
> 标签：wordpress

新的 WP 用户在这里。我已经在我的网站上安装了 WP 并创建了几个测试帖子。我注意到他们之间没有任何空间。

我在谷歌上搜索，解决方案似乎是修改 style.css 文件中的 .post 减速。我正在运行 WP 3.3.2，似乎找不到声明。2年前的一个解决方案说它在262行？

我似乎找不到声明。谁能帮帮我？

这是我博客的链接：www.clementma.ca/blog

谢谢，克莱门特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:52:14.413

负责在主页上创建帖子的文件`content.php`位于您的活动主题下（我假设为 211）。整个帖子都是从这行代码生成的-

```
<article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
.......
.......
</article> 
```

让我知道你是否修好了。

# .net - 如何浏览 Web 应用程序，就好像它托管在服务器上一样

> ID：10748052
> 
> 赞同：0
> 
> 时间：2012-05-25T03:16:11.920
> 
> 标签：.net, visual-studio-2010, iis, web-applications, iis-7.5

我刚刚在 Visual Studio 2010 中创建了一个 Web 应用程序项目。当我键入时我想要它：

[http://testsub.test.com](http://testsub.test.com)

它应该转到我的本地 Web 应用程序项目。所以我在我的`hosts`文件中做了一个条目，位于：

```
c:\Windows\System32\drivers\etc 
```

但是，当我尝试在 Visual Studio 2010 Web 应用程序项目的属性中设置[http://testsub.test.com时，出现错误。](http://testsub.test.com)附上它的截图：

![在此处输入图像描述](../Images/802cd45c4a7d6c1c894aae1c578da464.png)

我还需要做哪些改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:20:50.483

Visual Studio 认为它发布的目录是一个远程服务器（就像你想要的那样），它告诉你虚拟目录的自动创建不起作用。在 IIS 中手动创建虚拟目录并将其设置为“应用程序”，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:32:25.997

您可以检查的几件事 -

1.  你应该安装了 IIS。
2.  检查在 IIS 中是否应该创建一个指向[http://testsub.test.com](http://testsub.test.com)的网站。AFAIK，您需要为要用于网站的子域拥有一个静态 IP。网站设置已正确完成。我的意思是，子域映射正确。
3.  当您将 webproject 发布到 IIS 时，您必须以“运行管理员”选项打开 VS2010。

# facebook-graph-api - facebook offline_access_token 截断到期时间

> ID：10748055
> 
> 赞同：1
> 
> 时间：2012-05-25T03:16:40.330
> 
> 标签：facebook-graph-api, access-token, facebook-authentication

我有一个关于 Facebook 删除 offline_access_tokens 的问题。根据[文件](https://developers.facebook.com/roadmap/offline-access-removal/)，我们可以

> 获取新token后将token的生命周期刷新为60天

从脸书。

就一件事。根据脸书，

> 在当前设置为 2012 年 7 月 5 日的 offline_access 删除日期之后（请参阅路线图了解确切日期），所有现有的 offline_access access_tokens 的到期时间都将缩短为 60 天。这种截断对用户来说是透明的，您的应用程序将继续正常运行；当这种截断发生时，Facebook 将通过每周开发人员汇总发送更新消息。

因此，从 2012 年 7 月 5 日起，所有现有的 offline_access_tokens 都将被缩短为 60 天。**

**假设现有离​​线访问令牌的到期时间将在 2012 年 9 月 3 日左右是否安全？**

**

因为对于新生成的令牌，当我刷新它时，我可以获得如下信息。

> access_token=xxxx&expires=xxxx

但是对于现有的长寿命访问令牌，每当我刷新它时，我只能获得如下信息而没有过期信息。

> access_token=xxxx

*如果没有过期信息，我无法提前通知用户在过期时间之前登录 facebook 使用该应用程序。*

所以，就像我上面提到的，假设现有的离线访问令牌的截断到期时间将从 2012 年 7 月 5 日起 60 天，是否安全？

编辑：**有什么方法可以获取[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)提供的信息，我们可以在哪里获得发布日期等？**（可能与这个重复[。](http://facebook.stackoverflow.com/questions/9236445/is-there-an-api-equivalent-of-the-facebook-access-token-linter-debugger)）

请分享你的想法。提前谢谢。

# javascript - 使用 JavaScript 代码而不是引用文件？

> ID：10748057
> 
> 赞同：3
> 
> 时间：2012-05-25T03:16:42.687
> 
> 标签：javascript

**编辑：**对不起，我应该更清楚。我的网页需要符合 XHTML。

我使用托管博客平台，我无法在其上托管 JavaScript 文件。我们通常在这样的网页上引用 JavaScript 文件：

```
<script type='text/javascript' src='http://example.com/js/mycode.js'></script> 
```

问题是，我可以直接引用网页中的代码，而不是文件吗？如果是这样，我该怎么做？

1.  只需将 JavaScript 代码粘贴到`<script>`标签之间的文件中？

    ```
    <script type='text/javascript'>
    PASTE THE CODE FROM THE JS FILE HERE
    </script> 
    ```

2.  或者像这样？

    ```
    <script type='text/javascript'>
    //<![CDATA[
    PASTE THE CODE FROM THE JS FILE HERE
    //]]>
    </script> 
    ```

以上两种方法哪一种是正确的？如果没有，有没有更好的方法来做到这一点？

* * *

另外，可以像这样在脚本标签内引用文本（.txt）文件吗？

```
<script type='text/javascript' src='http://example.com/js/mycode.txt'></script> 
```

或者如果我这样做会有什么问题吗？

寻找知识渊博的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:25:12.917

> 我可以直接引用网页中的代码而不是文件吗？

是的，您可以在标签之间粘贴您的`<script>`代码。HTML 甚至允许裸脚本标签，因为浏览器会忽略该`language`属性，并且[可以根据规范省略](http://www.w3.org/TR/html5/the-script-element.html#script)`type`属性。

> type 属性给出了脚本的语言或数据的格式。如果该属性存在，则其值必须是有效的 MIME 类型。不得指定 charset 参数。***如果该属性不存在，则使用默认值是“text/javascript”。***

所以你可以有这个：

```
<script>
    //your code
</script> 
```

此外，您可以选择在外部托管您的脚本并使用它

```
<script src="http://externalhost.com/yourscript.js"></script> 
```

* * *

> 另外，可以像这样在脚本标签内引用文本（.txt）文件吗？

据我所知，*您可以将任何纯文本*作为源代码，默认情况下浏览器会将其读取为 JavaScript。甚至[来自 pastebin 的文本也可以像脚本一样运行。](http://jsfiddle.net/KdF9r/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T03:19:30.437

> 我可以直接引用网页中的代码而不是文件吗？

您的第一种方法应该可以正常工作。

> 此外，是否可以在脚本标记内引用文本 (.txt) 文件

虽然这可能有效，但我认为你不应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:19:36.650

在 HTML5 中，只需使用

```
<script>
// code from file
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T03:23:27.970

不再需要 CDATA 标记（请参阅此较早的 SO 帖子：[脚本标记中何时需要 CDATA 部分？](https://stackoverflow.com/questions/66837/when-is-a-cdata-section-necessary-within-a-script-tag)）。就像提到的@meager 一样，您可以在脚本标签中粘贴您需要使用的任何内容。请记住，您编写的任何依赖于该文件内容的代码要么位于同一脚本标记内的下方，要么位于页面下方的其自己的脚本标记中。

```
<script>
// file content
// your code that references the file content
</script> 
```

# ruby-on-rails-3 - 如何在rails 3中将所有表从mysql归档到sqlite

> ID：10748066
> 
> 赞同：0
> 
> 时间：2012-05-25T03:19:47.580
> 
> 标签：ruby-on-rails-3, archive

Rails 3 中是否有一种自动方式将我的生产数据库（MySQL）中的所有数据归档到另一个数据库（sqlite3）中？

背景：我想保存过去几年我们不需要快速访问的所有数据，然后清除数据库，使其保持新鲜，并且只保存即将进行的项目的数据。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:57:28.080

查看水龙头宝石。还可以看看最近的 railscasts

[http://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

那一集展示了如何使用水龙头在数据库之间移动数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:55:33.913

将数据从 mysql 转换为 sqlite 可能会损坏某些数据。如果你真的想归档你的数据库，我建议使用 mysqldump。

```
mysqldump -u <user> -p<password> database_name > database_dump.sql 
```

如果您的数据库架构足够简单，可以在 sqlite 中导出，这里有一个脚本可以将您的转储转换为 sqlite 数据库：[https ://gist.github.com/943776](https://gist.github.com/943776)

# html - “绝对”定位和“相对”定位的默认值

> ID：10748067
> 
> 赞同：0
> 
> 时间：2012-05-25T03:19:55.053
> 
> 标签：html, css

我阅读了相对和绝对定位，但我仍然对选择其中一个位置后没有指定“上、左、右、下”时会发生什么感到困惑。例如，在下面的代码中，我更改了容器的位置，当我将其从相对更改为绝对时，页脚做了一些时髦的事情。我读到如果您添加“位置：相对”并且不指定任何方向，它就会完全停留在它应该在的位置。但是使用萤火虫，我在css中切换了那条线，顶部的菜单栏会向左移动一点。到底是怎么回事？

HTML：

```
 <div class="container">

        <div id="header">

            <ul id="menu">
                <li><a href="#" class="active">Portfolio</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Testimonials</a></li>
                <li><a href="#">Request a Quote</a></li>
            </ul>       

            <div id="logo">
                <h1>Creatif</h1>
                <small>A Family of Rockstar Wordpress Themes
            </div>
        </div><!--end header-->

        <div id="block_feature">
        Featured Content
        </div>      

        <div id="block_content">
        Content

        </div>

    </div>

</div>

<div id="footer">

    <div class="container">
        Footer stuff goes here
    </div>
</div> 
```

CSS：

```
@charset "UTF-8";  
/* Background-Styles */  

body {  
    margin:0px; padding:0px;  
    background-color:#131211;  
 }  
#main {  
    background:#c4c0be url(images/background_light_slice.jpg) repeat-x;  
}   
#main .container {  
    background-image:url(images/background_light.jpg);    
    background-repeat:no-repeat;  
    min-height:400px;  
}  

#header {  
    padding-top:20px;  
 }  
#logo h1, #logo small {  
    margin:0px;  
    display:block;  
    text-indent:-9999px;  
}  
#logo {  
    background-image:url(images/logo.png);  
    background-repeat:no-repeat;
    width:194px;  
    height:83px;  
}  
ul#menu {  
    margin:0px; padding:0px;  
    position:absolute;  
    right:0px;  
}  
ul#menu li {  
   display:inline;   
}

#footer {  
    background-image:url(images/background_footer.jpg);  
    background-repeat:repeat-x;  
    color:white;  
    padding:40px;  
}  
.container {  
    width:950px;  
    margin:0 auto;  
    position:relative;  
} 
```

与位置：相对 ![在此处输入图像描述](../Images/42ee87e13ba53bdd2bf60fa598f80216.png)

与位置：绝对 ![在此处输入图像描述](../Images/487d81996b0f3f99014b39fe83417079.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:25:20.473

您需要将#footer div 设置为相对位置，因为容器需要相对于相对位置是绝对的。现在页脚不是相对的，所以 #container 默认为最接近父级的相对 div。经验法则是在使用绝对定位时始终让容器 div 具有相对位置。

```
#footer {position: relative; }
#container { position: absolute; } 
```

现在，如果您将 top: 0 添加到容器中，它将 top: 0 到页脚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:10:26.210

乍得的回答是正确的。这是一个解释：

将 div 设置为使用绝对位置使其相对于位置为绝对或相对的第一个父节点是绝对的。

在您的示例中，由于没有将父节点设置为相对或绝对位置，因此该节点与主体的关系是绝对的。正如乍得提到的，确保将参考节点设置为位置：相对。

# string - 找到一组等长字符串的重叠部分？

> ID：10748073
> 
> 赞同：3
> 
> 时间：2012-05-25T03:20:54.710
> 
> 标签：string, algorithm, string-comparison, overlap, stringcollection

有 100 万个等长字符串（短字符串）。例如

abcdefghi

fghixyzyz

吉阿布卡布克

zyzdddxfg

. . .

我想找到两个字符串的成对重叠。A“abcdefghi”和B“fghixyzyz”的重叠是“fghi”，这是A的最大后缀，B的最大前缀，满足后缀和前缀是平等的。

是否有有效的算法可以找到集合中任意两个字符串的重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:40:02.187

一种有效的方法是为字符串集构建一个通用的后缀树。要查找字符串 x 和 y 之间的重叠：

遵循通用后缀树中字符串 y 的路径标签。这条路径上与字符串 x 的终端符号相关的最深节点有一个路径标签，它相当于后缀-前缀重叠 x->y。

有关更多详细信息，请参阅 Gusfield 的书“字符串、树和序列的算法”的第 137 页（“在线性时间内解决所有对后缀前缀问题”）。

注意：如果您的数据集很大（数百万/十亿个字符串），这会占用大量内存。

# python - Web.py SQL 查询给出奇数数据

> ID：10748075
> 
> 赞同：1
> 
> 时间：2012-05-25T03:21:14.870
> 
> 标签：python, sql, postgresql, web.py

我一直在使用 Web.py 框架在 Python 中开发一个小型应用程序，该框架执行一些简单的 PostgreSQL 查询。我注意到返回的值包含一大堆封装实际原始数据的东西。

以下代码应该`name`从表中查询值`todo`

```
name = db.query("SELECT name FROM todo;") 
```

但是当我打电话...

```
return name[0] 
```

以下是返回/打印...

```
<Storage {'name': u'Learn web.py'}> 
```

数据是正确的，值为“Learn web.py”，但我想知道是否可以只获取原始数据“Learn web.py”而不是所有其他内容。我可以解析它，但我想知道是否有更正确的方法`name.rawdata()`，比如我缺少的函数？我试过`name[1]`哪个是“越界”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:41:21.283

```
name[0].name 
```

从结果`[0]`中选择第一行。从行中`.name`获取`name`列。

此外，`db.query`我不会使用原始 SQL 字符串，而是使用`db.select`：

```
names = db.select('todo', what='name') 
```

有关更多信息，请参阅[文档](http://webpy.org/docs/0.3/api#web.db)。

# python - 使用 python urllib2 获取位置标头的值

> ID：10748079
> 
> 赞同：2
> 
> 时间：2012-05-25T03:21:59.297
> 
> 标签：python, http-headers, urllib2

当我使用 urllib2 并列出标题时，我看不到“位置”标题。

```
In [19]:p = urllib2.urlopen('http://www.example.com')

In [21]: p.headers.items()
Out[21]: 
[('transfer-encoding', 'chunked'),
 ('vary', 'Accept-Encoding'),
 ('server', 'Apache/2.2.3 (CentOS)'),
 ('last-modified', 'Wed, 09 Feb 2011 17:13:15 GMT'),
 ('connection', 'close'),
 ('date', 'Fri, 25 May 2012 03:00:02 GMT'),
 ('content-type', 'text/html; charset=UTF-8')] 
```

如果我使用 telnet 和 GET

```
telnet www.example.com 80
Trying 192.0.43.10...
Connected to www.example.com.
Escape character is '^]'.
GET / HTTP/1.0  
Host:www.example.com

HTTP/1.0 302 Found
Location: http://www.iana.org/domains/example/
Server: BigIP
Connection: close
Content-Length: 0 
```

那么，使用 urllib2 ，我如何获得 'Location' 标头的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-28T19:52:28.730

这是因为默认情况下 urllib2 遵循位置标头。所以最后的回应不会有一个。如果您突然禁用以下重定向，您可以看到 301 和 302 页面的位置标题。请参阅：[如何防止 Python 的 urllib(2) 跟随重定向](https://stackoverflow.com/questions/554446/how-do-i-prevent-pythons-urllib2-from-following-a-redirect)

从那里借：

```
class NoRedirection(urllib2.HTTPErrorProcessor):
  def http_response(self, request, response):
    return response
  https_response = http_response

opener = urllib2.build_opener(NoRedirection)
location = opener.open('http://www.example.com').info().getheader('Location') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T03:59:19.063

使用从`geturl`返回的类文件对象的方法`urlopen`：

```
>>> f = urllib2.urlopen('http://www.example.com')
>>> f.geturl()
'http://www.iana.org/domains/example/' 
```

# github - 私有 Github 存储库的私有页面

> ID：10748082
> 
> 赞同：266
> 
> 时间：2012-05-25T03:22:30.997
> 
> 标签：github, github-pages

在 github 文档和 SO 上都找不到任何东西。但我想知道是否可以有一个`http://foo.github.com`名为的私有存储库`foo`，只有一个可以访问`foo`存储库本身的人才能访问它。

我记得读过一些关于 github 页面总是公开的东西，但似乎再也找不到了。

令人惊讶的是，我似乎也找不到其他人问这个问题。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-06-13T03:14:01.307

我已经向 Github 提出了支持票，并得到了确认所有页面都是公开的事实的回复。我现在要求他们在 help.github.com/pages 中添加注释。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-09-27T18:54:00.620

根据[GitHub Pages 文档](https://help.github.com/articles/creating-pages-with-the-automatic-generator)：

> 所有项目存储库都已准备好使用生成器进行发布。**但是，请注意，私有存储库将发布公共页面。**

所以不，目前无法从私有 GitHub 存储库创建私有 GitHub 页面。

**编辑：**

# 一个简单的解决方法

*对于某些*可能有用的情况，一种解决方法是简单地将 repo 重命名为 GitHub 页面格式以外的其他内容，同时您希望它是私有的（例如在开发阶段），并且在准备好将其公开时，然后更正名称。显然，如果您正在寻找一种方法来发布具有身份验证的页面，这仍然无济于事，但如果您只想在 GH 页面项目正在进行时隐藏它，这可能会有所帮助。

# Jekyll 的实际 Auth Wrapper（GitHub 页面）

或者，[GitHubber @benbalter](https://github.com/benbalter)有一个名为[Jekyll Auth](https://github.com/benbalter/jekyll-auth)的项目用于此类用途。Jekyll Auth 为 jekyll 项目（包括 GitHub 页面）提供了一个基本的身份验证包装器。[请参阅 repo 的 README](https://github.com/benbalter/jekyll-auth#jekyll-auth)以供使用。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2019-01-24T06:27:30.347

**许多答案已经过时（Microsoft 收购前/免费私人回购）。这是在宣布*免费*私人回购之后写的。**

Github 页面不适用于个人的免费私人回购，如回购设置所示：

[![在此处输入图像描述](../Images/46753b32add6733f63a3adc1a4f51ff2.png)](https://i.stack.imgur.com/IrgrI.png)

2020（现在最基本的计划是“团队”）：

[![升级到 github 团队或将此存储库公开以启用 Pages](../Images/9132f4e948f3fdf809f1f96b7349568d.png)](https://i.stack.imgur.com/FwUcZ.png)

### 注意

即使您升级，所有页面都是公开的。升级只启用私有存储库上的页面*功能*，就像它启用其他功能一样。页面功能是***公开可用***的静态 Web 托管。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-25T05:59:22.170

page.github.com[确实](http://pages.github.com/)提到：

> Github 页面是免费托管的，可以通过我们的网站轻松发布，

没有提到访问控制。

[GitHub 页面帮助](http://help.github.com/pages/)也没有提及任何 ACL 。
它们最好在[gh-pages 分支](https://gist.github.com/1086274)中进行管理，并且可以在[它们自己的子模块](https://gist.github.com/833223)中进行管理。
但同样，一旦 GitHub 发布，在可见性方面没有任何限制。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-08-19T10:34:45.437

有一篇文章介绍了如何在动态加载静态内容之前请求 oAuth 授权：

[(archive.org) 使用私有存储库中的 JSON 后端保护在 Github 页面上运行的站点](https://web.archive.org/web/20201112020952/http://kinlane.com/2013/10/15/securing-site-that-runs-on-github-pages-with-json-backend-in-private-repository/)（[原始文章成为 404](http://kinlane.com/2013/10/15/securing-site-that-runs-on-github-pages-with-json-backend-in-private-repository)）

内容应存储在一个秘密的 GitHub 存储库中，查看者对其具有读取权限。GitHub 页面仅存储提供服务的 JS 代码。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-02-13T07:01:13.723

如上所述，Github 页面不支持该功能。当我们的团队决定在内部和私下托管项目文档（静态 HTML）时，我遇到了同样的问题。

我最终创建了一个服务[https://www.privatehub.cloud](https://www.privatehub.cloud)它基本上是一个带有 Github OAuth 身份验证的简单代理服务器，因此它仅返回具有适当 MIME 类型的 GitHub 存储库内容。按照设计，只有有权访问的人`foo`才能`foo`看到`https://bar-foo.privatehub.cloud`. 从功能的角度来看，您可以将其视为具有内置身份验证的简化 GitHub 页面。

不幸的是，Github OAuth 不允许请求`read-only`访问私有存储库，因此服务器需要完全访问权限（显然，它不会向您的存储库写入任何内容）。由于 GitHub API 仅允许检索 1 Mb 以下的文件，因此该服务无法返回更大的文件。然而，我发现该服务非常适合用于内部文档或网站临时版本的小型项目。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-10-22T09:12:58.863

GitHub Enterprise Cloud 客户终于可以做到这一点：[GitHub Pages 的访问控制](https://github.blog/changelog/2021-01-21-access-control-for-github-pages)。

> 要在页面上启用访问控制，请导航到您的存储库设置，然后单击下拉菜单以在您的站点的公共和私人可见性之间切换。

[![在此处输入图像描述](../Images/3d34781be18276005a001219e710ea36.png)](https://i.stack.imgur.com/a46kr.png)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-01-21T20:51:50.097

2021 年 1 月：GitHub Enterprise 现在可以做到这一点（所以：对于 github.com 来说还没有）。
看：

## [GitHub 页面的访问控制](https://github.blog/changelog/2021-01-21-access-control-for-github-pages/)

> **GitHub Pages 现在为您提供限制访问的选项，使该站点仅对有权访问发布该页面的存储库的用户可见。**
> 
> 通过访问控制，您可以使用 GitHub Pages 在整个企业中发布和共享内部文档和知识。
> 
> 作为此版本的一部分，我们将引入以下功能：
> 
> *   存储库管理员可以选择 GitHub Pages 站点是公开可见还是仅限有权访问存储库的用户查看。
> *   私有和内部存储库都支持私有可见性。借助内部存储库，您企业中的每个人都可以使用与登录 github.com 相同的凭据查看页面
> *   组织管理员可以配置成员可以为其主页选择的可见性选项。例如，您可以强制您的成员只能私下发布内容。
> 
> 此功能今天在 GitHub Enterprise Cloud 上普遍可用。
> 要在页面上启用访问控制，请导航到您的存储库设置，然后单击下拉菜单以在您的站点的公共和私人可见性之间切换。
> 
> [![GitHub 页面的私人发布 -- https://i2.wp.com/user-images.githubusercontent.com/55514721/101868473-46f81880-3b32-11eb-9708-a8537f41adaf.png?ssl=1](../Images/9cde02dfc9d187264995d170cdfaa103.png)](https://i.stack.imgur.com/cI5cQ.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-08-20T19:19:16.187

太难过了现在是 2020 年，我们无法拥有私人 GithubPäges：

[![在此处输入图像描述](../Images/c8a40df9c297186b6e936a11d03ce84a.png)](https://i.stack.imgur.com/Fs4KG.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-07T09:42:04.160

如果您在私人回购中按 admin 并向下滚动到关于页面的部分，它会写道它将是公开的。稍后我会检查 .htaccess 控制或类似的控制是否可行，但我对此不抱太大希望。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-10-26T18:15:53.913

作为替代方案，目前可以使用 GitLab 而不是 GitHub 完全按照 OP 的要求去做。[有关功能GitLab 页面访问控制](https://docs.gitlab.com/ee/user/project/pages/pages_access_control.html#gitlab-pages-access-control)，请参阅文档。由于 GitHub 不支持此功能，如果将项目移植到 GitLab 不是问题，这是一个很好的解决方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-02T14:34:51.977

这个 GitHub 应用程序：[https](https://github.com/apps/priv-page) ://github.com/apps/priv-page允许用户为其私有存储库拥有私有页面。

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2017-03-17T07:17:56.740

您可以在存储库中托管密码，然后将页面隐藏在隐藏地址后面，该地址源自该密码。这不是一个非常安全的方法，但它很简单。

[示范](http://githublock.ozbo.lt/)

# shell - 替换自身的 Unix shell 脚本文件

> ID：10748083
> 
> 赞同：0
> 
> 时间：2012-05-25T03:23:08.970
> 
> 标签：shell, unix, copy

我有一个`shell script`（***myfile.ksh***）文件，其中包含命令序列。某处将有一个用新文件替换这个*myfile.ksh的命令。*

我在*myfile.ksh*中研究过，我可以使用`&`.

`. newfiletocopy.ksh &`

我付出了很多努力来复制和替换自己的文件。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:57:35.270

有点不清楚你想要什么，但如果你想在当前正在执行的文件上复制另一个文件，添加这样简单的东西应该可以工作：

```
cp newfiletocopy.ksh $0 
```

# c# - 在 LINQ 查询中获取值

> ID：10748087
> 
> 赞同：0
> 
> 时间：2012-05-25T03:23:39.607
> 
> 标签：c#, linq

我有一个查询，我通过它填充网格。这是查询，

```
var query = from r in DbContext.Groups
           select 
             new 
               {
                 r.Id, r.Name, r.Description, r.UpdatedBy, r.UpdatedDate, 
                 GroupType =DbContext.ProductTypes.Where(p=>p.Id ==  
                                           r.ProductTypes_Id).Select(t=>t.Name)
               }; 
```

所以，问题是从另一个表中提取的 grouptype 的值没有显示该值。它正在显示类型（System.Common ....）。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:36:26.950

也许试试

`GroupType =DbContext.ProductTypes.Where(p=>p.Id == r.ProductTypes_Id).Select(t=>new { name = t.Name})`

或者

`GroupType =DbContext.ProductTypes.Where(p=>p.Id == r.ProductTypes_Id).FirstOrDefault().Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:34:41.363

您正在选择序列而不是项目。如果您知道您只会返回一个值，请使用`.Single`运算符：

```
 GroupType =DbContext.ProductTypes.Where(p=>p.Id ==  
                           r.ProductTypes_Id).Select(t=>t.Name).Single() 
```

`.Single()`注意末尾 的附加。

（它显示类型名称的原因是因为它只是显示了操作符实现类的默认`.ToString()`方法。）`.Select`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:35:47.670

你期待吗

`DbContext.ProductTypes.Where(p=>p.Id == r.ProductTypes_Id).Select(t=>t.Name)`

返回单个值？现在看起来它正在分配一个 linq 匿名类型列表，而不是单个值。

如果您需要单个值，请使用 First，如果您可以保证（或不保证）返回的值，请使用 FirstOrDefault。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T03:36:12.800

的结果

```
.Select(t=>t.Name) 
```

是一个

```
IEnumerable<ProductType> 
```

所以你有一个集合而不是单个值。

例如，将您的查询更改为：

```
var query = from r in DbContext.Groups
       select 
         new 
           {
             r.Id, r.Name, r.Description, r.UpdatedBy, r.UpdatedDate, 
             GroupType =DbContext.ProductTypes.Single(p=>p.Id ==  
                                       r.ProductTypes_Id).Name
           }; 
```

但是，此代码包含危险的东西，我建议添加额外的检查（例如，如果找不到产品类型，此代码将引发异常等），理想情况下，将此代码移动到存储库或类似的东西.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T03:59:44.897

为什么不使用简单的连接操作

```
from r in DbContext.Groups join p in DbContext.ProductTypes on r.ProductTypes_Id equals p.Id
select new { Id = r.Id, Name = r.Name, Description = r.Description, UpdatedBy = r.UpdatedBy, UpdatedDate = r.UpdatedDate, GroupType = p.Name }; 
```

# php - 解析 HTML 或纯文本文件并返回由字符串分隔的文本

> ID：10748088
> 
> 赞同：0
> 
> 时间：2012-05-25T03:23:47.843
> 
> 标签：php, javascript, html, regex, preg-match-all

我在解析文本文件时需要帮助。这个文本文件中有几个 html 标签。我正在寻找的是一个解决方案（在 PHP 或 JS 或两者中），它将剥离所有这些，并将输出存储到单独的变量中。

```
 Integration/QA  
<http://shopfloor/sfweb/secure/CancelOrders>

  Development  
<http://shopfloor/sfweb/secure/CancelOrders>

------------------------------------------------------------------------

*HEADER INFO*
    *View Object:* 6541997  *BPO:* 0020064484   *Ack Date:* 2012-05-25
    *Operation(s):* PS_Queue, PS_BoxAll, JPN_End

------------------------------------------------------------------------

*EXTERNAL ORDER NUMBER REFERENCE*
*SAP Sales Order Number*    *Customer P.O. Number*  *Legacy Order Number*
0310407774      89FC37763001

------------------------------------------------------------------------

*PRODUCTS FOR THIS WORK OBJECT/OPERATION(S)*
*PL*    *Product #*     *Qty*   *Options*   *Serial #*
LN  AE241A  1        

------------------------------------------------------------------------

*Station Info*
*Start Station:* JPN_End    *Location:* Done    *Station:*
*Birth Date/Time:* 2012-05-22 08:26:17 SGT  *Power Cord:*   *Voltage:*

------------------------------------------------------------------------

*MATERIAL LIST FOR THIS WORK OBJECT/OPERATION(S)*
*Part Number*   *Qty*   *Description*   *BB Type*   *Material
Location*   *Serial Number*
AE241-90001     1   XP Remote Support Service Leaflet   BOM     PACK     

Privacy Statement 
```

我基本上想从这段代码中剥离一些文本到 php 变量中，所以它会返回：

```
$viewobject = "6541997"
$BPO = "0020064484"
$ackdate = "2012-05-25"
$operations = "PS_Queue, PS_BoxAll, JPN_End"
$sapSO = "0310407774"
$legacyON = "89FC37763001"
$pl = "LN"
$product = "AE241A"
$qty = 1;
$startstn = "JPN_end"
$location = "Done"
$bdate = "PS_Queue, PS_BoxAll, JPN_End"
$pn = "AE241-90001"
$qty = 1;
$description =" XP Remote Support Service Leaflet"; 
```

之类的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:39:31.613

使用[正则表达式](http://php.net/manual/en/book.pcre.php)。

```
preg_match_all('/\*(view object|bpo|ack date):\*\s+([0-9\-]+)/i', $text, $m);

// $m contains matches, try to print_r($m)

$viewobject = $m[2][0];  // 6541997
$bpo = $m[2][1];         // 0020064484
$ackdate = $m[2][2];     // 2012-05-25 
```

# c# - 如何在不下载内容的情况下执行 GET 请求？

> ID：10748092
> 
> 赞同：27
> 
> 时间：2012-05-25T03:24:25.690
> 
> 标签：c#, .net, httpwebrequest, servicepoint

我正在研究链接检查器，通常我可以执行`HEAD`请求，但是有些网站似乎禁用了这个动词，所以在失败时我还需要执行`GET`请求（仔细检查链接是否真的死了）

我使用以下代码作为我的链接测试器：

```
public class ValidateResult
{
  public HttpStatusCode? StatusCode { get; set; }
  public Uri RedirectResult { get; set; }
  public WebExceptionStatus? WebExceptionStatus { get; set; }
}

public ValidateResult Validate(Uri uri, bool useHeadMethod = true, 
            bool enableKeepAlive = false, int timeoutSeconds = 30)
{
  ValidateResult result = new ValidateResult();

  HttpWebRequest request = WebRequest.Create(uri) as HttpWebRequest;
  if (useHeadMethod)
  {
    request.Method = "HEAD";
  }
  else
  {
    request.Method = "GET";
  }

  // always compress, if you get back a 404 from a HEAD it can be quite big.
  request.AutomaticDecompression = DecompressionMethods.GZip;
  request.AllowAutoRedirect = false;
  request.UserAgent = UserAgentString;
  request.Timeout = timeoutSeconds * 1000;
  request.KeepAlive = enableKeepAlive;

  HttpWebResponse response = null;
  try
  {
    response = request.GetResponse() as HttpWebResponse;

    result.StatusCode = response.StatusCode;
    if (response.StatusCode == HttpStatusCode.Redirect ||
      response.StatusCode == HttpStatusCode.MovedPermanently ||
      response.StatusCode == HttpStatusCode.SeeOther)
    {
      try
      {
        Uri targetUri = new Uri(Uri, response.Headers["Location"]);
        var scheme = targetUri.Scheme.ToLower();
        if (scheme == "http" || scheme == "https")
        {
          result.RedirectResult = targetUri;
        }
        else
        {
          // this little gem was born out of http://tinyurl.com/18r 
          // redirecting to about:blank
          result.StatusCode = HttpStatusCode.SwitchingProtocols;
          result.WebExceptionStatus = null;
        }
      }
      catch (UriFormatException)
      {
        // another gem... people sometimes redirect to http://nonsense:port/yay
        result.StatusCode = HttpStatusCode.SwitchingProtocols;
        result.WebExceptionStatus = WebExceptionStatus.NameResolutionFailure;
      }

    }
  }
  catch (WebException ex)
  {
    result.WebExceptionStatus = ex.Status;
    response = ex.Response as HttpWebResponse;
    if (response != null)
    {
      result.StatusCode = response.StatusCode;
    }
  }
  finally
  {
    if (response != null)
    {
      response.Close();
    }
  }

  return result;
} 
```

这一切都很好，花花公子。除了当我执行`GET`请求时，整个有效载荷都会被下载（我在wireshark中看过这个）。

有没有办法配置底层`ServicePoint`或根本`HttpWebRequest`不缓冲或急切加载响应体？

（如果我手动编码，我会将 TCP 接收窗口设置得非常低，然后只抓取足够的数据包来获取标头，一旦我有足够的信息就停止响应 TCP 数据包。）

[对于那些想知道这意味着什么的人，我不想在获得 404 时下载 40k 404，这样做几十万次在网络上是昂贵的]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T14:17:05.223

当您执行 GET 时，服务器将开始从文件开头发送数据到结尾。除非你打断它。当然，以 10 Mb/秒的速度，这将是每秒 1 兆字节，因此如果文件很小，您将获得全部内容。您可以通过多种方式最小化实际下载的数量。

首先，您可以`request.Abort`在收到响应后和调用之前调用`response.close`。这将确保底层代码在关闭响应之前不会尝试下载整个内容。这是否对小文件有帮助，我不知道。我知道它会阻止您的应用程序在尝试下载数 GB 文件时挂起。

您可以做的另一件事是请求一个范围，而不是整个文件。请参阅[AddRange](http://msdn.microsoft.com/en-us/library/f2cwk28s)方法及其重载。例如，您可以 write `request.AddRange(512)`，它只会下载文件的前 512 个字节。当然，这取决于支持范围查询的服务器。大多数都这样做。但是，大多数也支持 HEAD 请求。

您可能最终不得不编写一个按顺序尝试的方法：

*   尝试做一个 HEAD 请求。如果可行（即不返回 500），那么您就完成了
*   使用范围查询尝试 GET。如果这没有返回 500，那么你就完成了。
*   做一个常规的 GET，`request.Abort`然后`GetResponse`返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:14:22.203

如果您使用 GET 请求，无论您是否愿意，您都会收到消息正文。无论您是否从套接字读取数据，数据仍将传输到您的端点。数据将在 RecvQ 中排队等待被选中。

为此，如果可能的话，您真的应该使用“HEAD”请求，这将为您节省消息正文。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-25T04:23:53.313

难道你不能使用 WebClient 打开一个流并只读取你需要的几个字节吗？

```
using (var client = new WebClient())
        {
            using (var stream = client.OpenRead(uri))
            {
                const int chunkSize = 100;
                var buffer = new byte[chunkSize];
                int bytesRead;
                while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    //check response here
                }
            }
        } 
```

我不确定 WebClient 如何在内部打开流。但它似乎允许部分读取数据。

# codeigniter - 缺少 Codeigniter 登录页面

> ID：10748093
> 
> 赞同：0
> 
> 时间：2012-05-25T03:24:37.673
> 
> 标签：codeigniter

我正在复制我朋友使用 codeigniter 创建的项目。

我从她的 www 文件夹中复制了所有文件，包括 mysql 数据并粘贴到我的 www 文件夹和 mysql 数据，但是当我尝试在本地主机上运行时，它显示“未找到请求的 URL simrm/login 在此服务器上找不到。

我是使用codeigniter的新手，那么如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:20:47.133

哦，我认为您是 codeigniter 的新手...
您必须使用该`.htaccess`文件来摆脱 index.php，

或者您可以使用重定向它`redirect(base_url().'index.php/login');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:32:33.883

您可以检查baseurl 路径（即项目的路径）是否在config.php 中正确提供。config.php 的路径是`application/config/config.php`或在里面`system/application/config/config.php`

`$config['base_url'] = 'your_project_url'`

# object - Rubymotion & RestKit

> ID：10748094
> 
> 赞同：2
> 
> 时间：2012-05-25T03:25:00.823
> 
> 标签：object, loading, restkit, rubymotion

有没有人让 Rubymotion 使用 RestKit 的 RKObjectManager 并成功地从服务器加载了一些对象？我有很多麻烦。我让 RestKit 的 RKClient 运行良好。我可以成功获取并发布，这很棒。但是我不能用 RKObjectManager 加载资源。我的 Rakefile 看起来像这样：

```
$:.unshift("/Library/RubyMotion/lib")
require 'motion/project'

Motion::Project::App.setup do |app|
  # Use `rake config' to see complete project settings.
  app.name = 'RestKitTest'
  app.frameworks += %w(CoreData CFNetwork Security MobileCoreServices SystemConfiguration QuartzCore)
  app.vendor_project('vendor/RestKit', :xcode, :target => 'RestKit', :headers_dir => '../Headers/RestKit/')
end 
```

我的应用程序委托如下所示：

```
class AppDelegate
  def application(application, didFinishLaunchingWithOptions:launchOptions)
    @window = UIWindow.alloc.initWithFrame UIScreen.mainScreen.bounds
    @window.rootViewController = TestViewController.alloc.init
    @window.rootViewController.wantsFullScreenLayout = true
    @window.makeKeyAndVisible
    true
  end
end 
```

我的存根 TestViewController 看起来像这样：

```
class TestViewController < UIViewController
  def init
    super

    puts "checkpoint 1"

    manager = RKObjectManager.managerWithBaseURLString "http://mlpong.herokuapp.com"
    puts "checkpoint 2"

    mapping = RKObjectMapping.mappingForClass League.class
    puts "checkpoint 3"

    # mapping.mapAttributes("id", "name", "url", nil)
    mapping.mapKeyPath("id", toAttribute:"id")
    mapping.mapKeyPath("name", toAttribute:"name")
    mapping.mapKeyPath("url", toAttribute:"url")
    puts "checkpoint 4"

    manager.mappingProvider.setObjectMapping(mapping, forKeyPath:"")
    puts "checkpoint 5"

    manager.loadObjectsAtResourcePath("/leagues.json?auth_token=my_auth_token", delegate:self)
    puts "checkpoint 6"

    self
  end

  def objectLoader(loader, didFailWithError:error)
    puts "failed with error: #{error.domain}"
  end

  def objectLoader(loader, didLoadObjects:objects)
    puts "success!"
  end
end 
```

不幸的是，您无法使用此确切代码进行测试，因为您需要我的站点身份验证令牌。

**RKObjectMapping**类的**mapAttributes**方法（上面已注释掉）不起作用。如果我离开它，应用程序会输出检查点 1-3，然后会发疯。**rake --trace**揭示了这一点：

 ****```
** Invoke default (first_time)
** Invoke simulator (first_time)
** Invoke build:simulator (first_time)
** Execute build:simulator
** Execute simulator
/usr/bin/defaults write com.apple.iphonesimulator "SimulateDevice" "'iPhone'"
DYLD_FRAMEWORK_PATH="/Applications/Xcode.app/Contents/Developer/../Frameworks":"/Applications/Xcode.app/Contents/Developer/../OtherFrameworks" /Library/RubyMotion/bin/sim 2 1 5.1 "/Applications/Xcode.app/Contents/Developer" "./build/iPhoneSimulator-5.1-Development/RestKitTest.app"
checkpoint 1
checkpoint 2
checkpoint 3
(main)> ** Execute default 
```

如果我注释掉 mapAttributes 行，并使用另一个（更长）版本的对象映射（在检查点 4 之前未注释的 3 行），我会通过所有检查点，但是当我**rake --trace**时会收到这个：

```
** Invoke default (first_time)
** Invoke simulator (first_time)
** Invoke build:simulator (first_time)
** Execute build:simulator
** Execute simulator
/usr/bin/defaults write com.apple.iphonesimulator "SimulateDevice" "'iPhone'"
DYLD_FRAMEWORK_PATH="/Applications/Xcode.app/Contents/Developer/../Frameworks":"/Applications/Xcode.app/Contents/Developer/../OtherFrameworks" /Library/RubyMotion/bin/sim 2 1 5.1 "/Applications/Xcode.app/Contents/Developer" "./build/iPhoneSimulator-5.1-Development/RestKitTest.app"
checkpoint 1
checkpoint 2
checkpoint 3
checkpoint 4
checkpoint 5
checkpoint 6
(main)> terminate called without an active exception** Execute default 
```

我整天都被这些错误所困扰。如果有人有任何想法，请告诉我。非常感谢帮助。谢谢，

帕春

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T07:38:09.960

您调用了一些不存在的方法。

```
manager.mappingProvider.setObjectMapping(mapping, forKeyPath:"")
puts "checkpoint 5"

manager.loadObjectsAtResourcePath("/leagues.json?auth_token=my_auth_token", delegate:self)
puts "checkpoint 6" 
```

应该。

```
manager.loadObjectsAtResourcePath("/leagues.json?auth_token=my_auth_token", mapping:mapping, delegate:self)
puts "checkpoint 5" 
```

请参阅我在以下位置找到答案的类似问题：[loadObjectsAtResourcePath (RestKit)](https://stackoverflow.com/questions/8141466/loadobjectsatresourcepath-restkit)****

# sql - 什么相当于 SQL 中的数组？

> ID：10748098
> 
> 赞同：1
> 
> 时间：2012-05-25T03:25:26.847
> 
> 标签：sql, database

我有一个表，它需要每一行来存储相同类型的行的有序集合。

例如，我正在想象类似于：

```
class blah
{
   float yetMoreData;
};

class foo
{
   int data;
   String moreData;
   blah[] anOrderedCollectionOfBlahClasses;
}; 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:41:20.287

您希望`Blah`和`Foo`成为单独`Blah`的表，其中与`Foo`. 表中的记录`Blah`应该有一个外键`foo_id`，标识它们的父 Foo 记录。 `Blah`还有一个`index_in_array`属性允许对结果进行排序。

```
CREATE TABLE Foo (
    id BIGINT,
    data INT,
    moreData CHAR(50)
);

CREATE TABLE Blah (
    id BIGINT,
    yetMoreData DOUBLE,
    foo_id BIGINT,
    index_in_array INT
); 
```

如果要获取`Blah`给定的所有 s `Foo`（例如`Foo`ID 为 5 的 s），请使用：

```
SELECT * FROM Blah
WHERE Blah.foo_id = 5
ORDER BY Blah.index_in_array; 
```

如果您正在订购记录，通常不应该是任意的（除非用户专门选择了任意顺序，例如，对待办事项列表中的项目进行排序）。通常，您对数据的某些“自然发生”属性进行排序，例如添加日期或按名称字母顺序等。

注意：这个答案是伪代码 SQL——确保在将其放入脚本之前使其适应特定的数据库语法。（并且不要忘记添加一些键和索引！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T03:31:51.897

数据库通常不按特定顺序存储事物。您可以从以多种方式排序的数据库中检索事物。例如，假设您有一个表格日历：

```
CREATE TABLE month AS (
    id      NUMBER,
    month   NUMBER,
    day     NUMBER 
); 
```

然后，您可以按顺序检索一年中的日期：

```
SELECT month, day
  FROM calendar
 ORDER BY month, day; 
```

话虽这么说，有办法做你所要求的。例如，Oracle 可以存储嵌套表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:32:10.993

您创建两个表并在它们之间创建主键和外键关系。它将被视为嵌套表和每个嵌套对象。

# php - issue with the width of an absolute element inside a relative element

> ID：10748101
> 
> 赞同：0
> 
> 时间：2012-05-25T03:25:39.670
> 
> 标签：php, jquery, css, css-position

This is what im doing:

*   I have a list of CD tracks (im using a table for tabular data)
*   The lyrics for each track is hidden below the name of the track, inside a div
*   when i click the track, the lyrics pops up, right to the name of the track

The issue i'm having is with the **width** of an absoulte element inside a relative element. For some reason, the width of the absolute element is the max width of the relative element.

In my case, the width of the lyrics popup is the max width of the relative cell data.

What i want is for the absolute element width to flow naturally without any defined width constraint. This way the lyrics line breaka are ok... I could define a width for the lyrics popup, but then some lyrics will have an ugly empty right space... I want my project to be perfect!!

Any ideas how to do this? Thanks

![the text line brak is defined by the width... i dont want that](../Images/4f201933ae9f36be3c8f5015ddf9a19e.png)

my html:

```
<table class="tbl-track">
  <tbody>
    <tr>
      <td>1</td> //width: 20px

      <td class="track-name"> //width: 350px
        <a class="track" href="">track 1</a>
        <div class="lyrics" style="display:none;">
          lyrics goes here<br />
          line 1<br/>
          line 2<br />
          ...<br />
        </div>
      </td>

      <td>duration</td> //width: auto

      <td>play button</td> //width: 20px
    </tr>
  </tbody>
</table> 
```

this is my css:

```
.tbl-track td.track-name {position:relative;}
.lyrics {position:absolute; left:0; top:-20px; background:#000; padding:20px; z-index:999} 
```

this is my jquery:

```
$('a.track').click(function(e) {    
  var w = $(this).width();
  var this_lyrics = $(this).next('.lyrics');
  var duration = 200;

  // hide opened lyrics before displaying a new one
  $('.lyrics').fadeOut(100);

  this_lyrics.hide().css({left:w + 20}).fadeIn(duration);

  e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:26:26.327

这样的事情呢？[http://jsfiddle.net/NVV9Y/](http://jsfiddle.net/NVV9Y/)

我添加的主要修复是 .lyrics 框的最小宽度。它至少保持 175px 宽度，但如果宽度超过 175px，它也会扩展到 div 的宽度。

我认为如果您希望根据歌词的实际宽度调整每一个的大小，只需将 class="small"、class="med" 或 class="wide" 添加到 .lyrics 框和相应的 CSS 中。因此：http: [//jsfiddle.net/NVV9Y/1/](http://jsfiddle.net/NVV9Y/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T03:57:59.780

编辑/更正：

指定“宽度：自动；” 在 .lyrics 中并没有解决它。也尝试“浮动”并不能解决它。

检查这篇文章：[http](http://www.alistapart.com/articles/conflictingabsolutepositions/) ://www.alistapart.com/articles/conflictingabsolutepositions/你根本做不到。所以不好。

* * *

我的建议是使用 JS 将 div 移动到“body”，然后你就有了自由宽度。完成后，将 div 移回放置它的位置（如果需要）。或者只是在 BODY 下创建它们/如果可以的话，将它们全部留在 Body 下，因为这对用户来说更容易和更快。

而且，如果你想尝试别的，这是我的压缩测试 HTML：

```
<html>
 <head>
  <style>
    #rel {
       position: relative;
       top: 100px;
       left: 100px;
       width: 300px;
       height: 300px;
       background: red;
    }
    #abs {
       position: absolute;
       left: 100;
       background: green;
       width: auto;
    }
  </style>
 </head>
 <body>
   <div id="rel">
     <div id="abs">asd fasdf sadf sadf sdaf sdaf sdaf sdaf sdaf sdaf sdaf sdaf sdaf sdaf sdaf sdaf sda f sda f sdaf sd af sda fsda fsdafsda fsd af sdaf sda fsad f sdaf sdaf sda f sda f sda fs adf sd af sda f sda f sda fsd af s adf sda f s fas sdf</div>
   </div>
 </body>
</html> 
```

# cakephp - CakePHP HABTM 关系问题

> ID：10748102
> 
> 赞同：0
> 
> 时间：2012-05-25T03:25:44.613
> 
> 标签：cakephp, has-and-belongs-to-many, relationships

我正在尝试创建一种社交网络类型的网站，用户可以在其中发送/接收好友请求。在我们当前的系统中，当用户发送请求时，所需信息的一半存储在数据库中，然后当用户接受其余信息时，其余信息将被输入。

关系用户表是 id、partyone、partytwo、到期日、活动

我遇到的问题是一旦用户接受请求并输入到期日期，它就会插入到新列中 - 而不是与该用户相关的列中

```
here is my add function

    if($this->request->is('post')){
    $this->Relationship->create(); 
    if ($this->Relationship->save($this->request->data)) 
    { 
        $this->Session->setFlash('The relationship has been saved');  

    }
    else { $this->Session->setFlash('The relationship could not be saved. Please, try again.'); } 
    } 

  }

here is my approve function

if($this->request->is('post')){
        $this->Relationship->create(); 
        $this->Relationship->save($this->request->data);
        $this->Session->setFlash('The information has been saved');}
        else{$this->Session->setFlash('The information couldnt be saved');} 
```

我假设我错过了一些简单的代码，任何帮助将不胜感激将其插入新列 - 而不是与该用户关系相关的列*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:35:09.040

您的帖子完全没有问题，但据我所知，您应该遵循以下描述的一些步骤：

*   当信息的前半部分保存在`Relationship`表中时，您必须获取`id`该条目的信息，您可以获得如下信息：

    `$this->Relationship->save($this->request->data);`

    `$lastId = $this->Relationship->id; // will gives you id of first half info saved`

*   然后你必须`$lastId`在请求确认后将其嵌入其余信息中，即后半部分。如果您可以将该 ID 嵌入到 内的后半部分信息中`$this->request->data`，`$this->Relationship->save($this->request->data)`则将更新先前保存的行。在这种情况下，您不需要`$this->Relationship->create();`.

    根据 cakePHP 的说法，如果其中包含任何数据`id`，那么它不会创建新行并保存，而是会更新具有该`id`.

# sqlite - Is it possible to add custom metadata to an SQLite column?

> ID：10748106
> 
> 赞同：4
> 
> 时间：2012-05-25T03:26:12.743
> 
> 标签：sqlite, metadata

Is it possible to add custom metadata to an SQLite column? Or will I need to store it in a separate column or table?

I'm working on a database where I'd like to store the units of a column in some form, i.e. a Temperature column being in units of Kelvin. Is it possible to store this as a string or some form of custom metadata attached to the column?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:00:51.467

我相信没有。您可以添加另一列。您还可以以某种方式将元数据编码为值（["fruit:apple", "fruit:pear", "mineral:bauxite", ...]），但这会使很多数据更难处理且效率更低。

通常，无论如何，您可能只需要列中的一种类型的数据。

# nginx - nginx + uwsgi: -- unavailable modifier requested: 0 --

> ID：10748108
> 
> 赞同：86
> 
> 时间：2012-05-25T03:26:41.120
> 
> 标签：nginx, uwsgi, ubuntu-12.04

Ubuntu 12.04, nginx 1.2.0, uwsgi 1.0.3.

I start uwsgi with the following command:

```
uwsgi -s 127.0.0.1:9010 -M -t 30 -A 4 -p 4 -d /var/log/uwsgi.log 
```

On each request nginx replies with 502 and uwsgi writes to log the following line:

```
-- unavailable modifier requested: 0 -- 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-15T17:46:05.977

**原始答案**

对于Ubuntu 11.10 上的**Python 2**，使用`upstart`，安装 python 插件`uWSGI`，`apt-get install uwsgi-plugin-python`如果您使用 ini 文件来配置您的`uWSGI`应用程序，则添加`plugins = python`到该`[uwsgi]`部分，它应该可以解决这个问题。

**编辑：针对 Python 3 和 Ubuntu 17.10 进行了更新**

对于Ubuntu 17.10 上的**Python 3**`systemd` ，使用安装 python 插件`uWSGI`，`apt-get install uwsgi-plugin-python3`如果您使用 ini 文件来配置您的`uWSGI`应用程序，则添加`plugins = python`到该`[uwsgi]`部分，它应该可以解决此问题。

有关开始使用`python`/`uWSGI`应用程序的更多信息，包括如何使用`ini`文件配置它们，请查看这个方便的[指南](https://uwsgi-docs.readthedocs.io/en/latest/WSGIquickstart.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-05-25T04:03:06.063

通过安装`uwsgi-plugin-python3`插件并添加启动命令`--plugin python3`选项解决`uwsgi`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-28T23:32:32.213

我从 Ubuntu 上的新贵开始 uwsgi。我通过运行解决了这个问题`apt-get install uwsgi-plugin-python`，然后`plugins=python`在 /etc/uwsgi/applications-available 中添加到我的 application.ini。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-02-05T01:23:26.183

来自[http://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html](http://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html)，“要将请求路由到特定插件，网络服务器需要将一个称为修饰符的幻数传递给 uWSGI 实例。默认情况下，此number 设置为 0，映射到 Python。”

我将 9 用于 bash 脚本并且它正在工作。数字及其含义在此页面上： http: [//uwsgi-docs.readthedocs.org/en/latest/Protocol.html](http://uwsgi-docs.readthedocs.org/en/latest/Protocol.html)

在我的 nginx 配置中：

```
location ~ .cgi$ {
    include uwsgi_params;
    uwsgi_modifier1 9;
    uwsgi_pass 127.0.0.1:3031;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-11-29T18:14:52.957

通过添加插件行修改您的 ini 文件。

```
 [uwsgi]
    plugins         = python3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-02T19:48:04.667

我正在使用带有 Python 3 的 Ubuntu 18.04。下面是我用来让它工作的确切配置。

您必须安装 Python 3 uWSGI 插件：

```
apt install uwsgi-plugin-python3 
```

你的 Nginx 站点配置应该指向你的 uWSGI 套接字。确保端口与后续步骤中的配置匹配。

```
 location / {
        uwsgi_pass 127.0.0.1:9090;
        include uwsgi_params;
    } 
```

重新加载 Nginx 配置以反映您刚刚所做的更改：

```
systemctl reload nginx 
```

您可以使用命令行参数或 ini 文件进行配置。我创建了`uwsgi.ini`. 确保套接字地址与您的 nginx 配置匹配。

```
[uwsgi]
socket = 127.0.0.1:9090
chdir = /var/www
processes = 4
threads = 2
plugins = python3
wsgi-file = /var/www/app.py 
```

我的 app.py 只是一个基本的例子：

```
def application(env, start_response):
    start_response('200 OK', [('Content-Type','text/plain')])
    return [b"Hello World!"] 
```

现在从命令行启动 uWSGI 服务器：

```
uwsgi uwsgi.ini 
```

# jquery - JQuery，以 3 秒间隔显示 Span 内数组中的元素

> ID：10748113
> 
> 赞同：0
> 
> 时间：2012-05-25T03:26:49.450
> 
> 标签：jquery

我一直在努力，现在我觉得是时候寻求帮助了......即使这听起来很简单......

我想以 3 秒的间隔从一个数组中逐个显示元素。我对 jquery 回调不太熟悉。这是我最后一次尝试出售这个拼图：

```
 $("#lkDo").click(function () {

            var fullText = $("#theText").text();
            var arr = fullText.split(" ");

            for (i = 0; i < arr.length; i++) {

                window.setTimeout(function () {
                    $("#theText").html(arr[i]);
                }, 3000);

            }
        });

        <span id="theText">The text is here its a boy</span>
        <br />
        <a id="lkDo" href="#">Here</a> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:28:14.317

由于关闭，您会得到意想不到的结果。此代码将修复它：

```
 for (i = 0; i < arr.length; i++) {

            (function(i) {
                window.setTimeout(function () {
                    $("#theText").html(arr[i]);
                }, 3000 * i);
            })(i);

        } 
```

[http://jsfiddle.net/HWFZS/](http://jsfiddle.net/HWFZS/)

也可以使用递归来解决问题：

```
var arr = ['a', 'b', 'c', 'd'],
    i = 0;

var changeText = function() {
    setTimeout(function() {
        $("#theText").html(arr[i]);
        i++;

        if (i < arr.length) {
            changeText();
        }
    }, 3000);
};

changeText();​ 
```

[http://jsfiddle.net/HWFZS/1/](http://jsfiddle.net/HWFZS/1/)

但我个人更喜欢第一个解决方案

# powershell - Powershell: What is the difference between char[] and String?

> ID：10748116
> 
> 赞同：1
> 
> 时间：2012-05-25T03:27:18.560
> 
> 标签：powershell

i found that the result $request.ContentType is difference by using char[] and String.

> $request = [System.Net.HttpWebRequest].create($URL)
> 
> ```
> $request.ContentType = [char[]] "application/x-www-url-formurlened"
> $request.ContentType = "application/x-www-url-formurlened" 
> ```

What is the different in the actual output to the server side, if I made a request like that using char[] and string?

it is so confusing...i guess it should be the same

thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T03:43:22.157

我想我弄清楚了这个问题。看一下这个：

```
PS D:\> $foo = "bar"
PS D:\> $foo
bar
PS D:\> $faz = [string][char[]]"baz"
PS D:\> $faz
b a z 
```

Powershell 会将您`char[]`转换为 a `string`，因为`HttpRequest.ContentType`它是 type ，但是当 Powershell 将数组转换为字符串时，它会在每个元素之间`string`插入特殊变量的值。[about_special_variables](http://technet.microsoft.com/en-us/library/hh847796.aspx)`$OFS`的帮助包含有关（和其他内容）的信息。的默认值是解释此行为的空格。`$OFS``$OFS`

（感谢 BartekB 在评论中指出 $OFS。）

# python - Starting debugger on errors in threads

> ID：10748118
> 
> 赞同：2
> 
> 时间：2012-05-25T03:27:41.613
> 
> 标签：python

I'm using following trick to get debugger started on error [Starting python debugger automatically on error](https://stackoverflow.com/questions/242485/starting-python-debugger-automatically-on-error)

Any idea how to make this also work for errors that happen in newly created threads? I'm using thread pool, something like [http://code.activestate.com/recipes/577187-python-thread-pool/](http://code.activestate.com/recipes/577187-python-thread-pool/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:58:27.523

我会说在每个线程的 run() 开头注入该代码。

如果您不想更改该代码，则可以对其进行monkeypatch，例如：

```
Worker.run = lambda *a: [init_pdb(), Worker.run(*a)][-1] 
```

或者像这样：

```
def wrapper(*a):
    # init pdb here
    Worker.run(*a)

Worker.run = wrapper 
```

如果你想要真正的硬核，你可以在导入其他模块之前完全覆盖 threading.Thread.start，或者可能完全覆盖 threading.Thread，例如：

```
class DebuggedThread(threading.Thread):
    def __init__(self):
        super(DebuggedThread, self).__init__()
        self._real_run = self.run
        self.run = self._debug_run
    def _debug_run(self):
        # initialize debugger here
        self._real_run()

threading.Thread = DebuggedThread 
```

# algorithm - Is there some math method to represent this kind of data?

> ID：10748119
> 
> 赞同：0
> 
> 时间：2012-05-25T03:27:45.590
> 
> 标签：algorithm

Suppose we have an array with cluster effect to some degree, such as

1 2 3 7 8 12 13 16 20 21 22 23

how do we represent this kind of data mathematically ? If we have the other array like this

1 2 10 11 20 21

the intersection of these two array is

1 2 20 21

Noted that we are in the situation that we have an fully paralleled algorithm to calculate the intersection of two arrays of this kind, we want to analyze the cost in math convention. The algorithm is about binary search every element of the short array in the longer one.

We designed some algorithm for GPU, which is quite fast. We find that the algorithm is faster on the data with these kind of cluster effect. Now we want to analyze our algorithm on these kind of data, but we have no idea to do this.

Is there something like random process or anything else can provide help to calculate the expectation of the cost ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:13:40.403

遍历数组并找到每对之间的差异（0,1; 1,2; ...）。计算 1 的数量并将其除以 n-1。这会给你连续对的百分比。这是一个原始指标。

原始度量：

```
values = [1,2,3,4,5,8,9,10]  
values_length = 8  
consecutive = 0  
for i=0 to values_length - 1:  
    consecutive += ((values[i+1] - values[i]) == 1) ? 1 : 0
return consecutive/(values_length-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:11:09.270

我不知道你所说的完全并行算法是什么意思，但由于数组是排序的，你可以做一个时间复杂度为 O(m + n) 的顺序算法，其中 m 和 n 是数组长度：

```
int i = 0, j = 0;
while (i < array1.length && j < array2.length) {
    if (array1[i] == array2[j]) {
        add array1[i] to the intersection list
        ++i;
        ++j;
    } else if (array1[i] < array2[j]) {
        ++i;
    } else {
        ++j;
    }
} 
```

这假定数组包含唯一值。如果一个值可能重复，则需要更好地定义问题，以确定什么构成了交集数组。

通过执行二进制搜索而不是在未找到匹配项时简单地增加 i 或 j ，该算法可能会加快很多速度。需要进行二分搜索，报告在未找到元素时应将其插入的位置。（仅仅报告失败将是浪费时间。）

# c++ - 返回文本字符串，然后在后面的函数中调用所述字符串

> ID：10748127
> 
> 赞同：0
> 
> 时间：2012-05-25T03:28:57.883
> 
> 标签：c++

我几乎完成了所有作业，但我要做的最后一部分是编写一个程序，该程序将从名为“quad.txt”的文本文件中读取一些值，并使用二次公式计算根，然后输出值. 实验室的第一部分是在一个函数 main 中完成这一切。这很好用。但是，现在我被要求编写三个单独的函数：一个计算判别式 (b^2 -(4*a*c)) 并根据判别式的值返回字符串值（正、零或负） ，另一个将根据上面返回的字符串值计算实际的根和输出，最后是 main 函数，它将打开文件并运行其他两个函数。请参阅下面的代码，但我卡住的地方是我无法弄清楚如何从函数 disc() 返回字符串，然后让函数 display() 调用返回的字符串值并输出正确的数据。到目前为止，这是我的代码：

这是我的 quad.txt 文件[quad.txt的链接](http://www.mediafire.com/view/?z3k77ytz3i1ikla)

```
//Brian Tucker
//5.23.2012
//Lab 6 Part1
//Quadratic Formula from text file

#include <iostream>
#include <fstream>
#include <cmath>
#include <iomanip>
#include <cstdlib>
#include <conio.h>
#include <string>

using namespace std;

int a, b, c; //sets up vars
double r1, r2;

string disc(){
    if((pow(b,2) - (4*a*c) > 0)){ //determines if there are two roots and outputs
    return positive;
    }
    else if((pow(b,2) - (4*a*c) == 0)){ //determines if there is a double root
    return zero;
    }
    else if((pow(b,2) - (4*a*c) < 0)){ //determines if there are no roots
    return negative;
    }
}

void display(string data){
    r1=((-b)+sqrt(pow(b, 2)-(4*a*c)))/(2*a); //quadratic formula
    r2=((-b)-sqrt(pow(b, 2)-(4*a*c)))/(2*a);

    if(positive){
    cout<<setw(3)<<"a="<<a; //outputting a, b, c
    cout<<setw(3)<<"b="<<b;
    cout<<setw(3)<<"c="<<c;
    cout<<setw(7)<<"2 rts";
    cout<<setw(5)<<"r1="<<r1;
    cout<<setw(5)<<"r2="<<r2;
    }
    else if(zero){
    cout<<setw(3)<<"a="<<a; //outputting a, b, c
    cout<<setw(3)<<"b="<<b;
    cout<<setw(3)<<"c="<<c;
    cout<<setw(7)<<"Dbl rt";
    cout<<setw(5)<<"r1="<<r1;
    }
    else if(negative){
    cout<<setw(3)<<"a="<<a; //outputting a, b, c
    cout<<setw(3)<<"b="<<b;
    cout<<setw(3)<<"c="<<c;
    cout<<setw(7)<<"No rts";
    }
    cout<<endl;
}

int main(){
    ifstream numFile; //sets up the file
    numFile.open("quad.txt"); //opens the file

    while(numFile.good()){ //while there are still values in the file, perform the function

    numFile>>a>>b>>c;

    string result = disc();
    display(result);
    }

    numFile.close();

    getch();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:34:48.027

这样做的方法是从磁盘返回一个 std::string，将其作为参数传递给显示，并使用 == 将其与设置值进行比较。

例如：

```
#include <string>
#include <iostream>

std::string valueFunction( int i)
{ 
  if ( i >0 )
   return "positive";
  else
   return "not positive";
}

void resultFunction( std::string data)
{
   if (data == "positive")
      std::cout<<"It was a positive number"<<std::endl;
   else if (data == "not positive")
      std::cout<<"it was not a positive number"<< std::endl;
}

int main()
{  
   int i = 453;
   std::string result = valueFunction(i);
   resultFunction(result);
} 
```

# common-lisp - How to call this function in Common Lisp?

> ID：10748130
> 
> 赞同：3
> 
> 时间：2012-05-25T03:29:50.960
> 
> 标签：common-lisp

```
(defun (setf xwin-border-width) (width win)
    (setf (xlib:drawable-border-width win) width)) 
```

then how to call the above function ? In fact i donot really understand what "(setf xwin-border-width)" means in place of function time ?

Sincerely !

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T03:59:50.383

这定义了一个`setf`函数。您可以使用`(setf (xwin-border-width *some-window*) width)`.

您可能会发现`setf`有用的文档：[http ://www.lispworks.com/documentation/lw50/CLHS/Body/m_setf_.htm](http://www.lispworks.com/documentation/lw50/CLHS/Body/m_setf_.htm)

Hyperspec 也有一个关于通用参考的部分：[http ://www.lispworks.com/documentation/lw50/CLHS/Body/05_a.htm](http://www.lispworks.com/documentation/lw50/CLHS/Body/05_a.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T15:26:39.020

通过将第一个参数设为这种形式的 defun `(setf f)`，您可以定义当第一个参数 to`setf`是对 f 的调用时会发生什么。

```
(defun foo (lst) (car lst))

(defun (setf foo) (val lst)
  (setf (car lst) val)) 
```

上面这对函数将 foo 定义为 car 的同义词。在名称为 形式的函数的定义中`(setf f)`，第一个参数表示新值，其余参数表示 f 的参数。

现在 any `setf`to`foo`将调用上面的后一个函数：

```
? (let ((z (list 1 2 3)))
     (setf (foo z) 168)
     z)
(168 2 3) 
```

不必`foo`为了定义`(setf foo)而定义，但它们通常成对出现。

查看 Paul Graham 的第 6 章 ANSI Common Lisp 函数。

# java - PGraphics outofmemory issue Java/Processing.org

> ID：10748137
> 
> 赞同：0
> 
> 时间：2012-05-25T03:30:57.497
> 
> 标签：java, processing

I am using Java/Processing.org to create a drawing application.

I need to be able to reset the PGraphics object quite a lot. This is fine if I am only drawing rects,lines ect to the PGraphics object. But I need to be able to draw images to it.

Is there any way to reset the PGraphics object without calling:

```
graphic=createGraphics(700, 700, JAVA2D); 
```

or is there some other way around this issue?

Here is some sample code to highlight the issue. It should crash after about 40+ clicks...

```
PImage img;
PImage main_image;

PGraphics graphic;

void setup(){
  size(700,700);
 img=loadImage("img.png"); 
  graphic=createGraphics(700, 700, JAVA2D); 
}

void draw(){

 graphic.beginDraw();
 graphic.image(img,mouseX,mouseY,10,10); 

 graphic.endDraw();
 image(graphic,0,0);

}

void mouseClicked(){

  graphic=createGraphics(700, 700, JAVA2D); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:02:45.630

已解决::: 我每次只调用以下函数时都没有调用 createGraphic：

```
graphic = setAlpha(graphic); 
```

这是功能：

```
PGraphics setAlpha(PGraphics g){
  g.loadPixels();
 for (int x = 0; x < g.width; x++ ) {
    for (int y = 0; y < g.height; y++ ) {

      // Calculate the 1D pixel location
      int loc = x + y*g.width;

  g.pixels[loc]=color(0,0);
 }  
 } 
 g.updatePixels();
 return g;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T02:30:15.440

PGraphics 有一个功能已经做到了这一点：`clear()`.

从[参考](https://processing.org/reference/clear_.html)：

> 清除缓冲区内的像素。此函数仅适用于使用 createGraphics() 函数创建的 PGraphics 对象。与主图形上下文（显示窗口）不同，使用 createGraphics() 创建的附加图形区域中的像素可以完全或部分透明。此函数清除 PGraphics 对象中的所有内容，以使所有像素 100% 透明。

# meteor - 如何在 Handlebars 模板中输出 Meteor Session 键值对？

> ID：10748140
> 
> 赞同：0
> 
> 时间：2012-05-25T03:31:07.450
> 
> 标签：meteor

我想在 Meteor 车把模板中输出 Meteor Session 键值对。

[http://docs.meteor.com/#session](http://docs.meteor.com/#session)

我尝试从我的 Template.name.name js 文件中返回 Session 和 Session.keys，然后在车把中返回 #each 无济于事。

我尝试了以下方法来迭代 Session 键并尝试返回一个对象，但它不起作用。

我尝试了以下方法来遍历 Session 键并返回一个看起来像这样的 JSON 数据列表。{“我的名字”：“我的价值”，“我的名字2”：“我的价值2”，“我的名字3”：“我的价值”}

```
_.each(Session.keys, function(element, index, list){

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:35:17.100

这是我问的一个类似问题，7zark7 有一个很好的解决方案

[我可以订阅 Meteor Session 以获取响应式模板渲染更新吗？](https://stackoverflow.com/questions/10760819/can-i-subscribe-to-meteor-session-for-reactive-template-render-updates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:55:39.257

这可能是一个非常丑陋的解决方案，但它现在有效。如果有人找到更好的解决方案，请发布您的答案。显然，您可以将其作为 JSON 或其他某种格式返回。

```
Handlebars.registerHelper('getsessions', function() {
    var a = '<div class="span2"><b>name</b></div><div class="span2"><b>value</b></div><br />';
    _.each(Session.keys, function(element, index, list){
        a = a + '<div class="span2">' + index + '</div>' + 
        '<div class="span2">' + element + '</div><div class="span2"></div><br />';
    });
    return a;
  }); 
```

然后在模板中我把这个

```
{{#getsessions }}{{/getsessions}} 
```

它以 HTML 格式显示 Meteor Session 内容。

有一个副作用，我必须追捕或发布另一个 SO。我在 Meteor.startup 上填充了一个 Meteor Session 对象，但是上面的代码不会每次都显示内容，或者说大部分时间都不会显示内容，直到下一个视图渲染。

小号

# iphone - Moving Tabbar off screen when View Loads (for certain views only)

> ID：10748142
> 
> 赞同：0
> 
> 时间：2012-05-25T03:31:33.487
> 
> 标签：iphone, ios, ios5, xcode4.3

Ive spent 3 hours on this now, its really irritating me. I need to hide the tabbar for certain views and bring it back for others. I have been trying

```
self.hidesBottomBarWhenPushed = TRUE; 
```

with no success. (because some views I have to `POP` off the screen and that only works with PUSH and its even at that it doesnt seem to work right)

So I was wondering if I could move the "frame" of a tabbar somehow to just below the screen view and then bring it back up when I need it, even with an animation would be nice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:16:55.540

答案可能更令人恼火。如果您谈论的是 tabbarcontroller 拥有的 tabbar，则不能。通过一些技巧，您可以移动它，但不幸的是视图没有正确调整大小。唯一的方法是使用 tabbar delegate ptotocol 创建自己的类似 tabbarcontroller。也许在 ios5 中他们改变了一些东西，但是当我在 ios4 中尝试时，我发现创建自己的标签栏控制器的速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:23:45.960

使用此代码

```
- (void) hidetabbar {

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];

    for(UIView *view in appDelegate.objtabbar.view.subviews)
    {
        NSLog(@"%@", view);

        if([view isKindOfClass:[UITabBar class]]||[view isKindOfClass:[UIButton class]]||[view isKindOfClass:[UIImageView class]])
        {
            if (hiddenTabBar) {
                [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];
            } else {
                [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
            }
        } else {
            if (hiddenTabBar) {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
            } else {
                [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
            }
        }
    }
    [UIView commitAnimations];

    hiddenTabBar = !hiddenTabBar;
} 
```

# javascript - x轴上dateTime的Highcharts最大间隔？

> ID：10748151
> 
> 赞同：6
> 
> 时间：2012-05-25T03:32:57.293
> 
> 标签：javascript, highcharts

我有一个每日图表，跨越 00:00 到 23:59。但是对于实时数据，假设当前是上午 9 点，默认情况下它会将图表从 00:00 拉伸到 09:00，这对我来说看起来不太好。我想要的是同一天 23:59 的 x 轴最大值，因此它将显示 09:00 - 23:59 为空白。我试过`$graph["xAxis"]["max"] = (time()+86400)*1000`但无济于事。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-02T12:46:17.637

（虽然这是一个老问题，但我使用谷歌搜索来到这里，当在 highcharts 中搜索 x 轴的最大时间时，它仍然非常位于搜索结果的顶部，所以我认为这个评论仍然有用。）

对于旧版本的 highcharts，可接受的答案可能是正确的，但在当前版本 (v3.0.7) 中，您还可以将 xAxis.max 属性设置为您希望图表结束的日期时间。这看起来像这样，并且是 IMO 一种更清洁的解决方案：

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            type: 'datetime',
            max: Date.UTC(2010, 0, 2),
            dateTimeLabelFormats: {
                day: '%e of %b'   
            }
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6],
            pointStart: Date.UTC(2010, 0, 1),
            pointInterval: 1 * 3600 * 1000 // one hour
        }]
    });
}); 
```

请参阅[此 jsfiddle 示例](http://jsfiddle.net/tYESu/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-27T03:59:52.883

Highcharts 将仅显示指定的最后一个数据点。如果您想强制它显示 0900 - 23:59，您将必须将所有数据点传递给您想要显示的那些时间，**但对于值传递 null**。这是一个示例：[jsfiddle 示例](http://jsfiddle.net/sKApn/)。

一旦数据点超过小时范围，它将自动以不同的方式格式化数据时间标签。您可能希望通过[dateTimeLabelFormats](http://www.highcharts.com/ref/#xAxis--dateTimeLabelFormats)控制数据标签的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T15:43:53.690

如上一个答案所述，默认情况下，

> Highcharts 将仅显示指定的最后一个数据点。

但是，正如您在[默认 jsfiddle 中看到的 min max setting](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/min-max/)，除了 min 和 max 之外，您还必须指定 endOnTick 和 startOnTick 为假。此外，在处理日期时间类型的缺失数据时，您需要将 ordinal 设置为 false 以便为空数据留出空间。

这意味着您的 xAxis 应如下所示：

```
xAxis : {
    allowDecimals : false,
    endOnTick : false,
    max : /** Date in timestamp for the end the day */,
    min : /** Date in timestamp for the beginning the day */,
    ordinal : false,
    startOnTick : false,
    type : 'datetime'
}, 
```

# grails - 如何在不使用 JavaScript 的情况下向提交按钮添加参数？

> ID：10748152
> 
> 赞同：3
> 
> 时间：2012-05-25T03:32:58.477
> 
> 标签：grails

我的表单有一个项目列表，每个项目都有一个删除按钮。我需要提交要删除的项目的索引以及表单的其他值（以供进一步编辑）。

使用 JavaScript，它看起来像这样：

```
<g:form method="post" mapping="defaultAction" id="${paymentInstance?.id}">
    <g:hiddenField name="id" value="${paymentInstance?.id}"/>
    <g:hiddenField name="version" value="${paymentInstance?.version}"/>
    <g:hiddenField name="deleteAdjIdx"/>
    <g:each in="${paymentInstance?.adjustments}" var="adj" status="idx">
        <g:set var="adjName" value="adjustments[${idx}]"/>
        <g:textField name="${adjName}.dollars" value="${adj.dollars}"/>
        <g:actionSubmit action="deleteAdj" value="delete" onclick="jQuery('#deleteAdjIdx').val(${idx})"/>
    </g:each>
</g:form> 
```

如果没有 JavaScript，我怎么能做到这一点？（除了发布的参数之外，我可以在 URL 中添加一个参数吗？或者，映射中的某种多路复用？）

defaultAction 映射为：

```
 name defaultAction: "/$controller/$id"{     // stable URL for payments regardless of current status (editable or not)
        constraints {
            id(matches: /\d+/)      // since our action names don't start with a digit but many domain ids do
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T16:54:46.697

我刚刚遇到了同样的问题，并找到了另一个使用 HTML5 的“formaction”属性的解决方案。它们可以被赋予一个值，该值可以包括控制器、动作、附加参数等。

通常，在表单上的提交按钮中添加参数（例如删除特定子对象）如下所示：

```
<input type="submit" formaction="/<controller>/<action>/<id>?additionalParam1=...&additionalParam2=..." value="Delete" > 
```

在你的例子中：

```
<input type="submit" formaction="/payment/deleteAdj/${adj.id}" value="delete" > 
```

或者

```
<input type="submit" formaction="/payment/deleteAdj?delAdjID=${adj.id}" value="delete" > 
```

在 deleteAdj 中，您将删除 params.id 或 params.delAdjID 中所述的调整，并将数据保存在 params 中或直接使用 params 重新填写表单（例如，在呈现 create.gsp 时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:44:36.337

您的代码似乎创建了几个删除按钮，并且每个按钮单击都会重新加载页面。

那么为什么不创建几个表单：

```
<g:each in="${paymentInstance?.adjustments}" var="adj" status="idx">
    <g:form method="post" mapping="defaultAction" id="${paymentInstance?.id}">
        <g:hiddenField name="id" value="${paymentInstance?.id}"/>
        <g:hiddenField name="version" value="${paymentInstance?.version}"/>
        <g:hiddenField name="deleteAdjIdx" value="${idx}"/>
        <g:set var="adjName" value="adjustments[${idx}]"/>
        <g:textField name="${adjName}.dollars" value="${adj.dollars}"/>
        <g:actionSubmit action="deleteAdj" value="delete" />
    </g:form>
</g:each> 
```

**更新**：

如果你需要一个表单，你也可以使用普通的提交按钮：给你的表单一个固定的动作，给你的提交按钮一个值：

```
<g:form method="post" 
        controller="payment" action="myAction" 
        id="${paymentInstance?.id}">
    <g:each in="${paymentInstance?.adjustments}" var="adj" status="idx">
        <g:hiddenField name="id" value="${paymentInstance?.id}"/>
        <g:hiddenField name="version" value="${paymentInstance?.version}"/>
        <g:set var="adjName" value="adjustments[${idx}]"/>
        <g:textField name="${adjName}.dollars" value="${adj.dollars}"/>
        <input type="submit" name="delete" value="${idx}"/>
    </g:each>
</g:form> 
```

这应该会产生一个由`payment`控制器处理的表单，并且`myAction`. 在此操作中，您可以检查是否`params.delete`存在。此参数的值将是 的值`${idx}`。

如果您需要此表单的其他操作，您可以简单地以相同的方式添加其他提交按钮并检查它们的 params-value 是否存在。然后，您可以跳转到控制器中的另一个操作（这就是这些`<g:actionSubmit .../>`按钮在后台处理的方式。

**更新 2：** 你是绝对正确的：按钮上显示的索引是丑陋的。所以另一种方法是使用我第一次更新的代码并将按钮更改为

```
 <input type="submit" name="delete_${idx}" value="Delete me!"/> 
```

在您的控制器中，您必须使用这样的代码

```
def idx = null
params.each { key, value ->
  if (key.startsWith('delete_')) {
    idx = key-"delete_"
  }
}
if (idx) {
  // delete element
} 
```

或者，如果您更喜欢 groovier 版本

```
def idx = (params.find { key, value -> key.startsWith('delete_')})?.key
if (idx) {
  id -= 'delete_'
  // delete element
} 
```

甚至更加模糊:-)

```
def idx = ''+(params.find { key, value -> key.startsWith('delete_')})?.key-'null'-'delete_'
if (idx) {
  // delete element
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T02:55:09.710

您只能使用一个**提交**按钮，并将`g:each`[`radioGroup`](http://grails.org/doc/latest/ref/Tags/radioGroup.html)

例子：

```
<g:radioGroup name="adj" labels="[put here your text]" values="[put here the indexes]">
   <p>${it.label} ${it.radio}</p>
</g:radioGroup> 
```

现在`adj`将保存要删除的项目的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T00:28:14.083

我将尝试将参数添加到 actionSubmit 中的操作名称：

```
<my:actionSubmit action="deleteAdj" value="delete" params="${[deleteAdjIdx: idx]})"/> 
```

我没有找到一个很好的方法来做到这一点，所以我想出了以下技巧。如果有人知道任何改进，我将不胜感激。

添加到 MyTagLib：

```
import org.codehaus.groovy.grails.web.util.WebUtils

def actionSubmit = { attrs ->
    String action = attrs.action ?: attrs.value
    Map params = attrs.remove('params')
    if (params) {
        attrs.action = (action + WebUtils.toQueryString(params)).encodeAsURL()
    }
    out << g.actionSubmit(attrs)
} 
```

我解压缩参数并在过滤器中恢复原始操作名称：

```
package com.example;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;

import org.springframework.web.filter.GenericFilterBean
import org.codehaus.groovy.grails.web.util.WebUtils
import com.example.util.MyWebUtils
import javax.servlet.http.HttpServletRequest;

/**
 * Handles params packed into the MyTagLib.actionSubmit param name.
 * This Filter needs to come before GrailsWebRequestFilter.
 * <p/>
 * Updating the GrailsParameterMap after the GrailsWebRequestFilter doesn't work,
 * because the request given to DefaultUrlMappingInfo.checkDispatchAction()
 * is the immutable request saved in the GrailsWebRequest, not the wrapped request
 * that this filter passes on down the chain.
 */
public class ActionSubmitParamFilter extends GenericFilterBean {

    final static QUERY_SEPARATOR = '?'
    final static QUERY_SEPARATOR_REGEX = '[?]'
    final static PARAM_SEPARATOR_REGEX = '[&]'

    @Override
    void doFilter(final ServletRequest request, final ServletResponse response, final FilterChain chain) throws IOException, ServletException {
        def dispatchAction = request.parameterNames.find {it.startsWith(WebUtils.DISPATCH_ACTION_PARAMETER)}
        def decoded = dispatchAction?.decodeURL()
        if (decoded?.contains(QUERY_SEPARATOR)) {
            def overrides = unpackParams(decoded)
            overrides[dispatchAction] = null   // deletes from the overridden request params
            request = MyWebUtils.overrideParams((HttpServletRequest) request, overrides)
        }
        chain.doFilter(request, response);
    }

    private Map unpackParams(String decoded) {
        String action, paramsPart
        (action, paramsPart) = decoded.split(QUERY_SEPARATOR_REGEX)
        assert action.startsWith(WebUtils.DISPATCH_ACTION_PARAMETER)
        def packedParams = [:].withDefault {[]}
        packedParams[action] << ''

        for (param in paramsPart.split(PARAM_SEPARATOR_REGEX)) {
            if (param.contains('=')) {
                def (name, value) = param.split('=')
                packedParams[name.decodeURL()] << value.decodeURL()
            } else {
                packedParams[param.decodeURL()] << ''
            }
        }
        packedParams
    }
} 
```

我制作了实用方法来覆盖请求参数并配置过滤器：

```
package com.example.util

import org.springframework.web.multipart.MultipartHttpServletRequest
import javax.servlet.http.HttpServletRequest
import javax.servlet.http.HttpServletRequestWrapper
import groovy.util.slurpersupport.GPathResult
import com.example.ActionSubmitParamFilter

class MyWebUtils {

    static HttpServletRequest overrideParams(HttpServletRequest original, Map<String, List<String>> overrides) {
        assert !(original instanceof MultipartHttpServletRequest)   // if we get one of these, we'll need to use a special wrapper

        def params = (Map<String, String[]>) new HashMap(original.getParameterMap())
        overrides.each {k, v ->
            if (v == null) {
                params.remove(k)    // significant for parameterNames enumeration and parameterMap
            } else {
                params[k] = v as String[]
            }
        }
        params = Collections.unmodifiableMap(params)
        new HttpServletRequestWrapper(original) {

            @Override
            String[] getParameterValues(String name) {
                params[name]
            }

            @Override
            String getParameter(String name) {
                String[] values = params[name]
                values ? values[0] : (values == null ? null : '')
            }

            @Override
            Map getParameterMap() {
                params
            }

            @Override
            Enumeration getParameterNames() {
                Collections.enumeration(params.keySet())
            }
        }
    }

    // used dynamically by _Events.eventWebXmlStart
    static void prependActionSubmitParamFilter(GPathResult webXml) {

        def filters = webXml.filter
        def filterMappings = webXml.'filter-mapping'

        def firstFilter = filters[0]
        def firstFilterMapping = filterMappings[0]

        firstFilter + {
            filter {
                'filter-name'('actionSubmitParam')
                'filter-class'(ActionSubmitParamFilter.name)
            }
        }

        firstFilterMapping + {
            'filter-mapping' {
                'filter-name'('actionSubmitParam')
                'url-pattern'("/*")
                'dispatcher'("FORWARD")
                'dispatcher'("REQUEST")
            }
        }
    }
} 
```

最后，我在 _Events.groovy 中添加了以下内容，通过扩展 ControllersGrailsPlugin.doWithWebDescriptor 来配置 web.xml 中的过滤器：

```
eventWebXmlStart = {

    pluginManager.getGrailsPlugin('controllers').with {
        def originalClosure = instance.doWithWebDescriptor  // extending
        instance.doWithWebDescriptor = { GPathResult webXml ->

            // static import fails after clean (before compile), so load dynamically
            def webUtils = getClass().classLoader.loadClass('com.example.util.MyWebUtils')
            webUtils.prependActionSubmitParamFilter(webXml)

            // call super after (so above filter comes before GrailsWebRequestFilter in chain)
            originalClosure.resolveStrategy = Closure.DELEGATE_FIRST
            originalClosure.delegate = delegate
            originalClosure(webXml)
        }
    }
} 
```

# java - 指定的密钥太长 - 最大密钥长度为 767 字节

> ID：10748155
> 
> 赞同：7
> 
> 时间：2012-05-25T03:33:31.930
> 
> 标签：java, mysql, utf8mb4

当我执行以下命令时：

```
create table assessment (
    id integer not null auto_increment unique,
    assignment_weight_type tinyint not null,
    description varchar(255),
    end_date datetime not null,
    from_grade tinyint not null,
    f_id tinyint not null,
    name varchar(255) not null,
    start_date datetime not null,
    status tinyint not null,
    weight smallint,
    school_id integer not null,
    school_year_id integer not null,
    s_id integer, primary key (id),
    unique (name, school_id, school_year_id, from_grade, f_id)
) ENGINE=InnoDB; 
```

我收到此错误消息：

```
Specified key was too long; max key length is 767 bytes 
```

我正在使用 utf8mb4 的字符集。那么为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T03:39:44.783

`utf8mb4`每个字符最多使用四个字节，因此名称本身可能占用多达 1020 个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-07T20:24:15.660

我也遇到了同样的问题，我在 mysql 中为这些变量设置值，如下所示，它解决了这个问题。

1.global.innodb_large_prefix = 1

2.innodb_file_format=梭子鱼

3.innodb_file_format_max=梭子鱼

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-23T08:34:11.633

使用此命令创建数据库。

```
 create database <DATABASE_NAME> character set latin1; 
```

# jquery - jQuery英雄背景从右向左滑动

> ID：10748157
> 
> 赞同：0
> 
> 时间：2012-05-25T03:33:46.107
> 
> 标签：jquery, animation

是的，我知道有无数关于从右到左滑动图像（和 LTR）的帖子，但我还没有看到一个解决我的具体问题的帖子。

我有几个 div 用作我的背景。为了让它们从右向左滑动，我将 css 中的“左”设置为图像的宽度，然后将该图像设置为 0 的“左”（以及 css 左的前一个英雄图像为 0到 - 图像宽度）。问题是浏览器上的滚动条在动画发生时显示和消失。有没有办法在动画期间不显示滚动条。

我意识到滚动条正在显示，因为我将 css“左”设置为屏幕右侧但不知道任何其他方式允许从右侧滑入

```
<div id="hero_bg">
   <div class="hero"><img src="/img/one.jpg" /></div>
   <div class="hero"><img src="/img/two.jpg" /></div>
   <div class="hero"><img src="/img/three.jpg" /></div>
</div> 
```

CSS是：

```
.hero
{
    position: absolute;
    display: none;
    width: 1245px;
    height: 619px;
    left: 0px;
    top: 0px;
    z-index: -1000;
} 
```

最后是 JS：

```
$(document).ready(function () {
    $('.hero').hide();

    var delay = 2000;
    var divIdx = -1;
    var arrDiv = $("div.hero").toArray();

    function bgSlide() {
        if (divIdx < 0) {
            divIdx = 0;
            $(arrDiv[divIdx]).show();
        } else {
            var $out = $(arrDiv[divIdx]);
            divIdx = (divIdx + 1) % arrDiv.length;
            var $in = $(arrDiv[divIdx]);
            $in.css('left', $in.outerWidth());
            $in.show();
            $out.animate({ left: -$out.outerWidth() });
            $in.animate({ left: 0 });
        }
    }

    setInterval(bgSlide, delay);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:39:59.643

CSS：

```
body{ overflow:hidden} 
```

或 (CSS 3)

```
body{ overflow-y:hidden;} 
```

或 (CSS 3)

```
body{ overflow-x:hidden;} 
```

或在动画期间使用 jquery 设置上述 css

```
$('body').css("overflow","hidden"} 
```

*我的语法可能是错误的，因为我是从头开始写的

# python - 为什么 + 运算符不更改列表而 .append() 呢？

> ID：10748158
> 
> 赞同：10
> 
> 时间：2012-05-25T03:33:50.507
> 
> 标签：python, list, append, concatenation

我正在研究 Udacity，Dave Evans 介绍了一个关于列表属性的练习

```
list1 = [1,2,3,4]
list2 = [1,2,3,4]

list1=list1+[6]
print(list1)
list2.append(6)
print(list2)

list1 = [1,2,3,4]
list2 = [1,2,3,4]

def proc(mylist):
    mylist = mylist + [6]

def proc2(mylist):
    mylist.append(6)

# Can you explain the results given by the four print statements below? Remove
# the hashes # and run the code to check.

print (list1)
proc(list1)
print (list1)

print (list2)
proc2(list2)
print (list2) 
```

输出是

```
[1, 2, 3, 4, 6]
[1, 2, 3, 4, 6]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4, 6] 
```

因此，在函数中将 6 添加到集合中不会显示，但在不在函数中时会显示？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T03:40:29.383

> 因此，在函数中将 6 添加到集合中不会显示，但在不在函数中时会显示？

不，这不是发生的事情。

发生的情况是，当您执行时`mylist = mylist + [6]`，您实际上是在创建一个全新的列表并将其放入局部`mylist`变量中。该`mylist`变量将在函数执行后消失，新创建的列表也将消失。

OTOH 执行时`mylist.append(6)`不会创建新列表。您已经在`mylist`变量中获得了列表，并在同一个列表中添加了一个新元素。结果是列表（也被指向`list2`）将自己改变。该`mylist`变量将再次消失，但在这种情况下您更改了原始列表。

让我们看看更直观的解释是否可以帮助您:)

# 当你打电话时会发生什么`proc()`

当您编写时，`list1 = [1, 2, 3, 4, 5]`您正在创建一个新的列表对象（在等号的右侧）并创建一个新变量 ，`list1`它将指向该对象。

![创建新的列表实例和全局变量](../Images/f37fec64e04e711e10daee511eab160d.png)

然后，当您调用 时`proc()`，您会创建另一个新变量 ，`mylist`并且由于您`list1`作为参数传递，`mylist`因此将指向同一个对象：

![调用方法创建局部变量](../Images/65e73b7f6e9538d66307670c5e12815d.png)

但是，该操作`mylist + [6]` *创建了一个全新的列表对象*，其内容是 所指向的对象的`mylist`内容加上以下列表对象的内容 - 即`[6]`. 由于您将此新对象归因于`mylist`，因此我们的场景发生了一些变化，`mylist`不再指向 所指向的同一个对象`list1`：

![mylist 指向新的列表对象](../Images/4ae233c07e727ec31a8ba3b16ef7ee60.png)

我没有说的`mylist` 是一个*局部变量*`proc()`：它会在函数结束后消失。因此，当`proc()`执行结束时，`mylist`消失了：

![我的列表不见了](../Images/f706853536c3a3f2b317725a41335395.png)

由于没有其他变量指向由 生成的对象`mylist + [6]`，它也会消失（因为垃圾收集器*会收集它）：

![GC收集列表](../Images/60f08f39ca06b4f1e9b11fcdd319a5d3.png)

请注意，最后，指向的对象`list1`没有改变。

# 当你打电话时会发生什么`proc2()`

当你打电话时，一切都会改变`proc2()`。起初，它是同一件事：你创建一个列表......

![创建新的列表实例和全局变量](../Images/f37fec64e04e711e10daee511eab160d.png)

...并将其作为参数传递给函数，该函数将生成一个局部变量：

![调用方法创建局部变量](../Images/65e73b7f6e9538d66307670c5e12815d.png)

但是，不是使用`+`生成新列表的连接运算符，而是将该`append()`方法应用于现有列表。该`append()`方法*不创建新对象*；相反，它_changes现有的：

![将值附加到列表](../Images/80d9df4ac38a5cafec292869339207af.png)

函数结束后，局部变量会消失，但它和 by 指向的原始对象`list1`已经改变：

![还是改了](../Images/e13821977d93179a0f584e1e70f58b36.png)

由于它仍然由 指向`list1`，因此原始列表不会被破坏。

**编辑**：如果你想看看在**你眼前**发生的所有这些事情，那就去[这个令人惊叹的模拟器](http://www.pythontutor.com/visualize.html#code=list1+=+%5B1,2,3,4%5D%0Alist2+=+%5B1,2,3,4%5D%0A%0Adef+proc%28mylist%29:%0A++++mylist+=+mylist+++%5B6%5D%0A%0Adef+proc2%28mylist%29:%0A++++mylist.append%286%29%0A%0A#+Can+you+explain+the+results+given+by+the+four+print+statements+below?%2bRemove%0A#%2bthe%2bhashes%2b#%2band%2brun%2bthe%2bcode%2bto%2bcheck.%0A%0Aprint%2b%28list1%29%0Aproc%28list1%29%0Aprint%2b%28list1%29%0A%0Aprint%2b%28list2%29%0Aproc2%28list2%29%0Aprint%2b%28list2%29&mode=display&origin=opt-frontend.js&cumulative=false&heapPrimitives=false&drawParentPointers=false&textReferences=false&showOnlyOutputs=false&py=2&rawInputLstJSON=%5B%5D&curInstr=16)：

![在此处输入图像描述](../Images/a37cb1ff2d39a974b8f8f5e90ae104c1.png)

* 如果你不知道什么是垃圾收集器......好吧，你会在理解你自己的问题后很快发现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T03:41:03.000

python中的变量总是可以被认为是引用。当您使用参数调用函数时，您传递的是对实际数据的引用。

当您使用赋值运算符 ( `=`) 时，您正在分配该名称以引用一个全新的对象。因此，`mylist = mylist + [6]`创建一个包含 mylist 的旧内容以及 6 的新列表，并分配变量 mylist 以引用新列表。list1 仍然指向旧列表，所以没有任何变化。

另一方面，当您使用 .append 时，这实际上是将一个元素附加到变量所引用的列表中 - 它没有为变量分配任何新内容。所以你的第二个函数修改了 list2 引用的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T03:37:23.017

通常，在函数的第一种情况下，`proc`如果您声明，您只能通过赋值更改全局列表

```
global mylist 
```

首先并没有`mylist`作为参数传递。但是，在这种情况下，您会收到一条`mylist`全局和本地错误消息： `name 'mylist' is local and global`。发生的事情`proc`是在分配发生时创建一个本地列表。由于局部变量在函数结束时消失，对局部列表的任何更改的影响在随后打印出来时不会传播到程序的其余部分。

但是在第二个函数中`proc2`，您通过附加而不是分配来*修改*`global`列表，因此不需要关键字并且对列表的更改会显示在其他地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T11:35:13.930

除了已经给出的全面答案外，还值得一提的是，如果您想要与以下相同的语法：

```
mylist = mylist + [6] 
```

...但仍希望“就地”更新列表，您可以执行以下操作：

```
mylist += [6] 
```

哪个，虽然它看起来和第一个版本做同样的事情，但*实际上*是一样的：

```
mylist.extend([6]) 
```

（请注意，它`extend`获取一个可迭代对象的内容并一个接一个地添加它们，而`append`获取它给出的任何内容并将其添加为单个项目。请参阅[附加与扩展](https://stackoverflow.com/questions/252703/python-append-vs-extend)以获得完整的解释。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T04:23:26.630

以一种或另一种形式，这是一个非常普遍的问题。[几天前](https://stackoverflow.com/questions/10694608/how-does-calling-work-in-python/10694799#10694799)，我在解释传递给自己的 Python 参数时遇到了麻烦。基本上，其中一个创建一个新列表，另一个修改现有列表。在后一种情况下，所有引用列表的变量都“看到”了变化，因为它仍然是同一个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T08:00:53.470

在第三行，你这样做了

```
list1=list1+[6] 
```

因此，当您在上述行之后执行以下操作时，

```
print (list1) 
```

它打印了您在开始时创建的 list1 和添加 list1 + [6] 的 proc 过程，它正在函数 proc 内创建一个新列表。当您追加 [6] 时，您不是在创建新列表，而是将列表项追加到现有列表中。

但是，请记住。在第 7 行，您再次创建了列表

```
list1 = [1,2,3,4] 
```

现在您想通过显式调用来打印 list1，这将打印出您再次重新初始化的 list1，但不会打印前一个。

# objective-c - 升级到 ARC 后摆脱错误警告

> ID：10748164
> 
> 赞同：2
> 
> 时间：2012-05-25T03:35:33.473
> 
> 标签：objective-c, xcode4.3

升级到 ARC 后，收到一堆错误警告

那些是：

**将保留对象分配给不安全的属性；分配后对象将被释放**

发生了什么是对象使用默认属性，并且我们知道 ARC 中的默认值是保留

**未指定“assign”、“retain”或“copy”属性 - 假定为“assign”**

如果没有分配保留或复制默认是保留会发生什么

看起来这是 Xcode4.3 中的一个错误，根本没有考虑到更改。

我只是想摆脱警告，以免弄乱我的程序，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:14:42.320

从 LLVM 3.1 开始，所有权是隐式的`strong`（如[LLVM ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.spelling.property)中所述）。因此，在 Xcode 的下一个版本中，错误消息应该会消失。我现在会添加`strong`修饰符（这样属性不会获得`assign`所有权），稍后当 Xcode 包含 LLVM 3.1 时将其删除。

# javascript - ext js 手风琴中心

> ID：10748174
> 
> 赞同：1
> 
> 时间：2012-05-25T03:36:50.940
> 
> 标签：javascript, extjs

我的网络应用程序位于：

[http://www.myethiopia.org/QuickLinks/main2.html](http://www.myethiopia.org/QuickLinks/main2.html)

我有两个问题：

*   我无法在 IE 中打开它。它适用于火狐。

*   我的另一个问题是我想在中心的手风琴中显示链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:29:08.597

IE 希望一切都完美:)

**解决方案：** 删除文件第 35 行末尾的逗号

```
['American Express Company',            52.55, 0.01,  0.02,  '9/1 12:00am'], 
```

至

```
['American Express Company',            52.55, 0.01,  0.02,  '9/1 12:00am'] 
```

提示：如果您开始使用 ext-js 开发应用程序，请使用 ext-all-debug-w-comments.js 而不是 bootstrap.js 或在 bootstrap.js 中指定该文件

# javascript - 选择 Box 更改时显示 div

> ID：10748178
> 
> 赞同：0
> 
> 时间：2012-05-25T03:37:36.073
> 
> 标签：javascript

I have a select box that directs users to another page when an item is selected. 当用户选择一个项目时，我想显示某种 loading.gif，这样他们就知道发生了什么事。有人可以告诉我如何做到这一点吗？

```
 <!DOCTYPE html>
<html lang="en">
    <head>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$("sRedirect").change(function(){
   $("#sRedirect :selected").not(:contains('Click Here To Select')).siblings("img").first().attr('src','loading.gif');
});

</script>

 </head>
<body>

        <div class="titleBar">
            <div class="Logo"><a class ="backBtn" href="javascript:history.back();">    </a><img src="logotop.png"  align="right" />
                    </div>

<br><br>
    <div class="top"><br><br><h2>Step 1<br><br>Choose an Area</h2><br><br>    <div>
    <div class="middle">

<form name=form1>

<select name="URL" id="sRedirect" onchange="window.location.href=this.form.URL.options[this.form.URL.selectedIndex].value"    onfocus="javascript:toggle();" >
    <option value="" disabled="disabled" selected="selected">Click Here To Select</option>
    <?=$options?>
    </SELECT>
<br>
<img src="" id="myLoadingPicture"/>
</form>

    </div>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:42:54.387

当您开始转到另一个页面（更具体地说，开始卸载页面）时，该页面不再需要响应。因此，即使您添加了动画 GIF（一个简单的任务，只需创建一个图像元素并将其附加到正文），也不能保证它会动画，甚至显示出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:43:02.553

只需在设置 location.href 之前显示图像。

```
<select name="URL" onchange="$('#myLoadingPicture').show(); window.location.href=this.form.URL.options[this.form.URL.selectedIndex].value"    onfocus="javascript:toggle();" > 
```

# r - 向ggplot添加水平线

> ID：10748180
> 
> 赞同：4
> 
> 时间：2012-05-25T03:37:57.787
> 
> 标签：r, graphics, ggplot2

我想使用 ggplot2 在一个图中绘制多条不同颜色的线，然后添加一条单独的水平线。我的代码如下。它运行良好，直到我运行最后一行`p + geom_hline(yintercept=400)`。所有线条变为黑色，右侧的图例消失。

有谁知道如何解决这个问题？

```
library(ggplot2)
mry <- do.call(rbind, by(movies, round(movies$rating), function(df) { 
       nums <- tapply(df$length, df$year, length) 
        data.frame(rating=round(df$rating[1]), year = as.numeric(names(nums)), 
        number=as.vector(nums)) 
        }))
p<-qplot(year, number, data=mry, group=rating, geom="line",xlab = 'year',
     ylab = 'number')

p + geom_line()

p + geom_line(aes(colour = rating))

p + geom_hline(yintercept=400) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T03:44:43.217

您没有保存中间步骤。每个情节都只是在`p`. 如果要保留刚刚添加的部分，则需要执行以下操作：

```
p <- p + geom_line(aes(colour = rating)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:58:33.490

上述问题的具体解决方案可能是简单地将最后一行代码 , 移动`p + geom_hline(yintercept=400)`到倒数第二行的一部分。

这将使您的最后一行代码看起来像这样，`p + geom_line(aes(colour = rating)) + geom_hline(yintercept=400)`. 您还可以将最后三行合并到`p + geom_line(aes(colour = rating)) + geom_hline(yintercept=400)`.

基本上重申了 joran 的建议，但我试图让它更具体。

# spring - 问题将 spring-data-neo4j 独立 spring 项目连接在一起

> ID：10748181
> 
> 赞同：6
> 
> 时间：2012-05-25T03:37:57.913
> 
> 标签：spring, neo4j, autowired, spring-data-neo4j

我正在尝试使用 spring 创建一个沙箱来处理依赖注入。我的沙箱是几个域类，还有一个`MainClass`，其中有一个`main(String[] args)`方法。

在注释 my `TestClass`with 时`@Component`，它只包含

```
@Autowired
private Neo4jTemplate neo4jTemplate; 
```

在里面。

在我的`main`方法中，我调用`ClassPathXmlApplicationContext`了我的`applicationContext.xml`文件，该文件由以下部分组成：

```
<context:annotation-config/>
<context:spring-configured/>
<context:component-scan base-package="org.neuralsandbox"/>

<neo4j:config storeDirectory="data/sandbox.db"/> 
```

但是我的程序无法在此处执行我声明 my 的行`ClassPathXmlApplicationContext`，并带有大量堆栈跟踪，我将打印第一个和最后一个 throwable。

第一的：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'testClass': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private org.springframework.data.neo4j.support.Neo4jTemplate org.neuralsandbox.TestClass.neo4jTemplate; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jTemplate' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.data.neo4j.support.Neo4jTemplate org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$a3874640.neo4jTemplate() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingInfrastructure' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.data.neo4j.support.MappingInfrastructure org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$a3874640.mappingInfrastructure() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jTransactionManager' defined in class org.springframework.data.neo4j.config.Neo4jConfiguration: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public final org.springframework.transaction.PlatformTransactionManager org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$a3874640.neo4jTransactionManager()] threw exception; nested exception is java.lang.NoSuchMethodError: org.neo4j.kernel.impl.transaction.UserTransactionImpl.<init>(Lorg/neo4j/graphdb/GraphDatabaseService;)V
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1073)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:516)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:455)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at org.neuralsandbox.MainClass.main(MainClass.java:8) 
```

最后的：

```
Caused by: java.lang.NoSuchMethodError: org.neo4j.kernel.impl.transaction.UserTransactionImpl.<init>(Lorg/neo4j/graphdb/GraphDatabaseService;)V
    at org.springframework.data.neo4j.config.Neo4jConfiguration.createJtaTransactionManager(Neo4jConfiguration.java:240)
    at org.springframework.data.neo4j.config.Neo4jConfiguration.neo4jTransactionManager(Neo4jConfiguration.java:232)
    at org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$a3874640.CGLIB$neo4jTransactionManager$21(<generated>)
    at org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$a3874640$$FastClassByCGLIB$$ed4fda1e.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)
    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:210)
    at org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$a3874640.neo4jTransactionManager(<generated>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:145)
    ... 72 more 
```

我正在使用 neo4j 1.7 和 spring-data-neo4j 2.0.0.RELEASE，以及 spring 3.1.0.RELEASE。

我没有找到一个很好的理由，使用 spring-data-neo4j 提供的教程，为什么它会抛出这个异常。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T21:20:22.477

我发现这是我使用的 spring-data-neo4j 和 neo4j 混合的问题。

在 spring-data-neo4j 2.0.1.RELEASE 中，`Neo4jConfiguration`正在尝试使用`SpringTransactionManager`并`UserTransactionImpl`接受一个`AbstractGraphDatabase`类，而在 neo4j 1.7`SpringTransactionManager`中不接受它，而在 neo4j 1.8.M01 中，`UserTransactionImpl`不接受它。

所以现在的解决方案是使用 neo4j 1.6.2 和 spring-data-neo4j 2.0.1.RELEASE。

# full-text-search - Locayta 索引器更新

> ID：10748182
> 
> 赞同：0
> 
> 时间：2012-05-25T03:38:14.340
> 
> 标签：full-text-search

我在我的一个项目中使用 Locayta 进行全文搜索，我需要搜索的实体具有文本内容和标签，查看 LocNotes 代码，看起来每次实体的任何方面发生变化时，我都需要更新它Locayta Indexer，所以如果文本内容是 100KB 并且我只修改了标签，即使它没有更改，它仍然会重新索引 100KB 文本内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:14:35.920

我是 Locayta 的开发人员之一；你的假设是正确的。Locayta Search 将每个文档视为一个实体，因此如果文档的任何方面已更新，则必须重新发送完整文档。

将来，如果有足够的需求，我们可能会添加单独更新为文档存储的布尔值的功能，但由于 Locayta Search 如何存储每个文档的各个方面，围绕此类更新可能会有很多附带条件单独记录。更新文档的最可靠方法始终是每次发送整个文档数据。

# javascript - InfoWindow - 谷歌地图 API

> ID：10748183
> 
> 赞同：-1
> 
> 时间：2012-05-25T03:38:17.837
> 
> 标签：javascript, google-maps

我尝试为我的所有标记添加信息窗口。但是我只为最后一个标记添加了一个 InfoWindow。你能帮助我吗？

```
for (i = 0; i < events.length; i++) {
    var contentString = '<div id="content">'+i+'bla-bla-bla</div>';
    var infowindow = new google.maps.InfoWindow({
       content: contentString
    });
    var newMarker = new google.maps.Marker({
       position: new google.maps.LatLng(events[i][1], events[i][2]),
       map: map,
       title: events[i][0]
     });
     newMarker.categorysassasas = 2;
     newMarker.category = events[i][3];
     markers.push(newMarker);
     google.maps.event.addListener(newMarker, 'click', function() {
        infowindow.open(map,newMarker);
     });
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T15:07:11.767

在此 stackoverflow 中找到了与您的问题类似的解决方案：[Trying to bind multiple InfoWindows to multiple Markers on a Google Map and failed](https://stackoverflow.com/questions/2357323/trying-to-bind-multiple-infowindows-to-multiple-markers-on-a-google-map-and-fail)

基本上，您所要做的就是将您的 addlistener 函数包装在另一个函数中，为您的标记变量创建一个闭包 - 以便它绑定到信息窗口。在你的情况下，我相信你必须在你的 init() 之外添加 listenMarker 函数，并为标记和信息窗口传递变量，就像这样..

```
function listenMarker (marker, info)
{
  // so marker is associated with the closure created for the listenMarker function call
  google.maps.event.addListener(marker, 'click', function() {
    info.open(map, marker);
  });
} 
```

然后在调用 addlistener 事件的 for 循环中，将其替换为：

```
listenMarker(newMarker, infowindow); 
```

这应该够了吧。

# c#-4.0 - 如何在 .net framework 4.0 中删除数据集中的前 N 行？

> ID：10748184
> 
> 赞同：0
> 
> 时间：2012-05-25T03:38:47.197
> 
> 标签：c#-4.0, dataset

我需要在我的应用程序中删除数据集中的前四行。有没有办法在文件后面的代码中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:12:27.227

```
dt.Rows.Cast<System.Data.DataRow>().Take(n).Delete(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T05:54:14.243

```
mydatatable = mydataset.Tables[0].Rows
                  .Cast<System.Data.DataRow>()
                  .OrderBy(x => x["Numbers"]).Skip(1).CopyToDataTable(); 
```

skip() function will skip that row and copy remaining rows to target datatable , so we can use it as delete

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T12:35:25.353

假设您的 DataSet 被声明为“ds”：

```
int x = 0;
int n = 4;//n being your number of rows to delete
            do
            {
                ds.Tables[0].Rows[x].Delete();
                x++;
            } while (x < n); 
```

编辑：更新了我的逻辑中的“错误”......>。<我说的是x = n，它不会删除数据集中的前四行。

# python - Python中变量前面的加号有什么作用？

> ID：10748185
> 
> 赞同：17
> 
> 时间：2012-05-25T03:38:49.540
> 
> 标签：python, decimal, unary-operator

在我必须维护的项目中有以下 Python 代码：

```
# If the `factor` decimal is given, compute new price and a delta
factor = +factor.quantize(TWOPLACES)
new_price = +Decimal(old_price * factor).quantize(TWOPLACES)
delta = new_price - old_price 
```

这里的问题是`+`前面一个变量的目的。

Python 文档[称其](http://docs.python.org/reference/expressions.html#unary-arithmetic-and-bitwise-operations)为*一元加运算符*，“其数值参数不变”。那么它可以安全地删除吗？

（顺便说一句，代码是我前段时间编写的，希望我已经吸取了教训——如果存在测试，或者如果在评论中澄清了对小数使用一元加号，这将不是问题。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-25T03:46:58.940

该加号的作用取决于该表达式的结果（`__pos__()`调用该对象的方法）定义的作用。在这种情况下，它是一个`Decimal`对象，一元加号相当于调用`plus()`方法。基本上，它用于在不更改数字符号的情况下应用当前上下文（精度、舍入等）。在其他地方查找`setcontext()`或`localcontext()`调用以查看上下文是什么。有关详细信息，[请参阅此处](http://docs.python.org/library/decimal.html#context-objects)。

一元加号并不经常使用，因此这种用法不熟悉也就不足为奇了。我认为该`decimal`模块是唯一使用它的标准模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T19:41:57.813

当我错误地认为 Python 必须支持 C 增量 (++) 运算符时，我遇到了同样的问题；它没有！相反，它两次应用加号运算符 (+)！我很快就知道了，两次什么都不做。然而，因为“++n”看起来有效......没有被标记为语法错误......我为自己创造了一个可怕的错误。

所以除非你重新定义它的作用，否则一元 + 实际上什么都不做。一元 - 从正数变为负数，反之亦然，这就是为什么“--n”也没有被标记为语法错误但它也什么都不做的原因。

# c# - Silverlight 中的 ListBox 不会触发拖动事件

> ID：10748186
> 
> 赞同：0
> 
> 时间：2012-05-25T03:39:03.860
> 
> 标签：c#, .net, silverlight-toolkit, silverlight-5.0

希望这是一个简单的问题。我正在使用`ListBoxDragDropTarget`Silverlight Toolkit 中的 来设置从一个拖放`ListBox`到另一个。我似乎无法触发该事件。这是我的 XAML 代码：

```
<toolkit:ListBoxDragDropTarget HorizontalAlignment="Left"
                               HorizontalContentAlignment="Stretch"
                               VerticalAlignment="Top"
                               VerticalContentAlignment="Stretch"
                               Margin="39,117,0,0"
                               Grid.Row="1"
                               AllowDrop='True'>
  <ListBox x:Name='columnHeadings'
           MinHeight='100'
           MinWidth='100'>
  </ListBox>
</toolkit:ListBoxDragDropTarget>

<toolkit:ListBoxDragDropTarget AllowDrop='True'
                               Grid.Column='1'
                               Grid.Row='1'
                               HorizontalContentAlignment="Stretch"
                               VerticalContentAlignment="Stretch"
                               VerticalAlignment="Center"
                               HorizontalAlignment="Left">
  <ListBox x:Name='customerFields'
           Grid.Column='1'
           Grid.Row='1'
           Visibility='Collapsed'
           Drop='CustomerFieldsDrop'>
  </ListBox>
</toolkit:ListBoxDragDropTarget> 
```

这是我在后台代码中的事件处理程序：

```
private void CustomerFieldsDrop(object sender, DragEventArgs e)
{
  MessageBox.Show(string.Format("Something was dropped!"));
} 
```

正如你所看到的，我的目标是一些非常简单的东西。我尝试将事件处理程序分配给列表框的父`ListBoxDragDropTarget`级`customerFields`；具有讽刺意味的是，这奏效了。

我在这里的目的是允许用户导入一个文本文件并在一个列表框中获取文件列标题的列表，然后将它们“连接”到第二个列表框中列出的数据字段。因此，没有列表重新排序或将项目从一个列表移动到另一个列表。

`columnHeadings.ItemsSource`属性是一个`string[]`对象。`customerFields.ItemsSource`属性是一个`IEnumerable<string>`对象。

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:50:16.290

我认为 AllowDrop="True" 和 Drop="EventName" 属性需要在同一个元素中才能工作。您可能必须在 ListBox 本身中将 AllowDrop 属性设置为“True”：

```
<ListBox x:Name="customerFields" 
    Grid.Column="1" 
    Grid.Row="1" 
    Visibility="Collapsed"
    Drop="CustomerFieldsDrop"
    AllowDrop="True" 
</ListBox> 
```

或者将 Drop="CustomerFieldsDrop" 属性添加到 ListBoxDragDropTarget 标记：

```
<toolkit:ListBoxDragDropTarget AllowDrop='True'   
    Grid.Column='1'   
    Grid.Row='1'   
    HorizontalContentAlignment="Stretch"   
    VerticalContentAlignment="Stretch"   
    VerticalAlignment="Center"   
    HorizontalAlignment="Left"
    Drop="CustomerFieldsDrop"> 
```

任何一个都应该工作......

# kinect - 如何使用 PCL 过滤来自 kinect 的点云数据

> ID：10748194
> 
> 赞同：0
> 
> 时间：2012-05-25T03:41:03.067
> 
> 标签：kinect, point-cloud-library

我现在正在使用 PCL 和 kinect，回调函数如下图所示：

我想做一些过滤，但是我不能直接在回调函数中访问“cloud”，因为它是常量类型，所以我把它复制到“cloud2”看看它是否有效。

结果是编译通过但运行时错误，有人帮助我吗？

```
class SimpleOpenNIProcessor
{
public:
    pcl::PointCloud<pcl::PointXYZ>::Ptr cloud2;
     SimpleOpenNIProcessor () : viewer ("PCL OpenNI Viewer") {}
     void cloud_cb_ (const pcl::PointCloud<pcl::PointXYZ>::ConstPtr &cloud)
  {

    *(cloud2)=*(cloud);
     if (!viewer.wasStopped())
         viewer.showCloud (cloud);

  }

  void run ()
  {

    // create a new grabber for OpenNI devices
    pcl::Grabber* interface = new pcl::OpenNIGrabber();

    // make callback function from member function
    boost::function<void (const pcl::PointCloud<pcl::PointXYZ>::ConstPtr&)> f =
      boost::bind (&SimpleOpenNIProcessor::cloud_cb_, this, _1);

    // connect callback function for desired signal. In this case its a point cloud with color values
    boost::signals2::connection c = interface->registerCallback (f);

    // start receiving point clouds
    interface->start ();

    // wait until user quits program with Ctrl-C, but no busy-waiting -> sleep (1);
    while (true)
      sleep(1);

    // stop the grabber
    interface->stop ();
  }
      pcl::visualization::CloudViewer viewer;

};

int main ()
{

  SimpleOpenNIProcessor v;
  v.run ();
  return (0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T20:08:51.067

> ```
> pcl::PointCloud<pcl::PointXYZ>::Ptr cloud2; 
> ```

这仅定义`cloud2`，您还需要在堆上创建它，否则您将获得错误的内存访问（作为它的指针）。

```
pcl::PointCloud<pcl::PointXYZ>::Ptr cloud2( new pcl::PointCloud<pcl::PointXYZ>()); 
```

你也不应该这样做

> ```
> *cloud2 = *cloud; 
> ```

这不是您应该使用的一种干净的复制方式。

```
pcl::copyPointCloud<PointT, PointT>(*cloud, *cloud2); 
```

（我上面的答案也适用，你应该两者都做！）

# objective-c - 多文档中的单例

> ID：10748199
> 
> 赞同：-1
> 
> 时间：2012-05-25T03:41:38.710
> 
> 标签：objective-c, xcode, macos, cocoa, singleton

我曾经像这样使用单例：

```
///.h
@interface ASMyController:NSViewController
+(id)myViewController;
@end
////.m
static ASMyController* singleton = nil;
@implementation ASMyController
+(id)myViewController
{
    if(nil == singleton)
    {
        singleton = [[[self class] alloc] init];
    }
    return singleton;
}
-(id)init
{
    self = [super initWithNibName:@"test" bundle:xxxx];
    if(self)
    {
        ..............................
    }
    return self;
}
@end 
```

单例在非基于文档的应用程序中运行良好。但是，在基于文档的应用程序中，应用程序的每个实例共享相同的静态变量。在我的第一个设计中，单例并且仅在一个应用程序实例中而不是所有应用程序实例中。

那么这是否意味着我应该重新考虑设计？或者我可以将单例制作成字典。我可以使用 key 来获取当前实例的单例吗？或者对我有什么好主意？

我祈祷我蹩脚的英语不会给你带来麻烦。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:09:17.617

您的方法的名称`my...`, 暗示了一些相当基本的东西被误解了 -*每个人都*只有一个单例，对象不拥有自己的单例副本。

单例不是避免变量的方法，看起来您可能正在尝试使用`[ASMyController myViewController]`实例变量`self->myViewController`（通常缩写为`myViewController`）或属性`self.myViewController`。

您可能需要查看以下内容：

```
@interface ASMyDocument : NSDocument
{
   ASMyContoller *myViewController;
} 
```

但是，您的原始设计表明您应该真正审查类、实例、单例、has-a、is-a 等之间的关系/含义。

# http - 具有多个参数的 RestKit 身份验证

> ID：10748200
> 
> 赞同：0
> 
> 时间：2012-05-25T03:41:41.527
> 
> 标签：http, login, restkit

我无法使用 PHP 堆栈上的 REST API 进行身份验证。允许登录在浏览器上工作的查询字符串看起来像[http://foo.com/gamer/index.php?module=Login&action=myLogin](http://foo.com/gamer/index.php?module=Login&action=myLogin) ...我遵循了 RestKit 上的所有可用文档并想出了以下代码，除了启用 NSLogConfigure 之外，它的输出跟在代码后面。代码

```
- (void)sendHTTPAuthRequestWithParams {
NSMutableDictionary* authParams = [[NSMutableDictionary alloc] init];
NSMutableDictionary* moreParams = [[NSMutableDictionary alloc] init];

//user and password params
[authParams setObject:usernameTextField.text forKey:@"login"];
[authParams setObject:passwordTextField.text forKey:@"password"];

//more parameters for rest login api
[moreParams setObject:@"Login" forKey:@"module"];
[moreParams setObject:@"mylogin" forKey:@"action"];
[moreParams setObject:authParams forKey:@"params"];

//parsing
id<RKParser> parser = [[RKParserRegistry sharedRegistry] parserForMIMEType:RKMIMETypeJSON];
NSError *error = nil;
NSString *json = [parser stringFromObject:moreParams error:&error];

[RKClient sharedClient].authenticationType = RKRequestAuthenticationTypeHTTP;

//if no error
if(!error) {        
    RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);
    [[RKClient sharedClient] post:@"/index.php?" params:[RKRequestSerialization serializationWithData:[json dataUsingEncoding:NSUTF8StringEncoding] MIMEType:RKMIMETypeJSON] delegate:self];  
    RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);
}    
//[[RKClient sharedClient] post:@"/index.php?module=Login&action=mylogin" params:authParams delegate:self];   } 
```

RKLogConfigureByName() 输出

```
 2012-05-24 19:59:09.513 GiantsGamer[57045:207] D restkit.network:RKRequest.m:435 Sending asynchronous POST request to URL http://www.foo.com/gamer/index.php. 
2012-05-24 19:59:09.514 GiantsGamer[57045:207] T restkit.network:RKRequest.m:381 Prepared POST URLRequest '<NSMutableURLRequest http://localhost/gamer/index.php>'. HTTP Headers: {
"Content-Length" = 85; "Content-Type" = "application/json";}. HTTP Body: {"module":"Login","action":"mylogin","params":{"login":"admin","password":"admin"}}. 2012-05-24 19:59:09.736 GiantsGamer[57045:207] D restkit.network:RKResponse.m:195 NSHTTPURLResponse Status Code: 200 2012-05-24 19:59:09.737 GiantsGamer[57045:207] D restkit.network:RKResponse.m:196 Headers: {"Cache-Control" = "no-store, must-revalidate";
    Connection = "Keep-Alive";
    "Content-Length" = 2745;
    "Content-Type" = "text/html; charset=utf-8";
    Date = "Fri, 25 May 2012 02:59:09 GMT";
    Expires = "";
    "Keep-Alive" = "timeout=5, max=100";
    Pragma = "";
    Server = "Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.8";
    "Set-Cookie" = "PIWIK_SESSID=a065dba239819175689b1e2a23021d01; path=/; HttpOnly";
    "X-Frame-Options" = sameorigin;
    "X-Powered-By" = "PHP/5.3.8";
}
2012-05-24 19:59:09.737 GiantsGamer[57045:207] T restkit.network:RKResponse.m:203 Read response body: <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>…
</head>
<body>...
</body>
</html> 
```

从日志中可以看出，查询字符串（认证参数）包含在 HTTP 正文中。可以吗？此外，我确实得到了 http 响应状态代码 200（OK），但随后我在 index.html 处看到了网页生成的整个 HTML 代码。不知道我哪里出错了？如何破译 RestKit 响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:42:26.747

您的代码不起作用，因为您将模块和操作作为 POST 值而不是 GET 发送。您可能会收到相同的 html 代码，就好像您会在没有参数的情况下向 index.php 发出请求一样。如果您愿意，您可以尝试您的代码并捕获整个 HTML 响应，并将其与网络上的 index.php HTML 响应进行比较，无需参数，我敢打赌它们是相同的。

我没有测试过这段代码，但试一试：

```
- (void)sendHTTPAuthRequestWithParams {

    NSString *loginPath = [NSString stringWithFormat:@"index.php?module=%@&action=%@",@"Login",@"myModule"];

    NSMutableDictionary* authParams = [[NSMutableDictionary alloc] init];
    [authParams setObject:usernameTextField.text forKey:@"login"];
    [authParams setObject:passwordTextField.text forKey:@"password"];

    [[RKClient sharedClient] post:loginPath usingBlock:^(RKRequest *request) {
        request.authenticationType = RKRequestAuthenticationTypeHTTP;
        request.method = RKRequestMethodPOST;
        request.params = authParams;
        request.delegate = self;
        request.onDidLoadResponse = ^(RKResponse *response){
            if (response.statusCode > 299) {
                //We got an error!
            }else {
                //Check Response Body to get Data!
            }
        };

    }];
} 
```

在响应正文中，您将获得一个 NSData，如果您希望响应中有一个 json，您可以使用以下命令将其转换为 NSDictionary：[NSData to NSDictionary from JSON](https://stackoverflow.com/questions/3524602/how-to-convert-php-return-nsdata-into-nsdictionary/10777245#10777245)

RK 的主要缺点是它缺乏好的文档，这里有一些你可以了解一些基础知识的东西：

您可以看到另一种更高级的方式，使用 RKObjectMapping 和 RestKit 做您想做的事情：使用 RKParams[向 API 发布帖子，并使用 RestKit 使用 RKObjectMapping 映射响应](https://stackoverflow.com/questions/10760333/making-a-post-to-api-with-rkparams-and-mapping-the-response-with-rkobjectmapping/)。

最后，您还可以检查此代码，它描述了如何[使用 RESTKit 执行简单的 json POST](https://stackoverflow.com/questions/9102262/do-a-simple-json-post-using-restkit)

你也可以在 twitter 上询问 RestKit 的开发者。这对我很有用，他们回答得非常快！

# mysql - MYSQL 将行复制到另一个具有 AUTO_INCREMENT id 字段的相同表

> ID：10748201
> 
> 赞同：1
> 
> 时间：2012-05-25T03:41:58.340
> 
> 标签：mysql, sql, primary-key, row, auto-increment

我有一个电影数据库，其中电影被插入到一个名为titles 的表中，其中一个名为titles_id 的AUTO_INCREMENT 主键。用户可以匿名提交电影，这些电影被插入到名为titles_anon 的单独相同表中。在查看titles_anon 中的条目后，我想将它们插入到标题中，但 id 列导致问题

我试过这个：

> 插入标题选择 * FROMtitles_anon WHERE title_id='$title_id';

我要么收到重复键错误，要么如果 title_id 不存在于标题中，它会插入 OK，但使用 title_anon id 而不是我想要的新 AUTO_INCREMENT 值。

当两个表都有 AUTO_INCREMENT 主键时，如何在表之间复制一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:47:11.727

```
INSERT INTO titles 
(column_name1, column_name2, column_name3, column_name4,...)
SELECT title_id, col2, col3, col4,..
FROM titles_anon
WHERE title_id = '$title_id'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T14:34:48.873

> /* 复制带有主键的表到另一个表 */
> 
> $table_old='colaboradores'; // 你的表是旧的
> 
> $table_new='colaboradores2'; //你的新表
> 
> // sql 所有没有主键的列 (column_key <> 'pri'
> 
> $rs=mysql_query("从 INFORMATION_SCHEMA.COLUMNS 中选择 column_name 其中 table_name = '$table_old' and column_key <> 'pri' AND table_schema = '你的数据库'");
> 
> // 获取所有列
> 
> $rows = mysql_fetch_assoc($rs);
> 
> $fields = '';
> 
> // 在行中挂载字段
> foreach ($rows as $k => $v) {
> $fields .= ",$v[0]";
> }
> 
> // 删除第一个逗号
> $fields = substr($fields,1);
> 
> echo "在 Mysql 中创建表的 Sintaxe";
> echo "CREATE TABLE $table_new SELECT $fields FROM $table_old";
> echo "Sintaxe for Insert 从旧表到新表 Mysql";
> echo "INSERT INTO $table_new $fields SELECT $fields FROM $table_old";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T14:35:43.220

在 PHP 中，您可以执行以下操作：

```
$rs = mysql_query("select * from table_orig where RowID=$IDToCopy",$db_conn);
 $row = mysql_fetch_assoc($rs);
 $sql = '';
 $fields = '';
 foreach($row as $k => $v){
  if($k == "RowID") continue;
  $sql .= ",'$v'";
  $fields .= ",$k";
 }
 $sql = "insert into table_copy (".substr($fields,1).") values (".substr($sql,1).")";
 mysql_query($sql,$db_conn); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T03:46:39.987

您可以完全省略该`id`列，让mysql为您生成它。这需要更长的 SQL 来指定要插入的确切列。

```
INSERT INTO titles (columns-other-than-the-primary-key) 
    SELECT columns-of-the-same-order FROM titles_anon 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T03:47:48.707

您在 SELECT 中定义字段，但省略 PK 并将相同的字段添加到 INSERT！

# cocoa-touch - 转换为 ARC 后 main.m 中的 EXC_BAD_ACCESS

> ID：10748202
> 
> 赞同：1
> 
> 时间：2012-05-25T03:42:14.610
> 
> 标签：cocoa-touch, debugging, automatic-ref-counting

我有一个简单的 UITableView 应用程序，我刚刚转换为 ARC。转换应该很顺利，应用程序现在启动，但是如果我导航到 DetailView，然后尝试跳回 RootView，我会`BAD_EXC_ACCESS`在 main.m 中收到错误，然后崩溃。我尝试打开 Zombie 对象，这停止了崩溃，但我也没有在控制台中得到任何东西告诉我发生了什么。我关闭了 ARC，再次没有崩溃，但也没有更多关于导致它的原因的信息。

任何关于如何调试它的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:53:47.443

BAD_EXC_ACCESS 有点棘手，主要是因为它们不会出现在导致错误的违规行。使用 lldb，您可以`thread backtrace`了解导致它的原因。 [这个答案](https://stackoverflow.com/a/10770681/937822)包含一个很好的答案，其中包含一些关于如何解决类似问题的想法。

# php - 花费大量时间创建 PDF 报告

> ID：10748203
> 
> 赞同：0
> 
> 时间：2012-05-25T03:42:31.867
> 
> 标签：php, tcpdf

我一直在使用 tcpdf 将我的数据导出到 pdf ，第一次我得到一个错误，说分配的内存不够，然后我增加了内存大小使用`ini_set()`. 现在生成PDF文件大约需要5分钟，pdf文件包含19页数据。谁能建议我如何优化性能？我可以使用 PDFCreator 之类的软件并在不导出文件的情况下打印报告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T09:42:52.717

## 最佳实践

您是否查看了 TCPDF 网站上的[性能最佳实践？](https://tcpdf.org/docs/performances/)

您可以进行一些简单的优化，例如

> *   如果您不使用泰语，请编辑 config/tcpdf_config.php 文件并将 K_THAI_TOPCHARS 常量设置为 false；
> *   默认情况下，TCPDF 启用字体子集以减小嵌入的 Unicode TTF 字体的大小，这个过程非常缓慢且需要大量内存，可以使用 setFontSubsetting(false) 方法关闭；
> *   尽可能使用核心字体而不是嵌入字体；

## 分析

在 PHP中分析性能问题（这称为[Profiling ）的一种非常彻底的方法是使用](https://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)*xdebug*。它将记录您所有的函数调用及其花费的时间。然后可以可视化这些日志文件。我推荐 Webgrind 作为这个接口，[这里是如何开始的](https://code.google.com/p/webgrind/wiki/Installation)。

这是设置它并学习如何理解数据的初步努力，但它是性能优化的宝贵工具。

# android - 如何在 Android 系统范围内关闭振动器？

> ID：10748204
> 
> 赞同：2
> 
> 时间：2012-05-25T03:42:41.200
> 
> 标签：android

如何在 Android 系统范围内关闭振动器？振动器很无聊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:02:02.897

对 SO 的快速搜索给了我这个解决方案：

```
AudioManager audioManager = (AudioManager)ctx.getSystemService(Context.AUDIO_SERVICE);
audioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_RINGER, AudioManager.VIBRATE_SETTING_OFF);
audioManager.setVibrateSetting(AudioManager.VIBRATE_TYPE_NOTIFICATION, AudioManager.VIBRATE_SETTING_OFF);
System.putInt(ctx.getContentResolver(), VIBRATE_IN_SILENT, 0); 
```

[资源](https://stackoverflow.com/questions/7933470/where-is-the-setting-setvibratesettingaudiomanager-vibrate-type-notification-f)

# assembly - 为什么 gcc 会移动到同一个寄存器？

> ID：10748205
> 
> 赞同：8
> 
> 时间：2012-05-25T03:42:49.690
> 
> 标签：assembly

对于这段 C 代码：

```
uint64_t roundUp(uint64_t value, uint32_t blockSize) 
{
    return (value + blockSize - 1) & ~(blockSize - 1);
} 
```

gcc 4.6 -O3 生成以下程序集：

```
roundUp(unsigned long, unsigned int):
.LFB0:
    .cfi_startproc
    movl    %esi, %edx
    movl    %esi, %esi
    leaq    -1(%rdi,%rsi), %rax
    negl    %edx
    andl    %edx, %eax
    ret
    .cfi_endproc 
```

谁能告诉我为什么要这样做？

```
movl    %esi, %esi 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-25T03:51:51.013

这将清除高 32 位。在 x86-64 中写入 32 位寄存器时，高 32 位会自动清除。由于`esi`包含一个 32 位的参数，高 32 位可以包含任何值，所以需要清除它们`rsi`才能使用。

# android - adb shell ping 主机不起作用

> ID：10748211
> 
> 赞同：6
> 
> 时间：2012-05-25T03:43:39.613
> 
> 标签：android, android-ndk, android-ndk-r7

现在，我想检查android设备是否可以通过网络连接到另一台设备。我可以使用浏览器登录互联网。但是当我使用`adb shell`连接android模拟器并使用`ping`命令连接主机时，它失败了。

```
 kaiwii@ubuntu:~$ adb shell ping 192.168.145.136 PING 192.168.145.136 (192.168.145.136) 56(84) bytes of data. ^C 
```

（192.168.145.136是主机的ip！）

但是当我 ping 127.0.0.1 时，它可以工作。所以，我确信该设备支持 ping 命令。我只是很困惑为什么它不能在我可以在浏览器中登录互联网时 ping 主机。更重要的是，任何人都可以展示任何其他方法来检查android中的网络能力？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-04T15:04:40.790

adb shell ping -c1 www.google.com

如果设备有互联网，将返回以下响应

```
 PING www.google.com (xx.xx.xx.xx) 56(84) bytes of data.
64 bytes from (xx.xx.xx.xx): icmp_seq=1 ttl=61 time=25.3 ms

--- www.google.com ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 25.332/25.332/25.332/0.000 ms 
```

要不然

```
ping: unknown host www.google.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T14:08:44.283

您使用手机的数据连接而不是通过主机的 USB 连接到互联网。因此，您的设备和主机之间没有网络连接。此外，由于您的主机没有公共 IP 地址（它位于多级 NAT 的后面，从 IP 中可以看出至少一级），因此设备不可能通过公共互联网 ping 您的主机。

至于检查网络连接，您可以尝试以下方法：

*   `ping www.google.com`

输出：

```
 / $ ping -c1 www.google.com
 PING www.google.com (74.125.236.51) 56(84) bytes of data.
 64 bytes from www.google.com (74.125.236.51): icmp_seq=1 ttl=55 time=40.8 ms
 64 bytes from www.google.com (74.125.236.51): icmp_seq=2 ttl=55 time=47.1 ms
 --- www.google.com ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1001ms
rtt min/avg/max/mdev = 40.850/43.999/47.148/3.149 ms 
```

*   检查网络连接：`busybox ifconfig -a`

输出（剪掉一点）：

```
eth0      Link encap:Ethernet  HWaddr 5C:4C:A9:FC:B0:C0 
          inet addr:192.168.2.3  Bcast:192.168.2.255  Mask:255.255.255.0
          inet6 addr: fe80::5e4c:a9ff:fefc:b0c0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:359 errors:0 dropped:0 overruns:0 frame:0
          TX packets:275 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:87543 (85.4 KiB)  TX bytes:48382 (47.2 KiB)

lo        Link encap:Local Loopback 
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:620 errors:0 dropped:0 overruns:0 frame:0
          TX packets:620 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:74037 (72.3 KiB)  TX bytes:74037 (72.3 KiB)

rmnet0    Link encap:Ethernet  HWaddr 9E:43:B5:97:81:B1 
          inet addr:106.197.224.94  Bcast:106.197.224.95  Mask:255.255.255.252
          BROADCAST MULTICAST  MTU:2000  Metric:1
          RX packets:54337 errors:0 dropped:0 overruns:0 frame:0
          TX packets:59160 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:32720935 (31.2 MiB)  TX bytes:8334589 (7.9 MiB)
<snipped value="rmnet1,rmnet2" />
sit0      Link encap:IPv6-in-IPv4 
          NOARP  MTU:1480  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
<snipped value="tunl0,usb0" /> 
```

*   值得信赖的浏览器和 Google 组合。

# java - 如何每小时调用一次函数？另外，我怎样才能循环这个？

> ID：10748212
> 
> 赞同：14
> 
> 时间：2012-05-25T03:43:44.810
> 
> 标签：java, timer, scheduled-tasks

我需要一种简单的方法来每 60 分钟调用一次函数。我怎样才能做到这一点？我正在制作一个 MineCraft bukkit 插件，这就是我所拥有的：

```
package com.webs.playsoulcraft.plazmotech.java.MineRegen;

import java.util.logging.Logger;

import org.bukkit.Location;
import org.bukkit.block.Block;
import org.bukkit.event.block.Action;
import org.bukkit.event.player.PlayerInteractEvent;
import org.bukkit.plugin.java.JavaPlugin;

public class Main extends JavaPlugin{

    public final Logger log = Logger.getLogger("Minecraft");

    @Override
    public void onEnable() {
        this.log.info("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
        this.log.info("Plaz's Mine Regen is now enabled!");
        this.log.info("Copyright 2012 Plazmotech Co. All rights reserved.");
        this.log.info("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
    }

    @Override 
    public void onDisable() {
        this.log.info("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
        this.log.info("Plaz's Mine Regen is now disabled!");
        this.log.info("Copyright 2012 Plazmotech Co. All rights reserved.");
        this.log.info("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
    }

    public void onPlayerInteract(PlayerInteractEvent event) {
        final Action action = event.getAction();
        if (action == Action.LEFT_CLICK_BLOCK) {
            Location l1 = event.getClickedBlock().getLocation();
        } else if (action == Action.RIGHT_CLICK_BLOCK) {
            Location l2 = event.getClickedBlock().getLocation();
        }
    }
} 
```

我需要运行一个每小时都会实现的功能，怎么做？请记住：该函数将使用 l1 和 l2。另外，我怎样才能循环这个以获取中间的每个块？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-25T03:53:32.213

创建一个`Timer`对象并给它一个`TimerTask`执行您想要执行的代码的对象。

```
Timer timer = new Timer ();
TimerTask hourlyTask = new TimerTask () {
    @Override
    public void run () {
        // your code here...
    }
};

// schedule the task to run starting now and then every hour...
timer.schedule (hourlyTask, 0l, 1000*60*60); 
```

如果你`hourlyTask`在你的`onPlayerInteract`函数中声明，那么你可以访问`l1`and `l2`。要进行编译，您需要将它们都标记为`final`.

使用一个`Timer`对象的好处是它可以处理多个对象，每个对象都有自己的时间、延迟等。你也可以通过将对象声明为类变量或其他东西`TimerTask`来启动和停止定时器，只要你持有该对象`Timer`.

我不知道如何让每个街区之间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T03:47:35.307

创建一个将永远运行并每小时唤醒以执行数据的线程。

```
Thread t = new Thread() {
    @Override
    public void run() {
        while(true) {
            try {
                Thread.sleep(1000*60*60);
                //your code here...
            } catch (InterruptedException ie) {
            }
        }
    }
};
t.start(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T17:00:09.340

您必须使用 Bukkit 调度程序：

```
public void Method(){
    this.getServer().getScheduler().scheduleSyncDelayedTask(this, new Runnable() {
        @Override
        public void run() {
            // Your code goes here
            Method();
        }
    }, time * 20L );
} 
```

您必须使用它创建一个方法，并且您必须在那里调用相同的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T04:30:52.290

1.  最简单的方法（在我看来）是使用`Thread`（上面的评论提到了它）。
2.  您也可以[`Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) 在`javax.swing.Timer`
3.  但我认为——正如 101100 所说——你可以使用`TimerTask`. 您可以查看此[链接](http://www.ibm.com/developerworks/java/library/j-schedule/index.html) （来自 IBM）

# javascript - 如何使用http基本授权注销？

> ID：10748214
> 
> 赞同：1
> 
> 时间：2012-05-25T03:44:21.123
> 
> 标签：javascript, asp.net, backbone.js, web

我现在正在做一个使用 Backbone.JS 的项目，对于这种情况，服务器端应该是 RESTful 的，但是，我应该如何隐式授权？我曾经用 session 来做这个，如果我使用 http-basic 授权,如何注销？谢谢你帮助我的问题（我的英语就是这样：D）；

# android - 如何禁用屏幕上显示的异常

> ID：10748216
> 
> 赞同：0
> 
> 时间：2012-05-25T03:44:40.253
> 
> 标签：android, exception

[此](http://imageshack.us/f/338/capture18o.jpg/)异常或 java 编号空指针异常总是发生在我的应用程序中。我包围`try...catch...`了，但仍然出现这个。

```
try{

} catch (Exception ex) {
                    toast = Toast.makeText(Main_ParticularCategoryAllNews.this,
                            Config_ConstantVariable.warnmsg_serverwifidown,
                            Toast.LENGTH_SHORT);
                    toast.setGravity(Gravity.CENTER_VERTICAL
                            | Gravity.CENTER_HORIZONTAL, 0, 0);
                    toast.show();
                } 
```

那么如何禁用它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:57:20.293

该异常已由 Toast 处理，因此它不会到达您的 catch 语句。我猜这是您正在使用的设备的一些错误处理，所以很可能您别无选择，只能找到 Toast 出现的原因和位置，并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:58:51.260

检查以下内容并尝试按照stack over flow users的指导线实施

[Android 数据库锁定](https://stackoverflow.com/questions/7930139/android-databse-locked)

[在安卓应用中打开数据库失败](https://stackoverflow.com/questions/8151147/failed-to-open-database-in-android-app)

# gcc - GPU计算SDK中的cutil链接

> ID：10748219
> 
> 赞同：0
> 
> 时间：2012-05-25T03:44:44.793
> 
> 标签：gcc, compilation, cuda, nvcc

我一直在尝试链接到 NVIDIA 发布的 GPU Computing SDK 的 cutil.h 中的函数。

目前，我只是想编译这段简单的代码：

```
#include <iostream>
#include <cuda.h>
#include <cutil.h>

using namespace std;

int main(){
    unsigned int time_total;    
    cutCreateTimer(&time_total);
    return 0;
} 
```

使用以下命令：

```
nvcc -I/home/sj755/NVIDIA_GPU_Computing_SDK/C/common/inc/ -L/home/sj755/NVIDIA_GPU_Computing_SDK/C/lib/libcutil_x86_64.a cutiltest.cu 
```

只得到以下错误：

```
/tmp/tmpxft_000077cc_00000000-13_cutiltest.o: In function `main':
tmpxft_000077cc_00000000-1_cutiltest.cudafe1.cpp:(.text+0x10): undefined reference to 

`cutCreateTimer'

collect2: ld returned 1 exit status 
```

如果我要添加标志，ld 也找不到 -lcutil。我应该链接到一个静态库，但由于某种原因，这永远不会奏效。这是我尝试过的：

1.  我已经更改了我的 .bashrc 文件，以便 LD_LIBRARY_PATH 包含静态库的路径

    ##########< CULA >

    导出 CULA_ROOT=/usr/local/cula

    出口 CULA_INC_PATH=$CULA_ROOT/包括

    导出 CULA_BIN_PATH_32=$CULA_ROOT/bin

    导出 CULA_BIN_PATH_64=$CULA_ROOT/bin64

    导出 CULA_LIB_PATH_32=$CULA_ROOT/lib

    导出 CULA_LIB_PATH_64=$CULA_ROOT/lib64

    ##########< CUDA >

    导出 PATH=$PATH:/usr/local/cuda/bin

    导出 LD_LIBRARY_PATH=:/usr/local/cuda/lib64

    导出 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$CULA_LIB_PATH_64

    导出 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/libnvvp/

    导出 CUDA_SDK_ROOT_DIR=/home/sj755/NVIDIA_GPU_Computing_SDK/C

    导出 LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$CUDA_SDK_ROOT_DIR/lib

2.  我也试过重命名`libcutil_x86_64.a`为`libcutil.a`，仍然没有。

3.  尝试提取存档，创建共享对象文件并链接到它：

    ar -x libcutil_x86_64.a

    gcc -I /usr/include/GL/ -L /usr/include/GL/ -lglut -lGL -lGLU -lX11 -lXmu -lXi -lm -lpthread -shared *.cpp.o -o libcutil.so

    nvcc -lcutil -I /home/sj755/NVIDIA_GPU_Computing_SDK/C/common/inc/ -L /home/sj755/NVIDIA_GPU_Computing_SDK/C/lib/libcutil.so cutiltest.cu

只为得到以下`/usr/bin/ld: cannot find -lcutil`

我在这里忘记了哪一步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T06:04:11.920

您的编译语句不正确。它应该看起来像这样：

```
nvcc -I$SDKROOT/C/common/inc -L$SDKROOT/C/lib cutiltest.cc -lcutil_x86_64 
```

其中 SDKROOT 保存 SDK 的根路径，看起来是

```
/home/sj755/NVIDIA_GPU_Computing_SDK 
```

在你的情况下。这里要注意的关键是库必须在需要它的代码和对象*之后*`-l`按名称作为选项传递。使用您的代码片段在 OS X 上的具体示例：

 *```
$ cat cutiltest.cc 

#include <iostream>
#include <cuda.h>
#include <cutil.h>

using namespace std;

int main(){
    unsigned int time_total;    
    cutCreateTimer(&time_total);
    return 0;
}

$ nvcc -I/Developer/GPU\ Computing/C/common/inc -L /Developer/GPU\ Computing/C/lib -o cutiltest cutiltest.cc -lcutil_i386

$ ls -l cutiltest
-rwxr-xr-x  1 talonmies  talonmies  117548 May 25 07:57 cutiltest 
```

但作为最后一点，你真的应该重新考虑你选择使用 SDK 的 cutils 库。它仅适用于 SDK 示例。它不是 CUDA 的一部分，它没有文档，不保证可以工作或不包含错误，也不保证从一个 SDK 版本到另一个版本的一致性（甚至存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:30:32.273

这不仅仅是你的问题。您是否尝试像与共享库一样与 cutil 链接？此解决方案已发布在[NVIDIA 开发人员上。区论坛](http://forums.nvidia.com/index.php?showtopic=45494)*

# c# - 如何使用数据表的like表达式

> ID：10748220
> 
> 赞同：0
> 
> 时间：2012-05-25T03:45:08.677
> 
> 标签：c#, datatable

我想将新列“temp”添加到数据表中，如下所示

```
datatable.Columns.Add(
    'temp', typeof(string), 
    "Convert(IFF(" + column + 
    " like '%#' == True ,'isTrue','isFalse'), 'System.String')"); 
```

但我收到一个错误：“表达式包含未定义的函数调用 IFF()。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T03:58:49.993

简单的错字：`IFF`应该是`IIF`.

我还认为您的 IIF 语句中的条件表达式有问题。试试这个：

```
datatable.Columns.Add("temp", typeof(string), 
                     "Convert(IIF(" + column + " like '%#','isTrue','isFalse'), 'System.String')"); 
```

# pug - 使用 nodejs 和 jam 打印（或转义 JSON）

> ID：10748222
> 
> 赞同：16
> 
> 时间：2012-05-25T03:45:22.257
> 
> 标签：pug

我一直在挖掘 Jade 文档和谷歌搜索，但一无所获。我正在尝试使用视图打印 JSON 字符串，但无论我如何尝试打印变量，双引号总是转换为`&quot;`

更新：我正在使用 Jade 0.26.0。

我的测试json：

```
{test:"value"} 
```

我的模板代码：

```
!{JSON.stringify(json)} 
```

Web 浏览器中的原始输出：

```
{&quot;test&quot;:&quot;value&quot;} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-25T13:11:48.467

也许升级到最新版本的 Jade？

我正在使用版本 0.25.0 和..

这是逃脱

```
=JSON.stringify(item) 
```

这些是未转义的

```
!{JSON.stringify(item)}
!=JSON.stringify(item) 
```

# c# - 使用c#函数时出现jquery ajax错误

> ID：10748223
> 
> 赞同：0
> 
> 时间：2012-05-25T03:45:32.453
> 
> 标签：c#, jquery, ajax

我想在我的项目中使用 jquery ajax。我只是运行一个简单的 ajax，后面有代码。我收到警报错误为“500 内部错误”

```
<script type="text/javascript" src="jquery-1.2.6.min.js"></script> 
<script type="text/javascript">

     $(document).ready(function () {

         $.ajax({
             type: "POST",
             url: "listprac.aspx/sayHello",
             contentType: "application/json; charset=utf-8",
             data: "{}",
             dataType: "json",
             success: AjaxSucceeded,
             error: AjaxFailed
         });
     });
     function AjaxSucceeded(result) {
         alert(result.d);
     }
     function AjaxFailed(result) {
         alert(result.status + ' ' + result.statusText);
     }  

  </script> 
```

我背后的代码：

```
 public static string sayHello()
    {
        return "hello ";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:51:06.360

对于`aspx`页面，您必须使用`[WebMethod()]`属性装饰您的代码隐藏方法：

```
[WebMethod()]
public static string sayHello()
{
    return "hello ";
} 
```

**编辑：** `WebMethod`在`System.Web.Services.WebService`命名空间内。

# css - CSS 复选框样式

> ID：10748224
> 
> 赞同：1
> 
> 时间：2012-05-25T03:45:32.680
> 
> 标签：css, html, checkbox

我正在使用跨浏览器非图像样式复选框。原始代码来自这里： [http ://acidjs.wemakesites.net/imageless-css-3-custom-checkboxes-and-radio-buttons.html](http://acidjs.wemakesites.net/imageless-css-3-custom-checkboxes-and-radio-buttons.html)

我的 HTML 如下所示：

```
<ul class="imageless-css-3-form-elements" style="list-style-type: none">
    <li><label><input type="checkbox" class="public"><span style="color:#fff">PUBLIC</span></label></li>
    <li><label><input type="checkbox" class="private"><span style="color:#fff">PRIVATE</span></label></li>
    <li><label><input type="checkbox" class="semi-p"><span style="color:#fff">SEMI-PRIVATE</span></label></li>
    <li><label><input type="checkbox" class="grouped"><span style="color:#fff">GROUPED</span></label></li>
 </ul> 
```

我需要每个复选框都有 4 种不同颜色的背景。现在，“公共”类的背景颜色是正确的：`background: #78CCBB;`

“private”类应该有这个背景色：**#A62929**
“semi-p”类应该有这个背景色：**#FFD996**
“grouped”类应该有这个背景色：**#81A2CF**

CSS 看起来像这样：

```
.imageless-css-3-form-elements label
        {
            cursor: hand;
            cursor: pointer;
        }

        .imageless-css-3-form-elements label input[type="checkbox"],
        .imageless-css-3-form-elements label input[type="radio"],
        .imageless-css-3-form-elements label input[type="checkbox"] + span,
        .imageless-css-3-form-elements label input[type="radio"] + span,
        .imageless-css-3-form-elements label input[type="checkbox"] + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            vertical-align: middle;
        }

        .imageless-css-3-form-elements label input[type="checkbox"],
        .imageless-css-3-form-elements label input[type="radio"]
        {
            position: absolute;
            filter: alpha(opacity=0);
            -moz-opacity: 0;
            -webkit-opacity: 0;
            opacity: 0;
        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span,
        .imageless-css-3-form-elements label input[type="radio"] + span,
        .imageless-css-3-form-elements label input[type="checkbox"] + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            display: inline-block;
        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span,
        .imageless-css-3-form-elements label input[type="radio"] + span
        {
            font: normal 13px/14px "Segoe UI", Sans-serif;
            font-weight: 900;
        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span::before
        {
            content: "\2714";
            font-weight: 900;

        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            text-indent: -9999px;
            width: 12px;
            height: 12px;
            font: 12px/12px Garamond, "Segoe UI", Sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            border: solid 1px #0b70cd;
            border-radius: 3px;
            box-shadow: 0 0 1px 1px #78CCBB; /*#ccc*/

            background: #78CCBB;/*#0b70cd;*/
            /*background: -moz-linear-gradient(-45deg, #fefefe, #0b70cd);
            background: -webkit-linear-gradient(-45deg, #fefefe, #0b70cd);
            background: -o-linear-gradient(-45deg, #fefefe, #0b70cd);
            background: -ms-linear-gradient(-45deg, #fefefe, #0b70cd);
            background: linear-gradient(-45deg, #fefefe, #0b70cd);*/
            margin: 0 7px 4px 0;
        }

        .imageless-css-3-form-elements label:hover input[type="checkbox"]:not(:disabled) + span::before,
        .imageless-css-3-form-elements label:hover input[type="radio"]:not(:disabled) + span::before
        {
            background: #78CCBB; /*#0b70cd;*/
            /*background: -moz-linear-gradient(45deg, #fefefe, #0b70cd);
            background: -webkit-linear-gradient(45deg, #fefefe, #0b70cd);
            background: -o-linear-gradient(45deg, #fefefe, #0b70cd);
            background: -ms-linear-gradient(45deg, #fefefe, #0b70cd);
            background: linear-gradient(45deg, #fefefe, #0b70cd);*/
            box-shadow: 0 0 1px 2px #78CCBB; /*#ccc*/
        }

        .imageless-css-3-form-elements label input[type="checkbox"]:checked + span::before,
        .imageless-css-3-form-elements label input[type="radio"]:checked + span::before
        {
            text-indent: 2px;
            color: #fff;
            text-shadow: 0 0 2px #0b70cd;
            font-weight: 900;
        }

        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            content: "\2022";
            font-size: 22px;
            -moz-border-radius: 12px;
            -webkit-border-radius: 12px;
            border-radius: 12px;
        }

        .imageless-css-3-form-elements label input[type="radio"]:checked + span::before
        {
            text-indent: 2px;
        }

        .imageless-css-3-form-elements label input[type="checkbox"]:disabled + span::before,
        .imageless-css-3-form-elements label input[type="radio"]:disabled + span::before
        {
            filter: alpha(opacity=50);
            -moz-opacity: .5;
            -webkit-opacity: .5;
            opacity: .5;
        }

        .imageless-css-3-form-elements label input[type="checkbox"]:disabled + span,
        .imageless-css-3-form-elements label input[type="radio"]:disabled + span,
        .imageless-css-3-form-elements label input[type="checkbox"]:disabled + span::before,
        .imageless-css-3-form-elements label input[type="radio"]:disabled + span::before
        {
            cursor: default;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:27:54.590

这有效...

```
.imageless-css-3-form-elements label
        {
            cursor: hand;
            cursor: pointer;
        }

        .imageless-css-3-form-elements label input[type="checkbox"],
        .imageless-css-3-form-elements label input[type="radio"],
        .imageless-css-3-form-elements label input[type="checkbox"] + span,
        .imageless-css-3-form-elements label input[type="radio"] + span,
        .imageless-css-3-form-elements label input[type="checkbox"] + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            vertical-align: middle;
        }

        .imageless-css-3-form-elements label input[type="checkbox"],
        .imageless-css-3-form-elements label input[type="radio"]
        {
            position: absolute;
            filter: alpha(opacity=0);
            -moz-opacity: 0;
            -webkit-opacity: 0;
            opacity: 0;
        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span,
        .imageless-css-3-form-elements label input[type="radio"] + span,
        .imageless-css-3-form-elements label input[type="checkbox"] + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            display: inline-block;
        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span,
        .imageless-css-3-form-elements label input[type="radio"] + span
        {
            font: normal 13px/14px "Segoe UI", Sans-serif;
            font-weight: 900;
        }

        .imageless-css-3-form-elements label input[type="checkbox"] + span::before
        {
            content: "\2714";
            font-weight: 900;

        }

        .imageless-css-3-form-elements label input[type="checkbox"].public + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            text-indent: -9999px;
            width: 12px;
            height: 12px;
            font: 12px/12px Garamond, "Segoe UI", Sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            border: solid 1px #0b70cd;
            border-radius: 3px;
            box-shadow: 0 0 1px 1px #78CCBB; /*#ccc*/

            background: #78CCBB;/*#0b70cd;*/
            margin: 0 7px 4px 0;
        }

.imageless-css-3-form-elements label input[type="checkbox"].private + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            text-indent: -9999px;
            width: 12px;
            height: 12px;
            font: 12px/12px Garamond, "Segoe UI", Sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            border: solid 1px #0b70cd;
            border-radius: 3px;
            box-shadow: 0 0 1px 1px #78CCBB; /*#ccc*/

            background:  #A62929;/*#0b70cd;*/
            margin: 0 7px 4px 0;
        }

.imageless-css-3-form-elements label input[type="checkbox"].semi-p + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            text-indent: -9999px;
            width: 12px;
            height: 12px;
            font: 12px/12px Garamond, "Segoe UI", Sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            border: solid 1px #0b70cd;
            border-radius: 3px;
            box-shadow: 0 0 1px 1px #78CCBB; /*#ccc*/

            background: #FFD996;/*#0b70cd;*/
            margin: 0 7px 4px 0;
        }

.imageless-css-3-form-elements label input[type="checkbox"].grouped + span::before,
        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            text-indent: -9999px;
            width: 12px;
            height: 12px;
            font: 12px/12px Garamond, "Segoe UI", Sans-serif;
            font-weight: 900;
            text-transform: uppercase;
            border: solid 1px #0b70cd;
            border-radius: 3px;
            box-shadow: 0 0 1px 1px #78CCBB; /*#ccc*/

            background: #81A2CF;/*#0b70cd;*/
            margin: 0 7px 4px 0;
        }

        .imageless-css-3-form-elements label:hover input[type="checkbox"]:not(:disabled) + span::before,
        .imageless-css-3-form-elements label:hover input[type="radio"]:not(:disabled) + span::before
        {
            background: #78CCBB; /*#0b70cd;*/
            /*background: -moz-linear-gradient(45deg, #fefefe, #0b70cd);
            background: -webkit-linear-gradient(45deg, #fefefe, #0b70cd);
            background: -o-linear-gradient(45deg, #fefefe, #0b70cd);
            background: -ms-linear-gradient(45deg, #fefefe, #0b70cd);
            background: linear-gradient(45deg, #fefefe, #0b70cd);*/
            box-shadow: 0 0 1px 2px #78CCBB; /*#ccc*/
        }

        .imageless-css-3-form-elements label input[type="checkbox"]:checked + span::before,
        .imageless-css-3-form-elements label input[type="radio"]:checked + span::before
        {
            text-indent: 2px;
            color: #fff;
            text-shadow: 0 0 2px #0b70cd;
            font-weight: 900;
        }

        .imageless-css-3-form-elements label input[type="radio"] + span::before
        {
            content: "\2022";
            font-size: 22px;
            -moz-border-radius: 12px;
            -webkit-border-radius: 12px;
            border-radius: 12px;
        }

        .imageless-css-3-form-elements label input[type="radio"]:checked + span::before
        {
            text-indent: 2px;
        }

        .imageless-css-3-form-elements label input[type="checkbox"]:disabled + span::before,
        .imageless-css-3-form-elements label input[type="radio"]:disabled + span::before
        {
            filter: alpha(opacity=50);
            -moz-opacity: .5;
            -webkit-opacity: .5;
            opacity: .5;
        }

        .imageless-css-3-form-elements label input[type="checkbox"]:disabled + span,
        .imageless-css-3-form-elements label input[type="radio"]:disabled + span,
        .imageless-css-3-form-elements label input[type="checkbox"]:disabled + span::before,
        .imageless-css-3-form-elements label input[type="radio"]:disabled + span::before
        {
            cursor: default;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:57:30.563

只需添加一些CSS：

```
.public_li{background-color:#78CCBB;}
.private_li{ background-color:#A62929}
.semi-p_li{background-color:#78CCBB;}
.grouped_li{ background-color:#A62929} 
```

并将html更改为：

```
<ul class="imageless-css-3-form-elements" style="list-style-type: none">
    <li class="public_li"> <label><input type="checkbox" class="public"><span style="color:#fff">PUBLIC</span></label></li>
    <li class="private_li"><label><input type="checkbox" class="private"><span style="color:#fff">PRIVATE</span></label></li>
    <li class="semi-p_li"><label><input type="checkbox" class="semi-p"><span style="color:#fff">SEMI-PRIVATE</span></label></li>
    <li class="grouped"><label><input type="checkbox" class="grouped"><span style="color:#fff">GROUPED</span></label></li>
 </ul> 
```

# matlab - 在 MATLAB 中使用 dwt3 进行小波变换

> ID：10748225
> 
> 赞同：0
> 
> 时间：2012-05-25T03:45:35.143
> 
> 标签：matlab, dwt

我有一个使用`dwt`.
我使用 function 成功完成了它`dwt2`，现在我尝试`dwt3`通过更改函数中的一些代码来使用函数`dwt2`（添加更多子带：8 个子带）。不幸的是，出现了一个错误，上面写着“输出参数太多”。

我的问题是，编写 MATLAB 代码的正确方法是什么`dwt3`？不一样`dwt2`，只是增加更多的子带？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:51:05.307

仅通过查看[`dwt2`](http://www.mathworks.com/help/toolbox/wavelet/ref/dwt2.html)and的官方文档[`dwt3`](http://www.mathworks.com/help/toolbox/wavelet/ref/dwt3.html)，我发现它`dtw3`只有 1 个输出变量，而`dtw2`有 4 个。

我假设您只是将`dtw2`代码中的字符串替换为`dwt3`，而没有注意允许的输出变量的数量。所以你去了，这就是错误*“输出变量太多”*的来源......

如果`dwt3`只返回转换后的向量，将输出变量的数量减少到 1，我相信错误会消失：

```
Y = dwt3(X, 'db2'); 
```

在这里，我`X`使用`dwt3`Daubechies 2-tap 小波进行转换，并将结果存储在`Y`.

PS
如果您想要更高效、更有用的答案，您需要显示更多代码...

# c++ - 使用 NetBeans C++ 编译以在 Windows 7 上分发

> ID：10748230
> 
> 赞同：0
> 
> 时间：2012-05-25T03:46:39.937
> 
> 标签：c++, netbeans, mingw, distribution

我在 Windows 7 上的 Netbeans 中创建了一个应用程序。我想在另一个系统上运行它，但它似乎有很多它依赖的 dll。我正在使用的编译器工具包是 MinGW，前两个缺少的 dll 就是这种形式。每次运行我只得到一个丢失的 dll 文件，因此要来回查找它们需要很多时间。

有没有办法列出我的可执行文件所依赖的所有 dll？

有没有办法编译它，使它不依赖于它们中的很多（即将代码编译成exe）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:15:13.967

从菜单栏中，选择**Menu** -> **Project Properties**。然后在类别列中，展开显示**Build**的节点并选择**Linker**。然后在附加选项下的命令行中，添加`-static-libgcc -static-libstdc++`. 这将为您静态链接 C 和 C++ 库。您还可以使用该`-static`选项添加其他库。

有一些工具可以帮助你找到依赖项，但是对于 windows dll，我通常只看 MSDN。这是一个[SO question](https://stackoverflow.com/questions/7378959/how-to-check-for-dll-dependency)，如果您想使用它们，它会讨论一些工具。

# java - java.lang.IllegalArgumentException：参数不作为命名参数存在

> ID：10748234
> 
> 赞同：3
> 
> 时间：2012-05-25T03:47:13.293
> 
> 标签：java, mysql, hibernate

```
public List<Data> List(String name, String id, int lowerBound, int upperBound) throws WiMatchException {
    try {
        Session session = getHibernateTemplate().getSessionFactory().openSession();
        SQLQuery query = session.createSQLQuery("select * from data inner join route on (data.id=route.data_id and data.status=:status  and data.is_active='Y' and route.owner_id= :ownerId) LIMIT lowerBound,upperBound ");
        query.addEntity(UserData.class);
        query.setString("status", status);
        query.setString("ownerId", ownerId);
        query.setInteger("lowerBound", lowerBound);
        query.setInteger("upperBound", upperBound);
        List<UserData> resList = query.list();

        logger.debug("size of List() =" + resList.size());
        session.close();
        return resList;

    } catch (Exception e) {
                 ...
    }
} 
```

执行上述方法时，出现以下异常

```
java.lang.IllegalArgumentException: Parameter lowerBound does not exist as a named parameter in [select * from data inner join route on (data.id=route.data_id and data.status=:status  and data.is_active='Y' and route.owner_id= :ownerId) LIMIT lowerBound,upperBound ] 
```

需要建议来解决这个问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T03:49:36.220

`lowerBound`您在和前面缺少参数指示符（冒号）`upperBound`。

```
SQLQuery query = session.createSQLQuery(
    "select * from data "+
    "inner join route on (data.id=route.data_id and data.status=:status  and data.is_active='Y' and route.owner_id= :ownerId)"+
    "LIMIT :lowerBound,:upperBound "
); 
```

如果没有这些指示符，JDBC 不知道这些是参数，从而将它们与列名混淆。

# iphone - 在iOS中，可以通过alloc和initWithFrame添加UIButton吗？

> ID：10748238
> 
> 赞同：0
> 
> 时间：2012-05-25T03:47:58.253
> 
> 标签：iphone, ios, cocoa-touch, uikit, uibutton

可以通过以下方式添加按钮：

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
myButton.frame = CGRectMake(100, 100, 160, 50);
[myButton setTitle:@"click me" forState:UIControlStateNormal];
[self.view addSubview:myButton]; 
```

但是我们可以采用以下`initWithFrame`方法吗：

```
UIButton *myButton2 = [[UIButton alloc] initWithFrame:CGRectMake(100, 300, 160, 50)];
//myButton2.buttonType = UIButtonTypeRoundedRect;
myButton2.titleLabel.text = @"click me";
[self.view addSubview:myButton2]; 
```

但是上面的第 2 行被注释掉了，因为它会导致“只读”属性出现错误，并且注释掉了该行，仍然没有显示任何按钮...如果使用`initWithFrame`开头，可以添加 UIButton 吗？

（**更新：**我设置了黄色背景来查看视图的区域，发现按钮2的标签文本实际上显示为白色的“点击我”......但触摸它没有视觉效果......所以我想知道如何更改代码示例 2 以使其工作...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:51:41.887

是的，当然可以。不久前，我对只读 buttonType 属性进行了一些讨论。普遍的共识是，任何人都没有安全的方法，也没有充分的理由来切换按钮的类型。此外，`+buttonWithType`返回 UIButton 的实例`+Alloc`和`-init`do 一样好，所以这不是问题。

# android - 混淆 Android 代码时出错

> ID：10748246
> 
> 赞同：0
> 
> 时间：2012-05-25T03:49:19.813
> 
> 标签：android, obfuscation, proguard

我在混淆 Android 代码时遇到问题。我使用 Proguard 4.7 版和 Eclipse 作为我的 IDE。我把我改成`proguard.cfg`这样：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * implements android.view.View.OnTouchListener
-keep class * extends android.view.View { 
  public <init>(android.content.Context); 
  public <init>(android.content.Context, android.util.AttributeSet); 
  public <init>(android.content.Context, android.util.AttributeSet, int); 
  public void set*(...); 
}
-keep class * extends android.preference.Preference { 
  public <init>(android.content.Context); 
  public <init>(android.content.Context, android.util.AttributeSet); 
  public <init>(android.content.Context, android.util.AttributeSet, int); 
  public void set*(...); 
}    
# LVL License binder class
-keep class com.android.vending.licensing.ILicensingService    
# This is necessary for LVL among others. According to proguard doc java accesses enum fields by introspection.
-keepclassmembers enum * {
  public static **[] values();
  public static ** valueOf(java.lang.String);
}
#Optimization settings
-dontoptimize 
```

当我编译我的项目时，我得到一个错误，我无法解决它。这是错误：

```
Unable to execute dex: Multiple dex files define Lchangebackground/app/OnSwipeListener
Conversion to Dalvik Format failed: Unable to execute dex: Multiple dex files define Lchangebackground/app/OnSwipeListener 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:33:56.470

这通常意味着您两次包含一个库，或者您的类路径存在其他问题。将所有 jar 文件放在 libs/ 下并清理您的项目。检查同一库的不同版本，并通过引用的库项目包括库。

# extjs - Sencha touch 2 MVC商店

> ID：10748250
> 
> 赞同：-1
> 
> 时间：2012-05-25T03:51:05.397
> 
> 标签：extjs

我正在寻找 sencha touch 2 MVC STORE 的教程或示例，它处理 Jsonp 链接并从那里获取数据，只有 MVC BASE。我需要了解 Store、Model、Controller 和 View 如何在基于 MVC 的结构中相互交互。有什么建议吗？之间我需要了解如何获取和使用 jsonp 链接和数据，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T11:41:51.133

一个简单的使用 jsonp 的模型、存储和视图示例

**jsonp 的样子。**

```
callback({"Message":"Success","Post":[{"id":"35","UserId":"faisalkhalid690","Content":"lol","Time":"2013-12-03 05:28:15"},{"id":"50","UserId":"faisalkhalid","Content":"asdfasdfasdf","Time":"2013-12-03 05:52:27"},{"id":"51","UserId":"faisalkhalid","Content":"sadfasdfasdf","Time":"2013-12-03 05:52:38"},{"id":"52","UserId":"faisalkhalid","Content":"holloa","Time":"2013-12-03 05:52:50"},{"id":"70","UserId":"faisalkhalid690","Content":"hello","Time":"2013-12-04 23:22:52"}]}); 
```

**此 jsonp 的模型。**

```
Ext.define('talkbag.model.Comments', {
    extend: 'Ext.data.Model',

    config: {
           idProperty: 'id',
        fields: [
            { name: 'id', type: 'auto' },
            { name: 'UserId', type: 'auto' },
            { name: 'Content', type: 'auto' },
            { name: 'Time', type: 'auto' }

        ]
    }
}); 
```

**店铺：**

```
Ext.define('talkbag.store.Comments', {
extend:'Ext.data.Store',

storeId:'Comments',
config:{
    autoLoad: true,
       model:'talkbag.model.Comments',
         proxy: {
            type: 'jsonp',
            url : 'http://www.litemake.com/ViewComments.php?Pid='+talkbag.User.PostId,
            reader: {
                type: 'json',
                rootProperty: 'Post'
            }
        }
    }

}); 
```

**看法：**

```
Ext.define('talkbag.view.ViewPost.ViewCommentDetail', {

xtype:'ViewCommentDetail',
extend:'Ext.dataview.List',
config:{
  store:'Comments', 
itemTpl:'<table><tr><td width="80px"><table align="center"><tr><td align="center"><img src="http://www.litemake.com/getPic.php?userId={UserId}" heigth="30px" width="30px"/></td></tr><tr><td style="font-size:0.6em">{UserId}</td></tr></table></td><td style="padding-left:20px"><table><tr><td style="font-size:0.7em; padding:0px 0px 5px 0px">{Content}</td></tr><tr><td style="font-size:0.5em">{Time}</td></tr></table></td></tr></table>'

}

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:05:03.423

下载 sencha touch 2 并找到 oreilly 示例。在关于面板推文页面的此示例中，从商店加载数据（阅读器类型为 jsonp）。您还应该查看其他示例，例如 touchtweets、geocongress、navigationview 等。我认为这是最好的开始方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-22T08:12:19.593

如果您需要有关 JSONP - 服务器端的一些信息，请查看 [Sencha Touch API (JSONP)](http://docs.sencha.com/touch/2.3.1/#!/api/Ext.data.proxy.JsonP)

在那里，您可以找到服务器端方法来处理您对常见服务器端编程语言（如 PHP、Java 或 ASP.net）的 JSONP 请求。

对于 PHP，它看起来像这样：

```
// From your Sencha JSONP Store, you will get a callback parameter which we
// need to put in our $callback var, for later usage.
$callback = $_REQUEST['callback'];

// Create the output object.
// this could also be a database output, but remember to      
// convert it into an array
$output = array('a' => 'Apple', 'b' => 'Banana');

// start output
// this section switches between a jsonp callback or usual json output.
if ($callback) {
    header('Content-Type: text/javascript');
    echo $callback . '(' . json_encode($output) . ');';
} else {
    header('Content-Type: application/x-json');
    echo json_encode($output);
} 
```

正如 Faisal Khalid 已经说过的那样，输出看起来像......

```
myCallbackName({
    "message":"success",
    "total":2,
    "data":[
             {"prename":"Bob","lastname":"example"},
             {"prename":"John","lastname":"Beard"}
           ]
}); 
```

...您已将 myCallbackName 定义为*sencha*应用程序（存储配置）中的回调名称。

该配置称为**callbackKey**并且默认设置为*回调*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T06:23:52.537

我发现文档中有很多关于理解 sencha touch 的 MVC 结构的很好的教程，以及每个单独的主题，如商店和模型。

MVC 深入第 1 部分： [http ://docs.sencha.com/touch/2-0/#!/video/mvc-part-1](http://docs.sencha.com/touch/2-0/#!/video/mvc-part-1)

MVC 深度第 2 部分： [http ://docs.sencha.com/touch/2-0/#!/video/mvc-part-2](http://docs.sencha.com/touch/2-0/#!/video/mvc-part-2)

该文档还有一个指南部分，涵盖了您也需要了解的所有内容。 [http://docs.sencha.com/touch/2-0/#!/guide](http://docs.sencha.com/touch/2-0/#!/guide)

# c# - 在 Console.ReadLine 期间使用 Console.WriteLine

> ID：10748252
> 
> 赞同：2
> 
> 时间：2012-05-25T03:51:16.583
> 
> 标签：c#, mono, console-application

我有以下代码：

```
bool loop = true;
        LongbowWorkerThread Worker = new LongbowWorkerThread();
        Thread w = new Thread(Worker.UpdateChannel);
        w.Start();

        string inText = string.Empty;

        while (loop) {
            inText = Console.ReadLine();
            Console.WriteLine(inText);
        } 
```

此时，工作线程只是每 5000 毫秒回显一个字符串。问题是打印的字符串与用户已经输入的文本重叠，这并不理想并且看起来很丑陋（尽管它不会影响 Console.ReadLine 返回的实际数据。）

有没有办法防止这种重叠？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:55:14.493

您可以使用[Console.CursorLeft](http://msdn.microsoft.com/en-us/library/system.console.cursorleft.aspx)和[Console.CursorRight](http://msdn.microsoft.com/en-us/library/system.console.cursortop.aspx)属性来记录光标位置、移动它、输出您的文本，然后将其移回。

编辑：这是我刚刚拼凑的一个示例，根据我对其进行的 60 秒测试效果很好。

```
 int fooCursorTop = Console.CursorTop + 1;

        var timer2 = new System.Timers.Timer(1000);
        timer2.Elapsed += new System.Timers.ElapsedEventHandler(delegate
            {
                int tempCursorLeft = Console.CursorLeft;
                int tempCursorTop = Console.CursorTop;
                Console.CursorLeft = 0;
                Console.CursorTop = fooCursorTop;
                Console.WriteLine("Foo");
                Console.CursorLeft = tempCursorLeft;
                Console.CursorTop = tempCursorTop;
                fooCursorTop++;
            });
        timer2.Start();

        string input = string.Empty;
        while (input != "quit")
        {
            input = Console.ReadLine();
            Console.CursorTop = fooCursorTop;
            Console.WriteLine(input);
            fooCursorTop += 2;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:45:40.473

您是否尝试在 Console.WriteLine() 之后使用 Console.Out.Flush()？它应该将数据从缓冲区发送到输出流。

# r - 用于按索引对向量进行分区并在该分区上执行操作的惯用 R 代码

> ID：10748253
> 
> 赞同：18
> 
> 时间：2012-05-25T03:51:30.450
> 
> 标签：r, functional-programming, plyr

我试图在 R 中找到惯用的方法，用某个索引向量对数字向量进行分区，找到该分区中所有数字的总和，然后将每个单独的条目除以该分区总和。换句话说，如果我从这个开始：

```
df <- data.frame(x = c(1,2,3,4,5,6), index = c('a', 'a', 'b', 'b', 'c', 'c')) 
```

我希望输出创建一个向量（我们称之为 z）：

```
c(1/(1+2), 2/(1+2), 3/(3+4), 3/(3+4), 5/(5+6), 6/(5+6)) 
```

如果我这样做是 SQL 并且可以使用窗口函数，我会这样做：

```
select 
 x / sum(x) over (partition by index) as z 
from df 
```

如果我使用 plyr，我会做这样的事情：

```
ddply(df, .(index), transform, z = x / sum(x)) 
```

但我想知道如何使用标准的 R 函数式编程工具（如 mapply/aggregate 等）来做到这一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-25T04:28:30.167

还有一个选择是`ave`. 为了更好地衡量，我收集了上面的答案，尽力使它们的输出等效（向量），并使用您的示例数据作为输入提供了超过 1000 次运行的时间。首先，我的回答使用`ave`: `ave(df$x, df$index, FUN = function(z) z/sum(z))`。我还展示了一个使用`data.table`包的示例，因为它通常很快，但我知道您正在寻找基本解决方案，因此如果您愿意，可以忽略它。

现在是一堆时间：

```
library(data.table)
library(plyr)
dt <- data.table(df)

plyr <- function() ddply(df, .(index), transform, z = x / sum(x))
av <- function() ave(df$x, df$index, FUN = function(z) z/sum(z))
t.apply <- function() unlist(tapply(df$x, df$index, function(x) x/sum(x)))
l.apply <- function() unlist(lapply(split(df$x, df$index), function(x){x/sum(x)}))
b.y <- function() unlist(by(df$x, df$index, function(x){x/sum(x)}))
agg <- function() aggregate(df$x, list(df$index), function(x){x/sum(x)})
d.t <- function() dt[, x/sum(x), by = index]

library(rbenchmark)
benchmark(plyr(), av(), t.apply(), l.apply(), b.y(), agg(), d.t(), 
           replications = 1000, 
           columns = c("test", "elapsed", "relative"),
           order = "elapsed")
#-----

       test elapsed  relative
4 l.apply()   0.052  1.000000
2      av()   0.168  3.230769
3 t.apply()   0.257  4.942308
5     b.y()   0.694 13.346154
6     agg()   1.020 19.615385
7     d.t()   2.380 45.769231
1    plyr()   5.119 98.442308 
```

在`lapply()`这种情况下，解决方案似乎赢了，而且`data.table()`速度出奇的慢。让我们看看这如何扩展到更大的聚合问题：

```
df <- data.frame(x = sample(1:100, 1e5, TRUE), index = gl(1000, 100))
dt <- data.table(df)

#Replication code omitted for brevity, used 100 replications and dropped plyr() since I know it 
#will be slow by comparison:
       test elapsed  relative
6     d.t()   2.052  1.000000
1      av()   2.401  1.170078
3 l.apply()   4.660  2.270955
2 t.apply()   9.500  4.629630
4     b.y()  16.329  7.957602
5     agg()  20.541 10.010234 
```

这似乎更符合我的预期。

总之，您有很多不错的选择。找到一种或两种适用于聚合任务应该如何工作的心智模型的方法，并掌握该功能。给猫剥皮的多种方法。

# 编辑 - 和一个 1e7 行的例子

可能对马特来说不够大，但我的笔记本电脑可以处理而不会崩溃：

```
df <- data.frame(x = sample(1:100, 1e7, TRUE), index = gl(10000, 1000))
dt <- data.table(df)
#-----
       test elapsed  relative
6     d.t()    0.61  1.000000
1      av()    1.45  2.377049
3 l.apply()    4.61  7.557377
2 t.apply()    8.80 14.426230
4     b.y()    8.92 14.622951
5     agg()   18.20 29.83606 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-25T04:22:15.227

还有其他三种方法：

```
dat <- 1:6
lev <- rep(1:3, each = 2)

lapply(split(dat, lev), function(x){x/sum(x)})
by(dat, lev, function(x){x/sum(x)})
aggregate(dat, list(lev), function(x){x/sum(x)}) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-25T04:00:58.673

如果您只对单个向量进行操作并且只需要一个索引向量，那么 tapply 非常快

```
dat <- 1:6
lev <- rep(1:3, each = 2)
tapply(dat, lev, function(x){x/sum(x)})
#$`1`
#[1] 0.3333333 0.6666667
#
#$`2`
#[1] 0.4285714 0.5714286
#
#$`3`
#[1] 0.4545455 0.5454545
#
unlist(tapply(dat, lev, function(x){x/sum(x)}))
#       11        12        21        22        31        32 
#0.3333333 0.6666667 0.4285714 0.5714286 0.4545455 0.5454545 
```

# mysql - 在 MySQL 中同步两个表

> ID：10748254
> 
> 赞同：0
> 
> 时间：2012-05-25T03:51:31.140
> 
> 标签：mysql, synchronization, data-synchronization

我正在创建两个网站。这两个网站的共同点是公司表。我想要做的是：如果一个公司表被更新，另一个公司表也相应地更新。

两个数据库都在同一台服务器上。

最好的方法是什么？（由于我使用的框架类型，无法通过代码执行此操作。）

我更喜欢数据库级别的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:11:13.560

MySQL 可以跨两个不同的数据库连接表，所以也许你可以摆脱一个表。否则，触发器对于保持两个表同步很有用。

# c++ - 模板 错误：“模板”之前的预期初始化程序

> ID：10748255
> 
> 赞同：3
> 
> 时间：2012-05-25T03:51:36.223
> 
> 标签：c++, initializer

嗨 stackoverflow 论坛的人，我直接从教科书 Absolute C++ 第四版 Savitch ISBN-13：978-0-13-136584-1 中输入了这段代码。通用排序函数。第 728 页上的 sort.cpp 在第 17 行给出了错误： 第 17 行：错误：“模板”之前的预期初始化程序

有人可以帮忙吗，因为我希望教科书“正常工作”，这样我就可以研究代码，而不会陷入我不理解的额外错误。是的，我已经研究过了，但是这个错误的研究是有限的，因为我专注于通用排序函数的更简单的学习点，希望学习通用模板，希望学习哈希表...phewww，喘口气。

我无法在发生错误的第 17 行加粗。

```
// This is the file sort.cpp.
template<class T>
void sort(T a[], int numberUsed)
{
    int indexOfNextSmallest;
    for (int index = 0; index < numberUsed - 1; index++)
    {//Place the correct value in a[index]:
        indexOfNextSmallest =
            indexOfSmallest(a, index, numberUsed);
        swapValues(a[index], a[indexOfNextSmallest]);
    //a[0] <= a[1] <=...<= a[index] are the smallest of the original array
    //elements. The rest of the elements are in the remaining positions.
    }
}
template<class T>
void swapValues(T& variable1, T& variable2)
template<class T>
int indexOfSmallest(const T a[], int startIndex, int numberUsed)
{
    T min = a[startIndex];
    int indexOfMin = startIndex;
    for (int index = startIndex + 1; index < numberUsed; index++)
        if (a[index] < min)
        {
            min = a[index];
            indexOfMin = index;
            //min is the smallest of a[startIndex] through a[index].
        }
    return indexOfMin;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T04:10:48.430

```
template<class T>
void swapValues(T& variable1, T& variable2);
                                         ^^^^^^
template<class T>
int indexOfSmallest(const T a[], int startIndex, int numberUsed) 
```

看来您缺少`;`函数的 after 声明`swapValues()`。

顺便说一句，我不知道为什么函数声明被放置在两个函数定义之间，尤其是在使用它的函数*之后。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:11:34.387

我想你在这里错过了分号

`void swapValues(T& variable1, T& variable2);`

# objective-c - NSDictionary 的问题

> ID：10748262
> 
> 赞同：0
> 
> 时间：2012-05-25T03:52:31.543
> 
> 标签：objective-c, ios, xcode

我有一个函数可以从字符串转换 html 符号，然后将它们插入到 NSDictionary 中。我猜它可能是方法或语法错误。

转换html值的函数：

```
 - (NSString *)convertMathSymbol:(NSString *)str{

         str = [str stringByReplacingOccurrencesOfString:@"&minus;" withString:@"− "];
         str = [str stringByReplacingOccurrencesOfString:@"&divide;" withString:@"÷ "];
         str = [str stringByReplacingOccurrencesOfString:@"&multiply;" withString:@"× "];

         return str;
    } 
```

插入 NSDictionary：

```
 NSString *tempAns1 = [[sample objectAtIndex:0]objectAtIndex:1];
 [answer setObject:[[self convertMathSymbol:tempAns1] forKey:@"1"]]; 
```

错误：

```
No visible @interface for 'NSString' declares the selector 'forKey:' 
```

欣赏任何指针......提前谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T04:00:08.183

您*正在*向 NSString* 发送消息，让我告诉您如何操作。

你有：

```
[answer setObject:[[self convertMathSymbol:tempAns1] forKey:@"1"]; 
```

去掉答案字典接收器，你得到：

```
[[self convertMathSymbol:tempAns1] forKey:@"1"]; 
```

明白了吗？

尝试：

```
[answer setObject:[self convertMathSymbol:tempAns1] forKey:@"1"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T04:01:04.193

您在第二行的括号不平衡。你有 3 个 ['s 和 2 ]'s。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T03:59:59.743

改变这个

```
[answer setObject:[[self convertMathSymbol:tempAns1] forKey:@"1"]; 
```

对此：

```
[answer setObject:[self convertMathSymbol:tempAns1] forKey:@"1"]; 
```

你有一个额外的 '[' 之前`[self convertMathSymbol:tempAns1'`会使编译器感到困惑。您编写它的方式是`forKey:`向`[self convertMathSymbol:tempAns1]`. 很简单...

# git - 致力于在 Git 中捕获问题：好主意？

> ID：10748263
> 
> 赞同：2
> 
> 时间：2012-05-25T03:52:39.640
> 
> 标签：git

今天我在做某事，但测试没有通过。后来我试图记住它为什么不起作用，因为我想回去弄清楚它为什么会这样做。当然，我没有捕获到它被破坏的提交，因为我们被训练成不检查损坏的东西。但是，Git 不同：您可以进行提交并保留它们，然后仅在代码工作后才推送。似乎是个好主意？不？（我知道我什至可以用 Rebase 将它们压扁。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:52:56.247

> 但是，Git 不同：您可以进行提交并保留它们，然后仅在代码工作后才推送。似乎是个好主意？

是的，这是一个好主意，因为它利用了 DVCS 提供两个[正交特性](https://stackoverflow.com/questions/2563836/sell-me-distributed-revision-control/2563917#2563917)的事实：

*   版本控制（提交、分支、合并）
*   发布（推/拉）

如评论中所述，将您的中间提交隔离在您不打算推送的分支中（在这种情况下， a[`rebase --squash`可能比 a 更有用`rebase --interactive`](https://stackoverflow.com/questions/2427238/in-git-what-is-the-difference-between-merge-squash-and-rebase/2427520#2427520)）。

# algorithm - 两个矩阵的乘积为零

> ID：10748264
> 
> 赞同：0
> 
> 时间：2012-05-25T03:52:40.343
> 
> 标签：algorithm, math

如果我有两个矩阵，一个大小为 MXN，另一个大小为 NXP，假设这些矩阵的乘积为零，并且给定矩阵 NXP 的值，我如何找到矩阵 MXN 的值？

我知道对此的一种可能解决方案是零矩阵，但我实际上正在寻找一个非零矩阵。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:11:41.813

这称为[空空间](http://en.wikipedia.org/wiki/Kernel_%28matrix%29)。在您的情况下，顺序是相反的。这可以通过转置矩阵轻松解决：

```
A * B = 0
B^T * A^T = 0^T
A^T = M(Null(B^T))
A = M(Null(B^T))^T 
```

其中`M(V)`是 的向量的任意线性组合的矩阵`V`。

**例子：**

```
 [ 4 4 8 ]
B = [ 2 7 2 ]
    [ 5 3 5 ]
    [ 7 5 4 ]

            { [  87 ] }
Null(B^T) = { [ -40 ] }
            { [-216 ] }
            { [ 116 ] }

A = [ 87  -40  -216  116 ]
    [  0    0     0    0 ]

A * B = [ 0 0 0 ]
        [ 0 0 0 ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:32:31.870

所以你正在寻找`A B`成为`0`。诀窍是，如果它是 0，那么对于任何可逆矩阵也必须如此。（甚至更多。）`A C^(-1) D^(-1) E^(-1) E D C B``0``N x N``C, D, E`

现在采用`B`并应用基本行操作将其放入[http://en.wikipedia.org/wiki/Row_echelon_form](http://en.wikipedia.org/wiki/Row_echelon_form)（这很容易做到。）这些操作中的每一个都可以通过乘以逆矩阵很容易的可逆矩阵来表示计算（这只是反向行操作。）

一旦我们有了`B`行梯形形式，所有可能的矩阵`A`都很容易找到——每列全为 0，或者每次一行中有多个非零条目时，都会产生另一个独立向量，它会给你一个 0。现在选择`A`然后乘以所有逆行操作（确保以正确的顺序进行操作！）得出您的答案。

# wpf - 在模板化的 WPF 数据网格中查找控件

> ID：10748266
> 
> 赞同：0
> 
> 时间：2012-05-25T03:53:05.787
> 
> 标签：wpf, wpfdatagrid

> **可能重复：**
> [从数据网格中获取复选框的值？C＃](https://stackoverflow.com/questions/6311882/get-value-of-checkbox-from-datagrid-c-sharp)

我试图在模板化 DataGrid 中的选定行内找到一个控件。

```
 <DataGridTemplateColumn Header="Local">
                 <DataGridTemplateColumn.CellTemplate>
                      <DataTemplate>
                           <CheckBox Name="chkImport"  IsChecked="{Binding IsLocalized}"></CheckBox>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn> 
```

我正在尝试以下代码：

```
 var selectedRow = (DataGridRow) gridFileScan.ItemContainerGenerator.ContainerFromItem(gridFileScan.SelectedItem);                           

   CheckBox chkImport = FindVisualChild<CheckBox>(selectedRow); 
```

但 chkImport 始终为空。有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:46:28.910

找到了。我只需要在修改 ItemsSource 后调用这个方法：

```
 gridFileScan.UpdateLayout(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:29:00.157

当您调试时，您应该能够看到该方法递归 VisualTree。

您可以使用[Visual Tree Visualizer查看 Visual Tree](http://blogs.msdn.com/b/zainnab/archive/2010/01/29/using-the-wpf-tree-visualizer-vstipdebug0004.aspx)

FindVisualChild 的实现可能有缺陷，或者 VisualTree 看起来不像您期望的那样。

# css - 100% 高度 div 不是 100%

> ID：10748269
> 
> 赞同：1
> 
> 时间：2012-05-25T03:53:53.443
> 
> 标签：css, html, stretching

我正在这个网站上工作：[www.lumn.net](http://www.lumn.net)。中心面板 (#overall) 应该是一个从页面顶部延伸到底部的 div。出于某种原因，我无法弄清楚，我在每一页的底部都有空间。 ~~更奇怪的是，只有两个页面，lumn.net/index.shtml 和 lumn.net/about.shtml，顶部和底部都有空间。~~<-- 固定

html 和 body 都有 height:100%。

如果我将中心面板的高度设置为 100%，那么在仅底部有额外空间的页面上，它会变为 600 像素，这是其中一个内部 div 的最小高度，并且超出该高度的内容会超出底部。在顶部和底部都有额外空间的页面上，没有任何反应。

为中心面板设置 top:0 和 bottom:0 对任何页面都没有影响。

除了我已经尝试过的事情之外，我不知道我做错了什么或如何解决它。

更新：底部空间的问题是由于我的页脚位于中心 div 之外，并使用负边距向上移动。然而，当我把它移到里面时，它下面还有一点奇怪的额外空间：[lumn.net/about.shtml](http://lumn.net/about.shtml)。我怎样才能正确地将它放在我的#overall center div 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:42:34.347

您的页脚高度为 28 像素（包括边框），顶部为 -42 像素。这留下了 16px 的 #overall 突出在它下面——其中只有 8px 似乎是故意的。

至于页面顶部，这似乎是由一个无关的问号引起的（在页面的左上角几乎看不到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:25:24.027

尝试更改 padding-bottom on `#overal`：

`padding-bottom: 18px`

这能解决你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:01:54.253

在主页和关于页面上，您有一些奇怪的额外字符“？”也许是一个 php 标签打开错误？

您是否尝试过 tp 在#overall 上设置 100% 的高度？（对我来说它有效......）

# javascript - Javascript重新加载（）不起作用

> ID：10748270
> 
> 赞同：6
> 
> 时间：2012-05-25T03:53:54.213
> 
> 标签：javascript, function, reload

因为有这么多人问这个问题，所以我在这里到处搜索，但无论如何，我不断得到`undefined`..

```
function remove_item(itemid) {
    var window = top.location;
    var host = window.host;

    $.ajax({
        url: "http://"+host+"/backend/remove_lockbox.php?id="+itemid,
        success: function() {
            $(document).ajaxStop(function(){
                window.top.location.reload();
            });
        }
    });
} 
```

那是我的代码。我试过了`window.location.reload`，`host.location.reload`......我尝试了一切，但我不断得到`undefined`......位置的父级始终`undefined`是它是否是、、、、`window`任何东西。有人可以帮帮我吗？`host``window.top`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T04:13:23.827

所以你在做

```
 var window = top.location; 
```

而且比你做的

```
 window.top.location.reload(); 
```

所以你实际上是在说

```
top.location.top.location.reload(); 
```

既然已经定义了变量并且具有不同的含义，为什么还要使用名为 window 的变量？那很不好。

如果您使用的是框架，我希望看到类似

```
parent.location.reload(true); 
```

或者只是一个普通的旧窗户

```
window.location.reload(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:13:14.170

尝试这种方式，它在 chrome 中工作正常，因为我知道这在所有现代浏览器中都应该工作正常。

```
function remove_item(itemid) {

    var host = window.location.host;

    $.ajax({
        url: "http://"+host+"/backend/remove_lockbox.php?id="+itemid,
        success: function() {
            $(document).ajaxStop(function(){
                window.location.reload();
            });
        }
    });
} 
```

这是`window.location`,`window.location.host`和的工作示例`window.location.reload`。

[http://jsbin.com/apemen/3](http://jsbin.com/apemen/3)

# adsense - Adsense 未显示，但在页面刷新后显示（Chrome 和 Safari）

> ID：10748273
> 
> 赞同：2
> 
> 时间：2012-05-25T03:54:14.290
> 
> 标签：adsense

我的页面上有三个 adsense 广告。（这是一个中文网站）。

如果您第一次查看此页面，Adsense 广告会显示正常。但是，如果您单击下一页链接（在分页栏上），则根本不会出现广告。但是如果你刷新网页，它们就会正常显示。

奇怪的是它只发生在 Chrome 和 Safari 上。IE 和 Firefox 没问题。

我已经在互联网上搜索了一段时间，但找不到解决方案。这个问题每月花费我数百美元。最初我认为问题是由我使用的“Kickstart css 框架”引起的，但我不确定。我已经在 Chrome 控制台中检查了这个问题。adsense 广告给我 400 错误。

```
Failed to load resource: the server responded with a status of 400 (Bad Request) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T07:18:03.720

现在已修复。原因是kickstart 框架在加载后包装了每个div。让adsense拒绝加载请求。

# java - 在 LWJGL 中启用照明时，面部为黑色/深色

> ID：10748274
> 
> 赞同：1
> 
> 时间：2012-05-25T03:54:16.067
> 
> 标签：java, opengl, clojure, lwjgl

我将 LWJGL 与 Clojure 一起使用，并且难以为场景照明。我正在绘制 GLU.Sphere 对象，这些对象在关闭照明时可见，但在启用照明时完全黑色。

我究竟做错了什么？

```
(ns gltest.core
  (:import [org.lwjgl.opengl Display DisplayMode GL11]
           [org.lwjgl.util.glu GLU Sphere]
           [org.lwjgl Sys]
           [org.lwjgl.input Keyboard]
           [java.nio ByteBuffer ByteOrder])
  (:gen-class))

(declare get-time)

(def temp-buf (ByteBuffer/allocateDirect 16))

(def s (Sphere.))

(def display-state (atom {:mode nil
                          :max-fps 60}))
(def render-state (atom {:last-frame nil
                         :last-fps (float 0)
                         :fps (float 0)}))
(def world-state (atom {:x 400
                        :y 300
                        :rotation 0}))

(defn get-time []
  (/ (* (Sys/getTime) 1000)
        (Sys/getTimerResolution)))

(defn update-fps []
  (let [time (get-time)]
    (when (> (- time (@render-state :last-fps))
             1000)
      (Display/setTitle (format "FPS: %s" (@render-state :fps)))
      (swap! render-state
             assoc :fps (float 0) :last-fps time)))
  (swap! render-state assoc :fps (float (+ (@render-state :fps)
                                           1))))

(defn update [delta]
  (swap! world-state assoc :rotation (+ (:rotation @world-state)
                                        (* (float 0.15) delta)))

  (update-fps))

(defn init-gl []
  (GL11/glClearColor 0.1 0.1 0.1 0.0) ; background
  (GL11/glClearDepth 1)
  (GL11/glDepthFunc GL11/GL_LEQUAL)
  (GL11/glHint GL11/GL_PERSPECTIVE_CORRECTION_HINT GL11/GL_NICEST)
  (GL11/glShadeModel GL11/GL_SMOOTH)
  (GL11/glEnable GL11/GL_DEPTH_TEST)

  ;; fovy, aspect ratio, zNear, zFar
  (let [width (.getWidth (:mode @display-state))
        height (.getHeight (:mode @display-state))
        aspect-ratio (float (/ width height))]
    ;; select projection matrix (controls perspective)
    (GL11/glMatrixMode GL11/GL_PROJECTION)
    (GL11/glLoadIdentity)
    (GLU/gluPerspective 45 aspect-ratio 0.1 100)

    (GL11/glMatrixMode GL11/GL_MODELVIEW)
    (GL11/glLoadIdentity)
    (GL11/glViewport 0 0 width height))

  (GL11/glMaterial GL11/GL_FRONT GL11/GL_SPECULAR (-> temp-buf
                                                      .clear
                                                      .asFloatBuffer
                                                      (.put (float-array [1 1 1 1]))
                                                      .flip))
  (GL11/glMaterial GL11/GL_FRONT GL11/GL_AMBIENT (-> temp-buf
                                                     .clear
                                                     .asFloatBuffer
                                                     (.put (float-array [1 1 1 1]))
                                                     .flip))
  (GL11/glMaterial GL11/GL_FRONT GL11/GL_DIFFUSE (-> temp-buf
                                                     .clear
                                                     .asFloatBuffer
                                                     (.put (float-array [1 1 1 1]))
                                                     .flip))

  (GL11/glMaterialf GL11/GL_FRONT_AND_BACK GL11/GL_SHININESS 10)

  ;; setup light
  (let [ambient-light (float-array [0.5 0.5 0.5 0])
        diffuse-light (float-array [0 1.0 0 0])]
    (GL11/glLight GL11/GL_LIGHT0 GL11/GL_AMBIENT (-> temp-buf
                                                     .clear
                                                     .asFloatBuffer
                                                     (.put ambient-light)
                                                     .flip))
    (GL11/glLight GL11/GL_LIGHT0 GL11/GL_DIFFUSE (-> temp-buf .clear
                                                     .asFloatBuffer
                                                     (.put diffuse-light)
                                                     .flip))
    (GL11/glLight GL11/GL_LIGHT0 GL11/GL_POSITION (-> temp-buf
                                                      .clear
                                                      .asFloatBuffer
                                                      (.put (float-array [0 -1 0 0]))
                                                      .flip)))

  (GL11/glEnable GL11/GL_LIGHTING)
  (GL11/glEnable GL11/GL_LIGHT0)

  (swap! render-state assoc :last-frame (get-time)))

(defn render []
  ;; Clear The Screen And The Depth Buffer
  (GL11/glClear (bit-or GL11/GL_COLOR_BUFFER_BIT GL11/GL_DEPTH_BUFFER_BIT))

  ;; setup camera
  (GL11/glLoadIdentity)
  (GL11/glTranslatef (float 0) (float 0) (float -3))
  (GL11/glRotatef 30 1 0 0)

  (GL11/glPushMatrix)
  (GL11/glTranslatef 0 1 0)
  (.draw s 0.1 50 50)
  (GL11/glPopMatrix))

(defn -main []
  (let [display-mode (first (filter #(and
                                      (== (.getWidth %) 800)
                                      (== (.getHeight %) 600)
                                      (== (.getBitsPerPixel %) 32))
                                    (Display/getAvailableDisplayModes)))]
    (swap! display-state assoc :mode display-mode)

    (Display/setDisplayMode display-mode)
    (Display/setTitle "Test")
    (Display/create))

  (init-gl)

  (while (not (Display/isCloseRequested))
    (let [time (get-time)
          last-frame (@render-state :last-frame)]
      (swap! render-state assoc :last-frame time)
      (update (int (- time last-frame))))
    (render)
    (Display/update)
    (Display/sync (@display-state :max-fps)))

  (Display/destroy)
  (System/exit 0)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T03:54:16.473

在这种情况下，设置and调用 中`ByteBuffer`使用的顺序可以解决问题。`glLight``glMaterial`

```
// Java
ByteBuffer buf = ByteBuffer.allocateDirect(16);
buf.order(ByteOrder.nativeOrder);

;; Clojure
(def buf (doto (ByteBuffer/allocateDirect 16)
           (.order (ByteOrder/nativeOrder))) 
```

# regex - 规则确定性有限自动机

> ID：10748276
> 
> 赞同：0
> 
> 时间：2012-05-25T03:54:25.550
> 
> 标签：regex

正则表达式 (ab)* (ba)* 可以包含诸如“aabbaaba”之类的字符串，还是*a*总是不会出现在*b*之间并且 (ab)* 表示任意数量的 *a*和任意数量的*b*或相等的数量*a*和*b*的。谢谢回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:01:27.730

不包括中间的空格，即任意数量的“ab”字符串后跟任意数量的“ba”字符串。所以它会匹配像`abababbababa`. 有了空间，它就会匹配`ababab bababa`。

您可以尝试使用正则表达式的在线测试器，例如这个。您可以“现场”试用您的 RegEx

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

很适合做实验。

# mysql - 访问mysql使用选定行获取相邻记录？

> ID：10748278
> 
> 赞同：0
> 
> 时间：2012-05-25T03:54:34.950
> 
> 标签：mysql, sql, select

我有具有以下结构的 mysql 表。所有记录都是静态的，仅用于读取，并且是从 CSV 导入的，因此按照我创建它们的顺序，所有年、月、日的顺序都是正确的。（不，此表中的 ID 列，因为我只按年、月和日访问数据）

```
mysql table 'daily'
year month day  data
1990  01    01  xxxxxxxxxxxxx
1990  01    02  eeeeeeeeeeeee
1990  01    03  rrrrrrrrrrrrr
1990  01    04  ttttttttttttt
.
.
. 
```

现在，我可以通过简单的 select 语句访问记录，如下所示

```
select * where year=1990 and month=1 and day=03 limit 1 
```

但是如何选择查询行 + 3 或任意数量的相邻行（在查询行之前或之后）？如果有更好的解决方案，我不想使用 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:59:31.163

我会考虑使用`DATE`类型而不是单独的列来表示年、月和日。然后你可以使用`DATEADD`和相关的功能来找到你想要的那一天。

[http://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# codeigniter - 重定向时缺少登录页面

> ID：10748282
> 
> 赞同：0
> 
> 时间：2012-05-25T03:55:58.753
> 
> 标签：codeigniter

我是这样创建codeigniter控制器的：

```
function Home() {
    parent::Controller();
    if(!$this->session->userdata('id')) 
        redirect ('login');
    $this->load->model('Home_Model');
} 
```

但是当我尝试访问该页面时，现在显示重定向页面。只是显示 404 未找到，但我在控制器上创建 login.php 并在模型上查看 home_model.php。

该代码有什么问题以及如何解决？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:05:32.140

由于这行: `parent::Controller()`，我假设您正在使用 CodeIgniter 1。由于您正在构建类似`home`and的页面`login`，我假设您正在开始构建一个新网站。如果我的假设是正确的，我建议您使用最新的 CodeIgniter（目前为 v2.1.0，*需要 PHP 5.1.6 或更新版本*）。您可以在 CodeIgniter 主页上获取一份副本。

首先，我认为您应该检查您的错误报告级别。它应该类似于`error_reporting(E_ALL);`调试。如果还没有，请打开它并再次运行代码。也许在那之后你会得到自己的答案:)

之后，您应该为您的构造函数尝试以下代码，以检查您的家庭控制器进程是否符合您的预期。

```
function Home()
{
    parent::Controller();
    echo 'Home Class Initialized';
} 
```

1.  它至少应该显示 404 页面。如果它没有打印出任何东西，那么我们需要更多信息。也许您应该打开日志记录并分析您的日志文件：查找`/application/config/config.php`：`$config['log_threshold'] = 2;`

2.  如果它打印出 'Home Class Initialized' 后跟 404 消息：请检查您的控制器是否有类似的东西：

    ```
    public function index()
    {
        echo 'Invoke default method';
    } 
    ```

    如果还没有，请添加一个。您可能还想看看在[这里使用您自己的默认方法](http://codeigniter.com/user_guide/general/controllers.html#remapping)

    如果它仍然是 404，那么对不起，我不知道。也许您应该发布更多代码。

3.  如果它只打印出'Home Class Initialized'：很好。现在试试这个

    ```
    function Home()
    {
        parent::Controller();
        if ( ! $this->session->userdata('id'))
        {
            echo 'Redirecting to login page';
            //redirect ('login');
        }
        $this->load->model('Home_Model');
    } 
    ```

    如果打印出来`Redirecting to login page`，现在是时候取消注释`//redirect ('login');`并检查登录页面了。按照与步骤 1 和 2 相同的路径。如果没有，请检查您的会话数据：`var_dump($this->session->userdata('id')`。[您可以在此处](http://hyperpolyglot.org/scripting#falsehoods)了解有关 PHP 虚假的更多信息

4.  毕竟，如果仍然失败，请考虑使用`__construct()`PHP 5

    ```
    function __construct()
    {
        parent::__construct();
        if ( ! $this->session->userdata('id'))
        {
            redirect ('login');
        }
        $this->load->model('Home_Model');
    } 
    ```

*其他*：如果你使用这个`$this->load->model('Home_Model');`，我认为你将不得不像这样调用 home_model`$this->Home_Model->foo();`否则会出现错误访问 NULL

# ruby-on-rails - 搜索逻辑限制

> ID：10748283
> 
> 赞同：0
> 
> 时间：2012-05-25T03:56:09.263
> 
> 标签：ruby-on-rails

如何通过 searchlogic 的搜索限制....

```
user = User.name_like("John") 
```

...并将搜索限制为 50 个结果？

我有一个用户将近 3,000 多个，并且基于 New Relic（应用程序跟踪）它在服务器中占用了太多内存。我想将搜索限制为 50，以免搜索所有用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:11:55.853

```
user = User.name_like("John").limit(50) 
```

或利用其他宝石，如 will_paginate？（即返回包含 50 个结果的第一页）

# php - PHP数组中的动态内容

> ID：10748289
> 
> 赞同：0
> 
> 时间：2012-05-25T03:56:37.297
> 
> 标签：php, arrays, explode

这应该是一个快速的。

我正在提取一个 id 列表，我需要将它们放在一个数组中。

这是我获取 id 列表的 php 代码

```
$get_archives = mysql_query("SELECT * FROM archive WHERE user = '$email'  ");
while ($row = mysql_fetch_assoc($get_archives)) {
$insta_id = $row['insta_id'];

    $insta_id = "'" . $insta_id."',";

echo $insta_id;

    }; 
```

这个 echo 是一个 id 的列表，看起来像这样：'146176036','136514942',

现在我想将该列表放入一个数组中。所以我尝试了这样的事情：

```
 $y = array($insta_id); 
```

然而，这是行不通的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:58:03.773

```
$y = array();
while ($row = mysql_fetch_assoc($get_archives)) {
  $y[] = $row['insta_id'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:57:59.467

```
$myArray = array();

    $get_archives = mysql_query("SELECT * FROM archive WHERE user = '$email'  ");
    while ($row = mysql_fetch_assoc($get_archives)) {
    $insta_id = $row['insta_id'];

        $insta_id = "'" . $insta_id."',";

        $myArray[] =$insta_id;

        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T03:58:13.227

你的意思是这样的：？

```
$insta_id=array();
while ($row = mysql_fetch_assoc($get_archives)) {
$insta_id[] = $row['insta_id'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T03:59:09.887

创建一个数组，并将值[推](http://www.php.net/manual/en/function.array-push.php)入其中：

```
$values = array();

while ( $row = mysql_fetch_assoc( $get_archives ) ) {
  array_push( $values, $row['insta_id'] );
} 
```

# haskell - Parsec 超前处理整数

> ID：10748291
> 
> 赞同：1
> 
> 时间：2012-05-25T03:56:46.830
> 
> 标签：haskell, parsec

我正在使用 Parsec 解析器来处理有点复杂的数据文件格式（我无法控制这种格式）。

我已经取得了很大的进步，但目前我坚持以下几点。

我需要能够像这样解析一行：

```
4  0.123  1.452  0.667  *  3.460  149 - - 
```

语义上，`4`是一个nodeNum，`Floats`和`*`是负对数概率（因此，`*`表示概率为零的负对数）。和`149`减号真的很垃圾，我可以丢弃，但我至少需要确保它们不会破坏解析器。

这是我到目前为止所拥有的：

这处理了我提到的“垃圾”。它可能更简单，但它本身就可以工作。

```
 emAnnotationSet = (,,) <$> p_int  <*>
                           (reqSpaces *> char '-') <*>
                           (reqSpaces *> char '-') 
```

该`nodeNum`行的开头由另一个有效的解析器处理，我不需要进入。

问题在于尝试`p_logProb`从行中挑选出所有 s ，而不消耗 . 开头的数字`emAnnotationSet`。

解析器`p_logProb`看起来像这样：

```
p_logProb = liftA mkScore (lp <?> "logProb")
          where lp = try dub <|> string "*"
                dub = (++) <$> ((++) <$> many1 digit <*> string ".") <*> many1 digit 
```

最后，我尝试将`logProb`条目与尾随`emAnnotationSet`（以整数开头）分开，如下所示：

```
hmmMatchEmissions     = optSpaces *> (V.fromList <$> sepBy p_logProb reqSpaces) 
                      <* optSpaces <* emAnnotationSet <* eol 
                      <?> "matchEmissions" 
```

因此，`p_logProb`只会在以数字开头、包含小数点、然后有更多数字的浮点数上成功（文件格式遵守此限制）。

我希望定义`try`中的 the`p_logProb`可以避免使用前导数字，如果它不解析小数和其余部分，但这似乎不起作用；Parsec 仍然抱怨它在以下整数的数字之后看到了一个意外的空格`emAnnotationSet`：

```
Left "hmmNode" (line 1, column 196):
unexpected " "
expecting logProb 
```

第 196 列对应于减号之前的整数之后的空格，所以我很清楚问题在于`p_logProb`解析器正在使用整数。我该如何解决这个问题，以便`p_logProb`解析器正确使用前瞻，从而将输入留给`emAnnotationSet`解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:40:06.553

终止概率的整数不能被误认为是概率，因为它不包含小数点。`lexeme`组合器将解析器转换为跳过尾随空格的解析器。

```
import Text.Parsec
import Text.Parsec.String
import Data.Char
import Control.Applicative ( (<$>), (<*>), (<$), (<*), (*>) )

fractional :: Fractional a => Parser a
fractional = try $ do
  n <- fromIntegral <$> decimal
  char '.'
  f <- foldr (\d f -> (f + fromIntegral (digitToInt d))/10.0) 0.0 <$> many1 digit  
  return $ n + f

decimal :: Parser Int
decimal = foldl (\n d -> 10 * n + digitToInt d) 0 <$> many1 digit

lexeme :: Parser a -> Parser a
lexeme p = p <* skipMany (char ' ')

data Row = Row Int [Maybe Double]
           deriving ( Show )

probability :: Fractional a => Parser (Maybe a)
probability = (Just <$> fractional) <|> (Nothing <$ char '*')

junk = lexeme decimal <* count 2 (lexeme $ char '-')

row :: Parser Row
row = Row <$> lexeme decimal <*> many1 (lexeme probability) <* junk

rows :: Parser [Row]
rows = spaces *> sepEndBy row (lexeme newline) <* eof 
```

**用法：**

```
*Main> parseTest rows "4 0.123 1.234 2.345 149 - -\n5 0.123 * 2.345 149 - -" 
[Row 4 [Just 0.123,Just 1.234,Just 2.345],Row 5 [Just 0.123,Nothing,Just 2.345]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:58:31.573

我不太确定你的问题。`Text.Parsec.Token1`但是，要根据您的描述解析给出的行，使用现有的词法分析器定义 in并将它们连接在一起会容易得多。

下面的代码将该行解析为 Line 数据类型，如果需要，您可以从那里进一步处理它。它不是在解析之前尝试过滤掉`-`和 整数，而是使用一个`parseEntry`解析器，`Just Double`如果它是浮点值，则返回 a ，`Just 0`对于`*`，`Nothing`对于整数和破折号。然后使用非常简单地过滤`catMaybes`。

这是代码：

```
module Test where
import Text.Parsec
import qualified Text.Parsec.Token as P
import Text.Parsec.Language (haskellDef)
import Control.Applicative ((<$>))
import Data.Maybe (catMaybes)
lexer = P.makeTokenParser haskellDef

parseFloat = P.float lexer
parseInteger = P.natural lexer 

whiteSpace = P.whiteSpace lexer

parseEntry = try (Just <$> parseFloat)
             <|> try (const (Just 0) <$> (char '*' >> whiteSpace))
             <|> try (const Nothing <$> (char '-' >> whiteSpace))
             <|> (const Nothing <$> parseInteger)

data Line = Line {
      lineNodeNum :: Integer
    , negativeLogProbabilities :: [Double]
    } deriving (Show)

parseLine = do
  nodeNum <- parseInteger
  whiteSpace
  probabilities <- catMaybes <$> many1 parseEntry
  return $ Line { lineNodeNum = nodeNum, negativeLogProbabilities = probabilities } 
```

示例用法：

```
*Test> parseTest parseLine "4  0.123  1.452  0.667  *  3.460  149 - -"
Line {lineNodeNum = 4, negativeLogProbabilities = [0.123,1.452,0.667,0.0,3.46]} 
```

唯一可能（或可能不是）问题的问题是它将解析`*-`为两个不同的令牌，而不是解析失败。例如

```
*Test> parseTest parseLine "4  0.123  1.452  0.667  *  3.460  149 - -*"
Line {lineNodeNum = 4, negativeLogProbabilities = [0.123,1.452,0.667,0.0,3.46,0.0]} 
```

`0.0`请注意日志概率末尾的额外内容。

# algorithm - 最小化坐标间距离方差的算法

> ID：10748293
> 
> 赞同：5
> 
> 时间：2012-05-25T03:57:01.510
> 
> 标签：algorithm

我一直在寻找一种算法，可以优化两个坐标列表之间的距离并选择哪个坐标应该放在一起。

假设我有清单 1：

```
205|200
220|210
200|220
200|180 
```

清单 2：

```
210|200
207|190
230|200
234|190 
```

坐标之间的计算距离：

```
205|200 to 210|200 == 5.00
205|200 to 207|190 == 10.20
205|200 to 230|200 == 25.00
205|200 to 234|190 == 30.68

220|210 to 210|200 == 14.14
220|210 to 207|190 == 23.85
220|210 to 230|200 == 14.14
220|210 to 234|190 == 24.41

200|220 to 210|200 == 22.36
200|220 to 207|190 == 30.81
200|220 to 230|200 == 36.06
200|220 to 234|190 == 45.34

200|180 to 210|200 == 22.36
200|180 to 207|190 == 12.21
200|180 to 230|200 == 36.06
200|180 to 234|190 == 35.44 
```

该算法将选择：

```
205|200 to 230|200 == 25.00
220|210 to 207|190 == 23.85
200|220 to 210|200 == 22.36
200|180 to 234|190 == 35.44 
```

算法会选择这些数字，因为它们将是距离之间差异最小的组。条件：

1.  坐标只能用于每个列表中的坐标
2.  如果 List 1 或 List2 大于它仍然只使用每个坐标一次，但它会尝试获得最小的距离方差并且对未使用的坐标不做任何事情。

如果您需要更多说明，请询问。

PS我看过匈牙利算法，它似乎可以完成这项工作，但并不完全符合我的预期。匈牙利算法只会尝试使与所有坐标的距离最小，这可能意味着最小的方差，但并非每次都因为方差比最小距离优化更重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:09:07.170

[ICP算法](http://en.wikipedia.org/wiki/Iterative_closest_point%20algorithm)值得一看。它旨在解决类似的问题

# jquery - 将类添加到jQuery中的先前选择

> ID：10748296
> 
> 赞同：0
> 
> 时间：2012-05-25T03:57:28.970
> 
> 标签：jquery

我有3个项目..

div1 - div2 -div3

默认情况下，div1 具有“current”类。一旦在表单中单击，.current 将从前一个 div 中删除并添加到 div2（当前 div）。

```
 function tab_selection(step)
    {
        $(step).parent().find('.current').removeClass('current');
        $(step).addClass('current');
    } 
```

如何在前面的步骤中添加“完成”类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:59:29.607

很难说最好的解决方案是什么，因为您没有发布 html 或您的代码流是什么，但根据您的评论，您可以尝试`prevAll`.

```
function tab_selection(step)
{
    $(step).prevAll('div').addClass('finished');
    $(step).parent().find('.current').removeClass('current');
    $(step).addClass('current');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:16:40.503

如果您一次向前推进一个元素，并且每当您离开一个元素时都将“完成”添加为一个类，那么您可以简单地处理`.current`每次迭代接下来发生的任何事情：

```
$(".current")
    .removeClass("current")
    .addClass("finished")
.next()
    .addClass("current"); 
```

小提琴：http: [//jsfiddle.net/4VwA5/](http://jsfiddle.net/4VwA5/)

# php - 插入表格不起作用

> ID：10748300
> 
> 赞同：-4
> 
> 时间：2012-05-25T03:57:44.133
> 
> 标签：php, mysql, insert

我正在尝试将数据插入数据库中的两个表中，两个查询之一即使它们相同，也可以工作，只是更改了列名和数据库名。

这是插入的代码，...

```
$requesttitle = $_POST["requesttitle"];
                $requesturl = $_POST["requesturl"];
                $requestcap = $_POST["requestcap"];
                $requestdestype = $_POST["requestdestype"];
                $requestdbtype = $_POST['requestdbtype'];
                $accountid=$_SESSION['username'];
                $deptname = $_POST['deptname'];
                $contactname = $_POST['contactname'];
                $contactnum = $_POST['contactnum'];
                $contactemail = $_POST['contactemail'];
                $startdate = $_POST['startdate'];
                $enddate = $_POST['enddate'];

                if(trim($requesttitle)=="") return "<p>Error in submitting request. Request Title is empty!</p>";
                if(trim($requesturl)=="") return "<p>Error in submitting request. Request URL is empty!</p>";
                if(trim($requestcap)=="") return "<p>Error in submitting request. Storage Capacity is empty!</p>";
                if(trim($requestdestype)=="") return "<p>Error in submitting request. Design Type is empty!</p>";
                if(trim($requestdbtype)=="") return "<p>Error in submitting request. Database Type is empty!</p>";
                if(trim($deptname)=="") return "<p>Error in submitting request. Requesting Department is empty!</p>";
                if(trim($contactname)=="") return "<p>Error in submitting request. Contact Person is empty!</p>";
                if(trim($contactnum)=="") return "<p>Error in submitting request. Contact Number is empty!</p>";
                if(trim($contactemail)=="") return "<p>Error in submitting request. Contact E-mail is empty!</p>";
                if(trim($startdate)=="") return "<p>Error in submitting request. Contact E-mail is empty!</p>";
                if(trim($enddate)=="") return "<p>Error in submitting request. Contact E-mail is empty!</p>";

                //$sql = "insert into webhostrequest (requesttitle, requesturl, requestcap, requestdestype, requestdbtype, accountid, deptname, contactname, contactnum, contactemail, startdate, enddate, recentact) values ('$requesttitle', '$requesturl', '$requestcap', '$requestdestype', '$requestdbtype', '$accountid', '$deptname', '$contactname', '$contactnum', '$contactemail', '$startdate', '$enddate', now())";
                //$result = mysql_query($sql) or die ("Error in submitting request. $sql".mysql_error());

                $sql2 = "insert into req_servicerequest (title, url, memory, design, database, accountid, deptname, contactname, contactnum, contactemail, startdate, enddate, recentact) values ('$requesttitle', '$requesturl', '$requestcap', '$requestdestype', '$requestdbtype', '$accountid', '$deptname', '$contactname', '$contactnum', '$contactemail', '$startdate', '$enddate', now())";
                $result2 = mysql_query($sql2) or die ("Error in submitting request. $sql2".mysql_error()); 
```

这是错误，...

> 提交请求时出错。插入 req_servicerequest（标题、url、内存、设计、数据库、accountid、deptname、contactname、contactnum、contactemail、startdate、enddate、recentact）值（'A'、'http://www.kimbra.org/'、' 500'、'HTML/XHML/XML'、'DB2'、'test'、'UST - Steps'、'james'、'09151273507'、'test@reply.mail'、'2012-04-10'、' 2012-05-24', 'now()') 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“数据库、帐户 ID、部门名称、联系人名称、联系人编号、联系人电子邮件、开始日期”附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:01:21.897

database 是 MySQL 中的一个关键字。像这样转义它：`database`，或者更好的是，重命名你的列。

# ssl - 如何配置 PlayFramework2 以支持 SSL？

> ID：10748305
> 
> 赞同：18
> 
> 时间：2012-05-25T03:58:00.277
> 
> 标签：ssl, playframework, playframework-2.0

我已经阅读 [了如何配置 playframework 服务器以支持 ssl](https://stackoverflow.com/questions/5039012/how-to-configure-playframework-server-to-support-ssl) ，我也尝试关注[http://www.playframework.org/documentation/1.1.1/releasenotes-1.1#https](http://www.playframework.org/documentation/1.1.1/releasenotes-1.1#https)但它对我不起作用

非常感谢~

我阅读了 Play1 的文档，因为我找不到更多关于 https 的 Play2 更新信息。

在 application.conf 中，我添加了以下几行：

```
https.port=9443
certificate.key.file=conf/host.key
certificate.file=conf/host.cert 
```

我`run`在播放控制台中输入，并尝试在`https://localhost:9443`浏览器超时时访问服务器，而控制台输出中没有任何记录

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-25T17:08:23.190

它不适用于您采用的方法。您将 1.x 分支的发行说明误认为 2.x 分支。

**在 1.x 分支**中，这是可能的。发行说明就足够了，它们对我有用。

**对于 2.1+ 分支**，请参考@Christina 的评论。2.1 中添加了支持，讨论线程提供了详细信息。

引用詹姆斯罗珀的回应

> 在开发模式下，这很容易，只需：
> 
> JAVA_OPTS=-Dhttps.port=9443 播放运行
> 
> Play 将生成一个私钥和自签名证书，显然您的浏览器会以红色大警告阻止。它将为 Play 的每次后续运行重用生成的自签名证书，因此您应该只收到一次浏览器错误。显然，这个自签名证书可能不是您在生产中想要的。还需要注意的是，自签名证书生成仅适用于使用 sun 安全库（例如 Oracle 和 OpenJDK，但最值得注意的是 IBM J9）的 JVM。在不使用这些的 JVM 上，当它尝试生成证书时，您将收到 NoClassDefFoundError。
> 
> 在 prod 中（并且此配置也适用于 dev），您配置它的方式与您通常在 Java 中通过系统属性配置 SSL 的方式非常相似。这是一个摘要：
> 
> **https.port** - 应该使用的端口
> 
> **https.keyStore** - 包含私钥和证书的密钥库的路径，如果未提供，则会为您生成一个密钥库
> 
> **https.keyStoreType** - 密钥存储类型，默认为“JKS”
> 
> **https.keyStorePassword** - 密码，默认为 ""
> 
> **https.keyStoreAlgorithm** - 密钥存储算法，默认为平台默认算法
> 
> **https.trustStore** - 此功能尚未完全实现，目前无论您是否为此提供值，它都将始终使用 JDK 信任库来验证客户端证书（您当然可以自己配置），除非您指定“ noCA”，在这种情况下，它将使用一个信任存储，该信任存储信任所有没有验证或验证的证书，这对于使用 webid 客户端证书验证很有用。

**对于 2.0 分支**，您必须在播放前放置另一台服务器，即 apache/nginx/other 监听 https 并转发请求以在 http 中播放。

设置前端服务器的说明可在[http://www.playframework.org/documentation/2.0.1/HTTPServer获得](http://www.playframework.org/documentation/2.0.1/HTTPServer)

因此，在端口上运行您的播放服务器。让 apache 将请求从 domain.com 转发到 127.0.0.1:9443。

**示例 Apache 配置**

```
 <VirtualHost *:443>

  ServerAdmin webmaster@localhost
  ServerName example.com
  ServerAlias *.example.com

  ErrorLog ${APACHE_LOG_DIR}/error.log

  # Possible values include: debug, info, notice, warn, error, crit,
  # alert, emerg.
  LogLevel warn
  CustomLog ${APACHE_LOG_DIR}/ssl_access.log combined
  ProxyPreserveHost On
#  ProxyPass  /excluded !
  ProxyPass / http://127.0.0.1:9000/
  ProxyPassReverse / http://127.0.0.1:9000/

  #   SSL Engine Switch:
  #   Enable/Disable SSL for this virtual host.
  SSLEngine on

  #   A self-signed (snakeoil) certificate can be created by installing
  #   the ssl-cert package. See
  #   /usr/share/doc/apache2.2-common/README.Debian.gz for more info.
  #   If both key and certificate are stored in the same file, only the
  #   SSLCertificateFile directive is needed.
  SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
  SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

  #   Certificate Authority (CA):
  #   Set the CA certificate verification path where to find CA
  #   certificates for client authentication or alternatively one
  <FilesMatch "\.(cgi|shtml|phtml|php)$">
    SSLOptions +StdEnvVars
  </FilesMatch>
  <Directory /usr/lib/cgi-bin>
    SSLOptions +StdEnvVars
  </Directory>

  BrowserMatch "MSIE [2-6]" \
    nokeepalive ssl-unclean-shutdown \
    downgrade-1.0 force-response-1.0
  # MSIE 7 and newer should be able to use keepalive
  BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown
</VirtualHost> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-18T01:25:02.827

设置当前版本 Play (2.2.x) 的文档在这里： [http ://www.playframework.com/documentation/2.2.x/ConfiguringHttps](http://www.playframework.com/documentation/2.2.x/ConfiguringHttps)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-25T15:57:49.667

现在您似乎需要一个反向代理来为您管理 SSL。我找到了[一张票](https://play.lighthouseapp.com/projects/82401-play-20/tickets/215-tls-https-support-in-play-20)和一个讨论这个的[线程。](https://groups.google.com/d/topic/play-framework/DvD8iqmIwE4/discussion)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-22T18:18:19.120

这对于本地测试 https 很有用：

```
activator "run -Dhttps.port=9005" 
```

然后将浏览器指向`https://localhost:9005`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T15:25:21.527

我们做的一件事是使用 AWS ELB 来处理我们的 SSL，然后使用播放过滤器设置 SSL 转发（HTTP -> HTTPS）。主要好处是减轻了服务器的 SSL 负载，并且您不必在游戏前运行 Apache 或 Nginx（正如一些解决方案指出的那样）。

你可以在这里看到我的答案： [https ://stackoverflow.com/a/23646948/690164](https://stackoverflow.com/a/23646948/690164)

我还在我的博客中写了更多关于它的内容： [http ://www.mentful.com/2014/05/25/play-framework-filter-for-aws-elastic-load-balancer-forward-http-to- https/](http://www.mentful.com/2014/05/25/play-framework-filter-for-aws-elastic-load-balancer-forward-http-to-https/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-25T16:39:27.557

我正在使用securesocial 3.0.3M。放

```
securesocial.ssl = true 
```

在securesocial.conf中，您应该一切顺利。然后重启你的 sbt 或激活器

```
JAVA_OPTS=-Dhttps.port=9443 activator run 
```

转到本地主机：9443

请享用

# jquery - 将 HTML 元素的集合存储在变量中以供以后使用

> ID：10748323
> 
> 赞同：3
> 
> 时间：2012-05-25T04:00:18.433
> 
> 标签：jquery

这是我遇到的一个 jQuery 问题，并且总是必须使用我不引以为豪的方法来解决。

我正在尝试存储一组元素以供以后评估。问题是每次我尝试访问并对其应用任何功能时，错误控制台都会报告它不是一个功能。我确信我对 jQuery 的工作方式有误解。尽管如此，我想指出正确的方向。这是我正在使用的代码：

```
var products = $('ul.products');
var productLists = []
$.each(products, function (i) {
    productLists[i] = products[i].children('li');
    console.log(productLists[i]);
}); 
```

这是我得到的错误：

```
Uncaught TypeError: Property 'children' of object #<HTMLUListElement> is not a function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T04:03:25.907

您正在尝试从 HTMLElement 中调用 jQuery 方法。尝试将元素引用包装在一个新的 jQuery 对象中：

```
productLists[i] = $(products[i]).children('li'); 
```

在`$.each`中，您可以使用关键字`this`来引用当前正在处理的项目。`products[i]`因此，您可以轻松地说，而不是打电话`this`：

```
$.each( products, function() {
  productsList.push( $(this).children("li") );
}); 
```

另请注意，当您进行选择时，jQuery 已经存储了对元素的引用集合：

```
var productList = $("ul.products li"); // All list items in ul.products 
```

然后，您可以稍后根据需要操作所有这些。如果您需要自己的副本，以确保它们在您以后想要篡改它们时仍然存在，您可以使用`.clone`：

```
var productList = $("ul.products li").clone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:51:07.397

您可以直接在 jquery 集合对象上使用 each 方法。所以做同样事情的另一种方法可能是：

```
$('ul.products').each(function(){
  productsList.push( $(this).children("li") );
}) 
```

虽然选择问题，但在处理 jQuery 集合时，我总是更喜欢这种方法。

# android - 您可以在 /assets 文件夹中放置的最大文件数？

> ID：10748325
> 
> 赞同：0
> 
> 时间：2012-05-25T04:00:58.370
> 
> 标签：android

有谁知道可以在 /assets 文件夹中分发的最大文件数？我的每个文件都非常小，但我想知道可以放入其中的实际文件数是否有限制（由于 fat32 限制等）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:18:45.590

如果 /assets 中的文件数量有限制，则它非常大。对于每种类型的资源（可绘制、布局、字符串、数组等），您可以拥有的资产数量是有限制的——大约是 2 ^(16)左右。否则，我建议您将文件放在 res/raw 中。

虽然您也许可以将大量文件放入 /assets，但我想知道访问时间。请记住，资产可以分层排列，这可能会加快访问速度。（免责声明：整段纯属猜测。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:23:11.700

好吧，您的应用程序以压缩文件的形式分发，大小限制为 4GB。Zip 对每个目录没有限制，但具有 32 位指针（至少是官方 zip，有 zip64 版本）现代 zip 实现应该允许每个存档最多一百万个文件......理论上，在实践中这会仅用于文件指针已用完 4GB ;)

# html - 使用 z-index 属性后设置 div 高度

> ID：10748327
> 
> 赞同：0
> 
> 时间：2012-05-25T04:00:59.797
> 
> 标签：html, css, overflow, z-index

使用 z-index 属性替换另一个 div 后如何从 div 中删除填充。

这是基本的 HTML 结构：
a) 主容器，`height:auto`
b) 应该溢出
的 div c) 溢出 div 的 div b)

将 c) div 向上移动 200px 后，我得到了空白空间。主容器具有自动高度属性，但它保持相同的大小。
我的问题是你们如何在使用位置/z-index 属性向上移动 div 后删除额外的空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:55:16.230

试试这个替换 top:-30px; 边距顶部：-30px；

[http://jsfiddle.net/NqphG/1/](http://jsfiddle.net/NqphG/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:30:46.230

您可以使用负边距而不是定位 div#c。请参阅此[演示](http://jsfiddle.net/NqphG/4/)。

负边距不会改变堆叠，但可以将 div#c 放在 div#b 上。不要忘记[边距塌陷](http://www.w3.org/TR/CSS21/box.html#collapsing-margins)的现象。

在某些情况下，就绘画而言，您可以得出相同的结论（无论您采用什么技术）。但这条路线引出了重要的 CSS 概念：

*   在div#c 占用空间**后**，通过 top|right|bottom|left 进行偏移。因此，以下元素（或在您的情况下为：div#a）以这样的方式排列，因此如果它没有首先被定位。
*   定位可以创建一个新的堆叠上下文（结合 z-index != auto）
*   相对定位的元素创建一个包含块（绝对定位的后代的参考框架）
*   相对定位或多或少有意识地用作 IE 的错误修复。

# python - yield 可以产生多个连续的生成器吗？

> ID：10748331
> 
> 赞同：13
> 
> 时间：2012-05-25T04:01:23.260
> 
> 标签：python, iterator, generator, yield

这是两个将可迭代项拆分为子列表的函数。我相信这种类型的任务被编程了很多次。`repr`我使用它们来解析由('result', 'case', 123, 4.56) 和 ('dump', ..) 等行组成的日志文件。

我想更改这些，以便它们产生迭代器而不是列表。因为列表可能会变得非常大，但我可以根据前几项决定接受或跳过它。此外，如果 iter 版本可用，我想嵌套它们，但是使用这些列表版本会通过复制部分浪费一些内存。

但是从可迭代的源中派生多个生成器对我来说并不容易，所以我寻求帮助。如果可能，我希望避免引入新课程。

另外，如果您知道这个问题的更好标题，请告诉我。

谢谢！

```
def cleave_by_mark (stream, key_fn, end_with_mark=False):
    '''[f f t][t][f f] (true) [f f][t][t f f](false)'''
    buf = []
    for item in stream:
        if key_fn(item):
            if end_with_mark: buf.append(item)
            if buf: yield buf
            buf = []
            if end_with_mark: continue
        buf.append(item)
    if buf: yield buf

def cleave_by_change (stream, key_fn):
    '''[1 1 1][2 2][3][2 2 2 2]'''
    prev = None
    buf = []
    for item in stream:
        iden = key_fn(item)
        if prev is None: prev = iden
        if prev != iden:
            yield buf
            buf = []
            prev = iden
        buf.append(item)
    if buf: yield buf 
```

* * *

# 编辑：我自己的答案

感谢大家的回答，我可以写我想要的！当然，至于“cleave_for_change”功能我也可以使用`itertools.groupby`.

```
def cleave_by_mark (stream, key_fn, end_with_mark=False):
    hand = []
    def gen ():
        key = key_fn(hand[0])
        yield hand.pop(0)
        while 1:
            if end_with_mark and key: break
            hand.append(stream.next())
            key = key_fn(hand[0])
            if (not end_with_mark) and key: break
            yield hand.pop(0)
    while 1:
        # allow StopIteration in the main loop
        if not hand: hand.append(stream.next())
        yield gen()

for cl in cleave_by_mark (iter((1,0,0,1,1,0)), lambda x:x):
    print list(cl),  # start with 1
# -> [1, 0, 0] [1] [1, 0]
for cl in cleave_by_mark (iter((0,1,0,0,1,1,0)), lambda x:x):
    print list(cl),
# -> [0] [1, 0, 0] [1] [1, 0]
for cl in cleave_by_mark (iter((1,0,0,1,1,0)), lambda x:x, True):
    print list(cl),  # end with 1
# -> [1] [0, 0, 1] [1] [0]
for cl in cleave_by_mark (iter((0,1,0,0,1,1,0)), lambda x:x, True):
    print list(cl),
# -> [0, 1] [0, 0, 1] [1] [0] 
```

/

```
def cleave_by_change (stream, key_fn):
    '''[1 1 1][2 2][3][2 2 2 2]'''
    hand = []
    def gen ():
        headkey = key_fn(hand[0])
        yield hand.pop(0)
        while 1:
            hand.append(stream.next())
            key = key_fn(hand[0])
            if key != headkey: break
            yield hand.pop(0)
    while 1:
        # allow StopIteration in the main loop
        if not hand: hand.append(stream.next())
        yield gen()

for cl in cleave_by_change (iter((1,1,1,2,2,2,3,2)), lambda x:x):
    print list(cl),
# -> [1, 1, 1] [2, 2, 2] [3] [2] 
```

**注意：**如果有人要使用这些，请务必在每个级别**耗尽发电机**，正如 Andrew 指出的那样。因为否则外部生成器生成循环将在内部生成器离开的地方重新启动，而不是下一个“块”开始的地方。

```
stream = itertools.product('abc','1234', 'ABCD')
for a in iters.cleave_by_change(stream, lambda x:x[0]):
    for b in iters.cleave_by_change(a, lambda x:x[1]):
        print b.next()
        for sink in b: pass
    for sink in a: pass

('a', '1', 'A')
('b', '1', 'A')
('c', '1', 'A') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T04:21:48.677

亚当的回答很好。这是以防万一您对如何手动操作感到好奇：

```
def cleave_by_change(stream):
    def generator():
        head = stream[0]
        while stream and stream[0] == head:
            yield stream.pop(0)
    while stream:
        yield generator()

for g in cleave_by_change([1,1,1,2,2,3,2,2,2,2]):
    print list(g) 
```

这使：

```
[1, 1, 1]
[2, 2]
[3]
[2, 2, 2, 2] 
```

（以前的版本需要 hack，或者在 python 3 中，`nonlocal`因为我分配到`stream`其中，默认情况下`generator()`（第二个变量也称为）`stream`本地`generator()`- 归功于评论中的 gnibbler）。

请注意，这种方法很危险——如果你不“消耗”返回的生成器，那么你会得到越来越多的东西，因为流并没有变得更小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T04:19:29.577

对于您的第二个功能，您可以使用`itertools.groupby`它来相当容易地完成此操作。

这是一个替代实现，现在产生生成器而不是列表：

```
from itertools import groupby

def cleave_by_change2(stream, key_fn):
    return (group for key, group in groupby(stream, key_fn)) 
```

这是它的实际操作（一路上自由打印，所以你可以看到发生了什么）：

```
main_gen = cleave_by_change2([1,1,1,2,2,3,2,2,2,2], lambda x: x)

print main_gen

for sub_gen in main_gen:
    print sub_gen
    print list(sub_gen) 
```

产生：

```
<generator object <genexpr> at 0x7f17c7727e60>
<itertools._grouper object at 0x7f17c77247d0>
[1, 1, 1]
<itertools._grouper object at 0x7f17c7724850>
[2, 2]
<itertools._grouper object at 0x7f17c77247d0>
[3]
<itertools._grouper object at 0x7f17c7724850>
[2, 2, 2, 2] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T04:33:48.737

我实现了我所描述的：

> 如果您想要在返回甚至构建列表之前拒绝列表，请通过为可能的函数提供过滤器参数。当此过滤器拒绝列表前缀时，该函数将丢弃当前输出列表并跳过附加到输出列表，直到下一个组开始。

```
def cleave_by_change (stream, key_fn, filter=None):
    '''[1 1 1][2 2][3][2 2 2 2]'''
    S = object()
    skip = False
    prev = S
    buf = []
    for item in stream:
        iden = key_fn(item)
        if prev is S:
           prev = iden
        if prev != iden:
            if not skip:
                yield buf
            buf = []
            prev = iden
            skip = False
        if not skip and filter is not None:
           skip = not filter(item)
        if not skip:
           buf.append(item)
    if buf: yield buf

print list(cleave_by_change([1, 1, 1, 2, 2, 3, 2, 2, 2, 2], lambda a: a, lambda i: i != 2))
# => [[1, 1, 1], [3]]
print list(cleave_by_change([1, 1, 1, 2, 2, 3, 2, 2, 2, 2], lambda a: a, lambda i: i == 2))
# => [[2, 2], [2, 2, 2, 2]] 
```

# python - 如何在 web2py 中设置简单的表单对齐方式？

> ID：10748332
> 
> 赞同：0
> 
> 时间：2012-05-25T04:01:23.643
> 
> 标签：python, forms, web, web2py

我在 web2py 中使用简单的表单。在控制器中，我创建了一个这样的表单：

```
form=FORM(DIV(INPUT(_id='itemId',_name='itemId',_value='102737069',requires=[IS_NOT_EMPTY("please input correct itemId"),IS_LENGTH(maxsize=12)]), INPUT(_type='submit',_value='search_key',_name='search'), INPUT(_type='submit',_value="random_key",_name='random'))) 
```

在相应的 html 中，表单嵌入在`div`标签中，我希望表单居中对齐。怎么设置？谢谢。

**编辑：** 这是 html 代码。现在我只能使用两个
来将表格对齐到大约中心。我是 CSS 新手。

```
<div class="top">
<div class="header_left">
      <div class="msg">
         please submit the itemId...
      </div>
   </div>
   <div class="header_right">
<br/><br/>
{{=form}}
</div>
</div>
<br/>
<br/>
<br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:28:40.187

在表单所在的开始`div`标记中，添加`align="center"`.

因此，如果我正确理解了您的问题，那么您将需要输入在此[jsfiddle](http://jsfiddle.net/V6YyW/)`align="center"`中找到的 类似内容。`<div class="header_right">`

# c# - .Net 框架需要在服务器 2008 中安装 MDAC

> ID：10748336
> 
> 赞同：7
> 
> 时间：2012-05-25T04:02:24.010
> 
> 标签：c#, sql-server-2008, ibm-midrange, mdac, tivoli

我的公司最近使用 tivoli 工作负载调度程序 (TWS) 将作业从 z/OS 远程触发到窗口服务器。我们测试了tivoli可以成功触发mssql服务。

现在的问题是我们有一个 .NET CL 程序，我们每天使用它来将 AS400 中的一些数据提取到 mssql 服务器，之前使用 windows 调度程序并在特定时间范围内每天触发时它可以完美运行。现在我们尝试集中调度程序，以便 TWS 远程触发准备好的批处理文件（它将触发 CL 程序）。

但 CL 程序的执行在尝试连接到 AS400 DB 时显示以下错误。

> .Net Framework 数据提供程序需要 Microsoft 数据访问组件 (MDAC)。请安装 Microsoft 数据访问组件 (MDAC) 版本 2.6 或更高版本。

编辑：在正常情况下，我们假设程序可以成功触发，它应该就像使用 windows 调度程序一样，设置一个时间表并执行它。唯一的区别是调度器现在不是windows调度器，而是切换到TWS并远程触发CL程序。但是执行 CL 程序期间执行显示上述错误。我们不知道为什么会出现这个错误。我们尝试重新运行 CL 程序并在 Windows 调度程序中安排它，工作正常。但在 TWS 上远程安排，错误。

对于我们迄今为止所做的测试和观察：

1.  我们的服务器是 Windows server 2008 SP2 x64，我对旧版本 windows 中使用的 MDAC 进行了一些研究，而 server 2008 应该提供更新版本的 MDAC (WDAC 6.0)，它不能重新安装，所以我认为 MDAC/WDAC 必须是正确安装。

2.  CL 程序是用 .NET 2.0/ 3.0 / 3.5 编译的，并测试它们都产生相同的错误。

3.  他们的错误日志能够生成到 sql server DB，所以我假设在 CL 程序中使用的连接驱动程序没有问题。但它可能是由 IBMDA400 驱动程序引起的。

4.  TWS 使用我们服务器中的管理员帐户来触发批处理文件，我们的服务器中安装了一个 TWS 客户端（侦听器）用于触发我们服务器中的程序，但我们不知道它们如何连接到我们的服务器（SSH？telnet？）并且他们似乎实际上并没有登录到我们的服务器进行远程触发（在静默模式下触发我们的工作）。

我们急于寻求任何解决方案，如果有人能提供任何线索或想法，那将是非常有帮助的，并为将来遇到同样问题的人提供了很大的帮助。

非常感谢！。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-23T19:06:00.240

对于那些搜索，尽管 MDAC 2.8 SP1 已经安装在 2008 盒子上，但我最近在 Web 应用程序中遇到了这个错误。我们重新安装了 MDAC，但它似乎没有修复。 为受影响的 Web 应用***程序停止和启动应用程序池解决了该问题。***是否需要重新安装，或者是否需要 Windows 更新或某些东西需要没有发生的 iisreset，目前还不是 100% 清楚。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-21T19:57:38.707

此错误的原因是应用程序池正在尝试从 HKey_Current_User 配置单元读取注册表项，该配置单元并不总是加载。解决方法如下：

1.  打开 IIS 管理控制台
2.  点击“应用程序池”
3.  右键单击您网站的池，然后选择“高级设置”
4.  将设置“加载用户配置文件”更改为 True

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:26:14.710

我只能给你一些调查的途径。

1.  您可能想尝试使用 IBM DB2 iSeries ADO.NET 数据提供程序，而不是使用 IBMDA400 OLE DB 提供程序。当我们将一个平台重新构建项目转移到一个更新的 x64 的 Windows Server 时，我的团队也有类似的经历。出于某种原因，我们尝试在 .NET Windows 服务上使用较旧的 OLE DB 提供程序时，得到了非常奇怪的结果。后来我们发现这是由于我们的服务器是 64 位的。

2.  我怀疑您对 IBMDA400 是 32 位驱动程序有疑问。检查您是否将 .NET CL 程序编译为 64 位。您可以尝试将您的程序编译为32 位应用程序并在您的服务器上[启用 Wow64 。](http://searchwindowsserver.techtarget.com/tip/Run-32-bit-applications-on-x64-Windows-servers)

希望其中一个能引导您找到解决方案！

# php - 如何将 Dreamweaver 连接到 1and1 上的 MySQL 数据库？

> ID：10748343
> 
> 赞同：1
> 
> 时间：2012-05-25T04:03:34.427
> 
> 标签：php, mysql, html, phpmyadmin

我在**1and1**上托管一个站点，但无法连接到`MySQL database`.
我对`MySQL`and很`PHP`陌生，所以我不确定我做对了。

*   在我的域名下，
    *   选择 Web 空间>MySQL 管理
    *   （被带到 PHPMyAdmin）
*   新数据库
*   数据库完成设置后，
    *   使用 1and1 提供的“主机”、“用户名”和“密码”连接 Dreamweaver。

我试过这样做，但`Dreamweaver`给了我一个“ `Unknown error`”，这根本没有帮助，因为它甚至没有给出错误代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:31:40.320

*在共享主机上，仅允许来自*在其服务器上运行的应用程序的数据库连接是很常见的。来自其他客户端的连接被阻止/拒绝。

如果您能够将 Dreamweaver 连接到*本地*（在您的机器上）MySQL 服务器，则可能是 1and1 阻止了您的远程访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:57:06.010

1and1 不允许外部连接到数据库

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T00:43:22.973

您应该仍然可以与 Dreamweaver 连接。您得到的错误通常是因为发布 URL（通常与默认的 www.domainnamehere.com 相同）尚未在 DW 中的测试服务器部分下配置。

# asp.net-mvc - .NET MVC3 Stongly Typed Form Helper 没有将数据传递给操作？

> ID：10748349
> 
> 赞同：0
> 
> 时间：2012-05-25T04:05:16.030
> 
> 标签：asp.net-mvc, razor

我有一个包装另一个模型的模型包装类：

```
public class LogicPage {
    public MyPage Pg { get; set; }
}

public class MyPage {
     public string name { get; set; }
} 
```

在我的创建表单视图中，我使用强类型表单助手：

```
@model MyAppCore.Components.LogicPage
@using (Html.BeginForm("Create","PageAdmin",FormMethod.Post)) {
     <div class="editor-field">
     @Html.EditorFor(model => model.Pg.name)
     @Html.ValidationMessageFor(model => model.Pg.name)
 </div>
 ...
} 
```

在我的控制器中，我将操作定义为：

```
[HttpPost]
public ActionResult Create(LogicPage logicpg)
{
   return View("View",logicpg.Pg);
} 
```

但是，当 MyPage Pg 显示在列出模型（MyPage）详细信息的“视图”中时，不会显示用户输入的数据，显示的页面详细信息都是 MyPage 默认值（使用 LogicPage 的默认无参数构造函数初始化）。看起来表单中的数据没有传递给动作中的模型。有人可以帮我为什么数据没有通过吗？

为了澄清更多，我有两个视图模型 LogicPage 的“创建”表单视图和模型 MyPage 的“视图”详细视图

创建.cshtml

```
@model MyAppCore.Components.LogicPage 
```

查看.cshtml

```
@model MyAppCore.Components.MyPage 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:20:30.987

你说你在做

```
[HttpPost]
public ActionResult Create(LogicPage logicpg)
{
   return View("View",logicpg.Pg);
} 
```

但鉴于 MyPage 不继承自 LogicPage，并且您的视图需要 LogicPage 的实例，我认为您应该这样做：

```
[HttpPost]
public ActionResult Create(LogicPage logicpg)
{
   return View("View",logicpg);
} 
```

# iphone - 得到警告：UITableView 数据源必须返回一个单元格

> ID：10748352
> 
> 赞同：1
> 
> 时间：2012-05-25T04:06:54.517
> 
> 标签：iphone, objective-c, uitableview

我有`ViewAController:UITableViewController`。我也有`firstNameCell`，`lastNameCell`喜欢下面![在此处输入图像描述](../Images/0742d59c4ce7ff8b8f326bf5abd02619.png)

中`ViewAController`，我愿意

```
-(NSInteger)numberOfSectionsInTableView:(UITableView*)tableView {

    return 2;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    return 50;
}
-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath 
{
    if (indexPath.section == 0)
        return firstNameCell;

    return lastNameCell;  
} 
```

我的问题：为什么`cells`即使他们连接到`cell`xib ，我的也是 nil

请就这个问题给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:14:41.750

您的 cellForRowAtIndexPath 方法未正确初始化单元格。

它应该包含以下代码 -

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:10:22.043

请试试这个：

```
static NSString *CellIdentifier = @"Cell";
cellVideoOptions *cell =(cellVideoOptions *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

然后用笔尖名称初始化单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T08:37:30.677

以编程方式进行：

自定义单元格.h

```
#import <UIKit/UIKit.h>

@interface CustomCell : UITableViewCell
{
   UILabel *firstName;
   UILabel *lastName;
}

@property (nonatomic, retain) UILabel *firstName;
@property (nonatomic, retain) UILabel *lastName;

@end 
```

CustomCell.m

```
#import "CustomCell.h"

@implementation CustomCell
@synthesize firstName, lastName;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
   self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
   if (self) {

    // Initialization code

    firstName = [[UILabel alloc]init];
    firstName.textAlignment = UITextAlignmentLeft;
    firstName.font = [UIFont boldSystemFontOfSize:18];
    firstName.backgroundColor = [UIColor clearColor];

    lastName = [[UILabel alloc]init];
    lastName.textAlignment = UITextAlignmentLeft;
    lastName.font = [UIFont boldSystemFontOfSize:14];
    lastName.backgroundColor = [UIColor clearColor];

    [self.contentView addSubview:firstName];
    [self.contentView addSubview:lastName];
   } 
   return self;
}

- (void)layoutSubviews {
  [super layoutSubviews];

  CGRect contentRect = self.contentView.bounds;
  CGFloat boundsX = contentRect.origin.x;
  CGRect frame;
  frame= CGRectMake(boundsX+7 ,7, 240, 20);
  firstName.frame = frame;

  frame= CGRectMake(boundsX+125 ,25, 220, 20);
  lastName.frame = frame;

}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
}

- (void)dealloc 
{
   [firstName release];
   [lastName release];
   [super dealloc];
}

@end 
```

在带有 TableView 的 ViewAController 中，不要忘记导入 CustomCell.h

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

   static NSString *CellIdentifier = @"Cell";

   CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {

      cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
   }

   // Configure the cell...
   if (indexPath.section == 0) {
    cell.firstName.text = @"firstname";
    // and or cell.firstName.frame = ...
   } else {
    cell.lastName.text = @"lastname"
    // and or cell.lastName.frame = ...
   }

   return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T04:10:16.697

您可能在笔尖完成加载之前被调用。检查您的`-awakeFromNib`方法是否已被调用。

# silverlight - 使用 Silverlight OOB 在 Mac 中打开 Excel 文件

> ID：10748355
> 
> 赞同：1
> 
> 时间：2012-05-25T04:07:45.197
> 
> 标签：silverlight, macos, silverlight-5.0

在windows中我知道我可以使用wsscript的automationfactory来打开excel文件，我们需要能够在mac中做同样的事情，但遗憾的是我能做的最好的事情是使用保存文件对话框并要求用户先保存文件正在努力。

有没有办法使用 Silverlight 在 Mac 中打开文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:13:13.783

我为 MAC 安装了 Excel，并将文件 uri 放在超链接按钮 Navigate Uri 上，它会打开 excel :)

# android - 网络提供商何时更新android中的位置

> ID：10748361
> 
> 赞同：1
> 
> 时间：2012-05-25T04:09:47.957
> 
> 标签：android, gps, location

我`network provider`用来获取位置`Android application`。有时我发现即使我到了一个新的地方，位置也不会改变。同时，我发现谷歌地图中的位置发生了变化。所以我退出并重新启动了我的应用程序，并且位置也没有改变。但是经过很长一段时间，或者我重新启动手机，我可以看到新的位置。

有谁知道是什么原因？我曾经`getLastKnownLocation()`在我的应用程序中获取最新位置。

**更新：**

当这个问题发生时，我发现cellid和LAC被改变了，而位置没有改变。所以这很奇怪。我认为谷歌地图可能会使用 cellid & LAC 直接获取位置，因此它可以获取正确的位置。

**更多更新：**

发生此问题时，我使用 cellid 和 LAC 通过来自 Google 服务器的 HTTP POST 请求获取位置。这个位置是正确的。

顺便说一句，我发现我的问题是这样的：[Android network location takes hours to update location](https://stackoverflow.com/questions/6299183/android-network-location-takes-hours-to-update-location)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:04:36.047

我不会相信`getLastKnownLocation()`的。根据我的经验，这是不可靠的。

您最好使用`LocationManager.requestLocationUpdates()`. 如果您只需要该位置一次，则可以在此之后使用取消注册回调`LocationManager.removeUpdates()`。如果您的应用程序需要在位置更改时得到通知，那么您可以使用合理的最小时间和/或最小距离参数注册回调（基于您的应用程序需要的任何内容。

# objective-c - Clicking through NSWindow/CALayer

> ID：10748364
> 
> 赞同：1
> 
> 时间：2012-05-25T04:10:23.983
> 
> 标签：objective-c, macos

So I'm working on an issue I have when trying to do some simple animation using CAKeyframeAnimation, and I believe my problem is more related to not fully understanding how NSWindow, NSView, and CALayer work together.  I have two main objects in question. MyContainerWindow (NSWindow subclass) and MyMovableView (NSView subclass). My goal is to be able to animate MyMovableView back and forth across the screen, while maintaining the ability to click on anything through MyContainerWindow unless you are clicking on wherever MyMovableView is. I am able to accomplish the first part fine, by calling -addAnimation:forKeyPath: on myMovableView.layer, and everything is great except I can't click through MyContainerWindow. I could make the window smaller, but then the animation would clip by the bounds of the window.

Important points:  1) MyContainerWindow is initWithFrame to [[NSScreen mainScreen] frame], NSBorderlessWindowMask, defer no, buffered 2) I setWantsLayer:TRUE to MyMovableView 3) MyContainerWindow is clear, and I want it to be as if there wasnt a window at all, but need it so I have a larger canvas to animate on.

Is there something obvious I'm missing to be able to click through an NSWindow?

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:06:19.510

My solution in this scenario was actually to use:

```
[self ignoresMouseEvents:YES]; 
```

I originally was hoping to be able to retain the mouse events on the specific CALayer that I'm animating, but upon some further research I understand this comes with the cost of custom drawing everything from scratch, which is not ideal for this particular project.

# php - 在单个 $_SESSION(PHP) 中存储多个变量

> ID：10748366
> 
> 赞同：-2
> 
> 时间：2012-05-25T04:11:06.903
> 
> 标签：php, session, login

我将如何进行这项工作，我之前问过但没有得到正确的答案。这段代码是用户登录，所以当他们登录时，我希望用户名和头像可以通过站点进行跟踪。到目前为止，我只有用户名。我尝试过方法，但每次都失败了。

```
$username = $_POST['username'];
$password = sha1($_POST['password']);
$sql = "SELECT * FROM users WHERE username = '$username' AND password = '$password'";
$result = mysqli_query($conn, $sql) or die('Error querying database.');
$count=mysqli_num_rows($result);

if ($count == 1) 
{
   $row = mysqli_fetch_array($result);
   while ($_SESSION['username'] = $row['username'])
   {
      session_start();
      header('Location: index.php'); 
   }
}
else
{
   echo 'Invalid Logins';
}

mysqli_close($conn);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:13:32.127

假设您将头像存储在`avatar`数据库的字段中：

```
if ($count == 1) 
{
    session_start();

    $row = mysqli_fetch_array($result);
    $_SESSION['username'] = $row['username'];
    $_SESSION['avatar'] = $row['avatar'];

    header('Location: index.php'); 
}
else
{
    echo 'Invalid Logins';
} 
```

# cakephp - 在 mysqli 连接中使用 mysql_real_escape_string 函数

> ID：10748372
> 
> 赞同：0
> 
> 时间：2012-05-25T04:12:09.160
> 
> 标签：cakephp, mysqli

我正在研究 Cake PHP 框架。现在我使用 mysqli 进行数据库连接。我想在代码上使用 mysql_real_escape_string 函数。使用 cakephp 的 mysqli 连接中 mysql_real_escape_string 的格式是什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:20:34.910

1.  一般来说：如果您使用的是 mysqli 扩展，请`mysqli_real_escape_string`使用`mysql_real_escape_string`.
2.  一般来说：如果您使用 mysqli 扩展，请使用*准备好的语句*而不是转义和连接值。
3.  专门针对 Cake：如果您正确使用 Cake 模型， [Cake 已经自动转义](http://book.cakephp.org/2.0/en/core-utility-libraries/sanitize.html)您的查询，您通常不需要手动转义字符串。如果真的这样做，请从模型中获取数据源并使用其转义功能。我不会详细说明如何做到这一点，因为我很确定你不需要它。

# matlab - OpenCV MATLAB：如何绘制具有特定强度分布的线？

> ID：10748374
> 
> 赞同：0
> 
> 时间：2012-05-25T04:13:11.937
> 
> 标签：matlab, image-processing, opencv, opencvdotnet

**下面是图像中线条**的任意手绘强度分布： ![在此处输入图像描述](../Images/5db58737df9fdb2a7aad60f5eefc0225.png)

任务是画**线**。轮廓可以近似为圆弧或椭圆弧。这是我为相机校准所做的。由于我没有实际的工业相机，我试图模拟校准所需的校正。

这个问题可以改写，因为我想要像素值，它会遵循类似于上面的图。我想使用程序（最好使用 opencv）来执行此操作，而不是手动输入这些值，因为我一行中有数千个像素。
一个算法/伪代码就足够了。另请注意，我没有任何实际的强度配置文件，否则我会阅读这些值。

**什么时候会遇到这样的情况**？

假设您从相机拍摄照片（假设全白），您的对象被放置在桌子上，相机在垂直方向正上方。与在边缘反射的光相比，从相机垂直向下射到图片中心的光的强度会更强。您测量图像中任何一条线的像素值，您会发现如上图所示的强度曲线。由于我暂时没有相机，我想模仿这种情况。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:29:01.323

这不完全是图像处理，而是图像生成......但无论如何。

既然你想要一个弧，我们仍然需要在那个弧上三个点，让我们取第一个、中间和最后一个点（我认为的关键特征）：

```
N = 100; % number of pixels
x1 = 1;
x2 = floor(N/2);
x3 = N;

y1 = 242;
y2 = 255;
y3 = 242; 
```

现在画一个包含这些点的圆弧。这个问题已经在这里讨论过matlab： http: [//www.mathworks.nl/matlabcentral/newsreader/view_thread/297070](http://www.mathworks.nl/matlabcentral/newsreader/view_thread/297070)

```
x21 = x2-x1; y21 = y2-y1;
x31 = x3-x1; y31 = y3-y1;
h21 = x21^2+y21^2; h31 = x31^2+y31^2;
d = 2*(x21*y31-x31*y21);
a = x1+(h21*y31-h31*y21)/d; % circle center x
b = y1-(h21*x31-h31*x21)/d; % circle center y
r = sqrt(h21*h31*((x3-x2)^2+(y3-y2)^2))/abs(d); % circle radius 
```

如果您假设中间值总是较大（因此它是您必须绘制的圆的上部），您可以使用以下方法绘制：

```
x = x1:x3;
y = b+sqrt(r^2-(x-a).^ 2);
plot(x,y); 
```

您可以调整可见窗口

```
xlim([1 N]);
ylim([200 260]); 
```

这给了我以下结果： ![弧](../Images/2fcd015b7a0cc3dc78c48c1dc21aef0e.png)

# android - 如何在 android 的活动通话中发送 DTMF 音？

> ID：10748376
> 
> 赞同：0
> 
> 时间：2012-05-25T04:13:15.153
> 
> 标签：android, dtmf

是否可以在 android 的活动呼叫中发送 DTMF 音？我试过了，`proxyphone.sendDtmf()`但没用。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:19:13.043

只有在 VOIP 中才有可能，Android 应用程序无法访问通话中的音频流。您可以在免提模式下稍微伪装一下。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-10T06:00:56.160

试试这个方法（）。它正在从用户那里获取数量和延迟。

```
private void call(int profileid) {//call procedure logic 
        ProfileDo profile = adapter.getProfile(profileid);
        if (profile.getStepCount() == 0) {
            Toast.makeText(getApplicationContext(), "Please edit the profile and add atleast one value to make a call", 10000).show();
            return;}
            String call = "tel:";
        for (StepDO step : profile.getSteps()) {
            String value = URLEncoder.encode(step.getValue());
            int delay = step.getDelay();
            String pausesStr = "";
            for (int i = 0; i < delay / 2; i++) {
                pausesStr += PhoneNumberUtils.PAUSE;
            }
            call += value + pausesStr;
        }
         startActivity(new Intent("android.intent.action.CALL", Uri.parse(call)));      
    } 
```

# java - primefaces 3.2 菜单项错误

> ID：10748380
> 
> 赞同：0
> 
> 时间：2012-05-25T04:13:41.250
> 
> 标签：java, jsf, primefaces

我有 3 个表单，每个表单都包含包含数据表的组件。我希望将它们组合成一个表单（因为每个表单都包含相同的 UI 组件集）。我想`<p:menu>`为此目的使用。`<p:menu>`使用 3 个 menuItems 并单击每个项目，应呈现适当的表单内容。但是当我指定 的 action 属性时`<p:menu>`，我收到以下错误：

> 元素类型“p:menuitem”必须后跟属性规范“>”或“/>”。

xhtml代码：

```
<h:form id="frm">
  <p:menu>
    <p:menuitem value="price losers" action="#{equityBean.onType("losers")}"/>
    <p:menuitem  value="price gainers"/>
    <p:menuitem  value="price volume"/>
  </p:menu>
  <p:tabView activeIndex="#{equityBean.activeIndex}">
    <p:ajax event="tabChange" listener="#{equityBean.onChange}" update=":frm"/>
    <p:tab title="NSE">                   

      <p:dataTable value="#{equityBean.scripList}" var="scrip">
        ....                        
      </p:dataTable>
    </p:tab>
    <p:tab title="BSE">
      <p:dataTable value="#{equityBean.scripList}" var="scrip">
        .....
      </p:dataTable>
    </p:tab>
  </p:tabView>
</h:form> 
```

豆代码：

```
public void onType(String type)
{
    this.type=type;
}

public List<MasterScrip> getScripList() {

   if(type.equalsIgnoreCase("losers"))
   {
    scripList=new ArrayList<MasterScrip> ();
    scripList=getScripByPriceLosers(exchange);
    return scripList;
   }
   else if(type.equalsIgnoreCase("gainers"))
   {
    scripList=new ArrayList<MasterScrip> ();
    scripList=getScripByPriceLosers(exchange);
    return scripList;
   }
   else
   {
    scripList=new ArrayList<MasterScrip> ();
    scripList=getScripByVolumeType(exchange);
    return scripList;
   }
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:28:21.693

您需要转义字符串中的引号。具体来说，这

```
"#{equityBean.onType("losers")}" 
```

无效，因为`"#{equityBean.onType("`被解析为值，然后解析器有一个错误，因为`losers`它不是有效的延续

你需要写

```
"#{equityBean.onType(&quot;losers&quot;)}" 
```

或者

```
'#{equityBean.onType("losers")}' 
```

第一个*转义*引号，第二个使用替代字符串分隔符（`'`而不是`"`），因此它不会与字符串中的引号发生冲突

# javascript - iOS 版 PhoneGap 中的 websocket 状态如何？

> ID：10748382
> 
> 赞同：4
> 
> 时间：2012-05-25T04:14:02.780
> 
> 标签：javascript, ios, cordova, websocket, socket.io

iOS 版 PhoneGap 中的 websocket 状态如何？

我试图弄清楚我需要做什么（如果有的话）以使 socket.io 与我的 phonegap 应用程序一起工作。感谢您提供任何信息，phonegap 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:31:19.427

看起来您可能需要一个插件来执行此操作。

这个 stackoverflow 答案可能会对您有所帮助： [Socket.io + PhoneGap](https://stackoverflow.com/questions/10738073/socket-io-phonegap)

或者你可以直接跳到这个描述如何使用插件的博客条目：

[http://remysharp.com/2010/10/04/websockets-in-phonegap-projects/](http://remysharp.com/2010/10/04/websockets-in-phonegap-projects/)

问题似乎是 phonegap 从 file:// 而不是 http:// 发出套接字请求

# ios - 设置 UITableView 的高度

> ID：10748384
> 
> 赞同：0
> 
> 时间：2012-05-25T04:14:06.930
> 
> 标签：ios, uitableview, height

由于某种原因，我无法从控制器内调整 UITableView 的高度，在我的 viewDidLoad 中我这样做了：

```
[self.tableView setBounds:CGRectMake(0.0f, 0.0f, 320.0f, 100.0f)];
[self.tableView setFrame:CGRectMake(0.0f, 0.0f, 320.0f, 100.0f)];

self.tableView.bounds = CGRectMake(0.0f, 0.0f, 320.0f, 100.0f);
self.tableView.frame = CGRectMake(0.0f, 0.0f, 320.0f, 100.0f); 
```

我只是尝试了所有选项，但似乎没有任何改变我桌子的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:51:37.290

UITableViewController 会自动让 tableview 全屏显示。

取自[View Controller Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewAndDataModel/TableViewAndDataModel.html#//apple_ref/doc/uid/TP40007451-CH5-SW1)：

> 注意：如果要管理的视图由多个子视图组成，其中一个是表视图，则应使用 UIViewController 子类而不是 UITableViewController 的子类来管理表视图。UITableViewController 类的默认行为是让表格视图填满导航栏和标签栏之间的屏幕（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:59:30.360

使用`UIViewController`, 并添加`UITableViewController`为子视图控制器。然后，您可以将`UITableViewController`'s 视图作为子视图添加到您的`UIViewController`并根据需要设置框架。您可以使用`UIViewController`来控制其余的 UI 元素并使用`UITableViewController`来控制表格。

请注意，此方法使用`UIViewController`的是 iOS 5 功能的容器。

# wpf - LISTBOX 分组使用 collectionView Source

> ID：10748385
> 
> 赞同：1
> 
> 时间：2012-05-25T04:14:12.920
> 
> 标签：wpf, silverlight, windows-phone-7, wpf-controls

`ListBox``CollectionView`以编程方式使用源进行分组：

喜欢

```
Task 1 (certain date)
Task 2 (certain date)
Task 3 (certain date)
Task 4 (certain date) 
```

至

```
Certain date1  
  Task 1
  Task 3  
Certain date2
  Task 2
  Task 4 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T06:10:49.730

这是给你的一个样本。

**XAML：**

```
<Window x:Class="TestWPFApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="695" Width="996" Loaded="Window_Loaded">
    <Grid>
        <ListBox Height="100" HorizontalAlignment="Left" Margin="10,10,0,0" Name="lbxTasks" VerticalAlignment="Top" Width="120">
            <ListBox.GroupStyle>
                <GroupStyle />
            </ListBox.GroupStyle>
           <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Title}"/>
            </DataTemplate>
           </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

**代码背后：**

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private List<Task> MyTasks()
        {
            List<Task> tasks = new List<Task>();
            DateTime date = DateTime.Now;
            tasks.Add(new Task { CreatedDate = date, Title = "Task 1" });
            tasks.Add(new Task { CreatedDate = date, Title = "Task 2" });
            tasks.Add(new Task { CreatedDate = date.AddDays(-1), Title = "Task 3" });
            tasks.Add(new Task { CreatedDate = date.AddDays(-1), Title = "Task 4" });
            return tasks;
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            ICollectionView _tasksView = CollectionViewSource.GetDefaultView(MyTasks());
            _tasksView.GroupDescriptions.Add(new PropertyGroupDescription("CreatedDate"));
            lbxTasks.ItemsSource = _tasksView ;
        }
    }

    public class Task
    {
        public DateTime CreatedDate { get; set; }
        public string Title { get; set; }
    } 
```

**输出：**

![在此处输入图像描述](../Images/5b737996d88dfb5bcb815a91db1888d9.png)

# php - PHP 脚本以嵌套 UL 的形式遍历目录/文件树和输出树

> ID：10748387
> 
> 赞同：5
> 
> 时间：2012-05-25T04:14:28.757
> 
> 标签：php, html, arrays, recursion, directory

我有一棵目录、子目录和文件（在一些但不是所有目录中）。这是整个树的示例：

```
/food
/food/drinks
/food/drinks/water.html
/food/drinks/milk.html
/food/drinks/soda.html
/food/entrees
/food/entrees/hot
/food/entrees/hot/hamburger.html
/food/entrees/hot/pizza.html
/food/entrees/cold
/food/entrees/cold/icecream.html
/food/entrees/cold/salad.html
/cosmetics
/cosmetics/perfume
/cosmetics/perfume/chic.html
/cosmetics/perfume/polo.html
/cosmetics/perfume/lust.html
/cosmetics/lipstick
/cosmetics/lipstick/colors
/cosmetics/lipstick/colors/red.html
/cosmetics/lipstick/colors/pink.html
/cosmetics/lipstick/colors/purple.html 
```

好的，从 '/' 目录中的 php 脚本，我想递归或遍历这个目录树并像这样打印树：

```
<ul>
  <li>food</li>
    <ul>
      <li>drinks</li>
        <ul>
          <li>water.html</li>
          <li>milk.html</li>
          <li>soda.html</li>
        </ul>
      <li>entrees</li>
        <ul>
          <li>hot</li>
            <ul>
              <li>hamburger.html</li>
              <li>pizza.html</li>
            </ul>
          <li>cold</li>
            <ul>
              <li>icecream.html</li>
              <li>salad.html</li>
            </ul>      
        </ul>
    </ul>
  <li>cosmetics</li>
    <ul>
      <li>perfume</li>
        <ul>
          <li>chic.html</li>
          <li>polo.html</li>
          <li>lust.html</li>
        </ul>
      <li>lipstick</li>
        <ul>
          <li>colors</li>
            <ul>
              <li>red.html</li>
              <li>pink.html</li>
              <li>purple.html</li>
            </ul>
        </ul>
    </ul>
</ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T07:37:59.770

我认为您需要的是PHP[标准库 (SPL)中的](http://php.net/manual/en/book.spl.php)[RecursiveDirectoryIterator](http://php.net/manual/en/class.recursivedirectoryiterator.php)

然后，您可以编写类似于以下内容的内容：

```
function iterateDirectory($i)
{
    echo '<ul>';
    foreach ($i as $path) {
        if ($path->isDir())
        {
            echo '<li>';
            iterateDirectory($path);
            echo '</li>';
        }
        else
        {
            echo '<li>'.$path.'</li>';
        }
    }
    echo '</ul>';
}

$dir = '/food';
$iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir));

iterateDirectory($iterator); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-25T04:33:25.380

**为了让您开始，它需要以下功能才能工作**：

*   [`opendir()`](http://www.php.net/manual/en/function.opendir.php)获取目录处理程序
*   [`readdir()`](http://php.net/manual/en/function.readdir.php)阅读它的内容
*   [`is_dir()`](http://php.net/manual/en/function.is-dir.php)确定当前取自的值`readdir()`是目录还是文件

**要将它们粘合在一起，您将需要**：

*   活套 ( [`for`](http://www.tizag.com/phpT/forloop.php), [`for each`](http://www.tizag.com/phpT/foreach.php), [`while`](http://www.tizag.com/phpT/whileloop.php))
*   [递归算法](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Recursive_algorithms)（或无限while循环）

**上面的所有资源都粘合后的情况**如下：

```
<?php

function read_dir_content($parent_dir, $depth = 0){
    $str_result = "";

    $str_result .= "<li>". dirname($parent_dir) ."</li>";
    $str_result .= "<ul>";
    if ($handle = opendir($parent_dir)) 
    {
        while (false !== ($file = readdir($handle)))
        {
            if(in_array($file, array('.', '..'))) continue;
            if( is_dir($parent_dir . "/" . $file) ){
                $str_result .= "<li>" . read_dir_content($parent_dir . "/" . $file, $depth++) . "</li>";
            }
            $str_result .= "<li>{$file}</li>";
        }
        closedir($handle);
    }
    $str_result .= "</ul>";

    return $str_result;
}

echo "<ul>".read_dir_content("d:/movies/")."</ul>"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-16T14:41:15.240

我用它来将所有文件放在一个目录中：

```
function tree($path, $exclude = array()) {
    $files = array();
    foreach (new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path)) as $splfileinfo) {
        if (!in_array(basename($splfileinfo), $exclude)) {
            $files[] = str_replace($path, '', '' . $splfileinfo);
        }
    }
    return $files;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T04:25:13.790

希望此功能可以帮助您完成工作。

```
/*
     * Retern the file list which include in the given directory
     *
     * @param String $dirpath : Path to the directory
     * 
     * @access public
     * 
     * @return Array
     */
    function getFileList($dirpath)
    {
        $filelist = array();
        if ($handle = opendir(dirname ($dirpath))) 
        {
           while (false !== ($file = readdir($handle)))
              {
                    $filelist[] = $file;
              }
            closedir($handle);
        }

        return $filelist;
    } 
```

# objective-c - Objective-C (null) 和 nil 之间的区别

> ID：10748388
> 
> 赞同：0
> 
> 时间：2012-05-25T04:14:35.760
> 
> 标签：objective-c, null

我已经在这里查看了类似问题的一些以前的答案，但我仍然不明白。

这是代码（来自 ShareKit）

```
if (isDismissingView)
  return;

NSLog(@"presentingViewController: %@", [self.currentView presentedViewController]);

if (self.currentView != nil)
{
  // Dismiss the modal view
  if ([self.currentView parentViewController] != nil)
  {
    self.isDismissingView = YES;
    [[self.currentView parentViewController] dismissModalViewControllerAnimated:animated];
  }
  // for iOS5
  else if ([self.currentView respondsToSelector:@selector(presentingViewController)] && [self.currentView presentingViewController]) {     
    //****** it executes this block ******
    self.isDismissingView = YES;            
    [[self.currentView presentingViewController] dismissViewControllerAnimated:animated completion:^{  ...  }
  }
  else
    self.currentView = nil;
} 
```

在 NSLog 中，结果是`(null)`，这显然与 nil 不同，因为测试它是否不是 nil 的块

```
else if ([self.currentView respondsToSelector:@selector(presentingViewController)] && [self.currentView presentingViewController]) 
```

被执行。

所以我有三个问题。是什么`(null)`？对象或指针如何变成`(null)`? 测试这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:26:17.737

当您为对象格式 %@ 赋予 nil 值时，NSLog() 会打印“(null)”。您可以通过查看输出来验证这一点

```
NSLog(@"%@", nil); 
```

所以 [self.currentViewpresentViewController] 确实是零。else if 测试正在查看 present* *ing* *ViewController，not present* *ed* *ViewController。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T04:22:18.350

`nil`适用于对象和`null`非对象，尽管我认为`NSLog`print null 作为对象的描述，即使它意味着 nil。您是否尝试过设置断点并检查调试器在此代码点上所说的内容？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T04:24:25.470

您正在记录`presentedViewController`但正在测试`presentingViewController`。

# http-post - 如何从 ASP.NET Web API（POST 或 PUT）调用中获取 httppostedfile？

> ID：10748392
> 
> 赞同：4
> 
> 时间：2012-05-25T04:15:56.960
> 
> 标签：http-post, asp.net-web-api, http-put

其实我的问题很简短。

如何从 ASP.NET Web API POST 或 PUT 获取 HttpPostedFile？

我确实看到我可以从 Request.Header、Request.Content、Request.Properties 等请求中获取各种信息。我在哪里可以找到我传递的文件，如何从中创建 HttpPostedFile？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T11:53:34.330

查看 Henrik Nielsen 的[精彩文章](http://blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload-and-asp-net-web-api.aspx)以发布多部分内容（即发布带有文件的表单）

**更新：**为控制器添加简单代码以接收没有多部分内容的文件

如果您只需要控制器接收文件（即没有多部分内容），您可以执行上述操作。该请求仅包含文件二进制文件，并且文件名在 URL 中传递。

```
public Task<HttpResponseMessage> Post([FromUri]string filename)
{
    Guid uploadedFile = Guid.NewGuid();
    Task<HttpResponseMessage> task = Request.Content.ReadAsStreamAsync().ContinueWith<HttpResponseMessage>(t =>
         {
            if (t.IsFaulted || t.IsCanceled)
                throw new HttpResponseException(HttpStatusCode.InternalServerError);

            try
            {
                using (Stream stream = t.Result)
                {
                    //TODO: Write the stream to file system / db as you need
                }
            }
            catch (Exception e)
            {
                Object o = e;
                return Request.CreateResponse(HttpStatusCode.InternalServerError, e.GetBaseException().Message);
             }

            return Request.CreateResponse(HttpStatusCode.Created, uploadedFile.ToString());
         });

    return task;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-25T10:57:14.353

恐怕您的简短问题没有简短的答案。

ASP.NET Web API 向您展示了 HTTP 的奇妙之处，而 ASP.NET MVC 抽象了其中的一部分——在本例中为 HttpPostedFile。

**所以有点背景：**

涉及文件的 HTTP 帖子通常具有**[多部分](http://en.wikipedia.org/wiki/MIME#Multipart_messages)**表单数据内容。这意味着您正在混合不同类型的内容类型：您的普通表单数据将使用 formurlencoded 发送，而文件将使用 application/octent-stream 发送。

所以在 Web API 中，你所要做的就是说

```
var contents = message.Content.ReadAsMultipartAsync(); // message is HttpRequestMessage 
```

其中一个内容将包含您的文件。

# c# - 无法将透明代理转换为键入“Microsoft.Office.Interop.Excel.Worksheet”

> ID：10748394
> 
> 赞同：0
> 
> 时间：2012-05-25T04:16:16.433
> 
> 标签：c#, excel, vsto

遍历电子表格中的所有工作表我遇到了这个错误消息：
**无法将透明代理转换为类型“Microsoft.Office.Interop.Excel.Worksheet”。**

该电子表格有一些图表选项卡，显然不能转换为工作表。因此，当我运行此代码时，出现上述错误：

```
foreach (Microsoft.Office.Interop.Excel.Worksheet activeSheet in xlApp.Sheets)
{

} 
```

我环顾四周寻找解决方案，一些人遇到了它 - 在不同的情况下对我来说，例如： [http ://social.msdn.microsoft.com/forums/en-US/vsto/thread/ab2e917a-d3bf- 4e6a-84dc-7f8a9440fe0a](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/ab2e917a-d3bf-4e6a-84dc-7f8a9440fe0a)

我对到目前为止的解决方法不满意。我觉得应该例外地使用例外，这不是这些地方之一：

```
for (int i = 0; i < xlApp.Sheets.Count; i++)
{
    try
    {
        Worksheet wk = (Worksheet)xlApp.Sheets[i];
    }
    catch (Exception)
    {
        //This isn't a sheet - avoid sheet operations
    }
} 
```

我想知道是否有人知道如何在不需要 Try-Catch 的情况下遍历表格（跳过非表格）？Excel 对象模型中是否有一些方法或属性可以告诉您工作表是否不是真正的工作表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:47:34.100

关于什么：

```
foreach (object possibleSheet in xlApp.Sheets)
{
    Microsoft.Office.Interop.Excel.Worksheet aSheet = possibleSheet as Microsoft.Office.Interop.Excel.Worksheet;
    if (aSheet == null)
        continue;

    // your stuff here
} 
```

当然，只有当您只为图表选项卡而不是其他工作表获得例外时，它才会起作用。

# c# - c# winform - 如何删除多个DataGridViewRows

> ID：10748395
> 
> 赞同：1
> 
> 时间：2012-05-25T04:16:20.970
> 
> 标签：c#, winforms, datagridview

这是我的代码：

```
foreach (DataGridViewRow r in dgv01.Rows)

if (r.Cells[0].Value.ToString() == abc)

{

dgv01.Rows.Remove(r);

//dgv01.CurrentCell = dgv01.Rows[0].Cells[0]; - **also tried**

} 
```

但只有一些行被删除 - 不是全部指定！？

为什么**-foreach-**不代表**-foreach**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:22:26.630

我必须提醒您，当您想要修改/删除正在遍历的数据时，使用 foreach 块是危险的。删除与 foreach 迭代器的索引混淆。

解决方案？请改用反向 for 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T04:35:50.727

首先，在 foreach 循环中更改集合不是一个好主意。其次，foreach 的行为不像您想要的那样，因为一旦删除了第一行，第二行将成为第一行，但是因为在 foreach 中，检查将在第二行进行，这实际上是第三行。因此，已跳过对第二行的检查。最好的方法是以相反的顺序使用 for 循环。

要知道为什么**foreach 的行为不像 foreach**试试这个简单的例子。

```
 private List<int> list = Enumerable.Range(0, 10).ToList<int>();
 for(int i=0;i<list.Count;++i)
       {
           if (list[i] < 5)
               list.RemoveAt(i);
       }

       list.ForEach(x => Console.Write(x)); 
```

**输出：**
1356789

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T05:53:38.460

当您使用 迭代集合`foreach`时，不应修改集合，否则，在最好的情况下，您最终不会覆盖整个集合。但是，大多数情况下，在`foreach`块内修改集合时，迭代将失败。

为了从 DataGridView 中删除行，您必须使用`for`迭代块或两步过程，我将在下面显示这两种过程。

### `for`迭代块

此过程使用索引遍历集合，随时修改集合。这里你需要知道的是，如果你打算修改集合，你没有索引增量（通过集合前进）；你减少索引（通过集合向后走）。如果您在向前迭代时修改（删除或添加项目）集合，您最终可能不会访问集合中的所有项目。

这是从 DataGridView 中删除行的代码。**请记住，我们向后**迭代。

```
for (int i = dgv01.Rows.Count - 1; i >= 0; i--)
{
    if (dgv01.Rows[i].Cells[0].Value.ToString() == "abc")
    {
        dgv01.Rows.RemoveAt(i);
    }
} 
```

### `foreach`迭代块

此过程使用两步方法。第一步找到要删除的项目，第二步从集合中删除项目。由于我之前解释的原因，这个两步过程是必要的。

现在是代码。请记住，这是一个**两步**过程。

```
// step 1\. find the items to be removed

//items to be removed will be added to this list
var itemsToRemove = new List<DataGridViewRow>(); 
foreach (DataGridViewRow r in dgv01.Rows)
{
    if (r.Cells[0].Value.ToString() == "abc")
    {
        itemsToRemove.Add(r);
    }
}

//step 2\. remove the items from the DataGridView
foreach (var r in itemsToRemove)
{
    // this works because we're not iterating over the DataGridView.
    dgv01.Rows.Remove(r);
} 
```

你应该知道的最后一件事是，我在这里演示的程序不仅适用于`DataGridViewRowCollection`课堂；[`IList<T>`](http://msdn.microsoft.com/en-us/library/5y536ey6)它适用于实现或[`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13)接口的所有集合。所以，是的，该过程可用于列表、字典、ControlCollections 和所有其他类似的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T04:26:54.120

对 column[0] 进行降序排序，然后从底部你可以删除行。一旦 abc 结束，你也可以打破循环。否则，您可以在您正在使用的数据表上放置一个行过滤器。

```
((DataTable)this.datagrid1.DataSource).DefaultView .RowFilter 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T04:42:44.113

每当我必须在 foreach 中修改集合时，我通常会创建一个新集合，用我想要修改的数据填充它，然后循环遍历第二个集合以对主集合进行实际更改。这样，我在循环时从不修改集合，因此我避免了 MChicago 描述的情况。

在您的情况下，我通常会编写这种代码：

```
List<DataGridViewRow> toDel = new List<DataGridViewRow>();
foreach (DataGridViewRow r in dgv01.Rows)    
    if (r.Cells[0].Value.ToString() == "abc")    
        toDel.Add(r);

foreach (DataGridViewRow aRow in toDel)   
    dgv01.Rows.Remove(aRow); 
```

# c# - 释放模式下的无限循环

> ID：10748397
> 
> 赞同：19
> 
> 时间：2012-05-25T04:16:35.947
> 
> 标签：c#, .net, multithreading

*当我在调试*模式下运行以下代码时，它将成功完成并退出。*但是，如果我在发布*模式下运行以下代码，它将陷入无限循环并且永远不会完成。

```
static void Main(string[] args)
{
    bool stop = false;

    new Thread(() =>
    {
        Thread.Sleep(1000);
        stop = true;
        Console.WriteLine("Set \"stop\" to true.");

    }).Start();

    Console.WriteLine("Entering loop.");

    while (!stop)
    {
    }

    Console.WriteLine("Done.");
} 
```

哪种优化导致它陷入无限循环？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T04:21:20.520

我的猜测是`stop`主线程上变量的处理器缓存。在调试模式下，内存模型更加严格，因为调试器需要能够提供跨所有线程的变量状态的合理视图。

尝试创建一个字段并将其标记为[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.71%29.aspx)：

```
volatile bool stop = false;

static void Main(string[] args)
{

    new Thread(() =>
    {
        Thread.Sleep(1000);
        stop = true;
        Console.WriteLine("Set \"stop\" to true.");

    }).Start();

    Console.WriteLine("Entering loop.");

    while (!stop)
    {
    }

    Console.WriteLine("Done.");
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-25T04:21:01.107

因为它不是线程安全的，所以您更新子线程内的主线程变量`stop`。它总是无法预测的。要处理这样的任何情况，请查看[这篇文章](http://www.albahari.com/threading/part4.aspx)。

> volatile 关键字指示编译器在每次读取该字段时生成一个获取栅栏，并在每次写入该字段时生成一个释放栅栏。获取栅栏防止其他读/写在栅栏之前移动；释放栅栏防止其他读/写在栅栏之后移动。这些“半栅栏”比全栅栏更快，因为它们为运行时和硬件提供了更大的优化空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:37:40.357

线程不安全代码是不可预测的。主要问题是从另一个线程更改一个线程变量。使变量全局或易变。您可以按照以下方式进行

```
static volatile bool stop = false;

static void Main(string[] args)
{    
    new Thread(() =>
    {
        Thread.Sleep(1000);
        stop = true;
        Console.WriteLine("Set \"stop\" to true.");

    }).Start();

    Console.WriteLine("Entering loop.");

    while (!stop)
    {
    }

    Console.WriteLine("Done.");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T04:53:08.703

看起来对局部变量的值进行了某种优化 - 更改为字段使其终止正常（请注意，在实际代码中应使用易失性或正确的锁定）：

```
using System;
using System.Threading;

class Program
{
    static bool stop = false;
    static void Main(string[] args)
    {

        new Thread(() =>
        {
            Thread.Sleep(1000);
            stop = true;
            Console.WriteLine("Set \"stop\" to true.");

        }).Start();

        Console.WriteLine("Entering loop.");

        while (!stop)
        {
        }

        Console.WriteLine("Done.");
    }
} 
```

# algorithm - 数值优化和最小化

> ID：10748407
> 
> 赞同：1
> 
> 时间：2012-05-25T04:19:10.597
> 
> 标签：algorithm, math, optimization, numerical

假设我有一个参考节点 R 和几个测试节点 T [1]， T [2] .... T [n]。任何特定节点都有一组属性 Rp [1] , Rp [2] , ... Rp [n]和 T [1] p [1] , T [1] p [2] , T [1] p [3] , ... T [1] p [n] , 和 T [2] p [1] , T [2] p [2] , T [2] p [3] , ... T [2] p [n] , 等等。因此，任何节点都可以有 n 个属性，每个属性都有一个特定的类型。

我有自己的方法来定义任何两个节点之间任何两个同类属性之间的距离。此外，我会权衡属性之间的距离，然后总结它们。[因此，R 和 T 1]之间的距离为：

> dRT [1] = w [1] *dRT [1] p [1] + w [2] *dRT [1] p [2] + w [3] *dRT [1] p [3] + w [4] *dRT [1] p [4] + ... w [n] *dRT [1] p [n]。

现在，给定参考节点 R 和测试节点 T [1]，T [2] .... T [n]，并且假设我知道 R 和特定节点 T [m] (1<m<n) 之间的距离最小，如果权重实际上是变量并且距离实际上是常数，我如何计算权重以使 dRTm 是 R 和所有其他测试节点之间的所有距离中的最小值。

我们有距离 dRT [1] , dRT [2] , dRT [3] , dRT [4] , ... dRT [n]并且我们知道 dRT [m]是最小值。我们应该使用什么算法来确定权重？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:26:24.887

似乎您想要做的是设置权重，以便特定距离（dRTm）获得比任何其他距离更低的数值，即设置权重以使不等式

```
dRTm <= dRT1
...
dRTm <= dRTn 
```

都实现了。如其中一条评论中所述，将所有权重设置为零是一个简单的解决方案，因为所有距离都将相同为零并且所有不等式都可以轻松实现（用等式代替不等式），因此考虑更强的问题更有意义

```
dRTm < dRT1
...
dRTm < dRT(m-1)
dRTm < dRT(m+1)
...
dRTm < dRTn 
```

无论如何，这是一个简单的**[线性规划](http://en.wikipedia.org/wiki/Linear_programming)**问题。放入上述约束，然后最小化

```
min : dRTm 
```

它是线性的，因为计算的各个距离在求解最小 dRTm 时是常数。[您可以使用任何线性编程包](http://www.gnu.org/software/glpk/)来解决这个问题，或者如果您想自己编写一个缓慢但易于实现的解决方案，例如使用[Fourier-Motzkin](http://en.wikipedia.org/wiki/Fourier%E2%80%93Motzkin_elimination)消除。[然而，单纯形](http://en.wikipedia.org/wiki/Simplex_algorithm)法将是实际的选择方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:29:09.030

这看起来像[http://en.wikipedia.org/wiki/Linear_regression](http://en.wikipedia.org/wiki/Linear_regression)，在文章说“因此模型采用形式”之后，y 是 dRt1，x 变量是例如 dRT1p1，以及他们试图工作的 beta 变量out - 他们的参数向量 - 是你的 w1, w2...

# php - PHP：跟踪用户是否在线的最有效方法？

> ID：10748410
> 
> 赞同：10
> 
> 时间：2012-05-25T04:19:40.627
> 
> 标签：php, tracking, scalable

我正在开发一个考虑到可扩展性的项目，我已经走到了一个十字路口。在我的网站上，我想检测用户是否在线。我想不出最好的方法来处理这个问题。我的想法是这样的（在伪代码中）：

```
// SQL user table:
user {
  "name": "blah blah",
  "email": "derpy@derpyderp.com",
  "online": false
} 
```

因此，每当用户登录时，我都可以将他的`online`列更新为`true`. 然而，这最终会导致每次用户登录时都会发生 SQL 查询，如果发生这种情况，我会说，每秒 10 次登录，那么，就会发生很多查询。我想我可以做同样的事情但在不同的表中的另一种方法：

```
// Activity table:
activity {
  "user_id": 2,
  "online": true
} 
```

出于某种原因，我相信由于与表的分离，这会导致更少的内存消耗`user`。但是我不确定它是否会对性能产生任何实际影响。

所以，如果你能用你的洞察力祝福我，我会更加感激，谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-25T04:25:18.050

一般来说，在用户表中添加一列来存储`lastActivity`时间是一种常见的做法。每当用户登录或访问页面时，将当前时间存储在该字段中。如果您想知道他们是否*在线*，请查看最后记录的时间是否在某个窗口内 - 例如五分钟。您可以查询所有行以查看当前有多少用户在线作为结果。

我不会太担心每隔几秒钟运行一次查询——你的服务器可以处理它（假设这些写得很好而且不是很冗长）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:45:35.653

您可以使用 datetime 作为字段类型，并且不要忘记记录用户 IP，以便您可以跟踪时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:00:40.653

根据您希望它的工作方式，您基本上有两种选择：

定义一个超时时间，之后您认为用户已注销 使用 ajax/websockets/whatever 来轮询用户

```
 1: Timeout 
```

这是更简单的用例。每次用户请求页面时，您都会更新数据库中的时间戳。

要了解有多少用户在线，您可以对该数据库进行查询，并对过去 N 分钟内活跃的用户进行 COUNT 操作。

通过这种方式，您将相对准确地了解目前有多少人在积极使用该网站。

```
 2: Constant polling 
```

由于必须使用 Ajax 更新服务器，因此实现起来有点复杂。否则，它的工作方式与#1 类似。

每当用户在页面上时，您可以保持 websocket 打开或每 N 秒向服务器发出 ajax 请求。

通过这种方式，您可以很好地了解当前有多少人在您的网站上打开了页面，但是如果用户在浏览器中保持页面打开并且不执行任何操作，它仍然会将他们视为在线。

对这个想法的轻微修改是使用客户端上的脚本来监视鼠标移动。如果用户在 10 分钟内没有在您的页面上移动鼠标，您将停止轮询或断开 websocket。这将解决将空闲用户显示为在线的问题。

# crystal-reports - 如何在水晶报表中设置首字母大写？

> ID：10748411
> 
> 赞同：2
> 
> 时间：2012-05-25T04:19:59.707
> 
> 标签：crystal-reports

我在 Crystal report 9.0 的单词字段中的首字母大写有问题......任何人都可以帮助例如：

五十万五万四千五十九

对于以上例如。我想要首字母大写。

像**50 万 54559 只**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:24:34.810

从 Crystal Reports 版本 9 开始，您可以使用`ProperCase()`.
参考支持以上声明： [http ://www.kenhamady.com/news0209.shtml](http://www.kenhamady.com/news0209.shtml)

示例（在公式字段中）：

```
 ProperCase( my_field ); 
```

结果：

```
Five Lakhs Fifty-Four Thousand Fifty-Nine Only 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:42:01.627

您的问题答案是 Propercase({table.field})

# .net - 使用 TFS API 在单个查询中检索工作项及其链接的工作项

> ID：10748412
> 
> 赞同：11
> 
> 时间：2012-05-25T04:20:29.890
> 
> 标签：.net, c#-4.0, tfs-sdk

有谁知道是否可以使用他们的 TFS API Web 服务从 TFS 一次旅行中检索工作项列表及其**链接的工作项？**

目前，我们不得不为第一次调用期间所做的每个工作项进行第二次调用，并引入了性能问题。

如果这不可能，有没有办法在不检索它们的情况下查看链接工作项的类型（例如查看它是任务还是问题）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T15:37:08.083

您在回答中提到的[文章](http://blogs.msdn.com/b/jsocha/archive/2012/02/22/retrieving-tfs-results-from-a-tree-query.aspx)提供了一种使用[WIQL](http://blogs.msdn.com/b/team_foundation/archive/2010/07/02/wiql-syntax-for-link-query.aspx)来完成您所追求的事情的方法。当然，这不是一个糟糕的选择。

在我看来，另一种更好的方法是简单地以图形方式生成产生您所追求的结果的查询。您可能需要一个简单的“工作项和直接链接”：
![在此处输入图像描述](../Images/d58ea109d082b3c190a65722691c7888.png)

保存后，您将能够：

1.  在 VS & Team Web Access 中打开查询
2.  将查询与 Excel 联系起来并在 Excel 中处理 WI
3.  使用 TFS-API 捕获查询结果。

对于后一部分，假设您的查询名为“MyLinkedQuery”并且它位于 TeamProject“MyProj”的“团队查询”下，您可以执行以下操作：

```
using System;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.WorkItemTracking.Client;

namespace LinkedQueryResults
{
    class Program
    {
        static void Main()
        {
            TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://TFSURL"));

            var workItemStore = (WorkItemStore)teamProjectCollection.GetService(typeof(WorkItemStore));

            var project = workItemStore.Projects["MyProj"];
            QueryHierarchy queryHierarchy = project.QueryHierarchy;
            var queryFolder = queryHierarchy as QueryFolder;
            QueryItem queryItem = queryFolder["Team Queries"];
            queryFolder = queryItem as QueryFolder;

            if (queryFolder != null)
            {
                var myQuery = queryFolder["MyLinkedQuery"] as QueryDefinition;
                if (myQuery != null)
                {
                    var wiCollection = workItemStore.Query(myQuery.QueryText);
                    foreach (WorkItem workItem in wiCollection)
                    {
                        Console.WriteLine(workItem.Title); 
                    }
                }
            }       
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T06:50:19.477

找到[一篇](http://blogs.msdn.com/b/jsocha/archive/2012/02/22/retrieving-tfs-results-from-a-tree-query.aspx)关于这个问题的文章。

它允许您使用树查询，您可以在其中获取父项 id 及其在一个查询中的链接项 id。使用它，可以使用第二个查询来获取实际的详细工作项对象。解决问题的两个查询。

编辑：我还在我的博客上写了一篇关于这个的[帖子。](http://prabuw.github.io/posts/retrieving-work-items-using-the-team-foundation-server-api/)

# android - 如何计算 GNU make 的 -jN 参数以及它如何影响我的 android 构建？

> ID：10748416
> 
> 赞同：2
> 
> 时间：2012-05-25T04:20:40.037
> 
> 标签：android, linux, build, makefile, gnu-make

GNU make 可以使用 -jN 参数处理并行任务，并且通常使用的任务数 N 是用于构建的计算机上硬件线程数的 1 到 2 倍。

例如，在双 E5520 机器（2 个 CPU，每个 CPU 4 个内核，每个内核 2 个线程）上，最快的构建是使用 make -j16 和 make -j32 之间的命令进行的。

现在我对我的构建服务器不太了解，但是当我运行时`cat /proc/cpuinfo`

它显示它有 4 个处理器，每个信息都是这样的

```
processor   : 0
vendor_id   : GenuineIntel
cpu family  : 6
model       : 37
model name  : Intel(R) Core(TM) i3 CPU         530  @ 2.93GHz
stepping    : 2
cpu MHz     : 2933.000
cache size  : 4096 KB
physical id : 0
siblings    : 4
core id     : 0
cpu cores   : 2
apicid      : 0
initial apicid  : 0
fpu     : yes
fpu_exception   : yes
cpuid level : 11
wp      : yes
flags       : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm arat tpr_shadow vnmi flexpriority ept vpid
bogomips    : 5851.87
clflush size    : 64
cache_alignment : 64
address sizes   : 36 bits physical, 48 bits virtual
power management: 
```

**问题：**

1>那么在这里我如何为我的构建计算 N？

2>如果我的系统最多可以支持 8 个线程，如果我放弃了`make -j32`怎么办？

3>如果我只使用 make 那么只会运行 1 个线程进行编译怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:32:39.347

使用 -j 选项不会伤害任何东西。它仅用于调整 make 应该使用的同时处理的数量，以便从系统中获得最大的性能来进行构建。

如果您想让 CPU 时间更多地用于您正在做的其他事情（也许更快的浏览响应），您可以将其设置为小于 4，每个内核 x 2 个超线程。

您可以将其设置为 4 以上，以便其中一个进程使用每个执行单元，而其他处理器正在等待 I/O。

如果你有足够的内存 -j32 应该不会伤害任何东西，但它也无济于事。请参阅评论，了解您不想过度使用的原因。

如果您一直在制作一个软件包，您可以进行试验，看看哪种设置可以使其构建速度最快，而不会影响您的交互性能。另一种调优方法是查看*最高*输出并查看 -j 多处理级别在大多数情况下保持 CPU 利用率接近 100%。

在他的*Linux Kernel in a Nutshell* book [1] 中，Greg Kroah-Hartman 建议在设置 -j 选项时将执行单元的数量增加一倍。对你来说就是这样`-j8`。

[1]简而言之*Linux 内核*，Greg Kroah-Hartman，pg。26\. [ [http://www.kroah.com/lkn/]](http://www.kroah.com/lkn/%5d)

# visual-c++ - 在 Visual C++ 中控制类中的表单元素

> ID：10748418
> 
> 赞同：0
> 
> 时间：2012-05-25T04:20:49.703
> 
> 标签：visual-c++, user-interface

我创建了这个自定义测试类：

```
#include "Form1.h"

class Demo
{
public:
    void sayHello()
    {
        System::Windows::Forms::Form1->Text = "Hello Form!"; // does not work
        Form1->Text = "Hello Form!"; // does not work
        Form1.Text = "Hello Form!"; // does not work
    }
}; 
```

我基本上得到了这个编译器错误：

```
c:\users\pieter kubben\documents\visual studio 2010\projects\testclassref\testclassref\Demo.h(8): error C2065: 'Form1' : undeclared identifier
c:\users\pieter kubben\documents\visual studio 2010\projects\testclassref\testclassref\Demo.h(8): error C2227: left of '->Text' must point to class/struct/union/generic type 
```

所以我猜它看不到Form1。`sayHello()`反过来，在 Form1 中单击按钮时调用该函数是没有问题的。

我注意到我的`main()`函数（由 IDE 自动生成）包含这一行： `Application::Run(gcnew Form1());`

因此，在我看来，尽管 Form1.h 确实存在（当然），但在编译器启动时尚未创建 Form1。

如何从我的自定义类中访问 Form1 元素？例如更改 Form1.Text？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:33:36.047

创建一个全局变量来保存您的表单对象并更改生成的 IDE 以显示这样的表单

```
Form1 frm=gvnew Form1();
Application::Run(frm); 
```

现在 frm 是 form1 类的引用，您可以访问它来访问 Form1 类成员。如果要在 Main 函数之外访问 frm 对象，请声明一个全局变量并访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T13:56:42.107

```
error C3145: 'form' : global or static variable may not have managed type 
```

这就是我得到的，当您尝试制作形式的全局变量`Form1 ^frm;`时`Form1 ^frm = gcnew Form1();`

所以我为它创建了容器，这对我来说很好。有一个例子

```
ref class FormContainer{
public:
    static MyForm ^form;
};
void Main(array<String^>^ args)
{
    FormContainer::form = gcnew MyForm();
    Application::Run(FormContainer::form);
} 
```

现在您可以访问表单公共成员，因此请务必制作您需要的 getter 和 setter。

```
void SayHello(){
  FormContainer::form->label1->Text = "Hello";
} 
```

PS我正在使用VS 2013。

# android - 如何更改顶部的应用程序名称

> ID：10748420
> 
> 赞同：1
> 
> 时间：2012-05-25T04:21:11.373
> 
> 标签：android

我的应用程序中的每个屏幕都显示正确的应用程序名称，但 1 个屏幕显示不同的名称，那是因为我从不同的应用程序复制粘贴了该活动的代码。现在怎么改？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T04:33:22.583

**您可以在String.xml**中设置它，而不是单独设置所有 Activity ，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
     <string name="app_name">You App Name</string>
</resources> 
```

除此之外，您应该添加清单文件

```
android:label="@string/app_name" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T04:26:38.077

试试这个。

在您的 onCreate() 方法中编写此代码。

```
this.setTitle("Your Title"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:30:37.110

或者也可能是通过清单更改您放置活动标签的位置

by : 属性: android:label

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T04:33:29.900

转到***AndroidManifest.xml***。

检查您的**Activity**是否正确`android:label`。

# perl - 加密 Firefox 插件中的数据

> ID：10748422
> 
> 赞同：0
> 
> 时间：2012-05-25T04:21:15.793
> 
> 标签：perl, encryption, firefox-addon, firefox-addon-sdk

我正在使用 Firefox Add-on SDK 中的请求模块来访问我的 Perl 应用程序。在 Firefox 面板中，用户将输入他的名称和密码，这些名称和密码会传递给我的 Perl CGI 应用程序。

首先，我想知道这是否是一种安全的方法。

其次，是否有机会加密数据然后在服务器端再次解密（使用 CGI 模块用 Perl 编写）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:46:25.300

> 首先，我想知道这是否是一种安全的方法。

就客户端而言 - 取决于您如何存储此密码。如果您记住密码而不是要求用户每次都再次输入密码，那么您应该为此[使用登录管理器](https://developer.mozilla.org/en/XPCOM_Interface_Reference/Using_nsILoginManager)（如果用户定义了主密码，它将加密存储）。使用附加 SDK 时，您需要[chrome 权限](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/tutorials/chrome.html)：

```
var {Cc, Ci, components} = require("chrome"); 
```

然后，您可以`Components.classes`在示例中替换为`Cc`、`Components.interfaces`by`Ci`和`Components.Constructor`by `components.Constructor`，这些代码片段应该在您的扩展程序中正常工作。

> 其次，是否有机会加密数据然后在服务器端再次解密

如果您的目标是防止窃听，那么您*不想*使用对称加密 - 它使用相同的密钥进行加密和解密，并且任何查看扩展源代码的人都可以看到用于加密的密钥。所以你想使用像 RSA 这样的非对称（公钥）加密算法。但是，目前在 Firefox 中“手动”使用它非常复杂，并且涉及通过[js-ctypes访问](https://developer.mozilla.org/en/js-ctypes)[NSS 库](http://www.mozilla.org/projects/security/pki/nss/)（[DOMCrypt 扩展](https://addons.mozilla.org/addon/domcrypt/)就是这样做的）。更不用说您仍然需要考虑[重放攻击](http://en.wikipedia.org/wiki/Replay_attack)等。更简单的解决方案是使用 HTTPS 连接与服务器通信。

# hidden-markov-models - 马尔可夫链和隐马尔可夫模型有什么区别？

> ID：10748426
> 
> 赞同：56
> 
> 时间：2012-05-25T04:21:40.393
> 
> 标签：hidden-markov-models, markov-chains, markov

马尔可夫链模型和隐马尔可夫模型有什么区别？我在维基百科中阅读过，但无法理解其中的差异。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-06-25T22:24:27.000

为了举例说明，我将使用自然语言处理中的一个示例。想象一下，你想知道这句话的概率：

**我喜欢咖啡**

在马尔可夫模型中，您可以通过计算来估计其概率：

```
P(WORD = I) x P(WORD = enjoy | PREVIOUS_WORD = I) x P(word = coffee| PREVIOUS_WORD = enjoy) 
```

现在，假设我们想知道这个句子的词性标签，也就是说，如果一个词是过去时动词、名词等。

我们没有*观察到*该句子中的任何词性标签，但我们*假设*它们在那里。因此，我们计算词性标签序列的概率是多少。在我们的例子中，实际的顺序是：

> PRP-VBP-NN

*（其中 PRP=“人称代词”，VBP=“动词，非第三人称单数现在”，NN=“名词，单数或质量”。见[https://cs.nyu.edu/grishman/jet/guide/PennPOS .html](https://cs.nyu.edu/grishman/jet/guide/PennPOS.html)用于 Penn POS 标记的完整符号）*

可是等等！这是一个我们可以应用马尔可夫模型的序列。但我们称之为隐藏，因为词性序列从未被直接观察到。当然，在实践中，我们将计算许多这样的序列，我们希望找到最能解释我们观察的隐藏序列（例如，我们更有可能看到从确定器生成的诸如“the”、“this”之类的词（ DET) 标签)

我遇到过的最好的解释是在 1989 年 Lawrence R. Rabiner 的一篇论文中：[http ://www.cs.ubc.ca/~murphyk/Bayes/rabiner.pdf](http://www.cs.ubc.ca/~murphyk/Bayes/rabiner.pdf)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-08-01T03:30:57.110

马尔可夫模型是一个*状态机*，状态变化是概率。在隐马尔可夫模型中，您不知道概率，但您知道结果。

例如，当你掷硬币时，你可以得到概率，但是，如果你看不到掷硬币，并且有人在每次掷硬币时移动了五个手指中的一个，你可以采取手指运动并使用隐马尔可夫模型来计算得到抛硬币的最佳猜测。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-03-19T11:14:36.833

据我了解，问题是：**马尔可夫过程和隐马尔可夫过程有什么区别？**

马尔可夫过程 (MP) 是一个随机过程，具有：

1.  有限数量的状态
2.  这些状态之间的概率转换
3.  仅由当前状态确定的下一个状态（马尔可夫属性）

隐马尔可夫过程 (HMM) 也是一个随机过程，其中：

1.  有限数量的状态
2.  这些状态之间的概率转换
3.  仅由当前状态（马尔可夫属性）确定的下一个状态和
4.  我们不确定我们处于哪个状态：当前状态发出一个观察。

**示例 - (HMM) 股票市场**：
在股票市场中，人们以公司的价值进行交易。让我们假设股票的实际价值是 100 美元（这是不可观察的，实际上你永远不知道）。你真正看到的是它的交易价值：让我们假设在这种情况下是 90 美元（这是可观察到的）。

对于对马尔科夫感兴趣的人：有趣的部分是当你开始对这些模型采取行动时（在前面的例子中，为了赚钱）。这涉及马尔可夫决策过程（MDP）和部分可观察马尔可夫决策过程（POMDP）。为了评估这些模型的一般分类，我在下图中总结了每个马尔可夫模型的主要特征。

![不同马尔可夫模型的分类](../Images/91ab2b47d479e024d3c4fb43d0f0d616.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-05-02T06:18:17.767

由于 Matt 使用词性标签作为 HMM 示例，我可以再添加一个示例：语音识别。几乎所有的大词汇量连续语音识别 (LVCSR) 系统都基于 HMM。

“马特的例子”： **我喜欢咖啡**

**在马尔可夫模型中，**您可以通过计算来估计其概率：

```
P(WORD = I) x P(WORD = enjoy | PREVIOUS_WORD = I) x P(word = coffee| PREVIOUS_WORD = enjoy) 
```

**在隐马尔可夫模型中，**

假设有 30 个不同的人阅读**“我喜欢拥抱”**这句话，我们必须识别它。每个人都会以不同的方式发音这句话。所以我们不知道这个人的意思是“拥抱”还是“霸占”。我们只会得到实际单词的概率分布。

简而言之，隐马尔可夫模型是一种统计马尔可夫模型，其中被建模的系统被假定为具有未观察（隐藏）状态的马尔可夫过程。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-09T07:18:52.760

隐马尔可夫模型是具有两个层次的双嵌入随机过程。

上层是马尔可夫过程，状态是不可观察的。

实际上，观察是上层马尔可夫状态的概率函数。

不同的马尔可夫状态会有不同的观测概率函数。

# django - 为什么在 django-templated-email 中调用 send_templated_mail() 时会出现 TypeError？

> ID：10748427
> 
> 赞同：0
> 
> 时间：2012-05-25T04:21:41.453
> 
> 标签：django, email

当我以这种方式调用 send_templated_mail() 时：

```
from templated_email import send_templated_mail

send_templated_mail(
    template_name='welcome',
    from_email='from@email.com',
    recipient_list=['recipient@email.com'],
    context={
        'username':'username1',
        'full_name':'user name',
        'signup_date':'today',
    },
    headers={'My-Custom-Header':'Custom Value'}
) 
```

我收到以下类型错误：

> send_templated_mail() 至少需要 4 个参数（1 个给定）

根据我的阅读，只有 3 个必需的参数，它们是列出的前三个。知道是什么导致了 TypeError 吗？提前致谢。

以下是连接到 MailChimp 的相关 settings.py 设置：

```
TEMPLATED_EMAIL_BACKEND = 'templated_email.backends.mailchimp_sts.TemplateBackend'

MAILCHIMP_API_KEY = 'myAPIkey'

#For the django back-end specifically
TEMPLATED_EMAIL_MAILCHIMP = {
    'welcome':{
      'subject':'Welcome to my website',
      'track_opens':True,
      'track_clicks':False,
      'tags':['my','little','pony'],
    }
}

#Email template repository
TEMPLATED_EMAIL_TEMPLATE_DIR = 'templated_email/'
TEMPLATED_EMAIL_FILE_EXTENSION = 'email' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:59:57.707

你也可以试试这个设置

```
from templated_email import send_templated_mail
send_templated_mail(
        'email',
        'from@yourwebsite.com',
        ['to@person.com'],
        { 'username':username1 }
    ) 
```

在`settings.py`添加

```
TEMPLATED_EMAIL_DJANGO_SUBJECTS = {'email':'welcome',} 
```

使用该行代码，它将自动查找名为“templated_email/email.txt”或“templated_email/email.html”的任何模板

# python - 捕获图像并将其与另一个图像进行比较的python脚本

> ID：10748430
> 
> 赞同：2
> 
> 时间：2012-05-25T04:21:45.990
> 
> 标签：python

基本上，我想自动化一些东西。我会捕获某个按钮的 100x50 图片，并有一个脚本以相同大小拍摄相同区域的图片，然后比较两张图片以查看它们是否不同。如果它们不同，它不会做任何事情，如果它们相似 +/- 一定数量，它会点击它。

我已经完成了屏幕截图，我只是不知道如何将它们与 PIL 进行比较。我做了很多谷歌搜索但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:40:20.117

您可以使用`pylab.imread`它轻松地将图像读入 NumPy 数组：

```
In [3]: import scipy, pylab

In [4]: x = pylab.imread('example.jpg')

In [5]: x.shape
Out[5]: (480, 640, 3) 
```

您可以查看图像或其任何子集：

```
In [6]: pylab.imshow(x)
Out[6]: <matplotlib.image.AxesImage at 0x98e564c>

In [7]: pylab.show() 
```

如果您想比较两个 8×8 块（例如，红色和蓝色层的左上块），您可以计算均方误差：

```
In [8]: x[:8,:8,0]
Out[8]: 
array([[147, 143, 146, 144, 146, 148, 146, 149],
       [145, 142, 146, 145, 147, 149, 148, 151],
       [143, 141, 146, 145, 147, 147, 148, 150],
       [143, 143, 146, 146, 146, 145, 147, 148],
       [147, 147, 147, 148, 147, 145, 146, 146],
       [146, 147, 145, 147, 148, 145, 147, 146],
       [146, 147, 144, 147, 147, 144, 146, 144],
       [147, 148, 144, 147, 147, 144, 146, 144]], dtype=uint8)

In [9]: x[:8,:8,1]
Out[9]: 
array([[125, 121, 122, 120, 118, 120, 116, 120],
       [123, 120, 122, 122, 119, 121, 118, 122],
       [122, 120, 123, 122, 120, 120, 118, 121],
       [122, 122, 123, 122, 120, 118, 117, 119],
       [124, 123, 123, 124, 121, 119, 119, 119],
       [122, 123, 120, 122, 121, 119, 119, 119],
       [121, 122, 116, 119, 119, 117, 119, 117],
       [122, 122, 115, 118, 119, 116, 119, 117]], dtype=uint8)

In [10]: def mse(x, y):
   ....:     return scipy.mean((x.astype(float)-y)**2)

In [11]: mse(x[:8,:8,0], x[:8,:8,1])
Out[11]: 676.0625 
```

# java - 处理来自 String.getBytes("UTF-8") 的 UnsupportedEncodingException 的推荐方法

> ID：10748440
> 
> 赞同：21
> 
> 时间：2012-05-25T04:22:37.670
> 
> 标签：java, string, character-encoding

在库方法中调用 String.getBytes("UTF-8") 时处理[UnsupportedEncodingException的推荐方法是什么？](http://docs.oracle.com/javase/6/docs/api/java/io/UnsupportedEncodingException.html)

如果我正确阅读[http://docs.oracle.com/javase/6/docs/technotes/guides/intl/encoding.doc.html，UTF-8](http://docs.oracle.com/javase/6/docs/technotes/guides/intl/encoding.doc.html)编码应该*始终*可用，这让我相信没有将此异常传递给库的使用者的原因（即，`throws`在方法签名中添加一个子句）。似乎任何使 UTF-8 编码设施不可用的故障模式都是灾难性的，导致我编写了这个处理程序：

```
 try
    {
        ....
        return "blah".getBytes("UTF-8");
    }
    catch (UnsupportedEncodingException e)
    {
        // we're assuming UTF-8 encoding is always available.
        // see
        // http://docs.oracle.com/javase/6/docs/technotes/guides/intl/encoding.doc.html
        e.printStackTrace();
        return null; //prevent compile-time "method must return a result" errors
    } 
```

是否存在此代码段无法解决的故障模式？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-25T04:40:04.347

你知道我做什么吗？

```
return "blah".getBytes( Charset.forName( "UTF-8" ) ); 
```

这个不会引发检查异常。

**更新**：从 Java 1.7 开始，我们有了[StandardCharsets](https://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html)。

```
return "blah".getBytes( StandardCharsets.UTF_8 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-07T20:03:54.420

我在尝试确定 UTF-8 是否始终可用时遇到了这个问题。所以谢谢你的链接。

我同意，在使用保证可用的特定字符集进行编码和解码时，无需抛出已**检查异常。**如果字符集是传入的变量，我可能会抛出 UnsupportedEncodingException。

这就是我在一段类似的 Android 代码中所做的：

```
public static String encode(String input) {
    try {
        return URLEncoder.encode(input, CharEncoding.UTF_8);
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }
} 
```

`CharEncoding.UTF_8`只是“UTF-8”的 Apache Commons 的字符串常量。

Judge Mental 的使用建议`StandardCharsets.UTF_8`很棒，但对于我们这些从事 Android 开发的人来说，它仅适用于 SDK 19 (KitKat) 及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-25T21:16:26.693

如果您使用 Lombok，则可以使用 @SneakyThrows 注解来避免这种情况。

**从龙目岛文档：**

“@SneakyThrows 可用于偷偷抛出已检查的异常，而无需在方法的 throws 子句中实际声明这一点。

*   一个“不可能”的例外。例如， new String(someByteArray, "UTF-8"); 声明它可以抛出 UnsupportedEncodingException 但根据 JVM 规范，UTF-8 必须始终可用。当您使用 String 对象时，这里的 UnsupportedEncodingException 与 ClassNotFoundError 的可能性差不多，而且您也没有捕捉到那些！"

[https://projectlombok.org/features/SneakyThrows](https://projectlombok.org/features/SneakyThrows)

# javascript - 从 iframe 访问和更改父页面（使用 jquery）

> ID：10748449
> 
> 赞同：23
> 
> 时间：2012-05-25T04:24:28.113
> 
> 标签：javascript, jquery, html, iframe

有什么方法可以从 iframe 访问父页面（并更改父页面）？

```
<body>
   <iframe src="frame1.html" name="frame1" height="100%"></iframe>
   <div id="test1"></div>
</body> 
```

在 frame1.html 中`<a href=..>`，我想在单击时将文本“ `<h1>clicked</h1>`”添加到中。`<div id="test1"></div>``<a href..>`

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-25T05:31:09.547

如果您的子页面（frame1.html）与父页面位于同一域，您可以在子窗口中编写如下代码：

```
 $('#test1', parent.document).html('<h1>clicked</h1>'); 
```

第二个参数提供`context`在其中搜索与第一个参数匹配的元素。文档在这里：[http ://api.jquery.com/jQuery/#jQuery-selector-context](http://api.jquery.com/jQuery/#jQuery-selector-context)

```
 jQuery( selector [, context ] ) 
```

因此，您的代码 (frame1.html) 可能如下所示：

```
 <a href="..." 
  onclick="$('#test1', parent.document).html('<h1>clicked</h1>');">click me</a> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-25T06:22:06.543

**重要提示：**只有在父 iframe 和 iframe 都来自同一个域的情况下，才能访问输入和输出 iframe，否则由于*Same Origin Policy* ，您无法访问。

请注意，这两个部分都有自己的文档。从 iframe 访问父对象很简单

```
parent.document 
```

并且从父母那里是以下之一：

```
window.frames['iframeName']

(window.frames.length /*gives you the number of iframes in your document*/ ) 
```

或使用 id 引用它并执行以下操作（注意支持！）

```
var iframe = document.getElementById('iframe');
var doc = iframe.contentDocument? iframe.contentDocument:iframe.contentWindow.document; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-11T20:13:17.387

下面的代码应该可以正常工作：

```
$(parent.document).find("#selector"); 
```

选择器是从父文档中执行一些动作的。例如：

```
$(parent.document).find("#selector").remove(); 
```

# iphone - 导航控制器会始终重新创建/分配推送的控制器，还是缓存它？

> ID：10748452
> 
> 赞同：0
> 
> 时间：2012-05-25T04:24:53.090
> 
> 标签：iphone, objective-c, ipad, uinavigationcontroller

考虑使用此代码将新控制器推送到导航堆栈：

```
 AlphaColorController * a = [[AlphaColorController alloc] initWithColor:color name:name alpha:0.25];
  [[self navigationController] pushViewController:a animated:YES];
  [a release]; 
```

没有为 保留指针`a`。如果用户导航到这个新控制器，然后导航“后退”，然后再次“前进”，导航控制器是否足够聪明，可以知道该控制器已经存在，或者如果不存在，则再次分配它？如果控制器在多次推送之前已经实例化，那么首先测试（使用指针）有多大必要？

更新：换一种说法，每次用户导航到导航控制器的特定区域时，这段代码是否会有效地重新分配控制器？导航控制器每次都会重新创建并推送新创建的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:29:40.400

我认为您不了解您的代码是如何运行的。实际上，您正在创建您所说的新视图控制器对象，并且实际上是在将其推送到导航堆栈上。你是什​​么意思不保留指向它的指针？那个小星星不是白来的！

NavigationController 会保留对其导航堆栈的引用，直到视图从堆栈中弹出。在这种情况下，所述视图被释放和销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:30:36.130

当导航控制器推送视图控制器时，视图控制器的指针将被添加到导航控制器的堆栈中。所以保留计数器+1

导航控制器保留它推送的视图控制器的所有引用。

# macos - 在 MacOS 上的 sed 中用换行符替换逗号？

> ID：10748453
> 
> 赞同：325
> 
> 时间：2012-05-25T04:25:01.137
> 
> 标签：macos, unix, sed

我有一个逗号分隔的字符串文件。我正在尝试用新行替换逗号。我试过了：

```
sed 's/,/\n/g' file 
```

但它不工作。我错过了什么？

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2012-05-25T16:27:21.367

改用`tr`：

```
tr , '\n' < file 
```

* * *

## 回答 #2

> 赞同：338
> 
> 时间：2013-08-23T19:06:11.317

使用[ANSI-C 带引号的字符串](https://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html) `$'string'`

您需要一个反斜杠转义的文字换行符才能进入 sed。至少在 bash 中，`$''`字符串将替换`\n`为真正的换行符，但是您必须将 sed 看到的反斜杠加倍以转义换行符，例如

```
echo "a,b" | sed -e $'s/,/\\\n/g' 
```

请注意[，这不适用于所有 shell](https://unix.stackexchange.com/questions/371827/do-shells-other-than-bash-and-zsh-support-ansi-c-quoting-e-g-string)，但适用于最常见的 shell。

* * *

## 回答 #3

> 赞同：132
> 
> 时间：2012-09-07T20:24:55.280

```
sed 's/,/\
/g' 
```

适用于 Mac OS X。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-04-15T23:23:40.443

如果您的 sed 用法倾向于完全是替换表达式（就像我的倾向于那样），您也可以`perl -pe`使用

```
$ echo 'foo,bar,baz' | perl -pe 's/,/,\n/g'
foo,
bar,
baz 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-03-13T09:32:19.813

MacOS不同，有两种方法可以在mac中用sed解决这个问题

*   首先，使用`\'$'\n''`replace `\n`，它可以在 MacOS 中工作：

    ```
    sed 's/,/\'$'\n''/g' file 
    ```

*   第二，只需使用一个空行：

    ```
    sed 's/,/\
    /g' file 
    ```

*   附言。注意范围由 `'`

*   三、用gnu-sed替换mac-sed

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-08-10T17:51:41.993

显然`\r`是关键！

```
$ sed 's/, /\r/g' file3.txt > file4.txt 
```

改造了这个：

```
ABFS, AIRM, AMED, BOSC, CALI, ECPG, FRGI, GERN, GTIV, HSON, IQNT, JRCC, LTRE,
MACK, MIDD, NKTR, NPSP, PME, PTIX, REFR, RSOL, UBNT, UPI, YONG, ZEUS 
```

对此：

```
ABFS
AIRM
AMED
BOSC
CALI
ECPG
FRGI
GERN
GTIV
HSON
IQNT
JRCC
LTRE
MACK
MIDD
NKTR
NPSP
PME
PTIX
REFR
RSOL
UBNT
UPI
YONG
ZEUS 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-01-13T21:09:19.067

这适用于 MacOS Mountain Lion (10.8)、Solaris 10 (SunOS 5.10) 和 RHE Linux（Red Hat Enterprise Linux Server 版本 5.3，Tikanga）...

```
$ sed 's/{pattern}/\^J/g' foo.txt > foo2.txt 
```

...`^J`通过做`ctrl`++来`v`完成`j`。介意`\`之前的`^J`。

PS，我知道 RHEL 中的 sed 是 GNU，MacOS sed 是基于 FreeBSD 的，虽然我不确定 Solaris sed，但我相信这几乎适用于任何 sed。YMMV 你...

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-07-17T11:35:28.973

为了使它完整，这也有效：

```
echo "a,b" | sed "s/,/\\$(echo -e '\n\r')/" 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-06-17T23:31:16.053

虽然我迟到了这篇文章，但只是更新了我的发现。此答案仅适用于**Mac OS X。**

```
$ sed 's/new/
> /g' m1.json > m2.json
sed: 1: "s/new/
/g": unescaped newline inside substitute pattern 
```

在上面的命令中，我尝试使用 Shift+Enter 添加不起作用的新行。因此，这次我尝试按照错误提示“转义”“未转义的换行符”。

```
$ sed 's/new/\
> /g' m1.json > m2.json 
```

**工作！（在 Mac OS X 10.9.3 中）**

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-04-26T14:01:39.657

```
$ echo $PATH | sed -e $'s/:/\\\n/g' 
/usr/local/sbin
/Library/Oracle/instantclient_11_2/sdk
/usr/local/bin 
```

...

在莫哈韦为我工作

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-08-20T08:12:43.380

只是为了澄清：OSX（10.8；达尔文内核版本 12.4.0）上的 sed 手册页说：

[...]

### Sed 正则表达式

```
 The regular expressions used in sed, by default, are basic regular expressions (BREs, see re_format(7) for more information), but extended
 (modern) regular expressions can be used instead if the -E flag is given.  In addition, sed has the following two additions to regular
 expressions:

 1\.   In a context address, any character other than a backslash (``\'') or newline character may be used to delimit the regular expression.
      Also, putting a backslash character before the delimiting character causes the character to be treated literally.  For example, in the
      context address \xabc\xdefx, the RE delimiter is an ``x'' and the second ``x'' stands for itself, so that the regular expression is
      ``abcxdef''.

 2\.   The escape sequence \n matches a newline character embedded in the pattern space.  You cannot, however, use a literal newline charac-
      ter in an address or in the substitute command. 
```

[...]

所以我想一个人必须使用 tr - 如上所述 - 或者 nifty

```
sed "s/,/^M
/g" 
```

注意：您必须在 vi 编辑器中键入 < *ctrl>* -v,< *return>*才能获得 '^M'

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-24T07:11:59.473

`sed`macOS Mojave 上的 2005 年发布，因此一种解决方案是安装`gnu-sed`,

```
brew install gnu-sed 
```

然后使用`gsed`会如你所愿，

```
gsed 's/,/\n/g' file 
```

如果您愿意，`sed`只需. 重新启动你的任期，然后你的命令行是.`sudo sh -c 'echo /usr/local/opt/gnu-sed/libexec/gnubin > /etc/paths.d/brew'``brew info gnu-sed``sed``gsed`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-30T15:36:32.413

FWIW，以下行在 Windows 中工作，并用换行符替换我的路径变量中的分号。我正在使用安装在我的 git bin 目录下的工具。

```
echo %path% | sed -e $'s/;/\\n/g' | less 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-25T09:39:20.380

我发现了另一个也在工作的命令。

```
find your_filename.txt -type f -exec sed -i 's/,/\n/g' {} \; 
```

# php - Yii - 创建一个临时模型

> ID：10748455
> 
> 赞同：0
> 
> 时间：2012-05-25T04:25:13.347
> 
> 标签：php, yii

我正在寻求创建临时模型的最佳实践。我想创建一个模型“菜单”，它不是来自数据库表，而是在代码中硬编码。

原因是我可以从两个不同的视图/布局调用菜单模型。

我尝试以此为起点。

/model/Menu.php

```
class Menu extends CModel
{
    public getMenu() {
        return array('home'=>'home/index',
                     'product'=>'product/index',
                     'order'=>'order/index',
        );
    }
} 
```

你认为这很糟糕还是有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:52:33.617

我认为它应该是一个小部件，而不是模型。甚至是局部视图。取决于你将如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T20:34:30.470

我建议像您一样将它创建为一个类，但我不会扩展 CModel 以避免不必要的开销。就像是：

```
class Menu{
    public static getMenu() {
        return array('home'=>'home/index',
                     'product'=>'product/index',
                     'order'=>'order/index',
        );
    }
} 
```

# python - Django查询分组结果

> ID：10748459
> 
> 赞同：1
> 
> 时间：2012-05-25T04:25:33.257
> 
> 标签：python, database, django

好的，所以我有以下模型：

```
Transaction
  currency_code: CharField
  date_time: DateTimeField
  price:     IntegerField 
```

我想进行一个查询，该查询返回一个不同日期的字典，其中包含每个 currency_code 下所有交易的总数。所以像：

```
{
  '2012/05/01': {
    'USD': 5000,
    'EUR': 3500,
  }
  '2012/05/02': {
    'USD' ... 
```

到目前为止，我有这个查询，但我有点卡住了：

```
Transaction.objects.extra({'date' : 'date(date_time)'}).values('date', 'currency_code').annotate(Sum('price')) 
```

这让我得到如下结果：

```
[
  {'date': datetime.date(2012, 5, 1), 'price__sum': 5000, 'currency_code': 'USD'}
  {'date': datetime.date(2012, 5, 1), 'price__sum': 3500, 'currency_code': 'EUR'}
  ...
] 
```

关于如何让我的查询按日期分组的任何建议？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:47:19.897

这是完成任务的非 ORM 方法：

```
>>> from collections import defaultdict
>>> d = defaultdict(dict)
>>> l = [{'a': 1, 'price': 50, 'currency': 'USD'},{'a': 1, 'price': 55, 'currency': 'USD'}, {'a': 1, 'price': 0, 'currency': 'USD'},{'a':1, 'price': 20, 'currency': 'EUR'}]
>>> for i in l:
...     if i['currency'] not in d[i['a']].keys():
...         d[i['a']][i['currency']] = i['price']
...     else:
...         d[i['a']][i['currency']] += i['price']
... 
>>> d
defaultdict(<type 'dict'>, {1: {'USD': 105, 'EUR': 20}}) 
```

这是 groupby 版本：

```
>>> l2 = []
>>> for i,g in groupby(l, lambda x: x['currency']):
...     price = 0.0
...     for p in g:
...        price += p['price']
...     l2.append({'a': p['a'], 'total' : price, 'currency': i})
... 
>>> l2
[{'a': 1, 'currency': 'USD', 'total': 105.0}, {'a': 1, 'currency': 'EUR', 'total': 20.0}, {'a': 2, 'currency': 'KWD', 'total': 2.0}, {'a': 2, 'currency': 'GBP', 'total': 21.0}] 
```

# android - Android：Textview 中的规则/水平线

> ID：10748467
> 
> 赞同：4
> 
> 时间：2012-05-25T04:27:59.577
> 
> 标签：android, textview

在 Android 中，我有一个 TextView，它的内容是动态的。我想在每行文本之后显示一条水平线。我搜索了很多并找到了 EditText（[如何在 Android 中使用规则/水平线对齐 EditText 中的文本？](https://stackoverflow.com/questions/8667506/how-to-use-ruled-horizontal-lines-to-align-text-in-edittext-in-android)）。我打算在它们下面绘制动态 TextView 和一条水平线。但我不知道如何检测行尾。任何帮助将不胜感激。[我希望与如何使用规则/水平线对齐 Android 中 EditText 中的文本](https://stackoverflow.com/questions/8667506/how-to-use-ruled-horizontal-lines-to-align-text-in-edittext-in-android)的附加图像具有相同的效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T23:40:43.783

我正在使用在**EditText**中的每一行文本之间绘制线条的技术，然后我将通过将**setKeyListener(null)设置为自定义 EditText 对象来使****EditText**不可编辑，这样 EditText 就像**TextView** :)

 ***** * *

## 一个自定义的 EditText，它在显示的每行文本之间画线：

```
public class LinedEditText extends EditText {
    private Rect mRect;
    private Paint mPaint;

    // we need this constructor for LayoutInflater
    public LinedEditText(Context context, AttributeSet attrs) {
        super(context, attrs);

        mRect = new Rect();
        mPaint = new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(0x800000FF);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int count = getLineCount();
        Rect r = mRect;
        Paint paint = mPaint;

        for (int i = 0; i < count; i++) {
            int baseline = getLineBounds(i, r);

            canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
        }

        super.onDraw(canvas);
    }
} 
```

* * *

现在在需要**TextView的地方使用****LinedEditText**类的对象并使其不可编辑。

 **## 一个例子：

```
public class HorizontalLine extends Activity{
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);
        setTitle("Android: Ruled/horizonal lines in Textview");

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        LayoutParams textViewLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        LinedEditText et = new LinedEditText(this, null);
        et.setText("The name of our country is Bangladesh. I am proud of my country :)");
        et.setLayoutParams(textViewLayoutParams);
        et.setKeyListener(null);

        ll.addView(et);
        this.setContentView(ll);

    }

} 
```

* * *

**et.setKeyListener(null)**使 EditText 不可编辑，因此它就像一个 TextView。

* * *

## 输出：

![在此处输入图像描述](../Images/05b20a8a788bd3b3ae3eb6e3e0a0e9e5.png)

## 光标问题：

如果您仅使用**et.setKeyListener(null)**，那么它只是不听键，但用户可以在 EditText 上看到光标。如果您不想要此光标，只需添加以下行即可禁用 EditText：

```
 et.setEnabled(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:51:12.357

您可以使用视图绘制线：对于水平线：

```
<View
android:layout_height="1dp"
android:layout_width="fill_parent"
android:background="#ffffff" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:39:35.563

```
<TextView  
android:layout_height="1dp"  
android:layout_width="fill_parent"/> 
```******

# parsing - 如何从所有 MIB 中获取所有 OID

> ID：10748468
> 
> 赞同：2
> 
> 时间：2012-05-25T04:28:04.517
> 
> 标签：parsing, snmp, oid, mib

我想获取加载在管理器上的 MIB 中所有 OID 的列表并将其显示给用户，以便他们可以选择哪个 MIB 对象来执行 GET/SET 请求。我还想获取对象的语法和最大访问权限。我正在使用 C++ 编程。我想解析 MIB 以获取 OID，而不是使用 snmpwalk。我正在尝试使用 Net-SNMP MIB_API。我查看了手册页，但不清楚如何使用这些功能来实现我想要做的事情。

我看到当我们调用 init_mib() 时已经调用了 read_all_mibs()。这意味着我不需要再次调用 read_all_mibs() ，对吗？谁能指导我应该做的 init_mib() 之后的下一步是什么。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:32:24.143

您应该查看该`apps/snmptranslate.c`文件以获取有关如何遍历加载的 mib 树以获取语法和最大访问详细信息等信息的示例。

而且，不，如果你打电话`init_snmp()`或者`init_mib()`你不需要打电话`read_all_mibs()`

# javascript - 可以使用 Web 套接字执行 ajax

> ID：10748472
> 
> 赞同：0
> 
> 时间：2012-05-25T04:28:50.013
> 
> 标签：javascript, ajax, iis-6, websocket, simulate

我开始了解 Web 套接字作为我的一些 ajax 调用的更快替代方案。我注意到我的 IIS6 服务器不支持 Web 套接字。有没有办法通过让客户端 Web 套接字模拟对服务器的 ajax 调用来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:41:47.747

Ajax 和 Web Sockets 都允许*客户端*将信息推送到服务器。然而，Web Sockets 在允许*服务器*将数据推送到客户端而无需客户端请求的能力方面表现出色。

假设您正在浏览器中玩在线国际象棋游戏，并且您正在等待对手下棋。使用传统的 Ajax，您必须反复 ping 服务器（或使用长轮询，请参阅下面的链接）来询问您的对手是否有新动作。使用 Web Sockets，服务器可以在移动发生时立即告诉您，而无需不断询问。

有一些技术可以让 Ajax 展示 Web Sockets 的一些优点。这类技术通常被称为“[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)”。

为了具体解决您的问题：如果您的服务器不支持 Web 套接字，您将不得不尝试使用 Comet 技术来优化 Ajax 以实现服务器推送数据的传递。如果没有 Web Socket 服务器与之通信，就无法在客户端上使用 Web Sockets。

# java - hashCode() 用于在 HashMap 中使用的对象数组

> ID：10748481
> 
> 赞同：1
> 
> 时间：2012-05-25T04:30:57.560
> 
> 标签：java, hash

我有以下两个类，并希望`Foo1`用作`HashMap`. 如果两个`Foo1`对象相等`Foo2`，则两个对象相等，`Foo2`如果它们的字节数组满足，则对象相等`Arrays.equals()`。

我不太确定要`hashCode()`为`Foo1`. 我只需要总结每个`Foo2`对象的哈希码还是效率低下？

```
public class Foo1 {

  Foo2[] foo2_array;

  @Override
  public boolean equals(Object Other) {

     for (int i = 0; i < foo2_array.length; i++) {

        if (!foo2_array[i].equals(other.foo2_array[i])
          return false;
     }

     return true;
   }

   @Override
   public int hashCode() {

      // what to here?
   }
}

public class Foo2 {

  byte[] values;

  @Override
  public boolean equals(Object other) {

      return Arrays.equals(values, other.values);
  }

  @Override
  public int hashCode() {

     return Arrays.hashCode(values);
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T04:36:56.797

您`hashcode`应该使用与它相同的一组属性，`equals`以免违反合同。

只需使用`Arrays.hashcode`as done in`Foo2`

此外，您不必遍历 equals 中的每个元素，您可以使用`Arrays.equals`

Foo2 equals 看起来类似于 Foo1.equals

```
 @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Foo1 other = (Foo1) obj;
        if (!Arrays.equals(foo2_array, other.foo2_array))
            return false;
        return true;
    } 
```

和类似于 Foo1 哈希码的哈希码

```
 @Override
    public int hashCode() {
        return Arrays.hashCode(foo2_array);
    } 
```

此外，在实现 equals 时，请检查 null 的相同引用和对象有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:39:01.540

您本质上需要一些方法来使不同的对象可能具有不同的哈希码。

因此，根据您的数据，您不一定*需要对数组中**所有*项目的哈希值求和。您基本上只需要“足以缩小范围”的东西。

我会这样说：你的数据有什么东西让你怀疑你不能只取数组中间值的哈希码吗？或者也许是第一个、最后一个和中间项目的组合哈希码，例如？

（会让您怀疑您无法做到这一点的事情：例如，如果您的数据具有某些特殊功能，使某个狭窄的值子集作为数组中的中间元素出现。）

# .htaccess - .htaccess 密码保护没有索引文件的目录

> ID：10748482
> 
> 赞同：3
> 
> 时间：2012-05-25T04:31:12.053
> 
> 标签：.htaccess

如何对没有`index`文件的目录进行密码保护？我只希望索引部分受密码保护，而不是里面的文件。

例如：

```
http://www.example.com/foo/            Password required
http://www.example.com/foo/bar.html    No password required 
```

我可以`forbidden`通过

```
Options -Indexes 
```

但我不希望他们被禁止，而是希望他们需要密码。

那可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:19:32.083

我已经弄清楚该怎么做！:D

***首先***为那些没有任何索引页面的人放入一个 PHP 生成的目录：

```
DirectoryIndex default.php index.php index.html /php_directory.php 
```

***然后***只需密码保护`php_directory.php`文件！

```
AuthUserFile /full/path/here/.htpasswd
AuthType Basic
AuthName "Log in" 
```

感谢您的所有评论！（这帮助我做到了这一点）

# javascript - 是否可以仅使用 javascript 检索数据库详细信息

> ID：10748483
> 
> 赞同：0
> 
> 时间：2012-05-25T04:31:15.470
> 
> 标签：javascript, jquery

我是 javascript 的新手。我只是想知道是否可以仅使用 javascript 获取数据库详细信息。我知道 javascript 是客户端组件。通常使用我们获取数据库详细信息的方法。

```
public static void main(String args[]) throws SQLException {
        //URL of Oracle database server
        String url = "jdbc:oracle:thin:@localhost:1632:XE";

        //properties for creating connection to Oracle database
        Properties props = new Properties();
        props.setProperty("user", "scott");
        props.setProperty("password", "tiger");

        //creating connection to Oracle database using JDBC
        Connection conn = DriverManager.getConnection(url,props);

        String sql ="select sysdate as current_day from dual";

        //creating PreparedStatement object to execute query
        PreparedStatement preStatement = conn.prepareStatement(sql);

        ResultSet result = preStatement.executeQuery();

        while(result.next()){
            System.out.println("Current Date from Oracle : " +         result.getString("current_day"));
        }
        System.out.println("done");

    }
} 
```

是否可以仅使用适用于 windows、linux 等任何机器以及 mozilla、IE、Safari 等任何浏览器的 javascript 来获取相同的东西？任何指针，建议真的有助于我理解 javascript 的力量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:42:18.030

不，使用客户端 JavaScript 是不可能的。

有像[node.js](http://nodejs.org/)这样的服务器端 javascript 选项。你可以看看那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:46:53.263

借助`websockets`HTML5 的特性，您可以使用 JavaScript 连接到某个主机并通过网络进行通信。因此，技术上可以连接到数据库端口并发送查询和接收结果。

[https://developer.mozilla.org/en/WebSockets](https://developer.mozilla.org/en/WebSockets)

然而，HTML5 仍然只是一个提议，浏览器才刚刚开始实现它的功能。许多当前使用的浏览器（如旧版本的 IE）当然没有实现任何功能。此外，可能没有任何用于 JS 的数据库驱动程序，因此您必须进行所有底层通信，而这可能是您不希望的。

在 Web 应用程序中执行此操作的通常方式是 JavaScript 通过 AJAX 从服务器请求数据，然后服务器与数据库进行通信。这些服务器通常用 PHP 制作，但您可以使用 Java 代码制作 servlet。基本上，只需将代码移动到 a`doGet()`或a 的`doPost()`函数`HttpServlet`，将类打包到 Web 存档中，然后使用 Tomcat 或 Jetty 启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:51:06.987

JavaScript 只能启动对服务器端代码的调用，然后再连接到数据库。如今，一种常见的技术是进行 AJAX 调用（使用 JavaScript）来调用将从数据库返回数据的服务。

网上有几个例子描述了该技术

# sql - 从 ORACLE 中的 VARCHAR2 中删除 NULL

> ID：10748487
> 
> 赞同：1
> 
> 时间：2012-05-25T04:31:57.967
> 
> 标签：sql, oracle, oracle11g

我的数据库表中有一个`VARCHAR2`类型列用于 store `invoice_number`。并且有一个查询来获取最大值`invoice_number`，如下所示。

```
select max(invoice_number)  from invoice; 
```

但`invoice`表中没有数据，以上查询返回值为`null`. 但在这种情况下，我需要将此值替换为`0`而不是`null`. 我怎么能这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T04:43:16.577

使用 NVL：

```
SELECT NVL(MAX(invoice_number), '0') 
```

使用 ANSI COALESCE：

```
SELECT COALESCE(MAX(invoice_number), '0') 
```

使用解码：

```
SELECT DECODE(MAX(invoice_number), NULL, '0') 
```

使用 ANSI 案例：

```
SELECT CASE 
         WHEN MAX(invoice_number) IS NULL THEN '0' 
         ELSE MAX(invoice_number) 
       END 
```

### 判决

所有的工作，我可能会使用 NVL，因为 COALESCE 是 ANSI，但不一定能像原生替代品一样快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:34:35.597

您可以使用 COALESCE 例如：

```
select COALESCE(max(invoice_number),'0') from invoice; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T04:35:33.893

```
select coalesce(max(invoice_number),0) 
```

也可以使用解码。

```
select decode(max(invoice_number),null, 0) 
```

# iphone - iPhone：使用 ASIHTTPREQUEST 将音频文件上传到服务器

> ID：10748489
> 
> 赞同：2
> 
> 时间：2012-05-25T04:32:30.963
> 
> 标签：iphone, objective-c, ios5, asihttprequest

我想在专用服务器上上传音频文件并为此

我正在使用以下代码

```
NSURL *audiourl = [NSURL URLWithString:@"my Url"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:audiourl];
NSData *postData = [NSData dataWithContentsOfURL:url];
//url is my audio url path of NSDocumentDirectory.
[request addData:postData withFileName:@"myAudio.caf" andContentType:@"audio/caf" forKey:@"company_audio"];
[request setDelegate:self];
[request startSynchronous]; 
```

我在控制台中打印我的 url，它给了我如下路径：

```
url:file://localhost/Users/User/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/013AE2E8-C410-4544-A426-D0706BC0A13A/Documents/myaudio.caf 
```

但我在服务器上看不到我的音频文件。

那么我的代码有什么问题？

任何帮助都将是可观的。

提前谢谢...

# iphone - 单例类是否等于具有静态方法的类

> ID：10748494
> 
> 赞同：0
> 
> 时间：2012-05-25T04:33:13.130
> 
> 标签：iphone, objective-c

我创建了一个 A 类，其中所有方法都是类方法 (+)。另一个 B 类是单例。

我想知道我是否可以检查 A 类 [A someoperation] 是否与 B 类一样，因为只有一个 A 实例存在并且我不需要实例化它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:38:21.647

调用类方法时，不一定要实例化该类，除非该类方法实际创建了一个类。

此外 - 类方法不会使类成为单例。它只是意味着在类上调用方法而不是类的对象。

# c# - 当派生表使用自己的主键时，如何在实体框架中按类型继承设置表？

> ID：10748495
> 
> 赞同：0
> 
> 时间：2012-05-25T04:33:20.883
> 
> 标签：c#, entity-framework, entity-framework-4, table-per-type

假设我有一个表结构，例如：

```
Order    
  ID int, primary key 
  Name, string
  OtherOrderFields...

RetailOrder
  ID int, primary key
  OrderID, foreign key
  RetailOrderFields... 
```

在实体框架 4 中，是否可以为每个类型继承设置表，以便 RetailOrder 从 Order 派生？到目前为止，我看到的所有示例都有使用外键（本示例中为 OrderID）作为表的主键的派生类，但如果不是这种情况并且每个表都维护自己的主键怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:25:34.900

不，这是不可能的。我认为，您的数据库架构猜测聚合（1-1 关系）而不是继承。

# scripting - 自动化 GDB 调试会话的最佳方法是什么？

> ID：10748501
> 
> 赞同：81
> 
> 时间：2012-05-25T04:34:14.487
> 
> 标签：scripting, automation, gdb, expect

GDB 是否有内置的脚本机制，我应该编写一个期望脚本，还是有更好的解决方案？

我将每次发送相同的命令序列，并将每个命令的输出保存到文件中（很可能使用 GDB 的内置日志记录机制，除非有人有更好的主意）。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-05-27T17:33:40.623

基本上，在这个例子中，我想在代码的特定位置获取一些变量值；并让它们输出直到程序崩溃。所以这里首先是一个小程序，它可以[保证](https://stackoverflow.com/questions/5028781/c-how-to-write-a-sample-code-that-will-crash-and-produce-dump-file)在几个步骤中崩溃，`test.c`：

```
#include <stdio.h>
#include <stdlib.h>

int icount = 1; // default value

main(int argc, char *argv[])
{
  int i;

  if (argc == 2) {
    icount = atoi(argv[1]);
  }

  i = icount;
  while (i > -1) {
    int b = 5 / i;
    printf(" 5 / %d = %d \n", i, b );
    i = i - 1;
  }

  printf("Finished\n");
  return 0;
} 
```

程序接受命令行参数的唯一原因是能够选择崩溃前的步骤数 - 并在批处理模式下显示`gdb`忽略。`--args`这是我编译的：

```
gcc -g test.c -o test.exe 
```

然后，我准备了以下脚本 - 这里的主要技巧是`command`为 each分配 a `breakpoint`，这最终会`continue`（另见[Automate gdb: show backtrace at every call to function puts](https://stackoverflow.com/questions/2388799/automate-gdb-show-backtrace-at-every-call-to-function-puts)）。我调用的这个脚本`test.gdb`：

```
# http://sourceware.org/gdb/wiki/FAQ: to disable the
# "---Type <return> to continue, or q <return> to quit---"
# in batch mode:
set width 0
set height 0
set verbose off

# at entry point - cmd1
b main
commands 1
  print argc
  continue
end

# printf line - cmd2
b test.c:17
commands 2
  p i
  p b
  continue
end

# int b = line - cmd3
b test.c:16
commands 3
  p i
  p b
  continue
end

# show arguments for program
show args
printf "Note, however: in batch mode, arguments will be ignored!\n"

# note: even if arguments are shown;
# must specify cmdline arg for "run"
# when running in batch mode! (then they are ignored)
# below, we specify command line argument "2":
run 2     # run

#start # alternative to run: runs to main, and stops
#continue 
```

请注意，如果您打算在批处理模式下使用它，则必须在最后“启动”脚本，使用`run`or`start`或类似的东西。

有了这个脚本，我可以`gdb`在批处理模式下调用 - 这将在终端中生成以下输出：

```
$ gdb --batch --command=test.gdb --args ./test.exe 5
Breakpoint 1 at 0x804844d: file test.c, line 10.
Breakpoint 2 at 0x8048485: file test.c, line 17.
Breakpoint 3 at 0x8048473: file test.c, line 16.
Argument list to give program being debugged when it is started is "5".
Note, however: in batch mode, arguments will be ignored!

Breakpoint 1, main (argc=2, argv=0xbffff424) at test.c:10
10    if (argc == 2) {
$1 = 2

Breakpoint 3, main (argc=2, argv=0xbffff424) at test.c:16
16      int b = 5 / i;
$2 = 2
$3 = 134513899

Breakpoint 2, main (argc=2, argv=0xbffff424) at test.c:17
17      printf(" 5 / %d = %d \n", i, b );
$4 = 2
$5 = 2
 5 / 2 = 2 

Breakpoint 3, main (argc=2, argv=0xbffff424) at test.c:16
16      int b = 5 / i;
$6 = 1
$7 = 2

Breakpoint 2, main (argc=2, argv=0xbffff424) at test.c:17
17      printf(" 5 / %d = %d \n", i, b );
$8 = 1
$9 = 5
 5 / 1 = 5 

Breakpoint 3, main (argc=2, argv=0xbffff424) at test.c:16
16      int b = 5 / i;
$10 = 0
$11 = 5

Program received signal SIGFPE, Arithmetic exception.
0x0804847d in main (argc=2, argv=0xbffff424) at test.c:16
16      int b = 5 / i; 
```

请注意，虽然我们指定了命令行参数 5，但循环仍然只旋转了两次（正如脚本`run`中的说明一样）；`gdb`如果`run`没有任何参数，它只旋转一次（程序的默认值）确认`--args ./test.exe 5`被忽略。

但是，由于现在这是在单个调用中输出，并且无需任何用户交互，因此可以使用`bash`重定向轻松地将命令行输出捕获到文本文件中，例如：

```
gdb --batch --command=test.gdb --args ./test.exe 5 > out.txt 
```

还有一个使用python在[c中自动化gdb的例子——GDB自动步进——在自由运行时自动打印行？](https://stackoverflow.com/a/6964213/277826)

希望这会有所帮助，
干杯！

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-05-25T04:51:13.043

`gdb`运行后执行文件`.gdbinit`。所以你可以将你的命令添加到这个文件中，看看它是否适合你。这是`.gdbinit`为了打印所有`f()`调用的回溯的示例：

```
set pagination off
set logging file gdb.txt
set logging on
file a.out
b f
commands
bt
continue
end
info breakpoints
r
set logging off
quit 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-10-21T20:38:40.373

如果`-x`带有文件的 a 对您来说太多，只需使用多个`-ex`'s。

这是一个跟踪正在运行的程序的示例，显示（并保存）崩溃时的回溯

```
sudo gdb -p "$(pidof my-app)" -batch \
  -ex "set logging on" \
  -ex continue \
  -ex "bt full" \
  -ex quit 
```

# c# - 在专用服务器上的 IIS 7 上运行 .net webservice 时出错

> ID：10748502
> 
> 赞同：3
> 
> 时间：2012-05-25T04:34:20.977
> 
> 标签：c#, asp.net, web-services, iis-7, publishing

我在 asp.net 2008 中使用 3.5 框架制作了 C# webservice。我在本地机器上创建了这个网络服务。

现在我尝试使用 IIS7（在客户端的服务器上）在客户端的专用服务器上运行此 Web 服务。但这给了我一个错误-

```
Could not load file or assembly 'System.Web.Extensions, Version=3.5.0.0, 
Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies.
The system cannot find the file specified. 
```

我刚刚在 IIS 中添加了本地发布的 webervice 和其他文件，然后尝试运行它，但没有成功。

我该怎么做 ？

我对这件事一无所知。

执行此任务的步骤是什么？

Web.Config 文件中要进行哪些更改？

请帮帮我。。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:59:10.497

你应该在你的服务器上安装 ASP.NET AJAX for Asp.Net 你可以在这里找到它并选择工具包的 .NET 3.5 版本：http: [//ajaxcontroltoolkit.codeplex.com/releases/view/87024](http://www.microsoft.com/download/en/details.aspx?id=883)

如果您没有访问此服务器的权限，您可以将 .dll 文件上传到 BIN 文件夹中。

我希望它有效！干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:04:20.743

试试这个

在您的服务器上安装 Web 扩展。

或者

安装 ASP.NET 2.0 AJAX 扩展 1.0 [http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=883](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=883)

# c++ - 将无符号字符按位左移 16 是什么意思

> ID：10748506
> 
> 赞同：13
> 
> 时间：2012-05-25T04:34:37.577
> 
> 标签：c++, c, bit-manipulation

我正在读取一个包含`unsigned char`变量的 .cpp 文件，它正在尝试按位左移 16 位，因为 an`unsigned char`由 8 位组成，左移 16 位将擦除所有位并用八个 0 填充它。

`unsigned char byte=0xff; byte << 16;`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-25T04:43:06.373

当你改变一个值时，

```
unsigned char x = ...;
int y = x << 16; 
```

的类型`x`被提升为`int`if`unsigned char`适合`int`（大多数系统），或`unsigned`if`unsigned char`不适合`int`（罕见¹）。只要您`int`的宽度为 25 位或更宽，则不会丢弃任何数据²。

`16`请注意，这与具有 type的事实完全无关`int`。

```
/* All three are exactly equivalent */
x << 16;
x << 16u;
x << (unsigned char) 16; 
```

**资料来源：**来自 n1516（C99 草案）：

§6.5.7 第 3 段：按位移位运算符

> 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。

§6.3.1.1 第 2 段：布尔值、字符和整数

> 如果 int 可以表示原始类型的所有值（受宽度限制，对于位域），则该值将转换为 int；否则，它将转换为无符号整数。这些被称为整数促销。

**脚注：**

¹：已知一些 DSP 芯片以及某些 Cray 超级计算机具有`sizeof(char) == sizeof(int)`。这以增加内存消耗为代价简化了处理器的加载存储单元的设计。

²：如果你的左移被提升到`int`然后溢出`int`，这是未定义的行为（恶魔可能会飞出你的鼻子）。相比之下，溢出 an总是定义明确的，因此通常*应该*对类型进行`unsigned`位移。*`unsigned`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:36:09.587

如果`char`适合 inside `int`，它将被提升为 an `int`，结果将如您所愿。如果不是这种情况，则根据标准它是未定义的行为，并且可能会发出编译警告。从标准：

`The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined.`*

# java - 为java字节码或类图开发反编译器

> ID：10748507
> 
> 赞同：0
> 
> 时间：2012-05-25T04:34:39.183
> 
> 标签：java, parsing, decompiling

我打算开发一个应用程序，它将java字节码或类图或元模型作为输入，并根据包结构生成源代码。但我需要一些建议，例如，

如何启动此应用程序，意味着是否有任何将元模型或字节码转换为源代码的 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:54:08.610

在这种情况下，您可以使用 Jdec 框架进行检查。它正在执行以下功能：

*   类文件的选择性反编译

*   反汇编一个java类

它是开源的。 [http://jdec.sourceforge.net/](http://jdec.sourceforge.net/)

我认为这可能是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:53:12.383

不确定[BCEL](http://commons.apache.org/bcel/)是否是您正在寻找的东西，但值得一看。
当我个人需要反编译一些 java 字节码时，我正在使用[JAD](http://www.varaneckas.com/jad/)。
此外，当您正在寻找对 java 字节码的一般介绍以便更好地理解时，请尝试评论中的两个链接（我被限制为每个答案两个链接，因此我对给您带来的不便表示歉意）。

# iphone - 如何使用 iOS 绘图创建饼图并从文本字段中获取绘图值

> ID：10748515
> 
> 赞同：0
> 
> 时间：2012-05-25T04:36:56.220
> 
> 标签：iphone, xcode

我想创建一个带有 IOS 绘图的饼图，我已经下载了框架，但它从 plist 文件中获取数据，它只是静态的解决这个问题，我不明白这个情节部分的填充值是如何产生的。这是在单独的视图中我想要在我现有的视图控制器中

```
 #import "PieChartViewController.h"
   #import "PCPieChart.h"

   @implementation PieChartViewController

  - (id)init
  {
self = [super init];
if (self)
{
    [self.view setBackgroundColor:[UIColor colorWithWhite:1 alpha:1]];
    [self.titleLabel setText:@"Pie Chart"];

    int height = [self.view bounds].size.width/3*2.; // 220;
    int width = [self.view bounds].size.width; //320;
    PCPieChart *pieChart = [[PCPieChart alloc] initWithFrame:CGRectMake(([self.view bounds].size.width-width)/2,([self.view bounds].size.height-height)/2,width,height)];
    [pieChart setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleBottomMargin];
    [pieChart setDiameter:width/2];
    [pieChart setSameColorLabel:YES];

    [self.view addSubview:pieChart];
    [pieChart release];

    if ([[UIDevice currentDevice] userInterfaceIdiom]==UIUserInterfaceIdiomPad)
    {
        pieChart.titleFont = [UIFont fontWithName:@"HelveticaNeue-Bold" size:30];
        pieChart.percentageFont = [UIFont fontWithName:@"HelveticaNeue-Bold" size:50];
    }

//  NSString *sampleFile = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"sample_piechart_data.plist"];
//  NSDictionary *sampleInfo = [NSDictionary dictionaryWithContentsOfFile:sampleFile];
    NSMutableArray *components = [NSMutableArray array];

    for (int i=0; i<[[components] count]; i++)
    {
        NSDictionary *item = [[sampleInfo objectForKey:@"data"] objectAtIndex:i];
        PCPieComponent *component = [PCPieComponent pieComponentWithTitle:[item objectForKey:@"title"] value:[[item objectForKey:@"value"] floatValue]];
        [components addObject:component];

        if (i==0)
        {
            [component setColour:PCColorYellow];
        }
        else if (i==1)
        {
            [component setColour:PCColorGreen];
        }
        else if (i==2)
        {
            [component setColour:PCColorOrange];
        }
        else if (i==3)
        {
            [component setColour:PCColorRed];
        }
        else if (i==4)
        {
            [component setColour:PCColorBlue];
        }
    }
    [pieChart setComponents:components];

    }
    return self;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:31:37.037

我使用过相同的框架并面临相同的问题，我通过使用这种方法解决了这个问题，试试吧，可能会奏效。

```
NSMutableArray *components = [NSMutableArray array];

 NSDictionary *value1 = [NSDictionary dictionaryWithObjectsAndKeys:@"Bala", @"title", [NSNumber numberWithInt:13702.79], @"value", nil];
    NSDictionary *value2 = [NSDictionary dictionaryWithObjectsAndKeys:@"Justin", @"title", [NSNumber numberWithInt:130000], @"value", nil];

    NSArray *dictionaryArray = [NSArray arrayWithObjects:value1, value2,  nil];

    NSDictionary *dataDictonary = [NSDictionary dictionaryWithObjectsAndKeys:dictionaryArray, @"data", nil];

    NSLog(@"%@", dataDictonary);
    NSMutableArray *components = [[NSMutableArray alloc]init];

    for (int i=0; i<[[dataDictonary objectForKey:@"data"] count]; i++)
    {

        NSDictionary *item = [[dataDictonary objectForKey:@"data"] objectAtIndex:i];
        NSLog(@"%@ item with inde",item);

        PCPieComponent *component = [PCPieComponent pieComponentWithTitle:[item objectForKey:@"title"] value:[[item objectForKey:@"value"] floatValue]];

        [components addObject:component];

        if (i==0)
        {
            [component setColour:PCColorYellow];
        }
        else if (i==1)
        {
            [component setColour:PCColorGreen];
        }
        else if (i==2)
        {
            [component setColour:PCColorOrange];
        }
        else if (i==3)
        {
            [component setColour:PCColorRed];
        }
        else if (i==4)
        {
            [component setColour:PCColorBlue];
        }
    }
    [pieChart setComponents:components];

} 
```

[这是符合您要求的示例项目](https://www.dropbox.com/s/iod5vl0r3ohmjxd/PieChartTuto.zip)

# c# - 如何使用反射获取方法并分配给 Action 对象？

> ID：10748518
> 
> 赞同：2
> 
> 时间：2012-05-25T04:37:51.387
> 
> 标签：c#, reflection

我有一个图表，我有一个树视图，节点选择了各种图表。树视图节点命名为 xxxChart，显示各种图表的方法在调用它的任何节点之后命名为 xxxChart。

有可以更改的参数（例如开始/结束日期），当发生这种情况时，我需要再次运行当前图表的方法以使用更新的参数选择刷新它。我认为拥有一个名为 DisplayChart 的 Action 对象是个好主意，只要选择了一个节点，就会设置该对象。然后当参数改变时，我只需调用 DisplayChart()。

现在，我欢迎您对更好的模式来解决这个问题的任何想法，但我的问题是：如何使用反射来获得可以分配给 Action 对象的东西？I know how to invoke a method using reflection, but when a node is selected I just want to store the method with the name matching that node in the DisplayChart Action object.

当然，我知道我可以只使用 MethodInfo 对象而不是 Action 对象，然后使用反射来调用该方法，但我仍然很好奇如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T04:41:51.597

依赖方法命名约定和反射不是很健壮，但要直接回答您的问题，您可以使用[`Delegate.CreateDelegate`.](http://msdn.microsoft.com/en-us/library/system.delegate.createdelegate.aspx)

例如

```
object boundObject = ...
MethodInfo method = ...

Action action = (Action)Delegate.CreateDelegate(typeof(Action), 
                                                boundObject, 
                                                method); 
```

# java - 没有合适的排序错误方法

> ID：10748522
> 
> 赞同：7
> 
> 时间：2012-05-25T04:38:32.877
> 
> 标签：java

```
import java.util.Scanner;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Collection;

public class ClearlyAnArrayList
{
    public static void main(String[] args){
        Scanner kb=new Scanner(System.in);
        ArrayList<Integer>ints=new ArrayList<Integer>();
        int num=kb.nextInt();
            while(num!=-1){
            ints.add(num);
            }
    sortPrint(ints);
}

    public static void sortPrint(Collection<Integer>ints){
        Collections.sort(ints);
        for(Integer i:ints){
        System.out.printf("%d\n",i);
        }
}
} 
```

> 这是我用 blueJ 编译的代码 当我编译它时，我得到一个冗长的错误，它以“ `no suitable method for sort(java.util.Collection<java.lang.Integer>)`”开头，然后继续说更多我不明白的东西。

对此的解决方案是我使用的 List 不是一个集合，并且`Collections.sort()`需要一个 List

> 对于我的所有实用程序，还有比单数`import`陈述更好的方法吗？

给出的解决方案是

```
import java.util.*; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T04:44:35.077

[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)期望 a[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)而不是[`Collection`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)，所以改变你的`sortPrint`方法 From

```
Collection<Integer>ints 
```

到

```
List<Integer> ints 
```

题外话：

而不是直接在具体的类[程序上工作到一个接口](http://www.artima.com/lejava/articles/designprinciples.html)。

更喜欢

```
List<Integer> ints = new ArrayList<Integer>(); 
```

超过

```
ArrayList<Integer> ints = new ArrayList<Integer>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T04:44:35.387

这样做怎么样：

```
public static void sortPrint(List<Integer> ints){
    Collections.sort(ints);
    for(Integer i:ints){
    System.out.printf("%d\n",i);
    } 
```

`Collections.sort()`只为`List`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:48:16.277

为您的进口

```
import java.util.*; 
```

sort 方法对列表进行排序，而不是对集合进行排序，因此将声明更改为：

```
public static void sortPrint(List<Integer> ints) 
```

您还可以有一个在插入过程中自行排序的集合，您的程序变为：

```
public static void main(String[] args){
        Scanner kb=new Scanner(System.in);
        TreeSet<Integer>ints=new TreeSet<Integer>();
        int num=kb.nextInt();
        while(num!=-1){
            ints.add(num);
        }
        //already sorted
    } 
```

警告，在 Set 中（以及在 TreeSet 中）你不能有两次相同的元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T04:48:29.613

阅读文档（或尝试使用 Ctrl + Space 获取信息）。

`java.until.Collections`文档：[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

这个类只支持`Collections.sort(list)`and `Collections.sort(list,comparator)` ，所以不能排序`Collection`。试试`List`吧

# css - 当浏览器不支持媒体查询时究竟会发生什么？

> ID：10748527
> 
> 赞同：2
> 
> 时间：2012-05-25T04:39:07.873
> 
> 标签：css, media-queries

我正在使用媒体查询构建我的网站以适应不同的屏幕尺寸。

巧合的是，我在一台旧电脑上使用未更新的浏览器检查了我的网站，发现我得到了移动内容和桌面内容的混合。但是我没有办法查看代码，因为没有安装萤火虫或类似的东西。

我的问题是如果浏览器不接受 css 中的媒体查询会发生什么？

*   它会忽略条件内的所有内容吗？

*   还是无论条件是什么，它都会在条件内运行所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:41:31.613

如果浏览器不支持媒体查询，那么什么也不会发生。它忽略了整个条件样式块。

如果你想支持，那么你可以使用这个 JS [http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)

# haskell - 为 Lists 创建一个新的 Ord 实例

> ID：10748528
> 
> 赞同：5
> 
> 时间：2012-05-25T04:39:21.457
> 
> 标签：haskell, typeclass, instances

这是我第一次尝试创建 Ord 等类的自定义实例。

我定义了一个新的数据结构来表示一个列表：

```
data List a = Empty | Cons a (List a)
    deriving (Show, Eq) 
```

现在我想为 List 定义一个新的 Ord 实例，使得 List a <= List b 意味着“List a 中元素的总和小于或等于 List b 中元素的总和”

首先，是否有必要定义一个新的“sum”函数，因为 Prelude 中定义的 sum 不适用于新的 List 数据类型？那么，如何为 List 定义新的 Ord 实例？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T04:51:02.860

首先，这不会像普通的列表实例一样工作。普通实例仅取决于列表中的项目本身是可订购的；您的建议取决于他们的*数量*（例如在`Num`课堂上），因此更狭窄。

有必要定义一个新`sum`函数。令人高兴的是，它很容易编写`sum`为一个简单的递归函数。（巧合的是，你可以调用你的函数`sum'`，它的发音是“sum prime”，按照惯例，它是一个与 非常相似的函数`sum`。）

此外，实例必须依赖于`Num`类以及`Ord`类。

一旦你有了一个新`sum`函数，你就可以定义一个像这样的实例：

```
instance (Ord n, Num n) => Ord (List n) where compare = ... 
  -- The definition uses sum' 
```

该实例语句可以理解为对于所有类型`n`，如果`n`在`Ord`和`Num`，`List n`在`Ord`比较工作的地方如下。语法非常类似于数学 where `=>`is implying。希望这能让记忆语法更容易。

你必须给出一个合理的定义`compare`。作为参考，`compare a b`工作原理如下：如果`a < b`它返回`LT`，如果`a = b`它返回`EQ`，如果`a > b`它返回`GT`。

这是一个易于实现的功能，因此我将把它作为练习留给读者。（我一直想说：P）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T07:16:51.960

怎么样...

```
newtype List a = List [a] 
```

如果您想为给定类型引入新的“不兼容”类型类实例，这很常见（参见 eg`ZipList`或几个像`Sum`and之类的 monoid `Product`）

现在您可以轻松地重用列表的实例，并且您也可以使用`sum`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T05:46:52.143

稍微概括@Tikhon的方法，您也可以使用`Monoid`而不是`Num`作为约束，您已经有一个预定义的“总和” `mconcat`（当然，您仍然需要`Ord`）。这将使您考虑更多类型，而不仅仅是数字（例如`List (List a)`，您现在可以轻松地递归定义）

另一方面，如果你*确实*想使用 a`Num`作为幺半群，你必须每次都决定 for `Sum`or `Product`。可以说，必须明确地写出来会降低简短性和可读性，但这是一种设计选择，取决于您最终希望拥有何种程度的通用性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:19:47.670

关于什么 ..

```
data List a = Empty | Cons a (List a)
                deriving (Show, Eq)

instance (Ord a, Num a, Eq a) => Ord (List a) where

      -- 2 empty lists

      Empty <= Empty            =   True

      -- 1 empty list and 1 non-empty list

      Cons a b <= Empty         =   False
      Empty <= Cons a b         =   True

      -- 2 non-empty lists

      Cons a b <= Cons c d      =   sumList (Cons a b) <= sumList (Cons c d) 

-- sum all numbers in list

sumList         ::      (Num a) => List a -> a

sumList Empty               =       0
sumList (Cons n rest)       =       n + sumList rest 
```

这是你想要的？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T14:54:36.840

.. 或 Prelude 中具有 sum 函数的其他解决方案。

```
data List a = Empty | Cons a (List a)
                deriving (Show, Eq)

instance (Ord a, Num a, Eq a) => Ord (List a) where

      -- 2 empty lists

      Empty <= Empty            =   True

      -- 1 empty list and 1 non-empty list

      Cons a b <= Empty         =   False
      Empty <= Cons a b         =   True

      -- 2 non-empty lists

      Cons a b <= Cons c d      =   sum (listToList (Cons a b)) 
                                              <= sum (listToList (Cons c d)) 

-- convert new List to old one

listToList      ::      (Num a) => List a -> [a]

listToList Empty                =       []
listToList (Cons a rest)        =       [a] ++ listToList rest 
```

# ruby-on-rails - 从数组中在 rails 中创建 where 查询

> ID：10748529
> 
> 赞同：1
> 
> 时间：2012-05-25T04:39:22.117
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord

我需要从数组中进行 where 查询，其中数组的每个成员都是 AND 的“like”操作。例子：

```
SELECT ... WHERE property like '%something%' AND property like '%somethingelse%' AND ... 
```

使用 ActiveRecord 功能很容易，`where`但我不确定如何首先对其进行清理。我显然不能只创建一个字符串并将其填充到`where`函数中，但似乎没有办法使用`?`.

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T04:58:11.417

构建 LIKE 模式的最简单方法是字符串插值：

```
where('property like ?', "%#{str}%") 
```

如果您将所有字符串都放在一个数组中，那么您可以使用 ActiveRecord 的查询链接并[`inject`](https://ruby-doc.org/core/Enumerable.html#method-i-inject)构建您的最终查询：

```
a = %w[your strings go here]
q = a.inject(YourModel) { |q, str| q.where('property like ?', "%#{str}%") } 
```

然后你可以`q.all`或`q.limit(11)`你需要做的任何事情来得到你的最终结果。

* * *

这是有关其工作原理的快速教程；您还应该查看[Active Record Query Interface Guide](https://guides.rubyonrails.org/active_record_querying.html)和[`Enumerable`文档](https://ruby-doc.org/core/Enumerable.html)。

如果你有两件事 (`a`和`b`) 要匹配，你可以这样做：

```
q = Model.where('p like ?', "%#{a}%").where('p like ?', "%#{b}%") 
```

该`where`方法返回一个支持所有常用查询方法的对象，因此您可以`M.where(...).where(...)...`根据需要链接调用；其他查询方法（例如`order`, `limit`, ...）返回相同类型的对象，因此您也可以将它们链接起来：

```
M.where(...).limit(11).where(...).order(...) 
```

您有一系列要喜欢的东西，并且您想应用于`where`模型类，然后应用于`where`返回的内容，然后再次应用，直到您用完数组。看起来像反馈循环的东西往往需要[`inject`](https://ruby-doc.org/core/Enumerable.html#method-i-inject)（AKA`reduce`来自“map-reduce”名声）：

> **注入（初始）{| 备忘录，obj | 块 } → 对象**
> 
> *通过应用二元运算组合枚举*的所有元素，该二元运算由命名方法或运算符的块或符号指定。
> 
> 如果您指定一个块，那么对于*enum*中的每个元素，该块都会传递一个累加器值（*memo*）并且元素 [...] 结果将成为*memo*的新值。在迭代结束时，*memo*的最终值就是方法的返回值。

所以`inject`获取块的输出（在我们的例子中是返回值`where`）并将其作为输入提供给块的下一次执行。如果你有一个数组并且你`inject`在它上面：

```
a = [1, 2, 3]
r = a.inject(init) { |memo, n| memo.m(n) } 
```

那么这与此相同：

```
r = init.m(1).m(2).m(3) 
```

或者，在伪代码中：

```
r = init
for n in a
    r = r.m(n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:43:13.787

如果您使用的是 AR，请执行类似的操作`Model.where(property: your_array)`，或者`Model.where("property in (?)", your_array)`这样，所有内容都会被清理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:57:37.303

假设您的数组是model_array，请尝试数组选择：

```
model_array.select{|a|a.property=~/something/ and a.property=~/somethingelse/} 
```

当然，您可以随意使用任何正则表达式。

# java - 如何在 Java 中使用 W3C DOM 创建一个空的 DOCTYPE？

> ID：10748531
> 
> 赞同：3
> 
> 时间：2012-05-25T04:39:48.713
> 
> 标签：java, xml, dom, doctype

我正在尝试使用[Java 中的 W3C DOM API](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/package-summary.html)读取 XML 文档并将其输出到新的 XML 文档中。为了处理 DOCTYPE，我使用以下代码（从输入 Document`doc`到目标 File `target`）：

```
TransformerFactory transfac = TransformerFactory.newInstance();
Transformer trans = transfac.newTransformer();
trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no"); // omit '<?xml version="1.0"?>'
trans.setOutputProperty(OutputKeys.INDENT, "yes");

// if a doctype was set, it needs to persist
if (doc.getDoctype() != null) {
    DocumentType doctype = doc.getDoctype();
    trans.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM, doctype.getSystemId());
    trans.setOutputProperty(OutputKeys.DOCTYPE_PUBLIC, doctype.getPublicId());
}

FileWriter sw = new FileWriter(target);
StreamResult result = new StreamResult(sw);
DOMSource source = new DOMSource(doc);
trans.transform(source, result); 
```

这对带有和不带有 DOCTYPE 的 XML 文档都适用。但是，我现在`NullPointerException`在尝试转换以下输入 XML 文档时遇到了一个问题：

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE permissions >
<permissions>
  // ...
</permissions> 
```

HTML 5 对其 DOCTYPE 使用类似的语法，[并且它是有效的](http://en.wikipedia.org/wiki/Document_Type_Declaration#HTML5_DTD-less_DOCTYPE). 但我不知道如何使用 W3C DOM API 来处理这个问题——试图将其设置`DOCTYPE_SYSTEM`为`null`抛出异常。我还可以使用 W3C DOM API 来输出一个空的文档类型吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-21T19:48:48.370

虽然这个问题是两年前的问题，但它是一些网络搜索引擎的热门搜索结果，所以也许它是一个有用的捷径。请参阅参考[http://www.w3.org/html/wg/drafts/html/master/syntax.html#doctype-legacy-string](http://www.w3.org/html/wg/drafts/html/master/syntax.html#doctype-legacy-string)的问题[Set HTML5 doctype with XSLT](https://stackoverflow.com/questions/3387127/set-html5-doctype-with-xslt)，其中说：

> 对于无法输出带有短 DOCTYPE“ `<!DOCTYPE html>`”的 HTML 标记的 HTML 生成器，可以将**DOCTYPE 遗留字符串**插入 DOCTYPE [...]
> 
> 换句话说，`<!DOCTYPE html SYSTEM "about:legacy-compat">`or `<!DOCTYPE html SYSTEM 'about:legacy-compat'>`，不区分大小写，单引号或双引号中的部分除外。

导致这样一行Java代码：

```
trans.setOutputProperty(OutputKeys.DOCTYPE_SYSTEM, "about:legacy-compat"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T08:16:07.250

试试这里的建议[https://stackoverflow.com/a/6637886/116509](https://stackoverflow.com/a/6637886/116509)。基本上它看起来无法通过标准的 Java DOM 支持来完成。

你也可以试试 StAX

```
 XMLStreamWriter xmlStreamWriter =
        XMLOutputFactory.newFactory().createXMLStreamWriter( System.out, doc.getXmlEncoding() );
    Result result = new StAXResult( xmlStreamWriter );
    // ... create dtd String 
    xmlStreamWriter.writeDTD( dtd );
    DOMSource source = new DOMSource( doc );
    trans.transform( source, result ); 
```

但这很丑，因为 DTD 参数是 a `String`，而您只有一个`DocumentType`对象。

# sencha-touch - 使用标记在地图中定位特定地址 (Sencha Touch 2) Sencha Map

> ID：10748533
> 
> 赞同：1
> 
> 时间：2012-05-25T04:40:05.390
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-touch-theming

我正在尝试构建一个应用程序，一旦他或她点击地址，它就会为用户提供指导。我的应用程序的结构是这样的：

我已经设法以列表形式编译我想要的所有地址，这意味着用户可以单击该地址，它将加载第二页。查看下面的图片： ![这是我当前的应用程序](../Images/595142c47c54f0ebf31e94c0ee088c40.png)

上图显示了我当前的应用程序和我当前的开发阶段，它被卡在那里，当应用程序加载时它显示页面 A，当你点击任何地址时，它会转到页面 B。我的应用程序的页面应该是带有标记的地图，显示地图中地址的确切位置，并在可能的情况下提供从用户当前位置到确切地址的行车路线。查看下面的图片： ![这正是我想要的我想要的](../Images/160e0f0934f29bf85aaac656682791e0.png)

第二张图片正是我想要实现的，这意味着一旦用户点击任何地址，将显示一张地图，标记指向地址的确切位置（纬度和经度），我需要正好就像图片的样子。

我的代码如下：在我的视图面板中，我有以下代码：

```
Ext.define('List.view.PresidentList', {
extend: 'Ext.List',
xtype: 'presidentlist',
requires: ['List.store.Presidents'],

config: {
     xtype:'container',
    title: 'Takaful Branch',
    //grouped: true,
    itemTpl: '{firstName} {lastName}',
    styleHtmlContent: true,
    store: 'Presidents',
    onItemDisclosure: true,

} 
```

});

在视图面板中我也有：

```
Ext.define('List.view.PresidentDetail', {
extend: 'Ext.Panel',
xtype: 'presidentdetail',

config: {
    title: 'Details',
    styleHtmlContent: true,
    scrollable: 'vertical',
    tpl: [
        'Google Map Goes Here'
         ]
} 
```

});

我的视图文件夹中的最后一个文件是：

```
Ext.define('List.view.Main', {
extend: 'Ext.navigation.View',
xtype: 'mainpanel',
requires: [
    'List.view.PresidentList',
    'List.view.PresidentDetail'
],

config: {
    items: [
    {
        xtype: 'presidentlist'
    },
   ]
} 
```

});

这是我的商店：

```
Ext.define('List.store.Presidents', {
extend: 'Ext.data.Store',

config: {
    model: 'List.model.President',
    sorters: 'lastName',
    grouper : function(record) {
        return record.get('lastName')[0];
    },
    data: [

        {   firstName: "PEJABAT WILAYAH SARAWAK", lastName: "Ground, 1st & 3rd Floor, Section 6, Kuching Town Land District (KTLD), Jalan Kulas, 93400 Kuching, Sarawak" },
        {   firstName: "PEJABAT WILAYAH TERENGGANU", lastName: "Lot PT 3593, Ground, Mezzanine & 1st Floor, Jalan Sultan Zainal Abidin, 20000 Kuala Terengganu, Terengganu" },
        {   firstName: "PEJABAT WILAYAH MELAKA", lastName: "No. 10, Jalan Melaka Raya 8, Taman Melaka Raya, 75000, Melaka. " },

    ]
} 
```

});

这是我的模型：

```
Ext.define('List.model.President', {
extend: 'Ext.data.Model',
config: {
    fields: ['firstName', 'middleInitial', 'lastName']
},

fullName: function() {
    var d = this.data,
    names = [
        d.firstName,
        (!d.middleInitial ? "" : d.middleInitial + "."),
        d.lastName
    ];
    return names.join(" ");
} 
```

});

最后是我的控制器：

```
Ext.define('List.model.President', {
extend: 'Ext.data.Model',
config: {
    fields: ['firstName', 'middleInitial', 'lastName']
},

fullName: function() {
    var d = this.data,
    names = [
        d.firstName,
        (!d.middleInitial ? "" : d.middleInitial + "."),
        d.lastName
    ];
    return names.join(" ");
} 
```

});

我有我商店地址的确切坐标：第一个地址：纬度：4.600381 经度：101.094174 第二个地址：纬度：5.336649 经度：103.142497 第三个地址：纬度：2.184044 经度：102.25982

将等待答复，而我仍在自己研究以解决问题。我相信您的回复将帮助我并帮助许多其他有类似问题的人。谢谢

* * *

我的店铺：

```
Ext.define('List.store.Presidents', {
extend : 'Ext.data.Store',
config : {
    model : 'List.model.President',
    sorters : 'lastName',
    grouper : function(record) {
        return record.get('lastName')[0];
    },
    data : [{
        firstName : "PEJABAT WILAYAH SARAWAK",
        lastName : "Ground, 1st & 3rd Floor, Section 6, Kuching Town Land District (KTLD), Jalan Kulas, 93400 Kuching, Sarawak",
        latitude : 4.600381 ,
        longitude : 101.094174
    }, {
        firstName : "PEJABAT WILAYAH TERENGGANU",
        lastName : "Lot PT 3593, Ground, Mezzanine & 1st Floor, Jalan Sultan Zainal Abidin, 20000 Kuala Terengganu, Terengganu",
        latitude : 5.336649,
        longitude : 103.142497
    }, {
        firstName : "PEJABAT WILAYAH MELAKA",
        lastName : "No. 10, Jalan Melaka Raya 8, Taman Melaka Raya, 75000, Melaka. ",
        latitude : 2.184044,
        longitude : 102.25982
    }]
} 
```

});

我的控制器：

```
Ext.define('List.controller.Main', {
extend: 'Ext.app.Controller',

config: {

    control: {
        'presidentlist': {
            disclose: 'showDetail'
        },
     }
 },
showDetail: function(list, record) {
            this.getMain().push({
                xtype: 'presidentdetail',
                title: record.fullName(),

listeners: {
            maprender: function(component, map, geo, eOpts) {
                var position = new google.maps.LatLng(2.184044,102.25982);
                var marker = new google.maps.Marker({
                    position: position,
                    map: map
                        });

                var infowindow = new google.maps.InfoWindow({
                    content: 'Working Fine <br /> I have been working On you', 

                        });

            google.maps.event.addListener(marker, 'click', function() {
                    infowindow.open(map, marker);
                        });

            setTimeout(function() {
                    map.panTo(position);
                }, 1000);

                },
           }, 
        })
     },
}); 
```

我的模型：

```
Ext.define('List.model.President', {
extend : 'Ext.data.Model',
config : {
    fields : ['firstName', 'middleInitial', 'lastName', 'latitude', 'longitude']
},
fullName : function() {
    var d = this.data, names = [d.firstName, (!d.middleInitial ? "" : d.middleInitial + ".")];
    return names.join(" ");
}
}); 
```

我的观点：

```
Ext.define('List.view.PresidentDetail', {
extend : 'Ext.Map',
xtype: 'presidentdetail',

    config: {
                title: 'Details',
                styleHtmlContent: true,
                scrollable: 'vertical',
                //useCurrentLocation: true,
                layout: 'fit',

    mapOptions: {
                //zoom: 16,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                navigationControl: true,
                navigationControlOptions: {
                style: google.maps.NavigationControlStyle.DEFAULT
                 }
            },
 }

}); 
```

到目前为止，上面代码的结果和上面的Image一样，对于列表中的3个item，只能显示一个经纬度。我现在的问题是让它以这样一种方式工作，一旦用户点击列表中的任何项目，它将显示该特定地址的确切纬度和经度。请帮助我查看我的应用程序（控制器）中的逻辑。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:38:06.383

您自己寻找方向，但他正在放下别针（假设您在模型中添加纬度/经度并在创建模型时将模型传递给视图）：

```
Ext.define('List.view.PresidentDetail', {
    extend : 'Ext.Map',
    xtype : 'presidentdetail',
    config : {
        title : 'Details',
        styleHtmlContent : true,
        scrollable : 'vertical',
        president: null
    },
    onGeoUpdate : function(geo) {
        if (geo) {
            this.fireEvent('setcenter', this, this.getMap(), geo);
        }
    }
}); 
```

在你的控制器中：

```
Ext.define('List.controller.PresidentDetailController', {
    extend : 'Ext.app.Controller',
    config : {
        control : {
            'presidentdetail' : {
                activate : 'activateGPS',
                setcenter : 'dropPins'
            }
        },
        markersArray : [],
    },
    activateGPS : function(container, options){
        container.setUseCurrentLocation(true);
    },
    dropPins : function(component, map, geo, eOpts) {
        //only do this the first time? 
        //geo updates are constantly recieved so turn useCurrentLocation off
        comp.setUseCurrentLocation(true);

        //Remove all markers from the map.
        for(var i = 0; i < this.getMarkersArray().length; i++) {
            this.getMarkersArray()[i].setMap(null);
        }
        this.setMarkersArray(Array());

        var currentPosition = new google.maps.LatLng(geo.getLatitude(), geo.getLongitude());
        var yourLocationMarker = new google.maps.Marker({
                position : currentPosition,
                title : 'Current Location',
                map : map
            });
        self.getMarkersArray().push(yourLocationMarker);

        var president = comp.getPresident();
        var presidentsPosition = new google.maps.LatLng(president.getLatitude(), president.getLongitude());
        var yourLocationMarker = new google.maps.Marker({
                position : presidentsPosition,
                title : president.fullName(),
                map : map
            });
        self.getMarkersArray().push(presidentsPosition);
    }
}); 
```

**编辑** 这是添加了纬度和经度字段的模型：

```
Ext.define('List.model.President', {
    extend : 'Ext.data.Model',
    config : {
        fields : ['firstName', 'middleInitial', 'lastName', 'latitude', 'longitude']
    },
    fullName : function() {
        var d = this.data, names = [d.firstName, (!d.middleInitial ? "" : d.middleInitial + "."), d.lastName];
        return names.join(" ");
    }
}); 
```

以及带有附加字段的商店：

```
Ext.define('List.store.Presidents', {
    extend : 'Ext.data.Store',
    config : {
        model : 'List.model.President',
        sorters : 'lastName',
        grouper : function(record) {
            return record.get('lastName')[0];
        },
        data : [{
            firstName : "PEJABAT WILAYAH SARAWAK",
            lastName : "Ground, 1st & 3rd Floor, Section 6, Kuching Town Land District (KTLD), Jalan Kulas, 93400 Kuching, Sarawak",
            latitude : 4.600381 ,
            longitude : 101.094174
        }, {
            firstName : "PEJABAT WILAYAH TERENGGANU",
            lastName : "Lot PT 3593, Ground, Mezzanine & 1st Floor, Jalan Sultan Zainal Abidin, 20000 Kuala Terengganu, Terengganu",
            latitude : 5.336649,
            longitude : 103.142497
        }, {
            firstName : "PEJABAT WILAYAH MELAKA",
            lastName : "No. 10, Jalan Melaka Raya 8, Taman Melaka Raya, 75000, Melaka. ",
            latitude : 2.184044,
            longitude : 102.25982
        }]
    }
}); 
```

# zend-framework - 反序列化缓存zend原则2

> ID：10748534
> 
> 赞同：1
> 
> 时间：2012-05-25T04:40:08.757
> 
> 标签：zend-framework, serialization, doctrine-orm

嗨，你能帮帮我吗！我想使用 zend 缓存文件，因为我在共享主机中。所以问题是我无法检索缓存的学说文件结果。数据已序列化，因为它是对象。$cache->load($id) 作为数组返回，我不能反序列化回来。如果你能帮助我或提出一些建议，我会很高兴。这是我的代码。

```
$request    = $this->getRequest();
$slug   = $request->getParam('slug');

$front  = Zend_Controller_Front::getInstance();
$bootstrap= $front->getParam('bootstrap');

$cache = $bootstrap->getResource('cachemanager')->getCache('content');

$cacheId   = md5('news_' . $slug);
if ( !($news = **unserialize($cache->load($cacheId))**) ) {

$news   = $this->_em->getRepository('Custom\Entity\News')
              ->findOneBySlug($slug);
    $cache->save($news, $cacheId);
var_dump('if u see me that mean not from cached');
 }

 $page = new Zend_Navigation_Page_Mvc(array(  
        'label'         => $news[0]->getTitle(),
        'route'     => 'news-view',
    'module'        => 'news',
    'controller'    => 'index',
    'action'        => 'view',
    'params'        => array(
        'slug' => $news[0]->getAlias())
        )
  );
 $page->setActive(false);
 $this->_helper->navigation->getContainer()
              ->findOneBy('uri', '/category/' . $news[0]->getCategory()->getSlug())
              ->addPage($page);

 $this->view->ogpa = new OpenGraphProtocolArticle();
 $this->view->news   = $news;
 $this->view->headTitle($news[0]->getTitle()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:24:56.790

不要在 Zend_Cache 中保存任何 Doctrine2 模型，请参阅：[https ://ssmusoke.com/2012/03/25/doctrine2-day-3-proxies-associations-relationships/](https://ssmusoke.com/2012/03/25/doctrine2-day-3-proxies-associations-relationships/)

这是因为 Doctrine2 在后台使用了 Zend 自动加载器无法反序列化的代理类，这会给你带来很大的痛苦......

如果要缓存任何内容，请缓存输出而不是模型。

# playframework - playframework 上的访问控制允许来源

> ID：10748537
> 
> 赞同：1
> 
> 时间：2012-05-25T04:40:52.003
> 
> 标签：playframework, same-origin-policy

如何让 playframework 允许非源调用？我曾尝试将 @Before 方法添加到控制器，但从未被 ajax 客户端调用。

```
@Before 
public static void setCORS()
{
    Http.Response.current().accessControl("*", "GET,PUT,POST,DELETE", true);
} 
```

我正在尝试为客户端开发人员设置一个测试 API 服务器进行测试，但这似乎需要禁用 Origin 限制。

其他人有这个工作吗？或以不同的方式完成此任务？

**更新：** 我发现这篇关于主题 [http://javathought.wordpress.com/2011/12/04/cross-origin-resource-sharing-with-play-framework/的文章](http://javathought.wordpress.com/2011/12/04/cross-origin-resource-sharing-with-play-framework/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:30:22.603

检查您的浏览器正在尝试做什么，它可能会首先发送一个 OPTION 请求以检查允许的内容，这称为“预检请求”。

此外，将 Access-Control-Allow-Origin 设置为 * 仅在没有凭据的情况下有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:14:09.923

使用自定义路由器可以解决这个问题。

例如使用：[https ://github.com/teamon/play-navigator](https://github.com/teamon/play-navigator)

```
val rget = GET on "foo" to App.foo
val gpost = POST on "foo" to App.foo 
```

# iphone - 在推送视图控制器中查看自定义

> ID：10748538
> 
> 赞同：0
> 
> 时间：2012-05-25T04:41:00.880
> 
> 标签：iphone, objective-c, ipad, uiviewcontroller, uinavigationcontroller

对于由导航控制器推送的控制器，如果在其所需的`init`方法中创建推送控制器视图的详细信息，我的理解是，如果视图稍后因为它不在屏幕上而被删除（例如，由于内存不足），你可能再也看不到它了，因为`init`在加载视图控制器时只调用了一次，随后的推送可能什么也不显示。

这个视图设置似乎更好的地方是`viewDidLoad`or `viewWillAppear`，这样如果控制器需要在下次推送视图时构建视图，它将被正确地重新创建。

然而，我看到的教程经常将推送视图控制器的视图设置放在其`init`方法中；这有多重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T04:56:20.653

出于您所描述的原因，应该在`viewDidLoad`（或者`loadView`如果您不使用笔尖）完成视图设置。如果您需要知道控制器的顶级视图尺寸来设置子视图，请在`viewWillAppear:`.

通常，弹出的视图控制器会立即被释放；如果应用程序需要稍后显示相同的视图，它会为其创建一个新的视图控制器。所以在那种情况下，应用程序不会显示“无”。

如果应用程序在第一个视图控制器之上推送或呈现另一个视图控制器，则可以卸载第一个视图控制器的视图。如果应用程序*从未*在第一个视图控制器上推送或呈现第二个视图控制器，则在弹出控制器之前无法卸载第一个视图控制器的视图，此时（在大多数应用程序中）无论如何都会释放控制器。所以在这种情况下，设置视图`init`不会造成麻烦。

但是在`init`. 您稍后可能会更改您的应用程序以推送或呈现第二个视图控制器，从而产生意外的不安全行为。

此外，创建视图控制器，在其上设置属性，然后推送它是很常见的。如果属性影响控制器的视图层次结构，那么`init`设置视图还为时过早。

# android - 如何保护安卓应用免受盗版

> ID：10748539
> 
> 赞同：2
> 
> 时间：2012-05-25T04:41:13.397
> 
> 标签：android

> **可能重复：**
> [如何保护 Android 应用程序免遭盗窃和修改应用程序本身？](https://stackoverflow.com/questions/8482331/how-to-protect-android-app-against-theft-and-modification-of-app-itself)

我正在寻找一种方法来保护我的应用程序不被修改、使用不同的邮件软件代码重建、窃取广告 ID 文件（以禁止我进入广告网络）......

如何保护应用程序的源代码。请不要参考google Proguard，除此之外我还想要其他东西。

# asp.net - Gridview行编辑和删除

> ID：10748544
> 
> 赞同：0
> 
> 时间：2012-05-25T04:41:53.967
> 
> 标签：asp.net, gridview

我有一个网格来更新员工的确认。我需要使用编辑和删除链接更改网格中的数据。我很难创建这个网格。因为gridview所有文本框总是启用。文本框仅在单击编辑按钮时启用。

这是我的部分代码：

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True"
                                        Width="100%" AutoGenerateColumns="False" CssClass="GridViewStyle" GridLines="None"
                                        ShowHeaderWhenEmpty="True" EmptyDataText="No Data Found" 
                                        onpageindexchanging="GridView1_PageIndexChanging" 
                                        AutoGenerateDeleteButton="True" AutoGenerateEditButton="True" 
                                        onrowcancelingedit="GridView1_RowCancelingEdit" 
                                        onrowdeleting="GridView1_RowDeleting" onrowediting="GridView1_RowEditing" 
                                        onrowupdating="GridView1_RowUpdating" >
                                        <Columns>
                                            <asp:TemplateField HeaderText="EMP ID">
                                                <ItemTemplate>

                                                    <asp:TextBox ID="lblempId" runat="server" Text='<%#Bind("fldemp_id") %>'></asp:TextBox>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="EMPLOYEE NAME">
                                                <ItemTemplate>
                                                    <asp:TextBox ID="lblusername" runat="server" Text='<%#Bind("fldempname") %>'></asp:TextBox>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="JOINDATE">
                                                <ItemTemplate>
                                                   <asp:TextBox ID="lbljoin" runat="server" Text='<%#Bind("fldjoindate") %>'></asp:TextBox>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="CONFIRMATION DATE">
                                                <ItemTemplate>
                                                    <asp:TextBox ID="lblconfirm" runat="server" Text='<%#Bind("fldconfirmdate") %>'></asp:TextBox>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                               <asp:TemplateField HeaderText="STATUS">
                                                <ItemTemplate>
                                                    <asp:TextBox ID="lblStatus" runat="server" Text='<%#Bind("fldstatus") %>'></asp:TextBox>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                              <asp:TemplateField HeaderText="CONFIRMATION STATUS">
                                                  <ItemTemplate>
                                                      <asp:DropDownList ID="DropDownList1" runat="server" SelectedValue='<%# Eval("fldcon_status") %>' >
                                                          <asp:ListItem>Confirmed</asp:ListItem>
                                                          <asp:ListItem>Not-Confirmed</asp:ListItem>
                                                          <asp:ListItem>Extended</asp:ListItem>
                                                      </asp:DropDownList>
                                                  </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderImageUrl="~/images/edit.png">
                                                <ItemTemplate>
                                                    <asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/images/edit.png" CommandName="edi"
                                                        CommandArgument='<%#Bind("fldemp_id") %>' />
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderImageUrl="~/images/Delete.png">
                                                <ItemTemplate>
                                                    <asp:ImageButton ID="ImageButton2" runat="server" ImageUrl="~/images/Delete.png"
                                                        CommandName="del" CommandArgument='<%#Bind("fldemp_id") %>' />
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                        </Columns>
                                        <RowStyle CssClass="RowStyle" />
                                        <EmptyDataRowStyle CssClass="EmptyRowStyle" />
                                        <PagerStyle CssClass="PagerStyle" />
                                        <SelectedRowStyle CssClass="SelectedRowStyle" />
                                        <HeaderStyle CssClass="HeaderStyle" HorizontalAlign="Left" />
                                        <EditRowStyle CssClass="EditRowStyle" />
                                        <AlternatingRowStyle CssClass="AltRowStyle" />
                                    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T04:47:51.860

如果您询问如何在有人点击`Edit`按钮之前禁用网格中的编辑，只需在网格上将 Enabled 属性设置为 False，直到按下按钮。

# adobe-indesign - 我想在 indesign 中打开 CS5 到 CS3 版本文件

> ID：10748546
> 
> 赞同：-1
> 
> 时间：2012-05-25T04:42:01.027
> 
> 标签：adobe-indesign

我有 Adob​​e Indesign CS5 文件。我想在 Adob​​e Indesign 的 CS3 版本中打开这个文件，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:45:39.517

InDesign CS5 和 CS4 只兼容一个版本。但是CS6是三个版本兼容的。它保存了可以在 CS5.5、CS5 和 CS4 中打开的 IDML 文件。

IDML 将成为未来的交换语言，因此与旧版本的用户交换文件应该更容易。但是，请记住，当在旧软件中打开 IDML 时，文档中将缺少或删除新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:01:34.957

这样做的唯一方法是使用 CS4 作为两者之间的桥梁。

InDesign 仅向后兼容一个版本。因此，您必须将您的 CS5 文件导出为 IDML，在 CS4 中打开该文件，将其导出为 INX 文件，然后在 CS3 中打开它。

这是有据可查的；[这个论坛](http://forums.adobe.com/thread/641138?start=0&tstart=0)提供了一些关于这个问题的讨论。

# php - PHP / Zend 程序架构和接口

> ID：10748551
> 
> 赞同：0
> 
> 时间：2012-05-25T04:42:25.433
> 
> 标签：php, zend-framework, interface, model

嗨，伙计们，我正在努力思考应该保留接口的位置。

一个例子 ：

我有一个我一直在研究的 zend mvc 多模块应用程序，并想清理它（它真的很乱）

模型对象包括但不限于：

```
Model_Order
Model_Order_Item
Model_Order_Item_Location
Model_Product
Model_Customer
Model_Warehouse
Model_Warehouse_Location
Model_Warehouse_Location_Position

dependencies include:

Model_Order : Model_Order_Item ( 1 order to many items ), Model_Customer ( many orders to one customer )

Model_Order_Item : Model_Product ( 1 item has 1 product )

Model_Product : Model_Warehouse_Location_Position ( a product could have many positions ), Model_Customer ( one to one relationship )

Model_Warehouse : Model_Warehouse_Location ( one warehouse could have many locations ( or bins ) and different types )

Model_Warehouse_Location : Model_Warehouse_Location_Position ( one location many product positions )

many of these are dependencies that traverse in both directions. 
```

所以我的问题如下。

当涉及到接口时，以下哪项是合适的？

```
Model_Order_Item_Product_Interface
Model_warehouse_Location_Position_Product_Interface 
```

Model_Order_Item 内部可能是一个方法 setProduct(Model_Order_Item_Product_Interface $product)

Model_warehouse_Location_Position 里面可能是一个方法 setProduct(Model_warehouse_Location_Position_Product_Interface $product)

那么模型对象将是

```
Model_Product implements Model_Order_Item_Product_Interface, Model_warehouse_Location_Position_Product_Interface 
```

或者

我有一个概述产品的界面（Model_Product_Interface）

并且在 Model_Order_Item 内部可能是方法 setProduct(Model_Product_Interface $product) 但这意味着订单需要在其“命名空间”之外的接口。（但是！相反，现在产品正在寻找其“命名空间”之外的所有接口以获取它必须适应的所有接口）

我不是 100% 确定把这些接口放在哪里

从领域的角度来看，将其视为 4 个独立的组订单、产品、仓库和客户。在“模块”/组中设计接口会更好，因为它与此直接相关......

我的思想可以在这个主题上循环。我猜它更多的是个人喜好？

在旁注中，我还打算使用单例服务定位器来返回专用于每个组的服务，并将返回工厂和数据访问对象（以及其他与服务相关的方法）

我的想法是在 zend 的引导程序中，我会在那里进行所有的依赖注入，所以我把它放在一个地方。

我很感激你能给我的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:00:40.983

我只是将它们放在接口目录中的库中，因此它们不会弄乱我的模型目录。我在我的库中使用了一个模仿 ZF 1.x 应用程序结构的结构：

```
/library
    /namespace
        /Application
            /Controller
                /Plugin
            /Interface
            /Model
                /Entity
                    /Abstract.php
                /Mapper
                    /Abstract.php
            /Resource
            /View
                /Helper 
```

我知道这有点深入和忙碌，但它让我保持井井有条。当我更改为 ZF2 时，我将不得不重新评估以实现命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T13:10:12.743

你应该问的第一个问题是：

这个接口的所有者是谁？产品？

Product_Model_Interface_Name

/modules/product/models/interface/Name.php

为什么？

这样，您将很容易看到谁拥有用于创建它的模型。

但是如果你在谈论一个通用接口，那么你必须创建一个库

/library/MyApplication/Models/Interface/Name.php

***如果您使用通用接口，则需要在引导程序中配置自动加载***

# windows - 如何从 Windows 服务使用 ATl COM

> ID：10748559
> 
> 赞同：0
> 
> 时间：2012-05-25T04:43:08.323
> 
> 标签：windows, visual-studio-2008, visual-c++, service, atlcom

使用 VS2008 向导，我创建了一个服务（目前除了启动和停止之外什么都不做）

我希望使用（进程外）COM 对象

如果我添加一个#import“object.tlb”，那么重新编译会给出

错误 C2812：/clr:pure 和 /clr:safë 不支持 #import

更改属性以使用 /clr（不是纯的或安全的），允许编译，但服务安装失败，并显示“Ätempt to load an unverifiable executable with fixups”

任何建议表示赞赏

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:29:13.850

在 MSDN 文章中明确提到了 InstallUtil.exe：

> 请注意，您不能部署使用 C++ 和 Installutil.exe 创建的 Windows 服务。Installutil.exe 无法识别由 C++ 编译器生成的嵌入式本机代码。如果您尝试使用 Installutil.exe 部署 C++ Windows 服务，则会引发异常，例如 BadImageFormatException。要使用此方案，请将服务代码移至 C++ 模块。**然后，用 C# 或 Visual Basic 编写安装程序对象。**

# javascript - 如何检测窗口外的点击

> ID：10748570
> 
> 赞同：2
> 
> 时间：2012-05-25T04:45:29.340
> 
> 标签：javascript, yui

我在“ul”和“li”中编码的 html 中有一个自定义下拉列表，当用户单击“ul”的头部时显示选项我想在用户单击菜单区域外时隐藏这些元素。

使用 javascript/YUI 而不是 Jquery 可能会发生这样的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:48:11.050

我不是 YUI 的人，所以我怀疑这可能会写得更好，但我已经测试过它并且它有效。

在单击文档时隐藏下拉列表：

```
Y.one(document).on("click", function(){
    Y.one("#menu").hide(); 
}); 
```

防止点击`ul`传播到`document`：

```
Y.one("#menu").on("click", function(e){
    e.stopPropagation();    
}); 
```

如果访问者点击任何地方，点击会冒泡到`document`，并隐藏菜单。如果他们点击菜单，事件将被阻止冒泡到`document`，因此菜单不会被隐藏。

演示：http: [//jsfiddle.net/nHnZT/](http://jsfiddle.net/nHnZT/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T18:07:30.260

`use('event-outside')`添加对“外部”事件的支持。有关详细信息，请参阅用户指南：http: [//yuilibrary.com/yui/docs/event/outside.html](http://yuilibrary.com/yui/docs/event/outside.html)

# bash - 如何用 shell 脚本替换单位值

> ID：10748575
> 
> 赞同：0
> 
> 时间：2012-05-25T04:46:01.480
> 
> 标签：bash, shell, string-parsing

我有一个格式为的输出

```
weight:121p height:6f money:5 update:8 read:62b query:132 etc 
```

我希望输出没有像这样的单位

```
weight:121 height:6 money:5 update:8 read:62 query:132 etc 
```

我试过`| tr "p", " "`etc 但问题是它删除了输出中每次出现的字母 p 。

我只想删除冒号后的单位。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T04:50:10.597

```
sed 's/\(:[0-9][0-9]*\)[a-z]/\1/g' 
```

或者如果单位可能超过一个字母

```
sed 's/\(:[0-9][0-9]*\)[a-z][a-z]*/\1/g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:54:38.220

```
echo "weight:121p height:6f money:5 update:8 read:62b query:132 etc"|awk '{$1=substr($1,0,length($1)-1);$2=substr($2,0,length($2)-1);$5=substr($5,0,length($5)-1);print}'

        weight:121 height:6 money:5 update:8 read:62 query:132 etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:55:25.317

如果你更喜欢 perl：

```
echo "weight:121p height:6f money:5 update:8 read:62b query:132" \
| perl -pe 's/(\w+:\d+)\w* /$1 /g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T11:36:01.117

这会将带有尾随非数字/非点的数字强制转换为数字。

```
awk '{for (i = 1; i <= NF; i++) {split($i, a, /:/); if (a[2] ~ /^[[:digit:]]/) {$i = a[1] ":" a[2] + 0}}; print}' inputfile 
```

# postgresql - 为什么 pgadmin 不能连接到服务器，但我可以使用命令行进入？

> ID：10748580
> 
> 赞同：1
> 
> 时间：2012-05-25T04:46:45.183
> 
> 标签：postgresql, pgadmin

当我尝试使用 pgadmin 时，我不断收到身份验证错误。我正在使用自己的帐户和登录密码。

以下确实有效：

```
$  sudo -u postgres createuser -s $USER
$ createdb md3
$ psql -d md3

psql (9.1.3)
Type "help" for help.

md3=# 
```

但是，然后我在 pgadmin GUI 中收到此错误：

![在此处输入图像描述](../Images/bd9295745df379a045a0b5e1d8327a0b.png)

也许我应该使用 root 或 postgres 用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T11:34:14.190

以 postgres 用户身份登录 pgadmin 并检查用户“durrantm”是否存在以及他是否可以登录（权限选项卡中应该有一个复选框）

# android - 位图设置异常 java.lang.IllegalArgumentException : x must be < bitmap.width()

> ID：10748596
> 
> 赞同：1
> 
> 时间：2012-05-25T04:49:39.607
> 
> 标签：android, bitmap

我正在使用具有四种颜色的图像，其中每种颜色执行不同的操作。例如，当我单击红色时，它会通过位图获取像素值，如果颜色匹配则执行相应的操作。但是，现在我面临一个问题，例如`java.lang.IllegalArgumentException: x must be < bitmap.width()`所以，我手动设置位图高度和宽度。

我有一个表（行 = 2，列 = 19），其中包含 37 个图像按钮和一个图像按钮。第一行有一个图像和 18 个图像按钮，第二行有 19 个图像按钮。这就是为什么如果我设置这个的高度和宽度手动图像，图像占用我通过位图和其他按钮设置的空间的不同设备被拉伸（它显示不同的屏幕不同视图）。所以，我应该做什么。我可以手动设置位图宽度和高度吗？

```
bmp=BitmapFactory.decodeResource(getResources(), R.drawable.spdf3);
int width=102;
int height=71;
Bitmap resizedbitmap=Bitmap.createScaledBitmap(bmp, width, height, true);
spdf.setImageBitmap(resizedbitmap); 
```

# vba - VB6/VBA TabStrip 可以在两个选项卡中具有相同的控件吗？

> ID：10748598
> 
> 赞同：3
> 
> 时间：2012-05-25T04:49:46.803
> 
> 标签：vba, vb6, vb6-migration

我注意到 VBA/VB6 TabStrip 控件允许在其页面中克隆其子项的实例。我正在查看一个旧的 VBA 项目，它有一个标签条，在幕后它只是添加页面，控件会自动复制，但可以有不同的数据源。

有什么方法可以在 VB.NET 中复制它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T08:23:30.183

在 VB6 中，TabStrip 控件不是容器，它只是放置在任何容器（最常见的是图片框）的面板区域之上。因此，可以对每个选项卡使用相同的控件，只需更改标签标题和/或数据源即可更新它们。

在 VB.NET 中，TabControl 为每个选项卡提供了一个类似于面板的对象，称为 TabPage。因此，您可以在设计时在每个页面上放置单独的控件，或者模拟 VB6 方法，通过在运行时更改其“父”属性以编程方式在页面之间移动控件。这通常在 TabControl 的 SelectedIndexChanged 事件中完成，如下所示：

```
Private Sub TabControl1_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles TabControl1.SelectedIndexChanged
    DataGridView1.Parent = TabControl1.SelectedTab
End Sub 
```

# scala - 如何在不指定类型的情况下序列化任何内容？

> ID：10748599
> 
> 赞同：0
> 
> 时间：2012-05-25T04:49:51.703
> 
> 标签：scala

我正在与 ZeroMQ 和 Akka 集成以从不同的实例发送案例类。问题是当我尝试编译这段代码时：

```
def persistRelay(relayEvent:String, relayData:Any) = {
    val relayData = ser.serialize(relayData).fold(throw _, identity)
    relayPubSocket ! ZMQMessage(Seq(Frame(relayEvent), Frame(relayData)))
  } 
```

Scala 编译器返回`recursive value relayData needs type`.

进入的案例类都是不同的，看起来像`Team(users:List[Long], teamId:Long)`等等。

是否有一种方法可以允许序列化程序中的任何类型或解决方法？除非绝对必要，否则我宁愿避免为每个创建数据的函数编写序列化程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T17:17:49.193

这不是*真正*的打字问题。问题是：

```
val relayData = ser.serialize(relayData).fold(throw _, identity) 
```

您在`val relayData`引用方法参数的同一行中声明 a `relayData`。Scala 编译器不理解您拥有/想要两个具有相同名称的变量，而是将其解释为`val relayData`. 更改其中一个变量的名称应该可以修复错误。

无论如何，由于您没有完全遵循 Scala 编译器的要求，我认为最好向您填写编译器甚至想要您提供的内容（尽管如果遵循建议，考虑到这种情况，可能只会导致您遇到另一个似乎没有多大意义的错误）。

它说“递归值`relayData`需要类型”。这意味着它希望您`relayData`通过具有

```
val relayData = ... 
```

变成类似的东西

```
val relayData: Serializable = ... 
```

（或者，代替`Serializable`，使用您想要的任何类型`relayData`）

它需要这些信息来创建递归定义。例如，以简单的情况为例

```
val x = x + 1 
```

这段代码......至少可以说很奇怪，但我正在做的是以`x`（浅）递归方式定义。但是有一个问题：编译器如何知道内部使用什么类型`x`？通过类型推断并不能真正确定类型，因为类型推断涉及利用*其他*定义的类型信息，而这个定义需要***`x`的***类型信息。现在，*我们*或许可以推断出我可能在谈论一个`Int`，但从理论上讲，`x`可能是*这么多东西*！事实上，这是行动中的歧义：

```
val x: Int = x + 1 // Default value for an Int is '0'
x: Int = 1

val y: String = y + 1 // Default value for a String is 'null'
y: String = null1 
```

真正改变的是类型注释，但结果却截然不同——这只是一个非常简单的例子！所以，是的，总结一下这一切......**在大多数情况下**，当它抱怨递归值需要类型时，你应该对糟糕的编译器有一些同情，并给它它非常渴望的类型信息。它会为你做同样的事情，DeLongey！它会为你做同样的事情！

# javascript - 如何使用javascript隐藏和显示div onselect

> ID：10748600
> 
> 赞同：2
> 
> 时间：2012-05-25T04:49:53.870
> 
> 标签：javascript, html, logic

这是我正在尝试的代码 -

DIVS-

```
<div id="showdiv16" style="display:none;">...</div>
<div id="showdiv17" style="display:none;">...</div>
<div id="showdiv18" style="display:none;">...</div>
<div id="showdiv19" style="display:none;">...</div> 
```

现在我有一个下拉菜单，从中获取值 16,17, 18,19

在这个下拉菜单中，我调用了 onchange 方法

```
<select name="category" id="category" onChange="showSelected(this.value);showSubcategory();" > 
```

我的 JavaScript 函数是-

```
<script type="text/javascript">
function showSelected( sapna )
{

    var myDivs = new Array(16,17,18,19); 
    for(var i=0; i<myDivs.length; i++) 
    {
        if(myDivs[i] == sapna)
        {
            var divtoshow = 'showdiv'+sapna;
            document.getElementById('showdiv'+sapna).style.display = "block";
        }
        else
        {
            document.getElementById('showdiv'+myDivs[i]).style.display = "none";
        }
    }

    return false;
}
</script> 
```

让我知道如何实现这种显示/隐藏 div 效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:01:33.037

我知道这被标记为 javascript 而不是 jQuery，但使用 jQuery 执行此操作非常简单，所以这里有一个示例。

```
$('#category').on('change click', function() {
    $('div').hide();
    $('#showdiv' + this.value).show();
}); 
```

工作 jsFiddle：http: [//jsfiddle.net/UBsp9/](http://jsfiddle.net/UBsp9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T05:07:41.703

我的第一个猜测是您正在尝试将选择框中的字符串结果与 myDivs 数组中的整数进行比较。

这是一些与您的原始代码匹配的普通 js（尽管使用 jquery 之类的 JS 库确实可以省去很多麻烦，因此您可能需要研究一下）。

```
function showSelected(sapna)
{
    var myDivs = new Array(16,17,18,19);
    for(var i=0; i<myDivs.length; i++)
    {
        document.getElementById('showdiv'+myDivs[i]).style.display = (myDivs[i] == parseInt(sapna)) ? 'block' : 'none';
    } // end for i in myDivs.length
} // end function showSelected​​ 
```

还有一个 js 小提琴：http: [//jsfiddle.net/Wyedr/1/](http://jsfiddle.net/Wyedr/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T05:23:40.723

虽然`jQuery`会更容易和更清洁，但在`JavaScript`下面明白这一点：

```
<html>
<head>
<title>test</title>
<style type="text/css">
    div{height:50px;width:200px;text-align:center;
        vertical-align:middle;border:1px dotted green;
        background-color:khaki;}
</style>
</head>
<body>
    <select id="test" onchange="showSelected(this.value)">
        <option value="-1" selected="selected">select</option>
        <option value="16">cat 16</option>
        <option value="17">cat 17</option>
        <option value="18">cat 18</option>
        <option value="19">cat 19</option>
    </select>

    <div id="showdiv16" style="display:none;">16</div>
    <div id="showdiv17" style="display:none;">17</div>
    <div id="showdiv18" style="display:none;">18</div>
    <div id="showdiv19" style="display:none;">19</div>

</body>
<script type="text/javascript">
    var myDivs = new Array(16, 17, 18, 19);

    function showSelected(sapna) {
        var t = 'showdiv' + sapna,
            r, dv;
        for (var i = 0; i < myDivs.length; i++) {
            r = 'showdiv' + myDivs[i];
            dv = document.getElementById(r);
            if (dv) {
                if (t === r) {
                    dv.style.display = 'block';
                } else {
                    dv.style.display = 'none';
                }
            }
        }
        return false;
    }
</script>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T05:04:26.907

如果您可以使用 jquery，那么您可以执行以下操作：

```
<div id="showdiv16" class='targets' style="display:none;">Div 16</div>
<div id="showdiv17" class='targets' style="display:none;">Div 17</div>
<div id="showdiv18" class='targets' style="display:none;">Div 18</div>
<div id="showdiv19" class='targets' style="display:none;">Div 19</div>

<select name="category" id="category">
    <option value=''>Select</option>
    <option value='16'>16</option>
    <option value='17'>17</option>
    <option value='18'>18</option>
    <option value='19'>19</option>
</select> 
```

这是jquery

```
$(function(){
    $('#category').change(function(){
        var divToShow = $(this).val();
        $('.targets').hide();
        $('#showdiv' + divToShow ).show();
​    });
}) 
```

你可以在这里查看工作演示[http://jsfiddle.net/H9cvZ/35/](http://jsfiddle.net/H9cvZ/35/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T05:17:20.897

你也可以试试这个

[对于示例代码，检查这个 JSFiddle](http://jsfiddle.net/umairnoor84/5P2A5/)

# ios - 在 AudioBufferList 中分配缓冲区，仅包含 inNumberFrames 信息 iOS

> ID：10748609
> 
> 赞同：0
> 
> 时间：2012-05-25T04:51:12.470
> 
> 标签：ios, callback, malloc, audiounit, audiobuffer

我有一个录音机回调（kAudioOutputUnit_SetInputCallback），我需要在 AudioBufferList 中分配缓冲区，只有一个回调返回的 informatin-inNUMberFrames。我如何为此进行malloc？如何仅使用帧数确定有多少数据可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:02:51.107

```
OSStatus AudioCapturer::recordingCallback(void *inRefCon, 
                              AudioUnitRenderActionFlags *ioActionFlags, 
                              const AudioTimeStamp *inTimeStamp, 
                              UInt32 inBusNumber, 
                              UInt32 inNumberFrames, 
                              AudioBufferList *ioData) {

AudioCapturer *capturer=(AudioCapturer * )inRefCon;

    AudioBuffer buffer;
    buffer.mNumberChannels = 1;
    buffer.mDataByteSize = inNumberFrames * 2;
    buffer.mData = malloc( inNumberFrames * 2 );

    // Put buffer in a AudioBufferList that is to be filled in the AudioUnitRender 
    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;

    // Then:
    // Obtain recorded samples
    OSStatus status;
    status = AudioUnitRender(capturer->m_audioUnit, 
                             ioActionFlags, 
                             inTimeStamp, 
                             inBusNumber, 
                             inNumberFrames, 
                             &bufferList);
    capturer->checkStatus(status);

    //use the bufferlist data and free the allocated buffer
    free(bufferList.mBuffers[0].mData);

 return noErr;
} 
```

# c - 在 Windows (C/C++) 上检查应用程序二进制文件的位数

> ID：10748614
> 
> 赞同：2
> 
> 时间：2012-05-25T04:51:29.520
> 
> 标签：c, windows

是否可以在不运行/运行之前检查二进制 (EXE) 的位数？这可以在 Linux 上轻松完成，但我不熟悉 Windows 二进制格式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:12:05.190

既然你标记了这个问题`C`，就有了一个 Win32 API 函数[`GetBinaryType`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364819%28v=vs.85%29.aspx)。但是，它不适用于 DLL。

```
if ( GetBinaryType(argv[i], &bintype) ) {
  switch(bintype) {
    case SCS_32BIT_BINARY: typename = TEXT("Windows 32 Bit"); break;
    case SCS_64BIT_BINARY: typename = TEXT("Windows 64 Bit"); break;
    case SCS_DOS_BINARY:   typename = TEXT("DOS-Programm");   break;
    case SCS_OS216_BINARY: typename = TEXT("OS/2-Programm");  break;
    case SCS_PIF_BINARY:   typename = TEXT("PIF-Datei");      break;
    case SCS_POSIX_BINARY: typename = TEXT("POSIX-Programm"); break;
    case SCS_WOW_BINARY:   typename = TEXT("Windows 16 Bit"); break;
    default:               typename = TEXT("unknown");        break;
  }
}
else {
  typename = TEXT("not executable");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:27:33.817

[在这里](https://superuser.com/a/358459/119258)查看答案 它说可以通过使用`dumpbin /headers`Windows 平台 SDK获得此信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:51:57.163

有许多工具可以帮助您发现应用程序的位数（例如 WinDbg 或 PeStudio）。

![在此处输入图像描述](../Images/95b1014c48b540df507ad2042c5b32a4.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T07:00:40.143

读取标题：

[IMAGE_FILE_HEADER 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680313%28v=vs.85%29.aspx)

作为开始，你可以做这样的事情，（应该对 dll 和 exe 都有效）：（
只在几个文件上进行了测试——结果还不错。）

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

/* Runtime Byteorder detection - Motorola or Intel (Does not catch mixed) */
static int byteorder_mm(void)
{
    union {double d; unsigned int i[2];} u;

    u.d = 1.0;

    return (u.i[0] != 0);
}

/* Char to unsigned int */
static unsigned int chr_to_ui(unsigned char *buf, int mm)
{
    if (mm)
        return buf[0] << 24 | buf[1] << 16 | buf[2] << 8 | buf[3];
    return buf[3] << 24 | buf[2] << 16 | buf[1] << 8 | buf[0];

}

/* Char to unsigned short */
static unsigned short chr_to_us(unsigned char *buf, int mm)
{
    if (mm)
        return buf[0] << 8 | buf[1];
    return buf[1] << 8 | buf[0];
}

int main(int argc, char *argv[])
{
    FILE *fh;
    unsigned char buf[128] = {0};
    char tmpstr[64];
    unsigned int tmp_ui;
    unsigned short tmp_us;

    time_t tt;

    int mm = byteorder_mm();

    if (argc < 2) {
        fprintf(stderr,
            "Missing input file.\n");
        return 1;
    }

    if ((fh = fopen(argv[1], "rb")) == NULL) {
        fprintf(stderr,
            "Unable to open %s.\n",
            argv[1]);
        perror(0);
        return 1;
    }

    /* Read MS-DOS Segment  */
    if (!fread(buf, 64, 1, fh)) {
        fprintf(stderr,
            "Unable to read %d bytes, @%ld.\n",
            2, ftell(fh));
        perror(0);
        fclose(fh);
        return 1;
    }

    /* Check header mark : MZ */
    if (buf[0] != 0x4d || buf[1] != 0x5a) {
        fprintf(stderr,
            "%s is missing Mark Zbikowski header.\n",
            argv[1]);
        fclose(fh);
        return 2;
    }

    /* Get offset (from 0) to IMAGE_NT_HEADERS */
    tmp_ui = chr_to_ui(buf+60, mm);

    fseek(fh, tmp_ui - 64, SEEK_CUR);

    /* Read IMAGE_NT_HEADER signature  */
    if (!fread(buf, 4, 1, fh)) {
        fprintf(stderr,
            "Unable to read %d bytes, @%ld.\n",
            4, ftell(fh));
        perror(0);
        fclose(fh);
        return 1;
    }

    /* Check signature : PE'x0'x0 */
    if (buf[0] != 0x50 || buf[1] != 0x45 ||
        buf[2] != 0x00 || buf[3] != 0x00) {
        fprintf(stderr,
            "%s is missing valid Portable Executable signature.\n",
            argv[1]);
        fclose(fh);
        return 2;
    }

    /* Read IMAGE_FILE_HEADER:
    typedef struct _IMAGE_FILE_HEADER {
        WORD  Machine;
        WORD  NumberOfSections;
        DWORD TimeDateStamp;
        DWORD PointerToSymbolTable;
        DWORD NumberOfSymbols;
        WORD  SizeOfOptionalHeader;
        WORD  Characteristics;
    } IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER;
    */
    if (!fread(buf, 20, 1, fh)) {
        fprintf(stderr,
            "Unable to read %d bytes, @%ld.\n",
            4, ftell(fh));
        perror(0);
        fclose(fh);
        return 1;
    }

    /* Bittype */
    tmp_us = chr_to_us(buf, mm);

    switch (tmp_us) {
    case 0x014c: fprintf(stdout, "Machine: x86 (I386)\n"); break;
    case 0x0200: fprintf(stdout, "Machine: IA64 (Intel Itanium)\n"); break;
    case 0x8664: fprintf(stdout, "Machine: x64 (AMD64)\n"); break;
    default: fprintf(stderr,
            "Unable to recognize machine type 0x%04x\n",
            tmp_us);
        fclose(fh);
        return 2;
    }

    /* Timestamp */
    tmp_ui = chr_to_ui(buf+4, mm);

    tt = tmp_ui;
    strftime(tmpstr, 31, "%a %Y-%m-%d %H:%M:%S", localtime(&tt));
    fprintf(stdout,
        "Time   : %s (%d)\n",
        tmpstr, tmp_ui);

    /* ... */

    fclose(fh);
    return 0;
} 
```

# java - ByteBuffers 可以用作“长寿”的静态对象吗？

> ID：10748616
> 
> 赞同：2
> 
> 时间：2012-05-25T04:51:40.877
> 
> 标签：java

我需要将某些 ByteBuffer 对象作为静态字段存储在我的类中。将它们存储为长寿对象是否有任何顾虑，还是我应该按需创建它们？我经常需要访问这些对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:09:19.977

缓冲区不是线程安全的。因此，如果它是多线程应用程序，则需要特别注意它。这里有类似的讨论：

[ByteBuffer 作为类中的静态最终字段](https://stackoverflow.com/questions/10051531/bytebuffer-as-static-final-fields-within-classes)

如果是这种情况，我的建议是动态创建它，因为它将帮助您仅为操作所需的数据分配内存。如果您将它池化并且要读取的数据少于分配，那么不必要的内存将是分配。

希望这会帮助你。

# spring - 奇怪的 Spring @SessionAttributes 行为

> ID：10748620
> 
> 赞同：2
> 
> 时间：2012-05-25T04:53:06.850
> 
> 标签：spring, spring-mvc, session-state, tomcat7

我在 2 个控制器上使用 @SessionAttributes 并且遇到了一些非常奇怪的行为。我的第一个控制器 (ViewController) 只是一个显示 JSP 页面的视图控制器。另一个是处理 Ajax 请求的控制器（AjaxController）。我有一个会话属性，它只是一个以 HashMap 作为成员的对象。该对象是地图的包装器。地图从数据库中填充并放入会话中，通过 ViewController 显示良好。但是，当我通过 ajax 请求 (AjaxController) 从地图中删除并刷新页面时，ViewController 有时会显示该元素已被删除，而其他时候该元素仍然存在。这是代码片段：

**ViewController**（首页简单显示userSettings所包含的地图内容

```
@Controller
@SessionAttributes({"userSettings"})
public class ViewController {

@RequestMapping(value="/", method=RequestMethod.GET)
    public String home(ModelMap model) {
        UserSettings userSettings = (UserSettings) model.get("userSettings");
        String userListenersJson = userSettings.toJson();  // for bootsrtapping the js on the front end

        return "views/home";
    }
} 
```

Ajax控制器：

```
@Controller
@SessionAttributes({"userSettings"})
public class AjaxController {

@RequestMapping(value="/users/listeners/{externalId}", method=RequestMethod.DELETE)
public @ResponseBody
AjaxResponse<?> deleteListener(ModelMap model,
        @PathVariable long externalId) {

            UserSettings userSettings = (UserSettings) model.get("userSettings");
            userSettings.removeSetting(externalId);
            return new AjaxResponse<String>(null, true);    
}
} 
```

我在这里使用@SessionAttributes 错了吗？为什么这有时会起作用，而其他时候却不起作用？我还尝试将所有视图和 ajax 功能放在同一个控制器中并体验到相同的行为。

谢谢你的帮助！

**编辑：**

我已经重构了我的代码以通过 springsecurity 使用 UserPrincipal。我的理解是这个对象存储在会话中。无论如何，我看到的行为完全相同。

这是填充用户设置映射的 UserPrincipal 构造函数。我在这里设置了断点以确保设置了正确的 listenerDBO——它们每次都设置。这是唯一一次将侦听器从 db 设置到 CustomUserPrincipal 中的 UserSettings 对象中。所有其他添加/删除都是通过控制器完成的（快速旁白：添加永远不会失败......仅删除）：

```
public CustomUserPrincipal(UserDBO userDBO) {
    // set UserSettings obj
    UserSettingsAdapter.addListeners(userDBO.getUserListenerDBOs(), userSettings);
} 
```

UserSettings 对象本身：

```
public class UserSettings implements Serializable {

    private static final long serialVersionUID = -1882864351438544088L;
    private static final Logger log = Logger.getLogger(UserSettings.class);

    private Map<Long, Listener> userListeners = Collections.synchronizedMap(new HashMap<Long, Listener>(1));

    // get the listeners as an arraylist
    public List<Listener> userListeners() {
        return new ArrayList<Listener>(userListeners.values());
    }

    public Map<Long, Listener> getUserListeners() {
        return userListeners;
    }

    public Listener addListener(Listener listener) {
        userListeners.put(listener.getId(), listener);
        return listener;
    }

    // I'm logging here to try and debug the issue. I do see the success
    // message each time this function is called
    public Listener removeListener(Long id) {
        Listener l = userListeners.remove(id);
        if (l == null) {
            log.info("failed to remove listener with id " + id);
        } else {
            log.info("successfully removed listener with id " + id);
        }

        log.info("Resulting map: " + userListeners.toString());
        log.info("Map hashcode: " + userListeners.hashCode());

        return l;
    }

    public Listener getListener(long id) {
        return userListeners.get(id);
    }
  } 
```

这是 UserSettingsAdapter 类中添加到 UserSettings 对象的辅助函数，从 CustomUserDetails 构造函数调用：

```
public static void addListeners(Set<UserListenerDBO> userListeners, UserSettings userSettings) {
    for (UserListenerDBO userListenerDBO : userListeners) {
        if (userListenerDBO.isActive()) {
            addListener(userListenerDBO, userSettings);
        }
    }
} 
```

我还将控制器代码更改为使用 CustomUserPrincipal 对象而不是 @SessionAttributes：

在视图控制器中：

```
@RequestMapping(value="/", method=RequestMethod.GET)
public String home(ModelMap model) {
   CustomUserPrincipal userPrincipal = authenticationHelpers.getUserPrincipal();
   UserSettings userSettings = userPrincipal.getUserSettings();
   String userListenersJson = userSettings.toJson();
   return "views/home";
} 
```

在 AjaxController 中：

```
@RequestMapping(value="/users/listeners/{externalId}", method=RequestMethod.DELETE)
public @ResponseBody
AjaxResponse<?> deleteListener(ModelMap model,
        @PathVariable long externalId) {
   CustomUserPrincipal userPrincipal = authenticationHelpers.getUserPrincipal();
   UserSettings userSettings = userPrincipal.getUserSettings();
   userSettings.removeListener(externalId);

   return new AjaxResponse<String>(null, true); 
} 
```

我希望这有助于阐明这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:16:03.937

我遇到了@SessionAttributes 的类似问题。控制器在类级别具有 @SessionAttributes 注释，其中一种方法处理 POST 请求，并包含会话管理对象的实例作为参数。此实例已保存到数据库中，但被后续请求重新使用，导致某些数据损坏。我们必须添加另一个 SessionStatus 类型的方法参数，然后调用`SessionStatus.setComplete()`. 这会导致实例从会话中删除，并防止重用和损坏。因此，尝试将 SessionStatus 实例添加到控制器的处理程序方法中，并在适当的情况下调用 setComplete()。

`isComplete()`编辑：我在最初的回答中不小心引用了吸气剂；我的意思是引用 setter `setComplete()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T07:18:40.513

@SessionAttributes 特定于一个控制器，而不是在多个控制器之间共享。相反，请考虑手动使用 session.setAttribute（类 HttpSession）。

你应该看看这里：[http ://beholdtheapocalypse.blogspot.fr/2013/01/spring-mvc-framework-sessionattributes.html](http://beholdtheapocalypse.blogspot.fr/2013/01/spring-mvc-framework-sessionattributes.html)

# android - Adobe AIR/FlashBuilder 4.6：在 Android App 中创建提醒

> ID：10748629
> 
> 赞同：5
> 
> 时间：2012-05-25T04:54:29.733
> 
> 标签：android, air, flash-builder, flash-builder4.5

我正在使用 Flash Builder 4.6 和 Adob​​e AIR 来创建 Android 应用程序。我希望创建某种提醒/约会，以在指定时间在屏幕或应用栏中显示通知。到目前为止，我还没有找到一种方法来做到这一点。我想我可能会在 ANE[Actionscript Native Extension] 中找到这个功能，但是我还没有遇到过。

这可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T07:56:49.847

有可用的开源 Native Extensions 使您能够在 Android 上发送通知。[Daniel Koestler 的这个](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/notification.html)示例包括 ane 文件，以及示例项目和教程。

要在特定时间发送通知，您需要 Android [AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)的本机扩展。有关更多详细信息，请参阅 SO 问题[将通知设置为特定时间](https://stackoverflow.com/questions/8281075/set-notification-to-specific-time)。

我不知道 Adob​​e[的开发人员页面](http://www.adobe.com/devnet/air/native-extensions-for-air.html)或 github 上有任何可用的 AlarmManager 本地扩展。

# unix - Unix 中的系统调用

> ID：10748633
> 
> 赞同：0
> 
> 时间：2012-05-25T04:54:52.013
> 
> 标签：unix, system-calls

我正在阅读有关系统调用的信息，并遇到了 open(2)、read(2)、write(2) 等形式的系统调用。我试图在括号中找到whats 2。首先，我认为它是标志设置，但不是我发现的标志。请帮助我理解这一点。如果问题太愚蠢，请多多包涵。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:58:39.593

我认为这可能只是指它所在的手册页部分。例如 man 2 read 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:58:43.427

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T04:58:25.773

它表示手册页中的部分

[http://en.wikipedia.org/wiki/Man_page#Manual_sections](http://en.wikipedia.org/wiki/Man_page#Manual_sections)

如您所见，2 被列为系统调用，这是您所期望的，因为 open、read 和 write 几乎都是系统调用 :)

这很有用，例如如果你想查找 perl 的 open，你可以这样做：

```
man open -S 3 # -S switch here is to specify which section in man page 
```

# android - 向下滑动 ListView 项隐藏内容

> ID：10748634
> 
> 赞同：0
> 
> 时间：2012-05-25T04:54:53.060
> 
> 标签：android, visibility

我有这个列表，其中包含一些隐藏的 TextView。

当点击一个项目时，我想平滑地向下滑动并显示隐藏的内容，如果再次点击，则向上滑动。

这怎么可能？

隐藏和不隐藏：

![图片在这里](../Images/5fa8e78665309db0ef35c93117a33e16.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:57:59.030

您正在寻找[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

Expandable ListView 默认有两个级别。第一层称为“组视图”，第二层称为“子视图”。您可以通过使用我提供的第一个链接中的自定义适配器示例来简单地实现。

这里有几个链接可以帮助您入门，

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/ExpandableList1.html)

[http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html](http://about-android.blogspot.in/2010/04/steps-to-implement-expandablelistview.html)

[http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php](http://www.techienjoy.com/android-expandable-list-dynamically-created-example.php)

要使唯一的孩子在特定时间展开，请添加以下内容，

```
explist.setOnGroupExpandListener(new OnGroupExpandListener() {

    public void onGroupExpand(int groupPosition) {

        for(int i=0; i<myExpAdapter.getGroupCount(); i++) {
            if(i != groupPosition) {
                explist.collapseGroup(i);
            }
        }
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T21:54:28.093

ExpandableListView 在功能上解决了您的问题。

但是，如果您想获得流畅的动画，我建议您使用我自己创建的库。

[https://github.com/tjerkw/Android-SlideExpandableListView](https://github.com/tjerkw/Android-SlideExpandableListView)

它适用于普通的 ListView！它得到了流畅的动画。

# sql - 按语句分组 SQL

> ID：10748635
> 
> 赞同：0
> 
> 时间：2012-05-25T04:55:08.547
> 
> 标签：sql, oracle, oracle10g

此 Select 语句提供了以下数量：

- 相同的 CatCode

-相同的猫名

但使用不同的 Sales_Amt

```
Select p.CatCode, p.CatName, s.Sales_Amt
From A3_Dw_Prod p, A3_Dw_Sales s
Order By p.Dw_Prod_Id Desc; 
```

我想使用 Sum 函数添加这些类别并将它们分组当我使用 Sum 时出现错误

*ORA-00979: 不是 GROUP BY 表达式*

```
Select p.CatCode, p.CatName, Sum(s.Sales_Amt)
From A3_Dw_Prod p, A3_Dw_Sales s
Where p.Dw_Prod_Id = s.Dw_Prod_Id
Group By p.CatCode, p.CatName 
Order By p.Dw_Prod_Id Desc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:59:41.010

我认为“p.Dw_Prod_Id Desc”列不在 group by 子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:03:15.993

我认为问题出现了，因为您在 ORDER BY 子句中包含了“p.Dw_Prod_Id”但是，该列尚未在主查询中选择，因此会产生问题将 ORDER BY 放入 select 子句中的列之一(p.CatCode, p.CatName)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:09:03.280

您还必须将所有在 group by OR order by 子句中使用的列放在选择中。

```
Select p.CatCode, p.CatName, p.Dw_Prod_Id, Sum(s.Sales_Amt)
From A3_Dw_Prod p, A3_Dw_Sales s
Where p.Dw_Prod_Id = s.Dw_Prod_Id
Group By p.CatCode, p.CatName,p.Dw_Prod_Id
Order By p.Dw_Prod_Id Desc, p.CatCode, p.CatName; 
```

# android - android中的数据库备份

> ID：10748638
> 
> 赞同：0
> 
> 时间：2012-05-25T04:55:20.653
> 
> 标签：android, database

我在我的应用程序中使用 Sql 数据库，因为我想备份数据库。我有以下疑问：

1.我在模拟器中运行应用程序，检查是否需要插入一些外部存储来检查，如果不是在我的系统中，我该如何检查。2.我在我的应用程序中使用以下代码，在那个 sdcard.write 选项显示为假，这有什么问题。

以下是我的代码：

```
 try {
                    File sd = Environment.getExternalStorageDirectory();
                    File data = Environment.getDataDirectory();

                    java.lang.System.out.println("data="+sd.getAbsolutePath());
 java.lang.System.out.println("data="+sd.canWrite());--->Showing as false

                    if (sd.canWrite()) {
                        String currentDBPath = "\\data\\com.budget\\databases\\budget";
                        String backupDBPath = "budget";
                        File currentDB = new File(data, currentDBPath);
                        File backupDB = new File(sd, backupDBPath);

                        java.lang.System.out.println("backup="+backupDB.getAbsolutePath());

                        if (currentDB.exists()) {
                            FileChannel src = new FileInputStream(currentDB).getChannel();
                            FileChannel dst = new FileOutputStream(backupDB).getChannel();
                            dst.transferFrom(src, 0, src.size());
                            src.close();
                            dst.close();
                        }
                    }
                } catch (Exception e) {
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:01:02.943

`.db`上面的摘录中缺少文件扩展名 ( )：

```
currentDBPath = "\\\data\\\com.budget\\\databases\\\budget.db"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:13:56.373

android中的数据备份[文档](http://developer.android.com/guide/topics/data/backup.html)。如果您的 Android 应用程序有一个数据库，并且您希望您的用户能够备份数据库并在他们认为合适的时候恢复它，那么您将需要处理数据库文件。

下面是一个名为 DbExportImport 的类。使用正确的值设置它后，您需要做的就是从应用程序调用 exportDb()、importDb() 或 restoreDb() 来执行必要的操作。

这在更改包名称或应用程序签名密钥时也可用作临时措施，因为您的应用程序将是新安装的，您将丢失数据库。（[更多](http://hxcaine.com/blog/2010/09/14/backing-up-importing-and-restoring-databases-on-android/)）。

但是，如果需要，您可能希望直接扩展 BackupAgent： * 备份数据库中的数据。如果您有一个 SQLite 数据库要在用户重新安装您的应用程序时恢复，您需要构建一个自定义 BackupAgent，它在备份操作期间读取适当的数据，然后创建您的表并在恢复操作期间插入数据（[更多](https://stackoverflow.com/questions/5282936/android-backup-restore-how-to-backup-an-internal-database)）。

现在您还可以从 sdcard[备份备份并将 SQLite 数据库恢复到 sdcard](https://stackoverflow.com/questions/2170031/backup-and-restore-sqlite-database-to-sdcard)

[这是与您的问题](https://stackoverflow.com/questions/77473/database-backup-restore-process)一样的另一种解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T20:08:39.413

如果您使用的是 Eclipse，请转到 Window - Android Virtual Device Manager，选择您正在使用的 AVD 并单击 Edit，在 Hardware 选项中选择 New，然后选择 SD Card Support。然后只需定义存储大小并单击编辑 AVD 以保存更改。要检查 sd 是否已安装，请使用：

```
if(Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())){
    //code for sd mounted
}else{
    //code for sd not mounted
} 
```

检查您是否在清单中设置了权限。

```
<manifest ...
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
</manifest> 
```

# asp.net-mvc-3 - 使用 ajax 和“查看更多”按钮逐步显示朋友列表

> ID：10748642
> 
> 赞同：0
> 
> 时间：2012-05-25T04:55:45.960
> 
> 标签：asp.net-mvc-3, c#-4.0, jquery

我有一个控制器，它返回一个朋友列表（超过 100 个朋友）。我想显示前十个朋友，如果我点击一个按钮（*查看更多*/*显示全部*）。

我怎样才能做到这一点？Ajax 或 jQuery 可以做到这一点吗？（我也从未使用过。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:04:24.837

您可以考虑使用 MVC 的 WebGrid。它内置了分页和排序（也支持 Ajax）

# mysql - my.cnf ram 每 4 小时吃一次 1 克 ram

> ID：10748644
> 
> 赞同：-2
> 
> 时间：2012-05-25T04:55:54.337
> 
> 标签：mysql, ram, my.cnf

请帮忙

```
[mysql_safe]
open-files-limit = 16192
skip-name-resolve
[mysqld]
max_connections=8000
max_user_connections=8000
interactive_timeout=180
wait_timeout=180
connect_timeout=180
local-infile=0
thread_concurrency = 16
key_buffer = 2400M
max_allowed_packet = 24M
join_buffer_size = 4M
sort_buffer_size = 1M
read_buffer_size = 4M
read_rnd_buffer_size = 4M
myisam_sort_buffer_size = 16M
table_cache =  5096M
table_open_cache= 4000
table_definition_cache=  5096M
thread_cache_size = 5096M
query_cache_size = 5096M
query_cache_limit= 5096M
tmp_table_size =  5096M
max_heap_table_size =  5096M
innodb_flush_log_at_trx_commit=2
innodb_buffer_pool_size = 8G
innodb_additional_mem_pool_size = 20M
innodb_log_buffer_size = 12M
innodb_thread_concurrency = 8
innodb_flush_method = O_DIRECT

[mysql]
no-auto-rehash

[mysqlhotcopy]
interactive-timeout 
```

在我运行了tuning-primer.sh 之后

```
SLOW QUERIES
The slow query log is NOT enabled.
Current long_query_time = 10.000000 sec.
You have 99 out of 1395484 that take longer than 10.000000 sec. to complete
Your long_query_time seems to be fine

BINARY UPDATE LOG
The binary update log is NOT enabled.
You will not be able to do point in time recovery
See http://dev.mysql.com/doc/refman/5.5/en/point-in-time-recovery.html

WORKER THREADS
Current thread_cache_size = 16384
Current threads_cached = 49
Current threads_per_sec = 0
Historic threads_per_sec = 0
Your thread_cache_size is fine

MAX CONNECTIONS
Current max_connections = 8000
Current threads_connected = 8
Historic max_used_connections = 55
The number of used connections is 0% of the configured maximum.
You are using less than 10% of your configured max_connections.
Lowering max_connections could help to avoid an over-allocation of memory
See "MEMORY USAGE" section to make sure you are not over-allocating

INNODB STATUS
Current InnoDB index space = 5.46 G
Current InnoDB data space = 10.26 G
Current InnoDB buffer pool free = 68 %
Current innodb_buffer_pool_size = 8.00 G
Depending on how much space your innodb indexes take up it may be safe
to increase this value to up to 2 / 3 of total system memory

MEMORY USAGE
Max Memory Ever Allocated : 23.55 G
Configured Max Per-thread Buffers : 103.51 G
Configured Max Global Buffers : 22.84 G
Configured Max Memory Limit : 126.35 G
Physical Memory : 23.53 G

Max memory limit exceeds 90% of physical memory

KEY BUFFER
Current MyISAM index space = 2.02 G
Current key_buffer_size = 9.83 G
Key cache miss rate is 1 : 127
Key buffer free ratio = 80 %
Your key_buffer_size seems to be fine

QUERY CACHE
Query cache is enabled
Current query_cache_size = 4.97 G
Current query_cache_used = 244 M
Current query_cache_limit = 4.97 G
Current Query cache Memory fill ratio = 4.79 %
Current query_cache_min_res_unit = 4 K
Your query_cache_size seems to be too high.
Perhaps you can use these resources elsewhere
MySQL won't cache query results that are larger than query_cache_limit in size

SORT OPERATIONS
Current sort_buffer_size = 1 M
Current read_rnd_buffer_size = 4 M
Sort buffer seems to be fine

JOINS
Current join_buffer_size = 4.00 M
You have had 27 queries where a join could not use an index properly
join_buffer_size >= 4 M
This is not advised
You should enable "log-queries-not-using-indexes"
Then look for non indexed joins in the slow query log.

OPEN FILES LIMIT
Current open_files_limit = 40000 files
The open_files_limit should typically be set to at least 2x-3x
that of table_cache if you have heavy MyISAM usage.
Your open_files_limit value seems to be fine

TABLE CACHE
Current table_open_cache = 4000 tables
Current table_definition_cache = 524288 tables
You have a total of 9060 tables
You have 4000 open tables.
Current table_cache hit rate is 3%
, while 100% of your table cache is in use
You should probably increase your table_cache

TEMP TABLES
Current max_heap_table_size = 4.97 G
Current tmp_table_size = 4.97 G
Of 7519 temp tables, 17% were created on disk
Created disk tmp tables ratio seems fine

TABLE SCANS
Current read_buffer_size = 4 M
Current table scan ratio = 460 : 1
read_buffer_size seems to be fine

TABLE LOCKING
Current Lock Wait ratio = 1 : 361
You may benefit from selective use of InnoDB.
If you have long running SELECT's against MyISAM tables and perform
frequent updates consider setting 'low_priority_updates=1'
If you have a high concurrency of inserts on Dynamic row-length tables
consider setting 'concurrent_insert=ALWAYS'. 
```

请帮助我对 ram 有问题它每 4 小时吃 1 G ram 后我从 24G 使用 18G

请任何人帮助我配置 my.cnf 我有 16 个核心 cpu

mysql : 5.5.22

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:01:59.180

如果您在 MySQL 性能方面遇到问题，请在您的服务器上运行[mysqltuner](http://mysqltuner.pl/mysqltuner.pl)作为第一步。

# c# - Devexpress额外的树列表焦点节点返回旧值？

> ID：10748645
> 
> 赞同：0
> 
> 时间：2012-05-25T04:56:03.183
> 
> 标签：c#, devexpress, xtratreelist

我使用 DevExpress XtraTreelist 编写了一个 C# 程序。

当我通过调用其父节点来聚焦树节点时，它返回旧值`0,0,0`

```
TreeListNode   trnNode = 
    (m_arrlstTypeData.Contains(trlstVariables.FocusedNode[colName].ToString()) ?
        trlstVariables.FocusedNode.ParentNode : trlstVariables.FocusedNode);
FocusColum = trnNode[colValues].ToString(); 
```

它发送`0,0,0`. 这有什么问题？

# matlab - 无法将数据从 Matlab 发送到 DSPIC 30f4011

> ID：10748646
> 
> 赞同：1
> 
> 时间：2012-05-25T04:56:06.740
> 
> 标签：matlab, pic, matlab-deployment

我在尝试通过 USB 到 UART 转换器将数据从 Matlab 发送到 DSPIC30f4011 时遇到一些问题。这是我的代码：

```
function comparison()

    global x1 y1 

    s=serial('COM3');
    set(s,'BaudRate',9600);

    fopen(s);
    fprintf(s,'2');
    out=fscanf(s);
    fclose(s); 
```

但是我的电路板无法接收数据。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:02:59.500

接收：我从串口接收数据总是有问题，所以我使用了一个 mex 文件 GetSerialData.cpp，但现在我不知道是从哪里来的。

发送：要正确发送数据，获得正确的波特率和 COM 端口非常重要。您可以在 Windows 设备管理器中检查 COM 端口。我的在（COM 和 LPT）组中显示为 USB 串行端口（COM7）。波特率取决于您可能还必须配置的 DSPIC30F4011 器件。

# python - CPython 使用什么解析器生成器？

> ID：10748648
> 
> 赞同：9
> 
> 时间：2012-05-25T04:56:53.757
> 
> 标签：python, parsing, parser-generator, asdl

我正在阅读文档中的[此页面](http://docs.python.org/py3k/reference/grammar.html)，并注意到它说

> 这是完整的 Python 语法，因为它由解析器生成器读取并用于解析 Python 源文件

但是，我很难找出 CPython 使用什么解析器生成器。那么 CPython 使用什么解析器生成器呢？是否有其他解析器生成器可以在不进行任何修改的情况下获取该页面上的语法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T05:03:33.790

Python 是开源的，因此您可以检查源代码...

在 Python 源目录中是一个“Parser”目录，其中包含“Python.asdl”和注释

```
-- ASDL 的四种内置类型是标识符、int、字符串、对象

```

在同一目录中还有一个“asdl.py”文件...

```
"""Zephyr 抽象语法定义语言的实现。

见http://asdl.sourceforge.net/和
http://www.cs.princeton.edu/research/techreps/TR-554-97

仅支持顶级模块 decl，不支持视图。我猜那个观点
旨在支持浏览器，我对
浏览器。

Python 的更改：添加对模块版本的支持
"""

```

所以看起来它是一个自定义解析器生成器。LALR(1) 解析器生成器并不难编写。

# jquery - 无法在 jquery mobile 中选择文本

> ID：10748649
> 
> 赞同：1
> 
> 时间：2012-05-25T04:56:58.800
> 
> 标签：jquery, ios, jquery-mobile, uiwebview

我正在使用 phongap 和 jquery mobile 来开发 ios 应用程序。问题是用户无法在浏览器中选择（复制/过去）文本。我使用了以下代码，但它不起作用。

```
 -webkit-user-select: text; 
```

请帮我。

现在我注意到这个问题的原因是 iscroll。当我删除iscroll它工作正常。但我需要对这个应用程序使用 iscorll。请给我一个解决方案。

# java - 程序显示空指针异常....将 double 转换为 int

> ID：10748650
> 
> 赞同：0
> 
> 时间：2012-05-25T04:57:10.980
> 
> 标签：java, android, google-maps, nullpointerexception

我的程序导致空指针异常...我认为问题在于将 lat3 和 lon3 从 double 转换为 int...是否有其他方法可以将 double 中的位置解析为 int 以将其提供给 GeoPoint？

代码：

```
public class mapLoc extends com.google.android.maps.MapActivity implements LocationListener
{
    TextView t ;
    int lat2,lon2,lat3,lon3;
    Double presentlon,presentlat;

    Drawable d;
    MapView mv;
    MapController mc;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.map);

        t = (TextView)findViewById(R.id.maptxt);

        Intent intent = getIntent();
        Bundle extra = intent.getExtras();

     String latitude = extra.getString("latitude");
     String longitude = extra.getString("longitude");

     t.append(latitude+"\t");
     t.append(longitude);
     Float lat1 = Float.parseFloat(latitude);
     Float lon1 = Float.parseFloat(longitude);
        lat2 = (int) (lat1*1E6);   
        lon2 = (int) (lon1*1E6); 

        mv = (MapView)findViewById(R.id.maps);

        mc = mv.getController();
        mc.setZoom(14);
        mv.setBuiltInZoomControls(true);
        mv.displayZoomControls(true);
        mv.setClickable(true);

     List<Overlay> mapOverlays = mv.getOverlays();
     Drawable drawable = this.getResources().getDrawable(R.drawable.marker);
     overlay itemizedoverlay = new overlay(drawable, this);

     lat3 = (int)(presentlat * 1E6);
     lon3 = (int)(presentlon * 1E6);

     GeoPoint point = new GeoPoint(lat3, lon3);

     OverlayItem overlayitem = new OverlayItem(point, "Hello, user", "This is your present location");
     mc.animateTo(point);

     itemizedoverlay.addOverlay(overlayitem);
     mapOverlays.add(itemizedoverlay);

     GeoPoint point2 = new GeoPoint(lat2, lon2);
     OverlayItem overlayitem2 = new OverlayItem(point2, "This is your","saved location");
     itemizedoverlay.addOverlay(overlayitem2);
     mapOverlays.add(itemizedoverlay);

    }

    @Override
    public void onLocationChanged(Location location)
    {
     presentlat = location.getLatitude();
     presentlon =  location.getLongitude();

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    };

} 
```

Logcat 错误：

```
05-25 10:21:52.444: W/dalvikvm(342): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
05-25 10:21:52.444: E/AndroidRuntime(342): Uncaught handler: thread main exiting due to uncaught exception
05-25 10:21:52.454: E/AndroidRuntime(342): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.loc/com.loc.mapLoc}: java.lang.NullPointerException
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.os.Looper.loop(Looper.java:123)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-25 10:21:52.454: E/AndroidRuntime(342):  at java.lang.reflect.Method.invokeNative(Native Method)
05-25 10:21:52.454: E/AndroidRuntime(342):  at java.lang.reflect.Method.invoke(Method.java:521)
05-25 10:21:52.454: E/AndroidRuntime(342):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-25 10:21:52.454: E/AndroidRuntime(342):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-25 10:21:52.454: E/AndroidRuntime(342):  at dalvik.system.NativeStart.main(Native Method)
05-25 10:21:52.454: E/AndroidRuntime(342): Caused by: java.lang.NullPointerException
05-25 10:21:52.454: E/AndroidRuntime(342):  at com.loc.mapLoc.onCreate(mapLoc.java:71)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-25 10:21:52.454: E/AndroidRuntime(342):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:02:47.813

在代码片段中，我认为这些 presentlat 和 presentlon 没有被初始化并因此抛出 NPE。

```
 lat3 = (int)(presentlat * 1E6); // NPE
 lon3 = (int)(presentlon * 1E6); 
```

在使用前初始化它们或进行空检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:16:57.250

请记住，`Double`(大写 D) 不是原始类型，而是碰巧只能保存装箱`double`（注意区别）值的引用类型 - 或`null`. Java 语言对拆箱的处理方式与通过引用访问其他对象的方式不同。如果引用是`null`（这显然是这里的情况），它会抛出一个 NPE。拆箱的真正区别在于，这种访问是通过`ref.doubleValue()`在算术表达式中使用引用时隐式发生的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:08:04.190

你是对的，你的应用程序正在爆炸，因为 presentlat 和 presentlon 是尚未初始化的私有变量。您应该将该代码移动到您的 onLocationChanged 函数中。

# c# - 调用用 C# 编写的 COM 服务器并尝试将 PHP 数组传递给期望 SAFEARRAY(BSTR)* 的函数

> ID：10748651
> 
> 赞同：3
> 
> 时间：2012-05-25T04:57:20.390
> 
> 标签：c#, php, com, interop, marshalling

我正进入（状态

```
 com_exception: Error [0x80070057] The parameter is incorrect. 
```

从我的 php 脚本（在命令行中运行）。它正在调用我用 C# 编写的 COM 服务器。

我还有一个正在工作的 C++ 客户端。

我不确定将`SAFEARRAY`字符串 (BSTR) 传递到 COM 函数的正确 PHP 方法是什么。

在 c++ 客户端中，DoArray 函数具有以下签名：`DoArray(SAFEARRAY **)`. PHP 客户端`8204`通过调用来报告变体类型`variant_get_type($ary)`。

代码 8204 是`VT_ARRAY | VT_BSTR`，这似乎意味着 BSTR 的 SAFEARRAY。我正在传递 BSTR 的 SAFEARRAY 并且仍然收到“参数不正确”错误，这似乎很奇怪。

我已包含 PHP`com_print_typeinfo()`以供参考。在 的输出中`com_print_typeinfo`，我无法理解什么是

`/* VT_PTR [26] [in] --> VT_SAFEARRAY [27] */ &$ary`.

我看到了一个相关的 PHP 错误 #48061 [php bug 48061](https://bugs.php.net/bug.php?id=48061)。有没有人回应那个错误？

我正在为 Windows 、 .NET framework 4 和 Windows 7 使用 PHP 5.3.8（非线程安全）。

生成的 IDL 文件

```
// Generated .IDL file (by the OLE/COM Object Viewer)
// 
// typelib filename: FanCom.tlb

[
  uuid(2F0E398B-E218-467D-8B9B-732E24F07780),
  version(1.0),
  custom(90883F05-3D28-11D2-8F17-00A0C9A6186D, "FanCom, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5066ce5e2963d76a")

]
library FanCom
{
    // TLib :     // TLib : mscorlib.dll : {BED7F4EA-1A96-11D2-8F08-00A0C9A6186D}
    importlib("mscorlib.tlb");
    // TLib : OLE Automation : {00020430-0000-0000-C000-000000000046}
    importlib("stdole2.tlb");

    // Forward declare all types defined in this typelib
    dispinterface IFanFan;

    [
      uuid(252B2B91-70FE-4A20-BCF6-3693CE7849D4),
      version(1.0),
      custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "FanCom.IFanFan")    

    ]
    dispinterface IFanFan {
        properties:
        methods:
            [id(0x60020000)]
            BSTR Echo([in] BSTR str);
            [id(0x60020001)]
            BSTR DoArray([in] SAFEARRAY(BSTR)* ary);
    };

    [
      uuid(0AF61517-E479-4F96-A20E-1D040651C05C),
      version(1.0),
      custom(0F21F359-AB84-41E8-9A78-36D110E6D2F9, "FanCom.FanFan")
    ]
    coclass FanFan {
        interface _Object;
        [default] dispinterface IFanFan;
        [default, source] dispinterface IFanFan;
    };
}; 
```

C# COM 互操作代码（对应于上面的 IDL 代码）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace FanCom
{
    [Guid("252B2B91-70FE-4A20-BCF6-3693CE7849D4")]
    [ComVisible(true)]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    public interface IFanFan
    {
        string Echo(string str);
        string DoArray([In] ref string[] ary);
    }

    [ClassInterface(ClassInterfaceType.None)]           // No ClassInterface
    [ComSourceInterfaces(typeof(IFanFan))]
    [Guid("0AF61517-E479-4F96-A20E-1D040651C05C")]  // CLSID
    [ComVisible(true)]
    public class FanFan : IFanFan
    {
        public string Echo(string str)
        {
            return string.Format("Hello {0}", str);
        }

        public string DoArray(ref string[] ary)
        {
            StringBuilder builder = new StringBuilder();
            for (int i = 0; i < ary.Length; ++i)
            {
                builder.Append(ary[i]);
                builder.Append(",");
            }
            return builder.ToString();
        }
    }
} 
```

PHP客户端使用COM

```
<?php
echo "started <br/>\n";
$com = new COM("FanCom.FanFan");
echo "com created <br/>\n";
com_print_typeinfo($com);
$s = $com->Echo("Dan");
echo "$s <br/> \n";
//$ary = new VARIANT(array("a", "b", "c") , VT_ARRAY|VT_BSTR);
//$ary = array("a", "b");
//$ary = new VARIANT(array(new VARIANT("a", VT_BSTR), new VARIANT("b", VT_BSTR)), VT_ARRAY|VT_BYREF|VT_BSTR);
//$ary = new VARIANT(array(new VARIANT("a", VT_BSTR), new VARIANT("b", VT_BSTR)), VT_ARRAY|VT_VARIANT);
//$ary = array(new VARIANT("a", VT_BSTR), new VARIANT("b", VT_BSTR));
//$x = new VARIANT(array(new VARIANT("a", VT_BSTR), new VARIANT("b", VT_BSTR)), VT_ARRAY);
//$ary = new VARIANT($x , VT_BYREF|VT_VARIANT);

//$ary = new VARIANT(array('a', 'b') , VT_ARRAY);
//$ary = new VARIANT(array(new VARIANT("a", VT_BSTR), new VARIANT("b", VT_BSTR)), VT_ARRAY);
//$ary = array(new VARIANT("a", VT_BSTR), new VARIANT("b", VT_BSTR));
$ary = new VARIANT(array('a', 'b'), VT_ARRAY);

print variant_get_type($ary);
print "\n";
echo "variant created <br/> \n";
$s1 = $com->DoArray($ary);
echo "$s1 <br/> \n";
echo "end";
?> 
```

php com_print_typeinfo 输出

```
class IFanFan { /* GUID={252B2B91-70FE-4A20-BCF6-3693CE7849D4} */
        /* DISPID=1610743808 */
        /* VT_BSTR [8] */
        function Echo(
                /* VT_BSTR [8] [in] */ $str
                )
        {
        }
        /* DISPID=1610743809 */
        /* VT_BSTR [8] */
        function DoArray(
                /* VT_PTR [26] [in] --> VT_SAFEARRAY [27]  */ &$ary
                )
        {
        }
} 
```

C++ 客户端调用 COM

```
#include <cstdio>
#include <conio.h>
#include "stdafx.h"

#import "C:\Project\FanCom\FanCom\bin\Debug\FanCom.tlb"

#include <oaidl.h>

void CreateSafeArray(SAFEARRAY** saData)        
{
    bstr_t data[3] = {bstr_t(L"a") , bstr_t(L"b") , bstr_t(L"c")  };
    SAFEARRAYBOUND  Bound;
    Bound.lLbound   = 0;
    Bound.cElements = 3;

    *saData = SafeArrayCreate(VT_BSTR, 1 , &Bound);

    BSTR HUGEP *pdFreq;
    HRESULT hr = SafeArrayAccessData(*saData, (void HUGEP* FAR*)&pdFreq);
    if (SUCCEEDED(hr))
    {
        // copy sample values from data[] to this safearray
        for (DWORD i = 0; i < Bound.cElements; ++i)
        {
            *pdFreq++ = data[i].GetBSTR();
        }
        SafeArrayUnaccessData(*saData);
        //SafeArrayUnaccessData(saData);
    }
}

HRESULT ImportCSharpComponent()
{
    HRESULT hr = S_OK;
    ::CoInitialize(NULL);

    try
    {
        FanCom::IFanFanPtr spSimpleObj;
        hr = spSimpleObj.CreateInstance(__uuidof(FanCom::FanFan));
        if (FAILED(hr))
        {
            wprintf(L"FanCom::IFanFanPtr failed w/err 0x%08lx\n", hr);
            return hr;
        }

        {
            bstr_t bstrInput("Derek");
            bstr_t outString = spSimpleObj->Echo(bstrInput);
            wprintf(L"%s\n", (PCWSTR)outString);
        }

        {
            SAFEARRAY* data;
            CreateSafeArray((SAFEARRAY **)&data);
            bstr_t ret = spSimpleObj->DoArray((SAFEARRAY **)&data);
            wprintf(L"DoArray() return %s\n", (PCWSTR)ret);
            SafeArrayDestroy(data);
            data = NULL;
        }

        wprintf(L"\n");
    }
    catch (_com_error &err)
    {
        wprintf(L"The server throws the error: %s\n", err.ErrorMessage());
        wprintf(L"Description: %s\n", (PCWSTR) err.Description());
    }

    // Uninitialize COM for this thread
    ::CoUninitialize();

    return hr;
}

int _tmain(int argc, _TCHAR* argv[])
{
    HRESULT h = ImportCSharpComponent();
    return 0;
} 
```

# android - 在android中使用WCF服务

> ID：10748653
> 
> 赞同：4
> 
> 时间：2012-05-25T04:57:56.363
> 
> 标签：android, wcf

我已经创建了这个服务（使用 WCF、Azure）：

```
[ServiceBehavior(AddressFilterMode = AddressFilterMode.Any)]
public class Service1 : IPMPService
{
    public int Dummy()
    {
        return 0;
    }
} 
```

IPMPService 在哪里：

```
[ServiceContract]
public interface IPMPService
{
    [WebGet()]
    [OperationContract]
    int Dummy();
} 
```

并试图在我的 android 应用程序中使用它：
第一次尝试：

```
String METHOD_NAME = "DummyRequest";
String NAMESPACE = "http://tempuri.org/";
String URL = "http://tyty.cloudapp.net/Service1.svc";
String SOAP_ACTION = "http://tyty.cloudapp.net/Service1.svc/Dummy";

String res = "";
try {
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapPrimitive result = (SoapPrimitive) envelope.getResponse();
    // to get the data
    String resultData = result.toString();
    res = resultData;
    // 0 is the first object of data
    } catch (Exception e) {
        res = e.getMessage();
    } 
```

结果：SoapFault - faultcode: 'a:ActionNotSupported' faultstring: 由于 EndpointDispatcher 的 ContractFilter 不匹配，接收方无法处理带有 Action 'http://tyty.cloudapp.net/Service1.svc/Dummy' 的消息. 这可能是因为合约不匹配（发送方和接收方之间的操作不匹配）或发送方和接收方之间的绑定/安全不匹配。检查发送方和接收方是否具有相同的合同和相同的绑定（包括安全要求，例如消息、传输、无）。faultactor：'null' 详细信息：null

第二次尝试（取自[此处](http://romenlaw.blogspot.com/2008/08/consuming-web-services-from-android.html)）：

```
String SERVER_HOST = "http://tyty.cloudapp.net";
int SERVER_PORT = 8080;
String URL1 = "/Service1.svc/Dummy";
String keywords = null;
HttpEntity entity = null;
HttpClient client = new DefaultHttpClient();
HttpGet get = new HttpGet(URL1);
try {
HttpResponse response = client.execute(target, get);
entity = response.getEntity();
keywords = EntityUtils.toString(entity);
} catch (Exception e) {
e.printStackTrace();
   } finally {
if (entity != null)
        try {
        entity.consumeContent();
    } catch (IOException e) {
  }
} 
```

结果：java.net.UnknownHostException：无法解析主机“http://tyty.cloudapp.net”：没有与主机名关联的地址

我还在 c# 中创建了一个（工作）客户端，这是它的 App.config：

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IPMPService" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://tyty.cloudapp.net/Service1.svc"
          binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPMPService"
          contract="IPMPService" name="BasicHttpBinding_IPMPService" />
    </client>
  </system.serviceModel>
</configuration> 
```

如前所述，Android 中的两次尝试都失败了。谁能告诉我我做错了什么，以及如何做对？
谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T09:03:45.650

您的第一次尝试非常接近。只需要两个修复：

```
String METHOD_NAME = "Dummy";
String NAMESPACE = "http://tempuri.org/";
String URL = "http://tyty.cloudapp.net/Service1.svc";
String SOAP_ACTION = "http://tempuri.org/IPMPService/Dummy";

String res = "";
try {
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapPrimitive result = (SoapPrimitive) envelope.getResponse();
    // to get the data
    String resultData = result.toString();
    res = resultData;
    // 0 is the first object of data
} catch (Exception e) {
    res = e.getMessage();
} 
```

第一个是方法名称：它只是`Dummy`（而不是`DummyRequest`）。第二个是 SOAP 动作：它是`http://tempuri.org/IPMPService/Dummy`.

两者都可以从 WSDL 派生。您的操作定义为：

```
<wsdl:operation name="Dummy">
    <wsdl:input wsaw:Action="http://tempuri.org/IPMPService/Dummy" message="tns:IPMPService_Dummy_InputMessage"/>
    <wsdl:output wsaw:Action="http://tempuri.org/IPMPService/DummyResponse" message="tns:IPMPService_Dummy_OutputMessage"/>
</wsdl:operation> 
```

如果然后查看`IPMPService_Dummy_InputMessage`消息类型，则该元素称为`Dummy`：

```
<wsdl:message name="IPMPService_Dummy_InputMessage">
    <wsdl:part name="parameters" element="tns:Dummy"/>
</wsdl:message> 
```

在这里可以找到 SOAP 操作：

```
<wsdl:operation name="Dummy">
    <soap:operation soapAction="http://tempuri.org/IPMPService/Dummy" style="document"/>
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T13:44:38.413

```
public class RESTConnection extends Global 
{

    Global objglobal=Global.getInstance();

    private static String SERVICE_URI = "your service path";

    public JSONObject GetCashierLogin(String UserName, String Password)
    {
        new ArrayList<String>();  

        JSONObject jObj = null;  
        try 
        {

            SERVICE_URI=objglobal.getConnectionString();
            DefaultHttpClient httpClient = new DefaultHttpClient(); 
            HttpGet request = new HttpGet(SERVICE_URI+ "/LoginByUserIdAndPassword?Username=" + UserName + "&password=" + Password + "");
            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");
            HttpResponse response = httpClient.execute(request);
            HttpEntity responseEntity = response.getEntity();
            String bufferLogin = EntityUtils.toString(responseEntity, HTTP.UTF_8);
            JSONArray jsonArray = new JSONArray(bufferLogin);

            if (jsonArray != null)
            {
                for (int i = 0; i < jsonArray.length(); i++)
                {
                    jObj=(JSONObject) jsonArray.get(i);

                }
            }

        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return jObj;
    } 
```

# iphone - iOS中的Appcelerator云推送通知

> ID：10748656
> 
> 赞同：6
> 
> 时间：2012-05-25T04:58:04.723
> 
> 标签：iphone, cloud, titanium, push-notification, appcelerator

我已经使用本教程[iOS 推送通知教程](http://blog.teemusk.com/2012/05/building-server-push-notifications-with-appcelerator-titanium-cloud/comment-page-1/#comment-7696)在 iOS 中实现了云推送通知。我已经按照上述文档做了所有事情。注册时没有错误发生。

在云控制台中，我可以看到**1 个 iOS 客户端客户端订阅了推送通知**。一切似乎都很好，但我无法收到推送通知。（即使我已经重新启动了我的 iPhone）

我已经从云控制台发送了推送通知，但我无法在我的 iPhone 中接收推送通知。谁能帮我解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:18:00.807

确保在服务器端选择了正确的网关。最简单的方法是检查您的 mobileprovisioning 配置文件并查找“aps-environment”字符串。如果它设置为“开发”，您需要使用开发（又名沙盒）网关。如果设置为“生产”，则需要使用 Apple Push Production 网关。

这个链接也可能很有趣： [http ://www.pushwoosh.com/programming-push-notification/appcelerator-titanium-push-notification/](http://www.pushwoosh.com/programming-push-notification/appcelerator-titanium-push-notification/)

防火墙或路由器阻止推送通知的可能性非常小，但这可以通过将设备从 WiFi 切换到 3G 轻松检测到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T06:22:33.537

可能是您的证书有问题。您应该在 p12 证书中启用推送通知，并且应该在 ACS 设置中正确配置它。请参考[iOS 中的 Appcelerator 云推送通知](http://www.titaniumtutorial.com/2012/07/appcelerator-cloud-push-notification-in.html)

# facebook - 如何在 Facebook 开放图中获取链接到对象的操作（仅知道对象 URL）？

> ID：10748658
> 
> 赞同：4
> 
> 时间：2012-05-25T04:58:09.283
> 
> 标签：facebook, facebook-opengraph, restfb

我想知道如何获取链接到 Facebook Open Graph 中的对象的操作（只知道对象 URL）？

可能吗？

另外，我可以根据特定对象（连接？）获取特定的用户操作吗？

仅供参考：我正在使用 RestFB，但我已准备好实施任何其他解决方案来实现我的目标。

谢谢你，迪米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:55:06.970

动作和对象不是以绝对方式连接的，每次您使用动作发布对象时，您都会创建一个链接，并且只有通过此链接您才能获取该对（动作/对象）。

事实上，在我的自定义命名空间中，我只有一个使用三种不同操作发布的对象，并且通过知道对象 url，我对这些操作一无所知。

但是通过操作生成的帖子 ID，您可以知道所使用的操作，如下所述：[https ://developers.facebook.com/docs/opengraph/actions/#read](https://developers.facebook.com/docs/opengraph/actions/#read)

希望这可以帮助

# sql - SQL 语句.. 具有相同多个 Id 的多个表

> ID：10748661
> 
> 赞同：0
> 
> 时间：2012-05-25T04:58:31.323
> 
> 标签：sql, sql-server, sql-server-2008

![在此处输入图像描述](../Images/af74bf5b4926317e2bfd907465358eee.png)我正在使用 VB.Net 连接到 SQL Server 2008

**这个作品 -->** Dim query = "SELECT wo.WorkOrderID, wo.WorkOrderNo FROM dbo.WorkOrder wo"

**这不起作用 -->** Dim query = "SELECT wo.WorkOrderID, wo.WorkOrderNo, wod.LineNo FROM dbo.WorkOrder wo, dbo.WorkOrderDetails wod"

**这也不起作用 -->** Dim query = "SELECT wo.WorkOrderID, wo.WorkOrderNo, wod.LineNo FROM dbo.WorkOrder wo, dbo.WorkOrderDetails wod WHERE wo.WorkOrderID = wod.WorkOrderID"

我假设它是因为在 WorkOrderDetails 中 WorkOrderId 有多个相同的 ID

*   在 WorkOrder 中，WorkOrderID 似乎是增量的.. 1,2,3 等..
*   在 WorkOrderDetails 中，WorkOrderID 是这样的.. 1,1,1,1,1,1,2,2,2,2,3,3,3,3,3,3 等。

关于如何让它发挥作用的任何想法？我想不明白..

*   关键字“LineNo”附近的语法不正确。是我得到的错误

**我也刚刚尝试过 -->** "SELECT WorkOrderID, WorkOrderNo, LineNo FROM dbo.WorkOrder JOIN dbo.WorkOrderDetails ON dbo.WorkOrder.WorkOrderID = dbo.WorkOrderDetails.WorkOrderID"

似乎没有工作..同样的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:19:26.570

`LineNo`是[保留关键字](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)。使用[分隔标识符](http://msdn.microsoft.com/en-us/library/aa224033%28v=sql.80%29.aspx)。

```
SELECT WorkOrderID, WorkOrderNo, [LineNo]
FROM dbo.WorkOrder
  JOIN dbo.WorkOrderDetails
    ON dbo.WorkOrder.WorkOrderID = dbo.WorkOrderDetails.WorkOrderID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:14:12.333

使用连接：

```
Dim query = 
"SELECT wo.WorkOrderID,
       wo.WorkOrderNo, 
       wod.[LineNo] FROM dbo.WorkOrder wo
                 JOIN dbo.WorkOrderDetails wod 
                 ON wo.WorkOrderID = wod.WorkOrderID" 
```

该网站将帮助您开始：

[sql教程](http://www.w3schools.com/sql/default.asp)

最好的祝福

# graphics - 计算光照的正确方法

> ID：10748665
> 
> 赞同：1
> 
> 时间：2012-05-25T04:59:06.003
> 
> 标签：graphics, 3d, lighting

我正在 3D 引擎中实现照明，并且发现了计算照明方式的缺陷。在组合着色器中，我得到了漫反射颜色和光照计算。

```
return diffuseColor * (diffuseLight + ambient); 
```

据我所知，这是做事的标准方式。但是，例如，如果颜色是 0,1,0，而灯光是 1,0,0，会怎样。（在此示例中忽略环境）结果将是 0,0,0。但在现实生活中，如果我得到一张纯绿色的纸，然后在上面照射一束有色的红光，它应该会变成黄色。或者至少不是黑色的。

其他游戏如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:25:54.037

绿纸会吸收红光并呈现黑色，而不是黄色。加法意味着你用红光和绿光照亮一张白纸。然后纸张出现黄色。

[http://www.physics.wisc.edu/museum/Exhibits-2/Light_Optics/ColorObj/Color_index.html](http://www.physics.wisc.edu/museum/Exhibits-2/Light_Optics/ColorObj/Color_index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T09:35:03.907

它应该是（对于每个 RGB 组件）

```
return (diffuseColor * diffuseLight) + ambient; 
```

环境分量是恒定的，在所有其他光照计算完成后添加，并且不依赖于光照方向或观察方向。

正如胡里奥所说，*纯*绿色的纸在*纯*红光下看起来是黑色的。

当某些东西看起来是绿色时，这是因为它吸收了光谱中的所有其他颜色，而剩下的（即绿色）被反射了。如果你用红灯照它，就不会反射出绿色。

# json - JSONLint 验证失败

> ID：10748667
> 
> 赞同：-1
> 
> 时间：2012-05-25T04:59:14.460
> 
> 标签：json, validation, google-maps-api-3, jsonlint

我在谷歌地图中绘制了一些点，但是一些 JSON 没有正确填充。翻阅几个点，我注意到没有填充默认图像。Chrome 检查器显示`src`img 中不起作用的属性值未定义。当我通过 JSONlint 运行 JSON 时，它会在字符串上引发错误：

> "期待'STRING'、'NUMBER'、'NULL'、'TRUE'、'FALSE'、'{'、'['";

它说它不是，当它是时。我确定我把别的东西搞砸了，这就是为什么它没有显示为字符串，但是什么？不知道如何继续测试这个。你可以在这里查看代码：http: [//jsfiddle.net/jalbertbowdenii/4Y3JF/](http://jsfiddle.net/jalbertbowdenii/4Y3JF/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:29:41.697

我没有收到 JSON 验证错误，但并非 JSON 的所有项目的长度都为 **9**，因此在那里访问`locations[i][8]`将失败。

还有长度为 10 的项目，img-src 可以在`locations[i][9]`

您可以使用最后一个条目的索引来访问 img-src：

```
locations[i][locations[i].length-1] 
```

[http://jsfiddle.net/4Y3JF/2/](http://jsfiddle.net/4Y3JF/2/)

# php - 回声/输出 0（零）不工作

> ID：10748668
> 
> 赞同：0
> 
> 时间：2012-05-25T04:59:20.713
> 
> 标签：php, echo

我正在运行查询以从数据库表中获取几个小时的总和以显示在 PDF 文件中，但由于某些奇怪的原因，它不会回显 0（零）。

```
 $query = mysql_query("SELECT id, SUM(hours_night), SUM(hours_days) FROM table WHERE invoiceID='".mysql_real_escape_string($invoiceID)."'") or die(mysql_error());
 $result = mysql_num_rows($query);

 $totalhours_night = 0;

     while ($fetch = mysql_fetch_assoc($query)) {

         $totalhours_night += $fetch['SUM(hours_night)'];
     }

$html_output = "Some html and tables markup... " . $totalhours_night . ""; 
```

html 的输出工作正常，这不是问题.. 但问题是由于某种原因它不会输出 0（零）。如果小时结果实际上是 1 或 5 或任何输出总小时数的东西，但如果没有小时，我需要它输出 0。

因为如果没有小时不输出任何内容看起来很奇怪，我需要显示一个 0 零，因为这看起来更好。

顺便说一句，如果我把 number_format($totalhours_night, 2); 它确实显示 0.00，但我需要它只是 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:33:06.283

三件事：

1.  你的 SQL 查询是错误的，你不能显示`id`，`SUM(..)`除非你使用（如果是唯一`GROUP BY id`的，哪个孩子会失去这个想法）`id`
2.  如果使用`SUM(..)`给它起一个别名就好了`SUM(..) AS alias1`，以后在PHP中参考`alias1`。
3.  如果这不是原因，试着`var_dump($fetch['alias1']);`看看你真正得到了什么。（并在此处发布您的发现，以便我们为您提供进一步的帮助）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:10:19.463

像这样将整数视为字符串-

```
echo (string)$totalhours_night; 
```

# iphone - 将 uiview 转换为 .png 图像

> ID：10748669
> 
> 赞同：5
> 
> 时间：2012-05-25T04:59:25.473
> 
> 标签：iphone, objective-c, xcode

我在 iphone 上工作，我采用 UIView 的子类，并在 draw rect 方法中进行一些设计。我想将此视图转换为 .png 格式。

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T05:15:37.387

```
 UIGraphicsBeginImageContext(myView.frame.size);
    [myView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData *data=UIImagePNGRepresentation(viewImage);
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *strPath = [documentsDirectory stringByAppendingPathComponent:@"myimage.png"];
    [data writeToFile:strPath atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:53:32.313

```
 UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(YourView.frame.size, NO, [UIScreen mainScreen].scale);
    else
        UIGraphicsBeginImageContext(keyWindow.bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();
    [keyWindow.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil); 
    UIGraphicsEndImageContext(); 
```

# php - Kohana 3.2 会话过期太快，较短的过期时间按预期工作

> ID：10748670
> 
> 赞同：4
> 
> 时间：2012-05-25T04:59:32.527
> 
> 标签：php, session, kohana, kohana-3.2

Kohana 3.2 会话即将到期。我目前的配置是：

```
return array(
'native' => array(
    'name' => 'kohanasession',
    'lifetime' => 0,       
 ),
); 
```

Using`lifetime => 0`表示会话将在浏览器关闭时结束。但是，1 小时后，会话到期。

我还尝试使用不同的生命周期（例如 36000 => 10 小时），但同样失败了。

如果我使用一个很小的会话寿命（例如 10 秒），那么过期就完美了。据我检查，似乎如果我希望会话的生命周期超过 1 小时，它将无法正常工作。

最后是我们用于 php.ini 的相关配置

```
session.save_handler = memcache
session.save_path="tcp://127.0.0.1:11211?persistent=1&weight=1&timeout=1&retry_interval=15"
session.cache_limiter = nocache
session.gc_probability = 0 
```

我真的迷路了。这应该很容易解决，但我无法解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T05:23:04.997

该`lifetime => 0`参数可能只影响会话 cookie 的生命周期。

可能发生的情况是，当 cookie 工作正常时，您在服务器端丢弃了用户的会话数据。PHP 的会话垃圾收集默认情况下有点奇怪：它在 24 分钟的空闲时间后将会话标记为过期，并且每个请求都有 1% 的机会清理所有过期的会话。

您可以增加 PHP ini 设置`session.gc_maxlifetime`，或者您可以设置`session.gc_probability`为零以完全禁用自动会话垃圾收集。

当然，您的 memcached 服务器也有可能被配置为在一段时间后丢弃数据。

**更新：**对于*普通*会话处理程序，设置`session.gc_probability`为零将是完全禁用自动清理的方法。但是，memcache 会话处理程序实际上已经不进行垃圾收集（它的 gc 回调什么也不做）。因此，使用该保存处理程序更改`session.gc_probability`or是没有意义的。`session.gc_divisor`

相反，memcache 保存处理程序在将会话数据保存到 memcached 服务器时自动设置过期时间（[类似于 Memcache::set](http://www.php.net/manual/en/memcache.set.php)`expire`的参数）。处理程序从设置中读取要使用的到期时间。因此，当您使用 memcache 会话保存处理程序时，*这是唯一真正重要的 GC 设置。*`session.gc_maxlifetime`

# asp.net - 在 asp.net 控件中显示查询字符串

> ID：10748671
> 
> 赞同：0
> 
> 时间：2012-05-25T04:59:32.557
> 
> 标签：asp.net, vb.net

我正在编写一个带有 VB 后端的 ASP Web 应用程序。我想做的是生成一个 url 并将其显示在页面上的控件中。例如，如果我在表单上有一个标签和一个按钮。标签是空白的。单击按钮时，将触发以下代码：

```
 Protected Sub btnGenerate_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnGenerate.Click
    label1.Text = "Hello"
End Sub 
```

我想要的是一个指向我的 ASP 页面的 url，标签中带有“Hello”字样。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:05:55.457

您可以执行以下操作：

```
{siteaddress}/aspxpage.aspx?label=hello 
```

然后在您的 aspx 页面中执行以下操作：

```
<asp:label runat="server" id="yourLabelId" text='<%=Request.QueryString("label")%>' /> 
```

或在 Page_Load 中：

```
yourLabelId.Text = Request.QueryString("label") 
```

我建议在将数据写入页面之前验证数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:14:16.543

传递查询字符串中的文本，例如假设页面的相对路径是 /pagename.aspx ，您可以按照下面给出的示例传递查询字符串：

```
/pagename.aspx?text=hello 
```

在 c# 中在 Page_Load 事件中编写以下代码

```
//You don't have to check the url all the time , so just check it if page is not posting back (first time after user visits the page and ignore all other same page post backs. Label can maintain its control state (text value) after every postback, so assign it only once to increase performance
if (!IsPostBack)
{
    //Check if query string is provided or not , if it is not provided take some default text, I am taking empty string as default text.
    string givenText = (Request.QueryString["text"] == null)?"":Request.QueryString["text"];
    label1.Text = givenText;
} 
```

您还可以为通过查询字符串和默认文本给出的文本创建属性。

# ios - 如何获取 iPhone 中所有视频文件的列表

> ID：10748673
> 
> 赞同：7
> 
> 时间：2012-05-25T04:59:48.473
> 
> 标签：ios, objective-c, iphone, cocoa-touch, iphone-video

我想获取内部存储在 iPhone 中的所有视频文件的列表（录制和 iPod）。我想在我的应用程序中显示所有视频文件。

我有一个`TableViewController`并且想在我的应用程序中显示来自 iphone 的所有视频文件。

如何获取所有视频文件的列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T05:09:42.140

你必须使用**assetLibraries**试试这个代码： -

```
- (void)updateAssetsLibrary
{
loadImgView.hidden = NO;
[spinner startAnimating];
//selectVideoBtn .userInteractionEnabled = NO;

assetItems = [NSMutableArray arrayWithCapacity:0];
ALAssetsLibrary *assetLibrary = assetsLibrary;

[assetLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) 
{
    if (group)
    {
        [group setAssetsFilter:[ALAssetsFilter allVideos]];
        [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
        {
             if (asset)
             {
                 dic = [[NSMutableDictionary alloc] init];
                 ALAssetRepresentation *defaultRepresentation = [asset defaultRepresentation];
                 NSString *uti = [defaultRepresentation UTI];
                 appDelegate.videoURL = [[asset valueForProperty:ALAssetPropertyURLs] valueForKey:uti];

                 mpVideoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:appDelegate.videoURL];

                 NSString *title = [NSString stringWithFormat:@"%@ %i", NSLocalizedString(@"Video", nil), [assetItems count]+1];

                 [self performSelector:@selector(imageFromVideoURL)];
                 [dic setValue:title forKey:kName];
                 [dic setValue:appDelegate.videoURL forKey:kURL];

                 AssetBrowserItem *item = [[AssetBrowserItem alloc] initWithURL:appDelegate.videoURL title:title];
                 [assetItems addObject:item];
                 [appDelegate.videoURLArray addObject:dic];

                 NSLog(@"Video has info:%@",appDelegate.videoURLArray);
             }
             NSLog(@"Values of dictonary==>%@", dic);

             //NSLog(@"assetItems:%@",assetItems);
             NSLog(@"Videos Are:%@",appDelegate.videoURLArray);
        } ];
    }
    // group == nil signals we are done iterating.
    else 
    {
        dispatch_async(dispatch_get_main_queue(), ^{
            //[self updateBrowserItemsAndSignalDelegate:assetItems];
            loadImgView.hidden = NO;
            [spinner stopAnimating];
            [loadImgView removeFromSuperview];
            //selectVideoBtn .userInteractionEnabled = YES;
        });
    }
}
failureBlock:^(NSError *error) 
{
    NSLog(@"error enumerating AssetLibrary groups %@\n", error);
}];
}

- (UIImage *)imageFromVideoURL 
{
// result 
UIImage *image = nil;

// AVAssetImageGenerator
AVAsset *asset = [[AVURLAsset alloc] initWithURL:appDelegate.videoURL options:nil];; 
AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
imageGenerator.appliesPreferredTrackTransform = YES;

// calc midpoint time of video
Float64 durationSeconds = CMTimeGetSeconds([asset duration]);
CMTime midpoint = CMTimeMakeWithSeconds(durationSeconds/2.0, 600); 

// get the image from 
NSError *error = nil; 
CMTime actualTime;
CGImageRef halfWayImage = [imageGenerator copyCGImageAtTime:midpoint actualTime:&actualTime error:&error];

if (halfWayImage != NULL) 
{
    // cgimage to uiimage
    image = [[UIImage alloc] initWithCGImage:halfWayImage];
    [dic setValue:image forKey:kImage];
    NSLog(@"Values of dictonary==>%@", dic);
    NSLog(@"Videos Are:%@",appDelegate.videoURLArray);
    CGImageRelease(halfWayImage);
}
return image;
}

- (void)assetsLibraryDidChange:(NSNotification*)changeNotification
{
[self updateAssetsLibrary];
}

- (void)buildAssetsLibrary
{
assetsLibrary = [[ALAssetsLibrary alloc] init];
ALAssetsLibrary *notificationSender = nil;

NSString *minimumSystemVersion = @"4.1";
NSString *systemVersion = [[UIDevice currentDevice] systemVersion];
if ([systemVersion compare:minimumSystemVersion options:NSNumericSearch] != NSOrderedAscending)
    notificationSender = assetsLibrary;

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(assetsLibraryDidChange:) name:ALAssetsLibraryChangedNotification object:notificationSender];
[self updateAssetsLibrary];
} 
```

此代码将为您提供 iPhone 的视频列表。

它可以帮助你谢谢:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-05T12:18:07.470

> **获取所有视频和缩略图的列表**

在上述答案的帮助下，我得到了它的工作..

> 感谢@Nikhil Bansal，

***它帮助了我，但仍然需要几个小时才能使代码可执行，因为他在回答中遗漏了一些东西***

![在此处输入图像描述](../Images/a0e5f80e2792029135ec85cc1d703401.png)

所以我想分享我的完整工作代码

1.只需添加框架**AssetsLibrary**、**AVFoundation**和**MediaPlayer**。

2\. **AssetBrowserItem.h**和**AssetBrowserItem.m** [这里](https://developer.apple.com/library/ios/samplecode/AVPlayerDemo/Introduction/Intro.html)

3.使用下面的代码从ios设备库中获取所有视频的列表

4.运行应用程序并查看日志以获取视频详细信息

```
#import "HomeViewController.h"
#import <AssetsLibrary/AssetsLibrary.h>
#import <MediaPlayer/MediaPlayer.h>
#import <AVFoundation/AVFoundation.h>
#import "AssetBrowserItem.h"

@interface HomeViewController ()

@property (nonatomic, strong) ALAssetsLibrary *assetsLibrary;
@property (nonatomic, strong) NSURL *videoURL;
@property (nonatomic, strong) MPMoviePlayerController *mpVideoPlayer;
@property (nonatomic, strong) NSMutableArray *videoURLArray;
@property (nonatomic, strong) NSMutableArray *assetItems;
@property (nonatomic, strong) NSMutableDictionary *dic;

@end

@implementation HomeViewController

@synthesize assetsLibrary, assetItems,dic;
@synthesize videoURL,videoURLArray, mpVideoPlayer;

- (void)viewDidLoad
{
    [super viewDidLoad];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - Show Video List Methods

- (IBAction)showVideoList:(id)sender
{
    [self buildAssetsLibrary];
}

- (void)buildAssetsLibrary
{
    assetsLibrary = [[ALAssetsLibrary alloc] init];
    ALAssetsLibrary *notificationSender = nil;

    videoURLArray = [[NSMutableArray alloc] init];

    NSString *minimumSystemVersion = @"4.1";
    NSString *systemVersion = [[UIDevice currentDevice] systemVersion];
    if ([systemVersion compare:minimumSystemVersion options:NSNumericSearch] != NSOrderedAscending)
        notificationSender = assetsLibrary;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(assetsLibraryDidChange:) name:ALAssetsLibraryChangedNotification object:notificationSender];
    [self updateAssetsLibrary];
}

- (void)assetsLibraryDidChange:(NSNotification*)changeNotification
{
    [self updateAssetsLibrary];
}

- (void)updateAssetsLibrary
{
    assetItems = [NSMutableArray arrayWithCapacity:0];
    ALAssetsLibrary *assetLibrary = assetsLibrary;

    [assetLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop)
    {
        if (group)
        {
            [group setAssetsFilter:[ALAssetsFilter allVideos]];
            [group enumerateAssetsUsingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop)
             {
                 if (asset)
                 {
                     dic = [[NSMutableDictionary alloc] init];
                     ALAssetRepresentation *defaultRepresentation = [asset defaultRepresentation];
                     NSString *uti = [defaultRepresentation UTI];
                     videoURL = [[asset valueForProperty:ALAssetPropertyURLs] valueForKey:uti];

                     mpVideoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

                     NSString *title = [NSString stringWithFormat:@"%@ %lu", NSLocalizedString(@"Video", nil), [assetItems count]+1];

                     [self performSelector:@selector(imageFromVideoURL)];
                     [dic setValue:title forKey:@"VideoTitle"];//kName
                     [dic setValue:videoURL forKey:@"VideoUrl"];//kURL

                     AssetBrowserItem *item = [[AssetBrowserItem alloc] initWithURL:videoURL title:title];
                     [assetItems addObject:item];
                     [videoURLArray addObject:dic];

                     NSLog(@"Video has info:%@",videoURLArray);
                 }
                 NSLog(@"Values of dictonary==>%@", dic);

                 //NSLog(@"assetItems:%@",assetItems);
                 NSLog(@"Videos Are:%@",videoURLArray);
             } ];
        }
        // group == nil signals we are done iterating.
        else
        {
            dispatch_async(dispatch_get_main_queue(), ^{
                //[self updateBrowserItemsAndSignalDelegate:assetItems];
//                loadImgView.hidden = NO;
//                [spinner stopAnimating];
//                [loadImgView removeFromSuperview];
                //selectVideoBtn .userInteractionEnabled = YES;
            });
        }
    }
                              failureBlock:^(NSError *error)
    {
        NSLog(@"error enumerating AssetLibrary groups %@\n", error);
    }];
}

- (UIImage *)imageFromVideoURL
{

    UIImage *image = nil;
    AVAsset *asset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];;
    AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    imageGenerator.appliesPreferredTrackTransform = YES;

    // calc midpoint time of video
    Float64 durationSeconds = CMTimeGetSeconds([asset duration]);
    CMTime midpoint = CMTimeMakeWithSeconds(durationSeconds/2.0, 600);

    // get the image from
    NSError *error = nil;
    CMTime actualTime;
    CGImageRef halfWayImage = [imageGenerator copyCGImageAtTime:midpoint actualTime:&actualTime error:&error];

    if (halfWayImage != NULL)
    {
        // cgimage to uiimage
        image = [[UIImage alloc] initWithCGImage:halfWayImage];
        [dic setValue:image forKey:@"ImageThumbnail"];//kImage
        NSLog(@"Values of dictonary==>%@", dic);
        NSLog(@"Videos Are:%@",videoURLArray);
        CGImageRelease(halfWayImage);
    }
    return image;
}

@end 
```

# jquery - jQuery地址从历史记录中删除最后一个网址

> ID：10748676
> 
> 赞同：3
> 
> 时间：2012-05-25T05:00:37.907
> 
> 标签：jquery, ajax, asp.net-mvc, browser-history, jquery-address

我们在 ASP.NET MVC ajax 应用程序中使用 jQuery Address 插件来处理深度链接和历史保存。每当您想导航到新页面时，只需进行以下调用：

```
$.address.value([some url]) 
```

我们的应用程序有一个非常详细的用户管理系统，允许我们的用户定义哪些用户可以访问应用程序中的哪些功能。我们用自定义的 Authorize 属性装饰每个操作方法，该属性确定用户是否有权使用该操作方法提供的功能。授权效果很好，但问题是如果用户没有使用给定操作方法的权限，浏览器 url 仍然反映就像他们在他们点击的链接的页面上一样。

例如，如果 url /SomeController/UnpermittedAction 表示用户不应该使用的操作方法，当他们单击该方法的链接时，我们执行以下操作

```
$.address.value('/SomeController/UnpermittedAction') 
```

然后，该操作返回一个未经授权的响应，我们向用户显示他们无权使用该功能。但是，可以理解的是，用户的浏览器窗口现在显示：

```
somedomain.com/#/SomeController/UnpermittedAction 
```

这本身并不是一个真正的问题，问题是如果用户转到其他页面然后单击返回浏览器按钮，他们会再次看到未经授权的消息，并且看起来有些混乱，因为他们不确定为什么他们正在看到该消息。理想情况下，如果他们单击后退按钮，我们希望用户返回到他们被授权使用的最后一页。

我的问题是，有没有办法从浏览器历史记录和/或 jQuery 地址历史记录中删除未经许可的操作 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:42:04.397

在javascript中尝试

```
 $.address.history(false);
        $.address.value(newurl);
        $.address.history(true); 
```

这将用新的 url 替换最后一个历史条目

# php - 如何清理或转换奇怪的 XML 字符和格式？

> ID：10748680
> 
> 赞同：1
> 
> 时间：2012-05-25T05:00:48.627
> 
> 标签：php, xml, parsing, character-encoding, formatting

我有一个包含一些奇怪格式的 XML 文件，例如：

```
<?xml version=3D3D"1.0" encoding=3D3D"ISO-8859-1"?> 
```

注意“3D3D”。另外，在整个文件的其余部分，这些行在大约 78 个字符处中断，并包括更多的“3D”，沿着

```
Supercalifragilis=
=3D
ticexpialidocious=
=3D 
```

起初我以为这一切都可能与 ISO-8859-1 编码有关，但通过 PHP 运行文本`mb_convert_encoding($xml, "UTF-8", "ISO-8859-1")`似乎并没有改变这一切。

有人熟悉这些特殊的奇怪字符和格式吗？如果是这样，您能否推荐任何快速清理它以进行转换的方法，以便我可以使用 SimpleXML 之类的东西干净地解析文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:09:17.177

奇怪的是 QP（引用打印）编码：=xx 代表具有十六进制代码 xx 的字符。例如，=3D 代表等号“=”。在 QP 中，软换行符是行尾的“=”。所以看起来数据被 QP 编码*了两次*。

所以希望[quoted_printable_decode](http://www.php.net/manual/en/function.quoted-printable-decode.php)会有所帮助。

# cocoa-touch - 如何在可可中调用 Web 视图的 webviewdidfinishload 委托方法？

> ID：10748685
> 
> 赞同：1
> 
> 时间：2012-05-25T05:01:25.490
> 
> 标签：cocoa-touch, cocoa

我正在使用 WebView 的 WebViewDidFinishLoad 委托方法，但它没有被调用。每当我在 WebView 中运行应用程序并加载请求时。请告诉我，如何调用该方法以及我需要与文件所有者连接的委托。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:27:51.780

您在对另一个答案的评论中说：

> ```
> - (void)webViewDidFinishLoad:(WebView *)webView{ NSLog(@"hello");} 
> ```
> 
> 这个方法没有被调用。

那是因为没有这样的方法。

WebView 和 UIWebView 不是一回事。前者在 Mac 上的 WebKit 框架中；后者在 iOS 上的 UIKit 框架中。WebView 在 iOS 上不可用，UIWebView 在 Mac 上不可用。

UIWebView 是一个非常精简的 WebView 版本。特别是，UIWebView 只有一个委托协议，其中`webViewDidFinishLoad:`一种是它的方法，而 WebView 有不少于*六个*委托协议。

`webViewDidFinishLoad:`仅存在于 UIWebViewDelegate 协议中，在 iOS 应用的 UIKit 框架中。在 Mac 应用程序中实现它将一事无成，因为不会调用它。

> 请告诉我如何调用该方法...</p>

这对你没有好处，因为实现它的全部目的是找出负载何时完成。为了让您自己调用它，您需要知道*何时*调用它——即，何时加载完成。要知道这一点，您需要被告知 WebKit 已完成加载。正如他们在逻辑上所说，这是在[乞求问题](http://en.wikipedia.org/wiki/Begging_the_question)。

正确的解决方案是将正确的委托设置为符合正确委托协议并实现正确方法的对象。正确的委托是[WebView 的帧加载委托](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/occ/instm/WebView/setFrameLoadDelegate%3a)。因此，正确的协议是[WebViewFrameLoadDelegate 协议](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/cat/WebFrameLoadDelegate)。该协议中您的帧加载委托必须实现的正确方法[是`webView:didFinishLoadForFrame:`method](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Protocols/WebFrameLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/webView%3adidFinishLoadForFrame%3a)。

* * *

有同样问题（`webViewDidFinishLoad:`没有被调用）的 Cocoa Touch 程序员应该确保他们的 UIWebView 的委托设置为正确的对象。如果您在代码中设置它，请确保您正在与正确的 Web 视图对话——即，您的 Web 视图的出口已连接（如果它在 nib 或 storyboard 中），您正在加载 nib 或故事板（如果它在一个中），并且您不会使用不同的 Web 视图（一个来自 nib，然后一个在代码中创建，反之亦然）破坏插座的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:02:19.363

尝试添加（并`myUIWebView`用您的 UIWebView 插座名称替换）：

```
[myUIWebView setDelegate:self]; 
```

并在头文件中添加`<UIWebViewDelegate>`，因此您可以使用以下方法：

```
-(void)webViewDidStartLoad:(UIWebView *)webView {

}
-(void)webViewDidFinishLoad:(UIWebView *)webView{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:04:16.657

Webview 的第一个绑定 ResourceDelegate 与文件所有者

```
(void)webView:(WebView *)sender resource:(id)identifier didFinishLoadingFromDataSource:(WebDataSource *)dataSource 
```

这对我来说非常有用。

# regex - 用于解析字符串前缀的正则表达式

> ID：10748687
> 
> 赞同：0
> 
> 时间：2012-05-25T05:01:28.140
> 
> 标签：regex

我正在寻找一些文件名解析的正则表达式，以计算出现文件名前缀的实例数。这是一些示例字符串

```
手套.tga
10牛仔裤.jpg
衬衫1.png
衬衫2.png
外套_00.png
外套_12.gif
top1_01.png
top2_04.png

```

基本模式只是一串字母或数字，后跟一个扩展名。前缀是扩展名之前的所有内容（不包括句点）

一件衣服可能分布在多个文件中，由衣服名称表示，后跟下划线，后跟一些索引号，然后是扩展名。前缀是所有内容，但不包括下划线。其他的都可以忽略。

这涵盖了我正在处理的所有案例，但是我在处理一个案例有下划线而另一个案例没有的事实时遇到了麻烦。

有人可以帮我想出一个正则表达式吗？

编辑：似乎有一个额外的条件： shirt1 和 shirt2 应该被视为相同的前缀。

因此，如果一个字符串后面跟着一些数字，并且紧跟着一个扩展名，那么这些数字应该被忽略，而如果数字后面跟着一个下划线，那么它们将被保留在前缀中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:05:41.917

这行不通吗？（Perl/PCRE 语法）

```
/^([^._]+)/ 
```

这将捕获不包含句点或下划线的字符串的最长前缀。

**编辑**：好的，如果`shirt`是前缀`shirt1`，那么你可以尝试这样的事情：

```
/^([^._]+)(?<!\d)/ 
```

这不允许以数字结尾的前缀。但是，这在 Ruby 1.8 中是行不通的，因为 1.8 没有后向断言。

**编辑 2**：以上表示`top1_01`is的前缀`top`，但我们希望该前缀包含下划线之前的数字。所以我们最后的尝试是添加一个替代方案：

```
/^([^._]+)(?:(?<!\d)|(?=_))/ 
```

前缀*不能*以数字结尾*或*后跟下划线。演示：

 *```
%w<gloves.tga  10jeans.jpg shirt1.png  shirt2.png 
   coat_00.png coat_12.gif top1_01.png top2_04.png>.each do |filename|
  if m = filename.match(/^([^._]+)(?:(?<!\d)|(?=_))/) then
    puts [ filename, m[1] ].join ":\t"
  else
    warn "Uh-oh, couldn't find a prefix in filename '#{filename}'."
  end
end 
```

输出：

```
 gloves.tga:    gloves
 10jeans.jpg:   10jeans
 shirt1.png:    shirt
 shirt2.png:    shirt
 coat_00.png:   coat
 coat_12.gif:   coat
 top1_01.png:   top1
 top2_04.png:   top2 
```*

# lotus-notes - 如何在复制副本中生成唯一编号？

> ID：10748691
> 
> 赞同：0
> 
> 时间：2012-05-25T05:01:37.717
> 
> 标签：lotus-notes

> **可能重复：**
> [如何在 Lotus domino 中创建自动递增字段？](https://stackoverflow.com/questions/8532296/how-to-create-an-auto-incrementing-field-in-lotus-domino)

我们正在为每个文档生成唯一的序列号，例如员工 ID。但是用户可以在不同的位置注册信息。所以我们把数据库复制到很多。问题是，数字正在生成。但是当用户在不同的副本上工作时，序列号会重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T18:28:51.060

如果您必须使用序列号，您应该让数据库在创建文档时为其分配一个临时编号，然后只让一个服务器执行一个代理，该代理每天或更频繁地为文档分配永久序列号。

然而，大多数时候人们只需要分配给文档的唯一编号。使用@Unique 公式会生成一个唯一字符串来标识文档。或者，您可以让它分配包含服务器名称作为前缀的序列号。您也可以使用日期时间和服务器或用户信息的组合来创建唯一标识符。

我的经验是，大多数时候当人们说他们需要序列号时，他们错了，他们只需要唯一的数字，并认为序列号是唯一的方法。

# opengl - 为什么删除对 glColor3f 的调用会影响整个渲染？

> ID：10748698
> 
> 赞同：1
> 
> 时间：2012-05-25T05:02:46.450
> 
> 标签：opengl, lwjgl

所以我的代码的一个子集（当然在渲染循环中）是：

```
 for(int x=0;x<data.length;x++) 
        for(int y=0;y<data[0].length;y++) {

            float r = colorData[x][y][0], g = colorData[x][y][1], b = colorData[x][y][2];
            glGetError();
            glColor3f(r,g,b);
            int xCoord = x*100;
            int yCoord = y*100;
            int height = (int) Math.round(data[y][x]*25);

            glBegin(GL_QUADS);

                //Top
                glVertex3f(xCoord,yCoord,height);
                glVertex3f(xCoord+100,yCoord,height);
                glVertex3f(xCoord+100,yCoord+100,height);
                glVertex3f(xCoord,yCoord+100,height);
                //*/

                //Sides
                glColor3f(r/2,g/2,b/2);          
                glVertex3f(xCoord,yCoord,height);
                glVertex3f(xCoord,yCoord,0);
                glVertex3f(xCoord+100,yCoord,0);
                glVertex3f(xCoord+100,yCoord,height);

                glVertex3f(xCoord,yCoord+100,height);
                glVertex3f(xCoord+100,yCoord+100,height);
                glVertex3f(xCoord+100,yCoord+100,0);
                glVertex3f(xCoord,yCoord+100,0);

                glVertex3f(xCoord,yCoord+100,height);
                glVertex3f(xCoord,yCoord+100,0);
                glVertex3f(xCoord,yCoord,0);
                glVertex3f(xCoord,yCoord,height);

                glVertex3f(xCoord+100,yCoord+100,height);
                glVertex3f(xCoord+100,yCoord,height);
                glVertex3f(xCoord+100,yCoord,0);
                glVertex3f(xCoord+100,yCoord+100,0);

                //Bottom
                glColor3f(r/4,g/4,b/4);
                glVertex3f(xCoord,yCoord,0);
                glVertex3f(xCoord,yCoord+100,0);
                glVertex3f(xCoord+100,yCoord+100,0);
                glVertex3f(xCoord+100,yCoord,0);

            glEnd();
            int err =  glGetError();
            if(err != GL_NO_ERROR)
                 System.out.println("An error has occured: #"+err);
            glColor3f(1,0,0);
            glBegin(GL_LINES);
                //Top
                glVertex3f(xCoord,yCoord,height);
                glVertex3f(xCoord+100,yCoord,height);
                glVertex3f(xCoord+100,yCoord+100,height);
                glVertex3f(xCoord,yCoord+100,height);
            glEnd();                
        } 
```

代码正常工作，绘制了一个二维网格的盒子，盒子的侧面比顶部稍暗。（穷人的灯光）

出于好奇，我第一次调用 glColor3f，希望盒子的顶部变成无色，而侧面保持不变；但是整个框格都变白了。为什么是这样？这是这段代码中的东西吗？还是我的渲染循环的其他部分导致了这个？

（如果有什么不同，我使用的是 LWJGL 的 OpenGL1.1 的 Java 实现）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T09:09:35.447

OpenGL 即时模式有点像这样（伪代码）

```
glColor3f(r,g,b){
state.color.{r,g,b} = r,g,b;
}

glNormal(x,y,z){
state.normal.{x,y,z} = x,y,z;
}

/* and so on */

glVertex3f(x,y,z){
    send_vertex_to_rasterizer(state.color, state.normal, ..., {x,y,z})
} 
```

即OpenGL会记住您设置的最后一个颜色，并将其应用于所有后续顶点，直到您将其更改为另一种颜色，然后才会应用。

# linux - 在 shell 脚本的 for 循环中迭代行而不是单词

> ID：10748703
> 
> 赞同：49
> 
> 时间：2012-05-25T05:02:56.280
> 
> 标签：linux, shell

以下是读取框中所有 DSF 的 shell 脚本。但是由于该行有空格，因此将它们显示在不同的行中。对于那些不明白的人`ioscan -m dsf`，将其替换为`ls -ltr`，然后输出是权限和名称显示在不同的行中，但我希望它们在同一行中。

```
#!/usr/bin/ksh

for a in `ioscan -m dsf`
do
 echo  $a
done 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-25T10:04:25.207

该`for`循环并非旨在循环“线”。相反，它会遍历“单词”或“字段”。

循环遍历行的惯用方法是将`while`循环与`read`.

```
ioscan -m dsf | while read -r line
do
  printf '%s\n' "$line"
done 
```

请注意，由于管道，while 循环位于子外壳中。这可能会导致对变量范围的一些混淆。在 bash 中，您可以通过使用进程替换来解决此问题。

```
while read -r line
do
  printf '%s\n' "$line"
done < <(ioscan -m dsf) 
```

另见[http://mywiki.wooledge.org/BashFAQ/024](http://mywiki.wooledge.org/BashFAQ/024)

* * *

for 循环使用`$IFS`（内部字段分隔符）变量中的字符作为分隔符拆分要循环的值。通常`$IFS`包含一个空格、一个制表符和一个换行符。这意味着`for`循环将遍历“单词”，而不是行。

如果您坚持使用 for 循环遍历行，则必须将值更改`$IFS`为仅换行符。但是如果你这样做，你必须保存旧的值`$IFS`并在循环之后恢复它，因为许多其他的东西也依赖于`$IFS`.

```
OLDIFS="$IFS"
IFS=$'\n' # bash specific
for line in $(ioscan -m dsf)
do
  printf '%s\n' "$line"
done
IFS="$OLDIFS" 
```

在没有[ANSI-C 引用](https://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html)( `$'\n'`) 的 POSIX shell 中，您可以这样做：

```
IFS='
' 
```

即：在引号之间添加一个实际的新行。

或者，您可以使用子外壳来包含对以下内容的更改`$IFS`：

```
(
  # changes to variables in the subshell stay in the subshell
  IFS=$'\n'
  for line in $(ioscan -m dsf)
  do
    printf '%s\n' "$line"
  done
)
# $IFS is not changed outside of the subshell 
```

但请注意，循环中的命令本身可能取决于`$IFS`. 然后你必须在执行命令之前恢复`$IFS`并在下一个循环或类似之前再次设置。我不建议弄乱`$IFS`. 太多的命令依赖于一些理智的值，`$IFS`而改变它是一个无止境的寻虫噩梦。

也可以看看：

*   [http://wiki.bash-hackers.org/syntax/ccmd/classic_for](http://wiki.bash-hackers.org/syntax/ccmd/classic_for)
*   [http://wiki.bash-hackers.org/commands/builtin/read](http://wiki.bash-hackers.org/commands/builtin/read)
*   [http://mywiki.wooledge.org/IFS](http://mywiki.wooledge.org/IFS)
*   [http://mywiki.wooledge.org/SubShell](http://mywiki.wooledge.org/SubShell)
*   [http://mywiki.wooledge.org/ProcessSubstitution](http://mywiki.wooledge.org/ProcessSubstitution)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-22T11:11:38.187

### 用于

`for l in $()`基于 IFS 进行分词：

```
$ for l in $(printf %b 'a b\nc'); do echo "$l"; done
a
b
c
$ IFS=$'\n'; for l in $(printf %b 'a b\nc'); do echo "$l"; done
a b
c 
```

如果以后不使用IFS，则不必重新设置。

`for l in $()`还执行路径名扩展：

```
$ printf %b 'a\n*\n' > file.txt
$ IFS=$'\n'
$ for l in $(<file.txt); do echo "$l"; done
a
file.txt
$ set -f; for l in $(<file.txt); do echo "$l"; done; set +f
a
* 
```

如果`IFS=$'\n'`，换行符被剥离和折叠：

```
$ printf %b '\n\na\n\nb\n\n' > file.txt
$ IFS=$'\n'; for l in $(<file.txt); do echo "$l"; done
a
b 
```

`$(cat file.txt)`（或`$(<file.txt)`）也将整个文件读入内存。

### 使用读取

没有 -r 反斜杠用于行继续并在其他字符之前删除：

```
$ cat file.txt
\1\\2\
3
$ cat file.txt | while read l; do echo "$l"; done
1\23
$ cat file.txt | while read -r l; do echo "$l"; done
\1\\2\
3 
```

IFS 中的字符从行的开头和结尾被剥离但不折叠：

```
$ printf %b '1  2 \n\t3\n' | while read -r l; do echo "$l"; done
1  2
3
$ printf %b ' 1  2 \n\t3\n' | while IFS= read -r l; do echo "$l"; done
 1  2 
    3 
```

如果最后一行不以换行符结尾，则 read 将 l 分配给它，但在循环体之前退出：

```
$ printf 'x\ny' | while read l; do echo $l; done
x
$ printf 'x\ny' | while read l || [[ $l ]]; do echo $l; done
x
y 
```

如果 while 循环在管道中，它也在子 shell 中，因此变量在其外部不可见：

```
$ x=0; seq 3 | while read l; do let x+=l; done; echo $x
0
$ x=0; while read l; do let x+=l; done < <(seq 3); echo $x
6
$ x=0; x=8 | x=9; echo $x
0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-10T20:01:32.263

您基本上需要使用它`IFS=$'\n'`，而`grep -x`不是`grep`因为它将像等于运算符而不是像运算符一样工作。

# wpf - 如何为初学者使用 WPF/Silverlight 的 Expression blend

> ID：10748711
> 
> 赞同：1
> 
> 时间：2012-05-25T05:04:02.277
> 
> 标签：wpf, expression-blend

任何人请为我提供一些表情混合初学者的视频教程。

谢谢，@nagaraju。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:00:22.950

我们有很多关于表达式混合设计的视频教程。

[http://www.lynda.com/Expression-Blend-tutorials/getting-started-with/384-2.html](http://www.lynda.com/Expression-Blend-tutorials/getting-started-with/384-2.html)

[http://expression.microsoft.com/en-us/cc197141.aspx](http://expression.microsoft.com/en-us/cc197141.aspx)

[http://www.kirupa.com/blend_wpf/index.htm](http://www.kirupa.com/blend_wpf/index.htm)

您还可以查看复数网站的视频教程。

# javascript - jQuery ajax 帖子的问题

> ID：10748715
> 
> 赞同：1
> 
> 时间：2012-05-25T05:04:28.887
> 
> 标签：javascript, jquery

这是对这个[问题](https://stackoverflow.com/questions/10730765/how-to-find-a-sibling-elements-value-using-jquery-upon-click)的跟进。由于我现在面临的问题与此不同，我想我会提出一个新问题。

我在以下代码中遇到问题，请求被发布到服务器，但是服务器发送的任何响应在浏览器上都不可见（此处以警报的形式）。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
$(document).ready(function() {
    $('#login').delegate('input#submit','click',function(){
        var request = $.ajax({
            type: "POST",
            url: "login",
            data: {userid: $("#userid").val(), password:$("#password").val()},
            datatype: "xml",
            cache: false,
            success: function(xml){alert(xml);}
        });
    });
});

</script> 
```

我可以看到这个请求将发送到服务器 - 可以在日志中看到它。但我在浏览器中看不到服务器的响应。这是服务器的响应：

```
<result><url>landing-page</url></result> 
```

不知道我做错了什么，但这似乎很简单，我应该让它毫无问题地工作。尝试了 Firebug，但没有运气。关于我在哪里出错或如何进一步调试此问题的任何想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:12:46.667

将“成功”回调更改为“完成”回调，或添加完整回调。我的猜测是，即使成功检索到响应，它也没有检测到“成功”。如果它触发“完成”回调，那么您可以尝试修复您的网络服务以提供成功的响应。

# algorithm - 在 Trie 操作中无法弄清楚这个算法（递归）

> ID：10748717
> 
> 赞同：0
> 
> 时间：2012-05-25T05:04:47.353
> 
> 标签：algorithm, data-structures, dictionary, computer-science, trie

有人可以帮我理解以下 pheudocode 吗？

```
countWords(vertex, word, missingLetters)  
    k=firstCharacter(word)  
    if isEmpty(word)  
        return vertex.words  
    else if notExists(edges[k]) and missingLetters=0  
        return 0  
    else if notExists(edges[k])  
        cutLeftmostCharacter(word)  
        return countWords(vertex, word, missingLetters-1)  
        //Here we cut a character but we don't go lower in the tree  
    else  
        //We are adding the two possibilities: the first  
        //character has been deleted plus the first character is present  
        r=countWords(vertex, word, missingLetters-1)  
        cutLeftmostCharacter(word)  
        r=r+countWords(edges[k], word, missingLetters)  
        return r 
```

这个想法是，使用[Trie](http://en.wikipedia.org/wiki/Trie)，我们试图找到一个单词在我们的字典中出现的次数，但我们可能会丢失字母。
我迷路了`else`。我不明白其中的逻辑。
例如，如果我们单词的第一个字符是匹配的，我们命中最后一个字符，`else`然后`countWords`在同一级别上递归，`missingLetters-1`但是这不是一个相同的循环吗？即它会再次比较同一级别的第一个字母等等？
有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:14:35.470

该算法是错误的。我怀疑由于某种原因，对 cutLeftMostCharacter 的最后一次调用已与前一行交换。如果代码会读取

```
 cutLeftmostCharacter(word)  
   r=countWords(vertex, word, missingLetters-1)  
   r=r+countWords(edges[k], word, missingLetters) 
```

这会更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:59:25.453

即使按照 antti.huima 的建议将最后几行的顺序颠倒了，我仍然觉得有些不对劲。

如果我理解正确，如果你有`Pizza`，`Lizza`也应该算上如果 missingLetters==1，对吧？但是，如果 Lizza 不在您输入的树中

```
else if notExists(edges['l'])  
        cutLeftmostCharacter(word) # 'izza' left  
        return countWords(vertex, 'izza', 0) #vertex is 'P' I guess 
```

然后你输入

```
else if notExists(edges['i']) and missingLetters=0 
```

哪个返回 0？

鉴于您已经尝试过，我建议您看一下[Levehnstein Distance](http://stevehanov.ca/blog/index.php?id=114)。

# android - Foursquare 签到提要位置

> ID：10748719
> 
> 赞同：0
> 
> 时间：2012-05-25T05:04:53.230
> 
> 标签：android, gps, foursquare, checkin

我刚刚检查了 Foursquare 自动生成的提要。在 Google 地图中查看 KML 时，地图上的图钉似乎是我手机的位置（或它认为我的手机所在的位置），而不是我签到地点的位置。

我的手机有一个非常糟糕的 GPS，它通常认为我在海洋中间或离我要办理登机手续的地方不远。*这通常会使办理登机手续变得非常困难！:(*

**是否可以获取值机地点的密码而不是我的手机？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:59:26.900

我们的 API/Feed 返回的位置应始终是场地的位置，而不是您报告的位置。如果您不相信，请发送电子邮件至 api@foursquare.com 并提供更多详细信息（例如签到 ID 以及您收到的有关这些签到的数据）

# python - PyDev（Eclipse 和 Aptana）中的 Django Sync DB 在回答“是”以定义超级用户后失败

> ID：10748721
> 
> 赞同：0
> 
> 时间：2012-05-25T05:05:01.603
> 
> 标签：python, django, aptana, pydev

这里可能发生了什么？这是我的两台独立 Mac 上的问题 - 一台 Eclipse 安装和一台 Aptana Studio。在我第一次同步数据库时回答“是”以创建超级用户后，我收到了这些错误。

在 PyDev 之外（通过终端等）执行 Sync db 似乎工作正常。

> 您刚刚安装了 Django 的身份验证系统，这意味着您没有定义任何超级用户。您想现在创建一个吗？（是/否）：是 回溯（最后一次调用）：文件“/Users/mac2/Documents/workspace/helloworld/manage.py”，第 10 行，在 execute_from_command_line(sys.argv) 文件“/Library/Frameworks/ Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/ **init** .py”，第 443 行，execute_from_command_line 实用程序.execute() 文件“/Library/Frameworks/Python.framework/**版本**/2.7/lib/python2.7/site-packages/django/core/management/init**.py”，第 382 行，在执行 self.fetch_command(subcommand).run_from_argv(self.argv) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core /management/base.py"，第 196 行，在 run_from_argv self.execute(*args, ** **options.dict**) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py”，第 232 行，执行输出 = self.handle(*args , **options) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py”，第 371 行，在句柄中返回 self.handle_noargs （**选项）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/syncdb.py”，第110行，在handle_noargs emit_post_sync_signal（ created_models，详细程度，交互式，db）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/sql.py”，第189行，在emit_post_sync_signal交互=交互式，db = db）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/dispatch/dispatcher.py”，第 172 行，在发送响应 = 接收器（信号 = 自我，发件人 = 发件人，* *命名）文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/**init** .py"，第 73 行，在 create_superuser call_command("createsuperuser", interactive=True, database=db) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django /核心/管理/**初始化**.py”，第 150 行，在 call_command 返回 klass.execute(*args, **defaults) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/ management/base.py”，第 232 行，在执行输出 = self.handle(*args, **options) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ django/contrib/auth/management/commands/createsuperuser.py”，第 70 行，在句柄 default_username = get_default_username() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ django/contrib/auth/management/ **init** .py”，第 105 行，在 get_default_username default_username = get_system_username() 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/**init** .py"，第 85 行，在 get_system_username return getpass.getuser().decode(locale.getdefaultlocale()[1]) TypeError: decode() argument 1 must be string, not None Finished "/Users/mac2/Documents/工作区/helloworld/manage.py syncdb”执行。**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:03:15.167

返回的错误表明调用`decode`失败并带有 None 参数：

```
"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/init.py", line 85, in get_system_username return getpass.getuser().decode(locale.getdefaultlocale()[1]) TypeError: decode() argument 1 must be string, not None Finished 
```

那里的问题是`locale.getdefaultlocale()`返回一个带有环境变量的元组`LANG`（参见[http://docs.python.org/library/locale.html](http://docs.python.org/library/locale.html)）。如果你打开终端，syncdb 工作的地方，然后输入`echo $LANG`，我猜你会得到类似`en_US.UTF-8`. 同样，我想你的命令行上的 Python 返回如下内容：

```
>>> import locale
>>> locale.getdefaultlocale()
('en_US', 'UTF-8') 
```

但是，如果您在未设置 LANG 环境变量的 Eclipse 中运行相同的命令，您将获得`(None, None)`.

尝试在 Eclipse 中设置 LANG 环境变量（运行配置...> 环境），然后运行 ​​syncdb。您可能需要在变量的设置位置（即在运行配置与项目本身中）进行一些操作。这能解决问题吗？**

# database-design - 苦苦挣扎于数据库设计/关系

> ID：10748722
> 
> 赞同：0
> 
> 时间：2012-05-25T05:05:10.580
> 
> 标签：database-design, create-table

我正在尝试为建筑仓库建立一个数据库（那里存放着建筑材料）。我需要知道所有存储的材料（入库的产品）、所有售出的产品以及所有离开的产品。我正在考虑这样做：

```
 Products--> Deliver <--Depot (many to many) - here I see all the products in.

Depot--> Sell <--Products (many to many) - here I see what I have sold.

And what is left: To make a difference between "Deliver" and "Sell". 
```

这里有什么正确的吗？你有别的想法吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:03:38.233

处理库存跟踪系统的另一种方法是像**复式记账**系统一样处理它。这将使您将您的`Deliver`和`Sell`表组合成一个库存`Movement`表。每个动作将包含两条记录，一条为正数，一条为负数。

以这种方式处理您的库存系统的优势在于，可以很容易地使用聚合查询来获取某个时间点任何仓库的任何产品的库存位置（现有库存）。

* * *

**编辑：**表结构...

```
PRODUCT
-ID (PK)
-Description
-...

DEPOT
-ID (PK)
-Name
-Location
-...

MOVEMENT
-ID (PK)
-DateTime
-ProductID (FK)
-DepotID (FK)
-Quantity /* Positive=Increase, Negative=Decrease */
-OffsettingMovementID (FK) /* Points to the other half of the entry */ 
```

# android - Android - 移动文本问题

> ID：10748723
> 
> 赞同：0
> 
> 时间：2012-05-25T05:05:14.053
> 
> 标签：android

我正在尝试创建移动文本。我已经创建了用于循环它的表面视图和线程。但它没有向我显示移动的动作，而是像 ********* * *** ***无限。*

 *但我需要的是把这一点移到那个** -> ** 明白了吗？

这是我的代码

```
package com.CurvePackage.Curve;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.Toast;

public class Origin extends SurfaceView implements SurfaceHolder.Callback {
    Context context1;
    private MainThread thread;
    private int x=0;
    private int y=0;

    public Origin(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        setWillNotDraw(false);
        context1 = context;
        getHolder().addCallback(this);
        thread = new MainThread(getHolder(), this);

        setFocusable(true);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        Paint paint = new Paint();
        paint.setTextSize(23);
        paint.setFakeBoldText(true);
        paint.setColor(Color.YELLOW);
        // int score=(10-sprites.size()*100);
        x=x+20;
        y=y+20;
        canvas.drawText("ewqewqe", x, y, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        return super.onTouchEvent(event);
        // Toast.makeText(getba, "Replay clicked!", Toast.LENGTH_SHORT).show();
    }

    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    public void surfaceCreated(SurfaceHolder holder) {
        // TODO Auto-generated method stub
        thread.setRunning(true);
        thread.start();

    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        thread.setRunning(false);
        // TODO Auto-generated method stub
//      boolean retry = true;
//      while (retry) {
//          try {
//              thread.join();
//              retry = false;
//          } catch (InterruptedException e) {
//              // try again shutting down the thread
//          }
//      }

    }
} 
```

主线程

```
package com.CurvePackage.Curve;

import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class MainThread extends Thread {

    // flag to hold game state
    private boolean running;
    private SurfaceHolder surfaceHolder;
    private Origin origin;
     static final long FPS = 15;

    public void setRunning(boolean running) {
        this.running = running;
    }

    @Override
    public void run() {

        long ticksPS = 1000 / FPS;
        long startTime;
        long sleepTime;

        while (running) {
            Canvas c = null;
            startTime = System.currentTimeMillis();
            try {
                   c = origin.getHolder().lockCanvas();
                   synchronized (origin.getHolder()) {
                       origin.onDraw(c);
                   }
            } finally {
                   if (c != null) {
                       origin.getHolder().unlockCanvasAndPost(c);
                   }
            }

            sleepTime = ticksPS-(System.currentTimeMillis() - startTime);
            try {
                   if (sleepTime > 0)
                          sleep(sleepTime);
                   else
                          sleep(10);
            } catch (Exception e) {}
        }

    }

    public MainThread(SurfaceHolder surfaceHolder, Origin origin) {
        super();
        this.surfaceHolder = surfaceHolder;
        this.origin = origin;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:16:54.753

在绘制文本之前，您需要在 onDraw 方法中绘制整个背景。

```
Paint p2 = new Paint();
p2.setStyle(Style.FILL);
canvas.drawRect(0, 0, screenWidth, screenHeight, p2);
//draw text here 
```

这将完全覆盖上一次绘制画布时的文本，并删除此拖动效果。*

# android - mvc模式中的sencha模板

> ID：10748726
> 
> 赞同：0
> 
> 时间：2012-05-25T05:05:52.380
> 
> 标签：android, iphone, templates, extjs

下面的代码用于主视图，即 main.js，我在其中调用了 intro.js，即另一个视图。现在我无法在模板上呈现数据。我是sencha的新手，我想我在声明上搞砸了

```
Ext.define("casta.view.Main", {
    extend: 'Ext.tab.Panel',
    apitoken:'NULL',
    requires: [
        'Ext.TitleBar',
        'Ext.Video',
        'casta.view.Intro'

    ],
    config: {
        tabBarPosition: 'top',

        items: [

                { title:'Intro',
                   xclass: 'casta.view.Intro' ,
                   iconCls:'user'
                 }

                 ]
    }
}); 
```

intro.js 如下。我认为在声明变量时我搞砸了一些事情。它显示空白屏幕

```
Ext.define('casta.view.Intro', {
extend: 'Ext.tab.Panel',
//alias: 'widget.currentDate', //this makes it xtype 'currentDate'
//store: 'CurrentDateStore',

initComponent: function(){
    planetEarth = { name: "Earth", mass: 1.00 };

    tpl = new Ext.Template(['<tpl for".">', '<p> {name} </p>', '</tpl>'].join(''));
    tpl.compile();
    //this.callParent(arguments);

},
html:tpl.apply(planetEarth)
}); 
```

下面是控制台日志

```
tpl is not defined 
```

[打破这个错误]

```
html:tpl.apply(planetEarth) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:03:53.253

initComponent 将在设置 html var 后的某个时间被调用。而是像这样定义您的 tpl：

```
Ext.define('casta.view.Intro', {
    extend: 'Ext.tab.Panel',
    tpl: '<p> {name} </p>',
    initComponent: function(){
        //Be sure to use the var keyword for planet earth, otherwise its declared as a global variable
        var planetEarth = { name: "Earth", mass: 1.00 };
        this.setHtml(this.getTpl().apply(planetEarth));
    }
}); 
```

按照您的模式，这将起作用，但您可能希望更像这样定义该组件：

```
Ext.define('casta.view.Intro', {
    extend: 'Ext.Container',
    tpl: '<p> {name} </p>'
}); 
```

然后像这样实例化它：

```
Ext.define("casta.view.Main", {
    extend : 'Ext.tab.Panel',
    apitoken : 'NULL',
    requires : ['Ext.TitleBar', 'Ext.Video', 'casta.view.Intro'],
    config : {
        tabBarPosition : 'top',
        items : [{
            xclass : 'casta.view.Intro',
            title : 'Intro',
            iconCls : 'user',
            data: {name: "Earth", mass: 1.00 }
            }]
    }
}); 
```

# spring - 如何在 spring/hibernate 中处理单个表单中的两个数据库插入？

> ID：10748728
> 
> 赞同：0
> 
> 时间：2012-05-25T05:06:10.197
> 
> 标签：spring, hibernate, spring-mvc, mapping

我有 3 个模型类，

```
User.java

public class UserData {
private Integer userID;
private String userName;
private String userPassword;
//getters and setters.. 
```

和权限类如..

```
Permission.java

public class PermissionsData {
private Integer permissionID;
private Integer userID;
private Integer moduleID;
private boolean permissionIsReadOnly;
private boolean permissionIsModify;
private boolean permissionIsFull;
//getters and setters 
```

amd模块类，

```
module.java

public class ModuleData {
private Integer modId;
private String modName; 
```

我的数据库中有一些模块。当我创建一个新用户时，我已经列出了这些模块并添加了复选框来设置权限。提交表单时，我需要将用户数据插入到用户表中，并将他对每个模块的权限插入到权限表中。

现在我只实现了向数据库插入角色..我的控制器就像..

```
@RequestMapping(value = "/addRole")
    public ModelAndView addNewRole()
    {
        ModelAndView mav = new ModelAndView("addNewRole");
        RoleData role = new RoleData();
        mav.getModelMap().put("roleDataObj", role);

        List<ModuleData> moduleList = moduleService.getAllModules();
        mav.getModelMap().addAttribute("ModuleList", moduleList);
        return mav;
    } 
```

我怎样才能实现一次提交将数据添加到两个表？我还想知道模块和权限之间的映射我对今年春天和休眠真的很陌生。所以请用示例代码指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:01:21.640

如果您在映射中设置了级联

```
@Cascade(Cascade.all)
private List<Permission> permissions; 
```

它很简单

```
public void saveNewUser(...)
{
    User user = new User();
    // fill properties
    Permission p = new Permission();
    // fill properties
    user.getPermissions().add(p);

    session.save(user);
} 
```

更新：上面的代码可以使用类似的类结构。重要的部分是每个用户每个模块的权限集合/映射

```
public class Permission {
    private boolean IsReadOnly;
    private boolean IsModify;
    private boolean IsFull;
}

public class Module {
    private Integer id;
    private String name;
}

public class User {
    private Integer id;
    private String name;
    private String password;
    private Map<Module, Permission> permissions;
} 
```

和映射

```
<class name="User">
  ...
  <map name="permissions" cascade="all">
    <key column="UserId"/>
    <index-many-to-many column="ModuleId" class="Module"/>
    <composite-element class="Permission">
      <property name="IsReadOnly"/>
      <property name="IsModify"/>
      <property name="IsFull"/>
    </composite-element>
  </map> 
```

# ruby-on-rails - 使 Rails 类属性不可访问 - Rails 教程第 9 章，练习 1

> ID：10748730
> 
> 赞同：2
> 
> 时间：2012-05-25T05:06:22.953
> 
> 标签：ruby-on-rails, railstutorial.org

我正在阅读 Michael Hartl 的 Rails 教程。我已经来到[第 9 章，练习 1](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec%3aupdating_deleting_exercises)。它要求您添加一个测试以验证该类的`admin`属性`User`是否不可访问。这是注释掉无关部分的 User 类：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  attr_protected :admin

  # before_save methods
  # validations
  # private methods
end 
```

这是我用来验证该`admin`属性不可访问的测试。

```
describe User do
  before do
    @user = User.new( 
                     name: "Example User",
                     email: "user@example.com",
                     password: "foobar123",
                     password_confirmation: "foobar123")
  end

  subject { @user }

  describe "accessible attributes" do
    it "should not allow access to admin" do
      expect do
        @user.admin = true 
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
  end
end 
```

测试失败。它表示没有引发错误，尽管该`admin`属性受到保护。我怎样才能让测试通过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T20:14:47.500

来自 Ruby 文档：

> 批量分配安全性提供了一个用于保护属性免受最终用户分配的接口。

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

试试这个代码

```
describe "accesible attributes" do
  it "should not allow access to admin" do
    expect do
      User.new(admin: true) 
    end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T05:16:48.000

正如 Rails 文档所声称的 attr_protected

> 在此宏中命名的属性不受大规模赋值的影响，例如 new(attributes)、update_attributes(attributes) 或 attributes=(attributes)。

因此，您可以手动更改字段。'attr_protected' 仅与批量分配有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:16:45.777

这仅适用于批量分配，例如从表单提交中设置字段。尝试这样的事情：

```
@user.update_attrtibutes(:admin => true)
@user.admin.should be_false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T00:02:10.580

[剧透警告：如果您尝试自己解决 Hartl 书中的练习，我很确定我即将给出答案。尽管已被接受的答案是有趣的信息，但我不相信这是 Hartl 的想法，因为这需要本书未涵盖的知识，并且也不会将其与通过网络操作或使用测试的更新具体联系起来他提供。]

我想你可能会认为这个练习比实际困难得多，如果我做对了的话。首先，你误解了提示：

> 提示：您的第一步应该是将 admin 添加到 user_params 中允许的参数列表中。

它没有说要更改其在类中的 attr 声明。它说要修改帮助函数 user_params。所以我将它添加到 users_controller.rb 的列表中：

```
def user_params
  params.require(:user).permit(:name, :email, :password,
                             :password_confirmation, :admin)
end 
```

接下来，我将代码清单 9.48 中的代码复制到 spec/requests/user_pages_spec.rb 中指定的位置：

```
require 'spec_helper'

describe "User pages" do
  .
  .
  .
  describe "edit" do
    .
    .
    .
    describe "forbidden attributes" do
      let(:params) do
        { user: { admin: true, password: user.password,
                  password_confirmation: user.password } }
      end
      before do
        sign_in user, no_capybara: true
        patch user_path(user), params
      end
      specify { expect(user.reload).not_to be_admin }
    end
  end
end 
```

然后测试失败，表明可以传递一个管理员参数，从而将普通用户更改为管理员，这不是您想要允许的：

```
$ rspec spec
.....................[edited out dots].................................F

Failures:

  1) User pages edit forbidden attributes 
     Failure/Error: specify { expect(user.reload).not_to be_admin }
       expected admin? to return false, got true
     # ./spec/requests/user_pages_spec.rb:180:in `block (4 levels) in <top (required)>'

Finished in 4.15 seconds
91 examples, 1 failure

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:180 # User pages edit forbidden attributes 
```

然后，为了避免通过 Web 操作传入 admin 值，我只是从可接受的 user_params 列表中删除了 :admin，撤消了第一个更改：

```
def user_params
  params.require(:user).permit(:name, :email, :password,
                             :password_confirmation)
end 
```

现在尝试使用新的管理员值修补用户失败......并且测试成功，验证“该`admin`属性不可通过网络编辑”。

```
 $ rspec spec
...........................................................................................

Finished in 4.2 seconds
91 examples, 0 failures 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-10T03:27:15.860

@agaved。这个答案可能来晚了，你可能已经有了答案，但我想回答你的问题，它可能对其他人有帮助。

了解`update_attributes`与直接分配有何不同的最佳方法
`@user.admin = true`是尝试在您的控制台中执行此操作。如果您遵循 Hartl 的教程，请尝试以下操作：

```
@user = User.first
@user.admin?
=> true
@user.admin = false
=> false 
```

直接分配设法将用户属性 admin 的值从 更改为 ，`true`而`false`不会引发批量分配错误。这是因为当您使用不可访问的属性调用`update_attributes`或创建新用户时会引发批量分配错误。`User.new`换句话说，当用户尝试更新`(attribute_update)`或创建`User.new(admin: true)`具有她无法访问的属性的新用户时，Rails 会引发大量分配错误。在上述情况下，直接分配不使用用户控制器的创建或更新方法。

它们是非常相似的代码片段，因为您可以在上述情况下直接在 IRB 中使用直接分配来强制更改 admin 属性，`@user.save!(validate: false)`但正如我上面所说，这不使用用户控制器的 create 或 update 方法，因此，它不会抛出错误。

我希望这有帮助，[这](http://apidock.com/rails/ActiveRecord/Base/update_attributes)对我有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-16T14:22:24.047

按照提示，我首先在 app/models/user.rb 中添加了`:admin`以`attr_accessible`红色开头的内容。

然后我添加了测试：

```
describe "admin attribute" do
    it  "should not be accessible" do
        expect do
            @user.update_attributes(:admin => true)
        end.to raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
end 
```

符合规格并获得红色。

从 user.rb 中删除`:admin`我得到一个绿色。到目前为止，一切都很好。

令我困惑的是为什么我应该使用 sintax：

```
@user.update_attributes(:admin => true) 
```

而不是`@user.admin = true`（我检查过，在这种情况下它不起作用）。

# java - 将 Java 对象强制转换为整数

> ID：10748739
> 
> 赞同：2
> 
> 时间：2012-05-25T05:08:49.230
> 
> 标签：java, swing, object, integer, int

以下代码显示的错误是：无法将对象转换为整数。我不知道我还要包括什么来投射它。

```
private RowFilter filter(final int itemsPerPage,final int target) {
        return new RowFilter() {
            public boolean include(Entry entry) {

                /* HERE I AM RECEIVING ERROR: Multiple markers at this line
                - Type mismatch: cannot convert from  Object to int
                - Cannot cast from Object to int */
                int ei = (int) entry.getIdentifier();

                return (target * itemsPerPage <= ei && ei < target
                        * itemsPerPage + itemsPerPage);
            }
        };
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T05:11:15.577

你想要的是：

```
int ei = ((Integer) entry.getIdentifier()).intValue(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:12:01.537

我认为您的方法`Integer`在这里返回对象，如果是这种情况，您需要这样做：

```
int ei =  ((Integer)entry.getIdentifier()).intValue(); 
```

# sql - 从日期替换时间戳中的月份

> ID：10748747
> 
> 赞同：0
> 
> 时间：2012-05-25T05:09:48.540
> 
> 标签：sql, oracle, date

我是 Oracle DB 的新手，手头有一个情况。
我有两张桌子。

```
Table1 [ ID, MY_DATE ]
Table2 [ ID, MY_TIMESTAMP] 
```

我需要从 中选择`month`单独的`Table1.MY_DATE`并替换相应的月份`Table2.MY_TIMESTAMP`。
Table1 和 Table2 都通过 ID 连接。

如何从日期列中单独选择月份并在时间戳字段中单独替换月份。
有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:24:30.960

```
 UPDATE SO_BUFFER_TABLE_13 BT2
   SET BT2.MY_TIMESTAMP = TO_DATE((TO_CHAR(BT2.MY_TIMESTAMP, 'DD') || '/' ||
                                  (SELECT TO_CHAR(BT1.MY_DATE, 'MM')
                                      FROM SO_BUFFER_TABLE_12 BT1
                                     WHERE BT1.ID = BT2.ID) || '/' ||
                                  TO_CHAR(BT2.MY_TIMESTAMP,
                                           'YYYY HH:MI:SS AM')),
                                  'DD/MM/YYYY HH:MI:SS AM') 
```

希望有帮助

# git - 如何在 Git 中重命名提交消息？

> ID：10748749
> 
> 赞同：19
> 
> 时间：2012-05-25T05:10:45.360
> 
> 标签：git

我知道这对于很多场景来说都是个坏主意。我正在学习 Git 并进行实验。在此练习中不会损害任何代码。

我创建了一个这样的结构：

```
* [cf0149e] (HEAD, branch_2) more editing
* [8fcc106] some edit
|
|  * [59e643e] (branch_2b) branch 2b
| /
|/
|  * [0f4c880] (branch_2_a) branch 2a
| /
|/
*  [a74eb2a] checkout 1
*  [9a8dd6a] added branch_2 line
|
|
| * [bb903de] (branch_3) branch 3
|/
|
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

现在我想浏览这个图表并重命名各种提交，以便它们有意义。

例如：

```
 * | [a74eb2a] checkout 1
    * | [9a8dd6a] added branch_2 line

renamed to:

    * | [a74eb2a] branch 2 commit 2
    * | [9a8dd6a] branch 2 commit 1 
```

注意：

```
[cf0149e] (HEAD, branch_2) more editing
[59e643e] (branch_2b) branch 2b
[0f4c880] (branch_2_a) branch 2a 
```

都分支出：

```
[a74eb2a] checkout 1 
```

我已经尝试过

```
git rebase -i 328454f 
```

然后在我想要修改并随后运行的提交上将“pick”更改为“edit”

```
git commit --amend -m "the new message" 
```

随着变基过程的继续。

这种方法的问题在于，在最后一次之后，`git rebase --continue`我在碰巧所在的分支上得到了两个新的提交（我想重命名的两个重复）。例如，如果我在 HEAD 位于“branch_2”时运行 rebase，则图形可能如下所示：

```
* [cf0149e] (HEAD, branch_2) more editing
* [8fcc106] some edit
* [3ff23f0] branch 2 commit 2
* [2f287a1] branch 2 commit 1
|  
|    * [59e643e] (branch_2b) branch 2b
|   /
|  /
| |  * [0f4c880] (branch_2_a) branch 2a
| | /
| |/
| * [a74eb2a] checkout 1
| * [9a8dd6a] added branch_2 line
|/
|
| * [bb903de] (branch_3) branch 3
|/
|
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

换句话说，我现在有两组代表完全相同的代码状态的提交。

我想做的就是更改提交消息。

我还想将初始消息从“测试”重命名为“初始版本”。我似乎无法做到这一点，`git commit --amend -m "Initial version"`因为如果我签出该提交，我最终会处于无头模式。

我究竟做错了什么？当然不可能那么难。

**编辑：
这是我刚刚尝试过的一种方法。当然，它改写了历史。因此，在非常特殊的情况之外，这是一个坏主意。以下是步骤：**

签出要修改的分支。创建补丁文件：

```
git format-patch HEAD~x   // Where x is how far back from HEAD you need to patch 
```

编辑补丁文件以更改提交消息。现在重置头部。

```
git reset --hard HEAD~x   // Same x as before 
```

应用补丁：

```
git am 000* 
```

将使用新的 SHA1 创建新的提交。如果任何分支现在需要使用更正的消息引用新提交，您必须使用`git rebase`它们来移动它们。

使用我自己的示例，在应用补丁程序后，我最终得到了这个：

```
* [7761415] (HEAD, branch_2) branch 2 commit 4
* [286e1b5] branch 2 commit 3
* [53d638c] branch 2 commit 2
* [52f82f7] branch 2 commit 1
| * [bb903de] (branch_3) branch 3
|/
| * [59e643e] (branch_2b) branch 2b
| | * [0f4c880] (branch_2_a) branch 2a
| |/
| * [a74eb2a] checkout 1
| * [9a8dd6a] added branch_2 line
|/
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

所以，我已经很好地标记了我的 branch_2 提交。现在我想移动 branch_2a 以便它分支出来`[53d638c] branch 2 commit 2`

结帐 branch_2a

```
git checkout branch_2a 
```

变基

```
git rebase 53d638c 
```

我现在有：

```
* [fb4d1c5] (HEAD, branch_2a) branch 2a
| * [7761415] (branch_2) branch 2 commit 4
| * [286e1b5] branch 2 commit 3
|/
* [53d638c] branch 2 commit 2
* [52f82f7] branch 2 commit 1
| * [bb903de] (branch_3) branch 3
|/
| * [59e643e] (branch_2b) branch 2b
| * [a74eb2a] checkout 1
| * [9a8dd6a] added branch_2 line
|/
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

与 branch_2b 相同的过程会导致：

```
* [ca9ff6c] (HEAD, branch_2b) branch 2b
| * [fb4d1c5] (branch_2a) branch 2a
|/
| * [7761415] (branch_2) branch 2 commit 4
| * [286e1b5] branch 2 commit 3
|/
* [53d638c] branch 2 commit 2
* [52f82f7] branch 2 commit 1
| * [bb903de] (branch_3) branch 3
|/
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

这正是我想要的。不会太乱。同样，在非常特殊的情况下，您不想做的事情。就我而言，我只是在学习 Git，所以上述内容并没有真正影响真正的代码存储库。很高兴知道您可以在必要时执行此操作。

现在开始重命名第一个提交。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-25T05:30:15.173

您实际上永远无法更改提交。如果您在任何地方进行最小的单位更改，从电子邮件行中名称的拼写到提交时间戳的精确秒，您将获得一个新的、不同的提交和一个新的、不同的 SHA1（SHA1 是“真正的git 数据库中每个“对象”的名称”，提交是四种类型的对象之一）。

提交的不可变部分之一是它的“父提交”，它构建了从最近提交到最旧提交的链。

因此，要做`git rebase -i`的是创建一个*新*的提交链，链中的每个提交都具有与原始提交相同的内容/效果，加上或减去您在交互期间所做的任何更改。完成后，它会从旧提交链的末尾删除标签（即便笺）并将其粘贴到新提交链的末尾。它首先复制要修改/重新定位的最旧提交。这个具有重新定位的父级（可以是与原始链中相同的父级提交，也可以是不同的父级：无论哪种方式都可以，因为它是一个*新*提交）。然后它复制旧链中的下一个，但指向新链。它一直重复到旧链的末端。

这就是为什么你所有的其他分支现在都独立于你的 rebase 分支。他们*必须*是，因为他们使用旧的提交 ID。如果你想让他们从你的新的 rebase 分支分支出来，你必须进入每个分支并 rebase 它们。

有一个强大的 Swiss-Army-chainsaw-ish 命令，`git filter-branch`您可以使用它来执行一系列非常大的“重做大量提交，使所有新的提交（大部分）内容与原件相同”，有点像`git rebase`在类固醇上，您可以用于此目的。（运行它`--all`以影响所有分支。）当然，由于它实际上重做所有提交，因此您最终会得到一个与原始 repo 基本上无关的 repo。

重写初始提交很困难（并非不可能），因为它没有父级，所以常规`rebase`只是不会这样做。¹ （`filter-branch`可以。）因为这些更改了 SHA1 ID，并且任何克隆了您的 repo 的人都在使用 / 依赖于这些，所以它通常是一个功能，您不能像这样摆弄提交。当您知道没有其他人依赖于某些特定的提交集时，您可以随心所欲`rebase`，但您不会回到最初的提交，因为那将在 repo 的共享部分中。一直到“初始提交”的整个事情都是您自己的私人内容，这是非常罕见的（尽管当然不是“从不”）。

* * *

¹自从我写了这篇文章以来，`git rebase`已经学会了像初始提交一样复制根提交。² 使用传统`git rebase`语法，您必须命名根的父提交，当然没有父提交（这*就是*它在图中成为“根”的原因）。因此`rebase`用作`--root`涵盖这种情况的论据。

²可以有多个根；`git checkout --orphan`例如，使用`git commit`, 来创建一个新的根提交。拥有这些有点不寻常，尽管 git 源本身保存在具有多个根的 git 存储库中。

# c# - 将 XmlDocument 导出到 excel

> ID：10748751
> 
> 赞同：0
> 
> 时间：2012-05-25T05:10:54.330
> 
> 标签：c#, asp.net, xmldocument

我有一个 XmlDocument，其中有分层数据，我想将此数据导出到 Excel。请帮助我摆脱困境。我试图将这些数据读入数据集，但它不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:54:48.600

请发送 xml 示例以获取更多信息。

您的代码将 xml 加载到数据集中，因此，如果您的 xml 没有从 DataSet 导出，您可以使用 LinqToXml。例如：

xml:

```
<?xml version="1.0" encoding="utf-8" ?>
<rss version="2.0">
<channel>
    <title>Business Logic Toolkit for .NET</title>
    <link>http://www.bltoolkit.net</link>
    <description />
    <lastBuildDate>2009-01-11</lastBuildDate>
    <item>
        <title>Version 3.1 released</title>
        <link>http://www.bltoolkit.net/Download.htm</link>
        <description>See &lt;a href="http://www.bltoolkit.net/Download.htm"&gt;change log&lt;/a&gt;</description>
        <pubDate>2009-01-11</pubDate>
    </item>
    <item>
        <title>Version 3.0 released</title>
        <link>http://www.bltoolkit.net/Download.htm</link>
        <description>See &lt;a href="http://www.bltoolkit.net/Download.htm"&gt;change log&lt;/a&gt;</description>
        <pubDate>2008-05-21</pubDate>
    </item>
    <item>
        <title>New examples</title>
        <link>http://www.bltoolkit.net/Doc/</link>
        <description>See the following &lt;a href="http://www.bltoolkit.net/Doc/"&gt;link&lt;/a&gt;</description>
        <pubDate>2008-05-10</pubDate>
    </item>
</channel>
</rss> 
```

此代码获取所有 RSS 项目的标题

```
var path = @"D:\rss.xml";
var doc = XDocument.Load(path);
rssTitles = doc.Root.Descendants("item").Elements("title").Select(el => el.Value); 
```

结果：

```
Version 3.1 released
Version 3.0 released
New examples 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:48:01.177

```
<Roles>
  <BalanceSheets RoleURL="http://fluor.com/role/BalanceSheets" RoleDefination="0020 - CONDENSED CONSOLIDATED BALANCE SHEET">
    <Taxonomys>
      <StatementOfFinancialPositionAbstract TaxonomyPresentationId="StatementOfFinancialPositionAbstract">
        <StatementLineItems TaxonomyPresentationId="StatementOfFinancialPositionAbstract">
          <LiabilitiesAndStockholdersEquityAbstract TaxonomyPresentationId="StatementLineItems">
            <CommitmentsAndContingencies TaxonomyPresentationId="LiabilitiesAndStockholdersEquityAbstract" />
            <OtherLiabilitiesNoncurrent TaxonomyPresentationId="LiabilitiesAndStockholdersEquityAbstract" />
            <NonRecourseProjectFinanceDebtNoncurrent TaxonomyPresentationId="LiabilitiesAndStockholdersEquityAbstract" />
            <LongTermDebtNoncurrent TaxonomyPresentationId="LiabilitiesAndStockholdersEquityAbstract" />
            <LiabilitiesCurrentAbstract TaxonomyPresentationId="LiabilitiesAndStockholdersEquityAbstract">
              <BillingsInExcessOfCost TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <LiabilitiesCurrent TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <AccountsPayable TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <BridgeLoan TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <NonRecourseProjectFinanceDebtCurrent TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <EmployeeRelatedLiabilities TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <OtherAccruedLiabilities TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
              <ConvertibleDebtCurrent TaxonomyPresentationId="LiabilitiesCurrentAbstract" />
            </LiabilitiesCurrentAbstract>
          </LiabilitiesAndStockholdersEquityAbstract>
        </StatementLineItems>
      </StatementOfFinancialPositionAbstract>
    </Taxonomys>
  </BalanceSheets>
</Roles> 
```

# android - 使用可绘制图像和从 sdcard 加载时的不同尺寸

> ID：10748752
> 
> 赞同：0
> 
> 时间：2012-05-25T05:11:03.357
> 
> 标签：android, imageview

我有一个应用程序，我在其中设置图像视图的背景。如果我将图像保存在 re/drawable(s) 文件夹中，一切正常，但如果我将相同的图像保存在 sdcard 中并从那里加载以设置背景，那么图像的尺寸就会不同。

之前有人问过类似的[问题](https://stackoverflow.com/questions/9064808/different-rendering-when-using-drawable-and-image-resource-imagebutton-androi)，但仍然没有答案。任何人都可以对这个话题有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:18:08.200

如果我们将图像放在 res/drawable(s) 文件夹中，那么 android 会根据目标设备选择合适的图像，并且如果需要，系统也会进行缩放。因此，如果您将图像放入 sdcard 中，则系统不会对图像进行任何缩放。

# java - JasperReports：动态 I18n

> ID：10748760
> 
> 赞同：2
> 
> 时间：2012-05-25T05:11:31.700
> 
> 标签：java, jasper-reports

例如，我在 ResourceBundle 中有这样的字符串：

```
some.string.1=String 1
some.string.2=String 2
some.string.3=String 3 
```

在 JasperReports 中，我必须根据其他一些参数 $P{t} 打印这些字符串。我可以这样做 - 将这样的表达式放入字段中：

```
($P{t} == 1 ? $R{some.string.1} : ($P{t} == 2 ? $R{some.string.2} : $R{some.string.3})) 
```

有没有办法以这种方式实现它：

```
$R{some.string.$P{t}} 
```

?

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T16:38:05.997

用这个：

```
str("some.string." + $P{t}) 
```

我用过类似的东西......虽然我不记得确切地使用过这个。它应该适用于您所描述的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T02:40:17.680

您可以实现一个 java 方法来执行此操作并将调用直接嵌入到您的 jasper 报告中。

# java - 在基于 id 设置值时对 jsp 行为感到困惑

> ID：10748761
> 
> 赞同：1
> 
> 时间：2012-05-25T05:11:35.903
> 
> 标签：java, javascript, jquery, jsp, spring-mvc

在我关于 readyfunction 的 jsp 中，我正在为一些变量设置值

```
$(document).ready(function() {
........////some code.......
var compCode=$('#companyCode').val();
........////some code.......
$("#countrySectorinMemInfo").val(countrySec);   
........////some code.......
}); 
```

我的控制器正在返回一个值，比如 ABC，我正在使用，

```
<input type="hidden" value="${ABC}" id="companyCode"> 
```

假设，如果我的 jsp 有两个以上 id 与“countrySectorinMemInfo”相同的字段

那么如何“ $("#countrySectorinMemInfo").val(countrySec);" 将工作......

谁能解释我...？？？

两个值都将被设置或仅设置最后一个值...?????

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:13:39.277

具有相同 ID 的多个元素在[HTML中是](http://www.w3.org/TR/html4/)[非法](http://validator.w3.org)的。浏览器行为未指定。给他们一个不同的ID。如果您需要一个通用选择器，请使用or代替。`name``class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:18:57.073

我同意@BalusC

您应该使用类名而不是 ID。我认为所有的 JavaScript 库都有通过类名获取元素的方法。jQuery方式：

```
// Get all elements with class 'myclass'
var nodes = $('.myclass'); 
```

YUI 2.7.0 选择器方式：

```
// Get all elements with class 'myclass'
var nodes = YAHOO.util.Selector.query('.myclass'); 
```

YUI 2.7.0 getElementsByClass 方式：

```
// Get all elements with class 'myclass'
var nodes = YAHOO.util.Dom.getElementsByClassName('myclass'); 
```

# php - 使用 PHP 保存 PDF 文件

> ID：10748768
> 
> 赞同：0
> 
> 时间：2012-05-25T05:12:00.753
> 
> 标签：php, upload

我在将 PDF 文件保存到服务器上的文件夹时遇到问题。该代码一次有效，但现在无效。我想要它做的是检查是否有人在提交表单时尝试上传 PDF，如果文件字段中有 PDF，它会上传它，然后将路径保存到 mysql 数据库。代码如下：

```
 if (!empty($_FILES['pdf'])){
          $idir = "../files/PDF/"; //my directory file is supposed to be saved in
          $randomd=rand(0000000,9999999); //creates a random number as filename
          $domain = "http://".$_SERVER['HTTP_HOST'];  
          $file_ext = strrchr($_FILES['pdf']['name'], '.'); grabs file extension. my code checked if the file was a pdf a different way and neither seems to work.
          $destination=$randomd.$file_ext; //new filename
          if ($file_ext=='pdf') {
                move_uploaded_file($_FILES['pdf']['tmp_name'], "$idir" . $destination);
                $pdf= $domain."/files/PDF/".$destination;                                             } else { echo("File type not supported.");  
mysql_query("UPDATE tbl_listings SET pdf='$pdf' WHERE listing_id='$lid'");
                                                                            } 
```

if not empty 不起作用，它总是尝试上传文件，但是当我检查文件夹时，里面什么都没有，它不会更新 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:30:39.000

`$_FILES['pdf']`永远不会为空（当表单提交时），无论文件是否被选中，它都会返回一个数组。

检查`$_FILES['pdf']['error']`，它将是`4`当没有文件上传时。

# product - 将早期影响产品购物车版本从“3.11 a”更新到 4.5

> ID：10748772
> 
> 赞同：0
> 
> 时间：2012-05-25T05:12:15.283
> 
> 标签：product, cart

我正在使用 Early Impact Product Cart 版本 3.11a 的网站上工作。现在我需要将版本更新到最新版本 4.5。

谁能建议我更新产品购物车版本的步骤。

等待您的回复。

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T18:46:21.317

为了更新到 ProductCart 版本 v4.5，您需要确保您已加入[ProductCart 支持和更新计划](https://www.earlyimpact.com/eistore/productcart/pc/ProductCart-Technical-Support-Updates-Plan-124p463.htm)。注册后，您将首先使用 ProductCart 控制面板中帮助菜单下的“检查更新”链接下载 ProductCart 的“下一个”版本。应用更新后，您应该重复该过程，直到您收到一条消息，指出没有更多可用更新（即 - 您处于最新版本）。

有关更新和升级过程的更多信息，请参阅以下[WIKI 文章](http://wiki.earlyimpact.com/?do=search&id=updates&fulltext=Search)。

# jquery - jquery flot 在 x 轴上打印日期

> ID：10748773
> 
> 赞同：0
> 
> 时间：2012-05-25T05:12:32.437
> 
> 标签：jquery, python, django, flot

在 django 中，我正在使用`datetime.date()`对象创建数据系列，如下所示：

`data.append([ddate, daily_score])`（ddate 是 datetime.date() 对象，daily_score 是整数）

如何通过以下方式在 jquery flot 图中格式化它们？

“日/月”？

我正在这样做：

```
xaxis:{
       mode: 'time',
       timeformat: '%d/%m',
       minTickSize: [1, "day"]
}, 
```

但我没有显示图表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:41:29.397

如果您阅读[flot 文档](http://flot.googlecode.com/svn/trunk/API.txt)，您会看到时间格式应该是 Javascript 时间戳，即自[纪元](http://en.wikipedia.org/wiki/Unix_epoch)以来的毫秒数（1970 年 1 月 1 日 00:00:00 UTC）。你传递了一个`datetime`对象，所以我想这是你的问题。

不过，您可以轻松地将日期转换为自纪元以来的毫秒数：

```
import datetime
import time

msdate = time.mktime(datetime.date(2012, 5, 25).timetuple()) * 1000 
```

在我写了这个建议之后，我看到 flot 文档也有一个关于如何在 python 中做的建议：

```
import datetime
import calendar

calendar.timegm(datetime.date(2012, 5, 25).timetuple()) * 1000 
```

否则，据我所知，您的语法看起来还不错。

# jsp - 参数化 struts2 s:iterate tag

> ID：10748774
> 
> 赞同：0
> 
> 时间：2012-05-25T05:12:33.313
> 
> 标签：jsp, jakarta-ee, struts2, loops

我使用 struts2 "s:iterate" 标签。我的收藏名称不断变化。所以我想使用一个表达式来指定值。“s:iterate”标签中的“value”不允许根据 tld 表达式。

有没有办法保持值变量，而不是静态值。

```
 <s:iterator value="${param.listName}" status="status" > 
    </s:iterator> 
```

类似于上面的东西。我想使用请求参数中的 listName 将集合的名称指定给迭代标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:43:18.203

你的意思是这样的：

```
<s:iterator var="reportHeader" value="%{#session.myList}" status="headerNumber" >
</s:iterator> 
```

是的，就像一个魅力。

更新：

`myList`in`session.myList`是`String`代表键的a。

所以相应的动作代码将是

```
public String execute(){
  HttpSession session = ServletActionContext.getRequest().getSession();
  session.setAttribute("myList", new ArrayList<String>());
  return Action.SUCCESS;
} 
```

# iphone - CGBitmapContextCreate 上的警告

> ID：10748776
> 
> 赞同：0
> 
> 时间：2012-05-25T05:12:37.900
> 
> 标签：iphone, ios

```
CGColorSpaceRef colorSpace = CGImageGetColorSpace([UIImage imageNamed:@"shirtWhite.jpeg"]); 
    CGContextRef context = CGBitmapContextCreate (nil,
                                                  width,
                                                  height,
                                                  CGImageGetBitsPerComponent(imageToTest.image),
                                                  CGImageGetBytesPerRow(imageToTest.image),
                                                  colorSpace,
                                                  CGImageGetAlphaInfo(imageToTest.image)); 
```

我在传递图像的每一行都收到警告。警告是“警告：从不兼容的指针类型传递 'CGImageGetColorSpace' 的参数 1

警告：从不兼容的指针类型传递“CGImageGetBitsPerComponent”的参数 1

"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:15:09.177

已解决：通过 CGImage 而不是 image

# javascript - 如何在发布响应中访问 js 值？

> ID：10748777
> 
> 赞同：0
> 
> 时间：2012-05-25T05:12:38.383
> 
> 标签：javascript, jquery

我正在发出 jquery 发布请求以从服务器获取部分 html 代码。服务器 get_info.php 上有一个文件，它为不同的要求打印 html 代码。我正在使用以下代码来执行此操作：

```
function check(inf_type) {
    $.ajax({
        type: 'POST',
        url: "get_info.php",
        data: { "sequence_no" : 1 },
        success: function(data) {
            // how can i use value of variable "inf_type" here.
            // here, the variable "data" contains HTML code.
        },
        dataType: 'text'
    });
} 
```

函数 check() 接受一个参数**inf_type**，其中包含随机字符串，服务器根据该字符串识别要打印的 html 代码。现在，我想根据这个**inf_type**处理 POST 响应。如何在 POST 响应函数中访问**inf_type变量的值？**函数 check() 被更频繁地调用，这就是为什么我不能将**inf_type**变量值放在任何全局变量中。我能做些什么来实现这一目标？请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:16:22.390

您可以在 Success 函数中使用 info_type 变量。参数 info_type 的范围仍然存在于您的成功函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:17:36.433

您可以在成功或错误函数中直接使用该变量。

```
function check(inf_type) {
    $.ajax({
        type: 'POST',
        url: "get_info.php",
        data: { "sequence_no" : 1 },
        success: function(data) {
            alert(inf_type); //inf_type is available here.
        },
        dataType: 'text'
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:17:53.733

您可以通过`inf_type`函数的参数访问它`check()`：

```
function check(inf_type) {
    $.ajax({
        type: 'POST',
        url: "get_info.php",
        data: { "sequence_no" : 1 },
        success: function(data) {
            if (inf_type == 0) {
                // do something with data
            } else {
                // do something else
            }
        },
        dataType: 'text'
   }); 
```

}

之所以可行，是因为内部函数（成功回调）可以访问外部函数（检查）中的变量。有关更多详细信息，请参阅此答案：[https ://stackoverflow.com/a/111200/69868](https://stackoverflow.com/a/111200/69868)

**编辑** 这假定 inf_type 在每次调用`check()`. 详细信息在上面提到的链接中进行了解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T05:16:41.133

首先，您必须将**inf_type**发送到服务器以获得特定值才能返回，如下所示：

```
function check(inf_type) {
 $.ajax({
    type: 'POST',
    url: "get_info.php",
    data: { "sequence_no" : 1, whatToSearch : inf_type }, // i added
    success: function(data) {
         //$(selector).html(data);//where you want to show the data
        // how can i use value of variable "inf_type" here.
        // here, the variable "data" contains HTML code.
    },
    dataType: 'text'
 });
} 
```

# android - android中的设备方向缺少动态添加的图像？

> ID：10748779
> 
> 赞同：2
> 
> 时间：2012-05-25T05:12:57.187
> 
> 标签：android, android-imageview, device-orientation

下面的代码是动态创建图像视图并在单击按钮时添加到其父布局。这很好用。当我改变设备方向时，一切都消失了。即，添加图像后，如果我更改设备方向，则添加的图像丢失。为什么？更改设备方向后如何取回图像？

```
 @Override
public void onClick(View v) {
    //create an imageview
    ImageView img = new ImageView(getApplicationContext());

    //set layout parameters
    img.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT)); 

    //set image source
    img.setImageResource(R.drawable.back);

    //add imageview to parent layout
    parentView.addView(img);        

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:20:09.380

你可以用这种方式处理它

1 - onSaveInstanceState() 回调

例如：[使用 Save Instance State](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state) [http://android-er.blogspot.in/2011/09/onsaveinstancestate-and.html保存 Android Activity 状态](http://android-er.blogspot.in/2011/09/onsaveinstancestate-and.html)

2- onRetainNonConfigurationInstance() 与 getLastNonConfigurationInstance()

例如：[getLastNonConfigurationInstance()](https://stackoverflow.com/questions/5994801/android-getlastnonconfigurationinstance)

3 - 活动中的 android:configChanges 和 orverirding onConfigChange 活动 ex：http: [//developer.android.com/resources/articles/faster-screen-orientation-change.html](http://developer.android.com/resources/articles/faster-screen-orientation-change.html) [活动在轮换时重启 Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

根据您的需要选择一种方式...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:16:00.020

如果您不想影响布局，那么只需将此标签添加到您的 xml 文件中。

```
android:configChanges="orientation|keyboardHidden" 
```

这将有助于更改您的布局，但不会影响其他任何事情。

```
 <activity
        android:label="@string/app_name"
        android:name=".YourActivity" android:configChanges="orientation|keyboardHidden"/> 
```

# iphone - 检查核心数据中是否存在条目并将其替换为目标 c 中的唯一值

> ID：10748780
> 
> 赞同：0
> 
> 时间：2012-05-25T05:13:17.213
> 
> 标签：iphone, objective-c, xcode, core-data

我的一个应用程序中有一个核心数据。所有数据都是从服务器填充的。有时我必须检查来自服务器的数据是否已经存在于核心数据中。如果它已经存在，只需替换它。检查可以用我为每个条目拥有的唯一值来完成。我怎样才能做到这一点？这就是我所做的：

```
` for(int i=0;i<[ar count];i++){
            NSFetchRequest * request = [[NSFetchRequest alloc] init];
         NSManagedObjectContext *context=[Server serverInfo].context;

            [request setEntity:[NSEntityDescription entityForName:@"Coupon" inManagedObjectContext:context]];
            [request setPredicate:[NSPredicate predicateWithFormat:@"upc_code = %@",[ [ar objectAtIndex:i]objectForKey:@"upc_code"]]];
            NSUInteger count = [context countForFetchRequest:request error:nil];
            [request release];
          //  [context ]

        if (count > 0){
            NSLog(@"found");}' 
```

这里 ar 是从服务器获取的数组。上下文是用户有时可以在服务器的条目中进行编辑。我需要服务器中的所有数据与设备同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:25:56.137

不要做 a `countForFetchRequest`，而是做`executeFetchRequest:error:`which 将返回一个带有结果的数组。这个数组应该有 0 个或 1 个结果，超过 1 个会不一致，因为我假设你`upc_code`是唯一的。

如果您有 0 个结果，请在您的上下文中创建一个新对象并设置其属性

如果您有 1 个结果，只需更新 executeFetchRequest:error 返回的该对象的属性：

最后保存您的上下文并完成

# javascript - JavaScript JQuery 隐藏/显示功能

> ID：10748783
> 
> 赞同：1
> 
> 时间：2012-05-25T05:13:44.560
> 
> 标签：javascript, jquery

所以最近我一直在研究一点点js。

所以，基本上，我的问题是我需要隐藏参数中传递的任何内容，或者如果它已经隐藏则显示它。

这是我的代码：

```
<script type='text/javascript'>
<!--
function toggleReport(table){
//the table argument is the table's id
alert(table);                    //to check that the name of the table is right
if($('#table').is(':visible')){ //check if visible
    $('#table').hide();     //if so, hide it
    alert('hide');          //send a message that it is now being hidden
}else{                          //if already hidden
alert('show');                  //send a message that it is now being shown
$('#table').show();             //show the table
}

}
//-->
</script> 
```

但是，它不起作用....它正在发送警报，一切都是正确的，但是，它不会隐藏或显示表格....

但是，如果我尝试这样做：

```
<script type='text/javascript'>
<!--
function toggleReport(){
//removed the argument
alert('table_1');
if($('#table_1').is(':visible')){
    $('#table_1').hide();
    alert('hide');
}else{
alert('show');
$('#table_1').show();
}

}
//-->
</script> 
```

有用！为什么会这样？因为我将在网站上有很多表格和其他需要隐藏和显示的东西，我不想为每个表格创建一个新功能..：/

请帮我！

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:26:33.577

非常简单地使用**toggle()**代替 show()/hide()，**toggle()**使元素在隐藏时可见，如果元素可见则隐藏。

```
<script type='text/javascript'>;
function toggleReport(element_ID){
$("#"+element_ID).toggle();
}
</script> 
```

如果您想对元素 ID 进行硬编码，而不是使用以下脚本

```
<script type='text/javascript'>
function toggleReport(){
$("#table_1").toggle();
}
</script> 
```

干杯，别忘了给我的答案投票:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:18:10.007

如果要传入元素引用，请将其用作选择器：

```
function toggleReport(table){
    $(table).toggle();
} 
```

请注意，我正在使用[`.toggle()`](http://api.jquery.com/toggle/)，它将完全按照您尝试手动执行的操作。如果你想记录新的状态，你可以在回调中这样做：

```
function toggleReport( table ) {
    $( table ).toggle('fast', function(){
        console.log( "Element is visible? " + $(this).is(":visible") );
    });
} 
```

请注意，如果您传入元素的 ID，则需要修改选择器：

```
$( "#" + table ).toggle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:18:52.283

[为此，有一个预建的 Jquery 函数。](http://api.jquery.com/toggle/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T05:19:55.017

您可以使用[切换](http://api.jquery.com/toggle/)功能来实现这一点....

```
$(selector).toggle(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T05:24:11.080

**演示** [http://jsfiddle.net/uW3cN/2/](http://jsfiddle.net/uW3cN/2/)

**带有参数的演示** [http://jsfiddle.net/uW3cN/3/](http://jsfiddle.net/uW3cN/3/)

良好的阅读 API 切换：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

**代码**

```
function toggleReport(){
//removed the argument
$('#table_1').toggle();

} 
```

​<strong>另一个示例 html 在这里[http://jsfiddle.net/uW3cN/3/](http://jsfiddle.net/uW3cN/3/)

```
function toggleReport(tableid){
//removed the argument
$('#'+tableid).toggle();

} 
```

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-25T06:12:54.160

您在原始函数中犯的错误是您实际上没有使用传递给函数的参数。您选择`"#table"`的只是选择页面上 ID 为“table”的元素。它根本没有引用您的变量。

如果您打算将 ID 传递给选择器，则应编写`jQuery("#" + table)`. 如果 table 是对 DOM 元素的引用，您将编写`jQuery(table)`（没有引号和井号）。

# java - 卡在正则表达式中

> ID：10748785
> 
> 赞同：0
> 
> 时间：2012-05-25T05:13:48.357
> 
> 标签：java, android, regex

我有 3 个字符串，每个字符串包含 2 个字段和 2 个值。我需要字符串的正则表达式，以便获取数据。这是3个字符串：

```
TTextRecordByLanguage{Text=Enter here the amount to transfer from your compulsory book saving account to your compulsory checking account; Id=55; }

TTextRecordByLanguage{Text=Hello World, CaribPayActivity!; Id=2; }

TTextRecordByLanguage{Text=(iphone); Id=4; } 
```

这两个字段是`Text`and `Id`，所以我需要一个表达式来获取`Text`字段和分号 ( `;`) 之间的数据。确保包含特殊符号和任何数据。

**更新 ：：**

我试过的......

```
Pattern pinPattern = Pattern.compile("Text=([a-zA-Z0-9 \\E]*);");
                        ArrayList<String> pins = new ArrayList<String>();
                        Matcher m = pinPattern.matcher(soapObject.toString());
                        while (m.find()) {
                            pins.add(m.group(1));
                            s[i] = m.group(1);

                        }
                        Log.i("TAG", "ARRAY=>"+ s[i]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:32:55.613

我建议这样的RE：

```
Text=.*?; 
```

例如：最后一个字符串的返回应该是

> 文字=（iphone）；

那么你可以消除**Text=**和**;** 超出字符串，因为您只想要内容。

# textmate - 在 SublimeText2 中保存 Textmate 时重新格式化和检查语法的等价物是什么？

> ID：10748789
> 
> 赞同：2
> 
> 时间：2012-05-25T05:13:56.417
> 
> 标签：textmate, sublimetext2

我最近从 Textmate 切换到了 SublimeText2，我一直很喜欢它。但是 Textmate 有一些我不知道 SBT2 的功能。

1.  选择一个代码块并按下`CMD+OPTION+[`重新格式化选定的块。
2.  在保存文件`CMD+S`时，ruby 或 jquery 或 coffee-script 等。Texmate 检查代码的语法。

如何对 SBT2 做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:48:40.333

要检查保存时的语法，您可以使用[SublimeLinter](https://github.com/Kronuz/SublimeLinter)并重新格式化代码，您可以使用以下内容，具体取决于您使用的语言：

*   [HTML整洁](https://github.com/welovewordpress/SublimeHtmlTidy)
*   [Sublime-HTMLPrettify](https://github.com/victorporof/Sublime-HTMLPrettify) (HTML, JS, CSS)
*   [漂亮的 JSON](https://github.com/dzhibas/SublimePrettyJson)
*   [PHPTidy](https://github.com/welovewordpress/SublimePhpTidy)
*   [PythonTidy](https://github.com/witsch/SublimePythonTidy)
*   [美化红宝石](https://github.com/CraigWilliams/BeautifyRuby)

这里还有很多其他类似和其他有用的扩展和插件：[http ://wbond.net/sublime_packages/community](http://wbond.net/sublime_packages/community)

[所有这些都可以使用Package Control](http://wbond.net/sublime_packages/package_control)轻松安装并保持最新。

# php - SQL LIKE - 仅处理单个字母

> ID：10748793
> 
> 赞同：0
> 
> 时间：2012-05-25T05:14:30.207
> 
> 标签：php, mysql, sql, sql-like

我在 mySQL 上运行了一个 SQL LIKE 查询，它在我的本地开发服务器上运行良好，但是在生产服务器上它只适用于单个字母；即，如果我输入的单词长度超过一个字母，则不会返回任何结果。

任何想法为什么以及如何解决它？

先感谢您。

```
/**
* Searches all current vehicle listings for matches to given search string.
* @param string - Search keyword(s). Warning: If search string is empty all current vehicles are returned.
* @return array - Resulting table rows containing vin, imageFile, description, kms, auctioneerName, city, time.
*/

public function searchVehicles($search) { // 
  // Build up initial SQL query. Sub query returns all current vehicles
  $query = "SELECT * FROM (SELECT vehicles.auctionId, vin, imageFile, CONCAT_WS(' ', year, makeName, modelName) as description, kms, auctioneerName, city, time FROM vehicles, models, makes, auctions, auctioneers, locations WHERE time > NOW() AND vehicles.modelId = models.modelId AND models.makeId = makes.makeId AND vehicles.auctionId = auctions.auctionId AND auctions.auctioneerId = auctioneers.auctioneerId AND auctions.locationId = locations.locationId) AS results WHERE";
  $keywords = explode(" ", $search); // Break search into keywords

  // Loop through each keyword in the search to build up SQL query
  $firstLoop = true; // Initial loop flag
  foreach ($keywords as $keyword) {
     if (!$firstLoop) { // Check if this is not the first loop
        $query = $query . " AND"; // Then: Add extension statement to query
     } else {$firstLoop = false;} // Otherwise: Set flag to false

     // Add each keyword search to the query ensuring case insensitivity by converting to uppercase
     $query = $query . " UPPER(description) LIKE UPPER('%" . $this->escape($keyword) . "%')";
  }

  // Add ordering SQL
  $query = $query . " ORDER BY time";

  // Run query and return results (if any)
  return $this->query($query);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:18:16.060

鞋面应该在里面。

```
$query = $query . " UPPER(description) LIKE CONCAT('%',UPPER(" . $this->escape($keyword) . "),'%')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:47:36.583

```
$query = $query . " UPPER(description) LIKE '%" . strtoupper($this->escape($keyword)) . "%'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:23:56.163

尝试使用`COLLATE`

```
$query = $query . " description COLLATE utf8_general_ci like '" . $this->escape($keyword) . ")%'"; 
```

用于不区分大小写的搜索

# android - Android，如何限制 TextView 的宽度（并在文本末尾添加三个点）？

> ID：10748796
> 
> 赞同：368
> 
> 时间：2012-05-25T05:15:03.563
> 
> 标签：android, textview, ellipsis

我有一个`TextView`我想限制它的字符。实际上，我可以做到这一点，但我正在寻找的是如何在字符串末尾添加三个点 (...)。这表明文本一直在继续。这是我的 XML，但没有点，尽管它限制了我的文本。

```
<TextView 
        android:id                      = "@+id/tvFixture"
        android:layout_width            = "wrap_content"
        android:layout_height           = "wrap_content"
        android:layout_toLeftOf         = "@id/ivFixture_Guest"
        android:text                    = "@string/test_06"
        android:lines                   = "1"
        android:ems                     = "3"
        android:gravity                 = "right"
        style                           = "@style/simpletopic.black" 
        android:ellipsize="end"/> 
```

* * *

## 回答 #1

> 赞同：800
> 
> 时间：2012-05-25T05:19:05.667

**已弃用：**

`android:singleLine="true"`在您的 Textview 中再添加一个属性

**更新：**

```
android:ellipsize="end" 
android:maxLines="1" 
```

* * *

## 回答 #2

> 赞同：179
> 
> 时间：2015-05-04T12:05:19.270

`TextView`以下是我通过尝试将 a 强制为单行（有和没有三个点）的各种选项而学到的。

![在此处输入图像描述](../Images/cdc5e55e2ed3d491f1cbc3e0719214ff.png)

# 安卓：m​​axLines="1"

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:text="one two three four five six seven eight nine ten" /> 
```

这只是将文本强制为一行。任何额外的文本都被隐藏。

有关的：

*   [机器人：最大线](http://developer.android.com/reference/android/widget/TextView.html#attr_android:maxLines)
*   [android:singleLine](http://developer.android.com/reference/android/widget/TextView.html#attr_android:singleLine)（注意[这个](https://stackoverflow.com/questions/30028697/is-singleline-depricated-or-not-in-android)和[这个](http://radleymarx.com/blog/15-quirky-android-xml-layout-parameters-to-know/)）
*   [机器人：线](http://developer.android.com/reference/android/widget/TextView.html#attr_android:lines)

# 椭圆形=“结束”

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:ellipsize="end"
    android:text="one two three four five six seven eight nine ten" /> 
```

这会切断不适合的文本，但通过添加省略号（三个点）让用户知道文本已被截断。

有关的：

*   ellipsize="start" (...aaabbbccc)
*   ellipsize="middle" (aaa...ccc)
*   [android: Ellipsise ，选项的含义](https://stackoverflow.com/questions/8739721/android-ellipsise-meaning-of-the-options)

# 椭圆尺寸=“选框”

```
<TextView
    android:id="@+id/MarqueeText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLines="1"
    android:singleLine="true"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:text="one two three four five six seven eight nine ten" /> 
```

这使得文本在 TextView 上自动滚动。请注意，[有时](https://stackoverflow.com/a/3333855/3681880)需要在代码中进行设置：

```
textView.setSelected(true); 
```

假设`android:maxLines="1"`并且`android:singleLine="true"`应该做基本相同的事情，并且由于 singleLine[显然已被弃用](https://stackoverflow.com/questions/30028697/is-singleline-depricated-or-not-in-android)，我宁愿不使用它，但是当我把它拿出来时，选框不再滚动了。不过`maxLines`，取出并不影响它。

有关的：

*   [Android 中的字幕文本](https://stackoverflow.com/questions/2182578/marquee-text-in-android)

# Horizo​​ntalScrollView 与 scrollHorizo​​ntally

```
<HorizontalScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/horizontalScrollView">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:maxLines="1"
        android:scrollHorizontally="true"
        android:text="one two three four five six seven eight nine ten" />
</HorizontalScrollView> 
```

这允许用户手动滚动查看整行文本。

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2012-05-25T05:20:16.010

在布局文件中尝试 TextView 的这个属性..

```
android:ellipsize="end"
android:maxLines="1" 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-11-06T10:46:55.253

我认为您想将宽度限制为一行而不是按字符限制？由于`singleLine`已弃用，您可以尝试一起使用以下内容：

```
android:maxLines="1"
android:scrollHorizontally="true"
android:ellipsize="end" 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-05-16T06:24:42.810

例如。您可以使用

```
android:maxLength="13" 
```

这会将 texview 长度限制为 13，但问题是如果您尝试添加 3 个点（...），它不会显示它，因为它将是 textview 长度的一部分。

```
 String userName;
     if (data.length() >= 13) {
            userName = data.substring(0, 13)+ "...";

     } else {

            userName = data;

    }
        textView.setText(userName); 
```

除此之外，您必须使用

```
 android:maxLines="1" 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-08-29T22:23:23.897

采用

*   `android:singleLine="true"`
*   `android:maxLines="1"`
*   `app:layout_constrainedWidth="true"`

这就是我的完整`TextView`外观：

```
 <TextView
    android:id="@+id/message_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginStart="5dp"
    android:maxLines="1"
    android:singleLine="true"
    android:text="NAME PLACEHOLDER MORE Text"
    android:textColor="@android:color/black"
    android:textSize="16sp"

    android:textStyle="bold"
    app:layout_constrainedWidth="true"
    app:layout_constraintEnd_toStartOf="@id/message_check_sign"
    app:layout_constraintHorizontal_bias="0"
    app:layout_constraintStart_toEndOf="@id/img_chat_contact"
    app:layout_constraintTop_toTopOf="@id/img_chat_contact" /> 
```

![<code>TextView</code>的图片](../Images/89169407caa18cfd003be0313a269312.png)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-01-18T11:05:24.620

我正在使用水平 Recyclerview。
1) 在 CardView 中，TextView 在使用时会垂直扭曲

```
android:ellipsize="end"
android:maxLines="1" 
```

检查粗体 TextViews Wyman Group, Jaskolski... [![在此处输入图像描述](../Images/25480e325a62b2322aab841e0d619737.png)](https://i.stack.imgur.com/vU7AE.png)

2）但是当我使用 singleLine 和 ellipsize -

```
android:ellipsize="end"
android:singleLine="true" 
```

检查粗体 TextViews Wyman Group, Jaskolski... [![在此处输入图像描述](../Images/5678c3f0d5736149ffa6dd0b2e4f926e.png)](https://i.stack.imgur.com/wGMde.png)

第二个解决方案对我很有效（使用 singleLine）。我还测试了操作系统版本：4.1 及更高版本（直到 8.0），它工作正常，没有任何崩溃。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-11-04T01:36:39.077

代码：

```
TextView your_text_view = (TextView) findViewById(R.id.your_id_textview);
your_text_view.setEllipsize(TextUtils.TruncateAt.END); 
```

xml:

```
android:maxLines = "5" 
```

例如

在马太福音第 13 章，门徒问耶稣为什么用比喻对群众说话。他回答说：“天国的奥秘，曾赐给你们知道，但没有赐给他们。

输出：在马太福音第 13 章中，门徒问耶稣为什么用比喻对群众说话。他回答说：“已经让你知道...

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-01-15T11:45:49.057

您可以限制 textview 的字符数并在文本后添加 (...)。假设您只需要显示 5 个字母，然后您需要显示 (...)，只需执行以下操作：

```
String YourString = "abcdefghijk";

if(YourString.length()>5){

YourString  =  YourString.substring(0,4)+"...";

your_text_view.setText(YourString);
}else{

 your_text_view.setText(YourString); //Dont do any change

} 
```

一点小技巧^_^。虽然它不是一个好的解决方案。但是一项对我有用的工作：D

**编辑：** 根据您的有限编号，我添加了检查较少字符。的字符。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-02-17T15:12:39.243

我通过使用得到了想要的结果

```
android:maxLines="2"
android:minLines="2"
android:ellipsize="end" 
```

诀窍是将 maxLines 和 minLines 设置为相同的值......而且不仅仅是 android:lines = "2"，不要这样做。此外，您正在避免任何不推荐使用的属性。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-03-01T09:22:24.993

您需要将以下行添加到 textview 的布局中

```
android:maxLines="1"
android:ellipsize="end"
android:singleLine="true" 
```

希望这对你有用。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2017-05-05T09:31:40.983

为了使用**android:ellipsize**属性，您必须限制*TextView的***布局宽度**，以便*文本*超出 TextView 视图的范围。

 **所以，**android:layout_width**属性在这里起着关键作用，相应地设置它。

一个*例子*可以是：

```
<TextView        
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:ellipsize="end"
    android:text="This is a very long text to be displayed"
    android:textSize="12sp"
    android:maxLines="1"            
     /> 
```

现在，如果android : *text* **="This is a very long text to be** display" 中的文本从 TextView 中以**android:layout_width="120dp" 消失**，则**android:ellipsize="end"**将截断*文本*并在它之后放置**...（3 个点）**。ie ***This is very long...***会显示在TextView中。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-07-18T12:30:20.857

```
 <TextView
            android:id="@+id/product_description"
            android:layout_width="165dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="2dp"
            android:paddingLeft="12dp"
            android:paddingRight="12dp"
            android:text="Pack of 4 summer printed pajama"
            android:textColor="#d2131c"
            android:textSize="12sp"
            android:maxLines="2"
            android:ellipsize="end"/> 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2012-05-25T05:21:49.053

我认为您给出了文本视图的固定高度和宽度。然后您的解决方案将起作用。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-05-25T05:22:02.747

您可以在 xml 中写下这一行`textview`：

```
android:singleLine="true" 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-11-07T10:15:44.233

@AzharShaikh 的方法效果很好。

```
android:ellipsize="end"
android:maxLines="1" 
```

但是我意识到 TextView 会被单词截断（默认）的麻烦。显示我们是否有如下文本：

***测试 long_line_without_any_space_abcdefgh***

TextView 将显示：

***测试...***

我找到了解决这个问题的解决方案，用 unicode 不间断空格字符替换空格，它使 TextView 换行字符而不是单词：

```
yourString.replace(" ", "\u00A0"); 
```

结果：

***测试 long_line_without_any_space_abc...***

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-11-24T19:30:15.350

**简单的三个点**

```
android:layout_width="100dp" <!--your dp or match_parent or 0dp>
android:maxLines="2" <!--count your line>
android:ellipsize="end" 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2021-08-28T08:51:16.640

如果文本太长，在文本末尾添加“...”的步骤：

1.  检查文本宽度是否恒定
2.  添加这两行 `android:ellipsize="end" android:maxLines="1"`

约束布局中textview的完整代码：

```
<TextView
        android:layout_width="75dp"
        android:layout_height="wrap_content"
        android:ellipsize="end"
        android:maxLines="1"
        android:textSize="15sp"
        android:textAllCaps="false"
        android:textStyle="bold"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="parent" /> 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-11-07T10:11:35.850

在文本中添加这两行

```
android:ellipsize="end"
android:singleLine="true" 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-07-30T00:28:07.603

除了

```
android:ellipsize="end" 
android:maxLines="1" 
```

你应该设置

```
android:layout_width="0dp" 
```

也称为“匹配约束”，因为该`wrap_content`值只是扩展框以适应整个文本，而该`ellipsize`属性无法发挥作用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-11-06T21:37:34.090

你可以这样做`xml`：

```
<TextView 
    android:id="@+id/textview"
    android:maxLines="1" // or any number of lines you want
    android:ellipsize="end"
    /> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-05-31T05:17:01.787

设置`android:maxLength="8"`在`Textview`

如果你想设置 yourString >5。然后设置 textview 长度 5+3（对于三点）

```
if (yourString.length()>5) // 
    {
        textview.setText(yourString.substring(0,5)+"...");
    }
    else {
        textview.setText(title);
    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-06-01T15:05:52.517

1.设置静态`width like 7odp`

2.使用 `android:ellipsize="end"`

3.使用 `android:maxLines="1"`

4.使用 `android:singleLine="true"`

```
<TextView
        android:id="@+id/tv_status"
        **android:layout_width="70dp"**
        android:layout_height="wrap_content"
        android:layout_marginEnd="@dimen/padding_8"
        android:gravity="center|center_horizontal"
        android:includeFontPadding="false"
        android:textColor="@color/black_2a"
        android:textSize="@dimen/text_size_1"
        **android:ellipsize="end"
        android:maxLines="1"
        android:singleLine="true"**
        app:layout_constrainedWidth="true"
        app:borrowStatusText="@{item.lenders[0].status}"
        app:layout_constraintEnd_toStartOf="@id/iv_vector"
        app:layout_constraintTop_toTopOf="parent" /> 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2014-10-15T13:53:05.077

你只要换...

```
android:layout_width="wrap_content" 
```

使用下面的行

```
android:layout_width="match_parent" 
```

…………

```
 <LinearLayout
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_centerVertical="true"
       android:layout_marginLeft="10dp"
       android:layout_marginTop="10dp"
       android:layout_toRightOf="@+id/visitBox"
       android:orientation="vertical" >

             <TextView
                  android:id="@+id/txvrequestTitle"
                  android:layout_width="match_parent"
                  android:layout_height="wrap_content"
                  android:singleLine="true"
                  android:text="Abcdefghighiklmnon"
                  android:textAppearance="? 
                  android:attr/textAppearanceLarge"
                  android:textColor="@color/orange_color" />

   </LinearLayout> 
```**

# javascript - 在 JavaScript 中将字符串解析为 HTML

> ID：10748812
> 
> 赞同：1
> 
> 时间：2012-05-25T05:16:57.727
> 
> 标签：javascript, html, dom, html-parsing

所以，我有一个文本区域，用户应该在其中输入代码。

前任：`<div id="example">blar</div>`

我如何评估他们在 textarea 中作为 HTML（如在 DOM 中）输入的内容，而无需：

*   jQuery
*   必须创建一个新元素

例如：

代码：`<div id="ex">Blar</div>`

我的功能：

```
function parseCode(){
    var code = document.getElementById("code").value;
} 
```

我想获取价值并使其易于访问（例如`code.getElementsByTagName("div")[0].innerHTML`）；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:32:27.240

```
var ele = document.createElement('div');
ele.innerHTML = document.getElementById('code').value; 
```

这不会在页面本身上创建新元素，只会在内存中

# php - is_numeric($str) 用于数据库查询

> ID：10748816
> 
> 赞同：0
> 
> 时间：2012-05-25T05:17:30.300
> 
> 标签：php, sql, database, isnumeric

基本上我的问题是，如果我有一个数字字符串，并且我要将它与数据库进行比较，这是一种安全/安全的检查方式。或者我应该只是逃避我的数字变量以及我的字符串（就像我已经做的那样）？

例子：

```
<?php
    $id = $_POST['id'];
    if(is_numeric($id)){
        //database connectivity.    
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:20:25.853

“数据库”非常笼统，所以我假设您使用的是 MySQL。只要您将其插入`$id`到查询中，它就是安全的（使用`mysql_real_escape_string`或最好是准备好的语句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:39:35.597

“从 Id = ' 的 Tbl 中选择”。(int)$_POST['id'] ."'"

# sql-server-2008 - 开放式与 BCP

> ID：10748820
> 
> 赞同：1
> 
> 时间：2012-05-25T05:18:03.127
> 
> 标签：sql-server-2008, export-to-excel, bcp, export-to-csv, openrowset

我需要将数据从 Sql Server 2008 导出到 Excel/CSV 文件。

我有两个选择：

*   开放集
*   BCP

如果数据量大且安全性受到关注，哪个会是更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:43:03.983

这里有一些关于类似问题的好评论：[http](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=147861) ://www.sqlteam.com/forums/topic.asp?TOPIC_ID=147861 。

我倾向于 BULK INSERT，但实际上你能做的最好的事情就是双向尝试。然后您将能够比较哪个更快，并且您将更好地了解哪个更适合您的安全问题，因为您将知道必须解决哪些安全问题才能使其正常工作。

编辑：您正在尝试导出，所以显然 BULK INSERT 不起作用。我相信 BCP 将是您性能更高的选择，此外，如果您想进行批量导出，我认为这是您唯一的选择。我很确定 OPENROWSET 只允许批量导入 sql，但不允许导出。

请参阅：http: [//msdn.microsoft.com/en-us/library/ms175937.aspx](http://msdn.microsoft.com/en-us/library/ms175937.aspx)

# git - 如何在 Git 中合并两个提交？

> ID：10748821
> 
> 赞同：1
> 
> 时间：2012-05-25T05:18:06.060
> 
> 标签：git

我有这个

```
* [cf0149e] (HEAD, branch_2) more editing
* [8fcc106] some edit
|
|  * [59e643e] (branch_2b) branch 2b
| /
|/
|  * [0f4c880] (branch_2_a) branch 2a
| /
|/
*  [a74eb2a] checkout 1
*  [9a8dd6a] added branch_2 line
|
|
| * [bb903de] (branch_3) branch 3
|/
|
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

我想将这两者结合起来：

```
*  [a74eb2a] checkout 1
*  [9a8dd6a] added branch_2 line 
```

合而为一

```
*  [a74eb2a] This is old [a74eb2a] + [9a8dd6a] 
```

我尝试了更多我想提及的排列：reset、rebase、squash、edit。好像拉不下来 每当我成功合并它们时，合并只存在一个分支。例如，“branch_2”将以位于 HEAD~2 的所需组合结束。但是，“branch_2b”和“branch_2_a”仍然指向我要合并的两个提交。换句话说，我最终得到了一个新的提交，它是两个原始提交的合并。我想要的是让这两个提交中的所有分支现在都引用新的合并提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:32:21.887

在压缩这两个提交之后，你将得到一个全新的提交和自 squash 以来的历史，完全称为其他东西：

```
* [cf0149e] (HEAD, branch_2) more editing
* [8fcc106] some edit
|
|  * [59e643e] (branch_2b) branch 2b
| /
|/
|  * [0f4c880] (branch_2_a) branch 2a
| /
|/
*  [a74eb2a] checkout 1
*  [9a8dd6a] added branch_2 line
|
| * [cf0149e'] (HEAD', branch_2') more editing (post-squash rebase)
| * [8fcc106'] some edit (post-squash rebase)
| * [SQUASHED] "checkout 1" + "added branch_2 line"
|/
|
| * [bb903de] (branch_3) branch 3
|/
|
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

请注意，其他现存的分支不受影响；那是因为你所做的只是做了一个新的压缩提交——它不会改变其他任何东西的历史。

你的 HEAD 现在指向`cf0149e'`，它将有一个新的 SHA1 哈希，因为你已经改变了它的历史。

现在，您可以`rebase`将其他分支一个接一个， on `SQUASHED`，因为那是它们分支的点，以生成：

```
* [cf0149e] (HEAD, branch_2) more editing
* [8fcc106] some edit
|
|  * [59e643e] (branch_2b) branch 2b
| /
|/
|  * [0f4c880] (branch_2_a) branch 2a
| /
|/
*  [a74eb2a] checkout 1
*  [9a8dd6a] added branch_2 line
|
| * [cf0149e'] (HEAD', branch_2') more editing (post-squash rebase)
| * [8fcc106'] some edit (post-squash rebase)
| |
| |  * [59e643e] (branch_2b') branch 2b (rebased on SQUASHED)
| | /
| |/
| |  * [0f4c880'] (branch_2_a') branch 2a (rebased on SQUASHED)
| | /
| |/
| * [SQUASHED] "checkout 1" + "added branch_2 line"
|/
|
| * [bb903de] (branch_3) branch 3
|/
|
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

旧的历史现在已经无关紧要了，所以我们真的有：

```
* [cf0149e'] (HEAD', branch_2') more editing (post-squash rebase)
* [8fcc106'] some edit (post-squash rebase)
|
|  * [59e643e] (branch_2b') branch 2b (rebased on SQUASHED)
| /
|/
|  * [0f4c880'] (branch_2_a') branch 2a (rebased on SQUASHED)
| /
|/
* [SQUASHED] "checkout 1" + "added branch_2 line"
|
| * [bb903de] (branch_3) branch 3
|/
|
| * [674e08c] (branch_1) commit 1
| * [7d3db01] added branch_1 line
|/
* [328454f] (0.0.0) test 
```

# python - img = Image.open(fp) AttributeError: 类 Image 没有属性 'open'

> ID：10748822
> 
> 赞同：27
> 
> 时间：2012-05-25T05:18:07.010
> 
> 标签：python, pdf, image

我想把图片变成PDF文件。我的代码如下...

```
import sys
import xlrd
from PIL import Image
import ImageEnhance
from reportlab.platypus import *
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.rl_config import defaultPageSize
PAGE_HEIGHT=defaultPageSize[1]

styles = getSampleStyleSheet()

Title = "Integrating Diverse Data Sources with Gadfly 2"

Author = "Aaron Watters"

URL = "http://www.chordate.com/"

email = "arw@ifu.net"

from reportlab.lib.units import inch

pageinfo = "%s / %s / %s" % (Author, email, Title)

def myFirstPage(canvas, doc):
    canvas.saveState()
    #canvas.setStrokeColorRGB(1,0,0)
    #canvas.setLineWidth(5)
    #canvas.line(66,72,66,PAGE_HEIGHT-72)
    canvas.setFont('Times-Bold',16)
    canvas.drawString(108, PAGE_HEIGHT-108, Title)
    canvas.setFont('Times-Roman',9)
    canvas.drawString(inch, 0.75 * inch, "First Page / %s" % pageinfo)
    canvas.restoreState()

def myLaterPages(canvas, doc):
    #canvas.drawImage("snkanim.gif", 36, 36)
    canvas.saveState()
    #canvas.setStrokeColorRGB(1,0,0)
    #canvas.setLineWidth(5)
    #canvas.line(66,72,66,PAGE_HEIGHT-72)
    canvas.setFont('Times-Roman',9)
    canvas.drawString(inch, 0.75 * inch, "Page %d %s" % (doc.page, pageinfo))
    canvas.restoreState()

def go():
    Elements.insert(0,Spacer(0,inch))
    doc = SimpleDocTemplate('ss.pdf')
    doc.build(Elements,onFirstPage=myFirstPage, onLaterPages=myLaterPages)

Elements = []

HeaderStyle = styles["Heading1"] # XXXX

def header(txt, style=HeaderStyle, klass=Paragraph, sep=0.3):
    s = Spacer(0.2*inch, sep*inch)
    Elements.append(s)
    para = klass(txt, style)
    Elements.append(para)

ParaStyle = styles["Normal"]

def p(txt):
    return header(txt, style=ParaStyle, sep=0.1)

def open_excel(file= 'exc.xls'):
    try:
        data = xlrd.open_workbook(file)
        return data
    except Exception,e:
        print str(e)

#pre = p # XXX

PreStyle = styles["Code"]

def pre(txt):
    s = Spacer(0.1*inch, 0.1*inch)
    Elements.append(s)
    p = Preformatted(txt, PreStyle)
    Elements.append(p)
p("""\
Relational databases manipulate and store persistent
table structures called relations, such as the following
three tables""")

fp = open("/pdf-ex/downloadwin7.png","rb")
img = Image.open(fp)
img.show()
# HACK
Elements.append(PageBreak())

go() 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-25T05:40:25.550

您有命名空间冲突。您的导入语句之一是`PIL.Image`使用名为`Image`.

代替 ...

```
from PIL import Image 
```

尝试 ...

```
import PIL.Image 
```

然后在你的代码中......

```
fp = open("/pdf-ex/downloadwin7.png","rb")
img = PIL.Image.open(fp)
img.show() 
```

处理大量导入时，请注意命名空间冲突。我通常对`from some_module import *`陈述非常谨慎。

祝你的项目好运，编码愉快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-09-07T16:11:31.153

我在单个文件中遇到了与 TKInter 类似的问题：

我变了：

```
from PIL import ImageTk, Image
from tkinter import * 
```

至：

```
from tkinter import *
from PIL import ImageTk, Image 
```

问题就消失了。

# robotframework - 安装 Autolit 库

> ID：10748828
> 
> 赞同：0
> 
> 时间：2012-05-25T05:18:39.337
> 
> 标签：robotframework

我正在使用带有 SeleniumLibrary（测试库）的 Google 机器人框架编写用于 Web 测试的机器人测试，我的一项测试涉及通过单击网页上的“浏览”按钮并使用 Windows 文件资源管理器窗口从桌面上传文件弹出导航到并选择文件（出于安全原因，在网站上禁用了提供文件的文本路径。）我已经尝试过挖掘，但在自动执行此 Windows 文件资源管理器操作时发现很少，有没有办法可以做到这一点?

下载 AutoIt 库并尝试安装后，它要求 wincom32./python 窗口扩展。我尝试安装它时出现一些错误，例如

```
Building pywin32 2.7.217.0    
Trace-back (most recent call last):    
  File "setup.py", line1944, in <module>
      """ % dirs).split(),    
  File "setup.py", line 603,    in __init__
      if os.path.isfile(os.path.join(sdk_dir, "include", "activdbg.h")):    
  File"C:\Python27\lib\ntpath.py", line 96 in join
      assert len(path) > 0    
  TypeError: object of type 'NoneType' has no len() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:55:24.603

以下是在 Windows 中为机器人框架安装 autoit 的快速分步指南（因为哪些版本适用于 python 中的哪些内容很痛苦）：

首先你需要一个 32 位的 python，因为 autoit 不会为 windows 64 位安装。我用过：

*   蟒蛇2.6

然后从[http://sourceforge.net/projects/pywin32/files/pywin32/Build%20217/](http://sourceforge.net/projects/pywin32/files/pywin32/Build%20217/) 下载 windows 安装程序，因此对于 python 2.6 它将是：

*   pywin32-217.win32-py2.6.exe

现在在命令提示符下转到您下载 autoit 文件的位置，例如：- cd C:\Development\Downloaded files\AutoItLibrary-1.1 然后键入 - python setup.py install

如果成功，您将在 cmd 行中看到如下行：

```
 Generating...
 Importing module
 running install
 running build
 running build_py
 creating build
 creating build\lib
 creating build\lib\AutoItLibrary
 copying src\AutoItLibrary\Counter.py -> build\lib\AutoItLibrary
 copying src\AutoItLibrary\Logger.py -> build\lib\AutoItLibrary
 copying src\AutoItLibrary\__init__.py -> build\lib\AutoItLibrary
 running install_lib
 copying build\lib\AutoItLibrary\Counter.py -> C:\Python26\Lib\site-     packages\AutoItLibrary
 copying build\lib\AutoItLibrary\Logger.py -> C:\Python26\Lib\site- 
```

现在运行测试 C:\RobotFramework\Extensions\AutoItLibrary\tests

注意：确保您已正确设置环境变量：即 - c:\python26 for python - c:\python26\scripts for pybot

您现在可以通过创建一个 exe 并调用 - Run C:\RobotFramework\Seans Autoit Files\FF_FileUpload.exe 来运行您的机器人框架测试

要了解如何创建 autoit exe，请访问 autoit 网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:50:45.283

您是否尝试从源代码安装 pywin32 扩展？有适用于所有 Windows 风格的 Windows 安装程序，因此我建议您使用安装程序进行安装。

（另外一件事，谷歌没有做机器人框架。是诺基亚西门子网络......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T20:53:16.707

使用关键字“选择文件”。无需 AutoIT Lib

名称：选择文件

来源：Selenium2Library

参数：[ 定位器 | 文件路径 ]

将 输入`file_path`到由 找到的文件输入字段中`identifier`。此关键字最常用于将文件输入到上传表单中。指定的文件`file_path`必须在运行 Selenium 服务器的同一主机上可用。

示例：选择文件 my_upload_field C:\Automation\sample.csv

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T08:17:34.230

“选择文件”在我的情况下有效。请注意，在我的情况下，这使得机器人将文件路径写入输入字段，否则无法手动编辑。

# javascript - 淡出有效，但淡入无效

> ID：10748829
> 
> 赞同：1
> 
> 时间：2012-05-25T05:18:42.983
> 
> 标签：javascript, jquery, onclick, fadein, fadeout

正如标题所述，我有一个导致 div 的函数`fadeOut`

```
 $("#myVid").bind("ended", function() {
            //other functions
            $(".control").animate( {
                marginTop: "+=128px"}, 500 );
            $(".control").fadeOut(0);
        }); 
```

和它消失的那个

```
$("#myVid").bind("playing", function() {
            //other functions
        $(".control").fadeIn(0);
        }); 
```

为什么不回来了？视频实际上是一个数组，所以这就是为什么它在结束时淡出并在播放时重新播放......我可以在这里得到一些帮助吗？

这应该是可能的：

```
$(".control").fadeOut(0).delay(500).fadeIn(0); 
```

因为`delay()`s 总是给我带来很多麻烦，现在只是延迟整个结束的功能（如果在前面）或者不先去（如果在后面）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:21:35.073

我个人在使用淡入淡出时使用了两个功能：

```
function fadeIn(id){
    $('#'+id).fadeIn('fade', function() {
    });
}
function fadeOut(id){
    $('#'+id).fadeOut('fade', function() {
    });
} 
```

所以你可以和那些人一起工作

# mysql - 使用存在变量更新 MySQL 数据

> ID：10748832
> 
> 赞同：1
> 
> 时间：2012-05-25T05:18:54.170
> 
> 标签：mysql

在我的 mysql 用户数据中，有两列，分别是 u_id 和 u_name。

如果没有值，我想将 u_name 更新为 u_id。

```
UPDATE T_USER_ACCOUNT SET `u_name`=`u_id` WHERE `u_name` = 'NULL' 
```

我运行了这个查询，但它影响了 0 行。

是什么导致了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:21:14.137

当您想与值进行比较时，不应将 ( `=`)分配给列。正确的方法是：`null``NULL`

```
UPDATE T_USER_ACCOUNT SET `u_name`=`u_id` WHERE `u_name` IS NULL 
```

在您的查询中，

```
UPDATE T_USER_ACCOUNT SET `u_name`=`u_id` WHERE `u_name` = 'NULL' 
```

您正在搜索`u_name`的**字符串**或**VARCHAR**值为`NULL`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:20:57.010

比较`NULL`使用时`IS NULL`：

```
WHERE u_name IS NULL 
```

请注意，我改变了两件事：

*   `NULL`不在引号中。
*   与比较时使用`IS`而不是。`=``NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:21:23.777

尝试这个

```
UPDATE T_USER_ACCOUNT SET `u_name`=`u_id` WHERE `u_name` IS NULL 
```

您应该使用 Is NULL 来检查空值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T05:21:37.523

尝试使用`IS NULL`：

```
UPDATE T_USER_ACCOUNT SET `u_name`=`u_id` WHERE `u_name` IS NULL 
```

# algorithm - 匹配两个社交媒体资料

> ID：10748841
> 
> 赞同：3
> 
> 时间：2012-05-25T05:19:30.240
> 
> 标签：algorithm, math, graph, graph-theory, social-media

您如何检查来自两个不同社交媒体网站的两个个人资料是否相同？存在哪些算法来实现这一点，从而为匹配分配权重度量？

假设我有一个来自 LinkedIn 的个人资料和另一个来自 Facebook 的个人资料。我知道这两个配置文件的属性。我可以实施什么算法来找到这两个配置文件之间的匹配距离。

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T06:12:52.207

您可以尝试[**机器学习**](http://en.wikipedia.org/wiki/Machine_learning)算法，特别是分类

为简单起见，假设您想要一个二进制答案：是或否（这可以稍后改进）。

**你必须做的：**

1.  从两个配置文件中提取您拥有的功能，并为两个组合配置文件创建一个实例。这将是一个需要分类的实例
2.  创建一个训练集。训练集是一组您知道分类的“实例”（通常来自手动标记它们）。
3.  在给定训练集的情况下运行分类算法 - 这将“猜测”您稍后将获得的未分类实例的分类。

**您可能想要使用的一些算法是：**

1.  [SVM](http://en.wikipedia.org/wiki/Support_vector_machine) - 被许多人认为是当今存在的最佳分类算法。
2.  [决策树](http://en.wikipedia.org/wiki/Decision_tree_learning)- 特别是[C4.5](http://en.wikipedia.org/wiki/C4.5_algorithm) - 非常直观的分类器（人类可读！）并且易于使用，而且 - 分类时间非常短。
3.  [K 最近邻](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)- 直观且易于使用，但在特征数量很大时表现不佳。

    *   您还可以使用[交叉验证](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)来评估您的结果有多好。
    *   [对于 java - 有一个名为Weka](http://www.cs.waikato.ac.nz/ml/weka/)的开源项目，它实现了这些分类算法等等。

# php - 限制可以发送 PHP POST 信息的域

> ID：10748849
> 
> 赞同：1
> 
> 时间：2012-05-25T05:20:31.100
> 
> 标签：php, forms

是否可以限制允许将 POST 信息发送到 process.php 文件的域。

因此，例如在 process.php 文件的顶部（它使用来自表单提交的 $_POST 数据）我想添加类似这样的内容。

```
<?php
  Allowed Domains: domain.com, domain2.com
?> 
```

只有从允许域提交的表单才会使用任何发布信息。

这是为了防止有人在自己的服务器上创建 HTML 表单并操纵表单以尝试利用 process.php 中的任何漏洞

基本上我有一个 process.php 文件，我想接​​受来自多个域的表单提交。

```
e.g. Domain.com/form.html  >>> http://MainDomain.com/process.php
or   Domain2.com/form.html >>> http://MainDomain.com/process.php 
```

我想允许任何带有允许域列表中表单的页面能够在 process.php 上运行。如果一个未被拒绝的域提交给 process.php，我希望它被拒绝。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:43:54.767

您不能通过检查域来做到这一点，因为发送请求的域很容易被用户代理欺骗，您将束手无策。无助！

您所关心的是所谓的[跨站请求伪造](http://en.wikipedia.org/wiki/Csrf)。我认为对您来说理想的解决方案是在您想要保护的形式中包含一个随机生成的令牌，并将匹配的令牌存储在会话中，并且仅在它们匹配时才允许发布。从另一个域发帖的人需要先在会话中设置令牌，然后以某种方式获取令牌.. 如果不查看您创建的表单（或非常幸运），他们将无法做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T05:31:16.130

您可以尝试以下操作。

```
<?php

$allowedDomains = array('www.abc.com', 'www.xyz.com');

$referer = $_SERVER['HTTP_REFERER'];

$domain = parse_url($referer); //If yes, parse referrer

if(in_array( $domain['host'], $allowedDomains)) {
    //Run your code here which will process the $_POST
} else {
    echo "you are not allowed to post at this page";
    exit(); //Stop running the script
}
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:23:06.663

POST 请求并不总是来自域。它们可能来自任何连接到互联网的设备。因此，您应该根据 IP 地址进行过滤。

您可以通过创建一组列入白名单的 IP 地址来执行此操作，并用于[`in_array`](http://php.net/manual/en/function.in-array.php)检查。

```
if (in_array($_SERVER['REMOTE_ADDR'], $whitelist)) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T05:24:25.600

您可以检查它`_SERVER[HTTP_HOST]`是否在您的允许域列表中。这个值是由服务器设置的，所以它不能被客户端欺骗。请注意，这是代码正在运行的域*，*这似乎是您的问题所在。您是指发送请求的域*吗*？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-25T05:26:48.943

```
if (!in_array($_SERVER['REMOTE_ADDR'], array('ip1', 'ip2'))) die('Not allowed'); 
```

# java - java方法的理想长度

> ID：10748857
> 
> 赞同：3
> 
> 时间：2012-05-25T05:21:14.343
> 
> 标签：java, methods

我正在研究一项功能，并且对方法的长度感到困惑。阅读了某些要点，但不确定什么是最好的或标准的

1.  一种方法应该只要执行它所设计的任务所需的时间。
2.  无需滚动即可阅读整个方法，并且适合页面。

还有其他点。我有一个静态辅助方法，其长度正在增加，因此我可以选择创建更多静态辅助方法并将任务分配给这些方法，但看起来我正在创建不必要的静态方法。

其他方法是创建另一个助手类并将一些工作委托给助手类中定义的方法

我不确定这样做的最佳方式/标准方式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:30:46.050

一般来说，这两点都是非常值得考虑的事情。您已经提到的主要原因之一：它使代码更具可读性和易于消化。

拆分方法和创建辅助方法的另一个好处是不会立即显现出来。取而代之的是，有一天您将在一个拥有客户用户的系统上工作，并且您需要实现一项功能，您需要在其中创建管理员用户、供应商或某个人的其他抽象版本.

您会发现自己在考虑如何将供应商的订单或供应商的任何东西保存到数据库中，并且您需要生成某种形式的东西来识别订单，而您您将意识到您为客户执行相同操作而编写的代码将与 Vendor 对象和 Customer 对象一起使用。

但是，如果所有这些代码在处理与客户相关的所有内容的同一方法中都很强大，那么您将使用我们所说的剪切和粘贴可重用性。这涉及检查您之前编写的代码并剪切和粘贴相关部分并创建一个大部分相似但有非常细微差异的副本。（注意：这通常被认为是一种不好的做法。）

但是，当您编写小而简洁的方法，只做一件事，并且把一件事做得非常好时，您会发现您能够利用已经构建的那些构建块，然后使用它们构建其他东西，从而节省您的时间，节省质量保证时间，总体上降低项目的维护成本，让产品向前发展，让你向前发展，做更酷的事情。

但是，要考虑的最后一点是，可能会过度使用它或过度架构。太长和太短之间有一条细线，你可能会想把你的方法分开太多。如果你到了拆分方法变得难以使用的地步，那么请考虑一下你可能走得太远了。祝你好运！

# android - 如何以编程方式更改屏幕超时？

> ID：10748861
> 
> 赞同：27
> 
> 时间：2012-05-25T05:21:29.960
> 
> 标签：android

只是想知道是否可以使用 Android 中的代码更改屏幕超时

![在此处输入图像描述](../Images/e7f76ff696c7f4464fd4b1af56cdebb9.png)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-25T05:36:33.490

做起来很简单。你应该从Android源代码中学习解决你的问题。

```
 /**
   * set screen off timeout
   * @param screenOffTimeout int 0~6
   */
private void setTimeout(int screenOffTimeout) {
    int time;
    switch (screenOffTimeout) {
    case 0:
        time = 15000;
        break;
    case 1:
        time = 30000;
        break;
    case 2:
        time = 60000;
        break;
    case 3:
        time = 120000;
        break;
    case 4:
        time = 600000;
        break;
    case 5:
        time = 1800000;
        break;
    default:
        time = -1;
    }
    android.provider.Settings.System.putInt(getContentResolver(),
            Settings.System.SCREEN_OFF_TIMEOUT, time);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-16T00:51:24.550

更好的解决方案是执行以下操作之一（取决于您希望它是动态的还是静态的）：

1.  在布局（xml）中指定属性`android:keepScreenOn`（即始终无限期地防止屏幕超时），
2.  `WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON`创建活动时添加标志，或
3.  使用 a`WakeLock`控制屏幕应该打开多长时间（动态）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-08T15:39:32.153

将屏幕超时设置为 -1 似乎并不能准确地完成所需的工作。

我发现将值设置为 Integer.MAX_VALUE 效果更好。

例如：

> android.provider.Settings.System.putInt(内容, Settings.System.SCREEN_OFF_TIMEOUT, Integer.MAX_VALUE);

这似乎将最大超时设置为设备允许的最大值。

例如，如果导航到手机上的显示设置时，只允许您拥有 30 分钟的最大屏幕超时，则执行上述代码会将屏幕超时设置为 30 分钟。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-25T07:13:46.010

如果有人需要将其设置为从不，这里是代码

```
Settings.System.putString(cr, Settings.System.SCREEN_OFF_TIMEOUT, "-1"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-09T15:32:16.137

试试这个。只需将 3000 更改为您想要的任何屏幕输出时间。确保您提供更改系统设置权限。

```
try {
    int mSystemScreenOffTimeOut = Settings.System.getInt(getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT);
    Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_OFF_TIMEOUT, 3000);
} catch (Exception e) {
    Toast.makeText(this, "Permission Error", Toast.LENGTH_SHORT).show();
} 
```

# android - 如何在android中跟踪下载

> ID：10748863
> 
> 赞同：1
> 
> 时间：2012-05-25T05:21:34.620
> 
> 标签：android, url, download, google-play

在我的应用程序中，我试图跟踪我的设备中发生的下载（来自 Google Play 商店或任何 URL）。我不想开始任何下载，我的应用程序应该跟踪设备中正在进行的下载。当下载开始时，我的应用程序应该开始收听它。当用户开始下载我的应用程序时，应该跟踪`download start time`，当下载完成时，我想获取`end time`和`size of data downloaded`.

Q1。有什么办法可以满足上述要求。

Q2。如果发生多个下载，我想分别获取两个下载的记录。

Q3。我需要从哪个 url 下载正在发生。或者它是从任何应用程序（如 Google Play 商店）发生的。

更新：

Q4。有什么方法可以捕获后台运行的服务，比如下载。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:21:52.973

> 有什么办法可以满足上述要求。

幸运的是，不，出于明显的隐私和安全原因。

> 如果发生多个下载，我想分别获取两个下载的记录。

这不是一个问题。

> 我需要从哪个 url 下载正在发生。或者它是从任何应用程序（如 Google Play 商店）发生的。

这也不是问题。

> 有什么方法可以捕获后台运行的服务，比如下载。

我不知道“捕获后台运行服务”是什么意思。

# c# - 如何绑定 UI 元素？

> ID：10748866
> 
> 赞同：0
> 
> 时间：2012-05-25T05:21:39.770
> 
> 标签：c#, wpf, binding

我每次都有同样的问题。我想用“UIElement”DependencyProperty 创建一个自定义控件。那么，我可以在 XAML 中的哪个元素上创建与此 DependencyProperty 的绑定？

Canvas 的 Children 属性说这是不可能的，Grid 甚至在 XAML 中没有“Children”属性等等。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T05:40:32.377

不确定这是否是您要查找的内容，但 javascript 淘汰赛适用于 UI 绑定：

[http://knockoutjs.com/](http://knockoutjs.com/)

还要看看车把：

[http://handlebarsjs.com/](http://handlebarsjs.com/)

希望有帮助

# fitnesse - 在 FitNesse 测试套件中重新排序测试用例

> ID：10748868
> 
> 赞同：3
> 
> 时间：2012-05-25T05:21:58.633
> 
> 标签：fitnesse

我有一个测试套件，测试顺序如下：

```
Suite1---A
         B
         C 
```

如何更改测试用例的顺序？

我尝试过重构，但这无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:37:53.037

看来这是不可能的...

> 请记住，测试运行的顺序是按字母顺序排列的。所以在上面的例子中，TestThree 不会运行，因为 TestTwo 实际上是在 TestThree 之后
> 
> -- [FitNesse > 用户指南 > TestSuites > TagsAndFilters](http://fitnesse.org/FitNesse.UserGuide.TestSuites.TagsAndFilters)

......但这应该没关系。测试应该是独立的，并且不依赖于以前的测试（除了[**`SuiteSetUp`**](http://fitnesse.org/FitNesse.UserGuide.TestSuites.SuiteSetUpAndSuiteTearDown)）。

# php - 使用 PHP 检查 MySQL 数据库中 URL 的可用性？

> ID：10748870
> 
> 赞同：0
> 
> 时间：2012-05-25T05:22:10.597
> 
> 标签：php, mysql, url

我的 mysql 表中有三个文件，它们是：id、url、status

如何检查列 url 中的所有 url 并将 1（可用）或 0（不可用）写入状态列？

要在没有 mysql 的 php 中手动检查 url，我可以使用这个：

```
<?php
    function Visit($url){
    $agent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";
    $ch = curl_init();
    curl_setopt ($ch, CURLOPT_URL,$url );
    curl_setopt($ch, CURLOPT_USERAGENT, $agent);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch,CURLOPT_VERBOSE,false);
    curl_setopt($ch, CURLOPT_TIMEOUT, 5);
    $page=curl_exec($ch);
    //echo curl_error($ch);
    $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    if($httpcode >= 200 && $httpcode < 300){ 
        return true;
    }
    else {
        return false;
    }
}
    if(Visit("http://www.google.com")){//maybe make it a variable from a result of a mysql select, but how to process it one by one?  
        echo "Website OK"; //maybe somesql here to wtite '1'
    }
    else{
        echo "Website DOWN";//maybe somesql here to wtite '0'
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:00:36.677

这在性能方面很糟糕，因为在循环中进行查询是糟糕的设计，您应该构建批量更新并最终运行查询，但我现在没有足够的时间来详细说明。这只是为了让您入门：

```
$sql = "SELECT id,url FROM mytable";
$res = mysql_query($sql) or die(mysql_error());
if($res)
{
  while($row = mysql_fetch_assoc($res))
  {
    $status = visit($row['url']) ? '1' : '0';
    $id = $row['id'];
    $update = "UPDATE mytable SET status = $status WHERE id = $id";
    $res = mysql_query($update) or die(mysql_error());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:47:34.313

```
echo mysql_num_rows($result) ? '1' : '0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T06:38:02.103

例如，您可以使用 sql 查询：

```
select id, url from urltable;
update urltable set status=1 where id=99; 
```

那么，如何将此代码与您的访问功能一起使用：

```
$link = mysql_connect('localhost', 'test', 'pppppp');
$db_selected = mysql_select_db('test', $link);
$query = "select id, url from urltable";
$result = mysql_query($query);
while ($row = mysql_fetch_assoc($result)) {
    $visitid =  $row['id'];
    $visiturl =  $row['url'];
    $visitstatus = Visit($visiturl)? 1: 0;
    $upquery = sprintf("update urltable set status=%d where id=%d", $visitstatus, $visitid);
    $upresult = mysql_query($upquery);
} 
```

# java - FileOutputStream() 不工作？

> ID：10748871
> 
> 赞同：0
> 
> 时间：2012-05-25T05:22:32.113
> 
> 标签：java, apache-poi, noclassdeffounderror, fileoutputstream

我有这个应用程序。我正在尝试。它允许用户查看`JTable`实例，同时可以选择以 excel 格式保存或打印。它询问用户文件名和放置文件的位置，然后将其保存在该位置。该应用程序在本地服务器 (tomcat) 中运行，并由不同工作站中的其他用户使用。我正在使用 POI API 将表格转换为 Excel 文件，并且效果很好。

现在的问题是，它根本`FileOutputStream()`不会为其他工作站创建任何文件。它仅在单个工作站中创建/保存文件，即我当前正在开发应用程序的工作站。我已经搜索了足够长的时间以找到解决方案，但我还没有找到任何解决方案，所以我试图向你们寻求帮助。我将包括代码。

```
public class ReportToExcel
{
    //file returned comes from the user from antoher function.
    public void exportTable(JTable table, File file) throws IOException {
        HSSFWorkbook report = new HSSFWorkbook();
        HSSFSheet report_sheet = report.createSheet("report_sheet");
        HSSFRow rowHead = report_sheet.createRow((int)0);
        TableModel model = table.getModel();
        FileOutputStream reportOut = new FileOutputStream(file.getAbsolutePath());
        System.out.println("table to excel "+table.getName());

for(int x=0; x < model.getColumnCount(); x++) {
        rowHead.createCell((int)x).setCellValue(model.getColumnName(x));
        report_sheet.autoSizeColumn((int)x);
        System.out.println(x+". "+model.getColumnName(x));
    }

for(int i=1; i< model.getRowCount(); i++) {
            HSSFRow row = report_sheet.createRow((int)i);
            for(int j=0; j < model.getColumnCount(); j++) {
                row.createCell((int)j).setCellValue(model.getValueAt(i,j).toString());
                System.out.println(i+". "+model.getValueAt(i,j).toString());
            }
           }
       report.write(reportOut);
        reportOut.close();
        System.out.println("write out to: " + file.getAbsolutePath());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:05:21.937

已经找到答案了。对于 NoClassDefFound 错误，工作站需要具有访问我肯定忽略的 POI api 的类路径的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:39:20.557

我认为您的一个关键声明是该代码仅适用于您的工作站。很多时候，问题与文件/目录权限有关。普通用户的权限确实比开发人员少。

如果您告诉我们输出到 file.getAbsolutePath() 也很有帮助，以防路径可疑。

该路径应该是您的用户创建/修改文件的安全位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:48:40.950

您是否尝试将输出保存到服务器，而不是每个工作站的本地计算机？

# php - 这个简单的代码有什么问题？

> ID：10748872
> 
> 赞同：0
> 
> 时间：2012-05-25T05:22:42.530
> 
> 标签：php, arrays

我想比较下面的 2 个数组并找出差异。键“lead owner”和“company”的值不同，但是当我比较这些数组时，它说只有“company”值不同。但是，当我为“主要所有者”创建两个只有一个键/值对的新数组时，它可以正常工作。我犯了一些错误吗？

```
<?php

$arr1 = Array
    (
        "leadid" => "418176000000069007",
        "smownerid" => "418176000000047003",
        "lead owner" => "Amit Patil",
        "company" => "SAM",
        "first name" => "Test",
        "last name" =>"Lead1",
        "designation" => "call",
        "email" => "",
        "phone" => "958",
        "fax" => "",
        "mobile" => "",
        "website" => "www.infosys.con",
        "lead source" => "Cold Call",
        "lead status" => "Contact in Future",
        "industry" => "None",
        "no of employees" => "45000",
        "annual revenue" => "0",
        "rating" => "Active",
        "smcreatorid" => "418176000000047003",
        "created by" => "Amit Patil",
        "modifiedby" => "418176000000047003",
        "modified by" => "Amit Patil",
        "created time" => "2012-04-05 19:58:00",
        "modified time" => "2012-05-02 08:51:08",
        "street" => "",
        "city" => "",
        "state" => "",
        "zip code" => "",
        "country" => "",
        "description" => "",
        "skype id" => "",
        "email opt out" => "false",
        "salutation" => "Mr.",
        "secondary email" => ""
        );

$arr2 = Array
    (
        "leadid" => "418176000000069007",
        "smownerid" => "418176000000047003",
        "lead owner" => "Amit aaa",
        "company" => "SAM A",
        "first name" => "Test",
        "last name" => "Lead1",
        "designation" => "call",
        "email" => "",
        "phone" => "958",
        "fax" => "",
        "mobile" => "",
        "website" => "www.infosys.con",
        "lead_source" => "Cold Call",
        "lead_status" => "Contact in Future",
        "industry" => "None",
        "no_of_employees" => "45000",
        "annual_revenue" => "0",
        "rating" => "Active",
        "smcreatorid" => "418176000000047003",
        "created_by" => "Amit Patil",
        "modifiedby" => "418176000000047003",
        "modified_by" => "Amit Patil",
        "created_time" => "2012-04-05 19:58:00",
        "modified_time" => "2012-05-02 08:51:08",
        "street" => "",
        "city" => "",
        "state" => "",
        "zip_code" => "0",
        "country" => "",
        "description" => "",
        "skype_id" => "",
        "email_opt_out" => "false",
        "salutation" => "Mr.",
        "secondary_email" => ""
        );

$arr3 = array("lead owner" => "Amit Patil");
$arr4 = array("lead owner" => "Amit aaa");

print_r(array_diff($arr1,$arr2));
echo "<br>";
print_r(array_diff($arr3,$arr4));
?> 
```

输出如下

```
Array ( [company] => SAM )
Array ( [lead owner] => Amit Patil ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:30:55.020

你理解错了。

**[array_diff](http://php.net/manual/en/function.array-diff.php)**的文档页面说

> 返回一个数组，其中包含 array1 中不存在于任何其他数组中的所有条目。

但是`Amit Patil`它存在于第二个数组中，因此它只返回一个值，`SAM`并且它只是一个不存在于第二个数组中的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:31:39.533

如果您想在关联数组之间进行区分，以便键值对很重要，而不仅仅是值，请使用[`array_diff_assoc`](http://www.php.net/manual/en/function.array-diff-assoc.php)，而不是`array_diff`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:33:53.600

`array_diff()`返回互补值。所以你可以这样做：

```
 array_diff(array_merge($arr1, $arr2), array_intersect($arr1, $arr2)); 
```

这样它就会起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T05:35:26.580

发生这种情况是因为“array_diff”函数返回出现在第一个数组中的任何键的值，而不会出现在第二个数组中的任何键上。

Lead_owner“Amit Patil”不等于第二个数组lead_owner，而是等于第二个数组的created_by 和modified_by 键。

为此，您应该使用“array_diff_assoc”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-25T05:35:43.800

试试这个，看看，这应该工作

```
print_r(array_diff_assoc($arr1,$arr2));
echo "<br>";
print_r(array_diff_assoc($arr3,$arr4)); 
```

# php - 如何将php数组值检索到android

> ID：10748874
> 
> 赞同：1
> 
> 时间：2012-05-25T05:22:56.100
> 
> 标签：php, android, arrays

我有远程数据库和 php 文件（即）这个 php 页面将访问该数据库并从数据库中获取数据并且该值存储在 array[] 中，在这里我必须将该数组值检索到 ma android 程序和我必须将这些值存储在字符串值中。我的表名是 aaa，该表有 id、firstvalue、secondvalue。

php编码::

```
$result = mysql_query("SELECT * FROM aaa
WHERE id='$id'");

while($row = mysql_fetch_array($result))
  {
  echo "value1:".$row['firstvalue'] ."              |        ". "value2 " . $row['secondvalue'];
  echo "<br />";
  } 
```

在这里，我必须获取那行 ['firstvalue'] 和 $row['secondvalue'] 并将这两个数组值存储到我的 android 程序中，请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:33:25.690

序列化数组并将变量传递给 java 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T17:04:02.913

在您的 php 文件中，您必须获取变量并将它们设置在数组中

尝试这个

```
$response = array();

$result = mysql_query("SELECT * FROM aaa WHERE id='$id'");

while($row = mysql_fetch_array($result))
    {
      $response["value1"] = $row['firstvalue'] ;
      $response["value2"] = $row['secondvalue'] ;  
    }

echo json_encode($response); 
```

不要在这个 php 页面上使用任何回显！

在您的应用程序上，您将不得不使用 JSon，但由于您没有为您的应用程序发布任何代码，因此很难在这方面为您提供帮助。

但是可以在这里找到您尝试做的事情的一个很好的例子。

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

# facebook - 在 facebook 中获取用户墙贴

> ID：10748876
> 
> 赞同：-3
> 
> 时间：2012-05-25T05:23:03.563
> 
> 标签：facebook

如何通过提供用户的凭据（即用户名和密码）来获取用户的墙帖并在墙上获得评论

例如：www.facebook.com?username=abc&password=abc&get=wall

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T05:54:43.957

首先你需要收集用户的 access_token 。然后如果你想从该用户的墙上获取所有数据，你可以试试这个

```
<?php
$url = "https://graph.facebook.com/{$user_id}/feed/?access_token={$access_token}";
$data = json_decode(file_get_contents($url));

echo '<pre>';
print_r($data);
echo '</pre>';
?> 
```

如果你想得到一个帖子的所有评论，首先你必须得到墙上的帖子ID，你可以从上面的代码中轻松获得，然后

```
<?php
$url = "https://graph.facebook.com/{$wall_post_id}?access_token={$access_token}";
$data = json_decode(file_get_contents($url));

echo '<pre>';
print_r($data);
echo '</pre>';
?> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:30:10.467

您无法通过 Facebook 提供的任何 SDK 使用他的凭据对用户进行身份验证。

Facebook 公开的每个 API 也是如此。

Facebook 使用 OAuth2 进行身份验证，您真的不需要用户的凭据来使用 API

# regex - 正则表达式的不同分隔符

> ID：10748881
> 
> 赞同：1
> 
> 时间：2012-05-25T05:23:29.990
> 
> 标签：regex, delimiter

当我出于各种目的查找正则表达式时，我看到人们使用诸如`/`、`#`、`!`和等分隔符`~`。这些有什么不同，还是有相同的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:06:16.223

他们没有做任何不同的事情，他们界定了正则表达式（在需要的语言中）。

不同之处在于：正则表达式中该字符的行为确实发生了变化。正则表达式分隔符成为一个额外的特殊字符，需要转义（==> 选择一个您在正则表达式中不需要的分隔符！）。

旁注：在 php 中，您甚至可以使用正则表达式特殊字符，例如`+`或`|`作为正则表达式分隔符，但这仅在您不需要正则表达式中的该字符时才有效（不推荐）。[相关答案](https://stackoverflow.com/a/10456508/626273)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:26:42.443

在某些语言中，您可以选择分隔符，而在其他语言中则不能。

每次出现在正则表达式中时，您都必须转义该分隔符。选择表达式中不出现的分隔符可减少转义的需要，使表达式更易于阅读。

以下两个正则表达式是相同的，除了第一个`/`用作分隔符，而第二个使用`#`:

```
/http:\/\/example\.com\/.*\/foo\//
#http://example\.com/.*/foo/#

```

# javascript - jQuery 不能正常工作

> ID：10748882
> 
> 赞同：-2
> 
> 时间：2012-05-25T05:23:34.357
> 
> 标签：javascript, jquery

我有一个表单，其中有一个地址字段，用户可以在其中输入许多地址。这取决于用户。他们可以输入许多地址，它工作正常。

我正在检查用户是否两次输入相同的地址。为此，我编写了一些 jQuery 代码。

```
jQuery('#EnrollmentEnrollUserForm').submit(function(){
  // alert(jQuery('#EnrollmentServiceAddress1').val());
  // alert(jQuery('.premise-body').html());
  var add=jQuery('#EnrollmentServiceAddress1').val();
  add=add.toLowerCase();
  var address_string =jQuery('table.premise_details').find('tr:first td:last').html();
  // alert(address_string);
  var address = address_string.split('::');
  address[0]=address[0].toLowerCase();
  // alert(address[0]);
  if(add==address[0]){
  alert("These premises already exist. Please enter other premises.");
    return false;
  }
  // checking whether a premise added is same as the added premises or not
  // var premise_check = true;
  var retval = true;
  jQuery('table.premise_details').each(function() {
    var address_string = jQuery(this).find('tr:first td:last').html();
    // alert(jQuery(this).find('tr:first td:last').html());
    var address = address_string.split('::');
    address[0]=address[0].toLowerCase();
    // alert(address[0]);
    if(add==(address[0])){
      alert("These premises were already added... Please enter other premises.");
      retval = false;
    }
  });
  if(!retval){
    return false;
  }
}); 
```

此代码仅在某些时候有效。我面临的问题是，如果用户再次输入相同的地址，它会显示警报，但页面正在无限循环中加载。

谁能告诉我这有什么问题。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:00:20.780

```
jQuery('#EnrollmentEnrollUserForm').submit(function(){
  var add=jQuery('#EnrollmentServiceAddress1').val();

  add=add.toLowerCase();

  var address_string =jQuery('table.premise_details').find('tr:first td:last').html();

  var address = address_string.split('::');

  address[0]=address[0].toLowerCase();

  if(add==address[0]){

  alert("These premises already exist. Please enter other premises.");

    return false;

  }

  jQuery('table.premise_details').each(function() {

    var address_string = jQuery(this).find('tr:first td:last').html();

    var address = address_string.split('::');

    address[0]=address[0].toLowerCase();

    if(add==(address[0])){

      alert("These premises were already added... Please enter other premises.");

    return false;

    }

  });

}); 
```

您遇到问题的原因是您在完成每个函数的循环后调用检查您的 retval，显示它采用 retval 的最后设置值并为您创建问题，这里我有更改代码并在我匹配时返回 false条件。我已经编辑了代码..请检查此代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T07:47:33.867

现在它工作正常..

```
jQuery('#EnrollmentEnrollUserForm').submit(function(){
              var add=jQuery('#EnrollmentServiceAddress1').val();
              add=add.toLowerCase();
                            // checking whether a premise added is same as the added premise or not
                jQuery('table.premise_details').each(function() { 
                    var address_string = jQuery(this).find('tr:first td:last').html();
                    var address = address_string.split('::');
                    address[0]=address[0].toLowerCase();
                        if(add==(address[0])){
                            alert("This premise is already added... Please enter other premise.");
                            return false;
                        }
                });
    }); 
```

# c# - 从单独的线程创建 WPF 控件

> ID：10748886
> 
> 赞同：2
> 
> 时间：2012-05-25T05:24:13.433
> 
> 标签：c#, wpf, multithreading

我有一个异步运行`Task`，它在完成时触发一个事件，如下所示：

```
task.ContinueWith(() => {
    if (MyEvent != null)
        MyEvent(this, EventArgs.Empty);
} 
```

然后，事件处理程序应创建 WPF 控件的实例。但是当我尝试这样做时，它会导致异常：`The calling thread must be STA, because many UI components require this`. 调用方法时，类构造函数中发生异常`InitializeComponent()`。

据我所知，通常从单独的线程访问 WPF 控件是使用 处理的`Dispatcher.Invoke`，它总是对我有用，所以我试了一下：

```
Dispatcher.Invoke(new Action(() =>
{
    InitializeComponent();
})); 
```

但在那种情况下，异常不断发生。如何从单独的线程创建 WPF 控件的实例？

或者，将完成事件编组到主 UI 线程可能是一种更好的方法。如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:36:51.743

您必须使用与 UI 线程关联的 Dispatcher 实例。如果你正在写这样的东西：

```
Dispatcher.Invoke(new Action(() =>
{
    InitializeComponent();
})); 
```

在任务主体中，您正在使用调用线程的调度程序，它可以是池中的后台线程。

无论如何，对于任务，您不应该直接使用 Dispatcher。使用适当的任务调度程序：

```
var ui = TaskScheduler.FromCurrentSynchronizationContext();
Task.Factory.ContinueWhenAll(tasks.ToArray(),
    result =>
    {
        // Put you UI calls here

    }, CancellationToken.None, TaskContinuationOptions.None, ui); 
```

其中`tasks`是使用默认调度程序执行的一系列任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:35:22.183

从另一个线程的构造函数调用 InitializeComponent 似乎是在找麻烦。对象还不存在（我们在构造函数中）

将其封送回 UI 线程通常可以解决问题，但在构造函数期间对我来说似乎是个坏主意。

如果你想异步初始化控件，只需订阅加载的事件，这样你就知道对象在那里，生成一个线程来执行一些计算/数据检索并将数据编组回 UI 线程以显示它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:30:25.983

我过去曾这样做过：

```
 Dispatcher.Invoke(DispatcherPriority.Normal,
                   new Action(
                        delegate()
                        {
                            // Access control created by main thread
                            textBlock.Text = msg;
                        }
                   )); 
```

# redis - redis zinterstore 问题

> ID：10748887
> 
> 赞同：2
> 
> 时间：2012-05-25T05:24:17.713
> 
> 标签：redis

我将六个数据添加到排序集中。然后我使用 zinterstore 来获得预期的结果。但结果为 0。

```
zadd la.41 41 kfc
zadd la.42 42 mdl
zadd la.43 43 apple

zadd lo.77 77 apple
zadd lo.78 78 mdl
zadd lo.79 79 kfc

zinterstore close 6 la.41 la.42 la.43 lo.77 lo.78 lo.79 
```

预期结果：

```
kfc
mdl
apple 
```

实际结果：

```
0 
```

为什么 ？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T06:32:51.657

看起来您要么误解`ZADD`并创建了比您预期的更多的集合，要么您在应该使用并集时使用了交集。让我们看看两者：

## 创建更少的集合

一个潜在的问题是您正在创建六个集合，而您可能想要创建两个集合。在集合表示法中，您正在执行以下操作：

```
la.41 = {kfc}
la.42 = {mdl}
la.43 = {apple} 
```

相反，您可能想要这样做：

```
la = {kfc, mdl, apple} 
```

如果这是您打算执行的操作，那么您误解了该[`ZADD`](http://redis.io/commands/zadd)命令。

`ZADD`需要一个键、一个分数和一个成员。您可以将键视为集合的名称，将成员视为要添加到集合中的事物，将分数视为成员在集合中的位置。

例如，如果我运行该命令，`ZADD foo 1 a`那么我创建了一个名为的集合，该集合`foo`的成员`a`得分为`1`. 暂时忽略分数，现在的情况是这样的：

```
foo = {a} 
```

如果我现在运行，`ZADD foo 2 b`那么我已将该成员添加`b`到现有集合中`foo`：

```
foo = {a, b} 
```

您在每个`ZADD`命令中使用不同的键，因此您正在为每个命令创建一个新集。如果您使用相同的密钥，因此使用相同的集合：

```
ZADD la 41 kfc
ZADD la 42 mdl 
```

您最终将创建一个集合：

```
la = {kfc, mdl} 
```

## 联合与交叉

另一种方法是您*确实*想要创建六个集合，但您想要并集而不是交集。

*两个集合*的并集是一个包含存在于任一原始集合中的所有元素的集合：

```
{1, 2} ∪ {2, 3} = {1, 2, 3} 
```

两个集合的*交集*是包含两个原始集合中存在的所有元素的集合：

```
{1, 2} ∩ {2, 3} = {2} 
```

您正在创建六个集合，它们没有共同的元素，然后取它们的交集：

```
{kfc} ∩ {mdl} ∩ {apple} ∩ {kfc} ∩ {mdl} ∩ {apple} = {} 
```

如果您使用联合，则最终会得到结果集中的所有元素：

```
{kfc} ∪ {mdl} ∪ {apple} ∪ {kfc} ∪ {mdl} ∪ {apple} = {kfc, mdl, apple} 
```

您可以通过使用[`ZUNIONSTORE`](http://redis.io/commands/zunionstore)Redis 命令而不是[`ZINTERSTORE`](http://redis.io/commands/zinterstore).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T06:03:58.630

我认为您并没有真正理解什么是排序集。它是一组项目，每个项目都有一个为数据结构提供顺序的分数。对于每个项目，分数本身并不是项目身份的一部分。

在这里，您构建了 6 个不同的排序集合，每个集合只有一个项目。一些排序集具有相同的项目，但所有排序集中都没有项目。因此，正如预期的那样，这些集合的交集结果为空。

顺便说一句，zinterstore 命令的结果不是项目列表，而是结果的基数。您需要一个额外的命令来检索集合的内容。

例子：

```
> zinterstore close 2 la.41 lo.79
(integer) 1
> zrange close 0 -1
1) "kfc" 
```

# c# - C# 中的延迟刷新错误

> ID：10748892
> 
> 赞同：1
> 
> 时间：2012-05-25T05:25:10.550
> 
> 标签：c#, list

> **可能重复：**
> [在选项卡控件中处理多个数据网格的正确方法是什么，以便在更改选项卡时单元格离开编辑模式？](https://stackoverflow.com/questions/3354916/what-is-the-proper-way-to-handle-multiple-datagrids-in-a-tab-control-so-that-cel)

当我在更新数据网格后将列表绑定到数据网格时，它给了我类似的错误

```
"DeferRefresh' is not allowed during an AddNew or EditItem transaction" 
```

那么我该如何克服我的问题，请任何人帮助我。

谢谢，@nagaraju。

# c - 分配可变数量的可变对象的所有组合

> ID：10748901
> 
> 赞同：0
> 
> 时间：2012-05-25T05:26:45.157
> 
> 标签：c, recursion

我在这个递归问题上遇到了困难。我以为我有一个答案，但它不起作用，我根本不知道为什么，所以我想我会问专家。请放轻松，我在 15 多年前学习 C 编程，即便如此，我也可能是 B 学生。我不知道 C++ 或 Java。

目的是生成从 0 到 (n[j]-1) 的所有可能的整数组合，其中 j 可以是任意整数。现在它被硬编码为 2，但我希望它最终能够取任何值。

无论如何，这是我的代码。在此先感谢您的帮助。

编辑：对于下面的代码，我定义了 2 个序列，第 0 个序列的长度为 2 (0,1)，第一个序列的长度为 3 (0, 1, 2)。所需的输出如下：

```
p[0][0] = 0
p[0][1] = 0
p[1][0] = 0
p[1][1] = 1
p[2][0] = 0
p[2][1] = 2
p[3][0] = 1
p[3][1] = 0
p[4][0] = 1
p[4][1] = 1
p[5][0] = 1
p[5][1] = 2 
```

那是，

*   第 0 个组合贡献了序列 0 的 0 和序列 1 的 0
*   第一个组合贡献了序列 0 的 0 和序列 1 的 1
*   第二个组合贡献了序列 0 中的 0 和序列 1 中的 2
*   第 3 个组合从序列 0 中贡献 1，从序列 1 中贡献 0
*   第 4 个组合贡献了序列 0 中的 1 和序列 1 中的 1
*   第 5 个组合贡献序列 0 的 1 和序列 1 的 2

我希望这能让我更清楚我想要做什么！

```
#include <stdio.h>
#include <stdlib.h>

int recurse (int **p, int *n, int nclass, int classcount, int combcount);

int recurse (int **p, int *n, int nclass, int classcount, int combcount)
{
  int k, j, kmax;
  kmax = n[classcount];
  j = classcount;

  if (j == nclass)  {
    return (combcount+1);
  }

  for (k = 0; k < kmax; k++)  {
    p[combcount][j] = k;
    combcount = recurse (p, n, nclass, j+1, combcount);
  }
}

int main (void)
{
  int **p, n[2], i, j;

  n[0] = 2;
  n[1] = 3;

  p = (int **) malloc ((n[0]*n[1]) * sizeof (int *));
  for (i = 0; i < (n[0]*n[1]); i++)  {
    p[i] = (int *) malloc (2 * sizeof (int));
    for (j = 0; j < 2; j++)
      p[i][j] = -1;
  }

/* p[i][j] = the value of the integer in the ith combination
   arising from the sequence 0...n[j]-1 */

  recurse (p, n, 2, 0, 0);

  for (i = 0; i < (n[0]*n[1]); i++)
    for (j = 0; j < 2; j++)
      printf ("%d %d: %d\n", i, j, p[i][j]);

  for (i = 0; i < (n[0]*n[1]); i++)
    free (p[i]);
  free (p);
  return (0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:35:54.743

```
#include <stdio.h>
#include <stdlib.h>

void recurse(int *n, int *accum, int **p, int N, int k) {
    static int comb;
    int i, j;
    if (k == 0)
        comb = 0;
    if (k == N) {
        for (i = 0; i < N; ++i)
            p[comb][i] = accum[i];
        comb++;
    }
    else
        for (i = 0; i < n[k]; ++i) {
            accum[k] = i;
            recurse(n, accum, p, N, k+1);
        }
}

int main(void) {
    const int N = 2;
    int n[N];
    int accum[N];
    int **p;
    int mult;
    int i, j;
    n[0] = 2;
    n[1] = 3;
    for (mult = 1, i = 0; i < N; mult *= n[i], ++i);
    p = malloc(mult*sizeof(int*));
    for (i = 0; i < mult; i++)
        p[i] = malloc(N*sizeof(int));
    recurse(n, accum, p, N, 0);
    for (i = 0; i < mult; ++i)
        for (j = 0; j < N; ++j)
            printf("p[%d][%d] = %d\n", i, j, p[i][j]);
    for (i = 0; i < mult; i++)
        free(p[i]);
    free(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:30:01.387

```
#include <stdio.h>
#include <stdlib.h>

int recurse (int **p, int *n, int nclass, int classcount, int p_size){
    int i, j, jmax, k, kmax;

    if (classcount == nclass) return 1;

    i = 0;
    kmax = n[classcount];
    while(i < p_size){
        for (k = 0; k < kmax; ++k){
            jmax = recurse (p, n, nclass, classcount+1, p_size);
            for(j = 0;j < jmax; ++j)
                p[i++][classcount] = k;
        }
    }
    return kmax*jmax;
}

int main (void){
    int **p, n[2], i, j;
    int sizeAll, sizeN;

    n[0] = 2;
    n[1] = 3;
    sizeAll = n[0]*n[1];
    sizeN = sizeof(n)/sizeof(int);
    p = (int **) malloc (sizeAll * sizeof (int *));
    for (i = 0; i < sizeAll; ++i) {
        p[i] = (int *) malloc (sizeN * sizeof (int));
        for (j = 0; j < sizeN; ++j)
            p[i][j] = -1;
    }

    recurse (p, n, sizeN, 0, sizeAll);

    for (i = 0; i < sizeAll; ++i)
        for (j = 0; j < sizeN; ++j)
            printf ("%d %d: %d\n", i, j, p[i][j]);

    for (i = 0; i < sizeAll; ++i)
        free (p[i]);
    free (p);
    return (0);
} 
```

# php - Codeigniter 未连接到我的 SMTP 服务器

> ID：10748904
> 
> 赞同：1
> 
> 时间：2012-05-25T05:26:49.430
> 
> 标签：php, email, codeigniter, smtp

由于某种原因 CodeIgniter 没有连接到我的 SMTP 服务器，有人对此有任何问题吗？

```
$config['protocol'] = 'smtp';
$config['smtp_host'] = 'smtp.netregistry.com.au';
$config['smtp_port'] = '465'; 
```

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：fsockopen()：无法连接到 smtp.netregistry.com.au:465（php_network_getaddresses：getaddrinfo 失败：名称或服务未知）
> 
> 文件名：库/Email.php
> 
> 行号：1689

我应该使用 SSL 还是非 SSL 端口？（我都试过了；没有骰子）

有没有办法明确告诉 CI 使用 SSL 与否？

我在这里做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:39:43.070

smtp 服务器实际上是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:36:30.417

从错误中，它说“getaddrinfo 失败：名称或服务未知”。
并且该功能`php_network_getaddresses`会拍摄错误。

这可能意味着您的 SMTP 服务器位于公司网关之后，或者是私人服务器。

因此，这导致 fsockopen() 似乎找不到您的 SMTP 服务器。

尝试在您的公司中再次运行您的代码，这应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:54:28.603

您可以尝试将 ssl: 放在主机地址中：

```
$config['smtp_host'] = 'ssl://smtp.netregistry.com.au';
$config['smtp_port'] = '465'; 
```

很多时候 smtp 主机都有适当的安全措施来防止这种使用。您是否尝试过使用 gmail 帐户？这对我有用，这是我的使用方法：

```
function send_email($attributes) {

    $this->load->library('email');

    $this->email->set_newline("\r\n");

    $config['protocol'] = 'smtp';
    $config['smtp_host'] = 'ssl://smtp.googlemail.com';
    $config['smtp_port'] = '465';
    $config['smtp_user'] = 'xxx@gmail.com';
    $config['smtp_from_name'] = 'FROM NAME';
    $config['smtp_pass'] = 'XXX';
    $config['wordwrap'] = TRUE;
    $config['newline'] = "\r\n";
    $config['mailtype'] = 'html';                       

    $this->email->initialize($config);

    $this->email->from($config['smtp_user'], $config['smtp_from_name']);
    $this->email->to($attributes['to']);
    $this->email->cc($attributes['cc']);
    $this->email->bcc($attributes['cc']);
    $this->email->subject($attributes['subject']);

    $this->email->message($attributes['message']);

    if($this->email->send()) {
        return true;        
    } else {
        return false;
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-03T05:51:02.380

会有`system/libraries/Email.php`文件。默认端口将是 25 .please 也像这样添加 smtp_host 作为 localhost ..

```
var $smtp_host      = "localhost";       
var $smtp_port      = "25"; 
```

# javascript - 用 addEventListener 替换 onClick

> ID：10748905
> 
> 赞同：2
> 
> 时间：2012-05-25T05:26:55.883
> 
> 标签：javascript, dom, javascript-events, onclick

我正在尝试将脚本完全删除到外部 .js 文件中，并将 onClick 事件替换为外部文件中的 addEventListener 。我不能让它工作：

[http://jsfiddle.net/kjmatthews/DE26x/](http://jsfiddle.net/kjmatthews/DE26x/)

我的函数稍微复杂一些，但这基本上是从[http://jsfiddle.net/madBYK/UumUP/](http://jsfiddle.net/madBYK/UumUP/)复制而来，链接自[developer.mozilla.org](https://developer.mozilla.org/en/DOM/element.addEventListener)页面`element.addEventListener`。

添加`onclick="return hidePurchased();"`到`<input>`标签*确实*有效，所以问题不在于`hidePurchased()`功能。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:38:45.957

`getElementsByName`返回 a `NodeList`，它没有`addEventListener`方法，因此您需要通过取消引用结果来实际选择您打算将点击侦听器绑定到的人

尝试：

```
var foo = document.getElementsByName("hide")[0]; 
```

工作示例：

[http://jsfiddle.net/DE26x/9/](http://jsfiddle.net/DE26x/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:40:22.193

给你。[http://jsfiddle.net/DE26x/8/](http://jsfiddle.net/DE26x/8/)据我所知，您只是忘记选择 foo 数组的第一个索引。它现在似乎正在工作。检查一下，你会发现它在这个东西上有 noshow 类。我还添加了 css 来隐藏 noshow，以便您可以看到它正在工作。

# xhtml - 如何在播放时将 .swf 视频静音？

> ID：10748913
> 
> 赞同：1
> 
> 时间：2012-05-25T05:28:19.780
> 
> 标签：xhtml

实际上我尝试了下面的 HTML 命令来静音 Flash 视频。

```
enter code here
<HTML>
<HEAD>
<meta http-equiv=Content-Type content="text/html;  charset=ISO-8859-1">
<TITLE>Sound OFF</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
<OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"       codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="500" HEIGHT="200" id="header123" ALIGN="">
<PARAM NAME=movie VALUE="file:///opt/python/data/107.swf?playSound=var_stop"> 
<PARAM NAME=quality VALUE=high>
<PARAM NAME=bgcolor VALUE=#FFFFFF> 
<EMBED src="file:///opt/python/data/107.swf?playSound=var_stop" quality=high bgcolor=#FFFFFF WIDTH="500" HEIGHT="200" NAME="header123" ALIGN="" TYPE="application/x-shockwave-flash">
</EMBED>
</OBJECT>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:09:45.383

Afaik，您不能通过 HTML 将 Flash 视频静音，除非开发人员在 Flash 中为其实现了参数。

如果在 Flash 内部处理此参数，playSound=var_stop 可以工作 - 但可能不是。

您必须更改闪光灯，以便它可以处理此参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T09:20:10.077

```
var tt=[];
tt=document.getElementsByTagName('object');

for (i in tt) {
       try {
           typeof tt[i] == 'function' && tt[i].mute();
        } catch (err) {
        }
    } 
```

它停止当前页面上的所有对象声音。它对我有用

# html - 打印 html 页面的一部分

> ID：10748914
> 
> 赞同：2
> 
> 时间：2012-05-25T05:28:39.810
> 
> 标签：html, css, printing, media

我正在用 html (LAMP) 制作一个非常大的数据输入表单。

我需要将其打印在预先打印的纸张上。所以标签不应该打印。

是否有任何简单的 CSS 规则规定不打印某些元素？或者我应该以编程方式一次关闭它们（标签）？

谢谢！

PS：它至少必须在 FF 和 IE 上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:31:11.963

使用隐藏 ( `visibility:hidden`) 所有预打印数据的打印样式表。

```
<link rel="stylesheet" type="text/css" href="print.css" media="print"> 
```

此样式表中的规则仅在打印期间应用。但是，您可以通过暂时更改`media="print"`为`media="all"`.

*[在这里](http://www.webcredible.co.uk/user-friendly-resources/css/print-stylesheet.shtml)阅读更多。*

# java - 具有不同的休眠投影

> ID：10748917
> 
> 赞同：1
> 
> 时间：2012-05-25T05:28:47.440
> 
> 标签：java, hibernate

我试图在表“Test”中的“testType”列上得到不同的值。我也想在我的列表中同时获得“testType”和“testId”。为此，我正在这样做，但它没有应用 distinct ，给了我重复的结果。

知道如何解决这个问题吗？

```
Session session = sessionFactory.openSession();
Criteria crit = session.createCriteria(Test.class);
ProjectionList proList = Projections.projectionList();
proList.add(Projections.property("testType"));
proList.add(Projections.property("testId"));
crit.setProjection(proList);
crit.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
List rsList = crit.list(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:56:55.090

获取 testType 的不同值

```
Session session = sessionFactory.openSession();
List results = session.createCriteria(Test.class);
    .setProjection(Projections.distinct(Projections.property("testType")))
    .list(); 
```

但是要获取 id 也不能选择它，因为每种类型可能有很多 id，例如：

```
testId | testType
-----------------
1      | type1
2      | type2
3      | type1
4      | type2
6      | type3
7      | type3 
```

应该`Select Distinct(testType), testid`返回什么？

1.  (type1, 1), (type2, 2), (type3, 6)
2.  (type1, 3), (type2, 4), (type3, 7)
3.  (type1, 1), (type2, 4), (type3, 6)

1)

```
Session session = sessionFactory.openSession();
List results = session.createCriteria(Test.class);
    .setProjection(Projections.projectionList()
        .add(Projections.group(Projections.property("testType"))))
        .add(Projections.Min(Projections.property("testid")))))
    .list(); 
```

2)

```
Session session = sessionFactory.openSession();
List results = session.createCriteria(Test.class);
    .setProjection(Projections.projectionList()
        .add(Projections.group(Projections.property("testType"))))
        .add(Projections.Max(Projections.property("testid")))))
    .list(); 
```

# java - 安卓 xmpp 库

> ID：10748923
> 
> 赞同：4
> 
> 时间：2012-05-25T05:29:33.070
> 
> 标签：java, android, xmpp

我想在android中制作一个聊天应用程序。他们中的大多数建议 smack/asmack 库。除了 smack 什么是可用的，因为 smack 库是不稳定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T09:50:58.607

如果您在使用 Smack 时遇到问题，请确保您尝试过 aSmack，尤其是[这个版本](https://github.com/Flowdalic/asmack)（它已经进行了一些实质性的改进，原来的版本似乎不再保留）。

如果您对“稳定性”有疑问，那么将这些问题作为单独的问题提出可能是值得的（如果您还没有的话）。

最后，我知道至少有一个 Java 库可以在 Andoid 上运行，[Stroke](http://swift.im/git/stroke)。它还处于早期阶段，我相信它还没有适用于 Android 的 DNS 库，但可以将它与一个支持的 DNS 库链接起来。它是从头开始编写的，以匹配积极参与这些规范开发的开发[人员的最新](http://swift.im/about/)[XMPP规范。](http://xmpp.org/rfcs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:48:25.950

我怀疑 aSmack 不稳定。它[被](https://play.google.com/store/apps/details?id=com.googlecode.gtalksms) [各种](https://play.google.com/store/apps/details?id=info.guardianproject.otr.app.im)[应用](https://play.google.com/store/apps/details?id=com.xabber.android)程序[使用](https://play.google.com/store/apps/details?id=com.beem.project.beem) [。](https://play.google.com/store/apps/details?id=org.yaxim.androidclient) 仅举几个。

[作为一般经验法则：如果您在 XSF 库列表中](http://xmpp.org/xmpp-software/libraries/)找不到为您的平台列出的库，那么很可能没有。

# objective-c - 如何将文本阴影添加到 UITextView？

> ID：10748924
> 
> 赞同：2
> 
> 时间：2012-05-25T05:29:56.147
> 
> 标签：objective-c, ios, uitextview, quartz-graphics

我一直在寻找一种简单的方法来为 UITextView 的*文本*添加阴影，就像你可以在 UILabel 中做的那样。我发现[这个问题](https://stackoverflow.com/questions/2851248/how-to-apply-text-shadow-to-uitextview)的答案应该是这样做的，但是，为什么会这样是没有意义的。

**问题**：给 UITextView 本身的图层添加阴影不应该影响里面的文本，而是应该影响整个对象，对吧？

在我的情况下，即使将阴影添加到 textview 的图层也没有任何效果（即使在添加 QuartzCore 标头之后）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T06:01:00.887

我试过了，发现你应该**将 UITextView 的背景色设置为透明**，这样阴影应该可以工作

```
 UITextView *text = [[[UITextView alloc] initWithFrame:CGRectMake(0, 0, 150, 100)] autorelease];
    text.layer.shadowColor = [[UIColor whiteColor] CGColor];
    text.layer.shadowOffset = CGSizeMake(2.0f, 2.0f);
    text.layer.shadowOpacity = 1.0f;
    text.layer.shadowRadius = 1.0f;
    text.textColor  = [UIColor blackColor];

            //here is important!!!!
    text.backgroundColor = [UIColor clearColor];

    text.text = @"test\nok!";
    text.font = [UIFont systemFontOfSize:50];

    [self.view addSubview:text]; 
```

![这是效果](../Images/76488c20e4b693d2264cfc6a06216711.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-16T06:41:54.803

@adali 的答案会起作用，但它是错误的。您不应该将阴影添加到`UITextView`自身以影响内部的可见视图。如您所见，通过`UITextView`对光标应用阴影也会产生阴影。

应该使用的方法是 with `NSAttributedString`。

```
NSMutableAttributedString* attString = [[NSMutableAttributedString alloc] initWithString:textView.text];
NSRange range = NSMakeRange(0, [attString length]);

[attString addAttribute:NSFontAttributeName value:textView.font range:range];
[attString addAttribute:NSForegroundColorAttributeName value:textView.textColor range:range];

NSShadow* shadow = [[NSShadow alloc] init];
shadow.shadowColor = [UIColor whiteColor];
shadow.shadowOffset = CGSizeMake(0.0f, 1.0f);
[attString addAttribute:NSShadowAttributeName value:shadow range:range];

textView.attributedText = attString; 
```

但是`textView.attributedText`对于iOS6。如果您必须支持较低版本，您可以使用以下方法。

```
CALayer *textLayer = (CALayer *)[textView.layer.sublayers objectAtIndex:0];
textLayer.shadowColor = [UIColor whiteColor].CGColor;
textLayer.shadowOffset = CGSizeMake(0.0f, 1.0f);
textLayer.shadowOpacity = 1.0f;
textLayer.shadowRadius = 0.0f; 
```

# tfs - 一旦 Team Foundation Service Preview 退出预览版，我的源代码会丢失吗？

> ID：10748926
> 
> 赞同：2
> 
> 时间：2012-05-25T05:30:14.630
> 
> 标签：tfs, azure-devops

有谁知道如果我将一些源代码放在“Team Foundation Service Preview”（tfspreview.com：tfs on the cloud）上，一旦程序超出预览阶段，所有源代码都会丢失吗？

我打算在它上线后购买，只是看看它是否可行现在开始使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T21:12:30.750

我们还没有服务的“商业”路径。但是，如果我们要向您收取服务费，我们将确保有一条路径可以将您的数据从云端移动到您的本地 TFS 安装中

Ewald Hofman（TFS 项目经理）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:52:00.740

不，您不会失去任何东西，您将有两种可能性：

1.  为服务付费并保持原样。
2.  回到团队项目集合，以便您在本地（内部）TFS 服务器上恢复它。

# c# - PRISM MEF 中 Module 和 SHELL 之间的通信

> ID：10748928
> 
> 赞同：1
> 
> 时间：2012-05-25T05:30:16.300
> 
> 标签：c#, shell, module, prism, mef

我有一个带有接口 IModuleMainService 的模块和一个事件。

例如`[Export(typeof(IModuleMainService))]`

我有带接口 IMainService 的 SHELL。

例如`[Export(typeof(IMainService))]`

在 ModuleMain 我有导入`[Import(typeof(IMainService)]`

在这种情况下应用程序工作，但我想与模块和外壳通信。

我尝试将导入插入到 Shell.cs 例如

```
[Import]
public IModuleMainService ModuleMainService { get; set; } 
```

但是我运行应用程序并出现错误，请参见下文。如果我评论`[Import] public IModuleMainService...`应用程序运行成功。哪里有问题？

重点是：**SHELL 中 Module 类的 Consum 事件。**

System.ComponentModel.Composition 警告：1：ComposablePartDefinition 'Main.Silverlight.Views.Shell' 已被拒绝。组成保持不变。由于以下错误，更改被拒绝： 合成产生了单个合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。

1) 没有找到与约束匹配的有效导出 '((exportDefinition.ContractName == "Main.ViewModels.ShellViewModel") AndAlso (exportDefinition.Metadata.ContainsKey("ExportTypeIdentity") AndAlso "Main.ViewModels.ShellViewModel".Equals( exportDefinition.Metadata.get_Item("ExportTypeIdentity"))))'，无效的导出可能已被拒绝。

导致：无法在“Main.Silverlight.Views.Shell”部分设置导入“Main.Silverlight.Views.Shell.ViewModel (ContractName="Main.ViewModels.ShellViewModel")”。元素：Main.Silverlight.Views.Shell.ViewModel (ContractName="Main.ViewModels.ShellViewModel") --> Main.Silverlight.Views.Shell --> AssemblyCatalog (Assembly="Main, Version=1.0.0.0, Culture=中立，PublicKeyToken=null")

System.ComponentModel.Composition 中发生了“System.ComponentModel.Composition.ImportCardinalityMismatchException”类型的第一次机会异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:00:19.130

在棱镜编程中，模块和外壳应分开。不得声明从一个模块到另一个模块或外壳的直接引用。您需要做的是使用`EventAggregator`以便在模块或外壳之间交换消息。

另一种使用方法`IEventAggregator`是使用 RegionScopes 来传递消息。

总而言之，不要在模块和外壳之间创建直接引用；使用 IEventAggregator 交换消息并在所有模块和外壳程序重用的公共库中声明您的消息携带事件。

# select - 按 T ab 选择 tinymce 中某个元素的文本

> ID：10748931
> 
> 赞同：1
> 
> 时间：2012-05-25T05:30:34.367
> 
> 标签：select, text, tabs, tinymce, selection

**我如何实现以下目标？**

![启动时：突出显示标题](../Images/1578ce8b315ccc81f05fd015fc9ebca5.png) ![按 T​​ab：突出显示说明](../Images/1c79b982e5891adbf3cdb6738c6484d2.png) ![按 T​​ab：突出显示内容](../Images/23bc0ad10140324b3ebafbfb0d55703d.png)

> [第一张图片] 启动时：突出显示标题
> 
> [第二张图片] 按 Tab：突出显示说明
> 
> [第三张图片] 按 Tab：突出显示内容
> 
> 再次按 Tab 返回以突出显示标题并继续

以下是tinymce内容：

```
 <hr>
    <div id='title'>
        TITLE
    </div>
    <hr>
    <div id='description'>
        DESCRIPTION
    </div>
    <hr>
    <div id='content'>
        CONTENT
    </div> 
```

以下是我选择文本的当前功能。

```
 // the problem is that it doesn't select the text but put the carret in the first part of the text
    // looks like this (|*carret) --> |TITLE or |DESCRIPTION or |CONTENT
    // id = #title, #description, #content
    tinyMceSelectText = function (id) {
            if ($('#id_of_tinymce_iframe').contents().find(id).length > 0) {
            var $itemNode = $('#content_editor_ifr').contents().find(id);
            var text = '';
            var items = $itemNode.contents();
            // clean up the span and other elements automatically inserted by tinymce
            $.each(items, function (i, val) {
                if ($(val).length == 0) {
                    return;
                }
                if ($(val).prop('nodeName') == 'BR') {
                        text += '<br/>';
                } else {
                    var t = $(val).text();
                    text += t;
                }
            })
            $itemNode.html(text);
            var len = $itemNode.contents().length - 1;
            var textNode = $itemNode.contents()[len];
            start = (start === undefined) ? 0 : start;    
            end = (end === undefined) ? textNode.length : end;

            var ed = tinyMCE.activeEditor;
            var range = ed.selection.getRng(true);

            start = (start === undefined)? 0 : start;
            end = (start === undefined)? 0 : end;

            try {
                range.setStart(textNode, start);
                range.setEnd(textNode, end);
                range.collapse(true);
                ed.selection.setRng(range);
                //ed.selection.collapse(false); // added to put carret to the last part of the text
                var items = $itemNode.contents();
            } catch (err) {}
        }
    } 
```

# c# - 是否可以在没有数据绑定的情况下在 gridview 中添加新行？ASP.NET

> ID：10748933
> 
> 赞同：2
> 
> 时间：2012-05-25T05:30:42.417
> 
> 标签：c#, asp.net-mvc, gridview

是否可以在 gridview 中添加新行而无需再次将数据绑定到 gridview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T05:35:31.243

如果您使用 DataTable 作为数据源，首先将新的数据表添加到数据表中，然后将此更改的数据表设置为网格视图的数据源。

# php - 链接到 Facebook Tab 应用程序中的某个页面

> ID：10748941
> 
> 赞同：2
> 
> 时间：2012-05-25T05:31:27.550
> 
> 标签：php, facebook

我正在编写一个 PHP 应用程序，它将作为页面内的 Facebook 选项卡。在应用程序中，用户可以选择分享照片，无论是在 Facebook 上还是作为链接放在其他网站上。Facebook 的部分很简单，但我的问题是这个。

如何向某人提供指向 Facebook 选项卡内页面的链接？

例如，选项卡加载网站的直接 url 是： http: *//my-site.com/tab*

在该网站内，我有一个看起来像*http://my-site.com/tab/photo.php?id=3的网址*

Facebook 选项卡的 url 类似于[http://facebook.com/my-page/app_3932734623842](http://facebook.com/my-page/app_3932734623842)

我想要的是让用户能够在他们的推特上粘贴一个链接，这将引导他们直接进入Facebook 应用程序内的页面*http://my-site.com/tab/photo.php?id=3 。*

可能的？如何？:(

谢谢！

# java - primefaces 3.2 menuItem bean变量未在操作中设置

> ID：10748942
> 
> 赞同：0
> 
> 时间：2012-05-25T05:31:28.963
> 
> 标签：java, jsf, primefaces

我有一个带有primefaces 的菜单和选项卡控件（带有数据表）的xhtml 页面。数据表根据“类型”变量（在 bean 中）获取值。单击每个菜单项时会触发一个操作（onType("param")），并且在 bean 中设置类型变量（如下所示）。但是现在当我在 tabView 中选择一个选项卡时，类型变量再次设置为 null。为什么会这样。

xhtml代码：

```
 <h:form id="frm">
  <p:menu>
    <p:menuitem value="price losers" action='#{equityBean.onType("losers")}'/>
    <p:menuitem  value="price gainers"/>
    <p:menuitem  value="price volume"/>
  </p:menu>
  <p:tabView activeIndex="#{equityBean.activeIndex}">
    <p:ajax event="tabChange" listener="#{equityBean.onChange}" update=":frm"/>
    <p:tab title="NSE">                   

      <p:dataTable value="#{equityBean.scripList}" var="scrip">
        ....                        
      </p:dataTable>
    </p:tab>
    <p:tab title="BSE">
      <p:dataTable value="#{equityBean.scripList}" var="scrip">
        .....
      </p:dataTable>
    </p:tab>
  </p:tabView>
</h:form> 
```

豆代码：

```
public void onType(String type)
{
    this.type=type;
}

public void onChange(TabChangeEvent event) {
    exchange=event.getTab().getTitle();
}
   public List<MasterScrip> getScripList() {
      if(type!=null)
      {
       if(type.equalsIgnoreCase("losers"))
       {
        scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByPriceLosers(exchange);
        return scripList;
       }
       else if(type.equalsIgnoreCase("gainers"))
       {
        scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByPriceLosers(exchange);
        return scripList;
       }
       else
       {
           scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByVolumeType(exchange);
       return scripList;
       }
      }
      else
      {
          scripList=new ArrayList<MasterScrip> ();
     scripList=getScripByVolumeType(exchange);
       return scripList;
      }
    } 
```

我哪里错了？

**编辑（web.xml）**：

```
 <context-param>
    <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
    <param-value>true</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:15:54.883

声明为的bean`@ViewScoped`有时表现得像`@RequestScoped`bean，并在每次请求或回发时重新创建。原因在这篇优秀的博客文章中有所描述：[@ViewScoped 在标记处理程序中失败](http://balusc.blogspot.de/2011/09/communication-in-jsf-20.html#ViewScopedFailsInTagHandlers)。

在引用的文章中，列出了一些可能的解决方案。您还可以将值保存在会话范围内，并仅将其注入您的视图/请求范围 bean。

# opencv - 立体相机-外在矩阵

> ID：10748943
> 
> 赞同：0
> 
> 时间：2012-05-25T05:31:34.410
> 
> 标签：opencv, camera-calibration

我已经校准了立体相机并获得了外在矩阵。我知道第一台和第二台相机坐标系之间的平移向量“T”。

```
T: [ -35.831, 36.364,18.837] 
```

如何计算相机之间的基线距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:17:41.310

您可以使用毕达哥拉斯理论找到向量 T 的范数。以下是[GCSE Bitesize](http://www.bbc.co.uk/schools/gcsebitesize/maths/geometry/pythagoras3drev1.shtml)的示例：

**例子**

这个长方体的边长分别为 2cm、3cm 和 6cm。

![长方体](../Images/bc2a9fed6568c83767473fec1cb2ba3b.png)

计算对角线 AF 的长度。

**解决方案**

首先使用三角ABC中的毕达哥拉斯定理求长度AC。

AC^2 = 6^2 + 2^2
AC = √40

您不需要找到根，因为我们需要在接下来的步骤中对其进行平方。接下来我们使用三角 ACF 中的毕达哥拉斯定理来求长度 AF。

AF^2 = AC^2 + CF^2
AF^2 = 40 + 3^2
AF = √49
AF = 7cm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-15T20:55:37.723

baseline is the norm of translation vector. as you told translation from camera1 to camera is T: [ -35.831, 36.364,18.837] then the baseline length is

```
baseline=sqrt(T(1)*T(1)+T(2)*T(2)+T(3)*T(3)) 
```

or briefly

```
baseline=norm(T) 
```

# javascript - 隐藏选择下拉菜单的元素

> ID：10748949
> 
> 赞同：0
> 
> 时间：2012-05-25T05:32:03.697
> 
> 标签：javascript, html

我有 2 个选择下拉菜单，每个下拉菜单都有一堆元素（只是下面的一个示例）。

```
<select id="one">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>

<select id="two">>
<option>2</option>
<option>4</option>
<option>6</option>
<option>8</option>
</select> 
```

选择第一个下拉元素时，如何在第二个下拉列表中找到一些选项。（例如，如果在 #1 下拉菜单中选择了 1，则 1+2=2 选项应隐藏在下拉菜单 #2 中，如果在 #1 中选择 2，则 2+2=(4) 应在 #2 中隐藏。 ETC。

我想我需要用这样的方法来处理它：

```
 document.getElementById("one").onchange = function( ){
            var selectedOption = document.getElementById("one").options[document.getElementById("one").selectedIndex].text; 
        } 
```

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T05:58:02.497

没有 jQuery：

```
document.getElementById("one").onchange = function( ){
    var selectedOption = this.options[this.selectedIndex].text;

    var option = getElementByText(document.getElementById("two"), selectedOption * 2);
    option.style.display = "none"; // or u car remove it here
}

function getElementByText(parent, text) {
    for (var i = 0; i < parent.children.length; i ++) {
        if (parent.children[i].text == text) {
            return parent.children[i];
        }
    }
    return false;
} 
```

[jsfiddle](http://jsfiddle.net/uRAep/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T05:56:47.450

选择 1 删除 2、2 删除 4、3 删除 6、4 从第二个下拉列表中删除 8。

```
 <script>
    function updateSet2(sel){
      var select2 = document.getElementById("two");
      select2.options.length = 0; //clear

      //repopulate
      select2.options[0] = new Option('2', '2');
      select2.options[1] = new Option('4', '4');
      select2.options[2] = new Option('6', '6');
      select2.options[3] = new Option('8', '8');

      //remove selected
      select2.options.remove(sel - 1);
    }

    var select1 = document.getElementById("one");
    select1.onchange = function(e){
      var selected = this.options[this.selectedIndex]
      updateSet2(selected.text);
    }
  </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T07:21:36.903

另外一个选项：

```
<script>
var doChange = (function() {
  var storedSel;

  return function () {
    var sel0 = this;
    var sel1 = sel0.form.sel1;
    var opt;

    storedSel = storedSel || sel1.cloneNode(true);

    // Show all options of sel1
    sel1.parentNode.replaceChild(storedSel.cloneNode(true), sel1);
    sel1 = sel0.form.sel1;

    // Hide some based on selection
    if (sel0.value == 1) {
      sel1.removeChild(sel1.options[3]);
      sel1.removeChild(sel1.options[1]);

    } else if (sel0.value == 2) {
      sel1.removeChild(sel1.options[2]);
    }
  }
}());

window.onload = function() {
  document.forms.f0.sel0.onchange = doChange;
}
</script>

<form id="f0">
  <select name="sel0" size="4">
    <option value="0">0
    <option value="1">1
    <option value="2">2
    <option value="3">3
  </select>
  <select name="sel1" size="4">
    <option value="4">4
    <option value="5">5
    <option value="6">6
    <option value="7">7
  </select>
</form> 
```

# javascript - 查找 Rangy 标记 ID

> ID：10748956
> 
> 赞同：2
> 
> 时间：2012-05-25T05:32:48.127
> 
> 标签：javascript, object, selection, multidimensional-array, rangy

我正在尝试查找已保存的范围选择的 markerId 值。

我尝试了以下方法：

```
marker = savedSel.rangeInfos;
console.log(marker.markerId); 
```

但它返回“未定义”。直接输出marker变量会返回一个明确有“markerId”作为item的对象。我似乎无法到达多维对象中的第三维。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:00:15.547

`rangeInfos`是一个数组，因为在 Firefox 中选择可以有多个范围。如果您保存了一个折叠的选择（即没有选择，只是一个插入符号），那么您可以从第一个也是唯一的成员获取标记 ID `rangeInfos`：

```
var savedSel = rangy.saveSelection();
console.log(savedSel.rangeInfos[0].markerId); 
```

# python - 从 IP 地址获取主机名

> ID：10748959
> 
> 赞同：8
> 
> 时间：2012-05-25T05:32:58.267
> 
> 标签：python, linux, network-programming

我的问题是将 IP 地址与其主机名匹配。

如果IP地址是公共IP，那么一个简单的`socket.gethostbyaddr(ip)`解决方法，但我的问题是私有IP，即网络的IP。

如何从网络 IP 地址获取主机名？有没有办法找出主机名？

我正在尝试在 Linux 上执行此操作。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-25T13:49:58.883

您已经获得了所需的 Python 代码

```
socket.gethostbyaddr(ip) 
```

您需要的是基础设施方面的东西。要获取内部主机名，您需要查询相关网络的内部 DNS 服务器。较大的网络几乎总是有内部 DNS 服务，但一些较小的网络没有，因为它们依赖其他方式（直接 IP、NETBIOS、Bonjour 等）来查找各种资源。

**TL:DR**：您需要查询相关网络的内部 DNS 服务

# jquery - 文本未完全显示在 jquery 页脚的选择菜单中

> ID：10748963
> 
> 赞同：0
> 
> 时间：2012-05-25T05:33:28.747
> 
> 标签：jquery

文本未完全显示在 jquery 页脚的选择菜单中，从文本的一半显示 3 个点（...）

下面是代码：

```
<div data-role="footer" id="fdrSelect" data-theme="b">

   <select id="CategoryMenu"
           data-theme="b" data-icon="gear" data-inline="true"
           data-native-menu="false"data-iconpos="right"
           onchange="changecountryclick()">

     <option value="">Select Country</option>
     <option value="in">India</option>
     <option value="au">Australia</option>
     <option value="ca">Canada</option>
     <option value="nz">New Zealand</option>
     <option value="sa">South Africa</option>
     <option value="us">US</option>
     <option value="uk">UK</option>
   </select>

</div> 
```

# php - 函数中的mysql查询和结果语句

> ID：10748965
> 
> 赞同：1
> 
> 时间：2012-05-25T05:33:38.920
> 
> 标签：php, mysql, function

我想知道我一直在尝试将 MySQL 查询和 MySQL 结果代码放入这样的 PHP 函数中

```
 function setting($claim){
    $query = "SELECT `cases`, `hg`, `surname`, `firstname`, `type`, `claim`, `charge`, `damage`, `payment`, `repair`, `returned`, `comments`, `cost` FROM `rep_log` WHERE claim='$claim'";
    $result = mysql_query($query) or die(mysql_error());
} 
```

我正在尝试使用它，以便我可以更轻松地更改正在选择的内容，而不必为了更改查询而拥有大量不同的变量和东西......所以基本上我所做的是

```
echo setting("warrenty"); 
```

但我收到一个错误：

> **警告**：mysql_fetch_row() 期望参数 1 是资源，字符串在 ...

所以我想知道是否有可能将 MySQL 查询和结果放入一个函数中，或者它只是一些不可能发生的事情......

如果可能的话，任何帮助都会很棒。

完整代码

```
<?
// connection with the database
$dbhost = "localhost";
$dbuser = "root";
$dbpass = "";
$dbname = "netbookdb";
$result="";
mysql_connect($dbhost,$dbuser,$dbpass);
mysql_select_db($dbname);

// require the PHPExcel file
require 'Classes/PHPExcel.php';

// simple query
 function setting($claim){
    $query = "SELECT `cases`, `hg`, `surname`, `firstname`, `type`, `claim`, `charge`, `damage`, `payment`, `repair`, `returned`, `comments`, `cost` FROM `rep_log` WHERE claim='$claim'";
    $result = mysql_query($query) or die(mysql_error());
}

    // Create a new PHPExcel object
   $objPHPExcel = new PHPExcel();
   $objPHPExcel->getActiveSheet()->setTitle('Insurance');

echo setting('Warrenty');

$rowNumber = 1;
    while ($row = mysql_fetch_row($result)) {
       $col = 'A';
       foreach($row as $cell) {
          $objPHPExcel->getActiveSheet()->setCellValue($col.$rowNumber,$cell);
          $col++;
       }
       $rowNumber++;
    }

   // Save as an Excel BIFF (xls) file
   $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');

   header('Content-Type: application/vnd.ms-excel');
   header('Content-Disposition: attachment;filename="myFile.xls"');
   header('Cache-Control: max-age=0');

   $objWriter->save('php://output');
   exit();

echo 'a problem has occurred... no data retrieved from the database';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:36:58.637

您**没有从函数返回任何结果**。

采用`return $result;`

**更新 1：**

您还没有标记`$result variable`您尝试使用的对象，`mysql_fetch_row`因此**首先从函数分配它返回值，然后使用它**。

**更新 2：**

```
function setting($claim){
    $query = "SELECT `cases`, `hg`, `surname`, `firstname`, `type`, `claim`, `charge`, `damage`, `payment`, `repair`, `returned`, `comments`, `cost` FROM `rep_log` WHERE claim='$claim'";
    $result = mysql_query($query) or die(mysql_error());
    return $result;
} 
```

然后在`mysql_fetch_row`方法中使用的变量中获取函数的输出。IE

```
$result = setting('Warrenty'); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:47:50.920

您正在分配一个本地“$result”变量，因此“mysql_fetch_row($result)”正在使用字符串变量“$result”，初始化为“$result = ''”，这不是资源，因此会引发异常.

在“设置”功能中，添加“global $result;” 线：

```
function setting($claim){
global $result;
    $query = "...;
    ...
} 
```

# haskell - 将任何 Literate Haskell 渲染为 PDF、HTML 或类似文件

> ID：10748966
> 
> 赞同：5
> 
> 时间：2012-05-25T05:33:47.580
> 
> 标签：haskell, latex

如何将 Literate Haskell 文件转换为更容易阅读的文件？当我尝试做显而易见的事情时会发生以下情况：

```
$ latex Check.lhs
This is pdfTeX, Version 3.1415926-1.40.10 (TeX Live 2009/Debian)
entering extended mode
(./Check.lhs
LaTeX2e <2009/09/24>
Babel <v3.8l> and hyphenation patterns for english, usenglishmax, dumylang, noh
yphenation, loaded.

! LaTeX Error: Environment code undefined.

See the LaTeX manual or LaTeX Companion for explanation.
Type  H <return>  for immediate help.
 ...                                              

l.7 \begin{code} 
```

我不熟悉处理 tex 文件的常用命令。什么是我可以用来将任何`.lhs`文件转换为例如 PDF 或 HTML 的简单、严肃的方式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T05:44:01.037

在这个空间中，您可以使用 lhs2TeX，它有很多选项，但可以在格式化方面提供非常好的结果。它有相当广泛的文档，您可以在[主页](http://www.andres-loeh.de/lhs2tex/)上找到。

使用示例（直接来自手册）是

```
\documentclass{article}
%include polycode.fmt
\begin{document}
This is the famous ‘‘Hello world’’ example,
written in Haskell:
\begin{code}
main :: IO ()
main = putStrLn "Hello, world!"
\end{code}
\end{document} 
```

和都是 TeX 命令，用于指示您想要什么样的文档，以及它在哪里开始/`\documentclass{article}`结束`\begin{document}`。`\end{document}`

这`%include polycode.fmt`实际上是 TeX 中的注释，但会向 lhs2TeX 指示在处理`.lhs`文件时使用什么格式。

你可以编译这个例子

```
$ lhs2TeX -o HelloWorld.tex HelloWorld.lhs
$ pdflatex HelloWorld.tex 
```

对于 HTML，您还可以尝试[Pandoc](http://johnmacfarlane.net/pandoc/README.html)，它可以为您提供各种输出格式（pdf、html、rtf 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T05:41:45.627

您想使用[lhs2tex](http://hackage.haskell.org/package/lhs2tex)预处理您的识字文件。

# usb - 找不到 usb_driver 文件夹，请使用 Android SDK manager windows 7 32 安装 Google USB Driver Packager

> ID：10748976
> 
> 赞同：0
> 
> 时间：2012-05-25T05:34:42.417
> 
> 标签：usb, driver, packager

在让我的应用程序在模拟器中运行后，我现在想在我的 Sony Xperia Arc Android 手机上对其进行测试。我按照谷歌的说明在这里[http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)但无法加载他们的 USB 驱动程序。

当我通过提供的 USB 数据线将手机插入计算机时，Windows 7 会安装它自己的驱动程序，并且没有机会指向位于此处的谷歌驱动程序：C:\Program Files\Android\android-sdk\附加功能\google\usb_driver\android_winusb.inf。

当我转到设备管理器并右键单击设备管理并尝试更新驱动程序软件以指向谷歌驱动程序时，它说它已经有了最好的驱动程序并且不会更改它！（即使它不起作用，即没有为手机显示驱动器标签，而且设备管理器显示一个！）

我花了很多时间阅读几十篇有类似问题的帖子，但没有适合我的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T22:20:12.697

从这里下载驱动程序：

[http://developer.sonymobile.com/cws/devworld/downloads/download/sonyericssonxperiaarcxperianeoxperiaplaydrivers](http://developer.sonymobile.com/cws/devworld/downloads/download/sonyericssonxperiaarcxperianeoxperiaplaydrivers)

# function - 条件 PowerShell 参数

> ID：10748978
> 
> 赞同：14
> 
> 时间：2012-05-25T05:35:15.987
> 
> 标签：function, powershell, parameters, conditional-statements

有没有办法在 PowerShell 函数中根据某些条件（例如，如果其中一个参数不存在或为假）强制使用某些参数？

我的想法是能够以两种方式调用函数。一个具体的例子是一个从 SharePoint 获取列表的函数 - 我应该能够使用列表的相对 URL（一个也是唯一的参数）或使用 Web URL 和列表显示名称（两个参数，都是必需的，但是仅当不使用列表相对 URL 时）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-25T06:02:53.383

正如 Christian 所指出的，这可以通过 ParameterSetNames 来完成。看看这个例子：

```
function Get-MySPWeb {
    [CmdletBinding(DefaultParameterSetName="set1")]
    param (
        [parameter(ParameterSetName="set1")] $RelativeUrl,
        [parameter(ParameterSetName="set2")] $WebUrl,
        [parameter(ParameterSetName="set2", Mandatory=$true)] $DisplayName
    )
    Write-Host ("Parameter set in action: " + $PSCmdlet.ParameterSetName)
    Write-Host ("RelativeUrl: " + $RelativeUrl)
    Write-Host ("WebUrl: " + $WebUrl)
    Write-Host ("DisplayName: " + $DisplayName)
} 
```

如果你运行它，`-RelativeUrl Foo`它将绑定到“set1”。如果你在没有任何参数的情况下调用这个函数，它也会绑定到“set1”。

（**注意 -** *当 PowerShell v3（带有 Windows 8 消费者预览版）中未提供任何参数时，它将绑定到“set1”，但是除非您添加`[CmdletBinding(DefaultParameterSetName="set1")]`到参数块，否则它将在 PowerShell v2 中绑定错误。感谢 @x0n 的 DefaultParameterSetName 提示！* )

如果您尝试使用两组中的参数值运行它，您将收到错误消息。

如果您使用它运行它，`-WebUrl Bar`它将提示您输入 DisplayName 的参数值，因为它是必需参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-17T10:02:52.327

还有一个更强大的选项，称为动态参数，它允许根据其他参数的值或任何其他条件动态添加参数。

您必须以不同的方式构建脚本，像往常一样声明常规参数，并包括一个`DynamicParam`用于创建动态参数的`Begin`块，一个用于使用动态参数初始化变量的块，以及一个`Process`由脚本运行的代码块，它可以使用常规参数和在 中初始化的变量`Begin`。它看起来像这样：

```
param( 
  # Regular parameters here
)

DynamicParam {
  # Create a parameter dictionary
  $runtimeParams = New-Object System.Management.Automation.RuntimeDefinedParameterDictionary

  # Populate it with parameters, with optional attributes
  # For example a parameter with mandatory and pattern validation
  $attribs = New-Object  System.Collections.ObjectModel.Collection[System.Attribute]

  $mandatoryAttrib = New-Object System.Management.Automation.ParameterAttribute
  $mandatoryAttrib.Mandatory = $true
  $attribs.Add($mandatory)

  $patternAttrib = New-Object System.Management.Automation.ValidatePatternAttribute('your pattern here')
  $attribs.Add($patternAttrib)

  # Create the parameter itself with desired name and type and attribs
  $param = New-Object System.Management.Automation.RuntimeDefinedParameter('ParameterName', String, $attribs)

  # Add it to the dictionary
  $runtimeParams.Add('ParameterName', $param)

  # Return the dictionary
  $ruintimeParams
}

Begin {
  # If desired, move dynamic parameter values to variables
  $ParameterName = $PSBoundParameters['ParameterName']
}

Process {
  # Implement the script itself, which can use both regular an dynamic parameters
} 
```

当然，有趣的部分是您可以在`DynamicParam`节和`Begin`节上添加条件以根据任何内容创建不同的参数，例如其他参数值。动态参数可以具有任何名称、类型（字符串、整数、布尔值、对象...）和属性（强制、位置、验证集...），并且它们是在脚本执行之前创建的，以便您获取参数任何支持它的环境中的选项卡完成 (IntelliSense)，例如 PowerShell 控制台、[PowerShell ISE](https://technet.microsoft.com/en-us/library/dd315244.aspx)或 Visual Studio Code 编辑器。

一个典型的例子是根据常规参数的值创建一组不同的动态参数，方法是`if`在`DynamicParam`部分中使用 simple。

谷歌“PowerShell 动态参数”以获取更多信息，例如显示动态参数的帮助。例如：

*   [PowerShell 中的 PowerShell Magazine 动态参数](http://www.powershellmagazine.com/2014/05/29/dynamic-parameters-in-powershell/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:47:26.027

您需要使用[参数集命名](http://msdn.microsoft.com/en-us/library/ms714348%28VS.85%29.aspx)。

您可以将独占参数分配给不同的参数集名称。

# php - 我的 .htaccess 有什么问题？

> ID：10748983
> 
> 赞同：0
> 
> 时间：2012-05-25T05:35:36.390
> 
> 标签：php, .htaccess

有人能看出这有什么问题吗？

```
Options +FollowSymlinks

Options -Indexes

RewriteEngine On 
RewriteRule ^random-number-generator$ random-number-generator.php [L] 
RewriteRule ^calculator$ calculator.php [L] 
RewriteRule ^currency-converter$ currency-converter.php [L] 
RewriteRule ^youtube-statistics$ youtube-statistics.php [L] 
RewriteRule ^check-website-status$ /check-website-status.php [L] 
RewriteRule ^your-ip-address$ your-ip-address.php [L] 
RewriteRule ^contact-us$ contact-us.php [L]

RewriteCond %{HTTP_REFERER} !^http://themegahouse.com/.*$ [NC] 
RewriteCond %{HTTP_REFERER} !^http://themegahouse.com$ [NC] 
RewriteCond %{HTTP_REFERER} !^http://www.themegahouse.com/.*$ [NC] 
RewriteCond %{HTTP_REFERER} !^http://www.themegahouse.com$ [NC] 
RewriteRule .*\.(jpg|jpeg|gif|png|bmp)$ http://themegahouse.com/restricted [R,NC,L]

ErrorDocument 401 /not-found.php 
ErrorDocument 403 /restricted.php 
ErrorDocument 404 /not-found.php 
```

当我在浏览器中访问我网站的根目录时，我被禁止访问？

我确定是这个文件，因为当我删除它时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:38:19.933

您还需要允许空引用。将以下规则放在其他重写条件*之前：*

```
RewriteCond %{HTTP_REFERER} !^$ 
```

# android - 如何连接我的 android HTC 设备进行调试？

> ID：10748985
> 
> 赞同：1
> 
> 时间：2012-05-25T05:36:05.003
> 
> 标签：android, debugging, android-emulator, nullpointerexception

我可以将我的 Android 模拟器连接到设备 (HTC Wildfire Android 2.2.1) 吗？

实际上，我的应用程序在模拟器中运行良好，但是当我尝试在设备中安装我的应用程序时，它崩溃了。

为了调试这个问题，我想在设备中运行我的应用程序，直接连接它而不是检查模拟器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-07T14:21:59.733

1) 下载 HTC Sync Manager [http://www.htc.com/us/support/software/htc-sync-manager.aspx](http://www.htc.com/us/support/software/htc-sync-manager.aspx)

2）然后您需要为您拥有的特定手机下载“USB驱动程序”。所以对于我拥有的 HTC One M9 手机，我必须从这里下载 HTC USB 驱动程序： [http ://www.theandroidsoul.com/download-htc-one-m9-drivers-for-windows-adb-fastboot-74714 /](http://www.theandroidsoul.com/download-htc-one-m9-drivers-for-windows-adb-fastboot-74714/)

3）为您的手机打开“USB调试”。对于 HTC One M9，请访问

设置->关于->软件信息->更多->内部版本号

单击内部版本号 7 次，直到它说您是开发人员。

然后去

设置-> 开发人员选项-> 确保选中“USB 调试”。

4) 将您的手机插入笔记本电脑并从 Android Studio 运行您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T05:58:19.783

您需要在 /etc/udev/rules.d/51-android.rules 文件中为您的 HTC 设备创建一个条目，您可以从此[链接](http://developer.android.com/guide/developing/device.html)获取 HTC 的供应商 ID ，即 0bb4... 如果**51-android。**您的系统中不存在**规则文件，您需要创建该文件并添加以下行**

```
SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666" GROUP="plugdev" 
```

接下来，您需要使用以下命令重新启动 adb 服务器

```
su
$ adb kill-server
$ adb start-server
$ adb devices 
```

有关更多详细信息，请参阅[此链接](https://android.stackexchange.com/a/19546/9741)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T02:23:38.533

上面对大多数人来说都是正确的，这里是谷歌链接，其中包含更多细节。

[https://developer.android.com/studio/run/device.html](https://developer.android.com/studio/run/device.html)

仅供参考，如果运行 sudo fastboot/adb 有效，那么您可能已经为 fastboot 和 adb 安装了 debian 软件包。

虽然这很好而且很容易做到，但它们很少更新，你迟早会遇到问题。最好的办法是按照固件页面上的说明，下载 android sdk 并将 platform_tools 文件夹添加到系统范围的 env_vars 中。然后您将能够使用一个简单的命令进行更新，并能够在没有 root 的情况下从任何地方执行 fastboot/adb（只要您安装在非 root 位置）。您不会相信有多少人有 fastboot/adb 错误，您可以问他们您是否按照固件页面上的说明进行操作？他们会发誓他们做到了，您稍后会发现他们正在运行 Debian 软件包，而不是更新的 sdk bin（可能有一天会让您免于噩梦）。以正确的方式做事有很多话要说:)

这是[Google 固件页面 从头到尾阅读闪烁的说明！！](https://developers.google.com/android/images)

# touch - 更改煎茶触控面板的背景颜色

> ID：10748995
> 
> 赞同：3
> 
> 时间：2012-05-25T05:37:50.057
> 
> 标签：touch, extjs

我正在尝试更改面板的背景颜色。

请看代码：

```
panel: {
            centered: true,
            width: 200,
            height: 150,
            style: 'background-color: red',
            fullscreen: false,
            hidden: true,
            zIndex: 10,

       } 
```

但是***style: 'background-color: red'***声明不符合我的要求。它只会改变面板边框的颜色，而不是完整的面板背景颜色。

请提出相同的建议。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T15:42:21.330

这在 2.0.0 中对我有用：

```
Ext.application({
    launch : function() {
        Ext.Viewport.add([{
            xtype: 'panel',
            style: 'background-color:#F00'
        }]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:54:59.127

此链接：[http ://www.sencha.com/forum/archive/index.php/t-108823.html](http://www.sencha.com/forum/archive/index.php/t-108823.html)

暗示 background-color 是它自己的实体。我从未真正使用过 Sencha，但与我一起工作的一个小组曾考虑过使用它......例如

```
panel: {
        centered: true,
        width: 200,
        height: 150,
        background-color: red,
        fullscreen: false,
        hidden: true,
        zIndex: 10,

   } 
```

另外，我不知道这是否适用于您未使用的旧版本。

# java - java对象引用在方法中被改变并理解结果

> ID：10748996
> 
> 赞同：0
> 
> 时间：2012-05-25T05:37:52.117
> 
> 标签：java, object

跟随程序输出

```
In second v.i:15
In first v.i:20 
```

为什么在这两种情况下它都不是 15。传递了值的对象，然后在第二种方法中更改对象引用。第二种方法应该是 15，并且在第一种方法中似乎也应该是 15

```
public class Test {
    /**
     * @param args
     */
    class Value{
        public int i = 15;
    }
    public static void main(String[] args) {
        Test t = new Test();
        t.first();
    }
    public void first(){
        Value v = new Value();
        v.i = 25;
        second(v);
        System.out.println("In First v.i:" + v.i);
    }
    public void second(Value v){
        v.i = 20;
        Value val = new Value();
        v = val;
        System.out.println("In second v.i:" + v.i);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:45:35.863

当你传递`v`给`second`时，通过值传递的是存储在中的*引用*`v`。回想一下，Java 只有引用类型，没有像 C++ 这样的对象类型。在内部`second`，当您执行时，它会更改本地变量in`v.i = 20;`引用的同一对象。即使在内部重新分配参数，该更改仍然存在。`v``first``v``second`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:19:56.317

Java 方法实现是但不完全是. `call by`*`[reference to, in case of objects,]`*`value``call by reference`

您正在传递一个对象`Value v`意味着一个内联的方法范围变量`v`是指`v`在 method 中创建的对象`first()`。这意味着对由 引用的同一对象的任何修改`v`也将反映在调用端。但是，在您的方法中，您正在为但指向方法范围变量`second`创建一个新对象。这个新对象的内存位置与传入的方法参数不同。要识别差异，请检查使用它们的引用变量创建的对象。 `Value``v``hashCode`

因此更改`v`in 方法的实例变量`second`不会返回给方法的调用者，除非该方法返回更改的对象。你的方法在这里返回一个`void`。

大多数时候，程序员对调用者和被调用方法中使用的相同引用名称感到困惑。

查看以下示例以了解差异。我已经包含了`third' and a`第四种方法，以进一步解释它。

```
public class Test {
    class Value {
        int i = 15;
    }

    public void second( Value v ) {
        System.out.println( " 2.1.1: entered: v.i = " + v.i ); // 25
        System.out.println( " 2.1.2: v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );

        v = new Value();
        v.i = 9;
        System.out.println( " 2.2.1:   new V: v.i = " + v.i ); // 9
        System.out.println( " 2.2.2: v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
    } // second(v)

    public Value third( Value v ) {
        System.out.println( " 3.1.1:  entered: v.i = " + v.i ); // 25
        System.out.println( " 3.1.2:  v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );

        v = new Value();
        v.i = 9;
        System.out.println( " 3.2.1:  created: v.i = " + v.i ); // 9
        System.out.println( " 3.2.2:  v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );

        return v;
    } // third(v)

    public Value fourth( final Value v ) {
        System.out.println( " 4.1.1:entered: v.i = " + v.i ); // 9
        System.out.println( " 4.1.2:v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );

        /**********************************
        // The final local v can't be assigned. It must be blank and not using a compound assignment.
        // meaning, you are not allowed to change its memory location,
        // but can alter its content, if permitted
        // v = new Value();
        //**********************************/

        v.i = 45;
        System.out.println( " 4.2.1:changed: v.i = " + v.i ); // 45
        System.out.println( " 4.2.2:v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );

        return v;
    } // fourth(v)

    public void first() {
        System.out.println( "1.1.1: entered: ..." );

        Value v = new Value();
        System.out.println( "1.2.1: created; v.i = " + v.i ); // 15
        v.i = 25;
        System.out.println( "1.2.2: changed: v.i = " + v.i ); // 25
        System.out.println();

        System.out.println( "1.3.1: before calling second(v) ..." );
        System.out.println( " v.i = " + v.i + ", v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
        second( v );
        System.out.println( "1.3.2: returning from second(v) ..." );
        System.out.println( " v.i = " + v.i + ", v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
        System.out.println();

        System.out.println( "1.4.1:  before calling third(v) ..." );
        System.out.println( " v.i = " + v.i + ", v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
        v = third( v );
        System.out.println( "1.4.2:  returning from third(v) ..." );
        System.out.println( " v.i = " + v.i + ", v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
        System.out.println();

        System.out.println( "1.5.1: before calling fourth(v) ..." );
        System.out.println( " v.i = " + v.i + ", v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
        v = fourth( v );
        System.out.println( "1.5.2: returning from fourth(v) ..." );
        System.out.println( " v.i = " + v.i + ", v.hashCode() = " + v.hashCode() + "; v = " + v.toString() );
    } // first()

    public static void main( String ... a ) {
        Test _this = new Test();
        _this.first();
    } // psvm(...)
} // class Test 
```

当您运行上面的示例时，您可能会看到如下输出：

```
1.1.1: entered: ...
1.2.1: created; v.i = 15
1.2.2: changed: v.i = 25

1.3.1: before calling second(v) ...
 v.i = 25, v.hashCode() = 1671711; v = Test$Value@19821f
 2.1.1: entered: v.i = 25
 2.1.2: v.hashCode() = 1671711; v = Test$Value@19821f
 2.2.1:   new V: v.i = 9
 2.2.2: v.hashCode() = 11394033; v = Test$Value@addbf1
1.3.2: returning from second(v) ...
 v.i = 25, v.hashCode() = 1671711; v = Test$Value@19821f

1.4.1:  before calling third(v) ...
 v.i = 25, v.hashCode() = 1671711; v = Test$Value@19821f
 3.1.1:  entered: v.i = 25
 3.1.2:  v.hashCode() = 1671711; v = Test$Value@19821f
 3.2.1:  created: v.i = 9
 3.2.2:  v.hashCode() = 4384790; v = Test$Value@42e816
1.4.2:  returning from third(v) ...
 v.i = 9, v.hashCode() = 4384790; v = Test$Value@42e816

1.5.1: before calling fourth(v) ...
 v.i = 9, v.hashCode() = 4384790; v = Test$Value@42e816
 4.1.1:entered: v.i = 9
 4.1.2:v.hashCode() = 4384790; v = Test$Value@42e816
 4.2.1:changed: v.i = 45
 4.2.2:v.hashCode() = 4384790; v = Test$Value@42e816
1.5.2: returning from fourth(v) ...
 v.i = 45, v.hashCode() = 4384790; v = Test$Value@42e816 
```

* * *

如果你真的想`instanceVariableV`在被调用的方法中保存对对象所做的更改，比如说`fifth()`，另一种可能性是声明`v`为**实例变量**。

以下示例将解释差异。

```
public class Test {
    Value instanceVariableV = null; // v

    // rest of other variables and methods here
        // ...

    public void fifth() {
        System.out.println( " 5.1.1:entered: instanceVariableV = " + instanceVariableV ); // null
        // null, hence no hashCode(), and no toString() will work

        // let us create an instance of Value
        instanceVariableV = new Value();
        System.out.println( " 5.2.1:created: instanceVariableV = " + instanceVariableV ); // Test$Value@9304b1
        System.out.println( " 5.2.2: instanceVariableV.i = " + instanceVariableV.i ); // 15
        System.out.println( " 5.2.3: hashCode = " + instanceVariableV.hashCode() ); // 9634993

        instanceVariableV.i = 20;
        System.out.println( " 5.3.1:changed: instanceVariableV.i = " + instanceVariableV.i ); // 20
        System.out.println( " 5.3.2: hashCode = " + instanceVariableV.hashCode() ); // 9634993 // not changed 
    } // fifth()

    public void first() {
        // continuation of code

        System.out.println( "1.6.1: before calling fifth() ..." );
        System.out.println( " instanceVariableV = " + instanceVariableV  );
        fifth();
        System.out.println( "1.6.2: returning from fifth() ..." );
        System.out.println( " instanceVariableV = " + instanceVariableV  );
        if ( instanceVariableV != null ) {
            // must be different from the one when created new
            System.out.println( " .i = " + instanceVariableV.i );
            // this won't differ
            System.out.println( " .hashCode() = " + instanceVariableV.hashCode() );
        }
    } // first()

    public static void main( String ... a ) {
        // ...
        System.out.println( "\r\nmain(...): vInstanceVariable = " + _this.instanceVariableV );
        if ( _this.instanceVariableV != null ) {
            // must be different from the one when created new
            System.out.println( " .i = " + _this.instanceVariableV.i );
            // this won't differ
            System.out.println( " .hashCode() = " + _this.instanceVariableV.hashCode() );
        }
    } // psvm(...) 
```

当您使用上述扩展示例运行时，您可能会看到如下输出：

```
1.6.1: before calling fifth() ...
 instanceVariableV = null
 5.1.1:entered: instanceVariableV = null
 5.2.1:created: instanceVariableV = Test$Value@9304b1
 5.2.2: instanceVariableV.i = 15
 5.2.3: hashCode = 9634993
 5.3.1:changed: instanceVariableV.i = 20
 5.3.2: hashCode = 9634993
1.6.2: returning from fifth() ...
 instanceVariableV = Test$Value@9304b1
 .i = 20, .hashCode() = 9634993

main(...): vInstanceVariable = Test$Value@9304b1
 .i = 20
 .hashCode() = 9634993 
```

希望这对您有所帮助。

其他参考：

1.  [Java 是按引用传递还是按值传递？](http://www.javaworld.com/javaqa/2000-05/03-qa-0526-pass.html)
2.  [java是通过引用传递的吗？（关于 SO 的帖子）](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T03:28:24.263

Java中的所有参数都是值参数。调用方法时`second`：JVM会将对象复制`v`到`v1`，`v1`具有相同的指向`v`。当你分配

1，当你设置时，和`v.i = 20`的值变成20（因为这些对象有相同的指针）`v``v1`

2, `v = new Value()`;

这意味着您`v1 = new Value();` 此时分配， v1 和 v 有不同的指针。

调用 method 后`second`， v 的值为 20（步骤 1）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T06:43:27.297

让我试着用一个比喻来解释

想象一下，你的价值对象是一个真实的对象——一张上面写着数字 15 的纸。你把那张纸给一个叫“First”的朋友。首先将那张纸放在一边，得到一张新纸，上面写着 15，但划掉 15 并在上面写上 25。

他把这第二张纸给了另一个名叫“第二”的朋友。Second 拿了那张纸，把 First 写的 25 划掉，然后在上面写 20。然后他拿起另一张带有数字“15”的纸给你看——你看到了数字 15。然后你让 First 给你看他给 Second 的那张纸。你看到它说“20”

# .htaccess - URL 重写最佳实践以及如何使用 htaccess 进行设置

> ID：10748998
> 
> 赞同：1
> 
> 时间：2012-05-25T05:37:53.943
> 
> 标签：.htaccess, rewrite

我正在处理一个小型个人项目，在深入研究之前，我想在这里获得一些关于设置和 URL 方案的最佳实践的意见......以及我如何设置.htaccess 重写以下内容。我的问题是：

1.  以下设置是在小型用户配置文件设置中管理用户信息的最佳方式吗？

2.  我已经研究出如何使用通配符子域和 **`httpd.conf`**文件设置让子域为重写 username.domain.com 工作......但我被困在下面看到的其余方案上。基本上，用户个人资料将始终生成`username.domain.com`并附加其帐户中的各个页面（照片、视频、笔记等）。我将如何设置**`.htaccess`**重写以适应这种情况？我真的很感谢这里的任何建议。我在 stackoverflow 和其他网站上进行了大量研究，但找不到合适的解释来实现这一目标。

谢谢你的帮助。

`www.domain.com/profile.php?u=username`-->`username.domain.com`

`www.domain.com/photos.php?u=username`-->`username.domain.com/photos`

`www.domain.com/photos.php?u=username&a=album`-->`username.domain.com/photos/album`

`www.domain.com/photos.php?u=username&a=album1&p=photoid`-->`username.domain.com/photos/album1/photoid`

`www.domain.com/settings.php?u=username`-->`username.domain.com/settings`

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:03:48.547

您建议的设置对我来说看起来不错。以下是 .htaccess 的一些规则（确保您启用了 mod_rewrite 并在 httpd.conf 中设置了 AllowOverride All）：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} (.*)\.domain\.com
RewriteRule ^$ http://www.domain.com/profile.php?u=%1 [L,QSA]

RewriteRule ^photos/?$ http://www.domain.com/photos.php?u=%1

RewriteRule ^photos/([^/]+)/?$ http://www.domain.com/photos.php?u=%1&a=$1

RewriteRule ^photos/([^/]+)/([^/]+)/?$ http://www.domain.com/photos.php?u=%1&a=$1&p=$2

RewriteRule ^settings/?$ http://www.domain.com/settings.php?u=%1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:18:57.870

您使用哪个服务器？首先在服务器的配置文件中使用重写，而不是 htaccess，htaccess 会减慢服务器的速度。

编辑：我不关心速度，但据我记得 htaccess 减慢了 apache，我不知道多少。对不起，你必须用谷歌搜索:)

# java - 使用 java、jsp 从 Flash 读取内容并将其保存到服务器上的图像

> ID：10748999
> 
> 赞同：0
> 
> 时间：2012-05-25T05:38:00.403
> 
> 标签：java, javascript, jsp

我正在使用以下代码在 jsp 中嵌入 flash 以激活网络摄像头，但我想使用 java、jsp 或 jscript 从该对象标签中读取图像，并希望将其保存到服务器目录我们如何做到这一点？

```
<object id="whatever" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="282" height="180"codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0">
<param name="src" value="./swf/capturecam.swf"/>
<param name="bgcolor" value="#FFFFFF"/>
<param name="quality" value="best"/>
<embed name="whatever" src="./swf/capturecam.swf" width="282" height="180" bgcolor="#FFFFFF" quality="best" pluginspage="http://www.adobe.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">
</embed>
</object> 
```