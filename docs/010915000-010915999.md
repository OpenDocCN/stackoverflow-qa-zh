# StackOverflow 问答 10915000-10915999

# c# - 需要对使用 for 循环插入的复选框进行验证

> ID：10915002
> 
> 赞同：2
> 
> 时间：2012-06-06T13:17:05.953
> 
> 标签：c#, html, asp.net-mvc, validation, razor

我正在尝试对一组复选框实施所需的验证。基本上需要检查其中一个，并且复选框的数量是动态的。我对下面的代码并不完全有信心，我开始假设我可能需要使用 Javascript。我认为代码最能说明问题。

HTML：

```
 @for (var i = 0; i < Model.Sessions.Count(); i++ )
    {
        @Html.HiddenFor(it => it.Sessions[i].Id)
        @Html.LabelFor(it => it.Sessions[i].Name, Model.Sessions[i].Name)
        @Html.CheckBoxFor(it => it.Sessions[i].Checkbox)
    }
    @Html.ValidationMessageFor(model => model.Sessions) 
```

C#（视图模型）：

```
 [NotNull]
    [GlobalisedRequired]
    public virtual List<CheckBoxModel> Sessions { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:23:07.357

而不是RequiredAttribute（您将始终从复选框中获取值），您应该使用自定义验证器，如下所述：

[您将如何验证 ASP.Net MVC 2 中的复选框？](https://stackoverflow.com/questions/2766952/how-would-you-validate-a-checkbox-in-asp-net-mvc-2)

然后将 [BooleanRequiredToBeTrue] 属性添加到 CheckBoxModel 类中的 Checkbox 属性。

当然，您可以使用 javascript 客户端验证，但服务器端的验证也是必要的。

# java - 如何正确连接和断开 FTP 服务器？

> ID：10915003
> 
> 赞同：3
> 
> 时间：2012-06-06T13:17:11.623
> 
> 标签：java, ftp, ftp-client

**我想知道我与 FTP 服务器连接和断开连接的方式是否正确，或者是否可以更好。**

我正在使用`sun.net.ftp.FtpClient`.

```
import sun.net.ftp.FtpClient;

public class FTPUtility
{
    public static FtpClient connect(FTPConfig ftpConfig,WebTextArea statusTextArea)
    {
        String hostname = ftpConfig.getFtpServer();
        String username = ftpConfig.getUsername();
        String password = ftpConfig.getPassword();
        String portnumb = ftpConfig.getPort();

            try
            {
                FtpClient client = new FtpClient(hostname);
                statusTextArea.append("Connecting to " + hostname + " as " + username + " on port:" + portnumb );
                client.login(username, password);
                client.binary();
                statusTextArea.append("Connected to " + hostname + " as " + username  + " on port:" + portnumb );
                return client;
            }
            catch (Exception e)
            {
                statusTextArea.append("Failed to connect to " + hostname + " as " + username + "\n".concat(e.getMessage()) );
                return null;
            }

    }

public static boolean disConnect(FtpClient client, WebTextArea statusTextArea)
{     
    boolean success = false;
    if (client != null)
    {
        try
        {
            statusTextArea.append("Disconnecting from server...");
            client.closeServer();
            statusTextArea.append("Disconnected from server." );
            success = true;
        }
        catch (Exception e)
        {
            statusTextArea.append("Failed to disconnect from server. " + "\n".concat(e.getMessage()));
        }
    }

  return success;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:21:38.697

如果我们查看它显示的[文档](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html)`logout()`，`disconnect()` 我还建议为您的方法名称 disConnect 提供更好的命名约定，它应该只是 disconnect(FtpClient client, WebTextArea statusTextArea) （没有大写 C）

```
boolean error = false;
    try {
      int reply;
      ftp.connect("ftp.foobar.com");
      System.out.println("Connected to " + server + ".");
      System.out.print(ftp.getReplyString());

      // After connection attempt, you should check the reply code to verify
      // success.
      reply = ftp.getReplyCode();

      if(!FTPReply.isPositiveCompletion(reply)) {
        ftp.disconnect();
        System.err.println("FTP server refused connection.");
        System.exit(1);
      }
      ... // transfer files
      ftp.logout();
    } catch(IOException e) {
      error = true;
      e.printStackTrace();
    } finally {
      if(ftp.isConnected()) {
        try {
          ftp.disconnect();
        } catch(IOException ioe) {
          // do nothing
        }
      }
      System.exit(error ? 1 : 0);
    } 
```

如果关闭失败，也返回 false

```
catch (Exception e)
    {
        statusTextArea.append("Failed to disconnect from server. " + "\n".concat(e.getMessage()));
return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:45:54.420

您可能想查看来自 apache commons 项目的 FtpClient： [FtpClient](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html)。javaDoc 包含一些精心设计的示例。

# sharepoint - 如何将自定义 webpart 属性添加到现有类别（外观）？

> ID：10915007
> 
> 赞同：1
> 
> 时间：2012-06-06T13:17:30.557
> 
> 标签：sharepoint, web-parts

我为我的 Web 部件添加自定义属性。如何在现有类别（外观）中添加此属性。我尝试设置属性 [Category("Appearance")] 但在这种情况下，我的属性属于“杂项”类别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:20:31.283

这是不可能的，您必须将其添加到您自己的类别中，而不是添加到内置类别之一中。

# ios - 动画视图时iOS静态框架崩溃

> ID：10915011
> 
> 赞同：1
> 
> 时间：2012-06-06T13:17:53.983
> 
> 标签：ios, animation, frameworks, static, crash

在尝试为视图设置动画时，我遇到了一个难以调试的静态库项目问题。
它在调试时工作正常（甚至在发布配置中调试时），但会抛出一个归档为发布的错误：

```
Exception Type:  EXC_CRASH (SIGSYS)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   TestApp                     0x000d04fc 0x91000 + 259324
1   UIKit                       0x336d777e +[UIView(UIViewAnimationWithBlocks) animateWithDuration:animations:] + 42
2   TestApp                     0x000d04de 0x91000 + 259294
3   TestApp                     0x000d0678 0x91000 + 259704
4   Foundation                  0x355f04f8 __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 12
5   CoreFoundation              0x35aae540 ___CFXNotificationPost_block_invoke_0 + 64
6   CoreFoundation              0x35a3a090 _CFXNotificationPost + 1400
7   Foundation                  0x355643e4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 60
8   UIKit                       0x33599112 -[UIInputViewTransition postNotificationsForTransitionStart] + 846
9   UIKit                       0x335988cc -[UIPeripheralHost(UIKitInternal) executeTransition:] + 880
10  UIKit                       0x3351bb8c -[UIPeripheralHost(UIKitInternal) setInputViews:animationStyle:] + 304
11  UIKit                       0x3351b260 -[UIPeripheralHost(UIKitInternal) _reloadInputViewsForResponder:] + 952
12  UIKit                       0x3351ae54 -[UIResponder(UIResponderInputViewAdditions) reloadInputViews] + 160
13  UIKit                       0x3351a990 -[UIResponder becomeFirstResponder] + 452
14  UIKit                       0x336194a0 -[UITextInteractionAssistant setFirstResponderIfNecessary] + 168
15  UIKit                       0x33618d6a -[UITextInteractionAssistant oneFingerTap:] + 1602
16  UIKit                       0x33618630 _UIGestureRecognizerSendActions + 100
17  UIKit                       0x335a8d5e -[UIGestureRecognizer _updateGestureWithEvent:] + 298
18  UIKit                       0x337d9472 ___UIGestureRecognizerUpdate_block_invoke_0541 + 42
19  UIKit                       0x33524f4e _UIGestureRecognizerApplyBlocksToArray + 170
20  UIKit                       0x33523a9c _UIGestureRecognizerUpdate + 892
21  UIKit                       0x335307e2 _UIGestureRecognizerUpdateGesturesFromSendEvent + 22
22  UIKit                       0x33530620 -[UIWindow _sendGesturesForEvent:] + 768
23  UIKit                       0x335301ee -[UIWindow sendEvent:] + 82
24  UIKit                       0x3351668e -[UIApplication sendEvent:] + 350
25  UIKit                       0x33515f34 _UIApplicationHandleEvent + 5820
26  GraphicsServices            0x376d5224 PurpleEventCallback + 876
27  CoreFoundation              0x35ab651c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
28  CoreFoundation              0x35ab64be __CFRunLoopDoSource1 + 134
29  CoreFoundation              0x35ab530c __CFRunLoopRun + 1364
30  CoreFoundation              0x35a3849e CFRunLoopRunSpecific + 294
31  CoreFoundation              0x35a38366 CFRunLoopRunInMode + 98
32  GraphicsServices            0x376d4432 GSEventRunModal + 130
33  UIKit                       0x33544cce UIApplicationMain + 1074

Thread 0 crashed with ARM Thread State:
    r0: 0x0000004e    r1: 0x000d04f8      r2: 0x338fed47      r3: 0x3f523340
    r4: 0x00000000    r5: 0x2fe8da00      r6: 0x00000001      r7: 0x2fe8d9d0
    r8: 0x3f54cad0    r9: 0x00000000     r10: 0x3fd00000     r11: 0x3f523310
    ip: 0x3f497048    sp: 0x2fe8d988      lr: 0x33539a41      pc: 0x000d04fc
  cpsr: 0x60000010 
```

提供一些背景信息：
静态库是“iOS fake-framework”的一部分，使用此处的模板构建：
[https](https://github.com/kstenerud/iOS-Universal-Framework)
://github.com/kstenerud/iOS-Universal-Framework 该框架将注册 UI 呈现为模式视图位于客户端应用程序当时正在执行的任何操作之上。它使用客户端应用程序提供的 UIViewController 的句柄推送这些视图。

它没有做任何特别的事情，但这里是动画代码：

```
-(void)keyboardWillShowNotification:(NSNotification *)notification
{
    double animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    dispatch_async(dispatch_get_main_queue(), ^(void) {
        [self animateViewsToState:kUMAnimationStateKeyboardVisible forIdiom:[UIDevice currentDevice].userInterfaceIdiom forDuration:animationDuration];
    });
}

-(void)animateViewsToState:(kUMAnimationState)state forIdiom:(UIUserInterfaceIdiom)idiom forDuration:(double)duration
{
    float fieldOffset;    
    if (idiom == UIUserInterfaceIdiomPhone) {
        if (state == kUMAnimationStateKeyboardVisible) {
            fieldOffset = -KEYBOARD_HEIGHT_IPHONE_PORTRAIT;
        } else {
            fieldOffset = KEYBOARD_HEIGHT_IPHONE_PORTRAIT;
        }
    } else {
        if (state == kUMAnimationStateKeyboardVisible) {
            fieldOffset = -IPAD_FIELD_OFFSET;
        } else {
            fieldOffset = IPAD_FIELD_OFFSET;
        }
    }

    [UIView animateWithDuration:duration animations:^(void) {
        mUserNameField.frame = CGRectOffset(mUserNameField.frame, 0, fieldOffset);
        mUserPasswordField.frame = CGRectOffset(mUserPasswordField.frame, 0, fieldOffset);
    }];
} 
```

进一步的 printf 风格调试表明，每当我对 UIKit 做任何事情时它都会崩溃 - 具体来说，当我将 -animateViewsToState 替换为：

```
if (0 == UIUserInterfaceIdiomPhone) {
    NSLog(@"");
} 
```

和

```
[[[[UIAlertView alloc] initWithTitle:@"test" message:@"123" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease] show]; 
```

对我来说，这听起来像是一个链接器问题，但我不明白这些问题如何只在这里出现，而不是事先出现。

任何帮助将不胜感激。

# android - 如何构建我的android应用程序

> ID：10915016
> 
> 赞同：0
> 
> 时间：2012-06-06T13:18:08.483
> 
> 标签：android, android-activity, organization

我对 Android 开发非常陌生，并且想确保我正确地构建了我的应用程序。首先，让我解释一下需要什么。

应用程序开始提示用户输入访问代码，根据他们的响应，可能会出现两个结果菜单。一个菜单有 5 个按钮，而另一个菜单增加了两个额外的按钮，共 7 个。这些按钮中的每一个都将我带到一个不同的视图，其中将显示更多信息。

我最初开始使用一个活动和每个视图的不同 XML 文件来编写它。但是，我在网上研究得越多，似乎我应该为每个单独的视图设置不同的 Activity。但是现在我比较困惑如何在初始化任何活动之前提示用户输入。

如果有人有任何意见，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:26:06.103

在获取用户输入之前，您需要初始化一个活动。而且我认为如果您转到一个新视图，它使用不同的类和 xml 布局是很常见的。因此，对于每个新视图，您可以创建一个扩展活动的新类，然后有一个与该视图相关的 xml 文件。

因此，对于您显示的每个新视图，都有这 2 个文件。

Java 文件：

```
public class Activity1 extends Activity {
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.layout1);
   }
} 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/layout1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  //add any views

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:28:35.183

尝试：

-push activity1 with layout1
-pop inputDialog
-当 inputDialog 通过点击确定关闭时...
-push Activity2 with layout2，继续使用额外的activity1输入

...等等 ;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:29:55.037

I have been trying to break up my programs into an activity and a corresponding xml layout for each view. If you have one activity and all those layouts, you have the potential to have a monster block of code in that one activity. I find that breaking it up makes it easier to read and debug.

As for prompting the user before initializing activities, i'm not entirely clear on what you mean. You need to load an activity before anything happens, in your situation it could easily be a simple password acception activity. If you're talking about passing information between activities, you can package data in an intent, and use that to start a new activity. Then in that new activity pull the information out of the intent.

# freeswitch - Freeswitch对api聊天的“真实”响应？

> ID：10915017
> 
> 赞同：4
> 
> 时间：2012-06-06T13:18:13.390
> 
> 标签：freeswitch

我正在通过 esl 发送这样的短信（telnet、java 客户端、各种方法都产生相同的结果）（数字都是假的）：

api 聊天 sip|13215555555@6.50.120.201|internal/2395555555@6.50.120.200|测试消息

这适用于有效数字。如果我们在某个地方输入了一个无效的数字，我们可能会在 sip 跟踪中看到类似这样的内容，表明存在问题：

U +0.745829 6.50.120.200:5060 -> 6.50.120.201:5060 SIP/2.0 484 地址不完整。...

...但是通过 esl 套接字，无论如何我们都会得到相同的响应事件，只是“发送”。此外，当我们绑定到 esl 端口并尝试输出每条可能的消息（没有过滤器）时，我们会看到大部分来自 sip 跟踪的信息，但由于某种原因，再次不是这个糟糕的结果 sip 数据包。这就像freeswitch正在从esl中过滤掉这个特定的数据包。

有没有办法通过 esl 来探测原始 sip 消息，以便我们可以手动测试这样的数据包，或者以其他方式寻求最终的异步结果？

提前致谢！

# mysql - 从命令提示符运行 sql 命令

> ID：10915018
> 
> 赞同：0
> 
> 时间：2012-06-06T13:18:18.947
> 
> 标签：mysql, command-prompt

我有一个 sql 命令我想用来连接到我的在线数据库

```
mysql -h your_ddbb_server_ip -u your_user 
```

我已经安装了[MySQL 安装程序 5.5](http://dev.mysql.com/downloads/installer/5.5.html)并运行了该程序。

安装后，我尝试从命令提示符和名为“MySQL 5.5 命令行客户端”的程序运行命令。

两个程序都没有响应该命令。

我如何以及在哪里运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:37:21.890

从命令提示符 ( `cmd.exe`)

确保路径中有 mysql bin 文件夹（安装程序会提示该文件夹），以便您只需键入`mysql.exe`（或仅`mysql`）。

否则，您必须导航到 MySql bin 文件夹（在我的情况下是`C:\Program Files\MySQL\MySQL Server 5.5\bin`

```
cd "C:\Program Files\MySQL\MySQL Server 5.5\bin"
mysql -h your_ddbb_server_ip -u your_user 
```

此命令将启动交互式 shell。如果你只想执行一个命令，你必须指定`-e argument`

```
mysql -h your_ddbb_server_ip -u your_user-e "SHOW DATABASES" 
```

# sql - 如何在 SQL 查询中截断数字字符串数据成员

> ID：10915019
> 
> 赞同：0
> 
> 时间：2012-06-06T13:18:20.130
> 
> 标签：sql, sql-server

在我的 sql 数据库中，我有一个像“REG_DET”这样的表，这个表主要包括 3 个数据成员。姓名，年龄，SSN。这里的 SSN 是一个包含 10 多个字符的字符串。这里我的问题是当我从表中读取 SSN 时，我只需要最后 4 个字符

例如。`Rohith , 25 , 1023456457`

结果仅包括`Rohith , 25 ,6457`（SSN 的最后 4 个字符）

是否可以在 sql 选择查询中执行此操作（在选择时）。如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:20:44.703

您可以使用`RIGHT`功能：

```
SELECT NAME,
       AGE,
       RIGHT(SSN, 4) As SSN_Short
FROM REG_DET 
```

（假设您使用的是[SQL-Server](http://msdn.microsoft.com/en-us/library/ms177532.aspx)或[MySQL](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_right)）

**编辑**：由于您使用的是`TEXT`，您需要`VARCHAR`先将其转换为：

```
SELECT NAME,
       AGE,
       RIGHT(CONVERT(VARCHAR(8000),SSN)), 4) As SSN_Short
FROM REG_DET 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:21:24.140

是的，可以使用以下 [`RIGHT`](http://msdn.microsoft.com/en-us/library/ms177532.aspx)功能：

```
SELECT NAME, AGE, RIGHT(SSN, 4) FROM REG_DET 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:16:32.650

要从`SSN`列中获取最后 4 位数字，您还可以使用`SUBSTRING`. 如果 SSN 列的长度为 10，则可以使用以下查询：

```
 SELECT NAME, AGE, SUBSTRING(SSN, 6, 4) FROM REG_DET 
```

# android - aptana studio 3 和安卓

> ID：10915020
> 
> 赞同：0
> 
> 时间：2012-06-06T13:18:28.497
> 
> 标签：android, aptana

我了解 unix 是 aptana studio 3 支持的操作系统之一。 问：那么您可以在 android 设备上下载和使用 aptana studio 3（因为 android 操作系统是基于 unix 的）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:22:14.030

Android 的内核基于 Linux——但在运行应用程序时，Android 就大不相同了。它有自己的运行时等。答案是否定的。

# php - 如何检索 imageid 并将其插入另一个表

> ID：10915022
> 
> 赞同：0
> 
> 时间：2012-06-06T13:18:36.983
> 
> 标签：php, mysql

我有一个 INSERT 函数，它在“Image”表的“ImageFile”字段中插入图像文件名，由于自动编号，每一行都有自己的 ImageId。下面是一个例子：

```
ImageId    ImageFile

23         orange.jpg
24         flowers.png
25         castle.png
26         orange.jpg 
```

我想做的是将 ImageId 插入另一个带有 QuestionId 和 SessionId 的表中，以便该表（Image_Question）可以使用 ImageId 将 Image 表与 Image Question 表链接。但是我该如何编码，以便当我在上表中插入图像详细信息时，它将检索它的 ImageId 并将其存储在 Image_Question 表中的 ImageId 中。下面的例子：

```
ImageId   SessionId  QuestionId

23        AAA        1
24        AAA        2
25        AAA        3
26        AAA        4 
```

我已经对 SessionId 和 QuestionId 的 INSERT 值进行了编码，但只需要帮助来检索和插入 ImageId。以下是当前代码：

```
<?php

session_start();

//connect to db

$i = 0;

$insertimage = array();

for($i = 0;  $i < $c; $i++ ){

    $insertimage[] = "'". mysql_real_escape_string($_SESSION['id'] ) . 
                    ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". 
                    mysql_real_escape_string( $_POST['numQuestion'][$i] ) ."'";

}

 $imagesql = "INSERT INTO Question (ImageId, SessionId, QuestionId) 
    VALUES (" . implode('), (', $insertimage) . ")";

echo($imagesql);

mysql_close();

?> 
```

我有一个旧的 php 版本 5.2.13，因为那是大学服务器的版本，所以我必须使用 mysql() 代码，即使我知道使用 PDO 或 Mysqli 更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:21:44.857

我认为您正在寻找的是[mysql_insert_id](http://lv.php.net/manual/en/function.mysql-insert-id.php)。它将返回最后插入行的 id，因此您可以将其分配给变量并使用该变量将 id 插入到下一个查询的另一个表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:27:28.260

ImageId 和 SessionId 之间没有逗号

```
$insertimage[] = "'". mysql_real_escape_string($_SESSION['id'] ) . "', '" .
                ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". 
                mysql_real_escape_string( $_POST['numQuestion'][$i] ) ."'"; 
```

此外，如果 Id 是数字，请删除单引号（在这种情况下，您也不需要`mysql_real_escape_string`，只需验证输入是数字[`is_numeric()`](http://php.net/manual/en/function.is-numeric.php)而不是浮点数[`is_float()`](http://www.php.net/manual/en/function.is-float.php)）：

```
$insertimage[] = mysql_real_escape_string($_SESSION['id'] ) . ", " .
                ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ." ,". 
                mysql_real_escape_string( $_POST['numQuestion'][$i] ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T13:32:20.370

试试这个：

```
$imagesql = "INSERT INTO Question 
             (ImageId, SessionId, QuestionId) 
             VALUES 
             ((SELECT ImageId FROM image ORDER BY ImageId DESC LIMIT 1),
              " . implode('), (', $insertimage) . ")"; 
```

# iphone - 获取 iPhone 颜色 iOS Sdk

> ID：10915025
> 
> 赞同：6
> 
> 时间：2012-06-06T13:18:45.697
> 
> 标签：iphone, iphone-privateapi

iTunes 可以检测我的 iPhone 是黑色还是白色，那么我该如何在代码中做到这一点？

我认为这将是 UIDevice 的事情，但我不太确定。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T13:27:01.583

您可以从型号零件号中获取颜色，例如：

> MD381 - 黑色 iPhone 4S
> 
> MC920 - 白色 iPhone 4S
> 
> ...

要获取型号，请使用 [**uidevice-extension**](https://stackoverflow.com/questions/2979429/how-to-get-the-model-of-iphone-from-code-e-g-mc143c)

**补充**：替代解决方案。将您的项目与 libLockdown.dylib 链接。

```
extern id lockdown_connect();
extern id lockdown_copy_value(id, id, id);
extern void lockdown_disconnect();
extern NSString *kLockdownDeviceColorKey;
NSString* CopyDeviceColor() {
    id connection = lockdown_connect();
    NSString *color = lockdown_copy_value(connection, nil, kLockdownDeviceColorKey);
    NSLog(@"color = %@", color);
    lockdown_disconnect(connection);
    return color;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:21:11.350

iTunes 从我相信的序列号中检测到设备的颜色。

无法确定设备或开发人员的颜色。

# c# - MVC3中对象的绑定列表

> ID：10915026
> 
> 赞同：1
> 
> 时间：2012-06-06T13:18:50.410
> 
> 标签：c#, jquery, json, asp.net-mvc-3

我正在处理的项目有问题。我正在使用实体框架。关于 db 模型的一些快速背景知识：

```
public class AssetType{
    public ICollection<Field> Fields { get; set; }
}

public class Field{
    public int Id {get;set;
    public string Name {get;set;
} 
```

现在我正在创建一个可以创建新资产类型的视图。作为此过程的一部分，用户还必须为该类型创建他们想要的所有字段。问题是我不确定如何在页面上表示“字段”列表。这个想法是用户可以添加一个新字段，或者在任何时候使用 jQuery 删除一个。

我不知道如何将数据作为表单的一部分发回服务器。我想过以 JSON 形式构建列表，但这似乎有点混乱。有没有人有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:22:51.847

你会遇到这个问题。对象解析器不能很好地处理复杂对象。集合通常需要是原始类型，或者是原始类型本身的集合。

有很多方法可以做到这一点，但如果这是您的要求，我会考虑将您的数据存储在 JSON 字符串变量中，并在需要的地方/时解析它。

# php - MongoDB设计[一个集合和类似文档]

> ID：10915027
> 
> 赞同：0
> 
> 时间：2012-06-06T13:18:55.890
> 
> 标签：php, mongodb

我正在构建使用 MongoDB 的应用程序。在我的应用程序中，每个用户都可以拥有许多不同的车型（保时捷、法拉利等）。我需要将它们全部保存在一个名为 - 的集合中`car`。所以在一个集合中，我想存储类似的文档类型。为什么 ？因为这些所有型号都是汽车，并且它们都有 50% 到 90% 的相同字段。

问题：我说得对吗？或者我应该为每种新车类型（型号）单独收集？

为什么我需要它？因为我必须向用户展示一些包含他所有汽车列表的表格，并且该表格（GRID）也必须进行排序和过滤。按门数、齿轮数等字段过滤……从一个集合中收集这些数据会更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:18:44.793

是的，使用一个集合是去这里的方式。但`cars`取而代之的是它的名字。

# excel - 在 Excel 中使用 VBA 初始化用户窗体并加载变量

> ID：10915037
> 
> 赞同：0
> 
> 时间：2012-06-06T13:19:07.187
> 
> 标签：excel, vba, initialization

我有一个带有初始化事件的用户表单，如下所示：

```
Public CurrSpanNum, CurrSegNum As Integer
Private Sub UserForm_Initialize()

        CurrSegNum = Sheets("UserData").Range("C2").value
        Debug.Print "SegForm, SpanNum = " & CurrSpanNum
        CurrSpanNum = Sheets("UserData").Range("D2").value
        Debug.Print "SegForm, SegNum = " & CurrSegNum

End Sub 
```

在即时窗口中，我看到：

```
SegForm, SpanNum = 
SegForm, SegNum = 3 
```

在初始化表单之前，值 3 被放置在两个单元格中。为什么我似乎无法加载 SpanNum 而 SegNum 能够加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:25:17.207

好吧，你的 CurrSpanNum 变量没有初始化，所以什么也不打印，你会期待什么？

# cryptography - 保护散列密码的想法

> ID：10915039
> 
> 赞同：0
> 
> 时间：2012-06-06T13:19:20.087
> 
> 标签：cryptography, passwords

由于破解密码哈希已成为脚本小子的新消遣，我想到了这个问题并想出了一个新颖的（？）想法。

1.  将通行证存储为偏移量+数字而不是哈希
2.  这个数字是两个大素数的乘积
3.  密码转换为数字，添加偏移量，并使用素数来划分数字。如果它除且除数是两个素数中较大的一个，则密码是正确的。

根据定义，每个哈希值都是唯一的，并且每个密码可以根据偏移量以多种不同方式进行哈希处理。打破一个哈希意味着你必须分解数字（这很难），然后找到一个对应于更大prime-offset（这是微不足道的）数字的单词。

要生成使用函数 f() 将密码转换为密码数字（不重要），请生成两个大于 2^4096 的随机素数，或者多少就足够了。取较大的素数并计算素数密码数=偏移量。将素数相乘得到“数字”。存储编号和偏移量。

去检查。使用函数 f() 将密码转换为密码数字，添加偏移量以查找素数。用素数除以得到另一个素数。检查第一个素数是否是两者中较大的一个。如果是这样，密码是正确的。

f() 可能是例如密码的 utf-8 编码，被理解为一个大的二进制整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:53:37.900

您的程序并没有真正比使用散列函数为您带来任何好处。是的，反转您的函数很困难，因为它需要分解大量数字，但是反转常规散列函数也很困难。攻击者仍然可以使用与常规哈希算法相同的程序：通过测试每个可能的密码来进行暴力攻击。

当然，这对于任何存储足够数据来验证密码的方案都是不可避免的。唯一的解决方案是让攻击者这样做的计算成本很高，方法是使哈希函数的计算成本很高，并添加盐以确保它们无法预先计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:37:35.787

一般来说，尝试发明自己的加密系统*很难*做到正确。您必须考虑许多小事情，并且很容易错过攻击可以利用的东西。如果您使用已建立的密码学或散列库，您仍然会过得更好、更安全。用于散列的 Bcrypt 可能比您发布的解决方案更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:12:19.270

要正式确定您的方案：

要创建哈希：

1.  用户输入密码 pw
2.  使用编码函数 e 将 pw 转换为字节数组 ba
3.  将 ba 转换为大整数 bn
4.  求素数 p 和 q，p > q > max(bn, 2^2048)
5.  存储 n = pq 和 o = p - bn

要验证哈希：

1.  用户输入密码 pw
2.  使用编码函数 e 将 pw 转换为字节数组 ba
3.  将 ba 转换为大整数 bn
4.  验证 bn + o 除以 n

这是一个安全的散列要求给定 n 和 o，推断 pw 是不可行的，即没有算法比猜测和检查更有优势。我相信这个。

正如我所看到的，您的方案的主要好处是通过选择随机数将随机性注入到散列过程中。它们是质数并且分解应该是困难的更多的是实现细节（这是您的单向函数）。大概它也应该减慢检查速度，尽管我真的不知道在这么大的数字上除法有多慢。

有趣的是，哈希创建和密码验证过程是如此不同。正如您所指出的，这使得彩虹表哈希链接技术不适用。这可能是一个优势，但每个用户的盐渍化可以为您提供类似的彩虹表保护。

# url - 如何从 URL 中删除 8080

> ID：10915040
> 
> 赞同：3
> 
> 时间：2012-06-06T13:19:24.190
> 
> 标签：url, jboss, localhost, port

有人可以告诉我，我该怎么做才能给我的应用程序一个简单的 URL。现在我用这个 URL 调用我的应用程序 -

```
http://localhostname:8080/MyProject 
```

我想用这个 URL 来称呼它——

```
http://localhostname/MyProject 
```

我正在使用 JBoss 7.1.0 最终版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-24T17:14:56.787

我正在研究这个主题（尽管只是一个实例），并从 RedHat 讨论中看到了一个建议。

这是 Linux 特定于单个实例的。OP没有指定环境。但是，如果使用 Linux，这应该为 OP 指明正确的道路。

使用端口 80 和 443 需要 root 才能运行 JBoss 实例。很有可能，SA 不会将此授予用户，因此另一种方法是让 SA 修改 iptables。[归功于RedHat 讨论](https://access.redhat.com/discussions/734233)中的 PixelDrift.NET 支持。

```
iptables -I INPUT -i eth0 -p tcp --dport 8080 -j ACCEPT
iptables -I INPUT -i eth0 -p tcp --dport 8443 -j ACCEPT
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 80 -j REDIRECT --to-port 8080
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 443 -j REDIRECT --to-port 8443 
```

我的 SA 根据我们的需要修改了 iptables。

```
iptables -I INPUT -p tcp --dport 8380 -j ACCEPT
iptables -I INPUT -p tcp --dport 8443 -j ACCEPT
iptables -I INPUT -p tcp --dport 9990 -j ACCEPT
iptables -I INPUT -p tcp --dport 9443 -j ACCEPT
iptables -A PREROUTING -t nat -p tcp --dport 80 -j REDIRECT --to-port 8380
iptables -A PREROUTING -t nat -p tcp --dport 443 -j REDIRECT --to-port 8443
iptables -A INPUT -p tcp --dport 80 -m limit --limit 25/minute --limit-burst 100 -j ACCEPT 
```

`http://bar.foo/baz`应用更改后，我无需包含端口号即可成功访问应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:45:12.750

正如上面 Alexander Pavlov 的评论中所说，最简单的方法是使用 port `80`。

应用程序服务器通常有一个配置文件（通常是 xml），您可以在其中指定应用程序要使用的端口。大多数应用程序服务器的默认值为端口`8080`，因此您的 url 将如下所示：`http://<server IP or name>:8080`.

如果您修改应用程序服务器配置以设置默认端口`80`，那么您只需执行以下操作：`http://<server IP or Name>`

# hibernate - Spring mvc 3 with hibernate 3 如何使用外键检索或绑定到依赖实体

> ID：10915042
> 
> 赞同：1
> 
> 时间：2012-06-06T13:19:30.033
> 
> 标签：hibernate, jquery, spring-mvc

我有两个实体，主要（用户）实体与其他实体相关。现在我有了表格，为此我拆分了实体。我有动态行，那些动态的列我将它们保存在一个单独的实体中，并与主实体建立关系。对于静态行，我有一个实体。

我应该如何在控制器中插入多行？

我的实体是这样的：

```
package hib.test;

import java.util.HashSet;
import java.util.Set;

public class POSSales implements Serializable {

private Integer posUserId;
private String userType;
private Integer referencePosno;

private String customerName;
private String Customer;
private String Address;
    private Set<Courses> course = new HashSet<Courses>(0);
   @Id
   @GeneratedValue
        public Integer getUserId() {
    return UserId;
    }

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "users")
      public Set<Courses> getCourse() {

    return this.course;

}

         // other getter setter method
} 
```

第二个实体是这样的：

```
 public class Courses {
    private Integer id;
    private String courseType;
    private Set<User> userList = new HashSet<User>();
            private Users user;

    @Id
           @GeneratedValue
        public Integer getId() {

    return id;

     }
      @JoinColumn(name = "userId", nullable = false)

      public Users getUsers() {
    return user;

}

} 
```

现在 userId 被分配为外键创建数据库。我应该如何在控制器中插入新的？

任何人都可以告诉我控制器的外观到目前为止我已经在 spring 中插入了单行但不知道如何插入多个动态行...因为在表单中我们将只有一行，动态行由生成使用jQuery。

谁能帮我吗？这真的很重要，我没有得到任何示例，多次插入后，问题是如何查看数据并在单个 Jsp 中列出它们，以及如何更新？

# jquery - jqGrid：删除最后一条记录不会刷新网格+分页问题

> ID：10915046
> 
> 赞同：1
> 
> 时间：2012-06-06T13:19:35.953
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我在 jqGrid 中有两个问题

1）假设表中有 91 条记录，rownum 设置为 10，现在当我导航到最后一页并删除记录号 91 时，它不会自动重新加载网格，当我明确使用 ReloadGrid 时，它会重新加载整个数据控制器增加了网络负载。 ![这是最后一页的截图](../Images/ec20c0c8d9d3a599265b3a407486ecd3.png) ![现在我正在删除最后一条记录](../Images/f2ace365ee6afe2c369f2d51f66236dd.png) ![它不会重定向到第一页](../Images/4a176201bf6af842b4e3635bab282b4d.png)

2）在我的网格中有 10 页，当我在文本框中输入大于最大页面的页码时，它会给出空白网格，理想情况下它应该显示一些消息。

![在这里，我给出了 page no = 50 尽管 max page = 1](../Images/8cb514dc72dcaff07dbf430341a7aadf.png)

任何解决方案？

**添加代码以更好地理解问题**

```
$(document).ready(function () {
        $('#jqgCars').jqGrid({
            //url from wich data should be requested
            url: '@Url.Action("CarsListing", "Car")?Carid=' + getID(),
            //event for inline edit
            onSelectRow: function (currentSelectedRow) {
                if (currentSelectedRow && currentSelectedRow != $.lastSelectedRow) {
                    //save changes in row 
                    $('#jqgCars').jqGrid('saveRow', $.lastSelectedRow, false);
                    $.lastSelectedRow = currentSelectedRow;
                }
            },
            //type of data
            datatype: 'json',
            //url access method type
            mtype: 'POST',
            //columns names
            colNames: ['ID','Number','Name'],
            //columns model
            colModel: [
                            { name: 'ID', index: 'ID', align: 'left', editable: false },
                            { name: 'Number', index: 'Number', align: 'left', editable: true, formatter: "text", edittype: 'text', editrules: { required: true}, editoptions:{maxlength:"25"}},
                            { name: 'Name', index: 'Name', align: 'left', editable: true, formatter: "text", edittype: 'text', editrules: { required: false} , editoptions:{size:"35",maxlength:"255"}},
                          ],
            //pager for grid
            pager: $('#jqgpCars'),
            //number of rows per page
            rowNum: 2,
            //initial sorting column
            sortname: 'name',
            //initial sorting direction
            sortorder: 'asc',
            //display total records count
            viewrecords: true,
            //grid height
            height: '100%' 
        });
        $('#jqgCars').jqGrid('navGrid', '#jqgpCars', { add: true, del: true, edit: true, search: false });
        $('#jqgCars').jqGrid('hideCol', "ID");
        $('#jqgCars').setGridWidth(600 , true);
        var dialogPosition = $(this).offset();
    }); 
```

**更新——解决方案**

**解决问题#1**

```
$.extend($.jgrid.del, {
            afterComplete: function () {
                var p = $('#jqgCars')[0].p;
                var newPage = p.page; // Gets the current page
                if (p.reccount === 0 && newPage > p.lastpage && newPage > 1) {
                    // if after deleting there are no rows on the current page and lastpage != firstpage than
                    newPage--; // go to the previous page
                }
                // reload grid to make the row from the next page visable.
                $(p.pager + " input.ui-pg-input").val(newPage); //Here setting the new page into textbox before loading in case of longer grid it would look nice
                $('#jqgCars').trigger("reloadGrid", [{page: newPage}]); // reloading grid to previous page
            } 
        }); 
```

**问题#2 的解决方案与**Oleg 发布的完全相同

**这适用于 jqGrid v4.1.2**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T16:29:53.957

这是个好问题！在旧答案中[this](https://stackoverflow.com/a/5611519/315935)和[this](https://stackoverflow.com/a/6800597/315935)您将找到第一个问题的答案。因为答案很长，并且您需要*在服务器上*使用删除数据，所以我在这里重复相同的想法。

在一个问题中提出两个不同的问题是不好的。这样的问题不适合搜索引擎。遇到问题第 2 部分的问题的用户将不得不阅读不需要的信息。所以请不要在未来这样做。

我从你的第二个问题开始回答。如果用户在寻呼机的输入部分键入任何值并按下`Enter`页面的行，将从服务器或本地数据集请求。如果用户选择大页码，网格将成功重新加载，但没有数据。在从最后一页删除最后一行的情况下，结果完全相同。*具有相同编号*的页面将被重新加载，用户将看到空网格。

要解决此问题，可以使用以下[onPaging](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:pager#events)回调：

```
onPaging: function (pgButton) {
    var p = this.p;
    if (pgButton === "user" && p.page > p.lastpage) {
        alert ("You can't choose the page " + $(p.pager + " input.ui-pg-input").val());
        p.page = p.currentPage; // restore the value of page parameter
        return 'stop';
    }
},
loadComplete: function () {
    // because on enter in the pager input the value of this.p.page
    // will be changed BEFORE calling of the onPaging the original
    // (current) page number will be overwritten. To save the problem
    // we can save somewhere the copy of the this.p.page. To be able
    // easy to maintain multiple grids on the page we can save the
    // copy as new jqGrid option:
    this.p.currentPage = this.p.page;
} 
```

不是我们回到你问题的第一部分。为了解决这个问题，可以使用[delGridRow方法的](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#delgridrow)[afterComplete](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events2)回调在最后一行被删除后执行附加操作。代码可以如下：

```
afterComplete: function () {
    var p = this.p, newPage = p.page;
    if (p.lastpage > 1) {// on the multipage grid reload the grid
        if (p.reccount === 0 && newPage === p.lastpage) {
            // if after deliting there are no rows on the current page
            // which is the last page of the grid
            newPage--; // go to the previous page
        }
        // reload grid to make the row from the next page visable.
        $(this).trigger("reloadGrid", [{page: newPage}]);
    }
} 
```

所以我们只是在空网格的情况下减少页码并再次重新加载网格。

如果要删除*本地*网格 ( `datatype: "local"`) 中的数据，可以使用以下设置：

```
$.extend($.jgrid.del, {
    // because I use "local" data I don't want to send the changes to the server
    // so I use "processing:true" setting and delete the row manually in onclickSubmit
    onclickSubmit: function(options, rowid) {
        var gridId = $.jgrid.jqID(this.id),
            p = this.p,
            newPage = p.page,
            $this = $(this);

        options.processing = true;

        // delete the row
        $this.jqGrid("delRowData", rowid);
        $.jgrid.hideModal("#delmod" + gridId,
            { gb: options.gbox, jqm: options.jqModal, onClose: options.onClose});

        if (p.lastpage > 1) {// on the multipage grid reload the grid
            if (p.reccount === 0 && newPage === p.lastpage) {
                // if after deliting there are no rows on the current page
                // which is the last page of the grid
                newPage--; // go to the previous page
            }
            // reload grid to make the row from the next page visable.
            $this.trigger("reloadGrid", [{page: newPage}]);
        }
        return true;
    },
    processing: true
}); 
```

[您可以在这里](http://www.ok-soft-gmbh.com/jqGrid/ChangePageOnDelete.htm)看到相应的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:48:46.603

关于#1，您说：

> 明确使用 ReloadGrid 它会从控制器重新加载整个数据，这会增加网络负载。

但我认为这是你必须做的，因为 jqGrid 一次只检索一页数据。如果您不从服务器重新加载，网格将如何重新填充自身？或者也许我错过了什么？

* * *

关于 #2，在 AJAX 调用之后，网格使用 XML/JSON 响应中的页码。您可以在[grid.base.js 的源代码](https://github.com/tonytomov/jqGrid/blob/master/js/grid.base.js)中看到这一点：

```
ts.p.page = $.jgrid.getXmlData( xml,xmlRd.page ) || 0;

...

ts.p.page = $.jgrid.getAccessor(data,dReader.page) || 0; 
```

这两个函数还包括一个调用来更新寻呼机中的页码：

```
if (!more) { ts.updatepager(false,true); } // Note: More is true if pageNum > 0 
```

因此，一种解决方案是让您的服务器代码检测给定的页码是否大于最大值，并在您的响应中将其设置回最大值。如果在查询实际数据之前执行此操作，您还可以调整该查询以返回最后一页的数据，从而避免显示错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T21:56:54.237

我有同样的问题。这是我对这个问题的解决方案：

```
$("#jqgCars").clearGridData(true).trigger(
   "reloadGrid", [{ current: true }]
); 
```

# assembly - 装配中的 Strcat

> ID：10915047
> 
> 赞同：0
> 
> 时间：2012-06-06T13:19:40.927
> 
> 标签：assembly, strcat, att

我试图在 Assembly 中连接两个字符串，但我似乎无法让它工作。我有以下代码：

```
.data

message: .asciz "message"
leading: .asciz "leading"

.globl main

main:
    push $message
    push $leading

    call strcat

    push %eax

    call printf
... 
```

当我尝试将超过 16 个字符的字符串附加到另一个字符串时，它会根据 gdb 在 strcat 调用中给出分段错误。我在这里错过了什么吗？有没有办法让 strcat 处理超过 16 个字符的字符串？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:26:11.740

您分配的总字节数不超过 16 个字节。您需要为生成的字符串保留足够的内存以适合目标。

# linux - 我可以在不离开 vim 的情况下获得 root 权限吗？

> ID：10915050
> 
> 赞同：15
> 
> 时间：2012-06-06T13:19:48.957
> 
> 标签：linux, vim, sudo

有时当我编辑需要 root 权限的文件时（例如 /etc 下的文件），但我忘记将 vim 作为 sudo 运行。

编辑完成后，输入`:wq`保存离开，我发现我不能，即使使用`!wq`，因为文件是只读的。

如果我离开并重新编辑文件，我的所有工作都将丢失，但如果没有，我将无法保存我的编辑。那么，如何在不离开 vim 的情况下获得 root 权限来写呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-06T13:21:48.337

要强制保存，请使用以下命令

```
:w !sudo tee % 
```

它会提示您输入密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T20:24:30.507

提到的技巧`tee`很好；如果你经常需要这个，我会推荐[SudoEdit 插件](http://www.vim.org/scripts/script.php?script_id=2709)，它提供了一个`:SudoWrite`命令（甚至是一个`sudo:`协议处理程序）。

# android - Android：像带有片段的活动的向导

> ID：10915052
> 
> 赞同：3
> 
> 时间：2012-06-06T13:20:15.920
> 
> 标签：android, android-activity, fragment, wizard

直升机。

我在这里和其他网站上读了很多，但似乎没有人有一个可行的解决方案来使用片段作为向导，如应用程序。

我尝试实现一个，但目前遇到了一些问题。

这是带有 Step-Fragments 占位符的 Activity XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <FrameLayout
    android:id="@+id/fragment_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/cmd_previous"
    android:layout_alignParentTop="true" >
  </FrameLayout>

  <Button
    android:id="@+id/cmd_previous"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/center_separator_buttons"
    android:text="@string/rpz_cmd_perv" />

  <View
    android:id="@+id/center_separator_buttons"
    style="@style/wd_center_aligner"
    android:layout_alignParentBottom="true" />

  <Button
    android:id="@+id/cmd_next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/center_separator_buttons"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="@string/rpz_cmd_next" />

</RelativeLayout> 
```

在 OnCreate 中，我将第一步添加到活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_report_wizard);

  if (this.getIntent().getExtras() != null) {
    Bundle extra = this.getIntent().getExtras();
    if (extra.containsKey(ISelected.ID_KEY)) {
      _ID = extra.getLong(ISelected.ID_KEY);
    }
  }

  if (findViewById(R.id.fragment_container) != null && savedInstanceState == null) {
    _ReportTypeAndName = new ReportWizardTypeAndNameFragment();
    _ReportTypeAndName.setArguments(getIntent().getExtras());
    getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, _ReportTypeAndName).commit();
  }
} 
```

NEXT 按钮用新的 Fragment 替换当前的 Fragment。这似乎工作正常。

```
private void runNext(View view) {
  switch (_CurrentPage) {
    case ReportTypeAndName:
      _ReportSelect = new ReportWizardSelectFragment();
      _ReportSelect.setArguments(getIntent().getExtras());
      getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container, _ReportSelect).addToBackStack(null).commit();

      _CurrentPage = ReportWizardPage.ReportSelect;
      break;

    case ReportSelect:
      _CurrentPage = ReportWizardPage.ReportPreview;
      break;

    case ReportPreview:
      _CurrentPage = ReportWizardPage.None;
      break;

    default:
      break;
  }
} 
```

但是在 PREVIOUS-Button 上，这不起作用。

```
private void runPrevious(View view) {
  switch (_CurrentPage) {
    case ReportTypeAndName:
      // Umstellung des Typs
      _CurrentPage = ReportWizardPage.None;
      this.finish();
      break;

    case ReportSelect:
      _ReportTypeAndName = new ReportWizardTypeAndNameFragment();
      _ReportTypeAndName.setArguments(getIntent().getExtras());
      getSupportFragmentManager().beginTransaction().replace(R.id.fragment_container, _ReportTypeAndName).commit();

      _CurrentPage = ReportWizardPage.ReportTypeAndName;
      break;

    case ReportPreview:
      _CurrentPage = ReportWizardPage.ReportSelect;
      break;

    default:
      break;
  }
} 
```

我收到以下错误（LogCat）：

```
FATAL EXCEPTION: main
android.view.InflateException: Binary XML file line #13: Error inflating class fragment
  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
  at de.webducer.android.worktime.beta.ui.fragment.ReportWizardTypeAndNameFragment.onCreateView(ReportWizardTypeAndNameFragment.java:40)
  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
  at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
  at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
  at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
  at android.os.Handler.handleCallback(Handler.java:605)
  at android.os.Handler.dispatchMessage(Handler.java:92)
  at android.os.Looper.loop(Looper.java:137)
  at android.app.ActivityThread.main(ActivityThread.java:4424)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:511)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalArgumentException: Binary XML file line #13: Duplicate id 0x7f05008b, tag null, or parent id 0x0 with another fragment for de.webducer.android.worktime.beta.ui.fragment.ReportTypeSelectorSpinnerFragment
  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:275)
  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
  ... 18 more 
```

Fragment 的第 40 行是它们的膨胀器

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
  return inflater.inflate(R.layout.frag_report_wizard_1, container, false);
} 
```

如何绑定（添加/删除）片段而不获取重复的 ID？或者如何在没有新的视图初始化的情况下重用片段？

![在此处输入图像描述](../Images/7b02a1b11a4f3691d1cffb31f069b4b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:38:38.177

将您的片段放在后台堆栈中，并根据需要将它们回调。

使用以下命令将其添加到后台堆栈`addToBackStack`：

```
list = new ListFragment_List();
getFragmentManager().beginTransaction().replace(R.id.pane, listlist).addToBackStack(null).commit(); 
```

使用以下命令将其拉回`popBackStack`：

```
FragmentManager fm = getActivity().getSupportFragmentManager();
fm.popBackStack(); 
```

请注意，此代码来自我使用 v4 支持库的应用程序，因此如果您仅针对 Android 3.0+ 进行开发，对片段管理器的调用将略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T20:13:46.023

我想您可能想知道现在有一个工作解决方案可以完全满足您的需求。[这是一个名为WizarDroid](http://nimrodda.github.io/WizarDroid/)的轻量级 Android 库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T14:18:20.870

我使用支持库 v4 和 Sherlock Actionbar。

在尝试了使用和不使用 BackStack 并简化了步骤片段的布局之后，我终于找到了异常的原因。

我在第一步片段中使用片段（选择微调器）（请参阅 XML 布局）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

  <TextView
    android:id="@+id/lbl_report_type"
    style="@style/wd_field_label"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/rpz_lbl_report_type" />

  <fragment
    android:id="@+id/frag_report_type_spinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/lbl_report_type"
    class="de.webducer.android.ReportTypeSelectorSpinnerFragment" />

  <TextView
    android:id="@+id/lbl_report_name"
    style="@style/wd_field_label"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/frag_report_type_spinner"
    android:text="@string/rpz_lbl_report_name" />

  <EditText
    android:id="@+id/report_name"
    style="@style/wd_text_edit_pref"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/lbl_report_name"
    android:hint="@string/rpz_hint_report_name" />

  <TextView
    android:id="@+id/lbl_report_comment"
    style="@style/wd_field_label"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/report_name"
    android:text="@string/rpz_lbl_report_comment" />

  <EditText
    android:id="@+id/report_comment"
    style="@style/wd_text_multi_edit_pref"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/lbl_report_comment"
    android:hint="@string/rpz_hint_report_comment" />

  <TextView
    android:id="@+id/lbl_active"
    style="@style/wd_field_label"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/report_comment"
    android:text="@string/lbl_active" />

  <CheckBox
    android:id="@+id/report_type_active"
    style="@style/wd_text_edit_pref"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/lbl_active"
    android:checked="true"
    android:text="@string/rpz_hint_report_type_active" />

</RelativeLayout> 
```

这个**内部**片段产生了异常，因为**外部**片段尝试在 onCreateView 中膨胀**内部**片段。而这个已经在 FragmentManager 中，具有给定的 ID。

我现在的解决方案是销毁**内部**片段，然后用新片段替换或在从回栈调用之前。

```
private void runPrevious(View view) {
  switch (_CurrentPage) {
    case ReportTypeAndName:
      // Umstellung des Typs
      _CurrentPage = ReportWizardPage.None;
      this.finish();
      break;

    case ReportSelect:
      if (getSupportFragmentManager().findFragmentById(R.id.frag_report_type_spinner) != null) {
        getSupportFragmentManager().beginTransaction()
          .remove(getSupportFragmentManager().findFragmentById(R.id.frag_report_type_spinner)).commit();
      }
      getSupportFragmentManager().popBackStack();
      // Umstellung des Typs
      _CurrentPage = ReportWizardPage.ReportTypeAndName;
      break;

    case ReportPreview:
      _CurrentPage = ReportWizardPage.ReportSelect;
      break;

    default:
      break;
  }
  setButtonState();
} 
```

我希望这可以帮助其他尝试实现向导的人。

# tfs - Team Foundation Server 版本

> ID：10915059
> 
> 赞同：2
> 
> 时间：2012-06-06T13:20:29.027
> 
> 标签：tfs

我对评估团队基础服务器很感兴趣，我已经下载了 2010 试用版并准备在我的服务器上安装。作为评估的一部分，如果我们决定使用 TFS，我的老板要求我对最终成本有一个很好的了解。我在这篇文章中有两个问题。

1.  我需要购买哪些组件才能使用 TFS，目前它们的价格是多少？我们有 3-4 名需要使用 TFS 的开发人员。目前其中一个正在使用 Visual Studio 2010 Professional。

2.  环顾四周后，我注意到 TFS11 Express 刚刚推出，它看起来对多达 5 位开发人员免费。这对我们来说是一个可行的选择吗？

我想说我们正在寻找的主要内容是源代码控制。

亲切的问候

灰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:49:53.600

1.  您将在[此页面上](http://www.microsoft.com/en-us/download/details.aspx?id=13350)找到许可信息。

2.  是的，如果您只需要源代码控制、一些工作项和一些持续集成，那么 TFS Express 对您的团队来说将是一个完全可行的选择。此版本是为像您这样的小型团队制作的，您无需为 CAL 付费。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:49:08.047

因为您只有不到 5 名开发人员，并且只是在寻找源代码控制。Team Foundation Express 将是可行的选择。

# sql-server-2008 - 为什么我无法使用 SQL Server Management Studio 打开 .bak 文件？

> ID：10915069
> 
> 赞同：1
> 
> 时间：2012-06-06T13:20:56.787
> 
> 标签：sql-server-2008, ssms

> **可能重复：**
> [无法读取 .bak 文件](https://stackoverflow.com/questions/3499450/cant-read-bak-files)

标题几乎说明了这一点。我正在尝试打开`.bak`雇主给我的文件，但我无法使用 Microsoft SQL Server Management Studio 2008 R2 打开它们。

它说要下载一些东西，但我在网上找不到任何东西，也没有告诉我要下载什么......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:26:48.540

通常，`.bak`扩展名表示您可以恢复到现有或新数据库的备份文件。

在 SSMS 中，您可以右键单击现有数据库，然后选择任务 > 还原 > 数据库...

# d3.js - D3.js - 可以将剪切路径与 d3.svg.symbol 一起使用吗？

> ID：10915072
> 
> 赞同：0
> 
> 时间：2012-06-06T13:21:13.057
> 
> 标签：d3.js

我正在尝试在一个圆圈内绘制多个“十字”符号以用于可视化。我想在“g”标签中绘制十字，然后应用剪切路径。

是否可以将剪辑路径与 d3.svg.symbol 一起使用？

在下面的示例中，svg 圆圈被剪辑路径正确遮盖；但是十字架（代码的最后一部分）不是。

我做错了什么还是这不是一个功能？

```
var svg = d3.select("#maskingExample")
    .append("svg:svg")
    .attr("width", 500)
    .attr("height", 200);

svg.append("svg:clipPath")
    .attr("id", "clipper")
    .append("svg:rect")
    .style("stroke", "gray")
    .style("fill", "black")
    .attr("x", 50)
    .attr("y", 25)
    .attr("width", 300)
    .attr("height", 45);

svg.append("g").append("svg:circle")
    .style("stroke", "gray")
    .style("fill", "blue")
    .attr("cx", 175)
    .attr("cy", 55)
    .attr("r", 50)
    .attr("clip-path", "url(#clipper)");

svg.append("g").append("path")
    .attr("d", d3.svg.symbol()
    .size( function(d) { return 3000; })
    .type( function(d) { return d3.svg.symbolTypes[1]; }))
    .attr("transform", "translate(150, 50)")
    .attr("clip-path", "url(#clipper")
    .style("fill", "black"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T23:25:52.260

你错过了一个近亲。代替

```
.attr("clip-path", "url(#clipper") 
```

它应该读

```
.attr("clip-path", "url(#clipper)") 
```

# jsf - 向托管 bean 发送 UTF-8 字符串不起作用

> ID：10915077
> 
> 赞同：2
> 
> 时间：2012-06-06T13:21:24.250
> 
> 标签：jsf, utf-8, character-encoding, glassfish

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" >
    <head>
    </head>

    <h:form>
        <h:body>
            <h:inputText value="#{editorBean.value2}" />
            <h:commandButton action="content.xhtml" value="Submit" />
        </h:body>
    </h:form>
</html> 
```

*   值 2 是会话范围的 ManageBean 中的字符串
*   使用 JSF Mojarra 2.1.19
*   玻璃鱼 3.1.2

当我输入`äüö`并提交表单时，它会显示`Ã¤Ã¶Ã¼`在标准输出中。

但是如果我使用ajax，那么这不会发生。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:41:32.697

JSF/Facelets 在整个过程中已经默认使用 UTF-8。

您只需要告诉 Glassfish 请求参数是使用 UTF-8 编码的，这样它就会使用 UTF-8 正确解码。打开`/WEB-INF/glassfish-web.xml`文件并将以下条目添加到`<glassfish-web-app>`：

```
<parameter-encoding default-charset="UTF-8" /> 
```

顺便说一句，您`<h:form>`必须进入*内部*，`<h:body>`而不是外部。此外，您应该使用`<h:head>`而不是`<head>`为了让 JSF 自动包含正确的 Ajax 脚本。

# android - 如何制作像 Logo Quiz 这样的应用程序

> ID：10915082
> 
> 赞同：0
> 
> 时间：2012-06-06T13:21:42.893
> 
> 标签：android, database

我正在开发一个 Android 应用程序，其功能类似于 Google Play 商店中流行的 Logo Quiz，但是，我没有遇到任何关于如何制作检查机制的教程。

我知道它涉及一个数据库来确定答案是否正确，但我不知道如何使用它，欢迎任何教程:)

此外，我在应用程序中设置了除此之外的所有其他内容，但是（主要部分 -.-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:37:16.607

要制作像 Logo Quiz 这样的应用程序，您需要在徽标名称和图片之间建立某种关系。我能想到的第一件也是最基本的事情就是使用 sqlite 数据库来存储您的徽标名称和图像名称。之后，您可以在用户输入后检查它是否正确。

至少这是我所知道的最简单的方法。然而，这只是一个想法，所以也许有更好的方法来做到这一点。

# iphone - 在越狱设备上使用后台程序时未调用 UIApplicationDelegate

> ID：10915084
> 
> 赞同：1
> 
> 时间：2012-06-06T13:21:43.667
> 
> 标签：iphone, background, jailbreak, uiapplicationdelegate

我遇到了一个问题。我的软件需要知道应用程序何时处于后台，以便它与服务器断开连接，并开始接收推送通知。

为此，我使用 UIApplicationDelegate 的方法：

```
- (void)applicationWillResignActive:(UIApplication *)application
- (void)applicationDidEnterBackground:(UIApplication *)application
- (void)applicationWillEnterForeground:(UIApplication *)application
- (void)applicationDidBecomeActive:(UIApplication *)application
- (void)applicationWillTerminate:(UIApplication *)application 
```

问题是，当越狱设备使用称为后台程序的“调整”时，这将强制您的应用程序保持活动状态而不进入后台，当我们单击 HOME 按钮时，不会调用 UIApplicationDelegate 的任何方法。

问题是，在 SSL 中连接的每个客户端都在服务器上花费了我很多内存。我真的不在乎设备是否越狱，或者事实上，应用程序将在设备上无限期运行。但是当应用程序不再出现在屏幕上时，我希望他们与服务器断开连接，但我似乎找不到任何方法可以在安装后台程序时通知我此类操作。

**解决方案查找**：[在帖子上查看我自己的答案](https://stackoverflow.com/a/11034826/374215)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:27:16.247

最好的办法是消耗大量内存，这样越狱者将不得不退出您的应用程序！当然只是开玩笑。最好的选择是等待用户不活动。例如： 1\. 检查设备是否越狱。2.检查是否安装了后台程序（我不确定你是否可以这样做，但我很确定你可以）。3\. 如果用户是所有这些东西等待他们​​处于非活动状态，比如说 30 秒，然后断开与服务器的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:50:02.187

安装 Backgrounder 时，或仅当您的应用程序转换到后台时，这些方法都不会在您的应用程序中被调用吗？如果它们根本没有被调用，那么解决方案非常简单：设置一个定时器，比如说，10 秒，当你的应用程序的`application:didFinishLaunchingWithOptions`方法被调用时，当该定时器到期时，如果`applicationDidBecomeActive:`没有被调用，那么你知道用户正在使用后台程序。

但是，如果他们确实在应用程序启动时被调用，那么事情就会变得更加棘手。我不知道有任何直接方法可以检测是否从沙箱中安装了像 Backgrounder 这样的调整。您可以简单地检查设备是否越狱（有很多方法可以做到这一点，它们应该很容易找到），如果是，则为您的服务器连接添加超时时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T14:04:16.203

奶茶让我走上了正轨……所以赏金给了他。

但实际上我有一个更好的解决方案......我已经检查了退出应用程序时抛出的每一个通知......

我得到了这个，即使后台程序配置为保持应用程序打开，这些通知也会被抛出：

```
UIApplicationSuspendedEventsOnlyNotification -- When going into background
UIApplicationResumedEventsOnlyNotification   -- When going into foreground 
```

这是有道理的，因为即使使用后台程序，让应用程序继续接收事件通知也是一个坏主意，例如，当在应用程序外部进行旋转（或摇晃）更改时。您是否想象每次移动 iphone 时每个 App 都会在背景上旋转？

# facebook - 显示/隐藏 iframe

> ID：10915091
> 
> 赞同：0
> 
> 时间：2012-06-06T13:21:56.350
> 
> 标签：facebook, wordpress, iframe, facebook-iframe

我正在为我的网站使用 wordpress，并且我正在尝试设置我的页面，以便用户必须单击一个按钮才能查看内容。是的，显示/隐藏等非常简单，但我希望用户单击的按钮是这个[http://www.facebook.com/plugins/like.php](http://www.facebook.com/plugins/like.php)

要在我的页面中显示它，我需要使用一个 iframe，这是它变得棘手的地方。我已经设置了显示/隐藏代码，这样当用户单击类似按钮（或 iframe 中的任何位置）时，它将显示内容。但是，没有这样的运气！

这是我的代码

```
<div id="imagebox" style="display:none;"><?php $image = wp_get_attachment_image_src(get_field('image'), 'full'); ?>
                                <img src="<?php echo $image[0]; ?>" alt="<?php get_the_title(get_field('image')) ?>" /> </div>

    <div onclick="ShowDiv()"><iframe src="http://www.facebook.com/plugins/like.php?  href=http://www.facebook.com/BrandBang&amp;" allowTransparency="true">
            </iframe></div>

    <script language="javascript">
    function ShowDiv()
    {
    document.getElementById("imagebox").style.display = '';
    }
    </script> 
```

我知道很难使用 iframe 来做我想做的事情，但是当涉及到这些东西时，我是一个完全的新手。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:25:21.647

试过给你的 div 一个`id="imagebox"`吗？

**编辑：**

这已经[在这里](https://stackoverflow.com/questions/6452502/adding-onclick-event-to-iframe)回答了。但是，我乍一看并没有意识到您在 iframe 中加载的内容不是来自您自己的域，因此您将陷入跨站点脚本事件，这是不允许的。

Afaik，您必须以某种方式重新设计您的实现。例如，您可以使用 curl 从 facebook 检索生成的 html，然后在您自己的 div 中输出。像这样的东西应该工作。

# digiflow - 如何使用 Digiflow 代码导出视频？

> ID：10915096
> 
> 赞同：0
> 
> 时间：2012-06-06T13:22:07.697
> 
> 标签：digiflow

我想使用 Digiflow 制作演示视频，将 .dvi 或 .dfm 文件转换为 .avi。我希望最终图像具有一套配色方案，并且我希望时间显示在屏幕一角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:22:08.027

使用工具 > 变换强度。将以下内容放在 Digiflow 代码的空格中。

```
 # Specify output image as a function of P
    hD := draw_start(P);
    draw_set_axes(hD,0,1,0,1);
    draw_font(hD,1,"Arial");
    draw_text(hD,0.15,0.03,make_string(Time.tNow,"f5.1")+" s","left");
    mask := draw_on_array(hD);
    mask := mask.image[:,:,0];
    P := where(mask,P,1); 
```

这应该将时间放在输出图像的左下角。要更改配色方案，请使用“选项”作为输出图像并保存为 .avi 进行转换。

# android - 使用 Android 应用程序运送一个（巨大的！）SQLite3 DB

> ID：10915101
> 
> 赞同：0
> 
> 时间：2012-06-06T13:22:12.963
> 
> 标签：android, sqlite

我需要发布一个应用程序，该应用程序使用对几个预先存在的 SQLite3 DB 的只读访问，每个数据库都是几个 100MB，总大小> 1GB。这些数据库是在 Mac 上创建的，目前用于发布的 iOS 应用程序中。我精通Java，但对Android很陌生。

这导致以下问题：

1）我需要修改数据库吗？我只打算将它们与 SQLiteDatabase::rawQuery 查询一起使用，所以我希望不需要绑定和元数据。

2）即使数据库仅用作只读数据库，我也必须将它们从应用程序包中复制出来或在第一次启动时将它们下载到用户目录中，这真的正确吗？

3）查询可能很慢。我想在线程中运行它们并通过回调提供数据。这是在普通 Java（可运行/线程）中完成的方式，还是我必须使用另一种方法？

4) 还有什么我明显错过的对 Androidan 很明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:28:38.117

一个不错的 sqlite 助手类的例子看[这里](https://stackoverflow.com/a/5638822/530933)

1.  你不应该需要编辑数据库。我的 sqlite 数据库的工作方式与我通过 sqlite3 或使用 android my sqlite helper 类访问它们的方式相同

2.  一旦你复制它们，你就可以读写

3.  不太确定这个答案。我会说虽然上面的数据库助手类似乎工作得很好（快）但我的数据库更小（500kb）

4.  不这么认为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:33:14.290

1）不，它应该可以正常工作。

2) Yes, if you want to ship an APK that is over 50Mb you will need to use an [expansion](http://developer.android.com/guide/market/expansion-files.html) file.

3) For easy background tasks with a call back you could use an [ASyncTask](http://developer.android.com/reference/android/os/AsyncTask.html).

# windows - Fortran 中的清屏

> ID：10915105
> 
> 赞同：2
> 
> 时间：2012-06-06T13:22:33.330
> 
> 标签：windows, fortran

我已经为此寻找了相当长的时间。有谁知道如何在 Fortran 语言的控制台应用程序中清除屏幕？任何帮助都会非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:35:59.700

Fortran, *qua* Fortran, knows nothing of such concepts as screens or keyboards or, for that matter, computers. There is, therefore, no language-standard way of clearing a screen from Fortran. You will have to find some platform-dependent approach.

Most Fortran compilers have some way of doing this, for example Intel Fortran provides the SYSTEM function.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T17:25:27.230

与其他人相反，我不会调用`SYSTEM()`（标准 Fortran 2008 替代方案是`execute_command_line()`），但我会打印正确的 ANSI 转义码[http://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)：

```
print *, achar(27)//"[2J" 
```

这将比调用快得多`SYSTEM()`。

这适用于典型的 Linux 终端，但不适用于 MS Windows 终端。

如何使用转义码的另一个更实用的参考是[http://www.lihaoyi.com/post/BuildyourownCommandLinewithANSIescapecodes.html](http://www.lihaoyi.com/post/BuildyourownCommandLinewithANSIescapecodes.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T17:11:39.957

在 Fortran 90/95 中，您最好的选择是系统命令，它是供应商提供的扩展（即，不是 F90/95 标准的一部分，因此一些晦涩的 Fortran 编译器可能没有它，但所有主要编译器都有）。

```
$ cat clear.f90
program
call system('clear')
end 
$ gfortran clear.f90 -o clear
$ ./clear 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T13:37:07.573

It depends on your specific sytem and compiler. There is no general way. Fortran doesn't know about specific hardware devices like terminal screens and printers. (Neither do most other languages). The details depend entirely on your specific system.

My advice would be to clear the terminal by invoking the relevent script via the command line - but this is not nice. it is generally more portable to write the output to an ordinary text file and then execute appropriate system commands to print that file to screen. This way you can manipulate the file as you wish...

See [here](http://objectmix.com/fortran/35090-clear-screen.html) for a simalar question from which these some of the above text was salvaged.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-04T14:22:29.703

在 Fortran`ACHAR(N)`中返回 N 的 ASCII，所以我首选的方法是：

```
WRITE(*,'(2f15.9,A5)',advance='no') float1,float2,ACHAR(13) 
```

`ACHAR(13)``\r`在 Python 中返回回车符。所以打印后，它会将光标返回到可以被覆盖的行的开头。

退出循环后，您可以使用它`CALL SYSTEM('clear')`来清洁屏幕。

这很有帮助，因为`CALL SYSTEM('clear')`速度较慢且占用大量 CPU，您可以通过将上述方法替换为

```
WRITE(*,'(2f15.9)',advance='no') float1,float2;CALL SYSTEM('clear') 
```

并检查循环所用时间的差异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-17T17:40:54.690

这在 FTN95 中对我有用

```
program
call system('CLS')
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-13T05:31:28.977

我找到了另一种在类 UNIX 系统中通过打印`clear`命令输出来清除屏幕的方法
（来自 clear 命令的手册，其中指出您可以将输出写入文件然后`cat`清除屏幕）

所以更好的方法是`clear > temp.txt`在打印语句中使用文件中的字符

尽管两者都做同样的事情，但调用 SYSTEM("foo") 比直接打印这些字符慢得多（100 倍以上）

例如：

```
program clear
    implicit none
    INTEGER::i
    do i = 1, 1000
        print *, "Test"
        call system("clear")
    enddo
end program clear 
```

这个程序需要**3.1 到 3.4**秒之间的任何时间。

但是如果我直接打印这样的字符，而不是调用系统：

```
program clear
    implicit none
    INTEGER::i
    do i = 1, 1000
        print *, "Test"
        print *, "[H[2J[3J"
    enddo
end program clear 
```

这会产生完全相同的结果，但需要**0.008 到 0.012**秒（8 到 12 毫秒）之间的任何时间

实际上，运行第二个循环 100,000 比`CALL SYSTEM("clear")`1000 倍快

**编辑：不要从这里复制粘贴，它不起作用，（字符在 StackOverflow 上被替换）**

只需使用`clear > file`并将文件的内容复制到打印语句中

实际代码的屏幕截图（来自预览）： 我猜这些字符不受支持，它们在答案中消失（它们在预览中工作正常）
[![截屏](../Images/4abecb64628947b2fc3ed3c018bf75a4.png)](https://i.stack.imgur.com/FCMgw.png)

# php - 如何使用 API 和 PHP 添加对 youtube 视频评论的回复

> ID：10915108
> 
> 赞同：1
> 
> 时间：2012-06-06T13:22:43.343
> 
> 标签：php, youtube-api

如何使用 API 和 PHP 添加对 youtube 视频评论的回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:27:44.063

通过搜索一分钟，我发现了这个： [https ://developers.google.com/youtube/2.0/developers_guide_protocol_comments#Adding_a_comment](https://developers.google.com/youtube/2.0/developers_guide_protocol_comments#Adding_a_comment)

看起来像你需要的那个。当然，您需要对想要发表评论的用户进行身份验证。

要了解如何`POST`在 PHP 中发出请求，请参阅这篇文章：[http ://www.lornajane.net/posts/2010/three-ways-to-make-a-post-request-from-php](http://www.lornajane.net/posts/2010/three-ways-to-make-a-post-request-from-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T00:29:08.847

这个库似乎很容易添加回复评论：[https ://github.com/jimdoescode/Zendless-PHP-YouTube-API](https://github.com/jimdoescode/Zendless-PHP-YouTube-API)

```
/**
 * Add a comment to a video or a reply to another comment.
 * To reply to a comment you must specify the commentId
 * otherwise it is just a regular comment.
 *
 * @param string $videoId the video the comment goes with.
 * @param string $comment the comment
 * @param string (optional) $commentId the id of the comment to reply to.
 * @return mixed false if not authenticated otherwise the http response is returned.
 **/

 public function addComment($videoId, $comment, $commentId = false) 
```

# xcode - /usr/include/mach-o/loader.h 来自哪里？

> ID：10915115
> 
> 赞同：3
> 
> 时间：2012-06-06T13:23:03.877
> 
> 标签：xcode, macos, cocoa, mach-o

似乎我的一些 Mac OS X 系统有 /usr/include/mach-o/loader.h 而其他没有。我很困惑，因为这里记录了这个文件：

[https://developer.apple.com/library/mac/#documentation/developertools/conceptual/MachORuntime/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/MachORuntime/Reference/reference.html)

例如：

```
...Declared in /usr/include/mach-o/loader.h. See also mach_header_64. 
```

有谁知道这个文件是否在任何较新版本的 Mac OS X 上被删除？或者如果我需要安装一个特殊的 SDK 来获得它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:51:11.070

它存在于我的 Mac (OS X 10.7) 上，但我确实安装了 Xcode，它可能是其中的一部分。

**编辑**

请注意，当 Xcode 编译任何内容时，它不会使用其中的头文件，`/usr/include`而是使用您选择的 SDK 中的头文件，您可以通过编译然后检查 -isysroot 命令行开关来找出系统头文件的位置。所以我刚刚做了一个编译，编译器调用包括：

```
-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7sdk 
```

如果您打开该目录，您会发现它包含一个`usr/include/mach-o`子目录，其中包含您想要的文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-06T22:13:16.107

loader.h 是 MAC 上的隐藏文件，因此如果您没有可查看的隐藏文件，请首先打开终端执行以下命令：

```
defaults write com.apple.finder AppleShowAllFiles TRUE 
```

然后这个命令：

```
killall Finder 
```

之后按照查找器中的路径：/usr/include/mach-o/loader.h

如果您确实有隐藏文件，我只能说我有一台 OS X 10.7、10.6 和 10.5 笔记本电脑，他们拥有它并安装了 Xcode。

# iphone - 如何使用 UILabel 显示 APNS 设备令牌？

> ID：10915120
> 
> 赞同：0
> 
> 时间：2012-06-06T13:23:20.163
> 
> 标签：iphone, objective-c, uiviewcontroller, uiresponder

我想用 UILabel 显示一个 APNS 设备令牌。

所以我在下面编码：

```
//AppDelegate.m

- (void)application:(UIApplication*)application
didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
// TODO: Pass the token to our server
NSString *devToken = [[[[deviceToken description] 
                        stringByReplacingOccurrencesOfString:@"<"withString:@""] 
                       stringByReplacingOccurrencesOfString:@">" withString:@""] 
                      stringByReplacingOccurrencesOfString: @" " withString: @""];

NSString *str = [NSString 
                 stringWithFormat:@"Device Token=%@",devToken];
UIAlertView *alertCtr = [[UIAlertView alloc] initWithTitle:@"Token is " message:devToken delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles: nil];
[alertCtr show];
NSLog(@"device token - %@",str);
viewc = [ViewController alloc];

viewc.tokenLabel.text = str;

} 
```

但什么也没发生。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:27:15.297

```
viewc = [ViewController alloc];
viewc.tokenLabel.text = str; 
```

在`alloc`你的视图控制器之后，你也应该`init`这样做。并以模态方式或在导航控制器或其他方式呈现它，这取决于您。

# c++ - 调试数据方法 qabstracttablemodel

> ID：10915121
> 
> 赞同：0
> 
> 时间：2012-06-06T13:23:21.693
> 
> 标签：c++, qt

我将 QAbstractTableModel 子类化以在表视图中显示高分列表。我的数据不显示。我发现没有调用data方法。headerData ， rowCount ， columnCount 被调用并且似乎工作正常。我的问题是如何调试这个问题，有谁知道在 qt 源代码中的哪里插入断点来调试这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:04:55.400

我发现了问题。这是我构建模型的方式。我在做

ScoreTableModel pstm(0,pscores);，其中 pscores 是 QList < HighScore > * scoresTableView->setModel(&pstm);

当前工作的版本是：m_pScoreTableModel = new ScoreTableModel(0, pscores); scoreTableView->setModel(m_pScoreTableModel); 其中 m_pScoreTableModel 是 ScoreTableModel*

有谁知道我为什么会有这种奇怪的行为？难道是因为这个 QList < HighScore > * 实际上是要显示的表格的内容？

# c# - MonoTouch 上的数字键盘

> ID：10915122
> 
> 赞同：1
> 
> 时间：2012-06-06T13:23:26.917
> 
> 标签：c#, iphone, mono, xamarin.ios, monotouch.dialog

我在使用 MonoTouch.Dialog 创建登录屏幕时遇到问题。

如果您查看下面的屏幕截图，用户必须输入他们的手机号码和 PIN 才能登录。这两个 EntryElements 都使用数字键盘。第一个问题是没有办法从手机号码字段移动到密码字段。其次，一旦他们输入了他们的密码，就没有“完成”按钮或任何可以关闭键盘的东西。他们向上滚动以戳登录按钮是非常违反直觉的（如第二个屏幕截图所示）。

如何获得带有上一个、下一个和完成按钮的小栏，如第三个屏幕截图所示？我在一些应用程序上看到了这一点，想知道是否可以使用 MonoTouch.Dialog 让它工作？

键盘挡道： ![键盘挡道](../Images/65f349131116d2bf35558e80fa823876.png)

你如何关闭键盘？ ![你如何关闭键盘？](../Images/4f0f52df0ba1420c7215a126518f47c6.png)

理想情况下，这就是我想要的： ![理想情况下，这就是我想要的](../Images/1521e9b720d2a5c2724269108b0e6fdf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:28:57.763

[另一个 Stackoverflow 答案显示](https://stackoverflow.com/questions/8342011/tool-bar-with-done-button-on-top-of-keyboard-for-iphone-using-mono-touch)了如何在键盘顶部添加“完成”按钮。使用此方法，您也可以添加其他按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T07:57:30.333

答案是使用以下内容创建您自己的 DialogViewController：

```
 private UIView _toolbar;
    public override UIView InputAccessoryView
    {
        get
        {
           return _toolbar;
        }
    } 
```

然后，您创建要在返回的 UIView 中显示的任何内容。我为 Next 和 Prev 按钮使用了 UISegmentedControl，为 Done 按钮使用了 UIBarButtonItem。

# asp.net-mvc - 在被动场景中构建指向 STS 的 url

> ID：10915124
> 
> 赞同：0
> 
> 时间：2012-06-06T13:23:35.653
> 
> 标签：asp.net-mvc, wif

我习惯于使用 WIF 进行编程，模式通常如下所示： - 添加 STS Ref - 设置需要自动化的 Web 的位置（或使用 [Autorize] 在 MVC 中装饰操作 - 如果用户访问“保留”部分，它们被重定向到 STS

但是假设我需要实际构建一个网页，为用户提供 STS 选择以便登录。不是通过配置访问触发重定向的页面，而是通过在页面上主动登录。

如果我这样做，我的 STS 的 url 的形式是什么？我需要设置哪些参数才能使用户登录然后重定向到索引页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T16:01:11.377

WIF 可以帮助您解决这个问题。

这是它的代码片段：

```
WSFederationAuthenticationModule fam = FederatedAuthentication.WSFederationAuthenticationModule;

var signInRequest = new SignInRequestMessage(new Uri(fam.Issuer), fam.Realm)
        {
            AuthenticationType = fam.AuthenticationType,
            Freshness = fam.Freshness,
            Realm = "some realm",
            Context = GetAReturnUrl(),
            HomeRealm = "A Home Realm"

        }; 
```

然后，您可以使用以下命令检索 URL：

```
signInRequest.WriteQueryString() 
```

# visual-studio-2010 - 我可以在 Visual Studio 2010 Express 或 Professional 中创建 UML 模型和图表吗？

> ID：10915126
> 
> 赞同：0
> 
> 时间：2012-06-06T13:23:40.450
> 
> 标签：visual-studio-2010

我可以在 Visual Studio 2010 Express 或专业版中创建 UML 模型和类图吗？我在哪里可以获得所需的插件？

提前致谢

# asp.net-mvc-3 - @Html.HiddenFor() 不保留价值

> ID：10915127
> 
> 赞同：1
> 
> 时间：2012-06-06T13:23:41.130
> 
> 标签：asp.net-mvc-3, hidden-field, html.hiddenfor

在我看来，所有数据都来自 viewmodel，viewmodel 包括以下内容：

```
 public class Coursework
{
   public virtual PortfolioMaster prtfMaster { get; set; }
   public virtual bool uploadfile { get; set; }
    public virtual string filename { get; set; }
} 
```

当我在我的视图中使用它时，如图所示：

```
 @Html.HiddenFor(model => model.prtfMaster.CourseID)
    @Html.HiddenFor(model=>model.filename) 
    @Html.HiddenFor(model=>model.uploadfile) 
```

它没有保留价值`filename`，`uploadfile` 但在我看来，如果我使用`@if(Model.uploadfile)`它会给我适当的价值

谁能告诉我为什么会这样？我怎样才能保留价值`model.filename`

# ios - 如何使 UITextview 像 Facebook 评论视图？

> ID：10915128
> 
> 赞同：3
> 
> 时间：2012-06-06T13:23:47.493
> 
> 标签：ios, uitextview, facebook-ios-sdk

我想让 UITextview 像 Facebook 评论视图一样。如何在不使用任何外部库的情况下做到这一点？

这是示例图像：

![示例图片](../Images/520efa38d5b1950d565b9c21ed5371c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:04:27.540

*   首先，将您的外观设置`UITextField`为*警报*以获取黑色键盘。
*   然后，您只需要另外两个视图：

    *   背景是黑色的
    *   一个白色的，它将成为您的文本字段的背景，您以编程方式将以下代码应用于（不要忘记 `#import <QuartzCore/QuartzCore.h>`首先）：

        `view.layer.cornerRadius = 10;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T05:44:02.970

我有这个示例代码 - 这里是[YIPopupTextView](https://github.com/inamiy/YIPopupTextView)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:31:00.923

他们所做的就是使用图像，就是这样！他们还可能会扩大 UITextfield 的大小以使其适合整个屏幕，但是这很容易。如果你进入 Interface Builder，你会看到一个显示图像的东西。如果您想以编程方式执行此操作，则有一个值为 textfield.background (A UIImage)。

如果您不想创建图像，您可以创建自定义 UITextField 子类并使用 -(void) drawInRect:(CGRect)rect 函数，并使用 Quartz 绘制它，并在界面生成器中将 UITextField 类设置为您的文本字段。

# rest - Spring MVC Rest，使用 URL 调用，转义字符并导致在控制器中获取值的问题

> ID：10915134
> 
> 赞同：1
> 
> 时间：2012-06-06T13:24:22.720
> 
> 标签：rest, spring-mvc

我有一个控制器映射如下

```
 @RequestMapping(value = { "/search"}, method = RequestMethod.GET)
 public @ResponseBody
 Object searchProducts(@PathVariable("query") String query,
 @RequestParam(value = "param1", required = false) String param1,
 @RequestParam(value = "param2", required = false) String param2,) 
```

当我使用下面给出的 url 时它工作正常我什至得到了 spring 填充的值

```
 http://host/app_name/search?param1=[value]&param2=[value] 
```

但是当使用转义字符时它会中断

```
 http://host/app_name/search?param1=[value]&amp;param2=[value] 
```

springcontext 或 web.xml 中是否有任何配置可以让我自动处理编码？我已经尝试在 web.xml 中设置以下 contect 但它不起作用

```
 <context-param> 
 <param-name>defaultHtmlEscape</param-name> 
 <param-value>true</param-value> 
 </context-param> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:48:10.843

`&amp;`是一个 HTML 转义序列，没有要求将其视为`&`URL。因此，最好修复您的内部系统以使其生成正确的 URL。

但是，如果由于某种原因您不能这样做，您可以通过以下（hackish）方式解决此问题：

*   创建一个`Filter`将原始包装`HttpServlerRequest`到您的子类中的`HttpServlerRequestWrapper`.
*   `amp;`在该子类中创建“固定”参数的映射（即从原始请求中获取参数并通过从参数名称的开头剥离来创建新的参数映射）并覆盖`getParameter*()`使用该映射的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:48:44.317

Spring 将其视为值的一部分是有道理的，它`'&amp;'`是 HTML 编码的，而不是 URL 编码的。

我会尝试弄清楚为什么系统对`'&'`as进行 HTML 编码`'&amp;'`而不是构建正确的 GET 字符串。

如果您想在 GET 参数的值中实际包含一个 & 符号，请使用 %26 ，它在通过 URL 传递时解码为 '&'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-17T05:46:40.667

尝试：

```
HtmlUtils.htmlUnescape(query); 
```

# node.js - Node.js 线程共享内存访问

> ID：10915135
> 
> 赞同：0
> 
> 时间：2012-06-06T13:24:25.340
> 
> 标签：node.js, caching

有什么类似于 Node.js 的 PHP 的 APC（替代 PHP 缓存）吗？

因此，在服务器上运行的每个 Node.js 线程都可以访问缓存。我知道 Node.js 的架构可能不容易或根本不允许像缓存一样的 APC。

我知道我们当然也可以在每台服务器上运行 memcache 来创建服务器级缓存，但很好奇还有其他选择。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:08:17.293

Node 试图在其 API 中只保留基本的东西，所以你不会发现这样的东西“烘焙”（例如，WebSockets 不包含在 Node 核心中，而是包含在外部模块中）。

您需要使用 Redis 或 Memcached 之类的东西创建这样的缓存层。

PS您最好参考Node进程而不是线程，因为您不必使用Node处理线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:41:13.523

我不知道这个模块是否有帮助。我不能保证它的可靠性，而且我从来没有信守过做 Windows API 的承诺，因为我有点像 linux 势利小人（因为微软没有靠近我的电脑）

[https://github.com/dazhazit/node-ipcbuffer](https://github.com/dazhazit/node-ipcbuffer)

它在进程之间实现了一个简单的字节缓冲区。您可能可以在其上构建您喜欢的任何机制。

# sql - 在数据库中实施审查标志；最佳实践

> ID：10915137
> 
> 赞同：2
> 
> 时间：2012-06-06T13:24:29.023
> 
> 标签：sql, database, flags

我需要存储一些与某些实体相关的评论标志。每个审查标志只能与单个实体属性组相关。例如，表`Parents`有一个`ParentsStatus`标志，表`Children`有一组`ChildrenStatus`标志。

在当前的设计方案中，我有三个表格：

*   `ReviewTypes`：存储标志和它们相关的属性。
*   `ReviewPositions`：存储标志可以具有的值。
*   `Reviews`：存储交易数据，实际评论。它就像 UsersToFlags:[数据库行中的标志，最佳实践](https://stackoverflow.com/questions/124844/flags-in-a-database-rows-best-practices)。

问题是我被拒绝了，不需要有`Reviews`表格，最好只在每个实体上存储这个实际的评论数据。例如添加一个额外的列`Parents`来保存`ParentsStatus`。他们认为这是一个更简单的解决方案，并且将数据分离出来对于外部场景来说只是“矫枉过正”。

我不喜欢这个想法，因为这意味着每次我们想要添加一个新的审查标志时，我们都需要更新核心实体表以保存该标志。

空间不是问题。

人们有什么强烈的意见吗？

编辑：

此评论适用于三个答案。共识是关系方法是最好的，但我认为我需要从一些非常基本的阅读[了解 EAV 数据库模型的最佳初学者资源中阅读更多关于 EAV 模型的内容？](https://stackoverflow.com/questions/494158/best-beginner-resources-for-understanding-the-eav-database-model)及其相关链接似乎不是超级简单，我不想给自己挖个洞。感谢wildplasser。一旦我阅读更多内容，我将返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:47:51.543

哦是的。他们的想法更简单，直到你想增强它。鉴于该计划，他们提议如果每个实体需要两次审查，该怎么办。如果您想附加其他内容，例如注释/注释，该怎么办。一旦他们发现他们的想法是多少充气飞镖，你有什么要转向更有用的？更不用说您需要某种识别状态字段的方法，例如列名以“_Status”结尾的脆弱垃圾，或者您必须在某处对其进行硬编码。

正确地做这件事并没有那么多的工作，也没有更复杂，事实上在很多方面它更简单，并且可以以更低的成本应对不可逆转的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:19:42.820

归一化总是比过早优化更可取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:15:38.053

我喜欢单独的评论表的一个原因是，您可以保留您可能不想显示的更改（因为它尚未经过审核和批准）并仍然保留旧数据，直到新数据获得批准。不知道你的情况是否需要。

当您想要显示更改时，为了使将来的编程更简单，您可以编写一个显示旧数据和新数据的视图。

# javascript - 只要字符串有空格，就将其字符大写

> ID：10915138
> 
> 赞同：2
> 
> 时间：2012-06-06T13:24:31.597
> 
> 标签：javascript

我想在获得空格时将字符串的字符大写，但不更改其他字母。例如。

```
the mango tree -> The Mango Tree
an elephant gone -> An Elephant Gone
the xyz hotel -> The Xyz Hotel 
```

**在javascript中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:30:23.723

由于您没有指定为什么需要这样做，我想猜测它主要用于文本显示。如果是这种情况，您可能想要一个更简单的 CSS 解决方案：`text-transform:capitalize`- 让浏览器完成工作！

除此之外，似乎在此之前已经回答了这个问题：[Convert string to title case with JavaScript](https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript/196991#196991)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:37:26.233

您可以执行以下操作：

```
var capitalize = function (text)
{
    return text.replace(/\w\S*/g, function (text) { 
        return text[0].toUpperCase() + text.substring(1);
    });
}

alert(capitalize('the dog ran fast')); 
```

与其他建议不同，这将允许您在字符串中保留其他大写字母。例如，字符串“我的变量名是coolCat”会变成“我的变量名是CoolCat”。

# javascript - jquery 使用多个 setTimeouts

> ID：10915141
> 
> 赞同：2
> 
> 时间：2012-06-06T13:24:43.407
> 
> 标签：javascript, jquery, timeout

我目前正在创建一个包含一些动态内容的站点，这样每当用户将鼠标悬停在标签上时，标签就会展开以显示更多信息，然后在特定时间后标签将再次折叠，除非用户再次将鼠标悬停在标签上如果超时将重置。我已经开发了代码来为 1 个标签执行此操作，但我现在要开发它来为多个标签执行此操作。

我遇到的问题是我正在全局定义计时器的变量，因此它可以用于两个事件，但是当我有多个标签时这将不起作用。

我想不出如何为多个标签实现这一点，有人知道我该怎么做吗？

到目前为止，这是我的代码...

```
 var timer;

    $('.label').mouseenter(function(){

        clearTimeout(timer);

        $('#' + this.id + ' div').slideDown('slow');

    });

    $('.label').mouseleave(function(){

        var temp = $('#' + this.id + ' div');

        timer = setTimeout(function() { 
            temp.stop().slideUp('slow');
        }, 2000);

    }); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:27:51.633

您可以维护一组计时器，例如

```
var timer = [];

$('.label').mouseenter(function(){

    clearTimeout(timer[$(this).index()]);

    $('#' + this.id + ' div').slideDown('slow');

});

$('.label').mouseleave(function(){

    var temp = $('#' + this.id + ' div');

    timer[$(this).index()] = setTimeout(function() { 
        temp.stop().slideUp('slow');
    }, 2000);

}); 
```

您还可以使用更清晰的语法来实现这一点[`.hover`](http://api.jquery.com/hover/)like

```
var timer = [];

$('.label').hover(function(){

    clearTimeout(timer[$(this).index()]);

    $('#' + this.id + ' div').slideDown('slow');

},function(){
    var temp = $('#' + this.id + ' div');

    timer[$(this).index()] = setTimeout(function() { 
        temp.stop().slideUp('slow');
    }, 2000);

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-06T13:29:00.097

你为什么不使用`hover`：

```
$('.label').hover(function(){
  $('#' + this.id + ' div').slideDown('slow');
},
function(){
  $('#' + this.id + ' div').slideUp('slow');
}) 
```

这样，当标签悬停在上面时，会显示更多信息，当鼠标离开它们时，它们会再次隐藏起来。

第一个参数`hover`是鼠标进入，第二个参数是鼠标离开。

**更多信息：**

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:34:01.163

`timer`您可以使用 jQuery 的方法而不是使用全局变量，`.data()`如下所示：

```
$('.label').hover(function(){
    clearTimeout($(this).data('hover_timeout'));
    $('#' + this.id + ' div').slideDown('slow');
},function(){
    var temp = $('#' + this.id + ' div');
    $(this).data('hover_timeout', setTimeout(function() { 
        temp.stop().slideUp('slow');
    }, 2000));
}); 
```

[jQuery.data()](http://api.jquery.com/jQuery.data/)文档

# rally - Rally API 和发布燃耗数据

> ID：10915145
> 
> 赞同：0
> 
> 时间：2012-06-06T13:25:11.537
> 
> 标签：rally

我正在尝试从 API 中提取发布燃耗数据。那可能吗？如果是这样，有人这样做了，并且可以共享对象+查询参数吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:58:29.293

您将需要查看 ReleaseCumulativeFlowData 对象。

一个示例网址是： [https](https://trial.rallydev.com/slm/webservice/1.34/releasecumulativeflowdata?query=(ReleaseObjectID) ://trial.rallydev.com/slm/webservice/1.34/releasecumulativeflowdata?query=( ReleaseObjectID = 12345)

查询字符串通常带有 ReleaseObjectID = some Release ID。

然后，您会取回累积流量数据结果，这些结果是每天按 ScheduleState 计数的集合 - 希望信息有所帮助。

（在 Rally > 帮助 > Web 服务 API 文档中，查看那里的字段的累积流数据）

希望有帮助。

# javascript - JavaScript 合约和断言

> ID：10915146
> 
> 赞同：3
> 
> 时间：2012-06-06T13:25:13.623
> 
> 标签：javascript, assert, design-by-contract

这困扰了我一段时间。我在断言失败时抛出异常，但这只有在我能真正捕获异常时才有用（在这种情况下我`alert`是用户）。如果我无法捕捉到异常，那么

1.  我依靠浏览器通知用户存在内部错误（浏览器可能什么都不做，所以用户永远不会发现有问题），并且
2.  我没有看，所以不能清理。

那么，真的有一种处理 JavaScript 中断言错误的好方法吗？有什么方法可以捕获未捕获的异常吗？请注意，我对单元测试、用户错误等不感兴趣——我只关心合同编程，用户和开发人员都需要知道发生了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T17:34:41.093

对于断言，有[`console.assert()`](http://getfirebug.com/wiki/index.php/Console_API#console.assert.28expression.5B.2C_object.2C_....5D.29). 但这只会记录消息并继续。

使用 HTML5 还可以使用[`window.onerror`](https://developer.mozilla.org/en/DOM/window.onerror)处理程序捕获未处理的异常。[dev.opera 上](http://dev.opera.com/articles/view/better-error-handling-with-window-onerror/)有一篇很棒的文章，它可以用来向用户显示精美的错误消息，甚至将异常记录到服务器。

如果你不能使用它，你就会在所有东西周围都使用 try-catch 子句（尤其是“执行入口点”，如事件处理程序、超时等）。或者你可以在抛出错误之前处理它们：

```
function SmartError(message) {
    Error.call(this, message);
    $('<div class="error">Some problem occured, the app will stop working</div>')
        .appendTo("body");
    $.post("/log/clientside/js.php", this);
    ...
}

if (something.does(! "work"))
    throw new SmartError("mysterious problem"); 
```

# awk - 分隔符后的 awk 和数字

> ID：10915149
> 
> 赞同：1
> 
> 时间：2012-06-06T13:25:19.733
> 
> 标签：awk

我需要一个简单的 awk 来计算文件末尾的数字总和，如下所示：

```
/z02/ABCD/stuff/ABC_DEF_02/count/ABC_DEF_02_ABCDE66.log.20120605_101201_015.log.gz:28
/z02/ABCD/stuff/ABC_DEF_02/count/ABC_DEF_02_ABCDE66.log.20120605_101202_015.log.gz:28
/z02/ABCD/stuff/ABC_DEF_02/count/ABC_DEF_02_ABCDE66.log.20120605_101203_015.log.gz:28
/z02/ABCD/stuff/ABC_DEF_02/count/ABC_DEF_02_ABCDE66.log.20120605_101204_015.log.gz:28 
```

所以基本上“：”后面的数字需要加在一起

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:28:21.390

```
echo "....." | awk '-F:' '{total+=$NF}END{print "sumTotal=" total}' 
```

当然，您可以根据您的需要省略“sumTotal=”部分。

我希望这有帮助。

# jquery - 自定义设计的单选按钮输入样式，带有 CSS 和语音辅助功能

> ID：10915155
> 
> 赞同：1
> 
> 时间：2012-06-06T13:25:30.183
> 
> 标签：jquery, css, radio-button, accessibility, voiceover

对于我的网站，我使用基于此模型的自定义单选按钮： [http ://www.filamentgroup.com/examples/customInput/](http://www.filamentgroup.com/examples/customInput/)

它适用于不同的浏览器，并且可以通过 Jaws 访问。

但是当我用 Voice Over 尝试这个解决方案时，我无法检查单选按钮。是否有允许此解决方案的 jquery 事件？

问候， 博比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-09T09:25:27.010

您可以使用 onclick 事件：

```
<p onclick="test" id="css">This is clickable</p> 
```

单击此按钮后，它将执行一个名为“test”的javascript函数，并使用您对CSS进行编程以使用id“css”的格式。您可以格式化任何内容，只需添加 onclick 标记，您就可以使用函数执行任何操作。

```
<img src="https://www.google.nl/images/nav_logo195.png" onclick="search" id="css"> 
```

# php - PHP：使用 openssl 检索密钥

> ID：10915158
> 
> 赞同：0
> 
> 时间：2012-06-06T13:25:55.317
> 
> 标签：php, openssl

我设法使用以下脚本生成私钥/公钥：

```
$res = openssl_pkey_new(array('private_key_bits' => 2048,'private_key_type' => OPENSSL_KEYTYPE_RSA));
openssl_pkey_export($res, $privkey);
file_put_contents('test.private.key', $privkey);
$pubkey = openssl_pkey_get_details($res);
$pubkey = $pubkey["key"];
file_put_contents('test.public.key', $pubkey); 
```

生成的文件：

```
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAwQ5L0JQ2G5zGhC4uDISo6krN/mKrBuULYhrVL9Zdve+C9DuH
6uDTRCC07PvIKcHVj13vKB4YvRlwCCAxHg5p34P3W9vjmrI91rdVJ31noRvJ/i5Z
jNBfy7c8NrIOA6m4gicfPbozuQU741jLSncdQuyZRrADbFWppIz/mLm5WDZk6+NU
yAM2o0jvDsKE7i3sT+IKJpjUC8mE+RONIooNtHB3GJarsCKg5L6e0EaGXlVp9Mez
lSSn/Z5p1Wu3GJq02lNGLT5BVgCfE7ajBDZWRDG+Mbp4/YCt/zXz5XWm2/BxD78c
2wH3qMs/bIjvq5MTta4E2VQTSCxI5fMjRUf5QQIDAQABAoIBAQCvZuXLJF3kyJQ1
FCASj5VJCZ4POmZZZVDqWabIR+Pz5eD9NflPleVdSLoZdslt5wa5s4bO1El1xd7c
AyOdQ0s+IRBlDWvF6Zv1saxUrMOyxSTJJCOIpOnklR7IMw44lcNlvVXNJ5hGylKX
RN2vUnnrjDvW1aTGkS4Iq3KuuE+FrJIOm9Lb7z4Nj7BwmgwUtbB5NQKFDVohPp+w
pFGPHrN6dCy+qoSlY/IP89u6f7g9HBEM+n91uO6dQwSb/YxBROLMffXNJKA+UKex
UIIZlrPUcFN+yDVbQBmMFA3PYbBvwqZfpwzslIoUS+CGE/MorbW77/Qy2P4BC3/D
h8dmRDiBAoGBAOIDLHoMwT3FP+jlgZiAktQjShGRQJ+Li66L1nNIAJSeE8Nna5Sk
E3R1TBIZBmAGUZJ00POUWUMooAQIGF597hnFuENZIYpvulkKDCCUVx24kZDbyady
TcWdnEZfRmun5H7JfTlJl1HjqgGxKOc3ek/xDxoqiNf2WqScIom+dWndAoGBANqr
tQZyvpwv8FZVgkmteCCJb5NZzs04NzrT/i792/mL9Y45VxneLJVbXrAmQw/ClfVi
Z04NamqeOvVwUByoxWvZwLtyNt2dhpmtYlWuMRdo505BW1I75UIZYbWgZTtVq+PR
mf0SxNYXTsJQsqTTkqHQOMOHj8JyoAG1Z04J4qC1AoGAEkDpXa4cCU4d/ERU9Ckm
MqXq/II7sucFUAKRPlxJV7dwpy56HNYnkBdNHoUQ475+5hIzMgkAMJFeYxT4SuFm
0oQKfr37HIArj7dlBViVtJvMfeOSZMixiU1SasiVGmrD5I2HZJIR+5Yki+BwCkSL
x1sTuixHQxHtfi/yBifwua0CgYBPaGFRmSOc5k+5mk244bSo5B/Pe6J8pbhwtYEt
oWRbh7bBUhNOQn8gMdD92Lcrpvb76CMplfeaBiHU9VcyQRuIIcg6iaxg6A50CiGW
ia4sGR0+Lr+x6ixDx6HS6g8479B+56Oq4kD2mfow2Es3TdmGx22Fm9nZu/RdCnoc
Pby9rQKBgAak6zdKdMHzmHd+r2rbCTqT/NOIoip1zYpEGpiginkZcpy7Mz4iBL1Y
H7a2sa5k9Pykm2sQYoFPM8vn7halDcuAV7mjiV4XyiM5wRRWHTqSoUgjElexE0W5
HoQvWv10NBFqySMSfCm+YFXZGY17usxAJPSIySHzoTVRJEIjAw0G
-----END RSA PRIVATE KEY-----

-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwQ5L0JQ2G5zGhC4uDISo
6krN/mKrBuULYhrVL9Zdve+C9DuH6uDTRCC07PvIKcHVj13vKB4YvRlwCCAxHg5p
34P3W9vjmrI91rdVJ31noRvJ/i5ZjNBfy7c8NrIOA6m4gicfPbozuQU741jLSncd
QuyZRrADbFWppIz/mLm5WDZk6+NUyAM2o0jvDsKE7i3sT+IKJpjUC8mE+RONIooN
tHB3GJarsCKg5L6e0EaGXlVp9MezlSSn/Z5p1Wu3GJq02lNGLT5BVgCfE7ajBDZW
RDG+Mbp4/YCt/zXz5XWm2/BxD78c2wH3qMs/bIjvq5MTta4E2VQTSCxI5fMjRUf5
QQIDAQAB
-----END PUBLIC KEY----- 
```

有人可以告诉我如何检索我的密钥，以便加密/解密文件。我正在尝试以下操作：

```
$privkey = openssl_pkey_get_private('file://test.private.key')
$pubkey = openssl_pkey_get_public('file://test.public.key') 
```

但是这些函数返回错误......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:39:12.597

好的，抱歉忘记这篇文章，我只是在非常简单的地方尝试使它变得困难： file_get_contents('test.public.key') 足以检索密钥；）

# html - 垂直固定左列，但可水平滚动

> ID：10915168
> 
> 赞同：1
> 
> 时间：2012-06-06T13:26:27.803
> 
> 标签：html, css, layout, css-position

在一个网页中，有左、中、右三列；三列内只有**左列是位置：固定**，其他正常。

垂直滚动时，左列应在其他列滚动时保持固定。

但是当浏览器尺寸减小时；水平滚动时，所有三列都应该水平滚动，而不仅仅是中间和右边。

如何克服这个问题？使用**纯 css**（不使用 js 或 jquery）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:31:59.127

已经有一个类似的问题，并提供了一个 jQuery 解决方案。在这里查看它，看看提供的答案是否对您有帮助：-[如何获得固定位置的 div 以随内容水平滚动？使用 jQuery](https://stackoverflow.com/questions/4676131/how-do-i-get-a-fixed-position-div-to-scroll-horizontally-with-the-content-using)

# ruby-on-rails-3 - Rails 3.2.2 - 可以将自定义节点添加到 as_json

> ID：10915169
> 
> 赞同：0
> 
> 时间：2012-06-06T13:26:28.493
> 
> 标签：ruby-on-rails-3, json

由于我目前无法根据[Rails3 ActionView Template Handlers 使用 json 模板引擎（jbuilder 或 rabl）在生产服务器上不起作用](https://stackoverflow.com/questions/10520269/rails3-actionview-template-handlers-doesnt-work-on-production-server)我想知道如何最好地更改此控制器操作以包含带有 as_json 的自定义节点（或者是其他东西）

```
class Mobile::AndroidUsersController < SecureMobileUserController
  skip_before_filter :authorize, :only => :create
  respond_to :json  

  # POST /mobile_users
  # POST /mobile_users.xml
  def create
    @mobile_user = AndroidUser.find_by_auth(params[:mobile_user][:auth])
    unless @mobile_user
      @mobile_user = AndroidUser.new(params[:mobile_user])
    else
      @mobile_user.attributes = params[:mobile_user]
    end
    respond_to do |format|
      if @mobile_user.save
        format.json #Add a custom token node here
      else
:unprocessable_entity }
        format.json { render json: @mobile_user.errors, status: :unprocessable_entity }
:unprocessable_entity }
      end
    end
  end
end 
```

我只需要添加一个名为 token 的自定义节点，它的值是通过调用 MobileUser 类的方法获得的

```
:token => MobileUser.next_token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:50:47.923

您可以像这样更改对 as_json 的调用：

```
format.json {render :json => @mobile_user.as_json(:methods => [:next_token])} 
```

# javascript - JQuery 正在添加一个类，但没有从多个 td 元素中删除它

> ID：10915171
> 
> 赞同：-1
> 
> 时间：2012-06-06T13:26:38.837
> 
> 标签：javascript, jquery, html, addclass, removeclass

我试图根据用户输入和元素类在我的屏幕上使多个`<td>`字段可见或不可见。我正在使用 jquery、html 和 javascript。

基本上，我有一个包含不同字段的 HTML 表格。我希望这些字段具有“可见”、“可见和必需”或“不可见”类。当用户选择一个选项时，它会通过删除前一个元素并添加新元素来更改该元素的类。这些字段的 onload 默认值应该是不可见的。

**HTML：**

```
<body onload="ShowTheScreen()">

<table border="1">
 <tr>
  <td class="ReasonCode" align="center">
   <span class="FieldLabel">Reason Code</span>
  </td>
  <td class="CostCenter" align="center">
   <span class="FieldLabel">Cost Center</span>
  </td>
 </tr>
 <tr>
  <td class="ReasonCode" align="center">
   <input type="text" id="ReasonCode" name="ReasonCode" value="1243">
  </td>
  <td class="CostCenter" align="center">
   <input type="text" id="CostCenter" name="CostCenter" value="00123">
  </td>
 </tr>
</table>

<input type="button" value="MakeVis" onclick="PopulateTable()">

</body> 
```

**Javascript：**

```
function ShowTheScreen(){
  ToggleFieldVisibility(".ReasonCode", 3);
  ToggleFieldVisibility(".CostCenter", 3);
  DisplayFields();
}

function PopulateTable(){
  ToggleFieldVisibility(".ReasonCode", 2);
  ToggleFieldVisibility(".CostCenter", 1);
  DisplayFields();
}

function ToggleFieldVisibility(element, x){
 switch(x){
  case 1:
   $(element).removeClass("Invisible Required").addClass("Visible");
   break;
  case 2:
   $(element).removeClass("Invisible").addClass("Visible Required");
   break;
  case 3:
   $(element).removeClass("Visible Required").addClass("Invisible");
   break;
  default:
   $(element).removeClass("Visible Required").addClass("Invisible");
   break;
 }
 DisplayFields();
}

function DisplayFields(){
 $(".Invisible").css({"visibility":"hidden"});
 $(".Visible").css({"visibility":"visible"});
} 
```

*The problem I'm having is this*: When I open the page, the fields get the "Invisible" class added to them as they should be and they become hidden. But when I try and remove the invisible class later and add the visible class, the invisible class is never removed and the visible class is never added: the elements simply retain the classes they had at first, and therefore stay hidden.

I saw previous threads relating to problems with jquery add/removeClass, but none that seemed to help me out. Let me know if you need more info.

UPDATE 1: Thanks for all the replies, everyone! Unfortunately, and I thought this would happen, the code I posted here is a far simplified version of the code I actually have and most of the answers I've received seem to be related to the syntax posted--like the issue with the quotes. I've updated the code to better reflect what I'm really doing. Hopefully this will narrow down what the issue is.

UPDATE 2: I know what I was doing wrong. In my code I have shown here I'm calling ToggleFieldVisibility(".ReasonCode", 2), which works fine. But in my actual code, I was retrieving the number 2 from a SQL call using an outside application, and it was returning it as a string. The "2" would get compared to 2 in the switch (or "1" to 1 and "3" to 3) and always go to default, so that's why those fields always came up invisible. Hah!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:40:02.127

I think the problem lies in your inline `onClick` handlers. As you currently have them, you are using quotation marks as both attribute delimiters and to wrap your strings; this is going to cause your attribute to be truncated as `ToggleFieldVisibility("` and your function will not run.

Try:

```
<input type="button" value="MakeVis" onclick="ToggleFieldVisibility('.ReasonCode', 1)">
<input type="button" value="MakeVisReq" onclick="ToggleFieldVisibility('.ReasonCode', 2)">
<input type="button" value="MakeInVis" onclick="ToggleFieldVisibility('.ReasonCode', 3)"> 
```

If you need to use `"`s for some reason, you can always escape them with a \: `(\".ReasonCode\"...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:34:42.350

A quick guess, in calling the `DisplayFields()` function at the end, it adds css to the element in the form of an inline style tag. Try running a `.removeAttr("style")` right after doing the `removeClass()`

The code:

jquery:

```
 function ToggleFieldVisibility(element, x){
            //alert("Hello");
            switch(x){
                case 1:
                    $(element).removeClass("Invisible Required").removeAttr("style").addClass("Visible");
                    break;
                case 2:
                    $(element).removeClass("Invisible").removeAttr("style").addClass("Visible Required");
                    break;
                case 3:
                    $(element).removeClass("Visible Required").removeAttr("style").addClass("Invisible");
                    break;
                default:
                    $(element).removeClass("Visible Required").removeAttr("style").addClass("Invisible");
                    break;
                }
            DisplayFields();
        }

        function DisplayFields(){
            $(".Invisible").css({"visibility":"hidden"});
            $(".Visible").css({"visibility":"visible"});
        } 
```

html:

```
 <body onload="ToggleFieldVisibility('.ReasonCode .CostCenter', 3)">
<table border="1">
 <tr>
  <td class="ReasonCode" align="center">
   <span class="FieldLabel">Reason Code</span>
  </td>
  <td class="CostCenter" align="center">
   <span class="FieldLabel">Cost Center</span>
  </td>
 </tr>
 <tr>
  <td class="ReasonCode" align="center">
   <input type="text" id="ReasonCode" name="ReasonCode" value="1243">
  </td>
  <td class="CostCenter" align="center">
   <input type="text" id="CostCenter" name="CostCenter" value="00123">
  </td>
 </tr>
</table>

<input type="button" value="MakeVis" onclick="ToggleFieldVisibility('.ReasonCode', 1)" />
<input type="button" value="MakeVisReq" onclick="ToggleFieldVisibility('.ReasonCode', 2)" />
<input type="button" value="MakeInVis" onclick="ToggleFieldVisibility('.ReasonCode', 3)" />

</body> 
```

# java - 从链接保存图像

> ID：10915177
> 
> 赞同：0
> 
> 时间：2012-06-06T13:27:22.083
> 
> 标签：java, image

我试图从网站中的链接保存图像我已经编写了这段代码，但这不起作用..请帮助我做到这一点

```
public void imageshow(String linkText) {

    try {

        URL url = new URL(linkText);
        InputStream in = new BufferedInputStream(url.openStream());
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        byte[] buf = new byte[4 * 1024];
        int n = 0;
        while (-1 != (n = in.read(buf))) {
            out.write(buf, 0, n);
        }
        out.close();
        in.close();
        byte[] response = out.toByteArray();

        FileOutputStream fos = new FileOutputStream("C://chart.gif");

        fos.write(response);
        fos.close();

    } catch (Exception e) {
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:30:24.417

取自[这里](http://cookbooks.adobe.com/post_Download_a_file_from_a_URL_in_Java-17947.html)

```
import java.net.*;
import java.io.*;

public class DownloadFile
{
  public static void main(String[] args)
  {
     try
     {
        /*
         * Get a connection to the URL and start up
         * a buffered reader.
         */
        long startTime = System.currentTimeMillis();

        System.out.println("Connecting to Mura site...\n");

        URL url = new URL("http://www.getmura.com/currentversion/");
        url.openConnection();
        InputStream reader = url.openStream();

        /*
         * Setup a buffered file writer to write
         * out what we read from the website.
         */
        FileOutputStream writer = new FileOutputStream("C:/mura-newest.zip");
        byte[] buffer = new byte[153600];
        int totalBytesRead = 0;
        int bytesRead = 0;

        System.out.println("Reading ZIP file 150KB blocks at a time.\n");

        while ((bytesRead = reader.read(buffer)) > 0)
        {  
           writer.write(buffer, 0, bytesRead);
           buffer = new byte[153600];
           totalBytesRead += bytesRead;
        }

        long endTime = System.currentTimeMillis();

        System.out.println("Done. " + (new Integer(totalBytesRead).toString()) + " bytes read (" + (new Long(endTime - startTime).toString()) + " millseconds).\n");
        writer.close();
        reader.close();
     }
     catch (MalformedURLException e)
     {
        e.printStackTrace();
     }
     catch (IOException e)
     {
        e.printStackTrace();
     }

  }

} 
```

# mingw - Msys shell 命令更改文件的属性

> ID：10915178
> 
> 赞同：5
> 
> 时间：2012-06-06T13:27:28.037
> 
> 标签：mingw, msys, file-attributes

请让我知道可用于更改文件属性的 MSYS shell 命令。当我运行命令时，`ls -l`我得到以下信息：

```
-rw-r--r-- 1 lenovo Admin .....m4sugar.m4 
```

我想提供完全访问权限。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T02:15:56.887

@cdhowie 是对的；这是在那里跟踪的 msys 的错误-> [http://sourceforge.net/tracker/?func=detail&atid=102435&aid=3071537&group_id=2435](http://sourceforge.net/tracker/?func=detail&atid=102435&aid=3071537&group_id=2435)

> 它不能做任何比它已经做的更有用的事情，除非它像 Cygwin 那样在 POSIX 仿真中伪造它。但是，Cygwin 所做的几乎无关紧要。由于 MSYS 是从 Cygwin-1.3 分叉出来的，因此大部分伪造都是*故意*禁用的——在 Cygwin 支持的范围内提供伪造的 POSIX 功能*并不是*MSYS 的目标。如果您想要 Cygwin 的行为，而 MSYS 不能充分满足您的需要，那么您应该使用 Cygwin。
> 
> MSYS 旨在更好地与MinGW 支持的*本机*MS-Windows 功能集成。在本机 MS-Windows 环境中，没有可以将文件标记为可执行文件的文件系统属性——这由文件数据空间中的魔术字节序列指示，（通常也由匹配的文件扩展名限定）。除了更完全地接受 Cygwin 的仿真之外，MSYS chmod 无法安全地修改它，而不会有文件损坏的风险。然而，这与 MSYS 项目的目标截然相反——它不会发生。

@kbulgrien 提供了更改权限的好方法：

*   `cacls`：[http](http://ss64.com/nt/cacls.html) ://ss64.com/nt/cacls.html ，或
*   `icacls`：[http ://ss64.com/nt/icacls.html](http://ss64.com/nt/icacls.html)

*注意：`icacls`是`cacls`修正了几个问题的新版本，但似乎在 Windows XP 中不存在。*

您可以使用以下任一命令为所有人授予完全访问权限：

*   `cacls "$file_path" //E //P Everyone:F`
*   `icacls "$file_path" //grant Everyone:F`

请注意，在使用or`ls -l`之后，Msys 中不会显示有关真实 ACL 的准确信息。`cacls``icacls`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T19:08:44.007

该问题很可能是 MSYS 工具中的最小实现之一。您也将被限制无法使用 Windows 工具（如 attrib.exe）进行更改。

```
$ >test
$ ls -l test
-rw-r--r--    1 kbulgrie Administ        0 Aug 24 13:51 test
$ chmod u-w test
$ ls -l test
-r--r--r--    1 kbulgrie Administ        0 Aug 24 13:51 test
$ chmod u+w test
$ ls -l test
-rw-r--r--    1 kbulgrie Administ        0 Aug 24 13:51 test 
```

如您所见， chmod 工作正常。现在，看看 attrib.exe 会发生什么，这是一个 Windows 二进制文件：

```
$ ls -l test
-rw-r--r--    1 kbulgrie Administ        0 Aug 24 13:51 test
$ attrib +R test
$ ls -l test
-r--r--r--    1 kbulgrie Administ        0 Aug 24 13:51 test
$ attrib -R test
$ ls -l test
-rw-r--r--    1 kbulgrie Administ        0 Aug 24 13:51 test 
```

Windows 工具 attrib 与 ugoa 权限无关，并将事情简化为拥有或不拥有权限：

```
$ attrib +R test
$ attrib test
     R     C:\msys\1.0\home\kbulgrien\test 
```

我注意到，期望 MSYS 工具比 Windows“等效”工具做得更多是公平的。MSYS 中的 M 表示“最小”。

cacls.exe 可以在 MSYS 下做一些事情。例如，这表示我和管理员拥有完全控制权，即使`ls -l`似乎说 Administrat 没有写入权限。当心。如果在 Windows 上，也许使用 Windows 方法。$ cacls 测试
C:\msys\1.0\home\kbulgrien\test BUILTIN\Administrators:F NT AUTHORITY\SYSTEM:F APD\kbulgrien:F BUILTIN\Users:R

以下命令是我在 MSYS 环境中使用的命令，用于在从存档还原后修复 SQL 数据库文件的权限。您可以从 MSYS 运行 Windows 二进制文件。我一直这样做...例如，脚本在 MSYS shell 中运行 diskpart、format 等，而不调用 cmd.exe。

```
$ cacls "Mantis*.*" //E //G "NETWORK SERVICE":F 
```

# vhdl - 这个 VHDL 代码设置最大值和最小值是什么？定点表示的解释会有所帮助

> ID：10915180
> 
> 赞同：0
> 
> 时间：2012-06-06T13:27:29.773
> 
> 标签：vhdl

```
 constant MAX      : unsigned(18 downto 0) := "100" & x"0000";
 constant MIN      : unsigned(18 downto 0) := "001" & x"0000"; 
```

这个 VHDL 代码设置最大值和最小值是什么？对定点表示的解释会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:42:05.513

*   `&`运算符连接两个位向量`"100"`和`x"0000"`（例如，将`"00" & "11"`等价于`"0011"`）。
*   `X"012345689ABCDEF"`语法意味着以下向量应被解释为十六进制数（例如，`X"0"`实际上是`"0000"`、`X"F"`将是`"1111"`或`X"0F"`将是`"00001111"`）。这允许您以更紧凑的方式编写位向量。

对于位向量检查的解释，例如[http://en.wikipedia.org/wiki/Binary_numeral_system](http://en.wikipedia.org/wiki/Binary_numeral_system)

对于十六进制数字的表示，请检查例如[http://en.wikipedia.org/wiki/Hexadecimal](http://en.wikipedia.org/wiki/Hexadecimal)

* * *

编辑澄清：我假设您使用的是包中的`unsigned`类型。`numeric_std`从那个包的标题

```
This package defines numeric types and arithmetic functions
for use with synthesis tools. Two numeric types are defined:
-- > UNSIGNED: represents UNSIGNED number in vector form
-- > SIGNED: represents a SIGNED number in vector form
The base element type is type STD_LOGIC.
The leftmost bit is treated as the most significant bit.
Signed vectors are represented in two's complement form. 
```

所以你`MAX`的设置为 2^18，你的设置`MIN`为 2^16。

# php - 如何使用 php 从我的字符串中删除 ascii 字符 x02？

> ID：10915182
> 
> 赞同：0
> 
> 时间：2012-06-06T13:27:31.727
> 
> 标签：php, regex, ascii

我尝试了很多东西，但没有任何反应。由于 ascii 字符 x02（在 VIM 中为 '^B'），我生成的 xml 格式不正确。我已经尝试过以下行：

```
$keywords = preg_replace('/\x02/', '', $keywords); 
```

但这行不通。你有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:31:09.270

为什么使用正则表达式？

```
str_replace(chr(2),'',$keywords); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:31:47.613

您必须`"`使用转义序列。将您的代码替换为：

```
$keywords = preg_replace("/\x02/", '', $keywords); 
```

# android - Android从不在UI线程中的类中显示进度对话框

> ID：10915184
> 
> 赞同：0
> 
> 时间：2012-06-06T13:27:32.660
> 
> 标签：android, dialog, ui-thread

我在 RecordTable 类中定义了这个方法，它不是一个 Activity。
我从主 UI 线程调用它并将有效的 UI 线程上下文作为参数传递。
当然，它不适用于消息：
`java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()`

我在其他帖子中看到他们建议使用`runOnUiThread`而不是，`new thread`但由于该类不是活动`runOnUiThread`，因此不可用。

在 runnable() 之外启动 Dialog 也不起作用。

**有没有人遇到这个问题并找到解决方法？**

```
public synchronized void scrollUp(final Context context, final ArrayList<Record> list, final int count) {
    new Thread(new Runnable() {
        public void run() {
            setScrolling(true);
            ProgressDialog pd = ProgressDialog.show(context, "", context.getResources().getString(R.string.loading_msg), true);
            int n = Math.max(mViewStartIndex - count, 0);
            for(int i = mViewStartIndex - 1; i >= n; i--) {
                RecordTable.this.addFirstRow(list.get(i));
                RecordTable.this.removeViews(RecordTable.this.getChildCount() - 1, 1);
            }
            pd.dismiss();
            setScrolling(false);
        }
    }).start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:54:45.740

鉴于我建议使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的代码。查看 AsyncTask 的文档。

在函数中的不同线程上执行您想要的工作，`doInBackground(....)`并定期调用`progressUpdate`，它始终在 UI 线程上运行。实现起来要简单得多，您不必担心创建新线程。AsyncTask 为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:48:29.213

```
ProgressDialog pd;
Context context;

public synchronized void scrollUp(Context context, final ArrayList<Record> list, final int count) {
this.context = context;
new Thread(new Runnable() {
public void run() {
    setScrolling(true);
    hand.sendEmptyMessage(0);                
    }
  }
}).start();

int n = Math.max(mViewStartIndex - count, 0);
for(int i = mViewStartIndex - 1; i >= n; i--) {
RecordTable.this.addFirstRow(list.get(i));
RecordTable.this.removeViews(RecordTable.this.getChildCount() - 1, 1);

pd.dismiss();
setScrolling(false);
}

Handler hand = new Handler() 
{
    @Override
    public void handleMessage(Message msg) 
    {
              pd = ProgressDialog.show(context, "", context.getResources().getString(R.string.loading_msg), true);
    }
} 
```

试试这个它可能对你有帮助......如果你想在类处理程序中创建任何对话框或 Toast 将处理这个......

# javascript - jQuery 在 IE 上返回一个空的输入值

> ID：10915188
> 
> 赞同：1
> 
> 时间：2012-06-06T13:27:48.770
> 
> 标签：javascript, jquery, internet-explorer-8, internet-explorer-7

**HTML：**

```
<div id="fields">
    <input type="text" name="someField" />
    <!-- NOTE: There are some more fields here -->
</div>
<!-- NOTE: There are some more fields here --> 
```

**第一个 JS 文件：**

```
jQuery(document).ready(function($) {
    alert($('#fields input[type="text"]').val());
}); 
```

**第二个 JS 文件：**

```
jQuery(document).ready(function($) {
    $('#fields input[type="text"]').val('someValue');
}); 
```

**笔记：**

1.  JS 文件位于 head 标签内。
2.  我被迫在第二个 JS 文件中设置输入值。
3.  它适用于 Firefox、Opera、Chrome、Safari。
4.  IE7 和 IE8 返回一个空值。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T13:32:22.793

不要假设该值已在您的第一个“就绪”处理程序中设置，而是使其处理自定义事件，然后从第二个文件触发该事件。

第一个文件：

```
jQuery(function($) {

   $('#fields input[type="text"]').on('value-ready', function() {
      alert(this.value);
   });

}); 
```

第二个文件：

```
jQuery(function($) {
  $('#fields input[type="text"]').val("whatever").trigger('value-ready');
}); 
```

等一下......这有同样的问题:-)等一下，我会解决它......在我这样做之前不要再给我投票了:-)

好吧，假设我是对的，这个问题取决于“就绪”处理程序的评估顺序（这本质上是“代码味道”的猜测；可能还有其他问题），我所做的改变不会真的帮助。如果第二个块首先运行，那么事件处理程序将不会被设置！

我认为强制排序的唯一真正方法是设置某种“承诺”系统，或者简单地在元素上使用标记以及处理程序。这样，第一个块中的代码可以检查值分配是否已经发生。这有点笨拙，但至少它是明确的：

```
jQuery(function($) {
  var input = $('#fields input[type="text"]');
  if (input.data('value-ready'))
    alert("value already set: " + input.val());
  else
    input.on('value-ready', function() {
      alert("value is now set: " + input.val());
    });
}); 
```

然后在第二个文件中：

```
jQuery(function($) {
  $('#fields input[type="text"]').val("whatever")
    .data("value-ready", true)
    .trigger("value-ready");
}); 
```

# javascript - onchange 函数的动态更新问题

> ID：10915190
> 
> 赞同：1
> 
> 时间：2012-06-06T13:27:51.480
> 
> 标签：javascript, dynamic, onchange

我想动态更改“form.submit();”的任何实例 出现在某些选择元素的 onchange 函数中到 $('form').submit(); 以便为表单本身触发提交事件。

这是一个需要更新 onchange 函数的选择列表的示例：

```
<td class="form-field selectinput" align="left" valign="left" style="width: 90px;" title="Select status type">
        <select class="filterlist" name="cStatus" tabindex="5" style="width: 90px;" onchange="form.submit();">
          <option value="" title="[All]">[All]</option>
          <option value="A" title="Authorised">Authorised</option>
          <option value="C" selected="" title="Cancelled">Cancelled</option>
          <option value="U" title="Declined">Declined</option>
          <option value="R" title="Requested">Requested</option>
          <option value="T" title="Taken">Taken</option>
          <option value="W" title="Withdrawn">Withdrawn</option>
        </select>
      </td> 
```

我在页面的标题部分插入以下内容以尝试更新该功能：

```
 $(document).ready(function(){
$(function() {
   $('select').each(function() {
     var txt = this.onchange ;
     alert(txt);
     var patt=/form.submit()/g;
     var result=patt.test(txt);
     if (result) {
        var txt =  txt.replace('form.submit()',""); 
        this.onchange = eval(txt);
     }
   });
}); 
```

});

警报消息出现：

> 函数 onchange(event) { form.submit(); } 块引用

然后控制台日志显示以下错误：

> 未捕获的类型错误：对象函数 onchange(event) { form.submit(); } 没有“替换”方法

我实际上可以让它与以下内容一起工作：

```
 this.onchange = function() { $('form').submit(); } 
```

但是在某些情况下，onchange 有其他代码以及 form.submit(); 如：

```
form.submit();form.iYear.disabled=true;form.cGroupItem.disabled=true; 
```

所以我不想替换整个函数本身，而是删除'form.submit();' 并将其替换为 '$('form').submit();'，因此上面的内容将显示为：

```
$('form').submit();form.iYear.disabled=true;form.cGroupItem.disabled=true; 
```

我已经尝试在不同的地方使用 toString() 和 eval() 但是每当我尝试编辑字符串 txt 时，我都会不断得到对象没有方法错误。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:42:46.533

而不是做你时髦的 eval 和 replace 试试这个：

```
...
     if (result) {
        this.onchange = function(){}; //empty function
     }
... 
```

# actionscript-3 - AS3：如何补充现有库中的函数调用？

> ID：10915193
> 
> 赞同：2
> 
> 时间：2012-06-06T13:27:59.630
> 
> 标签：actionscript-3, oop

我有一个半新手问题。我已经编程多年了，但我所有的早期经验都是 OOP 之前的，我的大脑就这样安定下来了。我也是 Actionscript 的新手。所以希望这对某人来说是一件容易的事。

我正在使用 as3svgrendererlib 导入 SVG。它工作得很好，但我需要能够序列化它输出的图形。但是我不能序列化精灵，所以我必须一直到 IGraphicsData 级别才能得到我能得到的东西。但是图书馆没有给我这些数据。它只给我精灵。所以我需要改变它。

由于它最终使用的绘图方法屈指可数（`beginFill`、`drawRect`等），我的想法是，如果我可以连接这些方法并用我自己的代码补充它们以输出 IGraphicsData，那么我就可以做生意了。现在我知道我可以通过使用“扩展”类来做到这一点，但这需要对库进行大量修改以将所有这些标准调用更改为我的自定义调用。

所以我想知道：是否有一种神奇的 OOP 方法来编写可以普遍拦截对现有方法的调用而无需修改原始调用的方法？

谢谢！:)

编辑：我需要独立于分辨率，因此将图形保存在矢量中而不是将它们转换为位图很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:42:35.207

你不能在 OOP 中做这种事情，你要么需要覆盖类（但在你的情况下这可能是不可能的），要么直接修改库。

但是，在您的情况下，可能的解决方案是：

1.  使用库将 SVG 绘制到精灵。
2.  将精灵绘制到`BitmapData`.
3.  最后，使用获取像素数据`getPixels()`并对其进行序列化。

像这样的东西应该有效；

```
var sprite:Sprite = new Sprite();

// Add the child to the stage...
// Draw the SVG to the sprite...

var bmpData:BitmapData = new BitmapData(spriteWidth, spriteHeight);
bmpData.draw(sprite);

var pixelData:ByteArray = bmpData.getPixels(new Rectangle(0, 0, bmpData.width, bmpData.height));

// Here serialize the byte array 
```

在此示例中，请注意 spriteWidth/spriteHeight 不一定是“sprite.width”和“sprite.height”（sprite 通常报告的尺寸与您预期的不同）。因此，您需要提前确定渲染 SVG 的大小，并在构建`BitmapData`.

# javascript - 我检测移动设备的方式有什么问题吗

> ID：10915195
> 
> 赞同：1
> 
> 时间：2012-06-06T13:28:04.140
> 
> 标签：javascript, asp.net, mobile, cross-browser

我已经检查了已经发布的关于检测网站移动设备的各种相关问题，但我的方法与我所看到的任何东西都有点不同，我想知道是否有人能看到它的任何问题。

我正在做的是...

1.  我有一个执行 server.transfer(); 的 httpmodule 在用户访问的第一个请求上显示一个空白的 html 页面。

2.  在这个空白的 html 页面上是一些检测视口宽度/高度和触摸功能的 javascript。然后，js 将此信息保存到客户端 cookie，然后（通过 window.location）重定向到最初请求的页面。

3.  当 httpmodule 再次被点击时，它会从客户端 cookie 中读取视口和触摸屏详细信息。如果触摸可用或视口宽度小于 480 像素，则 httpmodule 将重定向（通过 Response.Redirect()）到网站的移动版本。

这样做是否会遇到任何绊脚石？

我应该注意，该网站的平板电脑版本与手机版本相同，这就是为什么如果触摸可用，我想重定向到这个版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:37:42.180

```
any issues with it 
```

1.  肯定不是 SEO 友好的。
2.  如果用户没有启用 javascript，它就不起作用
3.  如果 cookie 未保存或被禁用，它会闪烁。
4.  通过服务器传输，如果您发布任何帖子，并且任何 cookie 或 javascript 失败，那么也会丢失帖子数据。

这是一个不错的想法，但我认为您还需要在第一次服务器传输之前检查这个想法。使用您的方法，您可以避免使用所有浏览器信息来保持更新的数据库，我认为这听起来不错，但是如果它在现实世界中顺利运行，则需要对其进行测试，并且还需要在第一次 server-trasnfer 之前进行更多测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:41:35.817

我可以看到两个问题：延迟和触摸事件可用性。

往返时间在移动网络上大大延长：您在 3G 上查看空页面请求大约需要 500 毫秒。因此，在用户看到任何东西之前，请求 - 重定向 - 重定向大约需要一秒钟的额外延迟。我不认为你会看到闪烁 - 正如一些评论者所建议的那样 - 你会在一秒钟内什么都看不到，这似乎不是一种积极的体验。

关于触摸：并非所有移动设备都是基于触摸的，有些（Windows Mobile 7）没有 ontouch* 事件。您需要单独跟踪这些。

视口也很棘手：如果您没有通过元标记强制视口宽度，您会发现视口测试会遗漏大量目标设备，因为它们声称是 1024 像素。

由于支持触摸的设备（iOS、Android 等）都支持 CSS 媒体查询，这不是更好的方法吗？

可能值得一看像 Luke Wroblewski 这样的人所倡导的 RESS（带有服务器端组件的响应式设计）方法：[http ://www.lukew.com/ff/entry.asp?1392](http://www.lukew.com/ff/entry.asp?1392)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:46:26.550

尝试使用基于 CSS 的媒体查询，并相应地对网站进行排序。您可以动态检测屏幕尺寸并相应地更改 css。

[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# android - 如何在android sdk中运行时获取屏幕上的图像

> ID：10915196
> 
> 赞同：0
> 
> 时间：2012-06-06T13:28:04.577
> 
> 标签：android

我不知道如何获取屏幕上可用的图像。我使用 imageview 来在屏幕上显示图像。 **图像将随机更改**，因为我将图像存储到数组中并且图像是可绘制的。**我想知道运行时屏幕上显示的是哪个图像**。

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:34:20.760

当您更改 中的图像时`ImageView`，请保留您在另一个变量中使用的数组索引。

# iphone - 核心数据。带有错误 NSManagedObjects 的 ExecuteFetchRequest（不在 RAM 中）

> ID：10915197
> 
> 赞同：2
> 
> 时间：2012-06-06T13:28:16.950
> 
> 标签：iphone, objective-c, core-data, fault

我需要执行获取请求。但是当我这样做时，我没有得到 fault `NSManagedObject`（每个对象大约为 5 Mb，这就是我收到内存警告的原因）。Apple为 Core Data 提供了**出错**的可能性（当对象未加载到 RAM 中时）。我希望我的对象使用这种可能性。

这是我的代码

```
+ (NSMutableSet *)GetImagesWithPredicate:(NSPredicate *)predicate
{
    NSString *entityName = kEntityName;
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];;
    NSManagedObjectContext *context = appDelegate.managedObjectContext;
    NSEntityDescription *entityDesctiption = [NSEntityDescription 
                                              entityForName: entityName
                                              inManagedObjectContext:context];

    // find object
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDesctiption];
    [request setPredicate:predicate];
    NSArray *objects = [context executeFetchRequest:request error:nil];
    [request release];
    if (objects == nil)
    {
        NSLog(@"there was an error");
        return nil;
    }
    NSMutableSet *set = [NSMutableSet setWithArray:objects];
    return set;
} 
```

谓词在哪里`(id < 500)`。

应用程序崩溃后

```
NSArray *objects = [context executeFetchRequest:request error:nil]; 
```

因为对象的所有数据都出现在 iPhone 的 RAM 中。

似乎默认选项`returnsObjectsAsFaults = YES`不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:58:48.093

对象可能作为故障返回；您可以使用 来验证这一点`isFault`。问题是 Core Data 会自动预取这些对象的属性值并将它们放在行缓存中（在内存中）。您可以通过在对象上设置`includesPropertyValues`为来禁用此行为。`NO``NSFetchRequest`

有关所有这些和性能影响的详细信息，请参阅[includesPropertyValues 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/occ/instm/NSFetchRequest/includesPropertyValues)。

顺便说一句，您可能不想直接在数据库中存储大量大型对象。如果您的目标是 iOS 5，您可能应该考虑使用[外部存储，或者您自己在 Core Data 中使用带有名称/路径/id 的单独文件。](https://stackoverflow.com/questions/8484259/how-to-enable-external-storage-for-binary-data-in-core-data)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:38:05.227

you could set the `- (void)setResultType:(NSFetchRequestResultType)type` for the `NSFetchRequest` and only get the relevant attributes for your Object with the `-(void)setPropertiesToFetch:(NSArray *)values` Method.

And only lazy loading the needed attributes.

# drupal - Drupal - 图像上的 alt 标签

> ID：10915200
> 
> 赞同：3
> 
> 时间：2012-06-06T13:28:31.223
> 
> 标签：drupal, drupal-7, drupal-theming

我正在使用 Drupal 7，尤其是用于上传图像的`Image`字段和小部件。`Media file selector`

`alt`最大的问题是这些图片在前端查看 HTML 源代码时没有标签。

有没有办法显示这些图像以显示`alt`图像？

谢谢

编辑：

我正在使用自定义主题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T17:04:05.537

您可以通过导航到 来编辑您的内容类型的图像字段`admin/structure/types/manage/[my-content-type]/fields/field_image`。

确保选中“启用 Alt 字段”和“启用标题字段”。就我而言，默认情况下会为我选中“启用 Alt 字段”，但我必须选中“启用标题字段”才能让 alt 文本字段显示在节点添加/编辑表单上。诡异的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:08:30.700

相关的问题队列是[http://drupal.org/node/1307054](http://drupal.org/node/1307054)，我相信有一个最近的修复应该进入下一个版本。

# android - Android 数据库帮助（如何添加删除按钮）

> ID：10915206
> 
> 赞同：0
> 
> 时间：2012-06-06T13:28:48.030
> 
> 标签：android, database, sqlite

我一直在关注 commonsware 的数据库教程，这是午餐列表示例，但是我很想知道如何添加删除按钮，以便在创建午餐项目后删除它。

我四处搜索并找到了这个答案，但我只是不确定如何实现它，请有人告诉我如何

向 RestaurantHelper 类添加一个 delete() 方法，并从 DetailForm 活动的选项菜单项中调用它。

谢谢露西

ResaurantHelper.java

```
import android.content.Context;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteQueryBuilder;

class RestaurantHelper extends SQLiteOpenHelper {
private static final String DATABASE_NAME="Lunchlist.db";
private static final int SCHEMA_VERSION=1;

public RestaurantHelper(Context context) {
super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
db.execSQL("CREATE TABLE restaurants (_id INTEGER PRIMARY KEY AUTOINCREMENT, name    TEXT, address TEXT, type TEXT, notes TEXT);");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
// no-op, since will not be called until 2nd schema
// version exists
}

public Cursor getAll() {
return(getReadableDatabase()
        .rawQuery("SELECT _id, name, address, type, notes FROM restaurants ORDER BY  name",
                  null));
}

public void insert(String name, String address,
                 String type, String notes) {
ContentValues cv=new ContentValues();

cv.put("name", name);
cv.put("address", address);
cv.put("type", type);
cv.put("notes", notes);

getWritableDatabase().insert("restaurants", "name", cv);
}

public String getName(Cursor c) {
return(c.getString(1));
}

public String getAddress(Cursor c) {
return(c.getString(2));
}

public String getType(Cursor c) {
return(c.getString(3));
}

public String getNotes(Cursor c) {
return(c.getString(4));
}
} 
```

午餐清单.java

```
package apt.tutorial;

import android.app.TabActivity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.view.LayoutInflater;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.RadioGroup;
import android.widget.TabHost;
import android.widget.TextView;

public class LunchList extends TabActivity {
Cursor model=null;
RestaurantAdapter adapter=null;
EditText name=null;
EditText address=null;
EditText notes=null;
RadioGroup types=null;
RestaurantHelper helper=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

helper=new RestaurantHelper(this);

name=(EditText)findViewById(R.id.name);
address=(EditText)findViewById(R.id.addr);
notes=(EditText)findViewById(R.id.notes);
types=(RadioGroup)findViewById(R.id.types);

address.setVisibility(View.GONE);
notes.setVisibility(View.GONE);

Button save=(Button)findViewById(R.id.save);

save.setOnClickListener(onSave);

ListView list=(ListView)findViewById(R.id.restaurants);

model=helper.getAll();
startManagingCursor(model);
adapter=new RestaurantAdapter(model);
list.setAdapter(adapter);

TabHost.TabSpec spec=getTabHost().newTabSpec("tag1");

spec.setContent(R.id.restaurants);
spec.setIndicator("My Reasons", getResources()
                            .getDrawable(R.drawable.list));
getTabHost().addTab(spec);

spec=getTabHost().newTabSpec("tag2");
spec.setContent(R.id.details);
spec.setIndicator("Add Reason", getResources()
                              .getDrawable(R.drawable.restaurant));
getTabHost().addTab(spec);

getTabHost().setCurrentTab(0);

list.setOnItemClickListener(onListClick);
}

@Override
public void onDestroy() {
super.onDestroy();

helper.close();
}

private View.OnClickListener onSave=new View.OnClickListener() {
public void onClick(View v) {
  String type=null;

  switch (types.getCheckedRadioButtonId()) {
    case R.id.sit_down:
      type="sit_down";
      break;
    case R.id.take_out:
      type="take_out";
      break;
    case R.id.delivery:
      type="delivery";
      break;
  }

  helper.insert(name.getText().toString(),
                address.getText().toString(), type,
                notes.getText().toString());
  model.requery();
  }
};

private AdapterView.OnItemClickListener onListClick=new   AdapterView.OnItemClickListener() {
public void onItemClick(AdapterView<?> parent,
                          View view, int position,
                          long id) {
  model.moveToPosition(position);
  name.setText(helper.getName(model));
  address.setText(helper.getAddress(model));
  notes.setText(helper.getNotes(model));

  if (helper.getType(model).equals("sit_down")) {
    types.check(R.id.sit_down);
  }
  else if (helper.getType(model).equals("take_out")) {
    types.check(R.id.take_out);
  }
  else {
    types.check(R.id.delivery);
  }

  getTabHost().setCurrentTab(1);
}
};

class RestaurantAdapter extends CursorAdapter {
RestaurantAdapter(Cursor c) {
  super(LunchList.this, c);
}

@Override
public void bindView(View row, Context ctxt,
                     Cursor c) {
  RestaurantHolder holder=(RestaurantHolder)row.getTag();

  holder.populateFrom(c, helper);
}

@Override
public View newView(Context ctxt, Cursor c,
                     ViewGroup parent) {
  LayoutInflater inflater=getLayoutInflater();
  View row=inflater.inflate(R.layout.row, parent, false);
  RestaurantHolder holder=new RestaurantHolder(row);

  row.setTag(holder);

  return(row);
  }
}

static class RestaurantHolder {
private TextView name=null;
private TextView address=null;
private ImageView icon=null;

RestaurantHolder(View row) {
  name=(TextView)row.findViewById(R.id.title);
  address=(TextView)row.findViewById(R.id.address);
  icon=(ImageView)row.findViewById(R.id.icon);
}

void populateFrom(Cursor c, RestaurantHelper helper) {
  name.setText(helper.getName(c));
  address.setText(helper.getAddress(c));

  if (helper.getType(c).equals("sit_down")) {
    icon.setImageResource(R.drawable.ball_red);
  }
  else if (helper.getType(c).equals("take_out")) {
    icon.setImageResource(R.drawable.ball_yellow);
  }
  else {
    icon.setImageResource(R.drawable.ball_green);
    }
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:54:57.370

如果您可以检查匹配的 ID，这可能会起作用

```
db.execSQL("DELETE FROM restaurants WHERE id = '+" idToDelete "+' ;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:32:45.070

将新按钮 (btnDelete) 添加到您的 layout-xml

`Button btnDel =(Button)findViewById(R.id.btnDelete);` 使用Add a clickListener将其安装在您的代码中，使用：

```
btnDel.setOnClickListener)new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                                //add SQL deletion code here
            }
        }); 
```

并最终在 onClickListener 中执行 SQL 删除语句；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:59:42.207

而不是使用`execSQL()`删除，使用以下：

到`delete`整个表：

```
db.delete(DATABASE_TABLE, null, null); 
```

* * *

对于`delete`表中的特定记录：

```
db.delete(DATABASE_TABLE, whereCondition, null); 
```

例如：
db.delete(restaurants, "id = '"+ IdToBeDeleted +"'", null);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:52:56.533

我相当肯定你需要继续学习这些教程。在网站上观看了 Commons_Ware（这本书的作者和非常活跃的成员）后，我怀疑他会让你悬而未决。我很确定他会一步一步教授完整的 CRUD 模型。

作为旁注，如果您还没有购买他的书的订阅，我强烈推荐它。它们会经常更新以包含最新信息。

# iphone - 从视频中提取帧

> ID：10915207
> 
> 赞同：1
> 
> 时间：2012-06-06T13:28:54.483
> 
> 标签：iphone, objective-c, ios, xcode, xcode4.2

我正在开发一个应用程序，允许用户拍摄视频，然后每秒捕获视频帧并将图像写入文档目录。我编译了 iFrameExtractor 项目，该项目在模拟器上运行良好，但在设备上运行时显示错误。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:31:50.270

您可以简单地使用[MPMoviePlayerController](http://developer.apple.com/library/ios/#DOCUMENTATION/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html)类中的[`thumbnailImageAtTime:timeOption:`](http://developer.apple.com/library/ios/#DOCUMENTATION/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html)方法。

# process - 如何在 Expect 中生成 vbs 脚本？

> ID：10915208
> 
> 赞同：0
> 
> 时间：2012-06-06T13:28:56.483
> 
> 标签：process, kill, expect, pid

我有一个杀死进程的 vbs 脚本。这个脚本提供了一个 pid 作为参数。我想从一个期望脚本中生成这个脚本。但是当我写：

```
spawn KillProcess.vbs pid_to_kill 
```

我收到错误消息：“没有这样的文件或目录”。顺便说一句，我是新手：）

但我做错了什么？

vbs 脚本与期望脚本位于同一文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T22:17:38.040

您可能必须使用以下命令启动 VBS 程序`cscript`：

```
spawn cscript KillProcess.vbs $pid_to_kill 
```

[http://ss64.com/vb/cscript.html](http://ss64.com/vb/cscript.html)

# qt - PyQt/Qt：如何在 Qlabel 小部件中拉伸图像？

> ID：10915215
> 
> 赞同：5
> 
> 时间：2012-06-06T13:29:17.810
> 
> 标签：qt, pyqt

我想在我的应用程序中显示图像。我使用 QtDesigner 设计 UI，然后使用 pyqt 进行编码。问题是将显示的图像大于 UI 上的小部件大小。我参考官方demo： [QT - Widget Image Viewer Demo](http://doc.qt.nokia.com/4.7-snapshot/widgets-imageviewer.html)

添加imagelabel和scrollArea，代码如下：

```
---- UI init ----
self.label = QtGui.QLabel(self.centralwidget)
self.label.setGeometry(QtCore.QRect(40, 140, 361, 511))
self.label.setSizePolicy(QtGui.QSizePolicy.Preferred,QtGui.QSizePolicy.Preferred)
self.label.setObjectName(_fromUtf8("label"))
self.scrollArea = QtGui.QScrollArea(self.centralwidget)
self.scrollArea.setGeometry(QtCore.QRect(40, 140, 361, 511))
self.scrollArea.setWidget(self.label)
self.scrollArea.setObjectName(_fromUtf8("scrollArea"))

---- function ----
filename = "./Penguins.jpg"
image = QtGui.QImage(filename)
pp = QtGui.QPixmap.fromImage(image)
lbl = QtGui.QLabel(self.label)
lbl.setPixmap(pp)
self.scrollArea.setWidgetResizable(True)
lbl.show() 
```

但它不会拉伸图像，甚至没有出现滚动条！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-06T13:36:44.837

你需要打电话`self.label.setScaledContents(true);`。因此，它`QLabel`会将自身调整为像素图/图像的大小，并且滚动条将变得可见。请参阅本[文档](http://qt-project.org/doc/qt-4.8/qlabel.html#scaledContents-prop)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T21:07:58.057

QLabel::setScaledContents 的默认实现对我不起作用，因为当图像大于标签的最大尺寸时，它不允许我保持纵横比。

如果需要，这个小助手将缩小图像以适应标签的最大尺寸（但不是放大），始终保持纵横比：

```
/**
 * Fill a QLabel widget with an image file, respecting the widget's maximum sizes,
 * while scaling the image down if needed (but not up), and keeping the aspect ratio
 * Returns false if image loading failed
 ****************************************************************************/
static bool SetLabelImage(QLabel *label, QString imageFileName)
{
    QPixmap pixmap(imageFileName);
    if (pixmap.isNull()) return false;

    int w = std::min(pixmap.width(),  label->maximumWidth());
    int h = std::min(pixmap.height(), label->maximumHeight());
    pixmap = pixmap.scaled(QSize(w, h), Qt::KeepAspectRatio, Qt::SmoothTransformation);
    label->setPixmap(pixmap);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:44:25.293

我不使用 PyQt，但 QtPixmap 控件具有 scaled() 函数。您可以在放入标签之前调整图像大小：

*   缩放（）
*   缩放到高度（）
*   缩放到宽度（）

这是我在 C++ 中用于将图像大小调整为 QLabel 大小的示例代码：

```
imatge.load("sprite.png");
QPixmap imatge2 = imatge.scaled(ui->label->width(),ui->label->height()); 
```

# php - zend 教义找不到类

> ID：10915218
> 
> 赞同：0
> 
> 时间：2012-06-06T13:29:25.440
> 
> 标签：php, zend-framework, doctrine

在方法 checkUnique`$res=$select->fetchArray();`中执行以下类中的行，我得到一个我无法解决的错误。

我认为这是由于命名约定 zend autoloader

```
class Twit_Model_Owners extends Twit_Model_BaseOwners {

    function checkUnique($username) {
        $con = Doctrine_Manager::getInstance()->connection();
        $select = $con->createQuery();
        $select->from($this->getTable()->getTableName(), array('loginName'))
                ->where('loginName=?', $username);
        $res=$select->fetchArray();

        if (empty($res)) {
            return true;
        }
        return false;
    }
} 
```

例外：

```
Application error

Exception information:

Message: Couldn't find class Owners
Stack trace:

#0 /usr/share/php/Doctrine/lib/Doctrine/Table.php(256): Doctrine_Table->initDefinition()
#1 /usr/share/php/Doctrine/lib/Doctrine/Connection.php(1126): Doctrine_Table->__construct('Owners', Object(Doctrine_Connection_Mysql), true)
#2 /usr/share/php/Doctrine/lib/Doctrine/Query.php(1942): Doctrine_Connection->getTable('Owners')
#3 /usr/share/php/Doctrine/lib/Doctrine/Query.php(1740): Doctrine_Query->loadRoot('Owners', 'Owners')
#4 /usr/share/php/Doctrine/lib/Doctrine/Query/From.php(88): Doctrine_Query->load('Owners')
#5 /usr/share/php/Doctrine/lib/Doctrine/Query/Abstract.php(2077): Doctrine_Query_From->parse('Owners')
#6 /usr/share/php/Doctrine/lib/Doctrine/Query.php(1167): Doctrine_Query_Abstract->_processDqlQueryPart('from', Array)
#7 /usr/share/php/Doctrine/lib/Doctrine/Query.php(1133): Doctrine_Query->buildSqlQuery(true)
#8 /usr/share/php/Doctrine/lib/Doctrine/Query/Abstract.php(958): Doctrine_Query->getSqlQuery(Array)
#9 /usr/share/php/Doctrine/lib/Doctrine/Query/Abstract.php(1026): Doctrine_Query_Abstract->_execute(Array)
#10 /usr/share/php/Doctrine/lib/Doctrine/Query.php(267): Doctrine_Query_Abstract->execute(Array, 3)
#11 /var/www/twit/application/models/Owners.php(20): Doctrine_Query->fetchArray()
#12 /var/www/twit/application/controllers/AuthController.php(62): Twit_Model_Owners->checkUnique('a')
#13 /usr/share/php/libzend-framework-php/Zend/Controller/Action.php(516): AuthController->signupAction()
#14 /usr/share/php/libzend-framework-php/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('signupAction')
#15 /usr/share/php/libzend-framework-php/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#16 /usr/share/php/libzend-framework-php/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#17 /usr/share/php/libzend-framework-php/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#18 /var/www/twit/public/index.php(30): Zend_Application->run()
#19 {main}  

Request Parameters:

array (
  'module' => 'default',
  'controller' => 'auth',
  'action' => 'signup',
  'username' => 'a',
  'password' => 'x',
  'confirmPassword' => 'x',
  'captcha' => 
  array (
    'id' => 'ae5e3ce58bcf69e25ccdbba601029325',
    'input' => 'hen753',
  ),
  'register' => 'Sign up',
) 
```

我可以毫无问题地实例化模型。这是我用来生成模型的代码：

```
 Doctrine::generateModelsFromDb('/var/www/twit/application/models', array('zenddb'), array(
            'baseClassesDirectory' => '',
            'classPrefix' => 'Twit_Model_',
            'classPrefixFiles' => false
            )); 
```

此外，如果您愿意，您可以访问此处的示例页面并在此处自行获取错误。

```
http://94.94.19.135/twit/public/index.php/signup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:33:52.363

似乎 Doctrine 不想要表的名称，`$this->getTable()->getTableName()` 但返回的对象名称（在我的情况下为 Twit_Model_Owners）我个人无法理解这样的选择（抽象是可以的，但至少查询中的表的名称builder 应该被维护），但我抱怨。

# c# - 如何将 IsEnabled 或 IsVisible 属性绑定到方法或属性获取？

> ID：10915219
> 
> 赞同：2
> 
> 时间：2012-06-06T13:29:29.460
> 
> 标签：c#, .net, wpf, isenabled

我有一些控件需要根据一些计算的结果隐藏或禁用。我想将 IsEnabled 或 IsVisible 属性绑定到父表单类的某些方法或属性获取的结果。像这样的东西：

```
<TabItem Name="MyTab" Header="This should be enabled when result is 2" IsEnabled="{Binding MyMethod}">
    <!--Some other stuff-->
</TabItem> 
```

在后面的代码中：

```
public bool MyMethod()
{
    return _valueA + _valueB == 2;
} 
```

你能帮我找到一个合适的方法来实现这一点吗？

谢谢，吉克拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:11:43.663

您可能需要使用`MultiBinding`：

```
<TabItem Name="MyTab" Header="This should be enabled when result is 2">
  <TabItem.IsEnabled>
     <MultiBinding Converter={StaticResource MyAddConverter}>
         <Binding Path=ValueA UpdateSourceTrigger=PropertyChanged />
         <Binding Path=ValueB UpdateSourceTrigger=PropertyChanged />
     </MultiBinding>
  </TabItem.IsEnabled>
    <!--Some other stuff-->
</TabItem> 
```

在您的 ViewModel 中，您应该具有以下内容（假设您的 ViewModel 实现`INotifyPropertyChanged`）：

```
public double ValueA
{
  get { return _valueA; }
  set 
  {
    _valueA = value;
    OnPropertyChanged("ValueA");
  }
} 
```

同样 for `ValueB`，这将允许 WPF`Binding`每次更新`ValueA`或者`ValueB`更改

您的转换器应如下所示：

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
  double valueA = (double)values[0];
  double valueB = (double)values[1];
  return valueA + valueB == 2;
} 
```

这将允许您在 Converter 中定义一个外部方法，每次 ValueA 或 ValueB 发生变化时都会再次调用该方法。

我想说这就是你所需要的=）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:16:12.103

您需要创建一个新属性来代表您在此处尝试实现的价值。这是视图模型的全部目的。我强烈建议您避免在此处使用转换器，即使它会起作用。转换器应该用于处理仅视图问题，而这是视图状态问题。

一个潜在的视图模型看起来像这样：（我正在使用我的[BindableBase](http://northhorizon.net/2011/the-right-way-to-do-inotifypropertychanged/)）

```
class AddingViewModel : BindableBase {
    private int _valueA;
    public int ValueA {
        get { return _valueA; }
        set { SetProperty(ref _valueA, value, "ValueA", OnValueAChanged); }
    }

    private void OnValueAChanged() { UpdateIsTabEnabled(); }

    private int _valueB;
    public int ValueB {
        get { return _valueB; }
        set { SetProperty(ref _valueB, value, "ValueB", OnValueBChanged); }
    }

    private void OnValueBChanged() { UpdateIsTabEnabled(); }

    private bool _isTabeEnabled;
    public bool IsTabEnabled {
        get { return _isTabEnabled; }
        private set { SetProperty(ref _isTabEnabled, value, "IsTabEnabled"); }
    }

    private void UpdateIsTabEnabled() {
        IsTabEnabled = _valueA + _valueB == 2;
    }
} 
```

这可能看起来有点冗长，但我想强调几个原因：

*   随着需求的变化，很容易找到和更改`UpdateIsTabsEnabled`。
*   作为`ValueA`并`ValueB`成为其他功能的组件，很容易将钩子添加到他们所推崇的`OnChanged`方法中。
*   它很容易绑定`IsTabEnabled`到任何一个`IsEnabled`或`Visibility`根据需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:51:09.000

您不能直接绑定到方法。它必须是一个财产。话虽如此，还有一些其他技巧可以绑定到这个问题中显示的[方法 Bind to a method in WPF?](https://stackoverflow.com/questions/502250/bind-to-a-method-in-wpf) .

回到你的问题，我要做的是让 MyMethod 成为一个属性。

```
public double SumAB
{
    get{ return _valueA + _valueB;}
} 
```

然后为您的绑定添加一个转换器：

```
<TabItem Name="MyTab" Header="This should be enabled when result is 2" IsEnabled="{Binding SumAB, Converter={StaticResource SumValueToBoolConverter}}"> 
```

您的转换器代码如下所示：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    double sumValue = (double)value;
    if(sumValue==2)
    {
        return true;
    }
    return false;
} 
```

# c# - C# 保存文件会删除我的部分文本

> ID：10915220
> 
> 赞同：0
> 
> 时间：2012-06-06T13:29:30.650
> 
> 标签：c#, save, savefiledialog

我使用此代码来保存我的 xml 文件。

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog();
saveFileDialog1.DefaultExt = ".FFDATA";
saveFileDialog1.Filter = "Form|*.FFDATA";
saveFileDialog1.FileName = "A_"+code;//here code is a generated number, always unique

Stream myStream;

if (saveFileDialog1.ShowDialog() == DialogResult.OK)
{
    if ((myStream = saveFileDialog1.OpenFile()) != null)
    {
        StreamWriter wText = new StreamWriter(myStream);
        wText.Write(result.ToString());

        myStream.Close();
    }
} 
```

但是，当我打开文件时，里面的文本在某个地方被剪切，并且它的第二部分丢失了。（我断点了`wText.Write(result.ToString());`，`result.ToString()`正如我所料 - 一个普通的文本。

然后我尝试放置`wText.Write("Test?");`并没有保存到文件中，但是文件本身出现了。

因此，无论我试图保存的文本有多短，我至少会丢失一些数据。

问题：我做错了什么？

PS我找到[了这个](http://zamov.online.fr/EXHTML/CSharp/CSharp_302155.html)例子并稍作修改以满足我的需要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:34:54.120

内容可能未刷新。这很容易通过自己调用 Flush 或使用同时处理处置/关闭等的“使用”块来避免。

```
using (StreamWriter wText = new StreamWriter(myStream))
{
  wText.Write(result.ToString());
  //wText.Flush(); //this should not be needed because close will flush
} 
```

请注意这里没有任何 .Close() ......通过 using 块处理流读取器会为您解决这个问题，并确保它正确完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:31:54.767

在 close() 之前调用 StreamWriter 上的 flush()，这会将输出缓冲区刷新到文件。或者直接在 streamwriter 上调用 close，这应该刷新 writer 并关闭底层流。如果需要，您可以将 AutoFlush 设置为 true，这可能会对性能产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:38:28.603

尝试：

```
 StreamWriter wText = new StreamWriter(myStream); 
    wText.Write(result.ToString()); 
    wText.Close();
    myStream.Close(); 
```

或更好）：

```
using (var myStream = saveFileDialog1.OpenFile())
{
  if (myStream != null)    
  {    
    using (var wText = new StreamWriter(myStream))
    {    
      wText.Write(result.ToString());    
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:32:51.397

确保关闭 StreamWriter wText。您正在关闭底层流，但不是正在写入文件的 StreamWriter。调用`StreamWriter.Close()`还将为您关闭底层流。确保使用 try/finally 以确保在发生异常（例如 IOException）时关闭流。以下代码应该可以解决您的问题：

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog(); 
saveFileDialog1.DefaultExt = ".FFDATA"; 
saveFileDialog1.Filter = "Form|*.FFDATA"; 
saveFileDialog1.FileName = "A_"+code;//here code is a generated number, always unique 

Stream myStream;

if (saveFileDialog1.ShowDialog() == DialogResult.OK) 
{
    if ((myStream = saveFileDialog1.OpenFile()) != null) 
    {
        StreamWriter wText = new StreamWriter(myStream);
        try
        { 
            wText.Write(result.ToString()); 
        }
        // Close Stream and StreamWriter in a finally block so that they are
        // closed even if an exception occurs.
        finally
        {
            // StreamWriter.Close() will close the underlying Stream for you
            wText.Close();
        }
    } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T13:34:48.107

您是否尝试过这种替代方法？

```
File.AppendAllText(path, result.ToString()) 
```

# jquery - 如何实现与其他不相关链接重叠的水平滑动导航栏

> ID：10915223
> 
> 赞同：0
> 
> 时间：2012-06-06T13:29:49.057
> 
> 标签：jquery, html, css, navbar

我正在尝试使用 JQuery 创建一个滑动导航菜单。这个想法是我将有两个或更多主要部分，每个部分将有几个小节。

当用户将鼠标悬停在一个部分上时，子部分将水平扩展，如果另一个部分当前打开并显示其子部分，它将折叠回仅显示主要部分。

我已经实现了一些基本代码来扩展部分的宽度，如下所示。

```
jQuery(document).ready(function($) {

// Section 1
$('#S1Hover').mouseover(function() {
    $(this).css('cursor', 'pointer');
    if ($('#S2wrapper').is(":visible")){
        $('#S2wrapper').animate({width: 0})
    }
    $('#S1wrapper').animate({width: 400})
});

// Section 2
$('#S2Hover').mouseover(function() {
    $(this).css('cursor', 'pointer');
    if ($('#S1wrapper').is(":visible")){
        $('#S1wrapper').animate({width: 0})
    }
    $('#s2wrapper').animate({width: '300'});
});   
}); 
```

用于此的 HTML 是

```
<div id="main">
    <div id="S1Hover" class="event">Section 1</div>
    <div id="S1wrapper">
    <ul id="S1">
        <li id="SS1"><a href="#">SS1</a></li>
        <li id="SS2"><a href="#">SS2</a></li>
        <li id="SS3"><a href="#">SS3</a></li>
        <li id="SS4"><a href="#">SS4</a></li>
    </ul>
    </div>

    <div id="S2Hover" class="event">S2</div>
    <div id="S2wrapper">
    <ul id="projects-nav">
        <li id="SS5"><a href="#">SS5</a</li>
        <li id="SS6"><a href="#">SS6</a></li>
        <li id="SS7"><a href="#">SS7</a></li>
    </ul>
    </div>
</div> 
```

它目前并没有真正做任何事情，并且希望对此有任何帮助。另外，如果我确实可以正常工作，是否有任何浏览器特定的事情需要注意？

编辑：我没有提到当一个部分被扩展时，我希望它保持在那个状态，直到另一个部分被悬停。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:58:46.940

这背后的想法是，您想要悬停的任何内容都需要放置在开始悬停的元素内。例如，如果您希望 #S2Wrapper 将其内容悬停在其中，则需要将其包裹在元素周围。

```
<div id="S2Wrapper">
 <div class="hover-stuff">
  <ul>
   <li>This is hovered</li>
  </ul>
 </div>
</div> 
```

然后，您将隐藏 .hover-stuff 并仅在 S2Wrapper 悬停时显示它。此外，您可能希望将 S2Wrapper 相对定位，并将悬停内容绝对定位到您想要的长度和宽度。

原因是 S2Wrapper 是被悬停的元素，只要它不再悬停并且菜单下降，它就会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:11:44.323

在不过多更改 DOM 结构的情况下，您可以尝试以下操作：

HTML：

```
<div id="main">
<div id="S1Hover" class="event">Section 1</div>
<div class="wrapper">
<ul id="S1">
    <li id="SS1"><a href="#">SS1</a></li>
    <li id="SS2"><a href="#">SS2</a></li>
    <li id="SS3"><a href="#">SS3</a></li>
    <li id="SS4"><a href="#">SS4</a></li>
</ul>
</div>

<div id="S2Hover" class="event">S2</div>
<div class="wrapper">
<ul id="projects-nav">
    <li id="SS5"><a href="#">SS5</a</li>
    <li id="SS6"><a href="#">SS6</a></li>
    <li id="SS7"><a href="#">SS7</a></li>
</ul>
</div> 
```

CSS：

```
.wrapper ul{
        margin:0;
        padding:0;
    }
    .wrapper ul li{
        float:left;
        list-style:none;
        margin-right:6px;
        width:0;
        height:20px;
        overflow:hidden;
    } 
```

Javascript：

```
 jQuery(document).ready(function ($) {

        $('.event').hover(function () {
            $(this).next().find('li').animate({width:80}, 750);
        }, function () {
            $(this).next().find('li').animate({ width: 0 }, 1000);
        });
    }); 
```

我会给包装器一个类而不是每个类的 id。此外，每个部分的宽度为 80px，高度为 20px `<li>`，您可以将其更改为适合您内容的任何内容。

# ios - CustomTextField - 自动完成/自动更正不会在点击时关闭

> ID：10915227
> 
> 赞同：2
> 
> 时间：2012-06-06T13:30:02.570
> 
> 标签：ios, autocomplete, core-text, uitextinput

因此，我使用核心图形创建了一个自定义文本视图，并使其符合 UITextInput 和 UITextInputTraits 协议。除了一种奇怪/烦人的行为外，一切都很好。键盘正确显示自动更正建议，但当用户点击标有“X”的建议时，它不会忽略该建议，而是插入该建议。我已经检查过了，在所有其他程序中，点击带有“X”的建议会驳回该建议。我该如何解决？

在我的自定义文本视图中，我有以下 iVar：

```
//UITextInputTraits
UITextAutocapitalizationType _uiAutoCap;
UITextAutocorrectionType _uiAutoCorrect;
UITextSpellCheckingType _uiSpellCheck;
UIKeyboardType _uiKeyboard;
UIKeyboardAppearance _uiKeyboardAppearance;
UIReturnKeyType _uiReturnType;
BOOL _uiEnableAutoReturn;
BOOL _uiSecureText; 
```

合成到适当的 TextInputTraits 属性：

```
@synthesize autocapitalizationType=_uiAutoCap, autocorrectionType=_uiAutoCorrect, spellCheckingType=_uiSpellCheck, keyboardType=_uiKeyboard, keyboardAppearance=_uiKeyboardAppearance, returnKeyType=_uiReturnType, inputDelegate=_uiTextDelegate, enablesReturnKeyAutomatically=_uiEnableAutoReturn, secureTextEntry=_uiSecureText; 
```

并且它们使用以下默认值进行初始化：

```
 _uiAutoCorrect = UITextAutocorrectionTypeDefault;
    _uiSpellCheck = UITextSpellCheckingTypeDefault;
    _uiKeyboardAppearance = UIKeyboardAppearanceDefault;
    _uiAutoCap = UITextAutocapitalizationTypeNone;
    _uiReturnType = UIReturnKeyDefault;
    _uiEnableAutoReturn = NO;
    _uiSecureText = NO;
    _uiKeyboard = UIKeyboardTypeDefault; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:31:21.023

## 编辑：可能的答案

当您点击关闭建议时，您的点击可能首先被您的视图拦截，这可能会更改文本的选定范围（这会导致 UITextInput 接受建议）。不是最好的解决方案，但 UITextInput 调用

```
- (NSDictionary *)textStylingAtPosition:(UITextPosition *)position inDirection:(UITextStorageDirection)direction; 
```

当它想要提出建议时，您可以有一个 ivar (BOOL) 来存储是否存在建议（在调用 UIKeyInput 方法时将其值设为 NO，在调用 textStyling 方法时设为 YES）。然后，修改您的手势识别器，以便在上述 ivar 为 YES 并且点击位于建议框的矩形中时它不会更改选择（您可以通过将从 - (CGRect) 返回的矩形的高度加倍来获得此矩形firstRectForRange:(UITextRange *)range;)。希望有效。

**编辑：**您应该能够实现 UIGestureRecognizerDelegate 方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch; 
```

这样它只有在 touch.view == (yourTextView) 时才会收到触摸

我也遇到了同样的问题，还没有解决办法；但是，我确实相信您应该通过创建返回您想要的属性值的函数来遵守 UITextInputTraits。示例：要使特征 UITextAutoCorrectionType 具有 UITextAutocorrectionTypeDefault 的值，您应该提供一个访问器方法：

```
- (UITextAutocorrectionType)autocorrectionType {
    return UITextAutocorrectionTypeDefault;
} 
```

# php - PHP5 foreach $_POST 抛出错误？

> ID：10915228
> 
> 赞同：0
> 
> 时间：2012-06-06T13:30:03.897
> 
> 标签：php, foreach

我收到此错误：

> 警告：stristr() 期望参数 1 是字符串，数组在第 385 行的 /nfs/c09/h03/mnt/12345/domains/mydomainname.com/html/inyoni/fabrics.php 中给出

从此代码：

```
foreach ($_POST as $field => $value) {

    if ($value && (stristr($value,"Content-Type: "))){
    header("Location: error.php");
    exit;
    }

} 
```

我不知道为什么。事实上，我没有看到错误，但我的客户看到了。我的理解是，当表单中包含图像文件时会发生这种情况（但是，这个错误以前没有出现，只是现在才出现）。

该网站托管在 Mediatemple 上，并且已经向客户发送了一条 PHP 通知，说明 PHP5 开始在他们的服务器上全面使用的时间——这是 PHP5 冲突还是什么？

有点困惑 - 任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:34:39.590

错误很明显。意思是第一个参数`stristr()`必须是字符串。但是，您提供的是一个数组，这就是代码产生错误的原因。要修复它，只需确保您只是检查字符串值。

```
if (is_string($value))
{
    if (stristr(...))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:35:27.460

Well the `$value` contains an array, not a string. This can happen when you have a form something like this:

```
<input type="text" name="form[foo]"/>
<input type="text" name="form[bar]"/> 
```

The `$_POST['form']` will hold an array of those two variables. Check if something like this occurs.

It can also happen with file uploads, multiple checkboxes, etc.

As Kemal Fadillah suggested, make a simple type check of the `$value` variable.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:35:32.893

Do a `var_dump($value)` in the loop. If any of the forms contains an array, such as an uploaded file [http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php) or a bunch of checkboxes, then `$value` would be an array, instead of a string.

# debian - Debian - “测试”的sources.list - 要改变什么？

> ID：10915232
> 
> 赞同：3
> 
> 时间：2012-06-06T13:30:17.780
> 
> 标签：debian

我想使用 Debian 的 testing-distribution（目前是“wheezy”而不是稳定的“squeeze”），并且即将调整我的 /etc/apt/sources.list 文件。

我知道我必须用 wheezy 来代替主要条目的挤压。

但是为了安全（挤压/更新）和更新（挤压更新），我是否也必须这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T14:48:28.740

是的，稳定/测试的逻辑结构相同。

如果您想在测试变得稳定并为新测试命名时继续“测试”，您也可以使用“测试”作为发布名称。

就像是 ：

```
deb ftp://ftp.fr.debian.org/debian/ testing main contrib  non-free 
```

我通常做的事情如下：1）在稳定的生产系统上，我使用发布名称，例如“squeeze” 2）在测试系统上，我使用“测试”名称，就像我上面的例子一样。

这样，1) 您的生产系统不会在您不知道自己在做什么的情况下升级（当您准备升级时更改 sources.list 中的发布名称）2) 您的测试环境永远保持“测试”状态，无论发布什么版本管理周期

我希望它有所帮助，

问候，

雅克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T15:37:49.527

出色地。[http://debgen.simplylinux.ch/](http://debgen.simplylinux.ch/)建议在所有地方使用 wheezy（或测试）。

# c++ - 使用 VS2012 RC 时，如果在 main() 退出后调用 std::thread::join() 将挂起

> ID：10915233
> 
> 赞同：25
> 
> 时间：2012-06-06T13:30:22.520
> 
> 标签：c++, visual-c++, c++11, stdthread, visual-c++-2012

如果在 Ubuntu 12.04 上使用 Clang 3.2 或 GCC 4.7 编译，则以下示例运行成功（即不会挂起），但如果我使用 VS11 Beta 或 VS2012 RC 编译则挂起。

```
#include <iostream>
#include <string>
#include <thread>
#include "boost/thread/thread.hpp"

void SleepFor(int ms) {
  std::this_thread::sleep_for(std::chrono::milliseconds(ms));
}

template<typename T>
class ThreadTest {
 public:
  ThreadTest() : thread_([] { SleepFor(10); }) {}
  ~ThreadTest() {
    std::cout << "About to join\t" << id() << '\n';
    thread_.join();
    std::cout << "Joined\t\t" << id() << '\n';
  }
 private:
  std::string id() const { return typeid(decltype(thread_)).name(); }
  T thread_;
};

int main() {
  static ThreadTest<std::thread> std_test;
  static ThreadTest<boost::thread> boost_test;
//  SleepFor(100);
} 
```

问题似乎是，如果在退出`std::thread::join()`后调用它，则永远不会返回。`main`它在 cthread.c`WaitForSingleObject`中定义的地方被阻塞。`_Thrd_join`

`SleepFor(100);`在末尾取消注释`main`可以让程序正确退出，就像制作`std_test`非静态一样。使用`boost::thread`也避免了这个问题。

所以我想知道我是否在这里调用未定义的行为（对我来说似乎不太可能），或者我是否应该针对 VS2012 提交错误？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-22T07:37:15.143

[使用 VS2012 RTM 在他的连接错误 ( https://connect.microsoft.com/VisualStudio/feedback/details/747145](https://web.archive.org/web/20150501080609/https://connect.microsoft.com/VisualStudio/feedback/details/747145) )中跟踪 Fraser 的示例代码似乎显示了一个相当简单的死锁案例。这可能不是特定于`std::thread`- 可能`_beginthreadex`遭受同样的命运。

我在调试器中看到的内容如下：

在主线程上，该`main()`函数已完成，进程清理代码已获得一个称为 的临界区`_EXIT_LOCK1`，称为 的析构函数`ThreadTest`，并且正在（无限期地）等待第二个线程退出（通过对 的调用`join()`）。

第二个线程的匿名函数完成并在线程清理代码中等待获取`_EXIT_LOCK1`临界区。不幸的是，由于事情的时间安排（第二个线程的匿名函数的生命周期超过了函数的生命周期`main()`），主线程已经拥有该临界区。

**僵局。**

任何延长生命周期的东西，`main()`使得第二个线程可以`_EXIT_LOCK1`在主线程避免死锁情况之前获得。这就是为什么取消注释睡眠会`main()`导致完全关闭。

或者，如果从`ThreadTest`局部变量中删除 static 关键字，则析构函数调用将向上移动到`main()`函数的末尾（而不是在进程清理代码中），然后阻塞直到第二个线程退出 - 避免死锁情况。

或者您可以`ThreadTest`向该调用添加一个函数`join()`并在结束时调用该函数`main()`- 再次避免死锁情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-10T16:46:26.383

我意识到这是一个关于 VS2012 的老问题，但这个错误仍然存​​在于 VS2013 中。对于卡在VS2013上的朋友，可能是因为微软拒绝提供VS2015的升级价格，我提供以下分析和解决方法。

问题是，根据具体情况，`at_thread_exit_mutex`使用的互斥锁 ( )`_Cnd_do_broadcast_at_thread_exit()`要么尚未初始化，要么已被销毁。在前一种情况下，`_Cnd_do_broadcast_at_thread_exit()`尝试在关闭期间初始化互斥锁，从而导致死锁。在后一种情况下，互斥锁已经通过 atexit 堆栈销毁，程序将在退出时崩溃。

我找到的解决方案是`_Cnd_do_broadcast_at_thread_exit()`在程序启动的早期显式调用（谢天谢地是公开声明的）。这具有在其他任何人尝试访问它之前创建互斥锁的效果，并确保互斥锁继续存在直到最后可能的时刻。

因此，要解决此问题，请将以下代码插入源模块的底部，例如 main() 下方的某个位置。

```
#pragma warning(disable:4073) // initializers put in library initialization area
#pragma init_seg(lib)

#if _MSC_VER < 1900
struct VS2013_threading_fix
{
    VS2013_threading_fix()
    {
        _Cnd_do_broadcast_at_thread_exit();
    }
} threading_fix;
#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:38:49.590

我相信您的线程已经被终止，并且在您的 main 函数终止后和静态销毁之前释放了它们的资源。这是至少可以追溯到 VC6 的 VC 运行时的行为。

[父线程终止时子线程是否退出](https://stackoverflow.com/questions/4666628/does-child-threads-exit-when-the-parent-thread-terminates)

[在 Windows 上提升线程和进程清理](https://stackoverflow.com/questions/8001989/boost-thread-and-process-cleanup-on-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-09T08:40:34.463

我的回答为时已晚，但希望对某人有所帮助。

我被这个错误困住了，我找到了解决这个问题的技巧，它在我的代码中有效。

```
int main()
{
    ThreadTest trick_obj;  //trick... You can put this line of code anywhere
    static ThreadTest std_test;
    return 1;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-03T22:17:54.517

我与这个 bug 斗争了一天，发现了以下变通方法，结果证明这是最不脏的把戏：

可以使用标准 Windows API 函数调用 ExitThread() 来终止线程，而不是返回。当然，这种方法可能会弄乱 std::thread 对象和相关库的内部状态，但由于程序无论如何都会终止，好吧，就这样吧。

```
#include <windows.h>

template<typename T>
class ThreadTest {
 public:
  ThreadTest() : thread_([] { SleepFor(10); ExitThread(NULL); }) {}
  ~ThreadTest() {
    std::cout << "About to join\t" << id() << '\n';
    thread_.join();
    std::cout << "Joined\t\t" << id() << '\n';
  }
 private:
  std::string id() const { return typeid(decltype(thread_)).name(); }
  T thread_;
}; 
```

join() 调用显然可以正常工作。但是，我选择在我们的解决方案中使用更安全的方法。可以通过 std::thread::native_handle() 获取线程 HANDLE。有了这个句柄，我们可以直接调用 Windows API 加入线程：

```
WaitForSingleObject(thread_.native_handle(), INFINITE);
CloseHandle(thread_.native_handle()); 
```

此后，不得销毁 std::thread 对象，因为析构函数会尝试第二次加入线程。所以我们只是让 std::thread 对象在程序退出时悬空。

# php - 如何在没有 PECL_HTTP 或 CURL 的情况下在 PHP 中执行 http get 请求

> ID：10915238
> 
> 赞同：1
> 
> 时间：2012-06-06T13:30:44.650
> 
> 标签：php, http, get

我正在建立网站和域托管（1&1）只提供基本的 PHP 5.4（没有外部库，如 PECL_HTTP 或 CURL 等，没有安装的库）。

我可以将 PHP 类文件添加到我的代码中。我正在尝试在此 URL 上进行 Http/Https 获取 `$url ="https://www.googleapis.com/freebase/v1/search?query=chocolate&count=2";`

我已经尝试过 Snoopy，并且至少有 6 个来自 PHPClasses 的不同类库都没有返回任何内容（结果为空白），我不知道为什么？但它们都返回页面结果。

任何人都可以建议一个我可以包含的 PHP 类库（而不是任何已安装的库），它可以执行简单的 Http/Https 获取和返回结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:43:16.963

如果你只想要这个“文件”的内容，你可以使用[`file_get_contents()`](http://php.net/file_get_contents)（见第一个例子）。请参阅@OkekeEmmanuelOluchukwu 关于如何发送标头的评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:48:47.280

完整的 http 功能（包括标头等）的最佳选择是使用带有流上下文的文件函数。

来自[php.net](http://us.php.net/manual/en/function.stream-context-create.php)：

```
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"Accept-language: en\r\n" .
          "Cookie: foo=bar\r\n"
  )
);

$context = stream_context_create($opts);

$fp = fopen('http://www.example.com', 'r', false, $context);
fpassthru($fp);
fclose($fp) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:44:55.697

您在寻找页面输出吗？

正如您可能已经发现的那样，`include something.php?foo=bar`它并不工作，因为 php 实际上会查找以 结尾的文件`?for=bar`，但您可以像这样设置所有 get 变量：

```
function getRequest($url, $data) {
    foreach ($data as $key => $value) {
        $_GET[$key] = $value;
    }
    include $url;
} 
```

但是，获取“完整路径”上的变量（想不出正确的名称）可以工作，例如`include 'http://something.com/foo.php?bar=baz'`. 您可以在这里找到“变量传递”的示例[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)并在非本地系统上获取变量。

# php - 如何在 root 用户下从 PHP 运行 bash 脚本

> ID：10915241
> 
> 赞同：15
> 
> 时间：2012-06-06T13:30:59.427
> 
> 标签：php, linux, bash, shell, unix

如何在**root用户**（具有所有权限）而不是**nobody**用户下从PHP运行bash脚本 - php默认用户？

这就是我在 sudo visudo 之后的输出：

```
Defaults        env_keep += "LINES COLUMNS"
Defaults        env_keep += "LSCOLORS"
Defaults        env_keep += "SSH_AUTH_SOCK"
Defaults        env_keep += "TZ"
Defaults        env_keep += "DISPLAY XAUTHORIZATION XAUTHORITY"
Defaults        env_keep += "EDITOR VISUAL"
Defaults        env_keep += "HOME MAIL"

#User privilege specification
root    ALL=(ALL) ALL
%admin  ALL=(ALL) ALL

# Uncomment to allow people in group wheel to run all commands
# %wheel        ALL=(ALL) ALL

# Same thing without a password
# %wheel        ALL=(ALL) NOPASSWD: ALL

# Samples
# %users  ALL=/sbin/mount /cdrom,/sbin/umount /cdrom
# %users  localhost=/sbin/shutdown -h now 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-06T13:41:05.833

您可以使用 sudo：

```
exec("sudo /your/script"); 
```

您应该允许在没有密码提示的情况下执行脚本。在控制台中运行`sudo visudo`并将以下字符串添加到末尾：

```
nobody ALL = NOPASSWD: /your/script 
```

您必须正确设置文件模式以确保没有人可以修改此脚本并将危险内容放入其中（在根控制台中）：

```
chown root:root /your/script
chmod 755 /your/script 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:37:06.787

你可以制作一个set-uid root的程序。这会导致程序始终以 root 身份运行。这不适用于 shell 脚本，因此您必须使用[调用您的脚本的程序](http://web.archive.org/web/20120305024140/http://www.tuxation.com/setuid-on-shell-scripts.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:42:17.140

在 Linux 下，您通常使用`sudo`. 尽量具体，不要给脚本太多权限。

有关如何使用的示例：http `sudo`: [//aplawrence.com/Basics/sudo.html](http://aplawrence.com/Basics/sudo.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:10:17.147

我将添加一个特定规则以允许`nobody`用户调用此脚本，使用`sudo`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-18T11:53:01.963

我最近发布了一个项目，它允许 PHP 获取并与真正的 Bash shell 交互（如果需要，作为用户：apache/www-data 或 root）。在这里获取：[https ://github.com/merlinthemagic/MTS](https://github.com/merlinthemagic/MTS)

下载后，您只需使用以下代码：

```
$shell    = \MTS\Factories::getDevices()->getLocalHost()->getShell('bash', true);
$return1  = $shell->exeCmd('/full/path/to/script.sh'); 
```

# android - 为什么某些 ActiveSync 命令在 Android 电子邮件应用程序中有效，但在独立 Java 客户端中无效？

> ID：10915247
> 
> 赞同：3
> 
> 时间：2012-06-06T13:31:06.587
> 
> 标签：android, activesync

我正在开发一个 Java Exchange ActiveSync 客户端，我想同步收件箱文件夹以检索电子邮件标题。我按照 MS ActiveSync 文档进行了身份验证、文件夹同步并与服务器同步。但是，只有 Sync 命令中的某些属性有效。

为了测试*好的*ActiveSync 消息是什么样子，我使用了 Android Emulator 和 CharlesProxy HTTP 代理来捕获从 Android 电子邮件应用程序发送的 ActiveSync 消息。我能够成功捕获和解码 WBXML 消息。我看到我曾尝试使用但未成功的 ActiveSync XML 消息在“内置”电子邮件应用程序中运行良好。例如

此 XML 同步命令在从电子邮件应用程序发送时有效，但从我的 Java 客户端发送时无效：

```
<?xml version="1.0" encoding="utf-8" ?>
<Sync xmlns="AirSync">
    <Collections>
        <Collection>
            <Class>Email</Class>
            <SyncKey>sync key here</SyncKey>
            <CollectionId>collectionID HERE</CollectionId>
            <DeletesAsMoves/>
            <GetChanges/>
            <WindowSize>5</WindowSize>
            <Options>
                <FilterType>2</FilterType>
                <MIMESupport>2</MIMESupport>
                <MIMETruncation>7</MIMETruncation>
            </Options>
        </Collection>
    </Collections>
</Sync> 
```

有谁知道为什么？某些应用程序是否以某种方式具有特殊权限，这意味着它们可以使用完整的 ActiveSync 协议？我想强调一下，我*可以*像这样运行成功的同步命令：

```
<?xml version="1.0" encoding="utf-8" ?>
<Sync xmlns="AirSync">
    <Collections>
        <Collection>
            <Class>Email</Class>
            <SyncKey>sync key here</SyncKey>
            <CollectionId>collection Id here</CollectionId>
            <GetChanges/>
        </Collection>
    </Collections>
</Sync> 
```

我只是不能像 Android 电子邮件应用那样添加额外的属性。

任何帮助表示赞赏！

# python - 什么 Unix 工具可以快速向 Python 脚本添加/删除一些文本？

> ID：10915248
> 
> 赞同：6
> 
> 时间：2012-06-06T13:31:07.383
> 
> 标签：python, git, unix, flask

我正在使用[Flask](http://flask.pocoo.org/)开发应用程序。

我想要一种快速、自动化的方式来添加和删除`debug=True`主函数调用：

发展：

```
app.run(debug=True) 
```

生产：

```
app.run() 
```

出于安全原因，如果我将调试模式设置为“在野外”，我可能会暴露有关应用程序的私人/敏感信息。

我正在考虑使用 sed 或 awk 在 git hook 中自动执行此操作（生产版本保存在我推送到的裸远程仓库中），或者将其包含在我要编写的 shell 脚本中以启动 uwsgi 和其他一些“维护”-允许应用程序正确提供的任务。

你怎么看？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T13:34:05.037

那不是要走的路！我的建议是创建一些配置 Python 模块（让我们说，`config.py`），其中包含一些内容，例如：

```
DEBUG = True 
```

现在，在我们当前的代码中，这样写：

```
import config
app.run(debug=config.DEBUG) 
```

现在，当您在生产中运行时，只需`DEBUG`从更改`True`为`False`. 或者你可以让这个文件没有版本，所以开发的副本与生产的副本不同。这并不少见，因为例如，在开发和生产中不使用相同的数据库连接参数。

即使您想自动更新它，也只需在带有`-i`标志的配置文件上调用 sed。只更新这个文件会更安全：

```
$ sed -i.bkp 's/^ *DEBUG *=.*$/DEBUG = False/' config.py 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T13:34:19.953

您应该在服务器上设置一些环境变量。您的脚本可以检测此变量的存在并禁用调试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-06T13:33:41.837

我会使用`sed`：

```
sed 's/debug=True//' 
```

可移植、可编写脚本、无处不在。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-07T06:30:21.160

您可能[不应该`app.run`在生产中使用（](http://flask.pocoo.org/docs/deploying/#deployment)[如果您使用的是 uwsgi](http://projects.unbit.it/uwsgi/wiki/Quickstart)，您*肯定*不需要它）。*相反，请使用 Flask优秀*文档的[部署](http://flask.pocoo.org/docs/deploying/#deployment)部分中讨论的几个部署选项之一。（只需调用执行 Python 包含的服务器。）*[`app.run`](http://flask.pocoo.org/docs/api/#flask.Flask.run)[`werkzeug.serving.run_simple`](http://werkzeug.pocoo.org/docs/serving/#werkzeug.serving.run_simple)[`wsgiref`](http://docs.python.org/library/wsgiref.html#module-wsgiref.simple_server)*

 *话虽如此，正确的方法不是对源代码进行部署后编辑，而是使用特定于服务器的配置文件来更改您的设置，正如[@brandizzi 在他的回答中指出的那样](https://stackoverflow.com/a/10915290/135978)。

您可以通过几种不同的方式执行此操作（Flask 也有[这方面的文档](http://flask.pocoo.org/docs/config/)- 请参阅 Armin 关于[从文件配置](http://flask.pocoo.org/docs/config/#configuring-from-files)和[处理开发-生产开关](http://flask.pocoo.org/docs/config/#development-production)的建议）：

1.  在存储库中包含您的开发和服务器的配置。使用环境变量在它们之间切换：

    ```
    # your_app.config.develop
    DEBUG = True

    # your_app.config.production
    DEBUG = False

    # your_app.app
    from flask import Flask
    from os import environ

    mode = environ.get("YOURAPP_MODE")
    mode = "production" if mode is None else "develop"

    config = __import__("your_app.config." + mode)

    app = Flask("your_app")
    app.config.from_object(config) 
    ```

2.  将您的生产配置与您可能需要的任何其他特定于服务器的配置一起存储在单独的存储库中。如果设置了环境变量，则加载配置。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-06T13:51:16.787

您还可以使用 NOCOMMIT 钩子（来自[gitty](https://github.com/timcharper/gitty/blob/master/assets/hooks/nocommit)）：

将此设置为预提交挂钩

```
if git diff --cached | grep NOCOMMIT > /dev/null; then
echo "You tried to commit a line containing NOCOMMIT"
  exit 1
fi
exit 0 
```

这将阻止提交，如果它包含`NOCOMMIT`.

您当然可以直接在钩子中替换`NOCOMMIT`by 。`Debug=True`*

# php - 使用 JQuery 从文件夹中获取图像并放入 phpBB 页面

> ID：10915253
> 
> 赞同：0
> 
> 时间：2012-06-06T13:31:25.193
> 
> 标签：php, javascript, jquery, phpbb

我正在尝试从文件夹中获取 jpg 图像，并在使用 javascript 加载页面时将其放入 div 中。如果可能，我想使用 JQuery。到目前为止，如果将其包装为函数，并且我在页面上按下调用该函数的链接，我就可以使用它，但我希望它在页面准备好后立即加载，而无需按下链接

```
<dd>
<div id="videothumbnail{attach_row.ASSOC_INDEX}" name="videothumbnail{attach_row.ASSOC_INDEX}" id="videothumbnail{attach_row.ASSOC_INDEX}"></div><a href="javascript:insertvideothumbnail{attach_row.ASSOC_INDEX}()">View Thumbnail</a>
<a href="javascript:insertnewvideothumbnail('{attach_row.ASSOC_INDEX}')">View Thumbnail</a>
</dd>

<script>
// <![CDATA[
function insertvideothumbnail{attach_row.ASSOC_INDEX}(){
var code ="<img id=\"videothumbnail{attach_row.ASSOC_INDEX}\" src=\"{attach_row.VIDEOTHUMBNAIL}\" width=\"200px\" />";
document.getElementById("videothumbnail{attach_row.ASSOC_INDEX}").innerHTML = code;
}

// ]]>
</script> 
```

也有人知道可用的脚本，它使用 ffmpeg 从视频生成缩略图并将它们显示在页面上，以便用户可以选择他们想要代表视频的缩略图？这就是我最终想要完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:35:30.400

You can attach a callback function to the `DOM ready` event using jQuery like so:

```
$(document).ready(function() {
    var code ="<img id=\"videothumbnail{attach_row.ASSOC_INDEX}\" src=\"{attach_row.VIDEOTHUMBNAIL}\" width=\"200px\" />";
    document.getElementById("videothumbnail{attach_row.ASSOC_INDEX}").innerHTML = code;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:44:14.053

如果要扫描目录并列出该文件夹中的所有 jpg 图像，可以使用此脚本 (images.php)：

```
<?php
if ($handle = opendir('images/')) {
    while (false !== ($entry = readdir($handle))) {
        if (!in_array($entry, array(".", "..") && is_numeric(strpos(".jpg", $entry)))) {
            echo "<img src=\"$entry\" alt=\"\" />\n";
        }
    }
    closedir($handle);
}
?> 
```

之后从这个 PHP 获取输出并使用 jQuery AJAX 在 DOM 中更新它。

```
$.ajax({
    url: 'images.php',
    success: function(data) {
        $('.result').html(data);
    }
}); 
```

希望这可以帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:46:11.453

```
 $(document.ready(function(){
        $('videothumbnail{attach_row.ASSOC_INDEX}')
        .append('<img id="videothumbnail{attach_row.ASSOC_INDEX}" src="{attach_row.VIDEOTHUMBNAIL}" width="200px" />');
    })); 
```

# applet - 用于确定“最新 Java 版本”的 Oracle 或第 3 方服务

> ID：10915255
> 
> 赞同：7
> 
> 时间：2012-06-06T13:31:40.533
> 
> 标签：applet, java, auto-update

是否有可用的服务响应可用的最新 Java 版本？

我正在为使用小程序的应用程序编写系统检查。作为检查的一部分，我想通知用户是否有新版本的 Java 可供下载。是否有任何在线服务只响应最新 Java 版本的版本号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:35:38.140

How about a different strategy of 'leave it to the manufacturer'?

The JRE is configured by default to be auto-updating to the latest version Oracle considers to be stable enough for general use. Best leave it to the auto-update feature.

## Run-time testing

Of course, there is always [How do I test whether Java is working on my computer?](http://java.com/en/download/testjava.jsp)

### FireFox

> **An old version of Java has been detected on your system.**
> 
> Update Java by clicking the button below:

A polite way of saying 'no plug-in found for FF'.

### Chrome

![Update Available](../Images/66a8a5bab7148c8da36a4b138e4c8f62.png)

## User Friendly

But ultimately either way, leave it to the end-user's discretion as to what version to use, and whether to update.

# javascript - 在页面上包含两个版本的 jQuery 而不会影响旧插件

> ID：10915263
> 
> 赞同：4
> 
> 时间：2012-06-06T13:32:27.960
> 
> 标签：javascript, jquery, drupal, jquery-plugins, drupal-theming

我们的 drupal 站点使用我们尚未升级的 jQuery 版本 1.2.1 运行。

问题是这样的：

我们需要添加一个名为 jQuery Tokeninput 的新插件，但它只适用于最新的 jQuery 版本。我们尝试在旧版本中添加最新的 jQuery 版本，但它会产生奇怪的结果。

我的问题是，如何在不影响旧 jQuery 插件的情况下包含最新的 jQuery 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T13:35:21.373

**方法#1：（推荐）**

你可以这样做：

```
<script type='text/javascript' src='js/jquery_1.7.1.js'></script>   
<script type='text/javascript'>  
 // In case you wonder why we pass the "true" parameter,
 // here is the explanation:
 //   - When you use jQuery.noConflict(), it deletes
 //     the "$" global variable.
 //   - When you use jQuery.noConflict(true), it also
 //     deletes the "jQuery" global variable.
 var $jq = jQuery.noConflict(true);  
</script>  
<script type='text/javascript' src='js/jquery_1.2.1.js'></script> 
```

这样，当您想要使用新版本的 jquery 而不是`$`使用`$jq`.

```
$jq('.selector').on('click', function(){  
    //do something  
}); 
```

**方法 #2：（可能会破坏您网站上的内容 - 不推荐）**

在您的`template.php`文件中：

```
<?php
function {theme_name}_preprocess(&$vars, $hook) {
if (arg(0) != 'admin' && $hook == "page") {
// Get an array of all JavaScripts that have been added
$javascript = drupal_add_js(NULL, NULL, 'header');

// Remove the original jQuery library
unset($javascript['core']['misc/jquery.js']);

// Add in our new jQuery library
// We do it this way to keep the includes in the same order
$core = array(
//Alternative jQuery
drupal_get_path('theme', '{theme_name}').'/js/libs/jquery-1.7.1.min.js' => array(
'cache' => TRUE,
'defer' => FALSE,
)
);

// Merge back into the array of core JavaScripts
$javascript['core'] = array_merge($javascript['core'], $core);

// Rerender the block of JavaScripts
$vars['scripts'] = drupal_get_js(NULL, $javascript);
}
} 
```

**请务必仅在您网站的前端执行此操作。如果它们依赖于 Drupal 的 jQuery 版本，它可能会弄乱管理工具栏。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-18T22:56:20.767

以下脚本...

*   完全**向后兼容**预先存在的脚本

*   应该没有副作用（除了添加额外的JS下载的明显副作用）

*   允许**以任何顺序使用任何版本的 jQuery——**你可以让“默认”是旧版本的 jQuery，而“附加”是新版本，反之亦然。

# 如何在同一页面上使用 2 个版本的 jQuery

```
<!-- IMPORTANT: ORDER is vital. Do not change the order of the following. -->

<script src="//code.jquery.com/jquery-1.4.2.min.js"></script>
<script>
    // Save original jQuery version to another variable
    var $Original = jQuery.noConflict(true);
</script>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script>
    // Save new jQuery version to another variable
    var $v1_11_0 = jQuery.noConflict(true);

    // Replace the original jquery version on $ and jQuery so pre-existing scripts don't break
    // No need to declare "var" here since the $ and jQuery still exist as "undefined"
    $ = $Original;
    jQuery = $Original;

    // Optional: Here I'm saving new jQuery version as a method of "$" -- it keeps it more organized (in my opinion)
    $.v1_11_0 = $v1_11_0;
</script> 
```

# 在这里查看它的实际效果：

[http://jsfiddle.net/dd94h/](http://jsfiddle.net/dd94h/)

# 这是您可以放入 html 文件进行测试的整个 HTML

```
<!DOCTYPE html>
<html>
<head>
    <title>jQuery within jQuery</title>
    <style media="all" type="text/css">
        h1 span { font-weight: normal; }
    </style>

    <!-- IMPORTANT: ORDER is vital. Do not change the order of the following. -->

    <script src="//code.jquery.com/jquery-1.4.2.min.js"></script>
    <script>
        // Save original jQuery version to another variable
        var $Original = jQuery.noConflict(true);
    </script>

    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script>
        // Save new jQuery version to another variable
        var $v1_11_0 = jQuery.noConflict(true);

        // Replace the original jquery version on $ and jQuery so pre-existing scripts don't break
        // No need to declare "var" here since the $ and jQuery still exist as "undefined"
        $ = $Original;
        jQuery = $Original;

        // Optional: Here I'm saving new jQuery version as a method of "$" -- it keeps it more organized (in my opinion)
        $.v1_11_0 = $v1_11_0;
    </script>
</head>
<body>
<h1>Default jQuery: <span id="default-jquery">Loading...</span></h1>
<h1>Additional jQuery: <span id="additional-jquery">Loading...</span></h1>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed id felis quam. Morbi ultrices nisi vel odio vestibulum nec faucibus diam congue. Etiam cursus, turpis id rutrum adipiscing, ligula justo rhoncus ipsum, sed posuere diam orci vel mi. Etiam condimentum tincidunt metus, non dictum ligula hendrerit et. Nulla facilisi. Aenean eleifend volutpat nibh, eu tempor nulla auctor ac. Proin ultrices cursus scelerisque. Curabitur sem sapien, tempus et dictum nec, viverra vel odio. Nulla ullamcorper nisl a dolor laoreet eu eleifend tellus semper. Curabitur vitae sodales nisl. Donec tortor urna, viverra sed luctus in, elementum sit amet turpis.</p>

<script>
    // Continue to use "$" for the original jQuery version
    $( document ).ready(function(){
        $('#default-jquery').text($().jquery);
    });

    // Use $.v1_11_0(...) for the newly-added version
    $.v1_11_0( document ).ready(function(){
        $.v1_11_0('#additional-jquery').text($.v1_11_0().jquery);
    });
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:08:12.200

如您所知，有一个[jQuery 更新模块](http://drupal.org/project/jquery_update)可以为您更新 jQuery 版本，而无需您编写代码。如果感兴趣，请查看它，但我认为该模块不会保留旧的 jQuery 版本，而是用新版本替换它。

我可能还建议您尝试升级 jQuery 的版本并只使用最新的版本，看看它是否确实破坏了其他功能。

# web-services - GlassFish，设置 web 服务的上下文路径

> ID：10915264
> 
> 赞同：0
> 
> 时间：2012-06-06T13:32:29.017
> 
> 标签：web-services, glassfish, contextpath

我的网络服务有 EAR。我的应用程序中没有战争模块。
我的意思是
*http://[host]:[port]/*****[上下文路径]/** *MyWebService?wsdl***

 **对于 JBoss 我正在使用`jboss.xml`
对于 WebLogic 我正在使用`weblogic-webservices.xml`
GlassFish 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:19:04.210

看起来这个文档说要[使用端点地址 uri 为 GlassFish 上的 Web 服务设置上下文根](http://docs.oracle.com/cd/E18930_01/html/821-2417/beasw.html)......该元素将进入 glassfish-ejb-jar.xml 文件。**

# jquery - qtip2 - 单击事件在第一次单击时不起作用

> ID：10915266
> 
> 赞同：1
> 
> 时间：2012-06-06T13:32:38.123
> 
> 标签：jquery, qtip, qtip2

我有一些奇怪的事情正在发生，我希望有人能为我解释一下。我在页面上的一个元素上使用 qtip2 插件。这是它的代码：

```
$('.tooltipEdit').click(function(){
var id = $(this).attr('id');
$(this).qtip({  
     show:{
         event: 'click',
                 solo: true
    },
    content: {
            text:'<form id="tooltipForm"><input type="text" value="'+$(this).text()+'" />  <button id="tooltipSave">Save</button></form>'
    },
    position : {
        my : 'top center',
        at: 'bottom center',
        target: $('#'+id+'')
    },
    hide: {
        delay : 500,
        fixed: true
    },
    style: {
        classes: 'ui-tooltip-blue ui-tooltip-shadow ui-tooltip-rounded'
    },
        events: {
            show: function(event, api) {
                $('#tooltipSave').click(function()
                {
                    var contact = 0;
                                            if($('#'+id+'').attr('id') == 'callFromContactName')
                    {
                        contact = $('#contactFromId').val();
                    }

                    if($('#'+id+'').attr('id') == 'callToContactName')
                    {
                        contact = $('#contactToId').val();
                    }

                    $.ajax(
                    {
                        type: "GET",
                        url: "php/myurl.php",
                        dataType: 'json',
                        data: 'callid='+$('#callid').val()+'&field='+$('#'+id+'').attr('id')+'&value='+encodeURIComponent($('#tooltipForm input').val())+'&contact='+contact,
                        success: function(j) 
                        {
                            return true;
                        },
                        error: function()
                        {
                            return false;
                        }
                    });

                    return false;
                });
            }
        }
    }); 
```

如您所见，我正在工具提示中创建一个带有“保存按钮以提交回服务器”的表单。

我看到了两件奇怪的事情。

1）当我单击具有该类的元素时，第一次单击什么也不做，但第二次单击它时会显示工具提示。为什么第一次点击没有出现？

2) 有时错误的文本会显示在工具提示的表单内。如果我使用表单的动态填充，为什么它不是一直都是正确的文本？

我已经阅读了有关将 jquery 的 destroy() 方法用于具有多个工具提示的页面的信息，我敢打赌这会有所帮助，但我不知道在哪里使用它。

所有帮助将不胜感激！

更新：您可以在此 jsFiddle 中看到代码：http: [//jsfiddle.net/DULDx/1/](http://jsfiddle.net/DULDx/1/) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T13:50:47.817

您应该在每个语句中应用 qtip 插件。将点击更改为每个。还要修复表单数据，您需要在 qtip 调用之前引用它。在您的元素上使用插件之前，您需要获取对`this`否则当您使用 qtip 事件时`this`将引用不同的东西的引用。

演示：http: [//jsfiddle.net/lucuma/PqyFj/1/](http://jsfiddle.net/lucuma/PqyFj/1/)

```
$('.tooltipEdit').each(function(){
var id = $(this).attr('id');
var $this = $(this);  // get a reference so we can use it in the show event of qtip
$(this).qtip({  
     show:{
         event: 'click',
                 solo: true
    },
    content: {
            text:'<form id="tooltipForm"><input type="text" value="'+$this.text()+'" />  <button id="tooltipSave">Save</button></form>'  // we use $this now to reference the element that was outside qtip
    },
    position : {
        my : 'top center',
        at: 'bottom center',
        target: $('#'+id+'')
    },
    hide: {
        delay : 500,
        fixed: true
    },
    style: {
        classes: 'ui-tooltip-blue ui-tooltip-shadow ui-tooltip-rounded'
    },
        events: {
            show: function(event, api) {
                $('#tooltipSave').click(function()
                {
                    var contact = 0;
                                            if($('#'+id+'').attr('id') == 'callFromContactName')
                    {
                        contact = $('#contactFromId').val();
                    }

                    if($('#'+id+'').attr('id') == 'callToContactName')
                    {
                        contact = $('#contactToId').val();
                    }

                    $.ajax(
                    {
                        type: "GET",
                        url: "php/myurl.php",
                        dataType: 'json',
                        data: 'callid='+$('#callid').val()+'&field='+$('#'+id+'').attr('id')+'&value='+encodeURIComponent($('#tooltipForm input').val())+'&contact='+contact,
                        success: function(j) 
                        {
                            return true;
                        },
                        error: function()
                        {
                            return false;
                        }
                    });

                    return false;
                });
            }
        }
    }); 
```

# windows - Windows 批处理 for 循环。双引号的问题

> ID：10915273
> 
> 赞同：0
> 
> 时间：2012-06-06T13:32:58.380
> 
> 标签：windows, batch-file, for-loop, wildcard, quotes

假设我想使用以下代码将文件从一个位置复制到另一个位置：

```
@set FILE=%1
@set SCRDIR=C:\test dir
@set DSTDIR=%SCRDIR%\temp

for %%f in ("%SCRDIR%\%FILE%") do @(
    echo Copying "%%f" to "%DSTDIR%"
    copy "%%f" "%DSTDIR%"
) 
```

该文件存在：

```
 C:\test dir>dir /b copyme.txt
copyme.txt 
```

首先，我使用文件名作为要复制的参数调用脚本：

```
C:\test dir>test.bat rename.txt

C:\test dir>for %f in ("C:\test dir\rename.txt") do @(
echo Copying "%f" to "C:\test dir\temp"
 copy "%f" "C:\test dir\temp"
)
Copying ""C:\test dir\rename.txt"" to "C:\test dir\temp"
The system cannot find the file specified.. 
```

上面的复制命令失败，因为额外的引号......

现在我使用包含通配符的文件名调用脚本`*`：

```
C:\test dir>test.bat copyme.*

C:\test dir>for %f in ("C:\test dir\copyme.*") do (
echo Copying "%f" to "C:\test dir\temp"
 copy "%f" "C:\test dir\temp"
)

C:\test dir>(
echo Copying "C:\test dir\copyme.txt" to "C:\test dir\temp"
 copy "C:\test dir\copyme.txt" "C:\test dir\temp"
)
Copying "C:\test dir\copyme.txt" to "C:\test dir\temp"
        1 file(s) copied. 
```

在上面的例子中，我使用通配符，它​​工作得很好。

谁能解释这种行为？当我不使用通配符时，为什么 Windows 会添加额外的引号？还是因为我使用通配符而省略了额外的引号？为了处理包含空格的路径，我必须引用`FOR`循环的路径\文件名，因此省略这些不是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:44:54.623

当没有通配符时，`for`命令不会检查文件是否存在，因此有效地将其名称视为字符串文字，包括引号。只需使用`"%%~f"`而不是`"%%f"`

# java - FunctionalJava 应用程序在堆栈跟踪中使用 Stream 引发 StackOverflowError

> ID：10915279
> 
> 赞同：0
> 
> 时间：2012-06-06T13:33:22.537
> 
> 标签：java, stack-overflow, functional-java

FunctionalJava 应用程序在堆栈跟踪中使用 Stream 引发 StackOverflowError，但该应用程序不（看似）使用流。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:33:23.113

可能其他一些数据结构在幕后使用 Stream，它可以使用大量递归。

在我的案例中，嫌疑人是`IterableW`在使用原`wrap`生`bind`Java时`Iterables`。相反，我曾经`fj.List.iterableList`将有限转换为`Iterable`具有`fj.List`有效`bind`操作的 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:50:30.617

在 github 上有一个[pull request来解决这个问题。](https://github.com/functionaljava/functionaljava/pull/25)

如果这对您不利，也许您可​​以尝试该修复程序，如果对您有用，则对合并它投票+1？

# wcf - WCF 服务的 Fluent 验证或 EntLib 验证应用程序块

> ID：10915283
> 
> 赞同：2
> 
> 时间：2012-06-06T13:33:33.117
> 
> 标签：wcf, validation, fluentvalidation, validation-application-bl

我正在寻找一种将输入参数验证添加到 WCF 服务集的标准方法。

谁能比较 Fluent 验证[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)和 EntLib 验证应用程序块？

它们各自的优点/缺点是什么？

应该使用一个或另一个的场景是什么？

我的问题类似于[您会为 .net 项目推荐哪个验证框架？](https://stackoverflow.com/questions/8750208/which-validation-framework-would-you-recommend-for-net-projects)以及[选择哪个验证框架：Spring Validation 或 Validation Application Block (Enterprise LIbrary 4.0)？](https://stackoverflow.com/questions/751700/which-validation-framework-to-choose-spring-validation-or-validation-applicatio)，但这些问题的答案并没有详细的比较。

如果能推荐一些其他类似的技术，我将不胜感激（并说明原因）

有没有人有这两种框架的经验并为他们的项目选择一个？作出决定的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:15:16.430

几个月后我可以回答，EntLib 验证应用程序块（VAB）是一个成熟的库，它支持代码、属性和配置验证。

在大多数情况下，开发人员应该从 DataContract 请求中的 DataMember 属性的属性验证开始，这是最简单、简洁的方式。

如果您希望验证规则会经常更改或不同的应用程序安装将需要针对同一属性的不同规则（例如，不同国家/地区的邮政编码规则不同），您应该选择配置。这并不简单，需要学习，但灵活性是一个优势。EntLib 配置编辑器有助于使其更容易。

只有对于复杂的规则，不能用属性或配置来表达的，你才应该写代码。如果您多次重复相同的规则，请考虑创建自定义验证器和验证属性。

[Fluent 验证库](http://fluentvalidation.codeplex.com/)支持在代码中添加验证，这是不太理想的方法。所以我不明白，为什么 Fluent 验证如此受欢迎。我也很惊讶，  [Fluent 验证作者不熟悉](http://fluentvalidation.codeplex.com/discussions/358574)EntLib VAB。

我最初的问题是关于 WCF 操作的输入参数。然而，最佳实践建议使用单个请求参数作为数据契约，而不是使用多个 RPC 样式的简单参数。无论如何，VAB 为 WCF 操作的各个参数提供属性，这提供了更简洁的视图（例如，参见 [http://www.codeproject.com/Articles/259327/Integrate-Validation-Block-with-WCF](http://www.codeproject.com/Articles/259327/Integrate-Validation-Block-with-WCF)）

# firefox - Firefox中的下拉箭头img

> ID：10915284
> 
> 赞同：0
> 
> 时间：2012-06-06T13:33:35.257
> 
> 标签：firefox, drop-down-menu

我试图更改下拉菜单中的默认箭头。

通过在css中添加这个，

`background-image:url("downArrow.jpg") no-repeat scroll right center transparent;`

但下拉的默认箭头不是在 Firefox 中被替换，但在 chrome 中它会正确出现。

如何在 Firefox 中解决此问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:42:22.580

`<SELECT>`元素不是由 HTML 呈现的，它们是由浏览器/操作系统呈现的，并且它们的样式非常有限。您不能替换箭头。您所能做的就是在其上放置一个元素并使用脚本来触发点击，就好像它是真实下拉菜单的一部分一样。

# jasper-reports - Jasper 多列报表，特定字段的列跨度

> ID：10915286
> 
> 赞同：0
> 
> 时间：2012-06-06T13:33:42.993
> 
> 标签：jasper-reports, ireport

我有一个横向子报表，具有水平打印顺序，包含 3 列（报表元素下的列 = 3）。

该列仅包含一个文本字段，用于显示查询结果中的值。

显然，该报告每行打印 3 个值。

结果集如下所示：

```
value | type
4     | a
7     | a
5     | b
342   | a
5     | b 
```

* * *

我需要做什么：

根据类型字段，我需要在下一行打印相应的记录，就好像只有一列一样。本质上，列跨度。

因此，如果结果是类型 a 和类型 b，并且 b 是需要单独打印的类型，则报表可能会这样布局：

```
a--a--a--
a--a--
b--------
a--
b--------
b--------
a--a--a-- 
```

这可能吗？有小费吗？我正在使用 iReport。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:19:13.323

您可以执行以下操作：

*   每列添加一个文本字段（3 个文本字段）。它们中的每一个都有适当的列宽。
*   添加一个额外的文本字段元素，它占据 3 列（将在报表设计中与其他列重叠）。
*   在所有文本字段元素上使用 printWhenExpression。如果 type != b，则打印前 3 个。如果 type == b，则打印第 4 个元素。

# c# - 如何在 WebBrowser 中显示 Javascript 代码？

> ID：10915291
> 
> 赞同：0
> 
> 时间：2012-06-06T13:34:05.767
> 
> 标签：c#, javascript

我想在我的 C# 浏览器中显示 javascript 代码。通常，当我导航时，浏览器想要保存它..但我希望浏览器在浏览器的屏幕上显示它..我认为我必须用 webbrowser 做一个 javascript 查看器..

我用过那个代码，但它不起作用（仍然要求保存..）

```
webBrowser1.Navigate("http://xxxx.com/aaa.js", "_mainframe"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:36:46.180

Don't use a WebBrowser control for this but simply download it using a `HttpClient` and display it e.g. in a TextBox.

The WebBrowser control is basically an embedded IE which will download files if it thinks a file with that MIME type should be downloaded or if there are headers like `Content-disposition: attachment` (which force a download prompt in the browser).

# c# - 如何有条件地换出表单的“用户输入”部分？

> ID：10915293
> 
> 赞同：3
> 
> 时间：2012-06-06T13:34:08.357
> 
> 标签：c#, winforms, design-patterns, user-interface

我正在创建一个实用程序，该实用程序需要足够灵活以使用用户输入的不同类型的数据。不仅仅是不同的数据，因为一个用户可能会输入“Rory Gallagher”另一个“Merle Travis”另一个“Louis Jordan”和另一个“Gatemouth Brown”。

更像是一个用户会输入“Rory Gallagher”另一个“42”和另一个同时输入日期（例如 9/8/1956）和 ID 值（例如“00034872184”）。

所以问题出在 GUI 上：我怎样才能“换掉”提示他们输入的表单部分？创建几个 99% 相同的实用程序似乎有点矫枉过正。但是应用程序的某些“版本”只需要一个“输入一些值”标签和一个文本框，而另一个可能需要提示它们输入两条甚至更多条信息。

我不想在表单上有一个“输入数据”按钮来调用另一个表单，因为当用户只需要输入一个信息时，这看起来很奇怪。

我在想策略模式可能会在我的未来出现，但 GUI 部分仍然是个难题。如果我们使用 WPF 会更容易，但我们不是。我想我仍然可以留出足够大的表格部分以包含“最大”场景，但这是最好的方法吗？

## 更新

我尝试了以下建议：

我在表单中添加了一个面板，并通过 Add | 创建了一个用户控件。UserControl 并尝试了这个：

```
panel1.Controls.Add(UserControl1);
UserControl1.Dock = DockStyle.Fill; 
```

...但遭遇了史诗般的失败（“'PlatypiRUs.UserControl1' 是一个'类型'，但用作'变量'”和“非静态字段、方法或属性'System. Windows.Forms.Control.Dock.get'")

## 再次更新

现在有了史诗般的成功：

```
UserControl1 usr1 = new UserControl1();
panel1.Controls.Add(usr1);
usr1.Dock = DockStyle.Fill; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:37:03.460

我建议将不同的用户控件动态加载到表单的该部分。为了设计时的简单性，您可以在动态控件所在的位置放置一个面板，然后在打开停靠的情况下将其加载到该面板中，这样它就可以填满整个面板。然后，您可以为您需要的每组数据输入字段创建一个单独的用户控件。例如，如果您有一个名为 pnlCustom 的面板控件，您可以在表单的加载事件（或任何有意义的地方）中执行以下操作：

```
UserControl1 customControl = new UserControl1();
pnlCustom.Controls.Add(customControl);
customControl.Dock = DockStyle.Fill; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:57:29.570

在我看来，这是一种建造者模式。

基本上，将您的表单视为“两步视图”，这意味着以下内容：

*   想出定义表单元素的结构（例如文本框、下拉菜单等），
*   实现一个抽象视图构建器（第一步构建器），以便在不同情况下生成不同的结构（请记住，该结构是通用的，不必涉及具体的 UI 组件，只需一个定义它们的结构），
*   为结构必须不同的所有情况实施抽象构建器，
*   然后实现 UI builder，它采用通用结构并构建 UI 组件。基本上，此构建器只是将通用结构转换为特定于平台的 UI 组件（例如 win-forms 文本框或 Html 输入）。

下一步显然是处理数据。为此，您有一个抽象处理器，然后是每种情况的具体实现（类似于上面的第一步构建器）。

现在很清楚，UI 构建和数据处理可以 1 对 1 关联，这意味着情况是工厂，它产生视图构建器和数据处理器。

伪代码如下所示：

```
// construct the view.
var factory = Situation.GetCurrentSituationFactory(); //abstract factory.
var uiBuilder = factory.GetUIBuilder(); //abstract builder
var structure = uiBuilder.GetFormStructure([context goes here]); //build view definition
var viewParser = Platform.GetViewParser(); //abstract builder (step 2)
viewParser.ConstructForm([context with form goes here]); //build form UI

// later on, process the input data.
var input = viewPrser.GetInput([context with form goes here]); //input definition
var dataProcessor = factory.GetDataPocessor(); //strategy
dataProcessor.Process(input); //execute processing strategy 
```

此外，这与动态控件或您要用于构造表单的任何其他内容不冲突。只需正确实现您的抽象问题。

# php - PHP中的OpenLDAP Unsalt SSHA用户密码

> ID：10915294
> 
> 赞同：0
> 
> 时间：2012-06-06T13:34:08.763
> 
> 标签：php, encryption, passwords, openldap

我正在尝试取消在我们的 openldap 环境中使用 SSHA 加密的 userPassword。我不想要纯文本密码，但想要获得未加盐的散列密码。

有什么想法吗？即使是散列和加盐的方法也会被证明是有用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:43:02.133

你想以某种方式转换

```
salt + sha1(salt + password) 
```

进入

```
sha1(password) 
```

如果不知道明文密码，我不知道这怎么可能。如果可能的话，加盐本身将是一种无用且微不足道的可逆技术。

# sas - where 语句中的宏变量

> ID：10915299
> 
> 赞同：0
> 
> 时间：2012-06-06T13:34:31.813
> 
> 标签：sas

我有 10 年的数据，需要计算 where **variable= 的数量。**以及某些变量的 where **variable=1的数量。**每年都有一些共同变量和一些不同变量。以下代码在**where**语句上有问题。这是错误消息，在此先感谢您的帮助。

> *ERROR 22-322：语法错误，需要以下之一：名称、带引号的字符串、数字常量、日期时间常量、缺失值、( *、、+、-、ALL、ANY、BTRIM、CALCULATED、CASE ，输入，放置，选择，一些，子串，翻译，用户。*

这是数据集ALL：

```
Year   N_community
2000    15339
2001    15246
2002    15142
2003    14916
2004    14500
2005    14701
2006    14732
2007    14804
2008    13651
2009    13751 
```

以下是代码：

```
/* For year 2000 to 2009 and the number of "missing" */
data health_status_vars_missing;
   set all;
run;
%let CmList = D_CFAIL D_CHD D_CHOLES D_DEPRSS D_HBP D_MYOCAR D_OTHHRT  D_PSYCHO;
%let CmCnt  = %sysfunc(countw(&CmList));
%macro countm(yr);
%do i=0 %to &yr.;
%do L=1 %to &CmCnt.;
    proc sql;
      create table %scan(&Cmlist., &L.)_M as 
      select 200&i as year, count(*) as %scan(&Cmlist., &L.)_M
      from cohort0&i.
      where %scan(&Cmlist., &L.)=.;
    quit;
    data health_status_vars_missing;
       merge health_status_vars_missing(in=a) %scan(&Cmlist., &L.)_M(in=b);
       by year;
       if a;
    run;
%end;
%end;
%mend countm;
%countm(9); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:32:57.620

如果您的程序与发布的完全相同，则问题很可能是以下语句：

```
**where %scan(&Cmlist., &L.)=.;** 
```

您可能打算注释掉该行。即便如此，在这种情况下，您还是缺少一个分号来结束您的 SELECT 语句；“退出”这个词；将作为 SELECT 的一部分执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T05:40:27.380

利用

```
%unquote(where %scan(&Cmlist., &L.))=.; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:04:55.870

要解决这个问题，首先需要做的是删除所有宏代码。然后使代码与文字一起工作。复制代码以模拟宏代码将执行的操作。一旦你有了一个可行的解决方案，就把宏代码一块一块地放回去。使用 %PUT 语句确保宏变量正确解析。

如果您需要进一步的帮助，请发布足够的示例数据以允许某人运行代码并查看错误...如发布的那样，我认为这是不可能的

# c# - 比较c#中的2个文本文件内容

> ID：10915308
> 
> 赞同：1
> 
> 时间：2012-06-06T13:35:10.307
> 
> 标签：c#

我在 C# 中有 2 个文本文件说：`File - A`& `File - B`。我想比较两个文件的内容，如果发现`File - A`其中不存在的任何内容，`File - B`那么我想将该内容放在 File-B 中的相同位置`File - A`。

```
 File - A                                        File - B

This is the example text.                         This is text. 
```

现在，如果我们比较以上 2 个文件内容，那么输出应该是：

```
 File - B

                       This is the example text. 
```

因此，如果 c# 中有任何方法可以为我做到这一点，那么请告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:55:16.127

```
var f1 = File.ReadAllLines(@"c:\temp\l1.txt");
var f2 = File.ReadAllLines(@"c:\temp\l3.txt");

var result = f1.Select((l, index) => new {Number= index, Text = l})
  .Join(f2.Select((l, index) => new {Number= index, Text = l}), 
        inner => inner.Number, 
        outer => outer.Number, 
        (inner, outer) =>  {
        if(inner.Text == "")
            return outer.Text;
        return inner.Text;
  })
  .Concat(f1.Where((l, index) => index >= f2.Count()))
  .Concat(f2.Where((l, index) => index >= f1.Count()));
  //.Dump();

File.WriteAllLines(@"c:\temp\l3.txt", result); 
```

这将逐行比较，如果第一个文件的行为空，将保留第二个文件的行，否则总是打印第一个文件行....

然后我们将结果与两个文件左侧的行连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T15:21:38.963

一个简单的 LINQ 方法：

```
var file1 = File.ReadLines(path1);
var file2 = File.ReadAllLines(path2);
var onlyInFileA = file1.Except(file2);
File.WriteAllLines(path2, file2.Concat(onlyInFileA)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:43:20.800

我真的没有完整的要求，但是在这里。

```
string[] fileAWords = File.ReadAllText("C:\\File - A.txt").Split(' ');
string[] fileBWords = File.ReadAllText("C:\\File - B.txt").Split(' ');

// The comparer makes it so the union is case insensitive
// For example: Welcome in File - A and welcome (lower-case) in File - B in a Union would both be in the result
// With the comparer, it will only appear once.
IEnumerable<string> allWords = fileAWords.Union(fileBWords, new StringEqualityComparer());

// We did the split on a space, so we want to put the space back in when we join.
File.WriteAllText("C:\\File - C.txt", string.Join(" ", allWords)); 
```

StringEqualityComparer 类代码为：

```
class StringEqualityComparer : IEqualityComparer<string>
{
    // Lower-case your strings for a case insensitive compare.
    public bool Equals(string s1, string s2)
    {
        if (s1.ToLower().Equals(s2.ToLower()))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    #region IEqualityComparer<string> Members
    public int GetHashCode(string s)
    {
        return s.GetHashCode();
    }

    #endregion
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T13:51:38.517

尝试这个：

```
 string fileAContent = File.ReadAllText(fileAPath);
 string fileBContent = File.ReadAllText(fileBPath);

 string[] fileAWords = filesAContent.split(_your delimiters_);
 string[] fileBWords = filesBContent.split(_your delimiters_);

 if (fileAWords.Except(fileBWords).Length > 0)
 {
    // there are words in file B that are not in file A
 } 
```

如果要优化性能，可以将 fileAWords 中的所有单词添加到 HashSet 中，然后遍历所有 fileBWords 并检查哈希集中是否存在不存在的工作

# java - 需要解释 Effective Java 教科书中的哈希码示例

> ID：10915309
> 
> 赞同：5
> 
> 时间：2012-06-06T13:35:10.710
> 
> 标签：java, hashcode, effective-java

这是第 9 项中的示例代码：

```
public final class PhoneNumber {
  private final short areaCode;
  private final short prefix;
  private final short lineNumber;

  @Override
  public int hashCode() {
    int result = 17;
    result = 31 * result + areaCode;
    result = 31 * result + prefix;
    result = 31 * result + lineNumber;
    return result;
  }
} 
```

第 48 页指出：*“选择值 31 是因为它是一个**奇数素数**。如果它是偶数并且乘法溢出，信息将会丢失，因为乘以 2 相当于移位。”*

我理解乘以 2 的概念相当于位移。我也知道当我们将一个大数乘以一个大奇数素数时，我们仍然会出现溢出（因此信息丢失）。我不明白为什么由大奇数乘法引起的信息丢失比由大偶数乘法引起的信息丢失更可取。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T13:40:58.987

对于偶数乘法器，乘法后的最低有效位始终为零。对于奇数乘法器，最低有效位是 1 或 0，具体取决于先前的值`result`是什么。因此，偶数乘法器失去了低位的不确定性，而奇数乘法器保留了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:40:37.530

没有大的偶素数这样的东西——唯一的偶素数是 2。

除此之外 - 使用中等大小的素数 # 而不是像 3 或 5 这样的小素数的一般目的是最大限度地减少两个对象最终具有相同哈希值的可能性，无论是否溢出。

溢出风险本身不是问题；真正的问题是散列对象集的散列码值将如何分布。因为哈希码用于 HashSet、HashMap 等数据结构中，所以您希望最小化可能共享相同哈希码的对象的数量，以优化对这些集合的查找时间。

# asp.net-mvc-3 - mvc3 - implementing a variable type recursive model with editors..

> ID：10915314
> 
> 赞同：0
> 
> 时间：2012-06-06T13:35:22.223
> 
> 标签：asp.net-mvc-3, recursion

I'm quite new to MVC3, just learning and am looking for some guidance.

For sake of simplicity, I have a model that represents 3 types of elements, questions, answers and containers.

All 3 inherit from a common base type, which I'll call baseElement.

When the model is delivered to the view it is a single object of type 'baseElement'

The container elements have an internal list of baseElements. Those baseElements can be of any of the three types. So - containers can contain questions, or containers (which could also contain questions, containers, etc..)

Each question can contain different types of answer types.

I'm trying to figure out how to use mvc3 to best implement a system to display this container/question structure to the user - permitting them to answer questions with various answer types while respecting the nested structure of the incoming model.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:20:57.213

好吧，尽管我的模型具有动态特性，但经过一段时间的探索后，我已经能够渲染我的模型对象结构而没有太多复杂性。

我通过使用强类型编辑器模板（每种类型一个）和视图中的以下代码来做到这一点。

```
@Html.EditorFor(x => @Model, @Model.GetType().Name) 
```

这会根据实际类型自动选择要使用的正确编辑器模板。在每个类型特定的编辑器模板中，我对每个孩子都进行了相同的调用。

它实际上最终变得非常简单。

我现在遇到的一个大问题是，一旦用户发布表单值，如何将表单值绑定（或以其他方式检索）回可用的东西。结构的动态特性导致默认模型绑定器越过它的手臂并放弃。

在这一点上，我认为检索/重新映射表单数据可能是一个更大的问题，但这肯定需要更多的修补，也许是一个单独的问题。

谢谢您的帮助。:-)

# flash - How can I test if IE6,7,8 are successfully using Flash without installing them?

> ID：10915316
> 
> 赞同：1
> 
> 时间：2012-06-06T13:35:29.487
> 
> 标签：flash, html5-video, ietester

I made a [HTML5 video](http://tanguay.info/web/index.php?page=codeExamples&idCode=videoresize) which plays well in all modern browsers. However, it needs to successfully "fall back to Flash" in IE6,7,8\.

When I look at my site in [IETester](http://www.my-debugbar.com/wiki/IETester/HomePage) with its emulation of IE6, IE7, and IE8, these browsers play they flash version of the video as they should.

In order to see if Flash is working in IETester at all, I go to [http://helpx.adobe.com/flash-player.html](http://helpx.adobe.com/flash-player.html) which quickly displays that Flash is working, but then crashes, so I'm not really sure if IETester is showing me what users of these actual browsers see who have Flash installed.

**How can I be certain that IE6, IE7, and IE8 can successfully run the Flash version of my video without installing these browsers and flash on other machines?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:44:34.880

我使用 VMWare 和全新安装的 WinXP Pro（WinXP Pro 附带 IE6）我在安装每个 Windows Service Pack 和浏览器升级后创建了“快照”。如果我想升级到 Win7 并在我的 VM 上安装 IE9，我也可以使用操作系统执行此操作，但我还不需要它。

我有

```
WinXP Pro IE6
WinXP Pro SP2
WinXP Pro SP2 IE7
WinXP Pro SP3 IE7
WinXP Pro SP3 IE8 
```

我可以从任何快照开始创建几乎任何我需要的东西。例如 WinXP Pro SP3 IE6?，我可以从 WinXP Pro IE6 开始...

# scala - 文档中对 ->>>[_, _ ] 和 ~> 的引用

> ID：10915318
> 
> 赞同：1
> 
> 时间：2012-06-06T13:35:31.750
> 
> 标签：scala, scalaz

我在哪里可以找到 Lang 规范或任何博客中的参考资料如何阅读这些结构：

```
trait GenericFunctor[->>[_, _ ], ->>>[_, _ ], F[_]] { 
  def fmap[A, B](f: A ->> B): F[A] ->>> F[B]
} 
```

或者

```
trait Category[~>[_, _ ]] {
  def compose[A, B, C](f: B ~> C)(g: A ~> B): A ~> C 
  def id[A]: A ~> A 
} 
```

如果它是类型名称 - 那么代码 `F[A] ->>> F[B]`不应该是可编译的，但它是

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:03:22.107

```
trait GenericFunctor[->>[_, _], ->>>[_, _], F[_]] { 
  def fmap[A, B](f: A ->> B): F[A] ->>> F[B]
} 
```

Scala 允许在标识符中使用符号。让我们将符号标识符替换为字母数字标识符。

```
trait GenericFunctor[M[_, _], N[_, _], F[_]] { 
  def fmap[A, B](f: A M B): F[A] N F[B]
} 
```

Scala 为二进制类型构造函数提供中缀类型表示法。换句话说，`A M B`与 相同`M[A, B]`。让我们在没有糖的情况下重写上面的代码。

```
trait GenericFunctor[M[_, _], N[_, _], F[_]] { 
  def fmap[A, B](f: M[A, B]): N[F[A], F[B]]
} 
```

同样，您问题中的`Category`定义可以重写为：

```
trait Category[F[_, _]] {
  def compose[A, B, C](f: F[B, C])(g: F[A, B]): F[A, C]
  def id[A]: F[A, A] 
} 
```

现在清楚了吗？

# django - 在 Django 中过滤 prefetch_related

> ID：10915319
> 
> 赞同：29
> 
> 时间：2012-06-06T13:35:32.507
> 
> 标签：django, django-1.4

有没有过滤预取对象的方法？我需要获取预取对象的 latest()，但是如果您使用 latest，prefetch_related 不起作用，因为查询已更改？

这里的例子可以满足我的需要，但我希望有一个更简单的解决方法......

[https://github.com/ionelmc/django-prefetch#example](https://github.com/ionelmc/django-prefetch#example)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-01-20T11:06:49.673

从 Django 1.7 开始，可以过滤预取的对象。请参阅[这个 SO 答案](https://stackoverflow.com/a/12974801/487598)和[Django 文档](https://docs.djangoproject.com/en/3.0/ref/models/querysets/#prefetch-related)。

 ~~* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T20:00:35.940

这是一个非常简单的方法，很难与那些应用程序相比，但希望你会发现它有用：

```
class Author(models.Model):
    name = models.CharField(max_length=100)

    def latest_book(self):
        return max(self.book_set.all(), key=lambda book: book.created)

authors = Author.objects.prefetch_related('book_set')
authors[0].latest_book() #  what you wanted 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-30T10:53:30.897

是的，可以通过这种方式完成：

```
authors=Author.objects.prefetch_related('book_set') 
```

如果您想通过 Author 模型中存在的属性（名称）进行过滤，您可以简单地通过编写来过滤它：

```
authors.filter(name='your_value') 
```

但是如果你想在 Books 模型上应用过滤器，你必须这样写：

```
authors.filter(book__created__gt='your_date') 
```

这将过滤所有创建日期（图书模块中的已创建属性）大于您的日期的图书。~~

# data-mining - 使用 Joaquim 的 SVM 光进行 3 折交叉验证

> ID：10915321
> 
> 赞同：0
> 
> 时间：2012-06-06T13:35:36.087
> 
> 标签：data-mining, classification, svm, document-classification

我需要使用 Joaquim 的 SVM 灯进行 3 折交叉验证。交叉验证和 SVM 对我来说是新事物，我不知道我是否做得对。到目前为止我做了什么？我将我的数据转换为我称为 fold1.txt fold2.txt fold3.txt 的 3 个文件，并在以下模型中使用了我的功能：

1 个特征数：1 个特征数：1 ...

我还用我的标记做了一个名为 words.txt 的文件，其中行数是我的特征数。我做对了吗？

所以，现在我必须做 3 折交叉验证，但我不知道如何用 Joaquim 的 SVM 灯来做。我不知道要让 svm light 学习和使用这三个文件进行分类，然后选择我要用作测试和火车的那些。我是否必须编写脚本或程序才能做到这一点？

感谢大家

蒂亚戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:20:14.807

我会假设您正在进行文本挖掘，因为您指的是 Thorsten Joachims。无论如何，这里有一组关于文本分类的教程视频，带有 x-validation：

[http://vancouverdata.blogspot.ca/2010/11/text-analytics-with-rapidminer-part-5.html](http://vancouverdata.blogspot.ca/2010/11/text-analytics-with-rapidminer-part-5.html)

# android - 需要帮助杀死启动事件，因此应用程序不会退出它

> ID：10915324
> 
> 赞同：0
> 
> 时间：2012-06-06T13:35:38.387
> 
> 标签：android, splash-screen

我创建了一个启动事件并将其设置为休眠 3 秒。一切正常，但是当您退出应用程序时，它会带您回到初始状态。有没有办法用我拥有的代码来杀死它，或者我需要以不同的方式编写它。

```
public class splash extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    Thread timer =  new Thread(){
        public void run(){
            try{
                sleep(3000);
            } catch (InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent openApp = new Intent("com.iqmobile.chris.IQMOBILEACTIVITY");
                startActivity(openApp);
            }
        }
    };
    timer.start();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:36:55.347

`splash.this.finish();`在你开始之后`startActivity(openApp);`

```
 Intent openApp = new Intent("com.iqmobile.chris.IQMOBILEACTIVITY");
  startActivity(openApp);

  splash.this.finish(); 
```

**第二种解决方案**

在 AndroidManifest 文件中

```
<activity android:noHistory="true"
            android:name=".splash" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:36:49.250

添加完成（）；在代码中：

```
Intent openApp = new Intent("com.iqmobile.chris.IQMOBILEACTIVITY");
                startActivity(openApp);
               splash.this.finsh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:42:04.687

```
mSplashThread = new Thread() {
        @Override
        public void run() {
            try {
                synchronized (this) {
                    wait(3000);
                }
            } catch (InterruptedException ex) {
            }

            finish();
            Intent intent = new Intent();
            intent.setClass(FirstActivity.this,
                    SecondActivity.class);
            startActivity(intent);
        }
    };

    mSplashThread.start();
} 
```

# asp.net-mvc - 在 Visual Studio 2010 中使用生产配置自动部署网站

> ID：10915325
> 
> 赞同：0
> 
> 时间：2012-06-06T13:35:45.800
> 
> 标签：asp.net-mvc, model-view-controller, c#-4.0

我有一个关于 Visual Studio 2010 发布功能的问题，该功能在您创建网站（MVC 框架）以将您的开发更改推送到实时站点后使用。

直到几周前我才使用 MVC，我注意到在推送网站代码之前，我必须更改代码中包含 localhost 的所有位置，并将其替换为我要推送的域名。然后，如果我想在我的本地机器上调试任何东西，我必须将所有东西都从域名恢复到 localhost。

**问：有没有办法不改变前后网址？**

基本上，我认为归结为需要一个软件包或某事知道使用生产配置部署网站。

也许有一个本地分支和一个现场分支？这涉及始终合并文件。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:41:19.693

我不确定它是否适用于 MVC，但我们用于 Web 服务开发的一种方法是使用[web.config 转换](http://blogs.msdn.com/b/webdevtools/archive/2009/05/04/web-deployment-web-config-transformation.aspx)。

这意味着正常的开发内容都在`Web.config`，我们根据部署环境`Web.staging.config`和`Web.production.config`.

# sharepoint - Two Web Parts connection doesn't work when set programmatically

> ID：10915326
> 
> 赞同：0
> 
> 时间：2012-06-06T13:35:47.287
> 
> 标签：sharepoint, web-parts

I've a SharePoint 2010 page with a list. The list has several items and a field named "Department" and must filter items based on user's department value retrieved from user profile.

To do this I've created a feature which upon activation adds UserContextFilterWebPart to the page and makes connection between UserContextFilterWebPart and XsltListViewWebPart. After the feature is activated I can see in the page design mode that connection is established but the list gets empty. Then I open web part's menu, choose "Connections" then "Send Filter Values To" and click "List1". When dialog appears I do nothing but only click "Finish" button and it begins to work fine. Can anybody please explain me why the connection begins to work only if I do that manual extra action? What must be done to fix?

I tried different way when List.Views[0].Query property is set to appropriate CAML query and it also works fine. But I'm told that it's not a good approach because of performance and parallel tasks issues. Is it really bad course of action? Below is the code for 2 different approaches. Thanks in advance!

1-s variant with UserContextFilterWebPart:

```
SPSite Site = new SPSite(URL);
SPWeb Web = Site.OpenWeb();
SPLimitedWebPartManager WPM = Web.GetLimitedWebPartManager(URL, PersonalizationScope.Shared);
XsltListViewWebPart List = WPM.WebParts[0] as XsltListViewWebPart;
UserContextFilterWebPart UCFWP = new UserContextFilterWebPart();
UCFWP.Title = "Current User Filter";
UCFWP.AllowEdit = true;
UCFWP.FilterName = "Current User";
UCFWP.SendEmptyWhenNoValues = true;
UCFWP.AllowClose = true;
UCFWP.ExportMode = WebPartExportMode.All;
UCFWP.AllowConnect = true;
UCFWP.AllowHide = true;
UCFWP.ProfilePropertyName = "Department";
UCFWP.ValueKind = UserContextFilterValueKind.ProfileValue;
UCFWP.ZoneID = "Main";
WPM.AddWebPart(UCFWP, UCFWP.ZoneID, 1);
WPM.SaveChanges(UCFWP);
ConsumerConnectionPointCollection consumerConnections = WPM.GetConsumerConnectionPoints(List);
ConsumerConnectionPoint addConsumerConnPoint = consumerConnections["DFWP Filter Consumer ID"];
ProviderConnectionPointCollection providerConnections = WPM.GetProviderConnectionPoints(UCFWP);
ProviderConnectionPoint addProviderConnPoint = providerConnections["ITransformableFilterValues"];
TransformableFilterValuesToParametersTransformer trans = new TransformableFilterValuesToParametersTransformer();
trans.ConsumerFieldNames = new string[] { "Department" };
trans.ProviderFieldNames = new string[] { "Department" };
SPWebPartConnection newConnection = WPM.SPConnectWebParts(UCFWP, addProviderConnPoint, List, addConsumerConnPoint, trans);
WPM.SPWebPartConnections.Add(newConnection); 
```

2-nd variant with CAML query (intended to be used not in a feature but in a web part):

```
SPSite Site = new SPSite(URL);
SPWeb Web = Site.OpenWeb();
SPLimitedWebPartManager WPM = Web.GetLimitedWebPartManager(URL, PersonalizationScope.Shared);
XsltListViewWebPart List = WPM.WebParts[0] as XsltListViewWebPart;
SPUser CurrentUser = Web.CurrentUser;
SPServiceContext context = SPServiceContext.GetContext(Site);
UserProfileManager upm = new UserProfileManager(context, false);
UserProfile up = upm.GetUserProfile(CurrentUser.RawSid);
String UserDepartment = up["Department"].Value.ToString();
SPView ListView = Web.Lists["List1"].Views[0];
ListView.Query = "<Where><Eq><FieldRef Name='Department' /><Value Type='Text'>" + UserDepartment + "</Value></Eq></Where>";
ListView.Update(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:36:08.017

我在连接两个 Web 部件时遇到了类似的问题。我在这里找到了答案：http: [//kvdlinden.blogspot.dk/2011/02/programmatically-connect-two.html](http://kvdlinden.blogspot.dk/2011/02/programmatically-connect-two.html)

请注意，该帖子描述了如何使用两个 XsltListViewWebParts 来执行此操作。为了在您的情况下使用它，我建议您：

1.  手动创建连接，
2.  使用 PowerShell 获取页面的 SPLimitedWebPartManager，
3.  使用管理器遍历 manager.SPWebPartConnections，
4.  并找到您的连接的 ProviderConnectionPointID，
5.  在帖子中显示的代码中使用该 ID。
6.  还记得设置转换器 - 您也可以从 SPWebPartConnections 中找到它。

下次您激活您的功能时，您应该有一个与您手动创建的连接相同的连接。

# css - CSS线性渐变垂直定位

> ID：10915328
> 
> 赞同：0
> 
> 时间：2012-06-06T13:36:01.687
> 
> 标签：css

这是工作示例：

[http://jsfiddle.net/nnrgu/1/](http://jsfiddle.net/nnrgu/1/)

在这里我更改为 background-position:0px -70px 看看发生了什么：

[http://jsfiddle.net/nnrgu/2/](http://jsfiddle.net/nnrgu/2/)

线性梯度，它消失了！

我做错了还是应该以这种方式工作？如何将线性渐变与背景图像**一起**移动或保持线性渐变**不可移动**？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:39:16.237

```
background-position: 0 -70px, 0 0; 
```

成功了。由于您声明多个背景图像以逗号分隔，因此您可以为每个图像声明一个位置，也以逗号分隔。

[http://jsfiddle.net/nnrgu/3/](http://jsfiddle.net/nnrgu/3/)

我什至更喜欢简写：

```
background: <color> image1 position1 repeat1 attachment1, image2 position2 repeat2 attachment2, ... ; 
```

这样就可以清楚地知道哪个位置/重复属于哪个字符较少的图像。

[旁注：当你有`0`as 值时，只需省略单位。]

# java - Web service that works as REST and SOAP using Java/Jersey

> ID：10915332
> 
> 赞同：5
> 
> 时间：2012-06-06T13:36:15.333
> 
> 标签：java, rest, soap, jersey

Can I have the same service having simultaneously both REST and SOAP interfaces? I currently have a REST service implemented in Java using EJB and Jersey:

```
import javax.ejb.EJB;
import javax.ejb.Stateless;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;  

@Stateless
@Path("test")
public class TestExternalService {

    @EJB
    private com.test.ejb.db.TestService testService;

    @GET
    @Path("/status")
    @Produces("text/*")
    public String status() {
        return "ok";
    }
} 
```

How can I make changes in my class to also implement a SOAP interface?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:06:19.313

Basically, `Jersey` is [`JAX-RS`](http://jcp.org/en/jsr/detail?id=311) implementation, so you cannot have SOAP web-services here. You could take [Apache CXF](http://cxf.apache.org/), which is implementation for both `JAX-RS` and [`JAX-WS`](http://jcp.org/en/jsr/detail?id=224) and you would be able to combine your web-services in both architectural styles.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:54:51.893

这是一个将实现公开为rest和soap web服务的解决方案。类似于 zack 在评论中建议的内容。如果您已经拥有上面粘贴的支持 jax-rs 的服务，则可能需要进行一些重构。

解决方案是拥有两组接口和实现。一个支持 jax-rs 和一个 jax-ws。您仍然可以在 ejb 中完成处理。

例子，

不要用 jax-rs 注释你的 ejb（比如 EService）。

有一个接口 X 和 Ximpl 类来支持 restful 调用。这将支持 jax-rs，所以基本上是用 jax-rs 注释的。当然，这仍然可以使用球衣。Ximpl 将引用 EJB EService 并将处理委托给它。

有一个接口 Y 和 YImpl 来支持基于肥皂的调用。这将支持 jax-ws，因此将使用 jax-ws 进行注释。Yimpl 将引用 EJB EService 并将处理委托给它。

如果您有一个 Web 部署描述符，请在您的 Web 部署描述符中定义不同的 servlet 和用于 rest 和 soap 的映射。

# iphone - 调用相同的视图控制器但需要不同的操作

> ID：10915334
> 
> 赞同：2
> 
> 时间：2012-06-06T13:36:24.737
> 
> 标签：iphone, uitableview, uiviewcontroller, xcode4.2, didselectrowatindexpath

我有一个视图控制器，其中包含一个 UITableView 中的类别列表。我将这个视图控制器推送到其他三个视图控制器中。所以当我不想发生这种情况时，tableView 的相同功能会被应用。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 
self.index = indexPath;
[retrieveName getItemName:[self.arrayForCategories objectAtIndex:indexPath.row]];
[self dismissModalViewControllerAnimated:YES];
[tableView reloadData];
} 
```

此方法仅在从一个视图控制器调用时才有效。知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:43:14.053

在您推送的视图控制器中放置一个属性，该属性确定它在选择时应该做什么。让推动它的视图控制器设置属性。在您显示的方法开始时检查属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:18:33.233

您可以将视图控制器子类化，并将该方法包含在子类中。然后，您只需将子类用于您想要该功能的视图控制器。

或者，您可以有一个 BOOL 属性来确定表视图是否应响应选择，并在推送视图控制器之前设置该属性（如果您使用的是故事板，请在 prepareForSegue:sender: 中设置它）。

# facebook - Is Captcha useless using a "Facebook Sign in" registering process?

> ID：10915345
> 
> 赞同：-2
> 
> 时间：2012-06-06T13:36:55.617
> 
> 标签：facebook, captcha, spam

Does the Facebook Sign In process prevent some potential spamming bots ?
Should I put a captcha before allowing a Facebook Sign In process?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:42:43.093

从理论上讲，您可以破解任何验证码。但随着验证码变得越来越复杂，破解它变得越来越难。它将防止无法破解验证码的人制作垃圾邮件，我相当肯定像 Facebook 这样的公司确实有很好的验证码。

# android - 我可以将哪些广播接收器添加到我的清单中？

> ID：10915354
> 
> 赞同：0
> 
> 时间：2012-06-06T13:37:17.750
> 
> 标签：android

我想在设备连接或断开互联网以执行更新时收到通知。我已将此代码放在清单文件中：

```
 <receiver android:name=".Conectivity" android:enabled="true" android:exported="true">
            <intent-filter>
                  <action android:name="android.net.conn.CONNECTIVITY_CHANGE"></action>

            </intent-filter> 
```

这是我的连接课：

```
package com.funny.pack;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class Conectivity extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {

        Log.w("DHA", "Ceva e diferit la conectivitate");

    }

} 
```

当设备连接或断开互联网连接时，我不会收到通知，我认为这个广播接收器必须只能从代码中实现，对吗？是否有可以从清单文件实现的广播接收器列表，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:46:45.377

关注片段将帮助您。

**创建一个将处理连接状态通知的 BroadcastReceiver**

```
public class MainActivity extends Activity {
    // rest of the code in the Activity are committed for clarity
        private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
                String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
                boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);
                NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
                NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

                // do application-specific task(s) based on the current network state, such
                // as enabling queuing of HTTP requests when currentNetworkInfo is connected etc.
            }
        };

     registerReceiver(mConnReceiver,new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));

    } 
```

包括

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />`

在清单中

# ant - 如何（通过使用 ANT）将 .properties 文件转换为常量作为代码文件？

> ID：10915359
> 
> 赞同：0
> 
> 时间：2012-06-06T13:37:38.143
> 
> 标签：ant, properties

我想使用 ANT build 将`.properties`文件转换为文本文件（代码）。

输入文件`my.properties`：

```
FOO=foo bar
BAR=bar bar foo 
```

所需的输出文件`Constants.as`：

```
package foo.bar {
    public final class Constants {
        public static const FOO:String = "FOO";
        public static const BAR:String = "BAR";
    }
} 
```

*注意：ActionScript 不能使用像 Java 这样的属性文件，所以我需要将此翻译用作预构建任务。我的属性文件是本地化的，我希望将键作为常量。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:41:27.403

您可以通过在[concat](http://ant.apache.org/manual/Tasks/concat.html)任务中包含[过滤器链来做到这一点。](http://ant.apache.org/manual/Types/filterchain.html)

```
 <concat destfile="Constants.as">

            <header filtering="false">
package foo.bar {
    public final class Constants {
</header>
            <footer filtering="false">
    }
}
</footer>

            <fileset file="my.properties"/>
            <filterchain>
                <tokenfilter>
                    <ignoreblank/>
                    <trim/>
                    <replaceregex pattern="(.*)=(.*)" replace="        public static const \1:String = &#34;\2&#34;;"/>
                </tokenfilter>
            </filterchain>

        </concat> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:53:02.980

我已经设法`scriptdef`在*JavaScript*中破解了它。

**任何想法如何做得更好？**

```
<scriptdef name="localization-regen" language="javascript">
    <attribute name="input.file.path"/>
    <attribute name="output.file.category"/>
    <attribute name="output.file.package"/>
    <attribute name="output.file.dir"/>
    <attribute name="output.property"/>
    <![CDATA[

        importPackage(java.io);

        inputFilePath = attributes.get("input.file.path");
        outputFileCategory = attributes.get("output.file.category");
        outputFilePackage = attributes.get("output.file.package");
        outputFileDir = attributes.get("output.file.dir");

        outputFileClass = "LocalizationKeys" + outputFileCategory.substring(0, 1).toUpperCase() + outputFileCategory.substring(1, outputFileCategory.length());

        inputFile = new File(inputFilePath);

        inputStream = new BufferedReader(new InputStreamReader(new FileInputStream(inputFile)));

        outputLines = "";

        for(line = inputStream.readLine(); line != null; line = inputStream.readLine())
        {
            vars = line.split("=");
            c = vars[0];
            if(c.substring(0, 1) == "#") continue;
            outputLines += "\t\tpublic static const " + c + ":String = \"" + c + "\";\n";
        }

        output = "";
        output  = "package " + outputFilePackage + "\n"
                + "{\n"
                + "\tpublic final class " + outputFileClass + "\n"
                + "\t{\n"
                + outputLines
                + "\t}\n"
                + "}";

        outputFilePath = outputFileDir + "/" + outputFileClass+ ".as";

        out = new BufferedWriter(new FileWriter(outputFilePath));
        out.write(output, 0, output.length);
        out.flush();
        out.close();
    ]]>
</scriptdef> 
```

# joomla - enabling joomla sef redirects to absolute resource location

> ID：10915365
> 
> 赞同：0
> 
> 时间：2012-06-06T13:38:03.783
> 
> 标签：joomla, sef

I enabled sef in my joomla global configuration, but when i viewed my site it is not displayed and redirects to it absolute address. so now the absolute path is displayed instead of the domain name

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:58:59.053

.htaccess 文件是否正确命名并出现在您的 Joomla 根目录中？

# google-maps - Google API v3 中的 map.addOverlay

> ID：10915369
> 
> 赞同：6
> 
> 时间：2012-06-06T13:38:21.680
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-maps-api-2

这是将添加叠加更改为 v3 的正确方法吗？在 V3 中，addOverlay 已被弃用......并被 setMap 取代？

```
 if (setContainerVisible == 1) {
        mapElements[lMapElementIndex]['visible'] = 1;
        //map.addOverlay(marker); v2
        marker.setMap(marker); // v3 ??
    } 
```

有关更多信息，请参阅整个源[http://pastebin.com/w1nm0W75](http://pastebin.com/w1nm0W75)（行：507）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T14:10:37.173

不完全是，实际上有很多方法可以做到这一点。最简单的，你可能正在寻找的是

```
marker.setMap(map); 
```

您还可以在 markerOptions 中初始化标记变量时初始化它应该绑定到的地图。

看看这个文档，它描述了在 V3 中添加标记和其他覆盖的方法和方法：[https ://developers.google.com/maps/documentation/javascript/overlays#AddingOverlays](https://developers.google.com/maps/documentation/javascript/overlays#AddingOverlays)

# java - Running Threads indefinitely in Java WebApplication where mainthread depends on Session

> ID：10915371
> 
> 赞同：0
> 
> 时间：2012-06-06T13:38:28.187
> 
> 标签：java, multithreading, session, wicket

I'd like to run a Thread which sends Request like every 15 minutes checking for updates, waits for response and process the data recieving in the response. I need to controle this thread via web frontend, to start / stop and monitor it. The data which needs to be processed will be validated and stored in local datastore via hibernate. The main Thread resides necessarily in session so obviously the lifetime of the subthread may live through session lifetime. Im not sure how stable it is to rely on this, as it is required that these requests being send and check for updates indefinitely and reliable.

Im not sure if the session which holds the threads keeps alive just because the thread is running. What would be best practice / best design choice ?

Application is running with jre1.6 tomcat 7 wicket1.5.6 hibernate3.6 spring 3.1

# java - 创建一个类以使用 jdbc 连接到任何数据库

> ID：10915375
> 
> 赞同：4
> 
> 时间：2012-06-06T13:38:47.690
> 
> 标签：java, jdbc

我正在尝试设计一个 Java swing 应用程序。我想试验并使用一种 MVC 类型的架构，其中我的 UI 与实际逻辑分离以访问数据并连接到数据库。我决定我需要创建一个自定义类，其中包含连接到数据库的所有逻辑，然后在我的操作事件中为任何特定的表单和按钮简单地调用该类的方法。这样我可以切换数据库，我需要做的（如果我有一个包含许多表单的大型代码库）就是更改 JDBC 连接字符串以连接到 oracle 而不是 MySQL。到目前为止，我有连接到数据库的代码，但我正试图弄清楚如何使这个类成为一个类。

```
try
     {
         Class.forName("com.mysql.jdbc.Driver");
         Connection con=(Connection)DriverManager.getConnection("jdbc:mysql://localhost:3306/prototypeeop","root","triala");
         Statement stmt=con.createStatement();
         ResultSet rs=stmt.executeQuery(sql); 
```

然后，我将从连接类的成员函数返回结果集，以进行处理并显示在屏幕上。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-06T14:47:39.047

只需创建一个单独的类并委托给他获取与数据库的连接：

```
public class ConnectionManager {
    private static String url = "jdbc:mysql://localhost:3306/prototypeeop";    
    private static String driverName = "com.mysql.jdbc.Driver";   
    private static String username = "root";   
    private static String password = "triala";
    private static Connection con;
    private static String urlstring;

    public static Connection getConnection() {
        try {
            Class.forName(driverName);
            try {
                con = DriverManager.getConnection(urlstring, username, password);
            } catch (SQLException ex) {
                // log an exception. fro example:
                System.out.println("Failed to create the database connection."); 
            }
        } catch (ClassNotFoundException ex) {
            // log an exception. for example:
            System.out.println("Driver not found."); 
        }
        return con;
    }
} 
```

然后在代码中获取连接，如下所示：

```
private Connection con = null;
private Statement stmt = null;
private ResultSet rs = null;

con = ConnectionManager.getConnection();
stmt = con.createStatement();
rs = stmt.executeQuery(sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T10:06:50.153

您可以尝试[MySQL JDBC Utilities](https://code.google.com/p/mysql-jdbc-utilities/) API for MySQL 连接。

这个 API 提供了非常酷的功能，也满足你的要求！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T03:29:34.663

有两种方法可以做到

1.  覆盖 Spring 的[AbstractRoutingDataSource](http://docs.spring.io/spring/docs/2.5.6/api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html)类的 determineCurrentLookupKey() 方法。

2.  您可以创建一个基于系统返回 Connection 的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-07T22:14:47.063

您可以使用像[Hibernate](http://hibernate.org/orm/)这样更高级的东西，或者如果您的数据库使用很简单，那么您可以尝试[Commons DbUtils](https://commons.apache.org/proper/commons-dbutils/)

### 仪式连接代码

```
String db = "jdbc:h2:mem:;INIT=runscript from 'classpath:/prototypeeop.sql'"; 
//for H2 in-memory database:
Connection DriverManager.getConnection(db); 
```

**请记住Commons DbUtils**中的核心类和接口是`QueryRunner`和`ResultSetHandler`.

# r - ifelse 在 r 中的条件

> ID：10915378
> 
> 赞同：2
> 
> 时间：2012-06-06T13:38:55.227
> 
> 标签：r, loops, if-statement

我有以下类型的数据

```
ex1 <- data.frame (A = 1:6, B = c(1,2,3,5,1,1), qit = c(1,2,1,2,5,1))
ex1
 A B qit
1 1 1   1
2 2 2   2
3 3 3   1
4 4 5   2
5 5 1   5
6 6 1   1 
```

我尝试了以下 ifelse 循环，但没有得到我需要的..

```
 ifelse (ex1[1] == ex1[2] & ex1$qit, 1,
      ifelse ( ex1[1]== ex1$qit || ex1[2]== ex1$qit, 0.5,
           NA)) 
```

条件是：

```
(1) If A = B = qit , then output 1 (else) 

(2) Either A = qit or B = qit then output = 0.5 (else) 

(3) If none of above conditions hold output NA 
```

我认为我在使用 & 时遇到了问题，但我尝试了 ex1[1] == ex1[2] == ex1$qit 给出了错误。

预期输出：

```
ex1$out <- c(1, 1, NA, NA, 0.5, 0.5) 
 A B qit out
1 1 1   1 1.0
2 2 2   2 1.0
3 3 3   1  NA
4 4 5   2  NA
5 5 1   5 0.5
6 6 1   1 0.5 
```

解决方案说明：

```
Soultion for the first row:
A = B = qit all conditions hold true so the output 1

For second row 
A = B = qit all conditions hold true so the output 1

For third row 
A = B but not equal to qit  output NA

For fourth row
A is not equal to B nor equal to qit output NA

Fifth row 
A = qit (however A = B = qit doesnot hold true) so output 0.5

Sixth row 
B = qit (however A = B = qit doesnot hold true) so output 0.5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T13:49:25.663

```
ifelse (ex1[1] == ex1[2] & ex1[1] == ex1$qit, 1,
        ifelse ( ex1[1] == ex1$qit | ex1[2] == ex1$qit, 0.5,
                 NA)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T14:07:22.880

您需要对第一个子句进行分组，因为在比较运算符（如`==`. 所以第一个子句应该是`A == B & B == qit`.

整个事情可以按如下方式完成：

```
> with(ex1, ifelse(A == B & B == qit, 1, ifelse(A == qit | B == qit, 0.5, NA)))
[1] 1.0 1.0  NA  NA 0.5 0.5 
```

我`with()`用来避免所有混乱的地方`ex1$`。

要将结果添加为新列`out`，请使用以下两个选项之一：

```
ex1 <- transform(ex1, out = ifelse(A == B & B == qit, 1, 
                                   ifelse(A == qit | B == qit, 0.5, NA)))

ex1 <- within(ex1, out <- ifelse(A == B & B == qit, 1, 
                                 ifelse(A == qit | B == qit, 0.5, NA))) 
```

# version-control - 是否有任何基于浏览器的版本控制客户端？

> ID：10915380
> 
> 赞同：0
> 
> 时间：2012-06-06T13:39:03.957
> 
> 标签：version-control, web, browser

在我使用的网络上，我无法安装任何第三方应用程序。只有 MS Office 和网络浏览器。

但是，我想介绍一些我正在开发的 Excel 电子表格的版本控制。

正如我所说，我无法安装任何其他应用程序，因此 SVN/Git 客户端是不可能的。

有人知道客户端在 Web 浏览器中运行的 VCS 吗？我需要添加文件、提交新版本、比较增量等。

我不只是在寻找基于 Web 的只读浏览器——我需要通过浏览器的完整功能。

我欢迎你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:42:12.347

Google Docs/Drive 具有版本控制、评论、分享等功能，或许可以做你需要的一切。

# .net - Linq 按合并列排序

> ID：10915383
> 
> 赞同：-1
> 
> 时间：2012-06-06T13:39:19.767
> 
> 标签：.net, linq, sql-order-by

我需要订购和分页 Linq 查询，但应该通过订购这样的自定义列来进行：如果我的实体 Person 是员工，它的名称来自表 Employee，如果不是，它将来自表 Person，这些不同。为此，我有一个返回其名称的字段，应用此规则，因此我需要按名称排序，然后分页查询。

问题：这样做，需要加载所有表数据来执行此排序和分页，例如 100.000 行以获得 10。我想在 DB 中进行此排序工作，然后在 EF 中加载我的 10 行。

有什么方法可以在我的查询中使用“IF”子句实现排序，将工作留给数据库并仅加载我的 10 行页面？

也许是这样的：

`persons.OrderBy(p => (p.Employee != null)? p.Employee.Name : p.Name).Take(10);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-11T11:03:11.743

你可以用这个

```
persons.Select(p => new { Emp = (p.Employee!=null) ? p.Employee.Name : p.Name})
       .OrderBy(p => p.Emp)
       .Take(10); 
```

# jasper-reports - 如何在我的碧玉报告中显示第 x 页，共 y 页

> ID：10915384
> 
> 赞同：2
> 
> 时间：2012-06-06T13:39:21.140
> 
> 标签：jasper-reports

我正在使用 jasperreport-4.5.0 生成报告。它正在正确生成报告。但是如果我的数据库中有大量数据，那么报告会显示在不同的页面中。所以我的要求是如果我的报告有 12 页，那么我想要显示第 1 页（共 12 页）、第 2 页（共 12 页）、第 3 页（共 12 页）……就像在我的页眉带中一样。我该如何做到这一点，任何人都可以对此给出一个想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-06T14:01:53.810

您可以使用 evaluationTime="Report" 属性来实现此目的。

考虑以下示例，我们首先打印“PAGE”，然后使用默认的 evalutaionTime 属性打印页码。这将打印当前页码，然后我们打印 OF，最后打印评估时间设置为“报告”的页码，这将打印总页数。

```
 <band height="20">
        <elementGroup>
            <textField>
                <reportElement positionType="FixRelativeToBottom" x="709" y="0" width="53" height="20"/>
                <textElement verticalAlignment="Top">
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA["PAGE"]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement positionType="FixRelativeToBottom" x="762" y="0" width="23" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement positionType="FixRelativeToBottom" x="785" y="0" width="29" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA["OF"]]></textFieldExpression>
            </textField>

            <textField evaluationTime="Report">
                <reportElement positionType="FixRelativeToBottom" x="814" y="0" width="26" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>

        </elementGroup>
    </band> 
```

# jquery - AJAX 多表单帖子

> ID：10915385
> 
> 赞同：1
> 
> 时间：2012-06-06T13:39:24.423
> 
> 标签：jquery, ajax, forms, submit

我的页面顶部有一个基本的 AJAX 表单提交功能（从教程中偷来的，因为我不能从头开始编写这些东西）。在我的页面正文中，我有一堆带有隐藏输入的表单，这些表单的值对应于我数据库中的用户 ID。

这个想法是，当您提交表单时，隐藏的值会 POST'd 到我的 PHP 页面，它会从我的 MySQL 数据库中删除具有该 ID 的用户。这一切都很简单，可能有一种更有效的方法来做到这一点，但这是我能想到的唯一方法。

无论如何，问题是我的 AJAX 函数只适用于我页面中的第一个表单。当我提交表单时，用户将从我的数据库中删除，页面刷新并且该特定表单消失。但是，如果您单击顶部表单下方的任何表单，则不会发生任何事情。这是我的 jQuery 函数：

```
<script type="text/javascript">

$(document).ready(function(){
    $("#myform").validate({
        debug: false,
        rules: {
            group: {required: true}, 
        },
        messages: {
            group: {required: " Field required.", loginRegex: " Invalid character."},
        },
        submitHandler: function(form) {
            $.post('process_delete_participant.php', $("#myform").serialize(), function(data) {
                $('#results').html(data);
            });
        }
    });
});

</script> 
```

这是我页面正文中的内容：

```
<?php

$query = mysql_query('SELECT * FROM `Participant`');
    if (!$query)
{ 
    die('Query failure: '.mysql_error()); 
}

while($rows = mysql_fetch_array($query))
{

$fname = $rows['firstName'];
$sname = $rows['secondName'];
$id = $rows['idParticipant'];

echo "<form name='myform$id' id='myform$id' action='' method='POST'> ";
echo "<input type='hidden' name='idParticipant' id='$id' value='$id' />";
echo "$fname ";
echo "$sname ";
echo "<input type='submit' name='submit$id' id='submit$id' value='Delete' /> ";
echo "</form>";
echo "<br><br>";

}

?> 
```

因此，其中一种形式的示例可能如下所示：

```
<form name='myform61' id='myform61' action='' method='POST'> 
<input type='hidden' name='idParticipant' id='61' value='61' />John Smith
<input type='submit' name='submit61' id='submit61' value='Delete' /> 
</form> 
```

我可以想到该函数仅适用于最顶层表单的几个原因，但我不知道在函数的语法中编辑什么来解决问题。有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:43:45.443

示例中的选择器显式地按 ID。您可以尝试 $("[id^=myform]") 因为这匹配 id 的开头。

此外，用 $(this) 替换对 "$("#myform")" 的第二次调用以确保正确的上下文。

编辑（添加）：

```
$("[id^=myform]").validate({
        debug: false,
        rules: {
            group: {required: true}, 
        },
        messages: {
            group: {required: " Field required.", loginRegex: " Invalid character."},
        },
        submitHandler: function(form) {
            $.post('process_delete_participant.php', $(this).serialize(), function(data) {
                $('#results').html(data);
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:45:05.303

```
$("#myform").validate({ 
```

这只会对 ID 为“myform”的元素设置验证。

最简单的方法是在所有表单上调用它

```
$('form').validate({ 
```

或在名称以 myform 开头的所有表单上

```
$('form[id^=myform]').validate({ 
```

或在具有特定类别的所有表格上

```
$('form.validate').validate({ 
```

# modal-dialog - 如何创建 javafx 2.0 应用程序 MDI

> ID：10915388
> 
> 赞同：0
> 
> 时间：2012-06-06T13:39:48.823
> 
> 标签：modal-dialog, javafx, mdi

如何专门在 JavaFx 2.0 中实现某种内部框架？

我的尝试是这样的..

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class Main extends Application {

    ConnectDb connection;

    public static void main(String[] args) {
        Application.launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        final Stage stage1 = new Stage();
        StackPane pane = new StackPane();
        Button btn = new Button("Click Me");
        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                connection = new ConnectDb();
                try {
                    connection.start(stage1);
                } catch (Exception e) {
                    e.printStackTrace(); 
                }
                System.out.println("Fire some thing..");
            }
        });
        pane.getChildren().add(btn);
        stage.setScene(new Scene(pane ,200, 300));
        stage.show();
    }
} 
```

ConnectDb.java

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class ConnectDb extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        StackPane pane = new StackPane();
        Button btn = new Button("Click On Button which is me");
        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                System.out.println("Something here..");
            }
        });
        pane.getChildren().add(btn);
        stage.setScene(new Scene(pane ,200, 300));
        stage.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T15:08:48.090

首先，对于您的方法，您实际上不需要（因此不应该）从 Application 扩展 ConnectDb，因为您只需使用 start 方法来创建新阶段。您只需要一个应用程序类（在您的情况下为 Main）。您也可以在第一个事件处理程序中创建新的舞台/场景。

其次，JavaFX 2.1 中没有真正的 MDI 支持。现在，您可以只拥有多个阶段（相当于拥有多个窗口/框架）。但是您不能在桌面窗格中拥有类似内部框架的东西。

我想你可以采取以下措施：

*   只需使用多个阶段（窗口），其缺点是它们会毫无灵感地漂浮在您的桌面上
*   使用 Swing 作为容器（使用 JDesktopPane 和 JInternalFrame）并集成 JavaFX（这里有一个很好的[How-To](http://java.dzone.com/articles/integrating-javafx-20-swing)）
*   实现您自己的模拟 MDI 行为的框架
*   查找提供 MDI 行为的框架
*   等待 JavaFX 的未来版本，它有望提供 MDI 支持（据我所知，有一个更改请求待定......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T16:41:14.880

1.  创建父 AncorPane。
2.  向其中添加几个子 AnchorPanes。它们将用作内部框架。为这些添加不同的内容。
3.  将子 AnchorPanes 设置为不可见。
4.  添加按钮以隐藏、调整大小或关闭子 AnchorPanes。需要时，调用函数将所有子 AnchorPanes 设置为不可见，除了一个。

# python - 按字典值对字典列表进行排序

> ID：10915391
> 
> 赞同：6
> 
> 时间：2012-06-06T13:40:15.880
> 
> 标签：python, list, sorting, dictionary

我有以下字典列表

```
a = [{23:100}, {3:103}, {2:102}, {36:103}, {43:123}] 
```

我怎样才能对其进行排序以获得：

```
a = [{43:123}, {3:103}, {36:103}, {2:102}, {23:100}] 
```

我的意思是，按其字典的值按降序对列表进行排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T13:46:25.537

除了brandizzi的回答之外，您还可以选择：

```
sorted(a, key=dict.values, reverse=True) 
```

几乎相同的东西，但可能更惯用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T13:45:39.373

```
>>> sorted(a, key=lambda i: i.values()[0], reverse=True)
[{43: 123}, {3: 103}, {36: 103}, {2: 102}, {23: 100}] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:44:52.657

您可以将[`key`](http://wiki.python.org/moin/HowTo/Sorting#Key_Functions)参数传递给该`list.sort()`方法，因此将在返回值的函数中进行比较`key`：

```
>>> a = [{23:100}, {3:103}, {2:102}, {36:103}, {43:123}]
>>> a.sort(key=lambda d: d.values()[0], reversed=True)
>>> a
[{23: 100}, {2: 102}, {3: 103}, {36: 103}, {43: 123}] 
```

在这种情况下，键是一个函数，它接收一个字典`d`并用`.values()`. 由于只有一个值，我们从返回的列表中获取这个唯一值。然后，该`list.sort()`方法将在排序时比较这些返回值，而不是字典本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-14T17:03:12.340

在 python 3 中，其他答案不再有效，因为[`dict.values()`](https://docs.python.org/3/library/stdtypes.html#dict.values)现在返回一个 dict 视图对象而不是一个列表。要从视图对象中提取值，我们可以使用[`iter`](https://docs.python.org/3/library/functions.html#iter)和的组合[`next`](https://docs.python.org/3/library/functions.html#next)：

```
a.sort(key=lambda dic: next(iter(dic.values())), reverse=True) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T13:53:33.527

我宁愿使用（或至少记住）`.itervalues()`

```
In [25]: sorted(a, key=lambda x: next(x.itervalues()), reverse=True)
Out[25]: [{43: 123}, {36: 103}, {2: 102}, {23: 100}, {3: 103}] 
```

# android - 将 AirPlay 与默认的 Android 媒体播放器集成以流式传输受保护的电影

> ID：10915399
> 
> 赞同：3
> 
> 时间：2012-06-06T13:41:11.823
> 
> 标签：android, media-player, drm, airplay

我开发了一个 Android 应用程序，它使用默认的 Android MediaPlayer 播放受 WideVine 保护的电影。现在需要将 AirPlay 集成到应用程序中，以便用户可以在 AppleTV 上观看视频。我进行了很多搜索，但似乎通过 airplay 流式传输受保护的电影并不是直接的业务。如果有人能指出我正确的方向，我将不胜感激。

法鲁克-

# .net - 使用实体框架进行频繁保存

> ID：10915400
> 
> 赞同：6
> 
> 时间：2012-06-06T13:41:16.153
> 
> 标签：.net, entity-framework

使用 Entity Framework 4.3.1 数据库首先，什么是频繁提交/保存对象更改到数据库的好方法？在下面，我想在 quickbooks 调用后立即保存发票，而不是冒险等待所有发票被过帐。但是，我不能在循环中每次都调用 SaveChanges，它会抛出异常。

在每个对象上都有一个 .Save() 方法会很方便，也许有一个好方法可以做到这一点？

```
var unpostedInvoices = entities.GetUnpostedInvoices();
foreach (Invoice invoice in unpostedInvoices)
{
    // this takes a long time
    var invoiceDto = quickbooks.PostInvoice(invoice);

    invoice.Posted = true;
    invoice.TransactionId = invoiceDto.TransactionId;

    // I'd like to save here rather than after the foreach loop, but this will fail
    //entities.SaveChanges();
}

// this works, but I don't want to risk waiting this long to save
entities.SaveChanges(); 
```

这是在循环中调用 SaveChanges() 时抛出的异常。

```
New transaction is not allowed because there are other threads running in the session.

at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
at System.Data.SqlClient.TdsParser.TdsExecuteTransactionManagerRequest(Byte[] buffer, TransactionManagerRequestType request, String transactionName, TransactionManagerIsolationLevel isoLevel, Int32 timeout, SqlInternalTransaction transaction, TdsParserStateObject stateObj, Boolean isDelegateControlRequest)
at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransactionYukon(TransactionRequest transactionRequest, String transactionName, IsolationLevel iso, SqlInternalTransaction internalTransaction, Boolean isDelegateControlRequest)
at System.Data.SqlClient.SqlInternalConnectionTds.ExecuteTransaction(TransactionRequest transactionRequest, String name, IsolationLevel iso, SqlInternalTransaction internalTransaction, Boolean isDelegateControlRequest)
at System.Data.SqlClient.SqlInternalConnection.BeginSqlTransaction(IsolationLevel iso, String transactionName)
at System.Data.SqlClient.SqlInternalConnection.BeginTransaction(IsolationLevel iso)
at System.Data.SqlClient.SqlConnection.BeginDbTransaction(IsolationLevel isolationLevel)
at System.Data.Common.DbConnection.BeginTransaction(IsolationLevel isolationLevel)
at System.Data.EntityClient.EntityConnection.BeginDbTransaction(IsolationLevel isolationLevel) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:31:39.483

这个问题可能会有所帮助：[https ://stackoverflow.com/questions/2113498](https://stackoverflow.com/questions/2113498/sqlexception-from-entity-framework-new-transaction-is-not-allowed-because-ther)

当您仍在读取结果集时无法启动新事务，`SaveChanges`如果不存在则创建事务。

一种解决方案是先完成读取，然后遍历内存中的结果集。

如果您更改此行：

```
var unpostedInvoices = entities.GetUnpostedInvoices().ToList(); 
```

...你能`SaveChanges`放回循环内吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:44:31.167

EF 将跟踪所有更改，并在您调用时更新数据库`SaveChanges()`。然后我不会`SaveChanges()`在循环中调用（即使它不应该失败）。

请记住，EF 为您要插入、更新或删除的每条记录进行单独的数据库往返，因此您调用 SaveChanges 的频率通常无关紧要。只有在使用直接 SQL 并创建单个 SqlCommand 一次执行所有插入时才能避免这种情况。

无论如何，这个错误是由于实体框架在`SaveChanges()`调用期间创建了一个隐式事务

```
using (var transaction = new TransactionScope())
{
    using (var context = new MyContext())
    {
      foreach (Invoice invoice in unpostedInvoices)
        {
            // Change to invoice
            context.SaveChanges();
        }
    }
    transaction.Complete();
} 
```

# html - 使元素固定位置，但如果内容太大则跟随页面滚动

> ID：10915407
> 
> 赞同：6
> 
> 时间：2012-06-06T13:41:33.750
> 
> 标签：html, css, position

请参阅[此网页](http://majorresume.lostbeans.com/)。

1.  首先尝试滚动它，看到左侧栏保持固定。
2.  调整窗口的高度，以使左侧栏的所有内容都不可见。现在滚动。这一次，左栏不固定。

在此页面中，有一个 jquery 计算左栏的高度，将其与窗口高度进行比较，然后使左栏位置固定或绝对。

但是，我想知道是否可以仅通过 HTML 和 CSS 实现类似的东西，而不是使用 jQuery 或类似的东西。

有什么建议么？简而言之，我正在寻找的是一个内容保持固定的栏，但如果内容溢出，则会滚动。但是滚动应该与整个页面一起。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T14:09:20.243

您可以使用媒体查询将 CSS 定向到某些屏幕尺寸（以及其他东西），因此如果屏幕太小，您可以使用一个样式表。我不是专家所以没有例子，但看看这里[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)。对不起！但猜你猜到了:)

编辑：工作结果是这样的：

```
#leftnav {
    /* default look */
    width: 300px;
    position: fixed;
    top:0;
    height: 100%;
}

/* set the size at which the content is clipped and we cannot have fixed position */
@media all and (max-height: 500px) {
    /* things inside here will only have an effect if the browser window shows
       less than 500 px in the height, so here I apply the special rules */
    #leftnav {
        position: absolute;
        height: auto;
        /* etc.. */
    }
} 
```

# timer - 如何在快板中使用多个计时器？

> ID：10915408
> 
> 赞同：1
> 
> 时间：2012-06-06T13:41:34.270
> 
> 标签：timer, allegro, allegro5

```
if( ev.type == ALLEGRO_EVENT_TIMER) 
```

这是事件循环中用于检查传入事件是否为计时器事件的语句。

但是所有的定时器都会产生同样的事件，那么你如何让多个定时器同时运行呢？你如何区分它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:54:12.077

该事件是一个工会。[在这里](http://www.allegro.cc/manual/5/ALLEGRO_EVENT)查看所有属性。

你想要`ev.timer.source`（或`ev.any.source`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-13T00:33:33.740

这是一个工作示例，假设您有两个`ALLEGRO_TIMER`s( `timer_one`, `timer_two`) ：

响应每个计时器：

```
if(ev.timer.source == timer_one) { //Timer one listener
//Code...
}

if(ev.timer.source == timer_two) { //Timer two listener
//Code...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T09:30:21.283

我有这个问题最长的时间，我发现我只是忘记包含`al_start_timer(alTimer);`在我的更新中。愚蠢的错误，但如果你忘记它可能会花费你一些时间。

# jquery - jQuery 切换类

> ID：10915411
> 
> 赞同：0
> 
> 时间：2012-06-06T13:41:36.417
> 
> 标签：jquery, css, toggleclass

我有一个基本的 html 页面，我希望向用户显示“虚拟卡片”，首页显示有关人员的信息，背面显示人员的图片。

我如何实现toggleClass，以便第一次单击时的转换效果相同（或恢复）。

小提琴的完整示例：http: [//jsfiddle.net/ZnYx7/](http://jsfiddle.net/ZnYx7/)

jQuery：

```
$(document).ready(function() {
    $('.click').on('click', function() {
        $(this).addClass('flip').children('.front, .back').delay(600).toggle(0).delay(1500).toggle(0, function() {
            $(this).parent().removeClass('flip');
        });
    });
});​ 
```

最后是CSS：

```
.effects {
    -ms-transition-property: all;
    -ms-transition-duration: 2s;
    -ms-transform: rotateX(0deg);
    -webkit-transition-property: all;
    -webkit-transition-duration: 2s;
    -webkit-transform: rotateX(0deg);
    -o-transition-property: all;
    -o-transition-duration: 2s;
    -o-transform: rotateX(0deg);
    -moz-transition-property: all;
    -moz-transition-duration: 2s;
    -moz-transform: rotateX(0deg);
    transform: rotateX(0deg);

    cursor: pointer;
    float: left;
    height: 190px;
    margin: 1%;
    position: relative;
    text-align: center;
    width: 31%;

}

.front {
    background: url("../img/front-icon.png") no-repeat scroll center top transparent;
    left: 0;
    padding-top: 60px;
    position: relative;
    right: 0;
    top: 0;
    display: inline-block;
}

.back {
    -ms-transform: rotateX(180deg);
    -webkit-transform: rotateX(180deg);
    -o-transform: rotateX(180deg);
    -moz-transform: rotateX(180deg);
    transform: rotateX(180deg);

    display: none;
    height: 100%;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
}

.pad {
    height: 100%;
}

.flip {
    -ms-transform: rotateX(180deg);
    -webkit-transform: rotateX(180deg);
    -o-transform: rotateX(180deg);
    -moz-transform: rotateX(180deg);
    transform: rotateX(180deg);
}​ 
```

这可能看起来令人困惑，所以我把所有东西都放在小提琴上，[http://jsfiddle.net/ZnYx7/](http://jsfiddle.net/ZnYx7/)

任何想法都非常受欢迎！

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:44:10.947

它似乎工作得很好：http: [//jsfiddle.net/maniator/ZnYx7/3/](http://jsfiddle.net/maniator/ZnYx7/3/)

^_^

# c# - Ruby on Rails TCPSocket 在客户端应用程序中冻结，而循环使用获取

> ID：10915412
> 
> 赞同：1
> 
> 时间：2012-06-06T13:41:38.477
> 
> 标签：c#, ruby-on-rails, sockets

我正在关注教程：[http](http://www.tutorialspoint.com/ruby/ruby_socket_programming.htm) ://www.tutorialspoint.com/ruby/ruby_socket_programming.htm并使用它来设置“简单客户端”。

代码如下：

```
 require 'socket'      # Sockets are in standard library

    hostname = 'localhost'
    port = 2000

    s = TCPSocket.open(host, port)

    while line = s.gets   # Read lines from the socket
      puts line.chop      # And print with platform line terminator
    end
    s.close               # Close the socket when done 
```

当我执行单个 s.gets 语句时，我从服务器获得了第一条响应行。当我再次执行 s.gets 时，我得到第二条响应行，等等。但是，当我到达响应结束并执行 s.gets 时，程序进入冻结状态。（如果我从 Rails 控制台测试上述程序）。当我运行代码时也会发生同样的情况 - 当 while 语句执行最终的 s.gets 时会发生冻结。关于如何解决这个问题的任何想法？

有关信息：服务器是使用以下 C# 代码发送响应消息的 C# 服务器（响应的每一行都使用相同的代码，并且响应中的最后一行与其他行没有任何区别）：

```
 socket.Send(Encoding.ASCII.GetBytes(msg + "\r\n")); 
```

所以我认为客户端冻结，因为它可能无法正确解释服务器的“响应结束”。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:13:33.317

从套接字读取 nil 值似乎存在问题。仍然不确定为什么会发生这种情况，但是在get [() 中使用 Recovering from a broken TCP socket in Ruby 中](https://stackoverflow.com/questions/61675/recovering-from-a-broken-tcp-socket-in-ruby-when-in-gets)建议的选择器可以很好地解决问题（会支持他的答案，但没有足够的代表）。

我遵循的解决方案是在方法中添加选择器，如下所示：

```
 def next_line_readable?(socket)
      readfds, writefds, exceptfds = select([socket], nil, nil, 0.1)
      p :r => readfds, :w => writefds, :e => exceptfds
      readfds #Will be nil if next line cannot be read
    end 
```

然后在主程序中使用它：

```
 socket = TCPSocket.open(host, port)
    while next_line_readable?(socket)
      puts socket.gets.chop
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T07:09:06.453

试试这个，我用 ruby​​ 编写一个 tcp 客户端和服务器

```
def sendto(str)
  begin
     socket.write(str)
    puts "Sent Message to:" +  socket.peeraddr[2]
  rescue Exception=>e
    puts red("Error Make sure the target is connected")
  end
end 
```

检查它工作正常，直到 4 小时然后断开 [与基于 ruby​​ 的服务器的连接](https://stackoverflow.com/questions/12596247/c-sharp-tcp-connection-to-ruby-based-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:04:27.687

尝试使用`socket.read`or`socket.recvfrom`方法而不是`socket.gets`.

这是相同的行为吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-19T08:31:12.677

使用 recv 而不是 gets

```
 server = TCPServer.new 53492 # Server bound to port 53492
    loop do
      client = server.accept
      ansiString = client.recv(100).chomp
      client.puts result
      client.close
     end 
```

您也可以将其转换为线程：

```
 server = TCPServer.new 53492 # Server bound to port 53492
   Thread.start(server.accept) do |client|
      loop do
        client = server.accept
        ansiString = client.recv(100).chomp
        client.puts result
        client.close
      end
    end 
```

# python - 仅在 Django 模板中损坏的 UTF-8 字符

> ID：10915426
> 
> 赞同：0
> 
> 时间：2012-06-06T13:42:25.137
> 
> 标签：python, django, utf-8, django-templates

我目前正在为我们的图书馆员开发一个报告应用程序（使用 Django 编写），以解决我们在某些实验室遇到的一些问题（我在一所大学工作）。为此，我创建了一个页面，列出了所有有问题的实验室。我正在测试添加注释，效果很好。UTF8 字符除外。而且我不知道（还不）该过程的哪一部分失败了。

问题：**è** char在 HTML 页面中打印为**Ã¨ 。**

这是我个人的“追溯”：

1.  我使用 Terminal.app（UTF-8 格式）通过 SSH 连接到我的测试服务器
2.  服务器`LANG`是`en_US.UTF-8`
3.  我添加了启动 ipython的注释 ( `annotation.text = u'2ème commentaire'`)`python manage.py shell_plus`
4.  我尝试添加`DEFAULT_CHARSET="utf-8"`我的设置，没有任何变化。
5.  我检查了 MySQL 的配置：`character_set_database`是`utf8`. A`SELECT`显示正确的文本。
6.  在我的views.py 中，我只是从数据库中获取注释并对其进行排序。然后我`direct_to_template`用包含数据的字典调用。
7.  在我的模板中，HTML 页面字符集设置为`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`，我使用`{{ annotation.text|escape }}`.

问题似乎出现在第 5-6 步，但我不知道如何抓住它，而且——显然——如何纠正它。你有什么主意吗 ？

谢谢

PS：如果您愿意，我可以为您提供更多代码，但这更有可能使您感到困惑（因为我认为 DB 结构有点奇怪）。

* * *

**回答** （由于我的代表少于 10 个，我现在无法回答自己，所以我在下面发布答案。）

我终于找到了答案！

```
In [13]: annotation.text
Out[13]: u'2\xc3\xa8me commentaire'

In [14]: annotation.text = '2ème commentaire'
In [15]: annotation.save()
In [16]: annotation.text
Out[16]: '2\xc3\xa8me commentaire' 
```

显然，表示字符串采用 UTF-8 格式的“u”是“矫枉过正”。有两种方法可以在 UTF-8 中编码相同的字符（如果我正确理解了我读到的内容）：

```
In [37]: print('\xc3\xa8').decode('utf8')
è

In [38]: print(u'\xe8')
è

In [39]: print(u'\xc3\xa8')
Ã¨ 
```

我只是选择了两者的混合，而且……嗯，那是错误的。

无论如何感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:26:30.453

您的模板（HTML 文件本身）是否以 UTF-8 编码？

# php - 使用ajax填充2个输入

> ID：10915437
> 
> 赞同：0
> 
> 时间：2012-06-06T13:42:53.453
> 
> 标签：php, mysql, ajax, field

首先让我为我糟糕的英语道歉（我从 6 个月开始学习英语）。

我正在做一个使用 mysql 数据库的网站，由于某些原因，我必须使用需要数据库干预的表单，所以我检查了一个使用 ajax 进行自动完成的脚本输入类型文本以在数据库中进行研究，以免显示超过数千个条目的选择。

所以我有这个脚本：

在页面 nouveau dossier.php

```
 <?php $monfichier = fopen('liste_clients.txt', 'w');

// 2 : on lit la première ligne du fichier
$ligne = fgets($monfichier);
ftruncate($monfichier,0);
$sql2 = "SELECT code_client, nom_commercial FROM client";
$re2 = mysql_query($sql2) or die(__LINE__.mysql_error().$sql2); 
while($d2 = mysql_fetch_assoc($re2)) {
fputs($monfichier, $d2['nom_commercial'].' '.$d2['code_client'].'|');
fputs($monfichier, $d2['code_client'].' '.$d2['nom_commercial'].'|');
         }
// 3 : quand on a fini de l'utiliser, on ferme le fichier
fclose($monfichier);
?> 
```

此脚本必须将我的数据库的所有条目保存在文件文本中。

在此之后，我有这个 ajax 脚本：

```
<div id="results"></div>
<script language="JavaScript">
(function() {
var searchElement = document.getElementById('search'),
results = document.getElementById('results'),
selectedResult = -1, // Permet de savoir quel résultat est sélectionné : -1 signifie «             aucune sélection »
previousRequest, // On stocke notre précédente requête dans cette variable
previousValue = searchElement.value; // On fait de même avec la précédente valeur

function getResults(keywords) { // Effectue une requête et récupère les résultats

var xhr = new XMLHttpRequest();
xhr.open('GET', 'autocomplete.php?s='+ encodeURIComponent(keywords));

xhr.onreadystatechange = function() {
if (xhr.readyState == 4 && xhr.status == 200) {

displayResults(xhr.responseText);

}
};

xhr.send(null);

return xhr;

}

function displayResults(response) { // Affiche les résultats d'une requête

results.style.display = response.length ? 'block' : 'none'; // On cache le conteneur si on n'a pas de résultats

if (response.length) { // On ne modifie les résultats que si on en a obtenu

response = response.split('|');
var responseLen = response.length;

results.innerHTML = ''; // On vide les résultats

for (var i = 0, div ; i < responseLen ; i++) {

div = results.appendChild(document.createElement('div'));
div.innerHTML = response[i];

div.onclick = function() {
chooseResult(this);
};

}

}

}

function chooseResult(result) { // Choisit un des résultats d'une requête et gère tout ce qui y est attaché

searchElement.value = previousValue = result.innerHTML; // On change le contenu du champ de recherche et on enregistre en tant que précédente valeur
results.style.display = 'none'; // On cache les résultats
result.className = ''; // On supprime l'effet de focus
selectedResult = -1; // On remet la sélection à zéro
searchElement.focus(); // Si le résultat a été choisi par le biais d'un clic, alors le focus est perdu, donc on le réattribue

}

searchElement.onkeyup = function(e) {

e = e || window.event; // On n'oublie pas la compatibilité pour IE

var divs = results.getElementsByTagName('div');

if (e.keyCode == 38 && selectedResult > -1) { // Si la touche pressée est la flèche « haut »

divs[selectedResult--].className = '';

if (selectedResult > -1) { // Cette condition évite une modification de childNodes[-1], qui n'existe pas, bien entendu
divs[selectedResult].className = 'result_focus';
}

}

else if (e.keyCode == 40 && selectedResult < divs.length - 1) { // Si la touche pressée est la flèche « bas »

        results.style.display = 'block'; // On affiche les résultats

        if (selectedResult > -1) { // Cette condition évite une modification de childNodes[-1], qui n'existe pas, bien entendu
            divs[selectedResult].className = '';
        }

        divs[++selectedResult].className = 'result_focus';

    }

    else if (e.keyCode == 13 && selectedResult > -1) { // Si la touche pressée est « Entrée »

        chooseResult(divs[selectedResult]);

    }

    else if (searchElement.value != previousValue) { // Si le contenu du champ de recherche a changé

        previousValue = searchElement.value;

        if (previousRequest && previousRequest.readyState < 4) {
            previousRequest.abort(); // Si on a toujours une requête en cours, on l'arrête
        }

        previousRequest = getResults(previousValue); // On stocke la nouvelle requête

        selectedResult = -1; // On remet la sélection à zéro à chaque caractère écrit

    }

}; 
```

})();

在页面 autocomplete.php 我有：

```
<?php
 $data = ((file_get_contents('liste_clients.txt'))); // Récupération de la liste complète des villes
    $dataLen = count($data);

    sort($data); // On trie les villes dans l'ordre alphabétique

    $results = array(); // Le tableau où seront stockés les résultats de la recherche

    // La boucle ci-dessous parcourt tout le tableau $data, jusqu'à un maximum de 10 résultats

        for ($i = 0 ; $i < $dataLen && count($results) < 10 ; $i++) {
            if (stripos($data[$i], $_GET['s']) === 0) { // Si la valeur commence par les mêmes caractères que la recherche

                array_push($results, $data[$i]); // On ajoute alors le résultat à la liste à retourner

            }
        }

    echo implode('|', $results); // Et on affiche les résultats séparés par une barre verticale |

    ?> 
```

问题是，当我使用脚本时，它显示此错误：警告：sort() 期望参数 1 是数组，第 5 行的 C:\wamp\www\NEOGETCASH\GESTIONNAIRE\autocomplete.php 中给出的字符串

我不知道如何解决这个问题。

另一件事是使用输入中已选择的条目的结果，因为它必须显示字段'code_client'，我想显示另一个字段，其中出现字段'numero_dossier'。

所以我有这个脚本，我想使用 2 输入类型的文本。

例如，如果我的用户搜索 Ecf，在第一个输入类型文本中将出现 code_client '1566' 和第二个 n_doss '110015666223'

这些信息在我的数据库中像这个模式一样注册

表：客户字段：

id code_client n_dosss 地址 zip_code contry tel 传真 gsm e_mail

等等。

非常感谢您提前提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:47:21.740

为什么不使用 jQuery AJAX？它很简单并且兼容所有浏览器。

```
$.ajax({
    url: 'ajax/test.html',
    success: function(data) {
        $('.result').html(data);
        alert('Load was performed.');
    }
}); 
```

因此，您可以使用 jQuery 浏览正确的元素并使用函数更新内部 HTML `.html()`。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:52:22.850

你看到的错误

```
Warning: sort() expects parameter 1 to be array, string given in C:\wamp\www\NEOGETCASH\GESTIONNAIRE\autocomplete.php on line 5 
```

是因为，`file_get_contents()`返回一个`string`
为你使用排序方法，你需要先将字符串转换为数组。如果有`delimiter`分隔文件中不同条目的分隔符，这将是可能的。
你可以做一个：

```
$dataStr = file_get_contents('liste_clients.txt');
$data = explode($delimiter,$dataStr );
sort($data);
..... //continue with your code :) 
```

希望这可以帮助

# apache-flex - Flex 项目渲染器 - 单击时更改 alpha

> ID：10915439
> 
> 赞同：0
> 
> 时间：2012-06-06T13:43:00.060
> 
> 标签：apache-flex, flex4, flex-mobile

我想在单击列表项时更改 Rect 的 alpha 但我无法解决这个问题。而且我不知道究竟是如何做到这一点的，因为我在项目渲染器内的 Rectangle 上这样做，有什么建议吗？

代码：

```
<s:List id="list" labelField="name" dataProvider="{items}" top="20" bottom="20" left="20" right="20" 
                contentBackgroundAlpha="0"
                change="list_changeHandler(event)">
            <s:itemRenderer>
                <fx:Component>
                    <s:ItemRenderer width="100%" height="200" autoDrawBackground="false" contentBackgroundAlpha="0">

                        <s:Group width="100%" height="100%">
                            <s:Rect id="rect" left="0" right="0" top="0" bottom="0" alpha="0.3">
                                <s:fill>
                                    <s:SolidColor color="#FFFFFF" 
                                                   />
                                </s:fill>
                            </s:Rect>
                            <s:Image source="{data.icon}" top="30" horizontalCenter="0"/>
                            <s:Label text="{data.name}" top="100" horizontalCenter="0" color="#101010" fontWeight="bold" fontSize="16"/>
                            <s:Label text="{data.line1}" top="130" horizontalCenter="0" color="#343434" fontSize="14"/>
                            <s:Label text="{data.line2}" top="150" horizontalCenter="0" color="#343434" fontSize="14"/>
                        </s:Group>
                    </s:ItemRenderer>
                </fx:Component>
            </s:itemRenderer>
            <s:layout>
                <s:TileLayout requestedColumnCount="3" requestedColumnCount.landscape="4" columnAlign="justifyUsingWidth"/>
            </s:layout>
        </s:List> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:47:38.907

您可以为此使用 ItemRenderer 的状态。将这些状态添加到您的 ItemRenderer：

```
<s:states>
    <s:State name="normal" />
    <s:State name="hovered" />
    <s:State name="selected" />
</s:states>

<s:Rect left="0" right="0" top="0" bottom="0">
    <s:fill>
        <s:SolidColor color.normal="0x0000ff" 
                      color.hovered="0x00ff00" 
                      color.selected="0xff0000" />
    </s:fill>
</s:Rect> 
```

使用此代码，您的渲染器默认为蓝色；当你将鼠标悬停在它上面时它会变成绿色；选择它时为红色。当然也可以对`alpha`值进行同样的操作。

# excel - Team Foundation 2010 - Excel 服务器工作簿安全提示

> ID：10915441
> 
> 赞同：0
> 
> 时间：2012-06-06T13:43:04.337
> 
> 标签：excel

当尝试从 Visual Studio 中打开 excel TFS 报告时，我们不断收到 excel 提示输入安全凭据。它说它正在尝试连接到

```
'http://myserver.mydomain.com'. 
```

当我在浏览器中使用上述域名打开项目门户，然后尝试打开报告时，我得到了提示。

换句话说，当我只使用服务器名称时，

```
'http://myserver' 
```

要访问报告，安全提示消失。

如何配置 TFS（或 Visual Studio 或其他）以便在打开 excel TFS 报告时仅使用服务器名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:56:14.347

我以前肯定遇到过这个。这是与 SharePoint 文档库配对的 Excel 的一项安全功能。

本质上，以下是“信任”该站点的步骤：

1.  打开 Excel
2.  从后台视图打开 Excel 选项
3.  前往最底部右侧的信任中心。
4.  点击“信任中心设置” ![卓越信任中心](../Images/46f51cd24e33522fa67e080b46dd4e10.png)
5.  单击受信任的位置
6.  接下来有几件事情要做。如果您想信任网络位置，请单击该选项以启用它。
7.  如果要添加新的受信任位置，请单击“添加新位置...”
8.  输入新位置的完整 URL，然后选择“此位置的子文件夹也受信任”框。 ![在 Excel 信任中心添加受信任位置](../Images/cf00e80bdb4570eb2326704ff4f5a225.png)

应该这样做！

顺便说一句 - 从我的联合国，您可以让您的 IT 部门通过全局策略将这些设置发送到您的 Active Directory 域中的所有计算机，这样其他人就不必执行这些步骤。他们还可以将此站点添加到 Internet Explorer 中的 Intranet 站点组，供内部所有人使用，这在其他类似情况下会有所帮助。

# sql - 如何使用模式重命名一堆表？

> ID：10915450
> 
> 赞同：2
> 
> 时间：2012-06-06T13:43:39.817
> 
> 标签：sql, sql-server-2008

我有一大组最初以“tblXYZ123-”前缀命名的数据库表。我仍然希望为表添加前缀，因为这会将相关表分组在一起，但我想通过将前缀替换为更简单、更相关的前缀（如“td”）来重命名这组表。

如何在不手动重命名每个文件的情况下重命名表？我希望有一个脚本或其他东西，但一直找不到这样的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:53:06.537

您可以使用动态 SQL 和目录视图构建此脚本`sys.tables`：

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += CHAR(13) + CHAR(10) 
  + 'EXEC sp_rename N''' + SCHEMA_NAME([schema_id])
  + '.' + name + ''', N''' + REPLACE(name, 'tblXYZ123-', 'td')
  + ''',N''OBJECT'';'
FROM sys.tables
WHERE name LIKE 'tblXYZ123-%';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

如果需要，您也可以使用光标，但我更喜欢上面的 - 我可以在运行之前打印和预览脚本，例如：

```
DECLARE @t SYSNAME, @f NVARCHAR(511);

DECLARE c CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY
  FOR SELECT name, SCHEMA_NAME(schema_id) + '.' + name
    FROM sys.tables WHERE name LIKE 'tblXYZ123-%';

OPEN c;

FETCH NEXT FROM c INTO @t, @f;

WHILE @@FETCH_STATUS = 0
BEGIN
    SET @t = REPLACE(@t, 'tblXYZ123-', 'td');

    EXEC sp_rename @f, @t, N'OBJECT';

    FETCH NEXT FROM c INTO @t, @f;
END 

CLOSE c;
DEALLOCATE c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:55:42.497

在我看来，最简单的方法是将表格列表放在 Excel 中的一列中。在下一列中，输入新名称，大概使用像*="td"&mid(A1, 11, 1000)*这样的公式作为新名称。在第三列中，输入公式“sp_rename”&A1&“”&A2。

将公式复制下来，然后将第三列复制到 SQL Server Management Studio 并运行代码。

您还可以在 T-SQL 中使用游标或循环来执行此操作。然而，我发现在 Excel 中生成这样的代码——对于一次性应用程序——通常是最快的方法。

# javascript - 在backbone.js分页器requestPager中使用“过滤器”选项

> ID：10915452
> 
> 赞同：2
> 
> 时间：2012-06-06T13:43:52.647
> 
> 标签：javascript, filter, backbone.js, paginator

我目前有一个工作的backbone.js requestPager 集合，但想使用过滤器选项。我目前正在努力解决如何让它发挥作用。当我在 server_api 函数中使用链接“'filter':'sam'”时它可以工作，但我似乎无法动态完成这项工作。

我认为我遇到的问题是如何设置视图以更新集合。使用 clientPager 有一个 this.collection.setFilter() 函数，但似乎没有 requestPager 的等价物。

谁能指出我使用 requestPager 进行结果过滤的简单示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:39:40.163

我这样做类似于user1248256，并认为我也会发布。

这是集合中的相关代码：

```
server_api: {
    'filter': function() {return this.filterString },
    'limit': function() { return this.perPage },
    'offset': function() { return this.currentPage},
},
setFilter: function (filter) {
    this.filterString = filter; 
    this.pager();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T21:43:02.450

这取决于您的应用程序设计。在一个简单的情况下，您可以编写如下内容：

```
var PaginatedCollection = Backbone.Paginator.requestPager.extend({  
    setFilter: function (filter) {
        this.server_api['$filter'] = filter;
        this.currentPage = 0;
        this.fetch();
    },
    // ... 

}); 
```

# c# - 将引用元素添加到 csproj 时删除 xmlns="" 属性

> ID：10915454
> 
> 赞同：0
> 
> 时间：2012-06-06T13:44:04.550
> 
> 标签：c#, xml, windows-installer, xmldocument, csproj

我尝试通过 MSI 安装程序在安装服务时以编程方式将 dll 的引用添加到 csproj 文件中。

```
<Reference Include="TestProject">
    <HintPath>..\..\TestProject.dll</HintPath>
</Reference> 
```

`protected override void OnAfterInstall(IDictionary savedState)`我在 ProjectInstaller.cs中添加节点的源代码行放在下面

```
var refnode = xml.CreateElement("Reference");
var attribute = xml.CreateAttribute("Include", null);
attribute.Value = "TestProject";
refnode.Attributes.Append(attribute);
var hintPath = xml.CreateNode(XmlNodeType.Element, "HintPath", null);
hintPath.InnerText = "..\..\TestProject.dll";
refnode.AppendChild(hintPath);
xml.AppendChild(refnode);
xml.Save(file); 
```

代码输出

```
<Reference Include="TestProject" xmlns="">
    <HintPath>..\..\TestProject.dll</HintPath>
</Reference> 
```

但是源代码`xmlns=""`在 Reference 元素中添加了更多属性。这段代码有什么问题我将如何删除`xmlns=""`属性，因为 csproj 文件不采用自定义属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:54:29.383

C# 项目文件的默认命名空间是`xmlns="http://schemas.microsoft.com/developer/msbuild/2003"`. 您没有指定任何名称空间，因此必须清除名称空间才能添加您想要的子项。设置正确的命名空间，你可能不会有问题。

```
var ns = "http://schemas.microsoft.com/developer/msbuild/2003";
var refnode = xml.CreateElement("Reference", ns);
var attribute = xml.CreateAttribute("Include", ns);
attribute.Value = "TestProject";
refnode.Attributes.Append(attribute);
var hintPath = xml.CreateNode(XmlNodeType.Element, "HintPath", ns);
hintPath.InnerText = "..\..\TestProject.dll";
refnode.AppendChild(hintPath);
xml.AppendChild(refnode);
xml.Save(file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:15:09.527

虽然这不是原始问题的答案，但我想分享我认为更好的做法，因为我看到了问题背后的设计问题。

在交付软件时，应该更喜欢构建时复杂性而不是安装时复杂性。

第一个完全在开发人员的控制之下，那个阶段的错误不是那么严重，可以测试。该问题很可能会在对最终用户造成损害之前被发现。

后者对目标系统的影响更大。您永远不知道您安装到的确切环境。你不能从字面上依赖任何东西。而那个阶段的错误成本更高，并且随着人们下载您的软件而在眨眼间传播开来。

因此，重复我自己，更喜欢构建时复杂性而不是安装时复杂性。安装程序不应该修复应用程序本身的设计问题。仅将那些您在构建期间无法猜测的内容留给安装时间。

在您的特定情况下，我想您可以在构建期间修改项目布局，以免使用 DLL 引用修补项目文件。教你的构建系统只在 MSI 包中包含必要的东西。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:54:11.783

在您的`var attribute = xml.CreateAttribute("Include", null);`行中，您创建没有附加命名空间 URI 的属性。但是，在 MSBuild 文件中，默认命名空间（无命名空间前缀）通常设置为`xmlns="http://schemas.microsoft.com/developer/msbuild/2003"`. 当您用您的`null`值明确指出该`Include`属性与该名称空间无关时，Xml 编写器会覆盖相应文档片段的默认名称空间。

尝试像这样创建您的属性：

```
var attribute = xml.CreateAttribute("Include", "http://schemas.microsoft.com/developer/msbuild/2003"); 
```

这同样适用于在`HintPath`下面几行创建元素。

# c# - Visual Studio 2008 用红色强调非错误代码

> ID：10915455
> 
> 赞同：1
> 
> 时间：2012-06-06T13:44:07.393
> 
> 标签：c#, visual-studio-2008, syntax-error, underline

我在 Visual Studio 2008 中有一个大型 C# 项目，我的项目中有近一半带有红色下划线错误，其中大部分是“未声明的元素”；该项目编译、构建、调试和运行良好，没有错误。

我也可以输入一个合法的错误，它不会在错误下划线，例如，如果我写 strong.Format() 而不是 string.Format，它不会下划线 strong????，但它会在 Format 下划线，在 string.Format 中并告诉我未声明的元素，这是没有意义的。

类似于问题：

*   [没有错误时，Visual Studio 2010 不正确地用红色错误线在代码/注释下划线](https://stackoverflow.com/questions/9729621/visual-studio-2010-improperly-underlining-code-comments-with-red-error-line-when)

但他从来没有得到答案，这是 VS 2008 和 C# 而不是 VS 2010 和 C++

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T21:28:10.640

通常，当您运行 ReSharper 等工具时，您可能会遇到此问题。

它们通常依赖于 bin 目录中存在的缓存信息和 dll，如果您有一个复杂的项目并且它进入存在意外 dll 的状态或复杂的构建脚本，这些脚本需要一些魔法来移动 dll 等。

我建议使用 VS clean 解决方案命令进行清理，并[清除 ReSharper](http://www.jetbrains.com/resharper/webhelp/Reference__Options__Environment__General.html)或任何其他代码分析工具缓存。

如果这不起作用，你可以[更深入](http://weblogs.asp.net/psheriff/archive/2011/11/08/clean-up-after-visual-studio.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:50:58.580

我曾多次遇到过这个问题，无论是单独使用 Visual Studio 还是使用 Resharper。在这两种情况下，我都能够通过删除整个项目并从版本控制中重新检查它来解决问题。假设您没有使用版本控制，这基本上意味着清除所有生成的文件，包括 .obj、.exe、.dll。和 .suo 文件。假设您使用 Resharper，还要删除 Resharper 目录。

（我假设您的源代码树中的所有可执行文件都已生成。显然，如果未生成它们，您不想删除它们。）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-13T06:42:53.813

我有同样的问题，在我的情况下，它主要与库中定义的库函数和类型有关。这个为我修好了：

打开命令行参数。您可以使用以下方法到达那里：

`Project`> `*ProjectName* Properties`> `Configuration Properties`> `Linker`>`Command Line`

在底部的附加选项框中添加 `/I "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include"`

您当然需要安装 Visual Studio 的正确路径。根据需要添加尽可能多的路径，每个路径都有一个单独的`/I`

答对了！我希望它也适合你。:)

此外，如果您创建任何新的项目/解决方案，则无需将其添加到编译器选项中。它适用于新项目，或者至少对我来说是这样。典型的微软东西......：S

# yii - yii：使用命名空间时只检索表单名称类

> ID：10915467
> 
> 赞同：0
> 
> 时间：2012-06-06T13:44:51.433
> 
> 标签：yii

我有一个类似的代码来处理表单提交：

```
use \my-project\web\models\forms\RegisterOrganizationForm;
...
var_dump($_POST);die();
$model=new LoginForm;
if(isset($_POST['LoginForm']))
    $model->attributes=$_POST['LoginForm']; 
```

该 var_dump 的输出是（嗯，只是关于表单值的部分）：

> ["\my-project\web\models\forms\LoginForm"]=> 数组(1) {...

如您所见，已添加命名空间（我没想到会这样..），那么，当 vardumping 时，我怎样才能得到下面这样的东西？？：

```
["LoginForm"]=> array(1) {... 
```

哈维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:15:53.780

首先，在将模型属性设置为表单接收到的数据之前调用 die()。

其次，您正在做的`var_dump`而`$_POST`不是做`var_dump` `$_POST['LoginForm']`

第三，如果您想查看从表单发回的内容，为什么要执行 var_dump，请使用 FireFox 的 firebug 之类的工具或 chrome 中的开发人员工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:02:09.553

我和你有同样的问题。

修补以下文件：

/path/to/yii/framework/web/helpers/CHtml.php

找到方法“resolveName”，将其替换为以下内容：

```
/**
 * Resolves a class name, removing namespaces.
 */
public static function resolveClassName($model){
    return end(explode('\\',get_class($model)));
}

/**
 * Generates input name for a model attribute.
 * Note, the attribute name may be modified after calling this method if the name
 * contains square brackets (mainly used in tabular input) before the real attribute name.
 * @param CModel $model the data model
 * @param string $attribute the attribute
 * @return string the input name
 */
public static function resolveName($model,&$attribute)
{
    if(($pos=strpos($attribute,'['))!==false)
    {
        if($pos!==0)  // e.g. name[a][b]
            return self::resolveClassName($model).'['.substr($attribute,0,$pos).']'.substr($attribute,$pos);
        if(($pos=strrpos($attribute,']'))!==false && $pos!==strlen($attribute)-1)  // e.g. [a][b]name
        {
            $sub=substr($attribute,0,$pos+1);
            $attribute=substr($attribute,$pos+1);
            return self::resolveClassName($model).$sub.'['.$attribute.']';
        }
        if(preg_match('/\](\w+\[.*)$/',$attribute,$matches))
        {
            $name=self::resolveClassName($model).'['.str_replace(']','][',trim(strtr($attribute,array(']['=>']','['=>']')),']')).']';
            $attribute=$matches[1];
            return $name;
        }
    }
    return self::resolveClassName($model).'['.$attribute.']';
} 
```

希望这可以帮助！

PS 对于任何认为这是愚蠢或不必要的人，客户端验证器不起作用，因为您无法使用 JavaScript（或至少使用 jQuery）通过 ID 选择带有反斜杠的元素

# spring - 如何正确地将 Spring 包含到 OSGified 包中

> ID：10915472
> 
> 赞同：2
> 
> 时间：2012-06-06T13:44:55.993
> 
> 标签：spring, maven, osgi

我有一个非常简单的 OSGI 应用程序，它只监听注册/取消注册并向标准输出发送一些消息。

我的应用程序中有一个简单的 Spring 初始化 bean。我使用maven bundle插件将jar打包并放入felix。这是 pom 的摘录：

```
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.0.RELEASE</version>
        <type>jar</type>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>2.2.0</version>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Export-Package>org.spring.*</Export-Package>
                    <Bundle-Activator>foo.bar.Activator</Bundle-Activator>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

该项目编译得很好，可以很好地部署到 Felix 中，但是，当激活器被调用时，它会抱怨缺少这样的依赖项：

> 捆绑 foo.bar.project [56] 中未解决的约束：无法解决 56.0：缺少要求 [56.0] osgi.wiring.package；(&(osgi.wiring.package=org.springframework.context)(version>=3.1.0)(!(version>=4.0.0)))

我尝试更改此行：

org.spring.*

对此：

*

felix 在其中抱怨 android-dalvik 不存在，所以我完全一无所知。

知道如何在不使用 Spring DM 的情况下将 Spring 包含在 OSGI 项目中吗？

编辑：这是生成的清单抱怨的内容（来自网络控制台）

> 导出的包
> 
> foo.bar.osgi foo.bar.service foobar.tracker
> 
> Imported Packages org.osgi.framework,version=[1.6,2) from org.apache.felix.framework (0) org.osgi.util.tracker,version=[1.5,2) from org.apache.felix.framework ( 0) ERROR: org.springframework.context,version=[3.1,4) -- 无法解决 ERROR: org.springframework.context.support,version=[3.1,4) -- 无法解决
> 
> 清单标头 Bnd-LastModified：1339014840268
> 
> 构建-Jdk：1.6.0_32
> 
> 建造者： fooBar
> 
> 捆绑激活器：foo.bar.osgi.Activator
> 
> 捆绑清单版本：2
> 
> 捆绑名称：fooBar
> 
> Bundle-SymbolicName：foo.bar.OSGIProject
> 
> 捆绑版本：0.20.0.SNAPSHOT
> 
> 创建者：Apache Maven Bundle Plugin
> 
> 导出包：foo.bar.osgi.tracker；使用：="foo.bar.osgi.service, org.osgi.util.tracker, org.osgi.framework",
> 
> foo.bar.osgi; 使用：="org.springframework.context.support, org.springframework.context, org.osgi.framework", foo.bar.osgi.service
> 
> 进口包装：
> 
> org.osgi.framework；版本="[1.6, 2)", org.osgi.util.tracker; 版本="[1.5, 2)", org.springframework.context; 版本="[3.1, 4)", org.springframework.context.support; version="[3.1, 4)" 清单版本：1.0 工具：Bnd-1.15.0

这是我改变pom的时候

```
<configuration>
    <instructions>
        <Include-Resource>src/main/resources/spring-beans.xml</Include-Resource>
        <Bundle-Activator>nl.synovite.scheduled.osgi.Activator</Bundle-Activator>
        <Import-Package>*</Import-Package>></instructions>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:16:28.390

你在做

```
<Export-Package>org.spring.*</Export-Package> 
```

但感兴趣的包是`org.springframework.context`. 导出语法是一种模式，而不是完整的正则表达式，因此导出中的点实际上意味着点（即包分隔符），而不是任意字符。

```
<Export-Package>org.spring*</Export-Package> 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:03:59.943

嗯，我觉得你的包基本没问题，但是 Felix 似乎无法解析 org.springframework 包，所以你需要添加一些导出 org.springframework 包的包。我不太了解spring，但我想你可以从springsource下载那些包。

Maven 一定也找到了一个，因为它似乎能够编译它。

# c# - 获取 BindlingList 中添加的最后一项

> ID：10915474
> 
> 赞同：0
> 
> 时间：2012-06-06T13:44:57.890
> 
> 标签：c#

我有一个 BindingList 变量，我需要获取添加到其中的最后一项。以下代码有效，但我想知道是否有更好的方法或我缺少的东西：

```
WorkoutScheduleList[WorkoutScheduleList.IndexOf(WorkoutScheduleList[(WorkoutScheduleList.Count - 1)])].WorkoutScheduleID); 
```

这不是最容易阅读的，但它基本上采用列表的计数并从中减去 1，然后将其用于 IndexOf 方法以获取添加到列表中的最后一项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:49:28.387

您可以处理绑定列表的[ListChanged](http://msdn.microsoft.com/en-en/library/ms132742)事件，并保留已添加项目的引用。

例子：

```
class Program
{
    static object last_item;

    static void Main(string[] args)
    {
        BindingList<object> WorkoutScheduleList = new BindingList<object>();

        WorkoutScheduleList.ListChanged += (s, e) => {
            if (e.ListChangedType == ListChangedType.ItemAdded)
                last_item = WorkoutScheduleList[e.NewIndex];
        };

        WorkoutScheduleList.Add("Foo");
        WorkoutScheduleList.Add("Bar");
        WorkoutScheduleList.Insert(1, "FooBar");

        //prints FooBar
        Console.WriteLine(String.Format("last item added: {0}", last_item));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:11:26.317

```
var lastItem = WorkoutScheduleList[WorkoutScheduleList.Count - 1].WorkoutScheduleID; 
```

或使用 LinQ

```
var lastLinqItem = WorkoutScheduleList.Last().WorkoutScheduleID; 
```

# java - java POI XSSF FormulaEvaluator

> ID：10915475
> 
> 赞同：2
> 
> 时间：2012-06-06T13:45:04.737
> 
> 标签：java, apache-poi, xssf

保存新的 Excel 文件时遇到问题。我希望当它被保存时，公式会自行计算，但目前它只是在 excel 文件中返回一个字符串。公式是正确的。我不知道到底要不要`FormulaEvaluator`工作。

这是我输入返回字符串的公式的地方：

```
dataRow1.createCell((short)5).setCellValue("=VLOOKUP(A"+rowCountVlookup+",'C:\\Users\\Admin\\Documents\\JCreator LE\\MyProjects\\WordCount\\classes\\[Pricing.xlsx]Sheet1'!$B$3:$E$41,4, FALSE)*E"+rowCountVlookup+""); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:22:36.840

我最终设法解决了它。

```
String strFormula = "ROUND((VLOOKUP(A"+rowCountVlookup+",'C:\\Users\\Admin\\Desktop\\[pricing.xlsx]Sheet1'!$B$3:$E$41,4, FALSE)*E"+rowCountVlookup+"),2)";
                            dataRow1.createCell((short)5).setCellType(Cell.CELL_TYPE_FORMULA);
                            dataRow1.createCell((short)5).setCellFormula(strFormula); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:54:47.213

我使用此代码来评估公式

```
//I use an instance of the workbook for the Excel workbook I'm working at the moment
Workbook wbook;

private CellValue formulaEvaluation(Cell cell) {
    FormulaEvaluator formulaEval = wbook.getCreationHelper().createFormulaEvaluator();
    return formulaEval.evaluate(cell);
}

public Double obtieneObjetoNumericoCelda(Cell cell) {
    Double dblValue = null;
    if (cell != null) {
        switch(cell.getCellType()) {
        case Cell.CELL_TYPE_NUMERIC:
            dblValue = cell.getNumericCellValue();
            break;
        case Cell.CELL_TYPE_FORMULA:
            CellValue objCellValue = formulaEvaluation(cell);
            if (objCellValue.getCellType() == Cell.CELL_TYPE_NUMERIC) {
                dblValue = objCellValue.getNumberValue();
            }
            break;
        }
    }
    return dblValor;
} 
```

# javascript - Javascript：使用 on{x} api 获取当前 GPS 位置？

> ID：10915477
> 
> 赞同：2
> 
> 时间：2012-06-06T13:45:09.073
> 
> 标签：javascript, android, api, location

我正在玩 on{x} api，试图创建一个规则，显示你在哪里的通知（也许链接到打开谷歌地图？）每次你停车时（当你从开车到走路时/静止不动）。我在 on{x} 的演示视频中看到了它，但我没有找到规则，所以我想我会尝试自己制作它，只是为了好玩。

我在获取当前 gps 坐标时遇到了一些问题，但我似乎无法弄清楚如何使用位置 api。

这是我到目前为止所得到的：

```
device.modeOfTransport.on('changed', function(signal) {
    if (signal.previous === 'driving' && (signal.current === 'walking' || signal.current === 'atrest')) {

    }
}); 
```

如果那里有任何 javascript 大师可以看一下 api，那就太好了。这是位置api：

[https://www.onx.ms/#apiPage/location](https://www.onx.ms/#apiPage/location)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:23:02.617

看起来`modeOfTransport` `changed`处理程序没有直接向您提供位置信息。（为什么？可能是因为`modeOfTransport`只能从加速度计遥测中断言，所以甚至不涉及 GPS。）您必须`locationListener`在您的处理程序中构建并启动一个，并使用提供给该侦听器的处理程序的位置信息。

例如，您可以尝试以下方法（我或多或少地从文档中复制和粘贴拼凑而成）。

```
device.modeOfTransport.on('changed', function(signal) {
    if (signal.previous === 'driving' && (signal.current === 'walking' || signal.current === 'atrest')) {
         var listener = device.location.createListener('GPS', 5000); 
         listener.on('changed', function (signal) {
            console.info('Lat: ' + signal.location.latitude);
            console.info('Lon: ' + signal.location.longitude);
            listener.stop();
         });
         listener.start();
    }
}); 
```

# javascript - 在鼠标悬停时更改 div 背景图像并单击单独的位置

> ID：10915481
> 
> 赞同：0
> 
> 时间：2012-06-06T13:45:22.103
> 
> 标签：javascript, html, css, click, mouseover

我目前正在尝试将鼠标悬停在背景图像上并在单独的 div 中查看新图像。哪个有效（使用下面的代码），但是单击图像时我似乎无法更改它。下面是代表我要完成的工作的图像。

[1 http://pkg.madisonmottdev.com/images/1.png](http://pkg.madisonmottdev.com/images/1.png)

***当悬停或点击时（2楼相同）*** [2 http://pkg.madisonmottdev.com/images/2.png](http://pkg.madisonmottdev.com/images/2.png)

当前用于悬停的Javascript代码，可以正常工作。我只是不知道如何单击（一楼或二楼并在右侧更改）。任何帮助表示赞赏。

```
 $(window).load(function(){
        $(document).ready(function(){
            // FIRST FLOOR
            $('.floor1').mouseover(function(){
                $('.floor1').css('background', 'url("images/phase-2/first-floor-hover.a.png") no-repeat');
                $('#elevation').css('background', 'url("images/phase-2/first-floor-lg.a.png") no-repeat');
            });
            $('.floor1').mouseout(function(){
                $('.floor1').css('background', 'url("images/phase-2/first-floor.a.png") no-repeat');
                $('#elevation').css('background', 'url("images/phase-2/elevation.a.png") no-repeat');
            });

             // SECOND FLOOR
            $('.floor2').mouseover(function(){
                $('.floor2').css('background', 'url("images/phase-2/second-floor-hover.a.png") no-repeat');
                $('#elevation').css('background', 'url("images/phase-2/second-floor-lg.a.png") no-repeat');
            });
            $('.floor2').mouseout(function(){
                $('.floor2').css('background', 'url("images/phase-2/second-floor.a.png") no-repeat');
                $('#elevation').css('background', 'url("images/phase-2/elevation.a.png") no-repeat');
            });

        });
    }); 
```

HTML 代码（地板 1、地板 2 和高程设置为具有高度/宽度的背景图像）：

```
 <div id="building">
                <div id="floor">
                  <div class="floor1"></div>
                </div>

                <div id="floor">
                  <div class="floor2"></div>
                </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:10:35.460

单击时没有任何反应，因为您没有绑定到单击事件的任何侦听器。

尝试将部分代码更改为：

```
 // FIRST FLOOR
    $('.floor1').click(function(){
        $('.floor1').css('background', 'url("images/phase-2/first-floor-hover.a.png") no-repeat');
        $('#elevation').css('background', 'url("images/phase-2/first-floor-lg.a.png") no-repeat');
    });
    $('.floor1').mouseout(function(){
        $('.floor1').css('background', 'url("images/phase-2/first-floor.a.png") no-repeat');
        $('#elevation').css('background', 'url("images/phase-2/elevation.a.png") no-repeat');
    }); 
```

你会看到行为上的不同——我已经从`mouseover`一个`click`事件改变了。

您可以像这样将多个事件绑定到同一个侦听器：

`$('.floor1').bind('click mouseover', function() {...});`

编辑

在您的最后评论之后，请参阅此小提琴以实现您的要求：

[http://jsfiddle.net/BzPdB/](http://jsfiddle.net/BzPdB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:48:43.760

你追求的是这样的东西吗？

[http://jsfiddle.net/98wuW/19/](http://jsfiddle.net/98wuW/19/)

诀窍是，如果您单击了 floor1，则 floor1.mouseout 无法删除 #elevation 中的 floor1 图像。

就目前而言，您可以使用 floor1.mouseout 将#elevation 的背景图像更改回默认值。因此，假设您将鼠标悬停在 floor1 上。然后将鼠标移离 floor1。然后 floor1.mouseout 会将#elevation 的背景图像设置回默认值。

诀窍是，当您单击 floor1 时，您必须设置一个标志或其他内容，上面写着“将 floor1 图像保留在 #elevation 中”。然后在 mouseout 中，您可以检查该标志以查看是否可以删除#elevation 中的地板图像。

你的例子有点棘手，因为你有两层楼，这两层楼都可以点击，所以你必须在每次鼠标移出时检查两个标志。

# android - 实例化意图期间的错误

> ID：10915482
> 
> 赞同：1
> 
> 时间：2012-06-06T13:45:24.077
> 
> 标签：android

我对android编程完全陌生，我正在读一本名为“Hello Android”的书

基本上，这本书通过使用数独游戏示例来教我们 Android。

这是main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@color/background"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:padding="30dip"
android:orientation="vertical" >
<LinearLayout
android:orientation="vertical"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:layout_gravity="center" >
<TextView
android:text="@string/main_title"
android:layout_height="wrap_content"
android:layout_width="wrap_content"
android:layout_gravity="center"
android:layout_marginBottom="25dip"
android:textSize="24.5sp" />
<Button
android:id="@+id/continue_button"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/continue_label" />
<Button
android:id="@+id/new_button"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/new_game_label" />
<Button
android:id="@+id/about_button"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/about_label" />
<Button
android:id="@+id/exit_button"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/exit_label" />
</LinearLayout>
</LinearLayout> 
```

这是string.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="app_name">Sudoku</string>
<string name="main_title">Android Sudoku</string>
<string name="continue_label">Continue</string>
<string name="new_game_label">New Game</string>
<string name="about_label">About</string>
<string name="exit_label">Exit</string>
<color name="background">#3500ffff</color>
<string name="about_title">About Android Sudoku</string>
<string name="about_text">\
Sudoku is a logic-based number placement puzzle.
Starting with a partially completed 9x9 grid, the
objective is to fill the grid so that each
row, each column, and each of the 3x3 boxes
(also called <i>blocks</i>) contains the digits
1 to 9 exactly once.
</string>
</resources> 
```

这是旧版本的附加清单：

```
<activity android:name=".About"
android:label="@string/about_title" >
        </activity> 
```

这是 about.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dip" >
<TextView
android:id="@+id/about_content"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/about_text" />
</ScrollView> 
```

最后是 Sudoku.java

```
package org.example.sudoku;

import android.app.Activity;
import android.os.Bundle;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;

public class Sudoku extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        View continueButton = findViewById(R.id.continue_button);
        continueButton.setOnClickListener((OnClickListener) continueButton);

        View newButton = findViewById(R.id.new_button);
        newButton.setOnClickListener((OnClickListener) this);

        View aboutButton = findViewById(R.id.about_button);
        aboutButton.setOnClickListener((OnClickListener) this);

        View exitButton = findViewById(R.id.exit_button);
        exitButton.setOnClickListener((OnClickListener) this);

    }
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.about_button:
        Intent i = new Intent(this, About.class);   /** Here is the Error **/
        startActivity(i);
        break;
        // More buttons go here (if any) ...
        }
        }

} 
```

让我稍微解释一下。数独主页面由 4 个按钮组成，这本书正在教我们实现按钮，所以当用户按下它时，程序会引导用户到 about 页面（这只是一个文本页面）。错误发生在About.class上，Eclipse说没有这个类叫About。而且我不太明白为什么在意图参数中还有一个 About.class ......

和想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:54:29.850

根据您的评论........您`must have the file About.java in you project`还可以在清单中添加它的条目...

```
<activity android:name=".About"
        android:label="@string/app_name">

    </activity> 
```

所以在你的项目中将 About.java 与 Sudoku.java 并行添加，它还需要扩展 Activity ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:47:23.753

您是否在清单中写下您的活动，使用与其他活动正确或相同的包？

[http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

您能否也请张贴您的日志猫？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T13:48:50.263

你`About.java`在`org.example.sudoku`包里上课吗？

```
public class About extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);
 }
} 
```

# iphone - 捏以增大/缩小按钮的大小

> ID：10915483
> 
> 赞同：0
> 
> 时间：2012-06-06T13:45:26.730
> 
> 标签：iphone, objective-c, ios, xcode

我的屏幕上有几个按钮可以移动，但我想知道有没有人在按钮上实现过捏合手势来缩小和扩大按钮？

如果有人对实现这种功能有任何想法/帮助/示例，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:14:33.297

我会在按钮上添加一个 UIPinchGestureRecogniser，然后将它的 scale 属性应用为按钮框架上的变换。

我没有示例代码，但这是我要完成此任务的区域。

# c# - 如何在 ASP.NET MVC 的视图中调用多个操作？

> ID：10915485
> 
> 赞同：1
> 
> 时间：2012-06-06T13:45:31.610
> 
> 标签：c#, asp.net-mvc, linq, mvvm, view

问题是：

我正在使用文本框获取字符串**q**并希望将其传递给`search`控制器​​中的 3 个不同操作。即`action1(string q), action2(string q)`等等

现在我的操作语法：

```
 public ActionResult action1(string q)
  {
   var mydata = from p in fab //LINQ logic
                select new action1class
                { data1=p //assignment };
   return View("_partialAction1", mydata);
  } 
```

同样，还有另外两个动作。

我正在使用 3 种不同的操作，因为我的 LINQ 逻辑从 3 个不同的来源获取数据，因此`mydata`需要创建不同的需求。

我的问题是：我正在尝试当我单击文本框*的“搜索”按钮*`<div id="action1">`时，所有 3 个操作都应该运行并在某些标签中生成位于其他下方的部分视图。

我尝试使用`ajax.BeginForm`，但一次只能调用一个动作

```
@using (Ajax.BeginForm("action1", "Search", new AjaxOptions
{
    HttpMethod = "GET",
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "action1",
    LoadingElementId="progress"
})) 
```

我也尝试使用`ViewModel`，但问题是我无法将更大的模型与`mydata`在 LINQ 中获得的这些数据一起传递给视图。在这种情况下，我不清楚如何使用视图模型。

我使用的方法是否正确？或者还有其他方法吗？我想通过单击按钮显示所有操作的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:15:13.547

There are two types of actions are in MVC framework. The first ones are the *main actions* and they are invoked from the browser one at a time. The second type are called as [Child Actions](http://msdn.microsoft.com/en-us/library/system.web.mvc.childactiononlyattribute.aspx) and these actions can't be invoked from the browser but from the views returned by the main actions. Multiple *child actions* can be called under a *main action*. So you have to look into child actions whether they help or not.

Ex.

```
// main action that returns a view
public ViewResult Index()
{
   var model = ...
   return View(model);
}

// couple of child actions each returns a partial view
// which will be called from the index view
[ChildActionOnly]
public PartialViewResult ChildAction1()
{
  var model = ...
  return PartialView(model);
}

[ChildActionOnly]
public PartialViewResult ChildAction2()
{
  var model = ...
  return PartialView(model);
}

// index view
Index.cshtml
@model ...

@Html.Action("ChildAction1");
@Html.Action("ChildAction2");

... 
```

[http://msdn.microsoft.com/en-us/library/ee839451.aspx](http://msdn.microsoft.com/en-us/library/ee839451.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:07:30.570

为什么不将 ViewModel 传递给 partialViews。确保 ViewModel 中有不同的属性来保存 PartialView 特定数据和搜索文本。这是一个例子：

**模型**

```
public class Product
{
    public string Name { get; set; }
    public string Type { get; set; }
    public string Class { get; set; }
} 
```

**视图模型**

```
public class ProductSearch
{
    public ProductSearch()
    {
        q = string.Empty;
        Product1 = new Product();
        Product2 = new Product();
    }
    public string q { get; set; }
    public Product Product1 { get; set; }
    public Product Product2 { get; set; }
} 
```

**_Partial1.cshtml**

```
@model Test1.Models.ProductSearch

<div>Product1</div>  

@Html.TextBoxFor(a => a.Product1.Name) 
```

**_Partial2.cshtml**

```
@model Test1.Models.ProductSearch

<div>Product2</div>  

@Html.TextBoxFor(a => a.Product2.Name) 
```

**实际视图.cshtml**

```
@model Test1.Models.ProductSearch

@{
    ViewBag.Title = "ActualView";
}

<h2>ActualView</h2>

@using (Html.BeginForm())
{
    @:SearchText
    @Html.TextBoxFor(m => m.q)
    Html.RenderAction("_Partial1", Model);
    Html.RenderAction("_Partial2", Model);
    <input type="submit" runat="server" id="btnSubmit" />
} 
```

**临时数据**（您将从数据库/任何其他来源获取）

```
private List<Product> ProductsToSearch()
{
     return new List<Product>() { new Product() { Name = "Product One", Class = "A", Type = "High" }, new Product() { Name = "Product Two", Class = "A", Type = "Low" }, new Product() { Name = "Product Three", Class = "B", Type = "High" } };
} 
```

**控制器动作**

```
 public ActionResult _Partial1(ProductSearch search)
    {
        Product Product1 = ProductsToSearch().Where(a => a.Class.Equals(search.q) && a.Type.Equals("High")).SingleOrDefault();
        search.Product1 = Product1;
        return PartialView(search);
    }

    public ActionResult _Partial2(ProductSearch search)
    {
        Product Product2 = ProductsToSearch().Where(a => a.Class.Equals(search.q) && a.Type.Equals("Low")).SingleOrDefault();
        search.Product2 = Product2;
        return PartialView(search);
    }

    [HttpPost]
    public ActionResult ActualView(ProductSearch search)
    {
        return View(search);
    }

    public ActionResult ActualView()
    {
        ProductSearch search = new ProductSearch();           
        return View(search);
    } 
```

现在，如果您输入“A”`SearchText`并点击`Submit Query`，您将得到两个不同的结果（基本上使用常见的搜索文本，并且基于每个局部视图中的搜索查询，它会生成不同的结果）

![在此处输入图像描述](../Images/d77c79ece9877fdc9ee19c60c3bb44d2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:49:19.853

每个请求只能执行一项操作。如果您希望一次单击获得 3 个不同的局部视图，您将需要构建一个布局页面，其中包含您想要的 3 个局部视图，并确保您的操作接收正确的参数以执行所有局部视图渲染.

# android - sqlite3在android中创建触发器

> ID：10915486
> 
> 赞同：0
> 
> 时间：2012-06-06T13:45:36.547
> 
> 标签：android, sqlite

我使用此命令创建了表：

```
CREATE TABLE projects( p_id integer primary key autoincrement, p_name text not null , p_desc text ,p_created_at datetime null , p_updated_at datetime null ); 
```

现在我想创建一个触发器，在该触发器上将更新 p_created_at 和 p_updated_at 字段，所以我写了

这是在我写的插入查询之前，但给了我错误

```
create trigger trigger_project before insert on projects
for each row begin
set new.p_created_at=now();
set new.p_updated_at=now();
end; 
```

这给了我错误

```
Error: near "set": syntax error 
```

任何帮助表示赞赏，谢谢

而不是现在（）；也试过 datetime('now'); 但仍然没有运气:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:11:10.537

根据你不能使用just set的[文档，你需要写一个声明，比如](http://sqlite.org/lang_createtrigger.html)

`UPDATE myTable set column1 = value1`

# optimization - 何时在 lucene 搜索中调用完整的优化功能？

> ID：10915490
> 
> 赞同：1
> 
> 时间：2012-06-06T13:45:46.237
> 
> 标签：optimization, indexing, full-text-search, zend-search-lucene, full-text-indexing

我很困惑何时在 Lucene 搜索中调用完整索引优化。

我正在使用 zend_search_lucene。

```
// Open existing index
$index = Zend_Search_Lucene::open('/data/my-index');

// Optimize index.
$index->optimize(); 
```

我应该在搜索时调用此函数还是在索引后调用此函数？

# android - 将 Theme.Dialog 更改为 Android 中的 Theme.Light.Dialog

> ID：10915492
> 
> 赞同：19
> 
> 时间：2012-06-06T13:45:52.973
> 
> 标签：android, dialog, styles, themes

没有`Theme.Light.Dialog`与我正在使用的项目的其余部分一起使用`Theme.Light`。

如何更改为看起来`Theme.Dialog`像.`Theme.Light``Dialog`

我知道我必须覆盖`Theme.Dialog`style.xml 中的部分，如下所示。我应该用哪些值覆盖哪些项目？

```
<style name="dialog_light" parent="@android:style/Theme.Dialog">
    <item name="android:???????"></item>
    <item name="android:???????"></item>
</style> 
```

我可以将背景设为浅白色灰色，但按钮、微调器等在浅色主题上也有所不同，以便在浅色背景上看起来更好。

**编辑**

看起来我让它工作了。

```
<color name="black">#FF000000</color>
<color name="whitegrey">#FFF2F2F2</color>

<style name="dialog_light" parent="@android:style/Theme.Dialog">
    <item name="@android:windowBackground">@color/whitegrey</item>
    <item name="@android:textColor">@color/black</item>        
</style> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-18T22:00:26.767

看起来我让它工作了。

```
<color name="black">#FF000000</color>
<color name="whitegrey">#FFF2F2F2</color>

<style name="dialog_light" parent="@android:style/Theme.Dialog">
    <item name="@android:windowBackground">@color/whitegrey</item>
    <item name="@android:textColor">@color/black</item>        
</style> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-28T07:19:07.433

Further to the above, to avoid making up colors, I did this:

```
<!-- Makes a "light" equivalent of Theme.Dialog -->
<style name="dialog_light" parent="@android:style/Theme.Dialog">
    <item name="@android:background">@android:color/background_light</item>
    <item name="@android:textColor">@android:color/primary_text_light</item>    
</style> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-07T09:20:28.217

这个很好，谢谢！我只是稍微更改了一下：当我运行您建议的内容时，整个屏幕都涂有背景颜色，并且对话框看起来不像应有的那样（先前的活动变暗）。

所以而不是使用

```
@android:windowBackground 
```

只需使用

```
@android:background 
```

# jquery - $.getJSON JQuery - IllegalStateException

> ID：10915493
> 
> 赞同：0
> 
> 时间：2012-06-06T13:45:53.483
> 
> 标签：jquery, spring-mvc, getjson

有人可以帮帮我吗？我正在使用 JQuery $.getJSON() 根据选定的下拉列表（类别）加载一个下拉列表（子类别）的内容。

由于某种原因，我收到了 IllegalStateException。提前谢谢你。

```
<script>
    $(document)
            .ready(
                    function() {

                        // reload subcategories when changing category
                        $('#categories').change(loadSubcategories);

                    });

    // load the subcategories based on selected category
    function loadSubcategories() {
        $.getJSON('findSubcategoriesForCategory.html', {
            categoryId : $('#categories').val(),
            ajax : 'true'
        }, function(data) {
            var html = '<option value="">Select Subcategory</option>';
            var len = data.length;
            for ( var i = 0; i < len; i++) {
                html += '<option value="' + data[i].id + '">' + data[i].name
                        + '</option>';
            }
            html += '</option>';

            $('#subcategories').html(html);

        });
    }
</script> 
```

这是控制器方法的代码：

```
@RequestMapping(value = "findSubcategoriesForCategory", method = RequestMethod.GET)
public @ResponseBody
List<Subcategory> findSubcategoriesForCategory(
        @RequestParam(value = "categoryId", required = true) String categoryId) {

    List<Subcategory> returnList = new ArrayList<Subcategory>();

    try {
        returnList = categoryService
                .findSubcategoriesForCategory(categoryId);
    } catch (Exception e) {
        LOGGER.error("An Error occured when Finding sub-categories for category id: " + categoryId);
    }

    return returnList;

} 
```

java.lang.IllegalStateException: getOutputStream() 已经在 org.apache.catalina.connector.Response.getWriter(Response.java:611) at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade. java:198) 在 javax.servlet.ServletResponseWrapper.getWriter(ServletResponseWrapper.java:112) 在 org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125) 在 org.apache.jasper.runtime.JspWriterImpl.flushBuffer (JspWriterImpl.java:118) at org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:273) at java.io.PrintWriter.write(Unknown Source) at org.apache.jasper.runtime.JspWriterImpl.flushBuffer (JspWriterImpl.java:119) 在 org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:326) 在 org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:342) 在 org.apache.jsp.WEB_002dINF.jsp.include.header_jsp._jspx_meth_c_005fforEach_005f1(header_jsp.java:341) 在 org.apache.jsp.WEB_002dINF.jsp.include.header_jsp._jspx_meth_c_005fforEach_005f0(header_jsp.java)在 org.apache.jsp.WEB_002dINF.jsp.include.header_jsp._jspService(header_jsp.java:133) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 在 javax.servlet.http.HttpServlet .service(HttpServlet.java:717) 在 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) 在 org. org.apache.catalina.core.ApplicationFilterChain 上的 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 上的 apache.jasper.servlet.JspServlet.service(JspServlet.java:260)。internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646) at org.apache .catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551) 在 org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488) 在 org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java :968) 在 org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) 在 javax.servlet.http 的 org.apache.jsp.WEB_002dINF.jsp.errorMsg_jsp._jspService(errorMsg_jsp.java:69)。 org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388) 中的 org.apache.jasper 中的 HttpServlet.service(HttpServlet.java:717)。servlet.JspServlet.serviceJspFile(JspServlet.java:313) at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org .apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher .java:646）在 org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551) 在 org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488) 在 org.springframework.web。 org.springframework.web.servlet.view.AbstractView 上的 servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:229)。在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817) 在 org.springframework.render(DispatcherServlet.java:1047) 在 org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047) 渲染(AbstractView.java:250) .web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719) 在 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669) 在 org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java :574) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter( ApplicationFilterChain.java:290) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 在 org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88) at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain. java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org.apache.catalina.core .StandardContextValve.invoke(StandardContextValve.java:191) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 在 org.apache。catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol. java:602) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) 在 java.lang.Thread.run(Unknown Source)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:48:09.170

这是来自您的网络服务器的响应。前端不涉及 Java。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:51:51.130

我必须在我的 Hibernate 映射 getter 方法中添加这个 @JsonIgnore 才能使代码正常工作。

# windows - 在 Windows 上的默认浏览器中打开带有参数的本地 html 文件

> ID：10915495
> 
> 赞同：5
> 
> 时间：2012-06-06T13:46:03.750
> 
> 标签：windows, winapi, browser

我需要在默认浏览器中使用我的 C++ 程序中的参数打开磁盘上的 html 文件。

例如： c:\index.html?id=15 。

我正在使用 ShellExecute 来打开所有 url 或文件，但这一个不起作用，它会从本地文件中删除参数。

```
ShellExecute(0, NULL, "file:///c:\index.html?id=15", NULL, NULL, SW_SHOWNORMAL); 
```

它可以从命令行正常工作，即 iexplore file:///c:\index.html?id=15

我怎样才能打开那个页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T13:30:37.390

请尝试此代码。

```
int result = 0;
TCHAR app[MAX_PATH] = { 0 };

result = (int)::FindExecutable(_T("C:\\index.html"), NULL, app);
if (result > 32) {
  ::ShellExecute(0, NULL, app,
     _T("file:///C:\\index.html?id=15"), NULL, SW_SHOWNORMAL);
} 
```

# facebook - 在 FB 'like' 后发帖到墙上没有发生

> ID：10915497
> 
> 赞同：1
> 
> 时间：2012-06-06T13:46:05.893
> 
> 标签：facebook, facebook-social-plugins

我创建了一个 FB 页面，并将该 FB 页面的 Like 按钮（社交）放在我的一个网站中。

每当任何用户访问我的网站并单击 FB 赞按钮时，FB 页面都会受到喜欢（完美发生），然后会显示一个小弹出窗口以发布到 facebook，并附上我们自己的评论。每当用户添加任何评论时，它都不会发布到他的墙上。

有没有人有同样的问题？

我已经用其他一些测试页面进行了分析，它工作正常，但在一些而不是在其他一些上。这种行为在页面上非常不一致。

任何人有任何解决方案或任何想法为什么必须发生这种情况？

# java - 如何从 XML 重构 Java 子类

> ID：10915505
> 
> 赞同：0
> 
> 时间：2012-06-06T13:46:26.283
> 
> 标签：java, xml, jaxb, xml-parsing

我将有一个具有以下结构的 XML，

```
<xml>
<Header><Type>..</Type>...</Header>
<Data>...</Data>
</xml> 
```

根据该`<Type>`值，`<Data>`元素将具有不同的元素。例如

```
<xml>
<Header><Type>Int</Type></Header>
<Data><Integer>10<Integer></Data>
</xml>

<xml>
<Header><Type>Str</Type></Header>
<Data><String>JAXB Test</String></Data>
</xml> 
```

Java 类将是

```
class TypeEntity { }

class IntEntity extends TypeEntity { }

class StrEntity extends TypeEntity { } 
```

我想使用 JAXB 来解析 xml 并相应地创建子类。我怎么能做到这一点？请帮我。

编辑：实际上我会从 Web 服务中获取这些 XML。收到后，我需要将它们转换为 Java 类。现在我正在使用 DOM 解析器来识别类型并实例化 Java 子类。我想知道有没有更好的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:03:36.367

您需要为您的 XML 文档编写 XSD 模式，以便 JAXB 可以从中生成对象。

如果您不熟悉 XSD，请查看[此](http://www.codeguru.com/csharp/csharp/cs_data/xml/article.php/c19441/Understanding-XSD-Schema.htm)。

或者您可以使用一些 XML 工具从 XML 生成模式。只需搜索 XML 到 XSD 等。

当您拥有正确的文档 XSD 架构时，您需要使用某种脚本来使用 JAXB 生成对象。我更喜欢蚂蚁。

例子：

```
<taskdef name="xjc" classname="com.sun.tools.xjc.XJCTask">
    <classpath>
        <fileset dir="${lib.dir}" includes="*.jar" excludes="ant.jar"/>
    </classpath>
</taskdef>

<xjc schema="${src.main.resources}/YourXSDSchema.xsd" destDir="${your.output.dir}" package="your.package">
    <produces dir="${your.output.dir}/your/package" includes="**/*" />
</xjc> 
```

然后编译生成的类，将它们打包到`.jar`里面就可以了。

# performance - 是否可以创建同步网关

> ID：10915507
> 
> 赞同：1
> 
> 时间：2012-06-06T13:46:28.117
> 
> 标签：performance, spring-integration

我目前正在通过网关使用弹簧集成通道，并看到一个非常奇怪（和烦人）的行为。消息在发送后处理得非常晚（超过一分钟）。

由于通道由它自己的线程池异步处理，我猜这些线程根本不活跃。由于发送这些消息非常重要，我想强制在当前线程中同步处理消息。

这可能吗？

我目前的配置：

```
<int:annotation-config />
<task:executor id="integrationPool" pool-size="0-100" />
<int:poller default="true" task-executor="integrationPool" fixed-rate="50" />

<int:channel id="loggableevents">
    <int:queue />
</int:channel>
<int:channel id="outgoingevents">
    <int:queue />
    <int:interceptors>
        <int:wire-tap channel="loggableevents" />
    </int:interceptors>
</int:channel>

<int:outbound-channel-adapter channel="outgoingevents" method="handleMessage" ref="momadapter" />
<bean id="momadapter" class="my.project.mom.EventSendingMessageHandler" />

<!-- Logging -->
<int:outbound-channel-adapter channel="loggableevents" ref="loggingadapter" method="handleMessage" />
<bean id="loggingadapter" class="my.project.logging.EventLoggingHandler" />

<int:gateway id="eventgateway" service-interface="my.project.mom.EventGateway" default-request-channel="outgoingevents" /> 
```

我使用网关是为了方便，直接访问通道会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:11:44.873

只需`<queue/>`从通道中删除元素，`outgoingEvents`它将全部在调用线程上运行。

[http://static.springsource.org/spring-integration/docs/2.1.2.RELEASE/reference/html/messaging-channels-section.html](http://static.springsource.org/spring-integration/docs/2.1.2.RELEASE/reference/html/messaging-channels-section.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T14:47:44.470

如果您得到这个答案并且正在使用基于接口的网关。使用消息通道是强制性的。在这种情况下，解决方案是使用直接通道。以下代码示例显示了如何使用 java DSL 来执行此操作。

```
@Bean(name = "spa.import.zipcodes")
public MessageChannel queueRecordsChannel() {
    return MessageChannels.direct().get();
} 
```

查看此页面以获取有关 DirectChannel 的更多信息：http: [//docs.spring.io/spring-integration/reference/html/messaging-channels-section.html](http://docs.spring.io/spring-integration/reference/html/messaging-channels-section.html)

# php - php stream_socket_client 超时未按预期工作

> ID：10915508
> 
> 赞同：2
> 
> 时间：2012-06-06T13:46:28.717
> 
> 标签：php, stream-socket-client, time-limiting

我编写了一个通过 php stream_socket_client 检查 ssl vertificates 的类。

但是超时不适用于某些站点。脚本有时会等待长达 60 秒以等待某些主机的响应（似乎是 php 配置限制）。

这很令人困惑，因为我将（连接）超时设置为 2 秒。对于 ssl 传输，我看不到任何其他限制，我可以设置以减少最大连接时间/传输时间。我可以使用其他时间限制吗？

```
 $options = array( 
        "ssl" => array(
        "capture_peer_cert"       => true,
        "capture_peer_chain"      => true,
        "capture_peer_cert_chain" => true, 
        "verify_peer"             => $verify_peer,  
        "allow_self_signed"       => $allow_self_signed )
    );

    if (strlen($this->cafile) > 0) {
        $options['ssl']['cafile'] = $this->cafile;
        if (strlen($this->capath) > 0 && [..]) {
            $options['ssl']['capath'] = $this->capath;
        }
    } else {
        $options['verify_peer'] = false;
    }

    $get = @stream_context_create( $options);

    $read = @stream_socket_client("ssl://$host:443", $errno, $errstr, 2, STREAM_CLIENT_CONNECT, $get);

    if($read){
        stream_set_timeout($read, 2);
        $cert = stream_context_get_params($read);
    } else {
        $cert = false;
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T14:52:56.787

检查[http://php.net/manual/en/function.stream-set-timeout.php](http://php.net/manual/en/function.stream-set-timeout.php)以获得 Dianoga (dianoga7 [at] 3dgo.net) 响应。

# iphone - 配置文件问题

> ID：10915509
> 
> 赞同：0
> 
> 时间：2012-06-06T13:46:30.540
> 
> 标签：iphone, ios, ipad, ios5

我的 Apple 证书已过期。所以我进入了开发人员的配置区域和`Revoked`我的证书。我删除了旧证书和旧配置文件。根据我的团队负责人的通知。我将新的开发人员证书下载到我的 Mac 并将其拖入`KeyChain Access`. 现在它将我的证书显示为`valid`. 我重新下载了我的应用程序的配置文件。并将其拖入 XCode4。组织者显示它是有效的，但带有警告

`XCode Could not find a valid private key/certificate pair for this profile in the keychain.`

我的方法是否做错了什么。

我能够在 iPad 上运行我的应用程序并对其进行调试。但我不知何故在上述陈述中感觉到了一个问题。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:52:06.533

如果您没有使用新的开发人员证书重新创建配置文件（即如果您下载了旧的配置文件），那么我认为这是问题所在 - 您需要使用新证书创建一个新的配置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:58:45.510

您确实从团队负责人那里获得了证书密钥/对。苹果做了这个奇怪的事情，它实际上用“密码”签署了它的证书，以便使用你必须拥有“密码”的证书。这就是为什么您在钥匙串中获得 XCode 无法找到此配置文件的有效私钥/证书对的原因。我有同样的事情，你不能只下载新证书:(。如果我能找到说明如何做到这一点的 Apple 文档，我将在编辑中发布它。

好的，这里是文档：[https ://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW2](https://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW2)

它在“为开发提供设备”下，我希望这会有所帮助！

# clojure - 对 clojure 中的值求和并将总计添加到数据集

> ID：10915510
> 
> 赞同：2
> 
> 时间：2012-06-06T13:46:42.073
> 
> 标签：clojure

我对 clojure 很陌生，有以下数据集，我从 xml 文档中解析并显示在 excel 文件中：

```
({:Total 28, :p3percent 89.28571428571429, :p2percent 0.0, :p1percent 10.71428571428571, :APP "A", :p1 3, :p2 0, :p3 25}
 {:Total 40, :p3percent 92.5, :p2percent 0.0, :p1percent 7.5, :APP "b", :p1 3, :p2 0, :p3 37} 
 {:Total 64, :p3percent 93.75, :p2percent 0.0, :p1percent 6.25, :APP "c", :p1 4, :p2 0, :p3 60} 
 {:Total 128, :p3percent 83.59375, :p2percent 12.5, :p1percent 3.90625, :APP "d", :p1 5, :p2 16, :p3 107}
 {:Total 6, :p3percent 83.33333333333333, :p2percent 16.66666666666667, :p1percent 0.0, :APP "e", :p1 0, :p2 1, :p3 5}
 {:Total 8, :p3percent 87.5, :p2percent 12.5, :p1percent 0.0, :APP "f", :p1 0, :p2 1, :p3 7}) 
```

我想总结/平均每个键的值并在数据集中创建一个新条目，使用 APP 键“Total”，然后在最后一行中显示所有总和/平均值。这可以在 excel 中轻松完成，但我显然想先在 clojure 中完成。

我知道如何获取每个键的总和，即（应用 + 映射（：p1 数据集）），但是如何创建一个函数来遍历数据集并将总计添加为数据集中的额外行？

谢谢

D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:09:35.460

> 我想总结/平均每个键的值并在数据集中创建一个新条目，使用 APP 键“Total”，然后在最后一行中显示所有总和/平均值。

我相信以前的答案误解了这个问题。如果您想在数据集中创建一个新条目，其中包含某些键的总数和其他键的平均值，那么我的回答可能会有所帮助。

* * *

首先定义`sum`和`avg`一组数字。您可以随时改进这些功能的实现，所以现在保持简单。

```
(defn sum [coll] (reduce + coll))
;;(sum [1 2 3])
;;=> 6
(defn avg [coll] (/ (sum coll) (count coll)))
;;(avg [1 2 3])
;;=> 2 
```

为避免重复自己，请定义一个用于减少数据集的函数。

```
(defn dataset-keys [d] (reduce #(into %1 (keys %2)) #{} d))

(defn reduce-dataset
  [f val dataset]
  (reduce (fn [m k] (assoc m k (f (map k dataset))))
          val
          (dataset-keys dataset))) 
```

`reduce-dataset`期望`val`成为地图和地图`dataset`的集合，就像您的数据集一样。

用和来`reduce-dataset`定义`totals`和。`averages``sum``avg`

```
(defn totals [dataset] (reduce-dataset sum {:APP "Totals"} dataset))
(defn averages [dataset] (reduce-dataset avg {:APP "Averages"} dataset)) 
```

由于您想要数据集中某些键的总和以及其他键的平均值，因此您需要一种方法来仅选择数据集中的这些键。

```
(defn select-cols [dataset ks] (map #(select-keys % ks) dataset)) 
```

现在，您拥有了在数据集中有选择地计算总数和平均值所需的一切。

```
(totals (select-cols your-dataset [:Total :p1 :p2 :p3]))
;;{:Total 274, :p2 18, :p3 241, :p1 15, :APP "Totals"}

(averages (select-cols your-dataset [:p1percent :p2percent :p3percent]))
;; {:p3percent 88.32713293650794, :p1percent 4.728422619047618, :p2percent 6.9444444444444455, :APP "Averages"} 
```

您可以使用 conj 将结果与原始数据集结合起来。

```
(conj dataset
      (totals (select-cols dataset [:Total :p1 :p2 :p3]))
      (averages (select-cols dataset [:p1percent :p2percent :p3percent]))) 
```

这会将两行添加到数据集中，一列用于总计，另一行用于平均值。要添加单行，您可以在合并之前合并结果。

```
(conj dataset
      (merge (totals (select-cols dataset [:Total :p1 :p2 :p3]))
             (averages (select-cols dataset [:p1percent :p2percent :p3percent]))
             {:APP "Total/Avg"})) 
```

在键冲突的情况下，`merge`将始终使用它看到的最后一个值，因此在上面的示例中， 的值`:APP`将`"Total/Avg"`不是`"Totals"`or `"Averages"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:50:39.947

尝试[合并](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/merge-with)功能。检查链接中的第二个示例。
我想这就是你想要的。此功能将帮助您创建最后一个“总计”行。唯一的问题是您有一个不是数字的字段。因此，您可以将特殊函数传递给`merge-with`忽略字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T18:52:29.980

如果您只是询问生成包含相应键的总数或平均值的地图，则`reduce`可以很好地做到这一点：

```
user> (pprint (reduce #(assoc %2 :Total (+ (:Total %2) (:Total %1)))
                      {:Total 0} 条数据））
{:p1 0,
 :p3 7,
 :p2% 12.5,
 :p2 1,
 :p1% 0.0,
 :APP "f",
 :p3% 87.5,
 :总计 274}
零

```

这可以包含在一个保留原始密钥的函数中，这很重要，这样您就可以取一个密钥的总和，然后也取它的平均值：

```
(defn sum-key [key new-key map] 
  (reduce #(assoc %2 new-key (+ (%1 new-key) (%2 key))) {new-key 0} data))
#'user/sum-key
user> (sum-key :Total :Total-sum data)
{:p1 0, :p3 7, :p2percent 12.5, :p2 1, :p1percent 0.0, :APP "f", :p3percent 87.5, :Total-sum 274, :Total 8} 
```

然后可以链接此功能以汇总您想要的键

```
user> (->> data 
        (sum-key :Total :Total-sum) 
        (sum-key :p1 :p1-sum) 
        (sum-key :p2 :p2-sum))
{:p1 0, :p2-sum 18, 
 :p3 7, :p2percent 12.5, 
 :p2 1, :p1percent 0.0, 
 :APP "f", :p3percent 87.5, 
 :Total 8} 
```

* * *

如果您想要运行总计，请`reductions`改用。

# mysql - 从链接表中获取论坛主题信息中的用户名

> ID：10915516
> 
> 赞同：0
> 
> 时间：2012-06-06T13:47:10.557
> 
> 标签：mysql, sql

对于一个论坛，我想获取一个`forumTopic`附加的链接信息，`lastPostDate`比如`lastPostUserName`和`starterUserName`。

问题出现在`lastPostUserName`and`starterUserName`上。当 a`forumTopic`只有一个链接的帖子时，它似乎可以正常工作，并且两者`lastPostUserName`都已`starterUserName`填充。当有多个帖子链接到一个主题时`starterUserName`，`lastPostUserName`只有`NULL`

数据库的结构是 a `formCategory`has a number of `formTopic`the `forumTopic`has a number of`forumPost`和 a`forumPost`链接到 a `user`。

```
SELECT forumTopic.*, 
        COUNT( forumPost.id ) AS postCount,  
        MAX(forumPost.date) AS lastPostDate,
        (SELECT name FROM user AS u1 WHERE u1.id = forumPost.posterUserId AND forumPost.date = MAX(forumPost.date) )
                                AS lastPostUserName,
        (SELECT name FROM user AS u2 WHERE u2.id = forumPost.posterUserId AND forumPost.date = MIN(forumPost.date) )
                                AS starterUserName

FROM forumCategory
LEFT JOIN forumTopic ON forumCategory.id = forumTopic.forumCategoryId 
LEFT JOIN forumPost ON forumPost.forumTopicId = forumTopic.id 

WHERE forumCategory.rewrittenName='someforumcategory' 
        AND forumCategory.active='Y' 
        AND forumTopic.active='Y' 
        AND forumPost.active='Y' 

GROUP BY forumTopic.id
ORDER BY forumPost.date ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:16:35.097

试试这个

```
SELECT forumTopic.*, 
        innerv.*, 
        (SELECT name FROM user AS u1 WHERE u1.id = innerv.first_user)
                                AS startedUserName,
        (SELECT name FROM user AS u2 WHERE u2.id = innerv.last_user )
                                AS lastUserName
FROM forumTopic
LEFT JOIN forumCategory ON forumCategory.id = forumTopic.forumCategoryId 
LEFT JOIN (
SELECT forumTopicId, MAX(date) AS LAST_POSTED_dATE, MIN(date) as FIRST_POSTED_DATE,
SUBSTRING_INDEX(
GROUP_CONCAT(posterUserId ORDER BY date),
',',
1
) as first_user,
SUBSTRING_INDEX(
GROUP_CONCAT(posterUserId ORDER BY date),
',',
-1
) as last_user, count(1) as posts_under_topic
FROM forumPost where forumPost.active='Y' 
GROUP BY forumTopicId ) innerv ON innerv.forumTopicId = forumTopic.id 
WHERE forumCategory.rewrittenName='someforumcategory' 
        AND forumCategory.active='Y' 
        AND forumTopic.active='Y' 
```

子查询 (innerv) 过滤活动记录并按 topicId 对 forumPost 中的记录进行分组。

# c - 在 C 中显示#define 值

> ID：10915520
> 
> 赞同：0
> 
> 时间：2012-06-06T13:47:29.097
> 
> 标签：c, c-preprocessor

我有一系列来自此类库文件头的#defines：

```
typedef int Lib_error;   

#define   LIB_ERROR_A      ((Lib_error) 0x0000) 
#define   LIB_ERROR_D      ((Lib_error) 0x0100)                   
#define   LIB_ERROR_F      ((Lib_error) 0x0200)                      
#define   LIB_ERROR_K      ((Lib_error) 0x0300)                
#define   LIB_ERROR_O      ((Lib_error) 0x0400)                
#define   LIB_ERROR_P      ((Lib_error) 0x0500)
#define   LIB_ERROR_R      ((Lib_error) 0x0600) 
#define   LIB_ERROR_X      ((Lib_error) 0x0700)             
#define   LIB_ERROR_Y      ((Lib_error) 0x0800) 
#define   LIB_ERROR_M      ((Lib_error) 0x0900) 
 /* and so on */ 
```

有什么办法可以分开我可以打印这些值，例如

```
uint MyError;
   /* printf("Error = %s",MyError); It should print the string LIB_ERROR_F instead of say 0x200 */ 
```

我可以为此使用很多 if else 但我想知道是否有更聪明的方法。请注意，无论如何我都无法更改库头文件的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T13:50:25.133

人们似乎对它们有复杂的感觉，但[*X-macros*](http://www.drdobbs.com/184401387)是一种可能的解决方案。

但是，如果您无法更改标题，那么您仅有的两个选项（AFAIK）是：

*   手动进行
*   构建过程中某种形式的代码生成步骤。在您的情况下，应该可以通过解析头文件来实现`sed`（假设您正在使用 Linux）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T13:55:01.427

没有一种简单或自动的方法可以做到这一点。您必须自己生成数字和名称列表，并提供查找函数来映射数字和名称。

你可以看看博文[“枚举、字符串和懒惰”](http://labs.mudynamics.com/2007/01/03/enums-strings-and-laziness/)中的想法；它有一些可能对您有所帮助的想法。[（这与Oli Charlesworth](https://stackoverflow.com/users/129570/oli-charlesworth)提到的 Dobbs 博士的[X-Macros](http://www.drdobbs.com/184401387)密切相关；那里的文章声称该技术可以追溯到 60 年代，尽管它必须使用 C 以外的语言，因为当时 C 不存在。 )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:54:46.700

警告：下面的代码片段只是一个示例。它可以即兴创作很多，这是由你来做的。:)

定义如下结构：

```
typedef struct ErrorStorage
{
  Lib_error err;
  char err_string[100];
}ErrNoStore;

ErrNoStore arrErr[25];

arrErr[0].err = LIB_ERROR_A;
strcpy(arrErr[0].err_string, "LIB_ERROR_A");
/... and so on .../ 
```

然后在代码中定义一个这样的函数并调用它

```
void display_error(Lib_error errnum)
{
  int i = 0;

  for(i=0; i<25;i++)
  {
    if(errnum == arrErr[i].err)
    {
       printf("%s\n", arrErr[i].err_string);
    }
  }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T13:55:33.573

只需通过用某种脚本语言解析这些定义来生成一个表。应该很容易将这些定义转换为常量代码数组的声明，然后可以迭代的字符串结构。
假设库不经常更改，您只需要这样做一次，因此您不需要为脚本正确性等操心。

# c++ - RegOpenKeyEx 的奇怪行为

> ID：10915529
> 
> 赞同：2
> 
> 时间：2012-06-06T13:48:01.220
> 
> 标签：c++, c, windows, registry

在工作中我遇到了我们产品的一个奇怪行为，发现可以归结为 Windows API RegOpenKeyEx 的奇怪行为。下面是我的测试代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>

int main(int argc, char* argv[])
{
    HKEY hk;
    LONG lreturn = RegOpenKeyEx(HKEY_LOCAL_MACHINE, 
    TEXT("Software\\Mercury Interactive\\LoadRunner\\Vugen\\Logger\\media"),
    0, 
    KEY_READ, 
    &hk ); 

    if(lreturn==ERROR_SUCCESS)
    {
        printf("YES!\n");
    }
    else
    {
        printf("NO!\n");
    }
    char a ;
    scanf("%c ", &a);

    return 0;
} 
```

在我的本地机器上，上面的程序提示“是”，而在另一个远程虚拟机上运行时，它会输出“否”。

在两台机器上，注册表项“Software\Mercury Interactive\LoadRunner\Vugen\Logger\media”存在于 HKEY_CURRENT_USER 而不是 HKEY_LOCAL_MACHINE 下。

所以我很困惑为什么它在本地机器上输出“YES”？更奇怪的是，为什么它在两台机器上的行为不同？本地机器是Win7 64bit。远程虚拟机是Win7 32bit。该程序编译为 32 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:59:06.467

这听起来有点像[Registry Virtualization](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)，如果本地机器在 VirtualStore 中有一个条目（开发过程中以前的 Create 调用？）即使在 HKLM 下不存在密钥，open 调用也会成功。

要深入了解这一点，您可以运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx) ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:21:23.347

使用该`FormatMessage( ... )`函数显示更有意义的错误描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:53:30.127

远程计算机上可能不存在该密钥，或者您没有访问权限。

检查[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx)，以及它返回的错误代码。

# facebook - 权限传播

> ID：10915530
> 
> 赞同：0
> 
> 时间：2012-06-06T13:48:05.377
> 
> 标签：facebook, authentication, permissions

我们正在尝试使用联系人 friends_birthday 权限进行访问。

保存应用程序配置后，我们收到以下消息：“更改已保存。请注意，您的更改可能需要几分钟才能传播到所有服务器。”

这是两周前，但我们仍然无法访问联系人生日。

我们怎么能做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:42:46.700

我猜您正在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)的应用设置中更改此信息， 您的客户如何登录您的应用？您是否在那里更新了权限请求？

# python - 如何进行从对象到字典的自定义转换？

> ID：10915532
> 
> 赞同：6
> 
> 时间：2012-06-06T13:48:10.673
> 
> 标签：python

我有一个 Python 类，它存储一些字段并具有一些属性，例如

```
class A(object):
  def __init__(self, x, y):
    self.x = x
    self.y = y

  @property
  def z(self):
    return self.x+1 
```

我需要对班级进行哪些更改才能做到

```
>>> a = A(1,5)
>>> dict(a)
{'y':5, 'z':2} 
```

我在哪里指定我要返回`y`和`z`？我不能只使用`a.__dict__`，因为它会包含`x`但不包含`z`. 我希望能够指定任何可以使用`__getattribute__`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-06T13:57:32.823

向您的类添加一个`__iter__()`方法，该方法将对象项的迭代器作为键值对返回。然后，您可以将对象实例直接传递给`dict()`构造函数，因为它接受一系列键值对。

```
def __iter__(self):
    for key in "y", "z":
        yield key, getattr(self, key) 
```

如果您希望这更灵活一点，并允许在子类（或以编程方式）上轻松覆盖属性列表，您可以将键列表存储为类的属性：

```
_dictkeys = "y", "z"

def __iter__(self):
    for key in self._dictkeys:
        yield key, getattr(self, key) 
```

如果您希望字典包含所有属性（包括从父类继承的属性），请尝试：

```
def __iter__(self):
    for key in dir(self):
        if not key.startswith("_"):
            value = getattr(self, key)
            if not callable(value):
                yield key, value 
```

这不包括以“_”开头的成员以及可调用对象（例如类和函数）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T13:54:11.603

我认为解决这个问题的合理方法是创建一种`asdict`方法。当您说要指定要 dict 包含哪些键时，我假设您对调用方法时传递的信息感到满意。如果这不是你的意思，请告诉我。（这包含[kindall](https://stackoverflow.com/questions/10915532/how-can-i-make-a-custom-conversion-from-an-object-to-a-dict/10915645#comment14235676_10915645)的优秀建议。）

```
class A(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    @property
    def z(self):
        return self.x+1

    def asdict(self, *keys):
        if not keys:
            keys = ['y', 'z']
        return dict((key, getattr(self, key)) for key in keys) 
```

测试：

```
>>> A(1, 2).asdict('x', 'y')
{'y': 2, 'x': 1}
>>> A(1, 2).asdict()
{'y': 2, 'z': 2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:56:26.530

解决此问题的一种天真的方法如下。它可能不足以满足您的需求，但我只是指出它以防您错过它。

```
>>> dict(y=a.y, z=a.z)
>>> {'y': 5, 'z': 2} 
```

# java - JButton 没有正确移除

> ID：10915536
> 
> 赞同：3
> 
> 时间：2012-06-06T13:48:24.480
> 
> 标签：java, swing, jbutton

我有一个 JPanel，其中包含一个带有 ActionListener 的 JButton。点击一定次数后，需要移除 JButton。但是，当我在其上调用 remove() 时，我得到一个不会消失的按下按钮。

这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
public class SetuPanel extends JPanel {
   private JTextField user = new JTextField();
   private JLabel label = new JLabel();
   private JButton submit = new JButton("Submit");
   private int phase = 0;
   public SetuPanel() {
      super(new FlowLayout());
      user.setPreferredSize(new Dimension(120,22));
      submit.addActionListener(new Submit());
      label.setText("Enter Desired Username:");
      add(label);
      add(user);
      add(submit);
   }
   private void remov(JComponent jc) {
      remove(jc);
      validate();
   }
   private class Submit implements ActionListener {
      public void actionPerformed(ActionEvent e) {
         System.out.println(user.getText());
         if (phase == 2) {
            phase++;
            label.setText("Playing!");
            remov(submit);
         } 
      }
   }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T13:53:39.277

*   `submit.setVisible(false)`如果您需要`JButton`在屏幕上再次看到它，请致电（而是），

*   你必须打电话给容器`revalidate()`和 `repaint()`

*   `JPanel`不能直接访问，因为你打电话`class extends JPanel`，那么你必须打电话

.

```
remove(jc);
revalidate();
repaint() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:56:29.603

除非您在未发布的代码中对其进行编辑，否则`phase`只会在 if 块内递增。因此，`phase`永远不会变成 2。你想`phase`每次`ActionListener`调用时都递增吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:39:23.643

`repaint()`只有在调整大小/重新定位/更改面板布局的情况下，才会在屏幕上自动调用该方法（由重绘管理器）。如果添加组件，则它不会自行显示。您必须显式调用`repaint()`/`revalidate()`方法以确保组件出现在屏幕上。这并没有错。

我建议您这样做：
要删除：

```
JPanel.remove(component); // Remove component from your JPanel
JPanel.revalidate();
JPanel.repaint(); // Repaint a JPanel 
```

添加：

```
JPanel.add(component); // Add component to JPanel
JPanel.revalidate();
JPanel.repaint(); // Repaint a JPanel 
```

你必须把`this`而不是`JPanel`工作在你的情况下。

# grid - 如何从 kendoui 网格打开详细信息弹出窗口

> ID：10915541
> 
> 赞同：4
> 
> 时间：2012-06-06T13:48:45.977
> 
> 标签：grid, kendo-ui

我正在尝试打开一个详细信息弹出窗口以显示有关 kendoUI 网格中记录的更多详细信息。

我看过这个样本：[http ://demos.kendoui.c​​om/web/grid/detailtemplate.html](http://demos.kendoui.com/web/grid/detailtemplate.html)

但不是网格，我想打开一个弹出窗口，传递所选记录的 ID。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:18:45.760

你见过自定义弹出示例吗？

[http://demos.kendoui.c​​om/web/grid/custom-command.html](http://demos.kendoui.com/web/grid/custom-command.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-07T18:57:36.450

Kendo Grid 有自己的弹出编辑表单，可以处理这个问题，也可以使用模板进行自定义。

[http://demos.telerik.com/kendo-ui/grid/editing-popup](http://demos.telerik.com/kendo-ui/grid/editing-popup)

[http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#configuration-editable.template](http://docs.telerik.com/kendo-ui/api/javascript/ui/grid#configuration-editable.template)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:24:24.487

很简单。订阅 onChange 事件并提醒选择的 id。我假设您的意思是属性ID。：

```
function onChange(arg) {
    var selected = $.map(this.select(), function(item) {
                        return $(item).attr("id");
                    });

                   alert(selected);
                }

$(document).ready(function() {
                    $("#grid").kendoGrid({
                        dataSource: {
                            data: createRandomData(50),
                            pageSize: 5
                        },
                        change: onChange,
                        columns: [
                            {
                                field: "FirstName",
                                title: "First Name"
                            },
                            {
                                field: "LastName",
                                title: "Last Name"
                            },
                            {
                                field: "Age"
                            }
                        ]
                    });
                });​ 
```

# java - 可供选择的接口集合，Java

> ID：10915544
> 
> 赞同：3
> 
> 时间：2012-06-06T13:48:47.593
> 
> 标签：java

考虑包裹的对象`DataContainer`将被分发给客户

```
// Will be handed out
public interface DataContainer 
```

为了使用它，客户端当前需要知道将对象转换为：

```
public interface ConcreteObject_1_Container extends DataContainer
public interface ConcreteObject_2_Container extends DataContainer 
```

是否可以同时提供`ConcreteObject1Container`和`ConcreteObject2Container`作为可供选择的选项，类似于如何`Enum`选择选项？

**而不是**用户神奇地知道使用`FileContainer`

```
 // user knows
FileContainer   fileContainer   = (FileContainer) 
                ContainerFactory.getContainerFor(DataSource.FILE, 
                                                 TREAT_AS_SOURCE); 
```

**我想**

```
 // user selects
FileContainer   fileContainer   = (GenericContainer.FileContainer) 
                ContainerFactory.getContainerFor(DataSource.FILE, 
                                                 TREAT_AS_SOURCE); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:02:51.540

你可能应该改变你的设计。任何一个：

1.  客户端只使用 on 上的方法`DataContainer`，而不关心它是什么实现，在这种情况下可以避免强制转换，或者
2.  the client is actually coupled to the implementation, so should just use the implementation types directly (e.g. with two different methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:53:18.043

如果您可以使 getConatainerFor 成为泛型方法，那么它将能够使用类型推断返回特定类型。

# asp.net - web.config 转换器什么都不做

> ID：10915547
> 
> 赞同：0
> 
> 时间：2012-06-06T13:48:54.080
> 
> 标签：asp.net, web-config, transformer

我正在尝试使用 web.config 转换器，但它什么也没做。这是我的 web.config 的最后一部分：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IUserInterfaceService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />

      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>

</bindings>
<client>
  <endpoint address="http://[WhiteOPS User Interface]:[Port]/UIService/UserInterfaceService/"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IUserInterfaceService"
    contract="UserInterface.IUserInterfaceService" name="BasicHttpBinding_IUserInterfaceService" />
</client> 
```

这是我的 web.debug.config：

```
<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <endpoint name="BasicHttpBinding_IUserInterfaceService" address="http://localhost:80/UIService/UserInterfaceService/"
   xdt:Transform="SetAttributes" xdt:Locator="Match(name)" /> 
```

当我在调试配置中运行（带或不带调试模式）时，我收到此行无法编译的错误：

```
<endpoint address="http://[WhiteOPS User Interface]:[Port]/UIService/UserInterfaceService/"
binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IUserInterfaceService"
contract="UserInterface.IUserInterfaceService" name="BasicHttpBinding_IUserInterfaceService" /> 
```

那么为什么没有发生转变呢？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:54:53.447

您需要以与其他 web.config 相同的结构构建它。

所以你需要用相同的`<client>`标签包裹它，以便转换器可以在相同的位置找到它。

```
<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <client>
      <endpoint name="BasicHttpBinding_IUserInterfaceService" address="http://localhost:80/UIService/UserInterfaceService/" xdt:Transform="SetAttributes" xdt:Locator="Match(name)" />
  </client> 
```

希望这可以帮助！

# ruby-on-rails-3 - 在 Rails 测试中对未反映在数据库中的对象的更改？

> ID：10915550
> 
> 赞同：1
> 
> 时间：2012-06-06T13:49:05.360
> 
> 标签：ruby-on-rails-3

我有一个 Rails 3 应用程序，我想在其中编写一个测试用例？当测试用例加载时，我可以看到它正在创建与数据库中的固定装置相对应的对象。但是，如果我更改测试用例中的对象或创建另一个对象，它们不会反映在数据库中。此外，如果我发现新创建的对象正确发生。

这里发生了什么？另外，我怎样才能让更改反映在数据库中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T15:15:57.060

在您的 test_helper.rb 中，use_transactional_fixtures 选项可能设置为`true`. 这意味着每个测试都包含在数据库事务中。事务（在 MySQL InnoDB 中）必须使用“COMMIT”进行持久化。Rails 测试框架只是不这样做，因此您的数据库在每次测试后都处于新状态。因此，您的更改将被回滚。

事务中的更改只能由启动它的数据库连接看到，从外部（在您的情况下是`rails db`命令）它们不会显示出来。

我希望这有帮助。

# html - 测试本地数据库（websql）是否包含所需的新字段，如果没有则添加它们

> ID：10915552
> 
> 赞同：1
> 
> 时间：2012-06-06T13:49:08.303
> 
> 标签：html, persistence, web-sql, local-database, opendatabase

我正在使用 PhoneGap 和 jQueryMobile 为 iOS 和 Android 构建一个跨平台的 HTML/Javascript 应用程序，并且我正在使用本地数据库 (localdatabase/websql) 的一个表中的一些新字段（除其他外）升级我的应用程序。

**挑战** 我想确保当数据库使用新表字段、现有用户数据扩展时，用户数据不会被删除或锁定在无法访问的旧版本数据库中。

**背景：** 我的应用程序有一个用户数据的本地数据库（收入和支出，加上一些设置）。这些数据需要持久化，当我开始时，要走的路是使用 HTML5 localDatabase 功能，因为它是持久的，并且可用于 iOS 和 Android 浏览器以及大多数桌面浏览器。

我正在使用一个名为 persistenceJS 的 Javascript 插件/库/thingy 来使处理 localdb 变得更容易一些。但我的问题并不是针对persistenceJS 的。

我正在开发一个新版本的应用程序，它使用了设置表中的一些新字段。因此，当这些用户下载并运行新应用程序时，它必须测试他们的设置表是否包含该字段，如果没有，则必须创建该字段。

我该如何做这个测试？我看到了两条思路：

1.  使用数据库标签...在 openDatabase 函数中使用。这似乎被一些开发人员用来存储版本号。我对这个选项的问题是我只知道如何使用 openDatabase 打开一个数据库（如果不存在则创建一个新数据库），并在数据库尚不存在时专门运行回调。因此，如果我在标签中指定诸如“v2”之类的内容时打开表，它会创建一个新表吗？如果是这样，它会将旧表的值复制到新表中吗？

2.  检查表字段是否存在...我可以使用 openDatabase 然后测试表字段是否存在。如果他们没有，我可以添加它们。每次用户打开他们的应用程序时都会运行测试，这似乎有点原始。

顺便说一句：我知道 webSQL/localDb 已被霸主弃用，但它仍然是我的工具，我现在想坚持使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:02:16.853

我在这里找到了答案：http: [//blog.maxaller.name/2010/03/html5-web-sql-database-intro-to-versioning-and-migrations/](http://blog.maxaller.name/2010/03/html5-web-sql-database-intro-to-versioning-and-migrations/)。

基本上，您只需使用新旧版本标签应用 changeVersion 方法。如果您没有标签，则旧标签是“”。在重新标记时，webSQL 会悄悄地将新模式应用于旧数据库。在我的情况下，这意味着添加新字段。

我链接到的教程真的很棒（功能也是如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:39:45.937

我正在添加另一个答案，因为我已经了解了有关 localDb opendatabase 和迁移它的更多信息。

提醒一下，openDatabase 采用以下参数： name -（字符串）数据库版本标签的名称 -（字符串）要打开的版本显示标签 -（字符串）似乎无用的无用显示名称 max size - (int) 最大安全大小为 5 * 1024 * 1024 新创建的 -= (function) 如果 db 以前不存在则被触发

将 openDatabase 的输出分配给一个变量是最明智的。IE

myapp.db = openDatabase('mydb','','我的数据库',5*1024*1024,newlyCreatedCallback);

首先，使用可用作 openDatabase 的第五个参数的“新创建的”回调似乎是明智的。仅当没有具有您指定参数的数据库时才会触发。为防止在您的数据库已经存在时触发此回调，请确保您将名称、显示标签和最大大小设置为与首次创建数据库时使用的值完全相同。

这样做的原因是，如果数据库是第一次创建的，您肯定知道您不需要进行任何迁移。您可以直接进入添加表和字段的函数。我推荐使用persistenceJS，一个帮助你读取和操作本​​地数据库的工具。

在调用 openDatabase 之前，明智的做法是使用 jQuery 创建一个自定义事件 'dbopen'，其处理程序将执行迁移。这个处理程序可以由两个事件触发。第一个是我们刚刚讨论的“新创建的”回调。第二个是您在调用 openDatabase 后定义的 setInterval。间隔必须检查您将 openDatabase 输出分配给的 myapp.db 变量是否存在。

创建 dbopen 自定义事件的原因是，如果您添加了一个“新创建的”回调来触发一大堆事件并在之后继续您的代码流，那么您将需要一个类似的过程用于“非新创建”场景。执行此操作的 openDatabase 没有回调，因此您必须手动检测本地数据库的创建并在它存在时立即触发“dbopen”。

我为此使用了 window.setInterval。确保使用 jquery 的 .one() 函数创建自定义的“dbopen”事件，该函数最多会触发一次。否则，如果数据库是新创建的，您将在“新创建”回调触发时触发一次 open 事件，并在 myapp.db 变量存在时触发一次。

# php - 重定向 - 无法加载源：网站

> ID：10915555
> 
> 赞同：0
> 
> 时间：2012-06-06T13:49:19.937
> 
> 标签：php, html, header, firebug

我需要一些关于这个错误的支持，我已经用谷歌搜索了它，但似乎找不到任何可以解决我的问题的东西。

当我尝试从我的 index.php 页面重定向到同一服务器上的另一个页面时，我在 Firebug 中收到此错误。它还不断刷新（30 多次）并且无法完全加载。

```
Failed to load source for: https://www.example.com/ 
```

在索引页面中：

```
<?php

header('Location:index2.php');
exit;
?> 
```

而 index2.php 我没有 PHP。

.htaccess：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:13:13.977

它归结为一个简单的 iframe，它位于页面上并将标题重定向回主索引页面。已删除，问题已解决。

感谢您的所有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:52:50.120

那是页面上的包含吗？尝试添加

```
header('HTTP/1.0 200 OK'); 
```

在您的位置上方。

# javascript - 删除播放列表时如何从 Spotify 应用程序进行检查

> ID：10915559
> 
> 赞同：0
> 
> 时间：2012-06-06T13:49:35.580
> 
> 标签：javascript, api, spotify, playlist

我正在寻找一种方法来检查播放列表何时在 Spotify 应用程序中被删除。在当前的[API Docs](https://developer.spotify.com/technologies/apps/docs/beta/c49e02a392.html)中，没有 REMOVE 事件，所以假设有这个用例

*   用户从应用程序的曲目列表中添加播放列表
*   该应用程序将播放列表的名称存储在某处（例如 localStorage）
*   用户从 Spotify 侧边栏中删除应用程序
*   用户返回应用程序，并尝试从同一曲目列表中再次添加播放列表；
*   由于播放列表没有绑定 REMOVE 事件，因此应用无法知道播放列表是否已被删除，因此

    *   如果它检查 localStorage 中的播放列表，现在将添加新的播放列表（错误）；
    *   如果没有进一步检查，相同的播放列表将被添加两次；

有什么办法处理这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:14:51.080

您是正确的，没有 REMOVE 事件。然而，仍然有一个名为 subscribed 的属性会告诉你播放列表是否被订阅。

[https://developer.spotify.com/technologies/apps/docs/beta/c49e02a392.html](https://developer.spotify.com/technologies/apps/docs/beta/c49e02a392.html)

如果您在渲染之前和/或即将添加播放列表时检查，您可以制作一个 UI 来显示是否添加了播放列表，并确保您没有添加两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:00:10.620

您可以在 windows/mobile API 中订阅一个播放列表删除事件。查看此链接了解更多详情：

[playlist_removed](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/structsp__playlistcontainer__callbacks.html#ad49b8c0f44f6c05e4ab3562b023f0928)

# c# - 我可以在我的应用程序中使用免费的 Diff 工具参考吗？

> ID：10915560
> 
> 赞同：0
> 
> 时间：2012-06-06T13:49:38.863
> 
> 标签：c#, diff

我需要比较两个字符串之间的差异并显示差异。
就像notepad++比较插件一样。

我查看了[http://code.google.com/p/google-diff-match-patch/](http://code.google.com/p/google-diff-match-patch/)

这正是我所需要的，但它受版权保护，可能无法使用。

我正在用 C# 开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:08:29.237

您指的是[最长公共子序列问题](https://en.wikipedia.org/wiki/Longest_common_subsequence_problem)。wiki 页面有伪代码，如果您想编写自己的代码，可以从该代码开始。

无耻的插件......我以前在这里写过这个：http: [//sethflowers.com/blog/basic-diff-with-a-generic-solution-to-the-longest-common-subsequence-problem/](http://sethflowers.com/blog/basic-diff-with-a-generic-solution-to-the-longest-common-subsequence-problem/)

您基本上有一种方法可以计算差异矩阵，该矩阵包含有关两个字符串或集合之间不同之处的信息。然后，您可以通过矩阵回溯以得出您的“漂亮”输出，显示实际差异。

# image - Magento：上传图片时出错，响应：管理员登录表单

> ID：10915561
> 
> 赞同：3
> 
> 时间：2012-06-06T13:49:45.037
> 
> 标签：image, magento, upload

Magento 后端中的图像上传不起作用。

进度条上升到 100%，然后 => 错误。

服务器响应的内容：来自 admin-login-form 的 Html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:06:10.963

如果您在后端使用 HTTPS 并且 https 域与 HTTP 域不同，您可能会遇到一些错误。如果您做得对，请尝试禁用 Flash 上传器。您可以使用**No Flash Image Uploader**插件来做到这一点。

如果 HTTPS 没有问题，您的问题可能会得到解决。

该插件可在[Magento Connect](http://www.magentocommerce.com/magento-connect/no-flash-image-uploader.html)获得。

Magento Connect 2.0 的扩展密钥是

> [http://connect20.magentocommerce.com/community/Dull_Uploader](http://connect20.magentocommerce.com/community/Dull_Uploader)

它也适用于 Magento 1.7。

# php - 如何使用 Sqlsrv 获取最后一个查询的运行时间？

> ID：10915562
> 
> 赞同：1
> 
> 时间：2012-06-06T13:49:46.740
> 
> 标签：php, sql-server

我正在使用 PHP 5 和 sqlsrv 数据库驱动程序。我将 QueryTimeout 设置为 15 秒，因为我要反复访问许多不同的服务器，如果我遇到超时，我需要停止操作并访问下一个服务器。

目前我只是使用一个变量来跟踪开始时间和结束时间，如果它是`>=`我的 QueryTimeout 则中止，但是有没有办法从 sqlsrv 驱动程序本身获取*实际查询时间？*[我没有在sqlsrv 函数列表中](http://www.php.net/manual/en/ref.sqlsrv.php)看到任何看起来有帮助的东西。我希望能够获得最后一次查询的时间，而不是将每个查询包装在获取当前时间的变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:57:27.893

因为我不熟悉 SQL Server、T-SQL`sqlsrv`等，所以只是在黑暗中拍摄。

[http://msdn.microsoft.com/en-us/library/ms189741.aspx](http://msdn.microsoft.com/en-us/library/ms189741.aspx)

好像可以`SELECT last_elapsed_time FROM sys.dm_exec_query_stats`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:58:08.873

你可以使用这个：

```
DECLARE @start_time DATETIME, @end_time DATETIME
SET @start_time = CURRENT_TIMESTAMP

sql code here

SET @end_time = CURRENT_TIMESTAMP
SELECT DATEDIFF(ms, @start_time, @end_time) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-01T11:40:06.520

将其放在查询的开头：

```
SET STATISTICS TIME ON 
```

当您查看输出结果时，它们将包括时序统计信息。例如

```
SQL Server Execution Times:
    CPU time = 47 ms,  elapsed time = 109 ms. 
```

编辑：您必须将 sqlsrv 设置为不使用此命令将警告作为错误返回：

```
sqlsrv_configure('WarningsReturnAsErrors', false); 
```

在 sqlsrv_errors() 中返回统计信息文本

# c# - “记住我”无法在服务器上运行

> ID：10915563
> 
> 赞同：3
> 
> 时间：2012-06-06T13:49:52.147
> 
> 标签：c#, asp.net-mvc-3, session, cookies

我正在实现“记住我”功能，我希望用户不必再次输入登录名/密码。

它似乎在本地工作，但在共享主机中，它持续大约 15 分钟然后注销。这是代码：

**控制器**：

```
FormsAuthentication.SetAuthCookie("username", true); 
```

**网络配置**：

```
<authentication mode="Forms" >
    <forms loginUrl="~/Account/LogOn" timeout="262974" cookieless="UseCookies" />
</authentication>
<sessionState mode="InProc" timeout="262974" cookieless="UseCookies" /> 
```

**编辑**

我已经添加了 sessionState，但仍然是同样的问题，在本地而**不是在服务器上**工作？

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:52:54.440

查看 web.config 中的[sessionstate](http://msdn.microsoft.com/en-us/library/h6bb9cz9(v=vs.100).aspx)元素。例如：

```
<sessionState mode="InProc" timeout="60" /> 
```

查看以下 SO 问题，了解web.config 中[sessionstate](http://msdn.microsoft.com/en-us/library/h6bb9cz9(v=vs.100).aspx)元素和[forms元素之间的](http://msdn.microsoft.com/en-us/library/1d3t3c61.aspx)[差异： 表单身份验证超时和会话超时的差异](https://stackoverflow.com/questions/2178176/differences-in-forms-auth-timeout-and-session-timeout)

@womp[接受的](https://stackoverflow.com/a/2178224/444610)[答案](https://stackoverflow.com/users/63756/womp)如下：

> 每次新用户访问该网站时都会开始一个会话，无论他们是否匿名。身份验证与 Session 关系不大。
> 
> 身份验证超时是身份验证 cookie 在用户浏览器上的有效时间。一旦 cookie 过期，他们必须重新进行身份验证才能访问站点上的受保护资源。
> 
> 因此，如果 Session 在 Authentication cookie 之前超时 - 它们仍然经过身份验证，但它们的所有会话变量都会消失，并且如果您在检查空值和其他因缺少会话而带来的情况时不遵守纪律，可能会导致您的网站出现错误。
> 
> 如果 Authentication 在会话之前超时，那么他们的所有会话变量仍然存在，但他们将无法访问受保护的资源，直到他们再次登录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T21:08:22.210

我终于找到了解决方案，我不得不使用`StateServer`而不是`InProc`机器密钥，这是完整的解决方案：

**控制器：**

```
FormsAuthentication.SetAuthCookie("username", true); 
```

**网络配置：**

```
<authentication mode="Forms" >
    <forms loginUrl="~/Account/LogOn" timeout="262974" cookieless="UseCookies" />
</authentication>

<sessionState mode="StateServer" timeout="262974" cookieless="UseCookies" />

<machineKey validationKey="5BAE63F50C69C1BBB7BFC2E696674389C307E28E9DEB60FB273B85CAD8FC3C2261FB13DF92B90A99C6EB684FDB1F6E3E92E1A42083EB77B5918126DD52245FB5" decryptionKey="11F6FE0C790413FFF3E230387168016B212216DEF727C4157CDDD0558BEAE5B7" validation="SHA1" decryption="AES" /> 
```

*我与Arvixe*有一个共享主机，在他们的支持中我找到了解决方案：[support.arvixe.com](https://support.arvixe.com/index.php?/Knowledgebase/Article/View/143/11/aspnet-session-state)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T07:31:18.483

转到：ASP.NET 设置并滚动到会话设置将“值”无更改为“表单”它会完成！ [![转到身份验证模式](../Images/448fea4e7f41ea3a3b6ed9ebfb84975a.png)](https://i.stack.imgur.com/oCkaT.jpg)

# jquery - jQuery 循环通过 ASP.NET gridview asp.net

> ID：10915566
> 
> 赞同：2
> 
> 时间：2012-06-06T13:50:06.880
> 
> 标签：jquery, asp.net

假设我在我的 aspx 页面中有 gridview 并且 gridivew 有很多行和 3 列。列是

选择 - 复选框，名字 - 文本框，姓氏 - 文本框等

我想通过 jquery 遍历 gridview 并从选中复选框的那一行中读取那些文本框值。

## 网格视图看起来像

```
<asp:GridView
    id="GridView1"
    DataSourceID="srcMovies"
    DataKeyNames="Id"
    Runat="server" AutoGenerateColumns="false"> 
```

```
<asp:TemplateField>
    <ItemTemplate>
    <asp:Label ID="lblslno" runat="server" />    
    </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField>
    <ItemTemplate>
    <asp:TextBox ID="txtFName" runat="server" />    
    </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField>
    <ItemTemplate>
    <asp:TextBox ID="txtLName" runat="server" />    
    </ItemTemplate>
</asp:TemplateField>

</Columns>
</asp:GridView> 
```

如果选中复选框，我有 jquery 代码从每一行读取文本框值...这里是代码

```
 <script type="text/javascript">
 $(document).ready(function () {
     var sum = 0;
     $('#btn1').click(function () {
         $('#tr').each(function () {
             if ($(this).find('input:checkbox').attr("checked"))
                 sum += parseInt($(this).find('input:text').attr("value"));
         });
         window.alert(sum.toString());
     });
 });
</script> 
```

我关心的是如何从 txtFName 和 txtLName 文本框中读取数据并在每一行上标记 lblslno。任何人都可以朝着正确的代码前进。谢谢

## 我有一个很好的解决方案....在这里

```
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.js" type="text/javascript"></script>
<script src="http://jquery-json.googlecode.com/files/jquery.json-2.2.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() {
    var jsonData = new Array();
    $(".getJSON").click(function() {
        $.map($("table[id*=gvPurchaseOrderDetails] tr"), function(item, index) {
            if ($(item).find("input[type=text]").length>0) {
                jsonData[index] = new Object();
                jsonData[index].employeeid = $(item).find("input[type=text][id*=employeeid]").val();
                jsonData[index].employeename = $(item).find("input[type=text][id*=employeename]").val();
                jsonData[index].sex = $(item).find("select[id*=sex]").val();
                jsonData[index].graduate = $(item).find("input[type=checkbox][id*=graduate]").attr("checked");
            }
        });

        var jsonStringData = JSON.stringify(jsonData);
    });
}); 
```

```
<asp:GridView ID="gvPurchaseOrderDetails" runat="server"
    AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField HeaderText="employeeid">
            <ItemTemplate>
                <asp:TextBox ID="employeeid" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="employeename">
            <ItemTemplate>
                <asp:TextBox ID="employeename" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
       <asp:TemplateField HeaderText="sex">
            <ItemTemplate>
                <asp:DropDownList ID="sex" runat="server" ><asp:ListItem>Male</asp:ListItem><asp:ListItem>Female</asp:ListItem></asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Is Graduate">
            <ItemTemplate>
                <asp:CheckBox ID="graduate" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<a class="getJSON" href="#">get json data</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:53:34.507

GridView 将破坏文本框的 Id。最简单的方法是在文本框中添加一个 CSS 类，然后使用它来查找它们：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:TextBox ID="txtFName" CssClass="FName" runat="server" />    
    </ItemTemplate>
</asp:TemplateField>

<asp:TemplateField>
    <ItemTemplate>
        <asp:TextBox ID="txtLName" CssClass="LName" runat="server" />    
    </ItemTemplate>
</asp:TemplateField> 
```

**编辑**：正如评论中所建议的，然后可以使用类选择器找到它们：

```
$(this).find('.LName').val() 
```

# c++ - 是否可以在 C++ 类中声明一个虚拟静态常量值？

> ID：10915568
> 
> 赞同：22
> 
> 时间：2012-06-06T13:50:26.290
> 
> 标签：c++, inheritance, virtual, constants, static-members

我想要一个具有常量字段的基类（例如与在编译后无法修改的类关联的唯一 ID）。到目前为止，`static const`声明会很好。现在，我想继承这个基类，并确保这个类的子类确实有相同的字段，但有自己的值。我怎样才能做到这一点？

比方说，我想要一个基类`Base`，其`ID`字段的`int`值为 0。然后，我想要类和`A`，它们都是我想要的公共子类确保这些孩子也将具有各自值为 1、2 和 3 的字段（通过“确保”，我的意思是如果他们没有明确声明的 ID，则会出现编译器错误）。`B``C``Base``ID`

如果我能设法构建这个场景，我的期望是请求指针的`ID`字段，我应该得到不同的值，`Base*`具体取决于指针是创建为`new A()`还是。`new B()``new C()`

我的猜测是声明`ID`为`virtual static const`，这当然没有意义并给出编译器错误。

但是，我该怎么做才能达到所描述的结果呢？（我唯一能想到的就是声明`ID`为一个返回整数的虚函数，然后将值硬编码到函数体中，但我正在寻找更优雅的东西。）

先感谢您！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-06T13:52:52.050

方法`static`不能`virtual`，数据成员也不能`virtual`。

但是您可以隐藏`static`派生类中的字段并使用`virtual`方法返回它们。

```
class A
{
public:
    static const int ID = 0;
    virtual int getID() { return A::ID; }
};
class B : A
{
public:
    static const int ID = 1;
    virtual int getID() { return B::ID; }
}; 
```

选择：

```
class A
{
public:
    A(int id = 0) : ID(id) {}
    const int ID;
    getID() { return ID; }
};
class B : public A
{
public:
    B() : A(1) {}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-20T18:42:24.930

在 C++ 中拥有虚拟静态成员确实非常有用。它们可以很容易地添加到语言中，不需要新的关键字。以下代码示例为图形库命名形状类型：

```
class Shape {
public:
    static constinit virtual std::string name = delete;
    static constexpr virtual bool closed = delete;
    ...
};

class Circle : public Shape {
public:
    static constinit std::string name override { "circle" };
    static constexpr bool close override { true };
    ...
};

class Line : public Shape {
public:
    static constinit std::string name override { "line" };
    static constexpr bool close override { false };
    ...
}; 
```

这声明`Shape`为抽象基类，`Shape::name`并`Shape::closed`通过`= delete`.

虚拟静态成员的空间可以分配在同一个 VTable 中，该 VTable 已经用于虚拟函数调用。如果所有虚拟静态成员都是`constinit`（C++20 中的新成员）或`constexpr`，则 VTable 可以写入只读内存，目前大多数编译器也将其写入其中。如果不是，则必须将 VTable 放置在读写内存中。

一般来说，虚拟静态成员不需要是`const`，它们也可以是读写的。

虚拟静态成员既可以使用类名作为前缀访问（它们的行为与普通静态成员一样），也可以通过对象访问，其中对象的 VTable 指针将用于访问正确的 VTable。

只要它们不在标准中，就可以使用虚函数来模拟它们，它返回对局部静态变量的引用：

```
virtual const std::string& get_name() const {
    static const std::string name { "circle" };
    return name;
} 
```

如果派生类不覆盖静态成员（分别是虚拟 getter 函数），则真正的虚拟静态成员和模拟的虚拟静态成员之间的语义有点不同：父类和子类之间的真正虚拟静态成员实际上会引用该对象的不同实例，并为父级和每个子级调用构造函数，它不会覆盖虚拟静态成员。但是模拟的 getter 函数总是会返回对完全相同的对象的引用。在只读虚拟静态成员上，这不应该产生影响（除非构造函数实际上以不同方式初始化每个实例），但在读写虚拟静态成员上，更新它们会产生影响。

# java - EJB 检索重复行

> ID：10915570
> 
> 赞同：1
> 
> 时间：2012-06-06T13:50:33.927
> 
> 标签：java, jsf, jpa, ejb

我有一个奇怪的问题。当我从数据库中的视图创建行时，它做得很好，并且显示得非常好。但有时它会检索重复的行，并且我添加相同重复行的任何行都会一次又一次地出现。但是，当我重新部署应用程序时，问题得到解决，并且行再次正确显示，直到条目再次崩溃导致同样的问题。我无法弄清楚发生了什么，因为没有错误。我正在使用 EJB 3.0、glassfish 3.1.1、JSF 2.0、EclipseLink 和 JavaDB。

![上面是数据库中的行，下面是IDE中的行](../Images/d56553861c076d63a4e8e989590e6008.png)

![这是视图中的样子](../Images/612eebceda97ba903568e66dd82af40b.png)

这是我的持久代码：

```
@Override
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public void create(Carrier carrier) {
            em.persist(c.getObject());
            em.flush();
          }
    } 
```

这是我的检索代码：

```
o@Override
public List<CrpPaypoint> getPaypoints() {
    Query q = em.createQuery("SELECT c FROM CrpPaypoint c ORDER BY c.levelOrder.levelOrder");
    List<CrpPaypoint> list = q.getResultList();
    return list;
}

<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="hrtestPU" transaction-type="JTA">
     <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
     <jta-data-source>jdbc/hrdb</jta-data-source>
     <exclude-unlisted-classes>false</exclude-unlisted-classes>
     <properties>
        <property name="eclipselink.ddl-generation" value="create-tables"/>
     </properties>
  </persistence-unit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:27:40.977

您似乎以某种方式破坏了共享缓存中的对象。

要禁用共享缓存，请参阅，

[http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F](http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F)

检查您如何将对象添加到集合中，确保您的新对象具有唯一的 ID，确保您没有两次添加相同的对象或更改现有对象。

包括如何编辑对象的代码。

# c# - 从一个父对话框创建多个无模式对话框

> ID：10915573
> 
> 赞同：-1
> 
> 时间：2012-06-06T13:50:39.953
> 
> 标签：c#, wpf

我正在用 C# WPF .NET3.5 开发一个 UI 程序。在我的主窗口中，我有一个按钮。当用户单击此按钮时，它会创建一个无模式对话框。将焦点更改回主窗口并再次单击该按钮会创建另一个无模式对话框。对话顺序如下：

M -> C1 -> C2 -> C3

其中M是主窗口，C1、C2和C3依次是子窗口。C1 是无模式的（使用未设置 Owner 属性的 Window.Show() 方法创建），C2 和 C3 是模式的（使用设置了 Owner 属性的 Window.ShowDialog() 方法创建）。我期望用户应该能够从 M 创建多个 C1、C2 和 C3 对话框。

我的问题如下。如果我创建 2 个 C1 对话框，一切正常。我可以在 M 和两个 C1 对话框中执行所有 UI 操作。但是，一旦从一个 C1 对话框创建 C2 和 C3 对话框，我就无法在另一个 C1 对话框和 M 对话框中执行任何 UI 操作。但是，我可以在 C3 对话框中执行 UI 操作。

C2 对话框包含一个使用 DispatcherTimer 更新的进度条。正在进行的操作完成后，从 DispatcherTimer 的事件处理程序中启动 C3 对话框。

我预先感谢您的宝贵支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:57:57.507

除了使用模式对话框之外，您将需要找到另一种方法来将 C2 和 C3 设置为始终位于顶部。

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa984358%28v=VS.71%29.aspx)：

> 在继续使用应用程序的其余部分之前，必须关闭或隐藏模式窗体或对话框。

尝试将C2 和 C3的[TopMost](http://msdn.microsoft.com/en-us/library/system.windows.window.topmost.aspx)`Window.Show()`属性设置为 true 并使用而不是`Window.ShowDialog()`.

# matplotlib - 清除 Axes3D 后重新绘制线条

> ID：10915578
> 
> 赞同：2
> 
> 时间：2012-06-06T13:50:51.670
> 
> 标签：matplotlib, 3d

我有一个添加 Axes3D 图的列表。像这样：

```
self.myList.append(self.axes.plot(xValues,
                                  yValues,
                                  zValues,
                                  picker=self.line_picker)[0]) 
```

当该行代码运行时， plot() 函数返回的实例存储在列表中，并且该行自动绘制，这就是我想要的。此代码在程序启动时运行并绘制可变数量的行。

现在我需要做的是：

当用户选中一个复选框时，我想用另一组数据替换当前绘制的数据。然后，当用户取消选中该复选框时，我希望再次绘制初始数据。

清除初始数据我没有问题；我只是这样做：

```
self.axes.clear()
self.canvas.draw()
self.axes.mouse_init() 
```

现在我有一个空白的 3D 图。

清除后如何重新绘制相同的数据？我可以以某种方式使用存储在列表中的绘图实例并重新绘制它们吗？

我的最终问题是，我是否必须像第一次那样使用原始数据重新绘制原始图，或者我可以以某种方式隐藏/禁用初始轴然后简单地恢复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:54:09.413

可能最简单的解决方案是保留项目的引用并简单地切换特定艺术家的可见属性：

```
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt

plt.ion()

ax = plt.axes(projection='3d')
n = 3

xs = np.random.randint(23, 32, n)
ys = np.random.randint(0, 100, n)
zs = np.random.randint(0, 10, n)
scatter = ax.scatter(xs, ys, zs=zs)

plt.draw()
scatter.set_visible(False)
plt.draw()
scatter.set_visible(True)
plt.draw() 
```

# android - 从服务器上存在的文件中读取文本时如何处理 NetworkOnMainThreadException

> ID：10915580
> 
> 赞同：0
> 
> 时间：2012-06-06T13:51:02.217
> 
> 标签：android, android-intent, android-emulator, android-widget

我在尝试从服务器上存在的 .txt 文件中读取文本时遇到 NetworkOnMainThreadException，我该如何解决这个问题，谢谢。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TextView tv= new TextView(this);
        TextView tv2 = new TextView(this);

        StringBuilder content = new StringBuilder();

        try {
            URL url = new URL("http://linktomywebsite/textfile.txt");
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            String str;
            while ((str = in.readLine()) != null) {
                content.append(str +"\n");
                tv.setText(content);
            }
            in.close();
        } catch (MalformedURLException e){
        } catch (IOException e) {
            e.printStackTrace();
        }
        catch (NetworkOnMainThreadException e){

            tv2.setText("not connecting to server");
            setContentView(tv2);
        }

    };        
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:57:03.853

[从 api 11 开始禁止](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)在 ui 线程上进行网络操作。您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，请求字符串`doInBackground`并显示结果`onPostExecute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T08:41:08.617

一种解决方案是允许网络操作（尽管不建议这样做）。在 onCreate() 下面添加这个。

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T13:53:06.717

创建一个新线程并执行繁重的操作，例如从中获取数据......并使用处理程序或异步任务来更新 UI 上的结果

就像在这个 [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# php - 是否可以从从 php 中的 Query 填充的下拉菜单中选择的字段中查询 Mysql 数据库

> ID：10915584
> 
> 赞同：0
> 
> 时间：2012-06-06T13:51:19.827
> 
> 标签：php

您好，我是 php 新手，我试图找到一段代码，我可以用它来完成我需要的任务，我目前有一个页面，其中包含一个用于查看课程标准的表单。我还有一个下拉菜单，其中当前包含我存储在数据库中的模块的所有课程代码。我的问题是，当我选择课程代码时，我希望填充表单中的字段以显示有关所选课程的所有信息。我试图开始工作的代码如下：

```
<?php 
session_start();
?>
<? include ("dbcon.php") ?>
<?php

if(!isset($_GET['coursecode'])){ 
$Var ='%'; 
} 
else 
{ 
if($_GET['coursecode'] == "ALL"){ 
$Var = '%'; 
} else { 
$Var = $_GET['coursecode']; 
} 
}

echo "<form action=\"newq4.php\" method=\"GET\"> 
<table border=0 cellpadding=5 align=left><tr><td><b>Coursecode</b><br>";

$res=mysql_query("SELECT * FROM module GROUP BY mId"); 
if(mysql_num_rows($res)==0){ 
echo "there is no data in table.."; 
} else 
{ 
echo "<select name=\"coursecode\" id=\"coursecode\"><option value=\"ALL\"> ALL </option>"; 
for($i=0;$i<mysql_num_rows($res);$i++) 
{ 
$row=mysql_fetch_assoc($res); 
echo"<option value=$row[coursecode]";

if($Var==$row[coursecode]) 
echo " selected"; 
echo ">$row[coursecode]</option>"; 
}
echo "</select>"; 
}
echo "</td><td align=\"left\"><input type=\"submit\" value=\"SELECT\" /> 

</td></tr></table></form><br>";

$query = "SELECT * FROM module WHERE coursecode LIKE '$Var' "; 
$result = mysql_query($query) or die("Error: " . mysql_error());

if(mysql_num_rows($result) == 0){ 
echo("No modules match your currently selected coursecode. Please try another coursecode!"); 
} ELSE { 
        Coursecode: echo $row['coursecode'];
        Module: echo $row['mName']; 
        echo $row['mCredits'];
        echo $row['TotalContactHours'];
        echo $row['mdescription'];
        echo $row['Syllabus'];
        }
?> 
```

但是，我似乎只能从我的数据库中获取最后一个条目，以帮助解决此问题或更好的编码方式，因此它将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:05:23.153

The main error is in your final query, you're not actually fetching anything from the query, so you're just displaying the LAST row you fetched in the first query.

Some tips:

1) Don't use a for() loop to fetch results from a query result. While loops are far more concise:

```
$result = mysql_query(...) or die(mysql_error());
while($row = mysql_fetch_assoc($result)) {
   ...
} 
```

2) Add another one of these while loops to your final query, since it's just being executed, but not fetched.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:06:56.943

For me i would use some javascript(NOTE: i prefer jQuery)
An easy technique would be to do this(going on the assumption that when creating the drop downs, your record also contains the description):

Apart from creating your dropdown options like this `<option value="...">data</option>`, you could add some additional attributes like so:

```
echo '<option value="'.$row['coursecode'].'" data-desc="'.$row['description'].'">.....</option> 
```

Now you have all your drop down options, next is the javascript part

Let's assume you have included [jQuery](http://jquery.com/) onto your page; and let's also assume that the description of any selected course is to be displayed in a `<div>` called `description` like so:

```
<div id="course-description">&nbsp;</div>
<!--style it how you wish --> 
```

With your javascript you could then do this:

```
$(function(){
    $("#id-of-course-drop-down").change(function(){
        var desc = $(this).children("option").filter("selected").attr("data-des");
        //now you have your description text
        $("#course-description").html(desc);
        //display the description of the course
    }
}); 
```

Hope this helps you, even a little
Have fun!

**NOTE: At least this is more optimal than having to use AJAX to fecch the description on selection of the option :)**

# jquery - Jquery，给定一个字符串及其坐标替换它

> ID：10915585
> 
> 赞同：2
> 
> 时间：2012-06-06T13:51:23.493
> 
> 标签：jquery

我有一个这样的字符串：

> 我是一根不太长但也不太短的弦

让我们看一下字符串中的单词“not”：它从第 13 号位置开始，到第 16 号位置结束。

JQuery 有一种方法可以将位置 13 和位置 16 之间的单词替换为：

```
<b>not</b> 
```

我只知道要替换的字符串的位置，而不是它的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:07:58.450

您通常可以使用良好的老式 JavaScript 来执行此操作，但您可以使用 jQuery 进行 DOM 操作（尽管您不必这样做*）*。

[http://jsfiddle.net/hQUhX/](http://jsfiddle.net/hQUhX/)

内容：

```
function replacePiece(str, start, end) {
   var component = str.substr(start, end - start);
   var newstr = str.substr(0,13) + "<b>" + component + "</b>"
      + str.substr(end);
   return newstr;
}

​$("#Str").html(replacePiece($("#Str").text(), 13, 16)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:02:05.543

**当您只知道起始位置时，此答案用于替换**

我最终做的是只知道单词的起始位置而不是结束位置来回答。

这样做是从已知的起始位置获取字符串，用空格分隔，然后用 包裹第一个单词`<b>`，然后将其添加回字符串之间并输出。

**JSFiddle 示例** [http://jsfiddle.net/Jc829/4/](http://jsfiddle.net/Jc829/4/)

很抱歉第一次没有多注意。

此外，您实际上并不需要 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:31:39.713

虽然我已经接受了 Explosion Pills 的回答，但我认为这是一种更优雅的方法（感谢 Matthew Riches 提供的链接）

```
String.prototype.replacePiece = function(replace_with, start, end) {
    return this.substring(0, start) + replace_with + this.substring(end, this.length)
}

var str = "Helloiworld";

var replace_with = "<b>i</b>";

alert(str.replacePiece(replace_with, 5, 6));​​ 
```

[http://jsfiddle.net/paglia_s/QTMJG/](http://jsfiddle.net/paglia_s/QTMJG/)

# ios - 通过子视图剪切父视图并将第一个的内容放在第二个但缩放

> ID：10915588
> 
> 赞同：0
> 
> 时间：2012-06-06T13:51:26.783
> 
> 标签：ios, uiview, cgcontext, clipping, cgpath

问题是...

我有一个父视图，在其中我绘制了一个由许多 CGPaths 组成的平面图。好吧，在这个应用程序中，我可以将一个子视图插入到父视图中，其中绘制了其他 CGPath（例如代表椅子的线条）。现在。我会复制像 UITextView 那样的缩放效果，当有人点击向下，按住点击，然后一个手玻璃出现，内容被缩放。

例如，我将放置一个子视图，其中背景表示在子视图矩形中剪辑并缩放为 x2 的父内容。这样，子视图背景就像父视图上的手玻璃。

我该如何实现呢？

我考虑过获取父上下文，将其传递给子视图，并使用矩形子视图剪辑父上下文。但什么也没有发生。我对 CGImageContext 表示红色，女巫对父 CGContext 进行图像表示，并将其传递给子视图，但我不知道如何实现它。而且，我不知道这是否正确。

希望有人可以帮助我（代码示例会很棒）！

对不起我的英语不好。我尽力了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:24:44.583

问题自己解决了！

在子视图drawrect：方法中，我输入了以下代码：

```
- (void)drawRect:(CGRect)rect {
  // here we're just doing some transforms on the view we're magnifying,
  // and rendering that view directly into this view.
  // By 'touchPoint' i can select the exact portion of superview which
  // i want render in subview

   CGContextRef context = UIGraphicsGetCurrentContext();
   CGContextTranslateCTM(context,1*(self.frame.size.width*0.5),1*(self.frame.size.height*0.5));
   CGContextScaleCTM(context, 1.5, 1.5);
   CGContextTranslateCTM(context,-1*(touchPoint.x),-1*(touchPoint.y));
   [self.superview.layer renderInContext:context];
} 
```

希望这可以帮助别人:)

# cakephp - Cakephp 元素和每个循环

> ID：10915589
> 
> 赞同：0
> 
> 时间：2012-06-06T13:51:30.670
> 
> 标签：cakephp

我现在对下面的 cakePHP 代码有些头疼：

这是我的控制器：

```
<?php
class HeaderController extends AppController {
    public $helpers = array('Html', 'Form');

     public function index() {

    }

    public function usp() {
       return $this->set('usp', $this->Header->query('SELECT * FROM USP WHERE Actief = 1'));
    }

} 
```

这是我的元素：

```
 <? 
                $UNSP = $this->requestAction('header/usp');
                print_r($UNSP);
foreach($UNSP['header'] as $USPs): 
    echo $USPs['USP']['Naam']; 
endforeach; 
```

查询工作并在页面加载时执行。我收到一条错误消息，提示为 foreach() [APP/View/Elements/header.ctp，第 9 行提供的参数无效]

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:31:46.603

您以某种方式假设`$UNSP`视图中将填充您在`usp()`操作中设置的视图变量。这不是`requestAction()`工作方式。`requestAction()`可以回显您调用的视图，也可以返回您正在调用的*函数的值。*

相反，由于它似乎`usp()`没有视图，而只是用于获取数据，因此您应该像这样返回它

```
public function usp() {
   return $this->Header->query('SELECT * FROM USP WHERE Actief = 1');
} 
```

然后，在您看来，告诉`requestAction()`您想要函数调用的结果：

```
$UNSP = $this->requestAction('header/usp', array('return')); 
```

现在`$UNSP`应该包含查询的结果。

# oracle - 无法使用 dbms_lob.filopen 打开文件，但可以使用 utl_file 打开它

> ID：10915594
> 
> 赞同：2
> 
> 时间：2012-06-06T13:51:49.353
> 
> 标签：oracle

什么可能导致以下行为：

数据库 11gR2

```
declare
   l_amt        number := dbms_lob.lobmaxsize;
   l_dst_loc    clob;
   l_dst_offset number := 1;
   l_lang_ctx   number := dbms_lob.default_lang_ctx;
   l_src_loc    bfile;
   l_src_offset number := 1;
   l_warning    number;
begin

   l_src_loc := bfilename('ODS_SERVER_DIRECTORY', '_CIVKD_ASU.CSV');
   dbms_lob.createtemporary(l_dst_loc, true);
   dbms_lob.fileopen(l_src_loc, dbms_lob.file_readonly);
   dbms_lob.loadclobfromfile(l_dst_loc
                            ,l_src_loc
                            ,l_amt
                            ,l_dst_offset
                            ,l_src_offset
                            ,dbms_lob.default_csid
                            ,l_lang_ctx
                            ,l_warning);
   commit;

   dbms_lob.fileclose(l_src_loc);
   dbms_output.put_line(substr(l_dst_loc, 1, 200));

end;
/ 

ORA-22288: file or LOB operation FILEOPEN failed
.
ORA-06512: in "SYS.DBMS_LOB", line 805
ORA-06512: in line 31
22288\. 00000 -  "file or LOB operation %s failed\n%s"
*Cause:    The operation attempted on the file or LOB failed.
*Action:   See the next error message in the error stack for more detailed
           information.  Also, verify that the file or LOB exists and that
           the necessary privileges are set for the specified operation. If
           the error still persists, report the error to the DBA. 
```

但是，使用 utl_file 时打开和读取完全相同的文件会成功。

```
declare
   l_file utl_file.file_type;
   l_regel varchar2(4000);
begin

   l_file := utl_file.fopen('ODS_SERVER_DIRECTORY', '_CIVKD_ASU.CSV', 'R');
   -- Haal de volgende regel op
   utl_file.get_line(l_file, l_regel);

   dbms_output.put_line(l_regel);
   utl_file.fclose_all;
end; 
```

因此，数据库似乎可以使用和访问该文件。

这是我们第一次遇到这个特殊错误，它是第一个 11gR2 实例，所以也许有一些我们不知道的 11g 特定的东西？

=== 2012 年 8 月 6 日更新 === 取得了一些进展。原来目录对象指向一个共享驱动器。它是一个 Windows 服务器，Oracle 作为本地系统运行。我一直认为在这种情况下不可能从共享驱动器中读取任何内容。显然在某些情况下，您可以使用 utl_file 但不能使用 dbms_lob。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:33:28.890

您能否确认 ODS_SERVER_DIRECTORY 是一个实际的 DIRECTORY

```
SELECT 
    *
FROM
    dba_objects
WHERE
    object_type = 'DIRECTORY'
    AND object_name = 'ODS_SERVER_DIRECTORY' 
```

可能您在 init.ora 的 UTL_FILE_DIR 参数中设置了它（不应再这样做了..）

但它的一种可能性是为什么 utl_file 会看到目录而 dbms_lob 不会。

# iphone - NSURLConnection 和 JSON 数据

> ID：10915595
> 
> 赞同：2
> 
> 时间：2012-06-06T13:51:56.843
> 
> 标签：iphone, objective-c, ios, json, nsurlconnection

我被一些疯狂的事情困住了。我曾经`ASIHTTPRequest`从网络服务接收我的数据，一切正常。我切换到使用 a`NSURLConnection`并且我收到相同的数据并以相同的方式解析它，但我的代码无法识别带有`NSURLConnection`.

这是我收到的数据（来自`NSLog`）

```
Did receive data: {"d":"[{\"id\":1.0,\"Category\":1,\"hPlan\":0.0,\"Tip\":\"It takes 3500   
calories to gain a pound. If you want to lose a pound per week, reduce your calorie
intake by 250 calories and incorporate daily physical activity that will burn 250   
calories.\",\"TipDate\":\"2012-05-12T00:00:00\",\"TimeStamp\":\"AAAAAAAAB9I=\"}]"}

2012-06-06 09:42:11.809 StaticTable[27488:f803] Jsson Array: 0  
2012-06-06 09:42:11.809 StaticTable[27488:f803] Jsson Array: (null) 
```

代码：

```
#import "UYLFirstViewController.h"
#import "MBProgressHUD.h" 
#import "JSON.h"

@interface UYLFirstViewController ()

@end

@implementation UYLFirstViewController

#pragma mark -
#pragma mark === UIViewController ===
#pragma mark -

@synthesize MessageField;
@synthesize jsonArray = _jsonArray;
@synthesize TipLabelField;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = NSLocalizedString(@"Tickle!", @"Tickle!");
     self.tabBarItem.image = [UIImage imageNamed:@"heart_plus"];

    [self GetTipOfDay];

}
return self;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}
-(BOOL)GetTipOfDay{

NSDate *date = [NSDate date];

NSDateFormatter *dateFormat = [[NSDateFormatter alloc]init];
[dateFormat setDateFormat:@"EEEE MMMM d, YYYY"];
NSString *dateString = [dateFormat stringFromDate:date];

NSString *yourOriginalString = @"Tip of the Day for ";

yourOriginalString = [yourOriginalString stringByAppendingString:dateString];
TipLabelField.text = yourOriginalString;

NSURL *url = [NSURL URLWithString:@"http://www.mysite.com/api/GetHealth.asmx/getTipOfDay"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPMethod:@"GET"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

[NSURLConnection connectionWithRequest:request delegate:self];

// Clear text field
MessageField.text = @"";

// Start hud
  MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
  hud.labelText = @"Gathering Tip of the Day...";

return TRUE;

}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

[MBProgressHUD hideHUDForView:self.view animated:YES];

NSLog(@"Did receive data: %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);

NSDictionary *responseDict = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] JSONValue];

NSString *jsonResponse = [responseDict objectForKey:@"d"];

self.jsonArray = [jsonResponse JSONValue];

NSLog(@"Jsson Array: %d", [jsonArray count]);
NSLog(@"Jsson Array: %@", jsonArray);

NSEnumerator *myEnumerator;
myEnumerator = [jsonArray objectEnumerator];
int i;
i=0;
id myObject;

while (myObject = [myEnumerator nextObject])
{
    NSDictionary *itemAtIndex = (NSDictionary *)[self.jsonArray objectAtIndex:i];

    NSLog(@"Checking for games");

    NSString *myCheck = [itemAtIndex objectForKey:@"FName"];

    if ([myCheck length] != 0)
    {
        // NSLog(myCheck);
        MessageField.text = myCheck;
    }
}

} 

- (void)viewDidUnload {
[self setMessageField:nil];
[self setTipLabelField:nil];
[super viewDidUnload];
}
@end

#import <UIKit/UIKit.h>

@interface UYLFirstViewController : UIViewController{
  NSMutableArray *jsonArray;  
}
@property (weak, nonatomic) IBOutlet UILabel *MessageField;
@property (weak, nonatomic) NSMutableArray *jsonArray;
@property (weak, nonatomic) IBOutlet UILabel *TipLabelField;

-(BOOL)GetTipOfDay;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:35:12.367

`-didRecieveData`可以在字节和块进入时多次调用。您应该将逻辑移动到`-connectionDidFinishLoading`. 这将让您知道连接何时完全完成并且数据已准备好进行解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:41:23.323

您只实现了 NSURLConnectionDelegate 方法之一。尝试添加这个

```
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    //set up *receivedMutableString as instance variable in .h
    if (!receivedMutableString) {
        self.receivedMutableString = [[NSMutableString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    } else {
        NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        [receivedMutableString appendString:dataString];
    }
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    //Now receivedMutableString contains all json data
    ...continue with your code 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T14:40:24.237

`NSURLConnection`如果您只是做一个简单的`GET`请求（并且您正在为支持块的 iOS 版本进行开发），那就有点矫枉过正了。您可以在一个`dispatch_async`块中执行此操作：

```
- (void) getData 
{
    dispatch_async(<some_queue>, ^{ 

        NSError  * error = nil;
        NSString * response = [NSString stringWithContentsOfURL: stringWithContentsOfURL: requestUrl error: &error];

        // process JSON

        dispatch_async(dispatch_get_main_queue(), ^{

            // Update UI on main thread

        }

    });
} 
```

从我的示例代码中可以看出，您还可以在后台队列上执行 JSON 处理（前提是您调用的方法是线程安全的）。只需传回主队列即可更新 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:21:47.313

似乎这个问题与从网络服务中获取无关。我必须将我的数组定义为 __strong。感谢所有的帮助。我确实得到了一些关于如何做得更好的好主意。

# xna-4.0 - xna街机游戏的最佳结构

> ID：10915600
> 
> 赞同：0
> 
> 时间：2012-06-06T13:52:12.700
> 
> 标签：xna-4.0

我需要使用 XNA 设计一款街机游戏。这将有 9 种不同的游戏，玩家可以选择其中一种。我想尽可能做到最好的清晰和分离。便于维护。这些游戏将共享一个共同的功劳。是否可以将每个游戏都作为 DLL 执行并从主项目中调用它们？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:57:44.943

管理多个事物（屏幕、关卡）的最佳方式是制作一个 GameComponent。您可以将它们附加到您的基础游戏（可能是 Game1？），然后您可以切换它们的可见性和活动状态。微软有一些很好的信息。

祝你好运！:)

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamecomponent.aspx)

# facebook - 使用 Facebook 登录的网站如何实际运作？

> ID：10915606
> 
> 赞同：1
> 
> 时间：2012-06-06T13:52:30.250
> 
> 标签：facebook, web

如果我在“使用 Facebook 登录的网站”选项卡下为我的网站创建应用程序 - 这对访问我网站的用户有何影响？

用户是否必须使用 Facebook 登录才能查看我的网站？

或者如果他们没有登录并且他们点击了我的“喜欢”或“发送”按钮（我们将拥有的唯一按钮），他们是否只会被提示登录？

如果用户不点赞或发送，他们会受到影响吗？

尽可能多的关于用户体验的细节会很棒。大家干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:55:13.697

Facebook 登录通常只是您网站顶部的一个包装器，如果他们使用 Facebook，您可以通过它获取 Facebook 用户详细信息。您仍然需要一个系统来跟踪谁实际登录到您的站点，他们仍然必须单击“使用 Facebook 登录”按钮。

另一方面，Like 和 Share 按钮是独立的，因为它们只是将您的网站数据发送到 Facebook，而 Facebook 不会向您发送任何内容。

您不需要 Facebook 登录功能即可在您的页面上添加“喜欢”或“分享”功能。

# c# - 如果我有链接（svn），如何从 apache 项目下载和编译源代码？

> ID：10915611
> 
> 赞同：0
> 
> 时间：2012-06-06T13:52:47.537
> 
> 标签：c#, windows, visual-studio, apache, svn

假设我在这里有这个链接：[https](https://svn.apache.org/repos/asf/chemistry/dotcmis/trunk/) ://svn.apache.org/repos/asf/chemistry/dotcmis/trunk/我想在我的 Windows 上下载并编译源代码。什么是待办事项？

有很多文件夹，类和一些蝙蝠。我可以通过浏览器一个一个地下载它们——但我确定这不是我应该这样做的方式。我需要一个特殊的 svn 工具吗？在那之后？我只需要在 Visual Studio 中加载项目就可以了？我不这么认为。任何分步指南或想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:55:02.050

从[下载页面](http://chemistry.apache.org/dotnet/dotcmis.html)：

> DotCMIS 需要 .NET Framework 3.5 或更高版本。它不依赖于其他任何东西。

所以是的，你应该能够`svn checkout`使用你最喜欢的 SVN 客户端（例如从命令行工具、从[TortoiseSVN](http://tortoisesvn.net/downloads.html)或从[AnkhSVN](http://ankhsvn.open.collab.net/downloads)），构建项目并获利。

如果您只是对使用客户端感兴趣，下载页面还链接到您可以下载并添加引用的二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:55:33.937

安装[TortoiseSVN](http://tortoisesvn.net/)（或其他 SVN 客户端）并为其提供连接设置。
然后对本地计算机上的文件夹进行完整的签出

此外，这个工具[AnkhSVN](http://ankhsvn.open.collab.net/)带有一个用于 Visual Studio 的集成插件，允许您直接在 VS IDE 中执行一些操作。

# jquery - 根据在子实体中找到的多个条件使用 jQuery 选择 div

> ID：10915619
> 
> 赞同：2
> 
> 时间：2012-06-06T13:53:08.510
> 
> 标签：jquery, html, selection, criteria

我有以下 JQ 代码：

```
$("[class^=post],[href='/u1']").prev("div").css("background-color","blue");
$("[class^=post],[href='/u3']").prev("div").css("background-color","red"); 
```

示例 HTML：

```
<div id="container" style="width:500px">
<div id="p1" class="post row1">
    <div class="postprofile" id="profile44" style="height:200px;width:100px;float:left;">
    <dl>
        <dt>
            <a href="/u1"><img src="/logo_1.png" alt=""></a>
            <strong style="font-size:1.2em">
<br />
                <a href="/u1">RD</a>
            </strong>
        </dt>
        <dd>...</dd>
        <dd>...</dd>
    </dl>
    </div>

    <div class="postbody" style="height:200px;width:400px;float:left;">
        <div class="content-clearfix">
            <div>This is a test</div>
        </div>
    </div>  
</div>
</div>

<br />

<div id="container2" style="width:500px">
<div id="p2" class="post row3">
    <div class="postprofile" id="profile45" style="height:200px;width:100px;float:left;">
    <dl>
        <dt>
            <a href="/u3"><img src="/logo_2.png" alt=""></a>
            <strong style="font-size:1.2em">
<br />
                <a href="/u3">Evilyynn</a>
            </strong>
        </dt>
        <dd>...</dd>
        <dd>...</dd>
    </dl>
    </div>
    <div class="postbody" style="height:200px;width:400px;float:left;">
        <div class="content-clearfix">
            <div>This is also a test</div>
        </div>
    </div>

</div>
</div> 
```

我想根据标签中的 href 更改 postprofile div 的背景颜色，以便所有 /u1 href 具有红色背景，所有 /u3 具有蓝色背景等...

据我所知，顶部的 JQ 代码是最容易执行的，但是目前它选择所有类以 post 开头的元素或 /u1 的 href 或 /u3 的 href ，所以当我运行它时postprofile div 具有红色背景。如何让它选择所有以 post AND a href of /u1 开头的类或以 post AND a href of /u3 开头的类

JQ 函数在 HTML 正文加载时被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:55:40.773

您的问题与您的代码不同，因此我将回答以下问题：

> 如何让它选择所有以 post AND a href of /u1 开头的类或以 post AND a href of /u3 开头的类

使用选择器上的上下文（第二个参数）来提供上下文。在您的选择器中，传入一个逗号分隔的目标项目列表。

```
$("a[href='/u1'], a[href='/u3']", "div[class^='post']").closest("div"); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/FrYF7/](http://jsfiddle.net/jonathansampson/FrYF7/)

或者，按照您的初始代码：

```
$("a[href='/u1']").closest("div[class^='post']").css("background", "blue");
$("a[href='/u3']").closest("div[class^='post']").css("background", "red");​ 
```

另一种方法是直接进入 div，并从内部执行背景颜色逻辑：

```
$("div[class^='post']").css("background", function(){
    if ( $("a[href='/u1']", this).length ) { 
        return "blue";
    } else if ( $("a[href='/u3']", this).length ) { 
        return "red";
    }
});​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:58:57.557

对于具有多个类的元素，您不需要开始选择器。`$("[class^=post]")`应该只是`$(".post")`。此外`,`，您的选择器中的 将选择两个元素（the`a`和 the `div`）。这就是为什么它选择了比预期更多的元素。

使用[父母](http://api.jquery.com/parents/)选择器：

```
$("a[href='/u1']").parents("div.postprofile").css("background-color","blue");
$("a[href='/u3']").parents("div.postprofile").css("background-color","red"); 
```

# wpf - 通过代码本地化 WPF 控件

> ID：10915620
> 
> 赞同：1
> 
> 时间：2012-06-06T13:53:11.653
> 
> 标签：wpf, c#-4.0, localization

我有一个需要支持本地化的 WPF 应用程序。我有 2 个按钮（添加、删除）和一个组合框（英语、法语）。当我选择法语时，按钮的内容应更改为 (ajouter, effacer)。

现在，我的问题是，如果我在后面的代码中手动设置按钮内容，会有什么缺点或缺点？请参阅下面的代码。

```
private void comboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
  ResourceDictionary currentLanguage = new ResourceDictionary();

  switch (comboBox.Text)
  {
    case "english": 
      currentLanguage.Source = new Uri("../en-US.xaml", UriKind.RelativeOrAbsolute);
      break;
    case "france": 
      currentLanguage.Source = new Uri("../fr-FR.xaml", UriKind.RelativeOrAbsolute);
      break;
  }

  btnAdd.Content = Resources.GetString("insert");
  btnDelete.Content = Resources.GetString("delete");
} 
```

我知道这有点奇怪，但请回答。为什么我不应该以这种方式本地化我的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:16:20.150

在交换资源字典时，您应该在 XAML 中使用 using`DynamicResources`而不是`StaticResources`Basicly，您将执行以下操作：

### XAML

```
 <Button Content="{DynamicResource Insert}"/>
  <Button Content="{DynamicResource Delete}"/> 
```

使用 x:Key 在资源字典中插入和删除的位置

当您交换字典时，这些将动态更新

# web - TYPO3 虚拟包不显示安装屏幕

> ID：10915621
> 
> 赞同：0
> 
> 时间：2012-06-06T13:53:15.023
> 
> 标签：web, wamp, typo3

我正在尝试将 Dummy 软件包安装到我的笔记本电脑上。

我已经安装`WAMP`并将虚拟包放入 WWW 目录中。

但是，当我转到我`Localhost`的 from`WAMP`并单击虚拟页面时，它没有显示安装屏幕，而是显示了我的目录索引。

![当我从 WAMP 点击本地主机时](../Images/ade31a6384cded38f10c9bf4594c095c.png)

![在此处输入图像描述](../Images/95aea9d912270b70a858e2f9baf96036.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:28:49.183

创建 ENABLE_INSTALL_TOOL 只需使用命令行

win+r -> 输入 cmd -> 导航到目录 -> 输入：echo > ENABLE_INSTALL_TOOL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:06:13.437

Dummy package has no sources inside, you can see, there's no even `index.php` file.

Use `Source + Dummy` which will give you an empty TYPO3 system or even better `Introduction Package` for learning purposes - working and containing lot of samples.

To create `ENABLE_INSTALL_TOOL` make sure that your system displays files' names with extension ie: open with the `Windows Explorer` folder where you unziped the package and make sure that it can see filenames as `INSTALL.txt` (not only `INSTALL`) if it doesn't you need to search in options of Windows Explorer...)

Then go to folder `typo3conf` and create just common, empty file `ENABLE_INSTALL_TOOL.txt` and finally chane it's name and remove `.txt` extension.

TYPOe install tool will be satisfied.

# android - Eclipse 中的 Android GUI 布局

> ID：10915634
> 
> 赞同：1
> 
> 时间：2012-06-06T13:53:49.433
> 
> 标签：android, eclipse, user-interface, layout

我对 Android 开发非常陌生，遇到了一些麻烦。我正在使用 Eclipse 创建一个 XML 文件，图形布局功能都是我遇到的问题。

此外，出于兼容性原因，我正在使用 Android 2.3。

我想知道是否有一个布局可以让我放置按钮或文本字段或任何我想要放置它们的属性。这听起来可能很愚蠢，但似乎每个布局都有某种顺序，可以让您添加属性，每当我尝试将它们拖到布局的其他位置时，事情就会变得非常非常混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:57:15.903

如果您想要的是 AbsoluteLayout，则自 Android 2 (IIRC) 以来已弃用。您可以尝试使用RelativeLayout，它可以让您自由定位您的小部件。否则，如果您只使用 LinearLayout，那么是的，小部件将以严格的方式定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:02:58.607

使用相对布局。我建议您阅读 Android 布局，以便了解 Android 方式的原因、内容和方式。我发现有一些很好的教程很有帮助。[TutsPlus：Android 布局](http://mobile.tutsplus.com/tutorials/android/android-layout/)

还有一个来自马拉卡纳的非常好的视频。 [马拉卡纳：Android 训练营](http://marakana.com/training/android/android_bootcamp.html)

如果您刚开始使用 Android，请查看 Marakana 上的其他教程/视频。对于初学者来说，它们是一个很好的资源。

# java - Java 图形可视化库：具有多个连接点的节点

> ID：10915635
> 
> 赞同：2
> 
> 时间：2012-06-06T13:53:50.407
> 
> 标签：java, graph, jung

谁能推荐一个 Java 图形可视化库，其中图形节点可以用多个连接点呈现？

例如，假设一个图形节点代表一个处理器，它从两个源获取输入并产生输出。这将被可视化为 3 个顶点。但是，显然每个顶点在工作流中都有一个定义的角色，因此理想情况下，我的节点会出现 3 个不同的连接点，用户可以将顶点附加到这些连接点。

我看过 JUNG，但我认为它不适合我的需要。

欢迎任何建议；在特定的库或我可以采取的替代方法上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:08:30.947

看看[JGraph](http://www.jgraph.com/) (http://www.jgraph.com/)。我之前将[jgraph-5.14.0.0](https://github.com/eamocanu/spellcheck.graph/tree/master/external%20API)用于类似的项目。这是我为另一个项目制作的图表：[https ://github.com/eamocanu/spellcheck.graph/tree/master/graph%20photos](https://github.com/eamocanu/spellcheck.graph/tree/master/graph%20photos)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:09:22.050

你可以试试 JGraph 的 java 库

[图表](http://www.jgraph.com/)

它有很多功能，我之前已经成功使用过它。唯一的问题是文档有点缺乏，但是如果您阅读了一些示例并编写了代码，那么当您掌握它时，它会非常好。

# .net - 您如何使用 .net 框架中的活动目录在本地网站（内联网）上实施授权？

> ID：10915637
> 
> 赞同：0
> 
> 时间：2012-06-06T13:53:52.420
> 
> 标签：.net, authentication, iis, active-directory

一个简单的网站已经创建。它将在公司网络中实施，以便用户可以访问和编辑数据。已为有权访问系统的用户创建了一组用户**（安全组） 。**

现在管理员将使用选择机制“**管理访问”****从数据库中提取所有允许的用户**，然后管理员可以决定哪些用户可以访问哪些内容或页面。

IE。只有授权用户才能访问授权给他们的页面，例如用户“Jake”是生产经理，并且应该只能访问产品生产页面，在该页面中将数据输入 SQL。

因此，每个用户将能够访问一个或多个页面。如何使用 asp.net 和活动目录来实现此解决方案。**身份验证**显然是**窗口而不是表单。**

**有权访问特定页面的用户将存储在数据库的各个表中**。我研究了**IIS**，似乎 IIS 管理器可以根据活动目录限制访问，我提到的所有内容都可以通过 IIS 控制，并且不需要这个“管理访问”页面，对吗？除了存储此允许用户列表的位置之外，它可以与 IIS 一起使用

如果不是，我将如何**根据活动目录来****允许和禁止**（显示和不显示）网站上的不同网页。ASP.NET 代码会很有帮助。如果我与此不符，请说。谢谢。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:25:05.313

查看此链接以获取有关如何查看来自 ASP.NET 的 Windows 用户凭据的详细信息（[http://msdn.microsoft.com/en-us/library/ff647405.aspx#paght000025_authorizingwindowsusers）](http://msdn.microsoft.com/en-us/library/ff647405.aspx#paght000025_authorizingwindowsusers)

简短而简单的是看： User.Identity.Name 应该给你用户名（例如\

从那里您可以设置 web.config 文件以允许/禁止页面或使用自定义逻辑来确定可以查看哪些页面。**

# vb.net - 推拉式用户界面——这种界面叫什么？

> ID：10915638
> 
> 赞同：0
> 
> 时间：2012-06-06T13:54:00.063
> 
> 标签：vb.net, winforms

有人可以告诉我这种类型的 gui 界面叫什么吗？从左到右和从右到左推送项目是我感兴趣的。我的最终目的是查看网络上是否有一些代码可以在.net 中实现它，我可以将其重新用于我的应用程序。

![在此处输入图像描述](../Images/df82fded8c2cee0a64e19610f1160ff3.png)

# c# - 如何以最优雅的方式编写始终返回“true”的 C# lambda？

> ID：10915639
> 
> 赞同：-1
> 
> 时间：2012-06-06T13:54:05.007
> 
> 标签：c#, linq, lambda

我想调用`Queryable.Where()`并获取所有元素。`Where()`没有谓词函数，就没有这个版本。所以我必须纠正这个：

```
 var result = table.Where( x =>  true ); 
```

它有效，但对我来说感觉真的很愚蠢 -从未使用过，并且“箭头”符号`x`没有“转换” 。`=>`

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T14:01:33.967

您可以使用以下更优雅的方法：

```
var result = table; 
```

也可以`result`完全省略，`table`直接使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T13:57:41.613

本质上不是`table.Where(x=>true)`noop吗？我的意思是，重点是什么？您可以使用`_`而不是`x`虽然，这是惯用的。

```
table.Where(_=> true); 
```

但实际上，您正在执行以下操作：

```
for (var item in table)
{
    if (true) // your Where() clause..
    {
        yield item;
    }
} 
```

看看它真的没有意义吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-06T14:02:33.917

`table.Where( x => true )`不是“返回所有元素”。**它只是返回一个可枚举，该可枚举具有足够的信息，可以在枚举时**返回元素的某个子集。在您枚举它之前，不会“返回”任何元素。

而且由于这个子集在这种情况下甚至[不合适](http://mathworld.wolfram.com/ProperSubset.html)（即返回所有元素），这本质上是一个空操作。

要枚举所有元素，请编写一个简单的`foreach`, 或使用`ToList`or `ToArray`or 如果您不关心实际返回任何元素（并且只想枚举，大概是为了副作用）：`table.All(x => true)`or `table.Any(x => false)`，甚至只是`table.Count()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T14:14:53.703

In this case you would not need to call Where because you are not filtering the Queryable.

If you still wish to call Where and you do this in many places you could define a static Func and reuse that:

```
 public static Func<int, bool> t = ReturnTrue;

    public static bool ReturnTrue(int i) 
    {
        return true;
    }

    table.Where(t); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:02:30.957

如果您尝试获取内容的副本`table`而不是参考，

```
var result = table.ToList(); 
```

但目前尚不清楚这是否真的是你想要完成的。细节？

# c# - 如果仅知道 IntPtr，则将对象复制到剪贴板

> ID：10915641
> 
> 赞同：0
> 
> 时间：2012-06-06T13:54:09.003
> 
> 标签：c#, clipboard, intptr

对不起，我的英语不好。

我只知道 IntPtr 值，但我不知道对象的类型和大小。

1.  如何将它的对象复制到剪贴板？
2.  我可以得到它的对象大小和/或类型吗？

问候

# svn - 如何将 SVN 用户映射到 Jenkins 人员

> ID：10915642
> 
> 赞同：5
> 
> 时间：2012-06-06T13:54:09.377
> 
> 标签：svn, jenkins

我正在使用 Jenkins 的 ActiveDirectory 插件，因此用户必须使用他们的凭据登录 Jenkins。然后在 Jenkins 中将用户称为 joe.doe，这是完美的。

当同一个人签入新代码时，Jenkins 将用户检测为 MyCompany.com\joe.doe，因此它会创建另一个用户，而不是将更改映射到用户 joe.doe。你知道如何解决这个问题吗？

有没有办法切断 SVN 用户的 MyCompany.com 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:39:44.707

据我所知，修复它的唯一方法是与您的 SVN 管理员交谈以摆脱前缀。

# c# - 列表视图突出显示选定

> ID：10915643
> 
> 赞同：2
> 
> 时间：2012-06-06T13:54:10.047
> 
> 标签：c#, visual-studio-2010, listview

一个很简单的问题，但我认为证明它比听起来要困难得多

当焦点离开列表视图时，我想保留对列表视图项目的选择，目前我已将`hideselection`属性设置为 false，这很好.. 它确实会导致非常浅的灰色选择留在列表之后视图失去焦点，所以我的问题是，如何正确显示该项目仍处于选中状态，以便用户能够识别，例如更改行文本颜色或背景颜色？或者只是在第一次选择时保持突出显示整行变成蓝色？

我查看了智能感知，似乎找不到任何关于行或项目或选定项目的单个颜色属性的内容？

它必须存在，因为选定的项目有自己的背景颜色，我在哪里可以改变它？

哦，列表视图确实需要保留在详细信息视图中，这意味着我不能使用我在谷歌搜索时能够找到的唯一方法

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T19:15:00.753

这是不允许多选且没有图像（例如复选框）的 ListView 的解决方案。

1.  为 ListView 设置事件处理程序（在此示例中，它被命名为*listView1*）：

    *   绘图项
    *   离开（ListView 失去焦点时调用）
2.  声明一个全局 int 变量（即包含 ListView 的 Form 的成员，在本例中名为*gListView1LostFocusItem*）并将其赋值为 -1

    *   int gListView1LostFocusItem = -1;
3.  实现事件处理程序如下：

    ```
    private void listView1_Leave(object sender, EventArgs e)
    {
        // Set the global int variable (gListView1LostFocusItem) to
        // the index of the selected item that just lost focus
        gListView1LostFocusItem = listView1.FocusedItem.Index;
    }

    private void listView1_DrawItem(object sender, DrawListViewItemEventArgs e)
    {
        // If this item is the selected item
        if (e.Item.Selected)
        {
            // If the selected item just lost the focus
            if (gListView1LostFocusItem == e.Item.Index)
            {
                // Set the colors to whatever you want (I would suggest
                // something less intense than the colors used for the
                // selected item when it has focus)
                e.Item.ForeColor = Color.Black;
                e.Item.BackColor = Color.LightBlue;

               // Indicate that this action does not need to be performed
               // again (until the next time the selected item loses focus)
                gListView1LostFocusItem = -1;
            }
            else if (listView1.Focused)  // If the selected item has focus
            {
                // Set the colors to the normal colors for a selected item
                e.Item.ForeColor = SystemColors.HighlightText;
                e.Item.BackColor = SystemColors.Highlight;
            }
        }
        else
        {
            // Set the normal colors for items that are not selected
            e.Item.ForeColor = listView1.ForeColor;
            e.Item.BackColor = listView1.BackColor;
        }

        e.DrawBackground();
        e.DrawText();
    } 
    ```

注意：此解决方案可能会导致一些闪烁。对此的修复涉及对 ListView 控件进行子类化，以便您可以将受保护的属性*DoubleBuffered*更改为 true。

```
public class ListViewEx : ListView
{
    public ListViewEx() : base()
    {
        this.DoubleBuffered = true;
    }
} 
```

我创建了上述类的类库，以便可以将其添加到工具箱中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:06:30.963

A possible solution might be this answer to an another question:

[How to change listview selected row backcolor even when focus on another control?](https://stackoverflow.com/a/5188282)

# asp.net-mvc-3 - asp.net mvc3, facebook api

> ID：10915658
> 
> 赞同：0
> 
> 时间：2012-06-06T13:54:54.383
> 
> 标签：asp.net-mvc-3, facebook-c#-sdk

我如何从朋友的脸书上检索信息，

我将检索这些信息：位置、朋友的朋友数量、描述、图片、姓名、

```
var fbClient = new FacebookSdkClient(identity.Token.Token);
dynamic myInfo = fbClient.Get("/me/friends?fields=id,name,friendlists,location,picture"); 
```

我为我的英语道歉，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:32:43.757

我会使用 FQL

```
dynamic friends = fbClient.Get("fql", new { q = "select uid, name, first_name, last_name, current_location, pic from user where uid in (select uid2 from friend where uid1=me())" }); 
```

请注意，您需要适当的权限。

我不认为你可以得到你朋友的朋友名单。

希望对您有所帮助！

# android - 格式化选项卡使用的文本

> ID：10915659
> 
> 赞同：0
> 
> 时间：2012-06-06T13:54:54.400
> 
> 标签：android, android-2.2-froyo

我有以下课程（主要取自支持 api 示例）

```
public class MyActivity extends FragmentActivity {
TabHost mTabHost;
TabManager mTabManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs);
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mTabManager = new TabManager(this, mTabHost, R.id.realtabcontent);

    mTabManager.addTab(mTabHost.newTabSpec("searchandpromoted").setIndicator("Search and\npromoted ads"),
            FragmentStackSupport.CountingFragment.class, null);

    mTabManager.addTab(mTabHost.newTabSpec("searchengine").setIndicator("Search engine"),
            FragmentStackSupport.CursorLoaderListFragment.class, null);

    mTabManager.addTab(mTabHost.newTabSpec("manualinput").setIndicator("Manual input"),
            FragmentStackSupport.CountingFragment.class, null);

    mTabManager.addTab(mTabHost.newTabSpec("sendcartofriend").setIndicator("Send car\nto friend"),
            FragmentStackSupport.CountingFragment.class, null);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

/**
 * This is a helper class that implements a generic mechanism for
 * associating fragments with the tabs in a tab host.  It relies on a
 * trick.  Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show.  This is not sufficient for switching
 * between fragments.  So instead we make the content part of the tab host
 * 0dp high (it is not shown) and the TabManager supplies its own dummy
 * view to show as the tab content.  It listens to changes in tabs, and takes
 * care of switch to the correct fragment shown in a separate content area
 * whenever the selected tab changes.
 */
public static class TabManager implements TabHost.OnTabChangeListener {
    private final FragmentActivity mActivity;
    private final TabHost mTabHost;
    private final int mContainerId;
    private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
    TabInfo mLastTab;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost tabHost, int containerId) {
        mActivity = activity;
        mTabHost = tabHost;
        mContainerId = containerId;
        mTabHost.setOnTabChangedListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mActivity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);
        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }

        mTabs.put(tag, info);
        mTabHost.addTab(tabSpec);
    }

    @Override
    public void onTabChanged(String tabId) {
        TabInfo newTab = mTabs.get(tabId);
        if (mLastTab != newTab) {
            FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(mActivity, newTab.clss.getName(), newTab.args);
                    ft.add(mContainerId, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            mActivity.getSupportFragmentManager().executePendingTransactions();
        }
    }
} 
```

}

**片段标签.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

<LinearLayout
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TabWidget
        android:id="@android:id/tabs"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>

    <FrameLayout
        android:id="@+android:id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>

</LinearLayout>
</TabHost> 
```

如何在多行显示选项卡本身显示的文本，例如“搜索和 foo”？

![](../Images/0a477fd4d394f8967e576196c1daca04.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:58:08.040

```
android:lines="5" 
```

或
`android:inputType="textMultiLine"`
在 XML 中可以工作

您也可以`setSingleLine(false);`在 javaCode中尝试

# unix - 将 ImageMagick 的输出从科学转换为十进制？

> ID：10915664
> 
> 赞同：2
> 
> 时间：2012-06-06T13:55:06.507
> 
> 标签：unix, image-processing, terminal, imagemagick, pipe

我在终端中有一个小的单行代码，它将许多 JPEG 文件的像素数写入文本文件：

```
find . -name *.jpg -exec convert {} -format "%[fx:w*h]" info: \; > sizes.txt 
```

实际上确实如此，但其中一些数字是科学计数法，如下所示：

```
949200
960000
1.098e+06
1.038e+06
1.1664e+06
1.0824e+06
831600 
```

以十进制形式输出命令的最健壮/优雅的方式是什么，例如以下几行？

```
949200
960000
109806
103806
1166406
1082406
831600 
```

我想知道您是否会在 ImageMagick *fx*部分中执行此操作，或者将输出通过管道传输到另一个命令进行转换。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:24:15.227

根据[http://www.imagemagick.org/script/escape.php](http://www.imagemagick.org/script/escape.php) ，没有明显的方法可以使用 %fx: 指令获取其他数字格式，因此需要命令行解决方案。

转换 w*h 科学计数法输出会丢失有效数字，因此最好分别输出 w 和 h 并相乘。

使用 bc 这将是：

```
find . -name '*.jpg' -exec convert {} -format "%w*%h" info: \; |bc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-09T13:27:59.880

要让 ImageMagick 打印大于一百万的数字而不将它们截断为指数（科学）符号，请使用该`-precision n`选项。默认精度为 6。我建议将其设置为 12，这允许最多 1e+12 的数字（1 后跟 12 个零）。

```
$ convert xc: -precision 12 -format '%[fx:1000*1000]\n' info:-
1000000

$ convert xc: -precision 6 -format '%[fx:1000*1000]\n' info:-
1e+06 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:23:09.987

对 shell 命令的这种修改似乎有效：

```
find . -name *.jpg -exec convert {} -format "%[fx:w*h]" info: \;  | xargs printf "%0.0f\n" > sizes.txt 
```

调整格式指令`printf "%0.0f\n"`以满足您的需要。

仅用于演示目的（这与在我的系统上找到的 find 等和 .jpg 文件相同）：

```
$ cat data.txt

949200
960000
1.098e+06
1.038e+06
1.1664e+06
1.0824e+06
831600

$ cat data.txt | xargs printf "%0.0f\n"

949200
960000
1098000
1038000
1166400
1082400
831600 
```

# jquery - jquery取消选中所有复选框

> ID：10915665
> 
> 赞同：1
> 
> 时间：2012-06-06T13:55:06.467
> 
> 标签：jquery

我有这个 HTML：

```
<div id="SomeID">

  <input type="checkbox" class="SomeClass">
  <input type="checkbox" class="SomeClass">
  <input type="checkbox" class="SomeClass">

</div> 
```

我想取消选择 SomeClass 类型的所有复选框。

```
 $('#SomeID .SomeClass').each(function () {
     $(this)....
  }); 
```

我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T13:57:28.180

你会使用[`prop`](http://api.jquery.com/prop/)：

```
$('#SomeID .SomeClass').prop('checked', false); 
```

如果您使用的是 jQuery pre 1.6 版本，您将使用：

```
$('#SomeID .SomeClass').each(function () {
    this.checked = false;
}); 
```

* * *

## 不要使用`attr`or`removeAttr`来改变`:checked`状态！

^(更改元素上的 checked 属性和更改 checked 属性是有区别的，这很微妙，但值得一提。)

如果您更改了属性值，并且用户重置了表单，则会从`[checked]`属性是否存在中拉出“重置”状态。如果您一直在添加/删除`[checked]`属性，您将失去复选框的原始状态。

[这是一个例子](http://jsfiddle.net/p3GN2/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:57:44.637

```
$(".SomeClass").prop('checked', false); 
```

# java - 事务（进程 ID）被锁死锁 | 与另一个进程通信缓冲区资源，并已被选为死锁牺牲品

> ID：10915667
> 
> 赞同：6
> 
> 时间：2012-06-06T13:55:10.983
> 
> 标签：java, sql-server, coldfusion

我有一个更新 MS SQL 表的 java 程序。Web 用户也可以通过在 ColdFusion 中创建的网站访问此表

最近我在行时收到此错误：

```
sql_stmt.executeUpdate("update random_selection "
    + "set forecasted = 1 where "
    + " randnum = " + ora_rs.getString("RANDNUM")
    + " and quarter = " + quarter
    + " and ozip3 = " + ora_rs.getString("OZIP3")); 
```

出错的 CF 查询是：

```
<cfquery name="submit_forecast" datasource="ttmsdropper" username="#request.db_username#" password="#request.db_password#">
    INSERT INTO forecast_entry
    VALUES (<cfqueryparam value="#currentRecord[8]#">)
</cfquery> 
```

是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T15:12:48.550

当 2 个进程尝试同时访问相同的数据时，就会发生死锁 - 两者都对数据具有相同的要求。当进行大量更新/插入活动时（如您所描述的），这是最常见的。数据库系统“选择”其中一个交易作为“赢家”。

在某些情况下，可以通过索引来改善或减轻死锁，但只有在涉及到选择时——一个好的索引策略可能会提高选择性能并使行锁定更有效。但是，在死锁来自与更新竞争的插入的情况下，索引将无济于事。事实上，激进的索引可能会降低这种情况，因为索引必须与数据插入或更新一起更新。

如何解决它在很大程度上取决于您的系统以及您正在尝试做什么。您必须最小化插入/更新锁定或以某种方式提供更多或更快的资源。将插入捆绑在一起并对其进行批处理、更多的 proc 或 RAM（有时 - 不总是）、集群、拆分表和数据、微调并行性 - 这些都可能是可行的选择。而且没有硬性规定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T22:19:33.367

如果从不更新表（只有插入），那么您可能想尝试将选择更改为 - 没有锁定或在 cftransation readuncommited 中包装选择。

正如马克所说，这是一个数据库错误，而不是 ColdFusion 并且正在发生锁定。如果有复杂的选择和更新，请向子句列添加索引。

# php - 从回显的表单值创建 DOM

> ID：10915669
> 
> 赞同：0
> 
> 时间：2012-06-06T13:55:12.513
> 
> 标签：php, mysql, dom

我有表单，它根据表单的填写方式在各种元素中构建了一个相当大的输出设置。我可以发布整个代码，但我认为这更容易理解我想要做的事情。

假设我有一个表单，其中有一个名为“notes”的输入文本字段。

在这个例子中，我们假设我输入了“Hello World！” 在“笔记”中。

发布表单时，输入到“注释”中的值会在某些元素中回显：

```
 <?php

            echo '<div class="bon" id="bon">';

            if (empty($_POST['notes'])) {
            // Echo nothing
            } else {
            echo '<div class="bonHr"></div>';
            echo '<div class="bonField">';
            echo '<span>' . nl2br($_POST['notes']) . '</span>';
            echo '</div>';
            }

            echo '</div>';

            ?> 
```

这很好。现在我想将值存储在 mySQL 中——我知道该怎么做。问题是我想将包括它周围元素的值存储到 mysql 文本字段中。

所以我真正想要存储的是包含的所有内容，在这种情况下：

```
 <div class="bon" id="bon">
            <div class="bonHr"></div>
            <div class="bonField">
            <span>Hello World!</span>
            </div>
            </div> 
```

我怎样才能做到这一点？？

我需要这样做的原因是输出变化很大。所以请帮我弄清楚如何将输出“转储”，然后将其放入 mySQL...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:04:43.357

只需将您的输出存储在变量中显示它并保存在数据库中。

```
<?php
$output = "";
$output .= '<div class="bon" id="bon">';

if (empty($_POST['notes'])) {
// Echo nothing
} else {
$output .= '<div class="bonHr"></div>';
$output .= '<div class="bonField">';
$output .= '<span>' . nl2br($_POST['notes']) . '</span>';
$output .= '</div>';
}

$output .= '</div>';
echo $output;

//Save output to database

?> 
```

# hibernate - 如何让 Hibernate 看到 DB 中的变化并与运行时对象实例同步

> ID：10915673
> 
> 赞同：0
> 
> 时间：2012-06-06T13:55:19.250
> 
> 标签：hibernate, session, transactions, struts

首先澄清一下，我在发布之前检查了很多帖子。也许我只是无法理解，但解决方案已发布。

我正在开发一个带有休眠 3（无弹簧）的 struts 应用程序 v 1.2.9。我的问题是，例如，如果我删除了一个实体，我确实提交了，那么我可以看到数据库中的更改是好的。但是，如果我查询表，请检索我提前删除的这个实体。

这是我的 hibernate.cfg.xml 的一部分

```
<property name="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</property>
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="hibernate.connection.url">XXXXXXXXXXXXXXX</property>
<property name="hibernate.connection.username">X</property>
<property name="hibernate.connection.password">X</property>
<property name="hibernate.show_sql">true</property>
<property name="hibernate.current_session_context_class">thread</property>
<property name="hibernate.hbm2ddl.auto">validate</property> 
```

org.hibernate.cache.NoCacheProvider

我的 HibernateUtil（从其他帖子复制）

```
 import org.hibernate.SessionFactory;

      import org.hibernate.cfg.Configuration;

      public class HibernateUtil {

            private static final SessionFactory sessionFactory;

            static {
                try {
                    // Create the SessionFactory from hibernate.cfg.xml
                sessionFactory = new           Configuration().configure().buildSessionFactory();

                } catch (Throwable ex) {
                    // Make sure you log the exception, as it might be swallowed
                    System.err.println("Initial SessionFactory creation failed." + ex);
                    throw new ExceptionInInitializerError(ex);
                }
            }

            public static SessionFactory getSessionFactory() {
                return sessionFactory;
            } 
```

还有我的 DAO

```
import com.mylib.modelo.Television;
import com.mylib.plugins.HibernateUtil;
import java.util.List;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import com.mylib.plugins.HibernateUtil;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.criterion.Restrictions;

public class TelevisionsDAO  {

   private static final Log log = LogFactory.getLog(TelevisionsDAO.class);

    public Television getTelevisionById(int idTelevision){
        Session session=null;
        Transaction tx =null;
        Television rs =null;
        try{
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            tx = session.beginTransaction();
            session.flush();

            //QJ: Use Hibernate Criteria for more secured functionalities
            rs=(Television) session.createCriteria(Television.class)
                     .add(Restrictions.eq("idTelevision", idTelevision))
                     .uniqueResult();
            if(rs!=null)session.refresh(rs);
            tx.commit();
        }catch(HibernateException e){
            e.printStackTrace();
        }
         return rs;
    }
    public List<Television> encuentraTelevisions(Integer idUsuario){
        Session session=null;
        Transaction tx =null;
        List rs =null;
        try{
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            tx = session.beginTransaction();
            //QJ: Use Hibernate Criteria for more secured functionalities
            rs=(List)session.createCriteria(Television.class)
                     .add(Restrictions.eq("usuario.idUsuario", idUsuario))
                     .list();
        }catch(HibernateException e){
            e.printStackTrace();
        }
         return rs;
    }

    public List<Television> encuentraTelevisions(Integer idUsuario, Boolean buscaOfrece){
        Session session=null;
        Transaction tx =null;
        List rs =null;
        try{
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            tx = session.beginTransaction();
            //QJ: Use Hibernate Criteria for more secured functionalities
            rs=(List)session.createCriteria(Television.class)
                     .add(Restrictions.eq("usuario.idUsuario", idUsuario))
                     .add(Restrictions.eq("buscaOfrece", buscaOfrece))
                     .list();
//            for(int i=0;i<rs.size();i++){
//                session.refresh((Television)rs.get(i));
//            }
            tx.commit();
        }catch(HibernateException e){
            e.printStackTrace();
        }
         return rs;
    }

    public boolean hasTelevision(Integer idUsuario, Boolean buscaOfrece,
            Integer idConocimiento){
        Session session=null;
        Transaction tx =null;
        List rs =null;
        try{
            session = HibernateUtil.getSessionFactory().getCurrentSession();
            tx = session.beginTransaction();
            //session.flush();
            //QJ: Use Hibernate Criteria for more secured functionalities
            rs=(List)session.createCriteria(Television.class)
                     .add(Restrictions.eq("usuario.idUsuario", idUsuario))
                     .add(Restrictions.eq("buscaOfrece", buscaOfrece))
                     .add(Restrictions.eq("conocimiento.idConocimiento", idConocimiento))
                     .list();
            tx.commit();
        }catch(HibernateException e){
            e.printStackTrace();
        }
         return rs.size()>0;
    }

    public Integer addTelevision(Television television) throws Exception {
        log.info("addTelevision");
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        Transaction tx = session.beginTransaction();
        try {
            Integer p = (Integer) session.save(television);
            session.flush();
            session.refresh(television);
            tx.commit();

            log.info("end addTelevision");
            return p;
        } catch (HibernateException e) {
            log.error("addTelevision", e);
            tx.rollback();
            throw e;
        }
    }

    public void quitarTelevision(Television television) throws Exception {
        log.info("quitarTelevision");

        Session session= HibernateUtil.getSessionFactory().getCurrentSession();
        Transaction tx = session.beginTransaction();
        try {
            session.delete(television);
            session.flush();
            //session.refresh(television);
            tx.commit();

        } catch (HibernateException e) {
            log.error("quitarTelevision", e);
            tx.rollback();
            throw e;
        } 
    } 
```

在 TVBL 中：

公共整数addTelevision（Usuario usuario，整数idConocimiento，布尔buscaOfrece）抛出异常{

```
 //compruebo que el usuario no contiene la telerencia en cuestión       
    if(!televisionDAO.hasTelevision(
            usuario.getIdUsuario(), buscaOfrece, idConocimiento)){
        Television tel = new Television();
        tel.setBuscaOfrece(buscaOfrece);
        tel.setUsuario(usuario);
        tel.setConocimiento(new Conocimiento(idConocimiento));
        return telerenciasDAO.addTelevision(tel);
    }else{
        return -1;
    }
  }

   public boolean quitarTelevisionSafe(Integer idTelevision, Integer idUsuarioRequesting) throws Exception{
        Television television = televisionsDAO.getTelevisionById(idTelevision.intValue());
        if( television.getUsuario().getIdUsuario().intValue() == idUsuarioRequesting.intValue() ){
            televisionsDAO.quitarTelevision(television);
            return true;
        }else{
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:01:11.187

在某些时候，您需要关闭会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:27:09.117

考虑到我现在真的不知道会话是否打开（使用 getCurrentSession()）以及何时关闭，因为会话关闭不起作用，尽管我在一些文章中读到了建议每次会话都没有打开，我决定控制它，我改变了我所有的 DAO 方法，每次都打开和关闭会话

```
Session session= HibernateUtil.getSessionFactory().openSession(); 
```

并且，在 finally 块中，

```
session.close(); 
```

我想做一个更有效的代码，但如果这样有效，我可以忍受它。下一次，我会将 Spring MVC 集成到我的应用程序中，以帮助控制事务性。

非常感谢托德和史蒂夫。

# events - MATLAB 事件和无限休眠或检查循环

> ID：10915675
> 
> 赞同：2
> 
> 时间：2012-06-06T13:55:25.907
> 
> 标签：events, matlab, event-handling, infinite-loop

我需要在目录中的文件进入时对其进行数据分析。

我想知道，如果它更好，

1.  在目录上实现一个事件监听器，并在激活时启动分析过程。然后让程序永远进入睡眠状态：`while(true), sleep(1e10), end`

2.  或有一个循环轮询更改和反应。

我个人更喜欢听者的方式，因为一个人能够对几乎同时出现的两个新文件开始两次分析，但会导致两个事件。而另一种解决方案可能只处理第一个，然后找到第二个新数据。选项 1 的附加想法：通过调用和设置匹配的-frame来
隐藏 matlab GUI 。（这个想法取自[Yair Altman](http://undocumentedmatlab.com/)）`frames=java.awt.Frame.getFrames``frames(index).setVisible(0)``index``com.mathworks.mde.desk.MLMainFrame`

还有其他方法可以实现这些事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:01:51.423

在这种情况下，（如果您使用的是 Windows），最好的方法是使用`.NET`.

```
fileObj = System.IO.FileSystemWatcher('c:\work\temp');
fileObj.Filter = '*.txt';
fileObj.EnableRaisingEvents = true;
addlistener(fileObj,'Changed',@eventhandlerChanged); 
```

有不同的事件类型，您可以为它们使用相同的回调，也可以使用不同的回调：

```
addlistener(fileObj, 'Changed', @eventhandlerChanged );
addlistener(fileObj, 'Deleted', @eventhandlerChanged );
addlistener(fileObj, 'Created', @eventhandlerChanged );
addlistener(fileObj, 'Renamed', @eventhandlerChanged ); 
```

`eventhandlerChanged`你的回调函数在哪里。

```
function eventhandlerChanged(source,arg)
   disp('TXT file changed')
end 
```

无需使用`sleep`或轮询。如果你的程序是基于 UI 的，那么就没有什么可做的了，当用户关闭图形时，程序就结束了。事件回调的执行与按钮单击完全相同。如果您的程序类似于脚本，则可以使用无限循环。

更多信息在这里： http: [//www.mathworks.com/help/matlab/matlab_external/working-with-net-events-in-matlab.html](http://www.mathworks.com/help/matlab/matlab_external/working-with-net-events-in-matlab.html)

# ruby-on-rails-3 - Rails 3 Asset Pipeline - 不要压缩某些 javascript 文件

> ID：10915679
> 
> 赞同：6
> 
> 时间：2012-06-06T13:55:32.657
> 
> 标签：ruby-on-rails-3, asset-pipeline

由于一个 javascript 文件 (ckeditor.js) 已经被压缩并且 uglifier 无法解析它，我的资产预编译失败。

由于没有真正意义上的两次压缩它，我想让 uglifier 忽略该特定文件（所有其他文件都可以正常工作）。

我能想到的一种解决方案是简单地将它移入 /public 并从那里引用它，但这也意味着我错过了 gzip 压缩和预编译为我做的指纹识别。

我的配置以防您想知道：

```
 # Asset precompilation                                                                                                                                                                                 
  config.assets.digest = true                                                                                                                                                                            
  config.assets.compress = true                                                                                                                                                                          
  config.assets.compile = false                                                                                                                                                                          
  config.assets.precompile += %w{apple.css libs/modernizr-2.5.3.min.js admin/ckeditor.js}                                                                       
  config.assets.css_compressor = :yui 
```

我正在使用 Rails 3.2

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-21T19:48:53.193

只需将其解压缩并让 uglifier 为所有文件完成工作

# jquery - TinyMCE 自定义主题 jquery ui

> ID：10915686
> 
> 赞同：0
> 
> 时间：2012-06-06T13:55:45.170
> 
> 标签：jquery, jquery-ui, tinymce, themes

这是一个带有自定义 jquery ui 主题的小 mce 示例：http:
[//fiddle.tinymce.com/IDbaab](http://fiddle.tinymce.com/IDbaab)

这是启用所有功能的微型 mce 的示例：http:
[//fiddle.tinymce.com/baaaab](http://fiddle.tinymce.com/baaaab)

我怎样才能结合这两个？

像这样写一切

```
'<input type="checkbox" id="bold" data-mce-command="bold" /><label for="bold">B</label>' +
'<input type="checkbox" id="italic" data-mce-command="italic" /><label for="italic">I</label>' + 
```

真的很愚蠢，有没有更好更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:12:05.587

我不确定这是否可行，但您不能从“theme_advanced_buttons”选项生成该 html 吗？

```
var html = '';
$.each(theme_advanced_buttons.split(',|,'), function(){
   $.each(theme_advanced_buttons.split(','), function(id, value){
      html += '<input type="checkbox" id="'+value+'" data-mce-command="'+value+'" /><label for="'+value+'">'+value+'</label>';
   });
   html += 'separator_html';
}); 
```

您可能需要另一个数组来定义显示的文本（B、I 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:14:44.810

[http://fiddle.tinymce.com/IDbaab/2](http://fiddle.tinymce.com/IDbaab/2)

在这里，我添加了一个下划线按钮

'你' +

上面，复选框是按钮的类型，data-mce-command 属性定义它将运行哪个命令并为其添加标签

您应该对所有命令执行此操作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T09:31:20.980

我现在正在使用 ckeditor，好多了 [http://ckeditor.com/](http://ckeditor.com/)
另外，新的小编辑器有一个改进的主题

# facebook - FB 评论与我网站的评论合并

> ID：10915688
> 
> 赞同：1
> 
> 时间：2012-06-06T13:55:55.563
> 
> 标签：facebook, merge, comments, integration, posting

目前我的网站在文章中有自己的评论。我决定将它与 FB 评论合并，但我当然不想丢失我的旧评论。

1.  有没有办法将我的旧评论与 FB 社交插件中的评论合并？这意味着：我可以以某种方式在 FB 评论插件中插入我的旧评论吗？

2.  一般来说，你会如何解决这个问题？你会选择什么样的整合方式？

# python - python XML-RPC向服务器发送参数列表

> ID：10915691
> 
> 赞同：2
> 
> 时间：2012-06-06T13:56:15.937
> 
> 标签：python, xml-rpc, rpc

我正在尝试发送一个数字列表（特别是 numpy 或 python 的列表）并使用 xml-rpc 获取它们的总和，以熟悉环境。我总是在客户端收到错误。

```
<Fault 1: "<type 'exceptions.TypeError'>:unsupported operand type(s) for +: 'int' and 'list'"> 
```

服务器端代码：

```
from SimpleXMLRPCServer import SimpleXMLRPCServer
def calculateOutput(*w):
    return sum(w);

server = SimpleXMLRPCServer(("localhost", 8000))
print "Listening on port 8000..."
server.register_function(calculateOutput,"calculateOutput");
server.serve_forever() 
```

客户端代码：

```
import xmlrpclib
proxy = xmlrpclib.ServerProxy("http://localhost:8000/")
print(proxy.calculateOutput([1,2,100]); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:02:21.080

通过`proxy.calculateOutput([1,2,100])`as发送`proxy.calculateOutput(1,2,100)`或将服务器端函数的参数从`def calculateOutput(*w):`更改为`def calculateOutput(w):`。

顺便说一句，您不需要分号。

这种行为的原因可以用一个简短的例子来说明

```
>>> def a(*b):
>>>    print b

>>> a(1,2,3)
(1, 2, 3)
>>> a([1,2,3])
([1, 2, 3],) 
```

正如您从输出中看到的那样，使用魔法 asterix 会将您传递给函数的许多参数打包为一个元组本身，以便它可以处理`n`大量参数。当您使用该语法时，当您发送已包含在列表中的参数时，它们会被进一步打包到一个元组中。`sum()`只需要一个列表/元组作为参数，因此当它尝试对包含的列表求和时会收到错误。

# php - 从 JSON 问题中提取数据

> ID：10915698
> 
> 赞同：0
> 
> 时间：2012-06-06T13:56:32.293
> 
> 标签：php, json, youtube, youtube-api

我正在尝试从 YouTube API 获取有关 YouTube 频道的一些信息。

这是一个输出示例（使用 Google 的频道），[http ://gdata.youtube.com/feeds/api/users/Google?alt=json](http://gdata.youtube.com/feeds/api/users/Google?alt=json)

我正在使用这个获取 JSON：

```
$json = file_get_contents("http://gdata.youtube.com/feeds/api/users/Google?alt=json");
$data = json_decode($json, true); 
```

我将输出上传`var_dump($data);`到 pastebin：[http://pastebin.com/CWA7YYGi](http://pastebin.com/CWA7YYGi)

我想得到的是`totalUploadViews`来自`yt$statistics`.

到目前为止，我尝试过的是：

```
echo $data['yt$statistics']['totalUploadViews']; 
```

但这给了我一个错误：`Notice: Undefined index: yt$statistics`

不知道我做错了什么，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:58:58.890

`yt$statistics`本身就是一个父数组的值。尝试

```
$data['entry']['yt$statistics']['totalUploadViews']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:59:56.543

`yt$statistics`是数组中的一个键`$data['entry']`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:12:12.923

做这个：

```
$json = file_get_contents("http://gdata.youtube.com/feeds/api/users/Google?alt=json");
$data = json_decode($json, true);
echo $data["entry"]["yt\$statistics"]["totalUploadViews"]; 
```

"\$" 只是从解析中逃脱了有害的**$ 。**

# c# - 获取gridview中单元格的值

> ID：10915701
> 
> 赞同：1
> 
> 时间：2012-06-06T13:56:53.623
> 
> 标签：c#, asp.net

我在我的 aspx 页面中有一个带有复选框的 gridview。gridview 是使用类型化数据集绑定的。如何检索gridview的第一个单元格中的值？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:00:08.063

尝试这样的事情

```
foreach(GridViewRow dr in Gridview.Rows)
{
   string text = dr.Cell[0].Text;
} 
```

单行的

```
 string text = GridView1.Rows[row_number].Cell[0].Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:04:56.273

尝试这个，

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
int result = Convert.toInt32(e.Row.Cells[0].Text);
} 
```

# php - 语法错误，t_variable

> ID：10915708
> 
> 赞同：-1
> 
> 时间：2012-06-06T13:57:18.270
> 
> 标签：php, syntax-error

我正在尝试将图像从远程服务器直接上传到 fb 服务器，但第 7 行出现错误语法错误告诉我它有什么问题

```
<?php
require_once("facebook.php");
$config = array();
$config[‘appId’] = 'xxxxxxxxxxxxx';
$config[‘secret’] = 'xxxxxxxxxxxxxxxxxxx';
$config[‘fileUpload’] = true/ optional
$facebook = new Facebook($config);
$attachment = array('message' => 'Want an Amazing Cover for your profile then checkout the link below. ',
'name' =>'xxxxx',
'caption' => "xxxxxxx",
'link' => 'http://apps.facebook.com/xxxxxxxxx/',
'description' => 'xxxxxxxxxxxxxx', //blah blah
'picture' => 'http://xxxxxxxxxxxxxx.com/wp-content/uploads/2012/02/under-construction-fb-cover1.jpg'.$Picturetoupload,
'method'=>'stream.publish',
'actions' => array(array('name' => 'xxxxxxxxxxxxx',
'link' => 'http://apps.facebook.com/axxxxxx/')));
$uid=$fbme['id'];  // id of the user 
$result = $facebook->api('/'.$uid.'/feed/','post',$attachment);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T13:58:18.780

您在第 6 行缺少分号，并且使用了不正确的注释和引号。

```
$config[‘fileUpload’] = true/ optional 
```

应该：

```
$config['fileUpload'] = true; // optional; 
```

# c - 主函数的返回类型

> ID：10915713
> 
> 赞同：7
> 
> 时间：2012-06-06T13:57:29.790
> 
> 标签：c

> **可能重复：**
> [main() 在 C/C++ 中应该返回什么？](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)
> [void main 和 int main 的区别？](https://stackoverflow.com/questions/636829/difference-between-void-main-and-int-main)

我一直在使用 C 中的 main 方法，例如

```
void main(){ // my code } 
```

它对我来说效果很好。我也知道另一种 `int`返回类型：

```
int main(void)
int main()
int main(int argc, char *argv[]) 
```

但是我找不到任何可以`void`用作返回类型的资源。每本书都建议返回类型必须是`int`，否则它被省略。那为什么`void main()`有效呢？

这取决于我使用的 C 版本吗？还是因为我使用了 C++ IDE 而起作用？请具体回复 C 而不是 C++。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-06T14:01:25.883

只有书籍作者似乎知道允许返回类型为`void`for的地方`main()`。C++ 标准完全禁止它。

C标准说标准形式是：

```
int main(void) { ... } 
```

和

```
int main(int argc, char **argv) { ... } 
```

允许参数类型的替代但等效的声明形式（当然，名称是完全自由的，因为它们是函数的局部变量）。

C标准确实为“以其他一些实现定义的方式”做出了小的规定。ISO/IEC 9899:2011 标准规定：

> ### 5.1.2.2.3 程序终止
> 
> 如果`main`函数的返回类型是与 兼容的类型`int`，则从函数的初始调用返回`main`相当于以`exit`函数返回的值`main`作为参数调用函数；^(11))到达`}`终止main函数的返回值为0。如果返回类型与 不兼容`int`，则返回给宿主环境的终止状态是未指定的。
> 
> ^(11))根据 6.2.4，在 main 中声明的具有自动存储持续时间的对象的生命周期将在前一种情况下结束，即使在后者中它们不会有。

这清楚地允许`int`不退货，但清楚地表明它没有被指定。因此，某些实现`void`可能允许将其作为返回类型`main()`，但您只能从文档中找到它。

（虽然我引用的是 C2011 标准，但在 C99 中基本上是相同的词，我相信 C89，尽管我的文字在办公室，但我不是。）

顺便说一句，标准的附录 J 提到：

> ## J.5 通用扩展
> 
> 以下扩展在许多系统中广泛使用，但不能移植到所有实现中。包含可能导致严格符合的程序无效的任何扩展都会导致实现不符合。此类扩展的示例是新关键字、标准头文件中声明的额外库函数或名称不以下划线开头的预定义宏。
> 
> ### J.5.1 环境参数
> 
> 在托管环境中，该`main`函数接收第三个参数 ，`char *envp[]`该参数指向一个以空结尾的指针数组`char`，每个指针指向一个字符串，该字符串为程序的执行提供有关环境的信息（5.1.2.2.1 ）。

## 为什么`void main()`有效？

问题观察到`void main()`有效。它“有效”是因为编译器会尽力为程序生成代码。诸如 GCC 之类的编译器会针对 的非标准形式发出警告`main()`，但会对其进行处理。链接器不太担心返回类型；它只需要一个符号`main`（或者可能`_main`，取决于系统），当它找到它时，将它链接到可执行文件中。启动代码假定`main`已以标准方式定义。如果`main()`返回到启动代码，它会像函数返回一个 一样收集返回值`int`，但该值很可能是垃圾。因此，只要您不寻找程序的退出状态，它似乎就可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:09:38.297

从[马口中](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)：

> ### 5.1.2.2.1 程序启动
> 
> 1 程序启动时调用的函数名为`main`。实现没有声明这个函数的原型。它应该被定义为返回类型`int`并且没有参数：
> 
> ```
>  int main(void) { /* ... */ }
> ```
> 
> 或带有两个参数（这里称为`argc`and `argv`，尽管可以使用任何名称，因为它们对于声明它们的函数是本地的）：
> 
> ```
>  int main(int argc, char *argv[]) { /* ... */ }
> ```
> 
> 或同等学历; ^(9）) 或以其他一些实现定义的方式。
> 
> * * *
> 
> ^(9) 因此，int 可以替换为定义为 int 的 typedef 名称，或者 argv 的类型可以写为 char ** argv，等等。)

漏洞是“其他一些实现定义的方式”。实现*可能*允许`main`返回`void`（或任何其他类型），但它*必须明确记录*允许这样的签名。否则行为是未定义的，这意味着编译器可以做任何它想做的事情。该程序可以毫无问题地执行。它可能会执行，但会使环境处于不良状态。它可能会在退出时崩溃。它可能根本无法加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:01:02.220

它取决于您使用的编译器，但 void main 并非在任何地方都可编译。我见过不会用 void main 编译程序的编译器。我不记得具体情况（对于 c），但我确定这发生在 g++ 中（是的，我知道这是 c++）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:03:14.043

标准要求`main()`返回`int`，但许多 C 编译器允许您指定`main()`as的返回类型`void`。

我建议你养成返回的习惯`int`。添加一个

```
return 0; 
```

到最后你`main()`是不是太努力了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-06T14:03:55.947

我在 C89 中是可以接受的，但它不再被认为是“安全的”。在 C99 下，它不再被接受。

[http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?id=1043284376&answer=1044841143](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?id=1043284376&answer=1044841143)

# linq - 为什么调用 IQueryable.FirstOrDefault() 方法时总是返回 null？

> ID：10915715
> 
> 赞同：0
> 
> 时间：2012-06-06T13:57:37.143
> 
> 标签：linq, entity-framework, expression

```
 public class CellValue
{
    double? Max;
    double? Min;
    string  Value;
    string Annotation;
}

    public T GetOne(Expression<Func<T, bool>> predicate）
｛
     IQueryable<T> query = this.context.Set<T>();
     return query.FirstOrDefault(predicate);
｝

    public class Steel: CellValue{}

    CellValue cell = new CellValue{Max = 0.8, Min = 0.1, Value="test"};
    Steel steel = service.GetOne(t=>t.Max == cell.Max && t.Min == cell.Min && t.Value ==cell.Value && t.Annotation == cell.Annotation);
    //but the object steel is always null. Jush Why？ 
```

我检查了我的数据库，但我不知道它总是为空。表达式树和 Lambda 表达式可能是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:02:34.637

“OrDefault”方法为引用类型返回 null，或为值类型返回默认值（例如 int 是值类型，因此它将返回 0）。

# .net - WCF：处理哪种异常

> ID：10915725
> 
> 赞同：0
> 
> 时间：2012-06-06T13:58:00.070
> 
> 标签：.net, wcf, exception, fault

在 WCF 服务中，我会发生异常。

我在 serviceDebug 行为中有 IncludeExceptionDetailInFaults 属性。

如果我有这样声明的方法：

```
[OperationContract]
String SayHello(String name); 
```

让我们想象一下，我做了一些在这个 SayHello 方法中生成 NullReferenceException 的事情。

在**客户**端，我会收到什么？一个`FaultException`或一个`NullReferenceException`？

我找不到任何关于此的文档。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:46:55.800

客户端应该总是收到一个错误异常 - 因为它是一个肥皂错误......如果你想要更多细节，你可以将它添加到你的操作合同中： `[FaultContract(typeof(NullReferenceException))]`然后你可以像这样捕获它：

```
}catch(FaultException<NullReferenceException> e){... 
```

# varnish - 清漆缓存中的无限重定向循环

> ID：10915731
> 
> 赞同：1
> 
> 时间：2012-06-06T13:58:18.093
> 
> 标签：varnish, varnish-vcl

我们最近将 Varnish 放在了 Drupal 前面，因为服务器负载很重，总的来说我们很高兴。

剩下的唯一问题是我们有时在缓存数据中存在无限重定向循环。我们通过 HTTP 监控发现了这一点。我们每分钟检查一次首页。缓存中的页面有时包含完整的首页，但设置了 Location 标头，这会将用户再次发送到首页。

我们不太确定是什么导致了这种情况，但也不知道如何追踪它。当然，处理这个问题的最好方法是在 drupal 方面，但我们无法真正说出为什么会发生这种情况。

发生这种情况时，有没有办法记录案例？或者是否可以在清漆中检测到这一点并将当前缓存内容标记为无效？

当然，我们不希望总是将有意的重定向传递给源服务器，而是那些会导致无限循环的重定向。

我希望听到一些想法，我们可以如何进一步追踪这一点。许多人提前感谢各种提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:44:16.663

我找到了解决方法：

```
sub vcl_fetch {
  // Fix a strange problem: HTTP 301 redirects to the same page sometimes go in$
  if (beresp.http.Location == "http://" + req.http.host + req.url) {
    if (req.restarts > 2) {
      unset beresp.http.Location;
      #set beresp.http.X-Restarts = req.restarts;
    } else {
      return (restart);
    }
  }
} 
```

我给后端第二次（也是第三次）返回正确页面的机会。如果同样失败，则 Location 标头将被删除。这是可行的，因为正确的页面只提供了一个额外的无效 Location 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T20:37:09.067

@philip 接受的答案为 Varnish 4 更新：

```
sub vcl_backend_response {

#Fix a strange problem: HTTP 301 redirects to the same page sometimes go in$
if (beresp.http.Location == "http://" + bereq.http.host + bereq.url) {
    if (bereq.retries > 2) {
      unset beresp.http.Location;
      #set beresp.http.X-Restarts = bereq.retries;
    } else {
      return (retry);
    }
}

} 
```

# excel - 同时冻结第 1 行和 A 列

> ID：10915733
> 
> 赞同：119
> 
> 时间：2012-06-06T13:58:20.543
> 
> 标签：excel, excel-2010

我想在 Excel 2010 中同时“冻结”第 1 行和第 A 列。

这可能吗？

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2012-06-06T13:59:53.430

选择单元格 B2 并单击“冻结窗格”，这将冻结第 1 行和 A 列。

为了将来参考，在 Excel 中选择冻结窗格将冻结所选单元格上方的行和所选单元格左侧的列。例如，要冻结第 1 行和第 2 行以及 A 列，您可以选择单元格 B3 并单击冻结窗格。您还可以通过选择单元格 C2 并单击“冻结窗格”来冻结 A 和 B 列以及第 1 行。

Excel 2010 中冻结窗格的视觉辅助 - [http://www.dummies.com/how-to/content/how-to-freeze-panes-in-an-excel-2010-worksheet.html](http://www.dummies.com/how-to/content/how-to-freeze-panes-in-an-excel-2010-worksheet.html)

微软参考指南（更复杂，但足智多谋） - [http://office.microsoft.com/en-us/excel-help/freeze-or-lock-rows-and-columns-HP010342542.aspx](http://office.microsoft.com/en-us/excel-help/freeze-or-lock-rows-and-columns-HP010342542.aspx)

# iphone - 生成推送通知证书时出现未知错误

> ID：10915734
> 
> 赞同：0
> 
> 时间：2012-06-06T13:58:28.680
> 
> 标签：iphone, push-notification, apple-push-notifications

有没有人从 Apple 的开发者控制台遇到过这个错误？

![错误](../Images/ff03d0398aa205569cefb628bfd88dcf.png)

奇怪的是，根据下一个画面，一切都已经完美了：

![在此处输入图像描述](../Images/fadd14803814399076ded8fc9bcdfe31.png)

最后，我的推送通知不起作用，我想知道问题是否来自这个“错误”。

**编辑：**
它是在上传`CertificateSigningRequest.certSigningRequest`钥匙串访问应用程序生成的文件之后出现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:26:41.113

我终于找到了问题！

我在谷歌浏览器 (v19.0.1084.56) 上有这个错误消息，当我在 Safari 上尝试时，一切正常。

我没有尝试使用其他网络浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:39:33.680

[在http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk_apns/](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk_apns/)的 iOS 配置门户中配置您的应用程序部分提到了生成启用推送通知的配置证书的明确步骤。

# javascript - 如何防止 ie8 在 head 部分加载一些 javascripts？

> ID：10915740
> 
> 赞同：0
> 
> 时间：2012-06-06T13:58:47.080
> 
> 标签：javascript, html, internet-explorer-8

我想知道是否只有在不是这样的 IE 8 时才可以加载一些 javascript 文件：

```
<!--[if NOT IE 8]>
            <script type="text/javascript" src="assets/scripts/slideshow.js"></script>
 <![endif]-->

<!--[if IE 8]>
            <script type="text/javascript" src="assets/scripts/slideshowOnlyForIE8.js"></script>
 <![endif]--> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:03:54.010

试试这个（[从这里引用](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)）......

```
<!--[if !IE 8]><!-->
   <script type="text/javascript" src="assets/scripts/slideshow.js"></script>      
<!--<![endif]-->

<!--[if IE 8]>
    <script type="text/javascript" src="assets/scripts/slideshowOnlyForIE8.js"></script>        
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:02:28.880

我假设您要么受限于 IE8 缺少的功能，要么利用了 IE8 的特定功能。在这种情况下，最好的办法是测试该门控功能。

基本上，将两个脚本合二为一，然后通过一个简单的 if 测试来查看您的功能是否可用：

```
if(crucialIEFunction()) {
    //run IE8 slideshow code
}
else
{
    //run non IE slideshow code
} 
```

# ios - 将时间戳设置为 nsuserdefaults

> ID：10915742
> 
> 赞同：0
> 
> 时间：2012-06-06T13:58:53.143
> 
> 标签：ios, xcode, timestamp, nsuserdefaults

是否可以将时间戳设置为 nsuserdefaults 然后检查，如果它改变了，然后采取行动？

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"timestamp"])
 {

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:07:30.623

您不能将时间戳本身存储在 NSUserDefaults 中，但您可以存储一个表示 TimeStamp 的整数，您可以轻松比较这些。

以这个为例； [时间戳示例 - int 转换，存储在 NSUserDefaults 中](https://stackoverflow.com/questions/1655117/time-passed-between-launches-iphone)

# javascript - 通过 javascript 提交表单

> ID：10915745
> 
> 赞同：0
> 
> 时间：2012-06-06T13:58:53.967
> 
> 标签：javascript, asp.net-mvc, forms

```
 function callMethod() {
 document.myForm.submit();} 
```

这是表格：

```
<% using (Html.BeginForm("MyMethod", "Account", FormMethod.Post, new { name = "myForm" }))
           { %>

//bla

<input type="submit" onclick="return callMethod();" value="OK" /> 
```

而且 MyMethod 没有受到打击。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:02:43.007

因为提交按钮已经提交了表单。为此，您必须制作一个简单的按钮。不提交按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:12:24.267

尝试：

```
function callMethod() {
    $('#myForm').submit();
}

$('#myForm').submit(function () {
    callMethod();
    return false;
}); 
```

或者将按钮类型从 更改`submit`为`button`，给它一个 ID 和代码：

```
$('#buttonID').click(function () {
    callMethod();
}); 
```

但我实际上不明白你在做什么......

# c# - 适用于 iOS 的 SQLite - RANDOM() 不够好

> ID：10915752
> 
> 赞同：1
> 
> 时间：2012-06-06T13:59:11.130
> 
> 标签：c#, objective-c, sqlite, random, xamarin.ios

我正在开发一个 iOS 文字游戏，它是围绕从 SQLite 数据库中提取随机单词而构建的。

所以我有 1 个表，单词，我抽出 X 个随机单词，如下所示：

```
SELECT Word FROM (SELECT Word FROM Words ORDER BY RANDOM() LIMIT @limit) ORDER BY LENGTH(Word) 
```

问题是我的测试版用户抱怨它不够随机。似乎很多时候都使用相同的词，而有些词根本就没有。

有没有替代我正在做的事情？我知道 SQLite 的 RANDOM() 可能不是最好的。我不想加载内存中的所有单词，因为有超过 3,000 个。

PS - 我的应用程序是用 MonoTouch 用 C# 构建的，但我可以肯定地接受 Objective-C（甚至伪代码）的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:04:36.443

也许是因为您订购了它们？你选择一个随机排序的单词列表，然后你再做一次选择并按单词长度排序这个结果。第二次排序可能会打乱您的随机化。我会将其拆分，并根据您在游戏中需要的单词将长度设为 where 子句，还是先按长度选择并随机化这些列表？

# android - 构建 Android ICS Camera App 原生库

> ID：10915755
> 
> 赞同：1
> 
> 时间：2012-06-06T13:59:39.813
> 
> 标签：android, android-ndk

我已经克隆了 Android 4.0 附带的 android 相机应用程序的代码。我正在尝试构建运行全景模式所需的本机 Mosaic JNI 库，但它抛出了一个连接到它正在使用的 OpenGL 参数的错误。它不是一个错误，而是类似于：

jni/mosaic_renderer_jni.cpp：664：未定义对“glBindFramebuffer”的引用

ETC..

有人可以帮我解决这个问题吗？我需要完整的android源代码来构建这个库吗？如果有人对此有任何经验，请您给我一些指示吗？

谢谢，

**更新：**

我尝试了另一种方法，我设法提取了编译后的 libjni_mosaic.so 文件。

现在我在将已编译的本机代码作为库添加到现有应用程序时遇到了问题。谁能给我一些关于如何添加库的指示？

# c# - .NET Framework 输出到控制台？

> ID：10915757
> 
> 赞同：0
> 
> 时间：2012-06-06T13:59:49.990
> 
> 标签：c#, .net, winforms

我有一个输出到 TextBox 的 TextWriter。我已将 TextWriter 连接到 Console.Out：

```
// set application console output to the output text box
Console.SetOut(TextWriter.Synchronized(new TextBoxWriter(this)));

class TextBoxWriter : TextWriter
{
  public override void WriteLine(string value)
  {
    // output to text box
  }
} 
```

这很好，但是我发现.NET框架本身正在将跟踪/调试输出写入控制台，因此我的窗口！

例如，用户可以单击在表单上创建控件的按钮。这将输出如下内容：

```
170,130 0,0 
```

调用堆栈显示正在从外部代码调用文本编写器 WriteLine 函数以响应 MyForm.Controls.Add(...);

如果用户调整控件的大小，那么 .NET 框架会将如下废话写入控制台：

```
0.574257425742574 @ 1 
```

调用堆栈显示正在从外部代码调用文本编写器 WriteLine 函数以响应 MyControl.Width = NewValue;

当我的应用程序是为调试和发布而构建时会发生这种情况。

我没有打开跟踪或调试功能。

即使未定义 DEBUG 和 TRACE 也会发生这种情况。

我的应用程序没有提及或做任何与调试或跟踪相关的事情。

我不会对控制台做任何其他事情。

我的应用程序没有调用 System.Diagnostics 中的任何内容。

使用 C#、.NET 4.0、Windows 7 64 位、Visual Studio 2010。

这真让我抓狂。关于下一步尝试什么的任何建议？

# c# - DropDownListFor Unobtrusive 验证显示在空表单上

> ID：10915764
> 
> 赞同：0
> 
> 时间：2012-06-06T14:00:18.913
> 
> 标签：c#, asp.net-mvc, unobtrusive-validation

当我打开此页面时（即使是第一次），我总是会收到验证消息，即使我在下拉列表中选择值，消息也不会消失。如果我在两者中都选择值，我可以提交表单，但消息仍然不会消失。

`Snippet`是 Linq to sql 类并且`LanguageID`是`SnippetTypeID`整数，我假设发生这种情况是因为我将空模型传递给 View 所以`LanguageID`并且`SnippetTypeID`是 null 并且 AFAIK Linq to Sql 类需要不可为空的整数。

如何解决此问题，以便在用户尝试提交表单之前不会出现验证消息，并且如果选择下拉列表之一以删除验证消息。

**看法**

```
@model Data.Snippet
@using (Html.BeginForm("Save", "Submit", FormMethod.Post))
{
    <h1 class="subtitle">Submit new snippet</h1>

    <h4>Title</h4>

    @Html.TextBoxFor(snippet => snippet.Title, new { @class = "form-field" })

    <h4>Language</h4>

    @Html.DropDownListFor(snippet => snippet.LanguageID, new SelectList(@ViewBag.Input.Languages, "ID", "Name", @Model.LanguageID), "Choose Language", new { @class = "form-select" })

    <p>@Html.ValidationMessageFor(snippet => snippet.LanguageID , "You must choose language", new { @class= "validation-message"})</p> 

    <h4>Snipet type</h4>

     @Html.DropDownListFor(snippet => snippet.SnippetTypeID, new SelectList(@ViewBag.Input.SnippetTypes, "ID", "Name", @Model.SnippetType), "Choose snippet type", new { @class = "form-select" })

     <p>@Html.ValidationMessageFor(snippet => snippet.SnippetTypeID,"You must choose snippet type", new { @class= "validation-message"})</p> 

     <h4>Text</h4>

     @Html.TextAreaFor(snippet => snippet.Text, new { cols = "20", rows = "10", @class = "form-field" })

     <input type="submit" value="Submit Snippet" />
} 
```

**控制器**

```
 //Controllers are not finished Save() should have
        //code to actually insert to db after I fix validation
        // GET: /Submit/
        //
        public ActionResult Index()
        {
            Snippet model = new Snippet();

            SubmitModel input = new SubmitModel();

            ViewBag.Input = input;

            return View(model);
        }

        public ActionResult Save(Snippet snippet)
        {

            return View();
        } 
```

**模型**

模型是 Linq to Sql 类。

```
Snippet
ID (int, identifier)
Title (string)
SnippetType (int, FK on table SnippetTypes)
LanguageID  (int, FK on table Languages)
Text (string) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:07:17.637

好的，

所以我认为它失败的原因是你添加的自定义 CSS。ValidationMessageFor 将在验证成功时放置一个隐藏类。

如果您想为 CSS 添加自定义颜色或类似的东西，我会考虑将样式应用于包装 p 标签或添加包装 div/span 并将其添加到其中。

您可能只使用在视图上定义您的消息`@Html.ValidationMessageFor(snippet => snippet.SnippetTypeID, "ErrorMessage");`但是更合适的方法是获取您的模型并为其创建数据注释。

看看这篇文章[http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs)了解更多关于如何做的信息使用数据注释进行模型验证。

另外我会考虑传入自定义类而不是您的 linq to sql 类，以便您可以根据视图进行自定义验证。这些自定义类通常被称为 ViewModel。

# javascript - h:selectManyListbox 的 onselect 不起作用

> ID：10915765
> 
> 赞同：1
> 
> 时间：2012-06-06T14:00:20.380
> 
> 标签：javascript, jsf-2, dom-events

我有以下代码：

```
<script type="text/javascript">
  //<![CDATA[ 
  function editSelected(selBox)
  {
    var htmlstring = selBox.options[selBox.selectedIndex].text;
    alert(htmlstring);
  }
  //]]>
</script>
...
<h:selectManyListbox
  id="titles"
  value="#{detailModel.selectedTitles}"
  size="5"
  disabled="#{detailModel.mode == detailModel.viewMode}"
  onselect="editSelected(document.getElementById('detailForm:titles'))">

  <f:selectItems
    value="#{detailModel.getCollectionAsSortableMetadataStringList(detailModel.afterObject.metadata.getTitles())}"
    var="title"
    itemLabel="#{title.value}"
    itemValue="#{title.position}"/>
</h:selectManyListbox> 
```

使用`onselect`，当我单击选择的选项时，没有任何反应。有了`onclick`我的预期行为（带有所选文本的围栏）。

我错过了什么还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:41:16.960

这可能是 JSF 规范中的疏忽。元素**不**支持该`select`事件。另见[HTML DOM 2 级规范第 1.6.5 章](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-htmlevents)**`<select>`**

 **> ### 选择
> 
> 当用户在文本字段中选择一些文本时，会发生 select 事件。此事件对 INPUT 和 TEXTAREA 元素有效。

请注意，它没有提到 SELECT 元素。我已将其报告为[规范问题 1113](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-1113)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:12:59.590

我认为这些`onselect`作品仅适用于`h:inputText`或`h:inputTextarea`您可以选择部分文本的位置，例如用于复制/粘贴。

对于事件是正确`h:selectManyListbox`的`onclick`选择。**

# java - Eclipse-AndroidEmulator 不应用项目的更改

> ID：10915767
> 
> 赞同：0
> 
> 时间：2012-06-06T14:00:33.483
> 
> 标签：java, android, eclipse, debugging, reload

我目前正在使用 Eclipse Indigo（包括 Android 插件）开发一个 Android 应用程序。一开始一切都很好。然后我做了一些更改，发现调试透视图没有应用任何更改。它总是加载相同的过时版本。

重新启动调试透视没有帮助。
清理项目没有帮助。
重新定位工作区或重新启动 Eclipse 或计算机也不起作用。

我曾经可以通过完全删除所有内容（包括 Eclipse、Android 插件等）并重新安装来加载整个新项目。但这不是每次我想尝试一种新方法时的选择。

有趣的是：如果我在 EditText 字段中写了一些文本，当我重新启动调试时，文本仍然存在。

有什么想法可以解决这个问题以获得实际项目吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T12:58:00.633

解决方案：创建一个禁用快照的设备。它在我的 android sdk 版本中自动激活。

# php - 用于从 Web 服务接收的文件的 PHP“保存对话框”

> ID：10915768
> 
> 赞同：0
> 
> 时间：2012-06-06T14:00:34.387
> 
> 标签：php, web-services

我正在使用[WSO2 WS 框架](http://wso2.com/products/web-services-framework/php)，并且我设法运行示例，其中 Web 服务将图像作为 MTOM 附件返回，然后由客户端使用 file_put_contents(...) 命令保存。

**服务：**

```
<?php

function sendAttachment($msg){
$responsePayloadString = <<<XML
    <ns1:download xmlns:ns1="http://wso2.org/wsfphp/samples/mtom">
        <ns1:fileName>test.jpg</ns1:fileName>
            <ns1:image xmlmime:contentType="image/jpeg" xmlns:xmlmime="http://www.w3.org/2004/06/xmlmime">
                <xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:myid1"></xop:Include>
            </ns1:image>
    </ns1:download>
XML;
$f = file_get_contents("test.jpg");                                        

$responseMessage = new WSMessage($responsePayloadString, 
        array( "attachments" => array("myid1" => $f)));  
return $responseMessage;    
}

$operations = array("download" => "sendAttachment");

$service = new WSService(array("operations" => $operations, "useMTOM" => TRUE));

$service->reply();

?> 
```

**客户：**

```
<?php

$requestPayloadString = '<download></download>';

try {

$client = new WSClient(
    array( "to" => "http://SPLINTER/MTOM/service.php",
           "useMTOM" => TRUE,
           "responseXOP" => TRUE));

$requestMessage = new WSMessage($requestPayloadString);                    
$responseMessage = $client->request($requestMessage);

printf("Response = %s \n", $responseMessage->str);

$cid2stringMap = $responseMessage->attachments;
$cid2contentMap = $responseMessage->cid2contentType;
$imageName;
if($cid2stringMap && $cid2contentMap){
    foreach($cid2stringMap as $i=>$value){
        $f = $cid2stringMap[$i];
        $contentType = $cid2contentMap[$i];
        if(strcmp($contentType,"image/jpeg") ==0){
            $imageName = $i."."."jpg";
            if(stristr(PHP_OS, 'WIN')) {
                file_put_contents($imageName, $f);
            }else{
                file_put_contents("/tmp/".$imageName, $f);
            }
        }
    }
}else{
    printf("attachments not received ");
}

} catch (Exception $e) {

if ($e instanceof WSFault) {
    printf("Soap Fault: %s\n", $e->Reason);
} else {
    printf("Message = %s\n",$e->getMessage());
}
}
?> 
```

相反，我想打开一个“保存对话框”来选择打开或保存文件。在寻找解决方案时，我阅读了有关设置 heders 的信息，例如：

```
header('Content-type: application/octet-stream');
header('Content-disposition: attachment; filename="test.jpg"'); 
```

但效果并不好。弹出“保存对话框”，但无法打开图像时说该文件为空。

其实我不太明白这个 MTOM 附件是如何工作的。在客户端代码中，我认为 $f 是一个字符串，当我执行 printf($f) 时它会打印 0(zero) 那么如何将此字符串保存为图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:05:00.767

如果要使用该标头，则必须输出文件内容，而不是将其保存在某处。

```
header('Content-type: application/octet-stream');
header('Content-disposition: attachment; filename="test.jpg"');

// Output file. This must be the ONLY output of the whole script
echo $rawFileContents; 
```

基础是，当您将整个文件内容加载到一个变量中（并且它似乎`$f`在您的代码中）时，您输出它而不是将其写入文件中（就像我认为您现在正在做的那样）。所以，我给你的三行代码应该替换`file_put_contents()`调用。

相反，如果你想将文件保存在你的`/tmp`文件夹中，好的，这样做，但然后使用

```
header('Location: /tmp/' . $imageName); 
```

这样，您可以将用户浏览器直接重定向到保存的文件，并让用户用它做他们想做的事。

# python - 如何修复 CSRF 验证错误？

> ID：10915769
> 
> 赞同：1
> 
> 时间：2012-06-06T14:00:39.427
> 
> 标签：python, django, templates, csrf

我收到错误消息“CSRF 令牌丢失或不正确”，但我相信我在模板中包含了正确的标签。以下是显示此错误的视图和模板：

```
def contact(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            return HttpResponseRedirect('/contact/thanks/')
    else:
        form = ContactForm()
    return render_to_response('reserve/templates/contact_form.html',{'form': form}) 
```

模板：

```
<html>
<head>
    <title>Contact us</title>
</head>
<body>
    <h1>Contact us</h1>

    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}

    <form action="" method="post">
    {% csrf_token %}
        <table>
            {{ form.as_p }}
        </table>
        <input type="submit" value="Submit">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:13:18.980

[注意说明的第](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#how-to-use-it)3 项。一种快速的方法是将您的`render_to_response`呼叫替换为`render(request, 'reserve/templates/contact_form.html',{'form': form})`（通过导入`from django.shortcuts import render`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:04:48.053

您应该将上下文实例传递给您的 render_to_response

```
from django.template import RequestContext

return render_to_response('reserve/templates/contact_form.html', context_instance=RequestContext(request,{'form': form})) 
```

# java - 在 JSF 中使用 bean 验证进行本地化

> ID：10915770
> 
> 赞同：10
> 
> 时间：2012-06-06T14:00:56.550
> 
> 标签：java, jsf-2, localization, richfaces, bean-validation

我使用 JSF 2.0 和 RichFaces 4 创建了一个基于 MVC 的网站。每个输入文本验证都是使用 bean 验证注释完成的。我使用 Hibernate Validator 作为 bean 验证实现。

如何显示本地化消息？

如果我使用

```
@NotNull(message="<h:outputText value=\"#{msg['Mymessage']}\" />") 
```

然后它从字面上显示`<h:outputText value="#{msg['Mymessage']}" />`为消息。

![在此处输入图像描述](../Images/c321ef5f3c5314e26e5b98059bbed51f.png)

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-06T14:06:44.947

You should and can not put JSF tags in the message. Also, JSF's own resource bundle won't be used to resolve localized validation messages. JSR303 bean validation is a completely separate API unrelated to JSF.

To internationalize JSR303 bean validation messages, you need to create a separate `ValidationMessages.properties` file in the classpath root which can be localized by `ValidationMessages_xx_XX.properties` files.

E.g.

```
ERVNomView=Your message here 
```

Which is then to be specified with `{key}` syntax.

```
@NotEmpty(message="{ERVNomView}") 
```

### See also:

*   [Chapter 4.3.1.1 of the JSR303 specification](http://jcp.org/aboutJava/communityprocess/edr/jsr303/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T17:04:36.363

对于那些和我有同样问题的人（@BalusC 给出的解决方案不适用于多种语言的许多不同属性文件），要做的事情是按以下模式命名所有属性文件：ValidationMessages_xx。特性

我不知道为什么，但模式 ...xx_XX... 对我不起作用。

# linux - 在linux中使用sed替换字符串后面的数字时得到一个额外的数字

> ID：10915774
> 
> 赞同：2
> 
> 时间：2012-06-06T14:01:12.143
> 
> 标签：linux, sed, numbers, solution, extra

这对我来说是一个真正的问题。

我有一个原始输入文件如下。

```
R shthk     0.900000                                                            
R mue       0.054100                                                            
R nue       0.121400                                                            
R oue       0.137700                                                            
R ystress  150.23000 
```

我有一个名为 Friction1.k 的文件，其值为 **0.123200**。

我想在模拟期间将**mue的值更改为该文件中给出的值。**

我使用以下 sed 脚本。

```
sed '/\<mue\>/!d;=;s/.* \([^ ]\+\).*/\1/;R Friction1.k' dynaRcoupledmodel.k |
sed 'N;N;s|\n|s/|;s|\n|/|;s|$|/|;q' >temp.sed
sed -i -f temp.sed dynaRcoupledmodel.k 
```

所以它变为

```
R shthk     0.900000                                                            
R mue       0.123200148                                                            
R nue       0.121400                                                            
R oue       0.137700                                                            
R ystress  150.23000 
```

该软件对其格式非常严格，因此当我使用此命令时，148 或 155 或 159 会额外出现，并且我收到 *PARAMETER 试图更改内在 TIME 的错误。

早些时候它对我来说很好，但现在这给出了错误。

我检查了 temp.sed 并且那个数字也在那里但是如何避免它？

我不知道为什么这个数字会额外出现，它来自哪里，但这对我来说是个问题。任何专家可以帮助我吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:28:17.797

这可能对您有用（GNU sed）：

```
cat Friction1.k
0.123200
cat dynaRcoupledmodel.k
R shthk     0.900000                                                            
R mue       0.054100                                                            
R nue       0.121400                                                            
R oue       0.137700                                                            
R ystress  150.23000 
 sed '1{h;d};/\<mue\>/!b;G;s/\S*\(\s*\)\n\(.*\)/\2\1/' Friction1.k dynaRcouplemodel.k
R shthk     0.900000                                                            
R mue       0.123200                                                            
R nue       0.121400                                                            
R oue       0.137700                                                            
R ystress  150.23000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:13:00.263

为什么要使用 sed，您可以像这样在单个 awk 行中完成所有这些操作：

```
awk -v DATA=$(<Friction1.k) '($2=="mue"){$3="      " DATA}1' dynaRcoupledmodel.k 
```

或者

```
awk -v DATA=$(<Friction1.k) '($2=="mue"){$3=sprintf("%14s",DATA)}1' dynaRcoupledmodel.k 
```

或者更好，因为**它保留了空格**

```
awk -v DATA=$(<Friction1.k) '($2=="mue"){sub($3,DATA)}1' dynaRcoupledmodel.k 
```

### 输出：

```
R shthk     0.900000                                                            
R mue       0.123200
R nue       0.121400                                                            
R oue       0.137700                                                            
R ystress  150.23000 
```

# css - Rails 选择标签 - 设置特定的选项样式

> ID：10915775
> 
> 赞同：3
> 
> 时间：2012-06-06T14:01:25.473
> 
> 标签：css, ruby-on-rails, html-select

我想在 SELECT 标记中选择具有特殊颜色的选项之一。

如何使用 Rails 的 f.select 助手和 options_for_select 执行此操作？

```
<html>
<head>
  <style type="text/css">
    option.standard {background-color:#FFAAAA}
  </style>
</head>
<body>
  <select style="width:100px">
    <option selected="selected">1</option>
    <option>2</option>
    <option class="standard">3</option>
    <option>4</option>
    <option>5</option>
  </select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:11:39.430

正如文档所说[`options_for_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)，您可以这样做：

```
options_for_select([ 1, 2, [ 3, { :class => 'standard' }], 4, 5 ], [ 1 ]) 
```

# c# - 为什么不能比较 IntPtr.Zero 和 default(IntPtr)？

> ID：10915780
> 
> 赞同：6
> 
> 时间：2012-06-06T14:01:34.573
> 
> 标签：c#, .net, default, intptr

我刚刚了解到 IntPtr.Zero 无法与默认值（IntPtr）进行比较的艰难方法。有人能告诉我为什么吗？

```
IntPtr.Zero == new IntPtr(0) -> "could not evaluate expression"
IntPtr.Zero == default(IntPtr) --> "could not evaluate expression"
IntPtr.Zero == (IntPtr)0 -> "could not evaluate expression"

IntPtr.Zero.Equals(IntPtr.Zero) --> "Enum value was out of legal range" exception
IntPtr.Zero.Equals(default(IntPtr)) --> "Enum value was out of legal range" exception

IntPtr.Zero == IntPtr.Zero --> true
new IntPtr(0) == new IntPtr(0) --> true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:14:49.267

在 VS 2010、VS 2008、VS 2005 SP1、Mono 1.2.6 中的编译代码中为我工作。**设法仅在 Visual Studio 2005 的监视窗口中**重现这两个问题（我尝试使用 VS 2005 SP1），编译后的代码按预期工作。（这两个问题我的意思是问题 1：“无法评估表达式”，问题 2：“枚举值超出了合法范围”。）因此，正如一些评论作者所指出的，它是一个 VS 2005 监视窗口你偶然发现的错误。很难快速找到相关错误报告的链接......

否则，在这种情况下，我会从反射开始，看看您尝试比较的类型（将 Console.Out 替换为您有权访问的任何有意义的流）：

```
Console.WriteLine("new IntPtr(0) type is: " + new IntPtr(0).GetType());
Console.WriteLine("IntPtr.Zero type is: " + IntPtr.Zero.GetType()); 
```

# sql-server - 如何获取我的共享数据集引用的数据源的名称？

> ID：10915786
> 
> 赞同：0
> 
> 时间：2012-06-06T14:01:55.300
> 
> 标签：sql-server, reporting-services, sql-server-2012

我想显示报告中使用的数据源的名称，作为快速识别数据来源的一种方式。

我知道我可以像这样显示嵌入式数据源的名称：

```
=DataSource("name").DataSourceReferenceString 
```

但是，我的报告没有嵌入数据源，因为我使用的是共享数据集。

有任何想法吗 ？我“做错了”吗？

编辑：到目前为止的答案涉及使用*DataSources*集合。问题是……我的报告没有引用任何数据源。它确实引用了一个共享数据集，该数据集本身引用了一个数据源。这种方法允许我通过编辑共享数据集来更改所有报告的数据源。但我总是对更好的想法持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:26:15.737

这可能对您有所帮助。它表示从报告正文中引用的数据源的集合

```
 DataSources("name").Type 
```

有关详细说明，您可以通过链接[Using Global Collections in Expressions (Reporting Services)](http://msdn.microsoft.com/en-us/library/ms157274%28SQL.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:22:26.007

像 =DataSources!DataSource1.DataSourceReference 这样的表达式会返回一个字符串值，该值表示共享数据源的名称（如果适用）。如果表达式中的数据源是嵌入式数据源，则表达式返回空字符串。

# sharepoint - 站点权限中缺少 SharePoint 自定义安全组

> ID：10915789
> 
> 赞同：0
> 
> 时间：2012-06-06T14:02:09.503
> 
> 标签：sharepoint, sharepoint-2010

我编写了一段代码来在 SharePoint 应用程序中创建自定义安全组。该代码在站点级别的功能激活上运行，如下所示：

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        SPSite site = (SPSite)properties.Feature.Parent;
        using (SPWeb web = site.OpenWeb())
        { 
            if (!GroupExists(web.SiteGroups, "Test Column Administrators"))
            {
                web.SiteGroups.Add("Test Administrators", web.AssociatedOwnerGroup, null, "Contains users and groups who can administer Test Column articles.");
                web.AssociatedGroups.Add(web.SiteGroups["Tets Column Administrators"]);
                web.Update();
            }
        }
    } 
```

该代码确实创建了该组并将其添加到 SharePoint 网站，但是当我转到“站点操作”->“站点权限”（_layouts/user.aspx 页面）时，该组丢失了。但是当我手动转到 groups.aspx 页面 (_layouts/groups.aspx) 时，它就在那里。

如何让我的代码以这样的方式创建该组，使其也出现在用户/aspx 页面中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:53:14.573

那完全没问题。群组页面显示站点中实际存在的群组列表。页面 Users.aspx 显示主体在该站点中拥有的权限。您的代码没问题，但如果需要权限，您必须添加更多代码来授予您的组权限。当您的组在站点内具有权限时，它将出现在 Users.aspx 页面上。查看如何向项目添加权限的[示例，站点级别和 Web 级别也是如此。](https://stackoverflow.com/questions/4934168/how-to-give-an-spgroup-permissions-for-an-spitem)

# php - 没有登录用户使用 paginate_links() 找不到页面

> ID：10915790
> 
> 赞同：1
> 
> 时间：2012-06-06T14:02:16.883
> 
> 标签：php, wordpress

我遇到了一个非常奇怪的问题。我有一个带有自定义搜索的页面：

```
 global $query_string; 

    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

    $the_query = new WP_Query();
    $the_query->query($query_string.'&paged='.$paged.'&posts_per_page=50&post_status=any');

    while ( $the_query->have_posts() ) : $the_query->the_post(); 
```

它工作正常我看到每页有 50 个帖子。问题是，对于分页，我需要显示如下内容：

1 2 3 4 最后>>

我发现了这个有用的 wordpress 函数**paginate_links()**

但是有一个非常奇怪的错误......

这怎么可能？网址是：

```
http://www.example.com/date/2012?cat=8

http://www.example.com/date/2012/page/2?cat=8 
```

(**存档.php** )

所以，我必须登录才能看到第二个、第三个等页面，否则我只能看到第一个！

我该如何解决？谢谢

# c++ - 当我在平面上嵌入平面图时，如何找到包含预定义点的面

> ID：10915791
> 
> 赞同：2
> 
> 时间：2012-06-06T14:02:17.853
> 
> 标签：c++, algorithm, computational-geometry, graph-algorithm

我有一个嵌入在平面上的平面图（平面图）并且想要搜索它的面。该图不是连接的，而是由几个连接的图组成，这些图不能单独寻址（例如，子图可以包含在另一个图的面上）我想找到包含某个二维点的多边形（面）。多边形由图形的面形成。由于面孔的数量很大，我想避免事先确定它们。这种搜索的一般复杂性是什么，我可以使用什么 c++ 库/编码方法来完成它。

更新以澄清：我在这里指的是 xy 平面中的图表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:22:32.047

你提出了一个有趣的挑战。如果多边形碰巧总是凸的，则相对简单的解决方案是可能的，因为在这种情况下，只需询问兴趣点是否位于多边形所有边的同一侧面（无论是左侧还是右侧）。虽然我知道对于一般情况没有特别简单的解决方案，但下面的代码似乎确实适用于任何任意多边形，这间接地受到柯西著名的积分公式的启发。

无需熟悉 Cauchy 即可遵循代码，因为代码中的注释解释了该技术。

```
#include <vector>
#include <cstddef>
#include <cstdlib>
#include <cmath>
#include <iostream>

// This program takes its data from the standard input
// stream like this:
//
//      1.2  0.5
//     -0.1 -0.2
//      2.7 -0.3
//      2.5  2.9
//      0.1  2.8
//
// Given such input, the program answers whether the
// point (1.2, 0.5) does not lie within the polygon
// whose vertices, in sequence, are (-0.1, -0.2),
// (2.7, -0.3), (2.5, 2.9) and (0.1, 2.8).  Naturally,
// the program wants at least three vertices, so it
// requires the input of at least eight numbers (where
// the example has four vertices and thus ten numbers).
//
// This code lacks really robust error handling, which
// could however be added without too much trouble.
// Also, its function angle_swept() could be shortened
// at cost to readability; but this is not done here,
// since the function is already hard enough to grasp as
// it stands.
//
//

const double TWOPI = 8.0 * atan2(1.0, 1.0); // two times pi, or 360 deg

namespace {

    struct Point {
        double x;
        double y;
        Point(const double x0 = 0.0, const double y0 = 0.0)
          : x(x0), y(y0) {}
    };

    // As it happens, for the present code's purpose,
    // a Point and a Vector want exactly the same
    // members and operations; thus, make the one a
    // synonym for the other.
    typedef Point Vector;

    std::istream &operator>>(std::istream &ist, Point &point) {
        double x1, y1;
        if(ist >> x1 >> y1) point = Point(x1, y1);
        return ist;
    }

    // Calculate the vector from one point to another.
    Vector operator-(const Point &point2, const Point &point1) {
        return Vector(point2.x - point1.x, point2.y - point1.y);
    }

    // Calculate the dot product of two Vectors.
    // Overload the "*" operator for this purpose.
    double operator*(const Vector &vector1, const Vector &vector2) {
        return vector1.x*vector2.x + vector1.y*vector2.y;
    }

    // Calculate the (two-dimensional) cross product of two Vectors.
    // Overload the "%" operator for this purpose.
    double operator%(const Vector &vector1, const Vector &vector2) {
        return vector1.x*vector2.y - vector1.y*vector2.x;
    }

    // Calculate a Vector's magnitude or length.
    double abs(const Vector &vector) {
        return std::sqrt(vector.x*vector.x + vector.y*vector.y);
    }

    // Normalize a vector to unit length.
    Vector unit(const Vector &vector) {
        const double abs1 = abs(vector);
        return Vector(vector.x/abs1, vector.y/abs1);
    }

    // Imagine standing in the plane at the point of
    // interest, facing toward a vertex.  Then imagine
    // turning to face the next vertex without leaving
    // the point.  Answer this question: through what
    // angle did you just turn, measured in radians?
    double angle_swept(
        const Point &point, const Point &vertex1, const Point &vertex2
    ) {
        const Vector unit1 = unit(vertex1 - point);
        const Vector unit2 = unit(vertex2 - point);
        const double dot_product   = unit1 * unit2;
        const double cross_product = unit1 % unit2;
        // (Here we must be careful.  Either the dot
        // product or the cross product could in theory
        // be used to extract the angle but, in
        // practice, either the one or the other may be
        // numerically problematical.  Use whichever
        // delivers the better accuracy.)
        return (fabs(dot_product) <= fabs(cross_product)) ? (
            (cross_product >= 0.0) ? (
                // The angle lies between 45 and 135 degrees.
                acos(dot_product)
            ) : (
                // The angle lies between -45 and -135 degrees.
                -acos(dot_product)
            )
        ) : (
            (dot_product >= 0.0) ? (
                // The angle lies between -45 and 45 degrees.
                asin(cross_product)
            ) : (
                // The angle lies between 135 and 180 degrees
                // or between -135 and -180 degrees.
                ((cross_product >= 0.0) ? TWOPI/2.0 : -TWOPI/2.0)
                  - asin(cross_product)
            )
        );
    }

}

int main(const int, char **const argv) {

    // Read the x and y coordinates of the point of
    // interest, followed by the x and y coordinates of
    // each vertex in sequence, from std. input.
    // Observe that whether the sequence of vertices
    // runs clockwise or counterclockwise does
    // not matter.
    Point point;
    std::vector<Point> vertex;
    std::cin >> point;
    {
        Point point1;
        while (std::cin >> point1) vertex.push_back(point1);
    }
    if (vertex.size() < 3) {
        std::cerr << argv[0]
          << ": a polygon wants at least three vertices\n";
        std::exit(1);
    }

    // Standing as it were at the point of interest,
    // turn to face each vertex in sequence.  Keep
    // track of the total angle through which you
    // have turned.
    double cumulative_angle_swept = 0.0;
    for (size_t i = 0; i < vertex.size(); ++i) {
        // In an N-sided polygon, vertex N is again
        // vertex 0\.  Since j==N is out of range,
        // if i==N-1, then let j=0\.  Otherwise,
        // let j=i+1.
        const size_t j = (i+1) % vertex.size();
        cumulative_angle_swept +=
          angle_swept(point, vertex[i], vertex[j]);
    }

    // Judge the point of interest to lie within the
    // polygon if you have turned a complete circuit.
    const bool does_the_point_lie_within_the_polygon =
      fabs(cumulative_angle_swept) >= TWOPI/2.0;

    // Output.
    std::cout
      << "The angle swept by the polygon's vertices about the point\n"
      << "of interest is " << cumulative_angle_swept << " radians ("
      << ((360.0/TWOPI)*cumulative_angle_swept) << " degrees).\n"
      << "Therefore, the point lies "
      << (
        does_the_point_lie_within_the_polygon
          ? "within" : "outside of"
      )
      << " the polygon.\n";

    return !does_the_point_lie_within_the_polygon;

} 
```

当然，上面的代码只是我写的，因为你的挑战很有趣，我想看看我能不能满足它。如果您的应用程序很重要，那么您应该测试和审查代码，并请在此处修改您发现的任何错误。我已经针对两个或三个案例测试了代码，它似乎可以工作，但是对于重要的任务，它需要更详尽的测试。

祝你的申请好运。

# android - layout.xml 中的自定义RelativeLayouts

> ID：10915795
> 
> 赞同：1
> 
> 时间：2012-06-06T14:02:22.513
> 
> 标签：android, android-relativelayout

我有一个自定义的RelativeLayout `remote_image_view.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <ImageView
            android:id="@+id/image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/placeholder"
        />
</RelativeLayout> 
```

好的，现在我想将它包含在`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical" android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <Button android:text="Start Download" android:id="@+id/button1"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:onClick="onClick" />
    <Button android:text="View Downloads" android:id="@+id/button2"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:onClick="showDownload" />
    <ScrollView
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        >
        <LinearLayout
                android:id="@+id/lay"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:orientation="vertical"
                >
            <include layout="@layout/remote_image_view" android:id="@+id/imageView1" />
            <include layout="@layout/remote_image_view" android:id="@+id/imageView2"/>
            <include layout="@layout/remote_image_view" android:id="@+id/imageView3"/>
            <include layout="@layout/remote_image_view" android:id="@+id/imageView4"/>
            <include layout="@layout/remote_image_view" android:id="@+id/imageView5"/>
            <include layout="@layout/remote_image_view" android:id="@+id/imageView6"/>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

那挺好的。所以我创建了一个类`RemoteImage`：

```
public class RemoteImageView extends RelativeLayout {

    public RemoteImageView(Context context) {
        super(context);
    }

    public void init(RelativeLayout.LayoutParams layoutParams) {
        LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.remote_image_view, this);
        setLayoutParams(layoutParams);
    }
} 
```

出现了一个疯狂的问题。我无法编写如下代码：

```
RemoteImageView rm1 = (RemoteImageView)findViewById(R.id.imageView1); 
```

因为我会得到例外：

```
java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to com.dmact.remoteimage.RemoteImageView 
```

所以我应该动态创建一个实例，`RemoteImageView`然后`LayoutParams`对其应用一些。有没有办法不这样做？我想在 XML 中而不是在代码中进行布局。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:06:49.503

如果您需要使用 RemoteImageView 类对 RelativeLayout 进行子类化，您还必须在 XML 文件中指定您的类

前任

```
<?xml version="1.0" encoding="utf-8"?>
<com.yourpackagepath.RemoteImageView
              xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <ImageView
            android:id="@+id/image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/placeholder"
        />
</com.yourpackagepath.RemoteImageView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:07:25.430

给出你的java文件的完整路径而不是RelativeLayout

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content">
    <ImageView
            android:id="@+id/image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/placeholder"
        />
</RelativeLayout> 
```

像

```
<com....RemoteImageView  xmlns:android="http://schemas.android.com/apk/res/android"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content">
        <ImageView
                android:id="@+id/image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/placeholder"
            />
    </com....RemoteImageView> 
```

# playframework - 玩2.0，流式模板结果？

> ID：10915796
> 
> 赞同：2
> 
> 时间：2012-06-06T14:02:26.777
> 
> 标签：playframework, playframework-2.0

当使用模板生成响应时，会计算模板然后发送结果。

在构建响应时是否可以流式传输模板的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T21:58:33.987

流式传输通过部分发送结果来工作，因此您的模板应该只构建响应的一部分。

我假设您有一个`Enumerator[Part]`where`Part`是对结果部分进行建模的类型。例如，您可以从 Web 服务调用或数据库查询构建此枚举器。

然后您需要将这些响应部分转换为 html 部分。您可以使用`Enumeratee[Part, Html]`.

最后，使用`feed`您的 HTTP 结果的方法并将其传递给您的枚举器和您的枚举器。

这是一个（未经测试的）示例，说明了上述解释：

```
def stream = Action { implicit request =>
  val stream: Enumerator[Part] = …
  val toHtml = Enumeratee.map[Part] { part =>
    views.html.part(part)
  }
  Ok.feed(stream &> toHtml)
} 
```

# c# - 使用 FTP 客户端下载的大文件服务崩溃

> ID：10915799
> 
> 赞同：1
> 
> 时间：2012-06-06T14:02:28.753
> 
> 标签：c#, windows-services, ftp, bytearray

我正在使用以下代码使用 Windows 服务从 FTP 主机获取数据。

我们在打电话

下载文件("movie.mpg","c:\movies\")

```
 /// <summary>
    /// This method downloads the given file name from the FTP server
    /// and returns a byte array containing its contents.
    /// </summary>
    public byte[] DownloadData(string path, ThrottledStream.ThrottleLevel downloadLevel)
    {
        // Get the object used to communicate with the server.
        WebClient request = new WebClient();

        // Logon to the server using username + password
        request.Credentials = new NetworkCredential(Username, Password);

        Stream strm = request.OpenRead(BuildServerUri(path));
        Stream destinationStream = new ThrottledStream(strm, downloadLevel);
        byte[] buffer = new byte[BufferSize];
        int readCount = strm.Read(buffer, 0, BufferSize);

        while (readCount > 0)
        {
            destinationStream.Write(buffer, 0, readCount);
            readCount = strm.Read(buffer, 0, BufferSize);
        }

        return buffer;
    }

    /// <summary>
    /// This method downloads the given file name from the FTP server
    /// and returns a byte array containing its contents.
    /// Throws a WebException on encountering a network error.
    /// Full process is throttled to 50 kb/s (51200 b/s)
    /// </summary>
    public byte[] DownloadData(string path)
    {
        // Get the object used to communicate with the server.
        WebClient request = new WebClient();

        // Logon to the server using username + password
        request.Credentials = new NetworkCredential(Username, Password);

        return request.DownloadData(BuildServerUri(path));
    }

    /// <summary>
    /// This method downloads the FTP file specified by "ftppath" and saves
    /// it to "destfile".
    /// Throws a WebException on encountering a network error.
    /// </summary>
    public void DownloadFile(string ftppath, string destfile)
    {
        // Download the data

        byte[] Data = DownloadData(ftppath);

        // Save the data to disk
        if(!System.IO.Directory.Exists(Path.GetDirectoryName(destfile)))
        {
            System.IO.Directory.CreateDirectory(Path.GetDirectoryName(destfile));
        }
        FileStream fs = new FileStream(destfile, FileMode.Create);
        fs.Write(Data, 0, Data.Length);
        fs.Close();
    } 
```

当我达到大约 500mb 时，我的软件不断崩溃，我假设它是当 PC 的字节数组/内存耗尽时（它只有 1gb）。任何人都知道我可以将数据作为临时文件直接写入磁盘而不存储在字节数组中的方法。下载完成后，基本上将临时文件移动到新位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:07:14.233

you can write directly to the stream something like the below:

```
using (Stream stream = request.GetRequestStream())
{
    stream.Write(file.Data, 0, file.Data.Length);
} 
```

# c# - 捕获 AccessViolationException

> ID：10915806
> 
> 赞同：0
> 
> 时间：2012-06-06T14:02:50.283
> 
> 标签：c#, c#-4.0, access-violation

每次库打开某个文件时，第三方库都会导致 AccessViolationException。我正在尝试遍历数千个文件，因此捕获异常，将项目添加到不打开的文件列表中并继续会很有用。但是，异常不会被 catch(Exception e) 块捕获，也不会被特定的 catch(AccessViolationException ave) 块捕获。

在对另一个[问题](https://stackoverflow.com/questions/3312003/is-it-possible-to-catch-an-access-violation-exception-in-net)的评论中，John Saunders 建议可以捕获 AccessViolationException，但不应该这样做。

程序员要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-07T11:44:17.740

您可能不想捕获一个`AccessViolationException`，唯一的原因是您不能保证异常没有破坏您的应用程序的状态。

默认情况下，由于上述原因，执行不会到达 catch 块。如果你明确地想要处理进程破坏异常，你需要用[`HandleProcessCorruptedStateExceptions`](http://msdn.microsoft.com/en-us/library/system.runtime.exceptionservices.handleprocesscorruptedstateexceptionsattribute(v=vs.110).aspx)属性来装饰你的类。

# jdbc - JDBC 连接接口对象

> ID：10915808
> 
> 赞同：0
> 
> 时间：2012-06-06T14:02:52.773
> 
> 标签：jdbc

在 java.sql 包中，我们有 Connection 接口来建立与数据库的连接。

在 DirverManager 类的帮助下，我们可以得到 Connection 接口的对象。前任。

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

Connection con=DriverManager.getConnection("jdbc:odbc:DNS"); 
```

但是我有一些困惑——如果 Connection 是一个接口，那么我们如何获取 Connection 接口的对象呢？

请清除这种混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:13:15.683

我们不能为任何接口创建任何对象。但是可以将实现该接口的类对象分配给该接口的引用变量。这里*con*是该接口的引用变量，*DriverManager.getConnection()*返回一个实现*Connection*接口的类对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-29T19:29:22.930

Oracle 的`T4CConnection`类实现了`Connection`接口，Mysql 的`JDBC4Connection`类也实现了`Connection`接口。

这意味着如果您加载 Oracle 驱动程序，则`con`下面行中的引用变量包含一个类obj，如果您加载 mysql 驱动程序，则包含一个类 obj。`T4CConnection``JDBC4Connection`

`Connection con=DriverManager.getConnection("jdbc:odbc:DNS");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T15:51:14.223

在 J2EE 中，我们使用接口而不是类进行编码，因为从供应商到供应商和驱动程序以驱动类名称更改。要获取实现类名称，请使用 getClass()。

# delphi - Delphi XE2 使用哪个工具栏作为项目管理器？

> ID：10915809
> 
> 赞同：4
> 
> 时间：2012-06-06T14:02:58.163
> 
> 标签：delphi, delphi-xe2, toolbar

在我自己的项目中，我想使用与 Delphi XE2 IDE 用于项目管理器的相同类型的工具栏：带有图标和为每个图标显示标题的选项。我不需要拖动/停靠功能。Delphi XE2 中是否有一个标准组件可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T14:05:07.163

项目经理使用[TToolbar](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TToolBar)。

![在此处输入图像描述](../Images/97d6c59af92f039fd076924739b33410.png)

# javascript - jsf.ajax.request 没有完全工作

> ID：10915814
> 
> 赞同：1
> 
> 时间：2012-06-06T14:03:40.173
> 
> 标签：javascript, jsf

我正在尝试制作一个自定义的自动完成框，但我遇到了一些麻烦。现在我有一个在 keydown 上调用这个函数的输入

```
 function pingAutoComplete(event)
 {
    console.log("pingAutoComlete Called");
    window.clearTimeout(window.keyTimeout);

     //Wait 2 seconds before we attempt to pingAutoComplete incase user has not finished typing
      window.keyTimeout = setTimeout(function() {
       jsf.ajax.request(event, "keydown", {execute:'searchTerm',render:'autoCompletePanel'})
       autoCompleteLayoutPanel.show();
       return false;
    }, 2000);
    return false;

 } 
```

自动完成面板包含一堆看起来像这样的选择

```
<h:selectOneListbox id="vehicleResult" title="Vehicles"
    value="#{searchBean.searchTerm}"
    converter="entityConverter"
    required="false"
    rendered="#{!searchBean.filterAutoComplete().isEmpty()}">

    <f:selectItems value="#{searchBean.filterAutoComplete()}"
        var="searchItem" itemValue="#{searchItem}"
        itemLabel="#{searchItem.displayString}"
        itemLabelEscaped="true" />
</h:selectOneListbox> 
```

现在，当调用 javascript 时，它似乎在后端点击 searchBean.filterAutoComplete()，但实际上并没有更新 gui 中的选择列表。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:31:21.707

您必须指定准确的客户端 ID。那是`id`生成的 HTML 元素的属性值，而不是 JSF 组件本身的值。如果 JSF 组件放置在 中`<h:form>`，则默认情况下客户端 ID 将附加其 ID。

因此下面的面板组

```
<h:form id="form">
    <h:panelGroup id="autoCompletePanel"> 
```

将有一个客户端 ID `form:autoCompletePanel`。您需要在`render`属性中准确指定该 ID。顺便说一句，同样的规则也适用`execute`。

# javascript - 如何滚动到新添加的 dom 元素？

> ID：10915816
> 
> 赞同：3
> 
> 时间：2012-06-06T14:03:45.447
> 
> 标签：javascript, jquery

假设用户正在查看页面的特定部分，当幕后运行自动更新功能时，在用户屏幕的正上方或正下方添加了更多内容。

我有新添加内容的 div 的 id。

如何使用 jquery 或纯 javascript 将用户平滑滚动到新添加的 div？必须在所有主流浏览器中工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:06:09.283

这是我用于 jQuery 的内容

```
$('html,body').animate({scrollTop: jQuery("#ID").offset().top},'slow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:07:09.877

我认为，这应该工作......与jquery。

```
$(window).scroll($('#newly-added-elem').offset().top); 
```

**更新**：可以通过以下方式实现平滑滚动：

```
$('body').animate({scrollTop: $('#newly-added-elem').offset().top},'slow'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-06T14:06:24.417

使用锚：

```
<a name="newelement">.... new element stuff here ...</a> 
```

然后将页面的 URL 更改为指向该新元素：

```
http://example.com/yourpage.html#newelement 
```

# velocity - 解析包含速度公式的变量

> ID：10915823
> 
> 赞同：0
> 
> 时间：2012-06-06T14:04:15.027
> 
> 标签：velocity

我有个问题。我需要解析一个包含速度公式的变量，例如

```
set($test = $tests.get("test1"))
$test 
```

while`$tests.get("test1")`返回一个速度公式，它不起作用。

我尝试使用`parse`，但它是用于文件的，我`$tests.get("test1")`从 db 中检索它，但无法将其保存到文件中。我也尝试使用`#evaluate`，但它没有做任何事情。

这是我的html：

```
// test now contains a velocity formula
#set($test = $sections.get("test"))  
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
#evaluate($test)
</html> 
```

# android - Cocoa 异步套接字 java 实现

> ID：10915825
> 
> 赞同：1
> 
> 时间：2012-06-06T14:04:16.743
> 
> 标签：android, ios, sockets, asynchronous, cocoaasyncsocket

在一个 iPhone 项目中，我正在使用我在[这里](http://code.google.com/p/cocoaasyncsocket/)找到的 AsyncUdpSocket 和 AsyncSocket 。

你知道Android是否有类似的东西？

我试图在谷歌上搜索这些类的 java 版本，但我没有找到任何。顺便说一句，我搜索了这个“AsyncUdpSocket.java”。

我还发现了一些关于[NIO](http://en.wikipedia.org/wiki/New_I/O)库的信息，但我不知道我是否可以在 Android 上使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:18:56.173

我对 Java 不是很熟悉，但是由于 AsyncSocket 只是 Apple 的套接字 API 的更高级别的版本，所以您需要做的就是在 Java 中创建一个套接字并接收数据。没有“技巧”，数据不会出现在“objective-c”中，因此很容易处理（我创建了一个 Objc-> Python 并且数据是相同的）。关于创建 Java 套接字的继承人 oracle：http: [//docs.oracle.com/javase/tutorial/networking/sockets/index.html](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

# c# - 编译时如何重载，运行时如何重载？

> ID：10915828
> 
> 赞同：26
> 
> 时间：2012-06-06T14:04:27.733
> 
> 标签：c#, .net, oop

乡亲

我遇到了许多线程来理解多态性（编译时和运行时）。我很惊讶地看到程序员声称重载是运行时而覆盖是编译时的一些链接。

我想从这里知道的是：

1.  带有实时示例和小代码的运行时多态性以及我们应该使用什么场景。
2.  编译时多态性与实时示例和小代码以及何时使用。

因为我阅读了很多理论定义，但我对理解并不满意。

另外，我想到了，我也觉得，重载应该是运行时的，因为，假设我有一个计算面积的方法，在运行时它只根据我传递的参数决定调用哪个重载方法（假设我只传递一个参数，它应该触发 Square，如果参数是 2，它应该触发 Rectangle)....所以我不能声明它的运行时间吗？它的编译时间如何？（理论上大多数人说，重载是编译时间，但他们甚至没有给出正确的实时示例......很少有人声称它的运行时间）......

另外，我觉得最重要的是编译时间，因为当你编写代码和编译时，你确保你使用了 virtual 关键字并在派生类中覆盖了该方法，否则会给你编译时间错误。所以我感觉到它的编译时间，就像我在线程中看到的那样......但是大多数线程声称它的运行时：D

我很困惑 :( 这个问题是我的问题 1 和 2 的补充。请提供一个实时示例.. 因为我已经知道理论定义.. :(

谢谢....

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-06T14:17:41.770

在重载的情况下，您使用的是静态（编译时）多态性，因为编译器确切地知道您正在调用哪个方法。例如：

```
public static class test
{
    static void Main(string[] args)
    {
        Foo();
        Foo("test");
    }

    public static void Foo()
    {
        Console.WriteLine("No message supplied");
    }

    public static void Foo(string message)
    {
        Console.WriteLine(message);
    }
} 
```

在这种情况下，编译器根据参数的数量/类型准确地知道我们正在调用哪个 Foo() 方法。

覆盖是动态（运行时）多态性的一个例子。这是因为编译器不一定知道在编译时传入的是什么类型的对象。假设您在库中有以下类：

```
public static class MessagePrinter
{
    public static void PrintMessage(IMessage message)
    {
        Console.WriteLine(message.GetMessage());
    }
}

public interface IMessage
{
    public string GetMessage();
}

public class XMLMessage : IMessage
{
    public string GetMessage()
    {
        return "This is an XML Message";
    }
}

public class SOAPMessage : IMessage
{
    public string GetMessage()
    {
        return "This is a SOAP Message";
    }
} 
```

在编译时，您不知道该函数的调用者是否传递了 XMLMessage、SOAPMessage 或可能在其他地方定义的另一种类型的 IMessage。当调用 PrintMessage() 函数时，它会根据传入的 IMessage 类型确定在运行时使用哪个版本的 GetMessage()。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-06T14:06:52.897

阅读：[多态性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173152.aspx)

类似的答案：[编译时和运行时多态性](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/097af2f7-d99f-4280-ab22-24348f782d23)

好吧，有两种类型的多态性，如下所述：

*   静态多态性（早期绑定）
*   动态多态性（后期绑定）

**静态多态性（早期绑定）：**

静态多态性也称为早期绑定和编译时多态性。方法重载和运算符重载是相同的示例。

它被称为早期绑定，因为编译器知道具有相同名称的函数，并且在编译时也知道要调用哪个重载函数。

例如：

```
public class Test
{
    public Test()
    {

    }

    public int add(int no1, int no2)
    {

    }

    public int add(int no1, int no2, int no3)

    {

    }
}

class Program
{
    static void Main(string[] args)
    {
        Test tst = new Test();
        int sum = tst.add(10, 20);

        // here in above statement compiler is aware at compile time that need to call function add(int no1, int no2), hence it is called early binding and it is fixed so called static binding.
    }
} 
```

**动态多态性（后期绑定）：**

```
public class Animal
{
    public virtual void MakeSound()
    {
        Console.WriteLine("Animal sound");
    }
}

public class Dog:Animal
{
    public override void MakeSound()
    {
        Console.WriteLine("Dog sound");
    }
}

class Program
{
    static void Main(string[] args)
    {
        Animal an = new Dog();
        an.MakeSound();           
        Console.ReadLine();
    }
} 
```

和上面的代码一样，任何其他对虚拟方法的调用，都会被编译成一个 callvirt IL 指令。这意味着被调用的实际方法是在运行时确定的（除非 JIT 可以优化某些特殊情况），但是编译器检查了该方法是否存在，它选择了最合适的重载（如果有的话）并且它有保证函数指针将存在于该类型的 vtable 中明确定义的位置（即使这是一个实现细节）。解决虚拟调用的过程非常快（您只需要取消引用几个指针），因此没有太大区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T10:33:17.767

```
public class Animal {
    public virtual void MakeSound()
    {
        Console.WriteLine("Animal sound");
    } }

public class Dog:Animal {
    public override void MakeSound()
    {
        Console.WriteLine("Dog sound");
    } }

class Program {
    static void Main(string[] args)
    {
        Animal an = new Dog();
        an.MakeSound();           
        Console.ReadLine();
    } } 
```

这是动态多态性，因为在运行时决定哪个版本的 MakeSound 将被调用父或子，因为子可能不会覆盖父函数或可能会覆盖它，但这一切都是在运行时决定的，哪个版本叫做 ....

# php - Zend Framework 服务器要求

> ID：10915832
> 
> 赞同：0
> 
> 时间：2012-06-06T14:04:40.827
> 
> 标签：php, zend-framework

我的问题很简单。假设我在 Windows 环境中的本地机器上安装了 Zend Framework。我需要什么才能让我的网站在 Unix/Linux 服务器上运行？它只能通过直接上传站点文件和数据库来工作吗？我需要SSH访问或类似的东西吗？

我只是想知道我们必须做些什么才能让 Zend 框架站点在 Linux 服务器上启动并运行。官方 zend 站点文档上的文档似乎还不够。

任何帮助将不胜感激。顺便说一句，我是 Zend 框架的新手。所以请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:14:18.437

你可以上传你的项目。不需要 SSH。您可能必须更改配置，以便您的数据库凭据与服务器的凭据匹配。如果有其他问题，例如无法找到的文件，您将收到错误通知，并相应地调整您的包含路径。你很可能不会面对太多的惊喜！

# ruby-on-rails - 如何在我的 ruby on rails 应用程序中实现喜欢/+1 类型的功能？

> ID：10915834
> 
> 赞同：1
> 
> 时间：2012-06-06T14:04:55.510
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我即将为我正在处理的个人项目添加 +1/likes 功能。我想知道为此的数据库设计可能是什么样子。我不想有几个类似的表格，而是一个类似的表格来处理整个网站的所有喜欢。我希望能够在网站的不同部分创建或随意“插入”它们。

例如

微博 - 用户应该能够“喜欢”微博

照片 - 用户应该能够“喜欢”照片

假设我创建了一个游戏部分并希望用户能够喜欢游戏我希望能够使用现有的点赞表，而不是为游戏创建点赞表。

在我的脑海里，我在想acts_as_tree 插件会非常有用，但是在一个like 表中保存东西会在一段时间后变得凌乱吗？

如何以最明智的可扩展方式将点赞功能添加到我的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:12:52.673

看看[多态关联](http://railscasts.com/episodes/154-polymorphic-association)。
提供的链接中的示例讨论了评论，但我认为你想要同样的东西，喜欢。

```
class Like < ActiveRecord::Base
  belongs_to :likable, polymorphic: true
end

class Micropost < ActiveRecord::Base
  has_many :likes, as: :likable
end

class Post < ActiveRecord::Base
  has_many :likes, as: :likable
end 
```

在这里，你的 Post 和 Micropost 类都可以有赞。您可以将一些添加到您想要的任何课程中。

您甚至可以`Like.all`使用`like.likable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:17:23.560

你应该有一个“喜欢”模型或其他东西，至少有这个关联：belongs_to :user belongs_to :liked_object, :polymorphic => true

现在你可以做

```
Like.create :liked_object => micropost, :user => current_user 
```

并且在未来

```
Like.create :liked_object => game, :user => current_user 
```

搜索多态关联（迁移时可能需要 like_object_type 和 like_object_id）

# ios - 故事板实用程序

> ID：10915840
> 
> 赞同：0
> 
> 时间：2012-06-06T14:05:03.917
> 
> 标签：ios, login

我有一个情节提要实用程序应用程序，需要先登录才能显示任何内容。在应用程序成功登录之前，如何使登录表单出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:32:41.243

实用程序应用程序以“主视图控制器”开始，并带有“反面视图控制器”的模态序列。在您的应用中，听起来您需要以下内容：

*   “主视图控制器”是一个占位符，不显示任何内容
*   “主视图控制器”有两个 segue，一个用于您的内容，一个用于登录表单
*   当您的应用程序启动时，情节提要从（空）“主视图控制器”开始
*   您的应用程序立即以编程方式连接到您的内容或登录

# php - 获取数组中的第一个元素作为具有相应键的数组

> ID：10915842
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:05:05.113
> 
> 标签：php, arrays

获取数组中的第一个元素作为具有相应键的数组

例如，

一个

```
Array
(
    [Actor] => 1
    [Producer] => 1
    [Director] => 2
) 
```

我想用对应的键获取第一个元素

```
Array
(
    [Actor] => 1
) 
```

不使用一些数组函数循环怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:07:47.083

[`array_slice($arr,0,1)`](http://php.net/array-slice), [`array_splice($arr,0,1);`](http://php.net/array-splice), 或者[`list($key,$value)=each($arr)`](http://php.net/each)你可能有兴趣解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:07:45.443

或者，使用`list()`and`each()`来获取第一个元素：

```
list($key, $val) = each($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:09:33.047

像这样的东西：

```
$array = ('actor' => 1, 'producer' => 1, 'director' => 2);
$firstKey = key($array);
$newArray = array();
$newArray[$firstKey] = $array[$firstKey];
var_dump($newArray); 
```

# java - Xuggler MediaWriter Operation Not Permitted Issue

> ID：10915847
> 
> 赞同：5
> 
> 时间：2012-06-06T14:05:24.433
> 
> 标签：java, xuggler

I keep getting an exception when I close an IMediaWriter doing a simple transcode. The exception is "java.lang.RuntimeException: error Operation not permitted, failed to write trailer to test.mp3" I get this whenever I call IMediaWriter.close(),Any ideas why I would be getting this for a simple transcoding? Here's the sample code:

```
IMediaReader reader = null; 
    IMediaWriter writer = null; 
    try { 
        reader = ToolFactory.makeReader("test.wav"); 
        writer = ToolFactory.makeWriter("test.mp3", reader); 
        reader.addListener(writer); 
        while (reader.readPacket() == null) ; 
        reader.close(); 
        writer.close(); 
    } catch (Exception ex) { 
        ex.printStackTrace(); 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T13:41:21.350

这肯定会奏效，因为我面临同样的问题。谢谢你。如果您需要更多说明，请询问...

```
IMediaReader reader = null; 
    IMediaWriter writer = null; 
    try { 
        reader = ToolFactory.makeReader("sijo.mp4"); 
        writer = ToolFactory.makeWriter("Thomas.flv", reader); 
        reader.addListener(writer); 
        while (reader.readPacket() == null) ; 
        //Should IMediaReader automatically call close(), only if ERROR_EOF (End of File) is returned from readPacket().
        reader.setCloseOnEofOnly(false); 
        //If false the media data will be left in the order in which it is presented to the IMediaWriter.
        //If true IMediaWriter will buffer media data in time stamp order, and only write out data when it has at least one same time or later packet from all streams.
        writer.setForceInterleave(false);
        System.out.println("closed...");
    } catch (Exception ex) { 
        ex.printStackTrace(); 
    } 
```

# objective-c - How to control CAKeyframeAnimation with touch gesture?

> ID：10915849
> 
> 赞同：6
> 
> 时间：2012-06-06T14:05:26.383
> 
> 标签：objective-c, cocoa-touch, path, core-animation, caemitterlayer

I have a `CAEmitterLayer` animated along a bezier path (closed form, like an '8', out of four control points) with a `CAKeyframeAnimation`. Now I want to control the animation by a slide of a touch-finger along (but not necessarily on) the path. How is this possible and is this even possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:45:37.867

创建一个`CGpoint click;`变量来记住您的初始“拖动”点，然后创建一个本地`NSEvent`处理程序......

```
[NSEvent addLocalMonitorForEventsMatchingMask: NSMouseMovedMask
                                             | NSLeftMouseDownMask 
                                      handler:^(NSEvent *e) {
    if ( e.type == NSLeftMouseDown ) click = e.locationInWindow;
    else "yourDelta" = click - e.locationInWindow;  // pseudoCode 
    return e;
}]; 
```

“yourDelta”是该初始点与当前位置的偏移量...您还可以通过监视`NSEventScrollWheelMask`...并查看`e.deltaX`and`e.deltaY`值来通过滚动事件获得类似的结果。

编辑：我对iOS上的事件处理不太熟悉。但同样的技术可以应用于普通的事件处理程序......即。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent*)e {
    click = [e locationInView:_yourView];       
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent*)e {
    "yourDelta" = click - [e locationInView:_yourView];  // pseudoCode 
} 
```

至于“寻找”你的动画。一种可能的方法是简单地`[layer addAnimation:theNewAnimation]`使用你以前`toValue`的 's，而不是基于`fromValue`0 的's，或者你的模型`layer`......改用你的`layer.presentationLayer`值？没有看到你的全部内容很难说`CAKeyframeAnimation`。

# c# - 如何自动打开 IEnumerable 成csv文件？

> ID：10915852
> 
> 赞同：9
> 
> 时间：2012-06-06T14:05:36.210
> 
> 标签：c#, asp.net

我正在尝试创建一个接受任何通用列表的用户控件，以便我可以遍历它并创建一个 CSV 导出。是否可以公开可以接受任何类型的公共属性？（即`List<Product>`,`List<Customer>`等）如果是，如何？

```
public IEnumerable<T> AnyList { get; set; } 
```

就我所拥有的实用方法而言，这是我所拥有的：

```
public static byte[] ToCsv<T>(string separator, IEnumerable<T> objectlist)
{
    //Type t = typeof(T); Deleted this line.

    //Here's the line of code updated.
    PropertyInfo[] propertyNames = objectlist.First().GetType().GetProperties();

    string header = String.Join(separator, propertyNames.Select(f => f.Name).ToArray());

    StringBuilder csvdata = new StringBuilder();
    csvdata.AppendLine(header);

    foreach (var o in objectlist)
        csvdata.AppendLine(ToCsvFields(separator, propertyNames, o));

    return Encoding.ASCII.GetBytes(csvdata.ToString());
}

public static string ToCsvFields(string separator, PropertyInfo[] fields, object o)
{
    StringBuilder linie = new StringBuilder();

    foreach (var f in fields)
    {
        if (linie.Length > 0)
            linie.Append(separator);

        var x = f.GetValue(o, null);

        if (x != null)
            linie.Append(x.ToString());
    }

    return linie.ToString();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-06T14:34:28.577

As you want to "Create a CSV export" from a list of objects, you should be using reflection to work out the columns.

## Latest update 12 Feb 2016:

It makes more sense to have the delimiter default to a comma, and useful to make the output of an initial header row optional. It also now supports both *fields* and *simple properties* by use of `Concat`:

```
public static IEnumerable<string> ToCsv<T>(IEnumerable<T> objectlist, string separator = ",", bool header = true)
{
    FieldInfo[] fields = typeof(T).GetFields();
    PropertyInfo[] properties = typeof(T).GetProperties();
    if (header)
    {
        yield return String.Join(separator, fields.Select(f => f.Name).Concat(properties.Select(p=>p.Name)).ToArray());
    }
    foreach (var o in objectlist)
    {
        yield return string.Join(separator, fields.Select(f=>(f.GetValue(o) ?? "").ToString())
            .Concat(properties.Select(p=>(p.GetValue(o,null) ?? "").ToString())).ToArray());
    }
} 
```

**so you then use it like this for comma delimited:**

```
foreach (var line in ToCsv(objects))
{
    Console.WriteLine(line);
} 
```

**or like this for another delimiter (e.g. TAB):**

```
foreach (var line in ToCsv(objects, "\t"))
{
    Console.WriteLine(line);
} 
```

## Practical examples

**write list to a comma-delimited CSV file**

```
using (TextWriter tw = File.CreateText("C:\testoutput.csv"))
{
    foreach (var line in ToCsv(objects))
    {
        tw.WriteLine(line);
    }
} 
```

**or write it tab-delimited**

```
using (TextWriter tw = File.CreateText("C:\testoutput.txt"))
{
    foreach (var line in ToCsv(objects, "\t"))
    {
        tw.WriteLine(line);
    }
} 
```

*If you have complex fields/properties you will need to filter them out of the select clauses.*

* * *

# Previous updates

## Final thoughts *first* (so it is not missed):

**If you prefer a generic solution (this ensures the objects are of the same type):**

```
public static IEnumerable<string> ToCsv<T>(string separator, IEnumerable<T> objectlist)
{
    FieldInfo[] fields = typeof(T).GetFields();
    PropertyInfo[] properties = typeof(T).GetProperties();
    yield return String.Join(separator, fields.Select(f => f.Name).Union(properties.Select(p=>p.Name)).ToArray());
    foreach (var o in objectlist)
    {
        yield return string.Join(separator, fields.Select(f=>(f.GetValue(o) ?? "").ToString())
            .Union(properties.Select(p=>(p.GetValue(o,null) ?? "").ToString())).ToArray());
    }
} 
```

This one includes both public fields and public properties.

**In general with reflection you do not need to know the type of objects in the list (you just must assume they are all the same type).**

You could just use:

```
public IEnumerable<object> AnyList { get; set; } 
```

The basic process for what you want to do goes something like:

*   Obtain the type from the first object in the list (e.g. `GetType()`).
*   Iterate the properties of that type.
*   Write out the CSV header, e.g. based on the names of the property (or an attribute).
*   For each item in the list...
    *   Iterate the properties of that type
    *   Get the value for each property (as an object)
    *   Write out the ToString() version of the object with delimiters

You can use the same algorithm to generate a 2D array (i.e. if you want the control to display something like CSV in tabular/grid form).

The only issue you than have may be converting from IEnumerables/lists of specific types to an IEnumerable. In these instances just use `.Cast<object>` on your specific typed enumerable.

## Update:

As you are using code from [http://www.joe-stevens.com/2009/08/03/generate-a-csv-from-a-generic-list-of-objects-using-reflection-and-extension-methods/](http://www.joe-stevens.com/2009/08/03/generate-a-csv-from-a-generic-list-of-objects-using-reflection-and-extension-methods/)

You need to make the following change to his code:

```
// Make it a simple extension method for a list of object
public static string GetCSV(this List<object> list)
{
    StringBuilder sb = new StringBuilder();

    //Get the properties from the first object in the list for the headers
    PropertyInfo[] propInfos = list.First().GetType().GetProperties(); 
```

If you want to support an empty list, add second parameter (e.g. `Type type`) which is the type of object *you expected* and use that instead of list.First().GetType().

*note: I don't see anywhere else in his code where T is referenced, but if I missed it the compiler will find it for you :)*

## Update (complete & simplified CSV generator):

```
public static IEnumerable<string> ToCsv(string separator, IEnumerable<object> objectlist)
{
    if (objectlist.Any())
    {
        Type type = objectlist.First().GetType();
        FieldInfo[] fields = type.GetFields();
        yield return String.Join(separator, fields.Select(f => f.Name).ToArray());
        foreach (var o in objectlist)
        {
            yield return string.Join(separator, fields.Select(f=>(f.GetValue(o) ?? "").ToString()).ToArray());
        }
    }
} 
```

This has the benefit of a low memory overhead as it yields results as they occur, rather than create a massive string. You can use it like:

```
foreach (var line in ToCsv(",", objects))
{
    Console.WriteLine(line);
} 
```

*I prefer the generic solution in practice so have placed that first.*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:14:07.463

你必须做这样的事情：

```
public class MyUserControl<T> : UserControl
{
    public IEnumerable<T> AnyList { get; set; }
} 
```

从 C# 的角度来看，这非常好。但是，如果您希望能够在 ASPX 标记中声明您的用户控件，则用户控件不能包含类级别的类型参数。这是*不可能*的：

```
<controls:MyUserControl<Customer> runat="server" ID="Foo" /> 
```

现在，如果您的用户控件将只在代码隐藏中创建，而不是在标记中，那么这很好：

```
this.SomePlaceHolder.Controls.Add(new MyUserControl<Customer>()); 
```

If you need / want the ability to declare your user control in ASPX markup, the best you could do is create an `IEnumerable<object>` property.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:17:58.603

I found a nice solution from [here](http://www.hanselman.com/blog/?date=2010-02-04)

```
public static class LinqToCSV
{
    public static string ToCsv<T>(this IEnumerable<T> items)
        where T : class
    {
        var csvBuilder = new StringBuilder();
        var properties = typeof(T).GetProperties();
        foreach (T item in items)
        {
            string line = string.Join(",",properties.Select(p => p.GetValue(item, null).ToCsvValue()).ToArray());
            csvBuilder.AppendLine(line);
        }
        return csvBuilder.ToString();
    }

    private static string ToCsvValue<T>(this T item)
    {
        if(item == null) return "\"\"";

        if (item is string)
        {
            return string.Format("\"{0}\"", item.ToString().Replace("\"", "\\\""));
        }
        double dummy;
        if (double.TryParse(item.ToString(), out dummy))
        {
            return string.Format("{0}", item);
        }
        return string.Format("\"{0}\"", item);
    }
} 
```

Apparently it handles commas and double quotes. I'm gonna use it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:10:30.850

要具有泛型属性，该类也必须是泛型的：

```
public class MyClass<T>
{
   public IEnumerable<T> AnyList { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T14:29:24.663

Since `IEnumerable` is a base class of `IEnumerable<T>`, any properly written `IEnumerable<T>` class could be passed to a property of type `IEnumerable`. Since it sounds like you are only interested in the "ToString() part", and not the "T part", `IEnumerable` should work just fine.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-17T18:39:16.040

This is working for me.

```
using System.Reflection;
using System.Text;
//***    

public void ToCSV<T>(IEnumerable<T> items, string filePath)
{
    var dataTable = new DataTable(typeof(T).Name);
    PropertyInfo[] props = typeof(T).GetProperties(BindingFlags.Public | BindingFlags.Instance);
    foreach (var prop in props)
        dataTable.Columns.Add(prop.Name, prop.PropertyType);

    foreach (var item in items)
    {
        var values = new object[props.Length];
        for (var i = 0; i < props.Length; i++)
        {
            values[i] = props[i].GetValue(item, null);
        }
        dataTable.Rows.Add(values);
    }

    StringBuilder fileContent = new StringBuilder();
    foreach (var col in dataTable.Columns)
        fileContent.Append(col.ToString() + ",");

    fileContent.Replace(",", System.Environment.NewLine, fileContent.Length - 1, 1);

    foreach (DataRow dr in dataTable.Rows)
    {
        foreach (var column in dr.ItemArray)
            fileContent.Append("\"" + column.ToString() + "\",");

        fileContent.Replace(",", System.Environment.NewLine, fileContent.Length - 1, 1);
    }

    try
    {
        System.IO.File.WriteAllText(filePath, fileContent.ToString());
    }
    catch (Exception)
    {

        throw;
    }
} 
```

# javascript - lightbox showing in post back

> ID：10915854
> 
> 赞同：0
> 
> 时间：2012-06-06T14:05:40.900
> 
> 标签：javascript, asp.net, html, button, lightbox

We are using asp.net button to open light box.But because of post back light box doent appear. We tried to use html button, it opens the light box but the validations in page is not controlled.How we may manage this?

```
 StringBuilder sb = new StringBuilder();
            sb.Append("<script type='text/javascript\'>");
            sb.Append("$(function () {");
            sb.Append("$('#dialog').dialog({");
            sb.Append("bgiframe: true, autoOpen: false, height: 500,");
            sb.Append("minWidth: 780, resizable: false, modal: true, position:'center',");
            sb.Append("open: function (type, data) {");
            sb.Append("$(this).parent().appendTo('form');");
            sb.Append("}");
            sb.Append("});");
            sb.Append("$('#dialog_link').click(function () {");
            sb.Append("$('#dialog').dialog('open');");
            sb.Append("return false;");
            sb.Append("});");
            sb.Append("});");
            sb.Append("</script>");

            ClientScript.RegisterClientScriptBlock(this.GetType(), "Lightbox", sb.ToString(), false); 
```

Not working on ButtonClick event are there any mistakes in code ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:29:34.263

这个怎么样

```
public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {
        buttonId.Attributes.Add("onClick", "return false;");
    }
} 
```

这应该可以阻止回发，但仍然可以为您提供所需的内容。

# jpa - 使用 JTA 时无法使用 EntityTransaction

> ID：10915855
> 
> 赞同：18
> 
> 时间：2012-06-06T14:05:43.363
> 
> 标签：jpa, glassfish, eclipselink, jta

我收到此错误：

```
javax.servlet.ServletException: java.lang.IllegalStateException: 
Exception Description: Cannot use an EntityTransaction while using JTA. 
```

在尝试使用 JPA 和 JAVAEE 时，Glassfish。

我的 persistence.xml 文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="acmeauction">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>jdbc/MySQLJDBCResource</jta-data-source>
        <class>it.uniroma3.acme.auction.model.User</class>
        <class>it.uniroma3.acme.auction.model.Auction</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/acmeauction"/>
            <property name="javax.persistence.jdbc.user" value="user"/>
            <property name="javax.persistence.jdbc.password" value="password"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我想要做的是以这种方式持久化一个对象（用户）：

```
@ManagedBean
public class UserRepository implements Serializable{

    @PersistenceUnit
    EntityManagerFactory emf;

    @PersistenceContext
    private EntityManager em; 

    private static UserRepository instance; 

    /**
     * Gives back the singleton UserRepository singleton. 
     */
    public static UserRepository getInstance() {
        if (instance==null) {
            instance = new UserRepository(); 
        }
        return instance; 
    }

    private UserRepository() {
        emf = Persistence.createEntityManagerFactory("acmeauction");
        em = emf.createEntityManager();             
    }

    /** 
     * Save and persist a new User. 
     */
    public void save(User user) {
        em.getTransaction().begin(); 
        em.persist(user);
        em.getTransaction().commit(); 
    }
} 
```

如果它尝试从一个简单的 Java 应用程序中使用 UserRepository，它可以正常工作。

在此先感谢，

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-12T05:27:14.720

您不应该使用`em.getTransaction().begin();`nor `em.getTransaction().commit();`，这些说明将与`RESOURCE_LOCAL`事务类型一起使用。

在您的情况下，事务由容器管理，`EntitiyManager`在您的方法中第一次使用时，容器检查是否存在活动事务，如果没有活动事务，则创建一个事务，当方法调用结束时，事务由容器提交。所以，最后你的方法应该是这样的：

```
public void save(User user) {
    em.persist(user);
} 
```

容器负责事务，即 JTA。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-06T14:08:48.293

如错误所述，如果您将 JTA 用于事务，则需要使用 JTA。

要么使用 JTA UserTransaction 开始/提交事务，要么使用 RESOURCE_LOCAL 持久性单元和非 jta 数据源。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Transactions](http://en.wikibooks.org/wiki/Java_Persistence/Transactions)

# matlab - How can I create a loop to search among structure variables inside a mat file?

> ID：10915857
> 
> 赞同：0
> 
> 时间：2012-06-06T14:05:52.913
> 
> 标签：matlab

I have a mat file containing a bunch of structure variables named sequentially: step001,step002,...step070\. Each of these variables has a field named 'type'. I want to create a loop to select those variables whose 'type' field is equal to 'rest' and ignore the others.

Any help is highly appreciated. Ehsan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:15:06.803

```
%get all the variables in the file:
x = who('-file',name_of_file_string);

for each variable
for i = 1:length(x)

    %construct a new structure S, with the structure as a substructure, using 
    %dynamic naming with sprintf:

    S = load(name_of_file_string,x(i))

    %compare string in 'type' field to 'rest'
    if strcmp(S.(printf('%s',x(i))).type,'rest')
        %if successful, do what you want with:
        S.(printf('%s',x(i))).type
    end

end 
```

# git - SourceTree 中的 git mv 在哪里？

> ID：10915858
> 
> 赞同：11
> 
> 时间：2012-06-06T14:05:56.390
> 
> 标签：git, git-gui, atlassian-sourcetree

我知道你可以移动文件。但是重命名和移动整个目录呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:13:08.930

**下拉菜单底部的“**操作**”菜单、“**移动...”选项。**或者，命令行`git`命令始终有效。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T10:08:14.140

您可以`git mv`在 SourceTree 正确指示移动之后的命令行上使用该命令。SourceTree 命令行可以使用`Terminal`按钮打开。

不幸的是，目前无法直接在 SourceTree 中执行此操作，至少对于文件夹而言是这样。**

# objective-c - 无法将文件从包复制到 Documents 目录，为什么 fileExistsAtPath 返回错误？

> ID：10915859
> 
> 赞同：3
> 
> 时间：2012-06-06T14:05:57.157
> 
> 标签：objective-c, ios, ios5, nsfilemanager

我正在使用以下代码片段尝试将文件从我的应用程序资源目录复制到 Documents 区域。我在 Github 上的[PocketOCR](https://github.com/rcarlsen/Pocket-OCR)项目中使用了以下内容：

```
// Set up the tessdata path. This is included in the application bundle
    // but is copied to the Documents directory on the first run.
    NSString *dataPath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"tessdata"];
    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSLog(@"Datapath is %@", dataPath);
    // If the expected store doesn't exist, copy the default store.
    if (![fileManager fileExistsAtPath:dataPath ]) {
        NSLog(@"File didn't exist at datapath...");
        // get the path to the app bundle (with the tessdata dir)
        NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
        NSString *tessdataPath = [bundlePath stringByAppendingPathComponent:@"tessdata"];
        if (tessdataPath) {
            [fileManager copyItemAtPath:tessdataPath toPath:dataPath error:NULL];
        }
    } 
```

这是我从调用上面得到的输出：

> 2012-06-06 14:53:42.607 MyApp [1072:707] 数据路径是 /var/mobile/Applications/9676D920-D6D1-4F86-9177-07CC3247A124/Documents/tessdata 打开数据文件 /var/mobile/Applications/9676D920 时出错-D6D1-4F86-9177-07CC3247A124/Documents/tessdata/eng.traineddata

我的 eng.traineddata 文件位于我的 xcode 项目中，如下所示

似乎在尝试检查 if 时正在报告错误`fileExistsAtPath`，我不希望这会引发错误，而是返回 YES 或 NO。

有没有更简单的方法来复制`eng.traineddata`文件，或者我犯了一个可以在这里更正的错误？

![I have the eng.traineddata file located in my xcode project like so](../Images/867813276971a759e9b7252c0e30776c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T05:15:36.733

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;

NSString *dataPath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"tessdata"];
NSLog(@"Datapath is %@", dataPath);

// If the expected store doesn't exist, copy the default store.    
    if ([fileManager fileExistsAtPath:dataPath] == NO)
    {
        NSString *tessdataPath = [[NSBundle mainBundle] pathForResource:@"eng" ofType:@"traineddata"];
        [fileManager copyItemAtPath:tessdataPath toPath:dataPath error:&error];

    }

-(NSString*) applicationDocumentsDirectory{
    // Get the documents directory
    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDir = [dirPaths objectAtIndex:0];
    return docsDir;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T06:18:30.900

我希望也帮助此代码将所有类型的文件包复制到文档目录文件夹..

```
NSString *pathsToReources = [[NSBundle mainBundle] resourcePath];
NSString *yourOriginalDatabasePath = [pathsToReources stringByAppendingPathComponent:@"lunchDB.sqlite"];  // file name u want copy 

NSArray *pathsToDocuments = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [pathsToDocuments objectAtIndex: 0];

    NSString *dbPath = [documentsDirectory stringByAppendingPathComponent:@"lunchDB.sqlite"];  // file name & your original path (Document path)

    if (![[NSFileManager defaultManager] isReadableFileAtPath: dbPath]) {

if ([[NSFileManager defaultManager] copyItemAtPath: yourOriginalDatabasePath toPath: dbPath error: NULL] != YES)

NSAssert2(0, @"Fail to copy database from %@ to %@", yourOriginalDatabasePath, dbPath);

} 
```

谢谢 ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:32:57.830

使用方法`fileExistsAtPath:isDirectory:`并`NSFileManager`指定路径是目录，因为它是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T14:59:19.023

`stringByAppendingPathComponent:@"tessdata"`

上面的行要求 tessdata 是 Xcode 项目中的物理文件夹（蓝色文件夹），而不是组（您显示的黄色文件夹）。使用 Finder 在您的 Xcode 项目文件夹中创建一个文件夹，然后在 Xcode 中将该文件夹拖放到您的项目中，并在询问时选择文件夹引用。

# android - Android实时游戏-实现时间单位

> ID：10915862
> 
> 赞同：2
> 
> 时间：2012-06-06T14:06:07.337
> 
> 标签：android, real-time

我会试着解释我的意思。我正在开发一个 2d 游戏。当我在小屏幕上运行下面的代码时，它比在大屏幕上运行相同的代码更快。我认为这取决于游戏循环的迭代在大屏幕上比在小屏幕上花费更多的时间。我如何实现`time unit`或其他不依赖于游戏循环的迭代？

```
private void createDebris(){
    if(dx<=0) return;
    if(stepDebris==2){          
        Debris debris = new Debris(gameActivity, dx-=1280*coefX/77, 800*coefY-50*coefY, coefX, coefY);
        synchronized (necessaryObjects) {
            necessaryObjects.add(debris);
        }
        stepDebris=-1;
        Log.e("COUNT", (count++)+"");
    }
    stepDebris++;
} 
```

PS Debris 是在画布上绘制的视觉对象。我会很感激你的回答。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:11:41.130

如果 stepDebris 是您在屏幕上移动对象的单位 - 那么每次绘制调用递增它是错误的，因为它将移动速率与帧速率联系起来。

你想要的是这样的

```
 stepDebris += elapsedMilliseconds * speedFactor 
```

其中 elapsedMilliseconds 是游戏开始后经过的时间（以毫秒为单位）。一旦您为*stepDebris找到正确的**speedFactor* - 无论帧率如何，它都会在不同的机器/分辨率上以相同的速度移动。

 *希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:16:51.317

您可以通过测量执行实际迭代 (= y) 以及之后休眠 (xy) 毫秒所需的时间来使“迭代”花费 x 毫秒。

另请参阅[本教程的第 3 步](http://blorb.tumblr.com/post/236799414/simple-java-android-game-loop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:23:22.350

Android 提供了实现定时事件循环的 Handler API 来控制计算的时间。 [这篇文章](http://android-developers.blogspot.com/2007/11/stitch-in-time.html)很不错。

您将通过使用此接口实现帧速率控制器来节省电池寿命，而不是尽可能快地重绘。*

# iphone - How to send object in NSNotification?

> ID：10915866
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:06:12.720
> 
> 标签：iphone, objective-c, nsnotificationcenter

I want to send object to selector in NSNotification.I mean, I have 3 buttons and on click of each button I am registering notification and when that event occurred I am calling one selector and in that selector I want to find out which button user has clicked because I have common action for all 3 buttons.

```
-(void)allThreeButtonAction:(sender)id
{
   [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performSomeOperationWhenEventOccur) name:@"EventCompletedNotification" object:nil];
} 
```

//Some event occurred, so I am sending notification

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"EventCompletedNotification" object:nil]; 
```

//Notified method

```
-(void)performSomeOperationWhenEventOccur
{
    //Here I want to know which button is pressed.
} 
```

I hope I am clear.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:09:04.797

您可能想`postNotificationName:object:userInfo:`从[NSNotificationCenter 文档中查看](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)

您只需发送一个 UserInfo ，其中包含识别您在选择器中检索到的按钮（最简单的是指向按钮的指针）所需的任何内容。

您的选择器签名应该会收到通知：

```
- (void)performSomeOperationWhenEventOccur:(NSNotification*) notification:(NSNotification*) notification
{
    // Use [notification userInfo] to determine which button was pressed...
} 
```

注册时不要忘记修改选择器名称：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performSomeOperationWhenEventOccur:) name:@"EventCompletedNotification" object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:25:09.453

添加通知观察者时不能传递对象，因此您必须将按下的按钮存储在某处：

```
-(void)allThreeButtonAction:(id)sender
{
   [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performSomeOperationWhenEventOccur) name:@"EventCompletedNotification" object:nil];
   self.buttonPressed = sender;
} 
```

然后你可以在你的通知处理程序中阅读它：

```
-(void)performSomeOperationWhenEventOccur
{
    if ( self.buttonPressed = self.button1 )
        ...
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-06T14:18:14.987

下面的代码片段将为您提供帮助。

**按钮1**

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performSomeOperationWhenEventOccur:) name:@"button1" object:button1]; 
```

**按钮2**

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(performSomeOperationWhenEventOccur:) name:@"button2" object:button2]; 
```

**将方法更改为以下**

```
- (void) performSomeOperationWhenEventOccur:(NSNotification *) notification
{
    if ([[notification name] isEqualToString:@"button1"])
    {
        NSButton *button1=[notification button1];
        NSLog (@"Successfully received the test notification! from button1");
    }
     else
    {
        NSButton *button2=[notification button2]; 
        NSLog (@"Successfully received the test notification! from button2");
    } 
} 
```

# r - 为R中的不同行定义特定的列宽

> ID：10915869
> 
> 赞同：0
> 
> 时间：2012-06-06T14:06:17.070
> 
> 标签：r, structure, rows

我对 R 并不陌生，但我找不到任何解决方案。我的目标是创建一个基于称为“通用变量格式”“*.uvf”的“未知”数据类型的文件，并从另一个文件的数据中填充它的参数。该格式适用于不同类型的（水文）时间序列。

问题是，它的标题是具有强大结构定义的 4 行标题类型。我想将每个单元格定义为一列。

一个例子：头文件中的第三行应该这样构造：

*   第 1-15 栏：“地点”
*   16-25栏：“X坐标”
*   第 26-35 列：“Y 坐标”
*   等等...

重要的是，向量“X”在第 3 行的第 16-25 列中没有更多的数字为 10。否则程序无法读取 X 坐标。

我想从另一个文件中读取 X 坐标，将其保存为一个名为 X 的向量，并将其保存在上面解释的位置。在此之后，“真实数据”（例如降水）应在标题下逐行列出每一天。

[uvf 格式（德语）](http://www.aquaplan.de/public_papers/imex/sectionUVF.html)

例子：

```
*Z
Abfluss        m3/s            K
A                 2509510   5636680       120
86110100158611010130
8611010015 0.184    
8611010030 0.189    
8611010045 0.191    
8611010100 0.1940000
8611010115 0.2010000
8611010130 0.2010000 
```

有一些德语条目；但这根本不应该是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:18:20.963

第 1 步：使用 readLines 函数读取前四行，并从这四行中解析出您想要的详细信息：

```
1\. Zeile : *Z
2\. Zeile : Spalte 1-15 Parameter, Spalte 16-30 Einheit, Spalte 32 DefArt (I,K,M)
3\. Zeile : Spalte 1-15 Ort, Spalte 16-25 X, Spalte 26-35 Y, Spalte 36-45 Höhe
4\. Zeile : Spalte 1-10 Start-Zeitpunkt, Spalte 11-20 End-Zeitpunkt 
```

第二行可以使用`read.fwf(textConnection(.))`单行或使用`substr`.

```
fmtlines <- readLines(textConnection("*Z
 Abfluss        m3/s            K
 A                 2509510   5636680       120
 86110100158611010130
 8611010015 0.184    
 8611010030 0.189    
 8611010045 0.191    
 8611010100 0.1940000
 8611010115 0.2010000
 8611010130 0.2010000
 Einheit<- substr( fmtlines[2], 16, 30 )
 Einheit
[1] "m3/s           " 
```

同样，然后从第三行和第四行中提取其余参数。

第 2 步：然后使用`read.fwf()`skip=4 参数和从第一步导出的格式参数来完成该过程。

# c++ - cvCalcOpticalFlowHS() opencv 抛出异常

> ID：10915881
> 
> 赞同：0
> 
> 时间：2012-06-06T14:07:00.173
> 
> 标签：c++, visual-studio-2010, exception, opencv

嘿，我正在尝试整理 openCV 的光流功能，但由于某种原因，我在 Visual Studio 中遇到了异常：

Optical_flow.exe 中 0x772615de 处未处理的异常：Microsoft C++ 异常：内存位置 0x0036f334 处的 cv::Exception..

通过断点，我发现错误存在于 cvCalcOpticalFlowHS 函数中。

我正在使用 openCV 2.1

```
#include <cv.h>
#include <highgui.h>
using namespace cv;

int init() {
  return 0;
}

int main(int argc, char **args) {
  CvCapture* capture = cvCaptureFromFile("Video/Wildlife.wmv");
  double fps = cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);

  CvSize size;
  size.width = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH);
  size.height = (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT);

  CvVideoWriter* writer = cvCreateVideoWriter("result.avi", 0, fps,size, 1);

  IplImage* curFrame = cvQueryFrame(capture);

  Mat u = Mat(size, CV_32FC2);
  Mat v = Mat(size, CV_32FC2);

  CvTermCriteria IterCriteria;
  IterCriteria.type = CV_TERMCRIT_ITER | CV_TERMCRIT_EPS;
  IterCriteria.max_iter = 500;
  IterCriteria.epsilon = 0.01;

  while(1) {
    IplImage* nextFrame = cvQueryFrame(capture);

    if(!nextFrame) break;

    u = Mat::zeros(size, CV_32FC2);
    v = Mat::zeros(size, CV_32FC2);

    /* Do optical flow computation */
    cvCalcOpticalFlowHS(&curFrame, &nextFrame, 0, &u, &v, 0.01, IterCriteria);

    cvWriteFrame(writer, curFrame);

    curFrame = nextFrame;
  }

  cvReleaseVideoWriter(&writer);
  cvReleaseCapture(&capture);

  return 0;
} 
```

有人以前见过这个问题或看到我犯的错误吗？

最好的祝福

雷姆科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:41:46.407

从[文档](http://opencv.itseez.com/modules/legacy/doc/motion_analysis.html#calcopticalflowhs)中，curFrame 和 nextFrame 应该是 8 位单通道。您目前只是从加载的文件中提取这些内容，而无需根据需要检查/转换它们。你能确认输入的类型是正确的吗？

此外，您还有 C++ 风格的 cv::Mat 与 C 风格的 IplImage* 的糟糕组合。我建议您升级到更新版本的 OpenCV（最近发布了 2.4），并尝试使用 C++ 或 C 风格方法中的一种或另一种。

另请注意，此光流方法被归类为已过时，建议使用[calcOpticalFlowPyrLK()](http://opencv.itseez.com/modules/video/doc/motion_analysis_and_object_tracking.html#void%20calcOpticalFlowPyrLK%28InputArray%20prevImg,%20InputArray%20nextImg,%20InputArray%20prevPts,%20InputOutputArray%20nextPts,%20OutputArray%20status,%20OutputArray%20err,%20Size%20winSize,%20int%20maxLevel,%20TermCriteria%20criteria,%20int%20flags,%20double%20minEigThreshold%29)处理稀疏特征或[使用 calcOpticalFlowFarneback()](http://opencv.itseez.com/modules/video/doc/motion_analysis_and_object_tracking.html#void%20calcOpticalFlowFarneback%28InputArray%20prev,%20InputArray%20next,%20InputOutputArray%20flow,%20double%20pyr_scale,%20int%20levels,%20int%20winsize,%20int%20iterations,%20int%20poly_n,%20double%20poly_sigma,%20int%20flags%29)处理密集特征。

下面是一些演示 calcOpticalFlowFarneback() 的示例代码，我相信您正在努力实现这一目标。它从网络摄像头而不是文件中获取数据。

```
#include <opencv2/opencv.hpp>

using namespace cv;

void drawOptFlowMap(const cv::Mat& flow,
                    cv::Mat& cflowmap,
                    int step,
                    const cv::Scalar& color
                   )
{
    for(int y = 0; y < cflowmap.rows; y += step)
        for(int x = 0; x < cflowmap.cols; x += step)
        {
            const cv::Point2f& fxy = flow.at<cv::Point2f>(y, x);
            cv::line(cflowmap,
                             cv::Point(x,y),
                             cv::Point(cvRound(x+fxy.x),cvRound(y+fxy.y)),
                 color);
            cv::circle(cflowmap, cv::Point(x,y), 2, color, -1);
        }
}

int main(int argc, char **args) {

    VideoCapture cap(0); // open the default camera
    if(!cap.isOpened())  // check if we succeeded
        return -1;

    Mat newFrame, newGray, prevGray;

    cap >> newFrame; // get a new frame from camera
    cvtColor(newFrame, newGray, CV_BGR2GRAY);
    prevGray = newGray.clone();

    double pyr_scale = 0.5;
    int levels = 3;
    int winsize = 5;
    int iterations = 5;
    int poly_n = 5;
    double poly_sigma = 1.1;
    int flags = 0;

    while(1) {
        cap >> newFrame;
        if(newFrame.empty()) break;
        cvtColor(newFrame, newGray, CV_BGR2GRAY);

        Mat flow = Mat(newGray.size(), CV_32FC2);

        /* Do optical flow computation */
        calcOpticalFlowFarneback(
            prevGray,
            newGray,
            flow,
            pyr_scale,
            levels,
            winsize,
            iterations,
            poly_n,
            poly_sigma,
            flags
            );

        drawOptFlowMap(flow, newFrame, 20, CV_RGB(0,255,0));

        namedWindow("Output",1);
        imshow("Output", newFrame);
        waitKey(1);

        prevGray = newGray.clone();
    }

    return 0;
} 
```

上面的代码与 OpenCV 附带的 fback.cpp 示例代码非常相似。

# java - 使用 execv 时，Cygwin C 文件返回“错误地址”

> ID：10915883
> 
> 赞同：0
> 
> 时间：2012-06-06T14:07:10.803
> 
> 标签：java, c, exec

我写了一个小java程序，我想在windows启动时执行它。我写了一个批处理文件在操作系统启动时运行，但我意识到它不起作用，因为 Windows 7 在操作系统启动时停止运行任何批处理文件。

为了解决这个问题，我想编写 ac 程序，用 cygwin 编译它（以便它的 .exe），并在操作系统启动时运行它。我希望它执行命令：

java -jar ipsetup.jar

我无法让它工作，所以我试图让 c 程序执行“ls”命令。这是代码：

```
int main(int argc, char ** argv){

//argv[0] = "java";
//argv[1] = "-jar";
//argv[2] = "c:/windows/ipstartup.jar";

execv("/bin/ls", "/bin/ls");
printf("%s",strerror(errno));
return 1; 
```

}

我不断收到错误“地址错误”或“文件或目录不存在”。有谁知道为什么？

谢谢

**编辑

所以我可以让程序在 cygwin 中正确运行（它执行我的 java 文件）。但是当我在 Windows 中运行它时，它只输出打印语句。原来是说缺少cygwin1.dll，所以我把它放到了windows目录下。这是我的源代码：

```
#include <errno.h>
#include <stdio.h> 
```

int main(int argc, char ** argv){

```
//argv[0] = "java";
//argv[1] = "-jar";
//argv[2] = "c:/windows/ipstartup.jar";

system("java -jar c:/windows/ipstartup.jar");
printf("I am here");
return 1; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:23:22.170

我可以在这里看到两个潜在的错误来源，它们类似于批处理文件问题：cygwin 和/或 java 在 Windows 启动时可能不起作用。

你为什么把它做成一个cygwin程序？使用[system()](http://linux.die.net/man/3/system)函数和常规 ANSI C 有什么问题吗？

# ruby-on-rails - 在 Rails 应用程序中嵌入 UML 图

> ID：10915895
> 
> 赞同：2
> 
> 时间：2012-06-06T14:07:46.437
> 
> 标签：ruby-on-rails, uml

我只见过可以为 rails 类本身生成 UML 图的 gem。我想要一个可以允许*在 rails 中创建和嵌入 UML 图（特别是序列图）*的 gem/工具。有人对可以集成到 Rails 应用程序中的开源 UML 可视化工具有建议吗？也许是具有 XML 输入和输出功能的一种。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:38:29.130

我还没有在 Rails 应用程序中看到 UML 渲染器的 gem，但您可以创建自己的。如果您正在寻找有关如何操作的指导，“Crafting Rails Applications”一书的第一章是关于创建您自己的自定义渲染器以在 Rails 中使用。如果已经有一个可以生成 UML 的 ruby​​ gem（[这看起来是个不错的选择](http://rubygems.org/gems/yumlcmd)），那就不会太难了。如果没有，如果您能找到一个可以创建 UML 图的命令行应用程序，那么集成起来也不会非常困难。

# windows - 在驱动程序级别检索进程的命令行参数

> ID：10915897
> 
> 赞同：3
> 
> 时间：2012-06-06T14:07:50.493
> 
> 标签：windows, device-driver

您好，我正在编写一个微型过滤器驱动程序，用于拦截来自某个进程的所有 irp 数据包，例如 a.exe 。

因此，在驱动程序代码中，可以通过对启动进程的命令行参数进行检查来完成。

有谁知道我怎样才能检索命令行参数？

提前致谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:17:23.360

在内核模式中没有支持的方法来执行此操作。事实上，试图从内核访问用户模式进程信息通常是一种痛苦。我建议向用户模式服务发起请求，然后该服务可以找到该信息并将其传递回您的内核组件。

但是，有一种未记录的方法可以做到这一点。如果您可以获取[`EPROCESS`](http://www.nirsoft.net/kernel_struct/vista/EPROCESS.html)目标进程的结构的句柄，则可以获取指向其中的[`PEB`](http://www.nirsoft.net/kernel_struct/vista/PEB.html)（进程环境块）结构的指针，然后该结构有一个指向[`RTL_USER_PROCESS_PARAMETERS`](http://www.nirsoft.net/kernel_struct/vista/RTL_USER_PROCESS_PARAMETERS.html)结构的指针，该结构有一个名为`CommandLine`.

例子：

```
UNICODE_STRING* commandLine = epProcess->Peb->ProcessParameters->CommandLine; 
```

这样做的缺点是它`EPROCESS`几乎完全不透明并且`PEB`也是半透明的，这意味着它可能会在未来的 Windows 版本中发生变化。我当然不提倡在生产代码中尝试这个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:26:10.383

尝试使用带有 PROCESSINFOCLASS 参数的[NtQueryInformationProcess](https://docs.microsoft.com/en-us/windows/win32/api/winternl/nf-winternl-ntqueryinformationprocess)或[ZwQueryInformationProcess](https://docs.microsoft.com/en-us/windows/win32/procthread/zwqueryinformationprocess)函数作为 ProcessBasicInformation。输出参数 ProcessInformation 将是 PROCESS_BASIC_INFORMATION 类型的结构。正如多项式所提到的，此结构有一个指向进程的[PEB 结构](https://docs.microsoft.com/en-us/windows/win32/api/winternl/ns-winternl-peb)的指针，其中包含您在其 ProcessParameters 字段中查找的信息。

# iis - 我如何阻止对客户端的访问，而不是对我的应用程序的访问？

> ID：10915899
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:08:07.170
> 
> 标签：iis, iis-7

我的 IIS 中有一个应用程序，但它的路径和文件对任何请求它们的人都是开放的。我使用 url 规则来阻止访问，但是当我这样做时，我的应用程序也没有访问权限。如何阻止外部客户端访问但不阻止我的应用程序访问？（我的应用程序也像客户端一样访问您的文件例如：我的应用程序的 url 是 www.example.com/app，但如果用户类型 www.example.com/app/users.xml 可以访问它。当我阻止，它不可能访问 xml 文件，但应用程序也没有访问权限，但我不想要这个）。

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:34:11.033

将敏感文件放在`App_Data`子文件夹中，该文件夹中的所有文件都不会在 Web 服务器上发布。

# salesforce - 有没有办法将保存结果（用于插入 DML 操作）链接回 sObjects？

> ID：10915904
> 
> 赞同：2
> 
> 时间：2012-06-06T14:08:19.563
> 
> 标签：salesforce, apex-code

## 背景

我有一个需要插入的 sObject 列表，但我必须先检查插入是否成功。所以，我在执行插入和检查保存结果（对于插入语句）之前设置了一个数据库保存点。因为，我不想处理是否发生任何错误，如果插入结果有任何错误，则数据库会回滚到保存点。

## 问题与疑问

我需要为每个保存（插入）结果收集错误，并将每个错误与导致错误的特定 sObject 记录相关联。根据文档[保存结果](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_dml_insert.htm#apex_saveresult)包含错误列表、插入记录的 Salesforce ID（如果成功）和成功指示符（布尔值）。

**如何将保存结果与插入的原始 sObject 记录相关联？**

## 代码/示例

这是我放在一起的一个示例来演示该概念。这个例子是有缺陷的，因为`InsertResults`并不总是匹配`sObjectsToInsert`. 这不完全是我在自定义类中使用的代码，但它使用相同的逻辑。

```
Map<Id,sObject> sObjectsToInsert; // this variable is set previously in the code
List<Database.SaveResult> InsertResults;

Map<String,sObject> ErrorMessages = new Map<String,sObject>();

System.SavePoint sp = Database.setSavepoint();

// 2nd parameter must be false to get all errors, if there are errors
//   (allow partial successes)
InsertResults = Database.insert(sObjectsToInsert.values(), false); 

for(Integer i=0; i < InsertResults.size(); i++)
{
  // This method does not guarantee the save result (ir) matches the sObject
  //   I need to make sure the insert result matches
  Database.SaveResult ir = InsertResults[i];
  sObject s = sObjectsToInsert.values()[i]; 

  String em = null; // error message
  Integer e = 0; // errors

  if(!ir.isSuccess())
  {
    system.debug('Not Successful');
    e++;

    for(Database.Error dbe : ir.getErrors()) { em += dbe.getMessage()+' '; }
    ErrorMessages.put(em, s);
  }
}

if(e > 0)
{
  database.rollback(sp);

  // log all errors in the ErrorMessages Map
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:23:42.347

您的评论说该`SaveResult`列表不能保证是有序的，但我相信它是。我多年来一直使用这种技术，从来没有遇到过问题。

# javascript - 有没有更简单的方法来检查某个元素的某个父元素的 N 个子元素是什么？

> ID：10915905
> 
> 赞同：-1
> 
> 时间：2012-06-06T14:08:22.677
> 
> 标签：javascript, jquery, dom

一个例子：

```
parent
 0 child-a
 1 child-b
   sub-child
 2 child-c
   sub-child
   sub-child 
```

这目前在我的小提琴中有效，只是想知道是否有更清洁的方法来解决它。但是如果单击子项-(a|b|c)，则会返回相应的索引（很像 jQuery 的 .index()... 但是如果单击子项的子项，则会得到相同的对应索引。

代码：

```
$j = jQuery.noConflict();
$j(function() {
    // when clicking , show which top level parent element it's in
    var element_to_stop_at = $j(".the_top_level_container");

    $j(document).click(function(event) {
        var target = $j(event.target);
        var index_of_top_level_element = 0;
        var found_target = false;

        var current = target;
        while ((current.length > 0) && current.attr("class") != element_to_stop_at.attr("class")) {
            current = current.parent();
        }

        var children = current.children();

        current = children.first();
        while (current.length > 0 && index_of_top_level_element < children.length) {
            if (current.has(target).length > 0 || current[0] == target[0]) {
                found_target = true;
                break;
            }
            current = current.next();
            index_of_top_level_element += 1;
        }
        if (false == found_target) {
            index_of_top_level_element = -1;
        }

        console.log("is the " + index_of_top_level_element + " th/nd/rd element in the containing element");
    });
});​ 
```

有没有一种简单/更快的方法来做到这一点？

基本上，我想要 .index() 的功能，但是如果我单击其中一个孩子`.the_top_level_container`的孩子，它应该返回相同的索引。

小提琴[http://jsfiddle.net/DerNalia/4LSzt/](http://jsfiddle.net/DerNalia/4LSzt/)

• 单击框/边框的 3 个部分中的任何一个
• 控制台将给出被`the_top_level_container`单击元素所属的子元素 的索引

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:12:53.130

我不知道它是否是您需要的，但请检查`index()`方法：

[http://api.jquery.com/index/](http://api.jquery.com/index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:44:21.417

从 , 开始`e.target`，用于`.closest()`到达顶级容器的子容器，然后使用`.index()`.

```
 // child selector-------------------------v
var idx = $j(event.target).closest('.the_top_level_container > *')
                          .index(); 
```

***演示：http:*** [//jsfiddle.net/4LSzt/22/](http://jsfiddle.net/4LSzt/22/)

# php - ios5 & JSON：可以从 php 文件中检索数据但不能发送到数据库

> ID：10915913
> 
> 赞同：0
> 
> 时间：2012-06-06T14:08:53.970
> 
> 标签：php, objective-c, json, ios5, database-connection

改变了一些东西并得到了一些新的提示。

在我的第一个项目中，我必须从 iPad 发送一些数据并将其插入到 SQL 数据库中，并在我的计算机 (MAMP) 中运行。目前，我试图只发送到字符串“城市”和“国家”。其实解决不了两个问题 **a) 下载了de SBJSON 3,1，将类添加到我的项目中，导入`sbjson.h`并编写代码：**

*在每个`NSLog`我写下我得到的：*

```
#import "SBJson.h"
…
NSArray *keys = [NSArray arrayWithObjects:@"name",@"surname",@"address",@"email",@"city",@"country",@"gender",@"phone",@"age",@"store",@"time", nil];
NSArray *objects = [NSArray arrayWithObjects:name.text,surname.text,address.text,email.text,city.text,country.text,genderLabel,phone.text,age.text,storeCity,lapTime, nil];
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];
NSString *jsonString = [jsonDictionary JSONRepresentation];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding  allowLossyConversion:NO];
NSString *postLength = [NSString stringWithFormat:@"%d", [jsonData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]init];

[request setURL:[NSURL URLWithString:@"http://192.168.2.111/*****acing/prueba.php"]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:jsonData];
NSLog(@"jsonData: %@",jsonData);//1

jsonData: <7b227469 6d65223a 2230313a 30373a30 35222c22 61646472 65737322 3a224d61 78696d69 6c69616e 74726173 73652c20 32222c22 6e616d65 223a224f 74746f22 2c226369 7479223a 224dc39c 4e434845 4e222c22 67656e64 6572223a 224d616c 65222c22 70686f6e 65223a22 2b343935 35353232 32323333 222c2265 6d61696c 223a226f 74746f40 64657574 63686c61 6e642e64 65222c22 7375726e 616d6522 3a225072 656d696e 67657222 2c22636f 756e7472 79223a22 4745524d 414e5922 2c226167 65223a22 3630222c 2273746f 7265223a 224dc39c 4e434845 4e227d>

NSLog(@"jsonLength: %d",jsonData.length);//2
223   

NSData *urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil
                                                    error:nil];
NSString *response = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

NSLog(@"response: %@",response);  //3

{"time":"01:07:05","address":"Maximiliantrasse, 2","name":"Otto","city":"MÜNCHEN","gender":"Male","phone":"+49555222233","email":"otto@deutchland.de","surname":"Preminger","country":"GERMANY","age":"60","store":"MÜNCHEN"} 
```

**b）我对php一无所知，并且搜索了我在“prueba.php”中编写的网络。MySQL连接到php，我可以用表单插入值，但我不知道如何获取数据（如果它到达php文件oO）并将值插入数据库。**

```
<?php

$hostname_ndb = "localhost";
$database_ndb = "PepeRacing";
$username_ndb = "root";
$password_ndb = "rona5lda";
$ndb = mysql_connect($hostname_ndb, $username_ndb, $password_ndb) or die("Could not connect");
mysql_select_db($database_ndb) or die("Could not connect to the database");

//get file 
$body = @file_get_contents('php://input');
echo $body;

$datosJSON = json_decode($body);
print_r($datosJSON);
$datosJSON=utf8_encode($datosJSON);
mysql_query("INSERT INTO players (city,country,name) VALUES ('{$datosJSON['city']}','{$datosJSON['country']}','{$datosJSON['name']}')");
?> 
```

**但如果我使用以下内容：**

```
<?php  
if($_POST) {
echo "recibo un paquetito- POST";
//recibo los datos y los descodifico con PHP
$misDatosJSON = json_decode($_POST["jsonData"]);
//debería haber una salida con los datos recibidos, no?
print_r($misDatosJSON);
$salida="";
$salida .="something: " .$misDatosJSON[1];
echo $salida;
}else{
echo "got nothing";
}
?> 
```

输出是“一无所有”

似乎很明显 POST 方法不起作用，有什么解决方法吗？

感谢您的阅读和帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:34:41.437

对于初学者，请从 PHP 文件中删除所有 HTML 标记，例如 ,、结束标记等。您正在发送标头 header('Content-Type: text/html; charset=utf-8');，在代码已经发送到浏览器。这是不好的编程习惯。

此外，您为 PHP 提供的代码只会从数据库中获取数据，而不是插入。

要插入，您需要执行以下操作：

```
$data_to_insert = json_decode($_POST['json'], true);
mysql_query("INSERT INTO players (city,country) VALUES ('{$data_to_insert['city']}','{$data_to_insert['country']}')"); 
```

以上将解码您的 $_POST json 字符串，分配数组键/值，然后插入数据库。

# scala - Scala中的模棱两可的重载

> ID：10915917
> 
> 赞同：2
> 
> 时间：2012-06-06T14:09:09.907
> 
> 标签：scala, slf4j

试图为 slf4j 编写一个包装器。

写了方法。其中2个是：

```
def logWarn(message: => String, arg1: => AnyRef) = { 

    if (logger.isWarnEnabled) {

        logger.warn(message, arg1)
    }
}

def logWarn(message: => String, args: => Array[AnyRef]) = {
    if (logger.isWarnEnabled) {
        logger.warn(message, args)
    }
} 
```

这编译得很好。问题是试图调用：

```
logWarn("retried: {}. Error is: {}", Array[AnyRef](numOfRetries.toString(), e.toString())); 
```

我希望 Scala 知道我的意思是调用上面的第二种方法。由于某些原因，我收到此错误：

```
ambiguous reference to overloaded definition, both method logWarn in trait Slf4jLogger of type
(message: => String, args: => Array[AnyRef])Unit
and  method logWarn in trait Slf4jLogger of type (message: => String, arg1: => AnyRef)Unit 
match argument types (java.lang.String,Array[AnyRef]) 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:43:13.823

`Array[_]`是 的子类型`AnyRef`，因此任何带有第二个类型参数的调用`Array[AnyRef]`对这两种方法都有效。

如果没有按名称参数，您可以使用 varargs 轻松解决此问题：

```
def logWarn(message: => String, args: AnyRef*) {
  if (logger.isWarnEnabled) {
    logger.warn(message, args)
  }
} 
```

但是，按名称参数与可变参数不兼容（至少在 2.9.1 中）。这意味着`args: (=> AnyRef)*`无效。

# symfony-1.4 - 扩展 Doctrine_Query

> ID：10915919
> 
> 赞同：0
> 
> 时间：2012-06-06T14:09:12.490
> 
> 标签：symfony-1.4, doctrine-1.2

我想使用学说查询创建一个复杂的分组，我使用了片段：

[Snippet Doctrine 自定义分组](http://snippets.symfony-project.org/snippet/371)

```
$q = myDQ::create()
  ->from('Some s'); 
```

它给了我一个错误：

> 严格标准：MyDq::create() 的声明应与 URL-ROOT/lib/MyDq.class.php 中的 Doctrine_Query::create() 的声明兼容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:41:52.513

Doctrine_Query:create 是这样声明的：

```
public static function create($conn = null, $class = null) 
```

你做了：

```
public static function create($conn = null) 
```

由于不同的论点，这不起作用。

有关覆盖静态方法的信息，您可能还会发现此页面很有趣：[php.net/manual/language.oop5.static.php](http://php.net/manual/language.oop5.static.php "php.net/manual/language.oop5.static.php")

# android - 如何检查在阶段调用的 Maven 目标

> ID：10915922
> 
> 赞同：0
> 
> 时间：2012-06-06T14:09:21.973
> 
> 标签：android, maven, maven-plugin, android-maven-plugin

我配置了一些插件目标以在我的构建生命周期的某些阶段执行（maven android 应用程序）。但我认为我在配置插件时犯了一个错误，并想确保他们真的打电话。我发现这个命令将打印所有生命周期阶段和目标：`mvn help:describe -Dcmd=install`，但它没有显示我配置的目标。因此我有两个问题：

*   命令是否`mvn help:describe -Dcmd=install`显示我在`<build>/<plugins>/<plugin>/<executions>/<execution>` pom 标签中配置的目标？

*   如何确保在阶段调用的目标和在构建生命周期中调用的阶段？

**更新** 我正在尝试配置 maven-android-plugin 并希望在包阶段执行 zipalign 目标

```
 <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.2.0</version>
            <extensions>true</extensions>
            <configuration>
                <sdk>
                    <platform>8</platform>
                </sdk>
                <emulator>
                    <avd>2.3.3_API-10</avd>
                </emulator>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
                <assetsDirectory>${project.build.directory}/filtered-assets</assetsDirectory>
                <androidManifestFile>${project.build.directory}/filtered-manifest/AndroidManifest.xml</androidManifestFile>
                <zipalign>
                    <skip>false</skip>
                    <verbose>${build.verbosity}</verbose>
                    <inputApk>${project.build.directory}/${project.artifactId}-${build.version.name}.apk</inputApk>
                    <outputApk>${project.build.directory}/${project.artifactId}-${build.version.name}-aligned.apk</outputApk>
                </zipalign>
            </configuration>
            <executions>
                <execution>
                    <id>zipalign</id>
                    <phase>package</phase>
                    <goals>
                        <goal>zipalign</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T15:41:30.080

您可以看到在日志中调用了 Maven 目标。对于您使用 zipalign 的情况，您可以看到例如：

```
[INFO] --- android-maven-plugin:3.5.0:zipalign (alignApk) @ androidclientlight ---
[INFO] Running command: C:\Eclipse\Android\android-sdk-windows_r12\tools\zipalign.exe
[INFO] with parameters: [-v, -f, 4, 
```

如果跳过，您将看到：

```
[INFO] --- android-maven-plugin:3.5.0:zipalign (alignApk) @ androidclientlight ---
[INFO] Skipping zipalign 
```

提示，不要忘记在您的 zipalign 配置中添加标志“false”。

```
 <zipalign>
        <skip>false</skip>
        <verbose>true</verbose>
        <inputApk>${project.build.directory}/${project.artifactId}-${project.version}.apk</inputApk>
        <outputApk>${project.build.directory}/${project.artifactId}-release-v${project.version}.apk</outputApk>
      </zipalign> 
```

# java - 使用 replaceAll 或 Pattern Matcher 替换字符串

> ID：10915924
> 
> 赞同：1
> 
> 时间：2012-06-06T14:09:26.820
> 
> 标签：java, string, replace

我需要用“8:00 AM ET - 5:00 PM ET”替换一个字符串，例如“8:00 AM - 5:00 PM”

我已经尝试了以下代码，但它不起作用......

```
time.replaceAll("AM", "AM ET");
time.replaceAll("PM", "PM ET");
convertedTime = time;
System.out.println(convertedTime); // didnt get replaced 
```

我尝试了以下方式并且它的工作但没有被正确更换，

```
Pattern p = Pattern.compile("(AM)");
Matcher m = p.matcher(time);
StringBuffer sb = new StringBuffer(); 
while(m.find()) {
    m.appendReplacement(sb, "AM ET");
    } 
m.appendTail(sb); 
p = Pattern.compile("(PM)");
m = p.matcher(time);
while(m.find()) {
    m.appendReplacement(sb, "PM ET");
    } 
m.appendTail(sb); 

System.out.println("sb: " + sb); // coming as sb: 8:00 AM ET - 5:00 PM8:00 AM - 5:00 PM ET 
```

请让我知道为什么第一种方法不起作用，以及是否可以在第二种方法中更正。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:11:14.703

当您调用该`replaceAll()`方法时，它会返回一个`String`带有修改后值的 new - 它不会更改原始`String`.

因此，您的代码应该是...

```
String convertedTime = time.replaceAll("AM", "AM ET");
convertedTime = convertedTime.replaceAll("PM", "PM ET");
System.out.println(convertedTime); 
```

甚至这个...

```
String convertedTime = time.replaceAll("AM", "AM ET").replaceAll("PM", "PM ET");
System.out.println(convertedTime); 
```

由于上述代码的简单性，我真的不建议您使用基于模式的代码 - 它过于复杂而无法获得相同的结果。但是，就像您问过的一样，您可能只需将您的`m = p.matcher(time);`行更改为`m = p.matcher(sb.toString());`，并清除您的`StringBuffer`，以便将第一次修改的结果提供给第二种`p.matcher()`方法，并删除`duplicate`输出中的 。像这样的东西...

```
Pattern p = Pattern.compile("(AM)");
Matcher m = p.matcher(time);
StringBuffer sb = new StringBuffer(); 
while(m.find()) {
    m.appendReplacement(sb, "AM ET");
    } 
m.appendTail(sb); 
p = Pattern.compile("(PM)");
m = p.matcher(sb.toString()); // CHANGED
sb = new StringBuffer(); // ADDED
while(m.find()) {
    m.appendReplacement(sb, "PM ET");
    } 
m.appendTail(sb); 

System.out.println("sb: " + sb); 
```

但是，正如我所说，使用`replaceAll()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:11:21.530

尝试重新分配方法中返回的字符串。例如`time = time.replaceAll("AM", "AM ET");`

# javascript - Javascript：使用函数作为变量

> ID：10915926
> 
> 赞同：3
> 
> 时间：2012-06-06T14:09:33.373
> 
> 标签：javascript, variables

有没有办法使用分配了函数的变量名，例如，获取元素的实际宽度？

`var xvar = function(){ return $('#y').width()}`

并将其用作

`console.log(xvar);`

代替

`console.log(xvar());`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T14:10:55.413

不是变量，但对象的属性是可能的。它被称为吸气剂。

```
var obj = {
  get xvar() { return $('#y').width(); }
}; 
```

然后你可以使用：

```
obj.xvar;  // will run the above function 
```

（理论上，使用变量 getter 的一种方法是当对象的属性反映变量时。例如，`window`对象。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:46:28.180

只要您的函数返回`String`或者`Number`这可能是非 ES5 环境的替代方案：

```
var xvar = new function(id){ 
              this.toString = 
              this.valueOf = function(){
                   return $(id).width()};
           }('#y'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:20:49.947

如果我没有弄错，它将起作用，因为`xvar`将存储对立即调用函数结果的引用：

```
var xvar = (function() { return $('#y').width(); })();
console.log(xvar); 
```

但是在它之后你不能使用`xvar()`版本。

# objective-c - 使用 Objective-C 块的更好的异步控制流

> ID：10915927
> 
> 赞同：37
> 
> 时间：2012-06-06T14:09:36.643
> 
> 标签：objective-c, design-patterns, afnetworking, objective-c-blocks

我正在使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)对 Web 服务进行异步调用。其中一些调用必须链接在一起，其中调用 A 的结果由调用 B 使用，调用 B 使用调用 C 等。

AFNetworking 处理异步调用的结果，并在创建操作时设置成功/失败块：

```
NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/public_timeline.json"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"Public Timeline: %@", JSON);
} failure:nil];
[operation start]; 
```

这会导致嵌套的异步调用块很快变得不可读。当任务不相互依赖而必须并行执行并且执行取决于所有操作的结果时，情况会更加复杂。

似乎更好的方法是利用[Promise](http://en.wikipedia.org/wiki/Futures_and_promises)框架来清理控制流。

我遇到了[MAFuture](https://github.com/mikeash/MAFuture)，但不知道如何最好地将它与 AFNetworking 集成。由于异步调用可能有多个结果（成功/失败）并且没有返回值，因此它似乎不是一个理想的选择。

任何指针或想法将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-11T20:57:05.683

我为此创建了一个轻量级的解决方案。它被称为 Sequencer，它在[github 上](https://github.com/berzniz/Sequencer)。

它使链接 API 调用（或任何其他异步代码）变得简单明了。

下面是一个使用 AFNetworking 的例子：

```
Sequencer *sequencer = [[Sequencer alloc] init];

[sequencer enqueueStep:^(id result, SequencerCompletion completion) {
    NSURL *url = [NSURL URLWithString:@"https://alpha-api.app.net/stream/0/posts/stream/global"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        completion(JSON);
    } failure:nil];
    [operation start];
}];

[sequencer enqueueStep:^(NSDictionary *feed, SequencerCompletion completion) {
    NSArray *data = [feed objectForKey:@"data"];
    NSDictionary *lastFeedItem = [data lastObject];
    NSString *cononicalURL = [lastFeedItem objectForKey:@"canonical_url"];

    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:cononicalURL]];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        completion(responseObject);
    } failure:nil];
    [operation start];
}];

[sequencer enqueueStep:^(NSData *htmlData, SequencerCompletion completion) {
    NSString *html = [[NSString alloc] initWithData:htmlData encoding:NSUTF8StringEncoding];
    NSLog(@"HTML Page: %@", html);
    completion(nil);
}];

[sequencer run]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-08T18:06:05.840

我还没有使用它，但听起来[Reactive Cocoa](https://github.com/blog/1107-reactivecocoa-for-a-better-world)的设计目的就是按照您的描述。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-11T15:05:45.320

在 Gowalla 中使用 AFNetworking 在成功块中将调用链接在一起的情况并不少见。

我的建议是尽可能将网络请求和序列化因素考虑到模型中的类方法中。然后，对于需要进行子请求的请求，您可以在成功块中调用这些方法。

此外，如果您还没有使用它，可以`AFHTTPClient`大大简化这些复杂的网络交互。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-29T18:52:35.317

[PromiseKit](http://promisekit.org/)可能很有用。它似乎是更流行的 Promise 实现之一，其他人编写了类别以将其与 AFNetworking 等库集成，请参阅[PromiseKit-AFNetworking](https://github.com/csotiriou/PromiseKit-AFNetworking)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-21T11:03:40.130

在 Github 上有一个 CommonJS 风格的 Promise 的 Objective-C 实现：

[https://github.com/mproberts/objc-promise](https://github.com/mproberts/objc-promise)

示例（取自 Readme.md）

```
Deferred *russell = [Deferred deferred];
Promise *promise = [russell promise];

[promise then:^(NSString *hairType){
    NSLog(@"The present King of France is %@!", hairType);
}];

[russell resolve:@"bald"];

// The present King of France is bald! 
```

我还没有尝试过这个库，但尽管这个例子有点让人印象深刻，但它看起来“很有希望”。（对不起，我无法抗拒）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-22T11:44:20.427

您可以结合`NSBlockOperation`使用`semaphore`来实现它：

```
- (void)loadDataByOrderSuccess:(void (^)(void))success failure:(void (^)(void))failure {
    // first,load data1
    NSBlockOperation * operation1 = [NSBlockOperation blockOperationWithBlock:^{
        dispatch_semaphore_t sema = dispatch_semaphore_create(0);
        [self loadData1Success:^{
            dispatch_semaphore_signal(sema);
        } failure:^{
            !failure ?: failure();
        }];
        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    }];
    // then,load data2
    NSBlockOperation * operation2 = [NSBlockOperation blockOperationWithBlock:^{
        dispatch_semaphore_t sema = dispatch_semaphore_create(0);
        [self loadData2Success:^{
            dispatch_semaphore_signal(sema);
        } failure:^{
            !failure ?: failure();
        }];
        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    }];
    // finally,load data3
    NSBlockOperation * operation3 = [NSBlockOperation blockOperationWithBlock:^{
        dispatch_semaphore_t sema = dispatch_semaphore_create(0);
        [self loadData3Success:^{
            dispatch_semaphore_signal(sema);
        } failure:^{
            !failure ?: failure();
        }];
        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
        !success ?: success();
    }];
    [operation2 addDependency:operation1];
    [operation3 addDependency:operation2];
    NSOperationQueue * queue = [[NSOperationQueue alloc] init];
    [queue addOperations:@[operation1, operation2, operation3] waitUntilFinished:NO];
} 
```

# java - 如何调试 JVM 中的挂起线程？

> ID：10915929
> 
> 赞同：2
> 
> 时间：2012-06-06T14:09:49.273
> 
> 标签：java, multithreading, debugging, jvm, remote-debugging

我在远程 Ubuntu 服务器上运行一个持久的 Java 程序，在那里我拥有 root 用户权限。一段时间后，某些 CPU 内核的使用率上升到 100%。日志显示没有任何可疑之处，应用程序仍然可以运行，但吞吐量降低了。

如何调试 JVM，以便在它仍在运行时找出原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:15:33.690

**连接到进程`jvisualvm`**

该工具将允许您连接到正在运行的进程并查看所有线程及其状态。这可以通过查看哪个线程一直处于清醒状态来告诉您哪个线程是罪魁祸首。您可以进行线程转储以查看每个线程的堆栈跟踪，并查看每个线程在做什么。

对于这种调试来说，它是一个非常强大的工具。它仅与 JDK 一起分发，因此您需要的不仅仅是安装的 JVM 运行时才能访问。确保安装与运行 JVM 相同的 JDK 版本。

您需要转发您的 X 显示器才能使其正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T14:17:31.237

一种选择是[VisualVM](http://visualvm.java.net/)，它包含在从 Java 1.6 开始的 JDK 中。我发现它在过去的某些情况下很有用。

您可以连接到本地应用程序或远程应用程序。

要连接到远程应用程序，`jstatd`请在远程服务器上运行，然后在本地运行 VisualVM 并输入服务器的 IP 地址。应该会为您提供一份正在运行的 Java 应用程序列表，其中包括您希望探索的应用程序。如果在列出应用程序时遇到任何问题，VisualVM 网站上提供了很好的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T21:01:16.117

如果您想查看 linux 上的堆栈跟踪，只需发出`kill -SIGQUIT <java-program-pid>`. 这是查看代码执行位置的一种方法。

# jquery - 单击时，搜索书签并显示书签所在的 div

> ID：10915930
> 
> 赞同：0
> 
> 时间：2012-06-06T14:09:56.107
> 
> 标签：jquery

jQuery或其他方法可以做到这一点吗？基本上，我在屏幕上显示的 div 中有一个书签超链接。它链接到另一个未显示的 div 中的书签标签。是否有可能，当用户单击书签链接时，检测包含书签的 div 的属性并将该 div 显示设置为显示？

```
<div class="cpecontent" id="content_2">
  <h2><br />
    <a name="0.1__Toc320283140"> </a> <a name="0.1__Toc325358918"> </a>Determine All Sources of Income (Taxable and Non-Taxable)</h2>
  <p><br />
    Reaching into the bag you pull out an amorphous jumble of paper. There are receipts, a stapled stack of credit card statements, a few 1099s, a W-2, a manila envelope labeled "investments," some check stubs, and one artificial fingernail. "What is all this?" you inquire. </p>
  <p><br />
    "Monday nights at 6:15\. It's all about the lottery and I play a woman who runs this magical machine that grabs numbered ping pong balls. It's like a big popcorn machine. My character presses a button that makes the machine grab a ball out of the air. When the machine grabs a ball, she has to turn it so the number faces the camera. There's no dialogue yet, but my manager says they're probably going to expand my role." </p>
  <p><br />
    <!--ON Click for this Bookmark, set the div below to display:show;-->
    <a href="#0.1__Gross_Income" title="_Gross_Income"> <span> For more on this topics - see Appendix A </a> </p>
</div>

<!--A LOT OF CONTENT IN BETWEEN-->

<!--This DIV is hidden right now, but we want to try and show it-->
<div class="cpecontent" id="content_11" style="display:none;">
  <h2><br />
    <a name="0.1__Toc325358937"> </a> <a name="0.1__Gross_Income"> </a>Gross Income</h2>
  <p><br />
    All of the following constitute possible sources of Gross Income:</p>
  <p style="margin-bottom:0pt;line-height:12pt">Wages</p>
  <p style="margin-bottom:0pt;line-height:12pt">Self-employment income</p>
  <p style="margin-bottom:0pt;line-height:12pt">Partnership and S corporation income</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:16:55.163

```
$('a[href^="#"]').click(function(){
    $('a[name="'+this.href.replace('#', '')+'"]').show();
}); 
```

BTW I think those links are called anchors not bookmarks.

# windows-phone-7 - 导航后保持枢轴栏

> ID：10915934
> 
> 赞同：0
> 
> 时间：2012-06-06T14:10:05.170
> 
> 标签：windows-phone-7, pivot

在 iOS 中，我得到了这个 -> Window -> TabbarController -> NavigationController -> ViewController

Tabbar 总是在底部。如果我将一个新的 ViewController 推送到 navigationController，Tabbar 仍然会显示。

在 Windows Phone 上有 Pivot。Title Bar 类似于 ios 上的 Tabbar，pivotitem 类似于 viewController。但是我怎样才能改变pivotitem并保持Pivot...与NavigationService我交换整个xaml。但我只想更改一个枢轴项目...可能带有幻灯片动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:32:57.360

我无法理解 =) Pivot 中的幻灯片动画是更改当前 PivotItem 的默认方式。您只需用手指滑动屏幕，PivotItem 就会更改为另一个

```
<Pivot>
  <PivotItem />
  <PivotItem />
</Pivot> 
```

# php - PHP每周需要特定的时间

> ID：10915935
> 
> 赞同：1
> 
> 时间：2012-06-06T14:10:05.577
> 
> 标签：php

我在一个页面上有一个 DIV，我只想在周四晚上 7 点到晚上 8 点（当地时间）在网站上显示。不久前我发了一个帖子，并找到了我的答案。[以前的帖子在这里。](https://stackoverflow.com/questions/9230462/show-something-at-a-specific-time-each-week-using-php)

我正在使用此代码来执行此操作：

```
if( date('l') == "Thursday" && date('G') >= 19 && date('G') < 20 ) 
```

但是现在我需要从下午 6:59:30 到晚上 8:01（服务器时间）显示 div，我不太确定如何格式化上面的语句？

这将需要无限期地每周运行一次，直到我删除代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:14:28.197

```
if( date('l') == "Thursday" && date('Gis') >= 185930 && date('Gis') < 200100) {... 
```

您应该查看 php 日期手册以进行澄清： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:13:49.430

```
if (date('l') == 'Thursday' && time() >= strtotime('18:59:30')
   && time() <= strtotime('20:01:00')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:14:04.790

```
if (date('l') == "Thursday" && date('His') >= '185930' && date('His') <= '200100') 
```

# android - 从 Intent 填充 ListView

> ID：10915936
> 
> 赞同：0
> 
> 时间：2012-06-06T14:10:07.370
> 
> 标签：android, android-intent, arraylist, android-listview

我已经启动了一个带有应包含列表的 Intent 的 Activity，但是当我收集数据并将其绑定到我的 ListView 时，应用程序崩溃了。我在这一行得到错误：

```
resultMenu.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, selected)); 
```

这是我的整个活动。提前致谢。

```
public class Result extends Activity {
    private ArrayList<String> menuList;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result);

        Intent intent = this.getIntent();
        ArrayList<String> selected = intent.getStringArrayListExtra("menuList"); 

        // Configure the listview
        ListView resultMenu = (ListView)this.findViewById(R.id.menuResult);
        resultMenu.setAdapter(new ArrayAdapter<String>(this, 
                android.R.layout.simple_list_item_1, selected));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T04:12:04.557

Since your force close is caused by this line:

```
resultMenu.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, selected)); 
```

The only two possible errors that I can see are:

1.  `selected` is null, or
2.  `resultMenu` is null

Both of these cause a Null Pointer Exception. If your file result.xml has a ListView element with `android:id="@+id/resultMenu` then the error is in `selected`.

I am betting that `selected` is possibly a String[] or the Intent does not have a 'menuList' key.

How do you build the Intent used to start your Activity `Result`?

# c# - c# - 正则表达式从字符串中删除元音，除了第一个和最后一个字符

> ID：10915937
> 
> 赞同：3
> 
> 时间：2012-06-06T14:10:08.883
> 
> 标签：c#, .net, regex

我正在尝试从字符串中删除除第一个和最后一个字符之外的所有元音。我尝试了 2 种表达式并使用 2 种方式，但徒劳无功。我在下面描述了它们。有人对此有正则表达式吗？

例如

原始字符串 -- source = apeaple

在 regex -- source_modified = apple 之后（这是预期的）

我尝试了这个表达式，`([a-zA-Z])[aeiouAEIOU]([a-zA-Z])`但这个表达式也删除了重复的字符。所以当我应用上述表达式时会发生以下情况

使用的代码——

```
正则表达式 reg = new Regex("([a-zA-Z])[aeiouAEIOU]([a-zA-Z])");
string source_modified = reg.Replace(source, "");

```

原始字符串 -- source = apeaple

代码执行后 -- source_modified = aple (删除重复字符)

使用的代码—— `string source_modified = Regex.Replace(source, "([a-zA-Z])[aeiouAEIOU]([a-zA-Z])", "$1" + "$2");`

原始字符串 -- source = apeaple

代码执行后 -- source_modified = apaple （仅删除 1 个元音）

我也尝试过`([a-zA-Z])[aeiouAEIOU]*([a-zA-Z])`，但这只是删除了 1 个元音，而不是全部。所以当我应用上述表达式时会发生以下情况

使用的代码——

```
正则表达式 reg = new Regex("([a-zA-Z])[aeiouAEIOU]*([a-zA-Z])");
string source_modified = reg.Replace(source, "");

```

原始字符串 -- source = apeaple

代码执行后 -- source_modified = "" （所有字符都被删除）

使用的代码—— `string source_modified = Regex.Replace(source, "([a-zA-Z])[aeiouAEIOU]*([a-zA-Z])", "$1" + "$2");`

原始字符串 -- source = apeaple

代码执行后 -- source_modified = apeple

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-06T14:18:06.933

如果是这样，为什么不删除第一个和最后一个字符，删除元音，然后再次缝合？

```
string sWord = "apeaple";
char cFirst = sWord[0], cLast = sWord[sWord.length-1];

sWord = sWord.substring(1, sWord.length -2);

sWord = cFirst.ToString() + 
        Regex.Replace(sWord , "[aouiyeAOUIYE]", String.Empty) + 
        cLast.ToString(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T14:19:03.220

你需要像这样的环顾四周

```
(?<!^)[aouieyAOUIEY](?!$) 
```

C# 支持它并且非常强大

```
string resultString = null;
try {
    resultString = Regex.Replace(subjectString, "(?<!^)[aeui](?!$)", "");
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

**更新 1**

TWRCole 告诉我英语中有一条特殊规则（“这不适用于像“Anyanka”这样的单词，其中内部的“y”用作辅音”）

以下更改应该使用负前瞻技术来做到这一点：

```
(?<!^)([aouie]|y(?![aouie]))(?!$) 
```

这次启用匹配不区分大小写的正则表达式修饰符，它使正则表达式比原来的更简单

如果 ay 后跟另一个 y 仍然意味着 y 是辅音（呃……有这样的词），因此不应该消失，因为 ay 也必须列在最后一个字符类中：

```
(?<!^)([aouie]|y(?![aouiey]))(?!$) 
```

我再说一遍，我使用 C# 作为我的正则表达式方言，它对环视技术有很好的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:21:21.007

您需要以至少一个字符开始字符串，找到一个元音，然后以至少一个字符结束字符串。尝试：

```
(.+)[aeiouAEIOU](.+) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T16:30:08.267

如果您想将其应用于包含多个单词的字符串中的单个单词，`\B[AEIOUaeiou]\B`可能值得一试。`\B`是一个非单词边界，即两个相邻字符要么都是单词字符要么都是非单词字符的任何位置。如果两个位置之间有元音，后一种情况显然是不可能的。

不用说，它也适用于仅由单个单词组成的字符串。

# wordpress - wordpress 中的 Ajax 调用返回 -1 并且没有从 functions.php 文件中运行任何代码

> ID：10915940
> 
> 赞同：0
> 
> 时间：2012-06-06T14:10:34.343
> 
> 标签：wordpress, jquery, wordpress-theming

我必须在 wordpress 中使用 ajax 将值插入到数据库表 wp_ratings 表中，但它不起作用。以下是我正在使用的代码：

阿贾克斯调用：

```
$(function(){
            $('#submit').click(function(){
            var rating_allowed=document.getElementById("rating_allowed").value;
            var product_id=document.getElementById("product_id").value;
            var user_id=document.getElementById("user_id").value;
            var pc_ip=document.getElementById("pc_ip").value;
            var performance_input=document.getElementById("performance_input").value;
            var features_input=document.getElementById("features_input").value;
            var battery_input=document.getElementById("battery_input").value;
            var overall_input=document.getElementById("overall_input").value;
            var rating_cat_count=document.getElementById("rating_cat_count").value;
            var rate_1_name_find=document.getElementById("rate_1_name_find").value;
            var rate_2_name_find=document.getElementById("rate_2_name_find").value;
            var rate_3_name_find=document.getElementById("rate_3_name_find").value;
            var rate_4_name_find=document.getElementById("rate_4_name_find").value;
            var pros=document.getElementById("pros").value;
            var cons=document.getElementById("cons").value;
            alert("g");
            alert("action=updateRating&product_id=" + product_id + "&user_id=" + user_id + "&pc_ip=" + pc_ip + "&performance_input=" + performance_input + "&features_input=" + features_input + "&battery_input=" + battery_input + "&overall_input=" + overall_input + "&rating_cat_count=" + rating_cat_count +"&rate_1_name_find=" + rate_1_name_find + "&rate_2_name_find=" + rate_2_name_find + "&rate_3_name_find=" + rate_3_name_find + "&rate_4_name_find=" + rate_4_name_find + "&pros=" + pros + "&cons=" + cons);
                        $.ajax({
                            url:"/wp-admin/admin-ajax.php",
                            type:'POST',
                                                        data:"action=updateRating&product_id=" + product_id + "&user_id=" + user_id + "&pc_ip=" + pc_ip + "&performance_input=" + performance_input + "&features_input=" + features_input + "&battery_input=" + battery_input + "&overall_input=" + overall_input + "&rating_cat_count=" + rating_cat_count +"&rate_1_name_find=" + rate_1_name_find + "&rate_2_name_find=" + rate_2_name_find + "&rate_3_name_find=" + rate_3_name_find + "&rate_4_name_find=" + rate_4_name_find + "&pros=" + pros + "&cons=" + cons,
                             success:function(results)
                                 {
                                  alert(results);

                                        }
                                   });
                          }
                                    );
}); 
```

在functions.php文件中：

```
function implement_ajax_updateRating() 
{

        $p_id = mysql_real_escape_string(htmlentities(trim($_POST['product_id'])));

        $user_id = mysql_real_escape_string(htmlentities(trim($_POST['user_id'])));

        $pc_ip = mysql_real_escape_string(htmlentities(trim($_POST['pc_ip'])));

        $rate_1 = mysql_real_escape_string(htmlentities(trim($_POST['performance_input'])));

        $rate_2 = mysql_real_escape_string(htmlentities(trim($_POST['features_input'])));

        $rate_3 = mysql_real_escape_string(htmlentities(trim($_POST['battery_input'])));

        $rate_4 = mysql_real_escape_string(htmlentities(trim($_POST['overall_input'])));

        $rating_cat_numbers = mysql_real_escape_string(htmlentities(trim($_POST['rating_cat_count'])));

        $rate_1_find = mysql_real_escape_string(htmlentities(trim($_POST['rate_1_name_find'])));

        $rate_2_find = mysql_real_escape_string(htmlentities(trim($_POST['rate_2_name_find'])));

        $rate_3_find = mysql_real_escape_string(htmlentities(trim($_POST['rate_3_name_find'])));

        $rate_4_find = mysql_real_escape_string(htmlentities(trim($_POST['rate_4_name_find'])));

        $pros = mysql_real_escape_string(htmlentities(trim($_POST['pros'])));

        $cons = mysql_real_escape_string(htmlentities(trim($_POST['cons'])));

        //add_post_meta('17', 'ff_value', "ff", true); 

        $rating_insert = mysql_query("INSERT INTO wp_rating (post_id, rating_1, rating_2,rating_3,rating_4,user_id,comment_id,pc_ip,pros,cons)

        VALUES (".$p_id.", ".$rate_1.", ".$rate_2.",".$rate_3.",".$rate_4.",".$user_id.",".$comment_id.",'".$pc_ip."','".$pros."','".$cons."')");

        //$multi_in = multiRatingWidth($p_id, $rating_cat_numbers, $rate_1_find, $rate_2_find, $rate_3_find, $rate_4_find);

die();
}
add_action('wp_ajax_updateRating', 'implement_ajax_updateRating');
add_action('wp_ajax_nopriv_updateRating', 'implement_ajax_updateRating'); 
```

但是警报返回 -1 并且没有任何内容保存在数据库中。

# sessiontracking - Struts 1.3 应用程序：对每个 URL 强制执行时间戳传递参数

> ID：10915949
> 
> 赞同：0
> 
> 时间：2012-06-06T14:11:07.667
> 
> 标签：sessiontracking

我想对应用程序的每个 url 强制执行一个动态参数（时间戳）

我想使用此参数通过将当前页面时间戳与调用的 URL 时间戳进行比较来解决调用浏览器后退按钮或历史记录中的 url 的迭代问题。

任何线索都非常感谢

侯萨姆·哈利勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:16:49.990

What's the "current page timestamp"? Do you mean by checking against the server's current time?

You'd need to have a timestamp in every link, which could be done with a custom tag.

Each form would need a timestamp, which could also be done via custom tag.

A custom request processor would be the Struts 1-way, although you may just be able to use a filter.

You may need to provide more details regarding what *exact* problem you're trying to solve.

# android - Ant 似乎在打包 apk 时忽略了 Proguard 生成的 jar

> ID：10915952
> 
> 赞同：0
> 
> 时间：2012-06-06T14:11:12.730
> 
> 标签：android, ant, proguard

我有一个 Jenkins 构建服务器，用于使用 ant 和 Android（SDK 修订版 18）构建 Android APK。发布 APK 工作正常。但是，如果我通过提供 proguard.cfg 并通过 project.properties 中的“proguard.config=proguard.cfg”指向它来启用 proguard，则似乎会发生以下情况：

Proguard 被执行（从 shell 输出和之后的 mappings.txt 和 seed.txt 可以看出）一个 apk 被生成。然而，APK 生成的 Stacktraces 根本没有被混淆。

有人对此有想法吗？似乎proguard生成的jar由于某些原因没有包含在apk中。

* * *

这是我的 Proguard 配置

> -optimizationpasses 5 -dontusemixedcaseclassnames -dontskipnonpubliclibraryclasses -dontpreverify -verbose -optimizations !code/simplification/arithmetic,!field/ *,!class/merging/*
> 
> ```
> -keep public class * extends android.app.Activity
> -keep public class * extends android.app.Application
> -keep public class * extends android.app.Service
> -keep public class * extends android.content.BroadcastReceiver
> -keep public class * extends android.content.ContentProvider
> -keep public class * extends android.app.backup.BackupAgentHelper
> -keep public class * extends android.preference.Preference
> -keep public class com.android.vending.licensing.ILicensingService
> 
> -keepclasseswithmembernames class * {
>     native <methods>;
> }
> 
> -keepclasseswithmembers class * {
>     public <init>(android.content.Context, android.util.AttributeSet);
> }
> 
> -keepclasseswithmembers class * {
>     public <init>(android.content.Context, android.util.AttributeSet, int);
> }
> 
> -keepclassmembers class * extends android.app.Activity {
>    public void *(android.view.View);
> }
> 
> -keepclassmembers enum * {
>     public static **[] values();
>     public static ** valueOf(java.lang.String);
> }
> 
> -keep class * implements android.os.Parcelable {
>   public static final android.os.Parcelable$Creator *;
> }
> 
> #ACRA specifics
> # we need line numbers in our stack traces otherwise they are pretty useless
> -renamesourcefileattribute SourceFile
> -keepattributes SourceFile,LineNumberTable
> 
> # ACRA needs "annotations" so add this... 
> -keepattributes *Annotation*
> 
> # keep this class so that logging will show 'ACRA' and not a obfuscated name like 'a'.
> # Note: if you are removing log messages elsewhere in this file then this isn't necessary
> -keep class org.acra.ACRA {
>         *;
> }
> 
> # keep this around for some enums that ACRA needs
> -keep class org.acra.ReportingInteractionMode {
>    *;
> }
> 
> # keep this otherwise it is removed by ProGuard
> -keep public class org.acra.ErrorReporter
> {
> public void addCustomData(java.lang.String,java.lang.String);
> }
> 
> # keep this otherwise it is removed by ProGuard
> -keep public class org.acra.ErrorReporter
> {
> public org.acra.ErrorReporter$ReportsSenderWorker handleSilentException(java.lang.Throwable);
> } 
> ```

mappings.txt 声明我的代码被混淆了：

```
de.cellular.crashtest.ObfuscateThisClass -> de.cellular.crashtest.b: 
```

但是它在报告的 Stacktrace 中没有被混淆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:20:28.770

似乎这只是一个詹金斯配置问题：apk是从`bin/`目录中存档的，但混淆的那个在`release/`

# cdi - 对于 CDI 注入，我是否需要生产者存档和被注入者存档中的 META-INF/beans.xml？

> ID：10915956
> 
> 赞同：3
> 
> 时间：2012-06-06T14:11:23.690
> 
> 标签：cdi, jsr299

也许只是梳理[CDI 1.0 规范](http://docs.jboss.org/cdi/spec/1.0/html/)的时间太长了，但我无法找到确切`META-INF/beans.xml`需要 a 的位置的详细描述。

（[关于 bean 发现的部分](http://docs.jboss.org/cdi/spec/1.0/html/packagingdeployment.html#beandiscovery)做了一些暗示某些事情的诱人陈述，但我不确定它是否是规定性的。）

我知道松散地说任何 bean 档案都需要一个。

但是考虑在兼容 CDI 1.0 环境中使用以下 jar 的情况：

*   仅包含接口的*接口 jar*
*   一个包含 CDI bean 的*实现 jar*，这些 CDI bean 实现了这些接口并具有`@Inject`注入点，但没有生产者方法
*   一个*生产者 jar*包含（为简单起见）带有单个方法的单个 Java 对象，该方法已用`@Produces`.

*生产者 jar*和*实现 jar*都需要是 bean 档案，这似乎是合乎逻辑的，因此每个都需要`META-INF/beans.xml`包含在其中的资源。

但为了完整起见，事实是否如此？既然*实现jar*只用了一个`@Inject`点，没有CDI注解，会不会被其他方式扫描呢？另一种看待它的方式：在此示例中，*实现 jar*仅用作注入的*目标**，*而不是可注入的*源*。所以我可以看到某种逻辑会说：看，只有产生*可以注入*的 bean 的 jar需要被声明为 bean 档案。（我并不是说这是真的；只是我可以看到这个论点。）

最后，还有整个*接口 jar*的问题。根据定义，它不包含 bean，但我很久以前就看到过 GlassFish 的案例，即使*接口 jar*也必须在其中包含`META-INF/beans.xml`文件。这对我来说似乎是错误的，但令我惊讶的是，我真的无法在规范中找到一个部分来确认或否认这一点。

所以：`beans.xml`无处不在？只在可注射的罐子里？仅在注射目标罐中？或者...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T15:18:14.150

a.) 您需要生产者和 impl jar 中的 beans.xml 标记文件

b.) 您不需要纯接口 jar 上的 beans.xml 标记文件。如果 GlassFish 失败，那么这是一个 gf 错误。虽然它没有任何害处。

# c# - 如何在 C# 中放大和缩小图像？

> ID：10915958
> 
> 赞同：20
> 
> 时间：2012-06-06T14:11:29.213
> 
> 标签：c#, image, resize, picturebox

我想为图像实现缩放。我不想调整[PictureBox](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.picturebox)的大小，而是调整图像本身的大小。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-06T14:15:13.503

One solution is:

1.  Create new image of the desired size (for example 200% or 50% of original image size)
2.  Draw original image to new image using [Graphics.DrawImage(Image, Rectangle);](http://msdn.microsoft.com/en-us/library/yws82c40.aspx), which draws the given image to the new image at the given position with the given size
3.  Set new image as source for the `PictureBox`

Another way is to simple create a new bitmap instance like that:

```
Size newSize = new Size((int)(originalBitmap.Width * zoomFactor), (int)(originalBitmap.Height * zoomFactor));
Bitmap bmp = new Bitmap(originalBitmap, newSize); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-20T20:08:57.750

我使用网络浏览器来实现这一点。

```
//loads the image
myWebBrowser.Navigate(@"C:\myimage.png"); 
```

从那里我使用 SendKeys 放大和缩小

```
myWebBrowser.Select(); //Selects browser.
SendKeys.Send("^{+}"); //Sends the control + key combo, causing the browser to zoom in. Replace the "+" with a "-" to zoom out. 
```

这是一种有点奇怪的方法，但对我来说效果很好。我希望这个对你有用！

# sql-server - 将 scope_identity 传递给存储过程

> ID：10915959
> 
> 赞同：4
> 
> 时间：2012-06-06T14:11:30.847
> 
> 标签：sql-server, tsql, stored-procedures, scope-identity

关于将 a`scope_identity`从子存储过程传递给父存储过程的讨论很多。我有一个相反的场景，即在父存储过程中插入行，我想将标识值传递给子存储过程。

但是，直接将 scope_identity 传递给子过程会在 SQL Server Management Studio 中生成解析错误。

```
create procedure parent
as
begin
   --  insert a record
   exec child scope_identity() -- this does not work
end 
```

但是，使用局部变量可以解决此问题。

```
create procedure parent
as
begin
   --  insert a record
   set @id = scope_identity()
   exec child @id -- this works
end 
```

`scope_identity()`直接作为输入参数传递失败的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:25:57.550

您不能将函数结果作为存储过程参数传递。您需要通过将结果保存到变量然后传递变量来执行后一种方法。

# asp.net-mvc-3 - 条件编译关闭

> ID：10915969
> 
> 赞同：2
> 
> 时间：2012-06-06T14:11:58.207
> 
> 标签：asp.net-mvc-3, razor

我在 Razor 中有代码，`reloadInterva`在产品服务器上 l 始终为 0，在开发服务器上我得到正确的值。还会`@TimeSpan`在智能感知中出现错误，例如**Condition compilation is** closed 。为什么我得到这个错误和零而不是实际值？

```
<script type="text/javascript">
    var reloadInterval = @TimeSpan.FromSeconds(2).TotalMilliseconds;
    setInterval(LoadResultForm, reloadInterval);

    function LoadResultForm() {
        $.ajax({
            url: '@Url.Action("ResultForm", "File")',            
            data: '',
            dataType: 'html',
            success: function (data) {
                $('#ResultForm').html(data);
            }
        });
    };
</script> 
```

# sql - 为什么 CHARINDEX 函数在字符串“manoeuvre”中返回“Œ”的索引？

> ID：10915972
> 
> 赞同：4
> 
> 时间：2012-06-06T14:12:09.190
> 
> 标签：sql, sql-server-2008

我有这个 SQL 代码

```
declare @s varchar(8000) = 'manoeuvre'
select  CHARINDEX(char(140), @s, 0) 
```

char(140) = Œ，在字符串“manoeuvre”中不存在。然而 SQL 服务器返回以下

> 4（表示它已经在这条线上找到了 char(140)）

如果我用 '*' 替换 'Œ' 我得到

> 人* uvre

似乎 SQL 已经用一个字符替换了“o”和“e”，但为什么呢？为什么要用“Œ”替换“oe”？

使用字符串 'mass' 和 'ß' 可以看到相同的效果（我相信这是双 s 的德语）。替换此字符会返回字符串“ma*”。

SQL 是否试图在幕后做一些“聪明”的事情？

编辑额外信息：

SQL 服务器 2008 R2。

数据库的排序规则是 Latin1_General_CI_AS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T14:18:50.383

如果您查找该符号（ASCII 140），它被描述为

> 大写OE连字

例如见[www.table-ascii.com](http://www.table-ascii.com)

尝试

```
select  CHARINDEX(char(140), @s COLLATE Latin1_General_BIN, 0) 
```

这将进行二进制搜索。

# ajax - Extjs 如何记住来自 Ajax 请求的响应？

> ID：10915974
> 
> 赞同：0
> 
> 时间：2012-06-06T14:12:14.047
> 
> 标签：ajax, extjs

我想记住一个ajax请求的响应，我该怎么做？在上面的代码中，我在控制台中找到了“”......我该怎么做？有什么建议吗？

```
 var jsoncolumnset = '';

    Ext.Ajax.request({
        scope: this,
        url: 'index.php',
        params: {
            m: 'Columnset',
            a: 'readDefault'
        },
        reader: {
            type: 'json',
            root: 'rows'
        },
        success: function(response){
            //Passo tutto il json (dovrebbe essere fatto un decode, ma viene gestito da Alfresco)     
            jsoncolumnset = response.responseText;
            this.getStore('Documents').proxy.extraParams.columnset = response.responseText;

        },
        failure: function(){
        //TODO: gestione fallimento chiamata
        }
    });
    console.log(jsoncolumnset); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:39:06.127

Ajax 是异步的，因此当您在 Ext.Ajax.request 调用中启动请求时，在执行 console.log(jsoncolumnset) 时响应还没有返回。

'success' 方法将在服务器响应返回到浏览器时执行，这可能是几毫秒或几秒后 - 无论哪种方式，映射到 'success' 事件的代码都会在 console.log 执行后执行。

因此，由于您拥有“this”范围，因此看起来该片段来自嵌套在某个对象中的代码。.

您可以添加一些与 ajax 完美配合的基于事件的逻辑。这是一个想法：

```
// add this custom event in line with other bindings or in the objects constructor or a controllers init method
this.on('columnsready', this.logColumns);

// add this method to the main object
handleColumnResponse: function () {
    //Passo tutto il json (dovrebbe essere fatto un decode, ma viene gestito da Alfresco)     
    this.jsoncolumnset = response.responseText;
    this.getStore('Documents').proxy.extraParams.columnset = response.responseText;

    // fire the custom event
    this.fireEvent('columnsready');

},

// add this as an example of where you would put more logic to do stuff after columns are setup
logColumns: function () {
    console.log(this.jsoncolumnset);
},

Ext.Ajax.request({
    scope: this,
    url: 'index.php',
    params: {
        m: 'Columnset',
        a: 'readDefault'
    },
    reader: {
        type: 'json',
        root: 'rows'
    },

    // map to the handler method in the main object
    success: this.handleColumnResponse,
    failure: function(){
    //TODO: gestione fallimento chiamata
    }
}); 
```

# actionscript-3 - 使用 AS3 拖放游戏

> ID：10915977
> 
> 赞同：-2
> 
> 时间：2012-06-06T14:12:37.973
> 
> 标签：actionscript-3

```
import flash.events.MouseEvent;
import flash.utils.Timer;
import flash.events.TimerEvent;

var wordArray:Array = [mc_clipA, mc_clipB];
var imgArray:Array = [Aimg, Bimg];
var posArray:Array = [ {x:816.15, y:396.05}, {x:518.3, y:410.05}];

var ClipA:MovieClip;
var ClipB:MovieClip;

var startXpositionClipA:Number;
var startYpositionClipA:Number;
var startXpositionClipB:Number;
var startYpositionClipB:Number;

wordArray[0].buttonMode = true;
wordArray[1].buttonMode = true;

wordArray[0].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipA);
wordArray[1].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipB);

//Mouse Down Function for ClipA
function item_onMouseDownClipA(event:MouseEvent):void {
    ClipA = MovieClip(event.currentTarget);
    startXpositionClipA = ClipA.x;
    startYpositionClipA = ClipA.y;
    addChild(ClipA); 
    ClipA.startDrag();
    stage.addEventListener(MouseEvent.MOUSE_UP, stage_onMouseUpClipA);
    wordArray[0].removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipA);
    wordArray[1].removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipB);
}

//Mouse Up Function for ClipA
function stage_onMouseUpClipA(event:MouseEvent):void {
    stage.removeEventListener(MouseEvent.MOUSE_UP, stage_onMouseUpClipA);
    ClipA.stopDrag();
    var indexClipA:int = wordArray.indexOf(ClipClipA);
    var matchClipClipA:MovieClip = MovieClip(imageArray[indexClipA]);
    if(matchClipClipA.hitTestPoint(ClipA.x, ClipA.y, true)) {
        ClipA.x = positionArray[indexClipA].x;
        ClipA.y = positionArray[indexClipA].y;
        ClipA.removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownZip);
        ClipA.buttonMode = false;
        var tot=0; 
        tot=tot+10;
        score.text="You scored: " + tot +" Points ";
        var setTimer:Timer = new Timer(1000,60);
        setTimer.addEventListener(TimerEvent.TIMER,doTask);
        setTimer.start();
        function doTask(event:TimerEvent) {
        gotoAndStop(1,"Scene 2");
        setTimer.stop();
        }
    } 
    else
    {    
        ClipA.x = startXpositionClipA;
            ClipA.y = startYpositionClipA;
        wordArray[0].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipA);
        wordArray[1].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipB);

    }
}

//Mouse Down Function for ClipB
function item_onMouseDownClipB(event:MouseEvent):void {
    ClipB = MovieClip(event.currentTarget);
    startXpositionClipB = ClipB.x;
    startYpositionClipB = ClipB.y;
    addChild(ClipB); 
    ClipB.startDrag();
    stage.addEventListener(MouseEvent.MOUSE_UP, stage_onMouseUpClipB);
    wordArray[0].removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipA);
    wordArray[1].removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipB);

}

//Mouse Up Function for ClipB
function stage_onMouseUpClipB(event:MouseEvent):void {
    stage.removeEventListener(MouseEvent.MOUSE_UP, stage_onMouseUpClipB);
    ClipB.stopDrag();
    var indexClipB:int = wordArray.indexOf(ClipB);
    var matchClipClipB:MovieClip = MovieClip(imageArray[indexClipB]);
    if(matchClipClipB.hitTestPoint(ClipB.x, ClipB.y, true)) {
        ClipB.x = positionArray3[indexTie].x;
        ClipB.y = positionArray3[indexTie].y;
        ClipB.removeEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipB);
        ClipB.buttonMode = false;
        var tot=0; 
        tot=tot;
        score.text="You scored: " + tot +" Points ";
        var setTimer:Timer = new Timer(1000,60);
        setTimer.addEventListener(TimerEvent.TIMER,doTask);
        setTimer.start();
        function doTask(event:TimerEvent) {
        gotoAndStop(1,"Scene 2");
        setTimer.stop();
        }
    } 
    else
    {    
        ClipB.x = startXpositionClipB;
            ClipB.y = startYpositionClipB;
        wordArray[0].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipA);
        wordArray[1].addEventListener(MouseEvent.MOUSE_DOWN, item_onMouseDownClipB);
    }
} 
```

这是关于拖放游戏。将向用户显示特定对象名称，然后用户必须将正确的图像拖放到指定位置，一旦任务完成，它将动态导航到下一个场景。为此，我使用了计时器类。我在场景 2 中遇到此错误，但在场景 1 中代码运行完美。

命名约定都是正确的，但我仍然收到以下错误，

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Flash.utils::Timer/_timerDispatch() 上的 MethodInfo-1156() 上 flash.utils::Timer/tick()

有人可以帮我弄这个吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T15:15:17.777

在执行鼠标侦听器后立即删除本地声明的方法“doTask”。您应该创建一个匿名内联侦听器

```
 var setTimer:Timer = new Timer(1000,60);
    setTimer.addEventListener(TimerEvent.TIMER, function(event:TimerEvent):void {
      gotoAndStop(1,"Scene 2");
      setTimer.stop();
    });
    setTimer.start(); 
```

有些人喜欢这样做，但我不是内联声明的忠实粉丝。作为听众，我会在我的班级中创建一个真正的方法。

```
private var setTimer:Timer;

function stage_onMouseUpClipB(event:MouseEvent):void {
  ...
  setTimer = new Timer(1000,60);
  setTimer.addEventListener(TimerEvent.TIMER,doTask);
  ...
}

function doTask(event:TimerEvent):void {
  gotoAndStop(1,"Scene 2");
  setTimer.stop();
} 
```

# parsing - 查找文本文档中的所有数字并进行操作

> ID：10915982
> 
> 赞同：0
> 
> 时间：2012-06-06T14:12:58.913
> 
> 标签：parsing, numbers

我有一系列包含以下数据的文本文档：

```
[...]
Please prepare the subject, then press SPACE
We are testing peripheral vision with a black & white stimulus
45 degree stimulus of 0.728097 logMAR presented
Good response
45 degree stimulus of 0.686705 logMAR presented
Bad response
REVERSAL
Acuity at reversal 7 (experiment 3) was 0.686705 logMAR
135 degree stimulus of 0.732462 logMAR presented
Good response
45 degree stimulus of 0.732462 logMAR presented
[...] 
```

换句话说，它的格式没有太多的统一性。这些数据是由我在攻读博士学位时使用的一个例程输出的。愚蠢的是，我的一些计算错误，这意味着我的数字都比应有的低 0.3。

我*可以*浏览所有文本文档并手动调整所有数字，但是有很多文档，每个文档都有很多数字。

任何人都可以建议预先存在的软件或合适的方法（我可以使用 MATLAB、C++、Java 或 Python）来检测文本文档中包含的所有浮点数并将 0.3 添加到它们？

nb 我不一定要寻找涉及我编程任何东西的解决方案，但鉴于这是一个非常定制的问题，我感觉它可能涉及编写一些东西！

感激地收到所有建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T14:30:01.853

这是一个用于完成这项工作的微软引擎的简单 javascript

```
var FSO = WScript.CreateObject("Scripting.FileSystemObject");
var fName = WScript.Arguments(0);
var f = FSO.OpenTextFile(fName, 1);
var fw = FSO.OpenTextFile(fName +".new", 2, true);

while (!f.AtEndOfStream)
    fw.WriteLine(f.ReadLine().replace(/\b\d+\.(\d+)\b/g,
        function($0, $1) {
            return (+$0+0.3).toFixed($1.length);
        }
    ));

f.Close();
fw.Close(); 
```

我假设固定点，没有前导或悬空小数点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:22:13.533

我不知道有什么软件可以做到这一点，但是您的问题可以通过编写 Python 脚本轻松解决。只需提取 X 文档中的所有浮点数，将 0.3 添加到它们，然后将结果输出到新的文本文件。对所有文档执行此操作。检测浮点数的语法可以简单地在网络上找到。希望这可以帮助。

# objective-c - 将 iPhone 应用程序转换为 iPad，然后在 iPad 中使用 splitview？

> ID：10915985
> 
> 赞同：3
> 
> 时间：2012-06-06T14:13:02.150
> 
> 标签：objective-c, ios, uitableview, uisplitviewcontroller

我为 iPhone 制作了一个日记应用程序，我想让它通用（iPhone 和 iPad）。

当应用程序在 iPad 中启动时，我希望它使用拆分视图控制器。

我有两节课。第一个是“Rootviewcontroller”，第二个是“Detailview”控制器。在这两个类中，我都使用导航控制器。在 iPhone 中，当应用程序启动时，rootviewcontroller 是可见的。使用导航控制器，用户可以移动到详细视图。

在 iPad 上，我希望根视图控制器位于拆分视图控制器的左侧，而详细视图位于右侧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T14:38:09.743

如果您查看 Apple 文档，则只需在初始化 UISplitViewController 时分配两个视图控制器。这是 Apple 文档的链接 - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)

这是一个来自我们实际 iOS 应用程序的示例（更改了一些变量名称以使其易于理解）。我们基本上确定设备是否是 iPad，然后构建主导航控制器。

detailNav 是使用“我们项目的详细视图控制器”创建的导航控制器

masterNav 是我们 iPhone 使用的导航控制器。它在 tableView 上启动用户，允许他们选择一个项目以前进到详细视图。

我们将这两个都分配给一个数组并初始化拆分视图控制器。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    UINavigationController *detailNav = [[UINavigationController alloc] initWithRootViewController:detailVC];
    NSArray *vcs = [NSArray arrayWithObjects:masterNav, detailNav, nil];
    UISplitViewController *splitViewController = [[UISplitViewController alloc] init];
    [splitViewController detailVC];
    [splitViewController setViewControllers:vcs];
    [[self window] setRootViewController:splitViewController];
} else {
    [[self window] setRootViewController:masterNav];
} 
```

这很可能不是最佳代码或最佳实践，因为我和我的团队对 iOS 世界还很陌生，但我希望它有所帮助。此代码在生产中的实时应用程序上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T14:34:02.827

这是有关如何执行此操作的苹果文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)

要在 iPad 视图控制器中实现拆分视图，如果要更改拆分视图所在的一侧，可以将其子类化并在右侧重绘它。希望这可以帮助！

# facebook - Facebook 应用程序作为页面选项卡不断给出错误

> ID：10915988
> 
> 赞同：3
> 
> 时间：2012-06-06T14:13:12.050
> 
> 标签：facebook, facebook-page

我正在尝试将标签添加到 Facebook 粉丝页面。

我注册为开发人员，并创建了一个应用程序。在上半部分，我填写了显示名称、命名空间、联系电子邮件，并选择了页面应用程序作为我的类别。

在集成部分，我选择了 Page Tab 部分。填写页面选项卡名称、页面选项卡 URL、安全选项卡 URL 并选择页面选项卡图像。

保存所有内容并记下 App-ID。

但是，当我使用粉丝页面帐户登录 Facebook 并调用 URL [https://www.facebook.com/dialog/pagetab?app_id=MY_APP_ID&next=www.facebook.com](https://www.facebook.com/dialog/pagetab?app_id=MY_APP_ID&next=www.facebook.com)时，我经常收到一条错误消息：“一个DISPLAY_NAME_OF_MY_APP 发生错误。请稍后再试。”

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:33:22.493

Facebook 似乎又做出了改变，并没有通知任何人。下面是一个似乎有效的新链接。只需将 APP-ID 替换为您的应用程序 ID。

[https://www.facebook.com/add.php?api_key=](https://www.facebook.com/add.php?api_key=) {APP-ID}&pages=1

# java - 如何在 Eclipse 中查找哪些方法调用了当前选定的方法？

> ID：10915990
> 
> 赞同：2
> 
> 时间：2012-06-06T14:13:17.247
> 
> 标签：java, eclipse

在 Eclipse 中，当您单击方法名称并按下`F3`按钮时，它会将您带到该方法。

我该如何做相反的事情？我有一个重载的方法（可能有大约 12 个不同的实例），我想快速找到是否从其他任何地方调用了这个特定的方法。

我知道你可以点击方法，按`Ctrl`+ `H`，然后`Method`在`Workspace`. 有没有更简单的键盘快捷键？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T14:14:35.827

单击方法并按`Ctrl`++`Shift`执行`G`搜索`References in Workspace`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:15:50.817

`Ctrl`+`Alt`+`H` opens the Call Hierarchy, which sounds like what you're looking for.

# c# - 动态添加按钮并添加其源代码

> ID：10915993
> 
> 赞同：0
> 
> 时间：2012-06-06T14:13:21.233
> 
> 标签：c#, button, dynamically-generated

问候，

我已经检查了我的问题，但没有得到答案或类似的东西。

所以这是我的问题：

我为我的老板创建了一个咖啡馆收银员软件，它为收银员想要添加到账单/桌子上的每种产品提供了按钮。例如`btnOrangeJuice`，如果在其单击事件中单击按钮，它会调用一个函数，例如名为：`addOrder("Orange Juice");`

在此函数中，它执行简单的以下代码：

a) 它连接到数据库
b) 返回产品“橙汁”的价格，例如 ( `select price from products where product_name = '" + product_parameter + "'"`)
c) 获取结果，并将它的价格添加到订单列表框中，等等。

这里的问题是，（让我们以预览示例为例）每次我们有一个新产品时，我必须通过添加一个 52x52 像素的按钮、名称`btnOrangeJuice`、文本名称“橙汁”来手动自定义表单，并在点击事件上添加调用我的函数`addOrder("Orange Juice")`，然后将我的软件的新版本上传到我的在线虚拟主机，然后从收银员的电脑上更新软件。这对我来说很耗时，尤其是当我们与供应商进行新交易时，所以我想让我的程序动态添加按钮，只需拥有一个表单，输入按钮属性，调用函数，然后添加一个按钮本身及其尺寸，检查其是否超出表单空间，如果是，则在右侧添加按钮，而不是在右侧，

如果您需要有关我的软件/问题的更多详细信息，请询问。

那么你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:17:29.087

标准方法是为每个产品分配一个唯一标识符，并具有一种添加订单的机制，该机制将唯一标识符作为参数。您的产品可能已经具有唯一标识符，因为它们是持久实体（例如数据库主键）。

如果您希望添加按钮具有产品的文本，那么您可以从产品名称中动态设置它，该名称再次已存储在数据库中。无需在您的 UI 代码中复制此信息。

# java - Java Swing - Nimbus L&F 在应用排序后覆盖 JTable 标题中的自定义图标

> ID：10915994
> 
> 赞同：4
> 
> 时间：2012-06-06T14:13:34.670
> 
> 标签：java, swing, jtable, look-and-feel, nimbus

我正在尝试创建一个自定义单元格渲染器，它将在 JTable 的标题单元格中显示图像。我已经获得了使用 Metal L&F 的源代码，但我遇到了 Nimbus 的问题。在正常情况下，Nimbus 显示图像就好了。但是，当对表格进行排序时，Nimbus 将绘制排序图标而不是我指定的图标。这与 Metal L&F 不同，因为它总是会绘制我提供的图标。

![示例图像展示了 Nimbus L&F 与 Metal L&F 中的错误](../Images/1cf7e5a02599c1bd651255a3fb81e1f8.png)

有谁知道即使列已排序也可以让 Nimbus 绘制图像的方法？

我正在使用 Java 6.29 和 Nimbus。我无法更改 Java 版本或 L&F。

此外，我还尝试了一些其他解决方法，例如更改标签以使用 HTML 和 img 标签来显示图像，但这会产生奇怪的视觉效果。编辑 文本和图像没有很好地对齐（即使在 img 标签上有 HTML 对齐标签） 这是一张图片，请注意 Temp Hi 列中的文本如何不对齐：

![带有 HMTL 和 img 标签的解决方案示例图像](../Images/3571fe7c002e15ea11a57e9a99404fa2.png)

```
import java.awt.Component;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;

public class ImageChangeDemo extends JFrame {
    public static void main(String args[]) {
        //comment out the code below to try in Metal L&F
        try {
            for(javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.
                    getInstalledLookAndFeels()) {
                if("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        }
        catch(Exception ex) {
            ex.printStackTrace();
        }

        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ImageChangeDemo().setVisible(true);
            }
        });
    }

    public ImageChangeDemo(){
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        JScrollPane pane = new javax.swing.JScrollPane();
        JTable table = new javax.swing.JTable();
        table.setAutoCreateRowSorter(true);
        table.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {"a", "q", "h", "v"},
                {"b", "m", "l", "h"},
                {"d", "c", "a", "d"},
                {"j", "o", "y", "e"}
            },
            new String [] {
                "Col 1", "Col 2", "Col 3", "Col 4"
            }
        ) {
            Class[] types = new Class [] {
                String.class, String.class, String.class, String.class
            };
            @Override
            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        pane.setViewportView(table);
        this.add(pane);

        table.getTableHeader().setDefaultRenderer(new ImageRenderer(table));

        pack();
    }

    public class ImageRenderer extends DefaultTableCellRenderer{
        TableCellRenderer orig;
        ImageIcon icon;
        ImageRenderer(JTable table){
            orig = table.getTableHeader().getDefaultRenderer();
        }
        @Override
        public Component getTableCellRendererComponent(final JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Component c = 
                    orig.getTableCellRendererComponent(
                        table, value, isSelected, hasFocus, row, column);
            if(c instanceof JLabel){
                if(true){
                    JLabel label = (JLabel)c;
                    label.setIcon(makeIcon());
                }
            }
            return c;
        }

        public ImageIcon makeIcon(){
            if(icon == null)
            icon = new ImageIcon(
                    ImageChangeDemo.class.getResource("/resources/green_triangle_down.png"));
            return icon;
        }
    }
} 
```

编辑：这是我的实际应用程序应该执行的示例场景：如果表列包含某些数据（例如以某个单词开头的任何字符串），则在表标题中的列名旁边显示一个警告图标。我已经让这个工作正常了。现在，如果用户使用图像对列进行排序，Nimbus 将删除图像并将其替换为排序图标 - 我仍然希望显示原始警告图标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T16:18:45.807

*   don't recreate an `Icon` inside `Renderer`, prepare that before, otherwise you'll recreating `Icon` in the crazy periods

*   not to add `Icon` to the `Component / JComponent / JLabel` returns `Renderer`

*   put to the `Renderer`

code made by Darryl or Rob

```
protected Icon getIcon(JTable table, int column) {
    SortKey sortKey = getSortKey(table, column);
    if (sortKey != null && table.convertColumnIndexToView(
        sortKey.getColumn()) == column) {
        switch (sortKey.getSortOrder()) {
            case ASCENDING:
                return UIManager.getIcon("Table.ascendingSortIcon");
            case DESCENDING:
                return UIManager.getIcon("Table.descendingSortIcon");
        }
    }
    return null;
} 
```

EDIT

thank to [Renderer by @trashgod](https://stackoverflow.com/questions/6644739/customizing-jtable-cellrenderer-with-tables-cell-header-color/6644956#6644956), UNSORTED isn't required to override for Renderer, try & enjoy

initial view

![enter image description here](../Images/f83da50d6fd1a380b13b51db833c9d2b.png)

ASCENDING

![enter image description here](../Images/7a8e06f2242f5093de806978d5202525.png)

DESCENDING

![enter image description here](../Images/a7bac1427f2cc0accadae7db36f60794.png)

UNSORTED

![enter image description here](../Images/3beb783deb273199b5b3249aede1f36a.png)

```
import java.awt.Component;
import java.util.ArrayList;
import java.util.List;
import javax.swing.Icon;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.RowSorter;
import javax.swing.SortOrder;
import javax.swing.UIManager;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

public class ImageChangeDemo extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table = new javax.swing.JTable();

    public static void main(String args[]) {
        //comment out the code below to try in Metal L&F
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ImageChangeDemo().setVisible(true);
            }
        });
    }

    public ImageChangeDemo() {
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        JScrollPane pane = new javax.swing.JScrollPane();

        table.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{
                    {"a", "q", "h", "v"},
                    {"b", "m", "l", "h"},
                    {"d", "c", "a", "d"},
                    {"j", "o", "y", "e"}
                },
                new String[]{
                    "Col 1", "Col 2", "Col 3", "Col 4"
                }) {

            private static final long serialVersionUID = 1L;
            Class[] types = new Class[]{
                String.class, String.class, String.class, String.class
            };

            @Override
            public Class getColumnClass(int columnIndex) {
                return types[columnIndex];
            }
        });
        TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(table.getModel()) {

            @Override
            public void toggleSortOrder(int column) {
                if (column >= 0 && column < getModelWrapper().getColumnCount() && isSortable(column)) {
                    List<SortKey> keys = new ArrayList<SortKey>(getSortKeys());
                    if (!keys.isEmpty()) {
                        SortKey sortKey = keys.get(0);
                        if (sortKey.getColumn() == column && sortKey.getSortOrder() == SortOrder.DESCENDING) {
                            setSortKeys(null);
                            return;
                        }
                    }
                }
                super.toggleSortOrder(column);
            }
        };
        table.setRowSorter(sorter);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        table.setDefaultRenderer(ImageChangeDemo.class, new HeaderRenderer(table));
        pane.setViewportView(table);
        add(pane);
        pack();
    }

    class HeaderRenderer implements TableCellRenderer {

       final TableCellRenderer renderer;

        public HeaderRenderer(JTable table) {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        @Override
        public Component getTableCellRendererComponent(
                JTable table, Object value, boolean isSelected,
                boolean hasFocus, int row, int col) {
            return renderer.getTableCellRendererComponent(
                    table, value, isSelected, hasFocus, row, col);
        }

        public Icon getIcon(JTable table, int column) {
            for (RowSorter.SortKey sortKey : table.getRowSorter().getSortKeys()) {
                if (sortKey.getColumn() == column) {
                    switch (sortKey.getSortOrder()) {
                        case ASCENDING:
                            return (UIManager.getIcon("Table.ascendingSortIcon"));
                        case DESCENDING:
                            return (UIManager.getIcon("Table.descendingSortIcon"));
                    }
                }
            }
            return null;
        }
    }
} 
```

EDIT 2

then to set Icon directly to the UIManager

![enter image description here](../Images/c29a92535d072e202d364dd9188c831a.png)

![enter image description here](../Images/7761208ac67b9ae9a866919fa4d088a4.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.List;
import javax.swing.Icon;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.RowSorter.SortKey;
import javax.swing.SortOrder;
import javax.swing.UIManager;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;

public class ImageChangeDemo extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table = new javax.swing.JTable();

    public static void main(String args[]) {
        //comment out the code below to try in Metal L&F
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    UIManager.getLookAndFeelDefaults().put("Table.ascendingSortIcon", new BevelArrowIcon(BevelArrowIcon.UP, false, false));
                    UIManager.getLookAndFeelDefaults().put("Table.descendingSortIcon", new BevelArrowIcon(BevelArrowIcon.DOWN, false, false));
                    break;
                }
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ImageChangeDemo().setVisible(true);
            }
        });
    }

    public ImageChangeDemo() {
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        JScrollPane pane = new javax.swing.JScrollPane();
        //table.setAutoCreateRowSorter(true);
        table.setModel(new javax.swing.table.DefaultTableModel(
                new Object[][]{
                    {"a", "q", "h", "v"},
                    {"b", "m", "l", "h"},
                    {"d", "c", "a", "d"},
                    {"j", "o", "y", "e"}
                },
                new String[]{
                    "Col 1", "Col 2", "Col 3", "Col 4"
                }) {

            private static final long serialVersionUID = 1L;
            Class[] types = new Class[]{
                String.class, String.class, String.class, String.class
            };

            @Override
            public Class getColumnClass(int columnIndex) {
                return types[columnIndex];
            }
        });
        TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(table.getModel()) {

            @Override
            public void toggleSortOrder(int column) {
                if (column >= 0 && column < getModelWrapper().getColumnCount() && isSortable(column)) {
                    List<SortKey> keys = new ArrayList<SortKey>(getSortKeys());
                    if (!keys.isEmpty()) {

                        SortKey sortKey = keys.get(0);
                        if (sortKey.getColumn() == column && sortKey.getSortOrder() == SortOrder.DESCENDING) {
                            setSortKeys(null);
                            return;
                        }
                    }
                }
                super.toggleSortOrder(column);
            }
        };
        table.setRowSorter(sorter);
        //table.getTableHeader().setDefaultRenderer(new DefaultTableHeaderCellRenderer());
        //table.setDefaultRenderer(ImageChangeDemo.class, new HeaderRenderer(table));
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        pane.setViewportView(table);
        add(pane);
        pack();
    }

   static class BevelArrowIcon implements Icon {

        public static final int UP = 0;         // direction
        public static final int DOWN = 1;
        private static final int DEFAULT_SIZE = 11;
        private Color edge1;
        private Color edge2;
        private Color fill;
        private int size;
        private int direction;

        public BevelArrowIcon(int direction, boolean isRaisedView, boolean isPressedView) {
            if (isRaisedView) {
                if (isPressedView) {
                    init(UIManager.getColor("controlLtHighlight"), UIManager.getColor("controlDkShadow"), UIManager.getColor("controlShadow"), DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlHighlight"), UIManager.getColor("controlShadow"), UIManager.getColor("control"), DEFAULT_SIZE, direction);
                }
            } else {
                if (isPressedView) {
                    init(UIManager.getColor("controlDkShadow"), UIManager.getColor("controlLtHighlight"), UIManager.getColor("controlShadow"), DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlShadow"), UIManager.getColor("controlHighlight"), UIManager.getColor("control"), DEFAULT_SIZE, direction);
                }
            }
        }

        public BevelArrowIcon(Color edge1, Color edge2, Color fill, int size, int direction) {
            init(edge1, edge2, fill, size, direction);
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            switch (direction) {
                case DOWN:
                    drawDownArrow(g, x, y);
                    break;
                case UP:
                    drawUpArrow(g, x, y);
                    break;
            }
        }

        @Override
        public int getIconWidth() {
            return size;
        }

        @Override
        public int getIconHeight() {
            return size;
        }

        private void init(Color edge1, Color edge2, Color fill, int size, int direction) {
            edge1 = Color.red;
            edge2 = Color.blue;
            this.edge1 = edge1;
            this.edge2 = edge2;
            this.fill = fill;
            this.size = size;
            this.direction = direction;
        }

        private void drawDownArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            g.drawLine(xo, yo, xo + size - 1, yo);
            g.drawLine(xo, yo + 1, xo + size - 3, yo + 1);
            g.setColor(edge2);
            g.drawLine(xo + size - 2, yo + 1, xo + size - 1, yo + 1);
            int x = xo + 1;
            int y = yo + 2;
            int dx = size - 6;
            while (y + 1 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x += 1;
                y += 2;
                dx -= 2;
            }
            g.setColor(edge1);
            g.drawLine(xo + (size / 2), yo + size - 1, xo + (size / 2), yo + size - 1);
        }

        private void drawUpArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            int x = xo + (size / 2);
            g.drawLine(x, yo, x, yo);
            x--;
            int y = yo + 1;
            int dx = 0;
            while (y + 3 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x -= 1;
                y += 2;
                dx += 2;
            }
            g.setColor(edge1);
            g.drawLine(xo, yo + size - 3, xo + 1, yo + size - 3);
            g.setColor(edge2);
            g.drawLine(xo + 2, yo + size - 2, xo + size - 1, yo + size - 2);
            g.drawLine(xo, yo + size - 1, xo + size, yo + size - 1);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:26:43.270

因此，经过多次试验和错误，即使列已排序，我也能够找到一种在标题行中显示自定义图标的方法。基本上我所做的是让渲染器返回一个自定义面板，其中包含 2 个子级、JLabel 中的图像和最初由默认渲染器生成的组件。（请注意，此解决方法仅对 Nimbus L&F 是必需的，原始示例代码在 Metal L&F 中运行良好）

此代码使用`StackLayout`由 Romain Guy 创建，如他的《*肮脏的富客户端*》一书中所示 - 请参阅第 245 页。[这里是来源`StackLayout`](http://www.java.net/download/javadesktop/filthyrichclients/frc-chapter10.zip)

这是我为渲染器创建的代码。确保下载 StackLayout 否则无法编译。

```
import java.awt.Component;
import java.awt.Dimension;
import java.awt.FontMetrics;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;

public class ImageChangeDemo extends JFrame {
    public static void main(String args[]) {
        //comment out the code below to try in Metal L&F
        try {
            for(javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.
                    getInstalledLookAndFeels()) {
                if("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        }
        catch(Exception ex) {
            ex.printStackTrace();
        }

        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ImageChangeDemo().setVisible(true);
            }
        });
    }

    public ImageChangeDemo(){
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        JScrollPane pane = new javax.swing.JScrollPane();
        JTable table = new javax.swing.JTable();
        table.setAutoCreateRowSorter(true);
        table.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {"a", "q", "h", "v"},
                {"b", "m", "l", "h"},
                {"d", "c", "a", "d"},
                {"j", "o", "y", "e"}
            },
            new String [] {
                "Col 1", "Col 2", "Col 3", "Col 4"
            }
        ) {
            Class[] types = new Class [] {
                String.class, String.class, String.class, String.class
            };
            @Override
            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }
        });
        pane.setViewportView(table);
        this.add(pane);

        pack();
        //set renderer after pack so header row has correct default height
        table.getTableHeader().setDefaultRenderer(new ImageRenderer(table));

    }

    public class ImageRenderer extends DefaultTableCellRenderer{
        TableCellRenderer orig;
        private final ImageIcon icon = new ImageIcon(
                    ImageChangeDemo.class.getResource("/resources/exclamation-icon.png"));;
        private JPanel jp = new JPanel(new StackLayout());
        private final JLabel pic = new JLabel(icon);
        { //extra initialization for PIC
            pic.setHorizontalAlignment(JLabel.LEADING); //so it isn't centered in stack layout
        }

        ImageRenderer(JTable table){
            orig = table.getTableHeader().getDefaultRenderer();
        }

        @Override
        public Component getTableCellRendererComponent(final JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            Component c = 
                    orig.getTableCellRendererComponent(
                        table, value, isSelected, hasFocus, row, column);
            if(true){
                int width  = table.getColumnModel().getColumn(column).getWidth();
                int height = table.getTableHeader().getSize().height;
                System.out.println("height"+height);

                jp.removeAll();                //clean the JPanel

                //move text in label to the left so it isn't covered by the icon
                if(c instanceof JLabel){
                    JLabel l = (JLabel) c;
                    l.setPreferredSize(new Dimension(width, height));

                    FontMetrics fontMetrics = l.getFontMetrics(l.getFont());
                    int sizeOfSpace = fontMetrics.charWidth(' ');
                    int numSpaces = (int)Math.round(icon.getIconWidth() / (double)sizeOfSpace);
                    StringBuilder sb = new StringBuilder();
                    for(int i = 0; i < numSpaces; i++)
                        sb.append(' ');

                    //account for HTML in header messages
                    if(l.getText().toLowerCase().startsWith("<html>")){
                        l.setText(  l.getText().substring(0, "<html>".length()) +
                                    sb.toString() +
                                    l.getText().substring("<html>".length()));
                    }
                    else
                        l.setText(sb.toString()+l.getText());
                }

                //Add components to the JPanel & return it.
                jp.add(c, StackLayout.BOTTOM);  //will contain modifications for spacing.
                jp.add(pic, StackLayout.TOP);
                return jp;

            }
            else
                return c;
        }
    }
} 
```