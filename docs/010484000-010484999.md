# StackOverflow 问答 10484000-10484999

# java - GWT Editor Framework，如何实现编辑器的有效复用

> ID：10484003
> 
> 赞同：0
> 
> 时间：2012-05-07T14:39:06.860
> 
> 标签：java, gwt, gwt-editors

在许多情况下，我有相同的面板来编辑不同 DTO 共有的一组属性。所以我希望这个面板只定义一次并重用，所以我为其中一个想出了以下实现：

```
public class IdentificationPanel<M> extends Panel implements Editor<M> {

   BusinessUnitField businessUnit;

   OperationCodeField operationCode;

   OperationNumber operationNumber;

   ...........
} 
```

因此，我将根据需要编辑的模型使用具有不同 DTO 的 IdentificationPanel。例如我有：

```
public class ExampleTrans01 extends ModelDTO {

    private ExampleTrans01Header header;

    .......
}

public class ExampleTrans02 extends ModelDTO {

   private ExampleTrans02Header header;

   .....
}

public class ExampleTrans01Header extends ModelDTO {
   private Integer businessUnit;

   private String operationCode;

   private Long operationNumber;

   .......
   // Setters & Getters
}

public class ExampleTrans02Header extends ModelDTO {
   private Integer businessUnit;

   private String operationCode;

   private Long operationNumber;

   .......
   // Setters & Getters
} 
```

因此，在我需要编辑的 2 个类的编辑器的实现中，我将拥有：

```
public class ExampleTrans01Editor extends Panel implements Editor<ExampleTrans01> {

   @Path("header")
   IdentificationPanel<ExampleTrans01Header> identification;

   .......
}

public class ExampleTrans02Editor extends Panel implements Editor<ExampleTrans02> {

   @Path("header")
   IdentificationPanel<ExampleTrans02Header> identification;

   ........
} 
```

当我尝试编译它时，GWT 抱怨，因为它说在生成委托时没有以类 ExampleTrans02Header 作为父类的 IdentificationPanel_businessUnit_Context 类的构造函数。

我知道我可以通过扩展 IdentificationPanel 来解决这个问题，比如：

```
public class ExampleTrans01Identification extends IdentificationPanel<ExampleTrans01Header> {
    // Nothing interesting to do here
}

public class ExampleTrans02Identification extends IdentificationPanel<ExampleTrans02Header> {
   // Nothing interesting to do here
} 
```

然后使用这些类而不是参数化的类，但该解决方案似乎有点讨厌，因为这些类不会有任何其他用途。

那么问题来了，有没有其他的方式来实现这个案例呢？我想知道这应该是一个非常常见的用例，但我找不到太多关于它的信息。

在旁注中，我可能会说我是编辑器框架的新手，所以也许我解释错了，如果你能把我引向正确的方向，我将不胜感激。

问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:03:02.157

这是一个已知问题，没有其他已知的解决方法。

[http://code.google.com/p/google-web-toolkit/issues/detail?id=6016](http://code.google.com/p/google-web-toolkit/issues/detail?id=6016)

# c - c函数链接可能吗？

> ID：10484005
> 
> 赞同：1
> 
> 时间：2012-05-07T14:39:27.297
> 
> 标签：c

我想知道是否可以在 C (89/90) 中链接函数调用，以及它在[C 规范](http://flash-gordon.me.uk/ansi.c.txt)中定义的位置。我认为这是不可能的，因为谷歌搜索没有提到它。

我之所以想到这一点，是因为与我的一位朋友进行了一次相关的对话，他告诉我，给定一个返回结构的函数，您不能在同一语句中对所述结构执行任何操作；相反，您必须将函数的结果分配给变量，然后通过变量而不是直接从函数结果本身来操作结构。这让我相信你也不能链接函数，但我似乎找不到规范中讨论的这些限制。

编辑：对不起，我应该具体说明返回值。假设函数返回一个函数指针，是否可以在同一语句中以流畅的方式取消引用和调用结果？

例如，假设`getFunc`返回一个函数指针：

```
(*getFunc(getFuncParam))(otherFuncParam) 
```

或者在这种`struct`情况下，假设 a`struct`有一个`int`名为 的成员`count`：

```
funcReturnsStruct(param).count++ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:40:33.377

以下是 C 语言中的函数链接：

```
post_process(process(pre_process(data))); 
```

显然，你的朋友错了。只要函数通过接受和返回相同类型的值进行合作，您就可以随意链接调用。

将此与类似的东西进行对比

```
data.pre_process().process().post_process(); 
```

最大的区别在于，在 C（没有封装，因此没有类）中，*函数*处于中心位置，而在更现代的 OO 语言中，*对象*受到更多关注。

**更新：**当然，无论每个函数可能返回什么，都可以链接。例如：

```
int increase(int x) {
    return x + 1;
}

typedef int (*increase_fp)(int);

increase_fp get_increase() {
    return increase;
}

int main(void) {
    printf("%d", get_increase()(1));
    return 0;
} 
```

[**看到它在行动**](http://ideone.com/oAl2b)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:56:05.750

> 我的一个朋友告诉我，给定一个返回结构的函数，您不能在同一语句中对所述结构执行任何操作

你的朋友是正确的，因为函数的返回值不能成为赋值的目标（它不是左值）。IOW，你不能做类似的事情

```
int foo(void) { int x = 5; return x; }
...
foo() = 6; 
```

但是，如果函数的返回类型是结构或联合，*则可以*将组件选择运算符应用于返回值，例如

```
int x = foo().memb; 
```

类似地，如果函数的返回类型是一个指向结构体或联合体的指针，你可以这样写

```
int x = foo()->memb; 
```

如果返回值是指向另一个函数的指针，您可以像这样调用另一个函数：

```
int bar(int x) { ... }
int (*foo)(int x) { return bar; }
int x = foo(x)(y); // or (*foo(x))(y) -- the result of foo(x) is 
                   // called with the argument y 
```

尽管必须维护或调试您的代码的任何人都可能会因此而严厉打击您。

你*不能*做的是

```
foo().memb= ...;
foo()->memb = ...; 
```

这无论如何都没有意义，因为`foo`语句结束时返回的值的生命周期结束 - 您将无法检索该修改后的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T14:56:42.340

你朋友错了。

如果我们有：

```
struct Point3
{
   float x, y, z;
};

const Point3 * point3_get_origin(void); 
```

那么你当然可以这样做：

```
printf("the origin's y coordinate is %f\n", point3_get_origin()->y); 
```

该函数返回给定类型的值，因此可以在表达式中需要此类值的任何地方使用该函数的调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T14:46:41.550

你的意思是这样的吗？

```
typedef void (*CALLBACK)(void);

CALLBACK getCallback();

void test()
{
    getCallback()();
} 
```

它在 GCC 4.6.1（默认标准）中编译时没有警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T14:56:22.433

有一种比在这里发帖更快、更简单的方法来回答这个问题：试试看。

```
#include <stdio.h>

struct s {
        int a;
} s;

struct s * getS() {
        s.a = 13;
        return &s;
}

int main(int argc, char * const argv[]) {
        printf("%d\n", getS()->a);
        return 0;
} 
```

```
% gcc test.c -o test -Wall -pedantic
% ./test
13
% 
```

与其说是迂腐的警告。预期输出。看起来完全没问题。但是，正如已经指出的那样，最好存储返回值并检查错误。

# wpf - WPF：编辑后如何将单元格数据网格的值传递给文本框

> ID：10484011
> 
> 赞同：0
> 
> 时间：2012-05-07T14:39:44.477
> 
> 标签：wpf, datagrid, textbox, cells

我有一个带有数据网格和一些文本框的 WPF 视图（我使用 MVVM 模式），每个文本框都有数据网格的一个单元格的信息。

我想知道，如果我在 dataGrid 中编辑一个单元格，将新值传递给 textBox，以使 textBox 与 dataGrid 同步。

我尝试了 CellEditEnding 事件，但此时，我有旧值。

如何将新值传递给文本框？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:56:08.610

只要数据网格中的值发生更改，您就可以使用 SelectionChanged 事件来更新文本框的值。

```
private void dataGrid1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    textBox1.Text = "test";
} 
```

并且您指定应该将哪个单元格的值放置在文本框中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:05:56.547

最简单的方法是将 TextBox 绑定到 Cell 并让绑定进行刷新。为此，您必须将每个 Cell 的 UpdateSourceTrigger 设置为 PropertyChanged。[看这里](http://mikestedman.blogspot.de/2010/09/updatesourcetrigger-in-datagrid.html)

# c# - VS2010中如何将资源文件归类到一个文件夹中？

> ID：10484013
> 
> 赞同：0
> 
> 时间：2012-05-07T14:39:58.923
> 
> 标签：c#, visual-studio-2010, windows-phone-7

环境：Visual Studio 2010 for Windows Phone

我有很多资源文件(*.resx)。我用它们来翻译我的应用程序。我创建了一个名为“Localized”的新文件夹，我将所有 resx 文件放入新文件夹中，但它不起作用。

如何将它们分类到一个文件夹中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:45:40.103

在不知道什么“不起作用”的情况下，这有点像猜谜游戏。我怀疑资源文件名可能未遵循正确的命名约定，其中：

> 每个资源文件必须包含正确的文化/语言名称，如[Windows Phone 的文化和语言支持中](http://msdn.microsoft.com/en-us/library/hh202918%28v=vs.92%29.aspx)所述。
> 
> 例如：
> 
> *   对于区域性西班牙语（西班牙），请使用 AppResources.es-ES.resx。
> *   对于文化 German（德国），请使用 AppResources.de-DE.resx。

**其他资源**

*   [如何：为 Windows Phone 构建本地化应用程序](http://msdn.microsoft.com/en-us/library/ff637520%28v=vs.92%29.aspx)
*   [逐步本地化 Windows Phone 应用程序](http://www.windowsphonegeek.com/articles/Localizing-a-Windows-Phone-app-Step-by-Step)
*   [使用资源文件的 WP7 应用程序中的本地化和全球化](http://codeblog.theg2.net/2010/09/localization-and-globalization-in-wp7.html)

# c++ - G++/MSVC++2008 在矩阵实现中调用 inner_product() 的区别

> ID：10484015
> 
> 赞同：2
> 
> 时间：2012-05-07T14:40:03.260
> 
> 标签：c++, visual-c++

我想为一个奇怪的问题寻求帮助。对于从网上获得的关于矩阵的代码，我可以在 g++ 上编译和运行，但无法在 VC++ 2008 上构建。来自 vc++ 的构建错误是

```
------ Build started: Project: Matrix, Configuration: Debug Win32 ------
Compiling...Matrix.cpp

c:\matrix\matrix\matrix.cpp(260) : warning C4996: 'std::inner_product': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'

c:\program files (x86)\microsoft visual studio 9.0\vc\include\numeric(103) : see    declaration of 'std::inner_product'
c:\matrix\matrix\matrix.cpp(275) : warning C4996: 'std::inner_product': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'

c:\program files (x86)\microsoft visual studio 9.0\vc\include\numeric(103) : see declaration of 'std::inner_product'

c:\matrix\matrix\matrix.cpp(288) : warning C4018: '<' : signed/unsigned mismatch

c:\matrix\matrix\matrix.cpp(290) : warning C4018: '<' : signed/unsigned mismatch

c:\matrix\matrix\matrix.cpp(346) : warning C4018: '<' : signed/unsigned mismatch

c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility(1598) : error C2665: 'std::_Debug_range2' : none of the 2 overloads could convert all the argument types

c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility(1577): 
    could be 'void std::_Debug_range2<_InIt>(_InIt,_InIt,const wchar_t *,unsigned 
    int,std::input_iterator_tag)'
    with
    [
        _InIt=Cslice_iter<double>
    ]
    c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility(1583):      
    or       'void std::_Debug_range2<_InIt>(_RanIt,_RanIt,const wchar_t *,unsigned 
    int,std::random_access_iterator_tag)'
    with
    [
        _InIt=Cslice_iter<double>,
        _RanIt=Cslice_iter<double>
    ]
    while trying to match the argument list '(Cslice_iter<T>, Cslice_iter<T>, const wchar_t *, unsigned int, double)'
    with
    [
        T=double
    ]
    c:\program files (x86)\microsoft visual studio 9.0\vc\include\numeric(63) : see reference to function template instantiation 'void std::_Debug_range<_InIt1>(_InIt,_InIt,const wchar_t *,unsigned int)' being compiled
    with
    [
        _InIt1=Cslice_iter<double>,
        _InIt=Cslice_iter<double>
    ]
    c:\program files (x86)\microsoft visual studio 9.0\vc\include\numeric(106) : see reference to function template instantiation '_Ty std::_Inner_product<Cslice_iter<T>,_InIt2,_Ty,std::_Iter_random_helper<_Cat1,_Cat2>::_Iter_random_cat>(_InIt1,_InIt1,_InIt2,_Ty,_InItCats,std::_Range_checked_iterator_tag)' being compiled
    with
    [
        _Ty=double,
        T=double,
        _InIt2=double *,
        _Cat1=double,
        _Cat2=std::random_access_iterator_tag,
        _InIt1=Cslice_iter<double>,
        _InItCats=std::_Iter_random_helper<double,std::random_access_iterator_tag>::_Iter_random_cat
    ]
    c:\matrix\matrix\matrix.cpp(260) : see reference to function template instantiation 'double std::inner_product<Cslice_iter<T>,_Ty*,double>(_InIt1,_InIt1,_InIt2,_Ty)' being compiled
    with
    [
        T=double,
        _Ty=double,
        _InIt1=Cslice_iter<double>,
        _InIt2=double *
    ]
Build log was saved at "file://c:\Matrix\Matrix\Debug\BuildLog.htm"
Matrix - 1 error(s), 5 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

非常感谢任何帮助。

非常感谢。

```
// Program to test slices and a simple N*M matrix class

#include<iostream>
#include<valarray>
#include<algorithm>
#include<numeric>   // for inner_product
using namespace std;

// forward declarations to allow friend declarations:
template<class T> class Slice_iter;
template<class T> bool operator==(const Slice_iter<T>&, const Slice_iter<T>&);
template<class T> bool operator!=(const Slice_iter<T>&, const Slice_iter<T>&);
template<class T> bool operator< (const Slice_iter<T>&, const Slice_iter<T>&);

template<class T> class Slice_iter {
valarray<T>* v;
slice s;
size_t curr;    // index of current element

T& ref(size_t i) const { return (*v)[s.start()+i*s.stride()]; }
public:
Slice_iter(valarray<T>* vv, slice ss) :v(vv), s(ss), curr(0) { }

Slice_iter end() const
{
    Slice_iter t = *this;
    t.curr = s.size();  // index of last-plus-one element
    return t;
}

Slice_iter& operator++() { curr++; return *this; }
Slice_iter operator++(int) { Slice_iter t = *this; curr++; return t; }

T& operator[](size_t i) { return ref(i); }      // C style subscript
T& operator()(size_t i) { return ref(i); }      // Fortran-style subscript
T& operator*() { return ref(curr); }            // current element

friend bool operator==<>(const Slice_iter& p, const Slice_iter& q);
friend bool operator!=<>(const Slice_iter& p, const Slice_iter& q);
friend bool operator< <>(const Slice_iter& p, const Slice_iter& q);

};

template<class T>
bool operator==(const Slice_iter<T>& p, const Slice_iter<T>& q)
{
return p.curr==q.curr
    && p.s.stride()==q.s.stride()
    && p.s.start()==q.s.start();
}

template<class T>
bool operator!=(const Slice_iter<T>& p, const Slice_iter<T>& q)
{
return !(p==q);
}

template<class T>
bool operator<(const Slice_iter<T>& p, const Slice_iter<T>& q)
{
return p.curr<q.curr
    && p.s.stride()==q.s.stride()
    && p.s.start()==q.s.start();
}

//-------------------------------------------------------------

// forward declarations to allow friend declarations:
template<class T> class Cslice_iter;
template<class T> bool operator==(const Cslice_iter<T>&, const Cslice_iter<T>&);
template<class T> bool operator!=(const Cslice_iter<T>&, const Cslice_iter<T>&);
template<class T> bool operator< (const Cslice_iter<T>&, const Cslice_iter<T>&);

template<class T> class Cslice_iter
{
valarray<T>* v;
slice s;
size_t curr; // index of current element
const T& ref(size_t i) const { return (*v)[s.start()+i*s.stride()]; }
public:
Cslice_iter(valarray<T>* vv, slice ss): v(vv), s(ss), curr(0){}
//typedef T        iterator_category; //I added these defs, otherwise more compile errors on vc++
//typedef T        value_type;        //after I uncomment these, build only fails at call inner_product     
//typedef T*       iterator;          //and transform calls.
//typedef const T* const_iterator;
//typedef T&       reference;
//typedef const T& const_reference;
//typedef T*       pointer;
//typedef std::size_t    size_type;
typedef std::ptrdiff_t difference_type;

Cslice_iter end() const
{
    Cslice_iter t = *this;
    t.curr = s.size(); // index of one plus last element
    return t;
}
Cslice_iter& operator++() { curr++; return *this; }
Cslice_iter operator++(int) { Cslice_iter t = *this; curr++; return t; }

const T& operator[](size_t i) const { return ref(i); }
const T& operator()(size_t i) const { return ref(i); }
const T& operator*() const { return ref(curr); }

friend bool operator==<>(const Cslice_iter& p, const Cslice_iter& q);
friend bool operator!=<>(const Cslice_iter& p, const Cslice_iter& q);
friend bool operator< <>(const Cslice_iter& p, const Cslice_iter& q);

};

template<class T>
bool operator==(const Cslice_iter<T>& p, const Cslice_iter<T>& q)
{
return p.curr==q.curr
    && p.s.stride()==q.s.stride()
    && p.s.start()==q.s.start();
}

template<class T>
bool operator!=(const Cslice_iter<T>& p, const Cslice_iter<T>& q)
{
return !(p==q);
}

template<class T>
bool operator<(const Cslice_iter<T>& p, const Cslice_iter<T>& q)
{
return p.curr<q.curr
    && p.s.stride()==q.s.stride()
    && p.s.start()==q.s.start();
}

//-------------------------------------------------------------

class Matrix {
valarray<double>* v;    // stores elements by column as described in 22.4.5
size_t d1, d2;  // d1 == number of columns, d2 == number of rows
public:
Matrix(size_t x, size_t y);     // note: no default constructor
Matrix(const Matrix&);
Matrix& operator=(const Matrix&);
~Matrix();

size_t size() const { return d1*d2; }
size_t dim1() const { return d1; }
size_t dim2() const { return d2; }

Slice_iter<double> row(size_t i);
Cslice_iter<double> row(size_t i) const;

Slice_iter<double> column(size_t i);
Cslice_iter<double> column(size_t i) const;

double& operator()(size_t x, size_t y); // Fortran-style subscripts
double operator()(size_t x, size_t y) const;

Slice_iter<double> operator()(size_t i) { return column(i); }
Cslice_iter<double> operator()(size_t i) const { return column(i); }

Slice_iter<double> operator[](size_t i) { return column(i); }// C-style subscript
Cslice_iter<double> operator[](size_t i) const { return column(i); }

Matrix& operator*=(double);

valarray<double>& array() { return *v; }
};

inline Slice_iter<double> Matrix::row(size_t i)
{
return Slice_iter<double>(v,slice(i,d1,d2));
}

inline Cslice_iter<double> Matrix::row(size_t i) const
{
return Cslice_iter<double>(v,slice(i,d1,d2));
}

inline Slice_iter<double> Matrix::column(size_t i)
{
return Slice_iter<double>(v,slice(i*d2,d2,1));
}

inline Cslice_iter<double> Matrix::column(size_t i) const
{
return Cslice_iter<double>(v,slice(i*d2,d2,1));
}

Matrix::Matrix(size_t x, size_t y)
{
// check that x and y are sensible
d1 = x;
d2 = y;
v = new valarray<double>(x*y);
}

Matrix::~Matrix()
{
delete v;
}

double& Matrix::operator()(size_t x, size_t y)
{
return column(x)[y];
}

//-------------------------------------------------------------

double mul(const Cslice_iter<double>& v1, const valarray<double>& v2)
{
double res = 0;
for (size_t i = 0; i<v2.size(); i++) res+= v1[i]*v2[i];
return res;
}

valarray<double> operator*(const Matrix& m, const valarray<double>& v)
{
if (m.dim1()!=v.size()) cerr << "wrong number of elements in m*v\n";

valarray<double> res(m.dim2());
for (size_t i = 0; i<m.dim2(); i++) res[i] = mul(m.row(i),v);
return res;
}

// alternative definition of m*v

//valarray<double> operator*(const Matrix& m, valarray<double>& v)
valarray<double> mul_mv(const Matrix& m, valarray<double>& v)
{
if (m.dim1()!=v.size()) cerr << "wrong number of elements in m*v\n";

valarray<double> res(m.dim2());

for (size_t i = 0; i<m.dim2(); i++) {
    const Cslice_iter<double>& ri = m.row(i);
    res[i] = inner_product(ri,ri.end(),&v[0],double(0));
}
return res;
}

valarray<double> operator*(valarray<double>& v, const Matrix& m)
{
if (v.size()!=m.dim2()) cerr << "wrong number of elements in v*m\n";

valarray<double> res(m.dim1());

for (size_t i = 0; i<m.dim1(); i++) {
    const Cslice_iter<double>& ci = m.column(i);
    res[i] = inner_product(ci,ci.end(),&v[0],double(0));
}
return res;
}

Matrix& Matrix::operator*=(double d)
{
(*v) *= d;
return *this;
}

ostream& operator<<(ostream& os, Matrix& m)
{
for(int y=0; y<m.dim2(); y++)
{
    for(int x=0; x<m.dim1(); x++)
        os<<m[x][y]<<"\t";
    os << "\n";
}
return os;
}

//-------------------------------------------------------------

void f (int x_max, int y_max)   // test layout and basic access
{
cout << "\nf(" << x_max <<"," << y_max << "):\n";

Matrix a(x_max, y_max);

for(int x=0; x<x_max; x++)      // initialize
    for(int y=0; y<y_max; y++)
        a[x][y]=x+y*10;

cout<<"C-style access used to initialize:\n" << a;

for(int x=0; x<x_max; x++)
    for(int y=0; y<y_max; y++)
        a(x,y)=x+y*10;

cout <<"Fortran-style access used to initialize:\n" << a;

cout << "addresses: \n";

for(int x=0; x<x_max; x++)
    for(int y=0; y<y_max; y++)
        cout<<"("<< x<<","<<y<<") at "<<&a[x][y]-&a[0][0]<<"\n";
cout <<"columns :\n";

for(int x=0; x<x_max; x++) {
    cout << "column " << x << ":\n";
    for (Slice_iter<double> c = a.column(x); c!=c.end(); ++c)
        cout << "\t" << *c <<"\n";
}

cout <<"rows :\n";

for(int y=0; y<y_max; y++) {
    cout << "row " << y << ":";
    for(Slice_iter<double> r = a.row(y); r!=r.end(); ++r)
        cout << "\t" << *r ;
    cout <<"\n";
}

}

ostream& operator<<(ostream& os, const valarray<double>& v)
{
for (int i = 0; i<v.size(); ++i) os << '\t' << v[i];
return os;
}

void g(int x_max,int y_max) // check multiplication
{
cout << "\ng(" << x_max <<"," << y_max << "):\n";

Matrix a(x_max,y_max);

for(int x=0; x<x_max; x++)      // initialize
    for(int y=0; y<y_max; y++)
        a[x][y]=x+y*10;

valarray<double> r(2,x_max);
cout << "a*v: " << a*r << endl;
cout << "m*v: " << mul_mv(a,r) << endl;

valarray<double> c(2,y_max);
cout << "v*a: " << c*a << endl;

}

int main()
{
f(3,4);
f(4,3);

g(3,4);
g(4,3);
}

//main for vc++
/*int _tmain(int argc, _TCHAR* argv[])
{
f(3,4);
f(4,3);

g(3,4);
g(4,3);

return 0;
}*/

// the stdafx.h from vc++
// stdafx.h : include file for standard system include files,
// or project specific include files that are used frequently, but
// are changed infrequently
//

/*#pragma once

#include "targetver.h"

#include <stdio.h>
#include <tchar.h>
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:03:38.537

我相信该库试图通过查找行为良好的迭代器应包含的嵌套 typedef 来确定您的迭代器是 input_iterator 还是 random_access_iterator。具体来说`iterator_category`。

该标准建议继承自`std::iterator`以获得适当的定义。

> **24.4.2 基本迭代器**
> 模板`iterator`可以用作基类来简化新迭代器所需类型的定义。

```
namespace std {

    template<class Category, class T, class Distance = ptrdiff_t,
             class Pointer = T*, class Reference = T&>
    struct iterator {
        typedef T value_type;

        typedef Distance difference_type;

        typedef Pointer pointer;

        typedef Reference reference;

        typedef Category iterator_category;

    };

} 
```

或者您可以将同一组 typedef 添加到现有类中。

# php - Kohana 日期警告消息

> ID：10484018
> 
> 赞同：0
> 
> 时间：2012-05-07T14:40:32.637
> 
> 标签：php, database, kohana

我的站点管理面板通过 Kohana 编码。当点击 Corporate->Add New 时，出现问题：

```
An error was detected which prevented the loading of this page. If this problem persists, please contact the website administrator.

panel/application/controllers/admin/corporate/news.php [82]:

date() [function.date]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Europe/Helsinki' for 'EEST/3.0/DST' instead 
```

和堆栈跟踪：

```
panel/application/controllers/admin/corporate/news.php [82]:

date( Y-m-d, 1336401401 )

News_Controller->add(  ) 
```

82.行：

```
$dbForm->date->value = date('Y-m-d',time()); 
```

什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:14:42.417

在您的 bootstrap.php 中，您是否注释掉了您设置的默认时区行（3.2.0 默认安装中的第 25 行）：

```
date_default_timezone_set('America/Chicago'); 
```

这就是它所抱怨的。

# java - Eclipse 工具提示

> ID：10484020
> 
> 赞同：0
> 
> 时间：2012-05-07T14:40:49.033
> 
> 标签：java, eclipse, eclipse-plugin

我想在向导中为我的一个小部件实现一个工具提示。我喜欢有一个看起来像 Eclipse 工具提示的工具提示（当悬停在 java 编辑器中的任何东西时，将显示工具提示，就像需要该工具提示一样）。是否可以在 Wizard 中实现？如果是，如何实施。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:48:58.640

您可以使用`Control.getToolTipText()`来设置工具提示。您可以使用向导中创建的控件来执行此操作吗？如果没有，您能解释一下您的控件是如何创建的吗？

# spring - 自动装配 HttpServletRequest？解决语言环境？

> ID：10484021
> 
> 赞同：0
> 
> 时间：2012-05-07T14:40:49.967
> 
> 标签：spring, servlets, spring-mvc, locale, autowired

我当前的项目需要自定义的“系统日期”，这意味着系统日期及其在 i18n 属性文件中定义的格式。但处理它的类是通用实用程序类，但不在 Web 层内。但是，必须从 HttpServletRequest 对象中检索语言环境（计算日期格式）。我正在考虑将 HttpServletRequest 实例自动连接到该实用程序类。它似乎打破了设计模式，但我想它是盗版的。但是它不起作用。那么这有什么问题，有没有更好的方法来解决 Spring 中任何其他层的 Locale 问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:56:56.107

`Locale`简单地重载实用程序类以在受影响的方法上接受 a 作为参数不是更优雅吗？然后，您可以检索控制器中的语言环境并将其传递给实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T09:16:04.830

我更喜欢你使用 Spring Framework 的 SessionLocaleResolver。它将更改并存储会话中的语言环境，因此您可以在应用程序中的任何代码点获取它。

请参考下面提到的配置。并阅读 Spring Documentation 以获得更好的理解。

```
 <mvc:interceptors>
        <ref bean="localeChangeInterceptor"/>
    </mvc:interceptors>

    <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang"/>
    </bean>

    <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en"/>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basenames">
        <list>
            <value>/WEB-INF/i18n/labels</value>
            <value>/WEB-INF/i18n/messages</value>
        </list>
        </property>
        <property name="defaultEncoding" value="UTF-8"/>
    </bean> 
```

希望这对您有所帮助。干杯。

# java - 包含小程序的窗口

> ID：10484025
> 
> 赞同：2
> 
> 时间：2012-05-07T14:41:05.907
> 
> 标签：java, javascript, html, applet, screenshot

如何在 Applet 中获取包含 Applet 作为`Window`对象的窗口？

我的目标是对“网站”的内容进行截图。
我试图用这个`Robot`对象来做这个：

```
Window window = ???
BufferedImage bufferedImage = new Robot().createScreenCapture(window.getBorder()); 
```

获取浏览器的边框是我需要它作为窗口对象的原因。

或者他们是另一种可能性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:33:23.550

> 获取浏览器的边框是我需要它作为窗口对象的原因。

弄清楚如何在 JavaScript 中做到这一点。从小程序调用 JavaScript。

这可能不是唯一的方法，但可以说是最好的。它使用 JS 来处理 JS 特别擅长的事情，与网页交互。让它在JS中工作和调试，然后`function`从applet中调用它是一件相对简单的事情。

# html - 使用 Solr 搜索 HTML 标记？

> ID：10484031
> 
> 赞同：0
> 
> 时间：2012-05-07T14:41:24.083
> 
> 标签：html, solr

是否可以使用 Solr 在 HTML 文件中进行搜索，例如抓取站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:28:15.347

Solr 只是搜索索引。看一下用于抓取网络的 nutch。 [http://nutch.apache.org/about.html](http://nutch.apache.org/about.html) solr 将索引 HTML 就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:21:49.150

Quoting [http://wiki.apache.org/nutch/NutchTutorial#A4._Setup_Solr_for_search](http://wiki.apache.org/nutch/NutchTutorial#A4._Setup_Solr_for_search)

> If all has gone to plan, we are now ready to search with [http://localhost:8983/solr/admin/](http://localhost:8983/solr/admin/). If you want to see the raw HTML indexed by Solr, change the content field definition in schema.xml to:

# css - DIV 边框显示异常

> ID：10484034
> 
> 赞同：0
> 
> 时间：2012-05-07T14:41:36.707
> 
> 标签：css, html

我正在尝试以某种方式对齐一些 div。为了帮助调试正在发生的事情，我决定为 div 添加边框以研究它们是如何定位的。但是边界看起来很奇怪。这是html：

![在此处输入图像描述](../Images/fbdcf19a8996e806faf452c99bca3073.png)

这是CSS：

![在此处输入图像描述](../Images/8c1e361d90e66ef4ac8fb6e83240bace.png)

结果如下：

![在此处输入图像描述](../Images/bca94f946e1afaccc7314f38920de31a.png)

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:51:47.943

这不好笑（！！）。div 似乎有`0`高度，因此顶部和底部边框相互接触，创造了一个有趣的 (??) 外观。

div 似乎包含内容，但内容可能是浮动的或绝对定位的，因此它不会垂直拉伸有趣的 (!?) div。

# [演示在这里](http://jsfiddle.net/salman/Ewd4x/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:28:39.320

高度是一种方法，但它有点 hackey，另一种是浮动围绕其他浮动 div 的 div：

[http://jsfiddle.net/Ewd4x/2/](http://jsfiddle.net/Ewd4x/2/)

# robots.txt - 他们如何以及为什么将 robots.txt 文件重定向到他们网站上的主页？

> ID：10484035
> 
> 赞同：0
> 
> 时间：2012-05-07T14:41:53.350
> 
> 标签：robots.txt

文件`robots.txt`通常只是站点根目录下的文本文件。例如，您可以查看`www.amazon.com/robots.txt`. 但是今天，我发现一个网站有一个奇怪的`robots.txt`文件。如果你只是输入

```
http://xli.bugs3.com/robots.txt 
```

它不显示文本文件，而是显示该站点的主页。它怎么会发生，为什么网站管理员会这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:09:42.387

假设一个相当传统/基本的服务器设置，如您所说，它只是文件，它可能只是一个[htaccess 重定向规则](http://en.wikipedia.org/wiki/Htaccess)。该规则可能类似于“如果文件在服务器上则提供文件，否则只提供索引”。

或者它可能是像 Rails 这样的应用程序服务器，其中服务器目录结构和 URL 路径名之间没有直接关系。

# sql - SQL Server 中的不精确列是什么？

> ID：10484036
> 
> 赞同：8
> 
> 时间：2012-05-07T14:41:55.477
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

在类型的计算列上创建索引`nvarchar`会引发以下错误：

> 无法在表“MyTable”上创建索引或统计信息“MyIndex”，因为计算列“MyColumn”不精确且未保留。考虑从索引或统计键中删除列或将计算列标记为持久。

**不精确**的列是什么意思？

更新。定义如下：

```
alter table dbo.MyTable
    add [MyColumn] as dbo.MyDeterministicClrFunction(MyOtherColumn)
go  
create index MyIndex on dbo.MyTable(MyColumn)
go 
```

更新2。`MyDeterministicClrFunction`定义如下：

```
[SqlFunction(IsDeterministic = true)]
public static SqlString MyDeterministicClrFunction(SqlString input)
{
    return input;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T15:07:39.767

[根据 MSDN，CLR 函数列必须被持久化才能被索引：](http://msdn.microsoft.com/en-us/library/ms189292.aspx)

> 任何包含公共语言运行时 (CLR) 表达式的计算列必须是确定性的并标记为 PERSISTED，然后才能对该列建立索引。计算列定义中允许使用 CLR 用户定义类型表达式。只要类型是可比较的，就可以为其类型为 CLR 用户定义类型的计算列建立索引。有关详细信息，请参阅 CLR 用户定义的类型。

坚持这个专栏，我怀疑它会起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T14:54:25.077

从[SQL 服务器文档](http://msdn.microsoft.com/en-us/library/ms189292.aspx)：

> 任何浮点数或实数表达式都被认为是不精确的，不能作为索引的键；浮点数或实数表达式可以在索引视图中使用，但不能用作键。这也适用于计算列。任何函数、表达式或用户定义的函数如果包含任何浮点或实数表达式，则被认为是不精确的。这包括逻辑的（比较）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:20:58.600

你有没有尝试过：

```
[SqlFunction(IsDeterministic=true, IsPrecise=true)] 
```

[http://msdn.microsoft.com/en-us/library/orm-9780596101404-02-12.aspx](http://msdn.microsoft.com/en-us/library/orm-9780596101404-02-12.aspx)

[http://msdn.microsoft.com/en-us/library/ms189292.aspx](http://msdn.microsoft.com/en-us/library/ms189292.aspx)

听起来错误消息具有误导性，因为 CLR 计算列无论如何都必须持久化（要被索引）。

# rules - Protege Stanford JessTab 错误

> ID：10484037
> 
> 赞同：0
> 
> 时间：2012-05-07T14:42:02.007
> 
> 标签：rules, ontology, stanford-nlp, protege, jess

我正在尝试探索熟悉 JessRules。我已将 jessrules ver 7 引擎安装到 protege 3.4.8 中。

首先我创建人员类没有问题：

```
Jess> (defclass Person (is-a :THING)
      (slot name (type string))
      (slot age (type integer))) <enter>
TRUE 
```

然后我创建个人：

```
(make-instance john of Person (name "John") (age 20)) <enter> 
```

然后我得到以下回复：

```
<Java-Object:edu.stanford.smi.protegex.owl.model.impl.DefaultOWLIndividual> 
```

在教程中应该是：

```
<External-Address:SimpleInstance> 
```

但实例已成功创建。但是当我执行 mapclass 和 fact 命令时，实例事实输出中的某些部分也会包含错误：

```
(MAIN::object (is-a Person) (is-a-name "Person") 
(OBJECT <Java-Object:edu.stanford.smi.protegex.owl.model.impl.DefaultOWLIndividual>)
(rdfs:label ) (owl:versionInfo ) (rdfs:comment ) (rdfs:member ) 
(:NAME "john") (rdfs:isDefinedBy ) (rdfs:seeAlso ) (owl:differentFrom ) 
(owl:sameAs ) (rdf:value ) (protege:inferredType ) 
(rdf:type <Java-Object:edu.stanford.smi.protegex.owl.model.impl.DefaultOWLNamedClass>) 
(name "John") (age 20)) 
```

我不确定这个错误。我已经尝试谷歌并没有找到任何线索。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:09:54.307

这里没有“错误”；只是自您编写教程以来，JessTab 和 Protege 已经发展了多年，并且一些类的名称发生了变化。

# java - 小程序签名 - 丢失密钥库密码

> ID：10484040
> 
> 赞同：0
> 
> 时间：2012-05-07T14:42:10.230
> 
> 标签：java, jar-signing, code-signing-certificate, signed-applet, verisign

我对使用旧密钥库（我丢失了密码）应该遵循的步骤有疑问。

如果我无法将该证书导入原始密钥库（因为我不记得密码），有什么方法可以使用我从 Verisign 收到的证书？

--

引导我到这里的步骤是：

1.  我跑了：

    > ```
    > keytool -genkey -keyalg rsa -keystore jarkeys -alias thekey -keysize 2048 
    > ```

2.  Keytool要求输入密码，我当时输入了密码。

3.  我填写了组织信息，然后我得到了 CSR 并发送到 Verisign。
4.  现在我收到了证书，但我不知道如何使用它，因为我无法将它添加到 Keystore。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:51:57.770

将 Verisign 颁发的证书导入回密钥库是没有意义的。您需要的是访问在此过程中生成的私钥`-genkey`。

密钥密码的主要目的之一是通过[用它加密私有（或秘密）密钥](https://stackoverflow.com/a/176188/372643)来保护对私有密钥的访问。如果没有此密码，您将无法取回私钥。

您可以做的是重新生成新的 CSR 并要求 Verisign 重新颁发证书。一些 CA 在证书有效期内免费执行此操作。

# c# - 在 GAC 中注册新程序集后，Visual Studio 找不到任何 dll

> ID：10484041
> 
> 赞同：1
> 
> 时间：2012-05-07T14:42:14.083
> 
> 标签：c#, visual-studio-2010, silverlight, global-assembly-cache

我已将一些程序集注册到全局程序集缓存，在 Visual Studion 命令提示符处执行以下命令。

```
gacutil /il MyAssemblyList.txt 
```

之后，我无法在 Visual Studio 中编译任何东西，因为它找不到任何 DLL。当我尝试编译 Silverlight 项目时，它给了我这样的错误消息：“错误 4 无法加载文件或程序集 'System.Windows, Version=5.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e' 或其依赖项之一。”

我已经更新了所有参考资料，文本编辑器没有显示任何错误。

有人可以帮忙吗？

更新：我修复了 .NET Framework 安装，问题仍然存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:41:50.277

当 .NET 尝试加载程序集时，可以在名为“fuslogvw”的应用程序中查看其详细信息 - 只需运行 VS 命令提示符并键入

```
fuslogvw 
```

之后，在程序集尝试加载之后运行您的程序。

在 fuslogvw GUI 中按“刷新”，您应该会看到一个或多个与罪魁祸首程序集相关的条目。双击查看 .NET 尝试加载程序集的位置。

您可能必须先检查“设置”并以管理员权限运行它。

如果您需要进一步的帮助，请粘贴详细信息的内容供我们查看

# php - 网络邮件不是从一个站点发送而是来自另一个站点？

> ID：10484044
> 
> 赞同：0
> 
> 时间：2012-05-07T14:42:26.433
> 
> 标签：php, html, email

好的，我父亲有两个我制作的网站，第一个是 www.ammserv.co.uk，第二个是 www.ifixboilers.com。

Ammserv 已经完成了一段时间，我还在做 iFixBoilers.com。在他购买域和服务器之前，我使用 Ammserv 来测试新站点。[www.ammserv.co.uk/ifixboilers/index.html](http://www.ammserv.co.uk/ifixboilers/index.html)

iFixboilers 基于人们填写并发送给他以进一步联系的表单，我使用 JS 动态更改表单并检查提交时的错误，我使用 PHP 收集数据并将其发送给他。

在 ammserv 上，PHP 工作，它从表单中收集数据并将其正常发送，但在 iFixBoiler 上却不行！

我一遍又一遍地检查我的代码，但我找不到任何错误？在表格中，我已确保该操作具有正确的地址并且所有名称和 ID 都正确？

这是我来自 iFixBoilers 的表格

```
<form name="fix" method="POST" action="http://localhost/PHP/fixscript.php">
<table width="800" border="0" cellspacing="10" cellpadding="5">
<tr>
<td width="230" valign="top" align="right">First name: </td>
<td width="503" valign="top" align="left">
<input type="text" name="fName" id="fName" size="50" maxlength="20" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Surname: </td>
<td width="503" valign="top" align="left">
<input type="text" name="lName" id="lName" size="50" maxlength="20" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Contact phone number: </td>
<td width="503" valign="top" align="left">
<input type="text" name="phone" id="phone" size="50" maxlength="20" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Email: </td>
<td width="503" valign="top" align="left">
<input type="text" name="email" id="email" size="50" maxlength="75" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">House name or number: </td>
<td width="503" valign="top" align="left">
<input type="text" name="num" id="num" size="50" maxlength="75" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">First line of your address: </td>
<td width="503" valign="top" align="left">
<input type="text" name="address1" id="address1" size="50" maxlength="100" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Second line of your address: </td>
<td width="503" valign="top" align="left">
<input type="text" name="address2" id="address2" size="50" maxlength="100" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Town/City: </td>
<td width="503" valign="top" align="left">
<input type="text" name="city" id="city" size="50" maxlength="50" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">County: </td>
<td width="503" valign="top" align="left">
<input type="text" name="county" id="county" size="50" maxlength="50" /></td>
</tr>
<tr>
<td width="230" valign="top" align="right">Post code: </td>
<td width="503" valign="top" align="left">
<input type="text" name="postCode" id="postCode" size="50" maxlength="10" /></td>
</tr>
<tr id="fuel">
<td width="230" valign="top" align="right">Fuel Type: </td>
<td width="503" valign="top" align="left">
<input type="radio" name="fuelType" id="fuel1" value="Natural Gas" onclick="showOptions(this);" />
<label for="fuel1">Natural Gas</label>
<input type="radio" name="fuelType" id="fuel2" value="LPG" onclick="showOptions(this);" />
<label for="fuel2">LPG</label>
<input type="radio" name="fuelType" id="fuel3" value="Oil" onclick="showOptions(this);" />
<label for="fuel3">Oil</label>
</td>
</tr>
<tr id="bmgas">
<td width="230" valign="top" align="right">Boiler manufacturer: </td>
<td width="503" valign="top" align="left">
<select name="gas" id="gas" >
<option value="0">Natural Gas</option>
<option value="Alpha Boilers">Alpha Boilers</option>
<option value="Ariston">Ariston</option>
<option value="Baxi">Baxi</option>
<option value="Biasi">Biasi</option>
<option value="Broag">Broag</option>
<option value="Ferroli">Ferroli</option>
<option value="Glowworm">Glowworm</option>
<option value="Halstead Heating">Halstead Heating</option>
<option value="Ideal Boilers">Ideal Boilers</option>
<option value="Ikon">Ikon</option>
<option value="Jaguar">Jaguar</option>
<option value="Johnson &amp; Starlay">Johnson &amp; Starlay</option>
<option value="Keston Boilers">Keston Boilers</option>
<option value="Potterton">Potterton</option>
<option value="Range Powermax">Range Powermax</option>
<option value="Raven Heat">Raven Heat</option>
<option value="Vaillant">Vaillant</option>
<option value="Viessmann">Viessmann</option>
<option value="Vokera">Vokera</option>
<option value="Worcester">Worcester</option>
<option value="Unknown">Unknown</option>
<option value="Not Listed">Not Listed</option>
</select>
</td>
</tr>
<tr id="bmlpg">
<td width="230" valign="top" align="right">Boiler manufacturer: </td>
<td width="503" valign="top" align="left">
<select name="lpg" id="lpg">
<option value="0">LPG</option>
<option value="Alpha Boilers">Alpha Boilers</option>
<option value="Baxi">Baxi</option>
<option value="Keston Boilers">Keston Boilers</option>
<option value="Potterton">Potterton</option>
<option value="Vaillant">Vaillant</option>
<option value="Viessmann">Viessmann</option>
<option value="Worcester">Worcester</option>
<option value="Unknown">Unknown</option>
<option value="Not Listed">Not Listed</option>
</select>
</td>
</tr>
<tr id="bmoil">
<td width="230" valign="top" align="right">Boiler manufacturer: </td>
<td width="503" valign="top" align="left">
<select name="oil" id="oil">
<option value="0">Oil</option>
<option value="Buderas">Buderas</option>
<option value="Danesmoor">Danesmoor</option>
<option value="Firebird">Firebird</option>
<option value="Grant">Grant</option>
<option value="HRM">HRM</option>
<option value="Nuway Oil">Nuway Oil</option>
<option value="Thermeco">Thermeco</option>
<option value="Trianco">Trianco</option>
<option value="Worcester">Worcester</option>
<option value="Unknown">Unknown</option>
<option value="Not Listed">Not Listed</option>
</select>
</td>
</tr>
<tr id="sevice">
<td width="230" valign="top" align="right">Last Service: </td>
<td width="503" valign="top" align="left">
<select name="lastServ" id="lastServ">
<option value="0">Last Service</option>
<option value="6 months">Less than 6 months ago</option>
<option value="1 year">One year ago</option>
<option value="2 years">Two years ago</option>
<option value="never">Never been serviced</option>
<option value="unknown">unknown</option>
</select>
</td>
</tr>
<tr id="message">
<td class="form" width="230" valign="top" align="right">Your message: </td>
<td width="503" valign="top" align="left">
<textarea name="msg" id="msg" cols="40" rows="10"></textarea>
</td>
</tr>
<tr id="message1">
<td width="230" valign="top" align="right">Brief Description of fault: </td>
<td width="503" valign="top" align="left">
<textarea name="msg1" id="msg1" cols="40" rows="10"></textarea>
</td>
</tr>
<tr>
<td width="230" valign="top"> </td>
<td width="503" valign="top" align="left">
<input type="button" name="return" id="return" class="button" value="Return"  onclick="location.reload;" />&nbsp;&nbsp;&nbsp;&nbsp;
<input type="reset" name="reset" class="button2" value="Reset" onclick="hide(bmgas, bmlpg, bmoil);" />&nbsp;&nbsp;&nbsp;&nbsp;
<input type="submit" name="submit" class="button3" value="Submit" onsubmit="checkForm();" />
</td>
</tr>
</table>
</form> 
```

这是php

```
<?php

// VALUES FROM THE FORM

$first      = $_REQUEST['fName'];
$last       = $_REQUEST['lName'];
$phone      = $_REQUEST['phone'];
$email      = $_REQUEST['email'];
$number     = $_REQUEST['num'];
$address1   = $_REQUEST['address1'];
$address2   = $_REQUEST['address2'];
$city       = $_REQUEST['city'];
$county     = $_REQUEST['county'];
$postCode   = $_REQUEST['postCode'];
$fuelType   = $_REQUEST['fuelType'];
$fuelGas    = $_REQUEST['gas'];
$fuelLpg    = $_REQUEST['lpg'];
$fuelOil    = $_REQUEST['oil'];
$lastServ   = $_REQUEST['lastServ'];
$msg        = $_REQUEST['msg'];
$msg1       = $_REQUEST['msg1'];

$fields = array();
$fields{"fName"} = "First Name";
$fields{"lName"} = "Last Name";
$fields{"phone"} = "Phone Number";
$fields{"email"} = "Email";
$fields{"num"} = "House Number or Name";
$fields{"address1"} = "First Line Of Address";
$fields{"address2"} = "Second Line Of Address";
$fields{"city"} = "Town Or City";
$fields{"county"} = "County";
$fields{"postCode"} = "Post Code";
$fields{"fuelType"} = "Fuel Type";
$fields{"gas"} = "Gas Boiler Type";
$fields{"lpg"} = "LPG Boiler Type";
$fields{"oil"} = "Oil Boiler Type";
$fields{"lastServ"} = "last Serviced";
$fields{"msg"} = "Message";
$fields{"msg1"} = "Description of fault";

// CREATE THE EMAIL

$headers    = "Content-Type: text/plain; charset=iso-8859-1\n";

$headers    = "From: $first $last <$email>\n";

$recipient  = "blah@gmail.com";

$subject    = "Message from iFixBoilers.com";

$message    = "A message has been sent from: \n\n"; foreach($fields as $a => $b){ $message .= sprintf("%20s: %s\n",$b,$_REQUEST[$a]); }

// SEND THE EMAIL TO YOU

mail($recipient, $subject, $message, $headers);

// REDIRECT TO THE THANKS PAGE

header("location: thanks.php"); 
```

?>

iFix 和 ammserv 上的表单之间的唯一区别是操作

iFix

```
<form name="fix" method="post" action="http://www.ifixboilers.com/PHP/fixscript.php"> 
```

服务

```
<form name="fix" method="post" action="http://www.ammserv.co.uk/ifixboilers/PHP/fixscript.php"> 
```

两个网站都由同一家公司托管，在我父亲的同一个人资料下，两者的设置都相同吗？

很抱歉这个冗长的啰嗦，但我真的需要一些帮助。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:06:33.990

通过重新做php来完成

```
<?php

// VALUES FROM THE FORM

$first      = $_POST['fName'];
$last       = $_POST['lName'];
$phone      = $_POST['phone'];
$email      = $_POST['email'];
$number     = $_POST['num'];
$address1   = $_POST['address1'];
$address2   = $_POST['address2'];
$city       = $_POST['city'];
$county     = $_POST['county'];
$postCode   = $_POST['postCode'];
$fuelType   = $_POST['fuelType'];
$fuelGas    = $_POST['gas'];
$fuelLpg    = $_POST['lpg'];
$fuelOil    = $_POST['oil'];
$lastServ   = $_POST['lastServ'];
$msg        = $_POST['msg'];
$msg1       = $_POST['msg1'];

// CREATE THE EMAIL

$headers    .= "Content-Type: text/plain; charset=iso-8859-1\r\n";

$headers    = "From: $first $last\r\n";

$recipient  = "blah@blah.com\r\n";

$subject    = "Message from iFixBoilers.com\r\n";

$message    = <<<EOD 
```

名字 : $first 姓氏 : $last 联系电话 : $phone 电子邮件 : $email 房屋名称或号码 : $num 第一行地址 : $address1 第二行地址 : $address2 城镇或城市 : $city 县 : $county邮政编码 : $postCode 燃料类型 : $fuelType 气体 : $fuelGas 液化石油气 : $fuelLpg 石油 : $fuelOil 上次服务 : $lastServ 消息 : $msg 消息 : $msg1 EOD;

```
// SEND THE EMAIL TO YOU

$send = mail($recipient, $subject, $message, $headers);

// REDIRECT TO THE THANKS PAGE

header("location: thanks.php"); 
```

?>

# tridion - 以不同名称发布的内容搬运工

> ID：10484045
> 
> 赞同：4
> 
> 时间：2012-05-07T14:42:41.660
> 
> 标签：tridion, tridion2009, tridion-content-delivery

在将内容从出版物导出到其他环境中具有不同名称的出版物时，目标出版物的属性也变得相同，我们无法更改目标出版物的父级。需要帮忙...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:03:46.730

有很多技术方法可以实现这一点......但我首选的方法是临时重命名源或目标出版物，以便名称匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T11:59:45.517

您需要做的是将内容导入出版物，但不要更新出版物本身。这是可能的，但有点棘手：

1.  打开 DependencyFilters.xml。确保在结构依赖过滤器组中有发布依赖过滤器（默认情况下它不包含在任何组中，所以添加它）。
2.  选择您的包并打开其映射文件。将出版物的 ImportTitle 设置为您要导入的出版物的标题。
3.  在依赖过滤器屏幕上启用结构依赖过滤器组。

4.  在“选择项目”屏幕上选择需要在出版物中导入的项目，但取消选择出版物本身。

5.  做进口。

# sql-server - 使用 Guid 维护数据库中的键和使用整数的另一个键之间的数据库关系

> ID：10484046
> 
> 赞同：4
> 
> 时间：2012-05-07T14:42:50.030
> 
> 标签：sql-server, ms-access, guid, etl

我正在尝试编写一个应用程序，它将信息从 SQL Server 数据库中取出，通过 Web 服务加载对象模型，然后将该信息传递到 Access DB，该数据库基于与 SQL Server 不同的架构数据库，但包含的信息是相同的（所以我认为这类似于 ETL 过程）。我遇到的问题是，我正在提取信息的数据库（SQL Server）中的主键是 GUID，而我将它们放入（Access）的数据库是 INT。例如：

表 1，SQL Server 中的 Persons 表：

```
╔══════════════════════════════════════╦══════════╦════════════╗
║                  ID                  ║   Name   ║ CreatedOn  ║
╠══════════════════════════════════════╬══════════╬════════════╣
║ 3648F6BB-F743-4952-9C69-93336667F3B1 ║ Person 1 ║ 01/01/2012 ║
║ DE44577A-CAE7-4101-B962-C052214E723B ║ Person 2 ║ 02/01/2012 ║
║ 94115C5E-9C7E-40CF-8A87-D4D837BD5DB3 ║ Person 3 ║ 03/01/2012 ║
║ F93E77D9-C344-420C-9499-BA3B4DD0F0BA ║ Person 4 ║ 04/01/2012 ║
╚══════════════════════════════════════╩══════════╩════════════╝ 
```

表 2，Access 中的 Persons 表：

```
╔════╦══════════╦════════════╗
║ ID ║   Name   ║ CreatedOn  ║
╠════╬══════════╬════════════╣
║  1 ║ Person 1 ║ 01/01/2012 ║
║  2 ║ Person 2 ║ 02/01/2012 ║
║  3 ║ Person 3 ║ 03/01/2012 ║
║  4 ║ Person 4 ║ 04/01/2012 ║
╚════╩══════════╩════════════╝ 
```

所以表 1 是数据在 SQL Server 数据库中是如何返回的，表 2 是信息在 Access 数据库中应该如何出现。所以所有的 GUID 都应该是整数，但数据之间的关系应该保持不变。因此，例如，如果我在 SQL Server 和 Access 中运行查询以获取此人的地址（地址表也将类似地设置），则无论是否使用 GUID 或整数，查询都应返回相同的结果。

我在想的是在 SQL Server 中使用 ROW_NUMBER()，按 CreatedOn 日期排序（这是数据库中的日期时间类型，因此在所有记录中应该是唯一的）：

```
SELECT 
  (ROW_NUMBER() OVER (ORDER BY CreatedOn)) AS ID,
  Name,
  CreatedOn
FROM Table2; 
```

唯一的问题是，我看到查询返回了重复的整数 ID。例如，上面的表 1 如下所示：

```
╔════╦══════════╦════════════╗
║ ID ║   Name   ║ CreatedOn  ║
╠════╬══════════╬════════════╣
║  1 ║ Person 1 ║ 01/01/2012 ║
║  2 ║ Person 2 ║ 02/01/2012 ║
║  1 ║ Person 3 ║ 03/01/2012 ║
║  1 ║ Person 4 ║ 04/01/2012 ║
╚════╩══════════╩════════════╝ 
```

当每个 ID 应该是唯一的。谁能想到一个好方法来做我想要完成的事情？我目前尝试这样做的方式有什么问题吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:43:29.320

如果我是您，我不会依赖`ROW_NUMBER()`，因为您可能无法确定顺序始终相同：

`CreatedOn`首先，在您的示例中，您仅显示该列的日期值（不包括时间） 。如果在同一天创建了多个人，如果您在该日期之前订购，则无法确定哪个先到。
即使您实际上在该`CreatedOn`列中也有时间 - 如果从表中删除一个人`ROW_NUMBER`，所有后续人员的 都会更改。

* * *

最简单的解决方案是更改其中一张表，就像 webturner 在[他的回答](https://stackoverflow.com/a/10633885/6884)中已经建议的那样。
如果您因任何原因无法执行此操作（例如，如果您根本不允许更改任一数据库的架构，或者如果您更改表的架构，遗留的东西会中断），您可以创建一个映射存储两个表之间关系的表：

```
╔══════════════════════════════════════╦══════════╗
║             SqlServerID              ║ AccessID ║
╠══════════════════════════════════════╬══════════╣
║ 3648F6BB-F743-4952-9C69-93336667F3B1 ║    1     ║
║ DE44577A-CAE7-4101-B962-C052214E723B ║    2     ║
║ 94115C5E-9C7E-40CF-8A87-D4D837BD5DB3 ║    3     ║
║ F93E77D9-C344-420C-9499-BA3B4DD0F0BA ║    4     ║
╚══════════════════════════════════════╩══════════╝ 
```

如果不允许更改现有数据库，您甚至可以将其放入第三个数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:22:57.823

最简单的解决方案是在一端或另一端更改架构，以使它们相同。如果您在 Access 和 SQL 端都添加记录，那么我会使用 GUID 来防止为两个不同的记录添加相同的 ID。然后你所做的就是滚动你自己的“复制”系统。Access 和 SQL 都支持 GUID。

如果您不希望对每个表进行某种查找。这将为您提供每个 GUID 的等效整数，反之亦然。如果将 GUID 添加为 Access 表（表 2）中的附加列，则可以将其用作查找表。

ROW_NUMBER() 将返回唯一的数字，但每次使用时都会从 1 重新开始，因此每个表的所有插入都需要在一组中完成。如果您在访问中使用自动编号字段，这将为您提供跨单独插入的唯一值。

鉴于您现在在 Access 表中拥有 SQL 的 GUID 和唯一 ID，您只需在插入具有外键的表（例如地址表）时进行查找。因此，当您从带有 GUID 的 SQL 中插入地址以识别人员时，请在 GUID 上加入访问的人员表，并改为插入人员的整数 ID。

# perl - 抑制重载运算符的无效上下文警告

> ID：10484047
> 
> 赞同：4
> 
> 时间：2012-05-07T14:42:50.677
> 
> 标签：perl, operator-overloading, warnings

有没有办法在调用者中为重载运算符抑制特定警告？

**背景：** 我正在研究一个重载`<=`并`>=`实现一种声明性域特定语言的模块。不管这是否是一个好主意，这些运算符在 void 上下文中使用时会抛出“在 void 上下文中无用”的警告。就像是：

```
package Boundary;

use strict;
use overload ('<=' => \&set_min, '>=' => \&set_max);

sub new     { my ($class, $min, $max) = @_; bless [ $min, $max ], $class; }
sub set_min { my $self = shift; $self->[0] = shift; }
sub set_max { my $self = shift; $self->[1] = shift; }

package main;

# user code
use warnings;

my $bound = Boundary->new();
$bound >=  1;  # Useless use of numeric ge (>=) in void context at ...
$bound <= 10;  # Useless use of numeric le (>=) in void context at ... 
```

有没有办法仅针对重载调用抑制警告，而调用者不必显式禁用“无效”警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:14:08.113

Perl 希望您在重载运算符时保留现有的语义。例如，它有时会优化否定。你在玩火。

```
$ perl -MO=Concise,-exec -e'$y = !$x;'
1  <0> enter
2  <;> nextstate(main 1 -e:1) v:{
3  <$> gvsv(*x) s
4  <1> not sK/1                    <--- "not" operator
5  <$> gvsv(*y) s
6  <2> sassign vKS/2
7  <@> leave[1 ref] vKP/REFC
-e syntax OK

$ perl -MO=Concise,-exec -e'if (!$x) { f() }'
1  <0> enter 
2  <;> nextstate(main 3 -e:1) v:{
3  <$> gvsv(*x) s
4  <|> or(other->5) vK/1           <--- No "not" operator
5      <0> pushmark s
6      <$> gv(*f) s/EARLYCV
7      <1> entersub[t1] vKS/TARG,1
8  <@> leave[1 ref] vKP/REFC
-e syntax OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:56:49.733

我建议您重载`<<=`and`>>=`运算符，因为编译器希望它们用于其副作用。或者，您可能更喜欢`-=`和`+=`。

您需要`$self`从重载子例程返回，因为像这样的运算符的 LHS 设置为返回值并且您不希望它更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:06:05.903

没有可能，我**猜**。我唯一的解决方案是：

*   改变你的 API
*   忍受这个警告（你可以通过`__WARN__`伪信号处理程序过滤它们）
*   使用奇怪的语法：

    $bound >= 1 或 0;

我认为第一选择是最好的；）

# websphere - webpshere 配置文件恢复命令

> ID：10484050
> 
> 赞同：1
> 
> 时间：2012-05-07T14:42:53.503
> 
> 标签：websphere

我希望将备份的配置文件恢复为 WAS 的新配置文件。

我目前正在使用这个命令：

> C:\Program Files\IBM\WebSphere\AppServer\bin\restoreConfig ProfilDGR_SA.car -username userwas -password userwas -profileName PROFIL_DGR -force

但似乎出了点问题，因为我收到以下消息：

> ADMU5502I: 目录 C:\Program Files\IBM\WebSphere\AppServer\profiles\PROFILDGR\config 已存在；重命名为 C:\Program Files\IBM\WebSphere\AppServer\profiles\PROFILDGR\config.old ADMU5503E：无法重命名恢复位置 - 另一个进程可能正在使用此子目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:28:34.947

下面的技术说明适用于 WebSphere 门户，但根本原因在于配置文件恢复并符合您的情况。

> 此问题可能是由系统上运行的任何文件索引服务（例如 Google 桌面）或 Norton Antivirus 引起的。
> 
> 要解决此问题，您必须执行以下操作：
> 
> ...
> 
> *   暂时禁用所有防病毒和文件索引服务。

还要确保依赖于该配置文件的服务器没有运行。

[http://www-01.ibm.com/support/docview.wss?rs=688&context=SHRKX&context=SS3JLV&context=SS3NNG&context=SSYJ99&context=SSRUWN&context=SS6JVW&q1=1390990&uid=swg21390990&loc=en_US&cs=utf-8&lang=en](http://www-01.ibm.com/support/docview.wss?rs=688&context=SSHRKX&context=SS3JLV&context=SS3NNG&context=SSYJ99&context=SSRUWN&context=SS6JVW&q1=1390990&uid=swg21390990&loc=en_US&cs=utf-8&lang=en)

# concurrency - ActiveJDBC 并发请求？

> ID：10484051
> 
> 赞同：0
> 
> 时间：2012-05-07T14:42:56.227
> 
> 标签：concurrency, activejdbc

我在我的一个项目中使用[ActiveJDBC](http://code.google.com/p/activejdbc/)，今天我遇到了一个讨厌的问题。

对我的应用程序的并发请求将失败，因为 ActiveJDBC 尝试从具有相同名称“默认”的池中获取多个连接。

似乎有可能打开不同名称的连接，所以不要写：

`Base.open(JNDI_NAME)`

有人会写：

`new DB("someRandomName").open(JNDI_NAME);`

但是......当试图从数据库中获取一些数据时，出现了一个问题：ActiveJDBC 搜索连接“默认”（或模型类中的 @DbName 注释） - 据我了解，这个概念用于处理多个数据库（不是多个连接）。

我真的不想替换 ActiveJDBC，因为编写了数千行代码 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:27:22.930

想法存在:) 在您的代码中，您有：

```
new DB("someRandomName").open(JNDI_NAME); 
```

..但是您传递给 DB 类的构造函数的***字符串不是随机字符串***，也不是 JNDI 名称。它是数据库的逻辑名称。您正确地猜到了这与访问多个数据库访问有关。这是解释这一点的文档：http: [//javalite.io/database_connection_management#multiple-database-example](http://javalite.io/database_connection_management#multiple-database-example)

如果您的系统中只有一个数据库，您甚至不需要类 DB，只需使用 Base：http: [//javalite.github.io/activejdbc/snapshot/org/javalite/activejdbc/Base.html](http://javalite.github.io/activejdbc/snapshot/org/javalite/activejdbc/Base.html) 它将确保数据库连接将有一个名称“默认” - 您的模型所期望的

干杯

# html - 悬停时更改选择列表选项背景颜色

> ID：10484053
> 
> 赞同：84
> 
> 时间：2012-05-07T14:43:05.927
> 
> 标签：html, css, drop-down-menu

是否可以在悬停时更改选择列表选项的默认背景颜色？

HTML：

```
<select id="select">
    <option value="1">One</option>
    <option value="2">Two</option>
    <option value="3">Three</option>
</select> 
```

我试过 `option:hover { background-color: red; }`了，但没有用。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-11-07T11:19:06.890

这可以通过实现插入框阴影来完成。例如：

```
select.decorated option:hover {
    box-shadow: 0 0 10px 100px #1882A8 inset;
} 
```

这里，`.decorated`是分配给选择框的类。

希望你明白了。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-26T01:25:15.817

Select / Option 元素由操作系统呈现，而不是 HTML。您无法更改这些元素的样式。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-02-05T10:25:12.323

这样我们就可以通过最小的更改来做到这一点:)

```
<html>

<head>
  <style>
    option:hover {
      background-color: yellow;
    }
  </style>
</head>

<body>
  <select onfocus='this.size=10;' onblur='this.size=0;' onchange='this.size=1; this.blur();'>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="opel">Opel</option>
    <option value="audi">Audi</option>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="opel">Opel</option>
    <option value="audi">Audi</option>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="opel">Opel</option>
    <option value="audi">Audi</option>
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="opel">Opel</option>
    <option value="audi">Audi</option>
  </select>

</body>

</html>
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-20T09:38:05.910

在 Firefox 上实现插入框阴影 CSS 工作：

```
select option:checked,
select option:hover {
    box-shadow: 0 0 10px 100px #000 inset;
} 
```

选中的选项在 Chrome 中有效：

```
select:focus > option:checked { 
    background: #000 !important;
} 
```

[在https://codepen.io/egle/pen/zzOKLe](https://codepen.io/egle/pen/zzOKLe)上有测试

*对我来说，这适用于 Google Chrome 版本 76.0.3809.100（官方版本）（64 位）*

我发现的关于此问题的最新文章 Chris Coyier（2019 年 10 月 28 日）[https://css-tricks.com/the-current-state-of-styling-selects-in-2019/](https://css-tricks.com/the-current-state-of-styling-selects-in-2019/)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-01-22T05:48:58.290

问题是即使 JavaScript 也*看*不到`option`悬停的元素。这只是为了强调仅使用 CSS 不会（至少很快）解决它：

```
window.onmouseover = function(event)
{
 console.log(event.target.nodeName);
} 
```

解决此问题的*唯一*方法（除了等待浏览器供应商修复错误数千年之外，更不用说影响您尝试做的事情了）是使用 JavaScript 将下拉菜单替换为您自己的 HTML/XML。这可能涉及使用元素替换`select`元素以及每个元素`ul`使用一个元素。`radio` `input``li`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-10T18:16:12.700

您可以这样做，只要知道它将更改整个 html 中的所有选择输入，它不会更改蓝色悬停，但会设置其他所有内容的样式。

```
option {
  background: #1b1a1a !important;
  color: #357b1d !important;
}
select {
  background: #1b1a1a !important;
  color: #357b1d !important;
}

// If you also want to theme your text inputs:
input {
  background: #1b1a1a !important;
  color: #357b1d !important;
} 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2014-12-24T15:56:59.390

我意识到这是一个较老的问题，但我最近遇到了这种需求，并使用 jQuery 和 CSS 提出了以下解决方案：

```
jQuery('select[name*="lstDestinations"] option').hover(
        function() {
            jQuery(this).addClass('highlight');
        }, function() {
            jQuery(this).removeClass('highlight');
        }
    ); 
```

和CSS：

```
.highlight {
    background-color:#333;
    cursor:pointer;
} 
```

也许这对其他人有帮助。

* * *

## 回答 #8

> 赞同：-10
> 
> 时间：2014-04-08T02:03:36.640

这就是你需要的，子组合器：

```
 select>option:hover
    {
        color: #1B517E;
        cursor: pointer;
    } 
```

试试看，效果很好。

这是参考：[http ://www.w3schools.com/css/css_combinators.asp](http://www.w3schools.com/css/css_combinators.asp)

# wpf - Web 服务器上 Viewport3D 的 wpf RenderTargetBitmap（屏幕外）

> ID：10484057
> 
> 赞同：2
> 
> 时间：2012-05-07T14:43:13.873
> 
> 标签：wpf, webserver, viewport3d, rendertargetbitmap

我正在屏幕外创建一个 Viewport3D (CurViewport3D) 并仅用一个平面填充它（用于测试目的）。

通过 RenderTargetBitmap 和 BitmapEncoder 创建此视口内容（作为 jpg）的 MemoryStream。整个功能都放在一个库 (dll) 中，因为我想在 Web 服务器上使用这个库来创建一个要在网站上显示的图像。

下面的代码被简化为基础，但它正在工作。

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Media.Media3D;
using System.Windows.Shapes;
using System.Windows.Controls;
using System.Windows.Threading;

namespace RenderTargetImage_Test
{
    public class RenderTargetImage01
    {
        public System.IO.MemoryStream stream = new System.IO.MemoryStream();
        Int32 width = 100;
        Int32 height = 100;
        Viewport3D CurViewport3D;

        public RenderTargetImage01()
        {
            CurViewport3D = new Viewport3D();
            Model3DGroup myModel3DGroup = new Model3DGroup();
            ModelVisual3D myModelVisual3D = new ModelVisual3D(); 

            PerspectiveCamera myPCamera = new PerspectiveCamera();
            myPCamera.Position = new Point3D(3500, 1500, -5000);
            myPCamera.LookDirection = new Vector3D(-0.5, 0, 1);
            myPCamera.FieldOfView = 70;
            CurViewport3D.Camera = myPCamera;

            AmbientLight myAmbientLight = new AmbientLight();
            myAmbientLight.Color = Colors.White;
            myModel3DGroup.Children.Add(myAmbientLight);

            MeshGeometry3D meshS2 = new MeshGeometry3D();
            GeometryModel3D modelS2 = new GeometryModel3D();

            meshS2.Positions.Add(new Point3D(500, 500, -500));
            meshS2.Positions.Add(new Point3D(500, 3000, -500));
            meshS2.Positions.Add(new Point3D(3000, 500, -500));
            meshS2.Positions.Add(new Point3D(3000, 3000, -500));
            meshS2.TriangleIndices.Add(0);
            meshS2.TriangleIndices.Add(1);
            meshS2.TriangleIndices.Add(2);
            meshS2.TriangleIndices.Add(3);
            meshS2.TriangleIndices.Add(2);
            meshS2.TriangleIndices.Add(1);
            meshS2.Normals.Add(new Vector3D(0, 0, 1));
            meshS2.Normals.Add(new Vector3D(0, 0, 1));
            meshS2.Normals.Add(new Vector3D(0, 0, 1));
            meshS2.Normals.Add(new Vector3D(0, 0, 1));
            meshS2.Normals.Add(new Vector3D(0, 0, 1));
            meshS2.Normals.Add(new Vector3D(0, 0, 1));
            meshS2.TextureCoordinates.Add(new System.Windows.Point(0, 0));
            meshS2.TextureCoordinates.Add(new System.Windows.Point(1, 0));
            meshS2.TextureCoordinates.Add(new System.Windows.Point(0, 1));
            meshS2.TextureCoordinates.Add(new System.Windows.Point(1, 1));

            modelS2.Geometry = meshS2;
            DiffuseMaterial DiffMS2 = new DiffuseMaterial(System.Windows.Media.Brushes.Red);
            modelS2.Material = DiffMS2;
            myModel3DGroup.Children.Add(modelS2);
            myModelVisual3D.Content = myModel3DGroup;
            CurViewport3D.Children.Add(myModelVisual3D);

            // render
            RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(width, height, 96, 96, PixelFormats.Pbgra32);
            CurViewport3D.Width = width;
            CurViewport3D.Height = height;
            CurViewport3D.Measure(new System.Windows.Size(width, height));
            CurViewport3D.Arrange(new Rect(0, 0, width, height));
            CurViewport3D.Dispatcher.Invoke(((Action)(() => renderTargetBitmap.Render(CurViewport3D))), DispatcherPriority.Render);
            BitmapEncoder bitmapEncoder = new PngBitmapEncoder();
            bitmapEncoder.Frames.Add(BitmapFrame.Create(renderTargetBitmap));
            bitmapEncoder.Save(stream);
        }
    }
} 
```

这是网站的代码：

```
<body>
    <form id="form1" runat="server">
    <div>
    </div>
    </form>
</body> 
```

以及背后的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using System.Windows.Shapes;

using System.Windows.Media;
using System.Windows.Media.Imaging;

using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;

using RenderTargetImage_Test;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        RenderTargetImage01 rti = new RenderTargetImage01();

        rti.stream.WriteTo(Response.OutputStream);
        Response.ContentType = "image/png";
        Response.Flush();
        Response.End();
    }
} 
```

很简单！

现在的问题是：本地一切正常。图像显示在浏览器中 - 完美。一旦我尝试在 Web 服务器（Microsoft Server 2008）上运行它，浏览器中显示的图像是空的，没有内容。没有错误。

有谁知道如何让它在网络服务器上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:28:14.020

答案很简单：WPF 3D 渲染在[Session 0 Isolation](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463353.aspx)中不起作用，适用于 WIndows 2008 服务器及更高版本（或客户端中的 Vista/Seven）下的非交互式用户。 [我没有找到任何真正解决同一问题的方法](https://stackoverflow.com/questions/15113901/starting-a-new-user-session-from-a-service)，因为所有这些都需要在服务器上（甚至是远程用户）有一个登录用户，该用户在**不同于 0 的 Session**中托管 WPF 绘图。所以作为一个非常激进的解决方案，我使用 OpenGL 来渲染它：因为 Opengl 可以以纯软件方式渲染，它不受会话 0 的影响，而且它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T15:52:22.763

我尝试了 DirectX9（通过 SharpDX）并且无法在会话 0 隔离中初始化 3d 支持。经过一番调查，我发现这仅适用于 DirectX 11：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh404562%28v=vs.85%29.aspx#use_direct3d_in_session_0_processes](http://msdn.microsoft.com/en-us/library/windows/desktop/hh404562%28v=vs.85%29.aspx#use_direct3d_in_session_0_processes)

不幸的是，这只适用于 Windows 8 和 Windows Server 2012。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T08:01:09.407

好吧，这似乎是一个问题，即在渲染时视口在屏幕外。我相信视口中的结果从未真正呈现到屏幕上。现在由于它在本地工作，问题可能出在服务器上的图形硬件上。虽然在本地您可能拥有渲染所有调用的硬件，但服务器可能正在通过软件渲染所有内容。该软件只会否定任何无法查看的内容，以节省时间和资源。虽然图形硬件仍将渲染所有内容并将其存储在缓冲区中，直到它变得可见。

如果不是这种情况，那么我将不得不说它与您正在运行的内存流有关。是否有任何 100% 的理由必须使用内存流？如果不尝试没有它的解决方案，看看是否能解决问题。

# asp.net - 如何避免在 Windows XP 的 Visual Studio 2008 中不必要地使用“附加到进程”？

> ID：10484063
> 
> 赞同：0
> 
> 时间：2012-05-07T14:43:44.190
> 
> 标签：asp.net, vb.net, visual-studio

我正在使用 Visual Studio 2008。我在使用 Windows XP 时遇到了这个问题。我在进程启动时调试没有问题，但过了一段时间它只是断开连接，然后我需要手动附加到进程，然后再断开连接。我对此感到非常沮丧，我已经卸载了 VS 2008 并重新安装了我的 IIS 并再次安装了 VS 2008，但仍然是同样的问题。

最初 VS 会自动附加，它会在连续的调试命令中继续这样做，但最终会在一段时间后停止附加，必须手动完成。点击调试完成所有操作，构建，启动开发服务器，打开页面并且根本无法附加。

对此有一个解决方案将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:15:30.513

替换 visula studio 安装文件夹中的文件 webdev.webserver.exe 一旦我在 vs 2008 中工作时，我遇到了同样的问题。它只会在您尝试运行我现在在 vs 2010 中工作的两个不同的 Visual Studio 项目实例时发生，我忘记了路径，但你会通过谷歌搜索找到它

# jira - JIRA 任务和 GreenHopper 技术任务有什么区别？

> ID：10484074
> 
> 赞同：2
> 
> 时间：2012-05-07T14:44:27.400
> 
> 标签：jira, greenhopper

我开始使用 JIRA/GreenHopper 来实施我的个人 Scrum。但是，我想知道 JIRA 任务和 GreenHopper 技术任务之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:26:35.720

AFAIK 技术任务与故事更相关，并在计划阶段进入，而任务是一个相对通用的标签，没有外部链接或上下文。

# windows-phone-7 - 全景控制，点击

> ID：10484076
> 
> 赞同：0
> 
> 时间：2012-05-07T14:44:29.050
> 
> 标签：windows-phone-7, tap, panorama-control

我会使用全景控件为 Windows Phone 设计 UI，但“点击”在我的代码中不起作用。想知道为什么？我的 XAML 代码如下：

```
<Grid x:Name="LayoutRoot">
<StackPanel Margin="0,0,0,0">
<HyperlinkButton Tap="detailmap_Tap" HorizontalAlignment="Stretch" Style="{StaticResource EmptyButtonStyle}">
            <Image Name="titleImg" Width="480" Height="150" />
</HyperlinkButton>
        <toolkit:PerformanceProgressBar Name="prgBar01" Margin="0,0,0,0" Visibility="Visible" Height="40" VerticalAlignment="Top" IsEnabled="True" IsIndeterminate="True" />
        <TextBlock Name="locationNote" TextWrapping="Wrap" Margin="12,0,0,0" />
    </StackPanel>
<controls:Panorama Title=" ">
        <!--Panorama item one-->
        <controls:PanoramaItem Header="test1">
            <Grid/>
</controls:PanoramaItem>

<!--Panorama item two-->
        <controls:PanoramaItem Header="test2">
            <Grid/>
</controls:PanoramaItem>
</controls:Panorama>
</Grid> 
```

这个 UI 设计工作完美，除了超链接按钮中的“点击”没有响应。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T16:50:11.553

如果无论用户在哪个全景项目上都希望按钮可见，请将全景图放在按钮下方

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto">
        <RowDefinition Height="*">
    </Grid.RowDefinitions>
    <HyperlinkButton Grid.Row="0"/>
    <controls:Panorama>
        <controls:PanoramaItem />
    </controls:Panorama>
</Grid> 
```

# c++ - 带有线程的 MFC 应用程序中的内存泄漏

> ID：10484077
> 
> 赞同：0
> 
> 时间：2012-05-07T14:44:30.310
> 
> 标签：c++, visual-c++, c++11

任何人都可以帮助解决 MFC 应用程序中的内存泄漏问题吗？如果没有以下代码块，该程序似乎可以正常工作。该块包括几个任务的条件执行和将数据传递给 MFC 对话框数据成员，然后更新 MFC 对话框上的指示器。其他测试显示一切正常，除了调试窗口中有内存泄漏消息。平台：WIN 7 64bit，MSVC 2011。谢谢！

```
#include <vector>
#include <thread> 

//Implementation parallel tasking
void CMASTERDlg::OnCompositeParalleltasking()
{   
const int totTsk=8;
BOOL select[totTsk]={
    m_Parallel_Audio,
    m_Parallel_DDS,
    m_Parallel_HV,
    m_Parallel_Monitor,
    m_Parallel_PDA,
    m_Parallel_Pulnix,
    m_Parallel_Supertime,
    m_Parallel_Temp};

//Put all selected tasks in a thread vector
std::vector<std::thread> threads;
auto pvThread = threads.begin(); 

if (m_Parallel_Audio)
    threads.push_back(std::thread(Audio, 1));
if (m_Parallel_DDS) 
    threads.push_back(std::thread(DDS, 1, 1));
if (m_Parallel_HV) 
    threads.push_back(std::thread(HVgetShow, this, 3));
if (m_Parallel_Monitor) 
    threads.push_back(std::thread(MonitorgetShow, this));
if (m_Parallel_PDA) 
    threads.push_back(std::thread(PDAgetShow, this));
if (m_Parallel_Pulnix) 
    threads.push_back(std::thread(DoNothing, 1));
if (m_Parallel_Supertime) 
    threads.push_back(std::thread(MMCS,Sequence_id, static_cast<LPCSTR>(CStringA(loopnum))));
if (m_Parallel_Temp) 
    threads.push_back(std::thread(TempgetShow,this));

pvThread = threads.begin();
while (pvThread != threads.end())
{
     pvThread->join();
     pvThread++;
}

//update data on front panel
UpdateData(FALSE);
UpdateWindow();

//count selected tasks and output message
int j=0, count=0;
for(j=0; j<totTsk; j++) {
   if (select[j])  count++;
}
char buffer[2];
itoa (count,buffer,10);
string message=string(buffer)+" tasks completed in parallel\n";
TRACE(message.c_str());  //Message in debugging window

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:12:42.767

编码

```
pvThread = threads.begin();
while (pvThread != threads.end())
{
     pvThread->join();
     pvThread++;
} 
```

对我来说似乎有问题。第一次进入此循环时，当前线程（我假设它是主应用程序 UI 线程）将在第一个线程上调用 join() 时阻塞，直到该线程完成。如果第一个线程至少比其他一些线程花费的时间更长，那么最终你会发现自己在一个已失效的线程上调用了 join()。也许系统在处理这个问题时泄漏了一些东西？

# c++ - 如果函数具有相同的名称，如何调用构造函数

> ID：10484078
> 
> 赞同：7
> 
> 时间：2012-05-07T14:44:30.287
> 
> 标签：c++, constructor, overload-resolution

如果我有以下情况：

```
class T
{
   public: 
      T(){}
};

void T()
{
}

int main()
{
  T(); // this calls the function, how can I call the constructor T()?
} 
```

我对它没有任何问题，因为我可以重命名它，但只是好奇如何强制它调用构造函数，而且我问自己为什么函数调用似乎比构造函数具有更高的优先级。此外，为什么没有关于重复名称的警告消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:46:52.423

除了 jaunchopanza 所说的之外，您还可以对通话进行限定：

```
T::T(); 
```

使用此版本，您可以创建临时对象：

```
class T
{
   public: 
      T(){}
};

void foo(T) {}

void T()
{
}

int main(){
   foo(T::T());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:30:36.937

基本上没有名字冲突，基本上是在不同的命名空间里

```
T() ==> namespace::T() It;s a function call not an object instantiation. 
T a() ==> namespace ::T::T() It;s is instantiation of T class calling the constructor.
T a() ; a() ==>namespace ::T::T()::() It;s call the functor of the T Class (need to define the operator()) 
```

# c# - 获取所有按下的键

> ID：10484085
> 
> 赞同：7
> 
> 时间：2012-05-07T14:45:00.970
> 
> 标签：c#, keypress, keydown

我必须使用什么才能获得目前在键盘上按下的“所有键”？因为`Form.KeyPress += new EventHandler()`当它充满控件时根本没有做太多事情。无论我做什么，它都不会调用它，无论是 KeyDown、KeyUp 还是其他任何东西……是的，我知道如何使用它们。

因此，如果系统中有任何功能可以检查按下的键，它会返回使用的键的数组或其他东西 - 我会很感激指出正确的方向。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T14:56:05.227

听起来您想查询键盘中所有键的状态。最好的功能是 Win32 API 调用`GetKeyboardState`

*   [获取键盘状态](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646299%28v=vs.85%29.aspx)

我不相信有一个很好的管理等效功能。它的 PInvoke 代码相当简单

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetKeyboardState(byte [] lpKeyState);

var array = new byte[256];
GetKeyboardState(array); 
```

这将填充`byte[]`系统中每个虚拟键的向上/向下状态。如果设置了高位，则当前按下虚拟键。将 a映射`Key`到虚拟键码仅通过考虑`byte`数值的部分来完成`Key`。

```
public static byte GetVirtualKeyCode(Key key) {
  int value = (int)key;
  return (byte)(value & 0xFF);
} 
```

以上适用于大多数`Key`值，但您需要小心修饰键。values `Keys.Alt`, `Keys.Control`and`Keys.Shift`在这里不起作用，因为它们在技术上是修饰符而不是键值。要使用修饰符，您需要使用实际关联的键值`Keys.ControlKey`,`Keys.LShiftKey`等...（实际上是以 Key 结尾的任何内容）

因此检查是否设置了特定键可以如下完成

```
var code = GetVirtualKeyCode(Key.A);
if ((array[code] & 0x80) != 0) {
  // It's pressed
} else { 
  // It's not pressed
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-27T02:41:22.313

我对 JaredPar 的回答做了一些扩展。以下方法返回当前被按下的所有键的集合：

```
using System.Collections.Generic;
using System.Linq;
using System.Runtime.InteropServices;
using System.Windows.Input;

private static readonly byte[] DistinctVirtualKeys = Enumerable
    .Range(0, 256)
    .Select(KeyInterop.KeyFromVirtualKey)
    .Where(item => item != Key.None)
    .Distinct()
    .Select(item => (byte)KeyInterop.VirtualKeyFromKey(item))
    .ToArray();

/// <summary>
/// Gets all keys that are currently in the down state.
/// </summary>
/// <returns>
/// A collection of all keys that are currently in the down state.
/// </returns>
public IEnumerable<Key> GetDownKeys()
{
    var keyboardState = new byte[256];
    GetKeyboardState(keyboardState);

    var downKeys = new List<Key>();
    for (var index = 0; index < DistinctVirtualKeys.Length; index++)
    {
        var virtualKey = DistinctVirtualKeys[index];
        if ((keyboardState[virtualKey] & 0x80) != 0)
        {
            downKeys.Add(KeyInterop.KeyFromVirtualKey(virtualKey));
        }
    }

    return downKeys;
}

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
private static extern bool GetKeyboardState(byte[] keyState); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T07:31:37.313

如果您只需要在应用程序处于活动状态时知道所有击键，无论应用程序中的哪个控件具有焦点，那么您都可以使用[`KeyPreview`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)表单的属性。

只需将该属性设置为 true 并订阅**表单上**所需的 Key 事件。现在，您将在应用程序中收到所有击键，然后将它们转发到具体控件，从而允许您对它自己做出反应并取消将其转发到控件，将`Cancel`属性设置为 true。

如果您需要在您的应用程序不是活动应用程序时接收按下的键，那么您需要某种低级键盘挂钩。我没有对其进行测试，但是[CodeProject 上的这篇文章](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)对于这种情况看起来很有希望。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T14:52:37.823

我相信您正在寻找[PreviewKeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.previewkeydown.aspx)事件，如果在表单具有焦点时按下某个键，即使该表单中的另一个子控件当前具有焦点，该事件也会触发。

# jquery - 在 Rails 应用程序的数据表中使用搜索功能时如何禁用微调器

> ID：10484087
> 
> 赞同：1
> 
> 时间：2012-05-07T14:45:17.007
> 
> 标签：jquery, spinner, datatables

我刚刚在我的 Rails 应用程序中放入了一个使用 jQuery 数据表插件的微调器。代码非常简单：

我有一个带有微调器的 div 和 id，如下所示：

```
<div id="spinner" class="spinner">
    <img id="img-spinner" src="/assets/spinner.gif" alt="Loading"/>
</div> 
```

加上一些 jQuery 代码来连接到 spinner id：

```
<script type="text/javascript">
  $(document).ready(function(){
    $("#spinner").bind("ajaxSend", function() {
      $(this).show();
    }).bind("ajaxStop", function() {
      $(this).hide();
    }).bind("ajaxError", function() {
      $(this).hide();
    });
   });
</script> 
```

这很好用。除了当用户在数据表搜索框中键入搜索字符串时，我不想显示微调器图像。由于 datatables 使用 Ajax a) 在初始加载期间填充表，并且 b) 在用户键入每个字符时发送搜索字符串时也是如此。微调器图像闪烁过多。我对数据表还没有太多经验，所以可能有一个回调可以用于此目的？

在此先感谢您的帮助。

巴拉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:59:15.317

我遇到了同样的问题，最好的解决方案是禁用特定路径的全局 ajax。你可以这样做：

```
$.ajax({
   url: "test.html",
   global: false,
   // ...
 }); 
```

[在此处](http://docs.jquery.com/Ajax_Events)阅读有关全球活动的更多信息。用上面的代码，`global`是`false`在请求test.html的时候。我假设您只能将相同的东西用于您的搜索功能。

# c++ - 在 C++11 中将成员函数指定为回调

> ID：10484088
> 
> 赞同：5
> 
> 时间：2012-05-07T14:45:23.693
> 
> 标签：c++, c++11, lambda

我有以下内容：

```
typedef std::function<bool (const std::string&)> SomethingCoolCb;

class ClassA
{
public:
    void OnSomethingCool(const SomethingCoolCb& cb)
    {
        _cb = cb;
    }

private:
    SomethingCoolCb _cb;
};

class ClassB
{
public:
    ClassB();
    bool Juggle(const std::string& arg);

private:
    ClassA _obj;
}; 
```

我想指定 ClassB::Juggle() 成员函数作为对 ClassB::_obj 的回调。在 C++11 中执行此操作的正确方法是（在 ClassB 的构造函数中）：

```
ClassB::ClassB()
{
    _obj.OnDoSomethingCool(
        [&](const std::string& arg) -> bool
        {
            return Juggle(arg);
        });
} 
```

据我了解，编译器将从上述 lambda 代码中生成一个 std::function 对象。因此，当调用回调时，它将调用 std::function::operator() 成员，然后调用 ClassB::Juggle() 而不是直接调用 ClassB::Juggle()。除非我对幕后发生的事情有误解，否则这一切似乎都有点低效。有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:48:42.563

仅`std::function`在您确实需要多态函数时使用。否则将其作为模板。

要使成员函数适应函子的使用`std::mem_fn`，然后`bind`将对象适应第一个参数，生成的函子可以用作您的回调。

样本：

```
#include <string>
#include <functional>

template<typename F>
class ClassA
{
public:
    ClassA(F f) : _cb(f) {}

private:
    F _cb;
};

class ClassB
{
public:
    ClassB() 
  : _obj(std::bind(&ClassB::Juggle, this, 
                   std::placeholders::_1)) 
  {}
  bool Juggle(const std::string& arg) {return true;}
private:
    ClassA<decltype(std::bind(
                      std::declval<bool (ClassB::*)(const std::string&)>()
                      , std::declval<ClassB*>()
                      , std::placeholders::_1
                      ) ) > _obj;
};

int main()
{
  ClassB b;
  return 0;
} 
```

这以非常丑陋为代价来回避功能成本。

# javascript - 如何从在 javascript、asp.net mvc3 中设置的 cookie 中获取键值

> ID：10484090
> 
> 赞同：2
> 
> 时间：2012-05-07T14:45:39.207
> 
> 标签：javascript, asp.net-mvc-3, cookies

我在javascript中设置了一个cookie，就像这样

```
 function setCookie(c_name,value,exdays)
    {
       var exdate=new Date();
       exdate.setDate(exdate.getDate() + exdays);
       var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
       document.cookie = c_name + "=" + c_value;
    }

var  loginval = slmgusername=swetha.p + slmguserpassword = 12345678;
 setCookie("slmgusercredentails", loginval, 100); 
```

我控制器我在我的cookie中得到这样的值

```
 HttpContext.Request.Cookies["slmgusercredentials"].Values = {slmgusername%253Dswetha.p%2526slmguserpassword%253D12345678} 
```

当我试图从中获取用户名时，例如

```
 UserName = HttpContext.Request.Cookies["slmgusercredentials"].Values["slmgusername"]. 
```

我无法获得用户名。正如我所认为的那样，这些值采用 javscript 编码格式。如何获取用户名...谁能帮我找到解决方案...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:12:34.757

这应该可以解决问题！

```
 function ReadCookie()
    {
       var allcookies = document.cookie;
       alert("All Cookies : " + allcookies );

       // Get all the cookies pairs in an array
       cookiearray  = allcookies.split(';');

       // Now take key value pair out of this array
       for(var i=0; i<cookiearray.length; i++){
          name = cookiearray[i].split('=')[0];
          value = cookiearray[i].split('=')[1];
          alert("Key is : " + name + " and Value is : " + value);
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-26T13:40:21.660

从接受的答案解决过期问题。

```
function readKeyValuesFromCookie(){
    return document.cookie
        .split( ';' )
        .map( pair => pair.split( '=' ) )
        .filter( pair => pair.length == 2 )
        .map( pair => [ pair[0].trim(), pair[1].trim() ] )
        .filter( pair => pair[0] != 'expires' )
    ;
} 
```

# c++ - 关于 Liskov 原则，我应该如何实现树节点类？

> ID：10484093
> 
> 赞同：3
> 
> 时间：2012-05-07T14:45:48.320
> 
> 标签：c++, oop

最近，我不得不为一个研究项目实现一个抽象查询树。基对象是`ASTNode`，但实际的树节点是派生类：表达式节点、比较节点、操作数节点等。每种类型的节点都有自己的成员，例如操作数节点、参数列表等.

递归生成这棵树的解析函数需要返回`ASTNode`类型，因为它们只返回一个指针，而不管生成树的根部是什么类型的节点。

这意味着解析树的函数需要查询，对于树中的每个节点，它是什么类型，然后再对其进行操作。[这可以通过动态强制转换或 typeid 来完成，但是 SO 和 Google 风格指南会因为我违反Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)和所有运行类型检查而生气。

我不能将对节点进行操作的函数放在节点子类本身中，因为树可以在应用程序的不同部分以几种不同的方式使用。有没有更好的方法来构建我的树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:02:40.863

这看起来很适合访问者模式。

[如何用 Python 编写抽象语法树的访问者模式？](https://stackoverflow.com/questions/2525677/how-to-write-the-visitor-pattern-for-abstract-syntax-tree-in-python)

[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:50:36.307

也许[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)也会有用。也看看这篇文章：

[http://blog.jooq.org/2012/04/10/the-visitor-pattern-re-visited/](http://blog.jooq.org/2012/04/10/the-visitor-pattern-re-visited/)

# java - 我的应用程序中的警报

> ID：10484098
> 
> 赞同：1
> 
> 时间：2012-05-07T14:45:57.827
> 
> 标签：java, android, notifications, alarm

我想在我的应用程序中设置一个警报，即使我的应用程序关闭并在 2 小时后停止，每 10 分钟发送一次通知我真的需要它

我想要一个专业的警报来帮助我，这是给我的全科医生的，我应该明天提交

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:50:30.893

我已经写了一个关于如何使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)的非常详细的答案。你可以在[这里](https://stackoverflow.com/questions/10414839/schedule-two-tasks-subsequently-in-android/10415004#10415004)阅读。

关于您的特定情况。[您可以使用cancel()](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)`stopScheduling`方法向调度程序添加一个方法：

```
public class TaskScheduler {
    PendingIntent mPendingIntent;
    AlarmManager mAlarmManager;

    public static void startScheduling(Context context) {
            Intent intent = new Intent(context, MyReceiver.class);
            mPendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
            mAlarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
            mAlarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(), 600, pendingIntent);
    }

    public static void stopScheduling() {
       mAlarmManager.cancel(mPendingIntent);
    }
} 
```

因此，当您想停止调度时，您可以调用该方法。

现在我不知道有任何简单的方法会导致`AlarmManager`2 小时后自行停止，但您可以编写另一个调度程序，该调度程序将在 2 小时后启动以删除第一个调度程序。

我建议你**一步一步来**。首先尝试实现一个简单的警报并使用参数来查看调度如何工作，然后尝试删除此警报。一旦完成这项工作，您就可以轻松完成其余的工作，因为这只是一些基本的编程任务。另请阅读我在[此处](https://stackoverflow.com/questions/10414839/schedule-two-tasks-subsequently-in-android/10415004#10415004)编写的详细答案，因为它提供了设置基本警报所需的所有信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T14:47:47.537

阅读[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

[这是一个例子](http://justcallmebrian.com/?p=129)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T14:54:05.873

正如 Tim 和 Amokrane 所说，AlarmManager 是你的朋友；）

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

示例：

```
 // get a Calendar object with current time
 Calendar cal = Calendar.getInstance();
 // add 5 minutes to the calendar object
 cal.add(Calendar.MINUTE, 5);
 Intent intent = new Intent(ctx, AlarmReceiver.class);
 intent.putExtra("alarm_message", "O'Doyle Rules!");
 // In reality, you would want to have a static variable for the request code instead of 192837
 PendingIntent sender = PendingIntent.getBroadcast(this, 192837, intent, PendingIntent.FLAG_UPDATE_CURRENT);

 // Get the AlarmManager service
 AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
 am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

# ipad - 有没有办法禁用键盘的“脱离”？

> ID：10484101
> 
> 赞同：3
> 
> 时间：2012-05-07T14:46:04.353
> 
> 标签：ipad, ios5

有什么方法可以禁用`UIKeyboard`iOS 5.0 及更高版本的“取消停靠”功能？

现在我的*整个视图*向上移动，当用户激活脱离时它看起来非常紧张。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:04:01.220

这是 iPad iOS 5 独有的新功能，您不能禁用它。

# c# - 通过 XAML 绑定将静态只读值作为 CommandParameter 传递？

> ID：10484102
> 
> 赞同：5
> 
> 时间：2012-05-07T14:46:06.763
> 
> 标签：c#, wpf

我定义了以下类：

```
public static class A
{
      public static readonly double MyWidth = 200d;
} 
```

如果我想将“MyWidth”作为命令参数发送到按钮，我该如何设置 xaml？

```
<Button Caption="Large" CommandParameter="What should I type here?"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:54:23.340

```
CommandParameter="{x:Static ns:A.MyWidth}" 
```

where`ns`已映射到适当的 CLR 命名空间。

# android - 禁用软键盘

> ID：10484103
> 
> 赞同：2
> 
> 时间：2012-05-07T14:46:08.383
> 
> 标签：android, keyboard, android-edittext

`edittext`我的布局中有一个，如下所示：

```
//...    
<EditText
    android:id="@+id/editText_username"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/string_username" >
</EditText>
//... 
```

并且当显示布局时，键盘出现在焦点上`edittext`，但这只是在 ICS 中发生......而且我不希望键盘在`edittext`单击时自动出现。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T14:54:02.480

键盘的初始状态可在您的 Android 清单中配置，如下所示：

```
<activity
android:name=".MainActivity"
android:windowSoftInputMode="stateHidden"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:06:15.370

这是一种可能性：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

您还可以[在本主题中](https://stackoverflow.com/questions/1109022/how-to-close-hide-the-android-soft-keyboard)找到更多可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:52:01.960

采用

```
 InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); 
```

在你的代码中。请参阅：[关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/how-to-close-hide-the-android-soft-keyboard)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T14:53:26.040

检查[这个答案](https://stackoverflow.com/a/2611031/321697)。基本上，只需`android:windowSoftInputMode="stateHidden"`在清单中添加到您的 Activity 即可。这将导致在启动 Activity 时隐藏键盘。

# objective-c - 在 switch 语句中达到默认值后 EXC BAD ACCESS

> ID：10484104
> 
> 赞同：1
> 
> 时间：2012-05-07T14:46:12.157
> 
> 标签：objective-c, ios, cocoa-touch, exc-bad-access

我有这个简单的 switch 语句：

```
switch ([sender tag]) {
    case 0:
        [NVAlertView showNVAlertViewFromView:self.view 
                                       title:@"STOCK NUMBER" 
                                 description:@"XXXXXXXXXXX" 
                                 cancelTitle:@"Cancel" 
                                  otherTitle:@"DONE" 
                                dismissBlock:^(BOOL canceled, NSString *description) {
                                    if (!canceled) {
                                        [newItem setObject:description forKey:@"stocknum"];
                                    }
                                }];
        NSLog(@"YOP!");
        break;

    case kDescription:
        [NVAlertView showNVAlertViewFromView:self.view 
                                       title:@"DESCRIPTION" 
                                 description:@"Enter a description here." 
                                 cancelTitle:@"Cancel" 
                                  otherTitle:@"DONE" 
                                dismissBlock:^(BOOL canceled, NSString *description) {
                                    if (!canceled) {
                                        [newItem setObject:description forKey:@"description"];
                                    }
                                }];
        break;

    case kBrandName:
        [NVAlertView showNVAlertViewFromView:self.view 
                                       title:@"BRAND NAME" 
                                 description:@"Enter a brand name here." 
                                 cancelTitle:@"Cancel" 
                                  otherTitle:@"DONE" 
                                dismissBlock:^(BOOL canceled, NSString *description) {
                                    if (!canceled) {
                                        [newItem setObject:description forKey:@"description"];
                                    }
                                }];
        break;

    case kPrice:
        [NVAlertView showNVAlertViewFromView:self.view 
                                       title:@"PRICE" 
                                 description:@"$199.99" 
                                 cancelTitle:@"Cancel" 
                                  otherTitle:@"DONE" 
                                dismissBlock:^(BOOL canceled, NSString *description) {
                                    if (!canceled) {
                                        [newItem setObject:description forKey:@"description"];
                                    }
                                }];
        break;

    default:
        NSLog(@"default");
        break;
} 
```

每次 aa 值达到默认情况时，它会打印出“默认”并且由于 EXC BAD ACCESS 导致程序崩溃。这是什么原因造成的？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:54:16.883

EXC_BAD_ACCESS 通常是由访问已经被释放的对象引起的。

检查此 switch 块之后的行中的对象，以确保它们的保留计数 > 0。我也会检查发件人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:44:25.950

您在块中设置值的 newItem 的范围是什么？

可能在调用解除块时它已经超出范围 - 请记住，您的警报视图已显示并等待您的输入，但代码继续执行并离开您的 switch 语句（和方法，基于您的解释)

您可以设置另一个创建 newItem 并设置它的值的方法，而不是直接在块中执行操作，然后从dismissBlock 中调用该特定方法。

# c++ - 二叉搜索树分析

> ID：10484105
> 
> 赞同：2
> 
> 时间：2012-05-07T14:46:13.407
> 
> 标签：c++, binary-search-tree

我使用 read 函数创建树，该函数使用 while 循环从文本文件中检索行，在该循环中我创建一个节点，然后使用 insert 方法将节点插入树中的正确位置。

对于我的复制构造函数，我做了类似的事情，我将根传递给一个有点像我的插入函数的辅助函数，然后将传入的节点的名称复制到函数中的一个节点。看起来有点像这样：

```
newNode->name  = pNode->name;           
newNode->left  = copyConstructorHelper(pNode->left);            
newNode->right = copyConstructorHelper(pNode->right); 
```

然后我返回一个新节点。

在运行 Visual Studio 中内置的采样后，读取方法使用了 %36% 的内存，而复制构造函数只使用了 %4。这是一个巨大的差异，有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:54:37.503

部分可能是文件IO；制作第一个方法的版本，从字符串（或相同的数组）获取数据，看看有什么不同。

# python - 熊猫阅读 csv 方向

> ID：10484106
> 
> 赞同：10
> 
> 时间：2012-05-07T14:46:14.547
> 
> 标签：python, csv, pandas

嘿，我正在尝试在 pandas 中读取您可以[从此处下载](http://www.euribor-ebf.eu/assets/modules/rateisblue/processed_files/hist_EURIBOR_2012.csv)的 csv 文件（euribor 利率我想您可以想象我想要这个文件的原因！）。该文件是一个 CSV 文件，但它的方向有些奇怪。如果您将其导入 Excel 文件，则格式为

```
 02/01/2012,03/01/2012,04/01/2012,,,, 
1w 0.652,0.626,0.606,,,,
2w,0.738,0.716,0.700,,,, 
```

让第一列达到 12m（但我已经给了你可以下载示例的链接）。我想在熊猫中阅读它，但我无法以正确的方式阅读它。Pandas 有一个用于读取 csv 文件的内置函数，但不知何故它希望是面向行而不是面向列的。我想要做的是获取标记为 3m 的行的信息，并具有值和日期，以便绘制该索引的时间变化。但我无法处理这个问题。我知道我可以读取数据

```
import pandas 
data = pandas.io.read_csv("file.csv",parse_dates=True) 
```

但如果 csv 文件会以某种方式转置，它会起作用。H

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T15:26:52.707

pandas 数据框有一个`.transpose()`方法，但它不喜欢这个文件中的所有空行。以下是如何清理它：

```
df = pandas.read_csv("hist_EURIBOR_2012.csv")  # Read the file
df = df[:15]    # Chop off the empty rows beyond 12m
df2 = df.transpose()
df2 = df2[:88]  # Chop off what were empty columns (I guess you should increase 88 as more data is added. 
```

当然，您可以将这些链接在一起：

```
df2 = pandas.read_csv("hist_EURIBOR_2012.csv")[:15].transpose()[:88] 
```

然后`df2['3m']`是您想要的数据，但日期仍存储为字符串。我不太确定如何将其转换为`DateIndex`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:26:13.200

我从未使用熊猫进行 csv 处理。我只使用标准的 Python lib csv 函数，因为它们使用迭代器。

```
import csv
myCSVfile=r"c:/Documents and Settings/Jason/Desktop/hist_EURIBOR_2012.csv"
f=open(myCSVfile,"r")
reader=csv.reader(f,delimiter=',')
data=[]
for l in reader:
    if l[0].strip()=="3m":
        data.append(l)

f.close() 
```

# php - 无法重定向到另一个页面

> ID：10484108
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:46:20.230
> 
> 标签：php, html, redirect, post, header

根据我在数据库中检查的输入数据，我需要帮助来解决我的一个问题。如果存在价值，我将转发到另一个页面；否则显示错误。输入任何值显示相同，我无法使用 php 代码查看 echo。单独测试代码可以正常工作，但是当与 html 代码集成时，它会失败。有人可以识别代码中的任何错误吗？如何解决问题？

```
<!DOCTYPE html>
<?php
if (isset($_POST["submit"])) {
    include("connect.php");

    $message = NULL;
    if(empty($_POST["empid"])) {
        $u = FALSE;
        $message .= "You have to enter your Employee ID !<br />";
    }
    else {
        $u = intval(stripslashes(trim($_POST["empid"])));
    }

    if($u) {
        $query = "SELECT Emp_ID FROM Data  WHERE Emp_ID = '$u' ";
        $result = @mysql_query($query);
        $row = mysql_fetch_array($result);
        if($row){
            session_start();
              header("Location: ModifyEmpInfo.php?empid=$u");

            exit();
        }
        else {
            $message .= "Employee ID provided does not exists. Try again!<br />";
        }
    }

}
$page_title = "FindEmpolyee";
if(empty($message)) {
    echo "<font color=red>So sorry, this page is only for Test members !</font>";
}
else {
    echo "<font color=red>";
    echo $message;
    echo "</font>";
}

?>
<html><head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="FindEmpInfo_files/form_init.js" id="form_init_script" data-name="">
    </script><link href="FindEmpInfo_files/jquery-ui-1.css" type="text/css" rel="stylesheet"><link href="FindEmpInfo_files/normalize.css" type="text/css" rel="stylesheet"><script src="FindEmpInfo_files/jquery-1.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="FindEmpInfo_files/default.css" id="theme">
    <title>
      FindEmpolyee
    </title>
  <script src="FindEmpInfo_files/jquery-ui-1.js" type="text/javascript"></script><script src="FindEmpInfo_files/jquery_002.js" type="text/javascript"></script><script src="FindEmpInfo_files/jquery_004.js" type="text/javascript"></script><script src="FindEmpInfo_files/jquery.js" type="text/javascript"></script><script src="FindEmpInfo_files/jquery_003.js" type="text/javascript"></script><script src="FindEmpInfo_files/validation_data.js" type="text/javascript"></script><script src="FindEmpInfo_files/validation.js" type="text/javascript"></script></head>

  <body>
    <form action="<?php $_SERVER['PHP_SELF'] ?>"  method="post" style="WebkitTransform: " id="docContainer" class="fb-toplabel fb-100-item-column selected-object" enctype="multipart/form-data" method="post" action="" novalidate="novalidate" data-form="preview">
      <div style="BACKGROUND-COLOR: #d941d9; MIN-HEIGHT: 20px" id="fb-form-header1" class="fb-form-header">
        <a id="fb-link-logo1" class="fb-link-logo" href="" target="_blank"><img style="display: none;" id="fb-logo1" class="fb-logo" title="Alternative text" alt="Alternative text" src="FindEmpInfo_files/image_default.png"></a>
      </div>
      <div id="section1" class="section">
        <div id="column1" class="column ui-sortable">
          <div style="FILTER: " id="item1" class="fb-item fb-100-item-column">
            <div class="fb-header fb-item-alignment-center">
              <h2 style="DISPLAY: inline; FONT-FAMILY: comic sans ms; COLOR: #249ee0; FONT-SIZE: 28px">
                Find Employee Information
              </h2>
            </div>
          </div>
          <div id="item3" class="fb-item fb-100-item-column">
            <div class="fb-grouplabel">
              <label style="DISPLAY: inline" id="item3_label_0">
                Enter Employee Id
              </label>
            </div>
            <div class="fb-input-number">
              <input id="item3_number_1" name="empid" min="0" max="999999999" step="1" data-hint="" autocomplete="off" required="" type="number" value="<?php if(isset($_POST["empid"])){echo $_POST["empid"];}?>">
            </div>
          </div>
        </div>
      </div>

      <div id="fb-submit-button-div" class="fb-item-alignment-center">
        <input style="" id="fb-submit-button" class="fb-button-special" value="Submit" type="submit" name="submit">
      </div>
    </form>

</body></html> 
```

**解决方案**：问题是名称没有发送到 php 代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:48:03.980

您只能`header`在任何输出发送到浏览器之前使用。

一旦 PHP 遇到你的`<!doctype>`行，它就开始向浏览器发送输出，从标题开始告诉浏览器它正在接收“text/html”。一旦标头被发送，可能不再使用`header`来修改它们。

您需要将*所有*HTML（包括 doctype）移动到重定向的 PHP 代码下方：

```
<?php
...
?>
<!DOCTYPE html>
<html><head>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:47:51.023

您需要在页面上的任何非 PHP 输出之前有重定向代码。标题需要在内容之前发送。现在你有一个`doctype`在你的 PHP 之前。

基本上，只需确保在`header()`调用之前没有向浏览器输出任何内容（通过 out-of-php 文本或通过回显文本或包含的内容）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T14:51:32.943

您需要做的就是将此代码放在最顶部（在其他任何事情之前！）

```
ob_start(); 
```

这将告诉服务器在页面完全创建和生成之前不要发送页面。除了让您实时发送标头（一个非常漂亮的功能）之外，它还包括一些性能优势。您可以在[PHP 手册](http://php.net/manual/en/function.ob-start.php)中了解更多信息。

此外，使用 header() 您必须发送您希望浏览器重定向到的完整 http:// URL，就像 Javascript window.location 一样。

# java - 在 Java 中获取系统块大小

> ID：10484115
> 
> 赞同：13
> 
> 时间：2012-05-07T14:46:51.913
> 
> 标签：java, optimization, file-io, operating-system, system

我正在尝试编写最快、最优化的文件保存方法。有没有办法在java中获取系统块大小？什么东西之类`System.getProperty("block.size")`的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T01:30:13.250

“可能的最快最佳方式”肯定是使用您能负担得起的最大缓冲区进行写入；确保它的大小是 2 的幂（想到兆字节）；并确保写入本身是缓冲区对齐的：

```
new BufferedOutputStream(new FileOutputStream(file), 1024*1024); 
```

只要您超过系统块大小（您将处于此大小）并保持与它保持一致，这是由 保证的`BufferedOutputStream`，这几乎是最佳的。

您还应该查看`FileChannel.transferTo()`，注意您必须在循环中调用它，并且到目前为止的实际实现似乎没有使用任何低级操作系统原语（与广告相反），只是与您相同的循环可以自己写。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T14:55:55.890

我不认为有一个java函数可以做到这一点。但是，有一种依赖于系统的方法来检索该信息。看看这个[答案](https://superuser.com/questions/120809/how-can-i-determine-the-sector-size-on-an-external-hard-drive)。您需要使用 Runtime.exec() 并解析数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-26T10:11:36.937

没有 System 属性，但您可以使用 Java 使用的任何东西来满足自己的需要，并放心，这对您的 OS/Java 版本组合是最好的。

该解决方案利用了`buf`在 Java 的`BufferedXXXStream`类中用于保存数据的事实是一个`protected`变量而不是一个变量`private`：

```
class IdealBlockSize {
    // You could alternatively use BufferedInputStream and System.in .
    private static class MyBufferedOS extends BufferedOutputStream {
        public MyBufferedOS() { super(System.out); }
        public MyBufferedOS(OutputStream out) { super(out); }
        public int bufferSize() { return buf.length; }
    }

    public static int VALUE = new IdealBlockSize.MyBufferedOS().bufferSize();
} 
```

然后，您可以在应用程序启动代码中调用它们，如下所示：

```
System.out.printf("Ideal block size: %d\n", IdealBlockSize.VALUE);

// Output
// Ideal block size: 8192 
```

此解决方案允许您拥有足够大的缓冲区*以*达到最佳效果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-25T10:34:25.490

从 Java 9 开始，您可以使用 FileSystem 和 FileStore 类根据您的本机操作系统实现的文件系统获取系统磁盘块大小。代码如下：

```
 FileSystem fs = FileSystems.getDefault();
    Iterable<Path> roots = fs.getRootDirectories();
    for (FileStore store: fs.getFileStores()) {
        Iterator<Path> i = roots.iterator();
        while(i.hasNext()) {
            if(store.name().startsWith(i.next().toString())) {
                System.out.println("Name: " + store.name() + ", Read only: " + store.isReadOnly() + ", Type: " + store.type() + ", Block: " + store.getBlockSize() + " Bytes");
            }
        }
    } 
```

# backbone.js - 主干和 document.title

> ID：10484117
> 
> 赞同：16
> 
> 时间：2012-05-07T14:46:59.980
> 
> 标签：backbone.js, page-title, backbone-views

我正在使用backbone.js 创建一个单页应用程序，并且想知道处理更改标题的最佳方法。我正在考虑在视图中有一个“标题”选项，并让路由器（以某种方式）设置 document.title。有没有人实现过类似的东西？谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-08T10:25:37.837

为什么不使用 Backbone.js 的事件性质。

首先，我认为不是由路由器来委派文档标题的更新。特别是如果您正在使用较大的客户端应用程序，您希望保持简单并确保应用程序的每个部分都完成特定任务。

路由器用于委派路由，仅此而已。

我的建议是（取决于您如何初始化应用程序）来创建应用程序级事件聚合器。

```
var app = new Application();
app.eventAggregator = _.extend({}, Backbone.Events); 
```

并将事件绑定到您的应用程序，如下所示：

```
app.eventAggregator.on('domchange:title', this.onDomChangeTitle, this); 
```

在您的 Application 构造中的哪个位置

```
onDomChangeTitle: function (title) 
{
   $(document).attr('title', title);
} 
```

现在，不必让路由器始终获取标题并确保`getTitle`每个视图中都有方法，您可以 - 在您的视图中，因此在任何视图中 - 在渲染或初始化视图时触发以下事件：

```
app.eventAggregator.trigger('domchange:title', this.title); 
```

在我看来，它使代码更简洁、更精简，但话又说回来，这只是一种观点。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-05-07T09:35:52.160

为什么你们都使用jQuery来更改文档的标题而不是使用纯Javascript？更快、更简单、更清洁……

```
document.title = 'new title'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-08T01:38:24.983

我建议将代码放在您的路由器回调中。这将是另一行代码，但如果不知道当前视图，路由器/应用程序将不知道哪个视图具有正确的标题。（在不替换 Backbone.JS 中的某些内置函数的情况下，确实没有一个好地方可以覆盖该行为并提供文档标题）。

您可以非常简单地在视图中添加一些内容：

```
var PeopleView = Backbone.View.extend({
    title: 'People are People',
    //
    //or 
    //
    getTitle: function () {
        return "Something Dynamic";
    }
}); 
```

然后在您的路由器回调中：

```
var v = new PeopleView();
$(document).attr('title', v.getTitle()); 
```

另一种选择是在创建视图或调用特殊方法时设置它。但是，我会使用第一个选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-18T04:33:16.877

这就是我做这个我的项目：

```
var App = {};

App.HomeView = Backbone.View.extend({
  documentTitle: 'my site title'
}) 
```

```
var Router = Backbone.Router.extend({
  routes: {
      '':    'home'
    , 'home': 'home'

, baseTitle: ' - my site'

, home: function(actions) {
    var obj = this;
    obj._changePage('HomeView');
  }

, changeTitle: function(title, withoutBaseTitle) {
    var obj = this;

    if(withoutBaseTitle !== true)
      title += obj.baseTitle;

    document.title = title;
    return obj;
  }

, _changePage: function(viewName, viewOptions) {
    var obj = this;
    var page = App[viewName]();

    if(typeof page.documentTitle !== 'undefined') {
      obj.changeTitle(page.documentTitle);
    }
  }

}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-14T18:54:10.197

有点旧的帖子，但我会再给它一个轮回。

* * *

使用当前[`Marionette v3.2.0`](http://marionettejs.com/docs/v3.2.0/marionette.view.html#onevent-listeners)，您可以执行以下操作：

```
// Get title from view where we manage our layout/views
var viewTitle = view.triggerMethod('page:title'); 
```

在您看来，您创建了这样的魔术方法：

```
Mn.View.extend({
    onPageTitle() {
        return ['User', this.model.get('id')].join(' | ');
    }
}); 
```

标题解析本身可以如下：

```
document.title = !!viewTitle
        ? (
            _.isArray(viewTitle)
                ? [baseTitle].concat(viewTitle)
                : [baseTitle, viewTitle]
          ).join(' / ')
        : baseTitle ; 
```

> 允许解析作为数组返回的标题并通过单个分隔符内爆

*   它可以很容易地集成到您管理内容显示的应用程序工作流程中。
*   `onPageTitle`将在视图的上下文中调用（*`this`将是函数内的视图实例*），这使得调用模型数据和任何与视图相关的东西成为可能。
*   无需费心检查方法的可用性，只需调用即可。
*   此外，如果没有定义此类方法以在此类情况下`triggerMethod`返回，则您始终可以回退到默认标题。`undefined`
*   利润！

# javascript - 单击其中的链接时隐藏div

> ID：10484120
> 
> 赞同：0
> 
> 时间：2012-05-07T14:47:06.883
> 
> 标签：javascript, html, css

我的代码与此类似：

```
<div id="box">
    <a href="delete">delete</a>
</div>
<div id="box">
    <a href="delete">delete</a>
</div>
<div id="box">
    <a href="delete">delete</a>
</div> 
```

我想在单击其中的链接时隐藏第一个 div，第二个和第三个 div 也是如此。有没有办法在不更改此代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:51:53.747

是的。

您在页面的其他地方创建 JavaScript：

1.  定义一个 onclick 处理函数“deleteMe()”

    *   该函数将有权访问[`this`](http://www.quirksmode.org/js/this.html)变量，该变量将指向`<a>`被单击的 DOM 元素。

    *   您可以从中向上走 DOM 到父元素，以找到正确的 box div DOM 元素

    *   然后将该框div的样式从更改`block`为`hidden`

2.  然后你的 JS 应该循环遍历每个元素`ID="box"`（我认为你不能这样做，`getElementById()`所以你可能需要循环遍历包含节点的 DOM 子节点）。对于每个框 DIV：

    *   通过 firstChild() 在 DOM 中找到它的第一个子元素 - 这将是`<a>`DOM 元素。

    *   将上述 onclick 处理函数“deleteMe()”分配给`<a>`DOM 元素。

* * *

请注意，我建议将 HTML 修复为具有唯一 ID。你不必让它们独一无二，但它是更好的设计明智的。

您使用重复 ID 的内容应通过类处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:21:34.770

我不会使用 HREF 来启动事件，我只会使用 DIV。尽管如此，如果您想继续使用 HREFS，您可以使用 preventDefault 函数来阻止 HREF 继续进行。

这是一个 JSFiddle 让你开始：http: [//jsfiddle.net/PbzYz/](http://jsfiddle.net/PbzYz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:09:15.760

我假设您是新手，所以也许您会发现 JQuery 更易于使用，它基本上简化了 JavaScript 并使其更易于编码。

这是一个如何在 JQuery 中编写代码的示例

```
<script src="jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {

    $("a").click(function() { //Onclick <a></a>
        $(this).parent().hide(); //Hide it's parent
        return false; //stops the link from submiting
    });

});
</script> 
```

你可以用纯 JavaScript 来做到这一点，但我更喜欢 JQuery，特别是如果你要在 JS 中进行大量编码。

我也同意 DVK 的观点，当多次使用 id 时养成一个坏习惯，因为它们的设计是独一无二的，当涉及到你正在尝试的东西时，类将是你的最佳选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:08:06.897

您需要解决的第一件事是重复`id`值。你不应该复制这些。相反，用于`class`存储值“box”。

```
<div class="box"><!-- ... --></div>
<div class="box"><!-- ... --></div> 
```

此外，您`<a href="delete">`可能应该是`<a class="delete">`. 以下假设您已经进行了这些更改。

接下来，我们需要收集对所有具有“删除”类名称的链接的引用，并为它们绑定一个处理程序，该处理程序将删除或隐藏其父 div。

```
// Get collection of all anchors
var anchors = document.getElementsByTagName("a");

// Iterate over the collection
for ( var i = 0; i < anchors.length; i++ ) {

  // Create an 'alias' for the current anchor being considered
  var currentA = anchors[i];

  // Is this one of our '.delete' anchors?
  if ( currentA.className == "delete" ) {

    // Does this browser support addEventListener?
    if ( currentA.addEventListener ) {

      // Add an event handler via addEventListener
      currentA.addEventListener("click", deleteParent, false);

    // Or, does this browser use attachEvent?
    } else if ( currentA.attachEvent ) {

      // Add an event handler using attachEvent
      currentA.attachEvent("onclick", deleteParent);

    }

  }

} 
```

我们所做的是循环遍历所有锚点，并测试它们是否具有“删除”作为它们的类名。如果是，我们继续做一些*特征检测*，看看浏览器是否支持该`addEventListener`方法。如果是，我们附加`deleteParent`到`click`这个元素的方法。如果该`addEventListener`方法不可用，我们回退到检查是否可用`attachEvent`。

有了这个，我们现在需要创建在`deleteParent`点击链接时调用的函数。

此函数需要获取对调用它的链接的引用，然后爬上它的父父级，直到找到一个具有类“box”的父级。当它发现它时，它会隐藏它：

```
// This function handles the "click" event of our '.delete' anchors
function deleteParent(event) {

  // Determine which element invoked this function
  var link = event.target || window.event.srcElement;
  /* In modern browsers, the event object is passed directly into
     the handler. This is why we can say event.target and learn
     which element invoked the click. In some older browsers
     the event object isn't passed into the handler, but instead
     is only accessible through the global window object.
     This code looks in both places just to be safe. */

  // Get initial guess to who '.box' is
  var parent = link.parentNode;

  // Move up the parent list until we find '.box'
  while ( parent.className != "box" )
    parent = parent.parentNode;

  // Now that we've found '.box', hide it
  parent.style.display = "none";

  // Prevent anchor form navigating away from page
  if ( event && event.preventDefault ) {
    event.preventDefault();
  } else {
    window.event.returnValue = false; 
  }
  /* Similar to the first line of code within this function,
     This portion checks to see if an event object exists
     (meaning a modern browser is being used) and if that 
     event has the preventDefault method. If it does, we
     invoke that method. On the other hand, if that event
     object didn't exist, we assume it must exist on the 
     window object, and that it must have a property of
     returnValue, which we then set to "false". */

} 
```

您可以通过在线示例进一步研究此解决方案：http: [//jsbin.com/azilif/8/edit#javascript,html](http://jsbin.com/azilif/8/edit#javascript,html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T15:17:29.403

您可以在 HTML 页面的头部使用 JQuery。

首先，您需要使框的 ID 唯一，否则单击一个删除链接将删除所有框。

如果你让你的 HTML 看起来像这样：

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

$(document).ready(function(){
  $("#delete1").click(function(){
    $("#box1").hide();
  });

  $("#delete2").click(function(){
    $("#box2").hide();
  });

  $("#delete3").click(function(){
    $("#box3").hide();
  });
});
</script>
</head>

<body>
<div id="box1">
       <a id="delete1">delete</a>
    </div>
    <div id="box2">
        <a id="delete2">delete</a>
    </div>
    <div id="box3">
        <a id="delete3">delete</a>
    </div>
</body>
</html> 
```

所需的 Jquery 在文档中。您可能需要确保将最新版本的 jquery.js 上传到您的服务器。

# javascript - 如何在 Firefox 中获取 JavaScript 堆栈跟踪？

> ID：10484123
> 
> 赞同：9
> 
> 时间：2012-05-07T14:47:18.450
> 
> 标签：javascript, stack-trace

我在 Firefox 上运行了一个 HTML 文件，我想调试它。

我按下`F12`，然后我得到一个控制台/HTML/CSS/Script 菜单。

我怎样才能找到程序的堆栈？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T14:54:35.593

Firebugs 控制台 API 的详细信息在这里：[http](http://getfirebug.com/wiki/index.php/Console_API#console.trace.28.29) ://getfirebug.com/wiki/index.php/Console_API#console.trace.28.29 console.trace() 函数可能是你要找的

# php - Symfony2 和 sudo 权限

> ID：10484124
> 
> 赞同：1
> 
> 时间：2012-05-07T14:47:18.560
> 
> 标签：php, symfony, sudo

我正在使用 Symfony2 开发应用程序。我遇到的问题是，当在实体中通过函数创建文件夹时，创建的文件夹没有 sudo 权限，我想知道如何直接使用 sudo 权限创建文件夹。这是我的代码：

```
 protected function getUploadDirMark()
    {
        // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view.
        return 'uploads/documents/'.$this->getIzenburua();
    } 
```

该`'uploads/documents/'.$this->getIzenburua();`文件夹没有 sudo 权限，如何使用 sudo 权限创建它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:01:37.433

如果常规的`chmod`PHP 功能不起作用，您可以`chmod`使用 sudo 权限执行 shell 命令。

这就是它在您的 Command 类中的样子：

```
$uploadDirmark = $this->getUploadDirMark();
$dialog = $this->getHelperSet()->get('dialog');
$passwd = $dialog->ask($output, 'Please enter sudo password');
exec("echo $passwd | sudo -S chmod -R a+w $uploadDirmark"); 
```

这将使目录及其所有内容对所有用户都可写（和可删除）。根据需要修改命令（有关更多信息，请参见`man chmod`命令行）。像这样打开它有潜在的危险，请尝试将 Web 服务器与创建文件的用户放在同一个组中，并使用“g+w”而不是“a+w”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:15:36.953

这不行吗？ [chmod()](http://php.net/manual/en/function.chmod.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:00:24.813

为什么你需要 sudo 权限呢？由于您的应用程序是由特定用户下的服务器运行的，因此在提供它创建的文件或文件夹时不会有任何问题。

# c# - 在 Windows Phone 7 (C#) 上将事件转换为异步/阻塞调用

> ID：10484130
> 
> 赞同：1
> 
> 时间：2012-05-07T14:47:38.530
> 
> 标签：c#, silverlight, windows-phone-7, c#-4.0, silverlight-4.0

（我之前[问](https://stackoverflow.com/questions/9963301/turn-event-into-a-async-call-c)过这个问题，但忘记提及一些限制。这是针对带有 Silverlight 4 和 C# 4 的 Windows Phone 7.1 (Mango) 的，它缺少`System.Threading.Tasks`，`await`等等。我再次询问希望没有 3rd 的本机解决方案像[这样](http://www.nuget.org/packages/System.Threading.Tasks)的派对库。）

我正在包装一个库供我自己使用。要获得某个属性，我需要等待一个事件，该事件触发得非常快。我正在尝试将其包装到阻塞调用中。

基本上，我想转

```
void Prepare()
{
    foo = new Foo();
    foo.Initialized += OnFooInit;
    foo.Start();
}
string Bar
{
    return foo.Bar;  // Only available after OnFooInit has been called.
} 
```

进入这个

```
string GetBarWithWait()
{
    foo = new Foo();
    foo.Initialized += OnFooInit;
    foo.Start();
    // Wait for OnFooInit to be called and run, but don't know how
    return foo.Bar;
} 
```

怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:52:46.693

你可以这样做：

```
string GetBarWithWait()
{
    foo = new Foo();

    using (var mutex = new ManualResetEvent(false))
    {
        foo.Initialized += (sender, e) => 
        {
            try
            {
                OnFooInit(sender, e);
            }
            finally
            {
                mutex.Set();
            }
        }

        foo.Start();

        mutex.WaitOne();
    }

    return foo.Bar;
} 
```

但是您必须绝对确定 Foo`Initialized`无论发生什么都会调用该事件。否则，您将永远阻塞线程。如果 Foo 有某种错误事件处理程序，请订阅它以避免阻塞您的线程：

```
string GetBarWithWait()
{
    foo = new Foo();

    using (var mutex = new ManualResetEvent(false))
    {
        foo.Error += (sender, e) => 
        {
            // Whatever you want to do when an error happens
            // Then unblock the thread
            mutex.Set();
        }

        foo.Initialized += (sender, e) => 
        {
            try
            {
                OnFooInit(sender, e);
            }
            finally
            {
                mutex.Set();
            }
        }

        foo.Start();

        mutex.WaitOne();
    }

    return foo.Bar;
} 
```

# facebook - 自定义 Facebook 登录按钮文本（HTML5 版本） - FOUC

> ID：10484135
> 
> 赞同：3
> 
> 时间：2012-05-07T14:47:48.663
> 
> 标签：facebook, html, facebook-javascript-sdk

使用 XFBML，可以像这样[更改登录按钮的文本](http://facebook.stackoverflow.com/questions/3792231/fblogin-button-custom)：

```
<fb:login-button>
    Custom login text
</fb:login-button> 
```

也可以使用 HTML5 版本的按钮：

```
<div class="fb-login-button">
    Custom login text
</div> 
```

问题在于，与 XFBML 不同，它在 SDK 加载后呈现，HTML5 版本甚至在 FB SDK 初始化之前就由浏览器呈现，导致之前的登录按钮位置出现纯“自定义登录文本”字符串SDK 对其进行初始化并将其更改为 Facebook 原生外观（类似于 FOUC - 无样式内容的闪存）。

有什么方法可以指定自定义文本并避免这个问题？例如。一些数据参数或任何 JS 方式如何动态更改文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T22:51:29.570

到目前为止，我发现的唯一方法是将自定义登录文本的颜色设置为与背景相同的颜色。然后，一旦加载 SDK，Facebook 就会覆盖颜色。

我直接在div上设置颜色。

希望您找到更好的（本机）方法来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T23:55:00.150

我认为这可能归结为换行符。

Facebook JS SDK 使用

```
login_text:this.dom.textContent || this.dom.innerText 
```

所以，它*应该*选择正确的东西。

这个例子（http://www.fbrell.com/saved/bc55c3f938a9008e1e514fbb97e81535）似乎拉入了登录按钮的自定义文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T16:39:04.043

HTML 上的类在加载后会发生变化。这个 CSS 对我有用：

```
.fb-login-button {
    display: none;
}

.fb_iframe_widget {
    display: block !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T15:23:25.500

我之前必须使用 Twitter 小部件来完成此操作。基本上，您将 facebook 创建的 IFrame 设置为 0 的不透明度。然后，您的自定义按钮“位于”它的“后面”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-03T00:59:22.773

交替

```
.fb-share-button:not(.fb_iframe_widget) {
    display: none;
} 
```

更简洁一点，避免 !important

# facebook - 跟踪 Facebook 广告流量到页面选项卡

> ID：10484138
> 
> 赞同：2
> 
> 时间：2012-05-07T14:47:59.237
> 
> 标签：facebook, facebook-page

我有一个 Facebook 页面选项卡，正在使用各种 Facebook 广告进行推广（通过目标选项卡选项）。

在页面选项卡内有一个按钮。当单击按钮时，我如何在客户端知道哪个特定广告将用户发送到页面选项卡？

# windows - 使用 DirectWrite、Windows API 或其他任何非 sprite 字体在 XNA 中呈现文本

> ID：10484142
> 
> 赞同：0
> 
> 时间：2012-05-07T14:48:10.347
> 
> 标签：windows, text, fonts, xna, directwrite

我正在开发一个适用于任意屏幕分辨率（或窗口大小）的 XNA 游戏，虽然缩小和放大图形效果很好，但缩放 SpriteFonts 看起来很糟糕（更不用说 SpriteFont 本身看起来很糟糕，因为使用的压缩）。为每种尺寸制作一个 SpriteFont 是不可能的，因为尺寸可以是任何东西。

我听说 DirectWrite 甚至 Windows API 是在 XNA 中呈现实际矢量（TrueType 等）字体的一种方式，但找不到任何示例。

这在 XNA 中实现起来有多难？有什么我可以看的例子吗？还有其他选择吗？

显然，我不担心 Windows 以外的任何其他平台，因此任何仅 Windows 的代码都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:20:33.963

你可以看看 Nuclex。他们有矢量文本输出:)

# java - JTextField 和 PlainDocument - 如何在删除事件中打印字符串？

> ID：10484148
> 
> 赞同：0
> 
> 时间：2012-05-07T14:48:33.257
> 
> 标签：java, swing, events, jtextfield, documentlistener

我创建了一个 JTextField 并使用来自 PlainDocument 的扩展类设置 setDocument 属性。

当我从文本框中擦除时，我想打印剩余的字符串，但它只打印了一步。

比方说。如果 JTextField 有一个像 123456789 这样的字符串，并且我用退格键擦除一个字符，那么它会打印 ok (12345678)。但如果我删除让我们说“3”，那么它会显示“1234567”。所以我打印了一个以前的值。如果我然后删除另一个字符，那么它将显示 3 已被删除。. 只是它知道长度发生了变化并在后面少打印了一个字符。

如果我没有说清楚。我想打印从 plainDocument 代码中删除时文本字段具有的“真实”字符串。

当我删除它时，它会触发删除或 removeupdate 方法，当我的文本被打印时。（可能我提前一步打印）

PS：我必须从纯文档中获取值，而不是从外部的 jtextfield 中获取值。

这是我的代码

```
protected void removeUpdate(AbstractDocument.DefaultDocumentEvent evento)
 {                      
        try {               
            super.removeUpdate(evento);
            removePostUpdate(evento);

        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

 }

protected void removePostUpdate(AbstractDocument.DefaultDocumentEvent evento) throws BadLocationException
 {       
     try {              
            palabraCompleta = evento.getDocument().getDefaultRootElement().getDocument().getText(0,evento.getDocument().getDefaultRootElement().getDocument().getLength()-1 );                              
            System.out.println(evento.getPresentationName());               
        } catch (BadLocationException e) {          
            e.printStackTrace();
        }
        System.out.println(palabraCompleta);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:19:11.447

我已经使用默认文档复制了您对 JTextField 所做的操作。

首先，您的代码有一个错误 - 您使用的是长度 - 1 而不是长度。也不确定您是否需要 Document.getDefaultRootElement().getDocument() 这对我来说似乎是错误的。

无论如何，我在下面创建的测试代码运行没有问题。鉴于我在您发布的代码中发现的错误，我会说如果您自定义的内容确实存在问题，那么您尚未在此处发布

```
 public static void testDocument () {
        final JTextField tf = new JTextField();
        tf.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void changedUpdate(DocumentEvent arg0) {
                System.out.println(tf.getText());
                try {
                    System.out.println("printing: " + arg0.getDocument().getDefaultRootElement().getDocument().getText(0,arg0.getDocument().getDefaultRootElement().getDocument().getLength()));
                } catch (BadLocationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            @Override
            public void insertUpdate(DocumentEvent arg0) {
                System.out.println(tf.getText());               
                try {
                    System.out.println("printing: " + arg0.getDocument().getDefaultRootElement().getDocument().getText(0,arg0.getDocument().getDefaultRootElement().getDocument().getLength()));
                } catch (BadLocationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            @Override
            public void removeUpdate(DocumentEvent arg0) {
                System.out.println(tf.getText());               
                try {
                    System.out.println("doc: " + arg0.getDocument().getDefaultRootElement().getDocument().getText(0,arg0.getDocument().getDefaultRootElement().getDocument().getLength()));
                } catch (BadLocationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        });
        WindowUtilities.visualize(tf);
    } 
```

# wpf - 单击超出范围的某个位置时如何防止菜单关闭

> ID：10484149
> 
> 赞同：1
> 
> 时间：2012-05-07T14:48:34.467
> 
> 标签：wpf, menu

当我打开菜单，然后单击窗口中的某处菜单正在关闭时，如何防止它被关闭？

这是我的 XAML-

```
<Grid>
    <Menu Height="40" VerticalAlignment="Top">
        <Menu.Items>
            <MenuItem Header="file">
                <MenuItem Header="Save"/>
            </MenuItem>
        </Menu.Items>
    </Menu>
</Grid> 
```

![在此处输入图像描述](../Images/8ee7190f57bc79d731aab7249cbc07c6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:03:51.213

我相信您将不得不重新模板`Menu`控件，使其`Popup`具有`StaysOpen="true"`. 我不相信`Menu`会公开其模板绑定的任何属性，以便您无需重新模板即可控制它。或者，您可以组合一个解决方案，`Popup`在可视化树中搜索并注入所需的属性值。

但是，真的，我认为您应该完全考虑替代解决方案。这与正常预期的菜单行为有很大的不同，而这种激进的偏离需要激进的推动力。

# php - 关于标头的安全问题（'location: some_page.php'）

> ID：10484150
> 
> 赞同：2
> 
> 时间：2012-05-07T14:48:34.823
> 
> 标签：php

我有一个关于`header('location: ----.php')`. ADMIN 使用此功能限制某些页面的 USER 访问是否安全？例如，如果用户不是管理员，我可以使用此功能来阻止用户查看某些页面吗？这是保护某些页面免受未经授权访问的好方法吗？如果没有，有人可以给我一个安全限制的建议吗？

例如，我将其用于限制：

```
$id = $_SESSION['id'];
$queryget = mysql_query("SELECT * FROM users WHERE id='$id'"); 
$row_12 = mysql_fetch_assoc($queryget);
$admin = $row_12['admin_id'];
$ruka = $row_12['rukovoditelj'];

if($row_12['admin_id'] > 1)
{
    header('Location: dosjei.php');
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:50:39.067

假设您在之后停止执行脚本是安全的（例如退出；命令）。

```
header("Location: dosjei.php");
exit; 
```

当然，您需要在脚本开头进行验证，然后才能在页面上写入一些您需要隐藏给未经授权的用户的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:53:41.117

是的，它是安全的。但前提是你之后退出。这样，即使用户不尊重`Location`标题，他仍然无法看到任何内容。类似于以下内容：

```
if ($row_12['admin_id'] < 1) {
    header("Location: dosjei.php");
    die();
}

display_content_for_authorized_users(); //Would never be reached if $unauthorized is true. 
```

# asp.net - Windows Process Activation Service (WAS) 在启动工作进程为应用程序池提供服务时遇到故障

> ID：10484155
> 
> 赞同：76
> 
> 时间：2012-05-07T14:48:42.873
> 
> 标签：asp.net, iis, iis-7

[IIS 7 应用程序池在浏览到http://localhost/](http://localhost/)时停止

在事件查看器-> 系统日志中，我看到：

> 应用程序池 ASP.NET v4.0 已被禁用。Windows Process Activation Service (WAS) 在启动工作进程为应用程序池提供服务时遇到故障。

我是否可以采取其他故障排除步骤来查看有关为什么会发生这种情况的更详细消息？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-14T17:17:04.407

如果您的应用程序池在特定身份下运行，则过期密码可能是导致问题的原因。

我有类似的问题，请参阅[http://blog.janjonas.net/2012-07-14/iis_75-fix-application-pool-disabled-windows-process-activation-service-failure-worker-process-event-id- 5059](http://blog.janjonas.net/2012-07-14/iis_75-fix-application-pool-disabled-windows-process-activation-service-failure-worker-process-event-id-5059)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-09-15T15:10:51.017

在 IIS 中，转到应用程序池，然后检查应用程序池的标识。

应用程序池是否使用自定义帐户？有必要吗？

*尝试将识别更改为ApplicationPoolIndentity*等内置帐户。为此，请转到*高级设置、流程模型、身份*。请记住在进行更改后重新启动应用程序池。

![IIS 自定义应用程序池标识](../Images/9dcc39d90e6668bee1ecad5059d459d3.png)

![在此处输入图像描述](../Images/ba6971cef159c2613c04f0a27603adaf.png)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-12-09T19:55:39.933

检查帐户或组是否已选中“作为批处理作业登录”权限。要在域控制器上更改此策略，请执行以下步骤：

*   开始>运行 gpmc.msc - 编辑
*   选择森林>域>域名>域控制器
    *   右键单击“默认域策略”并选择编辑
*   下一次编辑：
    *   计算机配置>策略>Windows 设置>安全设置>本地策略>用户权限分配
*   将用户或组添加到“作为批处理作业登录”
    *   如果某个特定组正用于此目的，请检查服务帐户的组成员身份（在 Active Directory 中）。
*   从命令提示符运行“gpupdate /force”

**注意：**这是针对 SharePoint 2010 问题的解决方案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-07T07:12:05.760

我做了以下步骤。

1.  Windows+R 打开运行并输入 services.msc
2.  搜索 Windows Process Activation Service 并为我启动它已停止的服务。
3.  Windows+R 输入 inetmgr。
4.  重新启动所有应用程序池。
5.  尝试在“站点”下启动网站，如果由于万维网发布服务已停止而出现无法启动服务的错误消息。
6.  重复步骤 1。
7.  搜索 World Wide Web Publishing 服务，然后重新启动该服务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-10T14:16:44.633

在我的情况下：我已经看到应用程序池以正确的身份运行，但我仍然看到“WAS 遇到故障......”。因此，我通过在高级设置-> 身份-> 自定义帐户中重新添加用户再次设置相同的身份，重新启动 IIS 并且它工作！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-17T15:32:52.623

在我的开发机器中添加到 janjonas 我将 PW 更改为帐户，但我不知道我必须将用户重新设置为在该用户下运行的每个池

# sed - 替代 grep

> ID：10484158
> 
> 赞同：0
> 
> 时间：2012-05-07T14:48:55.090
> 
> 标签：sed, awk, grep

我正在使用“”在 2.txt 中的 1.txt 中寻找一些模式`grep`。然后做一些操作。但是，似乎“ `grep`”对于大文本来说太慢了。

```
for (( i=1; i<=236410; i++ ))
do 
    head -$i 1.txt|tail -1|grep -f - 2.txt|awk '{mul+=$4*$7} END {print $1,$2,$3,mul}'
done > file1 
```

我只是想知道有什么选择吗？似乎`awk/sed`可以做到这一点，但只是不知道如何将变量通过管道传输`head -$i 1.txt|tail -1`到 awk 或 sed

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:02:54.763

假设您的模式文件有 236,410 行，并且假设`grep`可以处理该数量的输入，并且假设输出文件的顺序不重要，为什么不这样做

```
grep -f 1.txt 2.txt | awk ... >file1 
```

如果内存是一个问题，并且您的输入是静态字符串，请尝试使用`fgrep`；它可以处理大量的模式。如果输出的顺序实际上很重要，那么这样的事情应该会快很多；

```
while read line; do
  grep "$line" 2.txt | awk ...
done <1.txt >file1 
```

根据输入，您可能想要使用`IFS`和/或添加一些选项`read`来处理空​​格、反斜杠等。

如果您只想要 236,410 的第一行输入，您可以将其更改为

```
head -n 236410 1.txt |
while read line ... 
```

如果以上都不适合你，这里有另一个想法。由于`awk`无论如何您都在使用实际处理，因此您可以将所有处理重构为一个`awk`脚本，或者动态创建一个`sed`脚本并将其输出传递给`awk`. 这有点涉及，并且再次取决于您的模式是什么样的，但是这样的事情应该给您一个想法：

```
sed 's%.*%/&/p%' 1.txt | less 
```

您正在查看的是一个`sed`脚本，该脚本会打印`1.txt`. （如果任何模式包含正斜杠，它将中断。在简单的情况下，使用不同的分隔符，或转义模式中的所有斜杠。）现在您可以将其保存到文件中，或者（如果您`sed`可以处理标准脚本输入）将其传递给第二个实例`sed`：

```
sed 's%.*%/&/p%' 1.txt | sed -f - -n 2.txt | less 
```

这就是您要传递给的内容`awk`：

```
sed 's%.*%/&/p%' 1.txt | sed -f - -n 2.txt | awk ... >file1 
```

# assembly - Ivy Bridge 上 RDRAND 指令的延迟和吞吐量是多少？

> ID：10484164
> 
> 赞同：31
> 
> 时间：2012-05-07T14:49:21.913
> 
> 标签：assembly, intel, rdrand

[我在agner.org](http://www.agner.org/optimize/#manuals)上找不到任何关于[RDRAND](http://en.wikipedia.org/wiki/RdRand)指令的延迟或吞吐量的信息。但是，这个处理器是存在的，所以信息必须在那里。

编辑：实际上最新的优化手册提到了这个指令。它被记录为 <200 个周期，在 Ivy Bridge 上的总带宽至少为 500MB/s。但是关于这条指令的一些更深入的统计数据会很好，因为延迟和吞吐量是可变的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-14T23:32:37.223

我写了 librdrand。使用 RdRand 指令用随机数填充缓冲区是一组非常基本的例程。

我们在 IDF 上展示的性能数据来自我编写的测试软件，该软件在 Linux 中使用 pthread 生成了许多线程。每个线程使用 RdRand 拉取随机数填充内存缓冲区。该程序测量平均速度，并且可以在改变线程数的同时进行迭代。

由于从每个核心到共享 DRNG 和返回的往返通信延迟比在 DRNG 生成随机数所需的时间长，因此平均性能会随着线程的增加而明显增加，直到达到最大吞吐量. IVB 上 DRNG 的物理最大吞吐量为 800MBytes/s。具有 8 个线程的 4 核 IVB 管理大约 780Mbytes/s 的速度。使用更少的线程和内核，可以实现更少的数量。500MB/s 的数字有些保守，但当你试图做出诚实的性能声明时，你必须这样做。

由于 DRNG 以固定频率 (800MHz) 运行，而内核频率可能会有所不同，因此每个 RdRand 的内核时钟周期数会有所不同，具体取决于内核频率和同时访问 DRNG 的其他内核的数量。IDF 演示文稿中给出的曲线是对预期结果的真实表示。整体性能受核心时钟频率的影响不大，但影响不大。线程数是主导因素。

在测量 RdRand 性能以实际“使用”RdRand 结果时应该小心。如果你不这样做，IE 你这样做了.. RdRand R6, RdRand R6,....., RdRand R6 重复了很多次，性能会被认为是人为的高。由于数据在被覆盖之前没有被使用，因此 CPU 流水线在发出下一条指令之前不会等待数据从 DRNG 返回。我们编写的测试将生成的数据写入将在片上缓存中的内存，因此管道会停止等待数据。这也是为什么超线程使用 RdRand 比使用其他类型的代码更有效的原因。

IDF 幻灯片中给出了具体平台、时钟速度、Linux 版本和 GCC 版本的详细信息。我不记得头顶上的数字了。有更慢的可用芯片和更快的可用芯片。我们给出的每条指令 <200 个周期的数字是基于每条指令大约 150 个核心周期的测量值。

这些芯片现已上市，因此任何精通 rdtsc 使用的人都可以进行同样的测试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T07:38:21.227

您可以在[英特尔数字随机数生成器 (DRNG) 软件实施指南](http://software.intel.com/en-us/articles/intel-digital-random-number-generator-drng-software-implementation-guide/)中找到一些相关信息。

逐字引用如下：

> 测量吞吐量：
> 
> ```
> Up to 70 million RDRAND invocations per second
> 500+ million bytes of random data per second
> Throughput ceiling is insensitive to the number of contending parallel threads 
> ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-10T16:21:29.777

我已经使用英特尔的[“librdrand”](http://software.intel.com/file/44187)包装器对实际的 Ivy Bridge i7-3770 进行了一些初步的吞吐量测试，它在单个内核上每秒生成 33-35 百万个 32 位数字。

Intel 的这个 70M 数字大约是 8 个核心；他们只报告了大约 10M，所以我的测试要好 3 倍以上：-/

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-14T17:01:40.207

以下是我使用 rdrand 获得的一些性能数据：http: [//smackerelofopinion.blogspot.co.uk/2012/10/intel-rdrand-instruction-revisited.html](http://smackerelofopinion.blogspot.co.uk/2012/10/intel-rdrand-instruction-revisited.html)

在 i5-3210M（2.5GHz）Ivybridge（2 核，4 线程）上，4 个线程的峰值为每秒约 9960 万个 64 位 rdrand，相当于每秒约 63.74 亿位。

An 8 threaded i7-3770 (3.4GHz) Ivybridge (4 cores, 8 threads) I hit a peak throughput of 99.6 million 64 bit rdrands a second on 3 threads.

# spring - Application Context 已销毁，SessionFactory 也已销毁

> ID：10484176
> 
> 赞同：0
> 
> 时间：2012-05-07T14:50:12.437
> 
> 标签：spring, destroy

我正在开发一个由 Spring 3、Hibernate（基于注释）和 Apapache CXF 组成的 Web 应用程序。

我遇到了一些奇怪的问题，当 Web 服务器（ tomcat ）加载上下文时，所有的 bean 都通过 spring 容器加载，但随后 spring 容器立即开始销毁那些加载的 bean ......我遇到了类似的异常

> DefaultListableBeanFactory.destroySingletons(422) | 销毁 org.springframework.beans.factory.support.DefaultListableBeanFactory@744589eb 中的单例：定义 bean（然后被销毁的 bean 列表）。

立即和之后，我确实收到一条消息（[错误]

> ContextLoader.initWebApplicationContext(227) | 上下文初始化失败）
> 
> 原因：java.lang.IllegalArgumentException：org.springframework.dao.support.DaoSupport 的 org.springframework.orm.hibernate3.support.HibernateDaoSupport.checkDaoConfig(HibernateDaoSupport.java:118) 需要“sessionFactory”或“hibernateTemplate”。 afterPropertiesSet(DaoSupport.java:44) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477) at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) ... 36 更多

我真的不知道为什么容器会破坏豆子。

有人可以帮我解决这个奇怪的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:41:49.597

这样做是因为由于配置问题而无法启动。修复问题（请参阅您在问题中粘贴的异常：），`'sessionFactory' or 'hibernateTemplate' is required`它应该开始。

# python - 在 Windows 7 X64 上使用 distutils 将数据文件安装到 %APPDATA%

> ID：10484184
> 
> 赞同：6
> 
> 时间：2012-05-07T14:50:53.123
> 
> 标签：python, distutils

我使用在 Windows XP 上运行良好的 distutils 设置例程不适用于 Windows 7。以下是具体细节：

我的包有很多配置文件，我安装到 %APPDATA% 中。在 Windows 上，我使用 bdist_wininst 选项运行 setup.py 来创建安装程序。在 Win7 上，安装程序然后以管理员身份执行，以便可以将模块安装到 %PROGRAMFILES%\Python 等。安装不会报告任何错误，但您可能已经猜到配置文件不会安装到 %APPDATA% 或其他任何地方（我搜索过它们）。

如果我以管理员身份打开一个 cmd 并使用安装选项直接安装我的包（setup.py install），那么一切正常。

那么，我在这里缺少什么？这是图形安装程序的限制还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:35:05.487

您可以使用类似 *nix 上的通用解决方案。将配置文件安装到`%PROGRAMFILES%`，并`%APPDATA%`在程序检测到特定用户第一次运行程序时将它们复制到（可以通过检查配置文件是否丢失来检测）。

# java - Web 容器成功启动后如何调用 servlet 或控制器上的方法

> ID：10484186
> 
> 赞同：2
> 
> 时间：2012-05-07T14:51:03.620
> 
> 标签：java, servlets, spring-mvc

我正在使用 Spring MVC 实现一个 RESTful Web 服务。当服务启动时，它需要注册自己，以便客户端可以找到它。我目前正在 @Controller 类的 @PostConstruct 方法中执行此操作。但这会在服务实际准备好接收请求之前注册服务，因为 Web 容器尚未侦听 Web 请求。我希望在 Web 容器完成所有初始化并正在侦听请求后注册服务。

我一直在寻找一个监听器和/或事件，它会在容器启动时通知我，但我还没有找到。

我可能“过早优化”。最终的完整部署环境将需要对每个服务的一组副本进行负载平衡，并且负载平衡器必须负责确定每个实例的实际服务可用性和当前负载。

**编辑**：附加说明。

我想向*外部注册表*注册服务（具体而言，在本例中是 Zookeeper 实例）。我希望在应用程序服务器*完成*初始化并“营业”之前不要将服务添加到注册表中。当我使用 @PostConstruct 时，它似乎给出了与 相同的基本顺序`ServletContextListener.contextInitialized()`，我的日志输出看起来像这样：

```
INFO : MyController - Registering service foo 0.1.0 at 192.168.34.15:8080
...
May 7, 2012 3:42:49 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
May 7, 2012 3:42:49 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080 
```

我想看到的是：

```
INFO: Starting Coyote HTTP/1.1 on http-8080
...
INFO : MyController - Registering service foo 0.1.0 at 192.168.34.15:8080
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:32:09.413

您正在寻找的侦听器是`javax.servlet.ServletContextListener`及其方法（并在 web.xml 中或使用`contextInitialized(..)`注册它）`<listener><listener-class>..``@WebListener`

如果你需要一个spring bean，你可以使用：

```
WebApplicationContextUtils.getRequiredWebApplicationContext(ctx).getBean(..); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:39:38.833

我的第一个猜测是您应该查看[javax.servlet.ServletContextListener](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)但我不确定这是否会对您有所帮助，因为 Spring 通常是在这样的侦听器中初始化的。检查你`web.xml`的这样一行：

```
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class> 
```

如果存在，那么`ApplicationContext`将在创建上下文后立即创建（理论上，应用程序此时可以服务请求，但实际上，您处于最终配置阶段）。

所以问题是你想要实现什么。如果要为每个请求创建一个新 bean，请使用“请求”范围。

如果您只是想延迟 bean 创建，那么您应该给出这样做的技术原因。

# android - MotionEvent.getPointerCount() 始终为 1

> ID：10484188
> 
> 赞同：14
> 
> 时间：2012-05-07T14:51:11.773
> 
> 标签：android, multi-touch, android-gesture

尝试在我的应用程序中实现多点触控时，我以某种方式得到了意想不到的结果。我永远不会获得超过一个指针的数据。我的手机上的多点触控确实有效，因为我可以在浏览器中进行捏合缩放并使用 GestureDetector 检测捏合手势，但`action=0 pointers=1`无论我用多少手指触摸屏幕，都会打印以下示例。

我需要在配置/AndroidManifest 或 Activity 创建中做些什么

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    findViewById(R.id.ll1).setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Log.d("TAG","onTouch action="+event.getAction()+" pointers="+event.getPointerCount());
            return false;
        }
    });
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-29T14:23:36.667

问题是我正在返回`false`，`onTouch`因此尚未生成新的触摸事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-23T06:10:23.523

就我而言，我意识到这`getPointerCount()`并没有改变，因为它在动作内部被调用，`MotionEvent.ACTION_DOWN`这意味着它永远是一个。

解决方案是将它移动到移动时`MotionEvent.ACTION_MOVE`需要指针计数，或者在动作之外，如果在触摸时需要指针计数，则移动到 onTouch 实现。我希望这可以帮助那些可能不像我这样理解这一点的人。

# c# - DataGridViewRowCancelEventArgs 不会触发

> ID：10484189
> 
> 赞同：0
> 
> 时间：2012-05-07T14:51:16.227
> 
> 标签：c#, sql-server, winforms, data-binding, datagridview

Windows 窗体应用程序。C# 4.0。

我有一个 datgridview 绑定到 Windows 窗体上的 MS SQL 表。上面还有一个删除按钮。当我选择一行并单击按钮时，我想删除一行。它做得很好。但我想在删除操作之前添加一个提醒。但是我发现它不起作用。它从不触发事件 dgv_UserDeletingRow。

```
private void DeleteRow_Click(object sender, EventArgs e)
    {
        try
        {
            DataRowView currentDataRowView = (DataRowView)dgv.CurrentRow.DataBoundItem;
            DataRow row = currentDataRowView.Row;
            // Delete Table here and successfully
        }
        catch (Exception exceptionObj)
        {
            MessageBox.Show(exceptionObj.Message.ToString());
        }

    }

    private void dgv_UserDeletingRow(object sender, DataGridViewRowCancelEventArgs e)
    {
        if (!e.Row.IsNewRow)
        {
            DialogResult res = MessageBox.Show("Are you sure you want to delete this row?", "Delete confirmation",
                     MessageBoxButtons.YesNo, MessageBoxIcon.Question);
            if (res == DialogResult.No)
                e.Cancel = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T18:42:30.520

将“与用户确认”代码移动到`DeleteRow_Click`处理程序中。

# winforms - Powershell - 浏览文件夹 - 更好的方法？

> ID：10484192
> 
> 赞同：1
> 
> 时间：2012-05-07T14:51:30.383
> 
> 标签：winforms, powershell

我正在使用提示用户选择一个或多个文件夹的脚本。代码如下。

```
$wrkfolder = "C:\MyPC\WorkingFolder"              #workfolder starting location

$app = New-Object -ComObject shell.Application

# Display Browse for File to select a folder or ALL folders
$folder = $app.BrowseForFolder(0,"Select Folder -- Cancel to select ALL",0,$wrkfolder)

    if ($folder.self.path -ne "") {
        $fldr = $folder.Self.Path
        $fldrName = $folder.Self.Name
        } 
```

目前，它会通过文件夹浏览输入对话框提示用户，如果用户选择 CANCEL，它将选择$wrkfolder 中的**所有**文件夹。或者，如果他们选择一个文件夹，它将返回该文件夹。如果用户关闭对话框，它会返回 $null（这与选择取消相同）。

我希望脚本允许用户选择一个文件夹，选择多个文件夹，选择所有文件夹，并让 Cancel 实际关闭对话框并返回一个值，然后我可以退出脚本。

无需在此表单上重新发明轮子，是否有一种简单的方法可以通过浏览输入文件夹对话框提示用户并允许他们选择 1+ 个文件夹、所有文件夹或取消脚本？必须有比我迄今为止所拥有的更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:49:53.063

除非您正在运行 PowerShell V3 测试版，否则这对您没有帮助，但为了将来参考，您可以使用`Out-GridView's`新`PassThru`参数，例如：

```
Get-ChildItem -Directory | Out-GridView -PassThru | ... 
```

`Out-GridView`允许多选，您也可以通过取消按钮取消整个管道操作。

# javascript - 在 iOS 上的 Safari 中刷新图像

> ID：10484198
> 
> 赞同：1
> 
> 时间：2012-05-07T14:51:45.047
> 
> 标签：javascript, ios, caching, safari, browser-cache

我有一个 Javascript 应用程序需要经常刷新一些缩略图。

我创建了一个计时器，它将`src`缩略图的属性从更改`someImage.jpg`为`someImage.jpg?0`，然后`someImage.jpg?1`以此类推。在所有桌面浏览器上，这有效地强制重新加载图像，这可能 - 或可能不会 - 在服务器上发生变化。

但是 iOS 上的 Safari（iPad 和 iPhone）似乎有一个更激进的缓存策略来打败这个策略。它愉快地忽略了查询字符串并且不发出对新资产的请求。

> 有没有办法强制所有浏览器（包括 Safari）重新加载图像？

在最坏的情况下，应该起作用的一件事实际上可能是更改服务器上图像的 URL。不幸的是，这可能不在我的控制之下，因此我正在寻找一个 Javascript 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:08:44.447

事实证明，问题只是 Safari 保留了更多下载资产的副本，即使在页面重新加载时也是如此，因此所有名为 等的图像`someImage.jpg?0`都`someImage.jpg?1`已经在缓存中。移动到随机查询字符串证明是可行的。

# java - 有没有办法使这个脉冲数无限？

> ID：10484201
> 
> 赞同：0
> 
> 时间：2012-05-07T14:51:53.193
> 
> 标签：java, android, button, infinite, pulse

我创建了一个按钮来触发我的应用程序上的脉冲 LED 动作，但我不能让它永远脉冲。它总是按值脉冲（在上面的示例中，您会看到它脉冲 10 次然后停止）

```
//Button Pulse
Button bpulse = (Button) findViewById(R.id.bpulse);
bpulse.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
    // TODO Auto-generated method stub                  
    Intent led = new Intent(IlluminationIntent.ACTION_START_LED_PULSE);

    led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.devsgonemad.xslc");

    led.putExtra(IlluminationIntent.EXTRA_LED_ID,
                     IlluminationIntent.VALUE_BUTTON_2);

    led.putExtra(IlluminationIntent.EXTRA_LED_NO_OF_PULSES, 10);

    led.putExtra(IlluminationIntent.EXTRA_LED_PULSE_ON_TIME, 1000);

    led.putExtra(IlluminationIntent.EXTRA_LED_PULSE_OFF_TIME, 1000);

    led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, m_ledColor);

    startService(led);

    m_isEnabled = true;
} 
```

当按下按钮直到用户返回应用程序并停止脉冲时，我怎样才能永远使这个脉冲？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:58:14.640

使用while循环怎么样？您可以将脉冲数设为 1，并让它在 while 循环中连续运行，直到满足某个条件（在您的情况下按下某个按钮）。

```
while(buttonNotPressed){
  led.putExtra(IlluminationIntent.EXTRA_LED_NO_OF_PULSES, 1);
  startService(led);
} 
```

当然，这有一个明显的缺陷，您可能会启动许多并行服务，所有这些服务都试图使 LED 闪烁一次。但我想您可以控制您的 while 循环以等待服务结束，然后再开始下一次迭代。
编辑：对于等待您的服务的while循环，您需要在您的服务中添加某种标志，while循环可以等待。服务完成后，可以设置标志并且 while 循环可以移动到下一次迭代，从而让您无限循环闪烁，直到按下按钮。

# python - 在 Python 中使用 sys.argv 并将参数传递给仪器

> ID：10484205
> 
> 赞同：0
> 
> 时间：2012-05-07T14:51:59.380
> 
> 标签：python, parameter-passing, visa

我有一个小问题。我必须将参数传递给我的测量设备以设置电压值。我的代码如下

```
from visa import *
import sys
inst = instrument("USB0::0x164E::0x0DAD::TW00004282")
inst.write("*rst; status:preset; *cls")
inst.write("CONF:VOLT:AC 1") 
```

上面的代码将电压表配置为 AC 值 1 没有任何麻烦。但它只能设置值 1。我尝试使用以下代码使其更通用。

```
from visa import *
import sys
inst = instrument("USB0::0x164E::0x0DAD::TW00004282")
inst.write("*rst; status:preset; *cls")
a = 1
inst.write("CONF:VOLT:AC a") 
```

但是这段代码返回了一个错误。

我的原始代码看起来像

```
from visa import *
import sys
inst = instrument(sys.argv[1]) #Passing USB address from client side
inst.write("*rst; status:preset; *cls")
a = sys.argv[2]  #Passing value of 'a' from the client side
inst.write("CONF:VOLT:AC a") 
```

我最终会从我的客户端传递参数值，这超出了这个问题的范围。

现在有另一种通用的方法来分配值`a`然后将其传递给写函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:54:52.763

字符串中的`"a"`被解释为文字`a`。你应该使用：

```
inst.write("CONF:VOLT:AC %s" % sys.argv[2]) 
```

或者最好将其转换为 an`int`并首先检查它：

```
volt = int(sys.argv[2])

# Check if volt is in a suitable range...
inst.write("CONF:VOLT:AC %d" % volt) 
```

# objective-c - iOS Foundation：系统字体大小

> ID：10484211
> 
> 赞同：18
> 
> 时间：2012-05-07T14:52:12.037
> 
> 标签：objective-c, ios, uifont

我想知道iOS应用tableView中的systemFontSize对于textLabel是否**总是**相同的？这是取决于风格？

例如，当我 `NSLog(@"%f",[UIFont systemFontSize]);`得到 14.0\. 这总是一样的吗？

更重要的是：如何在不更改字体系列的情况下更改字体大小（假设我的 plist 中有自己的字体）。

我试过：

```
cell.textLabel.font = [UIFont fontWithName:@"Sansation-Light" size:12.0]; 
```

但是 UIFont 总是想要我的字体名/系列。我怎样才能避免这种情况并在我的所有屏幕上使用一种字体并且只更改大小？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-07T15:01:42.203

系统字体描述如下：

```
+ (CGFloat)labelFontSize;//Returns the standard font size used for labels.
+ (CGFloat)buttonFontSize;//Returns the standard font size used for buttons.
+ (CGFloat)smallSystemFontSize;//Returns the size of the standard small system font.
+ (CGFloat)systemFontSize;//Returns the size of the standard system font. 
```

并且您可以在没有字体系列的情况下更改字体大小，如下所示：

```
cell.textLabel.font = [UIFont systemFontOfSize:14]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-02T08:51:49.103

系统字体大小并不总是相同的。从 iOS 7 开始，有[`Dynamic Type`](http://useyourloaf.com/blog/supporting-dynamic-type/). 用户可以在系统设置中设置自己喜欢的字体大小。这是应用程序现在获取和设置其字体大小的推荐方式。

在 Interface Builder 中，您可以选择类似`Body`或`Title 1`在字体设置下的内容。实际尺寸将根据用户的系统设置进行调整。您以编程方式使用`UIFont.preferredFont(forTextStyle: )`. 有关在 iOS 10 和 Swift 3 中执行此操作的更多详细信息，请参阅[这篇文章](http://useyourloaf.com/blog/auto-adjusting-fonts-for-dynamic-type/)。

也可以看看

*   [排版文档](https://developer.apple.com/ios/human-interface-guidelines/visual-design/typography/)
*   [iOS 文本编程指南](https://developer.apple.com/library/content/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/CustomTextProcessing/CustomTextProcessing.html#//apple_ref/doc/uid/TP40009542-CH4-SW65)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-03T13:51:14.877

只是为了补充上面的答案。上述方法是 UIFont 类的成员。所以要获得默认的按钮字体大小......

```
float defaultFontSize = [UIFont buttonFontSize]; 
```

# c++ - 即使使用最新的 sdk 也会出现错误 rc1106

> ID：10484214
> 
> 赞同：0
> 
> 时间：2012-05-07T14:52:17.290
> 
> 标签：c++, visual-studio-2010, visual-c++, sdk, fatal-error

我做了一个应用程序，它给了我一个错误，比如

`RC : fatal error RC1106: invalid option: -ologo` 虽然我已经安装了最新的 win sdk 7.0。我可能会错过什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:54:53.073

它应该是`/nologo`，只需在项目属性中修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:19:05.807

I got same problem. I fixed this by go to project property -> Resources -> General and set **"Suppress Startup Banner"** to **"No"**

# objective-c - 如何从 AppDelegate.m 重新加载 TableView 数据？

> ID：10484215
> 
> 赞同：1
> 
> 时间：2012-05-07T14:52:24.907
> 
> 标签：objective-c, xcode, uitableview

我尝试从 AppDelegate.m 重新加载 TableView 数据，但没有成功。

这是代码（在 HomeViewController 中工作）：

**AppDelegate.m**

```
...
- (void)applicationWillEnterForeground:(UIApplication *)application
{
[self refreshTableData];
}

-(void)refreshTableData{

    UINavigationController *navController = [[self.tabBarController viewControllers] objectAtIndex:0];
    HomeViewController *home = [[navController viewControllers] objectAtIndex:0];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"MYTable" inManagedObjectContext:home.context];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];

    [request setFetchBatchSize:20];

    [request setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"orderEnt" ascending:YES];

    NSArray *newArray = [NSArray arrayWithObject:sort];

    [request setSortDescriptors:newArray];

    NSError *error;

    NSMutableArray *results = [[home.context executeFetchRequest:request error:&error] mutableCopy];

    [home setArr:results];

    //NSLog(@"%@", home.arr);//here is showed correct data

    home.context = self.managedObjectContext;

    [home.myTableView reloadData];

}
... 
```

有人知道如何从 AppDelegate.m 重新加载数据吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:10:59.860

你可以实施

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadTableViewData) name:@"ReloadAppDelegateTable" object:nil]; 
```

在你的`viewDidLoad()`方法和

```
- (void)reloadTableViewData{
  [self.myTableView reloadData];
} 
```

在要重新加载数据的类中。

然后你发送这样的通知

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ReloadAppDelegateTable" object:nil]; 
```

每当您想重新加载数据时。

**经过几年的 iOS 开发经验后请注意：** 虽然这是一个非常简单和舒适的解决方案，但它并不是 100% 可靠的。在某些情况下，通知可能会延迟几秒钟。我强烈建议为您的`UITableViewController`.

* * *

# ios - 注册 GPX（或 XML）文件以在 iOS 应用程序中打开

> ID：10484220
> 
> 赞同：20
> 
> 时间：2012-05-07T14:52:49.400
> 
> 标签：ios, cocoa-touch, ios4, ios5

我无法在我的 iOS 应用程序中打开 GPX 文件。我注册了扩展名，一些文件正确打开，也就是说，当我在 Safari 中点击指向 GPX 文件的链接时，它会显示一个提示，询问我要使用哪个应用程序来打开文件。然后我选择我的应用程序并按预期处理文件。对于 Safari 中的某些网站以及电子邮件附件中的所有文件，不显示提示和应用程序选择，并且浏览器/电子邮件应用程序将文件内容显示为文本。

我怀疑这是 info.plist 设置的问题，或者可能是 Safari 和电子邮件应用程序的问题。如果您在 ios 应用程序中正确打开 XML 或 GPX 文件，您会从 info.plist 中发布您的 CFBundleDocumentTypes 和 UTExportedTypeDeclarations 设置吗？

欢迎任何想法。这是我的 info.plist 中的相应部分。我尝试添加和删除一些可选标签，这是最新的，但不是最完整的。

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeIconFiles</key>
        <array>
            <string>Icon.png</string>
            <string>Icon@2x.png</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>GPS eXchange Format</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>org.elsners.Indicium.gpx</string>
        </array>
    </dict>
</array>
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.xml</string>
        </array>
        <key>UTTypeDescription</key>
        <string>GPS eXchange Format</string>
        <key>UTTypeIdentifier</key>
        <string>org.elsners.Indicium.gpx</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <array>
                <string>GPX</string>
                <string>gpx</string>
            </array>
        </dict>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-07T17:59:22.470

处理 HTTP 内容时（Safari 和 Mail 应用程序就是这种情况），您不能忘记处理其内容类型。处理内容类型的[统一类型标识符](https://developer.apple.com/library/mac/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html)(UTI) 是`public.mime-type`，假设服务器响应的内容类型标头设置为*application/gpx*，因此在您的*plist*中，您必须添加到该`UTTypeTagSpecification`部分：

```
<dict>
  <key>public.filename-extension</key>
   <array>
     <string>GPX</string>
     <string>gpx</string>
   </array>
   <key>public.mime-type</key>
   <string>application/gpx</string>
</dict> 
```

**注意**：我已经看到*application/gpx*和*application/gpx+xml*作为网络上 GPX 数据的内容类型，我不知道是否有标准的 mime 类型，所以最好同时使用两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T11:29:32.557

试试这个代码...

```
(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{

    if (url != nil && [url isFileURL]) {

        //  xdxf file type handling

        if ([[url pathExtension] isEqualToString:@"xdxf"]) {

            NSLog(@"URL:%@", [url absoluteString]);

        }

    }

    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T09:35:35.747

我认为必须删除以下部分：

```
<key>UTTypeConformsTo</key>
<array>
    <string>public.xml</string>
</array> 
```

我用它重现了这个问题，并通过删除来修复。

显然邮件应用认为它可以比其他应用更好地处理符合 XML 的类型，并拦截处理。

我还建议包括对[Wallace Campos 发布的答案的](https://stackoverflow.com/questions/10484220/registering-gpx-or-xml-file-to-open-in-ios-app/34662032#34662032)更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-02T09:39:35.140

我面临着类似的问题。我的应用程序没有显示在从邮件应用程序打开 XML 附件的应用程序列表中。我在 info.plist 中使用了这段代码，它对我有用：

```
<key>CFBundleDocumentTypes</key>
    <array>
      <dict>
        <key>CFBundleTypeName</key>
        <string>XML File</string>
        <key>LSHandlerRank</key>
        <string>Default</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
          <string>public.XML</string>
        </array>
        <key>CFBundleTypeIconFiles</key>
        <array>
          <string>Sandbox-icon.png</string>
        </array>
      </dict>
    </array> 
```

参考：http: [//iosdevelopertips.com/core-services/how-to-register-file-types-supported-by-an-ios-app.html](http://iosdevelopertips.com/core-services/how-to-register-file-types-supported-by-an-ios-app.html)

# objective-c - 从不同的ControllerClass实现UITableView作为子视图

> ID：10484221
> 
> 赞同：0
> 
> 时间：2012-05-07T14:52:49.353
> 
> 标签：objective-c, uiscrollview, storyboard, uitableview

我正在尝试将不同 (Table)ViewController 中的 TableView 实现为 Scrollview。我现在确实尝试了几个小时，但我无法弄清楚问题所在。我得到的错误是：

> -[UISectionRowData numberOfSectionsInTableView:]：无法识别的选择器发送到实例 0x687fdb0 2012-05-07 16:47:18.966 Test2[12212:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UISectionRowData numberOfSectionsInTableView:]:无法识别的选择器发送到实例 0x687fdb0'

这是我正在使用的代码段（在 viewDidLoad() 方法中实现）：

```
DateSubviewController *dateSubviewController = [[DateSubviewController alloc] init];
//This is the tableViewController which handles the code from the tableView I want to implement. 

NSArray *views = [NSArray arrayWithObjects: [dateSubviewController view], nil];

self.scrollView.delegate = self;
self.pageControlBeingUsed = YES;

for (int i = 0; i < views.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    UITableView *subview = [views objectAtIndex:i];
    [self.scrollView addSubview:subview];

    subview = nil;
}

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * views.count, self.scrollView.frame.size.height); 
```

滚动视图正在自己工作（使用不同颜色的框架对其进行了测试）。

问题似乎是，[dateSubviewController view] 没有调用 tableView 工作所需的方法。*视图*出口与 tableView 连接，但在情节提要中“变灰” 。我认为它可能指向错误的视图，所以我已经尝试删除 tableView 并重新连接它。这没有效果。整个 viewDidLoad() 方法完成后，崩溃立即出现。

当我尝试使用

```
NSArray *views = [NSArray arrayWithObjects: [dateSubviewController dateTable], nil]; 
```

（dateTable是我尝试实现的tableView）直接访问tableView数组*视图*在调试中包含0个元素。也不调用 TableView 委托方法。但它不会崩溃。

我不知道该怎么办了。我在这个问题上工作了大约 6 个小时，调试了几次，做了互联网研究，但没有找到任何东西。谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:33:02.240

经过几个小时的工作，我现在发现这是自动释放池的问题。当我初始化*viewController* ...

```
DateSubviewController *dateSubviewController = [[DateSubviewController alloc] init]; 
```

*...它是一个局部变量，并在viewDidLoad()*方法完成后立即释放。我不得不将它用作实例变量！我希望这也为未来的读者解决了这个错误！

在要初始化 ViewController 的类的头文件中：

```
@property (strong, nonatomic) DateSubviewController * dateSubviewController; 
```

然后以这种方式初始化它：

```
 self.dateSubviewController = [[DateSubviewController alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:21:53.153

根据错误，您应该清楚您的tableView的dataSource没有响应tableView需要的方法。因为我猜你已经有一个应该是这个数据源的对象（一个实现 tableView:numberOfRowsInSection:) 的对象，很可能你没有将 tableView 的 dataSource 属性设置为这个对象，而是另一个对象。检查您的代码或 Xib，并修复您的 tableView 的 dataSource 链接。

先做这个。

之后你可能会遇到其他问题。你会看到的。但首先要解决这个问题，并学会阅读和理解你的错误。用您不理解的单词记录自己，例如“实例”、“选择器”、“异常”。了解错误是成功调试的关键。

# jsf - 自定义 jsf 验证器消息

> ID：10484222
> 
> 赞同：0
> 
> 时间：2012-05-07T14:52:49.907
> 
> 标签：jsf, validation

我的 messages.properties 文件中有以下内容：

javax.faces.component.UIInput.REQUIRED=请为 {0} 输入一个值 javax.faces.validator.LengthValidator.MINIMUM = {1} javax.faces.validator.LengthValidator.MAXIMUM 至少需要 {0} 个字符 = {1} 最多需要 {0} 个字符

当错误发生时，我得到了这些输出：

pwd 最多 8 个字符 pwd 最多 8 个字符 pwd 至少 6 个字符 pwd 至少 6 个字符

正如它所显示的那样，它重复了，我怎样才能将味精更改为只出现一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:08:45.603

确保您使用的是`for=""`of`<h:message/>`标签，无论如何尝试使用`redisplay="false"`for `<h:message`tag 和`globalOnly="true"`of `<h:messages`tag

# java - 如何加速沙盒 lwjgl 游戏？

> ID：10484226
> 
> 赞同：1
> 
> 时间：2012-05-07T14:53:04.237
> 
> 标签：java, opengl, lwjgl, lag, voxel

我正在尝试制作一个沙盒（体素）开放世界游戏。我的游戏使用称为块的 32x32x32 块集来存储块数据，每个块都有 4 个 VBO：顶点、原色、次要颜色、纹理坐标。这些 VBO 存储在此类中：

```
import game.vc3d.util.ArrayUtils;

import java.nio.DoubleBuffer;
import java.nio.FloatBuffer;

import org.lwjgl.BufferUtils;

import static org.lwjgl.opengl.GL15.*;
import static org.lwjgl.opengl.GL11.*;
import static org.lwjgl.opengl.GL14.*;

public class VBORenderer extends ImmediateModeRenderer {

FloatBuffer vertexData;
FloatBuffer primColorData;
FloatBuffer secColorData;
DoubleBuffer texCoordData;

FloatBuffer allData;

int fullVBOID;

int vboVertexID;
int vboPrimColorID;
int vboSecColorID;
int vboTexCoordID;
int amountOfVertexes = 0;
boolean fin1ed = false;

int texIndex = 0;

static final int DRAW_METHOD = GL_STATIC_DRAW;

static boolean ted = false;

int vertexEnd;
int primCStart;
int primCEnd;
int secCStart;
int secCEnd;

@Override
public void setTexture(int texture) {
    texEnabled = true;
    texIndex = texture;
}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#disableTexture()
 */
@Override
public void disableTexture() {
    texEnabled = false;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#finalize()
 */
@Override
public void finalize() {
    amountOfVertexes = vertexes.size() / 3;

    if(amountOfVertexes < 1) return;

    float tempVD[] = ArrayUtils.toPrimatives(vertexes.toArray(new Float[vertexes.size()]));
    vertexData = BufferUtils.createFloatBuffer(tempVD.length);
    vertexData.put(tempVD);

    float tempPCD[] = ArrayUtils.toPrimatives(primaryColors.toArray(new Float[vertexes.size()]));
    primColorData = BufferUtils.createFloatBuffer(tempPCD.length);
    primColorData.put(tempPCD);
    float tempSCD[] = ArrayUtils.toPrimatives(secondaryColors.toArray(new Float[vertexes.size()]));
    secColorData = BufferUtils.createFloatBuffer(tempSCD.length);
    secColorData.put(tempSCD);
    double tempTCD[] = ArrayUtils.toPrimatives(texCoords.toArray(new Double[vertexes.size()]));
    texCoordData = BufferUtils.createDoubleBuffer(tempTCD.length);
    texCoordData.put(tempTCD);

    vertexData.flip();
    primColorData.flip();
    secColorData.flip();
    texCoordData.flip();

    if(!fin1ed)vboVertexID = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboVertexID);
    glBufferData(GL_ARRAY_BUFFER, vertexData, DRAW_METHOD);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    if(!fin1ed)vboPrimColorID = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboPrimColorID);
    glBufferData(GL_ARRAY_BUFFER, primColorData, DRAW_METHOD);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    if(!fin1ed)vboSecColorID = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboSecColorID);
    glBufferData(GL_ARRAY_BUFFER, secColorData, DRAW_METHOD);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    if(!fin1ed)vboTexCoordID = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboTexCoordID);
    glBufferData(GL_ARRAY_BUFFER, texCoordData, DRAW_METHOD);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    fin1ed = true;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#clear()
 */
@Override
public void clear() {
    super.clear();
    texIndex = 0;
}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#render()
 */
@Override
public void render() {

    if(amountOfVertexes < 1) return;

    glBindBuffer(GL_ARRAY_BUFFER, vboVertexID);
    glVertexPointer(3, GL_FLOAT, 0, 0L);

    glBindBuffer(GL_ARRAY_BUFFER, vboPrimColorID);
    glColorPointer(4, GL_FLOAT, 0, 0L);

    glBindBuffer(GL_ARRAY_BUFFER, vboSecColorID);
    glSecondaryColorPointer(3, GL_FLOAT, 0, 0L);

    glBindBuffer(GL_ARRAY_BUFFER, vboTexCoordID);
    glTexCoordPointer(2, GL_DOUBLE, 0, 0L);

    glDrawArrays(GL_QUADS, 0, amountOfVertexes);

    glBindBuffer(GL_ARRAY_BUFFER, 0);

}
public static void prepareForRendering(Object...objects){
    if(objects.length > 0){
        glEnable(GL_TEXTURE_2D);
        glBindTexture(GL_TEXTURE_2D, (Integer)objects[0]);
        ted = true;
    } else {
        glDisable(GL_TEXTURE_2D);
    }

    glEnable(GL_COLOR_SUM);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_COLOR_ARRAY);
    glEnableClientState(GL_SECONDARY_COLOR_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
}
public static void finishRendering(){

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
    glDisableClientState(GL_SECONDARY_COLOR_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);

    if(ted){
        glDisable(GL_TEXTURE_2D);
        ted = false;
    }

}

} 
```

它扩展了 ImmediateModeRenderer：

```
import java.util.ArrayList;

import org.lwjgl.opengl.GL14;
import org.lwjgl.util.vector.Vector3f;
import org.lwjgl.util.vector.Vector4f;

import static org.lwjgl.opengl.GL11.*;
import static org.lwjgl.opengl.GL14.glSecondaryColor3f;

public class ImmediateModeRenderer extends Renderer {

private boolean canInput = true;

public ArrayList<Float> vertexes = new ArrayList<Float>();
public ArrayList<Boolean> textures = new ArrayList<Boolean>();
public ArrayList<Float> primaryColors = new ArrayList<Float>();
public ArrayList<Float> secondaryColors = new ArrayList<Float>();
public ArrayList<Double> texCoords = new ArrayList<Double>();
public ArrayList<Integer> currentTextures = new ArrayList<Integer>();
boolean texEnabled = false;
Vector4f primColor = new Vector4f(1, 1, 1, 1);
Vector4f secColor = new Vector4f(0, 0, 0, 0);
double texX = 0;
double texY = 0;
int currentTex = 0;
Vector3f _trans = new Vector3f(0, 0, 0);
Vector3f _scale = new Vector3f(1, 1, 1);

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#addVertex(float, float, float)
 */
@Override
public void addVertex(float x, float y, float z) {
    if(!canInput) throw new IllegalStateException("this.canInput() must be true");
    vertexes.add((x + _trans.x) * _scale.x);
    vertexes.add((y + _trans.y) * _scale.y);
    vertexes.add((z + _trans.z) * _scale.z);
    textures.add(texEnabled);
    if(texEnabled){
        texCoords.add(texX);
        texCoords.add(texY);
        currentTextures.add(currentTex);
    }
    primaryColors.add(primColor.x);
    primaryColors.add(primColor.y);
    primaryColors.add(primColor.z);
    primaryColors.add(primColor.w);
    secondaryColors.add(secColor.x);
    secondaryColors.add(secColor.y);
    secondaryColors.add(secColor.z);
    //secondaryColors.add(secColor.w);

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#primaryColor(float, float, float, float)
 */
@Override
public void primaryColor(float r, float g, float b, float a) {
    primColor = new Vector4f(r, g, b, a);

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#setTexture(int)
 */
@Override
public void setTexture(int texture) {
    texEnabled = true;
    currentTex = texture;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#texture(float, float)
 */
@Override
public void texture(double x, double y) {
    texX = x;
    texY = y;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#secondaryColor(float, float, float, float)
 */
@Override
public void secondaryColor(float r, float g, float b, float a) {
    secColor = new Vector4f(r, g, b, a);

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#disableTexture()
 */
@Override
public void disableTexture() {
    texEnabled = true;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#clear()
 */
@Override
public void clear() {
    vertexes = new ArrayList<Float>();
    textures = new ArrayList<Boolean>();
    primaryColors = new ArrayList<Float>();
    secondaryColors = new ArrayList<Float>();
    texCoords = new ArrayList<Double>();
    currentTextures = new ArrayList<Integer>();
    texEnabled = false;
    primColor = new Vector4f(1, 1, 1, 1);
    secColor = new Vector4f(0, 0, 0, 0);
    texX = 0;
    texY = 0;
    currentTex = 0;

    _trans = new Vector3f(0, 0, 0);
    _scale = new Vector3f(1, 1, 1);

    canInput = true;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#render()
 */
@Override
public void render() {
    int amountOfVertexs = vertexes.size() / 3;
    int currentV = -1;
    int currentPC = -1;
    int currentSC = -1;
    int currentTex = -1; //Current Tex Coords
    int texInd = -1; //Current Texture No.
    int texNoInd = -1; //Curent vert
    int oldBoundTexture = 0; //Old texture
    boolean oldTex = false;
    glDisable(GL_TEXTURE_2D);
    glEnable(GL14.GL_COLOR_SUM);
    glBegin(GL_QUADS);
    for(int vert = 0; vert < amountOfVertexs; vert++){
        if(textures.get(++texNoInd)){
            if(!oldTex){
                glEnd();
                glEnable(GL_TEXTURE_2D);
                glBegin(GL_QUADS);
            }
            if(currentTextures.get(++texInd) != oldBoundTexture){
                glEnd();
                oldBoundTexture = currentTextures.get(texInd);
                glBindTexture(GL_TEXTURE_2D, oldBoundTexture);
                glBegin(GL_QUADS);
            }

            glTexCoord2d(texCoords.get(++currentTex), texCoords.get(++currentTex));

        } else {
            if(oldTex){
                glEnd();
                glDisable(GL_TEXTURE_2D);
                glBegin(GL_QUADS);
            }
        }
        oldTex = textures.get(texNoInd);

        //Do Colors
        glColor4f(primaryColors.get(++currentPC), primaryColors.get(++currentPC), primaryColors.get(++currentPC), primaryColors.get(++currentPC));
        glSecondaryColor3f(secondaryColors.get(++currentSC), secondaryColors.get(++currentSC), secondaryColors.get(++currentSC));
        //Finalize the vertex
        glVertex3f(vertexes.get(++currentV), vertexes.get(++currentV), vertexes.get(++currentV));
    }
    glEnd();
    glDisable(GL14.GL_COLOR_SUM);
}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#finalize()
 */
@Override
public void finalize() {
    canInput = false;

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#canInput()
 */
@Override
public boolean canInput() {
    return canInput;
}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#scale(float, float, float)
 */
@Override
public void scale(float x, float y, float z) {
    _scale = new Vector3f(x, y, z);

}

/* (non-Javadoc)
 * @see game.vc3d.rendering.Renderer#translate(float, float, float)
 */
@Override
public void translate(float x, float y, float z) {
    _trans = new Vector3f(x, y, z);

}

} 
```

从世界类调用开始和停止的静态方法，以准备绘制块并完成绘制块。

编辑：问题已解决！不要在 VBO 中使用双打，使用浮点数！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:42:19.707

考虑实现交错的 VBO，而不是单独存储数据。这应该会稍微提高性能。

# mysql - MYSQL - 从表中按 X 顺序从 id Y 开始

> ID：10484227
> 
> 赞同：1
> 
> 时间：2012-05-07T14:53:11.663
> 
> 标签：mysql, sql-order-by

我的 mysql db 我有一个包含 3 个参数（名称、视图、id）的表。我需要按视图排序行。我得到这样的东西。

询问：

```
select 
from table 
order by views 
```

结果：

```
 id    |  name   |  views
   ------------------------
   7     |  xxxx   |  9000
   2     |  yyyy   |  8000
   1     |  aaaa   |  7000
   4     |  bbbb   |  6000
   8     |  dddd   |  5000
   6     |  cccc   |  4000
   5     |  oooo   |  3000
   3     |  tttt   |  2000 
```

我需要做的是获取按视图排序但以特定 ID 开头的行。是否可以。我所有的输入都是 ID。假设 ID 为 6，应该输出：

```
 id    |  name   |  views
   ------------------------       
   6     |  cccc   |  4000
   5     |  oooo   |  3000
   3     |  tttt   |  2000 
```

我不能使用 LIMIT 因为我现在真的不知道什么是位置。我只需要获取以 ID 开头的行。

* * *

我想要做的是无限滚动，我根据显示的最后一个元素请求下一个元素。唯一棘手的部分是我按视图参数排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:57:16.963

```
select * from table
where (views = 4000 and id>6) or (views < 4000) 
order by views desc, id asc; 
```

棘手的部分是您必须知道（选择） ID 为 6 的元素的视图；您还需要使用 ID 作为辅助排序标准以获得一致的结果。

实际上，这是一种常见的情况，即因为，直到类型的分页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:59:22.173

```
SELECT * FROM table 
WHERE views <= (SELECT views FROM table WHERE id = 6) 
ORDER BY views 
```

# sql - 显示时间间隔

> ID：10484229
> 
> 赞同：0
> 
> 时间：2012-05-07T14:53:17.200
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个名为 Time_Summary 的表，数据类似于：

```
A_Date                         A_Interval            Acc_name
2012-05-06 00:00:00.000        0530                  Nick
2012-05-06 00:00:00.000        0600                  Nick
2012-05-06 00:00:00.000        0630                  Nick
2012-05-06 00:00:00.000        0700                  Nick
2012-05-06 00:00:00.000        0800                  Nick 
```

我希望输出为：

```
A_Date                         A_Interval                    Acc_name
2012-05-06 00:00:00.000        05:30 - 05:59                  Nick
2012-05-06 00:00:00.000        06:00 - 06:29                  Nick
2012-05-06 00:00:00.000        06:30 - 06:59                  Nick
2012-05-06 00:00:00.000        07:00 - 07:29                  Nick
2012-05-06 00:00:00.000        08:00 - 08:29                  Nick 
```

我试图写这样的东西：

```
Select A_Date,
Case When A_Interval = '0530' then '05:30 - 05:59' End as A_Interval
from Time_Summary 
```

但是通过这样做，我必须写 24 个案例陈述，因为我每天将有 24 个间隔。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:23:49.247

如果`A_Interval`总是这样，那么这应该有效：

```
SELECT  A_Date,
        LEFT(A_Interval,2) + ':' + RIGHT(A_Interval,2) + ' - ' + LEFT(A_Interval,2) + ':' +
        CASE WHEN RIGHT(A_Interval,2) = '30' THEN '59' ELSE '29' END A_Interval,
        Acc_name
FROM Time_Summary 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:24:26.813

这应该有效：

```
with cte as(
    select  A_Date
    ,       A_Interval
    ,       Acc_name
    ,       CAST(SUBSTRING(A_Interval,1,2)AS INT) AS Hour
    ,       CAST(SUBSTRING(A_Interval,3,2)AS INT) AS Minute
    ,       DATEADD(minute, 
                CAST(SUBSTRING(A_Interval,3,2)AS INT), 
                    DATEADD(hour,
                        CAST(SUBSTRING(A_Interval,1,2)AS INT), 
                        A_Date))as RealTime
    FROM Time_Summary
)
SELECT  A_Date
      , RIGHT('00' + CAST(Hour AS varchar(2)),2) + ':' 
      + RIGHT('00' + CAST(Minute AS varchar(2)),2) + ' - ' 
      + RIGHT('00' + CAST(DATEPART(hh,DATEADD(mi,29,RealTime)) AS varchar(2)),2) + ':' 
      + RIGHT('00' + CAST(DATEPART(mi,DATEADD(mi,29,RealTime)) AS varchar(2)),2) AS A_Interval 
      , Acc_name
FROM cte 
```

结果：

```
A_Date                     A_Interval          Acc_name
2012-05-06 00:00:00.000    05:30 - 05:59       Nick
2012-05-06 00:00:00.000    06:00 - 06:29       Nick
2012-05-06 00:00:00.000    06:30 - 06:59       Nick
2012-05-06 00:00:00.000    07:00 - 07:29       Nick
2012-05-06 00:00:00.000    08:00 - 08:29       Nick 
```

请注意，我使用 cte 只是为了简化。

# php - ORA-24408: 无法生成唯一的服务器组名称

> ID：10484231
> 
> 赞同：15
> 
> 时间：2012-05-07T14:53:21.630
> 
> 标签：php, oracle

系统：

```
Linux web 2.6.27.21-0.1-pae #1 SMP 2009-03-31 14:50:44 +0200 i686 i686 i386 GNU/Linux

PHP Version 5.3.8
Apache Version  Apache/2.2.21 (Linux/SUSE)
OCI8 Support    enabled
Version     1.4.7
Revision    $Revision: 321634 $
Active Persistent Connections   0
Active Connections  0
Oracle Run-time Client Library Version  11.2.0.3.0
Oracle Instant Client Version   11.2 
```

打电话时`oci_connect`- 接听

> ORA-24408: 无法生成唯一的服务器组名称

无法理解这是什么类型的错误以及如何修复它。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-22T21:02:31.820

如果你愿意，你可以降级到 10g（它显然不关心这个），但这不是必需的......

11g 即时客户端需要一个`/etc/hosts`指向 127.0.0.1 的主机名的文件条目。正常的“localhost”条目本身是不够的。

假设您的主机名是`foomachine`，您需要检查两个地方：

在`/etc/hosts`中，确保您有任何条目，例如 - 如果不存在，请添加：

```
127.0.0.1   foomachine 
```

并确保该`/etc/sysconfig/network`文件也有`HOSTNAME=foomachine`

这应该够了吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-11T14:23:07.137

有点老问题，但我只是在将我的 Mac 升级到 Sierra 后偶然发现了这个问题。在那之前我没有遇到过问题。

诀窍肯定是将您的主机名添加到 /etc/hosts，但您必须拥有正确的主机名。这在 linux 上很容易，它在 /etc/sysconfig/network 中。在 Mac 上，在系统偏好设置 > 共享中找到它。在它说计算机名称的位置将类似于computer-name.local。在 /etc/hosts 中

```
 127.0.0.1 computer-name.local 
```

当然用您的计算机名称替换计算机名称:)。 **无论数据库是远程数据库还是本地数据库，它都需要这个。**

我有很多 127.0.0.1 的其他别名，但不是那个。一旦我添加了那个，我的应用程序就重新开始工作了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T08:16:43.193

在我的情况下，我尝试连接的 OracleDB 服务器是远程服务器，而不是本地服务器，因此上述`127.0.0.1 localhost`技巧不起作用。

以前，我通过将我的 Oracle DB 服务器的条目添加到我的主机文件中来临时修复 DNS 问题。我的主机文件*中的这个 IP 仍然正确*- 它仍然指向正确的 OracleDB 服务器 IP。

**通过从我的主机文件中删除条目，问题就消失了。**

我不知道为什么这对 OracleDB 来说是个问题，或者为什么错误消息如此迟钝，但我希望这对其他人有所帮助。

（这是在 MacOS v10.11.5 上使用 InstantClient v12.1.0.2）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T18:54:26.260

我有完全相同的问题。我修复了我的 /etc/hosts 和 /etc/sysconfig/network 文件并重新启动了网络，现在它工作正常。以下是一些快速而肮脏的说明：

[http://ahmadzainuddinzakaria.blogspot.com/2012/06/warning-ociconnect-functionoci-connect.html](http://ahmadzainuddinzakaria.blogspot.com/2012/06/warning-ociconnect-functionoci-connect.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-27T20:05:23.177

将此添加到 /etc/hosts 解决了该问题。

```
127.0.0.1 someHostName 
```

要查找计算机的主机名，只需在终端中键入主机名。使用 vim 等文本编辑器来编辑主机。

```
~ hostname
someHostName
~ cd /etc
/etc sudo vim hosts 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-23T11:07:19.593

您实际上**不需要**使用类似`127.0.0.1`的`/etc/hosts`东西

```
echo -e "127.0.0.1\t$HOSTNAME" >> /etc/hosts 
```

这是违反常识的（并且仅从 2013 年 2 月起正式反对[RFC 6761 ）。](https://www.rfc-editor.org/rfc/rfc6761)

幸运的是，如果你只注册了你的真实 IP 地址，它也可以工作——比如

```
192.0.2.5 mymachine.example.net 
```

顺便说一句，在使用 DHCP 创建的虚拟机中经常缺少这一点。

或者 - 最后的方案 - 使用 127.0.0.0/8 中的其他 IP 地址

```
127.0.1.1 mymachine.example.net 
```

使用*Oracle Instant Client 11.2*测试。

处理像 Legato Backup 这样奇怪的东西的系统管理员会感谢你没有弄乱`/etc/hosts`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-28T13:37:57.843

在 CentOS 6.5 中，我更改了文件的值：`/etc/sysconfig/network`

原值：

```
HOSTNAME=localhost.localdomain 
```

新值：

```
HOSTNAME=127.0.0.1 
```

# c++ - 如何从格式化字符串中获取 boost::posix_time::ptime

> ID：10484232
> 
> 赞同：7
> 
> 时间：2012-05-07T14:53:23.917
> 
> 标签：c++, boost

我有一个像“2012-03-28T08:00:00”这样的格式化字符串。我想获取年、月（字符串格式）、日期、小时、分钟、秒和日（字符串格式）。任何人都可以建议我最简单的方法来提升它。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-08T08:39:33.100

如果现有的 from_string() 方法不适合您的需要，那么您可以使用时间输入方面，它允许您自定义解析字符串的格式。

在您的情况下，您可以使用 ISO 扩展格式字符串，以便您可以使用以下代码来解析您的字符串：

```
 boost::posix_time::time_input_facet *tif = new boost::posix_time::time_input_facet;
    tif->set_iso_extended_format();
    std::istringstream iss("2012-03-28T08:00:00");
    iss.imbue(std::locale(std::locale::classic(), tif));
    iss >> abs_time;
    std::cout << abs_time << std::endl; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-14T13:29:30.583

不使用刻面；

`ptime dateTime = boost::date_time::parse_delimited_time<ptime>(string, 'T');`

这两个`from*_string`函数对转换的格式有限制。

*   不接受 'T': `time_from_string(s)`。
*   不接受 '-': `from_iso_string(s)`。

在 boost 中往返 ISO 8601 日期/时间；

`std::string date = to_iso_extended_string(dateTime);`

# python - Python中的Mysqldb INSERT INTO语法错误

> ID：10484238
> 
> 赞同：0
> 
> 时间：2012-05-07T14:53:47.850
> 
> 标签：python, sql, syntax-error, mysql-python

我有一个 excel 文件，我正在尝试将其放入 mysql 中。我想使用 python 插件 xlrd 提取 32 个字段并放入 mysql。数据布局如下：

![数据布局](../Images/c89bf358bbb1098547231680f639864c.png)

我的方法是遍历行和列，边走边添加字段名。代码添加了字段名称，但添加数据时出现错误。（我创建了表 'OilProvedReservesHistory'，索引为唯一字段）：

![SQL 布局](../Images/570284610de145bb6db7686703b614b9.png)

```
def get_data_from_sheet(sheet_index, table, start_row, end_row, end_col):

for row in range(start_row - 1, end_row - 1):
    for col in range(end_col):
        cell = sheet.cell(row,col)
        if col == 0:        
            fieldname = cleanup_field(cell.value)
            if fieldname != ("Blank Cell"):
                sql = "ALTER TABLE OilProvedReservesHistory ADD %s VARCHAR(20)" % fieldname
                c.execute(sql)                  
        else:
            data = cleanup_data(cell)
            if data != ("Blank Cell"):
                postToMySQL(data,fieldname,table)

def postToMySQL(data,fieldname,table):
#Generate sql query string                
sql = "INSERT INTO " + table + " ("+ fieldname + ") VALUES %s"
c.execute(sql, data)
# Executes: ("""INSERT INTO OilProvedReservesHistory (US) VALUES 36.533""")

table = create_table_from_sheet_name()

sheet_index = 0
start_row = 5
end_row = 68
end_col = 32

get_data_from_sheet(sheet_index, table, start_row, end_row, end_col) 
```

我得到的错误是：

> _mysql_exceptions.ProgrammingError: (1064, "您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行的 ''36.533'' 附近使用的正确语法")

你能帮我搞定这个工作吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:01:21.893

我的猜测是您只是忘记了 VALUES 子句的括号。

```
INSERT INTO OilProvedReservesHistory (US) VALUES (36.533) 
```

尝试将您的代码更改为：

```
sql = "INSERT INTO " + table + " ("+ fieldname + ") VALUES (%s)" 
```

# android - Android requestLocationUpdates minimumtime + minimumdistance 并没有真正起作用

> ID：10484239
> 
> 赞同：1
> 
> 时间：2012-05-07T14:53:49.987
> 
> 标签：android, locationlistener

```
locationmanager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationlistener); 
```

我知道这行代码应该尽可能频繁地更新设备位置，对吗？具体来说，每 0 毫秒和 0 米（最小）。

好的，“**最小值**”这个词在这里很关键，但为什么有时位置可能长达 30 多秒都没有更新？我已经计算了一次更新和下一次更新之间的实际时间，而在 WiFi 上，即使我在代码中有 0 和 0 也需要 38 秒。我什至用 1000 毫秒（1 秒）尝试了它，但仍然没有那么频繁地更新。

如何更频繁地进行此更新？为什么会有这样的反应？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:02:04.520

简短的回答是：你不能（让它更频繁地更新）。

文档表明，如果您将 min_distance 和 min_time 指定为零，您将获得“尽可能频繁的更新”。所以你看到的是“尽可能频繁地”。通常你不会得到更新，除非有什么改变，所以如果你不搬家，你不一定会得到更新。此外，由于您使用的是网络位置而不是 GPS，因此位置的准确性不是那么好，因此您不应该期望经常更新。

此外，每个硬件供应商都以不同的方式实现位置提供程序。所以更新的频率是由硬件供应商的实现决定的。

# sql - Oracle SQL Developer 中的存储过程

> ID：10484240
> 
> 赞同：0
> 
> 时间：2012-05-07T14:53:53.700
> 
> 标签：sql, oracle, stored-procedures, oracle-sqldeveloper

我正在使用 SQL Oracle 构建存储过程。我正在尝试构建下面的 SQL 查询的存储过程

```
SELECT "Merch"."Id", "Order"."Id", "Order"."OrderExt"
FROM "Order"
Join "Merch" ON "Order"."MerchId" = "Merch"."Id"
WHERE "Merch"."Id" = 25 AND "Order"."OrderExt" = 'TC10045604' 
```

我想使用 2 个参数来比较“Merch.Id”和“Order.OrderExt”。我真的是 SQL-Oracle 的新手，很难弄清楚如何编写这个过程。

我遇到的问题之一是如何返回带有 "Merch"."Id", "Order"."Id", "Order"."OrderExt" 的表？

我是否以某种方式使用光标？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:08:44.940

您可以编写一个具有 OUT 参数的存储过程，该参数是`SYS_REFCURSOR`

```
CREATE OR REPLACE PROCEDURE return_cursor( p_merch_id  IN "Merch"."Id"%type,
                                           p_order_ext IN "Order"."OrderExt"%type,
                                           p_rc       OUT sys_refcursor )
AS
BEGIN
  OPEN p_rc 
   FOR SELECT "Merch"."Id", "Order"."Id", "Order"."OrderExt"
         FROM "Order"
              Join "Merch" ON "Order"."MerchId" = "Merch"."Id"
        WHERE "Merch"."Id" = p_merch_id
          AND "Order"."OrderExt" = p_order_ext;
END; 
```

然而，有一个返回一个存储函数会更自然`SYS_REFCURSOR`

```
CREATE OR REPLACE FUNCTION return_cursor( p_merch_id  IN "Merch"."Id"%type,
                                          p_order_ext IN "Order"."OrderExt"%type )
  RETURN sys_refcursor
AS
  l_rc sys_refcursor;
BEGIN
  OPEN l_rc 
   FOR SELECT "Merch"."Id", "Order"."Id", "Order"."OrderExt"
         FROM "Order"
              Join "Merch" ON "Order"."MerchId" = "Merch"."Id"
        WHERE "Merch"."Id" = p_merch_id
          AND "Order"."OrderExt" = p_order_ext;
  RETURN l_rc;
END; 
```

作为一般的风格问题，区分大小写的表和列名很少是一个好主意。并且拥有与 Oracle 保留字 like 匹配的表名`Order`更不可能是一个好主意。与仅使用默认的不区分大小写的约定并避免保留字相比，强制每个开发人员始终在每个标识符周围使用双引号并始终以正确的大小写指定它们会导致更多的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:04:22.903

就像您说的那样，您需要使用 2 个参数，以便您可以通过`Merch.Id`和过滤数据`Order.OrderExt`。

您可以使用 SYS_REFCURSOR 返回结果，例如：

```
 PROCEDURE MY_PROC 
                ( pOrderExt "Order"."OrderExt"%type, 
                  pMerchId "Merch"."Id"%type,               
                  recordSet OUT SYS_REFCURSOR )
        AS    
        BEGIN    
       OPEN recordSet FOR 
          SELECT "Merch"."Id", "Order"."Id", "Order"."OrderExt"
          FROM "Order"
          INNER JOIN "Merch" ON "Order"."MerchId" = "Merch"."Id"
          WHERE "Merch"."Id" = pMerchId AND "Order"."OrderExt" = pOrderExt;    
   END MY_PROC; 
```

这是您查看结果的方式（**确保查看 SQL Developer 中的 Out Variables 选项卡**）：

```
DECLARE
  pOrderExt "Order"."OrderExt"%type;
  pMerchId "Merch"."Id"%type;        
  recordSet OUT SYS_REFCURSOR;
BEGIN
  pMerchId := 25 ;
  pOrderExt := 'TC10045604';  

  MY_PROC (
    pMerchId => pMerchId,
    pOrderExt => pOrderExt,    
    recordSet => recordSet
  );
  :recordSet := recordSet; --<-- Cursor
END; 
```

**已编辑**：添加了执行示例，如 Justin Cave 所指出的那样进行了改进

# upgrade - 将 N2CMS 升级到从 github trunk 收集的最新版本

> ID：10484243
> 
> 赞同：0
> 
> 时间：2012-05-07T14:54:01.850
> 
> 标签：upgrade, n2, n2cms

我正在按照这些说明[https://github.com/n2cms/n2cms/blob/master/docs/releases/upgrade_2 将旧的 N2CMS 网站升级到主干中发布的最新版本（2.2.5 或类似版本）。 2.1.txt](https://github.com/n2cms/n2cms/blob/master/docs/releases/upgrade_2.2.1.txt)，但在编译项目时出现错误：

*无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。*

以前有没有人这样做过，并且知道除了复制文件之外我还应该做些什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:35:16.810

此错误的完整文本包含您缺少的 DLL 的名称。仔细阅读你会发现你需要添加什么DLL。它可能是最近引入的 Lucene.dll 之类的东西（这取决于您的项目的年龄）。

# vb.net - 在具有条件的数组中搜索

> ID：10484249
> 
> 赞同：2
> 
> 时间：2012-05-07T14:54:15.277
> 
> 标签：vb.net, arrays, search

我有两个数组，我试图在多个级别上进行比较。两者具有相同的结构，具有 3" 列。

第一列包含多边形的 ID，第二列包含区域类型，第三列包含多边形的每种区域类型的百分比。

因此，对于许多行，它会比较，例如，ID：1 类型：aaa %：100 但是对于某些元素，我有很多行具有相同的 ID。例如，我将有 ID 2，类型 aaa，25% --- ID 2，类型 bbb，25% --- ID 2，类型 ccc，50%。在第二个数组中，我将有 ID 2，类型 aaa，25% --- ID 2，类型 bbb，10% --- ID 2，类型 eee，38% --- ID 2，类型 fff，27 %。

这是一个视觉示例.. ![打印屏幕](../Images/3cfc8f509ac3c35e3452e2afcf16f692.png)

所以，我的函数必须比较这两个数组，如果有差异，给我发一封电子邮件。（我不会向你展示真正的代码，因为有 811 行）。第一个“如果”条件是

```
if array1.id = array2.id Then
if array1.type = array2.type Then
if array1.percent = array2.percent Then
zone_verification = True
Else
zone_verification = False 
```

问题是因为每个数组中有超过 50 000 行。因此，当我运行该函数时，对于每个“array1.id”，该函数在 array2 中搜索 50 000 行。50 000 次搜索 50 000 行.. 运行时间相当长！

我正在寻找让它运行得更快的东西。我怎样才能让我的搜索更具体。示例：我在 array1 中有很多 id "2"。如果array2中有许多id“2”，找到它，并将所有array2.id = 3推入“子数组”或类似的东西，并在这些特定行中搜索。所以我将在array1中只有X行与array 2中的X行进行比较，而不是50 000。当array1中的每个“id 2”完成时，对“id 4”做同样的事情......和“编号 5"...

希望很清楚。这几乎是我第一次使用 VB.net，而且我有这么大的功能可以运行。

谢谢

**编辑**

这就是我想做的。

我在地理空间数据库中有两个不同的层。两层具有相同的结构。它们是地块 (55 000) 和土地利用层的“空间连接”。第一层是当前层，第二层是我们将在 2015 年之后使用的下一层。

所以我有，对于每个“地块”，每个土地使用的百分比。因此，对于“地块”（ID 7580-80-2532），我可以拥有 50% 的农业使用（TYPE FAR-23）和 50% 的住宅使用（RES-112）。在第一个数组中，我'将有 2 行具有相同 ID (7580-80-2532)，但每行将具有不同的类型 (FAR-23, RES-112) 和不同的 %。在第二层中，相同的市政分区 (土地用途) 发生了变化。因此，相同的“地块”现在将占住宅用途 (RES-112) 的 40%、商业用途 (COM-54) 的 20% 和新农业用途 (FAR-33) 的 40%。所以,我想知道是否有一些差异。有些地块会完全一样。有些地块会保持相同的土地利用，但每个地块的百分比不一样。但是对于某些地块，土地利用会或多或少每种类型的百分比不同。

我希望此脚本比较这两个图层，并在同一地块 ID 的这两个图层之间存在差异时向我发送电子邮件。

该脚本已经在运行，但它需要太多时间。

问题是，我认为，脚本遍历数组 1 中每一行的所有数组 2。

我想要的是当array1中有超过1行具有相同的ID时，在两个数组中只取这个ID。

也许如果我按 ID 对它们进行排序，我可以写一个条件。有点像“当你找到你正在寻找的东西时，当你找到不同的价值时停止搜索？

很难解释清楚，因为我从上周开始就一直在使用 VB。而且英语不是我的第一语言！;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:53:40.950

我根据您写的第一部分（即没有编辑部分）回答这个问题。正确的答案应该解释一个好的算法，但我建议您使用数据库功能，因为他们已经为此目的优化了许多查询。

将所有记录放在 DB 两个表中 - O(n) 时间......如果记录是静态的，则不需要每次都执行此步骤。表1 id类型百分比

表2 id类型百分比

然后使用数据库查询，像这样 select count(*) from table1 t1, table2 t2 where t1.id!=t2.id and t1.type!=t2.type （你可以使用一些更好的查询，我是什么试图说是将控制权交给 DB 以执行此操作）在您的代码中检索结果并执行必要的操作。

**编辑** 1) 您可以根据 ID + type + Percent 在 O(n logn) 时间内对它们进行排序，然后执行二进制搜索。2）使用适当的键将第一条记录存储在哈希映射中 - 可以是仅 ID 或 ID+类型，这将花费 O(n) 时间，如果键正确，则搜索将花费恒定时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:10:34.200

如果您只想了解第一个和第二个数组之间是否有任何差异，您可以这样做：

```
Dim diff = New HashSet(of Polygon)(array1)
diff.SymmetricExceptWith(array2) 
```

diff 将包含任何对 array1 或 array2 唯一的多边形。如果您想做其他类型的比较，也许您应该准确地解释您要做什么。

**更新：**

您可以像这样使用分组和查找：

```
'Create lookup with first array, for fast access by ID
Dim lookupByID = array1.ToLookup(Function(p) p.id)

'Loop through each group of items with same ID in array2
For Each secondArrayValues in array2.GroupBy(Function(p) p.id)

    Dim currentID As Integer = secondArrayValues.Key 'Current ID is the grouping key

    'Retrieve values with same ID in array1
    'Use a hashset to easily compare for equality
    Dim firstArrayValues As New HashSet(of Polygon)(lookupByID(currentID))

    'Check for differences between the two sets of data, for this ID
    If Not firstArrayValues.SetEquals(secondArrayValues) Then

        'Data has changed, do something
        Console.WriteLine("Differences for ID " & currentID)
    End If
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:54:27.183

您需要定义一个结构来存储这些数据。我们将所有数据存储在一个`LandParcel`类中，该类将有一个`HashSet<ParcelData>`

```
public class ParcelData
{
    public ParcelType Type { get; set; } // This can be an enum, string, etc.
    public int Percent { get; set; }

    // Redefine Equals and GetHashCode conveniently
}

public class LandParcel
{
    public ID Id { get; set; } // Whatever the type of the ID is...
    public HashSet<ParcelData> Data { get; set; }
} 
```

现在你必须建立你的数据结构，像这样：

```
Dictionary<ID, LandParcel> data1 = new ....

foreach (var item in array1)
{
    LandParcel p;

    if (!data1.TryGetValue(item.id, out p)
        data1[item.id] = p = new LandParcel(id);

    // Can this data be repeated?
    p.Data.Add(new ParcelData(item.type, item.percent)); 
} 
```

您`data2`对第二个数组的字典执行相同的操作。现在您迭代所有项目`data1`并将它们与具有相同 id 的项目进行比较`data2`。

```
foreach (var parcel2 in data2.Values)
{
     var parcel1 = data1[parcel2.ID]; // Beware with exceptions here !!!

     if (!parcel1.Data.SetEquals(parcel2.Data))
         // You have different parcels
} 
```

（现在我看了一下，我们实际上是在这里做一个小型数据库查询，有点臭代码......）

对不起 C# 代码，因为我对 VB 感觉不太舒服，但它应该相当简单。

# jquery - 使用 jQuery 在每 x 个单词后插入一张图片

> ID：10484255
> 
> 赞同：0
> 
> 时间：2012-05-07T14:54:28.987
> 
> 标签：jquery, text

我正在尝试使用带有 jQ​​uery 的文本来做到这一点：

![例子](../Images/c91bddaf390bceaf20ec8f17673fff5b.png)

我需要一个数组，并在每个 x 个单词的应答器中添加图像。（x 是一个随机数）。

使用 jQuery 可以很容易地计算单词：

```
var count = $("#example1").text().replace(/ /g,'').length; 
```

如何将图像随机添加到文本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:20:25.497

您必须用新的 html 替换整个 html（只有文本的那个），其中包括图像：

html:

```
<div>one two three</div> 
```

js：

```
var wordList = $("div").html().split(' ');
var newHtml = '';

$.each(wordList, function(index, word){
  newHtml += ' ' + word;
  if (index == 1) {
    newHtml += '<img src="http://www.newarkadvertiser.co.uk/weather/icons/white-cloud.gif" />'     
  }        
});
$('div').html(newHtml) 
```

[jsfiddle](http://jsfiddle.net/snies/DN7F8/1/)上的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T08:36:50.917

演示：

[http://jsbin.com/ajowib/2/](http://jsbin.com/ajowib/2/) - 循环图像数组，序列 3，偏移量 2

[http://jsbin.com/ajowib/](http://jsbin.com/ajowib/) - 不循环，序列 5，偏移量 3

HTML：

```
<div id="myText">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div> 
```

JavaScript：

```
jQuery(function($) {
    var images = ["img1.png", "img2.png", "img3.png"], // Array to contains image url's
        sequence = 5, // The sequence of witch the images is inserted
        sequenceOffset = 3, // The offset from the start
        loopImages = true, // If you want to loop throw your image array again and again            

        text = $("#myText").html().split(" "),
        newText = [],
        i = 0, y = 0,
        len = text.length;

    for( ; i < len; i++ ) {
        if ( (i % sequence) === sequenceOffset ) {
            if ( loopImages || y < images.length ) {
                newText.push("<img src='" + images[y%images.length] + "'/>");
                y++;
            }
        }
        newText.push(text[i]);
    }

    $("#myText").html(newText.join(" "));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T08:22:53.620

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#btnImage').on('click', function () {
                var imageText = ['one', 'two', 'three'];
                var imageArraySrc = ['http://www.newarkadvertiser.co.uk/weather/icons/white-cloud.gif', 'http://www.newarkadvertiser.co.uk/weather/icons/white-cloud.gif', 'http://www.newarkadvertiser.co.uk/weather/icons/white-cloud.gif'];
                var text = $('div#example1').text();

                $.each(imageText, function (i, value) {
                    text = text.replace(new RegExp(value, 'g'), value + ' <img src="' + imageArraySrc[i] + '" />');
                });

                $('div#example1').html(text);
            });
        });
    </script>
</head>
<body>
    <div id="example1">
        one there two are is an image in this text . one two three.
    </div>
    <input type="button" id="btnImage" value="Click Me!" />
</body>
</html> 
```

# ajax - PHP 会话和 Ajax

> ID：10484260
> 
> 赞同：1
> 
> 时间：2012-05-07T14:54:48.347
> 
> 标签：ajax, php

我创建了一个会话变量并在其中存储了一个值“123456”。我需要在另一个页面上使用 ajax 调用该值。进行 ajax 调用时，我无法访问会话变量。session_start() 位于两个页面的顶部。我什至尝试将实际会话值从 ajax 函数调用的页面写入 txt 文件，但文件显示为空白。

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:59:23.587

您无法从 Javascript 访问 PHP 会话信息（我假设这是您想要做的）。您可以将其作为隐藏字段或在 JS（使用 PHP 动态添加）中传递到第二页，将其添加到常规 cookie，或从 PHP 提供它作为对 AJAX 请求的响应，但我认为这些是您的只有选项。

# python - 查找其键与子字符串匹配的字典项

> ID：10484261
> 
> 赞同：52
> 
> 时间：2012-05-07T14:54:49.347
> 
> 标签：python, dictionary, substring, key

我有一个像这样构造的大字典：

```
programs['New York'] = 'some values...' 
programs['Port Authority of New York'] = 'some values...' 
programs['New York City'] = 'some values...'
... 
```

如何返回`programs`其键中提到“纽约”（不区分大小写）的所有元素？在上面的示例中，我想获取所有三个项目。

**编辑：**字典很大，预计会随着时间的推移而变大。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-05-07T14:58:48.143

```
[value for key, value in programs.items() if 'new york' in key.lower()] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-19T11:15:05.867

这通常称为宽松字典，可以使用后缀树有效地实现。

这种方法使用的内存在键上是线性的，这是最优的，搜索时间在你正在搜索的子串长度上是线性的，这也是最优的。

我在 python 中找到了这个库来实现这个。

[https://hkn.eecs.berkeley.edu/~dyoo/python/suffix_trees/](https://hkn.eecs.berkeley.edu/~dyoo/python/suffix_trees/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-07T16:11:53.613

[你应该使用mensi](https://stackoverflow.com/a/10484313/5987)给出的蛮力方法，直到它被证明太慢。

这是复制数据以加快查找速度的方法。仅当您的搜索仅针对整个单词时才有效 - 即您永远不需要匹配“New Yorks Best Bagels”，因为“york”和“yorks”是不同的词。

```
words = {}
for key in programs.keys():
    for w in key.split():
        w = w.lower()
        if w not in words:
            words[w] = set()
        words[w].add(key)

def lookup(search_string, words, programs):
    result_keys = None
    for w in search_string.split():
        w = w.lower()
        if w not in words:
            return []
        result_keys = words[w] if result_keys is None else result_keys.intersection(words[w])
    return [programs[k] for k in result_keys] 
```

如果单词必须按顺序排列（即“York New”不应该匹配），您可以将蛮力方法应用于`result_keys`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-07T15:50:31.043

您可以提前生成所有子字符串，并将它们映射到各自的键。

```
#generates all substrings of s.
def genSubstrings(s):
    #yield all substrings that contain the first character of the string
    for i in range(1, len(s)+1):
        yield s[:i]
    #yield all substrings that don't contain the first character
    if len(s) > 1:
        for j in genSubstrings(s[1:]):
            yield j

keys = ["New York", "Port Authority of New York", "New York City"]
substrings = {}
for key in keys:
    for substring in genSubstrings(key):
        if substring not in substrings:
            substrings[substring] = []
        substrings[substring].append(key) 
```

然后您可以查询`substrings`以获取包含该子字符串的键：

```
>>>substrings["New York"]
['New York', 'Port Authority of New York', 'New York City']
>>> substrings["of New York"]
['Port Authority of New York'] 
```

优点：

*   通过子字符串获取键与访问字典一样快。

缺点：

*   生成`substrings`会在程序开始时产生一次性成本，所花费的时间与`programs`.
*   `substrings`将随着 中的键数近似线性增长`programs`，从而增加脚本的内存使用量。
*   `genSubstrings`与密钥大小相关的 O(n^2) 性能。例如，“纽约港务局”生成 351 个子字符串。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-07T15:03:38.210

一个`iteritems`和一个生成器表达式将执行此操作：

```
d={'New York':'some values',
    'Port Authority of New York':'some more values',
    'New York City':'lots more values'}

print list(v for k,v in d.iteritems() if 'new york' in k.lower()) 
```

输出：

```
['lots more values', 'some more values', 'some values'] 
```

# c# - ListView 控件闪烁（OwnerDraw、Virtual）

> ID：10484265
> 
> 赞同：11
> 
> 时间：2012-05-07T14:54:55.840
> 
> 标签：c#, winforms, listview, flicker, ownerdrawn

*[这个问题可能被认为是在 listview 中使用 ownerdraw 和 virtualmode](https://stackoverflow.com/questions/938896/flickering-in-listview-with-ownerdraw-and-virtualmode)*进行闪烁的后续问题。

我有一个`ListView`控件`Virtual mode`，我尝试执行自定义绘图。项目渲染是通过以下方法覆盖完成的：

```
protected override void OnDrawItem(DrawListViewItemEventArgs eventArgs) 
```

如引用问题中所述，自定义绘图引入了鼠标悬停事件的闪烁。调试器告诉我这是由于触发了*过多*的自定义绘制事件而发生的。

* * *

现在 - 引用问题的公认答案告诉我们：

> 这是 .NET 的 ListView 中的一个错误，您无法通过双缓冲来解决它。

*   那么，**这些信息的可靠性如何？**这真的是一个*错误吗？*或者，也许我们只是试图切断部分消息并希望它不会改变可见的行为？

*   如果我有我的所有者为`ListView`in绘制例程，`Virtual Mode,`我可以抑制这些`Custom Draw`事件并且只执行我的绘制，`WM_PAINT`或者在某些情况下这可能是不正确的，这是真的吗？

*   `System.Windows.Forms`控件能够在`WM_PAINT`不改变其初始行为的情况下完成所有绘画的先决条件是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T15:44:20.493

至少对于OnDrawItem的双缓冲，有bug是不对的，但是有点傻：有一个protected属性可以设置，但是需要重写ListView。我创建了这种类：

```
public class MyListView : ListView
{
    public MyListView()
        : base()
    {
        DoubleBuffered = true;
    }
} 
```

然后在我的 MyForm.Designer.cs 文件中，我使用以下行更改 ListView 的实例化：

```
private ListView myListView;

this.myListView = new MyListView(); 
```

OnDrawItem 会像一个魅力一样工作！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T05:46:37.297

喜欢[这里的这个答案](https://stackoverflow.com/a/10469388/1118933)，虽然不确定，但是，

我认为`ListView.BeginUpdate()`并`ListView.EndUpdate()`会解决问题。

[有关此的 MSDN 主题](http://social.msdn.microsoft.com/Forums/en-SG/csharpgeneral/thread/f260fe04-b08b-44df-ab0f-8700da476802)

也许这样：

```
protected override void OnDrawItem(DrawListViewItemEventArgs eventArgs)
{
    ListView.BeginUpdate();
    //Do Works Here
    ListView.EndUpdate();
} 
```

## **更新**

另一种选择可能是使用新线程`BackgroundWorker`来更新 ListView...我在我的应用程序中与`BeginUpdate()`/一起实现`EndUpDate()`了它，发现它比仅`BeginUpdate()`/ `EndUpDate()`..

## **更新**

[我在 SO](https://stackoverflow.com/a/162770/1118933)找到了另一个有效的解决方案，一个由以下人员提供的 Helper 类`Brian Gillespie`：

```
public enum ListViewExtendedStyles
{
    /// <summary>
    /// LVS_EX_GRIDLINES
    /// </summary>
    GridLines = 0x00000001,
    /// <summary>
    /// LVS_EX_SUBITEMIMAGES
    /// </summary>
    SubItemImages = 0x00000002,
    /// <summary>
    /// LVS_EX_CHECKBOXES
    /// </summary>
    CheckBoxes = 0x00000004,
    /// <summary>
    /// LVS_EX_TRACKSELECT
    /// </summary>
    TrackSelect = 0x00000008,
    /// <summary>
    /// LVS_EX_HEADERDRAGDROP
    /// </summary>
    HeaderDragDrop = 0x00000010,
    /// <summary>
    /// LVS_EX_FULLROWSELECT
    /// </summary>
    FullRowSelect = 0x00000020,
    /// <summary>
    /// LVS_EX_ONECLICKACTIVATE
    /// </summary>
    OneClickActivate = 0x00000040,
    /// <summary>
    /// LVS_EX_TWOCLICKACTIVATE
    /// </summary>
    TwoClickActivate = 0x00000080,
    /// <summary>
    /// LVS_EX_FLATSB
    /// </summary>
    FlatsB = 0x00000100,
    /// <summary>
    /// LVS_EX_REGIONAL
    /// </summary>
    Regional = 0x00000200,
    /// <summary>
    /// LVS_EX_INFOTIP
    /// </summary>
    InfoTip = 0x00000400,
    /// <summary>
    /// LVS_EX_UNDERLINEHOT
    /// </summary>
    UnderlineHot = 0x00000800,
    /// <summary>
    /// LVS_EX_UNDERLINECOLD
    /// </summary>
    UnderlineCold = 0x00001000,
    /// <summary>
    /// LVS_EX_MULTIWORKAREAS
    /// </summary>
    MultilWorkAreas = 0x00002000,
    /// <summary>
    /// LVS_EX_LABELTIP
    /// </summary>
    LabelTip = 0x00004000,
    /// <summary>
    /// LVS_EX_BORDERSELECT
    /// </summary>
    BorderSelect = 0x00008000,
    /// <summary>
    /// LVS_EX_DOUBLEBUFFER
    /// </summary>
    DoubleBuffer = 0x00010000,
    /// <summary>
    /// LVS_EX_HIDELABELS
    /// </summary>
    HideLabels = 0x00020000,
    /// <summary>
    /// LVS_EX_SINGLEROW
    /// </summary>
    SingleRow = 0x00040000,
    /// <summary>
    /// LVS_EX_SNAPTOGRID
    /// </summary>
    SnapToGrid = 0x00080000,
    /// <summary>
    /// LVS_EX_SIMPLESELECT
    /// </summary>
    SimpleSelect = 0x00100000
}

public enum ListViewMessages
{
    First = 0x1000,
    SetExtendedStyle = (First + 54),
    GetExtendedStyle = (First + 55),
}

/// <summary>
/// Contains helper methods to change extended styles on ListView, including enabling double buffering.
/// Based on Giovanni Montrone's article on <see cref="http://www.codeproject.com/KB/list/listviewxp.aspx"/>
/// </summary>
public class ListViewHelper
{
    private ListViewHelper()
    {
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern int SendMessage(IntPtr handle, int messg, int wparam, int lparam);

    public static void SetExtendedStyle(Control control, ListViewExtendedStyles exStyle)
    {
        ListViewExtendedStyles styles;
        styles = (ListViewExtendedStyles)SendMessage(control.Handle, (int)ListViewMessages.GetExtendedStyle, 0, 0);
        styles |= exStyle;
        SendMessage(control.Handle, (int)ListViewMessages.SetExtendedStyle, 0, (int)styles);
    }

    public static void EnableDoubleBuffer(Control control)
    {
        ListViewExtendedStyles styles;
        // read current style
        styles = (ListViewExtendedStyles)SendMessage(control.Handle, (int)ListViewMessages.GetExtendedStyle, 0, 0);
        // enable double buffer and border select
        styles |= ListViewExtendedStyles.DoubleBuffer | ListViewExtendedStyles.BorderSelect;
        // write new style
        SendMessage(control.Handle, (int)ListViewMessages.SetExtendedStyle, 0, (int)styles);
    }
    public static void DisableDoubleBuffer(Control control)
    {
        ListViewExtendedStyles styles;
        // read current style
        styles = (ListViewExtendedStyles)SendMessage(control.Handle, (int)ListViewMessages.GetExtendedStyle, 0, 0);
        // disable double buffer and border select
        styles -= styles & ListViewExtendedStyles.DoubleBuffer;
        styles -= styles & ListViewExtendedStyles.BorderSelect;
        // write new style
        SendMessage(control.Handle, (int)ListViewMessages.SetExtendedStyle, 0, (int)styles);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T18:01:58.150

我在任何自定义呈现事件处理程序（DrawItem、DrawSubItem）中都看到了 ListView 控件的闪烁问题。我尝试了 BeginUpdate()/EndUpdate() 和双缓冲但没有成功。**我认为 .NET 会为自定义绘制列右侧的**所有列触发额外的 WM_PAINT 。

但是，我发现此解决方法适用于单个自定义呈现的列 ListView。它工作得很好！

1.  在列标题编辑器中，将自定义绘制的列设置为**最后一列**
2.  更改所需位置的“DisplayIndex”

这应该解决鼠标悬停或运行时渲染中的闪烁问题。

# matlab - 在Matlab中将具有重复值的向量转换为矩阵

> ID：10484266
> 
> 赞同：1
> 
> 时间：2012-05-07T14:54:58.723
> 
> 标签：matlab, vector, matrix, boolean, sparse-matrix

我有一个 n 大小的向量，我想将其转换为 nxm 的布尔矩阵，其中 m 是该向量中的多个唯一值。

```
a = repmat(1:5:20,1,3)
a = 
    1 6 11 16 1 6 11 16 1 6 11 16 
```

我想要的结果是矩阵 12x4：

```
 1 0 0 0 
 0 1 0 0 
 0 0 1 0 
...
 0 0 0 1 
```

任何想法如何在没有 for 循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:11:46.520

你可以试试这个：

```
a = repmat(1:5:20,1,3);  
b = unique(a);   

bsxfun(@eq, a', b) 
```

结果将是：

```
ans =

 1     0     0     0
 0     1     0     0
 0     0     1     0
 0     0     0     1
 1     0     0     0
 0     1     0     0
 0     0     1     0
 0     0     0     1
 1     0     0     0
 0     1     0     0
 0     0     1     0
 0     0     0     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:10:20.920

```
a = repmat(1:5:20,1,3)
b=unique(a);
c = repmat(a',1,numel(b))== repmat(b,numel(a),1); 
```

但通常循环会更快，应避免使用 repmat。所以，现在有一个循环：

```
a = repmat(1:5:20,1,3)
b=unique(a);
c=false(numel(a),numel(b));
for ii=1:numel(a)
    c(ii,:) = a(ii)==b;
end 
```

# visual-studio-2010 - 我们在 Visual Studio 2010 Express 中有 Quick Watch 吗？

> ID：10484270
> 
> 赞同：4
> 
> 时间：2012-05-07T14:55:22.253
> 
> 标签：visual-studio-2010, debugging, express

我在 Visual Studio 2010 Express 中找不到 Quick Watch。我们是否只有观看选项而没有快速观看的选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T14:16:37.703

不，**快速观看**功能在 Visual Studio 的 Express 版本中不可用。

*   这是一个神话，它只能从 C++ 中获得。这是来自 Visual Studio 2010 Professional 的屏幕截图，显示了用于 ASP.NET C# 项目的 QuickWatch：

    ![在此处输入图像描述](../Images/0aa1e9d66038a60d87ba8304cafae38c.png)

*   在 Express 版本中可以手动绑定密钥是一个神话。命令`Debug.QuickWatch`，虽然在 Visual Studio 的付费版本中可用：

    ![在此处输入图像描述](../Images/b6f725960012fe6bb82a282d0a2746cd.png)

    在 Express 版本中不可用（在 2008、2010、2012 年测试）：

    ![在此处输入图像描述](../Images/37b588a68ddc8b4c6a1495f9f595105b.png)

*   `Shift`按+`F9`将使**QuickWatch**窗口出现在 Express 版本中是一个神话

*   选择是一个神话

    2010 Express：工具 -> 导入和导出设置 -> 重置所有设置
    2012 Express：工具 -> 设置 -> 重置

    将恢复在 Express 版本中拥有 QuickWatch 的能力。

* * *

来自 MSDN：[如何：使用 QuickWatch 对话框](http://msdn.microsoft.com/en-us/library/cyzbs7s2%28v=vs.80%29.aspx)

> ```
> Visual Studio Edition  Visual Basic  C#   C++  J#
> =====================  ============  ===  ===  ===
> Express                No            No   No   No
> Standard               No            No   No   No
> Pro/Team               Yes           Yes  Yes  Yes 
> ```
> 
> 因此，一些用户可能想知道为什么 QuickWatch 有用。为什么不简单地将变量或表达式添加到 Watch 窗口？好吧，你可以这样做，但假设你只是想做一个涉及一个或多个变量的快速计算？您不想让此类计算使 Watch 窗口变得混乱。这就是 QuickWatch 的用武之地。
> 
> QuickWatch 对话框的另一个不错的功能是它可以调整大小。如果您想查看大型对象的成员，展开并查看树 QuickWatch 通常比在 Watch、Locals 或 Autos 窗口中更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:02:16.667

在 Visual Studio *Express* 2010 中，QuickWatch 对话框**仅适用于 C++**，任何其他语言**都不支持**该功能。

请参阅 MSDN 上的此主题：http: [//msdn.microsoft.com/en-us/library/cyzbs7s2.aspx](http://msdn.microsoft.com/en-us/library/cyzbs7s2.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T15:00:44.337

即使在 Visual Studio 的快速 SKU 中也应该提供快速观看功能。可能发生的情况是，由于某种原因，特定菜单在当前配置文件中默认不可见。您可以通过在调试时执行以下操作来验证这种情况

*   查看 -> 其他窗口 -> 命令窗口
*   Debug.QuickWatch 表达式

该`Debug.QuickWatch`命令将直接调用快速监视功能。它的行为就像您`theExpression`在快速监视窗口中键入一样。

# ruby - array.select 的语法是什么？

> ID：10484271
> 
> 赞同：0
> 
> 时间：2012-05-07T14:55:26.303
> 
> 标签：ruby, arrays

我正在尝试使用`Array.select`从包含不需要的项目的数据库中分离然后删除字符串。我没有收到任何错误，但这似乎并没有像希望的那样工作。

相关代码是最后一部分：

```
totaltext = []
masterfacs = ''
nilfacs = ''

roomfacs_hash = {'lcd' => lcd2, 'wifi'=> wifi2, 'wired' => wired2, 'ac' => ac2}
roomfacs_hash.each do |fac, fac_array| 
  if roomfacs.include? (fac) 
    totaltext = (totaltext + fac_array)
    masterfacs = (masterfacs + fac + ' ')
  else
    nilfacs = (nilfacs + fac + ' ')
  end
end

finaltext = Array.new
text_to_delete = totaltext2.select {|sentences| sentences =~ /#{nilfacs}/i}
finaltext = totaltext2.delete (text_to_delete)
puts finaltext 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:04:48.317

它可能不起作用，因为[delete](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete)不是可链接的方法（返回值是您在成功时尝试删除的对象，如果未找到则返回 nil；*不是*修改后的数组）。为了简化您的代码，只需使用[拒绝](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-reject)

```
finaltext = totaltext.reject{|sentence| nilfacs.any?{|fac| sentence =~ /#{fac}/i } } 
```

# android - facebook登录和发帖错误

> ID：10484272
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:55:26.597
> 
> 标签：android, facebook

**我正在尝试通过单击按钮在 Facebook 墙上发布示例消息。当显示登录页面并显示错误时，以下代码崩溃：**

05-07 20:22:39.843: E/AndroidRuntime(810): java.lang.NullPointerException 05-07 20:22:39.843: E/AndroidRuntime(810): at com.facebook.android.SessionStore.save(SessionStore. java:33) 05-07 20:22:39.843: E/AndroidRuntime(810): 在 com.test.fb.TestPost$FbLoginDialogListener.onComplete(TestPost.java:116) 05-07 20:22:39.843: E/ AndroidRuntime(810)：在 com.facebook.android.Facebook$1.onComplete(Facebook.java:308) 05-07 20:22:39.843：E/AndroidRuntime(810)：在 com.facebook.android.FbDialog$FbWebViewClient。 shouldOverrideUrlLoading(FbDialog.java:125)

任何帮助都会得到帮助。谢谢

```
package com.test.fb;

import org.json.JSONObject;
import org.json.JSONTokener;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;

import android.app.Activity;
import android.app.ProgressDialog;

import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.Toast;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.BaseRequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.FacebookError;
import com.facebook.android.SessionStore;
import com.facebook.android.Facebook.DialogListener;

public class TestPost extends Activity{
    private TestPost _activity;
    private Facebook mFacebook;
    private ProgressDialog mProgress;

    private Handler mRunOnUi = new Handler();
    private static final String[] PERMISSIONS = new String[] {"publish_stream", "read_stream", "offline_access"};
    private static final String APP_ID = "331862293507865";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        //final EditText reviewEdit = (EditText) findViewById(R.id.revieew);
        //mFacebookCb                 = (CheckBox) findViewById(R.id.cb_facebook);

        mProgress   = new ProgressDialog(this);
        mFacebook   = new Facebook(APP_ID);
        SessionStore.restore(mFacebook, this);

        ((Button) findViewById(R.id.button1)).setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(mFacebook.isSessionValid()){

                String review = "Sample post";

                if (review.equals(""))
                    return;
                 postToFacebook(review);
                }
                else{
                    onFacebookClick();
                }
            }
        });
    }

    private void onFacebookClick() {
        if (mFacebook.isSessionValid()) {
            postToFacebook(null);
                } else {
            mFacebook.authorize(this, PERMISSIONS, -1, new FbLoginDialogListener());
        }
    }
    private void postToFacebook(String review) {    
        mProgress.setMessage("Posting ...");
        mProgress.show();

        AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);

        Bundle params = new Bundle();

        params.putString("message", review);
        params.putString("name", "Dexter");
        params.putString("caption", "londatiga.net");
        params.putString("link", "http://www.londatiga.net");
        params.putString("description", "Dexter, seven years old dachshund who loves to catch cats, eat carrot and krupuk");
        params.putString("picture", "http://twitpic.com/show/thumb/6hqd44");

        mAsyncFbRunner.request("me/feed", params, "POST", new WallPostListener());
    }

    private final class WallPostListener extends BaseRequestListener {
        public void onComplete(final String response) {
            mRunOnUi.post(new Runnable() {

                public void run() {
                    mProgress.cancel();

                    Toast.makeText(TestPost.this, "Posted to Facebook", Toast.LENGTH_SHORT).show();
                }
            });
        }
    }

    private final class FbLoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
            SessionStore.save(mFacebook, _activity);
           getFbName();
        }

        public void onFacebookError(FacebookError error) {

        }

        public void onError(DialogError error) {

        }

        public void onCancel() {

        }
    }
    private void getFbName() {
        mProgress.setMessage("Finalizing ...");
        mProgress.show();

        new Thread() {
            @Override
            public void run() {
                String name = "";
                int what = 1;

                try {
                    String me = mFacebook.request("me");

                    JSONObject jsonObj = (JSONObject) new JSONTokener(me).nextValue();
                    name = jsonObj.getString("email");
                    what = 0;
                } catch (Exception ex) {
                    ex.printStackTrace();
                }

                mFbHandler.sendMessage(mFbHandler.obtainMessage(what, name));
            }
        }.start();
    }

    private Handler mFbHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            mProgress.dismiss();

            if (msg.what == 0) {
                String username = (String) msg.obj;
                username = (username.equals("")) ? "No Name" : username;

                SessionStore.saveName(username, _activity);

            } else {
                Toast.makeText(_activity, "Connected to Facebook", Toast.LENGTH_SHORT).show();
            }
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:07:55.720

在*onComplete*方法中，您尝试保存会话：

```
SessionStore.save(mFacebook, _activity); 
```

我认为，问题在于您没有为“_activity”参数（在您发布的代码中）分配任何值，因此它为空。

无论如何，这个变量有什么意义？如果要从私有类中访问活动实例，那么您可以尝试：

```
SessionStore.save(mFacebook, TestPost.this); 
```

# java - 将 EJBQL 查询与 CriteriaBuilder 对象合并

> ID：10484273
> 
> 赞同：0
> 
> 时间：2012-05-07T14:55:32.543
> 
> 标签：java, jpa, jasper-reports, ejbql

有没有一种简单的方法可以将现有的 ejbql 查询与现有的 CriteriaBuilder 对象合并？

我一方面有一个带有 ejbql 查询的碧玉报告，另一方面是作为 CriteriaBuilder 对象的应用程序功能和对象权限。

我的想法是：

我进行报表查询 -> 添加功能权限声明 -> 一次性执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:29:37.657

可能最好坚持其中一个。

在 EclipseLink 中，两者最终都作为 EclipseLink 表达式对象。从 JPQL 查询中，您可以获取 DatabaseQuery 并使用另一个 Expression 添加到其 selectionCriteria，您可以从 Criteria 生成该表达式。

# select - 如何使用 KnockoutJS 使用单选按钮动态填充选择元素的值

> ID：10484274
> 
> 赞同：0
> 
> 时间：2012-05-07T14:55:40.373
> 
> 标签：select, radio-button, knockout.js

我要创建的是一个选择元素，其值由一对单选按钮（'父'）中的选择确定：

```
<p>
How many dimensions? 
<input type="radio" name="dimension" value="2D" data-bind="checked: dimSelect" />2D
<input type="radio" name="dimension" value="3D" data-bind="checked: dimSelect" />3D
</p>
<p data-bind="text: dimSelect"></p>
<p data-bind="visible: dimSelect">
Which geometry? <select data-bind="options: geometry, optionsCaption: 'Choose'"></select>
</p> 
```

我现在的视图模型是：

```
<script type="text/javascript">
function viewModel(){
    dimSelect = ko.observable();
    if (dimSelect() == '2D') {
        alert('2D: ' + dimSelect());
        geometrie = ko.observableArray(['Circle', 'Quadrant', 'Triangle']);
    } else {
        alert('3D: ' + dimSelect());
        geometrie = ko.observableArray(['Cilinder', 'Cube', 'Widge']);
    };
}
ko.applyBindings(new viewModel());
</script> 
```

但由于某种原因，我可以获得在文本活页夹中表示的 dimSelect 值，但不能在我的 viewModel 的 if 语句中。它是未定义的（因此适用 3D）。我可能做错了一些新手的事情，比如整个理论方法，所以请让你的答案尽可能实用/易于理解。

感谢您的时间和耐心！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:42:28.540

有几种方法可以解决这个问题。

在您当前的代码中，您在构造函数中创建了一些全局变量，而不是将它们附加到您正在创建的对象的新实例（`this`）。

这是另一种方法：

```
<p>
How many dimensions? 
<input type="radio" name="dimension" value="2D" data-bind="checked: dimSelect" />2D
<input type="radio" name="dimension" value="3D" data-bind="checked: dimSelect" />3D
</p>
<p data-bind="text: dimSelect"></p>
<p data-bind="with: dimSelect">
    Which geometry? <select data-bind="options: $root.dimensions[$data], optionsCaption: 'Choose'"></select>
</p> 
```

js：

```
function ViewModel() {
    this.dimSelect = ko.observable();
    this.dimensions = {
        '2D': ['Circle', 'Quadrant', 'Triangle'],
        '3D': ['Cilinder', 'Cube', 'Widge']         
    };
}
ko.applyBindings(new ViewModel()); 
```

示例：http: [//jsfiddle.net/rniemeyer/dvxdR/](http://jsfiddle.net/rniemeyer/dvxdR/)

# javascript - 检查Jquery何时分配了一个类，然后做一些事情

> ID：10484275
> 
> 赞同：0
> 
> 时间：2012-05-07T14:55:40.663
> 
> 标签：javascript, css-selectors

我有以下代码：

```
<div id="slideshow" >
    <div class="check">
        <img src="images/slideshow/image01.jpg" alt="Slideshow Image 1" />
    <p>Some paragraph</p>
    </div>    
    <div>
        <img src="images/slideshow/image02.jpg" alt="Slideshow Image 2" />
        <p>Some paragraph</p>
    </div>
    <div>
        <img src="images/slideshow/image03.jpg" alt="Slideshow Image 3" />
        <p>Some paragraph</p>
    </div>
</div> 
```

我发现这个幻灯片方法使用以下代码淡入和淡出 DIV 以创建一种图像幻灯片：

```
function slideSwitch() {

var $active = $('#slideshow DIV.check');

if ( $active.length == 0 ) $active = $('#slideshow DIV:last');

var $next =  $active.next().length ? $active.next()
    : $('#slideshow DIV:first');

$active.addClass('last-active');

$next.delay(2000)
    .css({opacity: 0.0})
    .addClass('check')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('check last-active');
    });
}

$(function() {setInterval("slideSwitch()", 8000);}); 
```

如您所见，它添加了在 DIV 中淡出的“检查”类。当slideSwitch 函数将类“检查”添加到Div 时，我正在尝试使用Jquery 检查，然后执行某些操作。我试过这个，但它不起作用：

```
if ($("#slideshow > div:nth-child(2)").hasClass('check')) {
    $("#slideshow > div:nth-child(2)").animate({marginTop: "-50px"}, 5000);
} else {
//Do nothing
} 
```

如果我只是检查第一个孩子或者我只是添加它（可能是因为它已经在 HTML 代码中定义了类），它就可以工作：

```
if ($("#slideshow DIV").hasClass... etc 
```

但是随后动画立即开始，当我真正想要的是它在第二个 DIV 已经在 J​​avaScript 中分配了类“检查”之后立即开始。请帮忙！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:00:14.093

在上面的代码中调用该类时会立即添加该类。为什么不包括你的动画呢？

```
$next.delay(2000)
    .css({opacity: 0.0})
    .addClass('check')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('check last-active');
        $("#slideshow > div:nth-child(2)").animate({marginTop: "-50px"}, 5000);

    });
} 
```

# solr - elasticsearch 是否有 solr 中的“核心”等价物？

> ID：10484276
> 
> 赞同：9
> 
> 时间：2012-05-07T14:55:50.647
> 
> 标签：solr, elasticsearch

我正在关注将 ElasticSearch 或 solr 用于“入狱”搜索结果。通过入狱，我想将数据集分开以用于安全目的等。

据我所知，这可以通过使用 solr 的多核配置来实现——有没有办法使用 ElasticSearch 以有效的“实例化”方式隔离索引/数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T15:01:57.720

在 ElasticSearch 中，您可以通过索引到单独的索引来分隔数据，然后将查询限制到特定的索引。

例如，如果您有两个索引，“foo”和“bar”正在运行：

```
% curl -XGET http://localhost:9200/_search?q=*:* 
```

将搜索整个集群，同时：

```
% curl -XGET http://localhost:9200/foo/_search?q=*:* 
```

将仅搜索 'foo' 索引。

如果您使用以下内容创建索引“测试”，您还可以按类型分隔数据：

```
% curl -XPOST http://localhost:9200/test -d '{
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false },
            "properties" : {
                "field1" : { "type" : "string", "index" : "not_analyzed" }
            }
        },
        "type2" : {
            "_source" : { "enabled" : false },
            "properties" : {
                "field1" : { "type" : "string", "index" : "not_analyzed" }
            }
        }
    }
}' 
```

您可以通过使用查询指定类型来仅搜索“type1”文档：

```
% curl -XGET http://localhost:9200/test/type1/_search?q=*:* 
```

# javascript - Javascript 将函数命名为表达式

> ID：10484281
> 
> 赞同：2
> 
> 时间：2012-05-07T14:56:04.340
> 
> 标签：javascript, function, scope

Javascript代码

```
var d = function c() { console.log(c); };
d(); // function c() { console.log(c); }; 
c(); // Reference Error 
```

我理解变量提升的概念，其中变量声明和函数定义被提升到现有范围的顶部。函数表达式中的函数定义也不会被提升。

所以，上面将是

```
var d;
d = function c() { console.log(c); };
d();
c(); 
```

因此 d 是对命名函数 c 的引用

1.  在执行`d()`函数时 c 在全局范围内执行，其中没有名为 c 的变量或属性。但是控制台仍然设法记录c的函数定义。
2.  当我尝试时，`c()`我得到了一个参考错误。[如我所料]

案例 2 证明没有名为 c 的窗口属性可用 那么，如何`d()`在执行时打印 c 的定义？

每个函数在其本地范围内都有自己的定义作为属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:59:13.330

是的。命名函数表达式仅在该函数范围内生成与函数名称相对应的变量。

这是一篇关于这个主题的优秀但冗长的文章：http: [//kangax.github.com/nfe/](http://kangax.github.com/nfe/)

另请参阅[ECMAScript 5 规范的相关部分](http://ecma262-5.com/ELS5_HTML.htm#Section_13)。它对此有一个具体的说明。

# jquery - TokenInput 不能很好地处理加号

> ID：10484283
> 
> 赞同：-1
> 
> 时间：2012-05-07T14:56:06.770
> 
> 标签：jquery

[演示](http://jsfiddle.net/mplungjan/5UB8c/)

**HTML：**

```
<link rel="stylesheet" href="token-input-facebook.css" />
<script src="jquery.tokeninput.js"></script>
<br/><label for="ExpFilter">Expl:</label><br/>
<input type="text"  id="ExpFilter" style="width:100px"/> 
```

**jQuery：**

```
var Code_Expl = [
{ id: 0, name:"+ DESIGNATED CONTRACTING STATES:"},
{ id: 1, name:"+ EXTENSION OF THE EUROPEAN PATENT TO"},
{ id: 2, name:"+ REQUEST FOR EXAMINATION FILED"},
{ id: 3, name:"+ PAYMENT OF DESIGNATION FEES"},
{ id: 4, name:"+ FIRST EXAMINATION REPORT"},
{ id: 5, name:"- LAPSED IN A CONTRACTI...FROM NAT. OFFICE TO EPO"},
{ id: 6, name:"+ EUROPEAN PATENT GRANTED"},
{ id: 7, name:"+ ENTRY IN THE NATIONAL PHASE"},
{ id: 8, name:"BE: CHANGE OF HOLDER'S NAME"},
{ id: 9, name:"CORRESPONDS TO:"},
{ id:10, name:"+ EUROPEAN PATENTS GRANTED DESIGNATING IRELAND"},
{ id:11, name:"- PATENT CEASED"},
{ id:12, name:"- FR: TRANSLATION NOT FILED"},
{ id:13, name:"+ NO OPPOSITION FILED"},
{ id:14, name:"- PATENT LAPSED"},
{ id:15, name:"+ POSTGRANT: ANNUAL FEES PAID TO NATIONAL OFFICE"},
{ id:16, name:"- BE: LAPSED"},
{ id:17, name:"- GB: EUROPEAN PATENT C...-PAYMENT OF RENEWAL FEE"}
]; 
```

作品：

```
var query = "+ DE";  
var results = $.grep(Code_Expl, function (row) {
  return row.name.toLowerCase().indexOf(query.toLowerCase()) > -1;
});
console.log(results);  
// --------------------- 
```

WORKS，但不适用于以 PLUS 开头的内容 - 为什么？我使用上面相同的 grep 似乎是填充函数失败但我不明白为什么

```
$(document).ready(function() {
  $("#ExpFilter").tokenInput(Code_Expl,{theme: "facebook"});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:22:33.027

六个月前在 github 上的一次提交中修复了这个问题：

[https://github.com/loopj/jquery-tokeninput/pull/314](https://github.com/loopj/jquery-tokeninput/pull/314)

只需从github而不是从网站下载master，就可以了。在我自己的网站上遇到了与“C++”类别相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:54:03.520

我必须明白，问题出在这两个函数的正则表达式中。

```
 function highlight_term(value, term) {
        return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<b>$1</b>");
    }

    function find_value_and_highlight_term(template, value, term) {
        return template.replace(new RegExp("(?![^&;]+;)(?!<[^<>]+)(" + value + ")(?![^<>]*>)(?![^&;]+;)", "g"), highlight_term(value, term));
    } 
```

您必须修改此 regEx 以获得所需的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:31:13.800

我遇到了同样的问题。只需将 + 字符替换为 + unicode :)

# c# - 在 C# 中显示一个文本弹出窗口

> ID：10484287
> 
> 赞同：2
> 
> 时间：2012-05-07T14:56:26.233
> 
> 标签：c#, winforms

在一个表单中，我有一个标签，但标签文本超出了面板范围，当鼠标悬停在标签上一段时间显示一个包含所有文本的弹出窗口时，我该怎么办？

编辑：这里的代码：

```
public partial class AppMenuItem : UserControl
{
    public string path;

    public string name
    {
        get { return label1.Text; }
    }

    public AppMenuItem(string path, string name)
    {
        InitializeComponent();
        label1.Text = name;
        this.path = path;
        pictureBox1.Image = ShortcutsHelper.GetIcon(path);
    }

    private void pinToStartToolStripMenuItem_Click(object sender, EventArgs e)
    {
        TilesHelper.AddTile(this.name, this.path);
    }

    private void label1_MouseClick(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Right)
        {
            contextMenuStrip1.Show(this.PointToScreen(Point.Empty));
        }
        else
        {
            System.Diagnostics.Process.Start(path);
            ((AppForm)this.ParentForm).DialogResult = DialogResult.OK;
            ((AppForm)this.ParentForm).Close();
            ((AppForm)this.ParentForm).textBox1.Text = "";
        }
    }

    private void label1_MouseHover(object sender, EventArgs e)
    {
        new ToolTip().Show(this.name, this.ParentForm);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:00:40.653

您是否尝试添加[ToolTip](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)？

```
var fullText = "quick brown fox jumps over the lazy dog";
System.Windows.Forms.ToolTip tt = new System.Windows.Forms.ToolTip();
tt.SetToolTip(this.label1, fullText); 
```

**编辑：**您应该删除`MouseHover`事件，并将工具提示添加到构造函数中的标签：

```
public AppMenuItem(string path, string name)
{
    InitializeComponent();
    label1.Text = name;
    this.path = path;
    pictureBox1.Image = ShortcutsHelper.GetIcon(path);
    ToolTip tt = ToolTip();
    tt.SetToolTip(label1, name);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:01:04.560

您必须创建一个[ToolTIp](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)对象并设置所需的文本：

```
System.Windows.Forms.ToolTip ToolTip1 = new System.Windows.Forms.ToolTip();
    ToolTip1.SetToolTip(this.Label1, this.Label1.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:05:25.310

检查 MSDN：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.label.autoellipsis.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.autoellipsis.aspx)

# zend-framework - zend fremawork 中的 Dojo 网格实现，

> ID：10484289
> 
> 赞同：1
> 
> 时间：2012-05-07T14:56:29.703
> 
> 标签：zend-framework, dojo, dojox.grid.datagrid

伙计们

我试图按照本教程[http://www.encodez.com/blog/zend-dojo-data-grid-json.html](http://www.encodez.com/blog/zend-dojo-data-grid-json.html)但我不断收到 java 脚本错误

```
xhrFailed
[Break On This Error]   

return mix(new Error(error), {src:"dojoLoader", info:info}); 
```

我无法弄清楚如何解决这个问题。

# ios - setNeedsDisplayInRect：导致整个视图被更新

> ID：10484291
> 
> 赞同：10
> 
> 时间：2012-05-07T14:56:41.097
> 
> 标签：ios, core-animation, core-graphics

我正在开发一个使用 CoreGraphics 进行渲染的绘画应用程序。我的问题是，为了性能，我试图将更新限制在视图中已更改的某些部分。为此，我使用 setNeedsDisplayInRect:，但有时视图会更新其全部内容，从而导致卡顿。这在第 3 代 iPad 上尤为明显，但在模拟器和 iPad2 中也发生的程度较小。我正在尝试消除这种行为。

为了展示这个问题，我使用 Xcode 中的模板创建了一个简单的“单一视图”项目。创建了一个自定义 UIView 子类，我在 xib 文件中将其设置为视图控制器的视图。

将此添加到 UIViewController：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Asks that the view refreshes a smal rectangle
    [self.view setNeedsDisplayInRect:CGRectMake(10, 10, 20, 20)];
} 
```

将此添加到 MyView （我的自定义视图）：

```
- (void)drawRect:(CGRect)rect
{
    // Just log what is being updated
    NSLog(@"%@", NSStringFromCGRect(rect));
} 
```

就是这样。如果我在第 3 台 10 台 iPad（实际设备）上运行该应用程序，日志会显示视图不时在其整体中重新绘制自身（例如非常频繁）。这太令人沮丧了，我没有想法

更新：这里有一些日志。它肯定会显示有时会更新的完整视图。我试图让它完全停止，但不知道如何......

```
2012-05-04 08:34:01.851 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:34:30.184 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:34:30.197 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:34:30.215 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.226 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.242 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.258 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.274 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.290 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.306 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.322 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.338 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.354 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.371 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.387 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.403 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.419 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:30.439 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:34:30.457 TestUpdateArea[45745:707] {{10, 10}, {20, 20}} 
```

此外，如果我停止移动超过 10 秒左右并恢复，它肯定会非常一致地执行此操作：

```
2012-05-04 08:34:33.305 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:34:33.321 TestUpdateArea[45745:707] {{10, 10}, {20, 20}}
2012-05-04 08:35:00.202 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:35:00.221 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:35:00.234 TestUpdateArea[45745:707] {{0, 0}, {320, 460}}
2012-05-04 08:35:00.251 TestUpdateArea[45745:707] {{10, 10}, {20, 20}} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-31T08:47:18.467

**接受的答案是错误的**（或至少具有误导性）。

这是一个简单的 setNeedsDisplayInRect 代码示例：按照宣传的方式工作：

[http://charcoaldesign.co.uk/resources/chalkboard.zip](http://charcoaldesign.co.uk/resources/chalkboard.zip)

我怀疑 Apple 文档试图解释这样一个事实，即在 iOS 上，每个视图支持图像都转换为 OpenGL 纹理，并且整个屏幕每帧都重新合成。这与您的代码是否必须清除和重绘视图支持纹理的全部内容的问题不同。

通过使用 setNeedsDisplayInRect: 您可以避免昂贵的重绘内容，这些内容在帧之间不会发生变化（它使用核心图形并且没有硬件加速）。无论如何，整个屏幕仍然会被重绘，但这并不重要，因为它是由 GPU 硬件加速的，这与 drawRect 中的代码不同：

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T07:36:25.213

检查这个苹果[文件](https://developer.apple.com/library/ios/#qa/qa1708/_index.html)

他们说 ：

> `-setNeedsDisplayInRect:`由于 iPhone/iPod touch/iPad 更新屏幕的方式，如果您调用或 ，整个视图将被重绘`-setNeedsDisplay:`。

还

> 每个 UIView 都被视为一个元素。当您通过调用`-setNeedsDisplayInRect:`或请求部分或全部重绘时，`-setNeedsDisplay:`整个视图将被标记为更新。

所以我认为你需要使用子视图来更新整个视图的独立矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:32:12.057

我有一个类似的问题：即只想通过调用 setNeedsDisplayInRect 来更新 UIView 的一部分：我传递了正确大小的有效 CGRect（通过断点和日志证明）。在 iOS 4.2.1 下（在我的 iPhone 3G 上），UIView 保留其原始图像，只更新由 CGRect 指定的部分，但在 iOS 5.1 下（在我的 iPhone 4S 上），整个 UIView 被重绘为透明黑色（如何黑色可以透明超出了我的范围），之后正确绘制了 CGRect 指定的区域。似乎是：Apple 的一个错误是他们没有正确实现 setNeedsDisplayInRect: 并且只是将它传递给 setNeedsDisplay:; 或者这是一个基于新 iOS 如何处理与实际屏幕架构交互的故意决定。无论哪种方式，

我已经用 UIView 属性 clearsContextBeforeDrawing 做了一些测试（根据文档应该允许有针对性的绘图操作），但是对于 YES 和 NO，结果是相同的，所以它似乎是绘图代码的实现。

至于更新期间 CGRect 的大小不正确：它是在绘图调用之前还是之后设置在其他地方。我在调用 setNeedsDisplayInRect: 之前设置了我的 CGRect，然后在 drawRect 方法的最后几行将其设置为 CGRectNull（如果系统调用 drawRect 方法，我的代码将不会触发）。回到你的代码片段后，我可以看到它被设置为内联，这意味着它是一个系统调用，它正在重绘整个 UIView，因此 CGRect 是整个视图。

我会继续深入研究这一点，但我担心在 Apple 披露他们对 setNeedsDisplayInRect: 进行更改的理由或修复明显的错误之前，我们可能会考虑为每次图形更新更新 UIView 的全部内容（这可能可能非常“昂贵”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-08T14:37:37.807

我没有很多可用的设备，但无论如何我都有好消息！作为多年来一直希望在 iOS 上实现此功能的人，我可以断言 iOS8.0+ 带来了此功能。我已经在模拟器和设备上尝试过 8.0、8.1、8.2

自iOS6以来我还没有尝试过。所以我不确定它是否在 iOS7 中可用。也许其他人可以确认。

请和我一起为按记录运行而无休止地欢呼`setNeedsDisplayInRect:`！

# c# - 使用 MVC2 从 SQL 数据库动态调整图像大小

> ID：10484295
> 
> 赞同：4
> 
> 时间：2012-05-07T14:56:45.187
> 
> 标签：c#, sql, asp.net-mvc-2, image-scaling, imageresizer

我有一个简单的 MVC2 应用程序，它将文件从浏览器上传到 MS SQL 数据库作为图像 blob。

然后我可以返回结果，例如：

```
 public FileContentResult ShowPhoto(int id)
        {
           TemporaryImageUpload tempImageUpload = new TemporaryImageUpload();
           tempImageUpload = _service.GetImageData(id) ?? null;
           if (tempImageUpload != null)
           {
              byte[] byteArray = tempImageUpload.TempImageData;
              return new FileContentResult (temp, "image/jpeg");
           }
           return null;
        } 
```

但我想将这些图像调整为缩略图和画廊大小的视图。这可以在这个结果中做到吗？我一直在玩很棒的 imageresizer.net，但它似乎想将图像存储在我想要避免的服务器上。是否可以即时执行此操作..？

我需要保留原始文件，如果可能的话，我不想将图像作为文件存储在服务器上。

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T15:43:55.230

ImageResizer.NET 允许您将流传递给它以调整大小，请参阅[托管 API 使用](http://imageresizing.net/docs/managed)

您将使用的方法是：

**ImageResizer.ImageBuilder.Current.Build(object source, object dest, ResizeSettings 设置)**

我修改了您的方法以这种方式进行，但未经测试。希望能帮助到你。

```
public FileContentResult ShowPhoto(int id)
    {
       TemporaryImageUpload tempImageUpload = new TemporaryImageUpload();
       tempImageUpload = _service.GetImageData(id) ?? null;
       if (tempImageUpload != null)
       {
          byte[] byteArray = tempImageUpload.TempImageData;
          using(var outStream = new MemoryStream()){
              using(var inStream = new MemoryStream(byteArray)){
                  var settings = new ResizeSettings("maxwidth=200&maxheight=200");
                  ImageResizer.ImageBuilder.Current.Build(inStream, outStream, settings);
                  var outBytes = outStream.ToArray();
                  return new FileContentResult (outBytes, "image/jpeg");
              }
          }
       }
       return null;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T15:55:35.673

[最近有一个关于图像调整大小](http://www.hanselminutes.com/313/)的 Hanselminutes 播客，Nathanael Jones 讨论了图像调整大小的一些陷阱。

即使您没有 30 多分钟的时间来收听完整的播客，节目说明也指出了一些有趣的[调整大小陷阱](http://nathanaeljones.com/163/20-image-resizing-pitfalls/)，以及Nathanael Jones 编写的图像大小调整[库。](http://imageresizing.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T15:32:11.073

您可以即时调整图像的大小：

```
public void ResizeImage(Stream input, Stream output, int newWidth, int maxHeight)
{
    using (var srcImage = Image.FromStream(input))
    {
        int newHeight = srcImage.Height * newWidth / srcImage.Width;
        if (newHeight > maxHeight)
        {
            newWidth = srcImage.Width * maxHeight / srcImage.Height;
            newHeight = maxHeight;
        }

        using (var newImage = new Bitmap(newWidth, newHeight))
        using (var gr = Graphics.FromImage(newImage))
        {
            gr.SmoothingMode = SmoothingMode.AntiAlias;
            gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
            gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
            gr.DrawImage(srcImage, new Rectangle(0, 0, newWidth, newHeight));
            newImage.Save(output, ImageFormat.Jpeg);
        }
    }
} 
```

然后您可以有 2 个控制器操作（一个显示完整图像大小，一个显示缩略图）：

```
public ActionResult Thumbnail(int id)
{
    var tempImageUpload = new TemporaryImageUpload();
    tempImageUpload = _service.GetImageData(id) ?? null;
    if (tempImageUpload == null)
    {
        return HttpNotFound();
    }

    using (var input = new MemoryStream(tempImageUpload.TempImageData))
    using (var output = new MemoryStream())
    {
        ResizeImage(input, output, 640, 1000);
        return File(output.ToArray(), "image/jpeg");
    }
} 
```

# javascript - 移动浏览器：后退按钮上的更新元素

> ID：10484299
> 
> 赞同：0
> 
> 时间：2012-05-07T14:56:56.480
> 
> 标签：javascript, android, ios, mobile, css

当用户在移动浏览器上导航时（特别是当他们使用滑动手势导航页面时），我使用 JavaScript 来显示 CSS3 抖动器。但是，当使用浏览器后退按钮时，抖动在 iOS 和 Android 中都存在。我尝试将以下内容添加到正文 onload，但似乎没有触发。

```
<body onload='document.getElementById("throbber").class="off";'> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:42:46.717

您需要监听 Back/Forward Cache (bfcache) 事件：pageshow 和/或 pagehide。请参阅[https://developer.mozilla.org/En/Working_with_BFCache](https://developer.mozilla.org/En/Working_with_BFCache)

# python - python正则表达式日期格式

> ID：10484300
> 
> 赞同：0
> 
> 时间：2012-05-07T14:57:08.540
> 
> 标签：python, regex, date

尝试编写一个 RE 来识别 Python 中的日期格式 mm/dd

```
reg = "((1[0-2])|(0?[1-9]))/((1[0-9])|(2[0-9])|(3[0-1])|(0?[0-9]))"
match = re.findall(reg, text, re.IGNORECASE)
print match 
```

* * *

因为`text = '4/13'`它给了我

```
[('4', '4', '', '13', '13', '', '', '')] 
```

但不是

```
'4/13' 
```

谢谢，程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:04:35.737

不要使用`re.findall`。使用`re.match`：

```
reg = "((0?[1-9])|(1[0-2]))/((1[0-9])|(2[0-9])|(3[0-1])|(0?[0-9]))"
match = re.match(reg, text, re.IGNORECASE)
print match.group() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:08:03.200

其他答案更直接，但您也可以在正则表达式周围添加一对额外的大括号：

`reg = "(((0?[1-9])|(1[0-2]))/((1[0-9])|(2[0-9])|(3[0-1])|(0?[0-9])))"`

现在`findall`会给你：

`[('4/13', '4', '4', '', '13', '13', '', '', '')]`

您现在可以`'4/13'`从上面提取。

# liferay - 当 a 不具有特定角色时，Liferay 更改默认重定向页面

> ID：10484302
> 
> 赞同：2
> 
> 时间：2012-05-07T14:57:18.010
> 
> 标签：liferay, liferay-6, liferay-theme

这基本上是两个问题？首先，我想知道当用户尝试访问具有高级用户查看权限的页面时如何更改页面 liferay 重定向。Liferay 默认指向 localhost:web/guest/home 他们有他们的登录页面。在我的应用程序中，我有一个不同的登录页面，我想重定向到以下页面。我正在浏览网页，发现通过设置`auth.login.site.url=/whereiwontittopoint`实际上应该将我重定向到那里。然而事实并非如此。我正在使用 Liferay 6.0.6 社区版。有人做过吗？这是正确的方法还是需要用钩子来完成？

我的另一个问题如下。我想在某些页面上有一个自定义角色。而且我希望当用户没有该特定角色时被重定向到完全不同的页面而不是默认登录。我相当确定这可以通过在某些服务上使用挂钩来完成，但由于某种原因我无法识别该服务。

编辑好的，我解决了第一个问题。对于第二个问题，我在这里得到的答案不是我想要的，可能是因为我没有正确发布问题。这是我所做的和我需要做的一个完整的场景：

首先，我将每个 liferay 页面上的 /web/guest 路径更改为 web/somthing/，这可能不会起到关键作用，但问题（一些问题）在发生这种情况时就开始了。总体思路如下。我正在使用 spring mvc 来创建应用程序。我已经为我的应用程序创建了一个后端，管理员可以从中创建页面供其他用户查看（这不是通过转到 liferay 的控制面板并添加页面而是通过应用程序的逻辑来完成的）。一旦根据某些逻辑创建了一个页面，我就会为该特定页面创建一个角色（客户角色也通过代码而不是 liferay 管理员）。如果满足某些标准而某些不满足，则某些用户将获得此角色。我的问题出现了，一旦登录到我的应用程序的用户尝试访问一个页面（通过在浏览器中输入该页面的直接 URL），该页面需要我为该页面创建的角色的查看权限并且用户没有适当的角色他被重定向到让我们说 localhost/web/(username)/home 一个个人页面，并且由于某种原因默认情况下从 liferay 在该页面上，他能够查看应用程序的所有其他用户的个人数据（用户名）。我的问题是如何通过代码来处理上述场景发生的重定向。我已经尝试过一次尝试实际挂钩 servlet.service.events.pre 操作，然后在用户访问该页面以检查他是否具有适当的权限并实际更改他的请求。到目前为止，我有一些问题，但我可以解决它们，但这种方法并不是我想要的，因为此操作是在应用程序上的每个请求之前执行的（并且页面处理只是该应用程序的一小部分）这意味着我将无缘无故地执行大量代码。我想知道是否有任何方法可以添加当我创建角色时异常将重定向的位置？如果不是我应该采取什么行动来帮助我解决这种情况，但没有我通过挂钩 servlet.service.events.pre 行动创建的不需要的额外流量？我想知道是否有任何方法可以添加当我创建角色时异常将重定向的位置？如果不是我应该采取什么行动来帮助我解决这种情况，但没有我通过挂钩 servlet.service.events.pre 行动创建的不需要的额外流量？我想知道是否有任何方法可以添加当我创建角色时异常将重定向的位置？如果不是我应该采取什么行动来帮助我解决这种情况，但没有我通过挂钩 servlet.service.events.pre 行动创建的不需要的额外流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:07:51.363

对于第二个东西有点hacky的方式可能如下

1) 定义要检查的角色集 portal-ext.properties。您可以添加一些属性，例如**my.super.secret.roles=rolename1,rolename2**

2) 在 portal-ext.properties 中为重定向页面 url 添加一个属性，以便您可以在那里重定向用户。

3）为布局添加一个名为**checkForSecretRoles**的自定义属性，该属性必须是布尔值并且在页面上可见。这将在每个页面的管理页面中显示一个复选框，以便管理员可以轻松地选中或取消选中该值

4）在你的主题（portal_normal.vm）中添加一个条件来检查页面是否有一个秘密角色检查，然后检查用户角色是否属于portal-ext.properties中定义的任何角色。如果是，则发出重定向到您的自定义重定向页面 url 属性指定的页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T01:02:04.777

1.  对于您的第一个问题，它应该有效-

    ```
    auth.forward.last.paths=/sign-in 
    ```

    登录将是您的页面名称

2.  第二个问题的答案是，您必须创建一个 Hook 扩展 Action 并在您的 portal-ext.properties 中创建以下条目。

    ```
    login.events.post=com.liferay.portal.events.LoginPostAction,com.liferay.portal.events.CustomLandingPageAction 
    ```

您可以在论坛上找到很多关于如何使用此属性的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:01:57.303

1.`default.landing.page.path=/whereiwontittopoint`在portal.properties中设置，见[Liferay登录页面重定向](https://stackoverflow.com/questions/3920970/liferay-login-page-redirect)

2.创建一个钩子，设置`servlet.service.events.post=com.my.action.MyAction`并执行此操作，此时您可以将用户重定向到另一个页面。

# python - 使用 setattr() 设置特殊方法

> ID：10484304
> 
> 赞同：7
> 
> 时间：2012-05-07T14:57:31.647
> 
> 标签：python, introspection, setattr

`__getitem__`是否可以使用 为类实例动态分配特殊方法，例如`setattr()`？例如，如果我有这个：

```
class Example (object):
    pass 
```

然后试试这个：

```
>>> example = Example()
>>> setattr(example, '__getitem__', lambda x: 1) 
```

我明白了：

```
>>> example['something']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'Example' object has no attribute '__getitem__' 
```

但当然这很好用：

```
>>> example.__getitem__('something')
1 
```

显然这里发生了一些我不明白的事情，关于 Python 如何为这类事情进行方法查找。这些方法是否必须在*类*上设置，而不是在实例上？

**更新**：

所以，我应该说清楚，我知道我可以在`Example`课堂上看到这一点......我希望有一种方法可以为*每个实例*设置它们，但到目前为止我看到的共识是你不能这样做.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:59:56.093

这里的问题是`__getitem__()`在类级别定义的，而不是在实例级别：

```
>>> class Example (object):
...     pass
... 
>>> example = Example()
>>> setattr(Example, '__getitem__', lambda x, y: 1)
>>> example['something']
1 
```

如果您需要它是特定于实例的：

```
>>> class Example(object):
...     def __getitem__(self, item):
...         return self._getitem(item)
... 
>>> example = Example()
>>> setattr(example, '_getitem', lambda x: 1)
>>> example['something']
1
>>> example2 = Example()
>>> setattr(example2, '_getitem', lambda x: 2)
>>> example['something']
1
>>> example2['something']
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:00:19.047

您是否尝试猴子修补类，而不是实例？

```
>>> example = Example()
>>> setattr(Example, '__getitem__', lambda self,x: 1) 
```

# jquery - 将 jquery 代码转换为 coffeescript 代码时出错

> ID：10484309
> 
> 赞同：1
> 
> 时间：2012-05-07T14:58:20.507
> 
> 标签：jquery, coffeescript

这个 jquery 代码在 jquery 格式中对我来说很好。

我想将此 jquery 代码转换为 coffeescript 代码：

```
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function (e) {  
      $('.preview_browse img#thumb').attr('src', e.target.result).width(251).show();
    };
    reader.readAsDataURL(input.files[0]);
    $('.not_found_image_browse').hide();
  }
} 
```

我从[http://js2coffee.org/](http://js2coffee.org/)得到这段代码：

```
readURL = (input) ->
  if input.files and input.files[0]
    reader = new FileReader()
    reader.onload = (e) ->
      $(".preview_browse img#thumb").attr("src", e.target.result).width(251).show()
    reader.readAsDataURL input.files[0]
    $(".not_found_image_browse").hide() 
```

但是当我在 post.js.coffee 的项目 rails 中输入此代码时，我无法正常工作。

我在浏览器控制台中出现此错误：

```
readURL is not defined
onchange()onchange (line 2)
event = change
[Break On This Error]   
readURL(this); 
```

这是我输入文件中的 html 代码：

```
<input id="post_image" class="file required" type="file" onchange="readURL(this)" name="post[image]"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:03:55.327

默认情况下，所有方法都在 coffeescript 的闭包中定义，因此您必须显式地将方法或对象放入窗口的上下文中，才能从输入的 onchange 属性中看到它：

```
window.readURL = (input) ->
  if input.files and input.files[0]
    reader = new FileReader()
    reader.onload = (e) ->
      $(".preview_browse img#thumb").attr("src", e.target.result).width(251).show()
    reader.readAsDataURL input.files[0]
    $(".not_found_image_browse").hide() 
```

来自[http://coffeescript.org/](http://coffeescript.org/)

> 尽管为了清楚起见在本文档中被隐藏，但所有 CoffeeScript 输出都包装在一个匿名函数中：`(function(){ ... })();`这个安全包装器与`var`关键字的自动生成相结合，使得意外污染全局命名空间变得极其困难。
> 
> 如果您想创建顶级变量供其他脚本使用，请将它们作为属性附加到**window**或CommonJS 中的**导出对象上。****存在运算符**（如下所述）为您提供了一种可靠的方法来确定在何处添加它们；如果您同时针对 CommonJS 和浏览器：`exports ? this`

# android - 尚未输入任何内容时禁用键盘的发送按钮 [Android]

> ID：10484310
> 
> 赞同：16
> 
> 时间：2012-05-07T14:58:23.640
> 
> 标签：android, android-softkeyboard, android-xml

我正在一个 android 应用程序中创建一个搜索选项。

在**屏幕键盘**上按下“搜索”后，将触发一个事件，该事件将查询发送到服务器。我想要做的是禁用**屏幕键盘**上的“搜索”按钮，当没有输入相应的文本时`EditText`。

我将此添加到`EditText`：

`android:imeOptions="actionSearch"`

所以这就是为什么键盘有一个“搜索”按钮而不是默认的“输入”/“完成”。（以防万一你想知道）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-12T13:12:36.430

我们无法禁用 android 键盘上的操作按钮。您将不得不在编辑器操作侦听器中检查空字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-23T11:00:26.770

```
setOnEditorActionListener(new TextView.OnEditorActionListener() {
if (txtView.getText().toString().trim().length() == 0) {
    Toast.makeText(getApplicationContext(), "Please Enter some text to search",
    Toast.Short).show();
    return true;    // returning true will keep the keyboard on
}
else search(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T10:28:13.643

试试这个（可能不是你想要的确切结果，但可能是你能得到的最接近的结果。

1）从 xml 中删除 android:imeOptions="actionSearch"

2）创建一个自定义 TextWatcher addTextChangedListener(TextWatcher watcher)，它允许您动态更改键盘，如下所示

```
textMessage = (EditText)findViewById(R.id.textMessage);
textMessage.addTextChangedListener(new TextWatcher(){
        public void afterTextChanged(Editable s) {
            if(firstTime){//a boolean you init to true
            firstTime = false;
            textMessage.setImeOptions(EditorInfo.IME_ACTION_SEARCH);
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after){}
        public void onTextChanged(CharSequence s, int start, int before, int count){}
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T11:37:39.047

您需要在其中制作 Custom EditText 、Make Extends EditText 和 @Override 下面的方法。

这是示例代码。

```
private ArrayList<Integer> keysToIgnore = new ArrayList<Integer>();

    public EditTextCus(Context context) {
        super(context);
    }

    public EditTextCus(Context context, AttributeSet attrs){
        super(context, attrs);      
    }

    public EditTextCus(Context context, AttributeSet attrs, int defStyle){
        super (context, attrs, defStyle);       
    }

private Boolean keyInIgnoreList(int keyCode) {      
        for (Integer i:keysToIgnore){
            int key = i.intValue();
            if (key == keyCode)
                return true;
        }
        return false;
    }

    public void addKeyToIgnoreList(int keyCode) {

        if (!keyInIgnoreList(keyCode)){
            keysToIgnore.add(keyCode);
        }
    }

    public void removeKeyFromIgnoreList(int keyCode) {

        if (keyInIgnoreList(keyCode)){
            Integer key=new Integer(keyCode);
            keysToIgnore.remove(key);
        }
    }

@Override
    public boolean dispatchKeyEventPreIme(KeyEvent event) {
        //Log.d("ws", "dispatchKeyEventPreIme(" + event + ")");

            // swallow the any key in the ignore list
            if (keyInIgnoreList(event.getKeyCode())) {
                KeyEvent.DispatcherState state = getKeyDispatcherState();
                if (state != null) {
                    if (event.getAction() == KeyEvent.ACTION_DOWN
                            /*&& event.getRepeatCount() == 0*/) {
                        state.startTracking(event, this);
                        return true;
                    } else if (event.getAction() == KeyEvent.ACTION_UP
                            && !event.isCanceled() && state.isTracking(event)) {
                        return true;
                    }
                }
            }
        }
        return super.dispatchKeyEventPreIme(event);
    } 
```

您也可以对 Search Key 执行此操作：

```
mCustomEditText.setOnEditorActionListener(new OnEditorActionListener() {

            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
                if(actionId==EditorInfo.IME_ACTION_SEARCH && event.getAction()==KeyEvent.KEYCODE_SEARCH){
                    System.out.println("Search pressed.........");
                }
                return false;
            }
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T12:49:03.863

在`OnKeyListener`您的`Activity`.

将此 keyListener 添加到您的`EditText`.

```
 myEditText.setOnKeyListener(this); 
```

覆盖`onKey()`你的`Activity`.

```
@Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if(v.getId() == R.id.myEditText)
        {
            if(KeyEvent.KEYCODE_ENTER == keyCode)
            {
                if(myEditText.getText().toString().equals("") || myEditText.getText().toString().equals(null))
                {
                    Toast.makeText(KeyboardTestActivity.this, "Event Eaten", Toast.LENGTH_SHORT).show();
                    Log.e("onKey", "Event Eaten");
                    return true;
                }
            }
        }
        return false;
    } 
```

`EditText`这完成了，只要你是空的并且你按下搜索键，它就会显示一个 Toast 。

**注意**：`onKey()`keyDown 调用两次，然后 KeyUp 调用一次。您必须使用 KeyEvent 实例对其进行过滤，该实例作为`onKey()`方法中的参数接收。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-10T10:20:17.920

```
 SearchInput.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            if( SearchInput.getText().toString().length() == 0 )
            {
                Search.setClickable(false);
            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub
            Search.setClickable(false);

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            // TODO Auto-generated method stub
            Search.setClickable(true);
        }

    }); 
```

* * *

或试试这个..！对于花哨的错误日志

```
 Search.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if( searchinput.getText().toString().length() == 0 )
            {
                searchinput.setError( "Enter something Blah Blah..!" );
            }
            else
            {

       // Original Functions Goes Here
            } 
```

* * *

在编辑文本中使用以下代码，

```
android:imeOptions="flagNoEnterAction" 
```

我无法设置`flagNoEnterAction = "false"` 但有人可以帮助你

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-12T04:12:19.810

当 actionId 等于[IME_ACTION_DONE](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_ACTION_DONE)时，将[OnEditorActionListener](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)附加到您的文本字段并从其 onEditorAction 方法返回 true 。这将防止软键盘隐藏：

```
EditText txtEdit = (EditText) findViewById(R.id.txtEdit);
txtEdit.setOnEditorActionListener(new OnEditorActionListener() {

  public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
    if (actionId == EditorInfo.IME_ACTION_DONE) {
      // your additional processing... 
      return true;
    } else {
      return false;
    }
  }
}); 
```

参考这个[LINK](https://stackoverflow.com/questions/7271586/android-disable-enter-key-in-soft-keyboard/10561018#10561018) [LINK](https://stackoverflow.com/questions/3272142/how-to-override-the-enter-key-behaviour-of-the-virtual-keyboard-in-android)

# javascript - 页面到达某个点后停止页面滚动

> ID：10484314
> 
> 赞同：4
> 
> 时间：2012-05-07T14:58:50.613
> 
> 标签：javascript, jquery

scrollTop 达到某个值（例如 150）后如何防止滚动。

```
$(window).scroll(function() {   
    if($(window).scrollTop() >=50)) {
       return false;    // basically don't scroll       
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:19:17.563

使用函数`.scrollTop`设置scrollHeight 。`scrollTo`它不会从 x 滚动到 y，它只是转到 y。

所以基本上你不能停止滚动，因为你的事件将在设置为 y 后被调用。`scrollHeight`比较高度后，您可能可以在处理程序内部设置期望的值。

```
if($(window).scrollTop() >=50) 
{ 
    $(window).scrollTop(0); 
} 
```

**注意：**在元素上使用它是可以忍受的，但在 window 对象上使用会让用户感到厌烦。以上只是展示它是如何工作的。

尝试滚动 >> [http://jsfiddle.net/KwgMj](http://jsfiddle.net/KwgMj) << 看看它有多烦人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:06:37.100

```
$(window).scroll(function(e) {   
    if($(window).scrollTop() >=50)) {
      $(window).scrollTop(50)
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:11:19.807

除了明显的问题；你为什么要这个？

我会建议另一种方法。

有一个填充整个窗口的包装器，具有一定的高度并`overflow-x: hidden`在 css 中使用。

不过，这可能也可能不是您所追求的。

如果您希望创建一个允许您继续滚动以进行下一步的连续站点，我建议您仅使用`.slideDown()`相关内容。

滚动是一个非常基本的功能，不应无缘无故地修改。

**编辑：**
对于 ipad 特定的解决方案，使用包装器：

```
<? if (strpos($_SERVER['HTTP_USER_AGENT'],'iPad')): ?>
<!-- If iPad, add style -->
<style type="text/css">
    div#wrapper {
        height: 100%;
        overflow: hidden;
    }
</style>
<? endif; ?>

<body>
<div id="wrapper">
<!-- Content here -->
</div>
</body> 
```

# robots.txt - robots.txt 和 Google 间谍软件

> ID：10484316
> 
> 赞同：1
> 
> 时间：2012-05-07T14:58:57.480
> 
> 标签：robots.txt, spy

在我的网页上，我有 robots.txt，其中我指定了一些我不希望谷歌索引的页面。Chrome 和 Google 工具栏会发送有关我访问过的页面的信息。

我在某处读到谷歌将索引我在 robots.txt 中阻止的网站。真的吗？我在哪里可以阅读更多关于它的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:56:04.413

[http://blog.ineedhits.com/tips-advice/why-google-can-index-your-robotstxt-blocked-urls-12346715.html](http://blog.ineedhits.com/tips-advice/why-google-can-index-your-robotstxt-blocked-urls-12346715.html)

抓取网站的似乎不是谷歌浏览器或工具栏。问题是在被阻止的网站上存在外部链接。

# jetty - Jetty 正在锁定 sbt 中的文件

> ID：10484317
> 
> 赞同：1
> 
> 时间：2012-05-07T14:59:01.800
> 
> 标签：jetty, lift, sbt

**问题**

我正在开发一个使用 sbt 0.11.2 管理的 Lift 应用程序。我开始处理一些由 jetty 提供服务的 javascript 文件，并发现一旦我运行它们就会被锁定`container:start`。这很烦人，因为在我完全退出 sbt 之前锁定不会消失，但我希望能够在浏览器中看到文件*时对其进行编辑。*

**我试过的**

我用谷歌搜索了一下，发现了一些旧链接，如[http://www.assembla.com/spaces/liftweb/wiki/Fix_file_locking_problem_with_jettyrun](http://www.assembla.com/spaces/liftweb/wiki/Fix_file_locking_problem_with_jettyrun)但我无法找到适用于“新”码头/SBT 的解决方案（它在哪里`container:run`而不是`jetty-run`）。更烦人的是，我的搜索词越具体，结果的帮助就越小。

我们的 sbt 配置是使用*build.sbt*文件完成的，而不是完整的*build.scala*，我无法更改它。我希望可以添加一些设置来阻止 Jetty 锁定我的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:09:02.513

[http://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files](http://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files)

# transition - 消除 D3 折线图转换中的突然添加/删除

> ID：10484319
> 
> 赞同：3
> 
> 时间：2012-05-07T14:59:05.733
> 
> 标签：transition, d3.js

您可以在此处查看此代码：http: [//bl.ocks.org/2626142](http://bl.ocks.org/2626142)

此代码绘制折线图，​​然后在 3 个样本数据集之间转换。当从一个小数据集移动到一个大数据集时，额外的数据点突然出现，而不是从现有线平滑展开。

当从较大的数据集移动到较小的数据集时，线条会在过渡到填充整个图表之前突然被截断。

使用此代码会突然添加和删除线条和网格线。我该如何消除这些？

```
var data = [
    [0,2,3,2,8],
    [2,4,1,5,3],
];
var data2 = [
    [0,1,2,3,4,5],
    [9,8,7,6,5,6],
];
var data3 = [
    [1,3,2],
    [0,8,5],
];

var w = 300,
    h = 100;

var chart = d3.select('body').append('div')
    .attr('class', 'chart')
    .append('svg:svg')
    .attr('width', w)
    .attr('height', h);

var color = d3.scale.category10();

function drawdata(data, chart) {
    var num = data[0].length-1;
    var x = d3.scale.linear().domain([0, num]).range([0,w]);
    var y = d3.scale.linear().domain([0, 10]).range([h, 0]);

    var line = d3.svg.line()
        .x(function(d, i) { return x(i); })
        .y(function(d) { return y(d); });

    var flat = d3.svg.line()
        .x(function(d, i) { return x(i); })
        .y(y(-1));

    var lines = chart.selectAll('.line')
        .data(data);

    lines.enter().append('path')
            .attr('class', 'line')
            .style('stroke', function(d,i) { return color(i); })
            .attr('d', line);

    lines.transition()
        .ease('linear')
        .duration(500)
        .attr('d', line);

    lines.exit().remove();

    // legend
    var ticks = chart.selectAll('line')
        .data(x.ticks(num));

    ticks.enter().append('line')
            .attr('x1', x)
            .attr('x2', x)
            .attr('y1', 0)
            .attr('y2', h)
            .attr('class', 'rule');
    ticks.transition()
        .ease('linear')
        .duration(500)
        .attr('x1', x)
        .attr('x2', x)
        .attr('y1', 0)
        .attr('y2', h);
    ticks.exit().remove();
}
var dats = [data, data2, data3];
function next() {
    var it = dats.shift();
    dats.push(it);
    drawdata(it, chart);
}
setInterval(next, 2000);
next(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T03:02:27.637

我最近遇到了类似的问题，并使用自定义的路径[插值器解决了它：](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolators)

```
// Add path interpolator to d3
d3.interpolators.push(function(a, b) {
  var isPath, isArea, interpolator, ac, bc, an, bn;

  // Create a new array of a given length and fill it with the given value
  function fill(value, length) {
    return d3.range(length)
      .map(function() {
        return value;
      });
  }

  // Extract an array of coordinates from the path string
  function extractCoordinates(path) {
    return path.substr(1, path.length - (isArea ? 2 : 1)).split('L');
  }

  // Create a path from an array of coordinates
  function makePath(coordinates) {
    return 'M' + coordinates.join('L') + (isArea ? 'Z' : '');
  }

  // Buffer the smaller path with coordinates at the same position
  function bufferPath(p1, p2) {
    var d = p2.length - p1.length;

    // Paths created by d3.svg.area() wrap around such that the 'end'
    // of the path is in the middle of the list of coordinates
    if (isArea) {
      return fill(p1[0], d/2).concat(p1, fill(p1[p1.length - 1], d/2));
    } else {
      return fill(p1[0], d).concat(p1);
    }
  }

  // Regex for matching the 'd' attribute of SVG paths
  isPath = /M-?\d*\.?\d*,-?\d*\.?\d*(L-?\d*\.?\d*,-?\d*\.?\d*)*Z?/;

  if (isPath.test(a) && isPath.test(b)) {
    // A path is considered an area if it closes itself, indicated by a trailing 'Z'
    isArea = a[a.length - 1] === 'Z';
    ac = extractCoordinates(a);
    bc = extractCoordinates(b);
    an = ac.length;
    bn = bc.length;

    // Buffer the ending path if it is smaller than the first
    if (an > bn) {
      bc = bufferPath(bc, ac);
    }

    // Or, buffer the starting path if the reverse is true
    if (bn > an) {
      ac = bufferPath(ac, bc);
    }

    // Create an interpolater with the buffered paths (if both paths are of the same length,
    // the function will end up being the default string interpolator)
    interpolator = d3.interpolateString(bn > an ? makePath(ac) : a, an > bn ? makePath(bc) : b);

    // If the ending value changed, make sure the final interpolated value is correct
    return bn > an ? interpolator : function(t) {
      return t === 1 ? b : interpolator(t);
    };
  }
}); 
```

以下是新插值器的原始要点：http: [//bl.ocks.org/4535474](http://bl.ocks.org/4535474)。

它的方法是通过在开头插入零长度线段来“缓冲”较小数据集的路径。效果是新的线段从线的开始处的一个点展开，而未使用的线段同样折叠成一个点。

在不同大小的数据集之间转换（显然）不是一个常见问题，也没有通用的解决方案。因为我正在可视化时间序列数据并在每日/每周/每月间隔之间进行转换，所以我需要接近路径末端的部分来保持视觉连续性。我可以想象这样一种情况，您希望对路径的开头做同样的事情，或者可能通过在整个过程中统一缓冲段来扩展/收缩路径。无论哪种方式，相同的方法都将起作用。

# sql - 按年份的 SQL 查询结果

> ID：10484327
> 
> 赞同：8
> 
> 时间：2012-05-07T14:59:30.443
> 
> 标签：sql, count, pivot, case

我有一个包含以下列的客户表。

```
 Admit_date    Gender     Homeless   Unemployed    Deleted 
 4/2/2012      Male         Yes         Yes           0
 1/1/2011      Female       Yes         Yes           0
 12/2/2011     Male          No          No           0
 5/23/2009     Female       Yes         Yes           0
 4/3/2009      Male          No          No           0
 7/4/2010      Male         Yes         Yes           0
 9/2/2010      Male         Yes         Yes           0 
```

我需要显示每年每个组的百分比。我认为这将需要一个数据透视表：

```
 2009      2010     2011    2012
 Admitted         2          2        2      1
 Male            50%       100%     50%    100%
 Female          50%         0      50%      0%
 Homeless        50%       100%     50%     100%
 Unemployed      50%       100%     50%     100% 
```

这个查询给了我每年的计数：

```
 select year(admit_date_c) as Year_of_Admit,count((admit_date_c)) as Admitted
 from clients where deleted = '0' 
 group by year(admit_date_c)

 Year_of_Admit   Admitted
   2009             2
   2010             2
   2011             2
   2012             1 
```

我使用 Case Count 尝试了无数次查询迭代，但无法弄清楚如何获得 Gender、Homeless 和 Unemployement 的计数或百分比。一旦我有了它，我想我可以旋转桌子来获得我需要的显示。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T15:24:37.273

我认为应该这样做：

```
select year(admit_date) as year_of_admit,
  sum(case when gender='Male' then 1 else 0 end)*100/count(*) as Male, 
  sum(case when gender='Female' then 1 else 0 end)*100/count(*) as Female, 
  sum(case when homeless='Yes' then 1 else 0 end)*100/count(*) as Homeless
from client
group by year(admit_date) 
```

我不知道您是否可以拥有除男/女或是/否以外的值，例如“未知”。在这种情况下，您必须决定，比如说，10 名男性、5 名女性和 5 个未知数是指 50% 男性，即已知 50% 是男性，还是 66% 男性，即已知性别的 66%是男性。

# lua - 使用 luaxml 将 Lua 表解析为 Xml

> ID：10484331
> 
> 赞同：2
> 
> 时间：2012-05-07T14:59:42.167
> 
> 标签：lua, luaxml

我正在使用 luaxml 将 Lua 表转换为 xml。我在使用 luaxml 时遇到问题，例如，我有一个这样的 lua 表

```
t = {name="John", age=23, contact={email="john@gmail.com", mobile=12345678}} 
```

当我尝试使用 LuaXML 时，

```
local x = xml.new("person")
x:append("name")[1] = John
x:append("age")[1] = 23
x1 = xml.new("contact")  
x1:append("email")[1] = "john@gmail.com"
x1:append("mobile")[1] = 12345678
x:append("contact")[1] =  x1 
```

生成的 xml 变为：

```
<person> 
  <name>John</name>
  <age>23</age>
  <contact>
    <contact>
      <email>john@gmail.com</email>
      <mobile>12345678</mobile>
    </contact>
  </contact>
</person>` 
```

xml中有2个联系人。我应该怎么做才能使 Xml 正确？

另外，如何将 XML 转换回 Lua 表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:21:29.687

您的语法有点偏离，您正在为联系人创建一个新表，然后附加一个“联系人”节点并使用以下代码同时分配一个额外的节点：

```
x1 = xml.new("contact")  
x1:append("email")[1] = "john@gmail.com"
x1:append("mobile")[1] = 12345678
x:append("contact")[1] =  x1 
```

这实际上应该是这样的：

```
local contact = xml.new("contact")
contact.email = xml.new("email")
table.insert(contact.email, "john@gmail.com")

contact.mobile = xml.new("mobile")
table.insert(contact.mobile, 12345678) 
```

请记住，每个“节点”都是它自己的表值，这是 xml.new() 返回的值。

以下代码在您调用时正确创建 xml `xml.save(x, "\some\filepath")`。要记住的是，每当你调用 xml.new() 时，你都会得到一个表，我认为那里的决定是它可以很容易地设置属性......但是使添加简单值的语法更加冗长.

```
-- generate the root node
local root = xml.new("person")

-- create a new name node to append to the root
local name = xml.new("name")
-- stick the value into the name tag
table.insert(name, "John")

-- create the new age node to append to the root
local age = xml.new("age")
-- stick the value into the age tag
table.insert(age, 23)

-- this actually adds the 'name' and 'age' tags to the root element
root:append(name)
root:append(age)

-- create a new contact node
local contact = xml.new("contact")
-- create a sub tag for the contact named email
contact.email = xml.new("email")
-- insert its value into the email table
table.insert(contact.email, "john@gmail.com")

-- create a sub tag for the contact named mobile
contact.mobile = xml.new("mobile")
table.insert(contact.mobile, 12345678)

-- add the contact node, since it contains all the info for its
-- sub tags, we don't have to worry about adding those explicitly.
root.append(contact) 
```

遵循该示例，您应该可以清楚地了解如何任意深入研究。您甚至可以编写函数来轻松创建子标签，从而使代码不那么冗长......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T01:34:35.483

```
local x = xml.new("person")
x:append("name")[1] = John
x:append("age")[1] = 23
x1 = x:append("contact")
x1:append("email")[1] = "john@gmail.com"
x1:append("mobile")[1] = 12345678

print(x) 
```

# floating-point - 如何根据位数计算精度的小数位数？

> ID：10484332
> 
> 赞同：6
> 
> 时间：2012-05-07T14:59:43.720
> 
> 标签：floating-point, precision, decimal-point

我正在学习浮点格式（IEEE）。在单精度浮点格式中，提到尾数有 24 位，因此它有 6 1/2 位精度（根据“理解机器”一书），以及[7.22 位精度](http://en.wikipedia.org/wiki/IEEE_754-2008)。

我不明白如何计算精度的十进制数字。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T15:12:39.827

使用 24 位，假设为符号保留一位，那么您可以表示的最大十进制数是 2^23-1=8388607。也就是说，您可以获得 6 位数字，有时甚至是 7 位。这通常表示为“6 1/2 位”。如果 24 位代表一个无符号数，那么您可以存储的最大值是 2^24-1=16,777,215，或 7 和一个小数位。

当有人用明确的小数位（如 7.22 位小数）引用您时，他们正在做的是取最大值的日志（以 10 为底）。所以 log(16777115)=7.22。

通常，您将从给定位数中获得的十进制位数是：

```
d=log[base 10](2^b) 
```

其中 b 是位数，d 是十进制位数。然后：

```
d=b * log(2)
d~=b * .3010 
```

所以 24 位给出 24 * .3010 = 7.224

# html - 如何让JSF通过HTML属性

> ID：10484337
> 
> 赞同：6
> 
> 时间：2012-05-07T15:00:07.847
> 
> 标签：html, jsf, jsf-2, primefaces, servlet-3.0

我在 JSF 2 中使用 Primefaces 3 来制作搜索框。我需要向控件添加一个非标准属性（x-webkit-speech），这样你就会有这样的东西......

```
<p:autoComplete x-webkit-speech="x-webkit-speech" ... /> 
```

由于此属性不是 autoComplete 控件的一部分，因此 JSF 给我一个 500 错误。但是当我删除它时，页面呈现正常。一般来说，您如何指定 JSF 标记上的传递属性以使其被忽略？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T12:46:39.500

JSF 通过设计在呈现 HTML 时忽略所有自定义属性。

如果您已经在 J​​SF 2.2+ 上，只需将其指定为[passthrough 属性](https://eclipse-ee4j.github.io/jakartaee-tutorial/jsf-facelets009.html#_using_pass_through_attributes)：

```
<html ... xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
...
<p:autoComplete a:x-webkit-speech="x-webkit-speech" ... /> 
```

如果您还没有使用 JSF 2.2，那么您需要一个自定义渲染器。幸运的是，PrimeFaces `<p:autoComplete>`（和所有其他组件）相对简单。`renderPassThruAttributes()`仅覆盖将要呈现的新属性添加到`attrs`参数并最终委托给超级方法的方法就足够了。

例如

```
package com.example;

import java.io.IOException;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;

import org.primefaces.component.autocomplete.AutoCompleteRenderer;

public class MyAutoCompleteRenderer extends AutoCompleteRenderer {

    @Override
    protected void renderPassThruAttributes(FacesContext facesContext, UIComponent component, String[] attrs) throws IOException {
        String[] newAttrs = new String[attrs.length + 1];
        System.arraycopy(attrs, 0, newAttrs, 0, attrs.length);
        newAttrs[attrs.length] = "x-webkit-speech";
        super.renderPassThruAttributes(facesContext, component, newAttrs);
    }

} 
```

要让它运行，请在您的 webapp 中按如下方式注册它`faces-config.xml`：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.AutoCompleteRenderer</renderer-type>
        <renderer-class>com.example.MyAutoCompleteRenderer</renderer-class>
    </renderer>
</render-kit> 
```

*（您可以通过查看`AutoComplete`类的源代码找到组件系列和渲染器类型，它们在其中指定为`COMPONENT_FAMILY`和`RENDERER_TYPE`常量）*

不，`@FacesRenderer`当目的是覆盖本身已经在`faces-config.xml`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:02:16.357

使用 JSF-Ext 中的 Attribute-Tag 可以扩展大多数标签。

```
<html xmlns:h="http://java.sun.com/jsf/html" xmlns:e="http://java.sun.com/jsf/ext">
    <!-- ... -->
    <h:inputText id="name" value="#{bean.name}">
        <e:attribute name="placeholder" value="My Name"/>
    </h:inputText>
    <!-- ... -->
</html> 
```

您可以通过 Maven 配置它：

```
<dependency>
    <groupId>com.intersult</groupId>
    <artifactId>jsf-ext</artifactId>
    <version>2.2.0.1</version>
</dependency> 
```

JSF-Ext 是一个来自[http://www.intersult.com/wiki/page/JSF%20Ext的库](http://www.intersult.com/wiki/page/JSF%20Ext)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T07:25:07.737

我不确定这是否可能。我会使用 javascript 或 jQuery 在客户端添加这些属性。

如果您想集成服务器端的东西，您可以将 el 表达式放入您的 javascript 代码中。

# c++ - XAudio2 播放延迟

> ID：10484339
> 
> 赞同：2
> 
> 时间：2012-05-07T15:00:11.707
> 
> 标签：c++, xaudio2

我正在尝试使用 xaudio 播放原始 pcm 数据，但播放延迟很大（> = 5ms）。我正在使用下一个代码执行此操作：

```
bool Play(uint8_t *data, size_t size)
{
  _xaudio_buffer.AudioBytes = size;
  _xaudio_buffer.pAudioData = data;
  Time t1;

  if (_g_source->SubmitSourceBuffer(&_xaudio_buffer) != S_OK)
    return false;

  if(WaitForSingleObjectEx(_voice_callback.hBufferEndEvent,INFINITE,true) != WAIT_OBJECT_0)
    return false;

  Time t2;
  printf("%d\n",t2-t1);
} 
```

Time 类只是 GetTickCount 下的一个包装器，生成的 t2-t1 将以毫秒为单位返回差异。我已经检查过我的 Time 课程不会产生任何额外的延迟。
以毫秒为单位计算播放时间并不难：play_time = size*1000 / (channels*(bits_per_sample/8) * frequency)

因此，对于大小为 4608 字节、48 khz、2 个通道、每个样本 16 位的数据，播放这样的块需要将近 24 毫秒。相反，我上面显示的代码需要大约 >= 31 毫秒来播放这样的块。是什么造成了这种延迟？如果我正在编写视频播放器并从实时流中获取数据（我已经具有同步功能，但是对于这样的小样本，5ms 的延迟会产生不理想的声音），如何处理它？

此外，我已经在 2 台具有不同硬件的 Windows 7 计算机上测试了此代码。两者都产生相同的延迟。

# swing - 对本地 DnD 使用 javaJVMLocalObjectMimeType，对外部 drop 使用序列化

> ID：10484344
> 
> 赞同：3
> 
> 时间：2012-05-07T15:00:21.230
> 
> 标签：swing, drag-and-drop

我正在开发一个组件，其中堆叠了较小的组件。用户应该能够使用拖放来更改这些组件的顺序。我通过实现一个接受底层数据模型的本地引用`DataFlavor`( ) 的 TransferHandler 来完成这项工作。`javaJVMLocalObjectMimeType`这工作正常。

现在我还想再次运行我的应用程序，并能够将我的组件从一个应用程序拖到另一个应用程序中。在这种情况下，我想将拖动源的必要数据捆绑到一个可序列化的对象中，以在拖放应用程序中重建该对象并为此使用可序列化的 DataFlavor。我不想在这两种情况下都使用对象序列化。

如何确定我的拖动操作是否源自同一个 JVM，以便我可以决定使用对象引用还是数据的序列化版本。官方的 swing DnD 文档提到可以混合本地和序列化风格，但没有说明如何充分利用这一点。

**编辑**

这是我如何在我的`DataModelTransferable`

```
public static DataFlavor localFlavor;

static {
    try {
        localFlavor = new DataFlavor(DataFlavor.javaJVMLocalObjectMimeType + ";class=\"" +  ArrayList.class.getName() + "\"");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}
...
@Override
public DataFlavor[] getTransferDataFlavors() {
    return new DataFlavor[] { localFlavor };
} 
```

在我的`TransferHandler`我这样做

```
@Override
public boolean canImport(TransferSupport support) {
    return support.isDataFlavorSupported(DataModelTransferable.localFlavor);
} 
```

正如我所说，这在本地工作得很好，但是如果我从一个实例拖动到另一个实例，则接受拖动，这会导致`java.io.IOException: Owner failed to convert data`拖放应用程序`java.io.NotSerializableException: alignment.model.DataModel`上的一个和拖动源应用程序上的一个。这没关系，但首先不应在另一个应用程序上接受拖动。

我正在使用 a`ArrayList`因为我还希望能够一次拖动多个对象，仅供参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T09:39:20.777

我自己才发现问题出在哪里。我为我的 ArrayList of DataModels 编写了一个包装类`DataModelList`，它没有实现`Serializable`并将我的数据风格的声明修改为：

```
localFlavor = new DataFlavor(DataFlavor.javaJVMLocalObjectMimeType + ";class=\"" +  DataModelList.class.getName() + "\""); 
```

之后，如果拖动源和放置目标不在同一个 JVM 中，则认为这种风格在拖动源和放置目标之间不相等。

我得出的结论是，不可能直接将本地对象引用风格与实现`Serializable`. 如果有人知道这是记录在哪里，我会很高兴听到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:53:03.110

对于每个正在运行的 JVM，您的对象引用风格通常会有所不同。因此，您首先检查是否`Transferable`支持您的“对象引用风格”，然后再询问“序列化数据风格版本”。

# python - 在 JAVASCRIPT + JSON 中编码 HTML 并在 PYTHON 中解码的正确方法是什么？

> ID：10484347
> 
> 赞同：0
> 
> 时间：2012-05-07T15:00:27.250
> 
> 标签：python, json, encoding, decoding

我有一个 JAVASCRIPT 数组 allPois，其中包含几个 pois 对象，其结构如下：

```
 var poi = {
        title:  pois[x].title,
        lat:    pois[x].position.lat(),
        lng:    pois[x].position.lng(),
        html:   pois[x].html
    }; 
```

这是调用我的服务器的 JAVASCRIPT 函数：

```
function save(){

    var jsonizedData = JSON.stringify({theArray:allPois});

    jQuery.ajax({
        type:       'POST',
        url:        'http://localhost:8000/save',
        contentType:'application/json; charset=utf-8',
        dataType:   'json',
        data:       mydata,
        async:      true
    });
} 
```

这是服务器端处理请求的函数：

```
def save(request):
   for object in request.POST:
      my_data = simplejson.loads(object)

   return none 
```

编码/解码参数'html'（实际上包含html代码）以便它可以在服务器中正确加载的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:56:29.247

由于该属性的`.html`值为`string`，因此您无需执行任何操作。JSON 可以处理字符串值。你的任何修改只会让事情变得更糟。

您的问题可能是您如何从文本区域获取值。[请参阅这个 jsfiddle 如何处理特殊字符](http://jsfiddle.net/jtngP/2/)。

但是在现代浏览器中，任何步骤都不需要编码/解码。

哦，确保你清理了 HTML 以避免[XSS 和其他攻击](https://en.wikipedia.org/wiki/Cross-site_scripting)。

# java - 使用反射访问大型 POJO 的私有字段：±1？

> ID：10484349
> 
> 赞同：2
> 
> 时间：2012-05-07T15:00:37.370
> 
> 标签：java, reflection, pojo, private-members

我刚刚发现**读取和写入任何对象的任何私有字段**都可以在没有任何访问器的情况下完成，但**使用反射**。

所以，我的问题是：对于不使用第三种技术（例如 EL）但使用 JAVA 的应用程序，如果我需要一个包含 20 个字段的 POJO，是实现 40 个访问器更有趣，还是使用反射来访问它们？我猜有一些优点和缺点，但任何经验或反馈都会很棒`:)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:03:27.977

你*可以*，但它不是很容易维护，所以：不要这样做。使用 getter/setter 访问成员的优点是，您可以隐藏访问器，初始化惰性，并且您将能够轻松地重构（例如使用 IDEA 或 Eclipse）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:10:09.027

您可以使用反射访问对象字段和方法，但不*应该*。

[本文](http://www.ibm.com/developerworks/library/j-dyn0603/)列出了至少 2 个可衡量的原因：

*   表现。使用反射访问对象方法/字段比通过访问器访问要慢。

*   安全限制

*   最大的缺点是不可维护性，引用下面的文章：

> 许多应用程序的一个更严重的缺点是使用反射会掩盖代码中实际发生的事情。程序员希望在源代码中看到程序的逻辑，而绕过源代码的反射等技术可能会产生维护问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T15:04:22.610

通常最好通过 getter 访问您的字段，即使您使用反射来确定哪些字段可用。您可以通过反射轻松找出可用的 getter 并调用这些 getter 方法。这使您可以：

1）动态找出可用的数据。

2) 明确说明哪些字段*应该*可用，哪些字段应该是私有的。

3) 明确覆盖 getter 的行为以满足您的需要。

在大多数正常情况下，反射用于确定对象上可用的数据。您不应该*将*反射用作 getter 和 setter 的一般替代品。否则，您的代码将变得真正无法维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:07:04.160

反射仅适用于需要对对象施展魔法而又无法对其结构做出太多假设的特定用例。具体来说，如果您的 JVM 使用`SecurityManager`，**它很可能会阻止代码通过反射设置私有**。

您可以查看[其他问题](https://stackoverflow.com/questions/762459/how-to-disable-java-security-manager)以获取有关安全管理器的更多信息。

# jquery - jQuery UI 垃圾桶图标

> ID：10484351
> 
> 赞同：1
> 
> 时间：2012-05-07T15:00:41.963
> 
> 标签：jquery, jquery-ui

在本网站用户的一些帮助下，我设法整理了[这个](http://www.mapmyfinds.co.uk/development/gallerytest2.php#/0)图库页面。

您将在示例页面上看到我正在使用叉号来允许用户删除图像。我遇到的问题是试图将图标更改为 jQuery UI 的“垃圾”图标。我找到了有问题的图标，`.ui-icon-trash`但我找不到任何关于如何在我的页面中实现它的说明。

处理图标的代码如下：

```
 .galleria-thumbnails .btn-delete {    
          display: block;  
          position: absolute; bottom : 0px;   
          width: 80px;     
          height: 80px;    
          cursor: pointer;     
          background: url(cross.png) no-repeat bottom; } 
```

我试过改变`url(cross.png)`和`url(.ui-icon-trash)`改变`url(class=.ui-icon-trash)`没有任何成功。如果可能的话，我也喜欢将图标居中，而不是它的当前位置`off-centre`。

我只是想知道是否有人可以看看这个并让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:02:36.793

你不能这样做，你必须使用这样的 HTML 代码：

```
<span class="ui-icon ui-icon-trash"></span> 
```

这将显示垃圾桶图标。

没有“垃圾”图片作为图标文件。所有的图标都存储在一个大的“精灵”图片文件中，然后应用一些 CSS 规则来只显示请求的图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:19:14.303

如果您想以 jQuery 方式进行操作，这就是您要寻找的：

```
$(function () {
  $('.btn-delete').addClass('ui-icon-trash');
}); 
```

# multithreading - 轻量级进程和线程有什么区别？

> ID：10484355
> 
> 赞同：28
> 
> 时间：2012-05-07T15:00:58.813
> 
> 标签：multithreading, process, lightweight-processes

[我在这里](http://wiki.answers.com/Q/What_is_the_difference_between_LWP_and_threads)找到了问题的答案。但我不明白答案中的一些想法。例如，轻量级进程被称为与其他进程共享其逻辑地址空间。这是什么意思？我可以理解 2 个线程的相同情况：它们都共享一个地址空间，因此它们都可以从 bss 段中读取任何变量（例如）。但是我们有很多不同的进程，有不同的 bss 部分，我不知道如何共享所有这些。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-11-28T15:36:38.497

我不确定这里的答案是否正确，所以让我发布我的版本。

进程 - LWP（轻量级进程）和用户线程之间存在差异。我将把流程定义放在一边，因为它或多或少为人所知并专注于`LWP vs user threads`. LWP 本质上就是今天所说的线程。最初，用户线程是指由应用程序本身管理的线程，内核对此一无所知。另一方面，LWP 是内核调度和执行的一个单元。

示例：假设系统有 3 个其他进程正在运行，并且调度是没有优先级的循环。你有 1 个处理器/内核。

*选项 1*。您有 2 个用户线程使用一个 LWP。这意味着从操作系统的角度来看，您拥有一个调度单元。总共有 4 个 LWP 正在运行（其他 3 个 + 你的 1 个）。您的 LWP 获得总 CPU 时间的 1/4，并且由于您有 2 个用户线程，因此每个线程获得总 CPU 时间的 1/8（取决于您的实现）

*选项 2*。你有 2 个 LWP。从操作系统的角度来看，您有两个调度单元。总共有 5 个 LWP 正在运行。您的 LWP 每次获得总 CPU 时间的 1/5，而您的应用程序获得 2/5 的 CPU。

另一个粗略的区别 - LWP 有 pid（进程 ID），用户线程没有。

出于某种原因，命名有点混乱，我们将 LWP 称为线程。

肯定有更多差异，但请参阅幻灯片。 [http://www.cosc.brocku.ca/Offerings/4P13/slides/threads.ppt](http://www.cosc.brocku.ca/Offerings/4P13/slides/threads.ppt)

编辑：

发布后，我发现了一篇很好的文章，它解释了所有的细节，而且英语比我写的要好。 [http://www.thegeekstuff.com/2013/11/linux-process-and-threads/](http://www.thegeekstuff.com/2013/11/linux-process-and-threads/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-07T16:46:35.527

来自 MSDN，[线程和进程](http://msdn.microsoft.com/en-us/library/ms164740.aspx)：

> 进程存在于操作系统中，对应于用户所看到的程序或应用程序。另一方面，线程存在于进程中。**出于这个原因，线程有时被称为轻量级进程。**每个进程由一个或多个线程组成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-18T16:38:28.493

根据 Tanenbaum 的《分布式系统》一书，轻量级进程通常被称为用户级线程和内核级线程的混合形式。一个 LWP 在单个进程的上下文中运行，每个进程可以有多个 LWP。此外，每个 LWP 都可以运行自己的（用户级）线程。多线程应用程序是通过创建线程（使用线程库包），然后将每个线程分配给一个 LWP 来构建的。

使用这种混合方法的最大优点是创建、销毁和同步线程相对便宜，并且不需要任何内核干预。除此之外，只要一个进程有足够的 LWP，阻塞系统调用就不会挂起整个进程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-13T18:22:14.190

从[这里](https://docs.oracle.com/cd/E19455-01/806-5257/mtintro-72944/index.html)。每个 LWP 都是内核池中的一个内核资源，并且在每个线程的基础上附加和分离到一个线程。这发生在线程被调度或创建和销毁时。

[![在此处输入图像描述](../Images/1b7e46acbdf081557706b43902cf2dd8.png)](https://i.stack.imgur.com/KqVgp.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-23T21:43:28.123

IMO，LWP 是一个**内核**线程绑定，可以在用户上下文中创建和执行。

如果我没记错的话，您可以将**用户**线程附加到单个 LWP 以潜在地提高并发级别，而无需涉及系统调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-28T07:29:06.697

线程基本上是分配有一个目标和足够信息来执行特定任务的任务。一个进程可以创建多个线程以尽可能快地完成其工作。例如，程序的一部分可能需要输入输出，一部分可能需要权限。

**用户级线程**是那些可以由线程库处理的线程。

另一方面，**内核级线程**（需要处理hadrware）也称为LWP（轻量级进程），以最大限度地利用系统，因此系统不会因一次系统调用而停止。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-30T11:01:06.887

线程在进程中运行。

每个进程可能包含一个或多个线程。

如果内核对进程中运行的线程一无所知，我们就会在用户空间上运行线程，因此没有可用的多处理功能。

另一方面，我们可以让线程在内核空间上运行；这意味着每个进程在不同的 CPU 上运行。这使我们能够进行多处理，但您可能会认为它在操作系统资源方面更昂贵。

最后，有一个介于中间的解决方案；我们将线程组合到 LWP 中。每个组在不同的 CPU 上运行，但组中的线程不能进行多处理。这是因为这个版本的内核只知道组（多进程），但对它们包含的线程一无所知。希望它足够清楚。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-26T10:51:35.007

一个进程包含一个或多个线程，一个线程可以做任何一个进程可以做的事情。此外，进程内的线程共享相同的地址空间，因为线程之间的通信成本较低，因为它使用相同的代码段、数据段和操作系统资源，因此线程的所有这些特性使其成为“轻量级进程”。

# php - 学说 1.2 性能，创建大量记录 (~5000)

> ID：10484358
> 
> 赞同：0
> 
> 时间：2012-05-07T15:01:09.990
> 
> 标签：php, mysql, performance, doctrine-1.2

假设**User**是扩展 Doctrine_Record 的模型，请考虑以下（任意）代码创建 5000 个用户记录。

```
$conn->beginTransaction();

for ($i = 1, $i < 5001, $i++) {

    $user = new User();
    $user->some_field = $i;
    $user->save();
    $user->free(true);
}

$conn->commit(); 
```

我发现此脚本在 30 秒后超时，并且无法创建所有用户。有没有办法优化此代码以更快地工作？我正在考虑只编写常规的旧 SQL 来创建记录，但随后我失去了 Doctrine_Record 的功能，包括插入钩子等（请注意，即使用户模型中没有钩子，此脚本也会超时）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:06:54.937

您应该尝试`Doctrine_Collection`允许批量插入的类：

```
$collection = new Doctrine_Collection('tablename');
$collection->add($record1);
$collection->add($record2);
$collection->add($record3);
$collection->add($record4);
$collection->save(); 
```

# android - 在 Android 中创建类似网格的布局

> ID：10484365
> 
> 赞同：4
> 
> 时间：2012-05-07T15:01:22.657
> 
> 标签：android, xml, android-layout, grid-layout, android-layout-weight

基本上，我有一个需要拆分为 2x4 网格的视图，每个部分的大小相等（即每行将是屏幕高度的 25%，每列将是屏幕宽度的 50%）。

我的方法是使用水平 LinearLayout 和两个权重为 0.5 的内部 LinearLayouts，然后在每个 LinearLayouts 中将子项的权重设置为 0.25，以便每个子项占屏幕的 25%。

尽管这似乎可行，但这显然对性能非常不利（请参阅此线程，了解[为什么嵌套权重对性能不利？替代方案？](https://stackoverflow.com/questions/9430764/why-are-nested-weights-bad-for-performance-alternatives)）

有没有其他方法可以实现这一目标？我环顾四周，但找不到纯 XML 解决方案。

请参阅下面的代码示例，了解我如何设置 LinearLayouts 及其子项

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="false"
    android:weightSum="1.0"
    >
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:weightSum="1.0">        
            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />

            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />

            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />

            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />
    </LinearLayout>

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:weightSum="1.0">        
            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />

            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />

            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />

            <ImageView 
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:src="@drawable/example"
                android:layout_gravity="center_horizontal"
                android:layout_weight="0.25"
            />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:03:22.190

您可能想给[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)一个旋转。

还有一个[库](https://github.com/dlew/android-gridlayout)使其可用于 1.6+ 设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:05:17.713

在 LinearLayout 中使用 GridView。检查[http://developer.android.com/resources/tutorials/views/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html)

# sql - 在同一查询中对不同表进行多次计数

> ID：10484366
> 
> 赞同：0
> 
> 时间：2012-05-07T15:01:26.300
> 
> 标签：sql, count, reporting, sql-server-2008-r2

我们有一个允许用户创建自己的组的工具。在这些组中，用户可以写帖子。我要确定的是组大小与该组中帖子总数之间的关系。

我可以执行 SQL 语句来获取组名列表和该组中的用户数（查询 1）以及组名列表和帖子数（查询 2），但我希望两者都在同一个询问。

查询 1

```
select count(pg.personID) as GroupSize, g.GroupName
from Group g inner join PersonGroup pg g.GroupID = pg.GroupID
where LastViewed between @startDate and @enddate and
    g.Type = 0
group by g.GroupID, g.GroupName
order by GroupSize 
```

查询 2

```
select count(gp.PostID) as TotalPosts, g.GroupName
from Group g inner join GroupPost gp on g.GroupID = gp.GroupID
    inner join Post p on gp.PostID = p.PostID
where g.Type = 0 and
    gp.Created between @startDate and @enddate
group by g.GroupID, g.GroupName
order by TotalPosts 
```

**注意：一个人可以将同一个“帖子”发布到多个群组

我相信从这些数据中我可以建立一个直方图（10-20 个用户、21-30 个用户等的组数），并在这些不同的 bin 中合并组的平均帖子数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:06:07.853

一个简单的解决方案是将这些查询用作子查询，并将它们组合起来：

```
SELECT 
    grps.GroupName,
    grps.GroupSize,
    psts.TotalPosts
FROM (
    select count(pg.personID) as GroupSize, g.GroupName, g.GroupID
    from Group g inner join PersonGroup pg g.GroupID = pg.GroupID
    where LastViewed between @startDate and @enddate and
        g.Type = 0
    group by g.GroupID, g.GroupName
    order by GroupSize) grps
JOIN (
    select count(gp.PostID) as TotalPosts, g.GroupName, g.groupID
    from Group g inner join GroupPost gp on g.GroupID = gp.GroupID
        inner join Post p on gp.PostID = p.PostID
    where g.Type = 0 and
        gp.Created between @startDate and @enddate
    group by g.GroupID, g.GroupName
    order by TotalPosts) psts
ON psts.GroupID = grps.GroupID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:42:49.877

Paul 的解决方案假定两组组（按帖子和按用户）是相同的。这可能不是真的，因此需要完整的外部连接或联合全部。

我的偏好如下：

```
with groups as 
(
   select *
   from Group g
   where g.Type = 0 
     and g.LastViewed between @startDate and @enddate
)
select GroupId, GroupName, SUM(GroupSize) as GroupSize, SUM(TotalPosts) as TotalPosts)
from 
(
  (select groups.GroupId, groups.GroupName, 1 as GroupSize, 0 as TotalPosts
   from groups 
   join PersonGroup pg 
     on pg.GroupId = groups.groupId
   ) 
   union all
   (select groups.GroupId, groups.GroupName, 0 as GroupSize, 1 as TotalPosts
    from groups 
    join GroupPost gp
      on groups.GroupId = gp.GroupId 
    join Post p
      on gp.PostId = p.PostId
    )
)
group by GroupId, GroupName 
```

“with”子句定义了您正在使用的组集。这将定义放在一个地方，很明显两个子查询具有相同的过滤。这两个子查询仅具有指示两个变量中的每一个的标志，然后在更高级别进行聚合。有时在子查询中进行聚合会更有效，尤其是在有索引的情况下。

# c++ - =类构造函数中的默认值

> ID：10484368
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:01:28.430
> 
> 标签：c++, c++11

我知道制作这样的构造函数：

```
foo()=delete; 
```

会让它变得不可行，但是呢：

```
foo()=default; 
```

? 有时候看到这个，不知道是什么意思！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T15:37:38.577

这`default`是有用的方法。回想一下，为了成为 POD（“普通旧数据”），类类型*必须*有一个*简单的默认构造函数*：

```
struct this_is_pod
{
     int a;
     double b;
};

struct this_is_not_pod
{
    char c;
    float d;
    this_is_not_pod() { }
}; 
```

但是，如果我们*想*提供一种以某种非平凡方式初始化类成员的方法呢？仅仅编写一个非默认构造函数是行不通的：

```
struct foo
{
    int m;
    void * p;
    foo(double q, Bar & o) : m(magic(q), p(o.gizmo(m, q)) { }
}; 
```

现在`foo`不是POD，因为它完全没有默认构造函数*。*添加我们自己的默认构造函数，例如`foo() {}`，仍然不起作用，因为现在默认构造函数不是微不足道的。C++11 来拯救`default`：

```
struct foo
{
    int m;
    void * p;
    foo(double q, Bar & o) : m(magic(q), p(o.gizmo(m, q)) { }
    foo() = default; // trivial!
};

static_assert(std::is_pod<foo>::value, "You will never see this message."); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T15:07:27.270

在 C++03 中，如果你没有定义任何构造函数，编译器会为你生成一个默认构造函数。但是，如果您确实定义了一些其他构造函数，则编译器不会（根本）生成默认构造函数。

告诉编译器`=default`生成一个默认构造函数，即使您也明确定义了一些其他构造函数。这是在 C++11 中添加的——在 C++03（或 98）中无法做到这一点。您显式定义的任何构造函数都至少与编译器默认生成的构造函数有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:11:24.307

编译器将隐式生成默认构造函数，*除非*您自己显式定义*任何*构造函数。

`foo() = default;`即使您定义了非默认构造函数，它也只是指示编译器生成默认构造函数。它与（但请参阅[Kerrek SB 的答案）](https://stackoverflow.com/a/10484903/533120)*大致*相同。`foo() {}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:04:23.280

它告诉编译器猜测一个默认构造函数，即没有参数的构造函数。如果没有给出“删除”，编译器通常会这样做。它是在 C++11 和 delete 选项中引入的。

# iphone - 我想先调用 webservice 然后在 iphone 中生成表格视图

> ID：10484373
> 
> 赞同：0
> 
> 时间：2012-05-07T15:01:57.963
> 
> 标签：iphone

我想先调用webservice然后生成表格视图，我怎么能做到这一点请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:06:01.097

只需调用 Web 服务，当它结束加载时，将响应的对象放入一个数组中，然后传回调用服务的类，用您的数据源数组替换对象数组并调用 [tablview reloadData];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:55:16.580

为此，可以执行以下操作：

首先在您的视图控制器中创建一个属性，该属性将保存您将从 Web 服务接收到的数据，如下所示：

```
@property (strong,nonatomic) NSMutabledata *theData; 
```

然后在你的实现文件中合成它，使用

```
@synthesize theData = _theData; 
```

接下来你需要设置一个 NSURLConnection，它实际上会从你的 web 服务加载数据：

```
NSURL *theURL = [NSURL urlWithString:@"http://thisisyourwebservice.com/somethinghere"];
NSURLRequest *theRequest = [NSURLRequest requestWithURL:theURL];
NSURLConnection *connection = [NSURLConnection connectionWithRequest:theRequest delegate:self]; 
```

您可以在 viewDidLoad 方法或自定义设置方法中进行设置。如果您希望此连接是可取消的，例如当有人关闭您的视图时，您需要为它添加一个属性，就像您为数据所做的那样。

到目前为止，这将创建一个连接，它将自动开始从给定的 URL 下载您的数据。但是目前您的数据将无处可去，因为您还没有实现 NSURLConnectionDataDelegate 协议。您可以按如下方式执行此操作：

在您的头文件中执行以下操作：

```
@implementation YourViewControllerClass : UIViewController <NSURLConnectionDataDelegate> 
```

现在您需要在视图控制器中实现一些委托方法，这样您就可以实际接收数据并将其存储以供以后使用。那些将是：

```
/* you received a response, so now initialize the NSMutableData object */
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    /* this should work in ARC, without ARC you would have to add autorelease after init, else you will have a leak */
    self.theData = [NSMutableData alloc] init];
}

/* here you will actually receive data  */
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.theData appendData:data];
}

/* now your connection has finished loading */
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    /* depending on what you are loading, you need to convert your data into an object
    you of your choice. if you loaded JSON, then use one of the JSONparsers like
   SBJSON, JSONKit or the NSJSONSerialization class available since iOS 5.0.

    After converting your data to the expected object type you will assign it to the
    property which you are using as datasource for your tableView.
   */
} 
```

现在，在加载连接后，您实际上应该在视图控制器中拥有一个包含所需数据的属性。现在只需使用重新加载您的 tableView`[yourTableView reloadeData]`就可以了！

# android - 开始活动

> ID：10484379
> 
> 赞同：1
> 
> 时间：2012-05-07T15:02:31.650
> 
> 标签：android, eclipse

当我试图在电话停止响铃并且它一直强制关闭时开始活动时。

所以这是我的广播接收器

```
public class Incoming extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub

         MyPhoneStateListener phoneListener=new MyPhoneStateListener();  
            TelephonyManager telephony = (TelephonyManager)   
            arg0.getSystemService(Context.TELEPHONY_SERVICE);
         phoneListener.context = arg0;
            telephony.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);  
    }

} 
```

这应该开始活动

```
public class MyPhoneStateListener extends PhoneStateListener {  

    int prevstate;

    public void onCallStateChanged(int state,String incomingNumber){  

        if(prevstate==TelephonyManager.CALL_STATE_OFFHOOK && state == TelephonyManager.CALL_STATE_IDLE){

              Log.i("PARm","Here the activity should start");
          }
        else if(prevstate==TelephonyManager.CALL_STATE_RINGING && state == TelephonyManager.CALL_STATE_IDLE){ 

            Log.i("PARM","Here the activity should start");

        }

    switch(state){  
        case TelephonyManager.CALL_STATE_IDLE:  
          Log.d("DECallNoteActivity.get getContext();BUG", "IDLE"); 
          prevstate = state;
        break;  
        case TelephonyManager.CALL_STATE_OFFHOOK:  
          Log.d("DEBUG", "OFFHOOK");
          prevstate = state;
        break;  
        case TelephonyManager.CALL_STATE_RINGING:  
          Log.d("DEBUG", "RINGING");
          prevstate = state;
        break;  
        }

      } 

    } 
```

如果您能告诉我在这种情况下如何获取上下文以启动 Activity 或如何启动它，我会很高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:27:30.477

广播接收器的上下文仅在`onReceive`调用期间有效：您不能保存它并在以后重用它。如果您需要以这种方式启动 Activity，您需要`Service`从`BroadcastReceiver`'`onReceive`方法启动 a，并让该服务创建电话状态侦听器并启动所需的 Activity `Activity`：一旦启动，`Activity`它就可以自行停止。

# ruby-on-rails - 我可以在视图助手中动态生成路由助手方法吗？

> ID：10484389
> 
> 赞同：0
> 
> 时间：2012-05-07T15:03:07.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在将一些视图代码重构为辅助方法，我想知道是否可以进一步简化它。

```
# In the view...

<%= navigation_link params[:controller], 'accounts', account_path %>

# ApplicationHelper

def navigation_link(controller_name, page_name, path_name)
  if controller_name == page_name
    content_tag :li, "#{page_name.capitalize.singularize}", :class => 'current'
  else
    content_tag :li, link_to("#{page_name.capitalize.singularize}", path_name)
  end
end 
```

将字符串 'accounts' 与路由辅助方法名称 account_path 一起传递似乎是多余的。

我真的需要传入第三个参数 path_name，还是可以在 navigation_link 帮助器中使用作为第二个参数传入的字符串来生成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:23:52.250

我猜你的助手已经是 Rails 的一部分了。它被称为[`link_to_unless_current`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to_unless_current)（可点击）

例子：

```
<li><%= link_to_unless_current("Home", { :action => "index" }) %></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:31:03.703

解决方案是使用 Object#send。

```
# The view simplifies to this...

<%= navigation_link params[:controller], 'accounts' %>

# ...and the ApplicationHelper becomes...

def navigation_link(controller_name, page_name)
  if controller_name == page_name
    content_tag :li, "#{page_name.capitalize.singularize}", :class => 'current'
  else
    content_tag :li, link_to("#{page_name.capitalize.singularize}", send("#{page_name.singularize}_path")
  end
end 
```

# java - Java，线程启动时主代码停止

> ID：10484390
> 
> 赞同：3
> 
> 时间：2012-05-07T15:03:14.590
> 
> 标签：java, multithreading

当我在程序中启动某个线程时，其他一切都停止了。

这是我的线程代码...

```
static Thread b1 = new Thread(new Builders());
b1.run();
System.out.println("done"); 
```

这是类`Builders`。

```
public class Builders implements Runnable {

    static boolean busy=false;
    Random r = new Random();

    public void run() {
        try{
            busy=true;
            System.out.println("ready");
            Thread.sleep(9999);
            busy=false;
            System.out.println("done");
        }
        catch(Exception e){
        }
    }
} 
```

当我运行程序时，线程启动并且程序等待线程结束。我认为线程的要点是代码可以同时运行。有人可以帮我理解我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T15:04:24.037

那是因为线程以`start()`, not开头`run()`，它只是调用`run`当前线程上的方法。所以应该是：

```
static Thread b1 = new Thread(new Builders());
b1.start();
System.out.println("done"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:05:09.513

这是因为您没有启动线程 - 相反，您正在通过调用*同步*`run()`执行线程的代码; 你需要打电话`start()`。

更好的是，您应该使用[*executors*](http://www.baptiste-wicht.com/2010/09/java-concurrency-part-7-executors-and-thread-pools/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:09:08.447

您需要调用该`start()`方法。Thread 的内部代码会启动一个新的操作系统线程来调用你的`run()`方法。通过调用`run()`你自己，你跳过了线程分配代码，而只是在你当前的线程中运行它。

# php - 在 Codeigniter 2 中，如何使用本机会话？

> ID：10484391
> 
> 赞同：1
> 
> 时间：2012-05-07T15:03:15.123
> 
> 标签：php, codeigniter

如何在 CodeIgniter 中使用本机会话？

目前我正在使用`session_start`. `constants.php`那是正确的方法吗？有什么陷阱，有没有更好的方法？

**我这样做是因为我们有一个 PHP 应用程序，并且我们计划在 CI 中进行新的编码。**

另外，我正在寻找一个很好的 CI 文档，它教我 CI 基础知识，最好是版本 2。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:24:35.253

通常，使用`session_start`然后读取/存储`$_SESSION`就可以做到这一点。我过去所做的是将`session_start`调用放入控制器的构造函数方法中：我有一个继承自的基类，`CI_Controller`它处理语言本地化、会话初始化和其他愚蠢的事情，如 P3P 标头设置。我所有的其他控制器都继承自它，然后它们都设置好了。

使用本机会话有时非常有用：我遇到了一些使用本机会话的组件，我根本不想处理补丁。有（例如）使用本机会话的 Redis 会话保存处理程序：可以为 CI 重写它但是......为什么不只使用那里的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:08:47.537

加载会话库

```
$this->load->library('session'); 
```

然后你可以使用设置数据

```
$this->session->set_userdata((array)$userdata); 
```

**session_start**方法利用 PHP的内置会话处理，这不是 CI 推荐的。引用官方文档：

> Session 类不使用原生 PHP 会话。它生成自己的会话数据，为开发人员提供更大的灵活性。

看看 [http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html) - CodeIgniter 有很好的文档记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T15:45:15.267

我正在使用[此处](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)描述的本机会话库。基本上这与 CI 会话库的工作方式相同，但使用 PHP 的本机会话，因此您可以使用[文档](http://codeigniter.com/user_guide/libraries/sessions.html)中描述的函数。

要使用 Codeigniter 2，请查看[文章的讨论](http://codeigniter.com/forums/viewthread/103583/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-08T06:40:27.447

尝试阅读 MY_Controller 文件。您可以在每个控制器中继承它，并且按照扩展 CI 的设计方法以一种很好的方式继承。将您的 SESSION 内容（以及其他任何跨站点内容）放在这里是最有意义的。

我在这里写了一篇简单的 CI 介绍文章：[http ://www.12devsofxmas.co.uk/2011/12/codeigniter/](http://www.12devsofxmas.co.uk/2011/12/codeigniter/)

如果您正在编写一个包含大量表单等的应用程序，那么首先使用该框架非常好。我已经写了很多东西来处理模板、自动生成表单等，它们还没有打包用于公共分发，但它们对于我们正在构建的应用程序来说都很好。

# ajax - Ajax 绑定与服务器绑定

> ID：10484395
> 
> 赞同：1
> 
> 时间：2012-05-07T15:03:27.947
> 
> 标签：ajax, binding

我有一个 MVC 项目。在其中，我使用 Telerik 网格。我需要选择是用户服务器还是 ajax 绑定。这两者有什么区别？

有人告诉我，当我通过模型将数据从控制器传递到视图时，这就是服务器绑定。这是真的？如果是，还有什么方法可以传递数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:40:25.913

每次在浏览器上完成 Ajax 时，服务器绑定都会刷新页面，而无需重新加载页面。至少这与用户的预期不同。

Ajax 绑定将需要一个额外的方法（Telerik 网站上的示例使用“_AjaxBinding()”）。该方法在位于视图中的网格 .ajax() 中调用。

是的，一个正常的调用是服务器绑定。

# c# - 休眠日志到标准输出

> ID：10484397
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:03:31.647
> 
> 标签：c#, nhibernate, c#-4.0

我正在使用 Nhibernate 3.3，并且我已经设置了配置，以便它应该记录 SQL 等。过去（NH 2.2+）我已经将 stdout 设置为 StreamWriter，如下所示：

```
 string nhLoggerPath = "...path...";
  Logger = new StreamWriter(nhLogPath, false, Encoding.UTF8);
  Console.SetOut(Logger); 
```

一切都运行良好。现在使用 3.3 版，我可以像以前一样在日志文件中获取所有内容，除了 Nhibernate 应该记录的 sql。发生了什么变化，或者我需要做什么才能让一切恢复正常？

ps 我没有使用 log4net（显然），我也不关心。

这是我设置日志记录的方式....

```
...
db.ConnectionString = @"myConnectionString";
db.LogSqlInConsole = true;
db.LogFormattedSql = true;
... 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-08T08:01:39.327

你如何设置日志记录sql？NH 2.x 专门使用 log4net，NH3.x 有一个内部记录器实现，如果存在则默认为 log4net，如果不存在则默认为 nologging。您可能没有将其配置为登录到控制台。

# asp.net - Webforms ReportViewer 分页不显示工具栏？

> ID：10484398
> 
> 赞同：0
> 
> 时间：2012-05-07T15:03:35.403
> 
> 标签：asp.net, reporting-services, webforms, reportviewer

我正在考虑更换 ReportViewer 工具栏。现在只是在做发现。我知道[报告查看器的 JavaScript api](http://msdn.microsoft.com/en-us/library/dd756405.aspx)。这不包括用于分页控件的 API。

我已经在生成的 HTML 中进行了挖掘，并弄清楚了如何触发回发来进行分页。即使工具栏未显示，在 Javascript 中调用以下命令也有效。

`__doPostBack("ReportViewer1$ctl05$ctl00$Next$ctl00")`

我不知道像这样回电的陷阱。因为传递给方法的字符串是输入按钮的名称。似乎名字可以改变。我也不知道 $ctl 的东西是什么意思。

我知道如何通过将交互式高度设置为零来让reportviewer 不分页报告。我现在只是在探索我所有的选择。

有没有更简单的方法在不显示 ReportViewer 工具栏的情况下进行分页？如果没有，触发回发的陷阱是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:32:00.867

对此的最终解决方案是使用客户参数进行回发。

客户端JS：

```
function loadPage(pageNumber) {
    $('#__EVENTTARGET').val('pagination');
    $('#__EVENTARGUMENT').val(<pageNumberToGoTo>);
    $('#form1').submit();
} 
```

填充的两个字段是默认为 ASP.NET 回发创建的。

ASP.NET 页面中的服务器端 C# 的 OnLoad 事件：

```
if (Request.Form["__EVENTTARGET"] == "pagination")
{
    int pageNumber = int.Parse(Request.Form["__EVENTARGUMENT"]);
    _reportViewer.CurrentPage = pageNumber;
} 
```

# performance - Sqlite 视图与普通选择语句性能

> ID：10484403
> 
> 赞同：3
> 
> 时间：2012-05-07T15:03:52.353
> 
> 标签：performance, sqlite, select

我在 SQLite 数据库中有一个简单的表（大约 8 列和很多行）。有一个程序作为服务运行并经常（大约每 5 分钟）对表执行选择、更新和插入操作。选择仅用于确定要更新哪些行，它们基于保存布尔值的列（可能由 SQLite 在内部转换为整数）。

还有一个 Web 应用程序在 Web 用户希望查看部分数据时执行选择（始终使用 GROUP BY 子句）。

有两种方法可以通过 Web 应用程序请求数据：(a) 预定义过滤器（即 where 子句在 3 个特定列上具有特定条件）和 (b) 自定义过滤器（即用户选择条件的值，但参与 where 子句的列与 (a)) 中的相同。如前所述，在这两种情况下都有一个 GROUP BY 操作。

我想知道使用视图或自定义函数是否会提高性能。目前，“自定义”选择可能需要 30 多秒才能完成 - 这是在将任何数据发送回用户之前。

编辑：在“预定义”选择语句上使用 EXPLAIN QUERY PLAN 只会产生一行：

```
0|0|TABLE mytable 
```

在同一个查询上使用 EXPLAIN 会产生以下结果：

```
0|OpenVirtual|1|4|keyinfo(2,-BINARY,BINARY)
1|OpenVirtual|2|3|keyinfo(1,BINARY)
2|MemInt|0|5|
3|MemInt|0|4|
4|Goto|0|27|
5|MemInt|1|5|
6|Return|0|0|
7|IfMemPos|4|9|
8|Return|0|0|
9|AggFinal|0|0|count(0)
10|AggFinal|2|1|sum(1)
11|MemLoad|0|0|
12|MemLoad|1|0|
13|MemLoad|2|0|
14|MakeRecord|3|0|
15|MemLoad|0|0|
16|MemLoad|1|0|
17|Sequence|1|0|
18|Pull|3|0|
19|MakeRecord|4|0|
20|IdxInsert|1|0|
21|Return|0|0|
22|MemNull|1|0|
23|MemNull|3|0|
24|MemNull|0|0|
25|MemNull|2|0|
26|Return|0|0|
27|Gosub|0|22|
28|Goto|0|82|
29|Integer|0|0|
30|OpenRead|0|2|
31|SetNumColumns|0|9|
32|Rewind|0|48|
33|Column|0|8|
34|String8|0|0|123456789
35|Le|356|39|collseq(BINARY)
36|Column|0|3|
37|Integer|180|0|
38|Gt|100|42|collseq(BINARY)
39|Column|0|7|
40|Integer|1|0|
41|Ne|356|47|collseq(BINARY)
42|Column|0|6|
43|Sequence|2|0|
44|Column|0|3|
45|MakeRecord|3|0|
46|IdxInsert|2|0|
47|Next|0|33|
48|Close|0|0|
49|Sort|2|69|
50|Column|2|0|
51|MemStore|7|0|
52|MemLoad|6|0|
53|Eq|512|58|collseq(BINARY)
54|MemMove|6|7|
55|Gosub|0|7|
56|IfMemPos|5|69|
57|Gosub|0|22|
58|AggStep|0|0|count(0)
59|Column|2|2|
60|Integer|30|0|
61|Add|0|0|
62|ToReal|0|0|
63|AggStep|2|1|sum(1)
64|Column|2|0|
65|MemStore|1|1|
66|MemInt|1|4|
67|Next|2|50|
68|Gosub|0|7|
69|OpenPseudo|3|0|
70|SetNumColumns|3|3|
71|Sort|1|80|
72|Integer|1|0|
73|Column|1|3|
74|Insert|3|0|
75|Column|3|0|
76|Column|3|1|
77|Column|3|2|
78|Callback|3|0|
79|Next|1|72|
80|Close|3|0|
81|Halt|0|0|
82|Transaction|0|0|
83|VerifyCookie|0|1|
84|Goto|0|29|
85|Noop|0|0| 
```

我使用的选择如下

```
SELECT 
    COUNT(*) as number, 
    field1, 
    SUM(CAST(filter2 +30 AS float)) as column2 
FROM 
    mytable 
WHERE 
    (filter1 > '123456789'  AND filter2 > 180) 
    OR filter3=1 
GROUP BY 
    field1 
ORDER BY 
    number DESC, field1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:34:53.460

每当您要对非主键字段进行比较时，[将索引添加](http://www.sqlite.org/lang_createindex.html)到字段中是一个很好的设计理念。但是，太多可能会导致`INSERT`s 爬行，因此请相应地进行计划。

此外，如果您有简单的字段，例如仅包含布尔值的字段，您可能需要考虑将其声明为 an`INTEGER`而不是您声明的任何内容。将其声明为 SQLite 未明确定义的任何类型将[导致其默认为比较值需要更长时间的`NUMERIC`类型](http://www.sqlite.org/datatype3.html#affinity)，因为它将在内部将其存储为 a`double`并将使用浮点数学处理器而不是整数数学处理器。

IMO，`GROUP BY`排序指令有时对未优化的查询是一个致命的赠品；它的方法包括消除冗余数据，如果一开始就没有将其从数据库中提取出来，这些冗余数据可能会被预先消除。

编辑：

我看到了您的查询，并看到您可以做一些简单的事情来优化它：

*   `SUM(CAST(filter2 +30 AS float))`效率低下；你为什么要把它当作一个浮点数？为什么不只是`SUM`它然后添加 30 * `COUNT`？

*   `filter1 > '123456789'`- 为什么是字符串比较？为什么不只使用整数比较？

# javascript - Twitter 如何进行 noscript 重定向，有什么意义？

> ID：10484408
> 
> 赞同：3
> 
> 时间：2012-05-07T15:04:03.833
> 
> 标签：javascript

Twitter在他们的标签中有这个：

```
<noscript>
<meta http-equiv=refresh content="0; URL=/?_twitter_noscript=1" />
</noscript> 
```

身体有这个：

```
 <noscript>
    <div class="front-no-js-warn">
      <h3>Twitter.com makes heavy use of JavaScript</h3>
      <p>If you cannot enable it in your browser's preferences, you may have a better experience on our <a href="http://m.twitter.com">mobile site</a>.</p>
    </div>
  </noscript> 
```

与 CSS ：

```
.front-no-js-warn{position:absolute;top:50px;
left:50%;
height:30px;
width:798px;
padding:15px 20px;
margin:0 0 0 -418px;
z-index:2;color:#ddd;
line-height:1.5;
background-color:#111;
background-color:rgba(20,20,20,.9);
-webkit-border-radius:6px;
-moz-border-radius:6px;
border-radius:6px;
}
.front-no-js-warn h3{color:#FEC632;font-weight:bold;}
.front-no-js-warn a{color:#75C6F7;} 
```

因此，当您禁用 javascript 时，您会看到`div class="front-no-js-warn"`

我的问题是重定向到的`?_twitter_noscript=1`意义何在，我该如何实现？我尝试做类似的事情，它无休止地尝试重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:08:16.327

您应该在索引页面中检查 $_GET['_twitter_noscript=1'] (php)，如果存在则显示不同的页面。

例子：

```
<?php
    if ($_GET['_twitter_noscript']) {
        echo "Display javascript-less page";
    } else {
        echo "noscript...meta refresh... etc etc ... /noscript";
        //Rest of the page...
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:06:51.697

他们这样做是为了确定哪些用户禁用了 JavaScript，并让他们知道因此他们将无法体验 Twitter 所提供的一切。

# mysql - MySQLCommandBuilder 和外键

> ID：10484412
> 
> 赞同：1
> 
> 时间：2012-05-07T15:04:20.590
> 
> 标签：mysql, vb.net, winforms

我的 winform 应用程序中有一个非常标准的 MySQL 查询，如下所示：

```
SELECT * FROM tblTable WHERE tblTable.tableID = " & variable 
```

其中一个字段是外键。当我尝试向我的 datagridview 添加记录时，出现错误：

> 无法添加或更新子行：外键约束失败

MySQLCommandBuilder 不能用包含外键的表创建 INSERT 命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:12:06.000

您可以使用此强制插入记录，但不推荐

```
SET FOREIGN_KEY_CHECKS = 0;

your select statement;

SET FOREIGN_KEY_CHECKS = 1; 
```

外键检查是为了避免表之间的不一致，正确的做法是：先在主表中插入外键，然后在子表上添加记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:06:56.507

有一个外键约束来防止这样的行为（为了数据库的完整性）。您可能正在尝试通过不存在的主键插入引用另一个表的值。

尝试将您的外键值更改为另一个表中的*现有*主键。

# c++ - MSVC 无法在 x86 上发送 16 字节对齐的函数参数

> ID：10484422
> 
> 赞同：5
> 
> 时间：2012-05-07T15:04:54.827
> 
> 标签：c++, visual-studio-2010

我正在使用 MSVC 来使用一些 SSE 内在函数。为了支持这一点，我将一些数据对齐在 16 字节的边界上。然而，既然我为 x86 而不是 x64 编译，MSVC 坚持认为我将函数参数对齐为 16 字节是非法的。但如果这是真的，那么任何人怎么能将 SSE 数据类型作为函数参数发送呢？

那么如何在函数中发送 16 字节对齐的参数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:08:29.820

> 如果这是真的，那么任何人怎么能将 SSE 数据类型作为函数参数发送呢？

你不能。:) 在 Microsoft 的 ABI 下，您必须通过引用或指针来传递它。

一种解决方法可能是使用[fastcall](http://msdn.microsoft.com/en-us/library/6xa169sk%28v=vs.100%29.aspx)调用约定，显然，它在 XMM 寄存器中传递前几个 SSE 参数。

# javascript - jquery 方法作为 javascript 的类方法

> ID：10484423
> 
> 赞同：0
> 
> 时间：2012-05-07T15:04:56.590
> 
> 标签：javascript, jquery

是否可以在 javascript 类中插入 jquery 函数？例如，我有以下 JS 类：

```
function FloatingImage() {
    var delay, duration;

    var moveRight = function($image)
    {

        $image.delay(delay).animate(
        { 
            left: $image.parent().width() - $image.width()
        }, 
        {
            duration: duration,
            complete: function(){ moveLeft($image) }
        });
    },
    moveLeft = function($image){
        $image.delay(delay).animate({
            left: 0
        }, {
            duration: duration,
            complete: function(){ moveRight($image) }
        });
    };

    this.constructor = function (delay, duration) {

        this.delay = delay;
        this.duration = duration;
    };
} 
```

以下支持功能：

```
function rand(l,u) // lower bound and upper bound
 {
     return Math.floor((Math.random() * (u-l+1))+l);
 } 
```

然后调用它，假设有 2 个 div #imgleft 和 #imgright 两个图像作为背景，具有：

```
$(function(){
    var $imageL = $('#imgleft'),
        $imageR = $('#imgright');

    var fi1 = new FloatingImage();
        fi1.constructor(rand(400,600), rand(1500,3000));
    var fi2 = new FloatingImage();
        fi2.constructor(rand(400,600), rand(1500,3000));

    fi1.moveRight($imageL);
    fi2.moveLeft($imageR);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:00:33.580

`FloatingImage`函数本身就是构造函数，所以它应该是接收`delay`和`duration`参数的那个。在此构造函数构建的对象实例上作为方法可用，您需要将该函数附加到对象。否则，它们将无法在构造函数范围之外访问。最后，在完整的回调中，您需要调用对象上的方法。

```
function FloatingImage(delay, duration) {
  var self = this;
  this.moveRight = function($image) {
    $image.delay(delay).animate({ 
      left: $image.parent().width() - $image.width()
    },{
      duration: duration,
      complete: function(){ self.moveLeft($image) }
    });
  },
  this.moveLeft = function($image){
    $image.delay(delay).animate({
      left: 0
    },{
       duration: duration,
       complete: function(){ self.moveRight($image) }
    });
  };
} 
```

但这似乎不是一个很好的 OO 模式。一个更好的 jQuery-ish 方法是构建一个 jQuery 插件：

```
$.fn.floatingImage = function(options) {
  var settings = $.extend( {
    direction: 'left',
    delay    : 400,
    duration : 400
  }, options);
  var self = this;
  self.delay(settings.delay).animate({
    left: (settings.direction === 'left') ? 0 : (this.parent().width() - this.width()),
  }, {
    duration: settings.duration,
    complete: function() {
      self.floatingImage({
        direction: (settings.direction === 'left') ? 'right' : 'left',
        delay: settings.delay,
        duration: settings.duration
      });
    }
  });
  // Return the jQuery object to allow methods chaining. 
  return self;
}    

$(function(){
  $('#imgleft').floatingImage({delay: rand(400,600), duration: rand(1500,3000)});
  $('#imgright').floatingImage({delay: rand(400,600), duration: rand(1500,3000), direction: 'right'});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:09:21.827

是的。jQuery IS JavaScript，没有区别。

但是你的“类”将不再是可移植的。它假定当您使用该“类”时，您已经加载了 jQuery，并且您传递的对象是 jQuery 对象，因为您使用了`delay`and `animate`。

# python - Series.interpolate 中可能存在的错误

> ID：10484424
> 
> 赞同：0
> 
> 时间：2012-05-07T15:04:58.073
> 
> 标签：python, pandas

我正在尝试在多个`DataFrame`s 或 Series 之间对齐我的索引值，并且我正在使用 Series.interpolate 但它似乎没有正确插值。或者我可能误解了什么。这是一个小例子：

```
x1 = np.array([0, 0.25, 0.77, 1.2, 1.4, 2.6, 3.1])
y1 = np.array([0, 1.1, 0.5, 1.5, 1.2, 2.1, 2.4])
x2 = np.array([0, 0.25, 0.66, 1.0, 1.2, 1.4, 3.1])
y2 = np.array([0, 0.2, 0.8, 1.1, 2.2, 0.1, 2.4])

df1 = DataFrame(data=y1, index=x1, columns=['A'])
df1.plot(marker='o')

df2 = DataFrame(data=y2, index=x2, columns=['A'])
df2.plot(marker='o')

df3=df1 - df2
df3.plot(marker='o')
print df3

def resample(signals):
    aligned_x_vals = reduce(lambda s1, s2: s1.index.union(s2.index), signals)
    return map(lambda s: s.reindex(aligned_x_vals).apply(Series.interpolate), signals)

sig1, sig2 = resample([df1, df2])
sig3 = sig1 - sig2
plt.plot(df1.index, df1.values, marker='D')
plt.plot(sig1.index, sig1.values, marker='o')
plt.grid()
plt.figure()
plt.plot(df2.index, df2.values, marker='o')
plt.plot(sig2.index ,sig2.values, marker='o')
plt.grid() 
```

我希望 sig1 和 sig2 比 df1 和 df2 有更多的点，但值是插值的。有几个点不重叠。这是错误还是用户错误？我正在使用 v0.7.3

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:59:02.000

这*可能*是一个错误。查看源代码，`Series.interpolate`在进行插值时不查看索引值。它假设它们是等距的并且仅`len(serie)`用于索引。也许这是意图，而不是错误。我不确定。

我修改了`Series.interpolate`方法，想出了这个`interpolate`功能。这将做你想要的。

```
import numpy as np
from pandas import *

def interpolate(serie):
    try:
        inds = np.array([float(d) for d in serie.index])
    except ValueError:
        inds = np.arange(len(serie))

    values = serie.values

    invalid = isnull(values)
    valid = -invalid

    firstIndex = valid.argmax()
    valid = valid[firstIndex:]
    invalid = invalid[firstIndex:]
    inds = inds[firstIndex:]

    result = values.copy()
    result[firstIndex:][invalid] = np.interp(inds[invalid], inds[valid],
                                             values[firstIndex:][valid])

    return Series(result, index=serie.index, name=serie.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:26:42.493

我不认为基础数学应用插值的总和等于总和的插值。它只在特殊情况下成立

# c# - c#程序集，朋友程序集

> ID：10484429
> 
> 赞同：2
> 
> 时间：2012-05-07T15:05:18.357
> 
> 标签：c#, .net-assembly, internal

C# internal 访问修饰符的定义是 internal：只能在包含程序集或友元程序集内访问。所以我的问题是什么是 c# 汇编？在包含程序集或朋友程序集内是什么意思？这是否意味着在同一个命名空间或项目中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:06:57.023

程序集（通常）是单个`.dll`或`.exe`文件。
AC# 项目（通常）编译为单个程序集。

`[assembly: InternalsVisibleTo(...)]`您可以使用该属性标记朋友程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:07:56.743

您[使用`InteralsVisibleToAttribute`](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T15:08:15.713

程序集是`IL`带有`manifest`信息的代码（如果是`.NET`），可以是`DLL`或`EXE`。这样，使用`manifest`信息，一个程序集可以声明为另一个程序集的*朋友*，因此`internal`也可以访问数据类型。

通过使用属性`[assembly: InternalsVisibleTo..]`标记到程序集指定信息的清单中，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:08:31.727

程序集包含中间代码、资源和自身的元数据。我们可以使用作为 Visual Studio 一部分提供的 ildasm（中间语言反汇编器）工具查看程序集的内部。要访问它，您需要打开 Visual Studio 命令提示符并键入 ildasm.exe。这将启动一个 Windows 应用程序，您可以使用它来探索任何 .Net 应用程序。

> > 朋友程序集是可以访问另一个程序集的朋友 (Visual Basic) 或内部 (C#) 类型和成员的程序集。如果您将程序集标识为朋友程序集，则不再需要将类型和成员标记为公共以便其他程序集可以访问它们。这在以下场景中特别方便：
> 
> *   在单元测试期间，当测试代码在单独的程序集中运行但需要访问被测试程序集中标记为朋友 (Visual Basic) 或内部 (C#) 的成员时。
>     
>     
> *   在开发类库时，对库的添加包含在单独的程序集中，但需要访问标记为 Friend (Visual Basic) 或 internal (C#) 的现有程序集中的成员。

# java - java.io.File 对象上的同步

> ID：10484431
> 
> 赞同：0
> 
> 时间：2012-05-07T15:05:22.220
> 
> 标签：java, multithreading, file-io, synchronization

`java.io.File`在对象上使用同步是否好？当您想使用两个线程交替读取和写入该文件对象时：一个用于读取，一个用于写入。

```
public class PrintChar {
    File fileObj;
    public void read() {

    while (true) {
        synchronized (this) {
            readFile();
            notifyAll();
            try {
                wait();
            } catch (InterruptedException e) {
                System.out.println(Thread.currentThread().getName()
                        + " throws Exception");
                e.printStackTrace();
            }
        }
    }
}

public void write(String temp) {

    while (true) {
        synchronized (this) {
            writeFile(temp);
            notifyAll();
            try {
                wait();
            } catch (InterruptedException e) {
                System.out.println(Thread.currentThread().getName()
                        + " throws Exception");
                e.printStackTrace();
            }
        }
    }
}

public void setFileObj(File fileObj) {
    this.fileObj = fileObj;
}

public void readFile() {
    InputStream inputStream;
    try {
        inputStream = new FileInputStream(fileObj);
        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(inputStream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;
        // Read File Line By Line
        while ((strLine = br.readLine()) != null) {
            // Print the content on the console
            System.out.println(strLine);
        }
        in.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void writeFile(String temp) {
    BufferedWriter bw;
    try {
        bw = new BufferedWriter(new FileWriter(fileObj, true));
        bw.write(temp);
        bw.newLine();
        bw.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public static void main(String args[]) {

    final PrintChar p = new PrintChar();
    p.setFileObj(new File("C:\\sunny.txt"));

    Thread readingThread = new Thread(new Runnable() {
        @Override
        public void run() {
            p.read();
        }
    });
    Thread writingThread = new Thread(new Runnable() {
        @Override
        public void run() {
            p.write("hello");
        }
    });

    Thread Randomizer = new Thread(new Runnable() {
        @Override
        public void run() {
            while (true)
                try {
                    Thread.sleep(500000);
                } catch (InterruptedException e) {
                    System.out.println(Thread.currentThread().getName()
                            + " throws Exception");
                    e.printStackTrace();
                }
        }
    });

    readingThread.start();
    writingThread.start();
    Randomizer.start();
} 
```

}

在上面的代码中我使用了 Synchronised(this)，我可以使用 Synchronise(fileObj) 吗？

**我从我的一位教授那里得到的另一个解决方案是将读写封装在对象中，并在每次操作后将它们推送到 fifo 中，如果有人详细说明的话**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:10:01.887

**编辑：**

现在您已经添加了代码，您*可以*锁定，`fileObj`但前提是它没有更改。我会将它移到构造函数中，并`final`确保有人不会`setFileObj`不当调用它。要么，要么抛出异常，如果`this.fileObj`不是`null`。

几个其他评论：

*   `notifyAll()`除非你真的需要通知多个线程，否则不要使用。
*   如果你 catch `InterruptedException`，我会退出线程而不是循环。始终围绕捕捉做出正确的决定，`InterruptedException`而*不仅仅是*打印和循环。
*   你`in.close();`应该在一个`finally`街区。

* * *

只要两个线程都锁定在同一个常量对象上，您就可以锁定您想要的任何对象。通常使用一个`private final`对象，例如：

```
 private final File sharedFile = new File(...);

  // reader
  synchronized (sharedFile) {
       // read from file
  }
  ...

  // writer
  synchronized (sharedFile) {
       // write to file
  } 
```

你*不能*做的是锁定两个不同的`File`对象，即使它们都指向同一个文件。例如，以下内容将*不起作用*：

```
 private static final String SHARED_FILE_NAME = "/tmp/some-file";

  // reader
  File readFile = new File(SHARED_FILE_NAME);
  synchronized (readFile) {
      ...
  }

  // writer
  File writeFile = new File(SHARED_FILE_NAME);
  synchronized (writeFile) {
      ...
  } 
```

此外，仅仅因为您锁定同一个`File`对象并不意味着读写代码将在线程之间工作。您需要确保在编写器中所有更新都刷新到同步块中。在阅读器中，您可能不想使用缓冲流，否则您将拥有陈旧的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:09:47.070

一般来说，跨 I/O 锁定并不是一个好主意。最好构建您的程序，以便您通过设计保证文件的给定部分通常不会同时写入和读取，并且只有在您绝对必须在文件的给定片段的读取和写入之间进行调解时才锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:17:25.660

通常不会。有很多更好的方法：使用[ReentrantLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html)

这个类已经提供了“读/写锁”的比喻。它还正确处理了多个线程可以同时读取但只有一个线程可以写入的情况。

`File`正如其他人已经提到的，只有当所有线程都使用相同的实例时，锁定才会起作用。

确保在每次写入后刷新输出缓冲区；这将消耗一些性能，但否则，您将获得陈旧的读取（读取线程不会找到您期望存在的数据）。

如果要简化代码，请添加第三个线程，该线程接受来自其他两个的命令。命令是`READ`和`WRITE`。将命令放入队列中，让第三个线程等待队列中的条目。每个命令都应该有一个回调方法（如`success()`），当命令执行时第三个线程将调用该方法。

这样，您根本不需要任何锁定。每个线程的代码将更加简单和易于测试。

**[编辑]**根据您的代码回答：它适用于您的情况，因为每个人都使用相同的实例，`fileObj`但它会将几件事混合到一个字段中。阅读您的代码的人会期望文件对象只是要读取的文件的路径。因此，该解决方案将违反[最小惊讶原则](https://en.wikipedia.org/wiki/Principle_of_least_astonishment)。

如果您争辩说它会节省内存，那么我会回答“[过早优化](https://en.wikipedia.org/wiki/Premature_optimization#When_to_optimize)”。

尝试找到一个可以清楚地传达您的意图的解决方案。“聪明”的编码对你的自我有好处，但这是一个人可以说的唯一积极的事情（而且当人们第一次看到你的“聪明”代码后，了解人们会对你说什么对你的自我不利...) ;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:40:30.143

Queueing off read/write objects to one thread that then performs the operation is a valid approach to something, but I'm not sure what.

Wha it would not do, for example, is to enforce read/write/read/write order as you specified in your earlier question. There is nothing to stop the read thread queueing up 100 read requests.

That could be prevented by making the thread that submits an object wait on it until it is signaled by the read/write thread, but this seems a very complex way of just enforcing read/write order, (assuming that's what you still want).

I'm getting to the state now where I'm not sure what it is you need/want.

# delphi - 从 Delphi 2007 应用程序发送电子邮件

> ID：10484433
> 
> 赞同：2
> 
> 时间：2012-05-07T15:05:28.833
> 
> 标签：delphi, email, delphi-2007

我有一个旧的 delphi 2007 应用程序，它通过 TurboPower Internet Professional 1.15 (tpipro) 发送电子邮件警报。我最近重新访问了该应用程序，发现由于大多数电子邮件服务器的 TLS/SSL 要求，电子邮件发送不再有效。现在我的问题是从这里去哪里。

我有 Delphi XE2，但真的不想花时间更新我的应用程序以在这个 ide 上工作。它有许多库依赖项等等。

是否有可以在 Delphi 2007 上运行的最新的 3rd 方电子邮件客户端？或者也许是一个可以使用的.dll？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:12:33.580

您可以使用 `Indy`delphi 中包含的库，这些组件支持 TLS 和 SSL（查看 TIdSmtp 组件），您可以在[此处](http://indy.fulgan.com/)找到 Indy 的最新版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T19:51:12.073

只是为了给你更多的选择

您也可以尝试 IPWorks，它不是免费的，您可以在[这里](http://www.nsoftware.com/ipworks/)找到它，或者您可能想查看 ICS（Internet Component Suite），它是免费软件，您可以在[这里找到](http://www.overbyte.be/frame_index.html?r)

Indy 是随 Delphi XE2 一起安装的明显选择

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T01:45:05.710

昨天刚做了这个（你可以用 VCL 类替换我自己的类来让它工作）：

```
unit SmtpClientUnt;

interface

uses
  Classes, IdSslOpenSsl, IdSmtp, CsiBaseObjectsUnt, DevExceptionsUnt;

type
  ESmtpClient = class(EDevException);

  TSmtpClient = class sealed(TCsiBaseObject)
  private
    FHostName: string;
    FIdSmtpClient: TIdSmtp;
    FIoHandler: TIdSslIoHandlerSocketOpenSsl;
    FUseTls: Boolean;
  protected
    procedure CheckIsOpen(const pEventAction: string);
    function GetHostName: string; virtual;
    function GetIsOpen: Boolean; virtual;
    function GetObjectName: string; override;
  public
    const LC_SMTP_CLIENT = 'SMTP Client';

    constructor Create(const pHostName: string; pUseTls: Boolean = False);
    destructor Destroy; override;
    procedure Close;
    procedure Open(const pUserName: string = ''; const pPassword: string = '');
    procedure Reconnect;
    procedure SendMessage(pToAddresses: TStrings; const pFromAddress: string;
                          const pSubject: string; const pBody: string;
                          pAttachmentFiles: TStrings = nil);
    property HostName: string read GetHostName;
    property IsOpen: Boolean read GetIsOpen;
  end;

implementation

uses
  SysUtils, IdAttachmentFile, IdEmailAddress, IdExplicitTlsClientServerBase, IdMessage,
  CsiExceptionsUnt, CsiGlobalsUnt, CsiSingletonManagerUnt, CsiStringsUnt;

{ TSmtpClient }

procedure TSmtpClient.CheckIsOpen(const pEventAction: string);
begin
  if not IsOpen then
    raise ESmtpClient.Create('Cannot ' + pEventAction +
                             ' while the SMTP client is not open', slError, 1,
                             ObjectName);
end;

procedure TSmtpClient.Close;
begin
  if IsOpen then begin
    CsiGlobals.AddLogMsg('Closing SMTP client', LC_SMTP_CLIENT, llVerbose, ObjectName);
    FIdSmtpClient.Disconnect;
  end;
end;

constructor TSmtpClient.Create(const pHostName: string; pUseTls: Boolean);
begin
  FHostName := pHostName;
  FUseTls := pUseTls;
  inherited Create;
  if FHostName = '' then
    raise ESmtpClient.Create('Cannot create SMTP client - empty host name', slError, 2,
                             ObjectName);

  FIdSmtpClient := TIdSmtp.Create(nil);
  FIdSmtpClient.Host := pHostName;

  if FUseTls then begin
    FIoHandler := TIdSslIoHandlerSocketOpenSsl.Create(nil);
    FIdSmtpClient.IoHandler := FIoHandler;
    FIdSmtpClient.UseTls := utUseRequireTls;
  end;
end;

destructor TSmtpClient.Destroy;
begin
  Close;

  if FUseTls and Assigned(FIdSmtpClient) then begin
    FIdSmtpClient.IoHandler := nil;
    FreeAndNil(FIoHandler);
  end;

  FreeAndNil(FIdSmtpClient);
  inherited;
end;

function TSmtpClient.GetHostName: string;
begin
  if Assigned(FIdSmtpClient) then
    Result := FIdSmtpClient.Host
  else
    Result := FHostName;
end;

function TSmtpClient.GetIsOpen: Boolean;
begin
  Result := Assigned(FIdSmtpClient) and FIdSmtpClient.Connected;
end;

function TSmtpClient.GetObjectName: string;
var
  lHostName: string;
begin
  Result := inherited GetObjectName;
  lHostName := HostName;
  if lHostName <> '' then
    Result := Result + ' ' + lHostName;
end;

procedure TSmtpClient.Open(const pUserName: string; const pPassword: string);
begin
  if not IsOpen then begin
    with FIdSmtpClient do begin
      Username := pUserName;
      Password := pPassword;
      Connect;
    end;

    CsiGlobals.AddLogMsg('SMTP client opened', LC_SMTP_CLIENT, llVerbose, ObjectName);
  end;
end;

procedure TSmtpClient.Reconnect;
begin
  Close;
  Open;
end;

procedure TSmtpClient.SendMessage(pToAddresses: TStrings; const pFromAddress: string;
                                  const pSubject: string; const pBody: string;
                                  pAttachmentFiles: TStrings);
var
  lMessage: TIdMessage;
  lAddress: string;
  lName: string;
  lIndex: Integer;
  lAddressItem: TIdEMailAddressItem;
  lAttachmentFile: TIdAttachmentFile;
  lFileName: string;
begin
  CheckIsOpen('send message');

  lMessage := TIdMessage.Create(nil);
  try
    with lMessage do begin
      CsiSplitFirstStr(pFromAddress, ',', lAddress, lName);
      From.Address := lAddress;
      From.Name := lName;
      Subject := pSubject;
      Body.Text := pBody;
    end;

    for lIndex := 0 to pToAddresses.Count - 1 do begin
      lAddressItem := lMessage.Recipients.Add;
      CsiSplitFirstStr(pToAddresses.Strings[lIndex], ',', lAddress, lName);
      lAddressItem.Address := lAddress;
      lAddressItem.Name := lName;
    end;

    if Assigned(pAttachmentFiles) then
      for lIndex := 0 to pAttachmentFiles.Count - 1 do begin
        lAttachmentFile := TIdAttachmentFile.Create(lMessage.MessageParts);
        lFileName := pAttachmentFiles.Strings[lIndex];
        lAttachmentFile.StoredPathName := lFileName;
        lAttachmentFile.FileName := lFileName;
      end;

    FIdSmtpClient.Send(lMessage);
  finally
    lMessage.Free;
  end;
end;

procedure InitialiseUnit;
begin
  CsiAllCapWords.AddString('SMTP');
end;

initialization

CsiSingletonManager.RegisterHook(InitialiseUnit, nil);

end. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-08T08:32:45.020

以下是演示代码： http: [//www.indyproject.org/sockets/demos/index.en.aspx](http://www.indyproject.org/sockets/demos/index.en.aspx)

IdPOP3 / IdSMTP / IdMessage

# hibernate - Scala 中的 JPA/Hibernate CollectionOfElements

> ID：10484434
> 
> 赞同：2
> 
> 时间：2012-05-07T15:05:33.280
> 
> 标签：hibernate, scala, collections

在 Scala 中，如果我定义一个 simple `@org.hibernate.annotations.CollectionOfElements`，它就不起作用。

不知何故，我无法`@CollectionOfElements(targetElement = xyz.class)`在 scala 中指定类似的东西。它在输入“.class”时呕吐。

任何人都知道我怎样才能让任何`CollectionOfElements`注释系列在 scala 中工作？我只想像下面这样简单的工作：

```
@org.hibernate.annotations.CollectionOfElements (targetElement = Long.class)
var updatedQuestions : java.util.List[Long] = _ 
```

顺便说一句，我在[How to create custom query for CollectionOfElements](https://stackoverflow.com/questions/3069518/how-to-create-custom-query-for-collectionofelements/10484359#10484359)上发布了这篇文章，但意识到这可能不是与 Scala 相关的线程。**我的问题特定于在 Scala 中使用它**。在标准 Java 中使用它没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:23:44.077

您是否尝试过以下操作？

```
@org.hibernate.annotations.CollectionOfElements (targetElement = classOf[Long]) 
```

# drupal - 对于任何用户，user->uid 始终为 1？

> ID：10484436
> 
> 赞同：2
> 
> 时间：2012-05-07T15:05:37.943
> 
> 标签：drupal, drupal-7, drupal-routes

我是 Drupal 的新手，所以我想创建一个自定义用户配置文件的简单模块，特别是我想为用户配置文件插入一些选项卡（传统的用户配置文件有 2 个选项卡“查看选项卡”和“编辑选项卡”）所以现在我想要添加更多 3 个标签。

*   显示历史
*   分享个人资料
*   捷径

但它只适用于经过身份验证的用户而不是管理员配置文件（当管理员显示他的配置文件时，配置文件是传统配置文件）。所以它是我的代码（我的模块名称是：tung_tab），这里是 tung_tab.module 的代码：

```
function tung_tab_menu() 
{
    $items = array();
    global $user;
        //if (!user_access('administer'))
        if($user->uid!=1)
     {
      $items['user/%/rvhistory'] = array(
        'title' => 'Review History ',
        'description' => 'Review History',
        //'page callback' => 'drupal_get_form',
        //'page arguments' => array('tung_tab_confirm_reviewh', 1),
        'access callback' => 'user_view_access',
        'access arguments' => array(1),
        'type' => MENU_LOCAL_TASK,
      );
      $items['user/%/sharehistory'] = array(
        'title' => 'Share History',
        'description' => 'Share History',
        //'page callback' => 'drupal_get_form',
        //'page arguments' => array('tung_tab_confirm_shareh', 1),
        'access callback' => 'user_view_access',
        'access arguments' => array(1),
        'type' => MENU_LOCAL_TASK,
      );
      $items['user/%/sc'] = array(
        'title' => 'Shortcut',
        'description' => 'Shortcut',
        //'page callback' => 'getDescription',
        //'page arguments' => array('tung_tab_confirm_shareh', 1),
        'access callback' => 'user_view_access',
        'access arguments' => array(1),
        'type' => MENU_LOCAL_TASK,
      );
     }
      return $items;
} 
```

它适用于管理选项卡，但是当我注销然后与其他用户登录但没有改变时，如果我评论 //if($user->uid) 行，一切都可以，所以当我添加更多代码时在这一行 'title' => 'Review History '.$user->uid，当我是管理员时，它显示 Review History 1 当我用另一个帐户登录时，一切都一样，Review History 1 我不能明白为什么？我认为我的代码出现了一些错误，我将模块放在“mysite/sites/default/modules/”中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:32:58.090

您不应该在**if 条件**中定义菜单项。您应该使用访问回调和访问参数来控制对菜单回调的访问。

**错误的：**

```
function tung_tab_menu() 
{
    $items = array();
    global $user;
    if($user->uid!=1)
    {
        // defined menu items
    }
    return $items;
} 
```

**正确的：**

```
function tung_tab_menu() 
{
    $items = array();
    global $user;
    // define the menu items here...
    return $items;
} 
```

尝试解决这个问题，然后看看你是否仍然得到相同的结果。

# c# - 如何更改 HTML 代码 在 PostBack 的服务器端？

> ID：10484440
> 
> 赞同：0
> 
> 时间：2012-05-07T15:05:43.237
> 
> 标签：c#, .net, webforms

假设我在 .cs 上“生成”这个 HTML 元素，位于`Page_Load()`：

```
foreach (Object obj in Objects)
{
    Literal boxStart = new Literal();
    boxStart.Text = "<div class=\"option-box\">";   

    Literal boxEnd = new Literal();
    boxEnd.Text = "</div";          

    HiddenField hf = new HiddenField();
    hf.Value = "0";
    hf.ID = "category" + obj.ID;

    panelCategorieGuida.Controls.Add(boxStart);
    panelCategorieGuida.Controls.Add(hf);
    panelCategorieGuida.Controls.Add(boxEnd);
} 
```

之后，在客户端，一些“hf.Value”会改变（感谢一些 JS 函数）。比，在 PostBack ：

```
protected void cmdCerca_Click(object sender, EventArgs e)
{
    foreach (HiddenField hf in panelCategorieGuida.Controls.OfType<HiddenField>())
    {

    }
} 
```

我想将类`option-box`（在每个 HiddenField 的主 div 上）更改为`option-box-selected`hf.Value 为“1”的位置。

我该怎么做？当然要避免在回发时使用 Javascript 函数/控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:32:54.947

这可以通过创建`div`为服务器端控件而不是文字来完成。这个标签可以用[HtmlGenericControl](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)创建：

```
foreach (Object obj in Objects)
{
    HtmlGenericControl div = new HtmlGenericControl("div");
    div.Attributes["class"] = "option-box";

    HiddenField hf = new HiddenField();
    hf.Value = "0";
    hf.ID = "category" + obj.ID;

    div.Controls.Add(hf);
    panelCategorieGuida.Controls.Add(div);
} 
```

现在每个隐藏字段都直接嵌套在服务器端控件中，表示`div`可以通过简单的`Parent`属性访问：

```
protected void cmdCerca_Click(object sender, EventArgs e)
{
    foreach (HtmlGenericControl div in panelCategorieGuida.Controls.OfType<HtmlGenericControl>())
    {
        HiddenField hf = div.Controls.OfType<HtmlGenericControl>()[0]; //leaving out all the exceptions handling
        if (String.Equals(hf.Value, "1"))
        {
            div.Attributes["class"] = "option-box-selected";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:16:39.547

boxStart.Attributes["class"] = "someClass" <= 这是你可以在后面的代码中更改类属性的方法

# java - JSP - 从 jsp 测验应用程序中获取分数

> ID：10484443
> 
> 赞同：0
> 
> 时间：2012-05-07T15:05:57.527
> 
> 标签：java, database, jsp, get

嗨，我正在 jsp 中创建一个测验应用程序，并为每个问题使用不同的 jsp 页面。我想在回答每个问题后记分。我的问题是我正在从数据库中选择随机答案，其中也包含正确的答案。由于我无法猜测正确答案会出现在哪个字母上，你能建议我应该怎么做吗？我发布第一个和第二个问题 jsp 是为了让您了解我是如何做到的：

q1.jsp

```
<%@page import="java.util.Random"%>
<%@page import="java.util.ArrayList"%>
<%@page import="org.me.jsp.beans.WordBean"%>
<%@page import="java.util.List"%>
<!--This JSP acts as the first question in a multiple choice quiz, with the user
asked to submit their answer to the question-->

<?xml version = "1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<jsp:useBean id = "wordData" scope = "request"
             class = "org.me.jsp.beans.WordDataBean" />
<html>
    <head>
        <title>Big Java Quiz, question 1</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <%if (request.getParameter("choice").equals("N")) {
                out.print("<meta http-equiv='refresh' content='0;url=options.jsp'/>");
            }
            //Redirects user back to index if they did not want to take quiz%>
        <form action="q2.jsp" method="POST">
            <%
                List<WordBean> wordList = wordData.getWordList();
                List<String> answersList = new ArrayList<String>();
                Random random = new Random();
                Random forAnswers = new Random();

                WordBean goodOne = wordList.get(random.nextInt(wordList.size()));
                //take it out from the list
                wordList.remove(goodOne);
                //add it to the answers list
                answersList.add(goodOne.getGermanName());
                WordBean fakeOne = wordList.get(random.nextInt(wordList.size()));
                //take it out from the list
                wordList.remove(fakeOne);
                //add it to the answers list
                answersList.add(fakeOne.getGermanName());
                WordBean fakeTwo = wordList.get(random.nextInt(wordList.size()));
                //take it out from the list
                wordList.remove(fakeTwo);
                //add it to the answers list
                answersList.add(fakeTwo.getGermanName());

            %>What is the English word for the German word <%=goodOne.getEnglishName()%>?<br>

                <%
                    char letter = 'A';
                    for (String answer : answersList) {
                %>
                <input type="radio" name="q1Answer" value=""/><label for="<%=letter%>"><%=letter%>)<%=answersList.get(forAnswers.nextInt(3))%>  /> 
                    <% //point to the next letter
                            letter++;
                        }
                        %>
                    <input type="submit" value="Submit"/>
                    </form>
                    </body>
                    </html> 
```

q2.jsp

```
<%-- 
    Document   : q2
    Created on : 06-May-2012, 18:54:32
    Author     : encore
--%>

<!--This JSP acts as the second question in a multiple choice quiz, with the user
asked to submit their answer to the question-->

<?xml version = "1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Big Java Quiz, question 2</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <%int score = 0;
        if(request.getParameter("q1Answer").equals("C"))
            score++; //Increments score if answer submitted was correct%>
        <form action="q3.jsp" method="POST">
            Your current score is: <%out.print(score);%>/20
            <input type="hidden" name="q2Score" value="<%out.print(score);%>"/>
            <!--Hidden button allows score to be accessed by next JSP-->
            <b>Question 2.</b> When an exception is generated it is said to have been _________?<br/><br/>
            <input type="radio" name="q2Answer" value="A"/><label for="A">A) Built</label><br/>
            <input type="radio" name="q2Answer" value="B"/><label for="B">B) Thrown</label><br/>
            <input type="radio" name="q2Answer" value="C"/><label for="C">C) Caught</label><br/>
            <input type="radio" name="q2Answer" value="D"/><label for="D">D) Detected</label><br/><br/>
            <input type="submit" value="Submit"/>
        </form>
    </body>
</html> 
```

注意：第二题的形式显然会改成别的形式，目前我正在集中精力获取分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:00:32.520

在 Q1 的页面中，您应该知道正确答案，将其放入会话中，然后在下一页中检索它。

# php - 使用 neo4j 数据库构建 php 会话处理程序

> ID：10484444
> 
> 赞同：0
> 
> 时间：2012-05-07T15:06:01.050
> 
> 标签：php, session, authentication, neo4j

如何在 php 中构建会话处理程序，将会话数据存储在 neo4j 数据库中？如何为 neo4j 绘制良好的模式以保存会话用户数据并管理 Web 应用程序的用户身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:16:53.273

您需要创建一个使用 Neo4J REST API的[SessionHandler实例。](http://www.php.net/manual/en/class.sessionhandlerinterface.php)有一个[PHP 库](https://github.com/jakewins/Neo4j.php)应该涵盖与 Neo4J 的通信：因为它是一个图形数据库，所以您实际上不需要提前为模式而失眠。会话接口只需要您保存/检索关联数组：除非您明确计划通过其他语言浏览数据，否则您可以将其序列化为字符串（或 JSON）并将其作为属性存储在新的由会话 ID 键入的节点。

# ruby-on-rails - Geocoder gem：有没有办法记录仅使用地理编码器访问网站的人的 IP？

> ID：10484447
> 
> 赞同：0
> 
> 时间：2012-05-07T15:06:04.643
> 
> 标签：ruby-on-rails, ruby, google-geocoder

我有一个流量很低的网站，我想记录访问它的每个人的 IP 地址。

我知道 Ruby 地理编码器可以检测到发出请求的人的 IP

```
request.ip  # =>    "216.232.140.27" 
```

但是，我不确定如何将其记录到数据库或以某种方式存储它，以便在有人访问我的网站时可以看到它。

即我的问题/精神障碍似乎是我希望有人单击按钮以触发方法，但我希望刚刚访问的人存储的 IP 地址....

如果有人只是访问我的网站，有人可以解释我如何编写一种方法来将 IP 地址存储在数据库中（或者数据库以外的其他地方，例如日志，如果这样更好的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:56:44.230

如果我正确理解了您的需求，那么您的方向就错了。

首先，`ip`方法包含在标准`request`中，与地理编码器无关：http: [//api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-ip](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-ip)

其次，更容易安装第三方统计信息，然后跟踪所有访问者（通过 ip 或任何你想要的）。例如：[http ://www.google.com/analytics/](http://www.google.com/analytics/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:09:38.550

像这样的东西会起作用吗？

[https://github.com/wvanbergen/request-log-analyzer/wiki/Creating-a-request-database](https://github.com/wvanbergen/request-log-analyzer/wiki/Creating-a-request-database)

# jquery - 供应来源

> ID：10484452
> 
> 赞同：1
> 
> 时间：2012-05-07T15:06:25.853
> 
> 标签：jquery, html, textboxlist

是否可以为`<div>`标签提供外部 HTML？

我`.load()`在 jquery 中`textboxlist`尝试`ajax`过，但它对`textboxlist`. `<div>`有没有在 html中提供源代码之类的`iframe`？

例子：

`<div src="existing.php"></div>`

我发现了类似的东西，他们说这有效，但对我来说无效。所以有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:08:51.047

我猜您的 jQuery 选择返回了多个元素（表单中的 diva 和其他一些元素），它会更新所有内容。

为您的 div提供一个**唯一的 id**，您将能够在没有任何问题的情况下使用加载功能。

**HTML**

```
<div id="divExisting"></div> 
```

**脚本**

```
$(function(){
  $("#divExisting").load("existing.php");
}); 
```

上面的函数将确保该`load`函数只有在 dom 完全加载后才会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:11:04.930

既然您使用的是 PHP，为什么不这样呢？

```
<div id="externalHTML">
   <?php include_once('existing.php'); ?>
</div> 
```

还是应该在客户端动态加载此页面？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:09:24.820

我认为你想要的是一个 iFrame：

```
<iframe src="existing.php"></iframe> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:14:10.513

文本框列表与 jQuery Mobile 非常相似。它有组件，一个是输入，另一个是另一个显示框，例如：div 或 ul（无序列表）或类似的东西。因此，您需要做的是编辑输入类型文本字段或无序列表 html 内容，然后使用 getValues() 或 setValues() 方法，最有可能紧随其后的是 update() 方法。有关 API 文档，请查看此链接： http: [//www.devthought.com/projects/mootools/textboxlist/](http://www.devthought.com/projects/mootools/textboxlist/)

# telerik - Telerik 网格中的 Select 方法

> ID：10484453
> 
> 赞同：0
> 
> 时间：2012-05-07T15:06:27.417
> 
> 标签：telerik

Telerik 网格中的 ajax/server 绑定中的 select() 是做什么用的？

我尝试在网格中选择行/列，它没有被调用。什么时候叫？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:33:35.690

Select 方法用于获取填充网格的数据。

# wcf - 如何保护托管在 Azure 中从 Monotouch 调用的 WCF 服务？

> ID：10484455
> 
> 赞同：0
> 
> 时间：2012-05-07T15:06:31.957
> 
> 标签：wcf, security, azure, xamarin.ios

我有一个单点触控应用程序，它当前使用 ssl 和基本身份验证在 IIS 中调用托管的 WCF 服务。我需要将此 wcf 服务移至 Azure，并且对最佳安全实践感到困惑。我已经阅读过使用 ACS，但我找不到任何使用该设置与 monotouch 的示例，并且不确定它是否会起作用。有没有人有任何示例或建议可以在 Azure 中安全地从 monotouch 调用 WCF 服务？

谢谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:27:36.213

我不熟悉 MonoTouch。但就服务端而言，可以继续使用 SSL 和基本认证。注意默认情况下 IIS 基本身份验证需要 Windows 凭据。由于它在本地工作，我认为您已经实现了自定义基本身份验证模块。另一个需要注意的地方是它需要额外的步骤来支持 Windows Azure 中的 SSL。您可以参考[http://msdn.microsoft.com/en-us/gg271302](http://msdn.microsoft.com/en-us/gg271302)获取教程。如果您想支持基于声明的授权，通常使用 ACS。

此致，

明旭。

# iphone - iOS 编程中的内存管理

> ID：10484464
> 
> 赞同：0
> 
> 时间：2012-05-07T15:07:09.470
> 
> 标签：iphone, objective-c, ios, xcode, memory-management

我的 iOS 应用程序中的内存管理有一点问题。我加载一个 XML 并将这个 XML 中的所有值设置为特定对象。现在我的问题是，当我每 15-20 次重新加载此 XML 重新加载 XML 时，我的应用程序 Crash on Parsing 是我的解析器的一个示例。

编辑：这里是 NSZombie 启用时的错误 如果 NSZombie 被禁用我没有收到错误消息。-[CFNumber retain]：消息发送到释放的实例

感谢帮助。

编辑：

我的代码的开头：

```
 - (id)init
{
    self = [super init];
    if (self) {
        TheObjects *theObjects = [[TheObjects alloc] init];

        [self parse];
    }
    return self;
}

- (void) reload{
    reload = YES;
    TheObjects *theTmpObjects = [[TheObjects alloc] init];
     [self parse];
}
- (void)parse{

for (id xmlOBject in xmlObjects){
    MyObject *object = [[MyObject alloc] init];
    object.number1 = [NSNumber numberWithInt:1];
    object.number2 = [NSNumber numberWithInt:2];
    object.number3 = [NSNumber numberWithInt:3];

    if (reload)
        [theTmpObjects.objects addObject:object];
    else 
        [theObjects.objects addObject:object];

    [object release];
}
//later in my code

TheObjects *localTheTmpObjects = nil;
if (reload){
    localTheTmpObjects = theObjects;
    theObjects = theTmpObjects;
}

if ([delegate respondsToSelector:@selector(finished:)]){
    [delegate performSelector:@selector(finished:) withObject:theObjects];
}

if(reload)
    [localTheTmpObjects release]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:10:13.497

```
remove the line [localTheTmpObjects release]

you don't own the object

at the end, call the  `[localTheTmpObjects autorelease];`
this is because if you release array, all its objects are released and hence may cause crash, when your array may in use

    - (id)init
    {
        self = [super init];
        if (self) {
            TheObjects *obbjects = [[TheObjects alloc] init];
    theObjects = objects;
[objects releas];
            [self parse];
        }
        return self;
    }

    - (void) reload{
        reload = YES;
TheObjects *obbjects = [[TheObjects alloc] init];
    thetmpObjects = objects;
[objects releas];         [self parse];
    }
    - (void)parse{

    for (id xmlOBject in xmlObjects){
        MyObject *object = [[MyObject alloc] init];
        object.number1 = [NSNumber numberWithInt:1];
        object.number2 = [NSNumber numberWithInt:2];
        object.number3 = [NSNumber numberWithInt:3];

        if (reload)
            [theTmpObjects.objects addObject:object];
        else 
            [theObjects.objects addObject:object];

        [object release];
    }
    //later in my code

    TheObjects *localTheTmpObjects = nil;
    if (reload){
        localTheTmpObjects = theObjects;
        theObjects = theTmpObjects;
    }

    if ([delegate respondsToSelector:@selector(finished:)]){
        [delegate performSelector:@selector(finished:) withObject:theObjects];
    }

    } 
```

# internet-explorer - IE 8：对象不支持属性或方法“getElementsByClassName”

> ID：10484467
> 
> 赞同：10
> 
> 时间：2012-05-07T15:07:30.350
> 
> 标签：internet-explorer, error-handling, prototypejs, slider

我正在使用 diapo 滑块，它似乎可以在除 Internet Explorer 8 之外的所有其他浏览器中使用。

在调试模式下运行 ie8 后，出现以下错误：

> SCRIPT438：对象不支持属性或方法“getElementsByClassName”prototype.js，第 5988 行字符 5

```
return function(className, parentElement) {
    return $(parentElement || document.body).getElementsByClassName(className);
  }; 
```

> SCRIPT438：对象不支持属性或方法“fireEvent”prototype.js，第 5736 行字符 7

```
if (document.createEvent)
      element.dispatchEvent(event);
    else
      element.fireEvent(event.eventType, event);

    return Event.extend(event); 
```

我在magento平台上运行这个滑块，似乎原型脚本在那个有问题的地方。它使用的原型版本是 1.7，因此排除了脚本更新的可能修复。

注意：虽然，我在 ie9 中没有显示问题，但我收到以下错误：

> SCRIPT438：对象不支持属性或方法“dispatchEvent”prototype.js，第 5734 行字符 7

```
if (document.createEvent)
      element.dispatchEvent(event);
    else
      element.fireEvent(event.eventType, event);

    return Event.extend(event); 
```

这些是 diapo 滑块工作所需的脚本，在标题中加载了 script 标签。我不确定，但其中一些脚本可能与现有脚本冲突：

```
<script type='text/javascript' src='http://www.pixedelic.com/plugins/diapo/scripts/jquery.min.js'></script>
<script type='text/javascript' src='http://www.pixedelic.com/plugins/diapo/jquery.mobile-1.0rc2.customized.min.js'></script>
<script type='text/javascript' src='http://www.pixedelic.com/plugins/diapo/jquery.easing.1.3.js'></script>
<script type='text/javascript' src='http://www.pixedelic.com/plugins/diapo/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='http://www.pixedelic.com/plugins/diapo/scripts/diapo.js'></script> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T15:09:26.170

IE8[不](http://caniuse.com/#search=getelementsbyclassname)支持[`getElementsByClassName`](https://developer.mozilla.org/en/DOM/element.getElementsByClassName)。但是，它[确实](http://caniuse.com/#search=queryselectorall)支持[`querySelectorAll`](https://developer.mozilla.org/En/DOM/Document.querySelectorAll). 所以，我建议使用`querySelectorAll`.

```
document.getElementsByClassName('foo') 
```

变成

```
document.querySelectorAll('.foo'); // Prefixed dot. 
```

请注意，Prototype.js[不赞成`getElementsByClassName`使用`$$`](http://www.prototypejs.org/api/element/getElementsByClassName)和[`Element#select`](http://www.prototypejs.org/api/element/select)。

IE8的快速修复：

```
<!--[if IE 8]><script>
document.getElementsByClassName = 
Element.prototype.getElementsByClassName = function(class_names) {
    // Turn input in a string, prefix space for later space-dot substitution
    class_names = (' ' + class_names)
        // Escape special characters
        .replace(/[~!@$%^&*()_+\-=,./';:"?><[\]{}|`#]/g, '\\$&')
        // Normalize whitespace, right-trim
        .replace(/\s*(\s|$)/g, '$1')
        // Replace spaces with dots for querySelectorAll
        .replace(/\s/g, '.');
    return this.querySelectorAll(class_names);
};
</script><![endif]--> 
```

笔记：

*   它确实支持多个类名。
*   它不支持空 ( `''`) 类名。如果需要，添加对这些的支持很简单。

演示：http: [//jsfiddle.net/HL4FL/21/](http://jsfiddle.net/HL4FL/21/)

# c# - 如何使用 moq 断言在 c# 中调用的函数？

> ID：10484468
> 
> 赞同：2
> 
> 时间：2012-05-07T15:07:32.193
> 
> 标签：c#, unit-testing, moq

我正在尝试学习如何使用 Moq 使用 C# 进行单元测试。我设置了一个简单的类，BasicMath，它有一个函数`int Multiply(int a, int b)`，主体只返回一个 * b。我有另一个名为 AdvancedMath 的类，它有一个函数'int Square(int a)'，主体调用 Multiply(a,a) 并返回结果。

我正在尝试为 AdvancedMath.Square 编写一个简单的测试，它将断言使用正确的值调用 BasicMath.Multiply。我知道你不能用普通的公共功能做到这一点，所以我把这些功能设为虚拟，但我仍然遇到麻烦。有人可以向我解释这是如何完成的吗？除了默认的空构造函数之外，这两个类都没有任何构造函数。

这是我的尝试：

```
class test_Advanced_Functions
{
    [Test]
    public void test_SquareFunction_Should_return_correct_result()
    {
        // Arrange
        Mock<BasicFunctions> mock = new Mock<BasicFunctions>();
        AdvancedFunctions af = new AdvancedFunctions();

        // Act
        int result = af.Square(5);

        //Assert
        mock.Verify(d => d.Multiply(5, 5), Times.Exactly(1));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:55:56.403

假设从那时`AdvancedMath`派生，您可以在虚拟`BasicMath`时使用 Moq 进行测试：`Multiply`

```
var mock = new Mock<AdvancedMath>();
mock.Setup(m => m.Multiply(2, 2)).Returns(4);
mock.Object.Square(2);
mock.VerifyAll(); 
```

如果您使用`BasicMath`within `AdvancedMath`（即 if`Multiply`是静态的并且直接从 调用），那么使用 Moq`Square`测试这种交互***是不可能的。***要了解原因，请参阅[此问题](https://stackoverflow.com/q/9064566/343266)。

但是，在这种简单的情况下进行基于行为的验证似乎并不正确。您需要回答自己一个问题：*“我要测试什么？”* . 那`Square` **行得通**还是它调用了一些方法？这个测试（你现在计划做的），只将责任委托给`Multiply`，假设它有效。您的`Square`实现可能会以多种方式发生变化（例如，不使用`Multiply`），它会破坏您的测试 - 它不应该。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:58:20.790

`Moq`无法修改它尚未创建的实例的行为。

您应该通过练习依赖注入将您的类编写为可单元测试的。由于`AdvancedFunctions`显然依赖于`BasicFunctions`，它应该有一个`BasicFunctions`作为构造函数参数传入，而不是`new`单独设置一个。

# node.js - 在 redis 中有效地缓存搜索结果

> ID：10484472
> 
> 赞同：3
> 
> 时间：2012-05-07T15:07:40.073
> 
> 标签：node.js, caching, redis

我需要一种在我的 node.js 应用程序上缓存搜索的方法。我有一个使用 redis 的想法，但我不确定如何实现它。

我想要做的是对要缓存的搜索数量有一个硬性限制，因为我的 RAM 数量有限。对于每次搜索，我想存储搜索查询和相应的搜索结果。

假设我对缓存搜索数量的硬限制是 4。每个搜索查询都是下图中的一个框：

![在此处输入图像描述](../Images/b3b2e9c75673d784787266430c793d33.png)

如果有未缓存的新搜索，则新搜索将被推到顶部，而底部的搜索查询将被删除。

![在此处输入图像描述](../Images/cfbfeb5cdd2f2ce1b21699b9821f3ddd.png)

但是，如果有一个搜索被缓存，缓存的搜索查询将从其位置删除并添加到缓存的顶部。例如，如果`search 3`被搜索。

![在此处输入图像描述](../Images/2b48154f7abee3627e2eaad73d9c2447.png)

通过这样做，我使用了相对相同数量的内存，而搜索最多的查询将始终在缓存中浮动，而不太受欢迎的搜索将通过缓存并被删除。

我的问题是，我该怎么做呢？我以为我可以用列表来做到这一点，但我不确定如何检查列表中是否存在值。我还认为我可以使用排序集来做到这一点，我会将集合的分数设置为索引，但是如果搜索查询在缓存中移动，我需要更改每个单独的分数集合中的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:34:21.363

对您来说最简单的是启动新的 redis 实例来处理搜索缓存。对于这种情况，您可以根据需要设置最大内存。然后，您将`maxmemory-policy`为此实例设置为`allkeys-lru`. 通过这样做，redis 将自动删除最近最少使用的缓存条目（这是您想要的）。此外，您将真正受到内存使用量的限制，而不是缓存条目的最大数量。

然后，您将为此 redis 实例插入密钥：`search:$seachterm => $cachedvalue`并为此密钥设置过期几分钟（这样您就不会提供过时的答案）。通过这样做，redis 将为您完成艰苦的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:30:19.460

你肯定想使用 sortedset

这就是你要做的：

第一个查询：从排序集中选择顶部元素：zrevrange(0,1) WITHSCORES

第二个查询：在一个多，做： A.插入你的元素，你检索到的分数+ 1。如果该元素已经存在于列表中，它将被简单地重新计分，而不是添加两次。

B. zremrankbyrank。我没有测试过这个，但我认为你想要的参数是 (0,-maxListSize)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T23:19:02.060

看看**ZREMRANGEBYRANK**。您可以将排序集中的数据量限制为给定大小。

[http://redis.io/commands/zremrangebyrank](http://redis.io/commands/zremrangebyrank)

# c# - InvalidOperationException 因为不同的 ObjectContext 对象

> ID：10484473
> 
> 赞同：0
> 
> 时间：2012-05-07T15:07:50.837
> 
> 标签：c#, asp.net, entity-framework, objectcontext

我遇到了一个我不太了解 Entity Manager (C#) 的问题。我对这个东西有点新，所以请忍受我的菜鸟^^

我正在尝试创建一个 UserQuestion 的实例（这使得数据库中的表 UserQuestionnaire 和 Question 之间的链接； UserQuestionnaire 链接用户和问卷）。

所以这是有问题的代码：

```
public static void Insert_Resultat_Question_BDD(Question q, double resultat) {
     DataSourceContainer bdd = new DataSourceContainer(); // initializes the Context
     User user = BLL.Users.Get_User_Connecté(); // Gets the connected user
     Questionnaire questionnaire = BLL.Questionnaires.Get_Questionnaire_En_Cours(); // Gets the questionnaire being taken
     UserQuestionnaire user_questionnaire = bdd.UserQuestionnaireSet.FirstOrDefault(i => i.User.id == user.id && i.Questionnaire.id == questionnaire.id); // Get the UserQuestionnaire object for the user and questionnaire above
     UserQuestion uq = new UserQuestion {  score = resultat * q.bareme, bareme = q.bareme, Question = q, UserQuestionnaire = user_questionnaire }; // Creates the object
     bdd.AddToUserQuestionSet(uq); // Add it to the table
     bdd.SaveChanges(); // Save
 } 
```

创建 UserQuestion 时出现错误，因为 UserQuestionnaire = user_questionnaire 语句会启动 InvalidOperationException，因为： **“无法定义两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象。”**

我不明白的是我只使用 1 个上下文！（我分享的代码中的第一行）

有人可以帮我解决这个问题吗？我真的不知道还能做什么：s

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:14:36.550

听起来像是`BLL.Questionnaires.Get_Questionnaire_En_Cours()`使用了自己的 ObjectContext。

# wpf - 是否可以根据某些条件隐藏行？

> ID：10484477
> 
> 赞同：1
> 
> 时间：2012-05-07T15:08:03.470
> 
> 标签：wpf, datagrid, row

我有一个绑定`ObservableCollection`自跟踪实体的 DataGrid

用户可以“删除” DataGrid 中的记录，但这些项目实际上并未从数据库中删除。

如何仅显示未标记为已删除的行？

我正在使用 MVVM 模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:31:26.193

使用[CollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx) .Filter 技术。它非常面向 MVVM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:10:47.287

只需添加一个`DataGrid.RowStyle`，您可以用来`DataTriggers`设置或更改（[代码示例](https://stackoverflow.com/a/5928716/546730)）。`Visibility``Collapsed``Background`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:42:41.320

也许它比你想要的信息多一点，但我遇到了完全相同的情况，并选择将行显示为灰色，或者当它们的状态切换为已删除时显示为“红色”。由于我使用的是 Xceed DataGrid 而您使用的是内置的 Datagrid，因此您触发的属性和样式目标类型可能会有所不同，但基本上是相同的：[https ://stackoverflow.com/a/ 10431650/529618](https://stackoverflow.com/a/10431650/529618)

```
<Style TargetType="{x:Type xcdg:DataRow}" >
    <Style.Triggers>
        <DataTrigger Binding="{Binding Path=ObjectState}" 
                     Value="{x:Static Member=objectmodel:EnumObjectState.Deleted}" >
            <!-- You can do anything in this trigger such as hide, collapse, or disable the row. I chose to apply a custom effect. -->
            <Setter Property="Background" Value="#FFEED5D2"/>
            <Setter Property="ToolTip" Value="This entry will be permanently deleted the next time you save."/>
            <Setter Property="Effect">
                <Setter.Value>
                    <ui:ColourAdjustEffect Saturation="0" Gamma="0.6" BrightnessAdjustment="-0.2" RedAdjustment="0.04" />
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

对于它的外观，请查看下面组合图像中的最后 3 张图像：

![在此处输入图像描述](../Images/3d4838210dbfc6a96cfb992226bf44c5.png)

# c# - 从命令行使用 NMock 和 NUnit 时获取 System.TypeLoadException

> ID：10484480
> 
> 赞同：0
> 
> 时间：2012-05-07T15:08:15.090
> 
> 标签：c#, mono, nunit, nmock

我正在尝试运行一些使用 NMock2 进行模拟的 NUnit 测试。这些测试将作为我们构建过程的一部分从 Makefile 运行。但是测试无法加载。我可以从 Monodevelop 中得到一切工作 - 只是似乎无法从命令行得到它。

这是我的大量简化的源代码：

```
using System;
using NUnit.Framework;
using NMock2;

[TestFixture]
public class DataConversionTests {

    NMock2.Mockery mock;

    [SetUp]
    public void SetUp() {}

    [Test]
    public void CheckKey() {}
} 
```

以下是我通过 Makefile 构建测试的方式：

```
all: test

clean:
    find . -name "*.dll" -delete

LIBS=-lib:/path/to/nmock2/bin/ -r:NMock2.dll -r:NUnit.Framework.dll 

Tests.dll : DataConversionTests.cs
    gmcs -out:Tests.dll -debug -target:library DataConversionTests.cs $(LIBS)

test : Tests.dll
    nunit-console Tests.dll 
```

这是我得到的输出：

```
DataConversionTests.cs(8,24): warning CS0169: The private field `DataConversionTests.mock' is never used
Compilation succeeded - 1 warning(s)
nunit-console Tests.dll
NUnit version 2.4.8
Copyright (C) 2002-2007 Charlie Poole.
Copyright (C) 2002-2004 James W. Newkirk, Michael C. Two, Alexei A. Vorontsov.
Copyright (C) 2000-2002 Philip Craig.
All Rights Reserved.

Runtime Environment - 
   OS Version: Unix 9.8.0.0
  CLR Version: 2.0.50727.1433 ( 2.10.9 (tarball Tue Apr 17 18:59:12 EDT 2012) )

.F
Tests run: 1, Failures: 1, Not run: 0, Time: 0.048 seconds

Test Fixture SetUp Failures:
1) DataConversionTests : System.TypeLoadException : Could not load type 'DataConversionTests' from assembly 'Tests, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'.
at System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x0014a] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/corlib/System.Reflection/MonoMethod.cs:538
at System.Reflection.MonoCMethod.Invoke (BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/corlib/System.Reflection/MonoMethod.cs:541
at System.Reflection.ConstructorInfo.Invoke (System.Object[] parameters) [0x0000e] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/class/corlib/System.Reflection/ConstructorInfo.cs:62
at NUnit.Core.Reflect.Construct (System.Type type) [0x00023] in /private/tmp/monobuild/build/BUILD/mono-2.10.9/mcs/nunit24/NUnitCore/core/Reflect.cs:387

Test Case Failures:
1) DataConversionTests.CheckKey : TestFixtureSetUp failed in DataConversionTests 
```

我显然得到了一些简单的错误，但我只是看不出它是什么。我需要改变什么才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:28:55.233

如果我将它复制`NMock2.dll`到本地目录并且不使用它的路径，那么 nunit 似乎发现它没问题，并且测试通过了。

这是通过注意到将成员变量从类移动到方法中将 nunit 消息更改为无法打开或加载指定文件的内容而提示的。

我想避免复制这个 dll，所以如果有人有更好的解决方案，我会接受。

# javascript - 下划线 js - 重新编号模板呈现的元素属性

> ID：10484484
> 
> 赞同：0
> 
> 时间：2012-05-07T15:08:23.543
> 
> 标签：javascript, jquery, templates, underscore.js

我有一个能够拥有无限数量的用户添加输入的表单。

例如，想象一个带有“添加参考”部分的工作申请。有一个“+”按钮，以及任何已添加的参考旁边的“删除”。

这是一个示例模板

```
<script type="text/template" id="referenceTmpl">
    <div>
        <h2>Reference No. <%= index %></h2><a id="removeRef<%= index %>">Remove</a>
        Name:  <input type="text" name="references[<%= index %>].name" />
        Email: <input type="text" name="references[<%= index %>].email" />
        (...)
    </div>
</script> 
```

当任何“参考”被删除时，我想重新编号其他的。由于表单输入可能已经包含未保存的数据，因此我需要这样做而无需完全重新呈现模板。我想以一种可销售的方式（每个输入不需要太多额外代码的方式）这样做，因为该解决方案可能用于更复杂的应用程序。

如果解决方案可以从中受益，请随意假设我正在使用 jQuery。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:16:38.087

在不侵入代码的情况下做这种事情的最好方法是使用模型（列表）作为所谓的“参考”。

* * *

您应该尝试将 Backbone.js 与 Underscore.js 结合使用： [Backbone.js 文档](http://documentcloud.github.com/backbone/)

有一个 TODO 示例应用程序可以完全满足您的要求：

*   [应用程序代码分解](http://documentcloud.github.com/backbone/docs/todos.html)
*   [示例应用程序](http://documentcloud.github.com/backbone/examples/todos/index.html)

* * *

设置可能需要一些时间，但是当你完成后，你会更快地完成工作。

# lotus-notes - 带有附件的邮件数据库未出现在正文字段中

> ID：10484489
> 
> 赞同：0
> 
> 时间：2012-05-07T15:08:43.713
> 
> 标签：lotus-notes, lotusscript

我有一个邮寄数据库应用程序，我发现偶尔会收到一封电子邮件，其中包含不属于正文字段的附件，因此 rtItem.EmbeddedObjects 无法“看到”。

如果它不在身体中，我如何识别有一个附件，一旦我这样做了，我如何处理它？

我需要确定附件的类型（PDF、JPG、DOC、XLS 等），将其分离，然后根据扩展名进行处理。

下面是对 Body (RTF) 字段和关联的 EmbeddedObjects 进行所有检查的各种 If 语句。这不会捕捉到身体“外部”的附件。

```
Set rtItem = mailDoc.Getfirstitem("Body")
        If ( rtItem.Type = RICHTEXT ) Then
            If Not (IsEmpty(rtItem.EmbeddedObjects)) Then    
                ForAll o In rtItem.EmbeddedObjects
                    If (o.Type = EMBED_ATTACHMENT) Then
                        noAttachment = True                            
                    Else
                        noAttachment = True                            
                    End If                        
                End ForAll
            Else
                noAttachment = True                            
            End if
        Else
            noRTF = True
        End If 
```

我还有一个正文中没有任何内容的文档，但 $File 包含附件名称。你怎么找到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:29:18.893

您需要使用 NotesDocument 的 EmbeddedObjects 属性来获取这些附件。该属性加上所有富文本项的所有 EmbeddedObjects 属性的联合使您可以访问所有附件。请注意，通常您只需要担心 Body 富文本项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:56:48.173

仅供参考，当邮件服务器磁盘空间不足或病毒扫描程序阻止访问附件时，我们遇到了类似的问题

# c# - 在gridview中添加指向所有单元格的链接

> ID：10484499
> 
> 赞同：2
> 
> 时间：2012-05-07T15:09:10.407
> 
> 标签：c#, gridview, cells

我有一个未知数量或行和列的数据源。我正在使用设置为自动生成列的网格视图。我需要将每个单元格中的每个项目变成一个链接按钮以发回进行处理。我知道如何动态地将控件添加到已知的行和单元格，但是当我不知道列名时，这很困难。关于如何产生这些结果的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T19:15:04.603

试试这个作为起点：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        foreach (TableCell cell in e.Row.Cells)
        {
            HyperLink myLink = new HyperLink();
            myLink.NavigateUrl = "somewhere.aspx";
            if (cell.Controls.Count > 0)
            {
                while (cell.Controls.Count > 0)
                {
                    myLink.Controls.Add(cell.Controls[0]);
                }
            }
            else
            {
                myLink.Text = cell.Text;
            }
            cell.Controls.Add(myLink);
        }
    }
} 
```

注意：根据您的标签，我已经用 C# 编写了解决方案，但我注意到您的最后一条评论是在 VB 中。如果您需要我在 VB 中重新发布，请告诉我（在这种情况下，您应该更新标签）。

# eclipse - Eclipse 新项目中的 Maven 集成已签出但无法导航

> ID：10484500
> 
> 赞同：8
> 
> 时间：2012-05-07T15:09:10.383
> 
> 标签：eclipse, maven, m2e

即使我有 m2e，我也在 E​​clipse 中与 maven 作斗争。

我从 CVS 签出了一个 maven 项目，但无法在任何地方导航。如果我尝试*References > Project*，我会弹出一个消息：

> “打开编辑器时出现问题原因：服务不存在”。

`services`是主项目的名称，其中包含子项目。这一切都成功构建，所以我不确定为什么 Eclipse 不起作用。

我怀疑与类路径有关，但不知道如何编辑它，因为它不能从项目的属性中获得。我实际上试图手动创建一个 .classpath 文件，但它没有帮助。

我还将项目转换为 Maven 项目，但这也无济于事。

有任何想法吗？我正在使用 Eclipse JUNO。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T17:07:13.123

我想出了我的问题。我不得不从 CVS 检查项目。然后（这是重要的部分），在 Eclipse 中执行现有项目的 Maven 导入。这创建了 maven “就绪”项目，我可以在其中使用 IDE 的所有功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T11:34:07.340

你是对的。如果您直接从存储库导入，则悬停、链接和打开声明将不起作用。您的解决方案是正确的，尽管另一个更直接的解决方案是使用“文件->新建->其他->Maven->从 SCM 签出 Maven 项目”。如果出现问题，因为您无法选择任何 SCM 类型，请检查[Checkout Maven project from SCM - no connector](https://stackoverflow.com/questions/6729511/checkout-maven-project-from-scm-no-connectors)。如果安装了连接器，您仍然有问题： http: [//forum.springsource.org/showthread.php?102665-SCM-types-not-available-in-Checkout-Maven-Projects-from-SCM](http://forum.springsource.org/showthread.php?102665-SCM-types-not-available-in-Checkout-Maven-Projects-from-SCM)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-05T07:14:28.697

如果您从 svn 签出项目，则签出的项目通常不是 eclipse 项目，这就是为什么 eclipse 的一般功能不适用于相同的原因。

为了实现与 eclipse 阅读器和所有其他快捷方式相同的 eclipse 功能，我们必须将签出的项目转换为 eclipse 项目。

将签出项目转换为 Eclipse 项目的步骤：

1.  右键单击已签出的项目。
2.  指向配置。
3.  单击转换为 Maven 项目。（如果签出的项目是 Maven 项目）

这些步骤会将项目转换为 Maven 项目。

所有的 Eclipse 功能都适用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T15:57:09.297

除了确保将项目配置为 Maven 项目外，您还可以转到项目属性（在包资源管理器中右键单击项目）> 项目引用，并在工作空间中添加所选项目可能引用的项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-12T16:50:24.740

我也有这个问题。看起来像是在工作区中搜索 Eclipse 打开了错误的文件。

我按下 Strl+Shift+H（在层次结构中打开类型），输入类名，然后打开它。该文件在新选项卡中打开，并且所有内容都可以再次导航。

图标的区别在于：

[![不可导航文件的 J 以轮廓字体完成](../Images/b7e5cd86ffbddd4c50a62f44ffad90bf.png)](https://i.stack.imgur.com/AQvMA.png)

# c# - 将数据从 ASP.NET MVC 控制器推送到视图

> ID：10484501
> 
> 赞同：4
> 
> 时间：2012-05-07T15:09:13.027
> 
> 标签：c#, sql-server, ajax, asp.net-mvc, push

我正在将后端构建到一个站点，该站点将在前端具有多个需要实时更新的“小部件”。

现在我只是有一个加载方法，它用数据填充所有小部件，显然在页面加载时。我的问题是如何处理进一步更新的实时方面。

我想过只有多个 ajax 调用，它可以每秒左右查询一次服务，并返回最新数据，但这似乎效率低下。

有没有办法将数据从控制器“**推送”到视图？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:13:50.297

也许你可以看看这个项目：[https ://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

> ASP.NET SignalR 是一个面向 ASP.NET 开发人员的新库，它可以非常简单地将实时 Web 功能添加到您的应用程序中。什么是“实时网络”功能？它是让您的服务器端代码实时将内容推送到连接的客户端的能力。
> 
> SignalR 还提供了一个非常简单的高级 API，用于在 ASP.NET 应用程序中执行服务器到客户端 RPC（从服务器端 .NET 代码调用客户端浏览器中的 JavaScript 函数），以及添加有用的连接管理挂钩，例如连接/断开事件、分组连接、授权。

（摘自[http://signalr.net/](http://signalr.net/)）

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:27:30.960

我认为你最好的选择是定期轮询服务器：

```
$(document).ready(function() {

    setTimeout("getUpdate()", 30000);

    function getUpdate()
    {
        // Make an ajax call here
    }
}); 
```

这将要求每 30 秒更新一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:19:46.197

您也可以使用 Web Sockets，如果它在支持 HTML5 的浏览器中运行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:20:52.243

这取决于前端数据需要多久更新一次。大多数页面不需要不断更新。我不知道是否存在“最佳实践”阈值，但我认为一个好的起点是使用 Ajax 进行 15-20 秒更新。让您的 Ajax 调用快速而精简 - 如果没有更新，也许只是返回空白。如果您需要比这更快的更新，请查看名为`long polling`. 长轮询基本上是您触发对服务器的 ajax 调用的地方，并且连接处于打开状态，直到有数据要发送。长轮询将占用更多服务器资源，因为您将在等待数据准备好时打开连接和运行线程。使用 ASP.NET，您还必须担心杀死长轮询线程，因为默认情况下，当浏览器关闭连接时，这些线程不会被杀死（例如，如果有人离开页面。）

# actionscript-3 - ActionScript 3 和 mxml

> ID：10484502
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:09:15.337
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder, mxml

我的问题是：
我想将 mxml 用于视觉元素...我想以图形方式设置组件并在 as 类中进行编程，因为这对我来说很容易...怎么做？？？我有两个类：一个 as 和一个 mxml ......这是我的代码：

```
public class chat extends Application{
    private var nc:NetConnection = null;
    public var connect:Button;      
    public var status:Text;

    public function VideoChat(){
        addEventListener(FlexEvent.APPLICATION_COMPLETE, mainInit);
    }

    private function mainInit(event:FlexEvent):void{            
        status.text = "Status quo";

        connect.addEventListener(MouseEvent.CLICK, doConnect);
    } 
```

和 mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           minWidth="955" minHeight="600" backgroundColor="#FBF8F8"
           preloaderChromeColor="#CC3535" 
           >

    <mx:Button x="77" y="547" height="19" label="Connect" id="connect"/>
    <mx:UIComponent id="videoReceiveContainer" x="77" y="52" width="500" height="400"/>
    <mx:Button x="507" y="547" label="Play" id="play"/>
    <mx:Text id="status" x="77" y="460" width="501" height="58"/>
    <mx:Button x="297" y="547" label="Publish" id="publish"/>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:07:15.020

首先，您的 AS3 代码有点古怪。

```
public class VideoChat extends Application{
    private var nc:NetConnection = null;
    public var connect:Button;      
    public var status:Text;

    public function VideoChat(){
        addEventListener(FlexEvent.APPLICATION_COMPLETE, mainInit);
    }

    private function mainInit(event:FlexEvent):void{            
        status.text = "Status quo";

        connect.addEventListener(MouseEvent.CLICK, doConnect);
    }
} 
```

类的名称必须与构造函数的名称相匹配。

二、MXML：

```
<?xml version="1.0" encoding="utf-8"?>
<local:VideoChat xmlns:fx="http://ns.adobe.com/mxml/2009"
                 xmlns:s="library://ns.adobe.com/flex/spark"
                 xmlns:mx="library://ns.adobe.com/flex/mx"
                 xmlns:local="*"
                 minWidth="955" minHeight="600" backgroundColor="#FBF8F8"
                 preloaderChromeColor="#CC3535" 
                 >

    <mx:Button x="77" y="547" height="19" label="Connect" id="connect"/>
    <mx:UIComponent id="videoReceiveContainer" x="77" y="52" width="500" height="400"/>
    <mx:Button x="507" y="547" label="Play" id="play"/>
    <mx:Text id="status" x="77" y="460" width="501" height="58"/>
    <mx:Button x="297" y="547" label="Publish" id="publish"/>
</local:VideoChat> 
```

如果您注意到，我定义了 XML 命名空间 'local' `xmlns:local="*"`。并且`s:Application`标签已替换为`local:VideoChat`.

最后，您在评论中询问了加载页面的路径。应该是`...bin-debug/name.html`。此 HTML 文件是一个包装器，用于显示项目的已编译 SWF。

# c++ - 如何将变量插入 CreateDirectory()

> ID：10484505
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:09:19.503
> 
> 标签：c++, create-directory

有没有办法将字符串变量插入 CreateDirectory？我希望它使用用户输入的名称在 C: 中创建一个目录。当我做类似的事情时

```
CreateDirectory ("C:\\" << newname, NULL); 
```

我的编译器给了我错误“'C:\ << newname'中的运算符<<不匹配”

这是我的代码。问题出在 void newgame() 中。

```
#include <iostream>
#include <fstream>
#include <string>
#include <time.h>
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <mmsystem.h>
#include <conio.h>

using namespace std;

int a;
string newname;

string savepath;

struct game
{
    string name;
    int checkpoint;
    int level;
};

void wait( time_t delay )
{
time_t timer0, timer1;
time( &timer0 );
do {
time( &timer1 );
} while (( timer1 - timer0 ) < delay );
}

void error()
{
    cout << "\nError, bad input." << endl;
}
void options()
{
    cout << "No options are currently implemented." << endl;
}
void load()
{
    cout << "Load a Game:\n";
}
//This is where I'm talking about.
void newgame()
{
    cout << "Name your Game:\n";
    getline(cin,newname);
    cin.get();
    game g1;
    g1.name=newname;
    //I want it to create a dir in C: with the name the user has entered.
    //How can I do it?
    CreateDirectory ("C:\\" << newname, NULL);

}
//This isn't the whole piece of code, just most of it, I can post the rest if needed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:11:33.153

```
CreateDirectory (("C:\\" + newname).c_str(), NULL); 
```

您可以将`std::string`s 与`operator+`. 或者，在您的情况下，您也可以将 C 字符串连接到`std::string`using `operator+`。结果是一个`std::string`. （不过要小心——你不能用这种方式将两个 C 字符串连接在一起。）

但是，我怀疑这`CreateDirectory`需要一个 C 字符串，而不是 a `std::string`，因此您需要将其与`.c_str()`成员一起转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:12:29.453

要使用流插入，您需要首先创建一个流：

```
std::ostringstream buffer;

buffer << "c:\\" << newname;

CreateDirectory(buffer.str().c_str()); 
```

# asp.net - 下拉菜单作为菜单控件asp.net

> ID：10484506
> 
> 赞同：0
> 
> 时间：2012-05-07T15:09:20.113
> 
> 标签：asp.net, controls, drop-down-menu, aspmenu-control

我有一个简单的菜单控件这里是代码

```
<asp:menu id="mainMenu" runat="server" orientation="Horizontal" maximumdynamicdisplaylevels="0" skiplinktext="    " staticdisplaylevels="2" cssclass="menua" staticselectedstyle-forecolor="DarkBlue" staticselectedstyle-font-underline="true" onmenuitemclick="mainMenu_MenuItemClick">
 <Items>
     <asp:MenuItem Text="Management" Value="mTabManagement"  NavigateUrl="TabManagement.aspx">
         <asp:MenuItem  Text="Auditing" Value="mAuditing" NavigateUrl=""></asp:MenuItem>
         <asp:MenuItem Text="Billing" Value="mBilling" NavigateUrl=""></asp:MenuItem>
         <asp:MenuItem Text="Reporting/Services" Value="mServices" NavigateUrl=""></asp:MenuItem>
     </asp:MenuItem>
     <asp:MenuItem Text="Payment Plan)" Value="mPayment" NavigateUrl="PaymentPlan.aspx"></asp:MenuItem>
     <asp:MenuItem Text="Advocate" Value="mTabAdvocate" NavigateUrl="TabAdvocate.aspx"></asp:MenuItem>
     <asp:MenuItem Text="Pay" Value="mPay" NavigateUrl="HowItWorks.aspx"></asp:MenuItem>
     <asp:MenuItem Text="Parking Ticket Protection" Value="mProtection" NavigateUrl="Security.aspx"></asp:MenuItem>   
 </Items>         
 </asp:menu> 
```

我该怎么做

```
 <asp:MenuItem Text="Management" Value="mTabManagement"/> 
```

像下拉列表一样工作

# php - Symfony2 从存储库中保存 xml 文件

> ID：10484513
> 
> 赞同：0
> 
> 时间：2012-05-07T15:09:45.913
> 
> 标签：php, xml, symfony

我正在使用 Symfony2 开发应用程序。我遇到的问题是，当从页面控制器调用的存储库中执行一个函数时，该函数应该保存一个 XML 文件，但它没有，我不知道为什么。这是存储库中的功能：

```
public function IdaztekoaSortu($Hitzak, $Coref)
  {
    $EmaitzaXML = new \DOMDocument("1.0");
    header("Content-Type: text/plain");
    // erroa sortu
    $erroa = $EmaitzaXML->createElement("Idaztekoa");
    $EmaitzaXML->appendChild($erroa);
    $EmaitzaXML->formatOutput = true;

    $xmlHitzakDok = new \DOMDocument();
    $xmlMarkDok = new \DOMDocument();
    if($xmlHitzakDok->load($Hitzak) === FALSE){die('Errorea hitzen xml-a kargatzean');}
    if($xmlMarkDok->load($Coref) === FALSE){die('Errorea markagarrien xml-a kargatzean');}
    $xPath_Hitzak = new DOMXPath($xmlHitzakDok);
    $xPath_Mark = new DOMXPath($xmlMarkDok);
    $xPath = new DOMXPath($xmlHitzakDok);

    $Hurrengo_HitzaID = "word_1";
    $Hurrengo_Hitza_index = 1;

    foreach ($xPath_Hitzak->query('//words/word') AS $Hitza)
    {
      $HitzaID = $Hitza->getAttribute('id');

    if ($HitzaID == $Hurrengo_HitzaID)
    {
      $Handiena_MarkID = 0;  
          $Handiena_Hitzarentzat = -1;
          $Hitza_Index = substr($HitzaID , 5);

           foreach ($xPath_Mark->query('//markables/markable') AS $Markagarria)
               {
             $MarkID = $Markagarria->getAttribute('id');
             $Zatiak = explode("..", $Markagarria->getAttribute('span'));
             $MarkSpan1 = substr($Zatiak[0],5);
                 $MarkSpan2 = substr($Zatiak[1],5);
             $MarkSpan1ID = "word_" . $MarkSpan1;

            if ($MarkSpan1ID == $HitzaID && $MarkSpan2-$MarkSpan1 > $Handiena_Hitzarentzat)
            {
              $Handiena_MarkID = $Markagarria->getAttribute('id');                  
                      $Handiena_Hitzarentzat = $MarkSpan2-$MarkSpan1;
              $Handiena_MarkSpan1 = $MarkSpan1;
              $Handiena_MarkSpan2 = $MarkSpan2; 
            }
           }
               if($Handiena_Hitzarentzat == -1)
               {//Ez daude inongo markagarritan
         $x = $Hitza_Index+1;
             $Hurrengo_HitzaID = "word_" . $x;
         // umea sortu
         $elem = $EmaitzaXML->createElement("testua");
         $erroa->appendChild($elem);
         // testu nodoa sortu
         $testua = $EmaitzaXML->createTextNode($Hitza->nodeValue. " ");
         $elem->appendChild($testua);
         // atributu nodoa sortu
         $Mark_id = $EmaitzaXML->createAttribute("Mark_id");
         $elem->appendChild($Mark_id);
         // atributu balio nodoa sortu
         $gauzabalioa = $EmaitzaXML->createTextNode("null");
         $Mark_id->appendChild($gauzabalioa);
               }
           else
           {//Markagarri batean daude
         $y = $Handiena_MarkSpan2+1;
             $Hurrengo_HitzaID =  "word_" . $y;
         // umea sortu
         $elem = $EmaitzaXML->createElement("testua");
         $erroa->appendChild($elem);
         // testu nodoa sortu
         for ($i = $Handiena_MarkSpan1; $i <= $Handiena_MarkSpan2; $i++)
         {
                   foreach ($xPath->query('//words/word') AS $Hitz)
                   {
                     $ID = $Hitz->getAttribute('id');
             $ID_Index = substr($ID , 5);
                if ($ID_Index == $i)
                {
                  $testua = $EmaitzaXML->createTextNode($Hitz->nodeValue . " ");
                  $elem->appendChild($testua);
            }
           }
         }
           // atributu nodoa sortu
           $Mark_id = $EmaitzaXML->createAttribute("Mark_id");
           $elem->appendChild($Mark_id);
           // atributu balio nodoa sortu
           $gauzabalioa = $EmaitzaXML->createTextNode($Handiena_MarkID);
           $Mark_id->appendChild($gauzabalioa);
           // atributu nodoa sortu
           $Hitz_kop = $EmaitzaXML->createAttribute("Hitz_kop");
           $elem->appendChild($Hitz_kop);
           // atributu balio nodoa sortu
           $hitzkopbalioa = $EmaitzaXML->createTextNode($Handiena_MarkSpan2-$Handiena_MarkSpan1+1);
           $Hitz_kop->appendChild($hitzkopbalioa);

                   // atributu nodoa sortu
                   $MSpan1 = $EmaitzaXML->createAttribute("MarkSpan1");
                   $elem->appendChild($MSpan1);
                   // atributu balio nodoa sortu
                   $MSpan1balioa = $EmaitzaXML->createTextNode($Handiena_MarkSpan1);
                   $MSpan1->appendChild($MSpan1balioa);
                   // atributu nodoa sortu
                   $MSpan2 = $EmaitzaXML->createAttribute("MarkSpan2");
                   $elem->appendChild($MSpan2);
                   // atributu balio nodoa sortu
                   $MSpan2balioa = $EmaitzaXML->createTextNode($Handiena_MarkSpan2);
                   $MSpan2->appendChild($MSpan2balioa);      
           }
          }
    }
    // zuhaitza fitxategian gorde
    $EmaitzaXML->save('Idat.xml');
  } 
```

如您所见，XML 树应该保存在 Idat.xml 中，但它不起作用，我不知道为什么。任何想法？我猜 Idat.xml 将保存在 Symfony/web 中，据我所知，我有权在此文件夹中写入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:17:51.753

您需要使用完整路径。如何获取 /web 文件夹的路径，请[在此处阅读](http://www.craftitonline.com/2011/07/symfony2-base-path-and-root-path/)

# cuda - 如何从驱动程序 API 使用运行时 API 创建的上下文

> ID：10484518
> 
> 赞同：1
> 
> 时间：2012-05-07T15:10:09.487
> 
> 标签：cuda, cuda-context

我链接到的库使用 cuda 运行时 API。因此，它在第一次调用 cuda 函数时隐式创建了一个 cuda 上下文。

我的代码（使用库的）应该使用驱动程序 API。现在，我怎样才能让（运行时和驱动程序 API）同时工作？

库在库初始化时调用 cudaSetDevice 函数。（我无法改变这一点）。

我可以以某种方式确定上下文并告诉驱动程序 API 使用该上下文吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:37:52.937

`cuCtxGetCurrent()`获取当前上下文（可能由运行时创建）

# eclipse - 如何定义我自己的“动态 Web 项目”向导？

> ID：10484528
> 
> 赞同：1
> 
> 时间：2012-05-07T15:10:53.317
> 
> 标签：eclipse, wizard

Eclipse Indigo 有一个“Dynamic Web Project”向导（File->New ->Other->Web->Dynamic Web Project）

我不熟悉插件开发，但我想创建一个像“动态Web项目”这样的向导？谁能告诉我该怎么做？有没有分步教程？更详细更投注者。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:29:43.853

如果你想“创建一个像“Dynamic Web Project”这样的向导”，Vogella 的教程不会有太大帮助。以及任何其他[教程](http://www.eclipsepluginsite.com/dialogs-wizards-2.html)。哦，是的，他们将有助于理解这个过程。以及如何制作页面。但是，在创建整个真正的向导时，示例原始向导对您没有实际用途。

您需要从插件视图中获取“动态 Web 项目”向导源。您**很**可能还没有导入这些资源。做到这一点（文件导入插件开发 - 插件和片段......并设置从存储库导入！）。之后将命名项目的源代码复制到您的项目中，更改其“外部”名称，因为它显示它自己并尝试它是否运行。让它运行。

之后，通过小步骤使其适应您的需求，检查它是否继续运行并执行您想要的操作。

不要试图理解你在那里看到的一切，而是试着理解你正在改变什么。

随意问 - 我刚刚完成了相同的任务（使用另一个向导），我还记得这个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:19:04.627

这是关于在 Eclipse 中创建向导的一个很好的教程： [http ://www.vogella.com/articles/EclipseWizards/article.html](http://www.vogella.com/articles/EclipseWizards/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:40:30.033

转到链接：

[http://www.vogella.com/articles/EclipsePlugIn/article.html](http://www.vogella.com/articles/EclipsePlugIn/article.html)

# mysql - DELETE FROM `table` AS `alias` ... WHERE `alias`.`column` ... 为什么语法错误？

> ID：10484532
> 
> 赞同：31
> 
> 时间：2012-05-07T15:11:13.323
> 
> 标签：mysql, sql, syntax, alias

我用 MySQL 试过这个：

```
DELETE FROM `contact_hostcommands_relation` AS `ContactHostCommand` WHERE (`ContactHostCommand`.`chr_id` = 999999) LIMIT 1 
```

我明白了：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE (`ContactHostCommand`.`chr_id` = 999999) LIMIT 1' at line 1 
```

*注意：*此查询是自动生成的，条件基于表别名。

为什么我会收到此错误？

有没有办法在 where 子句中使用表别名？

这是 MySQL 特有的吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-11-14T17:37:56.603

@Matus 和 @CeesTimmerman 所说的关于 MSSQL 的内容也适用于 MySQL 5.1.73：

```
delete <alias> from <table> <alias> where <alias>.<field>... 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-02T07:12:53.430

您可以像这样使用 SQL：

```
DELETE FROM ContactHostCommand 
USING `contact_hostcommands_relation` AS ContactHostCommand 
WHERE (ContactHostCommand.`chr_id` = 999999) 
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-07T15:14:49.230

您不能`AS`在`DELETE`MySQL 的子句中使用：

```
DELETE FROM `contact_hostcommands_relation` WHERE (`chr_id` = 999999) LIMIT 1 
```

# iphone - 进入后台模式时 AVPlayerLayer 停止播放

> ID：10484536
> 
> 赞同：3
> 
> 时间：2012-05-07T15:11:39.360
> 
> 标签：iphone, objective-c

我设置 AVPlayerLayer ：

```
 audioPlayer = [[AVPlayer alloc]initWithURL:[NSURL fileURLWithPath:fileName]];
        avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:audioPlayer];
        [avPlayerLayer setFrame:self.view.bounds];
        [[self.view layer] addSublayer:avPlayerLayer];
        [audioPlayer play]; 
```

在 AppDelegete 我添加：

```
[[AVAudioSession sharedInstance] setDelegate:self];    
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
[[AVAudioSession sharedInstance] setActive: YES error: nil]; 
```

现在在 UIViewController 类中我添加：

```
-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (void)remoteControlReceivedWithEvent:(UIEvent *)event {
    switch (event.subtype) {
        case UIEventSubtypeRemoteControlTogglePlayPause:
            if (audioPlayer.rate == 0.0) {
                [avPlayerLayer.player play];
            } else {
                [avPlayerLayer.player pause];
            }
            NSLog(@"4");
            break;
        case UIEventSubtypeRemoteControlPlay:
            [avPlayerLayer.player play];
            break;
        case UIEventSubtypeRemoteControlPause:
            [avPlayerLayer.player pause];
            NSLog(@"3");
            break;
        case UIEventSubtypeRemoteControlNextTrack:
            [self didPressNextSong:nil];
            NSLog(@"2");
            break;
        case UIEventSubtypeRemoteControlPreviousTrack:
            [self didPressLastSong:nil];
            NSLog(@"1");
            break;
        default:
            break;
    }
} 
```

现在的问题是，当我进入后台模式时，歌曲停止播放，但是当我按下遥控器中的播放按钮（当我双击主页按钮时弹出的菜单）时，歌曲继续从它停止的地方播放。

知道为什么我有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:36:19.100

请参阅此解决方案：

[如何让我的 AVPlayer 在应用程序处于后台时播放？](https://stackoverflow.com/questions/4771105/how-do-i-get-my-avplayer-to-play-while-app-is-in-background)

关键在于 info plist 中的 UIBackgroundModes。

# java - 如何安全地取消 TimerTask？

> ID：10484538
> 
> 赞同：3
> 
> 时间：2012-05-07T15:11:45.360
> 
> 标签：java, android

我一直在开发 Android 应用程序，我使用`Timer`和`TimerTask`对象在特定时间后执行一项任务。但是有一个问题 - 有时我需要取消 timertask，但如果我这样做，Android 会导致`IllegalStateException`. 如何安全地取消任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:14:38.217

你不能重复使用`TimerTask`s。

你得到的原因`IllegalStateException`是（很可能）因为你试图安排一个以前被取消的任务。

为了正确地做到这一点，即避免`IllegalStateException`，您需要在`TimerTask`每次要安排它时创建一个新的。

# ruby-on-rails-3 - 如何在 Rails 视图中呈现 JSON

> ID：10484542
> 
> 赞同：0
> 
> 时间：2012-05-07T15:12:10.797
> 
> 标签：ruby-on-rails-3, json

我尝试了以下示例的解决方案：[在 Rails 中，如何使用视图呈现 JSON？](https://stackoverflow.com/questions/2088280/in-rails-how-do-you-render-json-using-a-view)

但我的问题是数据库已经保存了一个 JSON 字符串，我提取了 json 字符串，然后我应该能够在视图中显示 JSON 文件。

我使用它是因为 android 平板电脑应该能够访问相同的 url，但根据其设置（通过 POST 发送）应该显示不同的 JSON 文件，然后 android 平板电脑获取 json 并使用它来配置一些选项.

所以我已经有一个完整的工作 json 文件，我正在寻找一种在视图中显示它的方法（不呈现 html 标签和其他东西）。我尝试了以下方法（是的，我添加了 respond_to :json）：

```
# def show_json (@config is the record, @config.json_config is the actual json configuration file
@config = event.et_relationships.where(terminal_id: terminal).first
respond_to do |format|
   format.json
end 
```

然后我的观点我有

```
#show_json.json.erb
<%= @config.config_json %> 
```

然后我看到的 HTML（没有给出错误）

```
<html><head><style type="text/css"></style></head><body></body></html> 
```

谢谢！

## **编辑**

我正在使用导轨 3.2.3

这是我的路线（仅相关部分）

```
match '/events/config', to: "events#show_json", as: :show_json
resources :events do
    member do
      get :select_item
      get :category
    end
  end 
```

然后也是控制器（部分）

```
respond_to :html, :json, :js
def show_json
    #terminal_id = params["mac"]
    terminal_id = "3D:3D:3D:3D:3D:3D"
    event = current_user.events.where("date(endtime) > ? AND date(starttime) < ?", Time.now.to_s, Time.now.to_s).first
    if event.nil?
      # Nothing got returned so we use the default event
      event = current_user.events.where('"default" = ?', true).first
    end
    logger.info "MAC: #{terminal_id}"
    terminal = current_user.terminals.where(serial: terminal_id).first
    logger.info "Terminal: #{terminal.attributes.inspect}"
    logger.info "#{event.attributes.inspect}"
    @config = event.et_relationships.where(terminal_id: terminal).first
    logger.info "CONFIG #{@config[:config_json]}"

    respond_to do |format|
      format.json { render json: @config[:config_json] }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:16:44.140

使用`render`：

```
@config = event.et_relationships.where(terminal_id: terminal).first
respond_to do |format|
   format.json { render json: @config }
end 
```

然后你有 path `/:model/:action.json`。

# asp.net-mvc - Masstransit 未处理正确的值

> ID：10484544
> 
> 赞同：1
> 
> 时间：2012-05-07T15:12:17.893
> 
> 标签：asp.net-mvc, masstransit

我正在通过一个简单的示例使用 MassTransit，但我不知道我做错了什么，因为我没有收到正确的数据。我有一个简单的 asp.net-mvc 应用程序，在 HomeController 中有以下代码

```
public class TweetCreatedCommand : Command
{
    public readonly string Message;
    public readonly DateTime Timestamp;
    public readonly Guid TweetId;
    public readonly string Who;

    public TweetCreatedCommand(Guid tweetId, string message, DateTime timeStamp, string who)
    {
        TweetId = tweetId;
        Message = message;
        Timestamp = timeStamp;
        Who = who;
    }
}

public ActionResult Index()
    {
        TweetCreatedCommand data;

        Bus.Initialize(sbc =>
        {
            sbc.UseMsmq();
            sbc.VerifyMsmqConfiguration();
            sbc.UseMulticastSubscriptionClient();
            sbc.ReceiveFrom("msmq://localhost/test_queue");
            sbc.Subscribe(subs =>
            {
                subs.Handler<TweetCreatedCommand>(msg => data = new TweetCreatedCommand(msg.TweetId, msg.Message,msg.Timestamp,msg.Who));
            });
        });

        Bus.Instance.Publish(new TweetCreatedCommand(Guid.NewGuid(),"foo!",DateTime.Now,"CDA"));

                    ViewData.Model = data;

        return View();
    } 
```

如果我调试这段代码，我可以看到 TweetCreatedCommand 是如何发布的，并且 MSMQ 队列中的数据正常，但是当处理程序接收到数据时：TweetCreatedCommand.TweetId 是：00000000-0000-0000-0000-000000000000 应该是其他东西 TweetCreatedCommand.Message 是空的，它应该是“foo！” TweetCreatedCommand.TimeStamp 是 01/01/01 谁为空，应该是“CDA”

怎么了？？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:17:06.663

MassTransit 的默认序列化仅适用于属性。尝试将您的只读字段更改为属性，序列化程序应正确填充数据。如果需要只读字段，请更改为`BinarySerializer`（默认为 JSON）。

# xml - Tally ERP 9 XML XTTP 数据导出

> ID：10484545
> 
> 赞同：2
> 
> 时间：2012-05-07T15:12:27.903
> 
> 标签：xml, export, xmlhttprequest

我试图通过 localhost:9000 通过 XML HTTP 从 Tally ERP 9 导出数据。我正在获取带有 ASCII 数据的 XML 文件。这会导致许多带有“？”的符号。像卢比符号和欧元符号。有没有办法以 Unicode 格式导出数据？使用的 POC 是

```
import httplib
c=httplib.HTTPConnection('localhost:9000')
headers = {"Content-type": "text/xml;charset=UTF-8", "Accept": "text/xml"}
params = """<ENVELOPE>
        <HEADER>
        <TALLYREQUEST>Export Data</TALLYREQUEST>
        </HEADER>
        <BODY>
        <EXPORTDATA>
        <REQUESTDESC>
        <REPORTNAME>List of Accounts</REPORTNAME>
        <STATICVARIABLES>
        <SVEXPORTFORMAT>$$SysName:XML</SVEXPORTFORMAT>
        <ACCOUNTTYPE>Ledgers</ACCOUNTTYPE>
        <ENCODINGTYPE>UNICODE</ENCODINGTYPE>
        </STATICVARIABLES>
        </REQUESTDESC>
        </EXPORTDATA>
        </BODY>
        </ENVELOPE>
        """

c.request("POST", "/", params, headers)
r=c.getresponse().read()

fl=file("d:/xtemp.xml","w")
fl.write(r)
fl.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-24T18:01:44.573

要从 Tally ERP 9 检索 UNICODE 数据，您必须将以下标头添加到 HTTP POST 请求。

**句法**

XMLHttpRequest.setRequestHeader（标头，值）

**以 UNICODE 格式导出 Tally 数据的 HTTP 标头**

XMLHttpRequest.setRequestHeader('UNICODE', 'YES')

XMLHttpRequest.setRequestHeader('Content-Type', 'text/xml; charset=unicode')

知识库：[https ://www.rtslink.com](https://www.rtslink.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:47:20.300

这似乎更像是您的系统字体而不是 Tally 的问题。

确保您安装了 Rupakara 字体，该字体具有卢比符号的 unicode 翻译。在这里得到它[。](http://www.evertype.com/fonts/rupakara/)

# ruby-on-rails - HAML 中的缩进问题-“文档的其余部分使用 2 个空格缩进”

> ID：10484546
> 
> 赞同：4
> 
> 时间：2012-05-07T15:12:29.063
> 
> 标签：ruby-on-rails, haml, indentation

我会在 Github Gist 或使用 Tinkerbin 中发布这个，但是当我复制和粘贴我的 HAML 时，缩进看起来很糟糕。

错误消息是：Inconsistent indentation: "\t\t" was used for indentation，但文档的其余部分使用 2 个空格缩进。

我发布了一个 imgur 来告诉你错误发生在哪里，浏览器告诉我第 8 行，正如你在照片中看到的那样。

请耐心等待，这可能是一个简单的解决方法，但我对 HAML 很陌生。

![haml缩进问题](../Images/d5681fc6ba4af9a0657d173940236ce1.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T09:27:55.067

如果您使用的是 SublimeText，请将以下内容添加到 Packages/User/Preferences.sublime-settings

```
"tab_size": 2,
"translate_tabs_to_spaces": true 
```

...然后重新粘贴代码，所有选项卡都将更改为空格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-08T05:23:01.890

我认为您应该使用空格或制表符，或者您可以选择全部并在完成代码后转换为空格，[SUBLIME](http://www.sublimetext.com/)文本编辑器最适合它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-18T03:17:07.907

如果您使用的是 Ruby on Rails，请确保缩进与视图/布局中的 application.html.haml 一致

# xamarin.ios - 在单点触控中使用 CoreGraphics 创建按钮

> ID：10484549
> 
> 赞同：2
> 
> 时间：2012-05-07T15:12:31.887
> 
> 标签：xamarin.ios, core-graphics

我正在尝试在 monotouch 上创建一个带有 CoreGraphics 的按钮。我不知道如何在按下按钮时更改按钮颜色。我尝试覆盖`TouchesBegan`and`TouchesEnded`方法，但我不知道如何更改颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T02:41:36.387

您可以通过两种方式处理背景颜色。您可以简单地设置 BackgroundColor 属性。这应该会自动更改颜色。或者，如果您将颜色存储为用于 FillRect 的私有变量，则需要调用 SetNeedsDisplay 来强制调用 Draw。

```
public override void TouchesBegan (MonoTouch.Foundation.NSSet touches, UIEvent evt)
{
    base.TouchesBegan (touches, evt);
    this.BackgroundColor = UIColor.Green;
    backColor2 = UIColor.Yellow;
    this.SetNeedsDisplay ();
}

public override void TouchesEnded (MonoTouch.Foundation.NSSet touches, UIEvent evt)
{
    base.TouchesEnded (touches, evt);
    this.BackgroundColor = UIColor.Red;
    backColor2 = UIColor.Blue;
    this.SetNeedsDisplay ();
}

public override void Draw (RectangleF rect)
{
    base.Draw (rect);

    using (CGContext context = UIGraphics.GetCurrentContext ()) {
        RectangleF rect2 = this.Bounds;
        rect2.X += 10;
        rect2.Y += 5;
        rect2.Width -= 20;
        rect2.Height -= 10;

        backColor2.SetFill ();
        context.FillRect (rect2);
    }
} 
```

# .net - 解析 INI 文件

> ID：10484550
> 
> 赞同：0
> 
> 时间：2012-05-07T15:12:32.090
> 
> 标签：.net, visual-studio, visual-studio-2008, c++-cli

我在 Visual Studio 2008 中使用 C++/CLI 构建程序，我一直在尝试将默认用户目录设置保存在 txt 文件中。到目前为止，我设法保存它，使其在 txt 文件中看起来像这样。

```
Input Directory=C:\Input
Output Directory=C:\Output 
```

问题是，我的程序如何检测“输入目录=”这个词并且只接受它之后的词？

有没有办法在文本文件中搜索特定单词并在 C++/CLI 中替换它？因此，例如，我可以搜索“C:\Input”并将其替换为“D:\Input”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:17:42.183

您可以通过多种方式读取文件。使用 c++\cli 的好处之一是您可以使用非常 convent .net 接口。

所以你可以使用[File::ReadAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)然后扫描每一行的字符串“输入目录”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:30:25.083

我想这是一种类似 INI 的语法，但没有部分，要解析它，请执行以下操作。

在您将用于解析文件的类的构造函数（例如）中：

*   创建一个`Dictionary<string, string>`，您将在那里保留解析的值（为键指定一个不区分大小写的比较器）。
*   阅读文件的每一行，跳过空白行（如果你想支持它，也可以跳过注释行）。
*   在每个字符串行中搜索第一个“=”字符。左边的部分是选项的名称，右边的​​部分是值。
*   将它们保存在字典中。

在`GetValue()`方法中这样做：

*   在字典中搜索给定的键并返回它。
*   如果没有具有给定值的任何键，则只需返回默认值。

这是一个简单 INI 解析器的可能实现（如果您不需要节名称，只需为其传递一个空字符串）。

```
using namespace System;
using namespace System::Text;
using namespace System::IO;
using namespace System::Globalization;
using namespace System::Collections::Generic;

namespace Testy
{
    ref class IniParser
    {
    public:
        IniParser()
        {
            _values = gcnew Dictionary<String^, Dictionary<String^, String^>^>(
                StringComparer::InvariantCultureIgnoreCase);
        }

        IniParser(String^ path) 
        {
            _values = gcnew Dictionary<String^, Dictionary<String^, String^>^>(
                StringComparer::InvariantCultureIgnoreCase);

            Load(path);
        }

        void Load(String^ path)
        {
            String^ currentSection = "";
            for each (String^ line in File::ReadAllLines(path))
            {
                if (String::IsNullOrWhiteSpace(line))
                    continue;

                if (line->StartsWith(L";", StringComparison::InvariantCultureIgnoreCase))
                    continue;

                if (line->StartsWith(L"[", StringComparison::InvariantCultureIgnoreCase) && line->EndsWith(L"]", StringComparison::InvariantCultureIgnoreCase))
                {
                    String^ sectionName = line->Substring(1, line->Length - 2);
                    if (String::IsNullOrWhiteSpace(sectionName))
                        continue;

                    currentSection = sectionName;
                }

                array<String^>^ parts = line->Split(gcnew array<wchar_t>(2) { '=' }, 2);
                if (parts->Length == 1)
                    SetString(currentSection, parts[0]->Trim(), "");
                else
                    SetString(currentSection, parts[0]->Trim(), parts[1]->Trim());
            }
        }

        bool ContainsSection(String^ sectionName)
        {
            return _values->ContainsKey(sectionName);
        }

        bool ContainsValue(String^ sectionName, String^ valueName)
        {
            Dictionary<String^, String^>^ values = GetSection(sectionName);
            if (values == nullptr)
                return false;

            return values->ContainsKey(valueName);
        }

        void Clear()
        {
            _values->Clear();
        }

        void SetString(String^ sectionName, String^ valueName, String^ value)
        {
            Dictionary<String^, String^>^ values = GetSection(sectionName);
            if (values == nullptr)
            {
                values = gcnew Dictionary<String^, String^>(StringComparer::InvariantCultureIgnoreCase);
                _values->Add(sectionName, values);
            }

            if (values->ContainsKey(valueName))
                values[valueName] = value;
            else
                values->Add(valueName, value);
        }

        String^ GetString(String^ sectionName, String^ valueName, String^ defaultValue)
        {
            Dictionary<String^, String^>^ values = GetSection(sectionName);
            if (values == nullptr)
                return defaultValue;

            if (values->ContainsKey(valueName))
                return values[valueName];

            return defaultValue;
        }

    private:
        Dictionary<String^, Dictionary<String^, String^>^>^ _values;

        Dictionary<String^, String^>^ GetSection(String^ sectionName)
        {
            if (_values->ContainsKey(sectionName))
                return _values[sectionName];

            return nullptr;
        }
    };
} 
```

您应该添加错误检查，并且可以省略不需要的内容（例如部分和注释）。要“读取”不同的值类型，您可以实现更多`GetXYZ()`方法来将结果解析`GetString()`为所需的值（`float`例如 a ）。

另一种解决方案可能是......简单地导入本机函数来解析 INI。他们工作得很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:06:13.947

在为寻找简单的解决方案苦苦挣扎了一整天之后，我决定按照@Hans Passant 的建议省略“输入目录=”，并通过将第一行作为输入和第二行作为输出文件夹设置来做一个粗略的解决方法，使用技术类似[这样](http://forums.codeguru.com/showthread.php?t=506988)。

感谢所有回复的人。

# php - php。如果使用函数 parse_ini_string() 解析空数组，如何将空数组存储在 ini 文件中？

> ID：10484554
> 
> 赞同：1
> 
> 时间：2012-05-07T15:12:41.950
> 
> 标签：php, ini

例如我试过这样：

```
parse_ini_string('
    abc[] =
'); 
```

但元素 abc 不为空，其中有 1 个空字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:27:54.007

您不能将*空*数组直接存储在 INI 文件中。INI 格式不够表达——上面的语法描述了一个数组推送，因此它将一个空元素推送到数组上。

一个解决方法，虽然丑陋，是这样的：

```
$parsed = parse_ini_file('file.ini');

foreach ($parsed as $k => &$v) {
  if ($v === array('')) {
    $v = array();
  }
} 
```

# ios - 检查表是否存在，如果不存在，则创建它... iOS/SQLite

> ID：10484556
> 
> 赞同：0
> 
> 时间：2012-05-07T15:13:00.890
> 
> 标签：ios, sqlite

我目前有一个可以从中提取数据的表。我想做的是检查表是否已经存在于包中，如果不存在，我想创建表并将其保存到包中（意味着路径将在主包中）。我希望在 setInput 方法的顶部检查和创建数据库。我一直在寻找类似的东西，但我还没有想出任何东西。非常感谢任何帮助。这是我的代码：

```
-(IBAction)setInput:(id)sender
{
    NSString *strStoreNumber;
    NSString *strRegNumber;

    strStoreNumber = StoreNumber.text;
    strRegNumber = RegNumber.text;
    lblStoreNumber.text = strStoreNumber;
    lblRegNumber.text = strRegNumber;

    NSString* databasePath = [[NSBundle mainBundle] pathForResource:@"tblStore" ofType:@"sqlite"];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
    {
        NSLog(@"Opened sqlite database at %@", databasePath);
        sqlite3_exec(database, "CREATE TABLE IF NOT EXISTS tblStore (ID INTEGER PRIMARY KEY AUTOINCREMENT, Message TEXT)", NULL, NULL, NULL);
        //...stuff
    } 
    else 
    {
        NSLog(@"Failed to open database at %@ with error %s", databasePath, sqlite3_errmsg(database));
        sqlite3_close (database);
    }
//    
    NSString *querystring;

    // create your statement
    querystring = [NSString stringWithFormat:@"SELECT strStore, strReg FROM tblStore WHERE strStore = %@ AND strReg = %@;", strStoreNumber, strRegNumber];  

    const char *sql = [querystring UTF8String];

    NSString *szStore = nil;
    NSString *szReg = nil;

    sqlite3_stmt *statement = nil;
    if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL)!=SQLITE_OK) //queryString = Statement
    {
        NSLog(@"sql problem occured with: %s", sql);
        NSLog(@"%s", sqlite3_errmsg(database));
    }
    else
    {
        // you could handle multiple rows here
        while (sqlite3_step(statement) == SQLITE_ROW) 
        {            
            szStore = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 0)];
            szReg = [NSString stringWithUTF8String:(char*)sqlite3_column_text(statement, 1)];
        }        

    }

    sqlite3_finalize(statement);

    lblStoreNumber.text = szStore;
    lblRegNumber.text = szReg;

//   
} 
```

我对 iOS 和 SQLite 还是很陌生，所以如果我没有对我正在尝试做的事情提供足够准确的描述，请告诉我，我会尝试更具体。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:39:55.737

快速搜索“iphone sql create table if not exists”给出[了](http://www.switchonthecode.com/tutorials/using-sqlite-on-the-iphone)最高结果。

这部分 SQL 可能就是您要查找的内容：

```
CREATE TABLE IF NOT EXISTS tableName( ... ) 
```

如果表不存在，它会创建一个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-01T07:24:24.967

使用 sqlite swift 创建表

```
func createTable(_ tableName:String) {
        sqlStatement = "CREATE TABLE \(tableName)(Id TEXT,Details BLOB,Type TEXT)"
        if sqlite3_prepare_v2(database, sqlStatement,-1, &compiledStatement, nil) == SQLITE_OK {
            if sqlite3_step(compiledStatement) == SQLITE_DONE {
                print("table created")
            }
            else {
                print("table could not be created")
            }
        }
        else {
            print("Create table statement could not be prepared")
        }
        sqlite3_finalize(compiledStatement)
    } 
```

# magento - 索引如何在 magento 中工作？

> ID：10484558
> 
> 赞同：4
> 
> 时间：2012-05-07T15:13:06.537
> 
> 标签：magento

我发现当我从后端重新索引时，magento 会创建许多额外的表。它的目的是什么？

例如 catalog_category_flat_store_1 catalog_product_flat_1 catalog_product_index_price_final_idx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:44:29.133

平面表适用于 Magento 的不同商店。每个商店都有自己的平面表，因为每个商店都可以有不同的信息。

据我所知，价格指数用于帮助加快类别页面的速度，因为对这些页面使用实际价格模型会更慢。

在大多数情况下，Magento 中的所有索引都是为了提高系统的整体速度。

# php - MySQL 一次更新两个不同的表 (CRUD)

> ID：10484559
> 
> 赞同：1
> 
> 时间：2012-05-07T15:13:19.797
> 
> 标签：php, mysql, join, crud

我有两个这样的表：

```
[tblFacilityHrs] id uid title description

[tblFacilityHrsDateTimes] owner_uid startEventDate endEventDate startTime endTime days recurrence finalDate 
```

我加入表格如下：

```
$result = mysql_query("SELECT * FROM tblFacilityHrs JOIN tblFacilityHrsDateTimes ON tblFacilityHrs.uid =tblFacilityHrsDateTimes.owner_uid") or trigger_error(mysql_error()); 
```

要显示两个表，我会遍历每条记录并将其全部放在一个表中：

```
while($row = mysql_fetch_array($result)){ 
foreach($row AS $key => $value) { $row[$key] = stripslashes($value); } 
echo "<tr>";  
echo "<td valign='top'>" . nl2br( $row['title']) . "</td>";  
echo "<td valign='top'>" . nl2br( $row['description']) . "</td>";  
echo "<td valign='top'>" . nl2br( $row['startEventDate']) . "</td>";
echo "<td valign='top'>" . nl2br( $row['endEventDate']) . "</td>"; 
echo "<td valign='top'>" . nl2br( $row['startTime']) . "</td>";     
echo "<td valign='top'>" . nl2br( $row['endTime']) . "</td>"; 
echo "<td valign='top'>" . nl2br( $row['days']) . "</td>";     
echo "<td valign='top'>" . nl2br( $row['recurrence']) . "</td>";   
echo "<td valign='top'>" . nl2br( $row['finalDate']) . "</td>"; 
```

我现在的问题是，如何编辑每条记录？

在表格下方的主页中，我通常会这样做：

**伪代码**

```
echo "<td valign='top'><a href=edit.php?id={$row['id']}>Edit</a></td><td><a href=delete.php?id={$row['id']}>Delete</a></td> "; 
```

然后在我的编辑页面上，我会做这样的事情：

**伪代码**

```
if (isset($_GET['id']) ) { 
    $id = (int) $_GET['id']; 
    if (isset($_POST['submitted'])) { 
    foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); } 
    $sql = "`title` =  '{$_POST['title']}' ,  `description` =  '{$_POST['description']}'   WHERE `id` = '$id' "; 
    mysql_query($sql) or die(mysql_error()); 
    echo (mysql_affected_rows()) ? "Edited row.<br />" : "Nothing changed. <br />"; 
    echo "<a href='list.php'>Back</a>"; 
```

自从表连接后，这是如何工作的？我如何编辑它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:17:03.033

我认为您应该单独更新每个表；首先是主表，然后是详细表，然后重新绑定您的数据视图

# mysql - Sequel 中的过滤语句优先级（特别是连接）

> ID：10484561
> 
> 赞同：1
> 
> 时间：2012-05-07T15:13:48.907
> 
> 标签：mysql, ruby, join, sequel

DB[:Table1].filter(condition_1).right_join(DB[:Table2].filter(condition_2), join_condition).sql

*在右连接的结果*上应用“过滤器（条件_1）” ，因为我希望*在此过滤器*应用于 DB[:Table1] 后发生右连接。两者都给了我非常不同的结果。

我怎样才能做到这一点？我只是想不出一种方法来做到这一点（我也无法在文档中找到任何东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:09:28.553

你想要[Dataset#from_self](http://sequel.rubyforge.org/rdoc/classes/Sequel/Dataset.html#method-i-from_self)：

```
DB[:Table1].
  filter(condition_1).
  from_self.
  right_join(
    DB[:Table2].filter(condition_2),
    join_condition
  ).
  sql 
```

# php - 想要从谷歌地图嵌入的 iframe 中提取街道地址

> ID：10484562
> 
> 赞同：1
> 
> 时间：2012-05-07T15:13:50.133
> 
> 标签：php, regex, google-maps

好的，这就是我正在做的事情。

**一些背景知识：**我正在对其他人构建的现有 WordPress 网站进行更改。他们创建了一个文本区域，客户可以在其中复制和粘贴一个嵌入谷歌地图的 iframe。这适用于客户在其网站上发布的属性。

**困境：**这一切都很好，但我正在为他们的属性重建详细信息页面，我想删除所有 iframe 信息，只留下属性地址，以便我可以使用它通过 a 创建新地图谷歌地图 V3 jQuery 插件。

**我想转这个：**

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=5475+NW+75+AVE,+Ocala+FL+34482&aq=&sll=29.300577,-82.294762&sspn=0.006755,0.013304&vpsrc=0&ie=UTF8&hq=&hnear=5475+NW+75th+Ave,+Ocala,+Florida+34482&t=m&z=14&ll=29.244022,-82.241361&output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?f=q&source=embed&hl=en&geocode=&q=5475+NW+75+AVE,+Ocala+FL+34482&aq=&sll=29.300577,-82.294762&sspn=0.006755,0.013304&vpsrc=0&ie=UTF8&hq=&hnear=5475+NW+75th+Ave,+Ocala,+Florida+34482&t=m&z=14&ll=29.244022,-82.241361" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

**进入这个：**

```
5475 NW 75 AVE, Ocala FL 34482 
```

我认为我通过研究 preg_replace() 走在正确的轨道上，但正则表达式正是让我着迷的原因。或者，如果我可以提取也会有帮助的坐标。我可以使用地址或经纬度坐标来完成工作。

提前感谢我能得到的任何帮助！

**编辑解决方案，因为我的 SO 代表仍然很低：**

多亏了马里奥，我才得以完成工作。这是我对任何可能有帮助的人的最终代码。

**你从这个开始：**

```
<iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&source=s_q&hl=en&geocode=&q=5475+NW+75+AVE,+Ocala+FL+34482&aq=&sll=29.300577,-82.294762&sspn=0.006755,0.013304&vpsrc=0&ie=UTF8&hq=&hnear=5475+NW+75th+Ave,+Ocala,+Florida+34482&t=m&z=14&ll=29.244022,-82.241361&output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?f=q&source=embed&hl=en&geocode=&q=5475+NW+75+AVE,+Ocala+FL+34482&aq=&sll=29.300577,-82.294762&sspn=0.006755,0.013304&vpsrc=0&ie=UTF8&hq=&hnear=5475+NW+75th+Ave,+Ocala,+Florida+34482&t=m&z=14&ll=29.244022,-82.241361" style="color:#0000FF;text-align:left">View Larger Map</a></small> 
```

**你想要这个：**

5475 NW 75 AVE，佛罗里达州奥卡拉 34482

**这对我有用：**

```
// We first find and extract the 'src' from the iframe
// $map is my original iframe embed
// $q is our extracted and stripped text
preg_match('#q=([^&"]+)#', $map, $match)
and ($q = urldecode($match[1]));

// Now you can echo out the address or use it elsewhere.
// In my case, I am using jQuery goMap (http://www.pittss.lv/jquery/gomap)
// and can add a new point on the map via $q
echo $q; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:56:21.377

如果您坚持使用矫枉过正的解决方案，您将首先使用像 QueryPath 这样的 HTML 遍历库来拆分 HTML 并获取属性：

```
$url = qp($html)->find("iframe")->attr("src"); 
```

但这毫无意义，实际上您应该从文本片段中提取 URL：

```
preg_match('#http://[^"\']+#', $html, $match)
and ($url = $match[0]); 
```

从那里将其拆分[`parse_url($url, PHP_URL_QUERY)`](http://php.net/parse_url)并提取位，[`parse_str($qs, $vars)`](http://php.net/parse_str)这样您就可以得到`$var["q"]`.

但是，如果它是一个有点连贯的输入，您可以`q=`使用以下方法来划分参数：

```
preg_match('#q=([^&"]+)#', $html, $match)
and ($q = urldecode($match[1])); 
```

更懒惰的是只`parse_str`在整个 HTML 片段上使用，并且祈祷前导和尾随垃圾不会干扰所需的片段。

# delphi - 我创建了一个 TImage 数组，但它们不可见

> ID：10484564
> 
> 赞同：-5
> 
> 时间：2012-05-07T15:13:55.193
> 
> 标签：delphi, delphi-7, visible, timage

我正在使用 Delphi，并创建了一个由十个类型的元素组成的数组，`TImage`其名称和结构如下：

```
Form3.images[1..max] of TImage. 
```

我试图以这种方式初始化它：

```
for x := 1 to max do
begin
  images[x] := TImage.Create(Form3);
  images[x].AutoSize := True;
  images[x].Name := 'image' + IntToStr(x);
  images[x].Visible := true;
  images[x].Parent := Form3;
end; 
```

之后，我尝试将另一个变量（称为 Form3.a1:TImage）的内容放入数组的每个元素中。

我尝试按照以下说明执行此操作：

```
for i := 1 to max do
begin
  Form3.Images[i]:=Form3.a1;             // ( Form3.a1: TImage) <- this is visible
end; 
```

（我不知道之前使用说明是否正确）之后我更改了数组图像的位置：

```
//Form3.square:TShape

x := Form3.square.Left;
y := Form3.square.Top;
Form3.Images[1].Top := y + 70;
Form3.Images[1].Left := x + 60;
...
Form3.Images[1].Top := y + 10;
Form3.Images[1].Left := x + 50; 
```

我为数组的每个图像设置了不同的位置，但是当我运行程序时，数组的图像不可见。我也尝试设置 Form3.square.visible=false 但没有任何变化。

这就是我要的：

*   `a1`在变量和数组变量之间具有相同的内容`images`，只改变位置
*   使数组的图像可见（我试过`images[x].Visible := true;`但它不起作用）。

请我需要帮助，我可以提供其他详细信息。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:34:04.770

您忘记设置控件的位置；`Left`和`Top`。这最好通过调用来完成`SetBounds`。尺寸也没有指定，但由`AutoSize`属性处理（虽然它不需要它变得可见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T17:41:21.763

如果您已经设置了图像在数组中的位置（正如您在[其他答案](https://stackoverflow.com/a/10484855/757830)`images`的评论中所述），那么第一个代码应该可以正常工作。

请检查以下内容：

*   ImageList的`Width`和属性是否设置？请注意，当您更改它们时，ImageList 会被清除。`Height``Form3.Lista`
*   确保您查看的实例与变量指向的`TForm3`实例相同。`Form3`（无论如何，您都不应该使用该全局表单变量！）

现在，关于您将图像从一个复制到另一个的第二段代码：

*   `a1`当你写到一半的问题时，是一个（本地）声明的变量吗？那么`Form3.a1`（这是一个私有字段`TForm3`）和`a1`（变量）是不一样的！
*   请注意，您正在从 复制`Form3.a1`到`Images[i]`。不应该反过来吗？
*   如果这确实是您想要的：是否`Form3.a1`有任何机会是空的？

我还能想到另外两种可能性，但两者都会导致异常，所以我想情况并非如此：

*   ImageList`Form3.Lista`没有或没有足够的图像，
*   图像`Form3.a1`不包含位图，而是 gif、jpeg 或其他图形类型。

# ios - 故事板手势识别器

> ID：10484565
> 
> 赞同：0
> 
> 时间：2012-05-07T15:13:56.893
> 
> 标签：ios, xcode, uigesturerecognizer, gesture

从 iPad“主/细节”故事板模板创建 Xcode 项目后，我似乎找不到负责邮件样式滑动以在纵向模式下显示主视图的 UIGestureRecognizer 实例。

我需要这样做以使其忽略对某些 UI 元素的触摸，但它似乎没有被`gestureRecognizers`主视图的方法返回的 4 个手势识别器中的任何一个处理。当我在它们上设置一个委托时，它的函数只在与主视图本身交互时被调用，而不是在滑动时被调用，例如细节区域。详细视图从 中返回一个空数组`gestureRecognizers`。

在项目范围内搜索“手势”一无所获，我在情节提要中看不到手势识别器。这个处理程序在默认的 Xcode“主/详细信息”模板中在哪里创建和管理，我如何访问它以设置委托？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:21:00.490

我希望它在拆分视图控制器本身上，而不是在主视图控制器或细节视图控制器上。您可以使用该属性将其打开或关闭`presentsWithGesture`（仅限 5.1 及更高版本）。

# java - 如何在 Android 的 TimerTask 中创建对象？

> ID：10484566
> 
> 赞同：1
> 
> 时间：2012-05-07T15:14:09.857
> 
> 标签：java, android

我试图让画布在固定的时间内绘制一些图片。就像屏幕上显示的一个项目，它在 5 秒后消失。然后再过 3 秒后，会抽取一个新项目并持续 5 秒。我使用 Timer 和 TimerTask 如下

```
 public class PowerUpMaking extends TimerTask{
        public void run() {
              test = 1;
              powerUp = new Powerup(players.get("player1"),getHeight());                
        }
    } 
```

我在构造函数中声明了 powerUp。整个事情都在一个扩展 View 的类中。我想做的只是为引用变量创建一个新对象。事实证明第一行是有效的，但第二行不是通过检查日志。我应该如何处理这种情况？如果有人可以提供帮助，非常感谢。第一次在这里提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:39:57.570

Not specifically sure what your error is: you should paste the logs so we can better determine what's going on.

If you're creating objects within a nested class you have to make sure that everything needed to create the object is available: is `players` an instance variable? Is it null when you are trying to create the object? Are you getting a `NullPointerException` from `players.get` or from `getHeight()`? Without the error logs it is very difficult to get the right answer.

# scala - 为什么我不能用 Map 遍历 (Int, Int, Int)？

> ID：10484571
> 
> 赞同：3
> 
> 时间：2012-05-07T15:14:40.497
> 
> 标签：scala

> **可能重复：**
> [在 Scala 元组上使用“地图”和东西？](https://stackoverflow.com/questions/2339863/use-map-and-stuff-on-scala-tuples)

为什么我不能遍历这个构造（我不知道如何调用它，因为 Scala 只是调用它`(Int, Int, Int)`）？

```
val list = (1,2,3)
list.map{println _} 
```

上面的代码产生以下错误：

> <console>:9: 错误：值映射不是 (Int, Int, Int)
> (1,2,3).map{println _}的成员

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:25:18.620

你可以使用`.productIterator`or`.productElements`来做这样的事情：

```
t.productElements.toList.map(println) 
```

我习惯使用 toList 来严格操作，导致 productIterator 返回 Iterator 是惰性的。

提示：建议使用`.foreach`for 没有结果的函数（产生副作用的函数，就像 println 一样）

```
t.productElements.toList.foreach(println) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T15:15:55.830

我知道了。

它被称为“元组”，它已经在这里得到了回答。

[在 Scala 元组上使用“地图”和东西？](https://stackoverflow.com/questions/2339863/use-map-and-stuff-on-scala-tuples)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T15:16:31.020

根据您的值的名称，您`list`似乎打算使用[List](http://www.scala-lang.org/api/current/scala/collection/immutable/List.html)而不是[Tuple](http://www.scala-lang.org/api/current/scala/Tuple2.html)。试试这个来创建一个`List`定义`map`：

```
List(1,2,3).map{println _} 
```

# spring-security - Spring Security：invalid-session-url 与 logout-success-url

> ID：10484573
> 
> 赞同：3
> 
> 时间：2012-05-07T15:15:00.417
> 
> 标签：spring-security

我正在使用 Spring-Security 3.1。在我添加会话管理的 invalid-session-url 属性之前，它已正确重定向到注销页面。但是，在添加 invalid-session-url 后，即使我单击注销按钮，它也会重定向到会话过期页面。此外，如果我加载登录页面，在会话超时期限之后，它会重定向到会话过期页面。

如果会话过期，我必须检查会话过期并将用户重定向到会话过期页面。但是，在使用 invalid-session-url 标签后，即使在登录和注销情况下，它也会将我重定向到会话过期页面。

在某些帖子中，建议不要使用 invalid-session-url。但是，我无法理解在实际会话过期后如何显示会话过期页面。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:39:29.057

默认情况下，注销过程会首先使会话失效，从而触发会话管理重定向到超时页面。通过指定 invalidate-session="false" 将修复此行为。

```
 <sec:logout logout-success-url="/logout" invalidate-session="false" 
delete-cookies="JSESSIONID" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T07:36:15.327

会话到期仅限于在提交的请求中检测无效的会话 cookie。如果您的注销没有删除会话 cookie，那么如果您再次访问该站点，它将重新提交，这将触发无效的会话 URL。这在[参考手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-session-mgmt)中有说明。我会阅读它和随附的脚注。如那里所述，您需要删除会话 cookie，这取决于您的容器可能会或可能不会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T15:55:12.603

尝试在您的安全配置中添加以下内容。

```
<http>
    <logout delete-cookies="JSESSIONID" />
</http> 
```

# java - 二维地图中的迭代器

> ID：10484575
> 
> 赞同：1
> 
> 时间：2012-05-07T15:15:20.590
> 
> 标签：java, map, iterator, nested

我想知道如何在二维 HashMap 中进行迭代？我正在创建一个 Object TrueStringMap2D，它执行以下操作：它将是一个 2D 地图，我的意思是 2 个键和一个值。

但是这里实现的迭代器不起作用..我不知道如何在 TrueStringMap2D 中重新定义 Iterator 方法：S（如果可能的话，应该在 iterator() 函数中删除）任何人都可以帮忙吗？非常感谢你！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:58:57.853

我会将这个问题重新解释为我喜欢回答的类似问题，然后希望该问题的答案对您有用。

这是我要回答的问题：

> 如何编写一个迭代 a 中所有值的迭代器`Map<String, Map<String, String>>`？

这就是我将如何解决它：

```
class TwoDimIterator implements Iterator<String> {

    Iterator<Map<String, String>> outerIter;
    Iterator<String> innerIter = Collections.<String>emptyList().iterator();

    public TwoDimIterator(Map<String, Map<String, String>> twoDimMap) {
        outerIter = twoDimMap.values().iterator();
        advanceInner();
    }

    @Override
    public boolean hasNext() {
        return innerIter.hasNext();
    }

    @Override
    public String next() {
         String toReturn = innerIter.next();
         advanceInner();
         return toReturn;
    }

    private void advanceInner() {
        while (!innerIter.hasNext()) {
            if (!outerIter.hasNext()) {
                innerIter = Collections.<String>emptyList().iterator();
                return;
            }
            innerIter = outerIter.next().values().iterator();
        }
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException();
    }
} 
```

**测试代码：**

```
class Test {

    public static void main(String[] args) {

        // Create a map
        Map<String, Map<String, String>> twoDimMap =
                new HashMap<String, Map<String, String>>();

        // Fill it
        Map<String, String> innerA = new HashMap<String, String>();
        innerA.put("1", "A1");
        innerA.put("2", "A2");

        Map<String, String> innerB = new HashMap<String, String>();
        innerB.put("1", "B1");
        innerB.put("2", "B2");

        twoDimMap.put("A", innerA);
        twoDimMap.put("B", innerB);

        // Create an iterator for the values:
        Iterator<String> twoDimIter = new TwoDimIterator(twoDimMap);
        while (twoDimIter.hasNext())
            System.out.println(twoDimIter.next());

    }
} 
```

**输出：**

```
A2
A1
B2
B1 
```

# javascript - javascript时钟故障运行定时器功能？

> ID：10484576
> 
> 赞同：0
> 
> 时间：2012-05-07T15:15:20.943
> 
> 标签：javascript

想知道这段代码哪里出错了，基本上 startTime() 只运行一次，就是这样，所以时钟不会更新。谁能告诉我如何解决这个问题？

JS

```
function startTime(){
  var today=new Date();
  var h=today.getHours();
  var m=today.getMinutes();
  var s=today.getSeconds();
  // add a zero in front of numbers<10
  m=checkTime(m);
  s=checkTime(s);
  document.getElementById('txt').innerHTML=h+":"+m+":"+s;
  t=setTimeout('startTime()',500);
  }

  function checkTime(i){
  if (i<10)
    {
    i="0" + i;
    }
  return i;
  } 
```

HTML

```
 <body onload="startTime()">

<p>Date</p>
<?php echo date("d/m/y"); ?>

<p>Time</p>
<div id="txt"></div> 
```

链接[http://bit.ly/IC9ohX](http://bit.ly/IC9ohX)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:22:12.077

您只是对函数的范围界定有疑问。

简短的解决方案：改变

```
t=setTimeout( 'startTime()',500); 
```

对此。

```
t = setTimeout( startTime, 500 ); 
```

解释：

该函数`startTime`是在函数中定义的，`window.onload`并且仅在该函数（以及其中的函数）中可见！

在您的代码中，JavaScript 等待 500 毫秒，然后尝试执行代码`startTime()`。`startTime`它在全局范围（即 的执行范围）中搜索函数，但`setTimeout`找不到任何引用，从而导致错误并且您的代码无法正常工作。

我的代码将函数的引用传递`startTime`给`setTimeout`. 这样引擎就不必搜索处理程序，也不会在那时失败。在`setTimeout`被调用的地方，您处于 的范围内`window.unload`，因此引擎知道该函数`startTime`并可以处理传递给 的处理程序`setTimeout`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:21:53.227

`setTimeout`等待指定的时间，完成它的工作，然后停止。你想要`setInterval`，它无限期地重复相同的工作。

编辑：对不起，我在阅读您的代码时脑残了。没有意识到您在函数结束时调用了 setTimeout。

尽管如此，仍然有一个有效的用例来使用 setInterval 而不是 setTimeout。假设您的函数本身需要 2 毫秒才能完成。您的时钟实际上不是每半秒更新一次，而是每 502 毫秒更新一次。因此，在 100 次迭代后，它将在距离应有的位置 0.2 秒后执行。这可能并不明显，但是 1 秒的 setInterval 会使您的时钟实际上看起来每秒都在滴答作响，正如它应该的那样。

# java - 将日期字符串从时区转换为不同时区

> ID：10484583
> 
> 赞同：0
> 
> 时间：2012-05-07T15:15:59.323
> 
> 标签：java, android, calendar

我有一个日期，我从这样的 EST 格式的服务器获得

`05/07/2012 16:55:55`去月/日/年然后时间

如果手机不在 EST 中，我如何将其转换为手机所在的时区？

如果我以毫秒为单位获得时间，那将没问题，但我没有

**编辑：**

好的，现在格式化时时间不正确

```
 String sTOC = oNewSTMsg.getAttribute("TOC").toString();
                String timezoneID = TimeZone.getDefault().getID();
                DateFormat format = new SimpleDateFormat("MM/dd/yy HH:mm:ss");
                format.setTimeZone(TimeZone.getTimeZone("EST"));
                String newtimezoneID = TimeZone.getDefault().getID();
                Date timestamp = null;
                try{
                    timestamp = format.parse(sTOC);
                    format.setTimeZone(TimeZone.getDefault());
                    timezoneID = format.format(timestamp);
                }catch(ParseException e){

                } 
```

我将其转换为“EST”，然后将该时间格式化为默认值`TimeZone`，但时间总是相差一个小时，不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:21:30.767

使用以下代码获取 UNIX 时间戳：

```
String serverResp = "05/07/2012 16:55:55";
DateFormat format = new SimpleDateFormat("MM/dd/yy HH:mm:ss");
Date date = format.parse(serverResp); 
```

现在您有了时间戳，您知道如何使用它。

这是另一个涉及转换的问题，以防您好奇：[Android Convert Central Time to Local Time](https://stackoverflow.com/questions/2407719/android-convert-central-time-to-local-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:22:20.603

使用`DateFormat`该类将 String 解析为`Date`. 在这里查看API文档的介绍... [http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html)

然后，您可以为日期创建日历...

```
Calendar cal = Calendar.getInstance().setTime(date); 
```

然后您可以使用 .将日历上的时区更改为不同的时区`setTimezone()`。或者只是以毫秒为单位获取时间，使用`getTimeInMillis()`

使用`Calendar`、`Date`和`DateFormat`类应该会让您朝着正确的方向前进。

请参阅`Calendar`此处的文档... [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

# android - 安卓应用标题命名

> ID：10484584
> 
> 赞同：1
> 
> 时间：2012-05-07T15:16:01.917
> 
> 标签：android, title, non-latin

我正在尝试上传我的 android 应用程序，但它显示的不是我的应用程序名称“Соновник”，而是问号。我已将所有字符串存储在`values/strings.xml`文件中。是否有一些命名约定或者我应该为我的应用程序标题做些什么来支持 UTF 字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:20:38.530

它可能是您的浏览器（或谷歌方面）的问题，它没有正确显示标题，否则在设备上我相信它应该没问题。

# fancybox - tt_news：用于插入 RTE 中的图像的幻想框

> ID：10484586
> 
> 赞同：0
> 
> 时间：2012-05-07T15:16:22.323
> 
> 标签：fancybox, typo3, tt-news

用户应该能够在新闻中插入图像。如果它们被插入，它们应该用fancybox 打开。因此我安装了`jqfancybox`. 现在，作为媒体添加的图像在幻想框中打开，用户可以单击所有图像（如画廊）。我还需要做什么才能打开 RTE 插入的图像？

我尝试了以下打字稿：

```
plugin.tt_news.displaySingle.image.imageLinkWrap {
  JSwindow = 0
  directImageLink = 1
  linkParams.ATagParams { 
    dataWrap = class="jqfancybox" rel="fancybox"
  }
} 
```

这个想法是，如果用户使用“单击放大”选项插入图像，则应该添加上面显示的类以及 rel 属性。其余的应该做fancybox。但是对于现有图像，没有添加任何类，并且幻想框不会弹出。我错过了什么？

编辑：

现在我尝试了：

```
plugin.tt_news.displaySingle.content_stdWrap.parseFunc {
  postUserFunc.imageLinkWrap.typolink{
    ATagParams { 
      dataWrap = class="jqfancybox" rel="fancybox"
    }
  }
} 
```

但链接没有包装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:15:11.070

RTE 内容通过 parseFunc < lib.parseFunc_RTE 进行解析。因此，如果要更改配置，则需要配置 plugin.tt_news.displaySingle.content.parseFunc.* （我不确定该字段是内容还是正文文本或其他）

lib.parseFunc_RTE 是解析 RTE 内容的默认配置。它非常强大，但是您需要查找很多 TypoScript 函数。

# jquery - 带有对话框的 Jquery 移动提交表单（直接 POST）

> ID：10484589
> 
> 赞同：2
> 
> 时间：2012-05-07T15:16:34.270
> 
> 标签：jquery, forms, mobile, dialog, submit

我正在使用 jquery 移动框架构建一个移动 Web 应用程序。我还需要让我的提交表单按钮打开一个对话框弹出窗口。但是输入类型="submit" 元素不允许用于弹出对话框页面的 href 属性。任何帮助是极大的赞赏。

下面是html。它弹出对话框但不提交表单。

```
 <a data-role="button" href="ManholePhotosDialog.aspx" data-rel="dialog" data-transition="pop"class="save">Submit</a> 
```

我试过这个脚本，但它不工作：

```
$(".save").click(function (){
  $("#form1").submit()
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:40:44.240

我也被这个难住了。JQueryMobile 很好，但它确实与传统的 JQuery 技术相混淆。把它放在启动对话框的页面上，你应该很高兴。

```
$( document ).on( "click", "#save", function()
{
    $("#form1").submit()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:18:10.183

如果您想将表单提交到`href`of`a`标签，请尝试以下操作：

```
$(".save").click(function (){
  $("#form1").attr('action', $(this).attr('href')).submit()
}); 
```

# java - 远程调试在 Glassfish 中运行的 Java Web 应用程序

> ID：10484595
> 
> 赞同：10
> 
> 时间：2012-05-07T15:16:44.630
> 
> 标签：java, jakarta-ee, netbeans, glassfish

我有一个网络应用程序。它当前部署在 Glassfish 实例中的远程服务器上。是否可以使用 Netbeans 远程连接到服务器并调试应用程序（就像我会使用普通的 java 应用程序一样）？

如果有人这样做并且可以提供见解或可以为我提供指导，那就太好了。

我知道这个功能存在于 Visual Studio 和 ASP.Net 中。我不确定是否有 java 等价物。

我在网上看到的大多数示例都是针对仅在远程计算机上运行的应用程序或用于调试在本地计算机上运行的 Glassfish 应用程序的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T17:22:08.830

是的，有可能。

在调试模式下运行 GlassFish 后，转到 NetBeans 中的**Debug**菜单并单击**Attach Debugger...**，这将打开*Attach*对话框。你可能会选择类似的东西：

> 调试器：Java 调试器 (JPDA)
> 
> 连接器：SocketAttach
> 
> 传输：dt_socket
> 
> 主机：hostname_or_ip_address
> 
> 端口：9009

*超时*可以留空。在此对话框中单击“*确定*”时，您应该能够将 NetBeans 调试器连接到 GlassFish。

记住：

1.  远程服务器上的防火墙（以及它们之间的任何网关）应该允许连接到调试器端口（在我的示例中为 9009）。
2.  确保您使用的是匹配的端口号。在 GlassFish 管理控制台中，通常位于：[http://localhost:4848](http://localhost:4848)
3.  展开**配置**。
4.  展开**server-config**（或您使用的任何一个）。
5.  单击**JVM 设置**。
6.  选中**Debug**为**Enabled**。
7.  验证**调试选项**是否包含：

    ```
    -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=9009
    ```

阅读[JPDA 文档](http://docs.oracle.com/javase/6/docs/technotes/guides/jpda/conninv.html)以了解您可以使用的其他选项。

# c++ - 如何在没有任何库或框架的情况下编写驱动程序？

> ID：10484599
> 
> 赞同：0
> 
> 时间：2012-05-07T15:16:57.343
> 
> 标签：c++, c, driver

我的问题是“如何编写没有 WDK 或 DDK 或......的驱动程序？”
我用谷歌搜索了它，但我找不到任何东西......
我只是为了教育目的而做它，我想在 Windows 7 中做它，我知道 c 和汇编（但不是专业的汇编）

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:31:30.910

为任何操作系统编写驱动程序都需要了解操作系统内核的驱动程序结构和系统调用以及其他行为：这就是 DDK 为您提供的。尝试在没有 DDK 的情况下执行此操作与尝试从头开始重新实现所有内核的驱动程序结构和系统调用相同。

可以想象这是可以做到的：实际上这是不可能的，尤其是对于任何成熟的操作系统，例如 Windows 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:31:00.147

如果您的意思是使系统能够使用某些硬件的驱动程序-它（实际上）是不可能的。驱动程序必须以某种方式与系统交互，这就是 DDK 的用途。

但是，如果您只想访问您拥有的某些设备（例如，通过 COM、LPT 或 USB 连接），则不需要任何驱动程序，除了用于 COM、LPT 或 USB 的驱动程序（已在系统中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T05:44:54.183

我对 Windows 内部一无所知，但 Andrew Tridgell 发表了关于使用 LD_Preload 对 Windows 驱动程序进行逆向工程的演讲。他没有使用任何驱动程序套件或类似的东西

我也对 Window 的动态链接器一无所知（我很确定 Windows 不使用 .so 的），但他在 Linux 下通过虚拟机（他使用虚拟机）运行 Windows 的技术应该可以工作。

您可以在此处查看更多详细信息[http://lwn.net/Articles/425714/](http://lwn.net/Articles/425714/)

对现有驱动程序进行逆向工程应该为您编写自己的驱动程序提供了一个良好的开端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:30:33.807

您需要知道 WDK 或 DDK 做什么并重新创建它。您将把特殊值推入特殊寄存器，响应特殊中断......等等。

你还有很多工作要做。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T15:27:51.863

如果不使用驱动程序套件，真的没有办法做到这一点 - 微软受美国政府司法部的**法律约束，禁止通过特权/未发布的 API 向任何人（甚至他们自己的开发人员）提供操作系统访问权限。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-08T00:18:09.623

如果您的意思是驱动程序是在特定操作系统（例如 Win7）下工作的驱动程序中的驱动程序，那么您自然需要一个开发工具包（例如 WDK），除非您想重新发明轮子。这就像在不使用框架的情况下开发游戏，或者在不使用 Android SDK 的情况下开发 Android 应用程序。这是可能的，但这是一项非常非常艰巨的任务，可以使用 WDK 等开发工具包轻松完成。编辑：如果你真的想深入研究处理驱动程序的代码，你可以使用 DDK 创建一个驱动程序，然后使用逆向工程来查看底层代码，看看它如何与 CPU 交互以处理硬件.

# c++ - C++ Mac 库

> ID：10484601
> 
> 赞同：1
> 
> 时间：2012-05-07T15:17:23.047
> 
> 标签：c++, xcode, macos

我正在使用 OS X Lion，使用 C++。我已将方言设置为 C++11，将标准库设置为 libc++。在 Visual C++ 中，我听说过 windows.h 库以及可以使用它执行的操作（例如弹出窗口），并且想知道是否有任何类似的 Mac 库，以及在哪里可以了解它们. 我已经搜索了很多，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:20:49.350

您可能正在查看[Carbon](https://developer.apple.com/carbon/)（现在已过时）或[Cocoa](https://developer.apple.com/technologies/mac/cocoa.html)，它是一种现代 Objective-C API。你最好使用 C++ 和 Objective-C 的组合来为 OS X 制作一个图形应用程序，这样你就可以使用 Cocoa 库。

查看[此相关问题](https://stackoverflow.com/questions/525609/use-c-with-cocoa-instead-of-objective-c)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:35:55.427

您可以使用 Cocoa Objective-C api，也可以使用跨平台的 c++ 解决方案，例如`Qt`或`wxWidgets`

# ruby-on-rails - 无法在 windows xp 中安装 sqlite3-1.3.6 ruby gem

> ID：10484604
> 
> 赞同：1
> 
> 时间：2012-05-07T15:17:30.993
> 
> 标签：ruby-on-rails, ruby, windows, sqlite

Ruby on Rails 的新手。在 Windows XP 中工作。

我已经从 railsinstaller dot org 安装了 rails 安装程序

通过guides dot ruby​​onrails dot org / getting_started中的示例工作

发布命令'rails new blog'

[获取https://rubygems.org/quick/Marshal.4.8/sqlite3-1.3.6.gemspec.rz](https://rubygems.org/quick/Marshal.4.8/sqlite3-1.3.6.gemspec.rz)时，捆绑安装因网络错误而失败

我已经下载了 sqlite3-1.3.6 gem 并尝试手动安装，收到以下错误：

检查 sqlite3.h... 没有 sqlite3.h 丢失。[首先从http://www.sqlite.org/](http://www.sqlite.org/)安装 SQLite3 。 *** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

我读过许多不同的网站，告诉我要确保 Sqlite3.dll 在系统路径中，所以我下载了最新的 Sqlite3.dll（从 sqlite3 dot org，使用 windows 预编译的二进制文件）并将它们放在路径中，甚至覆盖 c:\Railsinstall\Ruby1.9.3\bin 中的 Sqlite3.dll 文件，但都无济于事。我什至尝试使用 regsrv32 Sqlite3.dll 注册 Sqlite3.dll，但收到消息“Sqlite3.dll 已加载，但未找到 DllRegisterServer 入口点。无法注册此文件”

我已经成功安装了 Sqlite3-1.3.6-x86-mingw32.gem，但是“rails new blog”仍然在寻找 Sqlite-1.3.6

如果我尝试'rails new blog --skip-bundle'，我可以成功创建博客，但我认为我只是在回避这个问题。

有人知道我可能会错过什么吗？我在路径中有 Sqlite3.dll，但仍然无法通过 Sqlite3.h 文件未找到错误。

谢谢

（我知道我可能有代理问题，但我仍然应该能够在本地安装 gem 文件。我已经能够为每个其他请求的 gem 文件做到这一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:53:01.640

1.  转到[SQLite3 下载页面](http://www.sqlite.org/download.html)，“Precompiled Binaries For Windows”部分
2.  下载“sqlite-shell”和“sqlite-dll”归档文件
3.  将它们解压缩到 C:\WINDOWS\system32 文件夹（或 PATH 中的任何其他文件夹）
4.  安装 sqlite3 Ruby gem。

在 system32 中拥有 .dll 是**强制性的**

# java - 在 Netbeans 向导中使用 JFrame 而不是 JDialog

> ID：10484606
> 
> 赞同：5
> 
> 时间：2012-05-07T15:17:38.703
> 
> 标签：java, swing, netbeans, wizard

[我已经使用此处](http://platform.netbeans.org/tutorials/nbm-wizard.html)和[此处](http://today.java.net/pub/a/today/2006/02/28/using-wizard-api.html)概述的 Netbeans 向导框架构建了一个应用程序。我的应用程序工作正常，但我遇到的问题是应用程序没有显示在 Windows 任务栏中。我很确定问题是向导框架使用 JDialog 而不是 JFrame，但我不知道是否可以更改。

如果有人对这个框架有经验，请告诉我是否可以让它出现在任务栏中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T22:26:28.057

改变非常容易。

*   在 NetBeans 中打开表单。
*   更改`extends javax.swing.JDialog`为`extends javax.swing.JFrame`。
*   保存文件并关闭它。
*   重新打开文件。
*   在设计器模式下，进行更改。我通常只是更改组件的名称。
*   保存文件。
*   撤消更改并再次保存文件。

你应该准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:14:59.317

> Wizard Framework 使用 JDialog 而不是 JFrame，但我不知道是否可以更改。

*   不要使用多个`JFrames`，这是通往地狱的道路，你不能使用`setToFront`, `setOwner`, `iconify`, 等等...

*   使用`JDialog`或`JWindow`与父母一起使用`JFrame`

*   使用 undecorated `JDialog`, with or也`setModal()`可以设置各种`ModalityTypes`

> 如果有人对这个框架有经验，请告诉我是否可以让它出现在任务栏中。

*   这`Swing Framework`是长期贬值的

*   您可以重复使用[SplashScreen](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)而不是`JDialog/JWindow`

# php - PHP使用子数组值按字母顺序对数组进行排序

> ID：10484607
> 
> 赞同：69
> 
> 时间：2012-05-07T15:17:41.620
> 
> 标签：php, arrays

> **可能重复：**
> [如何在 PHP 中对数组和数据进行排序？](https://stackoverflow.com/questions/17364127/how-can-i-sort-arrays-and-data-in-php)
> [如何在 php 中对多维数组进行](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)
> [排序 PHP 按子数组值](https://stackoverflow.com/questions/2477496/php-sort-array-by-subarray-value)
> [对数组进行排序 PHP 按值对多维数组进行排序](https://stackoverflow.com/questions/2699086/php-sort-multidimensional-array-by-value)

我的数组看起来像：

```
Array(
    [0] => Array(
         [name] => Bill
         [age] => 15
    ),
    [1] => Array(
         [name] => Nina
         [age] => 21
    ),
    [2] => Array(
         [name] => Peter
         [age] => 17
    )
); 
```

我想根据他们的名字按字母顺序对它们进行排序。我看到了[PHP Sort Array By SubArray Value](https://stackoverflow.com/questions/2477496/php-sort-array-by-subarray-value)但它并没有太大帮助。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-05-07T15:34:29.443

这是你的答案，它 100% 有效，我已经测试过了。

```
<?php
$a = Array(
    1 => Array(
         'name' => 'Peter',
         'age' => 17
    ),
    0 => Array(
         'name' => 'Nina',
         'age' => 21
    ),
    2 => Array(
         'name' => 'Bill',
         'age' => 15
    ),
);
function compareByName($a, $b) {
  return strcmp($a["name"], $b["name"]);
}
usort($a, 'compareByName');
/* The next line is used for debugging, comment or delete it after testing */
print_r($a); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-07T15:22:18.763

`usort`是你的朋友：

```
function cmp($a, $b)
{
        return strcmp($a["name"], $b["name"]);
}

usort($array, "cmp"); 
```

# java - 我在 java 和 mysql 连接中遇到错误。它与 java 和 mysql 中的日期比较有关

> ID：10484610
> 
> 赞同：0
> 
> 时间：2012-05-07T15:17:48.827
> 
> 标签：java, mysql, date, connectivity

```
String x=jTextField1.getText(); 
```

连接到数据库后，查询是：

```
String query="INSERT INTO student(A) VALUES('"+a+"') where date=' " +x+ " ';";

stmt.executeUpdate(query); 
```

*a 是一个分配有字母 P 的字符串。

**我得到**的错误是“....检查你的 mysql 语法....对应于 date='"+x'";"****

 **我想将文本字段中输入的日期与 mysql 'date' 列中的日期进行比较，如果正确，则应将 'a' 值（即 P）写入输入日期同一行的 A 列中...

请帮忙...

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:24:31.720

我在单引号之后/之前看到一个空格。

此外`date`，它也是一个 SQL 关键字，因此最好不要将其用作字段名称。你可以写

```
`date` 
```

* * *

***添加***

抱歉，我意识到我犯了错误（`date`在我们插入新记录时不能查询字段）。你的意思是：

```
String query = "INSERT INTO student(A) VALUES('P') WHERE CURRENT_DATE() = '2012-05-09'"; 
```

或者`date`是一个字段，而你只想设置另一个字段：

```
String query = "UPDATE student SET A = 'P' WHERE `date` = '2012-05-09'"; 
```

* * *

***将新记录插入同一张表***

这是不允许立即执行的，因此必须使用临时表。

```
CREATE TEMPORARY TABLE tmp (A VARCHAR(1));

INSERT INTO tmp (A) 
SELECT 'P' FROM student WHERE dt = '...';

INSERT INTO student(A) 
SELECT A FROM tmp;

DROP TABLE tmp; 
```**

# xml - 使用 JavaScript 重新加载 SVG

> ID：10484611
> 
> 赞同：1
> 
> 时间：2012-05-07T15:17:49.303
> 
> 标签：xml, svg, load, draw, appendchild

> **可能重复：**
> [在 SVG/XML 中是否有一些 innerHTML 替换？](https://stackoverflow.com/questions/9723422/is-there-some-innerhtml-replacement-in-svg-xml)

我正在从 SVG 矢量创建地图。我直接从服务器获取 SVG，我只使用 JavaScript 来插入整个 SVG。它确实附加了 XML/SVG，但它不绘制它。

```
function reload(){
xmlDoc=loadXMLDoc(getViewAddress());
    // it loads an entire XML document from a Java server
map=xmlDoc.getElementsByTagName("g")[0];
svgHead.appendChild(map);
} 
```

是否可以以这种方式绘制 SVG？还是我们必须单独画线？

# python - 克隆单元测试没有找到模块导入错误

> ID：10484612
> 
> 赞同：0
> 
> 时间：2012-05-07T15:17:51.527
> 
> 标签：python, path, plone

当我尝试在 RichDocuments 上运行单元测试时，出现错误：

```
[jd@jd:~/sandbox/trunk/eggs/Products.RichDocument-3.0.2-py2.4.egg/Products/RichDocument/tests]$ python ./testSetup.py
Traceback (most recent call last):
File "./testSetup.py", line 1, in ?
from Products.RichDocument.tests import base
ImportError: No module named RichDocument.tests 
```

1）这与我的python路径有关吗？

2）我在[这里](http://plone.org/documentation/kb/richdocument/unit-testing)看到它说：您可能必须设置环境变量INSTANCE_HOME和SOFTWARE_HOME。前者应该指向您的 Zope 实例（您的 Products 文件夹的父级），后者应该指向安装 Zope 的 python 库目录，例如 /usr/local/zope-2.8.4/lib/python。

我该如何设置？在`http://localhost:8380/manage`的控制面板中，它说：

```
SOFTWARE_HOME
/home/jd/sandbox/trunk/parts/zope2/lib/python

INSTANCE_HOME
/home/jd/sandbox/trunk/parts/client 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:30:58.627

你在使用Buildout吗？（如果没有，为什么不呢？）

如果是，请确保您有一个 testrunner 部分：

```
[test]
recipe = zc.recipe.testrunner
eggs =
    ${buildout:test-packages} 
```

现在您可以通过运行测试：`bin/test -s PACKAGE`并且您的路径将被正确设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:47:24.847

该错误是因为分发包不包含测试。如果您想为包运行测试，您需要检查它，设置构建以开发该包，然后按照 Auspex 的描述运行测试。

# perl - 我怎样才能让它打印到我的文件而不是我的 Perl 程序的屏幕上？

> ID：10484620
> 
> 赞同：1
> 
> 时间：2012-05-07T15:18:23.023
> 
> 标签：perl

我正在使用来自[Lingua::StopWords](http://search.cpan.org/perldoc/Lingua%3a%3aStopWords)的以下示例：

```
use Lingua::StopWords qw( getStopWords );
my $stopwords = getStopWords('en');

my @words = qw( i am the walrus goo goo g'joob );

# prints "walrus goo goo g'joob"
print join ' ', grep { !$stopwords->{$_} } @words; 
```

如何让它使用 my `$document`，删除停用词并将结果打印到文件中？在这里查看我的代码：

```
open(FILESOURCE, "sample.txt") or die("Unable to open requested file.");
my $document = <FILESOURCE>;
close (FILESOURCE);

open(TEST, "results_stopwords.txt") or die("Unable to open requested file.");

use Lingua::StopWords qw( getStopWords );
my $stopwords = getStopWords('en');

print join ' ', grep { !$stopwords->{$_} } $document; 
```

我尝试了这些变化：

```
print join ' ', grep { !$stopwords->{$_} } TEST;

print TEST join ' ', grep { !$stopwords->{$_} } @words; 
```

基本上，我如何阅读文档，删除停用词，然后将结果写入新文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:35:51.627

在您的程序中，您忘记将输入文本标记为单词。一个简单的替代方法`Lingua::EN::Splitter::words`是将[`split`](http://p3rl.org/split)空格上的一行插入单词列表（大约）。

考虑到[tchrist](https://stackoverflow.com/users/471272/tchrist)的评论，该程序适合作为 Unix 过滤器。

```
use strictures;
use Lingua::StopWords qw(getStopWords);
use Lingua::EN::Splitter qw(words);
my $stopwords = getStopWords('en');
while (defined(my $line = <>)) {
    print join ' ', grep { !$stopwords->{$_} } @{ words $line };
} 
```

# ruby - 如何在 created_at 字段上分组并仅返回日期和小时

> ID：10484621
> 
> 赞同：1
> 
> 时间：2012-05-07T15:18:42.460
> 
> 标签：ruby, postgresql, ruby-on-rails-3.1

我在 Rails 中运行以下命令：

```
coe = trackers.where(:trackable_type => "Mailing").count(:group => 'DATE(created_at)') 
```

它返回一个哈希值，其中的项目很好地分组。

但是，我想不仅按日期分组，而且按小时分组，而不是按分钟或秒分组。

如何运行此查询，以便所有繁重的工作都由 Postgresql 完成，并且在我取回数据集后不进行转换？

* * *

我的错误是我想按日期和时间分组。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:36:28.333

听起来你想要 date_trunc() 函数：

[http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-TABLE](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-TABLE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T01:13:39.677

> 我不想按日期分组，而是按小时分组，而**不是**按分钟或秒分组。

大胆强调我的。
所以`date_trunc()`可能不是你想要的，但是[`EXTRACT`or`date_part()`](http://www.postgresql.org/docs/current/interactive/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)：

```
coe = trackers.where(:trackable_type => "Mailing").count(:group => 'EXTRACT (hour FROM created_at)') 
```

# javascript - 面板内的 Sencha touch 2 列表

> ID：10484622
> 
> 赞同：4
> 
> 时间：2012-05-07T15:18:45.893
> 
> 标签：javascript, sencha-touch-2

有一个非常常见的任务要做，我需要一个列表上方的搜索表单来显示结果，问题是列表没有显示结果，商店和代理正常工作，因为当我使用 firebug 来定位列表项时列表的高度始终为 0px。

我已经搜索过，解决这个问题的常用方法是使用合适的布局，但是在父面板上使用它会使所有看起来都很小，就好像使用的宽度是 10 像素一样。

我无法设置固定高度，因为我希望列表填充剩余空间，并且当我希望使用按钮和输入字段的默认大小时，flex 选项不会导致搜索表单拉伸。

这是我在视图上使用的配置

```
Ext.define('MyApp.view.search.Search', {
extend:'Ext.navigation.View',
xtype: 'search_view',
config:{
    items:[
        {
            fullscreen:true,
            scroll:false,
            xtype:'panel',
            title:'Search',
            items:[
                {
                    xtype:'searchfield',
                    name:'search',
                    label:'Search',
                },
                {
                    xtype:'container',
                    layout:'hbox',
                    width:'100%',
                    margin:'3 0 0 0',
                    defaults:{
                        flex:1
                    },
                    items:[
                        {
                            xtype:'selectfield',
                            options:[
                                {text:'Option 1', value:'opt1'},
                                {text:'Option 2', value:'opt2'}
                            ]
                        },
                        {
                            xtype:'button',
                            text:'Search',
                            action:'search'
                        }
                    ]   
                },
                {
                    xtype:'list',
                    itemTpl:['{title}'],
                    onItemDisclosure:true,
                    plugins:[
                        { xclass: 'Ext.plugin.ListPaging' }
                    ]
                }

            ]
        },
    ],      
}
}); 
```

此图像描述了我试图实现的目标，我通过手动设置列表容器的高度来截取此屏幕截图，如您所见，问题是默认情况下列表高度不会填充表单下方的空间。

![目标](../Images/6f470eb962be7e6582dc51224ad61c1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:48:20.803

这就是我最终解决这个问题的方法，它更像是一种解决方法，因为我必须将布局更改为仅包含列表，并使用工具栏作为搜索选项，这样工具栏控件仅使用它们的最小高度需要正确地绘制自己。

```
Ext.define('MyApp.view.search.Search', {
extend:'Ext.Container',
xtype: 'search_view',
config:{
    fullscreen:true,
    layout:'card'
    items:[
        {
            xtype:'toolbar',
            docked:'top',
            items:[
                {
                    xtype:'searchfield',
                    name:'search',
                    flex:6
                },
                {
                    xtype:'button',
                    action:'search',
                    iconCls:'search',
                    iconMask:true,
                    ui:'simple',
                    flex:1
                }
                    ]
        },
        {
            xtype:'toolbar',
            docked:'top',
            items:[
                {
                    xtype:'selectfield',
                    flex:1,
                    options:[
                        {text:'Option 1', value:'opt1'},
                        {text:'Option 2', value:'opt2'}
                    ]
                }
            ]
        },
        {
             xtype:'list',
             itemTpl:['{title}'],
             onItemDisclosure:true,
             plugins:[
                 { xclass: 'Ext.plugin.ListPaging' }
             ]

        },
        ],      
    }
}); 
```

如您所见，我在顶部停靠了两个工具栏，并且列表填充了整个布局。这是它现在看起来的屏幕截图。

![在此处输入图像描述](../Images/c60daf6dbb60fe474232a052a1b56d72.png)

谢谢你的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:40:33.373

您是否尝试将容器布局设置为“适合”？，基本上它将使用所有剩余的可用高度，这里是 sencha touch 布局的一个很好的指南：http: [//docs.sencha.com/touch/2-0/ #!/guide/layouts](http://docs.sencha.com/touch/2-0/#!/guide/layouts)直接来自文档！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:04:51.850

面板应该有`vbox`布局，列表应该有`fit`布局和设置`flex`选项。

如下面的示例所示，如果`flex`值未设置为按钮，则它应该获得默认大小。

从[文档](http://docs.sencha.com/touch/2-0/#!/guide/layouts)中：

> 伸缩意味着我们根据每个子组件的伸缩来划分可用区域......

这是一个例子：

Ext.define('MyApp.view.Main', { 扩展：'Ext.tab.Panel',

```
config: {
  tabBarPosition: 'bottom',

  items: [
    {
      title: 'Welcome',
      iconCls: 'home',

      html: [
        "Some content"
      ].join("")
    },

    {
      title: "About",
      iconCls: 'star',
      layout: "vbox", // this card has vbox layout

      items: [{
        docked: 'top',
        xtype: 'titlebar',
        title: 'List'
      },

      {
        xtype: "list",
        layout: "fit", // take as much space as available
        flex: 1, // define flex
        data: [
          {name: 'Jamie Avins',  age: 100},
          {name: 'Rob Dougan',   age: 21},
          {name: 'Tommy Maintz', age: 24},
          {name: 'Jacky Nguyen', age: 24},
          {name: 'Ed Spencer',   age: 26}
        ],
        itemTpl: '{name} is {age} years old'
      },

      {
        xtype: 'button',
        text: "Button"
      }

      ]
    }
  ]
} 
```

});

和截图：

![截屏](../Images/cad529954c59620f7efbefa44e5f57f8.png)

注意：我正在学习 Sencha Touch，所以我不确定写的是否正确。

# haskell - Haskell中的元组如何访问第二个和第三个元素

> ID：10484623
> 
> 赞同：1
> 
> 时间：2012-05-07T15:19:04.310
> 
> 标签：haskell, tuples

我有以下内容：

```
type Description = String
type WeeklyHours = Float
type HourlyPay = Float
type JobDB = [(Description, WeeklyHours, HourlyPay)]

weeklyJobPay :: JobDB -> [(Description,Float)]
weeklyJobPay jDB = undefined 
```

对于 JobDB 中的每个元组，我需要函数 weekJobPay 将 weekHours 乘以 HourlyPay。我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T15:22:38.203

根据模式匹配定义访问器：

```
sndthd :: (a,b,c) -> (b,c)
sndthd (_,b,c) = (b,c) 
```

如果您有其他一些转换，例如小时 * 工资，类似的功能将是：

```
flatten :: JobDB -> (Description, Float)
flatten (d,h,p) = (d, h*p) 
```

请注意，您应该使用`Double`而不是`Float`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:22:17.687

使用模式匹配和地图：

```
weeklyJobPay :: JobDB -> [(Description,Float)]
weeklyJobPay jDB = map (\(desc, wh, hp) -> (desc, wh * hp)) jDB 
```

虽然创建一个函数会更好地计算每个职位描述的每周工资，然后将其映射为它们的列表：

```
weeklyDescPay (desc, wh, hp) = (desc, wh * hp)

weeklyJobPay = map weeklyDescPay 
```

# javascript - 在 Google 地图上打开标记信息窗口的超链接

> ID：10484626
> 
> 赞同：0
> 
> 时间：2012-05-07T15:19:10.880
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我有一张地图，旁边有一个侧边栏 div。我正在尝试使地图上的每个标记在侧边栏中都有一个相应的超链接，当单击时，该标记的信息框会弹出。

```
function linkClick(){
   google.maps.event.trigger(gmarkers[cpid], "click");
}

content += '<a href="javascript:linkClick(' + cpid + ')">'+tmpName+"</a><br>";
$("#cplist").html(content); 
```

cpid 是地图上每个点的唯一 ID，该值与标记的其余信息一起存储在数据库中。

我在地图上有我的标记，在侧栏中有我的链接，但我不确定如何在两者之间建立联系。我创建了“linkClick”函数来尝试实现这一点，但我得到了错误：

```
ReferenceError: Can't find variable: linkClick 
```

目前所有上述代码都在循环中，在地图上绘制标记。我想我已经包含了足够的细节/代码。

这是我想要实现的示例[http://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:26:42.357

我建议改变你的方法 - 而不是试图推动`click`事件，直接去`InfoWindow`and call `open`。在您的代码中的其他地方，您`click`为每个打开`InfoWindow`;的标记都有一个事件侦听器。因此，在调用附加到链接的函数时，保持对您的`InfoWindow`实例的引用并打开它们，就像在标记`click`事件处理程序中一样。`onlick`

或者，如果您遵循通用策略并使用单个全局`InfoWindow`，只需编写一个接受 的函数，`cpid`将必要的内容放入`InfoWindow`，设置正确的`position`，然后调用`InfoWindow.open( map )`。

因此，如果这是您的事件侦听器代码：

```
google.maps.event.addListener(marker, 'click', function () {
    infowindow.setContent(tmpName+" is "+tmpDist+"km away from you."); 
    infowindow.open(map, this);
}); 
```

添加一个新功能：

```
function openInfoWindow( cpidAndWhateverElseParam ) {
    infowindow.setContent(tmpName+" is "+tmpDist+"km away from you."); 
    infowindow.open(map, this);
} 
```

并将您的链接代码更改为：

```
content += '<a href="javascript:openInfoWindow(' + cpidAndWhateverElseParam +
    ')">'+tmpName+"</a><br>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:34:39.733

对于函数，您没有传递任何变量，这就是它给出 ReferenceError: Can't find variable: linkClick 的原因

```
function linkClick(cpid){
   google.maps.event.trigger(gmarkers[cpid], "click");
}

content += <a onClick=linkClick(' + cpid + ')">'+tmpName+"</a><br>";
$("#cplist").html(content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:30:03.517

我曾经做过类似的事情，但是我没有使用元素，而是使用了`a`一个按钮，并且在事件中像 javascript pure 一样，`OnClick`我放置了我的事件处理程序并且它可以工作，所以在你的情况下，我尝试像这样处理事件

```
<a onClick=linkClick(' + cpid + ')">'+tmpName+"</a> 
```

# iphone - 阻塞主线程直到 UIWebView 完成加载

> ID：10484629
> 
> 赞同：2
> 
> 时间：2012-05-07T15:19:15.707
> 
> 标签：iphone, ios, uiwebview

我试图阻止主线程，直到 UIWebView 完成加载，但在调用`[NSThread sleepForTimeInterval:]`后调用`[UIWebView loadRequest:]`会使加载永远不会完成：`webViewDidFinishLoad`在睡眠完成后调用委托。

为什么会这样？以及如何阻止主线程？
我`loadPage`从打电话`[ViewController willRotateToInterfaceOrientation:]`，我想做的是防止 iOS 界面旋转，直到加载了另一个方向的 webview。

```
- (void)loadPage {
    UIWebView* webview2 = [[UIWebView alloc] initWithFrame:rect];
    webview2.delegate = self;

    NSString* htmlPath = ..... ; // Path to local html file
    NSURL *newURL = [[[NSURL alloc] initFileURLWithPath: htmlPath] autorelease];
    NSURLRequest *newURLRequest = [[[NSURLRequest alloc] initWithURL: newURL] autorelease];

    [webview2 loadRequest:newURLRequest];
    [NSThread sleepForTimeInterval:10.0f]; // Why this blocks the uiwebview thread ??
    [self.view addSubview:webview2];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"Finished loading!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:30:08.813

我认为您正在尝试解决错误的问题。

你不想阻塞主线程。首先，整个 UI 是在主线程上绘制的，所以它看起来好像你的应用程序已经挂起。其次， UIWebView 是 UI 的一部分（这可能就是您所做的事情不起作用的原因）。

那么该怎么办？

看看下面的方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

当您开始加载页面时，您可以`NO`从此方法返回。加载完成后，您可以正常返回值。`UIWebView`有一个代表告诉你状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:25:56.130

看看[NSURLRequest](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)的类参考，那里有一个同步方法。

```
+ (NSData *)sendSynchronousRequest:(NSURLRequest *)request returningResponse:(NSURLResponse **)response error:(NSError **)error 
```

# django - 在 Django 模型中访问经过身份验证的用户的信息

> ID：10484631
> 
> 赞同：1
> 
> 时间：2012-05-07T15:19:29.323
> 
> 标签：django, django-models, django-forms, django-storage

我想知道我们如何在另一个模型中访问用户的数据？例如，这是我目前的情况。

*   用户拥有公司的外键；所以用户与公司相关联。
*   我已经实现了一个文件上传页面。此页面使用自定义存储解决方案，将文件上传到 Amazon S3。（它基于 S3BotoStorage）。
*   在此构造函数中，我想访问与该公司关联的 bucket_name，该公司与用户相关联。我的所有用户都必须登录才能使用上传页面。
*   所以：登录的用户有公司的外键，公司有bucket_name。登录用户在文件上传页面。

这是视图：

```
class PictureCreateView(CreateView):
    model = Picture

    def __init__(self, *args, **kwargs):
        super(PictureCreateView, self).__init__(*args, **kwargs)

    def form_valid(self, form):    
        self.object = form.save()
        self.request.FILES.get('file')
        data = [{'name': f.name, 'url': settings.MEDIA_URL + "pictures/" + f.name.replace(" ", "_"), 'thumbnail_url': settings.MEDIA_URL + "pictures/" + f.name.replace(" ", "_"), 'delete_url': reverse('upload-delete', args=[self.object.id]), 'delete_type': "DELETE"}]
        response = JSONResponse(data, {}, response_mimetype(self.request))
        response['Content-Disposition'] = 'inline; filename=files.json'
        return response 
```

这是图片模型（文件模型或其他）

```
from django.core.files.storage import default_storage as s3_storage

class Picture(models.Model):

    def custom_upload_to(instance, filename):
        return 'pictures/' + filename        

    def save(self, *args, **kwargs):
        super(Picture, self).save(*args, **kwargs)

    file = models.FileField(storage=s3_storage,upload_to=custom_upload_to) 
```

* * *

这是我在 settings.py 中设置为我的 default_storage 的存储模型：

```
from storages.backends.s3boto import S3BotoStorage

class customStorage(S3BotoStorage):
    def __init__(self, *args, **kwargs):
        kwargs['bucket'] = ***HERE-I-WANT-TO-GET-COMPANY'S-BUCKET***
        super(customStorage, self).__init__(*args, **kwargs) 
```

从 from 或模板中，我可以传递它有一个参数并稍后检索它吗？我可以直接在模型中检索这些信息吗？关于如何做到这一点的任何想法？

谢谢！

编辑：这与用户有关，因为用户将包含与其链接的公司的 ForeignKey，并且该公司将包含有问题的 Bucket ...

编辑#2：我刚刚在 form_save 中尝试**了 self.object.user = self.request.user**并且它可以工作，但是我怎样才能超越它并访问我在使用 UserProfile 类扩展 User 时添加的字段？例如：

```
self.object.user = self.request.user
self.company = self.object.user.company.bucket 
```

所以公司是用户扩展配置文件中的一个外键，公司包含一个桶字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:54:03.800

你不能改变用户，所以我假设你的外键在个人资料上。您可能想要使用 self.request.user。[get_profile()](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.get_profile "获取配置文件") .company.bucket。`AUTH_PROFILE_MODULE`通过在 settings.py 中进行设置，确保您已正确配置了配置文件模块

# javascript - 处理其他元素未处理的 Javascript 事件

> ID：10484634
> 
> 赞同：5
> 
> 时间：2012-05-07T15:19:48.477
> 
> 标签：javascript, javascript-events

我正在编写一个脚本，我只想在鼠标事件之前没有被任何其他元素处理过的情况下处理它们。

我可以将事件侦听器附加到文档对象，但它会接收所有事件，无论它们是否已被处理。

我无法控制 HTML 页面中的元素，因此在处理事件时无法手动 stopPropagation()。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:54:57.583

因此，您可以在特定情况下完成您想要的事情。具体来说，如果

*   您可以在原始 JavaScript 之前加载您自己的自定义 JavaScript
*   你知道你在监听哪些元素让其他人在上面抛出事件

实际上，您所做的是将目标元素上的原始 addEventListener 方法替换为自定义方法，该方法拦截调用，进行一些特殊处理，然后让它正常继续。这种“特殊处理”是一个新函数，它包装了原始回调，并用某种状态标记事件参数，让您知道其他人已经处理了该事件。这是一个概念证明（带有[jsFiddle](http://jsfiddle.net/qDfY4/)）

目标 HTML：

```
<div id='asdf'>asdf</div>​ 
```

JavaScript：

```
var target = document.getElementById('asdf');
var original = target.addEventListener;

var updated = function(){
    // Grab the original callback, so we can use it in our wrapper
    var originalFunc = arguments[1];

    // Create new function for the callback, that lets us set a state letting us know it has been handled by someone
    // Finish the callback by executing the original callback
    var newFunc = function(e){
        console.log('haha,  intercepted you');
        e.intercepted = true;
        originalFunc.call(this, e);
    };

    // Set the new function in place in the original arguments 'array'
    arguments[1] = newFunc;

    // Perform the standard addEventListener logic with our new wrapper function
    original.apply(this, arguments);
};

// Set the addEventListener on our target to our modified version
target.addEventListener = updated;

// Standard event handling
target.addEventListener('click', function(e){ 
    console.log('original click'); 
    console.log('intercepted?', e.intercepted);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:56:18.417

从这篇文章**[到这里](http://www.quirksmode.org/js/events_advanced.html)**。

似乎还不可能做到这一点。

> 注册了哪些事件处理程序？
> 
> W3C 事件注册模型当前实现的一个问题是，您无法确定是否有任何事件处理程序已注册到元素。在传统模型中，您可以这样做：
> 
> `alert(element.onclick)`
> 
> 并且您会看到注册到它的函数，如果没有注册则未定义。仅在其最近的 DOM Level 3 Events W3C 中添加了一个

`eventListenerList`

> 存储当前在元素上注册的事件处理程序列表。*任何浏览器尚不支持此功能*，它太新了。但是，问题已经解决。
> 
> 幸运的是

```
removeEventListener() 
```

> 如果您要删除的事件侦听器尚未添加到元素中，则不会给出任何错误，因此当您有疑问时，您始终可以使用 removeEventListener()。

# vb.net - VB.NET 笛卡尔坐标系

> ID：10484639
> 
> 赞同：1
> 
> 时间：2012-05-07T15:20:12.813
> 
> 标签：vb.net, forms, system, coordinate, cartesian

我想以 Windows 形式制作笛卡尔坐标系，并能够在其中绘制 (x,y) 坐标。

我该怎么做呢？我已经做了我的研究，但不幸的是我只登陆“图表”而不是笛卡尔平面。

有关我的问题的任何链接都会有所帮助...谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:27:01.417

您应该创建一个自定义 UserControl 并使用 Paint 甚至在控件的表面上进行绘制。Paint 事件为您提供了一个 Graphics 对象，您可以使用它来绘制图形。然而，最重要的是，您需要交换 Y 轴。在 Windows 中，屏幕的左上角是 0,0 而不是左下角。

因此，例如，以下代码将在 contorl 上绘制图形的 x 和 y 轴：

```
Public Class CartesianGraph
    Public Property BottomLeftExtent() As Point
        Get
            Return _bottomLeftExtent
        End Get
        Set(ByVal value As Point)
            _bottomLeftExtent = value
        End Set
    End Property
    Private _bottomLeftExtent As Point = New Point(-100, -100)

    Public Property TopRightExtent() As Point
        Get
            Return _topRightExtent
        End Get
        Set(ByVal value As Point)
            _topRightExtent = value
        End Set
    End Property
    Private _topRightExtent As Point = New Point(100, 100)

    Private Sub CartesianGraph_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
        Dim extentHeight As Integer = _topRightExtent.Y - _bottomLeftExtent.Y
        Dim extentWidth As Integer = _topRightExtent.X - _bottomLeftExtent.X
        If (extentHeight <> 0) And (extentWidth <> 0) Then
            If (_bottomLeftExtent.Y <= 0) And (_topRightExtent.Y >= 0) Then
                Dim xAxis As Integer = e.ClipRectangle.Height - (_bottomLeftExtent.Y * -1 * e.ClipRectangle.Height \ extentHeight)
                e.Graphics.DrawLine(New Pen(ForeColor), 0, xAxis, e.ClipRectangle.Width, xAxis)
            End If
            If (_bottomLeftExtent.X <= 0) And (_topRightExtent.X >= 0) Then
                Dim yAxis As Integer = e.ClipRectangle.Width * _bottomLeftExtent.X * -1 \ extentWidth
                e.Graphics.DrawLine(New Pen(ForeColor), yAxis, 0, yAxis, e.ClipRectangle.Height)
            End If
        End If
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:28:17.027

在 WinForms 中，您可以使用**PictureBox**控件，然后使用 DrawLine、DrawEllipse 等图元在其上进行绘制。以下 SO 问题包含一个示例：

*   [怎么在画框里画图](https://stackoverflow.com/questions/1537090/how-to-draw-drawings-in-picture-box/1537208)

在 WPF 中，您可以类似地使用**Canvas**控件：

*   [使用 Graphics 绘制 WPF 画布](https://stackoverflow.com/questions/2944358/wpf-canvas-drawing-with-graphics)

如果你想要自动轴和标签，**图表**确实是要走的路。对于您的用例，*点图*似乎是正确的解决方案：

*   [点图（图表控件）](http://msdn.microsoft.com/en-us/library/dd456684.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:46:47.537

.NET 有一个图表库，但是有一些开源项目可以很好地完成这类事情。如果你想绘制坐标，Zedgraph 使这相对容易并且非常灵活。

*   [这个 ZedGraph Example 给出了很好的介绍](http://sharpstatistics.co.uk/stats/zedgraph-example/)

![ZedGraph 示例](../Images/317987042fd69ea2d909d7c22b330934.png)

[动态数据显示](http://dynamicdatadisplay.codeplex.com/)也值得一看，不过是WPF，不是Windows Forms

# c++ - 如何跨内核同步 TSC？

> ID：10484640
> 
> 赞同：4
> 
> 时间：2012-05-07T15:20:17.093
> 
> 标签：c++, linux, performance, assembly

使用：

```
inline uint64_t rdtsc()
{
  uint32_t cycles_high;
  uint32_t cycles_low;

  asm volatile ("CPUID\n\t"
      "RDTSC\n\t"
      "mov %%edx, %0\n\t"
      "mov %%eax, %1\n\t": "=r" (cycles_high), "=r" (cycles_low)::
      "%rax", "%rbx", "%rcx", "%rdx");
  return ( ((uint64_t)cycles_high << 32) | cycles_low );
} 
```

线程 1 运行

```
while(globalIndex < COUNT)
{
  while(globalIndex %2 == 0 && globalIndex < COUNT)
    ;
  cycles[globalIndex][0] = rdtsc();
  cycles[globalIndex][1] = cpuToBindTo;
  __sync_add_and_fetch(&globalIndex,1);
} 
```

线程 2 运行

```
while(globalIndex < COUNT)
{
  while(globalIndex %2 == 1 && globalIndex < COUNT)
    ;
  cycles[globalIndex][0] = rdtsc();
  cycles[globalIndex][1] = cpuToBindTo;
  __sync_add_and_fetch(&globalIndex,1);
} 
```

我在看

```
CPU     rdtsc()         t1-t0
11 = 5023231563212740   990
03 = 5023231563213730   310
11 = 5023231563214040   990
03 = 5023231563215030   310
11 = 5023231563215340   990
03 = 5023231563216330   310
11 = 5023231563216640   990
03 = 5023231563217630   310
11 = 5023231563217940   990
03 = 5023231563218930   310
11 = 5023231563219240   990
03 = 5023231563220230   310
11 = 5023231563220540   990
03 = 5023231563221530   310
11 = 5023231563221840   990
03 = 5023231563222830   310
11 = 5023231563223140   990
03 = 5023231563224130   310
11 = 5023231563224440   990
03 = 5023231563225430   310
11 = 5023231563225740   990
03 = 5023231561739842   310
11 = 5023231561740152   990
03 = 5023231561741142   310
11 = 5023231561741452   12458
03 = 5023231561753910   458
11 = 5023231561754368   1154
03 = 5023231561755522   318
11 = 5023231561755840   982
03 = 5023231561756822   310
11 = 5023231561757132   990
03 = 5023231561758122   310
11 = 5023231561758432   990
03 = 5023231561759422   310 
```

我不确定我是如何收到 12458 的乒乓球的，但想知道为什么我看到的是 310-990-310 而不是 650-650-650。我认为 tsc 应该是跨核心同步的。我的 constant_tsc cpu 标志已打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T03:18:29.767

你在什么上面运行这段代码？TSC 同步应该在操作系统/内核中完成，并且依赖于硬件。例如，您可以通过引导加载程序将类似标志传递`powernow-k8.tscsync=1`给内核引导参数。

您需要为您的操作系统和硬件组合搜索正确的 TSC 同步方法。总的来说，这整个过程是自动化的——如果您在自定义内核或非 i686 硬件上运行，我不会感到惊讶？

如果您使用正确的术语在 Google 上搜索，您会发现很多资源，例如关于此主题的邮件列表讨论。例如，这里有[一个正在讨论的算法](http://www.x86-64.org/pipermail/discuss/2005-May/006037.html)（尽管它显然不是一个好的算法）。然而，这不是用户级开发人员应该担心的事情——这是只有内核开发人员才需要担心的神秘魔法。

基本上，操作系统的工作是在启动时同步 SMP 机器上所有不同处理器和/或内核之间的 TSC 计数器，并在一定的误差范围内。如果您看到的数字非常偏离，则 TSC 同步存在问题，您最好花时间找出您的操作系统未正确同步 TSC 的原因，而不是尝试实施您自己的 TSC 同步算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T19:53:50.877

您有 NUMA 内存架构吗？全局计数器可以位于 RAM 中，其中一个 CPU 距离几跳，另一个 CPU 位于本地。您可以通过将线程固定到同一 NUMA 节点上的核心来测试这一点。

编辑：我猜这是因为性能是特定于 CPU 的。

编辑：关于同步 TSC。我不知道一种简单的方法，这并不是说没有！如果您将核心 1 作为参考时钟，然后将其与核心 2 进行比较，会发生什么情况？如果您多次进行该比较并取最小值，您可能会得到一个很好的近似值。当您在比较过程中被抢占时，这应该可以处理这种情况。

# java - 休眠：“分离的实体传递给坚持”错误

> ID：10484641
> 
> 赞同：1
> 
> 时间：2012-05-07T15:20:17.080
> 
> 标签：java, spring, hibernate

我无法理解我的代码有什么问题，实际上，在我的系统中，我想对特定课程进行评估，我想保存这个评估的内存，但是，当我尝试保存它时，系统会带我这个错误：

完整的堆栈跟踪。

```
GRAVE: 
   Servlet.service() for servlet [Spring MVC Dispatcher Servlet] in context with path          [/orion-web] threw exception [Request processing failed; nested exception is    org.springframework.webflow.execution.ActionExecutionException: Exception thrown executing [AnnotatedAction@165b124 targetAction = [EvaluateAction@150c296 expression = inserimentoRecruitingController.salvaRecruiting(), resultExpression = [null]], attributes = map[[empty]]] in state 'valutazione' of flow 'valutazioneCandidato-flow' -- action execution attributes were 'map[[empty]]'] with root cause
org.hibernate.PersistentObjectException: [color=#FF0000]detached entity passed to persist: it.dstech.dms.cigno.jpa.model.impl.CurriculumVitaeEntityImpl[/color]
   at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:127)
   at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:799)
   at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:791)
   at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:48)
   at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:392)
   at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:335)
   at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:204)
   at org.hibernate.engine.Cascade.cascade(Cascade.java:161)
   at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:450)
   at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:282)
   at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203)
   at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129)
   at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:69)
   at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:179)
   at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:135)
   at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
   at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808)
   at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782)
   at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786)
   at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
   at java.lang.reflect.Method.invoke(Unknown Source)
   at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
   at $Proxy30.persist(Unknown Source)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
   at java.lang.reflect.Method.invoke(Unknown Source)
   at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
   at $Proxy30.persist(Unknown Source)
   at it.dstech.dms.cigno.service.core.service.impl.recruiting.RecruitingServiceImpl.saveRecruiting(RecruitingServiceImpl.java:55)
   at it.dstech.dms.cigno.service.core.service.impl.recruiting.RecruitingServiceImpl$$FastClassByCGLIB$$1e5f6a9c.invoke(<generated>)
   at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
   at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:617)
   at it.dstech.dms.cigno.service.core.service.impl.recruiting.RecruitingServiceImpl$$EnhancerByCGLIB$$6a801cce.saveRecruiting(<generated>)
   at it.dstech.dms.orion.swf.manager.impl.GestioneRecruitingWFManagerImpl.doInsertRecruiting(GestioneRecruitingWFManagerImpl.java:45)
   at it.dstech.dms.cigno.model.InserimentoRecruitingController.salvaRecruiting(InserimentoRecruitingController.java:38)
   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
   at java.lang.reflect.Method.invoke(Unknown Source)
   at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:69)
   at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:110)
   at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)
   at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)
   at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)
   at org.springframework.binding.expression.spel.SpringELExpression.getValue(SpringELExpression.java:84)
   at org.springframework.webflow.action.EvaluateAction.doExecute(EvaluateAction.java:75)
   at org.springframework.webflow.action.AbstractAction.execute(AbstractAction.java:188)
   at org.springframework.webflow.execution.AnnotatedAction.execute(AnnotatedAction.java:145)
   at org.springframework.webflow.execution.ActionExecutor.execute(ActionExecutor.java:51)
   at org.springframework.webflow.engine.support.ActionTransitionCriteria.test(ActionTransitionCriteria.java:82)
   at org.springframework.webflow.engine.support.TransitionCriteriaChain.test(TransitionCriteriaChain.java:71)
   at org.springframework.webflow.engine.Transition.canExecute(Transition.java:195)
   at org.springframework.webflow.engine.Transition.execute(Transition.java:211)
   at org.springframework.webflow.engine.impl.FlowExecutionImpl.execute(FlowExecutionImpl.java:393)
   at org.springframework.webflow.engine.impl.RequestControlContextImpl.execute(RequestControlContextImpl.java:214)
   at org.springframework.webflow.engine.TransitionableState.handleEvent(TransitionableState.java:119)
   at org.springframework.webflow.engine.Flow.handleEvent(Flow.java:555)
   at org.springframework.webflow.engine.impl.FlowExecutionImpl.handleEvent(FlowExecutionImpl.java:388)
   at org.springframework.webflow.engine.impl.RequestControlContextImpl.handleEvent(RequestControlContextImpl.java:210)
   at org.springframework.webflow.engine.ViewState.handleEvent(ViewState.java:232)
   at org.springframework.webflow.engine.ViewState.resume(ViewState.java:196)
   at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
   at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:261)
   at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
   at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
   at org.springframework.faces.webflow.JsfFlowHandlerAdapter.handle(JsfFlowHandlerAdapter.java:48)
   at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
   at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
   at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
   at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
   at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
   at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
   at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
   at      

      org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:   539)
   at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
   at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
   at java.lang.Thread.run(Unknown Source) 
```

这些是具有休眠映射的类，红色是发生问题的关系

```
 @Entity
   @Table(name = "CGN_CURRVIT")
   public class CurriculumVitaeEntityImpl extends AbstractJpaEntity implements
      CurriculumVitaeEntity {

   private static final long serialVersionUID = 1L;

   @Id
   @GeneratedValue(strategy = GenerationType.AUTO)
   @Column(name = "ID")
   private Long id;

   @ManyToOne(targetEntity = PersonaEntityImpl.class, cascade = CascadeType.ALL)
   @JoinColumn(name = "PERSONA")
   private PersonaEntity persona;

   @OneToOne(mappedBy = "curriculumVitae", targetEntity = RecruitingEntityImpl.class)
   @Cascade({ org.hibernate.annotations.CascadeType.SAVE_UPDATE })
   private List<RecruitingEntity> recruitingEntity;
   `

 `
   @Entity
   @Table(name = "CGN_RECR")
   public class RecruitingEntityImpl extends AbstractJpaEntity implements
      RecruitingEntity {

   /**
    * 
    */
   private static final long serialVersionUID = 1L;
   @Id
   @Column(name = "ID")
   @GeneratedValue(strategy = GenerationType.AUTO)
   private Long id;

   @Column(name = "RECRUITING_ID")
   private Long recruitingId;

   @Column(name = "GIUDIZIO")
   private Long giudizio;       //valore da 1 a 5

   @Column(name = "NOTE")
   private String note;

   @OneToOne(targetEntity = ValutazioneEntityImpl.class, cascade = CascadeType.ALL, fetch =           

   FetchType.EAGER)
   @JoinColumn(name = "VALUTAZIONE")
   private ValutazioneEntity valutazione = new ValutazioneEntityImpl();

  @OneToOne(targetEntity = CurriculumVitaeEntityImpl.class, cascade = CascadeType.ALL )
   @JoinColumn(name = "CURRICULUM_ID")
   @Cascade({ org.hibernate.annotations.CascadeType.SAVE_UPDATE })
   private CurriculumVitaeEntity curriculumVitae;

   .......
   } 
```

这是在数据库上提供数据存储的类

公共类 RecruitingServiceImpl 扩展 AbstractDmsService 实现 RecruitingService {

公共无效 saveRecruiting（RecruitingEntity 招聘）{

```
 /* in curriculumVitae ci sono tutti i dati da salvare */

  /*
   * Cerco il persistenceStatus dal db e lo setto al curriculum vitae e
   * alla persona associata
   */
  PersistenceStatus persistenceStatus = this.entityManager.find(
        PersistenceStatusImpl.class, 1L);
  recruiting.setPersistenceStatus(persistenceStatus);

  ValutazioneTipologicalEntity valutazioneEntity = valutazioneService
        .findByDescription(recruiting.getValutazione().getValutazione()
              .getDescription());
  recruiting.getValutazione().setValutazione(valutazioneEntity);

  recruiting.getValutazione()
        .setPersistenceStatus(persistenceStatus);

  entityManager.persist(recruiting);

  } 
```

# jquery - 避免 jQuery 中的重复函数

> ID：10484646
> 
> 赞同：0
> 
> 时间：2012-05-07T15:20:28.510
> 
> 标签：jquery, wordpress

我在我的网站上使用了两个脚本

1.  jQuery/Ajax 在不重新加载页面的情况下加载接下来的三个帖子
2.  jQuery 在 iF​​rame/modal 对话框中打开每个帖子

问题是：点击“加载更多帖子”后，然后点击前3个帖子中的一个，帖子被打开两次。

我需要找到一种方法来删除前一个占位符的函数 superbox() 并为新的占位符再次添加它（否则新帖子只会在普通窗口中打开）。

该网站是[http://gotoviproekti-och.com](http://gotoviproekti-och.com)

```
 if(pageNum <= max) {
    // Insert the "More Posts" link.
    $('.content-middle')
        .append('<div class="pbd-alp-placeholder-'+ pageNum +'"></div>')            

        .append('<p id="pbd-alp-load-posts"><a href="#">Покажи още готови проекти</a></p>');

    $(function(){
        $.superbox();
        });
        //Single Page Carousel
        $(function() {
        $(".image").click(function() {
        var image = $(this).attr("rel");
        $('#image').hide();
        $('#image').fadeIn('slow');
        $('#image').html('<img src="' + image + '"/>');
        return false;
            });
        });
    }

/**
 * Load new posts when the link is clicked.
 */
$('#pbd-alp-load-posts a').click(function() {

    // Are there more posts to load?
    if(pageNum <= max) {

        // Show that we're working.
        $(this).text('Loading...');

        $('.pbd-alp-placeholder-'+ pageNum).load(nextLink + ' .pic',
            function() {
                // Update page number and nextLink.
                pageNum++;
                nextLink = nextLink.replace(/\/page\/[0-9]?/, '/page/'+ pageNum);

                // Add a new placeholder, for when user clicks again.
                $('.content-middle')
                .append('<div class="pbd-alp-placeholder-'+ pageNum +'"></div><div class="clearfloat"></div>')

                $.superbox.detach();

                $.superbox();

                // Update the button message.
                if(pageNum <= max) {
                    $('#pbd-alp-load-posts a').text('Load more posts');
            }
        );
    } else {
        $('#pbd-alp-load-posts a').append('.');
    }   

    return false;
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:30:22.423

使用`$.on()`，您只需绑定一次事件。

```
$('#posts-container').on('click', '.post', doPostEvent); 
```

# connection - 限制 Netty 连接

> ID：10484651
> 
> 赞同：1
> 
> 时间：2012-05-07T15:20:51.643
> 
> 标签：connection, netty, throttling

我正在尝试为我们的内部非阻塞反应器寻找替代品，到目前为止，Netty 似乎很合适。我唯一想不通的是是否有任何对连接的限制支持。我想控制单个连接的传入和传出速率。是否有任何支持，或者我必须在上面编写自己的节流器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T19:14:55.690

看一眼：

[io.netty.handler.traffic](http://grepcode.com/search?query=io.netty.handler.traffic&n=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:25:11.563

在netty中没有这样的东西。但是总是欢迎贡献；）

# jquery - jquery validate - 在 show() 上隐藏的单选按钮；和交互 - “元素未定义”

> ID：10484653
> 
> 赞同：0
> 
> 时间：2012-05-07T15:20:53.363
> 
> 标签：jquery, radio-button, jquery-validate

我有一个基于复选框选择显示/隐藏表单部分的表单。

隐藏的部分表单包含单选按钮：

```
<div class="input grid_4 alpha omega suffix_8">
        <label>Company Name</label>
        <div class="clear"></div>
        <label class="radio inline">
        <input type="radio" value="homeAddress" id="homeAddress" name="addressSelect">
        Home </label>
        <label class="radio inline">
        <input type="radio" value="bizAddress" id="bizAddress" name="addressSelect">
        Business </label>
        </div> 
```

当我显示表单的该部分并与单选按钮交互时，我收到以下错误：

错误：元素未定义源文件：..../js/jquery.validate.js 行：674

第 674 行： `idOrName: function(element) { return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name); },`

我尝试忽略基于名称的单选按钮，但它仍然会引发错误。此外，如果单选按钮未隐藏（删除所有显示/隐藏功能），则不会出现错误。

想法？

见小提琴：http: [//jsfiddle.net/jasonday/fBZQ3/](http://jsfiddle.net/jasonday/fBZQ3/)

取消选中“这也是我的送货地址”，然后与单选按钮交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:36:24.620

简单地将名称属性分配给复选框后，我没有收到任何错误。

# php - PHP - 用微秒计算时间，在一秒钟内做出反应

> ID：10484654
> 
> 赞同：0
> 
> 时间：2012-05-07T15:20:54.270
> 
> 标签：php, time

我正在使用 php 命令 microTime(true) 从服务器检索时间。

我想在每次达到一整秒时触发一个事件，我需要微秒的准确性来确定何时达到一整秒。

这是我到目前为止的代码：

```
$time_start = microtime(true);

while($someValue){
    if(microtime(true)==time()){
        echo "<p>".microtime(true)."</p>";
        echo "<p>".time()."</p>";
    }

    //sleep for one microsecond
    usleep(1);
} 
```

有人可以帮助或向我解释如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:26:43.867

为什么不只使用一次usleep？

```
usleep(1000); 
```

你确定它会不那么精确吗？没看懂怎么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:30:52.847

这段代码比你的更适合我

```
$time = time();
while (true) {
        $curtime = time();
        if ($curtime > $time) {
                $time = $curtime;
                echo microtime(true), "\r\n";
        }
        usleep(1);
} 
```

您无法确定，该处理器在每微秒内都有时间处理您的进程。

# performance - 在 Hadoop mapreduce 作业中重用 JVM

> ID：10484658
> 
> 赞同：13
> 
> 时间：2012-05-07T15:21:13.443
> 
> 标签：performance, hadoop, jvm, mapreduce

我知道我们可以设置属性“mapred.job.reuse.jvm.num.tasks”来重用JVM。我的问题是：

（1）如何决定这里要设置的任务数，-1还是其他一些正整数？

(2) 在 mapreduce 作业中重用 JVM 并将该属性设置为 -1 是个好主意吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-07T17:22:30.663

如果您有非常小的任务肯定会在彼此之后运行，则将此属性设置为 -1 很有用（这意味着生成的 JVM 将被无限次重用）。因此，您只需生成（集群中可用于您的作业的任务数）-JVM，而不是（任务数）-JVM。

这是一个巨大的性能改进。在长时间运行的作业中，与设置新 JVM 相比，运行时的百分比非常低，因此它不会给您带来巨大的性能提升。

同样在长时间运行的任务中，最好重新创建任务进程，因为堆碎片等问题会降低您的性能。

此外，如果您有一些中期运行的作业，您可以只重用 2-3 个任务，这是一个很好的权衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T20:07:12.457

JVM 重用（仅在 MR1 中可能）应该有助于提高性能，因为它消除了 JVM 的启动滞后，但它只是微不足道的并且有许多缺点（读取副作用。大多数任务将运行很长时间（数十秒）甚至几分钟）和启动时间都不是问题，当您查看这些任务运行时间时。您想在干净的情况下启动新任务。当您重用 JVM 时，堆可能不完全干净（它是从之前的运行中产生的碎片）。碎片会导致更多的 GC 并抵消所有启动时间增益。如果存在内存泄漏，它也会影响内存使用等。所以最好启动一个新的 JVM对于任务（如果任务不是相当小）。在 MR2（YARN）中 - 总是为任务启动新的 JVM。对于 Uber 任务 - 它只会在本地 JVM 中运行任务。

# ruby-on-rails - Rails 3 - 自动测试指定类型的规范

> ID：10484662
> 
> 赞同：0
> 
> 时间：2012-05-07T15:21:33.570
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我使用 Rspec 开发 Rails 3 应用程序。对于自动测试，我使用`autotest`了很棒的 gem，但是......但是项目在增长，我有越来越多的文件并且`autotest`有奇怪的规则 - 有时它会测试我之前更改过的文件，有时它会测试整个项目（这需要很多时间）。您是否知道任何允许在后台自动测试的有用 gem + 它可以让您选择要测试的确切内容，例如模型规范，或仅控制器，或集成测试，或整个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:46:03.507

Guard 将监视您的规范文件和项目文件并运行相关规范（IE，在更改模型后运行模型规范），并且具有大量的自定义

[https://github.com/guard/guard-rspec](https://github.com/guard/guard-rspec)

# templates - 如何检查是否定义了 JSF 内容？

> ID：10484665
> 
> 赞同：3
> 
> 时间：2012-05-07T15:21:40.543
> 
> 标签：templates, jsf, jakarta-ee, facelets

我有这个模板：

```
<tr>
    <td>
        <ui:insert name="content">Content</ui:insert> 
    </td>
    <td class="rightpanel">
        <ui:insert name="rightpanel">RP</ui:insert> 
    </td>
</tr> 
```

只有当模板客户端定义了右面板内容时，我才想渲染右面板单元格。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T10:36:11.947

尝试这个

模板：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">

<h:head>
</h:head>

<h:body>
    <tr>
        <td>
            <ui:insert name="content">Content</ui:insert>
        </td>

            <ui:insert name="rightpanel"></ui:insert>

    </tr>
</h:body>
</html> 
```

模板客户端

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:body>
    <ui:composition template="./TestTemplate.xhtml">

        <ui:define name="content">
               ABCDEF
            </ui:define>
        <ui:define name="rightpanel">
            <h:outputText escape="false" value="<td> ABCD </td>">
            </h:outputText>
        </ui:define>
    </ui:composition>
</h:body>
</html> 
```

我只是使用转义字符来呈现数据。试一下 ：）

# iphone - UIPageViewController，我可以向前翻页但我不能向后翻页

> ID：10484666
> 
> 赞同：1
> 
> 时间：2012-05-07T15:21:43.833
> 
> 标签：iphone, objective-c, ipad, interface-builder, uipageviewcontroller

`UIPageViewController`我在这里学习如何使用[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)并让示例运行。但是当我把它放到我的应用程序中时，我只是用图像替换了要转动的文本，我发现图像可以向前翻页但不能向后翻页，我真的仔细检查了代码但我找不到原因？有人遇到这个问题吗？

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(BigPictureViewController *)viewController];
    if ((index == 0) || (index == NSNotFound))
    {
        return nil;
    }

    index--;
    return [self viewControllerAtIndex:index];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(BigPictureViewController *)viewController];

    if (index == NSNotFound)
    {
        return nil;
    }

    if (index == [self.pageContent count])
    {
        return nil;
    }

    index++;
    return [self viewControllerAtIndex:index];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:05:22.290

If you are using `UISplitViewController`, remove it's swipe gesture with `splitViewController.presentWithGesture = NO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:25:28.450

您可能尚未将 xib 事件连接到相关方法。

# authentication - 从桌面应用程序进行身份验证

> ID：10484671
> 
> 赞同：2
> 
> 时间：2012-05-07T15:22:14.750
> 
> 标签：authentication, windows-services, box-api

我正在构建一个 Windows 服务，可以在某些条件下将文件上传到 Box.com。如何在不让用户访问网页并输入用户名和密码的情况下进行身份验证？

我似乎无法在文档中找到详细信息。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:54:03.783

目前，您有两个选择。

1.  您可以注册“即时模式”测试版，通过 /tokens V2 API 端点为您获取身份验证令牌，但限制您访问用户帐户中的单个文件夹。
2.  您可以使用 V1 身份验证 API。如果您的应用程序是公司内部应用程序，那么我们有一个 V1 身份验证 API，我们可以启用它让您进行直接登录。但是，直接登录不太安全，通常不鼓励使用。

# java - Axis、Java 消息传递服务和 MIME 标头

> ID：10484677
> 
> 赞同：0
> 
> 时间：2012-05-07T15:22:24.897
> 
> 标签：java, web-services, jms, axis

我们正在通过 Axis 使用基于 Java 消息传递服务的 Web 服务，该 Web 服务返回一个包含在 MIME 标头中的 XML 文档。这会导致问题，因为我们无法识别返回值。在 Google上找到的解决方案状态是移动`mail.jar`到. 但是，我们使用托管解决方案，并且提供商 [Demandware] 不会让我们移动 jar 文件。这个问题还有其他解决方案吗？是否可以阻止 JMS 将返回值包装在 MIME 标头中（奇怪的是，我们对第三方 Web 服务的控制比我们的托管解决方案更多）。`activation.jar``classpath`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:37:51.710

听起来您希望 Demandware 充当 SOAP Web 服务服务器，不是吗？但是，当前版本的 Demandware 不支持此功能。目前仅支持基于 REST 的 Web 服务，并且可以由客户端使用。

从我的角度来看，也无法自定义它。这也可能是您遇到此问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:22:02.220

您可以使用 HTTPClient 与 WebService 进行通信，并使用 Demandware 脚本代码创建/解析 SOAP 信封，但这样做很乏味。您还可以查看 Jorge Matos 的 Webservice Framework 的 Demandware XChange 门户（关闭站点，需要注册）。

此外，使用命令行 AXIS 工具包并查看生成的存根可能会有所帮助。由于 AXIS 在 Demandware 服务器上使用，当您将 wsdl 文件包含在您的插件 webservices 文件夹中时，您将看到从 Demandware 内部生成和使用的相同存根。

# html-input - HTML 奇怪的 GET 参数

> ID：10484679
> 
> 赞同：0
> 
> 时间：2012-05-07T15:22:40.487
> 
> 标签：html-input

我有一个代码：

```
<input name="​date" value="0000-00-00 00:00:00"> 
```

提交后我进入网址：

```
URL ADDRES ? some_parameters &%E2%80%8B"date"=0000-00-00+00%3A00%3A00 
```

空格只是为了说明。重要的部分是我得到 %E2%80%8B"date" 而不是日期。我还注意到我得到了双双引号，所以浏览器中的代码看起来像这样。

```
<input name="​"date"" value="0000-00-00 00:00:00"> 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:42:19.627

你在某个地方有一个零宽度的空间。

该序列`%E2%80%8B`是 Unicode 码点 0x200b 的 UTF-8 编码，即[零宽度空格字符](https://en.wikipedia.org/wiki/Zero-width_space)。无论您使用的哪个编辑器都出于某种原因将其插入了 HTML，因此您需要将其取出（我想只需删除该行并重新输入它就可以做到这一点，并且您不必确切地计算出在哪里在这条线上）。

# python - python正则表达式findall，需要删除不精确的匹配

> ID：10484680
> 
> 赞同：0
> 
> 时间：2012-05-07T15:22:44.800
> 
> 标签：python, regex

尝试编写一个 RE 来识别 Python 中的日期格式 mm/dd

```
reg = "(((1[0-2])|(0?[1-9]))/((1[0-9])|(2[0-9])|(3[0-1])|(0?[0-9])))"
match = re.findall(reg, text, re.IGNORECASE)
print match 
```

* * *

对于 text = '4/13' 它给了我 `[('4/13', '4', '', '4', '13', '13', '', '', '')]`

只需要第一个元素。我不想要不精确的匹配，我该如何删除它们。

谢谢，

程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:33:29.287

您将获得所有这些匹配项，因为正则表达式中的每组括号都会生成一个匹配组。`(?:...)`如果您确实不希望结果集中包含组，则可以使用非分组匹配，例如。您也可以简单地从列表中取出第一项并忽略其他项。

这将使您的表达式看起来像：

```
reg = "((?:(?:1[0-2])|(?:0?[1-9]))/(?:(?:1[0-9])|(?:2[0-9])|(?:3[0-1])|(?:0?[0-9])))" 
```

有关更多信息，请参阅`re`文档。

这是一个完整的例子：

```
>>> text='4/13'
>>> reg = "((?:(?:1[0-2])|(?:0?[1-9]))/(?:(?:1[0-9])|(?:2[0-9])|(?:3[0-1])|(?:0?[0-9])))"
>>> re.findall(reg, text, re.IGNORECASE)
['4/13'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:36:03.357

它们不是“不完全匹配”。元组中的第一项对应于匹配的字符串，其他项对应于正则表达式中括号中的部分。

如果字符串中有多个日期，则需要：

```
reg = re.compile(...)
dates = [match[0] for match in reg.findall(text, re.IGNORE_CASE)] 
```

# haskell - 懒惰的评价

> ID：10484681
> 
> 赞同：1
> 
> 时间：2012-05-07T15:22:45.667
> 
> 标签：haskell

我不擅长说英语。

我认为。它将被评估，并打印“abc”、“efg”。

```
main =  return (map putStrLn ["abc", "efg"]) >> return () 
```

但是，我测试了它，它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T15:28:11.670

```
map putStrLn ["abc", "efg"] 
```

返回 type 的值列表`[IO ()]`，然后您将不执行该列表；相反，您正在调用`return`列表以获取 type 的值`IO [IO ()]`。

您可以使用以下函数执行`IO a`值列表：`sequence_`

```
main  =  sequence_ (map putStrLn ["abc", "efg"]) 
```

或使用简写`mapM_`：

```
main  =  mapM_ putStrLn ["abc", "efg"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T16:09:21.580

在任何单子中，由于[单子法则](http://www.haskell.org/haskellwiki/Monad_laws)`return x >> y`是一样的。`y`

```
return x >> y
= return x >>= \_ -> y    -- definition of >>
= (\_ -> y) x             -- left identity monad law
= y                       -- apply the lambda 
```

因此，与这就是为什么什么都没有发生`return (map putStrLn ["abc", "efg"]) >> return ()`是一样的。`return ()`懒惰的评估与它无关。

最简单的解决方法是使用`mapM_`，如另一个答案所示。

# .net - 使用 Visual Studio 在 SharePoint 列表中定义继承列的选择

> ID：10484682
> 
> 赞同：0
> 
> 时间：2012-05-07T15:22:46.120
> 
> 标签：.net, visual-studio-2010, sharepoint, sharepoint-2010, list-definition

我是 SharePoint 开发的新手，我正在尝试为我们的 IT 团队创建一个简单的问题跟踪器。

我正在尝试开发一个沙盒解决方案以部署到 SharePoint Online (O365)，其中包含基于“问题”内容类型的自定义内容类型和列表定义。

这一切都很好，但我需要知道如何修改我的内容类型/列表定义中的默认状态选择，我不知道如何实现这一点。

默认选择是：活动/已解决/已关闭。我希望它们是：打开/分配/进行中/关闭。

请注意，我了解如何在部署列表定义后更改 SharePoint 中的选择，但我想在我的 Visual Studio 项目中定义它们，以便在我部署解决方案时，选择已经正确设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:58:29.750

我发现我可以修改列表定义的 schema.xml 文件并在那里定义选择。

# unix - 在 Unix 中将字符串解析为标记

> ID：10484683
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:22:46.203
> 
> 标签：unix, sed, grep, replace

我想解析一个字符串（使用 awk/sed/grep）：

```
"EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD" 
```

结果应该是：

```
EffTimeStamp="20110203-210000"
InputCtxNm="Forigen Exchange Today"
RunType="EOD" 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:28:59.830

它需要几个不同的替换，但`sed`可以做到这一点。

```
sed 's/^"//; s/=/="/g; s/#/"\n/g' 
```

例如

```
% echo '"EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD"' | 
    sed 's/^"//;s/=/="/g;s/#/"\n/g'
EffTimeStamp="20110203-210000"
InputCtxNm="Forigen Exchange Today"
RunType="EOD" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:40:37.397

What shell are you using? For bash, you can write

```
str="EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD"
oifs=$IFS
IFS="#"
set -- $str
IFS=$oifs
printf "%s\n" "$@" 
```

outputs

```
EffTimeStamp=20110203-210000
InputCtxNm=Forigen Exchange Today
RunType=EOD 
```

If you don't want to use the positional parameters, you can store the values as an array:

```
arr=($str)
printf "%s\n" "${arr[@]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:42:09.443

or 和**awk**解决方案

```
 echo "EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD" \
 |  awk -F# -v OFS="\n" '{for (i=1;i<=NF; i++) printf("%s%s", $i, (i==NF ? "\n" : OFS)) }' 
```

**输出**

```
EffTimeStamp=20110203-210000
InputCtxNm=Forigen Exchange Today
RunType=EOD 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T13:41:21.083

`perl`修改`$/`（输入记录分隔符）和`$\`（输出记录分隔符）的一种简单方法：

```
echo -e "EffTimeStamp=20110203-210000#InputCtxNm=Forigen Exchange Today#RunType=EOD" | 
perl -pe 'BEGIN { $/ = q[#]; $\ = qq[\n] }' 
```

输出：

```
EffTimeStamp=20110203-210000#
InputCtxNm=Forigen Exchange Today#
RunType=EOD 
```

# c# - Dotnetnuke 用户未注册

> ID：10484684
> 
> 赞同：0
> 
> 时间：2012-05-07T15:22:48.353
> 
> 标签：c#, content-management-system, dotnetnuke

我刚刚在我的网站上安装了 Dotnetnuke。我在主页上放置了一个登录模块，用户可以从中注册。当他们点击注册时，会显示一个表格，他们填写表格并点击注册。它没有给出任何错误。显示忙碌指示符。我进行了已验证设置，但没有向用户发送电子邮件进行确认，如果我将安全设置更改为公开，则不会将用户添加到数据库中。可能是什么问题呢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:35:00.070

我找到了答案。在虚拟主机中，您应该选择没有集成管道的 Framework 4.0。它仅适用于没有集成管道的框架 4。

# android - Android中的Sqlite奇怪的rawQuery行为

> ID：10484685
> 
> 赞同：0
> 
> 时间：2012-05-07T15:22:54.900
> 
> 标签：android, sqlite

我使用 SQLiteDatabase 对象的 rawQuery 方法。

当我写

db.rawQuery("select * from xxx order by ? desc;", new String[] {"edit_time"});

它不会订购结果。

但是当我写

db.rawQuery("select * from xxx order by edit_time desc;", null);

它命令。

我做错事情了？

* * *

感谢桑迪斯，我发现我误读了文件。不应该有“;”。但删除“;” 似乎没有任何影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:28:16.733

该[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D%29)指定`"The SQL string must not be ; terminated"`，也许这就是您的问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:58:53.417

正如 Jens 所说的第一个问题：

```
db.rawQuery("select * from xxx order by ? desc;", new String[] {"edit_time"}); 
```

变成：

```
select * from xxx order by 'edit_time' desc 
```

由于我们不关心列名上的 SQL 注入，因此您应该使用：

```
db.rawQuery("select * from xxx order by edit_time desc", null); 
```

selectionArgs 旨在以这种方式使用：

```
db.rawQuery("select * from xxx order by edit_time like ? desc", new String[] { "%" + orderBy + "%"}); 
```

# macos - MySQL 工作台。语句前的评论后的分号？

> ID：10484686
> 
> 赞同：0
> 
> 时间：2012-05-07T15:23:00.383
> 
> 标签：macos, mysql-workbench

在 MySQL Workbench (Mac) 中，如果不在注释后的语句前放置分号，则不会执行语句。所以 DROP、USE 和 CREATE TABLE 不执行；下一条语句给出错误..

```
-- Comment
;DROP DATABASE IF EXISTS dbDataBase;

CREATE DATABASE dbDataBase
    CHARACTER SET 'utf8'
    COLLATE 'utf8_general_ci'; -- define set of rules to compare characters

;USE dbDataBase;

-- Make a table
;CREATE TABLE Teams
(
     teamID    INTEGER UNSIGNED NOT NULL, 
     teamName  VARCHAR(50)      NOT NULL
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:13:05.093

我已经为此[http://bugs.mysql.com/bug.php?id=67747发布了一个错误报告](http://bugs.mysql.com/bug.php?id=67747)

您的案例对我有用，但以下对我来说失败了：

```
SELECT 1;
DELIMITER ;
/* comment */
SELECT 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:01:51.800

我试过在有和没有分号的情况下运行它。它对我来说没问题。`CREATE TABLE`由于列定义之间缺少逗号，因此语句中存在错误。也许这就是造成混乱的原因（以及在状态报告中注释行与以下内容相连的事实，但这只是一条消息）。

我在 WB 最新版本的 Linux 中运行它。你能澄清一下你是否仍然有这种行为吗？

# facebook - 发布打开图形操作时错误的用户

> ID：10484688
> 
> 赞同：0
> 
> 时间：2012-05-07T15:23:26.187
> 
> 标签：facebook, api, facebook-graph-api, facebook-opengraph

也许这就是未经批准的操作的工作方式（我们仍在测试）......

我已经完成了设置新操作的过程，连接了我的代码库以具有适当的元标记和其他标记，并使帖子正常工作。当我测试动作时，我看到它出现在我的活动日志中，而应用程序上的其他开发人员看到它出现在他们的时间线中。完美的！

但是，如果该应用程序上的其他开发人员之一发布了一个操作，它就会显示为我做了它。它在我的活动日志中显示为我，并在他们的时间线中显示，就好像我触发了动作一样。

据我所知，我们不会将用户信息与请求一起传递。只是对象数据。

我错过了一些明显的东西吗？这就是未经批准的行为的运作方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:55:19.607

听起来可能很傻，但是当您向 Facebook 发帖时，请确保您传递的是***用户的***身份验证令牌，而不是您自己的，否则其他人所做的所有操作都会以您的身份发布。

# java - 巨大的 CPU 影响 LinkedBlockingQueue

> ID：10484693
> 
> 赞同：0
> 
> 时间：2012-05-07T15:23:46.370
> 
> 标签：java, multithreading, load, cpu

我有一个call ，但是当我调用`LinkedBlockingQueue`并等待任务可用时，CPU 使用率为 100%。我有多个线程使用该方法（每个线程都有自己的变量）。有谁知道为什么会这样？`tasks``tasks.take()``tasks.take()``tasks`

*`tasks`变量的定义*

```
private LinkedBlockingQueue<ComputerTask> tasks;
// snip
this.tasks = new LinkedBlockingQueue<ComputerTask>(100); 
```

*执行任务的代码*

```
ComputerTask task = tasks.take(); 
```

*提供新任务的代码*

```
this.tasks.offer(task); 
```

PS 我不知道这是否是我的 Java 版本的问题，因为我还没有在任何其他计算机上测试过它。

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-413-11M3623)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-413, mixed mode) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:02:07.043

> 我有一个`LinkedBlockingQueue`被调用的任务，但是当我调用`tasks.take()`并等待任务可用时，CPU 使用率为 100%。我有多个线程使用该`tasks.take()`方法（每个线程都有自己的任务变量）。

`tasks.take();`除非它正在使大量项目出队，否则不应旋转。如果队列为空，它将阻塞，所以我怀疑这*不是*100% 负载的原因。我会确保您使用分析器或在 周围添加调试语句`take()`以查看它是否被多次调用。

要记住的一件事是，如果队列已满，则立即`tasks.offer(task)`返回。`false`我想知道您应该使用`tasks.put(task)`which 将阻止而不是旋转。如果您`offer()`要确定在哪个任务处理程序上运行任务，那么当所有任务处理程序的队列都已满时，您可能正在循环往复？

如果您正在执行自己的任务管理，则可以考虑使用其中一个内置`ExecutorService`类。然后，您可以提交所有任务或使用阻塞队列，然后`ExecutorService`将处理池中的每个线程的任务：

```
// start 10 threads handling the tasks
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// now submit tasks to the pools that will be run with the 10 threads
threadPool.submit(task);
... 
```

在上面的例子`ComputerTask`中必须实现`Runnable`.

# javascript - EmberJS 是否有在 Handlebars-view 更新后被调用的事件？

> ID：10484697
> 
> 赞同：5
> 
> 时间：2012-05-07T15:24:16.837
> 
> 标签：javascript, jquery, ember.js, handlebars.js

这让我困惑了一段时间，但我设法继续推动它前进。不幸的是，我真的需要这个的时候到了。

我的问题是：EmberJS/Handlebars 是否提供了一个在视图更新并在 DOM 中可见时被调用的事件？

我需要使用这个事件来运行一些 jQuery 的东西，比如 addClass、sortable 等。我尝试过使用 Live jQuery 插件，但它不适用于 Handlebars。最重要的是，我假设所说的事件已经在某个地方，我似乎找不到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T15:51:07.913

您看过`willInsertElement`,`didInsertElement`和`willRerender`中的方法`Ember.View`吗？此外，这里有很多关于 SO 的帖子涉及将 jQuery 插件和框架与 Ember 集成。

[https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js#L1250-1267](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/views/view.js#L1250-1267)

**编辑/更新**

在评论中的第四次后退后，最终的解决方案是使用`Ember.run.next`. 见：http: [//jsfiddle.net/ud3323/SsRuX/](http://jsfiddle.net/ud3323/SsRuX/)

# php - 定期更改服务器行为

> ID：10484698
> 
> 赞同：0
> 
> 时间：2012-05-07T15:24:17.280
> 
> 标签：php, file

我和我的客户之间有一个`common settings file`共享的内容可供阅读。我的服务器正在使用另一个（外部）服务器 [经常停机] 用于. 指定是否应该执行。`PHP``javascript``specific validation``common settings file``validation`

我希望我的服务器更改`common settings file`为不检查服务器关闭约 30 分钟，然后再次更改设置（设置为“0”/“1”）。

我想我应该编写一个在服务器第一次关闭时运行的脚本。脚本会继续运行，看起来像这样：

```
change_settings_file("DO_VALIDATION",0); 
sleep(30*60);
change_settings_file("DO_VALIDATION",1); 
```

所以：

1.  这种方法合理吗？也许还有其他想法？
2.  更改文件的单个字符的最佳方法是什么？我应该完整阅读它，更改并写下来吗？还是有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:32:58.673

让服务器停机这么长时间而且这么频繁是很奇怪的：/

`file_get_contents()`无论如何，最简单的方法是使用`file_put_contents()`PHP[函数](http://us3.php.net/manual/en/function.file-get-contents.php)

# java - 报警安卓应用

> ID：10484701
> 
> 赞同：0
> 
> 时间：2012-05-07T15:24:32.000
> 
> 标签：java, android, alarm

谁能帮我解决我的问题，我必须让闹钟在当前时间 10 分钟后响起，并且必须每 10 分钟重复一次，我写了这段代码但它没有用，它随机开始：”

```
public class AlarmNewActivity extends Activity {
    /** Called when the activity is first created. */

    Intent intent;
    PendingIntent sender;
     AlarmManager am;
     Button bStart, bStop ;
     long mCurrentTime, firstTime ;
     Calendar calendar;
     TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        bStart = (Button) findViewById (R.id.button1);
        bStop = (Button) findViewById (R.id.button2);
        tv = (TextView) findViewById (R.id.textView1);

        intent = new Intent(AlarmNewActivity.this, RepeatingAlarm.class);
        sender = PendingIntent.getBroadcast(AlarmNewActivity.this, 0, intent, 0);
        am = (AlarmManager)getSystemService(ALARM_SERVICE);
        calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());

        mCurrentTime = calendar.getTimeInMillis();

        bStart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                tv.setText(""+ firstTime + "\n" + mCurrentTime );

                am.setRepeating(AlarmManager.RTC_WAKEUP,
                        mCurrentTime + 10 *1000, 5*1000, sender);
               new Handler().postDelayed(new Runnable() {
                    public void run() {
                         bStop.performClick();
                    }
                }, ( mCurrentTime + 50 * 1000 )); 

            }
        });

        //==================================================================================

        bStop.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                am.cancel(sender);
            }
        });
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:30:49.000

mCurrentTime = calendar.getTimeInMillis();

应该在 onClick 里面获取点击时的当前时间

```
public void onClick(View v) {

mCurrentTime = calendar.getTimeInMillis();
...
...
} 
```

# php - 按字母顺序按第二个单词对数组进行排序

> ID：10484704
> 
> 赞同：0
> 
> 时间：2012-05-07T15:24:35.923
> 
> 标签：php

我正在对一个多维数组进行排序，其中包含人名和一些关于他们的信息。我用`asort($obj)`他们的名字按字母顺序对其进行排序（它排在第一位）。它工作得很好，只是现在我需要按他们的姓氏排序，而不是第一个。但是，例如“Joe Smith”的整个名称都在“name”键下。我需要它按姓氏排序，而不是第一个。我怎样才能做到这一点？

**编辑** 似乎我以错误的方式去做了。最简单的方法是简单地将数据库中的名字和姓氏分配给单独的字段，而不是相同的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:28:41.597

使用`usort`：

```
function cmp($a, $b)
{
    list($firstNameA, $lastNameA) = explode(" ", $a["name"], 2);
    list($firstNameB, $lastNameB) = explode(" ", $b["name"], 2);

    return strcmp($lastNameA, $lastNameB);
}

usort($array, "cmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T22:51:12.720

不，与之前的答案有很大不同。但是，在这种情况下，使用自然算法可能是一个不错的选择。

```
$array = array( 
    array("first", "last"), 
    array("first2", "last2")
); //For an array of such format
function compare_last($a, $b) { return strnatcmp($a[1], $b[1]); } 
usort($array, 'compare_last'); 
```

# javascript - 如何在内部引用 用 jQuery

> ID：10484706
> 
> 赞同：1
> 
> 时间：2012-05-07T15:24:37.990
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:26:02.233

第二个参数是 DOM 元素，不是 jQuery 元素，`a`用`$(a)`

```
function SetUrlParams() {
    $("#sidebarItems > li > a").each(function(idx, a) {
        $(a).attr("href", "MyURLOfChoice");
    });
}​ 
```

或者离开 jQuery 来完成这个简单的任务：

```
function SetUrlParams() {
    $("#sidebarItems > li > a").each(function(idx, a) {
        a.href = "MyURLOfChoice";
    });
}​ 
```

请注意，您可以使用`this`而不是访问 DOM 元素`a`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T15:26:10.510

试试这个 where`this`指的是匹配集中的每个锚元素。

```
 function SetUrlParams() {
    $("#sidebarItems > li > a").each(function(){
       this.href = "MyURLOfChoice";
    });
 } 
```

请注意，在您的代码`a`中指的是 dom 元素，因此如果您想保留代码，则应在调用任何 jQuery 方法之前将其转换为 jQuery 对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T15:27:38.840

```
$('#sidebaritems > li > a').each( function(){
    this.href = newURL;
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T15:27:25.377

传递给函数的第二个参数`each`将是 DOM 元素，而不是 jQuery 对象。您需要使用`$(a)`，或者也`$(this)`可以使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T15:34:25.817

我对此进行了测试，它在[这里工作](http://jsfiddle.net/GbyJU/)

```
$("#sidebarItems > li > a").each(function (idx, a) {
        $(a).attr("href", "MyURLOfChoice");
    }); 
```

似乎一个参数是一个 HtmlElement，没有被 jquery 包装

# android - 从 logcat 中读取最后 N 行？

> ID：10484708
> 
> 赞同：5
> 
> 时间：2012-05-07T15:24:38.123
> 
> 标签：android

我想从 logcat 中读取最后 n 行。这应该工作吗？：

```
Process process = Runtime.getRuntime().exec("logcat -t -500");
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));
... 
```

> -t 数字

使 logcat 仅打印从数字指示的位置开始的条目。正数表示位置相对于日志文件的开头，负数表示位置相对于日志文件的结尾。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T06:12:55.097

尝试这样的事情：

```
String[] command = { "logcat", "-t", "500" };
Process p = Runtime.getRuntime().exec(command); 
```

对于完整的示例检查日志收集器，它肯定有效：

[http://code.google.com/p/android-log-collector/source/browse/trunk/android-log-collector/src/com/xtralogic/android/logcollector/SendLogActivity.java](http://code.google.com/p/android-log-collector/source/browse/trunk/android-log-collector/src/com/xtralogic/android/logcollector/SendLogActivity.java)

从 logcat man 解释为什么这有效：

```
 -t <count>      print only the most recent <count> lines (implies -d)
  -t '<time>'     print most recent lines since specified time (implies -d)
  -T <count>      print only the most recent <count> lines (does not imply -d)
  -T '<time>'     print most recent lines since specified time (not imply -d)
                  count is pure numerical, time is 'MM-DD hh:mm:ss.mmm' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:38:58.863

如果您只想在发生异常后进行堆栈跟踪，则可以 `getStackTraceString(Throwable tr)`在 catch 子句中使用。

```
try {

} catch(Exception e ) {
     String crashLog = Log.getStackTraceString(e); 
     // Save crashLog to file to do something...
} 
```

您可以在 logcat 命令中指定过滤器，以便您至少获得完整日志的精简版本。

# c# - 通过 ListView (LVM_GETITEM) 读取桌面图标 - Windows 7 问题

> ID：10484711
> 
> 赞同：0
> 
> 时间：2012-05-07T15:25:06.717
> 
> 标签：c#, winapi, user32, lvm

以下代码在 Windows XP 中运行良好，并且曾一度在 Windows 7 中运行，但不再运行。我似乎无法弄清楚为什么不幸。其他人有问题吗？

更具体地说，它可以毫无问题地找到所有图标及其位置。它是专门返回 /0/0/0/0/0/0/0/0/0/0/0/0/0/0/0/0/0/0/0/0 的图标名... ……

```
WriteProcessMemory(vProcess, vPointer, Marshal.UnsafeAddrOfPinnedArrayElement(vItem, 0),Marshal.SizeOf(typeof(LVITEM)), ref vNumberOfBytesRead);
SendMessage(vHandle, LVM_GETITEMW, j, vPointer.ToInt32());
ReadProcessMemory(vProcess, (IntPtr)((int)vPointer + Marshal.SizeOf(typeof(LVITEM))), Marshal.UnsafeAddrOfPinnedArrayElement(vBuffer, 0), vBuffer.Length, ref vNumberOfBytesRead);
string vText = Encoding.Unicode.GetString(vBuffer, 0, (int)vNumberOfBytesRead);
string IconName = Marshal.PtrToStringAnsi(vItem[0].pszText); 
```

vText 和 IconName 都没有显示任何内容:(

至于pszText，这两种我都试过了：

```
vItem[0].pszText = (IntPtr)((int)vPointer + Marshal.SizeOf(typeof(LVITEM)));
vItem[0].pszText = Marshal.AllocHGlobal(512); 
```

仅供参考：

```
private const int LVM_FIRST = 0x1000;
private const uint LVM_GETITEMW = LVM_FIRST + 75; 
```

完整代码：（忽略所有额外的 Console.WriteLines，我正在调试） [http://pastebin.com/RXd2uwx3](http://pastebin.com/RXd2uwx3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T04:08:21.193

我遇到了同样的问题。

可能是您的代码在 x64 版本的 windows7 下运行。在默认的 C# 构建设置中，IntPtr 大小被视为 32 位 int 指针。但 ReadProcessMemory 是 64 位 int 指针。

您必须将 VS 的构建选项更改为 [AnyCPU] 为 [x64]，您的代码将运行良好。

# html - iOS根据媒体查询加载错误的样式表

> ID：10484721
> 
> 赞同：1
> 
> 时间：2012-05-07T15:25:56.643
> 
> 标签：html, css, ios, media-queries, iphone-web-app

我正在使用 Phonegap (1.4.1) / JS (jQuery Mobile 1.0) / HTML / CSS 开发移动应用程序。我正在使用媒体查询为各种屏幕尺寸加载正确的 CSS 文件，因此我有以下代码来加载样式表：

```
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" media="screen and (min-width: 720px)" href="../css/XL_global.css" />
<link rel="stylesheet" media="screen and (min-width: 480px) and (max-width: 719px)" href="../css/L_global.css" />
<link rel="stylesheet" media="screen and (min-width: 320px) and (max-width: 479px)  " href="../css/M_global.css" />
<link rel="stylesheet" media="screen and (max-width: 319px) " href="../css/S_global.css" /> 
```

我的问题：在屏幕分辨率为 960x640 像素的 iPhone 4S 上，加载的样式表是 M_global.css。我正在使用 iOS 5.1，据我所知，iOS 上的 UIWebView，至少在 iOS 5+ 上支持媒体查询（毕竟，它确实加载了其中一个样式表）。

我也尝试过使用 min-device-width/max-device-width 和 -webkit-min-device-width/-webkit-max-device-width ，只是想看看它是否有所作为，但没有. 我还尝试在上述各种组合的前面添加“仅”一词（即 media="only screen and (min-width: 480px) and (max-width: 719px)"），但这并没有也无济于事（这真的不足为奇）。

我尝试将 M_global.css 文件的查询条件设置为 min-width:0 和 max-width:0 只是为了查看它是否正在加载该特定样式表，但是它没有加载任何 CSS。

如果这是我为自己制作的应用程序，为了好玩，我会保留它，只是接受它加载了错误的 CSS 文件并充分利用它。然而，这不适合我，我也不是要维护这个应用程序的人，所以它必须是正确的。

有没有人对 iOS 中这种古怪的行为有任何经验并找到了解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:37:24.230

您需要测试规模，如下所示：

```
media="-webkit-min-device-pixel-ratio: 2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T21:43:24.070

无论您手机的实际像素尺寸是多少，您都需要意识到 CSS 正在查看完全不同的“CSS 设备像素”。

您的样式表仍然显示您的 iphone 是 320x480。您的像素密度更高，但您需要考虑“CSS Pixels”。

即使是高分辨率设备报告的 CSS 像素值也较低。去谷歌上查询。

# desire2learn - 404 向 Desire2Learn 发布内容

> ID：10484724
> 
> 赞同：0
> 
> 时间：2012-05-07T15:26:05.140
> 
> 标签：desire2learn

我为 Desire2Learn 构建了一个基本的 Valence 应用程序，现在我正在尝试发布数据，但我收到 400 或 404 错误。

如果我 使用正确的 orgUnitId 向 /d2l/api/le/(D2LVERSION: version)/(D2LID: orgUnitId)/content/root/发出[GET 请求，我可以看到课程的所有内容。](http://docs.valence.desire2learn.com/res/content.html#get--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-content-root-)但是，当我[发布](http://docs.valence.desire2learn.com/res/content.html#Content.ContentObjectData)模块类型的 [ContentObjectData](http://docs.valence.desire2learn.com/res/content.html#post--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-content-root-)时，它返回 400。文档没有列出该特定请求的 400 错误，但我假设我搞砸了 ContentObjectData。我已经尝试了多次，但总是导致 400。 JSON 块如下所示： { "Title": "API Test", "ShortTitle": "", "Type": 0, "ModuleStartDate": null , "ModuleEndDate": null, "IsLocked": false, "IsHidden": true }

如果我使用正确的 orgUnitId 和 moduleId 向 /d2l/api/le/(D2LVERSION: version)/(D2LID: orgUnitId)/content/modules/(D2LID: moduleId)/structure/发出[GET](http://docs.valence.desire2learn.com/res/content.html#get--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-content-modules-%28D2LID-moduleId%29-structure-)请求，我可以看到模块的内容。当我 发布 Topic 类型的[ContentObjectData](http://docs.valence.desire2learn.com/res/content.html#post--d2l-api-le-%28D2LVERSION-version%29-%28D2LID-orgUnitId%29-content-modules-%28D2LID-moduleId%29-structure-)时，它返回 404。我在 Python 中执行此操作，没有给出示例 SDK 代码，因此我转换了 PHP 代码。

我一直在使用另一个带有键“Url”的 JSON 块，然后是相应的值。这是我一直在尝试发布的完全编码的多部分正文：

```
 --redacted.132.0.68062.1336325296.611.1
    Content-Disposition: form-data; name="ContentObjectData"
    Content-Type: application/json

    {"StartDate": null, "IsLocked": false, "TopicType": 3, "ShortTitle":
"", "Title": "API Test", "Url": "http://redacted.edu",
"EndDate": null, "IsHidden": true, "Type": 1}
    --redacted.132.0.68062.1336325296.611.1
    Content-Type: application/json

    {"Url": "http://redacted.edu"}
    --redacted.132.0.68062.1336325296.611.1-- 
```

为什么 GET 和 POST 的相同 URI 会导致 404 仅用于 POST？文档中的两个调用之间的结构看起来没有任何不同。我将此调用作为普通的 POST 请求和多部分进行了尝试，但都导致 404。我已经使用 3 个不同的用户尝试了这两个调用，其中一个具有完全的管理员权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T17:39:53.393

这似乎是两个不同的问题，一个关于路线*/d2l/api/le/{ver}/{orgUnitId}/content/root/*和一个关于路线*/d2l/api/le/{ver}/{orgUnitId}/内容/模块/{moduleId}/结构/*。我将尝试分别解决这些问题：

**添加根模块**。第一个路由用于将路由模块添加到组织单位的内容存储库。路由对“Title”和“ShortTitle”属性有特殊限制：两者都必须非空且非空。此外，ShortTitle 属性必须采用不能“修剪”为空字符串的形式（例如，它不能是只包含空格的字符串）。这些字符串的略有不同的限制已被认为是不一致的，并且在未来的版本中可能会出现更常规的方法。如果您采用必须为新根模块提供标题和短标题的方法，您是安全的。

**向现有内容结构添加主题**。第二条路线用于添加到组织单位内容存储库中的现有模块结构。您使用路由的方式会有所不同，具体取决于您是要添加 URL 还是要添加文件。

要添加仅是 URL 的主题，您只需提供 multipart/mixed POST 的第一部分（实际上，您可以只发送单个 POST 正文）和 application/json 类型：

```
{
   "Title": "Test link topic title",
   "ShortTitle": "Link",
   "Type": 1,
   "TopicType": 3,
   "URL": "http://fqd.url.to.resource.com/",
   "StartDate": null,
   "EndDate": null,
   "IsHidden": false,
   "IsLocked": false
} 
```

注意： (a) 你的主题必须有一个短标题——事实上，主题数据块对 Title 和 ShortTitle 属性的限制与上面第一个问题相同；并且，(b) 您不需要提供仅包含 URL 的第二部分。

要添加作为文件的主题，您需要提供一个类似的 JSON 块作为多部分/混合 POST 正文的第一部分，但是 (a) TopicType 应该具有值“1”以指示主题是文件，(b) URL 属性应指向*组织单位现有内容空间内的有效位置 URL*（这是后端服务知道将文件存储在何处的方式），并且 (c) POST 的第二部分应包含文件数据. 您的 POST 正文最终将如下所示：

```
POST https://yourlms.edu/d2l/api/le/{ver}/{orgUnitId}/content/modules/{moduleId}/structure/?{auth} HTTP/1.1
Content-type: multipart/mixed; boundary=FOO
Content-length: {length}

--FOO
Content-type: application/json
{
   "Title": "Test file topic title",
   "ShortTitle": "File",
   "Type": 1,
   "TopicType": 1,
   "URL": "http://fqd.url.to.resource.com/",
   "StartDate": null,
   "EndDate": null,
   "IsHidden": false,
   "IsLocked": false
}

--FOO
Content-Disposition: form-data; name=""; filename={filename}
Content-Type: {file's content type}

{binary data} 
```

目前，Valence 参考文档并没有明确区分这两种请求，很快就会更新。

# sql - 如何访问特定数据库上的 INFORMATION_SCHEMA.TABLES

> ID：10484727
> 
> 赞同：1
> 
> 时间：2012-05-07T15:26:18.927
> 
> 标签：sql, tsql

我正在尝试获取我的服务器上的数据库列表，其数据库包含表“Foobar”。我遇到的障碍是我无法弄清楚如何将@CurrDB 与INFORMATION_SCHEMA 结合使用。有什么建议么？

```
DECLARE @CurrDB varchar(255)
DECLARE RecSet CURSOR FOR
Select [name] FROM master..sysdatabases
OPEN RecSet

Fetch NEXT FROM RecSet Into @CurrDB

WHILE (@@FETCH_STATUS = 0)   
BEGIN 
    Fetch NEXT FROM RecSet Into @CurrDB
    IF (EXISTS (SELECT * FROM @CurrDB..INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Foobar')) 
    BEGIN 
        print @CurrDB
        --do other stuff
    END 
END

Close RecSet
DEALLOCATE RecSet 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:47:28.570

试试这个：

```
sp_msforeachdb 'SELECT ''?'' As DatabaseName 
                FROM   [?].INFORMATION_SCHEMA.TABLES 
                WHERE  TABLE_Name = ''foobar''' 
```

您还可以使用以下代码用数据库名称列表填充表变量。

```
Declare @DatabaseList Table(DatabaseName VarChar(200))

insert Into @DatabaseList
Exec sp_msforeachdb 'If Exists(SELECT ''?'' As DatabaseName 
                FROM   [?].INFORMATION_SCHEMA.TABLES 
                WHERE  TABLE_Name = ''YourTableNameHere'') Select ''?'''

Select * From @DatabaseList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:54:31.913

以下存储过程根据传递给此 sp 的参数显示所有数据库和表。

```
CREATE PROCEDURE Usp_findtablenameinalldatabase @TableName VARCHAR(256) 
AS 
    DECLARE @DBName VARCHAR(256) 
    DECLARE @varSQL VARCHAR(512) 
    DECLARE @getDBName CURSOR 

    SET @getDBName = CURSOR 
    FOR SELECT name 
        FROM   sys.databases 

    CREATE TABLE #tmptable 
      ( 
         DBName     VARCHAR(256), 
         SchemaName VARCHAR(256), 
         TableName  VARCHAR(256) 
      ) 

    OPEN @getDBName 

    FETCH next FROM @getDBName INTO @DBName 

    WHILE @@FETCH_STATUS = 0 
      BEGIN 
          SET @varSQL = 'USE ' + @DBName + '; INSERT INTO #TmpTable SELECT ''' + @DBName + 
          ''' AS DBName, SCHEMA_NAME(schema_id) AS SchemaName, name AS TableName FROM sys.tables WHERE name LIKE ''%' 
          + @TableName + 
                        '%''' 

          EXEC (@varSQL) 

          FETCH next FROM @getDBName INTO @DBName 
      END 

    CLOSE @getDBName 

    DEALLOCATE @getDBName 

    SELECT * 
    FROM   #tmptable 

    DROP TABLE #tmptable 

go 
```

如何调用这个 sp：

```
EXEC usp_FindTableNameInAllDatabase 'TableName' 
```

# c# - 有没有一种简单的方法可以在 LINQ to Entities 中编写自定义函数？

> ID：10484728
> 
> 赞同：10
> 
> 时间：2012-05-07T15:26:25.127
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我正在为我的实体框架应用程序编写一个简单的搜索查询。我需要检查一堆字段是否为空，如果不是，则对它们调用 ToLower() 并与搜索查询进行比较。LINQ 查询如下所示：

```
public IQueryable<Store> SearchStores(string q, IQueryable<Store> source)
{
    q = q.ToLower();

    return (
        from s in source
        where (
            (s.Name != null && s.Name.ToLower().Contains(q)) ||
            (s.Description != null && s.Description.ToLower().Contains(q)) ||
            ...
} 
```

有很多这样的行，所以我很想写一个辅助方法来清理它：

```
public static bool SafeSearch(this string s, string q)
{
    return s == null ? false : s.ToLower().Contains(q);
} 
```

但是，这当然不起作用，因为 LINQ to entity 不了解 SafeSearch 功能是什么：

> LINQ to Entities 无法识别方法 'Boolean SafeSearch(System.String, System.String)' 方法，并且此方法无法转换为存储表达式。

有没有一种简单的方法来编写这样一个简单的自定义函数？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T16:26:40.777

由于 linq 使用在您实际调用数据库之前不会执行的表达式，因此您需要将函数包装在谓词中。

```
private static Func<Country, bool> Predicate(string q)
{
    return x => (
        q.SafeSearch(x.Name) ||
        q.SafeSearch(x.Description)
        );
} 
```

此外，通过在查询中调用 SafeSearch 扩展方法来反转它，将处理 x.Name 为空的情况。

```
public static class SearchExt
{
    public static bool SafeSearch(this string q, string param)
    {
        return param == null ? false : param.ToLower().Contains(q);
    }
} 
```

然后你可以将它与扩展方法一起使用

```
return source.Where(Predicate(q)); 
```

或使用 linq 表达式

```
return from p in source
       where Predicate(q).Invoke(p)
       select p; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-16T18:58:51.383

有一种方法可以准备动态查询和条件，也可以使用函数来构建它们的一部分。语法也是可读的，这适用于问题的“简单”部分。可以通过**组合 Linq 表达式来**实现。有几篇关于如何做到这一点的文章，但我想我想出了一种新方法。至少我没有在网上找到它。

要继续，您需要一个包含 3 个简单函数的库。它们用于`System.Linq.Expressions.ExpressionVisitor`动态修改表达式。关键特性是统一表达式内的参数，以便将两个同名的参数设为相同 ( `UnifyParametersByName`)。剩下的部分是用给定的表达式 ( `ReplacePar`) 和辅助方法 ( `NewExpr`) 替换命名参数。该库在 github 上通过 MIT 许可证提供：[LinqExprHelper](https://github.com/jarekczek/LinqExprHelper)，但您可以快速自己编写一些东西。

首先，您定义一些方法，这些方法稍后可能用于创建动态查询。

```
public class Store
{
    ...

    public static Expression<Func<Store, bool>>
        SafeSearchName(string sWhat)
    {
        return LinqExprHelper.NewExpr(
            (Store s) => s.Name != null && s.Name.ToLower().Contains(sWhat)
        );
    }

    public static Expression<Func<Store, bool>>
        SafeSearchDesc(string sWhat)
    {
        return LinqExprHelper.NewExpr(
            (Store s) => s.Description != null && s.Description.ToLower().Contains(sWhat)
        );
    }
} 
```

然后你这样查询：

```
 // Define a master condition, using named parameters.
    var masterExpr = LinqExprHelper.NewExpr(
        (Store s, bool bSearchName, bool bSearchDesc)
        => (bSearchName && bSearchDesc));

    // Replace stub parameters with some real conditions.
    var combExpr = masterExpr
        .ReplacePar("bSearchName", Store.SafeSearchName("b").Body)
        .ReplacePar("bSearchDesc", Store.SafeSearchDesc("p").Body);
        // Sometimes you may skip a condition using this syntax:
        //.ReplacePar("bSearchDesc", Expression.Constant(true));

    // It's interesting to see how the final expression looks like.
    Console.WriteLine("expr: " + combExpr);

   // Execute the query using combined expression.
   db.Stores
        .Where((Expression<Func<Store, bool>>)combExpr)
        .ToList().ForEach(i => { Console.WriteLine(i.Name + ", " + i.Description); }); 
```

我还没有在生产中使用它，但是通过了一些简单的测试。我认为以这种方式组合查询没有任何限制。如果我们需要更多参数，我们可以附加额外的组合级别。这种方法的优点是可以使用内联的 lambda 表达式，读起来很舒服，同时动态表达式的创建和组合非常有能力。

毕竟它“简单”吗？如果您认为Linq 的*方法语法*很简单，那么这几乎就是那么简单。它不允许您创建自定义 Linq 函数，但为您提供了类似的功能。

# xcode - xcode没有显示一些文件

> ID：10484738
> 
> 赞同：4
> 
> 时间：2012-05-07T15:26:52.973
> 
> 标签：xcode, git, github

我和我的团队正在将 git 用于一个项目，我们都是新手。无论如何，在将一些类文件添加到项目（目标 C 项目）并提交后，当另一个人克隆项目时，Xcode 不会显示添加的文件。我看到了 [这篇文章](https://stackoverflow.com/questions/5036462/xcode-does-not-pick-up-new-class-files-in-svn) ，我明白我们应该一直提交 .xcodeproj 文件。现在由于存储库中的 .xcodeproj 文件是原始文件，没有所有人的更改，我如何更改我的副本以便 Xcode 显示文件？它们可以在 Finder 中看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:11:16.213

将尚未看到的文件拖到“项目导航器”中，即您在左侧看到的文件树（您希望拥有您的文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-16T10:55:41.533

我有同样的问题。我在两台电脑之间工作。我在 Xcode 中看不到文件的原因是因为在提交最新更新之前我忘了添加新文件：

```
git add . 
```

进而

```
git commit -m "Your message" 
```

希望这可以帮助那里的人:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-25T14:44:40.347

试试这个，它对我有用。

1.  在 Xcode 中打开项目
2.  在 Finder 中打开项目
3.  双击文件，它们将自动显示在 Xcode 内的项目导航器中。

# c# - 将 Gridview 导出到 Excel 文件 - 错误

> ID：10484747
> 
> 赞同：0
> 
> 时间：2012-05-07T15:27:29.550
> 
> 标签：c#, asp.net, compiler-errors, export-to-excel, error-correction

我用这个`code for exporting gridview to Excel in asp.net - c#`.....但是我 `found some error in my code`

我正在使用`stored procedure`for `sql command`，我的代码如下....

**C# 代码**加载事件 ( `Calling GetData method`)

```
 public partial class Admin_ResultDisplay : System.Web.UI.Page
   {
    SqlConnection cn;
    SqlCommand cmd = new SqlCommand();

    protected void Page_Load(object sender, EventArgs e)
    {
        cn = new SqlConnection(ConfigurationManager.ConnectionStrings["DbConnect"].ConnectionString);
        cn.Open();

        SqlCommand cmd = (SqlCommand)Session["sqlcmd"];
        DataTable dt = GetData(cmd);
        GridView1.DataSource = dt;
        GridView1.DataBind(); 
    } 
```

这里`GetData() Method`

```
private DataTable GetData(SqlCommand cmd)
{
    DataTable dt = new DataTable();
    String strConnString = System.Configuration.ConfigurationManager.ConnectionStrings["DbConnect"].ConnectionString;
    //SqlConnection cn = new SqlConnection(strConnString);
    SqlDataAdapter sda = new SqlDataAdapter();

    Session["sqlcmd"] = cmd;
    cmd.CommandType = CommandType.Text;  // <= ERROR POINTED HERE....
    cmd.Connection = cn;
    try
    {
        cn.Open();
        sda.SelectCommand = cmd;
        sda.Fill(dt);
        return dt;
    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        cn.Close();
        sda.Dispose();
        cn.Dispose();
    }
} 
```

> 拉胡尔：

根据您的指导，我进行了更改，但仍然给出错误....

像这样`ERROR`的东西......它在 page_load 事件中具有空值，这就是它给出错误的原因......

**你调用的对象是空的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:36:27.100

那是因为您`cmd`在按钮事件中定义如下，它在范围内是本地的。如果您在全球范围内需要它，请尝试相应地定义。

```
protected void btn_insert_Click(object sender, EventArgs e)    
 {
 try
     {
         SqlCommand cmd = new SqlCommand("GetExamResults", cn); 
```

**编辑：**

如果你也想`cmd`在 page_load 中，那么你可以在 page_load 中再次调用 SP 并使用它。像

```
protected void Page_Load(object sender, EventArgs e) 
 {   
   cn = new SqlConnection(ConfigurationManager.ConnectionStrings     
   ["DbConnect"].ConnectionString);
   SqlCommand cmd = new SqlCommand("GetExamResults", cn); 
```

但是建议您将`cmd`值存储在 session 中，然后在 page_load 中再次使用它，就像您使用的`cmd`地方

```
SqlCommand cmd = new SqlCommand();
// Your code goes here

Session["sqlcmd"] = cmd; 
```

在 page_load

```
 protected void Page_Load(object sender, EventArgs e)
    {
        SqlCommand cmd = (SqlCommand)Session["sqlcmd"]; 
```

然后`cmd`根据您的需要在 page_load 中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:38:11.703

该错误为您提供所需的信息。cmd 确实不存在。您需要在 Page_Load 事件中创建一个 SqlCommand 实例。从您提供的代码中，您仅在 Page_Load 事件不可用的按钮事件中定义 cmd 。

# c# - 为未暴露于 UI 的方法编写测试 - 需要一般帮助

> ID：10484750
> 
> 赞同：4
> 
> 时间：2012-05-07T15:27:37.013
> 
> 标签：c#, unit-testing, tdd

我对 TDD 完全陌生，并且正在使用 NUnit 用 C# 编写纸牌游戏应用程序的测试。

大多数情况下，它证明真的很有用，但有些东西我想测试，但不希望暴露任何公共属性来这样做。

例如，我希望能够测试一个新的牌组由 4 个花色组成，每个花色有 13 张牌。它可能看起来像：

```
[Test()]
public void ADeckOfCardsHas4Suits()
{
   Game game = new Game();
   Assert.AreEqual(4, game.Deck.SuitCount);
   Assert.AreEqual(13, game.Deck.GetCards(Suit.Spades).Count)
} 
```

随着 SuitCount 返回如下内容：

```
return this.cards.Select(c => c.Suit).Distinct().Count(); 
```

和 GetCards（西装套装）：

```
return this.cards.where(c => c.Suit == suit); 
```

但是，我不想将 API 中的这些属性或方法公开给 UI（我什至可能不希望公开 Deck），但我不确定如何在不公开它们的情况下对它们进行测试。

有没有普遍接受的方法来做到这一点？

干杯

斯图尔特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:45:58.153

在这种情况下，我们经常使用（滥用？）友元程序集来允许测试项目看到被测类的内部成员。

编辑：

在您的主项目中添加一个 FriendAssemblies.cs 文件：

```
using System.Runtime.CompilerServices;

// making internals available to the testing project
[assembly: InternalsVisibleTo( "MyProject.IntegrationTests" )]
[assembly: InternalsVisibleTo( "MyProject.UnitTests" )] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T05:52:17.400

正如建议的那样，我将使用该`InternalsVisibleTo`属性来允许测试程序集执行生产程序集的代码。

但是，我会将内部行为和实现提取到单独的内部类中。

这样我就可以测试公共API类，不依赖任何内部行为，如果内部行为发生变化，只会影响行为的测试；如果你不这样做，你会发现自己的测试很脆弱，公共 API 测试可能会因内部实现更改而中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:58:50.710

你应该测试你班级的公开行为。如果 UI 与 a 对话`Game`并且需要知道有多少套装，那么而不是`game.Deck.SuitCount`测试`game.GetDeckSuitCount()`您是否有超过 1 个 Deck 重载该方法以通过参数指定哪个 Deck `game.GetDeckSuitCount(2)`。这种方式对 的客户`Deck`是隐藏的并且是被封装的。`Game`

还要考虑到您可能需要独立测试`Deck`它提供的服务`Game`，在这种情况下，最好通过`Game`的构造函数显式地将它作为对 Game 的依赖项提供。

这种方法还允许您依赖接口而不是实现，这有助于提供 to 的不同实现`Deck`以`Game`进行*模拟*，或者允许您灵活地`Deck`在`Game`将来提供 to 的替代实现。

例如

```
public interface IDeck{
    // provide the methods and properties that Game requires from Deck
}

public class PokerDeck:IDeck{
    // ... etc
}

public class TravelCardsDeck:IDeck{
    // ... etc
}

// [Test]
IDeck deck = new TravelCardsDeck();
var game = new Game(deck);
Assert.That(game.GetDeckSuitCount(),Is.EqualTo(4)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:38:33.973

当然，您的卡片组的客户应该能够访问和遍历给定办公桌上的卡片，不是吗？即套牌应该发布类似`IEnumerable<Card>`.

如果是这样，您的单元测试可以抓住它并使用它来计算不同套装的数量。`SuitCount`因此，这些方法`GetCardsOfSuit`应该在您的单元测试代码中作为助手实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T22:28:27.823

在这种情况下，我不会立即关心内容。如果你对这个行为进行建模，你会得到一组卡片，这些卡片会变成一副牌（下面，a`Deck`需要一个`IEnumerable<Card>`）。然后你会洗牌并处理它们。

```
public class Deck
{
    ...
    public Deck(IEnumerable<Card> cards) { ... Shuffle() ... }        
    public void DealTo(IDealable dealable, int numberOfCards) {...}
} 
```

在这里，您创建一个简单的测试用例来处理一张卡片：

```
var deck = new Deck(new Card[] { <somecard> });
var hand = new Hand(); 

deck.DealTo(hand, 1);

Assert.AreEqual(<somecard>, hand[0]); 
```

...加上你能想到的任何测试。

然后你创建一个扑克牌组：

```
public class PokerDeck : Deck
{
    public PokerDeck() : base(<poker cards>)
}

// Pinochle, Uno, whatever 
```

因此，要测试 PokerDeck，您可能会从以下内容开始：

```
var deck = new PokerDeck();
IDealable testHand = new TestDealable();
deck.DealTo(testHand, 52);

//assert all are distinct
//assert all make up expected deck
//assert is shuffled

// test with multiple players / "dealables" 
```

模拟德州扑克将是这样的：

```
// first card
foreach(var player in players)
   deck.DealTo(player, 1);

// second
foreach(var player in players)
   deck.DealTo(player, 1);

// wait for action

// flop
deck.DealTo(burnPile, 1);
deck.DealTo(board, 3);

// wait for action

// turn
deck.DealTo(burnPile, 1);
deck.DealTo(board, 1);

// wait for action

// river
deck.DealTo(burnPile, 1);
deck.DealTo(board, 1); 
```

# php - 如何将 symfony2 的表单集合字段映射到学说的数组类型字段？

> ID：10484752
> 
> 赞同：1
> 
> 时间：2012-05-07T15:27:42.870
> 
> 标签：php, forms, symfony, doctrine

我有表格 ( `AbstractType`) 映射到一个（教义坚持的）实体。

该实体有一个属于教义类型的字段`array`。

根据 symfony 的文档，应该可以将表单集合字段映射到 PHP `array`，但显然当表单映射到实体时它不起作用。Symfony 期望该字段是一个关系，但它只是一个`array`.

这不是实际代码，只是一个示例：

考虑这个（教义坚持的）实体：

```
class Article
{
   ...
    /**
     * @ORM\Column(type="array")
     */
    protected $tags;   
   ...
} 
```

而这个实体（不受教义管理）：

```
class Tag
{
   ...
    public $name;
   ...
} 
```

而这种形式类型：

```
class ArticleType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('tags', 'collection', array('type' => new TagType()));
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => '\Entity\Article',
        );
    }
} 
```

标签的表单类型：

```
class TagType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('name', 'text');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => '\Entity\Tag',
        );
    }
} 
```

当试图实例化 ArticleType 学说时，会抱怨以下内容：

```
Expected argument of type "\Entity\Tag", "array" given 
```

在文件中：

**vendor/symfony/src/Symfony/Component/Form/Extension/Core/DataMapper/PropertyPathMapper.php 在第 47 行**

甚至可以在不编写自己的字段类型的情况下做我想做的事吗？

更新：也许我应该改写我的问题：我如何告诉 symfony 不要将此字段映射到任何内容（如果我更改其名称 symfony 抱怨该实体没有这样的属性）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:34:32.287

我错过了一件事。`tags`我加载了包含集合属性（此处）中的关联数组数组的固定装置。在将固定装置更改为实体数组（`Tag`此处为实例数组）后，我忘记重新加载固定装置。

现在一切都完美无缺，所以ineed symfony 可以将一个表单集合映射到一个`array`和一个关系（`ArrayCollection`）。不同之处在于 - 我不必手动保留关系的反面。

所以这是我的错。不管怎么说，还是要谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:23:58.763

以及`array`类型最终会转换为序列化字符串，将其映射到集合类型是不合适的。更好的方法应该是创建一个自定义字段类型，其中`getParent`是“文本”，并附加一个数据转换器，它将用户输入转换为数组，反之亦然。检查[此](http://symfony.com/doc/master/cookbook/form/data_transformers.html)食谱条目。

# crystal-reports - 水晶报表--依次显示3个详细信息部分

> ID：10484756
> 
> 赞同：0
> 
> 时间：2012-05-07T15:27:54.477
> 
> 标签：crystal-reports, crystal-reports-2008

我正在创建一个新的水晶报表，我想以报表应该打印 3 个数据表（ADo.net）数据的方式设计我的报表。

每个表都应一个接一个地显示其数据。

有没有办法做到这一点？

我尝试创建 3 个不同的详细信息部分，每个部分将显示一个表格数据，但每件事都会重叠。

我尝试了一个细节和一个报告页脚，但如何放置第三个表格的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:47:25.070

我推荐这种方法：

主报告 * 无数据库

子报表 0 * 连接到第一个数据集

子报表 1 * 连接到第二个数据集

子报表 2 * 连接到第三个数据集

如果您需要关联子报表，请在主报表中创建一个参数，然后将每个子报表链接到参数字段上的主报表。每个子报表都将使用参数字段来过滤您的数据集。

** 编辑 **

如果数据集已按您的逻辑过滤，则无需链接子报表。

虽然它可能有点不合常规，但这种方法将使您的报告保持整洁。

# ruby - Rails CollectiveIdea 审计 i18n

> ID：10484768
> 
> 赞同：0
> 
> 时间：2012-05-07T15:28:45.633
> 
> 标签：ruby, ruby-on-rails-3, internationalization, audit, i18n-gem

我正在使用[https://github.com/collectiveidea/audited](https://github.com/collectiveidea/audited)来获得我的应用程序审核。但是我的实体名称仍然是英文，我所有的应用程序都是 i18ned。在文档中找不到任何信息。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:53:46.677

我想您是在谈论您的模型名称和属性，请查看 Rails 指南以获取更多信息：

[http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)

# mobile - 在速度上解析 $user_agent？

> ID：10484769
> 
> 赞同：1
> 
> 时间：2012-05-07T15:28:55.990
> 
> 标签：mobile, velocity

我正在尝试动态修改（服务器端）页面的输出，无论用户是否从移动设备访问它......

`$user_agent`如果我从笔记本电脑上的 Chrome 访问该页面，我正在使用，这让我得到了这个：

```
Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.10 (KHTML, like Gecko) Chrome/20.0.1123.4 Safari/536.10 
```

我可以问 $user_agent 是否包含 MSIE 或 Mozilla 或 Windows 或其他（我希望有一个聪明的关键字列表）......但只是想知道是否有更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:42:46.020

是的，VelocityTools 有一个 BrowserTool 可以为你做所有的用户代理解析。绝对是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:32:05.520

桌面浏览器有大量的用户代理字符串，当我们谈论移动设备时，情况更糟。

我建议您使用[WURFL 库](http://wurfl.sourceforge.net/)来检查实际设备是否是移动设备，而不是构建自己的列表。

# c# - MVC 中的下拉菜单

> ID：10484774
> 
> 赞同：2
> 
> 时间：2012-05-07T15:29:08.213
> 
> 标签：c#, asp.net, asp.net-mvc

在我的 MVC 应用程序中，我需要添加一个显示域名列表的下拉列表。

我已经有一个包含多个属性的 ViewModel。我不确定步骤的顺序应该是什么：

1.  将新属性添加到我的`ViewModel`? 应该是什么类型？列表？
2.  定义一个用值填充上述属性的方法。
3.  在视图中使用该属性？使用`HTML.DropdownFor`？

我知道我应该在我的问题中添加一些代码，但现在我很难开始使用这个......

**编辑：** 向 ViewModel 添加了以下属性：

```
 public IEnumerable<SelectListItem> DomainList { get; set; } 
```

并实现了一个返回域列表的方法：

```
internal static List<Domain> FetchAllDomains() 
```

接下来在我的控制器操作中，我有：

```
var domains = FetchAllDomains().Select(d => d.DomainName);
return new EmailModel() {DomainList = domains }; 
```

但我收到以下错误：

> 无法将类型“System.Collections.Generic.IEnumerable”隐式转换为“System.Collections.Generic.IEnumerable”。存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T15:36:15.923

> 1) 向我的 ViewModel 添加新属性？应该是什么类型？列表？

您需要 2 个属性更精确：一个`IEnumerable<SelectListItem>`保存所有可用选项，一个标量属性保存所选值

> 2) 定义一个用值填充上述属性的方法。

是的。

> 3）在视图中使用该属性？使用 HTML.DropdownFor?

不，不在视野中。视图不调用任何方法。视图与视图模型一起使用。控制器负责将正确填充的视图模型传递给视图。

例如：

```
public class MyViewModel
{
    public string SelectedValue { get; set; }
    public IEnumerable<SelectListItem> Values { get; set; }

    ... some other properties that your view might need
} 
```

然后是一个将填充此视图模型的控制器操作：

```
public ActionResult Index()
{
    var model = new MyViewModel();
    model.Values = new[]
    {
        new SelectListItem { Value = "1", Text = "item 1" },
        new SelectListItem { Value = "2", Text = "item 2" },
        new SelectListItem { Value = "3", Text = "item 3" },
    };
    return View(model);
} 
```

最后是强类型视图，您将在其中显示下拉列表：

```
@model MyViewModel
@Html.DropDownListFor(x => x.SelectedValue, Model.Values) 
```

* * *

更新：

根据您更新的问题`IEnumerable<SelectListItem>`，您的视图模型上有一个属性，您试图为其分配一个`IEnumerable<string>`显然不可能的类型值。您可以将其转换为`IEnumerable<SelectListItem>`这样的：

```
var domains = FetchAllDomains().Select(d => new SelectListItem
{
    Value = d.DomainName,
    Text = d.DomainName
});
return new EmailModel { DomainList = domains }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:36:55.190

如果您不介意，我将向您展示考试示例列表

```
public class SomeClass
{
    //Properties

    public int ExamId { get; set; }
    public SelectList ExamList { get; set; }
} 
```

帮手：

```
public static void PopulateExamList(MarkEditViewModel model,
    List<Exam> examList)
{
    model.ExamList = new SelectList(examList, "Id", "ExamName");
} 
```

在我的示例中，您必须添加所有考试的列表。在视图中之后，您将获得考试
和视图的下拉列表（foreach 模型中的每个元素）：

```
@Html.DropDownListFor(model => model.ExamId,
                                        Model.ExamList,
                                        "Choose exam") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:33:45.463

一旦你的控制器上的列表将它传递给视图（作为模型或使用 ViewBag），然后使用帮助器：

```
Html.DropDownList(
    string name,
    IEnumerable<SelectListItem> selectList,
    string optionLabel,
    object htmlAttributes) 
```

或者 (MVC 3)

```
@Html.DropDownListFor(model => model.Property.ID,
    new SelectList(model.PropertyList, "ID", "Type")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:37:47.113

在您的视图模型中

```
public class ViewModelClass
{
    public string DomainName { get; set; }

    public IEnumerable<SelectListItem> DomainList
    {
        get
        {
            return GetDomainNames()  //your method to get domain names
             .Select(d => new SelectListItem() { Text = d, Value = d });
        }
    }
} 
```

你的强类型视图

```
@model ViewModelClass

@Html.DropDownListFor(model => model.DomainName, Model.DomainList) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T15:38:53.013

1.  是的，您需要模型中的属性来处理`DropDownList`
2.  取决于，通常可以是一个整数，它引用 DropDownlist 的值 您将用于填充元素的列表可以定义为 ViewBag 中的元素，或模型中的另一个属性
3.  razor 语法完全取决于您尝试实现的目标，您应该使用`@Html.DropDownListFor()`引用模型的属性以保证视图是 strongTyped

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T15:40:54.713

您走在正确的轨道上，在您的 ViewModel 中有 2 个属性。一个用于保存项目列表，另一个用于从 UI 中选择的项目 ID

```
public class ProductViewModel
{
    public IEnumerable<SelectListItem> Items { get; set; }
    public string SelectedItemId { get; set; }
    //Other Properties
} 
```

在您的 Get Action 方法中，返回带有数据的 ViewModel

```
 public ActionResult Index()
 {
    var objProduct = new ProductViewModel();
    objProduct.Items = new[]
    {
          new SelectListItem { Value = "1", Text = "Domain 1" },
          new SelectListItem { Value = "3", Text = "Domain 2" },
          new SelectListItem { Value = "3", Text = "Domain 3" }
    };
    // can replace the above line with loading data from Data access layer.
    return View(objProduct);
} 
```

并且在您看来，这是对 ProductViewModel 的强类型

```
@model ProductViewModel
@using (Html.BeginForm())
{ 
  @Html.DropDownListFor(x => x.SelectedItemId, new SelectList(Model.Items,"Value","Text"), "Select..")
  <input type="submit" value="save" />
} 
```

在您的 HTTPpost 操作中，您将拥有可用的选定值

```
[HttpPost]
public ActionResult Index(ProductViewModel model)
{
 //  check model.SElectedItemId here

} 
```

# cakephp - Cakephp - 将唯一设置为 true 时不会删除 HABTM 记录

> ID：10484778
> 
> 赞同：2
> 
> 时间：2012-05-07T15:29:26.207
> 
> 标签：cakephp, cakephp-2.1

CakePHP 的默认设置为 true，我已经对其进行了编码以确保也是如此。所以我有以下数据库结构：Item HABTM Action，唯一设置为true。

情况如下：

如果 ATLEAST 1 条记录保持“活动”状态，当我删除 1 条或多条记录时，保存时删除工作正常

当我删除所有记录（或 1 条记录，如果这是唯一的一条）时，删除在保存时不起作用。它只是以这种方式保存所有现有记录。

在保存之前，我已经确定 debug($this->request->data) 不包含任何操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T07:48:05.883

从您帖子评论中的讨论中，我仍然感到困惑，但我了解您正在尝试： 以类似于以下格式保存 POST：array( 'Item' => array( 'id' => '3' ) 与：

```
 $this->Item->SaveAll($this->request->data); 
```

您的 POST 应包含一个“操作”键：

```
array(
    'Item' => array(
        'id' => '3'
    ),
    'Action' => array(
        'Action' => array()
    ) 
```

当“Action”键被设置时，Cake 知道它必须“超越”这个关系并且它很神奇。然后它会删除。

我刚刚在我正在开发的应用程序上对此进行了测试，实际上发现它是一个错误。:D 问题是对于特定的 HATBM 关系，我必须使用手动生成的表单，因此在发布时没有包含任何内容，关系键没有设置，记录也没有被删除。我想表单助手处理这个。

如果您有类似的问题，您可以通过两种不同的方式进行管理：

1.  使用 JavaScript 放置隐藏输入

2.  在控制器中检查是否设置了“操作”键，如果没有添加它（作为一个空数组）：

    $this->request->data['Action']['Action'] = array();

    这可能有点侵入性，但它会完成这项工作。

# nhibernate - 通过匹配另一个 Db 表使用 n-hibernate 过滤结果

> ID：10484780
> 
> 赞同：2
> 
> 时间：2012-05-07T15:29:43.387
> 
> 标签：nhibernate, linq-to-nhibernate, nhibernate-criteria

我已经编写了 Hbn & 代码来从数据库中获取用户。

有以下信息

用户名、姓名、电子邮件、电话

现在我们有了新的要求，其中创建了具有以下字段的新表

表格1

*   userid -- 上面用户表的外键
*   工作地点
*   工作状态 ID

表 2

*   工作状态 ID
*   工作状态

过滤条件是工作地点和工作状态

我无法更改我现有的代码。

要么我必须编写新的 hbn 文件并编写代码

或者我应该使用之前创建的 hbn 获取数据并过滤它

请建议我使用 linq 等的代码（如果可能的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:39:21.867

向用户添加一个集合`Workplaces`或其他任何内容并将其映射，然后很容易查询

```
from u in session.Query<User>()
from w in u.Workplaces
where ...
select u; 
```

或在映射 Workplaces 后使用相关子查询进行过滤

# c# - 在 C# 项目中查找所有嵌套类的巧妙方法是什么？

> ID：10484784
> 
> 赞同：1
> 
> 时间：2012-05-07T15:30:03.713
> 
> 标签：c#, visual-studio-2010, search, project, nested-class

做一些项目清理工作，而不是仅仅依靠我的肉眼来查找所有嵌套类，有谁知道我可以使用计算机来做到这一点的聪明方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:41:19.033

如果您只想查看列表，那么对象浏览器应该为您提供内部类的良好概述。它们将是列出的唯一限定名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:38:18.067

当然，[Type.GetNestedTypes](http://msdn.microsoft.com/en-us/library/system.type.getnestedtypes%28v=vs.71%29.aspx)应该可以很好地以编程方式执行此操作。或者这不是你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T09:22:41.927

像下面这样的东西可能会有用。

```
public static class TypeExplorer
{
    public static string GetTypeTree<T>()
    {
        var stringBuilder = new StringBuilder();

        GetTypeTree(typeof(T), stringBuilder, 0);

        return stringBuilder.ToString();
    }

    private static void GetTypeTree(Type type, StringBuilder stringBuilder, int nestingLevel)
    {
        stringBuilder.AppendLine(new string(' ', nestingLevel) + type.Name);

        nestingLevel++;

        foreach (var nestedType in type.GetNestedTypes(BindingFlags.Public | BindingFlags.NonPublic))
        {
            GetTypeTree(nestedType, stringBuilder, nestingLevel);
        }
    }
} 
```

# javascript - 网站源页面：如何保护我的网站？

> ID：10484787
> 
> 赞同：-2
> 
> 时间：2012-05-07T15:30:13.400
> 
> 标签：javascript, html, css, obfuscation

众所周知，访问任何网页源代码都是正常的，人们会说：“那又怎样？他们拿不到你的PHP代码，他们拿不到你的SQL代码”。

他们不能得到我的 JavaScript 代码吗？是的，他们可以，而且我一直在努力编写这些代码，我花了很多时间来构建我的网站，为什么任何人都能够获得这些代码？

如果有一天，您看到一个与您的网站非常相似的网站，您会怎么做？

如果愚蠢的人研究了这些代码并发现了一个错误，为什么？

当网页源代码公开时，您辛勤工作的隐私在哪里？

我们不能隐藏它们吗？

我们不能加密它们吗？

我们不能禁用它们吗？

我们不能做点什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:37:19.423

“我们不能做点什么吗？”

不，你不能。您可能会使用 JS 混淆您的页面源代码，但这对于那些对您的源代码感兴趣的人来说只会浪费更多的时间。并且像 Chromium Inspector 或 Firebug 这样的浏览器工具仍然会为你呈现一个漂亮的标记树和你所有的 CSS。通过混淆 HTML 文档，您真正实现的是，您的访问者 PC 需要计算真正的源代码，因此需要更长的时间来显示页面。

但说真的——你多久通过观看其他网站和研究它们的来源来学习/窃取/复制/获得灵感？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:31:34.587

如果您只关心混淆 javascript，请尝试

[http://javascriptobfuscator.com/](http://javascriptobfuscator.com/)

但我相信没有人会窃取你的 JavaScript 代码。

# visual-studio - 使用 Visual Studio 10 Express 编译 openldap

> ID：10484788
> 
> 赞同：3
> 
> 时间：2012-05-07T15:30:16.450
> 
> 标签：visual-studio, openldap, visual-c++

我的任务是使用 Visual Studio 为 Windows 编译 openldap。我很乐意在 POSIX 环境中执行 configure > make > make install，但我从未使用过 VS，甚至不知道如何使用 openldap 源 tarball 中的内容生成可用的 makefile。

我在 Windows 7 机器上安装了 Visual C++ 10 Express，并且我还安装了 MinGW 以尝试运行配置脚本，但我担心这会插入 MinGW 库，而不是 VC 将使用的任何原生 Windows 库.

我将不胜感激任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T20:34:39.657

KDE 人员有基于 CMake 的 openldap 构建系统。您可以按照[http://techbase.kde.org/Getting_Started/Build/Windows/emerge](http://techbase.kde.org/Getting_Started/Build/Windows/emerge)上的说明设置构建环境。主要步骤如下：

```
mkdir c:\kdedev
cd c:\kdedev
git clone git://anongit.kde.org/emerge.git
mkdir etc
cp emerge\kdesettings-example.bat etc\kdesettings.bat
# edit kdesettings.bat to use msvc2010 compiler
emerge\kdeenv.bat
emerge openldap 
```

这将不仅仅构建 openldap（它引入了 cyrus-sasl 和 openssl 等依赖项）。有许多补丁适用于 KDE 构建，它们可能与 KDE 环境之外相关，也可能不相关。

但好消息是 CMake 支持生成 Visual Studio 项目文件，因此您可以生成该文件并在 VS 中进行构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T01:34:27.630

我现在就止血并从[这里](http://www.userbooster.de)下载 Windows 端口。我已经在生产中使用它一年多了，没有任何问题。

# java - 检查字符串是否包含希腊字符串

> ID：10484795
> 
> 赞同：0
> 
> 时间：2012-05-07T15:30:40.497
> 
> 标签：java, regex, contain

请在下面找到我的代码的相关片段：

```
public static final String GREEK = "(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)";

public static int setHasGreek(String str) {
    if (str.toLowerCase().matches(".*\\b"+GREEK+"\\b.*")) return 1;
    return 0;
} 
```

如果字符串只是希腊字符串（如“gamma”或“delta”等），则该函数可以正常工作，但是如果我的字符串是“NFkappaB”，则它不起作用。有人可以提供修改正则表达式的建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:57:15.877

您正在使用[单词边界 \b](http://www.regular-expressions.info/wordboundaries.html)。要捕获类似的东西，`NFkappaB`您需要删除该限制。

```
if (str.toLowerCase().matches(".*"+GREEK+".*")) return 1; 
```

现在这显然会捕获任何类似的东西`alphagammakappa`，除非有特定的规则来捕获诸如`NFkappaB`（例如以 2 个字母开头并以 1 结尾）之类的东西，那么如果没有涉及[环视](http://www.regular-expressions.info/lookaround.html)的复杂正则表达式来避免这种情况，您几乎无能为力。

# c# - int 和 Int32 的优缺点

> ID：10484799
> 
> 赞同：1
> 
> 时间：2012-05-07T15:30:52.643
> 
> 标签：c#, c#-4.0

**int**和**Int32**的优点/缺点是什么？为什么我们应该使用第一个而不是第二个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:33:25.443

它们实际上是相同的——都声明 32 位整数，并且在大多数情况下它们的行为是相同的。速记`int`只是`Int32`系统类型的别名。

从语言规范：

> **4.1.4 简单类型**
> C# 提供了一组预定义的结构类型，称为简单类型。简单类型通过保留字标识，但这些保留字只是 System 命名空间中预定义结构类型的别名，如下表所述。

以下是简单类型及其别名的列表：

```
保留字 别名类型
sbyte System.SByte
字节系统.字节
短 System.Int16
ushort System.UInt16
int System.Int32
uint System.UInt32
长 System.Int64
ulong System.UInt64
字符系统.Char
浮动 System.Single
双系统.双
bool System.Boolean
十进制 System.Decimal

```

我能想到的只有几个例子，在哪里使用一个比另一个重要。首先是了解类型的限制（例如密码学）很重要，但这只是为了提高可读性。另一个是枚举：

```
public enum MyEnum : Int32
{
    member1 = 0 //no good
}

public enum MyEnum : int
{
    member1 = 0 //all is well
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:37:58.183

**没有任何实际的优势或劣势**。

**唯一**的区别可能是`int32`您在处理价值的情况下特别可视化`32 bit`。

那是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:32:00.340

`int`只是`Int32`. 所以，就用你更喜欢的吧。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T15:33:50.893

`int`是**System** .Int32的别名

如果你不是`using System;`你没有`Int32`。这就是为什么`int`首选。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T15:38:25.000

如前所述，int 基本上是 Int32。但一个区别是“使用系统；” 使用 Int32 时必须包含命名空间。

# ruby-on-rails - 无法在 RoR 中创建简单的应用程序

> ID：10484804
> 
> 赞同：0
> 
> 时间：2012-05-07T15:31:11.653
> 
> 标签：ruby-on-rails

我尝试创建一个简单的 RoR 3.2.3 应用程序，但我做不到。看来我安装了一些错误的东西。
这是来自 Ubuntu 控制台的代码

```
 ~$ rails test
    /usr/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [] (Gem::LoadError)
from /usr/local/lib/ruby/site_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
from /usr/local/lib/ruby/site_ruby/1.8/rubygems.rb:1208:in `gem'
from /usr/local/bin/rails:18

    ~$ rails -v
    Rails 3.2.3

    ~$ ruby -v
    ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

    ~$ gem -v
    1.8.15 
```

我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:04:10.877

如果你运行`gem list`，你`railties`在列表中看到了吗？

您始终可以通过运行来[清除](https://rvm.io/support/troubleshooting/)您的 rvm 安装`rvm implode`。尝试全新安装，注意不同类型的安装，尤其是在执行多用户安装时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:37:50.417

试试这个包[http://bitnami.org/stack/rubystack](http://bitnami.org/stack/rubystack)它有你开始需要的一切！

# c++ - 如何在 C++ 中使用外部库？

> ID：10484813
> 
> 赞同：3
> 
> 时间：2012-05-07T15:31:31.963
> 
> 标签：c++

我刚开始学习 C++（来自 Java 和 Python）并正在尝试学习如何使用其他库。我找到了一些我想运行的示例代码（来自 boost 站点）（如下），但它给了我这个错误：

```
`Undefined symbols for architecture x86_64:
  "boost::gregorian::greg_month::get_month_map_ptr()", referenced from:
      unsigned short boost::date_time::month_str_to_ushort<boost::gregorian::greg_month>(std::string const&) in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)` 
```

我认为代码是可靠的（因为它不是由我生成的 :-) 但我不确定使用另一个库所需的步骤。到目前为止，我刚刚添加了#include，但我是否也应该为此使用头文件（当我自己创建多个文件但不确定外部库时，我知道如何使用一个头文件）。

我发现了一个类似的问题（[using from_string with boost date](https://stackoverflow.com/questions/7223809/using-from-string-with-boost-date)），这表明我需要将它链接到 boost 的数据时间，所以我运行了命令（更改了文件名）并得到了这个错误：

```
`ld: library not found for -lboost_date_time
collect2: ld returned 1 exit status` 
```

我想我正确安装了 boost，我`Brew`在 mac 上使用并看到它编译了一堆文件（安装大约需要一个小时）。因此，如果已安装，我在做什么错（或不做什么）？

谢谢

这是代码：

```
#include "boost/date_time/gregorian/gregorian.hpp"
#include <iostream>

int
main() 
{

    using namespace boost::gregorian;
    std::string s;
    std::cout << "Enter birth day YYYY-MM-DD (eg: 2002-02-01): ";
    std::cin >> s;
    try {
        date birthday(from_simple_string(s));
        date today = day_clock::local_day();
        days days_alive = today - birthday;
        days one_day(1);
        if (days_alive == one_day) {
            std::cout << "Born yesterday, very funny" << std::endl;
        }
        else if (days_alive < days(0)) {
            std::cout << "Not born yet, hmm: " << days_alive.days() 
            << " days" <<std::endl;
        }
        else {
            std::cout << "Days alive: " << days_alive.days() << std::endl;
        }

    }
    catch(...) {
        std::cout << "Bad date entered: " << s << std::endl;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:34:53.990

boost 库通常具有非常时髦的名称，其中包括构建选项，有时还包括版本。

在我的系统上，我可能会`-lboost_date_time-mgw45-d-1_47`用来链接到您提到的库。

# javascript - javascript - 传递多个值

> ID：10484816
> 
> 赞同：0
> 
> 时间：2012-05-07T15:31:37.503
> 
> 标签：javascript

我有以下函数调用

```
 setVal("' + key + ',' + addressid + '") 
```

请注意我是如何尝试传递 2 个值、键和地址 ID 的。

我的实际功能如下：

```
 function setVal(key, addressid) {

    } 
```

当我在 SetVal 函数中检查 key 的值时，我得到 key = hcpkey + ',' + addressid 的值。

addressid 的值是未定义的，尽管它确实有一个值。我在传递价值方面做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:33:33.930

摆脱所有这些报价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:34:02.493

你用一个大字符串调用函数：`"' + key + ',' + addressid + '")`

你应该这样称呼它：

```
setVal("First Value", "Second Value"); 
```

如果这些是变量，请留下引号：

```
setVal(key, addressid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:34:33.483

您正在传递一个参数；具有值的字符串`' + key + ',' + addressid + '`

除非你试图做一些我没有接受的事情，否则你只想要这个：

```
setVal(key, addressid) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T15:33:50.917

您应该像这样简单地调用您的函数：

```
setVal(key, addressid); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T15:34:12.110

不要在不需要的地方使用引号：

```
setVal(key, addressid); 
```

您需要变量（或更确切地说是它们的值）而不是变量名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T15:34:19.343

是的，您需要分别传递它们：

```
setVal(key, addressid); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T15:34:40.740

像这样调用函数：

```
setVal(key, addressid); 
```

# java - 是否/可以异步会话方法比 servlet 调用寿命更长

> ID：10484820
> 
> 赞同：1
> 
> 时间：2012-05-07T15:31:46.323
> 
> 标签：java, asynchronous, ejb-3.1

我不知道这是不是一个好问题。EJB 3.1 带来了使用异步标记方法的可能性。我想知道异步调用的寿命是否比 servlet 线程长，或者 servlet 线程是否在后台等待进程完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:17:17.427

不，线程不在后台等待。您可以通过调用持久任务来轻松测试这一点，并在会话超时后监视它是否仍然存在（只需调整非常短的超时）。

连接问题是在客户端从不调用 Future.get() 的情况下不必要地保留资源。为了避免它们被保留在整个应用程序运行时，规范允许超时：

> 允许 EJB 容器提供者定义一个超时值，该值控制容器为完成的异步调用维护结果值的最长时间。这种超时的配置超出了本规范的范围。

# android - PhoneGap + Android + 媒体查询

> ID：10484822
> 
> 赞同：4
> 
> 时间：2012-05-07T15:31:50.950
> 
> 标签：android, android-layout, cordova, media-queries

我已经为此苦苦挣扎了一个星期。我已经阅读了大量的帖子/网站/提示和技巧，但我就是想不通。

我需要为不同的屏幕尺寸和方向设置 CSS 规则。但是识别它不起作用。

我尝试过：最小宽度，最大宽度，最小高度，最大高度，最小设备宽度，最大设备宽度，最小设备高度，最大设备高度，方向：纵向，方向: Landscape, media="only screen and (max...", media="screen and (max...", media="(max.."), all kind of convinations,这些都不适用于所有决议和方向。

这是和示例：

```
<link rel="stylesheet" href="css/iscroll.css" />
<link rel="stylesheet" href="css/iscroll_600.css"  type="text/css" media="only screen and (max-width: 600px) and (max-height: 1024px) and (orientation: portrait)"/>    
<link rel="stylesheet" href="css/iscroll_600.css"  type="text/css" media="only screen and (max-width: 1024px) and (max-height: 600px) and (orientation: landscape)"/> 
<link rel="stylesheet" href="css/iscroll_1280.css" type="text/css" media="only screen and (max-width: 800px) and (max-height: 1280px) and (orientation: portrait)"/>
<link rel="stylesheet" href="css/iscroll_1280.css" type="text/css" media="only screen and (max-width: 1280px) and (max-height: 800px) and (orientation: landscape)"/> 
```

我该如何解决这个问题？谢谢

dhcmega

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T13:50:17.770

看起来它是这样工作的

```
<link rel="stylesheet" href="css/style_default.css" />
<link rel="stylesheet" href="css/style320.css" media="(min-width: 241px) and (max-width: 320px) and (orientation: portrait)"/>
<link rel="stylesheet" href="css/style480.css" media="(min-width: 321px) and (max-width: 480px) and (orientation: portrait)"/>  
<link rel="stylesheet" href="css/style540.css" media="(min-width: 481px) and (max-width: 540px) and (orientation: portrait)"/>
<link rel="stylesheet" href="css/style600.css" media="(min-width: 541px) and (max-width: 600px) and (orientation: portrait)"/>  
<link rel="stylesheet" href="css/style1280.css" media="(min-width: 601px) and (max-width: 800px) and (orientation: portrait)"/>
<link rel="stylesheet" href="css/style1536.css" media="(min-width: 801px) and (max-width: 1152px) and (orientation: portrait)"/>
<link rel="stylesheet" href="css/style320.css" media="(min-width: 321px) and (max-width: 480px) and (orientation: landscape)"/>
<link rel="stylesheet" href="css/style480.css" media="(min-width: 481px) and (max-width: 800px) and (orientation: landscape)"/>  
<link rel="stylesheet" href="css/style540.css" media="(min-width: 801px) and (max-width: 960px) and (orientation: landscape)"/>    
<link rel="stylesheet" href="css/style600.css" media="(min-width: 961px) and (max-width: 1024px) and (orientation: landscape)"/> 
<link rel="stylesheet" href="css/style1280.css" media="(min-width: 1025px) and (max-width: 1280px) and (orientation: landscape)"/>    
<link rel="stylesheet" href="css/style1536.css" media="(min-width: 1281px) and (max-width: 1536px) and (orientation: landscape)"/> 
```

这就像创建完全不重叠的不同分辨率集

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T16:36:34.203

您是否尝试过使用 javascript 来查看媒体查询返回的内容，以检查结果？

```
var mq = window.matchMedia( "only screen and (max-width: 600px) and (max-height: 1024px) and (orientation: portrait)" );  

if (mq.matches) {
    // window width is exactly 600x1024 and portrait
}
else {
    // window width is exactly 600x1024 and portrait
} 
```

[链接供参考](http://www.sitepoint.com/javascript-media-queries/)。

# php - 使用 DOM 在 HTML 中查找文本行/字符串

> ID：10484825
> 
> 赞同：1
> 
> 时间：2012-05-07T15:32:01.777
> 
> 标签：php, domdocument

我有一些纯文本/HTML 内容，如下所示：

```
Title: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Snippet: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Category: Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
```

我只想匹配上面写着“**片段：** ”的行以及它后面的文本，但仅在该行上，没有其他内容，并且还使搜索**不区分大小写**。我尝试使用正则表达式，但最终我想现在尝试使用 DOMDocument，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:23:59.720

如果涉及 DOM，请参阅我在评论中链接的副本。

否则你可能只是寻找一个正则表达式：

```
$line = preg_match('~(^Snippet:.*$)~m', $text, $matches) ? $matches[1] : NULL; 
```

[演示](http://ideone.com/1O8gv)和正则表达式解释：

```
~  -- delimiter
 (  -- start match group 1
  ^  -- start of line
    Snippet:  -- exactly this text
    .*  -- match all but newline
  $  -- end of line
 )  -- end match group 1
~  -- delimiter
m  -- multiline modifier (^ matches begin of line, $ end of line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:40:42.157

我不知道你的问题的一些细节，所以我的回答可能不合适。您可以根据需要解析的内容的大小来决定这不是一个选项。此外，从问题中不清楚 html 内容的位置，这就是为什么我编写了这个不使用 DOM 解析的解决方案。

一种可能的解决方案可能是获取要在数组中解析的行。之后，您可以过滤数组，从结果中删除与您的规则不匹配的行。

一个样本是：

```
//this is the content
$text = 'Title: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Snippet: Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Category: Lorem ipsum dolor sit amet, consectetur adipiscing elit.';

//get the lines from your input as an array.. you could acheive this in a different way if, for example, you are reading from a file
$lines = explode(PHP_EOL, $text);

// apply a cusom function to filter the lines (remove the ones that don't match your rule)
$results = array_filter($lines, 'test_content');

//show the results
echo '<pre>';
print_r($results);
echo '</pre>';

//custom function here:
function test_content($line)
{
    //case insensitive search, notice stripos; 
    // type strict comparison to be sure that it doesn't fail when the element is found right at the start
    if (false !== stripos($line, 'Snippet'))
    {
        return true;
    }
    return false;//these lines will be removed 
} 
```

这段代码将只返回 $results 数组中的一个元素，即第二行

你可以在这里看到它：http: [//codepad.org/220BLjEk](http://codepad.org/220BLjEk)

# html - CSS 定位和浮动一切都在叠加

> ID：10484831
> 
> 赞同：1
> 
> 时间：2012-05-07T15:32:10.590
> 
> 标签：html, css, positioning, css-float

嗨，由于某种原因，我的 css 有问题我无法在另一个 div 下获得 div 所以这是我的代码

现场演示 adamlisik.co.uk/kantor2 这是我的 CSS

```
body{
margin: 0;
font-family: Arial, sans-serif;
font-size: 13px;
line-height: 18px;
padding:0px;
background-image:url('../images/bg-body.jpg');
background-attachment:fixed;
}
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-family: inherit;
  font-weight: bold;
  color: inherit;
  }
h1 {
  font-size: 30px;
  line-height: 36px;
}
h2 {
  font-size: 24px;
  line-height: 36px;
}
h3 {
  line-height: 27px;
  font-size: 18px;
}
h4,
    h5,
h6 {
  line-height: 18px;
}
h4 {
  font-size: 14px;
}
h5 {
  font-size: 12px;
}
h6 {
  font-size: 11px;
  color: #999999;
  text-transform: uppercase;
}
p {
  margin: 0 0 9px;
  font-family: Arial, sans-serif;
  font-size: 13px;
  line-height: 18px;
    color:#0d0d0d;
}
hr{ border:none; height:1px; margin:30px 0; background-color:#CCCCCC; color:#CCCCCC; }
    .hr{ border-top:1px solid #CCCCCC; margin:30px 0; }
.container {
width:1000px;
margin: auto;
padding:0px;
background:#FFF;
}
.header { 
position:relative; 
z-index:10; 
background-image:url('../images/logo1.jpg');
background-repeat:no-repeat;
background-position:left bottom; 
height:100px;
width:950px;
margin:auto;

}

ul#dropdown-menu{  float:right; list-style:none; margin-bottom:0px; padding-top:70px; }       
ul#dropdown-menu li{ float: left; }
ul#dropdown-menu li a{ display: block; padding:7px 21px 5px 0; font-size:16px; text-transform:none; color:#252525;text-decoration:none; font-weight:bold; }            
ul#dropdown-menu li a:hover{ color:#FF0000;}
ul#dropdown-menu li.hover a{ text-decoration:underline;  }           
ul#dropdown-menu li.current > a{ color: #FF0000; }                             
ul#dropdown-menu li .sub-menu li a{ color:#252525; }                               
ul#dropdown-menu li.last > a{ padding-right:0px; }

.money {
    margin-top:20px;
    background-image:url('../images/hr-bg.jpg');
    height:120px
}

.content {
padding:25px 50px 10px;
}

.footer {
padding:5px 15px 10px;
} 
```

现在，只要您在 css 中添加下两个类以使表转到 ether 端

```
 .left {
float:left;
}
.right {
float:right;} 
```

每件事都会改变 hr 在表格上方，并且所有页脚样式都不起作用

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:48:31.047

当您将`float`属性添加到元素时，它会从正常流中删除，因此仍处于正常流中的父元素的行为就像浮动元素不再是它的子元素一样。

你可以这样解决：

```
.hr{ clear: both; } 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:44:45.243

发生这种情况是因为 的两个子元素`.content`都是浮动的，因此该容器的高度表现为它仅包含前两个`<p>`（非浮动）元素（如您所见，该`hr`元素位于最后一段的下方）。

要恢复正确的高度，只需对父级应用某种非结构清除，例如[easyclearing](http://dtott.com/thoughts/2007/12/10/clear-your-floats-the-right-way)。或者只是添加

```
.content {
  height: auto; overflow: hidden 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:48:19.890

在 class="hr" div 之前添加下面的 div

```
<div style="clear:both;"></div> 
```

所以它应该看起来像这样

```
</div>
<div style="clear:both;"></div>
<div class="hr"></div>
<div class="footer"> 
```

这同时导致页脚再次位于表格下方。

# encoding - 检测错误的 UTF-8 编码：要嗅探的错误字符列表？

> ID：10484833
> 
> 赞同：11
> 
> 时间：2012-05-07T15:32:14.687
> 
> 标签：encoding, utf-8, iso-8859-1

我有一个在两个应用程序之间共享的 sql-server 2010 数据库。我们可以控制一个应用程序，而另一个应用程序是一个第三方应用程序，它首先创建了数据库。我们的应用程序是建立在第三方网络邮件应用程序之上的 CRM。

该数据库包含 varchar 列并且是 latin-1 编码的。第三方应用程序是用 php 编写的，并不关心数据的正确编码，因此它将 utf-8 编码字节填充到 varchar 列中，在那里它们被解释为 latin-1 并且看起来像垃圾。

我们的 CRM 应用程序是用 .Net 编写的，它会自动检测数据库排序规则与内存中字符串的编码不同，因此当 .Net 写入数据库时​​，它会转换字节以匹配数据库编码。

所以......从我们的应用程序写入数据库的数据在数据库中看起来是正确的，但来自第三方应用程序的数据却不是。

当我们的应用程序写入 FirstName = Céline 时，它​​作为 Céline 存储在数据库中

当网络邮件应用程序写入 FirstName = Céline 时，它​​作为 Céline 存储在数据库中

我们的 CRM 应用程序需要显示在任一系统中创建的联系人。因此，我正在编写一个 EncodingSniffer 类，该类查找指示其编码不佳的字符串的标记字符并将它们转换。

目前我有：

```
私有静态字符串 [] _flaggedChars = 新字符串 [] {
            “©”
        };

```

这非常适合将 Céline 显示为 Céline，但我需要添加到列表中。

有谁知道一种资源来获取 utf-8 特殊字符可以被解释为 iso-8859-1 的所有可能方式？

谢谢

**澄清：** 因为我在.Net 工作。当从数据库加载到内存中时，该字符串将转换为 Unicode UTF-16。因此，无论它是否在数据库中正确编码。它现在表示为 UTF16 字节。我需要能够分析这些 UTF-16 字节，并确定它们是否由于 utf-8 字节被填充到 iso-8859-1 数据库中而搞砸了.... 像泥巴一样清楚吗？

这是我到目前为止所拥有的。它已经清除了大多数错误编码字符的显示，但我仍然遇到了 É 的问题，例如：Éric 通过 webmail 存储在数据库中作为 Ã‰ric，但在检测到错误编码并将其改回后，它显示为 ?? ric 查看拥有 2500 个联系人的用户，其中数百个有编码问题，É 是唯一不能正确显示的东西......

```
public static Regex CreateRegex()
    {
        string specials = "ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö";

        List<string> flags = new List<string>();
        foreach (char c in specials)
        {
            string interpretedAsLatin1 = Encoding.GetEncoding("iso-8859-1").GetString(Encoding.UTF8.GetBytes(c.ToString())).Trim();//take the specials, treat them as utf-8, interpret them as latin-1
            if (interpretedAsLatin1.Length > 0)//utf-8 chars made up of 2 bytes, interpreted as two single byte latin-1 chars.
                flags.Add(interpretedAsLatin1);
        }

        string regex = string.Empty;
        foreach (string s in flags)
        {
            if (regex.Length > 0)
                regex += '|';
            regex += s;
        }
        return new Regex("(" + regex + ")");
    }

    public static string CheckUTF(string data)
    {
        Match match = CreateRegex().Match(data);
        if (match.Success)
            return Encoding.UTF8.GetString(Encoding.GetEncoding("iso-8859-1").GetBytes(data));//from iso-8859-1 (latin-1) to utf-8
        else
            return data;
    } 
```

所以：É 被转换为 195'Ã',8240'‰'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:28:20.900

您可能应该尝试将字节字符串解码为 UTF-8，如果出现错误，请假设它是 ISO-8859-1。

编码为 ISO-8859-1 的文本很少“碰巧”也是有效的 UTF-8 ...所有，当然。所以这个方法是相当稳健的。

忽略实际语言中哪些字符比其他字符更频繁地出现，这是一个天真的分析，假设每个字符以相同的频率出现。让我们尝试找出有效的 ISO-8859-1 被误认为 UTF-8 导致 mojibake 的频率。我还假设不会出现 C1 控制字符（U+0080 到 U+009F）。

对于字节字符串中的任何给定字节。如果字节接近字符串的末尾，那么您更有可能检测到格式错误的 UTF-8，因为已知某些字节序列的长度不足以成为有效的 UTF-8。但假设字节不在字符串末尾附近：

*   p（字节解码为 ASCII）= 0.57。这没有提供有关字符串是 ASCII、ISO-8859-1 还是 UTF-8 的信息。
*   如果这个字节是 0x80 到 0xc1 或 0xf8 到 0xff，它不能是 UTF-8，所以你会检测到。p=0.33
*   如果第一个字节是 0xc2 到 0xdf (p=0.11)，那么它可能是有效的 UTF-8，但前提是它后面跟着一个值在 0x80 和 0xbf 之间的字节。下一个字节不在该范围内的概率是 192/224 = 0.86。所以 UTF-8 在这里失败的概率是 0.09
*   如果第一个字节是 0xe0 到 0xef，那么它可能是有效的 UTF-8，但前提是它后面跟着 2 个连续字节。因此，您将检测到错误 UTF-8 的概率为 (16/224)*(1-(0.14*0.14)) = 0.07
*   对于 0xf0 到 0xf7 类似，概率为 (8/224)*(1-(0.14*0.14*0.14)) = 0.04。

在长字符串中的每个字节处，检测到错误 UTF-8 的概率为 0.33+0.09+0.07+0.04 = 0.53。

因此对于长字符串，ISO-8859-1 静默通过 UTF-8 解码器的概率非常小：每增加一个字符，它大约减半！

这种分析当然假设随机 ISO-8859-1 字符。实际上，错误检测率不会那么好（主要是因为现实世界文本中的大多数字节实际上都是 ASCII），但它仍然会非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T16:47:53.467

感谢@Michael 完成了超过 99% 的工作！

这是 Michael 脚本的 PowerShell 版本，适用于任何人。这也是@Qubei 建议的`Windows-1252`代码页/编码来解决`É`问题；虽然允许您修改这些编码，以防您的数据通过不同的编码组合损坏。

```
#based on c# in question: https://stackoverflow.com/questions/10484833/detecting-bad-utf-8-encoding-list-of-bad-characters-to-sniff
function Convert-CorruptCodePageString {
    [CmdletBinding(DefaultParameterSetName = 'ByInputText')]
    param (
        [Parameter(Mandatory = $true, ValueFromPipeline = $true, ParameterSetName = 'ByInputText')]
        [string]$InputText
        ,
        [Parameter(Mandatory = $true, ValueFromPipeline = $true, ParameterSetName = 'ByInputObject')]
        [PSObject]$InputObject
        ,
        [Parameter(Mandatory = $true, ParameterSetName = 'ByInputObject')]
        [string]$Property
        ,
        [Parameter()]
        [System.Text.Encoding]$SourceEncoding = [System.Text.Encoding]::GetEncoding('Windows-1252')
        ,
        [Parameter()]
        [System.Text.Encoding]$DestinationEncoding = [system.Text.Encoding]::UTF8
        ,
        [Parameter()]
        [string]$DodgyChars = 'ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö'
    )
    begin {
        [string]$InvalidCharRegex = ($DodgyChars.ToCharArray() | %{
            [byte[]]$dodgyCharBytes = $DestinationEncoding.GetBytes($_.ToString())
            $SourceEncoding.GetString($dodgyCharBytes,0,$dodgyCharBytes.Length).Trim()
        })  -join '|'   
    }
    process {
        if ($PSCmdlet.ParameterSetName -eq 'ByInputText') {
            $InputObject = $null
        } else {
            $InputText = $InputObject."$Property"
        }
        [bool]$IsLikelyCorrupted = $InputText -match $InvalidCharRegex
        if ($IsLikelyCorrupted) { #only bother to decrupt if we think it's corrupted
            [byte[]]$bytes = $SourceEncoding.GetBytes($InputText)
            [string]$outputText = $DestinationEncoding.GetString($bytes,0,$bytes.Length)
        } else {
            [string]$outputText = $InputText
        }
        [pscustomobject]@{
            InputString = $InputText
            OutputString = $outputText
            InputObject = $InputObject
            IsLikelyCorrupted = $IsLikelyCorrupted
        }        
    }
} 
```

**演示**

```
#demo of using a simple string without the function (may cause corruption since this doesn't check if the characters being replaced are those likely to have been corrupted / thus is more likely to cause corruption in many strings).
$x = 'StrÃ¸mmen'
$bytes = [System.Text.Encoding]::GetEncoding('Windows-1252').GetBytes($x)
[system.Text.Encoding]::UTF8.GetString($bytes,0,$bytes.Length)

#demo using the function
$x | Convert-CorruptCodePageString

#demo of checking all records in a table for an issue / reporting those with issues
#amend SQL Query, MyDatabaseInstance, and MyDatabaseCatlogue to point to your DB / query the relevant table
Invoke-SQLQuery -Query 'Select [Description], [RecId] from [DimensionFinancialTag] where [Description] is not null and [Description] > ''''' -DbInstance $MyDatabaseInstance -DbCatalog $MyDatabaseCatalog |
    Convert-CorruptCodePageString -Property 'Description' | 
    ?{$_.IsLikelyCorrupted} | 
    ft @{N='RecordId';E={$_.InputObject.RecId}}, InputString, OutputString 
```

**我的演示中使用的附加功能**

我不是`Invoke-SqlCmd`cmdlet 的粉丝，所以我自己动手。

```
function Invoke-SQLQuery {
    [CmdletBinding(DefaultParameterSetName = 'ByQuery')]
    param (
        [Parameter(Mandatory = $true)]
        [string]$DbInstance
        ,
        [Parameter(Mandatory = $true)]
        [string]$DbCatalog
        ,
        [Parameter(Mandatory = $true, ParameterSetName = 'ByQuery')]
        [string]$Query
        ,
        [Parameter(Mandatory = $true, ParameterSetName = 'ByPath')]
        [string]$Path
        ,
        [Parameter(Mandatory = $false)]
        [hashtable]$Params = @{}
        ,
        [Parameter(Mandatory = $false)]
        [int]$CommandTimeoutSeconds = 30 #this is the SQL default
        ,
        [Parameter(Mandatory = $false)]
        [System.Management.Automation.Credential()]
        [System.Management.Automation.PSCredential]$Credential=[System.Management.Automation.PSCredential]::Empty 
    )
    begin {
        write-verbose "Call to 'Execute-SQLQuery'"
        $connectionString = ("Server={0};Database={1}" -f $DbInstance,$DbCatalog)
        if ($Credential -eq [System.Management.Automation.PSCredential]::Empty) {
            $connectionString = ("{0};Integrated Security=True" -f $connectionString)
        } else {
            $connectionString = ("{0};User Id={1};Password={2}" -f $connectionString, $Credential.UserName, $Credential.GetNetworkCredential().Password)    
            $PSCmdlet.Name    
        }
        $connection = New-Object System.Data.SqlClient.SqlConnection
        $connection.ConnectionString = $connectionString
        $connection.Open()    
    }
    process {
        #create the command & assign the connection
        $cmd = new-object -TypeName 'System.Data.SqlClient.SqlCommand'
        $cmd.Connection = $connection

        #load in our query
        switch ($PSCmdlet.ParameterSetName) {
            'ByQuery' {$cmd.CommandText = $Query; break;}
            'ByPath' {$cmd.CommandText = Get-Content -Path $Path -Raw; break;}
            default {throw "ParameterSet $($PSCmdlet.ParameterSetName) not recognised by Invoke-SQLQuery"}
        }
        #assign parameters as required 
        #NB: these don't need declare statements in our query; so a query of 'select @demo myDemo' would be sufficient for us to pass in a parameter with name @demo and have it used
        #we can also pass in parameters that don't exist; they're simply ignored (sometimes useful if writing generic code that has optional params)
        $Params.Keys | %{$cmd.Parameters.AddWithValue("@$_", $Params[$_]) | out-null}

        $reader = $cmd.ExecuteReader()
        while (-not ($reader.IsClosed)) {
            $table = new-object 'System.Data.DataTable'
            $table.Load($reader)
            write-verbose "TableName: $($table.TableName)" #NB: table names aren't always available
            $table | Select-Object -ExcludeProperty RowError, RowState, Table, ItemArray, HasErrors
        }

    }
    end {
        $connection.Close()
    }
} 
```

# php - 如何确保在生成 PDF 之前加载图像？

> ID：10484834
> 
> 赞同：9
> 
> 时间：2012-05-07T15:32:24.530
> 
> 标签：php, curl, pdf-generation, wkhtmltopdf

我有一个 PHP 循环，它执行以下操作：

1.  通过 CURL 登录网页
2.  需要登录的捕获和内部页面
3.  将页面的 HTML 保存到本地文件
4.  使用 WKHTMLTOPDF，将页面呈现为 PDF

我遇到的问题是每隔一段时间（大约 30% 的时间），图像不会在 PDF 中呈现。如果我打开其中一个保存的 HTML 文件，我会发现我需要进入并手动刷新页面才能显示图像。

关于如何务实地确保图像加载的任何想法？我尝试过的事情：

1.  `sleep(n)`在每一行之间
2.  添加`--javascript-delay 30000`到我的 WKHTMLTOPDF 调用以确保它有足够的时间来加载任何图像。

#1 让它变得更糟，而 #2 什么也没做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:19:13.857

如果在使用 cURL 抓取 html 后，让 php 循环遍历每个 img 元素并读取图像文件二进制数据并将图像 src url 属性替换为打开的图像文件的 base64 编码值，例如：

`'<img src="data:image/jpg;base64,'. base64_encode($imagedata) . '"/>'`

如果 base64 图像数据被硬编码到页面中，那么这将为您提供一种编程方式来验证所有图片是否已“加载”并防止在所有图片下载之前开始 pdf 转换的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:59:58.407

在示例的第 3 步和第 4 步之间，您可能需要考虑解析所有图像链接的 HTML 文件并使用 curl 单独下载它们，也将它们保存在本地，然后更新保存的 HTML 文件中的链接以指向新的本地图像资源而不是远程资源。

在将 HTML 呈现为 PDF 时，这应该会大大缩短图像的加载时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T14:15:45.537

我从来没有这样做过，但也许你可以通过迭代调用`curl_getinfo()`然后读出值来确定下载是否完成`CURLINFO_SIZE_DOWNLOAD`- 直到该值不再改变？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T00:18:12.533

您不能将 onLoad 添加到您需要知道正在加载的图像中吗？就像是

```
<img src='foo.jpg' onLoad='callbackFuncion();'/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T12:08:24.410

也许您可以处理下载的 HTML，搜索 img 标签，然后将图像下载到本地存储并替换 src 属性。这样，您应该在所有图像可用后生成 pdf。

# android - 试图从另一个类中获取字符串

> ID：10484837
> 
> 赞同：0
> 
> 时间：2012-05-07T15:32:39.843
> 
> 标签：android, class

在我的登录类中，我得到了用户名。然后在我的报告类中，我尝试检索该名称。当我在登录中输入用户名时，我使用了断点，字符串显示正确。但是，当我尝试从报告类访问它时，登录中的函数会返回一个空字符串。我在堆栈上环顾四周并使用谷歌，我很确定我正在遵循我应该做的事情，但它不起作用。

这是登录时的一些代码。如果需要，我可以显示更多代码，但是当我在登录中使用断点时，dName 始终是正确的名称，driversName 也是如此。但是当我从报告中返回 returnName 时，driversName 是一个空字符串。我已在班级中将 driversName 声明为全局变量而不是局部变量。

```
private void getDriversName(String dName)
{
    driversName=dName;
}

public String returnName()
{
    return driversName;

} 
```

这是报告中的代码。我可以再一次添加更多需要的 id。我也正确导入了登录名。我使用了断点，当我使用 step in 时，我需要登录。名称返回为空。

```
 LogIn login;
   login=new LogIn();
   String name= login.returnName();
   driver.setText(name); 
```

更新：我发现我需要添加静态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:37:49.043

您正在创建一个新`LogIn()`对象，然后立即检查返回名称。除非名称以某种方式在构造函数中设置，否则它将始终返回默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:38:45.457

好吧，`login=new LogIn();`意味着您希望 Java 创建`LogIn`该类的新实例。每当创建一个新实例时，它都不知道可能存在的任何旧实例。您可能想要做的是保留用户名（例如，如下所示）并在“报告”类中需要它时要求它。

像这样简单的事情就可以解决问题：

```
public class UserContext {
    public static String USERNAME;
    public static void setUsername(String name) {
        USERNAME = name;
    }
} 
```

在您的 LogIn 类中，验证凭据，然后`UserContext.setUsername(...)`使用经过身份验证的用户名进行调用，然后在您的报告类中，您可以使用`UserContext.USERNAME`.

很简单，对吧？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T15:39:57.520

你是在调用 login.returnName() 之前调用**getDriversName函数吗？**从您的代码中可以看出，在 getDriversName 函数调用之后，driversName 将具有价值。

此外，您可以为登录和其他任务实现其他方法，即保留一个维护所有此类会话的公共类。您可以在登录后设置值，然后在整个项目的任何位置获取它们。像

```
Common.getUserName()
{
    return USERNAME;
} 
```

并在登录成功后调用此函数。

```
Common.setUserName(String name)
{

this.USERNAME= name;

} 
```

希望这会有所帮助。

# php - PHP Wordpress - 调用最新的 3 个帖子

> ID：10484841
> 
> 赞同：0
> 
> 时间：2012-05-07T15:33:08.500
> 
> 标签：php, wordpress

我是 PHP 的新手，但希望获得有关如何在 wordpress 页面底部显示最新 3 篇文章的帮助。我希望显示每个帖子的标题，以及属于该帖子的图像，可能还有帖子中的第一行文本，以及一个阅读更多按钮，然后我可以使用 CSS 设置样式以匹配网站的其余部分。

这很容易实现吗？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:40:08.690

试试这个：

```
$args = array(
    'numberposts'     => 3,
    'offset'          => 0,
    'category'        => ,
    'orderby'         => 'post_date',
    'order'           => 'DESC',
    'include'         => ,
    'exclude'         => ,
    'meta_key'        => ,
    'meta_value'      => ,
    'post_type'       => 'post',
    'post_mime_type'  => ,
    'post_parent'     => ,
    'post_status'     => 'publish' );

get_posts($args); 
```

[WordPress 参考](http://codex.wordpress.org/Template_Tags/get_posts)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:41:10.413

可以通过以下方式检索帖子[`get_posts()`](http://codex.wordpress.org/Template_Tags/get_posts)：

```
 <?php $posts_array = get_posts( array('numberposts' => 3) ); ?> 
```

在渲染帖子方面，值得检查您的主题（或已安装的插件）是否提供某种“帖子预览”小部件。如果是这样，请节省一些心痛并使用它。如果没有，您可以按照以下方式自己打印帖子：

```
<?php foreach ($posts_array as $post): setup_postdata($post); ?>

  <!-- template tag: print thumbnail -->
  <?php get_the_post_thumbnail($post->ID); ?>

  <!-- template tag: print title -->
  <h3><?php the_title(); ?></h3>

  <!-- template tag: print excerpt -->
  <p><?php the_excerpt(); ?></p>

<?php endforeach; ?> 
```

# git - 在 Subversion 之前使用 DVCS 时，我应该在推送之前合并还是变基？

> ID：10484846
> 
> 赞同：4
> 
> 时间：2012-05-07T15:33:42.090
> 
> 标签：git, svn, mercurial, workflow, dvcs

我的公司正式使用 Subversion，但我在日常工作中使用 Mercurial 和 hgsubversion 插件。

我倾向于一次拥有多个本地功能分支（hg 书签）。当我在一个分支上完成工作时，我会将它变基到 Subversion 主干的顶端，并将整个分支历史推送到 Subversion 存储库中。

我喜欢我所有的细粒度更改都进入主存储库 - 我的同事可以看到我为什么要进行更改，而不仅仅是最终结果。但是推送到 Subversion 会重写我的提交，将时间戳更改为推送的时刻，所以我从我的工作历史中失去了一点保真度。

我开始怀疑我是否应该合并我的本地分支以推送到 SVN，并在我的 Hg 存储库的分支中维护我的本地提交历史记录。如果我转向面向合并的工作流程，我会伤害我的团队吗？是否真的可以用单个提交消息总结合并中的更改？

Git->Subversion 是否有同样的二分法？除了这个哲学问题，我对 Hg->Subversion 工作流程非常满意。但是，与我交谈过的任何 Git 用户似乎都讨厌将 Git 作为 SVN 的前端，而不仅仅是对开源项目进行简短的检查和补丁提交。

# ios - 用于上传图像以进行原型制作的网站？

> ID：10484849
> 
> 赞同：0
> 
> 时间：2012-05-07T15:33:49.890
> 
> 标签：ios, image, upload, web

我目前正在开发一个需要将图像上传到某个地方的图像服务器的应用程序，但是对于原型设计，我希望那里会有一个已经提供服务的站点。

我查看了 imgur 的 API，它们每小时提供 50-200 张图像，具体取决于匿名和专业帐户。我只是想知道在我继续使用 imgur 之前是否还有其他/更好的选择。

谢谢！

莱利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:46:32.530

您也可以使用 flickr 帐户，但您当然需要先授权。[http://www.flickr.com/services/api/upload.api.html](http://www.flickr.com/services/api/upload.api.html)

# javascript - 调用对象成员 - javascript

> ID：10484852
> 
> 赞同：2
> 
> 时间：2012-05-07T15:33:52.010
> 
> 标签：javascript

如果我有：

```
var obj={
    a:function(){obj.b();},
    b:function(){this.a();}
}; 
```

用“this”调用对象方法或直接引用对象本身有什么区别，因为它与方法在同一范围内？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:35:59.443

依靠

`this`可以采取多种形式，使其不可预测：

*   在普通函数调用中，如`funcName()`，`this`是全局对象。在浏览器中，它是`window`对象。

*   在函数使用“use strict”的普通函数调用中，`this`是`undefined`.

*   对于用作构造函数的函数，如`var instance = new ConstructorFunction()`，`this`将引用从该构造函数创建的实例对象。

*   对于对象字面量，`this`是包含函数的直接对象字面量。

*   `call(context,args...)`当由or调用时`apply(context,[args...])`，`this`不管`context`是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:36:04.223

`this`可以根据您调用函数的方式而改变：

```
var funnyB = obj.b;
funnyB();  //this is window 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T17:24:23.260

在您提供的对象文字上下文中，没有逻辑上的区别。`this`关键字指向`obj`变量，因为`this`是对函数是属性/方法的对象的引用。

# c# - Stacking one picture box on another in the designer view

> ID：10484853
> 
> 赞同：0
> 
> 时间：2012-05-07T15:33:59.187
> 
> 标签：c#, winforms

I have a strange problem with my PictureBox controls where I am trying to stack one on top of the other in the designer view. With the first PictureBox I have an image as well as with the second one but when I stack the second one on top of the first one they seem to be switching places as if the one underneath is moved forward.

Any way of preventing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:37:43.950

You can right click on one and choose "Send to Back."

That changes the order in which the controls are added to the form's Controls list in the .Designer.cs file.

Controls at the end of the list are farther down the Z order (towards the back).

# windows-phone-7 - 参数不正确。在 MS.Internal.XcpImports.MethodEx（IntPtr ptr，字符串名称，CValue[] cvData）

> ID：10484856
> 
> 赞同：15
> 
> 时间：2012-05-07T15:34:08.290
> 
> 标签：windows-phone-7, exception, back

在 Wp7 上，当用户在显示电话键盘时按下页面上的“开始”按钮并点击设备后退按钮时，应用程序崩溃并出现以下异常：-

```
The parameter is incorrect. 
   at MS.Internal.XcpImports.MethodEx(IntPtr ptr, String name, CValue[] cvData)
   at MS.Internal.XcpImports.MethodPack(IntPtr objectPtr, String methodName, Object[] rawData)
   at MS.Internal.XcpImports.UIElement_TransformToVisual(UIElement element, UIElement visual)
   at System.Windows.Controls.SipHelper.AdjustFrame(FrameworkElement element, Double bottomMargin, Double& stillObscured)
   at System.Windows.Controls.SipHelper.SelectionChanged(Object sender, RoutedEventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

我无法理解异常是从哪里产生的。

谢谢，金谷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T17:50:06.717

发生这种情况是因为您在页面布局中添加了两次控件或将任何对象添加到其父级两次。检查 OnNavigatedTO 方法中的代码。当您返回页面时 OnNavigatedTo 再次执行，因此如果您将任何对象添加到其父级在 OnNavigatedTo 方法中，您应该从 OnNavigatedFrom 函数中的父对象中删除该对象

# c# - 如何在 Gridview 中编辑项目

> ID：10484865
> 
> 赞同：0
> 
> 时间：2012-05-07T15:34:34.717
> 
> 标签：c#, asp.net, visual-studio-2008

我有一个gridview控件，我将DB中的一些数据绑定到它。我的问题是我在gridview中有一个价格fiekd，我将价格绑定到它，但我以这种格式获得价格（例如：10.0000）。绑定网格后如何将其设置为（10.00）。

网格视图是

```
 <asp:GridView ID="gvTest" Width="600px" runat="server" onrowdeleting="gvConfigItem_RowDeleting" onrowediting="gvConfigItem_RowEditing">
               <Columns>
                  <asp:BoundField HeaderStyle-CssClass="AdminGridHeaderNew" ItemStyle-Font-Size="12px"
                        DataField="Totalprice" HeaderText="Total Price" />
             </Columns>

            </asp:GridView> 
```

我的服务器端代码是

```
 gvTest.DataSource=ds;
            gvTest.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:37:51.510

根据 URL 为特定列设置 DataFormatString--> [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:38:00.877

您可以使用[DataFormatString](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)属性：

```
DataFormatString="{0:00.00}" 
```

或者

```
DataFormatString="{0:C}" 
```

# namespaces - 未捕获的 ReferenceError：在咖啡脚本中命名空间时未定义命名空间

> ID：10484872
> 
> 赞同：5
> 
> 时间：2012-05-07T15:35:13.157
> 
> 标签：namespaces, coffeescript

大家好：我正在尝试创建一个命名空间，这样我就可以在我的整个应用程序中使用不同的咖啡脚本文件中的类（至少这是我对你使用命名空间的理解）

我在这里找到了一个很好的例子：[Coffeescript 'Namespace' 中的类](https://stackoverflow.com/questions/8730859/classes-within-coffeescript-namespace)

摘抄：

```
 namespace "Project.Something", (exports) ->
      exports.MyFirstClass = MyFirstClass
      exports.MySecondClass = MySecondClass 
```

但是，当我实现它时，我得到：我的控制台中没有定义命名空间。

我的命名空间的实现与上面示例中的外观完全相同。似乎我的命名空间定义只是没有被咖啡脚本以某种方式识别。

有任何想法吗？这里可能有版本问题吗？

提前致谢！！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T17:18:22.077

该`namespace`问题的功能：

```
namespace = (target, name, block) ->
  [target, name, block] = [(if typeof exports isnt 'undefined' then exports else window), arguments...] if arguments.length < 3
  top    = target
  target = target[item] or= {} for item in name.split '.'
  block target, top 
```

不是 CoffeeScript 的一部分，您必须自己定义该助手。大概您不想在每个文件中重复它，因此您将拥有一个包含定义的`namespace.coffee`文件（或或...）。但是，您将面临将函数放入全局命名空间的问题。您可以[手动完成](https://stackoverflow.com/a/4215132/479863)：`util.coffee``namespace``namespace`

```
namespace = (target, name, block) ->
  [target, name, block] = [(if typeof exports isnt 'undefined' then exports else window), arguments...] if arguments.length < 3
  top    = target
  target = target[item] or= {} for item in name.split '.'
  block target, top

(exports ? @).namespace = namespace
# or just (exports ? @).namespace = (target, name, block) -> #... 
```

演示：http: [//jsfiddle.net/ambiguous/Uv646/](http://jsfiddle.net/ambiguous/Uv646/)

或者你可以变得时髦并使用`namespace`将自己放入全局范围：

```
namespace = (target, name, block) -> #...
namespace '', (exports, root) -> root.namespace = namespace 
```

演示：http: [//jsfiddle.net/ambiguous/3dkXa/](http://jsfiddle.net/ambiguous/3dkXa/)

一旦你完成了其中的一项，你的`namespace`功能应该随处可用。

# mysql - Mysql + 大表 = 慢查询？

> ID：10484874
> 
> 赞同：4
> 
> 时间：2012-05-07T15:35:39.593
> 
> 标签：mysql

Mysql 上的大表存在一些性能问题：该表有 3800 万行，其大小为 3GB。我想通过测试 2 列来选择：我尝试了许多索引（每列一个索引，一个 2 列索引）但我的查询仍然很慢：如下所示，获取 1644 行需要超过 4 秒：

```
SELECT `twstats_twwordstrend`.`id`, `twstats_twwordstrend`.`created`, `twstats_twwordstrend`.`freq`, `twstats_twwordstrend`.`word_id` FROM `twstats_twwordstrend` WHERE (`twstats_twwordstrend`.`word_id` = 1001 AND `twstats_twwordstrend`.`created` > '2011-11-07 14:01:34' );
...
...
...
1644 rows in set (4.66 sec)

EXPLAIN SELECT `twstats_twwordstrend`.`id`, `twstats_twwordstrend`.`created`, `twstats_twwordstrend`.`freq`, `twstats_twwordstrend`.`word_id` FROM `twstats_twwordstrend` WHERE (`twstats_twwordstrend`.`word_id` = 1001 AND `twstats_twwordstrend`.`created` > '2011-11-07 14:01:34' );
+----+-------------+----------------------+-------+-----------------------------------------------------+-----------------------+---------+------+------+-------------+
| id | select_type | table                | type  | possible_keys                                       | key                   | key_len | ref  | rows | Extra       |
+----+-------------+----------------------+-------+-----------------------------------------------------+-----------------------+---------+------+------+-------------+
|  1 | SIMPLE      | twstats_twwordstrend | range | twstats_twwordstrend_4b95d890,word_id_created_index | word_id_created_index | 12      | NULL | 1643 | Using where |
+----+-------------+----------------------+-------+-----------------------------------------------------+-----------------------+---------+------+------+-------------+
1 row in set (0.00 sec)

mysql> describe twstats_twwordstrend;
+---------+----------+------+-----+---------+----------------+
| Field   | Type     | Null | Key | Default | Extra          |
+---------+----------+------+-----+---------+----------------+
| id      | int(11)  | NO   | PRI | NULL    | auto_increment |
| created | datetime | NO   |     | NULL    |                |
| freq    | double   | NO   |     | NULL    |                |
| word_id | int(11)  | NO   | MUL | NULL    |                |
+---------+----------+------+-----+---------+----------------+
4 rows in set (0.00 sec)

mysql> show index from twstats_twwordstrend;
+----------------------+------------+-------------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table                | Non_unique | Key_name                      | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+----------------------+------------+-------------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| twstats_twwordstrend |          0 | PRIMARY                       |            1 | id          | A         |    38676897 |     NULL | NULL   |      | BTREE      |         |               |
| twstats_twwordstrend |          1 | twstats_twwordstrend_4b95d890 |            1 | word_id     | A         |      655540 |     NULL | NULL   |      | BTREE      |         |               |
| twstats_twwordstrend |          1 | word_id_created_index         |            1 | word_id     | A         |      257845 |     NULL | NULL   |      | BTREE      |         |               |
| twstats_twwordstrend |          1 | word_id_created_index         |            2 | created     | A         |    38676897 |     NULL | NULL   |      | BTREE      |         |               |
+----------------------+------------+-------------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
4 rows in set (0.03 sec) 
```

我还发现在表中只取一行很慢：

```
mysql> SELECT `twstats_twwordstrend`.`id`, `twstats_twwordstrend`.`created`, `twstats_twwordstrend`.`freq`, `twstats_twwordstrend`.`word_id` FROM `twstats_twwordstrend` limit 10000000,1;
+----------+---------------------+--------------------+---------+
| id       | created             | freq               | word_id |
+----------+---------------------+--------------------+---------+
| 10000001 | 2011-09-09 15:59:18 | 0.0013398539559188 |   41295 |
+----------+---------------------+--------------------+---------+
1 row in set (1.73 sec) 
```

...并且在表格的开头并不慢：

```
mysql> SELECT `twstats_twwordstrend`.`id`, `twstats_twwordstrend`.`created`, `twstats_twwordstrend`.`freq`, `twstats_twwordstrend`.`word_id` FROM `twstats_twwordstrend` limit 1,1;
+----+---------------------+---------------------+---------+
| id | created             | freq                | word_id |
+----+---------------------+---------------------+---------+
|  2 | 2011-06-16 10:59:06 | 0.00237777777777778 |       2 |
+----+---------------------+---------------------+---------+
1 row in set (0.00 sec) 
```

该表使用 Innodb 引擎。如何加快对大表的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T15:37:50.957

您可以做的主要事情是添加索引。

每当您在 where 子句中使用列时，请确保它具有索引。您创建的列上没有一个。

包括 created 列的多索引本质上不是 created 索引，因为 created 不是多索引中的第一个。

使用多索引时，您几乎应该总是将具有较高基数的列放在首位。`(created, word_id)`因此，将索引设置为:`(word_id)`会给您带来显着的提升。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:55:48.520

查询`LIMIT 10000000,1`总是很慢，因为它需要获取超过 1000 万行（它忽略除最后一行之外的所有行）。如果您的应用程序需要定期进行此类查询，请考虑重新设计。

表格没有“开始”和“结束”；它们本质上不是有序的。

在我看来，您需要在 ( `word_id`, `created`) 上建立索引。

您绝对应该在具有生产级硬件的非生产服务器上对此进行性能测试。

顺便说一句，现在 3Gb 数据库并不太大，它可以容纳除最小服务器之外的所有服务器上的 RAM（您正在运行 64 位操作系统，对，并且已经适当地调整了 innodb_buffer_pool？或者您的系统管理员做了？）。

# ruby - Ruby 中正则表达式的奇怪行为

> ID：10484877
> 
> 赞同：0
> 
> 时间：2012-05-07T15:35:50.480
> 
> 标签：ruby, regex

在我的一个项目中，应用程序必须检查给定页面中是否存在指向给定 URL 的链接。今天有用户报错。这是应用程序未检测到的链接：

```
 <a\nhref="http://hello.com"... 
```

我试图测试它为什么不起作用，这就是奇怪行为出现的地方。此正则表达式与链接匹配：

```
/\<a.*\nhref=\"http:\/\/hello.com/ 
```

但这不会：

```
/\<a.*href=\"http:\/\/hello.com/ 
```

我猜它与我正在使用的 Ruby 版本（1.9.3）有一些关系，因为 Rubular 匹配最后一个正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:41:40.427

## 为什么它坏了

在 Ruby 中（与大多数正则表达式实现一样）`.`匹配*除换行符以外的*任何字符，除非您打开“多行”模式：

```
irb(main):003:0> "foo\nbar"[/.+/]
#=> "foo"

irb(main):004:0> "foo\nbar"[/.+/m]
#=> "foo\nbar" 
```

正如[官方 Ruby 1.9 正则表达式文档](https://github.com/ruby/ruby/blob/trunk/doc/re.rdoc)所述：

> 以下元字符的行为也类似于字符类：
> `/./`- 除换行符以外的任何字符。
> `/./m`- 任何字符（m 修饰符启用多行模式）

当您的代码显式使用`\n`all 时效果很好，但是当您将其切换到 just 时，`.*`它无法匹配`\n`，因此无法继续匹配`href`。

## 更好地修复它

与其使用正则表达式来解析和使用 HTML，不如使用[真正的 HTML 解析器](http://nokogiri.org)：

```
require 'nokogiri' # gem install nokogiri
doc = Nokogiri.HTML( my_html_string )

# Find it using XPath...
first_hello_link = doc.at('//a[starts-with(@href,"http://hello.com")]')

# ...or using CSS
first_hello_link = doc.at('a[href^="http://hello.com"]') 
```

有了这个，您的代码可以通过以下方式稳健地处理 HTML：

*   等号之前或之后的空格
*   出现在 href 之前的附加属性
*   引用`"`或者`'`
*   混合大小写
*   看起来像链接但不是的东西（例如在评论或脚本块中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:43:24.793

ruby 中的正则表达式默认不匹配换行符，您必须添加`m`修饰符：

```
/pat/m - Treat a newline as a character matched by . 
```

看看选项部分：

[http://www.ruby-doc.org/core-1.9.3/Regexp.html](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

# assembly - x86 程序集：如何在字符串常量中使用分号？

> ID：10484880
> 
> 赞同：1
> 
> 时间：2012-05-07T15:35:52.163
> 
> 标签：assembly, x86, masm, masm32

我有一些 x86 汇编代码，在 MASM32 6.14.8444 下编译（准确地说），有一行代码给我带来了一些问题：

```
semicolon equ ";" 
```

如您所见，我只是试图分配文本“;” 到一个名为“分号”的变量，但我收到此错误：

```
error A2046: missing single or double quotation mark in string 
```

我猜这是因为程序集将分号作为注释的开头。在这种情况下，如何转义字符串常量中的分号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T15:44:40.140

这编译

```
semicolon equ 0x3b 
```

# kinect - 如何使用 Kinect 检测人脸识别？

> ID：10484887
> 
> 赞同：0
> 
> 时间：2012-05-07T15:36:10.987
> 
> 标签：kinect, pattern-recognition

我正在尝试开发一种可以使用 Kinect 检测人脸识别的软件。

直到现在，我才知道我可以使用 OpenCV 来完成这个功能。我只是希望相机可以保存面部并在以后识别他。

我刚刚使用 KinectSDK，所以我需要一些帮助或指导来实现该功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T16:03:06.700

我认为你可以通过使用深度流来做到这一点。每个像素都有自己的深度（与 KInec 的距离）。每张脸都有一个独特的图案。因此，您可以保存像素深度模式并进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T15:29:17.973

是的，可以通过将 NU-GET id is(Sacknet.KinectV2FacialRecognition.x64) 包调用到您的 c# 程序中来实现。我也在尝试使用这些库使用 kinect 进行面部识别，但我对此有点困惑。如何使用带有 Sacknet 库的 kinect SDK-2 库将我的代码按顺序放入程序中。或者 sacknet 具有完整的 SDK-2 的功能，以便我们可以根据需要处理框架和操作。如果有人对此有任何想法，请告诉我。[这是 Sacknet 包的链接](https://www.nuget.org/packages/Sacknet.KinectV2FacialRecognition.x64/)

# android - 自定义透明对话框（windowBackground 不存在？）

> ID：10484888
> 
> 赞同：3
> 
> 时间：2012-05-07T15:36:11.743
> 
> 标签：android, xml, dialog, transparent

我正在尝试创建一个具有半透明背景的自定义对话框。我设法让它通过代码工作：

```
getWindow().setBackgroundDrawableResource(R.color.bg_tran); 
```

其中 bg_tran == #A0000000。但是我宁愿在 XML 中使用它，因为我将它用于几个不同的自定义对话框类。仅使用 android:background 不起作用。将主题设置为 @android:style/Theme.Translucent 也不起作用。

我发现了几篇关于使用属性 android:windowBackground 的文章。但是 android:windowBackground 属性不存在。意思是 Eclipse 并没有显示它作为自动完成的选项。我检查了我的样式表和我的实际 layout.xml。由于我正在为 2.2 编译，我认为这个问题并将构建目标更改为 4.0.3。没有修复。我什至尝试过明确地使用它，但它不起作用。我搜索了 Android Dev 网站，甚至找不到描述此属性的页面。除了偶尔顺便提一下，什么都没有。还查找 setBackgroundDrawableResource 并没有告诉我等效的 XML 属性标记是什么。我非常困惑。我错过了什么？

堆栈溢出参考上面我曾经学过：
[Transparent Dialog Theme](https://stackoverflow.com/questions/6070505/android-how-to-create-a-transparent-dialog-themed-activity)
[Android Dialog Transparent](https://stackoverflow.com/questions/6059068/android-dialog-transparent)
[How to make a custom dialog transparent](https://stackoverflow.com/questions/5580531/how-to-make-a-custom-dialog-transparent)

**更新：**
如果不清楚，是的，我尝试在主题中进行设置。不工作。这是我定义的主题：

```
<style name="my_dialog_theme" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">@color/bg_tran</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:47:05.293

您需要为您的对话框定义一个自定义主题。

```
<style name="Theme.CustomDialog" parent="android:Theme.Dialog">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    ...
    ...
</style> 
```

## 更新：

`Dialog`你可以通过扩展类来实现你想要的对话。在这个派生类中设置可绘制的窗口背景。

```
public class CustomDialog extends Dialog 
{
    public CustomDialog (final Context context)
    {
        super(context);

        // This is the layout XML file that describes your Dialog layout
        this.setContentView(R.layout.myDialogLayout);  
        getWindow().setBackgroundDrawableResource(R.color.bg_tran);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T10:14:29.327

我遇到过同样的问题。android:windowBackground 属性只是没有出现。您必须输入完整的属性并自行更正，然后构建您的项目。瞧，它会编译没有任何错误，它会完美地工作。

# python - 当脚本放入exe时执行pp.Server（）时PyQt创建另一个主窗口

> ID：10484891
> 
> 赞同：0
> 
> 时间：2012-05-07T15:36:25.957
> 
> 标签：python, pyqt, parallel-processing, exe

我正在研究一些旨在作为独立应用程序分发的小python。我想使用并行 python，因为它可以帮助我更快地执行。在以下示例中，当我通过 pyinstaller 创建可执行文件时，当它调用`pp.Server()`它时会启动一个新窗口。当我关闭新窗口时，会引发管道错误。

这是发生此问题的脚本示例：

```
import pp, os, sys, multiprocessing
from bs4 import BeautifulSoup as Soup
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(188, 119)
        MainWindow.setWindowTitle(QtGui.QApplication.translate("MainWindow", "MainWindow", None, QtGui.QApplication.UnicodeUTF8))
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.horizontalLayout = QtGui.QHBoxLayout(self.centralwidget)
        self.horizontalLayout.setObjectName(_fromUtf8("horizontalLayout"))
        self.pushButton = QtGui.QPushButton(self.centralwidget)
        self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "PushButton", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.setObjectName(_fromUtf8("pushButton"))
        self.horizontalLayout.addWidget(self.pushButton)
        MainWindow.setCentralWidget(self.centralwidget)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        pass

class TestClass(object):
    __slots__ = ('var')
    def __init__(self): 
        self.var = 'a string'
    def doSomething (self, input_string) : 
        self.var = input_string

class PPTask (object) :
    def __init__ (self) :
        pass
    def ppTask(self, file = '') :
        html = open(file).read()
        soup = Soup(html)
        ret_results = []
        for i in xrange(10) : 
            tc = parallel_tests.TestClass()
            s = str(soup.title.string) # if it is not put in string it won't work in multithreading....
            #~ tc.doSomething(soup.title.string) # this doesn't works
            tc.doSomething(s) # this works if s is a string not a "soup string"
            ret_results.append(tc)
        return ret_results

class Window(QtGui.QMainWindow) : 
    def __init__ (self, parent = None) :
        QtGui.QMainWindow.__init__(self, parent)
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)
        self.createSignals()
    def createSignals(self): 
        QtCore.QObject.connect(self.ui.pushButton, QtCore.SIGNAL("clicked()"), self.doItBaby)
    def doItBaby (self) :
        print('it works until here ')
        try : 
            job_server = pp.Server() # this creates a new mainwindow ! 
        except Exception, e : 
            print("I supposed you've just closed the new window created haven't you? " + str(e))
        job_list = []
        results = []
        cmpt = 0
        for i in xrange(100) : 
            pt = PPTask()
            job_list.append(job_server.submit(pt.ppTask, ('anHTMfile.htm',),modules = ("parallel_tests","from bs4 import BeautifulSoup as Soup")))
        for job in job_list : 
            results.append(job())
        for result in results :
            for item in result :
                print 'cmpt = ' + str(cmpt)
                cmpt += 1
                print item.var

if __name__ == '__main__':
    multiprocessing.freeze_support()    
    current_dir = os.getcwd()
    app = QtGui.QApplication(sys.argv)
    ui = Window()
    ui.show()
    sys.exit(app.exec_()) 
```

我尝试添加 freeze_support() 但它并没有像我预期的那样有帮助。

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:30:29.840

我还没有尝试过，但这可能是因为如果您关闭新窗口，则不再有对您的对象的引用，并且它会被垃圾收集。
无论如何，在 gui 中发生的所有事情都不是很好的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T01:29:54.437

似乎并行 python 没有官方冻结支持。其他人似乎通过 py2exe 遇到了同样的问题：http:
[//www.parallelpython.com/component/option,com_smf/Itemid,1/topic,161.0/wap2,wap2](http://www.parallelpython.com/component/option,com_smf/Itemid,1/topic,161.0/wap2,wap2)

如果您只是使用该模块，则使用多处理冻结会起作用，但它对 PP 模块没有影响。

问题是它再次启动您的主应用程序而不是工作人员，因此您最终会看到您的应用程序的另一个实例。PP 使用 IPC 进行通信，因此当您杀死窗口时，您会杀死它的通信管道并且 PP 会抱怨。

# apache - 将所有文件列入黑名单，然后将公共文件列入白名单

> ID：10484894
> 
> 赞同：3
> 
> 时间：2012-05-07T15:36:38.397
> 
> 标签：apache, .htaccess

我知道如果我可以访问服务器配置，这可能会在一秒钟内解决，但不幸的是我没有，所以我必须只用 .htaccess 来解决这个问题。

我正在构建一个 MVC 风格的站点，这意味着我的 index.php 在根目录中，模型在模型目录中，视图在视图目录中，等等。问题是，我有一些应该公开的文件夹，像 css、javascript 和图像。由于我很健忘，我更喜欢将所有内容列入黑名单，然后只将我想公开的内容列入白名单（我宁愿在第一次尝试访问图像时出错，因为我忘记将其列入白名单，而不是忘记将我的配置列入黑名单-directory 并提供各种敏感的东西）。

我在根目录下的 .htaccess 文件目前看起来像这样：

```
<filesMatch "\..+$">
    deny from all
</FilesMatch>

<filesMatch "^index\.(htm|html|shtml|wml|pwml|php|php3|php4|php5)$">
    allow from all
</filesMatch>

<Files "tests.php">
    allow from 127.0.0.1
</files> 
```

我遇到的问题是我无法弄清楚如何允许访问子目录。位置和目录似乎是应该使用的，但由于某种原因，这些在 .htaccess 中是不允许的，只有服务器配置，而且由于我无权访问它，所以它变得有问题。有没有其他我没有想到的方法来解决这个问题？

# php - Facebook喜欢计数器显示网站喜欢不是文章级别的喜欢

> ID：10484899
> 
> 赞同：1
> 
> 时间：2012-05-07T15:37:23.777
> 
> 标签：php, javascript, facebook, zend-framework, twitter

我添加了 Facebook 点赞计数器以及其他标准社交媒体共享选项。它们都按预期工作，单个文章仅计算该文章的点赞数，主页显示该网站的总点赞数。

我们在列表页面上遇到了问题。列表页面由多个页面和一个介绍页面组成。列表的内部页面显示了该列表的正确点赞数/分享数，但介绍页面显示的是该站点的总点赞数，而不是该列表的总点赞数。

知道这里会发生什么吗？我认为这可能与 URL 结构有关，但没有明显的差异。这是他们的样子：

列表介绍： - www.mysite.com/categorytitle/thelisttitle/ 列表页面： - www.mysite.com/categorytitle/thelisttitle/listitem1

这是我用来嵌入所有内容的内容：

```
 <div id="social-share">
        <div class="share_contain">
            <div id="fb-root"></div>
            <script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
            </script>
            <fb:like href="http://mysite.com/<?= $this->uri ?>" send="false" width="50" layout="button_count" show_faces="false"></fb:like>         </div>
        <div class="share_contain">
            <a href="http://mysite.com/<?= $this->uri ?>" class="twitter-share-button" data-size="medium">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
        <div class="share_contain">
            <!-- Place this tag where you want the +1 button to render -->
            <div class="g-plusone" data-size="medium"></div>
            <!-- Place this render call where appropriate -->
            <script type="text/javascript">
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script>

        </div>
       </div> 
```

**更新**

如果有人在 Facebook、Google +1 或 Twitter 上遇到过类似问题，请确保您的锥形链接具有正确的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T08:23:35.540

你如何为每个项目放置点赞按钮？任何项目页面都有自己的like按钮吗？或者您是否在每个项目（和列表）的介绍页面中放置了几个类似按钮？无论如何，一个很好的检查工具是 facebook 调试工具（http://developers.facebook.com/tools/debug） ，如果我理解正确，可能是错误的项目 url 或错误的 og 元标记（特别是查看 og:url 元标记）。

# asp.net - 在不刷新整个页面的情况下刷新 Gridview (ASP.Net)

> ID：10484902
> 
> 赞同：1
> 
> 时间：2012-05-07T15:37:32.243
> 
> 标签：asp.net, gridview, partial-page-refresh

如何在**不刷新整个页面**的情况下刷新gridview ？

我有这个代码：

```
<asp:Timer ID="Timer1" runat="server" Interval="3600000">
</asp:Timer>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
    </Triggers>
    <ContentTemplate>
        <asp:Panel ID="Panel1" runat="server" Height="250px"  Width="250px">
            <asp:GridView ID="Gridview1" runat="server" ></asp:GridView>
        </asp:Panel>
    </ContentTemplate>
</asp:UpdatePanel> 
```

的`Gridview1`数据源应从代码隐藏（基于实时）填充，例如：

```
 Dim DT As New System.Data.DataTable
    Dim reader As SqlCeDataReader
    Using myCEConnection As New SqlCeConnection(myCEConnectionString)
        myCEConnection.Open()
        Using myCommand As SqlCeCommand = myCEConnection.CreateCommand()
            myCommand.CommandText = "SELECT ScheduleID FROM Schedule " & _
                                    "WHERE (Hour = '"& Hour(Now) &"')"
            reader = myCommand.ExecuteReader()

            DT.Load(reader)
        End Using
        myCEConnection.Close()
    End Using

    Gridview1.DataSource = DT.DefaultView
    Gridview1.DataBind() 
```

`Gridview1`应该每 1 小时刷新一次。我尝试了代码，但一无所获。我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:09:49.800

您是否在 Timer's Tick Event 上编写了此代码？

理想情况下，它应该在 Timer's Tick 事件中。您的计时器没有任何关联的 TICK 事件。它应该使用 ontick 事件进行更新（示例如下）：

```
<asp:Timer ID="timer" runat="server" ontick="timer_Tick"></asp:Timer> 
```

# objective-c - Objective-C 指针类型的隐式转换。桥接演员表问题

> ID：10484906
> 
> 赞同：8
> 
> 时间：2012-05-07T15:37:44.167
> 
> 标签：objective-c, ios, pointers, types

我收到以下错误：

```
"Implicit conversion of Objective-C pointer type. Type "void*" requires a bridged cast. 
```

我已经用网桥修复了类似的代码位 - 但这些类型的修复在这里没有帮助。这是代码位：

```
AURenderCallbackStruct input;
input.inputProc = RenderTone;
input.inputProcRefCon = self;
err = AudioUnitSetProperty(
    toneUnit, 
    kAudioUnitProperty_SetRenderCallback, 
    kAudioUnitScope_Input,
    0, 
    &input, 
    sizeof(input));
NSAssert1(err == noErr, @"Error setting callback: %ld", err); 
```

**有错误的第二个代码位**

```
SStatus result = AudioSessionInitialize(NULL, NULL, ToneInterruptionListener, self);
if (result == kAudioSessionNoError) {
    UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
    AudioSessionSetProperty(
        kAudioSessionProperty_AudioCategory,
        sizeof(sessionCategory),
        &sessionCategory);
} 
```

谢谢，提前提供所有帮助。

**更新**

问题解决了。桥梁铸造实施不正确。它应该是：

```
 input. inputProcRefCon =  (__bridge void*)self 
```

# jquery - AJAX Call 每次被调用时都会增加 +1

> ID：10484907
> 
> 赞同：2
> 
> 时间：2012-05-07T15:37:46.563
> 
> 标签：jquery, ajax, vb.net

我有一段 JQuery AJAX 调用返回字符串数据的 VB.NET 代码隐藏（类）。它获取特定服务器上的一些最新统计信息。现在代码可以工作了，但是我第一次按下刷新按钮时会返回数据，并且屏幕上会显示警报“已刷新”。

但是如果我再按一下，提示框“刷新”显示两次，我再点击三下！一直如此，直到超时开始。

它似乎来自 AJAX 调用，没有其他地方。我对这可能是什么感到茫然，我尝试删除成功后返回的数据，但没有任何乐趣。关于可能导致此问题或在哪里查看的任何想法？

```
function RefreshServer(btn,div,id,ip) {

$('#aRefresh'+id).html("<img src=images/refreshServer.gif border=0 align=absmiddle />");
$("#"+btn).click(function() {
$.ajax({
  type: "POST",
  url: "Dashboard.aspx/refreshServerAJAX",
  timeout: 5000,
  data: "{'IP': '" + ip + "'}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    var substr = msg.d.split('%');
    $('#serverBox_mod'+id).html(" " +substr[0]);
    $('#serverBox_map'+id).html(" " +substr[1]);
    $('#serverBox_playing'+id).html(" " +substr[2] + "/" + substr[3]);
    $('#serverBox_img'+id).html("<img src=images/Maps/" + substr[4] + " height=80 width=120 border=0 style=margin-top:10px;margin-bottom:10px; />");
    $('#serverBox_title'+id).html(" " +substr[5]);
    $('#aRefresh'+id).html("Refresh");
    delete substr
    delete msg
    alert("Refreshed");  
  },
  error: function(msg) {
    $('#aRefresh'+id).html("Refresh");
    $('#serverBox_title'+id).html("Server didn't respond!, sorry about that. Please try again...");
  }
});
});  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:53:53.507

我猜您每次调用该函数时都在绑定单击事件。因此，它对服务器页面进行了如此多的 ajax 调用。所以如果你想保持代码结构不变并修复它，我会取消绑定已经添加的点击事件并再次绑定它。

```
function RefreshServer(btn,div,id,ip) {

  $("#"+btn).unbind('click');
  $("#"+btn).click(function() {
     //your ajax code is here
  });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:43:24.580

该错误似乎不在这个特定的代码区域中......但是看着它，您似乎正在为函数内部设置`click`处理程序。通常在单击时可能导致多个 AJAX 调用的原因是最简单的：您在同一个事件上附加了多个事件处理程序。`$('#' + btn)``RefreshServer()`

现在，如果您`RefreshServer()`在同一个`btn`实例上多次调用该函数，则可能会发生这种情况，因为该函数分配了处理程序。您的代码中是否有可能发生这种情况？我假设以某种方式，在每次单击时，您都会以某种方式调用它，因此将事件处理程序的另一个实例附加到按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:50:53.070

使用它来调用 ajax 函数一次：

```
var ajaxLoading = false;
$(document).ready(function() {
    $('#ajaxRequestor').click(function(e) {
        e.preventDefault();
        if(!ajaxLoading) {
            ajaxLoading = true;
            $('#ajaxContentPlaceholder').load('/path/to/content.html', 
                function() { 
                    ajaxLoading = false;
                }
            );
        }
    });
}); 
```

# c - 查找和控制以太网看门狗定时器

> ID：10484915
> 
> 赞同：0
> 
> 时间：2012-05-07T15:37:57.077
> 
> 标签：c, linux, deadlock, ethernet, watchdog

我有一个带有 Broadcom 以太网端口的 debian linux 机器（Debian Squeeze），如果我`ethtool`在嗅探接口之前运行修改 NIC 缓冲区，每隔几个小时就会死锁一次。

据我所知，内核看门狗定时器正在跳闸......

```
NETDEV WATCHDOG: eth3 (bnx2): transmit queue 0 timed out 
```

我认为有一种方法可以通过系统`ioctl`调用来控制看门狗定时器（参考：[EmbeddedFreak：如何使用 linux watchdog](http://embeddedfreak.wordpress.com/2010/08/23/howto-use-linux-watchdog/)）。

## 问题

如何找到控制 eth3*的*看门狗定时器？如果您能告诉我如何更改计时器甚至禁用看门狗，则可以加分...

* * *

## 堆栈跟踪

```
Apr 30 08:38:44 Hotcoffee kernel: [275460.837147] ------------[ cut here ]------------
Apr 30 08:38:44 Hotcoffee kernel: [275460.837166] WARNING: at /build/buildd-linux-2.6_2.6.32-41squeeze2-amd64-NDo8b7/linux-2.6-2.6.32/debian/build/source_amd64_none/net/sched/sch_generic.c:261 dev_watchdog+0xe2/0x194()
Apr 30 08:38:44 Hotcoffee kernel: [275460.837169] Hardware name: PowerEdge R710
Apr 30 08:38:44 Hotcoffee kernel: [275460.837171] NETDEV WATCHDOG: eth3 (bnx2): transmit queue 0 timed out
Apr 30 08:38:44 Hotcoffee kernel: [275460.837172] Modules linked in: 8021q garp stp parport_pc ppdev lp parport pci_stub vboxpci vboxnetadp vboxnetflt vboxdrv ext2 loop psmouse power_meter button dcdbas evdev pcspkr processor serio_raw ext4 mbcache jbd2 crc16 sg sr_mod cdrom ses ata_generic sd_mod usbhid hid crc_t10dif enclosure uhci_hcd ehci_hcd megaraid_sas ata_piix thermal libata usbcore nls_base scsi_mod bnx2 thermal_sys [last unloaded: scsi_wait_scan]
Apr 30 08:38:44 Hotcoffee kernel: [275460.837202] Pid: 0, comm: swapper Not tainted 2.6.32-5-amd64 #1
Apr 30 08:38:44 Hotcoffee kernel: [275460.837204] Call Trace:
Apr 30 08:38:44 Hotcoffee kernel: [275460.837206]  <IRQ>  [<ffffffff81263086>] ? dev_watchdog+0xe2/0x194
Apr 30 08:38:44 Hotcoffee kernel: [275460.837211]  [<ffffffff81263086>] ? dev_watchdog+0xe2/0x194
Apr 30 08:38:44 Hotcoffee kernel: [275460.837217]  [<ffffffff8104df9c>] ? warn_slowpath_common+0x77/0xa3
Apr 30 08:38:44 Hotcoffee kernel: [275460.837220]  [<ffffffff81262fa4>] ? dev_watchdog+0x0/0x194
Apr 30 08:38:44 Hotcoffee kernel: [275460.837223]  [<ffffffff8104e024>] ? warn_slowpath_fmt+0x51/0x59
Apr 30 08:38:44 Hotcoffee kernel: [275460.837228]  [<ffffffff8104a4ba>] ? try_to_wake_up+0x289/0x29b
Apr 30 08:38:44 Hotcoffee kernel: [275460.837231]  [<ffffffff81262f78>] ? netif_tx_lock+0x3d/0x69
Apr 30 08:38:44 Hotcoffee kernel: [275460.837237]  [<ffffffff8124dda3>] ? netdev_drivername+0x3b/0x40
Apr 30 08:38:44 Hotcoffee kernel: [275460.837240]  [<ffffffff81263086>] ? dev_watchdog+0xe2/0x194
Apr 30 08:38:44 Hotcoffee kernel: [275460.837242]  [<ffffffff8103fa2a>] ? __wake_up+0x30/0x44
Apr 30 08:38:44 Hotcoffee kernel: [275460.837249]  [<ffffffff8105a71b>] ? run_timer_softirq+0x1c9/0x268
Apr 30 08:38:44 Hotcoffee kernel: [275460.837252]  [<ffffffff81053dc7>] ? __do_softirq+0xdd/0x1a6
Apr 30 08:38:44 Hotcoffee kernel: [275460.837257]  [<ffffffff8102462a>] ? lapic_next_event+0x18/0x1d
Apr 30 08:38:44 Hotcoffee kernel: [275460.837262]  [<ffffffff81011cac>] ? call_softirq+0x1c/0x30
Apr 30 08:38:44 Hotcoffee kernel: [275460.837265]  [<ffffffff8101322b>] ? do_softirq+0x3f/0x7c
Apr 30 08:38:44 Hotcoffee kernel: [275460.837267]  [<ffffffff81053c37>] ? irq_exit+0x36/0x76
Apr 30 08:38:44 Hotcoffee kernel: [275460.837270]  [<ffffffff810250f8>] ? smp_apic_timer_interrupt+0x87/0x95
Apr 30 08:38:44 Hotcoffee kernel: [275460.837273]  [<ffffffff81011673>] ? apic_timer_interrupt+0x13/0x20
Apr 30 08:38:44 Hotcoffee kernel: [275460.837274]  <EOI>  [<ffffffffa01bc509>] ? acpi_idle_enter_bm+0x27d/0x2af [processor]
Apr 30 08:38:44 Hotcoffee kernel: [275460.837283]  [<ffffffffa01bc502>] ? acpi_idle_enter_bm+0x276/0x2af [processor]
Apr 30 08:38:44 Hotcoffee kernel: [275460.837289]  [<ffffffff8123a0ba>] ? cpuidle_idle_call+0x94/0xee
Apr 30 08:38:44 Hotcoffee kernel: [275460.837293]  [<ffffffff8100fe97>] ? cpu_idle+0xa2/0xda
Apr 30 08:38:44 Hotcoffee kernel: [275460.837297]  [<ffffffff8151c140>] ? early_idt_handler+0x0/0x71
Apr 30 08:38:44 Hotcoffee kernel: [275460.837301]  [<ffffffff8151ccdd>] ? start_kernel+0x3dc/0x3e8
Apr 30 08:38:44 Hotcoffee kernel: [275460.837304]  [<ffffffff8151c3b7>] ? x86_64_start_kernel+0xf9/0x106
Apr 30 08:38:44 Hotcoffee kernel: [275460.837306] ---[ end trace 92c65e52c9e327ec ]--- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:03:59.447

The link you provided discusses a *system* watchdog device, which can be used to force-reboot a computer if the system stops responding. This has nothing at all to do with the watchdog timers in network interface drivers or other parts of the kernel. Access to these is typically not available in user space; you'd have to go digging deep into the appropriate NIC driver to see what's going on.

# ruby - Rake 无法识别 .ssh/config 文件

> ID：10484916
> 
> 赞同：0
> 
> 时间：2012-05-07T15:37:57.943
> 
> 标签：ruby, rake

大家好，我一直在寻找解决方案，虽然它可能很明显，但它正在逃避我。

我正在尝试使用 rake 通过系统命令在 ssh 上运行一些任务，但它无法识别我的 .ssh/config 文件。

例如：

```
task :my_task
  system("ssh myserver 'command on myserver'")
end 
```

这给了我错误：

```
ssh: Could not resolve hostname myserver: Name or service not known 
```

当我从 rake 之外的命令行运行命令时，它运行良好。

在 irb 中测试时它也有效：

```
system "ssh myserver 'command on myserver'" 
```

关于 rake 缺少什么（可能是完全显而易见的事情）的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:54:32.063

`ssh`真的很讨厌，会忽略它认为“不够安全”的东西，所以你可能有一个有效的文件但权限无效。

快速修复通常是：

```
chmod go-rwx ~/.ssh/* 
```

# javascript - Javascript - slidesjs 不能在 android 上运行（其他都可以）

> ID：10484920
> 
> 赞同：1
> 
> 时间：2012-05-07T15:38:08.713
> 
> 标签：javascript, android, jquery, slidesjs

我正在将[SlidesJS](http://slidesjs.com)用于一个简单的滑块...

它适用于大多数浏览器（包括 iOS），但不知何故它在 Android 上失败了：滑动确实有效，但它不显示图像。

WIP 网站在[这里](http://www.summerconf.com/aurora/)。

我将不胜感激任何输入和评论，因为我完全没有移动操作系统的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:28:42.877

行 。经过很长时间的调试 - 问题是由谷歌地图嵌入代码引起的。特别是（否则非常出色）Google Maps v3 Shortcode 插件。

该插件注入了一个CSS（为什么？？？）

```
.entry-content img {max-width: 100000%;  /* override */ } 
```

在`function gmaps_header()`

内部文件`google-maps-v3-shortcode/Google-Maps-v3-Shortcode.php`

将其注释掉将解决 android 的问题，如下所示：

```
/*.entry-content img {max-width: 100000%;   override  }*/ 
```

我真的不知道为什么要这样做，而且我没有检查所有 otehr browsers / versions 。我确实在 winxp 上检查了 chrome、opera 和 firefox - 它工作正常。另一种方法是将此 css 放在适用于 andriod 的条件浏览器检测类中。

# google-maps - 谷歌地图：获取街区的坐标

> ID：10484924
> 
> 赞同：2
> 
> 时间：2012-05-07T15:38:23.553
> 
> 标签：google-maps

我正在使用 Google Maps API，我希望能够在一条街道上从一个街区到下一个街区画一条线。

例如，我希望能够从 Main Street 的 1000 街区到 Main Street 的 1100 街区画一条线。

当我进入 1100 Main Street 时，我会得到位于 1100 N Main Street 的建筑物的地址。我想获得位于 1100 N Main street 的十字路口中心的坐标（或者如果那里没有十字路口，则位于 1100 N Main St 的街道中心）。

基本上我想强制 API 返回一个 RANGE_INTERPOLATED 结果而不是 ROOFTOP 结果。是否有一些参数可以传递给谷歌地图来完成这个？

# javascript - 甚至连基本的道场工作都没有运气

> ID：10484926
> 
> 赞同：0
> 
> 时间：2012-05-07T15:38:28.957
> 
> 标签：javascript, dojo

我正在尝试开发一些拖放功能。首先，我只是想拖动东西。我正在读一本书“Dojo 入门，Kyle Hayes”，但没有运气。

我的一些问题：

1.  当我连接到最新的 dojo 和 Google 的库时，什么都没有。
2.  每当我`djConfig="parseOnLoad`在初始脚本中包含从 Google 调用旧库时，都没有任何效果。如果我取出`djConfig="parseOnLoad`，则页面开始工作。
3.  如果我包含`dojo.require("dojo.dnd.Target")`，我将失去所有功能。
4.  而且无论我做什么，我都无法拖动一个简单的 div。

我在下面包含了我的代码，并且真诚地感谢任何人在开始时可以给我的任何帮助。

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojo/dojo.xd.js"                                                                  djConfig="parseOnLoad: true"></script>

<script type="text/javascript">
        //dojo.require("dojo.parser");
        dojo.require("dojo.dnd.move"); 
        dojo.require("dojo.dnd.Source");
        //dojo.require("dojo.dnd.Target");
        dojo.require("dijit.form.Button");
        dojo.require("dijit.form.TextBox");
        document.write("I got this far");

    var init = function()
    {
        dojo.connect(
        dojo.byId('btnSayHello'),
        "onclick",
        this,
        helloButton_onClick
        );
    }

    var helloButton_onClick = function(event)
    {
        alert ('Hello World and hello ' + dojo.byId('txtName').value + '!');
    }

    dojo.addOnLoad(init);
</script>
</head>
<body>
<div id="dragMe" dojoType="dojo.dnd.move" style="border: 1 solid black; height: 300; width: 300;">
Source 1
</div>
<div id=Div1 dojoType="dojo.dnd.Target" style="border: 1 solid black; height: 300; width: 300;">
   Target
</div>
<div>
    <h1>Hello World Example</h1>
    <hr/>
    <label for="txtName">Your name:</label>
    <input id="txtName" type="text" dojoType="dijit.form.TextBox"/><br/>
    <button id="btnSayHello" dojoType="dijit.form.Button">Say Hello</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:15:02.263

我刚刚从`dojoType="dojo.dnd.move"`to改变了`dojoType="dojo.dnd.Moveable"`，我可以拖动它。希望能帮助到你。

# html - div 和溢出

> ID：10484928
> 
> 赞同：-2
> 
> 时间：2012-05-07T15:38:36.533
> 
> 标签：html, css

我有以下 div 模式：

```
<div id="red">
   <div id="green">
       <div id="blue"></div>
       <div id="blue"></div>
   </div>
 </div> 
```

> *红色：集中整个页面，位置：绝对
> 
> *绿色：子面板位置：绝对
> 
> *蓝色：子面板位置：绝对！

为什么蓝色面板溢出然后绿色面板？我不想在蓝色面板中使用高度？

![在此处输入图像描述](../Images/e9c088d3714515a7c6a5b4bb30a59ceb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:46:15.507

元素`position: absolute`被从布局流中取出，因此它们不会影响其他元素的位置。所以，如果你有一个容器，里面有一个 div ，而内部 div 有`position: absolute`，它的高度不会被通知给父级，并且容器将作为空容器，除非你明确地给它高度。

附注：ID 必须是唯一的，不能有两个具有相同 ID 的元素，就像使用`blue`. 改用类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:45:17.893

您可以设置高度和溢出：以绿色隐藏，这应该隐藏任何孩子，包括蓝色。但是，蓝色有`position:absolute`属性允许他们溢出他们的父母。`position:relative`如果要隐藏在其中，则需要更改为绝对位置或绝对位置以外的其他位置。

# linux - 创建针对不同 Linux 发行版的 Qt 应用程序

> ID：10484929
> 
> 赞同：1
> 
> 时间：2012-05-07T15:38:38.840
> 
> 标签：linux, qt

我的任务是让我们的 Qt 应用程序（目前在 Windows 和 Mac 上运行）在 Centos 5 和 6 上运行。这样做的最佳方法是什么？我一直试图让它建立在 Centos 5 上，但 Qt 不是最新的。所以我想使用 Centos 6，但是我可以使用 Qt v4.8 及其版本的 Qt Creator 构建一个可以在 5 和 6 上运行的单个二进制文件吗？当然，如果这个相同的二进制文件也可以在其他发行版（如 Ubuntu）上运行，那将是理想的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:52:54.123

我遇到了同样的问题，以下是我的想法：

*   静态链接到 Qt 库。首先，只有当您的应用程序是开源的或者您拥有 Qt 的商业许可证时才可行 - 否则您将遇到 LGPL 链接异常。为了有静态库链接，您必须自己构建 Qt 并将其配置为生成静态库。当然，您在最低分母（即 CentOS 5）上构建 Qt 并祈祷它可以在 CentOS 6 上运行（它会）。
*   根据您提供的 Qt 库动态链接。您必须确保应用程序采用您提供的库，所以不要忘记将应用程序的库搜索路径设置为从您的库所在的目录开始。同样，您必须构建 Qt 库您自己（在 CentOS 5 上）并将它们与您的应用程序一起分发。

# jquery - 使用 jQuery 水平滚动背景图像

> ID：10484932
> 
> 赞同：2
> 
> 时间：2012-05-07T15:38:48.317
> 
> 标签：jquery, html, css

这是我对 jQuery 的尝试：

```
$(document).ready(function(){
$('#bg').animate({ backgroundPosition: '320px 0px'}, 10000, 'linear');
}); 
```

这是 bg 的 CSS：

```
#bg {
    background: url('scribbles.png') repeat-x 320px 0px;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
} 
```

这是HTML：

```
<div id="bg"></div> 
```

我希望背景图像在屏幕上缓慢移动。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:08:15.377

图像是否会永远滚动？如果没有，以下可能是一个很好的起点：

`$('#bg').animate({ backgroundPosition: '+=100% 0px'}, 10000, 'linear');`

如果要永远重复，请考虑以下带有递归回调的解决方案：

```
var animateBackground = function()
{
    $('#bg').animate
    (
        { 
            backgroundPosition: '-=100px 0px'
        }, 
        10000,
        'linear',
        function()
        {
            animateBackground(); // recursive call back
        }
    )
};

$( // short-hand for "$(document).ready"
    function()
    {
        animateBackground(); // initial call that starts everything off
    }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:57:53.480

css 和 jquery 案例的背景位置相同。他们应该是不同的。除非它为什么会移动？在 css 中设置前一个位置并在代码的 jquery 部分中给出最终位置。它会工作的！

# css - 导航栏垫片未正确定位

> ID：10484942
> 
> 赞同：0
> 
> 时间：2012-05-07T15:39:17.350
> 
> 标签：css

我在导航菜单上获取正确间距时遇到问题。我为顶部和底部菜单创建了一个图像分隔符。问题是我无法让链接在页面上垂直居中。

目前在#footer li 下我有一个上边距：-16px; . 这是唯一将垫片固定在我想要的位置的东西。如果它被移除，链接会转到正确的位置，但垫片会落在页脚下方。关于我可以做些什么来使链接在页脚上垂直居中以及将垫片保持在当前位置的任何想法。

这是该网站的链接：[http ://www.opelikaschools.org/sandbox/jupgrade/](http://www.opelikaschools.org/sandbox/jupgrade/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:51:14.343

为 CSS 规则“#footer li”添加 padding-top 属性

# jetty - 重新安装JDK后找不到有效的证书路径

> ID：10484943
> 
> 赞同：0
> 
> 时间：2012-05-07T15:39:27.913
> 
> 标签：jetty, java, keystore

使用启动它的 ant 脚本运行码头服务器。

重新安装 JDK 后，我不断收到此异常：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX
path building failed: sun.security.provider.certpath.SunCertPathBuilderException: 
unable to find valid certification path to requested target. 
```

1.  重新安装了JAVA jdk1.6.0_26。
2.  将 JAVA 主页设置为 ...\Java\jdk1.6.0_26。
3.  将证书插入到 ..\Java\jdk1.6.0_26\jre\lib\security 的密钥库中

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:07:05.077

使用 JDK 1.6 重新编译所有类。

# java - 调整 JFrame 大小时在 JFrame 上调整图像和 JPanel 的大小

> ID：10484946
> 
> 赞同：2
> 
> 时间：2012-05-07T15:39:32.140
> 
> 标签：java, image, swing, jframe, jpanel

我制作了一个包含三个 jpanel 的 jframe，这三个面板将 jframe 分成三个相等的部分。每个面板都包含一个图像。我想在框架从更高尺寸调整到更低尺寸时调整图像和面板的大小。有人能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:58:44.610

将图像设置为：

1.  [图标 / ImageIcon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)到[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)
2.  您可以将[paintComponent 用于JComponent 或JPanel](http://docs.oracle.com/javase/tutorial/2d/images/index.html)，`getWidth`而`getHeight`不是固定大小（以像素为单位）
3.  而不是考虑调整大小，使用适当`LayoutManager`的放置`JPanels`或`JLabels`与图像一起使用`JFrame`，例如`GridLayout`可能是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T15:51:13.583

几年前我解决了这个问题。只是在寻找代码，但我找不到它。

本质上，答案是您使用 ComponentListener 来查看您的 Frame（或者可能更好，在每个面板上放置一个）何时更改了大小。然后您可以适当地调整图像大小。我用 BufferedImages 做到了这一点。使用常规图像，您需要创建一个新图像并在新图像上绘制旧图像，但已缩放。（使用 image.getGraphics 和[`Graphics.drawImage`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20int,%20int,%20java.awt.Color,%20java.awt.image.ImageObserver%29)）

# javascript - 如何确保我的点击功能只使用 Jquery 执行一次？

> ID：10484947
> 
> 赞同：0
> 
> 时间：2012-05-07T15:39:38.440
> 
> 标签：javascript, jquery

我有每次单击按钮时都会运行的 jquery 代码，但我只希望它在 click 函数中执行一次操作。因为否则我的 jquery 代码将在我的 tbody td 中重复值。

这是我的jQuery代码：

```
 $(function () {
        $('#next-step').click(function () {
            $('#S').append($('#SubjectTypeName option:selected').text());
            $('#T').append($('#TeamName option:selected').text());
            $('#C').append($('#ConsultantName option:selected').text());
            $('#K').append($('#company option:selected').text());
            $('#KP').append($('#ContactPerson').val());
            $('#P').append($('#date').val());
        });

    }); 
```

这是jsfiddle：http: [//jsfiddle.net/82U2W/](http://jsfiddle.net/82U2W/)

任何帮助表示赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:42:22.247

我不确定我是否理解正确，`.one`如果您只想执行一次处理程序，请尝试

```
$(function() {
    $('#next-step').one('click', function() {
        $('#S').append($('#1 option:selected').text());
        $('#C').append($('#2').val());
        $('#T').append($('#3').val());
    });
}); 
```

[**演示**](http://jsfiddle.net/82U2W/1/)

或者，也许您希望将值复制而不是附加，然后尝试如下所示，

```
$(function() {
    var copiedText = 'Copied Value: ';
    $('#next-step').on('click', function() {
        $('#S').text(copiedText + $('#1 option:selected').text());
        $('#C').text(copiedText +$('#2').val());
        $('#T').text(copiedText +$('#3').val());
    });
}); 
```

[**演示**](http://jsfiddle.net/82U2W/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:43:07.233

我想说最简单的方法是使用[jQuery.one](http://api.jquery.com/one/)：

```
 $(function () {
        $('#next-step').one('click', function () {
            $('#S').append($('#SubjectTypeName option:selected').text());
            $('#T').append($('#TeamName option:selected').text());
            $('#C').append($('#ConsultantName option:selected').text());
            $('#K').append($('#company option:selected').text());
            $('#KP').append($('#ContactPerson').val());
            $('#P').append($('#date').val());
        });

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T15:45:44.167

使用在单击时控制按钮的变量。

```
$(function () {
    $('#next-step').click(function () {
        if(cmdCtrl){
           $('#S').append($('#SubjectTypeName option:selected').text());
           $('#T').append($('#TeamName option:selected').text());
           $('#C').append($('#ConsultantName option:selected').text());
           $('#K').append($('#company option:selected').text());
           $('#KP').append($('#ContactPerson').val());
           $('#P').append($('#date').val());
        cmdCtrl=false;
        }
    });

}); 
```

# jquery - AJAX 加载带有图像的 XML

> ID：10484950
> 
> 赞同：0
> 
> 时间：2012-05-07T15:39:47.350
> 
> 标签：jquery, xml, ajax

我是 AJAX 世界的新手，所以请原谅我的 n00bishness。我有一个如下所示的 XML 文档：

```
<juices>
<smoothie id="SY4301">
    <name>Strawberry Yumghurt</name>
    <price currency="GBP">
        <perunit type="wholesale">1.23</perunit>
        <perunit type="RRP">1.89</perunit>
        <percrate>28.50</percrate>
    </price>
    <description>Velvety yoghurt smoothie made with fresh strawberry and rasperries.</description>
    <ingredients>
        <ingredient image="/images/strawberry.jpg" quantity="9">Strawberries</ingredient>
        <ingredient image="/images/Raspberry.jpg" quantity="4">Raspberries</ingredient>
        <ingredient image="/images/yoghurt.jpg"quantity="200ml">Greek Yoghurt</ingredient>
        <ingredient image="/images/honey.jpg" quantity="30ml">Runny Honey</ingredient>
        <ingredient image="/images/milk.jpg"quantity="40ml">Semi-skimmed Milk</ingredient>
    </ingredients>
    <nutrition per="100ml">
        <kcal unit="cal">140</kcal>
        <kjoules unit="KJ">442</kjoules>
        <carbohydrate unit="g">27.9</carbohydrate>
        <protein unit="g">1.4</protein>
        <fat unit="g">8.4</fat>
        <fibre unit="g">2.8</fibre>
    </nutrition>
    <imageloc>http://www5.bbk.ac.uk/~akaufm01/jvfma/Images/Products/morning_kick.jpg</imageloc>
</smoothie>
</juices> 
```

我有一个 XSL 文档，它正在加载除页面加载成分之外的所有内容，但我想要实现的是在单击（链接或按钮，我不介意哪个）时，替换其中一个 div 的内容（#description ) 连同其图像的成分列表，其位置存储在图像属性中。

我看过一些建议使用 jQuery 来实现这一点的教程，但我没有太多运气让它工作。我知道我也可以在 JS 中使用 XMLHttpRequest 函数，但不确定哪种方法更好。

任何建议将不胜感激！

谢谢，安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:11:26.167

首先你需要了解你在用 ajax 做什么，因为有不同的方法可以用 jquery 调用 ajax，让我们使用基本属性

```
//Handle the ajax in the event click of your button with ID MyButton
$('#MyButton').click(function(){
    $.ajax({
       type: "Type of your http Request could be GEt or Post",
       url: " the url where you obtain that xml",
       data: "ïf you need to pass some data to the url"
       dataType: "in your case should be XML which is the data type that you're going to handle in the success function",
       success: function(data){ 
            //parse your xml which it contains in the var data
            //You could set the data parse in your div with a append or html method
       }'define a function or put a function already defined',
       error: 'define a function in case of error'
    });
}); 
```

[这是关于 jquery 中的 ajax 的文档](http://api.jquery.com/jQuery.ajax/)

[Here's你可以找到关于该方法的文档](http://api.jquery.com/append/)

[以及如何使用 jquery 解析 xml](http://api.jquery.com/jQuery.parseXML/)

# javascript - 获取字符串、提取 id 和换行

> ID：10484952
> 
> 赞同：1
> 
> 时间：2012-05-07T15:39:56.403
> 
> 标签：javascript, jquery, replace

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:55:06.757

```
$('p').html(function (_, str) {
  return str.replace(/video\?v=([^\s<]+)/g, function ($0, $1) {
    return ['<span id="', $1.substr(0, 8), '">', $0, '</span>'].join('');
  });
});​ 
```

[http://jsfiddle.net/HcAyd/1/](http://jsfiddle.net/HcAyd/1/)

# ruby - Persistent authentication with Google API in Ruby

> ID：10484953
> 
> 赞同：1
> 
> 时间：2012-05-07T15:39:56.727
> 
> 标签：ruby, oauth, google-calendar-api

I try to code a cronjob which syncronizes some duedates to Google Calendar. My problem at the moment is, that the authentification with Google isn't persistent. After an hour I have to reauthenticate the application. I use this method to autheticate my application: [https://developers.google.com/google-apps/calendar/instantiate](https://developers.google.com/google-apps/calendar/instantiate) This means I generate the .yaml-File manually. In order to keep the program working I would have to do that very hour. Thats not very practicable for an cronjob.

So, what I'm looking for is a method to authenticate my application once. After that it should last forever or at least for 30 days or something. The best solution would be if the user just has to add his login data as attributes to the call. Like this:

```
ruby google.rb Username SHA1-Password 
```

What's the best way to do something like this?

Best regards, Juuro

# c++ - C++ Instantiate class from static function

> ID：10484956
> 
> 赞同：-2
> 
> 时间：2012-05-07T15:39:57.710
> 
> 标签：c++, static, instantiation, delete-operator

I'm trying to instantiate an object from a static member function. I've defined:

```
class A
{
public:
    A( );
    A(int aParam);
    ~A( );
    static A* Creator( );
private:
    int m_nData;
}; 
```

And Implemented:

```
#include "A.h"

A::A()
{
}

A::A(int aParam)
{
    m_nData = aParam;
}

A::~A()
{
}

A* A::Creator()
{
    return new A(0);
} 
```

It works ok, but have problem when deleting object:

```
#include "A.h"
#include <stdio.h>

int main(int argc, char** argv)
{
    A* pointer = A::Creator();

    delete pointer;
    return 0;
} 
```

This example works as expected. I'm affraid the problem could be more complex. I'll try to give more details: I've a class similar to described here inside a dll library (Windows). When I call static function from my program, I get an error (when debugging): HEAP[program.exe]: Invalid address specified to RtlValidateHeap( 0000000000BA0000, 000000000264B3D0 ) Windows has triggered a breakpoint in program.exe.

This may be due to a corruption of the heap, which indicates a bug in program.exe or any of the DLLs it has loaded.

As I've tested, it seems that the newly created object it's being allocated in the stack.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:49:29.033

我认为您缺少析构函数的实现。编译器应该警告你。使用 gcc 和前面提到的修复程序，它可以工作。

# trigger.io - 有没有人能够让 TriggerIO 与解析推送通知一起工作？

> ID：10484957
> 
> 赞同：2
> 
> 时间：2012-05-07T15:40:07.417
> 
> 标签：trigger.io

我无法将任何推送通知发送到我的 android 模拟器。我去 Parse 管理控制台并发送了一个推送，但它显示为没有订阅者，我的模拟器上什么也没有发生。

我希望有人可以分享一些代码来展示他们如何推出？

我已经设置了我的客户端和休息 api 密钥，并且能够通过我遵循的演示向 Parse 发送图片。但是当试图推回客户端时它不起作用......

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T02:10:49.540

是的。Hojoki就是一个例子：

[http://itunes.apple.com/us/app/hojoki/id525010205?mt=8](http://itunes.apple.com/us/app/hojoki/id525010205?mt=8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:47:24.183

如果您使用 messagePushed.addListener，您将自动订阅默认频道：

```
forge.event.messagePushed.addListener(function (msg) {
    alert(JSON.stringify(msg));
}); 
```

[您是否按照此处](http://docs.trigger.io/en/v1.3/partners/parse.html#configuring-push-notifications)所述输入了您的 applicationId 和 clientKey ？

**注意**：您需要在该配置中输入您的*客户端*密钥，而不是 REST 密钥。

# heroku - 我可以/如何设置一个 heroku 实例，以便多个用户可以管理它吗？

> ID：10484959
> 
> 赞同：0
> 
> 时间：2012-05-07T15:40:09.307
> 
> 标签：heroku, admin

我们希望在 Heroku 上使用共享暂存环境，允许多个开发人员配置/管理员访问它。

我该如何设置这样的环境？理想情况下，我希望每个开发人员都能够使用自己的登录信息，以便针对环境运行命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T18:38:55.440

您需要将您的开发人员作为合作者添加到您的应用程序中。阅读更多[https://devcenter.heroku.com/articles/sharing](https://devcenter.heroku.com/articles/sharing)

# iphone - How to post an mutable array to web service using ASIFormdata

> ID：10484960
> 
> 赞同：0
> 
> 时间：2012-05-07T15:40:19.160
> 
> 标签：iphone, objective-c

i am doing an iphone application,in that i have to post multiple images at a time.For that i convert every image in to data format and added to an array.so i have to post entire array to the web service, so please kindly help me. (OR please give any alternative).thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:46:47.720

您不能自动执行此操作。您可以使用多部分表单发布来发布它们，但您必须明确构建 POST 数据。

看到这个问题：[iPhone ASIFormDataRequest with multipart/form-data](https://stackoverflow.com/questions/3282726/iphone-asiformdatarequest-with-multipart-form-data)

# c# - default event add/remove implementation

> ID：10484962
> 
> 赞同：2
> 
> 时间：2012-05-07T15:40:25.120
> 
> 标签：c#, .net, events, .net-4.0, .net-4.5

I'm looking to implement some extra logic when event handlers are added or removed to an event.

I'm aware that the default implementation in .net changed recently.

I'd like to keep my implementation as close to the default implementation as possible.

Can anyone point me to/provide something that shows how the compliler implements events?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:42:50.347

请参阅[此系列博客文章](https://www.google.com/search?q=%22Events+get+a+little+overhaul+%22)。

在 C# <4 中，它在 s 中使用了简单的委托操作`lock`。

`Interlocked.CompareExchange`在 C# 4+ 中，它通过循环调用来使用更高级的无锁算法；在反编译器中查看更多细节。

如果您*确定*您的类*永远不会*在多个线程上使用，那么您不需要任何这些；您可以简单地使用非同步委托算术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:59:51.130

不确定它是否正是您要查找的内容，但本文展示了添加删除处理程序的一些 .NET 内部结构。（还展示了如何获取和操作这些处理程序）

[http://www.codeproject.com/Articles/308536/How-to-copy-event-handlers-from-one-control-to-ano](http://www.codeproject.com/Articles/308536/How-to-copy-event-handlers-from-one-control-to-ano)

如果您尝试在那里添加一些逻辑，您可能会发现这篇文章很有趣......

# indexeddb - How can I put several requests in one transaction in IndexedDB

> ID：10484965
> 
> 赞同：7
> 
> 时间：2012-05-07T15:40:37.460
> 
> 标签：indexeddb

My code is like the following:

```
...
var f1 = function(trans) {
  var store = trans.objectStore('ObjectStore');
  store.clear();
};
var f2 = function(trans) {
  var store = trans.objectStore('ObjectStore');
  store.add({id: 1, data: 'text'});
};
...
var trans = DB.connection.transaction(['ObjectStore'], IDBTransaction.READ_WRITE);
trans.onerror = function() { alert('ERROR'); };
trans.oncomplete = function() { alert('DONE'); };
... 
```

The problem us that i get the DONE alert right after `clear` and on the second request exception appears.

Is it possible to "reuse" the transaction in IndexedDB?

UPD: I've found that the code above works as I expect in the latest Chromium nightly build.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T18:14:20.717

[根据](http://blog.nparashuram.com/2011/11/indexeddb-apis-javascriptnext.html)Mozilla 开发人员和 IndexedDB 的共同规范编写者 Jonas Sicking 的说法，事务在最后一次回调触发时提交。因此，要保持事务处于活动状态，您应该能够通过连续回调重用它。

您在`oncomplete`上面使用，但`onsucess`也应该同样有效。

您可以将事务对象作为回调返回的请求对象的属性来查找。

> 以下句子不正确“当事务变量超出范围并且不能再针对它放置更多请求时，今天的事务会自动提交”。
> 
> 当变量超出范围时，事务永远不会自动提交。通常，它们仅在最后一个成功/错误回调触发并且该回调不再安排更多请求时提交。所以它与任何变量的范围无关。
> 
> 唯一的例外是，如果您创建了一个事务但没有对它提出任何请求。在这种情况下，只要您返回事件循环，事务就会“提交”（无论这对于没有请求的事务意味着什么）。在这种情况下，只要对事务的所有引用超出范围，您就可以在技术上“提交”事务，但这并不是一个特别有趣的优化用例。

根据下面的[规范示例](http://www.w3.org/TR/IndexedDB/#idl-def-IDBRequest)，您应该能够在 找到事务对象`evt.transaction`，并且可以进行新事务并添加新的`onsuccess`事件侦听器。

```
 var request = indexedDB.open('AddressBook', 'Address Book');
 request.onsuccess = function(evt) {...};
 request.onerror = function(evt) {...}; 
```

# css - CSS 垂直对齐：中间在 IE7 中不起作用

> ID：10484969
> 
> 赞同：3
> 
> 时间：2012-05-07T15:40:54.597
> 
> 标签：css, internet-explorer-7, vertical-alignment

我这里有这段代码...

```
 <div class="pics2">

<div style="position: absolute; top: 0px; left: 0px; display: block; z-index: 4; opacity: 1; width: 225px; height: 200px;"> // this div is generated via jQuery Plugin
<div style="display:table-cell; vertical-align:middle; height:200px;">
<img src="upload/<?php echo $array['image5'] ?>" width="225" />
</div>
</div>
</div> 
```

这是CSS

```
.pics2 {  
    padding: 0;  
    margin-left:20px auto;
    margin-right:20px auto;
    width:225px;
    height:200px;
    overflow:hidden;
        float:left;
}

.pics2 div{
    width:225px;
    height:200px;
}

.pics2 img {    
        background-color: #eee;
    margin: auto;
    display:block;
    vertical-align:middle;
} 
```

我想要做的是在三个`div`s 内垂直对齐图像，上面的代码适用于除 IE7 之外的每个浏览器......有人知道如何修复它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T15:48:34.357

我希望它能帮助解决您的问题（文章底部的 IE 7 的一些秘籍）

[垂直居中多行文本](http://css-tricks.com/vertically-center-multi-lined-text/)

对于这样的示例代码

```
margin-top: expression((parentNode.offsetHeight.offsetHeight/2)-(parseInt(this.offsetHeight)/2) <0 ? "0" :(parentNode.offsetHeight/2)-(parseInt(this.offsetHeight)/2) +'px'); 
```

代替

```
 vertical-align:middle; 
```

1.  `parentNode.offsetHeight/2`- 确定容器的高度并将其除以 2。这给了我们一个正好是屏幕高度一半的边距
2.  `-(parseInt(offsetHeight)/2))`- 确定定心块的高度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T15:44:36.520

由于您知道 div 的高度（您将其指定为 200px），您可以像这样修复它：

```
.container{
    position:relative;
}
.v-middle{
    position:absolute;
    top:50%;
    margin-top:-100px;
} 
```

HTML：

```
<div class="pics2">

<div class="container" style="position: absolute; top: 0px; left: 0px; display: block; z-index: 4; opacity: 1; width: 225px; height: 200px;"> // this div is generated via jQuery Plugin
<div class="v-middle" style="display:table-cell; vertical-align:middle; height:200px;">
<img src="upload/<?php echo $array['image5'] ?>" width="225" />
</div>
</div> 
```

编辑：这是一个工作示例：http: [//jsfiddle.net/MUrbL/](http://jsfiddle.net/MUrbL/)

# c#-4.0 - System.Addin get HostView from token without activating

> ID：10484975
> 
> 赞同：0
> 
> 时间：2012-05-07T15:41:18.660
> 
> 标签：c#-4.0, maf, system.addin

Is there anyway to obtain the HostView of a token without activating that token? In my program I activate the token when the wpf window loads and then, in a separate class, I need to access the HostView of a specific token.

After some initial checks online I could not find any method that would do this, so my guess is that there is not a 1:1 correlation between a token and a specific HostView (ie one token could have multiple views). Am I way off on this?

# php - PHP PDO - 仅回显选择查询的一个结果而不使用 while 循环

> ID：10484977
> 
> 赞同：0
> 
> 时间：2012-05-07T15:41:18.933
> 
> 标签：php, pdo

到目前为止，每次我使用 pdo 进行选择查询时，我都会使用 while 循环来回显所有结果。我从来没有一个问题。但我想要知道的只是回应一张唱片。假设我的表格第 23 行的记录。所以我做的是以下，但我有这个错误：`Notice: Undefined offset: 23 in /myFilePath/file.php`

```
$qry_que= $connexion->query('SELECT * FROM table ORDER BY somefield';
$row = $qry_que->fetch(PDO::FETCH_ASSOC);
echo $row[23]['somefield']; 
```

请注意，我的表有 100 多行...提前感谢您的帮助。干杯。马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:43:11.330

你不能通过做得到第 24 行`$row[23]`。

您必须`WHERE`在 SQL 查询中使用子句才能仅获取所需的行。

此外，从性能的角度来看，它会好**很多**（想想当你的数据库有 1000 万行时你的查询......）

# objective-c - Why do these custom accessors cause EXC_BAD_ACCESS when trying to save managed object context?

> ID：10484979
> 
> 赞同：0
> 
> 时间：2012-05-07T15:41:39.440
> 
> 标签：objective-c, ios, core-data

In my `NSManagedObject` subclass, I've written a set of custom accessor methods to expose a public `CMTime` property called `videoDuration` which is backed by an `NSData` attribute called `videoDurationData`...

```
- (CMTime)videoDuration
{
    [self willAccessValueForKey:@"videoDuration"];
    NSValue *videoDurationValue = [self primitiveVideoDuration];
    [self didAccessValueForKey:@"videoDuration"];
    if (nil == videoDurationValue) {
        NSData *videoDurationData = [self videoDurationData];
        if (nil != videoDurationData) {
            videoDurationValue = [NSValue valueWithCMTimeData:videoDurationData];
            [self setPrimitiveVideoDuration:videoDurationValue];
        }
    }

    return [videoDurationValue CMTimeValue];
}

- (void)setVideoDuration:(CMTime)videoDuration
{
    [self willChangeValueForKey:@"videoDuration"];
    NSValue *videoDurationValue = [NSValue valueWithCMTime:videoDuration];
    [self setPrimitiveVideoDuration:videoDurationValue];
    [self didChangeValueForKey:@"videoDuration"];
    [self setVideoDurationData:[NSData dataWithValue:videoDurationValue]];
}

- (NSValue *)primitiveVideoDuration
{
    NSData *videoDurationData = [self videoDurationData];
    if (nil != videoDurationData) {
        NSValue *videoDurationValue = [NSValue valueWithCMTimeData:videoDurationData];
        return videoDurationValue;
    }

    return nil;
}

- (void)setPrimitiveVideoDuration:(NSValue *)primitiveVideoDuration
{
    if (nil != primitiveVideoDuration) {
        NSData *videoDurationData = [NSData dataWithValue:primitiveVideoDuration];
        [self setVideoDurationData:videoDurationData];
    }
    else {
        [self setVideoDurationData:nil];
    }
} 
```

After adding in undo/redo support, my app crashes on `-[NSManagedObjectContext save:]` with a EXC_BAD_ACCESS memory exception. However, if I comment out the primitive accessor methods (and have the `-primitiveVideoDuration` method simply return `nil`, then everything works as expected. I'm guessing that this has something to do with `CMTime` ~~not being a key-value compliant scalar structure~~? (see update below)

UPDATE -- 5/8/12: [This thread](http://www.cocoabuilder.com/archive/cocoa/313546-make-custom-struct-key-value-coding-compliant.html) and the [key-value coding programming guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/DataTypes.html#//apple_ref/doc/uid/20002171-BAJEAIEE) seem to suggest that KVC now supports arbitrary struct data, which would lead me to believe that what I'm trying to do is indeed possible?

UPDATE 2 -- 5/8/12: Evidently, by simply *not* implementing the primitive accessors, everything works correctly. Why this is the case is still baffling to me...

# c++ - 无法在 x86 上以 SSE 类型访问内存，但在 x64 上工作正常

> ID：10484985
> 
> 赞同：6
> 
> 时间：2012-05-07T15:42:17.257
> 
> 标签：c++, x86, sse

我有一些使用 MSVC SSE 内在函数编写的代码。

```
 __m128 zero = _mm_setzero_ps();
            __m128 center = _mm_load_ps(&sphere.origin.x);
            __m128 boxmin = _mm_load_ps(&rhs.BottomLeftClosest.x);
            __m128 boxmax = _mm_load_ps(&rhs.TopRightFurthest.x);

            __m128 e = _mm_add_ps(_mm_max_ps(_mm_sub_ps(boxmin, center), zero), _mm_max_ps(_mm_sub_ps(center, boxmax), zero));
            e = _mm_mul_ps(e, e);

            __declspec(align(16)) float arr[4];
            _mm_store_ps(arr, e);
            float r = sphere.radius;
            return (arr[0] + arr[1] + arr[2] <= r * r); 
```

`Math::Vector`类型（即 、 和 的类型`sphere.origin`）`rhs.BottomLeftClosest`实际上是`rhs.TopRightFurthest`3 个浮点数的数组。我将它们对齐到 16 个字节，这段代码在 x64 上执行得很好。但是在 x86 上，我在读取空指针时遇到访问冲突。关于这来自哪里的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T17:25:16.583

```
 __m128 center = _mm_load_ps(&sphere.origin.x); 
```

_mm_load_ps() 要求传递的指针是 16 字节对齐的。没有证据表明您确保 sphere.origin.x 正确对齐。如果您无法提供该保证，则需要使用 _mm_loadu_ps() 代替。

# c - 如何使用 C 管理 linux tmp 空间

> ID：10484987
> 
> 赞同：0
> 
> 时间：2012-05-07T15:42:19.257
> 
> 标签：c, linux

我对 tmp linux 与 C 函数的使用有一些疑问

*   如何使用 C 获取 tmp 的可用空间大小（当 tmp 不是 tmpfs 分区时）？

*   当 tmp 内存满了 C 时，如何以安全的方式清理 tmp 内存？

笔记：

*   “df -h”不显示 tmp 文件夹，因此 tmp 没有分区

*   proc/meminfo 包含内存信息。如果我们将文件复制到 tmp 文件夹，我们会用复制文件的大小来标记 /proc/meminfo 中的 MemFree 变量的减少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:32:47.210

通常`/tmp`是挂载到本地分区上的文件系统。它通常是指向`/var/tmp`.

详情请看[这里](http://www.pathname.com/fhs/pub/fhs-2.3.html#TMPTEMPORARYFILES)。

它的内容可能随时被删除。至少在系统启动时清理它是常见的行为。

* * *

`tmpfs`通常是驻留在 SHM（共享内存）中的文件系统，类似于 RAM 磁盘。

我可以引用[维基百科](http://en.wikipedia.org/wiki/Tmpfs)：

> tmpfs 是许多类 Unix 操作系统上临时文件存储设施的通用名称。它旨在显示为已挂载的文件系统，但存储在易失性内存而不是持久存储设备中。类似的结构是 RAM 磁盘，它显示为虚拟磁盘驱动器并托管磁盘文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:06:43.110

我认为 Linux 发行版中有两种 /tmp 类型，它只是一个文件夹或 tmpfs 分区（来自 RAM 的磁盘）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T16:38:58.663

请注意，ramfs/tmpfs 分区是动态增长的，您的程序负责写入的数据不超过物理 RAM 的数量。

如果`df`没有显示挂载为 的分区`/tmp`，则`/`（根分区）包含它，其大小是您`/tmp`可能占用的最大大小。

现在让我们假设你有一个`tmpfs`挂载为：

```
# mount -t tmpfs -o size=100m tmpfs /mnt/tmp 
```

您可以使用以下方法检查其大小`df`：

```
# df -k
Filesystem      1K-blocks  Used     Available Use%  Mounted on
tmpfs           102400     0        102400    0%    /mnt/tmp 
```

要获取这些块信息，您可以使用[statvfs](http://linux.die.net/man/2/statvfs)。例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/statvfs.h>

int main(int argc, char **argv) {
    if (argc != 2) {
        fprintf(stderr, "Usage: %s <device>\n", argv[0]);
        return EXIT_FAILURE;
    }

    struct statvfs fsdata;
    int result = statvfs(argv[1], &fsdata);
    if (result != 0) {
        fprintf(stderr, "Failed to stat: %s\n", argv[1]);
        return EXIT_FAILURE;
    }

    printf("Disk %s:\n", argv[1]);
    printf("  file system block size: %lu\n", fsdata.f_bsize);
    printf("  fragment size: %lu\n", fsdata.f_frsize);
    printf("  size of fs in f_frsize units: %d\n", fsdata.f_blocks);
    printf("  # free blocks: %d\n", fsdata.f_bfree);
    printf("  # free blocks for unprivileged users: %d\n", fsdata.f_bavail);
    printf("  # inodes: %d\n", fsdata.f_files);
    printf("  # free inodes: %d\n", fsdata.f_ffree);
    printf("  # free inodes for unprivileged users: %d\n", fsdata.f_favail);
    printf("  file system ID: %lu\n", fsdata.f_fsid);
    printf("  mount flags: %lu\n", fsdata.f_flag);
    printf("  maximum filename length: %lu\n", fsdata.f_namemax);

    return EXIT_SUCCESS;
} 
```

**您无法`/tmp`在挂载时安全地清理分区**。您必须卸载它，这需要关闭所有**引用此分区内的 inode**的文件描述符。

# php - php - 通过 AJAX 在产品页面上上传自定义图像

> ID：10484992
> 
> 赞同：0
> 
> 时间：2012-05-07T15:42:34.067
> 
> 标签：php, ajax, file-upload, e-commerce

我正在编写一个小型电子商务网站，我需要能够允许用户在添加到购物篮之前上传他们自己的自定义图像（仅限 JPG 或 PNG），以便图像可以包含在订单中。

我目前的想法是通过 AJAX 上传文件并将文件名插入数据库，这样我就可以将图像链接到数据库中的产品和特定订单。但是，我读到您不能轻松地使用 AJAX 执行此操作，因为它尚不受支持？

我应该从字面上使用普通的文件上传表单并在提交表单后处理 $_FILES 和 $_POST 请求。当物品被添加到购物篮时，这已经完成了，所以这是可能的，尽管这可能需要一段时间来处理上传。

我是否错过了一种可以解决问题的明显方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:11:47.297

您需要将表单发布到隐藏的 iframe，向 iframe 输出 json 响应，然后通过 javascript 解析响应。

# python - Python Ctypes 传入指针并返回结构

> ID：10484995
> 
> 赞同：3
> 
> 时间：2012-05-07T15:42:42.497
> 
> 标签：python, c, pointers, struct, ctypes

这是我在解决实际有用的问题之前尝试开始工作的一个简单示例。C代码：

```
typedef struct {
  uint32_t seconds;
  uint32_t nanoseconds;
} geoTime;

int myTest(geoTime *myTime){
  printf("Time: %d %d\n", myTime->seconds, myTime->nanoseconds);
  myTime->seconds = myTime->nanoseconds;
  geoTime T = {314, 159};
  printf("MyTime: %d %d      retValue: %d %d\n", myTime->seconds, myTime->nanoseconds, T.seconds, T.nanoseconds);
  return 314;
} 
```

Python代码：

```
import ctypes
import time
import math

lib_astro = ctypes.CDLL("libastroC.so")

class geoTime(ctypes.Structure):
    _fields_ = [("seconds", ctypes.c_uint),
                ("nanoseconds", ctypes.c_uint)]  

now = time.time()
print "Python Now: ", now

now_geoTime = geoTime()
now_geoTime.seconds = ctypes.c_uint(int((math.floor(now))))
now_geoTime.nanoseconds = ctypes.c_uint(int(math.floor(math.modf(now)[0] * 1000000000)))
print "Python geoTime now:", now_geoTime.seconds, now_geoTime.nanoseconds

lib_astro.myTest.argtypes = [ctypes.POINTER(geoTime)]
lib_astro.myTest.restype = geoTime
print "************* ENTERING C ********************"
test = lib_astro.myTest(ctypes.byref(now_geoTime))
print "************* EXITING C **********************"
print "Modified now_geoTime: ",now_geoTime.seconds, now_geoTime.nanoseconds
print "test: ",test 
```

输出：

```
Python Now:  1336401085.43
Python geoTime now: 1336401085 432585000
************* ENTERING C ********************
Time: 1336401085 432585000
MyTime: 432585000 432585000      retValue: 314 159
************* EXITING C **********************
Modified now_geoTime:  432585000 432585000
test:  314 
```

上面的代码完全按照我的预期工作，我的指针进入并被修改，我得到了我的整数。当我尝试在 C 中创建 geoTime 结构并将其返回给 Python 时，就会出现问题。

在 C 中添加/修改代码：

```
geoTime patTest(geoTime *myTime){
    printf("Time: %d %d\n", myTime->seconds, myTime->nanoseconds);
    myTime->seconds = myTime->nanoseconds;
    geoTime T = {314, 159};
    printf("MyTime: %d %d      retValue: %d %d\n", myTime->seconds, myTime->nanoseconds, T.seconds, T.nanoseconds);
    return T; 
```

}

修改后的 Python 代码：

```
lib_astro.patTest.argtypes = [ctypes.POINTER(geoTime)]
lib_astro.patTest.restype = geoTime
print "************* ENTERING C ********************"
test = lib_astro.patTest(ctypes.byref(now_geoTime))
print "************* EXITING C **********************"
print "Modified now_geoTime: ",now_geoTime.seconds, now_geoTime.nanoseconds
print "Type of test: ",test
print "Information in test: ", test.seconds, test.nanoseconds 
```

一旦我像这样更改我的代码，C 代码就会进入 myTime 而不是来自 Python 的信息，并且返回值被放入 now_geoTime 而不是 test。关于可能出现问题的任何想法？看起来 python 代码没有按照我期望的方式做某事，因为 C 代码似乎可以正确处理传入的值。

最后一个示例的输出：

```
Python Now:  1336404920.77
Python geoTime now: 1336404920 773674011
************* ENTERING C ********************
Time: 90500 -17037640
MyTime: -17037640 -17037640      retValue: 314 159
************* EXITING C **********************
Modified now_geoTime:  314 159
Type of test:  <__main__.geoTime object at 0x82bedf4>
Information in test:  137096800 134497384 
```

任何想法将不胜感激，我一直在努力让它工作很长一段时间。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T11:21:21.897

我切换到 64 位 python/64 位 dll，问题就消失了。当我感觉更有灵感时，我可能会尝试将其隔离到编译器、操作系统或 python，但现在我将使用它运行。

# c++ - 如何按名称获取 id 顶点？

> ID：10484996
> 
> 赞同：1
> 
> 时间：2012-05-07T15:42:44.137
> 
> 标签：c++, c, igraph

如果我想通过 id 顶点获取名称，我可以使用这个函数：`VAS(g, "name",id)` 但是如果我想要相反的方式，通过名称获取 id，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:25:39.937

igraph 本身并没有提供按名称查找顶点的方法，并且有充分的理由 - 从名称到 ID 的映射比从 ID 到名称的映射更具挑战性，后者是一个简单的数组查找操作。您可以遍历所有顶点并在匹配的顶点处停止，但这对于大型图（顶点数为 O(n)）效率低下。一种更快的方法是使用某种关联数组数据结构，例如`dict`@Jasc 的答案，并使用名称作为键和 ID 作为值。（如果你改变它，你需要保持这个索引与图表同步。）C，它自己，或者标准 C 库不提供这样的数据结构，但是有很多实现可用，例如找到的[GHash 结构](http://developer.gnome.org/glib/2.30/glib-Hash-Tables.html)在油嘴滑舌的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:44:13.153

我在 igrah 网站或邮件列表中找到了以下内容。

```
g = igraph.Graph(0, directed=True)
g.add_vertices(2)
g.vs[0]["name"] = "Bob"
g.vs[1]["name"] = "Bill"
# build a dict for all vertices to lookup ids by name
name2id = dict((v, k) for k, v in enumerate(g.vs["name"]))
# access specific vertices like this:
id_bob = name2id["Bob"]
print(g.vs[id_bob]["name"]) 
```

# php - 从 sql 数据库 php 填充单选按钮

> ID：10484999
> 
> 赞同：-1
> 
> 时间：2012-05-07T15:43:03.043
> 
> 标签：php, sql, ajax

我想要一个复选框，其中的文本由 sql 数据库填充，然后存储在 ajax 中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:02:05.920

php 中的生成单选按钮应如下所示：

```
<?php
mysql_connect("localhost", "mysql_user", "mysql_password") or
    die("Could not connect: " . mysql_error());
mysql_select_db("mydb");

$result = mysql_query("SELECT id, name, value FROM mytable");

//I assume the 2nd entry in the database is the value name and the 3th is the button value
while ($row = mysql_fetch_array($result)) {
    echo '<input type="radio" name="'.$row[1].'" value="'.$row[2].'" />'.$row[1];
}
?> 
```

AJAX 部分的存储有点混乱。AJAX 是一种进行子页面请求的方式。[见这里](http://www.w3schools.com/ajax/default.asp)。

因此，如果您想使用 ajax 进行存储，则必须构建一个 PHP 页面来接收数据并将其放入数据库中。最简单的方法是通过 ajax 请求发布带有数据的整个表单。[在这里查看](http://www.jstiles.com/Blog/How-To-Submit-a-Form-with-jQuery-and-AJAX)。祝你的努力好运！