# StackOverflow 问答 12023000-12023999

# css - CSS3 arc div 或画一个圆弧

> ID：12023004
> 
> 赞同：2
> 
> 时间：2012-08-18T23:21:39.777
> 
> 标签：css

使用 css3 是否有可能像下面的图像那样绘制一个 div 或绘制和弧形......我已经看到了一些圆圈的例子，但不是弧形。

![在此处输入图像描述](../Images/dcbb2ee0f6fdc4fc14053a79913da650.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:12:25.483

是的，您可以使用`border-radius`.

在此处查看示例：http: [//jsfiddle.net/jQ5gu/](http://jsfiddle.net/jQ5gu/)

# c# - 如何在不使用 C# 中的内置数学函数的情况下计算以 2 为底的对数？

> ID：12023007
> 
> 赞同：4
> 
> 时间：2012-08-18T23:21:59.777
> 
> 标签：c#, .net, logarithm

如何在不使用 C# 中的内置数学函数的情况下计算以 2 为底的对数？

我在应用程序中反复使用 Math.Log 和 BigInteger.Log 数百万次，它变得非常缓慢。

我对使用二进制操作来实现相同的替代方案感兴趣。请记住，如果有助于加快执行时间，我可以使用对数近似值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T23:32:05.370

假设您只对对数的整数部分感兴趣，您可以执行以下操作：

```
static int LogBase2(uint value)
{
    int log = 31;
    while (log >= 0)
    {
        uint mask = (1 << log);
        if ((mask & value) != 0)
            return (uint)log;
        log--;
    }
    return -1;
} 
```

（请注意，0 的返回值是错误的；它应该是负无穷大，但整数数据类型没有这样的值，所以我返回 -1）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T23:31:21.533

[http://graphics.stanford.edu/~seander/bithacks.html](http://graphics.stanford.edu/~seander/bithacks.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T23:27:28.570

对于 BigInteger，您可以使用 toByteArray() 方法，然后手动找到最重要的 1，然后计算零的数量。这将为您提供整数精度的以 2 为底的对数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-18T23:28:05.657

bit hacks 页面对于这样的事情很有用。

*   [使用查找表查找整数的以 2 为底的对数](http://graphics.stanford.edu/%7Eseander/bithacks.html#IntegerLogLookup)

那里的代码在 C 中，但基本思想也适用于 C#。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T23:28:41.397

如果您可以使用近似值，那么请使用英特尔芯片使用的技巧：将值预先计算为合适大小的数组，然后引用该数组。您可以使数组以任何最小/最大值开始和结束，并且您可以根据需要创建任意数量的中间值以实现所需的精度。

# java - 使用java创建重复的xml元素

> ID：12023009
> 
> 赞同：1
> 
> 时间：2012-08-18T23:22:52.030
> 
> 标签：java, xml

我在创建具有我正在寻找的层次结构的 xml 文档时遇到问题..

```
<claimants>
<claimant>
    <Area>Discrimination/Equality</Area>
    <Complaints>1</Complaints>
    <AssocatedComplaints>3</AssocatedComplaints>
 </claimant>
 <claimant>
    <Area>Redundancy</Area>
    <Complaints>1</Complaints>
    <AssocatedComplaints>3</AssocatedComplaints>
 </claimant> 
```

我得到这个 -

```
<claimants>
<claimant>
    <Area>Discrimination/Equality</Area>
    <Complaints>1</Complaints>
    <AssocatedComplaints>3</AssocatedComplaints>
    <Area>Redundancy</Area>
    <Complaints>1</Complaints>
    <AssocatedComplaints>3</AssocatedComplaints>
    <Area>Terms and Conditions of Employment</Area>
    <Complaints>1</Complaints>
    <AssocatedComplaints>3</AssocatedComplaints>
</claimant> 
```

这是代码的相关部分，appendchild 没有按我的预期工作，我尝试了其他几个选项，我怎样才能让索赔人元素填充和重复？

```
Document document = new DocumentImpl();
Element claimants = document.createElement("claimants");
Element claimant = document.createElement("claimant"); 
```

……

```
rs = ps.executeQuery();
while (rs.next())  {
    // get data in
    String area = rs.getString("Area");
    System.out.println(">> Area : "+area);
    complaints = rs.getString("Complaints");
    System.out.println(">> Complaints : "+ complaints);
    associated = rs.getString("Associated");
    System.out.println(">> Associated : "+associated);

    // write text elements
    Element eArea = document.createElement("Area");
    eArea.appendChild(document.createTextNode(area));
    Element eComplaints = document.createElement("Complaints");
    eComplaints.appendChild(document.createTextNode(complaints));
    Element eAssociated = document.createElement("AssocatedComplaints");
    eAssociated.appendChild(document.createTextNode(associated));

    // append to claimant 
    System.out.println("appending ELEMENTS to claimant");
    claimant.appendChild(eArea);
    claimant.appendChild(eComplaints);
    claimant.appendChild(eAssociated);

    // append to claimants
    System.out.println("appending claimant to claimants");
    claimants.appendChild(claimant);
    //claimants.insertBefore(claimant, claimants.firstChild);

    System.out.println("creating new element claimant");
    Element claimant = document.createElement("claimant");
    }

document.appendChild(claimants); 
```

谢谢你的帮助 ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T23:25:55.937

您需要在循环*内*`claimaint`为每次迭代创建一个新的：

 *```
while (rs.next())  {
  Element claimant = document.createElement("claimant"); // a new claimaint is created for each new row

  // append elements to claimant
  claimant.appendChild(eArea);
  claimant.appendChild(eComplaints);
  claimant.appendChild(eAssociated);

  // append to claimaints
  claimants.appendChild(claimant);
} 
```*

# javascript - 用于可拖动马赛克的 Javascript 工具包？

> ID：12023015
> 
> 赞同：0
> 
> 时间：2012-08-18T23:23:59.403
> 
> 标签：javascript, datagrid, draggable

在“状态面板”应用程序中经常可以看到一种网页样式。Geckoboard 是一个非常好的示例 - [http://www.geckoboard.com/](http://www.geckoboard.com/) - 并且 Windows 8 在风格上看起来很相似（但可能不是功能）。

是否有支持此类事情的 Javascript 工具包？特别是，它将允许在网格中拖动项目并支持面板的删除/添加。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:50:04.637

Masonry 是我得到的最佳答案（见 Jared 的评论）。

自己回答这个问题，以便我可以将问题标记为已回答。很久以前，Aksed Jared 自己发布了一个答案（见评论）。

# ffmpeg - FFmpeg输入持续时间？

> ID：12023020
> 
> 赞同：0
> 
> 时间：2012-08-18T23:25:08.860
> 
> 标签：ffmpeg, video-encoding

使用 FFmpeg，您可以选择`-t`设置输出的持续时间。但是我看不到限制**输入**持续时间的方法。接受这个命令

```
ffmpeg -i video.mp4 -c copy -t 60 out.mp4 
```

这只是创建原始视频的 60 秒剪辑。但是，如果我想在保留完整视频流的同时剪辑**音频**，FFmpeg 似乎没有这个选项。

我试过先简单地剪辑音频，然后将剪辑的音频与视频文件结合起来，但这会导致我的视​​频/音频同步问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:25:07.550

```
‘-aframes number (output)’

    Set the number of audio frames to record. This is an alias for -frames:a. 
```

[§ 音频选项](http://ffmpeg.org/ffmpeg.html#Audio-Options)

```
ffmpeg -i video.mp4 -c copy -aframes 100 out.mp4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:29:29.627

使用“-itsoffset”选项。这会使前 10 秒静音。

```
ffmpeg -i video.mp4 -vn -acodec copy -ss 10.0 out_audio.mp4
ffmpeg -itsoffset 10.0 -i out_audio.mp4 -i video.mp4 -vcodec copy -acodec copy out.mp4 
```

# jquery - jQuery Slider - 通过分页导航手动更改幻灯片时停止自动播放

> ID：12023031
> 
> 赞同：0
> 
> 时间：2012-08-18T23:27:03.700
> 
> 标签：jquery, tabs, slider, paging, autoplay

我一直试图弄清楚为什么我的滑块在通过分页导航更改幻灯片时停止自动播放。

我尝试设置一个 JSFiddle ( [http://jsfiddle.net/9GuvL](http://jsfiddle.net/9GuvL) ) 但它似乎根本不起作用。所以我为你上传了一个预览：http: [//dperolio.rp-computers.co.uk/crusadegaming-help/](http://dperolio.rp-computers.co.uk/crusadegaming-help/)

您可以看到它正常运行，除非您单击右侧的滑动选项卡之一。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:01:46.813

我想这是正常行为，因为当用户单击选项卡时，她通常希望该选项卡永久可见。

在方法的定义中有一个`pause()`调用`jump`（在`slideshow.js`）

```
jump: function(index, control) {
    if ((Slideshow.lastSlide == index) || (Slideshow.slides.length <= 1)) return;
    Slideshow.pause();
    setTimeout(Slideshow.play, 5000) 
```

如果你真的想要，你可以评论它

# codeigniter - 在哪里初始化局部视图

> ID：12023035
> 
> 赞同：2
> 
> 时间：2012-08-18T23:27:47.457
> 
> 标签：codeigniter

A 有一个 CI 2 项目，在一个视图中我有 3 个框，我必须在不同的页面、不同的路线上显示它们。大约在 8 条不同的路线上，那么假设我在哪里声明它们？

在每个函数（其中 8 个）的视图中或在一个视图文件中，检查当前路由是否符合条件。问题是，并非所有这些都应该显示，A 框仅在 5 视图中，B 框在 4 中，C 框在 2 示例中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:16:10.743

我会在最集中的地方声明它。检查在每个函数中加载视图意味着如果你要改变你的条件，你必须在 8 个不同的地方更新它！维护起来并不有趣。

通过签入一个视图文件，一切都更加集中。这可能看起来很愚蠢，因为您的条件可能会变大，

```
if ($is_route_1 || $is_route_2 || $is_route_4 || $is_route_5) { 
 // display the box
} 
```

因此，如果您想在另一个页面上显示它，您可以将其添加到一个视图中。

# django - 从模型创建模型表单并隐藏属性之一

> ID：12023038
> 
> 赞同：0
> 
> 时间：2012-08-18T23:28:12.757
> 
> 标签：django, django-models, django-forms

```
class Label(models.Model):
   name = ...
   slug_name = ... 
```

这是我直接从模型创建的表格

```
class LabelForm(models.Model):
   class Meta:
       model = Label 
```

我怎样才能给 url 小部件`HiddenInput`？`slug_name`也不能为空，因为它是必需的...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:47:06.850

对于必填字段，[将`blank`field 选项与 a 一起使用`TextField`](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.Field.blank)：

```
slug_name = TextField(blank=False) 
```

对于`HiddenInput`小部件，我假设您的模型中存在一个 url 字段（您发布的代码中不是这种情况）检查[Django's own guide to override the default field types or widgets on a`ModelForm`](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)：

```
class LabelForm(models.Model):
    class Meta:
        model = Label
        widgets = {'url': HiddenInput()} 
```

# ruby-on-rails - Rails 应用程序中全文 potgresql 搜索的奇怪行为

> ID：12023043
> 
> 赞同：1
> 
> 时间：2012-08-18T23:28:44.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, full-text-search, pg

我遵循了[PostgreSQL Railscast 中的全文搜索，](http://railscasts.com/episodes/343-full-text-search-in-postgresql)但我得到了一些奇怪的行为。

例如，当我搜索“警察”时，我没有得到任何结果，但当我搜索“警察”时，我得到了。（警察存在于我正在搜索的内容中）。它也根本没有返回一些结果——但我知道这个词是存在的，无论这个词是大是小。

当我启动 rails dbconsole 时，它​​说我正在使用 psql (9.1.4)，并且应用程序的其余部分似乎也正常运行。

我需要重建索引还是什么？

我正在使用 PG gem 和 postgres_ext gem，我没有使用 texticle 或 pg_search gem（因为我真的不需要添加的功能）。

我的代码与截屏视频相同：

```
def self.text_search(query)
  if query.present?
    rank = "ts_rank(to_tsvector(name), plainto_tsquery(#{sanitize(query)}))"
    where("to_tsvector('english', name) @@ :q 
           or to_tsvector('english', content) @@ :q", q: query).order("#{rank} desc")
  else
    scoped
  end
end 
```

我已经创建了这样的索引：

```
class AddSearchIndexToArticles < ActiveRecord::Migration
  def up
    execute "create index articles_name on articles using gin(to_tsvector('english', name))"
    execute "create index articles_content on articles using gin(to_tsvector('english', content))"
  end
end 
```

有趣的是，如果我在 where 调用中删除对 to_tsvector 的调用：

```
def self.text_search(query)
  if query.present?
    rank = "ts_rank(to_tsvector(name), plainto_tsquery(#{sanitize(query)}))"
    where("name @@ :q 
           or content @@ :q", q: query).order("#{rank} desc")
  else
    scoped
  end
end 
```

...它按预期工作（除了因为索引似乎被忽略而非常慢）

有什么想法吗？

更新：

打开完整日志记录后，这里是正在运行的 sql：

```
LOG:  statement: SELECT 1
LOG:  statement: SELECT  "dogs".* FROM "dogs"  WHERE (to_tsvector('english', name) @@ 'wary' 
               or to_tsvector('english', other_names) @@ 'wary'
               or to_tsvector('english', origin) @@ 'wary'
               or to_tsvector('english', kusa) @@ 'wary') ORDER BY         ts_rank(to_tsvector(name), plainto_tsquery('wary'))
     desc LIMIT 10 OFFSET 0
LOG:  statement: SELECT 1
LOG:  statement: SELECT 1 
```

我不是 sql 专家，但查询看起来没问题？

另外，我不确定它是否相关，但日志文件中也有很多：

```
FATAL:  lock file "postmaster.pid" already exists
HINT:  Is another postmaster (PID 821) running in data directory "/usr/local/var/postgres"? 
```

我通过自制软件安装了 postgres，并且正在使用 9.1.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T10:21:14.260

考虑一下*警察*这个词是如何被转换的`to_tsvector`：

```
select to_tsvector('english','police'); 
```

结果是：

```
to_tsvector
-------------
 “警察”：1

```

如果我们直接将其与*Police*进行比较，则不会匹配：

```
select to_tsvector('english','police') @@ 'police' as match; 
```

结果是：

```
匹配
----------
 F

```

（在这种情况下，f 是布尔值**false**）。

但是，如果针对 的结果进行比较`plainto_tsquery`，则它确实匹配：

```
select to_tsvector('english','police') @@ plainto_tsquery('english','police')  as match; 
```

结果是：

```
匹配
--------
 吨

```

结论：不要将 tsvector 直接与单词匹配，将其与`plainto_tsquery`, 或的结果匹配`to_tsquery`。

* * *

您可能还需要加强其他一些内容：当前，您的查询既包含显式传递给它的*英语*`to_tsvector`配置的调用，也包含没有此参数的调用（在子句中），在这种情况下，它默认为参数的当前值。如果并且当此参数与*english*不同时，可能会在某些表达式中产生意想不到的结果。最好始终传递此参数，或始终忽略它。后一种情况具有简洁的优点，并且避免了对特定语言进行硬编码。*`ORDER BY``default_text_search_config`*

# scala - 从 scala 并行收集到常规收集的转换

> ID：12023045
> 
> 赞同：30
> 
> 时间：2012-08-18T23:29:01.580
> 
> 标签：scala, parallel-processing, scala-collections

我正在尝试从并行集合转换回常规地图。根据 api，如果我在任何适当定义的并行集合上调用 toMap，它应该返回一个标准 Map，但它在一个扁平化的迭代集合上返回 ParMap。

我有一个

```
val task: Stream[Future[Iterable[Tuple2[String, String]]]] 
```

我从中得到：

```
val res: ParSeq[Iterable[Tuple2[String, String]]] = tasks.par.map(f => f.apply()) 
```

最后：

```
val finalresult = res.flatten.toMap 
```

不幸的是，类型`finalresult`是`ParMap[String, String]`.

另一方面，如果我这样称呼它：

```
tasks.par.map(f => f.apply()).reduce(_++_).toMap 
```

那么返回类型是`Map[String, String]`.

有人能告诉我这是为什么吗？并且（出于好奇）我如何在 scala 不允许我的情况下强制将 a 转换`ParMap`为 a `Map`？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-18T23:42:18.790

当您通过显式从顺序收集到并行收集时`.par`，您将返回到顺序通过`.seq`。由于集合和映射具有并行实现，`toMap`并且`toSet`调用将集合留在当前域中。

工作的例子，`reduce`因为它减少了集合（外部`ParSeq`消失，留下内部（顺序）`Iterable[Tuple2[...]]`）。

# php - 判断句子是否相似

> ID：12023046
> 
> 赞同：0
> 
> 时间：2012-08-18T23:29:44.923
> 
> 标签：php, mysql

我有一张包含数百个健身目标的表格。下面是一个子集。

1.  “我想减掉 10 磅。”
2.  “在 6 分钟内跑完一英里。”
3.  “在 7 分钟内跑完一英里。”
4.  “准备好泳衣，减掉 5 磅。”
5.  “能够跑一英里不到七分钟。”

如何找到相似健身目标的匹配项？例如，#1 和#4 都想减肥，#3 和#5 都想在 7 分钟内跑完一英里。此外，#2、#3 和#5 都想跑得更快。如何有效地搜索此健身目标表以确定哪些目标相似？目标存储在 mysql 表中。我正在寻找 PHP 中的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:34:14.777

好吧，您可能会标记一些关键字，例如“重量”、“磅”、“磅”，以后可以由管理员检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:37:41.543

您可以通过以下两种方式之一执行此操作：

在 PHP 中，您可以使用[相似文本](http://php.net/manual/en/function.similar-text.php)函数。然而，这是一种非常普通的方法。

更好的办法是使用[Mysql的全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)。问题是您无法比较数据库中的两行，而是将文本字符串与表中的数据进行比较：

示例基于：

```
mysql> CREATE TABLE articles (
    ->   id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    ->   title VARCHAR(200),
    ->   body TEXT,
    ->   FULLTEXT (title,body)
    -> ) ENGINE=MyISAM;
Query OK, 0 rows affected (0.00 sec)

mysql> INSERT INTO articles (title,body) VALUES
    -> ('MySQL Tutorial','DBMS stands for DataBase ...'),
    -> ('How To Use MySQL Well','After you went through a ...'),
    -> ('Optimizing MySQL','In this tutorial we will show ...'),
    -> ('1001 MySQL Tricks','1\. Never run mysqld as root. 2\. ...'),
    -> ('MySQL vs. YourSQL','In the following database comparison ...'),
    -> ('MySQL Security','When configured properly, MySQL ...');
Query OK, 6 rows affected (0.00 sec)

mysql> SELECT id, MATCH (title,body) AGAINST ('Tutorial')
    -> FROM articles;
+----+-----------------------------------------+
| id | MATCH (title,body) AGAINST ('Tutorial') |
+----+-----------------------------------------+
|  1 |                        0.65545833110809 |
|  2 |                                       0 |
|  3 |                        0.66266459226608 |
|  4 |                                       0 |
|  5 |                                       0 |
|  6 |                                       0 |
+----+-----------------------------------------+
6 rows in set (0.00 sec) 
```

这将根据最佳匹配对结果进行排名。

您可以很好地使用它从数据库中获取一行，然后使用它来查找最佳匹配的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:43:52.783

这只是我在黑暗中戳，但你可以有多个布尔值。

```
runFaster=true;
loseWeight=true;
specificDistance=true; //Do they have a specific distance in mind? 
```

和一些定量值：

```
weightLoss=3; //lbs
speedIncrease=1 //km/h
runDistance=7 //miles 
```

类似的东西？

# asp.net - ASP.NET [ScriptIgnore] 不适用于相关对象

> ID：12023048
> 
> 赞同：2
> 
> 时间：2012-08-18T23:30:09.957
> 
> 标签：asp.net, asp.net-mvc, entity-framework

[ScriptIgnore] 属性对我来说在被序列化的直接对象上工作得很好，但是如果我把它放在相关对象的属性上（从直接对象上的属性引用），它不适用吗？

即Json（用户）

IE

```
class user {
 Badges badges
}

class Badge {

[ScriptIgnore]
SomeObject obj; //Causes circular reference error because scriptignore doesn't apply
} 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:14:34.023

> 有没有办法解决这个问题？

我建议您使用仅公开您需要的属性并将视图模型传递给 Json 方法的视图模型。

如果您不想遵循我推荐的视图模型方法，那么该`[ScriptIgnore]`属性也应该适合您。

例子：

```
using System;
using System.Collections.Generic;
using System.Web.Script.Serialization;

public class User 
{
    public IEnumerable<Badge> Badges { get; set; }
}

public class Badge 
{
    [ScriptIgnore]
    public User User { get; set; }
}

public class Program
{
    static void Main()
    {
        var user = new User();
        var badge = new Badge { User = user };
        user.Badges = new[] { badge };

        var serializer = new JavaScriptSerializer();
        Console.WriteLine(serializer.Serialize(user));
    }
} 
```

如果从类的属性中删除该属性`[ScriptIgnore]`，则JSON 序列化将由于循环引用错误而失败。`User``Badge`

# transformation - 旋转变换并保持在范围内

> ID：12023049
> 
> 赞同：0
> 
> 时间：2012-08-18T23:30:43.547
> 
> 标签：transformation

我在 Java 中有一个转换：

```
 AffineTransform transform = new AffineTransform();
    transform.translate(x, y);
    transform.rotate(Math.toRadians(rotation));
    transform.translate(-x, -y); 
```

我在组成一个矩形的四个点上使用它。变换按预期围绕原点 (x, y) 旋转，但我希望最左边的点保持在原点 x 的位置，而最顶端的点保持在原点 y 的位置。

任何想法如何修改转换以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T19:38:09.557

我通过搜索所有点来解决这个问题，找到最左边的点和最上面的点，然后用这些坐标偏移变换中的所有点。虽然这真的很混乱，所以如果有人碰巧有更好的解决方案，我会全力以赴。

# c++ - IO 完成端口 - 发送还是接收？

> ID：12023052
> 
> 赞同：2
> 
> 时间：2012-08-18T23:30:51.153
> 
> 标签：c++, winsock, io-completion-ports

如果我编写了一个使用 IO Completion Ports 使用非阻塞套接字进行多路复用的程序，那么当 getQueuedCompletionStatus 返回时，我怎么知道在套接字上执行的函数是 send 还是 recv 呢？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T08:24:56.643

您正在接收指向用于该操作的 OVERLAPPED 结构的指针。只需制作另一个包含 OVERLAPPED 结构的结构，因此当您在完成状态中获得 OVERLAPPED 时，您可以将其转换为您的结构：

```
struct MyOverlapped
{
    OVERLAPPED SystemOverlapped;
    int MyStuff;
    void* MoreStuffForMe;
}; 
```

显然，您只需将收到的 OVERLAPPED* 转换为 MyOverlapped* 即可到达您的字段。您在字段中输入的内容取决于您。

编辑：C++ 继承也应该工作，所以你也可以这样做

```
 struct MyOverlapped : public OVERLAPPED
 {
     ...
 }; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T00:07:19.003

哦，我不知道。在初始化 ReadFileEx、WriteFileEx 调用中传入的缓冲区结构中放置一个布尔值。那样的东西...

# php - php将多个值从选择列表传递到sql

> ID：12023053
> 
> 赞同：1
> 
> 时间：2012-08-18T23:31:15.177
> 
> 标签：php, mysql, sql

我有一个带有多个选择选项的选择列表，我需要将多个值传递给 php 中的 sql 语句。

选择列表示例

```
<select name="site_name" size="10" multiple="multiple">
              <option selected="selected">Select ...</option>
              <option>UV</option>
              <option>US</option>
              <option>PI</option>
</select> 
```

这应该将 UV or 和 US or 和 PI 传递给 sql 语句示例

```
$sql = "SELECT Web_Page_Name FROM sites where Web_Page_Name =" $site_name[] ; 
```

前一个是不正确的，我正在寻求您的帮助以了解正确的 sql 语句来传递多个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T23:33:13.257

可以使用[`IN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)关键字构造 sql 语句：

```
SELECT Web_Page_Name FROM sites where Web_Page_Name IN ('UV', 'US', 'PI'); 
```

作为旁注，请注意[SQL 注入漏洞](https://www.owasp.org/index.php/Top_10_2010-A1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:58:17.557

我已经实现它如下

1-我已将选择列表代码更改为以下内容：

```
<select name="site_name[]" size="10" multiple="multiple">
              <option selected="selected">Select ...</option>
              <option>UV</option>
              <option>US</option>
              <option>PI</option>
</select> 
```

2-第二页中的sql语句如下

```
$sql = "SELECT * FROM sites WHERE Web_Page_Name IN ('"
. implode("', '", $_POST['site_name'])
. "')"; 
```

这对我来说很好用

# java - java - 在非同步块中等待并通知

> ID：12023056
> 
> 赞同：0
> 
> 时间：2012-08-18T23:31:42.130
> 
> 标签：java, wait, notify

抱歉我的格式不好。我正在使用记事本编写程序。

这是一个工作代码。我唯一的问题是，我已经读过通知和等待必须在同步块中使用。但是，在以下示例中，在同步块中未使用等待和通知，并且仍然没有引发错误。

```
class counthrd implements Runnable {

    Thread thrd;
    String x;
    counthrd cnt1;

    counthrd() {
    }
    boolean suspended;
    boolean stopped;

    counthrd(String s, counthrd cnt1) {
        thrd = new Thread(this, s);
        this.cnt1 = cnt1;
        thrd.start();
        x = s;
    }

    public void run() {

        try {
            System.out.println("Starting " + thrd.currentThread().getName());
            for (int i = 1; i < 100; i++) {
                System.out.print(i + "  ");
                if ((i % 10) == 0) {
                    System.out.println();
                    Thread.sleep(500);
                }
//synchronized(cnt1){
                while (suspended) {
                    System.out.println("going to wait mode");
                    wait();
                    notify();
                }
//}
            }
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    synchronized void suspendme() {
        suspended = true;
        notify();
    }

    synchronized void resumeme() {
        suspended = false;
        notify();
    }
}

class counter {

    public static void main(String args[]) throws InterruptedException {
        counthrd cnt1 = new counthrd();
        counthrd cnthrd1 = new counthrd("thrd 1", cnt1);

        Thread.sleep(1000);
        System.out.println("going to wait mode");
        cnt1.suspendme();
        Thread.sleep(1000);
        System.out.println("resuming");
        cnt1.resumeme();
        Thread.sleep(1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T03:22:16.740

见[我的评论](https://stackoverflow.com/questions/12023056/java-wait-and-notify-in-a-non-synchronized-block#comment16045203_12023056)。由于`IllegalMonitorStateException`从不被抛出，我们知道它`wait`永远不会被调用。

请注意，您有两个实例`counthrd`...

```
counthrd cnt1 = new counthrd();
counthrd cnthrd1 = new counthrd("thrd 1", cnt1); 
```

`suspendme`查看您正在调用哪个实例`resumeme`？

```
Thread.sleep(1000);
System.out.println("going to wait mode");
cnt1.suspendme();
Thread.sleep(1000);
System.out.println("resuming");
cnt1.resumeme();
Thread.sleep(1000); 
```

`cnt1`使用您的无参数构造函数进行初始化，如下所示：

```
counthrd() {
} 
```

关键是它`cnt1`从来没有真正开始自己的线程。它从不做任何事情，真的。`cnthrd1`是启动线程的线程，如下所示：

```
counthrd(String s, counthrd cnt1) {
    thrd = new Thread(this, s);
    this.cnt1 = cnt1;
    thrd.start();
    x = s;
} 
```

需要说明的是，它是一个实例字段，而不是在and`suspended`之间共享。修改不会导致进入“等待模式”。永远不会被调用，因此永远不会抛出异常。`cnt1``cnthrd1``cnt1.suspended``cnthrd1``wait`

为了演示，请尝试调用`suspendme`and `resumeme`on `cnthrd1`，而不是... :-)

```
C:\dev\scrap>javac counter.java

C:\dev\scrap>java counter
Starting thrd 1
1  2  3  4  5  6  7  8  9  10
11  12  13  14  15  16  17  18  19  20
going to wait mode
going to wait mode
java.lang.IllegalMonitorStateException
resuming 
```

* * *

话虽如此，我想我会建议你做一些你的代码应该做的事情。

1.  声明`suspended`为`volatile`。*如果没有一些明确的内存排序保证，则* 无法保证何时或什`cnthrd1`至读取`suspended`.
2.  抛弃`cnt1`字段和实例；他们没有理由。也摆脱那个空的构造函数。
3.  `Thread.currentThread`是静态方法；您不需要为此使用实例。除此之外，这里`thrd`保证相等`Thread.currentThread`。
4.  `counthrd.x`等于`thrd.getName`; 为什么不直接使用`x`呢？
5.  使用一些更好、更具描述性的名称。例如，而不是`x`，为什么不`name`呢？而不是`thrd`，为什么不`thread`呢？而不是`counthrd`，为什么不`CountingThread`呢？
6.  你只需要打电话`notify`，`resumeme`不需要`suspendme`。（事实上​​，调用可能`notify`会`suspendme`意外触发`InterruptedException`if 线程正在休眠，即 when `(i % 10) == 0`）
7.  你也不想`notify`在`while (suspended)`循环中。现在，您的`while`循环实际上也可以变成`if`语句。
8.  如前所述，您需要`synchronized (this)`围绕调用`while`.
9.  避免在构造函数中执行真正的逻辑，例如`thrd.start()`.
10.  `suspend`不需要`synchronized`。`resume`也不需要`synchronized`是；只有`wait`and`notify`调用需要它。

您可以在[此处](http://ideone.com/LLjey)找到可以正常工作的示例的修改版本。

# java - 为什么我不能访问匿名内部类中被覆盖的公共字段？

> ID：12023057
> 
> 赞同：1
> 
> 时间：2012-08-18T23:31:55.293
> 
> 标签：java, inner-classes, scriptengine

我有一个我无法更改的课程，如下所示：

```
public class Foo {
    public final int ID=0;
    public int bar;
    public final Object baz=null;
} 
```

我想要一个匿名的内部类来覆盖`Foo`，例如：

```
public Foo newFoo(final int mID, final int mbar, final Object mbaz) {
    return new Foo(){
        public final int ID = mID;
        public int bar = mbar;
        public final Object baz = mbaz;
    };
} 
```

然后我有一个`javax.script.ScriptEngine`我想在 JS 中调用这样的东西：`newFoo(0,0,undefined)["ID"]`

我的问题是我得到这样的异常：

```
sun.org.mozilla.javascript.internal.WrappedException: Wrapped java.lang.IllegalAccessException: Class sun.org.mozilla.javascript.internal.JavaMembers can not access a member of class Baz$1 with modifiers "public final" (mod.js#9) in test.js at line number 9 
```

我不明白我怎么会在这里遇到问题：如果`newFoo`返回一个普通的 'ol `Foo`，这工作得很好，但是如果我尝试`Foo`用匿名内部类覆盖，我无法访问任何被覆盖的成员，即使他们是上市。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:06:59.913

我认为这个问题有两个方面。

您的 Java 代码在语法上是有效的（我认为），但几乎可以肯定它不会做您希望它做的事情。具体来说，匿名类中的声明不会替换类中的声明`Foo`。相反，匿名类的每个实例都会获得两组字段。中声明的方法`Foo`只会看到原始字段，而匿名类中声明的任何方法都会看到新字段。

如果您希望匿名子类中的字段具有不同的值，则：

*   它们不能是最终的，并且
*   他们需要被分配到不重新声明。

我不能真正建议解决此问题的最佳方法，但我认为您需要*首先*将`Foo`字段设为私有，并为它们提供 getter 和/或 setter。在设置器的情况下，您可以使用访问修饰符来允许匿名子类设置字段，但不能使用不相关的代码。

底线是您**不能** *覆盖*Java 中的字段。您的代码所做的不是覆盖，而是*隐藏*字段。

* * *

另一方面是包装的异常来自 Javascript 引擎。我认为问题在于匿名类是隐式私有的，因此您的 Javascript 片段正试图访问私有类上的字段。当 Javascript 引擎尝试执行此操作时（我希望使用 Java 反射），它会收到运行时异常。

这里唯一不幸的是，异常消息没有说明*为什么*它不能访问该成员，但是您的 Java 代码足够“奇怪”，这并不让我感到惊讶。

作为一种解决方法，我建议用非嵌套类替换匿名类。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-18T23:48:52.543

你没有这样的课程：

```
public class Foo {
    public final int ID=0;
    public int bar;
    public final Object baz;
} 
```

因为那不会编译（不能声明 baz）。

# c++ - wxTreeListCtrl 的链接器错误

> ID：12023058
> 
> 赞同：0
> 
> 时间：2012-08-18T23:31:57.633
> 
> 标签：c++, wxwidgets

使用 wxWidgets 开发应用程序，即使我的库也很新，并且需要一些帮助来解决这些链接器问题；

我先尝试了谷歌，但没有运气。

```
1>mainwindow.obj : error LNK2001: unresolved external symbol "char const * const wxTreeListCtrlNameStr" (?wxTreeListCtrlNameStr@@3QBDB)
1>mainwindow.obj : error LNK2001: unresolved external symbol "protected: virtual class wxEventHashTable & __thiscall wxTreeListCtrl::GetEventHashTable(void)const " (?GetEventHashTable@wxTreeListCtrl@@MBEAAVwxEventHashTable@@XZ)
1>mainwindow.obj : error LNK2001: unresolved external symbol "protected: virtual struct wxEventTable const * __thiscall wxTreeListCtrl::GetEventTable(void)const " (?GetEventTable@wxTreeListCtrl@@MBEPBUwxEventTable@@XZ)
1>mainwindow.obj : error LNK2001: unresolved external symbol "private: int __thiscall wxTreeListCtrl::DoInsertColumn(class wxString const &,int,int,enum wxAlignment,int)" (?DoInsertColumn@wxTreeListCtrl@@AAEHABVwxString@@HHW4wxAlignment@@H@Z)
1>mainwindow.obj : error LNK2001: unresolved external symbol "private: virtual class wxWindowList __thiscall wxTreeListCtrl::GetCompositeWindowParts(void)const " (?GetCompositeWindowParts@wxTreeListCtrl@@EBE?AVwxWindowList@@XZ)
1>mainwindow.obj : error LNK2001: unresolved external symbol "private: void __thiscall wxTreeListCtrl::Init(void)" (?Init@wxTreeListCtrl@@AAEXXZ)
1>mainwindow.obj : error LNK2001: unresolved external symbol "public: virtual __thiscall wxTreeListCtrl::~wxTreeListCtrl(void)" (??1wxTreeListCtrl@@UAE@XZ)
1>mainwindow.obj : error LNK2001: unresolved external symbol "public: bool __thiscall wxTreeListCtrl::Create(class wxWindow *,int,class wxPoint const &,class wxSize const &,long,class wxString const &)" (?Create@wxTreeListCtrl@@QAE_NPAVwxWindow@@HABVwxPoint@@ABVwxSize@@JABVwxString@@@Z) 
```

我试图将其格式化为代码，但在这个网站上很难做到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:50:02.887

您需要在链接到的 wx 库列表中包含高级库。

这在[http://docs.wxwidgets.org/trunk/classwx_tree_list_ctrl.html的 wxTreeListCtrl 文档中有所提及](http://docs.wxwidgets.org/trunk/classwx_tree_list_ctrl.html)

每个 wxwidgets 类的文档都提到了在使用该类时需要链接哪个库。

![在此处输入图像描述](../Images/e47a7e2c103ed51e8b8e2ca5c92c75eb.png)

# c# - 在属性和sql相关方法方面的类继承最佳实践

> ID：12023067
> 
> 赞同：-2
> 
> 时间：2012-08-18T23:33:41.097
> 
> 标签：c#, asp.net, .net, sql-server

```
#region Properties
public int ID
{
    get;
    set;
}
public string Name
{
    get;
    set;
}
public string MetaTitle
{
    get;
    set;
}
public string MetaDescription
{
    get;
    set;
}
public virtual int WebsiteID
{
    get;
    set;    
}
public DateTime TimeStamp
{
    get;
    set;
}
#endregion Properties

#region Methods 
public void Insert()
{
    string sqlString = "INSERT INTO Pages ([name], [value], [meta_title], [meta_description], [website_id]) " +
        "VALUES (@Name, @Image, @Description, @MetaTitle, @MetaDescription, @WebsiteID);";
    SqlConnection sqlConnection =
        new SqlConnection(WebConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
    using (SqlCommand sqlCommand = new SqlCommand(sqlString, sqlConnection))
    {
        sqlCommand.Parameters.AddWithValue("@Name", this.Name);
        sqlCommand.Parameters.AddWithValue("@Image", this.Image);
        sqlCommand.Parameters.AddWithValue("@Description", this.Description);
        sqlCommand.Parameters.AddWithValue("@MetaTitle", this.MetaTitle);
        sqlCommand.Parameters.AddWithValue("@MetaDescription", this.MetaDescription);
        sqlCommand.Parameters.AddWithValue("@WebsiteID", this.WebsiteID);
        try
        {
            sqlConnection.Open();
            sqlCommand.ExecuteNonQuery();
            sqlConnection.Close();
            sqlConnection.Dispose();
        }
        catch (SqlException e)
        {
        }
    }
} 
```

**两个问题：**

我有另一个类`Section`，它将派生自上面称为 Page 的类。但是，`Section`不会有 WebsiteID，而是会有 PageID。它们都是整数，但我如何更改属性名称是派生类。

第二件事是，我应该使用另一种方法`override`吗？如果没有，实现这些要求的最佳方式是什么？`Insert()``sqlString`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:46:33.347

我有另一个名为 Section 的类，它将派生自上面名为 Page 的类。但是，Section 不会有 WebsiteID，而是会有 PageID。它们都是整数，但我如何更改属性名称是派生类。

错误是您的页面包含部分对象，因此您不必从页面派生部分：页面必须具有部分的集合

```
class Page
{
     private Section[] sections;
     public Section[] Sections {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:48:50.230

我认为你的继承权可能有点偏离。“部分”不是“页面”，是吗？

为什么不使用`Content`具有以下属性的基类，称为或类似的东西：

```
public int ID { get; set; }
public string Name { get; set; }
public string MetaTitle { get; set; }
public string MetaDescription { get; set; }
public DateTime TimeStamp { get; set; } 
```

并`Page`扩展它添加`WebsiteID`和部分添加`PageID`.

但我也建议将实体模型与数据访问分开。使用 Entity Framework 或 NHibernate 之类的东西来为您处理持久性将使您不必手动编写该代码。

That way you could have a more connected model, where `Section` actually references a `Page` entity, and not handle IDs manually. Also `Page` could contain `Sections` in the same manner (like a `List<Section>`), and you'd possibly have a cleaner model.

# python - AppEngine 功能在本地开发服务器上工作，但在实时网络服务器上不工作

> ID：12023076
> 
> 赞同：2
> 
> 时间：2012-08-18T23:36:15.323
> 
> 标签：python, google-app-engine

我已经建立了一个 AppEngine 帐户来托管一个基于 WorldKit 的地图项目[http://worldkit.org/](http://worldkit.org/) 我已经*差不多了*工作，但我无法工作的最后一件事是地图注释功能，这是我希望实现的很大一部分。起初，我认为这可能是因为 WorldKit 下载附带了一些 PHP 脚本，而且我知道 GAE 不托管 PHP，但我一直在系统地从默认包中删除部分，直到我离开只有 .html、.css、.xml、.js、图像文件和一个用作主应用程序的 .swf。奇怪的是，注释可以使用本地开发服务器完美地工作，但是当我实时部署它时，地图显示正常，只是没有注释。注释是通过 GeoRSS 提要提供给应用程序的，目前我将其作为静态的只读文件提供，但我可能会看到将来对其进行实时更新。这是我的 app.yaml

```
application: parallelworldsmaps
version: 1
runtime: python
api_version: 1

default_expiration: "30d"

handlers:

- url: /(.*\.css)
  mime_type: text/css
  static_files: static/\1
  upload: static/(.*\.css)

- url: /(.*\.html)
  mime_type: text/html
  static_files: static/\1
  upload: static/(.*\.html)
  expiration: "1h"

- url: /(.*\.ico)
  mime_type: image/x-icon
  static_files: static/\1
  upload: static/(.*\.ico)
  expiration: "7d"

- url: /(.*\.js)
  mime_type: text/javascript
  static_files: static/\1
  upload: static/(.*\.js)

- url: /(.*\.json)
  mime_type: application/json
  static_files: static/\1
  upload: static/(.*\.json)
  expiration: "1h"

- url: /(.*\.m4v)
  mime_type: video/m4v
  static_files: static/\1
  upload: static/(.*\.m4v)

- url: /(.*\.mp4)
  mime_type: video/mp4
  static_files: static/\1
  upload: static/(.*\.mp4)

- url: /(.*\.(ogg|oga))
  mime_type: audio/ogg
  static_files: static/\1
  upload: static/(.*\.(ogg|oga))

- url: /(.*\.ogv)
  mime_type: video/ogg
  static_files: static/\1
  upload: static/(.*\.ogv)

- url: /(.*\.otf)
  mime_type: font/opentype
  static_files: static/\1
  upload: static/(.*\.otf)

- url: /(.*\.rss)
  mime_type: application/rss+xml
  static_files: static/\1
  upload: static/(.*\.rss)
  expiration: "1h"

- url: /(.*\.(svg|svgz))
  mime_type: images/svg+xml
  static_files: static/\1
  upload: static/(.*\.(svg|svgz))

- url: /(.*\.swf)
  mime_type: application/x-shockwave-flash
  static_files: static/\1
  upload: static/(.*\.swf)

- url: /(.*\.ttf)
  mime_type: font/truetype
  static_files: static/\1
  upload: static/(.*\.ttf)

- url: /(.*\.txt)
  mime_type: text/plain
  static_files: static/\1
  upload: static/(.*\.txt)

- url: /(.*\.webm)
  mime_type: video/webm
  static_files: static/\1
  upload: static/(.*\.webm)

- url: /(.*\.xml)
  mime_type: application/xml
  static_files: static/\1
  upload: static/(.*\.xml)
  expiration: "1h"

# image files
- url: /(.*\.(bmp|gif|ico|jpeg|jpg|png))
  static_files: static/\1
  upload: static/(.*\.(bmp|gif|ico|jpeg|jpg|png))

# audio files
- url: /(.*\.(mid|midi|mp3|wav))
  static_files: static/\1
  upload: static/(.*\.(mid|midi|mp3|wav))  

# windows files
- url: /(.*\.(doc|exe|ppt|rtf|xls))
  static_files: static/\1
  upload: static/(.*\.(doc|exe|ppt|rtf|xls))

# compressed files
- url: /(.*\.(bz2|gz|rar|tar|tgz|zip))
  static_files: static/\1
  upload: static/(.*\.(bz2|gz|rar|tar|tgz|zip))

# index files
- url: /(.+)/
  static_files: static/\1/index.html
  upload: static/(.+)/index.html
  expiration: "15m"

- url: /(.+)
  static_files: static/\1/index.html
  upload: static/(.+)/index.html
  expiration: "15m"

# site root
- url: /
  static_files: static/index.html
  upload: static/index.html
  expiration: "15m"

- url: /
  static_dir: static 
```

我所有的静态文件都包含在“静态”目录的子文件夹中。为了更好地了解应用程序的工作原理，.swf 对象访问用于渲染地图的图像文件。然后它访问一个 rss 提要以呈现注释，这些注释是我在静态 xml 文件中创建的，并放置在与 .swf 相同的目录中。RSS 提要包含坐标、标题、描述和用作地图标记的图标。所有地图图块都正确显示，但没有一个注释可以正确显示。根据在本地重现此问题的尝试，这很可能意味着 .swf 无法访问位于同一文件夹中的 .xml 文件。我不确定我可以提供哪些其他信息，但可能是文件没有正确上传，或者是否有奇怪的权限阻止了事情？它'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:23:26.570

[这是一篇关于如何使用和阅读 GAE 日志文件](https://developers.google.com/appengine/articles/logging)的技术文章的链接——当我们从开发转移到生产时，我们也遇到了神秘的权限问题，通过使用详细日志记录，我们能够解决这个问题。

# r - 选择某些行名称

> ID：12023083
> 
> 赞同：1
> 
> 时间：2012-08-18T23:37:53.423
> 
> 标签：r, row, names

有没有办法从数据框中选择一列中名称没有单词的所有行？

例子：

从这个数据框

```
Organism    Value
Boa (sick)  3
Cat         1
Cat (sick)  2
Wolf        2
Wolf (sick) 8
Crow        4 
```

我想要`(sick)`名称中没有的行：

```
Organism    Value
Cat         1
Wolf        2
Crow        4 
```

我知道数据格式错误，最好有第三列“健康”，但我必须处理我拥有的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T23:49:00.560

```
d <- data.frame(Organism=c("Boa (sick)", "Cat", "Cat (sick)", "Wolf", "Wolf (sick)", "Crow"), Value=c(3, 1, 2, 2, 8, 4), stringsAsFactors=FALSE)

d[!grepl(pattern="(sick)", x=d$Organism, fixed=TRUE), ]
#  Organism Value
#2      Cat     1
#4     Wolf     2
#6     Crow     4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T23:47:17.363

尝试

```
df<-data.frame(Organism=c('Boa (sick)','Cat','Cat (sick)','Wolf','Wolf (sick)','Crow'),Value=c(3,1,2,2,8,4))
expel<-grep('(sick)',df$Organism)
if(length(expel)>0){
  df1<-df[-expel,]
}
df1
#  Organism Value
#2      Cat     1
#4     Wolf     2
#6     Crow     4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T03:23:31.940

另一个非常相似的选择：

```
subset(d, grepl("(sick)", Organism, fixed=TRUE)) 
```

# regex - 用一个句点替换字符串中的多个句点

> ID：12023088
> 
> 赞同：4
> 
> 时间：2012-08-18T23:39:25.363
> 
> 标签：regex, autohotkey

我试图用一个周期替换任何两个或多个周期的组。我怀疑涉及 + 运算符，但我只有悲伤试图使用它来表达......所以我想作为一个实验，我会尝试用一个句点替换 3 个句点。下面的废话是我想出来的，当然不行。

```
OutNameNoExt:= RegExReplace(OutNameNoExt,"\.\.\." , ".") 
```

或者更好的是，我可以改变这个现有的表达吗

OutNameNoExt:= RegExReplace(OutNameNoExt,"[^a-zA-Z0=9_-]" , ".")

这样它就不会连续产生超过一个时期？

帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-18T23:46:54.273

```
OutNameNoExt:= RegExReplace(OutNameNoExt,"\.{2,}" , ".") 
```

或者，如果不允许使用`{n,m}`（即，至少`n`，但不超过`m`次）语法，您可以改用以下语法：

```
OutNameNoExt:= RegExReplace(OutNameNoExt,"\.\.+" , ".") 
```

或者，您也可以将现有表达式更改为以下表达式，以便它不会连续产生多个句点：

```
OutNameNoExt:= RegExReplace(OutNameNoExt,"[^a-zA-Z0=9_-]+" , ".") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-17T07:32:55.887

对于 Java，以下正则表达式正在用单点替换多个点：

```
String str = "-.-..-...-.-.--..-k....k...k..k.k-.-";
str.replaceAll("\\.\\.+", ".") 
```

输出：

```
-.-.-.-.-.--.-k.k.k.k.k-.- 
```

# events - jQuery我如何选择多个元素

> ID：12023091
> 
> 赞同：0
> 
> 时间：2012-08-18T23:40:28.677
> 
> 标签：events, jquery-selectors, mouseenter, mouseleave

我是 jQuery 新手，我想弄清楚如何为我要创建的导航栏选择多个元素。我想让它检查用户的鼠标是在导航栏中的项目上还是在下拉菜单上（否则下拉菜单会消失）。我尝试使用： `$('#nav_item_1').mouseenter(function(){`
`//make the drop down menu visible and change nav_item background here`
`});`
`

```
$('#nav_item_1,#dropdown').mouseleave({
    //revert everything back to normal
}); 
```

但是当我尝试将鼠标从导航栏中的项目移动到下拉菜单时，它会将一切恢复正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:13:30.843

第二段代码使得当您离开#nav_item_1 或#dropdown 时，一切都将被还原。因此，当您离开#nav_item_1 转到#dropdown 时，该事件将触发。

如果当前鼠标目标包含下拉菜单或 nav_item，您可以检查每个鼠标移动：

```
$("#nav_item_1").mouseenter(function () {
  // make menu visible etc
}

$(document).mousemove(function (e) { // note the e parameter
  if ($(e.target).has("#dropdown,#nav_item_1").length !== 0) {
    // revert
  }
} 
```

这需要两个元素彼此非常接近才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:59:14.487

您遇到的问题是，当您离开导航栏项目时`.mouseleave`，会立即触发隐藏`#dropdown`它。

我在这里要做的是在mouseleave事件上设置一个`nav_item`大约半秒或更短的时间来隐藏下拉菜单。这将允许用户在导航栏之外设置秒数，以便他们可以将鼠标悬停在下拉菜单上。用户打开后，`#dropdown`我将清除超时，以防止下拉隐藏的正常行为。

你会如何用代码来做到这一点？
`$('#nav_item_1').mouseleave(function() {
/* set your time out here to return everything to normal. Because we want to allow the dropdown to stay visible for a fraction of time required to move the cursor to the dropdown.*/
});`

接着，
`$('#dropdown').mouseenter(function() {
// clear the timer to prevent normal behavior (keeping the dropdown visible).
});`

看看这个链接：[http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

关于您关于选择多个项目的原始问题。你正在正确地做这件事。但正如我上面解释的那样，您的代码没有`mouseleave`达到`#dropdown`.

# css - 如何让这个三级菜单的子菜单在其父级下对齐？

> ID：12023093
> 
> 赞同：3
> 
> 时间：2012-08-18T23:41:19.393
> 
> 标签：css, responsive-design

我很难弄清楚这个，这是一个我正在更改的菜单，以使其在触摸设备上更有用。因此，我需要 CSS 的第一部分保持正常屏幕的状态，然后必须用触摸样式覆盖它。But I am trying to position the sub menu of services below services when services is selected. 见草图。我创建了一个小提琴来展示我的问题。

**我的主要问题**，以及解决它的方法是，我似乎无法让 ul.level_2 将自己定位在选定的 li 下，无论是绝对位置还是浮动和清除。有任何想法吗？

![预期布局的图片](../Images/49b94480d51dd794ad573393ed1dd0c6.png)

[JS小提琴的问题](http://jsfiddle.net/3EKAq/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:37:16.310

我稍微简化了您的示例，以向您展示实现此目标所需的最少 css 是什么。[http://jsfiddle.net/3EKAq/10/](http://jsfiddle.net/3EKAq/10/)

子菜单的定位应该相当容易，它几乎是自动的，你可以看到不需要定位。

我认为关键在于清除要出现在左侧的菜单元素，在这种情况下是第 4 个。您也可以考虑使用`:n-th child`css3 选择器，但为了跨浏览器兼容性，我不会这样做。

希望这能让你朝着正确的方向前进。如果您需要更多帮助，请随时告诉我们！

# rest - 如何检查 JBoss 部署程序是否正常工作

> ID：12023094
> 
> 赞同：0
> 
> 时间：2012-08-18T23:41:59.483
> 
> 标签：rest, jboss, seam, resteasy, jboss6.x

我正在尝试让 resteasy 在 JBoss AS6 Final（SEAM 2 应用程序）上工作，但我似乎无法让最基本的示例正常工作，据我所知，resteasy 应该准备好了，我从[这里](http://www.mkyong.com/webservices/jax-rs/resteasy-hello-world-example/)尝试了以下示例但是url 只会导致 404 错误而没有响应

```
package uk.co.rest.test;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Application;

public class Library extends Application {

    @GET
    @Path("/books")
    public String getBooks() {
        System.out.println("Check");
        return "done";
    }

} 
```

将以下内容添加到我的 web.xml

```
<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>/rest</param-value>
</context-param>

<servlet>
    <servlet-name>resteasy-servlet</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>uk.co.rest.test.Library</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>resteasy-servlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

我觉得与 JBoss 捆绑的 resteasy.deployer 没有完成它的工作，但我不确定如何调试它

任何帮助都会很棒，我会把我的头发拉到这个上面！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:07:16.617

必须配置 RESTEasy 才能作为服务公开。您可以直接执行此操作，也可以通过 Seam 的资源 servlet 执行此操作。

要直接使用 RESTEasy，我发现最简单的方法是将其配置为 Servlet 过滤器。`web.xml`除了在[http://docs.jboss.org/resteasy/docs/2.3.0.GA/userguide/html/Installation_Configuration.html#filter](http://docs.jboss.org/resteasy/docs/2.3.0.GA/userguide/html/Installation_Configuration.html#filter)中记录的那样将过滤器添加到您的过滤器之外，几乎没有什么可做的。

然而，当使用 Seam 时，这是不必要的，因为 Seam 能够通过其资源 servlet 非常简单地部署 RESTEasy 服务（记录在[http://docs.jboss.org/seam/2.2.0.GA/reference/en-US/html /webservices.html#d0e22093](http://docs.jboss.org/seam/2.2.0.GA/reference/en-US/html/webservices.html#d0e22093)）。您首先像这样声明 RESTEasy 的应用程序组件：

```
<resteasy:application resource-path-prefix="/rest" /> 
```

并创建将自动部署到配置路径中的提供程序，例如：

```
@Name("libraryService")
@Path("/library")
public class Library implements Serializable {

    @In(create=true) private transient BookHome bookHome;

    @GET @Path("/{book}")
    @Produces("text/plain")
    public String getBooks(@PathParam("book") String id) {
        bookHome.setId(id);
        return bookHome.getInstance().getTitle();
    }
} 
```

然后，您可以通过以下方式访问 RESTEasy 服务：

```
http://localhost:8080/yourapp/seam/resource/rest/library/1 
```

采用 Seam 方式的优点主要是易于使用。您确实需要包含一个额外的罐子：`jboss-seam-resteasy.jar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:19:44.523

你好像误解了角色的作用`javax.ws.rs.Application`。您的`Library`类不必`javax.ws.rs.Application`为了公开- 方法而扩展`getBooks()`。

创建一个扩展类`javax.ws.rs.Application`。覆盖`getSingletons()`-methods 并返回一组具有您希望公开的方法的实例：

```
public class MyApplication extends javax.ws.rs.Application {
    @Override public Set<Object> getSingletons(){
        return Collections.<Object>singleton(new Library());
    }
} 
```

在您的`web.xml`中，更改`javax.ws.rs.Application`init-param，使其指向 `MyApplication`该类。

# iphone - 如何将参数从一个 ViewController 传递到另一个？

> ID：12023095
> 
> 赞同：-3
> 
> 时间：2012-08-18T23:42:04.773
> 
> 标签：iphone, objective-c, ios, ios5

如何将参数从一个 ViewController 传递到另一个（我在情节提要中定义了 ViewControllers）？Android中是否有类似`putExtra`的东西，或者任何Bundle来放置值？我需要从第一个 ViewController 读取一些值并传递给另一个将发出 POST 请求的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T01:39:09.110

`prepareForSegue:sender:`是使用情节提要时将数据从一个视图控制器传递到另一个视图控制器的首选方式。检查标识符以确保它是您感兴趣的 segue，获取指向目标视图控制器的指针，并设置您想要的任何属性。它可能看起来像这样：

```
- (void) prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    if( [[segue identifier] isEqualToString:@"foo"] ) {
        FooViewController* fooView = segue.destinationViewController;
        fooView.someProperty = self.someProperty;
    }
} 
```

[去年 WWDC](https://developer.apple.com/videos/wwdc/2011/#introducing-interface-builder-storyboarding)的Storyboard 会议很值得一看，如果您还没有看过的话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T00:11:57.823

这很简单。您需要在第二个视图控制器中创建一个属性，并将值从第一个视图控制器传递给这些属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T19:57:57.127

除了其他方式，您可以使用协议和委托将对象从一个控制器传递到另一个控制器。假设您需要将对象 resposeData 从控制器（类）A 传递到 B，以下是您可以执行的步骤：

1.  声明一个协议，例如。

    @protocol NetworkOperationDelegate

    @必需的

    -(void) operationCompleted:(id) responseData tag:(id) tag;

    -(void) operationFailed:(id) responseData tag:(id) tag;

    @结尾

2.  在类 A 中声明一个 Id 类型的属性，它指向你的委托类

    `@property (nonatomic, retain) id < NetworkOperationDelegate > operationDelegate;`

3.  假设你在你的自定义初始化器中初始化 self.delegate：

    -(id) initWithRequest:(NSURLRequest *)request operationDelegate:(id) delegate tag:(id) tag

    ```
     {

     self = [super init];
      if (self) {
       self.request = request;
       self.tag = tag;
       self.operationDelegate = delegate;
     }
     return self; 
    ```

    }

4.  然后在您想在 A 类中定义时调用您的委托上的方法：假设 A 类何时收到数据，而您希望 B 类处理收到的数据

5.  确保在 B 类 @interface B 中实现协议方法：NSObject @end

    ```
    @implementation B

    -(void) operationCompleted:(id) responseData tag:(id) tag
    {

    // imlement code 
    ```

    }

    -(void) operationFailed:(id) responseData tag:(id) tag {

    ```
     // imlement code 
    ```

    }

    ```
    @end 
    ```

希望这可以帮助！！！

# wcf - netHttpBinding 从 IIS 8 Final (Windows 8 RTM) 中删除？

> ID：12023099
> 
> 赞同：0
> 
> 时间：2012-08-18T23:43:01.890
> 
> 标签：wcf, iis, windows-8, wcf-binding

我有几个网站，我有自动配置，并通过脚本进行部署（所以我确信我设置的一切都与我在 Release Preview 中的一样）。

安装 IIS 并部署我的网站后，我收到此错误：

解析器错误消息：找不到配置绑定扩展“system.serviceModel/bindings/netHttpBinding”。验证此绑定扩展是否已在 system.serviceModel/extensions/bindingExtensions 中正确注册并且拼写正确。

我尝试在 3 台不同的 RTM 机器上安装，但在网上找不到任何关于此的内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T23:55:06.573

尝试将 httpRuntime-Element 添加到您的 web.config。这可以解决您的问题。

祝福，弗雷德

```
 <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web> 
```

# objective-c - 如何从 Storyboard 访问 ViewController 并向其添加一些代码？

> ID：12023103
> 
> 赞同：-1
> 
> 时间：2012-08-18T23:45:16.973
> 
> 标签：objective-c, ios, ios5

我在 Storyboard 中创建了几个 ViewController 并管理了 segue。如何访问这些 ViewController 并向它们添加一些代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T23:50:01.033

如果您是 Xcode、Objective C 和 iOS 的新手（但已经知道如何编码），那么我建议您遵循几个教程，因为您的所有问题都会得到解答：[Ray Wenderlich - iOS by tutorials](http://www.raywenderlich.com)

# database - 从数据库中获取名称并限制

> ID：12023104
> 
> 赞同：0
> 
> 时间：2012-08-18T23:45:18.893
> 
> 标签：database

我需要在我的站点中显示用户名列表。

PHP代码：

```
$sql = $db->query("SELECT name FROM dle_users WHERE user_group=1"); 
```

问题是，我无法显示 10 或 20 个名称，使用此代码我只能在列表中显示 1 个名称。

第二个问题是，如果我想从 2 或 3 个用户组中获取名称，我该怎么做？在该代码中，我的用户组是：

```
user_group=1 
```

我如何显示第 1 组和第 2 组或第 3 组的用户？

我的最后一个问题是，我的数据库中有 2 个表，在“dle_users”中有名称，在其他“dle_phone”中有电话号码。现在我如何从“user_group”中的第 1 组中选择和显示用户姓名和电话号码以及“user_phone”中的电话号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:38:39.673

**你可以用一行代码什么都不显示**

> 使用此代码，我只能在列表中显示 1 个名称。

```
$sql = $db->query("SELECT name FROM dle_users WHERE user_group=1"); 
```

首先你告诉我们：

> 问题是，我无法显示 10 或 20 个名称，使用此代码**我只能**在列表中显示 1 个名称。

然后你在评论中问

> 我怎样才能只显示 10 个名字，我在 user_group 中有 200 个名字，我怎样才能 **只显示 10 个用户名**

现在怎么办 ？

您必须遍历对象 $sql。（仅限 10 个，设置 LIMIT 10）

```
if ($sql = $db->query("SELECT name FROM dle_users WHERE user_group=1 LIMIT 10")) {
        while($obj = $sql->fetch_object()){
            echo "name :".$obj->name."<br />";
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T23:52:51.047

我们需要澄清您问题中的某些内容“我无法显示 10 或 20 个名称，使用此代码我只能在列表中显示 1 个名称”是什么意思，因为此 sql 将获取属于 user_group=1 的所有名称，其次是根据那里的 user_group 获取每个主体，您可以通过按 user_group 分组来做到这一点

# javascript - 使用 jQuery 的 shortKeys 插件检测转义键

> ID：12023105
> 
> 赞同：1
> 
> 时间：2012-08-18T23:45:31.363
> 
> 标签：javascript, jquery, html

我在 JavaScript 中使用 shortKeys 设置了所有其他键，如下所示：

```
<script type="text/javascript" src="http://rikrikrik.com/js/jquery.shortkeys.js"></script>

$(document).shortkeys({
'U':       function () {
    $('#imginput').slideToggle(500);
    $("#textinput").slideUp(500);
    $("#sortPost").slideUp(500);
}}); 
```

现在我正在尝试设置转义键，但我不知道如何设置。

我试过：

```
$(document).shortkeys({
'Esc':       function () {
    $('#imginput').slideUp(500);
    $("#textinput").slideUp(500);
    $("#sortPost").slideUp(500);
    $('.help_info').fadeOut(500);
}}); 
```

我也试过：

```
e.keyCode == 27:       function () {
    $('#imginput').slideUp(500);
    $("#textinput").slideUp(500);
    $("#sortPost").slideUp(500);
    $('.help_info').fadeOut(500);
}}); 
```

当我按下转义键时，我将如何使这些事件发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:49:28.430

我不知道`shortkeys`，但使用标准`keyup`绑定你可以这样做：

```
$(document).keyup(function(e) {
    if (e.which == 27) {
        $('#imginput').slideUp(500);
        $("#textinput").slideUp(500);
        $("#sortPost").slideUp(500);
        $('.help_info').fadeOut(500);
    }
});​ 
```

如`event.which` [**文档**](http://api.jquery.com/event.which/)中所述：

> event.which 属性规范了 event.keyCode 和 event.charCode。建议观看 event.which 进行键盘按键输入。

# github - GitHub 图标不见了

> ID：12023109
> 
> 赞同：9
> 
> 时间：2012-08-18T23:46:41.737
> 
> 标签：github, icons

其他人的 GitHub 是否缺少图标？没有 JS 错误，从我`resources`在 Chrome 开发人员工具中看到的内容来看，没有 404 错误。

![](../Images/0144e381e61929bdca73919e2a4b00ca.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T18:23:14.993

这些图标是使用字体 - 'Octicons Regular' 完成的，因此由于某种原因不会为您加载。这一切都是用 CSS 完成的，所以不应该需要 js 来工作。有关详细信息，请参阅此页面：

[https://github.com/styleguide/css/7.0](https://github.com/styleguide/css/7.0)

也许尝试检查您没有禁用远程字体加载（我认为有一个命令行开关），或者缓存的此字体的错误版本，或其他字体问题 - 如果启用检查器，您可以检查已加载的内容并查看该框架的资源，应该有一个 Fonts 列表，其中列出了 Octicons 字体。您也可以尝试下载字体并在本地安装。

如果您无法加载其他字体，则可能是设置而不是此特定字体。

您可能可以在此处看到字体加载设置：

```
chrome://about 
```

我认为你需要的设置是

```
--enable-remote-fonts 
```

您可以从命令行运行以再次打开它们（现在默认打开）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T14:35:09.813

[这](http://code.google.com/p/chromium/issues/detail?id=120929)似乎是相关的。执行评论 13 中提供的步骤为我解决了这个问题：

```
$ atsutil databases -removeUser
$ atsutil server -shutdown
$ atsutil server -ping 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:18:25.037

如果你使用可以改变页面样式的插件，比如 Stylish。在自定义样式中改变字体系列，可能会导致这个问题。对不起我的英语。

# django - 确定 django 模板中的变量类型

> ID：12023112
> 
> 赞同：17
> 
> 时间：2012-08-18T23:47:05.327
> 
> 标签：django, django-templates

我有一个变量，我将它放入一个有时是日期，有时是字符串的表中。如果变量是日期，我想更改格式：

```
<td>{{ action.extra_column|date:"M d" }}</td> 
```

但如果它是一个字符串，我只想按原样显示它：

```
<td>{{ action.extra_column }}</td> 
```

如果我尝试格式化它并且它是一个字符串，我不会得到该变量的输出。

如何确定类型，以便可以根据类型调整渲染。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-19T18:21:10.783

`type()`您还可以将通用模板过滤器实现为与内置过滤器等效：

```
# app/templatetags/util.py
from django import template

register = template.Library()

@register.filter
def get_type(value):
    return type(value)

# template.html
{% load util %}
{% if extra_column|get_type == 'str' %}
    String
{% elif extra_column|get_type == 'datetime.date' %}
    Date
{% else %}
    Oh no!
{% endif %} 
```

不过，我认为 Ignacio 和 Dirk 是对的。难道你不能只有两个键（你说“数组”，但我假设你的意思是“字典”，因为项目有名称）叫做`date`和`detail`？

```
# views.py
...
actions = [{
    'some_property': 'some_value'
    'date': None,
    'detail': 'details'
},
{
    'some_property': 'some_value'
    'date': datetime.date.today(),
    'detail': None
}]
...

# template.html
{% for action in actions %}
<td>{% if action.date %}{{ action.date|date:"M d" }}{% endif %}{{ action.detail }}</td>
{% endfor %}

# output
<td>details</td>
<td>Aug 19</td> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T15:17:06.863

就像 Ignacio Vazquez-Abrams 在第一条评论中指出的那样，这并不是编写逻辑代码的好方法。我会确保您的变量具有某种类型。这可以通过添加到上下文中的附加变量或保存数据的对象以及描述数据类型的内容来解决。

如果您想坚持自己的逻辑，一种可能的方法是编写自己的模板过滤器（我们称之为`date_or_string`）。过滤器可以子类化内置`date`过滤器，格式参数是可选的。如果参数被传递，它就像普通`date`过滤器一样工作，没有参数它只是返回字符串。在更复杂的情况下，过滤器还可以进行一些类型检查。只是一个想法，我实际上不会将这种逻辑放入模板中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-09T07:45:53.550

我知道我在这方面落后了（三年），但我刚到这里想做类似的事情，并想出了我认为不错的解决方案。

只需向您的模型添加一个函数，`get_model_type`并让它返回您对每个模型的期望，如下所示：

```
class MyModelOne(models.Model):
  date_created = models.DateTimeField(auto_now_add=True)
  first_name = models.CharField(max_length=255)
  def get_model_type(self):
    return "my_model_one"

class MyModelTwo(models.Model):
  date_created = models.DateTimeField(auto_now_add=True)
  other_field = models.CharField(max_length=255)
  def get_model_type(self):
    return "my_model_two" 
```

然后在您的模板中，您可以轻松地调用该函数：

```
{% if model.get_model_type == 'my_model_one' %}
  <p>Model One</p>
{% elif model.get_model_type == 'my_model_two' %}
  <p>Model Two</p>
{% endif %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-20T12:01:45.160

聚会迟到了，但我遇到了这个问题。我寻求的解决方案是[duck-typing](https://en.wikipedia.org/wiki/Duck_typing)，所以：

```
{% if action.extra_column.year %}
  {{ action.extra_column|date:"M y" }}
{% else %}
  {{ action.extra_column }}
{% endif %} 
```

你能说这绝对不是正确的做法吗？大概。它会在不编写自己的模板过滤器并且需要维护更多代码的情况下完成工作吗？绝对地。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-24T14:35:47.803

你可以试试这个来识别 String 和 List 类型：

```
{%if v_1.0.1|length == 0%}
    <!--STR-->
    {{v_1}}
{%else%}     
     <!--List-->                                           
    {{v_1.0}}
{%endif%} 
```

# python - appengine 和应用程序之间的通信

> ID：12023114
> 
> 赞同：0
> 
> 时间：2012-08-18T23:47:08.470
> 
> 标签：python, google-app-engine, post, get

我正在开发一个当前使用 PHP 运行并在本地与 python 脚本通信的 Web 界面。

我正在将 web 端移动到 appengine，到目前为止在本地使用时运行良好，我目前正在通过 python 脚本处理的 get 请求从 appengine 应用程序与 python 应用程序进行通信。

问题是，显然运行 python 脚本的机器将在防火墙后面，我以前从未需要这样做，并且不确定如何最好地实现这一点。

到目前为止，我唯一的想法是让 python 脚本向 appengine 发送带有一些数据的 post 请求，然后作为响应，发回一些其他数据。唯一的问题是 Web 界面应该很快更新客户端。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:27:04.567

看看 ProtoRPC Python API：[https ://developers.google.com/appengine/docs/python/tools/protorpc/overview](https://developers.google.com/appengine/docs/python/tools/protorpc/overview)

尽管它仍被标记为实验性的，但它似乎是您尝试做的一个不错的框架 - 在应用程序之间来回发送消息。

既然您说您的本地应用程序在防火墙后面运行，我假设您无法打开端点并使用某种形式的身份验证来保护它。

一旦你有消息流，你可以使用 Channel API 来保持前端更新：[https ://developers.google.com/appengine/docs/python/channel/overview](https://developers.google.com/appengine/docs/python/channel/overview)

或者，如果您想更基本，只需通过 AJAX 实现长/短轮询。

抱歉，您提供的信息量有限，我现在只能想到这些。请随时发布更多详细信息，我会尽力提供帮助。

# magento - Magento 1.7.0.2 图像不存在

> ID：12023118
> 
> 赞同：4
> 
> 时间：2012-08-18T23:48:15.897
> 
> 标签：magento, csv, import

我正在将批量图像导入 mogento 我有错误“图像不存在”我正在尝试休闲

1）产品文件夹放置在媒体上，`/media/catalog/product/`并在媒体上创建一个文件夹导入`media/import`

2)csv 文件转换为 UTF-8 格式

3）csv文件中的图像名称是这样的`/media/catalog/product/products/91803_1_201081211141.jpg`

让我得到更好的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T06:06:23.767

在 Magento CE 版本中测试和工作。1.7.0.2

图片：`/media/import/foo.png`
CSV 文件中的图片名称： `/foo.png`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T02:42:08.883

你应该把你的图像放在`media/import`ie`media/import/photo.jpg`然后放在你刚刚使用的 csv 文件中`photo.jpg`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T01:34:15.043

假设您不小心删除了一堆产品，但图像仍在 media/catalog/product 文件夹中。例如，如果您不小心删除了一个属性集，因为它带有产品，则可能会发生这种情况。假设您想将这些产品从暂存环境中导出并重新投入生产。您将在暂存时进入数据流，进行导出，然后在生产中，临时更改此文件：

code/core/Mage/Catalog/Model/Convert/Adapter/Product.php

将第 775 行更改为

$arrayToMassAdd, Mage::getBaseDir('media') 。DS 。'目录/产品/',

完成后将其更改回

$arrayToMassAdd, Mage::getBaseDir('media') 。DS 。'进口'，

这将做的是从它们所在的位置导入产品图像。您从登台环境导出的 csv 将引用 /l/a/etc 等处的图像......所以它会起作用。

不要忘记目录/产品末尾的“/”

# android - PageAdapter.Instantiate 新项目的时机

> ID：12023120
> 
> 赞同：1
> 
> 时间：2012-08-18T23:48:26.537
> 
> 标签：android, android-viewpager

在下面粘贴的代码中，myPagerAdapter 类的 instantiateItem 方法在 int myint = 7; 之后执行。操作说明。这给我带来了一个问题，因为我想引用 myint = 7 指令所在的一些 xml 页面，但是由于当我尝试进行这些引用时 4 个 xml 页面尚未膨胀，所以引发了异常。

instanceiteItem 被调用了 4 次，它尽职尽责地膨胀每个 xml 页面，但显然它是以某种方式异步完成的，而且为时已晚。在执行 mint = 7 指令（实际上是我的其他计划代码）之前，我需要使页面同步膨胀。我怎样才能做到这一点？这是怎么回事？

谢谢，加里

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    PSContext = this;
    setContentView(R.layout.main);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.mysevenpanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
    myPager.setOffscreenPageLimit(4);
    myPager.setOnPageChangeListener(adapter); 

    int myint = 7; //just a debug stop
}   

private class MyPagerAdapter extends PagerAdapter 
    implements ViewPager.OnPageChangeListener {

    public int getCount() {
        return 4;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.left;
            break;
        case 1:
            resId = R.layout.gps;
            break;
        case 2:
            resId = R.layout.map;
            break;
        case 3:
            resId = R.layout.right;
            break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T23:54:20.403

> 我需要让页面同步膨胀

这是不支持的。

> 在执行 mint = 7 指令（实际上是我的其他计划代码）之前

这并不意味着您“需要让页面同步膨胀”。这意味着您需要将这项工作推迟到工作队列中的后期，在`PagerAdapter`完成工作之后。

更换：

```
mint = 7; 
```

和：

```
myPager.post(new Runnable() {
  public void run() {
    mint = 7;
  }
}); 
```

可能就足够了。

要么，要么触发工作`MyPagerAdapter`，例如在创建页面后在页面上进行工作。

# webdriver - selenium2：单击跨度：没有错误，但也没有效果

> ID：12023121
> 
> 赞同：1
> 
> 时间：2012-08-18T23:48:40.517
> 
> 标签：webdriver, selenium-webdriver

Selenium 2.25、OSX ML、Firefox 14。ExtJS 4.1.1。

我在 ExtJS 树面板中有一个“itemclick”处理程序。

也就是说，我有一个 xtype: 'treepanel' 项目，以及一个带有 'control' 调用的控制器，包括：

```
'#netree': {

                itemclick: this.neitemclick
            } 
```

点击后一切正常。然后我尝试用 Selenium 测试它。

在 Selenium 中，我找到包含项目文本的 span 元素，然后调用`click()`. 找到元素没有错误，调用也没有错误`click()`，但处理程序没有运行。环顾四周，Ext 似乎为整个树设置了处理程序，然后查看您单击的内容以确定您的意思。所以点击下面的跨度应该是有效的。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T03:43:34.257

Bmargulies,

您能告诉我们您使用的是哪种浏览器吗？此外，如果您可以使用 Firefox 并使用相同的 xpath/css 找到元素，那将很有用。

我将首先使用以下方法尝试单击，它应该有助于确定单击问题。

```
((JavascriptExecutor) selenium).executeScript("arguments[0].click();", elementToClick); 
```

或者

```
JavascriptLibrary jsLib = new JavascriptLibrary(); 
jsLib.callEmbeddedSelenium(selenium,"triggerMouseEventAt", elementToClick,"click", "0,0"); 
```

# java - Java - servlet 和客户端之间的通信

> ID：12023127
> 
> 赞同：0
> 
> 时间：2012-08-18T23:49:21.330
> 
> 标签：java, servlets, client, client-server

在 Servlet 方面：

```
for (GameParticipant activePlayer : connector.activePlayers) {
            activePlayer.out.println(response);
            activePlayer.out.flush();
            System.out.println("Server sending board state to all game participants:" + response); 
```

（activePlayer.out 是从客户端第一次连接时获取的 HttpResponse 对象保存在服务器中的 PrintWriter）

在客户端方面：

```
private void receiveMessageFromServer() {
    try {
        BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        StringBuilder sb = new StringBuilder();
        String input = null;
        while ((input = br.readLine()) != null){
            sb.append(input).append(" ");
        }
        } 
```

由于某种原因，这种通信只在第一次起作用，当客户端请求连接并以相同的方法等待响应时，而服务器使用直接从 doPost 方法中可用的 HttpRespnse 获取的 PrintWriter。之后，当 servlet 尝试重用 PrintWriter 与 doPost 方法之外的 clinet 对话时，什么也没有发生，消息永远不会到达客户端。有任何想法吗？

PS 在客户端构造函数中：

```
try {
        url = new URL("http://localhost:8182/stream");
        conn = (HttpURLConnection) url.openConnection();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException ioE) {
        ioE.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:11:12.123

响应输出流在 doPost() 方法之外无效，或者更准确地说是 service() 方法。它只能用于发送一个响应。但是 PrintWriter 会吞下异常，正如您在检查其错误状态时会发现的那样，因此您没有看到问题。

换句话说，您的整个服务器端设计是有缺陷的。您不能以这种方式滥用 Servlet 规范。

# python - python 3，错误处理 urllib 请求

> ID：12023135
> 
> 赞同：9
> 
> 时间：2012-08-18T23:50:23.433
> 
> 标签：python, urllib, http-error

```
from difflib import *
import urllib.request,urllib.parse,urllib.error
from urllib.parse import unquote
import time
import pdb

try:
    file2 = urllib.request.Request('site goes here')
    file2.add_header("User-Agent", 'Opera/9.61 (Windows NT 5.1; U; en) Presto/2.1.1')
    ResponseData = urllib.request.urlopen(file2).read().decode("utf8", 'ignore')
except urllib.error.URLError as e: print('http'); ResponseData = ''
except socket.error as e: ResponseData = ''
except socket.timeout as e: ResponseData = ''
except UnicodeEncodeError as e: ResponseData = ''
except http.client.BadStatusLine as e: ResponseData = ''
except http.client.IncompleteRead as e: ResponseData = ''
except urllib.error.HTTPError as e: ResponseData = '' 
```

嗨，当我在包含诸如“Microsoft VBScript 运行时错误”之类的错误的页面上运行以下代码时……请求失败并返回为 urllib.error.URLError……即使该页面包含大量其他代码。如何从页面返回所有 html 而不仅仅是异常错误。我想尽可能地保留我当前的代码（如果可能的话）。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T11:44:42.913

谢谢，我已经解决了问题

```
except urllib.error.URLError as e: ResponseData = e.read().decode("utf8", 'ignore') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-20T13:16:44.857

URLError 具有“原因”属性，因此您可以调用：

```
except urllib.error.URLError as e: ResponseData = e.reason 
```

（例如，这将是“禁止”）。

您还应该小心在超类之前捕获错误的子类。在您的示例中，这意味着将 HTTPError 放在 URLError 之前。否则，子类永远不会被抓住。

# winapi - WinApi FindFirstFile 和文件句柄

> ID：12023136
> 
> 赞同：1
> 
> 时间：2012-08-18T23:50:34.120
> 
> 标签：winapi, handle, createfile

我在使用 FindFirstFile/FindNextFile 时遇到了一些问题。据我所知，它返回一个句柄，但我不能将它与 CreateFileMapping/ReadFile 一起使用，因为返回的句柄的值与从 CreateFile 返回的值不同。第一个问题：这两个句柄有什么区别，第二个问题：可以转换这个句柄吗？我唯一的想法是获取文件名，然后使用 CreateFile。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:18:11.810

> 这两个手柄有什么区别

第一个是搜索句柄。在下面，有一个迭代器读取文件系统中的目录条目。第二个是读取文件内容的迭代器。该文件甚至可能位于另一个卷上，而不是您用来定位它的目录条目。要了解更多信息，请搜索“ [B-Tree](http://en.wikipedia.org/wiki/B-tree) ”，然后搜索“ [NTFS](http://en.wikipedia.org/wiki/NTFS) ”

> 获取文件名，然后使用 CreateFile

是的，但是您需要结合目录+文件名。我通常调用 PathAppend API（准确地说是 CPathT::Append）来做到这一点。

# c++ - c++中面向性能的消息回调解决方案

> ID：12023137
> 
> 赞同：2
> 
> 时间：2012-08-18T23:50:36.247
> 
> 标签：c++, concurrency, boost-asio, actor, zeromq

我正在尝试用 C++ 开发一个 p2p 分布式并发编程解决方案。为了获得更高的吞吐量，我观察到需要“来回”并发和可扩展的网络解决方案，就像 AKKA 提供的参与者模型一样。不幸的是，C++ 中没有可用的 actor 模型的可靠解决方案。libcppa 可用，但只有 Beta 质量。在 zeroMQ 或 Boost.asio 等中是否有任何可扩展和并发的解决方案？以编程方式，我想以非常快速且可扩展的方式进行跟踪。

假设我有一个包含 N 个节点的集群，其中包含一组单独的对象。当一个节点需要一个远程对象时，它会发送一个请求并返回一个对象作为响应。目前我以以下方式进行：

```
Request req = Network.request(Node x, objectId id);
req.waitforResponse( ); //Implemented through Conc-Hashmap of requests and wait & signal
Object obj = req.response().getObject();
// Do sth with object. 
```

我不想自己实现最后两行代码。我希望它由网络库本身来完成。最好的解决方案是，如果我可以在某种“Future”数据结构中获取“req”对象，该数据结构只会在调用 getObject() 时阻塞。我认为这是一个非常普遍的问题，应该有一些好的开源解决方案可用。如果不是，请建议一些更有效的解决方案，而不是基于并发哈希图（C++ Intel 线程）的方法。不幸的是，我在谷歌上搜索的数量并不多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:41:38.370

因为没有人回答。我只是在更新我使用的解决方案。我使用 MsgConnect 和我的线程池来处理事件和回调。

# python - 编辑表格并保存到数据库

> ID：12023142
> 
> 赞同：2
> 
> 时间：2012-08-18T23:51:16.477
> 
> 标签：python, django

我有一个表单，它获取有关项目的信息并将其保存到数据库中。我试图允许用户使用新的/不同的信息编辑该表单并再次保存。我在尝试让它工作时遇到了一些困难。我认为问题在于，当 Django 验证数据时，它发现项目的 slug 和唯一 id 已经存在并且不允许它验证数据，但我也不完全确定这一点。非常感谢您的帮助。谢谢。

```
#view
def edit_item(request, item_id):
    if request.method == 'POST':
        item = Item.objects.get(id=item_id)
        form = AddItem(request.POST,instance=item)
        if form.is_valid():
            item = form.save(commit=False)
            item.user = request.user
            item.is_active = True
            item.slug = slugify(item.name)
            item.save()
            return HttpResponseRedirect('thanks.html')
        else:
            form = AddItem(instance=item )
            return render_to_response('forsale.html', locals(), context_instance=RequestContext(request))

#form
class AddItem(forms.ModelForm):
    name = forms.CharField(label="Title")

    class Meta:
        model = Item
        exclude = ('user','slug','is_active',)

#model
class Item(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=30)
    slug = models.SlugField(max_length=50, unique=True)
    is_active = models.BooleanField(default=True, blank=True)
    image1 =  models.ImageField(upload_to='img')
    image2 =  models.ImageField(upload_to='img', blank=True)
    image3 =  models.ImageField(upload_to='img', blank=True)
    image_caption1 = models.CharField(max_length=200, blank=True)
    image_caption2 = models.CharField(max_length=200, blank=True)
    image_caption3 = models.CharField(max_length=200, blank=True)
    price = models.DecimalField(max_digits=8, decimal_places=2)
    quantity = models.IntegerField(default=1)
    description = models.TextField()
    created = models.DateTimeField(auto_now_add=True)
    shipping_price = models.DecimalField(decimal_places=2, max_digits=6)
    categories = models.ManyToManyField(Category)

    def save(self, *args, **kwargs):
        super(Item, self).save(*args, **kwargs)
        if not self.slug:
            self.slug = slugify(self.product.title) + "-" + str(self.id)
            self.save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:44:02.537

像这样更新您的视图函数以返回获取请求的表单：

```
def edit_item(request, item_id):
    if request.method == 'POST':
        item = Item.objects.get(id=item_id)
        ....
        #your existing code
   else: #if its GET request
        item = Item.objects.get(id=item_id)
        form = AddItem(instance=item )
        return render_to_response('forsale.html', locals(), 
                   context_instance=RequestContext(request)) 
```

注意：您需要处理`item_id`数据库中不存在项目的情况。在这种情况下，不要使用`instance`参数来实例化表单。

# c++ - 前缀（抛光）表示法 - 评估 c++

> ID：12023151
> 
> 赞同：0
> 
> 时间：2012-08-18T23:55:17.267
> 
> 标签：c++, prefix

我正在寻找使用递归解析前缀表达式的代码。主要是 C++，但也可以是其他语言，我会翻译。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:01:49.903

自己做真的很容易（你只需要一个操作员的堆栈（有时/可选地它的第一个术语））。

但如果你真的不想做太多工作，这里有一个链接：

[前缀符号字符串到 int 的转换](https://stackoverflow.com/questions/10038226/prefix-notation-string-to-int-conversion)

如果您需要使用递归，则基本上将函数中的局部变量用作堆栈中的单个元素。

例如。伪 C++ 代码如下：

```
int naughtyglobalendindex = 0;
int parse(string str) {

  if (/* str starts off with an integer */) return the integer;

  char operator;
  operator = ?? // you will need to get the first op here. Maybe sscanf(str,"%c",&operator) or similar

  // get first argument
  int first = parse(/* str with 1st operator removed */);
  // get 2nd integer argument
  int second = parse(/* str - get substring from naughtyglobalendindex to end*/)

  // return first operator second <- this is pseudocode
  // in effect you want a switch clause
  switch (operator) {
    case '+': return first + second;
    case '-': return first - second; // and so on
  }
} 
```

您可以将伪代码转换为实际的 C++，如果需要，可以修复全局`naughtyglobalendindex`变量。

# beamer - 在 Beamer 中使用 Circuitikz

> ID：12023152
> 
> 赞同：0
> 
> 时间：2012-08-18T23:55:27.750
> 
> 标签：beamer

我无法使用 circuitikz 包编译投影仪演示文稿。有谁知道这是否可能，我收到一个错误：

```
undefined control sequence \usepackage{circuitikz} 
```

下面是我的代码（简化版）

```
\documentclass{beamer}
\usepackage[utf8]{inputenc}
\usepackage{default}

\usepackage{tikz} 
\usepackage{siunitx} 
\usepacakge[siunitx]{circuitikz} 

\begin{document}

  \begin{frame}
    \begin{figure}[!htb]
      \centering
      \begin{circuitikz}[scale = 1.4] \draw
    (0,0) node[anchor=east]{$E_{in} -$} 
      to[short, o-] (4,0) 
      to[V, v=$E_{emf}(t)$] (4,2)
      to[L, l=$L_m$] (3,2)
      to[R, l=$R_m$] (1,2) -- (0,2)
      to[short, o-] (0,2)
      node[anchor=east]{$E_{in} +$};
      \end{circuitikz}
      \caption{Circuit Diagram of Motor}
      \label{fig:basicMotor_wInductor}
    \end{figure}

  \end{frame}

\end{document} 
```

我可以从我的报告中复制/粘贴图像，但我更愿意将代码包含在 Beamer 中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:59:35.020

可能是您没有最新版本的 circuitikz....

但在您尝试下载最新版本之前，请尝试： **\usepackage[siunitx]{circuitikz}**

最新版本： [https ://code.google.com/p/circuitikz/source/browse/#hg%2Ftex%2Flatex%2Fcircuitikz](https://code.google.com/p/circuitikz/source/browse/#hg%2Ftex%2Flatex%2Fcircuitikz)

将文件放在与您的 tex 相同的文件夹中或将文件放入您的目录中......例如：[https ://en.wikibooks.org/wiki/LaTeX/Packages/Installing_Extra_Packages](https://en.wikibooks.org/wiki/LaTeX/Packages/Installing_Extra_Packages)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T12:33:13.800

当我将 \usepacakge[siunitx]{circuitikz} 更改为 \usepackage[siunitx]{circuitikz} 您的代码对我有用。

# python - FileField 没有上传文件

> ID：12023153
> 
> 赞同：0
> 
> 时间：2012-08-18T23:55:29.887
> 
> 标签：python, django, file-upload, filefield

我对 python 和 Django 比较陌生。

表单正在显示自己，但是当我选择一个文件并点击保存时，表单会自行刷新，并且 FormField 中的选定文件会消失，并且表单说该文件是必需的。

代码是：

# 模型.py

```
class ScribbleMedia(models.Model):
     media = models.FileField(upload_to='photos')
     def __unicode__(self):
      return self.media

class Scribble(models.Model):
     body = models.TextField()
     user = models.ForeignKey(User)
     media = models.ForeignKey(ScribbleMedia)
     def __unicode__(self):
      return u'%s, %s' % (self.user.username, self.media)

class Tag(models.Model):
  name = models.CharField(max_length=64, unique= True)
  scribbles = models.ManyToManyField(Scribble)
  def __unicode__(self):
    return self.name 
```

# 视图.py

```
def scribbler_save_page(request):
    if request.method == 'POST':
        form = ScribbleSaveForm(request.POST)
        if form.is_valid():
            #Create or get media.
            media, dummy = ScribbleMedia.objects.get_or_create(
                media=form.cleaned_data['media']
            )
            #Create or get media.
            scribble, created=Scribble.objects.get_or_create(
                user=request.user,
                media=media
            )
            #update scribble body
            scribble.body=form.cleaned_data['body']
            # If the scibble is being updated, clear old tag list.
            if not created:
                scribble.tag_set.clear()
            # Create new tag list.
            tag_names = form.cleaned_data['tags'].split()
            for tag_name in tag_names:
                tag, dummy = Tag.objects.get_or_create(name=tag_name)
                scribble.tag_set.add(tag)
            # Save scribble to database.
            scribble.save()
            return HttpResponseRedirect ( '/user/%s/' % request.user.username
            )
    else:
        form = ScribbleSaveForm()
    variables = RequestContext (request, { 
        'form': form
    })
    return render_to_response ('scribble_save.html', variables) 
```

# 表格.py

```
class ScribbleSaveForm(forms.Form):
    media=forms.FileField(
      label=u'add file',
      widget=forms.FileInput()
    )
    text=forms.CharField(
      label=u'description',
      widget=forms.Textarea()
    )
    tags=forms.CharField(
      label=u'Tags',
      required=False,
      widget=forms.TextInput(attrs={'size':64})
    ) 
```

# 网址.py

```
(r'^save/$', scribbler_save_page), 
```

# scribble_save.html

```
{% extends "base.html" %}
    {% block title %}Save Scribble {% endblock %}
    {% block head %}Save Scribble { % endblock % }
    {% block content %}
    <form method="post" action=".">
        {{ form.as_p }}
        <input type="submit" value="save" />
        {% csrf_token %}
    </form>
    {% endblock %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:19:44.357

您需要专门为文件上传做两件事：

(1) 您的 HTML 表单元素必须包含`enctype`值为的属性`multipart/form-data`。

```
<form enctype="multipart/form-data" method="post" action="."> 
```

(2) 在您看来，您会在中找到上传的文件，`request.FILES`而不是`request.POST`. 要将上传的文件绑定到表单，请`request.FILES`作为第二个参数传入表单构造函数。

```
form = ScribbleSaveForm(request.POST, request.FILES) 
```

来源：[Django docs - The Forms API - 将上传的文件绑定到表单](https://docs.djangoproject.com/en/1.4/ref/forms/api/#binding-uploaded-files-to-a-form)

# javascript - 在哪里可以找到 JavaScript API 的文档？

> ID：12023156
> 
> 赞同：-1
> 
> 时间：2012-08-18T23:56:38.077
> 
> 标签：javascript

好的，我对 Javascript 感到非常沮丧。我买了书，在网上找到了大量的视频，找到了一些很好的资源，但我仍然觉得自己像个小孩。我想要 API 的大男孩版本以及如何编写真正的代码。

有人可以帮我解决以下问题1）我在哪里可以找到真正的API 2）我如何真正使用这些东西，以便我可以在现实世界中使用它。3）为什么很难找到关于这个主题的好信息，有一些秘密网站或书籍不向公众提供或什么。

任何人请指导我到正确的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T00:00:17.720

我发现 Mozilla 开发者网络有优秀的 JavaScript API 文档和指南：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference](https://developer.mozilla.org/en-US/docs/JavaScript/Reference)

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)

* * *

除此之外，我强烈建议在 Chromium/Google Chrome 中进行开发，因为它们包含一组出色的 JavaScript 调试工具，包括带有自动完成功能的控制台。我曾经使用过 Firebug，但与 Chrome/ium 提供的相比，它真的很笨重。

**JavaScript 在“现实世界”中是如何使用的？**

您需要考虑到 JavaScript 绝不是一个独立的实体。它紧密集成到 Web 浏览器模型中，补充了 HTML、CSS 和浏览器。JavaScript 的新特性和服务器端 JavaScript 环境，[NodeJS](http://nodejs.org/)正在扭曲这一点，但是对于在 Web 浏览器中使用，JavaScript 仍然围绕它与其他 Web 组件的集成展开。换句话说，您可能应该从制作需要脚本行为（例如表单验证）的单个页面开始，而不是考虑更大的应用程序（其中 JavaScript 只是一个小组件）。

**为什么很难找到关于这个主题的好信息？**

我完全同意你的看法。简短的回答是 JavaScript 正在并且一直在迅速发展。除非您正在阅读最近的书籍，否则如果您想浏览，最好的选择是 MDN，如果您正在寻找特定的东西（或使用 Google 搜索 MDN！），最好使用谷歌（一如既往）。

# android - 使用 AsyncTask 进行 REST 调用的 Android 设计模式

> ID：12023157
> 
> 赞同：2
> 
> 时间：2012-08-18T23:56:49.527
> 
> 标签：android, rest, android-asynctask, crud

我正在开发一个应用程序，我在其中假装为典型的 CRUD 操作调用 REST 服务。由于我想将请求处理与 UI 线程分开，因此我计划使用 AsyncTask 来完成单独的工作。但是，我的问题是：我应该如何设计我的 AsyncTask(s) 模型？我应该对所有 CRUD 操作使用一个 AsyncTask（这是否可行？），还是使用 4 个 AsyncTask（创建、删除、更新、检索）？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:30:18.093

我会使用 ContentProvider 而不是使用 AsyncTask。

根据这个线程：

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/8M0RTFfO7-M%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/android-developers/8M0RTFfO7-M%5B1-25%5D)

在 Android 4 AsyncTasks 将是顺序的。

因此，仅出于这个原因，您的解决方案可能不是最佳的。

但是， ContentProvider 对您尝试做的事情更有意义，因为 CRUD 调用背后发生的事情用户并不关心。不过，您可能希望在单独的线程上运行它，因为在 UI 线程上的时间过长是不好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:10:40.550

这完全取决于您，也许还取决于您正在使用的 REST 服务。

需要考虑的一些事项：

1.  服务是否足够通用，可以很容易地用一个来完成所有事情`AsyncTask`？
2.  如果您使用单个`AsyncTask`. 我倾向于认为，如果你`AsyncTask`为每个操作都做一个，它会更容易阅读。（即，CreateTask、UpdateTask...）
3.  我会通过我的选择（无论是什么）获得我所追求的可重用性吗？

就个人而言，我会创建 4 个不同`AsyncTask`的 's，以及我可能会放入基类中的任何可重用代码，但同样，对于你来说最适合你的工作真的取决于你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:29:47.783

就我个人而言，我使用的`Loader`是兼容库提供的框架。`AsyncTaskLoader`对于每个 CRUD 操作，我都有一个子类，它工作得非常好！

我想如果您希望避免使用大量类，您可以使用相同的任务（即 create 和 update 在技术上可以适合相同的任务） - 当您将`AsyncTaskLoader`create`setParameters(...)`方法子类化时，您可以在创建加载器时调用该方法`onCreateLoader()`。

在您查看[Loader 文档](http://developer.android.com/guide/components/loaders.html)后阅读以上内容可能会有所帮助。

# c# - 索引超出范围，但索引并没有真正超出范围

> ID：12023158
> 
> 赞同：2
> 
> 时间：2012-08-18T23:57:08.740
> 
> 标签：c#, .net, multithreading, list, c#-4.0

我正在研究多线程程序，我想检查所有线程是否都已完成，然后我有一个全局`List<bool> tr`线程，当我创建一个新线程时，我`false`向它添加一个，并在线程结束时`true`通过传递当前的索引来实现线程列表中线程的布尔值。

这是我开始踩踏的循环：

```
for (int i = 0; i < t; i++)
{
    int n = int.Parse(r.ReadLine());
    List<int> nums = (from s in r.ReadLine().Split(' ') select int.Parse(s)).ToList();
    tr.Add(false);
    new Thread(() => Process(nums, i)).Start();
} 
```

这是`Process`方法：

```
public static void Process(List<int> Data, int tNum)
{
    output.Add(ProcessSums(ProcessSubs(Data)).Distinct().Count());
    tr[tNum] = true;
} 
```

问题出在其中一个线程中，当`tr[tNum] = true;`运行什么时它会抛出`ArgumentOutOfRangeException`并说 the `Index was out of range.`but the length of `tr`is`97`和 the `index`is `95`。我不知道问题是什么，但我真的需要帮助。有谁能够帮我？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:25:20.060

如果这不起作用，请发表评论，我将删除而不是将其标记下来，因为评论太多了，我没有测试，但我认为这真的和丹尼尔的评论一样简单

[资源](http://msdn.microsoft.com/en-us/library/dd460721)

```
int i=0;
Parallel.For (0, t-1, i,=>
{
    int n = int.Parse(r.ReadLine());
    List<int> nums = (from s in r.ReadLine().Split(' ') select int.Parse(s)).ToList();
    Process(nums, i);
}); 
```

# xna - 来自触摸输入的贝塞尔路径，然后让精灵跟随路径 xna

> ID：12023162
> 
> 赞同：0
> 
> 时间：2012-08-18T23:58:06.233
> 
> 标签：xna, xna-4.0, bezier, monogame

我正在使用 monogame 创建一个游戏，该游戏需要用户触摸输入并沿着他们绘制的路径移动精灵。我希望能够从屏幕上的某个点（比如一个正方形）画一条线，然后在屏幕上的任何方向上画这条线，让它平滑（贝塞尔曲线），然后让一个角色跟随这条线。

有谁知道monogame是否支持xna 4.0中的曲线类？我真的不知道从哪里开始使用上面提到的来自用户触摸输入的技术来绘制和平滑线条，因为我的数学不是很好。

有没有人这样做过，并且不介意指出我正确的方向？您认为可能有用的任何片段或文章，请发布它们。我发现的所有文章都使用预先确定的路径，这些路径使用贝塞尔曲线平滑，而不是来自用户触摸输入。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:19:14.920

贝塞尔曲线很难自动曲线拟合到一组点，因为您需要设置不在曲线上的控制点。

我建议使用[Catmull-Rom 样条](http://www.mvps.org/directx/articles/catmull/)线或其他通过控制点的样条线。你会很难找到现成的实现，但我可以帮助你开始。Catmull-Rom 样条是分段定义的参数函数。您的点集 p 是您的触摸坐标。给定四个点 p0、p1、p2 和 p3，使用该页面上的方程式定义 p1 和 p2 之间的段。您可以通过创建许多 b 样条来指定使用更多段的样条，如下所示：

样条 0 = p0, p0, p1, p2 （重复 p0 以确保样条从 p0 而不是 p1 开始）
样条 1 = p0, p1, p2, p3
样条 2 = p1, p2, p3, p4
样条 3 = p2 , p3, p4, p5
...
样条 (n-1) = p(n-2), p(n-1), p(n), p(n)

要绘制样条线，您可以定期使用精灵（在 t=0、t=0.1、t=0.2... 处绘制精灵）或使用线带或三角形带。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T06:27:38.810

我知道这个线程很旧，但我正在尝试类似的任务。我偶然发现了这个链接，它可以帮助你：

[http://www.rengelbert.com/tutorial.php?id=182](http://www.rengelbert.com/tutorial.php?id=182)

它需要用户的触摸输入来为精灵绘制一条平滑的曲线路径。

也许这个资源可以帮助其他人。

# ruby - 使用 RbConfig 而不是过时和不推荐使用的 Config

> ID：12023163
> 
> 赞同：5
> 
> 时间：2012-08-18T23:58:20.197
> 
> 标签：ruby, windows, imagemagick

在尝试通过`msys.bat`运行在 Windows 上安装 ImageMagick 时

```
ruby setup.rb install 
```

我收到此错误：

> setup.rb:787：使用`rbconfig`而不是过时和弃用的配置。
> 没有这样的文件或目录 -.config
> `setup.rb config`先
> 试试看`ruby setup.rb --help`详细用法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:27:43.137

RbConfig 是一个模块，它可以访问当前 Ruby 实现的大部分编译时属性。要使用 RbConfig，必须`require 'rbconfig'`. 在早期版本的 Ruby 中，这个类只是被称为 Config 并且是通过`require 'config'`. 现在尝试使用 Config 时，Ruby 会发出弃用警告。

进入您的`setup.rb`第 787 行。在那里您可能会找到一个`require 'config'`. 将其更改为`require 'rbconfig'`. 如果这不能使脚本运行或仍有警告，请搜索并用 RbConfig 替换 Config 模块的用法。然后Ruby会闭嘴。

该问题可能只出现在您尝试编译的软件不是最新的。我想使它工作的更好方法是找到它的更新版本，这可能会解决其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T09:46:10.347

有同样的问题通过以下方式解决：

**@aef 的**答案，然后将文件更改为如下所示：

```
require 'tempfile'

if i = ARGV.index(/\A--rbconfig=/) then
  file = $'
  ARGV.delete_at(i)
  require file
  require 'rbconfig'
else
  require 'rbconfig'
end 
```

# c# - 我们在 C# 中有某种 Triple 集合吗

> ID：12023164
> 
> 赞同：11
> 
> 时间：2012-08-18T23:58:21.367
> 
> 标签：c#, collections

我正在考虑为列表的每个对象保留三条信息。所以我可以为这三个信息创建一个具有三个属性的类，然后创建一个该类类型的集合......但我想知道在 .NET 3.5（而不是 4.0）中有什么内置的东西吗？例如一本字典……为每个项目保留两条信息，键和值……但我需要三个。我们有什么内置的吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-19T00:10:02.063

您可以创建自己的`Tuple<T1, T2, T3>`：

```
public class Tuple<T1, T2, T3> : IEquatable<Object>{
    public T1 Item1{
        get;
        set;
    }

    public T2 Item2{
        get;
        set;
    }

    public T3 Item3{
        get;
        set;
    }

    public Tuple(T1 Item1, T2 Item2, T3 Item3){
         this.Item1 = Item1;
         this.Item2 = Item2;
         this.Item3 = Item3;
    }

    public override bool Equals( object obj ) {
        if ( obj == null || (obj as Tuple<T1, T2, T3>) == null ) //if the object is null or the cast fails
            return false;
        else {
            Tuple<T1,T2,T3> tuple = ( Tuple<T1, T2, T3> ) obj;
            return Item1.Equals( tuple.Item1 ) && Item2.Equals(tuple.Item2) && Item3.Equals(tuple.Item3);
        }
    }

    public override int GetHashCode( ) {
        return Item1.GetHashCode( ) ^ Item2.GetHashCode() ^ Item3.GetHashCode();
    }

    public static bool operator == ( Tuple<T1, T2, T3> tuple1, Tuple<T1, T2, T3> tuple2 ) {
        return tuple1.Equals( tuple2 );
    }

    public static bool operator != ( Tuple<T1, T2, T3> tuple1, Tuple<T1, T2, T3> tuple2 ) {
        return !tuple1.Equals( tuple2 );
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-19T00:03:14.623

创建您自己的 Triple 类：

```
public class Triple<T,X,Y>
{
   public T t{get;set;}
   public X x{get;set;}
   public Y y{get;set;}
} 
```

这是一种清晰的方法，比直接使用字典更易于管理，例如：`Dictionary<Key, KeyValuePair<X,Y>>`和其他类似的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T00:07:34.250

创建类似于.Net 4中添加的通用元组类的解决方案在其他答案中进行了解释，但我认为重要的是要说明创建一个小类来语义表示数据可能更好存储有意义的属性。通用的 3 元组现在可能可以工作，但您可能希望稍后扩展该功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-18T23:59:37.727

如果您使用的是 .NET 4，那么您会寻找[`Tuple<T1,T2,T3>`](http://msdn.microsoft.com/en-us/library/system.tuple%28v=vs.100%29.aspx). .NET 3.5 没有内置类型，但根据您的需要，您可以执行`Dictionary<T1,Dictionary<T2,Dictionary<T3,bool>>>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T00:01:17.800

尝试`Dictionary<Key, Tuple<Object, Object>>`，或者，`Dictionary<Key, YourClass>`YourClass（当然可以是一个结构）保存两个必需的数据。

# c++ - 是否有用于阻塞 boost::asio TCP 连接的 boost::iostreams (双向) 设备？

> ID：12023166
> 
> 赞同：4
> 
> 时间：2012-08-18T23:58:32.630
> 
> 标签：c++, boost-asio, boost-iostreams

我正在调查 c++ 库以实现可移植、阻止对文件系统和网络的 I/O 访问。*看起来*，并且将在他们三个`boost::filesystem`之间完成这项工作。`boost::iostreams``boost::asio`

需要明确的是，我目前对 ; 的异步方面不感兴趣`boost::asio`。我只想要一个可移植的、阻塞的网络接口。

深入研究，我看到`boost::iostreams`了设备的概念，每个设备都有一个相关的[模式概念](http://www.boost.org/doc/libs/1_50_0/libs/iostreams/doc/guide/modes.html)。双向模式似乎专门为流式访问全双工 TCP 连接量身定制。惊人的。

`boost::iostreams`似乎不支持实际打开 TCP 连接（与本地文件系统不同）。这很好，肯定`boost::asio`会让我打开连接，将其适当地建模为双向`Device`，并将其包装在`boost::iostreams::stream`.

..除非它不会？我明白[`boost::asio::ip::tcp::iostream`](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/ip__tcp/iostream.html)了，这将取代`boost::iostreams::stream`，但大概不会充当`Device`.

我理解它的`tcp::iostream`行为类似，但我仍然更喜欢只针对一个界面而不是两个界面来学习和编码。具体来说，处理两种错误处理机制和异常层次结构并不是很容易接受。

那么问题来了：我是瞎了吗？也许两个库之间存在一个适配器，我错过了谷歌搜索。或者也许有人已经发布了这样的适配器作为我可以加入的第 3 方组件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T01:41:57.760

我不知道直接映射。但是，如果您有兴趣，编写这样的设备相当简单。此版本会抛出`boost::system::system_error`非 EOF 错误，但您可以选择执行其他操作。

```
#include <iosfwd>

#include <boost/asio/io_service.hpp>
#include <boost/asio/ip/tcp.hpp>
#include <boost/asio/buffer.hpp>
#include <boost/iostreams/categories.hpp>
#include <boost/system/system_error.hpp>

class asio_stream_device
{
public:
    typedef char char_type;
    typedef boost::iostreams::bidirectional_device_tag category;

    explicit asio_stream_device(boost::asio::ip::tcp::socket& sock) : socket_(sock)
    {

    }

    std::streamsize read(char* s, std::streamsize n)
    {
        // Read up to n characters from the underlying data source
        // into the buffer s, returning the number of characters
        // read; return -1 to indicate EOF
        boost::system::error_code ec;

        std::size_t rval = socket_.read_some(boost::asio::buffer(s, n), ec);
        if (!ec)
        {
            return rval;
        }
        else if (ec == boost::asio::error::eof)
        {
            return -1;
        }
        else
        {
            throw boost::system::system_error(ec,"read_some");
        }

    }

    std::streamsize write(const char* s, std::streamsize n)
    {
        // Write up to n characters to the underlying
        // data sink into the buffer s, returning the
        // number of characters written

        boost::system::error_code ec;
        std::size_t rval = socket_.write_some(boost::asio::buffer(s, n), ec);
        if (!ec)
        {
            return rval;
        }
        else if (ec == boost::asio::error::eof)
        {
            return -1;
        }
        else
        {
            throw boost::system::system_error(ec,"write_some");
        }

    }

private:

    boost::asio::ip::tcp::socket& socket_;

}; 
```

基本上，正常打开/连接套接字，然后将其传递给构造函数。该示例只是读取并输出到屏幕。

```
void test
{
   namespace asio = boost::asio;
   namespace io = boost::iostreams;

   asio::io_service service;
   asio::ip::tcp::socket socket(service);

   asio::ip::tcp::endpoint remote -  ...; ////

   socket.connect(remote);

   io::stream<asio_stream_device> str(socket);

   std::string line;

   while (std::getline(str, line)) {
    std::cout << line << std::endl;
   }
} 
```

# javascript - 从匿名立即调用的函数表达式返回 | 它去哪儿了？

> ID：12023167
> 
> 赞同：4
> 
> 时间：2012-08-18T23:58:36.270
> 
> 标签：javascript

如果我从匿名立即调用的函数表达式返回一个对象，它会去哪里？例如 foo 在这段代码中的位置......

```
(function(){ 
    var foo;
    return foo;
})(); 
```

这有什么有用的应用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T00:55:18.630

从您的自动执行函数返回一个值而不将该返回值分配给结果变量只是一个返回值，它无处可去，因此不会在您的函数中创建对数据的新引用。所以一旦函数返回，数据就会被垃圾回收，就像你没有返回语句一样。所以这：

```
(function(){ 
    var foo;
    return foo;
})(); 
```

与从函数返回值并且不将返回的值分配给任何东西没有什么不同。

您可以这样做来捕获返回值：

```
var result = (function(){ 
    var foo = "hello";
    return foo;
})(); 
```

工作演示：http: [//jsfiddle.net/jfriend00/t9wJL/](http://jsfiddle.net/jfriend00/t9wJL/)

* * *

至于返回值的用处。如果您将返回值分配给变量或将其用作其他函数的输入，这很有用，但如果您不这样做，则什么也做不了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T00:33:03.757

一个有用的应用是功能测试。例如，有些浏览器支持*textContent*属性，有些支持*innerText*，有些支持两者。我可以编写一个函数来测试支持并使用适当的属性：

```
function getText(el) {

  if (typeof el.textContent == 'string') {
    return el.textContent;

  } else if (typeof el.innerText == 'string') {
    return el.innerText;
  }
} 
```

您可能会觉得每次都进行相同的测试效率低下（不是很多），因此您可能希望检测支持并创建一个只执行一次测试的函数，然后使用适当的属性，例如：

```
var getText = (function() {
  var el = document.createElement('div');

  if (typeof el.textContent == 'string') {
    el = null;
    return function (el) { return el.textContent;};

  } else if (typeof el.innerText == 'string') {
    el = null;
    return function (el) { return el.innerText;};
  }
}()); 
```

上面的函数有一点缺陷，它们只是示例。

请注意，可以省略左括号和右括号，但是在阅读代码时使用它们会有所帮助，您知道它是从第一行开始立即调用的函数表达式（IIFE），而不是在中间或末尾的某个位置。

主要好处是能够运行一些代码，而无需创建不必要的全局引用，然后必须清理它们。上面的示例在返回的函数和 IIFE 之间创建了一个闭包 (to `el`)，因此在我们卸载页面之前它可能不会被垃圾收集，除非编译器足够聪明地知道该闭包没有被使用。

闭包是以这种方式使用 IIFE 的结果，但这是一个无关紧要的问题，除非 IFFE 很大并且闭包是浪费的（在许多情况下它们很有用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T00:06:30.450

如果自执行函数的目的是创建一个新范围，那么返回一些东西是没有意义的。如果函数被分配给一个变量，那么返回的值将被分配给它。

```
var foo = (function(){ return 'foo' }()); // this makes sense 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-06T09:07:09.617

foo 作为正在执行的函数的结果返回。只有将它分配给变量或传递给另一个函数时，它才会“存在”：

```
var x = (function(){ 
    var foo;
    return foo;
})();
console.log(x) 
```

这有帮助吗？

# wordpress - 如何在电压 Wordpress 主题中将博客类别显示为标题？

> ID：12023169
> 
> 赞同：0
> 
> 时间：2012-08-18T23:59:10.260
> 
> 标签：wordpress, themes, categories

我的客户有一个使用 Themeforest 的电压 Wordpress 主题构建的网站。除了一件事，我已经完成了他们想要完成的所有调整。

我创建了 3 个博客类别，每个类别都是导航栏项目。当我单击其中任何一个时，出现的页面上都有正确的帖子，但所有三个页面上的标题都显示为“博客存档”。

见这里：[http ://s11.mynewsitereview.com/](http://s11.mynewsitereview.com/)

这三个类别是时尚与文化、我的风格和提示与技巧。

下面是 index.php 中生成页面标题的代码：

```
 <h1><?php
        if(single_cat_title("", false)=='' && !is_archive()) {
            $page = get_page_by_title( single_post_title('', false) );
            $vltg_page_meta=get_post_meta($page->ID, '_vltg_page_meta', true);
            if(isset($vltg_page_meta['display_title']) && $vltg_page_meta['display_title']!='') {
                echo $vltg_page_meta['display_title'];
            } else {
                single_post_title();
            }
        } else if(is_archive()) {

            if ( have_posts() ) {
                the_post();

                if(is_day()) {
                    echo get_the_date();
                } else if(is_month()) {
                    echo get_the_date('F Y');
                } else if(is_year()) {
                    echo get_the_date('Y');
                } else {
                    echo 'Blog Archives';
                }

            } else {
                echo 'Blog Archives';
            }

            rewind_posts();

        } else { 
            single_cat_title();
        } ?></h1> 
```

我可以看到*为什么*它会生成“博客档案”作为标题，但我不知道如何调整它以便它显示类别名称。

非常感激任何的帮助！

:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:12:38.657

好的，在没有得到电压主题开发者的爱后，我终于解决了这个问题。

看看我在原始问题中发布的这部分代码：

```
 } else {
            echo 'Blog Archives';
        }

    } else {
        echo 'Blog Archives';
    } 
```

这是我将其更改为：

```
 } else {
            single_cat_title();
        }

    } else {
        single_cat_title();
    } 
```

它有效！

# java - AdMob 横幅出现在大屏幕安卓设备的屏幕中央

> ID：12023172
> 
> 赞同：0
> 
> 时间：2012-08-18T23:59:20.530
> 
> 标签：java, android, admob, banner-ads, adbannerview

我尝试用 AdMob 制作安卓应用。

我按照文档中的描述创建了 admob adView：

```
FrameLayout layout = (FrameLayout) findViewById(R.id.frame_layout);
adView = new AdView(this, AdSize.SMART_BANNER, myAdMobId ); 
```

然后，如果我在 320x480（手机）的设备上运行我的应用程序，广告横幅会出现在顶部，但如果我在 1280x800 的 Android 平板电脑上运行我的应用程序，则广告横幅会水平和垂直居中显示 - 在屏幕中央。

另外，我尝试了 AdSize.BANNER、AdSize.IAB_BANNER、AdSize.IAB_LEADERBOARD - 结果是一样的。

我做错了什么？

UPD1。资源/布局/main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frame_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
<com.mysite.myapp.GameView
      android:id="@+id/game"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"/>    
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T01:01:17.197

这应该可以解决问题。

```
 FrameLayout.LayoutParams adsParams =new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT, 
            FrameLayout.LayoutParams.WRAP_CONTENT, android.view.Gravity.TOP|android.view.Gravity.CENTER_HORIZONTAL); 

    layout.addView(adView, adsParams); 
```

在您在 xml 中所做的事情中，您没有指定任何重力。

# php-5.3 - php-fpm “池似乎很忙错误”。为什么我会得到这个？

> ID：12023173
> 
> 赞同：2
> 
> 时间：2012-08-18T23:59:31.340
> 
> 标签：php-5.3, php

我有一个 64gb RAM 的服务器，使用 apache + fastcgi 连接到 php-fpm。

我正在使用 ApacheBench 运行一些负载测试。500k 请求，200 请求/秒（目标是每台服务器 10k/秒）。我不断收到“池似乎很忙错误”，并且不知道如何正确配置 fpm 以处理甚至 200reqs/sec。感觉就像我错过了一些明显的东西。

fpm-配置：

```
pm = dynamic
pm.max_children = 8192
pm.start_servers = 2048
pm.min_spare_servers = 2048
pm.max_spare_servers = 2048
pm.max_requests = 8000 
```

阿帕奇配置：

```
<IfModule worker.c>
StartServers         2048
ServerLimit     8175
MaxClients         8175
MinSpareThreads    2048
MaxSpareThreads     2048
ThreadsPerChild     25
MaxRequestsPerChild  8000
</IfModule> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:22:12.547

我最初的直觉反应是，拥有最多 8000 个孩子似乎需要运行大量进程，除非每个请求都有很多等待时间。一段时间后，大量进程实际上会导致性能下降，因为上下文切换最终会将正在运行的进程交换进出 CPU 时间，这需要时间来完成。除非您有很多外部服务调用并且进程等待很多，否则这似乎有点过分。此外，假设在请求过程中分配了 20 MB，您使用 60+% 的可用 RAM 仅用于服务 start_servers。

至于“池似乎很忙”的错误，我不知道。（对我来说）很难在不深入环境的情况下说。当您运行 AB 时，您的空闲 CPU 时间和内存利用率是多少？

我还想知道单个进程（如 FPM）可以打开的连接数是否存在系统限制...检查 ulimit -a

# javascript - jQuery mobile 移动列表视图的位置

> ID：12023179
> 
> 赞同：0
> 
> 时间：2012-08-19T00:00:03.653
> 
> 标签：javascript, jquery

我有以下内容，我正在尝试对此进行动画处理，以便它从它的位置向左移动，所以我正在尝试：

```
<ul id ="bla" data-role="listview" data-inset="true"><li>bla</li></ul>
$("#bla").animate({left:"200px"},{duration:"slow"}); 
```

但它不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:05:00.280

您是否在页面加载事件处理程序中插入了 JQuery 代码？

```
$(document).ready(function () {
   $("#bla").animate({left:"200px"},{duration:"slow"});
}); 
```

**编辑**：您还必须更改您的 HTML；

```
<ul id ="bla" data-role="listview" data-inset="true" style="position:relative;"><li>bla</li></ul>​​​​​​​​​​​​​​​​ 
```

这是工作小提琴：http: [//jsfiddle.net/b7HJf/2/](http://jsfiddle.net/b7HJf/2/)

希望这可以帮助。

# google-sheets - 把时间放进单元格

> ID：12023185
> 
> 赞同：0
> 
> 时间：2012-08-19T00:00:52.427
> 
> 标签：google-sheets

在谷歌电子表格中，如果单元格为空并且另一个单元格的值大于零，我想将时间`HH:mm`放在一个单元格中。`A2``A2``A1`

这是可能的？

现在我有，`A2 =If(A1>0;NOW();"")`但`A2`总是在变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T23:27:03.863

这是一种解决方法，但实际上可能比可能需要脚本的替代方法更方便。请尝试将您的公式调整为：

```
=if(A1>0;B1;"") 
```

其中 B1 是任何方便的单元格。`Ctrl`然后用+ `Shift` +选择那个单元格`;`。这应该将当前时间放在 B1 （或任何地方），但与 =NOW() 不同，它不会更新。

严格来说，这不符合*如果单元格 A2 为空，我想将时间 HH:mm 放在单元格 A2 中*- 因为 A2 是公式的位置，但我希望这对你来说不是问题。

# asp.net - 如何确保只有在博客中创建帖子的用户才能在 .net MVC3 中删除或编辑它？

> ID：12023186
> 
> 赞同：1
> 
> 时间：2012-08-19T00:01:14.760
> 
> 标签：asp.net, sql, asp.net-mvc-3

如何确保只有在博客中创建帖子的用户才能删除或编辑它？

即用户可以创建博客文章并可以在`/post/edit/{ID}`. 如果用户将不属于他的帖子的 id 更改为其他不同的值怎么办？

如何确保他要编辑的帖子只属于他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:55:06.397

您可以编写一个自定义`Authorize`属性，您将在其中查询您的数据库，以确保当前连接的用户是他试图修改的博客文章的作者：

```
public class EnsureAuthorOfBlogAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        string blogId = httpContext.Request.RequestContext.RouteData.Values["id"] as string;
        string username = httpContext.User.Identity.Name;
        return IsBlogAuthor(username, blogId);
    }

    private bool IsBlogAuthor(string username, string blogId)
    {
        // TODO: you know what to do here
        throw new NotImplementedException();
    }
} 
```

然后用这个自定义属性装饰控制器动作：

```
[HttpDelete]
[EnsureAuthorOfBlog]
public ActionResult Delete(int id)
{
    ...
} 
```

和编辑一样：

```
[HttpPut]
[EnsureAuthorOfBlog]
public ActionResult Update(BlogViewModel blog)
{
    ...
} 
```

# android - HTTPPOST 到 aspx 文件

> ID：12023189
> 
> 赞同：1
> 
> 时间：2012-08-19T00:01:44.247
> 
> 标签：android, asp.net, http-post

我想发布到这个网址

[http://abc.com/Registration.aspx?MailID=PickUp&UserName=as&PickUpTime=19191919&Notes=bla&DeviceId=0000](http://abc.com/Registration.aspx?MailID=PickUp&UserName=as&PickUpTime=19191919&Notes=bla&DeviceId=0000)

```
HttpPost httppost = new HttpPost("http://abc.com/Davis/Registration.aspx");
    httppost.setHeader("MailID","MailID=PickUp");
    try {
        // Add your data

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        //nameValuePairs.add(new BasicNameValuePair("MailID","PickUp"));
        nameValuePairs.add(new BasicNameValuePair("UserName","as"));
        nameValuePairs.add(new BasicNameValuePair("PickUpTime",date));
        nameValuePairs.add(new BasicNameValuePair("Notes",note));
        nameValuePairs.add(new BasicNameValuePair("DeviceId",deviceID));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost); 
```

另外我怎么知道我正在传递什么网址。我怎样才能记录它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:10:19.693

您确定 MailID 应该在标题中吗？从问题的措辞来看，似乎所有值都在查询字符串中（在 ? 标记之后的 URL 中）。但是那你为什么需要 POST 呢？一个 GET 就足够了。

在标头中传递数据（例如 MailID）几乎是闻所未闻的。Querystring 和 POST 表单，这些是最受欢迎的地方。

所以先搞清楚服务端页面的接口。它是否期望 GET 或 POST（或两者之一）？然后将字段放置到正确的位置 - 放置到 URL（通过字符串连接）或实体中。

哦，您传递的 URL 是`http://abc.com/Davis/Registration.aspx`. 既不`setHeader()`也不`setEntity()`修改 URL 本身。

# html - HTML 图像映射替代

> ID：12023191
> 
> 赞同：3
> 
> 时间：2012-08-19T00:01:47.910
> 
> 标签：html, image

> **可能重复：**
> [是否仍在使用 HTML 图像映射？](https://stackoverflow.com/questions/5249502/are-html-image-maps-still-used)

我有一张图片：

![在此处输入图像描述](../Images/879ab4403afb3ce7abd1cb341576216b.png)

单击时我想绑定一个函数。我遇到的问题是单击时它下面的 div 需要触发另一个功能，并且由于顶部 div 下方的空白区域很乱。

我知道 html 图像映射可以解决这个问题，但我知道现在已弃用。有没有我可以使用的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:06:03.570

我已经重新阅读，我想我更充分地理解了你的问题。

检查这个 jsFiddle：http: [//jsfiddle.net/5p9DE/](http://jsfiddle.net/5p9DE/)

这几乎相同，因此您可以看到#phone div：http: [//jsfiddle.net/BPbk6/](http://jsfiddle.net/BPbk6/)

为了完整起见，代码：

CSS：

```
#container {
    position: relative;
}

#phone {
    position: absolute;
    top: 34px;
    left: 70px;
    width: 250px;
    height: 25px;
    -webkit-transform:rotate(-11deg);
}

#phone a {
    display: block;
    width: 250px;
    height: 25px;
}

#phone a span {
    margin-left: -9999px;
} 
```

HTML：

```
<div id="container">
    <div id="phone"><a href="/page.htm"><span>Link text</span></a></div>
    <img src="http://i.stack.imgur.com/8GvME.png">
</div> 
```

而且，正如其他人所说，您仍然可以使用 HTML 图像映射。这是一个 CSS 替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:08:52.993

从该图像和描述中确切地说出您想要实现的目标有点困难，但我会试一试。

我通常处理这个的方法是切片图像。从实际背景和您希望可点击的区域制作单独的图像。然后，您将可点击的图像作为背景添加到`<a>`链接到您想要的任何内容的标签中，并使用一些 css 正确定位它（可能绝对是具有背景的父级）。如果您可以向我们展示一些有关小提琴之类的实际代码，我可以证明我的意思...

# java - System.out.print(JPanel);

> ID：12023202
> 
> 赞同：2
> 
> 时间：2012-08-19T00:04:34.930
> 
> 标签：java, printing

```
core.EditArea[,119,96,556x931,invalid,layout=javax.swing.BoxLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=] 
```

我打印了一个JPanel，上面是一个输出。谁能告诉我那个“无效”部分是什么意思？

更好的是，如果有人知道在哪里可以找到尽可能多的东西的解释 System.out.print(thingy) 输出列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T00:08:40.873

`System.out.print(thingy)`只是打印方法`thingy.toString()`

`toString()`for`JPanel`来自`java.awt.Component`类：

```
public String toString() {
    return getClass().getName() + "[" + paramString() + "]";
} 
```

调用`protected String paramString()`它会导致我们回到`JPanel`这个方法被覆盖的地方：

```
/**
 * Returns a string representation of this JPanel. This method 
 * is intended to be used only for debugging purposes, and the 
 * content and format of the returned string may vary between      
 * implementations. The returned string may be empty but may not 
 * be <code>null</code>.
 * 
 * @return  a string representation of this JPanel.
 */
protected String paramString() {
    return super.paramString();
} 
```

这使我们`JCompomnent`看到了它的第一级父类`JPanel`（但它仍然没有显式声明，因此每个 JComponent 都会调用`toString()`这个 from ，包括 JPanel）。 所以，它被调用：`java.awt.Component`
`paramString()`

```
protected String paramString() {
    String preferredSizeString = (isPreferredSizeSet() ?
                  getPreferredSize().toString() : "");
    String minimumSizeString = (isMinimumSizeSet() ?
                getMinimumSize().toString() : "");
    String maximumSizeString = (isMaximumSizeSet() ?
                getMaximumSize().toString() : "");
    String borderString = (border != null ?
               border.toString() : "");

    return super.paramString() +
    ",alignmentX=" + alignmentX +
    ",alignmentY=" + alignmentY +
    ",border=" + borderString +
",flags=" + flags +             // should beef this up a bit
    ",maximumSize=" + maximumSizeString +
    ",minimumSize=" + minimumSizeString +
    ",preferredSize=" + preferredSizeString;
} 
```

......再一次 - `super.paramString()`- 从`java.awt.Container`

```
protected String paramString() {
String str = super.paramString();
LayoutManager layoutMgr = this.layoutMgr;
if (layoutMgr != null) {
    str += ",layout=" + layoutMgr.getClass().getName();
}
return str;
} 
```

......**再一次**- `super.paramString()`- 这**最终**让我们回到`java.awt.Component`

```
protected String paramString() {
    String thisName = getName();
    String str = (thisName != null? thisName : "") + "," + x + "," + y + "," + width + "x" + height;
    if (!isValid()) {
        str += ",invalid";
    }
    if (!visible) {
        str += ",hidden";
    }
    if (!enabled) {
        str += ",disabled";
    }
    return str;
} 
```

`invalid`这是打印在描述 JPanel 的字符串中的根本原因

```
/**
 * Determines whether this component is valid. A component is valid
 * when it is correctly sized and positioned within its parent
 * container and all its children are also valid. 
 * In order to account for peers' size requirements, components are invalidated
 * before they are first shown on the screen. By the time the parent container 
 * is fully realized, all its components will be valid.
 * @return <code>true</code> if the component is valid, <code>false</code>
 * otherwise
 * @see #validate
 * @see #invalidate
 * @since JDK1.0
 */
public boolean isValid() {
    return (peer != null) && valid;
} 
```

`valid`@Reimeus 很好地解释了如何实现状态

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-19T00:11:42.500

它是 的结果，[`isValid()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#isValid%28%29)由[`java.awt.Component`](http://www.docjar.com/html/api/javax/swing/JComponent.java.html)扩展`JPanel`：

> 公共布尔 isValid()
> 
> 确定此组件是否有效。当一个组件在其父容器中的大小和位置正确并且其所有子容器也有效时，它是有效的。为了考虑对等体的大小要求，组件在首次显示在屏幕上之前就无效了。当父容器完全实现时，它的所有组件都将有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-19T00:18:52.093

“无效”字段仅表示需要布置组件。可以通过“打包”父容器来实现“有效”，例如：

```
JPanel p = new JPanel();
JFrame frame = new JFrame();
frame.add(p);
frame.pack(); 
```

# javascript - Ascensor.js 在 iPad 和 iPhone 上无法正常工作

> ID：12023204
> 
> 赞同：-8
> 
> 时间：2012-08-19T00:04:52.080
> 
> 标签：javascript, jquery, iphone, ipad

如何在**ipad**和**iphone上解决这个****Ascensor.js**问题？你可以在这个网站上看到问题：[http ://www.tepekaninsaat.com/test](http://www.tepekaninsaat.com/test)

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:51:18.717

我会在这里留下这个答案，以防有人碰巧遇到和我一样的问题。

使用这个：[手势jQuery插件QuoJS](http://quojs.tapquo.com/api/)

然后你可以做这样的事情：

```
//QuoJS gesture    
$$('#mama').swipeLeft(function(){
        doit();
    }); 

function doit()
{
   $('.ascensorLinkNext:first').trigger('click');

} 
```

我使用 api 中为 ascensor.js 提供的类创建了一个“按钮”，因此我在触发手势时强制单击它。

这是我的第一个贡献。我希望我做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T09:55:07.827

它似乎在 Ipad(s) 上根本不起作用（以及 android 平板电脑）

我所做的是为使用 modernizr 的触摸设备禁用它：

在html中

```
<script src="ascensor/js/modernizr.2.6.1.js" type="text/javascript"></script> 
```

（在调用 jquery 之前）

然后在 myscript.js ：

```
$(document).ready(function() {
    if (Modernizr.touch){ // detion of touch
        // do nothing
        // should try to find a way to load an alternate 
        // stylesheet for ipads/android here
    } else {
        // load ascensor
        $('#content').ascensor({
            ...
        });
    }
 }); 
```

这不会使 ascensor 在 ipad 上工作，但至少你的 monopage 网站可以再次阅读:)

编辑 ：

另一种解决方案是使用元标记：

```
<meta name = "viewport" content = "user-scalable=0,width=device-width,initial-scale=1,maximum-scale=1" /> 
```

但是，如果它（大部分）解决了显示问题，导航（至少在我测试它的 Android 平板电脑上）仍然有点不稳定和故障，具体取决于地图的形状）****

# php - 使用 jquery 有效地更新多个 div

> ID：12023212
> 
> 赞同：0
> 
> 时间：2012-08-19T00:06:14.603
> 
> 标签：php, javascript, jquery, html, ajax

jquery noob 在这里。

我有一个问题要问专业人士和有 jquery 经验的人。我创建了这个脚本，但我正在努力提高它的效率。无论如何，这个想法是我在 HTML 页面上有多个条目，这些条目通过 PHP 来自 MYSQL 数据库。

所以，

A - A2

B - B2

C - C2

不，A、B 和 C 是静态的。它只是从数据库中读取。A2,B2,C2 是每 10 秒更新一次的动态元素。在当前的表单中，每个条目都有多个 javascript 副本，这是非常低效的。在大约 100 个条目时，我的 CPU 使用率飙升至 20-40%。

脚本如下：

```
<script>
$(function() { 
var refreshId = setInterval(function()
{
$('#UpdateDiv<?php echo $entry; ?>').load('live.php?entry=<?php echo $entry; ?>').fadeIn("slow");
 }, 10000);
});
</script>
<?PHP
echo '<div id="UpdateDiv'.$entry.'"></div>';
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:17:31.567

问题是每个 div 元素都有自己的脚本，因此发送自己的请求。

基本上，每 10 秒，您就会发出 100 个请求。

相反，您应该有一个脚本每 10 秒加载一次新数据（可能是 json 格式），然后更改每个 div 的内容。

您可以通过遍历 json 数组中的每个元素并设置（伪代码）来做到这一点

```
for each i
  div[i].innerHTML(jsonarray[i]) 
```

其中 div[i] 是代表每个 div 的 jquery 对象。

* * *

要为每个条目加载数据，您需要使用名为的 php 页面创建一个新页面（例如）

直播.json

它将每个 div 内容放入一个 json 数组 ["content1","content2"]

如果 php 页面的名称没有 .json 后缀，您将需要 ajax 调用（您可以使用 ajax jquery 函数 - [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）来设置将其解释为 .json 文件。

然后设置响应成功时的回调，并使用该 for 循环将内容放入每个 div 元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:45:10.923

您的问题是单独提出请求。通过每十秒左右将所有请求合并为一个请求，您将大大提高页面的效率。

您的 javascript 一次请求并显示所有条目：

```
var get_entries = function () {
    $.ajax({
        post: true,
        url: "entries.php",
        data: {
            entries: [1, 2, 3, 4, 5, 6, 7, 8]
        },
        success: function (response) {
            var entry_updates = JSON.parse(response);

            for (var entry in entry_updates) {
                $("#UpdateDiv" + entry).html(entry_updates[ entry ]);
            }
        }
    });
};

setInterval(get_entries, 10000); 
```

并且您的 PHP 可以一次处理所有条目：

```
<?php

$entry_updates = array();

if (isset($_POST['entries'])) {
    foreach ($_POST['entries'] as $entry) {
        $entry_updates[ $entry ] = func_get_entry_info($entry);
    }
}

echo json_encode($entry_updates); 
```

# c++ - 删除指针的部分内存

> ID：12023215
> 
> 赞同：0
> 
> 时间：2012-08-19T00:06:37.547
> 
> 标签：c++, new-operator, realloc

有什么办法可以删除指针的部分内存。？例如

```
char *c = new char[1000];
sprintf(c,"this is it"); 
```

可以看出，这里浪费了很多内存。我可以释放超过所需的内存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:08:39.670

不是直接的。在 C++ 中您能做的最好的事情就是制作一个大小合适的新副本并删除旧副本。没有 C 的类似物`realloc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:12:30.797

除非您的系统是 RAM 受限的嵌入式系统，否则何必费心呢？只需使用巨大的缓冲区并包含一个'dataLen' int。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:33:18.110

好吧，分配另一个具有数据所需精确大小的内存块，将数据复制到那里并释放原始（非常大的）内存块。完毕。

# arrays - 当一个块可能跨越两个 blob 时从 SQlite blob 读取块

> ID：12023220
> 
> 赞同：0
> 
> 时间：2012-08-19T00:07:52.387
> 
> 标签：arrays, sqlite, blobs, circular-buffer

我有一种情况，我需要从 SQlite 数据库中读取任意大小（但通常很小）的二进制数据块。数据库位于磁盘上，数据存储在由 id 和 256 到 64k 字节之间的只读 blob 组成的行中（长度始终是 2 的幂）。我使用 SQlite[增量 I/O](http://www.sqlite.org/c3ref/blob_open.html)将块读入可重写缓冲区，然后取块中值的平均值，并缓存结果。

我遇到的问题是，由于块的大小是任意的，所以 blob 大小只会偶尔是块大小的整数倍。这意味着一个块将非常频繁地跨越两个 blob。

我正在寻找的是一种简单而优雅（因为'优雅不是可选'）的方式来处理这个稍微尴尬的场景。我有一个`read-chunk`相当愚蠢的功能，只需读取块和计算平均值。到目前为止，我已经尝试了以下策略：

*   只读取重叠块的第一部分，丢弃第二部分。
*   `read-chunk`注意 blob 边界，以便它可以在适当的地方移动到下一个 blob 。
*   使用环形缓冲区之类的东西，这样重叠的块就可以环绕边缘。

第一个选项是最简单的，但不能令人满意，因为它丢弃了潜在的重要信息。由于`read-chunk`经常被调用，我不想用太多的分支逻辑来负担它，所以第二个选项也没有吸引力。使用环形缓冲区（或类似的东西）似乎是一个优雅的解决方案。我设想的是一个生产者，它从 blob 中读取中等大小（比如 256 字节）的块到一个 1k 的缓冲区中，然后是一个调用`read-chunk`缓冲区的消费者，在适当的地方环绕。由于我将始终处理 2 的幂，因此生产者将始终与缓冲区的边缘对齐，并且我还可以避免使用`mod`它来计算生产者和消费者的索引。

我正在使用 Lisp (CL)，但由于这似乎是一个通用的算法或数据结构问题，所以我将其与语言无关。我感兴趣的是澄清我有哪些选择 - 除了我列出的选择之外，还有其他选择吗？

# image - 如何找到有人更改了他们的 Twitter 个人资料图片？

> ID：12023222
> 
> 赞同：2
> 
> 时间：2012-08-19T00:08:09.927
> 
> 标签：image, image-processing, twitter

比如说，在我的应用程序中，我有一个用户关注的朋友列表（Twitter ID）。我展示了他们的名字和他们的形象（来自 Twitter）。每次用户登录应用程序时，我都想从 Twitter 获取最近的个人资料显示图像。

我怎么知道，有人更改了他们的 Twitter 个人资料图片？

目前，我认为，我需要获取他们的图像（我使用 Twitter API：GET users/profile_image/:screen_name）并找到修改时间，如果它不是更新的，我认为它没有改变。有更好的方法吗？如果你必须建造这样的东西，你会怎么做？我讨厌获取所有图像文件并一个接一个地检查它们。我希望有更好的方法来获取最近更改了个人资料的人的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:49:29.917

您可以尝试查看[http://api.twitter.com/1/account/verify_credentials.json](http://api.twitter.com/1/account/verify_credentials.json)并查看其中是否有任何内容跟踪配置文件更改，尽管我对此表示怀疑。（尝试使用：[https](https://dev.twitter.com/console) ://dev.twitter.com/console以获得更简单的界面）。

如果您在 API 中找不到任何内容，则无需检查就无法知道配置文件图像已更改。在这种情况下，您可以存储旧图像的哈希值，并比较任何新图像的哈希值，看看它们是否匹配。如果他们不这样做，那么你知道它已经改变了。

希望有帮助。

# python - 在 Python 对象中设置数据字段时，我应该使用“self”关键字吗？

> ID：12023227
> 
> 赞同：1
> 
> 时间：2012-08-19T00:09:54.920
> 
> 标签：python

我应该写吗

```
class MyClass:
     def __init__(self):
         self.field = 0 
```

或者

```
class MyClass:
     def __init__(self):
         field = 0 
```

这些陈述之间有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T00:11:55.033

是的，您*必须*使用该`self`变量来设置 Python 对象/实例的属性。

在第二种情况下，您只是在 中创建局部变量`__init__`，而不是定义属性。

```
class MyClass:
    def __init__(self):
        field = 0

print MyClass().field # an error! it's not defined! 
```

您可能会被您可以在`class`块中使用原始分配来设置类属性的方式误导：

```
class MyClass:
    a = 2

print MyClass.a # 2 
```

块中的行为`class`是不寻常的，您不会在方法中得到类似的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T00:13:31.520

第一段代码创建了一个实例属性，一旦创建了类的实例就可以访问该属性：

```
>>> a = MyClass()
>>> a.field
0 
```

第二个块的`field`变量的范围仅在`__init__`函数内，因此访问该范围之外的变量将不起作用：

```
>>> a = MyClass()
>>> a.field
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: MyClass instance has no attribute 'field' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:11:43.510

前者将值设置为类的属性。后者，只是一个局部变量。

如果在你的程序的其他地方你这样做

```
foo = MyClass();
print foo.field; 
```

上面的 print 语句只适用于第一个代码片段，而不适用于第二个。

# ruby - 检查 Ruby HTTP 响应是否成功

> ID：12023231
> 
> 赞同：46
> 
> 时间：2012-08-19T00:10:29.813
> 
> 标签：ruby, net-http

如何正确检查来自 Net::HTTP::Get 的响应（例如）是否“成功”（即 2xx 返回码）？可悲的是，文档似乎对这个简单的问题保持沉默。

我有：

```
response=Net::HTTP.new( host, port ).request my_get_request # details not important 
```

经过一堆谷歌搜索和近乎随机的打字后，我终于确定这是可行的：

```
response.class < Net::HTTPSuccess 
```

这实际上是规范的方法吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-19T00:19:55.627

对于`Net::HTTP`，是的，检查响应对象的类是这样做的方法。使用[`kind_of?`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-kind_of-3F)（也称为别名[`is_a?`](https://ruby-doc.org/core-1.9.3/Object.html#method-i-is_a-3F)）更清晰一些（但在功能上等同于使用[`<`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-3C)）：

```
response.kind_of? Net::HTTPSuccess 
```

如果状态码不是成功的，调用[`value`](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPResponse.html#method-i-value)on`response`也会引发一个（多么糟糕的命名方法……）。`Net::HTTPError`

如果可以，您可能需要考虑使用 gem 而不是`Net::HTTP`，因为它们通常提供更好的 API 和性能。[Typhoeus](http://github.com/pauldix/typhoeus)和[HTTParty](http://github.com/jnunemaker/httparty)是两个不错的[选择](https://www.ruby-toolbox.com/categories/http_clients)。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-08T23:12:08.940

您可以利用 Ruby 的`case`语句惯用地执行类比较，这要归功于它在底层使用[===](http://www.ruby-doc.org/core-2.1.1/Object.html#method-i-3D-3D-3D)。

这是一个来自 JSON 客户端的示例，它捕获特定错误但仅返回服务器的消息：

```
 case response
    when Net::HTTPSuccess
      JSON.parse response.body
    when Net::HTTPUnauthorized
      {'error' => "#{response.message}: username and password set and correct?"}
    when Net::HTTPServerError
      {'error' => "#{response.message}: try again later?"}
    else
      {'error' => response.message}
  end 
```

注意上面的[Net::HTTPResponse 父类](http://apidock.com/ruby/Net/HTTPResponse)（例如`Net::HTTPServerError`）也可以工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-22T21:43:54.140

如果您只想获取外部 API 或网站的 HTTP 状态代码，请尝试[`Net::HTTP.get_response`](http://www.ruby-doc.org/stdlib-2.0.0/libdoc/net/http/rdoc/Net/HTTP.html#method-c-get_response).

`Net::HTTP.get(url)`返回一个字符串。您将无法轻松地从中解析标头响应：

```
url = URI('http://example.com')
string_response = Net::HTTP.get(url)
# => "<!doctype html>\n<html>\n<head>\n    <title>Example Domain</title>\n\n    <meta charset=\"utf-8\" />\n    <meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <style type=\"text/css\">\n    body {\n        background-color: #f0f0f2;\n        margin: 0;\n        padding: 0;\n        font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n        \n    }\n    div {\n        width: 600px;\n        margin: 5em auto;\n        padding: 50px;\n        background-color: #fff;\n        border-radius: 1em;\n    }\n    a:link, a:visited {\n        color: #38488f;\n        text-decoration: none;\n    }\n    @media (max-width: 700px) {\n        body {\n            background-color: #fff;\n        }\n        div {\n            width: auto;\n            margin: 0 auto;\n            border-radius: 0;\n            padding: 1em;\n        }\n    }\n    </style>    \n</head>\n\n<body>\n<div>\n    <h1>Example Domain</h1>\n    <p>This domain is established to be used for illustrative examples in documents. You may use this\n    domain in examples without prior coordination or asking for permission.</p>\n    <p><a href=\"http://www.iana.org/domains/example\">More information...</a></p>\n</div>\n</body>\n</html>\n"

string_response.class
# => String
string_response.kind_of? Net::HTTPSuccess
# => false

status_response = Net::HTTP.get_response(url)
# => #<Net::HTTPOK 200 OK readbody=true>
status_response.class
# => Net::HTTPOK
status_response.kind_of? Net::HTTPSuccess
# => true 
```

# python - 在 h5py 中混合高级和低级接口

> ID：12023248
> 
> 赞同：2
> 
> 时间：2012-08-19T00:14:49.120
> 
> 标签：python, hdf5, h5py

我想知道是否有一种方法可以使用 h5py 将高级 API 与低级 API 混合。

示例：我有一个通过高级接口访问的 hdf5 文件。

```
import h5py
f = h5py.File("Somefile.h5")
ds = f["/path/to/some/Dataset"] 
```

现在，该`ds`对象是一个[h5py.Dataset](http://h5py.alfven.org/docs-2.0/high/dataset.html#h5py.Dataset)，它非常适合我需要做的大部分事情。但是，我想弄清楚这个数据集存储在磁盘上的大小。低级接口提供[h5py.h5d.DatasetID.get_storage_space()](http://h5py.alfven.org/docs-2.0/low/h5d.html#h5py.h5d.DatasetID.get_storage_size)这正是我想要的，但我不知道如何从我的高级对象调用它。

有没有办法从高级 API 中找到底层的低级对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T22:46:33.293

找到了解决方案。虽然不在文档中，但使用交互式搜索高级对象`dir()`显示了解决方案。高级对象具有指向其对应的具有非显而易见名称的低级对象的链接。

在上面的问题中，`ds._id`返回与 Dataset 关联的 DatasetID。现在我可以打电话了`ds._id.get_storage_space()`。

# view - 3D 视图截锥体剔除，光线投射

> ID：12023249
> 
> 赞同：0
> 
> 时间：2012-08-19T00:15:08.697
> 
> 标签：view, 3d, raycasting, frustum, culling

我需要更多关于视锥体剔除的理论，以更好地理解如何实现它。我知道光线投射是为了弄清楚前面有什么物体，从而找出不渲染的物体。

我担心 CPU 使用率。据我了解，我应该按相机的宽度*高度投射光线，并且可能会根据相机看到的距离增加光线的数量。此外，我必须将其乘以场景中的对象数量，以验证哪个最接近光线。

我对这个概念的理解准确吗？我究竟怎样才能更有效地做到这一点？

编辑：

目标是实现某种类型的体素引擎，其中世界可以使用八叉树进行细分。它可能由数十万个立方体组成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:24:43.617

我不认为视锥体剔除通常涉及光线投射。

通常，您只需对所有几何图形进行 z 变换，然后剪裁顶点落在视口之外的任何多边形，或者其 z 值大于或小于近/远剪裁平面的多边形。

光线投射会更昂贵，因为您实际上是在测试视口中的每个像素以查看其后面是否有一个多边形，这可能是 NUMBER_OF_PIXELS * NUMBER_OF_POLYGONS 数学运算，而不仅仅是 NUMBER_OF_POLYGONS。

编辑：

哦，我明白了：您正在尝试创建一个像 Minecraft 这样的体素空间世界。这有点不同。

诀窍是利用您知道世界是一个网格的事实，以避免对被靠近相机的立方体遮挡的几何图形进行计算。

我仍然不确定光线投射是最好的方法——我怀疑你想要一个像八叉树结构这样的东西，它可以让你快速丢弃大量的块，但我会让有更多经验的人来构建这样的东西称量体重 ;-）

编辑2：

看起来 StackOverflow 上的其他人也有同样的问题（并且他们使用了八叉树）：[用于渲染大量立方体的剔除技术](https://stackoverflow.com/questions/3693407/culling-techniques-for-rendering-lots-of-cubes)

# regex - 正则表达式以最小长度分割

> ID：12023251
> 
> 赞同：2
> 
> 时间：2012-08-19T00:15:21.623
> 
> 标签：regex

在 C# 中，我正在构建一个地址解析器。假设我有地址：

`Av. Rouxinol 101 - São Paulo - Brasil - CEP 04516-001 - Fone + 55 11 2151`

我希望将字符串拆分为单独的行。期望的结果是：

1.  `Av. Rouxinol 101`
2.  `São Paulo Brasil`
3.  `CEP 04516-001`
4.  `Fone + 55 11 2151`

拆分`-`将给我 5 行；它还将拆分 CEP（巴西邮政编码）。

所以，我想实现的逻辑是每个部分至少应该有 6 个字符长，所以我想我必须使用lookbehind/forward？

到目前为止，我有：

```
(?<=.{6})-(?=.{6}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:19:41.777

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:30:32.540

Use regex `(?:^|(?<=\s-\s)).*?(?:(?=\s-\s[^-]{8,})|$)`

```
using System;
using System.Text.RegularExpressions;

public class Test
{
  public static void Main()
  {
    string input = "Av. Rouxinol 101 - Sao Paulo - Brasil - CEP 04516-001 - Fone + 55 11 2151";
    Regex re = new Regex(@"(?:^|(?<=\s-\s)).*?(?:(?=\s-\s[^-]{8,})|$)", RegexOptions.Singleline);
    MatchCollection matches = re.Matches(input);
    foreach (Match m in matches) {
      Console.WriteLine(m);
    }
  }
} 
```

*Test this code* [*here*](http://ideone.com/yy816).

Output:

```
Av. Rouxinol 101
Sao Paulo - Brasil
CEP 04516-001
Fone + 55 11 2151 
```

# php - 在php中调用一个案例

> ID：12023252
> 
> 赞同：-3
> 
> 时间：2012-08-19T00:15:45.140
> 
> 标签：php, switch-statement

我有一个用于聊天的自动机器人脚本，我使用 switch() 切换到命令。是否可以调用这样的命令之一；

```
case '!pie':
sendMsg("Pie is great");
break;
case '!call':
sendMsg(call_switch($usersmg)); //call whatever the user said
break; 
```

我不想手动添加，我希望用户也能够自己调用其他命令。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:18:45.320

那这个呢：

```
$input = '!call !pie';
$args = explode(' ', $input);

if ($args[0] == '!call' && count($args) > 1)
   array_shift($args);

switch ($args[0]) {
  case '!pie':
    ....
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T00:17:53.947

多个案例可以通过让它“失败”来做同样的事情：

```
switch(something) {
    case '!pie':
    case '!call':
        sendMsg("Pie is great");
        break;
} 
```

或者，您可以在切换之前查看命令是否为“！call”，并在到达切换之前根据需要更改命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T00:40:24.790

不，你不能调用一些东西，除非它是一个函数。当出现您希望可以调用另一种情况的情况时，解决方案通常是函数表。代替大的 switch() 语句，您有一个指向函数名称的数组，其中以 case 作为键。

顺便说一句，这是 PHP 本身所经历的变化。在 PHP 4 中，VM 使用一个巨大的 switch 语句来处理操作码。在 PHP 5 中，改为使用函数表。调用函数会产生堆栈帧构造的成本。不过，增加的灵活性通常可以弥补这一点。

# jquery - 结合更改和链接的 jquery 插件

> ID：12023257
> 
> 赞同：2
> 
> 时间：2012-08-19T00:16:51.297
> 
> 标签：jquery, drop-down-menu, chained

我正在尝试创建一个以调用页面结尾的简单链接（[http://www.appelsiini.net/projects/chained](http://www.appelsiini.net/projects/chained)）选择框，并使用了在此站点上找到的两个代码片段，但我有将两者结合起来真的很麻烦。这是我的脚本：

```
$(function() { 
 $("#classifications").chained("#rounds");
    $("#classifications").change(function(){
  $("#result").load( $(this).val() );
});
}); 
```

和我的html：

```
<select id="rounds">
<option value="">select round</option>
  <option value="metric">Metric</option>
  <option value="imperial">Imperial</option>
</select>
<select id="classifications">
  <option value="">Select Classification</option>
  <option value="test1.html" class="metric">Gents Metric</option>
  <option  value="test2.html" class="metric">Ladies Metric</option>
  <option  value="test3.html" class="metric">Juniors Metric</option>
  <option value="test5.html" class="imperial">Gents Imperial</option>
  <option value="test6.html" class="imperial">Ladies Imperial</option>
  <option value="test4.html" class="imperial">Juniors Imperial</option>
</select>
<div id="result"></div> 
```

它应该很简单，但我找不到我要去哪里错了？它可以工作，但会导致选择框被重复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:46:38.013

在`chained()`插件中，尝试从源代码中注释掉[第 54 行，](http://www.appelsiini.net/download/jquery.chained.js)它应该是：

```
$(self).trigger("change"); 
```

我做到了，一切都按预期工作。我没有将它扩展到超过 2 个选择，所以如果这是你需要的东西，你应该解决这个问题。

# emacs - 将书签-bmenu-list 放入新框架

> ID：12023262
> 
> 赞同：1
> 
> 时间：2012-08-19T00:18:12.467
> 
> 标签：emacs, elisp, bookmarks

Nicolas Dudebout 帮助我找出了我最后一个函数的问题，即如何让所有缓冲区菜单出现在新框架中。这是最终版本：

```
(defun get-buffer-menu-in-new-frame ()
(interactive)
(switch-to-buffer-other-frame (list-buffers-noselect))) 
```

这很好用。[emacs 制作帧切换缓冲区](https://stackoverflow.com/questions/12014036/emacs-make-frame-switch-buffer)

我还想在自己的框架中获取书签列表，我认为这很容易：

```
(defun get-bookmarks-in-new-frame ()
(interactive)
(switch-to-buffer-other-frame (bookmark-bmenu-list))) 
```

但是当我做 Mx get-bookmarks-in-new-frame 我得到这个错误：

调试器进入--Lisp 错误: (wrong-type-argument stringp t) get-buffer(t) pop-to-buffer(tt nil) switch-to-buffer-other-frame(t) get-bookmarks-in-new -frame() eval((get-bookmarks-in-new-frame))

所以我认为bookmark-bmenu-list 的返回类型与list-buffers-noselect 不同，但我找不到这个信息。有小费吗？

# ruby - 解析来自foursquare的回调URL？

> ID：12023281
> 
> 赞同：1
> 
> 时间：2012-08-19T00:23:22.743
> 
> 标签：ruby, url, foursquare, access-token

我正在尝试解析从foursquare api（回调URL）返回的URL，问题是请求以这种格式出现

```
0.0.0.0:4567/foursquare#access_token=KCZGA4JIR4N3QXXAASZTZRYWHU2TYJITM53LARSKHRVFPHQ 
```

如您所见，主题标签在我的代码中造成了严重破坏，因为找不到使用`request.url`或整个请求对象的地方。

有没有人解决这个问题？我不是在尝试进行身份验证，我已经从 iOS 应用程序内部进行了验证。

```
require 'sinatra'
require 'json'
require 'dm-core'
require 'dm-validations'
require 'dm-timestamps'
require 'dm-migrations'
require 'dm-ar-finders'

# where foursquare sent us after authorization
get "/foursquare" do
    puts "Receiving ..." + request.url
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T23:28:52.267

可能不是您想听到的，但快速解决方法是让您的 Sinatra（假设给定您的端口号）而不是 iOS 应用程序进行身份验证。这样您就可以利用omniauth-foursquare gem，[https://github.com/arunagw/omniauth-foursquare/blob/master/lib/omniauth/strategies/foursquare.rb](https://github.com/arunagw/omniauth-foursquare/blob/master/lib/omniauth/strategies/foursquare.rb)，它将为您完成大部分解析.

根据 Foursquare 的 API 页面[https://developer.foursquare.com/resources/client](https://developer.foursquare.com/resources/client)，他们也建议进行基于 Web 的身份验证。

# java - 如何在 Java 中捕获 Enter 键并将事件更改为 Tab

> ID：12023284
> 
> 赞同：2
> 
> 时间：2012-08-19T00:24:18.367
> 
> 标签：java, swing, keylistener

我有一个带有多个 jtextfield 的摇摆应用程序。你如何替换回车键的功能，当你按下回车键时，它会像 tab 键一样转移到下一个焦点组件？我不想在每个 jtextfield 上放置一个 keylistener。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T00:35:59.320

您正在寻找[`Container.setFocusTraversalKeys`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#setFocusTraversalKeys%28int,%20java.util.Set%29)：

```
Container root = ...
// pressed TAB, control pressed TAB
Set<AWTKeyStroke> defaultKeys = root.getFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS);
// since defaultKeys is unmodifiable
Set<AWTKeyStroke> newKeys = new HashSet<>(defaultKeys); 
newKeys.add(KeyStroke.getKeyStroke("pressed ENTER"));
root.setFocusTraversalKeys(KeyboardFocusManager.FORWARD_TRAVERSAL_KEYS, newKeys); 
```

有关更多信息，请查看[Focus Subsystem 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T00:35:02.423

您可以致电：

```
KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
manager.focusNextComponent(); 
```

但是您必须在所有 JTextField 中注册一个 ActionListener。

# python - SWIG 和 Visual Studio 入门

> ID：12023285
> 
> 赞同：1
> 
> 时间：2012-08-19T00:24:34.933
> 
> 标签：python, visual-studio-2010, swig

我正在尝试使用我从 swig,org 下载的示例使用 Visual Studio 2010 创建我的第一个 SWIG python DLL。我正在运行 64 位 Windows 专业版。我下载了 swigwin-2.0.7 并解压。我已按照[此处](https://stackoverflow.com/questions/5969173/how-to-swig-in-vs2010)和[此处](https://stackoverflow.com/questions/11693047/how-to-create-a-dll-with-swig-from-visual-studio-2010)的说明进行操作，在这两种情况下，都会构建包装文件，但项目构建失败。链接器抱怨 56 个未解析的外部符号，所有符号的名称都类似于 __imp__PyBytes_AsStringAndSize 或 __imp__PyExc_RuntimeError。

我已经使用我的 python 2.7 安装以及我的 python 3.2 安装尝试了这个，结果相似。我必须从源代码为我的平台构建 swig 吗？我在这上面花了 6 个小时左右，我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:03:19.920

Following the instructions [here](https://stackoverflow.com/questions/11693047/how-to-create-a-dll-with-swig-from-visual-studio-2010), using the `simple` Python example from SWIG, Windows 7 64-bit and Python 2.7 32-bit, I did not see the OP's specific errors. I saw:

```
1>example_wrap.obj : error LNK2019: unresolved external symbol "int __cdecl gcd(int,int)" (?gcd@@YAHHH@Z) referenced in function __wrap_gcd
1>example_wrap.obj : error LNK2001: unresolved external symbol "double Foo" (?Foo@@3NA) 
```

Two changes had to be made due to the `simple` example being C source instead of C++:

1.  Do not use the `-c++` switch on the `swig` command line (step 13 of the instructions).
2.  The generated file is now `example_wrap.c` not `example_wrap.cxx` (referred to in steps 14 and 19 of the instructions).

Alternatively, just rename `example.c` to `example.cpp` in this case before following the instructions and they should work as is.

# python - Python中的局部变量

> ID：12023289
> 
> 赞同：-2
> 
> 时间：2012-08-19T00:25:41.290
> 
> 标签：python

我写了这个小程序来打印乘法表。我正在理解局部变量，然后我在每个函数中添加了两个具有相同名称的变量。但它正在运行，我没有得到任何 2 个具有同名错误的变量。请帮助我理解这里的想法 -

```
def printMultiples(n):
    i = 1
    i = 5
    while i <= 10:
        print n*i, '\t',
        i = i + 1
    print

def printMultTable():
    i = 1
    i = 10
    while i <= 10:
        printMultiples(i)
        i = i + 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:28:33.683

`i`一旦函数运行，变量就会被定义，它不会等到行

```
i = 1
i = 10 
```

正在运行。编译代码时，Python 会查看函数中分配的每个变量，并为任何未声明为`global`或的变量创建定义`nonlocal`。

每`i =`行只会更改值，不会导致再次定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T00:28:40.597

这是您的脚本中发生的事情：

```
i = 1 
```

创建变量`i`并将值 1 分配给它

```
i = 5 
```

`i`用5替换保存的值

```
while i <= 10: 
```

开始你的循环

```
 print n*i, '\t', 
```

循环的第一次迭代将打印 n * 5 和一个制表符

```
 i = i + 1 
```

将 i 加一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T00:28:52.087

没有两个同名的变量，只有一个变量被分配了两次。

```
i = 1  # i is declared and assigned to 1
i = 5  # the same i is reassigned to 5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T00:29:10.313

您实际上并没有创建两个具有相同名称的变量。您的第二个`i =`是重新分配`i`给一个新值，与`i = i + 1`设置`i`为 的值相同`i + 1`。

顺便说一下，还有更多 Pythonic 方法可以处理固定次数的循环：

```
for i in range(1, 11):
    printMultiples(i) 
```

这将对`printMultiples`从 1 开始且小于 11 的值执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-19T00:29:23.187

在 python 中，符号只是变量的名称。它们不像 C/C++ 那样分配内存。因此，您所做的只是在每种情况下将值重新分配给“i”。

# c# - 比较 3 个对象

> ID：12023294
> 
> 赞同：2
> 
> 时间：2012-08-19T00:26:52.360
> 
> 标签：c#, comparison, comparator, icomparable, icomparer

我正在用 C# 编写通用二叉树。

在我的应用程序的一部分中，我需要按距离排序。

从 A 到 C 和 B 到 C。

像这样的东西：

```
if ((A->C) == (B->C))  
    return 0;
else if((A->C) < (B->C))
    return -1;
else
    return 1; 
```

但问题是，我只能在 2 个对象之间进行比较……而且我需要某种比较器。

创建像“开始和结束之间的距离”这样的类是正确的解决方案吗？我认为它产生了太多的垃圾。

有什么解决办法吗？谢谢 ;-）

编辑：

```
public AvlNode<T> _left, _right;
public Stack<T> _obj;

(...)

public AvlNode<T> Insert(T obj, IComparer<T> iComparer)
    {
        if (iComparer.Compare(obj, _obj.Peek()) > 0)
        {
            _right = (_right != null) ? _right.Insert(obj, iComparer) : new AvlNode<T>(obj);
            return Balance();
        }
        else if (iComparer.Compare(obj, _obj.Peek()) < 0)
        {
            _left = (_left != null) ? _left.Insert(obj, iComparer) : new AvlNode<T>(obj);
            return Balance();
        }
        else
        {
            _obj.Push(obj);  // distance already exists but object may be different, that's why I use a stack...
            return this;
        }
    } 
```

我没有工作的 IComparer...

编辑：

问题解决了，现在我有一个工作的 IComparer！

```
public class ObjectDistanceComparer : IComparer<EraObject>
{
    Vector3 _position;

    public ObjectDistanceComparer(Vector3 position)
    {
        _position = position;
    }

    int IComparer<EraObject>.Compare(EraObject obj1, EraObject obj2)
    {
        float d1 = (_position - obj1._position).LengthSquared();
        float d2 = (_position - obj2._position).LengthSquared();
        return (d1 == d2)? 0 : (d1 < d2)? -1 : 1;
    }
} 
```

谢谢 ;-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:48:04.730

您可以向 Node 类添加额外的属性：

```
public class Node : IComparable
{
   Node Parent{get;set;}
   Node LChild {get;set;}
   Node RChild {get;set;}
   Node C {get;set;}

   public int CompareTo(object o)
   {
      // Now you passed C in your object, do stuff ...
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T00:56:56.120

```
public class Distance
{
int Source {get;set;}
int Destination{get;set;}
int Value{ 
          get{ return Math.Abs(Destination - Source);}
         }
} 
```

# ios - 处理来自表视图控制器错误的多个 Segue。

> ID：12023297
> 
> 赞同：0
> 
> 时间：2012-08-19T00:28:15.310
> 
> 标签：ios, uitableview, storyboard, segue

好吧，这是我在这个网站上的第一篇文章，我喜欢这个网站如此受欢迎的事实。它为新程序员提供了很好的建议。所以我最近开始着手 iOS 编程，并且遇到了我的第一个“无法解决的障碍”

我正在使用 xCode 4.3.3。

我的设置/问题：

我有一个表格视图控制器，它有三个单元格：“所有视频”、“最近的视频”、“书签视频”。根据选择的单元格，加载不同的表格视图控制器。很简单。

我已将我的 segues 从表视图控制器本身连接到其他表视图控制器，而不是从原型单元。

我已经为故事板中的每个 segue 添加了适当的标识符。“全部”、“最近”、“书签”。

我的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *titleOfCell= [[[tableView cellForRowAtIndexPath:indexPath]textLabel]text];
NSString *identifer;
if ([titleOfCell isEqualToString:@"Search All Videos"]) {
    identifer=@"all";
}
if ([titleOfCell isEqualToString:@"Recently Viewed"]) {
    identifer=@"recent";  

}
if ([titleOfCell isEqualToString:@"Bookmarked"]) {
    identifer=@"bookmark";

}
[self performSegueWithIdentifier:identifer sender:self];
} 
```

. 我运行代码并单击一个单元格，它给了我 NSInvalidArgumentException'，原因：'Receiver () has no segue with identifier ' **_** '

对于每一个细胞！我在扯头发。有任何想法吗？？我已经检查了四倍的错别字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:08:36.743

将 segues 连接到视图控制器不是问题，问题是你如何“阅读”`titleOfcell`

添加`.section.row`到“ `cellForRowAtIndexPath:indexPath`……”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:19:41.503

问题在于您已将 segue 连接到 tableView 而不是单元格。

对于您发布的问题，如果单元格的数量是固定的，您可以直接从单元格到不同的视图控制器并相应地命名 segue 标识符。不需要任何编码。

# java - selenium 无法访问浏览器异常，java 套接字异常

> ID：12023305
> 
> 赞同：5
> 
> 时间：2012-08-19T00:30:34.557
> 
> 标签：java, selenium, webdriver

最近，特别是在同一台电脑上运行多个任务和进程时，selenium webdriver 2 给出了许多无法访问的浏览器异常，这些异常总是带有 java 套接字异常：

```
 Exception in thread "main" org.openqa.selenium.remote.UnreachableBrowserException:                         Could not start a new session. Possible causes are invalid address of the remote server or     browser start-up failure.
   Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
  System info: os.name: 'Windows Vista', os.arch: 'x86', os.version: '6.0',       java.version: '1.7.0_05'
   Driver info: driver.version: FirefoxDriver
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:493)
at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:182)
at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:185)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:178)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:174)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:92)

    Caused by: java.net.SocketException: Permission denied: connect
at java.net.DualStackPlainSocketImpl.connect0(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:150)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:575)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.openqa.selenium.remote.HttpCommandExecutor.fallBackExecute(HttpCommandExecutor.java:319)
at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:297)
at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.execute(NewProfileExtensionConnection.java:136)
at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.execute(FirefoxDriver.java:357)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:472)
... 7 more 
```

为什么这种情况经常发生？selenim 2.25 与 firefox 14 不兼容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-08T17:57:02.727

我发现自己在这个问题上苦苦挣扎了几个月，我真的尝试了几乎所有东西，但仍然出现随机的“UnreachableBrowserException”错误。

这是我唯一可行的解​​决方案。

```
System.setProperty("java.net.preferIPv4Stack" , "true"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:26:47.917

Selenium Web Driver 也有同样的问题。特别是当我在不重新启动 Web 驱动程序的情况下运行较长的测试脚本时。然后我搬到了一台性能很好的新机器上，然后我可以避免它近 90%。

我认为这是因为内存不足而发生的，因此我将新机器上的 RAM 升级到了 4GB。

这解决了我的问题，现在一切正常。

注意：每次试运行后请检查您是否正确关闭了驱动程序，也可能由于内存泄漏导致驱动程序被杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T10:27:03.427

This is because of 2 reasons

*   session not getting killed, try to kill the session and run the test again.

*   selenium web driver cannot find the FF browser to start it.

Also Check all your client drivers and selenium-server.jar are placed on the libararies.

Could you paste the configuration code on starting FF?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-28T10:39:06.140

我曾多次遇到过这个问题。相同的原因可能有多种。

1.  您的浏览器实例未正确关闭。因此，当您调用 driver.close() 方法时，请从您的任务管理器中检查它是否正在杀死驱动程序。我观察到它主要用于 chrome 和 IE。对于 Firefox，它会自动关闭实例。

2.  FF 和 Webdriver 版本应该相互兼容。更改您的 Webdriver jar 并尝试一下。

3.  您的项目中可能存在不需要的 jar。Xalan.jar 曾经给我带来了问题。取下来看看。

# r - R：饼图有不同类型的颜色和切片信息？

> ID：12023309
> 
> 赞同：-3
> 
> 时间：2012-08-19T00:32:03.117
> 
> 标签：r, graphics, annotations, pie-chart, labels

我正在尝试在 R 中制作以下样式的饼图。您可以在第 5 页找到原始图 1，此处为[1](https://i.stack.imgur.com/v2XgG.png)。无论如何，以下是混淆版本，不破坏任何版权，仅用于教育目的，因此请公平使用。

![在此处输入图像描述](../Images/8c006f158744ecaa0a6486c5062434a7.png)

执行此操作的最简单方法（包）是什么（卷线是带有部分文本的标签）？

**描述**

> 我需要颜色来代表我的数据的一个因素，以及切片 - 另一个。例如，论文[1](https://i.stack.imgur.com/v2XgG.png)在颜色和切片中具有不同方面的信息（但为了简单起见，没有它们用来表示分类级别的三个环）。

**参考**

> [1](https://i.stack.imgur.com/v2XgG.png) [http://www.sciencedirect.com/science/article/pii/S0022283605003190#gr1](http://www.sciencedirect.com/science/article/pii/S0022283605003190#gr1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:57:24.053

`R`在终端中启动，键入`?pie`并向下滚动到示例。您想要哪个饼图？对于进一步的研究，关键词可能是注释和标签。

**建议一**

> ```
> $ cat t.r 
> require(grDevices)
> 
> pie.sales <- c(0.12, 0.3, 0.26, 0.16, 0.04, 0.12)
> png('t1.png')
>  pie(pie.sales, clockwise=TRUE, main="pie(*, clockwise=TRUE)", 
>      labels=c('a','b','c','d','e','f'))
>  segments(0,0, 0,1, col= "red", lwd = 2)
>  text(0,1, "init.angle = 90", col= "red") 
> ```
> 
> $ rscript tr
> 
> $feh t1.png
> 
> ![在此处输入图像描述](../Images/4c583be41042f010bc4f8532ece28ed3.png)

# php - PHP mail() - 邮件未发送

> ID：12023310
> 
> 赞同：0
> 
> 时间：2012-08-19T00:32:36.300
> 
> 标签：php

谁能帮我解决我的问题。我试图让用户注册到我的网站，然后在他们验证了他们的电子邮件地址后登录。当他们注册时，他们的详细信息会被插入数据库，一旦发生这种情况，电子邮件就会被发送到他们的电子邮件中。我发现他们的详细信息被插入到表格中，但电子邮件没有发送。我不知道我做错了什么，我想尽办法弄清楚，我也没有收到任何错误消息。另外，我很久没有使用 PHP 了。我也有我的数据库连接和东西。这是我的代码：

```
$email = $_POST['email'];

$emailcheck = "SELECT email FROM useraccounts WHERE email = '$email'";

$result = $conn->query($emailcheck); // executes query $emailcheck

//if the email exists it gives an error
if ($result->num_rows != 0) {
    echo "Sorry, the email $email is already in use.";
}

// check to see if both passwords entered match     
if ($_POST['password'] != $_POST['confirmpassword']) {
    echo "Your passwords did not match. Please try again.";
}

// to encrypt the password
$passhash = sha1($_POST['password']);

// to make confirm_code
$confirm_code = sha1($email);

if ($result->num_rows == 0 && $_POST['password'] == $_POST['confirmpassword']) {

    $insert = "INSERT INTO useraccounts (confirm_code, email, username, passhash, 
    firstname, lastname, gender, phone, address, userlevel, confirmed) 
    VALUES ('$confirm_code', '$email', '$_POST[username]', '$passhash', '$_POST[firstname]',
    '$_POST[lastname]', '$_POST[gender]', '$_POST[phone]', '$_POST[address]', 'user', 'false')";

    $add_member = $conn->query($insert);  // executes query $insert (adds user to table)

    //send confirmation email if user is added to useraccounts
    if($add_member) {

        //send email to
        $to = $email;  // $email = $_POST['email'] is present at top

        //email subject
        $subject = 'Registration Confirmation';

        //email message
        $message = 'my message goes here';

        $headers = 'From myname';

        //send email
        $sentmail = mail($to,$subject,$message,$headers);

        //if email is sent
        if($sentmail){
            echo "Your Confirmation link has been sent to your email address.";
        } else {
            echo "Cannot send Confirmation link to your email address."; // this statement is the output
        } // end if email is sent
    } else {
        echo "Cannot send Confirmation link to your email address.";
    } // end if member is added
} 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T00:34:10.717

```
$headers = 'From myname'; 
```

这是无效的标题行。它应该是：

```
$headers = 'From: myname'; 
```

这可能会导致邮件守护程序或服务器将邮件视为格式错误而拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T00:37:33.413

您的邮件服务器是否配置为开放中继？您正在尝试发送未经身份验证的电子邮件。大多数邮件服务器不允许这样做。

看看[这个](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)。

# algorithm - 给定n个随机分布在正方形中的点，求每个点占据的面积

> ID：12023313
> 
> 赞同：-1
> 
> 时间：2012-08-19T00:33:04.633
> 
> 标签：algorithm, geometry, computational-geometry

给定 n 个随机分布在 [0,1] × [0,1] 中的点，我尝试将最接近该点的点的面积分配给每个点。

更正式如下：

给定[0,1] × [0,1] 中的n 个点 (x [1] , x [2] , ... x [n )，为每个 x] [j]分配一个值，该值等于点集 { z | 对于 (1, 2, .. n) 中的所有 i， d(z, x [j] ) ≤ d(z, x [i] ) }。

我想不出任何远程有效的东西。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T00:56:47.220

听起来您正在寻找[Fortune](http://en.wikipedia.org/wiki/Fortune%27s_algorithm)生成[Voronoi 图](http://en.wikipedia.org/wiki/Voronoi_diagram)的算法。

![财富算法](../Images/2a82a338b71893db5004b66696d3f326.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:42:50.657

[http://en.wikipedia.org/wiki/K-d_tree](http://en.wikipedia.org/wiki/K-d_tree)

您可能想尝试使用 KD 树。

# php - mysql/php - 确定数据的来源

> ID：12023315
> 
> 赞同：0
> 
> 时间：2012-08-19T00:33:29.063
> 
> 标签：php, mysql

我需要确定新闻提要的表格数据来自什么。提要必须显示“人员已上传视频”或“人员已更新其个人简介”之类的内容。因此，很明显，我需要确定数据来自哪里，因为不同类型的数据位于不同的表中。我希望你可以用 SQL 做到这一点，但可能不是这样 PHP 是选项。我不知道如何做到这一点，所以只需要指出正确的方向。

我将简要描述数据库，因为我没有时间制作图表。

1.有一个名为成员的表格，其中包含所有基本信息，例如电子邮件，密码和ID。ID 是主键。

1.  所有其他表都有用于链接到成员表中 ID 的 ID 的外键。

2.  其他表格包括；曲目，状态，图片，视频。从那里开始，一切都非常不言自明。

我需要以某种方式确定更新数据来自哪个表，以便我可以告诉用户某某做了什么。最好我只需要一个用于整个提要的 SQL 语句，以便所有表都按时间戳连接和排序，这对我来说一切都变得更加简单。希望我能做到这两点，但正如我所说的，我真的不确定。

声明的基本大纲将更长但已简化；

```
SELECT N.article,  N.ID, A.ID, A.name,a.url, N.timestamp
FROM news N
LEFT JOIN artists A ON N.ID = A.ID
WHERE N.ID = A.ID
ORDER BY N.timestamp DESC
LIMIT 10 
```

成员表；

```
CREATE TABLE `members` (
`ID` int(111) NOT NULL AUTO_INCREMENT,
`email` varchar(100) COLLATE latin1_general_ci NOT NULL,
`password` varchar(100) COLLATE latin1_general_ci NOT NULL,
`FNAME` varchar(100) COLLATE latin1_general_ci NOT NULL,
`SURNAME` varchar(100) COLLATE latin1_general_ci NOT NULL,
`timestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY (`ID`),
UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

轨道表，所有其他表几乎相同；

```
CREATE TABLE `tracks` (
`ID` int(11) NOT NULL,
`url` varchar(200) COLLATE latin1_general_ci NOT NULL,
`name` varchar(100) COLLATE latin1_general_ci NOT NULL,
`timestamp` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP,
`track_ID` int(11) NOT NULL AUTO_INCREMENT,
 PRIMARY KEY (`track_ID`),
 UNIQUE KEY `url` (`url`),
 UNIQUE KEY `track_ID` (`track_ID`),
 KEY `ID` (`ID`),
 CONSTRAINT `tracks_ibfk_1` FOREIGN KEY (`ID`) REFERENCES `members` (`ID`)
 ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci 
```

在我尝试对每个表使用 mysql 查询并将所有内容放入数组并回显之前。这似乎又长又累，我没有运气。我现在已经删除了大约一周前的所有代码。

请不要觉得你必须深入了解这只是指出我正确的方向。

添加：

这是我为建议的触发器所做的 sql 查询。由于以前从未使用过触发器，因此不确定出了什么问题。将某些内容插入轨道时，会出现此错误

```
#1054 - Unknown column 'test' in 'field list' 
```

查询中的值目前仅用于测试

```
 delimiter $$

 CREATE

 TRIGGER tracks_event AFTER INSERT
 ON tracks FOR EACH ROW 

   BEGIN

INSERT into events(ID, action)
    VALUES (3, test);

   END$$
delimiter ; 
```

更新！

我现在按照建议创建了一个名为 events 的表，并在插入几个表之一后使用触发器对其进行更新。

这是我尝试过的查询，但它是错误的。查询需要从所有其他表中获取事件表中引用的信息并按时间戳排序。

```
SELECT T.url, E.ID, T.ID, E.action, T.name, T.timestamp
FROM tracks T
LEFT JOIN events E ON T.ID = E.ID
WHERE T.ID = E.ID
ORDER BY T.timestamp DESC 
```

在那个查询中，为了简单起见，我只包含了事件和跟踪表，因为问题仍然存在。会有更多的桌子，所以问题会变得更糟。

很难描述问题，但基本上因为每个表中都有一个 ID，并且一个 ID 可以执行多个操作，因此操作可能会显示错误的结果，在本例中为 url。

我将解释事件表和轨道表中的内容，并给出结果以进一步解释。

在事件表中；

```
 4 has uploaded a track.
      3 has some news.
      4 has become an NBS artist. 
```

在轨道上；

```
 2 uploads/abc.wav Cannonballs & Stones    2012-08-20 23:59:59 1
      3 uploads/19c9aa51c821952c81be46ca9b2e9056.mp3    test    2012-08-31 23:59:59 2
      4 uploads/2b412dd197d464fedcecb1e244e18faf.mp3    testing 2012-08-31 00:32:56 3
      4 111 111111  0000-00-00 00:00:00 111111 
```

查询结果；

```
uploads/19c9aa51c821952c81be46ca9b2e9056.mp3    3   3   has some news.  test    2012-08-31 23:59:59    
uploads/2b412dd197d464fedcecb1e244e18faf.mp3    4   4   has uploaded a track.   testing 2012-08-31 00:32:56
uploads/2b412dd197d464fedcecb1e244e18faf.mp3    4   4   has become an NBS artist.   testing 2012-08-31 00:32:56
111 4   4   has become an NBS artist.   111111  0000-00-00 00:00:00
111 4   4   has uploaded a track.   111111  0000-00-00 00:00:00 
```

如您所见，查询给出了不需要的结果。每个 ID 的操作都在每个 url 上给出，因此 url 可以多次显示并且操作错误。因为该查询中只有曲目表，所以我想要显示的唯一操作是“已上传曲目”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:00:57.113

如果没有架构的完整详细信息，很难提供您想要的语句。例如，该问题引用了一个 news 表和一个 Artists 表，但没有提供这些表的架构，也没有说明包含这些引用的语句与问题中提到的任何其他表的关系。

不过，我认为你想要的东西可以完全在 MySQL 中完成，没有任何有趣的 PHP 技巧，特别是如果每​​个不同的表中都有公共字段。

但首先：这可能不是您真正想要的答案，但使用各种表上的触发器来更新“事件提要”表可能是最好的解决方案。即，当在“状态”表上发生插入或更新时，在状态表上有一个触发器，将人员的 ID 及其操作类型插入到“事件源”表中。您可以有一个单独的插入和更新触发器来指示同一数据类型的不同事件。

那么拥有一个事件源会非常容易，因为您只是直接从该事件源表中选择。

查看[创建触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)语法。

也就是说，我想你可能会看看[CASE](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)和[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)关键字。

然后，您可以构建一个查询，从所有表中获取数据并输出指示某些内容的字符串。然后，您可以[将该查询转换为视图](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)，并将其用作“事件提要”表以直接从中进行选择。

假设您有一个成员列表（您这样做），以及包含来自这些成员的操作（即，曲目、状态、图片、视频）的各种表，它们都有一个指向您的成员表的键。然后，您无需从成员中进行选择来生成活动列表；您可以`UNION`将具有某些事件的表放在一起。

```
SELECT
    events.member_id
  , events.table_id
  , events.table
  , events.action
  , events.when_it_happened
  , CASE
      WHEN events.table = "tracks" THEN "Did something with tracks"
      WHEN events.table = "status" THEN "Did something with status"
    END
    AS feed_description
FROM (
  SELECT
      tracks.ID AS member_id
    , tracks.track_ID AS table_id
    , "tracks" AS table
    , CONCAT(tracks.url, ' ', tracks.name) AS action
    , tracks.timestamp AS when_it_happened
  ORDER BY tracks.timestamp DESC
  LIMIT 10

  UNION

  SELECT
      status.ID as member_id
    , status.status_id AS table_id
    , "status" AS table
    , status.value AS action
    , status.timestamp AS when_it_happened
  ORDER BY status.timestamp DESC
  LIMIT 10

  UNION
  ...

) events
ORDER BY events.when_it_happened DESC 
```

我仍然认为您最好创建一个由触发器构建的提要表，因为如果您更频繁地查询提要而不是生成事件，它将执行得更好。

# c# - 非泛型类是否可以在 .NET（C# 或 VB.NET）中包含泛型列表？

> ID：12023316
> 
> 赞同：8
> 
> 时间：2012-08-19T00:33:34.663
> 
> 标签：c#, .net, vb.net, generics, c#-2.0

我希望有人可以帮助我理解这样的事情是否/如何可能。

在这种情况下，假设您正在尝试对电子表格或数据库中的网格进行建模，但每列中的数据只能是一种数据类型。

示例：第 1 列只能包含整数。

我创建了一个通用类来模拟如下所示的列结构：

```
public class CollectionColumn<T>
{
private string _name;
private string _displayName;

private List<T> _dataItems = new List<T>();

public string Name {
    get { return _name; }
    set { _name = value; }
}

public string DisplayName {
    get { return _displayName; }
    set { _displayName = value; }
}

public List<T> Items {
    get { return _dataItems; }
    set { _dataItems = value; }
}
} 
```

现在我想做的是为各种列（可能有 CollectionColumn、CollectionColumn 等）提供一个容器，并拥有它自己的属性，但我不确定如何在仍然可以访问列和数据的情况下执行此操作当我不知道他们的类型时。

这是一个 .NET 2.0 项目，所以像动态这样的东西不起作用，也许是对象列表？我也不确定是否有办法用接口做到这一点。

```
public class ColumnCollection
{
public int Id { get; set; }
public string ContainerName { get; set; }

private List<CollectionColumn<T>> _columns;
public List<CollectionColumn<T>> Columns {
    get { return _columns; }
    set { _columns = value; }
}

} 
```

我想要做的是将各种 CollectionColumn 添加到 ColumnCollection 的 Columns 集合中，这样我就可以拥有包含各种类型数据的列。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T00:39:08.360

这是一个相当普遍的问题。您需要做的是声明一个泛型类继承自的非泛型基类或泛型类实现的非泛型接口。然后，您可以制作该类型的收藏。

例如，

```
public abstract class CollectionColumnBase
{
    private string _name;
    private string _displayName;

    public string Name {
        get { return _name; }
        set { _name = value; }
    }

    public string DisplayName {
        get { return _displayName; }
        set { _displayName = value; }
    }

    public abstract object GetItemAt(int index);
}

public class CollectionColumn<T> : CollectionColumnBase
{
    private List<T> data = new List<T>();

    public overrides object GetItemAt(int index)
    {
        return data[index];
    }

    public List<T> Items
    {
        get { return data; }
        set { data = value; }
    }
}

public class ColumnCollection
{
    public int Id { get; set; }
    public string ContainerName { get; set; }

    private List<CollectionColumnBase> _columns;
    public List<CollectionColumnBase> Columns {
        get { return _columns; }
        set { _columns = value; }
    }
} 
```

# javascript - 自定义 NodeJS Grunt 命令

> ID：12023317
> 
> 赞同：2
> 
> 时间：2012-08-19T00:33:55.543
> 
> 标签：javascript, node.js, gruntjs

我有一个自定义的 grunt 任务，如下所示：

```
grunt.registerTask('list', 'test', function()
{
    var child;
    child = exec('touch skhjdfgkshjgdf',
      function (error, stdout, stderr) {
        console.log('stdout: ' + stdout);
        console.log('stderr: ' + stderr);
        if (error !== null) {
          console.log('exec error: ' + error);
        }
    });
}); 
```

但是，当我尝试运行 pwd 命令时，这有效，我没有得到任何输出。这样做的最终目标是能够用 grunt 编译 sass 文件，我认为最好的方法是运行命令行命令通过 grunt 编译 sass 但是我想在屏幕上获得某种输出工作正常。这段代码是否有任何理由不打印通过 grunt/nodejs 运行 unix 命令的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:55:06.777

`exec()`是异步的，所以你需要告诉 grunt 并在完成后执行回调：

```
grunt.registerTask('list', 'test', function()
{
    // Tell grunt the task is async
    var cb = this.async();

    var child = exec('touch skhjdfgkshjgdf', function (error, stdout, stderr) {
        if (error !== null) {
          console.log('exec error: ' + error);
        }

        console.log('stdout: ' + stdout);
        console.log('stderr: ' + stderr);

        // Execute the callback when the async task is done
        cb();
    });
}); 
```

来自 grunt docs： [为什么我的异步任务没有完成？](http://gruntjs.com/frequently-asked-questions#why-doesn-t-my-asynchronous-task-complete)

# android - 让 HoloEverywhere 与 ActionbarSherlock 一起工作

> ID：12023318
> 
> 赞同：0
> 
> 时间：2012-08-19T00:34:00.903
> 
> 标签：android, eclipse, actionbarsherlock, android-holo-everywhere

我正在尝试为当地学校活动编写应用程序。由于我需要为如此广泛的受众提供它，因此我需要确保该应用程序至少与 android 2.3+ 兼容。我从来没有在任何地方使用过 ActionBarSherlock 或 Holoever，但现在似乎是时候了。

ActionbarSherlock 正在工作。我能够制作一个 Sherlock Activity，没问题。但是，HoloEverywhere 给了我 24 个错误。其中一些似乎是 Holoeverywhere 没有看到 ActionbarSherlock。引用 .Sherlock 的每种样式都有错误说明

```
error: Error retrieving parent for item: No resource found that matches the given name `[parentname]` 
```

这在 /res/values/styles.xml 和 /res/values-v14/styles.xml 中

其余错误是 com.WazaBe.HoloEverywhere 试图引用 android.R。它无法解决，尝试在这些文件（DialogHolo、DialogAlertBuilder 和 HoloToast）中导入 android.R 只会让我遇到另一个错误，因为这些类试图引用的 R.id 不存在。

我通过从他的 github 下载 .zip、提取 zip 并从`ChristopheVersieux-HoloEverywhere-148b903/HoloEverywhereLib`. 这对 ActionbarSherlock 来说效果很好。我还尝试克隆他的 git repo，我可以在 eclipse 的 Git Repositories 视图中看到它，但是当我这样做时它不会显示为可能的库。

有人知道如何让 HoloEverywhere 工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T03:09:54.573

我在使用 HoloEverywhere 时出现错误，无法找到大量资源。我将 ActionBarSherlock 库添加到 HoloEverywhere 并修复了所有问题。也许就是这样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:28:56.073

我将在奇怪的日食行为下提交这个文件。

在花了大约一个小时试图修复它、清理构建等、发布问题之后，又花了大约 20 分钟试图让它工作，我去吃点快餐。回来了，所有的错误都消失了。这在重新启动和项目清理后继续。如果您遇到此错误，请稍等片刻。也许只是需要时间来解决所有问题。

# android - Android - 从另一个活动编辑 ListAdapter 数据

> ID：12023319
> 
> 赞同：0
> 
> 时间：2012-08-19T00:34:04.967
> 
> 标签：android, listactivity, listadapter

我有一个简单的应用程序，它有 3 个活动。第三个活动是 ListActivity，它列出了电影标题及其各自的总票房和年份，选择任何电影都会显示第一个活动中的值。第二个活动是用户可以通过填写 EditText 字段将电影添加到 ListActivity 的地方，这就是我遇到问题的地方。

到目前为止，我看到的示例涉及使用这行代码：

```
 SampleCustomAdapter adapter = new SampleCustomAdapter(results);
        setListAdapter(adapter);

        adapter.notifyDataSetChanged(); 
```

但是，这行代码不适用于我的情况，因为第二个活动中的类扩展了 Activity 而不是 ListActivity。

到目前为止，这是我尝试将新条目添加到列表时的代码。

```
//if all edit text fields have values and are valid inputs  
if( titleFlag == 1 && grossFlag == 1 && yearFlag == 1){
    //fix stuff here
    //TODO ADD THE NEW MOVIE TO THE ARRAY IN STRINGS.XML

    ArrayList<MyMovies> movieList = new ArrayList<MyMovies>();
    MyMovies newMovie = new MyMovies();

    newMovie.setMovie(title);
    newMovie.setGross(gross);
    newMovie.setYear(year);
    movieList.add(newMovie);

    //go back to the main page after adding
    Intent intent = new Intent(this, com.Android.Lab7.Lab7_084106.class);
    startActivity(intent);
    finish();

} 
```

我还尝试添加 adapter.notifyDataSetChanged(); 在生成列表后的第三个活动中但无济于事。哦，第三个活动的 onCreate 看起来像这样：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    //create stuff
    super.onCreate(savedInstanceState);

    ArrayList<MyMovies> movieList = new ArrayList<MyMovies>();

    String[] movieArray = getResources().getStringArray(R.array.movieArray);
    String[] grossArray = getResources().getStringArray(R.array.worldwideGross);
    String[] yearArray = getResources().getStringArray(R.array.yearArray);

        ArrayList<MyMovies> results = new ArrayList<MyMovies>();
        // make sure the arrays have the same length
        for (int i = 0; i < movieArray.length; i++) {
            MyMovies sr = new MyMovies();
            sr.setMovie(movieArray[i]);
            sr.setGross(grossArray[i]);
            sr.setYear(yearArray[i]);
            results.add(sr);

       }

        SampleCustomAdapter adapter = new SampleCustomAdapter(results);
        setListAdapter(adapter);

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);
    adapter.notifyDataSetChanged();

    //set stuff such that Page2 sends back a result to page 1
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            sendResult(position);   
        }
    });

} 
```

我使用字符串资源来存储标题、总量和年份的数组，因为它们很多，而且我对它们进行硬编码是不切实际的。

所以基本上我坚持如何从第二个活动更新第三个活动中的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:49:46.367

在第三个活动中声明这一点。

```
public static String title, gross, year;
public static boolean newMovieAdded=false; 
```

然后，当您在**第二个活动**中时，请执行以下操作

> thirdActivity.title = MyEditText1.getText().toString();
> 
> thirdActivity.gross=MyEditText2.getText().toString();
> 
> thirdActivity.year=MyEditText3.getText().toString();
> 
> if(!year.equals(""))
> 
> 新电影添加=真；

就这样。当您进行第三个活动时，只需编写您的代码

```
 ArrayList<MyMovies> movieList = new ArrayList<MyMovies>();

    if(newMovieAdded){
        MyMovies newMovie = new MyMovies();
        newMovie.setMovie(title);
        newMovie.setGross(gross);
        newMovie.setYear(year);
        movieList.add(newMovie);
        newMovieAdded = false;
} 
```

# iphone - 使用 CLGeocoder 获取地名（不是街道名称）

> ID：12023322
> 
> 赞同：0
> 
> 时间：2012-08-19T00:34:19.147
> 
> 标签：iphone, google-maps, ios5, reverse-geocoding, clgeocoder

我想开发自己的地图应用程序。我已经成功地在我的 iPhone 上使用`CLGeocoder`. 现在我的问题如下：

1.  我知道您可以使用类似的 URL 来获取有关地点的信息`https://maps.google.com/?q=37.324599,-122.031844`
2.  如果您单击上面的 URL，它将带您靠近库比蒂诺的一座教堂。现在`CLGeocoder`只会给我它的街道地址，即`10110 N De Anza Blvd Cupertino, CA 95014`（我明白了）。但是如何获得实际名称 ie `St Joseph of Cupertino Church and Parish`？
3.  我们可以在谷歌地图上看到它，这意味着他们必须把它存储在某个地方吗？

有什么方法可以访问这些地名（不仅仅是通过`CLGeoCoder`，任何方式都可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:48:55.930

GeoCoding API 通常用于在街道地址和坐标之间进行转换。如果你想要地名，你可以使用 Places API。

（我知道这更像是评论而不是答案，但我认为我还没有足够的声誉点来评论问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:39:18.907

在 CLLocation 管理器类使用此代码后，您需要这样做

{

```
CLGeocoder *reverseGeo = [[CLGeocoder alloc] init];

[reverseGeo reverseGeocodeLocation: loc completionHandler: 
 ^(NSArray *placemarks, NSError *error) {

     NSLog(@"%@",[placemarks objectAtIndex:0]);
     for (CLPlacemark *placemark in placemarks) {

         NSLog(@"~~~~~~~~%@",placemark.locality);

     }

 }]; 
```

}

# asp.net-mvc - JSON.Stringify ASP.NET MVC

> ID：12023326
> 
> 赞同：1
> 
> 时间：2012-08-19T00:36:13.960
> 
> 标签：asp.net-mvc, json, reflection

我正在尝试将 JSON 格式的数据发布到这样的 .NET MVC 控制器。

```
$.ajax({
         type: 'POST',
         url: 'http://mvc.tester.local/Home/NameConverter',
         data: JSON.stringify({ convertermodel.InputName: obj.currentTarget.value }),
         contentType: 'application/json'
}); 
```

但是 Javascript 抱怨这`JSON.Stringify()`一点。确切地说
。`convertermodel.InputName`

问题是我实际上需要这样的 JSON 数据名称，即与模型中的属性具有相同的名称；为了利用反射进行自动绑定。

这是我的模型：

```
public class NamesViewModel
{
    public NameConverterModel convertermodel = new NameConverterModel();        
} 
```

和子类

```
public class NameConverterModel
{
    private string _inputName = "";
    public string InputName
    {
        get { return _inputName; }
        set { _inputName = value; }
    }    
} 
```

请问我该如何解决？

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:40:51.950

你需要你的 JSON 是这样的结构：

```
{"convertermodel" : {
                      "InputName" : obj.currentTarget.value
                    }
} 
```

您的对象的 JSON 表示需要反映您尝试在客户端建模的对象模型所需的适当嵌套。因此，通过将层次结构嵌套在一个级别来定义 JSON 是行不通的——您需要像在 C# 代码中那样创建对象的对象。

# ios - iPhone串口编程

> ID：12023328
> 
> 赞同：3
> 
> 时间：2012-08-19T00:37:01.363
> 
> 标签：ios, xcode, serial-port, arduino

我有一部运行 iOS 5.1.1的[越狱iPhone。](http://en.wikipedia.org/wiki/IOS_jailbreaking)我正在使用[Xcode](http://en.wikipedia.org/wiki/Xcode) 4.3.2，并且我正在开发一个希望与[Parallax](http://en.wikipedia.org/wiki/Parallax,_Inc._%28company%29) [RFID](http://en.wikipedia.org/wiki/Radio-frequency_identification)阅读器对话的应用程序。本质上，我希望应用程序的用户能够使用 RFID 卡登录，而不是输入他们的用户名和密码，但我还有很多工作要做。

我正在开发的应用程序正在通过[Cydia](http://en.wikipedia.org/wiki/Cydia)加载到手机上，因此访问手机上的串行端口`/dev/tty.iap`应该不是问题。

我创建了两个文件`Seiral.h`并`Serial.c`用于打开串行端口。

的代码`Serial.c`类似于[devdot 教程](http://devdot.wikispaces.com/Iphone+Serial+Port+Tutorial)中的代码，我认为我已成功打开串行端口，因为我在控制台中收到此消息：

> 8 月 18 日 19:33:34 3GS KegCop[520]：串口数据为 16

我将如何读取 Parallax 阅读器上正在扫描的 RFID 徽章编号？

我正在使用 Arduino 在 iPhone 和 RFID 阅读器之间进行通信。扫描 RFID 徽章时，它会通过 Arduino 上的串行输出发送徽章编号，但我不确定如何读取 iPhone 端的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:05:36.997

我目前仍在研究这个解决方案，但我确实设法找到了一个带有[教程](http://inornate.springnote.com/pages/8139470?print=1)的好的串行控制台应用程序，这将作为在我目前正在开发的应用程序中使串行通信工作的基础的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:33:22.403

您需要阅读视差的数据表以了解串行数据格式。此页面解释了如何使用 arduino 进行操作，并链接到数据表。 [http://makeprojects.com/Project/Using-the-Parallax-RFID-Reader-with-an-Arduino/617/1#.UDJyyd2GqSp](http://makeprojects.com/Project/Using-the-Parallax-RFID-Reader-with-an-Arduino/617/1#.UDJyyd2GqSp)

在iphone上也不例外。只需读取串口并根据数据表解析数据即可。

你用arduino做什么？只是电压电平转换？这会起作用，但您也可以获得更简单/更便宜/更小的 RS232 到 TTL 转换器。

# ios - 按时从 GCDAsyncSocket 读取响应（iOS）

> ID：12023333
> 
> 赞同：0
> 
> 时间：2012-08-19T00:38:25.653
> 
> 标签：ios, sockets, cocoaasyncsocket, gcdasyncsocket

这个问题很简单，我只是不知道如何处理它。

我通过以下方式读取数据：

```
[asyncSocket readDataWithTimeout:-1 tag:2];

NSString *failure = [serverJSONResponseParsed objectForKey:@"failure"];
NSLog(@"Contents of string failure: %@", failure);

if ([failure isEqualToString:@"none"]) {
    NSLog(@"Success Sending String");
    return TRUE;
}
else {
    NSLog(@"Failure: %@",failure);
    return FALSE;
} 
```

现在，正如预期的那样，我的委托方法被调用并正确读取 JSON 数据：

```
-(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    NSError *error;
    NSLog(@"didReadData: %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);
    serverJSONResponseParsed = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    NSLog(@"didReadData test after dict: %@", [serverJSONResponseParsed objectForKey:@"failure"]);
} 
```

问题是，由于 GCDAsyncSocket 是异步的，这段代码

```
NSString *failure = [serverJSONResponseParsed objectForKey:@"failure"];
NSLog(@"Contents of string failure: %@", failure);

if ([failure isEqualToString:@"none"]) {
    NSLog(@"Success Sending String");
    return TRUE;
}
else {
    NSLog(@"Failure: %@",failure);
    return FALSE;
} 
```

后

```
[asyncSocket readDataWithTimeout:-1 tag:2]; 
```

在数据有机会被读取之前调用。我将如何确保读取数据，然后对其进行分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:17:28.973

该代码块需要在 didReadData 回调方法中，如下所示：

```
 -(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
        NSError *error;
        NSLog(@"didReadData: %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);
        serverJSONResponseParsed = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
        NSLog(@"didReadData test after dict: %@", [serverJSONResponseParsed objectForKey:@"failure"]);

    NSString *failure = [serverJSONResponseParsed objectForKey:@"failure"];
    NSLog(@"Contents of string failure: %@", failure);

    if ([failure isEqualToString:@"none"]) {
        NSLog(@"Success Sending String");
        return TRUE;
    }
    else {
        NSLog(@"Failure: %@",failure);
        return FALSE;
    }
} 
```

# java - GridLayout 之上的 FlowLayout 不起作用

> ID：12023334
> 
> 赞同：8
> 
> 时间：2012-08-19T00:38:31.363
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我正在尝试创建一个刽子手游戏，到目前为止它进展顺利，但布局设计似乎并没有到位！字母应该按`FlowLayout`顺序排列在 Hangman 图片上方，底部有“重新启动”、“帮助”、“添加新单词”和“退出”按钮！我究竟做错了什么？

![刽子手](../Images/c6b751894a7ac5d7f4f863831f5693c1.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class Hangman extends JFrame
{
    int i = 0;
    static JPanel panel;
    static JPanel panel2;
    static JPanel panel3;

    public Hangman()
    {
        JButton[] buttons = new JButton[26];

        panel = new JPanel(new FlowLayout());
        panel2 = new JPanel();
        panel3 = new JPanel();

        JButton btnRestart = new JButton("Restart");
        btnRestart.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {

            }
        });

        JButton btnNewWord = new JButton("Add New Word");
        btnNewWord.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                try
                {
                    FileWriter fw = new FileWriter("Words.txt", true);
                    PrintWriter pw = new PrintWriter(fw, true);

                    String word = JOptionPane.showInputDialog("Please enter a word: ");

                    pw.println(word);
                    pw.close();
                }
                catch(IOException ie)
                {
                    System.out.println("Error Thrown" + ie.getMessage());
                }
            }
        });

        JButton btnHelp = new JButton("Help");
        btnHelp.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                String message = "The word to guess is represented by a row "
                   + "of dashes, giving the number of letters and category of "
                   + "the word. \nIf the guessing player suggests a letter "
                   + "which occurs in the word, the other player writes it "
                   + "in all its correct positions. \nIf the suggested "
                   + "letter does not occur in the word, the other player "
                   + "draws one element of the hangman diagram as a tally mark."
                   + "\n"
                   + "\nThe game is over when:"
                   + "\nThe guessing player completes the word, or guesses "
                   + "the whole word correctly"
                   + "\nThe other player completes the diagram";
               JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
            }
        });

        JButton btnExit = new JButton("Exit");
        btnExit.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e)
            {
                System.exit(0);
            }
        });

        ImageIcon icon = new ImageIcon("D:\\Varsity College\\Prog212Assign1_10-013803\\images\\Hangman1.jpg");
        JLabel label = new JLabel();
        label.setIcon(icon);
        String  b[]=  {"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
        for(i = 0; i < buttons.length; i++)
        {
            buttons[i] = new JButton(b[i]);

            panel.add(buttons[i]);
        }
        panel2.add(label);

        panel3.add(btnRestart);
        panel3.add(btnNewWord);
        panel3.add(btnHelp);
        panel3.add(btnExit);
    }

    public static void main(String[] args) 
    {
        Hangman frame = new Hangman();
        frame.add(panel, BorderLayout.NORTH);
        frame.add(panel2, BorderLayout.CENTER);
        frame.add(panel3, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T03:34:22.347

这里有一些建议：

![在此处输入图像描述](../Images/fe312db8beba079c7bb52ffe778af798.png)

*   使用 a`GridLayout`作为顶部面板；在这种情况下，零表示行数由指定的列数和布局中的组件总数决定：

    ```
    JPanel north = new JPanel(new GridLayout(0, 9)); 
    ```

*   以下是如何使您的中心面板具有合理的初始大小的概述；请注意如何相对于当前大小进行绘制：

    ```
    JPanel center = new JPanel() {

        private static final int N = 256;
        private static final String S = "Todo...";

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int dx = (getWidth() - g.getFontMetrics().stringWidth(S)) / 2;
            int dy = getHeight() / 2;
            g.drawString(S, dx, dy);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(N, N);
        }
    }; 
    ```

*   您可以像这样构造按钮名称：

    ```
    for (int i = 0; i < 26; i++) {
        String letter = String.valueOf((char) (i + 'A'));
        buttons[i] = new JButton(letter);
        north.add(buttons[i]);
    } 
    ```

*   使您的面板[*实例变量*](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)并在[*事件调度线程*](http://download.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上启动：

    ```
    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            Hangman frame = new Hangman();
            frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
            frame.add(frame.north, BorderLayout.NORTH);
            frame.add(frame.center, BorderLayout.CENTER);
            frame.add(frame.south, BorderLayout.SOUTH);
            frame.pack();
            frame.setLocationByPlatform(true);
            frame.setVisible(true);
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T03:45:11.777

如果您进行一些研究，这个问题就会得到很好的记录 - 似乎所有面板（除了 CENTER 面板）在调整大小时都没有重新计算。请参阅[如何在其 JSplitPane 中制作此 FlowLayout 包装？](https://stackoverflow.com/questions/5709690/how-do-i-make-this-flowlayout-wrap-within-its-jsplitpane) 和[http://www.velocityreviews.com/forums/t608472-wrap-flowlayout.html](http://www.velocityreviews.com/forums/t608472-wrap-flowlayout.html)

但是为了快速修复，请尝试将您的`main`方法更改为此...（基本上使用 BoxLayout 作为您的主容器）

```
public static void main(String[] args) 
{
    TempProject frame = new TempProject();
    Box mainPanel = Box.createVerticalBox();
    frame.setContentPane(mainPanel);
    mainPanel.add(panel);
    mainPanel.add(panel2);
    mainPanel.add(panel3);
    frame.pack();
    frame.setVisible(true);
} 
```

# indentation - 我无法让 StringTemplate 缩进

> ID：12023335
> 
> 赞同：0
> 
> 时间：2012-08-19T00:38:50.520
> 
> 标签：indentation, antlr3, stringtemplate

我有以下 StringTemplate 组

```
group RPInstr;

before(firstStat) ::= <<
<{<[beforeEnteringInstr(),firstStat]; anchor, separator="\n">}; anchor>
>>

beforeEnteringInstr() ::= "before();" 
```

我正在尝试使方法的第一个语句与检测代码（“before（）；”）保持一致。但是，我现在得到的是这样的：

```
public  int method() {
  before();
System.out.println("testing");
  System.out.println("testing again");
} 
```

before() 缩进的正确方法是什么？和下一个声明，所以我得到以下内容？

```
public  int method() {
  before();
  System.out.println("testing");
  System.out.println("testing again");
} 
```

提前致谢。

PS：我在语法中使用的选项如下

选项{输出=模板；重写=真；回溯=真；记忆=真；}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:38:44.193

before(firstStat) 中的 expr 没有缩进。ST 没有理由缩进。

# php - 依赖于类的正则表达式替换

> ID：12023341
> 
> 赞同：1
> 
> 时间：2012-08-19T00:39:23.877
> 
> 标签：php, regex, wordpress

我有以下代码替换页面上的所有标签并将 nCode 图像大小调整器添加到其中。代码如下：

```
function ncode_the_content($content) {
return preg_replace("/<img([^`|>]*)>/im", "<img onload=\"NcodeImageResizer.createOn(this);\"$1>", $content); }

} 
```

我需要做的是，如果图像具有“noresize”类，则它不会执行 preg_match。

我只是设法得到它，这样如果页面上的任何地方都有“noresize”类，它就会停止调整所有图像的大小，而不仅仅是具有正确类的图像。

有什么建议么？

**更新：**

我什至在这个正确的球场上遥遥无期？

```
function ncode_the_content($content) {

//Load the HTML page
$html = file_get_contents($content);
//Parse it. Here we use loadHTML as a static method
//to parse the HTML and create the DOM object in one go.
@$dom = DOMDocument::loadHTML($html);

//Init the XPath object
$xpath = new DOMXpath($dom);

//Query the DOM
$linksnoresize = $xpath->query( 'img[@class = "noresize"]' );
$links = $xpath->query( 'img[]' );

//Display the results as in the previous example
foreach($links as $link){
echo $link->getAttribute('onload'), 'NcodeImageResizer.createOn(this);';
}

foreach($linksnoresize as $link){
echo $link->getAttribute('onload'), '';
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:10:54.213

我最终只使用了纯 CSS 并在我不想调整大小的图像周围添加了一个。将该 div 的宽度和高度强制恢复为自动，然后删除显示在它们上方的警告消息。似乎工作正常。谢谢你的帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:06:22.493

这是一些未经测试的代码：

```
$dom = DOMDocument::loadHTML($content);
$images = $dom->getElementsByTagName("img");
foreach ($images as $image) {
    if (!strstr($image->getAttribute("class"), "noresize")) {
        $image->setAttribute("onload", "NcodeImageResizer.createOn(this);");
    }
} 
```

但是，如果是我，我会避开任何这样的内联事件处理程序，而只是使用 Javascript 找到适当的元素。

# javascript - 如何查询dojo中的对象类型？

> ID：12023343
> 
> 赞同：1
> 
> 时间：2012-08-19T00:39:56.830
> 
> 标签：javascript, dojo, dojox.grid

我们可以使用 dojo.query 来获取基于 CSS 选择器的某些元素，但是我们如何查询对象类型呢？
比如获取页面上的所有TextBox元素，然后使用dojo.connect绑定一个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:22:30.177

这不完全受支持，但我认为有两种方法可以做到这一点。

一，找出 TextBox ( `.dijitTextBox`) 的唯一类，调用`dojo.query('.dijitTextBox')`，循环结果`dojo.forEach`并获取小部件`dijit.getEnclosingWidget(domnode)`

```
var textboxArray = [];
dojo.forEach(dojo.query('.dijitTextBox'), function(domnode) {
  textboxArray.push(dijit.getEnclosingWidget(domnode));
}); 
```

或者二，循环`dijit.registry._hash`，测试`declaredClass`，如果它`dijit.form.TextBox`- 连接。

```
var textboxArray = dojo.filter(dijit.registry._hash, function(widget) {
  return widget.declaredClass && widget.declaredClass == 'dijit.form.TextBox';
}) 
```

根据您的设置，选择最有效的设置。后者通常是最好的——除非您的页面中有 100 个小部件。第一个必须对页面的所有元素进行 xpath。尽管如此，请记住 dojo.query 将第二个参数作为“parentNode”

# php - 部分循环内的 Zend View 数组变量

> ID：12023348
> 
> 赞同：0
> 
> 时间：2012-08-19T00:41:58.693
> 
> 标签：php, zend-framework, partial, zend-view

这是我的控制器中的代码：

```
$this->view->myArray = array();
$this->view->test = "";
$out = $this->view->partialLoop('tab/partial.phtml', $data);

echo $this->view->test;  // Output: This works
echo count($this->view->myArray); // Output: 0 
```

和部分*partial.phtml*：

```
$v->test = $this->partialLoop()->view;

$v = "This works";
echo $v->test;  // Output: This works

$v->myArray[] = "hello";
echo count($v->myArray); // Output: 0 
```

我不认为从 partialLoop 访问视图变量是一个好主意。除此之外，为什么它不适用于我的数组变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:00:38.037

它不起作用，因为您无权访问部分中的视图变量。您可以访问传递给部分的数据。

```
$out = $this->view->partialLoop('tab/partial.phtml', $data); 
```

这行代码可以访问`$data`.

因此，您当前部分中的这段代码基本上没有意义：

```
$v = $this->partialLoop()->view; //you choose to assign view data to the partial, and I don't think it's working as expected. 
//By not passing any args to the partial you have at least some access to the view object.

$this->view->test = "This works";//assign data to view locally
echo $v->test;  // you seem to be echoing out locally assigned data

$v->myArray[] = "hello";//you didn't assign this to the view
echo count($v->myArray); // myArray probably doesn't exist in this context or dosen't work as expected. If you make this an associative array it might work. 
```

我认为我以前从未见过以这种方式使用的部分。部分的要点是为视图的特定部分建立不同的变量范围。

partial 和 partialLoop 是视图助手，因此您需要在控制器中执行的唯一操作（数据可能来自或来自模型）是提供您想要在局部中使用的任何数据以及您想要的任何数据在您的正常视图范围内可用。

```
//in a controller
public function userAction() {
    $model = Application_Model_DbTable_User();//Table columns = id, name, role
    $this->view->partailData = $model->fetchAll();//assign data to view that we want to use in partial, should be an array or object.
}

//in a view script
<?php 
//pass the path to the partial as the first arg and the data to be displayed as the second arg
echo $this->partialLoop('/path/to/partial.phtml', $this->partialData);
//we could pass data explicitly as well
echo $this->partial('/path/to/partial.phtml', array('id'=>1,'name'=>'jason','role'=>'user'));
?>

//now for our partial.phtml
//this could be used a simple partial or as a partialLoop
<p>My name is <?php echo $this->name ?>.</p>
<p>My data file id is <?php echo $this->id ?>.</p>
<p>My access control role is <?php echo $this->role ?>. </p>
<!-- name, id and role would be column names that we retrieved from the database and assigned to the view --> 
```

要使用 partial 或 partialLoop，您需要传递某种类型的数组或实现 toArray() 的对象。

**[编辑]**

清理您仍然在左侧字段中的代码。

```
//controller code
$this->view->myArray = array();

//view code
<?php $v = $this->partial()->view ?> 
<?php $v->myArray[] = 'newName' ?>
<?php Zend_Debug::dump(count($this->partial()->view->myArray)) ?>

//my output =

int(1) 
```

如果我分配给实际的部分脚本并尝试输出视图对象，则会引发错误，我似乎无法进一步传递视图：

```
//my view again
<?php echo $this->partial('partial.phtml', $this->partial()->view) ?>
//This and attempts similar result in the error
/*Catchable fatal error: Object of class Zend_View could not be converted to string in E:\www\home-local\application\views\scripts\partial.phtml on line 1*/
//when the partial.phtml looks like
<?php echo $this />

//however when I access the data available in the view
<?php echo $this->myArray[0] ?>

//the result works and the output is   
newName 
```

当您已经可以访问视图对象时，它看起来像一个空的 partial() (partialLoop()) 调用将让您访问视图对象。如果您离开视图对象的范围，您将只能访问由 __get() 和 __call() 提供的当前范围。

我希望我能够解释这一点足以提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-19T00:49:33.803

也许您无法设置 $v 或项目的值，因为它是私有的或静态的，或者也从您发布的代码中丢弃，这可能会使其更易损坏（即控制器正在引用视图数据，而视图是设置或未设置或已设置两次）

同意我不认为从部分循环访问视图变量是一个好主意。

编辑： $this->view->assign('variablename', $my_array);

我认为该变量在重新渲染时会“丢失”，因此请在控制器中处理变量，并在完成之前将它们分配给视图。我不会真正对 $this->view->myArray 进行数组操作

# f# - F# 查询“不包含”

> ID：12023349
> 
> 赞同：3
> 
> 时间：2012-08-19T00:43:01.667
> 
> 标签：f#

当一个项目包含在列表中时，有一个查询可以搜索，但当一个项目不包含时，没有一个查询。

此查询查找给定列表中`customer`没有的对象。我能做些什么来只返回此列表中*没有*的客户？`ContactNum``cdiffnums`*`ContactNum`*

 *```
let q =
    query {
        for c in dc.Customers do
        where (query { for n in cdiffnums do contains c.ContactNum })
        select c
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T00:47:13.643

我的 F# 生锈了，但你试过吗：

```
let q =
    query {
        for c in dc.Customers do
        where (not (query { for n in cdiffnums do contains c.ContactNum }))
        select c
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:06:06.563

我认为这样的事情应该有效：

```
open System.Linq

let cdiffnums = [|1;2;3|]
let q =
    query {
        for c in dc.Customers do
        where (not (cdiffnums.Contains c.ContactNum))
        select c
    } 
```*

# java - 实现类中带有构造函数的 Java 接口

> ID：12023350
> 
> 赞同：0
> 
> 时间：2012-08-19T00:43:25.677
> 
> 标签：java, tapestry

我有一个关于接口的相当基本的问题，我也很新。我通常会使用重载的构造函数来实例化我的类。我现在正在尝试使用接口并想知道如何填充我的构造函数。我会在我的界面中使用类似 setSomeMethod(arguement1,arguement2) 的东西来填充我的属性吗？

我还想指出我正在使用带有服务注入的“Tapestry5”框架。例子

```
public class Main {

    @Inject
    private Bicycle bicycle;

    public Main() {
         //Not sure how to pass constructor variables in
         this.bicycle();
    }

} 
```

界面

```
public interface bicycle {
   public void someMethod(String arg1, String arg2);
} 
```

实现类

```
public class MountainBike implements bicycle {

   private String arg1;

   private String arg2;

   public MountainBike() {
       //Assuming there is no way to overload this constructor
   }

   public void someMethod(String arg1, String2 arg2) {
       this.arg1 = arg1;
       this.arg2 = arg2;
   }

} 
```

那么你如何处理扩展类呢？我不确定如何填充扩展类构造函数。

```
public class MountainBike extends BicycleParts implements bicycle {

   private String arg1;

   private String arg2;

   public MountainBike() {
       //Assuming there is no way to overload this constructor
       //Not sure where to put super either, but clearly won't work here. 
       //super(arg1);            
   }

   public void someMethod(String arg1, String2 arg2) {
       this.arg1 = arg1;
       this.arg2 = arg2;
       //Assuming it doesn't work outside of a constructor, so shouldn't work 
       //here either.   
       //super(arg1);
   }

} 

public class BicycleParts {

    private String arg1;

    public void BicycleParts(String arg1) {
        this.arg1 = arg1;
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T00:56:20.217

首先，你的`bicycle`方法应该声明一个返回类型：

```
public void someMethod(String arg1, String arg2); 
```

接口定义了方法的契约，而不是对象的实例化方式。他们还可以定义静态变量。

要`someMethod`在 MountainBike 构造函数中使用，您可以在构造函数中进行调用：

```
public MountainBike(String arg1, String arg2) {
   someMethod(arg1, arg2);
} 
```

Wrt，您关于扩展类的问题，超级语句必须作为构造函数中的第一条语句出现，即：

```
public class MegaMountainBike extends BicycleParts implements bicycle {

   public MegaMountainBike() {

      super("Comfy Saddle");
      // do other stuff
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T01:03:06.890

你似乎很困惑。Java 语言定义了构造函数和方法。构造函数有特殊的限制，不能放在接口中，只要你做一个`new`语句就会被隐式调用。由于构造函数不能放在接口中，因此通常的做法是使用工厂方法。

# git - 使用 git rebase，我应该假装在解决冲突时某些事情没有发生吗？

> ID：12023356
> 
> 赞同：1
> 
> 时间：2012-08-19T00:44:23.690
> 
> 标签：git, version-control, merge, rebase, git-rebase

我是 git 新手，我对使用 git rebase 的“正确”方式有点困惑。

我的想法是，一旦我完成了 rebase 和冲突解决过程，我的历史看起来就好像我在此过程中没有改变主意？

例如，假设我有提交 A 和提交 B。提交 A 进行了一些重要的更改，但还引入了一个我稍后在提交 B 中删除的函数。在变基时，我遇到了与提交 A 中引入的函数的冲突。

在这里回应的“正确”方式是什么？我是否应该编辑提交 A 以避免完全引入该功能，然后完全跳过提交 B？如果是这样，我不会错过有关代码演变的重要背景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:50:48.913

我假设您将提交 B 重新设置为提交 A。

如果存在冲突，请不要更改提交 A，因为这表示提交 B 之前的代码更改。而是更改提交 B（历史中稍后的编辑）以消除冲突并修复任何错误。

通常，您可以根据需要使用合并或变基。如果你是 git 项目中唯一的人，那没关系。较大的群体可能有偏好。有些人可能喜欢变基，所以看起来一切都是线性的。其他人更喜欢合并，因为它更符合实际发生的情况。

较大的项目也可能希望在将分支合并回主分支之前将其压缩到单个提交中（使用交互式变基）（也许是为了简化历史）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:04:33.527

在我看来，这应该没关系。当你重新提交提交时，通常是因为你已经完成了一些功能或达到了某种里程碑并想要“重写”历史。从本质上讲，您更感兴趣的是对您所做工作的高级概述，而不是详细介绍。

如果您想突出显示特定代码更改作为变基的一部分，请将它们放在提交消息中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T01:09:53.300

“如果是这样，我不要错过有关代码演变的重要背景”

好吧，是的，但这就是变基的重点。变基将历史改写为您希望的样子:-)

你没有在上面提到你的提交在哪里，在同一个分支上通过交互式变基或在单独的分支中变基。

我将假设单独的分支，进行变基的目的是您正在重新排序一个分支上的提交以附加到另一个分支的末尾，如果现在发生冲突，那么您需要修改提交，就好像它有在另一个提交之后被编码，如果这意味着一个函数没有看到光明，那就这样吧。

如果提交的时间顺序对您的上下文很重要，请改为合并。

# node.js - node.js process.memoryUsage() 的返回值代表什么？

> ID：12023359
> 
> 赞同：151
> 
> 时间：2012-08-19T00:45:58.527
> 
> 标签：node.js, v8

来自官方文档（[来源](http://nodejs.org/api/process.html#process_process_memoryusage)）：

> **process.memoryUsage()**
> 
> 返回一个对象，以字节为单位描述 Node 进程的内存使用情况。
> 
> ```
> var util = require('util');
> 
> console.log(util.inspect(process.memoryUsage())); 
> ```
> 
> 这将产生：
> 
> ```
> { rss: 4935680, heapTotal: 1826816, heapUsed: 650472 } 
> ```
> 
> heapTotal 和 heapUsed 指的是 V8 的内存使用情况。

**rss**、**heapTotal**和**heapUsed 究竟**代表什么？

这似乎是一个微不足道的问题，但我一直在寻找，到目前为止我找不到明确的答案。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2016-06-27T08:54:30.130

要回答这个问题，首先要了解 V8 的 Memory Scheme。

一个正在运行的程序总是通过分配在内存中的一些空间来表示。这个空间被称为**Resident Set**。V8 使用类似于 Java 虚拟机的方案，将内存划分为段：

*   **代码**：正在执行的实际代码
*   **堆栈**：包含所有值类型（如整数或布尔值之类的原语），指针引用堆上的对象，指针定义程序的控制流
*   **堆**：专门用于存储引用类型（如对象、字符串和闭包）的内存段。 [![在此处输入图像描述](../Images/ec097cc1660b7749d51950ce7ea485e9.png)](https://i.stack.imgur.com/I188N.png)

现在很容易回答这个问题：

*   **rss**：驻留集大小
*   **heapTotal**：堆的总大小
*   **heapUsed** : 实际使用的堆

**参考**：[http ://apmblog.dynatrace.com/2015/11/04/understanding-garbage-collection-and-hunting-memory-leaks-in-node-js/](http://apmblog.dynatrace.com/2015/11/04/understanding-garbage-collection-and-hunting-memory-leaks-in-node-js/)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-19T01:05:37.967

*RSS*是[驻留集大小](http://en.wikipedia.org/wiki/Resident_set_size)，进程内存中保存在 RAM 中的部分（与交换空间或文件系统中保存的部分相反）。

*堆*是新分配的对象将来自的内存部分（想想C`malloc`或`new`JavaScript）。

[您可以在Wikipedia](http://en.wikipedia.org/wiki/Memory_management)上阅读有关堆的更多信息。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-12-10T19:09:18.883

[Node.js 文档](https://nodejs.org/api/process.html#process_process_memoryusage)描述如下：

> **heapTotal 和 heapUsed**指的是 V8 的内存使用情况。**external**是指绑定到 V8 管理的 JavaScript 对象的 C++ 对象的内存使用情况。rss，**驻留集大小**，是进程在主内存设备（即总分配内存的子集）中占用的空间量，包括堆、代码段和堆栈。

**所有提到的值都以字节表示。**因此，如果您只想打印它们，您可能希望将它们重新缩放为 MB：

```
const used = process.memoryUsage();
for (let key in used) {
  console.log(`Memory: ${key} ${Math.round(used[key] / 1024 / 1024 * 100) / 100} MB`);
} 
```

这将为您提供如下输出：

```
Memory: rss 522.06 MB
Memory: heapTotal 447.3 MB
Memory: heapUsed 291.71 MB
Memory: external 0.13 MB 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-06T17:32:12.110

**让我们用一个例子来做这个**

以下示例将向您展示内存使用量的增加实际上将如何增加`rss`和`heapTotal`

```
const numeral = require('numeral');
let m = new Map();
for (let i = 0; i < 100000; i++) {
    m.set(i, i);
    if (i % 10000 === 0) { 
        const { rss, heapTotal } = process.memoryUsage();
        console.log( 'rss', numeral(rss).format('0.0 ib'), heapTotal, numeral(heapTotal).format('0.0 ib') )
    } 
} 
```

运行上面会给你这样的东西：

```
rss 22.3 MiB 4734976 4.5 MiB
rss 24.2 MiB 6483968 6.2 MiB
rss 27.6 MiB 9580544 9.1 MiB
rss 27.6 MiB 9580544 9.1 MiB
rss 29.3 MiB 11419648 10.9 MiB
rss 29.3 MiB 11419648 10.9 MiB
rss 29.3 MiB 11419648 10.9 MiB
rss 32.8 MiB 15093760 14.4 MiB
rss 32.9 MiB 15093760 14.4 MiB
rss 32.9 MiB 15093760 14.4 MiB 
```

这清楚地向您展示了如何使用变量并不断增加它所需的空间会增加 heapTotal 并相应地增加 Resident Set Size( `rss`)

# java - 用“加”字加数字

> ID：12023362
> 
> 赞同：0
> 
> 时间：2012-08-19T00:46:51.730
> 
> 标签：java, addition, scriptengine

我现在写信是为了提供一个 Java 应用程序，而不是使用运算符“+”，该应用程序的用户可以字面上使用“add”这个词来将两个数字相加。

我非常坚持如何做到这一点，因为考虑到我必须输入“add()”而不仅仅是“add”，我不能真正使用一种方法来完成该功能。除非有办法在没有括号的情况下执行方法。我必须编写一个全新的课程还是有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:08:00.820

根据用户输入的内容，简单解释一下您可以做什么：

```
int x = get it from the user;
int y = get it from the user;
string operation = get it from the user; 
```

*   为操作创建单独的方法`(i.e add(int x, int y), multiply(int x, int y), etc..)`

然后创建一个方法 thag 获取值 (x, y, string) say.. 你可以调用它`calculate(int x, int y, string operation)`

然后在calculate方法中有一个switch语句：

```
switch(operation)
{
case "add":
      add(x,y);
      break;
case "multiply":
      multiply(x,y);
      break;
etc...
} 
```

好吧，让你想想:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T00:56:19.373

在 Java 中没有办法做到这一点。你有两个选择：

1）使用预处理器。2）用不同的语言写。您可以用其他语言编写东西，并且仍然与 Java 类和库兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T01:38:09.447

评论中的共识似乎是“你为什么要这样做？这是缓慢而麻烦的'。虽然后一部分是正确的，但通常会这样做。看[`ScriptEngine`](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html)作为一个例子。[这是一个小程序中JavaScript ScriptEngine](http://www.pscode.org/jse.html)的演示。

读者可能会注意到这`ScriptEngine`是一个接口，建议“根据所需的规则实现您自己的脚本引擎”的答案。创建另一种脚本语言是否是一个好主意，留给读者作为练习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T01:30:38.140

（对 user710502 提出的想法的扩展）

您可以使用[反射](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)。

```
double a = Double.parseDouble(some user input);
double b = Double.parseDouble(some user input);
String operation = some user input; // i.e. "add", "subtract"
Method operator = Calculations.class.getMethod(operation, double.class, double.class);
// NoSuchMethodException is thrown if method of operation name isn't found
double result = (Double) operator.invoke(null, a, b); 
```

在某种计算类中：

```
public static double add(double a, double b) {
    return a + b;
}

public static double subtract(double a, double b) {
    return a - b;
}

// and so forth 
```

# php - fopen 问题 和当前文件

> ID：12023365
> 
> 赞同：0
> 
> 时间：2012-08-19T00:47:24.090
> 
> 标签：php

我可以从用户提交的表单中获取名称并使用 fopen 创建文件。我需要做的是每当用户点击提交按钮时，我想取他们的名字`$_POST['name']`并用它来重命名我在同一目录中的当前文件。文件名是comment.PHP。它有一个用于输入评论的脚本。所以....当用户点击提交时，我需要使用`$_POST['name']`. 所以它应该看起来像 Jamescommet.PHP，如果另一个人提交他们的名字，它会填写一个名为 tomcomment.php 的内容。我需要这些文件来保存当前脚本。那么我应该改变什么？

```
$filename = $_POST['name']_comment.PHP; 
```

感谢您的帮助，唯一仍然存在的问题。是不是comment.PHP中的代码都没有包含在创建的文件中？

* * *

感谢您的帮助，唯一仍然存在的问题。是不是comment.PHP中的代码都没有包含在创建的文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:51:54.707

您需要将其中的一些用引号（或单引号）括起来：

```
$filename = $_POST['name'] . "_comment.php"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:19:14.737

在 PHP 中，'.' 是连接运算符。这意味着它将两个字符串合二为一。引号用于封装字符串。

因此，将变量组合`$_POST['name']` 为字符串，例如`_comment.php`

我们执行以下操作： `$_POST['name'] . "_comment.php"`

这将像您预期的那样组合变量和字符串。

### 可能有帮助的参考资料。

[http://www.php.net/manual/en/language.operators.string.php](http://www.php.net/manual/en/language.operators.string.php)

[http://www.php.net/manual/en/language.types.string.php](http://www.php.net/manual/en/language.types.string.php)

# cakephp - 路由单数控制器名称

> ID：12023373
> 
> 赞同：1
> 
> 时间：2012-08-19T00:49:19.587
> 
> 标签：cakephp, routing, url-routing

我认为`Routes`类真的很强大。我们用它创建了许多 URL 结构。（但我不知道怎么做：（）

我是初学者..如何更改 URL 中的复数控制器名称？例如改变：

```
http://example.com/fruits/lemon 
```

至

```
http://example.com/fruit/lemon 
```

（对于所有控制器）有可能吗？或者因为控制器是用复数名称（`FruitsController`）定义的，这是不可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T00:54:43.947

给你

```
Router::connect(
    '/fruit/:action/*', array('controller' => 'fruits')
); 
```

这样，在`/fruit/whatever`(url bar) 调用的任何操作现在都将连接到`/fruits/whatever`(internally) ！

[http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration](http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration)

# android - android tts，更改语言

> ID：12023380
> 
> 赞同：0
> 
> 时间：2012-08-19T00:50:21.533
> 
> 标签：android, text-to-speech

我正在开发一个使用 TTS for Android 的应用程序。我似乎没有为 TTS 设置语言。

我已经能够将我的应用程序设置为说意大利语，但不能使用芬兰语或俄语。但是，当我输出这些时，它们都会显示：

```
 Log.i("-------------",Arrays.toString(Locale.getAvailableLocales())); 
```

这使：

```
[ar, ar_EG, bg, bg_BG, ca, ca_ES, cs, cs_CZ, da, da_DK, de, de_AT, de_BE, de_CH, de_DE, de_LI, de_LU, el, el_CY, el_GR, en, en_AU, en_BE, en_BW, en_BZ, en_CA, en_GB, en_HK, en_IE, en_IN, en_JM, en_MH, en_MT, en_NA, en_NZ, en_PH, en_PK, en_RH, en_SG, en_TT, en_US, en_US_POSIX, en_VI, en_ZA, en_ZW, es, es_AR, es_BO, es_CL, es_CO, es_CR, es_DO, es_EC, es_ES, es_GT, es_HN, es_MX, es_NI, es_PA, es_PE, es_PR, es_PY, es_SV, es_US, es_UY, es_VE, et, et_EE, eu, eu_ES, fa, fa_IR, **fi, fi_FI**, fr, fr_BE, fr_CA, fr_CH, fr_FR, fr_LU, fr_MC, gl, gl_ES, hr, hr_HR, hu, hu_HU, in, in_ID, is, is_IS, it, it_CH, it_IT, iw, iw_IL, ja, ja_JP, kk, kk_KZ, ko, ko_KR, lt, lt_LT, lv, lv_LV, mk, mk_MK, ms, ms_BN, ms_MY, nl, nl_BE, nl_NL, no, no_NO, no_NO_NY, pl, pl_PL, pt, pt_BR, pt_PT, ro, ro_RO, **ru, ru_RU**, ru_UA, sh, sh_BA, sh_CS, sh_YU, sk, sk_SK, sl, sl_SI, sq, sq_AL, sr, sr_BA, sr_ME, sr_RS, sv, sv_FI, sv_SE, th, th_TH, tr, tr_TR, uk, uk_UA, vi, vi_VN, zh, zh_CN, zh_HK, zh_HANS_SG, zh_HANT_MO, zh_MO, zh_TW] 
```

所以有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:16:21.163

Locale.getAvailableLocales() 返回设备理解的语言环境代码，与当前文本转语音引擎支持的语言环境无关。

创建到 TTS 引擎的连接后，您可以调用[TextToSpeech.isLanguageAvailable(Locale)](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#isLanguageAvailable%28java.util.Locale%29)来确定引擎是否支持某种语言以及是否安装了该特定语言的数据。

# javascript - 带有数据的 IE 中的 jQuery 跨域发布

> ID：12023382
> 
> 赞同：3
> 
> 时间：2012-08-19T00:50:54.537
> 
> 标签：javascript, jquery, cors

CORS 现在在我的 Chrome、Firefox 应用程序中完美运行。使用这个插件[https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)

我也能够在 IE 中获得 CORS 请求，如下所示：

```
$.ajax({
    url: url,
    type:"POST",
    dataType: "json"
}); 
```

但是，当我尝试在 POST 请求中发送数据时，例如：

```
$.ajax({
    url: url,
    type:"POST",
    dataType: "json",
    data: {test: 5}
}); 
```

这没用。有没有人设法让 IE 发出包含 POST 数据的 CORS 请求？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:35:44.077

我注意到在 jQuery-ajaxTransport-XDomainRequest 源中，传递 userOptions.data 的发送函数调用被注释掉并且活动的 send() 调用没有参数：

我在使用 POST 时遇到了同样的问题，并且没有数据到达服务器。因此，我取消了带有数据调用的发送的注释，如下所示：

```
xdr.send(userOptions.data);
//xdr.send(); 
```

但是它仍然没有发送数据。所以我**将类型从“POST”更改为“GET”**并更新了我的服务器代码来处理它。好吧，它确实有效！我没有做更多的测试，我不确定 GET 对于我正在开发的代码是否可以接受。

*更新：我进一步测试并使用 send() 或 send(userOptions.data) 似乎对 IE 没有任何影响。正是对 GET 的更改使其工作，因此如果您必须在 ajax 代码中使用 POST，那么 POST 仍然是一个问题。*

由于我是跨域 ajax 数据发布的新手（IE 是问题），我希望其他人会发布他们的发现，因此它适用于 POST 和 GET。感谢你的帮助！

# c++ - 通过具有平滑蒙皮的关节变换顶点

> ID：12023390
> 
> 赞同：0
> 
> 时间：2012-08-19T00:52:24.857
> 
> 标签：c++, animation, matrix, directx, skinning

我在尝试使用平滑蒙皮为游戏中的网格设置动画时遇到问题。我正在从 Maya 导出网格、关节和所有动画数据，并且它在游戏中正确导入。我还在游戏中将我的关节显示为球体，只是为了确保它们的动画效果正确，而且它们确实如此。将顶点转换为骨骼空间时遇到问题，我不知道为什么。这是我目前正在做的事情的基本概要。

*   预先计算绑定姿势中每个骨骼的倒数。这里也设置了骨骼层次结构，我只是设置它们的局部矩阵，因为它们的世界矩阵是根据请求计算的。

*   在关键帧之间插值矩阵，这似乎正在工作，因为球体正在正确设置动画。

*   将网格顶点从绑定姿势复制到要修改的单独缓冲区中

*   变换每个顶点：

    对于每个顶点

    ```
     For each influencing bone in vertex

               Vertex tempvert;
               tempvert  = vertex.position * local bone inverse matrix;
               tempvert  = tempvert * world interpolated bone transform;
               tempvert *= influence weight;
               vertex   += tempvert; 
    ```

*   使用转换后的顶点更新 GPU

我也尝试过切换骨骼的本地和世界变换，但无济于事。我很确定我在做一些愚蠢的事情，我只是想在我拆开我的数学库之前确保是这种情况。

谢谢您的帮助。

# actionscript-3 - AS3 - 显示在玩家上方获得的分数

> ID：12023392
> 
> 赞同：0
> 
> 时间：2012-08-19T00:53:48.173
> 
> 标签：actionscript-3

因此，只要满足某个条件，我就会将此文本字段添加到我的容器 MC 中。

在这种情况下，我试图显示玩家MC每当他抓住硬币时获得的点数。有点像旧马里奥游戏，每当你踩到 Goomba 时，点就会出现在死去的 Goomba 上方。

我希望能够将“点”文本字段分配给“Text.as”文件，这样我就可以从那里而不是在我的文档类中控制文本字段的行为。

我知道如何从文档类创建一个文本字段，但我似乎无法在舞台上创建一个空文本字段，然后将其转换为影片剪辑，以便我可以为其分配一个基类。

有人知道处理这种情况的好方法吗？你可能有的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:40:17.940

通过 Text.as 类的构造函数中的代码创建 textField 是最有效的。但是，如果您打算在 Flash IDE 中执行此操作...创建动态文本字段，为其指定实例名称，然后使用 F8 将其转换为 MovieClip。转到库并输入您的新电影剪辑的属性，将基类设置为您的 Text.as 文件。

您的类（封装了 textField）应该开始看起来像这样：

```
package {
    public class Text extends Sprite {
        public var myTextFieldInstanceName:TextField;

        public function set text(val:String):void { myTextFieldInstanceName.text = val; }
        public function get text():String { return myTextFIeldInstanceName.text;}

        public function Text(defaultText:String){
            text = defaultText;
        }
    }
} 
```

为了设置基类，您需要执行我建议您为 Bullet 和 Impact 影片剪辑执行的相同操作。您可以通过选择“导出到 Actionscript”来执行链接。您可以告诉它要查看哪个类的行为。然后只需将它添加到您的 playerMC（当然在调整 x 和 y 值之后）。

# c# - 如何从具有泛型的接口派生类

> ID：12023394
> 
> 赞同：1
> 
> 时间：2012-08-19T00:54:02.760
> 
> 标签：c#, generics

我定义了这个接口：

```
public interface IOwlAnnotation2<T1, T2, T3>
{
    T1 OwlAnnotation { get; set; }
    T2 OwlClass { get; set; }
    T3 AnnotationValue { get; set; }
} 
```

现在我想为它派生一个类......所以我写道：

```
public class OwlAnnotation2 : IOwlAnnotation2<T1, T2, T3> 
```

但我收到无法解析 T1、2、3 上的符号的错误...从该接口派生的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T00:56:22.243

您必须在实现类中指定类型参数。您可以将它们保持通用：

```
public class OwlAnnotation2<T1, T2, T3> : IOwlAnnotation2<T1, T2, T3> 
```

或使它们具体化：

```
public class OwlAnnotation2 : IOwlAnnotation2<string, int, bool> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T00:56:51.097

要么使类具有相同的参数化合价，要么让它实现具有确定类参数的接口版本，具体取决于您真正想要的。

如果该类仅确定接口的某些类，您也可以混合和匹配，但我想这可能不是给定问题的情况。

# c# - 使用 Canvas 作为视觉元素的 VisuaBrush 缩放不正确

> ID：12023395
> 
> 赞同：0
> 
> 时间：2012-08-19T00:54:27.877
> 
> 标签：c#, wpf, canvas, visualbrush

几天来，我一直在与这个问题作斗争，并且在解决它或在网络上找到任何支持的运气为零。基本上，我正在尝试创建一个以画布作为视觉元素的 VisualBrush。我希望能够在此画布上绘制几条线，并最终将其映射到 3D 表面（形成一个矩形的 2 个平行三角形）。我已经设置了纹理坐标，并且可以通过简单地使用 ImageBrush 或类似的东西来确认一切正常。我遇到的问题是画布拒绝保持其大小，并且根据其中的内容不断缩放。例如，如果画布是 100x100 并且我在其中有一条从 (0, 0) 到 (50, 50) 的线，画布将被缩放，使得只有内部内容的 50x50 部分被映射到纹理坐标和 3D 表面。我已经尝试了许多 Viewport/Viewbox/StretchMode/Alignment/etc 的组合，但找不到任何可以阻止这种情况发生的东西。我正在设置画布的 Width 和 Height 属性，所以我看不出为什么它在 VisualBrush 中的表现与我只是将它添加到网格或其他一些布局容器中的表现不同。

这里有一些代码可以帮助说明问题。

```
 // create the canvas for the VisualBrush
        Canvas drawCanvas = new Canvas();
        drawCanvas.Background = Brushes.Transparent; // transparent canvas background so only content is rendered
        drawCanvas.Width = 100;
        drawCanvas.Height = 100;

        // add a line to the canvas
        Line l = new Line();
        l.X1 = 0;
        l.Y1 = 0;
        l.X2 = 50;
        l.Y2 = 50;
        l.Stroke = Brushes.Red;
        l.StrokeThickness = 2;
        drawCanvas.Children.Add(l);

        // create rectangular surface mesh
        MeshGeometry3D TableMesh = new MeshGeometry3D();
        CreateRectangleModel(
            new Point3D(0, 0, 0),
            new Point3D(0, 0, 100),
            new Point3D(100, 0, 100),
            TableMesh);

        // need to include texture coordinates for our table mesh to map canvas to 3D model
        TableMesh.TextureCoordinates = new PointCollection { 
            new Point(0, 0), new Point(0, 1), new Point(1, 1),
            new Point(1, 1), new Point(0, 1), new Point(0, 0),
            new Point(1, 1), new Point(1, 0), new Point(0, 0),
            new Point(0, 0), new Point(1, 0), new Point(1, 1)
        };

        // finally make our visual brush with the canvas we have created
        VisualBrush vb = new VisualBrush();
        vb.Visual = drawCanvas;
        Material TableMaterial = new DiffuseMaterial(vb);

        // add our new model to the scene
        GeometryModel3D geometry = new GeometryModel3D(TableMesh, TableMaterial);
        Model3DGroup group = new Model3DGroup();
        group.Children.Add(geometry);
        ModelVisual3D previewTable = new ModelVisual3D();
        previewTable.Content = group;
        MainViewport.Children.Add(previewTable); 
```

我引用的一个函数是

```
 private void CreateRectangleModel(Point3D pStart, Point3D pCorner1, Point3D pEnd, MeshGeometry3D mesh)
    {
        //  pCorner -> O--O <- pEnd
        //             | /|
        //             |/ |
        //   pStart -> O--O <- pCorner2

        // find the remaining point for our rectangle
        Point3D pCorner2 = new Point3D(
            pStart.X + (pEnd.X - pCorner1.X),
            pStart.Y + (pEnd.Y - pCorner1.Y),
            pStart.Z + (pEnd.Z - pCorner1.Z));

        // add necessary triangles to our group (we create 2 facing up, 2 facing down)
        CreateTriangleModel(pStart, pCorner1, pEnd, mesh);
        CreateTriangleModel(pEnd, pCorner1, pStart, mesh);
        CreateTriangleModel(pEnd, pCorner2, pStart, mesh);
        CreateTriangleModel(pStart, pCorner2, pEnd, mesh);
    } 
```

我无法让画布保持其设定的 100x100 大小，除非子内容一直到这些极端。出于我的目的，线坐标可以在画布中的任何位置，无论内容如何，​​我都需要让它保持其所需的形状。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:37:16.753

一些事情要尝试：

*   手动创建一个 100x100 像素的图像文件，然后将其放入 ImageBrush，并在 DiffuseMaterial 中使用该画笔。这是为了确认您的纹理坐标等设置正确。

*   不要在画布上使用透明背景颜色，而是尝试绿色（这是为了查看纹理是否基于透明像素进行裁剪）

*   如果正在对您的纹理进行裁剪（由于透明度）......然后尝试在 Canvas 上以您希望纹理的尺寸放置一个矩形......也许这会改变一些东西。

*   或者尝试使用 RenderTargetBitmap 从您的 Canvas 视觉创建图像......然后在 ImageBrush 中使用该图像。（然后您可以确认图像是您预期的 100x100 区域）。

*   最后，不要使用 Canvas+VisualBrush 创建纹理，而是尝试使用 DrawingBrush+DrawingGroup+GeometryDrawing 创建画笔

# macos - 使用 applescript 添加事件侦听器

> ID：12023396
> 
> 赞同：2
> 
> 时间：2012-08-19T00:54:31.950
> 
> 标签：macos, applescript

我正在尝试对`OSX Mountain Lion`. 我正在使用applescript，但我尝试过的一切都没有为我解决。

这是我首先尝试的

```
using terms from application "Messages"
   on message sent theObject
        display "it worked!"
   end message sent
end using terms from 
```

但是当我按下运行它似乎只是立即退出程序。如何让它留在监听器循环中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:11:24.573

我找到了这个问题的答案……我认为这完全不直观。基本上，首先将脚本移动到`~/Library/Scripts/Messages`，然后`Messages`为事件创建警报并让事件调用脚本。

# git - TortoiseGit 和 GitHub for Windows 客户端可以共存吗？

> ID：12023398
> 
> 赞同：7
> 
> 时间：2012-08-19T00:54:45.433
> 
> 标签：git, github, tortoisegit

只是想知道是否有人在同一台机器上安装了 TortoiseGit 和 GitHub Windows 客户端（[“GitHub for Windows”](http://windows.github.com/)），可以确认它们可以和平共存。我在 Windows 7 x64 上并且已经安装了 TortoiseGit，它集成到文件系统中，因为它是一个资源管理器扩展。我不愿意在上面安装另一个 Git 客户端来搞砸任何事情，我不想卸载 TortoiseGit。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T16:14:50.983

他们不会以任何方式干涉

# appharbor - xcopy on appharbor-不复制文件

> ID：12023399
> 
> 赞同：1
> 
> 时间：2012-08-19T00:54:57.227
> 
> 标签：appharbor

我有一个构建后事件，它将邮件模板从项目复制到 MVC 应用程序的 bin。这在本地和应用程序当前的实时环境中工作。我的应用程序在 appharbor 上构建良好，但是当它需要发送电子邮件时，它在磁盘上找不到模板。

构建事件：

```
xcopy  $(SolutionDir)PostHope.Web.Common\MailTemplates $(TargetDir)\MailTemplates\ /S /Y /R 
```

错误：

```
Could not find a part of the path 'D:\websites\aa\923ad\15823\0x0001\_PublishedWebsites\PostHope.Web.UI\bin\MailTemplates\NotifyNewPostIt.txt'. 
```

我也尝试将每个模板标记为`Copy Always`，但它仍然不起作用。我下载了构建，看起来该`MailTemplates`目录正在使用构建工件复制到根目录，但是它没有被放置在`_PublishedWebsites`目录中 Web 应用程序的 bin 中。如何将它移动到我的应用程序的 bin 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T00:01:21.673

问题可能是您需要在复制内容之前确保该`MailTemplates`目录存在。

# python - Python-如何将 struct.pack 值添加到将通过串行端口发送的整数

> ID：12023401
> 
> 赞同：3
> 
> 时间：2012-08-19T00:55:47.590
> 
> 标签：python, integer, serial-port, byte

我是python的新手，最近我提出了一个类似的问题，关于如何将十进制值转换为先低字节的整数，然后高字节在[这里](https://stackoverflow.com/questions/12020573/python-decimal-to-integer-low-byte-then-high-byte)并已解决，但现在我遇到了一个问题，因为我希望python采取来自 raw_input 的十进制值将其转换为先低字节后高字节的整数，并将其插入 16 位整数，以将其发送到串行端口到伺服控制器（devantech sd84）。我已将 raw_input 包含在一个值中，然后将 struc.pack 包含在其他值中，然后我将第二个值放入 16 位整数中，但在此之前 python 返回此错误：

```
 Traceback (most recent call last):
    File "C:/Users/Pablo/Desktop/kdfkldkfgv", line 28, in <module>
    POS_SERVO = struct.pack('<h', 'posicion')
    error: cannot convert argument to integer 
```

这是完整的代码：

```
 # -*- coding: utf-8 -*-
  import serial
  import time
  import struct
  # Para cambiar de Sistema Operativo cambiar puerto 
  #en la siguiente línea: Win COM# linux /dev/ttyS# /dev/ttyUSB#
  # #=un número asignado por tu sistema.
  port='COM3'
  sync='\xAA\xA0\x55'
  SET_SERVO='\x01'
  GET_SERVO='\x02'
  SET_SPEED='\x03'
  SET_MODE='\x04'
  GET_MODE='\x05'
  SET_AD_CNT='\x06' #Controla el número de canales analógicos.
  GET_AD_CNT='\x07' #Devuelve el número de canales analógicos actuales.
  GET_INPUT='\X08' # Devuelve el estado de una entrada.
  GET_ADC='\X09' #Devuelve el valor de un canal analógico.
  GET_VERSION='\x0A' #Devuelve la versión del procesador seleccionado.
  GET_BULK='\x15' #Usado para test en fábriica.
  TEST='\X16' #Usado para test en fábrica.
  ser = serial.Serial(port, baudrate=115200, bytesize=8, parity='N', stopbits=2,timeout=1)

  if ser.isOpen():
print "Estado del puerto: Correcto."
print "Procedo a enviar modo del canal 1 y posiciones del mismo."
posicion = raw_input('Inserta un numero entre 400 y 2200:')
POS_SERVO = struct.pack('<h', 'posicion')
ser.write(sync+SET_MODE+'\x01\x01\x19')
ser.write(sync+SET_SERVO+'\x01\x02'+POS_SERVO)
time.sleep(1.6) 
ser.close
print "Todo el proceso completado correctamente."

   else:
print "El puertito está cerrado"

   print "Hasta Luego :D" 
```

为了让拥有相同控制器的人感兴趣，我将解释 16 位整数的前三个字节是同步的（\xAA\xA0\x55），然后是命令类型 SET_SERVO（位置）（\x01），然后是通道 1- 1 的 84 是 (\x01) 然后是字节数，在这种情况下是 2 (\x02) 和伺服位置低字节，然后是高字节 (POS_SERVO)（例如对于 1500 \xDC\x05）

我不知道如何解决它，因为它不是一个参数，实际上它是一个值，我不知道如何告诉 python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T00:58:44.893

您正在传递一个字符串文字；你应该传递一个值，用裸名表示。但是您需要先将其转换为整数，然后才能对其进行处理。

```
POS_SERVO = struct.pack('<h', int(posicion)) 
```

不过，您应该考虑验证输入，以确保它是正确的类型并且在所需的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T12:59:29.583

就我而言，我四处搜索以找到问题所在。**将ints**参数传递给 struct.pack 而不是字符串！

# python - Python中的Selenium：如何点击非英文链接？

> ID：12023402
> 
> 赞同：1
> 
> 时间：2012-08-19T00:55:57.253
> 
> 标签：python, selenium, hyperlink

我想通过它的文本找到一个链接，但它是用非英文字符写的（如果重要的话，准确地说是希伯来语）。“find_element_by_link_text('link_text')”方法本来可以满足我的需要，但在这里它失败了。知道我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:35:05.617

将来，您需要粘贴一个有代表性的代码片段，当然还有一个回溯。我将假设当您说“代码无法编译”时，您的意思是您收到一个异常，告诉您尚未声明编码。

您需要在文件顶部有一行看起来像`# -*- coding: utf-8 -*-`或您放入文件中的文字的任何编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:36:19.470

您应该能够在代码中输入希伯来语搜索文本，只要您告诉 Python 编译器您对文件使用的编码是什么。[PEP 263](http://www.python.org/dev/peps/pep-0263/)描述了如何做到这一点。基本上，您需要将“魔术”注释作为源文件的第一行或第二行，如下所示：

```
# coding: utf-8 
```

您不必使用`utf-8`任何一种，只需输入您正在使用的任何编码（只要它是 Python 可以解码的编码）。

# r - 在函数中使用 parLapply 和 clusterExport

> ID：12023403
> 
> 赞同：40
> 
> 时间：2012-08-19T00:56:17.097
> 
> 标签：r, parallel-processing

我在这里问了一个相关的问题，反应很好： [使用并行的parLapply：无法访问并行代码中的变量](https://stackoverflow.com/questions/12019638/using-parlapply-for-parallel-computing)

问题是当我尝试在函数内部使用答案时，它将无法正常工作，因为我认为它必须在`clusterExport`. 我已经阅读了小插图并查看了帮助文件，但我的知识库非常有限。我使用的方式`parLapply`我希望它的行为类似于`lapply`但它似乎没有。

这是我的尝试：

```
par.test <- function(text.var, gc.rate=10){ 
    ntv <- length(text.var)
    require(parallel)
    pos <-  function(i) {
        paste(sapply(strsplit(tolower(i), " "), nchar), collapse=" | ")
    }
    cl <- makeCluster(mc <- getOption("cl.cores", 4))
    clusterExport(cl=cl, varlist=c("text.var", "ntv", "gc.rate", "pos"))
    parLapply(cl, seq_len(ntv), function(i) {
            x <- pos(text.var[i])
            if (i%%gc.rate==0) gc()
            return(x)
        }
    )
}

par.test(rep("I like cake and ice cream so much!", 20))

#gives this error message
> par.test(rep("I like cake and ice cream so much!", 20))
Error in get(name, envir = envir) : object 'text.var' not found 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-19T01:09:48.613

默认情况下`clusterExport`，在 中查找`.GlobalEnv`要导出的对象`varlist`。如果您的对象不在 中`.GlobalEnv`，您必须告诉`clusterExport`它在哪个环境中可以找到这些对象。

您可以将您的更改`clusterExport`为以下内容（我没有测试，但您在评论中说有效）

```
clusterExport(cl=cl, varlist=c("text.var", "ntv", "gc.rate", "pos"), envir=environment()) 
```

这样，它将在函数的环境中查找要导出的对象。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-19T05:33:04.163

另一种解决方案是将附加变量作为参数包含在您的函数中；parLapply 也导出它们。如果 'text.var' 是大数据，那么将其作为应用于的参数而不是索引是值得的，因为这样只会导出与每个工作人员相关的 text.var 部分，而不是整个对象给每个工人。

```
par.test <- function(text.var, gc.rate=10){ 
    require(parallel)
    pos <-  function(i) {
        paste(sapply(strsplit(tolower(i), " "), nchar), collapse=" | ")
    }
    cl <- makeCluster(mc <- getOption("cl.cores", 4))
    parLapply(cl, text.var, function(text.vari, gc.rate, pos) {
        x <- pos(text.vari)
        if (i%%gc.rate==0) gc()
        x
    }, gc.rate, pos)
} 
```

这在概念上也是令人愉悦的。（很少需要显式调用垃圾收集器）。

`source()`执行脚本时的内存管理会导致其他问题。比较

```
> stop("oops")
Error: oops
> traceback()
1: stop("oops") 
```

在脚本中使用相同的调用

```
> source("foo.R")
Error in eval(ei, envir) : oops
> traceback()
5: stop("oops") at foo.R#1
4: eval(ei, envir)
3: eval(ei, envir)
2: withVisible(eval(ei, envir))
1: source("foo.R") 
```

请记住，R 的`serialize()`函数在内部`parLapply()`用于将数据移动到工作人员，它将所有内容序列化到 .GlobalEnv。因此，在脚本中创建的数据对象被序列化到工作人员，而如果以交互方式运行，它们将不会被序列化。这可能解释了@SeldeomSeenSlim 在运行脚本时的问题。解决方案可能是更清楚地将“数据”与“算法”分开，例如，使用文件系统或数据库或......来存储对象。

# jquery - chrome上的选择框不起作用

> ID：12023405
> 
> 赞同：1
> 
> 时间：2012-08-19T00:56:19.210
> 
> 标签：jquery, google-chrome, drop-down-menu

我制作了一个样式选择器，将站点从盒装更改为宽，从宽更改为盒装。它适用于所有浏览器，但不适用于 Chrome。当我从选择框中单击选项时，没有任何反应。

这是 HTML 的一部分：

```
 <link rel="stylesheet" type="text/css" href="css/boxed.css" id="layout">

   <select>
        <option class="boxed">Boxed</option>
        <option class="wide">Wide</option>
    </select> 
```

JavaScript：

```
 // Layout Changer
    $(".wide" ).click(function(){
        $("#layout" ).attr("href", "css/wide.css" );
        return false;
    });

    $(".boxed" ).click(function(){
        $("#layout" ).attr("href", "css/boxed.css" );
        return false;
    }); 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:11:34.213

你的问题不是`id`标签。这是`click`处理程序。尝试这个：

JavaScript：

```
$(function() { 
    $("#style_switcher").on('change', function() {
        $('#layout').attr('href', $(this).val() + '.css');
    });
}); 
```

HTML：

```
<link id="layout" rel="stylesheet" type="text/css" href="wide.css">

<select id="style_switcher">
    <option value="wide">Wide</option>
    <option value="boxed">Boxed</option>
</select> 
```

您还可以查看此插件并让自己轻松使用：http: [//www.kelvinluck.com/assets/jquery/styleswitch/toggle.html](http://www.kelvinluck.com/assets/jquery/styleswitch/toggle.html)

# python - Python Twitter 工具和 gzip 错误“IOError: CRC check failed”

> ID：12023408
> 
> 赞同：2
> 
> 时间：2012-08-19T00:56:35.533
> 
> 标签：python, twitter, gzip

我正在使用[Python Twitter 工具](https://github.com/sixohsix/twitter)下载大量用户的最新 200 条推文。我收到一个仅间歇性发生的 gzip 错误。在看似随机的时间间隔内，循环会因下面的错误堆栈而崩溃。如果我立即重新启动循环并发送同一个用户，下载它就不会出现问题。当推文崩溃时，我查看了推文的标题，似乎与不会导致问题的标题没有任何不同。而且我已经确认，我毫无问题地返回的许多结果也被 gzip 压缩并且未压缩良好。

有没有人以前见过这个问题和/或可以提出修复/解决方法？

这是错误堆栈，值得：

```
File "/Users/martinlbarron/Dropbox/Learning Python/downloadTimeline.py", line 33, in <module>
    result=utility.downloadTimeline(kwargs,t)
  File "/Users/martinlbarron/Dropbox/Learning Python/utility.py", line 73, in downloadTimeline
    response=t.statuses.user_timeline(**kargs)
  File "/Library/Python/2.7/site-packages/twitter-1.9.0-py2.7.egg/twitter/api.py", line 173, in __call__
    return self._handle_response(req, uri, arg_data)
  File "/Library/Python/2.7/site-packages/twitter-1.9.0-py2.7.egg/twitter/api.py", line 184, in _handle_response
    data = f.read()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/gzip.py", line 245, in read
    self._read(readsize)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/gzip.py", line 299, in _read
    self._read_eof()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/gzip.py", line 338, in _read_eof
    hex(self.crc)))
IOError: CRC check failed 0xf4196259 != 0x34967f68L
logout 
```

添加我的代码（温柔点，我是 Python 新手）

我有一个推特名称列表。我在下面的代码中遍历它们，调用我的 twitter 下载函数 (downloadTimeline)。

```
t = Twitter(
    auth=OAuth("XXX", "XXX",
               "XXX", "XXX"))
for i in range(startRange,endRange):
    #Get the id string for user
    row=newlist[i]
    sc=row[3]
    kwargs = dict(count=200, include_rts=False, include_entities=False, trim_user=True, screen_name=sc)
    result=utility.downloadTimeline(kwargs,t) 
```

在 downloadTimeline 中，我得到了 twitter 响应（响应），然后将其解析为字典

```
def downloadTimeline(kargs, t):

    #Get timeline
    mylist = list()
    counter=1000
    try:
        response=t.statuses.user_timeline(**kargs)
        counter=response.rate_limit_remaining
        #parse the file out
        if len(response)>0:
            for tweet in response:
                user=tweet['user']
                dict =  {
                    'id_str': cleanLines(tweet['id_str']), 
                    #ommitting the whole list of all the variables I save
                }
                mylist.append(dict)

    except twitter.TwitterError as e:
            print("Fail: %i" % e.e.code)

    return  (mylist, counter) 
```

最后，虽然这显然不是我的代码，但在 Python Twitter 工具框架中，这是一段似乎令人窒息的代码（特别是在 f = gzip.GzipFile(fileobj=buf) 处）

```
 def _handle_response(self, req, uri, arg_data):
        try:
            handle = urllib_request.urlopen(req)
            if handle.headers['Content-Type'] in ['image/jpeg', 'image/png']:
                return handle
            elif handle.info().get('Content-Encoding') == 'gzip':
                # Handle gzip decompression
                buf = StringIO(handle.read())
                f = gzip.GzipFile(fileobj=buf)
                data = f.read()
            else:
                data = handle.read()

            if "json" == self.format:
                res = json.loads(data.decode('utf8'))
                return wrap_response(res, handle.headers)
            else:
                return wrap_response(
                    data.decode('utf8'), handle.headers)
        except urllib_error.HTTPError as e:
            if (e.code == 304):
                return []
            else:
                raise TwitterHTTPError(e, uri, self.format, arg_data) 
```

* * *

事实证明，在 Python Twitter 工具中关闭接受 gzip 标头非常容易。但是当我这样做时，我收到以下错误。我想知道响应是否以某种方式被截断：

```
 File "/Users/martinlbarron/Dropbox/Learning Python/downloadTimeline.py", line 33, in <module>
    result=utility.downloadTimeline(kwargs,t)
  File "/Users/martinlbarron/Dropbox/Learning Python/utility.py", line 73, in downloadTimeline
    response=t.statuses.user_timeline(**kargs)
  File "/Library/Python/2.7/site-packages/twitter-1.9.0-py2.7.egg/twitter/api.py", line 175, in __call__
    return self._handle_response(req, uri, arg_data)
  File "/Library/Python/2.7/site-packages/twitter-1.9.0-py2.7.egg/twitter/api.py", line 193, in _handle_response
    res = json.loads(handle.read().decode('utf8'))
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Unterminated string starting at: line 1 column 13699 (char 13699)
logout 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:27:13.017

代替 ：

```
buf = StringIO(handle.read())
f = gzip.GzipFile(fileobj=buf)
data = f.read() 
```

尝试这个：

```
decomp = zlib.decompressobj(16+zlib.MAX_WBITS)
data = decomp.decompress(handle.read()) 
```

不要忘记`import zlib`

# javascript - Fancybox：让它在 mouseover/mouseout 上工作

> ID：12023412
> 
> 赞同：1
> 
> 时间：2012-08-19T00:56:58.047
> 
> 标签：javascript, jquery, fancybox

我目前通过使用以下方式使其工作一半：

```
jQuery("a.lightbox").fancybox().hover(function() {
    jQuery(this).click();
  }, function() {
    jQuery("#fancybox-overlay").click();
  }); 
```

当我将鼠标悬停在缩略图上时，它可以正常工作，但是当我将鼠标悬停在背景上时，`#fancybox-overlay`它不会禁用fancybox ..有什么想法吗？

与悬停意图：

```
function openFancybox(){
 jQuery(this).trigger("click");
}
function closeFancybox(){
 jQuery.fancybox.close();
}

jQuery("a.lightbox").hoverIntent({
 sensitivity: 100,
 interval:250,
 timeout:0,
 over: openFancybox,
 out: closeFancybox 
}); // hoverIntent

jQuery("#fancybox-content img").hoverIntent({
 sensitivity: 10,
 interval:500,
 timeout:0,
// over: openFancybox,
 out: closeFancybox 
}); // hoverIntent

jQuery("a.lightbox").fancybox({
 'overlayShow' : false,
 'autoScale'   : true
}); // fancybox 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:16:12.603

答案：

**HTML**

```
<a href="image1.jpg" class="lightbox" rel="gallery"><img src="image1.jpg"></a>
<a href="image2.jpg" class="lightbox" rel="gallery"><img src="image2.jpg"></a>​ 
```

**JS**

```
$("a.lightbox").fancybox({
    'showCloseButton': false
}).hover(function() {
    $(this).click();
    $(".fancybox-overlay").mouseout(function() {
        $.fancybox.close();
    });
});​ 
```

**[演示](http://jsfiddle.net/NvpVT/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:04:25.503

使用这个片段：

```
$("a.lightbox").mouseover(function(){
   $("a.lightbox:first").trigger("click");
}); 
```

对 mouseout 事件做同样的事情... =)

# string - 是否可以用 Emacs 替换目录和子目录中的文本或整个文件？

> ID：12023413
> 
> 赞同：1
> 
> 时间：2012-08-19T00:57:01.773
> 
> 标签：string, file, emacs, bulk

我刚开始使用 Emacs，到目前为止我印象非常深刻（但也可能有点不知所措）。几天前，我不得不替换一个文件中的一个字符串，并为根路径中存在的所有目录替换整个第二个文件。我通过编写批处理文件解决了这个问题。（这是一台 Windows XP 机器）。现在，我刚刚找到了这个链接[http://ergoemacs.org/emacs/find_replace_inter.html](http://ergoemacs.org/emacs/find_replace_inter.html)，我有一种奇怪的感觉，即使用 Emacs 可以实现这个过程。这个对吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T08:40:23.193

这是。

浏览一下信息手册可能会有所帮助。也许开始：

```
M-x info-lookup-symbol RET dired-do-rename 
```

# gpu - 类似于 GPU Gems 系列的实际 gpu 技术摘要

> ID：12023416
> 
> 赞同：4
> 
> 时间：2012-08-19T00:57:50.237
> 
> 标签：gpu

我喜欢 GPU Gems 的结构化技术摘要。但是自上次发布以来已经过去了很长时间，应该开发新的算法来处理新型硬件。

关于最近的 GPU 技术成就，我能读到什么？

潜伏在编程板上是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T04:04:07.053

NVidia 有一个[推荐阅读](https://developer.nvidia.com/suggested-reading)列表，其中包含最新的 GEMS 书籍和其他一些书籍。从外观上看，没有什么比 Emerald GEMS 书更好/更新的了。

鉴于没有新的 GEMS 书籍，您最好的选择可能是查看[GTC 会议](http://www.gputechconf.com/gtcnew/on-demand-gtc.php)的一些演示文稿和论文。这些可按需提供。

顺便说一句：我不久前[以类似的方式问了一个问题](https://stackoverflow.com/questions/5304245/good-books-and-resources-on-data-parallel-programming-and-algorithms)。[Hillis & Steele [1986]，“Data Parallel Algorithms”](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.85.1876&rep=rep1&type=pdf)，非常古老，但仍然值得一读。

# node.js - Node.js 如何让它在 CentOS 上运行？

> ID：12023417
> 
> 赞同：1
> 
> 时间：2012-08-19T00:58:42.057
> 
> 标签：node.js, centos

最近我在 CentOS 6.5 机器上安装了 Node、Express 和 Jade，没有其他 Web 服务器或任何东西。我的网站正在运行，但为了保持它的正常运行，我必须在服务器运行的情况下打开一个腻子窗口。到目前为止没有问题，但如果我失去电源或互联网，我的 SSH 连接就会丢失并且网站会关闭。无论我的 SSH 状态如何，有没有办法让我的 app.js 继续运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T01:19:53.933

您需要[守护](http://en.wikipedia.org/wiki/Daemon_%28computing%29)您的应用程序。有很多不同的方法可以做到这一点。

1.  您可以为 node.js使用[守护程序模块。](https://github.com/indexzero/daemon.node)
2.  您可以在“屏幕”内启动您的应用程序。
3.  您可以使用 nohup util 启动您的应用程序：

    ```
    sudo -u [appuser] nohup node [path_to_your_app] > [path_to_log_file] 2>&1 & 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-19T22:47:40.110

我知道这是旧的；但是，我的 CentOS 不会“永远安装 sudo yum”——给出错误：“永远没有可用的软件包”。所以我尝试了

```
"sudo -u [appuser] nohup node [path_to_your_app] > [path_to_log_file] 2>&1 &", where;

[appuser] = admin
[path_to_your_app] = server.js
[path_to_log_file] = log.txt. 
```

尽管如此，在 5 分钟内，由于“管道损坏”和通过节点服务器运行的网页，服务器超时，停止。

# sql-server-2008 - MSSQL 选择前 10 名获胜分数，包括平局和每个类别中至少一个

> ID：12023422
> 
> 赞同：5
> 
> 时间：2012-08-19T01:01:18.900
> 
> 标签：sql-server-2008

使用以下语句，我在查找前 10 名得分（包括并列条目）时得到了一些帮助

```
select T.EntryID, T.CategoryID, T.Score
from (
   select EntryID, CategoryID, Score,
          dense_rank() over(order by Score) as rn
   from YourTable
 ) T
where T.rn <= 10 
```

（感谢 [mikael-eriksson]：[https](https://stackoverflow.com/users/569436/mikael-eriksson) ://stackoverflow.com/users/569436/mikael-eriksson ）

[问题]：[MSSQL 选择前 10 名但包含重复值的列](https://stackoverflow.com/questions/10930422/mssql-selecting-top-10-but-include-columns-with-duplicate-values)这是示例数据：

```
EntryID CategoryID  Score
3036    1           85
3159    1           85
3039    1           84
3146    1           83
3225    1           82
3045    1           82
3047    1           80
3048    1           80
3049    1           80
3193    1           80
3098    1           80
3025    1           72
3082    1           70
3167    1           70
3122    1           67
3220    1           65
3080    1           65
3168    1           64
______________________
Total Entries >= 18 
```

要求前 10 名（或任何可能的前 100 名）中的每个类别至少有一个条目，在这种情况下，有 3 个类别。

现在我需要做的就是在前 10 名中每个类别至少包含一个条目。即，如果所有前 10 名分数都来自类别 1，并且有 3 个类别，我需要从类别 1 中删除 2 个最低分数并且包括第 2 类和第 3 类的最高分条目。

正如您从结果中看到的，所有条目都来自类别 1，所以我需要从结果集中删除 EntryID 的 3220、3080 和 3168，因为它们是得分最低的，并包括类别 2 中得分最高的条目以及最高得分在类别 3 中评分条目，因此结果如下所示：

```
EntryID CategoryID  Score
3036    1           85
3159    1           85
3039    1           84
3146    1           83
3225    1           82
3045    1           82
3047    1           80
3048    1           80
3049    1           80
3193    1           80
3098    1           80
3025    1           72
3082    1           70
3167    1           70
3122    1           67
3019    3           60
3800    2           54
______________________
Total Entries >= 17 
```

下面的场景也是如此，让我们看一下前 5 名而不是前 10 名，以使其看起来更容易一些，正如您在此示例中看到的那样，前 5 名分数不包括类别 2 中的条目

```
EntryID CategoryID  Score
3036    1           85
3159    1           85
3039    1           84
3146    1           83
3225    1           82
3045    1           82
3019    3           60
______________________
Total Entries >= 7 
```

在这种情况下，条目 3225 和 3045 需要删除，因为它们是得分最低的条目（需要包括 3047，因为即使它是得分最低的条目，我需要结果中所有类别的条目）并且我需要包括得分最高的条目来自类别 2 的条目，我希望是这样的：

```
EntryID CategoryID  Score
3036    1           85
3159    1           85
3039    1           84
3146    1           83
3019    3           60
3800    2           54
______________________
Total Entries >= 6 
```

然后可能存在可能没有进入特定类别的情况，例如没有类别 2 条目，因此结果应该仍然具有前 5 名，就像上面前 5 名的原始结果集一样（包括在下面作为参考）

```
EntryID CategoryID  Score
3036    1           85
3159    1           85
3039    1           84
3146    1           83
3225    1           82
3045    1           82
3019    3           60
______________________
Total Entries >= 7 
```

如果我在重复自己，请原谅，我只是想清楚地理解；）

我真的很感激帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T10:11:54.827

正如我所看到的，您需要以更复杂的方式对行进行排名，以便包括每个类别中排名靠前的条目，而不管它们的值如何，而不是排名靠前的条目则根据它们的整体被包括在内排名。

我要建议的可能不是最有效的解决方案，但它应该有效，如果没有其他办法，可能会激发其他人想出更好的东西：

```
WITH ranked1 AS (
  SELECT
    *,
    RankByCategory = DENSE_RANK() OVER (
      PARTITION BY CategoryID
      ORDER BY Score DESC
    )
  FROM YourTable
),
ranked2 AS (
  SELECT
    *,
    FinalRank = DENSE_RANK() OVER (
      ORDER BY
        CASE RankByCategory WHEN 1 THEN 1 ELSE 2 END,
        Score DESC
    )
  FROM ranked1
)
SELECT
  EntryID,
  CategoryID,
  Score
FROM ranked2
WHERE FinalRank <= @top_n
; 
```

第一个 CTE 是按类别对行进行排名，从而让我们找出哪些条目成为各自类别中的顶级条目。下一步（第二个 CTE）是关于获得全球排名，这一次要考虑一个条目是否是其类别中的第一名。类别最高值的排名较低，因此确保包含在最终结果中。（当然，您需要确保类别的数量不大于您希望在输出中接收的不同值的数量。）

这是[SQL Fiddle](http://sqlfiddle.com/#!3/03cee/2)上的一个活生生的例子。

# objective-c - NSUserNotification 不在通知中显示应用程序图标

> ID：12023424
> 
> 赞同：1
> 
> 时间：2012-08-19T01:02:15.080
> 
> 标签：objective-c, macos, notifications, center, osx-mountain-lion

我做了一个发送通知的简单应用程序，但应用程序的图标没有显示在通知中。附加到项目的图标集，具有所有分辨率。

可能是什么问题？

# .net - 对 mvc 4 视图的子集使用 https 端点

> ID：12023426
> 
> 赞同：2
> 
> 时间：2012-08-19T01:03:22.480
> 
> 标签：.net, azure, https, asp.net-mvc-4, endpoint

我正在使用托管在 Azure 上的 mvc 4 构建 Web 解决方案。来自 winforms/wpf 世界，我意识到我对 Web 配置有很多不了解的地方。我也被视为 MVC 新手，所以我可能在这里忽略了一些明显的东西......

在我的 azure web 角色中，我配置了两个端点，一个用于 http，一个用于 https。我想要实现的是，将一组公共视图/控制器绑定到我的 http 端点，并将一组受 ssl 保护的控制器绑定到我的 https 端点。

例如

[http://www.mysite.com/home](http://www.mysite.com/home)

[https://www.mysite.com/login](https://www.mysite.com/login)

[https://www.mysite.com/account](https://www.mysite.com/account)

我想我正在寻找一种将控制器绑定到配置的端点的方法，或者如果这不可能，请确保将[http://www.mysite.com/login](http://www.mysite.com/login)重定向到[https://www.mysite.com /login](https://www.mysite.com/login)，对于未受保护的控制器反之亦然。

我的解决方案还包括一组 mvc 4 webapi 控制器，这些都是受 ssl 保护的。如果无法避免在 http 端点上公开这些，如果有人试图在不安全的端点上访问这些，我想用 http 错误代码进行响应。

我确定我可以通过编程方式解决这个问题，但是有没有一种干净的方法可以通过配置来解决这个问题？

* * *

作为奖励，像这样设置它也很酷：

[https://secure.mysite.com/login](https://secure.mysite.com/login)

我通过[设置**两个**mvc 4 项目](http://blog.structuretoobig.com/post/2012/01/17/One-Azure-Web-Role-Multiple-Websites.aspx)`<Site>`实现了这一点，在服务配置文件中定义了两个s。但是，我不想把它分成两个项目。这可以通过某种配置来实现吗？

为了给你一些工作，这是我的 ServiceConfiguration.csdef 的摘录

```
 <Sites>
  <Site name="www" physicalDirectory="..\project1">
    <Bindings>
      <Binding name="HttpIn" endpointName="HttpIn" />
    </Bindings>
  </Site>
  <Site name="api" physicalDirectory="..\project2">
    <Bindings>
      <Binding name="HttpsIn" endpointName="HttpsIn" hostHeader="secure.mysite.com" />
    </Bindings>
  </Site>
</Sites>
<Endpoints>
  <InputEndpoint name="HttpsIn" protocol="https" port="443" certificate="Certificate1" />
  <InputEndpoint name="HttpIn" protocol="http" port="80" />
</Endpoints> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:10:27.593

您通常会为此使用[RequireHttpsAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx)（将其应用于您只想通过 HTTPS 访问的任何控制器或操作，例如 AccountController）。[Carlos Figueira在他的博客上](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/09/implementing-requirehttps-with-asp-net-web-api.aspx)也有一个 ASP.NET Web API 实现。

# c# - prestashop c# 使用 Metro 应用程序进行身份验证

> ID：12023427
> 
> 赞同：0
> 
> 时间：2012-08-19T01:03:22.673
> 
> 标签：c#, authentication, microsoft-metro, prestashop

嗨，我已经为此奋斗了几天，但我无处可去

Prestashop 一个 php 应用程序是一个网络购物车。它使用 REST 服务和 CRUD 调用。1\. Crud如何与rest一起使用？他们是两种不同类型的电话？2\. 如何使用 crud\rest 进行身份验证？我是地铁应用程序的新手，真的需要一些指导谢谢

我有以下代码

```
 private string clientId = "1LNTNMSMY285VLT28K7L345r345345T";
    private string logonUristring = "dignity-network.org/api/";
    private string redirectUristring = "http://dignity-network.org/api/";
    private string header = "http://";

    client = new HttpClient();
    client.BaseAddress = new Uri(string.Format("{0}{1}@{2}", header, clientId, logonUristring));

protected async void opened()
    {
        var task = client.GetAsync("products");
        HttpResponseMessage response = await task;
        response.EnsureSuccessStatusCode(); //gets back 200 success code
        string content = await response.Content.ReadAsStringAsync();
        MessageDialog msg = new MessageDialog(content, "My MessageDialog Box");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:22:32.023

实际上，只要您的服务支持所有 HTTP 动词，CRUD 就可以直接映射到 REST。

关于身份验证，REST 中没有定义身份验证，因此您只需使用服务所需的任何类型的身份验证。

简而言之，你最好问 Prestashop 这些问题。

# ruby-on-rails - 在 rails shopify 应用程序中确定用户数据范围的正确方法是什么？

> ID：12023429
> 
> 赞同：1
> 
> 时间：2012-08-19T01:04:03.847
> 
> 标签：ruby-on-rails, ruby, shopify

对于本地存储的数据，将实体范围限定为当前登录的店主的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:06:20.790

最好的办法是存储 .myshopify 域。这是商店永远不会更改的唯一标识符，您需要它来向商店发出请求。商店 ID 也是唯一的，但对于您可能想做的任何事情基本上都没用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:33:11.537

稍微戳了一下，我意识到`ShopifyAPI::Shop.current.id`这是正确的方法。

# javascript - 来自 URL 的正则表达式 URL 路径

> ID：12023430
> 
> 赞同：20
> 
> 时间：2012-08-19T01:04:17.637
> 
> 标签：javascript, regex, node.js, url

我有一点正则表达式的麻烦。

我正在尝试获取此 url 中的路径`videoplay`。

```
http://video.google.co.uk:80/videoplay?docid=-7246927612831078230&hl=en#hello 
```

如果我使用这个正则表达式`/.+`，它也会匹配`/video`。

我需要某种反/否定匹配来不包括`//`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-07-03T05:22:14.977

如果您的 JavaScript 网络应用程序需要此功能：我在此主题上找到的最佳答案是[此处](https://gist.github.com/jlong/2428561)。代码的基本（也是原始）版本如下所示：

```
var parser = document.createElement('a');
parser.href = "http://example.com:3000/pathname/?search=test#hash";

parser.protocol; // => "http:"
parser.hostname; // => "example.com"
parser.port;     // => "3000"
parser.pathname; // => "/pathname/"
parser.search;   // => "?search=test"
parser.hash;     // => "#hash"
parser.host;     // => "example.com:3000" 
```

谢谢约翰·朗，你白天造的！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-19T08:54:01.807

`(http[s]?:\/\/)?([^\/\s]+\/)(.*)`第 3 组
演示：[http ://regex101.com/r/vK4rV7/1](http://regex101.com/r/vK4rV7/1)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-25T11:06:21.173

此表达式获取 之后的所有内容`videoplay`，即 url 路径。

```
/\/(videoplay.+)/ 
```

此表达式获取端口之后的所有内容。也包括路径。

```
/\:\d./(.+)/ 
```

但是，如果使用`Node.js`我推荐使用本机`url`模块。

```
var url = require('url')
var youtubeUrl = "http://video.google.co.uk:80/videoplay?docid=-7246927612831078230&hl=en#hello"
url.parse(youtubeUrl) 
```

所有的正则表达式都适合你。

```
{
  protocol: 'http:',
  slashes: true,
  auth: null,
  host: 'video.google.co.uk:80',
  port: '80',
  hostname: 'video.google.co.uk',
  hash: '#hello',
  search: '?docid=-7246927612831078230&hl=en',
  query: 'docid=-7246927612831078230&hl=en',
  pathname: '/videoplay',
  path: '/videoplay?docid=-7246927612831078230&hl=en',
  href: 'http://video.google.co.uk:80/videoplay?docid=-7246927612831078230&hl=en#hello' 
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T03:08:39.827

你可以试试这个：

```
^(?:[^/]*(?:/(?:/[^/]*/?)?)?([^?]+)(?:\??.+)?)$ 
```

***([^?]+)*上面是返回路径的捕获​​组。**

请注意，这不是一个全 URL 正则表达式。它只是解决了匹配“//”之后出现的第一个“/”和后面的“？”之间的所有文本的问题。特点。

如果您需要一个全匹配的正则表达式，您可以查看这个[StackOverflow 链接](https://stackoverflow.com/questions/27745/getting-parts-of-a-url-regex)，他们在其中讨论并剖析了 URI 的所有可能性，并将其分解为包括您的“路径”在内的组成部分。
如果您认为这是一种矫枉过正，并且如果您知道您的输入 URL 将始终遵循您的路径在第一个“/”和后面的“？”之间的模式，那么上面的正则表达式就足够了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-04T01:56:10.383

```
function getPath(url, defaults){
    var reUrlPath = /(?:\w+:)?\/\/[^\/]+([^?#]+)/;
    var urlParts = url.match(reUrlPath) || [url, defaults];
    return urlParts.pop();
}
alert( getPath('http://stackoverflow.com/q/123/regex-url', 'unknown') );
alert( getPath('https://stackoverflow.com/q/123/regex-url', 'unknown') );
alert( getPath('//stackoverflow.com/q/123/regex-url', 'unknown') );
alert( getPath('http://stackoverflow.com/q/123/regex-url?foo', 'unknown') );
alert( getPath('http://stackoverflow.com/q/123/regex-url#foo', 'unknown') );
alert( getPath('http://stackoverflow.com/q/123/regex-url/', 'unknown') );
alert( getPath('http://stackoverflow.com/q/123/regex-url/?foo', 'unknown') );
alert( getPath('http://stackoverflow.com/q/123/regex-url/#foo', 'unknown') );
alert( getPath('http://stackoverflow.com/', 'unknown') );
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-19T01:06:04.380

你的意思是消极的回顾？`(?<!/)`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-11T09:06:31.760

对于新的 Google 员工，请在任何环境中使用 JavaScript Web api URL：

```
new URL('your url string').pathname 
```

[https://developer.mozilla.org/en-US/docs/Web/API/URL/URL](https://developer.mozilla.org/en-US/docs/Web/API/URL/URL)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-05T13:16:56.507

```
var subject =
'<link rel="shortcut icon" href="https://cdn.sstatic.net/Sites/stackoverflow/img/favicon.ico?v=ec617d715196"><link rel="apple-touch-icon" href="https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon.png?v=c78bd457575a"><link rel="image_src" href="https://cdn.sstatic.net/Sites/stackoverflow/img/apple-touch-icon.png?v=c78bd457575a">';
var re=/\"[a-z]+:\/\/[^ ]+"/m;
document.write(subject.match(re));
```

你可以试试这个

```
/\"[a-z]+:\/\/[^ ]+/ 
```

用法

```
if (/\"[a-z]+:\/\/[^ ]+/m.test(subject)) {  // Successful match } else {    // Match attempt failed } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-19T18:33:52.537

它不是正则表达式解决方案，但大多数语言都有一个 URL 库，可以将任何 URL 解析为其组成部分。对于您正在做的事情，这可能是一个更好的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-10T07:33:50.247

请试试这个：

```
^http[s]?:\/\/(www\.)?(.*)?\/?(.)* 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-10T08:01:19.343

即使使用语言功能的答案很好，这里还有另一种使用 REGEXP 将 URL 拆分为组件的方法：

```
^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?
     ||            |  |          |       |   |        | |
     12 - scheme   |  |          |       |   |        | |
                   3  4 - authority, includes hostname/ip and port number.
                                 5 - path|   |        | |
                                         6   7 - query| |
                                                      8 9 - fragment 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-08-19T11:29:57.167

我想这就是你所追求的：`[^/]+$`

演示：[http ://regex101.com/r/rG8gB9](http://regex101.com/r/rG8gB9)

# c# - 组合框从 SQL Server 存储过程动态添加行和下拉列表

> ID：12023433
> 
> 赞同：1
> 
> 时间：2012-08-19T01:04:59.260
> 
> 标签：c#, sql-server, search, drop-down-menu, combobox

这基本上是一个搜索工具。当我在组合框中输入某些内容时，组合框会下拉并显示建议（类似于 Google 搜索栏）

我创建了一个执行一些复杂计算的过程，它采用一个参数并返回一些行。然后我创建了一个组合框事件（更新文本）。

在事件处理程序中，我编写了以下代码：

```
private void combobox_TextUpdate(object sender, EventArgs e)
{
    this.combobox.Items.Clear();
    DataTable List = new DataTable();
    if (this.combobox.Text.Length > 0)
    {
        List = searchIt(combobox.text);
        foreach (DataRow Row in List.Rows)
        {
            this.combobox.Items.Add(Row.ItemArray.GetValue(0).ToString());
        }
        this.combobox.DroppedDown = true;
    }
}

static public DataTable searchIt(string STR)
{
    string connectionString = McFarlaneIndustriesPOSnamespace.Properties.Settings.Default.McFarlane_IndustriesConnectionString;
    SqlConnection con = new SqlConnection(connectionString);
    DataTable DT = new DataTable();
    con.Open();
    SqlDataAdapter DA = new SqlDataAdapter("USE [McFarlane Industries] " +
                                               "EXEC search " + 
                                                STR, connectionString);
    DA.Fill(DT);
    con.Close();
    return DT;
} 
```

该函数`searchIt`执行存储过程并返回一个`DataTable`. 存储过程在 SQL Server Management Studio 中运行良好。

但在应用程序中，它在某些情况下无法正常工作。

当我键入`[space]`时，它会抛出一个异常，并说存储过程需要未提供的参数。

当我键入许多其他字符时，它会在字符串“我的字符串”末尾抛出无效字符的异常。

任何建议我如何才能实现我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:28:42.343

使用 sqlcommand 调用存储过程来填充数据表

```
using (SqlConnection scn = new SqlConnection(connect)
{    
    SqlCommand spcmd = new SqlCommand("search", scn);

    spcmd.Parameters.Add("@blah", SqlDbType.VarChar, -1); //or SqlDbType.NVarChar

    spcmd.CommandType = System.Data.CommandType.StoredProcedure;

    using (SqlDataAdapter da = new SqlDataAdapter(spcmd)) 
    { 
        da.Fill(dt); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:59:42.197

```
static public DataTable searchIt(string STR)
{
    string connectionString =  McFarlaneIndustriesPOSnamespace.Properties.Settings.Default.McFarlane_IndustriesConnectionString;
    SqlConnection con = new SqlConnection(connectionString);
    DataTable DT = new DataTable();
    con.Open();
    SqlCommand command = new SqlCommand("Name_of_Your_Stored_Procedure",con);
    command.CommandType=CommandType.StoredProcedure;
    command.Parameters.Add(new SqlParameter("@parameter_name",SqlDbType.NVarChar));
    command.Parameters[0].Value="Your Value in this case STR";
    SqlDataAdapter DA = new SqlDataAdapter(command);
    DA.Fill(DT);
    con.Close();
    return DT;
} 
```

**重要提示：** “parameter_Name”和“Name_of_Your_Stored_Procedure”应替换为您在数据库中的名称。参数的值可能类似于“abc”（combox.Text）

命令和它的类型，它的文本是必要的。添加参数取决于您的存储过程。它们可以是 0,1 或更多，但是一旦添加它们，就必须给出它们的值。conn(connection) 可以传递给 new SqlCmmand() 或 new SqlDataAdapter()

不需要“使用”和“执行”之类的东西

关注我，此链接将来可能对存储过程有所帮助 [http://www.codeproject.com/Articles/15403/Calling-Stored-procedures-in-ADO-NET](http://www.codeproject.com/Articles/15403/Calling-Stored-procedures-in-ADO-NET)

两个可选的建议给你

1.  使用变量名 'list' 而不是 'List' （您使用过），但是在使用 System.Collections.Generic 添加命名空间之前，您不会遇到此名称的问题；但您将来可能需要使用此命名空间。

2.  仅使用 list.Rows[0].ToString(); 当您处理字符串中的数据时，无需获取 itemarray 然后获取值；

# java - Java SE7 并发 - 数据未达到 AtomicReference

> ID：12023434
> 
> 赞同：0
> 
> 时间：2012-08-19T01:05:03.067
> 
> 标签：java, concurrency

仍然试图让这个线程/货币事情下降。谢谢您的帮助。该程序分为三个类，Analysis 打开一个文件，从文件中取出一行并使用 ForkJoinPool 将其传递给可运行类，然后等待池完成，然后将数据输出到另一个文件，RowCheck 是可运行的它对数据进行排序，然后将其传递给最终类 Data，该类具有 AtomicReference>> 以在输出之前组织数据。分析：

```
threadmgmt.execute(thread);
...close loop...close try block...exception handling...
while(threadmgmt.hasQueuedSubmissions()){ }
        while(Data.isBusy()){
    if(threadmgmt.isQuiescent()){
        Data.setBusy(false); }   }
...try block for output...
output = Data.getArray(); // This is where the error is called from

Exception in thread "main" java.lang.NullPointerException
at com.hcue.csvanalysis.Data.getArray(Data.java:56)
at com.hcue.csvanalysis.Analysis.main(Analysis.java:55) 
```

毫不奇怪，它是一个 NullPointerException，因为 AtomicReference 没有被触及，尽管 RowCheck 已经到了调用该方法的地步，以便在 60 多岁的线程之前这样做。你有什么建议？

# java - java 信任库

> ID：12023441
> 
> 赞同：1
> 
> 时间：2012-08-19T01:06:27.390
> 
> 标签：java, ssl, store, trust, truststore

我了解密钥库如何为私钥工作。基本上，您创建一个密钥库，生成/签名/存储密钥，并根据别名，容器（JBoss、tomcat、WebLogic 或 WebSphere）将在初始化期间加载适当的密钥。我的问题与信任库有关。如果容器向外部网站发出请求，该网站的密钥由 Thawte 签名，容器如何知道从其信任库提供哪个公钥以允许完成 ssl 握手？信任库肯定有一个别名，但是当容器调用到远程站点的连接时，我真的怀疑它是否使用别名来查找匹配的公钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:14:31.447

它不必提供甚至找到匹配的公钥。公钥已经存在于对等方提供的证书中。它必须在信任库中找到与对等方提供的证书链中的证书匹配的证书：即，它必须找到其 SubjectDN 与传入的 IssuerDN 匹配的证书。当然，别名不会出现在其中，因为它们不会被传输，也不是 SSL 协议的一部分。

# c# - 实体框架。ExecuteStoreQuery 将数据类型 varchar 转换为 real 时出错

> ID：12023443
> 
> 赞同：1
> 
> 时间：2012-08-19T01:06:37.240
> 
> 标签：c#, sql-server, sql-server-2008, entity-framework, sqlparameter

我正在尝试使用实体框架执行故事查询。

我已经尝试了很多年了。我传入的数据类型以 double 开头。然后我发现sql中的real是single，所以我转换为single。

（半径是一个整数）

但我得到这个错误。

将数据类型 varchar 转换为 real 时出错。

```
var query = context.ExecuteStoreQuery<SearchIndex>("select * FROM dbo.ItemsWidthinRadiusMilesSearchIndex('{0}','{1}','{2}')", Convert.ToSingle(geo.Latitude), Convert.ToSingle(geo.Longitude), radius).ToList(); 
```

任何人都可以帮忙吗？

编辑，此语法仍然存在问题：

```
SqlParameter lat = new SqlParameter() { ParameterName = "p1", Value =      Convert.ToSingle(geo.Latitude) };
SqlParameter lng = new SqlParameter() { ParameterName = "p2", Value = Convert.ToSingle(geo.Longitude) };
SqlParameter radiusParam = new SqlParameter() { ParameterName = "p3", Value = radius, DbType = System.Data.DbType.Int32 };
var paramsToPass = new object[] {lat,lng,radiusParam};
var query = context.ExecuteStoreQuery<SearchIndex>("select * FROM dbo.ItemsWidthinRadiusMilesSearchIndex('@p1','@p2','@p3')",paramsToPass).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:27:53.940

从参数中删除引号。例如 @p1 而不是 '@p1' – aKzenT

# visual-studio-2010 - 如何在 Visual Studio 2012 中使用 Visual Studio 2010 的高级智能提示工具？

> ID：12023451
> 
> 赞同：3
> 
> 时间：2012-08-19T01:08:22.717
> 
> 标签：visual-studio-2010, visual-studio-2012

我不知道 Visual Studio 2012 中是否缺少它，但我想知道为什么我在 2012 年看不到高级工具提示功能。

在 VS2010 中，一旦将鼠标悬停在代码上，它会显示以下内容：

![在此处输入图像描述](../Images/7148588bf58339c096a21865c98abec1.png)

但这就是它现在在 Visual Studio 2012 中的样子： ![在此处输入图像描述](../Images/0f971aa7feb6f24f7de8c08b51cf04ef.png)

与 Visual Studio 2010 相比，它看起来相当原始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T01:26:37.337

这来自 Visual Studio 插件。我认为它是 PowerTools 或 VSCommands。您应该在 VS2012 中安装相同的插件，并且应该恢复该行为。

（刚刚确认提供该功能的是[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef?SRC=Home)。）

# ios - 数据结构布局 - NSMutableDictionary

> ID：12023452
> 
> 赞同：0
> 
> 时间：2012-08-19T01:08:44.927
> 
> 标签：ios, xcode, nsarray, nsmutabledictionary

我正在寻找像这样存储数据的最佳方式......

值 1 - 项目 1 - 项目 2 - 项目 3 ... - 项目 9 值 2 - 项目 1 ... - 项目 9 值 3 等等...

然后我想为给定的“值”选择项目的子集</p>

NSMutableDictionary 是解决这个问题的方法吗？我在设置这个时有点困惑。我一直在尝试这个......但它显然不太正确。谢谢您的帮助。

```
NSMutableDictionary *dictionary;
[dictionary setObject:@"Entry1" forKey:@"1"];
[dictionary setObject:@"1-Entry2" forKey:@"1"];
[dictionary setObject:@"Entry2" forKey:@"2"];
[dictionary setObject:@"Entry3" forKey:@"3"];

NSLog(@"1: %@", [dictionary objectForKey:@"1"]);
NSLog(@"/n 2: %@", [dictionary objectForKey:@"1"]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:17:39.410

如果你想在一个键下有多个对象，你需要在字典中使用数组：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setObject:[NSArray arrayWithObjects:@"item1", @"item2", nil] forKey:@"Key1"]; 
```

等等。

# wordpress - 使用同位素数据过滤添加带有导航的 ScrollTo

> ID：12023457
> 
> 赞同：1
> 
> 时间：2012-08-19T01:10:08.840
> 
> 标签：wordpress, scrollto, jquery-isotope

目前我有一个 Wordpress 网站，它使用 Isotope 在网格中显示所有帖子，并且有一个固定导航用于过滤帖子类别。

我正在尝试添加一些 Javascript 或 Jquery 以在单击导航项时滚动到页面顶部 - 因此它会过滤类别并滚动到页面顶部。

我一直在尝试不同的例子，但无法弄清楚。我希望有人能指出我正确的方向。

目前我的导航是这样的：

```
 <div class="menuContainer right">
       <ul id="options" class="option-set">
         <li><a href="#" data-filter=".1">Editorial</a></li>
         <li>&nbsp;</li>
         <li><a href="#" data-filter=".4">Covers</a></li>
         <li>&nbsp;</li>
         <li><a href="#" data-filter=".3">Advertising</a></li>
         <li>&nbsp;</li>
        <li><a href="#" data-filter=".5">Film</a></li>
       </ul>
   </div>` 
```

和当前的js。

```
 <script type="text/javascript">
   jQuery(document).ready(function(){
     var mycontainer = jQuery('#isocontent');
     mycontainer.isotope({
     itemSelector: '.postContainer',
     });

   // filter items when filter link is clicked
jQuery('#options a').click(function(){
  var selector = jQuery(this).attr('data-filter');
  mycontainer.isotope({ filter: selector });
  return false;  
  });

// set selected menu items
   var $optionSets = $('.option-set'),
       $optionLinks = $optionSets.find('a');

       $optionLinks.click(function(){
          var $this = $(this);
      // don't proceed if already selected
      if ( $this.hasClass('selected') ) {
          return false;
      }
   var $optionSet = $this.parents('.option-set');
   $optionSet.find('.selected').removeClass('selected');
   $this.addClass('selected'); 

});

});
 </script> 
```

所有帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:14:05.813

好的，眼见为实 :) 更容易理解你想要什么。基本上，您所要做的就是将我之前评论的内容连接到您的社论、封面、广告、电影链接上。由于您使用 Isotope 进行过滤，因此您已经为链接分配了点击功能......

```
// stuff

<ul id="filters">
    <li><a href="#" data-filter="*">Show all, home, whatever</a></li>
    <li><a href="#" data-filter=".editorial">Editorial</a></li>
    <li><a href="#" data-filter=".covers">Covers</a></li>
    <li><a href="#" data-filter=".advertising">Advertising</a></li>
    <li><a href="#" data-filter=".film">Film</a></li>
</ul>

// more stuff

$('#filters a').click(function() {
    var selector = $(this).attr('data-filter');
    $container.isotope({
        filter: selector
    });
    $('body,html').animate({ // always scrolls to the top when filter link is clicked
        scrollTop: 0
    }, 800);
    return false;
});​

// even more stuff 
```

# xcode4 - 在xcode4中使用if语句对按钮进行多项操作

> ID：12023462
> 
> 赞同：0
> 
> 时间：2012-08-19T01:12:33.403
> 
> 标签：xcode4

首先，我对 Xcode 4 和 Obj C 非常陌生，我正在尝试用一个导航按钮构建一个调查功能。我需要一个导航按钮的方法，它会产生这样的结果，如果用户选择第一个选项然后选择导航按钮，它将把他们带到第二个视图控制器，而如果他们选择第二个选项，导航按钮会将他们带到另一种看法。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T02:56:43.217

我在同一条船上。我希望其他人会发布到此。如果它有帮助，代码片段库中的 if/else 语句可能会保存密钥，现在我们只需要找到锁。

```
if (<#condition#>) {
  <#statements-if-true#>
} else {
  <#statements-if-false#>
} 
```

我仍然在这里学习，但我知道一个重要的概念区别是您可以通过至少两种方式之一来处理此调查：

1.  使用 if/then 逻辑来分支到不同的问题。

2.  对每个人都有相同的问题，将答案存储在 plist 文件中，然后在最后根据收集的结果，在该点分支到最终结果屏幕。

这是去年发布的，因此您可能比我领先，但当我发现更多信息时，我会在这里发布。我很乐意添加到参考资源中。

- 大卫

# git - git rebase 从另一个本身经常 rebase 的分支中提取本地分支是不是很糟糕？

> ID：12023464
> 
> 赞同：3
> 
> 时间：2012-08-19T01:13:10.627
> 
> 标签：git, version-control, merge, rebase, git-rebase

假设我有来自 origin/master 的本地分支 A。我不断地对分支 A 进行更改，获取远程主机并重新设置基础。

然后我在 A 中建立了本地分支 B。我不断地对分支 B 进行更改并重新设置基础。

我是唯一一个在分支 A 和 B 工作的人。

这是一个糟糕的设置，因为 A 的提交 ID（哈希）可能会经常更改？这是否会以任何方式破坏分支 B 的稳定性或使冲突更有可能发生？

事实上，Git 是如何实现这个设置的呢？如果 A 的提交 ID 不断变化，那么 B 的 HEAD 是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T07:49:03.030

如果您处于这种类型的循环（获取/变基）并且一遍又一遍地看到相同的冲突，您可以激活该[`git rerere`](http://git-scm.com/docs/git-rerere)功能。
这将避免必须为每个变基执行相同的冲突解决方案。

另请参阅“[启用有什么缺点`git rerere`吗？](https://stackoverflow.com/questions/5519244/are-there-any-downsides-to-enabling-git-rerere) ”、“[有趣的 rerere](http://gitster.livejournal.com/41795.html) ”和“ [Rerere Your Boat...](http://git-scm.com/2010/03/08/rerere.html) ”了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:39:19.763

这可能会导致冲突每次都继续导致冲突。

除非主题 B 依赖于主题 A，否则不要将 B 从 A 中变基。

否则，避免引起 A 和 B 之间的冲突。

git 实现是 B 上的提交将依赖于旧 A 分支上的提交，直到您重新设置基准。

基本上，当你变基时，git 不会删除旧的提交，它只是通过变基创建新的提交，并将分支 A 头指针设置为新的最终提交。

分支只是指向提交的指针。

# neo4j - neo4j REST“服务器遇到麻烦”

> ID：12023467
> 
> 赞同：1
> 
> 时间：2012-08-19T01:13:51.780
> 
> 标签：neo4j, cypher

我正在运行一个非常基本的测试来检查我的理解并评估 neo4j REST 服务器（neo4j-community-1.8.M07）。我正在使用 Neo4j Python [REST 客户端](http://neo4j-rest-client.readthedocs.org)。

每次测试迭代都以源节点名称和目标节点名称的随机字符串开始。这些名称只包含字母`a..z`和数字`0..9`（奇怪的是，如果我使用`A..Z`and ，我从来没有让它失败`0..9`）。该名称的长度可以从 1 个字符到 36 个字符，并且没有重复的字符。我创建了 36 个节点，其中第一个节点名称只有一个字符长，第 36 个节点名称有 36 个字符。然后我在所有节点之间创建关系。每个关系的名称是源节点名称和目标节点名称的串联。最终图有 37 个节点（1 个参考节点和 36 个节点，名称从 1 个字符到 36 个非重复字符）和 1260 个关系。在每次测试迭代之前，我都会清除图表，以便它只有一个（参考）节点。

问题是经过几次成功的迭代neo4j REST服务器崩溃：

```
Error [500]: Internal Server Error. Server got itself in trouble. 
```

发送的数据无效

导致系统崩溃的查询可能不同 - 这是导致问题的 query_string 示例：

```
START n_from=node:index_faqts(node_name="h"),
  n_to=node:index_faqts(node_name="hg2b8wpj04ms")CREATE UNIQUE
  n_from-[r:`hhg2b8wpj04ms`  ]->n_to RETURN r

self.cypher_extension.execute_query( query_string ) 
```

我花了很多时间试图找到一种趋势，但徒劳无功。如果我对查询做错了什么，那么任何测试都不会起作用。我观察到在 5 到 25 轮之间成功的测试周期数会发生崩溃。

什么可能导致 neo4j REST 服务器崩溃？

PS 一些细节...

节点是这样创建的：

```
...
self.index_faqts[ "node_name" ][ p_str_node_name ] =
  self.gdb.nodes.create( **p_dict_node_attributes )
... 
```

以防万一 - 在发出查询以创建新关系之前，我检查图表以确保源节点和目标节点存在。该检查从未失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:27:59.580

您使用了太多的关系类型，目前限制为 32k。如果您有有效的用例，可能会在 Neo4j 中进行修补。

# ruby-on-rails - 如何使用 rspec 和工厂测试模型方法

> ID：12023470
> 
> 赞同：0
> 
> 时间：2012-08-19T01:14:35.393
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot, shoulda

我是 Rails 的新手，我必须使用“Rspec”、“should”和“factory girl” gem 为现有的 rails 应用程序编写测试。我可以测试非特定测试，例如 validates_presence_of: 带有“sholda”匹配器的东西。但我想测试模型中的方法。我可以想象我需要做什么，但我不能作曲。

这是我正在谈论的一个例子：

```
.
.
.
context 'is editable if project is not started' do
  setup do
    @brief=Factory(:brief)
    @started_project=Factory(:project_started, :brief => @brief)
    @brief_have_no_project=Factory(:brief)
  end
  specify "with editable brief" do
    @brief.brand_info = 'bla bla bla' #change brand info, this is impossible
    #i can't compose this section :S
  end
  specify "with non-editable brief" do

  end
end

.
.
. 
```

我想测试在这段代码中是简短的可编辑的。我该如何测试它？

这是简短的模型代码：

```
class Brief < ActiveRecord::Base
  belongs_to :project
  validate :can_only_be_edited_if_project_is_not_started

  .
  .
  .

  def can_only_be_edited_if_project_is_not_started
    errors.add(:project_id, 'can_only_be_edited_if_project_is_not_started') if
      !project.nil? && !project.brief_can_be_edited?
  end

  .
  .
  .

end 
```

如果我能找到一个起点，我会很高兴。感谢帮助。:)

失败：

1) 如果项目不是以可编辑的简报开始的，则简报是可编辑的。

```
Failure/Error: @brief.brand_info = 'bla bla bla'
 NoMethodError:
   undefined method `brand_info=' for nil:NilClass
 # ./spec/models/brief_spec.rb:34:in `block (3 levels) in <top (required)>' 
```

当尝试像这样分配价值时@brief.brand_info = 'bla bla bla'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:27:46.027

要检查它是否已保存：

```
@brief.save.should be_true 
```

保存强制验证。如果验证失败，保存不会发生，在这种情况下它返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:22:50.467

我自己找到了解决这个问题的方法。

```
it "with editable brief (not started project)" do
  brief=Factory.build(:brief)
  Factory(:project, :brief => brief)
  brief.should have(0).error_on(:project_id)
end
it "with editable brief (nil project)" do
  brief=Factory.build(:brief)
  brief.brand_info="bla bla bla"
  brief.should have(0).error_on(:project_id)
end
it "with non-editable brief" do
  brief=Factory.build(:brief)
  Factory(:project_started, :brief => brief)
  brief.should have(1).error_on(:project_id)
end 
```

# regex - 如何使用 RegEx 选择日期范围

> ID：12023472
> 
> 赞同：3
> 
> 时间：2012-08-19T01:14:57.990
> 
> 标签：regex

我有看起来像这样的日期字符串：

```
20120817110329 
```

如您所见，其格式为：YYYYMMDDHHMMSS

我将如何选择（使用 RegEx）介于 7/15 和 8/20 之间的日期？或者 8/1 到 8/15 怎么样？

如果我想选择一个不涉及多个地方的范围，我有这个工作，但它非常有限：

```
^2012081[0-7] //selects 8/10 to 8/17 
```

**更新**

永远不要忘记显而易见的事情（如下面的 Wiseguy 所指出的），您可以简单地查找 201207150000 和 201208209999 之间的范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:28:00.450

由于您只是查询包含这些值的数据库字段，因此您可以简单地检查 和 之间的`201207150000`值`201208209999`。

* * *

如果您仍然想要正则表达式，它并不漂亮，但是这样做：

```
^20120(7(1[5-9]|2\d|3[01])|8([0-1]\d|20))\d{4}$ 
```

*[reFiddle 示例](http://refiddle.com/2zn)*

您基本上必须手动考虑每个可能的范围。

```
^20120
(
7
  (
    1[5-9]
   |2\d
   |3[01]
  )
 |
8
  (
    [0-1]\d
   |20
  )
)
\d{4}$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:37:05.407

我认为这应该有效：

```
^2012(07(1[5-9]|[2-3][0-9])|08([0-1][0-9]|20)) 
```

尽管其他答案几乎相同...您可以查看[此](http://www.regular-expressions.info/numericranges.html)以获取更多信息。

# c++ - 什么头文件在 C++ 中定义了 NULL？

> ID：12023476
> 
> 赞同：52
> 
> 时间：2012-08-19T01:16:49.300
> 
> 标签：c++, null

根据[C++ 入门](https://rads.stackoverflow.com/amzn/click/com/0321714113)，`<cstdlib>`标头定义`NULL`. [cpluspplus](http://www.cplusplus.com/reference/clibrary/cstddef/NULL/)说它是在`<cstddef>`.

最终，如果没有包含正确的标题，我认为`NULL`无法引用。

从我所看到的，但是它可以被引用并生成程序并且编译和运行没有警告或错误，只包括`<iostream>`

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-19T04:49:35.473

`locale.h`C 标准要求在、`stddef.h`、`stdio.h`、`stdlib.h`、`string.h`、`time.h`和中定义 NULL `wchar.h`。

C++ 标准要求 NULL 定义在`c*`对应于每一个的标头中。

C 标准对标准可以定义的名称非常严格——每个标准头文件必须精确定义标准要求该头文件定义的名称。它可以定义的唯一其他名称是为实现保留的名称，例如以下划线开头，后跟另一个下划线或大写字母的名称。

C++ 标准在这方面更为宽松——包括任何一个标准头文件都可以与包括任何或所有其他标准头文件具有相同的效果。

从实际的角度来看，C++ 实现曾经相当多地利用了这种许可性——也就是说，包括一个标准头文件，经常从许多其他标准头文件中定义名称。最近的实现往往更像 C 标准所要求的那样工作，与每个标头更接近，只定义由该标头定义的名称。他们可能仍然没有 C 标准要求的那么严格，但比以前更接近（通常）。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-08-19T01:26:48.230

C++03 第 18.1.2 节说 NULL 在 cstddef 中定义。

在某些实现中，iostream 可能包含 cstddef，因此包含 iostream 也会给您 NULL。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T01:21:51.593

它定义在`<cstddef>`

C++11 标准第 18.2 节，表 30 解释了`<cstddef>`其中的内容：

> **表 30——标题`<cstddef>`概要**
> 
> 宏：`NULL`[...]
> 
> [...] 宏 NULL 是本国际标准中实现定义的 C++ 空指针常量

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-23T08:11:42.673

C++11 标准说`NULL`必须在多个文件中定义。他们是：

```
<clocale>
<cstddef>
<cstdlib>
<cstring>
<ctime>
<cwchar> 
```

**这在标准的C.3 C 标准库/3**节的表 149 中有所提及。

这是表格的图像和一些周围的文字。

[![在此处输入图像描述](../Images/f1c1ed6d9e9d1cfe1e29932cec626707.png)](https://i.stack.imgur.com/5dY0R.png)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2016-05-12T09:02:04.263

在最新版本的 MinGW (MinGW 5.3.0) 中，wchar.h 标头中将 NULL 定义为：

```
#define NULL 0 
```

# java - 根据用户数量创建线性布局和其他内容

> ID：12023477
> 
> 赞同：0
> 
> 时间：2012-08-19T01:17:11.493
> 
> 标签：java, android, android-linearlayout

**问题陈述：-**

我正在研究`android project`需要创建`Bottom Half part of the android screen dynamically`依赖于`Markers (Users) on the Map`. 所以我把它分成了`android screen`两半。在`Top Half`我正在展示`Google Maps`哪个工作正常。在`Bottom Half`我需要在线性布局上`dynamically`创建和其他一些东西。`linear layout`我创建了一个`image using Paint`只是为了让人们了解我如何需要我的 UI。所以目前我只展示`only one Linear Layout example`了`bottom half`一个用户。我需要相同的东西`n number of users`假设`Scrollable.`如果我需要绘制两次（两个用户在那里），那么在下半部分相同的东西将在可滚动模式下出现两次。如果我需要画三遍，那么在下半部分应该有三遍。

![在此处输入图像描述](../Images/5b1a38f3d60555f3be550cd421ab4cf8.png)

下面是我需要添加动态布局代码的代码。

```
 @Override
    protected void onPostExecute(ArrayList<User> response) {

        if (response!=null) {
        // Need to create here dynamically the linear layout.
        }

        for(User user : response){

        // In this loop, I am showing all the user's on the google maps

        }

    } 
```

任何帮助将不胜感激。对于这种情况，XML 文件应该是什么。

目前，我拥有的 XML 在下面，它是一个简单的 UI，没有正确的下半部分，如我在图像中所示 -

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical" > 

    <com.google.android.maps.MapView 
        android:id="@+id/mapView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" 
        android:apiKey="0vAX8Xe9xjo5gkFNEEIH7KdHkNZNJWNnsjUPKkQ" 
        android:clickable="true" 
        android:enabled="true" /> 

    <TextView 
        android:id="@+id/textView" 
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1" 
        android:text="TextView" /> 

</LinearLayout> 
```

**笔记：**

在下半部分，我需要图像和图像旁边的一些文本，例如名称等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:25:11.100

您不需要动态进行布局...您可以在布局的下半部分使用[ListView](http://developer.android.com/guide/topics/ui/layout/listview.html) ，并将地图设置为上半部分。然后当您获取用户列表时，添加尽可能多的用户到您最终需要的适配器。您可以返回当前视图以供用户显示列表中的每个项目。这是一个简单的例子..

```
public class MyActivity extends Activity{

     ListView mListView;
     ArrayAdapter<User> mAdapter;

     public void onCreate(Bundle savedInstanceState){
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);

          //get the listview from xml. I think you know how to layout half and half...
          mListView = (ListView)findViewById(R.id.list);
          mAdapter = new ArrayAdapter<User>(this,R.id.userviewlayout){

               @Override
               public View getView(){
                    //here is where you add the code to inflate and display a view for a single user
               }
          };

          for(User user : Users)
               mAdapter.add(user);

          mListView.setAdapter(mAdapter);
     }
} 
```

# razor - Umbraco，宏，将内容渲染到从文档到站点模板部分的列表中

> ID：12023479
> 
> 赞同：1
> 
> 时间：2012-08-19T01:17:14.043
> 
> 标签：razor, macros, umbraco

完成 newby 问题 - 我到处寻找（因为我不是 .NET 开发人员发现它很难）创建一个宏，将信息从创建的内容项中提取到列表中。

以下是我想介绍的信息：

```
<style>
ul#showcase {
  position: absolute;
  left: 0px;
  list-style: none;
  margin: 0px;
  padding: 0px;
  text-align: right;
}

.showbox {
  border: 2px solid #ffd83d;
  border-color: #ffd83d;
  border-radius: 2px;
  background-color: #660000;
  padding: 1em 2em;
  width: 190px;
  height: 152px;
  margin-left: -110px;
  box-shadow: 4px 4px 4px -1.5px rgba(62,99,125,.8);
}
.showbox a{
  color: #ffd83d;
  text-align: right;
}
.showbox:hover {
  -moz-transition: margin-left,background-color;
  -moz-transition-duration: 3s;
  -webkit-transition: margin-left,background-color;
  -webkit-transition-duration: 3s;
  -o-transition: margin-left,background-color;
  -o-transition-duration: 3s;
  transition: margin-left,background-color;
  transition-duration:3s;
  margin-left: 0px;
  background-color:#ffd83d;
}

.showbox:hover a  {
  position: relative;
  -moz-transition: color;
  -moz-transition-duration: 3s;
  -webkit-transition: color;
  -webkit-transition-duration: 3s;
  transition: color;
  transition-duration:3s;
  color: #333333;
}

.showbox a:hover  {
  -moz-transition: color;
  -moz-transition-duration: 1s;
  -webkit-transition: color;
  -webkit-transition-duration: 1s;
  -o-transition: color;
  -o-transition-duration: 1s;
  transition: color;
  transition-duration:1s;
  color: #660000;
}

.showbox-inner {
  position: relative;
  border: 0px solid red;
  border-radius: 4px;
  background-color: #333333;
  width: 110px;
  height: 120px;
  padding: 0px 90px 0px 10px;
  margin: 0px 0px 0px 0px;
}
.showbox-inner:hover {
  -moz-transition: margin-left,background-color;
  -moz-transition-duration: 3s;
  -webkit-transition: margin-left,background-color;
  -webkit-transition-duration: 3s;
  -o-transition-: margin-left,background-color;
  -o-transition--duration: 3s;
  transition: margin-left,background-color;
  transition-duration:3s;
  margin-left: 0px;
  background-color:#333333;
}

.showbox-inner p  {
  float: left;
  width: 75px;
  margin-left: 5px;
  padding: 5px 10px 5px 0px;
  margin: 0px 15px 5px 0px;
  text-align: left;
  color: white;
    }
  .showbox-image img{
  position: absolute;
  margin: 5px -10px;
  padding: 0px -10px;
   }

.showbox-inner:hover p {
  -moz-transition:color;
  -moz-transition-duration: 3s;
  -webkit-transition: color;
  -webkit-transition-duration: 3s;
  -o-transition-: color;
  -o-transition--duration: 3s;
  transition: color;
  transition-duration:3s;
  margin-left: 0px;
  color:#ffd83d;
}

</style>

<div>
  <ul id="showcase">
</li>
    <li>
      <div class="showbox"><a href="http://www.moomookwan.org"      target="blank">MooMooKwan</a>
      <div class="showbox-inner">
  <p>Korean MooMooKwan Hapkido Association Australia</p>
      <div class="showbox-image"><img src="../media/11698/MMK.png" width=110px height=110 /></div>
      </div>
      <a href="http://www.moomookwan.org" target="blank">Click to Visit</a>
            </div></li>
    <li>
      <div class="showbox"><a href="http://www.hapkido.co" target="blank">H.I.A</a>
      <div class="showbox-inner">
  <p>Hapkido International Association Australia</p>
      <div class="showbox-image"><img src="../media/11692/HIA-Logo.png" width=110px height=110 /></img></div>
      </div>
      <a href="http://www.hapkido.co" target="blank">Click to Visit</a>
            </div></li>
<li>
      <div class="showbox"><a href="http://www.martialartsgoldcoast.net" target="blank">Warrior Hapkido</a>
      <div class="showbox-inner">
      <p>Warrior Hapkido GoldCoast, QLD</p>
      <div class="showbox-image"><img src="../media/11710/warriorhapkido.png" width=110px height=110 /></div>
      </div>
      <a href="http://www.martialartsgoldcoast.net" target="blank">Click to Visit</a>
            </div></li>
<li>
      <div class="showbox"><a href="http://www.steveshapkido.com.au" target="blank">Steve's Hapkido</a>
      <div class="showbox-inner">
      <p>Steve's Hapkido Brisbane, QLD</p>
      <div class="showbox-image"><img src="../media/11704/SHA-Bris.png" width=110px height=110 /></div>
      </div>
       <a href="http://www.steveshapkido.com.au" target="blank">Click to Visit</a>
        </div></li>
  </ul> 
</div> 
```

我已经包含了样式（即使这将是一个单独的样式表），我遇到的问题是，每次我创建一个变量来显示我想要的项目时，我似乎都把它弄得一团糟。

我要显示的项目是我在根节点外的“showcaseFolder”下创建的所有“showcaseItem”文档类型。

我想从每个showcaseItem 中显示的属性是：

dojangName - 文本字符串

dojangUrl - 文本字符串

dojangDescription - 简单的编辑器

dojangImage - 图像选择器（来自媒体）

看 - 显然我迷路了，理想情况下这是我想呈现的“那种”信息......

```
<li>
<div class="showbox"><a href="http://@showcaseItem.dojangUrl" target="blank">showcaseItem.dojangName</a>
<div class="showbox-inner">
<p>showcaseItem.dojangDescription</p>
<div class="showbox-image"><img src="showcaseItem.dojangImage" width=110px height=110 />    </div>
</div>
<a href="http://@showcaseItem.dojangUrl" target="blank">Click to Visit</a>
</div></li> 
```

但我只是不知道从这里去哪里，以便我可以：

1.  列出父文件夹下的每个子项
2.  将列表限制为 5 个随机更改的项目（希望项目）

任何人都可以帮忙吗？

看看我的虚拟网站[http://propertymj.com](http://propertymj.com)（仅限 chrome 或 firefox）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:46:28.560

像这样的东西应该工作：

```
@{
// Get showcaseFolder:
var showcaseFolder = Library.NodeById(folderId);

// For debugging, output the name:
@showcaseFolder.Name

// Get five children at random:
var showcaseItems = showcaseFolder.Children.Random(5);

// For debugging, output the count:
@showcaseItems.Count()

// Iterate through items:
<ul>
@foreach (var item in showcaseItems)
{
    <li>
        <div class="showbox"><a href="http://@item.dojangUrl" target="blank">@item.dojangName</a>
            <div class="showbox-inner">
                <p>@item.dojangDescription</p>
                <div class="showbox-image"><img src="@Library.MediaById(item.dojangImage).umbracoFile" width=110px height=110 /></div>
            </div>
            <a href="http://@item.dojangUrl" target="blank">Click to Visit</a>
        </div>
    </li>
}
</ul>
} 
```

看看[这个答案](https://stackoverflow.com/a/11119812/1110395)，了解更多关于 Umbraco 的 Razor 语法的一些很好的资源。

# php - 处理多时区

> ID：12023482
> 
> 赞同：1
> 
> 时间：2012-08-19T01:17:49.947
> 
> 标签：php, javascript, timezone, user-experience

我正在开发一个新的网络应用程序，它将在许多国家和时区使用。关于这个问题存在疑问，但没有达成共识。

我将所有时间记录存储在 UTC 中。所以问题是打印。我正在使用 PHP 进行开发，所以我知道 PHP 看不到本地时区。这给了我们一些选择：

1.  按原样打印并在客户端进行更改。
2.  第一次告诉时区的 Javascript 技巧，服务器从那时起记住它。
3.  从IP定位。我们对此有多大把握？
4.  告诉用户选择时区，这是最简单和最丑陋的方式。*UX，请！*

任何选择都有优点和缺点。我想阅读您的选择以及您知道的任何信息或有关此主题的想法。其他人如何做到这一点，提示等。任何答案表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:27:36.050

> 按原样打印并在客户端进行更改。

我在这方面有很好的经验。

我使用[日期时间微格式标记我的日期](http://microformats.org/wiki/datetime-design-pattern)

```
<abbr class="dtstart" title="2012-08-15T12:00:00.00Z">2012-08-15 at noon</abbr> 
```

然后有一些javascript可以找到所有这些并重新格式化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:23:10.777

最好的方法是上述的组合。

从一开始就使用选项 2。假设他们的 PC 设置在正确的时间，它应该会在紧要关头为您提供正确的数据。但是，选项 3，允许用户确认确实是*必须*的。当用户创建帐户时，让他们选择他们的时区并向他们显示他们选择的时间。这将更加准确，更少依赖 javascript（许多人将其关闭），并且一些用户可能希望在与他们当前所处的时区不同的时区中查看数据 - 例如旅行推销员？

改变它的客户端并不是很好 - 并且再次需要可能不可靠的javascript。从 IP 获取时区可能会很痛苦，而且不可靠，并且很容易通过上述建议克服。

# javascript - 当视图在 AngularJS 中返回时，如何获取异步服务调用来更新视图？

> ID：12023483
> 
> 赞同：4
> 
> 时间：2012-08-19T01:17:57.493
> 
> 标签：javascript, angularjs

[这是我之前的 AngularJS 问题](https://stackoverflow.com/questions/11966252/how-does-the-resource-get-function-work-synchronously-in-angularjs)的后续。

我正在尝试复制本视频教程中提到的 $resource 服务的功能：[链接](http://www.youtube.com/watch?v=IRelx4-ISbs)。

在本教程中，展示了您可以使用异步调用更新范围变量及其视图。首先，这是设置的资源：

```
$scope.twitter = $resource('http://twitter.com/:action',
    {action: 'search.json', q: 'angularjs', callback: 'JSON_CALLBACK'},
    {get: {method: 'JSONP'}}); 
```

然后在`get`资源上调用该函数以进行 ajax 调用并更新必要的范围变量：

```
$scope.twitterResult = $scope.twitter.get(); 
```

这里发生的是`$scope.twitter.get()`立即返回一个空对象引用。然后，当 ajax 请求返回时，该对象将使用来自 Twitter 的数据进行更新。然后视图会更新所有 {{twitterResult}} 实例，您会看到返回的数据。

我不明白的是，当对象在异步回调中更新时，范围如何知道值已更改？

我不这么认为——回调必须在作用域上调用某种更新函数，对吧？但如果是这样，这是如何完成的？我听说过一个`$apply`可能是答案的函数——但是你如何从资源内部引用 $scope.$apply() 呢？

我创建了一个 JSFiddle 来说明这个问题：http: [//jsfiddle.net/Qcz5Y/10/](http://jsfiddle.net/Qcz5Y/10/)

（编辑：这是一个较新的 JSFiddle 使用不同的异步调用来说明使用 ajax 调用而不是 setTimeout 的问题：http: [//jsfiddle.net/Qcz5Y/14/](http://jsfiddle.net/Qcz5Y/14/)）

在此示例中，您将看到一个控制器和一个资源。控制器的作用域有一个属性 ，`fruit`它一开始就设置为一个对象。当您单击“获取新水果”时，该属性设置为`fruitResource.get()`，这将立即返回一个空对象。然后它进行异步调用，最后执行一个回调，更新最初返回的对象的值。

发生这种情况时， 的值`$scope.fruit`会正确更新为回调中设置的值。但它并没有反映在视图中。

如果您单击“打印当前水果”，它将记录到控制台的当前值`$scope.fruit`。这只是为了检查；它具有更新视图的副作用。

我觉得我需要在函数底部做类似 $scope.$apply() 的事情`get_callback`（你会在代码中看到它）。那是正确的做法吗？如果是这样，我如何在fruitResource 中获得对$scope 的引用？我知道我可能可以作为参数传入`$scope`，`fruitResource.get()`然后以这种方式引用它，但是顶部提到的示例中的 $resource.get() 函数不需要这样做，所以我希望 AngularJS 提供一些方法自动从服务中获取范围。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T01:38:49.493

我发现你可以传入`$rootScope`一个服务，然后调用`$apply`它。因此，当您想更新视图时，只需执行`$rootScope.$apply()`.

这是更新的 JSFiddle：http: [//jsfiddle.net/Qcz5Y/11/](http://jsfiddle.net/Qcz5Y/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T08:04:07.947

实际上模拟 Resource 的行为非常简单，归结为进行异步调用并立即返回空结果。然后，当数据确实从服务器到达时，需要更新返回的引用。这是使用您的用例的示例：

```
 get: function() {
        var fruit = {};

        // Asynchronous call that executes a callback. Simulation of ajax/db request            
        $timeout(function() {
            fruit.type = ['banana', 'strawberry', 'watermellon', 'grape'][Math.floor(Math.random() * 4)];
            fruit.count = [1, 2, 3, 4][Math.floor(Math.random() * 4)];
        }, 2000);

        return fruit;
    } 
```

这是完整的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/sBgAT/1/](http://jsfiddle.net/pkozlowski_opensource/sBgAT/1/)

请注意，我正在使用 Angular 的 $timeout 服务来模拟异步调用，因为 $timeout 会在需要时负责调用 $apply，因此无需任何手动干预即可触发 UI 重新绘制。自从您尝试使用需要调用 $apply 的 setTimout 以来，您遇到了一些问题。

# xcode - Xcode 显示许多错误，但程序编译并运行良好（在模拟器和设备中）

> ID：12023484
> 
> 赞同：54
> 
> 时间：2012-08-19T01:17:58.677
> 
> 标签：xcode, compiler-errors

安装 CocoaLumberjack 的日志压缩器类后，我遇到了这种烦人的行为：Xcode 抱怨有许多未声明的标识符并给了我很多错误（不是警告，而是带有红色图标的错误）。

问题是我可以很好地编译和运行我的 iPad 应用程序，但 Xcode 不会执行任何自动完成功能。我尝试清理构建文件夹（Product > `option`+ Clean），并删除派生数据。我也重启了也没用。

正如你可以想象的那样，这是一个痛苦的工作。我确实在以前版本的 Xcode 上发生过这种行为；它与我的预编译头文件中的内容有关，但使用上面的解决方案总是可以解决它。我目前正在使用 Xcode 4.4 (4F250)。

我得到的示例错误：

`Semantic Error: use of undeclared identifier 'DDTTYLogger'`

即使是我自己编写的类，并且自安装 CocoaLumberjack 压缩器类以来*没有改变，也会发生上述情况。*

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-19T23:27:44.450

经过多次尝试使用以下方法后，我终于解决了这个问题：

从我的 Prefix.pch 中删除最后一个 #import 并重新构建。会发生错误（显然）。将线路放回原处并重新构建。不会显示任何错误，大约 10 秒后，错误会再次出现。

重复上面的操作，除了最后一个#import，删除最后两个导入，然后是三个、四个等。我这样做直到我删除了五个导入，当我把它们放回去等待时，Xcode 停止抱怨。

请注意，这根本没有发生在我身上。我在某处的博客上阅读了这个解决方案。

奇怪的错误...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-11T16:00:35.940

打开构建设置并将“Precompile Prefix Header”设置为“No”，这解决了我的问题。

感谢：[https ://stackoverflow.com/a/7035492/936957](https://stackoverflow.com/a/7035492/936957)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-01-14T01:25:37.663

我在所有最新版本的 Xcode 中不断遇到这些问题，包括 Objective-C 和 Swift。

我今天注意到我在一个特定的类文件中遇到了错误。我将它从它所在的一些额外目标中删除，错误终于消失了！

我认为 Xcode 目前在处理多个目标时存在一些基本错误。我的理论是，如果没有构建另一个目标，您基本上会看到来自该目标的错误。无论如何希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-06T08:33:58.853

不错，如果您按照以下步骤操作-

1-清理**Xcode(Cmd+Shif+K)**。

2-清除**派生数据（Cmd+Shift+G）**。

输入此**路径（~/Library/Developer/Xcode/DerivedData/）**。

3-退出并再次打开 Xcode。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-27T03:21:52.477

此问题可能是由于某些文件的“目标成员身份”设置不一样而导致的。

**示例**：

XYZ 类放在文件“a.swift”中，并在文件“b.swift”中使用。但是“a.swift”的“Target Membership”设置与b.swift的“Target Membership”设置不同。

检查“目标会员”设置如下：

[![在此处输入图像描述](../Images/27f1c41650eff6f818cd2141efc92f9c.png)](https://i.stack.imgur.com/wbB7K.png)

[![在此处输入图像描述](../Images/8a2c9e1447e9029e62fb8d1ccd434045.png)](https://i.stack.imgur.com/EBCAE.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-04T14:32:18.670

我在通过`cocoapods`. 转到`Build Settings`并搜索“允许框架模块中的非模块化包含”，然后将其设置为`Yes`成功。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-05-13T12:28:22.000

当我不小心按下时，我在 Xcode 10.1 上有它：

***Cmd+Shift+U*** - （**为测试而构建**）

尝试清理（Cmd+Shift+K），然后：

***Cmd+Shift+R***（**构建运行**）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-26T10:05:36.247

更新到 Xcode 11 后，我遇到了同样的问题。我尝试了所有提到的建议（清理文件夹、打开/关闭不同的设置、重新启动 xCode），但没有任何帮助。另外，我在 C 语言中有一个大项目，所以，我想继续使用预编译的头文件。

最后我发现**简单的重启Mac OS**就可以解决问题！这*确实是一种奇怪的行为*，但无论如何我很高兴我找到了解决方案——当大量五颜六色的错误消息四处飘荡时，很难编写代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-21T06:11:09.977

我在 Xcode 5.1 中也有同样的事情。

我通过确保#import 之间没有空行来修复它

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-29T09:30:16.070

我从 .pch 文件中删除了一些额外的空格和额外的行，它 xcode 停止抱怨

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-12T09:51:27.467

我遇到了类似的问题。

解决此问题的替代选项是打开管理器并删除项目的派生数据或删除管理器项目选项卡中的所有项目。它工作正常..

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-27T14:08:03.243

对我来说，它有助于清理项目。XCode->产品->清理

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-20T18:17:08.430

这也发生在我身上，但清洁并没有解决它。所做的是退出并重新打开`XCode`。之后，所有的幻像错误都消失了。对于那些想知道的人，您在关闭时打开的选项卡在您重新打开时仍将打开。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-01-18T21:06:12.870

在我的情况下（混合 objc/swift 项目），至少部分错误是由于缺少某些使用过的框架的导入引起的，例如“导入 UIKit”。项目已成功编译，因为框架无论如何都包含在 Prefix.pch 文件的标头中。但是显示了错误，例如关于找不到 UILabel 扩展中定义的方法，是的，这个扩展没有“导入 UIKit”。所以我认为这些错误在大多数情况下取决于 Prefix.pch 预编译/更新。触摸 Prefix.pch、清理、删除派生数据、关闭/打开 XCode 有时会有所帮助，但并非总是如此。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-08-14T20:22:03.940

打开一个终端并创建一个可以通过命令行访问的漂亮小功能......

`nano ~/.bashrc`

添加（在尖括号之间进行必要的替换）

```
cycle() {
  git stash save "BACKUP"
  git checkout <<SOME OTHER BRANCH>>
  git branch -D $1
  xcodebuild -allowProvisioningUpdates -workspace <<YOUR WORKSPACE>>.xcworkspace -scheme <<YOUR SCHEME>> -configuration Release clean
  git checkout $1
} 
```

`^X`并按照提示保存，然后输入`source ~/.bashrc`以使其对当前终端会话可见。

确保你的分支被推送到原点，因为我们要删除它:)

使用调用函数`cycle <<MY BRANCH>>`（一旦运行，您可能需要调用`git stash pop`以恢复任何工作副本更改）

希望这对你有用！Xcode，开始你的游戏吧！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-12-14T16:12:34.673

在 Xcode 版本 10.1 (10B61) 上运行，我将构建设置“增加预编译头文件的共享”设置为`NO`. 我在一个**.xcworkspace**中工作，许多项目共享相同的框架，并且没有 Objective-C 桥接头（这意味着我自己没有添加任何 obj-c 代码）。我不确定 Xcode 何时默认取消了**.pch**文件，但我的项目中没有这些文件。

[![Xcode 构建设置：增加预编译头文件的共享 = 否](../Images/9aa894614bd9b36f9d3fbc5fceb830d0.png)](https://i.stack.imgur.com/IWXY9.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-01-07T16:10:18.213

我最近有这个问题。在某些情况下，可以通过删除`ModuleCache`里面的`DerivedData`文件夹以及`DerivedData`. 请注意，在执行此操作之前必须退出 Xcode。

# javascript - html链接onclick弹出表单

> ID：12023487
> 
> 赞同：1
> 
> 时间：2012-08-19T01:18:42.967
> 
> 标签：javascript, html

我想在单击链接时弹出一个表单。

```
<a title='%s' onclick='return popupform()'  href='#'> ABC </a> 
```

形式是这样的：

```
<form id="contactus" action="javascript:submit_form()" method="post" accept-charset="UTF-8">
<input type="hidden" name="submitted" id="submitted" value="1">
    <label for="chinese">Chinese: </label><br>
    <input type="text" name="cs" id="cs" value="" maxlength="50"><br>
<label for="english">English:</label><br>
    <input type="text" name="en" id="en" value="" maxlength="50"><br>
    <input type="submit" name="Save" value="Save">
    <input type="submit" name="Delete" value="Delete">
    <input type="submit" name="Add" value="Add">
    <input type="submit" name="Close" value="Close">
</form> 
```

如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:25:03.967

把你包裹`form`在一个`div`：

```
<a title="%s" class="show_form" href="#"> ABC </a>

<div id="form_wrapper">
    <form id="contactus" action="javascript:submit_form()" method="post" accept-charset="UTF-8">
    ... truncated for brevity
    </form>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

还有一些 CSS：

```
​#form_wrapper {
    display:none;
}​ 
```

然后是一些使用 jQuery 的 JavaScript：

```
$('a.show_form').on('click', function() {
    $('#form_wrapper').show();
});​​​​​ 
```

如果你真的是指弹出窗口，或者通常称为“模态”窗口，请看这里：http: [//jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:33:22.997

弹出窗口是页面上的简单 div 元素，最初会隐藏，然后在发生某些事件时显示，例如鼠标单击。然后，您需要调整该 div 的外观，使其显示为用户的弹出窗口，即将 div 在页面上居中，提高其 z-index 使其分层，调整不透明度以提供调光效果，等等。显然，如果您决定自己动手，那么工作量很大。否则，如果您可以使用[jquery](http://jquery.com)，则可以利用[jqueryui 对话框](http://jqueryui.com/demos/dialog/)元素

# python - 类中空字典上的 Python AttributeError - 尝试添加到它

> ID：12023488
> 
> 赞同：0
> 
> 时间：2012-08-19T01:19:08.213
> 
> 标签：python, dictionary, attributes, instance, attributeerror

我对 Python 有点陌生，我的字典遇到了一个非常奇怪的问题，我似乎无法弄清楚。

基本上我有一个名为**World**的类，它有一个字典`self.islands = {}`问题是当我想使用**World**中的方法添加我的**Island**类的实例时，我得到了错误：`addIsland(island)`

 **> AttributeError：世界实例没有属性“岛屿”

在线上：

```
self.islands[island.name] = island 
```

self.islands 肯定存在，因为我在 World 中将其初始化**如下**`__init__`：

```
class World():
    def __init__(showBase, self):        
        self.islands = {}
        ... 
```

addIsland 方法是：

```
def addIsland(self, island):
    island.setWorld(self)
    self.islands[island.name] = island 
```

**并且从基**类（主要运行）调用该方法`__init__`，如下所示：

```
self.world = World(self)
self.setupIslands() 
```

self.setupIslands() 看起来像：

```
def setupIslands(self):
    #Island 1
    island1 = IslandCross()
    self.world.addIsland(island1) 
```

抱歉，如果有点混乱，但基本上我有 3 个类，基本类有一个 main，`__init__`它调用`self.world = World(self)`then `self.setupIslands()`。

**World's** 具有尝试将**Island**`__init__`添加到字典中的行`self.islands = {}`和方法，其中键作为岛的名称 ( )，其值作为岛实例本身。`addIsland()`**`island.name`**

 **我在这里做错了什么？我很确定我的项目中的其他地方也有这种设置。

我敢打赌这是一件愚蠢而简单的事情，不是吗:)

谢谢你的时间，

英菲尼迪菲兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:23:28.713

自引用是方法的*第一个*参数。

```
def __init__(self, showBase): 
```****

# java - 内部类不包含在 jar 文件中

> ID：12023490
> 
> 赞同：5
> 
> 时间：2012-08-19T01:19:28.790
> 
> 标签：java, class, jar, anonymous

我用六个类制作了一个可运行的 jar 文件：

Main：包含main方法，并在manifest中指定（我包含了一个新行）

Main$1 和 Main$2：主类中的 2 个匿名内部类。（Main$2 在 main 方法中，但我认为这并不重要。）

形式

Form$1：Form 中的匿名内部类

包装布局

我在制作 jar 文件时指定了这些内部类，但是当我查看它时（我在 mac 上）内部类不在 jar 中！所以当我运行它时，我得到了这个：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Main$2
    at Main.main(Main.java:64)
 Caused by: java.lang.ClassNotFoundException: Main$2
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 1 more 
```

我不知道出了什么问题。有人可以帮忙吗？

编辑：我想通了！事实证明，您需要在美元符号前添加一个转义字符 (\)，以便命令识别它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T02:11:07.000

您已经找到了您的具体答案，但这里有一个更通用的答案。

当您修改程序时，具有自动生成名称（例如`Main$2`）的类集将发生变化。此外，如果您将类移动到命名包中，您的 jar 文件将必须具有并行目录结构。您不希望每次发生这种情况时都必须更新您的 makefile 或构建脚本。相反，您应该使用 javac -d 为已编译的类文件指定目标目录，然后将整个层次结构打包起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-28T14:24:50.970

在创建或更新 jar 时，您可以将内部类/匿名类名称用单引号括起来，以避免 shell 解释`$`它们的名称。

# php - 我应该检查大多数回复是否“未修改”吗？

> ID：12023492
> 
> 赞同：6
> 
> 时间：2012-08-19T01:19:44.707
> 
> 标签：php, caching, symfony, http-caching

我对[这个片段](http://symfony.com/doc/master/book/http_cache.html#validation-with-the-etag-header)很感兴趣：

```
public function indexAction()
{
    $response = $this->render('MyBundle:Main:index.html.twig');
    $response->setETag(md5($response->getContent()));
    $response->isNotModified($this->getRequest());

    return $response;
} 
```

我应该尽可能地这样做吗？我认为我网站中的大多数页面都可以通过这种方式节省带宽（尽管不是 CPU）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T12:26:16.777

在我看来，为了节省带宽而盲目地这样做是浪费时间和不必要的代码复杂化。

您的缓存策略**非常**重要，必须在整个应用程序上明智地实施，根据您的控制器所做的使用各种缓存技术。

*   对于静态页面，我建议使用没有 Etag 的缓存过期，但更多的是使用[Expires Header](http://symfony.com/doc/master/book/http_cache.html#expiration-with-the-expires-header)或[Cache-control Header](http://symfony.com/doc/master/book/http_cache.html#expiration-with-the-cache-control-header)

*   对于动态页面，我建议在这里使用[更多验证](http://symfony.com/doc/master/book/http_cache.html#optimizing-cache-validation)的缓存，然后使用 Etag 的 Last-modified

*   最后，对于许多情况（在我的情况下，静态页面具有大量共享缓存，但顶部的顶栏包含我无法缓存的登录用户的个人信息），我建议使用[ESI](http://symfony.com/doc/master/book/http_cache.html#using-esi-in-symfony2)来分别缓存页面的不同块（在我的情况下，topbar 从未缓存过，页面的其余部分使用验证和 ETag 进行缓存）

这样，通过更多的反思和全局策略，您可以在应用程序之上定义一个可靠且高效的缓存，从而节省您的带宽和**CPU**

# jquery-mobile - 点击 jquery mobile

> ID：12023494
> 
> 赞同：0
> 
> 时间：2012-08-19T01:20:15.120
> 
> 标签：jquery-mobile

我的 jquery mobile/php 网站需要某种 onclick 功能。以下单击将不起作用...

```
 <div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
_END;
$int = 0;
foreach (array_slice($list,1) as $value) {
    echo <<<_END
        <input type="checkbox" name="checkbox-$int" id="checkbox-$int" class="custom" />
        <label for="checkbox-$int">$value</label>   
    _END;
    $int = $int+1;
}
echo <<<_END
        </fieldset>
        <script type="text/javascript" > 
            $(".checkbox-1").click(function(){
                alert('clicked!');
            });
        </script>
    </div>
_END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T01:28:51.543

您的 jQuery 正在使用类选择器，您需要使用 ID 选择器对其进行更新以匹配输出。

代替

```
$(".checkbox-1").click 
```

和

```
$("#checkbox-1").click 
```

# python - 拉出两个字符串之间的内容，包括字符串

> ID：12023495
> 
> 赞同：0
> 
> 时间：2012-08-19T01:20:35.803
> 
> 标签：python, regex

我正在尝试在 python 中执行以下操作。

我有一个包含以下内容的文件...

```
<VirtualHost>
  ServerName blah.com
  DocumentRoot /var/www/blah.com
</Virtualhost>

<VirtualHost>
  ServerName blah2.com
  DocumentRoot /var/www/blah2.com
</Virtualhost>

... etc 
```

我想把这些虚拟主机容器中的每一个放在一个单独的文件中（或变量，我可以从那里工作）......

我已经能够在字符串之间获取数据，但不包括它们。所以输出将是......

```
<VirtualHost>
  ServerName blah2.com
  DocumentRoot /var/www/blah2.com
</Virtualhost>

...iterated through each container and not...
ServerName blah2.com
DocumentRoot /var/www/blah2.com 
```

请让我知道这是否可以轻松完成。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:44:33.473

findall 正则表达式可能有效：

```
import re

d = """
<VirtualHost>
  ServerName blah.com
  DocumentRoot /var/www/blah.com
</Virtualhost>
<VirtualHost>
  ServerName blah2.com
  DocumentRoot /var/www/blah2.com
</Virtualhost>
"""

matches = re.findall(r'<VirtualHost>(.*?)</Virtualhost>', d, re.I|re.DOTALL)

#['\n  ServerName blah.com\n  DocumentRoot /var/www/blah.com\n',
# '\n  ServerName blah2.com\n  DocumentRoot /var/www/blah2.com\n'] 
```

或者包括以下`<VirtualHost>`部分：

```
matches = re.findall(r'<VirtualHost>.*?</Virtualhost>', d, re.I|re.DOTALL)

#['<VirtualHost>\n  ServerName blah.com\n  DocumentRoot /var/www/blah.com\n</Virtualhost>',
# '<VirtualHost>\n  ServerName blah2.com\n  DocumentRoot /var/www/blah2.com\n</Virtualhost>'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:40:01.080

假设您的输入数据是 XML 格式，您可以使用[minidom](http://docs.python.org/library/xml.dom.minidom.html)（如 @Aesthete 建议的那样）或[ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)：

```
import xml.dom.minidom as MD
import xml.etree.ElementTree as ET

input = """
<Document>
    <VirtualHost>
        ServerName blah.com
        DocumentRoot /var/www/blah.com
    </VirtualHost>
    <VirtualHost>
        ServerName blah2.com
        DocumentRoot /var/www/blah2.com
    </VirtualHost>
</Document>"""

domDoc = MD.parseString(input)
etreeDoc = ET.fromstring(input)

# list for Python 3.x
miniDomOutput = list(map(lambda f: f.toxml(), domDoc.getElementsByTagName('VirtualHost')))
elementTreeOutput = list(map(lambda f: ET.tostring(f), etreeDoc.findall('VirtualHost')))

print(miniDomOutput)
print(elementTreeOutput) 
```

输出：

```
#['<VirtualHost>\n        ServerName blah.com\n        DocumentRoot /var/www/blah.com\n    </VirtualHost>', '<VirtualHost>\n        ServerName blah2.com\n        DocumentRoot /var/www/blah2.com\n    </VirtualHost>']
#[b'<VirtualHost>\n        ServerName blah.com\n        DocumentRoot /var/www/blah.com\n    </VirtualHost>\n    ', b'<VirtualHost>\n        ServerName blah2.com\n        DocumentRoot /var/www/blah2.com\n    </VirtualHost>\n'] 
```

# c# - 带有富文本编辑器的 Html.BeginForm

> ID：12023502
> 
> 赞同：1
> 
> 时间：2012-08-19T01:21:55.060
> 
> 标签：c#, asp.net-mvc-3, forms, razor

我正在努力解决其中包含表单的局部视图。通常当我发布它并且它有验证错误时，它不会调用实际的`[httppost]`操作结果。

现在我正在使用 Yahoo Rich Text Editor，它使用 JavaScript 来创建。

```
@using (Html.BeginForm("NieuwBericht","Bericht"))
{@Html.ValidationSummary(false)

    <div class="center">

                @Html.ValidationMessageFor(m => m.Onderwerp)
    <div class="yui-skin-sam">

    <div>

    @Html.TextAreaFor(p => Model.Inhoud, new { @id = "msgpost", @cols = "50", @rows = "20" })
    </div>

    <div class="berichthead">Naar: @Html.EditorFor(p => Model.Ontvangers)
    Onderwerp: @Html.EditorFor(p => Model.Onderwerp) 
    <input style="float: right;" class="button" type="submit" />

    </div>

     </div>

    </div>       
}

@Html.TextAreaFor(p => Model.Inhoud, new { @id = "msgpost", @cols = "50", @rows = "20" }) 
```

这部分是用 JavaScript 渲染的。当它在我的表单中时，表单首先返回自身并带有验证错误，然后它调用 httppost 方法并使用相同的模型再次重新创建部分。

我希望部分保留在同一页面上，只返回带有验证错误的表单。这可能与其中的 JavaScript 部分吗？因为这会导致以某种方式调用 actionresult。

我在其他表单上使用了一些 js 以及 datepicker 等，它不会造成任何麻烦。（如果有验证错误，这个永远不会调用 actionresult）

# actionscript-3 - 发送带有套接字的影片剪辑

> ID：12023511
> 
> 赞同：0
> 
> 时间：2012-08-19T01:23:30.120
> 
> 标签：actionscript-3, movieclip

我正在尝试开发像 iSketch 这样的在线绘图应用程序。但不要写，实时绘图部分。

我尝试过这种方式：用户在影片剪辑上绘制图形（影片剪辑名称为“板”，大小为 396*318）然后我将此影片剪辑转换为 BitmapData，通过 getpixel 方法获取所有像素颜色数据（十六进制） . 然后将此数据发送到服务器（带套接字），服务器重新发送给所有用户，客户端代码，通过setPixel方法绘制一个bitmapData。

在这一点上我有一个问题。我的字符串（保存颜色数据）包含 745,550 个字符，这是 162 个字的页面，并且字符串太大。我该怎么做才能获得更好的性能？

我的代码：

```
 var rect:Rectangle = new Rectangle(258,203,GENIS,YUKSEK);
        // create BitmapData
        var bmd:BitmapData = new BitmapData(GENIS,YUKSEK,true,0);
        bmd.draw(board);

        var s:String = "";
        for (var i:int = 0; i< 396; i++)
        {
            for (var t:int = 0; t< 318; t++)
            {
                var r:uint = bmd.getPixel(i,t);
                s +=  r.toString(16)+ "-";

            }
        } 
```

注意：我注意使用任何翻译工具，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:03:23.503

您必须使用 JPG 或 PNG 压缩它，如“bitmapdata.com”所说。您也可以尝试将 BitmapData 直接保存到 ByteArray 而不是发送（有时它具有相似的性能，取决于图形），但我认为最好的方法是发送矢量图形或发送用户绘图步骤，这将是最快的方式。

编辑：使用原生 bitmapdata 函数，如获取/设置像素并对 ByteArray 进行操作，您将获得更好的性能。

# asp.net - 使用应用程序范围变量的单元测试控制器

> ID：12023517
> 
> 赞同：1
> 
> 时间：2012-08-19T01:25:17.587
> 
> 标签：asp.net, asp.net-mvc, unit-testing, controller

我正在构建一个 ASP.NET MVC4 应用程序。我没有使用任何模拟框架，如果可能的话，我现在不希望这样做。我的问题是两部分。

我有一个控制器，它使用在 Global.asax 中创建的变量。在控制器中，我像这样访问变量。

```
HttpContext.Application["MyVar"] 
```

1）这是应用程序范围内变量使用的最佳实践吗？如果没有，最好的方法是什么？

为了对该控制器进行单元测试，我将以下代码（从[此处](https://stackoverflow.com/questions/9871700/mvc3-unit-testing-response-code)）添加到我的测试方法中。

```
MyController target = new MyController();
var request = new HttpRequest("", "http://example.com/", "");
var response = new HttpResponse(System.IO.TextWriter.Null);
var httpContext = new HttpContextWrapper(new HttpContext(request, response));
target.ControllerContext = new ControllerContext(httpContext, new RouteData(), target);
target.ControllerContext.HttpContext.Application["MyVar"] = new MyVar(); 
```

问题是我无法向应用程序添加任何内容。最后一行代码似乎没有做任何事情，集合仍然是空的。我也在 VS 的即时窗口中尝试过，但没有成功。

2）在单元测试中，如何添加控制器需要的应用级变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:38:29.387

一般来说，全局变量不适合测试。您至少可以采取两种方法。

1.  使用[Pex/Moles](http://research.microsoft.com/en-us/projects/pex/)、NMock 等模拟框架。

2.  使用控制反转的方法（我最喜欢[NInject](http://www.ninject.org/)）。如果像控制器这样的类具有外部依赖项，它会请求接口，通常在其构造函数中。

    私有只读 IApplicationSettings _settings;

    公共 MyController（IApplicationSettings 设置）{ _settings = 设置；}

    无效 someMethod() { _settings.Get("MyVar"); }

通过这种方式，您可以编写真实的和测试的实现。

```
public LiveAppSettings : IApplicationSettings
{
    public string Get(string key)
    { 
        return HttpContext.Current.Application[key];
    }
} 
```

使用 Ninject，您可以在应用程序启动时绑定任一实现：

```
var kernel = new StandardKernel();
kernel.Bind<IApplicationSettings>().To<LiveAppSettings>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T06:13:33.680

> 这是应用程序范围内变量使用的最佳实践吗？

最佳实践有点主观的概念，在没有完全解释你的场景以及你想要实现的目标的情况下，我不想讨论它。

我们无法讨论这是否是最佳实践，但据我所知，这也没有错。这没有错，因为您使用的是允许对代码进行单元测试的抽象。

> 在单元测试中，如何添加控制器需要的应用程序级变量？

您可以使用诸如 Rhino Mocks 之类的模拟框架来模拟控制器所需的抽象。我们以下面的控制器为例：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var myVar = (MyVar)HttpContext.Application["MyVar"];
        return Content(myVar.Foo);
    }
} 
```

我们想对 Index 操作进行单元测试。这是一个示例单元测试：

```
[TestMethod]
public void Index_Action_Should_Retrieve_MyVal_From_AppState()
{
    // arrange
    var target = new HomeController();
    var httpContext = MockRepository.GeneratePartialMock<HttpContextBase>();
    var application = MockRepository.GeneratePartialMock<HttpApplicationStateBase>();
    application.Expect(x => x["MyVar"]).Return(new MyVar { Foo = "bar" });
    httpContext.Expect(x => x.Application).Return(application);
    target.ControllerContext = new ControllerContext(httpContext, new RouteData(), target);

    // act
    var actual = target.Index() as ContentResult;

    // assert
    Assert.AreEqual("bar", actual.Content);
} 
```

# python - python可以在局部范围内声明全局变量吗？

> ID：12023520
> 
> 赞同：0
> 
> 时间：2012-08-19T01:25:35.683
> 
> 标签：python, scope

python可以在局部范围内声明全局变量吗？

有用：

```
def main():
    # do some... for files varible
    for file in files:
       result = func(file)
    print result 
```

我无法理解。有人告诉我为什么`result`可以在`for`循环之外看到。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T01:28:23.893

`for`语句不会开始新的范围。只有模块、类声明和函数定义开始一个新的作用域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:27:47.187

~~我没有看到全局变量声明。`result`是一个局部变量，就像`file`. 你在谈论`files`吗？这看起来像一个全局变量，但我没有看到它在本地声明。~~

*根据@DSM 的有用评论进行更新：*

如果您谈论`result`的是在 -loop 中本地声明`for`，那么它在 Python 中不起作用，`for`-loop 不会创建本地范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T01:28:49.437

如果您的函数使用赋值`=`或增强的assignemnt（即），则默认情况下`+=`会考虑该变量。`local`但是，如果要进行分配，请`global`使用`global`关键字。

```
foo = 2
def bar():
    foo = 3 # foo is locally defined here

def car():
    global foo
    foo = 4 # foo is globally reassigned here

bar() # foo is still 2
car() # foo is now 4 
```

# c - 退出主程序时出现段错误

> ID：12023522
> 
> 赞同：2
> 
> 时间：2012-08-19T01:26:03.603
> 
> 标签：c, unix, pointers, operating-system, segmentation-fault

我正在编写一个非常基本的 C 程序，以尝试更好地理解时间库的工作原理并了解有关 C 的更多信息。问题是，当我在 main 函数结束时返回 0 时出现段错误。这是程序的文本：

```
#include <stdio.h>
#include <time.h>

main()
{
    time_t *now;
    time(now);
    struct tm *tp = localtime(now);
    printf("%s", asctime(tp));
    return 0;
} 
```

使用 gdb 我可以看到在第 10 行（返回 0）到目前为止一切正常，我仅有的两个变量是 now 和 tp。这是我打印它们时发生的情况：

```
(gdb) print now
$7 = (time_t *) 0x7fff5fbff838
(gdb) print tp
$8 = (struct tm *) 0x7fff7b13e470
(gdb) print *now
$9 = 1345338893
(gdb) print *tp
$10 = {
  tm_sec = 53, 
  tm_min = 14, 
  tm_hour = 21, 
  tm_mday = 18, 
  tm_mon = 7, 
  tm_year = 112, 
  tm_wday = 6, 
  tm_yday = 230, 
  tm_isdst = 1, 
  tm_gmtoff = -14400, 
  tm_zone = 0x100802518 "EDT"
} 
```

一切似乎都很好。但是当我击中n时，

```
Cannot access memory at address 0x50303e0d
0x0000000050303e0d in ?? () 
```

我不明白是什么导致了这个错误。在 main 结束时返回 0 从来没有伤害过我，而且内存地址与我正在使用的任何一个都不匹配。当我在终端中运行我的程序时，我得到`Segmentation fault: 11`. 我唯一能想到的是它与操作系统有关，这有几个原因 - 相对较低的内存地址，以及操作系统试图访问堆栈上的内存地址以返回的错误至。但是，为什么会发生这种情况？我对操作系统了解不多（我正在学习 C，所以我可以跳过课程要求并参加我的大学提供的操作系统课程）所以也许这是一个非常简单的问题。我尝试在同一目录中运行另一个 C 程序，它运行良好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T01:29:46.770

你没有初始化`now`或者你想在堆栈上初始化它，比如

```
#include <stdio.h>
#include <time.h>

main()
{
    time_t now;
    time(&now);
    struct tm *tp = localtime(&now);
    printf("%s", asctime(tp));
    return 0;
} 
```

# jquery - .slideDown() 使用输入框时无法正常工作

> ID：12023525
> 
> 赞同：2
> 
> 时间：2012-08-19T01:26:10.723
> 
> 标签：jquery, html

我有一个表单，当有人选择其他时，额外的输入框会向下滑动。我的问题是，所有这些都有效，除非我在输入框中输入任何内容。我已尝试在 IE 最新版本中执行此操作，并且我能够输入。火狐也一样。Chrome 是它不工作的地方。当我进入开发工具（对于 Chrome）并关闭输入框中的值，然后重新打开时，我可以输入。

代码：这是我用于输入框的代码。我确实实现了脚本。

```
<div class="other">testing</div>

<input type="text" class="otherbox" />
<input type="text" class="otherbox" />

<input type="text" class="otherbox"/>
<script>
$(".other").click(function () {
$(this).css({ borderStyle:"inset", cursor:"wait" });
$(".otherbox").slideDown(1000,function(){
$(this).css("border", "2px red inset")
//.filter(".otherbox")
 //.css("background", "yellow")
 //.focus();
$(".other").css("visibility", "hidden");
});
});

</script> 
```

CSS 代码：

```
.other { background:#cfd; margin:3px; width:50px; 
text-align:center; float:left; cursor:pointer;
border:2px outset black; font-weight:bolder; }
.otherbox { display:none; width:120px; float:left; 
margin:10px; } 
```

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ---------

```
<html>
<body>
        <div id="MainContainer">   
            <h2 align="center">
                <u></u>
           </h2>

         <div class="FormContainer">
            <form name="theform" action="insert.php" method="post" >
                <div class="CheckBoxContainer">
            <input type="checkbox" value"On" name="only-thisform"/>

            <br>
            <br>

            <input type="checkbox"  value="On" name="approval" id="approval"/>

            </div><!------------------------------------END   .CheckBoxContainer ------------------------------------------->
            <br>
            <br>

<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js">
</script>   
<!-- javascript on client-side -->

<div class="DropDownSelector">

    <div class="DropdownDiscription"> </div>
</div> <!------------------------------------------END .DropDownSelector -------------------------------------------------------->

<br>
<div class="other">testing</div>

<input type="text" class="otherbox" />
<input type="text" class="otherbox" />

<input type="text" class="otherbox"/>
<script>
$(".other").click(function () {
$(this).css({ borderStyle:"inset", cursor:"wait" });
$(".otherbox").slideDown(1000,function(){
$(this).css("border", "2px red inset")
//.filter(".otherbox")
 //.css("background", "yellow")
 //.focus();
$(".other").css("visibility", "hidden");
});
});

</script>
<div class="FormBody">

    <div class="InputContainer">
<span class="InputDiscription">Insurance Company Name: </span><div class="InputInner"> <input type="text" name="compname" id="compname" ></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Insurance Phone number: </span><div class="InputInner"><input type="text"  name="phone" id="phone"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Policy Number: </span><div class="InputInner"><input type="text" name ="policynum" id="policynum"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Name of the Policyholder: </span><div class="InputInner"><input type="text" name="nameofPolicyholder" id="nameofPolicyholder"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">Policyholder mailing address: </span><div class="InputInner"><input type="text" name="mailing" id="mailing"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
<span class="InputDiscription">City: </span><div class="InputInner"><input type="text" name="city" id="city"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
    <div class="InputContainer">
    <!------------------------------------------STATE SELECTION CODE ------------------------------------------->

  <select name=<?=$name;?> id="state" onChange="submitform()">

<span class="InputDiscription">State: </span><div class="InputInner">

<input type="hidden" id="hiddenfield" name="hiddenfield" value="">
 </div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Zipcode: </span><div class="InputInner"><input type="text" name="zipcode" id="zipcode"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<br>
<div class="InputContainer">
<span class="InputDiscription">Year Of Vehicle: </span><div class="InputInner"><input type="text" name="YearOfVehicle" id="YearOfVehicle"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Make Of Vehicle: </span><div class="InputInner"><input type="text" name="MakeOfVehicle" id="MakeOfVehicle"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Model Of Vehicle: </span><div class="InputInner"><input type="text" name="ModelOfVehicle" id="ModelOfVehicle"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Vehicle Identification Number: </span><div class="InputInner"><input type="text" name="Vehicleid" id="Vehicleid"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Policy Effective Date: </span><div class="InputInner"><input type="text" name="Policyeffdate" id="Policyeffdate"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Policy Expiration Date: </span><div class="InputInner"><input type="text" name="Policyexpdate" id="Policyexpdate"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<br>
<h2>Employee Information</h2>

<div class="InputContainer">
<span class="InputDiscription">Employee Name: </span><div class="InputInner"><input type="text" name="EmployeeName" id="EmployeeName"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<br>
<div class="InputContainer">
<span class="InputDiscription">Employee Company Name: </span><div class="InputInner"><input type="text" name="EmployeeCompanyName" id="EmployeeCompanyName"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Agency/Franchise Number (or unique indicator): </span><div class="InputInner"><input type="text" name="Agency/FranchiseNumber" id="Agency/FranchiseNumber"></div><!----- END .InputInner ---------->

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="InputContainer">
<span class="InputDiscription">Todays Date: </span><div class="InputInner"><input type="text" name="TodaysDate" id="TodaysDate" value="

</div><!---------------------------------END .InputContaienr ----------------------------------->
<br>
<div class="CheckBoxContainer">
            <input type="checkbox" value"On" name="correct"/>The above printed name serves to identify the employee and shows intent of the employee that the above auto insurance information given is accurate.  

            <br>
            <br>

            <input type="checkbox"  value="On" name="agree" id="agree"/>The employee identified above confirms this document has been read, reviewed and understood and subsequently authorizes it as such. 

             <br>
             <br>
             <input type="checkbox"  value="On" name="understood" id="understood"/>The employee understands that if inaccurate information is discovered on the above auto insurance information table, on the employee's auto policy itself or if the auto insurance policy is cancelled for any reason, the employer will be notified. 

            </div><!------------------------------------END   .CheckBoxContainer ------------------------------------------->
            <br>

<input type="Submit" name="Submit" >

</div><!-------------------------------------------END .FormBody ------------------------------------------------------->
</form>

    </div><!--------------------------------------End .FormContainer ---------------------------------------------->

</div><!----------------------------------End #MainContainer----------------------------------->

</body>
</html> 
```

更新 - - - - - - - - - - - - - -

我也只是尝试制作一个单独的 .php 文件：

```
<div class="other">testing</div>

<input type="text" class="otherbox" />
<input type="text" class="otherbox" />

<input type="text" class="otherbox"/>
<script>
$(".other").click(function () {
$(this).css({ borderStyle:"inset", cursor:"wait" });
$(".otherbox").slideDown(1000,function(){
$(this).css("border", "2px red inset")
//.filter(".otherbox")
 //.css("background", "yellow")
 //.focus();
$(".other").css("visibility", "hidden");
});
});

</script> 
```

和 css 样式。但仍然没有雪茄。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:31:46.407

我猜这个页面上还有其他事情正在影响有问题的输入。我在[这里](http://jsfiddle.net/ULRSK/)创建了一个 jsfiddle ，我可以在 Chrome 的字段中输入数据。试试我提供的小提琴，如果它适合你，还有其他事情发生。

# python - 在实际提交 SQLAlchemy 对象的删除时执行一些代码

> ID：12023526
> 
> 赞同：17
> 
> 时间：2012-08-19T01:26:14.710
> 
> 标签：python, postgresql, sqlalchemy, commit, flask-sqlalchemy

我有一个代表文件的 SQLAlchemy 模型，因此包含实际文件的路径。由于应该删除数据库行和文件（因此没有留下孤立文件，也没有行指向已删除文件）`delete()`，我在模型类中添加了一个方法：

```
def delete(self):
    if os.path.exists(self.path):
        os.remove(self.path)
    db.session.delete(self) 
```

这很好用，但有一个巨大的缺点：在提交包含数据库删除的事务之前立即删除文件。

一种选择是在方法中提交`delete()`- 但我不想这样做，因为我可能没有完成当前事务。所以我正在寻找一种方法来延迟物理文件的删除，直到实际提交删除行的事务。

SQLAlchemy 有一个[`after_delete`](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=events#sqlalchemy.orm.events.MapperEvents.after_delete)事件，但根据文档，这是在发出 SQL 时触发的（即在刷新时），这为时过早。它也有一个[`after_commit`](http://docs.sqlalchemy.org/en/latest/orm/events.html?highlight=events#sqlalchemy.orm.events.SessionEvents.after_commit)事件，但此时在事务中删除的所有内容都可能已从 SA 中删除。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-19T13:19:52.930

在带有[Flask-SQLAlchemy](http://packages.python.org/Flask-SQLAlchemy/)的 Flask 应用程序中使用 SQLAlchemy 时，它会提供一个[models_committed](http://packages.python.org/Flask-SQLAlchemy/signals.html#models_committed)信号，该信号接收一个`(model, operation)`元组列表。使用这个信号做我正在寻找的东西非常容易：

```
@models_committed.connect_via(app)
def on_models_committed(sender, changes):
    for obj, change in changes:
        if change == 'delete' and hasattr(obj, '__commit_delete__'):
            obj.__commit_delete__() 
```

有了这个通用函数，每个需要 on-delete-commit 代码的模型现在只需要一个方法`__commit_delete__(self)`并在该方法中执行它需要执行的任何操作。

* * *

它也可以在没有 Flask-SQLAlchemy 的情况下完成，但是，在这种情况下，它需要更多代码：

*   删除需要在执行时记录。这是使用[`after_delete`事件](http://docs.sqlalchemy.org/en/latest/orm/events.html#sqlalchemy.orm.events.MapperEvents.after_delete)来完成的。
*   当 COMMIT 成功时，需要处理任何记录的删除。这是使用[`after_commit`事件](http://docs.sqlalchemy.org/en/latest/orm/events.html#sqlalchemy.orm.events.SessionEvents.after_commit)完成的。
*   如果事务失败或手动回滚，还需要清除记录的更改。这是使用[after_rollback()](http://docs.sqlalchemy.org/en/latest/orm/events.html#sqlalchemy.orm.events.SessionEvents.after_rollback)事件完成的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T14:32:02.417

这与其他基于事件的答案一起出现，但我想我会发布这段代码，因为我写它是为了解决你的确切问题：

代码（如下）注册了一个 SessionExtension 类，该类在刷新发生时累积所有新的、更改的和删除的对象，然后在会话实际提交或回滚时清除或评估队列。对于附加了外部文件的类，然后我实现了`obj.after_db_new(session)`、`obj.after_db_update(session)`和/或`obj.after_db_delete(session)`SessionExtension 酌情调用的方法；然后，您可以填充这些方法来处理创建/保存/删除外部文件。

*注意：我几乎肯定这可以使用 SqlAlchemy 的新事件系统以更简洁的方式重写，并且它还有一些其他缺陷，但它正在生产和工作中，所以我还没有更新它:)*

```
import logging; log = logging.getLogger(__name__)
from sqlalchemy.orm.session import SessionExtension

class TrackerExtension(SessionExtension):

    def __init__(self):
        self.new = set()
        self.deleted = set()
        self.dirty = set()

    def after_flush(self, session, flush_context):
        # NOTE: requires >= SA 0.5
        self.new.update(obj for obj in session.new 
                        if hasattr(obj, "after_db_new"))
        self.deleted.update(obj for obj in session.deleted 
                            if hasattr(obj, "after_db_delete"))
        self.dirty.update(obj for obj in session.dirty 
                          if hasattr(obj, "after_db_update"))

    def after_commit(self, session):
        # NOTE: this is rather hackneyed, in that it hides errors until
        #       the end, just so it can commit as many objects as possible.
        # FIXME: could integrate this w/ twophase to make everything safer in case the methods fail.
        log.debug("after commit: new=%r deleted=%r dirty=%r", 
                  self.new, self.deleted, self.dirty)
        ecount = 0

        if self.new:
            for obj in self.new:
                try:
                    obj.after_db_new(session)
                except:
                    ecount += 1
                    log.critical("error occurred in after_db_new: obj=%r", 
                                 obj, exc_info=True)
            self.new.clear()

        if self.deleted:
            for obj in self.deleted:
                try:
                    obj.after_db_delete(session)
                except:
                    ecount += 1
                    log.critical("error occurred in after_db_delete: obj=%r", 
                                 obj, exc_info=True)
            self.deleted.clear()

        if self.dirty:
            for obj in self.dirty:
                try:
                    obj.after_db_update(session)
                except:
                    ecount += 1
                    log.critical("error occurred in after_db_update: obj=%r", 
                                 obj, exc_info=True)
            self.dirty.clear()

        if ecount:
            raise RuntimeError("%r object error during after_commit() ... "
                               "see traceback for more" % ecount)

    def after_rollback(self, session):
        self.new.clear()
        self.deleted.clear()
        self.dirty.clear()

# then add "extension=TrackerExtension()" to the Session constructor 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T20:32:18.670

如果您的 SQLAlchemy 后端支持它，请启用[两阶段提交](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#enabling-two-phase-commit)。您将需要为文件系统使用（或编写）一个事务模型：

*   检查权限等以确保文件存在并且可以在第一个提交阶段删除
*   实际上在第二个提交阶段删除了文件。

这可能和它会得到的一样好。据我所知，Unix 文件系统本身并不支持 XA 或其他两阶段事务系统，因此您将不得不忍受第二阶段文件系统删除意外失败的小风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T02:01:03.650

这似乎有点挑战性，我很好奇 sql 触发器`AFTER DELETE`是否可能是最好的途径，当然它不会干而且我不确定你使用的 sql 数据库是否支持它，仍然 AFAIK sqlalchemy 将事务推送到数据库但它真的不知道他们什么时候被提交，如果我正确地解释了这个评论：

> 它是数据库服务器本身，它维护正在进行的事务中的所有“待处理”数据。在数据库收到 Session.commit() 发送的 COMMIT 命令之前，这些更改不会永久保存到磁盘，并公开显示给其他事务。

取自[SQLAlchemy：flush() 和 commit() 有什么区别？](https://stackoverflow.com/questions/4201455/sqlalchemy-whats-the-difference-between-flush-and-commit)由 sqlalchemy 的创建者...

# javascript - 为什么我在对话框中遇到 Ajax 请求问题？

> ID：12023537
> 
> 赞同：0
> 
> 时间：2012-08-19T01:28:30.633
> 
> 标签：javascript, jquery-mobile

我有一个非常简单的 html 页面，它呈现为一个对话框。它以以下方式呈现：

```
<a href = "simple.html" data-rel = "dialog" > 
```

Simple.html 页面在 <head> 标记中具有以下 javascript 代码

```
<script>
   alert "hello";
</script> 
```

当 simple.html 呈现为对话框时，永远不会弹出警告框。但是，当 simple.html 被呈现时，而不是作为对话框，javascript 会被执行。

在将呈现为对话框的 html 页面中执行/包含 javascript 代码的方法是什么。

编辑：只要在其中，Javascript 就会被执行`< div data-role="page" > ........ < /div >`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:38:17.997

在包含 jquery 之后，但在包含 jquery mobile 之前，您必须包含您的自定义 JS。

来源：http: [//jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:10:46.033

在 simple.html 你必须写**data-role="dialog"**而不是**"page"**

# php - php计数按钮点击次数

> ID：12023553
> 
> 赞同：0
> 
> 时间：2012-08-19T01:30:54.820
> 
> 标签：php, html

我制作了一个井字游戏我有这个按钮，但我想计算用户点击它的次数，这样当点击次数 = 8 并且没有确定获胜者时，我可以将它用作我的平局游戏条件。如何传递和增加单击此按钮的次数？

我要使用javascript onclick 事件吗？

```
print('<input type="submit" name="submit_button" value = "Go">');

if(isset($_POST[submit_button])) 
{
do stuff

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T01:32:53.287

PHP 不会在这里解决您的问题，因为它只是服务器端。`numClicks`在您的 JavaScript 中声明一个变量，并将其更改`input`为：

```
<input type="submit" name="submit_button" onclick="increaseClicks()" value = "Go"> 
```

然后你可以定义`increaseClicks`为

```
function increaseClicks(){
    numClicks++;
    if(numClicks >= 8){
        //dostuff
    }
} 
```

# r - 使用字符向量进行索引

> ID：12023557
> 
> 赞同：3
> 
> 时间：2012-08-19T01:31:40.820
> 
> 标签：r

df

```
 primer exptname concentrate timepoints replicate    day     realConc
    Acan      0hr        55mM          0        b1 011311 0.0002771494
    Actb      0hr        55mM          0        b1 011311 0.0061298654
 Atf7ip2      0hr        55mM          0        b1 011311 0.0015750373
  Atp2c1      0hr        55mM          0        b1 011311 0.0010109867
   Casp6      0hr        55mM          0        b1 011311 0.0035939088
 Col10a1      0hr        55mM          0        b1 011311 0.0133760938
    Acan      0hr        55mM          0        b1 011311 0.0002771494
    Actb      0hr        55mM          0        b1 011311 0.0061298654
 Atf7ip2      0hr        55mM          0        b1 011311 0.0015750373
  Atp2c1      0hr        55mM          0        b1 011311 0.0010109867
   Casp6      0hr        55mM          0        b1 011311 0.0035939088
 Col10a1      0hr        55mM          0        b1 011311 0.0133760938 
```

我有字符向量：

```
 ges <- c('Acan','Casp6') 
```

我只想要 $primer == ges 的行

我试过了

```
df[df$primer == ges,] 
```

但它只返回等于这两个字符的第一行，而不是数据框中等于这个的所有行

我觉得这非常简单，但我在某个基本的地方搞砸了

帮助一个兄弟

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T01:38:43.010

`==`将逐个元素地检查相等性。矢量回收在这里发挥作用；它将检查引物的第一个元素与 ges 的第一个元素，引物的第二个元素与 ges 的第二个元素，引物的第三个元素与 ges 的第一个元素（由于回收）等等等等. 您真正想要的是使用`%in%`运算符检查底漆的元素是否在向量 ges 中。

```
df[df$primer %in% ges,] 
```

# c++ - 在 C++ 中将 UID 设置为非 root 用户

> ID：12023559
> 
> 赞同：0
> 
> 时间：2012-08-19T01:32:04.973
> 
> 标签：c++, ubuntu-11.04, setuid

我正在 Ubuntu 11.04 上的 NetBeans 6.9 上使用 C++ 进行开发。我正在进行一个 system() 调用，我希望将其称为用户“peter”而不是 root。我明白那个

```
setuid(0); 
```

将用户设置为root，但如何将用户设置为peter？

谢谢，彼得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T01:41:48.997

您可能希望通过密码文件搜索正确的用户 ID，例如[`getpwnam()`](http://linux.die.net/man/3/getpwnam). 就像是：

```
// look up peter's uid
uid_t peter_uid=getpwnam("peter")->pw_uid;

// Become peter
setuid(peter_uid);
seteuid(peter_uid); 
```

# php - PHP 重定向后代码会中断吗？

> ID：12023561
> 
> 赞同：4
> 
> 时间：2012-08-19T01:33:00.190
> 
> 标签：php, function, redirect

我有一个非常基本的问题......在一个php函数中，如果一个值返回FALSE，我将重定向，否则继续代码。

```
flibbertigibbet()
{
   $value = true_or_false();

   if ($value == FALSE)
   {
       //redirect to another controller method
   }

   //the rest of the code
} 
```

重定向后会发生什么？如果说..重定向需要更长的时间来加载，代码是否会中断或执行一点？

`exit()`重定向后使用是一种好习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T01:34:52.590

代码将继续执行 - 不仅在重定向需要更长的时间时，而且每次 nd 一直到最后。

是否使用`exit()`取决于您是否*希望*执行其余代码。您可以设置 a`header()`并发送一个新地址，但之后您仍然可以执行某些操作 - 例如更新数据库或其他一些位。

我通常认为最好完成所有需要的更新并`header()`在页面末尾发送正确的信息 - 使调试更容易和更直观。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T01:34:59.167

仅设置重定向标头本身并没有任何作用。始终`exit`或`die`在设置 Location 标头之后（除非您确切知道自己在做什么）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T01:39:27.047

这实际上取决于重定向的含义。是的，如果它是这样的，它将永远不会运行其余的代码：
`header("Location: http://newurl.com");`

否则，除非有充分的理由让它不回来（无限循环，你试图`include`内容花费太长时间并且没有设置超时，你使用`exit()`...），那么其余的代码将在 if 条件代码完成运行后立即运行。

# java - Spring Security：使用特殊的 URL 参数忽略登录页面

> ID：12023564
> 
> 赞同：6
> 
> 时间：2012-08-19T01:33:34.837
> 
> 标签：java, spring, spring-security

我目前有一个看起来像这样的设置：

**弹簧安全.xml：**

```
<http auto-config="true">
    <intercept-url pattern="/login*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page="/login"
                default-target-url="/main.html"
                authentication-failure-url="/failedLogin"/>
    <logout logout-url="/logout.html" logout-success-url="/login" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="foo" password="bar" authorities="ROLE_USER" />                
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

**网页.xml：**

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这一切似乎都按预期工作，但是，在特殊情况下，如果用户传入特殊令牌，我希望绕过登录页面。因此，目前，如果用户访问诸如 之类的 url `/dog`，他们将看到登录页面，如果他们传递了凭据，`foo/bar`那么他们将登录并看到对应于 的页面`/dog`。

我希望能够使用 URL，例如`/dog?token=abcd`绕过登录屏幕并将它们直接带到与`/dog`. 如果他们提供了无效的令牌，那么他们只会看到拒绝访问页面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T12:42:13.620

在 Spring Security 中，您想要涵盖的场景在参考手册的[*Pre-Authentication Scenarios*](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#preauth)[一章中](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#preauth)*进行了描述。*

 *基本上你必须：

*   通过扩展[`AbstractPreAuthenticatedProcessingFilter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/preauth/AbstractPreAuthenticatedProcessingFilter.html)或选择其实现之一来创建自定义过滤器，
*   注册自定义过滤器`<custom-filter position="PRE_AUTH_FILTER" ref="yourPreAuthFilter" />`，
*   实施或选择实施[`AuthenticationUserDetailsService`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/AuthenticationUserDetailsService.html)的s之一，
*   `PreAuthenticatedAuthenticationProvider`在(with `<property name="yourPreAuthenticatedUserDetailsService">`)中注册服务。

**编辑**：在[这个答案](https://stackoverflow.com/a/9919988/708434)中，OP 展示了他实现自定义的方式`PRE_AUTH_FILTER`。*

# sql - Active Record 基于多级关联的属性使用条件查找

> ID：12023565
> 
> 赞同：0
> 
> 时间：2012-08-19T01:33:38.123
> 
> 标签：sql, ruby-on-rails, ruby, activerecord

我缺少 FROM 子句错误（如下所示）

我想找到关联报告的城市与用户城市相同的条目，因此只向用户显示相关条目。因此，如果用户属于报告所在的城市，则应向用户显示该报告中的条目。

我尝试了一些东西，其中一个是 Entry 模型中的这个范围：

```
scope :report_in_city, lambda { |user| joins(:report).where("report.city_id = ?", user.city_id) } 
```

如果我打电话`Entry.report_in_city(user)`

我收到此错误：

```
SELECT "entries".* FROM "entries" INNER JOIN "reports" ON "reports"."id" = "entries"."report_id" WHERE (report.city_id = 1)
ActiveRecord::StatementInvalid: PG::Error: ERROR:  missing FROM-clause entry for table "report"
LINE 1: ... ON "reports"."id" = "entries"."report_id" WHERE (report.cit...
                                                             ^
: SELECT "entries".* FROM "entries" INNER JOIN "reports" ON "reports"."id" = "entries"."report_id" WHERE (report.city_id = 1) 
```

我有几个这样设置的模型：

```
class Report
belongs_to user
belongs_to city
has_many entries

class Entry 
belongs_to report

class User 
has_many reports
belongs_to city

class City
has_many users
has_many reports 
```

我是 sql 新手，不胜感激有关此查询的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:44:37.890

由于该字符串条件`"report.city_id = ?"`进入 SQL，因此您必须使用表名。Rails 很喜欢在复数和单数之间来回切换，但 SQL 只知道表名`reports`。您可以在生成的 SQL 中看到，如`ON "reports"."id" = "entries"."report_id"`. 表名是复数。

尝试这个：

```
"reports.city_id = ?" 
```

或 Rails 方式：

```
joins(:report).where(:report => { :city_id => user.city_id }) 
```

# android - 使用动态加载器在没有 ListFragments 的 ViewPager 中加载 ListView 页面的模式？

> ID：12023568
> 
> 赞同：1
> 
> 时间：2012-08-19T01:34:25.410
> 
> 标签：android, android-asynctask, android-viewpager, android-loadermanager, android-loader

如果我有`ViewPager`一定数量的页面，那么使用`Loader`框架为每个页面加载数据的最佳方式是什么？每个页面都包含一个具有自己的适配器实例的 ListView。

1.  为每个页面使用单独的加载器；或者
2.  使用单个加载器来检查哪些页面未加载并加载它们

问题是，用户可能希望快速浏览一堆页面，因此应该很容易“取消”加载出于性能原因不需要的页面。

另一方面，似乎有很多加载程序可能会产生开销。

**编辑：**我`Loader`的 s 实际上需要有动态 ID 来表示它们正在加载的内容。我可能会在加载程序 ID 上使用掩码，然后在加载程序完成后调用`destroyLoader()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:35:07.677

我会`Loader`为每个`ListFragment`. `Loader`如果您尝试管理来自父级的`Activity`片段（特别是如果这些片段由 a 持有），事情会很快变得混乱`ViewPager`。`Fragment`s 应该是为重用而设计的，不应该依赖特定`Activity`的来正常运行。`Activity`每个人都有`Fragment`自己的实例这一事实`LoaderManager`进一步证明了 Android 团队不希望开发人员让他们`Activity`的 s 为其附加的 s 加载数据`Fragment`。

我认为不会有您可能期望的那样多的开销...... `Loader`s 应该在组件的生命周期中保留其数据，并且仅在底层内容发生更改时才重新查询。也使用 a 可能是个好主意`FragmentStatePagerAdapter`。

# jquery - 如何让图像出现然后淡出然后淡入主页？

> ID：12023571
> 
> 赞同：0
> 
> 时间：2012-08-19T01:34:48.963
> 
> 标签：jquery, html, css

我是 Jquery 的新手，我相信我需要在这里做我需要做的事情。

客户希望他们的主页仅以可见的徽标图像开始，然后在大约一秒钟后淡入主页的导航和内容。徽标图像将出现在中心（垂直和水平）。同时，logo 显示时主页以灰度显示在背景中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:46:57.327

在其他一切之上创建图像。这可以通过设置 position: absolute 来完成，也可以调整 z-index。给出图像和ID。

您可以链接 animate() 函数并在其中放置您想要的任何效果。

```
$( "#block1" ).animate({opacity: 100%;},1000).animate({opacity: 0%;},1000); 
```

因为在动画之后您要删除图像以使其不显示（或者您无法单击图像下方的任何内容）。

所以可以使用切换而不是动画（但切换也会调整高度和宽度作为其效果的一部分）：

```
$( "#block1" ).toggle(1000); 
```

要最初只显示图像，请将其他所有内容放在一个 div 中，并将其设置为 display: none in css。[然后在http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)处设置一个回调（ .toggle( [duration] [, callback] ）。对于回调，声明一个函数来为其他所有内容重新设置显示：

```
$( "#block1" ).toggle(1000, function () {
  $("#everythingelse").css("display: inline");
}); 
```

或者您可以使用动画功能将显示设置为无：

```
$( "#block1" ).animate({opacity: 0%;},1000,"linear", function () {
  $( "#block1" ).css("display: none");
  $("#everythingelse").css("display: inline");
}); 
```

使用 animate（更多信息请访问[http://api.jquery.com/animate/](http://api.jquery.com/animate/)），您可以对其效果进行更多自定义控制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:01:22.337

在动画函数中使用回调函数，看看这个教程...... [http://cdmckay.org/blog/2010/03/01/the-jquery-animate-step-callback-function/](http://cdmckay.org/blog/2010/03/01/the-jquery-animate-step-callback-function/)

# java - Tapestry5 使用带有构造函数参数的注入服务

> ID：12023580
> 
> 赞同：0
> 
> 时间：2012-08-19T01:36:58.027
> 
> 标签：java, spring, tapestry

我是 Tapestry5 用户，想知道如何使用一些参数 @Inject 服务类。据我了解，使用@Inject 注入服务类与使用 new MyClass(); 实例化一个类非常相似。我似乎遇到的问题是我不确定如何将参数传递到服务中。

例子

使用 Tapestry 服务

```
public class Main {

    @Inject
    private MyService myService;

    public Main() {
        //Where would I pass in my arguements?
        this.myService();

       //I can't seem to do this by passing the arg's in through 
       //this.myService(arg1, arg2) unless I may be missing something. 
    }

} 
```

传统用法

```
public class Main {

    public Main() {
        //In this example I can pass my arg's into the constructor. 
        MyService myService = new MyService(arg1, arg2);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T09:44:41.277

假设 @Inject 类似于实例化，您并不完全正确。当您的服务被注释时，您可能会对此有些争论，[`@Scope(ScopeConstants.PERTHREAD)`](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/ioc/annotations/Scope.html)但即便如此，[tapestry IoC](http://tapestry.apache.org/ioc.html)也会为您实例化服务。我发现我的大部分服务只通过 Tapestry 实例化一次，并且`@Inject`'ing 它们为我提供了对该服务的引用。如果你想@Inject 一个服务，你首先需要用你的[AppModule](http://tapestry.apache.org/configuration.html#Configuration-YourApplication%27sModuleClass)定义它。通过 IoC 使您的服务可用的最简单方法是在您的 AppModule 中像这样绑定它：

```
public static void bind(ServiceBinder binder) {
    binder.bind(ServiceInterface.class, ServiceImplementation.class)
} 
```

然后在您的页面/组件中，您可以`@Inject`使用如下界面：

```
@Inject
private ServiceInterface service; 
```

如果您的服务需要构造函数参数，您可以在 ServiceImplementation.class 中创建一个构造函数，并获取所需的参数。如果这些参数本身就是绑定服务，tapestry 会解决这个问题，你就完成了。如果这些参数不是 Tapetsry 已知的服务，并且无论出于何种原因您都无法绑定它们，您可以在 AppModule 中创建一个构建方法：

```
/**
 * These methods may in them selves take bound services as arguments helping you build your new service
 */
public ServiceInterface buildServiceInterface(AnotherBoundService service2) {
    ...
    return new ServiceImplementation(service2, someMoreArgsIfRequired)
} 
```

如果您不想使用 IoC，您总是可以在您的页面/组件中实例化服务，因为它们只是简单的 pojo。请查看[IoC 文档](http://tapestry.apache.org/ioc.html)。它很好地概述了您可以使用的所有强大功能。

# php - 尽管数据显示正确的信息，PHP 和 AS3 仍返回“未定义”

> ID：12023606
> 
> 赞同：0
> 
> 时间：2012-08-19T01:42:20.137
> 
> 标签：php, actionscript-3, actionscript

PHP 文件：

```
echo("var1=".$region);
echo("var2=".$realm);
echo("var3=".$type);
echo("var4=".$teamName);
echo("var5=".$battlegroup); 
```

AS3 文件：

```
public function returnResult(e:Event):void{
        var _string = unescape(e.target.data);
        trace(_string);
        if(count == 50){
            trace(e.target.data.var1);
            trace(e.target.data.var2);
            trace(e.target.data.var3);
            trace(e.target.data.var4);
            trace(e.target.data.var5);
        }
        else{
            count++;
        }
    } 
```

闪退：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
var1=euvar2=les-clairvoyantsvar3=5v5var4=wheres the dragonvar5=sturmangriff-charge
undefined
undefined
undefined
undefined
undefined 
```

这应该是通过名称查找变量的简单案例，但由于某种原因它不起作用。

我在这里犯了一个非常愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:52:08.447

您从 PHP 中得到的只是一个字符串（正如您在跟踪它时所看到的那样）。仅仅输入“var=”实际上并没有做任何 AS3 可以理解的事情——它仍然是一个字符串，其值恰好是“var=”。由于您只是在处理一个字符串，因此尝试访问 var1、var2 等属性将返回 undefined，因为字符串没有此类属性。

您可以构建自己的定界符并以此为基础拆分字符串，例如使用字符串“:::”作为字符串中不同项目之间的定界符，并基于此将字符串拆分为数组。或者，您可以发回结构化 XML 并以这种方式访问​​属性，而不仅仅是发回非结构化文本。

# google-apps-script - 如何检查 Google Apps 用户是否存在？

> ID：12023607
> 
> 赞同：0
> 
> 时间：2012-08-19T01:42:20.870
> 
> 标签：google-apps-script

我在电子表格中有一个 Google Apps 用户列表，我想针对 UserManager 服务进行清洗，以确保电子表格中的内容是正确的。有什么方法可以确定用户是否存在，以便脚本可以继续运行而不会出现致命异常？在这一刻。如果我执行以下操作：

```
var userID = "foo";
var ga = UserManager.getUser(userID).getEmail(); 
```

并且*foo*不存在，Apps 脚本停止并返回：

> 错误请求：EntityDoesNotExist(1301): foo（第 34 行）

能够更干净地处理这个问题会很好，以便脚本可以通过执行以下操作继续运行：

```
var userID = "foo";
var ga = UserManager.getUser(userID).getEmail();
if (ga.exists == true) {
  // update
} else {
  // create
}; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T05:08:40.030

您可以使用 try/catch 来检查是否有错误并继续：

[http://www.w3schools.com/js/js_try_catch.asp](http://www.w3schools.com/js/js_try_catch.asp)

```
try {
  ga = UserManager.getUser(userID);
  //user exists
  //... update
} catch(err) {
  //don't exist 
  //... create
} 
```

# azure - 转售 Azure 网站服务

> ID：12023610
> 
> 赞同：4
> 
> 时间：2012-08-19T01:42:40.063
> 
> 标签：azure, azure-web-app-service

我正在为一个利基行业构建一个 SaaS 应用程序。该应用程序的架构使得每个订阅者都可以获得他们自己的应用程序实例（例如，允许定制）。这基本上是网站文件（ASP.NET MVC 的东西）和 SQL 数据库的副本。很简单。

我正在考虑迁移到 Windows Azure——我的硬件托管成本一直在上升（现在每月大约 450 英镑，然后是购买新硬件的成本，以及管理所有内容所需的时间）。Windows Azure 的平台即服务不仅在金钱方面节省了可观的成本，而且在我不必花时间做服务器内务（或在主板死机时与戴尔的外包支持团队打交道）方面都节省了时间。

请记住，我说的是 PaaS 服务，我对使用 VM 不感兴趣，因为它与物理服务器有同样的内务管理问题。

现在，我正在/正在考虑为我的客户提供的一项服务也是网络托管和托管交换。这两项服务都将由我的托管硬件提供，但使用没有 VM 的 Azure，我无法在 IIS 中创建任意网站。

Windows Azure 确实提供了简单的网络托管服务，我可以使用它来向我的最终用户销售网络托管，但我无法在网上找到任何资源表明微软是否允许这样做。

至于 Hosted Exchange - Microsoft 不提供 Exchange-on-Azure（除非您将 SPLA 许可证带到运行 Exchange 的 VM 上），但如果我朝这个方向发展，我可能会完全放弃自我管理并转售一种白标 Hosted Exchange 服务。

回到网站，有谁知道我是否可以直接向其他人收费以代表他们创建/管理 Azure 网站？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T03:32:23.720

据我所知，从 MSFT 的角度来看，没有什么能阻止您这样做，作为 SAAS 提供商，您将为最终客户端管理所有内容，您只需将 Azure PAAS 作为您的托管环境并自行管理您的 SASS 应用程序。您有多种选择，云服务（Web 和 Worker）或 Windows Azure 网站（WAWS - 具有共享或保留模型），请查看此博客文章以获取最适合您需求的指南：[http://blogs .msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx](http://blogs.msdn.com/b/silverlining/archive/2012/06/27/windows-azure-websites-web-roles-and-vms-when-to-use-which.aspx)

根据您的要求和明显的价格点，然后选择最适合您的模型，*注意 WAWS 共享实例当前不允许自定义域（未来路线图）。

关于 Hosted Exchange，这里是否有潜在的 Office 365 游戏，MSFT 已经提供 SAAS 产品，您可以成为系统集成商 (SI) 来实现它，值得深思……

高温高压

# c++ - 如何避免重载赋值运算符将右值转换为左值？

> ID：12023613
> 
> 赞同：12
> 
> 时间：2012-08-19T01:43:51.983
> 
> 标签：c++, c++11

据我所知，返回`*this`是写作超载的常态`operator=`。但这可能会将右值提升为左值！

```
struct Foo {
  Foo& operator=(const Foo &t) { return *this; }
};

int main() {
  const Foo &ref = Foo();
  //Foo &ref1 = Foo();  // This line won't compile.
  //But the following line compiles. Isn't it dangerous?
  //Also please note that if = is not overloaded, the synthesized operator= will NOT let it compile.
  Foo &ref2 = (Foo() = Foo());

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T02:09:15.203

你是对的。简短的回答是这是合法的，但由于您指出的原因是危险的。

另一个（类似的）示例被添加到 C++11，作为标准的一部分，右值流输出返回一个左值引用。

```
template <class charT, class traits, class T>
basic_ostream<charT, traits>&
operator<<(basic_ostream<charT, traits>&& os, const T& x); 
```

所以`std::ostream& s = std::ofstream("foo.txt") << "Oh boy";`是合法的，但会创建一个悬空引用。

我相信 C++11 编译器将允许成员函数被限制在对象是左值的情况下，这应该可以让你完全避免这个问题。下面只允许在`*this`左值时赋值，因此它可以防止您意外转换。

```
struct Foo {
  Foo& operator=(const Foo &t) & { return *this; }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:49:34.797

正如第一个答案指出的那样，您所做的事情是合法的，但会导致引用悬空。您可以在不重载赋值运算符的情况下获得几乎相同的结果：

```
#include <iostream>

struct Foo {
  Foo(int arg) : val(arg) { std::cout << "ctor " << val << "\n"; }
  ~Foo() { std::cout << "dtor " << val << "\n"; }
  int val;
};

int main() {
  Foo &ref = (Foo(1) = Foo(2));
  std::cout << "undefined behavior: " << ref.val << "\n";

  return 0;
} 
```

产生以下输出：

> ctor 1
> ctor 2
> dtor 2
> dtor 2
> 未定义行为：2

如您所见，`Foo(1)`构造了临时 for 之后是临时 for `Foo(2)`。然而，在我们可以对引用做任何事情之前，这两个对象都被销毁了，因此后续行会导致未定义的行为。

# javascript - jQuery反向动画步骤/切换

> ID：12023614
> 
> 赞同：0
> 
> 时间：2012-08-19T01:44:00.650
> 
> 标签：javascript, jquery, html, jquery-animate, toggle

我有一个 html 结构，需要在点击时进行动画处理。我已经编写了前半部分来实现这一点，但我不确定当再次单击事件处理程序时如何反转这些步骤。

到目前为止的代码[http://jsfiddle.net/aYfUH/](http://jsfiddle.net/aYfUH/)

另外，像这样堆叠动画方法是实现动画步骤的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:47:22.477

查看`toggle()`jQuery 中的方法：http: [//api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T02:04:23.890

嗯，这就是我最终解决它的方法......

```
function () 
        {
        $ticker = $('.ticker');
        $tickerFull = $ticker.find('.full');
        $tickerMiniExpand = $ticker.find('.expand');
        $tickerMini = $ticker.find('.mini');

        $tickerMiniExpand.on('click', function(e) 
            {
            if ($('.expand.closed').length) 
                {
                $(this).removeClass('closed');
                $(this).addClass('open');
                e.preventDefault();

                $ticker.animate(
                    {
                        top: -30
                    }, 150, function() 
                    {
                        $ticker.animate(
                        {
                            'z-index': 1000,
                    }, 0, function() 
                        {
                        $ticker.animate(
                        {
                            top: 0,
                            height: 331
                        }, 0, function() 
                            {
                            $tickerFull.animate(
                                {
                                    top: 0
                                }, 
                                {
                                    duration:350 
                                });
                            $tickerMini.animate(
                                {
                                    top: 279
                                }, 
                                { 
                                    duration:350 
                                });
                        }); // 2nd animate
                    }); // 1st animate
                }); // click
            } else {
                $(this).removeClass('open');
                $(this).addClass('closed');
                e.preventDefault();

                $tickerMini.animate(
                    {
                        top: 0
                    }, 
                        {
                            duration:200, queue: false 
                        });
                $tickerFull.animate(
                    {
                        top: -279
                    }, 
                        {
                            duration:200, queue: false 
                        });
                $ticker.animate(
                    {
                        top: -30,
                        height: 52
                    },
                        {
                            duration:350, queue: true 
                        })
                .animate(
                    {
                        'z-index': 0,
                    },
                        {
                            duration:0, queue: true 
                        })
                .animate(
                    {
                        top: 0
                    }, 
                        {
                            duration:200 
                        })
                };
            });
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T21:01:25.577

我知道我迟到了，但是对于新来的人，这里有一个我不久前制作的小 jQuery 插件，它支持反向动画：

[https://github.com/ZiadJ/jquery.reversible](https://github.com/ZiadJ/jquery.reversible)

到目前为止，我已经在几个项目中成功使用了它。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T02:55:49.797

我觉得这就是你需要的

一些CSS更改

```
.ticker-holder {
    position:relative;
    height:52px;
}

.ticker-holder .ticker {
    width:100%;
    float:left;
    top:0px;
    z-index:0;
    overflow:hidden;
}

.ticker .full {
    height:250px;
    width:960px;
    padding:10px 10px 0px 10px;
    background-color:blue;
    display:none;
}

.ticker-holder .ticker .mini {
    height:30px;
    width:980px;  
    background-color:#000000;    
}​ 
```

Javascript

```
$('.expand').on('click', function(e) {
    e.preventDefault();
    $ticker = $('.ticker');
    $tickerFull = $ticker.find('.full');
    $tickerMini = $ticker.find('.mini');

    $tickerFull.slideToggle('slow');
});​ 
```

[查看更新的演示](http://jsfiddle.net/thujeevan/aYfUH/1/)

# php - 多次使用GET？

> ID：12023627
> 
> 赞同：0
> 
> 时间：2012-08-19T01:48:59.293
> 
> 标签：php, html, get

我曾经使用过 GET 链接并将变量存储在下一页上

```
 $uniqueid = $_GET["id"];
 echo $uniqueid; 
```

在此页面上，它被回显并正确显示在 URL 中。然后在该页面上，我再次使用 GET 设置了链接。

```
<a href="2012week1.php?id=<?$uniqueid?>">1 </a> 
```

在下一页我有相同的代码......

$uniqueid = $_GET["id"]; 回声 $uniqueid;

但是当用户选择链接时，它会在 URL 中显示 GET 但它是空的。正因为如此，它没有任何回应。你不能多次使用 GET 吗？有人有什么建议或意见吗？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T01:50:55.203

```
<a href="2012week1.php?id=<?$uniqueid?>">1 </a> 
```

应该

```
<a href="2012week1.php?id=<?php echo $uniqueid; ?>">1 </a> 
```

或者如果你坚持使用短标签，

```
<a href="2012week1.php?id=<?= $uniqueid ?>">1 </a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:50:42.383

如果您尝试编写内联回显，请尝试：

```
<a href="2012week1.php?id=<?php echo $uniqueid; ?>">1</a> 
```

# jquery - jquery 复选框，如果 cheked 提高所有 id 值

> ID：12023629
> 
> 赞同：0
> 
> 时间：2012-08-19T01:49:23.163
> 
> 标签：jquery, checkbox, sum

我得到一些问题，如果 id='paysms' 的复选框被检查，则使用 id='value' 提高所有元素的总和，否则为默认值。

这是代码。

```
<table class='table'>
<tr>
<th width='80%'>some things</th>
<th width='20%'>price (usd)</th>
</tr>
<tr>
<td width='80%'>thing1</td>
<td width='20%' id='value'>1.00</td>
</tr>
<tr>
<td width='80%'>thing2</td>
<td width='20%' id='value'>2.00</td>
</tr>
<tr>
<td width='80%'>thing3</td>
<td width='20%' id='value'>3.00</td>
</tr>
<tr>
<td width='80%'>thing4</td>
<td width='20%' id='value'>15.00</td>
</tr>
<tr>
<td width='80%' style='border: none; background: none;'></td>
<td width='20%'><label><input id='paysms' type='checkbox'> sms</label></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:01:53.727

未定义的答案似乎并不完全符合您的要求（据我了解）。我想你现在明白了，ID 必须是唯一的，所以下面是 javascript：

```
$('#paysms').change(function() {
    if ($(this).is(":checked")) {
        $(".value").each(function() {
            $(this).html(parseInt($(this).html()) + 1 + ".00");
        });
    } else {
        $(".value").each(function() {
            $(this).html(parseInt($(this).html()) - 1 + ".00");
        });
    }
});​ 
```

和小提琴：http: [//jsfiddle.net/EwEZK/3/](http://jsfiddle.net/EwEZK/3/)

但是，如果您想使用 .00 以外的十进制值，则需要对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:58:37.660

ID 必须是*唯一的*，你应该使用类来代替，尝试以下方法：

```
<table class='table'>
<tr>
<th width='80%'>some things</th>
<th width='20%'>price (usd)</th>
</tr>
<tr>
<td width='80%'>thing1</td>
<td width='20%' class='value'>1.00</td>
</tr>
<tr>
<td width='80%'>thing2</td>
<td width='20%' class='value'>2.00</td>
</tr>
<tr>
<td width='80%'>thing3</td>
<td width='20%' class='value'>3.00</td>
</tr>
<tr>
<td width='80%'>thing4</td>
<td width='20%' class='value'>15.00</td>
</tr>
<tr>
<td width='80%' style='border: none; background: none;'></td>
<td width='20%'><label><input id='paysms' type='checkbox'> sms</label></td>
</tr>
</table>

<p id='result'><p> 
```

jQuery：

```
$('#paysms').change(function() {
    if (this.checked) {
        var vals = 0;
        $('.value').each(function() {
            vals += parseInt($(this).text(), 10)
        })
        $('#result').text(vals) 
    } else {
        $('#result').text("")
    }
}) 
```

[小提琴](http://jsfiddle.net/5fggE/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T02:13:36.137

更改`id='value'`为`class='value'`。

```
$(document).ready(function(){
    var price = 0; //default value
    $('#paysms').change(function(){
        if ($(this).is(':checked')){
            $('.value').each(function(){
               price += parseFloat($(this).html());
            });
        } else {
            price = 0; // back to default
        }
    });
}); 
```

# xhtml - 标签嵌套在模板 emberjs 中

> ID：12023637
> 
> 赞同：0
> 
> 时间：2012-08-19T01:52:58.517
> 
> 标签：xhtml, ember.js, handlebars.js

我想在 Ember 中为我的视图创建模板，例如：每个 ol 标签将包含 4 个项目。我在 jsfiddle.net 上使用 URL 创建了它：http: [//jsfiddle.net/secretlm/2C4c4/14/](http://jsfiddle.net/secretlm/2C4c4/14/)

但是我不知道为什么ol标签嵌套在一起以及如何修复它。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:16:04.760

我认为错误出在 indexNotDivisible4 函数上。我删除了`(idx == length - 1)`，它似乎工作。见[http://jsfiddle.net/Sly7/2C4c4/20/](http://jsfiddle.net/Sly7/2C4c4/20/)

# php - preg_match() 错误

> ID：12023638
> 
> 赞同：0
> 
> 时间：2012-08-19T01:53:34.717
> 
> 标签：php

> **可能重复：**
> [将 ereg 表达式转换为 preg](https://stackoverflow.com/questions/6270004/converting-ereg-expressions-to-preg)

我下载了Ocomon并编辑了出现的语言：**Deprecated: Function ereg() is deprecated**。因此，我研究并讨论了我应该为 preg_match() 更改的内容，但给出了以下错误：**Delimiter must not be alphanumeric or backslash**。

代码是这样的：

```
ereg("^[0-9a-z]([-_.]?[0-9a-z])*@[0-9a-z]([-.]?[0-9a-z])*\\.[a-z]{2,3}$",$email) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T01:57:59.023

您需要围绕正则表达式的分隔符。正斜杠是典型的：

```
"/^[0-9a..........{2,3}$/" 
```

就目前而言，正则表达式引擎是您要`^`用作开始分隔符的东西，这是不允许的。

# google-sheets - 如果值与参考匹配，如何 SUMIF？

> ID：12023639
> 
> 赞同：0
> 
> 时间：2012-08-19T01:53:49.857
> 
> 标签：google-sheets, google-sheets-formula

我有一个看起来像这样的谷歌电子表格，用于预算。

我希望人们能够将线条放入右侧的“支出”部分，并包括其中一个预算代码（蓝色突出显示）。例如，如果有人在“House Bugdet”上花费了 30 美元，他们会将 30 放在金额栏（黄色）中，将“HB”放在预算代码栏（蓝色）中。

我的想法是，我可以使用这些预算代码来计算在红色突出显示的列中花费了多少预算。例如，HB 应显示已花费 30 美元，HA 应显示已花费 20 美元，如下例所示。

![电子表格](../Images/744dd1e806cfc8c3a723a1c3c6637ccd.png)

这是我已经研究了一段时间的用过的列（红色）公式，但我觉得我没有完全理解`SUMIF()`。

```
=SUMIF(H:H,B3=REFERENCE(NULL,ROW(),H,NULL),K:K) 
```

我对电子表格公式非常缺乏经验，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:02:37.800

原来答案非常简单，需要仔细阅读文档。

该标准可以是一个单元格引用，它将范围与之进行比较，因此：

```
=SUMIF(H:H,B3,K:K) 
```

为我工作！（其中 B3 因行而异：C3、D3 等）

# java - 使用 Java 控制 Arduino

> ID：12023640
> 
> 赞同：20
> 
> 时间：2012-08-19T01:53:57.270
> 
> 标签：java, eclipse, arduino, jarduino

我正在寻找使用 Java 程序打开和关闭[LED的方法。](http://en.wikipedia.org/wiki/Light-emitting_diode)我在大约 5 分钟内用 C# 完成了这个项目，但在 Java 中似乎更具挑战性。我让 Arduino 等待将 1 或 0 写入[COM 端口](http://en.wikipedia.org/wiki/COM_%28hardware_interface%29)，然后根据此更改 LED。我用于 Arduino 的代码如下。

```
int LedPin = 13;
char data;

void setup()
{
    Serial.begin(9600);
    pinMode( LedPin , OUTPUT );
}

void loop()
{
    data = Serial.read();
    if (Serial.available() > 0)
    {
        if(data == '1' )
        {
            digitalWrite(LedPin,HIGH);
        }
        else if(data == '0' )
        {
            digitalWrite(LedPin,LOW);
        }
    }
    else
        if (Serial.available()<0)
        {
            digitalWrite(LedPin,HIGH);
            delay(500);
            digitalWrite(LedPin,LOW);
            delay(500);
        }
} 
```

我将如何使用 Java 应用程序执行此操作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-28T11:26:41.670

您可以使用 JArduino (Java-Arduino) 库，它提供了一个 Java API 来使用串行端口（使用 USB 电缆，或从软件角度表现为串行端口的无线设备）、UDP（通过以太网）来控制您的 Arduino盾）。所有与 Java 和 Arduino 之间的通信相关的代码都由库内部管理。

[这是一个使 LED 闪烁的 Java 示例](https://github.com/SINTEF-9012/JArduino/blob/master/jarduino.samples/src/main/java/org/sintef/jarduino/examples/basic/Blink.java)：

```
public class Blink extends JArduino {

public Blink(String port) {
    super(port);
}

@Override
protected void setup() {
    // initialize the digital pin as an output.
    // Pin 13 has an LED connected on most Arduino boards:
    pinMode(DigitalPin.PIN_12, PinMode.OUTPUT);
}

@Override
protected void loop() {
    // set the LED on
    digitalWrite(DigitalPin.PIN_12, DigitalState.HIGH);
    delay(1000); // wait for a second
    // set the LED off
    digitalWrite(DigitalPin.PIN_12, DigitalState.LOW);
    delay(1000); // wait for a second
}

public static void main(String[] args) {
    String serialPort;
    if (args.length == 1) {
        serialPort = args[0];
    } else {
        serialPort = Serial4JArduino.selectSerialPort();
    }
    JArduino arduino = new Blink(serialPort);
    arduino.runArduinoProcess();
}
} 
```

JArduino 可在：[JArduino](https://github.com/SINTEF-9012/JArduino)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-11T17:11:24.173

[借助出色的HaikuVM](http://haiku-vm.sourceforge.net/)，您可以轻松地用 Java 构建 Arduino 程序。

这是一个例子：

```
import static processing.hardware.arduino.cores.arduino.Arduino.*;

public class Blink {
    static byte ledPin = 13;            // LED connected to digital pin 13

    public static void setup() {
        pinMode(ledPin, OUTPUT);        // sets the digital pin as output
    }

    public static void loop()           // run over and over again
    {
        digitalWrite(ledPin, HIGH);     // sets the LED on
        delay(500);                    // waits for a second
        digitalWrite(ledPin, LOW);      // sets the LED off
        delay(500);                    // waits for a second
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-19T02:14:44.377

为了与 Java 中的通信端口进行通信，您需要一些[Java Communications API](http://www.oracle.com/technetwork/java/index-jsp-141752.html)的实现。我可以证明[RXTX](http://rxtx.qbang.org/wiki/index.php/Main_Page)，我以前用它来与 Arduino 通信。

一旦你实现了 Java 通信，与 Arduino 通信就变得相当简单：

```
CommPort arduino = getArduinoPort();
arduino.getOutputStream().write(1);

public CommPort getArduinoPort() {
    Enumeration ports = CommPortIdentifier.getPortIdentifiers();
    while(ports.hasMoreElements()) {
        CommPortIdentifier identifier = (CommPortIdentifier) ports.nextElement();
        if(isArduino(identifier)) {
            return identifier.open(getClass().getName(), 2000); // 2 second timeout
        }
    }
    return null;
}

public boolean isArduino(CommPortIdentifier identifier) {
    // if you know the name of the port ahead of time you can
    // compare it here with identifier.getName(), otherwise
    // you can interface with the user like the Arduino IDE's
    // serial monitor
} 
```

RXTX 网站还有其他[示例](http://rxtx.qbang.org/wiki/index.php/Examples)[ [2](http://rxtx.qbang.org/wiki/index.php/Documented_interface_to_communicate_with_serial_ports_for_beginners,_including_example_project) ]，您可能会觉得这些示例很有用。

# sql - SQL：最大表达式限制的解决方法

> ID：12023642
> 
> 赞同：0
> 
> 时间：2012-08-19T01:54:14.323
> 
> 标签：sql, oracle

我正在尝试对一组 4000 个帐户执行一些基本的客户细分/配置文件分析。

我想根据使用情况和任期快速进行**客户细分。**从策略上讲，这意味着在 Oracle SQL 数据库中查询满足特定条件的 Acocunt_ID。

例如，使用情况查询将返回上个月使用时间超过 100 小时的帐户子集。

获得此帐户列表后，我想提出一组不同的**分析**问题。

例如，对于使用时间超过 100 小时的客户：他们使用了哪些产品？他们成为客户多久了？推荐来源是什么？

我的基本方法是：

1.  运行客户细分查询
2.  将每个段的 accountIds 下载到 Excel 中
3.  制定配置文件查询
4.  使用以下结构为每个客户群运行配置文件查询：

    ```
    Select * From fooo
    where Account_ID in ('00001','00002','00003') 
    ```

挑战在于客户群查询返回超过 1000 个结果，因此我必须手动替换 1000 个为一组的不同批次的 account_ID。这是必需的，因为 Oracle SQL 有 1,000 个表达式限制。

另一种方法是在配置文件查询中组合客户细分查询，但这会使查询需要很长时间才能执行。

所以。问题是有一种有效的方法可以在 Oracle SQL 中创建和填充一个临时表，我可以使用它来转储客户群查询结果，然后将这些结果放入配置文件查询中以确保它们更有效地运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:00:29.813

将使用 ROW_NUMBER() 窗口聚合函数根据 AccountID 的 ASCENDING 顺序分配 RowID，然后使用 WHERE 子句处理*n*行是可以接受的：

```
SELECT DT1.*
FROM (SELECT f1.*
           , ROW_NUMBER() OVER (ORDER BY F1.AccountID) AS RowID_
      FROM foo f1
     ) DT1
WHERE DT1.RowID_ BETWEEN 1 and /* n */
; 
```

# seo - 子域或子目录（SEO 观点）？

> ID：12023645
> 
> 赞同：0
> 
> 时间：2012-08-19T01:56:28.197
> 
> 标签：seo, subdomain, subdirectory

什么是 SEO 视图中更好的？

*   **子域**：按子域分隔区域，通过拆分为几个较小的站点
*   **子目录**：单个大站点，按目录分隔区域

谢谢。

克里斯托弗

**编辑：**是的，我知道，我可以从子域重定向到子目录，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T08:32:59.440

看看这里：

*   [http://www.searchenginejournal.com/subdomains-or-subfolders-which-are-better-for-seo/6849/](http://www.searchenginejournal.com/subdomains-or-subfolders-which-are-better-for-seo/6849/)
*   [http://www.seochat.com/c/a/Search-Engine-Optimization-Help/Proper-Domain-Subdomain-and-Folder-URL-Structure-Management-in-SEO/](http://www.seochat.com/c/a/Search-Engine-Optimization-Help/Proper-Domain-Subdomain-and-Folder-URL-Structure-Management-in-SEO/)

我没有一个直接的答案。它取决于很多东西（内容、流量、服务、跨域操作……）

您可能在[https://webmasters.stackexchange.com/上有更准确的答案](https://webmasters.stackexchange.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T20:24:45.510

搜索引擎和爬虫将子域与主域分开处理。这就是为什么即使您由 blogspot 或 wordpress 托管，除非您做一些工作，否则您不会很快找到您的博客！

子文件夹 这些是在物理和结构上在根域/网站上找到的网页（子域可以有子文件夹，但子文件夹不能有 sub.domain），但可以说是在较低级别。

子文件夹与层次结构和文件结构有很大关系。它们被视为主域的一部分，但是，搜索引擎将它们视为内页，因此很难（但并非不可能）为子文件夹页面获得良好的排名。

# jquery - jQuery outerWidth 给出零值（动态加载的内容）

> ID：12023646
> 
> 赞同：1
> 
> 时间：2012-08-19T01:56:33.820
> 
> 标签：jquery, css, ajax, image

我正在尝试将图像添加到页面的末尾，获取它的高度和宽度，并使用这些值来计算页面上另一个图像的高度/宽度（这是用于在线方程式编辑器的）米建筑）。

我正在使用 CSS 设置高度，并希望宽度为我自动缩放。我需要在 jquery 中执行此操作，还是浏览器会自动为我执行此操作？

这是我正在尝试做的事情类型的示例。

```
$( 'body' ).append( '<img class="letter" src="my_image.png">' );
var new_element_height = $('.letter').last().outerHeight();
var new_element_width = $('.letter').last().outerWidth();
$('.letter').last().remove();
alert( new_element_height );
alert( new_element_width ); 
```

我的 CSS 类似于：

```
.letter {
    height: 50px;
} 
```

new_element_height 给了我 50px，new_element_width 给了我 0px。我猜这是因为我正在动态加载这些图像，然后尝试获取高度/宽度。

我希望高度为 50px，宽度正确缩放到该高度，然后将这些值放在 new_element_height/new_element_width 变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T03:07:32.607

看起来您正试图在加载图像之前获取图像尺寸。请参阅[JavaScript：了解图像何时完全加载](https://stackoverflow.com/questions/1257385/javascript-know-when-an-image-is-fully-loaded)

有关工作演示，请查看[http://jsfiddle.net/eBrnu/2/](http://jsfiddle.net/eBrnu/2/)尝试将高度设置为不同的值，您将看到宽度也会发生变化。

此外，您可能希望至少`visibility: hidden`在 CSS 中进行设置，以使图像不会闪烁，但仍会占用空间。

# git - 无需 SSH 或 HTTPS 访问的 Git 工作流程

> ID：12023649
> 
> 赞同：0
> 
> 时间：2012-08-19T01:57:27.863
> 
> 标签：git, https, ssh, github, workflow

我需要在某人的开发（未使用的虚拟主机）服务器上构建他们的网站......服务器没有启用 SSH，并且因为它是共享托管公司不会让我编辑允许我使用 git 的 Apache 配置通过HTTPS ...我的问题是，由于我不能直接在开发服务器上使用git，是否值得在本地使用并且有两个不同的网站位置？例如......通常你会连接到你的开发服务器并处理它，每次你提交/推送它都会直接进入开发服务器。就我而言，它除了私人 Github 存储库外别无他用，因为我无法将 git 与开发服务器一起使用。在这种情况下，你们会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:05:12.413

如果您不能`git`在服务器上使用，那么您仍然可以通过普通方式从您的 git 存储库中复制文件。无论如何，您可能并不真的需要`git`服务器上的整个 repo，只需要一个最新的工作副本。

用于`rsync`将文件直接从干净的本地存储库复制到目标服务器。确保`.git`从`rsync`操作中排除。

如果没有`rsync`，请使用`sftp`.

如果您没有`sftp`，那么... 出现严重问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:05:51.483

现在使用 git 进行版本控制，每次需要更新代码（或至少是已更改的文件）时，只需重新复制所有文件。

如果服务器有 shell 访问权限（也许脚本可以运行 shell 命令），那么您可以创建一个脚本来执行此操作（也许每次访问网页时都可以这样做）：

```
git pull 
```

为你。这当然取决于 git 已经安装在服务器上。如果没有，请找到一个可移植的 git 安装，并将该 git 文件夹保存在您的网络服务器上。

如果不是 master 分支上的所有提交都是快进的，您可能需要：

```
git pull --force 
```

或类似的。

如果它在你访问它时运行脚本，你可以尝试使用 .htaccess 来要求用户名密码来 git pull。

# xcode - 如何在新的 xCode 中禁用“添加显式大括号以避免其他悬空”？

> ID：12023653
> 
> 赞同：12
> 
> 时间：2012-08-19T01:58:34.257
> 
> 标签：xcode, syntax, warnings, compiler-warnings

刚刚更新到最新的 xCode 4.41，现在我收到大量关于完美代码的警告（请参阅主题行）。这些警告在我正在使用的第 3 方源代码中，我不想进入该代码并进行编辑（下次更新该代码时我必须再次这样做）所以我宁愿禁用它特别警告。

顺便说一句，我使用的是 xcode4.41，但显然我没有足够好的声誉来创建新标签（有趣的是，虽然 4.41 还没有在那里）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T19:34:05.310

这对我有用：

```
#ifdef __llvm__
#pragma GCC diagnostic ignored "-Wdangling-else"
#endif 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-21T08:41:53.323

它不是一个错误。如果您有嵌套的 if-else if-else 块，Apple LLVM 会向您发出警告。看下面的代码：

```
if (Condition1)
    if (Condition2)
        return Statement2;
    else if (Condition3)
        Statement3;
    else
        Statement4; 
```

通过查看上面的代码，解析器很难理解“else”与哪个“if”相关联？请记住，对于每个 else-if 都有一个 else 不是强制性的，因此 else 语句很可能链接到 if (Condition1) 而不是 if (Condition2)。

Apple llvm 编译器足够聪明，不会使这种愚蠢行为变得愚蠢，但会警告用户重新考虑代码，以确保用户不想要它。

通常，可以通过在所有顶级 if 语句中添加大括号来解决警告。在上面的示例中，警告将通过在 if (Condition1) 中添加大括号而消失。检查下面更易读（警告更少）的代码：

```
if (Condition1)
{
    if (Condition2)
        return Statement2;
    else if (Condition3)
        Statement3;
    else
        Statement4;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T02:05:12.600

好的 --- Apple LLVM 编译器 4.0 下有一个选项 - 称为警告

缺少大括号和括号

将其设置为 NO 可以消除此警告。

不幸的是，似乎没有办法摆脱大括号警告。

苹果，你开始对我的发展施加太多压力了。停止！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T09:09:01.953

用于“其他”“如果”的“其他”是一个很难找到的错误！我从个人经验中知道。所以，“悬空的”警告真的很有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-13T20:03:46.323

您也可以使用`-Wno-dangling-else`标志。

[http://clang.llvm.org/docs/UsersManual.html#options-to-control-error-and-warning-messages](http://clang.llvm.org/docs/UsersManual.html#options-to-control-error-and-warning-messages)

> -Wno-foo
>         禁用警告“foo”。

```
clang++ -Wno-dangling-else test.cpp 
```

# javascript - 将 ByteArray 从 Knockout.js 发布到 Web 服务

> ID：12023656
> 
> 赞同：7
> 
> 时间：2012-08-19T01:58:57.417
> 
> 标签：javascript, jquery, asp.net, post, knockout.js

我对 KnockoutJS 很陌生，到目前为止我一直在研究它，但尽我所能，我在任何地方都找不到此信息，所以我希望社区可以提供帮助！在我的视图中，我在文件输入上有以下数据绑定：

```
 <input type="file" data-bind="value: ImageToUpload"/>
 <button data-bind="click: $root.saveImage">Upload</button> 
```

这是“foreach”div 中列表的一部分，因此变量“ImageToUpload”对应于该列表中对象的属性。

在我的 ViewModel 中，上传按钮调用 saveImage()，我调用 Web 服务并将表单数据传递给 .aspx 页面：

```
self.saveImage = function (MyObject, event) {

    $.post("Service.aspx", MyObject,  function (returnedData) {

    });
} 
```

该对象很好地传递给我的服务，我可以按预期访问所有表单数据，包括“ImageToUpload”变量......但这是我卡住的地方：

1）“ImageToUpload”只是一个字符串，代表我上传的文件的名称，而不是一个字节数组。如何访问图像文件而不仅仅是名称？

2) 有没有更好的方法将 ByteArray 作为 Stream 或响应标头中的其他格式传递？

3）我的技术完全失效了吗？有一个更好的方法吗？我的目标是有一个上传到的图像“插槽”的动态列表。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T09:16:02.740

无法访问本地文件内容是 JavaScript 安全沙箱的基本限制。[它随着HTML5 文件 API](http://www.w3.org/TR/FileAPI/)的引入而被取消，但不幸的是，支持[远非普遍](http://caniuse.com/#feat=fileapi)。如果您的代码需要在不兼容的浏览器中运行，您唯一的选择是让浏览器处理传统`multipart/form-data`上传。另一方面，如果不支持 IE < 10 对您来说没问题，则可以使用带有自定义绑定的 File API“淘汰方式”。看看这个例子：[http](http://khayrov.github.com/jsfiddle/knockout-fileapi) ://khayrov.github.com/jsfiddle/knockout-fileapi （由于某种原因，当我尝试在其中运行这段代码时，[jsFiddle对我来说很糟糕）。](http://jsfiddle.net/)[Github 上的源代码](https://github.com/khayrov/khayrov.github.com/tree/master/jsfiddle/knockout-fileapi)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T06:28:20.540

文件上传需要以特殊方式处理。它们通常不属于您的模型。看看下面的 ApiController。诸如 之类的专用类`MultipartFormDataStreamProvider`用于访问提交给控制器的二进制数据。

```
public class FileUploadController : ApiController
{
    [HttpPost]
    public List<FileResult> UploadFile()
    {
        // Verify that this is an HTML Form file upload request
        if (!Request.Content.IsMimeMultipartContent("form-data"))
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        // Create a stream provider for setting up output streams
        MultipartFormDataStreamProvider streamProvider = new MultipartFormDataStreamProvider();

        // Read the MIME multipart content using the stream provider we just created.
        IEnumerable<HttpContent> bodyparts = Request.Content.ReadAsMultipartAsync(streamProvider).Result;

        // The submitter field is the entity with a Content-Disposition header field with a "name" parameter with value "submitter"
        string submitter;
        if (!bodyparts.TryGetFormFieldValue("submitter", out submitter))
        {
            submitter = "unknown";
        }

        // Get a dictionary of local file names from stream provider.
        // The filename parameters provided in Content-Disposition header fields are the keys.
        // The local file names where the files are stored are the values.
        IDictionary<string, string> bodyPartFileNames = streamProvider.BodyPartFileNames;

        // Create response containing information about the stored files.
        return bodyPartFileNames.Select(kv =>
        {
            FileInfo fileinfo = new FileInfo(kv.Value);
            return new FileResult
            {
                FileName = kv.Key,
                LocalPath = fileinfo.FullName,
                LastModifiedTime = fileinfo.LastWriteTimeUtc,
                Length = fileinfo.Length,
                Submitter = submitter
            };
        }).ToList();
    }

    private static bool TryGetFormFieldValue(IEnumerable<HttpContent> contents, string dispositionName, out string formFieldValue)
    {
        HttpContent content = contents.FirstDispositionNameOrDefault(dispositionName);
        if (content != null)
        {
            formFieldValue = content.ReadAsStringAsync().Result;
            return true;
        }

        formFieldValue = null;
        return false;
    }
} 
```

另一种对代码不那么繁重的解决方案是`HttpPostedFileBase`用作 ApiController 的参数。`HttpPostedFileBase`本质上是通过表单上传的文件的包装器。我必须补充一点， using `MultipartFormDataStreamProvider`优于`HttpPostedFileBase`，因为后者是 ASP.NET MVC 框架的一部分。请记住，WebAPI 技术可以在 ASP.NET MVC 之外使用。

更多信息： http: [//blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload-and-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload-and-asp-net-web-api.aspx)和[ASP.NET Web API 文件保存为“ BodyPart_3ded2bfb-40be-4183-b789-9301f93e90af"](https://stackoverflow.com/questions/10970750/asp-net-web-api-file-saved-as-bodypart-3ded2bfb-40be-4183-b789-9301f93e90af)

# ios - 获取 Box2D 的图像顶点？

> ID：12023667
> 
> 赞同：0
> 
> 时间：2012-08-19T02:03:44.090
> 
> 标签：ios, cocos2d-iphone, box2d, shape, vertex

我正在尝试获取应用程序中图像的顶点。目前我一直在使用 Vertex Helper，但我想让我的顶点形状更宽一些。但是，我不确定如何使用硬编码值来做到这一点。

我曾尝试使用物理编辑器，但它只输出一个我认为不能与 iOS Cocos2D 一起使用的 plist。无论如何，我可以使用什么程序来获得我正在寻找的确切形状并为 Box2D 获取该形状的值？

同样只是为了提供更多上下文，这是我正在谈论的顶点形状初始化的示例：

```
b2Vec2 verts[] = {
            b2Vec2(-25.6f / PTM_RATIO, 50.7f / PTM_RATIO),
            b2Vec2(-20.6f / PTM_RATIO, -48.0f / PTM_RATIO),
            b2Vec2(27.3f / PTM_RATIO, -48.0f / PTM_RATIO),
            b2Vec2(21.5f / PTM_RATIO, 51.5f / PTM_RATIO),
            b2Vec2(-26.8f / PTM_RATIO, 49.8f / PTM_RATIO) };
        spriteShape.Set(verts, num); 
```

任何建议、提示或想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T00:00:44.370

我决定继续使用带有 GB2ShapeCache 文件的 PhysicsEditor。我将不得不对这个类进行一些子类化和修改，因为我猜它本身并不是与 b2ContactListeners 一起工作的。如果我错了，无论如何都可以纠正我。

# ebay-api - 如何重写所有活动 ebay 项目描述的 HTML 代码

> ID：12023668
> 
> 赞同：2
> 
> 时间：2012-08-19T02:03:46.137
> 
> 标签：ebay-api

我有 1800 个有效的 ebay 项目需要修改。这 1800 个 HTML 文件（项目描述部分）已经在我的本地计算机上重写。我们如何使用我们的新 HTML 代码修改所有这些项目描述的 HTML 代码（而不是文本）。

或者我们如何通过 ebay API 修改活动的 ebay 项目描述的 HTML 代码（不是文本）？

很抱歉问了这么简单的问题，因为我对 ebay api 很陌生 :)

多谢 ：）））

MSR开发者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-30T08:47:23.580

使用 eBay api 使用**GetSellerList**获取所有项目。

**然后通过调用ReviseFixedPriceItem**更改所有项目描述。

不要忘记将描述放在**CDATA**块中！

## 将描述中的所有 http 更改为 https 的 Python 示例：

```
def revise_fixed_price_item_html(self, item):
    if "http:" in item["Description"]:
        description = item["Description"].replace("http:", "https:")
        settings = {"Item":
            {"ItemID" : item["ItemID"],
             "Description" : "<![CDATA[{0}]]>".format(description)}
            }
        api = Trading(config_file=self.config_file)
        response = api.execute("ReviseFixedPriceItem", settings) 
```

您还可以查看**DescriptionReviseMode**（请参阅下面的链接）

### 链接：

[https://developer.ebay.com/devzone/xml/docs/reference/ebay/GetSellerList.html](https://developer.ebay.com/devzone/xml/docs/reference/ebay/GetSellerList.html) [https://developer.ebay.com/devzone/xml/docs/reference/ebay/ReviseFixedPriceItem.html](https://developer.ebay.com/devzone/xml/docs/reference/ebay/ReviseFixedPriceItem.html)

[https://developer.ebay.com/devzone/xml/docs/reference/ebay/ReviseFixedPriceItem.html#Request.Item.Description](https://developer.ebay.com/devzone/xml/docs/reference/ebay/ReviseFixedPriceItem.html#Request.Item.Description) [https://developer.ebay.com/devzone/xml/docs/reference/ebay/ReviseFixedPriceItem .html#Request.Item.DescriptionReviseMode](https://developer.ebay.com/devzone/xml/docs/reference/ebay/ReviseFixedPriceItem.html#Request.Item.DescriptionReviseMode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T03:52:32.930

几个月来，我一直在解决同样的问题。我想出使用 Excel 和 VBA 发送请求以获取所有活跃的销售 ItemID。然后，如果需要，您可以对每个项目编号使用 getItem 调用来获取旧的 html 描述。我正在删除 Vendio 和其他几个试验添加的 html，所以我确实需要旧的 html 以编程方式操作。最后，您可以编写一个宏来发送回您想要放入新的任何新 html。您需要的唯一输入是 ItemID 和 html 描述。

# ios - 使用 performSegueWithIdentifier 加载多个 splitviewcontroller 详细视图

> ID：12023669
> 
> 赞同：0
> 
> 时间：2012-08-19T02:03:53.120
> 
> 标签：ios, storyboard, uisplitviewcontroller, segue

我试图从我的 splitviewcontroller 主视图加载 3 个详细视图。所有这些都是通过 ios 5 和 XCode 4.2 中的故事板设置的。详细视图 A 是它自己的类。详细视图 C 是详细视图 B 的子类。

master其实是一个TabBarViewController。

*   选项卡 A 连接到一个 UITableViewController（连接到主 A），它连接到另一个 UITableViewController（连接到主 B）
*   Tab B 也连接到 UITableViewController（连接到主 C）

我的设计中是否存在根本缺陷，尝试使用 performSegueWithIdentifier 切换详细视图？

我最终得到了一个对我这个新手没有帮助的 sigabort。

这是正在发生的事情：

*   从主 A 开始 - 细节 A 显示正常
*   切换到主 B - 细节 B 显示正常
*   切换回主 A - 细节 A 再次正常显示
*   完成对细节 B 的 segue 时再次切换到 master B - sigabort

我还没有连接细节 C。我想从所有大师切换到细节 C，甚至细节 A 和 B。

退出 prepareForSegue 时会发生 sigabort。每个 prepareForSegue 似乎都在做我认为应该做的事情。这一切都发生在模拟器的横向模式下。

我花了很多时间搜索 stackoverflow、阅读文档和查看示例。我试图让我的故事板反映视图之间的联系，并且认为 performSegueWithIdentifier 是在主视图更改时在详细视图之间进行转换的一种自然方式。

我不明白什么？

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"ImageVC"]) {
        // Get a pointer to the dictionary at the currently selected row index
        NSDictionary *photoDictionary = [self.photoList objectAtIndex:self.tableView.indexPathForSelectedRow.row];
        //        NSLog(@"%@", photoDictionary);

        // Set up the photo descriptions in the PhotoDescriptionViewController
        [[segue destinationViewController] setPhotoDictionary:photoDictionary];
    } else if ([segue.identifier hasSuffix:@"MapVC"]) {
        if ([self splitViewMapViewController]) {
            [self splitViewMapViewController].annotations = [self mapAnnotations];
            [self splitViewMapViewController].delegate = self;
        } else {
            [[segue destinationViewController] setAnnotations:[self mapAnnotations]];
            [[segue destinationViewController] setDelegate:self];
        }
    }
}

- (void)viewWillAppear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO animated:animated];
    [super viewWillAppear:animated];
    NSLog(@"Super class:%@", [self superclass]);
    NSLog(@"Class:%@", [self superclass]);

    if ([self.splitViewController.viewControllers lastObject]) { // in a split controller, load detail view
        if ([self isMemberOfClass:[PhotoListTableViewController class]]) {
#if TEST > 0
            NSLog(@"Segue to PhotoListMapVC");
#endif
            [self performSegueWithIdentifier:@"PhotoListMapVC" sender:self];
        } else if ([self isKindOfClass:[PhotoListTableViewController class]]) {
#if TEST > 0
            NSLog(@"Segue to RecentsMapVC");
#endif
            [self performSegueWithIdentifier:@"RecentsMapVC" sender:self];
        } else {
            NSLog(@"PhotoListTableViewController:viewWillAppear unexpected class %@", [self class]);
            return;
        }
    }
} 
```

# javascript - 如何更改我的 javascript 的变量，然后运行“onload”而不重新加载页面

> ID：12023670
> 
> 赞同：1
> 
> 时间：2012-08-19T02:04:14.957
> 
> 标签：javascript

我有一个网站，每天挑选一首新歌，只使用 xml 文档和东西..没关系，重要的是我想通过更改变量来测试明天的歌曲，然后“模拟”onload，所以它将内容更改为明天的页面。有没有办法在不重新加载页面的情况下进行加载（这会改变我的变量）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:08:24.403

您应该能够从浏览器的控制台触发它。打开控制台（或 Firebug）并允许页面正常加载。然后在控制台中设置新变量。只需调用`window.onload()`（或者`document.body.onload()`如果这是您定义它的方式），您的函数应该使用新值触发。

```
// In the browser console:
yourVariable = 'tomorrowSong.mp3';
// Updated: 
// Since you have bound body.onload, use:
document.body.onload();
// Or call the function directly in the console:
onpageload(); 
```

看来您的变量是在您的函数范围内定义的，这使得很难从控制台进行更改。相反，在函数外部定义变量。这样，您可以简单地在控制台中重新定义它

```
// Define v at a higher scope
// Outside the function...
var v; 
```

# django - 从 db 获取数据时，django 中的简单循环出现奇怪错误

> ID：12023674
> 
> 赞同：1
> 
> 时间：2012-08-19T02:04:52.273
> 
> 标签：django, django-models, django-templates, django-views, django-queryset

我从 django 模型中获取数据并使用 for 循环在模板中显示数据，但它说：`TypeError at /jobs/ __init__() takes exactly 1 argument (8 given)`

这是我要获取数据的视图代码：

```
jobs_cities=City.objects.filter(job__isnull=False).distinct().annotate(jobs_count=models.Count('job')).order_by('jobs_count')[:6] 
```

然后我使用以下视图文件行将此数据传递给模板：

```
return render_to_response('jobs/list.html', locals(),context_instance=RequestContext(request)) 
```

然后在模板中显示为：

```
{% for job_city in jobs_cities %}
  <li><a href="#">Jobs in {{job_city.name}} </a></li>
 {% endfor %} 
```

堆栈跟踪：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/jobs/

Django Version: 1.4.1
Python Version: 2.6.5
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'jobs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Template error:
In template /media/../templates/jobs/list.html, error at line 93
   __init__() takes exactly 1 argument (8 given)
   83 : <div class="clear"></div>

   84 :   

   85 :   </div><!--float_left-->

   86 :   

   87 :   <div class="float_right">

   88 :   <div class="post_btn"><a href="#"><img src="{{STATIC_URL}}images/post_btn.gif" border="none" alt=""><br><img src="{{STATIC_URL}}images/ffree_text.gif"></a></div><!--post_btn-->

   89 :   <div class="create_prfoile_btn"><a href="#"><img src="{{STATIC_URL}}images/banner.gif" alt="" border="none"></a></div><!---create_prfoile_btn-->

   90 :   <div class="clear"></div>

   91 :   <div class="featured_jobs">

   92 :   <ul>

   93 :      {% for job_city in jobs_cities %} 

   94 :   <li><a href="#">Jobs in {{job_city.name}} </a></li>

   95 :     {% endfor %}

   96 :   </ul>

   97 :   

   98 :   </div><!--featured_jobs-->

   99 :   

   100 :   </div><!--float_right-->

   101 :   

   102 :   

   103 :   <div class="clear"></div>

Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/media/Local Disk/programming/django_projects/kaasib/jobs/views.py" in list
  38\.     return render_to_response('jobs/list.html', locals(),context_instance=RequestContext(request))
File "/usr/local/lib/python2.6/dist-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/template/loader.py" in render_to_string
  176\.         return t.render(context_instance)
File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  140\.             return self._render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/usr/local/lib/python2.6/dist-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/usr/local/lib/python2.6/dist-packages/django/template/defaulttags.py" in render
  145\.         len_values = len(values)
File "/usr/local/lib/python2.6/dist-packages/django/db/models/query.py" in __len__
  85\.                 self._result_cache = list(self.iterator())
File "/usr/local/lib/python2.6/dist-packages/django/db/models/query.py" in iterator
  301\.                     obj = model(*row[index_start:aggregate_start])

Exception Type: TypeError at /jobs/
Exception Value: __init__() takes exactly 1 argument (8 given) 
```

我还查看了调试代码，它显示 jobs_cities 是空列表，所以我想知道我实际上做错了什么？

提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T10:28:59.807

似乎你已经覆盖了or的`__init__`方法。当你覆盖 时，这样做`City``Job``__init__`

```
class YourModel(models.Model):
    def __init__(self, *args, **kwargs):
        ...
        super(YourModel, self).__init__(*args, **kwargs)
        ... 
```

该格式`__init__(self):`只接受一个参数`self`。

# wordpress - 为什么这个简单的网格布局会中断？（调试一些基本的 HTML/CSS）

> ID：12023681
> 
> 赞同：0
> 
> 时间：2012-08-19T02:06:50.017
> 
> 标签：wordpress, css-float, thumbnails, html

以下页面是 wordpress 投资组合网站的缩略图库：

[http://rosspw.com/snippets/](http://rosspw.com/snippets/)

**我试图解决的问题是了解为什么三列画廊网格布局被破坏**——它显示前三个缩略图，然后破坏网格布局。

画廊网格是使用以下 wordpress/php 代码创建的：

```
<div id="project-thumbs">       
<?php
                    query_posts( array(
                        'ignore_sticky_posts' => 1,                     
                        'posts_per_page' => 24,
                        'post_type' => array('snippet')
                        )); ?>                              
                    <?php  while (have_posts()) : the_post(); ?>
                        <div class="project-box one-third float-left">      
                            <?php get_template_part( 'part-project-thumb'); ?>
                        </div>
                <?php endwhile; ?>
                <?php wp_reset_query(); ?>      
        </div> 
```

此外，我用于“project-thumbs”的 CSS 样式如下：

```
#project-thumbs {
margin: 0 auto;
text-align: center;
min-height: 625px;
padding-top: 35px; 
```

}

你能帮我理解为什么在六个缩略图之后网格布局会中断吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:10:13.733

像这样向您的 .project-box 类添加高度：

```
.project-box { height: 250px; } 
```

您的浮动元素的高度不同，因此浮动被破坏了。

# python - 由一个空集组成的集合

> ID：12023683
> 
> 赞同：1
> 
> 时间：2012-08-19T02:07:12.863
> 
> 标签：python

为了在 python 中获得一个空集，我使用`{}`它并且它可以工作。

我需要将空集用作集合中的元素。

但是也会`{{}}`产生错误`{set()}`。

有办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T02:09:51.317

集合的内容（和字典的键）只能是*不可变*的值。这意味着它们的内容不能改变。如果你使用的是一个常规的`set`，它的内容可以被改变，例如，`.add`和`.remove`方法，所以不可能把它放在另一个集合中。

相反，您[需要使用`frozenset`](http://docs.python.org/library/stdtypes.html#frozenset). 它的行为与 a`set`相同，只是在创建后不能更改其内容。

```
print frozenset([ frozenset() ]) == frozenset([ frozenset() ]) # True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:10:28.337

`{}`做一个空的字典。您不能在 dicts 中包含无钥匙项目。您不能在集合内创建集合，因为它们是不可散列的。

# ruby-on-rails - 控制器错误。意外的 $end，期待keyword_end

> ID：12023688
> 
> 赞同：-1
> 
> 时间：2012-08-19T02:09:49.347
> 
> 标签：ruby-on-rails

我的漂亮发电机控制器遇到了一些与块相关的问题。我对rails很陌生，所以毫无疑问这是一个简单的问题。这是我的错误：

> /home/forrest/.rvm/gems/ruby-1.9.2-p320@global/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `require': /home/forrest/code/ luxeldb/app/models/maintenance_record.rb:16：语法错误，意外 $end，期待关键字_end (SyntaxError)

这是我的控制器：

```
class MaintenanceRecordsController < ApplicationController
  def index
    @maintenance_records = MaintenanceRecord.find(:all)
  end

  def show
    @maintenance_record = MaintenanceRecord.find(params[:id])
  end

  def new
    @maintenance_record = MaintenanceRecord.new
  end

  def create
    @maintenance_record = MaintenanceRecord.new(params[:maintenance_record])
    if @maintenance_record.save
      redirect_to @maintenance_record, :notice => "Successfully created maintenance record."
    else
      render :action => 'new'
    end
  end

  def edit
    @maintenance_record = MaintenanceRecord.find(params[:id])
  end

  def update
    @maintenance_record = MaintenanceRecord.find(params[:id])
    if @maintenance_record.update_attributes(params[:maintenance_record])
      redirect_to @maintenance_record, :notice  => "Successfully updated maintenance record."
    else
      render :action => 'edit'
    end
  end

  def destroy
    @maintenance_record = MaintenanceRecord.find(params[:id])
    @maintenance_record.destroy
    redirect_to maintenance_records_url, :notice => "Successfully destroyed maintenance record."
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:17:53.703

直接从错误消息中读取，语法错误在您的`/home/forrest/code/luxeldb/app/models/maintenance_record.rb`文件中，而不是控制器中。

您错过了一个`end`关键字，Ruby 发现了这个关键字，因为它在`$end`等待结束关键字时到达了文件的末尾 ( )

# vb.net - VB.Net 2010 基于表单的身份验证错误

> ID：12023690
> 
> 赞同：0
> 
> 时间：2012-08-19T02:09:57.530
> 
> 标签：vb.net, visual-studio-2010, authentication, webforms, forms-authentication

我正在关注 codeguru 教程[codeguru 教程](http://www.codeguru.com/csharp/.net/net_asp/tutorials/article.php/c19359/Using-ASPNET-to-Make-a-Secure-Site-and-Move-Login-Processing-Out-of-the-Page.htm)，是的，它在 c# 中，但我找不到一个好的 VB 示例。

最初我在使用 web 配置文件时遇到了问题。本教程规定这样做

```
<authentication mode="Forms">
<forms name="yourAuthCookie" loginUrl="login.aspx"
protection="All" path="/" />

</authentication>
<authorization>
<deny users="?" />
</authorization>

<location path="test.aspx">

<system.web>
<authorization>
<allow users="?" />
</authorization>
</system.web>

</location> 
```

现在失败了，因为 XML 不能有多个根级文档，并且如果我将位置插入到 system.web 块中，则会出现 system.web 错误，子元素位置无效。

我提到了 msdn [MSDN ASP.NET 身份验证](http://msdn.microsoft.com/en-us/library/aa291347%28v=vs.71%29.aspx)，但是它的示例不正确或可能已过时，因为它的示例有一个“表单”错误，因为它不是一个允许的属性。

```
<system.web>
    <authentication mode="Forms">
        <forms forms="401kApp" loginUrl="/login.aspx" />
    </authentication>
</system.web> 
```

谁能澄清这是如何工作的？我找不到准确的演练或示例，如果您找到了准确的 VB.NET 指南，如果您可以向我展示一个非常有帮助的指南。

顺便说一句，我还在 c# 中再次找到了这个[codeproject](http://www.codeproject.com/Articles/2905/Role-based-Security-with-Forms-Authentication)示例教程，但它从一开始就枚举了仅创建登录页面的错误，因此也不能使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:15:41.800

该`<location>`元素需要直接进入根`<configuration>`元素内部。

# php - php变量到mysql哪里

> ID：12023691
> 
> 赞同：2
> 
> 时间：2012-08-19T02:10:11.707
> 
> 标签：php, mysql, variables, where-clause

我定义了 PHP 变量 $id ，其值是当前 Facebook 用户的 ID，从 Facebook API 调用返回的数组中提取。

```
$id = $userInfo[id]; 
```

我确信该变量已正确声明，因为我可以回显它的值并已成功将正确的值存储在数据库中。

我试图在 mysql 查询的 where 子句中使用它来从存储 ID 和其他数据的数据库表中返回记录，但未成功。查询返回预期的结果，直到我添加 where 子句，所以我认为这是我的语法与$id有关。我过滤的列也被命名为 id。我尝试过的语法都没有奏效，包括以下内容：

```
WHERE id = $id
WHERE id = '$id'
WHERE id = "$id" 
```

在过去的几天里，我一直在寻找解决方案，并尝试了我在任何地方看到的单引号、双引号和小数的每一种组合。

编辑（代码取自作者的评论）

```
mysql_select_db($database_YOUR_giftbox, $YOUR_giftbox); 
$query_user_data = "SELECT date, event FROM events WHERE id = $id ORDER BY date ASC"; 
$user_data = mysql_query($query_user_data, $YOUR_giftbox) or die(mysql_error()); 
$row_user_data = mysql_fetch_assoc($user_data); 
$totalRows_user_data = mysql_num_rows($user_data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:29:02.550

我将假设一些事情并扩展您的示例。这是包含 PHP var 的完整查询的样子（非常基本的示例）：

```
$query = "SELECT name, another_field FROM users WHERE id = " . $id; 
```

那就是`id`你的数据库中的一个整数。如果由于某种原因它是某种字符串，那么：

```
$query = "SELECT name, another_field FROM users WHERE id = '" . $id . "'"; 
```

您还可以将 PHP 变量括在花括号中，如下所示（对于整数）：

```
$query = "SELECT name, another_field FROM users WHERE id = {$id}"; 
```

或者这个（对于一个字符串）：

```
$query = "SELECT name, another_field FROM users WHERE id = '{$id}'"; 
```

但是，如果您使用该方法，那么请注意整个`$query`声明需要包含在`"`而不是`'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:51:09.983

由于您似乎刚刚开始使用 PHP 和 MySQL，因此**请勿** `mysql_query`在任何新应用程序中使用。您的查询应类似于：

```
SELECT * FROM something WHERE id=? 
```

它也可能看起来像：

```
SELECT * FROM something WHERE id=:id 
```

这取决于您如何使用`mysqli`或 PDO 来进行[SQL 转义](http://bobby-tables.com/php)。有几种方法可以做到这一点，所以找到最适合您风格的一种，并尝试始终如一地应用它。你不会后悔学习这项非常重要的技能。如果你忘记了没有它你会面临什么样的危险，你会后悔的。

让我感到害怕的是，人们零关注地给出“答案”，以确保查询始终有效，并且永远不会在您的应用程序中成为一个巨大的漏洞，只是等待有人使用自动 SQL 注入工具。

您应该能够编写您想要的查询类型，在`mysql>`命令行上对其进行测试，然后在您的应用程序中创建一个模板版本来完成完全相同的事情。MySQL 在涉及数字时通常非常随意，它们可以被引用或不被引用，它会根据需要进行转换，但字符串必须**始终**正确转义，否则可能会产生严重后果。

执行此`mysqli`操作非常简单：

```
$stmt = $db->prepare('SELECT * FROM something WHERE id=?');
$stmt->bind_param($id);
$stmt->execute(); 
```

这可能是最接近`mysql_query`函数族的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T02:29:47.570

```
$query = "SELECT * FROM `table_name` WHERE `id` = " . mysql_real_escape_string($id) . " ;" 
```

应该是最正确的。确保 table_name 和 id 正确。

使用 ` 左刻度线可确保您不会运行受保护的 mysql 单词。

关于 facebook ID 的另一件好事是它们需要 BIGINT mysql 类型。数字对于 int 来说太大了！这在过去把我搞砸了。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T03:39:27.097

非常感谢大家的建议！

事实证明，我正在寻找的解决方案是我开始使用的解决方案，WHERE id = $id. 出于某种原因，Dreamweaver 的数据库测试正确返回了所有结果，但没有通过我的 where 子句过滤结果。我将它上传到我的远程服务器，它运行良好。

再次感谢！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-19T02:15:01.137

```
SELECT * WHERE 'ID' = $id; 
```

此外，请确保您`$id`是一个实际的字符串变量，而不是`ECHO`返回索引 0 的字符串数组。

# http-headers - Chrome 网络检查器中缺少请求标头（和发送的 cookie）？

> ID：12023695
> 
> 赞同：12
> 
> 时间：2012-08-19T02:10:15.953
> 
> 标签：http-headers, google-chrome-devtools, web-inspector, request-headers

我注意到在某些情况下（例如 XHR 请求），发送的请求标头和 cookie 已从网络检查中消失，至少在 OSX Google Chrome 中是这样。

如果您没有明白我的意思，只需打开网络检查器并连接到您的 Twitter 帐户，然后检查 XHR 请求：您可以看到请求有效负载和响应标头，但发送的标头和 cookie 已消失。

知道如何解决这个问题吗？我尝试在 about:flags 中激活一些奇异的标志，但没有看到任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:30:44.860

似乎是因为请求的页面是通过 https 加载的。我不知道为什么 Chrome 突然发现有必要隐藏请求标头，但是测试，安全连接似乎是这种行为的触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T12:29:06.323

我注意到请求 cookie 显示在另一个名为“cookies”的选项卡中，似乎 set-cookie 标头以某种方式从“标头”选项卡中剪切。

# magento - 如何将分组产品与 Magento 中的可配置产品相 关联？

> ID：12023697
> 
> 赞同：0
> 
> 时间：2012-08-19T02:10:38.607
> 
> 标签：magento

好的，所以。我有一个可配置的产品设置，其中包含已关联的简单产品。没问题。我想再关联一个产品...一个包含此可配置产品组成的所有简单产品的分组产品。这是为了允许批发客户一次购买一套（这些简单产品中的每一种），而不必单独订购。希望大家关注！..

从我创建可配置产品的同一属性集中，我创建了分组产品。通过这样做，我希望它可以作为一个可行的产品来关联，因为所有属性都匹配。它不是。

关于为什么 Magento 不允许我将分组产品与可配置产品相​​关联的任何想法，以及我如何做到这一点？谢谢！我很欣赏任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T06:16:02.990

您不能将分组产品与可配置产品相​​关联。

您有什么理由选择不使用捆绑产品？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:21:04.427

除非您想自定义构建它，否则 Magento 本身不允许您关联可配置和分组的产品。Bundle 可能是执行此操作的更好方法。我认为您可以调整其背后的业务逻辑以更好地适应捆绑产品。

话虽如此......您可以轻松地在 Magento 中创建可以更好地满足您的需求的新产品类型，唯一的问题是您可以投入多少时间和金钱？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T23:06:49.300

我懂了。我选择不使用捆绑产品，因为套装是预先确定的。批发客户将无法定制或选择哪些简单产品进入该套装。我所做的是将“Set”添加到适当的可配置属性中，并创建一个简单的产品来表示完整的集合（它确实有自己的 SKU）。

现在我们计划安装此模块，并将简单的产品集限制为仅限批发客户群。[http://ecommerce.aheadworks.com/magento-extensions/catalog-permissions.html](http://ecommerce.aheadworks.com/magento-extensions/catalog-permissions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:18:15.547

你可以这样：

转到简单产品，然后选择管理产品，然后选择自定义选项集

```
is required: no 
```

然后您可以将此可配置产品添加到分组产品中。

# r - 如何将轴中断设置为轴的一部分？

> ID：12023699
> 
> 赞同：4
> 
> 时间：2012-08-19T02:11:10.460
> 
> 标签：r, plot, ggplot2, histogram

在 R 中，我绘制了以下直方图。问题出在 X 轴上。大部分数据落入区间 [0, 10]。很少有 X 值大于 10，尽管最大的是 34。

因此，我不会在 X 轴上一直显示 0、1、2、... 直到 34，而是显示 0、1、2、...、10、15、20、25、30。也就是说，当 X > 10 时，仅以 5 的间隔显示标签，这样标签就不会重叠。

![示例图](../Images/7758625f084245a39868cb9ea91d0c45.png)

这是我的 R 代码。如何修改它？

```
d<-read.table("16_prop_s.tsv", header=T, sep="\t")
library(ggplot2)
library(scales)
ggplot(d, aes(x=factor(NRB))) + 
   geom_histogram(aes(y=(..count..)/sum(..count..))) + 
   scale_y_continuous(labels=percent_format()) + 
   xlab("Rotatable bonds") + opts(axis.title.y = theme_blank()) +
   opts(axis.title.x = theme_text(size = 24)) + 
   opts(axis.text.x = theme_text(size = 18)) + 
   opts(axis.text.y = theme_text(size = 18)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T09:48:52.950

将 scale_x_discrete 与自定义中断一起使用：

```
d <- data.frame(NRB = c(abs(round(rnorm(1000, 5, 4))), 1:34))
library(ggplot2)
library(scales)
p <- ggplot(d, aes(x=factor(NRB))) +
  geom_histogram(aes(y=(..count..)/sum(..count..))) +
  scale_y_continuous(labels=percent_format()) +
  xlab("Rotatable bonds") + opts(axis.title.y = theme_blank()) +
  opts(axis.title.x = theme_text(size = 24)) +
  opts(axis.text.x = theme_text(size = 18)) +
  opts(axis.text.y = theme_text(size = 18))

p + scale_x_discrete(breaks = c(1:10, seq(15, 35,5)), 
                     labels = c(1:10, seq(15, 35,5))) 
```

![在此处输入代码](../Images/9ccf246daeba1349013665bb633e4aa3.png)

如果您想要均匀分布的网格线但具有相同的编号，请使用空标签。

```
x <- 11:35
p + scale_x_discrete(breaks = c(1:35)), 
                     labels = c(1:10, ifelse(x%%5 == 0, x, ""))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T14:51:27.650

我喜欢@lselzer 的解决方案，但从技术上讲，它可能不是您想要的。读者得到的印象是比例可能是对数比例，这可能不是你想要的。您可以像这样添加中间具有空值的标签。

```
p + scale_x_discrete(breaks = 1:34, 
   labels = c(1:10, "", "", "", "", 15, "", "", "", "", 20, "", "", "", "", 25, "", "", "", "", 30, "", "", "", 34)) 
```

![在此处输入图像描述](../Images/3cf0ff2a6e0ec892cf49c6b9e0b769f8.png)

# php - 在外部数据库中访问和保存 Wordpress 帖子标题

> ID：12023701
> 
> 赞同：0
> 
> 时间：2012-08-19T02:12:00.863
> 
> 标签：php, wordpress

背景：我有2个网站，网站B是wordpress网站。网站 A 和 B 不在同一台服务器上。

我想要实现的是以某种方式在网站 A 上有一个脚本来扫描网站 b 并将帖子标题、帖子和 URL 保存到网站 A 的数据库。

网站 A：www.MyWebsite.com

网站 B：blog.MyWebsite.com（Wordpress）。

我目前的计划是直接连接到网站 B 的数据库并保存我想要的内容，但保存到网站的 A 数据库中，但我想知道是否有更好的方法可以做到这一点，我不必连接到网站 B 的数据库只需获取 XML 格式的提要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:34:55.327

我将通过一个连接连接到网站 B 的数据库，然后执行查询以获取您需要的所有信息。然后遍历结果并将所需的任何数据保存到`Array`. 然后获取该数组数据并连接到网站 A 的数据库以保存它。

希望这一切都有意义:)

# node.js - 仅用于传输的 socket.io 的轻量级替代品

> ID：12023713
> 
> 赞同：14
> 
> 时间：2012-08-19T02:17:41.283
> 
> 标签：node.js, websocket, socket.io

是否有仅用于传输的 socket.io 的轻量级替代方案？

我有一个 node.js 应用程序，它仅使用 socket.io 作为消息传输。我的应用程序自己管理会话和消息路由，我只是使用 socket.io 进行传输——websocket + 旧浏览器的默认回退。

较新版本的 socket.io 似乎越来越重，现在带有 redis 支持，我完全不需要。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T10:51:31.913

[ws](https://github.com/einaros/ws)模块速度惊人（查看[基准测试](http://websockets.github.io/ws/benchmarks.html)），经过良好测试，非常非常轻量级，但是没有你必须自己做后备，另外，它上面没有事件发射器。但是，如果这是您想要的，那么仅在运输方面就很棒。如果你想要一个穷人的“会话”，只需在 ws 对象上附加一些东西，如下所示：

```
var WebSocketServer = require('ws').Server
var wss = new WebSocketServer( /* some config */);
wss.on('connection', function(ws) {
    ws.on('message', function (message) {
        try {
            var obj = JSON.parse(message) // using JSON  over the conversation
        } catch (err) {
            var obj = {};
            console.log('probably not valid json');
        }
        switch (true) {
            case obj.name !== undefined:
                ws.name = obj.name; // Here's the poor man's session variable
                ws.send('Hello '+ws.name);
            break;
        }
    });
}); 
```

现在唯一缺少的是它上面的事件发射器......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-19T06:07:13.040

还有其他选择。`faye`- [http://faye.jcoglan.com/](http://faye.jcoglan.com/)就是其中之一。它类似于 socket.io，但使用`Bayeux`协议。另一个如果您不想运行服务器`pusher`- [http://pusher.com/](http://pusher.com/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-19T10:38:02.373

看看[sock.js——](https://github.com/sockjs/sockjs-client)它试图实现跨浏览器的 websockets api，仅此而已。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-28T16:38:27.373

对于 Node.js，您可以尝试[ws](https://github.com/einaros/ws) + [ws-wrapper](https://github.com/bminer/ws-wrapper) + [ws-server-wrapper](https://github.com/bminer/ws-server-wrapper)。ws-wrapper 是一个轻量级库，它为 WebSockets 添加了一些事件处理程序功能......类似于您在 socket.io 中可能找到的内容。此外，您还可以获得基于 Promise 的请求和命名空间。

正如其他人所提到的，[ws](https://github.com/einaros/ws)模块非常快速、轻量级，甚至被 socket.io 在后台使用。所有现代浏览器现在都[支持](http://caniuse.com/#feat=websockets)原生 WebSocket ，因此为大多数实时 Web 应用程序支持其他传输似乎很愚蠢。

`ws-wrapper`甚至没有实现自动重新连接，所以如果你想要，请查看[描述指数回退方法的 wiki 页面](https://github.com/bminer/ws-wrapper/wiki/Client-side-Auto-Reconnect)

最后，ws-server-wrapper 是服务器端的库，允许您执行以下操作：向所有连接的 WebSocket 发送消息，侦听来自所有 WebSocket 的事件等。

免责声明：我是 ws-wrapper 的作者。:)

# c# - 声明一个方法，它的参数是一个泛型类

> ID：12023715
> 
> 赞同：0
> 
> 时间：2012-08-19T02:18:02.143
> 
> 标签：c#, generics

我有一个这样定义的接口：

```
public interface IOwlAnnotationTuple<T1, T2, T3> 
```

然后它的类也是这样的：

```
public class OwlAnnotationTuple : IOwlAnnotationTuple<string, OWLClass, string> 
```

然后我有另一个接口，我正在向它添加一个方法，我希望它采用我上面定义的这个接口的参数，所以我像这样定义它，但我得到错误，“>”是预期的。”

```
void AddAnnotation(IOwlAnnotationTuple <string annotationName, OWLClass owlClass, string annotationValue>); 
```

那么声明它的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:31:33.073

您已尝试命名三个参数，但如果您只想要一个参数，请仅命名单个参数：

```
void AddAnnotation(IOwlAnnotationTuple<string, OWLClass, string> owlAnnotationTuple); 
```

或者

```
void AddAnnotation(OwlAnnotationTuple owlAnnotationTuple); 
```

的类型`owlAnnotationTuple`是`IOwlAnnotationTuple<string, OWLClass, string>`。`string`/类型没有单独的参数`OWLClass`，因此您无法命名它们。

# ruby-on-rails - rails中的动态选择框

> ID：12023716
> 
> 赞同：0
> 
> 时间：2012-08-19T02:18:54.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要创建一个从 1 到活动记录中定义的数字的选择框。这个数字会改变。

到目前为止，我知道我可以创建一个这样的选择框：

```
<%= f.select  :numbers, %w[1 2 3 4 5 6 7 8 9 10 ] %> 
```

但我需要的是这样的：

```
<%= f.select  :numbers, %w[1..@user.number] %> 
```

有没有办法在 Rails 中创建一个不错的动态选择框，或者我需要在 html 中手动创建带有 for 循环或类似内容的选择标签？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:31:01.803

您可以使用以下方法将[Range](https://ruby-doc.org/core/Range.html)转换为 Array `to_a`：

```
<%= f.select :numbers, (1 .. @user.number).to_a %> 
```

或者您可以`f.select`提供原始范围，它会`to_a`为您调用：

```
<%= f.select :numbers, 1 .. @user.number %> 
```

来自[精美手册](https://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)：

> **选择**（对象，方法，选择，选项 = {}，html_options = {}）
> 
> 为提供的对象和方法创建一个选择标签和一系列包含的选项标签。如果对象可用，则将选择对象当前持有的选项。
> 
> 选择参数有两种可能的格式，对应于其他助手的输出：
> 
> *   平面集合：见`options_for_select`
> *   嵌套集合：见`grouped_options_for_select`

并[`options_for_select`说](https://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)：

> **options_for_select**（容器，已选择 = nil）
> 
> 接受一个容器（哈希、数组、可枚举、你的类型）并返回一个选项标签字符串。

Range 是一个 Enumerable，因此`f.select`上面的两个调用都应该产生相同的结果。

# python - WeakValueDictionary 保留对没有更多强引用的对象的引用

> ID：12023717
> 
> 赞同：7
> 
> 时间：2012-08-19T02:19:37.963
> 
> 标签：python, mapping, python-2.7, weak-references

```
>>> from weakref import WeakValueDictionary
>>> class Foo(object):
...     pass
>>> foo = Foo()
>>> db = WeakValueDictionary()
>>> db['foo-id'] = foo
>>> del foo
>>> dict(db)
{'foo-id': <__main__.Foo object at 0x4dd946c>} 
```

为什么它显示这个而不是空字典？请注意，此代码会产生我期望的结果：

```
>>> db2 = WeakValueDictionary()
>>> db2['disposable-id'] = Foo()
>>> dict(db2)
{} 
```

在执行脚本（而不是交互式解释器）时，它的行为也符合预期：

```
from weakref import WeakValueDictionary
class Foo(object):
    pass
foo = Foo()
db = WeakValueDictionary()
db['foo-id'] = foo
del foo
print str(dict(foo))
# prints {} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T05:47:49.200

`WeakValueDictionary`不保证在没有正常引用时将删除条目。它保证的是它不会在适当的时候阻止垃圾收集 - 您的对象是*可垃圾收集*的，而不是*垃圾收集*的。当垃圾收集发生时，该条目将消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T03:10:50.900

如果您只是在交互式 shell 中尝试过此操作，我相信这与垃圾收集在该接口和全局范围操作下的工作方式有关。

从脚本试试这个：

**foo.py**

```
from weakref import WeakValueDictionary

class Foo(object):
    pass

f = Foo()
d = WeakValueDictionary()
d['f'] = f 

print dict(d)
del f 
print dict(d) 
```

接着...

```
$ python foo.py

{'f': <__main__.Foo object at 0x101f496d0>}
{} 
```

现在，从交互式 python shell 中尝试这个，将操作移动到函数范围内：

```
from weakref import WeakValueDictionary

class Foo(object):
    pass

f = Foo()
d = WeakValueDictionary()
d['f'] = f 

def main():
    global f
    print dict(d)
    del f 
    print dict(d)

main()

#{'f': <__main__.Foo object at 0x100479f10>}
#{} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-13T17:06:04.503

在 Python 交互式 Shell 中，无论您声明什么变量，都不会自动进行垃圾收集，因为 in 的作用域`__main__`还没有结束。Python 中的垃圾收集是基于**引用计数**的，除非你明确地这样做或离开当前范围，否则它不会被收集。

在同一个 shell 中，如果您`WeakRef`在函数内部实现逻辑，您将看到预期的结果，因为在完成函数后，控件超出范围并且对象被垃圾收集。

这就是为什么@jdi with function 的示例向您展示了您想要的内容。

# ruby-on-rails - Rails 资产目录的权限被拒绝

> ID：12023718
> 
> 赞同：0
> 
> 时间：2012-08-19T02:20:01.913
> 
> 标签：ruby-on-rails, apache, ubuntu, passenger, ruby-on-rails-3.2

我一直在网上寻找答案。我在 Ubuntu/Apache/Passenger 上运行一个应用程序。我的资产文件夹收到“权限被拒绝”错误。我的文件位于主目录中。我运行`ls -l`并返回：

```
drwxrwxr-x 6 root root 4096 Aug 19 01:30 tmp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:07:47.300

出色地，

我将我的应用程序移至 var/www 然后运行以下命令：

```
chown -R www-data:www-data /var/www/appname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:22:08.770

所以应用程序被调用`events`并且这个文件夹归`root`? 如果也`events/config.ru`归其所有，`root`则乘客不会以 root 身份启动应用程序，而是通常以`nobody`. 查看[http://www.modrails.com/documentation/Users%20guide%20Apache.html#user_switching](http://www.modrails.com/documentation/Users%20guide%20Apache.html#user_switching)

# wpf - 赋予 wpf appbar“比 Windows 任务栏更高的优先级”

> ID：12023720
> 
> 赞同：0
> 
> 时间：2012-08-19T02:20:49.973
> 
> 标签：wpf, space, taskbar, docking, appbar

我已经尝试制作一个 appbar，并将互操作代码连接到 wpf 窗口（在 CodeProject 的帮助下），效果很好！但我还有更多想做的事情。我想要我要停靠的窗口的停靠设置来“推动”任务栏，即，如果它的宽度为 50，并且停靠在左侧，那么任务栏应该短 50 像素，并且从左侧开始 50 像素屏幕的一侧。也许我能找到的最好的例子是这张（旧）照片，来自早期的 Longhorn 窗户构建：

![在此处输入图像描述](../Images/6165cafdb1bf921577e2a521d8e13731.png)

在这张图片中，侧边栏使任务栏更短。这可能吗，我该怎么做？谢谢。

# python - 为什么我的 ttk.Treeview 点击处理程序在 tree.focus() 上返回错误的项目？

> ID：12023721
> 
> 赞同：6
> 
> 时间：2012-08-19T02:21:20.987
> 
> 标签：python, treeview, onclick, tkinter, ttk

我有一个使用`ttk.Treeview`文件系统树内容填充的实例的简单脚本。我想在单击（叶）项目时执行某个操作，所以我配置了一个处理程序，如下所示：

```
self.tree.tag_bind('#entry', '<1>', self.onClick) 
```

在该方法中`onClick`，我只是打印出被点击的项目，如下所示：

```
def onClick(self, event):
    item_id = str(self.tree.focus())
    print 'Selected item was %s' % item_id
    item = self.tree.item(item_id)
    flag = '#another_tag' in item['tags']
    print '  flag = %s' % flag 
```

我发现这些消息比点击次数滞后一倍。所以我的第一次点击得到一个随机值（看起来像树的根），然后第 n 次点击打印出被点击的第 (n-1) 个项目的值。

它们是这样插入的： `tree.insert(parent_id, 'end', id, text=id, tags=['#entry'])`

任何人都知道这是 Tkinter 中的错误还是我做错了什么？

这似乎是 Ubuntu Natty 和 OS X Lion 上的一个问题（使用 Python 和 Tkinter 的默认预安装版本）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T22:47:31.410

这就是 Tkinter 设计的工作方式。小部件上的绑定在小部件类上的绑定之前处理。设置所选项目的是小部件类上的绑定。这使得覆盖默认绑定变得非常容易，但代价是增加默认绑定变得更加困难。

这个网站上已经问过几次了。在本站[搜索“bindtags” ；](https://stackoverflow.com/search?q=%5BTkinter%5D+bindtags&submit=search)bindtags 是控制事件处理顺序的机制。

在树视图小部件的特定情况下，我建议绑定到`<<TreeviewSelect>>`事件，该事件将在设置选择后处理。然后，您可以使用该`tag_has`方法来确定单击了哪种类型的节点。

# vba - 确定工作表更改是否在特定行中

> ID：12023725
> 
> 赞同：0
> 
> 时间：2012-08-19T02:22:05.153
> 
> 标签：vba, excel

我想确定对工作表的更改是否包含特定行中的单元格。我试过了

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)

    Dim i As Integer

    If ActiveSheet.Name = "Yahoo" Then
        If Not Intersect(Target, Range(Cells([YahooID_Row], 1), Cells([YahooID_Row], 999))) Is Nothing Then

        Else

        End If
    End If

End Sub 
```

YahooID_Row 是一个命名的整数常量。

我不断收到运行时错误 1004。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:05:36.567

如果您只有一张纸，那么您可以直接使用`Worksheet_Change(ByVal Target As Range)`. 如果有多张纸，那么只使用`Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)`

以下代码代码位于您要进行检查的工作表代码区域中。`

此外，如果您打算写入一个单元格，请确保您设置`Application.EnableEvents = False`为防止可能的无限循环，并使用适当的错误处理`True`再次将其设置为。

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Dim YahooID_Row As Long

    '~~> Row 5
    YahooID_Row = 5

    Application.EnableEvents = False

    If Not Intersect(Target, Rows(YahooID_Row)) Is Nothing Then
        '
        '~~> You rest of the code goes here
        '
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:29:50.587

这假设您只对发生更改的行感兴趣（而不关心列）。它找到范围对象中的第一行和最后一行，并检查`YahooID_Row`它们是否在它们之间。

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)

    dim firstRow, lastRow as double    
    firstRow = target.Rows(1).Row
    lastRow = target.Rows(target.Rows.Count).Row
    if (YahooID_Row >= firstRow and YahooID_Row =< lastRow) then
        msgbox "Change in the YahooID row"
    end if

End Sub 
```

`if`如果您希望消除额外的代码行，您还可以将第一行/最后一行声明和计算直接移动到语句中。

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)

    if (YahooID_Row >= target.Rows(1).Row and YahooID_Row =< target.Rows(target.Rows.Count).Row) then
        msgbox "Change in the YahooID row"
    end if

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:09:29.837

使用您尝试过的策略，这是您的代码的工作版本

```
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    If Sh.Name = "Yahoo" Then
        If Not Intersect(Target, Sh.Rows([YahooID_Row])) Is Nothing Then

        Else

        End If
    End If

End Sub 
```

区别是

1.  检查`Sh`参数而不是活动工作表。触发事件的更改可能不是来自 ActiveSheet。
2.  将工作表引用 ( `Range(...`) 限定为`Sh`
3.  由于`[YahooID_Row]`是命名常量（而不是命名范围），因此将其用作索引
4.  检查整行，而不仅仅是前 999 列

# web-applications - 当前将现有 Web 应用程序转换为桌面应用程序而无需重新编程的最佳方法是什么？

> ID：12023728
> 
> 赞同：2
> 
> 时间：2012-08-19T02:22:20.350
> 
> 标签：web-applications, browser, desktop-application, multi-targeting

我正在寻找一种方法来获取以简单 HTML4、CSS 和 jQuery/Javascript 编写的现有 Web 应用程序，并将其部署为不需要 Internet 访问并访问本地或 Intranet 数据库的桌面应用程序。有没有一种解决方案可以在不使用面向桌面的编程语言重新编程整个事情的情况下做到这一点？我查看了大量其他类似的 stackoverflow 帖子，但它们似乎都已过时或略有不同（例如，他们建议使用 google gears）。是否有当前和最佳接受的解决方案来做到这一点？

编辑：我说没有重新编程。我应该尽可能少地重新编程。此外，我不害怕围绕网站进行其他编程，例如带有嵌入式浏览器的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T18:46:55.757

一年后，我找到了 PHP 桌面 ( [https://code.google.com/p/phpdesktop/](https://code.google.com/p/phpdesktop/) )。我不能推荐它。它是一个免费的开源项目，将轻量级 Mongoose 服务器、PHP 解释器和 Chromium 嵌入式框架嵌入到单个 exe 中。如果您不是 PHP 爱好者，还可以使用其他变体，例如 Python。

您所做的就是将您的 Web 根文件夹与 exe 文件放在同一个文件夹中，然后运行该 exe。布拉莫！您的 Web 应用程序的外观和行为与桌面应用程序完全相同。设置非常简单。通过更改 exe 名称和图标以及编辑 settings.json 文件，还可以进行很多自定义。您真的无法区分您的网络应用程序和桌面应用程序。我们计划将该文件夹打包到一个安装程序中并将其作为桌面应用程序出售，我认为没有人会意识到他们正在运行一个网络应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:31:39.140

实际上，如果没有任何其他网站的链接，那么有人可以直接从本地网络中的浏览器运行它，而无需任何互联网连接。

您的浏览器是 html 和 javascript 的解释器，因此您所要做的就是将所有内容放在一个文件夹中并启动基本 html 页面。

如果您想在不启动浏览器的情况下将其用作桌面应用程序，那可能会变得复杂。一切都取决于您的应用程序是如何制作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T02:51:28.283

为什么？如果您正在访问 Intranet 数据库，那么您可以访问内部 Web 服务器。如果是这种情况，则将其保留为根本不会上网的 Web 应用程序。可能有数以百万计的网络应用程序以这种方式运行。想想这个问题。如果不重新编程，就无法做到这一点。目标平台和根本不同的范例。HTML、CSS 和 jQuery/JavaScript 旨在在浏览器中运行。桌面应用程序没有这样的限制。如果它是一个足够简单的应用程序，可以归结为您的基本 DB CRUD 应用程序，那么只需硬着头皮将其淘汰。您可以从 jQuery/JavaScript 中挽救大部分逻辑，因为这是执行操作的地方，但 UI 需要大量修改。您应该检查业务需求，并为需求构建正确的应用程序。如果您必须重写代码才能做到这一点，那么这就是您赚大钱的原因。;-) 所以总结一下，第一个答案，目前没有最好的方法。大多数商店只会针对多个平台进行构建。二，没有。可能有一些古老或深奥的巫术可以做到这一点，但我不知道，而且我敢肯定它不会漂亮。第三个问题重述第一个问题。你用没有重新编程的条款削弱了自己。我们为什么从事这个职业？？要编码！！！如果当权者想要重新发明轮子，请微笑并为此收费。可能有一些古老或深奥的巫术可以做到这一点，但我不知道，而且我敢肯定它不会漂亮。第三个问题重述第一个问题。你用没有重新编程的条款削弱了自己。我们为什么从事这个职业？？要编码！！！如果当权者想要重新发明轮子，请微笑并为此收费。可能有一些古老或深奥的巫术可以做到这一点，但我不知道，而且我敢肯定它不会漂亮。第三个问题重述第一个问题。你用没有重新编程的条款削弱了自己。我们为什么从事这个职业？？要编码！！！如果当权者想要重新发明轮子，请微笑并为此收费。

# algorithm - 图着色和NP完整性

> ID：12023731
> 
> 赞同：0
> 
> 时间：2012-08-19T02:23:24.723
> 
> 标签：algorithm, graph, np-complete

我无法理解图形着色的 NP 完整性。

如果我假设使用 DFS 的贪婪着色策略（[http://en.wikipedia.org/wiki/Graph_coloring#Greedy_coloring](http://en.wikipedia.org/wiki/Graph_coloring#Greedy_coloring)），那么我似乎能够以最佳方式为图形着色。谁能帮我举个反例？

为了清楚起见，让所有节点都被着色为-1。为起始节点着色 1\. 继续进行 DFS 遍历，用尚未分配给其邻居的最小整数为每个节点着色。什么时候无法为图形优化着色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:27:29.073

DFS 贪婪着色在某些图表上肯定会失败。想出一个反例的方法是尝试写一个证明 DFS 将优化颜色。证明你不能开始工作的部分是提出反例的提示。

# accessibility - WAI-ARIA 认证

> ID：12023733
> 
> 赞同：1
> 
> 时间：2012-08-19T02:24:20.600
> 
> 标签：accessibility, w3c, wai-aria

是否有人可以获得 W3C 的[WAI-ARIA](http://www.w3.org/WAI/intro/aria.php)规范的信誉良好的认证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T02:18:40.017

我碰巧在无障碍咨询公司的博客上找到了这篇帖子，该帖子[要求对信息和通信技术无障碍专业人员进行某种专业认证](https://www.ssbbartgroup.com/blog/2012/02/13/the-ict-accessibility-industry-needs-a-professional-certification/)——这似乎意味着尚不存在。

如果有这样的事情，它可能会比 WAI-ARIA 的范围更广；ARIA 是一种用于特定场景的技术，只是更广泛的可访问性技术和问题的一部分。虽然某些页面可能需要 ARIA 才能使其可访问，但其他页面可能无需 ARIA 即可完全访问，而其他页面可能具有完美的 ARIA 实现，即使存在其他主要的可访问性问题 - 例如缺乏键盘支持或缺乏有意义的文档结构。

尽管 ARIA 规范相当稳定，但在浏览器和屏幕阅读器中的实现仍在不断发展，这也许也毫无价值。例如，在当前一代 JAWS 和 NVDA 中，每个规范都部分支持 aria-live，但不完全支持。这需要开发人员跟上当前的实现细节，并针对各种屏幕阅读器/浏览器组合进行测试。而且无论规范怎么说，最终都没有替代品可以进行实际测试以验证可访问性。所有这一切都使认证变得有些棘手，因为知识体系仍在发生变化。

--

至于资源；[WebAIM - Accessibility In Mind](http://webaim.org/)是一个很好的起点，涵盖了广泛的可访问性图片，并带有指向其他资源的链接。

# java - 是否有任何公开可用的 java 集合单元测试？

> ID：12023734
> 
> 赞同：12
> 
> 时间：2012-08-19T02:25:06.977
> 
> 标签：java, unit-testing, collections

我可以专门插入我的 Set 和 ListIterator 实现的测试。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T01:50:17.427

[Guava](http://guava-libraries.googlecode.com)有一组`TestSuiteBuilders`，共同为组件中的给定集合实现生成几百到几千个测试用例`guava-testlib`。例如，您可能会写类似

```
public static Test suite() {
  return SetTestSuiteBuilder.using(new TestStringSetGenerator() {
      @Override protected Set<String> create(String[] elements) {
         return ImmutableSet.copyOf(elements);
       }
    })
    .named("ImmutableSet");
    .withFeatures(CollectionSize.ANY, CollectionFeature.KNOWN_ORDER,
        CollectionFeature.SERIALIZABLE,
        CollectionFeature.ALLOWS_NULL_QUERIES)
    .createTestSuite();
} 
```

这为实现生成了一套完整的、*极其*详尽的测试用例`Set`。

它没有尽可能完整地记录，但它会给你一个*非常*详尽的测试套件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:38:21.337

[Hamcrest](http://code.google.com/p/hamcrest/)库提供了许多对集合进行单元测试的方法（例如，断言两个集合包含相同的元素等）。恕我直言，这几乎是用于此目的的行业标准。

# gnuplot - 带有误差线的 Gnuplot 条形图直方图

> ID：12023736
> 
> 赞同：10
> 
> 时间：2012-08-19T02:25:38.240
> 
> 标签：gnuplot, bar-chart

我想要我的基准测试的结果。我将两台虚拟机相互比较，得到以下形式的数据：

基准 VM1_TIME VM1_ERROR VM2_TIME VM2_ERROR

我想从这些数据中生成一个条形图，应该如下所示：

![Gnuplot 草图](../Images/f4fd994e027e5f555b49af442e0eb642.png)

有人可以提供如何执行此操作的代码吗？我知道这种请求是不受欢迎的，但我真的需要这个并用谷歌搜索了大约 2 个小时，但没有令人满意的结果。

在此先感谢，
斯文

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-19T16:13:16.487

好的，现在这就是我对 androverso 稍作改动的版本。

![结果图](../Images/257afc9b5131fb5dbcee9da10d5f78db.png)

使用此代码：

```
reset
fontsize = 12
set term postscript enhanced eps fontsize
set output "bargraph_solid_state.eps"
set style fill solid 1.00 border 0
set style histogram errorbars gap 2 lw 1
set style data histogram
set xtics rotate by -45
set grid ytics
set xlabel "Benchmarks"
set ylabel "Relative execution time vs. reference implementation"
set yrange [0:*]
set datafile separator ","
plot 'bm_analysis_results.dat' using 2:3:xtic(1) ti "Rapydo" linecolor rgb "#FF0000", \
'' using 4:5 ti "R reference implementation" lt 1 lc rgb "#00FF00" 
```

在这个数据上

```
sort, 2.5953, 0.0013, 1.0000, 0.0034
binary search, 2.8434, 0.0132, 1.0000, 0.0037
sqrt, 2.8675, 0.0022, 1.0000, 0.0079
arithmetic, 1.9187, 0.0020, 1.0000, 0.0036 
```

也许有人会发现这很有用。再次感谢，androverso！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T14:36:29.133

我曾经遇到过同样的问题。这是 gpl 文件中的代码，它应该会导致所需的结果：

```
设置 boxwidth 0.9
设置样式填充实心 1.00 边框 0
设置样式直方图误差条间隙 2 lw 1
设置样式数据直方图
设置 xtics 旋转 -45
设置酒吧 0.5

```

如果这对您不起作用，请查看指向“pastebin.com”的[此链接。](http://pastebin.com/exh3UB8G)

此致

# c++ - 缓慢移动的 3D 球体到 3D 三角形碰撞

> ID：12023737
> 
> 赞同：2
> 
> 时间：2012-08-19T02:25:47.850
> 
> 标签：c++, 3d, geometry, collision-detection

因此，我编写了这个函数来检查 3D 空间中三角形和球体类之间的碰撞。这些物体在它们应该碰撞的时候发生百万分之一的碰撞。我想知道是否有人可以仔细检查我的数学？我正在用 C++ 编写代码。我的三角形类有一个联合，您可以在其中使用 A、B 和 C 或 P0、P1 和 P2 访问顶点。使用的方法是从三角形创建一个平面并将球体的中心投影到平面上。完成此操作后，将根据三角形的三个平面边缘检查投影点。我一直在看这个！非常感谢任何和所有帮助。

```
// create the edges
float3 TriEdge0 = tVerts.m_P1 - tVerts.m_P0;// 0 -> 1
float3 TriEdge1 = tVerts.m_P2 - tVerts.m_P1;// 1 -> 2
float3 TriEdge2 = tVerts.m_P0 - tVerts.m_P2;// 2 -> 0
float3 TriPlaneNormal = TriEdge1.Cross(TriEdge2);

// normalize
TriPlaneNormal /= TriPlaneNormal.Magnitude();

float fTriPlaneOffset = tVerts.m_A.Dot(TriPlaneNormal);

// get vector from point on plane to sphere center
float3 TriToSphereCenter = pSphere->GetCenter() - tVerts.m_A;

// distance between the sphere and the triangle plane
float fDistanceToPlane = TriToSphereCenter.Dot(TriPlaneNormal);

// project the sphere's center onto the triangle plane
float3 ProjectionVector = TriPlaneNormal * -fDistanceToPlane;
float3 ProjectedSphereOnPlane = pSphere->GetCenter() + ProjectionVector;

// use the point in triangle test to see if the projected point is in the triangle
    // if it is, then it is the closest point between the shapes

float3 TriEdge0Normal = TriEdge0.Cross(TriPlaneNormal);
float fTriPlane0Offset = tVerts.m_P0.Dot(TriEdge0Normal);

float3 TriEdge1Normal = TriEdge1.Cross(TriPlaneNormal);
float fTriPlane1Offset = tVerts.m_P1.Dot(TriEdge1Normal);

float3 TriEdge2Normal = TriEdge2.Cross(TriPlaneNormal);
float fTriPlane2Offset = tVerts.m_P2.Dot(TriEdge2Normal);

float3 ClosestPointToSphere;
float PositionOfProjectedPoint0 = TriEdge0Normal.Dot(ProjectedSphereOnPlane) - fTriPlane0Offset;
float PositionOfProjectedPoint1 = TriEdge1Normal.Dot(ProjectedSphereOnPlane) - fTriPlane1Offset;
float PositionOfProjectedPoint2 = TriEdge2Normal.Dot(ProjectedSphereOnPlane) - fTriPlane2Offset;

// if the point is in the triangle, it is the closest point
if (PositionOfProjectedPoint0 < 0.0f && PositionOfProjectedPoint1 < 0.0f 
    && PositionOfProjectedPoint2 < 0.0f )
{
    ClosestPointToSphere = ProjectedSphereOnPlane;
}
else    // find the closest edge
{
    // check each edge to see if it is in front of the plane 
        // if so, it is the closest edge
    float3 StartPoint;
    float3 EndPoint;
    float3 LineNormal;
    float3 LineSegment;

    if(PositionOfProjectedPoint0 > 0.0f)        // edge 0
    {
        StartPoint = tVerts.m_P0;
        EndPoint = tVerts.m_P1;
        LineNormal = TriEdge0Normal;
        LineSegment = TriEdge0;
    }
    else if (PositionOfProjectedPoint1 > 0.0f)  // edge 1
    {
        StartPoint = tVerts.m_P1;
        EndPoint = tVerts.m_P2;
        LineNormal = TriEdge1Normal;
        LineSegment = TriEdge1;
    }
    else if (PositionOfProjectedPoint2 > 0.0f)  // edge 2
    {
        StartPoint = tVerts.m_P2;
        EndPoint = tVerts.m_P0;
        LineNormal = TriEdge2Normal;
        LineSegment = TriEdge2;
    }

    // calculate a vector between the test point and the start point
        // and scale it by the distance between them
    float3 LineToTestPoint = ClosestPointToSphere - StartPoint;
    float fDistance = LineNormal.Dot(LineToTestPoint);

    // limit the closest point on the line to the given segment
    if (fDistance < 0.0f)
    {
        ClosestPointToSphere = StartPoint;
    }
    else if (fDistance > LineSegment.Magnitude())
    {
        ClosestPointToSphere = EndPoint;
    }
    else    // closest point is within line segment
    {
        float3 ScaledNormal = LineToTestPoint * fDistance;
        ClosestPointToSphere = StartPoint + ScaledNormal;
    }
}

// distance test between the closest point and the sphere's radius
float fDistance = (pSphere->GetCenter() - ClosestPointToSphere).Dot(
    pSphere->GetCenter() - ClosestPointToSphere);

// if squared radius is less than the distance between the projected point and the sphere, 
    // there is collision
if (fDistance < pSphere->GetRadius() * pSphere->GetRadius())
{
    return true;
}

// triangle is not colliding
return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:47:34.633

查看 DirectX SDK 的碰撞示例中的 XNACollision.cpp。提供了此碰撞测试（以及许多其他）的源代码。另外，我刚刚注意到 DirectXCollisions.h 最近取代了 XNAMath.h 等。请参阅此处[http://msdn.microsoft.com/en-us/library/windows/desktop/ee418730(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418730(v=vs.85).aspx)

# c++ - 将内存分配给派生类的指针

> ID：12023740
> 
> 赞同：1
> 
> 时间：2012-08-19T02:26:56.887
> 
> 标签：c++, class, inheritance, pointers

我有基类“Actor”和派生类“Outlaw”

“Outlaw”曾经是它自己的基类，我可以使用代码轻松创建一个指针：

```
Outlaw * outlaw = new Outlaw(); 
```

现在“Outlaw”继承了基本类型“Actor”

我将如何编写新代码来创建指向 Outlaw 类的指针？我对 C++ 很陌生，但有丰富的 C 经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:30:23.317

完全一样。

但首先，也许你不需要动态分配的实例，也许你只需要一个变量。在那种情况下，只需声明一个变量，因为由于 C++ 中其他一切的速度，动态分配是昂贵的（一切都是相对的，动态分配相对于普通变量声明来说是昂贵的）。例如，

```
Outlaw outlaw;  // That's it! 
```

如果您确实需要动态分配，最好不要存储指针原始。

立即将其放入智能指针中，例如 a`std::shared_ptr`或 a `std::unique_ptr`：

```
std::unique_ptr<Outlaw> outlaw( new Outlaw() ); 
```

要使用提到的智能指针类，只需包含`<memory>`.

# node.js - 如何检查您的 node.js 应用程序的版本是否是最新的？

> ID：12023741
> 
> 赞同：1
> 
> 时间：2012-08-19T02:27:01.370
> 
> 标签：node.js

因为[我的 node.js 应用程序](https://github.com/bevry/docpad)是由用户直接运行的命令行应用程序。打电话给 github repo 并将其本地版本与 github repo 上的 master 分支上的最新版本进行比较是有意义的。如果版本过时，则向用户显示一条消息。

那么如何完成这款手机之家并比较版本呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T02:27:01.370

自己创建了一个解决方案来做到这一点。需要依赖[bal-util](https://github.com/balupton/bal-util) (so `npm install bal-util`)。这是代码：

该函数的源代码`packageCompare`可以在这里找到：[https ://github.com/balupton/bal-util/blob/master/src/lib/compare.coffee](https://github.com/balupton/bal-util/blob/master/src/lib/compare.coffee)

## 咖啡脚本

```
# Prepare
balUtil = require('bal-util')
pathUtil = require('path')
debug = false

# Compare
balUtil.packageCompare({
    local: pathUtil.join(__dirname, '..', 'package.json')
    remote: 'https://raw.github.com/bevry/docpad/master/package.json'
    newVersionCallback: (details) ->
        if debug
            console.log """
                There is a new version of #{details.local.name} available, you should probably upgrade...
                current version:  #{details.local.version}
                new version:      #{details.remote.version}
                grab it here:     #{details.remote.homepage}
                """
        else
            console.log "There is a new version of #{details.local.name} available"
}) 
```

## JavaScript

```
// Prepare
var balUtil, debug, pathUtil;
balUtil = require('bal-util');
pathUtil = require('path');
debug = false;

// Compare
balUtil.packageCompare({
  local: pathUtil.join(__dirname, '..', 'package.json'),
  remote: 'https://raw.github.com/bevry/docpad/master/package.json',
  newVersionCallback: function(details) {
    if (debug) {
      return console.log("There is a new version of " + details.local.name + " available, you should probably upgrade...\ncurrent version:  " + details.local.version + "\nnew version:      " + details.remote.version + "\ngrab it here:     " + details.remote.homepage);
    } else {
      return console.log("There is a new version of " + details.local.name + " available");
    }
  }
}); 
```

# ruby-on-rails - 无法在窗口上安装 gem

> ID：12023743
> 
> 赞同：0
> 
> 时间：2012-08-19T02:27:27.347
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

当我运行命令： gem bundle install 'twitter-bootstrap-rails' 结果是：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/therubyracer-0.10.1 for inspection.
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/therubyracer-0.10.1/ext/v8/gem_make.out
An error occured while installing therubyracer (0.10.1), and Bundler cannot continue 
```

谁能告诉我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:56:42.700

那个在windows上不行。如果我没记错的话，（twitter-bootstrap-rails）有一个“静态分支”，但它会让你很头疼。无论如何，Rails 在 Windows 上的性能极差，所以我建议你找一个 linux 主机。

# iphone - 在通过 Segue 之前显示活动指示器

> ID：12023749
> 
> 赞同：0
> 
> 时间：2012-08-19T02:29:04.017
> 
> 标签：iphone, objective-c, ios, xcode, ios4

好的，我的第一个控制器是一个 UITabel，当传递一个单元格时，它会推送到第二个视图控制器。第二个控制器从 web 服务加载数据，因此 segue 需要一点时间。我想在选择单元格时显示一个 SVProgressHUD，然后在加载数据后将其关闭，但 SVProgressHUD 在第二个视图加载后显示，并且只显示几毫秒。我现在使用这个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [SVProgressHUD show];
    UITableViewCell *acell = [tableView cellForRowAtIndexPath:indexPath];
    [self performSegueWithIdentifier:@"pushCell" sender:acell];
} 
```

选择单元格时，有什么方法可以立即显示 SVProgressHUD？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T02:53:07.350

Apple 建议当用户单击 tableViewCell 时，应用程序应立即转到下一个视图控制器。您觉得在加载下一个视图时需要显示 SVProgressHUD 的事实向我表明您正在使用同步方法请求数据，这将阻塞主线程并使其看起来您的应用程序在等待时已冻结回复。

检索数据的最佳做法是始终异步（或在后台线程上）执行此操作，以便您的应用始终保持响应。我建议将您的请求更改为异步方法（`initWithRequest:delegate:`例如，查看 NSURLRequest 方法）。如果您使用它，您可以在第二个控制器的 viewDidLoad 方法中显示 SVProgressHUD，当用户点击表格单元格时，将立即转换到第二个视图控制器，并且您的应用程序不会在用户等待时被锁定要下载的数据。

以下是[Apple 文档中有关此方法的更多信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

# jquery - 失去我的填充物

> ID：12023751
> 
> 赞同：0
> 
> 时间：2012-08-19T02:29:22.327
> 
> 标签：jquery, html, css

我有一个网站，在 google chrome 中一切正常，但在 IE 和 firefox 中，当浏览器调整到 800px 以下时，我会丢失内容填充。

[http://www.readysetpixel.net/about.html](http://www.readysetpixel.net/about.html) 是网址。如果您的屏幕高度大于 800 像素，它将在 20 像素的底部显示填充，但是当您调整屏幕大小时，IE 和 FireFox 只会忽略填充。

这会有什么原因吗？我尝试了很多不同的东西，我要疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T06:22:11.410

您可以尝试使用CSS`min-width`中的您或某些父选择器，例如；`body`

```
body{
  min-width: 800px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:45:19.467

问题是因为您明确将最大高度设置为 490px。如果您在定位设备时有这样的要求，则应该改用媒体查询。有使用的理由吗

```
<script type="text/javascript">
$(document).ready(function() {
   $(window).on('resize', function(){
     if ($(this).height() <= 800){
      $('.content').css('max-height', '490px'); //sets max-height
     } else{
      $('.content').css('max-height', ''); //deletes max-height
   }
 }).resize()
})
</script> 
```

在页面的底部。我还看到您没有元端口视图标签，因此显然也没有进行响应式设计。摆脱底部（上）的脚本，你应该被设置。

# emacs - Emacs 的 C 源文件的正确路径是什么？

> ID：12023752
> 
> 赞同：1
> 
> 时间：2012-08-19T02:29:33.457
> 
> 标签：emacs

所以，早在一月份，我就去了这里：

[http://emacsformacosx.com/](http://emacsformacosx.com/)

我下载了 Emacs 并一直在我的 Mac 上使用它，我喜欢它。我已经开始尝试进入 Elisp 编程。要了解更多信息，我想查找一些功能。所以例如我这样做：

```
C-h f 
```

然后输入“向下滚动”

这给了我以下文字：

```
>scroll-down is an interactive built-in function in `window.c'.
>
>It is bound to <kp-prior>, <prior>, C-1, C-x C-1, M-v.
>
>(scroll-down &optional ARG)
>
>Scroll text of selected window down ARG lines.
>If ARG is omitted or nil, scroll down by a near full screen.
>A near full screen is `next-screen-context-lines' less than a full screen.
>Negative ARG means scroll upward.
>If ARG is the atom `-', scroll upward by nearly full screen.
>When calling from a program, supply as argument a number, nil, or `-'. 
```

文本“window.c”是一个链接。所以我点击链接，我得到：

```
find-function-C-source: The C source file window.c is not available 
```

在做很多不同的事情时，我经常遇到这个错误。我在哪里可以找到正确的路径，以及如何告诉 Emacs 那条路径是什么？

我最近刚刚安装了一些 ELPA 包，所以也许其中一个包引起了一些混乱？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T07:17:47.630

该变量`source-directory`将指向 C 源所在的位置。如果您有单独下载的副本，则必须将此变量指向该目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T07:04:55.003

大多数打包者不包含源代码，或者将它们拆分为单独的包。安装源代码（如果它不是默认位置，可能会调整一个初始化脚本来告诉 Emacs 你把它们放在哪里。相关的变量是`find-function-C-source-directory`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T02:38:10.260

如果您没有从源代码手动构建 Emacs 并修补 C 源代码，则`source-directory`or的值`find-function-C-source-directory`将是错误的。

您可以手动下载 Emacs 源代码，将其解压缩并相应地设置上面的两个变量，如下所示

```
(setq source-directory "/path/to/your-emacs-repo")

;; OR

(setq find-function-C-source-directory "/path/to/your-emacs-repo/src") 
```

GNU Emacs 源代码和开发托管在[savannah.gnu.org](http://savannah.gnu.org/projects/emacs/)上。[您可以在此处](http://git.savannah.gnu.org/cgit/emacs.git/refs/tags)找到所有标签并下载与您的`M-x emacs-version`.

# optimization - 硬币或 clp 线性编程包的文档

> ID：12023756
> 
> 赞同：0
> 
> 时间：2012-08-19T02:29:58.263
> 
> 标签：optimization, linear-programming, simplex

我正在尝试使用/测试调用 coin-or clp 包的包`R`。`clpAPI`在谷歌上搜索了一下午后，我发现很难获得文件。使用它时，我发现了奇怪的错误，但无法解释原因。在我提出错误之前，我认为最好先将文档作为一般请求来请求。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T08:25:59.100

CLP wiki 的主页在[此处](https://projects.coin-or.org/Clp)。

在此页面上，您可以找到[CLP 用户指南](http://www.coin-or.org/Clp/userguide/index.html)的链接。在线 API 文档似乎通常无法访问，但如果您下载 CLP 源代码并安装了[Doxygen](http://www.doxygen.nl/)，您可以自己构建 API 文档。

# algorithm - 快速排序的最坏情况性能

> ID：12023760
> 
> 赞同：1
> 
> 时间：2012-08-19T02:30:49.047
> 
> 标签：algorithm, quicksort, asymptotic-complexity

我试图证明 Quicksort 算法的以下最坏情况，但遇到了一些麻烦。最初，我们有一个大小为 n 的数组，其中 n = ij。这个想法是，在快速排序的每个分区步骤中，您最终都会得到两个子数组，其中一个大小为 i，另一个大小为 i(j-1)。在这种情况下，i 是一个大于 0 的整数常数。我已经绘制了一些示例的递归树，并理解为什么这是最坏的情况，并且运行时间将是 theta(n^2)。为了证明这一点，我使用了迭代方法来求解递推方程：

```
T(n) = T(ij) = m if j = 1
T(n) = T(ij) = T(i) + T(i(j-1)) + cn if j > 1

T(i) = m
T(2i) = m + m + c*2i = 2m + 2ci
T(3i) = m + 2m + 2ci + 3ci = 3m + 5ci 
```

所以看起来复发是：

```
 j 
T(n) = jm + ci * sum k - 1 
                 k=1 
```

在这一点上，我有点不知道该怎么做。看起来如果展开，最后的总和将导致 j^2，但我需要证明它以某种方式等于 n^2。任何有关如何继续此操作的解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T10:05:10.070

请注意，快速排序算法最坏的情况是当您有两个大小为 0 和 n-1 的子问题时。在这种情况下，每个级别都有这个递归方程：

```
T(n)   = T(n-1) + T(0) < -- at first level of tree
T(n-1) = T(n-2) + T(0) < -- at second level of tree
T(n-2) = T(n-3) + T(0) < -- at third level of tree
.
.
. 
```

每个级别的成本总和是一个算术级数：

```
 n       n(n-1)
T(n) = sum k =  ------ ~ n^2 (for n -> +inf)
       k=1        2 
```

它是 O(n^2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:04:01.253

这是一个简单的数学问题。您正确计算的复杂性是

O(jm + ij^2)

你发现的是一个参数化的复杂性。标准 O(n^2) 包含在其中，如下所示 - 假设 i=1 你有一个标准的基本情况，所以 m=O(1) 因此 j=n 因此我们得到 O(n^2)。如果你把 ij=n 你会得到 O(nm/i+n^2/i) 。现在你应该记住的是 m 是 i 的函数，这取决于你将使用什么作为基本情况算法，因此 m=f(i) 因此你剩下 O(nf(i)/i + n^2/i ）。现在再次注意，由于没有用于一般排序的线性算法，因此 f(i) = omega(igi) 会给你 O(nlogi + n^2/i)。所以你只有一个自由度，就是 i。检查对于 i 的任何值，您不能将其降低到 nlogn 以下，这是基于比较的最佳界限。

现在我感到困惑的是，您正在做一些快速排序的最坏情况分析。这不是它的做法。当您说最坏情况时，这意味着您正在使用随机化，在这种情况下，最坏情况将始终是 i=1 时，因此最坏情况界限将是 O(n^2)。R. Motwani 和 Raghavan 在随机算法书中解释了一种优雅的方法，如果你是程序员，那么你可以看看 Cormen。

# iframe - 如何从倒计时生成器获得的倒计时 iframe 代码中删除超链接

> ID：12023761
> 
> 赞同：0
> 
> 时间：2012-08-19T02:31:00.730
> 
> 标签：iframe, timer, countdown

我在这个网站上做了这个倒计时： [http ://www.timeanddate.com/clocks/freecountdown.html](http://www.timeanddate.com/clocks/freecountdown.html)

他们给了我 iframe 链接把它放在我的网站上，它是完美的，唯一不专业的就是超链接到他们的免费生成器，代码是 iframe，我不是这方面的专家并且从我读过的内容来看，您无法将其转换为 html，但我该怎么做呢？这是我制作的倒计时脚本的代码：

```
<iframe src="http://free.timeanddate.com/countdown/i38wb1iy/n240/cf12/cm0/cu4/ct0/cs0/ca0/cr0/ss0/cac000/cpc000/pcfff/tcfff/fs100/szw320/szh135/tatTime%20left%20to%20Event%20in/tac000/tptTime%20since%20Event%20started%20in/tpc000/mac000/mpc000/iso2012-08-20T00:00:00" frameborder="0" width="175" height="66"></iframe> 
```

iframe代码的来源链接到这个页面： http: [//free.timeanddate.com/countdown/i38wb1iy/n240/cf12/cm0/cu4/ct0/cs0/ca0/cr0/ss0/cac000/cpc000/pcfff/tcfff /fs100/szw320/szh135/tatTime%20left%20to%20Event%20in/tac000/tptTime%20since%20Event%20started%20in/tpc000/mac000/mpc000/iso2012-08-20T00:00:00](http://free.timeanddate.com/countdown/i38wb1iy/n240/cf12/cm0/cu4/ct0/cs0/ca0/cr0/ss0/cac000/cpc000/pcfff/tcfff/fs100/szw320/szh135/tatTime%20left%20to%20Event%20in/tac000/tptTime%20since%20Event%20started%20in/tpc000/mac000/mpc000/iso2012-08-20T00:00:00)

这显示了倒计时，但我似乎仍然无法找到一种方法来删除超链接或以我自己的方式使用代码。

如果有人可以帮助我并告诉我如何使用此 iframe 脚本或能够创建完全相同的倒计时，因为它不应该那么难（看起来很简单），我们将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:49:43.820

iframe 的概念是“网页中的网页”。因此，如果您使用 iframe，您实际上嵌入了第三方代码。此外 - 试图删除链接可能会违反他们的使用条款。

在 javascript 中创建自己的倒计时并不困难，并且对于新手编码员来说是一个很好的练习。请查看日期参考：

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

请注意，如果你减去两个日期，你会得到这些日期的毫秒增量。使用模数和除法运算符，您可以将其转换为年/月/日。然后使用例如 jQuery 方法：

[http://api.jquery.com/category/manipulation/](http://api.jquery.com/category/manipulation/)

在您的页面上执行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T15:16:44.370

这很简单。通过dream Weaver 选择完整的iframe 并向下添加您的索引页面链接，这样如果有人从您的主页点击计时器，它就不会转移。您将保留在您的主页中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-05T18:23:40.700

添加以下CSS

```
iframe{
 pointer-events: none;
} 
```

如果这不起作用，请尝试在 iframe 标记中添加类或 id。

# cocoa-touch - MKAnnotation 和 setCoordinate：

> ID：12023766
> 
> 赞同：7
> 
> 时间：2012-08-19T02:32:07.977
> 
> 标签：cocoa-touch, mkannotation

我有一个符合 MKAnnotation 协议的自定义类。这个类的一个实例由一个 viewController 持有，还有一个 MKMapView 类型的对象，称为`_mapView`. 我已将 viewController 设置为 _mapView 的委托。在我声明的自定义类接口中：

```
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate; 
```

因为它是 MKAnnotation 协议所要求的。我也在`@synthesize`同一个类的实现中。但是，当我从 viewController 发送以下消息时：

```
[_mapView addAnnotation:myCustomClass]; 
```

我收到一个错误：

```
<NSInvalidArgumentException> -[myCustomClass setCoordinate:]: unrecognized selector sent to instance 0x1479e0 
```

如果我进入我的自定义类的实现文件并定义

```
- (void) setCoordinate:(CLLocationCoordinate2D)newCoordinate
{
    coordinate = newCoordinate;
} 
```

然后注释成功添加到地图中。

不`@synthesize coordinate;`应该照顾`setCoordinate:`方法吗？我必须既`@synthesize`要坐标又要编写`(void) setCoordinate:`方法，这似乎很奇怪。

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T02:58:08.843

当你说

```
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate; 
```

“只读”是告诉编译器只为您的属性创建一个 getter 方法，而不是一个 setter 方法。

由于 CLLocationCoordinate2D 是 C 结构而不是对象，因此您可以使用：

```
@property (nonatomic, assign) CLLocationCoordinate2D coordinate; 
```

如果您希望编译器自动创建 getter 和 setter。

# javascript - 内容安全策略错误，没有任何内联 javascript

> ID：12023768
> 
> 赞同：2
> 
> 时间：2012-08-19T02:33:24.653
> 
> 标签：javascript, google-chrome-extension, content-security-policy

当我尝试加载我的 chrome 扩展时，我一直看到这个错误：

`Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' https://ajax.googleapis.com".`

这是我**manifest.json**的一部分：

```
...

 "background": {
 "scripts": ["launcher.js"]
     },
"options_page": "options.html",
"content_security_policy": "script-src 'self' https://ajax.googleapis.com; object-src 'self'",
"permissions": [
"tabs", "notifications", "http://*/*", "https://*/*"

... 
```

在我的整个 javascript 中，我只与[https://ajax.googleapis.com](https://ajax.googleapis.com)通信，并且我已经确保使用**Inspect views的****Network**选项卡。

 **而且我已经验证了我所有的 javascript 代码都只位于我的**.js**文件中。（是的，我在必要时使用**addEventListener() 。**

有什么建议么？

**更新：**显示导致错误的代码（由 Rob 询问）这是我与任何服务器通信的唯一地方：

```
....
$.ajax({
        type: "get",
        url: "https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=" + storyCount + "&callback=?",
        data: {
                q: link,
                output: "json_xml"
             },
        async: false,
        dataType: "json",
        success: function (data) {
             if (data.responseStatus == 200) {
                //process JSON
              }
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:28:45.933

随着从 Manifest Version 1 到 2 的更改。Chrome 扩展程序不允许您使用内联 javascript。您需要将所有 javascript 放在 .JS 文件中，并将其包含在 html 页面中。

同时删除所有 onclick、onchange、onsubmit 到 eventlistner 事件。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T08:41:39.097

此错误消息与您对其他服务器的请求无关 - 它与内联脚本有关。如果您没有任何内联脚本，那么很可能会出现它，因为您在某处通过 或类似方式动态创建`eval()`代码`new Function()`。例如，如果 jQuery 没有找到`JSON.parse()`方法，它会解析 JSON（但是在 Chrome 中这个方法通常应该可用）。根据您在此处提供的信息，无法判断哪个代码对错误负责。

无论如何，您绝对不应该像[Rob W](https://stackoverflow.com/users/938089/rob-w)在评论中正确指出的那样使用 JSONP。JSONP 将在您的扩展上下文中从远程服务器执行代码，这本质上是不安全的——理论上它只会调用回调，但实际上它也可能做一些恶意的事情。您应该改用 JSON（正在下载和解析数据，不执行远程代码）并`ajax.googleapis.com`从您的内容安全策略中删除。**

# android - 波斯语在 Android 上可用吗？

> ID：12023769
> 
> 赞同：1
> 
> 时间：2012-08-19T02:33:34.637
> 
> 标签：android, localization, persian, farsi

> **可能重复：**
> [如何在 Android 中支持阿拉伯语文本？](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android)

我正在考虑将我的 Android 应用程序本地化到波斯语（伊朗），它似乎正在获得一些下载。但我想知道安卓手机是否支持波斯语？

IE，伊朗人是否将他们的电话语言设置为波斯语？

# html-table - 隐藏表格中的空单元格

> ID：12023771
> 
> 赞同：10
> 
> 时间：2012-08-19T02:33:39.370
> 
> 标签：html-table, hide, cells

我想隐藏表格中的空单元格。这是我的代码：

```
$(function() {
  $(".empty").each(hideCellIfEmpty);
});

function hideCellIfEmpty() {
  var theCell = $(this);
  if (theCell.html().length == 0) {
    hideSoft(theCell);
  }
}

function hideSoft(jQElement) {
  jqElement.css('visibility', 'hidden');
}
```

```
table.empty {
  width: 350px;
  border-collapse: collapse;
  empty-cells: hide;
}
td.empty {
  border-style: solid;
  border-width: 1px;
  border-color: blue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<table class="empty">
  <tr>
    <th></th>
    <th>Title one</th>
    <th>Title two</th>
  </tr>
  <tr>
    <th>Row Title</th>
    <td class="empty">value</td>
    <td class="empty">value</td>
  </tr>
  <tr>
    <th>Row Title</th>
    <td class="empty">value</td>
    <td class="empty"></td>
  </tr>
</table>
```

您可以看到，空单元格显示在第二行。但我想隐藏它。此外，我不想使用`border-collapse:separate`. 这可以使用隐藏空单元格`border-collapse:collapse`吗？我也想知道为什么这显示空单元格。

PS Using`border-collapse: separate`正在工作并且不显示空单元格。

```
$(function() {
  $(".empty").each(hideCellIfEmpty);
});

function hideCellIfEmpty() {
  var theCell = $(this);
  if (theCell.html().length == 0) {
    hideSoft(theCell);
  }
}

function hideSoft(jQElement) {
  jqElement.css('visibility', 'hidden');
}
```

```
table.empty {
  width: 350px;
  border-collapse: separate;
  empty-cells: hide;
}
td.empty {
  border-style: solid;
  border-width: 1px;
  border-color: blue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<table class="empty">
  <tr>
    <th></th>
    <th>Title one</th>
    <th>Title two</th>
    <th>Title three</th>
  </tr>
  <tr>
    <th>Row Title</th>
    <td class="empty">value</td>
    <td class="empty">value</td>
    <td class="empty">value</td>
  </tr>
  <tr>
    <th>Row Title</th>
    <td class="empty">value</td>
    <td class="empty"></td>
    <td class="empty">value</td>
  </tr>
</table>
```

但这并不能回答这些问题：

1.  为什么使用时会显示空单元格`border-collapse: collapse`？

2.  为什么使用时不显示空单元格`border-collapse: separate`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-06-04T19:41:32.460

如果您的网站不需要支持 IE 8 及以下版本，您可以使用 CSS`:empty`伪类：

```
td:empty {
  visibility: hidden;
} 
```

```
table.empty {
  width: 350px;
  border-collapse: collapse;
  empty-cells: hide;
}
td.empty {
  border-style: solid;
  border-width: 1px;
  border-color: blue;
}
td:empty {
  visibility: hidden;
}
```

```
<table class="empty">
  <tr>
    <th></th>
    <th>Title one</th>
    <th>Title two</th>
  </tr>
  <tr>
    <th>Row Title</th>
    <td class="empty">value</td>
    <td class="empty">value</td>
  </tr>
  <tr>
    <th>Row Title</th>
    <td class="empty">value</td>
    <td class="empty"></td>
  </tr>
</table>
```

有关`:empty`伪类的更多信息，请参见[https://developer.mozilla.org/en-US/docs/Web/CSS/:empty](https://developer.mozilla.org/en-US/docs/Web/CSS/:empty)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:44:01.667

尝试[*以下*](http://jsfiddle.net/Snkb9/3/)

```
<style type="text/css">
table.empty{
    width:350px;
    border-collapse: collapse;
    empty-cells:hide;
}
td.normal{
    border-style:solid;
    border-width:1px;
    border-color: blue;
}   
td.empty{      
    style:'display=none'
} 
```

* * *

```
</style>
<table >
<tr>
<th></th>
<th>Title one</th>
<th>Title two</th>
</tr>
<tr>
<th>Row Title</th>
<td class="normal">value</td>
<td class="normal">value</td>
</tr>
<tr>
<th>Row Title</th>
<td class="normal">value</td>
<td class="empty"></td>
</tr>
</table>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T03:20:42.417

假设你想隐藏的所有单元格都有类 '.empty()' 我想出了这段 jQuery：

```
$(function(){
    $(".empty").each(hideCellIfEmpty);
});

function hideCellIfEmpty(){
    var theCell = $(this);
    if(theCell.html().length == 0){
        theCell.hide();
    }           
}​ 
```

aaaaand ......[它似乎工作](http://jsfiddle.net/ffw7U/)。:)

但是，如果您尝试制作甜甜圈形状，`hide()`则不会保留空间，您会遇到[此问题。](http://jsfiddle.net/ZXaGP/)
幸运的是，还有[另一个问题](https://stackoverflow.com/q/6393632/1063730)在讨论这个问题，答案是使用

```
css('visibility','hidden') 
```

女巫你也可以在[这个小提琴](http://jsfiddle.net/ZXaGP/3/)中找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-18T05:30:51.410

我在我正在阅读的一篇好文章中找到[了这个解决方案。](http://www.sitepoint.com/12-little-known-css-facts)

我希望它也对你有用：

```
table {
   empty-cells: hide;
} 
```

最好的祝福！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-02T07:20:55.213

刚刚使用CSS： `empty-cells: hide;`

**支持的浏览器**：[经过验证的链接](https://css-tricks.com/almanac/properties/e/empty-cells/)或[链接 2](https://developer.mozilla.org/en/docs/Web/CSS/empty-cells)

```
table { 
    border-collapse: separate;
    empty-cells: hide;
} 
```

**注意：**你不能使用`border-collapse: collapse;`，因为它使**禁用** **看起来**空单元格隐藏

```
/******Call-Padding**********/

table { 
  /***
  border-collapse: collapse; #Not use it     ***/
    border-collapse: separate;
    empty-cells: hide;
}

td { 
  border: 1px solid red;
  padding: 10px;
}
```

```
 <table>
		<tr>
			<th>Head1 </th>
			<th>Head2 </th>
			<th>Head3 </th>
			<th>Head4 </th>
		</tr>
		<tr>
			<td>11</td>
			<td>12</td>
			<td>13</td>
			<td>14</td>
		</tr>
		<tr>
			<td>15</td>
			<td>16</td>
			<td></td>
			<td>18</td>
		</tr>
		<tr> 
			<td>19</td>
			<td></td>
			<td>21</td>
			<td>22</td>
		</tr>
		<tr>
			<td></td>
			<td>24</td>
			<td>25</td>
			<td>26</td>
		</tr>
	</table>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-11-04T08:58:21.940

这是另一个解决方案，因为`td:empty`对我不起作用：

```
<style type="text/css">
    table {
        border-spacing: 0px; // removes spaces between empty cells
        border: 1px solid black;
    }
    tr, td {
        border-style: none; // see note below
        padding: 0px; // removes spaces between empty cells
        line-height: 2em; // give the text some space inside its cell
        height: 0px; // set the size of empty cells to 0
    }
</style> 
```

给定的代码将完全删除空行将占用的任何空间。不幸的是，您必须设置`border-style: none;`，否则无论如何都会绘制空单元格的边框（这会导致粗线）。

# python - Python 3.3 源代码设置：未找到模块：_lzma _sqlite3 _tkinter

> ID：12023773
> 
> 赞同：14
> 
> 时间：2012-08-19T02:34:22.623
> 
> 标签：python, python-3.3

我正在尝试按照 python 开发人员指南在 Ubuntu 12.04 上设置 CPython 的编译版本。即使在安装了依赖包 lzma 和 sqlite3 之后，构建也会失败，表明未找到依赖模块。 *确切的错误：*

*Python 构建完成，但未找到构建这些模块的必要位：_lzma _sqlite3 _tkinter
要找到必要的位，请在 setup.py 中的 detect_modules() 中查找模块名称。*

我找不到包 tkinter。感谢任何帮助。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T06:35:51.687

在我的 Ubuntu Precise 机器上安装以下软件包后，我`Python 3.3`无需修改即可构建。`setup.py`

```
build-essential 
zlib1g-dev 
libbz2-dev 
libncurses5-dev 
libreadline6-dev 
libsqlite3-dev 
libssl-dev 
libgdbm-dev
liblzma-dev
tk8.5-dev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:50:08.777

找不到 lzma 和 sqlite3 可能是因为您的路径（特别是 LD_LIBRARY_PATH）不正确。你是如何安装这两个包的；你用过包管理器吗？如果您手动安装，您在哪里安装它们？另外，如果您使用包管理器安装 lzma 和 sqlite3，您是否安装了*开发版本？*从源代码安装时，您需要开发版本，因此 Python 的源代码可以找到必要的包含文件。

此外，您可能必须进行编辑`setup.py`以指示可以找到这些包的位置。

至于 tkinter：这依赖于 tcl/tk，因此如果您从源代码安装 python/tkinter，请检查您是否安装了这些软件包的开发版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T10:51:45.947

这对我有用（Python 3.4，Ubuntu 13.04）意味着“make”干净地完成：

```
sudo apt-get install build-essential python-dev libncurses*-dev \
                     liblzma-dev libgdbm-dev libsqlite3-dev \
                     libbz2-dev tk-dev 
```

安装：

```
cd python3.4
make clean && ./configure && make && sudo make install 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-03T11:04:20.520

通常，请参阅[Python 开发人员指南](https://devguide.python.org/setup/#install-dependencies)了解依赖项。那里说：

“如果要构建所有可选模块，请安装以下软件包及其依赖项”：

```
sudo apt-get install build-essential gdb lcov pkg-config \
  libbz2-dev libffi-dev libgdbm-dev libgdbm-compat-dev liblzma-dev \
  libncurses5-dev libreadline6-dev libsqlite3-dev libssl-dev \
  lzma lzma-dev tk-dev uuid-dev zlib1g-dev 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-17T00:30:09.623

2021 年，在 Ubuntu 20.04 上遇到了一些困难（以防有人来到这里寻找更新的指令集）。发现这篇文章非常有用：

[https://linoxide.com/ubuntu-how-to/install-python-3-9-on-ubuntu-20-04-lts/](https://linoxide.com/ubuntu-how-to/install-python-3-9-on-ubuntu-20-04-lts/)

在 Ubuntu 上，您可以安装依赖项，`apt`因此只需知道哪个。我使用的构建命令如下：

```
# Update repo, very important on fresh server install
apt update
# Install dependencies
apt install gcc build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev
# Configure with optimizations
./configure --enable-optimizations
make -j 4 # 4 cores
make test # Shows you anything you missed
# https://docs.python.org/3/using/unix.html#building-python 
make altinstall 
```

我选择不安装`sqlite`或`tkinter`因为我不需要它们，但过程是相同的。只需包括在@simp76 的答案中找到的那些依赖项。

我刚刚在 DO droplet 上全新安装 Ubuntu 20.04 上运行了这个过程，它运行完美。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-20T06:28:52.693

我在这里使用了说明： [python-on-debian-wheezy](http://www.extellisys.com/articles/python-on-debian-wheezy)

但我还必须安装未在此处列出的 tk-dev。

# dependency-injection - 将 Facebook JS SDK 注入 AngularJS 控制器

> ID：12023774
> 
> 赞同：13
> 
> 时间：2012-08-19T02:34:23.120
> 
> 标签：dependency-injection, facebook-javascript-sdk, angularjs

我正在尝试为 Angular 创建一个 facebook 服务，以便我可以更轻松地测试需要使用 Facebook JS SDK 和 Graph API 的代码。

这是我到目前为止所拥有的：

```
app.factory('facebook', function() {
    return FB;
});

window.fbAsyncInit = function () {
    FB.init({
        appId: 'SOME_APP_ID_HERE', // App ID
        status: true, // check login status
        cookie: true, // enable cookies to allow the server to access the session
        xfbml: true,  // parse XFBML
        oauth: true
    });
};

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
})(document); 
```

现在，我知道实际的 Facebook SDK 部分正在工作......但在我的控制器中，引用始终为空。

在我的控制器中，我只有这样的东西：

```
function FooCtrl($scope, facebook) {
    facebook.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            // do something
        } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
        } else {
            // the user isn't logged in to Facebook.
        }
    });
} 
```

Angular 然后抱怨它找不到 facebookProvider。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T23:18:59.143

用数组括号括起来你的工厂函数，如下所示

```
app.factory('facebook', [function() {
    return FB;
}]); 
```

API 文档不够清晰。具有数组括号的要点是您可以指定依赖项。它将在使用 AUTO.$inject 创建您的服务时注入。但是由于您没有依赖项，它将跳过该任务:)

无论如何，如果您需要依赖项，您可以像这样请求它们

```
app.factory('facebook', ["$log", function($someCrazyLoggerService){
    $someCrazyLoggerService.log("I'm Auto Injected crazy Logger");
}]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T13:17:34.190

你应该看看我写的这个 Facebook 模块。

首先在您的应用程序配置调用中使用 FacebookProvider，例如 FacebookProvider.init('yourFacebookAppIdHere');，您还可以配置其他设置，然后在您的控制器上使用 Facebook 服务并异步注册事件和调用方法；​​）

[https://github.com/ciul/angularjs-facebook](https://github.com/ciul/angularjs-facebook)

# python - Is there a str.split equivalent for lists in Python?

> ID：12023775
> 
> 赞同：5
> 
> 时间：2012-08-19T02:34:29.533
> 
> 标签：python, string, list

If I have a string, I can split it up around whitespace with the `str.split` method:

```
"hello world!".split() 
```

returns

```
['hello', 'world!'] 
```

If I have a list like

```
['hey', 1, None, 2.0, 'string', 'another string', None, 3.0] 
```

Is there a split method that will split around `None` and give me

```
[['hey', 1], [2.0, 'string', 'another string'], [3.0]] 
```

If there is no built-in method, what would be the most Pythonic/elegant way to do it?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T02:42:02.443

A concise solution can be produced using itertools:

```
groups = []
for k,g in itertools.groupby(input_list, lambda x: x is not None):
    if k:
        groups.append(list(g)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T03:06:26.397

import `itertools.groupby`, then:

```
list(list(g) for k,g in groupby(inputList, lambda x: x!=None) if k) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T02:37:40.850

There is not a built-in way to do this. Here's one possible implementation:

```
def split_list_by_none(a_list):
    result = []
    current_set = []
    for item in a_list:
        if item is None:
            result.append(current_set)
            current_set = []
        else:
            current_set.append(item)
    result.append(current_set)
    return result 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T02:38:04.377

```
# Practicality beats purity
final = []
row = []
for el in the_list:
    if el is None:
        if row:
            final.append(row)
        row = []
        continue
    row.append(el) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T03:03:18.660

```
def splitNone(toSplit:[]):
    try:
        first = toSplit.index(None)
        yield toSplit[:first]
        for x in splitNone(toSplit[first+1:]):
            yield x
    except ValueError:
        yield toSplit 
```

```
>>> list(splitNone(['hey', 1, None, 2.0, 'string', 'another string', None, 3.0]))
[['hey', 1], [2.0, 'string', 'another string'], [3.0]] 
```

# python - 在 osx-MountainLion 上安装 p4python 时出错

> ID：12023777
> 
> 赞同：2
> 
> 时间：2012-08-19T02:35:21.407
> 
> 标签：python, osx-mountain-lion, p4python

我有 Python 版本：Python 2.7.3 (v2.7.3:70274d53c1dd, Apr 9 2012, 20:52:43) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin

[从http://www.perforce.com/product/components/apis#p4python](http://www.perforce.com/product/components/apis#p4python)下载 p4python

```
tar -zxvf ./p4python.tgz 
```

[从ftp://ftp.perforce.com/perforce/r12.1/bin.darwin90x86_64](ftp://ftp.perforce.com/perforce/r12.1/bin.darwin90x86_64)下载 p4api

```
tar -zxvf ./p4api.tgz 
```

将提取的文件放入 p4python 目录

然后我运行：

```
sudo python ./setup.py build --apidir ./p4api 
```

我收到以下错误：

```
API Release 2012.1
Traceback (most recent call last):
  File "./setup.py", line 434, in <module>
    do_setup(p4_api_dir, ssl)
  File "./setup.py", line 349, in do_setup
    info = PlatformInfo(apiVersion, releaseVersion, ssl != None)
  File "./setup.py", line 279, in __init__
    self.ID_OS = self.inStr(unix + release + platform)
UnboundLocalError: local variable 'release' referenced before assignment 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:10:05.497

编辑 setup.py，更改如下：

```
elif unameOut[2][0:2] in ("10", "11") : 
```

到

```
elif unameOut[2][0:2] in ("10", "11", "12") : 
```

因为`uname -a`我们在山狮上得到了 12.10

```
Darwin csjteki-MacBook-Pro.local 12.1.0 Darwin Kernel Version 12.1.0: Tue Aug 14 13:29:55 PDT 2012; root:xnu-2050.9.2~1/RELEASE_X86_64 x86_64 
```

# javascript - 获取不同元素的索引

> ID：12023779
> 
> 赞同：2
> 
> 时间：2012-08-19T02:36:55.390
> 
> 标签：javascript, jquery, jquery-selectors

我想获取具有单击锚点 id 的 div 的索引：

```
<ul>
    <li><a href="#div1">Div 1</a></li>
    <li><a href="#div2">Div 2</a></li>
    <li><a href="#div3">Div 3</a></li>
</ul>
<div class="foo">
    <div id="div1"></div>
    <div id="div2"></div>
    <div id="div3"></div>
</div> 
```

所以，如果我点击`Div 1`我想获取`.foo #div1`索引，但我不能自己这样做。

我试过了：

```
$('ul li a').click(function() {
    var target = $(this).attr('href');

    // $(target).index();
    // $('.foo').index(target);
}) 
```

谢谢 =)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T02:42:12.563

您可以在 .foo 中使用与单击的索引相同的索引获取相应的 div：

```
$('ul a').click(function() {
    // get the index of the item that was clicked
    var index = $(this).closest("li").index();
    // find that same index in .foo
    var target = $(".foo > div").eq(index);
}) 
```

或者，如果你想使用 href，你可以这样做：

```
$('ul a').click(function() {
    // use getAttribute so we don't get a fully qualified URL
    var target = $(this.getAttribute("href"));
}) 
```

或者，另一种使用完全限定 URL 的方法：

```
$('ul a').click(function() {
    var target = $(this.href.replace(/^.*#/, "#"));
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:40:51.973

您错误地指定了 ID 属性。

从属性中丢失哈希符号`id`，但不是从属性中丢失`href`。然后您的第二次尝试将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T02:45:10.637

稍微整理了一下：

```
$(function() {
    $('li a').on('click', function() {
        var target = $(this).attr('href');
        $('.foo ' + target).html('hello');
    });
}); 
```

我将事件处理程序直接`a`放在`li`. 我还使用`on()`了 1.7 中引入的 jQuery 方法，这是事件处理程序的首选方法。

然后：

```
<ul>
    <li><a href="#div1">Div 1</a></li>
    <li><a href="#div2">Div 2</a></li>
    <li><a href="#div3">Div 3</a></li>
</ul>
<div class="foo">
    <div id="div1"></div>
    <div id="div2"></div>
    <div id="div3"></div>
</div> 
```

要获取单击项目的索引：

```
$('.foo ' + target).index(); 
```

jsFiddle 示例：http: [//jsfiddle.net/DNfYg/](http://jsfiddle.net/DNfYg/)

# java - 读取输入流的方法适用于 HTTP，也适用于 SSL，但会引发异常。有不同的终结符字符吗？

> ID：12023780
> 
> 赞同：0
> 
> 时间：2012-08-19T02:36:57.467
> 
> 标签：java, ssl

```
public void getInput(InputStream input)  {
        String inputLine = null;
        BufferedReader in = new BufferedReader(new InputStreamReader(input));
        StringBuilder sb = new StringBuilder();
        while (!(inputLine = in.readLine()).equals("")) {
            sb.append(inputLine + "\r\n");
        }
        System.out.println(sb.toString());
    } 
```

这适用于 HTTP，我可以准备好客户端输入并且永远不会看到异常。我已经添加了 SSL 支持，我仍然在 SSL 请求中获得所有客户端输入，但是该方法总是抛出异常，我需要测试 EOF 的不同方法吗？

# android - 如何更新 android 短信对话线程？

> ID：12023782
> 
> 赞同：0
> 
> 时间：2012-08-19T02:37:31.370
> 
> 标签：android, sms, android-contentresolver

我想使用以下内容更新短信对话线程的“message_count”列和“snippet”列：“content://mms-sms/conversations”。因为从对话线程中删除 SMS 时，片段和消息计数不会更新。但我收到此错误消息：“MmsSmsProvider 不支持此 URI 的删除、插入或更新”下面是我的代码：

```
ContentValues values = new ContentValues();
values.put("message_count", ent.getValue().getCount());
values.put("snippet", ent.getValue().getSnip());

Uri conUri = Uri.parse("content://mms-sms/conversations");
getContentResolver().update(conUri, values, null, null); 
```

我也尝试这样：

```
Uri conUri = Uri.parse("content://mms-sms/conversations" + "/" + threadid);
getContentResolver().update(conUri, values, null, null); 
```

但是我得到的是另一个错误消息：没有这样的列： message_count: ，编译时： UPDATE pdu SET message_count=?,snippet=? 哪里 thread_id=334

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T18:02:20.813

无法直接更新线程的计数、片段等。但我可以帮助你解决你的实际问题。android代码中实际上存在一个错误，这是您问题的根源。当您尝试通过以下方式删除时 -

```
getContentResolver().delete("content://sms/", "_id=?", new String[] {id}); 
```

Android 不会更新与该短信关联的线程。

解决方案是这样做

```
getContentResolver().delete("content://sms/" + id, null, null); 
```

对于那些好奇这个错误是什么的人——当你使用方法 1 删除时，Android 代码会做一些愚蠢的事情——

1.  删除查询给出的所有消息。
2.  获取与查询给出的消息相关联的所有对话线程并更新它们。哇哇？！步骤 1 刚刚删除了查询给出的消息，因此，步骤 2 总是会为与这些消息关联的线程返回一个空集，因为所有消息都已被删除。

希望这可以帮助。

# java - 谷歌地图上的安卓强制关闭

> ID：12023786
> 
> 赞同：0
> 
> 时间：2012-08-19T02:38:32.420
> 
> 标签：java, android, android-listview

我正在尝试在 Android 屏幕上显示`Google Map`，`Top Half`而在`Bottom Half`我正在尝试创建`List View dynamically`.

**问题陈述：-**

但是每当我尝试运行下面的程序时，我的应用程序总是会得到`forced closed.`

我总是得到的例外是-

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testproject/com.example.testproject.MyTwoListItemsActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class com.google.android.maps.MapView 
```

下面是我的代码-

```
public class MyTwoListItemsActivity extends ListActivity {
private ListView mListView;
private MapView mapView;
private MapController mapController;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mapView = (MapView) findViewById(R.id.mapView);
    mListView = (ListView) findViewById(R.id.mylist);
    mapView.setStreetView(true);
    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(15);

    ArrayList<Map<String, String>> list = buildData();
    String[] from = { "name", "purpose" };
    int[] to = { android.R.id.text1, android.R.id.text2 };

    SimpleAdapter adapter = new SimpleAdapter(this, list,
            android.R.layout.simple_list_item_2, from, to);
    mListView.setAdapter(adapter);
}

private ArrayList<Map<String, String>> buildData() {
    ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
    list.add(putData("Android", "Mobile"));
    list.add(putData("Windows7", "Windows7"));
    list.add(putData("iPhone", "iPhone"));
    return list;
}

private HashMap<String, String> putData(String name, String purpose) {
    HashMap<String, String> item = new HashMap<String, String>();
    item.put("name", name);
    item.put("purpose", purpose);
    return item;
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    String item = (String) getListAdapter().getItem(position);
    Toast.makeText(this, item + " selected", Toast.LENGTH_LONG).show();
}

} 
```

这是我的 XML 文件-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:apiKey="0s_fADEBtq0-j_teQ1j-yaoDAivoHHtwN81rJ-g"
        android:clickable="true"
        android:state_enabled="true" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <ListView
            android:id="@+id/mylist"
            android:layout_width="164dp"
            android:layout_height="142dp"
            android:layout_weight="0.33" >
        </ListView>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T02:57:35.360

Google MapView 总是需要使用 MapActivity。您可以使用不带 ListActivity 的 ListView 来实现带有地图的列表的目标。

编辑：

请参阅 SO 问题：[没有 ListActivity 的 ListView](https://stackoverflow.com/questions/6698731/listview-without-listactivity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T02:58:28.267

所以Android有这个规则，基本上是这样的：

```
MapViews can only be created inside instances of MapActivity 
```

我确定必须在您的 logcat 错误消息中打印类似的内容。

这仅仅意味着由于 Java 缺乏对多重继承的支持，您不能扩展两个不同的活动。

# matlab - 在世界地图上绘制等高线图

> ID：12023789
> 
> 赞同：1
> 
> 时间：2012-08-19T02:38:49.847
> 
> 标签：matlab, map, 3d, plot, contour

我正在尝试在一般地图（亚洲或美国）上绘制计数器地图。

一般而言（输入数据仅作为示例）

```
% Data Input
long = (:,1); 
lat = (:,2);
z = (:,3);
[x,y] = meshgrid(x,y);
z = x.^2 + y.^2;
[C, h] = contour(x, y, z, 10);
clabel(C,h) 
```

所以这就是我卡住的地方。我使用世界地图“亚洲”，但我只看到地图而不是亚洲的等高线图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:44:17.157

尝试`hold on`在第一个图之后和第二个图之前添加命令，然后`hold off`在第二个图之后添加命令。

此命令告诉 MATLAB 在绘制新图之前不要清除该图，其效果是您可以将多个图叠加在一起。

# c# - 预处理器指令反射注入

> ID：12023791
> 
> 赞同：0
> 
> 时间：2012-08-19T02:39:00.963
> 
> 标签：c#, reflection, preprocessor-directive

**如何**通过反射注入[`C# Preprocessor Directives`](http://msdn.microsoft.com/en-us/library/ed8yd1ha(v=vs.71).aspx)接口？

示例：
我想注入`#if SILVERLIGHT`任何 WCF 服务合同接口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:44:04.387

简短的回答：你不能。
稍微长一点的答案：你的问题一开始甚至没有意义。

预处理器指令在编译之前处理。该处理的结果是新的、修改后的源代码。然后编译该源代码。

例如，如果`SILVERLIGHT`符号在编译时没有定义，那么 和 之间的整个代码`#if SiLVERLIGHT`将`#endif`被编译器完全忽略，就好像它根本不存在一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:43:16.260

那是不可能的。根据名称，预处理器指令仅在编译时间之前存在。无处。

# .net - VS2012中的“添加引用”和*.csproj文件

> ID：12023792
> 
> 赞同：1
> 
> 时间：2012-08-19T02:40:48.360
> 
> 标签：.net, clr

我的理解是，**如果我使用“添加引用”向我的项目添加一些 DLL，这些引用信息将存储在 *.csproj 文件中，如下所示，并且应该在编译后存储在程序集清单中。**

```
<Reference Include="Microsoft.VisualStudio.QualityTools.CodedUITestFramework, Version=11.0.0.0,
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL"> 
```

这些信息应该反映在程序集元数据清单中，可以使用 ILDasm.exe 检查。

但我注意到一些引用的 DLL 仅显示在 *.csproj 文件中，**而不**显示在程序集清单中。

如：

在 *.csproj 中，我有：

```
 <Reference Include="Microsoft.VisualStudio.QualityTools.CodedUITestFramework, Version=11.0.0.0,
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\Microsoft.VisualStudio.QualityTools.CodedUITestFramework.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=10.0.0.0,
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.TestTools.UITest.Common, Version=11.0.0.0,
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\Microsoft.VisualStudio.TestTools.UITest.Common.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.TestTools.UITest.Extension, Version=11.0.0.0,
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\Microsoft.VisualStudio.TestTools.UITest.Extension.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.TestTools.UITesting, Version=11.0.0.0,
 Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\Microsoft.VisualStudio.TestTools.UITesting.dll</HintPath>
    </Reference> 
```

但在汇编清单中，我只看到这个：

```
.assembly extern Microsoft.VisualStudio.TestTools.UITesting
{
  .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A )                         // .?_....:
  .ver 11:0:0:0
}

.assembly extern Microsoft.VisualStudio.TestTools.UITest.Extension
{
  .publickeytoken = (B0 3F 5F 7F 11 D5 0A 3A )                         // .?_....:
  .ver 11:0:0:0
} 
```

由于我没有在清单中看到某些程序集，因此**我将它们从参考列表中删除，但该项目甚至不会构建。**

我对 .NET CLR 有什么误解吗？

这里还有一个相关的线程可能是相关的： [VS2012 未能在 *.csproj 文件和程序集清单中保持一致的 DLL 版本，VS2012 错误？](https://stackoverflow.com/questions/12019925/vs2012-failed-to-keep-consistent-dll-version-in-csproj-file-and-assembly-manif)

## 更新

在上面，我说**我从参考列表中删除了它们，但项目甚至不会构建。**这不是真的。

我删除了程序集清单中未提及的 DLL 引用，该项目仍然构建良好。这些信息也会从 *.csproj 文件中删除。

所以我认为我们**可以**在项目中放置一些不必要的引用，这些信息**将**进入 *.csproj 文件。但是如果编译器认为引用是不必要的，它将**不会进入程序集清单。**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:39:39.953

未在代码中实际使用的程序集或项目引用（即“存储在 *.csproj 中”作为 Reference 或 ProjectReference）不包含在生成的程序集中。这是一种标准行为。

Resharper 等一些工具可以帮助您删除它们。

# ruby-on-rails - 在 OpenShift 上开发 Rails

> ID：12023794
> 
> 赞同：-1
> 
> 时间：2012-08-19T02:41:01.027
> 
> 标签：ruby-on-rails, git, openshift

我在 OpenShift 上开发 Rails 应用程序...当我在本地 PC 上安装 Rails 时遇到一些麻烦，我将 ssh 连接到我的 openshift 应用程序并从那里创建控制器。我可以访问应用程序的新控制器，但是我希望我的应用程序的本地肠道副本能够使用我创建的新控制器进行更新。我试过 git fetch 和 pull ：

```
$ git pull
Already up-to-date. 
```

并且 git fetch 没有显示任何反馈。但是，我创建的新控制器不会在本地同步。

我怎样才能做到这一点？我必须使用 rhc 客户端吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:13:14.350

OpenShift 旨在与客户端机器上的 git 交互。因此，您应该从您的客户那里更改您的应用程序。Git add/commit/push 并且更改将发布到 OpenShift 服务器。对于 Rails，有几种简单的入门方法：

*   转到[https://openshift.redhat.com/app/console/application_types](https://openshift.redhat.com/app/console/application_types)并选择 Ruby on Rails（这将创建一个新应用程序）。然后，您可以将之前的更改与此应用程序集成并删除原始应用程序。如果您真的想要一个同名的应用程序，您可以先复制您的原始更改并删除原始应用程序，然后再创建此应用程序。
*   直接使用快速入门： [https](https://github.com/openshift/rails-example/) ://github.com/openshift/rails-example/ （您已经按照那里的说明完成了第 1 步和第 2 步）。如果您走这条路，您需要将在 OpenShift 服务器上所做的更改复制到本地系统，并在 git push 之前将其与快速启动代码集成。git push 后，您所做的现有更改将被您从客户端推送的代码替换。
*   或者，如果您可以解决当地的 Rails 问题，您也可以自己做（一些搜索 Rails 和 OpenShift 的人会得到更详细的示例）：

从本地 git 存储库中：

```
rails new app
cd app
bundle install
rails generate controller home index
git add .
git commit -a -m "Initial setup"
git push 
```

# ruby - DataMapper、互斥体和线程的奇怪错误？

> ID：12023798
> 
> 赞同：1
> 
> 时间：2012-08-19T02:41:39.897
> 
> 标签：ruby, multithreading, concurrency, locking, datamapper

我有一个充满 URL 的数据库，我需要定期测试 HTTP 响应时间。我希望有许多工作线程始终为最近未测试的 URL 梳理数据库，如果找到，请对其进行测试。

当然，这可能会导致多个线程从数据库中获取相同的 URL。我不想要这个。所以，我正在尝试使用互斥锁来防止这种情况发生。我意识到在数据库级别还有其他选项（乐观锁定、悲观锁定），但我至少更愿意弄清楚为什么这不起作用。

看看我写的这个测试代码：

```
threads = []
mutex = Mutex.new

50.times do |i|
  threads << Thread.new do
    while true do 
      url = nil

      mutex.synchronize do
        url = URL.first(:locked_for_testing => false, :times_tested.lt => 150)
        if url
          url.locked_for_testing = true
          url.save 
        end
      end

      if url
        # simulate testing the url
        sleep 1

        url.times_tested += 1
        url.save

        mutex.synchronize do
          url.locked_for_testing = false
          url.save
        end
      end
    end

    sleep 1
  end
end

threads.each { |t| t.join } 
```

当然这里没有真正的 URL 测试。但最终*应该发生的事情是，每个 URL 的“times_tested”应该等于 150，对吧？*

（我基本上只是想确保互斥锁和工作线程心态正常工作）

但是每次我运行它时，这里和那里的一些奇怪的 URL 最终都以 time_tested 等于一个低得多的数字，比如 37，并且locked_for_testing 冻结为“true”

现在，据我从代码中可以看出，如果任何 URL 被锁定，则*必须*解锁。所以我不明白一些 URL 是如何像那样“冻结”的。

没有例外，我尝试添加开始/确保，但它没有做任何事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:54:04.020

我会使用一个队列和一个主人来拉你想要的东西。如果您有一个主控，您可以控制访问的内容。这并不完美，但它不会因为并发性而崩溃，请记住，如果您没有锁定数据库，互斥锁并不能真正帮助您，而是访问数据库的其他东西。

完全未经测试的代码

```
require 'thread'
queue = Queue.new
keep_running = true

# trap cntrl_c or something to reset keep_running
master = Thread.new do 
  while keep_running
    # check if we need some work to do
    if queue.size == 0
      urls = URL.all(:times_tested.lt => 150)
      urls.each do |u|
        queue << u.id
      end
      # keep from spinning the queue
      sleep(0.1)
    end
  end
end
workers = []
50.times do
  workers << Thread.new do
    while keep_running
      # get an id
      id = queue.shift
      url = URL.get(id)
      #do something with the url
      url.save
      sleep(0.1)
    end
  end
end
workers.each do |w|
  w.join
end 
```

# azure - 具有 EF 迁移的 azure 网站如何确保更新时的完整性

> ID：12023803
> 
> 赞同：12
> 
> 时间：2012-08-19T02:42:10.177
> 
> 标签：azure, azure-web-app-service

场景很简单：使用 EF 代码优先迁移，有多个 azure 网站实例，像 100GB 这样大小合适的数据库（假设是 azure SQL），大量活跃的并发用户......说 20k 就够了。

目标：推送更新，活跃用户，升级时保持完整性。

我已经筛选了所有我能找到的文档。然而，核心细节似乎丢失了，或者我公然忽视了它们。当 Azure 通过 FTP/git/tfs 收到更新请求时，它如何处理更新？它对活跃用户有什么作用？例如，它是否冻结所有实例的传入请求，让已经处理的项目完成，升级/替换每个实例，让 EF 迁移处理，然后让流量重新开始？如果它同时升级/刷新所有实例，它如何确保 EF 迁移只运行一次？如果它在滚动升级过程中更新实例（一次升级 1 个，没有入站流量冻结），它如何确保完整性，因为旧状态的实例会/可能会中断？

主要问题，它收到更新请求后的真实过程是什么？更新实时网站有哪些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-09T08:41:07.223

简单地说，它没有。

EF 迁移和 Azure 部署是两种截然不同的野兽。Azure 部署为您提供了许多选项，包括更新和暂存槽，您可能已经看过
[在 Azure 应用服务中部署 Web 应用程序](https://azure.microsoft.com/en-us/documentation/articles/web-sites-deploy/#ftp)，对于其他读者来说，这是一个很好的起点。

通常，Azure 部署模型关注与 IIS/网站堆栈的活动连接，通常更新通过将部署的实例从负载均衡器池中取出并将流量重定向到其他实例来确保不间断的用户访问。然后，它会在实例中逐一更新。

> 这意味着在任何时间点，在更新部署期间，您的代码都会同时运行***多个***版本。

如果您的 EF 模型在代码版本之间没有更改，那么 Azure 部署就像一个魅力，用户甚至不会知道它正在发生。但是，如果您需要在迁移过程中应用迁移，请***注意***

> 一般来说，EF 只会在代码和数据库版本匹配的情况下加载模型。使用 EF Migrations 并同时支持模型的多个代码版本非常**困难**

EF 迁移主要由数据库初始化程序控制。有关详细信息，请参阅[使用迁移升级数据库](http://msdn.microsoft.com/en-us/data/JJ591621.aspx)。

作为开发人员，您可以选择升级数据库的方式和时间，但要知道，如果您使用的是迁移和部署更新：

1.  新代码代码不会轻易针对旧数据模式运行。
2.  如果旧代码/应用程序重新启动，许多默认初始化策略将尝试回滚模式，如果发生这种情况，请参阅第 1 点。;)
3.  如果您绕过 EF 模型加载错误版本的架构，当代码尝试使用不存在的架构元素时，您将遇到异常和一般故障

在活动站点上管理 EF 迁移的最简单方法是关闭站点的所有实例以进行包含 EF 迁移的部署 - 您可以使用维护页面或重定向，这取决于您。

如果您遇到这个麻烦，最好手动应用数据库更新，然后如果失败，您可以轻松中止部署，因为它还没有开始！

否则，部署更新和启动的第一个实例将运行迁移，如果初始化程序已配置为这样做...

如果您绝对必须持续部署站点代码/内容和模型更新，那么 EF 迁移可能不是开始使用的最佳工具，因为您会发现它对于这种场景的 OOTB 非常严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T17:04:52.413

我正在观看 Pluralsight 上的“基础”课程，这被触及了。如果您有 3 个站点，Azure 将使其中一个脱机并升级它，然后在准备好时重新启动它。此时，其他 2 个实例将脱机，您的升级实例将启动，从而运行您的架构更改。

当这 2 个返回时，EF 迁移将已经运行，因此您的站点又回来了。

从理论上讲，这听起来应该可以工作，尽管取决于需要运行多少 EF 迁移，请求可能会延迟。

但是，作者的评论是，在这种情况下（即进行架构更改），您应该考虑您的网站是否可以在这种情况下运行。建议您要么需要使您的代码同时使用旧模式和新模式，要么显示“维护系统向下页面”。

总结似乎是，根据您实际升级的内容，这将影响并影响您的选择和部署方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T20:39:49.433

一般来说，如果你想支持主动升级，你需要同时支持多个版本的应用程序。这确实是在迁移/升级时可靠地保持活动状态的唯一方法。还可以考虑使用功能开关以可控的方式扩大转化。

# c# - 看看 Regex 对象是用什么模式创建的？

> ID：12023806
> 
> 赞同：17
> 
> 时间：2012-08-19T02:42:35.703
> 
> 标签：c#, .net, regex

我有一个使用`new Regex(string pattern)`构造函数创建的正则表达式对象，之后有没有办法查看正则表达式对象是用什么模式创建的？

我似乎无法访问正则表达式或`RegexOptions`对象中的“模式”字符串成员。

上下文：我要问的原因是我在初始化时早期创建了一些正则表达式对象（模式存储在配置文件中），然后它们被传递给不同的类以经常使用。但是，我还需要将模式字符串与运行时存储在 SQL 数据库中的字符串进行比较。

除了正则表达式对象之外，我宁愿不必传递带有模式的字符串。我也觉得在启动时创建一次对象不是一个坏主意，因为正则表达式会被重复使用数百次？

随时提供替代建议。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-19T03:32:14.400

因此，在调试器中，将光标悬停在正则表达式对象上会显示模式，因此必须关闭。原来 Regex.ToString() 返回模式。

[ToString](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.tostring.aspx)：返回传递给 Regex 构造函数的正则表达式模式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-19T02:53:05.430

看起来你不能这样做，因为该[`Regex.Pattern`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.pattern.aspx)字段被标记为内部。

您说得对，创建一次对象并多次重用它是个好主意，但是将字符串作为另一个参数传递可能是您唯一的选择。

如果你真的想避免这样做，你可以创建一个继承自 Regex 的新类，然后在构造函数中设置 Pattern 属性，如下所示：

```
public class MyRegex : Regex
{
    public String Pattern {protected set; get;}
    public MyRegex(String Pattern) : Regex(Pattern)
    {
            this.Pattern = Pattern;
    }
} 
```

# gtk - 林间空地：如何在 GtkAssistant 中编辑页面

> ID：12023809
> 
> 赞同：4
> 
> 时间：2012-08-19T02:43:33.357
> 
> 标签：gtk, glade, gtk3

我想在 Glade 的助手窗口 (GtkAssistant) 的页面中添加内容。

当我添加一个新助手时，GtkAssistant 下没有出现任何子项。此外，我无法选择（或删除或更改）Glade 生成的 3 个默认页面的内容——我只能选择助手本身。

因此，我尝试将页面数增加到 5，然后将小部件添加到其中一个新页面。它给了我错误消息：“助手类型的小部件需要占位符来添加孩子。”

这是一个错误，还是我错过了一些关于我应该如何配置助手窗口的基本知识？

[这个问题](https://stackoverflow.com/questions/2798890/how-do-i-edit-gtkassistant-on-glade)可能是相关的；但它很模糊，没有得到回答。

我在 Ubuntu 12.04 上运行 Glade 3.12.1。

![向助手添加标签时出错。](../Images/366790258d2247510e3441033aa0e9dc.png)

# node.js - 如何使用 node.js 扫描整个目录树？

> ID：12023810
> 
> 赞同：3
> 
> 时间：2012-08-19T02:43:35.323
> 
> 标签：node.js

通常我想扫描整个目录树（一个目录，以及其中的所有内容，包括文件、子目录和那些子目录内容，以及它们的子目录内容等等）。

使用节点如何实现这一点？要求，是它应该是异步的，以利用超快速的非阻塞 IO - 并且一次处理太多文件时不会崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:43:35.323

*-- 我在 2017 年更新了这个答案，了解自 2012 年以来的进展 --*

最终创建了这些来完成它：

*   [https://github.com/bevry/safefs](https://github.com/bevry/safefs) - 现在使用[https://npmjs.org/package/graceful-fs](https://npmjs.org/package/graceful-fs)（以前不存在）

*   [https://github.com/bevry/scandirectory](https://github.com/bevry/scandirectory) - 现在也有大量类似的项目

我还创建了这个轻量级且超快的：

*   [https://github.com/bevry/readdir-cluster](https://github.com/bevry/readdir-cluster)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-11T14:43:07.040

如果你想实现它，你可以使用模块[npm dree。](https://www.npmjs.com/package/dree)它返回一个描述目录树的 json，它还允许你指定一个 fileCallback 和一个 dirCallback，所以你可以这样做：

这是代码：

```
const dree = require('dree');

const fileCb = function(file) {
    // do what you want
}
const dirCb = function(directory) {
    // do what you want
}

dree.scan('path-to-directory', { extensions: [ 'html', 'js' ] }, fileCb, dirCb); 
```

# javascript - 函数不会返回值

> ID：12023812
> 
> 赞同：1
> 
> 时间：2012-08-19T02:43:38.320
> 
> 标签：javascript, jquery

我正在尝试编写一个文件上传函数，该函数将在上传文件后返回真或假。我目前能得到的唯一回报是`undefined`. 我已经尝试了代码的一些变体，但我无法弄清楚。我相信这是一个延迟或范围问题，但不确定。看看，告诉我你们的想法。

HTML

```
<div id="add-form"> 
    make : <input type="text" id="make" name="make" />
    type : <input type="text" id="type" name="type" />
    caliber : <input type="text" id="caliber" name="caliber" />
    cost : <input type="text" id="cost" name="cost" />
    description : <textarea id="description"></textarea>
    <form id="image-form">
        image : <input type="file" id="image" name="image" />
    </form>
    <button id="add-item">ADD ITEM</button> 
 </div> 
```

查询

```
$(function()
{
    $('#add-item').click(function()
    {
        console.log(uploader());
    });
    var uploader = function uploader()
    {
        var iframe = $('<iframe name="postiframe" id="postiframe" style="display:none" />');
        $("body").append(iframe);
        var form = $('#image-form');
        form.attr("action","hub.php?handler=image");
        form.attr("method","post");
        form.attr("enctype","multipart/form-data");
        form.attr("encoding","multipart/form-data");
        form.attr("target","postiframe");
        form.attr("file",$('#image').val());
        form.submit();
        $("#postiframe").load(function()
        {
            var _frame = $("#postiframe").contents().find('body').html();
            var obj = $.parseJSON(_frame);
            if(obj['status']==true)
            {
                return true;
            }
            else
            {
                return false;
            }
        }); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:46:04.397

问题是您正在从*ajax 回调中返回一个值*

```
$("#postiframe").load(function() {
     // ...
     return true; 
```

到达这行代码时，原始函数已经终止，没有返回任何内容，当然评估为`undefined`

```
var uploader = function uploader()
    {
        var iframe = $('<iframe name="postiframe" id="postiframe" style="display:none" />');
        $("#postiframe").load(function()
        {
            var _frame = $("#postiframe").contents().find('body').html();
            var obj = $.parseJSON(_frame);
            if(obj['status']==true)
            {
                //function has already ended by this point!
                return true;
            }
            else
            {
                //function has already ended by this point!
                return false;
            }
        }); 
        //you need to return something HERE 
    } 
```

* * *

我想说你最好的选择是传入两个回调函数，一个在上传成功时运行，另一个在失败时运行。这不会让您到达函数将根据上传结果返回 true 或 false 的地步，但它*允许*您根据上传是否成功指定要运行的代码

```
var uploader = function uploader(successCallback, failureCallback)
    {
        var iframe = $('<iframe name="postiframe" id="postiframe" style="display:none" />');
        $("#postiframe").load(function()
        {
            var _frame = $("#postiframe").contents().find('body').html();
            var obj = $.parseJSON(_frame);
            if(obj['status']==true)
            {
                if (typeof successCallback === 'function')
                    successCallback();
            }
            else
            {
                if (typeof failureCallback === 'function')
                    failureCallback();
            }
        });  
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T02:53:25.493

解决方案是您应该实现一个回调模式来处理异步性质。这里过于简单化了。

```
var uploader = function(callback) {

    $("postiframe").load(function () {
        // success
        callback(true);
    });
}; 
```

用法

```
uploader(function (success) {
}); 
```

# algorithm - 交易资源的算法

> ID：12023814
> 
> 赞同：1
> 
> 时间：2012-08-19T02:44:00.830
> 
> 标签：algorithm, optimization, resources, trading

我正在尝试找到以下问题的最佳算法解决方案。这是一个现实世界的问题，但我将以抽象的方式呈现它。

有一个1000人的社区。为每个用户提供一定数量的票。有四种类型的门票（每种类型对应不同的事件）。但是，有些人愿意进行交易（例如，我想要一张 A 票，而愿意放弃两张 B 票）。而且，有些人有多余的票，他们愿意白送（例如，我会给想要的人两张C票）。假设我知道每个人愿意放弃/交易什么，我如何满足最多的人？

我尝试了谷歌搜索，但我不知道如何描述这个问题以避免获得与金融工具算法交易相关的结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:08:25.300

鉴于它具有多个维度，它很可能是一个 NP 完全问题。它与多维背包问题有相似之处。

因此，我建议尝试回溯方法。

从参与交易的每个人开始。

对造成赤字最多的人进行降序排序（在这里，您可以通过每张票中的亏空来衡量每种票种造成的赤字）。

然后以一种回溯的方式，将导致第二高赤字的人踢出交易。

重复直到你在任何一张票上都没有更多的赤字（记录尽可能的答案），或者你把每个人都踢了出去。

发生这种情况时，回溯 1 步并继续（如果您已经尝试踢出最高赤字，则踢下一个最高赤字导致的人）。

重复直到结束，否则你的时间用完了。从您找到的可能答案中找出最佳答案。

如果问题太难，它可能会用完时间。否则，这个算法应该给你一个合理的答案（也许接近最优）。

这种方法的效果取决于人们有多慷慨/贪婪，有多少人，以及你的计算机有多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:43:09.980

寻找二分最小权重匹配问题。这个想法是仅使用顶点 1 .. k 找到从 i 到 j 的最短距离。

# jquery - 将 jQuery DataTable 插件应用于从 ASP.NET 动态生成的表

> ID：12023824
> 
> 赞同：0
> 
> 时间：2012-08-19T02:47:01.750
> 
> 标签：jquery, asp.net, datatables

我的要求如下：

在我的 ASPX 页面中，我使用 fileUpload 从电子表格中导入数据并动态生成一个 ASP.NET 表。表格行和列的维度和数据由文件本身设置 - 这意味着我的应用程序在导入数据之前不知道行和列。

我想做的是将 jQuery DataTables 插件应用于我的动态生成的表。当用户单击页面上的 Import 按钮时，将生成该表。

我遇到的问题是格式化表格的 jscript 在表格可用之前运行，因此 DataTable 插件抱怨列。错误内容如下：

> 无法获取属性“aoColumns”的值：对象为空或未定义

我尝试将以下代码添加到我的 Button_Click 事件中，但它发生在加载表之前：

> ClientScript.RegisterClientScriptBlock(Me.GetType(), "FormatTable", "FormatTable();", True)

脚本如下：

> ```
>  function FormatTable() {
>                     var oTable = $('#tblMyTable).dataTable({
>                         "bJQueryUI": true,
>                         "sScrollY": "300px",
>                         "sScrollX": "100%",
>                         "sScrollXInner": "150%",
>                         "bScrollCollapse": true,
>                         "bPaginate": false
>                     });
>                     new FixedColumns(oTable);
>     }; 
> ```

我确保表格格式正确，包括 table、thead、tr、th、tbody、tr、td。当表格从后面的代码生成时，它被插入到服务器占位符控件中。

所以我的问题是：如何使用 jQuery DataTables 插件成功格式化服务器生成的表？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T06:58:22.203

在这种情况下，您希望您的代码在 DOM 准备好后执行。为此 jQuery 提供了[ready](http://api.jquery.com/ready/)函数。

仅在 DOM 准备好后调用您`FormatTable`的方法，如下所示。

```
ClientScript.RegisterClientScriptBlock(Me.GetType(), "FormatTable", 
                    @"$(document).ready(function() {FormatTable();});", True); 
```

# php - CodeIgniter 没有正确访问 if...else 语句中的变量

> ID：12023825
> 
> 赞同：1
> 
> 时间：2012-08-19T02:47:08.050
> 
> 标签：php, mysql, codeigniter

我收到错误说 $id1 和 $id2 未定义。我没有正确访问它们吗？如果不是，我该如何正确访问它们？

```
$query = $this->db->query("SELECT * FROM churchMembers");
$row = $query->row();
    if ($query->num_rows() != 0) {
      if ($postingUserId == $row->cMuserId) { // check to see what church the posting user is a member of
        $id1 = $row->cMchurchId; // if posting user is a member of a church set it to var id1
      } 
      if ($userid == $row->cMuserId) { // check to see what church myuserid is a member of
        $id2 = $row->cMchurchId; // if myuserid is a member of a church set it to var2
      } 
      if ($id1 == $id2) { // if posting user and myuserid are a member of the same church process the following
        echo json_encode(array('loggedIn' => true, 'isMembershipSame' => true));
      } 
      elseif ($id1 != $id2) { // if posting user and myuserid are not a member of the same user process the following
        echo json_encode(array('loggedIn' => true, 'isMembershipSame' => false));
      }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T02:56:15.697

除非满足它们的相应条件，否则您不定义任何一个`$id1`或不定义，因此如果上述任一条件为 false 并且不运行，则当您尝试在.`$id2``if``if ($id1 == $id2)`

您应该在输入 if 链之前将它们初始化为空字符串。然后在比较它们时，还要验证它们是否为非空：

```
// ADDENDUM after comments:
// If you put this into a loop to fetch rows,
// the following must be INSIDE the loop to reinitialize
// the two vars on each iteration.

// Initialize them as empty strings
$id1 = "";
$id2 = "";

// If you are in a loop, you should check num_rows() once outside the loop, rather than inside
if ($query->num_rows() != 0) {
  if ($postingUserId == $row->cMuserId) {
    $id1 = $row->cMchurchId;
  } 
  if ($userid == $row->cMuserId) {
    $id2 = $row->cMchurchId;
  } 
  // Test if they are non-empty (conditions matched above) and equal:
  if (!empty($id1) && !empty($id2) && $id1 == $id2) {
    echo json_encode(array('loggedIn' => true, 'isMembershipSame' => true));
  } 
  // No need for else if here, just a plain else clause
  else {
    echo json_encode(array('loggedIn' => true, 'isMembershipSame' => false));
  }
} 
```

# java - 如何在java中检测和捕获来自网络摄像头的视频？

> ID：12023826
> 
> 赞同：1
> 
> 时间：2012-08-19T02:47:34.637
> 
> 标签：java

我尝试编写一个应用程序来检测和捕获来自网络摄像头的视频。我使用 JMF 2.1 和 JDK 1.7u5，但是当我编译和运行我的应用程序时，它无法检测到任何设备。然后，我尝试使用 JMyron，但它在 x64 中不受支持（我的操作系统是 Win 7 x64）。

你能告诉我为什么吗？以及如何在我的 Java 应用程序中从网络摄像头捕获视频？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T10:12:30.563

**JMF 2.1.1e**使用 64 位 JDK/JRE。我在 Windows 7 x64 上对其进行了测试。假设网络摄像头驱动程序已正确安装，并且您还可以使用 Skype 等替代应用程序对其进行测试以确保其正常工作，那么您就可以验证您的 JMF 安装了。

启动*JMStudio*并转到“*文件->首选项*”菜单。这会调出 JMF 注册表编辑器。转到“*捕获设备*”选项卡，然后单击“*检测捕获设备*”。这应该会在列表中显示您的网络摄像头。它将被列为“ *WDM Image Capture* ”或类似名称。请注意，如果您想提交某些内容，那么您应该以管理权限启动 JMStudio。

*您可以通过选择“文件->捕获*”菜单*(Ctrl-P)*来使用网络摄像头捕获视频或拍摄快照。

如果上述方法有效，您的应用程序应该能够使用 JMF 并使用您的网络摄像头，除非您忘记包含正确的库或在代码中遗漏某些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T10:34:24.673

我知道您可能不想要这个，但我建议您使用 HTML5 来捕获、录制或流式传输视频。看看[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)并希望你能在**你**的要求允许的情况下完成它。HTML5 提供了很多可以轻松实现的功能。

# wpf - 使用 HierarchicalDataTemplate 显示混合类型

> ID：12023830
> 
> 赞同：3
> 
> 时间：2012-08-19T02:48:44.267
> 
> 标签：wpf, treeview, hierarchicaldatatemplate

我正在尝试使用 HierarchicalDataTemplate 显示具有混合类型的树视图，但到目前为止我所有的尝试都失败了..

我有一个树状类，可以有两种不同类型的孩子。（位置和设备）。为了让事情在这里可以理解是我试图展示的说明：

```
->Location 1
    |
    |--->Device 1.1
    |--->Device 1.2
    |--->Location 1.2
          |
          |---->Device 1.2.1 
          |---->Location 1.2.1
            .....etc..... 
```

我已经尝试了很多我找到的解决方案，但没有一个奏效。在大多数情况下，我只是在树视图中获取类名。使用 HierarchicalDataTemplate 甚至可以尝试做的事情吗？如果是，请告诉我如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T14:14:40.947

经过几个小时的反复试验，我回到了起点并找到了解决方案。我不敢相信它实际上如此简单。

模板如下所示：

```
<HierarchicalDataTemplate x:Key="NavigatorDataTemplate" DataType="{x:Type local:Location}" ItemsSource="{Binding Locations}">
    <StackPanel>
        <TextBlock Text="{Binding Description}"/>
        <ListBox ItemsSource="{Binding Devices}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Description}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
</HierarchicalDataTemplate> 
```

TreeView 就是这样的：

```
<TreeView Name="treeNav" ItemTemplate="{StaticResource NavigatorDataTemplate}"/> 
```

由于需要显示的集合已经在代码中，我只需将其设置为 ItemsSource：

```
treeNav.ItemsSource = locations; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:26:09.170

HierarchicalDataTemplate 应该有助于解决您的问题。查看 MSDN[数据模板概述的最新示例](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T07:31:49.673

要使这个层次结构工作`Location`对象应该具有`composite collection of Locations and Devices`，您只需将该集合设置为 HierarchicalDataTemplate 的 ItemsSource。该示例应该可以工作 -

```
<HierarchicalDataTemplate DataType="{x:Type local:Location}"
                          ItemsSource="{Binding CompositeCollection}">
   <TextBlock Text="{Binding Name}"/>
</HierarchicalDataTemplate>

<DataTemplate DataType="{x:Type local:Device}">
   <TextBlock Text="{Binding Name}"/>
</DataTemplate> 
```

我假设您需要在 UI 上显示的每个对象 Location 和 Device 中都有 Name 属性。将这些数据模板添加到您的 ItemsControl 的资源中，这些资源可能是 ListBox、TreeView 或任何其他 ItemsControl。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T15:45:47.720

作为 WPF 的新手，我最近解决了同样的问题。我使用的方法是创建一个新类，用于在树中显示数据。

TreeDisplayItem 类具有将显示的每个类类型的承包商。在每个构造函数中，将为传递的类设置 _display 属性。

itemDef = 类别名称

ItemPrice = 价格 + 数量 + 店铺位置

```
 public class TreeDisplayItem
{
    readonly string _display;
    readonly string _id;
    readonly List<TreeDisplayItem> _items;

    public LegoPriceDisplay(ItemDef itemDef, List<TreeDisplayItem> items)
    {
      ...//Root node class type  ItemDef 
    }

    public LegoPriceDisplay(ItemPrice price)
    {
       ....//child node type = ItemPrice  
    }

    public List<TreeDisplayItem> Items{ get; private set; }

    public string DisplayId 
    { 
        get { return _id; } 
    }

    public string Display
    {
        get { return _display; }
    }

} 
```

在 WPF 页面 XAML 中，使用嵌套的 HierarchicalDataTemplates 定义树视图。当然，这仅适用于您具有固定/已知树项深度的用例。就我而言，树视图将向下钻取两层（计算根）

```
 <TreeView Margin="0" Name="TvStorePrices" ItemsSource="{Binding TreeDisplayItemList}">
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate DataType="local:TreeDisplayItem" ItemsSource="{Binding Items}">
     <TextBlock Text="{Binding Display}" />
          <HierarchicalDataTemplate.ItemTemplate>
              <HierarchicalDataTemplate DataType="local:TreeDisplayItem" ItemsSource="{Binding Items}">
                    <TextBlock Text="{Binding Display}" />
              </HierarchicalDataTemplate>
         </HierarchicalDataTemplate.ItemTemplate>
    </HierarchicalDataTemplate>
</TreeView.ItemTemplate> 
```

# razor - css @import 与剃刀冲突

> ID：12023832
> 
> 赞同：5
> 
> 时间：2012-08-19T02:49:31.257
> 
> 标签：razor

（诸如[MVC @import html 关键字](https://stackoverflow.com/questions/5277356/mvc-import-html-keyword)之类的帖子显示了与我类似的问题，但该解决方案似乎无法解决我的问题。）

我正在尝试在 .cshtml 文件中使用以下代码。css @import 与 Razor 冲突，所以我尝试了 @@import 但无济于事。我在 Visual Studio 中遇到运行时错误，例如“找不到路径 '/media/css/site_jui.ccss' 的控制器”。

```
 <style type="text/css" media="screen">
        @import "/media/css/site_jui.ccss";
        @import "/release-datatables/media/css/demo_table_jui.css";
                    @import "/media/css/jui_themes/smoothness/jquery-ui-1.7.2.custom.css";

        /*
         * Override styles needed due to the mix of three different CSS sources! For proper examples
         * please see the themes example in the 'Examples' section of this site
         */
        .dataTables_info { padding-top: 0; }
        .dataTables_paginate { padding-top: 0; }
        .css_right { float: right; }
        #example_wrapper .fg-toolbar { font-size: 0.8em }
        #theme_links span { float: left; padding: 2px 10px; }

</style> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T02:51:37.967

您可以使用 double`@`来转义`@`：

```
@@import "/media/css/site_jui.css"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-10T15:20:06.057

这将起作用：

```
 @string.Format("@")import "/media/css/site_jui.css"; 
```

# php - 子类中的 PHP get_class() 功能

> ID：12023835
> 
> 赞同：1
> 
> 时间：2012-08-19T02:50:10.723
> 
> 标签：php, oop, inheritance

我需要检查一个属性是否存在并且这有效：

```
class someClass {
  protected $some_var

  public static function checkProperty($property) {
    if(!property_exists(get_class()) ) {
      return true;
    } else return false;
  }
} 
```

但是现在当我尝试扩展类时，它不再起作用了。

```
class someChild extends someClass {
  protected $child_property;

}

someChild::checkProperty('child_property'); // false 
```

如何获得我想要的功能？我尝试用 , , 替换`get_class()`，`$this`没有`self`任何`static`效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:15:07.623

我相信我已经找到了正确的答案。对于静态方法，使用`get_called_class()`.

也许`$this`适用于对象方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:19:39.530

对照 get_class() 和 get_parent_class() 检查 property_exists 怎么样？但是，对于更多的嵌套类，您必须递归地检查这些类。

```
public static function checkProperty($property)
{
    if (property_exists(get_class(), $property)
        or property_exists(get_parent_class(), $property))
    {
        return true;
    }
    else return false;
} 
```

（抱歉，我更喜欢 Allman-Style ;-)）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-19T03:04:43.560

以下作品：

```
<?php

class Car
{
    protected $_var;

    public function checkProperty($propertyName)
    {
        if (!property_exists($this, $propertyName)) {
            return false;
        }
        return true;
    }
}

class BMW extends Car
{
    protected $_prop;
}

$bmw = new BMW();
var_dump($bmw->checkProperty('_prop')); 
```

> @param $class 要测试的类名或类的对象

# java - 将工作发送到需要初始化的工作人员池

> ID：12023839
> 
> 赞同：3
> 
> 时间：2012-08-19T02:50:43.883
> 
> 标签：java, multithreading, executor

我有一个问题似乎与`Executor`s 和 Thread 池所做的很接近，但我似乎无法让它完全适合。基本上我有一些工人需要一些时间来初始化并且我想集中起来，一旦他们准备好我就用它们来工作。我需要在 Thread 中执行此操作：

```
worker = buildExpensiveWorker();
worker.doWork(work1);
worker.doWork(work2);
worker.doWork(work3);
... 
```

虽然 Executor 只允许我这样做：

```
doWork(work1);
doWork(work2);
doWork(work3);
... 
```

我需要编写自己的线程池吗？重写已经做得很好的东西感觉很可惜。或者我需要用它`ThreadLocal`来持有我的工人，并从`Runnable`'run() 方法内部管理他们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T03:32:54.837

如果您正在谈论在它们可用之前实际初始化 Thread 对象，请查看 ThreadPoolExecutor.setThreadFactory：

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#setThreadFactory(java.util.concurrent.ThreadFactory](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#setThreadFactory(java.util.concurrent.ThreadFactory) )

您可以提供自己的实现以任何您想要的方式创建线程，包括创建自定义线程子类和/或自定义初始化。

但是，我会说，如果您的初始化很昂贵，您可能应该尝试配置执行程序以尽可能长时间地保持实际线程处于活动状态（即，将保持活动时间设置得相当高，并尝试启动所有线程立即需要，并在前面受到打击）。

编辑：使用本地线程（如评论中所述）：

```
public class ThreadData {
    public static final ThreadLocal<String> data = new ThreadLocal<String>();
}

public class InitializingThread extends Thread {
    public InitializingThread(Runnable r) {
        super(r);
    }

    public void run() {
        ThreadData.data.set("foo");
        super.run();
    }
}

public class InitializingThreadFactory implements ThreadFactory {
    public Thread newThread(Runnable r) {
        return new InitializingThread(r);
    }
}

ThreadPoolExecutor executor = ...;
executor.setThreadFactory(new InitializingThreadFactory());
executor.execute(...); 
```

然后在你的 Runnable 中：

```
public void run() {
     String s = ThreadData.data.get();
} 
```

此外，这种方法（与使用 Thread.currentThread() 和强制转换相反）具有能够实际用于任何 Thread 实现（包括默认）或没有线程（直接调用 .run()在 ThreadLocal 中设置值后的方法）。您还可以轻松地将“ThreadLocal”更改为“InheritableThreadLocal”，并在将任何内容提交到线程池之前设置一次。所有子线程都将从其父线程（创建池的线程）继承该值。

重要的是要注意给定线程的“运行”方法只会执行一次，即使在线程池中也是如此，因此这可以保证您的初始化例程在每个线程的基础上发生。

# css - 如何使重组文本中的脚注看起来像没有括号的上标？

> ID：12023842
> 
> 赞同：3
> 
> 时间：2012-08-19T02:51:24.857
> 
> 标签：css, restructuredtext

我是 CSS 和 reStructuredText 的初学者。我正在用 reST 编写并导出到 HTML。我使用的脚注语法是`[#]_`，在生成的 HTML 中显示为`[1]`. 我希望脚注改为上标。reST 为编写的 HTML 中的所有脚注分配一个类，所以我可能可以利用它并利用[这个解决方案](https://stackoverflow.com/questions/501671/superscript-in-css-only)来获取脚注引用的上标。但是，如何将它们从`[]`括号中剥离？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:30:58.217

您如何将 reStructuredText 转换为 HTML？如果您使用的是[Docutils](http://docutils.sourceforge.net/)，那么 HTML 编写器有一个命令行选项`--footnote-references`，可以在括号或上标引用之间进行选择（默认为括号）。要使用上标引用，只需通过

```
--footnote-references 'superscript' 
```

调用 Docutils 时。

您也可以选择将类子`Writer`类化，`path_to_docutils/docutils/writers/html4css1/__init__.py`并为您喜欢的脚注设置任何格式。

# datetime - 试图从球拍中的字符串创建日期 - 查找秒数非常慢，需要工作日年日？

> ID：12023846
> 
> 赞同：12
> 
> 时间：2012-08-19T02:52:42.763
> 
> 标签：datetime, racket

我正在尝试从 Racket 中的大型 csv 文件中解析日期。

最直接的方法是创建一个新`date`结构。但它需要`week-day`和`year-day`参数。当然我没有这些，这似乎`date`是我不理解的模块的一个真正弱点。

因此，作为替代方案，我决定使用`find-seconds`将原始日期值转换为秒，然后将其传递给`seconds->date`. 这有效，但速度非常慢。

```
(time
 (let loop ([n 10000])
   (apply find-seconds '(0 0 12 1 1 2012)) ; this takes 3 seconds for 10000
   ;(date 0 0 12 1 1 2012 0 0 #f 0) ; this is instant
   (if (zero? n)
       'done
       (loop (sub1 n))))) 
```

`find-seconds`需要 3 秒来完成 10000 个值，而我有几百万。创建`date`结构当然是即时的，但我没有工作日、年日的值。

我的问题是：

1.) 为什么`week-day`/`year-day`需要创建日期结构？

2.）`find-seconds`应该这么慢（即错误）？还是我做错了什么？

3.）是否有任何替代方法可以快速解析日期。我知道`srfi/19`有一个`string->date`功能，但是我必须更改所有内容以使用该模块的结构而不是球拍的内置结构。它可能会遭受与 find-seconds 相同的性能损失，我不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T01:09:16.920

尽管没有这样记录，但`week-day`在`year-day`将`date`结构与`date->seconds`. 如果我将它们都设置为 0，则 a`date->seconds`不会抱怨。我怀疑它忽略了它们：

```
#lang racket

(require racket/date)

(define d (date 1    ;sc
                2    ;mn
                3    ;hr
                20   ;day
                8    ;month
                2012 ;year
                0    ;weekday  <<<
                0    ;year-day <<<
                #f   ;dst?
                0    ;time-zone-offset
                ))

(displayln (seconds->date (date->seconds d)))

;; =>
#(struct:date* 1 2 3 20 8 2012 1 232 #t -14400 0 EDT)
                               ^ ^^^ 
```

我的猜测是，该`date`结构被定义为与`seconds->date`, where一起使用，`week-day`并且`year-day`会提供有趣的信息。然后 for `date->seconds`，而不是定义另一个缺少这些字段的结构（它们是“多余的”用于确定日期，这就是为什么你会感到恼火的原因:)）用于 with `date->seconds`，而是重用了相同的结构。

这有帮助吗？从您的问题中我不清楚您要如何处理来自 CSV 的日期信息。如果您想将其转换为整`seconds`数值，我认为以上内容应该适合您。如果您有其他想法，也许您可​​以解释一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T11:42:45.077

我会说这是一个疏忽`racket/date`。

调用`find-seconds`很昂贵，因为它需要搜索以找到秒数。而且由于您只需要知道工作日，因此这是不必要的计算。

写信给邮件列表以获得建议。

# c++ - 在抽象基类上实现 operator<

> ID：12023847
> 
> 赞同：1
> 
> 时间：2012-08-19T02:52:59.600
> 
> 标签：c++

我有一个类型层次结构，我不确定实现`operator<`和`operator==`.

本质上，我已经有了这个：

```
class Parent {
    public:
        virtual ~Parent() {}
};

class A : public Parent { int         data; };
class B : public Parent { double      data; };
class C : public Parent { std::string data; };

bool operator==(A const & lhs, A const & rhs) { return lhs.data == rhs.data; }
bool operator< (A const & lhs, A const & rhs) { return lhs.data <  rhs.data; }

bool operator==(B const & lhs, B const & rhs) { return lhs.data == rhs.data; }
bool operator< (B const & lhs, B const & rhs) { return lhs.data <  rhs.data; }

bool operator==(C const & lhs, C const & rhs) { return lhs.data == rhs.data; }
bool operator< (C const & lhs, C const & rhs) { return lhs.data <  rhs.data; } 
```

我也想实现的是：

```
bool operator==(Parent const & lhs, Parent const & rhs) { ... }
bool operator< (Parent const & lhs, Parent const & rhs) { ... } 
```

我目前通过以下方式实现它：

```
bool operator==(Parent const & lhs, Parent const & rhs) {
    try {
        return dynamic_cast<A const &>(lhs) == dynamic_cast<A const &>(rhs);
    } catch(std::bad_cast const & e) {
    }

    try {
        return dynamic_cast<B const &>(lhs) == dynamic_cast<B const &>(rhs);
    } catch(std::bad_cast const & e) {
    }

    try {
        return dynamic_cast<C const &>(lhs) == dynamic_cast<C const &>(rhs);
    } catch(std::bad_cast const & e) {
    }

    assert(typeid(lhs) != typeid(rhs));
    return false;
} 
```

但这看起来很糟糕。有没有更清洁的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:05:55.537

对于复杂类型的比较，您可能会发现[Double Dispatch](http://en.wikipedia.org/wiki/Double_dispatch)很有用。

如果您的类型非常简单，有时将它们全部合二为一是有效的。在 3 个无符号变体的示例中，最好只使用一种类型来适应所有大小，并避免动态调度和更复杂的类型图。

* * *

**适用于原始问题；其中 A、B 和 C 都使用无符号类型：**

好吧，一种快速而肮脏的方法是：

```
class Parent {
protected:
  virtual ~Parent() {}
public:
  bool operator<(const Parent& pOther) const {
    return this->as_uint64() < pOther.as_uint64();
  }
  // ...
private:
  // using a type which accommodates all values
  virtual uint64_t as_uint64() const = 0;
}; 
```

然后派生`Parent`将采用以下形式：

```
class A : public Parent {
// ...
private:
    virtual uint64_t as_uint64() const { return this->data; }
private:
    uint16_t data;
}; 
```

then`Parent`可以简单地定义所有比较器，并且所有`Parent`类型都是可比较的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T03:26:03.240

使用虚拟比较器进行单次调度和`dynamic_cast`类型转换：

```
class ABC_base {
public:
    virtual ~ABC_base() {} 
    bool operator < (ABC_base const & rhs) const {
        return this->comparator(rhs) < 0;
    }
protected:
    virtual int comparator (ABC_base const &) = 0;
};

class ABC : public ABC_base {
protected:
    virtual int comparator(ABC_base const & rhs) const {
        try {
            return my_comparator(dynamic_cast<ABC const&>(rhs));
         // Run-time cast failed - use double dispatch as fallback
         } catch (std::bad_cast&) {
             return -rhs.comparator(*this);
         }
     }
private:
    int my_comparator(ABC const & rhs) const {
        if (data < rhs.data)
            return -1;
        if (data == rhs.data)
            return 0;
        if (data > rhs.data)
            return 1;
    }
    T data;
}; 
```

***以下是代码的工作原理***：

基类`operator <`被调用，它使用动态查找来查找`comparator`. 它检查返回的值以查看它是否更小。

派生类的比较器尝试向下转换基类引用，以便可以对派生类的成员进行比较。

**为什么使用基类引用，而不是使用派生类引用？** 由于函数签名不正确，虚拟调度将无法正常工作。

如果向下转换成功，它会调用非虚拟私有比较器。否则，它会再次使用虚拟调度来执行`(rhs ? *this)`并否定结果以补偿倒序。

**为什么不在一个虚函数中进行强制转换和比较？**它会使代码更混乱，因为该函数将做两件事：强制转换*和*比较。因此，有一个私有比较器功能。如果您想在派生类中使用基函数，请按照以下方式`class ABC_der : public ABC`调用`ABC::comparator(static_cast<ABC const&>(rhs))`。使用`Base::`强制*静态*调度，因此您不必公开助手比较功能。

现在，`this`和`rhs`是同一类型，所以我们*终于*可以进行实际比较了。语句链`if`用于返回符合 Java`Comparable`和 C`qsort()`语义的值。

# iphone - 我可以将本地通知用于报亭应用订阅吗？

> ID：12023853
> 
> 赞同：1
> 
> 时间：2012-08-19T02:53:30.813
> 
> 标签：iphone, push-notification, uilocalnotification, newsstand-kit

我有一个报亭应用程序，它将提供每天更新的免费订阅。

我想使用推送通知在后台下载问题。

起初我正在考虑使用 UrbanAirship 来管理 scriber 列表并每天同时发送推送通知。当然，这是昂贵的。

相反，Apple 是否允许我每天在预定时间向应用程序发送本地通知，然后应用程序可以在后台下载问题，从而避免服务器发送推送通知或管理抄写者列表或担心安全和证书等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:16:15.393

我不确定 Apple 对此的指导方针。但我强烈建议不要尝试这样的事情。

如果您的应用程序没有运行（不在后台），本地通知将不会自动开始下载。报亭推送通知在 JSON 有效负载中包含 content-available 属性（值为 1）。由于这个 iOS 在后台启动您的应用程序（如果不是在后台），您可以将您的内容添加到报亭队列中以在后台下载。下载完成后，iOS 将关闭您的应用程序。没有通知警报或任何其他需要用户采取任何行动的事情。我认为这是您无法通过本地通知实现的。

其他挑战 - 如何确保在收到本地通知时新内容始终可用。- 您如何确定要下载的内容。

另请查看我对[这个问题](https://stackoverflow.com/questions/11895035/do-newsstand-apps-require-push-notifications/11913165#11913165)的回答。

# ruby-on-rails - Rails 从父级删除子关联

> ID：12023854
> 
> 赞同：32
> 
> 时间：2012-08-19T02:53:31.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有这个（合同和附件与 has_and_belongs_to_many 相关联）：

```
# Get the contract and specific accessory based on params
@contract  = Contract.find(params[:id])
@accessory = @contract.accessories.find(params[:accessory_id]) 
```

现在，我想从@contract 中删除该特定附件。我不想从数据库中删除记录，而只是想删除两者之间的关联。

这样做的轨道方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-08-19T03:18:57.683

这个怎么样：

```
@contract.accessories.delete(@accessory) 
```

另请参阅：[如何在不删除项目本身的情况下删除单个 HABTM 关联项目？](https://stackoverflow.com/questions/1089892/rails-associations-how-do-i-remove-a-single-habtm-associated-item)

# node.js - 一次打开太多文件时如何防止node.js崩溃？

> ID：12023855
> 
> 赞同：1
> 
> 时间：2012-08-19T02:53:32.437
> 
> 标签：node.js

使用 node.js 扫描目录树时，由于我们对大目录使用异步回调，因此很容易立即将超过 1000 个 fs 操作立即排队，这通常会导致 node.js 进程崩溃或仅用于 fs 操作因“EM 打开的文件过多”错误而失败。

有没有人想出一个优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T02:53:32.437

历年更新：

1.  我根据这个答案编写了一个[https://npmjs.com/package/safefs包](https://npmjs.com/package/safefs)
2.  Isaac 编写了一个[https://npmjs.com/package/graceful-fs](https://npmjs.com/package/graceful-fs)包
3.  Safefs 现在使用 graceful-fs 包
4.  进程也存在同样的问题，所以我创建了[https://npmjs.com/package/safeps](https://npmjs.com/package/safeps)包，它解决了许多其他问题

——</p>

不确定这是否是解决此问题的最佳方法，但我有效地做的是用一个包装器包装所有异步 fs 函数，该包装器检查我们是否打开了超过允许数量的文件（任意设置为合理的100）。如果在通话时打开的文件多于这么多，通话将处于空闲状态，并在延迟后再次检查以查看现在是否有打开文件。这个逻辑的代码可以在这里找到：[https ://github.com/balupton/bal-util/blob/master/src/lib/paths.coffee#L7-45](https://github.com/balupton/bal-util/blob/master/src/lib/paths.coffee#L7-45)

在实现它方面，您只需要更改`require('fs').readFile`或您正在使用的任何调用`require('bal-util').readFile`并安装足够简单的[bal-util](https://github.com/balupton/bal-util)依赖项 ( )。`npm install bal-util`

希望这可以帮助。如果有更强大的方法可以做到这一点，我很想知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:41:05.610

我使用过的最简洁的模式涉及使用`async`带有队列的模块（https://github.com/caolan/async）。您可以设置队列中的最大并发项目数。

```
var queue = async.queue(do_thing, 500);
queue.drain = function() {
    console.log("Done with entries");
};

queue.push(workitem); 
```

# javascript - 如何通过网页读/写本地文件？

> ID：12023858
> 
> 赞同：14
> 
> 时间：2012-08-19T02:53:58.403
> 
> 标签：javascript, html, local-storage, read-write

我正在编写一个基于 html 的应用程序，并希望从本地文件中存储和检索数据。此应用程序不会托管在 Web 服务器上。

任何人都可以帮助启发主题如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T02:56:55.883

您应该使用 HTML5 的 FileSystem API：

```
window.requestFileSystem(window.TEMPORARY, 5*1024*1024, function(){
    fs.root.getFile('test.dat', {}, function(fileEntry) {
        fileEntry.file(function(file) {
            // Here is our file object ... 
        });
    });
}, errorHandler); 
```

签出[FileSystem API](http://html5rocks.com/en/tutorials/file/filesystem)以获取更多参考

访问[HTML5 测试](http://html5test.com)以测试浏览器支持

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T08:51:51.123

尝试 HTML 5 文件系统 API

以下链接有详细信息

[http://dev.w3.org/2009/dap/file-system/pub/FileSystem/](http://dev.w3.org/2009/dap/file-system/pub/FileSystem/)

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-07T01:02:52.210

这个问题的答案取决于您对以下问题的回答：

*   您对目前仅在基于 Chromium 的浏览器（Chrome 和 Opera）中存在对写入文件的支持这一事实感到满意吗？
*   您是否可以使用目前专有的 API 来利用这种功能？
*   您对将来删除上述 API 的可能性感到满意吗？
*   您是否可以将使用所述 API 创建的文件限制到磁盘上的**沙箱**（文件无法产生影响的位置）？
*   您是否可以使用**虚拟文件系统**（磁盘上的目录结构不一定以与从浏览器中访问时相同的形式存在）来表示此类文件？

如果您对上述所有问题都回答“是”，那么使用[File](https://www.w3.org/TR/FileAPI/)、[FileWriter](https://www.w3.org/TR/2012/WD-file-writer-api-20120417/)和[FileSystem](https://www.w3.org/TR/2012/WD-file-system-api-20120417/) API，您可以使用 Javascript 从浏览器选项卡/窗口的上下文中写入文件。

怎么样，你问？

**[烘焙食品](https://github.com/klawson88/Baked-Goods)***

写入文件：

```
bakedGoods.set({
    data: [{key: "testFile", value: "Hello world!", dataFormat: "text/plain"}],
    storageTypes: ["fileSystem"],
    options: {fileSystem:{storageType: Window.PERSISTENT}},
    complete: function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

读取文件：

```
bakedGoods.get({
        data: ["testFile"],
        storageTypes: ["fileSystem"],
        options: {fileSystem:{storageType: Window.PERSISTENT}},
        complete: function(resultDataObj, byStorageTypeErrorObj){}
}); 
```

**使用原始 File、FileWriter 和 FileSystem API**

写入文件：

```
function onQuotaRequestSuccess(grantedQuota)
{

    function saveFile(directoryEntry)
    {

        function createFileWriter(fileEntry)
        {

            function write(fileWriter)
            {
                var dataBlob = new Blob(["Hello world!"], {type: "text/plain"});
                fileWriter.write(dataBlob);              
            }

            fileEntry.createWriter(write);
        }

        directoryEntry.getFile(
            "testFile", 
            {create: true, exclusive: true},
            createFileWriter
        );
    }

    requestFileSystem(Window.PERSISTENT, grantedQuota, saveFile);
}

var desiredQuota = 1024 * 1024 * 1024;
var quotaManagementObj = navigator.webkitPersistentStorage;
quotaManagementObj.requestQuota(desiredQuota, onQuotaRequestSuccess); 
```

读取文件：

```
function onQuotaRequestSuccess(grantedQuota)
{

    function getfile(directoryEntry)
    {

        function readFile(fileEntry)
        {

            function read(file)
            {
                var fileReader = new FileReader();

                fileReader.onload = function(){var fileData = fileReader.result};
                fileReader.readAsText(file);             
            }

            fileEntry.file(read);
        }

        directoryEntry.getFile(
            "testFile", 
            {create: false},
            readFile
        );
    }

    requestFileSystem(Window.PERSISTENT, grantedQuota, getFile);
}

var desiredQuota = 1024 * 1024 * 1024;
var quotaManagementObj = navigator.webkitPersistentStorage;
quotaManagementObj.requestQuota(desiredQuota, onQuotaRequestSuccess); 
```

* * *

但是，如果您在开始时对任何问题回答“否”怎么办？

如果您对非本地解决方案持开放态度，Silverlight 还允许通过[独立](https://msdn.microsoft.com/en-us/library/bdts8hk0(v=vs.95).ASPX)存储从选项卡/窗口竞赛中进行文件 i/o 。但是，需要[托管代码](https://msdn.microsoft.com/en-us/library/windows/desktop/bb318664(v=vs.85).aspx)才能使用此功能；需要编写此类代码的解决方案超出了此问题的范围。

当然，使用补充托管代码的解决方案，只留下一个 Javascript 来编写，完全在这个问题的范围内；）：

```
//Write file to first of either FileSystem or IsolatedStorage
bakedGoods.set({
    data: [{key: "testFile", value: "Hello world!", dataFormat: "text/plain"}],
    storageTypes: ["fileSystem", "silverlight"],
    options: {fileSystem:{storageType: Window.PERSISTENT}},
    complete: function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

**BakedGoods 由这里的这个人维护 :)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T03:03:44.793

如果（且仅当）您的平台是 IE，您可以利用 HTA（HTML 应用程序）框架：

[http://msdn.microsoft.com/en-us/library/ms536471(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms536471(VS.85).aspx)

使用它的应用程序被授予系统级权限，并且可以使用与 Windows 脚本主机相同的对象（例如文件系统对象来读取和访问本地文件）。

我过去曾成功地将它用于小型工作组应用程序并喜欢它——但这是在一个仅限 IE 的企业环境中。

# python - 内存上数据库表的最佳表示形式以及在 python 上逐行查询的方法？

> ID：12023860
> 
> 赞同：1
> 
> 时间：2012-08-19T02:54:09.330
> 
> 标签：python, datatable

我有一个 XLS 表，我正在用 python 解析，目前我用一个作为键 (line_number,column_number) 的哈希来表示它——实际上我使用的是其他标识符，但为了简单起见，这可以解释这种情况.

现在，假设我有兴趣获取该表的给定行，我正在使用：

```
for k, v in self.table.iteritems():
    if k[0] == '1': 
        # do whatever 
```

换句话说，我正在访问每个单元格并验证其线路，这似乎不是最好的方法。在这一点上，我不确定使用带有部分键的哈希是否是最好的方法。当然，使用数据库可能是最好的选择，但鉴于我的数据集非常小，我宁愿让程序保持简单，只在内存中使用它。因此，我的问题缩小到：

1.  有没有更好的方法来表示 python 上的内存表？
2.  我将如何从中获得一条线？（给出最好的表示）

我希望这个问题是相关的。我找不到合适的关键字来搜索这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T09:13:27.587

```
from collections import defaultdict

columns = ['col1', 'col2']
table = [
    ['abc', 123],
    ['def', 456],
    ['ghi', 123],
]

view = dict((name, defaultdict(list)) for name in columns)
for row in table:
    for i, col in enumerate(row):
        name = columns[i]
        view[name][col].append(row)

print view['col1']['abc']
print view['col2'][123] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:38:53.150

我使用数组和列表存储了内存表，您可以根据位置调用特定项目：

```
array = [
  ['John', 19, 'male'], 
  ['Sara', 22, 'female'] 
] 
```

你考虑过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T03:19:14.257

我会修改[Dugres](https://stackoverflow.com/users/97198/dugres)的答案，以便按行提供对表的访问，更有效地使用内存并尝试更自然地使用 dict 类。在此示例中，行键来自一个简单的数字枚举，从 0 开始计数。

```
columns = ['col1', 'col2']
table = [
    ['abc', 123],
    ['def', 456],
    ['ghi', 123],
]

# build view from a comprehension
view = {i: {columns[j]: table[i][j] for j in range(len(columns))} for i in range(len(table))}

# build view procedurally
view = dict()
for i, row in enumerate(table):
    view[i] = dict()
    for j, col in enumerate(row):
        view[i][columns[j]] = col

# view contents
view
{0: {'col2': 123, 'col1': 'abc'}, 
1: {'col2': 456, 'col1': 'def'}, 
2: {'col2': 123, 'col1': 'ghi'}}

# Cell by row and column
>>> view[0]['col1']
'abc'

# List of cells for row 0:
>>> [view[0][col] for col in columns]
['abc', 123]

# All cells in col2:
>>> [view[row]['col2'] for row in sorted(view.keys())]
[123, 456, 123]

# All rows with value 123 in col2, using a list generator expression
[[view[row][column] for column in columns] for row in view.keys() for col in columns if view[row][col] == 123]
[['abc', 123], ['ghi', 123]]

# All rows with value 123 in col2, using a list generator function
def rowGenerator(view, col, value):
    for row in view.keys():
    if view[row][col] == value:
        yield [view[row][colName] for colName in columns]

>>> [row for row in rowGenerator(view, 'col2', 123)]
[['abc', 123], ['ghi', 123]] 
```

# css - 使用边距后，导航栏/无序列表中的列表项保持左对齐：0 auto

> ID：12023862
> 
> 赞同：0
> 
> 时间：2012-08-19T02:54:44.430
> 
> 标签：css, centering

在将“margin: 0 auto”应用于无序列表、水平导航栏后，我可以将列表元素居中，但列表中包含的项目在列表中左对齐。我在网上看到的例子并没有说明必须重新定位 li 元素，所以我怀疑我做错了什么。我可以看到列表实际上是居中的，因为我在它周围放置了黑色边框，但项目不是。

```
#navBarList 
{
    width: 25%;
    margin: 0 auto;
    list-style-type: none;
    overflow: hidden;
    border-width: 3px;
    border-color: black;
    border-style: solid;     
}

#navBarList li 
{
   float: left;   
}
---------------------------------

<div id="navBarDiv">
    <ul id="navBarList">
        <li>Plots</li>
        <li>Reports</li>
        <li>Map</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:12:36.870

我猜你的意思是给`li`元素一个宽度，而不是它包含`ul`元素。摆脱 ，`margin: 0 auto;`除非您想在`ul`' 容器中居中。 `list-style-type: none;`也应该在 li 元素上，但我认为这并不重要~~，因为浮动它们会将它们显示为（浮动）块而不是列表项~~。更正后的 CSS 如下：

```
#navBarList 
{
    overflow: hidden;
    border-width: 3px;
    border-color: black;
    border-style: solid;     
}

#navBarList li 
{
    list-style-type: none;  
    width: 25%;
    float:left;
}​ 
```

[您的示例的 JSFiddle（已修改）](http://jsfiddle.net/Fn3gQ/)

如果您打算使文本在元素中居中，您可能还需要添加`text-align: center;`到规则中。`#navBarList li``li`

编辑：实际上，我可能对列表项有误。在 chrome 中浮动它们使它们不像列表项，我正在考虑另一个规则（内联项作为块元素浮动）。不确定那个。

# r - 排除与另一个数据框中的多个列值匹配的数据框中的行

> ID：12023863
> 
> 赞同：0
> 
> 时间：2012-08-19T02:55:00.140
> 
> 标签：r

df1

```
 day  primer replicate count
011311     Arc        b1     0
011311    Bdnf        b1     0
011311    Bves        b1     0
011311     Crh        b1     0
011311    Egr1        b1     0 
```

我有以下 df1，并希望排除 df2 中等于 df1 的引物和复制值的行。

df2

```
primer exptname concentrate timepoints replicate  day     realConc
Acan      0hr        55mM          0        b1 011311 0.0002771494
Acan      0hr        55mM         20        b1 011311 0.0061298654
Acan      0hr        55mM         40        b1 011311 0.0015750373
Arc       0hr        55mM          0        b1 011311 0.0010109867
Arc       0hr        55mM         20        b1 011311 0.0035939088
Arc       0hr        55mM         40        b1 011311 0.0133760938 
```

所以我想我的问题是我不知道如何进行 2 路匹配。然后排除这些值（在这种情况下为行）

我要这个

新的_df

```
primer exptname concentrate timepoints replicate  day     realConc
Acan      0hr        55mM          0        b1 011311 0.0002771494
Acan      0hr        55mM         20        b1 011311 0.0061298654
Acan      0hr        55mM         40        b1 011311 0.0015750373 
```

我在想类似的事情：

```
new_df <- df2[!which(match(paste(df2$primer,df$replicate),paste(df1$primer,df$replicate))),] 
```

显然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:04:14.807

```
exclude<-!(paste(df2$primer,df2$replicate,sep='~')%in%paste(df1$primer,df1$replicate,sep='~'))
df2[exclude,]
#  primer exptname concentrate timepoints replicate   day     realConc
#1   Acan      0hr        55mM          0        b1 11311 0.0002771494
#2   Acan      0hr        55mM         20        b1 11311 0.0061298654
#3   Acan      0hr        55mM         40        b1 11311 0.0015750373 
```

如果您不喜欢使用粘贴，您也可以使用

```
exclude<-!((df2$primer%in%df1$primer)&(df2$replicate%in%df1$replicate)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T03:29:05.143

这应该这样做：

```
 df2[ !df2$primer %in% df1$primer, ] 
```

# python - 烧瓶，python，HTML的错误请求错误，flask.request.form的异常初始化行为

> ID：12023864
> 
> 赞同：10
> 
> 时间：2012-08-19T02:55:10.003
> 
> 标签：python, html, flask, bad-request

我正在使用烧瓶、python 和 HTML 编写一个网络应用程序。我的问题是第一次加载网页时，出现以下错误

> 错误请求 浏览器（或代理）发送了此服务器无法理解的请求。

我能够通过“欺骗”首先在没有任何`flask.request.form`调用的情况下运行它，然后将它们放回原处来最终加载页面（详情如下）。我的初始化一定有问题。我是新手`flask`并使用`python`with `HTML`。

假设我在一个名为`example`. 我有一个名为的 python 脚本`test.py`和一个名为的 HTML 模板`test.html`，其目录结构如下：

```
\example\test.py
\example\templates\test.html 
```

我的python脚本`test.py`是：

```
import sys
import flask, flask.views
app = flask.Flask(__name__)
app.secret_key = "bacon"

class View(flask.views.MethodView):
    def get(self):
        result = flask.request.form['result']
        return flask.render_template('test.html', result=result)
#       return flask.render_template('test.html')
    def post(self):
        return self.get()

app.add_url_rule('/', view_func=View.as_view('main'), methods=['GET', 'POST'])
app.debug = True
app.run() 
```

我的 HTML`test.html`是

```
<html>
    <head>
    </head>
    <body>
        <form action="/" method="post">
            Enter something into the box:
            <input type="text" name="result"/><br>
            <input type="submit" value="Execute!"/>
        </form>
    </body>
</html> 
```

**重现错误的步骤**

1：运行`test.py`脚本，在浏览器中打开网址

```
Running on http://127.0.0.1:5000/ 
```

您应该看到以下错误

> 错误请求 浏览器（或代理）发送了此服务器无法理解的请求。

2：注释掉函数的前 2 行，`def get(self)`取消注释函数的第 3 行`def get(self)`，`test.py`看起来像这样

```
import sys
import flask, flask.views
app = flask.Flask(__name__)
app.secret_key = "bacon"

class View(flask.views.MethodView):
    def get(self):
#       result = flask.request.form['result']
#       return flask.render_template('test.html', result=result)
        return flask.render_template('test.html')
    def post(self):
        return self.get()

app.add_url_rule('/', view_func=View.as_view('main'), methods=['GET', 'POST'])
app.debug = True
app.run() 
```

3：刷新 URL，你会看到一切正常（尽管我最终希望能够返回`result`

4：现在，再次切换注释掉的行。即，取消注释函数的前 2 行`def get(self)`并注释掉函数的第 3 行，`def get(self)`使其`test.py`看起来像这样

```
import sys
import flask, flask.views
app = flask.Flask(__name__)
app.secret_key = "bacon"

class View(flask.views.MethodView):
    def get(self):
        result = flask.request.form['result']
        return flask.render_template('test.html', result=result)
#       return flask.render_template('test.html')
    def post(self):
        return self.get()

app.add_url_rule('/', view_func=View.as_view('main'), methods=['GET', 'POST'])
app.debug = True
app.run() 
```

5：刷新 URL，现在您会看到一切正常。

这只是一个玩具示例，说明了展示这种奇怪行为的真正问题，即我必须如何“欺骗”我的浏览器向我展示这个网页。这

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-19T03:01:08.123

这里的问题是您试图`POST`在仅处理`GET`请求的方法中访问 ed 变量。当您尝试访问未设置的查询字符串或 POST 参数[时，默认情况下，Flask 会引发`BadRequest`错误](http://flask.pocoo.org/docs/quickstart/#the-request-object)（因为您正在要求访问页面的人没有提供的内容）。

> 如果表单属性中不存在键会怎样？在这种情况下，会引发特殊的 KeyError。您可以像标准的 KeyError 一样捕获它，但如果您不这样做，则会显示 HTTP 400 Bad Request 错误页面。因此，在许多情况下，您不必处理该问题。

如果您需要从`request.args`(GET) 或`request.form`(POST) 访问变量并且*不需要*设置它，请使用该`get`方法获取值（如果它存在）（或者`None`如果它未设置。

```
# Will default to None
your_var = request.form.get("some_key")

# Alternately:
your_var = request.form.get("some_key", "alternate_default_value") 
```

这是构建代码的另一种方法：

```
import sys
import flask, flask.views

app = flask.Flask(__name__)

app.secret_key = "bacon"
app.debug = True

class View(flask.views.MethodView):
    def get(self):
        """Enable user to provide us with input"""
        return self._default_actions()

    def post(self):
        """Map user input to our program's inputs - display errors if required"""
        result = flask.request.form['result']
        # Alternately, if `result` is not *required*
        # result = flask.request.form.get("result")
        return self._default_actions(result=result)

    def _default_actions(self, result=None):
        """Deal with the meat of the matter, taking in whatever params we need
        to get or process our information"""
        if result is None:
            return flask.render_template("test.html")
        else:
            return flask.render_template("test.html", result=result)

app.add_url_rule('/', view_func=View.as_view('main'), methods=['GET', 'POST'])

if __name__ == "__main__":
    app.run() 
```

# analytics - 社交媒体数据提供商

> ID：12023871
> 
> 赞同：4
> 
> 时间：2012-08-19T02:57:09.260
> 
> 标签：analytics, social-media

如今，许多公司都在提供基于社交媒体数据的分析。为了做到这一点，每家公司都必须从不同的社交网络（如 twitter、facebook 等）获取数据。如果我们可以使用一个单一的数据提供商来为我们提供所有社交网站的数据，那就太好了。这样，每家公司都不必构建自己的数据基础架构，并且可以只专注于分析而不是数据获取。[http://www.gnip.com](http://www.gnip.com)就是这样的数据提供者之一。有谁知道更多这样的数据提供者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T00:56:03.380

我实际上可以想到很多这样的数据提供者。Gnip 显然是房间里的大孩子……但其他一些人是：

*   [http://www.datasift.com](http://www.datasift.com)
*   [http://www.collectiveintellect.com](http://www.collectiveintellect.com)
*   [http://www.spinn3r.com/](http://www.spinn3r.com/)（不像一个包罗万象的聚合器，但仍然可以用于您描述的目的）

我敢肯定还有其他人，但 Gnip 和这三个（尤其是 Datasift 和 Gnip）似乎是这类最大的数据提供者。

# asp.net - 当 customErrors mode= 'Off' 并且错误在 Application_Error 事件中被清除时，ELMAH 记录

> ID：12023873
> 
> 赞同：0
> 
> 时间：2012-08-19T02:57:51.093
> 
> 标签：asp.net, elmah

这个问题与在 ASP.Net 应用程序中使用 ELMAH 有关。我的 web.config 中有以下内容。

```
<customErrors mode="Off" ">
</customErrors> 
```

此外，每当发生未处理的错误时，我都会在 Application_Error 事件中将其清除，如下面的代码所示。

```
protected void Application_Error(object sender, EventArgs e)
{
  Server.ClearError();
  Response.Redirect("~/errorpages/error.aspx");
} 
```

**我的问题**：在这种情况下，ELMAH 会记录错误并通过电子邮件发送吗？我在 web.config 文件中有 ELMAH 的标准配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:37:21.603

看来，如果出现`Application_Error event is reached, then ELMAH will log and email`错误，即使您通过调用 Server.Clear 方法清除错误。但是，如果您的代码未达到 Application_Error 事件，则 ELMAH 将不会记录并通过电子邮件发送错误。

# operating-system - 点64位程序？

> ID：12023875
> 
> 赞同：0
> 
> 时间：2012-08-19T02:58:03.777
> 
> 标签：operating-system

似乎我下载的每个程序都有 32 位和 64 位版本。即使是像记事本克隆这样的小程序。

据我了解，与 32 位相比，64 位程序只能访问超过 4 GB 的内存，那么为什么我们需要 64 位版本的低资源消耗程序呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:01:25.280

在 Intel/Amd 架构上，与经典 x86 相比，64 位应用程序可以访问更多通用寄存器。即使代码的各个位自然较大，因为它们使用的是 64 位整数而不是 32 位，但额外的寄存器实际上可以通过减少寄存器杂耍的需要来减少代码大小。

即使 64 位记事本没有意义，使用本机 OS api 调用（例如 64 位版本）仍然更好，而不必通过兼容性/翻译层调用 32 位版本。

# c# - Visual Studio 事件绑定 2012 Web Express

> ID：12023878
> 
> 赞同：0
> 
> 时间：2012-08-19T02:58:54.820
> 
> 标签：c#, intellisense, visual-studio-2012

在 Visual Studio 2010 中，我习惯于通过智能感知进行手动事件绑定，如下所示，`new EventHander`我的所有事件名称都有包装器。

```
public partial class NiftyUserControl : System.Web.UI.UserControl
{
    public NiftyUserControl()
    {
        //Bind usercontrol 'page' events
        this.Init += new EventHandler(NiftyUserControl_Init);
    }

    void NiftyUserControl_Init(object sender, EventArgs e)
    {
        //Bind usercontrol children events
        cmdBestButtonEver.Command += new CommandEventHandler(cmdBestButtonEver_Click);
    }

    void cmdBestButtonEver_Click(object sender, CommandEventArgs e)
    {
        //Perform Best Magic Ever
    }
} 
```

我安装了新的 Visual Studio 2012 Web Express，现在我的事件创建过程最终如下所示：

```
public partial class GreatSadness : System.Web.UI.UserControl
{
    public GreatSadness()
    {
        //Bind usercontrol 'page' events
        this.Init += GreatSadness_Init;
    }

    void GreatSadness_Init(object sender, EventArgs e)
    {
        //Bind usercontrol children events
        cmdVerySadButton.Command += cmdVerySadButton_Command;
    }

    void cmdVerySadButton_Command(object sender, CommandEventArgs e)
    {
        // =(
    }
} 
```

这对我的气有负面影响。如何告诉 Visual Studio 2012 创建看起来像最顶层示例的事件绑定？

# cmake - 让 CMake 不检测 C++ 编译器

> ID：12023879
> 
> 赞同：7
> 
> 时间：2012-08-19T02:59:34.243
> 
> 标签：cmake

我正在做一个 C 项目。但是其他人告诉我他们无法构建它，因为他们没有 C++ 编译器。

我不知道如何禁用 C++ 的检测。这该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T03:08:22.490

检测 C 和 C++ 工具链是 CMake 的默认行为。要禁用此行为，您需要手动启用该语言。如果它是项目范围的，您可以使用`project(projectName C)`. 此信息在 CMake 文档中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-13T12:57:08.803

最好使用 LANGUAGES C 也结合了更常用的用法

> 项目（项目名称版本 1.0 语言 C）

# c# - 过滤具有匿名类型但需要 Predicate 的 ICollectionView? I have an ICollectionView built from a LINQ to Entities query comprised of an anonymous object ...I want to apply filter to this collection, however the Filter property expects a Predicate 问问题 问问题 2012-08-19T03:00:38.030 885 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an ICollectionView built from a LINQ to Entities query comprised of an anonymous object ...I want to apply filter to this collection, however the Filter property expects a Predicate What can I do in order to apply the filter on this anonymously typed collection? var playerDatabase = (from p in NFLDataContext.DimPlayers join c in NFLDataContext.DimColleges on p.CollegeID equals c.CollegeID join pos in NFLDataContext.DimPositions on p.PositionID equals pos.PositionID select new { FirstName = p.FirstName, LastName = p.LastName, FullName = p.FirstName + " " + p.LastName, CollegeName = c.CollegeName, CollegeID = p.CollegeID, PositionCode = pos.PositionCode, PositionName = pos.PositionName, PositionID = p.PositionID, PlayerID = p.PlayerID }).ToList(); dgPlayers.ItemsSource = playerDatabase; Elsewhere in an event handler .... string SomeFilterCondition; ICollectionView view = CollectionViewSource.GetDefaultView(dgPlayers.ItemsSource); view.Filter = (item) => { ????????????? }; How about casting it to dynamic? Smth like: var dynamicItem = item as dynamic; return dynamicItem.FirstName == "Heines"; Otherwise you could checkout this answer for casting to an anonymous type - however, as the poster mentions, this probably does not make much sense in most scenarios :-) https://stackoverflow.com/a/1409776/454272 c#.netwpf 4 3 回答 3 This answer is useful 3 将其转换为动态怎么样？喜欢： var dynamicItem = item as dynamic; return dynamicItem.FirstName == "Heines"; 否则，您可以签出此答案以转换为匿名类型-但是，正如海报所提到的，这在大多数情况下可能没有多大意义:-) https://stackoverflow.com/a/1409776/454272 于 2012-08-19T07:08:53.330 回答 This answer is useful 2 This should work - view.Filter = (item) => { dynamic anyonymousItem = item; // Your condition here return anyonymousItem.CollegeID == 1; }; 于 2012-08-19T08:02:18.370 回答 This answer is useful 1 Using dynamc is not the best option here in my opinion. You should create a class which contains your propertys (e.g. Player) and then change your query to select new Player(). In the filter you can then check if the object is of type Player and cast if necessary. Like this you don't have to rely on dynamic dispatch and get all of the benefits of static typing (e.g. compile time errors if you write the property name wrong or change its name). 于 2012-08-19T09:18:01.787 回答 Related 3 python - 使用 Python 计算文本文件中的列数 3 python - 龙卷风和 WTForms 0 wordpress - WordPress 工具栏：在索引页面上不显示特定用户 1 jquery - 仅检索 DataTables 中已修改的行 2 javascript - 为什么我的java脚本函数无故中途停止 1 python - 从客户端到服务器的扭曲图像传输导致格式错误 1 java - “合并”两个自定义列表视图适配器的正确方法 1 php - 在 php 中继续超时脚本的最佳方法是什么？ 1 java - 在一个Eclipse插件的源文件中，为什么很多变量都以“f”为前缀？ 3 database - 存储时间序列数据的最佳方式，需要大量写入和高度聚合。（约 10 亿点） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12023882
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, .net, wpf

I have an ICollectionView built from a LINQ to Entities query comprised of an anonymous object ...I want to apply filter to this collection, however the Filter property expects a Predicate

What can I do in order to apply the filter on this anonymously typed collection?

```
var playerDatabase = (from p in NFLDataContext.DimPlayers
                    join c in NFLDataContext.DimColleges on p.CollegeID equals c.CollegeID
                    join pos in NFLDataContext.DimPositions on p.PositionID equals pos.PositionID
                    select new
                    {
                        FirstName = p.FirstName,
                        LastName = p.LastName,
                        FullName = p.FirstName + " " + p.LastName,
                        CollegeName = c.CollegeName,
                        CollegeID = p.CollegeID,
                        PositionCode = pos.PositionCode,
                        PositionName = pos.PositionName,
                        PositionID = p.PositionID,
                        PlayerID = p.PlayerID
                    }).ToList();

        dgPlayers.ItemsSource = playerDatabase; 
```

Elsewhere in an event handler ....

```
 string SomeFilterCondition;
        ICollectionView view = CollectionViewSource.GetDefaultView(dgPlayers.ItemsSource);
        view.Filter = (item) =>
        {
             ?????????????
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:08:53.330

将其转换为动态怎么样？喜欢：

```
var dynamicItem = item as dynamic;
return dynamicItem.FirstName == "Heines"; 
```

否则，您可以签出此答案以转换为匿名类型-但是，正如海报所提到的，这在大多数情况下可能没有多大意义:-)

[https://stackoverflow.com/a/1409776/454272](https://stackoverflow.com/a/1409776/454272)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T08:02:18.370

This should work -

```
view.Filter = (item) =>
        {
             dynamic anyonymousItem = item;
             // Your condition here
             return anyonymousItem.CollegeID == 1;
        }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T09:18:01.787

Using dynamc is not the best option here in my opinion. You should create a class which contains your propertys (e.g. Player) and then change your query to `select new Player()`. In the filter you can then check if the object is of type `Player` and cast if necessary.

Like this you don't have to rely on dynamic dispatch and get all of the benefits of static typing (e.g. compile time errors if you write the property name wrong or change its name).

# mysql - 检查表是否可以存储更多

> ID：12023894
> 
> 赞同：1
> 
> 时间：2012-08-19T03:03:10.410
> 
> 标签：mysql, store

在表中有很多行不断增加，因为它取决于访问者。请给我建议任何方法来检查表格是否可以存储更多。如果没有，我会做一张新桌子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:18:24.580

MySQL 通常可以接受更多数据，直到您用完磁盘空间。请记住，为了获得最佳性能，您可能希望偶尔运行`OPTIMIZE TABLE`一次，但要做到这一点，您需要有足够的磁盘空间来制作该表的完整副本。

如果您使用的是 InnoDB，则默认情况下所有数据都存储在同一个文件中。删除数据永远不会缩小这一点，除非转储和恢复您的数据库。有一个选项 ，`innodb_file_per_table`可将每个表保存到多个文件中，这在您的情况下可能更有效。如果你删除任何给定的表，它占用的空间会立即被回收。

如果您想知道您的数据占用了多少空间，请运行：

```
SHOW TABLE STATUS 
```

# regex - 使用 Apache Rewrite Module 进行复杂的重写

> ID：12023898
> 
> 赞同：0
> 
> 时间：2012-08-19T03:03:56.120
> 
> 标签：regex, apache, mod-rewrite, url-rewriting

我想使用 apache rewrite 模块进行复杂的重写。

例如，如果网址是[http://www.site.com/wall](http://www.site.com/wall)和[http://www.site.com/profile](http://www.site.com/profile)和[http://www.site.com/info](http://www.site.com/info)我想重写为[http:// www.site.com/gotopage.php?page=wall](http://www.site.com/gotopage.php?page=wall)或[http://www.site.com/gotopage.php?page=profile](http://www.site.com/gotopage.php?page=profile)等等

但是，如果 url 不是那个，我想以另一种方式传递它，例如。如果 url 是[http://www.site.com/newthing](http://www.site.com/newthing)那么它应该重写为[http://www.site.com/index.php?params=newthing](http://www.site.com/index.php?params=newthing)

请帮忙。我试图查看其他问题，但没有得到它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:11:49.360

```
RewriteEngine On
# Special rule for 3 unique cases
RewriteRule /(wall|profile|info)$ /gotopage.php?page=$1 [L]

# Only rewrite if the URL has not yet been rewritten
RewriteCond %{HTTP_URL} (?!gotopage\.php|index\.php)
RewriteRule /([^/]+) /index.php?params=$1 [L] 
```

这是逐行解释：

1.  任何与 3 个指定单词之一匹配的 URL 都会被重写以转到`gotopage.php`.

2.  这一行是下一行的条件。只有当 URL 与这个正则表达式匹配时，才会考虑下一行。正则表达式检查以确定请求*尚未*发送到`gotopage.php`或`index.php`。如果是，我们不想重写任何东西（我们只会陷入无限循环）。

3.  如果请求的 URL 没有后续的斜杠，则将其重写为`index.php`.

# javascript - 如何在 Meteor 的 Mongo 查询中使用变量作为字段名？

> ID：12023901
> 
> 赞同：8
> 
> 时间：2012-08-19T03:04:35.663
> 
> 标签：javascript, mongodb, meteor

我将如何在 Meteor 应用程序的 Mongo 查询中使用变量作为字段名称。

这是一个例子......

在将集合名称大写为孩子的父 ID 之后，这会在我的请求控制器集合上运行查找。孩子是**用户**字段。

```
window[Meteor.request.controller.capitalise()]["find"]({ _id: Session.get('parent_id'), users: params.child }).count() 
```

如您所见，我的控制器是集合项的变量名称，它允许我使用一行代码来查找控制器/集合的子项，但我需要能够将子字段名称设置为变量。在上面的示例中，这将是**用户**，但我希望它是一个变量名。

我已经尝试过了，但它不起作用。

```
window[Meteor.request.controller.capitalise()]["find"]({ _id: Session.get('parent_id'), [Session.get('child_collection_name').decapitalise()]: params.child }).count() 
```

在哪里

```
Session.get('child_collection_name').decapitalise() 
```

返回**用户**

有任何想法吗？如果我能弄清楚如何在流星的 mongo 查询中使用变量名，它将显着减少我的代码占用空间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-19T03:15:07.947

查询只是一个 JavaScript 对象，因此您可以逐步构建它：

```
var query = { _id: Session.get('parent_id') };
var myCustomField = Session.get('child_collection_name').decapitalise();
var myCustomValue = params.child;
query[myCustomField] = myCustomValue;
var count = SomeCollection.find(query).count(); 
```

这行得通吗？

# android - Android 中 ListView 的设计问题

> ID：12023904
> 
> 赞同：0
> 
> 时间：2012-08-19T03:05:18.883
> 
> 标签：android, listview

我正在尝试在 ListView 中显示提要消息。如果我在初始化 ListView 之前拥有所有可用的内容，那么它工作得很好。现在我正在尝试获取图像，因为图像很昂贵，我正在尝试进行延迟加载。我创建了一个获取对象的异步 http 函数。

据我了解，给定 ListView 的所有单元格都是在 ArrayAdapter 对象的单个实例中创建的。现在的问题是，当 async-http 函数返回数据时，对实际 ImageView 的引用已经被另一个单元格的另一个实例替换。结果，图像开始随机出现在每个地方。

我认为这是一个设计缺陷，我正在尝试这样做。

关于如何解决这个问题有什么更好的建议吗？（虽然仍然能够使用 async-http 调用进行延迟加载）

谢谢！

编辑：我用 ListView 和 ExpandableListView 试过这个，这是来自 ExpandableListView 实现的代码。

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.activity_feed_exlist_child_row, null);
        }

        String msgId        = data.get(childPosition).get("msgid");
        String picId        = data.get(childPosition).get("fileName");
        TextView txtMsg     = (TextView) convertView.findViewById(R.id.txtMsg);

        txtMsg.setText(data.get(childPosition).get("msg"));
        ImageView imgStatusMsgBackgroud = (ImageView) convertView.findViewById(R.id.imgStatusMsgBackground);

        String requestURL       = "picture.php?action=getPicture&picid=" + picId;
        MyHTTPRequest httpReq   = new MyHTTPRequest(requestURL, this);
        httpReq.startAsynchronous();

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T04:46:58.473

经过一番搜索，找到了一些很好的参考资料。谢谢大家。-[使用 AsyncTask 在 ListView 中加载图像](https://stackoverflow.com/questions/7729133/using-asynctask-to-load-images-in-listview) - [http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)

# wcf - 如何使用自定义筛选器更改 WCF 路由器备份列表行为？

> ID：12023909
> 
> 赞同：1
> 
> 时间：2012-08-19T03:06:21.960
> 
> 标签：wcf, wcf-routing

我正在尝试找到一种方法来处理 WCF 路由器中的异常，这意味着当由于任何原因路由器无法将消息发送到主端点（这里有 EndpointNotFoundException、ServerTooBusyException 或 CommunicationObjectFaultedException）并从备份列表中选择一个端点时并将此消息发送到备份端点。如何在路由器服务中获取此内部异常？因为此时我想在内存中动态更改路由器配置，并用主端点更改备份端点。是否可以使用 IErrorHandler 执行此操作？还是可以做这个自定义过滤器？如何使用自定义过滤器更改备份行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:12:23.683

这是实现 IErrorHandler fo wcf 服务的完整工作示例。我们可以为 WCF 路由器实现这一点，并在路由器级别获取内部异常，然后决定如何在运行时更改配置。

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [FaultContract(typeof(MyFault))]
    string GetData(int value);
}

[DataContract]
public class MyFault
{

}

public class Service1 : IService1
{
    public string GetData(int value)
    {
        throw new Exception("error");
    }
}

public class MyErrorHandler : IErrorHandler
{
     public bool HandleError(Exception error)
     {
         return true;
     }

     public void ProvideFault(Exception error, MessageVersion version, ref Message msg)
     {
         var vfc = new MyFault();
         var fe = new FaultException<MyFault>(vfc);
         var fault = fe.CreateMessageFault();
         msg = Message.CreateMessage(version, fault, "http://ns");
     }
}

public class ErrorHandlerExtension : BehaviorExtensionElement, IServiceBehavior
{
     public override Type BehaviorType
     {
         get { return GetType(); }
     }

     protected override object CreateBehavior()
     {
         return this;
     }

     private IErrorHandler GetInstance()
     {
         return new MyErrorHandler();
     }

     void IServiceBehavior.AddBindingParameters(ServiceDescription serviceDescription,      ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {

    }

    void IServiceBehavior.ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        IErrorHandler errorHandlerInstance = GetInstance();
        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
        {
            dispatcher.ErrorHandlers.Add(errorHandlerInstance);
        }
    }

    void IServiceBehavior.Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ServiceEndpoint endpoint in serviceDescription.Endpoints)
        {
            if (endpoint.Contract.Name.Equals("IMetadataExchange") &&         endpoint.Contract.Namespace.Equals("http://schemas.microsoft.com/2006/04/mex"))
                continue;

            foreach (OperationDescription description in endpoint.Contract.Operations)
            {
                 if (description.Faults.Count == 0)
                 {
                     throw new InvalidOperationException("FaultContractAttribute not found on this method");
                 }
            }
        }
    }
} 
```

网络配置：

```
 <system.serviceModel>
     <services>
         <service name="ToDD.Service1">
             <endpoint address="" binding="basicHttpBinding" contract="ToDD.IService1" />
         </service>
     </services>

     <behaviors>
         <serviceBehaviors>
             <behavior>
                 <serviceMetadata httpGetEnabled="true"/>
                 <serviceDebug includeExceptionDetailInFaults="false"/>
                 <errorHandler />
             </behavior>
         </serviceBehaviors>
     </behaviors>

     <extensions>
         <behaviorExtensions>
             <add name="errorHandler" type="ToDD.ErrorHandlerExtension, ToDD, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
         </behaviorExtensions>
     </extensions>
</system.serviceModel> 
```

因此在 HandleError 方法中，我们可以以适当的方式处理此异常。

# jquery - 在可排序的 jQuery UI 中的 dropzone 上拖动时停止插入元素

> ID：12023911
> 
> 赞同：1
> 
> 时间：2012-08-19T03:06:33.327
> 
> 标签：jquery, jquery-ui

我有两个关于 jQuery UI 可排序的问题（两个表和 td 中的一个 div 在表之间移动）

1）我想在拖放区上拖动时阻止插入空格。我尝试了以下但它不起作用（我还需要突出显示放置区域）：

```
$(".numdrag, .numdrop").sortable({
  placeholder: 'drophighlight',
  connectWith: ".numdrop",
  receive: function (event, ui) {
    if ($(this).find('.numdrag').size() == 2) {
      $(ui.sender).sortable('cancel');
    }
  },
  over: function (event, ui) {
    event.preventDefault();
  }
}); 
```

2）我想用拖动的数据替换dropzone中的数据。

# hibernate - @ElementCollection 应该为正在嵌入的集合自动创建表。但它不是创造。显示以下错误

> ID：12023913
> 
> 赞同：1
> 
> 时间：2012-08-19T03:06:38.470
> 
> 标签：hibernate, jpa

```
package com.qpi.dao;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;

import javax.persistence.ElementCollection;
import javax.persistence.Entity;
import javax.persistence.Id;
/*import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
*/import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;

@Entity
@Table(name="QPI_Report")
public class FinalCheckListReport {

    @Id 
    private Integer projectId;

    @Temporal(TemporalType.DATE)
    private Date date ;

    @ElementCollection
    private Collection<PMGenericPoints> genericcheckpoints = new ArrayList<PMGenericPoints>();

    @ElementCollection
    private Collection<ClosurePoints> closurepoints = new ArrayList<ClosurePoints>();

    @ElementCollection
    private Collection<DevPoints> devPoints = new ArrayList<DevPoints>();

    @ElementCollection
    private Collection<CarPoints> carPoints = new ArrayList<CarPoints>();

    @ElementCollection
    private Collection<TriggerBasedPoints> triggerpoints = new ArrayList<TriggerBasedPoints>();

    @ElementCollection
    private Collection<MetricsPoints> metricspoints = new ArrayList<MetricsPoints>();

    @ElementCollection
    private Collection<CMPoints> cmPoints = new ArrayList<CMPoints>();

    @ElementCollection
    private Collection<MaintenancePoints> maintenancePoints = new ArrayList<MaintenancePoints>();

    @ElementCollection
    private Collection<IsmsPoints> ismspoints = new ArrayList<IsmsPoints>();

    @ElementCollection
    private Collection<KtAndInitiationPoints> kt = new ArrayList<KtAndInitiationPoints>();

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public Integer getProjectId() {
        return projectId;
    }

    public void setProjectId(Integer projectId) {
        this.projectId = projectId;
    }

    public Collection<PMGenericPoints> getGenericcheckpoints() {
        return genericcheckpoints;
    }

    public void setGenericcheckpoints(
            Collection<PMGenericPoints> genericcheckpoints) {
        this.genericcheckpoints = genericcheckpoints;
    }

    public Collection<ClosurePoints> getClosurepoints() {
        return closurepoints;
    }

    public void setClosurepoints(Collection<ClosurePoints> closurepoints) {
        this.closurepoints = closurepoints;
    }

    public Collection<DevPoints> getDevPoints() {
        return devPoints;
    }

    public void setDevPoints(Collection<DevPoints> devPoints) {
        this.devPoints = devPoints;
    }

    public Collection<CarPoints> getCarPoints() {
        return carPoints;
    }

    public void setCarPoints(Collection<CarPoints> carPoints) {
        this.carPoints = carPoints;
    }

    public Collection<TriggerBasedPoints> getTriggerpoints() {
        return triggerpoints;
    }

    public void setTriggerpoints(Collection<TriggerBasedPoints> triggerpoints) {
        this.triggerpoints = triggerpoints;
    }

    public Collection<MetricsPoints> getMetricspoints() {
        return metricspoints;
    }

    public void setMetricspoints(Collection<MetricsPoints> metricspoints) {
        this.metricspoints = metricspoints;
    }

    public Collection<CMPoints> getCmPoints() {
        return cmPoints;
    }

    public void setCmPoints(Collection<CMPoints> cmPoints) {
        this.cmPoints = cmPoints;
    }

    public Collection<MaintenancePoints> getMaintenancePoints() {
        return maintenancePoints;
    }

    public void setMaintenancePoints(Collection<MaintenancePoints> maintenancePoints) {
        this.maintenancePoints = maintenancePoints;
    }

    public Collection<IsmsPoints> getIsmspoints() {
        return ismspoints;
    }

    public void setIsmspoints(Collection<IsmsPoints> ismspoints) {
        this.ismspoints = ismspoints;
    }

    public Collection<KtAndInitiationPoints> getKt() {
        return kt;
    }

    public void setKt(Collection<KtAndInitiationPoints> kt) {
        this.kt = kt;
    }

} 
```

****** *** ** *** ** *** ** *** ** *** ** *** *******运行时出错******* *** ** *** ** *** ** *** ** *** **********

 *****2012 年 8 月 19 日上午 8:30:22 org.apache.catalina.core.StandardWrapperValve 调用严重：Servlet.service() 用于路径 [/QPIAutomation] 上下文中的 servlet [dispatcher] 引发异常 [请求处理失败；嵌套异常是 org.hibernate.exception.SQLGrammarException：无法插入集合：**[com.qpi.dao.FinalCheckListReport.carPoints#1]]，根本原因是 java.sql.BatchUpdateException：表 'qpi.finalchecklistreport_carpoints' 不存在于**com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1693) 在 com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1108) 在 org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)在 org.hibernate.jdbc.BatchingBatcher.addToBatch(BatchingBatcher.java:56) 在 org.hibernate.persister.collection.AbstractCollectionPersister.recreate(AbstractCollectionPersister.java:1206) 在 org.hibernate.action.CollectionRecreateAction.execute(CollectionRecreateAction.java :58) 在 org.hibernate.engine.ActionQueue.execute(ActionQueue.java:273) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:265) 在 org.hibernate.engine.ActionQueue.executeActions(ActionQueue. java:188) 在 org.hibernate.event.def.AbstractFlushingEventListener。在 org.hibernate.event.def.DefaultFlushEventListener.onFlush 执行执行（AbstractFlushingEventListener.java:321）（DefaultFlushEventListener.java:51）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:54:28.460

您是否`hbm2ddl.auto`在 Persistence.xml 中设置了该属性？这是启用 Hibernate 创建表等所必需的。有关更多解释，请参阅[此问题](https://stackoverflow.com/questions/438146/hibernate-question-hbm2ddl-auto-possible-values-and-what-they-do)。*****

# javascript - 在 Firefox 扩展中压缩字符串

> ID：12023915
> 
> 赞同：0
> 
> 时间：2012-08-19T03:07:09.997
> 
> 标签：javascript, firefox-addon

从这个博客[http://blog.mozilla.org/nfroyd/2012/01/26/compressing-strings-in-js/](http://blog.mozilla.org/nfroyd/2012/01/26/compressing-strings-in-js/)看来应该是可能的，但我在实施时遇到了麻烦（基本上是这样）。

我的代码是

```
function Accumulator() {
    this.buffer = "";
};

Accumulator.prototype = {
    buffer: null,
    onStartRequest: function(request, context) {},
    onStopRequest: function(request, context, statusCode) {},
    onDataAvailable: function(request, context, inputStream, offset, count) {
        var stream = Components.classes["@mozilla.org/binaryinputstream;1"].createInstance(Components.interfaces.nsIBinaryInputStream);
        stream.setInputStream(inputStream);
        var input = stream.readByteArray(count);
        this.buffer += String.fromCharCode.apply(input);
    }
};

function compress(string) {
    var accumulator = new Accumulator();
    var converter = Components.classes["@mozilla.org/streamconv;1?from=uncompressed&to=gzip"].createInstance(Components.interfaces.nsIStreamConverter);
    // More respecifying input/output types.
    converter.asyncConvertData("uncompressed", "gzip", accumulator, null);
    // Oh, that method doesn't actually convert anything, it just prepares
    // the instance for doing conversion.
    var stream = Components.classes["@mozilla.org/io/string-input-stream;1"].createInstance(Components.interfaces.nsIStringInputStream);
    stream.data = string;
    converter.onStartRequest(null, null);
    converter.onDataAvailable(null, null, stream, 0, string.length);
    converter.onStopRequest(null, null, 201 /* 417 */);
    return accumulator.buffer;
}; 
```

但是当我使用它时，我收到一个错误，即 converter.onRequestStart 不是函数。

想知道我是否在做明显错误的事情？

编辑：

1）修正一些明显的错误。Ci 原来我没看懂，是 Components.interfaces。

2）原始代码似乎有onRequestStart/Stop倒退，它们应该是onStartRequest/onStopRequest。

通过这些更改，不再引发任何错误，而且还返回一个空字符串，因此似乎没有发生任何事情。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:59:51.690

认为我已经修复了它（似乎适用于我的基本测试，包括像 espn 这样的大型网站）

```
function Accumulator() {
    this.buffer = "";
};

Accumulator.prototype = {
    buffer: null,
    onStartRequest: function(request, context) {},
    onStopRequest: function(request, context, statusCode) {},
    onDataAvailable: function(request, context, inputStream, offset, count) {
        var stream = Components.classes["@mozilla.org/binaryinputstream;1"].createInstance(Components.interfaces.nsIBinaryInputStream);
        stream.setInputStream(inputStream);
        var input = stream.readByteArray(count);

        this.buffer += String.fromCharCode.apply(null, input);
    }
};

function compress(string) {
    var accumulator = new Accumulator();
    var converter = Components.classes["@mozilla.org/streamconv;1?from=uncompressed&to=gzip"].createInstance(Components.interfaces.nsIStreamConverter);
    // More respecifying input/output types.
    converter.asyncConvertData("uncompressed", "gzip", accumulator, null);
    // Oh, that method doesn't actually convert anything, it just prepares
    // the instance for doing conversion.
    var stream = Components.classes["@mozilla.org/io/string-input-stream;1"].createInstance(Components.interfaces.nsIStringInputStream);
    stream.data = string;
    converter.onStartRequest(null, null);
    converter.onDataAvailable(null, null, stream, 0, string.length);
    converter.onStopRequest(null, null, 201 /* 417 */);
    return accumulator.buffer;
}; 
```

# ruby-on-rails - Rails 如何使配置文件表单接受用户模型属性？

> ID：12023921
> 
> 赞同：0
> 
> 时间：2012-08-19T03:08:31.373
> 
> 标签：ruby-on-rails

我有一个用户配置文件表单，用户在用户数据库中创建用户记录后填写该表单（通过用户模型）。在配置文件表单和配置文件字段中，我有一个实际上来自用户表的电子邮件字段。这是我的设置：

```
class Profile < ActiveRecord::Base
  belongs_to :user
  accepts_nested_attributes_for :user
  ...

class User < ActiveRecord::Base
  has_one :profile
  ... 
```

在个人资料表格中：

```
<%= form_for @profile do |f| %>
  <%= f.fields_for :user do |l| %>
    <%= l.text_field :email, :placeholder => "email address" %>
  <% end %>
  ... 
```

在我的个人资料->新方法中，我有这个..

```
profile.build_user 
```

..现在发生的情况是，在创建配置文件时会创建一个全新的用户记录。我想要的是，在创建配置文件时，应该在用户表中为该用户更新电子邮件地址。有人可以在我的代码中发现问题吗？我怀疑这与我发布的最后一行代码有关，但不确定。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:36:53.327

查看 :accepts_nested_attributes_for 方法，我认为这可能是您正在寻找的

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html#method-i-accepts_nested_attributes_for)

在用户模型中，您可以拥有`accepts_nested_attributes_for :user_profile`

# asp.net-membership - 具有自定义成员资格提供程序的 MVC 4 模板

> ID：12023924
> 
> 赞同：5
> 
> 时间：2012-08-19T03:09:18.603
> 
> 标签：asp.net-membership, asp.net-mvc-4, membership-provider, webmatrix

我想要做的是使用 Visual Studio 2012 附带的默认 MVC 4 模板作为我的新项目的基础。但是，我想用自定义成员提供程序替换 SQL 提供程序，这样我就可以访问我的 RavenDB 来获取我的用户。我已经像以前一样实现了自定义提供程序，但是 WebSecurity 方法抛出了以下异常。

这行代码：

> ViewBag.HasLocalPassword = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name));

具体方法：

> WebSecurity.GetUserId

正在抛出此异常：

> 在调用“WebSecurity”类的任何其他方法之前，您必须调用“WebSecurity.InitializeDatabaseConnection”方法。此调用应放置在站点根目录中的 _AppStart.cshtml 文件中。

现在我不能调用 InitializeDatabaseConnection，因为我的提供者不是 SQL 提供者。此方法需要一个 SQL 提供程序和一个 SQL 连接字符串。这是一个常见问题还是我错过了什么？为什么必须初始化 WebSecurity，为什么它只希望使用 SQL 提供程序进行连接？

我是否只需要更改代码以不使用 WebSecurity 类？

我整天都在这，我很累。我希望我没有忽略一些简单的事情。也许再来一杯朗姆酒和可乐会有所帮助……

更新：2012 年 8 月 19 日

我反编译了 GetUserId 方法，发现它失败的唯一原因是因为 VerifyProvider 调用。

```
public static int GetUserId(string userName)
{
    WebSecurity.VerifyProvider();
    MembershipUser user = Membership.GetUser(userName);
    if (user == null)
        return -1;
    else
        return (int) user.ProviderUserKey;
}

private static ExtendedMembershipProvider VerifyProvider()
{
    ExtendedMembershipProvider membershipProvider = Membership.Provider as ExtendedMembershipProvider;

    if (membershipProvider == null)
        throw new InvalidOperationException(WebDataResources.Security_NoExtendedMembershipProvider);

    membershipProvider.VerifyInitialized();
    return membershipProvider;
} 
```

现在，它在 VerifyProvider 方法中失败的唯一原因是对 VerifyInitialized 的调用，我无法在我的成员资格提供程序中覆盖它。此外，如果它没有调用我的提供程序，那么我不确定在处理 VerifyInitialized 时调用的是什么代码。

```
internal virtual void VerifyInitialized()
{
} 
```

我正在删除 Web.Config 中的所有其他成员资格提供程序。至少我认为我是。这是条目。

```
<membership defaultProvider="RavenMembershipProvider">
    <providers>
        <clear />
        <add name="RavenMembershipProvider" type="BigGunsGym.Infrastructure.Providers.RavenMembershipProvider" />
    </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T16:46:18.423

原来我的提供者继承自 SimpleMembershipProvider 而不是 ExtendedMembershipProvider。我认为可以，因为 SimpleMembershipProvider 继承了 ExtendedMembershipProvider 但它不起作用。

将我的提供程序更改为从 ExtendedMembershipProvider 继承后，错误消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:19:06.557

在创建一个新的 Action 来创建用户之后，我也遇到了同样的问题......

行动是...

```
public ActionResult CreateUsers()
{
string username = "blah blah auto create";
string password = "blah blah auto create";
WebSecurity.CreateUserAndAccount(username, password);
} 
```

但它只需要添加过滤器属性

```
[InitializeSimpleMembership]
public ActionResult CreateUsers()
{
string username = "blah blah auto create";
string password = "blah blah auto create";
WebSecurity.CreateUserAndAccount(username, password);
} 
```

# ios - 在 iOS phonegap 应用程序中播放视频

> ID：12023925
> 
> 赞同：0
> 
> 时间：2012-08-19T03:09:49.167
> 
> 标签：ios

我确信这很容易，但我很难做到。如何将视频添加到 iOS phonegap 应用程序。一个工作的例子会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T16:23:12.007

```
<video id='player' controls src="your url here" 
style="position: absolute; width: 320px; height: 200px;"></video> 
```

使用标签，嵌入视频非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:27:12.570

在 iOS 上，您只需使用普通的 HTML5 视频标签。对于 Android，您必须使用视频插件。

# algorithm - 有谁知道Photoshop“匹配颜色”功能背后使用的算法是什么？

> ID：12023930
> 
> 赞同：7
> 
> 时间：2012-08-19T03:11:24.337
> 
> 标签：algorithm, image-processing, computer-vision, photoshop

有谁知道Photoshop“匹配颜色”功能背后使用的算法是什么？

看来这不仅仅是直方图均衡。

# sql - CONCAT(column) OVER(PARTITION BY ...)？分组连接行而不对结果本身进行分组

> ID：12023933
> 
> 赞同：11
> 
> 时间：2012-08-19T03:12:00.380
> 
> 标签：sql, sql-server, sql-server-2008, tsql, string-aggregation

我需要一种方法来在一种窗口函数中连接所有行（每组），就像你可以做的那样`COUNT(*) OVER(PARTITION BY...)`，并且每组所有行的总计数将在每个特定组中重复。我需要类似的东西，但每组所有值的字符串连接在每组中重复。

这是一些示例数据和我想要的结果，以更好地说明我的问题：

```
grp  |  val
------------
1    |  a
1    |  b
1    |  c
1    |  d
2    |  x
2    |  y
2    |  z 
```

这就是我需要的（期望的结果）：

```
grp  |   val  |  groupcnct
---------------------------------
1    |   a    |  abcd
1    |   b    |  abcd
1    |   c    |  abcd
1    |   d    |  abcd
2    |   x    |  xyz
2    |   y    |  xyz
2    |   z    |  xyz 
```

## 这是这个问题真正棘手的部分：

我的特殊情况使我无法两次引用同一个表（我实际上是在递归 CTE 中执行此操作，因此我无法对 CTE 进行自联接，否则会引发错误）。

我完全知道一个人可以做类似的事情：

```
SELECT      a.*, b.groupcnct
FROM        tbl a
CROSS APPLY (
            SELECT STUFF((
                        SELECT '' + aa.val 
                        FROM   tbl aa
                        WHERE  aa.grp = a.grp
                        FOR XML PATH('')
                   ), 1, 0, '') AS groupcnct
            ) b 
```

但正如您所看到的，这在查询中引用`tbl` ***了两次***。

我只能引用`tbl` ***一次***，因此我想知道是否可以将组连接窗口化（我对 TSQL 有点陌生，因为我来自 MySQL 背景，所以不确定是否可以做类似的事情）。

* * *

### 创建表：

```
CREATE TABLE tbl
    (grp int, val varchar(1));

INSERT INTO tbl
    (grp, val)
VALUES
    (1, 'a'),
    (1, 'b'),
    (1, 'c'),
    (1, 'd'),
    (2, 'x'),
    (2, 'y'),
    (2, 'z'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-04T13:28:25.563

在 sql 2017 中，您可以使用 STRING_AGG 函数：

```
SELECT STRING_AGG(T.val, ',') AS val
    , T.grp
FROM @tbl AS T
GROUP BY T.grp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T07:37:13.657

我尝试使用纯 CTE 方法：[使用具有相同 ID 的行的表中的列来形成字符串值的最佳方法是什么？](https://stackoverflow.com/questions/11137075/which-is-the-best-way-to-form-the-string-value-using-column-from-a-table-with-ro/11138695#11138695)认为它更快

但是基准测试表明，最好使用子查询（或`CROSS APPLY`）结果，`XML PATH`因为它们更快：[使用具有相同 ID 的行的表中的列形成字符串值的最佳方法是哪个？](https://stackoverflow.com/questions/11137075/which-is-the-best-way-to-form-the-string-value-using-column-from-a-table-with-ro#comment14605458_11138267)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T13:13:54.353

```
DECLARE @tbl TABLE
(
    grp INT
    ,val VARCHAR(1)
); 

BEGIN
 INSERT INTO @tbl(grp, val)
VALUES
    (1, 'a'),
    (1, 'b'),
    (1, 'c'),
    (1, 'd'),
    (2, 'x'),
    (2, 'y'),
    (2, 'z');
END;
----------- Your Required Query
SELECT  ST2.grp, 
SUBSTRING(
            (
                SELECT ','+ST1.val  AS [text()]
                FROM @tbl ST1
                WHERE ST1.grp = ST2.grp
                ORDER BY ST1.grp
                For XML PATH ('')
            ), 2, 1000
       ) groupcnct
FROM @tbl ST2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-12T04:14:17.883

我知道这篇文章很旧，但以防万一，有人仍然想知道，您可以创建连接行值的标量函数。

```
IF OBJECT_ID('dbo.fnConcatRowsPerGroup','FN') IS NOT NULL
DROP FUNCTION dbo.fnConcatRowsPerGroup
GO
CREATE FUNCTION dbo.fnConcatRowsPerGroup 
    (@grp as int) RETURNS VARCHAR(MAX)
AS 
BEGIN
    DECLARE @val AS VARCHAR(MAX)

    SELECT @val = COALESCE(@val,'')+val
    FROM tbl
    WHERE grp = @grp

    RETURN @val;
END
GO

select *, dbo.fnConcatRowsPerGroup(grp)
from tbl 
```

这是我通过查询示例表得到的结果集：

```
grp  |   val  |  (No column name)
---------------------------------
1    |   a    |  abcd
1    |   b    |  abcd
1    |   c    |  abcd
1    |   d    |  abcd
2    |   x    |  xyz
2    |   y    |  xyz
2    |   z    |  xyz 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-01T22:38:28.233

您是否可以只将您的东西放在选择中，或者您是否遇到同样的问题？（我用“TEMP.TEMP123”替换了“tbl”）

```
Select 
A.*
, [GROUPCNT] = STUFF((
                        SELECT '' + aa.val 
                        FROM  TEMP.TEMP123 AA
                        WHERE  aa.grp = a.grp
                        FOR XML PATH('')
                   ), 1, 0, '') 

 from TEMP.TEMP123 A 
```

这对我有用——想看看这是否也对你有用。

# c++ - 从字符串中读取/解析多个 INT

> ID：12023934
> 
> 赞同：2
> 
> 时间：2012-08-19T03:12:33.720
> 
> 标签：c++, c, string, robot

我一直在阅读有关将字符串转换为整数、“atoi”和“strol”C 标准库函数以及其他一些我似乎无法理解的内容。

我最初尝试做的是从字符串中获取一系列数字并将它们放入一个 int 数组中。这是字符串的片段（单个字符串中有多行）：

```
getldsscan
AngleInDegrees,DistInMM,Intensity,ErrorCodeHEX
0,0,0,8035
1,0,0,8035
2,1228,9,0
3,4560,5,0
...
230,1587,80,0
231,0,0,8035
232,1653,89,0
233,1690,105,0
234,0,0,8035
...
358,0,0,8035
359,0,0,8035
ROTATION_SPEED,4.99 
```

输出来自我的真空机器人“Neato XV-21”。我已经通过 COM 端口连接获得了上面的输出，并且我目前已经将它存储在一个字符串中。（因为机器人可以输出各种不同的东西）。在这个例子中，我正在读取一个**字符串neatoOutput**，它包含了在我从其激光扫描仪请求更新后机器人的输出。

“getldsscan”是我发送给机器人的命令，当我得到 COM 输出时它只是被读回，所以我们跳过它。下一行只是关于输出的每个值的有用信息，可以跳过。从那时起，有趣的数据被输出。

* * *

我正在尝试获取每行数据中第二个数字的值。该数字是从扫描仪到障碍物的距离。我想要一个整洁的**int distanceArray[360]**，其中包含从机器人报告回来的所有距离值。机器人将输出 360 个距离值。

我还没有对错误检查或从每一行数据中读取其他值大惊小怪，因为一旦我知道如何提取我想要的当前基本数据，我会在稍后得到它们。到目前为止，我可以使用类似的东西：

```
int startIndex = 2 + neatoOutput.find("X",0); //Step past end of line character 
```

所以**startIndex**应该给我数据开始位置的字符索引，但正如您在上面的示例中看到的那样，每个数字的值的大小范围从单个字符到 4 个字符。所以简单地在字符串中前进一个设定的数量是行不通的。

我正在考虑做的事情是......

```
neatoOutput.find("\n",startIndex ); 
```

使用更多代码，我应该能够一次解析一行。但是我仍然对如何提取我想要的行中的第二个数字感到困惑。

* * *

如果有人对黑客/编码机器人感兴趣，你可以去：-

*   [http://www.neatorobotics.com/programmers-manual/](http://www.neatorobotics.com/programmers-manual/)
*   [http://xv11hacking.wikispaces.com/](http://xv11hacking.wikispaces.com/)

* * *

* * *

**更新：已解决**

感谢大家的帮助，这是我近期要使用的代码。您会注意到我最终不需要知道我认为需要使用的**int startIndex变量。**

```
//This is to check that we got data back
signed int dataValidCheck = neatoOutput.find("AngleInDegrees",0);
if (dataValidCheck == -1)
    return;

istringstream iss(neatoOutput);
int angle, distance, intensity, errorCode;
string line;

//Read each line one by one, check to see if its a line that contains distance data
while (getline(iss,line))
{
    if (line == "getldsscan\r")
        continue;
    if (line == "AngleInDegrees,DistInMM,Intensity,ErrorCodeHEX\r")
        continue;

    sscanf(line.c_str(),"%d,%d,%d,%d",&angle,&distance,&intensity,&errorCode); //TODO: Add error checking!
    distanceArray[angle] = distance;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T03:21:58.083

试试这个（未经测试，所以可能是小错误）：

```
#include <iostream>
#include <sstream>
#include <string>
#include <cstdio>
using namespace std;

int main()
{
    string s("3,2,6,4\n2,3,4,5\n");
    istringstream iss(s);
    int a, b, c, d;
    string line;
    while (getline(iss,line))
    {
        // Method 1: Using C
        sscanf(line.c_str(),"%d,%d,%d,%d",&a,&b,&c,&d);

        // Method 2: Using C++
        std::stringstream  lineStream(line);
        char  comma;
        lineStream >> a >> comma >> b >> comma >> c >> comma >> d;

        // do whatever
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:28:14.380

您可以自己解析字符串。这很简单。

代码：

```
int ParseResult(const char *in, int *out)
{
    int next;
    const char *p;

    p = in;
    next = 0;

    while (1)
    {
        /* seek for next number */
        for (; !*p && !isdigit(*p); ++p);

        if (!*p)
            break;  /* we're done */

        out[next++] = atoi(p);  /* store the number */

        /* looking for next non-digit char */
        for (; !*p && isdigit(*p); ++p);
    }

    return next;  /* return num numbers we found */
} 
```

# google-apps-script - Google Apps 脚本格式

> ID：12023936
> 
> 赞同：2
> 
> 时间：2012-08-19T03:12:59.243
> 
> 标签：google-apps-script, google-sheets

首先为糟糕的礼仪或愚蠢的问题道歉，这是我第一次尝试在谷歌电子表格上编写脚本，我必须说我比在 excel 中使用 VBA 更加困难。无论如何我的问题；

我有一个四列五十三行的电子表格。列保持；周数（例如 33）、周开始日期（例如 2012 年 8 月 13 日）、工作时间（例如 31:15:00）和应付工资（例如 150.00 美元）。第一行有标题，第 2 到 53 行是一年中的第几周。露营太容易了。现在我已经设法编写了一个脚本，运行时会通过电子邮件向我发送一周的摘要电子邮件。我的代码如下；

```
 function sendEmail() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Summary");
  var startRow = 2;  // First row of data to process
  var numRows = sheet.getLastRow()-1;   // Number of rows to process
  // Fetch the range of cells A2:B3
  var dataRange = sheet.getRange(startRow, 1, numRows, sheet.getLastColumn());
  // Fetch values for each row in the Range.
  var data = dataRange.getValues()
  //Logger.log(data)

  for (i in data) {
    var row = data[i];
    var date = new Date();
    var sheetDate = new Date(row[1]);
    Sdate=Utilities.formatDate(date,'GMT-1000','w')  
    SsheetDate=Utilities.formatDate(sheetDate,'GMT-1000', 'w')
    //Logger.log(Sdate+' =? '+SsheetDate)
    if (Sdate == SsheetDate){
      var emailAddress = row[0];  // First column
      var weeknum = row[0];
      var week = row[1];
      var hours = row[2];
      var pay = row[3];
      var subject = "Timesheet Report for Week " + weeknum;
      MailApp.sendEmail('me@myemail.com', 
                        subject, 
                        "Chris, \n\nBased on the timesheet data you have submitted last week So and So has recorded the following hours and should be due the calculated pay.\n\n" +
                        "Week Beginning; " + week +
                        "\n\nTotal Hours Worked For The Week; " + hours +
                        "\n\nPay Due For The Week; " + pay);
     //Logger.log('SENT :'+emailAddress+'  '+subject+'  '+message)
    }    
  }
} 
```

我现在的问题是我希望一周开始显示“8 月 13 日星期一”，总工作时间显示时间，支付显示为货币。但是，该脚本不保留电子表格中的格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:49:30.933

Apps 脚本中无法获取电子表格可视格式的单元格，只能获取它们背后的真实值。有`getNumberFormat`一种方法，您可以在其中获取用户可能已应用于单元格的任何特定格式。但是这种方法不能按预期工作，因为它无法在很多情况下检索正确的格式，例如货币和百分比值，并且也不会检索默认格式，只有在用户更改它们的情况下。

在您的情况下，仅在代码本身中格式化您的值可能更容易，因为您手动连接它们。要格式化日期，您可以使用[Utilities.formatDate](https://developers.google.com/apps-script/class_utilities#formatDate)，对于数字，您可能可以使用普通的 javascript 函数自行解决，`num.toFixed()`以及货币符号的一些字符串连接。

By the way, I have developed a script that does mail merge and have such formatting capabilities, you may find that it suit you better than this snippet. It's called FormEmailer and is available on the Script Gallery and [its site](http://sites.google.com/site/formemailer).

# xcode - xcode 4.4.1 坚持“扫描工作副本”

> ID：12023938
> 
> 赞同：1
> 
> 时间：2012-08-19T03:13:31.583
> 
> 标签：xcode, xcode4.4

当我在 XCode 中打开昨天修改的项目时，它在状态区域的工具栏上显示“正在扫描工作副本”。

该项目仍然有效，我也可以进行其他修改。但是“正在扫描工作副本”状态一直处于打开状态。我想知道它的用途和影响，以及如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T23:32:12.720

“扫描工作副本”似乎意味着 xcode 正在版本控制存储库中查找您的项目的版本或其文件之一。由于链接错误或文件可能已损坏，它可能无法找到它。

如果您再次遇到问题，最可靠的解决方法是删除并重新导入您的项目。如果您不需要，则在 Window -> Organizer 菜单下删除版本控制存储库应该可以防止进一步的问题。

我希望这有帮助。这是一个非常令人沮丧的问题，尤其是当它导致 xcode 变得无响应时。

# java - 在二叉搜索树中按顺序搜索

> ID：12023939
> 
> 赞同：1
> 
> 时间：2012-08-19T03:13:33.713
> 
> 标签：java

我使用以显示存储在二叉搜索树中的搜索名称的结果，但是当我运行它时，我有：员工姓名“abc”和“ab”，我输入名称“abc”它显示其中 2 个。任何人都可以提供帮助我有什么错 :( ty

```
public void searchFull(String name) {
        EmployeeSLLNode p = root;
        n=0;
        if (p != null) {
            inorder(p.left);
            if(p.info.getFullname().equals(name)) {
                    n++;
             System.out.printf("%2s  %-5s   %-8s   %-6s   %-6s%n", n, p.info.getID(), p.info.getFullname(), p.info.getAge(), p.info.getGender());
            }
             inorder(p.right);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T03:39:15.813

中序遍历等价于迭代[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)a [`entrySet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#entrySet%28%29)。

```
final Map<String, Employee> employees = new TreeMap<String, Employee>();
...
for (final Map.Entry<String, Employee> entry : employees.entrySet()) {
  /* iterating in-order */
} 
```

`TreeMap`简单地使用二叉搜索树（特别是，根据[规范](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)，红黑树）。考虑使用它而不是滚动您自己的解决方案；-)

* * *

话虽这么说，如果您打算自己动手，也许可以尝试这样的事情...

```
public EmployeeSSLnode search(final EmployeeSSLnode root, final String name) {
  EmployeeSSLnode left;
  return root == null
    ? null
    : (left = search(root.left, name)) == null
      ? root.info.getFullname().equals(name)
        ? root
        : search(root.right, name)
      : left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:53:28.080

大部分代码应该在 inorder() 方法中。毫无疑问它实际上是，所以你有两个打印，所以你得到两个输出。searchFull() 方法应该做的就是调用 inorder(root)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:00:51.483

我认为这是您可以做的。但请确保您的树没有重复的名称。

```
public void searchFull(EmployeeSLLnode p, String name) {
    if (p == null)
        return;
    searchFull(p -> left, name);
    if (p.info.getFullname().equals(name)) {
        //This is the node do other stuff here
        return;
    }
    searchFull(p -> right, name);

} 
```

此外，最好在 BST 中进行一般搜索，而不是通过 Inorder 进行搜索。**BST 中的无序搜索实际上会破坏 BST 的整个目的**。使用 String 类的 compareTo() 方法将输入名称与节点进行比较，并根据名称是否按字母顺序向左或向右移动。

# android - 让我们解决“无法在当前主题中找到样式'mapViewstyle'”错误

> ID：12023940
> 
> 赞同：22
> 
> 时间：2012-08-19T03:13:48.037
> 
> 标签：android, eclipse, android-layout, android-mapview

很抱歉再发布一个，但似乎我们还没有记录这个问题的每一个解决方案。

事情是这样的：我添加了一个地图视图，一切正常。我添加了一个滑动抽屉并将按钮移动到其中，然后将根节点从线性更改为相对。从那时起，我的 main.xml 类的图形布局中出现错误，内容为

> 缺少样式。是否为此布局选择了正确的主题？使用布局上方的主题组合框选择不同的布局，或修复主题样式引用。在当前主题中找不到样式“mapViewStyle”。

将根节点切换为线性并返回到相对已显示地图，但错误仍在图形布局中。

到目前为止，我已经完成了以下解决方案，这可以解决大多数情况下的问题：

1.  添加了 style.xml 以创建“mapView”样式。
2.  验证我的构建目标是 API 2.3.3 (10)
3.  确定`<uses-library android:name="com.google.android.maps"/>`是Application的子节点。
4.  清理/重建我的应用程序。
5.  删除了R。
6.  删除并重建 main.xml
7.  重新启动 adb 服务器、Eclipse、我的电脑和我的设备。
8.  在图形布局中在 Android 3.0 和 Android 2.3.3 之间切换。

但是，我的问题仍然存在。这是我的布局 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    style="@style/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:apiKey="asdf" //not my real key
    android:clickable="true" />

<!-- TODO: update the API key with release signature -->
<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Menu" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/about"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/about" />

        <Button
            android:id="@+id/record"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/record" />

        <Button
            android:id="@+id/start"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/start" />

    </LinearLayout>

</SlidingDrawer>
</RelativeLayout> 
```

这是我的清单 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="edu.myschoolhere"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps"/>
    <activity
        android:name=".GeoTagActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

如果有人有解决方案，请告诉我。如果我弄明白了，我会尽力回帖。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T13:20:01.720

我的回答可能比较晚，但我希望它能解决实际原因，并确保它对那些将来要搜索相同问题的人有所帮助。

这种类型的错误，

```
1\. Android Google Maps Failed to find style 'mapViewStyle' in current theme
2\. Failed to find style 'imageButtonStyle' in current theme 
3\. Failed to find style 'editTextStyle' in current theme 
4\. Failed to find style 'textViewStyle' in current theme 
```

上面列表中的任何内容都可能是，

最终的原因是，

我们选择了不可用`Theme`的`layout`。

这可能是因为，

1.  所选内容在文件`theme`中不可用。`themes.xml`
2.  选择`theme`的是属于较高版本`sdk`，但我们当前的目标`sdk`是较低的版本。

这个问题多半会出现

1.  当您复制整个`layout`文件并尝试在`project`. 一个。您可能忘记复制`themes.xml`文件 b。你可能有更低`target sdk`的，原来`layout`用更高的`target sdk`。

这个问题的解决方案是，

（在中**打开**并**查看**`layout`文件`Graphical Layout View`，然后查看右上角。您的`themes`for`layout`已被选中。）

1.  因此，单击下拉列表进行`theme`选择，然后`themes`根据您的项目选择可用的`themes`和`targeted sdk themes`. **（或者）**
2.  如果`theme`是`custom`一个，如果您需要它，则将`themes.xml`文件从复制文件的源复制到您的项目`layout xml`。 **（或者）**
3.  如果`theme`可用，`sdk`如果`theme`您需要它，请`target`根据您的选择进行更改`theme`。

希望，这可能对某人有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-24T06:22:55.917

**该解决方案适用于 Android Studio，也许它也会为 Eclipse 用户提供一个想法。**
每个 android 主题都不适合每个视图。因此，我们应该为我们的视图类型选择合适的主题之一。

**这是问题的外观**
如果主题不合适，它将给我们缺少样式错误。

[![在此处输入图像描述](../Images/da1941eadc0582124b740496419554a9.png)](https://i.stack.imgur.com/iLqlN.png)

**这里是解决方案**
1.首先选择主题栏。
[![在此处输入图像描述](../Images/21e1ea926157352b8b5ba2b17ba15d55.png)](https://i.stack.imgur.com/RIrnr.png)

2.为您的视图选择主题

[![在此处输入图像描述](../Images/8dc1c4e08c105aefe73bcf1e2bc989a0.png)](https://i.stack.imgur.com/ejfel.png)

3.选择主题后，然后按确定。
如果主题适合您的视图，它将呈现，否则选择另一个主题并尝试直到找到适合您的应用程序的主题。
只要您的主题合适，它就会呈现如下图所示。 [![在此处输入图像描述](../Images/412a7e1b75b62c77540e6ffe8082dfc0.png)](https://i.stack.imgur.com/lPcoP.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T13:50:10.890

我面临着类似的问题。

我不知道问题是什么，在谷歌上搜索答案后，我没有找到任何帮助。

所以我所做的是删除了活动并猜猜是什么？？，它起作用了。

同样，我不确定这是如何解决的，但最终对我来说确实如此。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T01:58:17.623

when you create android application,you choose minimum required sdk API14.And then,you will create project successfully.This is my solution.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-26T16:15:25.533

点击刷新按钮[![在此处输入图像描述](../Images/f4dcfe3ef308f7996a38fa0e099ff69f.png)](https://i.stack.imgur.com/9lrci.png)

否则尝试使缓存无效并重新启动

# hibernate - SET 方法上的休眠字段长度验证

> ID：12023941
> 
> 赞同：2
> 
> 时间：2012-08-19T03:14:18.977
> 
> 标签：hibernate

有没有一种简单的方法可以让 Hibernate 验证每个属性的 set() 方法中的字段长度约束？

**我想防止字段包含无效值，而不是等待稍后发生异常。**

我有一个带有 Username 属性的类：

```
@Column(name = "username", length = 12)
public String getUsername()
{
    return this.username;
}

public void setUsername(String username)
{
    this.username = username;
} 
```

我可以通过以下方式修改我的 Hibernate 模板来创建 set() 方法：

```
@Column(name = "username", length = 12)
public String getUsername()
{
    return this.username;
}

public void setUsername(String username)
{
    Method m = ClassWithUsername.getDeclaredMethod("setUsername");
    javax.persistence.Column col = m.getAnnotation(javax.persistence.Column.class);
    int maxLen = col.length();

    // Validate the field length 
    if(username!=null && username.length() > maxLen)
        throw Exception("Username must be no more than " + maxLen + " characters.");

    this.username = username;
} 
```

在我这样做之前，我想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:47:13.197

**使用Bean 验证**怎么样？参考[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

Column 注释的长度属性用于指定： 列长度。（仅在使用字符串值列时适用。）

例如，您可以定义 stock_code 列的最大长度为 5，但在生成的 ddl 中，stock_code 列是 varchar(10)。在这种情况下，您可以在保存实体时捕获 ConstraintViolationException。

[*如果发现实体无效，则约束违规列表由 ConstraintViolationException 传播，该异常公开了一组 ConstraintViolation。当在提交时发生冲突时，此异常被包装在 RollbackException 中。否则返回 ConstraintViolationException（例如在调用 flush() 时*）

希望这符合您的要求。

在您的实体类中

```
@Column(name = "stock_code", unique = true, nullable = false, length = 10)
@Size(max = 5)
public String getStockCode() {
    return this.stockCode;
}

public void setStockCode(String stockCode) {
    this.stockCode = stockCode;
} 
```

在你的道课上

```
try {
    session.beginTransaction();

    Stock stock = new Stock();

    stock.setStockCode("77777");
    stock.setStockName("PADINI");

    session.save(stock);
    session.getTransaction().commit();

} catch (ConstraintViolationException e) {
        session.getTransaction().rollback();
        System.out.println("Violate Constraint..");
    } catch (Exception e1) {
        session.getTransaction().rollback();
        System.out.println("Other Exception");
    } finally {
        session.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T08:33:24.880

我不确定我的建议是否会是“更好”的方法，但您要求“其他方法”:-)

我的第一个选择是这样的：

```
public void setUsername(String username) {
    User user = user.clone();
    user.username = username;

    ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
    Validator validator = factory.getValidator();
    Set<ConstraintViolation<Car>> constraintViolations = validator.validateProperty(user, "username");

    if (constraintViolations.size() == 0) {
        this.username = username;
    } else {
        throw new IllegalArgumentException("Invalid username");
    }
} 
```

当然，您可以通过创建一个包含对验证器的静态引用的帮助类来优化您的代码，这样您就不需要在每次 setUsername 调用时都创建它。或者你甚至可以将整个逻辑封装到帮助程序中，这样你就可以只在你的设置器上传递这个（小心这种方法，因为验证器不应该调用设置器来更改用户名值）：

```
public void setUsername(String username) {
    MyValidatorHelper.validateOnSetter(this, username, "username");
    this.username = username;
} 
```

请注意，在这种情况下，MyValidatorHelper 会抛出异常，因此，只有在未抛出异常时才会执行第二行。

另一种选择是使用[CDI 拦截器](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/interceptors.html)。我没有测试过（就像我没有测试过前面的例子一样），但我认为你可以将上述逻辑封装成一个 CDI 拦截器，并用@AroundInvoke 拦截它。这样，您甚至可以“忘记”从您的设置器内部调用验证器助手，让 CDI 为您调用它。这样做的缺点是您的实体必须是 CDI 托管的 bean（无论如何它们可能是），并且您默认为所有 setter 启用它，这可能是一个好主意，也可能不是一个好主意。

# c++ - 在 C 中存储对 Lua 值的引用，怎么做？

> ID：12023943
> 
> 赞同：4
> 
> 时间：2012-08-19T03:14:55.483
> 
> 标签：c++, lua

例如，假设我有一个键处理接口，在 C++ 中定义为：

```
class KeyBoardHandler 
{ 
public:
    virtual onKeyPressed(const KeyEventArgs& e);
    virtual onKeyReleased(const KeyEventArgs& e);
} 
```

现在，我想将其扩展到 Lua，以允许 Lua 利用并在脚本中注册一个 KeyboardHandler。

这是到目前为止的原型。

```
class ScriptKeyboardHandler : public KeyboardHandler
{
public:
    ... previous methods omitted
    static void createFromScript(lua_State* L);
    bool createCppData();

private:
    ScriptKeyBoardHandler(lua_State* L);

    int mSelf;
    int mKeyPressFunc;
    int mKeyReleaseFunc;
    lua_State* mpLuaState;
} 
```

现在，我知道实现将是这样的：

```
ScriptKeyboardHandler::ScriptKeyboardHandler(lua_State* L) :
    mpState(L)
{ }

ScriptKeyboardHandler::onKeyPressed(...) { 
     // check if mKeyPressFunc is a function
     // call it, passing in mself, and the event args as params
} 

// On Key Release omitted because being similar to the key pressed

ScriptKeyboardHandler::createFromScript(lua_State* L)
{
    auto scriptKeyboardHandler = new ScriptKeyboardHandler(L);
    if (scriptKeyboardHandler->createCppData())
    {
        // set the light user data and return a reference to ourself (mSelf)
    }
}

ScriptKeyboardHandler::createCppData() 
{
    // get the constructor data (second param) and find the keyPressed and keyReleased function, store those for later usage
    // any other data within the constructor data will apply to object
}

-- Syntax of the lua code
MyScriptHandler = { }
MyScriptHandler.__index = MyScriptHandler

MyScriptHandler.onKeyPress = function(self, args)
end

handler = createScriptHandler(handler, MyScriptHandler)
registerKeyHandler(handler) 
```

当函数作为参数传入表中时，我只是不知道如何找到它们。

我这样做对吗？我希望我是，这很痛苦，因为 tolua 不容易支持虚拟类，而不是那些你可以在脚本中派生的类。

我不担心其他功能，只是如何从我的 C 代码中找到这些变量（按键功能等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:36:59.263

这大概是我的实现的`onKeyPressed`样子。

```
void ScriptKeyboardHandler::onKeyPressed()
{
   //Get the table corresponding to this object from the C registry
   lua_pushlightuserdata(mpLuaState, this);
   lua_gettable(mpLuaState,LUA_REGISTRYINDEX);

   //Now get the function to call from the object
   lua_pushstring(mpLuaState,"onKeyPress");
   lua_gettable(mpLuaState,-2);

   //Now call the function 
   lua_pushvalue(mpLuaState, -2 ); // Duplicate the self table as first argument
   //TODO: Add the other arguments
   lua_pcall(mpLuaState, 1, 0, 0 ); // TODO: You'll need some error checking here and change the 1 to represent the number of args.

   lua_pop(mpLuaState,1); //Clean up the stack

} 
```

但是，您还需要更新构造函数以将表示处理程序的 lua 对象存储到注册表中。

# php - 为什么我在通过 PHP 发送电子邮件时遇到问题？

> ID：12023944
> 
> 赞同：0
> 
> 时间：2012-08-19T03:15:03.973
> 
> 标签：php, html, email

> **可能重复：**
> [来自 Windows Azure 中 PHP 的电子邮件](https://stackoverflow.com/questions/5391392/email-from-php-in-windows-azure)

我是 PHP 新手，但我开始看到它在非常简单的事情上的价值，我希望你能对以下代码不起作用的原因有所了解。换句话说，我从来没有收到过电子邮件。第一个代码块是我在服务器端的 PHP 代码，第二个代码块是将其提交给该 PHP 代码的表单。

我目前在 Azure 云中托管这个网站，因此它在 Microsoft 的服务器上运行，并且我已经验证 PHP v5.3 正在运行。

# PHP 代码

```
<?php
  if(isset($_POST['email'])) {
    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "some_email_address";
    $email_subject = "Contact Form Submitted";
    function died($error) {
      echo "We are very sorry, but there were error(s) found with the form you submitted. ";
      echo "These errors appear below.<br /><br />";
      echo $error."<br /><br />";
      echo "Please <a href='javascript:history.go(-1)'>go back</a> and fix these errors.<br /><br />";
      die();
    }
    // validation expected data exists
    if(!isset($_POST['first_name']) ||
      !isset($_POST['last_name']) ||
      !isset($_POST['email']) ||
      !isset($_POST['telephone']) ||
      !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');
      }
      $first_name = $_POST['first_name']; // required
      $last_name = $_POST['last_name']; // required
      $email_from = $_POST['email']; // required
      $telephone = $_POST['telephone']; // not required
      $comments = $_POST['comments']; // required
      $error_message = "";
      $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
      if(!preg_match($email_exp,$email_from)) {
        $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
      }
      $string_exp = "/^[A-Za-z .'-]+$/";
      if(!preg_match($string_exp,$first_name)) {
        $error_message .= 'The First Name you entered does not appear to be valid.<br />';
      }
      if(!preg_match($string_exp,$last_name)) {
        $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
      }
      if(strlen($comments) < 2) {
        $error_message .= 'The Comments you entered do not appear to be valid.<br />';
      }
      if(strlen($error_message) > 0) {
        died($error_message);
      }
      $email_message = "Form details below.\n\n";
      function clean_string($string) {
        $bad = array("content-type","bcc:","to:","cc:","href");
        return str_replace($bad,"",$string);
      }
      $email_message .= "First Name: ".clean_string($first_name)."\n";
      $email_message .= "Last Name: ".clean_string($last_name)."\n";
      $email_message .= "Email: ".clean_string($email_from)."\n";
      $email_message .= "Telephone: ".clean_string($telephone)."\n";
      $email_message .= "Comments: ".clean_string($comments)."\n";
      ini_set("sendmail_from", $email_from);
      // create email headers
      $headers = 'From: '.$email_from."\r\n".
       'Reply-To: '.$email_from."\r\n" .
       'X-Mailer: PHP/' . phpversion();
      @mail($email_to, $email_subject, $email_message, $headers);
   }
?> 
```

# 表单提交到 PHP

```
<form name="contactform" method="post" action="send_form_email.php">
  <table width="450px">
    <tr>
      <td valign="top">
        <label for="first_name">First Name *</label>
      </td>
      <td valign="top">
        <input  type="text" name="first_name" maxlength="50" size="30">
      </td>
    </tr>
    <tr>
      <td valign="top">
        <label for="last_name">Last Name *</label>
      </td>
      <td valign="top">
        <input  type="text" name="last_name" maxlength="50" size="30">
      </td>
    </tr>
    <tr>
      <td valign="top">
        <label for="email">Email Address *</label>
      </td>
      <td valign="top">
        <input  type="text" name="email" maxlength="80" size="30">
      </td>
    </tr>
    <tr>
      <td valign="top">
        <label for="telephone">Telephone Number</label>
      </td>
      <td valign="top">
        <input  type="text" name="telephone" maxlength="30" size="30">
      </td>
    </tr>
    <tr>
      <td valign="top">
        <label for="comments">Comments *</label>
      </td>
      <td valign="top">
        <textarea  name="comments" maxlength="1000" cols="25" rows="6"></textarea>
      </td>
    </tr>
    <tr>
      <td colspan="2" style="text-align:center">
        <input type="submit" value="Submit" style="float: left;">
      </td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:24:16.463

1.  您无需致电`ini_set("sendmail_from", $email_from);`，因为您在标题中设置了发件人电子邮件地址
2.  你打电话了`@mail`。除非您使用尚未调用的 Atmail 库，否则这将不起作用。您应该删除 @ 以使用默认的 PHP 邮件功能
3.  如果 sendmail 仍然无法正常工作，请确认您的服务器上已正确配置 sendmail

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T03:26:07.913

首先尝试发送简单的电子邮件。检查你是否收到，

像下面

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

如果可行，请将内容类型 text/html 添加到您的代码中并检查

# ruby - 从 ruby 克隆存储库

> ID：12023948
> 
> 赞同：0
> 
> 时间：2012-08-19T03:15:16.753
> 
> 标签：ruby, git, sinatra

我正在创建一个 Sinatra 应用程序，它将从远程 git 存储库中提取数据。

我查看了[ruby​​-git](https://github.com/schacon/ruby-git) gem，但我`cannot load such file -- git`在`require 'git'`. gem 已安装并在我的 Gemfile 中。

我不确定这是否是解决此问题的正确方法，但本质上我希望应用程序签出 git 存储库以提取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:52:11.947

最终使用系统命令：

```
system("git clone #{$config['repository']} content") 
```

# ios - RestKit：如何过期/清除核心数据缓存？

> ID：12023949
> 
> 赞同：1
> 
> 时间：2012-08-19T03:16:01.327
> 
> 标签：ios, core-data, restkit

我正在开发一个应用程序来处理从服务器发送和检索的大量图像/照片/视频，并且我在我的 iOS 应用程序中使用 RestKit 的核心数据集成作为缓存，所以说媒体在已经被检索后加载速度更快. 但是，我希望用户也能够清除缓存并从服务器重新获取。如何根据时间段或用户告诉 RestKit 使 Core Data 缓存过期？

感谢您提供任何帮助 - Stack Overflow 对我来说是一个令人难以置信的资源，我非常感激 :-)

# php - 在 php 中获取请求的 url 的 Content-Type

> ID：12023950
> 
> 赞同：3
> 
> 时间：2012-08-19T03:16:14.343
> 
> 标签：php, header, content-type

使用 php 我将如何将变量定义`$type`到[http://www.example.com](http://www.example.com)`content-type`的

例如：`$type`定义为`"text/html"`

到目前为止，这就是我正在使用的：

```
<?php
$url = 'http://www.example.com';
print_r(get_headers($url));
print_r(get_headers($url, 1));
?> 
```

代码可以根据需要更改

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-19T03:19:48.073

你有没有尝试过：

```
$type = get_headers($url, 1)["Content-Type"]; 
```

正如@Michael 在评论中指出的那样，如果没有最新版本的 PHP，这种语法将无法工作。

你是否也尝试过：

```
$headers = get_headers($url, 1);
$type = $headers["Content-Type"]; 
```

?

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-20T10:39:54.527

有时 get_header 会返回错误的值，因为它读取的是 http 标头，而不是文件。最好使用 finfo：

```
$finfo = new finfo(FILEINFO_MIME_TYPE);
$type = $finfo->buffer(file_get_contents($link)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-24T08:47:53.807

不太清楚您要做什么，但是如果您尝试获取浏览器发送到您的脚本的请求内容类型，您可以这样做：

```
<?php 
// Collect all headers
$headers = [];
foreach(getallheaders() as $name => $header){
    $headers[strtolower($name)] = $header;
}

// Get the content type header
$contentType = $headers['content-type'];
?> 
```

# c# - 提示用户有关未决更改

> ID：12023953
> 
> 赞同：0
> 
> 时间：2012-08-19T03:17:54.157
> 
> 标签：c#, asp.net

我有一个 ASP.NET 页面，其中有几个可编辑的下拉菜单、几个可编辑的文本框和几个仅显示字段。

我想跟踪用户是否更改了任何下拉值或文本框值。当用户单击 goBack 按钮时，我想提示他们更改未保存以及他们是否真的想返回。

请让我知道在文本框或 dropdwon 列表上跟踪更改的最简单方法是什么。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:37:53.233

您可以在页面中添加类似这样的内容：

```
<script type="text/javascript">
var submit = false; 
window.onbeforeunload = confirmLeave;

function confirmLeave()
{
        if (!submit)
        {
                return "You have unsaved changes. Are you sure you want to leave the page?";
         }
  }
</script>

<asp:Button ID="btnSubmit" runat="server" Text="Submit"  OnClientClick="javascript:submit=true;"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T06:46:58.533

您需要将更改处理程序添加到要跟踪的所有输入。
为此，我强烈推荐[jQuery blur](http://api.jquery.com/blur/)。
每当输入或选择发生失去焦点时，就会触发模糊。如果要跟踪实际值的变化，可以使用[jQuery 数据保存页面加载的值](http://api.jquery.com/data/)

```
<script>
inputChanged = false;

$('input, select').blur(function() {
    inputChanged = true;
});

window.onbeforeunload = function()
{
    if (inputChanged)
    {
        return "You have unsaved changes. Discard change?";
    }
}
</script> 
```

# opencv - 什么 cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC1);

> ID：12023958
> 
> 赞同：68
> 
> 时间：2012-08-19T03:19:10.013
> 
> 标签：opencv

OpenCV中的作用是什么`cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC1);`？

我浏览了文档，但无法理解`alpha`,`beta`和实际做什么。我知道 alpha 设置下限和 beta 上限。代表 8 位无符号单通道。但这些论点对画面的影响是我无法理解的。`NORM_MINMAX``CV_8UC1``CV_8UC1`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-19T03:40:41.130

当`normType`is时`NORM_MINMAX`，以 is 的最小值和is 的最大值的方式进行`cv::normalize`归一化。仅使用比例和移位（即添加常数并乘以常数）来发挥其魔力。`_src``dst``alpha``dst``beta``cv::normalize`

`CV_8UC1`表示有多少频道`dst`。

这里的文档很清楚：[http ://docs.opencv.org/modules/core/doc/operations_on_arrays.html#normalize](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#normalize)

# titanium - setinterval 功能不起作用钛移动

> ID：12023965
> 
> 赞同：1
> 
> 时间：2012-08-19T03:20:54.150
> 
> 标签：titanium, titanium-mobile

我有以下代码：

```
var c = null;
c = Titanium.Network.createHTTPClient();

var url = 'example.com';
c.open('GET', url);
Titanium.API.log('info', url);

c.onload = function() 
{
    Titanium.API.log('info', 'onload');

    setInterval(getPeople(), 5000);
};
c.send(); 
```

代码应该每 5 秒访问一次 getPeople() 函数，但它没有。事实上，该应用程序过早地存在。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:27:28.327

尝试：

```
setInterval(getPeople, 5000); 
```

或者：

```
setInterval("getPeople()", 5000); 
```

# cocoa - 以编程方式将播客导入 iTunes

> ID：12023967
> 
> 赞同：1
> 
> 时间：2012-08-19T03:21:15.623
> 
> 标签：cocoa, applescript, itunes, podcast

我正在开发一个应用程序来创建音频播客（.m4a 文件）。我一直在试图弄清楚是否可以将我的用户创建的播客自动导入 iTunes，并让它显示在播客类别中。这可以在 Cocoa 中完成，还是通过 AppleScript 完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:07:30.067

您所需要的只是创建一个 rss 提要并将其托管在某个地方（以便可以通过 http 访问它）。例如，您可以将其托管在本地主机上。然后，当您的用户将文件添加到目录时，您可以运行一些脚本，该脚本会将提要项添加到您的 rss 文件中。

在 iTunes 中，您可以通过以下方式添加您的播客 RSS 源：文件 > 播客下标... 其余的 iTunes 将为您完成。

# asp.net-mvc-3 - MVC3 将格式不正确的日期时间传递给 Controller，但在 Controller 操作中更正它会导致 ModelState 错误

> ID：12023970
> 
> 赞同：0
> 
> 时间：2012-08-19T03:22:03.883
> 
> 标签：asp.net-mvc-3, datetime, controller, modelstate

我是唯一一个有这个问题的人，还是我的方向完全错误。

我有一个传递 DateTime 值的视图：

```
<div class="control-group">
@Html.Label("Appointment date", null, new { @class = "control-label" })
<div class="controls">
    <div class="input-append">
        @Html.TextBoxFor(model => model.Appointment.Client_PreferredDate, new { @readonly = "readonly" })
        <span class="add-on margin-fix"><i class="icon-th"></i></span>
    </div>
    <p class="help-block">
        @Html.ValidationMessageFor(model => model.Appointment.Client_PreferredDate)
    </p>
</div> 
```

这些值被传递到 Controller 操作中（我可以看到该值，并且我知道它给出的格式不是 DateTime，即它将采用 dd-MM-yyyy 格式）。然后在控制器中我将重新格式化它。

```
[HttpPost]
public ActionResult RequestAppointment(General_Enquiry model, FormCollection fc)

{       
    model.Appointment.Client_PreferredDate = Utilities.formatDate(fc["Appointment.Client_PreferredDate"]);
    ModelState.Remove("Appointment.Client_PreferredDate");

try
{
    if (ModelState.IsValid)
    {
        model.Branch_Id = Convert.ToInt32(fc["selectedBranch"]);
        model.Appointment.Branch_Id = Convert.ToInt32(fc["selectedBranch"]);
        db.General_Enquiry.AddObject(model);
        db.SaveChanges();
        return RedirectToAction("AppointmentSuccess", "Client");
    }
}
catch (Exception e)
{
    Debug.WriteLine("{0} First exception caught.", e);
    Debug.WriteLine(e.InnerException);
    ModelState.AddModelError("", e);
}

return View(model); 
```

}

我能做的最好的就是使用 ModelState.Remove()，我对此感到非常不舒服。我怀疑当我的模型从视图传递到控制器时，模型状态已经设置为无效，然后我才能在控制器中执行任何操作。有任何想法吗？

如果我调用 ModelState.Remove() 一切顺利，则 SQL 服务器数据库接受 DateTime。

如果至少我可以随时更新或“刷新”ModelState，它将解决我的问题。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T06:48:52.243

我建议您对 DateTime 格式使用视图模型和自定义模型绑定器。

我们首先定义这个视图模型：

```
public class MyViewModel
{
    [DisplayFormat(DataFormatString = "{0:dd-MM-yyyy}", ApplyFormatInEditMode = true)]
    public DateTime PreferredDate { get; set; }
} 
```

然后是控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            PreferredDate = DateTime.Now.AddDays(2)
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        // model.PreferredDate will be correctly bound here so
        // that you don't need to twiddle with any FormCollection and 
        // removing stuff from ModelState, etc...
        return View(model);
    }
} 
```

一个看法：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.LabelFor(x => x.PreferredDate)
    @Html.EditorFor(x => x.PreferredDate)
    @Html.ValidationMessageFor(x => x.PreferredDate)
    <button type="submit">OK</button>
} 
```

最后是使用指定格式的自定义模型绑定器：

```
public class MyDateTimeModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var displayFormat = bindingContext.ModelMetadata.DisplayFormatString;
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        if (!string.IsNullOrEmpty(displayFormat) && value != null)
        {
            DateTime date;
            displayFormat = displayFormat.Replace("{0:", string.Empty).Replace("}", string.Empty);
            // use the format specified in the DisplayFormat attribute to parse the date
            if (DateTime.TryParseExact(value.AttemptedValue, displayFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out date))
            {
                return date;
            }
            else
            {
                bindingContext.ModelState.AddModelError(
                    bindingContext.ModelName,
                    string.Format("{0} is an invalid date format", value.AttemptedValue)
                );
            }
        }

        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

将在以下位置注册`Application_Start`：

```
ModelBinders.Binders.Add(typeof(DateTime), new MyDateTimeModelBinder()); 
```

# c# - Visual Studio 自动打开折叠属性

> ID：12023971
> 
> 赞同：5
> 
> 时间：2012-08-19T03:22:10.967
> 
> 标签：c#, visual-studio-2010

这是我的问题。我在我正在处理的 Visual Studio 中加载了一个 C# 类文件。我创建了一个类并在该类中创建了一些属性。我像这样折叠属性：![在此处输入图像描述](../Images/273c11cbb5876ec2b147afb98ad1acd6.png)

`+`我用每个侧面的小/`-`按钮折叠属性。我想折叠它们中的每一个，因为我有很多其他具有属性的类，并且我不想看到很多重复的代码（获取、设置）。

关闭它们可以正常工作，但是在我处理同一文件中的其他一些类之后，属性会重新打开，因此我可以看到代码：

![在此处输入图像描述](../Images/7be92f9605814738f9dd3043a99dcbd4.png)

这种情况相对经常发生并且非常烦人。我的文件中有很多行，有时我必须使用小屏幕。这是一个小故障/错误或其他什么？（我正在使用 Visual Studio 2010 C# Express）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T04:27:07.910

到目前为止还没有办法解决这个问题，但这可以解决问题。按`CTRL-M`然后`O`，它将自动折叠您所在的当前文件中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T07:03:54.560

@DJKRAZE 出色答案的另一个提示是 Resharper。我使用 Resharper，它会自动为我解决这个问题。例如，如果我编写此代码：

![在此处输入图像描述](../Images/8ccb1542632800ca6af5c749163084d6.png)

4 行属性过程会导致展开/折叠，这会让您感到悲伤。

Resharper 使它成为一条线。当我删除最后一个大括号（命名空间）并再次输入时，代码会自动格式化（编辑>高级>格式化文档不这样做）：

![在此处输入图像描述](../Images/dd20f68febc8ff3d6fd2cbc9643e4722.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T07:08:02.723

你可以使用这个：

```
#region some_name
//your variables or code whatever
#endregion 
```

然后您可以折叠特定代码，以及它不会像您的情况那样打开的好处。

看看这是否有效。

# php - 在 PHP 中执行 PowerShell 脚本

> ID：12023973
> 
> 赞同：0
> 
> 时间：2012-08-19T03:22:46.177
> 
> 标签：php, powershell, iis-7

我正在尝试通过 php 运行 powershell 脚本。

```
system("C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -InputFormat none -File AD_Account_Automation.ps1); 
```

当我运行 php 脚本时，它会在 Web 浏览器中返回以下错误：

```
File C:\inetpub\wwwroot\Test_Automation.ps1 can not be loaded. The file C:\inetpub\wwwroot\Test_Automation.ps1 is not digitally signed. The script will not execute on the sys tem. Please see "get-help about_signing" for more details.. + CategoryInfo : NotSpecified: (:) [], ParentContainsErrorRecordE xception + FullyQualifiedErrorId : RuntimeException 
```

我已将 PowerShell 执行策略设置为 Unrestricted 和 RemoteSigned，但它并没有解决问题。如果我从 PowerShell 命令行调用它并且如果我从 Windows 中的命令提示符调用它，该脚本运行良好。

我也尝试过以下方法：

```
exec("C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy RemoteSigned -File C:\\inetpub\\wwwroot\\AD_Account_Automation.ps1 < NUL"); 
```

而 IIS 只是挂起。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T03:38:16.973

几乎可以肯定，您的托管环境不允许这样做。ActiveDirectory GroupPolicy 覆盖数字签名。哇。是的，我知道，这很糟糕，但这是有充分理由的。请联系您的托管服务提供商以检查这是否是根本原因。

编辑：实际上，根本原因要简单得多。您没有用结束引号“关闭字符串。那肯定会挂起 IIS。

# php - 如何在php中读取子域的真实url？

> ID：12023975
> 
> 赞同：0
> 
> 时间：2012-08-19T03:23:28.247
> 
> 标签：php, url, subdomain

好的，假设我有一个子域设置为： `mysubname.mysite.net`，实际上，它会将我带到以下 URL： `http://mysite.net/aName/bName/cName/eName`

如何`http://mysite.net/aName/bName/cName/eName`在 PHP 中获取路径，它是相对于我的站点的真实路径？

这可能吗？我是否必须使用 .htaccess 文件来完成此操作？我只需要将这个真实路径存储在一个 php 变量中。我不想将 url 更改为新路径，只需要知道实际 REAL、更长、PATH 的 url！

例如，我想在我的网站上使用 Flash MP3 播放器...它适用于长 URL： [子域指向的实际路径](http://dream-portal.net/sub-domains/flashmp3player/script.html)

虽然，如果你去 SUB-DOMAIN，它不会播放 mp3 文件： [这里](http://mp3player.dream-portal.net/script.html)

我认为它与这段代码有关，即在 PHP 中，这是 Flash Player 工作所必需的：

```
$path= $_SERVER['HTTP_HOST'] .$_SERVER['PHP_SELF'];
$path=dirname($path);

$file='http://'.$path.'/'.$file; 
```

有任何想法吗？我可以发布更多您认为有帮助的代码......让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T03:38:22.493

PHP 有一个全局变量可以帮助你。我认为你想要的是`HTTP_REFERER`。最好的办法是使用页面顶部的`print_r`PHP变量，然后使用包含所需 URL 的变量。`$_SERVER``http://mysite.net/aName/bName/cName/eName`

所以在页面顶部粘贴这段代码：

`<pre> print_r($_SERVER); </pre>`

[PHP 手册 $_SERVER 文档](http://php.net/manual/en/reserved.variables.server.php)

想想它`REQUEST_URI`可能是你想要的。同样，最好的办法是打印出来`$_SERVER`，看看哪个变量有你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:02:43.483

如果您的 mp3 文件位于某个目录中，例如：

```
$path="/music/song.mp3"; 
```

然后要获取文件的原始路径，您可以使用`realpath()`.

```
$original_path=realpath($path); 
```

$original_path 包含 mp3 文件的直接链接。希望能帮助到你！

# bash - 使用 shell 脚本搜索单词并在该单词之后导出 35 个字符

> ID：12023981
> 
> 赞同：0
> 
> 时间：2012-08-19T03:24:31.300
> 
> 标签：bash, shell, sed

我有一个文件 input.txt，里面有很多奇怪的字符、html 标签和有用的材料。我想在“描述”一词之后显示 35 个字符，不包括像 $&lmp 这样的奇怪字符，并且在新文件 output.txt 中没有 html 标记。

输入样本：

```
 </image>
  <title>A Londoner Looks Back: Were The Olympics Awesome?</title>
  <link>http://www.askmen.com/sports/fanatic/london-olympics-post-mortem.html</link>
  <description rdf:parseType="Literal">

                The other evening I walked out of London&amp;rsquo;s &lt;a
href="http://www.askmen.com/fashion/watch_100/135_olympic-watches.html"&gt;Olympic
stadium onto the new &amp;ldquo;Javelin&amp;rdquo; train into town. (The journey from east to
central London, quite recently still something of a commuter&amp;rsquo;s nightmare, took just
six minutes.) A railway worker on the platform didn&amp;rsquo;t just point everyone the way
onto the train; he did a dance for us. You don&amp;rsquo;t usually get that on London
transport. These Olympics made the city happier.I now live in Paris, but I
consider myself a Londoner. I went to nursery school in London, spent 15 years of my life
in the city, speak in a London accent, visit my parents and siblings here, and, as someone
of mongrel origin who belongs nowhere, I feel at home in the world&amp;rsquo;s most
cosmopolitan city. To steal a line from the 1980s film Sammy and Rosie Get Laid:
&amp;ldquo;I&amp;rsquo;m not English. I&amp;rsquo;m a Londoner.&amp;rdquo; But London is also a sprawling,
gray, wet, overpriced city where traveling anywhere always seems to take forever, and
Londoners are not positive people. In fact, we are whiners. Going into the
Olympics, the whining was at full blast. Landing in London days before &lt;a
href="http://www.askmen.com/sports/bodybuilding/olympic-bobsledding.html"&gt;the Games
began, I found my friends and family full of dread. The Games&amp;rsquo; organizers had
indicated that while the Olympics were on, traveling anywhere would take even longer than
forever. My sister had been told to be at her desk at 7 a.m. during the Games to avoid the
rush hour -- this in a city where many people start work nearer to 10 a.m. A friend showed
me a kind of war scenario prepared by the bank where he worked, full of ominous questions
like, &amp;ldquo;What if your supply chain stopped?&amp;rdquo; &amp;ldquo;What if your technology
failed?&amp;rdquo; &amp;ldquo;What if your brand, image and reputation were impacted by any of the
above?&amp;rdquo; And what was all this upheaval in aid of? To watch some doped-up
moustachioed Eastern European women win incomprehensible weightlifting events? In a YouGov
survey days before the opening ceremony, only 51% of Britons expressed an interest in the
Olympics -- and that was a lot better than earlier surveys.On the day of the
opening ceremony I happened to have a meeting down the street from my last &lt;a
href="http://www.askmen.com/london/"&gt;London address (a shared flat above a now defunct
liquor store). I ran to Baker Street tube, as I&amp;rsquo;d done a thousand times before. Then
I got on a media bus to the opening ceremony that passed Southwark Bridge with the
Financial Times building where I had worked in the 1990s. It was like a dream:
You move through a familiar landscape that has been transformed. The Olympics helped me
see London afresh.It was during the opening ceremony that the mood among
Londoners changed. I know foreigners didn&amp;rsquo;t get all the references: the Windrush
ship that brought the first Jamaican immigrants to Britain in 1948, the BBC weather
forecaster Michael Fish assuring us there would be no hurricane the night before one
struck in 1987, the dance of the state-funded National Health Service nurses. But Londoners got it. Danny Boyle, the director, gave us a multicultural and funny
Britain that had finally shed its imperial delusions of grandeur. The Olympic torch was
run into the stadium not by an Aryan superman but by the pot-bellied middle-aged ex-rower
Steve Redgrave, who can&amp;rsquo;t run. For the first time in my life, Boyle&amp;rsquo;s Britain
made me feel a patriot. The opening ceremony remains the highlight of my Olympics.Then the sports began, and with it the instinctive expectation that the Brits
would fall flat on their faces. We may have invented modern sports, but England&amp;rsquo;s
soccer team hasn&amp;rsquo;t won a prize since 1966, and no British man has won Wimbledon
since 1936\. Surely our Olympians would continue the tradition?&amp;nbsp;It seemed
so on the first day, when Britain&amp;rsquo;s much-hyped male cyclists failed to win a medal
or even to figure in the run-in in front of Buckingham Palace. Only on the second day did
our first medal arrive: A silver for cyclist Lizzie Armitstead, a polite young vegetarian
from the rural north so little-known that at the press conference she had to introduce
herself to the nation. &amp;ldquo;I could never get my head around eating corpses,&amp;rdquo; she
explained. On the fourth morning, Britain still had no golds. The more
excitable newspapers began demanding inquests. And then the golds came in a crazy rush,
won by a bunch of underpaid Britons of all colors whose frank delight was irresistible.
Above all, there was Mo Farah, the Somali-born runner, who had arrived in London&amp;rsquo;s
suburbs as an eight-year-old barely able to speak English, and had really wanted to play
on the wing for Arsenal, but who won gold in the 10,000 and 5,000 meters instead. After
his first gold, an African journalist asked if he wouldn&amp;rsquo;t rather have been running
for Somalia. &amp;ldquo;Look, mate, this is my country,&amp;rdquo; replied Farah. He was
Boyle&amp;rsquo;s multicultural Britain. The second Saturday of the Olympics, when
Farah was among six Britons to win gold, was Britain&amp;rsquo;s best sporting day since 1966.
It was our best single Olympic day since the Games were held in London in 1908\. Of course,
we embarked on an orgy of patriotism. On BBC TV, the new &amp;ldquo;British heroes&amp;rdquo; were
feted much like &amp;ldquo;heroes of the harvest&amp;rdquo; on North Korean state TV. Foreigners
rightly accused the Britons of practically ignoring the other 200 nations. However,
that&amp;rsquo;s what every country at the Olympics does. Each country watches its own Games.                

</item>
  <title>How Facial Hair Can Save You From Skin Cancer</title>
  <link>http://www.askmen.com/sports/news/moustaches-and-skin-cancer.html</link>
  <description rdf:parseType="Literal"> 
```

输出应该是这样的：

```
The other evening I walked out of London Olympic
stadium onto the new Javelin train into town. (The journey from east to
central London, quite recently still

If you thought moustaches were solely to distinguish regular males from porn stars and
hipsters, think again. A new study suggests that 
```

我努力了：

```
sed 's/^.*<description>/<description>/
s/&lt;/</g
s/&gt;/>/g
s/&amp;rsquo;/'"'"'/g
s/&amp;ccedil;/c/g
s/<[^>]*>//g
s/^\(.\{35\}\).*/\1/' inputsample.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:10:22.047

我不相信 sed 有可能，因为 sed 不理解 XML 实体。你需要使用像 Perl 或 Python 这样的编程语言来完成这样的事情。

我能得到你的最接近的是：

```
$ sed -nE '/description/s/.*description(.{,35}).*>/\1/p' file_name 
```

该`-E`方法使用扩展的正则表达式，因此`{35,35}`将起作用。`-n`说不打印。我正在捕捉接下来的 35 个字符并用整行替换它们。

但是，任何特殊实体（例如`&nbsp;`和所有赌注）都已关闭。

# python - 为 Python C 扩展类型定义 __eq__

> ID：12023983
> 
> 赞同：3
> 
> 时间：2012-08-19T03:25:36.190
> 
> 标签：python, c

我在尝试实现`__eq__`作为 C 扩展编写的 Rect 类时遇到了麻烦。我尝试定义一个名为 的方法`__eq__`，但 Python 似乎覆盖了它。

```
static PyObject *
Rect___eq__(Rect *self, PyObject *other)
{
    Rect *rect = (Rect *) other;
    if (self->x != rect->x || self->y != rect->y || 
            self->width != rect->width || self->height != rect->height) {
        Py_RETURN_FALSE;
    } else {
        Py_RETURN_TRUE;
    }
}

static PyMethodDef Rect_methods[] = {
    {"__eq__", (PyCFunction)Rect___eq__, METH_VARARGS,
     "Compare Rects" },
    {NULL}  /* Sentinel */
}; 
```

似乎无论我做什么，Python 默认为“是”行为：

```
>>> a = Rect(1, 2, 3, 4)
>>> b = Rect(1, 2, 3, 4)
>>> a == b
False
>>> a == a
True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T04:21:15.723

当使用 C 中定义的新类型时，您需要定义 tp_richcompare。下面是一个富比较的实现，它总是比较大于所有其他类型（除了它自己）：

```
static PyObject *
Largest_richcompare(PyObject *self, PyObject *other, int op)
{
    PyObject *result = NULL;

    if (UndefinedObject_Check(other)) {
        result = Py_NotImplemented;
    }
    else {
        switch (op) {
        case Py_LT:
            result = Py_False;
            break;
        case Py_LE:
            result = (LargestObject_Check(other)) ? Py_True : Py_False;
            break;
        case Py_EQ:
            result = (LargestObject_Check(other)) ? Py_True : Py_False;
            break;
        case Py_NE:
            result = (LargestObject_Check(other)) ? Py_False : Py_True;
            break;
        case Py_GT:
            result = (LargestObject_Check(other)) ? Py_False : Py_True;
            break;
        case Py_GE:
            result = Py_True;
            break;
        }
    }

    Py_XINCREF(result);
    return result;
} 
```

如果您使用的是 Python 3.x，请将其添加到 type 对象，如下所示：

```
(richcmpfunc)&Largest_richcompare,       /* tp_richcompare */ 
```

如果您使用的是 Python 2.x，则涉及一个额外的步骤。在 Python 2.x 的生命周期中添加了丰富的比较，对于一些 Python 版本，C 扩展可以选择定义 tp_richcomare。要通知 Python 2.x 您的类型实现了丰富的比较，您需要通过 Py_TPFLAGS_HAVE_RICHCOMPARE 中的 or-ing 来修改 tp_flags。

```
Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_RICH_COMPARE,        /* tp_flags */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T04:21:13.600

当你声明你的 PyTypeObject 时，有一个“丰富的比较”函数字段对应`__cmp__`于 python 函数 (http://docs.python.org/py3k/extending/newtypes.html#object-comparison)（在文档“非丰富”，而不是“丰富”的`__eq__`,`__gt__`等）。除了语义，它基本上提供了相同的功能，虽然我不太确定为什么`__eq__`不起作用......

另外，我建议任何其他编写 C 扩展类/模块的人来看看 Cython，它确实添加了一个依赖项（尽管它只是一个构建依赖项），但让编写扩展名变得不那么令人头疼。

# perl - Perl 为使用任意数量的模块和库的脚本生成一个可执行文件

> ID：12023984
> 
> 赞同：3
> 
> 时间：2012-08-19T03:25:42.093
> 
> 标签：perl

我正在努力在 perl 中创建一个执行多项操作的代理。它使用了几个 .pm 格式的模块和几个库。现在我想将它转换为一个可执行文件，以便我可以通过复制该单个文件来安装 n 台服务器。这是我可以在 perl 中实现的吗？我只是 perl 的初学者，也许我的问题听起来很愚蠢，但它会教给我一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T07:34:21.087

[`pp`](https://metacpan.org/module/pp)提供的脚本[`PAR::Packer`](https://metacpan.org/release/PAR-Packer)能够创建单文件可执行文件。其页面中的示例：

```
pp -o foo foo.pl bar.pl   # Pack 'foo.pl' and 'bar.pl' into 'foo' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T04:02:10.017

一些模块包含在 Perl 中，因此即使它们是单独的模块，它们也可以在其他 Perl 安装中工作，而无需安装这些模块。这些包括`File::Copy`, `File::Find`, `Time::Piece`。

[您可以在Perldoc](http://perldoc.perl.org)主页上看到所有标准模块的列表。请务必将下拉版本字段（位于左侧）设置为您正在使用的版本。它一直追溯到 Solaris 上的 Perl 5.8.8。

您需要的模块完全有可能已经包含在标准 Perl 发行版中，因此无需担心。有时，您可以将正在使用的非标准模块替换为几乎不需要重写的标准模块。

某些模块包含已编译的 C 代码，无法重新分发。它们必须在它们运行和安装的机器上编译。但是，大多数模块都是纯 Perl 模块，并且可以通过程序重新分发。

如果一个模块不是标准模块，它是一个纯 Perl 模块，有两种方法可以重新分发它：

*   Perl 有一个`@INC`列表，说明在搜索模块时要搜索的目录。有一个 Perl [use lib](http://perldoc.perl.org/lib.html) pragma 允许您添加目录。您可以将模块作为程序的子目录包含在内，然后压缩整个结构。用户将解压缩整个目录树，其中包括您的程序和您需要的模块。顺便说一句，默认值`@INC`通常包括当前目录。
*   另一种方法是将模块附加到您的程序中，然后删除该`use`模块的语句（因为它现在是文件的一部分）。这有点棘手，但它意味着单个程序文件。

请记住，一个模块可能需要另一个模块，因此请彻底检查。

* * *

您可以做的另一件事是检查模块，如果不存在，请通过 CPAN 下载。测试很简单：

```
BEGIN {
    eval {
        require My::Module; Module->import( LIST );
    };
    if ($@) {
        die qq(Module doesn't exist);
    }
} 
```

当然，做 a`die`有点傻，因为`use`会那样做。但是，有可能通过[CPAN 模块](http://perldoc.perl.org/CPAN.html#PROGRAMMER%27S-INTERFACE)程序员的界面加载模块而不是死掉。我从来没有这样做过，我不知道有谁这样做过。但是，这是可能的。

所以，最好的办法是检查你的程序是否使用标准的 Perl 模块，如果没有，看看你是否可以修改程序来使用它们。例如，如果您的程序使用`Archive::Zip`，您可以修改它以使用`IO::Uncompress::Unzip`and`IO::Compress::Zip`代替。

否则，您的选择是尝试包含这些模块进行安装（并注意递归性和非纯 Perl 模块）或尝试检测未安装的模块，并以编程方式安装它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T03:58:29.613

答案有点复杂。

Perl 的性质使得在大多数用例中编译 perl 脚本实际上是不可能的，因此可以分发单个可执行文件（Windows 意义上的*可执行文件*）。有很多方法可以做类似的事情，但遗憾的是我不知道它们。

但是您实际上可以将 Perl 解释器嵌入到任何 C 应用程序中，包括 Perl 源代码（您的脚本 + 模块）。当您静态链接所有 C 库时，这也应该有效。然后您可以使用 Perl API 来调用您的脚本。

如果保证您的所有目标服务器都运行完全相同的操作系统，使用完全相同的库，并且最好是某种 *nix，则可以将所有必需的文件打包到存档中并编写安装脚本。可以编写包含要解压的存档的自解压 shell 脚本。perl 也是如此，使用特殊`__DATA__`命令和`DATA`文件句柄：

```
#!/usr/bin/perl
print for <DATA>;
__DATA__
1
2
3 
```

印刷

```
1
2
3 
```

也适用于管道数据`tar`。

您应该将所有依赖模块和所有编译库包含到文件中，并找出一个元数据系统以将所有文件安装到正确的位置。

作为一般规则，软件应该在目标系统本身上编译，而不仅仅是复制二进制文件。忽略架构差异、配置文件或隐藏在视图中的特殊注册条目太容易了。

如果您必须针对不同的系统，最好编写一个脚本，将大部分安装委托给`cpan`您喜欢的任何 perl 包管理器。这将比硬编码文件路径更灵活。

```
 #!/bin/bash
 cpan install Foo::Bar
 cpan install Acme
 cpan install ...
 # etc. 
```

我会坚持下去。

最优雅的解决方案是创建自己的包或发行版，就像从 CPAN 下载的一样。由于您将包含一个引用所有依赖项的元数据文件，因此 cpan 将自行找出所有内容并可能进行必要的编译。我不认为这完全是一个初学者的话题，但它会给你最大的灵活性和可维护性（轻松升级！）。这应该使得包含一些安装测试变得相当容易。

这只是初学者，我相信互联网或其他有更多知识的人会详细说明。

# asp.net-mvc - 如何删除由 WebSecurity.CreateUserAndAccount 创建的帐户？

> ID：12023986
> 
> 赞同：9
> 
> 时间：2012-08-19T03:25:59.057
> 
> 标签：asp.net-mvc, asp.net-membership

今天我注意到 VS 2012 中的新 MVC 项目正在使用[WebMatrix.WebData.WebSecurity](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity%28v=vs.99%29.aspx)来处理成员相关的任务。

我去 msdn 快速查看文档并感到惊讶。里面有很多好东西，它肯定会在未来的项目中为我节省很多时间。

但有一件事引起了我的注意：它没有“删除帐户”的功能。有什么特别的原因吗？我应该使用基础会员提供商来删除帐户（以及解锁帐户等其他内容）吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T13:00:07.933

```
 ((SimpleMembershipProvider)Membership.Provider).DeleteAccount("username");
        ((SimpleMembershipProvider)Membership.Provider).DeleteUser("username", true); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T04:36:55.750

在 MSDN 上找到了答案：http: [//msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29)

> 在 ASP.NET 网页站点中，您可以使用网页的 Membership 属性访问 SimpleMembershipProvider 类的功能。您没有（事实上，不能）初始化 SimpleMembershipProvider 类的新实例......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-05T13:22:05.093

`((SimpleMembershipProvider)Membership.Provider).DeleteAccount("UserName");`//这将从 **[webpages_Membership]**表中删除条目

`Roles.RemoveUserFromRole("UserName", "RoleName");`// 这将从**[webpages_UsersInRoles]**表中删除

`((SimpleMembershipProvider)Membership.Provider).DeleteUser("UserName", true);`// 这将从**userprofile**表中删除

# java - 将 .jar 文件提取到目录，添加新文件，然后在 java 中重新打包成 .jar 文件

> ID：12023993
> 
> 赞同：0
> 
> 时间：2012-08-19T03:28:03.127
> 
> 标签：java, installation, minecraft

我想知道是否有办法获取使用 JFileChooser 选择的给定 .jar 文件，将其解压缩并将其放入新目录。然后，从另一个目录中取出所有文件，将其添加到带有提取的 .jar 文件的目录中，然后取出所有文件并再次打包。

我这样做是因为我想要一个非常简单的方法来为那个游戏安装 mods，我的世界，你可以选择你的 minecraft.jar，并确保 mod 的文件在一个文件夹中，然后稍等一下，因为由 JProgressBar 指示。

这就是我到目前为止所拥有的一切

```
import java.io.*;
import java.util.jar.*;
import javax.swing.*;

public class Main extends JFrame {
    public Main() {
        super("Auto-mod installer");
        setSize(300, 60);
        setLocationRelativeTo(null);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JProgressBar bar = new JProgressBar(0, 100);
        add(bar);
        setVisible(true);
    }

    public static void main(String[] args) {
        Main m = new Main();
    }

    private void extract(File f) {
        //Hrm...
    }

    private void addModFiles() {
        //Uh...
    }

    private void repackage(File f) {
        //What?
    }
} 
```

如您所见，我不知道自己在做什么。我确实知道需要什么进口，但仅此而已。帮助将不胜感激，咆哮我做错的任何事情都会让我生气。谢谢！

编辑：如果您知道获得相同结果的方法，而这不是我正在寻找的方式，请告诉我该怎么做。只要我得到我想要的结果，那就太好了。再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T04:49:58.640

这个想法相对简单。你有一些陷阱（比如如果文件已经存在该怎么办等等），但除此之外......

我先看看[JarFile](http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarFile.html)

（我在另一个例子的中间，但是当我有时间时，我会发布一些东西）

**更新示例**

```
public class JarTest {

    protected static final String OUTPUT_PATH = "..."; // The place you want to extact the jar to

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        new JarTest();

    }

    public JarTest() {

        try {

            unjar();
            // Copy new contents in...
            jar();

        } catch (IOException exp) {

            exp.printStackTrace();

        }

    }

    // This just recursivly lists through all the files to be included in the new jar
    // We don't care about the directories, as we will create them from the file
    // references in the Jar ourselves
    protected List<File> getFiles(File path) {

        List<File> lstFiles = new ArrayList<File>(25);

        // If you want the directories, add the "path" to the list now...

        File[] files = path.listFiles();
        if (files != null && files.length > 0) {

            for (File file : files) {

                if (file.isDirectory()) {

                    lstFiles.addAll(getFiles(file));

                } else {

                    lstFiles.add(file);

                }

            }

        }

        return lstFiles;

    }

    // Re-Jar the contents
    // You should always attempt to jar back to a new file, as you may not want to effect the original ;)
    public void jar() throws IOException {

        JarOutputStream jos = null;

        try {

            String outputPath = OUTPUT_PATH;

            // Create a new JarOutputStream to the file you want to create
            jos = new JarOutputStream(new FileOutputStream("...")); // Add your file reference

            List<File> fileList = getFiles(new File(OUTPUT_PATH));
            System.out.println("Jaring " + fileList.size() + " files");

            // Okay, I cheat.  I make a list of all the paths already added to the Jar only create
            // them when I need to.  You could use "file.isDirectory", but that would mean you would need
            // to ensure that the files were sorted to allow all the directories to be first
            // or make sure that the directory reference is added to the start of each recursion list
            List<String> lstPaths = new ArrayList<String>(25);
            for (File file : fileList) {

                // Replace the Windows file seperator
                // We only want the path to this element
                String path = file.getParent().replace("\\", "/");
                // Get the name of the file
                String name = file.getName();

                // Remove the output path from the start of the path
                path = path.substring(outputPath.length());
                // Remove the leading slash if it exists
                if (path.startsWith("/")) {

                    path = path.substring(1);

                }

                // Add the path path reference to the Jar
                // A JarEntry is considered to be a directory if it ends with "/"
                if (path.length() > 0) {

                    // At the trailing path seperator
                    path += "/";

                    // Check to see if we've already added it out not
                    if (!lstPaths.contains(path)) {

                        // At the path entry...we need need this to make it easier to 
                        // extract the files at a later state. There is a way to cheat,
                        // but I'll let you figure it out
                        JarEntry entry = new JarEntry(path);
                        jos.putNextEntry(entry);
                        jos.closeEntry();

                        // Make sure we don't try to add the same path entry again
                        lstPaths.add(path);

                    }

                }

                System.out.println("Adding " + path + name);

                // Create the actual entry for this file
                JarEntry entry = new JarEntry(path + name);
                jos.putNextEntry(entry);

                // Write the entry to the file
                FileInputStream fis = null;
                try {

                    fis = new FileInputStream(file);
                    byte[] byteBuffer = new byte[1024];
                    int bytesRead = -1;
                    while ((bytesRead = fis.read(byteBuffer)) != -1) {

                        jos.write(byteBuffer, 0, bytesRead);

                    }

                    jos.flush();

                } finally {

                    try {
                        fis.close();
                    } catch (Exception e) {
                    }

                }

                jos.closeEntry();

            }

            jos.flush();

        } finally {

            try {
                jos.close();
            } catch (Exception e) {
            }

        }

    }

    public void unjar() throws IOException {

        JarFile jarFile = null;

        try {

            String outputPath = OUTPUT_PATH;
            File outputPathFile = new File(outputPath);
            // Make the output directories.
            // I'll leave it up to you to decide how best to deal with existing content ;)
            outputPathFile.mkdirs();

            // Create a new JarFile reference
            jarFile = new JarFile(new File("C:/hold/Java_Harmony.jar"));

            // Get a list of all the entries
            Enumeration<JarEntry> entries = jarFile.entries();
            while (entries.hasMoreElements()) {

                // Get the next entry
                JarEntry entry = entries.nextElement();
                // Make a file reference
                File path = new File(outputPath + File.separator + entry.getName());
                if (entry.isDirectory()) {

                    // Make the directory structure if we can
                    if (!path.exists() && !path.mkdirs()) {

                        throw new IOException("Failed to create output path " + path);

                    }

                } else {

                    System.out.println("Extracting " + path);

                    // Extract the file from the Jar and write it to disk
                    InputStream is = null;
                    OutputStream os = null;
                    try {

                        is = jarFile.getInputStream(entry);
                        os = new FileOutputStream(path);

                        byte[] byteBuffer = new byte[1024];
                        int bytesRead = -1;
                        while ((bytesRead = is.read(byteBuffer)) != -1) {

                            os.write(byteBuffer, 0, bytesRead);

                        }

                        os.flush();

                    } finally {

                        try {
                            os.close();
                        } catch (Exception e) {
                        }

                        try {
                            is.close();
                        } catch (Exception e) {
                        }

                    }

                }

            }

        } finally {

            try {
                jarFile.close();
            } catch (Exception e) {
            }

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T16:56:34.190

您可以使用这个非常简单的库来**打包/解包 jar 文件**

[罐子管理器](https://bitbucket.org/ReaperSoon/maven-repo/src/367c0bcb2749/fr/stevecohen/jarmanager)

很简单

```
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;

import fr.stevecohen.jarmanager.JarPacker;
import fr.stevecohen.jarmanager.JarUnpacker;

public class MyClass {

    public void addFileToJar(String jarPath, String otherFilePath) {
        try {
            JarUnpacker jarUnpacker = new JarUnpacker();
            File myJar = new File("./myfile.jar");
            File otherFile = new File(otherFilePath);

            Path unpackDir = Files.createTempDirectory(myJar.getName()); //create a temp directory to extract your jar
            System.out.println("Unpacking in " + unpackDir.toString());
            jarUnpacker.unpack(jarPath, unpackDir.toString()); //extraxt all files contained in the jar in temp directory

            Files.copy(otherFile.toPath(), new File(unpackDir.toFile(), otherFile.getName()).toPath()); //copy your file

            JarPacker jarRepacker = new JarPacker();
            File newJar = new File("./maNewFile.jar");
            System.out.println("Packing jar in " + newJar.getAbsolutePath());
            jarRepacker.pack(unpackDir.toString(), newJar.getAbsolutePath()); //repack the jar with the new files inside
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

你也可以使用**maven依赖**

```
<dependency>
    <groupId>fr.stevecohen.jarmanager</groupId>
    <artifactId>JarManager</artifactId>
    <version>0.5.0</version>
</dependency> 
```

你还需要我的仓库

```
<repository>
    <id>repo-reapersoon</id>
    <name>ReaperSoon's repo</name>
    <url>http://repo-maven.stevecohen.fr</url>
</repository> 
```

使用下面的链接检查最后一个版本以使用最后一个依赖项

如果您发现一些错误，请使用我的[公共问题跟踪器](https://bitbucket.org/ReaperSoon/maven-repo/issues)

# java - 长按时如何访问 ListView 中的元素

> ID：12023997
> 
> 赞同：2
> 
> 时间：2012-08-19T03:30:16.070
> 
> 标签：java, android, android-listview, contextmenu

我正在开发一个`ListView`包含电影的应用程序。该列表被声明为一个数组`strings.xml`。它有元素`Title`,`Gross`和`Date Released`。当长按一行时，它会弹出一个上下文菜单，允许用户编辑该行或删除它。当用户选择编辑时，他/她被带到第二个屏幕，其中 3 个编辑文本对应于`Title`和。这些字段使用单击行中的数据进行初始化。这是我的代码：`Gross``Date``EditText`

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] titleList = getResources().getStringArray(R.array.title_array);
    String[] grossList = getResources().getStringArray(R.array.gross_array);
    String[] dateList = getResources().getStringArray(R.array.date_array);

    results = new ArrayList<Lab8_082588FetchDetails>();

    for (int i = 0; i < titleList.length; i++) {
        Lab8_082588FetchDetails sr = new Lab8_082588FetchDetails();
        sr.setTitle(titleList[i]);
        sr.setGross(grossList[i]);
        sr.setDate(dateList[i]);
        results.add(sr);
    }

    adapter = new SampleCustomAdapter(results);
    setListAdapter(adapter);

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);
            registerForContextMenu(lv);

      }
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();

    // places the contents of the XML to the menu
    inflater.inflate(R.menu.context_menu, menu);
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();
    switch (item.getItemId()) {
    case R.id.delete:
        results.remove(info.position);
        adapter.notifyDataSetChanged();
        return true;
    case R.id.edit:
        System.out.println(info.id);
        System.out.println(info.position);

        Intent newData = new Intent(Lab8_082588.this, Lab8_082588Edit.class);
        results.get(info.position);
        TextView movieTitle = (TextView) findViewById(R.id.title);
        TextView movieGross = (TextView) findViewById(R.id.gross);
        TextView movieDate = (TextView) findViewById(R.id.date);

        String startTitle = movieTitle.getText().toString();
        String startGross = movieGross.getText().toString();
        String startDate = movieDate.getText().toString();

        newData.putExtra(Lab8_082588Edit.TITLE_STRING, startTitle);
        newData.putExtra(Lab8_082588Edit.GROSS_STRING, startGross);
        newData.putExtra(Lab8_082588Edit.DATE_STRING, startDate);
        startActivityForResult(newData, Lab8_082588.EDIT_MOVIE);
        return true;
    default:
        return super.onContextItemSelected(item);

    }
} 
```

对于编辑屏幕：

```
 public class Lab8_082588Edit extends Activity {

public static final String TITLE_STRING = "TITLE_STRING";
public static final String GROSS_STRING = "GROSS_STRING";
public static final String DATE_STRING = "DATE_STRING";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addedit);
    initialize();
}

private void initialize() {
    // TODO Auto-generated method stub
    Intent prepopulate = getIntent();
    EditText movieTitle = (EditText) findViewById(R.id.etTitle);
    EditText movieGross = (EditText) findViewById(R.id.etGross);
    EditText movieDate = (EditText) findViewById(R.id.etDate);

    String startTitle = prepopulate.getStringExtra(Lab8_082588Edit.TITLE_STRING);
    String startGross = prepopulate.getStringExtra(Lab8_082588Edit.GROSS_STRING);
    String startDate = prepopulate.getStringExtra(Lab8_082588Edit.DATE_STRING);

    movieTitle.setText(startTitle);
    movieGross.setText(startGross.replaceAll(",", "").replace("$", ""));
    movieDate.setText(startDate);
} 
```

我的 FetchDetails 类

```
 public class Lab8_082588FetchDetails implements Comparable<Lab8_082588FetchDetails> {

private String title;
private String gross;
private String date;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getGross() {
    return gross;
}

public void setGross(String gross) {
    this.gross = gross;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

@Override
public int compareTo(Lab8_082588FetchDetails another) {
    // TODO Auto-generated method stub
    return title.compareTo(another.title);
}

 } 
```

我的适配器：

```
 private class SampleCustomAdapter extends BaseAdapter {

    public SampleCustomAdapter(ArrayList<Lab8_082588FetchDetails> movies) {
        internalList = movies;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return internalList.size();
    }

    @Override
    public Object getItem(int index) {
        // TODO Auto-generated method stub
        return internalList.get(index);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = getLayoutInflater();
        View view;

        if (convertView == null) {
            view = inflater.inflate(R.layout.row, null);
        } else {
            view = convertView;
        }

        // extract the views to be populated
        TextView title = (TextView) view.findViewById(R.id.title);
        TextView gross = (TextView) view.findViewById(R.id.gross);
        TextView date = (TextView) view.findViewById(R.id.date);

        // extract the object that will fill these
        Lab8_082588FetchDetails movie = internalList.get(position);

        title.setText(movie.getTitle());
        date.setText(movie.getDate());
        gross.setText(movie.getGross());

        // return the view
        return view;
    }
} 
```

我的问题是，确实，编辑文本被填充，但只有来自整个列表中第一项的数据（例如泰坦尼克号是列表中的第一个，并且是唯一一个被填充的）。即使我单击列表视图中的第 n 行电影，泰坦尼克号仍然是正在检索的电影。我该如何解决这个问题？

编辑：我意识到不知何故，代码只考虑列表的第一个元素。如何访问其他行的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T05:48:45.670

> 我意识到不知何故，代码只考虑列表的第一个元素。如何访问其他行的元素？

您永远不应该搜索`findViewById`连续的项目`ListView`。在`onContextItemSelected`回调中，您单击了元素的位置，因此您可以使用它来获取与该行关联的数据：

```
case R.id.edit:
    Intent newData = new Intent(Lab8_082588.this, Lab8_082588Edit.class);
    // I hope you implemented the adapter correctly
    Lab8_082588FetchDetails item = (Lab8_082588FetchDetails) getListView().getItemAtPosition(info.position); 
    String startTitle = item.getTitle();
    String startGross = item.getGross();
    String startDate = item.getDate();

    newData.putExtra(Lab8_082588Edit.TITLE_STRING, startTitle);
    newData.putExtra(Lab8_082588Edit.GROSS_STRING, startGross);
    newData.putExtra(Lab8_082588Edit.DATE_STRING, startDate);
    startActivityForResult(newData, Lab8_082588.EDIT_MOVIE);
    return true; 
```

# javascript - 获取“RangeError：超出最大调用堆栈大小”错误

> ID：12023999
> 
> 赞同：3
> 
> 时间：2012-08-19T03:31:13.660
> 
> 标签：javascript, jquery, stack-overflow

我在 Chrome 中收到此 JavaScript 错误：

> RangeError：超出最大调用堆栈大小 [http://localhost:5545/assets/js/jquery.min.js:2]

通过此`click`活动：

```
$('.accept-answer-button').click(function() {
    var id = $(this).parent().parent().attr('id').replace('answer_', ''),
        b = this;
    if ($('.accepted').length > 0) $('.accepted').click();
    AP.AcceptAnswer(id, $(b));
});​ 
```

的代码`AP.AcceptAnswer()`是：

```
AP.AcceptAnswer = function(a, o) {
    $.getJSON('/assets/ajax/accept-answer', {
        qid: qid,
        answer: a
    }, function(data) {
        if (data.success == true) {
            if (data.type == 'accepted') {
                var title = o.attr('data-unaccept-title').replace('{t}', data.time);
                o.addClass('accepted').attr('title', title);
            }
            else if (data.type == 'unaccepted') {
                var title = o.attr('data-accept-title').replace('{t}', data.time);
                o.removeClass('accepted').attr('title', title);
            }
        }
        else {
            alert(data.error);
        }
    });
}; // end AP.AcceptAnswer()​ 
```

`$('.accepted').click();`当用户想要接受另一个答案时，我只是不接受当前接受的答案（如果有的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T03:34:49.407

您确定这些类`.accepted`并`.accept-answer-button`没有指向同一个元素吗？如果他们是你这样做时**递归**触发点击事件：

```
$('.accepted').click(); 
```

如果`$('.accepted').length > 0`总是正确的。