# StackOverflow 问答 11429000-11429999

# java - 根据子列表的大小对列表进行排序？

> ID：11429001
> 
> 赞同：3
> 
> 时间：2012-07-11T08:57:37.700
> 
> 标签：java, sorting, arraylist, java-6

我有一个列表列表。我想对超级列表进行排序取决于子列表的大小。列表是动态的。
列表类型是`<ArrayList<ArrayList<HashMap>>>`例如。

```
[ [{key1=value1,key2=value2}],[],[{key1=value1}],[{key1=value1},{key2=value2},{key3=value3}]  ] 
```

排序后它应该显示

```
[[{key1=value1},{key2=value2},{key3=value3}], [{key1=value1,key2=value2}],[{key1=value1}],[]  ] 
```

你能帮忙如何排序吗？

提前致谢。
拉克斯曼杂烩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T09:48:56.283

***编辑***：

如果要对按地图列表大小排序的地图列表列表进行排序，可以执行此操作。

请注意，您可以更改参数 (`o1`和`o2`)`Integer.valueOf(o1.size()).compareTo(o2.size())`的顺序以按降序排序。

```
public static <T> List<? extends List<T>> sortListByValue(List<? extends List<T>> list) {

    Collections.sort(list, new Comparator<List<T>>() {

        @Override
        public int compare(List<T> o1, List<T> o2) {
            //return Integer.compare(o1.size(), o2.size()); //JDK7 

            //Use this if you're using a version prior to 1.7.
            return Integer.valueOf(o1.size()).compareTo(o2.size());
        }
    });

    return list;
}   

public static void main(String[] args) {

    ArrayList<Map<String,String>> list1 = new ArrayList<>();
    list1.add(new HashMap<String, String>(){{ put("1", "a"); put("2", "b");}});
    list1.add(new HashMap<String, String>(){{ put("1", "a"); put("2", "b"); put("3", "c");}});
    list1.add(new HashMap<String, String>(){{ put("1", "a"); }});

    ArrayList<Map<String,String>> list2 = new ArrayList<>();
    list2.add(new HashMap<String, String>(){{ put("1", "a"); put("2", "b");}});
    list2.add(new HashMap<String, String>(){{ put("1", "a"); put("2", "b"); put("3", "c");}});

    ArrayList<Map<String,String>> list3 = new ArrayList<>();
    list3.add(new HashMap<String, String>(){{ put("1", "a"); put("2", "b");}});

    ArrayList<ArrayList<Map<String,String>>> list = new ArrayList<>();
    list.add(list1);
    list.add(list2);
    list.add(list3);
    System.out.println(list);
    System.out.println(sortListByValue(list));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:01:11.127

```
Collections.sort(list, new Comparator<List<? extends Map>>() {
        public int compare(List<? extends Map> list1, List<? extends Map> list2) {
            return Integer.valueOf(list1.size()).compareTo(Integer.valueOf(list2.size()));
        }
    }); 
```

如果您不太关心泛型，您可以简化它，例如：

```
Collections.sort(list, new Comparator<List>() {
            public int compare(List list1, List list2) {
                return Integer.valueOf(list1.size()).compareTo(Integer.valueOf(list2.size()));
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:59:31.713

```
public static <T> List<List<T>> sortBySublistSize(List<List<T>> superList) {
    Collections.sort(superList, new Comparator<List<T>>() {
        @Override
        public int compare(List<T> o1, List<T> o2) {
            return Integer.compare(o1.size(), o2.size());
        }
    });

    return superList;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:00:19.340

您可以使用任何正常的排序算法，但不是基于值，而是基于元素的长度。

# c# - 轻松写入字节、整数和字节缓冲区？C＃

> ID：11429002
> 
> 赞同：0
> 
> 时间：2012-07-11T08:57:42.110
> 
> 标签：c#, bytearray

我的代码看起来像

```
mem.WriteByte(4);
mem.WriteByte(1);
mem.Write(HostPortBuf, 0, 2);
//more 
```

是否可以这样写

```
mem.MyWrite(4, 1, HostPortBuf, //more); 
```

Mem 目前是一个内存流，但我可以轻松地一次性构建数组，因此它不需要是一个流。有这样的吗？在 C# 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:11:35.223

不确定它实际上是否更具可读性，但这里是：

```
public static class MemoryStreamExtensions
{
    public static void Write(this MemoryStream stream, params object[] parameters)
    {
        if (stream != null)
        {
            foreach (var obj in parameters)
            {
                if (obj is byte)
                {
                    stream.WriteByte((byte)obj);
                }
                else if (obj is byte[])
                {
                    var theArray = (byte[])obj;
                    stream.Write(theArray, 0, theArray.Length);
                }
            }
        }
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        MemoryStream zz = new MemoryStream();
        zz.Write((byte)1, (byte)4, new byte[] { 5, 6 });

        Console.ReadKey();
    }
} 
```

不要忘记将 1 和 4 转换为`byte`. 如果您不这样做，则 1 和 4 类型将是`int`（这些数字的默认类型），因此它不会在您的流中添加两个前字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:05:35.037

我觉得您当前的代码更具可读性。

但是，这也许是您正在寻找的：

```
byte[] data = new byte[SIZE];
data[0] = 4;
data[1] = 1;
Array.Copy(HostPortBuf, 0, data, 2, HostPortBuf.Length);
mem.Write(data, 0, data.Length); 
```

# java - Java：当你知道超类时反对强制转换

> ID：11429004
> 
> 赞同：0
> 
> 时间：2012-07-11T08:57:48.533
> 
> 标签：java, reflection, downcast

我不知道如何定义我的疑问，所以如果问题已经被问到，请耐心等待。

假设我必须动态实例化一个对象。这个对象肯定是一个已知的、不可变的类A的子类的实例。我可以动态获取具体的实现类。

完全像我对目标类一无所知一样使用反射会更好，还是最好/可以做类似的事情：

```
A obj = (Class.forName("com.package.Sub-A")) new A(); 
```

在哪里`Sub-A extends A`？目的是避免反射开销时间......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:01:31.653

通常这是通过

```
Class.forName("com.package.Sub-A").getConstructor(param types).newInstance(param values) 
```

并且为了避免反射覆盖，您只需缓存构造函数对象。

# python - 使用python3从urllib解码字节，有更好的方法吗？

> ID：11429013
> 
> 赞同：2
> 
> 时间：2012-07-11T08:58:02.247
> 
> 标签：python, string, python-3.x, byte, decode

我最近正在重新编写一些代码到 python3 并寻找一个干净的 pythonic 解决方案来解码 urllib.request.urlopen 返回的字节以传递给 csv.reader

我想出了以下内容：

```
import urllib.request
def fetch(symbol='IBM'):
    kwargs = { 'symbol': symbol,
               'start_month': '01',
               'start_day': '01',
               'start_year': '2002',
               'end_month': '12',
               'end_day': '31',
               'end_year': '2012',
             }
    urlstring = 'http://ichart.finance.yahoo.com/table.csv?s={symbol}&a={start_month}&b={start_day}&c={start_year}&d={end_month}&e={end_day}&f={end_year}&g=d&ignore=.csv'.format(**kwargs)
    data = [row for row in csv.reader(map(bytes.decode, urllib.request.urlopen(urlstring), ('iso-8859-1' for i in iter(lambda:0,1))))]
    return data 
```

我想知道是否有更好的解决方案？本质上，该 url 返回一个 csv 文件，在 Python 2.x 中，我能够只使用 urllib2 并将 urllib2.urlopen() 的返回值传递给 csv.reader() 但是，在 Python 3.x 中，我们现在返回字节，所以我将响应映射到 bytes.decode 并将其传递回 csv.reader。但是我很好奇是否有更好的方法来做到这一点，或者我在寻找最佳解决方案时错过了一些东西？

处理这种情况的正确pythonic方法是什么，在我们将返回的对象传递给另一个函数进行迭代之前需要对其进行解码？

**编辑：** 谢谢伊格纳西奥！

查看您给我的链接，我得到了以下解决方案：

```
data=[row for row in csv.reader(codecs.iterdecode(urllib.request.urlopen(urlstring),'iso-8859-1'))] 
```

看起来更干净！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:03:18.217

通常我们[会得到一个阅读器](http://docs.python.org/py3k/library/codecs.html)并将其通过那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:25:46.613

我建议使用[`codecs.iterdecode`](http://docs.python.org/dev/library/codecs.html#codecs.iterdecode)：

```
data = list(csv.reader(codecs.iterdecode(urllib.request.urlopen(...), "iso-8859-1"))) 
```

# macos - 这是一个 IKImageBrowserView 吗？

> ID：11429015
> 
> 赞同：1
> 
> 时间：2012-07-11T08:58:08.350
> 
> 标签：macos, ikimagebrowserview, nsprogressindicator

我想知道这是一个 IKImageBrowserView 对象吗？以及如何在加载图像时添加 NSProgressIndicator？ ![在此处输入图像描述](../Images/08652ab6dd2ad1503d8326cdabbc1df3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:31:48.860

它当然看起来可能是一个。添加进度指示器的方式完全取决于下载图像的方式。如果您使用的是 NSURLConnection，那么您可以通过 connection:didReceiveResponse: 和 connection:didReceiveData: 获取状态更新。响应结构包含文件的预期长度，您可以将其用作进度指示器的最大值，而数据包含您在该块中收到的数据的长度。将该长度添加到您获得的先前块的长度中，您将获得迄今为止收到的数据量。那将是您的进度指示器上的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T12:52:15.407

我认为不是。`IKImageBrowserView`它是一个`NSCollectionView`。我也遇到了这个问题，然后我用谷歌搜索并在互联网上搜索以添加`NSProgressIndicator`我`IKImageBrowserView`没有得到任何解决方案。最后我发现`NSCollectionView`是在加载 `NSProgressIndicator`图像时添加动画的方法。所以我搬到了`NSCollectionView`. [点击这里](https://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSCollectionView_Class/Introduction/Introduction.html)了解更多详情。

# javascript - 从 Javascript 调用 Jquery 函数时出错

> ID：11429019
> 
> 赞同：0
> 
> 时间：2012-07-11T08:58:26.543
> 
> 标签：javascript, jquery, asp.net, .net

我在该行收到错误：

证实（）;

当我尝试调用以下 jQuery 函数时

```
 (function ($) { 
        "use strict";    
         var methods = {
     validate: function () {
                 if ($(this).is("form"))
                     return methods._validateFields(this);
                 else {
                     // field validation
                     var form = $(this).closest('form');
                     var options = form.data('jqv');
                     var r = methods._validateField($(this), options);

                     if (options.onSuccess && options.InvalidFields.length == 0)
                         options.onSuccess();
                     else if (options.onFailure && options.InvalidFields.length > 0)
                         options.onFailure();
                     return r;
                 }
             }
    } 
```

使用以下 JavaScript，我在验证函数中遇到错误。

```
<script type="text/javascript">
    function dateSelectionChanged(sender, args) {
        $(function () {
            validate();
        });
    }
</script> 
```

上面的 jQuery 中已经描述了函数 validate。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:21:13.233

您需要公开`methods`其他功能 - 将其放在全局范围内。

因此，要么使用全局`window`对象并执行以下操作：

```
window.methods = 
```

例如：

```
(function ($) { 
        "use strict";    
         window.methods = {
             validate: function () {... 
```

或者先在外面定义它`(function($){...})`

例如：

```
var methods = {};
(function ($) { 
        "use strict";    
         methods = {
             validate: function () {... 
```

`var`在 second 之前注意 no `methods`。

然后你可以打电话`methods.validate()`

**另外：**确保您关闭- 您发布的代码中缺少它`(function ($) {`。`})(jQuery)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:27:44.350

```
Try this:
 var methods = {
     validate: function () {
                 if ($(this).is("form"))
                     return methods._validateFields(this);
                 else {
                     // field validation
                     var form = $(this).closest('form');
                     var options = form.data('jqv');
                     var r = methods._validateField($(this), options);

                     if (options.onSuccess && options.InvalidFields.length == 0)
                         options.onSuccess();
                     else if (options.onFailure && options.InvalidFields.length > 0)
                         options.onFailure();
                     return r;
                 }
             }

<script type="text/javascript">
    function dateSelectionChanged(sender, args) {
            methods.validate();
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:12:23.793

我已经修好了！！

我已经调用了 jQuery("#aspnetForm").valid();

我创建了一个名为 valid() 的函数

像这样 ：

```
 $.fn.valid = function (method) {
           methods._validateFields(this);
     }; 
```

现在它很好....！

# node.js - Redis 连接从关闭事件中消失

> ID：11429020
> 
> 赞同：4
> 
> 时间：2012-07-11T08:58:26.780
> 
> 标签：node.js, redis, node-redis

在我们的 redis 配置中，我们设置了 timeout: 7 seconds

在[node_redis](https://github.com/mranney/node_redis)我们处理 redis 连接就绪和结束事件为

```
client.on("ready", function() {
      logger.info("Connection Successfully Established to ", this.host, this.port);
}
client.on("end", function() {
    logger.fatal("Connection Terminated to ", this.host, this.port);
} 
```

样本日志

> [2012-07-11 08:21:29.545] [致命] 生产 - 连接终止于 'xxx9' '6399'
> [2012-07-11 08:21:29.803] [信息] 生产 - 连接成功建立到' xxx9' '6399'

但是在某些情况下（很可能 redis 正在关闭连接而不通知客户端）我们看到[命令队列](https://github.com/mranney/node_redis/blob/master/index.js#L46)堆积起来并且请求花费了太多时间来获得响应[直到 node-redis 客户端能够感知到关闭事件的时间]。在所有此类情况下，都会返回带有此错误的命令回调`Redis connection gone from close event`。即使经过这么多的等待。由于没有触发通常的结束事件，因此看起来这不是问题。

问题似乎与此类似 - [http://code.google.com/p/redis/issues/detail?id=368](http://code.google.com/p/redis/issues/detail?id=368)

这是redis中发生的已知事情吗？

有没有办法指定命令的执行[发送和接收回复]不应该超过阈值并在这种情况下回复错误，而不是让客户端停止？

或者在像socket_timeout这样的情况下还有其他触发关闭事件的方法吗？

或者我们应该从我们的 redis 方面检查一些东西？我们在级别上监控了我们的 redis 日志，`debug`但没有发现与此问题相关的任何有用信息

当我们在调试模式下运行 node-redis 时，我们可以清楚地看到客户端因请求堆积在命令队列中而停滞不前。我们在[flush_on_error](https://github.com/mranney/node_redis/blob/master/index.js#L110)函数中记录了[原因和队列长度。](https://github.com/mranney/node_redis/blob/master/index.js#L110)我们一直禁用[offline_queuing 。](https://github.com/mranney/node_redis/blob/master/index.js#L47)

样本日志

> Redis 连接已从关闭事件中消失。离线队列 0 命令队列 8

请求失败的响应时间：30388 ms [这取决于命令队列中的等待时间。第一个排队的人的响应时间最长，后面的人响应时间更短]

通常的响应时间：1 毫秒

PS：我们也在 node_redis中提交了一个[问题](https://github.com/mranney/node_redis/issues/247)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-20T06:37:09.270

我们也遇到了与 Redis 的连接问题。似乎它会在不告诉客户端的情况下关闭连接。我们注意到这可能是服务器上的超时问题。这是我们使用的解决方案，自 7 月以来我们没有遇到任何问题。

```
var RETRY_EVERY = 1000 * 60 * 3;
var startTimer = function(){
    console.log('Begin the hot tub!')
    setInterval(function(){
        try{
            client.set('hot',new Date());
            console.log(client.get('hot'))
        }
        catch(e){
            console.log(e);
        }

    },RETRY_EVERY)
}(); 
```

考虑到每 3 分钟只有一个电话，性能应该不成问题；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-04T15:34:45.393

关于 oconnecp 的回答，你不能这样做：

```
setInterval(client.ping(), 1000 * 60 * 30); 
```

# python - Python：从文本文件的条目中创建一个十进制数

> ID：11429023
> 
> 赞同：0
> 
> 时间：2012-07-11T08:58:49.683
> 
> 标签：python, file, parsing, text, binary

我有一个包含类似于以下示例的条目的文本文件：

```
# 8行表头
---------------------------------------------
123 ABC12345 一个更可变长度的文本
456 DEF12345 更多可变长度的文本
789 GHI12345 B 更多可变长度文本
987 JKL12345 更多可变长度文本
654 MNO12345 B 更多可变长度文本
321 PQR12345 B 更多可变长度文本
ETC...
```

我想要实现的是：

1.  将 As 转换为 1，将 Bs 转换为 0，以便获得二进制数 对于上面的示例，这将是 110100（即 AABABB）
2.  将此二进制数转换为十进制数对于上面的示例，这将是 52
3.  将此十进制数映射到文本字符串（即 52 = "Case 1" 或 53 = "Case 2" 等）和
4.  在标准输出上打印

我有一点 Python 经验，但上面的问题超出了我的能力范围。因此，社区的任何帮助将不胜感激。非常感谢提前， Hib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:04:50.590

一些指针（假设 Python 2）：

翻译一个字符串：

```
>>> import string
>>> table = string.maketrans("AB","10")
>>> translated = "AABABB".translate(table)
>>> translated
'110100' 
```

转换为基数 10：

```
>>> int(translated, 2)
52 
```

不知道如何将其映射到那些任意字符串 - 需要更多信息。

打印到`stdout`- 真的吗？你在哪个部分有问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:06:24.130

像这样的东西应该可以工作（未经测试）：

```
from itertools import islice

binary_map = dict(zip("AB", "10"))  # Equivalent to {"A": "1", "B": "0"}
string_map = {52: "Case 1", 53: "Case 2"}

with open("my_text_file") as f:
    binary_str = "".join(binary_map[x.split()[2]] for x in islice(f, 9, None))

binary_value = int(binary_string, 2)
print string_map[binary_value] 
```

我将为您分解缩进的代码行并进行解释。

*   `join`空字符串的方法将连接参数中给出的字符串，因此`"".join(["A", "B", "C"])`等于`"ABC"`。
*   我们向这个方法传递一个所谓的[生成器表达式](http://docs.python.org/tutorial/classes.html#generator-expressions), `X for Y in Z`。[它与列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)具有相同的语法，只是省略了方括号。
*   该[`islice`](http://docs.python.org/library/itertools.html#itertools.islice)函数返回一个迭代器，它默默地跳过文件对象的前 9 行`f`，因此它产生从第 10 行开始的行。
*   不带参数的`split`方法`str`将拆分任何空白字符序列（空格、制表符（`"\t"`）、换行符（`"\n"`）和回车符（`"\r"`））并返回一个列表。例如，`" a \t b\n\t c\n".split()`等于`['a', 'b', 'c']`。我们对第三列感兴趣`x.split()[2]`，它是`"A"`或`"B"`。
*   在字典中查找这个值`binary_map`会给我们一个`"1"`或一个`"0"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:09:01.373

一个.txt：

```
# 8 rows of header

123 ABC12345 A some more variable length text
456 DEF12345 A some more variable length text
789 GHI12345 B some more variable length text
987 JKL12345 A some more variable length text
654 MNO12345 B some more variable length text
321 PQR12345 B some more variable length text 
```

你可以试试这个：

```
>>> int(''.join([line.split(' ')[2] for line in open('a.txt', 'r').readlines()[8:]]).replace('A', '1').replace('B', '0'), 2)
>>> 52 
```

至于将 int 映射到字符串，不确定您的意思。

```
>>> value = {int(''.join([line.split(' ')[2] for line in open('a.txt', 'r').readlines()[8:]]).replace('A', '1').replace('B', '0'), 2): 'case 52'}  
>>> value[52]
'case 52'
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:19:24.133

我使用`re`模块来检查要接受的行的格式：

```
>>> def map_file_to_string(string):
    values = []
    for line in string.split('\n'):
        if re.match(r'\d{3} \w{3}\d{5} [AB] .*', line):
            values.append(1 if line[13] == 'A' else 0)
    return dict_map[int(''.join(map(str, values)), 2)]

>>> dict_map = {52: 'Case 1', 53: 'Case 2'}
>>> s1 = """# 8 rows of header
---------------------------------------------
123 ABC12345 A some more variable length text
456 DEF12345 A some more variable length text
789 GHI12345 B some more variable length text
987 JKL12345 A some more variable length text
654 MNO12345 B some more variable length text
321 PQR12345 B some more variable length text
etc.."""
>>> map_file_to_string(s1)
'Case 1'
>>> 
```

# svg - 我可以以 3dish 方式旋转 SVG 文件中的组标签吗？

> ID：11429024
> 
> 赞同：1
> 
> 时间：2012-07-11T08:58:51.757
> 
> 标签：svg, 3d, rotation

我可以以 3dish 方式旋转 SVG 文件中的组标签吗？

是否需要外部 JS 库？我很高兴在某处获得链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:45:38.100

显然 3d 支持还没有出现，所以你必须让它看起来像有三个维度。

看看下面的链接，他们详细解释了如何使用 SVG 来产生 3d 效果。

[旋转立方体 - 线框（看起来像 3d 控件来移动它）](http://www.petercollingridge.co.uk/blog/rotating-3d-svg-cube)

[3d 动画 - 3d 中的高级动画](http://www.petercollingridge.co.uk/blog/3d-animation-svg)

# java - 相当于Java中的'where'fortran关键字？

> ID：11429026
> 
> 赞同：1
> 
> 时间：2012-07-11T08:59:03.950
> 
> 标签：java, fortran, where, equivalent

我正在编写一个 Java 程序，在该程序中我根据字符串检查列表，然后对其进行处理。在fortran中，我会写一些类似的东西

```
where(list(:)==stringToCheck){
    ...
    statements
    ...
    } 
```

相反，我对一堆 for 循环感到头疼，if 语句和中断到处都是。不，也许我可以稍微整理一下代码，但它仍然感觉比 fortran 效率低得多。

编辑，这是我使用的代码：

```
for(int idx=0;idx<player.get_charactersOwned().size();idx++)
            {
                if(player.get_charactersOwned().get(idx).get_characterName().equals(charName))
                {
                    /* Add character to the game
                     * Add game to the character*/
                    System.out.println("Character "+charName+" Found ");
                    gameToMake.addCharacters(player.get_charactersOwned().get(idx));
                    player.get_charactersOwned().get(idx).addGame(gameToMake);
                    break;
                }else 
                {
                    System.err.println("Character "+ charName +" not found");
                    System.out.println("Shall I add that Character? y/n ");
                    choice = scanner.nextLine();
                    if(choice.equalsIgnoreCase("y"))
                    {
                        charName = scanner.nextLine();
                        Character character = new Character(charName);
                        characterTempList.add(character);
                        player.addCharacter(characterTempList);
                        gameToMake.addCharacters(player.get_charactersOwned().get(idx));
                        player.get_charactersOwned().get(idx).addGame(gameToMake);
                        break;
                    }else{break;}
                }
            } 
```

*尽管修复*此代码很诱人，但我更愿意使用变通方法。

在不使用外部库的情况下，是否有与此等效的 Java？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:23:08.537

不，Java 中没有等价物。相反，如果您需要检查一个字符列表（每个都有一个名称）是否包含一个字符名称，那么只需执行以下操作：

```
// search the name
boolean found = false;
for (Character c : player.get_charactersOwned()) {
    if (c.get_characterName().equals(charName)) {
        found = true;
        break;
    }
}

// perform the check
if (found) {
    // do something
} else {
    // do something else
} 
```

顺便说一句，`Character`这对你的类来说是个坏名字，它与 Java 自己的`Character`类发生冲突。如果可能，重命名它，以避免混淆。或者，循环可以这样写：

```
boolean found = false;
for (int i = 0, n = player.get_charactersOwned().size(); i < n && !found; i++) {
    Character c = player.get_charactersOwned().get(i);
    if (c.get_characterName().equals(charName)) {
        found = true;
    }
} 
```

# gwt - 解耦 GWT 异步回调

> ID：11429027
> 
> 赞同：6
> 
> 时间：2012-07-11T08:59:10.623
> 
> 标签：gwt, asynchronous, coding-style, state-pattern

我有以下问题：我正在尝试使用 GWT 对流程进行建模，其中我有几个带有几个提交按钮的视图。按下 button1 将创建一个服务器交互，如果一切正常，将加载下一个视图。我现在的问题是我得到了非常讨厌的意大利面条代码（只是非常高级以向您展示我的意思）：

```
onClick {
    AsyncCallback {
       onSuccess {

           load new view with another clickhandler and an asynccallback

       }
    }
} 
```

有什么方法可以创建某种抽象或其他东西吗？也许是状态模式？如何？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T11:09:02.607

这实际上是一个非常好的问题——而且可能是一个没有明确答案的问题。这是一个适用于许多框架的问题，而不仅仅是 GWT，所以我喜欢你的想法，用一些简化的代码来看待这个问题。我将把它延长一点，以展示即使只有 4 个非常简单的回调是什么样子的：

### 嵌套回调

```
alice.call("a", new Callback() {

  @Override
  public void onSuccess() {
    bob.call("b", new Callback() {

      @Override
      public void onSuccess() {
        charlie.call("c", new Callback() {

          @Override
          public void onSuccess() {
            daisy.call("d", new Callback() {

              @Override
              public void onSuccess() {
                // finished
              }

            });
          }

        });
      }

    });
  }

}); 
```

### 命名回调

您可以使用您的 IDE 轻松地将其重构为命名回调（提示：请从下到上阅读回调！）：

```
final Callback daisyCallback = new Callback() {

  @Override
  public void onSuccess() {
    // finished
  }
};

final Callback charlieCallback = new Callback() {

  @Override
  public void onSuccess() {
    daisy.call("d", daisyCallback);
  }
};

final Callback bobCallback = new Callback() {

  @Override
  public void onSuccess() {
    charlie.call("c", charlieCallback);
  }
};

final Callback aliceCallback = new Callback() {

  @Override
  public void onSuccess() {
    bob.call("b", bobCallback);
  }
};

alice.call("a", aliceCallback); 
```

*   问题：控制流不再那么明显了。
*   不过，IDE 可以通过使用“搜索引用”（Eclipse 中的 Ctrl-G）或类似的东西来提供帮助。

### 事件总线（或观察者/发布-订阅模式）

这是事件总线的相同调用的样子：

```
alice.call("a", new Callback() {

  @Override
  public void onSuccess() {
    bus.fireEvent(BusEvent.ALICE_SUCCESSFUL_EVENT);
  }
});

bus.addEventListener(BusEvent.ALICE_SUCCESSFUL_EVENT, new BusEventListener() {

  @Override
  public void onEvent(final BusEvent busEvent) {
    bob.call("b", new Callback() {

      @Override
      public void onSuccess() {
        bus.fireEvent(BusEvent.BOB_SUCCESSFUL_EVENT);
      }
    });

  }
});

bus.addEventListener(BusEvent.BOB_SUCCESSFUL_EVENT, new BusEventListener() {

  @Override
  public void onEvent(final BusEvent busEvent) {
    charlie.call("c", new Callback() {

      @Override
      public void onSuccess() {
        bus.fireEvent(BusEvent.CHARLIE_SUCCESSFUL_EVENT);
      }
    });

  }
});

bus.addEventListener(BusEvent.CHARLIE_SUCCESSFUL_EVENT, new BusEventListener() {

  @Override
  public void onEvent(final BusEvent busEvent) {
    daisy.call("d", new Callback() {

      @Override
      public void onSuccess() {
        bus.fireEvent(BusEvent.DAISY_SUCCESSFUL_EVENT);
      }
    });

  }
});

bus.addEventListener(BusEvent.DAISY_SUCCESSFUL_EVENT, new BusEventListener() {

  @Override
  public void onEvent(final BusEvent busEvent) {
    // finished
  }
}); 
```

*   在适当的情况下（当每个事件的含义非常清楚时，并且如果您没有太多事件），这种模式可以使事情变得非常好和清晰。
*   但在其他情况下，它会使控制流更加混乱（并且您很容易获得两倍的代码行数）。
*   使用您的 IDE 来查找控制流更加困难。
*   GWT 历史机制是合理使用该技术的一个非常积极的例子。

### 分而治之

根据我的经验，通过混合嵌套和命名回调来“分而治之”通常是一个好主意：

```
final Callback charlieCallback = new Callback() {

  @Override
  public void onSuccess() {

    daisy.call("d", new Callback() {

      @Override
      public void onSuccess() {
        // finished
      }
    });
  }
};

alice.call("a", new Callback() {

  @Override
  public void onSuccess() {

    bob.call("b", new Callback() {

      @Override
      public void onSuccess() {

        charlie.call("c", charlieCallback);
      }
    });
  }
}); 
```

视情况而定，两个嵌套的回调通常仍然是可读的，并且它们在读取代码时减少了 50% 的方法之间的跳转。

[（我在这里创建了我的示例的 pastebin，如果你喜欢玩它们： http: [//pastebin.com/yNc9Cqtb](http://pastebin.com/yNc9Cqtb)）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:28:30.993

意大利面条代码在 GWT 中是一个棘手的问题，就像在 Javascript 中一样，您的大部分代码都是围绕异步回调构建的。

[该问题](https://stackoverflow.com/questions/5265743/node-js-what-techniques-are-there-for-writing-clean-simple-callback-code)的答案中描述的一些处理它的技术可能适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:13:47.347

避免小部件之间耦合的建议方法是使用 EventBus。在此处阅读更多详细信息[https://developers.google.com/web-toolkit/articles/mvp-architecture#events](https://developers.google.com/web-toolkit/articles/mvp-architecture#events)

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:30:42.163

从一开始就使用 MVP。使用活动和地点。您的代码将是干净的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:35:12.493

```
changeview(boolean first){
        if(first)
        {
                firstView.setVisible(true);
                secondView.setVisible(false);
        }else{
                firstView.setVisible(false);
                secondView.setVisible(true);
        }
}

onClick {
    AsyncCallback {
       onSuccess {
                changeView(false);
       }
    }
} 
```

通过上面的视图在视图之间切换。

# svg - 为什么 SVG 滤镜效果在 Mac OS 上的 Firefox 中模糊？

> ID：11429031
> 
> 赞同：1
> 
> 时间：2012-07-11T08:59:24.433
> 
> 标签：svg, svg-filters

似乎 SVG 滤镜效果在 Mac OS 上的 Firefox 中呈现出奇怪的效果。我在尝试为具有 1px 笔划的形状实现投影时遇到了这个问题。我在 Javascript 中进行了一些像素捕捉以及 0.5px 的偏移，这使得 1px 的笔画呈现清晰，只要没有阴影。

但是，当我使用滤镜效果应用投影时，形状会变得模糊，但仅限于 Mac OS 上的 Firefox（我在 Mac OS 和 Linux 上尝试过 Firefox 和 Chrome）。

这是一些示例代码：

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <defs>

    <!-- A trivial filter that shouldn't really do anything, to demonstrate a minimal case -->
    <filter id="f1" x="-10%" y="-10%" width="120%" height="120%" filterRes="100">
      <feMerge>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- A more representative example where this issue is annoying: a drop shadow -->
    <filter id="f2" x="-10%" y="-10%" width="200%" height="200%" filterRes="100">
      <feOffset result="offOut" in="SourceAlpha" dx="2" dy="2" />
      <feGaussianBlur result="blurOut" in="offOut" stdDeviation="2" />
      <feMerge>
        <feMergeNode in="blurOut"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

  </defs>

  <!-- Translating by 0.5 px so that 1px borders are sharp -->
  <g transform="translate(5.5,5.5)">
    <rect width="20" height="20" rx="2" ry="2" stroke="black" stroke-width="1" fill="white" />
    <rect x="30" width="20" height="20" rx="2" ry="2" stroke="black" stroke-width="1" fill="white" filter="url(#f1)" />
    <rect x="60" width="20" height="20" rx="2" ry="2" stroke="black" stroke-width="1" fill="white" filter="url(#f2)" />
  </g>
</svg> 
```

svg 在 Linux 上的 Firefox 中看起来不错：（对不起，我不能作为新的 SO 用户发布内联图像）

[http://i.imgur.com/czKP2.png](http://i.imgur.com/czKP2.png)

在 Mac OS 上的 Chrome 中也是如此（我只能以新 SO 用户的身份发布 2 个链接，因此没有指向屏幕截图的链接，但它本质上是相同的），但`rect`在 Mac OS 上的 Firefox 中应用了滤镜效果的 s 是模糊的：

[http://i.imgur.com/7WxI8.png](http://i.imgur.com/7WxI8.png)

我尝试了几次调整都无济于事，包括：

*   使用`feBlend`or`feComposite`代替`feMerge`
*   达到`filterRes`破坏浏览器的高值

有任何想法吗？

（抱歉，没有包含一个工作演示——我试图创建一个 jsfiddle，但它并不能真正正常工作，因为当 SVG 像 jsfiddle 那样在框架中时，像素捕捉 Javascript 代码不起作用。）

# java - 发送到所有功能。多线程服务器

> ID：11429032
> 
> 赞同：0
> 
> 时间：2012-07-11T08:59:25.710
> 
> 标签：java, networking

所以我一直在这个模板服务器上构建一个小型服务器来练习。[http://www.kieser.net/linux/java_server.html](http://www.kieser.net/linux/java_server.html)

我有工作的客户端，但我很难弄清楚如何将消息从客户端发送到服务器，然后从该线程发送到所有其他客户端，而不仅仅是一个客户端。

任何人都可以阐明我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:32:33.507

读一读..这应该比我能更好地解释一切：p

[http://www.dreamincode.net/forums/topic/259777-a-simple-chat-program-with-clientserver-gui-optional/](http://www.dreamincode.net/forums/topic/259777-a-simple-chat-program-with-clientserver-gui-optional/)

# jquery - 使用角落中的框手柄调整元素大小

> ID：11429034
> 
> 赞同：12
> 
> 时间：2012-07-11T08:59:36.287
> 
> 标签：jquery, handle, jcrop

在[Jcrop](http://deepliquid.com/content/Jcrop_Manual.html)中，选择裁剪区域后，会出现一个 div，边角处带有框手柄。

![](../Images/9abc3e49835453b5dea12a9e77dba691.png)

是否有任何 jQuery 插件可以构建这种类型的框句柄？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-13T17:56:12.977

如上所述，您可以使用 jQuery UI 的可调整大小。我什至为你设置了一个小提琴！

[http://jsfiddle.net/digitalaxis/j2JU6/](http://jsfiddle.net/digitalaxis/j2JU6/)

查询

```
$('#element').resizable({
    handles: {
    'ne': '#negrip',
    'se': '#segrip',
    'sw': '#swgrip',
    'nw': '#nwgrip'
    }
}); 
```

HTML

```
<div class="ui-resizable-handle ui-resizable-nw" id="nwgrip"></div>
<div class="ui-resizable-handle ui-resizable-ne" id="negrip"></div>
<div class="ui-resizable-handle ui-resizable-sw" id="swgrip"></div>
<div class="ui-resizable-handle ui-resizable-se" id="segrip"></div> 
```

CSS

```
#elementResizable {
    border: 1px solid #000000;
    width: 300px;
    height: 40px;
    overflow: hidden;
}
#nwgrip, #negrip, #swgrip, #segrip, #ngrip, #egrip, #sgrip, #wgrip {
    width: 10px;
    height: 10px;
    background-color: #ffffff;
    border: 1px solid #000000;
}
#segrip {
    right: -5px;
    bottom: -5px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:12:35.693

您可以使用 jQuery UI Resizable 插件：

[http://jqueryui.com/demos/resizable/](http://jqueryui.com/demos/resizable/)

使用“handles”参数使你的元素在整个边框上都可以调整大小。

# sql - CTE SQL 查询在两个方向上递归

> ID：11429035
> 
> 赞同：1
> 
> 时间：2012-07-11T08:59:39.133
> 
> 标签：sql, postgresql, common-table-expression, postgresql-9.1

我正在使用 Postgres 9.1，并且我有一个带有家谱层次结构的表。此表称为父母，其中有两个外键，一个用于父级，一个用于关系中的子级。以下 SQL 查询（大部分是从 Postgres 文档中窃取的）可以工作，但会向上和向下遍历树：

```
with recursive temp(child, parent, depth, path, cycle) as
        (select child, parent, 1, array[child], false
         from parents
         where parent = 149

         union all

         select parents.child, parents.parent, temp.depth + 1, path || parents.child, parents.child = any(path)
         from temp, parents
         where parents.child = temp.parent)
    select distinct c1.name as child_name, c2.name as parent_name
    from temp
    join people c1 on temp.child = c1.id
    join people c2 on temp.parent = c2.id; 
```

父节点 149 是遍历的根节点。

输出有 149 个子代和所有代的祖先。理想情况下，查询将沿家谱下降，并且没有祖先的代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:07:38.520

*免责声明：在我意识到[@wildplasser](https://stackoverflow.com/users/905902/wildplasser)已经在他们对该问题的评论中[提出](https://stackoverflow.com/questions/11429035/cte-sql-query-is-recursing-in-two-directions/11434492#comment15077065_11429035)了相同的建议之前，这个答案被接受了。（不是想盗用别人的想法，抱歉。）*

如果您只想构建从给定父代的后代，则应更改此条件

```
parents.child = temp.parent 
```

对此

```
temp.child = parents.parent 
```

因为在下一次迭代`temp`中应该将孩子视为父母（即匹配）。`parents.parent`

# caching - 寻找内存缓存解决方案

> ID：11429038
> 
> 赞同：0
> 
> 时间：2012-07-11T08:59:41.700
> 
> 标签：caching, grails, ehcache, grails-2.0

在我们的项目中，我们必须存储有关多个设备的当前信息。设备定期将这些信息传输到服务器。服务器将接收到的信息存储在几个表中，并更新同步列表中的对象，这些对象显示设备的当前状态。

为了避免繁重的数据库负载，一些视图通过同步列表访问缓存对象以显示请求设备的状态信息。

同步列表位于服务类中，如下所示：

```
private Map<Long, DeviceStatus> statusMap = java.util.Collections.synchronizedMap(new HashMap<Long, DeviceStatus>()) // key = unique id 
```

服务 API 提供了用于更新、删除、...按 id 或其他属性列出条目的方法。

我们对当前的解决方案不满意，因为您无法在更多正在运行的实例之间共享状态信息。此外，不可能监控此类列表的内存使用情况。

我们正在考虑两种解决方案：

**解决方案1：**

引入 HSQLDB 数据库（借助 dataSource 插件）来存储经常更新的信息。使用此解决方案，所有 GORM 功能（如 findBY）都将保留。缺点：几个系统之间的存储分布。

**解决方案2：**

将 POJO DeviceStatus 实现为域类并使其可缓存。将来，兵马俑可用于在多个系统上共享缓存的信息。缺点：我们不需要将这些信息存储在数据库中。有没有办法或选项只在内存中存储域类。在启动期间，通过从多个数据源（=表）获取信息来初始化 DeviceStatus 缓存。

**要求：**

*   使用 findBy 等方法访问缓存对象
*   在多个系统上分布缓存（使用 ehcache 和 terracotta）

您如何看待这些解决方案？对于所描述的场景是否有更好的解决方案？我们可以使用新引入的缓存插件来存储状态对象并通过唯一键以外的其他属性访问它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:08:59.170

你看过 memcache [http://memcached.org](http://memcached.org)吗？这是一个易于设置的开源内存缓存系统。您可以将任何可用的服务器添加到池中。您通过键/值存储数据，因此只需确保您填充的任何内容都是可序列化的。它将作为您的 Web 应用程序的独立层运行，因此您的任何应用程序实例都可以访问它而无需兵马俑，据我所知，这有助于您的 JVM 集群共享内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T02:58:13.210

你考虑过使用 EhCache 吗？EhCache 可用于缓存任何对象，不仅是域类（尽管您可以将其用作 Hibernate 的二级缓存）。您可以设置 EhCache 以在内存缓存已满时透明地将对象溢出到磁盘，以防止出现内存不足的情况。

如果您需要跨节点同步所有缓存，则可以使用 Terracotta 作为分布式缓存，并且 Terracotta 与 EhCache 兼容。

否则你的问题似乎有点不清楚；您是否需要跨这些域对象的查询功能？

# jquery - 根据返回的数据设置类

> ID：11429040
> 
> 赞同：1
> 
> 时间：2012-07-11T08:59:51.483
> 
> 标签：jquery, css, ajax

早晨，

当我从数据库返回数据以显示更改/更新时，我正在设置 td 的类。在返回的字段之一上，我有 4 个选项，我需要根据结果更改该字段的 css 类。

```
 "<td" + (res.prodPublished ? "" : " class='updated'") + ">" + res.prodPublished + "</td>" 
```

我目前正在使用上述内容，如果您只有真假，那也没关系。但是，我有... True，False，Processing，New。

根据这些选项，我如何更改课程？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:05:03.303

With a js function?

```
function get_cell_class(type) {
    if(type == "True") {
        return " class='updated'";
    }

    if(type == "False") {
        return " class='class_2'";
    }

    ..
} 
```

Then within your HTML code:

```
"<td" + get_cell_class(res.prodPublished) + ">" + res.prodPublished + "</td>" 
```

## Method 2:

Or you can just make CSS classes of the values:

```
.my_css_true {
    color: blue;
}

.my_css_updated {
    color: orange;
} 
```

Then in HTML:

```
"<td class=\"my_css_" + res.prodPublished + "\">" + res.prodPublished + "</td>" 
```

Hope this helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:06:33.897

使用字典

```
var classes = {
  'True': ' class="updated"',
  'False': '',
  'New': ' class="other-classname-new"',
  'Processing': ' class="other-classname-processing"'
};

//some time later

 "<td" + classes[res.prodPublished] + ">" + res.prodPublished + "</td>" 
```

请注意，`"True"`and`"False"`是字符串，而不是布尔原语。因此`res.prodPublished`也需要是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:05:18.577

You just need to setup an if else instead

You can write it as a standard if else or the same way you do now.

```
var theClass = (result == "true" ? "class for true": 
      (result == "false" ? "class for false":
              (result == "processing" ? "class for processing": "class for new"))); 
```

# java - 如何从 Android (Java) 中的通用数组列表中删除项目

> ID：11429041
> 
> 赞同：4
> 
> 时间：2012-07-11T08:59:57.660
> 
> 标签：java, android

我在这里有一个对象的通用数组列表，我想删除某些元素，问题是当我用 for 循环迭代列表时，我不能做一个简单的`remove()`'s 序列，因为每次删除后元素都会移动。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-11T09:01:41.767

使用[迭代器](http://developer.android.com/reference/java/util/Iterator.html)删除元素

**喜欢**

```
Iterator itr = list.iterator();
String strElement = "";
while (itr.hasNext()) {
    strElement = (String) itr.next();
    if (strElement.equals("2")) {
        itr.remove();
    }
} 
```

*   [看这里](https://stackoverflow.com/questions/626671/java-how-to-remove-elements-from-a-list-while-iterating-over-adding-to-it)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:28:46.563

您可以通过这种方式迭代列表...

```
public void clean(List<Kopek> kopeks) {
  for(Kopek kopek : kopeks) {
    if (kopek.isDirty())
      kopeks.remove(kopek);
  }
} 
```

这相当于...

```
public void clean1(List<Kopek> kopeks) {
  Iterator<Kopek> kopekIter = kopeks.iterator();

  while (kopekIter.hasNext()) {
    Kopek kopek = kopekIter.next();
    if (kopek.isDirty())
      kopeks.remove(kopek);
  }
} 
```

不要这样做......（由于您已经观察到的原因。）

```
public void clean(List<Kopek> kopeks) {
  for(int i=0; i<kopeks.size(); i++) {
    Kopek kopek = kopeks.get(i);
    if (kopek.isDirty())
      kopeks.remove(i);
  }
} 
```

但是，我相信按索引而不是按对象删除更有效。按对象删除效率不高，因为列表在大多数情况下不是散列列表。

> kopeks.remove（kopek）；

对比

> kopeks.remove(i);

为了实现位置移除，通过适当地处理移动目标......

```
public void clean(List<Kopek> kopeks) {
  int i=0;
  while(i<kopeks.size()) {
    Kopek kopek = kopeks.get(i);
    if (kopek.isDirty()) // no need to increment.
      kopeks.remove(i);
    else
      i++;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:05:26.040

If you have the objects that you want to remove from your `ArrayList<T>` you can use :

```
mArrayList.remove(object); 
```

or you can use an [`Iterator`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html) to remove your objects:

```
while(iterator.hasNext()){
    if(iterator.next() == some condition for removal){
        iterator.remove();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:22:53.120

您可以在遍历ArrayList 时***向后***迭代并删除。这具有后续元素不需要移动的优点，并且比向前移动更容易编程。

```
 List<String> arr = new ArrayList<String>();
   ListIterator<String> li = arr.listIterator(arr.size());

    // Iterate in reverse.
    while(li.hasPrevious()) {

        String str=li.previous();
        if(str.equals("A"))
        {
            li.remove();
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:40:16.907

不使用迭代器也解决了这个问题。我想做的就是获取要删除的索引并按降序对其进行排序，然后将其从列表中删除。检查下面的代码

```
Arraylist<obj> addlist = getlist();
List<Integer> indices = new ArrayList<Integer>();
    for(int i=0; i<addlist.size() ;i++){
        if(addlist.get(i).getDelete()){
            indices.add(i);

        }
    }
    Collections.sort(indices, Collections.reverseOrder());
    for (int i : indices)
        addlist.remove(i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T09:05:31.187

为要从原始 ArrayList 中删除的数据创建一个单独的 ArrayList，然后通过使用 for 循环对其进行循环来删除这些元素。

```
ArrayList<Myobj> arr = new ArrayList<Myobj>();

for (Myobj o : arr){

  arr.remove(arr.indexOf(o));

 } 
```

# android - css表单安卓

> ID：11429047
> 
> 赞同：0
> 
> 时间：2012-07-11T09:00:09.360
> 
> 标签：android, css, forms

我的网站上有一个表格。我首先为桌面浏览器制作了它，现在我也需要这个表单在 android 浏览器中工作。所以，我有一个 android 设备，并测试了网站，**但是当我尝试在输入字段中输入值时，我不能。**有什么帮助吗？

这是表单字段的代码：

```
<p>Empresa</p> <input type="text" value="empresa" name="empresa" id="empresa" /><br />              
<p>Usuario</p> <input type="text" value="usuario" name="alias" id="usuario"/><br />
<p>Contrase&ntilde;a</p> <input type="password" value="contraseña" name="clave" id="pass" /><br />                   
<input type="submit" value="ACCESO" id="boton_popup"/>
<input type="hidden" value="xxx" name="url"> 
```

我用 jQuery 实现了这段代码（它就像占位符，但使用 jQuery 我获得了与更多浏览器的兼容性）。也许这段代码在安卓浏览器中不起作用。

```
$("#usuario").click(function(){$(this).val("");});
$("#pass").click(function(){$(this).val("");});
$("#empresa").click(function(){$(this).val("");});
$("#empresa").one("keypress",function(){$(this).val("");}); 
```

**编辑**：在三星galaxy s2中测试，它就像一个魅力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:07:40.920

我猜你的android是一个触摸屏。由于“手势”的性质，触摸屏事件与点击事件不同。尝试改用该事件`onTouchStart`。

见[https://stackoverflow.com/a/4322252/1512291](https://stackoverflow.com/a/4322252/1512291)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T15:22:18.930

我将您的标记更改为以下内容：

```
<form action="example.php">
    <label>Empresa <input type="text" placeholder="empresa" name="empresa" id="empresa"></label>
    <label>Usuario <input type="text" placehoder="usuario" name="usuario" id="usuario"></label>
    <label>Contraseña <input type="text" placeholder="contraseña" name="clave" id="pass"></label>

    <button type="submit">Acceso</button>

    <input type="hidden" value="xxx" name="url">
</form> 
```

不需要 jQuery。我敢打赌它也适用于移动设备。jQuery 并不神奇。请参阅 **[此问题](https://stackoverflow.com/a/2826810/871050)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:22:46.597

解决了！！！这是我的错误，我没有告诉这些输入字段，我应用了字体**DroidSans**并且该字体与某些 android 浏览器不兼容......我删除了这个字体，现在它可以工作了！！！

但我有一个问题....我将此 css 应用于输入字段的文本：

```
font-family: DroidSans,Arial; 
```

我以为第一个不可用，第二个字体是有的（Arial）.....感谢所有帮助的朋友。最好的问候，丹尼尔

# opencv - 为什么 cvGetCaptureProperty(video,CV_CAP_PROP_POS_FRAMES) 在 Windows 7 64 位机器上返回 0？

> ID：11429054
> 
> 赞同：0
> 
> 时间：2012-07-11T09:00:33.493
> 
> 标签：opencv, video-processing

我正在运行一个代码来提取电影上的光流，我想在电影的所有帧上运行它。但是，当我使用

```
number_of_frames = (int) cvGetCaptureProperty( input_video, CV_CAP_PROP_POS_FRAMES ); 
```

number_of_frames 为 0；我的代码片段如下：

```
CvCapture *input_video = cvCaptureFromFile("C:\\Movies\\WESTWARD_HO.avi");
long number_of_frames;
cvSetCaptureProperty( input_video, CV_CAP_PROP_POS_AVI_RATIO, 1\. );
number_of_frames = (int) cvGetCaptureProperty( input_video, CV_CAP_PROP_POS_FRAMES ); 
```

我正在使用带有 OpenCv 2.1 的 Visual Studio 2008。我知道它很旧，但我必须使用它来向后兼容项目的其他部分。提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:08:03.790

OpenCV 中有大量与此参数相关的错误。目前，OpenCV 对它的支持还不是很好，尽管在最新版本中它有了很大的改进。由于视频格式、编解码器、后端等的数量庞大，很难让它在每个地方都能正常工作。

如果您真的需要它，请尝试将您的视频转换为另一种格式。使用不同的编解码器可能会获得更好的结果。此外，安装更多编解码器[有时会有所帮助](https://stackoverflow.com/questions/11131770/creating-video-from-images-with-opencv-2-4-1-on-ubuntu/11132517#11132517)。

这是关于 CV_CAP_POS_FRAMES 的相关问题： [Reverse video playback in OpenCV](https://stackoverflow.com/questions/11260042/reverse-video-playback-in-opencv/11260842#11260842)

而且，最重要的是，将您的 OpenCV**更新到 2.4.2。**使用 2.1 让我想起乔治华盛顿签署独立宣言的时代......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-12T14:19:15.697

您正在将 double 值从 0-1 转换为 int - 这就是为什么您得到 0...如果您想要总帧数使用 CV_CAP_PROP_FRAME_COUNT...

# cmake - CMake：如何从子项目的所有静态库中创建一个共享库？

> ID：11429055
> 
> 赞同：60
> 
> 时间：2012-07-11T09:00:39.293
> 
> 标签：cmake, shared-libraries

我有以下布局：

```
top_project
    + subproject1
    + subproject2 
```

每个`subproject1`和`subproject2`创建一个静态库。我想将这些静态库链接到该`top_project`级别的单个共享库中。

到目前为止我收集的信息是：

*   要么编译使用`-fPic`（除了 Windows 之外的所有东西都是必需的），以便创建与位置无关的代码，这将允许将静态库链接到单个共享库中，或者解压缩所有静态库（例如 using `ar`）并将它们重新链接到共享库中（其中我认为这是一个不优雅且不可移植的解决方案）
*   所有源文件都必须明确地提供给`add_library`命令：由于某种我无法理解的原因，简单地编写`add_library(${PROJECT_NAME} SHARED subproject1 subproject2)`不能按预期工作（它实际上创建了一个空库并且没有正确注册依赖项）
*   CMake 中有一个 OBJECT 库功能，但我认为它的目的并不是真正做我想做的事。

有什么想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-12T09:31:10.060

好吧，我想通了：这比它应该的要痛苦得多。直到最近，Kitware 的人们才明白为什么有人会想要从静态库创建 DLL。他们的论点是在主目录（例如在我的例子中）中应该总是有源文件，`top_project`因为它实际上是一个自己的项目。我对事情的看法不同，我需要分解`top_project`成不应该独立存在的较小的子项目（即，为他们创建一个成熟的项目并使用添加它们是没有意义的`ExternalProject_Add`）。此外，当我发布我的共享库（用于使用，例如与 Java 本地接口）时，我不想发布数十个共享库，因为这等于暴露了我项目的内部布局。无论如何，我认为已经为从静态库创建共享库做了一个案例，我将继续讨论技术细节。

在 和 的 CMakeLists.txt 中`subproject1`，`subproject2`您应该使用 OBJECT 库功能（在 CMake 2.8.8 中引入）创建目标：

```
add_library(${PROJECT_NAME} OBJECT ${SRC}) 
```

where`SRC`指定源文件列表（注意这些应该在 CMakeLists.txt 文件中明确设置，因为它允许 make 在检测到 CMakeLists.txt 修改时重新启动 CMake，例如添加或删除文件时）

在 中`top_project`，使用以下命令添加子项目：

```
add_subdirectory(subproject1)
add_subdirectory(subproject2) 
```

要查看静态库中的符号，请使用：

```
set(CMAKE_SHARED_LINKER_FLAGS "-Wl,--export-all-symbols") 
```

然后，您可以使用以下方法创建共享库：

```
add_library(${PROJECT_NAME} SHARED $<TARGET_OBJECTS:subproject1>
                                   $<TARGET_OBJECTS:subproject2>) 
```

我发现任何“普通”库（即不是对象）都需要在单独的`add_library`命令中添加，否则它会被忽略。

对于可执行文件，您可以使用：

```
add_executable(name_of_executable $<TARGET_OBJECTS:subproject1>
                  $<TARGET_OBJECTS:subproject2>)
set(LINK_FLAGS ${LINK_FLAGS} "-Wl,-whole-archive")
target_link_libraries(name_of_executable ${PROJECT_NAME} 
```

我再说一遍，这仅适用于 CMake 2.8.8 版。同样，CMake 非常好地管理依赖关系并且是跨平台的，因为它并不比普通的旧 Makefile 痛苦得多，而且灵活性肯定更低。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-01-25T15:00:13.350

我的解决方案是简单地将`/WHOLEARCHIVE`, `-all_load`, 或添加`--whole-archive`到链接器标志中，这样当您的主库被链接时，所有子库都包括在内，包括它们的所有符号（默认行为是只包括子库的符号由主库使用。例如：

# 源文件

```
$ echo "void Func1() { }" > source1.cpp
$ echo "void Func2() { }" > source2.cpp
$ echo "void Func3() { }" > source3.cpp
$ echo "void Func4() { }" > source4.cpp 
```

# 天真的 CMakeLists.txt

```
cmake_minimum_required(VERSION 3.7)

# The 'sub' libraries, e.g. from an `add_subdirectory()` call.
add_library(sublib_a STATIC source1.cpp source2.cpp)
add_library(sublib_b STATIC source3.cpp source4.cpp)

# The main library that contains all of the sub libraries.
add_library(mainlib SHARED)

target_link_libraries(mainlib sublib_a sublib_b) 
```

运行它（在 OSX 上）：

```
$ make VERBOSE=1
...
[100%] Linking CXX shared library libmainlib.dylib
/usr/local/Cellar/cmake/3.7.1/bin/cmake -E cmake_link_script CMakeFiles/mainlib.dir/link.txt --verbose=1
/Library/Developer/CommandLineTools/usr/bin/c++   -dynamiclib -Wl,-headerpad_max_install_names  -o libmainlib.dylib -install_name @rpath/libmainlib.dylib  libsublib_a.a libsublib_b.a 
[100%] Built target mainlib

$ nm libmainlib.dylib | grep Func
$ 
```

# 正确的 CMakeLists.txt

附加这个：

```
# By default, symbols provided by the sublibs that are not used by mainlib (which is all of them in this case)
# are not used. This changes that.
if (WIN32)
    set_target_properties(mainlib PROPERTIES
        LINK_FLAGS "/WHOLEARCHIVE"
    )
elseif (APPLE)
    set_target_properties(mainlib PROPERTIES
        LINK_FLAGS "-Wl,-all_load"
    )
else ()
    set_target_properties(mainlib PROPERTIES
        LINK_FLAGS "-Wl,--whole-archive"
    )
endif () 
```

运行它（注意额外的`-all_load`）：

```
$ make VERBOSE=1
[100%] Linking CXX shared library libmainlib.dylib
/usr/local/Cellar/cmake/3.7.1/bin/cmake -E cmake_link_script CMakeFiles/mainlib.dir/link.txt --verbose=1
/Library/Developer/CommandLineTools/usr/bin/c++   -dynamiclib -Wl,-headerpad_max_install_names -Wl,-all_load -o libmainlib.dylib -install_name @rpath/libmainlib.dylib  libsublib_a.a libsublib_b.a 
[100%] Built target mainlib

$ nm libmainlib.dylib | grep Func
0000000000001da0 T __Z5Func1v
0000000000001db0 T __Z5Func2v
0000000000001dc0 T __Z5Func3v
0000000000001dd0 T __Z5Func4v 
```

`-all_load`请注意，到目前为止，我只进行了实际测试，并且`/WHOLEARCHIVE`是 MSVC 2015 选项。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T21:44:29.867

另一种方法。

这种方式看起来更简单，但我不确定它有多完美：

[https://stackoverflow.com/a/14347487/602340](https://stackoverflow.com/a/14347487/602340)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-29T20:07:08.440

另一种方法是提供所有项目的源文件和头文件的路径，并将它们构建在一起以生成 .so 。这通常是推荐的方式，而不是创建静态库，然后从中创建共享库。

基本上你应该做以下事情：

```
FILE(GLOB subproject1_sources
  <sub_project1_lib_sources_dir>/file1.c
  <sub_project1_lib_sources_dir>/file2.c //... etc
)

FILE(GLOB subproject2_sources
  <sub_project2_lib_sources_dir>/file1.c
  <sub_project2_lib_sources_dir>/file2.c //... etc
)

FILE(GLOB topProject_sources
  <top_project_lib_sources_dir>/file1.c
  <top_project_lib_sources_dir>/file2.c //... etc
)

include_directories("<sub_project1_lib_sources_dir>")
include_directories("<sub_project2_lib_sources_dir>")
include_directories("<top_project_lib_sources_dir>") //should be "." if you're building from here

add_library(topProject SHARED ${topProject_sources} ${subproject1_sources} ${subproject2_sources}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-01T19:29:25.733

我不确定这是否适合您的需求，但 cmake 还提供了`INTERFACE`库，这些库正是满足（以及其他）这种需求。

```
add_library(bundle INTERFACE)
target_link_libraries(bundle lib1 lib2) 
```

将 lib1 和 lib2 捆绑到一个库中，并继承and的`PUBLIC`and`INTERFACE`部分。`lib1``lib2`

更多信息[在这里](https://cmake.org/cmake/help/latest/command/add_library.html#id6)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-27T12:15:13.017

将以下宏添加到您的 cmake 脚本中。

```
MACRO (TARGET_LINK_LIBRARIES_WHOLE_ARCHIVE target)
  IF (WIN32)
    FOREACH (arg IN LISTS ARGN)
      SET_TARGET_PROPERTIES(
        ${target} PROPERTIES LINK_FLAGS "/WHOLEARCHIVE:${lib}"
      )
    ENDFOREACH ()
  ELSE ()
    IF (APPLE)
      SET(LINK_FLAGS "-Wl,-all_load")
      SET(UNDO_FLAGS "-Wl,-noall_load")
    ELSE ()
      SET(LINK_FLAGS "-Wl,--whole-archive")
      SET(UNDO_FLAGS "-Wl,--no-whole-archive")
    ENDIF ()
    TARGET_LINK_LIBRARIES(${target} ${LINK_FLAGS} ${ARGN} ${UNDO_FLAGS})
  ENDIF ()
ENDMACRO () 
```

然后，在 CMakeLists.txt/*.cmake 中，可以这样使用`TARGET_LINK_LIBRARIES_WHOLE_ARCHIVE(target libs...)`

# html - 在 HTML 中包围整个主体的元素的属性

> ID：11429057
> 
> 赞同：0
> 
> 时间：2012-07-11T09:00:43.480
> 
> 标签：html, css, google-chrome-devtools

我有一个页面，我正在使用 chrome 控制台添加一个覆盖整个身体的 SVG 元素。我在控制台中输入了以下命令，

```
var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
svg.style.position = "absolute";
svg.style.left = svg.style.right = svg.style.top = svg.style.bottom = "0px";
svg.style.opacity = 0.5;
svg.style['z-index'] = 100;
svg.style.width = "100%";
svg.style.height = "100%";
document.body.appendChild(svg); 
```

但是SVG元素只覆盖了页面显示的部分，也就是说，如果页面足够长以至于我们必须向下滚动，则不会覆盖整个页面。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:08:47.750

如果要在视口处修复元素，请`position:fixed;`改用。

否则，不要使用`100%`，但是：

```
svg.style.height = Math.max(document.body.scrollHeight, 
    document.documentElement.scrollHeight) + 'px'; 
```

# iphone - 按钮中的应用程序崩溃

> ID：11429058
> 
> 赞同：0
> 
> 时间：2012-07-11T09:00:43.777
> 
> 标签：iphone, objective-c, uiview, uiviewcontroller, uibutton

我在 UIButton 上遇到了奇怪的问题。

当我点击按钮时，应用程序崩溃。

我为此写了下面的代码......

```
 -(IBAction)renameTest:(id)sender
{

  NSLog(@"Tapped");

    // UIButton *button = (UIButton *)sender;
NSUInteger row = 1;//button.tag;

NSString * titlename = [titleArray objectAtIndex:row];

RenameTest *renameVC = [[RenameTest alloc]initWithNibName:@"RenameTest" bundle:nil];

renameVC.titlespell = titlename;
NSLog(@"titlespell = %@",renameVC.titlespell);

NSLog(@"title = %@",titlename);

    // [button release];

[self.navigationController pushViewController:renameVC animated:YES]; //here APP is cresh

[renameVC release]; 
```

}

我还检查了我的 .Xib 文件名。没关系，文件在那里。

错误消息如下：

```
 2012-07-11 14:28:29.079 TestApp[238:207] -[__NSCFDictionary _isNaturallyRTL]: unrecognized selector sent to instance 0x73d8a80 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:06:49.747

_isNaturallyRTL 是一个 NSString 方法（私有），看起来您在某处传递字典而不是字符串。

打破异常并向我们展示此时的调用堆栈将有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:21:31.657

您遇到了与字典相关的崩溃，并且您的`titlename`字符串设置为等于, `titleArray objectAtIndex:row`。

我相信，在没有看到你的变量声明的情况下，这`titleArray`是一个字典，或者是`NSMutableArray`从一个字典列表中导入，无论你需要使用哪种方式`objectForKey`，在使用字典时，像这样：

`[[titleArray objectAtIndex:(NSUInteger *)] objectForKey:(NSString *)]`

显然`(NSUInteger *)`用你的整数`row`和`(NSString *)`名称替换你的钥匙。这可能不是答案，但从您的崩溃报告和可见代码来看，这就是我的假设。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:02:33.607

[按钮释放] 导致问题。删除它并检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:08:31.430

如果你已经在 xib 文件中创建了按钮，那么你不能释放它，因为你没有分配它并声称拥有所有权。你应该只对你通过调用 alloc 分配的对象调用释放。

删除 `[button release]` 应该修复崩溃的语句..

# java - Java 成员变量作为关联数组，如 AS3

> ID：11429062
> 
> 赞同：1
> 
> 时间：2012-07-11T09:00:56.210
> 
> 标签：java, actionscript-3, associative-array

在 ActionScript 2 和 3 中，我们可以像访问关联数组一样访问类的成员变量。

例如，

```
//AS3 Code    
private var tempvar:String="Hello";

    function printString()
    {
       trace(this.tempvar);
      trace(this[tempvar]);// would print the same as above
    } 
```

我想知道在Java中是否也可以这样做。

我需要这个的原因是，我的 java 代码中有一些变量，如下所示

```
//java code
private String var_1, var_2, var_3, var_4; 
```

要访问这些变量，我必须编写 4 个不同的语句

```
//java code
var_1="SomeValue1";
var_2="SomeValue2";
var_3="SomeValue3";
var_4="SomeValue4"; 
```

如果它在 AS3 中，我可以做这样的事情

```
//AS3 Code
for( var i=1; i<=4;i++)
{
 this["var_"+i]="SomeValue"+i;
} 
```

如果有人可以让我知道如何在 Java 中做同样的事情，我会非常高兴。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:07:21.253

理论上，您可以使用反射 API 来做到这一点。实际上，您不会在 Java 中使用这种编码风格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:14:12.947

我认为你需要重构你的Java代码......

您可以使用 a`Map<String, String>`来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:16:07.147

你可以使用一个数组，例如：

```
String[] myVars = new String[4];
for(int i = 0; i < myVars.length; i++)
{
 myVars[i]="SomeValue"+i;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:19:34.307

你可以使用 beanutils： [http ://commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)

```
BeanUtils.setProperty(yourVarsObject, "foo", "bar"); 
```

这将调用 yourVarsObject 的 setFoo("bar")

# php - SQL 更新增量不起作用

> ID：11429063
> 
> 赞同：0
> 
> 时间：2012-07-11T09:01:01.030
> 
> 标签：php, mysql, sql, increment

我的 SQL 代码有一个小问题：

```
UPDATE articles SET like=like+1 WHERE id=1 
```

当我试图在 PhpMyAdmin 中执行它时，我收到了这个错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'like=like+1 WHERE id=1' at line 1 
```

像 int 的列默认设置为 0（长度为 11）。有谁知道我该如何修复它？请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:03:05.047

LIKE is a keyword and cannot be used as a column name. You could change it (in your query) to ``like`=`like`+1` (with backticks), but that's hardly solving the problem.

Rename your column.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:02:51.557

引用您的字段名称：

```
UPDATE `articles` SET `like` = `like`+1 WHERE `id` = 1; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T09:14:18.693

您将字段“like”设置为与Sql的关键字LIKE相同，因此出现错误。只需更改字段的名称。

# python - 使用 f2py 将对象数组传递给 Fortran

> ID：11429067
> 
> 赞同：2
> 
> 时间：2012-07-11T09:01:23.353
> 
> 标签：python, fortran, f2py

Fortran 子例程可以将另一个子例程作为参数。

```
subroutine mst(yht)
 ..
 ..
 call yht(..) 
```

但是来自 python 的对象数组呢？我该如何发送说

`arr=[yht,yht,yht]`

到 Fortran。我试过了，但失败了。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:01:31.900

这可能是一个扩展的评论，而不是一个答案......

据我了解，`f2py`它将 Fortran 过程（即函数和子例程）签名转换为 Python。我认为这`f2py`不会将 Fortran 派生类型定义转换为 Python 对象定义。我已经`f2py`好几年没用了，所以我可能错了。用 Fortran 派生类型的实例识别 Python 对象的明显途径可能难以实现。

如果您可以说服您的 Python 代码创建 Fortran 编译器识别为 C 结构的东西，并使用 Fortran 的与 C 的互操作性特性来读写它们，您可能会取得更大的成功。 [梅特卡夫、里德和科恩](http://www.amazon.co.uk/Explained-Numerical-Mathematics-Scientific-Computation/dp/0199601429/ref=sr_1_1?s=books&ie=UTF8&qid=1342000685&sr=1-1)州 (p246)

> 这些限制允许该类型与具有相同数量组件的 C 结构类型互操作。组件在其定义中按位置对应。每个 Fortran 组件必须与相应的 C 组件可互操作。

# powershell - 如何从PowerShell中的集合中提取范围？

> ID：11429069
> 
> 赞同：5
> 
> 时间：2012-07-11T09:01:25.393
> 
> 标签：powershell, range, extract

我有一大堆项目，我想从中提取项目。我需要从开始跳过一些项目，从结束跳过一些项目。

下面的例子被简化了。

我首先尝试提取边界元素：

```
> ("a", "b", "c", "d", "e")[1,-2]
b
d 
```

这按预期工作。

但是，当我尝试提取整个范围时，它返回的不是我想要的（与`['a', 'b', 'c', 'd', 'e'][1:-1]`运行良好的 Python 相比）。

```
> ("a", "b", "c", "d", "e")[1..-2]
b
a
e
d 
```

它以相反的方式循环。如何改变循环的方向？

我想得到：`b c d`。

有没有不使用集合的实际长度的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:23:37.550

1..-2 不会从第一个项目开始计算，直到最后两个项目。将数组保存到变量中，并通过计算数组长度减去末尾的项目来指定上限。

```
$a = "a", "b", "c", "d", "e"
$a[1..($a.length-2)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:25:54.543

由于范围运算符不能满足您的要求，因此一个简单的管道可以完成手头的任务，尽管这可能会影响大型集合的性能。

从集合和从顶部和底部修剪的元素数量开始：

```
$a = "a", "b", "c", "d", "e"
($fromTop,$fromBottom) = 1, 2 
```

用这个...

```
$a | select -skip $fromTop | select -skip $fromBottom -last 1000000 
```

...或者，如果您安装了 PSCX，这个更简洁和优雅的序列：

```
$a | skip -first $fromTop -last $fromBottom 
```

这两个都`b c`没有明确使用长度属性返回。调整这两个参数以将输出调整到不同的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:36:49.783

要删除前两个，您可以这样做：

```
$null,$null,$a = "a", "b", "c", "d", "e" 
```

# selenium - 使用 Selenium WebDriver 获取禁用输入的值

> ID：11429070
> 
> 赞同：7
> 
> 时间：2012-07-11T09:01:25.983
> 
> 标签：selenium, webdriver

我正在尝试获取禁用（`disabled="disabled"`）`<input>`字段的值，但它返回一个空字符串。

我已经尝试过：`.Text`, `GetAttribute("value")`，但到目前为止这些都不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T10:00:53.707

如果你像这样标记它 -

```
<input disabled="true" id='data'> 
```

您的代码应该是 -

```
WebElement.getAttribute("disabled") 
```

或者

```
WebElement.getAttribute("id") 
```

确保您的代码是正确的。

对于这个标签 -

```
<input id="j_idt93:j_idt93" type="text" disabled="disabled" maxlength="2000" value="Pārtraukts"> 
```

要获取 value 属性 -

```
String value = driver.findElement(By.id("j_idt93:j_idt93")).getAttribute("value"); 
```

值必须是`Pārtraukts`

如果这不起作用，您可能必须使用 JavaScript 执行器 -

```
String value =  (String)((JavascriptExecutor) driver).executeScript("JavaScript query in here to return the value", ""); 
```

您的查询应该是 -

```
return document.getElementById("j_idt93:j_idt93").getAttribute("value"); 
```

# codeigniter - 此字符串是否已编码

> ID：11429071
> 
> 赞同：2
> 
> 时间：2012-07-11T09:01:27.720
> 
> 标签：codeigniter, expressionengine, exploit

我有一个客户的网站使用 codeignite 和表达式引擎，

我们有一个特定的 IP 地址，它似乎在爬过每个页面链接，并在其上附加以下字符串，这使得 cpu 的使用变得疯狂！该文件本身实际上并不存在，所以我假设它有人试图利用它。

```
jl1t6ZrqxJydBuZjJPTjHXNReaeo/kW/rio23/22hzp9CoSkWDSzpjdEpT30ZMub1umPwGV02ZIa8cdz8jfbqCIg1l0d7ymYZpPzskTzHeeckbkiI/qbo5GcoEyuqNzj85CsV5ja0qpf26srnUUPlE8Ta6Y28/BQI2n04r1Q9RBk+MyHguj6OgHoqzCpEifYb0Bf6xr5TtSxuZz+LFTTFWWWR66Br+r6KTQjXIMYXoqS+AGOmzQATKxW+OhZxJOvvNFF2xF4gp2Vhu79A25d8Y/4Q6JwmCowSXaZDiR7DEYgt3wmic2r3XRlvchEMw0VG+ilR4taaT8iS7U9PzXAk9wsxbk2YMkSpW+xMxl3YNDLO7Z+PQHFLFhK4VUVV2oMRF1FCHetFfpqTonRpAW5o8zTxWS/K3YXmHQj5jB0roM=/ 
```

这样任何普通地址，例如 /site/contact-us/ 都会被附加到

```
/site/contact-us/jl1t6zrqx......etc 
```

有没有人认为这可能是编码的东西，或者你认为会发生什么？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T01:28:29.010

您应该与主机讨论阻止 IP 的问题，并确保他们有适当的请求限制。

如上所述，您还应该尝试在该过程中处于较低级别（Web 服务器/网络）的其他形式的软件来检测和阻止这些请求的发生。

# javascript - 使用 live() 将代码添加到创建的 DOM 元素

> ID：11429075
> 
> 赞同：0
> 
> 时间：2012-07-11T09:01:36.697
> 
> 标签：javascript, jquery

我正在尝试在 jQuery 使用 live() 添加的新元素上设置此代码

```
var frcode = '<iframe scrolling="no"></iframe>';
$('.foo:nth-child(3n),.foo:last-child').after(frcode);
$('.foo:first').before(frcode); 
```

我尝试了 livequery 插件，但对我来说效果不佳

我尝试使用的 Livequery 插件

```
$(".foo:nth-child(3n),.foo:last-child").livequery(function(){
   $(this).after(frcode);
});

$(".foo:first").livequery(function(){
   $(this).before(frcode);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:14:32.793

`DOMSubtreeModified`您可以在将创建的 DOM 元素放入的容器中收听：

```
var frcode = '<iframe scrolling="no"></iframe>';

$('.container').on('DOMSubtreeModified', function(){
  $(this).find('.newElement:not(.processed)').after(frcode).addClass('processed');
}) 
```

（你也可以使用 'body' 而不是 '.container'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:24:36.500

如果你只想插入新元素，你也可以使用 DOMNodeInserted 事件。

在此处查看使用示例：http: [//jsfiddle.net/2YSEP/](http://jsfiddle.net/2YSEP/)

# android - Android SetText 更改键盘类型

> ID：11429077
> 
> 赞同：2
> 
> 时间：2012-07-11T09:01:39.703
> 
> 标签：android, keyboard, settext

我正在开发一个包含`EditText`.

我通过调用来控制 editText 中写入的内容

```
et.addTextChangedListener(new TextWatcher() {
    public void afterTextChanged(Editable s) {
        String message = et.getText().toString();
        if(s.toString().compareTo(before)!=0){
            et.setText(message);
            et.setSelection(et.getText().length());
        }
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        before = et.getText().toString();
        System.out.println("After");
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        System.out.println("ON");
    }
}); 
```

在 afterTextChanged 函数中我使用`et.setText("some Text");` 的问题是，在文本更改后键盘也发生了变化，例如如果`symbol`打开键盘并且我使用了 setText，它会自动更改为`qwerty`.

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T03:14:58.093

我无法为您的问题找到直接的解决方案，但您可以做一些事情来解决您的问题！使用编辑文本上的文本视图（例如，您可以使用 RelativeLayout 在编辑文本上设置文本视图），并将编辑文本字体颜色设置为白色（或编辑文本的背景颜色），以便用户看不到它的真实文本。我希望这个片段对你有所帮助：
**main.xml（在 res/layout 中）：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activityRoot"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="MyTextView" />

</RelativeLayout> 
```

**您观察到文本变化的活动：**

```
public class TestproGuardActivity extends Activity {

    EditText et;
    TextView tv1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv1 = (TextView)findViewById(R.id.textView1);
        et = (EditText)findViewById(R.id.editText1);

        et.addTextChangedListener(new TextWatcher() {
            private String before = "hasan";
            public void afterTextChanged(Editable s) {
               String message = et.getText().toString();
               if(s.toString().compareTo(before )!=0){
//               et.setText(message);
                   tv1.setText(message);
//               et.setSelection(et.getText().length());
               }
            }
            public void beforeTextChanged(CharSequence s, int start, int count, int after){

                before = et.getText().toString();

                System.out.println("After");   

            }
            public void onTextChanged(CharSequence s, int start, int before, int count)
            {
                System.out.println("ON");
            }
        });
    }

} 
```

# android - 按下确定按钮时，相机活动不会返回到父活动。

> ID：11429078
> 
> 赞同：2
> 
> 时间：2012-07-11T09:01:40.600
> 
> 标签：android, android-camera

我只是有一个小问题。我成功打开相机，按下按钮拍照后，出现以下三个按钮`OK`，`RETAKE`和`CANCEL`。通常，当按下 OK 按钮时，相机活动应该正常返回到父活动并执行 onActivityResult 函数包含的内容。但在我的情况下，当按下 OK 时，相机活动不会返回到父活动。有什么解决这个问题的建议吗？

请在下面找到代码：

```
OnClickListener btn_TakePictureListener = new OnClickListener() {

@Override
public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File imgPath = retrievePath();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri(imgPath));
        startActivityForResult(intent, RequestCode);
    }
};

//@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        //super.onActivityResult(requestCode, resultCode, data);

        if (RequestCode == requestCode && resultCode == RESULT_OK) {
           String s = data.getDataString();
           Toast.makeText(getBaseContext(), ""+s, Toast.LENGTH_SHORT).show();
           Toast.makeText(getBaseContext(), "picture is taken", Toast.LENGTH_SHORT).show();
        }           
    }

private String retrieveName() {
    int []x = imgOpHlpr.getIDs();
    String s = imgOpHlpr.getImg_Name(x.length);
    return s;
}

private File retrievePath() {
    int []x = imgOpHlpr.getIDs();
    String s = Environment.getExternalStorageDirectory().getAbsolutePath();
    s += "/myFolder/"+imgOpHlpr.getImg_Path(x.length);
    File file = new File(s);
    return file;            
}

private Uri getImageUri(File path) {
    Uri imgFileUri = Uri.fromFile(path);
    return imgFileUri;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:18:53.710

我认为你应该实现这样的东西..

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    try{
    if (requestCode == IMAGE_CAPTURE) {
        if (resultCode == RESULT_OK) {
            Intent intent = new Intent(CameraCapture.this, Home.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
            finish();
            startActivity(intent);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T09:42:39.047

你忘了创建你写图像的目录。在创建文件对象之前添加此行。

```
File path = new File(Environment.getExternalStorageDirectory().getPath() + "/myFolder/").
path.mkdirs(); 
```

# c# - 无对话框保存文件

> ID：11429083
> 
> 赞同：0
> 
> 时间：2012-07-11T09:01:49.517
> 
> 标签：c#

我到处找，找不到我要找的东西。我想要的是“保存”菜单（不是“另存为...”）上的 saveToolStripMenuItem_Click 事件处理程序的代码，并让我的应用程序检查是否：

1.  当前文件已保存，因此已有文件名。

2.  当前文件自打开后已被修改。

3.  覆盖（或根据需要附加）现有文件，而不打开“另存为”对话框。

4.  如果文件不存在，则显示“另存为...”菜单。

我的“另存为...”菜单已经正常工作。我发现的所有内容都告诉我如何创建我已经知道的“另存为..”对话框。我下载的每个示例程序都没有这个功能。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:21:03.667

第 1 点是您的解决方案，真的。

您必须保留一个`Filename`字符串变量来保存当前文档的文件名。如果您创建一个新文档，`Filename`则为`null`. 然后，如果单击`Save`或`Save As...`并且用户没有取消对话框，则将结果存储[`FileDialog.FileName`](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filename.aspx)在`Filename`变量中，然后写入文件内容。

现在，如果用户再次单击`Save`，您检查是否`Filename`有值，如果有，则不要显示，`SaveFileDialog`而只是再次写入文件。

然后，您的代码将如下所示：

```
private String _filename;

void saveToolStripMenuItem_Click()
{
    if (String.IsNullOrEmpty(_filename))
    {
        if (ShowSaveDialog() != DialogResult.OK)
        {
            return;
        }
    }

    SaveCurrentFile();
}

void saveAsToolStripMenuItem_Click()
{
    if (ShowSaveDialog() != DialogResult.OK)
    {
        return;
    }

    SaveCurrentFile();
}

DialogResult ShowSaveDialog()
{
    var dialog = new SaveFileDialog();
    // set your path, filter, title, whatever
    var result = dialog.ShowDialog();

    if (result == DialogResult.OK)
    {
        _filename = result.FileName;
    }

    return result;
}

void SaveCurrentFile()
{
    using (var writer = new StreamWriter(_filename))
    {
        // write your file
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:16:29.117

您可以通过使用编写自定义来实现作为要点提到的要求

System.IO.FileOptions 和 System.IO.File 方法

[http://msdn.microsoft.com/en-us/library/system.io.file_methods](http://msdn.microsoft.com/en-us/library/system.io.file_methods)

# android - 收到通知时如何获得通知

> ID：11429084
> 
> 赞同：9
> 
> 时间：2012-07-11T09:01:49.853
> 
> 标签：android, android-intent, notifications, android-pendingintent, accessibilityservice

我想读取/访问/记录其他应用程序在通知栏上触发的通知。

我搜索`Intents`了`PendingIntents`很多，但找不到解决方案。

触发任何通知时是否需要通知我的应用程序？

或者 android 系统是否提供了一些东西来读取用户级应用程序的通知？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-11T08:16:53.500

从 api 18 (android 4.3) 开始，有可能：http: [//developer.android.com/reference/android/service/notification/NotificationListenerService.html](http://developer.android.com/reference/android/service/notification/NotificationListenerService.html)

非常易于使用，但用户必须手动授予应用程序权限。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T12:25:46.723

终于有答案了！！！使用[AccessibilityService](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html#SERVICE_META_DATA)

```
public class NotificationService extends AccessibilityService {

@Override
public void onAccessibilityEvent(AccessibilityEvent event) {
    // TODO Auto-generated method stub.
//Code when the event is caught 
   }
@Override
public void onInterrupt() {
    // TODO Auto-generated method stub.

}

@Override
protected void onServiceConnected() {
    AccessibilityServiceInfo info = new AccessibilityServiceInfo();
      info.feedbackType = 1;
          info.eventTypes = AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED;
      info.notificationTimeout = 100; 
      setServiceInfo(info);
     }
} 
```

我的清单是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="org.test.notify"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk android:minSdkVersion="8" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
     <service android:name=".NotificationService" android:enabled="true">
            <intent-filter >
           <action android:name="android.intent.action.MAIN" />
           <category android:name="android.intent.category.LAUNCHER" />
           <action android:name="android.accessibilityservice.AccessibilityService"/>
        </intent-filter>
     </service>
   </application>
 </manifest> 
```

享受编码。！！！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:07:38.233

没有任何 API 可以访问任何通知。至少这将是安全漏洞。你唯一能做的就是捕捉一些导致通知（如短信）的事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:09:17.237

A`Notification`通过发送`Intent`.

```
Intent intent = new Intent(this, NotificationReceiver.class); 
```

`NotificationReceiver`抓住并`Intent`弹出一个`Notification`.

完全有可能使用[BroadCastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)`Intent`在您的一个应用程序中捕获相同的内容并过滤您想要的内容。`Intent`

# jquery - .bind() 或 .click() 是否更好地绑定单击事件处理程序？

> ID：11429089
> 
> 赞同：0
> 
> 时间：2012-07-11T09:02:05.413
> 
> 标签：jquery

向元素添加点击事件处理程序，是`.bind('click')`还是`.click`更好？有什么区别？任何性能方面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:04:34.990

There is no difference. Internally, `click` just calls `on`, and `bind` also just calls `on`. So for a very minor speed increase, just use [`on`](http://api.jquery.com/on/):

```
$("#someId").on("click", function () {
    //Do stuff
}); 
```

Here's the relevant part of the jQuery 1.7.2 [source for the `.click()` method](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.click):

```
return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name); 
```

And the [source of the `.bind()` method](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.fn.bind):

```
return this.on(types, null, data, fn); 
```

* * *

*If you're using jQuery below version 1.7...*

Note that the `.on()` method was introduced in jQuery 1.7\. If you are using an older version, `.click()` will internally just call `.bind()` instead. Here's the [source of `.click()` from 1.6.2](http://james.padolsey.com/jquery/#v=1.6.2&fn=jQuery.fn.click):

```
return arguments.length > 0 ? this.bind(name, data, fn) : this.trigger(name); 
```

# android - 如何在 Nook/NookColor 上打开 wifi 设置

> ID：11429090
> 
> 赞同：2
> 
> 时间：2012-07-11T09:02:06.270
> 
> 标签：android, wifi, nook

我的应用程序需要有效的 wifi 连接。我使用此代码添加了“转到 wifi 设置”按钮

```
Intent settings = new Intent(Settings.ACTION_WIFI_SETTINGS);
settings.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(settings); 
```

它在 95% 的设备上都能完美运行。但是在 Nook 颜色上我有错误

> android.content.ActivityNotFoundException：没有找到处理 Intent 的活动 { act=android.settings.WIFI_SETTINGS flg=0x10000000 }

如何在 Nook/Nook 颜色上打开 wifi 设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T05:42:31.747

**摘要**：
1-在 Nook 中查找所需活动的完整名称。
2-用它设置你的意图类名。
3-开始你的意图。
**详细信息**：
1-a：将您的设备连接到您正在开发项目的 PC。
1-b：打开`Hierarchy view perspective`eclipse，然后`Windows`在那个角度打开。
1-c：在设备中手动打开您想要的活动。（主页 -> 设置 -> ...）
1-d：可能需要`Windows`在透视图中进行刷新。
1-e：所有现有活动及其完整名称和包名称必须`Windows`在`Hierarchy view perspective`.
![在此处输入图像描述](../Images/c11de40eee8622c23b6f0b338dfd5a63.png)
例如，这里我想要的活动名称是：`com.android.settings.WirelessSettings`它的包名称是`com.android.settings`.

我希望这段代码可以帮助您继续：

```
b1 = (Button) findViewById(R.id.button1);
b1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent i = new Intent();
        i.setClassName("com.android.settings",
        "com.android.settings.WirelessSettings");
        startActivity(i);
    }
}); 
```

有关`Calling App from another`您的更多详细信息，请参阅以下问题：[Q1](https://stackoverflow.com/questions/4674391/calling-an-app-from-another-app) - [Q2](https://stackoverflow.com/questions/1977243/launching-external-application-from-my-app)

# c# - 从多个 DIV 元素中识别按钮

> ID：11429091
> 
> 赞同：0
> 
> 时间：2012-07-11T09:02:06.587
> 
> 标签：c#, selenium, webdriver

如何在以下 html 代码中识别按钮元素

```
<TABLE id=aotbl_fileDetailsfields border=0 cellSpacing=0 cellPadding=0 width="100%"><TBODY>
<TR class=rowalternate>
<TD width="12%"><LABEL id=aolbl_filePath>File Path</LABEL> <LABEL class=labelmandate>*</LABEL> </TD>
<TD width="2%"><LABEL class=labelcolan>:</LABEL> </TD>
<TD width="30%">
<DIV style="POSITION: relative"><INPUT style="FILTER: alpha(opacity:0); HEIGHT: 30px; -moz-opacity: 0; opacity: 0" onchange="document.getElementById('amtxt_filepath').value=this.value;" tabIndex=-1 name=uploadFile type=file> 
<DIV style="Z-INDEX: -1; POSITION: absolute; TOP: 2px; LEFT: 150px">
**<BUTTON class=formBtn tabIndex=-1 onclick="document.getElementById('uploadFile').click();">Browse...</BUTTON>** </DIV>
<DIV style="Z-INDEX: 1; POSITION: absolute; TOP: 0px; LEFT: 0px"><INPUT id=amtxt_filePath title="" name=amtxt_filePath.value maxLength=75> </DIV></DIV></TD>
<TD width="12%"><LABEL id=aolbl_worksheetName>Worksheet Name</LABEL> <LABEL id=aolbl_worksheetName_mandatory></LABEL></TD>
<TD width="2%"><LABEL id=aolbl_worksheetName_colan></LABEL></TD>
<TD width="30%"><INPUT id=amtxt_worksheetName class=reqInfo name=amtxt_worksheetName.value maxLength=50> </TD></TR></TBODY></TABLE> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:13:16.280

`//button[text()='Browse...']`或者`class=formBtn`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:22:58.463

除了已经说过的，使用 CSS 定位器：

```
button.formBtn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:37:10.850

我在 firefox 中使用 firebug 并使用显示（鼠标悬停时）“单击要检查的元素”的小方框，然后右键单击 firebug 中突出显示的 html 以获取诸如“复制 xpath”或“复制 css 路径”之类的选项。

# java - 使用 Apache POI 和 Apache PDFBox 阅读文档、pdf 文件时出现错误定位的文本框

> ID：11429093
> 
> 赞同：0
> 
> 时间：2012-07-11T09:02:19.680
> 
> 标签：java, pdf, apache-poi, doc, pdfbox

我正在尝试通过使用**Apache POI**（用于 doc、docx）和**Apache PDFBox**（用于 pdf）库将它们转换为单个字符串来读取和处理 Java 中的 .doc、.docx、.pdf 文件。
在遇到文本框之前它工作正常。如果格式是这样的： **第1段
文本框1
第2段
文本框2
第3段** 那么输出应该是：
**第1段文本框1第2段文本框2第3段** 但我得到的输出是：
**第1段第2段第3段文本框1文本框2** 它似乎是在末尾添加文本框，而不是在它应该在的地方，即段落之间。这个问题在 doc 和 pdf 文件中都有。这意味着 POI 和 PDFBox 这两个库都出现了同样的问题。

读取pdf文件的代码是：

```
    void pdf（字符串文件）抛出 IOException {
        //初始化文件
        文件 myFile = 新文件（文件）；
        PDDocument pdDoc = null;
        尝试 {
            //加载PDF
            pdDoc = PDDocument.load(myFile);
            //创建提取器
            PDFTextStripper pdf = new PDFTextStripper();
            //提取文本
            输出 = pdf.getText(pdDoc);
        }
        最后 {
            如果（pdDoc！= null）
                //关闭文档
                pdDoc.close();
        }
    }

```

doc文件的代码是：

```
    无效文档（字符串文件）抛出 FileNotFoundException，IOException {
        文件 myFile = null;
        WordExtractor 提取器 = null ;
        //初始化文件
        我的文件 = 新文件（文件）；
        //创建文件输入流
        FileInputStream fis=new FileInputStream(myFile.getAbsolutePath());
        //打开文档
        HWPFDocument 文档=新 HWPFDocument(fis);
        //创建提取器
        extractor = new WordExtractor(document);
        //从文档中获取文本
        输出 = extractor.getText();
    }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T01:58:29.390

对于 PDFBox，请执行以下操作： pdf.setSortByPosition(true);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-29T05:02:00.633

试试下面的pdf代码。以类似的方式，您也可以尝试 for doc。

```
void extractPdfTexts(String file) {
    File myFile = new File(file);
    String output;
    try (PDDocument pdDocument = PDDocument.load(myFile)) {
        PDFTextStripper pdfTextStripper = new PDFTextStripper();
        pdfTextStripper.setSortByPosition(true);
        output = pdfTextStripper.getText(pdDocument);
        System.out.println(output);
    } catch (InvalidPasswordException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# mysql - where 子查询定义的字段上的子句

> ID：11429097
> 
> 赞同：0
> 
> 时间：2012-07-11T09:02:44.460
> 
> 标签：mysql

我有这个查询，它显示一些属性并计算从另一个表中对其的引用数：

```
SELECT 
       p.id,p.propName
       (
         SELECT COUNT(*) FROM propLoc WHERE propLoc.propID = p.id
       ) AS number
FROM property as p 
WHERE p.category != 'natural' 
```

这会生成一个包含我要过滤的所有信息的好表：

```
id | propName | number
3  | Name 1   | 3
4  | Name 2   | 1
5  | Name 3   | 0
6  | Name 4   | 10
etc etc 
```

我现在想过滤掉数字 <= 0 的属性所以我尝试添加一个`AND number > 0`但它`Unknown column 'number' in 'where clause'`显然会做出反应，你不能过滤子查询指定的名称？

**我怎样才能实现我的目标？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:08:08.920

试试这个：：

```
SELECT 
       p.id,p.propName, count(1) as number
FROM property as p 
inner join propLoc on (propLoc.propID = p.id)
WHERE p.category != 'natural'
group BY p.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:12:16.253

您拥有的内联子查询与`LEFT JOIN`. 将您的查询重写为 Join，并使其成为`INNER`一个。无论是这种方式：

```
SELECT p.id
     , p.propName
     , grp.number
FROM property AS p 
  INNER JOIN 
     ( SELECT propID 
            , COUNT(*) AS number
       FROM propLoc
       GROUP BY propID
     ) AS grp 
    ON grp.propID = p.id
WHERE p.category <> 'natural' ; 
```

或这个：

```
SELECT p.id
     , p.propName
     , COUNT(*) AS number
FROM property AS p 
  INNER JOIN propLoc 
    ON propLoc.propID = p.id
WHERE p.category <> 'natural' 
GROUP BY p.id ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T09:13:52.010

当`WHERE`不工作时，经常`HAVNING`工作，因为它稍后在链中过滤结果

```
SELECT 
       p.id,p.propName
       (
         SELECT COUNT(*) FROM propLoc WHERE propLoc.propID = p.id
       ) AS number
FROM property as p 
WHERE p.category != 'natural'
HAVING number > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:11:20.950

```
SELECT p.id,p.propName,count(p.id) as number
FROM property as p 
inner join propLoc prop WHERE prop.propID = p.id
WHERE p.category != 'natural'
group p.id; 
```

或者

```
SELECT p.id,p.propName,count(p.id) as number
FROM property as p 
left join propLoc prop WHERE prop.propID = p.id
WHERE p.category != 'natural' and number > 0
group p.id; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:17:22.857

```
SELECT 
       p.id,p.propName,q.number
       from
       (
         SELECT propID,COUNT(*) as number FROM propLoc WHERE propLoc.propID = p.id
       ) q join
 property as p 
on q.propID=p.id
 where p.category != 'natural' 
```

# c++ - 模板化子类和模板化基类的静态成员特化

> ID：11429100
> 
> 赞同：0
> 
> 时间：2012-07-11T09:02:46.857
> 
> 标签：c++, templates, static, specialization

我正在尝试拥有一个从另一个模板类（此处为 A）继承的模板类（此处为 C）并执行静态成员专业化（此处为 int var），但我无法获得正确的语法（如果可能的话）

```
#include <iostream>

template<typename derived>
class A
{
    public:
        static int var;
};

//This one works fine
class B
    :public A<B>
{
    public:
        B()
        {
            std::cout << var << std::endl;
        }
};
template<>
int A<B>::var = 9;

//This one doesn't works
template<typename type>
class C
    :public A<C<type> >
{
    public:
        C()
        {
            std::cout << var << std::endl;
        }
};
//template<>
template<typename type>
int A<C<type> >::var = 10;

int main()
{
    B b;
    C<int> c;
    return 0;
} 
```

我举了一个与非模板类（此处为 B）一起使用的示例，并且我可以获得 var 的静态成员特化，但对于 C 来说这不起作用。

这是 gcc 告诉我的：

```
test.cpp: In constructor ‘C<type>::C()’:
test.cpp:29:26: error: ‘var’ was not declared in this scope
test.cpp: At global scope:
test.cpp:34:18: error: template definition of non-template ‘int A<C<type> >::a’ 
```

我正在使用 gcc 4.6.3 版，感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:10:19.367

我建议您在父类中使用枚举并将子类的值设置为父类的模板参数。对于 C 类来“看到”var，它可以被限定。见下文：

```
#include <iostream>
using namespace std;

template<typename Child, int i = 0> // 0 is the default value
class A
{
    public:
        enum { var = i };
};

class B
    :public A<B>   // define the value or var here
{
    typedef A<B> Parent;
public:
    B()
    {
        cout << Parent::var << endl; // Parent:: here IS NOT necessary, just for uniformity's sake
    }
};

template<typename type>
class C
    :public A<C<type>, 200>  // define the value of var here
{
    typedef A<C<type>, 200> Parent;
public:
    C()
    {
        cout << Parent::var << endl; // Parent:: here IS necessary
    }
};

int main()
{
    cout << B::var << endl;
    cout << C<int>::var << endl;
    cout << C<char>::var << endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:11:31.577

您可以通过编写来提示编译器`var`是成员变量`this->var`。

您不能编写模板来定义模板专业化的静态成员`A<C<type>>`；当您定义一个静态成员时，您正在保留存储空间，但编写模板部分特化不会告诉编译器要为哪些完整特化保留存储空间。你能做的最好的就是写

```
template<>
int A<C<int> >::var = 10; 
```

另一种方法是使用通过模板函数访问的函数级静态：

```
template<typename T> class A {
    static int &var() { static int var; return var; }
}; 
```

# python - how to retrieve any restrictions on a youtube video?

> ID：11429103
> 
> 赞同：1
> 
> 时间：2012-07-11T09:02:54.360
> 
> 标签：python, youtube-api, gdata

i am working on getting videos from YouTube. This link has been very helpful: [https://developers.google.com/youtube/1.0/developers_guide_python#code_printVideoEntry](https://developers.google.com/youtube/1.0/developers_guide_python#code_printVideoEntry)

Except that i couldn't really make a solution out of finding out how i can understand (and display to the user if possible) which restrictions apply to a specific video (represented by the gData object YouTubeVideoEntry). furthermore, does anyone know if the method YouTubeVideoEntry.GetSwfUrl() is infact a way of knowing whether the video is embeddable or not?

Would appreciate any help on the matter.

# ms-access - 在 ole 对象中插入格式化文本

> ID：11429108
> 
> 赞同：1
> 
> 时间：2012-07-11T09:03:05.430
> 
> 标签：ms-access

我有一个报告，其中有一个句子需要强调某个领域，即 - 它需要格式化。例子：

> “一些正常的常量文本后面是***重要的数据字段***。相同的文本字段，更多的文本和第二个***重要的数据字段*** ，然后是更多的文本。”

第一个“重要数据字段”的长度变化很大，否则我会尝试制作几个格式不同的文本字段。更改文本的外观是禁忌。

由于 Access 不允许对同一字段的不同部分使用不同的格式，我认为我唯一的选择是创建一个 OLE 对象并以编程方式添加和格式化其中的文本。怎么做？

也许我应该制作一个带有一些宏的模板 word 文档，并以某种方式将参数传递给这些宏，以添加具有不同格式的不同文本片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-05T12:31:34.950

从 Access 2007 开始，您可以使用[富文本框](https://support.office.com/en-us/article/Insert-or-add-a-rich-text-field-9f86237d-dbbc-4a85-b12c-9d8dca824630?ui=en-US&rs=en-US&ad=US)，在此之前，根据您的报告，最好使用 Word 和合并或书签来发布。另一种选择是 HTML，它输出起来并不难。我认为，这些选项中的任何一个都比尝试创建和维护 OLE 对象要容易得多。

# c++ - Count number of lines in a text file

> ID：11429109
> 
> 赞同：1
> 
> 时间：2012-07-11T09:03:11.013
> 
> 标签：c++, mfc

I need to count the number of lines in a text file. This is the code I have right now.

```
CStdioFile sampleFile;
sampleFile.Open("test.txt",CFile::modeRead );
long length = 1;
CString row("");
while(sampleFile.ReadString(row))
{
    length++;
} 
```

This isn't working. I'm not getting the correct value of the number of lines in the text file.What is wrong with this?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:44:04.877

To read Unicode text files you might want to check CStdioFile derived implementation: CStdioFileEx from codeproject:

[http://www.codeproject.com/Articles/4119/CStdioFile-derived-class-for-multibyte-and-Unicode](http://www.codeproject.com/Articles/4119/CStdioFile-derived-class-for-multibyte-and-Unicode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:09:42.820

尝试从 0 开始计数：

```
long length = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:08:14.927

`length`应该初始化为，`0`而不是`1`，因为您还没有阅读第一行：

```
CString row;
long length = 0;
while (sampleFile.ReadString(row))
{
    length++;
} 
```

# javascript - IE7 "Unable to get value of the property"... but it is defined...?

> ID：11429111
> 
> 赞同：1
> 
> 时间：2012-07-11T09:03:18.150
> 
> 标签：javascript, internet-explorer-7

I'm not sure what is happening here but this code, which was previously working, has started pulling bugs in IE7: "SCRIPT5007: Unable to get value of the property 'items': object is null or undefined". The weird thing is that i look at it in F12 and you can see bellow, it clearly can read the object...?

![enter image description here](../Images/35367ee06771deca482abded7aa4c5c8.png)

Am I in the IE7-twilight-zone or is the F12 thing using IE9's engine where everything is fine...? If i press play it goes on to fail. I'm not sure where to start here. Basically the script loops over some JSON it got from an AJaX request.

Anyone seen anything like this before?

# xml - How to wrap long lines withoud spaces in XSL:FO

> ID：11429114
> 
> 赞同：1
> 
> 时间：2012-07-11T09:03:21.070
> 
> 标签：xml, xsl-fo

If i got a very long word in my table, the text will continue through the border untill the next space or newline will come. Is there a way to wrap a string which is to long at the end of the column?

# ruby-on-rails - How to write tests for my models in MVC .NET (From Rails Background)

> ID：11429120
> 
> 赞同：0
> 
> 时间：2012-07-11T09:03:52.580
> 
> 标签：ruby-on-rails, asp.net-mvc, unit-testing

I have previously developed in Rails. I found writing tests pretty easy, and I have recently moved to a project where MVC .NET is used for our main product.

I have figured out how to work with MVC .NET, but I still am not sure on how I should go around writing unit tests for my models. I will give a really quick dirty example on how I would write my unit test in rails:

```
describe "user.name_is_newton?" 

  context "user's name is newton" do
    before :each do
      @user = User.create(:name => "newton")
    end

    it { @user.name_is_newton?.should be_true }
  end    
end 
```

The reason I am finding it hard to switch is because I am used to Rails providing a separate database for testing. It will (apparently) create a User entry in the test database behind the scenes and make it very easy to write the test. I am not sure how write a similar test in MVC .NET. Any help is appreciated! Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:11:40.980

在 MVC 中，您通常根本不想使用数据库进行单元测试，而是尝试重构，以便您测试作用于 IEnumerable<[entity]> 或 IQueryable<[entity]> 甚至只是实体本身。这样，您的单位就可以尽可能地处理一般的“事情”。但也许我在告诉你一些你已经知道的事情。

如果您绝对必须处理更复杂的对象，则需要模拟它们，或者再次重构以使用接口并只是模拟接口。

我确实有一个有用的 MVC 模拟库，例如 HttpContextBase、HtmlHelper、HttpResponseBase、DbSet，以及像 ShouldEqual 这样的助手。它们太长了，无法在此处不必要地粘贴，但请询问，我会很乐意提供它们。他们使用最小起订量。

您上面使用 Moq 的示例可能是：

测试方法：

```
public User CreateUser(string name)
{
    return new User { Name = name };
} 
```

单元测试：

```
[Test]
public void CreateUser_NameIsNewton()
{
     var user = CreateUser("Newton");
     Assert.AreEqual(user.Name, "Newton");
} 
```

# java - 如何将 Java 数组转换为 JavaCV 矩阵？

> ID：11429121
> 
> 赞同：5
> 
> 时间：2012-07-11T09:03:55.550
> 
> 标签：java, opencv, javacv

`double[][]`有没有一种简单的方法可以像在`CvMat`JavaCV 中一样转换 Java 数组？

我认为在 OpenCV 中你可以说8x8 数组`cv::Mat Table(8, 8, CV_32FC1, table);`在哪里。`table`但在 JavaCv 中它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:05:23.940

好的，现在我发现，JavaCv 可以将单个数组放入矩阵中。所以我可以将我的 2d-Array 转换为 1d-Array 并将其放入矩阵中`Matrix.put(array)`。

# sql - how to run sql file automatically? I have these files

> ID：11429123
> 
> 赞同：0
> 
> 时间：2012-07-11T09:04:00.637
> 
> 标签：sql, database, eclipse, hibernate

Is there any sofeware or plug-ins that can help run these files automatically? Actually I have a demo which is given by someone. It is a zip file which can be imported into eclipse. It is related to hibernate. Within the whole project, there is a folder contains a batch of sql files.

They are "CREAT_DATABASE.sql", "00_CREATE_OBJECTS.sql", "00_DROP_OBJECTS.sql", "01_ACCOUNT.sql" and "02_HIBERNATE_UNIQUE_KEY.sql"

I am wondering that is there any way to run these automatically? since the file names are some kinds of indicators that can help some software to run them according to the names. If yes, which one can do that kind of job? If no, are the file names only used to tell the users which sql file is the first to run and so forth? why don't the owner merge all the sql commands into one file?

thanks a lot for your help

while I cannot add image due to the "spam prevention mechanism" here is the image link if you want to see that. [http://www2.comp.polyu.edu.hk/~11501579g/portal/img/Capture.PNG](http://www2.comp.polyu.edu.hk/~11501579g/portal/img/Capture.PNG)

It includes two databases, I can use either one of them as long as I set the right properties like "hibernate.connection.driver_class", "hibernate.connection.url" etc in the hibernate.cfg.xml. Actually the only problem is I DO NOT konw the way to run the sql files like I mentioned before, namely run them automatically based on the file names, though I can run sql commands one by one which are extracted from the sql files to create tables and so forth.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:22:59.717

为什么要用插件让事情变得复杂？我建议您使用批处理文件或 bash 脚本来运行这些 sql 命令，以便您需要针对所需的数据库。

# c - 哪个是解决这个算法难题的好算法？

> ID：11429127
> 
> 赞同：1
> 
> 时间：2012-07-11T09:04:12.473
> 
> 标签：c, dynamic, coin-change

我得到了一笔金额，比如 50 美元。我得到了一些面额，比如 1 美元、2 美元、5 美元等，这些面额的数量例如 1 、5、6 表示 1 枚硬币/1 美元的纸币、5 枚 2 美元的硬币/纸币和 6 枚 5 美元的硬币/纸币。我必须找出这些硬币可以用来形成这个 50 美元的数量。我试图想出一种有效的算法来尽可能快地解决这个问题。请注意，金额永远不会超过 60 美元。

有人可以建议我可以使用哪种算法来解决这个问题吗？到目前为止，我已经为这个问题编写了一个递归解决方案，但它对于我的目的来说太慢了。我很快就会在这里发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:35:38.570

我同意这里不是做作业的地方，但仍然......提问者并不期望得到解决方案，他只是在问一个方向。让我们不要不必要地开放问题

看看[整数分解](http://en.wikipedia.org/wiki/Integer_factorization)

# android - 在 Android 中获取选中的 RadioButton 的 ID

> ID：11429131
> 
> 赞同：0
> 
> 时间：2012-07-11T09:04:29.237
> 
> 标签：android, radio-button, onclicklistener, radio-group

我的 XML 文件中有一个带有 3 个 RadioButtons 和一个 Button 的 RadioGroup。当我点击按钮时，如何获取选中的 RadioButton 的 ID（我为此按钮设置了 OnClickListener）？稍后我想在 onClick 中使用 Switch 语句，在检查了哪个 RadioButton 被选中之后。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:07:31.800

你可以用这个

```
yourRadioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:08:46.660

在 RadioGroup 上使用[getCheckedRadioButtonId()](http://developer.android.com/reference/android/widget/RadioGroup.html#getCheckedRadioButtonId%28%29)

# html - 铬合金 播放率

> ID：11429140
> 
> 赞同：2
> 
> 时间：2012-07-11T09:05:23.960
> 
> 标签：html, google-chrome, playback, html5-audio

我正在尝试使用chrome中元素的playbackRate属性。我创建了简单的标记：

```
<!DOCTYPE html>
<html>
<body>
    <audio id="myAudio" preload="metadata" defaultPlaybackRate="1.0" playbackRate="2.0" src="http://path_to_mp3_stream/" autoplay="true"></audio>
</body>
</html> 
```

但播放保持在正常速度。我究竟做错了什么？

谷歌浏览器 v20.0.1132.47。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:23:38.800

以以下方式修改标记使其工作：

```
<audio id="myplayer" preload="auto" controls="controls">
     <source src="http://path_to_mp3"></source> 
</audio>
<script>
     var player = document.getElementById("myplayer");
     player.playbackRate = 2;
</script> 
```

UPD：看起来有相关[问题](http://code.google.com/p/chromium/issues/detail?id=16502)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T21:12:00.860

我不相信你可以设置`<audio>`'`playbackRate`直到它的`canPlay`事件触发，这（连同浏览器缓存）很可能是你接受的答案对你有用的原因。

# sql-server-2005 - SQL server connection trouble in network but not in local

> ID：11429142
> 
> 赞同：0
> 
> 时间：2012-07-11T09:05:25.473
> 
> 标签：sql-server-2005, networking, jdbc, local

for the first time that I would work with SQL SERVER 2005, the jdbc connection doesn't work in the network I searched and have done thousand of things that doesn't work, i also want to precise that i already had worked with other DBMS, so here is the problem: when i try to connect by jdbc from the machine where sql server is installed everything work just fine, but when i try from a different machine, the jdbc is unable to create the connection, i already checked that TCP/IP communication is enabled that the port (not dynamically assigned) is 1433 and i even tried with different ports, i also tried with the same driver and different driver, i checked that i was able to communicate with the http server (who is installed in the machine where SQL server is installed) and it works but that jdbc connection can't, i tried thousand of things until i forgot some of them, someone please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:12:15.177

端口转发是否启用？你必须配置你的路由器。

# c# - How to change NextPageText/NextPageUrl from "..." to "Next" in Gridview pager?

> ID：11429145
> 
> 赞同：2
> 
> 时间：2012-07-11T09:05:28.103
> 
> 标签：c#, asp.net, gridview, paging

The following is my markup for a GridView's pager

```
<PagerSettings Mode="NumericFirstLast" PageButtonCount="3" 
    FirstPageImageUrl="~/images/First.jpg" 
    LastPageImageUrl="~/images/Last.jpg" 
    NextPageImageUrl="~/images/Next.jpg" 
    PreviousPageImageUrl="~/images/Prev.jpg" /> 
```

However when I run it I get the default "..." as a link button to navigate to the next and previous pages. The first and last button navigation link buttons are shown as images properly.

Could someone tell me what's wrong?

**EDIT 1**

I get the same results with NextPageText as well

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-16T14:25:18.480

我也遇到了同样的问题，我用这段代码解决了：

```
Protected Sub grdPatsCliente_RowCreated(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles grdPatsCliente.RowCreated
    If e.Row.RowType = DataControlRowType.Pager Then
        Dim i As Integer = 0
        For Each ctl As Control In e.Row.Cells(0).Controls(0).Controls(0).Controls
            i += 1
            If ctl.Controls(0).GetType.ToString = "System.Web.UI.WebControls.DataControlPagerLinkButton" Then
                Dim lnk As LinkButton = CType(ctl.Controls(0), LinkButton)
                If lnk.Text = "..." Then
                    If i < 3 Then
                        lnk.Text = "Prev"
                    Else
                        lnk.Text = "Next"
                    End If
                End If
            End If
            Dim x As String = ctl.ClientID
        Next
    End If
End Sub 
```

默认的 Gridview 寻呼机总是在下一个和上一个链接上呈现“...”。使用此代码，我将“...”替换为我的文本（如果您使用[FontsAwesome](http://fontawesome.io/icons/) ，也可以使用 HTML，例如“<i class='fa fa-lg fa-angle-left'></li>” ）

代码 C#：

```
protected void grdPatsCliente_RowCreated(object sender, GridViewRowEventArgs e) {
    if (e.Row.RowType == DataControlRowType.Pager) {
        int i = 0;
        foreach (Control ctl in e.Row.Cells[0].Controls[0].Controls[0].Controls) {
            i++;
            if (ctl.Controls[0].GetType().ToString() == "System.Web.UI.WebControls.DataControlPagerLinkButton") {
                LinkButton lnk = (LinkButton)ctl.Controls[0];
                if (lnk.Text == "...") {
                    if (i < 3) {
                        lnk.Text = "Prev";
                    } else {
                        lnk.Text = "Next";
                    }
                }
            }
        }
    }
} 
```

# android - android 2.1+ 版是否支持 ObjectAnimator 和 PropertyValuesHolder？

> ID：11429153
> 
> 赞同：0
> 
> 时间：2012-07-11T09:05:38.253
> 
> 标签：android, android-fragments

android 2.1+ 版是否支持 ObjectAnimator 和 PropertyValuesHolder？如果不是，那么相同的替代解决方案是什么。

我正在尝试创建一个支持 android 2.1+ 的 android 设备的片段的应用程序。

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T13:17:10.203

有一个名为 Nineoldandroids 的库。使用它，你就完成了

# macos - 使用系统范围的键盘快捷键 (OSX) 暂停守卫？

> ID：11429158
> 
> 赞同：0
> 
> 时间：2012-07-11T09:05:59.387
> 
> 标签：macos, keyboard-shortcuts, guard

我使用梦幻般的 Guard gem 在 Rails 中执行 BDD。更改文件后它会自动执行我的所有规范等，这很棒，但有时我不希望它们立即运行，我通过按下`P`控制台暂停 Guard。但是几次之后，这变得乏味，最好有一个系统范围的键盘快捷键或告诉 Guard 暂停/取消暂停的东西。

有人知道如何做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:45:48.923

我有一个想法，但我无法测试它是否有效，因为我很享受我的假期，而且我的数据计划非常昂贵，所以我尝试限制我的互联网使用。

[您可以像在快速用户切换/Apple 菜单](https://superuser.com/questions/45740/fast-user-switching-apple-menu/46308#46308)中描述的那样执行 shell 脚本？. 脚本本身可以[向 Guard 发送信号](https://github.com/guard/guard#signals)以启动/停止侦听器。

**更新：**

以下脚本已在[Guard 问题 #303](https://github.com/guard/guard/issues/303)中开发。

```
local FILE = "/tmp/.guardpaused"
if [ -f FILE ]; then
  ps -ef | grep -i guard | grep -v grep | awk '{print $2}' | xargs kill -USR2
  rm FILE
  echo "Unpaused files modification listening."
else
  ps -ef | grep -i guard | grep -v grep | awk '{print $2}' | xargs kill -USR1
  touch FILE
  echo "Paused files modification listening."
fi 
```

# ios - 缩放地图视图时动画AnnotationView消失？

> ID：11429159
> 
> 赞同：9
> 
> 时间：2012-07-11T09:06:00.823
> 
> 标签：ios, animation, mkmapview, mkannotationview, cabasicanimation

我`CABasicAnimation`在`AnnotationView`图层中添加了一个来模拟在地图视图上移动的汽车。

这工作正常，直到我在动画进行时尝试放大或缩小地图视图。

我发现缩放地图视图时动画注释视图消失了！

我猜这可能是由于在缩放地图视图时与动画对象关联的图层已被删除。

我尝试通过在缩放时停止动画来解决这个问题。但结果并不好。汽车似乎跳到目标点。

有人对此有想法吗？

任何人都知道如何在缩放地图视图时使动画仍然运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:42:26.510

我不知道如何以编程方式解决您的问题，但是如果在用户开始缩放时正确存储汽车位置（点 a），当缩放完成时，计算当前位置和新位置之间的距离（点 b ) 然后将其从 a 点设置到 b 点。这样，汽车就不会“跳”到第二个目标点。为了让它更漂亮一点，以正常速度的两倍启动汽车速度，然后在接近“B”点时减速至正常速度。我认为这会让它看起来不像是一个错误，而更像是一个效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T13:16:40.553

我通过终止 regionWillChangeAnimated 上的所有注释动画来解决它：-

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated
{

  for (int i=0;i< [mapView.annotations count];i++)
  {
    id annotation = [mapView.annotations objectAtIndex:i];

    MKAnnotationView* annView =[mapView viewForAnnotation: annotation];
    if (annView != nil)
    {

        CALayer* layer = annView.layer;
        [layer removeAllAnimations];
    }

  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:16:53.807

I think,you can use of the `mapView:regionDidChangeAnimated:` delegate method. Any time the user scrolls/zooms, this method will be called. just try once. It may help you.

# java - Java - 使用默认电子邮件提供商发送电子邮件

> ID：11429173
> 
> 赞同：2
> 
> 时间：2012-07-11T09:06:38.850
> 
> 标签：java

我编写了一个 Java 代码，以便如果按下按钮，默认电子邮件提供商将自动打开以发送电子邮件。是否有可能我可以自动将文件附加到电子邮件并为电子邮件设置主题？

这是到目前为止的代码：

```
 if(role.getValue().equals("1")) {
                try {
                    Desktop.getDesktop().browse(new URI("mailto:username@domain.com?subject=New_Profile&body=see attachment&attachment="PVS_XML.xml""));

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (URISyntaxException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }       
        } 
```

上面的代码由于某种原因不起作用：它在整个 mailto 方法下划线说：语法错误，插入“；” 完成 BlockStatements。

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:36:03.110

添加“mailto:username@domain.com”链接。这应该会触发您的浏览器启动标准邮件程序。

这与 Wicket 无关。这是标准的浏览器行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:08:53.630

```
'mailto:email@email.com?subject=Software&body=see attachment&attachment="C:/abc/def/qwertyp.zip"' 
```

尝试上面它应该工作

编辑1：

不确定它是否可以在桌面上工作，但作为网页的链接

从java作为字符串：

```
"'mailto:username@domain.com?subject=New_Profile&body=see attachment&attachment=\"PVS_XML.xml\""; 
```

编辑2：

```
Desktop desktop = Desktop.getDesktop();
        String message = "mailto:username@domain.com?subject=New_Profile&body=seeAttachment&attachment=c:/Update8.txt";
        URI uri = URI.create(message);
        desktop.mail(uri); 
```

还发现附件部分未在 Outlook 中实现，因此它不支持使用 mailto 的附件。它依赖于邮件客户端来实现解析附件参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:58:23.430

`Desktop`不会工作，因为它在服务器上运行，而不是在客户端上。不过，它可能会在您的服务器中打开一个 Outlook 窗口：)

`mailto:`正如其他人所说，您应该使用链接。不过，用户必须手动附加文件。浏览器会出于安全考虑而强制执行此操作。

# clearcase - CLEARCASE_XPN 未在 clearcase 命令中解析为变量

> ID：11429183
> 
> 赞同：2
> 
> 时间：2012-07-11T09:07:04.843
> 
> 标签：clearcase

我遇到一个问题，当我运行 clearcase 命令时：

```
ct find . -branch 'brtype(my_branch)' -exec "echo %CLEARCASE_XPN%"` 
```

`%CLEARCASE_XPN%`未解析为变量，输出为：

```
%CLEARCASE_XPN%
%CLEARCASE_XPN%
%CLEARCASE_XPN%
... 
```

但我确定`CLEARCASE_XPN`变量表示找到的文件的整个路径。
有人可以帮忙吗？操作系统是linux，shell是tcsh，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:22:10.903

采用：

```
ct find . -branch 'brtype(my_branch)' -exec 'echo $CLEARCASE_XPN' 
```

`%CLEARCASE_XPN%`是一种windows语法。

`$CLEARCASE_XPN`是 unix 语法，您可以在 Linux tcsh 会话中使用它。

有关使用 unix 语法的许多示例 ，请参阅“ [`cleartool find`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_find.htm)”和“ [cleartool find 命令的其他示例”。](http://www-01.ibm.com/support/docview.wss?uid=swg21124425)

* * *

还要注意在 exec 指令周围使用简单的引号：`-exec 'echo $CLEARCASE_XPN'`.
这将阻止 shell 本身*立即*`$CLEARCASE_XPN`解释变量（这对于 tcsh 会话是未知的），并将允许 cleartool find 将正确的值*传递*给 exec 指令，替换`$CLEARCASE_XPN`为扩展路径名。

请参阅“[字符串引用（单引号）与弱引用（双引号）](http://www.grymoire.com/Unix/Sh.html#uh-8) ”：

> *   **强引号**可防止字符具有特殊含义，因此如果将字符放在单引号内，所见即所得。
>     因此，如果您不确定某个字符是否为特殊字符，请使用强引号。
>     
>     
> *   **弱引号**将大多数字符视为普通字符，但允许某些字符（或更确切地说是元字符）具有特殊含义。如前面的示例所示，双引号内的反斜杠是一个特殊的元字符。
>     表示下一个字符不是，所以可以用在反斜杠前和双引号前，转义特殊含义。
>     双引号中允许使用另外两个元字符：美元符号和反引号。

# uitextview - UITextView 边框的 UIColor

> ID：11429184
> 
> 赞同：0
> 
> 时间：2012-07-11T09:07:14.850
> 
> 标签：uitextview, border, uicolor, cgcolor

根据这个答案：

[有边框的 UITextView](https://stackoverflow.com/q/2647164/927822)

我可以使用预混色，如 blackColor、blueColor 等...

我想使用我自己的颜色，由 UIColor colorWithRed: ...

```
ratingText.layer.borderColor = [[UIColor colorWithRed:33 green:95 blue:139 alpha:1] CGColor]; 
```

然后不显示边框。我怎样才能将 UIColor 连接到 CGColor，或者我会错过其他任何东西？

非常感谢您的帮助-谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:32:23.547

`[UIColor colorWithRed:green:blue:alpha:]`从 0 到 1 取浮点值。大于 1 的值将被视为 1。因此这将导致白色。

您应该首先通过除以 255 将 rgb 值（0-255）转换为浮点值（0-1）。

```
layer.borderColor = [[UIColor colorWithRed:33/255.0f green:95/255.0f blue:139/255.0f alpha:1] CGColor]; 
```

# ruby-on-rails - 获取 Rails 以保存使用自定义 setter 方法（而不是 Accepts_nested_attributes_for）构建的子记录

> ID：11429187
> 
> 赞同：1
> 
> 时间：2012-07-11T09:07:21.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经构建了一个应用程序，可以帮助用户监控各种金融产品。

在大约 6-10 个不同的模型上，每个模型都跟踪不同类型的金融产品（信用卡、储蓄账户等），我之前有一个`balance`列（用于存储用户的当前余额）和一个`repayments`用于存储用户平均贡献的列随着时间的推移到帐户。

我现在想存储历史余额更新，我认为最好的方法是创建一个单独的`balance`模型，该模型可以`belongs_to`通过多态关系来处理所有这些模型。然后每个账户可以`has_many`在不同的历史点上进行余额，我可以很容易地拉出最近的用户`balance`。

我喜欢这个解决方案，**但是**我有一堆自定义的用户表单，用于创建/编辑带有`balance`字段、`repayments`字段和其他一些字段的帐户，这些字段将被抽象成一个`Balance`模型。我不想花几个小时浏览这些表单并更改字段以适应新的嵌套结构。相反，我创建了一堆帮助方法来处理所有后端逻辑，这样我的视图就不需要以不同的方式与我的模型交互，如下所示：

```
#creditcard_account.rb
  has_many :balances, :as => :balanceable, :dependent => :destroy

  def latest_balance
    balances.order("created_at DESC").first
  end

  def new_balance
    @new_balance ||= balances.build
  end

  def balance=(input_balance)
    new_balance.amount = input_balance
  end

  def balance
    new_balance.balance || (latest_balance? ? self.latest_balance.amount : nil)
  end

  def repayment_amount=(input_repayment_amount)
    new_balance.contribution_amount = input_repayment_amount
  end

  def repayment_amount
    new_balance.contribution_amount || (latest_balance ?  latest_balance.contribution_amount : nil)
  end

  def repayment_period=(input_repayment_period)
    new_balance.contribution_period = input_repayment_period
  end

  def repayment_period
    new_balance.contribution_period || (latest_balance ?  latest_balance.contribution_period : nil)
  end 
```

**问题：** 这很好用，**除非@new_balance**如果相关的实际属性没有更改，则不会保存`creditcard_account`。也就是说，Rails 脏模型方法不知道我已经创建了一个孩子并且需要保存父母。

**我如何告诉 Rails 我已经为这个模型创建了一个子模型并且需要保存模型（以及它的子模型）？**

如果它很重要，所有有问题的表单实际上都`creditcard_account`嵌套`fields_for`在`form_for :user`.

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:54:23.390

我最终通过将父级的 updated_at 属性设置为 Time.now 来强制父级保存，以便父级被标记为`changed?`并因此被保存（及其子级）：

```
 def balance=(input_balance)
    new_balance.amount = input_balance
    self.updated_at = Time.now
  end

  def repayment_amount=(input_repayment_amount)
    new_balance.contribution_amount = input_repayment_amount
    self.updated_at = Time.now
  end

  def repayment_period=(input_repayment_period)
    new_balance.contribution_period = input_repayment_period
    self.updated_at = Time.now
  end 
```

对于任何尝试类似事情的人，请注意我的方法引发了其他问题：例如，对这些虚拟属性的验证几乎被破坏了。

# performance - 创建 Sprite 实例而不将它们添加为子项会降低性能速度吗？

> ID：11429194
> 
> 赞同：1
> 
> 时间：2012-07-11T09:07:53.090
> 
> 标签：performance, actionscript-3, 3d, sprite

我正在 AS3 中构建一个自定义的、简单的 3D 引擎，尽可能简单。它使用 Graphics 绘制所有内容，并使用 Bitmap 和 BitmapData 进行渲染。

为了按 z（深度）位置重新排序绘制顺序，我使用了 Sprite 的 Transform 实例的 getRelativeMatrix3D。这是我的问题：如果我创建了很多 Sprite 实例但不将它们添加为舞台的子级，它会降低我的性能速度吗？

如果是这样，那么是否有一种更有效和更有用的方式来重新排序而不添加作为儿童的精灵？

如果没有，请告诉我。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:50:55.543

正如@Neil 在评论中正确指出的那样，未添加到显示列表（添加到舞台）的对象不会影响渲染性能。

但是，使用**new**创建对象总是要花费时间。因此，如果您编写的函数只在每帧创建 1.000 个某种对象，您可能会看到非常明显的性能下降。

但是，对于每种语言都是如此，因此根据经验，您应该只在必要时创建**新**对象。

甚至可以重复使用不再需要的对象。查看[对象池模式](http://en.wikipedia.org/wiki/Object_pool_pattern)以了解我的意思。例如，对象池通常用于横向滚动条中的项目符号。但这样的事情确实是性能改进的一部分。因此，如果您的时间不多并且没有用户抱怨，我会在重构阶段进行此类优化。或者你只是马上做，你的选择；）

# wso2 - wso2 身份服务器 - 用户自行注册

> ID：11429196
> 
> 赞同：2
> 
> 时间：2012-07-11T09:08:02.677
> 
> 标签：wso2, wso2is

我正在改写我之前在[这里](https://stackoverflow.com/questions/11317440/wso2-identity-server-disabling-user-sign-up)发布的一个问题。

WSO2 Identity Server 的默认功能是允许用户为自己注册用户帐户。但是，这对我的公司来说是不可取的。我们只想允许管理员创建用户帐户。

是否可以在 wso2 身份服务器中禁用用户自我注册功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T11:22:05.947

是的，您可以从 WSO2 身份服务器中删除此功能。

转到配置 --> 功能 --> 已安装的功能 --> 身份自我注册 --> 卸载 --> 重新启动服务器。

# java - Spring批处理中的提交间隔和处理回滚

> ID：11429197
> 
> 赞同：13
> 
> 时间：2012-07-11T09:08:05.310
> 
> 标签：java, transactions, spring-batch, commit, chunks

我的问题与 Spring 批处理和事务有关。

假设我为我的一个步骤选择了**50 的提交间隔。**

还假设我总共有 1000 条记录，其中一条记录会导致 itemWriter 失败，从而导致整个块的回滚（在我的示例中为 50 条记录）。

确保在作业完成后将 49 条有效记录写入数据库（并忽略有问题的块）的策略是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T12:38:57.533

经过一番研究，我想出了以下几点：

如果项目编写者未能提交一个块（这里是 50 个项目）从而导致回滚，Spring Batch 将单独重新运行有问题的块的每个项目，每个项目都有一个提交/事务。

因此，除了导致 Spring Batch 回滚块的一项之外，所有 49 项都将存在于数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-03T03:56:18.343

> 我们专注于在读取阶段跳过项目，但跳过配置也适用于面向块的步骤的处理和写入阶段。当在读取、处理或写入阶段抛出可跳过的异常时，Spring Batch 不会以相同的方式驱动面向块的步骤。
> 
> 当一个 item reader 抛出一个可跳过的异常时，Spring Batch 只是再次在 item reader 上调用 read 方法来获取下一个 item。事务没有回滚。当项目处理器抛出可跳过的异常时，Spring Batch 回滚当前块的事务并将读取的项目重新提交给项目处理器，但在上一次运行中触发可跳过异常的项目除外。图 8.3 显示了当 item writer 抛出可跳过的异常时 Spring Batch 会做什么。因为框架不知道哪个项目引发了异常，所以它在自己的事务中一个一个地重新处理块中的每个项目。

我引用书中的段落`Spring Batch in Action, Manning`。

这很棘手，回滚行为不同取决于是否在读取、处理或写入时抛出异常。

希望这对其他人有帮助。

# nlp - 架构：服务提要设计和开发

> ID：11429210
> 
> 赞同：0
> 
> 时间：2012-07-11T09:08:38.110
> 
> 标签：nlp

我想知道问题的可能架构答案：

一天从早晨的咖啡和智能手机中的定制新闻开始。为了建立一个新闻服务，用户将提供他的偏好（如联系方式、爱好、位置、最喜欢的球队等），作为回报，我们可以向他/她提供他/她定制的新闻（例如 Team_1 输给 Team_2 ），其中他最喜欢的球队是 Team_1 这就是为什么悲伤的表情。已经有新闻、用户偏好和一堆表情符号的数据源。不知道的是如何根据新闻和用户偏好放置表情符号。

# database - 如何将数据库配置为在单独的窗口中自动打开？

> ID：11429211
> 
> 赞同：0
> 
> 时间：2012-07-11T09:08:40.650
> 
> 标签：database, lotus-notes, lotus

如何将我的 lotus notes 数据库设置为在单独的窗口中自动打开，例如帮助文件（数据库）？更妙的是，有没有不打开lotus notes客户端就可以打开数据库的方法呢？我正在使用 8.5.3 LN 客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:17:48.717

如果不启动 Notes 客户端，您将无法真正打开 Notes 数据库。但是尝试这样的命令行：

```
C:\Program Files\Lotus\Notes\nlnotes.exe /kiosk "your server/your org!!path/database.nsf" 
```

这可能是你想要的。或不。从你的问题很难判断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T17:55:30.840

要在单独的窗口（如帮助数据库）中创建 Notes 数据库，请执行以下操作：

1.  在工作区中选择数据库的图标。
2.  选择文件 - 数据库 - 属性，然后单击设计选项卡
3.  打开“List in Database Catalog”，在Categories下输入“NotesHelp”。
4.  打开数据库。如果它没有立即出现在特殊窗口中，请将其关闭，从工作区中删除其图标，退出并重新启动 Notes，然后再次打开它。

资料来源：[http ://www-12.lotus.com/ldd/doc/domino_notes/Rnext/helpex6.nsf/769e1b028f863f84852566c100358467/9ed8b1f2376afcde8525670c006fc870?OpenDocument&AutoFramed](http://www-12.lotus.com/ldd/doc/domino_notes/Rnext/helpex6.nsf/769e1b028f863f84852566c100358467/9ed8b1f2376afcde8525670c006fc870?OpenDocument&AutoFramed)

# actionscript-3 - Flex Progress 事件 bytesTotal 在 Linux 中返回 0

> ID：11429212
> 
> 赞同：1
> 
> 时间：2012-07-11T09:08:43.390
> 
> 标签：actionscript-3, apache-flex

我正在使用 URLLoader 加载远程文件。在progressevent 中，我尝试从progressevent 中获取bytesLoaded 和bytesTotal。

两者都在 Windows 服务器中工作正常

但是对于配置了一些代理的 linux 服务器，bytesTotal 返回 0 并且 bytesLoaded 像往常一样返回正确的值。有人知道问题是什么吗？我们是否需要在代理或 linux 服务器中配置某些东西来获取总字节数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:40:50.467

为 0`bytesTotal`表示响应正在作为[分块传输](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)发送。通常，当服务器未设置 Content-length 标头时，您会看到这一点。在您的情况下，似乎代理在中继响应时可能没有传递 Content-length 。

当您收到 时`Event.COMPLETE`， 的长度`event.data`是收到的总字节数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T09:11:29.330

那就别用`ProgressEvent.PROGRESS`了。使用`Event.COMPLETE`. 下载完成后发送。不过，也许 PHP 是不同的。

# javascript - jQuery 地址在回调中不起作用

> ID：11429216
> 
> 赞同：0
> 
> 时间：2012-07-11T09:08:53.743
> 
> 标签：javascript, jquery, callback, jquery-address, swfaddress

今天我探索了一些奇怪的东西：jQuery 地址在 jQuery 回调中不起作用：http: [//jsfiddle.net/Wh7uS/19/](http://jsfiddle.net/Wh7uS/19/)有 什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:34:59.623

您绑定到地址的 init 事件，该事件在回调之前触发。您可以看到，如果将淡入淡出计时器更改为 0：

```
$("#second").fadeIn(0, function() {

jQuery.address.init(function(event) {
    alert("jQuery Address - inside");
});
alert("Sorry for the many alerts");
}); 
```

它的回调将立即运行，绑定将被调用的 init 事件处理程序并发出警报（全部来自回调）。时间就是一切:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:13:18.927

将 jquery 更改为`jquery <1.6`，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:26:22.530

你在寻找类似的东西吗？ [http://jsfiddle.net/Wh7uS/18/](http://jsfiddle.net/Wh7uS/18/)

# eclipse-rcp - Eclipse RCP - 功能仅在产品导出后出现在 about 对话框中，而不是在 IDE 中执行时

> ID：11429218
> 
> 赞同：0
> 
> 时间：2012-07-11T09:09:01.213
> 
> 标签：eclipse-rcp, about-box

我正在处理我的 Eclipse RCP Applicaiton 的关于对话框。

我正在使用的功能（本机平台功能和我自己的）仅在我从 Eclipse 导出时才会显示。

当我在 IDE 中运行我的产品时 - 关于对话框保持为空。功能图标不显示。

**问：问题**出在哪里？

**关于对话框，产品导出时：**

![在此处输入图像描述](../Images/e74f6e747db03f778ee09527f0392d4c.png)

**关于对话框，当产品在 IDE 内启动时：**

![在此处输入图像描述](../Images/9cd0bc5d8f551374370f7234980605d3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:39:25.740

虽然出乎意料，但我认为这很正常。我在我的 RCP 应用程序中看到了相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:03:13.290

去`Window>Preferences`。在 下`Plug-In Development>Target Platform`，设置您的目标平台以匹配您要导出的产品。您可以使用 org.eclipse.rcp 作为基础并从那里开始，从 Eclipse 本身或从 p2 存储库添加功能。

默认是加载 IDE 本身作为运行时配置的一部分。

也就是说，我不确定“功能”对话框在 IDE 中运行时是否真的有效。我记得不久前这里有一个限制，但不幸的是我再也找不到对此的参考。

# mysql - 计算每个用户的消息数

> ID：11429220
> 
> 赞同：2
> 
> 时间：2012-07-11T09:09:02.283
> 
> 标签：mysql

考虑下表：

```
users                messages
-----------------    -----------------------
user_id  messages    msg_id user_id content
-----------------    -----------------------
1        0           1      1       foo
2        0           2      1       bar
3        0           3      1       foobar
                     4      3       baz
                     5      3       bar 
```

我想计算每个用户的消息数量并将结果插入 users.messages，如下所示：

```
users                
-----------------    
user_id  messages    
-----------------    
1        3           
2        0           
3        2 
```

我可以使用 PHP 来执行这个操作，伪：

```
foreach ($user_id in users) {
  $count = select count(msg_id) from messages where user_id = $user_id
  update users set messages = $count
} 
```

但是与直接在 MySQL 中执行的一个查询相比，这可能非常低效：

```
UPDATE users SET messages = (
  SELECT COUNT(msg_id) FROM messages
) 
```

但我确信这不是一个正确的查询。因此，任何帮助将不胜感激:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:37:27.333

这是答案：

```
UPDATE `users` AS u 
SET u.messages=(SELECT COUNT(*) FROM messages WHERE user_id=u.user_id) 
```

和测试：

[http://sqlfiddle.com/#!2/2768b/1](http://sqlfiddle.com/#!2/2768b/1)

我只是希望这些不是巨大的桌子，否则这可能需要一段时间......

**更新：** 从查询中删除了不必要的 JOIN 感谢@Ariel 和@Zane Bien 纠正我的答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:19:47.317

假设您知道如何触发查询，我会这样说...

每当将消息发布到消息表中时创建插入触发器，并将行数插入用户表中。因此，您不必每次插入新消息时都通过 php 触发查询。因此，当您插入新消息时，您的消息数量将自动更新，当您想要检查特定用户的消息数量时，您只需触发选择查询。

[触发文档](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:13:44.647

```
UPDATE users JOIN
       (SELECT user_id, COUNT(msg_id) num FROM messages group by user_id) c
       USING (user_id)
SET users.messages = c.num 
```

注意：我没有测试这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:14:12.870

MySQL 允许您在语句中使用`JOIN`操作，如下所示：`UPDATE`

```
UPDATE 
    users a
LEFT JOIN
(
    SELECT user_id, COUNT(1) AS messagecount
    FROM messages
    GROUP BY user_id
) b ON a.user_id = b.user_id
SET 
    a.messages = COALESCE(b.messagecount, 0) 
```

这将做的是将每个相应的用户与他/她在`messages`表中的消息计数对齐，因此更新`messages`列变得很简单，只需引用包含消息计数的相应连接列。

如果用户在表中没有任何消息`messages`，它将简单地将列设置为`0`。

您还可以确保这将非常快速地执行，因为不需要使用低效的子查询（最终在每次迭代中执行），而且连接将在索引上执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T09:35:30.793

这个肯定会奏效。尝试这个：

```
UPDATE users u
 SET u.messages =
      (  SELECT COUNT (*)
           FROM messages m
       GROUP BY user_id
         HAVING u.user_id = m.user_id); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T09:10:37.983

尝试这个：：

```
UPDATE users u
inner join 
(
  Select user_id, count(1) as number
    from users u inner join messages m on (u.user_id=m.user_id) group by m.user_id 
) as temp_message tm on (u.user_id=tm.user_id)
set u.messages=tm.number 
```

# java - GAE 1.7 Conversion API Java html -> pdf ConversionResult 总是返回 test.pdf

> ID：11429222
> 
> 赞同：1
> 
> 时间：2012-07-11T09:09:03.190
> 
> 标签：java, google-app-engine

我正在尝试使用 Conversion API 将 html 转换为 PDF。这是我的代码

```
public byte[] toPDF(String html){
    Asset asset = new Asset("text/html", html.getBytes(), "in.html");
    Document document = new Document(asset);
    Conversion conversion = new Conversion(document, "application/pdf");
    ConversionService service = ConversionServiceFactory.getConversionService();
    ConversionResult result = service.convert(conversion);
    if (result.success()) {
       for (Asset assetResult : result.getOutputDoc().getAssets()) {
           return assetResult.getData();
        }
    return null;
    } else {
        // Do stuff with result.getErrorCode());
        return null;
    }
} 
```

ConversionResult 对象始终返回 test.pdf（来自 Conversion API）字节，而不是来自我新转换为 PDF 的 html 的（pdf）字节。有谁知道问题是什么？是因为我在本地主机上使用转换 API 吗？如果是，有解决方法吗？

提前致谢。

阿尔班

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:48:33.350

开发应用服务器不完全支持转换 API。它只是一个非常基本的存根实现，它总是返回一个固定的文件。

# vba - 复制值，而不是列中的公式

> ID：11429230
> 
> 赞同：0
> 
> 时间：2012-07-11T09:09:30.690
> 
> 标签：vba, excel, excel-2007, excel-2010

我有两个工作簿（源和目标），我想将源工作簿中的 A 列复制到目标工作簿中的 A 列。我在上面使用了这段代码。

```
Sub CopyColumnToWorkbook()
    Dim sourceColumn As Range, targetColumn As Range

    Set sourceColumn = Workbooks("Source").Worksheets("Sheet1").Columns("A")
    Set targetColumn = Workbooks("Target").Worksheets("Sheet1").Columns("A")

    sourceColumn.Copy Destination:=targetColumn
End Sub 
```

但是源工作表包含带有公式的单元格。我只想复制单元格值，而不是公式。

我应该对上述代码进行哪些更改？

* * *

```
Sub BOM()
    Dim sourceColumn As Range, targetColumn As Range

    Set sourceColumn = Workbooks("MASTER").Worksheets("Sheet1").Columns("C")
    Set targetColumn = Workbooks("BOM").Worksheets("Sheet1").Columns("A")

    sourceColumn.Copy Destination:=targetColumn

    Set sourceColumn = Workbooks("MASTER").Worksheets("Sheet1").Columns("D")
    Set targetColumn = Workbooks("BOM").Worksheets("Sheet1").Columns("B")

    sourceColumn.Copy Destination:=targetColumn

    Set sourceColumn = Workbooks("MASTER").Worksheets("Sheet1").Columns("E")
    Set targetColumn = Workbooks("BOM").Worksheets("Sheet1").Columns("C")

    sourceColumn.Copy Destination:=targetColumn

End Sub 
```

这是我用来将单元格从一个工作簿复制到另一个工作簿的代码。它在运行 Windows 7 Excel 2010 的 PC 上运行良好，但我想在使用 XP Excel 2007 的 PC 上运行相同的代码。

我`Runtime error: Subscript out of range.`在运行宏时得到，当我单击调试按钮时，它指向第三行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:38:22.943

有很多方法可以解决这个问题，这是我最喜欢的：

```
Sub CopyColumnToWorkbook()

    Dim iCopyingRow as long '-counter for which row we are copying at the moment
    Dim iLastRowToCopy as long '- lookup for last row to copy
    With  Workbooks("Source").Sheets("Sheet1")
        iLastRowToCopy = .Range("A" & .Rows.Count).End(xlUp).Row
    End With

    For iCopyingRow = 1 to iLastRowToCopy 
        Workbooks("Target").Sheets("Sheet1").Range("A" & iCopyingRow ).value = _
             Workbooks("Source").Sheets("Sheet1").Range("A" & iCopyingRow ).value
    Next iCopyingRow 

End Sub 
```

**更新：**

它看起来像您在下面发布的代码中您试图复制三列的答案。您可以修改上面的代码以执行所有三个列，如下所示：

```
Sub CopyColumnToWorkbook()

    Dim iCopyingRow as long '-counter for which row we are copying at the moment
    Dim iLastRowToCopy as long '- lookup for last row to copy
    With  Workbooks("Source").Sheets("Sheet1")
        iLastRowToCopy = .Range("A" & .Rows.Count).End(xlUp).Row
    End With

    For iCopyingRow = 1 to iLastRowToCopy 
        Workbooks("Target").Sheets("Sheet1").Range("A" & iCopyingRow ).value = _
             Workbooks("Source").Sheets("Sheet1").Range("C" & iCopyingRow ).value
        Workbooks("Target").Sheets("Sheet1").Range("B" & iCopyingRow ).value = _
             Workbooks("Source").Sheets("Sheet1").Range("D" & iCopyingRow ).value
        Workbooks("Target").Sheets("Sheet1").Range("C" & iCopyingRow ).value = _
             Workbooks("Source").Sheets("Sheet1").Range("E" & iCopyingRow ).value
    Next iCopyingRow 

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:53:14.007

@gimp 的解决方案的一个旋转。唯一的重大变化是这避免了连接来构建范围。

```
Sub CopyColumnToWorkbook2()
Dim TheRange As Range
Dim ACell As Range
  Set TheRange = Application.Intersect(Range("A:A"), ActiveSheet.UsedRange)
  For Each ACell In TheRange.Cells
    Workbooks("Target.xlsx").Sheets("Sheet1").Range(ACell.Address).Value = _
      Workbooks("Source.xlsm").Sheets("Sheet1").Range(ACell.Address).Value
  Next ACell
End Sub 
```

# jquery - 使用 JqueryUI 将项目放入列表时不执行任何操作

> ID：11429233
> 
> 赞同：1
> 
> 时间：2012-07-11T09:09:46.300
> 
> 标签：jquery, jquery-ui

我正在使用 JqueryUI 拖放到可排序的列表中。假设 coll-selected-list 是我要删除的列表，我想检查我要删除的当前项目是否已经存在于列表中。如果是这样，我希望防止下降。这可能吗？我的代码如下：

```
$("#coll-selected-list").sortable({
        receive: function (event, ui) {
            //alert($(ui.item).text());

            var itemName = $(ui.item).text();
        if ($("#coll-selected-list li:contains(" + itemName + ")")) {
               //DO Nothing 
            }

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:16:39.303

您可以使用[cancel()](http://jqueryui.com/demos/sortable/#method-cancel)方法：

```
$("#coll-selected-list").sortable({
    receive: function (event, ui) {
        var itemName = ui.item.text();
        if ($("#coll-selected-list li:contains(" + itemName + ")").length) {
            $(this).sortable("cancel");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:17:11.100

几天前我创建了这个小提琴。

检查这个 - [http://jsfiddle.net/ashwyn/nQWSw/](http://jsfiddle.net/ashwyn/nQWSw/)

在小提琴中，如果任何项目 Div 已经存在于可排序（可放置） div 中，则将其还原。也许这就是你要找的。玩弄它。我希望它会有所帮助。干杯！！

# bash - 使用 xargs 命令和其后的两个移动命令

> ID：11429234
> 
> 赞同：1
> 
> 时间：2012-07-11T09:09:50.057
> 
> 标签：bash, xargs

操作系统：aix 外壳：bsh

你好，pp

我有两种类型的文件，一种以**.pdf.marker**结尾，另一种以**.pdf结尾**

应该总是有一对同名的（只是扩展名不同）。

当我移动**.pdf.marker**文件时，我还必须移动其对应的**.pdf**文件。

我试过这样的事情：

```
find ${INPUT_LOCATION}/ -name "*.pdf.marker" | xargs -I file mv file ${OUTPUT_LOCATION}/. mv $(basename file .marker) ${OUTPUT_LOCATION}/. 
```

然后我读到这个：[xargs with multiple commands as argument](https://stackoverflow.com/questions/6958689/xargs-with-multiple-commands-as-arguments) 并尝试了这样的事情：

```
find ${INPUT_LOCATION}/ -name "*.pdf.marker" | xargs -I file {mv file ${OUTPUT_LOCATION}/.; mv $(basename file .marker) ${OUTPUT_LOCATION}/.;} 
```

但它仍然没有工作。

我只需要在 xargs 之后执行 2 个命令。

**编辑**

按照我得到的建议答案，我尝试将 2 个参数放入一个移动命令中，而不是 xargs 之后的两个单独的移动命令。

```
find ${INPUT_LOCATION}/ -name "*.pdf.marker" | xargs -I file mv file $(basename file .marker) ${OUTPUT_LOCATION}/. 
```

但是现在，首先移动**.pdf.marker**，然后当我尝试从文件名中删除**.marker**以获取**.pdf**文件名时，我收到警告，没有此类文件或目录。

还有另一种获取**.pdf**文件名字符串的方法吗？

**解决方案**

```
find ${INPUT_LOCATION} -name '*.pdf.marker' -exec sh -c 'mv $0 `dirname $0`/`basename $0 .marker` $1' {} ${OUTPUT_LOCATION} \; 
```

在 cca 中移动了 200 000 个文件。25 分钟。没有什么问题。

感谢所有参与回答的人，**非常感谢**您 Nahuel Fouilleul！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:20:37.830

您可以尝试以下方法：

```
find ${INPUT}/ -name "*.pdf" -exec mv '{}' '{}'.marker ${OUTPUT} \; 
```

要测试标记文件是否存在，您可以使用以下内容：

```
find ${INPUT}/ -name "*.pdf" -exec test -e '{}'.marker \; -exec mv '{}' '{}'.marker ${OUTPUT} \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:09:18.747

试试这个（调试的 x 选项）

```
find "${INPUT_LOCATION}" -name '*.pdf.marker' | xargs -i bash -cx 'pdf=`dirname {}`/`basename {} .marker`;[ -e "$pdf" ]&&{ mv {} "$pdf" "$0";}' "${OUTPUT_LOCATION}" 
```

或更短

```
find $INPUT_LOCATION -name '*.pdf.marker' | xargs -i bash -c 'mv ${0%.marker} $0 $1' {} $OUTPUT_LOCATION 
```

或者

```
find $INPUT_LOCATION -name '*.pdf.marker' -exec bash -c 'mv ${0%.marker} $0 $1' {} $OUTPUT_LOCATION \; 
```

也许更标准

```
find ${INPUT_LOCATION} -name '*.pdf.marker' -exec sh -c 'mv $0 `dirname $0`/`basename $0 .marker` $1' {} ${OUTPUT_LOCATION} \; 
```

并且可以添加测试回声

```
find ${INPUT_LOCATION} -name '*.pdf.marker' -exec sh -c 'echo mv $0 `dirname $0`/`basename $0 .marker` $1' {} ${OUTPUT_LOCATION} \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:16:50.740

无需使用 xargs：

```
for i in `find ${INPUT_LOCATION} -name \*.pdf`; do mv $i ${OUTPUT_LOCATION}; mv $i.marker ${OUTPUT_LOCATION}; done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T11:05:32.067

```
for f in *.pdf.marker; do
  if [ -e "${f%.marker}" ]; then
    mv "$f" "${f%.marker}" "$OUTPUT_LOCATION"
  fi
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T01:27:21.617

如果您安装了 GNU Parallel：

```
find ${INPUT_LOCATION} -name '*.pdf.marker' | parallel mv {} {.} ${OUTPUT_LOCATION} 
```

要了解更多信息，请观看介绍视频： http: [//pi.dk/1](http://pi.dk/1)

# excel - Excel VBA 无法读取超过 40,000 个字符的 Web 源

> ID：11429235
> 
> 赞同：2
> 
> 时间：2012-07-11T09:09:57.453
> 
> 标签：excel, vba, buffer

尝试通过 Excel VBA 接收网站源代码大约需要 4000 个字、40000 个字符。然后它停止。我不知道为什么。

谁能帮我？

```
Option Explicit
Private Const INTERNET_FLAG_NO_CACHE_WRITE = &H4000000
Private Declare Function InternetOpen Lib "Wininet.dll" Alias "InternetOpenA" (ByVal lpszAgent As String, ByVal dwAccessType As Long, ByVal lpszProxyName As String, ByVal lpszProxyBypass As String, ByVal dwFlags As Long) As Long
Private Declare Function InternetReadFile Lib "Wininet.dll" (ByVal hFile As Long, ByVal sBuffer As String, ByVal lNumBytesToRead As Long, lNumberOfBytesRead As Long) As Integer
Private Declare Function InternetOpenUrl Lib "Wininet.dll" Alias "InternetOpenUrlA" (ByVal hInternetSession As Long, ByVal sUrl As String, ByVal sHeaders As String, ByVal lHeadersLength As Long, ByVal lFlags As Long, ByVal lContext As Long) As Long
Private Declare Function InternetCloseHandle Lib "Wininet.dll" (ByVal hInet As Long) As Integer

Public Sub GetWebPageData()

  Dim hInternet, hSession, lngDataReturned As Long
  Dim iReadFileResult As Integer
  Dim sBuffer As String * 64
  Dim sTotalData As String
  Dim sUrl As String
  Dim sLine As String

  sUrl = "http://www.engadget.com/" 'Long Website here
  hSession = InternetOpen("", 0, vbNullString, vbNullString, 0)

  If hSession Then hInternet = InternetOpenUrl(hSession, sUrl, vbNullString, 0, INTERNET_FLAG_NO_CACHE_WRITE, 0)

  If hInternet Then
    iReadFileResult = InternetReadFile(hInternet, sBuffer, 128, lngDataReturned)

    sTotalData = sBuffer

    Do While lngDataReturned <> 0
      iReadFileResult = InternetReadFile(hInternet, sBuffer, 128, lngDataReturned)
      sTotalData = sTotalData + Mid(sBuffer, 1, lngDataReturned)
    Loop
  End If

  iReadFileResult = InternetCloseHandle(hInternet)

  'WEBPAGE loaded into sTotalData
  Cells(2, 2) = sTotalData
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:04:44.710

根据要求，另一种获取完整源代码的方法：

```
Function GetSource(url As String) As String

With CreateObject("MSXML2.XMLHTTP")
    .Open "GET", url
    .Send
    Do: DoEvents: Loop Until .Readystate = 4
    GetSource = .responsetext
    .abort
End With

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T11:16:02.923

你有没有尝试过 ：

```
For i = 1 To Len(sTotalData) Step (Len(sTotalData) /  200) '*Line1 of 3 to replace Cells(2, 2) = sTotalData

Cells(i \ (Len(sTotalData) / 200) + 1, "A").Value = "'" & Mid(sTotalData, i, (Len(sTotalData) / 200)) '*Line2 of 3 to replace Cells(2, 2) = sTotalData

Next i '*Line3 of 3 to replace Cells(2, 2) = sTotalData 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:48:27.967

问题是线路

```
Cells(2, 2) = sTotalData 
```

在 Excel 2007/2010 中，将字符串返回到单元格被限制为 32767 个字符，即使`sTotalData`比这更长。

参考[这个链接](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx)

# plone - 正在做或 TAL 中的其他布尔属性

> ID：11429237
> 
> 赞同：1
> 
> 时间：2012-07-11T09:10:10.463
> 
> 标签：plone, template-tal, zpt

如何处理可能存在或不存在的属性？示例是 checkbox checked="checked" 或 disabled="disabled" HTML 属性。

涉及到什么样的 tal:attributes 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:48:27.343

当列出的属性`tal:attributes`设置为 None 时，该属性将被省略：

```
<span tal:attributes="title python:len(item['title']) < 10 and item['title'] or None">
   Only a title if shorter than 10 characters.
</span> 
```

这同样适用于不存在对象的路径表达式：

```
<span tal:attributes="title item/title" /> 
```

现在，只有在项目*上*有标题键或属性`title`时才会设置属性。请注意，如果解析为，则该属性也将被省略。*`item/title``None`*

 *来自[TALES 1.4 规范，`attributes`部分](http://wiki.zope.org/ZPT/TALSpecification14#attributes)：

> 如果与属性分配关联的表达式的计算结果为空，则从语句元素中删除该属性。

python`None`被解释为“无”的地方。*

# java - StreamSource 开幕时刻

> ID：11429239
> 
> 赞同：0
> 
> 时间：2012-07-11T09:10:16.660
> 
> 标签：java, xml, inputstream

我对 Xalan 转换的 StreamSource 初始化时刻有疑问。这可能会极大地影响同​​步和项目开发本身。

问题是，真正的输入流究竟是什么时候打开的？当 StreamSource 是从 String 路径创建时，而不是 File 或其他预先打开的 Streams。或者，具体来说，流是在初始化时打开还是在第一次调用时打开（例如在转换器中，在“转换调用”期间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:22:41.170

StreamSource 的创建并没有打开流，它只是设置了一些属性。

当您调用该方法时，流的打开就完成了`transform()`。

看看班级`com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl`

# javascript - Javascript - 关联数组副本

> ID：11429242
> 
> 赞同：0
> 
> 时间：2012-07-11T09:10:33.243
> 
> 标签：javascript, jquery

从技术上讲，Javascript 中没有关联数组之类的东西。但是由于我无法避免的原因，我最终没有做诸如

```
var x = [1,2,3];
x.someRequiredProperty = 'some value'; 
```

正如预期的那样，Javascript 是 Javascript，它可以工作。但是现在，我如何制作这个“*数组*”的副本，以便我可以处理这个数组的多个实例而不损害原始？

我试过 jQuery `$.extend([], x)`，它并没有真正给我一个新的副本。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:30:39.620

我不喜欢“关联”Javascript 数组的想法，因为向数组添加属性对 JavaScript 没有意义。例如，`length`属性只会计算索引元素（而不是属性），但`for(var x in assoc_array)`会遍历数组的索引以及“键”。因此，要仅循环数组项，您必须使用完整的 for 循环`for(var i = 0; i < assoc_array.length; i++)...`。

无论如何，这样的复制功能将适用于您的目的：

```
function copy_assoc(arr)
{
    var out = [];

    for(var key in arr)
    {
        if(!arr.hasOwnProperty(key))
        {
            continue;
        }

        out[key] = arr[key];
    }

    return out;
} 
```

这是一个正在使用的演示：http: [//jsfiddle.net/DbVV8/3/](http://jsfiddle.net/DbVV8/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:22:32.730

首先，如果你想要一个关联数组，你应该使用一个对象：

```
var x = {};
x[0] = 1;
x[1] = 2;
x[2] = 3;
x.someProperty = 'Foo'; 
```

然后，如果你想要一个副本，你可以使用 jQuery 的[`each`](http://api.jquery.com/jQuery.each/)函数来迭代每个属性并构建一个副本：

```
var copy = {};
$.each(x,function(i,e){
   copy[i] = e;
}); 
```

现场示例：http: [//jsfiddle.net/KhBC9/](http://jsfiddle.net/KhBC9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:41:29.207

让我回答我自己的问题 - 出于我的所有目的 - 使用数组的深层克隆`$.extend(true, [], myArray)`为我提供了一个新数组，我的所有属性都完好无损。但我喜欢[@CodeMonkey 的回答](https://stackoverflow.com/a/11429620/1177441)。

# android - Android MediaPlayer 在不同设备上播放相同视频时执行不同的速度

> ID：11429243
> 
> 赞同：0
> 
> 时间：2012-07-11T09:10:33.987
> 
> 标签：android, media-player

我的应用程序需要同时在不同的Android设备上播放视频，由服务器控制，所有设备都应该以相同的速度播放视频。但是我遇到了在硬件更好的设备上播放视频时遇到的麻烦似乎比那些硬件不太好的人更快。我不太确定原因。我可以用代码修复差异吗？如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:17:40.857

通常，视频播放由声音计时，声音以恒定比特率（通常为 44kHz）播放。当时钟说轮到他们出现时，就会显示 Bideo 帧。这意味着播放引擎必须同步，如果它不能足够快地解码它们，要么等待或丢弃帧：这将导致一些抖动但避免 a/v 不同步。

现在，您没有在示例中提供足够的信息来提供帮助：

*   你用的是什么播放引擎？你的还是标准的？知道在分布于不同硬件制造商或 android 版本的一系列 android 设备上没有“标准”之类的东西......
*   什么编码（音频、视频）、逻辑传输（mepg2）、物理传输（rtsp、自适应流）...

总的来说，目前没有简单的答案。

# c# - 创建会话时 ASP.NET C# CSS 丢失

> ID：11429246
> 
> 赞同：3
> 
> 时间：2012-07-11T09:10:46.743
> 
> 标签：c#, asp.net, css

请帮忙！！我正在使用 Visual Studio，在 ASP.NET C# (.Net 4) 中编程：我是一名 PHP 转换者，试图使用会话创建一个简单的登录页面。看到我是 ASP.NET 的新手，我从互联网上的某个地方使用了这段代码：

登录.aspx：

```
<asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
<asp:TextBox ID="txtPassword" runat="server"></asp:TextBox>
<asp:Button ID="submit" runat="server" Text="Submit" onclick="submit_Click" />
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label> 
```

登录.aspx.cs：

```
protected void send_Click(object sender, EventArgs e)
        {
        if (txtUserName.Text == "admin" && txtPassword.Text == "admin")
        {
            Session["Authenticate"] = "Yes";
            Response.Redirect("Default.aspx");
        }
        else
            Label1.Text = "Login failed";
        } 
```

全球.asax.cs

```
void Session_Start(object sender, EventArgs e)
    {
        // Code that runs when a new session is started
        Session["Authenticate"] = "";
        CheckLogin();
    }
void Application_OnPostRequestHandlerExecute()
    {
        CheckLogin();
    }

    void CheckLogin()
    {
        string Url = Request.RawUrl;
        int count = Url.Length - 10;
        string TestUrl = Url.Substring(count);
        string SessionData = Session["Authenticate"].ToString();
        if (SessionData == "" && TestUrl != "Login.aspx")
        {
            Response.Redirect("~/Login.aspx");
        }
    } 
```

每当我尝试在浏览器中运行此代码时，我的 CSS 文件都不会加载。这似乎链接到 global.asax 文件，因为如果我注释掉上面在我的 global.asax.cs 片段中显示的所有代码，css 会正确加载。

我曾尝试通过源代码在浏览器中打开 css 文件，但出现以下错误：

```
Session state is not available in this context.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Session state is not available in this context.

Source Error: 

Line 45:             int count = Url.Length - 10;
Line 46:             string TestUrl = Url.Substring(count);
Line 47:             string SessionData = Session["Authenticate"].ToString();
Line 48:             if (SessionData == "" && TestUrl != "Login.aspx")
Line 49:             {

Source File: D:\MyTestWebsite\Global.asax.cs    Line: 47 
```

我也尝试过使用 App_Themes 使用主题并在 Web.config 中定义它 - 给出了同样的问题。css 仅在删除与会话相关的代码时显示。

Any idea what's causing this???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:42:39.800

The issue is that you're checking login when attempting to load your static resources as well as dynamic pages. Certain files (such as global CSS) should be available for full anonymous access and not gated behind authentication logic.

You are definitely reinventing the wheel as the built in Forms Authentication supported by a large library of membership providers provide a rich base for you to expand upon. If you do choose to go forward with this method, my suggestion would be to query the requested file and ensure that they are requesting an aspx (assuming you are not using url rewriting) before requiring authentication.

# ios - 如何在 iOS 中锁定屏幕以使其只有纵向？

> ID：11429248
> 
> 赞同：4
> 
> 时间：2012-07-11T09:10:51.590
> 
> 标签：ios, orientation, rotation

我创建了一个有很多视图的应用程序，我希望其中一些视图只在纵向上。我在 .m 文件中对此进行了编码：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return NO;
} 
```

我需要做其他事情吗？可能在 .h 文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-14T15:36:24.263

对我来说最干净的解决方案：

转到 Info.plist 文件，对于“支持的界面方向”，删除除“纵向（底部主页按钮）”之外的所有值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:14:50.063

您只需要在该方法中返回一个 BOOL 即可。如果您只想要纵向模式，这意味着：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait) ;
} 
```

如果也可以纵向倒置（纵向时将设备旋转 180 度），那么该方法将如下所示：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

最后一个条件可以替换为对 的调用`UIDeviceOrientationIsPortrait(interfaceOrientation)`，它进行相同的比较（参见：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)）

LE：如果这不起作用，您可以尝试使用以下“hack”：尝试再次弹出并推送视图（如果您使用的是 NavigationController）。您可以使用`popViewControllerAnimated`and`pushViewController:animated:`方法强制控制器重新查询所需的方向:) 来源：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T09:13:43.443

您必须返回`YES`您支持的方向（纵向），而不仅仅是`NO`一切。还要确保在项目的目标设置中，您只检查支持的纵向模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:00:53.210

将以下方法添加到您的视图控制器。例如，这将确保仅支持肖像模式。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsPortrait(interfaceOrientation);
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T10:16:04.340

尝试这个..

```
 -(BOOL)shouldAutorotate
 {
  return NO;
 }

-(NSUInteger)supportedInterfaceOrientations
 {
 return UIInterfaceOrientationMaskPortrait;
 }

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
 } 
```

# c# - 将事件添加到 DataGridComboBoxColumn

> ID：11429249
> 
> 赞同：-1
> 
> 时间：2012-07-11T09:10:52.473
> 
> 标签：c#, wpf, events, xaml

如何`SelectionChanged`向此 XAML 代码添加事件？

```
<DataGridComboBoxColumn x:Name="stcombo" 
                        CellStyle="{DynamicResource ComboBoxStyle}" 
                        Header="Статус" 
                        SelectedItemBinding="{Binding name_ru}" >
    ???                        
</DataGridComboBoxColumn> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:21:28.210

我认为您不能添加数据网格组合框的 SelectedChanged 事件。替代解决方案是 -

您可以将属性绑定到组合框的 SelectedItem 并使用此属性的 setter 来处理 selectedchanged 事件逻辑。

每当用户从组合框中选择任何值时，setter 都会被执行。

XAML -

```
<DataGridComboBoxColumn CellStyle="{DynamicResource ComboBoxStyle}" x:Name="stcombo"  Header="Статус" SelectedItemBinding ="{Binding SelectedCustomer,UpdateSourceTrigger=PropertyChanged}"> 
```

/Viwe 模型背后的代码

```
private Customer _selectedCustomer;
public Customer SelectedCustomer
{
    get
    {
       return _selectedCustomer;
    }
    set
    {
       _selectedCustomer = value;
       //Do your custom logic
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T15:36:26.733

有了这条线

```
<DataGridComboBoxColumn x:Name="stcombo" 
                        CellStyle="{DynamicResource ComboBoxStyle}" 
                        Header="Статус" 
                        SelectedItemBinding="{Binding name_ru}">

    <DataGridComboBoxColumn.EditingElementStyle>
      <Style TargetType="{x:Type ComboBox}">
           <EventSetter Event="SelectionChanged" Handler="yourCBSelectionChanged" />
      </Style>
    </DataGridComboBoxColumn.EditingElementStyle>   

</DataGridComboBoxColumn> 
```

在代码中：

```
private void yourCBSelectionChanged(object sender, SelectionChangedEventArgs e)
{
     //Your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:25:39.783

试试这个：

```
 <DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <ComboBox DisplayMemberPath=" "
                      SelectedValuePath=" "
                      SelectedValue="{Binding  }"
                      SelectionChanged="" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

# facebook - 无法访问 Facebook 图表：OAuthException 190:467

> ID：11429251
> 
> 赞同：1
> 
> 时间：2012-07-11T09:11:07.203
> 
> 标签：facebook, debugging, facebook-graph-api

我无法访问 Facebook 上的任何 /me/ URL。我尝试了生成用于测试的临时链接的 API 文档页面（[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)），但仍然出现错误。

我还尝试了 API 资源管理器（[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)）并生成了一个包含所有范围的访问令牌（带有许多应用程序），但它仍然存在。

一个星期以来一直试图解决这个问题（认为这可能是一个错误？）。有什么建议吗？我只是在跳跃，这是我错过的简单事情。

哦，还有确切的错误代码；

```
{
   "error": {
      "message": "Error validating access token: This may be because the user logged out or may be due to a system error.",
      "type": "OAuthException",
      "code": 190,
      "error_subcode": 467
   }
} 
```

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-11-17T23:44:35.640

成功

```
if (window == top) {  
    setTimeout(function() {    
        document.getElementById("warning").style.display = "block";  
    }, 2000);
}
setTimeout(function(); 
```

# listview - ListView 中的项目卡在我的光标上

> ID：11429254
> 
> 赞同：0
> 
> 时间：2012-07-11T09:11:12.380
> 
> 标签：listview, vb6

![项目卡住的 ListView 的图像](../Images/2b0a7fc6ca077e6266e44da8f2130df1.png)
从 ListView 框中单击某些内容后，单击的项目会卡在光标上，释放光标的唯一方法是终止应用程序。

项目离开列表并跟随光标的方式是不可取的

`item.selected = false`失败

如何防止它粘在光标上？或者失败了我该如何解开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:57:07.897

[@wqw](https://stackoverflow.com/users/40691/wqw "wqw")是正确的；设置 的`OLEDragmode`属性`ListView`来`Manual`工作。

# android - 如何在android动画中将图像加载到imageview？

> ID：11429258
> 
> 赞同：1
> 
> 时间：2012-07-11T09:11:19.107
> 
> 标签：android, animation

我做了如下

```
imageView = (ImageView) findViewById(R.id.animation_iv);
imageView.setImageResource(R.drawable.loadinganim);
AnimationDrawable animationDrawable = (AnimationDrawable) imageView.getDrawable();
animationDrawable.start(); 
```

我在 loading.xml 中有复制图像

```
<?xml version="1.0" encoding="utf-8"?> 
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"  
    android:oneshot="false">  
    <item android:drawable="@drawable/v1" android:duration="160" />  
    <item android:drawable="@drawable/v4" android:duration="160" />  
    <item android:drawable="@drawable/v7" android:duration="160" />  
</animation-list> 
```

它在 Galaxy Note 中出现问题。如果有人有想法请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:17:30.177

你必须这样做：

```
 imageView.setBackgroundResource(R.drawable.loading);
    final AnimationDrawable frameAnimation = (AnimationDrawable) imageView.getBackground(); 
    startAnimation(frameAnimation); 
```

startAnimation 方法是：

```
 public void startAnimation(final AnimationDrawable frameAnimation){
    new Thread(new Runnable() {
        public void run(){
            // some code that runs outside the ui thread.
            frameAnimation.start();
        }
    }).start();
  } 
```

我认为在 UI 线程以外的线程上运行动画将解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T16:18:19.870

```
AnimationDrawable imageAnimation;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    ImageView image = (ImageView) findViewById(R.id.test_image);
    image.setImageResource(R.drawable.loading);
    imageAnimation=(AnimationDrawable) image.getDrawable();

 }

public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    imageAnimation.start();
  } 
```

# mysql - MySQL - 如何优化我的查询

> ID：11429268
> 
> 赞同：1
> 
> 时间：2012-07-11T09:11:45.103
> 
> 标签：mysql, optimization

我在进行良好的 MySQL 查询方面非常糟糕。我创建了这个：

```
SELECT SQL_CALC_FOUND_ROWS
  `products_stock`.`products_id`,
  `products_stock`.`products_stock_attributes`,
  `products_stock`.`products_stock_quantity`,
  `products`.`manufacturers_id`,
  `products_description`.`products_name`
FROM `products_stock` 
  LEFT JOIN  `products`
    ON  `products_stock`.`products_id` = `products`.`products_id` 
  LEFT JOIN  `products_description`
    ON  `products_stock`.`products_id` = `products_description`.`products_id` 
  LEFT JOIN  `products_to_categories`
    ON `products_stock`.`products_id` = `products_to_categories`.`products_id` 
WHERE `products_stock`.`products_stock_quantity` >=3
  AND `products`.`products_status` = 1
  AND ISNULL(`products`.`products_image`) = false
  AND `products`.`products_image` != ""
  AND EXISTS(
   select * from `allegro`
   where `products_stock`.`products_id` = `allegro`.`product_id` 
     and `allegro`.`attributes` =  `products_stock`.`products_stock_attributes`
  ) = false 
```

`products`表有大约 17k 行， `allegro`表有大约 3k 行。

查询Idea是选择所有产品，其中stock_quanity > 3，哪里是照片，哪里是`allegro`表中没有产品id。

现在查询大约需要 10 秒。我不知道如何优化它。

@解决了

我已经为 allegro.product_id 和 allegro.attributes 添加了索引，现在查询时间不到半秒。谢谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:20:33.087

摆脱这些`EXISTS ( SELECT … ) = FALSE`东西。

把它变成这样的东西：

```
LEFT JOIN allegro
          ON products_stock.products_id = allegro.product_id
         AND allegro.attributes = products_stock.products_stock_attributes
…
WHERE allegro.product_id IS NULL 
```

请参阅 MySQL 文档中的[Rewriting Subqueries as Joins](http://dev.mysql.com/doc/refman/5.6/en/rewriting-subqueries.html)章节。

进一步的建议：

*   不要加入你不使用的表，比如`products_to_categories`
*   而不是`ISNULL(…) = FALSE`写`… IS NOT NULL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:36:07.580

在尝试以下方法之前，请检查您的表引擎设置为 innoDB 并正确索引，然后您可以尝试[直接加入](http://mysqljoin.com/joins/straight-join-tutorial/)。它将首先强制查看左表。

另一种方法是使用[memcache](http://www.php.net/manual/en/memcache.set.php)进行慢速查询。使用该方法可以将查询结果缓存到数组中，避免频繁查询db。缓存的结果可以在指定的时间段后更新。

# java - 应用层

> ID：11429269
> 
> 赞同：1
> 
> 时间：2012-07-11T09:11:57.637
> 
> 标签：java, .net, architecture, domain-driven-design

理论上，一般来说：

*   数据访问层保存数据库连接和查询。
*   业务层保存模型和逻辑。
*   服务层持有应用服务的主要服务。
*   表示层包含网站。

    1.  我对吗？我错过了什么？
    2.  什么是基础设施层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:31:45.820

是的，我会说你已经正确地描述了这些层。

在我看来，基础设施可以代表两件事：

1.  横切关注点——比如日志/审计、身份验证/安全等。我更喜欢使用[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)来处理这些类型的事情。
2.  您的应用程序使用的第三方系统/组件/库，例如信用卡支付网关。甚至您选择的数据库平台也可以被视为基础架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:35:48.643

基础设施层往往出现在 DDD 和 MVVM 类型的项目中。这里有一个简单的图表和对 DDD 中各层的快速解释。

[http://dddsample.sourceforge.net/architecture.html](http://dddsample.sourceforge.net/architecture.html)

它基于 Java 实现，但除了一些奇怪的 Java 术语外，描述仍然有效。

# regex - 使用 `rack-rewrite` 从永久链接中删除月份和日期

> ID：11429270
> 
> 赞同：0
> 
> 时间：2012-07-11T09:12:00.327
> 
> 标签：regex, rack, jekyll, octopress

我已经开始将我的博客移动到[Octopress](http://octopress.org/)的过程，但不幸的是，Jekyll 的限制不允许我在我的永久链接中使用缩写的月份名称。因此，我希望完全摆脱*月份*和*日期*。

[我在这篇文章](http://adamwiggall.com/blog/2012/01/05/redirects-octopress-and-heroku)中读到，您可以使用[rack-rewrite](https://github.com/jtrupiano/rack-rewrite)来处理重定向，因为我使用 Heroku 来托管它。

那我该怎么转：

这个：`example.com/journal/2012/jan/03/post-of-the-day/`
进入这个：`example.com/journal/2012/post-of-the-day/`

* * *

*加分：*如果我有另一条重定向`/blog/`到的规则`/journal/`，那条规则还会遵守上述规则吗？所以从：

这个：`example.com/blog/2012/jan/03/post-of-the-day/`
到这个：`example.com/journal/2012/jan/03/post-of-the-day/`
最后到：`example.com/journal/2012/post-of-the-day/`

提前感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:21:31.377

我的第一个想法是捕捉斜线之间的每一块，然后只显示你想要的。

所以这样的事情会起作用：

```
// given example.com/blog/2012/jan/03/post-of-the-day/

r301 %r{\/blog\/(.*)\/(.*)\/(.*)\/(.*)\/$}, '/journal/$1/$4/' 
```

这是 Rubular 的链接，以说明我的意思[http://rubular.com/r/La6rjrE5Hw](http://rubular.com/r/La6rjrE5Hw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:59:28.380

您希望尽可能具体，这样您就不会意外地重写在遇到新 URL 结构时会失败的其他内容。另请注意，我不知道机架重写，所以我在这一点上遵循 redroot89 的领导。

`r301 %r{^\/(:blog|journal)\/([0-9]{4})\/[a-z]{3}\/[0-9]{2}\/(.*)\/$}, '/journal/$1/$2/`

这仅捕获年份和 slug，但通过更具体的模式找到其余部分。通过包含 ，`(:blog|journal)`您可以一次性重定向两个重定向，而无需将两个重定向链接在一起。

# git - 如何重新定位到 gerrit/git 中存在冲突的私有分支？

> ID：11429277
> 
> 赞同：1
> 
> 时间：2012-07-11T09:12:34.180
> 
> 标签：git, branch, conflict, rebase, git-rebase

目标：我想将来自“bravo”的提交 G 重新设置为来自“alpha”的提交 F。由此：

```
 G    bravo
            /
        D--E--F   alpha
       /
A--B--C           mainline 
```

对此：

```
 G    bravo
               /
        D--E--F     alpha
       /
A--B--C             mainline 
```

“alpha”已经成功地重新基于最新的主线工作。我在 C 上挑选“alpha”。当我挑选“bravo”时，它会出现所有合并冲突。一旦我修复了这些，如果我这样做了

```
commit --amend 
```

提交消息只包含 alpha 的所有信息，而我希望得到 bravo 的信息。所以我在硬重置为 C 后再次尝试，为 alpha 拉（与樱桃选择相反）然后拉布拉沃。修复了冲突并运行：

```
commit 
```

提交消息只是将其列为合并并具有合并信息。尽管提交成功，但我无法将其推送到 gerrit，因为它说我无权推送合并。当我读到 rebase 时，总是只针对主线，但我想 rebase 私有分支。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:56:48.343

在研究了变基等之后，我发现在这种情况下，您希望将 bravo 挑选到另一个精选的更改（alpha）上，然后当您提交时仅使用

```
commit 
```

不是

```
commit --amend 
```

这将保留 bravo 的提交消息，并愉快地将其“重新定位”到 alpha 的最新补丁集。

# tomcat - 以非 root 用户身份在 Debian 上启动 Tomcat6

> ID：11429278
> 
> 赞同：0
> 
> 时间：2012-07-11T09:12:35.443
> 
> 标签：tomcat, debian, tomcat6

我正在尝试以非 root 用户身份在 Debian（通过 aptitude 安装）上启动 tomcat6。但是启动脚本告诉我，我需要以 root 身份启动。

任何人更改了脚本，以便普通用户能够启动它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:02:08.583

您可以考虑将非 root 用户添加到 sudoer 列表，而不是修改脚本。

为此，请以 root 身份登录并在文件末尾添加以下行`/etc/sudoers`（使用您选择的编辑器或简单地输入`visudo`命令行）：

```
yourusername ALL=(ALL) /etc/init.d/tomcat6 
```

然后你可以用 sudo 启动/停止/重启 tomcat，例如：

```
sudo /etc/init.d/tomcat6 start 
```

如果您厌倦了必须一直输入密码，请按`/etc/sudoers`以下方式修改您的输入：

```
yourusername ALL=(ALL) NOPASSWD: /etc/init.d/tomcat6 
```

# iphone - 当应用程序状态为等待上传时更改捆绑 ID

> ID：11429282
> 
> 赞同：0
> 
> 时间：2012-07-11T09:12:42.073
> 
> 标签：iphone, ios, itunes

我想将`bundle ID`我的应用程序从`iTunes Connect`测试帐户更改为测试应用内购买。我的应用程序的当前状态是`Waiting for Upload`. 我正在尝试`bundle ID`从管理应用程序的应用程序信息部分进行更改，但它没有改变。

如何更改我的应用程序的捆绑 ID，以便我可以测试应用内购买？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:03:35.180

请不要以这种方式测试 iAP 购买。更好的解决方案是在 Xcode 中创建项目的副本并在那里更改包 ID。

# java - 从网页中的 java servlet 检索数据

> ID：11429285
> 
> 赞同：1
> 
> 时间：2012-07-11T09:12:46.970
> 
> 标签：java, javascript, ajax, servlets

我有一个显示一些信息的网页。在我的网页中，我有很多坐标（经度、纬度），我想制作一个 Java 类来排列这些坐标。

我正在尝试做的是在显示坐标之前，将它们发送到 java servlet。该 servlet 将修饰它们并发送回网页以显示它们。

我希望该网页不刷新，所以我认为我需要 ajax 来调用 servlet，我或多或少地控制了它。但我不知道如何从网页接收 java 中的数据。

我过去创建了一些 servlet，但总是使用 javascript 调用 java 函数。这样做的问题是Web浏览器转到其他网页（带有java调用的jsp）。

我还没有订购坐标的代码，但我正在使用它来尝试：

```
package ordenacion;

public class OrdenarListaPuntos {

public static String ordenar(String cadenaDesordenada){  //String unordered
    String cadenaOrdenada;

//here goes the code for ordering
    cadenaOrdenada = cadenaDesordenada;
    return cadenaOrdenada; //String ordered
}
} 
```

我只知道如何使用jsp从javascript调用java函数，而不是从其他服务器中的其他网页或不刷新网页...

你知道我应该怎么做吗？或者我应该读什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:34:06.240

你需要做一些阅读，因为你试图掌握的不仅仅是一个简单的概念。看看这些作为开始；

[你如何发送一个数组作为（jquery）ajax请求的一部分](https://stackoverflow.com/questions/4656375/how-do-you-send-an-array-as-part-of-an-jquery-ajax-request)

[http://codesstore.blogspot.co.uk/2011/12/json-with-jquery-jsp-servlets.html](http://codesstore.blogspot.co.uk/2011/12/json-with-jquery-jsp-servlets.html)

[http://viralpatel.net/blogs/creating-parsing-json-data-with-java-servlet-struts-jsp-json/](http://viralpatel.net/blogs/creating-parsing-json-data-with-java-servlet-struts-jsp-json/)

[http://srikanthtechnologies.com/blog/java/jobs_employees_jquery.html](http://srikanthtechnologies.com/blog/java/jobs_employees_jquery.html)

最后，您将使用这个基本结构。您将使用 POST 而不是我在此处提到的 GET

var valSend = "aSingleParam";

```
var url = "/yourApplicationWebContext?paramPassed="+valSend;
console.log(url);
$.ajax({
    url: url,
    type: "GET",
    dataType: "json",
    success: function(data) {
    console.log("Data returned : " + data);

        if (typeof data == 'object') {

                }

        },
    error: function(jqXHR, textStatus, errorThrown) {
        console.log("jqXHR : "+jqXHR + " text status : " + textStatus + " error : " + errorThrown);
        }
    }); 
```

Java Servlet 端.......

您的 web.xml 将有一个 servlet 和相应的 servlet 映射；

![小服务程序映射](../Images/36f58751194fd6fd2ec3c1c0cd939c4b.png)

//你的 Java Servlet 类

包 com.xyz;

公共类 ServlvetClassName 扩展 HttpServlet {

// ajax 调用中的 type: "GET" 将触发 doGet 将处理的 "get"

```
protected void doGet(HttpServletRequest req, HttpServletResponse response)
        throws ServletException, IOException {

        if(null!= req.getParameter("paramPassed")){

         // get and use your parameter, which "is paramPassed"..... 

        }

        } 
```

// ajax 调用中的 type: "POST" 将触发 doPost 将处理的 "post"

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

    this.doGet(req, resp);
} 
```

}

# java - 使用 ZMQ 均匀分布

> ID：11429286
> 
> 赞同：0
> 
> 时间：2012-07-11T09:13:11.237
> 
> 标签：java, message-queue, zeromq, jzmq

我在我的 Centos 中使用 Zmq。我的任务是使用 ZMQ 编写一个 Java 程序，该程序将有一个生产者和多个消费者。如果一个生产者发送 100 条消息，并且有四个消费者，那么所有消费者必须每人共享 25 条消息。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:01:35.850

我自己已经找到了方法。我们必须使用代理来解决这个问题，并且代理必须有两个用于前端和后端连接的套接字。然后在 ZMQ 中有几个可用的类，如 streamer、queue 和 forwarder。我们可以通过将上下文、前端、后端作为构造函数的参数来为这个类创建对象。只需通过调用 run 方法让代理等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:37:44.813

你可以更简单地做到这一点；如果 Socket 类型具有循环的传出策略（PUSH、REQ、DEALER），如果所有端点都连接，则可以假设工作将均匀分布。如果您这样选择，您可以避免使用经纪人。

# android - 使用代码生成的动画 overridePendingTransition

> ID：11429288
> 
> 赞同：3
> 
> 时间：2012-07-11T09:13:17.867
> 
> 标签：android

我正在运行时创建一个自定义动画，并且想用这个新动画覆盖一个挂起的过渡，我该怎么做？

# grails - Grails/Groovy 域类继承转换

> ID：11429291
> 
> 赞同：6
> 
> 时间：2012-07-11T09:13:20.943
> 
> 标签：grails, inheritance, groovy, grails-orm

我在 Grails 中使用继承对我的域类进行了建模，如下所示。

```
abstract class Profile{
}

class Team extends Profile{
}

class User extends Profile{
}

class B{
    static hasMany = [profiles: Profile]
} 
```

稍后在控制器中，当我在某些情况下从 B 类获取所有配置文件时，我想将一些配置文件转换为 Team 或 User，但我不能，因为我得到 java.lang.ClassCastException 或 GroovyCastException，虽然它们被保存为团队或用户（具有数据库中的属性类）。以下是我尝试过的方法：

```
def team1 = b.profiles.toList()[0] as Team

def team1 = (Team)b.profiles.toList()[0] 
```

当我不编写任何类型时它正在工作，只是使用它，因为它在动态语言中是正常的。

```
def team1 = b.profiles.toList()[0] 
```

但后来我永远不知道我正在使用哪个类。在 groovy 或 gorm 中是否有将父类转换为子类的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T10:57:15.590

答案是**否定**的，因为真正的 GORM/Hibernate 实例是代理对象。所以它不能直接转换为实体类。

无论如何，这可能会有所帮助：

```
def team1 = b.profiles.toList()[0]
if(team1.instanceOf(Team)) {
    // I am an instance of Team
    // do something here.
} 
```

# jquery - jquery 发生了一些非常奇怪的事情

> ID：11429292
> 
> 赞同：1
> 
> 时间：2012-07-11T09:13:25.110
> 
> 标签：jquery, wordpress

我对以下问题感到抓狂：

我有这段代码可以在一个花哨的滑动表单上复制一些字段：

```
 (function($){

 $countCursos = 1;
 $countFormsA = 1;
 $countFormsB = 1;

      $.fn.addForms = function(idform){

                    var adicionar_curso = "<p>"+
                     "  <label for='nome_curso'>Nome do Curso</label>"+
                     "  <input id='nome_curso' name='nome_curso["+$countCursos+"]' type='text' />"+
                     "  </p>"+
                     "  <p>"+
                     "  <label for='instituicao'>Instituição</label>"+
                     "  <input id='instituicao' name='instituicao["+$countCursos+"]' type='text' />"+
                     "  </p>";

                     var myform2 = "<table>"+
                     "  <tr>"+
                     "     <td>Field C</td>"+
                     "     <td><input type='text' name='fieldc["+$countFormsA+"]'></td>"+
                     "     <td>Field D ("+$countFormsA+"):</td>"+
                     "     <td><textarea name='fieldd["+$countFormsA+"]'></textarea></td>"+
                     "     <td><button>remove</button></td>"+
                     "  </tr>"+
                     "</table>";

                      var myform3 = "<table>"+
                     "  <tr>"+
                     "     <td>Field C</td>"+
                     "     <td><input type='text' name='fieldc["+$countFormsB+"]'></td>"+
                     "     <td>Field D ("+$countFormsB+"):</td>"+
                     "     <td><textarea name='fieldd["+$countFormsB+"]'></textarea></td>"+
                     "     <td><button>remove</button></td>"+
                     "  </tr>"+
                     "</table>";

                    if(idform=='novo_curso'){
                        alert(idform);
                        adicionar_curso = $("<div>"+adicionar_curso+"</div>");
                        $("button", $(adicionar_curso)).click(function(){ $(this).parent().parent().remove(); });
                        $(this).append(adicionar_curso);
                        $countCursos++;
                    }

                        if(idform=='mybutton1'){
                        alert(idform);
                        myform2 = $("<div>"+myform2+"</div>");
                        $("button", $(myform2)).click(function(){ $(this).parent().parent().remove(); });
                        $(this).append(myform2);

                            $countFormsA++;

                        }

                    if(idform=='mybutton2'){
                        alert(idform);
                        myform3 = $("<div>"+myform3+"</div>");
                        $("button", $(myform3)).click(function(){ $(this).parent().parent().remove(); });
                        $(this).append(myform3);

                            $countFormsB++;

                        }

      };
})(jQuery);         

 $(function(){
    $("#mybutton1").bind("click", function(e){
    e.preventDefault();
    var idform=this.id;

        if($countFormsA<3){
            $("#container1").addForms(idform);
        }       
    });
});

$(function(){
    $("#novo_curso").bind("click", function(e){
    e.preventDefault();
    var idform=this.id;
    alert(idform);
        if($countCursos<3){
            $("#outro_curso").addForms(idform);
        }       
    });
});

$(function(){
    $("#mybutton2").bind("click", function(e){
    e.preventDefault();
    var idform=this.id;

        if($countFormsB<3){
            $("#container2").addForms(idform);
        }       
    });
}); 
```

它使用正确的 html 代码：

```
 <div id="content_form">
        <div id="wrapper_form">
            <div id="navigation_form" style="display:none;">
                <ul>
                    <li class="selected">
                        <a href="#">Dados Pessoais</a>
                    </li>
                    <li>
                        <a href="#">P. Académico</a>
                    </li>
                    <li>
                        <a href="#">P. Profissional</a>
                    </li>
                    <li>
                        <a href="#">Eventos</a>
                    </li>
                    <li>
                        <a href="#">Curriculum Vitae</a>
                    </li>
                    <li>
                        <a href="#">Confirmar</a>
                    </li>
                </ul>
            </div>

            <div id="steps">
                <form id="formElem" name="formElem" action="" method="post">
                    <fieldset class="step">

                        <legend>Dados Pessoais</legend>
                        <p>
                            <label for="nome">Nome</label>
                            <input id="nome" name="nome" />
                        </p>
                        <p>
                            <label for="morada">Morada</label>
                            <input id="morada" name="morada" />
                        </p>
                        <p>
                            <label for="localidade">Localidade</label>
                            <input id="localidade" name="localidade" />
                        </p>
                        <p>
                            <label for="codigo_postal">Código Postal</label>
                            <input id="codigo_postal" name="codigo_postal" placeholder="ex: 1111-111" />
                        </p>
                        <p>
                            <label for="num_bi">Nº BI/Cartão do Cidadão</label>
                            <input id="num_bi" name="num_bi" />
                        </p>
                        <p>
                            <label for="data_nascimento">Data de Nascimento</label>
                            <input id="data_nascimento" name="data_nascimento" placeholder="dia-mês-ano ex: 1-1-1975" />
                        </p>
                        <p>
                            <label for="telemovel">Telemóvel</label>
                            <input id="telemovel" name="telemovel" placeholder="ex: 911234567" />
                        </p>
                        <p>
                            <label for="tele_alternativo">Telefone Alternativo</label>
                            <input id="tele_alternativo" name="tele_alternativo" />
                        </p>
                        <p>
                            <label for="email">E-mail</label>
                            <input id="email" name="email" placeholder="ex: email@gmail.com"/>
                        </p>
                        <p>
                            <label for="email_alt">E-mail Alternativo</label>
                            <input id="email_alt" name="email_alt" />
                        </p>
                        <p>
                            <label for="info_adicional">Informação Adicional</label>
                            <textarea id="info_adicional" name="info_adicional" /></textarea>
                        </p>

                    </fieldset>
                    <fieldset class="step">
                        <legend>Percurso Académico</legend>
                        <p>
                            <label for="nome_curso">Nome do Curso</label>
                            <input id="nome_curso" name="nome_curso" type="text" />
                        </p>
                        <p>
                            <label for="instituicao">Instituição</label>
                            <input id="instituicao" name="instituicao" type="text" />
                        </p>
                        <p>
                            <label for="media_final">Classificação Final</label>
                            <input id="media_final" name="media_final" />
                        </p>
                        <p>
                            <label for="inicio_curso">Data Início Curso</label>
                            <input id="inicio_curso" name="inicio_curso" placeholder="dia-mês-ano ex: 1-1-1975" />
                        </p>
                        <p>
                            <label for="fim_curso">Data Fim Curso</label>
                            <input id="fim_curso" name="fim_curso" placeholder="dia-mês-ano ex: 1-1-1975" />
                        </p>
                        <div id="outro_curso">
                        </div>
                        <p>
                            <button id="novo_curso">Adicionar Outro Curso</button>
                        </p>

                    </fieldset>
                    <fieldset class="step">
                        <legend>P. Profissional</legend>
                        <p>
                            <label for="cardtype">Card</label>
                            <select id="cardtype" name="cardtype">
                                <option>Visa</option>
                                <option>Mastercard</option>
                                <option>American Express</option>
                            </select>
                        </p>
                        <p>
                            <label for="cardnumber">Card number</label>
                            <input id="cardnumber" name="cardnumber" type="number" AUTOCOMPLETE=OFF />
                        </p>
                        <p>
                            <label for="secure">Security code</label>
                            <input id="secure" name="secure" type="number" AUTOCOMPLETE=OFF />
                        </p>
                        <p>
                            <label for="namecard">Name on Card</label>
                            <input id="namecard" name="namecard" type="text" AUTOCOMPLETE=OFF />
                        </p>
                    </fieldset>
                    <fieldset class="step">
                        <legend>Eventos</legend>
                        <p>
                            <label for="newsletter">Newsletter</label>
                            <select id="newsletter" name="newsletter">
                                <option value="Daily" selected>Daily</option>
                                <option value="Weekly">Weekly</option>
                                <option value="Monthly">Monthly</option>
                                <option value="Never">Never</option>
                            </select>
                        </p>
                        <p>
                            <label for="updates">Updates</label>
                            <select id="updates" name="updates">
                                <option value="1" selected>Package 1</option>
                                <option value="2">Package 2</option>
                                <option value="0">Don't send updates</option>
                            </select>
                        </p>
                        <p>
                            <label for="tagname">Newsletter Tag</label>
                            <input id="tagname" name="tagname" type="text" AUTOCOMPLETE=OFF />
                        </p>
                    </fieldset>
                    <fieldset class="step">
                        <legend>Curriculum Vitae</legend>
                        <p>
                            <label for="newsletter">Newsletter</label>
                            <select id="newsletter" name="newsletter">
                                <option value="Daily" selected>Daily</option>
                                <option value="Weekly">Weekly</option>
                                <option value="Monthly">Monthly</option>
                                <option value="Never">Never</option>
                            </select>
                        </p>
                        <p>
                            <label for="updates">Updates</label>
                            <select id="updates" name="updates">
                                <option value="1" selected>Package 1</option>
                                <option value="2">Package 2</option>
                                <option value="0">Don't send updates</option>
                            </select>
                        </p>

                    </fieldset>
                    <fieldset class="step">
                        <legend>Confirmar</legend>
                        <p>
                            Everything in the form was correctly filled 
                            if all the steps have a green checkmark icon.
                            A red checkmark icon indicates that some field 
                            is missing or filled out with invalid data. In this
                            last step the user can confirm the submission of
                            the form.
                        </p>
                        <p class="submit">
                            <button id="registerButton" type="submit">Register</button>
                        </p>
                    </fieldset>
                </form>
            </div>

        </div>
    </div> 
```

让我抓狂的是，我的 wordpress 网站上的相同代码（jquery 和 html）不起作用。当我单击此按钮时：

```
 <div id="outro_curso"></div>
<p><button id="novo_curso">Adicionar Outro Curso</button></p> 
```

他进入 jquery 函数。我很高兴，因为我们打印了第一个 (alert(idform);)，但第二个：

```
 if(idform=='novo_curso'){
                    alert(idform);
                    adicionar_curso = $("<div>"+adicionar_curso+"</div>");
                    $("button", $(adicionar_curso)).click(function(){ $(this).parent().parent().remove(); });
                    $(this).append(adicionar_curso);
                    $countCursos++;
                } 
```

当我运行我的 wordpress 网站时，它永远不会出现在屏幕上。会不会和某事发生冲突？

添加 jquery.noConclict 不起作用：

```
 var $j = jQuery.noConflict();

 (function($j){

     var countCursos = 1,
     var countFormsA = 1,
     var countFormsB = 1;

          $j.fn.addForms = function(idform){

                        var adicionar_curso = "<p>"+
                         "  <label for='nome_curso'>Nome do Curso</label>"+
                         "  <input id='nome_curso' name='nome_curso["+countCursos+"]' type='text' />"+
                         "  </p>"+
                         "  <p>"+
                         "  <label for='instituicao'>Instituição</label>"+
                         "  <input id='instituicao' name='instituicao["+countCursos+"]' type='text' />"+
                         "  </p>";

                         var myform2 = "<table>"+
                         "  <tr>"+
                         "     <td>Field C</td>"+
                         "     <td><input type='text' name='fieldc["+countFormsA+"]'></td>"+
                         "     <td>Field D ("+countFormsA+"):</td>"+
                         "     <td><textarea name='fieldd["+countFormsA+"]'></textarea></td>"+
                         "     <td><button>remove</button></td>"+
                         "  </tr>"+
                         "</table>";

                          var myform3 = "<table>"+
                         "  <tr>"+
                         "     <td>Field C</td>"+
                         "     <td><input type='text' name='fieldc["+countFormsB+"]'></td>"+
                         "     <td>Field D ("+countFormsB+"):</td>"+
                         "     <td><textarea name='fieldd["+countFormsB+"]'></textarea></td>"+
                         "     <td><button>remove</button></td>"+
                         "  </tr>"+
                         "</table>";

                        if(idform=='novo_curso'){
                            alert(idform);
                            adicionar_curso = $j("<div>"+adicionar_curso+"</div>");
                            $j("button", $j(adicionar_curso)).click(function(){ $j(this).parent().parent().remove(); });
                            $j(this).append(adicionar_curso);
                            countCursos++;
                        }

                            if(idform=='mybutton1'){
                            alert(idform);
                            myform2 = $j("<div>"+myform2+"</div>");
                            $j("button", $j(myform2)).click(function(){ $j(this).parent().parent().remove(); });
                            $j(this).append(myform2);

                                countFormsA++;

                            }

                        if(idform=='mybutton2'){
                            alert(idform);
                            myform3 = $j("<div>"+myform3+"</div>");
                            $j("button", $j(myform3)).click(function(){ $j(this).parent().parent().remove(); });
                            $j(this).append(myform3);

                                countFormsB++;

                            }

          };
    })(jQuery);         

     $j(function(){
        $j("#mybutton1").bind("click", function(e){
        e.preventDefault();
        var idform=this.id;

            if(countFormsA<3){
                $j("#container1").addForms(idform);
            }       
        });
    });

    $j(function(){
        $j("#novo_curso").bind("click", function(e){
        e.preventDefault();
        var idform=this.id;
        alert(idform);
            if(countCursos<3){
                $j("#outro_curso").addForms(idform);
            }       
        });
    });

    $j(function(){
        $j("#mybutton2").bind("click", function(e){
        e.preventDefault();
        var idform=this.id;

            if(countFormsB<3){
                $j("#container2").addForms(idform);
            }       
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:19:03.293

尝试使用`jQuery.noConflict()`

```
var $j = jQuery.noConflict();

$j("...").something(); 
```

有时 wordpress 有自定义 jQuery 函数的问题。

* * *

也转换：

```
 $countCursos = 1;
 $countFormsA = 1;
 $countFormsB = 1; 
```

至：

```
 var countCursos = 1,
     countFormsA = 1,
     countFormsB = 1; 
```

以及对这些变量的所有相关调用。

# javascript - 有没有办法强制浏览器的 Window 对象重新评估鼠标的位置？

> ID：11429293
> 
> 赞同：0
> 
> 时间：2012-07-11T09:13:30.177
> 
> 标签：javascript, iframe, mouse

我有一个内容管理工具，它使用 iframe 在页面上堆叠内容块。系统会将每个块的内容加载到 iframe 中，以及封面和一些用于编辑功能（编辑、删除、复制和移动）的按钮。封面只出现在鼠标悬停时（使用 CSS :hover 伪类），所以页面的内容看起来和它的实际一样，除非用户将鼠标悬停在他们想要编辑的块上。这一切都很好。

问题来自移动块。我开发了一个拖放系统来移动积木。用户将鼠标放在移动图标上，然后将块拖动到他们需要的位置。在鼠标按下时，块本身（整个 iframe）被隐藏（显示：无），并被相同形状的阴影 div 替换，然后被拖动。如果用户选择将块放到一个新的地方，一切正常，但如果他们把它放到其他任何地方，操作就会被取消。阴影被破坏，原来的 iframe 被重新显示。

现在的问题：当原来的 iframe 重新显示时，它仍然认为鼠标悬停在它上面，并且所有只显示在 :hover 伪类下的图层都在显示（在 FireFox 和 IE 中 - 不是在 Chrome 中） . 将鼠标移到块上然后再次移出会重置 iframe 状态，但我正在寻找一种方法来强制 iframe 重新评估鼠标位置，而无需用户执行任何操作。

一种解决方案是用鼠标事件和指定类替换伪类的使用，但我想知道是否还有其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:13:53.250

除非您只针对最新的浏览器（在较旧的 IE 中，除了锚点之外没有原生 :hover 事件），否则您应该跳过 :hover 方法并使用您（正确）假设的解决方案 - 意思是使用css 类和 js 事件来确定块的状态。

# java - Java 泛型 - 构造函数类型

> ID：11429294
> 
> 赞同：0
> 
> 时间：2012-07-11T09:13:31.530
> 
> 标签：java, generics

```
public class AClass<X extends AnInterface>{

    public AClass(X x){
    }

}

public class Y implements AnInterface{

} 
```

在调用代码中，如果我有：

```
public static<X extends AnInterface> void main(String args){

    AnInterface y = new Y();
    AClass a = new AClass<AnInterface>(y);

} 
```

我应该能够在 AClass 的构造函数中使用 X 来让它工作，对吗？我收到错误消息，告诉我 AClass 的构造函数应该是 AnInterface 类型？

编辑改变`AClass a = new AClass<AnInterface>(y);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:26:01.890

您需要告诉 AClass 它期望什么类型。

```
 public static void main(String args){
        AnInterface y = new Y();
        AClass<AnInterface> a = new AClass<AnInterface>(y);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:21:30.973

```
public static void main(String[] args) {
    AnInterface y = new Y();
    AClass a = new AClass(y);
} 
```

# mysql - 事件持续时间（从 mysql 中选择）

> ID：11429297
> 
> 赞同：0
> 
> 时间：2012-07-11T09:13:40.417
> 
> 标签：mysql, select, if-statement

在数据库 MySQL 中，有一个表，其中包含有关从“问题”或“未知”到“正常”的对象的更改状态的信息：

```
CREATE TABLE `events` (
  `eventid` bigint(20) unsigned NOT NULL,
  `source` int(11) NOT NULL DEFAULT '0',
  `object` int(11) NOT NULL DEFAULT '0',
  `objectid` bigint(20) unsigned NOT NULL DEFAULT '0',
  `clock` int(11) NOT NULL DEFAULT '0',
  `value` int(11) NOT NULL DEFAULT '0',
  `acknowledged` int(11) NOT NULL DEFAULT '0',
  `ns` int(11) NOT NULL DEFAULT '0',
  `value_changed` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`eventid`),
  KEY `events_1` (`object`,`objectid`,`eventid`),
  KEY `events_2` (`clock`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

eventid | objectid | clock | value
77843   13619   1341588185  0
77859   13619   1341589085  2
77889   13619   1341590585  0
82174   13619   1341843065  2
82193   13619   1341843785  1
82197   13619   1341843965  0 
```

其中，值 0 - 正常 1 - 问题，2 - 未知，时钟 - 时间（格式 unixtime）。

有一个查询可以计算指定时间的事件持续时间：

```
select a.eventid,a.objectid,a.`interval` from (
select
@prev_clock,
@prev_value,
l.*,
if(l.value='0' && @prev_value!='0' &&
@prev_objectid=l.objectid,TIMEDIFF(FROM_UNIXTIME(l.clock),FROM_UNIXTIME(@prev_clock)),null) 'interval',
(@prev_clock:=l.clock),(@prev_value:=l.value),(@prev_objectid:=l.objectid)
from events l,(select @vclock:=0,@prev_value:='',@prev_objectid:=0) b1
where l.clock>=1341588185 and objectid=13619
order by l.objectid,l.eventid
) a where a.value='0'; 
```

结果如下：

```
eventid objectid    interval
77843   13619   
77889   13619   00:25:00
82197   13619   00:03:00 
```

帮助，根据以下条件更正查询/表达式：

1) 状态可以从 0 变为 1，然后是 2，然后再变为 1（如此多次）.... 并且很久以后变为 0（例如，事件的持续时间 82 197 = 1341843965-1341843065 = 900秒而不是 180）。

2）在单元格的“间隔”中，不应有空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:29:07.760

你的意思是这样的：

```
SELECT e.eventid AS eventid_OK, errEvent.eventid AS eventid_ERROR, e.objectid, TIMEDIFF(FROM_UNIXTIME(e.clock),FROM_UNIXTIME(errEvent.clock)) 
FROM events AS e
INNER JOIN events AS errEvent 
    ON errEvent.clock = (SELECT MIN(err.clock) 
                         FROM events AS err 
                         WHERE err.objectid = e.objectid 
                         AND err.clock > (SELECT MAX(prev.clock) 
                                          FROM events AS prev 
                                          WHERE prev.objectid = e.objectid 
                                          AND prev.clock < e.clock 
                                          AND prev.value = 0) 
                         AND err.value IN (1,2)) 

WHERE e.value = 0 
```

[http://sqlfiddle.com/#!2/20354/3](http://sqlfiddle.com/#!2/20354/3)

# iphone - 从 imageview 打印图像：xcode

> ID：11429301
> 
> 赞同：0
> 
> 时间：2012-07-11T09:13:44.840
> 
> 标签：iphone, objective-c, xcode, uiimageview, airprint

谁能告诉我如何使用 UIPrintInteractionController 从 imageview 打印图像。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:17:28.520

首先阅读 AirPrinter 以及如何使用它。点击链接： [https ://github.com/kharrison/CodeExamples/blob/master/AirPrinter/AirPrinter](https://github.com/kharrison/CodeExamples/blob/master/AirPrinter/AirPrinter)

您需要添加文件**UYLGenericPrintPageRenderer.h**和**UYLGenericPrintPageRenderer.m**

从这里获取：

[https://github.com/kharrison/CodeExamples/blob/master/AirPrinter/AirPrinter/UYLGenericPrintPageRenderer.h](https://github.com/kharrison/CodeExamples/blob/master/AirPrinter/AirPrinter/UYLGenericPrintPageRenderer.h)

[https://github.com/kharrison/CodeExamples/blob/master/AirPrinter/AirPrinter/UYLGenericPrintPageRenderer.m](https://github.com/kharrison/CodeExamples/blob/master/AirPrinter/AirPrinter/UYLGenericPrintPageRenderer.m)

这些是 PrintPageRenderer 文件。

在您的班级中导入此文件：

```
#import "UYLGenericPrintPageRenderer.h" 
```

现在检查您的设备是否支持打印：

```
if ([UIPrintInteractionController isPrintingAvailable]) {

    UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(printImageView)];
    [self.navigationItem setRightBarButtonItem:barButton animated:NO];
    self.printButton = barButton;
    [barButton release];

}
else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"" message:@"Sorry, Printing is not available" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alert show];
    [alert release];
} 
```

现在打印此处使用的“printImageView”图像作为 UIImageView 类的对象。

```
- (void)printImageView{

UIPrintInteractionController *pc = [UIPrintInteractionController sharedPrintController];

UIPrintInfo *printInfo = [UIPrintInfo printInfo];
printInfo.outputType = UIPrintInfoOutputGeneral;
printInfo.jobName = @"Sample Print";
pc.printInfo = printInfo;
pc.showsPageRange = YES;

UYLGenericPrintPageRenderer *renderer = [[UYLGenericPrintPageRenderer alloc] init];
renderer.headerText = printInfo.jobName;
renderer.footerText = @"AirPrinter Sample";

UIViewPrintFormatter *formatter = [printImageView viewPrintFormatter];
[renderer addPrintFormatter:formatter startingAtPageAtIndex:0];
pc.printPageRenderer = renderer;
[renderer release];

UIPrintInteractionCompletionHandler completionHandler = 
^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
    if(!completed && error){
        DLog(@"Print failed - domain: %@ error code %u", error.domain, error.code); 
    }
};

    [pc presentFromBarButtonItem:self.printButton animated:YES completionHandler:completionHandler];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T09:33:34.207

将图像转换为 pdf 并打印 pdf。

# vb6 - 我可以将 ActiveX 控件添加到 Comctlib.Toolbar (mscomctl) 控件吗？

> ID：11429307
> 
> 赞同：0
> 
> 时间：2012-07-11T09:13:52.480
> 
> 标签：vb6, activex, toolbar, comctl32

$大家好，

我正在向 VB6 应用程序添加功能（是的，我知道，这是一项了不起的任务：P），我需要将 ActiveX 控件（它看起来像一个按钮，但做更多的事情）放入 comctlib（Microsoft 公共控件）工具栏。

这可能吗？我不介意使用 Winapi、互操作或任何需要的东西，因为我真的需要这个功能。如果 Comctlib 控件无法做到这一点，是否还有另一个用于 VB6 的工具栏控件，我可以在其中删除其他 ActiveX 控件？

提前感谢您帮助我使用这种过时的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:43:36.343

除了其固有`Buttons`的集合之外，工具栏还充当通用容器。因此，要在现有按钮之间放置您想要的任何（非轻量级*）控件，请插入一个新按钮并将其`Style`属性设置为`PlaceHolder`- 在所需位置创建一个空白区域 - 并将您的控件放在那里。

当然，如果您在运行时动态显示/隐藏/添加/删除按钮，您将不得不手动重新定位任何此类控件。

**要显示轻量级控件，您可以首先将它们放置在任何其他容器控件中——例如无边框的 PictureBox。*

# c++ - 如何检查值是否在列表中

> ID：11429308
> 
> 赞同：5
> 
> 时间：2012-07-11T09:13:52.777
> 
> 标签：c++, stl

我有喜欢的清单 `list<pair<int,int>>`。如何检查 x `pair<int,int> x=make_pair(5,6)`是否在列表 l 中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T09:17:18.050

使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
std::find(l.begin(), l.end(), x) != l.end() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:15:40.063

使用[`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
auto it = std::find(lst.begin(), lst.end(), x);
if ( it != lst.end() )
{
   //x found
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T09:16:07.893

使用算法[`std::find()`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
std::list<std::pair<int, int>> my_list;
my_list.push_back(std::make_pair(1, 2));
my_list.push_back(std::make_pair(3, 2));

auto i = std::find(my_list.begin(), my_list.end(), std::make_pair(3, 2));
if (i != my_list.end())
{
    // Found it.
} 
```

# javascript - 如何使用 HTML5 localStorage 之类的东西，但在浏览器之间共享？

> ID：11429312
> 
> 赞同：14
> 
> 时间：2012-07-11T09:14:07.757
> 
> 标签：javascript, html, apache-flex, local-storage

我为我的项目尝试了 HTML 中的 localStorage。当我在一个浏览器中使用 localStorage 保存一些数据并尝试在另一个浏览器中读取它时，它会失败。

1.  如何保存所有浏览器通用的数据，就像 Flex 所做的那样？

2.  这些数据存储在 Windows 7 的什么位置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T09:16:59.580

1.  这是不可能的。

2.  每个浏览器都将其存储在自己的位置（这是不可能的原因）。`localStorage`不是操作系统服务，它是 HTML5 规范的一部分，由每个浏览器分别实现。

# winapi - WinApi 获取 ComboBox 项的窗口句柄

> ID：11429317
> 
> 赞同：1
> 
> 时间：2012-07-11T09:14:13.667
> 
> 标签：winapi, mfc, combobox, ccombobox

我正在尝试在 WinApi 中的 CComboBox 项目上绘制一些东西。为此，我需要一个代表项目（包含特定项目）的窗口句柄。我有一个问题，这可能吗？我该怎么做？或者也许你有另一个想法如何绘制 ComboBox 的特定项目。普热梅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:51:02.380

您需要的是一个**所有者绘制**的组合框。

请参阅[CCombobox::DrawItem](http://msdn.microsoft.com/en-us/library/y5hb5f9t%28v=vs.80%29.aspx)文档以了解如何获取每个项目的句柄，以及如何绘制它。

> 当控件的视觉方面发生变化时，框架为所有者绘制组合框控件、列表框控件的所有者调用此成员函数

`CBS_OWNERDRAWVARIABLE`注意：您必须在创建组合框时指定样式。（您也可以在 Visual Studio 资源编辑器的组合框的属性窗口中进行设置。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:23:51.653

如果要自定义 CComboBox，则必须从`CComboBox`类继承并覆盖函数`OnCtlColor`。看看[这个](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/45d6426c-eac4-45c8-b5b0-d85005c72c23)

# android - 使用 CursorAdapter 对抗 CustomAdapter 的优势

> ID：11429324
> 
> 赞同：1
> 
> 时间：2012-07-11T09:14:36.677
> 
> 标签：android, android-layout, sqlite

我正在使用自定义适配器来检索 ListView 的数据。初始化此数据不是从数据库中获取的，但现在是。我正在使用自定义适配器从服务器检索数据。现在在填充适配器之前检索数据。

现在，我有一个疑问：阅读 CursorAdapters 似乎很容易实现，但我对实际实现非常满意。

我不得不说数据大小不会超过10个左右......所以这不是内存问题。

那么，在这种情况下……使用 CursorAdapter 有哪些优势？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:21:42.463

我认为使用 CursorAdapter 可以让您更轻松地重新加载列表。如果对您的内容提供者进行了任何更改并通知了 ContentObserver，则会调用 CursorAdapter 的 onContentChanged() ，因此您可以覆盖它以执行您想要的操作或仅使用默认实现。具体来说，您的列表将在数据更改时自动重新加载。

# tomcat - 如何在 Tomcat 集群中共享相同的 Session id

> ID：11429326
> 
> 赞同：0
> 
> 时间：2012-07-11T09:14:40.793
> 
> 标签：tomcat, cluster-computing, sessionid

我有两个在集群环境中运行的 tomcat 实例

假设我们在两个实例中都有 test.jsp。

假设 test.jsp 在实例一中给出会话 ID(S1ID)，如何从实例二中获取相同的会话 ID(S2ID)

这个正确的 S1ID 是否等于 S2ID？您能否建议如何配置 tomcat 集群会话复制。如果它们相等（S1ID==S2ID）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:08:35.483

会话 ID 保存在 cookie 中，因此如果用户使用相同的会话 ID 访问您的域。您应该保持相同的 id 可以从不同的 tomcat 获得相同的会话。

# svn - 在本地存储库上创建 SVN 分支

> ID：11429329
> 
> 赞同：3
> 
> 时间：2012-07-11T09:14:43.687
> 
> 标签：svn, version-control

我正在尝试在我的计算机上的本地存储库上创建一个 svn 分支。根据我对[svn book](http://svnbook.red-bean.com/)中所读内容的理解，我应该首先创建分支目录（使用 svn mkdir），然后从我的存储库复制到我的工作副本的分支目录中（这是正确的吗？）。

以下是我的存储库和工作目录的位置：

> 我的本地存储库：“SVN/repo”。
> 我的工作副本：“SVN_WORK_COPY/repo/trunk”
> 我的分支目的地：“SVN_WORK_COPY/repo/branches/my_code_branch”

当我输入：

```
 svn copy SVN/repo SVN_WORK_COPY/repo/branches/my_code_branch -m "Created first branch" 
```

我收到以下消息：

> svn：本地、非提交操作不接受日志消息或修订属性

当我输入：

```
svn copy SVN/repo SVN_WORK_COPY/repo/branches/my_code_branch 
```

我收到以下消息：

> svn: 'SVN\repo' 不是工作副本

当我输入：

```
svn copy SVN_WORK_COPY/repo/trunk SVN_WORK_COPY/repo/branches/my_code_branch -m "First Branch" 
```

我又收到了这条信息：

> svn：本地、非提交操作不接受日志消息或修订属性

最后，当我输入：

```
svn copy SVN_WORK_COPY/repo/trunk SVN_WORK_COPY/repo/branches/my_code_branch 
```

我有：

> 一个 SVN_WORK_COPY/repo/branches/my_code_branch\trunk

我的文件（code.txt）在这个主干目录中。但是，我非常怀疑我是否正确创建了一个分支，因为

1.  我不允许创建消息（使用 -m）
2.  我不想要“my_code_branch”目录中的“trunk”目录
3.  我没有看到“已提交修订版 4”的消息（我目前处于修订版 4）

那么我哪里做错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T09:35:42.877

不，这不是您创建分支的方式。您首先在 SVN 存储库中复制主干（分支就是这个副本）：

```
svn copy http://the.url/theProject/trunk http://the.url/theProject/branches/my_new_branch -m "created new branch" 
```

然后要么将当前工作副本切换到这个新分支（但你应该将目录重命名为主干以外的其他名称，因为它会造成混淆），或者，如果你想在本地拥有主干和分支，你可以将分支签出到另一个位置.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-15T11:13:24.423

使用此命令，消息应该用单引号引起来。

```
svn copy https://example.com/svn/repo/trunk https://example.com/svn/repo/branches/new_branch -m 'creating new branch' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T10:28:43.823

尝试：

```
svn copy -m "creating" http://10.4.55.7/svn/repos/myproject/trunk http://10.4.55.7/svn/repos/myproject/branch/sss 
```

注意`-m "creating"`可以放在行尾。

# unit-testing - 使用 Mocha 或 Jasmine 对 Node.js REST 服务进行单元测试

> ID：11429332
> 
> 赞同：2
> 
> 时间：2012-07-11T09:14:52.870
> 
> 标签：unit-testing, node.js, jasmine, mocha.js

我有导出 express.js 的 REST 方法的节点模块（索引、显示、更新、删除）..

测试 mocha 或 jasmine 单元测试框架的最佳方法是什么？

我应该如何描述我的测试？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:19:16.043

我个人使用[api-easy](https://github.com/flatiron/api-easy)，它基于誓言和请求。使用此模块，您可以轻松测试 REST API。

这里有一个例子：

```
 var APIeasy = require('api-easy'),
      assert = require('assert');

  var suite = APIeasy.describe('your/awesome/api');

  suite.discuss('When using your awesome API')
       .discuss('and your awesome resource')
       .use('localhost', 8080)
       .setHeader('Content-Type', 'application/json')
       .post({ test: 'data' })
         .expect(200, { ok: true })
         .expect('should respond with x-test-header', function (err, res, body) {
           assert.include(res.headers, 'x-test-header');
         })
       .export(module); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T21:35:22.260

您可以使用[请求模块轻松](https://github.com/mikeal/request)地执行 HTTP 请求（或调用 REST API）。当响应可用时，您可以在回调中进行断言。对于断言，您可以使用任何您喜欢的断言模块，但我建议尝试一下[should.js 模块](https://github.com/visionmedia/should.js/)。编写 should 语句很有趣。

关于在 mocha、jasmine、vows 或任何其他测试框架之间进行选择。你选择哪一个并不重要。查看他们的 API 并选择您认为对您有生产力并符合您的思维和编码风格的框架。

# android - 在android中截取当前运行屏幕的截图？

> ID：11429334
> 
> 赞同：0
> 
> 时间：2012-07-11T09:14:59.233
> 
> 标签：android, cordova, phonegap-plugins

我希望代码片段拍摄当前屏幕的快照并将其存储在 SD 卡中，方法是使用 phonegap android 按下按钮。如果有人知道，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:01:02.280

使用以下代码：

```
 String mPath = Environment.getExternalStorageDirectory().toString() + "/" + ACCUWX.IMAGE_APPEND;   

// create bitmap screen capture
Bitmap bitmap;
View v1 = mCurrentUrlMask.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false);

OutputStream fout = null;
imageFile = new File(mPath);

try {
    fout = new FileOutputStream(imageFile);
    bitmap.compress(Bitmap.CompressFormat.JPEG, 90, fout);
    fout.flush();
    fout.close();

} catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这里的 MyView 是我们需要包含在屏幕中的视图。您也可以通过这种方式从任何视图中获取 DrawingCache（无需 getRootView()）。

这是 Android 的代码，但对于 phoneGap，您必须为此代码片段制作插件。谢谢

# matlab - MATLAB：bitand 背后的逻辑并获取所有可能的状态

> ID：11429336
> 
> 赞同：1
> 
> 时间：2012-07-11T09:15:01.803
> 
> 标签：matlab, binary, bit-manipulation

我得到了这个代码

```
m0=0.8;
m1=1.2;
k=6; %where k can take values between 2 and 10;
kbar=2^k;
g_m = [0:(kbar-1)];

for i = 1: (kbar)
  g=1;
  for j=0:(kbar-1)
    if(bitand(g_m(i),2^j))~=0
      g=g*m1;
    else
      g=g*m0;
    end
  end
  g_m(i)=g %results in a 1xN vector where N = all the possible states
end 
```

我的问题是为什么函数`bitand`允许你生成所有可能的“状态”？我不太确定我是否真的理解 bitand 背后的逻辑，除了搜索它比较的值是否具有`bit = 1`，因此`ans=1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:25:04.540

bitand 取 2 个值，将它们转换为二进制，在两个值之间进行逻辑与，并将逻辑与的结果作为十进制数返回。所以对于 2 个给定的数字，它只返回一个值

# javascript - jquery ajax 不会返回文本和/或出错时发出警报

> ID：11429338
> 
> 赞同：0
> 
> 时间：2012-07-11T09:15:07.210
> 
> 标签：javascript, jquery

> **可能重复：**
> [Jquery：将ajax调用的值返回给调用者函数？](https://stackoverflow.com/questions/1327024/jquery-return-the-value-of-a-ajax-call-to-caller-function)

在下面的代码中，

我正在尝试将我的 ajax 调用放入需要它的函数中，但 makeIt() 不会从 ajax 调用中返回“usa？或者我是否将这一切都搞错了？

```
var makeIt = function () {
    var getStuff = function () {
        return $.ajax({
          type: "POST",
          url: "my.php",
          data: {
            id: "2"
          },
          success: function (data) {
            data
          }, // data will return string "usa"
          error: function () {
            alert("error");
          }
        });
      };
    return getStuff();
  };
var result = makeIt() //result should = "usa" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:18:30.130

`data`仅仅在函数中编写`success`并不能实现任何目标。

```
 success: function (data) {
    data
  } 
```

它需要像

```
 success: function (data) {
     doSomethingWith(data);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:21:49.280

你这样做是错的。$.ajax 调用是任意同步的，makeIt 无法返回通过 $.ajax 调用获得的值，您可以这样做：

```
var makeIt = function (callback) {
    $.ajax({
        type: "POST",
        url: "my.php",
        data: { id: "2" },
        success: callback,
        error: function () { alert("error"); }
    });
};

makeIt(function (result) { 
    //result should = "usa"
}); 
```

这样，您将有一个很好的 $.ajax 调用包装器，并提供了所有参数和错误处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:21:59.020

将“结果变量”定义为全局变量。

然后为您的项目添加额外的功能。

```
var result;

var makeIt = function () {

    var getStuff = function () {

       return $.ajax({
            type: "POST",
            url: "my.php",
            data: { id: "2" },
            success: function (data) { fnResult(data) },
            error: function () { alert("error"); }
        });

    };

function fnResult(data){result = data}; 
```

# android - 在ndk级别创建位图并显示

> ID：11429340
> 
> 赞同：1
> 
> 时间：2012-07-11T09:15:30.970
> 
> 标签：android, bitmap, android-ndk

我想创建一个位图并使用 ndk 代码将其显示在屏幕上，任何人都可以告诉我如何做到这一点。示例代码很好理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:46:27.527

从 Gingerbread 开始，NativeWindow 是您在 ndk 屏幕上显示位图的选择。

android-ndk-r7b/platforms/android-9/arch-arm/usr/include/android/native_window.h

寻找下面的两个函数， int32_t ANativeWindow_lock(ANativeWindow* window, ANativeWindow_Buffer* outBuffer, ARect* inOutDirtyBounds); int32_t ANativeWindow_unlockAndPost(ANativeWindow* 窗口);

它看起来很像 android SDK 级别的 java Canvas，对吧？

要使用nativeWnd，您必须将java SurfaceHolder 的一个jobject 传递给ndk，然后在surface 上获取以制作nativeWnd。

然后，使用 ANativeWindow_setBuffersGeometry 设置帧大小和颜色格式

然后，ANativeWindow_lock 锁定表面

然后，做你的图片 bitblt

最后，ANativeWindow_unlockAndPost - 你的位图在屏幕上

您也可以在 Internet 上搜索使用本机窗口的示例代码。

# android - 如何在 Android 应用程序中使用自定义 Flash 播放器

> ID：11429345
> 
> 赞同：3
> 
> 时间：2012-07-11T09:15:41.030
> 
> 标签：android

我有一个自定义 Flash 播放器（作为 .swf 文件）。是否可以在我的 Android 应用程序上使用该自定义 Flash 播放器？如果是这样，我该怎么做？非常感谢示例链接。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:58:17.080

您必须创建一个带有嵌入式 swf 文件的 html 文件。在此处查看示例[http://pastebin.com/BYrfKmea](http://pastebin.com/BYrfKmea)之后您可以通过三种不同的方式制作它

*   `WebView`您可以将 html 和 swf 文件放在 assets 文件夹中，然后尝试在by中打开它`mWebView.loadUrl("file:///android_asset/player.html");`。这种方法的主要缺点是 Flash`WebView`有时无法正常工作。

*   将 html 和 swf 文件放在 assets 文件夹中。然后以编程方式将它们复制到 SD 卡。如何做到这一点在这里找到[如何将文件从“资产”文件夹复制到 SD 卡？](https://stackoverflow.com/questions/4447477/android-how-to-copy-files-in-assets-to-sdcard)然后通过调用在浏览器中打开复制的文件`startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("file:///mnt/sdcard/player.html")));`

*   将 html 和 swf 文件放在网络服务器上，然后在浏览器中通过`startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.yoursite.com/player.html")));`. 这种方法的缺点是您需要互联网连接和准备好高负载的网络服务器。

# php - 使用下拉菜单更改 PHP 变量值

> ID：11429351
> 
> 赞同：0
> 
> 时间：2012-07-11T09:16:02.123
> 
> 标签：php, xhtml

我想知道是否知道使用选项下拉列表更改变量值的方法？

php脚本是：

```
<?php $searchBoxfruit = "Red"; require_once('includes/search_box.php'); ?> 
```

和选项列表

```
<option value="Type">Type</option>
            <option value="Red">Red</option>
            <option value="Green">Green</option>
            <option value="Gray">Gray</option> 
            </select> 
```

所以基本上当用户在下拉菜单中选择绿色选项时，$searchBoxfruit 值必须更改为绿色。

我尝试用这段代码解决这个问题：

```
$searchBoxfruit = "";

if (isset($_GET['0'])):  
    $searchBoxfruit = "Red";
elseif (isset($_GET['1'])):
   $searchBoxfruit = "Blue";
elseif (isset($_GET['2'])):  
    $searchBoxfruity = "White";
else:  (isset($_GET['3'])):
    $searchBoxfruit = "Black";  
endif;

php $searchBoxfruit = ""; require_once('includes/search_box.php'); 
```

但它仍然不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:19:15.043

在向客户端发送内容之前，始终会解释 PHP。HTML 是该内容的一部分。一旦看到 HTML 元素，例如下拉列表，就不能告诉 PHP 修改现有变量。

最好的办法是使用将 GET 或 POST 数据发送到 php 页面的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:20:13.617

这是表单处理的基本部分。喜欢，

如果您的“ `<select>`”被命名`fruit`并提交了表单。

`$_POST['fruit']`应给出值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T11:08:48.193

> `<?php`
> `<form action="" method="post" id="kid">`
> `<select name="op">`
> `<option value="Pink">Pink</option>`
> `<option value="Red">Red</option>`
> `<option value="Green">Green</option>`
> `<option value="Gray">Gray</option>`
> `</select>`

`<input type="submit" value="SUBMIT" name='but'>`
`</form>`
`<?php`
`<br>if( $_POST ) <br>{ <br> var_dump( $_POST );
<br>} <br>`

`?>`

我认为你应该研究一下这段代码

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T09:20:25.587

纯 HTML/PHP 无法做到这一点。

当用户选择另一个选项时，您可以触发表单发布，或者更好的是，执行 AJAX 调用来设置变量。

但是为什么要实时进行呢？

只需在 $_POST['nameofyoucontrol'] 变量中获取表单提交时的值。

# scala - 选项 GenTraversableOnce 吗？

> ID：11429360
> 
> 赞同：18
> 
> 时间：2012-07-11T09:16:18.947
> 
> 标签：scala

我很困惑。在`TraversableLike`中，有一个`flatMap`带有签名的函数

`flatMap[B](f: (A) ⇒ GenTraversableOnce[B]): Iterable[B]`

但是，我可以这样使用它

```
scala> Iterable(1,2,3,4,5).flatMap{i=>if (i%2==0) {None} else {Some(i)}}
res1: Iterable[Int] = List(1, 3, 5) 
```

为什么有可能？是如何`Option`转换成的`GenTraversableOnce`？好像不是子类...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T21:40:33.230

正如您在类图（*）中看到的那样，`Option`它不是 的子类`GenTraversableOnce`，但有一个可用于 的隐式转换`Iterable`，即`GenTraversableOnce`.

![在此处输入图像描述](../Images/28eca13b79a17a3a4916360e14824b42.png)

(*) 是的，好吧，我作弊了。Scaladoc 上还没有类图……但明天应该会出现！:-)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-11T09:46:25.787

实际上默认情况下存在从 Some[X] 到 GenTraversableOnce[X] 的隐式转换。这在 REPL 中测试非常简单

```
scala>  implicitly[Function[Some[Int],GenTraversableOnce[Int]]]
res1: Some[Int] => scala.collection.GenTraversableOnce[Int] = <function1>

scala> implicitly[Some[Int] => GenTraversableOnce[Int]] // alternative syntax
res2: Some[Int] => scala.collection.GenTraversableOnce[Int] = <function1> 
```

实际上这是在对象选项中定义的。内部 scala 包：

```
object Option {
  /** An implicit conversion that converts an option to an iterable value
   */
  implicit def option2Iterable[A](xo: Option[A]): Iterable[A] = xo.toList

  /** An Option factory which creates Some(x) if the argument is not null,
   *  and None if it is null.
   *
   *  @param  x the value
   *  @return   Some(value) if value != null, None if value == null
   */
  def apply[A](x: A): Option[A] = if (x == null) None else Some(x)

  /** An Option factory which returns `None` in a manner consistent with
   *  the collections hierarchy.
   */
  def empty[A] : Option[A] = None
} 
```

option2Iterable 正是您正在寻找的。您还可以看到为什么在您的 REPL 中进行测试时，您会看到 GenTraversableOnce 的实现是一个列表。

如果您正在寻找无需您执行任何操作即可自动导入的隐式转换（例如您可以在 REPL 中看到的隐式转换），您必须查看：

*   Predef.scala
*   类的伴随对象

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T09:18:12.877

似乎它确实被隐式转换为`List`.

```
scala> val l:scala.collection.GenTraversableOnce[Int] = Some(3)
l: scala.collection.GenTraversableOnce[Int] = List(3)

scala> val l:scala.collection.GenTraversableOnce[Int] = None
l: scala.collection.GenTraversableOnce[Int] = List() 
```

个人说明：scala 魔术隐式转换有时真的很混乱。

# c# - 在 C# 中将图像格式 WBMP 转换为 BMP / PNG

> ID：11429367
> 
> 赞同：0
> 
> 时间：2012-07-11T09:16:54.137
> 
> 标签：c#, image, png, converter

> **可能重复：**
> [如何将 Wbmp 转换为 Png？](https://stackoverflow.com/questions/11927391/how-to-convert-wbmp-to-png)

我想弄清楚如何在 C# 中将 WBMP 图像格式（无线应用程序协议位格式）转换为 png / bmp！我已经尝试过 Image、ImageConverter、Bitmap、BitmapSource 等类，甚至直接使用流和字节数组，但还没有成功。我可以通过 BinaryReader / Stream 类将图像读取为字节数组，其中内容只是 0 - 255 范围内的数字。但我不知道如何将它们转换为 BMP 像素？我也没有图像尺寸。否则我可以运行一个循环并将颜色手动放在该范围内。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:08:46.987

我认为.NET 不支持这种转换。但是，如果您需要 .NET 本身不支持的高级功能或其他格式，则需要第三方库，例如： http: [//www.leadtools.com/sdk/formats/image-formats.htm](http://www.leadtools.com/sdk/formats/image-formats.htm)

# search - 在 solrImportScheduler 为什么我们需要为增量导入定义 reBuildIndexBeginTime？

> ID：11429372
> 
> 赞同：0
> 
> 时间：2012-07-11T09:17:10.577
> 
> 标签：search, solr

在 wiki 页面[http://code.google.com/p/solr-dataimport-scheduler/](http://code.google.com/p/solr-dataimport-scheduler/)

```
params=/dataimport?command=delta-import&clean=false&commit=true
interval=1 
```

这条线的目的是什么

```
reBuildIndexBeginTime=03:10:00 
```

**如果我注释掉`reBuildIndexBeginTime=03:10:00`索引永远不会为增量导入运行**。什么是 reBuildIndexBeginTime=03:10:00 ，为什么我们将它用于增量导入？

我的 solr-multicore 安装中的 dataimport.properties 文件

```
#################################################
#                                               #
#       dataimport scheduler properties         #
#                                               #
#################################################

#  to sync or not to sync
#  1 - active; anything else - inactive
syncEnabled=1

#  which cores to schedule
#  in a multi-core environment you can decide which cores you want syncronized
#  leave empty or comment it out if using single-core deployment
syncCores=hkc-core

#  solr server name or IP address
#  [defaults to localhost if empty]
server=localhost

#  solr server port
#  [defaults to 80 if empty]
port=1666

#  application name/context
#  [defaults to current ServletContextListener's context (app) name]
webapp=solr-multicore

#  URL params [mandatory]
#  remainder of URL
params=/dataimport?command=delta-import&clean=false&commit=true

#  schedule interval
#  number of minutes between two runs
#  [defaults to 30 if empty]
interval=1

#reBuildIndexInterval=7200
#reBuildIndexParams=/dataimport?command=full-import&clean=true&commit=true
reBuildIndexBeginTime=00:00:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T19:23:42.523

好的，正如我所承诺的，就[在这里](http://code.google.com/p/solr-data-import-scheduler)。清洁数据导入处理程序调度程序编译源。

# python - 回调和 n 输入框小部件不起作用 Tkinter

> ID：11429379
> 
> 赞同：1
> 
> 时间：2012-07-11T09:17:31.217
> 
> 标签：python, events, callback, tkinter, ttk

在下面的代码中，我需要返回所有返回的值（但分别针对每一行），但我尝试了 lambda 并且失败了，我再也没有得到任何结果。

我还有以前工作的回调定义，当我单击一个框时，它会删除灰色的文字，因此我可以继续以黑色输入。

如果可能的话，我想在我的回调函数末尾添加输入框的值返回，而不是保持'numberwritten'和'callback'..这可能吗？

添加的框数等于 self.number_boxes 并且可以从 1 到 n。

谢谢你。

更新代码：

```
 self.numbers = [StringVar() for i in xrange(self.number_boxes) ] 

    for i in xrange(self.number_boxes):
          row = (row_number +add)
          column = self.column +i
          key = "%d/%d" % (row,column)
          self.clicked = ([False] * self.number_boxes)
          self.choice_title = Label(self.frame_table, bg=self.mycolour, borderwidth=0, width=10) 
          self.choice_title.grid(row=1, column=self.column, columnspan=self.number_boxes, sticky="nsew", padx=1, pady=1) 
          self.choice_titles.append(self.choice_title)
          self.box[key] = Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", fg='grey')
          self.box[key].grid(row=row_number+add,column=self.column+i, sticky='nsew', padx=1, pady=1) 
          self.box[key].insert(0, "Value %g" % float(i+1))
          self.box[key].bind("<Button-1>", lambda event, key=key, index=i : self.callback(event, key, index))
          self.boxes.append(self.box[key])

def callback(self, event, key, index):

    for not self.clicked[index]:
         self.box[key].delete(0, END)
         self.box[key].config(fg='black')
         self.clicked[index] = True

         print self.box[key].get() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:44:16.360

你至少有几个选择。一方面，您可以将条目小部件存储在字典或列表列表中，然后将索引传递给回调。例如：

```
self.box = {}
for i in xrange(self.number_boxes):
    row = row_number+add
    column = self.column+i
    key = "%d/%d" % (row,column)
    ...
    self.box[key] = Entry(...)
    self.box[key].bind("<Button-1>", lambda event, key=key: self.callback(event, key)) 
```

**重要的是不仅要选择某人在互联网上为您提供的方法，而且要了解问题以及解决问题所需的工具**。如果您花时间学习 lambda 的工作原理（或[functools.partial](http://docs.python.org/library/functools.html#functools.partial)）并对列表和字典等基本数据结构有基本的了解，这样的问题将不再是绊脚石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T12:21:46.683

对于对此线感到困惑的python新手（像我一样）

```
self.numbers = [StringVar() for i in xrange(self.number_boxes) ] 
```

google 的关键字是“列表理解”，这是一种以格式初始化列表的方法

> [ 表达式 for 子句 ]

这相当于片段

```
self.numbers = []
for i in xrange(self.number_boxes)
    self.numbers.append(StringVar()) 
```

换句话说，它创建了一个初始化为的列表

```
[ StringVar, StringVar, StringVar, StringVar, ... ] 
```

其值稍后设置。

# linux - CENTOS - 阻塞端口问题

> ID：11429384
> 
> 赞同：1
> 
> 时间：2012-07-11T09:17:41.733
> 
> 标签：linux, centos, port, apple-push-notifications

我正在尝试通过运行 CENTOS 的远程计算机建立与 Apple 推送通知服务的连接。不幸的是，相关端口 2195、2196 似乎有些受阻。

当我从本地 osx 远程登录时，它似乎工作正常：

```
$ telnet gateway.sandbox.push.apple.com 2195

Trying 17.149.34.66...
Connected to gateway.sandbox.push-apple.com.akadns.net.
Escape character is '^]'. 
```

但是，当我从远程服务器远程登录时，它会出现超时错误。

到目前为止，我试图禁用 iptables 但它没有奏效。

```
[root@centos01 ~]# service iptables save
[root@centos01 ~]# service iptables stop 
```

是否有任何其他组件可以阻止我与某些端口上的远程计算机的连接？

谢谢，哈达尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:00:03.537

CentOS 通常在 IP 表中有许多严格的规则。尝试添加规则以允许访问服务器中的端口。“停止”服务器上的 IP 表的想法根本不是一个好主意。

CentOS 还实现了 SE-Linux，这基本上是一种高级安全增强。SE-Linux 模块可能正在阻止请求。

你可以参考这个：[http ://wiki.centos.org/HowTos/SELinux](http://wiki.centos.org/HowTos/SELinux)

只是为了测试您的问题是否是由 SE 模块引起的，您可能希望通过执行以下操作暂时禁用它的执行：

```
 $ echo 0> /selinux/enforce 
```

确保在测试后重新启用强制执行。

```
 $ echo 1> /selinux/enforce 
```

# javascript - 提交功能不起作用

> ID：11429386
> 
> 赞同：0
> 
> 时间：2012-07-11T09:17:51.827
> 
> 标签：javascript

我的 onsubmit 功能不起作用。

我的 PHP 文件有两种形式。两个表单标签都有一个 onsubmit 属性，该属性链接到同一个 javascript 文件。第一个表单的 onsubmit 正在工作。第二种形式调用的函数已简化为：

```
function UserDataCheck()
{
   return false;
} 
```

表单标签是

```
form name='user_form' method='post' onsubmit='return UserDataCheck();' 
```

此标记包含在 <> 和双引号中，并在 PHP 文件中回显。

请帮忙。这真让我抓狂！早些时候我在 UserDataCheck() 中进行了一些数据检查，但我把所有这些都去掉了，看看我是否可以使用 onsubmit 来阻止用户提交！没有成功。

这里有更多代码！

```
 echo "<html>"; 
    echo "<head>"; 
    echo "<title>Survey Form</title>"; 
    echo "<link link rel='stylesheet' href='examples.css' type='text/css'>"; 
    echo "</head>";
echo "<script src='validation.js'></script>"; 
echo "<body topmargin='20', leftmargin='20', rightmargin='20', style='background-color:beige; font-family:calibri;'>"; 
echo "<img src='CSE Global.jpg' width='250' height='70' align='right' />";
//--------------------------------------------------------------------- 
// Firstly, we determine who is using this system 
// Check $_GET['dex'] for a value, if provided, then it's the user 
// if not, then it's the administrator (see my notes below the code for 
// more info) 
//--------------------------------------------------------------------- 

"<input type='text' name='dex' length='50'>";
"<input type='boolean' name='sub' length='1'>";
if ($_GET['dex']=="") {  
    //--------------------------------------------------------------------- 
    // $_GET['dex'] is empty so we can presume this is the Admin 
    //--------------------------------------------------------------------- 
    echo "<p style='font-family:cambria;font-size:35px;'> WELCOME ADMIN!</p>"; 

    //--------------------------------------------------------------------- 
    // We now check to see if the form has been submitted or not ... 
    // To do this, we check if the variable 'sub' is in the $_POST array 
    //--------------------------------------------------------------------- 
    if ($_POST['sub']!=1) { 
        //--------------------------------------------------------------------- 
        // The form has not been submitted already so present the "admin form" 
        //---------------------------------------------------------------------

// check that they entered an amount tested, an amount passed,
// and that they didn't pass units than they more than tested

        echo "<form name='admin_form' method='post' onsubmit='if(!AdminDataCheck()) return      false;'>"; 
        echo "<p><label>Scope of Service <label style='color:red'><strong>*</strong></label>    <br/></label> <input type='text' name='scope' length='50' id='ScopeofService' onblur='checkScopeofService()'/><label id='labelScopeofService'></label></p>"; 
```

随后是更多标签和文本字段。

然后关闭表单标签！

```
echo "<input type='hidden' name='dex' value={$dex}>"; 
            echo "<input type='hidden' name='sub' value=1>"; 
            echo "<input type='SUBMIT' style='background-color:white' name='submit' value='SUBMIT'>"; 
            echo "</form>"; 
```

这是validation.js中的函数

```
function AdminDataCheck()
{
var SoS = document.getElementById('ScopeofService').value;
var PNumber = document.getElementById('ProjectNumber').value;
var numericExp = /^[0-9]+$/;
var alphaExp = /^[A-Za-z ]+$/; 
var Email = document.getElementById('Email').value;
var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\-]+\.[a-zA-z0-9]{2,4}$/;

if (!(SoS.match(alphaExp)))
{   
alert("Invalid Scope");
return false;
}
else if(!(PNumber.match(numericExp)))
{
alert("Invalid Project Number.");
return false;
}
else if(!(Email.match(emailExp)))
{
alert("Invalid Email.");
return false;
}
else
{
return true;
}
} 
```

让我强调一下，几分钟前这是可行的，我没有做任何更改，只是重新启动了浏览器和服务器！它停止工作。这真是令人沮丧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:21:24.053

尝试这个：

```
onsubmit='if(!UserDataCheck()) return false;' 
```

# symfony - 在控制器中使用 Twig 扩展

> ID：11429388
> 
> 赞同：15
> 
> 时间：2012-07-11T09:17:58.960
> 
> 标签：symfony, twig, slug

我在 Twig 扩展中有一个 slugify 方法，我想在某些情况下在控制器中使用它，fe 带有重定向。
有一个简单的方法吗？
我如何从控制器中的 Twig Extensions 访问功能？

或者我是否必须将 slugify 方法作为助手才能在代码和树枝中使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T12:46:40.433

# 从树枝和控制器访问功能/逻辑

我认为有两种解决方案，都应该使用`Twig_Function_Method`该类。

## 1

已经发布的第一个解决方案`gilden`是将逻辑封装到服务中并为 Twig Extension 制作包装器。

## 2

另一种解决方案是仅使用 Twig Extension。Twig Extensino 已经是一项服务，您必须使用特殊的`<tag name="twig.extension" />`. 但它也是一个服务，你可以通过服务容器来抓取哪个实例。也可以注入其他服务：

所以你有你的树枝扩展/服务：

```
class MyTwigExtension extends \Twig_Extension
{
    private $anotherService;

    public function __construct(SecurityService $anotherService= null)
    {
        $this->anotherService = $anotherService;
    }

    public function foo($param)
    {
       // do something
       $this->anotherService->bar($param);
    }

    public function getFunctions()
    {
        // function names in twig => function name in this calss
        return array(
            'foo' => new \Twig_Function_Method($this, 'foo'),
        );
    }

    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
        return 'my_extension';
    }
} 
```

services.xml 看起来像这样

```
<service id="acme.my_extension" class="Acme\CoreBundle\Twig\Extension\MyTwigExtension">
        <tag name="twig.extension" />
        <argument type="service" id="another.service"></argument>
</service> 
```

要从您的控制器访问服务，您只需使用以下命令：
`$this->container->get('acme.my_extension')`

**注意**与普通服务的唯一区别是，twig 扩展不是延迟加载的（[http://symfony.com/doc/current/cookbook/templating/twig_extension.html#register-an-extension-as-a-service](http://symfony.com/doc/current/cookbook/templating/twig_extension.html#register-an-extension-as-a-service) )

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T11:30:34.837

我建议创建一个通用服务并将其注入 Twig 扩展。扩展将充当服务的包装器。

```
namespace Acme\Bundle\DemoBundle\...;

class MyService
{
    public function myFunc($foo, $bar)
    {
        // some code...
    }

    // additional methods...
} 
```

* * *

**编辑**- 正如 Squazic 所提到的，第一个参数必须实现`Twig_ExtensionInterface`. 一个不优雅的解决方案是将方法添加到`MyTwigExtension`，然后调用服务中的相应方法。

```
namespace Acme\Bundle\DemoBundle\Twig\Extension;

class MyTwigExtension extends \Twig_Extension
{
    protected $service;

    public function __construct(MyService $service)
    {
        $this->service = $service;
    }

    public function getFunctions()
    {
        return array(
            'myTwigFunction' => new \Twig_Function_Method($this, 'myFunc'),
            'mySecondFunc'   => new \Twig_Function_Method($this, 'mySecondFunc'),
        );
    }

    public function myFunc($foo, $bar)
    {
        return $this->service->myFunc($foo, $bar);
    }

    // etc...

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-01T10:53:03.203

或者另一种方法是通过树枝获得它......（这是在 Symfony 2.7 上）

```
$twigExt = $this->container->get('twig')->getExtension(TwigExtensionClassName::class); 
```

因此，如果您的 Twig 扩展类称为“MyFabulousTwigExt”，那么您将调用

```
$twigExt = $this->container->get('twig')->getExtension(MyFabulousTwigExt::class); 
```

当上述方法无效时，这对我有用（我们的扩展也不是服务）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-04T18:48:41.973

我发现这是直接调用扩展的最佳方式（在 Symfony 4.4 中测试）：

```
use Twig\Environment;

private Environment $twig;

public function __construct(Environment $twig)
{
    $this->twig = $twig;
}

public function foo()
{
    $extensionOutput = $this->twig
        ->getExtension(YourExtension::class)
        ->yourExtensionFunction(
            $this->twig,
            $value
        );
    ...
} 
```

如果您不想（或不能）打破 Twig 扩展的逻辑，这很有用。

# java - Java中的奇怪错误

> ID：11429392
> 
> 赞同：2
> 
> 时间：2012-07-11T09:18:05.200
> 
> 标签：java, jar, compilation, classpath, javac

谁能说出为什么会出现此错误，因为如果您将工作放在终端中？这是代码。

我使用此代码编译文件夹中的所有文件。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

public class Compiles {
    public static void main(String[] args) {
            List<String> compileFileCommand = new ArrayList<String>();
            List<String> files = new FileList().getListFile();
            List<String> libs = new ListLib().getListFile();
            compileFileCommand.add("/opt/java/bin/javac");

            for(int i = 0; i < files.size(); i++)
            {

                if(files.get(i).equals("Compiles.java"))
                    continue;

                if(files.get(i).equals("Compile.java"))
                    continue;

                String fileJar = new CreateFolder().currentData() + "/" + files.get(i) + " -cp lib/";

   //                       for (int y = 0; y < libs.size(); y++)
   //                       {
  //                            fileJar += libs.get(y) + ":";
  //                            if(libs.size() -1 == y)
  //                                fileJar += libs.get(y);  
  //                        }

                    fileJar += libs.get(0);

                    compileFileCommand.add(fileJar);

                    Process compile_process;
                    try {
                            compile_process = new ProcessBuilder(compileFileCommand)
                                            .redirectErrorStream(true).start();
                    } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                            return;
                    }
                    try {
                            compile_process.waitFor();
                    } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                    }

                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                                    compile_process.getInputStream()));
                    String line = null;
                    try {
                            line = reader.readLine();
                    } catch (IOException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                    }
                    while (line != null) {
                            System.out.println(line);
                            try {
                                    line = reader.readLine();
                            } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                            }
                    }
            }
    }
} 
```

错误如下

```
javac: invalid flag: temp_11.07.2012/CreateFolder.java -cp lib/gdata-media-1.0.jar
Usage: javac <options> <source files>
use -help for a list of possible options 
```

这些是数据示例，这就是给出的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:20:59.287

您是否尝试将“-cp”选项放在要编译的文件名之前？

如果不是这样，给我们完整的命令行。

# javascript - 如何在页面加载时以 Accordion 类型默认隐藏所有 div？

> ID：11429394
> 
> 赞同：0
> 
> 时间：2012-07-11T09:18:14.523
> 
> 标签：javascript, jquery

我从下面给出的这个站点中获取了这个示例，该站点在 IE 中无法完美运行。我想隐藏页面加载时的所有 div，但它仍然显示在 IE 中打开的第一个 div，而它在 FF 和其他最新浏览器中工作正常。

[http://docs.jquery.com/UI/Accordion](http://docs.jquery.com/UI/Accordion)

**collapsible: true - 在****IE**中不工作

 **以下是我当前使用此示例的站点。

[http://new.cgwealth.com/staff](http://new.cgwealth.com/staff)

请帮我解决这个问题

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:28:28.297

`active`为活动元素添加选择器。设置为 false 以在开始时不显示。需要可折叠：是的。

```
$('.accordion').accordion({
    active: false,
    collapsible: true            
}); 
```**

# java - MySQL 流量压缩与连接池

> ID：11429396
> 
> 赞同：0
> 
> 时间：2012-07-11T09:18:21.153
> 
> 标签：java, mysql, jdbc, compression, connection-pooling

我正在尝试使用 Commons Pool 和 DBCP 实现连接池。我能够建立与数据库的连接，并且一切都按预期工作，除了流量压缩。
这是我的配置：
- Commons DBCP 1.4
- Commons Pool 1.6
- MySQL Connector Java 5.1.21
- Windows Server 2008 上的 MySQL Server 5.5
- Java 1.6

请考虑使用此代码段来实例化连接池：

```
private void setupDataSource(Hashtable<String, String> data) {
    try
    {
        GenericObjectPool<Connection> pool = new GenericObjectPool<Connection>();
        pool.setMinIdle(5);
        pool.setMaxActive(-1);
        pool.setTestOnBorrow(true);
        pool.setTimeBetweenEvictionRunsMillis(5000);
        pool.setMinEvictableIdleTimeMillis(300000);
        Properties props = new Properties();
        props.setProperty("user", "root");
        props.setProperty("password", "password");
        props.setProperty("useCompression", "true");

        ConnectionFactory cf = new DriverConnectionFactory(new com.mysql.jdbc.Driver(),
                    "jdbc:mysql://" + ip + ":" + port,
                    props);

        KeyedObjectPoolFactory<String, GenericObjectPool<Connection>> kopf =new GenericKeyedObjectPoolFactory<String, GenericObjectPool<Connection>>(null, 20, GenericObjectPool.WHEN_EXHAUSTED_GROW, 20, true, false);
        PoolableConnectionFactory pcf =  new PoolableConnectionFactory(cf,
                pool,
                kopf,
                "Select 1;",
                false,
                true);

        PoolingDriver pd = new PoolingDriver();
        pd.registerPool("MyPool", pool);
    }catch (Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

然后，要获得连接，我使用：

```
Connection conn = java.sql.DriverManager.getConnection("jdbc:apache:commons:dbcp:MyPool"); 
```

首先，除了比较 MSQL 工具中的传出网络流量之外，还有其他方法可以检查压缩是否有效？

为了启用压缩需要改变什么？

谢谢你的帮助

库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T05:00:24.103

现在，差不多一年后，我测试了最新的Connector/J（5.1.25），问题不再出现。由于我没有更改任何内容，因此连接器 5.1.21 看起来有点问题。顺便说一句，发行说明中没有真正的错误修复，它们只是“改进了压缩行为”。

# android - 是否可以创建包含 android 功能的 jar？

> ID：11429397
> 
> 赞同：0
> 
> 时间：2012-07-11T09:18:29.490
> 
> 标签：android, jar, obfuscation, android-library

正如主题所示，我想创建一个 jar 库，它使用一些 android 函数（无布局）并将包含在 Android 项目中。这可能吗？怎么做？根据我所做的研究，我设法包含了一个使用纯 Java (JAVA SE 1.6) 的简单 jar 文件，但是当我尝试创建一个 jar 文件时，当我尝试运行 Andoid 应用程序时遇到以下异常：
致命异常： main
java.lang.NoClassDefFoundError: mylib.pleasework.amen

我尝试在我的库中包含 android.jar 并删除 java 库，以便针对 android sdk 构建 jar 文件，但它不起作用。
我尝试将 jar 文件包含在 /libs 文件夹下，因为据说这是从 ADT v17 及更高版本在 android 项目中导入 jar 的正确方法，但这也不起作用。
我要创建的 jar 将不使用任何资源（xml 布局、strings.xml），只使用 Log.d 和 WifiManager。
我知道 Android 库项目，但我的库源是敏感的，我担心如果暴露在 Android 库项目中会不安全。我正在考虑创建一个 jar 并使用 ProGuard ( [http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html) ) 对其进行混淆。我想我提到了一切。任何帮助将不胜感激。

谢谢，
托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:58:34.203

> 正如主题所示，我想创建一个使用一些 android 函数（无布局）的 jar 库，并将其包含在 Android 项目中。这可能吗？怎么做？

使用`jar`命令或`<jar>`Ant 任务。我确信有一些方法可以从 Eclipse 中导出 JAR，但我个人从未使用过它们。

例如，在[这个 GitHub 存储库](https://github.com/commonsguy/cwac-wakeful)中，我有一个可重用的组件和一个作为示例应用程序的子项目。我`build.xml`的 repo 包含以下自定义任务：

```
<target name="jar" depends="debug">
    <jar
        destfile="bin/CWAC-WakefulIntentService.jar"
        basedir="bin/classes"
    />
</target> 
```

这会生成一个 JAR 文件，其他 Android 应用程序可以通过添加到它们的`libs/`目录来使用该文件。

> 我知道 Android 库项目，但我的库源是敏感的，我担心如果暴露在 Android 库项目中它会不安全。

It won't be safe exposed as a JAR, then, either. You can create an Android library project for public consumption that replaces the `src/` tree's contents with a compiled JAR in `libs/` in the library.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:23:25.177

The way I did it in the end was: to create an Android Library project (check isLibrary checkbox in project properties) export it through Eclipse (right click on the project->export->jar file, careful to deselect all resources - res folder, androidmanifest.xml, *.png etc) and put it in the project you want by importing it under /libs folder.
I don't know if this is the best solution but it worked for me.
Used ADT r20, Eclipse 3.7.1, Android api level 7

# unix - 如何在 unix 中使用 ghostscpt 或其他解决方案获取多页 tiff 和 pdf 的页面大小？

> ID：11429400
> 
> 赞同：2
> 
> 时间：2012-07-11T09:18:36.653
> 
> 标签：unix, pdf, imagemagick, tiff, ghostscript

我需要在 unix 工具中获取多页 tiff 和 pdf 中每一页的信息。一些解决方案给出了 pdf_info.ps （我在[这个主题](https://stackoverflow.com/questions/2943281/using-ghostscript-to-get-page-size)中给出了答案），但它只适用于 pdf。请帮帮我。

另外我怎么不能允许打印大于 A4 格式的文件？谢谢！

**TIFF 的解决方案：**

*   对于 tiff（也是多页 tiff），使用 tiffinfo lib（LibTIFF 的一部分）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:59:07.233

您可以使用`identify`ImageMagick 包中的命令来获取页面大小。它可以一次性使用不同的文件（即使是不同的文件类型）：

```
identify multipage.* 
```

样本输出：

```
multipage.pdf[0] PDF 421x595 421x595+0+0 16-bit Bilevel DirectClass 31.6KB 0.000u 0:00.000
multipage.pdf[1] PDF 421x595 421x595+0+0 16-bit Bilevel DirectClass 31.6KB 0.000u 0:00.000
multipage.pdf[2] PDF 421x595 421x595+0+0 16-bit Bilevel DirectClass 31.6KB 0.000u 0:00.000
multipage.pdf[3] PDF 421x595 421x595+0+0 16-bit Bilevel DirectClass 31.6KB 0.000u 0:00.000
multipage.tif[0] TIFF 1728x2156 1728x2156+0+0 1-bit Bilevel DirectClass 3.02KB 0.000u 0:00.000
multipage.tif[1] TIFF 1728x2156 1728x2156+0+0 1-bit Bilevel DirectClass 3.02KB 0.000u 0:00.000
multipage.tif[2] TIFF 1728x2156 1728x2156+0+0 1-bit Bilevel DirectClass 3.02KB 0.000u 0:00.000 
```

有 1 个 4 页的 PDF（每个大小为 A5 == 421x595 pt）和一个 3 页的 TIFF（1728x2156 像素的回显页）。

您甚至可以自定义输出格式`identify`以满足您的需求：

```
identify -format "%f: Page-Number: %p --  Width: %W -- Height: %H\n" multipage.* 
```

现在输出：

```
multipage.pdf: Page-Number: 0 --  Width: 421 -- Height: 595
multipage.pdf: Page-Number: 1 --  Width: 421 -- Height: 595
multipage.pdf: Page-Number: 2 --  Width: 421 -- Height: 595
multipage.pdf: Page-Number: 3 --  Width: 421 -- Height: 595
multipage.tif: Page-Number: 0 --  Width: 1728 -- Height: 2156
multipage.tif: Page-Number: 1 --  Width: 1728 -- Height: 2156
multipage.tif: Page-Number: 2 --  Width: 1728 -- Height: 2156 
```

请注意，页面/图像编号的默认输出是从 0 开始的。

* * *

**更新：**

我应该已经在这个答案的第一个版本中提到：

1.  `identify`返回 PDF 的页面信息时可能会相当慢（多页 TIFF 可以）。

2.  对于 PDF 页面信息，您最好使用`pdfinfo -f 1 -l 33 file.pdf`. 这将返回有关 PDF 的各种元数据，以及从 1 到 33 范围内的每个页码的大小（如果您使用的是 Poppler 的最新版本，`pdfinfo`而不是 XPDF 的！），那么您甚至可以获得旋转状态页）。

所以：为工作使用正确的工具：对于多页 TIFF，它是`identify`，对于 PDF，它是`pdfinfo`.

# java - CheckBox 死循环监听器

> ID：11429401
> 
> 赞同：0
> 
> 时间：2012-07-11T09:18:42.970
> 
> 标签：java, swing, listener, jcheckbox, itemlistener

我有以下听众：

```
 mListener = new ItemListener() {

            public void itemStateChanged(ItemEvent e) {
                if (((JCheckBox) e.getSource()).isSelected()) {
                    setRequired(true);
                } else {
                    setRequired(false);
                }
                getTableSteps().repaint();
            }
        };

        myCheckBox.addItemListener(mListener);

        for (int i = 0; i < mTableSteps.getRowCount(); i++) {
            ((JCheckBox) mTableSteps.getCellRenderer(i, 0)).addItemListener(new ItemListener() {

                public void itemStateChanged(ItemEvent e) {
                    myCheckBox.setSelected(false);
                }
            });
        } 
```

如您所见，myCheckBox 是一个复选框，如果它被修改，它会修改 mtablesteps 第一列中的一些复选框（这是在 setRequired 方法中完成的）。此外，如果修改了 mtablesteps 列 0 中的复选框之一，它们应该将 myCheckBox 设置为不被选中。

现在的问题是，当我第一次选择 myCheckBox 时，它会触发侦听器并从 mTab​​leSteps 中选择一些复选框。但是当这些复选框被选中时，它们也会触发它们的监听器并取消选择 myCheckBox。因此， myCheckBox 总是被取消选中。

我希望这是有道理的。任何有关如何避免这种情况的建议表示赞赏。

To be more even more clear, what I'm trying to achieve is have a listener for myCheckBox which when the checkbox is selected it will select some of the checkboxes from the first column of mTab​​leSteps. 而且，如果我从表中选择/取消选择一个复选框，它会将 myCheckBox 置于未选中状态。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:42:40.343

You need some kind of state flag that you can use to tell the child listeners if they should process the event of not.

```
mListener = new ItemListener() {

    public void itemStateChanged(ItemEvent e) {
        ignoreUpdates = true
        try {
            if (((JCheckBox) e.getSource()).isSelected()) {
                setRequired(true);
            } else {
                setRequired(false);
            }
            getTableSteps().repaint();
        } finally {
            ignoreUpdates = false;
        }
    }
}

myCheckBox.addItemListener(mListener);

for (int i = 0; i < mTableSteps.getRowCount(); i++) {
    ((JCheckBox) mTableSteps.getCellRenderer(i, 0)).addItemListener(new ItemListener() {
        public void itemStateChanged(ItemEvent e) {
            if (!ignoreUpdates) {
                myCheckBox.setSelected(false);
            }
        }
    });
} 
```

Hope that helps

# logic - 简化布尔逻辑

> ID：11429402
> 
> 赞同：1
> 
> 时间：2012-07-11T09:18:43.197
> 
> 标签：logic, boolean-logic

简单的问题，能不能按照以下逻辑

```
A && !(A && B) 
```

简化成这个？

```
A && !B 
```

如果不能，它可以简化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:23:11.277

简单的回答：是的。[您可以使用真值表](http://en.wikipedia.org/wiki/Truth_table)检查这一点：

```
A  B  X
-  -  -
0  0  0
0  1  0
1  0  1
1  1  0 
```

即只有当A 为真而B 为假时，X 才为真。

如果你真的想要，你也可以用代数方式证明这一点：

```
 A && !(A && B)

= A && (!A || !B)           ; de Morgan

= (A && !A) || (A && !B)

= 0 || (A && !B)            ; X && !X is always FALSE

= A && !B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:23:23.680

是的，它绝对可以：如果`A`为假，则表达式为假，如果`A`为真，`A` *则为*真，如果为假，则表达式为真`B`。

# c - 如何使用 TOS 设置消息优先级？

> ID：11429403
> 
> 赞同：4
> 
> 时间：2012-07-11T09:18:43.603
> 
> 标签：c, linux, sockets, network-programming

IP 标头具有服务类型 (TOS) 字段。可用于设置Classful Queuing Disciplines，即PRIO。

我已经测试了以下代码。

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <stdio.h>
#include <unistd.h>

int main(int argc, char**argv)
{
   int listenfd, connfd, optval;
   struct sockaddr_in servaddr, cliaddr;
   socklen_t clilen;
   pid_t     childpid;
   char      mesg[16];

   listenfd = socket(AF_INET, SOCK_STREAM, 0);

   bzero(&servaddr, sizeof(servaddr));
   bzero(mesg, 0, sizeof(mesg));
   servaddr.sin_family = AF_INET;
   servaddr.sin_addr.s_addr=htonl(INADDR_ANY);
   servaddr.sin_port = htons(32000);
   bind(listenfd,(struct sockaddr *)&servaddr, sizeof(servaddr));

   listen(listenfd, 1024);

   for (;;)
   {
      clilen = sizeof(cliaddr);
      connfd = accept(listenfd, (struct sockaddr *)&cliaddr, &clilen);

      if ((childpid = fork()) == 0)
      {
         close(listenfd);

         for (;;)
         {
            optval = 0x28;
            setsockopt(cliaddr, IPPROTO_IP, IP_TOS, &optval, sizeof(optval));
            strcpy(mesg, "tos=0x28");
            sendto(connfd, mesg, sizeof(mesg), 0, (struct sockaddr *)&cliaddr, sizeof(cliaddr));
            sleep(2);

            optval = 0x58;
            strcpy(mesg, "tos=0x58");
            setsockopt(cliaddr, IPPROTO_IP, IP_TOS, &optval, sizeof(optval));
            sendto(connfd, mesg, sizeof(mesg), 0, (struct sockaddr *)&cliaddr, sizeof(cliaddr));
            sleep(2);
         }

      }

      close(connfd);
   }
} 
```

设置了 TOS 字段的数据包可以发送成功。但是我该怎么做才能使消息优先级生效？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:40:48.197

TOS 是对路由器的指令。除非路径中的所有路由器都同意它的含义，将它完整地传递给下一个路由器，并自己做一些事情，否则它没有效果。他们有吗？如果路径中没有路由器，则根本没有效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-23T16:27:55.223

TOS 字段的一个重要特性是沿途的路由器可以根据 TOS 字段对数据包进行优先级排序。

使用 TOS 字段的另一个重要作用是在本地机器内。例如，在 Linux 内核中，网络律师有一个叫做[流量控制](http://wiki.linuxwall.info/doku.php/en:ressources:dossiers:networking:traffic_control)的东西，它可以限制或重新排序传出的 IP 流量。[Linux 2.2+](http://lartc.org/manpages/tc.txt)上的默认行为是称为*pfifo_fast*的东西，它包含三个单独的队列（或带）用于传出流量。每个队列的优先级都比下一个队列高，这意味着队列 0 的所有流量都在队列 1 的任何流量被推送到网络之前被推送。TOS 字段决定了传出 IP 数据包将放置在哪个队列中。有关更多信息，请查看[此处](http://linux.die.net/man/8/tc-pfifo_fast)。小心使用 TC 功能，您可以轻松地瘫痪计算机。我建议使用虚拟机。

我不确定非 Linux 平台是否存在这种行为。

# asp.net-mvc-3 - 如何在控制器级别获取模型列表中项目的完整 Html 字段名称？

> ID：11429404
> 
> 赞同：1
> 
> 时间：2012-07-11T09:18:44.027
> 
> 标签：asp.net-mvc-3, model-view-controller, validation, modelmetadata

*第一篇文章

我有一个必须使用的 Ajax 帖子的 JQuery 错误处理程序，它根据该元素的字段名称向 html 附加一个错误，如下所示

```
$(document).ready(function () {
function myHandler(e, error) {
    var tag = "";
    if (error.Success == true) { $('.field-validation-error').remove(); return; } // if success remove old validation and don't continue
    if (error.Success == false) { $('.field-validation-error').remove(); } // if success remove old validation and continue
    for (i = 0; i < error.Errors.length; i++) {
        var t = error.Errors[i];
        //get error key and assign it to id
        tag = t.Key;
        //clear down any existing json-validation
        for (j = 0; j < t.Value.length; j++) {
            //this part assumes that our error key is the same as our inputs name
            $('<span class="field-validation-error">' + t.Value[j].ErrorMessage + '</span>').insertAfter('input[name="' + tag + '"], textarea[name="' + tag + '"], select[name="' + tag + '"], span[name="' + tag + '"]');
        }
    }
}

$.subscribe("/******/errors", myHandler);

}); 
```

在我尝试在控制器级别添加自定义模型状态错误之前，这与我们的流利验证设置完美开箱即用，如下所示：

```
foreach (var item in model.Locations)
        {
            var cityRepos = new CityRepository(NhSession);
            var cityItem = cityRepos.GetAll().FirstOrDefault(o => o.Country.Id == item.CountryID && o.Name == item.City);
            if (cityItem == null)
                item.City
                ModelState.AddModelError("City", string.Format(@"The city ""{0}"" was not found, please ensure you have spelt it correctly. TODO: add a mail to link here with city not found subject", item.City));
        } 
```

问题是modelstate错误需要附加到html字段名称而不是我的魔术字符串“City”。html name 属性是 MVC 生成的，看起来像这样：

```
 name="Locations[0].City" 
```

我之前在html助手中遇到过这个问题并使用了方法：

```
.GetFullHtmlFieldName(
                                                 ExpressionHelper.GetExpressionText(propertySelector)
                                             ); 
```

在那种情况下解决了我的问题。

我的问题是我可以在 MVC 发布操作中对我的模型属性使用此方法来获取它来自的 html 名称属性吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:50:20.810

好的，所以这并不理想，但我已经实现了这个 Helper 方法，直到我找到一个不涉及魔术字符串的更好的解决方案：

```
public static class ModelStateErrorHelper
{
    public static string CreateNameValidationAttribute(string collectionName, int index, string propertyName)
    {
        string template = "{0}[{1}].{2}";
        return string.Format(template, collectionName, index.ToString(), propertyName);
    }

} 
```

# jquery - Jquery响应式布局浮动动画

> ID：11429406
> 
> 赞同：0
> 
> 时间：2012-07-11T09:18:57.057
> 
> 标签：jquery, animation, layout, css-float, position

我正在寻找一些东西，但我不知道它叫什么，也不知道在哪里可以找到 necceracry 信息。

[http://ricklancee.com/jquery-layout](http://ricklancee.com/jquery-layout)

^ 所以我现在得到的是一个带有 100% 宽度（当前浏览器宽度）的包装器的网站，在其中我放置了一些固定为 (240px) 和浮动：左的元素；当我把窗户变小时，他们会把自己放在彼此的下方。

当他们漂浮在彼此下方 - 并返回 - 时，我希望他们做的是动画到那个位置。

[http://masonry.desandro.com/](http://masonry.desandro.com/)显示了一个示例，当您调整窗口大小时，元素将浮动/动画到新位置。

谁能告诉我这是怎么做的，这种技术叫什么或者我在哪里可以找到这是怎么做的？

我不使用哪个插件，只是出于教育目的自己编写脚本。

非常感谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:22:10.453

使用浮动浏览器可以处理这类事情。

如果你想自己做，它会变得复杂。

您将需要绝对定位 div。`position: absolute;`- 并确保父 div 有`position: relative;`然后添加一个监听器来监听 resize 事件，并在调用 resize 事件时计算 div 的新位置。

见：[http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

实际上，将他们动画化到他们的新家很容易 - 只是`$(....).animate({top: xx, left: xx})`。困难的部分将是计算他们应该去哪里。

不过当然可行。

当您绑定 resize 事件时使用`.one()`，因此您只会被调用一次。然后，当您被调用时，添加 a`setTimeout()`以将实际计算延迟 1/2 秒。然后计算位置并为其设置动画。

只有当动画完成后，再次绑定事件。您不想在此之前绑定，否则您将同时运行多个动画。（确保只绑定其中一个动画，而不是所有动画，因为您将拥有多个动画 div。）

# javascript - 过滤未找到的网址

> ID：11429407
> 
> 赞同：0
> 
> 时间：2012-07-11T09:19:00.863
> 
> 标签：javascript, jquery

```
var url_array = Array(
    'url1.html',
    'url2.html',
    'url3.html',
    'url4.html',
    'url5.html'
); 
```

如何从数组中过滤无效/未找到/404 url​​。

应该有一个函数使用该 url_array 并返回一个具有有效/找到的 url 的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:23:10.843

[链接](http://addyosmani.com/blog/catch404/) 这是将捕获 404 错误的库...

# javascript - 从文本中标记几个单词

> ID：11429410
> 
> 赞同：2
> 
> 时间：2012-07-11T09:19:08.727
> 
> 标签：javascript, jquery, html, css

我们有一个 HTML 页面。是否可以（通过鼠标）选择段落中的几个单词，获取对这些选定单词的引用并以`<span>...</span>`编程方式通过标签封装它们？我们可以使用 jQuery 还是 HTML5/CSS3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:00:46.890

您可以使用`mouseup`处理程序并使用`getSelection`. 假设您有一个名为 的 div `testtagging`，那么这是一种向该 div 中的选定文本添加跨度的方法。看到[这个 jsfiddle](http://jsfiddle.net/KooiInc/MaUxM)。

```
$('#testtagging').on('mouseup',tag);

function tag(e){
    tagSelection('<span style="color:red">$1</span>');
}

function tagSelection(html) {
    var range, node;
    if (document.selection && document.selection.createRange) {
     //IE
     range = document.selection.createRange();
     range.pasteHTML(html.replace(/\$1/,range.text));
     return true;
    }
    if (window.getSelection && window.getSelection().getRangeAt) { 
     //other browsers
     range = window.getSelection().getRangeAt(0);
     node = range.createContextualFragment(
                  html.replace(/\$1/,range.toString())
            );
     range.deleteContents();     
     range.insertNode(node);
    } 
    return true;
}​ 
```

[**编辑**] 也调整为与 IE 一起使用。JsFiddle 也改编了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:44:20.540

[JSFiddle working example](http://jsfiddle.net/fedosov/rsTkC/2/)

Propose to wrap all paragraph words into `span` elements:

```
var r = /(\S+)/ig;
var text = $("p").text();
$("p").html(text.replace(r, "<span class='w'>$1</span>")); 
```

Then bind hover/click events:

```
$("p > .w").on("hover", function()
{
    $(this).toggleClass("hover");
})
.on("click", function()
{
    $(this).toggleClass("selected");
}); 
```

If you want to parse words from selected text range, you should use `window.getSelection()`.

Refer to [this](https://stackoverflow.com/questions/985272/jquery-selecting-text-in-an-element-akin-to-highlighting-with-your-mouse) question or ask me to adapt this code.

# java - 使用 servlet 处理时如何使用 javascript 设置隐藏变量的值？

> ID：11429412
> 
> 赞同：0
> 
> 时间：2012-07-11T09:19:10.810
> 
> 标签：java, javascript, jsp, servlets

嗨，这就是我如何通过 java 脚本设置值是隐藏变量，

```
function logintosystem(){
                document.forms["frmLogon"].funtiontype.value="logon";
                document.forms["frmLogon"].submit();
            } 
```

这就是我的jsp页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%
    String path = "", userName = "", message = "", userType = "";
    path = request.getContextPath();
     if(request.getAttribute("message")!=null) message =(String)request.getAttribute("message");
%>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="ACCT"/>
        <meta name="keywords" content="acct,accesscardcomparision" />
        <meta name="author" content="slingmedia" />
        <link rel="stylesheet" type="text/css" href="acct.css" title="andreas09" media="screen,projection" />
        <title>ACCT</title>
        <script>
            function logintosystem(){
                document.forms["frmLogon"].funtiontype.value="logon";
                document.forms["frmLogon"].submit();
            }

        </script>
    </head>
    <body>

        <div id="container">
            <div id="sitename">
                <h1>ACCT</h1>
                <h2>Access Card data comparision with Leave portal</h2>
            </div>
            <div id="mainmenu">
                <ul>
                    <%
                        if (userName.length() > 0 || !userName.equals(null) || !userName.equals("")) {
                    %>
                    <li><a href="#" class="current" >Welcome <%=userName%></a></li>
                    <%}%>
                    <%
                        if (userName.length() > 0 && userType.length() > 0) {
                    %>
                    <li><a href="#">Tempcard</a></li>
                    <%}%>
                    <%
                        if (userType.equals("HR")) {
                    %>
                    <li><a href="#">Report</a></li>
                    <%}%>
                    <%
                        if (userName.length() > 0 && userType.length() > 0) {
                    %>
                    <li><a href="#">Logout</a></li>
                    <%}%>
                </ul>
            </div>
            <div id="wrap">
                <div id="content">

                    <h1>Please Enter your code</h1>
                     <form name="frmLogon" id="frmLogon" action="LogonServlet" method="post">
                    <table align="center" border="0" cellpadding="0" cellspacing="0"  width="100%">
                        <tr align="center" valign="middle">
                            <td width="100%" align="center" valign="middle">
                                <table width="100%" align="left" border="0" cellspacing="0" cellpadding="2" >
                                    <tr>
                                        <td width="5%" align="left">&nbsp;</td>
                                        <td width="35%" align="right">ACCT Code</td>
                                        <td width="20%"><input type="text" name="acctcode" id="acctcode" class="inputBoxes" /></td>
                                        <td width="15%" align="left"><input type="button" class="submitButton" value="Logon" onclick="logintosystem();"/></td>
                                        <td width="15%">&nbsp;</td>
                                        <td width="10%" align="center">&nbsp;</td>
                                    </tr>
                                    <br></br>
                                </table>
                            </td>
                        </tr>
                    </table>
                         <input type="hidden" name="funtiontype" id="funtiontype" value=""/>
                 </form>
                    <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFF0">
                        <tr>
                            <td id="message"  align="center">
                                <b><font  color="brown" size="3"><%=message%></font></b>
                            </td>
                        </tr>
                    </table>
                    </td>
                    </tr>
                    </table>
                </div>
                <div class="clearingdiv">&nbsp;</div>
            </div>
        </div>

        <div id="footer">
            <p>&copy; 2012 <a href="#">slingmedia</a> | ACCT&nbsp;&nbsp;&nbsp;<a href="http://slingmedia.com/"></a></p>
        </div>
    </body>
</html> 
```

我的servlet是：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.slingmeadia.notifier.servlet;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author anthony.savarimut
 */
public class LogonServlet extends HttpServlet {

    /**
     * Processes requests for both HTTP
     * <code>GET</code> and
     * <code>POST</code> methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            /*
             * TODO output your page here. You may use following sample code.
             */
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet LogonServlet</title>");            
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet LogonServlet at " + request.getContextPath() + "</h1>");
            out.println("</body>");
            out.println("</html>");
        } finally {            
            out.close();
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP
     * <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
       // processRequest(request, response);
        String funtiontype = "",acctcode="",pageRedirect="";

        if(request.getAttribute("funtiontype")!=null) funtiontype =(String)request.getAttribute("funtiontype");
        if(request.getAttribute("acctcode")!=null) acctcode =(String)request.getAttribute("acctcode");

        if(funtiontype.equals("logon")){
            request.setAttribute("message","Loggedon code is "+acctcode);
            pageRedirect="notifier/notifier.jsp";
        }else{
            request.setAttribute("message","loggedout code is "+acctcode);
            pageRedirect="index.jsp";
        }
        response.sendRedirect(pageRedirect);
    }

    /**
     * Handles the HTTP
     * <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        //processRequest(request, response);
        System.out.println("Called logon");
        doGet(request,response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>
} 
```

该页面正在提交，但我为隐藏变量设置的值没有出现在 servlet 中，而且我有一个文本框，该值在提交页面时也没有出现在 servlet 中。

请帮助我找出这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:30:00.290

你应该做这个：

```
funtiontype =request.getParameter("funtiontype");
acctcode = request.getParameter("acctcode"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:26:55.103

试试这个..

```
function logintosystem(){
                document.frmLogon.funtiontype.value="logon";
                document.frmLogon.submit();
            } 
```

## 更新：

```
String funtionType = request.getAttribute("funtiontype") == null ? request.getParameter("funtiontype") : request.getAttribute("funtiontype");
String acctCode = request.getAttribute("acctcode") == null ? request.getParameter("acctcode") : request.getAttribute("acctcode"); 
```

# sql-server-2008 - 如何通过存储过程中的参数指定列名？

> ID：11429425
> 
> 赞同：1
> 
> 时间：2012-07-11T09:19:49.223
> 
> 标签：sql-server-2008, stored-procedures

```
USE Database
GO
CREATE PROCEDURE FillTable
    @Id nvarchar(50), 
    @ColumnNameArray nvarchar(4000),
    @ColumnValueArray nvarchar(4000)
AS 
   INSERT INTO Table(@ColumnNameArray)
   VALUES (@ColumnValueArray)    
GO 
```

这是我在存储过程中需要的功能。但我得到的错误是

`Invalid column name '@zoneNameArray'.`

那么解决方法是什么？

我怎样才能使这项工作？

**编辑1：** 我尝试像SO用户所说的那样使用它。

```
select @sql_Str='
      INSERT INTO Table('+@ColumnNameArray+')
       VALUES ('+@ColumnValueArray+')' 
```

但我仍然有错误。`ColumnNameArray`进展顺利。但是，说到`ColumnValueArray`我仍然无法做到这一点。 `ColumnValueArray`由`strings`和组成`int`。例如：`ColumnValueArray = "12,'abc','dddd',45,'2333'"`这是我从前端（C#）传递给存储过程参数的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:23:55.190

请试试这个

```
 declare @sql_Str varchar(8000)
    select @sql_Str='
      INSERT INTO Table('+@ColumnNameArray+')
       VALUES ('+@ColumnValueArray+')'
    exec(  @sql_Str); 
```

假设 @ColumnNameArray 是一个逗号分隔的列列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:22:10.330

尝试

```
exec('INSERT INTO Table(' + @ColumnNameArray + ') VALUES (' + @ColumnValueArra + ')') 
```

## 编辑

围绕它包装一个存储过程

```
CREATE PROCEDURE FillTable
    @Id nvarchar(50), 
    @ColumnNameArray nvarchar(4000),
    @ColumnValueArray nvarchar(4000)
AS 
    exec('INSERT INTO Table(' + @ColumnNameArray + ') VALUES (' + @ColumnValueArra + ')')
GO 
```

# xml - 在记事本++中为孩子搜索多个xml

> ID：11429426
> 
> 赞同：1
> 
> 时间：2012-07-11T09:19:50.767
> 
> 标签：xml, notepad++

对正则表达式不太熟悉，但基本上我试图从多个 xml 文件中提取基金价格。所以基本上我希望搜索返回，我打开的文件中 C001 的所有日期和价格。

```
<fund>
    <fund_code>C001</fund_code>
    <fund_name>Full fund name</fund_name>
    <fund_price_point>
      <price_point_dt>01/01/2012</price_point_dt>
      <fund_price>50.04</fund_price>
    </fund_price_point>
</fund 
```

任何建议都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T02:32:57.557

在“查找”菜单中使用以下内容过滤标签：

寻找：

```
</?[^>]*. 
```

代替：

空字符串

然后复制结果，并粘贴到电子表格中。

**参考**

*   [如何在 Notepad++ 中使用正则表达式](http://docs.notepad-plus-plus.org/index.php/Regular_Expressions)

# java - Java - HttpURLConnection - 如何将用户数据插入到标头响应中

> ID：11429427
> 
> 赞同：0
> 
> 时间：2012-07-11T09:19:52.167
> 
> 标签：java, http, servlets, httpresponse, httpurlconnection

我有一个对特定 URL 执行 GET 的 java servlet 类。我还将数据作为 GET 的一部分传递。

我需要的是在接收此数据的 HTTP 服务器代码中，如何将基于用户的响应数据插入到 Header 中，以便我的调用 Java servlet 类可以读取它。

我可以读取标准响应内容，例如 .getResponseCode() 等，但我需要以某种方式将自己的响应插入到标题中。如何才能做到这一点？我该如何阅读？

这是我的 java servlet 发送类：

```
public void sendRequest(String data, String sendUrl) throws Throwable{

    String messageEncoded = URLEncoder.encode(data, "UTF-8");
    String message = URLDecoder.decode(messageEncoded);
    System.out.println("messageEncoded : " + messageEncoded);
    System.out.println("messageDecoded : " + message);

    try {                 
        URL url = new URL(sendUrl);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();            
        connection.setDoOutput(true);            
        connection.setRequestMethod("GET");            
        OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());           
        writer.write(message);    
        writer.close();   

        BufferedReader rd = null; 
        StringBuilder sb = null; 
        String line = null; 

        System.out.println(" *** headers ***"); 
        for (Entry<String, List<String>> headernew : connection.getHeaderFields().entrySet()) { 
            System.out.println(headernew.getKey() + "=" + headernew.getValue()); 
        } 

        System.out.println(" \n\n*** Body ***"); 
        rd = new BufferedReader(new InputStreamReader(connection.getInputStream())); 
        sb = new StringBuilder(); 

        while ((line = rd.readLine()) != null) { 
            sb.append(line + '\n'); 
        } 

        System.out.println("body=" + sb.toString());     

        System.out.println("connection.getResponseCode() : " + connection.getResponseCode());
        System.out.println("connection.getResponseMessage()" + connection.getResponseMessage());

        if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) { 
            // Ok
        } else {                
            // Server returned HTTP error code.            
        }   

    } catch (MalformedURLException e) {            
        // ...
        System.out.println(this.getClass() + " : MalformedURLException Error occured due to: " + e);
    } catch (IOException e) {           
        System.out.println(this.getClass() + " : IOException Error occured due to: " + e);   
    }
} 
```

# ios - 为什么这段代码不会导致无限循环？

> ID：11429430
> 
> 赞同：0
> 
> 时间：2012-07-11T09:20:02.603
> 
> 标签：ios, xcode, properties, nsfetchedresultscontroller

Xcode模板代码：MasterViewController.m中的MasterDetailApplication（使用核心数据），实现

```
- (NSFetchedResultsController *)fetchedResultsController
{
  if (__fetchedResultsController != nil) {
    return __fetchedResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Edit the sort key as appropriate.
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors];

// Edit the section name key path and cache name if appropriate.
// nil for section name key path means "no sections".
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
aFetchedResultsController.delegate = self;
self.fetchedResultsController  = aFetchedResultsController;
NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) {
     // Replace this implementation with code to handle the error appropriately.
     // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return __fetchedResultsController;
} 
```

问题是：这段代码在 getter 中使用了属性，为什么这不会导致无限循环？我的意思是这一行：

```
self.fetchedResultsController  = aFetchedResultsController; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:23:02.470

该代码使用 getter 内部的属性，但使用将调用**setter**`self.prop = value`的语法（而不是 getter 内部的 getter）。因此，这段代码没有理由生成无限循环。

 **无论如何，这是一个相当奇怪的 getter 实现。

通常，如果 setter 不称自己为 getter，则在 getter 方法中调用 setter 方法是没有问题的。当然，如果 setter 本身调用 getter，就会出现无限循环，getter 调用 setter 调用 getter 等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:22:51.937

因为您使用的是 setter，而不是 getter。

```
 self.property = something; 
```

这将调用设置器：

```
 [self setProperty:something]; 
```

而不是吸气剂：

```
 [self property]; 
```**

# php - Zend 中的复杂 SQL 查询

> ID：11429434
> 
> 赞同：0
> 
> 时间：2012-07-11T09:20:23.577
> 
> 标签：php, mysql, zend-framework

我正在尝试使用 Zend Framework 构建社交网络。但是，最近我很难将一些复杂的 SQL 查询转换为 Zend 语言。例如：

```
"SELECT t.plural_name, p.name as users_name, u.ID 
FROM users u, profile p, relationships r, relationship_types t 
WHERE t.ID=r.type 
      AND r.accepted=1 
      AND (r.usera={$user} OR r.userb={$user}) 
      AND IF( r.usera={$user},u.ID=r.userb,u.ID=r.usera) 
      AND p.user_id=u.ID" 
```

我如何使用 Zend 的 select() 对象来执行这个查询？非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:28:37.410

对于非常复杂的查询，使用 SQL 可能更容易。唯一重要的是进入查询的所有参数都正确转义以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:46:26.127

你可以以此为例：（虽然它不完整）

```
<?php
$this->_query = $this->_DB->select()->from(array('u'=>'users'),array('(u.ID)'))
                                    ->join(array('p'=>'profile'),
                                               'p.user_id = u.ID',
                                               'p.name AS users_name')
                                     ->join(array('r'=>'relationships'),
                                               'r.userb = u.ID')    
                                    ->join(array('t'=>'relationship_types'),
                                               't.ID = r.type',
                                               't.plural_name')

                                    ->where('t.ID = r.type AND r.accepted = 1')
                                    ->where('r.usera = :user')
                                    ->orWhere('r.userb = :user')
                                    ->bind(array('user'=>$user)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T12:09:41.157

每当我有复杂的查询要处理时，我通常会尝试在 MySQL 中运行它们。一旦我找到了准确的 SQL 语句，我就开始将它“翻译”到 Zend。我看起来有点复杂，但从长远来看，你可以立即在 Zend 中完成它们。这是我如何分解它。先搞清楚SQL语句是什么：

```
SELECT t.plural_name, p.name as users_name, u.ID 
FROM users u, profile p, relationships r, relationship_types t 
WHERE t.ID=r.type AND r.accepted=1 AND
 (r.usera={$user} OR r.userb={$user}) AND
 IF( r.usera={$user},u.ID=r.userb,u.ID=r.usera) AND
 p.user_id=u.ID 
```

现在，您需要将所有关系转换为联接。连接一开始有点吓人，但它只是一种将表和它连接到另一个表的标准放在一行中的方法。

```
SELECT t.plural_name, p.name AS users_name, u.ID 
FROM users u
INNER JOIN profile AS p ON p.user_id = u.ID
INNER JOIN relationships AS r ON IF(r.usera={$user}, u.ID=r.userb, u.ID=r.usera)
INNER JOIN relationship_types AS t ON t.ID = r.type
WHERE
 (r.usera={$user} OR r.userb={$user}) AND
 r.accepted=1 
```

现在它是以更“Zend 友好”的方式编写的，您可以轻松开始将其转换为 Zend：

```
$select = $this->select()->setIntegrityCheck(false);
$select->from(array('u'=>'users'), '');
$select->join(array('p'=>'profile'), 'p.user_id = u.ID', '');
$select->join(array('r'=>'relationships'), 'IF(r.usera={$user}, u.ID=r.userb, u.ID=r.usera)', '');
$select->join(array('t'=>'relationship_types'), 't.ID = r.type', '');
$select->columns(array(
  't.plural_name', 
  'users_name'=>'p.name', 
  'u.ID'));
$select->where('r.usera={$user}');
$select->orWhere('r.userb={$user}');
$select->where('r.accepted=1'); 
```

这应该可以完成这项工作。

# android - 带有 android 的 Salesforce Rest API - NullPointerException @ AsyncRequestCallback

> ID：11429441
> 
> 赞同：0
> 
> 时间：2012-07-11T09:20:54.507
> 
> 标签：android, salesforce

我正在尝试让 Salesforce REST API 与 Android 和新的 android 编程一起使用，按照示例代码连接 SFDC [http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android#Authentication](http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android#Authentication)

我正在尝试从 SFDC 获取一些记录并将它们显示在 android 应用程序中，看起来像在“client.sendAsync(sfRequest, new AsyncRequestCallback()”处进行异步调用时 - 抛出 NullPointerException。

我确实在网上看到了一些类似的问题，但没有帮助我。希望有人能指出我正确的方向来解决这个问题。非常感谢。

```
 public class GetAccountsActivity extends Activity {

    private PasscodeManager passcodeManager;

    private String soql;
    private String apiVersion;
    private RestClient client;
    private TextView resultText;
    private RestRequest sfRequest;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Get Api Version
        apiVersion = getString(R.string.api_version);
      //Create Query
        soql = "select id, name from Account limit 10";

      //  Setup view
        setContentView(R.layout.get_accounts_activity);
        ((TextView) findViewById(R.id.Acc_Title)).setText(apiVersion);
        // Passcode manager

        passcodeManager = ForceApp.APP.getPasscodeManager();
    }

    @Override 
    public void onResume() {
        super.onResume();   

    //Get SFClient
        // Login options
        String accountType = ForceApp.APP.getAccountType();
        LoginOptions loginOptions = new LoginOptions(
                null, // login host is chosen by user through the server picker 
                ForceApp.APP.getPasscodeHash(),
                getString(R.string.oauth_callback_url),
                getString(R.string.oauth_client_id),
                new String[] {"api"});

        new ClientManager(this, accountType, loginOptions).getRestClient(this, new RestClientCallback() {
            @Override
            public void authenticatedRestClient(RestClient client) {
                if (client == null) {
                    ForceApp.APP.logout(GetAccountsActivity.this);
                    return;
                }
                GetAccountsActivity.this.client = client;
            }
        });
          //Get Rest Object to query
            try {
                sfRequest = RestRequest.getRequestForQuery(apiVersion, soql);
                //Use SF Rest Client to send the request
                client.sendAsync(sfRequest, new AsyncRequestCallback(){
                    @Override
                    public void onSuccess(RestRequest request, RestResponse response){
                    //Check responses and display results
                    // EventsObservable.get().notifyEvent(EventType.RenditionComplete);
                    }//end onSuccess

                    @Override
                    public void onError(Exception exception) {
                        //printException(exception);
                        EventsObservable.get().notifyEvent(EventType.RenditionComplete);                
                    }//End Exception for Async Method
                });
            }catch (UnsupportedEncodingException e) {
                //printHeader("Could Send Query request");
                //printException(e);
                return;
            }
    }
} 
```

在此处输入代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:10:47.797

您正在从 onResume() 调用 client.sendAsync 但在调用 authenticatedRestClient 回调之前未设置客户端，您需要将 sendAsync 调用移动到 authenticatedRestClient 回调中。

# spring - Spring AOP 建议 - 在调试模式下有条件

> ID：11429458
> 
> 赞同：2
> 
> 时间：2012-07-11T09:21:52.140
> 
> 标签：spring, aop, aspect, pointcut

我只想在调试模式下使用 AOP 建议/切入点等（作为主全局配置：例如，当 log4j 处于调试阈值时）。

如何在 application.xml 配置或其他地方执行此操作？

我正在使用 AOP 注释，例如

> @Around("PointCuts.anyCustomPublicMethod()")
> 
> ```
> public final Object logAdvice(final ProceedingJoinPoint pjp) throws Throwable {
> ...........
> ............ 
> ```

如何添加到建议中，例如，

> debug.equals(TRUE)

有人告诉我使用 Spring Expression Language，但我不知道该怎么做。

# javascript - Facebook 应用画布调整大小

> ID：11429459
> 
> 赞同：1
> 
> 时间：2012-07-11T09:21:56.943
> 
> 标签：javascript, facebook, facebook-c#-sdk, facebook-apps

我正在尝试调整画布应用程序 iFrame 的大小 - 它可以让我调整高度而不是宽度，宽度始终设置为 520 像素，高度设置为 900 像素；

该文档显示了如何通过开发人员应用程序设置画布应用程序设置，但这些设置不适合我，这太奇怪了。我已经尝试过 autoResize、autoGrow 和其他选项，但现在已经没有什么想法了。

这是我正在使用的代码；

```
<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js"></script>
<script>
FB.init({
    appId: 'my_app_id',
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true // parse XFBML
});    
</script>
<script type="text/javascript">
window.fbAsyncInit = function () {
    FB.Canvas.setAutoResize(true);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:35:30.727

通过提供明确的宽度和高度来尝试以下功能：

```
FB.Canvas.setSize({ width: 640, height: 480 }); 
```

要查看更多信息 - [https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:54:32.043

```
Try this:
1.Go to the link
https://developers.facebook.com/apps
2.Select your app
3.click on edit app
4.click on advance setting
5.change canvas size setting as you wish 
```

您可以选择宽度为固定或流动，高度为流动或根据高度调整宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:15:34.090

如果您的应用程序开发人员不能通过应用程序仪表板设置画布设置，您是否必须成为应用程序的管理员？因为当我继续“高级”时我看不到画布应用程序设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:48:17.880

在高级设置下，有用于迁移的单选按钮可以解决问题并将默认宽度设置为 810 像素，高度设置为 900 像素，但我在底部有滚动条。不要认为有一种方法可以移动它——但我终于到达了某个地方——对于应用程序的管理员或开发人员来说，画布设置不再存在。奇怪的！

# c - 为什么 sizeof(a) 是 16？（大小 int 为 4 ）

> ID：11429463
> 
> 赞同：1
> 
> 时间：2012-07-11T09:22:09.313
> 
> 标签：c, gcc, sizeof

```
#include <stdio.h>

int main() {
    int *a[2]; // an array of 2 int pointers
    int (*b)[2];
    // pointer to an array of 2 int (invalid until assigned) //
    int c[2] = {1, 2}; // like b, but statically allocated

    printf("size of int %ld\n", sizeof(int));
    printf("size of array of 2 (int *) a=%ld\n", sizeof(a));
    printf("size of ptr to an array of 2 (int) b=%ld\n", sizeof(b));
    printf("size of array of 2 (int) c=%ld\n", sizeof(c));
    return 0;
} 
```

`a`是一个由 2 个整数指针组成的数组，所以大小不应该是`2 * 4 = 8`？

在 GCC 上测试。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T09:23:56.687

您可能在指针为 8 个字节的 64 位机器上编译。

`int *a[2]`是一个包含 2 个指针的数组。因此`sizeof(a)`返回 16。
（所以它与 . 的大小无关`int`。）

* * *

如果您将其编译为 32 位，则大多数情况下会得到`sizeof(a) == 8`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T09:23:48.280

在 64 位机器上，指针通常是 8 个字节。所以两个指针组成的数组的大小通常是 16 字节。

```
int *a[2];    // array of two pointers to int
int (*b)[2];  // pointer to an array of two int

sizeof a;     // is 2 * 8 bytes on most 64-bit machines
sizeof b;     // is 1 * 8 bytes on most 64-bit machines 
```

# iphone - 在 UITableView 中获取部分的标题

> ID：11429467
> 
> 赞同：0
> 
> 时间：2012-07-11T09:22:23.913
> 
> 标签：iphone, ios, ipad, uitableview

我在我的 TableView 中设置了我所有的标题部分。

稍后，我需要在任何部分的表格视图中获取标题的值，

**我怎样才能直接向 UITableView 询问这些值？**

没有委托协议：

```
 [self tableView:tableView titleForHeaderInSection:i] 
```

因为这个方法覆盖了我自己类的一个协议。

```
- (NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
 {
     /* If datasource methdod is implemented, get´s the name of sections*/
     SEL nameForSection = @selector(nameForSection:);
    if ( (self.dataSource) && [self.dataSource respondsToSelector:nameForSection] )
    {
       NSString *titleSection = [self.dataSource nameForSection:section];
       return titleSection;
   }

return nil; 
```

}

感谢提前...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:56:23.670

*从iOS6.0及更高版本开始支持*

如果你有 indexPath，你可以像这样得到它：

```
UITableViewHeaderFooterView* header =[self.tableView headerViewForSection:indexPath.section];
NSLog(@"Header text = %@", header.textLabel.text); 
```

改成这样

```
header.textLabel.text= @"changed"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-23T12:47:56.753

您可以使用 UITableView 的 dataSource 来获取部分标题：

```
[tableView.dataSource tableView:tableView titleForHeaderInSection:section]; 
```

如果您使用默认数据源（即 UITableViewController），它将返回在 InterfaceBuilder 中设置的部分标题。

这是我的代码，它复制了一个模板视图并适当地设置了标题。请注意，我只是将表格的标题视图用作存储模板并将其从 UITableViewController 子类的 viewDidLoad 中删除的方便位置。

```
- (UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView* header = [NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:self.sectionHeaderTemplateView]];
    UILabel* label = ((UILabel*)header.subviews[0]);
    label.text = [tableView.dataSource tableView:tableView titleForHeaderInSection:section];
    return header;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T09:28:45.550

将节标题存储在 NSArray 中，并使用此数组获取表视图中任何节的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T09:31:54.837

你是如何设置部分的标题的？如果你从 UITableViewDataSource 重写 tableView:titleForHeaderInSection: 方法，你可以自己调用它来获取特定部分的标题。如果您要覆盖 UITableViewDataSource 中的 tableView:viewForHeaderInSection: 方法，请考虑使用一个包含所有标签的数组，以便您可以获取特定部分的标签标题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T09:33:07.617

此表视图方法将返回标题视图，我认为在您的情况下应该是`UILabel`

```
 - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T10:12:18.997

```
- (NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
 {
     /* If datasource methdod is implemented, get´s the name of sections*/
     SEL nameForSection = @selector(nameForSection:);
    if ( (self.dataSource) && [self.dataSource respondsToSelector:nameForSection] )
    {
       NSString *titleSection = [self.dataSource nameForSection:section];
       return titleSection;
   }

return nil; 
```

嗯...您的 DataSource 有一个 DataSource 吗？UITableView 的 dataSource 的目标是由另一个类实现，所以 self.datasource 不是 UITableView 的数据源！

# mysql - 在MySQL中按以特定字母开头的字符串对行进行排序

> ID：11429469
> 
> 赞同：0
> 
> 时间：2012-07-11T09:22:33.433
> 
> 标签：mysql

假设我有一列bridge_code，其值如下

```
F001
F002
PC10
H001
H001
H003
H234
DCM0 
```

我要做的就是在行上方排序，以便以字符“H”开头的bridge_code首先出现，其余代码按降序排列。例如，我想将排序的行返回为

```
H001
H002
H234
DCM0
F001
F002
PC10 
```

谢谢萨宾

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:25:50.153

```
ORDER BY IF(SUBSTRING(bridge_code, 1, 1) = 'H', 0, 1), bridge_code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:26:03.260

也许使用工会

像这样 ：

```
select bridge_code from table1 where bridge_code like 'H%' 
union
select bridge_code from table1 where bridge_code not like 'H%' 
```

但不推荐：p

# javascript - 使用 jquery 或 javascript 从 html 文件中检索所有超链接

> ID：11429471
> 
> 赞同：1
> 
> 时间：2012-07-11T09:22:47.697
> 
> 标签：javascript, jquery

我需要使用 jquery 检索当前 html 页面中存在的所有超链接。我怎样才能使用正则表达式来做到这一点？我也可以在javascript中使用集合来存储列表中的所有href吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:24:37.547

您可以使用简单的每个循环：

```
// For each <a href=""> tag...
$('a').each(function(){
    // Get the url
    var href = $(this).attr('href')
    // alert it or do sth with it
    alert( href ); 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:23:58.377

使用 jQuery`$('a')`将为您完成

遍历所有锚元素

```
var hrefArr = [];
$('a').each(function(){
  //hrefArr.push($(this).attr('href')); 
  hrefArr.push(this.href); // this would be bit faster then the statement above it
}); 
```

由 OP 编辑​​评论，在字符串中查找锚标记包含 html

```
str = "<div><a href='local1'></a><a href='local2'></a></div>"
var hrefArr = [];
$(str).filter('a').each(function(){
    hrefArr.push(this.href); 
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:24:16.083

所有的锚都很容易

```
$("a").each(function(){
  alert( $(this).attr("href") );
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:24:38.530

这将为您提供页面上的所有超链接

```
$('a') 
```

这将为您提供 hpyerlinks 上的 href 集合

```
var hrefs = new Array();
$('a').each(function() {
    hrefs.push(this.attr('href'));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:41:16.963

尝试这个：

```
var link = "";
$("a").each(function() {
    link += $(this).attr("href"); 
});
alert(link); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T09:27:08.833

如果通过“javascript 中的集合”你的意思是一个数组，那么你可以这样做：

```
var hrefs = [];
$("a").each(function() {
    hrefs.push(this.href);
});
// hrefs array now contains all the hrefs 
```

如果您单击链接，回调`.each()`函数`this.href`可能会返回完整的 url，即`href="test.htm"`返回为`http://yourdomain/test.htm`. 如果您只想要属性中的字面意思，请使用`$(this).attr("href")`.

您不会使用正则表达式来进行这种类型的处理。

# ruby-on-rails - 如何在 Rails 3 和 postgres 中处理大整数

> ID：11429472
> 
> 赞同：3
> 
> 时间：2012-07-11T09:22:50.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, postgresql

我正在使用 rails 3.2.3、ruby 1.9.3 和 postgres 8.4.12（在 RHEL 6.3 上）。我希望将 IP 地址作为整数存储在数据库中，但在尝试从控制器保存记录时出现以下错误：

```
 def create
    @network = Network.new(params[:network])

    @network.address_int = IPAddr.new(@network.address_str).to_i
    @network.netmask_int = IPAddr.new(@network.netmask_str).to_i

    respond_to do |format|
      if @network.save
        format.html { redirect_to @network, notice: 'Network was successfully created.' }
        format.json { render json: @network, status: :created, location: @network }
      else
        format.html { render action: "new" }
        format.json { render json: @network.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我收到以下错误

```
PG::Error: ERROR:  value "4294967040" is out of range for type integer 
```

我的迁移将此列定义为 8 字节整数：

```
class CreateNetworks < ActiveRecord::Migration
  def change
    create_table :networks do |t|
      t.integer :vlan
      t.integer :address_int, :limit => 8      
      t.integer :netmask_int, :limit => 8
      t.string :address_str
      t.string :netmask_str
      t.string :desc

      t.timestamps
    end
  end
end 
```

但我已经能够在 rails 控制台存储这个大整数：

```
1.9.3p125 :001 > n=Network.new
 => #<Network id: nil, vlan: nil, address_int: nil, address_str: nil, netmask_int: nil, netmask_str: nil, desc: nil, created_at: nil, updated_at: nil>
1.9.3p125 :002 > n.address_int=4294967040
 => 4294967040
1.9.3p125 :003 > n
 => #<Network id: nil, vlan: nil, address_int: 4294967040, address_str: nil, netmask_int: nil, netmask_str: nil, desc: nil, created_at: nil, updated_at: nil>
1.9.3p125 :004 > n.save
(0.2ms)  BEGIN
  SQL (5.0ms)  INSERT INTO "networks" ("address_int", "address_str", "created_at", "desc", "netmask_int", "netmask_str", "updated_at", "vlan") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["address_int", 4294967040], ["address_str", nil], ["created_at", Tue, 10 Jul 2012 15:09:37 UTC +00:00], ["desc", nil], ["netmask_int", nil], ["netmask_str", nil], ["updated_at", Tue, 10 Jul 2012 15:09:37 UTC +00:00], ["vlan", nil]]
(0.9ms)  COMMIT
 => true 
```

那么，这个 bigint 数据类型是否也应该在其他地方定义呢？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:41:32.550

如果您升级到 PG 9.1，您可以使用它们的本地[IP 地址/子网/MAC 地址类型](http://www.postgresql.org/docs/9.1/static/datatype-net-types.html)。您甚至可以通过[postgres_ext gem](https://github.com/dockyard/postgres_ext)在迁移中使用它们。这应该会自动处理任何类型的 IP 地址，而不必将它们转换为 BIGINT 或 STRING，并允许一些很棒的技巧，例如“SELECT FROM * IN SAME SUBNET”

# dll - 如何使 DLL 在 Mac OS X 中与 Unity 一起工作？

> ID：11429480
> 
> 赞同：2
> 
> 时间：2012-07-11T09:23:09.767
> 
> 标签：dll, unity3d

我设计了一个用户必须自己注册的应用程序。为此，我使用了 Web 服务，并且在 Mac OS X 或 Windows 上的**Unity 编辑器中运行的应用程序可以毫无错误地发出请求。**

**如果我将应用程序构建为 Windows 可执行文件，它也可以工作，但是当我为Mac OS X**构建应用程序时，它不再工作（在编辑器之外）。请求无法正常工作。

在项目中，我创建了**Plugins**文件夹并引入了**System.Web**和**System.Web.Services** DLL。

**播放器设置中的**Api Compability Level为****NET 2.0。****

 **当我尝试运行 Mac OS X 构建时，我在日志中收到以下**错误消息：**

```
at System.Net.WebRequest.GetCreator (System.String prefix) [0x00000] in <filename unknown>:0 
  at System.Net.WebRequest.Create (System.Uri requestUri) [0x00000] in <filename unknown>:0 
  at System.Web.Services.Protocols.WebClientProtocol.GetWebRequest (System.Uri uri) [0x00000] in <filename unknown>:0 
  at System.Web.Services.Protocols.HttpWebClientProtocol.GetWebRequest (System.Uri uri) [0x00000] in <filename unknown>:0 
  at System.Web.Services.Protocols.SoapHttpClientProtocol.GetWebRequest (System.Uri uri) [0x00000] in <filename unknown>:0 
  at System.Web.Services.Protocols.SoapHttpClientProtocol.GetRequestForMessage (System.Uri uri, System.Web.Services.Protocols.SoapClientMessage message) [0x00000] in <filename unknown>:0 
  at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke (System.String method_name, System.Object[] parameters) [0x00000] in <filename unknown>:0 
  at BGWebServiceService.login (.LoginRequestBean bean) [0x00000] in <filename unknown>:0 
  at (wrapper remoting-invoke-with-check) BGWebServiceService:login (LoginRequestBean)
  at ClientObject.loginAsyncRequest () [0x00000] in <filename unknown>:0 
```

我查看了很多论坛并搜索了网络，但我找不到答案。我不知道是否有必要添加任何其他文件夹，将 DLL 放在其他地方或在项目中执行其他操作。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:56:48.447

我已经找到了如何让它工作。

只是，我们必须将 /Applications/Unity/Unity.app/Contents/Frameworks/Mono 文件夹添加到我们框架的应用程序文件夹中。**

# javascript - 如何在 jquery 中检查文本字段中的空格

> ID：11429484
> 
> 赞同：2
> 
> 时间：2012-07-11T09:23:11.627
> 
> 标签：javascript, jquery, html

我有一个表格。我想进行验证，以便检查用户是否输入空格。如果它的空格则显示错误。我怎么能这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T09:28:13.330

如果您想通过用户的输入字符串检测是否有任何空白，

```
var str = $("input").val();
if( str.indexOf(" ") !== -1 )
{
    alert("bad input");
} 
```

示例：http: [//jsfiddle.net/pYquc/](http://jsfiddle.net/pYquc/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:25:23.403

使用`jQuery.trim(str)`which 删除空格或制表符，您可以验证。

[http://api.jquery.com/jQuery.trim/](http://api.jquery.com/jQuery.trim/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:26:23.030

```
function doValidations(){
   if(jQuery.trim( $(".className").val())==""){
     alert("error message");
     return false;    
   }else{
     return true;
   }
}

<input type="submit" onclick="return doValidations();"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:07:31.710

```
Try this usong javascript:
var v = document.form.element.value;
var v1 = v.replace("","");
if( v1.length == 0){
 alert("error");
}

OR you can use following functions:

 // whitespace characters
      var whitespace = " \t\n\r";

      /****************************************************************/

      // Check whether string s is empty.
      function isEmpty(s)
      { return ((s == null) || (s.length == 0)) }

      /****************************************************************/

      function isWhitespace (s)
      {
           var i;

           // Is s empty?
           if (isEmpty(s)) return true;

           // Search through string's characters one by one
           // until we find a non-whitespace character.
           // When we do, return false; if we don't, return true.

           for (i = 0; i < s.length; i++)
           {
                // Check that current character isn't whitespace.
                var c = s.charAt(i);

                if (whitespace.indexOf(c) == -1) return false;
           }

           // All characters are whitespace.
           return true;
      } 
```

# ios - 如何从 iPhone 崩溃日志中识别错误

> ID：11429485
> 
> 赞同：1
> 
> 时间：2012-07-11T09:23:15.823
> 
> 标签：ios, crash-reports, ios5.1

我正在使用 TestFlight SDK。我从用户那里得到了崩溃日志，但我无法重现该问题。我想知道如何从崩溃日志中识别错误位置。非常感谢任何帮助..提前致谢。

我已经从日志中掩盖了我的项目名称。

对不起，如果我的问题是如此基本。

![在此处输入图像描述](../Images/e7968a7a9252b3c4d14ebc646a6acd34.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:23:33.043

秘密关键字是`symbolicate a crash`;)

这是一篇关于它的博客文章：http: [//blog.testflightapp.com/post/11322114068/real-time-symbolication](http://blog.testflightapp.com/post/11322114068/real-time-symbolication)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:28:30.567

您必须符号化您的崩溃日志以尝试理解它，您将需要使用您的应用程序生成的 dsym 文件。该帖子中的更多答案：[Symbolicate XCode4 crash reports](https://stackoverflow.com/questions/6248132/symbolicate-xcode4-crash-reports)

# java - 时间序列 JFreeChart 重绘时间轴

> ID：11429486
> 
> 赞同：0
> 
> 时间：2012-07-11T09:23:15.960
> 
> 标签：java, swing, jfreechart

我使用 JFreeChart API 创建了一个动态时间序列图表。它工作正常。我必须在其中添加一个组合框，其中的时间值将是 5 秒、15 秒、30 秒。当用户从中选择时，时间轴必须以给定的间隔重新绘制，并且计时器必须将过程延迟 5、15、30 秒（更新图表）。我在我以前的帖子中[这个](https://stackoverflow.com/questions/11188219/jfreechart-timeseries-is-not-refreshing)

带有一些扩展，例如向其添加组合框

但这对我不起作用，任何帮助将不胜感激。谢谢

**EDIT 1**删除了不需要的代码，剩下的代码是

```
 final DynamicTimeSeriesCollection dataset =
    new DynamicTimeSeriesCollection(1, 60, new Second());

dataset.setTimeBase(new Second( 0,seriesvalue*2, 5, 11, 7, 2012));

dataset.addSeries(new float[]{0}, 0, "Currency Rate");
JFreeChart chart = createChart(dataset);
chartPanel = new ChartPanel(chart);

final JComboBox combo = new JComboBox();
combo.addItem("5");
combo.addItem("15");
combo.addItem("30");

combo.addActionListener(new ActionListener(){

  public void actionPerformed(ActionEvent e){

    if("5".equals(combo.getSelectedItem())){
      seriesvalue=5;
      timer.setDelay(seriesvalue*1000);
    }else  if("15".equals(combo.getSelectedItem())){

      seriesvalue=15;
      timer.setDelay(seriesvalue*1024);
      unit=new DateTickUnit(DateTickUnitType.MINUTE,seriesvalue);
      chartPanel.repaint();
    }
  }
});
    add(chartPanel,BorderLayout.CENTER);
    add(combo,BorderLayout.SOUTH);
timer = new Timer(999*seriesvalue, new ActionListener() {

        public void actionPerformed(ActionEvent e) {
          for(int i=0;i<seriesvalue;i++){

            newData[0] = randy.getRandomvalue();
            dataset.advanceTime();
            dataset.appendData(newData);

          }             

        }
    }); 
```

创建数据集代码

```
 private JFreeChart createChart(final XYDataset dataset) {
   JFreeChart result= ChartFactory.createTimeSeriesChart(
      "Dyanmic chart", "hh:mm:ss", "Currency", dataset, true, true, false);
  final XYPlot plot = result.getXYPlot();

  dateAxis= (DateAxis)plot.getDomainAxis();
  unit = new DateTickUnit(DateTickUnitType.MINUTE,seriesvalue/2);
  return result;
} 
```

主要方法

```
public static void main(final String[] args) {
  EventQueue.invokeLater(new Runnable() {
      public void run() {
          DynaChart chart = new DynaChart();
          chart.pack();
          RefineryUtilities.centerFrameOnScreen(chart);
          chart.setVisible(true);
          chart.start();
      }
  });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:22:25.560

我不确定我是否从您发布的片段中了解您的要求。如果您只需要以几个不同的频率对数据源进行采样，您可以设置`javax.swing.Timer`延迟，如本[示例](https://stackoverflow.com/a/5048863/230513)所示。

附录：*我想重新粉刷`DateAxis`*。

API 指出[`setTimeBase()`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/time/DynamicTimeSeriesCollection.html#setTimeBase%28org.jfree.data.time.RegularTimePeriod%29)“如果时间数组已被填充，将静默返回”。我怀疑您需要`DynamicTimeSeriesCollection`在组合的动作侦听器中重新创建。您可能还想更改 的刻度单位和格式，如此[处](https://stackoverflow.com/a/6350282/230513)`DateAxis`所述。

# c# - 为 CustomControl 创建事件

> ID：11429490
> 
> 赞同：0
> 
> 时间：2012-07-11T09:23:19.457
> 
> 标签：c#, winforms, events

我正在开发用于选择特殊文件的 UserControl，在此控件中，`TreeView`当用户选择某个文件时，该控件会填充有节点。用户也可以从此树视图中删除文件！

我以向导形式使用此控件。在此向导表单中，有一个名为的`buttonNext`按钮，默认情况下禁用此按钮。

如何在用户控件中为树视图创建一个事件，当它被填充时，它会通知向导表单中的下一个按钮以启用，如果用户从该树视图中删除所有文件，它会通知该按钮再次被禁用。

PS：选择文件（浏览器对话框和类似的东西）都是在这个用户控件中完成的，所以在我的向导表单中我无法访问这个组件中正在发生的事情，但只有我将 TreeView 本身设置为公共所以我可以在我的向导表单中读取它的节点。

我知道如何订阅事件，但我自己从未创建任何事件:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:25:19.097

谁是填充 TreeView 的人？加载数据的人可以在完成加载后启用“下一步”按钮。我错过了什么吗？

顺便说一句，您创建一个这样的事件：

```
public event EventHandler<EventArgs> YouEventName; 
```

你称它为一种方法：

```
this.YourEventName(this,EventArgs.Emtpy); 
```

最佳实践表明您应该创建一个方法来调用它，如下所示：

```
protected virtual void OnYourEventName()
{
    if (this.YourEventName != null)
    {
        this.YourEventName(this, EventArgs.Empty);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:27:41.047

查看这篇 MSDN 文章以获取有关如何创建和触发事件的完整教程。
[http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645739(v=vs.71).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:29:48.940

您可以只传播 Treeview 的事件。

您可以将其添加到您的自定义控件中，它将有一个`SelectedNodeChanged`事件。

```
public event EventHandler SelectedNodeChanged
{
   add { tree.SelectedNodeChanged += value; }
   remove { tree.SelectedNodeChanged-= value; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:39:57.463

在您的 CustomControl 上声明事件：

```
public event EventHandler DataPopulated;
public event EventHandler DataRemoved; 
```

常见的做法是创建受保护的虚拟方法（可能在后代类中覆盖它们），命名`On<EventName>`将验证事件是否已附加处理程序并引发事件，并传递所需的参数：

```
protected virtual void OnDataPopulated()
{
    if (DataPopulated != null)
        DataPopulated(this, EventArgs.Empty);
} 
```

注意：如果您需要将一些数据传递给事件处理程序，则使用泛型`EventHandler<DataPopulatedEventArgs>`委托作为事件类型，其中`DataPopulatedEventArgs`是一个类，继承自`EventArgs`.

然后只需在填充数据后调用此方法：

```
treeView.Nodes = GetNodes();
OnDataPopulated(); 
```

然后只需订阅此事件并启用您的下一个按钮：

```
private void CustomControl_DataPopulated(object sender, EventArgs e)
{
   buttonNext.Enabled = true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:37:58.383

创建新事件

```
public event EventHandler<EventArgs> myEvent; 
```

然后你从某个方法调用它

```
this.myEvent(sender, e); 
```

实际事件看起来像这样：

```
protected void MyEvent(object sender, EventArgs e)
{
    //Your code here
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T09:39:26.580

你的代码可以是这样的：

```
public delegate void ChangedEventHandler(object sender, EventArgs e);

class TreeViewEx : TreeView
{
    ...

    public event ChangedEventHandler Changed;

    protected virtual void OnChanged(EventArgs e)
    {
        if (Changed != null)
            Changed(this, e);
    }
} 
```

它的用法

```
 TreeViewEx tree = ...
  tree.Changed += new EventHandler(TreeChanged);

  // This will be called whenever the tree changes:
  private void TreeChanged(object sender, EventArgs e) 
  {
     Console.WriteLine("This is called when the event fires.");
  } 
```

# jquery - JQuery Get 命令和最终的 PhoneGap

> ID：11429492
> 
> 赞同：0
> 
> 时间：2012-07-11T09:23:24.950
> 
> 标签：jquery, cordova

我一直在制作一个与 Java Servlet 交互以获取数据的站点。它进展顺利。我正在运行 tomcat 来运行该站点。

所以目前我得到这样的数据：

$.get('data',{some parameters}, function(data) { do stuff... });

我还将“数据”更改为“MYIP:8080/WebPortal/data”，它仍然可以正常工作。

但是，只有当我在浏览器中转到“MYIP:8080/WebPortal/index.html”而不是单独打开 index.html 文件时，任何事情似乎都有效。在我开始考虑使用 Phonegap 应用程序以同样的方式获取数据之前，这并不是一个真正的问题。

我认为将 servlet 的 url 设为绝对会使其正常，但 phonegap 的行为就像直接打开 .html 文件一样，这*是*它应该做的。

我听说过跨域策略和 Phonegap 的白名单，但我还没有完全理解它们，也不知道它们是否与这里相关。

因此，如果有人知道为什么我的 jquery 命令只能通过服务器工作，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:38:41.473

你确定你有一个全球可见的ip吗？首先尝试将 MYIP 更改为 localhost:8080，然后检查是否仅打开“index.html”有效。

如果发生这种情况，则意味着您的 IP 不是全球可见的……这就是问题的根源。

# vba - 如何在不更改公式的情况下更改单元格的值（显示文本）？

> ID：11429493
> 
> 赞同：7
> 
> 时间：2012-07-11T09:23:25.767
> 
> 标签：vba, excel, formula

我对这个 VBA 宏有疑问。

```
Sub demoChangeText()
    Application.Range("B2").Value = "Overidden text"
End Sub 
```

我的测试在[这里](https://dl.dropbox.com/u/60740207/TestChangeText.xlsm)。要运行此宏，请在 Excel 中打开它，按下`Ctrl+F8`并选择`demoChangeText`。

结果，这个宏改变了单元格的值`B2`（显示给我们的文本），但清除了它的公式。我需要更改`B2`' 的值，但也需要保留公式。

所以我的问题是**如何在不更改其公式的情况下更改单元格的显示文本？**

*更新*

我问这个问题是因为我正在尝试解决[这个问题](https://stackoverflow.com/questions/11431677/how-to-vba-sends-a-async-xmlhttp-request)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T10:12:20.353

我不确定这是否会有所帮助，因为很难说出您的基本要求是什么，但无论如何：

有几件事会影响单元格的*显示*：

1.  输入的值，如果它是一个常数
2.  计算的结果，如果它是一个公式
3.  单元格的格式
4.  单元格的条件格式（如果有）

在提供的示例表中，您有一个公式，`=ROW()&COLUMN()`该公式返回的字符串结果为`22`

您可以通过应用单元格格式使此*显示*
其他内容， 例如，格式`0;0;0;Ov\e\r\ri\d\d\e\n t\ext`将显示*任何*字符串值`Overridden text`

这可以通过与 VBA 一起应用

```
Range("B2").NumberFormat = "0;0;0;Ov\e\r\ri\d\d\e\n t\ext\s" 
```

或者

```
Range("B2").NumberFormat = "0;0;0;""Overridden texts""" 
```

# android - 从字符串中提取文本

> ID：11429502
> 
> 赞同：-3
> 
> 时间：2012-07-11T09:24:13.803
> 
> 标签：android, string

我有一个字符串，在这个字符串中我有一个两个字符之间的 url # 例如“Hello world #http://thisurl# 我的名字是 Pippo” 我想在两个 # 之间获取 url (http://thisurl)。

我能怎么做 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:33:43.863

```
 String data[] = str.split("#"); //spilliting string and taking into array
     ArrayList<String> urlList = new ArrayList<String>();
     for (int i = 0; i < data.length; i++) {
         if(data[i].contains("http://"))
            urlList.add(data[i]); //if string contains "http://" it means it is url save int list.

    } 
```

`urlList.get(i)`现在您可以从方法中获取所有 uls 。

此 urlList 将为您提供字符串中所有可用的 url。我努力应用任何空值或其他检查。应用它并尝试。如果想要其他内容，请尝试修改内容并检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:26:53.197

试试 String.split()。你真的应该先尝试谷歌这些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:34:50.637

这是一个例子 - [http://www.java-examples.com/java-string-split-example](http://www.java-examples.com/java-string-split-example)

split 方法将一个字符串分成几个字符串，并使用您可以定义的分隔符将它们存储到一个数组中。结果数组中的第二个元素将是您的 URL

# maven - 如何在 maven repo 中为 clojure 项目使用库？

> ID：11429506
> 
> 赞同：27
> 
> 时间：2012-07-11T09:24:27.533
> 
> 标签：maven, clojure, leiningen

我使用 Leiningen 来管理我的 CLJ 项目。当我想包装一个Java库时，我发现我必须先将它引入我的项目。

如何在我的项目中使用 Maven 存储库中的库？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-11T09:37:27.697

您只需要将它添加到您的 project.clj 依赖项中，就像任何其他 clojure lib 一样。小的区别是java库除了artifactId之外还有一个groupId。例如，要导入 active-mq 库，您需要添加到您的 :dependencies

```
[org.apache.activemq/activemq-core "5.5.0"] 
```

第一位是 groupId，第二位是 artifactId。

此外，如果该库不在中央 maven 存储库中，您将需要将存储库配置添加到您的项目中。例如，要添加 sonatype 快照存储库：

```
:repositories {"sonartype snapshots" "https://oss.sonatype.org/content/repositories/snapshots"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:33:40.207

获取库的 groupId、artifactId 和 version，添加到 lein 的依赖项中，与同一个 clojure 项目，小区别是：从[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)下载。

# java - 如何停止提交给 ExecutorService 的 Callable？

> ID：11429509
> 
> 赞同：11
> 
> 时间：2012-07-11T09:24:33.973
> 
> 标签：java, multithreading

我正在尝试实现一个示例应用程序来测试`Callable`和`ExecutorService`接口。

在我的应用程序中，我已经声明：

```
ExecutorService exSvc = Executors.newSingleThreadExecutor(); 
```

然后：

```
Future<Integer> test = exSvc.submit(
    new Callable<Integer>() {
        public Integer call() {
            for(int i = 0; i < 1000; i++){
                System.out.println(i);
            }
            return 1;
        }
    }); 
```

现在我试图在它终止之前停止该过程，我正在使用`exSvc.shutdownNow()`但它不起作用。

为了优雅地停止经典`Thread`，我通常使用某种*条件变量*。遵循哪种常见方法`ExecutorService`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T09:35:26.353

`Future.cancel(true)`并`ExecutorService.shutdownNow()`使用线程中断。只要您不在任务中进行不间断的阻塞调用，您所需要的就是正确处理中断条件，如下所示：

```
for(int i = 0; i < 1000; i++){
    // Uses isInterrupted() to keep interrupted status set
    if (Thread.currentThread().isInterrupted()) {
        // Cannot use InterruptedException since it's checked
        throw new RuntimeException(); 
    }
    System.out.println(i);
} 
```

如果您进行不间断的阻塞调用（例如网络 IO），事情会变得更加复杂，您需要以某种方式手动中断它们，例如通过关闭底层套接字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:34:20.597

这就是我的做法`FixedThreadPool`，希望对你有所帮助。

```
 ExecutorService pool = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());

    List<Future<Void>> results = new ArrayList<>();

    for (int i = 0; i < numberOfJobs; i++) {
        MyCallableJob job = new MyCallableJob (...);
        results.add(pool.submit(job));
    }

    for (Future<Void> result : results) {
        try { result.get(); }
        catch (InterruptedException | ExecutionException ignorable) { }
    }

    pool.shutdown(); 
```

# c# - 具有 FieldOffsetValueAttribute 的结构

> ID：11429514
> 
> 赞同：0
> 
> 时间：2012-07-11T09:24:54.777
> 
> 标签：c#, attributes, struct

我目前正在阅读一些结构，并遇到了一个与属性一起使用的结构示例。在示例中，使用的 struct 属性是`[FieldOffset(0)]`它所说的确保字段存储在同一块内存中。

这有什么好处或坏处？另外，为什么要使用`FieldOffsetAttribute`将字段放在内存的不同部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:37:11.330

这用于控制结构成员在内存中的确切偏移量。当您想在[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)调用的上下文中表示本机 (C++) 结构时，有时会在 C# 中使用它。

在 C# 中没有结构联合之类的东西，所以你必须使用`FieldOffsetValueAttribute`.

我建议您阅读[以下文章](http://www.developerfusion.com/article/84519/mastering-structs-in-c/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:55:47.790

我在某处看到过这个技巧，它将改变数组的底层类型，从 uint 到 int，**而不复制**数组的元素：

```
[StructLayout(LayoutKind.Explicit)]
struct ArrayTypeChanger
{
    [FieldOffset(0)]
    public int[] ArrayOfInts;

    [FieldOffset(0)]
    public uint[] ArrayOfUInts;
} 
```

以及某处的类型更改方法：

```
public static int[] ChangeArayType(uint[] input)
{
    return new ArrayTypeChanger { ArrayOfUInts = input }.ArrayOfInts;
} 
```

没有内存被复制，这应该使它非常快。当然，它仅在类型具有相同大小时才有效（sizeof(uint) == sizeof(int)）。不确定MS是否推荐这个......

更改此类数组类型的其他方法（例如 Marshal.Copy()）涉及某种内存复制，这可能是大型数组的问题。

# java - 从java将参数传递给批处理有效但没有结果

> ID：11429515
> 
> 赞同：0
> 
> 时间：2012-07-11T09:24:57.147
> 
> 标签：java, batch-file, bazaar

我正在尝试将版本控制添加到我的 Web 服务器（在 Windows 上，我知道......），我需要使用批处理脚本来自动添加和提交。这是我现在拥有的：

```
public static void bzr_add(String path, String commit) throws IOException {
    ProcessBuilder pb = new ProcessBuilder(scripts + "bzr_add.bat", storage, path, "\"" + commit + "\"");
    Process p = pb.start();
    String line;
    BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
    while ((line = r.readLine()) != null) {
        System.out.println(line);
    }
    r.close();
    try {
        p.waitFor();
    } catch (InterruptedException ex) {
        Logger.getLogger(local.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

“scripts”是可以找到脚本的目录，“storage”是存储目录，“path”是新文件的路径。

批处理脚本：

```
cd %1
bzr add %2
bzr commit -m %3 
```

我得到了什么：

```
Infos: C:\Program Files\glassfish-3.1.2\glassfish\domains\domain1>cd c:\storage_dir\ 
Infos: C:\storage_dir>bzr add dir\file.ext 
Infos: C:\storage_dir>bzr commit -m "commit_message" 
```

所以看起来没问题，当我在 cmd shell 中复制它时它可以工作（当我在 shell 中执行 bzr_add.bat par1 par2 par3 时它也可以工作）。如果我修改脚本以创建新文件，它们会在正确的目录中创建，因此可以正确执行某些内容。

但是当我通过 java 执行脚本时，bazaar 似乎并不同意这一点，有什么猜测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T06:34:31.387

我找到了自己问题的解决方案（尽管我不知道为什么需要这样做）。

我必须将此行添加到我的批处理文件中：

```
path = %PATH%;c:\Program Files\Bazaar\ 
```

这很奇怪，因为当我使用 cmd.exe 时它已经在路径中，但它是这样工作的。也许它会帮助有同样问题的人。

# android - 我的手机设备上的 adb shell：出现奇怪的字符（终端颜色问题）

> ID：11429520
> 
> 赞同：3
> 
> 时间：2012-07-11T09:25:15.007
> 
> 标签：android, adb

我有一台带有 DarkyRom 10.4.2 XWJW1 (Android 2.3.6) 和 root 访问权限的三星 Galaxy S。我正在实现一个应用程序，我想在我的手机中使用 eclipse 执行它，但我收到错误：ActivityManager: /sbin/sh: am: not found。我尝试使用 adb shell 查看发生了什么，如果我使用 ls 我得到：

```
<-[1;34macct<-[0m
<-[1;34mcache<-[0m
<-[1;34mconfig<-[0m
... 
```

我在 stackoverflow 中读到 am 错误可能是因为 am 文件中缺少行。我使用了busybox vi am，这就是我得到的：

```
<-999;999H<-[6n<-[1;1H<-[J
~
~
~
...
~
~<-[1;1H<-[24;1H<-[K- am 1/1 100%<-[1;1H 
```

有人知道为什么会出现这些奇怪的字符吗？我该如何解决？

编辑：谷歌搜索多一点我发现这是一个颜色问题。如果我使用 'ls --color=none' 我不再看到奇怪的字符，Windows 终端不支持颜色。但我仍然想编辑 am 文件，而 --color=none 不适用于 vi 命令。在“busybox vi am”中禁用颜色的命令是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:31:17.047

正如您所说，问题在于 Windows 控制台不支持 linux 控制台颜色技术。一个解决方案是使用带有 adb 支持的 putty。信息可以在这里找到：http: [//forum.xda-developers.com/showthread.php?t=803225](http://forum.xda-developers.com/showthread.php?t=803225)

# linq - 哈希登录然后用 linq 搜索它

> ID：11429522
> 
> 赞同：0
> 
> 时间：2012-07-11T09:25:15.807
> 
> 标签：linq, algorithm, entity-framework

我正在用 linq 编写一段代码，它必须散列一个字符串（在这种情况下是我的登录名），然后尝试在我的数据库中找到它。

我试过 ：

```
var userFind = context.Users.FirstOrDefault(user =>HashHelper.HashCode(user.Login).Equals(u.Login)); 
```

由于 HashCode，我得到了一个错误。我不会用 foreach 阅读我的所有列表。我想知道是否可以用一行代码来做到这一点。问候。

编辑：我找到了一种方法，但它没有我预期的那么轻。

```
 User userFind = null;
            foreach (var user in context.Users)
            {
                string hashedLogin = HashHelper.HashCode(user.Login);
                if(hashedLogin.Equals(u.Login))
                {
                    userFind = user;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:16:18.750

如果你没有太多用户，你可以像这样在一行上做。

```
var userFind = context.Users.ToList().FirstOrDefault(
    user => HashHelper.HashCode(user.Login).Equals(u.Login)) 
```

重要的一点是`ToList()`它评估 EF 部分并制作其余的 linq-to-objects。这意味着将在客户端进行比较，并且将从服务器检索所有用户。它相当于您的编辑。

如果性能是一个问题，您也应该将哈希码存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:31:59.410

如果数据库中的数据已经被散列并且 u.Login 是当前用户登录的值，那么你可能会这样做：

```
var hashedLogin = HashHelper.HashCode(u.Login); // hash the value in the app so it can be compared to already hashed values in database.
var userFind = context.Users.Where(user => user.Login == hashedLogin).FirstOrDefault(); 
```

我真的不太了解你想要达到的目标，所以如果这真的有帮助，我会感到惊喜。祝你好运！

# java - 根据客户时区在挂毯日期选择器中选择时区

> ID：11429528
> 
> 赞同：1
> 
> 时间：2012-07-11T09:25:26.743
> 
> 标签：java, javascript, tapestry

我们在表示层使用 Tapestry。现在我们有以下情况：

我们的应用程序将被来自不同国家、不同时区的不同用户使用。

在我们的应用程序中，我们使用 Tapestry 5.2.x 日期选择器，

那么我们如何允许根据用户的时区选择日期呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:18:55.473

[https://issues.apache.org/jira/browse/TAP5-841](https://issues.apache.org/jira/browse/TAP5-841)

根据我的评论，补丁确实有效。即使用字符串（2012-01-01）而不是数字（自纪元以来的毫秒）。

# android - 从路透社获取金融股关键发展链接

> ID：11429530
> 
> 赞同：1
> 
> 时间：2012-07-11T09:25:29.543
> 
> 标签：android, yql, stocks, yahoo-finance, reuters

我正在开发一个使用 YQL 提供股票信息的 android 应用程序。在 Yahoo 交互式图表中，有如下链接所示的 **关键发展：http:** [//finance.yahoo.com/echarts?s=MSFT+Interactive#symbol=msft;range=1y;compare=;indicator=ke_sd+volume;图表类型=面积；十字准线=on；ohlcvalues=0；logscale=on；源=未定义](http://finance.yahoo.com/echarts?s=MSFT+Interactive#symbol=msft;range=1y;compare=;indicator=ke_sd+volume;charttype=area;crosshair=on;ohlcvalues=0;logscale=on;source=undefined)；

雅虎从路透社获取关键发展信息。链接：http: [//in.reuters.com/finance/stocks/MSFT.OQ/key-developments](http://in.reuters.com/finance/stocks/MSFT.OQ/key-developments)

如果有人能指出我如何使用 web 服务或 rss 提要或任何其他可能的方式从 Reuters 在 android 中获得**关键开发，那将非常有帮助。**提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:32:45.093

这是[网页在加载图表时请求的文件](http://chartapi.finance.yahoo.com/instrument/1.0/msft/chartdata;type=quote;ys=2005;yz=4;ts=1234567890/csv)。更好的是，如果您`/csv`将 url 中的部分交换为`/json`，[您将得到一个带有一些闪亮 JSON 的文件](http://chartapi.finance.yahoo.com/instrument/1.0/msft/chartdata;type=quote;ys=2005;yz=4;ts=1234567890/json)，更适合 Android 使用。

# visual-studio-2010 - 如何使 AutomationFactory 可用于共享点站点中的 Silverlight 应用程序？

> ID：11429532
> 
> 赞同：0
> 
> 时间：2012-07-11T09:25:42.853
> 
> 标签：visual-studio-2010, silverlight-4.0, sharepoint-2010, windows-server-2008

我正在尝试创建一个 silverloght 应用程序来打开 Visual Studio 并将其部署为 sharepoint 站点中的 webpart。我正在使用以下代码：

**动态 cmd = AutomationFactory.CreateObject("WScript.Shell"); cmd.Run("devenv.exe", 1, true);**

这在独立的 silverlight 应用程序中运行良好，但是，当我将它作为 webpart 添加到 sharepoint 站点中时。它给出了“当前上下文不支持此操作”的错误。

根据我的搜索，其原因可能是 AutomationFactory 不适用于此应用程序，因为它需要提升权限。

我是否必须提供对共享点站点的提升权限，如果是，那么该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:27:22.810

您需要执行一些配置以允许使用`AutomationFactory`：

1.  使用 silverlight 5（版本 4 是不允许的）
2.  设置注册表键以允许浏览器内提升模式
3.  使用证书签署 Xap，该证书安装在“受信任的根”的用户证书存储中
4.  在客户端机器上安装 silverlight 应用程序

您可以通过谷歌搜索找到正确的方法，它在许多博客中都有描述

# ios - iOS 6 集合视图

> ID：11429539
> 
> 赞同：7
> 
> 时间：2012-07-11T09:26:14.600
> 
> 标签：ios, ios6, uicollectionview

我喜欢 Apple 在 iOS6 SDK 中引入的那些集合视图。但是我的 iPad 没有升级到 6.0，所以有一个问题。如果我将部署目标设置为 5.1，我能否使用他们在 6.0 中添加的那些新 GUI 元素？还是我必须自己编写类似 Collection View 的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:24:26.647

您可能想看看[PSTCollectionView](https://github.com/steipete/PSTCollectionView)。

> 开源，100% API 兼容替换 UICollectionView for iOS4.3+

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T06:46:13.377

`UICollectionView`类仅适用于 iOS 6.0 或更高版本。您必须将部署目标设置为 6.0（或更高版本）才能使用它。Xcode 4.5 或更高版本支持 iOS 6 开发。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T21:02:28.233

建立在 ohho 所说的基础上，您不必为 6.0 和更高版本构建即可使用它，如果它可用，则可以通过在运行时检查类的存在来使用它，您仍然可以将部署目标设置为 4.3。

这意味着你必须在运行时检查你是否有这个`UICollectionView`类。如果你不这样做，那么你必须做你以前做过的任何事情，我通常使用`AQGridView`.

要了解如何在运行时检查类和/或功能，请查看这篇文章：[https ://stackoverflow.com/a/12590035/662605](https://stackoverflow.com/a/12590035/662605)

# c# - 将 JSON 反序列化为几个 C# 子类之一

> ID：11429546
> 
> 赞同：11
> 
> 时间：2012-07-11T09:26:50.653
> 
> 标签：c#, json, inheritance, deserialization

我有一个看起来像这样的 json 结构：

```
"list":[
  {
    "type":"link",
    "href":"http://google.com"
  },
  {
    "type":"image",
    "src":"http://google.com/logo.png"
  },
  {
    "type":"text",
    "text":"some text here"
  },
] 
```

我想将其反序列化为对象列表，其中每个对象都是基类的子类。列表中的每个项目都有不同的属性（href、src、文本），所以我不能使用同一个类来达到一个。相反，我想要一个普通类的三个子类。JSON 列表中每个项目的 type 属性可用于决定使用哪个子类。例如，我可以有以下课程

```
public Item{
  public string type {get; set;}
}
public LinkItem : Item {
  public string href {get; set;}
}
public ImageItem : Item {
  public string src {get; set;}
}
public TextItem : Item {
  public string text {get; set;}
} 
```

有没有办法做到这一点？还是有更好的方法来反序列化异构对象类型列表？

**[编辑：](http://json.codeplex.com/)**

顺便说一句，我正在使用 json.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:54:22.537

正如@AmithGeorge 建议的那样，您可以使用一个`dynamic`对象来动态解析您的 json 对象。您可以使用[Shawn Weisfeld 为 JSON 编写的这个出色的动态类](https://github.com/robconery/Manatee)。[这是他的博客，解释了他是如何做到的](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx)。

```
JavaScriptSerializer jss = new JavaScriptSerializer();
jss.RegisterConverters(new JavaScriptConverter[] { new DynamicJsonConverter() });

dynamic glossaryEntry = jss.Deserialize(json, typeof(object)) as dynamic;

Console.WriteLine("glossaryEntry.glossary.title: " + glossaryEntry.glossary.title);
Console.WriteLine("glossaryEntry.glossary.GlossDiv.title: " + glossaryEntry.glossary.GlossDiv.title);
Console.WriteLine("glossaryEntry.glossary.GlossDiv.GlossList.GlossEntry.ID: " + glossaryEntry.glossary.GlossDiv.GlossList.GlossEntry.ID);
Console.WriteLine("glossaryEntry.glossary.GlossDiv.GlossList.GlossEntry.GlossDef.para: " + glossaryEntry.glossary.GlossDiv.GlossList.GlossEntry.GlossDef.para);
foreach (var also in glossaryEntry.glossary.GlossDiv.GlossList.GlossEntry.GlossDef.GlossSeeAlso)
{
    Console.WriteLine("glossaryEntry.glossary.GlossDiv.GlossList.GlossEntry.GlossDef.GlossSeeAlso: " + also);
} 
```

# inheritance - 无法将类型“类”隐式转换为“接口”

> ID：11429553
> 
> 赞同：2
> 
> 时间：2012-07-11T09:27:06.793
> 
> 标签：inheritance, interface, linked-list

我有两个共享代码的项目。原始源文件位于项目/命名空间“ns1”中；它引用了项目/命名空间“ns2”。我也不能在另一个方向上添加引用，因为这会产生循环依赖。为了解决这个问题，我在 Visual Studio 中通过“添加为链接”将“接口 I”添加到“ns2”。

这基本上是共享代码的定义：

```
 namespace ns1
 {
    public interface I { }

    public class A : I { }
 }

 namespace ns2
 {
    using ns1;

    public class B : I { }
 } 
```

如果我这样做：

```
 namespace ns1
 {
    public class C
    {
       public method m()
       {
          List<I> list = new List<I>();
          list.Add(new A());
       }
    }
 } 
```

构建成功。但如果我这样做：

```
 namespace ns1
 {
    using ns2;

    public class C
    {
       public method m()
       {
          List<I> list = new List<I>();
          list.Add(new B());
       }
    }
 } 
```

构建失败 - “无法将类型 'ns2.B' 隐式转换为 'ns1.I'”。

有人可以解释/提供解决方案吗？

# c++ - 如何在单击静态控件时显示工具提示并在使用专门的 win32 c++ api 在其他地方单击时隐藏工具提示

> ID：11429559
> 
> 赞同：3
> 
> 时间：2012-07-11T09:27:24.170
> 
> 标签：c++, winapi, tooltip

我知道如何正常制作工具提示。但问题是当鼠标指针超出控制时会出现工具提示。我希望单击静态控件时出现工具提示。

我只想在用户单击静态控件时显示工具提示，如果用户在控件外部单击则隐藏工具提示。应该处理哪些消息以及如何处理？任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:21:45.743

谢谢您的帮助。我不需要创建或销毁子窗口。我处理了 WM_LBUTTONDOWN 消息以隐藏工具提示。它可以按照以下链接中给出的方式实现。[msdn.microsoft.com/en-us/library/hh298405%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/hh298405%28v=vs.85%29.aspx)

# c# - DataGrid to excel不显示自动网格线

> ID：11429560
> 
> 赞同：0
> 
> 时间：2012-07-11T09:27:24.353
> 
> 标签：c#, excel, datagrid, ashx

想知道是否有人可以提供帮助。我有一个 .ashx 文件，它创建了一个填充有 C# DataGrid 的 excel 文档。这一切都很好，唯一的问题是当我打开 excel 文档时，自动网格线被关闭。有没有办法启用它们？

提前致谢， 空气

```
HttpResponse response = HttpContext.Current.Response;

            response.Clear();
            response.Charset = "";
            response.ContentEncoding = System.Text.Encoding.Default;
            response.ContentType = "application/vnd.ms-excel";
            response.AddHeader("Content-Disposition", "attachment;filename=\"dataImportTemplate.xls\"");
            using (StringWriter sw = new StringWriter())
            {
                using (HtmlTextWriter htw = new HtmlTextWriter(sw))
                {
                    System.Web.UI.WebControls.DataGrid dg = new System.Web.UI.WebControls.DataGrid();
                    dg.DataSource = ds.Tables[0];
                    dg.ShowHeader = false;
                    dg.DataBind();                    
                    dg.RenderControl(htw);
                    response.Write(sw.ToString());
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:12:52.730

如果您导出到 csv，它会保留网格线。这是很多人选择使用的非常简单的解决方法。

[在此处](https://stackoverflow.com/questions/2376204/export-gridview-to-excel-without-losing-grid-lines-in-excel)查看类似的帖子

该帖子包含一个帮助函数，据说可以将网格线添加到您的导出中。

希望这可以帮助。

# mysql - Mysql复制不起作用

> ID：11429561
> 
> 赞同：0
> 
> 时间：2012-07-11T09:27:24.590
> 
> 标签：mysql, master-slave

我正在使用 mysql 5.22 版本进行主从复制。当我执行 show slave status 命令时，它将 slave_io_state 显示为正在连接。如何解决这个问题呢。

请同样帮助我。

问候，

亚萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:48:53.177

从[这里](https://stackoverflow.com/questions/2388682/mysql-slave-not-updating)——

> 在主数据库上运行“显示主状态”。它会给你正确的值来更新你的奴隶。从您的从站状态来看，您的从站似乎已成功连接到主站并正在等待日志事件。对我来说，这意味着您的从属用户已正确设置，并且具有正确的访问权限。看起来你只需要同步正确的日志文件位置。小心，因为要获得良好的同步，您可能应该停止主服务器，转储数据库，记录主日志文件位置，然后启动主服务器，将数据库导入从服务器，最后使用正确的从模式启动从服务器主日志文件位置。我已经这样做了大约 30 次，如果您几乎没有完全按照这些步骤进行操作，那么您的同步将会失败。

否则再次通过[这个](http://dev.mysql.com/doc/refman/5.1/en/replication-howto.html)（如何设置复制），看看是否有一些配置问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:02:38.117

如果`Slave I/O`线程显示`Connecting to Master`状态，请检查以下内容：

1.  验证用于在主服务器上进行复制的用户的权限。
2.  检查主服务器的主机名是否正确，并且您使用正确的端口连接到主服务器。用于复制的端口与用于客户端网络通信的端口相同（默认为 3306）。对于主机名，确保名称解析为正确的 IP 地址。
3.  检查主设备或从设备上的网络是否已禁用。在配置文件中查找 skip-networking 选项。如果存在，请将其注释掉或删除。
4.  如果 master 有防火墙或 IP 过滤配置，请确保用于 MySQL 的网络端口没有被过滤。
5.  检查您是否可以通过使用 ping 或 traceroute/tracert 访问主机来访问主服务器。

# c# - 如何在建立与 SQL 的连接时实现功能，即控制“Incr Pool Size”或“Decr Pool Size”？类似于甲骨文

> ID：11429562
> 
> 赞同：2
> 
> 时间：2012-07-11T09:27:26.820
> 
> 标签：c#, .net, sql, sql-server, ado.net

我问了一个关于“Incr Pool Size”或“Decr Pool Size”的问题

[如何解决 SqlConnection 错误“不支持关键字：'decr 池大小'。”](https://stackoverflow.com/questions/11427362/how-to-resolve-sqlconnection-error-keyword-not-supported-decr-pool-size/11427442#comment15077277_11427442)

这是另一个与此相关但不同的问题，简而言之，ORACLE 连接字符串提供了这两个选项来分别在连接池为空或已满时增加/减少连接对象。我们如何使用 SQL 来实现这一点。

编辑：为什么我想知道，因为我正在创建一个中间件，我正在使用多个并行线程（例如 60 个）写入数据库，我在想的是当我来自池的所有连接（例如 50 个）都在使用和新的一堆线程尝试创建连接 sql server 会在池中创建另一组连接，即 50，还是会一个一个地创建这个超出的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:57:23.493

SqlClient 根据提供的[`MaxPoolSize`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.maxpoolsize)和[`MinPoolSize`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.minpoolsize)参数自动管理池大小。默认值分别为 100 和 0。

# oop - 从 ER 方式过渡到 OOP 方式

> ID：11429563
> 
> 赞同：0
> 
> 时间：2012-07-11T09:27:27.097
> 
> 标签：oop, class, database-design, domain-driven-design, entity-relationship

来自传统的 ER 图以数据库为中心的方法来设计应用程序，使用 OO 方法实现类会导致混淆，如下面的示例所示

1) 实现多对多关系的类。

假设您有两个实体，Professor 和 College，具有以下关系（我不知道如何绘制 SO，否则我会用图表说明示例）：

*   一位教授可能在不同的学院以不同的身份工作，例如讲师、客座讲师、实验室助理、研究员等。
*   一所大学可能/将有许多教授担任不同职位，如讲师、客座讲师、实验室助理、研究员等。

以 ER 方式执行此操作，我们将拥有这样的表格

> CollegeTable (CollegeId, CollegeName)
> ProfessorTable (ProfessorId, ProfessorName))
> LecturerTable (LecturerId, CollegeId, ProfessorId, Timings))

因此，多对多关系是一个包含实体主键和其他关系特定数据的表。如果我必须创建类来表示我的表的行，它们会像

```
class CollegeData
{
    string CollegeId;
    string CollegeName;
}

class ProfessorData
{
    string ProfessorId;
    string ProfessorName;
}

class LecturerData
{
    string CollegeId;
    string ProfessorId;
    DateTime Timings;
} 
```

但是在 OOP 中做同样的事情并将实体映射到类，我们将有如下

```
class College
{
    string CollegeId;
    string CollegeName;
}

class Professor
{
    string ProfessorId;
    string ProfessorName;
}

class Lecturer
{
    College aCollege;
    Professor aProfessor;
    DateTime Timings;
} 
```

所以现在做正确的 OO 方式会在系统上引入更多负载，因为现在我们在多对多类中创建完整的类对象，而不是只有 ID 字段。当我们说讲师添加/编辑页面时，请考虑这个含义，我们可以在其中编辑计时或更改教授。我们不需要完整的教授或学院对象（因为它们将有自己的母版页用于添加/编辑），只需要它们的 ID。

2) 实现一对一关系的类。

扩展上面的例子，假设我们有一个具有以下约束的院长实体（为简单起见，假设院长不是教授）

*   一所学院可以有一位院长，一个人只能在一所学院担任院长。

我们将再次采用 ER 方式

```
class DeanData
{
    string DeanId;
    int DeanExp;
}

class CollegeData
{
    string CollegeId;
    string CollegeName;
    string DeanId;
} 
```

，同时以 OOP 方式进行

```
class Dean
{
    string DeanId;
    int DeanExp;    
}

class College
{
    string CollegeId;
    string CollegeName;
    Dean aDean; 
} 
```

在保存或加载数据时，将 OO 对象与其表结构表示映射到关系数据库中也存在问题。有没有什么办法可以以正确的面向对象的方式完成上述操作，但没有“冗余”？或者这是以 OO 方式做事的惩罚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:47:00.850

如您所见，问题实际上比您描述的要糟糕一些，因为您称之为“正确的 OO 方式”实际上应该在一对多关系的一端具有反向引用。

例如，您的 College-Lecturer-Professor 模型应该更像这样：

```
class College 
{ 
    string CollegeId; 
    string CollegeName; 
    List<Lecturer> aLecturers;  // <=NOTE THIS
} 

class Professor 
{ 
    string ProfessorId; 
    string ProfessorName;
    List<Lecturer> aLecturers;  // <=NOTE THIS
} 

class Lecturer 
{ 
    College aCollege; 
    Professor aProfessor; 
    DateTime Timings; 
} 
```

当您观察到这会产生开销时，您是对的，因为您的数据库仅包含整数外键值的成熟对象。

重要的区别是您不应该将存储在 DBMS 中的所有数据同时加载到对象层次结构中。

从编码的角度来看，很多人喜欢使用 ORM 框架来自动创建对象。ORM 可以消除大量基于适当设计的关系数据库构建对象的繁重工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:28:32.230

如果您的目标是基于 DDD 原则设计模型，那么您不希望模型中存在双向关联。

Udi Dahan 就这个主题写了一篇很好的博客文章，我建议您阅读：

[DDD 和多对多对象关系映射](http://www.udidahan.com/2009/01/24/ddd-many-to-many-object-relational-mapping/)

# php - 我需要根据访客视口调整图片大小

> ID：11429567
> 
> 赞同：2
> 
> 时间：2012-07-11T09:27:33.397
> 
> 标签：php, javascript, jquery, ajax

伙计们，请温柔，我不是专业的程序员，只是一个网站管理员，我需要一些帮助。这是我的问题：

我正在使用 php 运行一个网站。我想向我的成员展示图片，但我希望这些图片保持在特定的大小限制内，这样它们就不会导致访问者水平滚动以查看整个图片。到目前为止，我已将上传图片的大小限制为 800x600 作为最小公分母。但是，我认为应该允许拥有更大显示器的用户看到更大的图片，因此我计划取消 800x600 的限制，但我仍然想确保显示的图像不会大于访问者视口（实际上让我们说 2/3 的视口）。

现在，我知道 php 在服务器上运行而 javascript 在客户端上运行，并且没有简单的方法可以将视口尺寸传递给 php 代码，我尝试过但惨遭失败，所以这很清楚。

但我也读过（尤其是在这个网站上）有一些方法可以做到这一点，使用 JQuery 和/或 Ajax。我的主要问题？我不知道如何用 Javascript、JQuery 或 Ajax 编程。所以我的问题是：为了在我的程序生成的语句中使用浏览器宽度，我应该在我的 php 文件中包含什么以使客户端将浏览器宽度返回给 php 文件或我的 html 模板？

如果我理解这一点，当访问者要求查看页面并且我的服务器将我的页面结果发送给他们时，应该有一些代码会将浏览器宽度发回给我，然后服务器将重新发送页面，使用它收到的价值。我这样做对吗？如果这是它的工作方式，那么如果我可以获取该浏览器宽度值并将其存储在 php 全局变量中，那将是理想的，这样就不会每个页面都生成两次。可以这样做吗？

请非常具体，正如我所说，我是这些事情的新手。

不用说，任何帮助将不胜感激。

非常感谢您的关注。

PS：我已经在我的服务器上下载并安装了 JQuery，但我不知道如何使用它来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:38:19.000

尝试`style="max-width:100%;"`

演示：http: [//jsfiddle.net/5HeG2/1/](http://jsfiddle.net/5HeG2/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:45:48.737

我写了这个简单的片段来帮助你开始。正如您所说，您需要根据客户端大小调整图像大小，并且您提到您将寻找与 ajax/jquery 相关的内容。

[我在这里使用github](https://github.com/whizzzkid/phpimageresize)提供的图像大小调整/缓存脚本来加载示例图像，最高可达可用浏览器宽度的 80%。

事不宜迟：

1.  索引.php

    ```
    <html>
    <head>
        <script>
        function getImg(img){
            if (img==""){
                return;
            }
            width = screen.availWidth;
            if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }else{// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function(){
                if (xmlhttp.readyState==4 && xmlhttp.status==200){
                    document.getElementById("img_div").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","resizer.php?i="+img+"&w="+width,true);
            xmlhttp.send();
        }
        </script>
    </head>
    <body>
        <center>
        <div id="img_div" style="left:0px; top:0px; height: 100%; width:100%;">
                <a href="#" onClick="getImg('xyz.jpg');">Show The Image</a>
        </div>
        </center>
    </body> 
    ```

2.  大小调整器.php

    ```
    <?php
    //resizing library
    include 'function.resize.php';

    $i = $_GET['i'];
    $w = $_GET['w'];
    echo "Image Requested: ".$i." ; Client's Browser Width: ".$w."px";
    $w = 0.8*$w;
    echo " ; We will show 80% of width: ".$w."px";
    $i_settings['w'] = $w;
    echo '<img src="'.resize($i,$i_settings).'" />';
    ?> 
    ```

3.  来自[github的function.resize.php](https://github.com/whizzzkid/phpimageresize)

4.  您想要的图像（[在我们的例子中是 1920x1080](http://clients.nishantarora.in/projects/user1517199/xyz.jpg)的图像）

现在代码几乎是不言自明的。但事情有时会变得有点混乱。所以[点击这里](http://clients.nishantarora.in/projects/user1517199)查看工作示例并告诉我这是您正在寻找的解决方案吗？

希望我有所帮助！问候

# html - 获得正确的媒体查询以覆盖此宽度的电话、表格和常规屏幕

> ID：11429568
> 
> 赞同：1
> 
> 时间：2012-07-11T09:27:40.840
> 
> 标签：html, css, responsive-design, media-queries

我正在做一个项目，我们已经做了响应式设计并使用媒体查询。现在我阅读了 Aaron Gustavson 的[Adaptive Web Design](http://easy-readers.net/books/adaptive-web-design/) [、Ben Frain 的 Responsive Web Design with HTML5 and CSS3](http://www.packtpub.com/responsive-web-design-with-html-5-and-css3/book)和其他在线网站。这是一件事，我仍然有点不确定我是怎么走的，那就是媒体查询我选择的宽度。

我们决定使用 twitter bootstrap 样式（不使用它），它会卡入到位，而不是让它流动。

3 种类型
的手机 - 尺寸？
平板电脑 - 980 像素（横向和纵向
屏幕 - 1160 像素

我的问题是我应该使用哪些媒体查询来解决这个问题？我真的很感激帮助，这对我来说是最困难的部分之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:08:54.180

[LESS 框架](http://lessframework.com/)和[Twitter Bootstrap](http://twitter.github.com/bootstrap/scaffolding.html#responsive)都采用了有趣的方法。

LESSframework 针对 4 种模式：

*   大 - 992px w +
*   平板电脑 - 768px w
*   移动 1 - 480 像素宽
*   移动 2 - 320 像素宽

Twitter Bootstrap 有五个目标：

*   大 - 1200px w +
*   大 - 980px w
*   平板电脑 - 768px w
*   移动 1 - 480-767px w
*   移动 2 - < 480 像素宽

我建议使用其中一个（或另一个）响应式 CSS 框架和/或 LESS/SASS 来实现您想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:46:50.313

您可以使用自定义媒体查询，但作为标准设备媒体查询，请参阅此链接：

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:40:31.903

对媒体查询采取与设备无关的方法：

[http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/](http://coding.smashingmagazine.com/2012/03/22/device-agnostic-approach-to-responsive-web-design/)

定位一系列视口，并通过响应式设计让您的布局拉伸或收缩以填充空间。

具有不同视口的设备源源不断地进入市场。瞄准特定维度是一场失败的游戏，使用视口范围的更通用的方法是一个很好的策略。

# java - concat char in sysout gives weird output?

> ID：11429571
> 
> 赞同：3
> 
> 时间：2012-07-11T09:27:43.113
> 
> 标签：java, char, concat

When I run the following code it doesn't give me the output that I've been excepted. Consider the following code-snippet:

```
public class T
{
    public static void main(String arg[])
    {
        char a='3';
        System.out.println(a+a);
    }
} 
```

The output here is : 102

Could please anybody explain that to me ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:31:58.563

The `+` operator applies an implicit type cast which converts the two characters into their numerical ASCII representation which is 51.

So the expression

```
'3'+'3' 
```

can also be seen as

```
51 + 51 
```

which is 102.

I assume what you want to have is the result `"33"` which is not a char any more but a string. To achieve this you can for example simply implicitly convert the result of the expression into a string:

```
char c = '3';
string s = "" + c + c; 
```

Another possibility would be to facilitate the StringBuilder class:

```
char c = '3';
String s = new StringBuilder().append(c).append(c).toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:30:56.943

a+a is interpreted as a formula.

since ascii value of '3' is 51, 51 + 51 = 102.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:31:18.207

It is just the sum of ascii values

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:51:27.763

you can see c+c as 51 + 51, because it takes the ascii code of '3'. if you want to print 33, then you can try this:

```
System.out.println(String 
```

.format("%c + %c", c, c));

# android - CSS @keyframes 动画闪烁

> ID：11429575
> 
> 赞同：1
> 
> 时间：2012-07-11T09:27:53.920
> 
> 标签：android, ios, css

如何[`@-webkit-keyframes`](http://www.w3schools.com/cssref/css3_pr_keyframes.asp)在迭代结束时修复动画闪烁？

[`transform`](http://www.w3schools.com/cssref/css3_pr_transform.asp)在 Android 2 上使用 CSS3值进行动画处理非常明显`translate`，`translate3d`并且`opacity`.

您可能会在某些帖子中注意到修复它的建议：

```
-webkit-transform: translate3d(0,0,0); 
```

或者

```
-webkit-perspective: 1000;
-webkit-backface-visibility: hidden; 
```

但在 Android 2.3 上对其进行测试后，我注意到其中没有一个真正解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:27:55.620

George Hess 在他的博客中发布了一个[有效的修复程序](http://georgehess.com/post/2054803814/css-keyframe-animation-flicker)，提到：

> 闪烁是由动画重置到开始 keframe 仅一瞬间引起的。即使您将动画 CSS 类的样式设置为保持在原处并在完成动画时继承最后一个关键帧的样式，也会发生这种情况。我能想出的唯一解决方案是使用超过 2 个关键帧。

例如，如果以下代码闪烁：

```
@-webkit-keyframes 'slide-in' {
    from { -webkit-transform: translateX(100%); }
    to { -webkit-transform: translateX(0); }
} 
```

将其更改为以下将解决问题

```
@-webkit-keyframes 'slide-in' {
    from { -webkit-transform: translateX(100%); }
    99% { -webkit-transform: translateX(0); }
    to {} /* equals `100% {}` Leave it empty to fix the flicker */
} 
```

**结论：**留空（不要设置参数）动画持续时间的结束`to {}`/`100% {}`旁边设置动画参数的结束`99% {}`或持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T13:55:12.947

我无法让@Binyamin 的解决方案正常工作，但在调试另一个问题时设法解决了这个问题，只需添加`-webkit-animation-fill-mode: forwards;`

# java - 是否可以将枚举属性的空值存储到数据库？

> ID：11429577
> 
> 赞同：8
> 
> 时间：2012-07-11T09:28:11.170
> 
> 标签：java, database, oracle, jpa, enums

我正在尝试使用 JPA TopLink将**Java**中实体的**枚举属性的****空**值存储到**Oracle数据库。**代码执行时没有异常或警告，但实体未存储在数据库中。

 ******实体定义如下：

```
@Entity
public class LetterDoc {
    ...
    @Column(name = "delivery_type", columnDefinition = "VARCHAR2(20)", nullable = true)
    @Enumerated(EnumType.STRING)
    private DocDeliveryTypeEnum deliveryType;
    ...
} 
```

Enum 类 DocDeliveryTypeEnum 只有必需的值。

```
public enum DocDeliveryTypeEnum {
    NORMAL,
    RECOMMENDED,
    ACKNOWLEDGEMENT
} 
```

在我的情况下，我有一些实体实例，其中deliveryType 有意义并且是必需的。但是，在某些情况下，deliveryType 是**无关紧要**的，我想将其保留为**null**。我不想设置默认值，因为这种情况没有足够的值。

实体实例的值设置为 null，但是当我尝试在数据库中持久化和刷新实例时，它只是没有被存储，尽管该列被定义为 VARCHAR2(20) 并启用了 NULL 值。

情况是这样的：

```
LetterDoc let = new LetterDoc();
// settery ostatnich atributu
let.setDeliveryType(null);
try {
    emptyDocDAO.persist(let);
    emptyDocDAO.flush();
} catch (Exception e) {
    // no exception is really catched :(
    log.error(e);
}
// here I have the id of the entity 
```

持久化时确实没有抛出异常，只是没有存储实体。当我稍后尝试通过 ID 在另一个线程中获取实体时，它会因 NoResultException 而失败。

有没有机会完成这项工作，或者我真的必须在坚持之前为所有枚举属性设置一个值？我真的必须在 Enum 类中创建一个默认值吗？

我通过设置在特定情况下没有多大意义的默认值解决了我的问题。但是，我想知道是否还有其他选择。

非常感谢您的经验和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T05:05:37.170

当您尝试将空值保存到枚举时，代码应该抛出 NullPointerException。如果 name 为 null，则 Enum.valueOf() 方法将引发 NullPointerException。

*let.setDeliveryType(null);*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:49:09.033

是的，您可以为枚举属性存储 null。

我看不出你怎么会一无所获，是否发生了你没有捕捉到的异常？

启用最好的日志记录并包含日志和您的代码，并捕获任何异常并包含堆栈跟踪。******

# jquery - jQuery：将数字字符串转换为某种标准格式

> ID：11429578
> 
> 赞同：1
> 
> 时间：2012-07-11T09:28:11.713
> 
> 标签：jquery

是否有任何 jQuery 插件可以将数字字符串转换为标准格式，比如说：

```
200000 to 2,00,000
1000 to 1,000
398740 to 3,987,40 
```

等等..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:31:29.527

试试这个：

```
var s = 200000;
var converted = s.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") 
```

[演示](http://jsfiddle.net/VzSKE/)

或者：

```
$.fn.convert = function() { 
    return this.each(function(){ 
        $(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")); 
    })
} 
```

您可以调用它来转换所选元素的文本，就像其他 jQuery 方法一样：

```
$('#elem').convert() 
```

# android - 如果用户在 android 中的图库中滚动，如何在 imageview 中的图库中显示中心图像

> ID：11429583
> 
> 赞同：0
> 
> 时间：2012-07-11T09:28:18.560
> 
> 标签：android, android-imageview, android-gallery

我在屏幕上有一个图像视图和画廊。在画廊中，我有很多图像。如果用户在图库中滚动，我需要显示图库中心图像应该显示在图像视图中。

谁能告诉我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:51:39.913

为您的画廊实施**`OnItemSelectedListener`**。**`onItemSelected`**你必须在函数内部实现你的逻辑

```
gallery.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:35:07.197

这假设需要更新的图像视图存储在一个名为 mImageView 的字段中，并且画廊中的视图是 ImageViews

```
gallery.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> adapter, View v, int position, long id) {
        mImageView.setImageDrawable(((ImageView)v).getDrawable());
    }
} 
```

# valgrind - Valgrind：错误的版本

> ID：11429586
> 
> 赞同：0
> 
> 时间：2012-07-11T09:28:29.450
> 
> 标签：valgrind

我下载了 Valgrind 3.7.0 并运行：

```
./configure
make
make install 
```

但是，当我运行 valgrind --version 时，我得到 3.5.0。这怎么可能？我正在运行 Mac OS X Lion 10.7。我知道我下载了 3.7.0，因为我从 Valgrind 的网站名称下载的 tar 文件是`valgrind-3.7.0`.

我可以通过哪些其他方式检查版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:58:53.960

默认情况下，`/usr/local/bin`当您从源代码编译而不提供`--prefix`.

（你*真的只是做* `./configure && make && make install`了并且有权安装，对吧？）

1.  看看是否`/usr/local/bin/valgrind`存在。

2.  执行`/usr/local/bin/valgrind --version`。什么是版本？

3.  执行`which valgrind`。这应该告诉您从哪里挑选 valgrind 二进制文件。是一样的吗？我的猜测是，可能不是。

4.  执行`echo $PATH`以查看您的路径。这给出了一个`:`分隔的目录列表，在这些目录中`bash`搜索可执行文件，按目录列出*的顺序。*

我的猜测是：

有一个`valgrind`旧版本的现有安装，它显示在一个目录中，该目录出现在您`$PATH`的`/usr/local/bin`.

# parsing - Grails 覆盖区域设置编号格式

> ID：11429595
> 
> 赞同：0
> 
> 时间：2012-07-11T09:29:06.617
> 
> 标签：parsing, grails

我有一个 Grails 应用程序，我想保存一个带小数位的数字，例如`902.11`. 在我的应用程序中，我使用捷克语言环境，因此小数点表示为逗号“，”而不是点“.”。但是在浏览器中我想通过Javascript做一些计算，所以小数点必须用“.”表示。

是否有解决方案，以便我可以在我的应用程序中自定义捷克语区域设置，以便使用“。” 代替 ”，”？或者有没有其他解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:55:29.657

您应该使用[formatNumber](http://grails.org/doc/latest/ref/Tags/formatNumber.html)标记并指定使用点作为小数位的语言环境，例如

```
<script ...>
    var someNumber = <g:formatNumber number="${myNumber}" locale="en" />;
    // ... do some javascript calculations
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T21:43:20.470

以供参考：

formatNumber 将在您将值写入页面时起作用，但 Lojza 可能希望将数字返回给控制器，这并不简单，因为 Grails 数据绑定器是特定于语言环境的，因此它会期望根据捷克语语言环境而不是基本的 JS 格式。

您可以覆盖对您的应用程序来说是全局的绑定值转换器（可能不是您想要的），或者使用命令对象并将数值检索到命令对象的字符串属性中，这样 Grails 就不会尝试应用任何数字解析就可以了。然后根据基本的 JS 格式手动将此字符串转换为数字。

# rubymotion - 如何在 RubyMotion 中调用 removeFromSuperview？

> ID：11429597
> 
> 赞同：0
> 
> 时间：2012-07-11T09:29:15.857
> 
> 标签：rubymotion

我希望在 RubyMotion中实现这个[解决方案。](https://stackoverflow.com/questions/5851205/how-to-remove-a-subview-or-all-subviews-of-a-view)

下面的陈述会是什么样子？

```
[self.tabsView removeFromSuperview] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:34:40.673

找到了 -

```
view.removeFromSuperview() 
```

# database - 部署 DB TFS MSBuild

> ID：11429598
> 
> 赞同：3
> 
> 时间：2012-07-11T09:29:17.500
> 
> 标签：database, deployment, tfs

我在部署我们的 ASP.net Webproject 时遇到以下问题。部署运行良好。我正在使用 TFS 2010 并通过 msbuild 参数（/p:DeployOnBuild=True 等）部署应用程序。

我遇到的问题是我们数据库的部署。目前我正在尝试使用 Web 项目的打包/发布 SQL 设置。目标数据库的连接字符串如下所示

数据源=SomeIP, 1433; 初始目录=MYDatabase；用户 ID=部署用户；密码=PW；

所以我尝试使用sql登录登录到sql server（sql server 2012，相应的用户是dbowner）但是每个db部署都失败了，因为msbuild总是尝试使用buildservice帐户登录到sql server。

一种解决方案可能是授予对构建帐户的 sql server 的访问权限。不幸的是，这对我们来说是不可能的，因为 dbserver 不在我们的域中。

有什么想法可以使用连接字符串中指定的 sql 登录来强制 msbuild 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T21:23:10.283

你有没有这样做：

“从 Web.config 导入在 Web.config 文件中查找连接字符串，并将它们的名称输入到数据库条目网格中，并附加“-Deployment”。您可以将“-Deployment”后缀更改为“-Web.config”（例如，将 "ConnectionStringName-Deployment" 更改为 "ConnectionStringName-Web.config") 以指定应使用 Web.config 文件中的连接字符串值进行部署。有关详细信息，请参阅稍后的目标数据库的连接字符串在这份文件中。”

它是否从您的 web.config 中获取连接字符串？

[http://msdn.microsoft.com/en-us/library/dd576376.aspx](http://msdn.microsoft.com/en-us/library/dd576376.aspx)

# php - 将模数与 cakephp html 帮助表一起使用

> ID：11429599
> 
> 赞同：0
> 
> 时间：2012-07-11T09:29:18.420
> 
> 标签：php, cakephp, html-helper, modulus

我有多个数组，每个数组的项目数量未知。我想将项目放在每行 4 个 td 的 html 表中。我们的工作有点迂腐，希望我们使用 cakephp 帮助程序，我有点不确定我将如何使用 HTML 帮助程序的模数，或者 cake 有办法确保在去之前每行只有 4 个 td下一行？

对不起，我真的不知道该怎么做，因此没有示例代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:17:14.987

Cakephp 1.3 带有页数和标签的分页器

```
echo $this->Paginator->prev('<<<', null, null, array('class' => 'disabled')).' ';
echo $this->Paginator->numbers(array('separator' => ' ','modulus'=>4,'tag'=>'li')).' ';
echo $this->Paginator->next('>>>', null, null, array('class' => 'disabled')).' '; 
```

这里模数=>页数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:36:57.223

如果您想依赖 Helper，这将不适用于 CakePHP 核心助手。

我已经为 CakePHP 2.x 的表编写了一个更强大的助手。

检查测试以获取示例[https://github.com/burzum/BzUtils/blob/master/Test/Case/View/Helper/TableHelperTest.php](https://github.com/burzum/BzUtils/blob/master/Test/Case/View/Helper/TableHelperTest.php)

您可以将匿名函数作为回调传递给一行，并根据需要在此处执行 td。您也可以直接更改代码并使您的帮助应用程序和案例具体化，但您不需要使用我的 TableHelper 执行此操作。

# javascript - 在 Javascript 中从 ASP.Net 的隐藏字段中获取值

> ID：11429603
> 
> 赞同：0
> 
> 时间：2012-07-11T09:29:42.190
> 
> 标签：javascript, asp.net

```
<body onload="timer()">
        <style type="text/css">
        #time{
        font-size:50pt;
        }
        #body 
        {
            background-color:#F3F3F3;
        }
        </style>
        <script type="text/javascript">
            var digiclock = document.getElementById("<%= HiddenFieldMinutes.ClientID %>").value;
            i = 0;
            function timer() {
                var digiformat = "";
                if (i > 3599) {
                    var H = Math.floor(i / 3600);
                }
                else {
                    var H = 0;
                }

                var M = i - (H * 3600)

                if (M > 59) {
                    M = Math.floor(M / 60)
                }
                else {
                    M = 0
                }
                var S = i - (M * 60)
                if (H < 10) {
                    H = "0" + H;
                }
                if (M < 10) {
                    M = "0" + M;
                }
                if (S < 10) {
                    S = "0" + S;
                }

                document.getElementById('time').innerHTML = H + ":" + M + ":" + S;
                setTimeout('timer()', 1000);
                i++;
            }
        </script>
            <table style="background-color:#F3F3F3;">
                <tr>
                <td><div><center><p style="font-family:Calibri;font-size:1.8em;color:#104E8B;">Total Elapsed Time</p> </center></div>
                </td></tr>
                <tr>
                <td><div id="time"><center>90</center></div>
                </td></tr>
                <tr>
                <td>
                <center>
                <form id="Form1" runat="server">
                <asp:HiddenField ID="HiddenFieldMinutes" runat="server" Value="" />
                    <asp:Button ID="btnStop" runat="server" Text="Stop" 
                        style="width:150px;height:30px;font-weight:bold;background-color:#104E8B;color:White;border:1px solid" 
                        onclick="btnStop_Click" /></form></center>
                        <input id="HiddenTaskname" type="hidden" value="123" runat="server" />
                    </td></tr>
            </table> 
```

正如您在上面看到的，我试图创建一个从用户提供的指定时间开始的时钟。我将开始时间段存储在隐藏字段中。此页面的此页面加载背后的代码如下：-

```
protected void Page_Load(object sender, EventArgs e)
    {
        HiddenFieldMinutes.Value = null;
        if (! IsPostBack)
        {
            //Checking for any query string
            if (Request["Code"] != null)
            {
                _elapsedNonProdTimeEntryID =Convert.ToInt32 (Request["Code"].ToString());
                _starttime = _nonProduction.GetStartTimeOfActiveTImeEntryID(_elapsedNonProdTimeEntryID);

                TimeSpan elapsedtimespan = System.DateTime.Now.Subtract(_starttime);
                string hh = elapsedtimespan.Hours.ToString();
                string mm = elapsedtimespan.Minutes.ToString();
                string ss = elapsedtimespan.Seconds.ToString();
                _differenceOfTimeSpan = hh + ":" + mm + ":" + ss;                    
                HiddenFieldMinutes.Value = _differenceOfTimeSpan;
                //ScriptManager.RegisterStartupScript(this, this.GetType(), "CloCkTImer", "javascript:timer(); ", true);                    
            }
        }
    } 
```

但是当我调试时，我在这条线上遇到错误。`var digiclock = document.getElementById("<%= HiddenFieldMinutes.ClientID %>").value;`

请帮助我改进此网页并完全满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:44:56.733

我做了一个几乎类似于你的代码的测试，看看这里

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title></title>
<script type="text/javascript" language="javascript">
    function timer() {
        alert(document.getElementById("<%= Hiddenfield1.ClientID %>").value);
    }
</script>
</head>
<body onload="timer();">
<form id="form1" runat="server">
<div>
    <asp:hiddenfield ID="Hiddenfield1" runat="server" value="static value"></asp:hiddenfield>
</div>
</form> 
```

这是CS代码

```
 protected void Page_Load(object sender, EventArgs e)
{
    Hiddenfield1.Value = "dynamic value";
} 
```

它给出动态值作为输出。所以这意味着你获取值的方式很好我认为还有其他问题，比如你试图在回发或另一个事件上检查隐藏字段值，如果是这样，请在更新面板中使用隐藏字段那么您将获得隐藏字段值，否则您将继续收到相同的错误。

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T11:43:17.273

问题在于脚本和 html 元素的顺序。在呈现 html 之前调用 document.getElementById（DOM 尚未准备好）。只需将脚本块放在 html 之后。

# r - 在推荐系统的皮尔逊相关用户-用户相似度矩阵中，NaN 是如何处理的？

> ID：11429604
> 
> 赞同：7
> 
> 时间：2012-07-11T09:29:48.497
> 
> 标签：r, nan, correlation, recommendation-engine, pearson

我正在从用户评分数据（特别是 MovieLens100K 数据）生成用户-用户相似度矩阵。计算相关性会导致一些 NaN 值。我在一个较小的数据集中进行了测试：

用户项目评分矩阵

```
 I1 I2 I3 I4
U1 4  0  5  5  
U2 4  2  1  0  
U3 3  0  2  4  
U4 4  4  0  0 
```

用户-用户皮尔逊相关相似度矩阵

```
 U1        U2        U3       U4      U5
U1             1        -1         0      -nan  0.755929
U2            -1         1         1      -nan -0.327327
U3             0         1         1      -nan  0.654654
U4          -nan      -nan      -nan      -nan      -nan
U5      0.755929 -0.327327  0.654654      -nan         1 
```

为了计算 pearson 相关性，仅考虑两个用户之间的关联项目。（参见[迈向下一代推荐系统：最新技术和可能扩展的调查，Gediminas Adomavicius，Alexander Tuzhilin](http://dl.acm.org/citation.cfm?id=1070751)

我如何处理 NaN 值？

**编辑** 这是我在 R 中找到 pearson 相关性的代码。`R`矩阵是用户项目评级矩阵。包含 1 到 5 级评分 0 表示未评分。`S`是用户-用户相关矩阵。

```
 for (i in 1:nrow (R))
  {
    cat ("user: ", i, "\n");
    for (k in 1:nrow (R))
    {
      if (i != k)
      {
        corated_list <- which (((R[i,] != 0) & (R[k,] != 0)) == TRUE);
        ui <- (R[i,corated_list] - mean (R[i,corated_list]));
        uk <- (R[k,corated_list] - mean (R[k,corated_list]));
        temp <- sum (ui * uk) / sqrt (sum (ui^2) * sum (uk^2));
        S[i,k] <- ifelse (is.nan (temp), 0, temp)
      }
      else
      {
        S[i,k] <- 0;
      }
    }
  } 
```

请注意，在该`S[i,k] <- ifelse (is.nan (temp), 0, temp)`行中，我将`NaN`s 替换为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-03T17:37:07.687

我最近为用户-用户和用户-项目矩阵开发了一个 Java 推荐系统。首先，您可能已经发现。RS很难。对于我的实现，我使用了很棒的 Apache Common Math Library，您使用的是 R，它在计算 Pearson 的方式上可能相对相似。

您的问题是：如何处理 NaN 值，然后进行编辑说您说 NaN 为 = 0。

我的回答是这样的：

您不应该真正将 NaN 值处理为 0，因为您所说的是用户或用户/项目之间绝对**没有相关性。**情况*可能*如此，但可能并非总是如此。忽略这一点**会**扭曲您的建议。

首先，您应该问自己，“为什么我得到 NaN 值”？以下是 NaN 的 Wiki 页面中的一些原因，详细说明了您可能会获得 NaN 值的原因：

可以返回 NaN 的操作有以下三种：

1.  以 NaN 作为至少一个操作数的操作。

2.  不定形式 除法 0/0 和 ±∞/±∞ 乘法 0×±∞ 和 ±∞×0 加法 ∞ + (−∞)、(−∞) + ∞ 和等效减法 该标准具有幂的替代函数：标准 pow 函数和整数指数 pown 函数将 00、1∞ 和 ∞0 定义为 1。 powr 函数将所有三种不确定形式定义为无效运算，因此返回 NaN。

3.  具有复杂结果的实际运算，例如：负数的平方根。负数的对数小于 -1 或大于 +1 的数的反正弦或余弦。

您应该调试您的应用程序并逐步完成每个步骤，以查看上述哪个原因是有问题的原因。

其次，了解 Pearsons 相关性可以用多种不同的方式表示，您需要考虑是跨样本还是总体计算它，然后找到合适的计算方法，即针对总体：

cor(X, Y) = Σ[(xi - E(X))(yi - E(Y))] / [(n - 1)s(X)s(Y)]

其中 E(X) 是 X 的平均值，E(Y) 是 Y 值的平均值，s(X)，s(Y) 是标准差，标准差通常是方差的正平方根，方差 =总和（（x_i - 平均值）^2）/（n - 1）

其中mean是平均值，n是样本观察的数量。

这可能是您的 NaN 出现的地方，即除以 0 表示未评级。如果可以的话，我建议不要使用 0 的值来表示未评级，而是使用 null。我会这样做有两个原因：1\. 0 可能是你使用 NaN 的结果，以及 2\. 可读性/可理解性。你的 Scale 是 1 - 5，所以 0 不应该是特征，会混淆事物。所以尽可能避免这种情况。

第三，站在推荐人的角度，从推荐的角度思考问题。如果您有 2 个用户并且他们只有 1 个共同评分，请在较小的数据集中为 I1 说 U1 和 U4。那一项共同点真的足以提供建议吗？答案是——当然不是。那么我也可以建议你设置一个最低的 ratingInCommon 阈值，以确保推荐的质量更好。您可以为此阈值设置的最小值为 2，但请考虑将其设置得更高一些。如果您阅读了 MovieLens 的研究，那么他们将其设置为 5-10 之间（不记得我的头顶）。您设置得越高，您获得的覆盖率就越低，但您将获得“更好”（错误分数越低）的建议。你'

就以上几点。查看 U4 并与其他用户进行比较。请注意 U4 如何与任何用户没有超过 1 项的共同点。现在希望您会注意到 NaN 仅出现在 U4 中。如果您遵循了这个答案，那么您现在希望看到获得 NaN 的原因是因为您实际上可以只用一个共同的项目来计算 Pearson :)。

最后，关于上面的示例数据集，让我有点困扰的一件事是 1 和 -1 的相关性的数量。想一想这些用户偏好的实际含义，然后根据实际评级检查它们。例如，查看 U1 和 U2 评级。对于项目 1，它们具有很强的正相关性 1（都将其评为 4）然后对于项目 3，它们具有很强的负相关性（U1 将其评为 5，U3 将其评为 1），这两个用户之间的 Pearson 相关性似乎很奇怪 - 1（即他们的偏好**完全**相反）。显然情况并非如此，Pearson 分数实际上应该略高于或略低于 0。这个问题链接回关于在量表上使用 0 以及仅比较少量项目的点。

现在，有一些策略可以“填写”用户未评分的项目。我不打算深入研究它们，您需要阅读它，但本质上它就像使用该项目的平均分数或该用户的平均评分。这两种方法都有其缺点，我个人不太*喜欢*其中任何一种。我的建议是仅在用户有 5 个或更多共同项目时计算用户之间的 Pearson 相关性，而忽略评分为 0（或更好 - 空）评分的项目。

所以总结一下。

1.  NaN 不等于 0，因此不要将其设置为 0。
2.  比例中的 0 更好地表示为 null
3.  仅当两个用户之间的共同项目数大于 1（最好大于 5/10）时，才应计算 Pearson 相关性。
4.  仅计算两个用户共同评分项目的 Pearson 相关性，不要将其他用户未评分的项目包括在分数中。

希望有帮助，祝你好运。

# wpf - wpf组合框防止文本更改

> ID：11429608
> 
> 赞同：2
> 
> 时间：2012-07-11T09:30:00.407
> 
> 标签：wpf, combobox, selectionchanged

有什么方法可以防止 wpf 组合框在选择更改后更改其文本？我有一个从组合框派生的自定义控件，我希望能够在选择更改后手动设置文本，另外我不能阻止调用 base.OnSelectionChanged（这可以解决问题，但它必须保留在那里作为要求）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:49:50.293

通常，ComboBox 的`IsEditable`和`IsReadOnly`属性用于控制 ComboBox 的显示文本可编辑或用户可选择的级别。

在[msdn 组合框](http://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.isreadonly%28v=vs.85%29.aspx)（部分备注）中，您可以阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:58:01.530

我有一个类似的问题要解决，我是这样做的：

*   我的第一个 ComboBox 项目是一个实现 NotifiyPropertyChanged 的​​对象，我可以随时更改它的值并且它会更新。
*   我将其 IsEnabled 设置为 False，以便用户无法选择它。

如果您希望此项目即使在禁用时也以与其他项目相同的方式显示，请设计您的 ItemTemplate。

*   在 SelectionChanged 处理程序中，如果选择的索引为 0，我什么也不做。
*   如果 selectedIndex 不是第一个，我用这个索引进行计算（包括更新第一个项目的文本）然后我设置`SelectedIndex`为 0。

编辑 2：尝试将网格的 IsHitTestVisible 设置为 False，并将 CheckBoxes 设置为 True。

编辑 1：如果第一个解决方案不起作用：所以核心问题是，当您单击一行而不是 CheckBox 时，它会触发 SelectionChange。您要做的是处理隧道左键单击事件：将处理程序（在 xaml 中比在代码中更简单）添加到 PreviewMouseLeftButtonDown，并在处理程序中获取 MouseButtonEventArgs 的 OriginalSource。首先通过检查原始源或其可视父项之一是否是第二个 CheckBoxItem 来检查我们是否处于 CheckBox 的第二选择（索引：1）中。如果不是，则返回。现在，如果 OriginalSource 是 CheckBox 或者是 CheckBox 的可视父级，则不执行任何操作，否则将事件标记为已处理。

注意：您必须使用 VisualTreeHelper.GetParent 并编写一个检查 Dependency 对象或其父对象之一是否属于给定类型的子程序。（最上面的父级是 Window，父级为 Nothing/Null。）如果找到此子对象，则返回正确的类型对象，如果未找到，则返回 Noting/Null。

# android - android相机获取光传感器值

> ID：11429614
> 
> 赞同：2
> 
> 时间：2012-07-11T09:30:21.107
> 
> 标签：android, android-camera

我知道如何使用`android.hardware.sensor`.

我在市场上看到了[测光表工具](https://play.google.com/store/apps/details?id=lightmeter.hardware.lightsensor&feature=search_result#?t=W251bGwsMSwxLDEsImxpZ2h0bWV0ZXIuaGFyZHdhcmUubGlnaHRzZW5zb3IiXQ)。应用程序描述说它可以从相机中获取勒克斯值。它怎么能做到这一点？

另外，如何设置快门速度和光圈？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T01:01:35.347

android camera API 不为其捕获的图像数据提供任何绝对单位。此外，它不允许手动控制曝光或光圈（尽管基本上所有手机相机都没有可调光圈）。

您可以从 JPEG EXIF 中找出静态捕捉所用的曝光时间，仅此而已。

由于这些限制，您将很难从捕获的相机图像中获得绝对光测量值。您可能能够校准给定设备以将图像像素值转换为真实光照水平，但这会很复杂，因为所有设备都运行自动曝光和自动白平衡。使用 Android 4.0 中引入的自动曝光和自动白平衡锁定会有所帮助，但在勒克斯和捕获的像素值之间仍然存在未知的转换曲线（不仅仅是比例因子，它是伽马曲线）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:42:10.043

Take a look at the `Camera.Parameters` class.

It has all functions supported by the Camera. Probably `setExposureCompensation`. I don't know much about photography but my guess would be that exposure compensation is changing aperture or speed.

It could be that the tool you mentioned is using a bundled native library. Also have a look at how the functions given in `Camera.Parameters` class work (check android source code).

you can also use Ambient light sensor to get the light level in lux units (if this is within the scope of your project). From android documentation:

> Sensor.TYPE_LIGHT:
> 
> values[0]: Ambient light level in SI lux units

[Android Developer: Light Sensor-Sensor Event](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)

You can find more information about the light sensor in the documentation.

[Android Developer: Sensor](http://developer.android.com/reference/android/hardware/Sensor.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T15:09:28.270

同意，诀窍是拍照并读取其 EXIF 数据。您可以找到更多关于 ExifInterface 文档 [http://developer.android.com/reference/android/media/ExifInterface.html](http://developer.android.com/reference/android/media/ExifInterface.html)

根据 iso 和光圈值，您可以计算 shuyy

# ajax - 如何创建像谷歌翻译文本框这样的多重效果文本区域？

> ID：11429617
> 
> 赞同：0
> 
> 时间：2012-07-11T09:30:25.907
> 
> 标签：ajax, jquery-ui, jsp, jquery, web

谷歌翻译的文本框（左侧文本框-请查看我的截图：[http](http://s970.photobucket.com/albums/ae190/swenteiger7/technology%20screenshot/?action=view&current=google_translate_textbox_event.png) ://s970.photobucket.com/albums/ae190/swenteiger7/technology%20screenshot/?action=view¤t=google_translate_textbox_event.png ）有很多不错的效果，例如作为自动突出显示一个单词，自动缩放...

我目前需要在我的 Web 应用程序中创建一个文本区域。**我想知道一种技术（更喜欢基于 ajax 并在 JSP 平台上运行良好）或网站教程，它们可以帮助我制作像谷歌翻译 textarea 这样的文本框。**

感谢您查看我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:34:48.897

为了让您开始，请参阅：[https](https://developer.mozilla.org/en/HTML/Content_Editable) ://developer.mozilla.org/en/HTML/Content_Editable以及该页面底部的链接。

基本上它实际上不是一个文本框。它是一个常规的 html 元素，但被标记为可编辑，因此人们可以输入它。但是因为它是普通的 html，所以你可以用它做一些特殊的效果。

# objective-c - 是否有 Xcode 和 Interface Builder 的命令行替代品

> ID：11429618
> 
> 赞同：0
> 
> 时间：2012-07-11T09:30:32.693
> 
> 标签：objective-c, macos

我正在使用 XCode 为 Mac OS X 开发应用程序。Xcode 在我的 Mac 资源上很重，当我长时间工作（超过 8 小时）时，它会使机器非常缓慢。我曾经在 C++ 中使用命令行和 Makefile 工作，这对我来说已经足够好了。我是否可以为 Mac 开发应用程序，它有一些 UI(NSStatusItem) 完全通过命令行或主要是命令行？

我浏览了一些用于 Objective C 的 Makefile，但我不知道如何将 UI 操作绑定到代码。我怀疑通过命令行是否真的有可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:31:59.287

我曾尝试搜索 Xcode 的命令行替代方案，但似乎没有。开发 Mac 应用程序的唯一选择是 Xcode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:32:54.480

我发现了这一点。也许它会帮助你:)

[http://atastypixel.com/blog/objective-c-cocoa-on-the-command-line/](http://atastypixel.com/blog/objective-c-cocoa-on-the-command-line/)

# tridion - mac 机器上的 webdav 中的问题

> ID：11429619
> 
> 赞同：0
> 
> 时间：2012-07-11T09:30:35.560
> 
> 标签：tridion, tridion-2011

有权创建文件夹和组件的用户无法通过 WebDAV 复制和粘贴项目。该用户正在使用 Mac OS X Lion。他得到的错误是他没有读写权限。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:55:30.373

Mac 是否有可能无法正确向 Windows 进行身份验证。在这种情况下，您应该能够在服务器日志中看到失败的连接。此用户（或任何其他 Mac 用户）是否能够在任何其他文件夹中成功使用 webdav？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:48:44.917

[根据SDLLiveContent 文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_2E6D8CF0561142D0B81B8CE11DD72BD2)，至少对于 SDL Tridion 2011 ，WebDAV 连接器默认在服务器端启用。

只有有效的项目才允许通过 WebDAV，包括二进制文件（Tridion 中的多媒体）、.xml 组件和其他类型。

用户似乎没有权限读取和写入给定文件夹。您可以通过让他们尝试在 Content Manager Explorer (CME) 的同一文件夹中创建文件夹或组件来确认。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:35:12.540

正如已经建议的那样，您将不得不做一些侦探工作来确定究竟是什么失败了。Tridion 权限不会根据您使用的客户端而改变，因此如果它们在一个客户端上工作，它们必须在另一个客户端上工作（此处不包括身份验证问题）。

*   转到您的 Windows 事件查看器，Tridion 内容管理器日志，检查当您尝试从 mac 复制内容时写入其中的错误消息。
*   发布您收到的*确切错误消息。*我怀疑 Tridion 是否在告诉您“用户没有读写权限”

最重要的是，如果它适用于 Windows 而不是 Mac，则问题不在于 WebDav 服务器，而在于 WebDav 客户端。

我也没有看到关于这个的编程问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T09:41:22.540

您使用的是哪个版本的 Tridion？您应该做的第一个操作是检查事件日志中的错误消息（Peter Kjaer 已经建议过），如果您没有任何内容，您可以尝试通过修改位于的 cc_crtd_def.xml 文件来启用 webdav 调试日志记录Tridion\webdav\WebDAVcartridges\Default\ 文件夹。您应该更改 loglevel 属性（据我所知，它应该是 4 用于调试）。然后应该在同一文件夹或 webdav 文件夹中创建一个日志文件。您可以尝试在此日志文件中找到确切的错误消息并将其发布在此处。

# asp.net - 如何更改报表查看器报表的列名？

> ID：11429624
> 
> 赞同：0
> 
> 时间：2012-07-11T09:30:53.410
> 
> 标签：asp.net, reportviewer

我正在使用`ASP.NET/C#`。我正在使用`Report Viewer`控件来显示基本报告。目前数据显示正确，但是列名与配置`Report Wizard`.

**例子：**

`cFirstName`显示为`cFirstName`在 的列标题中`Report Viewer`。

我想改为将其更改为**名字**。

这是问题的图像。

![在此处输入图像描述](../Images/f5f69bdc1c3498561e1457699e707c73.png)

谁能帮我实现这一目标？

欢迎任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:46:58.807

您可以在 rdl、rdlc 文件中进行设置。

这是通常应该完成的地方。

它不能通过 c# 完成，除非您将该列名称作为报告参数并使用该参数设置列标题。

# ruby-on-rails-3 - 只有网格和表单的 Rails + Foundation

> ID：11429626
> 
> 赞同：2
> 
> 时间：2012-07-11T09:31:01.767
> 
> 标签：ruby-on-rails-3, zurb-foundation

我想在我的 Rails3 应用程序中使用基础，但只使用表单和网格。

当我添加`@import "foundation";`它时，一切正常..

但是当我使用`@import "foundation/forms";`它时，它会崩溃并显示以下消息：

```
Undefined variable: "$formSpacing". 
```

好像少了一些设置。。

这里有人有这方面的经验吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T21:52:23.790

$formSpacing 是一个全局基础。

在导入表单之前，您必须导入基础全局变量。

把它放在你的表单导入之前。

```
@import "foundation/globals"; 
```

# google-analytics - 谷歌分析跨域跟踪

> ID：11429628
> 
> 赞同：0
> 
> 时间：2012-07-11T09:31:22.463
> 
> 标签：google-analytics

我正在尝试设置跨域跟踪

www.able-labels.co.uk 到ablelabels.netprintmanager.com

有人已经设置了此代码以使其正常工作，但我认为链接代码中可能存在一些不正确的语法，因为当我实现它时，我得到了重复的“并且它被破坏了。

```
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js'type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-xxxxxx-x");
pageTracker._trackPageview();
} catch(err) {}
</script>
3\. Amend all the links between domains. Here is an example: 
<a href="http://www.yoursite.co.uk"onclick="pageTracker._link(http://www.yoursite.co.uk);return false;">Link Here</a> 
```

如果有人能看到任何愚蠢的错误并帮助我，那就太好了。

非常感谢

编辑

刚刚意识到复制和粘贴将“更改为不同的”。

等待 GA 更新以查看是否正在跟踪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:17:28.927

Try Link Here 这将是一个好的开始（onclick 之前有一个空格，将 URL 放在引号之间或引用链接的实际 url）

# c# - 在 ReportViewer 中重复数据

> ID：11429632
> 
> 赞同：0
> 
> 时间：2012-07-11T09:31:36.690
> 
> 标签：c#, asp.net

我已经分配了一个数据表来报告如下，但我只得到报告中的第一行数据，而不是所有行。如何为我分配的数据表的所有行重复结果？

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" Height="1000px" 
                                Width="600px" SizeToReportContent="True">
</rsweb:ReportViewer>

    ReportDataSource rd = new ReportDataSource();
    rd.Name = "DataSet1_DataTable1";
    //rd.Value = ReceiptData;
    rd.Value =(DataTable) ViewState["ReceiptData"];
    ReportViewer1.LocalReport.ReportPath = Server.MapPath("Report/Report.rdlc");
    //ReportViewer1.LocalReport.EnableExternalImages = true;
    ReportViewer1.LocalReport.DataSources.Clear();
    ReportViewer1.LocalReport.DataSources.Add(rd);
    ReportViewer1.LocalReport.Refresh(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:34:28.887

检查你有什么`(DataTable) ViewState["ReceiptData"];`。可能是 viewtyate 中只有 1 条记录。

# eclipse - 在 xhtml 页面中显示 jsf 组件

> ID：11429634
> 
> 赞同：1
> 
> 时间：2012-07-11T09:31:40.167
> 
> 标签：eclipse, jsf, tomcat

我在 Eclipse 中有一个使用 jsf 的动态 Web 应用程序。我用'new java server faces(jsf) page(xhtml)'模板创建了一个jsp页面，只想显示ah:inputText，但是当我在tomcat中运行我的应用程序时，inputText没有显示。

当我使用'new java server faces(jsf) page(html)'模板时，我不会有任何问题，但我必须在我的项目中使用 xhtml。

我正在使用 eclipse indigo sr2 3.7.2 - myfaces 2.0.14 - tomcat 7.0.29

我的罐子：commons-beanutils-1.8.3-commons-codec-1.3-commons-collections-3.2-commons-digester-1.8-commons-logging-1.1.1-jstl-api-1.2-jstl-impl-1.2-myfaces -api-2.0.14-myfaces-bundle-2.0.14-myfaces-impl-2.0.14

主.jsp：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
   pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Insert title here</title>
</h:head>
<h:body>
<f:view>
 <h1>JSF XHTML</h1>
<h:inputText value="Hi"></h:inputText>
</f:view>
</h:body>
</html> 
```

有什么问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:01:42.570

我将 main.jsp 更改为 main.xhtml 并将这些行添加到我的 web.xml 中，现在我的项目工作正常。

```
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping> 
```

感谢您的关注

# tinymce - 在 tinymce 中禁用自动 moxieplayer 换行

> ID：11429637
> 
> 赞同：3
> 
> 时间：2012-07-11T09:31:55.027
> 
> 标签：tinymce, video-streaming, embed

=)

我已经构建了一个上传、转换然后将视频嵌入到 tinymce 中的功能。Tinymce 一直使用他们的 moxieplayer.swf 用一些 <object> html 包裹我的视频嵌入。我想为这些视频使用自定义视频播放器，但是当 tinymce 的行为如此时，我不能这样做。

这是我注入到 tinymce 的代码：

```
<video width="320" height="240" poster="5872deprivedwrath.jpg" preload="false" src="5872deprivedwrath.mp4">
<source type="video/mp4" src="5872deprivedwrath.mp4"><source type="video/ogv" src="5872deprivedwrath.ogv">
<object width="320" height="240" type="application/x-shockwave-flash" data="/js/flashmediaelement.swf">
<param name="movie" value="/js/flashmediaelement.swf">
<param name="flashvars" value="controls=true&amp;file=5872deprivedwrath.mp4">
<img src="5872deprivedwrath.jpg" width="320" height="240" title="No video playback capabilities">
</object>
</video> 
```

但是当tinymce 收到它时，它会变成一大块html（如果需要，我可以发布它），将它全部包装在一些moxieplayer flash embed 中。

```
<video width="320" height="240" poster="8910deprivedwrath.jpg" controls="controls" preload="preload">
<source src="8910deprivedwrath.mp4" type="video/mp4" /><source src="8910deprivedwrath.ogv" type="video/ogv" />
<object width="320" height="240" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">
<param name="flashvars" value="url=8910deprivedwrath.mp4&amp;poster=8910deprivedwrath.jpg" />
<param name="src" value="moxieplayer.swf" />
<param name="allowfullscreen" value="true" />
<param name="allowscriptaccess" value="true" />
<embed width="320" height="240" type="application/x-shockwave-flash" src="/tiny_mce/plugins/media/moxieplayer.swf" flashvars="url=8910deprivedwrath.mp4&amp;poster=8910deprivedwrath.jpg" allowfullscreen="true" allowscriptaccess="true" />
</object>
</video> 
```

所以我试图找出如何禁用这个功能，或者解决它。

有没有人有这方面的经验？非常感谢任何输入，因为我正在努力解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-08T21:29:21.830

在 TinyMCE 的配置中设置以下选项：

```
flash_video_player_url: false 
```

# objective-c - 翻转垂直 UIWebview 以在视图加载时显示

> ID：11429644
> 
> 赞同：0
> 
> 时间：2012-07-11T09:32:06.407
> 
> 标签：objective-c, ios

我正在搜索信息以在 viewDidLoad 事件中使用类似模式转换的翻转水平效果来显示 uiwebview，但我没有成功，即使在苹果文档中也是如此。有人可以帮我吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:12:38.903

您要添加的动画可以在 UIView 上完成。所以你应该将 UIWebview 的 SubView 添加到 UIView 中，然后在 UIView 上做动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:27:58.070

过渡到动画 webView 与视图添加你的 webView 像这样。

```
[UIView transitionWithView:poster.view duration:3
               options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{
                   [self.view addSubview:yourWebView];
               }
            completion:NULL]; 
```

# javascript - 当值大于 1 时，同一页面上的消息（不弹出）。Javascript

> ID：11429646
> 
> 赞同：0
> 
> 时间：2012-07-11T09:32:08.433
> 
> 标签：javascript, html

基本上我有一个值“truecount”，如果这个值小于一个，我希望屏幕上出现错误消息而不是警报弹出窗口。

抱歉，我是菜鸟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:36:33.683

尝试考虑使用像 jquery 这样的 javascript 库。在您的 HTML 中放置一个隐藏层

当您的变量 truecount 变为>1 时，只需执行类似 .... $('#ErrorReporting').html('Your alert Message').slideDown();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:39:34.053

创建一个隐藏元素并在满足您的条件时将其样式更改为可见

```
if ( truecontent < 1 ) {
    document.getElementById("message").style.display = "block";
}

<div id="message" style="display: none">
    Your Message Here
</div> 
```

[**演示**](http://jsfiddle.net/ABgEP/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:37:51.270

有很多方法可以显示消息，例如

1.  显示警报框（但你不想要它）。
2.  `div`在最初隐藏的消息中显示消息，并在消息中显示。
3.  显示`div`带有任何动画的弹出窗口可能会让人感觉良好。

有关`div popups` [转到此处](https://stackoverflow.com/questions/3202583/how-to-center-align-pop-up-div-using-javascript)或[此处](http://www.javascripttoolbox.com/lib/popup/example.php)或[此处的更多信息](http://www.codeproject.com/Articles/32147/Masked-Div-Or-Modal-Popup-Window)

# oracle - 双向外键设计

> ID：11429647
> 
> 赞同：1
> 
> 时间：2012-07-11T09:32:10.000
> 
> 标签：oracle, database-design

假设有两个表，Company 和 Employee。Employee 有一个 Company 的外键，Company 有一个 Employee 的外键。我应该如何在这些表中插入和删除数据而不会出现参照完整性错误？

```
COMPANIES
 ID
 NAME
 CONTACT_EMPLOYEE_ID --FK

EMPLOYEES
 ID
 NAME
 COMPANY_ID --FK 
```

我想这是一个相当普遍的问题。我已经对其进行了研究，但找不到太多信息。也许问题来自一个我不知道的更常见的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:13:09.737

有几种方法可用：

1.  该`CONTACT_EMPLOYEE_ID`列是否可以为空？如果是，只需插入公司，插入员工，然后更新公司记录。

2.  您还可以将其中一个约束设置为可延迟。然后，您可以将约束设置为延迟，插入两条记录，然后提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:15:48.070

一般有2种策略：

*   将其中一个 FK 保留为 NULL（然后将 NULL 插入该表，将行插入其他表，最后更新 NULL）。
*   [推迟](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-triggers.html#deferring%20constraint%20checking)其中一个 FK。

您甚至可以将**两个**FK 保留为 NULL 或可延迟（甚至两者的组合），因此您可以在两个方向上执行插入。

您还可以考虑将所有 EMPLOYEES 字段放入 COMPANIES。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T05:38:16.640

除了已经提出的其他建议（使 FK 列之一可空，或使 FK 约束可延迟）之外，另一个建议是使 NOT NULL 约束可延迟，例如：

```
create table COMPANIES (
 ID number not null,
 NAME varchar2(100) not null,
 CONTACT_EMPLOYEE_ID number,
 constraint contact_not_null
   check (CONTACT_EMPLOYEE_ID not null)
   deferrable
   initially deferred
); 
```

现在，您可以为员工 ID 插入一行 NULL，插入员工，然后使用新的员工 ID 更新 Companies.contact_employee_id，然后提交。

# java - FileCleaner 是为了避免在 Web 应用程序中进行多次部署吗？

> ID：11429649
> 
> 赞同：4
> 
> 时间：2012-07-11T09:32:22.463
> 
> 标签：java, eclipse, servlets, apache-commons

Eclipse 在我的 UNIX 机器上出现内存不足异常，具有 jdk 1.6。同时尝试多次运行我的 Web 应用程序而不终止我的本地应用程序服务器。然后通过 vm 参数增加我的堆空间，并尝试更改 Eclipse.ini。但是没有用。

google了一段时间，才知道这是webapp classLoader多次部署的问题。我无法找到解决这个问题的方法。请给出一个解决方案来克服这个问题。

我发现使用**[FileCleaner](http://commons.apache.org/io/api-release/org/apache/commons/io/FileCleaner.html)** ( [FileCleaningTracker](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FileCleaningTracker.html) ) 来避免在 LogoutServlet 中进行多次部署和编写代码。

```
@Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        req.getSession().invalidate();
         FileCleaner.getInstance().exitWhenFinished();
        resp.sendRedirect("/index");
    } 
```

但它不起作用。

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:40:20.153

我不太了解 FileCleaner，但对 javadoc 的粗略审查表明调用 exitWhenFinished() 会杀死删除文件的后台线程。我对此的解读是，这些文件将不会被删除。

我的猜测是，您的问题实际上是热交换代码的标准问题：PermGen 空间不足。发生这种情况是因为类定义的某些部分永远不会被删除，并且当您停止/启动 servlet 时，这些部分会在 JVM 中累积。

这个问题最简单的答案是创建一个足够大的 PermGen 空间来让你完成工作。尝试将此添加到应用程序服务器的 VM 参数中。

```
-XX:MaxPermSize=128M 
```

这应该允许您在内存不足之前工作更长时间。这个数字可以根据您机器上的内存量增加。

# groovy - 将 xml 标记从 groovy 插入 SOAPUI 中的 SOAP 请求

> ID：11429654
> 
> 赞同：2
> 
> 时间：2012-07-11T09:32:33.780
> 
> 标签：groovy, soapui

我正在使用 SOAPUI 进行 Web 服务测试。我想通过 groovy 脚本测试步骤进行 xml 解析。对于一个测试用例，我必须`<Email>xyz@gmail.com</Email>`在 SOAP 请求中插入 xml 标签 [like ]。

我可以使用 xml 标记设置值`holder.setNodeValue(Xpath, Value)`，使用我尝试在 SOAP 请求中插入 xml 标记的相同功能，例如`holder.setNodeValue(Xpath, "<Email>xyz@gmail.com</Email>")`。但在 SOAP 请求 xml 标记中设置为

```
"&ltEmail>xyz@gmail.com&lt/Email>" 
```

由于此问题，SOAP 请求无法识别该 xml 标记，因此该值不会在响应中得到反映/更新。

如果我错误地使用此功能，请纠正我。等待任何人的回应..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T03:35:03.517

发生这种情况是因为您正在调用 setNodeValue 方法。该方法将设置节点的值（可以是 XML 节点格式）。

理想情况下，您应该做的是，如果节点已经存在 ()，那么只需使用 holder 抓取该节点并设置值。或者

```
xpath = "//level1/level2/email"
holder.setNodeValue(xpath, "xyz@gmail.com") 
```

或者最简单的，在节点之间添加一个空属性值。

```
<Name>Test</Name>
 ${Property#TestValue}
<Phone>123123</Phone> 
```

现在说如果您想在姓名和电话之间添加电子邮件，请为该属性变量分配一些值。如果没有，则将其留空。

# postgresql - 无法在 Postgres 中插入德语字符

> ID：11429655
> 
> 赞同：4
> 
> 时间：2012-07-11T09:32:35.297
> 
> 标签：postgresql, text, encoding, utf-8

我使用 UTF8 作为我的 Postgres 8.4.11 数据库的编码：

```
CREATE DATABASE test
  WITH OWNER = postgres
       ENCODING = 'UTF8'
       TABLESPACE = mydata
       LC_COLLATE = 'de_DE.UTF-8'
       LC_CTYPE = 'de_DE.UTF-8'
       CONNECTION LIMIT = -1;

ALTER DATABASE test SET default_tablespace='mydata';
ALTER DATABASE test SET temp_tablespaces=mydata; 
```

和输出`\l`

```
 test | postgres  | UTF8     | de_DE.UTF-8 | de_DE.UTF-8 | 
```

当我尝试插入德语字符时：

```
create table x(a text);

insert into x values('ä,ß,ö'); 
```

> ```
> ERROR:  invalid byte sequence for encoding "UTF8": 0xe42cdf
> HINT:  This error can also happen if the byte sequence does not match the encoding expected by the server, which is controlled by "client_encoding". 
> ```

我正在使用腻子连接。任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T10:45:30.087

关键元素是`client_encoding`- 服务器期望您的客户端提供的编码。它必须与实际发送的内容相匹配。你得到`show client_encoding`什么？是`UNICODE`吗？

[在手册的服务器和客户端之间的自动字符集转换](https://www.postgresql.org/docs/current/multibyte.html#id-1.6.11.5.7)一章中阅读更多内容。

如果您使用**psql**作为客户端，您可以`client_encoding`使用`\encoding`. 检查本地系统用户的编码（在 shell 中的 Linux 类型上）并在 psql 中`locale`设置匹配。`client_encoding`如果您在系统上使用与`encoding`PostgreSQL 服务器相同的语言环境，则可以避免这种复杂情况。

如果您使用**puTTY**（在 Windows 上），请确保相应地设置其“翻译”。看看*设置：窗口 - 翻译*。必须匹配`client_encoding`。您可以右键单击正在运行的会话并选择*Change Settings*。您还可以将这些设置与您保存的会话一起保存。

# jquery - IE中的jQuery数据表'表中没有可用数据'

> ID：11429660
> 
> 赞同：0
> 
> 时间：2012-07-11T09:32:49.770
> 
> 标签：jquery, datatables

我有一个包含数据表的弹出窗口，数据完美地显示在 Firefox 和 chrome 中。

在 IE（我有 IE 9）中，我没有得到任何数据和消息“表中没有可用数据”。

如果我做

```
console.log(historyArray); 
```

我确实在控制台中获取数据。

这是数据表代码，我该如何解决 IE 问题？

```
 myTable = $('#report').dataTable({
     "aaData": historyArray,
     "aoColumns": [{
       "mDataProp": "User"
     }, {
       "mDataProp": "Timestamp"
     }, {
       "mDataProp": "Latitude"
     }, {
       "mDataProp": "Longitude"
     }, {
       "mDataProp": "Address"
     }],
     "bPaginate": false,
     "bJQueryUI": true,
     "sDom": '<"H"Tfr>t<"F"ip>',
     "oTableTools": {
       "sSwfPath": "swf/copy_csv_xls_pdf.swf",
       "aButtons": ["copy", "csv", "xls", "pdf"]
     },
     "fnInitComplete": function () {
       addClasses();
     }
   }); 
```

**修复更新**

出于某种原因，数据表不想使用 window.opener 获取的数组，即使它接收正常。

我通过创建一个新数组并将值推入其中来修复它。然后将 newArray 数据提供给数据表。

```
 var newArray = [];
 var historyArray = window.opener.historyArray;

 for (var key in historyArray) {
   newArray.push(historyArray[key])
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:36:39.060

根据控制台日志，问题出在：

```
window.opener.closeReportWindow(); 
```

它说：

```
SCRIPT438: Object doesn't support property or method 'closeReportWindow' 
```

试试这个：

```
window.close(); 
```

还将您的 jQuery 更新到 1.7.2 版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:22:12.083

**修复更新**

出于某种原因，数据表不想使用 window.opener 获取的数组，即使它接收正常。

我通过创建一个新数组并将值推入其中来修复它。然后将 newArray 数据提供给数据表。

```
 var newArray = [];
 var historyArray = window.opener.historyArray;

 for (var key in historyArray) {
   newArray.push(historyArray[key])
 } 
```

# php - 富客户端的 PHP 框架 (Javascript)

> ID：11429666
> 
> 赞同：-1
> 
> 时间：2012-07-11T09:33:17.167
> 
> 标签：php, javascript, ajax, soa

我是一名 Web 开发人员，我更喜欢使用富客户端类型的 Web 应用程序。因此，服务器向客户端发送数据（JSON、XML），而不是 html。在客户端，我有一个带有 MVC 的 jQuery 全功能应用程序。这是一个问题：我应该在服务器端使用什么框架？虽然我不再需要服务器上的任何 MVC，但希望它是 OOP 结构良好的，而不是普通的 PHP（因为我现在正在使用它）。

也许在这种情况下，最好使用面向 SOA 的东西？我还没有接触它，但它似乎符合我的需求。请启发我。

欢迎对这种架构提出任何其他建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:37:57.603

[Symfony2](http://symfony.com/)可能适合您的要求。它是一个 MVC 框架**，但您不必使用此功能**。它正在积极维护并拥有强大的社区。

# gmail - 从 gmail 检索电子邮件

> ID：11429669
> 
> 赞同：0
> 
> 时间：2012-07-11T09:33:32.823
> 
> 标签：gmail, oauth-2.0

我一直在使用 Oauth for G-mail 来获取电子邮件，这一切都很顺利，直到我遇到了一个问题，即在关注[Oauth 的 Goggle 游乐场](https://code.google.com/oauthplayground/)之后 ，最后一个回复包含了我想要的电子邮件，除了我想要**完整**的内容电子邮件，不仅是*夏天*......我错过了什么......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:19:29.407

示例流程用于将[未读消息提要](https://developers.google.com/google-apps/gmail/gmail_inbox_feed)与聚合器/RSS 阅读器软件一起使用。Google 决定只包含摘要和 URL，以便在 Gmail 网站上查看邮件。

如果您想下载邮件内容，您必须使用 IMAP 获取它们。Google 还支持[使用 OAuth 身份验证的 IMAP](https://developers.google.com/google-apps/gmail/oauth_overview)。

# jquery - marquee 适用于模拟器，但不适用于设备

> ID：11429673
> 
> 赞同：3
> 
> 时间：2012-07-11T09:33:47.750
> 
> 标签：jquery, html, jquery-ui, jquery-mobile

嗨，我在我的应用程序中添加了 marquee 标签，它在 android 模拟器中运行良好，但是当我将它安装在设备上时它无法正常工作。在设备上，它没有显示选框。下面是我的选框代码。

```
<marquee behavior="scroll" direction="left">Welcome To Jquery World</marquee> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:35:41.107

`marquee`不是标准的 HTML 元素！所以不能保证支持。浏览器仅出于兼容性考虑才支持它。

改用jQuery插件，这样你就省了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:39:51.863

使用这个 Jquery 插件代替选框...

[http://remysharp.com/2008/09/10/the-silky-smooth-marquee/](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)

# openssl - 这个 pkcs12 文件有什么问题（pfx）

> ID：11429675
> 
> 赞同：8
> 
> 时间：2012-07-11T09:33:53.213
> 
> 标签：openssl

我创建了一个我的私有 CA 并形成一个 pkcs12 证书文件进行测试，我在我的 linux 机器上使用 openssl 执行此操作：

*   (1) openssl req -config /etc/openssl.cnf -subj /CN=aa1@2C/O=Ruckus Wireless, Inc./ST=CA/C=US -batch -new -nodes -key users/2C.key -out users/2C.csr
*   (2) openssl ca -config /etc/openssl.cnf -extensions client_cert -batch -in users/2C.csr -out users/2C.crt
*   (3) openssl pkcs12 -export -out users/2C.pfx -inkey users/2C.key -in users/2C.crt -certfile cacert.pem -passout stdin

之后，我在 windows 7 机器上复制 2c.pfx 并尝试安装它，但弹出错误消息： **无效的公钥安全对象文件：此文件无效，用作以下内容：个人信息交换。**

造成这种情况的原因是什么？我是否形成了错误的 pfx 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-01T04:20:07.973

这有点模糊（我不记得见过它，但是嘿......）。首先，确保您将证书导入到正确的存储中。我遇到的大多数导入错误都是由于他错误的商店。我相信您需要在本地计算机的受信任的根证书颁发机构存储中安装证书（中间证书颁发机构不起作用）。如果这不是商店的问题......

其次，从 Microsoft 论坛尝试一下。[*无法导入证书（p12 或 pfx 文件）*](https://social.technet.microsoft.com/Forums/windowsserver/en-US/50bd9c7c-faaa-46e3-b9a4-a2bb885b180d)。（我复制了它以防微软重新安排他们的网站。但要清楚，它是别人的解决方案）：

```
secedit /configure /cfg %windir%\inf\defltbase.inf /db defltbase.sdb /verbose 
```

顺便说一句，我认为您可以根据以下 Microsoft 工具检查其格式是否正确。我没有方便的 Windows 机器来测试它。

```
certutil -dump 2C.pfx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-30T07:01:23.273

我也收到了消息

> 无效的公钥安全对象文件：此文件不能用作以下用途：个人信息交换。

问题是 de p12 文件位于映射为驱动器的网络共享上。将文件复制到我的真实硬盘驱动器 (C:) 解决了这个问题。

# ruby-on-rails-3 - 让resque工作人员更即时响应？配置指南

> ID：11429676
> 
> 赞同：2
> 
> 时间：2012-07-11T09:34:10.040
> 
> 标签：ruby-on-rails-3, performance, resque

我使用 resque 在后台运行一些作业，客户端（用户）通过在浏览器中的 Web 应用程序上执行操作来启动这些作业。

问题是触发动作需要几秒钟。怎么能加快速度？我需要 resque 来更及时地做出反应。

IM 使用所有默认设置和配置，没有任何修改。是否有任何关于配置或建议的指导方针，以使 resque 响应更快？

我一次运行 1 个工作人员和 1,2 个低队列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T13:17:19.013

默认情况下，Resque 工作人员每 5 秒检查一次队列，取自[Github 上的 Resque 页面](https://github.com/defunkt/resque/)：

```
start
loop do
  if job = reserve
    job.process
  else
    sleep 5 # Polling frequency = 5 
  end
end
shutdown 
```

在“轮询频率”下，它会说：

```
You can pass an INTERVAL option which is a float representing the polling frequency.
The default is 5 seconds, but for a semi-active app you may want to use a smaller value.

$ INTERVAL=0.1 QUEUE=file_serve rake environment resque:work 
```

你也可以看看像[beanstalkd](http://kr.github.com/beanstalkd/)这样的东西，你可以看这个[railscast](http://railscasts.com/episodes/243-beanstalkd-and-stalker)关于它。

# sql - 将数据从一个数据库导出到另一个没有 x 字段？

> ID：11429685
> 
> 赞同：0
> 
> 时间：2012-07-11T09:34:46.317
> 
> 标签：sql, database, phpmyadmin

我想将数据从一个表（*table1*）移动到另一个表（*table2*）。它们具有几乎相同的字段，但 table1 有一些我在 table2 中不需要的额外字段（带有数据）。

所以我不能只做 CSV 导出和导入，因为我最终会出错。所以我的问题；如何创建没有字段 X、Y 和 Z 的数据库字段的导出？

**编辑**：

假设我有一个包含以下字段的 table1；

```
id, name, comment, email, date 
```

有了 table2 我有；

```
id, name, comment, date 
```

所以没有`email`领域。如果我对 table1 进行 CSV 导出，则无法将其直接导入 table2，因为有一个额外的字段（电子邮件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:36:47.230

```
CREATE TABLE table2 SELECT field1, field2, etc FROM table1 
```

如果`table2`已经存在，则：

```
INSERT INTO table2 SELECT field1, field2, etc FROM table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:37:55.170

插入时只需选择要插入的字段

```
insert into table2 (id, name, comment, date)
    select id, name, comment, date
    from table1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:39:02.853

如果您使用 sql server management studio 导出数据，则可以选择提供查询而不是选择要导出的表。

所以在查询中给出你需要的字段

```
SSMS ->
right click on database->Tasks->export data -> 

after selecting the source and destination, you get a window called
"Specify table copy or Query" 
```

在那里您可以选择第二个选项并提供查询

# php - 注销后标头位置重定向以删除 ?q=logout

> ID：11429688
> 
> 赞同：0
> 
> 时间：2012-07-11T09:34:51.480
> 
> 标签：php

正如它所说，我需要删除 ?q=logout。首先我试过这个

```
if ($_GET["q"] == "logout") 
{
$user->user_logout();
header("location:".$_SERVER["SERVER_NAME"]); 
} 
```

我尝试的第二件事：

```
if ($_GET["q"] == "logout") 
{ $user->user_logout();
header("location:include/redirect_home.php"); 
} 
```

并在 redirect_home.php

```
header("location:".$_SERVER["SERVER_NAME"]); 
```

在这两种情况下，页面都会重定向到 www.mypage.com/?q=logout 我需要在 $user->user_logout(); 之后删除 ?q=logout 被处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:39:56.137

你不能这样做：`header("location:".$_SERVER["SERVER_NAME"]);`

您需要`http://`服务器名称之前的部分。

```
header("Location: http://{$_SERVER['SERVER_NAME']}/"); 
```

# android - 在Android SDK版本中， 20 为什么开发团队去掉了android Project创建窗口中的“create project for existing source”？

> ID：11429692
> 
> 赞同：1
> 
> 时间：2012-07-11T09:35:02.467
> 
> 标签：android

最近我将我的 android SDK 从更新`Version 19`到`Version 20`. 在最新版本中具有更多功能，但我不知道如何在其中导入现有的 android 项目。在`Version 19`我们点击的时候`File->New->Android Application Project`，一个窗口中有一个字段`"create project for existing source"`。但是`Version 20`，如果我打开现有项目意味着我正在使用以下过程，`File->Import->Android->Existing Android Code into WorkSpace`. 与版本 20 相比，版本 19 更容易创建应用程序包。在这里我想知道是否有其他方法可以导入现有的 android 项目。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:46:30.393

采用

```
File > New > Other.. > Android > Android Project from Existing code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:41:04.463

```
File -> Import -> General -> Existing Projects into Workspace 
```

试试上面那个。

# php - Imagettftext - 不正确的行距

> ID：11429701
> 
> 赞同：2
> 
> 时间：2012-07-11T09:35:33.247
> 
> 标签：php, gd

我对 PHP 函数 imagettftext 有疑问。我有从带有文本信息的数据库生成卡片图像的代码。对于一些卡片，我有问题 - 单词是相互重叠的（[就像这里一样](http://dark-project.cz/CardDatabase/cards/lehky_katapult.png)）。

我的代码看起来像这样（字体大小根据文本的长度而变化）

```
 $length = strlen($cardInfo->description);
            if ($length < 15) {
                $divide = 15;
                $fontSize = 16;
                $lineHeight = 25;
                $startPos = 220;
            } else if ($length < 70) {
                $divide = 25;
                $fontSize = 12;
                $lineHeight = 18;
                $startPos = 210;
            } else if ($length < 110) {
                $divide = 28;
                $fontSize = 10;
                $lineHeight = 14;
                $startPos = 210;
            } else {
                $divide = 38;
                $fontSize = 8;
                $lineHeight = 13;
                $startPos = 210;
            }
            $description = wordwrap($cardInfo->description, $divide, ">>>");
            $lines = explode(">>>", $description);
            $count = 0;
            foreach ($lines as $line) {
                $position = $count * $lineHeight;
                $count++;
                imagettftext($image, $fontSize, 0, 28, ($startPos + $position), $black, $font, $line);
            } 
```

数据库中的文本如下所示：

```
Oblehací stroj

Imunita vůči střelám /Tato jednotka je imunní vůči střeleckým zraněním/ 
```

其他问题是换行：[here](http://dark-project.cz/CardDatabase/cards/sberac_korink_.png)。我不知道为什么“jídlo”这个词在下一行。

感谢您的任何回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:55:56.517

很久以前，我写了一个相当复杂的类来归档一个类似的任务。

我不再有此代码，但步骤相当简单。

第一：不要依赖计算，php依赖稀有字体。

php 的自动换行功能在这里毫无意义，因为您处理的是 php 未知的字符集宽度（例如跟踪）。Wordwrap 假定所有字符都具有相同的字符宽度。

因此，您必须使用 imagettfbbox 构建自己的自动换行功能。然后，您必须确定小写“x”字母和大写“X”字母的大小。这些字母是计算您自己的行高/行距的标准。我还建议您手动分隔单词，因为 PHP 并不总是能正确识别空白宽度。

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:56:32.187

这对我有用。你需要`arial.ttf`和`http://dark-project.cz/CardDatabase/cards/lehky_katapult.png`。

```
class Test_Canvas {
    protected $res=null;

    public function __construct($width, $height) {
        $this->res = imagecreatetruecolor($width, $height);
        imagealphablending($this->res, true);
        imagesavealpha($this->res, true);
        imagefill($this->res, 0, 0, imagecolorallocatealpha($this->res, 0, 0, 0, 127));
    }

    public function copyTo(Test_Canvas $canvas, $x, $y) {
        imagecopyresampled($canvas->res, $this->res, $x, $y, 0, 0, $this->getWidth(), $this->getHeight(), $this->getWidth(), $this->getHeight());
    }

    public function getWidth() {
        return imagesx($this->res);
    }

    public function getHeight() {
        return imagesy($this->res);
    }

    public function saveAsPNG() {
        imagepng($this->res);
    }
}

class Test_Canvas_Image_PNG extends Test_Canvas {
    public function __construct($filename) {
        $res = imagecreatefrompng($filename);
        $w = imagesx($res);
        $h = imagesy($res);
        parent::__construct($w, $h);
        imagecopymerge($this->res, $res, 0, 0, 0, 0, $w, $h, 100);
    }
}

class Test_Canvas_Textarea extends Test_Canvas {
    private $text;
    private $fontsize;
    private $fontfile;

    public function __construct($width, $height, $text, $fontsize, $fontfile) {
        parent::__construct($width, $height);
        $this->text = $text;
        $this->fontsize = $fontsize;
        $this->fontfile = $fontfile;
        $this->removeDuplicateWhitespace();
        $this->formatText();
        $this->applyText();
    }

    private function removeDuplicateWhitespace() {
        $this->text = preg_replace('/[ \t]+/', ' ', $this->text);
    }

    private function formatText() {
        $lines = explode("\n", $this->text);
        $res = array();
        foreach ($lines as $line) {
            $res[] = $this->insertAdditionalLinebreaks($line);
        }
        $this->text = join("\n", $res);
    }

    private function insertAdditionalLinebreaks($line) {
        $words = $this->splitWords($line);
        $res = array();
        $line = "";
        while(count($words)) {
            $word = array_shift($words);
            $testLine = "{$line} {$word}";
            $width = $this->getTextWidth($testLine);
            if($width > $this->getWidth()) {
                $res[] = $line;
                $line = $word;
            } elseif(!count($words)) {
                $res[] = $testLine;
            } else {
                $line = $testLine;
            }
        }
        return join("\n", $res);
    }

    private function getTextWidth($text) {
        $boundaries = imagettfbbox($this->fontsize, 0, $this->fontfile, $text);
        $x1 = min($boundaries[0], $boundaries[6]);
        $x2 = max($boundaries[2], $boundaries[4]);
        return $x2 - $x1;
    }

    private function splitWords($text) {
        return explode(' ', $text);
    }

    private function applyText() {
        $lines = explode("\n", $this->text);
        foreach($lines as $lineNo => $line) {
            imagettftext($this->res, $this->fontsize, 0, 0, ($lineNo + 1) * ($this->fontsize + 5), imagecolorallocate($this->res, 0, 0, 0), $this->fontfile, $line);
        }
    }
}

$rootPath = dirname(__FILE__).'/';
$imageFilename = "{$rootPath}test.png";

$description = "Oblehací stroj\nImunita vuci strelám /Tato jednotka je imunní vuci streleckým zranením/ ";
$description .= $description;
$description .= $description;

header('Content-Type: image/png');

$canvas = new Test_Canvas_Image_PNG($imageFilename);
$text = new Test_Canvas_Textarea(179, 92, $description, 9, 'arial.ttf');
$text->copyTo($canvas, 25, 193);
$canvas->saveAsPNG(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:07:23.820

你不应该对你需要的盒子使用这样的估计。

函数 imagettfbbox() 可以为您提供显示文本所需的框的明确答案。

[http://nl3.php.net/manual/en/function.imagettfbbox.php](http://nl3.php.net/manual/en/function.imagettfbbox.php)

希望有帮助。

# c# - LINQ 语句选择 XML 结构深处的元素

> ID：11429703
> 
> 赞同：1
> 
> 时间：2012-07-11T09:35:36.950
> 
> 标签：c#, .net, linq, linq-to-xml

我有看起来像这样的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
     <University>
          <Colleges>
            <College>
              <Id> Cambridge </Id>
              <Dept>
                <Id> Arts</Id>
              </Dept>
            </College>
            <College>
              <Id> Oxford</Id>
              <Dept>
                <Id> Philosophy </Id>
              </Dept>
            </College>
          </Colleges>
        </University> 
```

我想根据ID返回College。在另一种情况下，我想只写学院的 ID。

我不明白如何编写 LINQ 语句来直接读取 Id。我可以`Descendants()`在每个阶段使用。但是如何选择 XML 结构深处的元素呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:39:39.060

也许您应该使用 XPath。语法将比纯 Linq 查询更简单：

```
using  System.Xml;
using  System.Xml.XPath;
...

public foo()
{
    XElement yourNode = XElement.Parse(yourstring);
    XElement college = root.XPathSelectElement("//College[Id='Oxford']");
} 
```

如果您可以在结构中的多个位置拥有 College 节点，则 XPAth 查询`/University/Colleges/College[Id='OxFord']`将避免冲突问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:44:11.370

LINQ-XML,

```
XDocument doc = XDocument.Parse(xmlStr);
var results = doc.Root.Descendants("College")
              .Where(ele => ele.Element("Id").Value.Trim() == "Oxford"); 
```

# jquery - jquery ajax验证引擎不工作

> ID：11429707
> 
> 赞同：1
> 
> 时间：2012-07-11T09:35:42.723
> 
> 标签：jquery, jquery-validation-engine

我的 jquery 验证表单没有验证 ..here is the code like

```
 <script type='text/javascript'>
    $(document).ready(function()
    {

    $('#frm').validationEngine('validate');
    });
</script>

<div id='gap'> </div>
    <div id='main'>
        <div id='login-box'>
            <h2><span> ".HD_LOGIN." </span></h2>
            <table align='center'>
            <form id='frm' name='frm' >
                <tr> 
                    <td class='name'> <span>".LBL_USERNAME." </span> </td>
                    <td> <span> &nbsp; </span> </td>
                    <td> <input type='text' name='username' id='username' class='input validate[required]'/><input type='hidden' name='login' value='1' /></td>
                </tr>
                <tr>
                    <td id='error-show'> <span> &nbsp </span> </td> 
                </tr>
                <tr> 
                    <td class='name'> <span>".LBL_PASSWORD."</span></td>
                    <td> <span> &nbsp; </span> </td>
                    <td> <input  type='password' name='password' id='password' class='input validate[required]'/></td> 
                </tr>
                <tr>
                    <td id='error-show'><span> &nbsp; </span> </td> 
                </tr>
                <tr>
                    <td> <span> &nbsp; </span> </td>
                    <td> <span> &nbsp; </span> </td>
                    <td> <input class='chckbx' type='checkbox' name='rememberme' value='1'/> <span> ".CHCK_LOGGED." </span> </td> 
                </tr>
                <tr>
                    <td> <span> &nbsp </span> </td> 
                </tr>
                <tr> 
                    <td colspan='3' align='center'> <input type='button' name='but'  value='login' onclick=\"general_ajax1('modules/login/logincontroller.php',$('#frm').serialize())\"/></td> 
                </tr>

            </form> 
```

现在下面是自定义ajax

```
if($("#frm").validationEngine('validate'))
       {
function general_ajax1(urld,data)
{
   $.ajax({
        type:'POST',
        url:urld,
        data:data,
        success: function(response){$('#main_content').html(response);}
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:59:49.817

错误在您的 HTML 中。您在“表格”标签内放置了“表格”标签，这是不允许的。

```
<table align='center'>
     <form id='frm' name='frm' > <---- no!
         <tr> 
```

你必须这样做：

```
<form id='frm' name='frm' > <---- no!
    <table align='center'>
        <tr> 
```

请记住将“/form”标签放在文件末尾的“/table”标签之外。

此外，该插件似乎有一个错误（我使用的是 github 上的主版本）。默认情况下，“validateAttribute”未定义。在 dom 就绪事件上配置它。

```
$(function(){
   $.validationEngine.defaults.validateAttribute = "class";
}); 
```

这将使事情井井有条...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:43:03.267

```
<script type='text/javascript'>

    $(document).ready(function(){

        $('#frm').validationEngine();

    });

</script> 
```

尝试这种方式..然后将输入绑定到 class = validate[required]..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:47:44.723

在启动阶段，您需要附加 ValidationEngine。所以试试下面的就绪功能

```
$(document).ready(function(){ 
    $('#frm').validationEngine('attach'); 
}); 
```

# java - java - 如何在保持元素均匀分布的Java中将数组缩小到指定长度？

> ID：11429709
> 
> 赞同：1
> 
> 时间：2012-07-11T09:35:44.367
> 
> 标签：java, arrays, algorithm

我有源数组，我想通过从源数组中删除指定数量的元素来从源数组生成新数组，我希望新数组中的元素覆盖源数组中尽可能多的元素（新元素均匀分布在源数组上）并保持第一个和最后一个元素相同（如果有）。

我试过这个：

```
public static void printArr(float[] arr)
    {
        for (int i = 0; i < arr.length; i++)
            System.out.println("arr[" + i + "]=" + arr[i]);

    }
public static float[] removeElements(float[] inputArr , int numberOfElementToDelete)
    {
       float [] new_arr = new float[inputArr.length - numberOfElementToDelete];
        int f = (inputArr.length  ) / numberOfElementToDelete;
        System.out.println("f=" + f);
        if(f == 1)
        {
            f = 2;
            System.out.println("f=" + f);
        }

       int j = 1 ;
        for (int i = 1; i < inputArr.length ; i++)
        {
            if( (i + 1) % f != 0)
            {

                System.out.println("i=" + i + "   j= " + j);
                if(j < new_arr.length)
                {
                    new_arr[j] = inputArr[i];
                    j++;
                }

            }

        }

        new_arr[0] = inputArr[0];
        new_arr[new_arr.length - 1] = inputArr[inputArr.length - 1];
        return new_arr;
    }
public static void main(String[] args)
    {

        float [] a = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16};
        a = removeElements(a, 6);
        printArr(a);
    } 
```

我已经测试了(removeElements(a, 5) and removeElements(a, 4) and removeElements(a, 3)) 但是removeElements(a, 6); 给了：

```
 arr[0]=1.0
arr[1]=3.0
arr[2]=5.0
arr[3]=7.0
arr[4]=9.0
arr[5]=11.0
arr[6]=13.0
arr[7]=15.0
arr[8]=0.0
arr[9]=16.0 
```

问题是 (arr[8]=0.0) 它必须取一个值..如何解决这个问题？是否有任何代码可以删除指定数量的元素（并保持元素分布在源数组上而不在某些元素中生成零）？

**编辑 ：**

示例：removeElements(a, 1) ==> 从中间移除一个元素 (7) {1,2,3,4,5,6,7,9,10,11,12,13,14,15,16 }

removeElements(a, 2) ==> 删除索引 (4,19) 或 (5,10) 或 (4,10) 处的两个元素（没问题）

removeElements(a, 3) ==> 删除索引 (4,9,14) 或 (4,10, 15) 处的三个元素或（也没有问题）

removeElements(a, 4) ==> 删除索引 (3,7,11, 15) 或 (3,7,11,14) 处的四个元素，例如 .. 我想要的是如果我在源数组中绘制值在（例如 Excel 上的图表）上，我从新数组中绘制值，我必须得到相同的线（或接近它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:23:26.107

我认为您的代码中的主要问题是您将选择绑定到

```
(inputArr.length  ) / numberOfElementToDelete 
```

这样，您就不会考虑不想删除的第一个和最后一个元素。

一个例子：如果你有一个包含 16 个元素的数组，并且你想删除 6 个元素，这意味着最终数组将有 10 个元素，但是由于第一个和最后一个元素是固定的，你必须从剩下 14 个。这意味着您必须从数组中选择 8/14 (0,57) 个元素（不考虑第一个和最后一个）。这意味着您可以将计数器初始化为零，从第二个开始扫描数组并将分数的值与计数器相加，当计数器的值达到一个新的整数时（例如，在第三个元素处，计数器将达到 1,14）您将有一个元素可以选择并放入新数组。

所以，你可以做这样的事情（伪代码）：

```
 int newLength = originalLength - toDelete;
    int toChoose = newLength - 2;
    double fraction = toChoose / (originalLength -2)
    double counter = 0;
    int threshold = 1;
    int newArrayIndex = 1;
    for(int i = 1; i < originalLength-1; i++){
        **counter += fraction;**            
        if(integerValueOf(counter) == threshold){
            newArray[newArrayIndex] = originalArray[i];
            threshold++;
            **newArrayIndex++;**
        }

     }
     newArray[0] = originalArray[0];
     newArray[newArray.length-1] = originalArray[originalArray.length-1]; 
```

您应该检查特定情况，例如长度为 1 的 originalArray 或删除所有元素，但我认为它应该可以工作。

**编辑** 这是一个Java实现（即时编写，所以我没有检查空值等）

```
public class Test {

    public static void main(String[] args){
        int[] testArray = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16};
        int[] newArray = remove(testArray, 6);
        for(int i = 0; i < newArray.length; i++){
            System.out.print(newArray[i]+" ");
        }
    }

    public static int[] remove(int[] originalArray, int toDelete){  
        if(toDelete == originalArray.length){
            //avoid the removal of all the elements, save at least first and last
            toDelete = originalArray.length-2;
        }
        int originalLength = originalArray.length;
        int newLength = originalLength - toDelete;
        int toChoose = newLength - 2;
        int[] newArray = new int[newLength];
        double fraction = ((double)toChoose) / ((double)originalLength -2);
        double counter = 0;
        int threshold = 1;
        int newArrayIndex = 1;
        for(int i = 1; i < originalLength-1; i++){
            counter += fraction;            
            if(((int)counter) == threshold ||
                //condition added to cope with x.99999999999999999... cases 
               (i == originalLength-2 && newArrayIndex == newLength-2)){
                newArray[newArrayIndex] = originalArray[i];
                threshold++;
                newArrayIndex++;
            }           
         }
         newArray[0] = originalArray[0];
         newArray[newArray.length-1] = originalArray[originalArray.length-1];
         return newArray;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:51:12.460

为什么你不能初始化`i=0`

```
for (int i = 0; i < inputArr.length; i++) {
        if ((i + 1) % f != 0) { 
```

以下是输出：

```
arr[0]=1.0
arr[1]=1.0
arr[2]=3.0
arr[3]=5.0
arr[4]=7.0
arr[5]=9.0
arr[6]=11.0
arr[7]=13.0
arr[8]=15.0
arr[9]=16.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:05:36.613

如果我理解正确，这就是[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)，即从一个大数组中，通过随机选择创建一个小数组。

# excel - 我需要根据excel中第三个单元格的内容将多个电子表格中的几个单元格复制到摘要表中

> ID：11429711
> 
> 赞同：0
> 
> 时间：2012-07-11T09:35:57.607
> 
> 标签：excel, vba

我需要根据工作簿中多个电子表格中 G 列单元格中的内容将单元格 A2 到 A88 和 C2 到 C88 的内容复制到摘要表。

因此，我需要代码来扫描所有电子表格，以查看 Case closed 一词是否在单元格 G33 中，然后将单元格 A33 和 C33 的内容复制到摘要页面上的单元格中。

我已经看到了几个很接近的答案，但没有任何效果。

抱歉，没有可用的代码。

感谢任何和所有的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:47:07.837

如果你不能使用 excel 公式解决这个问题，你可以创建一些 vba ......我用以下 vba 代码制作了一个小测试 excel 表：

```
Sub test()
    processSheet Application.ActiveWorkbook, "Sheet1"
End Sub

Function FindSheet(currentWorkbook As Workbook, sheetName As String) As Worksheet
    If currentWorkbook Is Nothing Then
        Err.Raise vbObjectError + 1, "FindSheet", "Supplied workbook is nothing"
    End If
    Dim idx As Integer
    For idx = 1 To currentWorkbook.Sheets.Count
        Dim checkSheet As Worksheet
        Set checkSheet = currentWorkbook.Sheets.Item(idx)
        If checkSheet.Name = sheetName Then
            Set FindSheet = checkSheet
            Exit Function
        End If
    Next
End Function

Function IsEmpty(currentCell As Range) As Boolean
    IsEmpty = False
    If currentCell.Value = "" And currentCell.Value2 = "" Then
        IsEmpty = True
    End If
End Function

Sub processSheet(currentWorkbook As Workbook, sheetName As String)
    On Error GoTo Catch
    Dim currentSheet As Worksheet
    Set currentSheet = FindSheet(currentWorkbook, sheetName)
    If currentSheet Is Nothing Then
        Err.Raise vbObjectError + 2, "ProcessSheet", "Could not find sheet " + sheetName
    End If
    Dim colA As Range
    Dim colB As Range
    Dim colCondition As Range
    Dim colResult As Range

    currentSheet.Activate

    Set colA = currentSheet.Columns(1)
    Set colB = currentSheet.Columns(2)
    Set colCondition = currentSheet.Columns(3)
    Set colResult = currentSheet.Columns(4)

    Dim index As Integer: index = 2
    Dim run As Boolean: run = True

    Do While run
        If IsEmpty(colA.Rows(index)) And IsEmpty(colB.Rows(index)) And IsEmpty(colCondition.Rows(index)) Then
            run = False
        Else
            index = index + 1
            If colCondition.Rows(index).Value = "Closed" Then
                resultContent = CStr(colA.Rows(index).Value2) + ": " + CStr(colB.Rows(index).Value2)
            Else
                resultContent = "-"
            End If
            colResult.Rows(index).Value2 = resultContent
        End If
    Loop
    GoTo Finally

Catch:
        MsgBox ("An error occured: " + Err.Description)
        Exit Sub
Finally:

    End Sub 
```

您可以将此宏放入新工作簿的宏中。打开 Sheet1 并添加 4 列。我添加了 Excel 工作表外观的屏幕截图。

作为新用户，我不允许发布图片..所以这里是链接：[Sheet1](http://imgur.com/5gwdn.png)

代码的简短说明。

*   通过工作簿并通过工作表名称选择工作表
*   如果工作表可用，则脚本将运行三个相关列（连接需要两列，条件需要一列）并检查是否设置了值。当所有三列都不包含任何值时，循环停止（在您的情况下，您可以硬编码开始和结束索引，如果它始终保持不变）。
*   在迭代期间，检查条件字段。如果它等于“已关闭”，则结果单元格将使用连接的前两列值填充。

您当然需要根据您的问题调整代码，但这不是一件大事。

# android - 如何在android中像ipad一样分屏？

> ID：11429712
> 
> 赞同：1
> 
> 时间：2012-07-11T09:36:02.737
> 
> 标签：android, android-layout, android-widget

我想在 android 平板电脑中制作应用程序，例如在 ipad 中具有分屏功能，

我怎么能这样做？如果任何人有想法请发给我！

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:38:21.590

这可以使用[Fragments API](http://developer.android.com/guide/components/fragments.html)来实现。`Fragments`自 Android 3.0 起可用，但还有一个支持库可让您使用 Android 1.6 中的这些 API。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:39:12.290

使用[片段](http://developer.android.com/guide/components/fragments.html)：检查[http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/](http://mobile.tutsplus.com/tutorials/android/android-compatibility-working-with-fragments/)
这是一个使用兼容性包的示例应用程序的教程（允许您从 API 4 支持），它可能有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:53:59.297

这将是片段 xml 文件。那么您必须为 CustomerList（左部分）和 CustomerInfo（右部分）编写两个 xml 文件。您的活动应该扩展 FragmentActivity。试试这个:::

```
<fragment class="ui.misc.Customers$CustomerList" 
android:id="@+id/customerlistfragmant" android:layout_weight="1" 
android:layout_width="550px" 
android:layout_height="wrap_content" 
/> 
<fragment class="ui.misc.Customers$CustomerInfo" 
android:id="@+id/customerinfofragmant" android:layout_weight="1" 
android:layout_width="350px" android:layout_height="wrap_content" /> 
<FrameLayout android:id="@+id/regscreentwo" android:layout_weight="1" 
android:layout_width="0px" 
android:layout_height="fill_parent" 
/> 
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:39:36.143

这不是仅限于 iOS 的“功能”，您可以在 Android 中轻松做到这一点，方法是使用两个垂直的 LinearLayouts 并为它们分配相等的权重 - 将屏幕分成两半或不同的权重，以实现类似于您提供的图像的效果。

当然，还有很多其他方法可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:38:55.050

您可以使用此处描述的 API：[Fragments API](http://developer.android.com/guide/components/fragments.html)

# java - 使用 cron4j 在特定日期/日期范围内安排任务

> ID：11429716
> 
> 赞同：1
> 
> 时间：2012-07-11T09:36:09.213
> 
> 标签：java, scheduler, job-scheduling

我正在使用 cron4j 来安排用户在指定日期之间每天、每周和每月选择的电子邮件警报。

我找不到在特定日期/日期安排任务的模式。例如，应在 2012 年 7 月 15 日至 2012 年 7 月 18 日每天晚上 11:59 触发一封电子邮件。

据我所知，我面临的问题是 cron4j 中没有年份字段，因此如何在特定日期或日期范围内安排任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-14T17:47:13.503

> 15-07-2012 至 18-07-2012 每天晚上 11:59

59 23 15-18 7 *

cron4j 似乎像普通的 cron 一样工作。请参阅[文档](http://www.sauronsoftware.it/projects/cron4j/manual.php)。

您可以在 Runnable 中添加一个 if 语句来检查特定年份。

# linux - 嵌入在 ISO 中的程序

> ID：11429718
> 
> 赞同：1
> 
> 时间：2012-07-11T09:36:15.003
> 
> 标签：linux, scripting, iso, payload

我正在尝试找到一种在 ISO 文件中/旁边嵌入一些应用程序/脚本的好方法。我想要实现的是拥有一个 cd 映像，可用于通过 virtual-manager ( `virt-install`) 启动它自己的安装。这只是为了真正简化下载，因此您不需要单独拥有安装程序和图像。

执行此类操作的最简单选择是将 uu/b64 编码的图像放在 bash 脚本之后。不好的一面是文件需要再次复制，它的大小比它需要的大，而且 bash 喜欢为流式传输到其他程序的字符串保留大量内存。

另一种选择是 Perl 脚本，在`__END__`. 这使我免于对内容进行编码和高内存使用，但它不会阻止复制。

那么有什么优雅的解决方案吗？是否有任何脚本语言可以嵌入到另一个没有特定标题（或末尾）的文件中？或者可以与 ISO 格式本身合并的东西？

# javascript - 通过Javascript函数异步调用函数时如何将参数传递给控制器 中的函数

> ID：11429720
> 
> 赞同：1
> 
> 时间：2012-07-11T09:36:19.577
> 
> 标签：javascript, asp.net-mvc-3, swfupload

我正在使用 SWFUpload 对象将文件上传到 Amazon S3 存储桶，它使用同步方式在浏览器中启用 Javascript 时上传文件现在我想以特定方式保存它们（想要添加特定标头），我将从视图传递，然后在 Amazon S3 存储桶的文件名中使用它，但在这里我们使用异步方式，因此无法从视图传递任何参数

```
 <input class="t-button" type="file" id="photo" name="photo" />

    $("#photo").makeAsyncUploader({
                upload_url: "URL for the function to be called from controller",
                flash_url:<value>,
                button_image_url : <Value> 
```

等等等等，我试过了，但因为我在 Javascript 方面不太好，所以无法做到。任何类型的示例或帮助都将得到应用。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:57:20.290

添加查询字符串，例如：

```
 upload_url: "URL for the function to be called from controller" + "?header=yourHeader" 
```

并将参数（字符串标头）添加到您的控制器方法中。

# java - 如何用斯坦福解析器解析英语以外的语言？在java中，而不是命令行

> ID：11429722
> 
> 赞同：1
> 
> 时间：2012-07-11T09:36:24.047
> 
> 标签：java, nlp, stanford-nlp

我一直在尝试在我的 Java 程序中使用 Stanford Parser 来解析一些中文句子。由于我对 Java 和斯坦福解析器都很陌生，因此我使用了“ParseDemo.java”来练习。该代码适用于英语句子并输出正确的结果。但是，当我将模型更改为“chinesePCFG.ser.gz”并尝试解析一些分段的中文句子时，出现了问题。

这是我的Java代码

```
class ParserDemo {

  public static void main(String[] args) {
    LexicalizedParser lp = LexicalizedParser.loadModel("edu/stanford/nlp/models/lexparser/chinesePCFG.ser.gz");
    if (args.length > 0) {
      demoDP(lp, args[0]);
    } else {
      demoAPI(lp);
    }
  }

  public static void demoDP(LexicalizedParser lp, String filename) {
    // This option shows loading and sentence-segment and tokenizing
    // a file using DocumentPreprocessor
    TreebankLanguagePack tlp = new PennTreebankLanguagePack();
    GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory();
    // You could also create a tokenier here (as below) and pass it
    // to DocumentPreprocessor
    for (List<HasWord> sentence : new DocumentPreprocessor(filename)) {
      Tree parse = lp.apply(sentence);
      parse.pennPrint();
      System.out.println();

      GrammaticalStructure gs = gsf.newGrammaticalStructure(parse);
      Collection tdl = gs.typedDependenciesCCprocessed(true);
      System.out.println(tdl);
      System.out.println();
    }
  }

  public static void demoAPI(LexicalizedParser lp) {
    // This option shows parsing a list of correctly tokenized words
    String sent[] = { "我", "是", "一名", "学生" };
    List<CoreLabel> rawWords = Sentence.toCoreLabelList(sent);
    Tree parse = lp.apply(rawWords);
    parse.pennPrint();
    System.out.println();

    TreebankLanguagePack tlp = new PennTreebankLanguagePack();
    GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory();
    GrammaticalStructure gs = gsf.newGrammaticalStructure(parse);
    List<TypedDependency> tdl = gs.typedDependenciesCCprocessed();
    System.out.println(tdl);
    System.out.println();

    TreePrint tp = new TreePrint("penn,typedDependenciesCollapsed");
    tp.printTree(parse);
  }

  private ParserDemo() {} // static methods only
} 
```

它与 ParserDemo.java 基本相同，但是当我运行它时，我得到以下结果：

> 从序列化文件 edu/stanford/nlp/models/lexparser/chinesePCFG.ser.gz 加载解析器...完成 [2.2 秒]。(ROOT(IP(NP(PN我))(VP(VC是)(NP(QP(CD来))(NP(NN学生))))))
> 
> 线程“主”java.lang.RuntimeException 中的异常：无法在 edu.stanford.nlp.trees.GrammaticalStructureFactory.newGrammaticalStructure(GrammaticalStructureFactory) 调用公共 edu.stanford.nlp.trees.EnglishGrammaticalStructure(edu.stanford.nlp.trees.Tree) .java:104) 在 parserdemo.ParserDemo.demoAPI(ParserDemo.java:65) 在 parserdemo.ParserDemo.main(ParserDemo.java:23)

第 65 行的代码是：

```
 GrammaticalStructure gs = gsf.newGrammaticalStructure(parse); 
```

我的猜测是 chinesePCFG.ser.gz 遗漏了与“edu.stanford.nlp.trees.EnglishGrammaticalStructure”相关的内容。由于解析器通过命令行正确解析中文，所以我自己的代码肯定有问题。我一直在寻找，只是找到了一些类似的案例，其中一些提到了使用正确的模型，但我真的不知道如何将代码修改为“正确的模型”。希望有人可以帮助我。我是 Java 和斯坦福解析器的新手，所以请具体说明。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T06:50:15.173

问题是 GrammaticalStructureFactory 是由 a 构造的`PennTreebankLanguagePack`，它是用于英语 Penn Treebank 的。你需要使用（在两个地方）

```
TreebankLanguagePack tlp = new ChineseTreebankLanguagePack(); 
```

并适当地导入它

```
import edu.stanford.nlp.trees.international.pennchinese.ChineseTreebankLanguagePack; 
```

但我们通常也建议对中文使用因式解析器（因为它的效果要好得多，与英文不同，尽管代价是更多的内存和时间使用）

```
LexicalizedParser lp = LexicalizedParser.loadModel("edu/stanford/nlp/models/lexparser/chineseFactored.ser.gz"); 
```

# objective-c - Cocoa 中的可恢复下载

> ID：11429725
> 
> 赞同：0
> 
> 时间：2012-07-11T09:36:40.637
> 
> 标签：objective-c, cocoa, download

在可可中为可恢复下载编写代码的最佳方法是什么？我应该使用 NSURLConnection、NSURLDownload 还是有更好的方法？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:43:23.053

看看[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)库。不幸的是，开发人员不再使用这个库，但我发现它仍然可以可靠地工作。这个库中有很多好东西，你可以用一行代码使下载恢复。

# javascript - 在输入中发现 # 或 @

> ID：11429729
> 
> 赞同：0
> 
> 时间：2012-07-11T09:36:50.087
> 
> 标签：javascript, events, javascript-events, jquery

jQuery是否可以发现用户何时在搜索框中输入了第一个字符，然后无论他们使用什么键盘语言或设置都会提示警报`@`？`#`

例如，如果我进入`@`搜索框，我希望它提示消息或执行我的操作。

```
​&lt;input type='text' name='search' id='search' />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

jQuery

```
$("#search").keydown(function(event) {
    alert(event.which);
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:40:47.743

如果要测试输入中的*第一个*字符是否是其中一个字符，则不要测试刚刚输入的字符，而是测试第一个字符：

```
$("#search").on("blur", function() {
    if (/^[@#]/.test(this.value))
       alert("@ or # entered.");
}); 
```

请注意，最好在模糊（甚至在提交表单时）而不是在每次击键时这样做，因为这对用户来说不那么烦人，而且因为它可以应付复制/粘贴或拖放.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:38:12.190

只有[`keypress`事件](http://api.jquery.com/keypress/)报告了一个可靠的值：http `event.which`: [//jsfiddle.net/QDCvG/](http://jsfiddle.net/QDCvG/)

```
$("#search").keypress(function(event) {
    // @ = 64, # = 35
    if ((this.value.length === 0 || this.selectionStart === 0)
     && (event.which === 64 || event.which === 35)) {
        // keypress fires before the field is populated
    }
});​ 
```

[`String.fromCharCode(event.which)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/fromCharCode)可用于获取键入的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:45:11.787

您必须将事件更改为 bind `keyup`，即使释放了两个键，它也会触发事件。该`.charAt(0)`方法将检查输入框的第一个字符。

```
$("#search").keyup(function(event) {
     var curKey = $(this).val();

     if (curKey.charAt(0) == '@' || curKey.charAt(0) == '#')
     {
         alert('@ or # typed first!');
     }
}); 
```

直播：http : [//jsfiddle.net/yHcVH/](http://jsfiddle.net/yHcVH/)

# delphi - Delphi PeekMessage 访问冲突 Delphi 2009 Windows API

> ID：11429730
> 
> 赞同：3
> 
> 时间：2012-07-11T09:36:50.927
> 
> 标签：delphi, winapi, access-violation, peekmessage

定期从 PeekMessage 获取访问冲突。这不是我对 PeekMessage 的调用，它来自 Application.Run。MadExcept 的堆栈跟踪显示 Application.Run 调用 PeekMessage，而后者又调用 kiUserCallBackDispatcher。

德尔福 2009。

堆栈跟踪是：

```
callstack crc     : $0202d0d7, $a09d5671, $3195cde5
exception number  : 1
exception class   : EAccessViolation
exception message : Access violation at address 0202D0D7\. Write of address 00310038.

main thread ($1650):
0202d0d7 +000 ???
7c90e470 +010 ntdll.dll                               KiUserCallbackDispatcher
7e4193fd +162 USER32.dll                              PeekMessageW
0050b2a4 +01c infraWrapper90.exe Forms                TApplication.ProcessMessage
0050b3ea +00a infraWrapper90.exe Forms                TApplication.HandleMessage
0050b715 +0c9 infraWrapper90.exe Forms                TApplication.Run 
```

我认为这意味着 PeekMessage() 正在调用我的一个窗口过程来处理消息，但它找不到那个窗口过程。起初我不明白为什么 Peekmessage 会调用任何窗口过程，因为它只是在查看消息，但是从这里和其他地方的进一步阅读中我想我看到了：

*   PeekMessage() 将处理从其他线程发送的 SendMessages()
*   PeekMessage() 有时会处理 Paint 消息
*   其他人报告说看到 PeekMessage 为其他消息调用 Window 过程，例如 WM_ERASEBKGND。

来自 MSDN：

> 在此调用期间，系统会传递待处理的非排队消息，即使用`SendMessage`、`SendMessageCallback`、`SendMessageTimeout`或`SendNotifyMessage`函数发送到调用线程拥有的窗口的消息。

我不太明白，因为我认为 SendMessage() 调用会立即处理。其他人似乎认为这仅适用于 SendMessage 来自另一个线程时。

我不能在一个独立的项目中复制它。从错误看来，好像 PeekMessage 正在调用一个不再存在的窗口过程 - 但我自己尝试通过故意破坏表单然后对无效窗口句柄执行 SendMessage() 和 Postmessage() 来做到这一点，而 Windows 似乎只是忽略它。我已经尝试将消息从表单的析构函数发送到自身以及其他各种事情，但我不能让它失败。

关于其他要检查的任何建议？提前致谢。

瑞克

# django - Django中日期格式的本地化

> ID：11429737
> 
> 赞同：0
> 
> 时间：2012-07-11T09:37:22.953
> 
> 标签：django

我正在开发一个应该支持不同语言和风格的应用程序，例如美国、英国和德国。

现在查看[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/localflavor/#united-states-of-america-us)，例如似乎没有直接支持美国日期格式。看来这部分需要手工完成。

所以我一直在研究文档，发现[了这个：](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#date)

```
{{ value|date:"D d M Y" }} 
```

但是，当我在代码中尝试此操作时，这似乎不适用于表单：

```
{{form.birth_date|date:"D d M Y"}} 
```

似乎需要在表单字段本身设置格式。

[更多研究表明， 2009 年](https://stackoverflow.com/questions/1453413/making-django-forms-datefield-show-use-local-date-format)Stackoverflow 中提出了类似的问题：

这个解决方案可以工作，但对于这样一个简单的问题，它看起来很有吸引力。自 2009 年以来，Django 已经走了很长一段路，所以我想知道是否有更好的方法将它直接放入 ModelForm 中？

假设我们有以下代码：

**模型：**

```
class ConversationHistory(models.Model):
    contact_date        = models.DateField(_(u"Conversation Date")) 
```

**形式：**

```
class ConversationForm(ModelForm):        
    class Meta:
        model = ConversationHistory 
```

我可以将以下内容添加到 ModelForm：

```
widgets = { 'contact_date': forms.DateInput(format='M d, Y') } 
```

这是正确的本地化方式吗？如果我想将格式更改为英式英语或德语怎么办？所以我觉得我在这里错过了一些东西......

非常感谢，

**更新：**

我现在已经尝试过了：

```
widgets = { 'contact_date': forms.DateInput(format='SHORT_DATE_FORMAT') } 
```

但日期显示为 SHORT_DATE_FORMAT。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:43:36.873

我一直在为这个解决方案工作2 年`dojo`！！！如果您正在使用集成，我终于找到了以下作品`dojango`。

```
someDate = DateField(widget=DateInput(attrs={'constraints':'{datePattern:\'dd/MM/yyyy\', strict:true}')) 
```

*表格.py*

我不知道这是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:46:06.230

[您正在寻找`x`格式。](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)或者最坏的情况是你只需对格式进行 I18Nize 并让翻译人员弄清楚。

# jquery - JQuery 在 CheckBoxList .next() 中获取复选框的标签不支持错误

> ID：11429741
> 
> 赞同：1
> 
> 时间：2012-07-11T09:37:30.387
> 
> 标签：jquery, checkbox, label, checkboxlist

忽略我是如何做到这一点的（我已经汇总了各种函数调用以简化示例），为什么我得到*Object does not support this property or method* for `next()`call of the 4th line below ？

## JQuery 将所有选定的项目标签文本串在一起：

```
var cbs = $('#controlId :checkbox');              // Get all checkboxes for the specified control id
var rest = cbs.slice(1);                          // Get all items except the first
var checked = rest.filter(':checked');            // Get all checked items
var result = checked.get(0).next('label').text(); // Error here getting first label text
for (var i = 1; i < checked.length; i++) {
            result = result + ', ' + checked.get(i).next('label').text();
} 
```

## HTML 由 ASP.Net 为 a 生成，`CheckBoxList`如下所示：

```
<table id="controlId">
    <TBODY>
        <TR>
            <TD>
                <INPUT id=MainContent_DropDownCheckBoxList4_checkBoxList_0 value=ALL type=checkbox>
                <LABEL for=MainContent_DropDownCheckBoxList4_checkBoxList_0>All</LABEL>
            </TD>        
        </TR>
        <TR>
            <TD>
                <INPUT id=MainContent_DropDownCheckBoxList4_checkBoxList_1value=0 type=checkbox>
                <LABEL for=MainContent_DropDownCheckBoxList4_checkBoxList_1>Item 0</LABEL>
            </TD>
        </TR>
        <TR>
            <TD>
                <INPUT id=MainContent_DropDownCheckBoxList4_checkBoxList_2 type=checkbox>
                <LABEL for=MainContent_DropDownCheckBoxList4_checkBoxList_2>Item 1</LABEL>
            </TD>
        </TR>
    </TBODY>
</TABLE> 
```

获取复选框标签文本的正确方法是什么（*使用上述代码样式*）？

**请不要使用以 $('#controlId') 开头的选择器提供答案**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:45:48.980

这是因为[get()](http://api.jquery.com/get/)返回一个 DOM 元素，而不是 jQuery 对象，并且 DOM 元素不支持[next()](http://api.jquery.com/next/)方法（jQuery 对象支持）。

您可以使用[eq(0)](http://api.jquery.com/eq/)或[first()](http://api.jquery.com/first/)代替：

```
var result = checked.first().next("label").text(); 
```

# c# - 从不同的文件加载 wcf 主机配置

> ID：11429742
> 
> 赞同：2
> 
> 时间：2012-07-11T09:37:31.567
> 
> 标签：c#, asp.net, wcf, configurationmanager

我的应用程序自托管多个 wcf 服务。这会在应用程序配置文件中造成相当混乱，并且很难维护。

我想找到一种方法来分离这些配置，以便每个 wcf 服务都有自己的配置文件。

谢谢

**编辑：** 我找到了[一种](http://www.mssoftwareconsulting.com/msswc/blog/post/Override-WCF-Client-Settings-From-Custom-Config-File.aspx)指定客户端配置文件的方法，尝试过，它可以工作。现在我只需要找到如何为自托管服务做这件事，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:07:25.987

我找到了答案。 [这篇](http://www.paraesthesia.com/archive/2008/11/26/reading-wcf-configuration-from-a-custom-location.aspx)文章包括客户端和主机端的整个解决方案。感谢那些回答的人。

# php - 谷歌搜索类似文本框

> ID：11429743
> 
> 赞同：1
> 
> 时间：2012-07-11T09:37:32.013
> 
> 标签：php, jquery, html, ajax

我想创建一个像谷歌搜索文本框这样的文本框......

我尝试过的是，当输入一个字符时，使用 AJAX 以该单词开头的单词将显示在一个 div 中，它工作正常，但我希望它应该像谷歌搜索框一样工作。现在箭头键不能只工作单击文本将被选中

我的代码

```
<style>
#resultDiv {
width:154px;
position:absolute;
left:121px;
top:30px;
}

p {
padding:0px;
margin:0px;
}
#resultDiv p:hover {
background-color:#999;
}
</style>
<script type="text/javascript">
$(document).ready(function(e) {
$('#resultDiv p').live('click',function(){
    var value = $(this).text();
    $('#word').val(value);
});
});
</script>

</head>

<body>
<form action="" method="post">
<label>Enter Your Word </label><input type="text" id="word"/>
<div id="resultDiv"></div>
</form>

<script>
// prepare the form when the DOM is ready 
$(document).ready(function() { 
$('#word').keyup(function(e) {
$.ajax({
        type: "POST",
        url: "googleDropSearch.php",
        data: "word="+this.value,
        success: function(msg){
            $('#resultDiv').html(msg);
            $('#resultDiv').css('border-left','1px solid #ccc').css('border-right','1px solid #ccc').css('border-bottom','1px solid #ccc');
        }
    });
});
});

</script>

</body>
</html> 
```

行动页面

```
<?php
$connection = mysql_connect('localhost','root','') or die("ERROR".mysql_error());
$connection = mysql_select_db('ajax',$connection) or die("ERROR".mysql_error());

if(!empty($_POST)):
if(isset($_POST['word']) && $_POST['word'] != ''):
/****************
Sanitize the data
***************/
$key =$_POST['word'];
$query = mysql_query("SELECT county FROM fl_counties WHERE county LIKE '$key%';");

 $rows = mysql_num_rows($query);
 if($rows != 0):
while($result = mysql_fetch_array($query)):

echo "<p>".$result[0]."</p>";
endwhile;
endif;//rows > 0

endif;//county not sent

endif;

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:10:08.620

jquery 中有一个有用的插件。

[jQuery自动完成](http://jqueryui.com/demos/autocomplete/)

有一个简单的演示可用，您只需将数组传递给它。

希望这对你有用。

# php - 如何使用 FB API 使用 PHP 从 Facebook 相册中获取照片

> ID：11429744
> 
> 赞同：1
> 
> 时间：2012-07-11T09:37:40.217
> 
> 标签：php, facebook, json, photos

我正在构建一个 fb 应用程序，它为用户提供从相册中选择照片的选项，以便将其上传到应用程序的图库。

但是，当用户从下拉列表中选择他的一张专辑并提交表单时，我不希望脚本重新加载页面，而只是刷新一个 div。

我想出的解决方案是使用 Ajax。下面是 index.php 的代码：

```
 <?php

    session_start(); 
    header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');
    include 'facebook.php';

    $facebook = new Facebook(array(
      'appId'  => 'YOUR_APP_ID',
      'secret' => 'YOUR_SECRET_CODE'

    ));

    if(!$_REQUEST['access_token'])
    $access_token = $facebook->getAccessToken();
    else
    $access_token = $_REQUEST['access_token']; 

    ?>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html xmlns:fb="http://ogp.me/ns/fb#" lang="en" >
      <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes" />
        <title>MY FACEBOOK APPLICATION</title>
        <?php require('inc.head.php'); ?>

      </head>
      <body>
       <script>

  function showAlbum(album_id)
  {
     document.getElementById("txtHint").innerHTML = "<br><img src='images/ajax-loader.gif' /><br/><br/>Loading photos...";

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
        document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
      }
    }
    xmlhttp.open("GET","fetch_data.php?album_id="+album_id+"&access_token=<?=$access_token?>",true);
    xmlhttp.send();
    }
  </script>
  <?
        $albums = $facebook->api('/me/albums');
        echo '<div class="alb">';

        echo " <form name='frm'>
        <select name='album_id' onchange=\"showAlbum(this.value)\">
        <option type='hidden' value=0>Select an album</option>";
        foreach($albums['data'] as $album)
            echo "<option type='hidden' value='".$album['id']."'> ".$album['name']."</option>";

        echo '</select></form></div>';
      ?>
          <div id="txtHint" ></div>
      </body>
    </html> 
```

ajax 脚本调用 fetch_data.php

```
 <?php
      require_once 'facebook.php';

      $facebook = new Facebook(array(
       'appId'  => 'YOUR_APP_ID',
       'secret' => 'YOUR_SECRET_CODE'

     ));

      $access_token = $_REQUEST['access_token']; 

              $album_id = $_REQUEST['album_id'];

              $photos = ''; 
              $photos = $facebook->api("/{$album_id}/photos", array("access_token" => "$access_token"));

             echo "<div class='slideshow'>"; 

              $photo = '';
              foreach($photos['data'] as $photo)
              {
                  echo "<br /><a href='index.php?src={$photo['source']}&access_token=$access_token'><img title='CLICK PHOTO TO SELECT' src='{$photo['source']}' width=320 border=0/></a><br /><br />";
              }

             echo " </div>";
              ?> 
```

问题是，当我第一次选择专辑时，它会获取所有相关图像。但是，当我选择另一个专辑时，它会引发 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。似乎在 fetch_data.php 中创建一个新的 $facebook 对象会导致这种情况。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T07:17:03.450

解决方案是使用 json（尽管需要 2 个 IE 修复 - 请参阅下面的评论），以避免创建另一个 $facebook 对象。

这是新的 index.php：

```
include 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOUR_SECRET_CODE',
  ));

  //get token
  $access_token = $facebook->getAccessToken();

 //don't forget to include the js libraries for jquery and json
 //I am omitting those to save space

//now get albums
  $albums = $facebook->api('/me/albums');

  //create a drop down list for the user to select one of his albums

        echo " <form name='frm'>
        <select name='album_id' onchange=\"showAlbum(this.value)\">
        <option type='hidden' value=0>Select an album</option>";
        foreach($albums['data'] as $album)
        echo "<option type='hidden' value='".$album['id']."'> ".$album['name']."</option>";

        echo '</select></form>';
      ?>
         <!--this is the div to display the photos of the album selected-->
          <div id="txtHint" > </div>

     <!--and now the js-->
      <script> 
      function showAlbum(album_id)
     {
      //until it loads the photos show a loading gif
      document.getElementById("txtHint").innerHTML = "<br><img src='images/ajax-loader.gif' /><br/><br/>Loading photos...";

    //here is the IE fix
     $.support.cors = true;

    // get images - the addition of the callback parameter is the 2nd IE fix
    $.getJSON('https://graph.facebook.com/' + album_id + '/photos?access_token=<?=$access_token?>&callback=?', function(json, status, xhr) {
      var imgs = json.data;

      var images='';  
      for (var i = 0; i < imgs.length; i++) {
       //each image has a variety of different dimensions
       //i am selecting the first dimension i.e. [0] and set my own width
        images +='<br /><img src="' + imgs[i]['images'][0]['source'] + '" width=320><br><br>';
      }
      //append all the photos found for this album id inside the div 
      document.getElementById("txtHint").innerHTML = images;

      }).error(function(jqXHR, textStatus, errorThrown) { alert(errorThrown); });

   } 
</script> 
```

# javascript - 如何使用纯 JavaScript 创建嵌套树打开/关闭按钮

> ID：11429745
> 
> 赞同：0
> 
> 时间：2012-07-11T09:37:46.193
> 
> 标签：javascript

我有以下html结构。当有人单击“切换” div 时，我想向内容 div 和分支 ul 兄弟添加一个隐藏类。再次单击时，我想删除它们。我可以写点击事件，但是我不知道如何从点击事件中引用嵌套内容和分支。

```
<ul id="tree">
    <li class="leaf">
        <div class="switch"></div>
        <div class="content">
            ... stuff
        </div>
        <ul class="branch">
            <li class="leaf">
                <div class="switch"></div>
                <div class="content">
                    ... stuff
                </div>
                <ul class="branch">
                    <!-- Can be many layers deep -->
                </ul>
            </li>
        </ul>
    </li>
    <li class="leaf">
        <div class="switch"></div>
        <div class="content">
            ... stuff
        </div>
        <ul class="branch">
            <li class="leaf">
                <div class="switch"></div>
                <div class="content">
                    ... stuff
                </div>
                <ul class="branch">
                    <!-- Can be many layers deep -->
                </ul>
            </li>
        </ul>
    </li>
    <!-- Can be many more of these -->
</ul> 
```

Javascript

```
var Library = (function () {
    "use strict";

    /**
     * Create click events for all classes passed in.
     *
     * This is used by newer browsers that have getElementsByClassName.
     *
     * @param {array} class_names The class names to attatch click events to.
     * @param {function} The callback to handle the click event.
     *
     * @return void
     */
    var classNameClick = function(class_names, clickEvent) {
        for(var i = 0; i < class_names.length; i++) {
            var elements = document.getElementsByClassName(class_names[i]);
            for(var j = 0; j < elements.length; j++) {
                elements[j].onclick = clickEvent;
            }
        }
    };

    /**
     * Loops through all DOM elements to find classes to attatch click events to.
     *
     * This is used by older browsers that don't have getElementsByClassName
     *
     * @param {array} class_names The class names to attatch click events to.
     * @param {function} The callback to handle the click event.
     *
     * @return void
     */
    var classTagClick = function(class_names, clickEvent) {
        var elements = document.getElementsByTagName("*");
        for(var i = 0; i < elements.length; i++) {
            var element = elements[i];
            for(var j = 0; j < class_names.length; j++) {
                if(element.className.indexOf(class_names[j]) >= 0) {
                    element.onclick = function() {
                        clickEvent();
                    }
                }
            }
        }
    };

    return {

        /**
         * Loops through all DOM elements to find classes to attatch click events to.
         *
         * @param {array} class_names The class names to attatch click events to.
         * @param {function} The callback to handle the click event.
         *
         * @return void
         */
        classClick : function(class_names, clickEvent) {
            if (typeof document.getElementsByClassName !== "undefined") {
                classNameClick(class_names, clickEvent);
            } else {
                classTagClick(class_names, clickEvent);
            }
        }

    };
}());

var Tree = (function () {
    "use strict";

    return {

        construct : function () {

            Library.classClick("switch", function() {
                // Not sure how to reference the relevant content and branch class here.
            });

        }
    };
}());

window.onload = function() {
    Tree.construct();
} 
```

我不能使用 jQuery 或其他库（使用 jQuery 很容易）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:26:46.040

我通过将以下内容添加到两个类点击事件中解决了这个问题

```
element.onclick = function() {
    clickEvent.apply(this);
} 
```

这会将 click 事件函数中的 this 对象替换为被点击的 dom 元素。

然后我将以下内容添加到点击事件中。

```
Library.classClick(["switch"], function() {
    var leaf_node = this.parentNode;
    var parent_class = leaf_node.className;
    if (parent_class.indexOf(" closed") === -1) {
        leaf_node.className += " closed";
    } else {
        leaf_node.className = leaf_node.className.replace(" closed", "");
    }
}); 
```

最后添加了以下css

li.leaf.closed > .content, li.leaf.closed > .branch { 显示：无；}

# xml - 改变xml属性的顺序

> ID：11429747
> 
> 赞同：1
> 
> 时间：2012-07-11T09:37:49.093
> 
> 标签：xml, xslt

我正在使用 xslt 转换来转换一些 xml 文件。为了格式化输出，我使用的是 xsl 样式表中的两个标签。

```
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/> 
```

但问题是，在 Windows 中我得到了一种输出，而当我在 unix 机器上运行程序时，我得到了另一种输出。例如：

`<Book name="Godfather" author="MarioPuzo"`/>

但是在unix中，我得到的是，

`<Book author="MarioPuzo" name="Godfather" />`

这是一个奇怪的问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:25:31.790

**在 XML 中，元素的属性集合中没有定义标准排序**——这可能因实现而异。

此外，如果两个 XML 文档之间的唯一区别是属性的顺序，它们被认为是“相等的”——例如 XPath 2.0 函数 deep-equal($doc1, $doc2) 产生 true()。

这类似于类定义——两个类定义的唯一区别是属性（或方法）的顺序是相同的类定义，并且可以相互替换而不会导致任何使用实例的程序产生不同的结果这个类定义。

**这是一个演示**，如果唯一的区别是属性的排序，则两个文档被认为是“相等的”：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vDoc2">
     <t y="2"   x="1" />
    </xsl:variable>

 <xsl:template match="/">
     <xsl:sequence select="deep-equal(/, $vDoc2)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<t x="1" y="2"/> 
```

**结果是**：

```
true 
```

即使针对给定的 XML 解析器和 XSLT 处理器的实现发现了一些 hack 以特定顺序出现的属性），但不能保证这种 hack 可以与该实现的下一个版本一起使用。

# c# - 从 Windows 服务访问数据库

> ID：11429748
> 
> 赞同：2
> 
> 时间：2012-07-11T09:37:49.710
> 
> 标签：c#, asp.net, entity-framework-4, windows-services, connection-string

我有这个 ASP.NET 应用程序，我在其中使用实体框架连接到数据库。在这个应用程序中，我有一个类，它在数据库上提供不同的操作（添加、删除等）。一切正常。现在我需要创建一个 Windows 服务，它每周使用从存储库收集的信息更新数据库。我想我可以添加我的 ASP.NET dll 作为对我的 Windows 服务的引用，这样我就可以使用我在那里定义的操作。但我收到以下错误：

*指定的命名连接在配置中未找到，不打算与 EntityClient 提供程序一起使用，或者无效*

我在其他线程中读到我应该将连接字符串复制到 app.config，但我的 Windows 服务项目中没有任何 app.config 文件。如何在 ASP 应用程序和 Windows 服务中使用我在类中定义的 EDM 操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:45:43.317

伙计，你需要`app.config`在这种情况下创建一个。`Copy the connection string in the web app to the app.config with the same name.`查看 Windows 服务何时运行并且 EF 尝试创建它没有找到任何数据上下文，因此它显示错误。所以你应该添加一个 app.config 文件并`connectionstring`适当地添加它。

# java - BundleActivator 方法未在 OSGi 中得到通知

> ID：11429757
> 
> 赞同：2
> 
> 时间：2012-07-11T09:38:00.413
> 
> 标签：java, osgi, bundle

我创建了一个带有激活器的捆绑包。在启动我的包时，应该调用激活器方法，但它们不是。我已经按照教程中提到的相同方式实现了它。

```
package com.manning.sdmia;

import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;

public class Activator implements BundleActivator { 
    private BundleContext context;

    public void start(BundleContext context) throws Exception {
        System.out.println("In bundle");
    }

    public void stop(BundleContext context) throws Exception {
        System.out.println("In stop");
    }
} 
```

这是我的`MANIFEST.MF`文件：

```
enter code here
 Manifest-Version: 1.0
 Bundle-ManifestVersion: 2
Bundle-Name: Spring DM Hello World 
Bundle-SymbolicName: com.manning.sdmia.helloworld
Bundle-Version:1.0.0
Bundle-Activator: com.manning.sdmia.Activator
Export-Package:com.manning.sdmia
Import-Package: org.osgi.framework 
```

现在，当我从 OSGI 提示符启动捆绑包时，`System.out.println`应该在启动时调用 start 命令，但它没有打印任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T14:54:59.887

如果您的清单看起来像您在此处打印的，那么它不是正确的清单。删除标题名称前的第一行和没有空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T18:06:04.263

我刚刚遇到了同样的问题，我通过将此行添加到 Manifest 文件使其工作：

```
Bundle-ActivationPolicy: lazy 
```

# php - 在同一个控制器中调用不同的动作

> ID：11429765
> 
> 赞同：1
> 
> 时间：2012-07-11T09:38:27.907
> 
> 标签：php, zend-framework, controller

我正在开发一个小应用程序。使用 php 和 Zend 框架。我有一个表格，我用它的控制器来查看表格。现在我需要操作表单数据并相应地重定向用户。这是我的控制器

```
<?php

class NewuserController extends Zend_Controller_Action {

public function init()
{
    /* Initialize action controller here */
}

public function newuserAction()
{
    $this->view->newuser;
}

public function adduserAction(){

    $data = $this->getRequest()->getParams();
    $u = new User();
    $u->setUserName($data['uName']);
    $u->setPrepwd($data['pwd']);
    $u->setPrepwd($data['pwd']);
    if($u->isEqual()){
        $val = $u->addUsers();
        if($val)
            $this->_helper->redirector('main','main');
    }
    else
        $this->_helper->redirector('newuser','newuser');

}
}

?> 
```

我的看法是`newuser.phtml`。在我指定的`action`属性中。但是当我提交表单时，它再次显示.`<form>``Newuser/adduser``newuser.phtml`

为什么是这样？

提前致谢

查鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:09:05.240

您可以*转发*请求而不是重定向：

```
$this->_forward('newuser'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:57:54.250

我建议您使用重定向器助手而不是 foward，因为如果您希望使用 foward 将用户重定向到主页，它将重定向但不会更改 url，因此如果他们要为页面添加书签，例如它不会工作。如果您使用重定向器，它将重定向并更改 url 以仅显示您的主 phtml 页面。此外，如果您在同一个控制器中，则无需包含作为控制器的第二个参数。看看这个以获得更多帮助

[http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector)

# java - 拥有内部 JPanel

> ID：11429766
> 
> 赞同：2
> 
> 时间：2012-07-11T09:38:31.457
> 
> 标签：java, swing, jpanel, layout-manager

可以有inner `JPanel`s吗？如果可以的话，方便吗？

我有一个`JPanel`

```
public class MyPanel extends JPanel
{

} 
```

在里面`MyPanel`，我可以再放一个`JPanel`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:43:14.540

是的。您可以使用：

```
MyPanel myJPanel = new MyPanel();
jPanel.add(myJPanel); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:41:57.437

您可以根据需要在另一个面板中放置任意数量的面板。但请确保根据您的需要使用正确的 LayoutManager。

阅读本教程以了解更多信息： http: [//docs.oracle.com/javase/tutorial/uiswing/components/panel.html](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:59:39.893

```
JPanel myJPanel1 = new JPanel();// creating first JPanel
JPanel myJPanel2 = new JPanel();// creating second JPanel

myJPanel1.add(myJPanel2); //adding first panel to second one 
```

# html - 电子邮件中的 HTML 空格

> ID：11429772
> 
> 赞同：0
> 
> 时间：2012-07-11T09:38:57.190
> 
> 标签：html, vb6

一个 VB6 应用程序发送一个 HTML 电子邮件。请看下面的代码。收到的电子邮件删除了所有空格，即第 7 行上的所有空格都被删除，发送的电子邮件说：“这是一个测试”。有没有办法发送包含所有空格的 HTML 电子邮件。

```
strMailText = strMailText & "<b><font size=""2"" face=""Arial""><br>Test Email</font></b><br><br>"
strMailText = strMailText & "<table border='1'>"
strMailText = strMailText & "<tr>"
strMailText = strMailText & "<td><b><font size=""2"" face=""Arial"">Test Column</font></b></td>"
strMailText = strMailText & "</tr>"

strMailText = strMailText & "<td><font size=""2"" face=""Arial"">This is a         test</font></td>"
strMailText = strMailText & "<tr>"
strMailText = strMailText & "table"

SendEMail strEmailServer, "test@test.com", strEMailTo, _
                                "Test Email", strMailText, True 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T09:43:58.743

使用`&nbsp;`而不是空格。

`&nbsp`在基于计算机的文本处理和数字排版中，不间断空格、不间断空格或不间断空格 (NBSP) 是空格字符的变体，可防止在其位置自动换行（换行）。

所以这条线

```
`strMailText = strMailText & "<td><font size=""2"" face=""Arial"">This is a         test</font></td>"` 
```

应该写成：

```
strMailText = strMailText & "<td><font size=""2"" face=""Arial"">This is a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test</font></td>" 
```

**编辑：**

**或另一种方法**

使用`<span>`标签而不是空格，并像这样给它填充或边距

```
<span style='padding-left: 15px;'></span> 
```

所以它应该看起来像：

```
strMailText = strMailText & "<td><font size=""2"" face=""Arial"">This is<span style='padding-left: 15px;'></span>test</font></td>" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:47:32.150

大多数 html 渲染引擎会折叠多个连续的空格。尝试写作而不是空格，不间断空格：`&nbsp;`或`&#160;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-06T23:08:07.570

**我们使用 Litmus 测试这些方法的发现**

虽然`&nbsp;`许多电子邮件客户端都支持，但某些情况下，如 Gmail（网络）和 iPhone Mail 会在某些情况下`<a href="">`在附近出现小锚文本下划线空格。

可悲的是，尝试该`<span style="padding-left: 15px;"></span>`方法时，某些电子邮件客户端（例如 Outlook 2010、Outlook 2013 和 Outlook 2019）根本没有显示任何空间。

`img src="pixels.gif" width="15" height="2" style="border: none; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;">`但是，Litmus 中的每个电子邮件客户端都支持用类似（一个简单的空白 gif 来强制空格）替换这些内容。（请注意，我们不使用 1px x 1px 大小的 gif，因为我们听说这可能会导致电子邮件被标记为垃圾邮件。或者，我们使用 2x2 gif。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:43:49.827

HTML 去除了多个空格并用一个空格替换它。为了解决您的问题，请使用`&nbsp;`而不是空间。

`strMailText = strMailText & "<td><font size=""2"" face=""Arial"">This is a &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; test</font></td>"`

# node.js - 如何在 Heroku 上使用 Node.js 通信 Web 和 Worker dynos？

> ID：11429774
> 
> 赞同：37
> 
> 时间：2012-07-11T09:39:10.460
> 
> 标签：node.js, heroku, redis, rabbitmq, kue

**Web Dynos**可以处理 HTTP 请求

而当**Web Dynos**处理它们时， **Worker Dynos**可以从中处理工作。

但我不知道如何让**Web Dynos**和**Worker Dynos**相互通信。

例如，我想接收**Web Dynos的 HTTP 请求**

, 发送给**Worker Dynos**

，处理作业并将结果发送回**Web Dynos**

，在 Web 上显示结果。

这在 Node.js 中可行吗？（使用 RabbitMQ 或 Kue 等）？

[我在Heroku 文档](https://devcenter.heroku.com/articles/background-jobs-queueing)中找不到示例

**还是我应该在Web Dynos**中实现所有代码并仅扩展**Web Dynos**？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-11T17:43:50.750

[正如有关后台作业和排队](https://devcenter.heroku.com/articles/background-jobs-queueing)的高级文章所建议的那样，您的网络测功机将需要通过中间机制（通常是队列）与您的工作人员测功机进行通信。

为了完成听起来你希望做的事情，请遵循以下一般方法：

*   Web dyno 接收到 Web 请求
*   Web dyno 将作业添加到队列中
*   工人测功机从队列中接收作业
*   Worker dyno 执行作业，将增量进度写入共享组件
*   浏览器端轮询请求来自 web dyno 的作业状态
    *   Web dyno 查询共享组件以获取后台作业的进度并将状态发送回浏览器
*   Worker dyno 完成作业的执行并在共享组件中将其标记为完成
*   浏览器端轮询请求来自 web dyno 的作业状态
    *   Web dyno 查询共享组件以获取后台作业的进度并将完成状态发送回浏览器

就实际实现而言，我不太熟悉 Node.js 中最好的库，但是将这个过程粘合在一起的组件可以在 Heroku 上作为[add-ons](https://addons.heroku.com/)获得。

队列：AMQP 是一个得到很好支持的队列协议，[CloudAMQP](https://addons.heroku.com/cloudamqp)插件可以作为你的 web 和 worker dynos 之间的消息队列。

共享状态：您可以使用[Postgres](https://addons.heroku.com/heroku-postgresql)插件之一来共享正在处理的作业的状态或性能更高的东西，例如[Memcache](https://addons.heroku.com/memcachier)或[Redis](https://addons.heroku.com/redistogo)。

因此，总而言之，您必须使用中间附加组件在 Heroku 上的 dyno 之间进行通信。虽然这种方法涉及更多的工程设计，但其结果是一个适当解耦和可扩展的架构。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-11T10:33:02.677

据我所知，Heroku 没有为您提供交流方式，因此您必须自己构建。为了使用 Node 与另一个进程通信，您可能必须手动处理进程的 stdin/out/err，如下所示：

```
var attachToProcess = function(pid) {
    return {
        stdin: fs.createWriteStream('/proc/' + pid + '/fd/0'),
        stdout: fs.createReadStream('/proc/' + pid + '/fd/1'),
        stderr: fs.createReadStream('/proc/' + pid + '/fd/2')
    };
};

var pid = fs.readFile('/path/to/worker.pid', 'utf8', function(err, pid) {
    if (err) {throw err;}
    var worker = attachToProcess(Number(pid));
    worker.stdin.write(...);
}); 
```

然后，在您的工作进程中，您必须将 pid 存储在该 pid 文件中：

```
fs.writeFile('/path/to/worker.pid', process.pid, function(err) {
    if (err) {throw err;}
}); 
```

我实际上还没有测试过这些，所以它可能需要一些工作和构建，但我认为基本的想法很清楚。

### 编辑

我*刚刚*注意到您也用“redis”标记了它，并且认为我应该补充一点，您还可以使用 redis pub/sub 在您的各种进程之间进行通信，如[node_redis 自述文件](https://github.com/mranney/node_redis#publish--subscribe)中所述。

# ios - 如何设置 UITableViewCell 的文本样式？

> ID：11429777
> 
> 赞同：0
> 
> 时间：2012-07-11T09:39:20.697
> 
> 标签：ios, uitableview, three20, ttstyledtextlabel

如何使用 Three20 TTStyledTextLabel 设置 UITableViewCell 的文本样式？我试过 ：

```
TTStyledTextLabel* label = [[[TTStyledTextLabel alloc] initWithFrame:CGRectMake(0, 0, 300, 60)] autorelease];

NSInteger i = ...;
NSString *s =  [NSString stringWithFormat:@"%@ <font color='red'>(%d)</font>", [dic objectForKey:@"name"], i];

label.text = [TTStyledText textFromXHTML:s lineBreaks:NO URLs:NO];

[cell.textLabel addSubview:label]; 
```

但单元格只是保持空白。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:56:58.123

您需要为该标签指定一个框架。否则它是 CGRectZero。

希望这可以帮助。

干杯!

# java - 从 Matlab 到网络

> ID：11429781
> 
> 赞同：2
> 
> 时间：2012-07-11T09:39:32.410
> 
> 标签：java, apache, matlab, web, matlab-deployment

我在 Matlab 中有一些非常复杂的 GUI 的大项目。我想把它放在我的 apache 服务器上。这个想法是：人们应该无需下载任何东西就可以访问它（我的意思是Java小程序或网络应用程序）。我已经设法使用 deploytool 创建了一个 .jar 文件，但我不确定它是否正确。我已经阅读了 mathworks 教程，但在示例中：http: [//www.mathworks.com/help/toolbox/javabuilder/ug/bsqrikz-26.html](http://www.mathworks.com/help/toolbox/javabuilder/ug/bsqrikz-26.html)他们使用了一些我不知道的 JavaCode他们从哪里得到的。最后，我创建了一个 .war 文件，但 apache 仅将其视为存档，而不是应用程序，因此很明显我做错了什么。

那么，有人可以告诉我必须一步一步地从我的 Matlab 代码创建一个 Web 应用程序吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:53:08.400

MathWorks 有许多网络研讨会展示了如何进行。这是我能找到的最新的：

> [使用 MATLAB 部署应用程序](http://www.mathworks.com/videos/application-deployment-with-matlab-81715.html)

作为参考，有一个[页面](http://web.archive.org/web/20111219140917/http://www.mathworks.com/support/tech-notes/1600/1608.html)列出了[在 Web 上部署 MATLAB 的](https://www.mathworks.com/help/pdf_doc/compiler/example_guide.pdf)所有选项。

# c - 如何在不使用循环的情况下在 C 中初始化 N 维数组

> ID：11429786
> 
> 赞同：1
> 
> 时间：2012-07-11T09:39:53.460
> 
> 标签：c, arrays, matrix, initialization

我想初始化一个 3 x 3 矩阵，前两行为 0，最后一行为 1。我已经声明了一个二维数组`int matrix[3][3]`

我想在不使用循环的情况下对其进行初始化，如下所示

> 0 0 0
> 0 0 0
> 1 1 1

我也想要 N 维数组的解决方案

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T09:41:37.573

```
int matrix[3][3] = {
    { 0, 0, 0 },
    { 0, 0, 0 },
    { 1, 1, 1 }
}; 
```

或者，更紧凑：

```
int matrix[3][3] = {
    [2] = { 1, 1, 1 }
}; 
```

`N`只要`N`是固定的，解决方案就会泛化。如果`N`很大，您可以使用 mouviciel 对[这个问题](https://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c)的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:47:18.793

```
matrix[0][2] = matrix[0][1] = matrix[0][0] =
matrix[1][2] = matrix[1][1] = matrix[1][0] = 0;
matrix[2][2] = matrix[2][1] = matrix[2][0] = 1; 
```

或者

```
#include <string.h>
...
memset(matrix, 0, sizeof(matrix));
matrix[2][2] = matrix[2][1] = matrix[2][0] = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:21:14.043

在你的情况下，你可以做

```
int a[3][3] = {{}, {}, {1,1,1}}; 
```

请注意，空花括号将自动填充 0。

现在，如果你愿意

```
0 0 0
0 0 0
1 0 0 
```

你可以这样做：

```
int a[3][3] = {{}, {}, {1,}}; 
```

详情请看[如何将数组的所有成员初始化为相同的值？](https://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c)（这是一维数组，但它会帮助你理解上面写的内容。）

此外，[http://c-faq.com/~scs/cclass/notes/sx4aa.html](http://c-faq.com/~scs/cclass/notes/sx4aa.html)是一个很好的数组初始化资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:32:09.340

对于常量整数表达式`N`（例如宏或`enum`常量），您必须“展开”初始化程序。当扩展为十进制常量时，有一些宏技巧可以做到这一点`N`，但它们有点复杂。[P99](http://p99.gforge.inria.fr/p99-html/group__basic__list__operations.html)提供了这样的宏，你可以用它编写

```
#define N 23

int matrix[N][N] = {
    [N-1] = P99_DUPL(N, 1),
}; 
```

这使您可以`N`在需要时轻松更改，而无需修改代码中的任何其他内容以进行更新。

# android - 谷歌语音识别源码

> ID：11429792
> 
> 赞同：4
> 
> 时间：2012-07-11T09:40:01.590
> 
> 标签：android, voice-recognition, android-4.2-jelly-bean

正如谷歌所说，新的安卓“果冻豆”将包含能够离线工作的语音识别引擎。随着新的android源代码已经打开，我试图查看并找到语音识别引擎的源代码，但没有成功。

所以我的问题是：语音识别引擎源代码是 android 4.1.1 源代码的一部分吗？或者它像单独的应用程序？

在此先感谢并为我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T03:08:24.067

它实际上是设置中的可下载包。没有应用程序等，只是一个简单的引擎，如果没有互联网，操作系统就会依赖它。

所以不，它不是源代码的一部分，也不是一个单独的应用程序。希望我对它的理解很清楚并且对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:43:48.217

在 Android 4.1 源代码中，您可以在 srec_jni 文件夹（C++ 代码）中看到语音引擎源代码，但存在一些问题，头文件不在应有的位置

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-29T00:43:00.500

语音识别软件肯定在 Jellybean 操作系统内部，因为应用程序可以识别语音命令，例如“呼叫”，它还可以识别联系人中的姓名，因此源代码必须在操作系统内部。PS：尝试关闭您的 wifi 和移动数据以及语音命令“通话”，它会起作用。

# android - 如何为 listpreference 添加新值并保存？

> ID：11429796
> 
> 赞同：0
> 
> 时间：2012-07-11T09:40:27.143
> 
> 标签：android, listpreference

我有一个从资源 xml 创建的列表首选项。我添加了创建对话框的首选项，用户可以在其中向 listPreference 添加值。

使用这些方法我增加了新的价值：

```
 entries = getEntries();
  entryValues = getEntryValues(); 
```

当用户向 listpreference 添加值时，它会显示。但是当preferenceScreen 正在重新创建新值时消失了。

我怎样才能保存这些新值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:43:56.360

问题是，当您重新打开 时`PreferenceScreen`，它会从 XML 加载`ListPreference`' 值。`setEntries()`您可以使用 的和`setEntryVaues()`方法更改此行为`ListPreference`。当然，您需要以某种方式存储用户输入的所有值及其索引。您可以使用数据库或`SharedPreferences`用于它。希望这可以帮助。

**编辑**

将 a 的值保存`ListPreference`到`SharedPreferences`：

```
preferences.edit().putString(listPreference.getKey(), listPreference.getValue()); 
```

# spring - Spring Security 不会“记住”跨子域的登录

> ID：11429797
> 
> 赞同：2
> 
> 时间：2012-07-11T09:40:43.610
> 
> 标签：spring, security, cookies, login, subdomain

设置：我们有一个使用 Spring Security 的 webapp。移动部分有一个不同的子域（egmexample.com）。

我们得到了以下情况：

*   用户登录 example.com。
*   用户被重定向到 m.example.com 并且不再登录，但应该登录。

如果所有 cookie 都被删除，则相反。

我们假设 spring 使用不同的 cookie 来登录子域。鉴于此：有没有办法告诉 spring 在所有子域中使用相同的 cookie？

提前致谢并致以最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T12:33:46.663

只需在 web.xml 中设置此配置：

```
 <session-config>
       <cookie-config>
           <domain>example.com</domain>
       </cookie-config> 
   </session-config> 
```

应用程序服务器负责创建会话 cookie (JSESSIONID)，但不负责 Spring Security。

# xml - 可选元素类型 DTD

> ID：11429800
> 
> 赞同：2
> 
> 时间：2012-07-11T09:40:49.210
> 
> 标签：xml, dtd, xml-validation, dtd-parsing

我有一个这样的 XML 文档：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE school SYSTEM ""> 
<school> 
    <data> 
        <id>
            <uid>1</uid> 
        </id>
        <information>
            <name>Michael</name>
            <surename>Julius</surename>
        </information>
        <note> 
            <test>hans</test>

        </note> 
    </data> 
</school> 
```

和一个 DTD 文件

```
<!ELEMENT school (data)> 
<!ELEMENT data (id,information,note)> 
<!ELEMENT id (uid)> 
<!ELEMENT uid (#PCDATA)>
<!ELEMENT information (name,surename?)> 
<!ELEMENT name (#PCDATA)> 
<!ELEMENT surename (#PCDATA)> 
<!ELEMENT note (#PCDATA)>  <--- unknown element type 
```

我想`<note>`用可选的元素类型定义元素，比如

```
<note> 
  <test2>test2</test2>
</note> 
```

或者

```
<note>
  <unknown name></unknown name>
</note> 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:49:12.517

您可以`ANY`在元素声明中使用`note`. 这将允许任何元素成为 的子`note`元素，但也必须定义该元素（具有元素声明）。你不能有一个未定义的元素。

示例`note`声明：

```
<!ELEMENT note ANY> 
```

**示例实例**（DTD 可以是外部的，但我使用了内部子集，因为它更容易测试）：

```
<!DOCTYPE school [
<!ELEMENT school (data)> 
<!ELEMENT data (id,information,note)> 
<!ELEMENT id (uid)> 
<!ELEMENT uid (#PCDATA)>
<!ELEMENT information (name,surename?)> 
<!ELEMENT name (#PCDATA)> 
<!ELEMENT surename (#PCDATA)> 
<!ELEMENT note ANY>
<!ELEMENT test2 (#PCDATA)><!--The element "test2" still has to be declared.-->
]> 
<school> 
    <data> 
        <id>
            <uid>1</uid> 
        </id>
        <information>
            <name>Michael</name>
            <surename>Julius</surename>
        </information>
        <note> 
            <test2>hans</test2>         
        </note> 
    </data> 
</school> 
```

# mongodb - 为什么在mongoddb的文档中存储键名

> ID：11429804
> 
> 赞同：17
> 
> 时间：2012-07-11T09:40:58.717
> 
> 标签：mongodb

我很好奇 Kyle Banker 的 MongoDB In Action 中的这句话：

> 考虑您选择的键名的长度很重要，因为键名存储在文档本身中。这与 RDBMS 形成对比，在 RDBMS 中，列名始终与它们所引用的行分开。因此，在使用 BSON 时，如果您可以使用 dob 代替 date_of_birth 作为键名，则每个文档将节省 10 个字节。这听起来可能不多，但是一旦您拥有 10 亿个这样的文档，只需使用较短的键名，您就可以节省近 10 GB 的存储空间。这并不意味着您应该花费不合理的长度来确保小的键名；理智点。但是，如果您期望有大量数据，那么节省键名将节省空间。

我对在数据库服务器端没有优化的原因很感兴趣。包含集合中所有键名的内存查找表是否会带来太多的性能损失，不值得潜在的空间节省？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T10:19:29.253

您所指的通常称为“密钥压缩”*。没有实施的原因有几个：

1.  如果你想完成它，你现在可以很容易地在 Application/ORM/ODM 级别上完成它。
2.  在所有情况下，这不一定是性能**优势——想想具有很多键名的集合，和/或在文档之间有很大差异的键名。
3.  在您拥有数百万个文档之前，它可能根本无法提供可衡量的性能**优势。
4.  如果服务器这样做，则仍然必须通过网络传输完整的密钥名称。
5.  如果通过网络传输压缩的密钥名称，那么使用 javascript 控制台的可读性*确实会受到影响。*
6.  压缩整个 JSON 文档~~可能会提供~~更好的性能优势。

像所有功能一样，实现它有一个成本效益分析，并且（至少到目前为止）其他功能提供了更多的“物有所值”。

完整的文档压缩正在~~[正在考虑][1] 用于未来的 MongoDB 版本。~~从 3.0 版开始可用（见下文）

* 用于键名的内存查找表基本上是 LZW 样式压缩的一种特殊情况——这或多或少是大多数压缩算法所做的。

** 压缩提供空间优势和性能优势。更小的文档意味着每个 IO 可以读取更多的文档，这意味着在一个固定 IO 的系统中，每秒可以读取更多的文档。

## 更新

MongoDB 3.0 及更高版本现在具有使用[WiredTiger](http://docs.mongodb.org/manual/core/storage/#wiredtiger-storage-engine)存储引擎的完整文档压缩功能。

有两种压缩算法可用：[snappy](https://code.google.com/p/snappy/)和[zlib](http://www.zlib.net/)。目的是让 snappy 成为全面性能的最佳选择，而 zlib 成为最大存储容量的最佳选择。

在我的个人（非科学，但与商业项目相关）实验中，快速压缩（我们没有评估 zlib）显着提高了存储密度，而没有明显的净性能成本。事实上，在某些情况下，性能稍好一些，大致符合我之前的评论/预测。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T10:36:16.710

我相信将键名与文档一起存储的最初原因之一是允许更容易扩展[的无模式](http://blog.mongodb.org/post/119945109/why-schemaless)数据库。每个文档在更大程度上是自包含的，因为如果您将文档移动到另一台服务器（例如，通过复制或分片），您可以索引文档的内容，而无需引用单独或集中的元数据，例如映射键名称到更紧凑的键 ID。

由于 MongoDB 集合没有强制架构，因此同一集合中的每个文档的字段名称可能不同。在分[片](http://www.mongodb.org/display/DOCS/Sharding)环境中，对每个分片的插入（有意）是独立的，因此在文档级别，原始数据最终可能会有所不同，除非每个分片的键映射能够保持一致。

根据您的用例，键名可能会也可能不会占用相对于随附数据的大量空间。您始终可以通过将 YourFriendlyKeyNames 映射到较短的 DB 密钥等效项来解决应用程序/ODM 实现中的存储问题。

有一个开放的 MongoDB Jira 问题和一些进一步的讨论让[服务器标记字段名称](https://jira.mongodb.org/browse/SERVER-863)，您可以投票以帮助优先考虑在未来版本中包含此功能。

MongoDB 当前的设计目标包括动态模式的性能、复制和高可用性、自动分片和就地更新……一个潜在的权衡是一些额外的磁盘使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:50:32.917

必须为每个查询在数据库中查找它将是一个严重的惩罚。
大多数驱动程序允许您指定 ElementName，以便`MyLongButReadablePropertyName`在您的域模型中成为`mlbrpn`mongodb。

因此，当您在应用程序中查询时，应用程序会转换查询：

```
db.myCollection.find({"MyLongButReadablePropertyName" : "some value"}) 
```

进入

```
db.myCollection.find({"mlbrpn" : "some value"}) 
```

高效的驱动程序，如 C# 驱动程序缓存此映射，因此无需为每个查询查找此映射。

回到你的问题的标题：

> 为什么在mongoddb的文档中存储键名

这是唯一可以搜索文档的方法吗？
如果没有存储键名，就没有可搜索的键。

希望这可以帮助

# spring - Spring REST 消耗导致 HTTP 状态 406 - 不可接受

> ID：11429808
> 
> 赞同：7
> 
> 时间：2012-07-11T09:41:08.640
> 
> 标签：spring, rest, http-status-code-406

当我尝试使用 REST API 时出现此错误：

```
Exception in thread "main" org.springframework.web.client.HttpClientErrorException: 406 Not Acceptable 
```

这是执行的客户端代码：

```
public static void main(String[] args) {
   Car c = getCarById(4);
   System.out.println(c);
}

public static  @ResponseBody Car getCarById(int id){
    return new RestTemplate().getForObject("http://localhost:8080/rest/cars/{id}", Car.class, id);
} 
```

这是映射请求的控制器的代码：

```
@RequestMapping(value="/cars/{id}", method=RequestMethod.GET, headers = {"Accept=text/html,application/xhtml+xml,application/xml"}, produces="application/xml")
public @ResponseBody Car getCarById(@PathVariable("id") int id){
    return carService.getCarById(id);
} 
```

尽管映射器应该负责映射到正确的类型，但为什么会发生此错误（406-Not Acceptable）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T09:42:42.983

You're sending an `Accept=` header instead of an `Accept:` header.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T15:33:05.753

当我的请求中有错误的 Accept: 标头时，我得到了这个答案。我试图请求图像/jpeg，但我的请求包含“接受：应用程序/json”。

解决方案是使用正确的实体类来查询（我查询 Object 只是为了看看会发生什么），在我的例子中是 Resource.class。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T13:06:35.587

将此添加到 spring mvc 调度程序：

```
<mvc:annotation-driven>
<mvc:message-converters>
<bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
</mvc:message-converters>
</mvc:annotation-driven>

<!-- JSON format support for Exception -->
<bean id="methodHandlerExceptionResolver"
      class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver">
    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
        </list>
    </property>
</bean> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-23T13:53:59.937

此外，您可以修复添加“接受”、“ */* ”

```
val headers = HttpHeaders()
headers.add("Accept", "*/*")
val httpEntity = HttpEntity("parameters", headers)
restTemplate.exchange(....)
restTemplate.exchange("http://localhost:" + serverPort + "/product/1",
            HttpMethod.GET,
            httpEntity,
            String.javaClass) 
```

对不起，这是科特林

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-27T22:07:09.113

就我而言，我不是在服务器端而是在客户端解决了这个问题。我正在使用 Postman 并收到 406 错误。但是使用浏览器可以很好地处理请求。于是我查看了浏览器中的请求标头，并在 Postman 中添加了 Accept 标头，如下所示：`Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-05-16T07:30:22.877

我遇到了同样的问题，最后是图书馆问题。如果您不使用 maven，则必须确保已包含 json 核心库及其所有依赖项。如果您的方法以 json 格式加载了输入参数，而您没有此库，则会出现 415 错误。我认为这两个错误具有相同的起源：不完整的库。

# java - 通过使用 Java 的证书通过 https 使用 RESTful 服务

> ID：11429810
> 
> 赞同：14
> 
> 时间：2012-07-11T09:41:11.113
> 
> 标签：java, rest, ssl, https, certificate

我是 REST 服务的新用户。我需要使用 Jersey 生成的 RESTful API 服务。问题出现是因为该服务托管在远程主机上，并且需要使用证书进行 https 访问。

我从该组织获得了证书，并且可以使用我的任何浏览器（带有证书集）访问该 REST API 服务。

我在这里阅读了很多帖子，并遵循了关于这个主题的答案： [在 Java 中使用 HTTPS 和 REST](https://stackoverflow.com/questions/1757295/using-https-with-rest-in-java)

现在我在我的 Java Keystore 上设置了我的证书。但我不知道如何在我的 Java 程序上使用它，所以它完全使用我需要进行 https 连接的证书。

这是我用于本地测试的简单连接代码。

```
package rest.test.first;
import java.net.URI;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriBuilder;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.api.client.config.ClientConfig;
import com.sun.jersey.api.client.config.DefaultClientConfig;

public class TestClient{
public static void main(String[]args){
    ClientConfig config= new DefaultClientConfig();
    Client client=Client.create(config);
    WebResource service=client.resource(getBaseURI());
    //Fluentinterfaces
    System.out.println(service.path("rest").path("hello").accept(MediaType.TEXT_PLAIN).get(ClientResponse.class).toString());
    //Getplaintext
    System.out.println(service.path("rest").path("hello").accept(MediaType.TEXT_PLAIN).get(String.class));
    //GetXML
    System.out.println(service.path("rest").path("hello").accept(MediaType.TEXT_XML).get(String.class));
    //TheHTML
    System.out.println(service.path("rest").path("hello").accept(MediaType.TEXT_HTML).get(String.class));
}

private static URI getBaseURI(){
    return UriBuilder.fromUri("http://localhost:8080/rest.test").build();
}
} 
```

我已经阅读了有关使用系统集属性使用以下代码指定密钥库路径的信息：

```
System.setProperty("javax.net.ssl.keyStore", "/path/to/keystore.jks");
System.setProperty("javax.net.ssl.keyStorePassword", "password"); 
```

我仍然在连接到远程服务器时收到 401 错误。

但后来我不知道如何使用我在密钥库上的证书建立 SSL 连接。我也一直在阅读有关为此目的使用 sslSocketFactory 的信息，但我无法按照这篇文章中的说明使其工作：[如何在特定连接上使用不同的证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)

我已经设法使用此代码从密钥库中检索我的证书。现在我只需要知道如何在连接中使用它：

```
package rest.test.first;

    import java.io.FileInputStream;
    import java.security.KeyStore;
    import java.security.cert.Certificate;

    public class keystore {

      public static void main(String[] args) throws Exception {
        String keystoreFilename = "/usr/lib/jvm/jdk1.6.0_32/jre/lib/security/cacerts";

        char[] password = "changeit".toCharArray();
        String alias = "remote_https_server";

        FileInputStream fIn = new FileInputStream(keystoreFilename);
        KeyStore keystore = KeyStore.getInstance("JKS");

        keystore.load(fIn, password);

        Certificate cert = keystore.getCertificate(alias);

        System.out.println(cert);
      }
    } 
```

好的，这是我写的最后一个脚本。我可以连接到 https 站点，但我仍然无法连接到需要发送我的证书进行身份验证的 https 站点。

```
package rest.test.first;

import java.io.*;
import java.net.*;
import java.security.*;

import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;

public class urlConnection{
  public static void main(String args[]) throws Exception {

     System.setProperty("javax.net.ssl.trustStore", "/usr/lib/jvm/jdk1.6.0_32/jre/lib/security/cacerts"); 
  System.setProperty("javax.net.ssl.trustStorePassword", "changeit");
  Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());

      //TrustStore..
      char[] passphrase = "changeit".toCharArray(); //password
      KeyStore keystore = KeyStore.getInstance("JKS");
      //KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
      keystore.load(new FileInputStream("/usr/lib/jvm/jdk1.6.0_32/jre/lib/security/cacerts"), passphrase); //path

      //TrustManagerFactory tmf = TrustManagerFactory.getInstance("SunX509"); //instance
      TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
      tmf.init(keystore);

      SSLContext context = SSLContext.getInstance("TLS");
      TrustManager[] trustManagers = tmf.getTrustManagers();
      context.init(null, trustManagers, null);
      SSLSocketFactory sf = context.getSocketFactory();
      URL url = new URL("https://www.google.es");

      HttpsURLConnection httpsCon = (HttpsURLConnection) url.openConnection();
      httpsCon.setSSLSocketFactory(sf);
      httpsCon.setRequestMethod("GET");

      /*InputStream inStrm = httpsCon.getInputStream();
      System.out.println("\nContent at " + url);
      int ch;
        while (((ch = inStrm.read()) != -1)){
          System.out.print((char) ch);
        inStrm.close();
      }*/

      System.out.println("Response Message is " + httpsCon.getResponseMessage());

 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-29T13:16:31.700

假设您正在服务器上部署此代码并且您已正确完成其他所有操作（例如正确生成密钥库核心并将其放置在您的服务器可以访问的位置，使用与您的代码相同的 java 版本来生成密钥库）那么我认为您需要做的是添加以下内容

```
<Connector SSLEnabled="true" clientAuth="false" keystoreFile="pathToKeystore" keystorePass="password" maxThreads="150" port="443" protocol="HTTP/1.1" scheme="https" secure="true" sslProtocol="TLS"/> 
```

在您运行客户端的服务器实例的 server.xml 中，并且

```
<Connector connectionTimeout="20000" port="80" protocol="HTTP/1.1" redirectPort="8443"/> 
```

IMP：如果您在此代码旁边使用 Skype，请务必（取消选中）更改默认值，因为它还使用相同的端口（80 和 443）进行其他连接

# mysql - mysql查询与group by和order

> ID：11429819
> 
> 赞同：1
> 
> 时间：2012-07-11T09:41:53.753
> 
> 标签：mysql

表结构：

```
country
season
points 
```

当前查询：

```
SELECT SUM(points) AS total, country 
FROM table 
WHERE season >= X 
GROUP BY country 
ORDER BY total desc 
```

这给了我一个很好的列表，按给定国家收集的总积分排序。但是，如果一个国家与另一个国家并列，我想在给定的最新赛季按他们的积分排序，这可能在同一个查询中吗？如果是这样，怎么办？（记住它现在的分组）

行示例丹麦（国家）、1（季节）、10（点）丹麦（国家）、2（季节）、5（点）瑞典（国家）、1（季节）、5（点）瑞典（国家）、 2（赛季），10（积分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:50:12.803

```
SELECT grp.total, grp.country
FROM
        ( SELECT SUM(points) AS total, country, MAX(season) AS max_season 
          FROM table 
          WHERE season >= X 
          GROUP BY country 
        ) AS grp
    LEFT JOIN
        table AS t
            ON  t.country = grp.country
            AND t.season = LATEST_SEASON
ORDER BY 
    grp.total DESC
  , t.points DESC ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:50:32.100

也许这会做你的伎俩：

```
SELECT SUM(points) AS total, country 
FROM table 
WHERE season >= X 
GROUP BY country 
ORDER BY total DESC, (SELECT t2.points FROM table t2 WHERE table.country=t2.country ORDER BY t2.season LIMIT 1) DESC 
```

# php - Mysql query for displaying data

> ID：11429822
> 
> 赞同：0
> 
> 时间：2012-07-11T09:42:07.550
> 
> 标签：php, jquery, mysql, database

I have a database like this:

```
id        User_id    Question_id     Answer
1           john      Question_1        b
2           john      Question_2        a
3           john      Question_3        d
4           harry     Question_1        a
5           harry     Question_2        a  
6           harry     Question_3        c 
7           colleen   Question_1        c
8           colleen   Question_2        a
9           colleen   Question_3        b 
```

I want to display the content of the above data in the following format-

```
id     User_id      Question_1      Question_2        Question_3       
1       john             b               a                 d
2       harry            a               a                 c
4       colleen          c               a                 b 
```

How can I achieve this using sql? I am using mysql and php.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:57:47.767

您正在寻找 PIVOT 表：

[http://en.wikibooks.org/wiki/MySQL/Pivot_table](http://en.wikibooks.org/wiki/MySQL/Pivot_table)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:11:00.570

```
SELECT
  id,
  User_id,
  MAX(IF(querstion_id = 'Question_1', answer, NULL)) AS Question_1,
  MAX(IF(querstion_id = 'Question_2', answer, NULL)) AS Question_2,
  MAX(IF(querstion_id = 'Question_3', answer, NULL)) AS Question_3
FROM answers
GROUP BY User_id 
```

**EDIT 1**
添加了一个 php 版本，见评论

```
$table = array();
$query = "SELECT * FROM answers ORDER BY User_id, Question_id";

... fetch data depending on what interface you use ...

foreach/while(....)
{
   if(!isset($table[$result['User_id']]))
   {
       $table[$result['User_id']] = array();
       $table[$result['User_id']]['id'] = $result['id'];
       $table[$result['User_id']]['User_id'] = $result['User_id'];
   }

   $table[$result['User_id']][$result['Question_id']] = $result['Answer'];
} 
```

**编辑2**如何显示它：

然后像使用普通查询一样显示它，这就是我通常将 php 数组转换为 html 的方式：

```
echo '<table><thead>';
echo '<tr><th>' . implode('</th><th>', array_keys(current($table))) . '</th></tr>';
echo '</thead><tbody>';
foreach($table as $row)
{
    echo '<tr><td>' . implode('</td><td>', $row) . '</td></tr>';
}
echo '</tbody></table>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:03:15.990

尝试这个...

```
SELECT tbl.user_id,
       (SELECT answer
          FROM your_table
         WHERE user_id = tbl.user_id AND question_id = 'Question_1') q1,
       (SELECT answer
          FROM your_table
         WHERE user_id = tbl.user_id AND question_id = 'Question_2') q2,
       (SELECT answer
          FROM your_table
         WHERE user_id = tbl.user_id AND question_id = 'Question_3') q3
  FROM (SELECT DISTINCT user_id
                   FROM your_table) tbl 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:06:33.507

如果您确定只有 3 个字段，则可以使用类似的内容。请记住，此查询非常繁重，因此您最好在 PHP 中处理它。

```
select a.user_id, 
a.question_id as Question_1, 
b.question_id as Question_2, 
c.question_id as Question_3 

from TABLE_NAME a, 
TABLE_NAME b, 
TABLE_NAME c  

where a.question_id="Question_1" and a.user in(select user_id from TABLE_NAME) 
and b.question_id="Question_2" and b.user_id =a.user_id 
and c.question_id="Question_3" and c.user_id =a.user_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:11:08.667

```
 select id,User_id,
    sum(Answer*(1-abs(sign(Question_id-1)))) as Question_1,
    sum(Answer*(1-abs(sign(Question_id-2)))) as Question_2,
    sum(Answer*(1-abs(sign(Question_id-3)))) as Question_3,
    sum(Answer*(1-abs(sign(Question_id-4)))) as Question_4
    from results group by User_id 
```

# asp.net - Pass in Active Directory user name (DOMAIN\etc) in asp.net MVC URL

> ID：11429824
> 
> 赞同：0
> 
> 时间：2012-07-11T09:42:12.543
> 
> 标签：asp.net, asp.net-mvc, active-directory, url-encoding

I'm trying to pass an active directory user name in to a asp.net MVC application, but can't figure out what's the best way to deal with the backslash in the user name.

For example, say my user name is "EUROPE\george.collins" and I want my record for 2012:

`http://application/2012/EUROPE\George.Collins`

If I URL-encode the backslash as %5C the server is returning a "400 Bad Request".

Should I just separate the DOMAIN and User Name parts, e.g. 2012/EUROPE/George.Collins?

In that case, what would be the easiest way to re-combine them into a username string?

G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:35:55.243

I think I've found my answer here: [How to URL encode parameters in ASP .NET MVC](https://stackoverflow.com/questions/5901049/how-to-url-encode-parameters-in-asp-net-mvc)

It looks like I have to leave the user id parameter out of the route pattern, so that it will be appended as a querystring ?userid=... where the URL encoding is valid.

# mysql - 如何将 csv 文件导入 MySQL 工作台？

> ID：11429827
> 
> 赞同：94
> 
> 时间：2012-07-11T09:42:31.197
> 
> 标签：mysql, csv, import

我有一个 CSV 文件。它包含 140 万行数据，因此我无法在 Excel 中打开该 csv 文件，因为它的限制约为 100 万行。

因此，我想在 MySQL 工作台中导入这个文件。此 csv 文件包含如下列

```
"Service Area Code","Phone Numbers","Preferences","Opstype","Phone Type" 
```

我正在尝试在 MySQL 工作台中创建一个名为“dummy”的表，其中包含如下列

```
ServiceAreaCodes,PhoneNumbers,Preferences,Opstyp,PhoneTyp. 
```

CSV 文件名为`model.csv`. 我在工作台中的代码是这样的：

```
LOAD DATA LOCAL INFILE 'model.csv' INTO TABLE test.dummy FIELDS TERMINATED BY ',' lines terminated by '\n'; 
```

但我收到一个错误`model.CSV file not found`

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-07-11T09:52:05.877

我猜你错过了 ENCLOSED BY 子句

```
LOAD DATA LOCAL INFILE '/path/to/your/csv/file/model.csv'
INTO TABLE test.dummy FIELDS TERMINATED BY ','
ENCLOSED BY '"' LINES TERMINATED BY '\n'; 
```

并指定csv文件完整路径

[加载数据文件 - MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-02-13T06:18:08.510

如果您有较小的数据集，通过 GUI 实现它的一种方法是：

1.  打开查询窗口
2.  选择 * 从 [table_name]
3.  从菜单栏中选择导入
4.  按结果网格右下方的应用

![在此处输入图像描述](../Images/17a3eab6c77a4f60c8287ed32185d64b.png)

参考： [http ://www.youtube.com/watch?v=tnhJa_zYNVY](http://www.youtube.com/watch?v=tnhJa_zYNVY)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-03-12T04:21:55.747

在 SCHEMAS 下的导航器中，右键单击您的模式/数据库并选择“表数据导入向导”

也适用于mac。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-12T10:49:48.673

您可以使用 MySQL[表数据导入向导](https://dev.mysql.com/doc/workbench/en/wb-admin-export-import-table.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-08T13:01:45.127

目前，无法在所有平台上导入 CSV（使用 MySQL Workbench），如果所述文件与 MySQL 服务器主机不在同一主机中，也不建议这样做。

但是，您可以使用[mysqlimport](http://dev.mysql.com/doc/refman/5.6/en/mysqlimport.html)。

例子：

```
mysqlimport --local --compress --user=username --password --host=hostname \
--fields-terminated-by=',' Acme sales.part_* 
```

在此示例`mysqlimport`中，指示加载所有名为“sales”的文件，其扩展名以“part_”开头。这是加载“拆分”示例中创建的所有文件的便捷方式。使用 --compress 选项来最小化网络流量。--fields-terminated-by=',' 选项用于 CSV 文件，而 --local 选项指定传入数据位于客户端上。如果没有 --local 选项，MySQL 将在数据库主机上查找数据，因此始终指定 --local 选项。

[AWS RDS 文档](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.AnySource.html)中提供了有关该主题的有用信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-15T00:46:50.720

如果服务器驻留在远程机器上，请确保文件在远程机器上，而不是在本地机器上。

如果文件在 mysql 服务器所在的同一台机器上，请确保 mysql 用户具有读取/写入文件的权限，或者将文件复制到 mysql 模式目录中：

在我的情况下，在 ubuntu 中是：/var/lib/mysql/db_myschema/myfile.csv

另外，与这个问题无关，但是如果您对新行有问题，请使用 sublimeTEXT 将行尾更改为 WINDOWS 格式，保存文件并重试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-06T09:01:00.590

这似乎有点棘手，因为它确实困扰了我很长时间。

您只需要打开表格（右键单击“选择行 - 限制 10000”），您将打开一个新窗口。在这个新窗口中，您将找到“导入图标”。

# java - Struts 2：发送带有 JQuery ajax 提交的 JSON 字符串以映射到复杂类型列表

> ID：11429828
> 
> 赞同：2
> 
> 时间：2012-07-11T09:42:32.687
> 
> 标签：java, json, jquery, struts2

如果一个 struts 2 动作类有一个属性

`List<User> userList`.

并且用户类具有如下属性

`username, password, createdDate`等等

是否可以通过传递适当的 JSON 字符串来使 struts 填充列表，同时提交指向该操作的 jQuery ajax 请求。

如果有可能怎么办？特别是 JSON 字符串的外观如何？

请询问任何澄清。

编辑：如果我不够清楚，我很抱歉。我想要做的不是从 Action 获取数据到 JSP，或者提交表单来填充数据。我想提交一个带有 JSON 数据的 AJAX 请求，Struts 2 可以使用它来自动填充 Action 类中的 List。

不使用 AJAX 提交表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:34:36.567

1.  您应该定义您的操作结果`type="json"`并检查您的类路径中是否有 json 插件，确保您有

    ```
    <struts>
        <package name="your_package" extends="struts-default, json default" namespace="/">
        // your action here
        </pacakge>
        ...
    </struts> 
    ```

2.  像这样编辑你的动作类

    ```
    public class myAction extends ActionSupport {
        private List<User> userlist; // getter and setter
        public String execute() {
           // your moves
           return SUCCESS;
        }
    } 
    ```

3.  然后您可以在您的 jsp 页面上执行一些操作以显示结果，例如：

    ```
    <s:iterator list="userList">
      <s:property value="username"/>
      <s:property value="password"/>
      <s:property value="createdDate"/>
    <s:iterator> 
    ```

我希望这可以帮助你..

**更新**

如果您已经有一个 json 对象：

```
{
   "userList" : [
      {"username" : "username", "password" : "afgasdfa", "createdDate" : "date-in-format"},
      {"username" : "username", "password" : "afgasdfa", "createdDate" : "date-in-format"},
      {"username" : "username", "password" : "afgasdfa", "createdDate" : "date-in-format"},
      {"username" : "username", "password" : "afgasdfa", "createdDate" : "date-in-format"}
   ]
} 
```

这应该是格式。

那么你应该从你的动作类中得到这个对象`List<User> userList`

只需尝试并反馈。

**更新 2**

也许您应该使用 获取您的 json 对象`String`，然后使用以下方法将其转换为 Java 对象：

```
String stringObject; // which get your string from http
List<User> userList;

userList = (List<User>)JSON.deserialize(stringObject,List<User>.class); 
```

请再次反馈。

# android - When designing a UI interface for MDPI and HDPI ANdroid how do i beat the height issue?

> ID：11429834
> 
> 赞同：1
> 
> 时间：2012-07-11T09:42:53.907
> 
> 标签：android, size, height, hdpi, mdpi

Having designed an interface for HDPI in Fireworks (480x800) and now moving it over ready for an MDPI version (320x480) i've come across an issue

Proportionally, the HDPI screen is slightly taller than the MDPI screen.

I know my images will resize, but even still am losing some space height wise

Evyerthing fits on screen beautifully on HDPI version....but now its resized down to MDPI the smaller proportion in height means i'm more stuck for space.

How does one avoid this issue?

I asked the developer if the space between elements can be altered for the MDPI version (eg, on a screen with 8 text fields.... the space between the fields is shortened), he said it will work on percentage of the screen etc.....that's all ok...problem is that

A 480x800 screen -- if this is downsized (proportionally width and height) to a width of 320, the height ends up as 533, not 480.

Therefore i lose 53 pixels in height.

Have I got confused? How do i sort this out? Much thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:49:02.957

首先

> 从比例上看，HDPI 屏幕比 MDPI 屏幕略高。

你不能说它是否更高。密度**不**定义分辨率。

> Evyerthing 在 HDPI 版本上非常适合屏幕......但现在它的大小调整为 MDPI，高度的比例更小意味着我更受空间限制。

所以，正如我所说 - MDPI 也不意味着您的屏幕分辨率低于 HDPI 屏幕分辨率。例如，我有一台 1280x800 分辨率和 MDPI 屏幕的平板电脑。得到它？

看起来最好为不同**尺寸**的设备（小型、中型、大型、xlarge）提供不同的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:01:38.597

它更好地使用布局权重，并确保在用 xml 设计 ui 时在任何地方都使用 desipixel dp 而不是 px。在设计 ui 时练习的最佳方法是确保应用程序能够正常工作并且看起来很好，而不考虑屏幕尺寸

有关布局重量的更多信息，请查看此[链接](http://blog.stylingandroid.com/archives/312)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T09:49:49.477

使用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)。但是，我不建议为固定屏幕尺寸甚至固定比例设计布局。

# odbc - Connecting to SAP DB using ODBC

> ID：11429835
> 
> 赞同：1
> 
> 时间：2012-07-11T09:43:01.430
> 
> 标签：odbc, sap

I'd like to access a SAPDB database using ODBC so I've installed the latest ODBC driver from [http://www.sapdb.org/](http://www.sapdb.org/)

I'm trying to create a connection using the following connection string: `DRIVER={SAP DB (Unicode)};SERVER=192.168.12.11;DATABASE=ADQ;UID=ADQTEST;PASSWORD=TESTABC;`

However I get the following error message:

> [SAP AG][SQLOD32 DLL][SAP DB] Invalid authorization specification;-4008 POS(1) Unknown user name/password combination

I'm fairly certain that the username/password I'm using is correct (we've verified multiple times).

I also don't think it's a general network problem since if I give it a non-existing database it actually complains about the "database not running". Only with the correct database I get the invalid authorization error.

I'd very much appreciate any hints anyone might be able to give me.

Best regards, Thomas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:39:21.523

用户 ID 和密码的 ODBC 属性是 UID 和 PWD，而不是 UID 和 PASSWORD。

# java - cxf Web 服务不更新

> ID：11429839
> 
> 赞同：1
> 
> 时间：2012-07-11T09:43:23.667
> 
> 标签：java, web-services, spring, deployment, cxf

我已经像这样构建了一个 CXF Webservice -

界面：

```
package de.arvato.icssa.services;

import javax.jws.WebService;

@WebService
public interface TestService {
    String sayHi(String text);
    boolean startProcess(String mail, String processName, String locale);
} 
```

执行：

```
package de.arvato.icssa.endpoints;

import javax.jws.WebService;
import java.util.*;

import de.arvato.icssa.util.*;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.MessageSource;

import de.arvato.icssa.db.HibernateUtil;
import de.arvato.icssa.db.worker.TaskWorker;
import de.arvato.icssa.services.TestService;

@WebService(endpointInterface="de.arvato.icssa.services.TestService")
public class TestServiceImpl implements TestService{

private Log log = LogFactory.getLog(this.getClass());
@Override
public String sayHi(String text)
{
    System.out.println("sayHi called");
    return "Hello " + text;
}

public boolean startProcess(String mail, String processName, String locale)
{ 
         <<<<<CODE>>>>>>
}
} 
```

cxf.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws"
    xsi:schemaLocation="
http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans.xsd
http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

<jaxws:endpoint id="testService"
    implementor="de.arvato.icssa.endpoints.TestServiceImpl" address="/TestService" />

</beans> 
```

web.xml 的重要部分：

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>WEB-INF/cxf.xml</param-value>
</context-param>

<servlet>
<servlet-name>CXFServlet</servlet-name>
<servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>CXFServlet</servlet-name>
<url-pattern>/TestService</url-pattern>
</servlet-mapping>

<servlet-mapping>
<servlet-name>CXFServlet</servlet-name>
<url-pattern>/TestService/*</url-pattern>
</servlet-mapping> 
```

这通常工作得很好。我的方法“startProcess”曾经有 2 个参数（省略了“语言环境”）——我最近添加了它，重新启动了我已集成到“服务器”Eclipse 插件中的 Tomcat 6.0 Web 服务器——但该方法仍然只接受 2 个参数并在添加第三个参数之前运行我在该方法中拥有的旧代码。

**编辑**

**如果我实现了另一个方法，它在重新启动服务器后也没有更新，看起来好像没有任何变化。我的 Web 服务仍以其原始形式更新。**

关于如何“硬”重新部署该网络服务的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:23:53.113

在服务器选项卡中，右键单击服务器，然后单击重新发布。如果这没有帮助，请右键单击并选择添加/删除项目并删除项目，然后再次右键单击选择添加/删除项目并再次添加。

如果这也没有帮助，您可以右键单击该项目并选择导出->War 文件。将其导出到您想要的任何位置。

转到 TOMCAT_HOME/webapps，如果您的项目在那里，请删除它并复制其下的新 war 文件。

让我知道这是否有帮助。

# java - alignment of an image within a jpanel

> ID：11429840
> 
> 赞同：0
> 
> 时间：2012-07-11T09:43:25.797
> 
> 标签：java, swing, layout, jpanel, jtextarea

I am currently trying to visualize a couple of images with two JTextAreas below. The following happens: The images are centered and the text within the JTextAreas is left aligned. I would like to be able to also display the images on the left. I am using the following code to make the panel

```
public MetaboliteInfo(SwingEngine se)
    {
        super();
        Engine engine = se.getEngine();
        engine.addApplicationEventListener(this);
        VPathway vp = engine.getActiveVPathway();
        if(vp != null) vp.addSelectionListener(this);

        this.gdbManager = se.getGdbManager();
        this.se = se;

        setLayout (new BorderLayout());

        panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

        scroll = new JScrollPane(panel);
        add (scroll, BorderLayout.CENTER);           

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:59:24.010

这可能会帮助你

[http://docs.oracle.com/javase/tutorial/uiswing/components/text.html](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

# c# - How to enable cookies for all browser using c#

> ID：11429841
> 
> 赞同：0
> 
> 时间：2012-07-11T09:43:26.890
> 
> 标签：c#, asp.net

In my project am using cookies and working fine.Here comes the problem, when cookies are disabled for browser then what to do?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T09:44:10.153

You can't change that through your code. Its a browser function and you don't have any control over it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:50:25.183

正如其他答案所述，您试图实现的目标是不可能的，客户端/最终用户可以完全控制其浏览器的 cookie 设置，如果他们希望不允许 cookie 进入他们的计算机，那么这是他们的选择。

但是，如果您使用 cookie 来跟踪用户会话状态并且对于未启用 cookie 的用户来说它会失败，那么 ASP.NET 中有一个功能允许在不使用 cookie 的情况下跟踪会话。您可以使用以下行在 web.config 文件中将其打开：

```
<sessionState cookieless="true" /> 
```

这显然不像使用 cookie 那样简单、安全或健壮，但它是一个很好的选择，可以让您在短期会话中识别用户会话并将数据与这些用户相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:52:24.660

不，您既不能从服务器端也不能从客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:52:58.857

这是所有浏览器的内置功能，您将无法按照您的要求进行操作。

# c++ - C++ 正则表达式，解析

> ID：11429844
> 
> 赞同：0
> 
> 时间：2012-07-11T09:43:45.723
> 
> 标签：c++, regex

我对正则表达式很陌生，我无法让我的函数做我想做的事。
我有一个长字符串，我想从中提取 3 个变量。

我的字符串看起来：

```
 Infoname/info :   
 Input_Device_Name GTape  Buffer_Size 16384 Acquisition_Event_Rate 163691.000000  
 Acquisition_Buffer_Rate 14873.333008 Acquisition_Succes_Rate 100.000000 
```

我的目标是将 163691.000000、14873.333008 和 100.000000 存储在三个不同的变量中。

请问最快最好的方法是什么？

谢谢你，
欧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:06:35.190

您可以使用以下正则表达式来查找它：

```
"Input_Device_Name\s+GTape\s+Buffer_Size\s+[0-9.]+\s+Acquisition_Event_Rate\s+([0-9.]+)\s+Acquisition_Buffer_Rate\s+([0-9.]+)\s+Acquisition_Succes_Rate\s+([0-9.]+)" 
```

假设您的文本保持不变并且您的数字始终采用这种形式（即是正数而不是指数形式），这应该捕获三个值。请注意，只有最后三个数字通过将括号括在它们周围来捕获。

如果你使用 boost 正则表达式，你可以这样做：

```
#include <boost/regex.hpp> 
```

...

```
boost::smatch what;
static const boost::regex pp("Input_Device_Name\\s+GTape\s+Buffer_Size\\s+[0-9.]+\\s+Acquisition_Event_Rate\\s+([0-9.]+)\\s+Acquisition_Buffer_Rate\\s+([0-9.]+)\\s+Acquisition_Succes_Rate\\s+([0-9.]+)");
if ( boost::regex_match(inputTextString, what, pp) )
{
    if ( what.size() == 4 )
    {
         double d1 = strtod(static_cast<const string&>( what[1] ).c_str(), NULL, 0);
         double d2 = strtod(static_cast<const string&>( what[2] ).c_str(), NULL, 0);
         double d3 = strtod(static_cast<const string&>( what[3] ).c_str(), NULL, 0);

         // These are your doubles, do some stuff with them.
    }
} 
```

Where`inputTextString`包含您要解析的文本行，因此如果这来自文件，您可能希望将此代码放在一个循环中。该`what`变量是所有匹配文本的向量，但`what[0]`包含整行，因此可以忽略，除非您需要它。最后但并非最不重要的一点是，请记住双重转义“空格”字符类，否则编译器在将其呈现给正则表达式处理器之前已经对其进行了处理（或生成错误或警告）。另外，请注意我没有时间编译它，尽管它是基于工作代码的

注意输入文件中的尾随、前导空格，如果有帮助，请使用`^`and`$`分别标记行的开头或结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:46:01.977

只要搜索`[0-9\.]+`返回任何结果。并且，例如，如果您想拒绝`16384`作为不需要的变量，请测试每个搜索结果中是否包含点。

# c# - x86 COM+ server access from x64 code

> ID：11429849
> 
> 赞同：2
> 
> 时间：2012-07-11T09:44:01.943
> 
> 标签：c#, visual-studio-2010, .net-4.0, com+

I need to access a x86 dll (3rd party, no access to source) from x64 code. My research indicated putting the dll in a COM+ wrapper and accessing as an OOP service was the most suitable approach.

So far so good.

So following a guide from "NET 2.0 Interoperability Recipes - A Problem Solution Approach" (although I am running VS2010, and .NET4). I built a proof of concept Service(dll) and test Client(exe), the service running as a server application to be OOP. They both work, and disabling the service through Component Services kills it, so it appears to be using the correct route.

This is all in x86\.

When I change the client to x64 I get a 'BadImageFormatException', which I would expect if it were simply loading an x86 dll, but this should be running OOP.

I know I am missing something, and it is probably quite obvious.

Other Notes:

1) I run regsvcs post build, and regsvcs /u prebuild 2) The problem dll is stuck as is, and my main codebase has to be x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:08:32.957

您需要强制您的程序在所有平台上以 x86 模式运行。进入主程序集的属性并在“构建”选项卡中，将“平台目标”从“任何 CPU”更改为“x86”。这将强制所有程序集以 x86 模式运行，即使在 x64 机器上也是如此。

# c++ - C++ & Xcode: Apple Mach-O Linker error?

> ID：11429850
> 
> 赞同：1
> 
> 时间：2012-07-11T09:44:02.727
> 
> 标签：c++, xcode, oop, linker

I'm studying C++ from an online course (Stanford CS106B via iTunes U) and I'm trying to work with code that was designed for Xcode 3 in version 4.3.2

I suspect there are fundamental changes in 4.3.2, therefore fundamental incompatibilities with this old code.

The following screen shots illustrate the C++ code I'm trying to compile and the errors Xcode 4.3.2 is reporting.

There's probably a simple answer to this problem, any help would be greatly appreciated.

If someone could explain to me what's going wrong in newb terms that would be awesome!

My simple program: ![program](../Images/e58968fc436835d6074e1f398dfaff9a.png)

And the error I get when running it: ![error](../Images/7915efea1c1876577090b1d93a39d1c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:51:47.197

您似乎没有在包含 function 的源文件中进行编译和链接`GetInteger()`。

**编辑**问题`main()`是由于它在您的`genlib.cpp`.

# iphone - 未显示 UITextField 内容的 MessageUI 框架问题

> ID：11429852
> 
> 赞同：0
> 
> 时间：2012-07-11T09:44:05.220
> 
> 标签：iphone, ios, xcode, ios5, messageui

我在我的应用程序中包含了用于发送邮件的 messageUI 框架。它包含五个 UITextField，其中用户输入的值应显示在邮件正文中。这是我的代码

```
if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

    mailer.mailComposeDelegate = self;

    [mailer setSubject:[NSString stringWithFormat:@"Appointment From Mr/Mrs. %@",text1.text]];

    NSArray *toRecipients = [NSArray arrayWithObjects:@"info@xxx.com", nil];
    [mailer setToRecipients:toRecipients];

    NSString *emailBody =[NSString stringWithFormat:@"Name :%@\nDate: %@\nPreferred Time Slot: %@\nE-Mail:%@\nSpecific Requests:",text1.text,text2.text,text3.text,text4.text,text5.text]; 

    [mailer setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:mailer animated:YES];

    [mailer release];
} 
```

我面临的问题是所有四个文本字段值都显示只有第五个文本字段值没有显示..有什么想法吗？...我错过了什么吗？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:45:31.663

您在字符串中只有四个`%@`表单，因此提供给格式方法的最后一个参数将被忽略。

将格式字符串更改为具有五个参数：

```
NSString *emailBody =[NSString stringWithFormat:@"Name :%@\nDate: %@\nPreferred Time Slot: %@\nE-Mail:%@\nSpecific Requests:%2",text1.text,text2.text,text3.text,text4.text,text5.text]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:49:49.587

编辑以下代码行

```
 NSString *emailBody =[NSString stringWithFormat:@"Name :%@\nDate: %@\nPreferred Time Slot: %@\nE-Mail:%@\nSpecific Requests:%@",text1.text,text2.text,text3.text,text4.text,text5.text]; 
```

你会得到你的要求......不要忘记在你输入文字后使用resignFirstresponder隐藏键盘......

# eclipse - Is there a quick way to add gettext() calls to strings in PyDev?

> ID：11429855
> 
> 赞同：3
> 
> 时间：2012-07-11T09:44:11.973
> 
> 标签：eclipse, pydev, gettext

Is there a quick way to add a `gettext()` call to a literal string in the PyDev editor running under Eclipse? I.e. when I place the cursor on any literal `'string'` in a Python file, I want to turn this into `_('string')` with a single keypress. Can I use macros or something like that to add such functions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:26:55.203

在 PyDev 中使用一些简单的 Python 脚本应该可以做到这一点。

看看： http: [//pydev.org/manual_articles_scripting.html](http://pydev.org/manual_articles_scripting.html)（可以使用[https://github.com/aptana/Pydev/blob/master/plugins/org.python.pydev.jython/jysrc/pyedit_import_to_string。 py](https://github.com/aptana/Pydev/blob/master/plugins/org.python.pydev.jython/jysrc/pyedit_import_to_string.py)为例）。

对于文本选择，可以在以下位置找到 PySelection 实现：[https ://github.com/aptana/Pydev/blob/master/plugins/org.python.pydev.core/src/org/python/pydev/core/docutils /PySelection.java](https://github.com/aptana/Pydev/blob/master/plugins/org.python.pydev.core/src/org/python/pydev/core/docutils/PySelection.java)（因此，您可以查看 getSelectedText 并使用您自己的版本来获取您想要的文本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:12:30.287

[这是使用Vrapper](http://vrapper.sourceforge.net/home/)的另一个解决方案：

```
 :map gt ca'_(<esc>pa)<esc> 
```

请注意，这仅适用于单引号字符串，当您使用双引号或多行字符串时它无法识别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:21:01.780

这是一个小 PyDev 脚本，我可以根据 Fabio 提供的提示创建它。如果您按 Ctrl+2,t，则光标位置处的文字字符串将被 gettext 调用包围。我不确定我是否按预期使用 Java API，但它对我有用。如果您有改进的想法，请发表评论。

```
if cmd == 'onCreateActions':
    from org.eclipse.jface.action import Action
    from org.python.pydev.core import IPythonPartitions
    from org.python.pydev.core.docutils import ParsingUtils, PySelection

    class AddGettext(Action):
        """Add gettext call around literal string at cursor position."""

        GETTEXT = '_'

        def run(self):
            sel = PySelection(editor)
            doc = sel.getDoc()
            pos = sel.getAbsoluteCursorOffset()
            ctype = ParsingUtils.getContentType(doc, pos)
            if ctype == IPythonPartitions.PY_SINGLELINE_STRING1:
                char, multi = "'", False
            elif ctype == IPythonPartitions.PY_SINGLELINE_STRING2:
                char, multi = '"', False
            elif ctype == IPythonPartitions.PY_MULTILINE_STRING1:
                char, multi = "'", True
            elif ctype == IPythonPartitions.PY_MULTILINE_STRING2:
                char, multi = '"', True
            else:
                char = None
            if char:
                par = ParsingUtils.create(doc)
                if multi:
                    start = par.findPreviousMulti(pos, char)
                    end = par.findNextMulti(pos, char)
                else:
                    start = par.findPreviousSingle(pos, char)
                    end = par.findNextSingle(pos, char)
                doc.replace(end + 1, 0, ')')
                doc.replace(start, 0, self.GETTEXT + '(')

    ACTIVATION_STRING = 't'
    WAIT_FOR_ENTER = False

    editor.addOfflineActionListener(
        ACTIVATION_STRING, AddGettext(), 'Add gettext call', WAIT_FOR_ENTER) 
```

# asp.net - get an integer from a webservice using jquery.ajax

> ID：11429858
> 
> 赞同：1
> 
> 时间：2012-07-11T09:44:26.440
> 
> 标签：asp.net, web-services, jquery

Every time I use a **success** function of jQuery.ajax I get the following result :

```
<?xml version="1.0" encoding="utf-8"?>
<int xmlns="http://tempuri.org/">-105</int> 
```

No matter what dataType I set (json, html, xml) - that's the returned data. How can I escape the integer (-105 in this case)?

P.S. maybe I have to change somethig in my asp.net c# web method:

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public int CheckRegistrationFree(string phone) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:50:24.197

这对我有用

```
$.ajax({
    success : function(xml){
        alert($(xml).find('int').text());
    }
}) 
```

# c++ - Turbo C++ (not visual)(Postfix and prefix operators)

> ID：11429859
> 
> 赞同：-2
> 
> 时间：2012-07-11T09:44:32.743
> 
> 标签：c++, postfix-operator, prefix-operator

When I run this program I get output as 2

```
#include<iostream.h>
#include<conio.h>
void main(){
    clrscr();
    int a = 10;
    int c = a-- - --a;
    cout<<c;
    getch();
} 
```

... but when I just modify it to

```
#include<iostream.h>
#include<conio.h>
void main(){
    clrscr();
    int a = 10,c;
    c = a-- - --a;
    cout<<c;
    getch();
} 
```

... I get output 0\. WHY? In java both the of them gave output as 2\. Whats wrong with C++? Explain :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:47:47.313

C++ 没有问题，但是你使用它的方式有问题。

该表达式`a-- - --a`在 C++ 中具有未定义的行为，并且任何事情都可能发生。

最干净的解决方案是不要编写这样的代码（即使它是合法的，我也不会这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:56:35.053

详细说明卢奇安的回答。在 C++ 中，未指定在表达式内计算子表达式的顺序。这意味着在以下表达式中：

```
int c = a-- - --a; 
```

有两个同样有效的评估命令。

1.  先求值`a--`（returns `10`），然后求值`--a`（returns `8`），再减去（returns `2`）。
2.  先求值`--a`（returns `9`），然后 求值`a--`（returns `9`），再减去（returns `0`）。

这是为了改善编译器的优化机会。自然，这意味着在 C++ 中使用依赖于求值顺序的表达式是错误的，因为无法知道编译器将选择哪个顺序。在 C++ 和 Java 中，效率和避免错误之间的权衡是不同的。

# python - django 包和 python 库有什么区别？

> ID：11429862
> 
> 赞同：5
> 
> 时间：2012-07-11T09:44:38.370
> 
> 标签：python, django

我是 django 的新手，我一直在浏览 djangopackages 网站。我想知道那些“django”包和不是 django 包的 python 库有什么区别。

例如，sendgrid 有一个 django 包和一些常规的 python 库。如果我想使用 django 应用程序中的 sendgrid 包装器，使用 django 包而不是其他可用且更频繁维护的 python 库有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T09:48:01.207

Django 包具有 Django 应用程序的一般结构（`models.py`、`views.py`等），并且可以在您的`settings.py`文件中定义其他设置。使用 Django 包可以更轻松地将功能集成到 Django Web 应用程序中，而不是简单地调用 Python 库。

通常 Python 库提供所有功能，而 Django 包提供使用它的附加功能（例如有用的模板标签、设置或上下文处理器）。您需要同时安装这两者，因为没有该库 Django 包将无法工作。但这可能会有所不同，因此您需要查看 Django 包提供的功能。

# ember.js - emberjs 子嵌套列表

> ID：11429864
> 
> 赞同：2
> 
> 时间：2012-07-11T09:44:38.997
> 
> 标签：ember.js

我尝试将嵌套列表创建到一个对象“有孩子的人”中，但是孩子们是共享宽度的所有父母，这是一个链接[http://jsfiddle.net/Lz7CD/5/](http://jsfiddle.net/Lz7CD/5/)。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:57:10.497

问题是`dp`所有对象的数组都是相同的`App.Person`，因为作为参数传递给 extend() 的对象字面量定义了将由类实例化的对象原型的属性，请参见[http://www。 cerebris.com/blog/2012/03/06/understanding-ember-object/](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)（尤其是`Extending classes`和`Initialization (and a common mistake!)`）

这可以通过在创建时创建一个`dp`数组来解决，请参见[http://jsfiddle.net/pangratz666/AVzeQ/](http://jsfiddle.net/pangratz666/AVzeQ/)：`init``Person`

```
App.Person = Em.Object.extend({
    name:null,
    init: function(){
        this._super();
        this.set('dp', []);
    },
    addItem:function(item){
        this.get('dp').push(item);
    }
}); 
```

# android - Android：setContentView() == getViewInflate().inflate()？

> ID：11429865
> 
> 赞同：4
> 
> 时间：2012-07-11T09:44:39.620
> 
> 标签：android, layout-inflater

我尽我最大的努力开发一种聪明的方法来清理成堆的`Blah blah = (Blah) this.findViewById(R.id.blah)`否则会污染场地和我的小活动的 onCreate() 方法，为此，我觉得我不应该使用 setContentView() 而是使用 getViewInflate().inflate () 用于 XML 中定义的每个视图。

是`Activity.setContentView()`某种语法糖吗？它实际上是`getViewInflate().inflate()`在为 XML 上的每个视图重复吗？我读到一些东西，好像它们是一样的。

如果我可以通过查看代码得到答案，请告诉我。我检查了Activity.class，但只找到了评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T11:05:56.513

我正在发布我糟糕的研究。总之，`Activity.setContentView()`委托`PhoneWindow.setContentView()`（唯一的具体类`Window`）在其中`LayoutInflater.inflate()`被调用，所以说“ `setContentView()`== `ViewInflate().inflate()`”并不过分，我猜。

```
public class Activity extends ContextThemeWrapper{

    private Window mWindow;

    public void setContentView(int layoutResID) {
        getWindow().setContentView(layoutResID);
        initActionBar();
    }

    public Window getWindow() {
        return mWindow;
    }
}

public class PhoneWindow extends Window {

    private LayoutInflater mLayoutInflater;

    @Override
    public void setContentView(int layoutResID) {
        if (mContentParent == null) {
            installDecor();
        } else {
            mContentParent.removeAllViews();
        }
        **mLayoutInflater.inflate(layoutResID, mContentParent);**
        final Callback cb = getCallback();
        if (cb != null) {
            cb.onContentChanged();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:25:20.327

你的 Activity 上的 setContentView 实际上调用了 Activity 使用的 Window 上的 setContentView，它本身所做的不仅仅是膨胀布局。

您可以做的是使用反射将视图映射到类字段。您可以[在 Github 上](https://github.com/xgouchet/ViewFieldMatcher)下载执行此操作的实用程序类。

它将解析布局中声明的所有视图，然后尝试在您的 R.id 类中找到与 id 对应的名称。然后它会尝试在目标对象中找到一个同名的字段，并用相应的视图进行设置。

例如，如果您有这样的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
</LinearLayout> 
```

它会自动将其映射到您活动中的 textView1 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:59:14.350

其实你是对的，有两种方法可以实现相同的目标：

1)`setContentView(R.layout.layout);`

2)

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
View v = inflater.inflate(R.layout.layout, null);
setContentView(v); 
```

你决定什么更适合你。希望这可以帮助。

# asp.net - 如何测试更新发布到它的内容的控制器

> ID：11429869
> 
> 赞同：0
> 
> 时间：2012-07-11T09:44:51.380
> 
> 标签：asp.net, tdd, rhino-mocks, rhino-mocks-3.5

这看起来很简单，但我似乎无法让它工作。我想对控制器的分配操作进行单元测试。它需要一个 IEnumerable(Of Integer) 来表示要分配的所有对象的 ID。

这是我编写的代码，Do 语句出现错误（我从 Ayende 的博客中复制了代码[http://ayende.com/blog/3397/rhino-mocks-3-5-a-feature -为无缝做而感到自豪](http://ayende.com/blog/3397/rhino-mocks-3-5-a-feature-to-be-proud-of-seamless-do)）。

```
 <Test()> _
    Public Sub Assign_Post_Should_Assign_All_Audits_Provided()
        Dim auditsToAssign As IEnumerable(Of HvacAudit) = HvacAuditsGenerator.GenerateAudits() _
                                                                .Unassigned()

        Dim auditIDs As IEnumerable(Of Integer) = auditsToAssign.Select(Function(audit, index) audit.HvacAuditID)

        Dim hvacAuditRepo As IHvacAuditRepository = MockRepository.GenerateMock(Of IHvacAuditRepository)()
        hvacAuditRepo.Stub(Sub(repo) repo.GetAuditByID(1)) _
            .Do(Function(invocation) invocation.ReturnValue = auditsToAssign.Single(Function(audit) audit.HvacAuditID = invocation.Arguments(0)))

        Dim controller As New HvacAuditController(hvacAuditRepo)
        Dim r As ViewResult = controller.Assign(auditIDs).AssertViewRendered()

        r.AssertAssignedAuditCount(auditsToAssign.Count)
        auditsToAssign.AssertAreAssigned()
        hvacAuditRepo.AssertWasCalled(Sub(h) h.SaveChanges())
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:33:30.030

我可以通过更改代码以使用函数 lambda 而不是子 lambda 并直接返回值来解决此问题。我不确定 Ayende 的博客指的是什么。

```
<Test()> _
Public Sub Assign_Post_Should_Assign_All_Audits_Provided()
    Dim auditsToAssign As IEnumerable(Of HvacAudit) = HvacAuditsGenerator.GenerateAudits() _
                                                            .Unassigned()

    Dim auditIDs As IEnumerable(Of Integer) = auditsToAssign.Select(Function(audit, index) audit.HvacAuditID)

    Dim hvacAuditRepo As IHvacAuditRepository = MockRepository.GenerateMock(Of IHvacAuditRepository)()
    hvacAuditRepo.Stub(Sub(repo) repo.GetAuditByID(1)) _
        .Do(Function(auditID as Integer) Return auditsToAssign.Single(Function(audit) audit.HvacAuditID = auditID))

    Dim controller As New HvacAuditController(hvacAuditRepo)
    Dim r As ViewResult = controller.Assign(auditIDs).AssertViewRendered()

    r.AssertAssignedAuditCount(auditsToAssign.Count)
    auditsToAssign.AssertAreAssigned()
    hvacAuditRepo.AssertWasCalled(Sub(h) h.SaveChanges())
End Sub 
```

# c# - WPF C# .NET Noob 请求一些建议（使用 Visual Studio 2012 RC）

> ID：11429876
> 
> 赞同：1
> 
> 时间：2012-07-11T09:45:16.087
> 
> 标签：c#, .net, wpf

我一直主要使用 Windows 窗体，但想改用 WPF。通常我喜欢使用 Manager.cs 文件来管理我的应用程序。我会将管理器设置为入口点，它将加载例如我的主窗口。

根据我的阅读，运行 WPF 时会自动生成 Main() 入口点。我尝试更改 XAML 文件以运行我的 Manager.cs 文件，但这样做时它会抱怨。

我是 WPF 的菜鸟，有人对如何将所有内容封装在 Manager.cs 文件中并在启动时运行有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:59:56.740

虽然我建议不要打扰，但您应该能够将 App.xaml 文件名更改为 Manager.xaml（进而创建 Manager.xaml.cs），然后在新的 Manager.xaml.cs 中更改`App`为`Manager`部分类定义。

部分类的另一半是自动生成的东西。

然后您可以`Manager.Current`像以前一样访问`App.Current`。

# android - 在 Android WebView 中读取键盘事件

> ID：11429878
> 
> 赞同：14
> 
> 时间：2012-07-11T09:45:21.120
> 
> 标签：android, webview, android-webview, android-softkeyboard, keyevent

我正在尝试在 android web 视图中收听关键事件。例如，当用户填写表格时，我应该收到关键事件。这是我的 WebView 代码

```
public class MyWebView extends WebView implements OnKeyListener
{
    .....

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        Log.i("PcWebView", "onKeyDown keyCode=" + keyCode);
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onKeyUp(int keyCode, KeyEvent event)
    {
        Log.i("PcWebView", "onKeyUp keyCode=" + keyCode);
        return super.onKeyUp(keyCode, event);
    }

    @Override // Listener is initialized in the constructor
    public boolean onKey(View v, int keyCode, KeyEvent event)
    {
        Log.i("PcWebView", "onKey keyCode=" + keyCode);
        return false;
    }

    .....

} 
```

这两种方法都没有`onKeyDown`，`onKeyUp`并且`onKey`在用户输入文本框或文本区域时被调用。是否有可能实现这一目标，或者 Android 是否限制了这种可能违反隐私的行为？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-04-15T11:38:25.060

**警告！此解决方案仅支持英文字母。**

无需访问 HTML 源代码或 JS 事件即可完成。适用于我在 Android 5.0.2 上的软键盘和硬件键盘。

```
public class MyWebView extends WebView {

    @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
        return new BaseInputConnection(this, false); //this is needed for #dispatchKeyEvent() to be notified.
    }

    @Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        boolean dispatchFirst = super.dispatchKeyEvent(event);
        // Listening here for whatever key events you need
        if (event.getAction() == KeyEvent.ACTION_UP)
            switch (event.getKeyCode()) {
                case KeyEvent.KEYCODE_SPACE:
                case KeyEvent.KEYCODE_ENTER:
                    // e.g. get space and enter events here
                    break;
            }
        return dispatchFirst;
    }
} 
```

`InputConnection`这里的技巧是用简化的输入实现覆盖系统提供的输入实现 。默认情况下，阻止开发人员访问事件是 Google 员工故意设置的。因为键事件输入不再是唯一的。有手势，声音和更多即将到来。官方建议是*“完全停止依赖遗留的关键事件进行文本输入”*。在此处查看更多详细信息：[https ://code.google.com/p/android/issues/detail?id=42904#c15](https://code.google.com/p/android/issues/detail?id=42904#c15)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-06T15:52:03.303

您可以在 WebViewClient 类上使用**onUnhandledKeyEvent()函数覆盖。**非常适合我。

[onUnhandledKeyEvent](https://developer.android.com/reference/android/webkit/WebViewClient.html#onUnhandledKeyEvent(android.webkit.WebView,%20android.view.KeyEvent))

```
@Override
public void onUnhandledKeyEvent(WebView view, KeyEvent event) {
      return;
}

whenever a user presses any key on the keyboard, this event will get fire.
Please let me know if that's works for you? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-02T17:04:12.783

我在 Kotlin 中通过 JavaScript 回调找到了一种简单的方法。

```
 webview.apply {
        settings.javaScriptEnabled = true

        addJavascriptInterface(object {
            @JavascriptInterface
            fun keyInteraction(): Boolean {
                //<handle key interaction here>
                return true
            }
        },"Android")

        webViewClient = object : WebViewClient() {
            override fun onPageFinished(view: WebView?, url: String?) {
                loadingFinished()
                view?.loadUrl(
                    "javascript:(function() {" +
                    "    window.parent.addEventListener (" +
                    "        'keyup'," +
                    "        function(event) {" +
                    "            Android.keyInteraction();" +
                    "        });" +
                    "})()"
                )
                super.onPageFinished(view, url)
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-15T09:33:24.950

你可以像这样使用javascript

```
<body>

    <div contenteditable="true" id='box'></div>
</body>
    <script>
        box.addEventListener('keydown',e=>{
            if(e.keyCode ===13){
                alert('pressed enter key')
            }
        })
    </script>
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-19T03:12:56.793

我不知道您是否已经尝试过，但是...或者，您可以为您的“MyWebViewClass”启用 javascript，并使用 javascript 事件调用 java 代码，使用[webView.addJavascriptInterface(....etc)](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)

完整故事：- [http： //developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

# sorting - 是否可以对primefaces Datagrid进行排序？

> ID：11429880
> 
> 赞同：1
> 
> 时间：2012-07-11T09:45:21.917
> 
> 标签：sorting, datagrid, primefaces

是否可以对primefaces datagrid数据进行排序？我知道这在数据表中是可能的。如果默认情况下不可能，还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:22:15.543

Primefaces 数据网格不提供排序或过滤功能，而且似乎短期内没有实施它的计划。
我已经在数据杂志中使用ap：selectonemenu在datagrid上方实现了排序一个 ajax 事件，用于调用使用适当的 ORDER BY 从数据库重新加载集合的方法。

例子：

```
<h:form>
    <h:outputLabel value="Sort by: " />
    <p:selectOneMenu value="#{bean.selectedField}" >
        <f:selectItems value="#{bean.sortingFields}" />
        <p:ajax event="change" update="grid" />
    </p:selectOneMenu>

    <p:dataGrid id="grid" value="#{bean.collection}" var="item" >
            <!-- contents of datagrid here -->
    </p:dataGrid>
</h:form> 
```

在托管 bean 中：

```
private List<SelectItem> sortingFieds;
private String selectedField, currentSortField;
private boolean asc;
private List<YourEntity> collection;
@EJB private YourEJB yourEjb;

public void init() {
    // load sortingFields with list of fields to order by
    // set default value for currentSortField
    asc = true;
    collection = yourEjb.loadCollection(sortField, asc);
}

public void sortCollection() {
    if(currentSortField.equals(selectedField) {
        asc = !asc;
    } else {
        currentSortField = selectedField;
        asc = true;
    }
    collection = yourEjb.loadCollection(sortField, asc);
} 
```

在你的 ejb

```
public List<YourEntity> loadCollection(String sortfield, boolean asc) {
    String q = "SELECT e FROM YourEntity e ORDER BY " + sortfield + " ";
    if(asc) {
       q += "ASC";
     } else {
       q += "DESC";
    }
    Query query = entityManager.createQuery(q);
    return query.getResultList();
} 
```

# html - 鼠标悬停父跨度时显示跨度元素

> ID：11429883
> 
> 赞同：0
> 
> 时间：2012-07-11T09:45:31.040
> 
> 标签：html, css

当我将鼠标悬停在一个`span.label`元素上时，我想显示一个子`span.dM`元素。这在下面的小提琴中完美地发生了。

这是[小提琴](http://jsfiddle.net/ashwyn/rVLpq/)

我想要实现的是，当我将鼠标悬停在`span.dM`出现的位置时，我应该得到一个灰色背景`span.label`。目前我必须将鼠标悬停在文本“一些文本”上才能看到`span.dM`元素。

我想在不使用任何宽度的情况下解决这个问题。有什么建议么 ？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:54:35.860

您不能将鼠标悬停在`display:none`. 如果可能，请使用 隐藏跨度`visibility:hidden`。这样元素就不会从文档流中删除，您可以将鼠标悬停在它上面。

[http://jsfiddle.net/z4JBG/](http://jsfiddle.net/z4JBG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:49:51.967

我已经分叉了你的 jsfiddle，使用 jquery 来实现你想要的效果。

[http://jsfiddle.net/ZrxGf/](http://jsfiddle.net/ZrxGf/)

# java - 如何避免“flexjson.JSONSerializer”将日期时间对象转换为时间戳？我想要像 yyyy/MM/dd hh:mm:ss 这样的字符串

> ID：11429885
> 
> 赞同：0
> 
> 时间：2012-07-11T09:45:33.753
> 
> 标签：java, json, flexjson

我正在使用 flexjson.JSONSerializer 序列化 Java 对象，但是在序列化 Date 属性时，它被转换为 Timestamp：

`new JSONSerializer().exclude("*.class").serialize(obj);`

flexjson如何从日期转换为可读时间的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:42:40.007

您也可以使用 DateTransformer。

```
 new JSONDeserializer().use("person.birthdate", new DateTransformer("yyyy/MM/dd hh:mm:ss") ).deserialize( people ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T15:43:49.957

对于您应该使用的序列化程序`JSONSerializer#transform`

```
new JSONSerializer().exclude("*.class")
    .transform(new DateTransformer("yyyy/MM/dd hh:mm:ss"), "creationDate")
    .serialize(obj); 
```

# url - 如何避免跟踪网址缩短器本身的“点击”？

> ID：11429887
> 
> 赞同：1
> 
> 时间：2012-07-11T09:45:48.583
> 
> 标签：url, twitter, google-api, url-shortener, google-url-shortener

我使用**谷歌缩短网址**来缩短我的链接，我使用这个链接使用我的 php 应用程序在 Twitter 上发布。

为了跟踪该页面链接的来源，当有人单击该链接时，我正在我的 php 页面上更新访问计数。当我将我的 url 传递给 google 缩短 api 时，它会自动 ping 我的网站，因此我的访问次数增加了，而 twitter 也这样做了。因此，我在 db 上获得了 2 到 5 次点击。谁能帮我处理这个问题？我想跟踪用户完成的点击次数不是来自谷歌缩短 api 和 twitter 缩短 url api

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:51:58.350

简单/懒惰的方法是进行进一步的测试，看看是否有一致的点击数来自 Google 和 Twitter。如果是这样，您只需预先调整计数以减去每个缩短 URL 的命中数。

更严格的方法是检测每个页面请求的[User-Agent 标头。](http://php.about.com/od/learnphp/p/http_user_agent.htm)如果它来自 Google 或 Twitter，请忽略它。如果它来自其他任何东西，请增加您的点击次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T18:07:26.730

我们有类似的问题。当谷歌进行点击时，它会在请求标头中设置`From: googlebot(at)googlebot.com`. 我们使用此标头信息并实施自定义逻辑来排除来自 google-bots 的点击。

# r - 将 XTS 对象转换为 data.frame

> ID：11429889
> 
> 赞同：6
> 
> 时间：2012-07-11T09:45:58.027
> 
> 标签：r, xts

> **可能重复：**
> [如何创建行名变量？](https://stackoverflow.com/questions/11427434/how-to-create-a-variable-of-rownames)

* * *

请在 R 中运行它：

```
require(quantmod)   
setSymbolLookup(SDB=list(name="000001.sz",src="yahoo"))   
getSymbols("SDB",from="2010-01-01",to="2010-02-01")   
sdb=as.data.frame(weeklyReturn(SDB))  
sdb 
```

我得到的是：

```
 weekly.returns             
2010-01-08    -0.07830343          
2010-01-15    -0.05176991              
2010-01-22     0.07699487              
2010-01-29    -0.05979203         
2010-02-01    -0.02119816 
```

我想要得到的是：

```
 date  weekly.returns                   
1 2010-01-08     -0.07830343           
2 2010-01-15     -0.05176991         
3 2010-01-22      0.07699487          
4 2010-01-29     -0.05979203            
5 2010-02-01     -0.02119816 
```

我怎样才能做到这一点？

请注意，这是一个`XTS`对象，而不是基本的`data.frame`. 转换后，我希望原始行名在结果中显示为新变量`data.frame`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T10:02:10.983

好的。因此，它与您之前的问题并不完全相同，因为这是一个`XTS`对象。不过，很容易照顾：

```
data.frame(date = index(weeklyReturn(SDB)), 
           weeklyReturn(SDB), row.names=NULL)
#         date weekly.returns
# 1 2010-01-04    -0.03303426
# 2 2010-01-11    -0.04681569
# 3 2010-01-18    -0.05000000
# 4 2010-01-25     0.03353517
# 5 2010-02-01    -0.04281208 
```

如需有关此处操作的帮助，请查看使用`?indexClass`以阅读包`index`中的文档`XTS`。

# svn - Jenkins：凭据插件如何与 Subversion 插件一起使用

> ID：11429892
> 
> 赞同：1
> 
> 时间：2012-07-11T09:46:02.520
> 
> 标签：svn, jenkins, credentials

我正在使用 Jenkins 版本 1.447.2。我安装了最新的凭据插件和 SSH 凭据插件。我在“管理凭据”屏幕下配置了所有内容。现在，我希望 Subversion 插件能够自动使用这个凭证。但是，它没有这样做。它要求我再次输入凭据，而不是使用存储在凭据插件下的凭据。请确认我对 Credentials 插件的理解是否正确，或者我遗漏了什么。有没有可用的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-14T11:23:16.720

我知道这个回复可能有点晚了。SVN 插件 > 1.54 使用凭证插件。我相信 git 等也可以。如果您还使用工作 DSL，则 ID 将显示在“高级”选项卡下。请务必在添加凭据时进行设置，否则您将获得自动生成的 UUID，例如

```
scm {
  svn {
    location ('http://example.com/your/svn/repo') {
      credentials('TheValueEntered')
      directory('.')
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T22:54:29.177

您的理解可能在一段时间后是正确的，但还不是。

Credentials 插件相当新，Subversion 插件的更改日志 (https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin) 没有说明添加对 Credentials 插件的支持。

我不得不假设 Subversion 插件仍然继续自行管理凭据。

# c# - 如何计算和更改树视图宽度

> ID：11429900
> 
> 赞同：3
> 
> 时间：2012-07-11T09:46:44.800
> 
> 标签：c#, winforms, user-interface, treeview

如何让`TreeView`扩展节点时改变它的宽度，使节点的标签完全显示出来。

首先我设置`DrawMode = OwnerDrawAll;`

然后处理事件`DrawNode`andin处理程序

```
e.DrawDefault = true;
currentWith_ = Math.Max(currentWith_, e.Node.Bounds.Right); 
```

然后在`AfterExpand`设置控件。但不是每次都有效。有时 with 没有更改或更改不正确。

如何纠正这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T10:08:45.947

试试这个，它成功了：

```
private void treeViewAfterExpand(object sender, TreeViewEventArgs e)
{
    int maxRight = treeView.ClientSize.Width;

    if(e.Node.Nodes != null)
        foreach (TreeNode node in e.Node.Nodes)
        {
            maxRight = Math.Max(maxRight, node.Bounds.Right);
        }

    treeView.ClientSize = new Size(maxRight, treeView.ClientSize.Height);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-28T22:16:13.593

Ria 给出的解决方案有效，但在构造函数中扩展时无效。扩展加载事件而不是构造函数使其工作。（无法评论，因为低于 50 分。）

# windows-phone-7 - Azure CloudOperationResponse 响应问题

> ID：11429901
> 
> 赞同：0
> 
> 时间：2012-07-11T09:46:48.510
> 
> 标签：windows-phone-7, azure, windows-phone-7.1

我正在尝试从队列中弹出消息。（Windows Phone 7）但不幸的是在`CloudOperationResponse<CloudQueueMessage> response`对象内部出现这样的错误：

`Value for one of the query parameters specified in the request URI is invalid. RequestId:75c52c29-a325-44a4-9cc4-3203fb99fb47 Time:2012-07-11T09:43:56.6042490Z`

![在此处输入图像描述](../Images/a13e77af6c7e0b47228521c95e0889d6.png)

任何人有任何想法为什么会发生？先感谢您！

```
 public StorageInitializer()
    {
           var resolver = new CloudStorageClientResolverAccountAndKey(
           new StorageCredentialsAccountAndKey("ACCNAME", "KEY"),
           new Uri("http://ACCNAME.blob.core.windows.net"),
           new Uri("http://ACCNAME.queue.core.windows.net"),
           new Uri("http://ACCNAME.table.core.windows.net"),
           Deployment.Current.Dispatcher);

           CloudStorageContext.Current.Resolver = resolver;
    }

    public void FetchMsg()
    {

        CloudQueueClient queueClient = CloudStorageContext.Current.Resolver.CreateCloudQueueClient() as CloudQueueClient;
        var queue = queueClient.GetQueueReference("queueout");

        queue.GetMessage(TimeSpan.FromSeconds(1), OnMessageReturned);

    }

    private void OnMessageReturned(CloudOperationResponse<CloudQueueMessage> response)
    { 
        string str = response.Response.AsString;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:08:01.483

我能够看到 WP7.1 Emulator 的确切问题，这是我的调查：

使用 Desktop，队列中的 GetMessage 显示以下参数：

![在此处输入图像描述](../Images/4f1e55e200ad1974d8bc8abe07e711ee.png)

使用 WP7 模拟器，我看到了一些其他参数：

![在此处输入图像描述](../Images/15acd7fc6da7acf1290c50b4f3eb69ec.png)

错误表明 GetMessage 请求不正确，因此您的代码可以很好地收集消息，但调用 getMessage 的代码需要一些工作。如果你有权访问它，你肯定可以调试它来解决问题。

# android - Android ExpandableListView 错误

> ID：11429902
> 
> 赞同：0
> 
> 时间：2012-07-11T09:46:49.337
> 
> 标签：android, expandablelistview

我有以下侦听器，我重写了方法`onGroupExpand`：

```
list.setOnGroupExpandListener(new OnGroupExpandListener() { 

            @Override 
            public void onGroupExpand(int groupPosition) { 
                long groupId = adapter.getGroupId(groupPosition);
                Toast.makeText(getBaseContext(), "Group =  " + adapter.getGroupId(groupPosition), Toast.LENGTH_SHORT).show();
                Log.d(TAG, "Group expanded");
                View v = adapter.getGroupView((int) groupId, true, null, list);

                TextView txt = (TextView)v.findViewById(R.id.expandable_first_layer);
                Log.d(TAG, "txt: " + txt.getText());
                txt.setText("Tru-ru-ru");
                Log.d(TAG, "txt: " + txt.getText());
            } 
        }); 
```

我 `txt.getText()`第一次调用时看到了正确的文本。然后 `txt.getText()`在我的 LogCat 中的第二个之后，我看到了新文本。

但关键是它`ExpandableListView`不会改变它在那个特定项目中的文本。与在 onGroupExpand 中设置背景颜色相同。有人遇到过这个bug吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:10:46.327

在 getGroupView 方法的适配器类中尝试此操作检查列表的状态，即是否在 if 条件下展开或折叠，如果展开，您可以设置不同的颜色。查看下面的代码片段以获取更多信息

```
public View getGroupView(final int groupPosition, final boolean isExpanded, 
            View convertView, ViewGroup parentView)
    {

            convertView.setBackgroundResource(R.color.red);
            if(isExpanded){

            convertView.setBackgroundResource(R.color.blue);

            }

        return convertView;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:06:17.827

那么你需要通过膨胀正确的布局来获得convertview，否则它会给出异常

# android - NullPointerException：片段类中的 SetOnClickListener

> ID：11429904
> 
> 赞同：1
> 
> 时间：2012-07-11T09:46:51.583
> 
> 标签：android, fragment

在 Fragment 类中为 ImageView 添加 setOnClickListener 时遇到问题。由于 NullPointerException，当我单击 ImageView 时发生错误。

下面是我的代码：

```
public final class TestFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ImageView image = new ImageView(getActivity());
    image.setTag(mContent);
    image.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        HomeActivity h = new HomeActivity();
        String url = h.getEventUrl();

        Intent childClass = new Intent(getActivity(), HomeEventDetailActivity.class);

        childClass.putExtra("eventUrl",url);
        TabGroupActivity parentActivity = (TabGroupActivity)h.getParent();
        parentActivity.startChildActivity("Child_Main1", childClass);
    }
});
    imageManager.displayImage(mContent, image, R.drawable.icon);
    image.setScaleType(ScaleType.FIT_XY);

    LinearLayout layout = new LinearLayout(getActivity());
    layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    layout.setGravity(Gravity.CENTER);
    layout.addView(image);

    return layout;
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString(KEY_CONTENT, mContent);

    setUserVisibleHint(true);
}
} 
```

请帮忙！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T17:28:41.933

我认为问题出现在这一行：

```
ImageView image = new ImageView(getActivity()); 
```

不要将片段宿主活动作为参数（通过 getActivity()）传递给此构造函数，而是尝试传递在 onCreateView 方法末尾返回的布局变量。

```
ImageView image = new ImageView(layout); 
```

代码看起来像这样：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

LinearLayout layout = new LinearLayout(getActivity());
layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
layout.setGravity(Gravity.CENTER);

ImageView image = new ImageView(layout);
image.setTag(mContent);
image.setOnClickListener(new View.OnClickListener() {
public void onClick(View v) {
    HomeActivity h = new HomeActivity();
    String url = h.getEventUrl();

    Intent childClass = new Intent(getActivity(), HomeEventDetailActivity.class);

    childClass.putExtra("eventUrl",url);
    TabGroupActivity parentActivity = (TabGroupActivity)h.getParent();
    parentActivity.startChildActivity("Child_Main1", childClass);
}
});
imageManager.displayImage(mContent, image, R.drawable.icon);
image.setScaleType(ScaleType.FIT_XY);
layout.addView(image);
return layout; 
```

}

# iphone - 在 pushViewController 上禁用键盘动画？

> ID：11429905
> 
> 赞同：1
> 
> 时间：2012-07-11T09:46:54.023
> 
> 标签：iphone, ios, uikit, iphone-softkeyboard

是否可以禁用键盘动画，`pushViewController`以便键盘与屏幕的其余部分一起滑动（而不是在屏幕的其余部分滑动时向下滑动）？

我目前打电话给`[[self view] endEditing: YES]`它`- (void)viewWillDisappear:(BOOL)animated`导致键盘向下滑动。我不知道解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:17:28.700

你不能在 viewDidDisappear: 方法中调用那个方法吗？

# javascript - httprequest 在“外部获取”上失败

> ID：11429908
> 
> 赞同：2
> 
> 时间：2012-07-11T09:47:13.173
> 
> 标签：javascript, ajax, html, httprequest

我正在尝试制作一个获取图像并将其存储到我的设备的网络应用程序。然后它需要使用图片作为另一个页面的链接。

如果我在我的本地机器（网络服务）上尝试它，我会成功。但是当我把 i 放到我的域中（相同的代码+使用高级休息客户端测试）时，它失败了。

我尝试制作一个 appcache 文件，并在 NETWORK 下写入 * 或我的域名：

这是我的 httprequest ( **javascript** ) 代码：

```
var startUrl = "http://localhost:8080";

function getStuff(theUrl){
    startUrl = "http://mobilitycms.lector.dk:9090";
    alert(startUrl+theUrl);
    $(document).ready(function() {
        $.ajax({
            url: startUrl+theUrl,
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                alert('success');
                createMainMenu(data);

                alert('new cursor created:' + cursor);
            /* $.each(data.list, function(i, object) {
                    alert(i+"="+object);
                    var array = new Array();
                    for (property in object) {
                        var value = object[property];
                        alert(property + "=" + value); 
                    }
                });*/
            },
            error: function() {
                alert('boo!');
            },
            beforeSend: setHeader
        });
    });
}

function setHeader(xhr) {
    xhr.setRequestHeader('app', '1');
} 
```

**html**

```
 <div data-role="header">
            <a href="#" data-rel="back" data-role="button" ><img align="middle"src="images/back.png" alt="beskeder" vspace="2"/></a> 
            <h1><img onclick="getStuff('/product/5')" align="middle"src="images/main_header.png" alt="beskeder" vspace="2"/></h1>
    </div><!-- /header -->

    <div data-role="content" id="firstPageContent"> 
        <p>I'm first in the source order so I'm shown as the page.</p>      
        <p>View internal page called <a href="#second">second</a></p>
        <a href="#second" id="mapLink" name="mapLink"><img id="mapLinkImage" alt="a map which links to the mapPage" src="images/beskeder.png"/></a>
        <Button id="loadButton" onClick="load()"/>

    </div><!-- /content -->

</div><!-- /page --> 
```

为什么会失败？

附言。如果有人对这种“webapp”有一些好的指南/模式，那么它也是最受欢迎的，因为我是这个 js/webapp 开发的新手。

我当前的 RAW（高级休息客户端）响应：

```
{"data":null,"server":null,"list":[{"name":"Herre Briller","parent":-1,"id":1,"fileName":"men","childrenType":"GROUPS","sortOrder":0,"picture":"/content/picture/products/men","grCount":3,"prCount":0},{"name":"Dame Briller","parent":-1,"id":2,"fileName":"women","childrenType":"GROUPS","sortOrder":1,"picture":"/content/picture/products/women","grCount":3,"prCount":0},{"name":"Børne briller","parent":-1,"id":3,"fileName":"children","childrenType":"GROUPS","sortOrder":2,"picture":"/content/picture/products/children","grCount":1,"prCount":0}],"expires":7200000} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:52:30.453

如果你想做跨域请求，你需要使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。或者看看[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

如果一切都失败了，您也可以通过您的服务器代理请求......

对于 JSONP 和 CORS，您需要控制从中获取数据的远程服务器，因为您需要更改 JSONP 的响应格式或在 CORS 的情况下允许域的白名单。

JSONP 本质上向服务器传递了一个额外的参数，通常称为“回调”，以便服务器可以将 JSON 响应包装在此回调函数中。

例如

要求：`http://somedomain.com/get/user/data/?id=13&callback=someFunction`

回复：`someFunction({name:joe, lastname: soap});`

如果您使用 jQuery，您不会告诉它您要使用的回调函数的名称，它将动态创建一个回调函数，您需要做的就是让 $.ajax 请求知道您想要使用JSONP，它将非常透明地处理其余部分。甚至比使用 $.ajax（但配置较少）$.getJSON 更简单：

这是一个示例请求：

`$.getJSON(baseUrl+'categories?callback=?',{uid:uuid,lat:lat,lng:lng}, function(data){ //do something });`

此请求将要发出一个普通的 JSON 请求，但由于您在 url 中包含了一个 callback= ，它会自动将其转换为 JSOP 请求。

如果您无法访问远程服务器，那么我会说您需要通过您的服务器代理您的请求。如何设置取决于您使用的 Web 服务器。如果您使用的是 Apache，您可以查看 mod_proxy。

希望这可以帮助。

:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T16:03:49.877

如果您使用的是 appcache 文件，请确保您在 NETWORK 部分明确说明您的 ajax get 的域。我不确定我们那里的 HTML5 浏览器中的实现是否不同，但在我的情况下，需要显式黑名单才能允许我向外部域发出请求。

另外值得注意的是“缓存”的请求，也就是在网络部分中未明确指出域失败并在 chrome develoepr 工具/网络中显示“待处理”状态。Ajax 静默失败，在我的情况下，jQuery 没有触发错误处理程序。

# mysql - 更新 MySQL 中特定 ID 的最后一个条目

> ID：11429920
> 
> 赞同：2
> 
> 时间：2012-07-11T09:48:12.837
> 
> 标签：mysql, database

我有一个表`student_log`，一个表有多个记录`'rollno'`。

`'sno'`是 student_log 表的 auto_increment 索引。

假设我想为特定学生的最后（最近）条目更新特定字段的值（通过“rollno”查找），我该怎么做？我目前的方法不起作用。我正在这样做：

```
update student_log set timein=current_timestamp() where rollno='ST001' and 
sno = (select sno from student_log where rollno='ST001' order by sno desc limit 1); 
```

使用子查询，我试图检索学生的 rollno 匹配的最新记录的 sno。我正在尝试使用它来匹配 sno 与更新语句，这是行不通的。

我知道语法是正确的，但我认为这只是意味着 MySQL 不允许更新使用子查询。谢谢。问我是否遗漏了任何信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T09:56:14.427

```
UPDATE student_log
SET timein=current_timestamp()
WHERE rollno='ST001'
ORDER BY sno DESC
LIMIT 1 
```

**编辑**
测试了我的查询，是的，它是可能的，或者我在 OPs 表结构中错过了什么

```
mysql> UPDATE student_log
    -> SET timein=current_timestamp()
    -> WHERE rollno='ST001'
    -> ORDER BY sno DESC
    -> LIMIT 1;
Query OK, 1 row affected, 1 warning (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> SELECT * FROM student_log;
+-----+--------+---------------------+
| sno | rollno | timein              |
+-----+--------+---------------------+
|   1 | st001  | 0000-00-00 00:00:00 |
|   2 | st002  | 0000-00-00 00:00:00 |
|   3 | st001  | 2012-07-11 12:05:23 |
+-----+--------+---------------------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:58:26.087

尝试这个：：

```
update 
student_log set timein=current_timestamp() 

where sno in

(

Select sno from 
(
select sno from  student_log where rollno='ST001' order by sno desc limit 1
) tmp
); 
```

# jquery - 无法从数据库加载图像

> ID：11429925
> 
> 赞同：1
> 
> 时间：2012-07-11T09:48:41.163
> 
> 标签：jquery, ajax, uploading, handlers

我使用 ajaxFileUploader 和 2 个处理程序进行文件上传和下载。

ajaxFileUploader 代码：

```
 $.ajaxFileUpload
    (
        {
            url: 'AjaxFileUploader.ashx?user=' + userId,
            secureuri: false,
            fileElementId: 'uploadControl',
            dataType: 'json',
            data: '{}',
            success: function (mydata) {

                alert("Image Successfully Uploaded");

                $('#imgdefaultphoto').attr('src', 'ImageRetrieval.ashx?user=' + userId);
            },
            error: function () {

            }
        }
    ) 
```

AjaxFileUploader.ashx 代码：

```
 public void ProcessRequest(HttpContext context)
    {

        if (context.Request.Files.Count > 0)
        {
            string path = context.Server.MapPath("~/Temp");
            if (!Directory.Exists(path))
                Directory.CreateDirectory(path);

            var file = context.Request.Files[0];

            string userid = context.Request.QueryString["user"];

            string fileName;

            if (HttpContext.Current.Request.Browser.Browser.ToUpper() == "IE")
            {
                string[] files = file.FileName.Split(new char[] { '\\' });
                fileName = files[files.Length - 1];
            }
            else
            {
                fileName = file.FileName;
            }
            string fileType = file.ContentType;
            string strFileName = fileName;

            int filelength = file.ContentLength;
            byte[] imagebytes = new byte[filelength];
            file.InputStream.Read(imagebytes, 0, filelength);

            DBAccess dbacc = new DBAccess();
            dbacc.saveImage(imagebytes, userid);

            var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
            var result = new { name = file.FileName };
            context.Response.Write(serializer.Serialize(result));

        } 
```

ImageRetrieval.ashx 代码：

```
 public void ProcessRequest(HttpContext context)
    {

        string userId = HttpContext.Current.Request.QueryString["user"];

        if (userId != null)
        {
            DBAccess dbacc = new DBAccess();

            DataTable dt = dbacc.getImage(userId);

            context.Response.ContentType = "image/png";

            context.Response.BinaryWrite((byte[])dt.Rows[0]["UserImage"]);

            context.Response.Flush();
        }
        else
        {
            context.Response.Write("No Image Found");
        }
    } 
```

图像正在数据库中上传，但是当我尝试加载它并将其附加到我的 img 标签时，图像标签显示损坏的图像。我不知道是什么原因导致或似乎是问题所在。任何帮助将不胜感激。谢谢！

编辑了一些行。仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:00:37.007

根据您的最后一句话，试试这个：

```
var img = dt.Rows[0]["UserImage"];
byte[] imagebytes = img.ToArray();
context.Response.BinaryWrite(imagebytes); 
```

或者

```
static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

# java - java中的音频到文本转换

> ID：11429928
> 
> 赞同：1
> 
> 时间：2012-07-11T09:48:47.357
> 
> 标签：java, audio

我目前正在从事一个从多媒体数据库中检索多媒体数据的项目。谁能建议我一种将音频文件转换为文本格式的方法，这将极大地帮助数据检索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:53:58.337

哎呀，我大约一年前做过这个，不太记得我用了什么，但是一个快速的谷歌提出了这个

[http://freetts.sourceforge.net/docs/index.php](http://freetts.sourceforge.net/docs/index.php)

# jquery - jquery 图片库淡入淡出

> ID：11429929
> 
> 赞同：0
> 
> 时间：2012-07-11T09:48:49.367
> 
> 标签：jquery, fadein

有一个烦人的问题，似乎无法纠正......

以下将淡出并显示图像，然后回调将删除图像并插入一个新图像，在加载新图像时它应该淡入...新图片..

```
 if($('#gallery-image img').css('opacity') == 1){
        $('#gallery-image').children('img').fadeOut(sawdays.gallery.transitionTime , function(){
            $(this).remove();
            $('#gallery-image').append(newImg);
            $('#gallery-image img').load(function(){
                $(this).fadeIn(sawdays.gallery.transitionTime);
            });
        });
    } 
```

我想知道是否有人能看到我做错了什么......我已经在这上面花了太多时间：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:55:25.020

尝试这个：

```
 if ( $('#gallery-image img').css('opacity') == 1 ) {
        $('#gallery-image').find('img').fadeOut(sawdays.gallery.transitionTime , function(){
           $(this).replaceWith(newImg);
           $('#gallery-image img').fadeIn(sawdays.gallery.transitionTime);
        });
  } 
```

# google-bigquery - 带有 bq + 后端错误的慢速插入

> ID：11429930
> 
> 赞同：0
> 
> 时间：2012-07-11T09:48:52.097
> 
> 标签：google-bigquery

我们在将数据插入 BigQuery 时遇到问题。我们位于荷兰。

**命令：**
adm@la478 ads_csv $ time bq load --debug_mode --skip_leading_rows 1 --max_bad_records 100 --project_id 197553342340 ad_monitoring.ad ad_bd9a6230-2d34-4cf1-8553-04d9c2f8c52b.csv.gz
BigQuery 加载操作错误：后端错误

**指标：**
真实 4m35.997s
用户 0m0.963s
sys 0m0.169s

**文件大小：**
-rw-rw-rw- 1 adm admin 39M Jul 10 17:02 ad_bd9a6230-2d34-4cf1-8553-04d9c2f8c52b.csv.gz
200MB 未压缩

你能建议使用做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:04:35.940

我正在我们的后端调查这个问题，但如果你通过谷歌存储进行导入，你可能会有更好的运气（尤其是来自欧洲）。如果运行`gsutil cp ad_monitoring.ad ad_bd9a6230-2d34-4cf1-8553-04d9c2f8c52b.csv.gz gs://your_bucket/ad_monitoring.ad ad_bd9a6230-2d34-4cf1-8553-04d9c2f8c52b.csv.gz`，则可以将 bq 命令行更改为：

`bq load --debug_mode --skip_leading_rows 1 --max_bad_records 100 --project_id 197553342340 ad_monitoring.ad gs://your_bucket/ad_bd9a6230-2d34-4cf1-8553-04d9c2f8c52b.csv.gz`

我正在我们的日志中查找您的作业，看起来最近有一堆加载作业因“TOO_MANY_ERRORS”而失败。如果您使用`bq ls -j`，`bq show -j <job_id>`您可以获得有关这些的更多信息。

# java - 展开时下拉不聚焦选定的值

> ID：11429934
> 
> 赞同：0
> 
> 时间：2012-07-11T09:49:08.020
> 
> 标签：java, web-applications, jsf-2, primefaces

我在主要面孔 3 中创建了一个下拉菜单。当我展开下拉菜单时，它会专注于第一个值/选项。考虑选择值在列表中倒数第二个并通过滚动选择的情况。现在，如果您想更改它并单击下拉列表，则列表的第一项将成为焦点，您将不得不再次滚动整个列表。而简单的 HTML 下拉列表不执行此操作。

我的代码如下：

```
<p:selectOneMenu id="currency" value="#{createPayment.defaultCurrency}" widgetVar="currency">  
            <f:selectItems value="#{createPayment.currenciesList}"/>
</p:selectOneMenu> 
```

问候，阿萨德

# xml - 如何将 XML / JSON 文件转换为 Lotus Notes 中的文档？

> ID：11429936
> 
> 赞同：0
> 
> 时间：2012-07-11T09:49:15.777
> 
> 标签：xml, json, xpages

我有一个包含很多公司数据的大型 XML 文件，我喜欢将此 XML 文件转换为我的笔记数据库中的文档。我想要每家公司一份文件。最简单的方法是什么？我下载了一个名为 Oxygen 的工具来读取数据，并且能够创建 XML 文件的 JSON 文件。我认为 JSON 可能更容易，但我不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:22:14.343

这不是你所要求的，但它可能是一个替代方案。我不知道有任何工具或任何内置的东西会采用 XML 并从中生成多米诺文档。然而，下面的链接通过使用服务器端 javascript 来提取 XML，最终结果将其显示在 XPages 数据表控件中。

可能有帮助：

[http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=3939DB27A4536248852578CB00667264](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=3939DB27A4536248852578CB00667264)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:08:25.843

Martin，其实最简单的方法是使用sax解析器来读取文件（你说它很大）。SAX 在 LotusScript 和 Java 中可用。它将为每个元素（和结尾）触发事件，因此您只需要在开始元素发生时创建一个新文档并在完成时关闭它。两种语言都很直截了当。

这是Java[教程或](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)[这里](http://totheriver.com/learn/xml/xmltutorial.html#6.1.2)只需将system.out.println替换为doc.replaceitemvalue

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T18:00:12.297

对于阅读 XML，我使用 www.nsftools.com/tips/XmlNodeReader/ 它可以快速引入节点。读取节点后，您可以将值放入 NotesDocument。

我发现创建 JSON 的最佳方法是通过[http://www.openntf.org/internal/home.nsf/release.xsp?action=openDocument&documentId=543656F34C821A2A862576650054BDC2](http://www.openntf.org/internal/home.nsf/release.xsp?action=openDocument&documentId=543656F34C821A2A862576650054BDC2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T18:41:24.960

如果您收到一个 XML 文件，我不会花时间将其转换为 JSON，因为它有自己的缺点和转换后可能会遇到的差异。

如前所述，您应该使用 saxparser 来解析内容。如果你把它包装成一个很好的工厂模式，你以后可以很容易地扩展它。

例如

```
public class XmlDocumentConverterFactory(){
   public static AbstractXMLTDocumentConverter getConverter(String form) throws unsupportedDocumentTypeException {

 // get sax parser
      AbstractDocumentConverter converter = null;

     if("Company".equals(form)){
       converter =  new CompanyDocumentConverter();
     }else if("Contact".equals(form)){
       converter = new ContactDocumentConverter();
     }else}
       throw unsupportedDocumentTypeException("A Document of type "+form+" is not supported");
     }

     SaxParser parser = SaxParser.getInstance();
     converter.setParser(parser);    
     return converter;
   }
}

class abstractXMLToDocumentConverter{
  protected SaxParser parserInstance = null;

  public NotesDocument parseDocument(XMLDocument doc);
  public void setParser(SaxParser instance){
     this.parserInstance = instance;
   }

}

// these classes should implement the eventhandlers used by the parser
// they also need to implement the only method from their parent.
// when you want to import an xml document simply call factory.getConverter(yourform).parse(xml). 
class ContactDocumentConverter extends AbstractDocumentConverter(){}
class CompanyDocumentConverter extends AbstractDocumentConverter(){} 
```

这样，如果您将来需要再次执行相同的操作，您只需向工厂添加额外的 else 语句并创建一个新的 DocumentConverter 类。非常简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T16:49:42.507

将 xml 或 json 文件（不确定 json 是否可以工作）放在 domino 服务器的 html 部分的根目录中是否是一个想法。

并使用某种提要阅读器来创建文档。您将需要一个包含字段的表单或在您的 xml 中更改它们，以便您可以使用已有的表单。

我假设您想要现有应用程序中的数据。

我手头没有任何代码，抱歉。

但西蒙有一个很好的建议。史蒂文斯建议的教程值得研究。

希望能帮助到你。就我个人而言，我很想知道你是否成功了，当然还有你是如何做到的。

# python - Python，Tkinter：带有条目小部件的画布上的滚动条

> ID：11429947
> 
> 赞同：0
> 
> 时间：2012-07-11T09:49:54.853
> 
> 标签：python, tkinter

编辑：对不起，在我问之前我应该​​搜索更多，因为我现在找到了解决我的问题的方法。链接：[在 Tkinter 中为一组小部件添加滚动条](https://stackoverflow.com/questions/3085696/adding-a-scrollbar-to-a-grid-of-widgets-in-tkinter)

我正在尝试将画布添加到 Tkinter GUI，其中带有来自文件的文本的条目小部件被添加到网格中。文件中的文本量往往很大，所以我需要添加一个滚动条。

条目小部件以它们应该的方式添加到画布中，并且我已经独立测试了滚动条，它工作正常 - 除非添加了条目小部件。当我这样做时，滚动条消失了。

这是画布和滚动条的代码：

```
 groupfr = Frame(self.labelll, width = 200, height = 1000)
    groupfr.pack_propagate(0)
    groupfr.pack(fill='both', side='left')

    canvasgroup = Pmw.Group(groupfr, tag_text= 'canvasgroup')   
    canvasgroup.pack(fill = 'both', expand = 1, padx = 1, pady = 1)

    self.canvas = Tkinter.Canvas(canvasgroup.interior(), width = 200,
                                 height = 1000, bg = 'white')

    self.canvas.config(scrollregion=(0,0,20,1000))
    self.sbar = Tkinter.Scrollbar(self.canvas)
    self.sbar.config(command=self.canvas.yview)

    self.canvas.config(yscrollcommand=self.sbar.set)

    self.sbar.pack(side='right', fill='y')

    self.canvas.pack_propagate(0)
    self.canvas.pack(side = 'left', fill = 'y', expand = 'no') 
```

我为糟糕的代码道歉。然而，这才是真正的问题开始的地方：

```
for items in linematch:
    items = items.split('=')
    list_of_lists.append(items)

    columncount = 0
    rowcount = 0

    for items in list_of_lists:
        rowcount = rowcount + 1
        columncount = 0

        for idx, (words) in enumerate(zip(items)):
            self.canvas.pack_propagate(0)
            colcnt = colcnt + 1
            idx = Tkinter.Entry(self.canvas)
            idx.grid(row=rowcount, column=columncount)
            idx.insert(0, words) 
```

该代码接受文件输入并将每一行变成一个包含两个项目的列表，该列表本身附加到另一个列表中。这个列表列表用于像这样放入条目小部件中，每个单词（和翻译）都在它们自己的条目小部件中：

```
word translation
word translation 
```

等等（不知道这个信息有多重要。）

有没有人知道为什么添加条目小部件时滚动条会消失？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:27:28.560

您必须使用 canvas`create_window`方法将小部件添加到画布。如果您使用它们`pack`，`grid`它们将不会成为画布的一部分，因此不会受到滚动条的影响。

# tomcat7 - VirtualWebappLoader - 在生产中使用它是一个不错的选择吗？

> ID：11429948
> 
> 赞同：9
> 
> 时间：2012-07-11T09:49:57.390
> 
> 标签：tomcat7

目前，我们的 Ops 团队必须使用特定于实例的配置重新打包我们发布的 war 文件。他们要求我们将配置文件（log4j.properties、environment.properties、jrf.properties、quartz.properties）外部化，使其超出war 文件的大小。这将使部署更容易。

我们使用的是 Tomcat 7，而 Tomcat 7 中的 VirtualWebappLoader 看起来是一个非常酷的功能，可以将配置外部化到 war 文件之外。

Tomcat 6 文档明确指出“这并不意味着用于生产。它旨在简化使用 IDE 的开发，而无需在 WEB-INF/lib 中完全重新发布 jar”？

Tomcat 7 文档没有这样说。

知道 VirtualWebappLoader 功能是否可以在生产环境中使用吗？

谢谢，阿希什

[http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Virtual_webapp](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Virtual_webapp)

[http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/loader/VirtualWebappLoader.html](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/loader/VirtualWebappLoader.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T16:34:17.503

我知道这个很旧，但由于我只是在调查将 VirtualWebAppLoader 用于生产服务器并看到其他与 Stackoverflow 相关的讨论，所以我想添加这个答案。

[正如此处](https://issues.apache.org/bugzilla/show_bug.cgi?id=55478)所报告的，至少从 Tomcat 6.0.38+（以及 Tomcat 7）开始，此警告不再存在。

摘录：“由于不再给出此限制并且已从 Tomcat 7 JavaDocs 中删除，因此也应从版本 6 中删除此错误警告。”

# iphone - 在以下方法中释放对象的正确方法是什么？

> ID：11429949
> 
> 赞同：-3
> 
> 时间：2012-07-11T09:49:58.597
> 
> 标签：iphone, ios, ipad

任何人都可以告诉哪一个是以下方法中最好的方法吗？

```
@implementation Person
@synthesize name;
- (void)dealloc { [self.name release]; [super dealloc]; }
@end

 @implementation Person
    @synthesize name;
    - (void)dealloc { [name release]; [super dealloc]; }
    @end

@implementation Person
@synthesize name;
- (void)dealloc { [name release]; name = nil;[super dealloc]; }
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:05:48.040

那么第一个肯定是错误的：

[（来自 Apple 的文档）](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html)

> **不要在初始化方法和 dealloc 中使用访问器方法**。唯一不应该使用访问器方法来设置实例变量的地方是初始化方法和 dealloc。

* * *

现在第二个是 Apple 在他们的示例应用程序中使用的。

* * *

在我看来，虽然最后一个是（可能）最好的，因为通过将指针设置为`nil`确保对（已释放）指针的任何调用都只会将消息转发到`nil`（这是安全的，对已释放对象的调用不是）。还要记住，如果属性被定义为`retain`设置`nil`也将调用`release`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:02:13.040

这个最适合我

```
@implementation Person
@synthesize name;

-(void)dealloc { 
   self.name = nil; 
   [super dealloc]; 
}
@end 
```

你的第一个错错错了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:11:08.407

对于非 ARC 版本，第三个是最好的，因为它通过将发布的变量指向`nil`.

但根据 Apple 的建议，请使用 ARC 来构建项目。

来自 APPLE 的文档

> 在自动引用计数或 ARC 中，系统使用与 MRR 相同的引用计数系统，但它会在编译时为您插入适当的内存管理方法调用。**强烈建议您将 ARC 用于新项目**。如果您使用 ARC，通常不需要了解本文档中描述的底层实现，尽管它在某些情况下可能会有所帮助。

# php - 我希望用户填写的文本框在她返回后再次填写

> ID：11429951
> 
> 赞同：0
> 
> 时间：2012-07-11T09:49:59.540
> 
> 标签：php

我正在寻找答案或解决这个问题的想法..

我有一个要填写的表格，提交后代码检查是否有空的文本框，它会打印一条错误消息，但是当它返回表单页面时，所有以前的用户输入都将消失，然后他必须再次填写它们。 . 我相信这很烦人！

我怎样才能保留条目..我想要我简短的解决方案，因为我有这么多表格和这么多的文件。

你可以检查我到目前为止的工作：

这是检查 formExcution.php

```
 if(    $jobn==""||$jobc==""||$salaryn==""||$salaryc==""||$transportn||$transportc==""||$residencen     ==""||$residencec==""||$benifitn==""||$benifitc==""||$packagen=="")
  {
 header("location: editsalaryform.php?msg=empty");
    exit();
        } 
```

并在表单页面中显示消息：

```
 <?php 
        if(isset($_GET['msg'])){
       print "<h4 style='color:#700000;'> you have to fill all the fildes   </h4>";}
       ?> 
```

谢谢 ，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:23:28.057

CodeIgniter PHP 框架对此有一些支持，请查看下面的链接

[http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

另请查看本教程，它有很大帮助

[http://gazpo.com/2011/07/codeigniter-jquery-form-validation/](http://gazpo.com/2011/07/codeigniter-jquery-form-validation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:01:58.840

首先，使用JS可以检查某个字段是否被填充。此外，如果您想验证另一个参数下的字段中的内容，以防用户必须重新填写一些文件，您总是发布**填写的表单**并让用户编辑它，例如：

```
if(isValid(....)) {
 .....
} else { 
 echo "<input type="text" name="123" value='{$notValidContent}'" ; 
} 
```

假设 $notValidContent 是电子邮件字段的内容，您发现用户没有正确填写。然后上面的代码行回显了用户在字段中填写的信息。您可以使用此方法发布用户在表单中填写的任何数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:11:27.840

您可以使用 javascript 验证，因此当用户提交您的表单时，您不需要刷新整个页面。但是进行服务器端验证也是明智之举，因此您不妨使用 php 会话来存储表单字段的值：

```
$_SESSION['jobn'] = $jobn 
```

并在重定向页面上回显会话：

```
<input type="text" name="jobn" value="<?php echo $_SESSION['jobn']; ?>"/> 
```

只需设置：

```
session.auto_start = 1 
```

在 php.ini 文件中，因此您无需执行以下操作：

```
session_start() 
```

在您需要使用会话的每个页面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T10:12:45.447

您可以通过将所有值存储到会话或将 $_POST['name'] 回显到每个输入来解决它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T10:13:49.073

例如，您有这样的表格：

```
<form method="post" action="index.php">
    <input name="username" placeholder="username"/>
    <input type="submit" value="Kill user"/>
</form> 
```

如果用户名不存在，你想保存它。因此，在同一页面中您更改并添加以下内容：

```
<?php
    $username = "";
    if (!empty($_GET["u"]))
    {
        $username = $_GET["u"];
    }
?>
<form method="post" action="index.php">
    <input name="username" placeholder="username" value="<?echo "$username"?>"/>
    <input type="submit" value="Kill user"/>
</form> 
```

在 index.php 中，您检索用户名并将其发送到表单页面，当它没有以这种格式传递时。

所以你在 index.php 中添加这样的东西：

```
<?
    if (!empty($_POST["username"] && !empty(Protected[$_POST["username"]]))
    {
        header("Location: http://sitename.com/kill.php?x=2&u=".$_POST["username"])
    }
    else
    {
        // Kill the user
    }
?> 
```

在上面的代码中，我还告诉页面说错误 2（用户受到保护等）

[在这里](http://cp.neoplaygrounds.com?x=3&u=qaisjp&em=press_submit@now.com#toregister)查看一个示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-14T07:39:09.487

谢谢大家..它现在工作正常..！我只使用了 jQuery 库中的这个 ..!!

```
 <script>
         $(document).ready(function(){
          $("#form1").validate();
           });
           </script> 
```

真的非常感谢你们！

# php - 在 js 文件中包含 php

> ID：11429952
> 
> 赞同：1
> 
> 时间：2012-07-11T09:50:00.433
> 
> 标签：php, javascript, include

> **可能重复：**
> [通过 PHP 解析 JavaScript 文件](https://stackoverflow.com/questions/3943198/parse-a-javascript-file-through-php)

我在 javascript 中有一些很长的字符串变量，我在 .js 文件中实例化了它们，这样我就可以在多个文件中使用它们，而且它不会因为超长而混淆页面。但是，我想将一些 php 回显到 .js 文件中（这样我就可以使用我的 php 中指定的文件路径）并将其放入变量中。

我知道，如果它在一个普通的 html 页面中，我可以这样做`<?php echo "foo"; ?>`并且它会正常工作。但是，在 js 文件中它似乎忽略了它。js 文件当前实例化了一个变量和一个存储 html 表单的关联数组，因此我可以根据一些用户输入将它们放在页面上。

我需要将 php 文件路径回显到表单的操作部分。这样做的原因是，如果我回去修改我的代码，我只需要更改一次文件路径。但是，js 文件要么将实际文本 () 粘贴在我的变量中，要么不会加载表单。

任何帮助将不胜感激，如果您需要更多信息，请随时询问。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T09:55:38.580

将您的 javascript 文件的文件扩展名更改为 .php 并使用该文件代替示例

```
<script type="text/javascript" src="test.php"></script> 
```

还使用在文件顶部设置正确的标题

```
<?php
    header("Content-type: text/javascript");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:59:06.767

在 .htaccess 文件中将您的 js 文件强制键入为 php 。
像这样的东西，

```
<Files filename.js>
SetHandler application/x-httpd-php
ForceType application/x-httpd-php
</files> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:03:59.843

它可能会帮助你 1\. 制作 .inc 或 php 文件 2\. 定义类和函数 3\. 在 php 函数中编写 js

```
<?php
   class abc
   {
      public function sum()
      {
?>
        //your js here
<?php

      }

}
?> 
```

1.  将此文件包含在您所需的文件中
2.  创建对象并调用函数

# c# - 从另一台计算机发送 MSMQ 消息

> ID：11429955
> 
> 赞同：4
> 
> 时间：2012-07-11T09:50:22.923
> 
> 标签：c#, .net, msmq, messaging

我有一个将 MSMQ 消息发送到远程机器的程序。
这工作正常。

但是，在调试期间，我们将在许多不同的机器上运行程序，并且在远程服务器上接收到消息时出现问题，因为没有为我们的开发机器设置映射等。

我想做的是能够指定一台机器来发送 MSMQ 消息；具有所需映射的一个，因此远程机器将正确接收消息。

目前我使用此路径创建一个队列：`FormatName:DIRECT=http://the.remote.machine.co.uk/msmq/frommycompany`.

然后我通过创建消息对象并在事务中发送它们来发送消息。

**如何将消息从运行程序的机器以外的机器发送到远程机器，以便远程机器可以正确接收消息？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:57:07.797

如果我正确理解了这个问题，我建议使用充当路由器的服务。

您可能希望使用**WCF 服务**，该服务首先由您的开发机器上的所有客户端调用，然后充当将消息发送到目标机器的唯一客户端。WCF 非常适合使用内置功能将消息发送到队列中。

或者 - 或组合 - 您可以考虑使用一些消息传递框架，例如[NServiceBus](http://docs.particular.net/nservicebus/architecture/nservicebus-and-wcf)，使您使用 MSMQ 的工作更加轻松。

NServiceBus 为您提供了很大的灵活性来配置您的消息应该去哪里以及应该订阅它们的人。大多数这可以简单地在应用程序配置文件中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:24:28.617

如果我理解您想要从机器一发送到机器 2 上的队列的问题。鉴于这是您想要做的尝试这个：

```
 System.Messaging.Message msg = new System.Messaging.Message();
        msg.Body = "This is a test message";
        msg.Label = "Test Message";
        msg.Formatter = new ActiveXMessageFormatter();

        MessageQueue queue = new MessageQueue("FormatName:DIRECT=OS:machine2\\Private$\\recievingQueue");

        queue.Send(msg); 
```

# javascript - 带有太多多边形的谷歌地图会导致 iOS 崩溃

> ID：11429959
> 
> 赞同：1
> 
> 时间：2012-07-11T09:50:32.053
> 
> 标签：javascript, ios, google-maps-api-3, polygons, google-maps-mobile

我有一个包含 400 多个多边形的 Google 地图，这些多边形由 40.000 多个纬度/经度坐标组成。这些都是荷兰自治市，结果可以在这里看到：http: [//silktool.com/maptest.php](http://silktool.com/maptest.php)

它在台式机上运行良好（以 2.5MB / 500Kb gzipped 加载有点慢），但是在 iOS 设备上打开 url 时，它会导致 Mobile Safari 崩溃（在 Chrome for iOS 中它可以工作）。

我怀疑这是因为它只是太多的代码或多边形。当我只加载一半的多边形时，Mobile Safari 不会崩溃。

我使用以下 Javastipt 加载每个多边形：

```
var city1 = new google.maps.Polygon({
  paths: [
    new google.maps.LatLng(53.0873209365,6.79015076682),
    …many many latlng coordinates… 
    new google.maps.LatLng(53.0716361297,6.81423099069),
    new google.maps.LatLng(53.0873209365,6.79015076682)
  ],
  strokeColor: "#fff",
  strokeOpacity: 0.5,
  strokeWeight: 1,
  fillColor: "rgb(60,255,160)",
  fillOpacity: 0.7
});

var city2 = new google.maps.Polygon({
  paths: [
    new google.maps.LatLng(53.0873209365,6.79015076682),
    …many many latlng coordinates… 
    new google.maps.LatLng(53.0716361297,6.81423099069),
    new google.maps.LatLng(53.0873209365,6.79015076682)
  ],
  strokeColor: "#fff",
  strokeOpacity: 0.5,
  strokeWeight: 1,
  fillColor: "rgb(60,255,160)",
  fillOpacity: 0.7
}); 
```

我想让代码在 iOS 上不会崩溃，想知道该怎么做？

我想了几个选择，但我不知道它们是否可行：

*   使代码更高效/紧凑
*   不要使用谷歌地图，但例如带有平滑选项的 Leaflet 可以简化不同缩放级别的多边形（http://leaflet.cloudmade.com/reference.html#polyline-options）
*   将坐标放入 Javascript 数组中（它们现在位于 PHP 数组中，并由此生成 javascript）。
*   更多的选择？

我不知道该选择哪个选项，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:16:09.860

您也可以尝试使用[google.maps.KmlLayer](https://developers.google.com/maps/documentation/javascript/reference?hl=ru#KmlLayer)。

> 您是否考虑过使用 Google Maps API v3 的新 KmlLayer？本质上，这里发生的事情是 Google 充当了获取任何公开可用的 KML 层的代理，并自动将其分解为图块。这个平铺层也可以响应点击事件，与矢量图层的响应方式非常相似。（[链接](https://gis.stackexchange.com/a/2147)）

请参阅[https://gis.stackexchange.com/](https://gis.stackexchange.com/)上的[类似线程](https://gis.stackexchange.com/questions/2116/how-do-i-display-geojson-polygons-on-a-map)。

# java - 使用 iText 在 PDF 上无法正确打印数据

> ID：11429964
> 
> 赞同：0
> 
> 时间：2012-07-11T09:50:38.420
> 
> 标签：java, pdf, xhtml, itext

这是我的 XHTML：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<META content="text/html; charset=UTF-8" http-equiv="Content-Type" />
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
<table cellspacing="0" cellpadding="0" align="Center"
    style="table-layout: fixed; word-wrap: break-word; width: 97%"
    bordercolor="4f81BD" border="1">
    <tbody>
        <tr style="color: white;">
            <td height="31" bgcolor="#4f81BD"
                style="border-left: none; border-bottom: none; border-Right: none; border-top: none; border-width: 1px"
                align="Center"><span style="font-weight: Bold">Type</span></td>
            <td bgcolor="#4f81BD"
                style="border-left: none; border-bottom: none; border-Right: none; border-top: none; border-width: 1px"
                align="Center"><span style="font-weight: Bold">Custodian
            Name</span></td>
            <td bgcolor="#4f81BD"
                style="border-left: none; border-bottom: none; border-Right: none; border-top: none; border-width: 1px"
                align="Center"><span style="font-weight: Bold">Relationship
            to Owner</span></td>
            <td bgcolor="#4f81BD"
                style="border-left: none; border-bottom: none; border-Right: none; border-top: none; border-width: 1px"
                align="Center"><span style="font-weight: Bold">Percent</span></td>
            <td bgcolor="#4f81BD"
                style="border-left: none; border-bottom: none; border-Right: none; border-top: none; border-width: 1px"
                align="Center"><span style="font-weight: Bold">Minor
            Name</span></td>
            <td bgcolor="#4f81BD"
                style="border-left: none; border-bottom: none; border-Right: none; border-top: none; border-width: 1px"
                align="Center"><span style="font-weight: Bold">For the
            State of</span></td>
        </tr>
        <tr style="font-family: SansSerif;" align="center">
            <td
                style="border-left: none; border-bottom: solid; border-top: none; border-Right: none; border-width: 1px;"
                align="Center"><span style="font-weight: Bold">
            UTMA/UGMA</span></td>
            <td
                style="border-left: none; border-bottom: solid; border-top: none; border-Right: none; border-width: 1px;"
                align="Center"><span>QQQQQQQQQQQQQQQQQQQQQQQQQ
            MMMMMMMMMMMMMMMMMMMMMMMMMM</span></td>
            <td
                style="border-left: none; border-bottom: solid; border-top: none; border-Right: none; border-width: 1px;"
                align="Center"><span>Common Law Husband</span></td>
            <td
                style="border-left: none; border-bottom: solid; border-top: none; border-Right: none; border-width: 1px;"
                align="Center"><span>15%</span></td>
            <td
                style="border-left: solid; border-bottom: solid; border-top: none; border-Right: solid; border-width: 1px;"
                align="Center">RRRRRRRRRRRRRRRRRRRRRRRR BBBBBBBBBBBBBBBBBBBBBB</td>
            <td
                style="border-left: none; border-bottom: solid; border-top: none; border-Right: none; border-width: 1px;"
                align="Center"><span>DC</span></td>
        </tr>
    </tbody>
</table>
</body>
</html> 
```

当我尝试使用此代码将其转换为 PDF 时：

```
 import java.io.File;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.io.OutputStream;
    import org.xhtmlrenderer.pdf.ITextRenderer;
    import com.lowagie.text.DocumentException;

    public class Practice {
        public static void main(String[] args) throws 
IOException, DocumentException {
            String inputFile = "sample.xhtml";
            String url = new File(inputFile).toURI().toURL().toString();
            String outputFile = "firstdoc.pdf";
            OutputStream os = new FileOutputStream(outputFile);
            ITextRenderer renderer = new ITextRenderer();
            renderer.setDocument(url);
            renderer.layout();
            renderer.createPDF(os);

            os.close();
        }
    } 
```

它给了我这个输出：

![在此处输入图像描述](../Images/f4191c4c85e16f6537de8a663a4b3b08.png)

但是当我在浏览器中打开 XHTML 时，它是这样的：

![在此处输入图像描述](../Images/9abe3d07002fab32a83bc18d041c3617.png)

我没有得到问题。我的主要目标是打破给定空间中的单词。我使用 iText 2.0.8 并且我不能使用其他 API，因为我的公司不允许这样做。任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:12:54.137

您正在使用 Flying Saucer (org.xhtmlrenderer.pdf.ITextRenderer)，这是一个将 XHTML+CSS 转换为 PDF 的库。它使用 iText 生成 PDF。

如果您的问题在于 CSS 支持，您应该查看 Flying Saucer。XHTML 和 CSS 渲染在使用 iText 将渲染内容转换为 PDF 之前完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:18:00.990

您使用的是几年前的 iText 版本。你为什么不使用当前版本，看看问题是否已经解决？在此期间，他们完成了大量的工作，将 HTML 和 XML 转换为 PDF（反之亦然）。事实上，我想说，这是他们所做的主要工作。

# php - 在没有自定义字段类型的情况下使用 DataTransformer 会出现预期 FormFieldType 的错误

> ID：11429967
> 
> 赞同：0
> 
> 时间：2012-07-11T09:50:53.080
> 
> 标签：php, symfony-forms, symfony-2.1

我需要一个接受字符串或 DateTime 对象作为输入的自定义字段。经过一番讨论，我决定 DataTransformers 是要走的路。我按照[Cookbook](http://symfony.com/doc/master/cookbook/form/data_transformers.html)上的说明进行操作，但出现以下错误：

> 可捕获的致命错误：传递给 Symfony\Component\Form\FormFactory::loadTypeExtensions() 的参数 1 必须实现接口 Symfony\Component\Form\FormTypeInterface，给出 Yanic\HomeBundle\Form\DataTransformer\DateToStringTransformer 的实例，在 /Applications/MAMP 中调用/htdocs/symfony-standard-2.1/vendor/symfony/symfony/src/Symfony/Component/Form/FormFactory.php 在第 320 行并在 /Applications/MAMP/htdocs/symfony-standard-2.1/vendor/symfony/symfony 中定义/src/Symfony/Component/Form/FormFactory.php 第 332 行

似乎它需要一个 FormType，但文档说这不应该是必要的。

这就是我正在使用的代码：

用户类型.php

```
public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $transformer = new \Yanic\HomeBundle\Form\DataTransformer\DateToStringTransformer();

        $builder
            ->add('username')
            ->add('password','password',
            array(
                'required' => false
            ))
            ->add('email')
            ->addViewTransformer( $transformer )
            ->add('created', 'datetimeToString', array(
                'disabled' => true,
            ))
            ->add('modified', 'datetimeToString', array(
                'disabled' => true,
            ))
            ->add('isActive', null, array(
                'label' => 'Is active?',
                'required' => false
            ))
            ->add('lastLogin', null, array(
                'empty_data' => 'never',
                'widget' => 'single_text',
                'read_only' => true,
                'label' => 'Last login'
            ))
            ->add('modifiedBy', null, array(
                'label' => 'Modified by',
                'read_only' => true
            ))
            ->add('groups')
        ;
    } 
```

DateToStringTransformer.php

```
namespace Yanic\HomeBundle\Form\DataTransformer;

use Symfony\Component\Form\DataTransformerInterface;
use Symfony\Component\Form\Exception\TransformationFailedException;

class DateToStringTransformer implements DataTransformerInterface
{
    /**
     * Transforms an DateTime object to a string.
     *
     * @param  \DateTime|null $issue
     * @return string
     */
    public function transform($date)
    {
        if (null === $date) {
            return "never";
        }

        return $date->format('d-m-Y H:i');
    }

    /**
     * Transforms a string (date formatted) to an object (\DateTime).
     *
     * @param  string $date
     * @return \DateTime|null
     * @throws TransformationFailedException
     */
    public function reverseTransform($number)
    {
        return $number;
    }
} 
```

服务.yml

```
services:
    form.dataTransformer.datetimeToString:
        class: Yanic\HomeBundle\Form\DataTransformer\DateToStringTransformer
        tags:
            - { name: form.type, alias: datetimeToString } 
```

我究竟做错了什么？

啊，我用的是 Symfony 2.1 Beta2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:20:44.757

在[文档](http://symfony.com/doc/master/cookbook/form/data_transformers.html)中有关于它的提示：

```
<?php

use Symfony\Component\Form\FormBuilderInterface;
use Acme\TaskBundle\Form\DataTransformer\IssueToNumberTransformer;

class TaskType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // ...

        // this assumes that the entity manager was passed in as an option
        $entityManager = $options['em'];
        $transformer = new IssueToNumberTransformer($entityManager);

        // use a normal text field, but transform the text into an issue object
        $builder
            ->add('issue', 'text')
            ->addViewTransformer($transformer)
        ;
    }

    // ...
} 
```

“**使用普通文本字段**，但将文本转换为问题对象”**

**您在服务中将数据转换器注册为表单类型。** Symfony 将您的数据转换器视为表单类型。

您应该创建表单类型并将数据转换器放在那里（如在 doc 中），或删除服务定义，使用普通日期字段而不是 datetimeToString。

但我认为在这种情况下，第一种方式会更好。

# unix - Unix命令删除目录中的所有文件但保留目录

> ID：11429968
> 
> 赞同：9
> 
> 时间：2012-07-11T09:50:56.137
> 
> 标签：unix

我正在寻找一个 unix 命令来删除目录中的所有文件而不删除目录本身。（注意该目录不包含子目录）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T09:52:14.993

```
rm -i <directory>/* 
```

这应该可以解决问题

编辑：添加 -i 以防万一（安全第一）。目录应该是完整路径或相对路径（例如`/tmp/foo`或`../trash/stuffs`）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T09:53:17.270

尝试

```
rm -r yourDirectory/* 
```

它会删除“yourdirectory”目录中的所有文件

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-13T08:05:52.650

您可以使用`find /path/to/your/folder/ -delete`删除该文件夹中的所有内容。

虽然通配符`rm`会因文件过多而中断（“参数列表太长”），但无论有多少文件，这都有效。

您还可以使其仅删除文件但保留任何子目录：

```
find /path/to/your/folder/ -type f -delete 
```

您还可以指定任何其他标准`find`支持来限制“结果”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T09:55:12.173

`rm *` 如果要从特定目录中删除，可以使用从当前目录中删除所有文件，键入`rm /path/*`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-30T18:03:24.380

如果您位于要删除所有文件的目录中，则以下命令可以正常工作：

```
rm * 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-26T06:22:33.497

如果您想删除所有文件以及所有表示所有内容的目录，请尝试以下操作：

```
rm -rf * 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-28T08:36:00.877

你可以使用`rm -r /UrDir/*.*` 这将忽略子目录中的文件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-27T07:17:15.543

这会帮助你，

```
rm path/* 
```

例如：

```
rm ../mydir/* 
```

在这个命令中，如果`mydir`有任何子目录！它将引发错误消息并跳过该子目录并删除主目录中的其余文件。

# c# - 如何以字典的形式从控制台应用程序获取命名参数 ?

> ID：11429970
> 
> 赞同：27
> 
> 时间：2012-07-11T09:51:02.553
> 
> 标签：c#, .net, string, parsing, console-application

我有一个名为 MyTool.exe 的控制台应用程序

收集传递给此控制台应用程序的命名参数然后将它们放入以`Dictionarty<string, string>()`参数名称作为键、值作为参数的最简单方法是什么？

例如：

```
MyTool foo=123432 bar=Alora barFoo=45.9 
```

我应该能够获得一本字典，它将是：

```
MyArguments["foo"]=123432 
MyArguments["bar"]="Alora"
MyArguments["barFoo"]="45.9" 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-01-07T17:52:22.123

使用这个 Nuget 包

*   V1.9.x -[命令行解析器库](https://commandline.codeplex.com/) ^(（CodePlex - 即将消失且过时）)
*   V2+ -[命令行解析器](https://github.com/commandlineparser/commandline) ^(（持续支持）)

只需几秒钟即可配置并为您的应用程序添加即时的专业触感。

```
// Define a class to receive parsed values
class Options {
  [Option('r', "read", Required = true,
    HelpText = "Input file to be processed.")]
  public string InputFile { get; set; }

  [Option('v', "verbose", DefaultValue = true,
    HelpText = "Prints all messages to standard output.")]
  public bool Verbose { get; set; }

  [ParserState]
  public IParserState LastParserState { get; set; }

  [HelpOption]
  public string GetUsage() {
    return HelpText.AutoBuild(this,
      (HelpText current) => HelpText.DefaultParsingErrorsHandler(this, current));
  }
}

// Consume them
static void Main(string[] args) {
  var options = new Options();
  if (CommandLine.Parser.Default.ParseArguments(args, options)) {
    // Values are available here
    if (options.Verbose) Console.WriteLine("Filename: {0}", options.InputFile);
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-13T16:59:54.280

以下是如何以最简单的方式完成此操作：

```
 static void Main(string[] args)
    {
        var arguments = new Dictionary<string, string>();

        foreach (string argument in args)
        {
            string[] splitted = argument.Split('=');

            if (splitted.Length == 2)
            {
                arguments[splitted[0]] = splitted[1];
            }
        }
    } 
```

注意：

*   参数名称区分大小写
*   多次提供相同的参数名称不会产生错误
*   不允许有空格
*   必须使用一 = 符号

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-25T06:42:48.610

如果您的参数值中有“=”，则更安全的选择是：

```
private static Dictionary<string, string> ResolveArguments(string[] args)
{
    if (args == null)
        return null;

    if (args.Length > 0)
    {
        var arguments = new Dictionary<string, string>();
        foreach (string argument in args)
        {
            int idx = argument.IndexOf('=');
            if (idx > 0)
                arguments[argument.Substring(0, idx)] = argument.Substring(idx+1);
        }
        return arguments;
    }

    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:28:49.847

我不明白为什么这段代码不好？霍瓦？

```
 var arguments = new Dictionary<string, string>();
        foreach (var item in Environment.GetCommandLineArgs())
        {
            try
            {
                var parts = item.Split('=');
                arguments.Add(parts[0], parts[1]);
            }
            catch (Exception ex)
            {
                // your error handling here....
            } 
```

# c++ - 无法解决错误 LNK2019：无法解析的外部符号

> ID：11429971
> 
> 赞同：0
> 
> 时间：2012-07-11T09:51:02.673
> 
> 标签：c++, visual-studio-2008, lnk2019

我在 Visual Studio 中有一个解决方案，它有 2 个项目，即 PAL_TEST 和 Unit_Test。
我在 PAL_TEST 中有一堂课，CPALResponse.h

```
#include "CFW_Stl.h"

class CPALResponse
{
  public:
    void SetCommandSucceeded(bool bCommandSucceeded = false);
    bool GetCommandSucceeded();
    void SetCommandType(int nCommandType);
    int GetCommandType();

  private:
    bool m_bCommadSucceeded;
    int m_nCommandType;
}; 
```

PAL_TEST CPALResponse.cpp 中的另一个文件

```
#include "stdafx.h"
#include "CFW_CPALResponse.h"

void CPALResponse::SetCommandSucceeded(bool bCommandSucceeded)
{
    m_bCommadSucceeded = bCommandSucceeded;
}
bool CPALResponse::GetCommandSucceeded()
{
    return m_bCommadSucceeded;
}
void CPALResponse::SetCommandType(int nCommandType)
{
    m_nCommandType = nCommandType;
}
int CPALResponse::GetCommandType()
{
    return m_nCommandType;
} 
```

Unit_Test中有一个文件Unit_Test.cpp，

```
#include "stdafx.h"
#include "../PAL_TEST/CFW_CPALResponse.h"

int _tmain(int argc, _TCHAR* argv[])
{
    CPALResponse a;
    a.SetCommandSucceeded(true);
    return 0;
} 
```

当我构建 Unit_Test 项目时，它显示给我

```
1>------ Build started: Project: Unit_Test, Configuration: Debug Win32 ------
1>Linking...
1>Unit_Test.obj : error LNK2019: unresolved external symbol "public: void __thiscall CPALResponse::SetCommandSucceeded(bool)" (?SetCommandSucceeded@CPALResponse@@QAEX_N@Z) referenced in function _wmain
1>C:\Users\anubhav.a\Documents\Visual Studio 2008\Projects\PAL_TEST\Debug\Unit_Test.exe : fatal error LNK1120: 1 unresolved externals
1>Build log was saved at "file://c:\Users\anubhav.a\Documents\Visual Studio 2008\Projects\PAL_TEST\Unit_Test\Debug\BuildLog.htm"
1>Unit_Test - 2 error(s), 0 warning(s) 
```

我不清楚该消息的含义以及如何解决该错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:53:28.670

这是通常的清单，您的问题是其中之一：

*   您没有导出类，`declspec(dllexport)`也没有将它们导入到调用项目中`declspec(dllimport)`。

*   确保使用实现编译文件。

*   确保使用类链接的`.lib`项目与第一个项目生成的链接。

# c# - 在用户墙上发布带有 3 张照片的画廊，仅显示一张

> ID：11429973
> 
> 赞同：0
> 
> 时间：2012-07-11T09:51:12.897
> 
> 标签：c#, sdk, upload, facebook-opengraph, photo

我有 c# sdk 的问题，我尝试在我的页面上上传一个包含 3 张照片的画廊，该页面正确显示了三张在用户墙上对齐的照片，而不是只显示一张照片。我不知道为什么。有人能帮我吗？谢谢

有关此问题的更多信息我无法解决

[显示错误的图像](http://www.camping.it/erroreopengraph/errore.jpg)

* * *

有人能帮我吗？我在描述问题的图像中插入了更多细节......这里有 c# 代码：

```
Dictionary<string, object> albumParameters = new Dictionary<string, object>();
albumParameters.Add("message", "camping italy"); 
albumParameters.Add("name", "camping italia");
JsonObject resultAlbum = client.Post("/camping.it/albums", albumParameters) as JsonObject;

string idAlbum = Convert.ToString(resultAlbum["id"]);

foreach (FileInfo foto in new DirectoryInfo("\\server\\gallery\\").GetFiles("*.jpg"))
{
string filepath = foto.FullName;

FacebookMediaObject mediaObject = new FacebookMediaObject
{
FileName = foto.Name,
ContentType = "image/jpeg"
};

byte[] fileBytes = File.ReadAllBytes(filepath);
mediaObject.SetValue(fileBytes);

IDictionary<string, object> upload = new Dictionary<string, object>();
upload.Add("@foto.jpg", mediaObject);
upload.Add("message", "camping italy");
JsonObject resultFoto = client.Post("/" + idAlbum + "/photos", upload) as JsonObject;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:44:14.490

看起来你正在为每张照片做一个单独的帖子？

如果帖子都有相同的信息，Facebook 不会显示一个接一个的帖子——只有第一个帖子会显示在用户的墙上。

# android - 是否可以使用链接模式使用模式进行调用

> ID：11429974
> 
> 赞同：0
> 
> 时间：2012-07-11T09:51:16.710
> 
> 标签：android, call, linkify

是否可以使用使用模式的链接进行呼叫？我想在文本视图中显示文本“呼叫存储”。当我单击该文本视图时需要拨打给定号码。为此，我尝试了下面的代码。

```
Linkify.addLinks(callStoreTxt ,pattern,"9465789002" ); 
```

这里 callStoretxt 是我的文本视图的名称。但它崩溃了。有什么办法吗？编辑：我的崩溃日志

```
 07-11 15:11:02.361: E/AndroidRuntime(31906): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=seethalakshmi.may2009@gmail.comS (has extras) }
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.app.Activity.startActivityForResult(Activity.java:3190)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.support.v4.app.FragmentActivity.startActivityForResult(Unknown Source)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.app.Activity.startActivity(Activity.java:3297)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.text.style.URLSpan.onClick(URLSpan.java:62)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.text.method.LinkMovementMethod.onTouchEvent(LinkMovementMethod.java:212)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.widget.TextView.onTouchEvent(TextView.java:8344)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.View.dispatchTouchEvent(View.java:5541)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent (ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at   android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1912)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at  com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.View.dispatchPointerEvent(View.java:5721)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at  android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewRootImpl.handleMessage   (ViewRootImpl.java:2466)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.os.Handler.dispatchMessage(Handler.java:99)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.os.Looper.loop(Looper.java:137)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at android.app.ActivityThread.main(ActivityThread.java:4424)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at java.lang.reflect.Method.invokeNative(Native Method)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at java.lang.reflect.Method.invoke(Method.java:511)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
 07-11 15:11:02.361: E/AndroidRuntime(31906):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:55:45.757

您可以使用 HTML（使用 'tel' 协议）来做到这一点：

```
TextView textView = new TextView(this);
textView.setText(Html.fromHtml("<a href='tel:9465789002'>Call store</a>"));
textView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

在`setMovementMethod()`TextView 中启用链接。

# asp.net - 日历扩展器默认在文本框中输入今天的日期（当我单击日历图像打开日历时）

> ID：11429976
> 
> 赞同：0
> 
> 时间：2012-07-11T09:51:27.170
> 
> 标签：asp.net, ajax, textbox, asp.net-ajax, calendarextender

我正在使用带有**日历扩展器的****文本框**。我的问题是，当我单击**日历图像**（打开日历）时，**今天的**日期默认出现在**文本框中**

 ******这是我的代码

```
<asp:TextBox ID="txtExpiryDate" runat="server" Width="70px" CssClass="txt_box"></asp:TextBox>

<input type="image" id="ImageStart" runat="server" src="~/images/date-picker-icon.jpg" />

<cc1:MaskedEditExtender ID="MaskedEditExtender2" TargetControlID="txtExpiryDate" MaskType="Date" Mask="99/99/9999" runat="server"></cc1:MaskedEditExtender>     

<cc1:calendarextender ID="Calendarextender2" OnClientDateSelectionChanged="dateSelectionChanged" OnClientShown="clientShown" TargetControlID="txtExpiryDate" Format="MM/dd/yyyy" PopupButtonID="ImageStart" Enabled="true" runat="server"> </cc1:calendarextender> 
```

如何解决这个问题。。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:55:47.860

我假设您已经`CalendarExtender`从某个地方复制了您的标记，但没有 javascript 函数`clientShown`。

这将注册（客户端）事件：

```
<cc1:calendarextender ID="Calendarextender2"
    OnClientShown="clientShown" ... 
```

因此，要么删除该事件声明，要么创建函数。

例如：

```
<script type="text/javascript">
    function clientShown(sender, args) {
        var extender= $find('Calendarextender2');
        // the following is just for demonstration
        //sender.set_visibleDate(extender._selectedDate);
        //sender.set_todaysDate(extender._selectedDate);
        //sender.set_selectedDate(extender._selectedDate);
    }
</script> 
```******

# jquery - jquery隐藏多个div类，ID附加到末尾

> ID：11429980
> 
> 赞同：0
> 
> 时间：2012-07-11T09:51:41.113
> 
> 标签：jquery, jquery-selectors

我有多个部分作为 div，每个部分都在 id(id="section-'.$section.'") 的末尾附加了一个数字。可能有很多，并且 id 每次都会增加。

我正在尝试编写一个 jquery 脚本来显示和隐藏正确的 id="resource-'.$section.'"。当用户单击部分 div 内的 img 时，它将显示隐藏适当的资源 div 并隐藏所有其他资源。

```
<div id="section-'.$section.'">
<img src="" id="section-img-'.$section.'"/>
</div>

<div id="resource-'.$section.'"></div>

<script type="text/javascript">
jQuery(document).ready(function() {
      jQuery("#resource").hide();
      jQuery("#section img").click(function()
           {
              jQuery(this).next("#resource").show();
           });
});
</script> 
```

任何想法或帮助将不胜感激。提前致谢。

* * *

修改：

```
<div class="section" id="section-'.$section.'">
    <img src="" class="section-img" id="section-img-'.$section.'"/>
        </div>

    <div class="resource" id="resource-'.$section.'"></div> 
```

* * *

[jsfiddle.net/kqQDH/1](http://jsfiddle.net/kqQDH/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:56:00.433

更新

```
jQuery(document).ready(function() {
    jQuery('.resource').hide();
    jQuery('.section-img').click(function() {
        jQuery('.resource').hide(); //hide others

        //parse id for index
        var idx = jQuery(this).attr("id").split('-')[2];
        jQuery('#resource-'+idx).show(); //show this
    });
});​ 
```

* * *

A`class`不是`id`. 它们是两个完全不同的 html 属性；类不必是唯一的——事实上，您的 jQuery 类选择器依赖于它们并非如此。

```
<div id="section-1" class="section" >
<img src="" id="section-img-1" class="section-img" />
</div>

<div id="resource-1" class="resource"></div>

<script type="text/javascript">
jQuery(document).ready(function() {
      jQuery('div[id^="resource"]').hide();
      jQuery('div[id^="section-img"]').click(function()
           {
              jQuery(this).parent().next('div[id^="resource"]').show();
           });
});
</script>​​​​​​ 
```

请注意，如果您认为之前的类名结构是必要的（无论出于何种原因），那么您将无法使用类选择器——您将不得不使用属性以选择器开始。

如果您分配元素 id 以及指示它是哪种元素的类，那会更好。例如，第一部分将是`<div id="section-1" class="section"></div>`。然后，您可以使用简单的类选择器一次选择所有`section`s，或者使用其 id 执行特定于某个类的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:01:20.357

我建议您遵循以下方案：将所有部分放在 div#sections 中，并将您的资源放在 div#resources 中，然后获取单击图像的父级索引，然后显示具有此索引的资源。

您的代码可能如下所示：

```
<div id="sections">
   <div class="section">
      <img src="" class="section-img"/>
   </div>
   ...
</div>

<div id="resources">
   <div class="resource"></div>
   ....
</div>

<script>
   $(document).ready(function(){  $('.section-img').click(function(){ var index = $(this).parent().index();  $('.resource').hide().filter(':eq('+index+')').show()  })  })
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T10:01:56.580

1）您的当前`.resource`和`.section`选择器将失败，因为没有恰好具有这些类的元素-正如您所说，`.section-4`例如，这些类不仅仅是`.section`.

2）该`next()`命令将失败，因为它是从`img`标签的上下文中运行的，但实际上`.resource`DIV 是父`.section`DIV的兄弟

将您的类名统一为通用名称，如果确实需要唯一的 ID，`id`请为此使用属性。所以，HTML：

```
<!-- classes generalised; add in unique IDs as required -->
<div class="section">
    <img src="" class="section-img" />
</div>
<div class="resource"></div> 
```

在那里，类名是一致的而不是唯一的。这使得 JS 部分更简单。

```
jQuery(".resource").hide();
jQuery(".section img").click(function() {
    jQuery(this).parent().next(".resource").show(); //<-- note, parent()
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T10:04:52.697

首先，如果类名将根据数字而变化，则必须将其分配给 div 的 ID。假设，这是解决方案：

```
 $('img[id^="section-"]').click (function (e) {
  var temp_section = $(this).attr('id').replace('section-','');
      $('#resource-'+temp_section).show();
      $('div[id^="resource-"]').css("display","none");
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T10:07:37.497

每次点击图片时，都需要从类中解析它的编号，然后用资源类找到正确的 div：

```
jQuery(".section img").click(function()
 {
     //1.Hide all resources
     jQuery('div[class^="resource"]').hide();

     //2\. parse number of resource to show   
     var number = parseInt($(this).attr('class').match(/(\d+)$/)[0], 10);
     var resourceClass = ".resource-" + number; 

     //3.find resource class and show it
     jQuery(resourceClass).show();
 }); 
```

我没有测试它，所以可能会有一些打字错误，但如果我明白你的意思，这就是你想要的方向。

# java - SortExpression.SortDirection 类型不可见 - Google App Engine 中的全文搜索

> ID：11429981
> 
> 赞同：1
> 
> 时间：2012-07-11T09:51:41.580
> 
> 标签：java, google-app-engine, full-text-search

我遵循了 Google App Engine[文档](https://developers.google.com/appengine/docs/java/search/overview#Passing_Queries_in_a_Query_Object)中的示例：

```
SortOptions sortOption = SortOptions.newBuilder()
    .addSortExpression(SortExpression.newBuilder()
        .setExpression("birthDate")
        .setLimit(1000)
        .setDirection(SortExpression.SortDirection.DESCENDING)
        .setDefaultValueNumeric(0))
        .build(); 
```

但是有一个错误：`The type SortExpression.SortDirection is not visible`

我正在使用 Eclipse IDE。错误的原因是什么？

# java - 大约 10-20 分钟不活动后，与 mysql 服务器的 JDBC 连接失败

> ID：11429988
> 
> 赞同：1
> 
> 时间：2012-07-11T09:52:16.623
> 
> 标签：java, mysql, jdbc

正如我在标题中所说，我与 mysql 服务器的 JDBC 连接在大约 10-20 分钟不活动后失败。我使用以下代码连接到数据库：

```
import java.io.FileOutputStream;
import java.io.OutputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.swing.*;

import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPFile;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;
import com.jcraft.jsch.UserInfo;

public class MyDB
{
    public Connection connect = null;
    public Statement statement = null;
    public PreparedStatement preparedStatement = null;
    public ResultSet resultSet = null;

    public void readDatabase() throws Exception
    {
        JSch jsch = new JSch();
        String host = "ssh.binero.se";
        String user = "username";
        Session session = jsch.getSession(user, host, 22);
        int lport = 1234;
        String rhost = "Ip_to_host";
        int rport = 3306;
        UserInfo ui = new MyUserInfo();
        session.setUserInfo(ui);
        session.connect();

        int assigned_port = session.setPortForwardingL(lport, rhost, rport);
        System.out.println("localhost:" + assigned_port + " -> " + rhost + ":" + rport);
        Class.forName("com.mysql.jdbc.Driver");
        connect = DriverManager
            .getConnection("jdbc:mysql://localhost:1234/database?
            user=user&password=pass&connectTimeout=28800000"); 
```

这工作正常，但在大约 10-20 分钟不活动后，当我尝试使用数据库连接时收到以下错误消息：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet successfully received from the server was 6 810 583 milliseconds ago.
The last packet sent successfully to the server was 6 810 800 milliseconds ago.

...

Caused by: java.net.SocketException: Software caused connection abort: socket write error 
```

我知道我可以通过在每次查询后断开与数据库的连接来解决这个问题，但我不希望这样做。另外，由于我在一段时间后与数据库断开连接，我以为我被超时了。但是，当我更改它们时，我没有发现任何有帮助的变量。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-11T10:18:13.277

```
 Class.forName("com.mysql.jdbc.Driver");
       con = DriverManager.getConnection("jdbc:mysql://localhost:3306/Table_Name","root",""); 
```

试试这个，我从来没有超时！祝你好运...！

# database - 哪些字段应该进入索引？

> ID：11429993
> 
> 赞同：0
> 
> 时间：2012-07-11T09:52:32.950
> 
> 标签：database, hibernate, postgresql, indexing, hql

我在 postgresql 数据库中进行了一个查询，这需要花费太多时间，我想添加一个索引以使其更快，但我不知道我应该在索引中包含哪些字段，因为它们中的许多属于其他表和一些它们是外键。

我正在使用休眠，HQL 查询是这样的：

```
SELECT i FROM Item i 
LEFT JOIN i.model.kind AS k 
LEFT JOIN i.model.kind.subkind AS s
WHERE i.file is null " +
AND i.identifier is not null
AND i.identifier != ''
AND i.place is not null 
AND i.place.id = :placeId
AND ( upper(i.serial) LIKE upper(:keyword)
    OR upper(i.code)  LIKE upper(:keyword)
    OR upper(i.law.law)  LIKE upper(:keyword) 
    OR upper(i.model.model)  LIKE upper(:keyword) 
    OR upper(k.kind)  LIKE upper(:keyword) 
    OR upper(s.subkind)  LIKE upper(:keyword) 
    OR upper(i.model.factory.factory) LIKE upper(:keyword) 
)
ORDER BY i.code, i.id 
```

数据库的模式是从模型中自动生成的，它看起来像我下面包含的模型。

我应该在索引中包含哪些字段？

谢谢。

```
public class Item {
    @Id
    private Long id;

    private String identifier;
    private String code;
    private String serial;

    @ManyToOne
    private File file;

    @ManyToOne
    private Law law;

    @ManyToOne
    private Place place;

    @ManyToOne
    private Model model;
}

public class File {
    @Id
    private Long id;
    private String file;
}

public class Law {
    @Id
    private Long id;
    private String law;
}

public class Place {
    @Id
    private Long id;
    private String place;
}   

public class Model {
    @Id
    private Long id;

    private String model;

    @ManyToOne
    private Factory factory;

    @ManyToOne
    private Kind kind;
}

public class Factory {
    @Id
    private Long id;

    private String factory;
}   

public class Kind {
    @Id
    private Long id;

    private String kind;

    @ManyToOne
    private Subkind subkind;
}

public class Subkind {
    @Id
    private Long id;

    private String subkind;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:43:10.867

如果您在嵌套全文搜索中遇到性能问题，您可能需要深入研究 Hibernate Search。

Hibernate 搜索（使用 Lucene）允许快速高效的全文搜索，也可以在嵌套对象的属性上。

查看您当前的查询，如果您在两侧放置文本占位符，Postgresql 甚至可能不使用索引（%keyword% 不使用与关键字% 相同的执行计划）

# http - 在 http 和 https 中创建 web 服务有什么区别

> ID：11429995
> 
> 赞同：0
> 
> 时间：2012-07-11T09:52:39.267
> 
> 标签：http, rest, jakarta-ee, https, jersey

我正在使用 Jersey 在 java 中创建休息服务。我是新手，所以我对在 http 和 https 中创建服务有什么区别感到有些困惑。

我们是否需要注意创建服务。请正确引导。

我遵循的创建服务的教程是[单击此处获取教程链接](http://www.vogella.com/articles/REST/article.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:37:11.630

对于作为应用程序开发人员的您来说，没有区别。您只需将 Web 应用程序（war 文件）部署到 servlet 容器。

如果此服务器接受 http 和/或 https 连接，则取决于服务器的设置。您可以（也许应该）做的是拒绝在不安全的 (http) 通道上工作并使用 SSL (https) 强制执行。

# smarty - 如何让 Smarty 自动转义所有模板变量但忽略捕获

> ID：11429997
> 
> 赞同：4
> 
> 时间：2012-07-11T09:52:51.440
> 
> 标签：smarty, smarty3

我想自动转义所有模板变量，即我希望它们被转义而不必一直写`|escape`。因此我启用了该`$escape_html`选项。

然而，显然 Smarty 处理使用`{capture}`相同方式创建的变量，即使这些可以被视为可信输入。我们的代码库中有很多这样的代码，`nofilter`到处都写几乎和写一样烦人`|escape`。

当然必须有解决方案吗？还是`$escape_html`和`{capture}`不兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:41:21.917

`$escape_html`并且`{capture}`根据定义并非不兼容，不。

`$escape_html`（以及[{setfilter}](http://www.smarty.net/docs/en/language.function.setfilter.tpl)和[default_modifiers](http://www.smarty.net/docs/en/variable.default.modifiers.tpl)）遭受不知道变量上下文的问题。只要应该输出变量，就会执行它们。没有“那个变量从哪里来”跟踪，这将允许 Smarty 编译器实现“嘿，变量 $foo 是通过捕获定义的，因此已经被转义，不要再转义了”。考虑到诸如“在 javascript 的捕获组转义中，生成的字符串转义为 html”之类的场景时，情况会变得更糟。

现在你的选择相当有限：

1.  |逃避一切需要逃避的东西
2.  nofilter 所有不应该被转义的东西（再次）

* * *

我将与 Smarty 的编译器维护人员讨论这个问题，以找出我们可以做的事情。但是，如果我们找到解决方案，它将在 Smarty 3.2 中引入——最早的。所以现在，手动转义/无过滤器。