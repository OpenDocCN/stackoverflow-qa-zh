# StackOverflow 问答 000711000-000711999

# python - 如何将对象实例传递给 SocketServer.BaseRequestHandler 实例？

> ID：711002
> 
> 赞同：2
> 
> 时间：2009-04-02T18:26:57.803
> 
> 标签：python, python-2.7, sockets, tcp, socketserver

这是问题。我的主要工作是：将“s”对象传递给 TestRequestHandler 类中的“handle”方法。我的第一步是：通过“point”方法将“s”对象传递给 TestServer 类，但这里我卡住了。如何将“s”对象传递给 TestRequestHandler？一些建议？

```
import threading
import SocketServer
from socket import *

class TestRequestHandler(SocketServer.BaseRequestHandler):

    def __init__(self, request, client_address, server):
        SocketServer.BaseRequestHandler.__init__(self, request, client_address, server)
        return

    def setup(self):
        return SocketServer.BaseRequestHandler.setup(self)

    def handle(self):
        data = self.request.recv(1024)

        if (data): 
            self.request.send(data)
            print data

    def finish(self):
        return SocketServer.BaseRequestHandler.finish(self)

class TestServer(SocketServer.TCPServer):

    def __init__(self, server_address, handler_class=TestRequestHandler):
        print "__init__"
        SocketServer.TCPServer.__init__(self, server_address, handler_class)
        return

    def point(self,obj):
        self.obj = obj
        print "point"

    def server_activate(self):
        SocketServer.TCPServer.server_activate(self)
        return

    def serve_forever(self):
        print "serve_forever"
        while True:
            self.handle_request()
        return

    def handle_request(self):
        return SocketServer.TCPServer.handle_request(self)

if __name__ == '__main__':

    s = socket(AF_INET, SOCK_STREAM)

    address = ('localhost', 6666)
    server = TestServer(address, TestRequestHandler)
    server.point(s)
    t = threading.Thread(target=server.serve_forever())
    t.setDaemon(True)
    t.start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T22:39:47.617

如果我理解正确，我认为您可能误解了该模块的工作原理。您已经为要绑定的服务器指定了“localhost:6666”的地址。

当您通过调用 serve_forever() 启动服务器时，这将导致服务器开始侦听 localhost:6666 上的套接字。

根据文档，该套接字作为“请求”对象传递给您的 RequestHandler。当在套接字上接收到数据时，您的“句柄”方法应该能够使用记录的套接字 API 从/发送到该对象。

如果您想要进一步的抽象，看起来您的 RequestHandler 可以从 StreamRequestHandler 扩展并使用类似文件的对象读取/写入套接字。

关键是，您无需创建额外的套接字，然后尝试强制您的服务器使用新的套接字。SocketServer 模块的部分价值在于它为您管理套接字的生命周期。

另一方面，如果您想从客户端的角度测试您的服务器，那么您需要创建一个可以读取/写入客户端请求的套接字。但是你永远不会把这个套接字传递给你的服务器，就其本身而言。您可能会在一个完全独立的进程中执行此操作，并通过套接字上的 IPC 测试您的服务器。

**根据新信息进行编辑**

要让服务器 A 在服务器 A 接收数据时打开到服务器 B 的套接字，一种解决方案是简单地从 RequestHandler 内部打开一个套接字。也就是说，您可能需要根据服务的要求解决其他一些设计问题。

例如，您可能想要使用一个简单的连接池，该连接池打开几个到服务器 B 的套接字，服务器 A 可以像资源一样使用这些套接字。Python 中可能已经有一些库可以帮助解决这个问题。

鉴于您当前的设计，您的 RequestHandler 可以作为成员变量访问服务器，因此您可以执行以下操作：

```
class TestServer(SocketServer.TCPServer):
     def point (self, socketB):
         self.socketB = socketB # hold serverB socket

class TestRequestHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        data = self.request.recv(1024)

        if (data): 
            self.request.send(data)
            print data

        self.server.socketB ... # Do whatever with the socketB 
```

但就像我说的那样，拥有某种连接池或其他管理服务器 B 套接字的对象可能会更好，这样服务器 A 处理程序就可以在处理传入请求时获取/释放套接字。

这样，您可以更好地处理服务器 B 断开套接字的情况。您当前的设计将无法很容易地处理损坏的插座。只是一些想法...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T18:42:07.110

如果 s 的值设置了一次，并且没有重新初始化 - 您可以将其设为类变量而不是 TestServer 的实例变量，然后让处理程序通过处理程序构造函数中的 TestServer 的类方法检索它。

例如：TestServer._mySocket = s

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T08:06:07.757

好的，我的主要任务是这个。构建监听服务器（A-server - localhost, 6666），在启动期间将打开到不同服务器（B-server - localhost, 7777）的“硬”连接。当客户向 A-server 发送数据时，此（A-server）将数据（与 B-server 具有硬连接）发送到 B-server，答案从 B-server 接收到 A-server，并将答案发送到客户。再说一遍：客户发送数据，A-server 接收它们，然后发送到 B-server，answer 从 B-server 接收数据，A-server 将数据发送给客户。如此一圈又一圈。与 B 服务器的连接在服务器 A 停止时关闭。以上就是制作这个的考验。

# c# - 显示日期时如何阻止时间在 GridView 中显示？

> ID：711004
> 
> 赞同：2
> 
> 时间：2009-04-02T18:27:20.627
> 
> 标签：c#, asp.net, datetime, gridview

我有一个正在开发的 Web 应用程序（ASP.NET 2.0 和 C#）。在其中，我有一个从 Oracle 数据库获取数据的网格视图。我需要显示的一些数据是日期。但是当我的 gridview 中的日期显示如下时：

> 2009-04-02 00:00:00

我宁愿他们没有时间展示。我正在使用代码隐藏来获取数据，所以我无法手动更改 gridview 的字段。这是我的 gridview 的所有代码：

```
<asp:GridView ID="Grid" runat="server" EmptyDataText="There are no data records to display." ></asp:GridView> 
```

如何停止显示时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T18:39:15.090

如果您以编程方式设置数据源（代码隐藏），您仍然可以在 gridview 中拥有所有列（使用 asp:DataBoundColumn）

```
DataFormatString="{0:d}" 
```

### 编辑

此代码适用于您的 aspx 页面，如果您真的想将您的演示逻辑粘贴在您的代码后面 - 您有 2 个选项：

1.  格式化“RowDataBound”事件的日期
2.  格式化查询中的日期 - 这样你就不必处理代码中的格式了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T18:30:01.930

您可以`dataformatstring`在`gridview`列中应用 a 以仅显示日期。

要使其正常工作，您必须确保将`HTMLEncode`其设置为`false`.

[更多信息](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-03T21:46:47.930

您可以使用 DataFormatString="{0:d}" HtmlEncode="False"

不要忘记使用最后一部分 [htmlencode]

我希望这可行……这对我有用！！！！

阿鲁南德拉

# tfs - 在团队资源管理器中显示从右到左的文本

> ID：711011
> 
> 赞同：2
> 
> 时间：2009-04-02T18:28:32.527
> 
> 标签：tfs, client, right-to-left

我们已经开始在工作中使用 TFS，并且我正在将我的错误从以前的问题跟踪软件迁移到 TFS。所有这些都是用希伯来语写成的，这是一种从右到左的语言，但混合了英语单词。
TFS 客户端中的所有文本字段都是从左到右的，因此我必须手动在所有字段中按 Ctrl-Right-Shift 才能正确阅读它们。

有什么方法可以更改 TFS 客户端中的默认文本方向？我研究了自定义工作项表单元素，例如这里：http: [//msdn.microsoft.com/en-us/library/ms194963.aspx](http://msdn.microsoft.com/en-us/library/ms194963.aspx) 但我找不到任何用于更改文本方向的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T06:41:14.683

据我了解，没有办法更改工作项定义中的文本方向。我已将您的问题转达给 Microsoft 团队中的一些人，看看他们是否知道任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-01T10:31:45.413

有答案吗？从那以后，我继续寻找一种方法来做到这一点，但我找不到任何方法。

这对我来说是一个严重的可用性问题，特别是对于混合了希伯来语和英语的标题。显示问题标题时，我必须“向后”阅读。当扫描很多问题时，这是一个严重的痛苦。

而且我*没有*空闲时间将 500 多个问题从希伯来语翻译成英语。

# java - 为什么 Tomcat 将 catalina.out 日志文件中的日志行加倍？

> ID：711012
> 
> 赞同：5
> 
> 时间：2009-04-02T18:28:40.077
> 
> 标签：java, tomcat, logging, logfiles

每次查看 Tomcat 的`catalina.out`日志文件时，我都会看到每个日志条目都有双行。为什么会这样？任何 Java (Tomcat) 用户都发生过这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T21:18:59.497

检查您的 log4j 以确保您没有“双重附加”到您的记录器。您的根记录器已经有一个与之关联的附加程序，如果您正在过滤其他类别，请确保您不指定附加程序，除非您希望它转到根以外的附加程序。

```
<category name="org.apache.commons">
    <priority value="warn"/> 
    <!-- don't add the same appender as your root appender -->
</category> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:34:47.067

您的 webapp 的 log4j.properties 是否设置为登录到 catalina.out？Tomcat 已经在那里记录了事件，如果您的应用程序也在那里记录，那可能会解释双倍的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T18:47:13.277

它很可能与加载罐子的顺序有关。在我参与的一个较旧的项目中，这种情况一直都会发生，解决方案是以“完美”的顺序重新排列罐子，事情就会自行解决。

它可能不仅仅是多个 log4j，而是 commons-logging、slf4j 等。尝试重新排列它们，但如果没有看到你的类路径顺序，就很难再提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T18:29:20.120

当我在类路径上有 2 个 log4j.properties 副本时，就会发生这种情况。检查多个日志记录配置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-24T08:10:06.907

我遇到了同样的问题。像这样：

```
log4j.rootLogger=info,R
log4j.appender.R=org.apache.log4j.DailyRollingFileAppender
log4j.appender.R.File=${catalina.home}/logs/catalina.out
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d{yyyy.MM.dd HH:mm:ss} %5p %c{1}(%L):? %m%n
log4j.logger.org.apache=info, R 
```

只需设置`log4j.rootLogger=info,R`为`log4j.rootLogger=R` 它就可以了！

# asp.net - 将某人锁定到特定域

> ID：711018
> 
> 赞同：1
> 
> 时间：2009-04-02T18:29:42.880
> 
> 标签：asp.net, security, dll

我们有一个 dll，它是客户可以购买的 asp.net 购物车软件的插件。但是，出于安全原因，我们希望将该 dll 锁定到特定域，并且我们不希望他们能够读取该 dll 或在他们可能拥有的另一个域中使用该 dll。我们应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T18:36:12.647

头脑风暴：

*   将域检查硬编码到 dll 的主要功能中，并为每个客户编译一个新的 dll（好的，不可扩展）
*   分发带有 dll 的许可证文件，该文件存储 dll 的有效域，加密。让您的 DLL 检查文件，解密内容，如果文件丢失或当前域与加密域不匹配，则失败。
*   通过加密线路将 DLL “phone-home”连接到您的一台服务器，询问您的服务器是否可以接受 dll 正在运行的当前域。您的服务器响应“是”或“否”，DLL 要么运行，要么不运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:31:31.677

DLL 可以查看传入请求的主机标头。

# .net - 使用数据网格进行智能分页

> ID：711019
> 
> 赞同：1
> 
> 时间：2009-04-02T18:29:47.513
> 
> 标签：.net, datagrid

如何配置我的数据网格以使用分页，这样它就不会从数据库中提取所有行，而只会提取当前页面的行。

顺便说一句，我应该仍然使用数据网格还是有更新的控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T18:45:58.443

当我在过去实现这样的分页时，您可以将责任推给 SQL 来进行分页，假设您告诉它页码和大小。这取决于您运行的数据库类型。

在 SQL Server 2000 上执行此操作有点复杂，但如果您使用它，我可能有可以挖掘的资源

SQL Server 2005/2008 中的分页[非常容易](http://www.davidhayden.com/blog/dave/archive/2005/12/30/2652.aspx)。

至于你如何告诉数据库，这取决于你如何绑定到你的网格，以及你如何提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:48:43.537

我认为所有“智能分页”代码都来自[ScottGu 的这个条目](http://weblogs.asp.net/scottgu/archive/2006/01/07/434787.aspx)

至于 GridView 的替代品，这完全取决于您的数据。GridView 最适合表格数据；如果您希望布局更灵活 - 考虑[ListView](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T18:51:38.290

正如乔希所说，有不同的方法可以做到这一点。

检查此问题/答案以了解一种变体：[ASP.NET DataGrid and custom paging](https://stackoverflow.com/questions/475982/asp-net-datagrid-and-custom-paging)

# css - 将文字移动到徽标旁边；摆脱硬性规定

> ID：711023
> 
> 赞同：1
> 
> 时间：2009-04-02T18:30:10.073
> 
> 标签：css

这是网站：www.red-tuxedo.com

我希望“Red Tuxedo”文本位于徽标旁边，而不是下方，并且我想摆脱贯穿徽标的硬性规则。我的 CSS / HTML 技能不符合它。我在更改文本时完全破坏了列布局，并且在代码中找不到硬性规则。尝试调整 gif（在 Photoshop 中切断底部），但没有帮助。

我确实写信给创建模板的人；几天后没有回音。想在我开始添加更多页面之前解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T18:39:44.650

一种方法是在#logo div 中移动徽标：

```
<div id="header-logo">          
    <div id="logo"><img height="60" width="60" alt="Red Tuxedo Logo" src="logo_red_tuxedo.gif" id="logo_red_tuxedo"/><span class="red">Red</span>Tuxedo</div>               
    <form action="#" class="search" method="post">
        <p><input type="text" class="textbox" name="search_query"/>
        <input type="submit" value="Search" class="searchbutton" name="search"/></p>
    </form> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:39:38.317

尝试更改 div (id=logo)，使其包含徽标图像和文本并添加`align='absmiddle'`到图像中。我建议使用 CSS，但无论如何它看起来都有固定的属性。“规则”看起来像是来自 body 元素的背景图像。你需要更新文件`bg.gif`来修改它，我想。

```
<div id="logo">
    <img id="logo_red_tuxedo" src="logo_red_tuxedo.gif"
         alt="Red Tuxedo Logo" align="absmiddle" height="60" width="60">
    <span class="red">Red</span>Tuxedo
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T19:59:04.820

`logo`要移动文本，我会按照 dmondark 建议的方式将图像放入div 中。至于硬性规则，它是身体背景图像的一部分，`bg.gif`. [这是](http://wattornot.com/files/bg.gif)我制作的一个没有它的编辑版本。

# sql-server - SQL Server XML 查询建议

> ID：711025
> 
> 赞同：1
> 
> 时间：2009-04-02T18:30:38.293
> 
> 标签：sql-server, xml, tsql, xpath, xquery

我正在编写一个用户定义的函数来从 SQL Server 中的 XML 列中提取值，该列表示字符串键值对的简单字典。到目前为止，我使它工作的唯一方法似乎过于复杂。您对以下`DictValue`功能有任何简化的建议或技巧吗？

```
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[DictValue]') AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
DROP FUNCTION [dbo].[DictValue]
go

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[TableWithXmlColumn]') AND type in (N'U'))
DROP TABLE [dbo].[TableWithXmlColumn]
go

create table TableWithXmlColumn (
    Id int identity primary key
    ,Dict xml
    )
go

create function DictValue(
    @id int
    ,@key nvarchar(max)
    ) returns nvarchar(max) as begin

    declare @d xml -- string Dictionary
    select @d = Dict from TableWithXmlColumn where Id = @id
    declare @value xml
    select 
            @value = d.Pair.value('data(.)', 'nvarchar(max)')
        from 
            @d.nodes('/StringDictionary/Pair') as d(Pair)
        where 
            @key = d.Pair.value('./@Key', 'nvarchar(max)')

    return convert(nvarchar(max), @value)
    end
go

declare @xmlId int
insert TableWithXmlColumn (Dict) values (
    N'<?xml version="1.0" encoding="utf-16"?>
    <StringDictionary>
      <Pair Key="color">red</Pair>
      <Pair Key="count">123</Pair>
    </StringDictionary>')
set @xmlId = scope_identity()

select 
    dbo.DictValue(@xmlId, 'color') as color
    ,dbo.DictValue(@xmlId, 'count') as [count] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T03:20:56.017

我发现以下变量绑定 XQuery 方法更易于理解：

```
create function DictValue(
  @id int,
  @key nvarchar(max)
) 
returns nvarchar(max) as 
begin
  declare @value nvarchar(max)
  select 
    @value = Dict.value(
      '(StringDictionary/Pair[@Key=sql:variable("@key")])[1]', 
      'nvarchar(max)'
    ) 
    from TableWithXmlColumn
    where Id = @id
  return @value
end 
```

我没有验证它，但这也可能表现得更好一些，因为它避免了 T-SQL 和 XQuery 引擎上的上下文切换，并且只需要一个 XQuery。

我刚刚意识到您没有指定一个 Id 的 Dict XML 是否可能包含具有相同键的多个 Pair 元素：

```
insert TableWithXmlColumn (Dict) values (
  N'<?xml version="1.0" encoding="utf-16"?>
    <StringDictionary>
      <Pair Key="color">red</Pair>
      <Pair Key="color">blue</Pair>
      <Pair Key="count">123</Pair>
    </StringDictionary>') 
```

如果是这种情况，请考虑这个稍作修改的函数，它使用 FLWOR XQuery 枚举和组合多个值（如果存在）。但请注意，在这种情况下，函数只会在找不到 @id 时返回 NULL，而不是在没有匹配的 @key Pair 元素时返回。

```
create function DictValue(
  @id int,
  @key nvarchar(max)
) 
returns nvarchar(max) as 
begin
  declare @value nvarchar(max)
  select 
    @value = Cast(
      Dict.query('
        for $i in StringDictionary/Pair[@Key=sql:variable("@key")] 
        return string($i)
      ') as nvarchar(max)) 
    from TableWithXmlColumn
    where Id = @id
  return @value
end 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T18:42:35.393

就我个人而言，我看不出你能做多少，你所拥有的代码的结构非常易读，你正在查询 XML 以首先获取结果集，然后获取值。

您也许可以绕过@d 变量的使用，但是，我相信代码的可读性会受到很大影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:25:06.873

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[XMLTable](@x XML)  
RETURNS TABLE 
AS RETURN 
WITH cte AS (  
SELECT 
        1 AS lvl,  
        x.value('local-name(.)','NVARCHAR(MAX)') AS Name,  
        CAST(NULL AS NVARCHAR(MAX)) AS ParentName, 
        CAST(1 AS INT) AS ParentPosition, 
        CAST(N'Element' AS NVARCHAR(20)) AS NodeType,  
        x.value('local-name(.)','NVARCHAR(MAX)') AS FullPath,  
        x.value('local-name(.)','NVARCHAR(MAX)')  
        + N'[' 
        + CAST(ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS NVARCHAR)  
        + N']' AS XPath,  
        ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS Position, 
        x.value('local-name(.)','NVARCHAR(MAX)') AS Tree,  
        x.value('text()[1]','NVARCHAR(MAX)') AS Value,  
        x.query('.') AS this,         
        x.query('*') AS t,  
        CAST(CAST(1 AS VARBINARY(4)) AS VARBINARY(MAX)) AS Sort,  
        CAST(1 AS INT) AS ID  
FROM @x.nodes('/*') a(x)  
UNION ALL 
SELECT 
        p.lvl + 1 AS lvl,  
        c.value('local-name(.)','NVARCHAR(MAX)') AS Name,  
        CAST(p.Name AS NVARCHAR(MAX)) AS ParentName, 
    CAST(p.Position AS INT) AS ParentPosition, 
        CAST(N'Element' AS NVARCHAR(20)) AS NodeType,  
        CAST(p.FullPath + N'/' + c.value('local-name(.)','NVARCHAR(MAX)') AS NVARCHAR(MAX)) AS FullPath,  
        CAST(p.XPath + N'/'+ c.value('local-name(.)','NVARCHAR(MAX)')+ N'['+ CAST(ROW_NUMBER() OVER(PARTITION BY c.value('local-name(.)','NVARCHAR(MAX)') 
        ORDER BY (SELECT 1)) AS NVARCHAR)+ N']' AS NVARCHAR(MAX)) AS XPath,  
        ROW_NUMBER() OVER(PARTITION BY c.value('local-name(.)','NVARCHAR(MAX)')
        ORDER BY (SELECT 1)) AS Position, 
        CAST( SPACE(2 * p.lvl - 1) + N'|' + REPLICATE(N'-', 1) + c.value('local-name(.)','NVARCHAR(MAX)') AS NVARCHAR(MAX)) AS Tree,  
        CAST( c.value('text()[1]','NVARCHAR(MAX)') AS NVARCHAR(MAX) ) AS Value, c.query('.') AS this,  
        c.query('*') AS t,  
        CAST(p.Sort + CAST( (lvl + 1) * 1024 + (ROW_NUMBER() OVER(ORDER BY (SELECT 1)) * 2) AS VARBINARY(4)) AS VARBINARY(MAX) ) AS Sort,  
        CAST((lvl + 1) * 1024 + (ROW_NUMBER() OVER(ORDER BY (SELECT 1)) * 2) AS INT)  
FROM cte p  
CROSS APPLY p.t.nodes('*') b(c)), cte2 AS (  
                                            SELECT 
                                            lvl AS Depth,  
                                            Name AS NodeName,  
                                            ParentName, 
                                            ParentPosition, 
                                            NodeType,  
                                            FullPath,  
                                            XPath,  
                                            Position, 
                                            Tree AS TreeView,  
                                            Value,  
                                            this AS XMLData,  
                                            Sort, ID  
                                            FROM cte  
UNION ALL 
SELECT 
        p.lvl,  
        x.value('local-name(.)','NVARCHAR(MAX)'),  
        p.Name, 
        p.Position, 
        CAST(N'Attribute' AS NVARCHAR(20)),  
        p.FullPath + N'/@' + x.value('local-name(.)','NVARCHAR(MAX)'),  
        p.XPath + N'/@' + x.value('local-name(.)','NVARCHAR(MAX)'),  
        1, 
        SPACE(2 * p.lvl - 1) + N'|' + REPLICATE('-', 1)  
        + N'@' + x.value('local-name(.)','NVARCHAR(MAX)'),  
        x.value('.','NVARCHAR(MAX)'),  
        NULL,  
        p.Sort,  
        p.ID + 1  
FROM cte p  
CROSS APPLY this.nodes('/*/@*') a(x)  
)  
SELECT 
        ROW_NUMBER() OVER(ORDER BY Sort, ID) AS ID,  
        ParentName, ParentPosition,Depth, NodeName, Position,   
        NodeType, FullPath, XPath, TreeView, Value, XMLData 
FROM cte2 
```

# exception - 在 Windows 事件查看器中诊断 CLR 错误

> ID：711032
> 
> 赞同：6
> 
> 时间：2009-04-02T18:32:06.620
> 
> 标签：exception, exception-handling, clr, event-log, crash-dumps

我们有一个在生产中崩溃的 .NET 桌面应用程序。我们如何诊断错误？我想知道发生的异常类型、错误消息和堆栈跟踪。

因为我们的代码没有处理异常，所以我们收到了*“此应用程序遇到问题，需要关闭”* Windows 消息框。唯一的选择是关闭，没有调试按钮。

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc793966.aspx)建议查看 Windows 事件注册表。我在那里查了一下，里面的信息如下：

> 错误应用程序 Initect.Server.UI.exe，版本 0.12.9084.90，时间戳 0x49cac472，错误模块 KERNEL32.dll，版本 6.0.6001.18000，时间戳 0x4791a81d，异常代码 0xe0434f4d，错误偏移量 0x0002f35f，进程 id 0x44c，应用程序启动时间 019070x

这些信息如何告诉我异常类型、堆栈跟踪和错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T18:36:17.123

这些信息不足以让您获得堆栈跟踪、异常类型、错误消息等。

您可以在 Windows Server 2008 上配置 Windows 错误报告（向您显示问题并需要关闭 UI）以始终收集您可以随后调试的转储文件。这不需要您在生产环境中安装 Visual Studio 或任何其他调试器。

[http://blogs.technet.com/askperf/archive/2008/02/05/ws2008-windows-error-reporting.aspx](http://blogs.technet.com/askperf/archive/2008/02/05/ws2008-windows-error-reporting.aspx)显示了执行此操作的正确注册表设置。

# iphone - iPhone应用启动技巧？

> ID：711036
> 
> 赞同：0
> 
> 时间：2009-04-02T18:34:09.843
> 
> 标签：iphone, app-store

我刚刚完成了我的第一个 iPhone 应用程序。这是一个小游戏，我想以 99 美分的价格推出它。

所以我担心的是，一个应用程序通常会在新发布的列表中停留多长时间。另外，有没有关于时间等的启动技巧？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T04:15:01.820

这些天应用程序在新应用程序列表中停留数小时而不是数天。过去，更新可以让您获得更好的可见性，但我的最后一次更新几乎没有引起销售量的下降，所以我认为这不再是真的了。不过，这可能取决于您所在的类别。

淘金热不幸地结束了。过去，仅仅在应用商店中就产生了成百上千的销售额。这绝对不再是真的了。现在你需要运气或营销。

你可以做的事情：

*   向尽可能多的网站提供评论副本。大多数人的知名度有限，但如果你能进入更大的网站，你可能会从中获得一些销售。
*   提供免费的限量版。
*   在您的网站上建立邮件列表
*   到处拉皮条。在您的签名中，在您的网站上
*   开始写第二个游戏

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T18:43:49.947

尽快 - 为什么要等待，对吧？实际上，您的真正发布日期将由 Apple 决定，具体取决于他们审核和批准您的应用程序需要多长时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T03:45:10.503

我听到的一个提示是合理地经常更新。

当您更新时，您的应用程序可能会重新出现在最近添加/更新的某些类别列表中。这可以给你一些额外的可见性，这可能正是你领先的原因。

# c# - C# WebBrowser 控件未触发 DocumentCompleted 事件

> ID：711040
> 
> 赞同：3
> 
> 时间：2009-04-02T18:35:37.047
> 
> 标签：c#, multithreading, events, browser

我有一个使用 C# WebBrowser 控件的程序，它需要检测加载了哪个页面以确定下一步要做什么。该程序在办公室的大多数员工计算机上运行良好，但在某些计算机上却无法运行。

我已经确定问题是`documentCompleted`事件没有在它不起作用的那些计算机上触发。

该程序确实使用线程来处理数据，并且`webbrowser.navigate`调用是通过委托进行的。但我也更改了代码，不使用代表进行导航操作，结果没有变化。

`WebBrowser`我还制作了一个只有 basic和 debug的单独程序，并且在使用该程序时**会**`textfield`触发该`DocumentCompleted`事件。

 **注意：未触发的计算机是具有单核/线程处理器的旧 PC。

我对此一无所知，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-02-05T12:28:48.417

正如CodeBlock所解释的，这似乎与安装状态有关`Microsoft.mshtml.dll`

我们的客户`Microsoft.mshtml.dll`在 GAC（也不是计算机）中不存在，然后该`WebBrowser`组件永远不会触发任何事件。

`WebBrowser`通过在类中使用反射器，`DocumentComplete`事件由一个名为 的子类引发，该子类`WebBrowserEvent`实现了一个私有接口`DWebBrowserEvents2`。

这个接口是一个`ComImport`，`{34A715A0-6587-11D0-924A-0020AFC7AC4D}`我想它与 Microsoft.mshtml.dll 有关。

所以我们的解决方案是安装[Office 2003 Redistributable Primary Interop Assemblies](http://www.microsoft.com/downloads/details.aspx?familyid=3C9A983A-AC14-4125-8BA0-D36D67E0F4AD&displaylang=en "Office 2003 更新：可再发行主互操作程序集")，它在 Program Files 上安装 DLL，然后在 GAC 上注册它。

注意：不要注意需要.NET Framework 1.1 或office，它只是复制一些dll。

注意 2：[2007 软件包](http://www.microsoft.com/downloads/details.aspx?familyid=59DAEBAA-BED4-4282-A28C-B864D8BFA513&displaylang=en "2007 Microsoft Office System 更新：可再发行主互操作程序集")似乎包含相同的 dll。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-11-27T17:22:41.267

@帕维尔L：

这里的问题是您使用了来自 mshtml.dll 的 Web 浏览器控件，但 .NET 框架不包含此文件。解决方案只需将 mshtml.dll 复制到您的应用程序目录或将 Microsoft.mshtml 的“复制本地”属性设置为 True。

对不起我的英语不好：D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-03T15:27:30.033

在尝试解决[这个问题](https://stackoverflow.com/questions/707518/printing-transformed-xml)时，我最初将 WebBrowser 控件放在 using() 块中，并且它在 DocumentCompleted 事件触发之前自行处理。您是在做类似的事情，还是 WebBrowser 在保持打开状态的表单上？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T18:53:28.130

如果是线程问题，请确保您正在调用 Application.DoEvents()。当我没有这样做时，我遇到了 WebBrowser 无法正常工作的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-11-01T15:47:50.290

好吧，我想分享更简单的解决方案，而不是安装软件包。

正如之前所述，DocumentComplete 事件以某种方式依赖于 Microsoft.mshtml.dll 文件。您可以在安装了 Visual Studio 的机器上找到它。因此需要将其复制并安装到目标机器上。以下是该过程的描述：

1.  将 Microsoft.mshtml.dll 文件放入“%ProgramFiles%\Microsoft.NET\Primary Interop Assemblies”文件夹中。
2.  然后将其拖放到“%SystemRoot%\Assembly”文件夹中。
3.  使用 RegAsm.exe 实用程序（位于“%windir%\Microsoft.NET\Framework”的相应子文件夹中）注册库。

PS也许它可能会以更好的方式完成，但这个解决方案有效，我希望它对你有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-27T13:27:11.120

为了触发 documentCompleted-Event，
需要将 Web 浏览器的 visible 属性设置为 true。

如果您有多个屏幕，它也可以是可见的。
如果您有 > 1 个屏幕，请关闭除主屏幕以外的所有屏幕，这应该可以解决问题。
或者，将窗口移动到第二个屏幕。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T17:14:44.693

确保`webbrowser.Visible=true;`这对我有用，我以前遇到过类似的问题。

# macos - 如何在 MacOS 上使用 aquamacs 设置 cscope？

> ID：711046
> 
> 赞同：3
> 
> 时间：2009-04-02T18:37:23.457
> 
> 标签：macos, emacs, cscope, aquamacs

你能告诉我如何在 MacOS 上使用 aquamacs 设置 cscope 吗？

我关注了来自 Google 的链接，说明如何为我的源代码构建 cscope 数据库。但是如何使用 aquamacs 调用 cscope？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-14T14:56:25.333

Mx shell 然后 'cd your_dir; cscope ...." ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-21T02:47:03.973

以下是使用 2011 年 8 月 4 日 braeburn.aquamacs.org 上的 Aquamacs 2.3a [GNU Emacs 23.3.50.1 (i386-apple-darwin9.8.0, NS apple-appkit-949.54) 在 Mac 上执行 - Aquamacs Distribution 2.3a] OS X 10.6.8：

[从http://sourceforge.net/projects/cscope/files/](http://sourceforge.net/projects/cscope/files/)下载 cscope （使用的版本 15.7a）。bunzip2 并解压软件。执行“配置”；做吧'。如果您发现错误，请检查以下页面并按照[http://cean2wizard.blogspot.com/2011/02/cscope-157a-build-with-mac-os-x-中的说明中的说明修补文件 constant.h雪.html](http://cean2wizard.blogspot.com/2011/02/cscope-157a-build-with-mac-os-x-snow.html)。基本上，对于 Mac，将 TERMINFO 设置为 1。执行“make”，然后执行“sudo make install”。

转到 contrib 目录。将 xcscope.el 复制到 ~/Library/Application\ Support/Aquamacs\ Emacs/

将目录更改为 ~/Library/Application\ Support/Aquamacs\ Emacs/，编辑 site-start.el 并添加以下行：

（需要`xcscope）

启动 Aquamacs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-12T11:48:03.947

安装 xscope.el [http://www.emacswiki.org/emacs/CScopeAndEmacs#toc3](http://www.emacswiki.org/emacs/CScopeAndEmacs#toc3)

我使用 Emacs 的 GNU Cocoa 构建，但我认为这也适用于您。

# log4net - 如何为 Log4Net 控制台 Appender 设置转换模式以清除屏幕？

> ID：711047
> 
> 赞同：1
> 
> 时间：2009-04-02T18:37:33.550
> 
> 标签：log4net

我希望我的控制台附加程序在每次新写入之前清除屏幕，因此一次只显示 1 个消息。我有第二个文件追加器来显示历史记录。我希望有这样的事情：

```
 <appender name="ColoredConsoleAppender" type="log4net.Appender.ColoredConsoleAppender"
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="cls%newline %date %message%newline" />
    </layout>
  </appender> 
```

先感谢您。-达斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-10T00:35:46.723

如果有任何类型的转义序列会清除屏幕，请尝试以下操作：

```
<appender name="ColoredConsoleAppender" type="log4net.Appender.ColoredConsoleAppender"
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%property{cls} %date %message%newline" />
  </layout>
</appender> 
```

然后在配置 log4net 之前的代码中，设置 log4net 属性“cls”：

```
string cls = "escape-sequence-here";
log4net.GlobalContext.Properties["cls"] = cls; 
```

在其中将适当的转义序列分配给字符串变量`cls`。

# sqlite - Sqlite 是做什么用的？

> ID：711048
> 
> 赞同：20
> 
> 时间：2009-04-02T18:37:55.530
> 
> 标签：sqlite, connection

我不知道这是多么权威，但我发现了这个：

[http://www.sqlite.org/cvstrac/wiki?p=PerformanceConsiderations](http://www.sqlite.org/cvstrac/wiki?p=PerformanceConsiderations)

而且与sqlite有很多联系似乎并不好。这似乎对 Web 和大多数拥有多个用户的应用程序不利。当您不需要那么多连接时，我很难考虑使用什么 sqlite。我能想到的每个程序都需要用户，有时会有很多用户，那么我会使用数据库来做什么，而不允许那么多连接呢？我考虑过原型，但是当我可以连接到更大的数据库时，为什么还要使用它呢？嵌入式应用程序可能吗？

谢谢你。

编辑：谢谢大家。我查看了下面推荐的页面，但对某些事情感到困惑：

[在 sqlite 的适当用途下，它具有：](http://www.sqlite.org/whentouse.html)

SQLite 运行良好的情况

•网站

SQLite 通常可以很好地作为中低流量网站（也就是说，所有网站的 99.9%）的数据库引擎。当然，SQLite 可以处理的网络流量取决于网站使用其数据库的程度。一般来说，任何每天点击量少于 100K 的网站都可以使用 SQLite。10 万次点击/天的数字是保守估计，而不是硬性上限。SQLite 已被证明可以处理 10 倍的流量。

另一个 RDBMS 可能工作得更好的情况

•客户端/服务器应用程序

如果您有许多客户端程序通过网络访问公共数据库，则应考虑使用客户端/服务器数据库引擎而不是 SQLite。SQLite 将在网络文件系统上工作，但由于与大多数网络文件系统相关的延迟，性能不会很好。此外，许多网络文件系统实现的文件锁定逻辑包含错误（在 Unix 和 Windows 上）。如果文件锁定不能正常工作，则可能有两个或多个客户端程序同时修改同一数据库的同一部分，从而导致数据库损坏。因为这个问题是由底层文件系统实现中的错误引起的，所以 SQLite 无法阻止它。

一个好的经验法则是，在通过网络文件系统从多台计算机同时访问同一个数据库的情况下，您应该避免使用 SQLite。

问题：

我将在这里展示我的无知，但这两者有什么区别？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-02T18:39:54.027

这适用于您无法访问“真实”数据库但仍需要关系数据库功能的情况。例如，Firefox 在 SQLite 数据库中存储了一堆关于您的设置/历史/等的信息。你不能指望每个运行 firefox 的人都在他们的机器上安装 MySQL 或 postgre。

它还完全有能力运行相对较低流量、阅读量大的网站。它的整体性能非常好，超过了大多数网站对其流量水平的需求。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2009-04-02T18:44:49.553

sqlite本身很好地回答了这个问题：[适当使用sqlite](http://www.sqlite.org/whentouse.html)

```
Another way to look at SQLite is this: 
SQLite is not designed to replace Oracle. It is designed to replace fopen(). 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-02T18:47:32.527

我还发现，使用 SQLite 可以非常快速地将原型应用程序组合在一起，而无需使用单独的数据库服务器或使用 MySQL/Oracle/Whatever 实例使开发环境陷入困境。

如果需要，还可以轻松获取数据库并将其移动到不同的机器上。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-02T18:39:45.697

它通常用于嵌入式应用程序。

当您无法访问数据库服务时，使用像存储这样的数据库会非常方便。因此使用 SQLite，因为它只是您存储在某处的文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-02T18:45:04.047

iPhone 将其用于通话记录、SMS 消息、联系人和其他类型的数据。就像 Ólafur Waage 所说，它非常适合移动设备上的嵌入式应用程序，因为它是轻量级的。我也在独立应用程序中使用过它。易于使用，可在大多数平台上使用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-02T18:45:22.953

想想可以使用数据库的简单客户端或桌面应用程序，比如一个糟糕的例子，一个地址簿。sqlite 不是将 mysql 或 postgre 之类的大型数据库引擎与您的可交付成果捆绑在一起，而是非常轻量级且易于包含在您的成品应用程序中。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-02T22:43:17.483

这个[FLOSS Weekly 播客集](http://twit.tv/floss26)与 SQLite 的创建者进行了交谈，并涵盖了您将使用它的类型。从手机文件系统到小型网站，应有尽有。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-01-16T11:42:18.043

用最简单的术语来说，SQLite 是一个提供关系数据库管理系统或 RDBMS 的公共域软件包。关系数据库系统用于在大表中存储用户定义的记录。除了数据存储和管理之外，数据库引擎还可以处理复杂的查询命令，这些命令可以组合来自多个表的数据以生成报告和数据摘要。其他流行的 RDBMS 产品包括商业方面的 Oracle 数据库、IBM 的 DB2 和 Microsoft 的 SQL Server，而 MySQL 和 PostgreSQL 是流行的开源产品。SQLite 中的“Lite”并不是指它的功能。相反，在设置复杂性、管理开销和资源使用方面，SQLite 是轻量级的。

有关 SQLite 的详细信息和解决方案，请访问以下链接：

[http://blog.developeronhire.com/what-is-sqlite-sqlite/](http://blog.developeronhire.com/what-is-sqlite-sqlite/)

谢谢你。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-02T18:42:04.803

上面两个答案说的是什么。稍微扩展 Chad Birch 的回答，它对 SQLite 数据库的调用，以及导致 FF3 在 linux 中如此缓慢的 sync() 实现相当糟糕。

# xml - Ruby：libxml-ruby 并添加格式良好的兄弟节点

> ID：711051
> 
> 赞同：1
> 
> 时间：2009-04-02T18:39:19.177
> 
> 标签：xml, ruby, formatting, libxml-ruby

鉴于我现有的 XML (test.xml)：

```
<root>
  <element>
    <child id="1" />
    <child id="2" />
    <child id="3" />
  </element>
</root> 
```

还有我的红宝石代码：

```
require 'rubygems'
require 'xml'

parser = XML::Parser.file("test.xml")
doc = parser.parse

target = doc.find('/*/element')
target << child = XML::Node.new('child')
child['id'] = '4'

XML.indent_tree_output = true
doc.save(filename, :indent => true, :encoding => XML::Encoding::UTF_8) 
```

我的问题是它像这样格式化输出：

```
<root>
  <element>
    <child id="1" />
    <child id="2" />
    <child id="3" />
  <child id="4" /></element>
</root> 
```

...随后添加如下所示：

```
<root>
  <element>
    <child id="1" />
    <child id="2" />
    <child id="3" />
  <child id="4" /><child id="5" /><child id="6" /></element>
</root> 
```

我**想要**的是：

```
<root>
  <element>
    <child id="1" />
    <child id="2" />
    <child id="3" />
    <child id="4" />
    <child id="5" />
    <child id="6" />
  </element>
</root> 
```

...但我怎么得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T10:49:06.803

代替
`parser = XML::Parser.file("test.xml")`

和
`parser = XML::Parser.file("test.xml", :options => XML::Parser::Options::NOBLANKS )`

这是帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:01:23.367

如果您使用的是 document.save，请确保将 indent 设置为 true，同时确保设置了 XML.indent_tree_output。像这样的东西：

```
XML.indent_tree_output = true
doc.save(filename, :indent => true, :encoding => XML::Encoding::UTF_8) 
```

Rubyforge 不适合我，所以我无法在文档中验证它，但我认为两者都需要设置为 true 才能缩进和换行。

# svn - 自动添加 svn:needs-lock

> ID：711053
> 
> 赞同：21
> 
> 时间：2009-04-02T18:39:34.060
> 
> 标签：svn, svn-propset

嗨，我想知道 SVN 服务器是否有办法在任何二进制而非文本文件上自动分配 svn:needs-lock 属性。

我们有一个相当小的开发团队，但是让每个人都记住在新创建的二进制文件上设置这个属性是没有意义的，因为很容易忘记这样的事情。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-02T11:07:11.477

Apache Subversion 1.8 引入了需要**SVN 1.8 客户端的**[Repository Dictated Configuration](http://subversion.apache.org/docs/release-notes/1.8.html#repos-dictated-config)功能，但 1.8 服务器不是必需的，因为这是客户端功能。

 **[`svn:auto-props`使用 Subversion 1.8，您可以使用新的 Subversion继承属性](http://svnbook.red-bean.com/en/1.8/svn.advanced.props.html#svn.advanced.props.inheritable)在存储库中配置 auto-props 模式。

例如，将`svn:auto-props`值设置为`*.exe = svn:needs-lock=*`存储库根目录（或表示项目根目录的存储库路径）上的属性。这将导致*每个新添加*的 *.exe 文件都`svn:needs-lock=*`应用了属性。

您可以在 Subversion 属性中存储多行值，因此您可以将以下标准 svn:needs-lock 和 MIME 模式添加到`svn:auto-props`：

```
*.bmp = svn:mime-type=image/bmp;svn:needs-lock=*
*.gif = svn:mime-type=image/gif;svn:needs-lock=*
*.ico = svn:mime-type=image/x-icon;svn:needs-lock=*
*.jpeg = svn:mime-type=image/jpeg;svn:needs-lock=*
*.jpg = svn:mime-type=image/jpeg;svn:needs-lock=*
*.png = svn:mime-type=image/png;svn:needs-lock=*
*.tif = svn:mime-type=image/tiff;svn:needs-lock=*
*.tiff = svn:mime-type=image/tiff;svn:needs-lock=*    
*.doc = svn:mime-type=application/x-msword;svn:needs-lock=*
*.docx = svn:mime-type=application/x-msword;svn:needs-lock=*
*.jar = svn:mime-type=application/octet-stream;svn:needs-lock=*
*.odc = svn:mime-type=application/vnd.oasis.opendocument.chart;svn:needs-lock=*
*.odf = svn:mime-type=application/vnd.oasis.opendocument.formula;svn:needs-lock=*
*.odg = svn:mime-type=application/vnd.oasis.opendocument.graphics;svn:needs-lock=*
*.odi = svn:mime-type=application/vnd.oasis.opendocument.image;svn:needs-lock=*
*.odp = svn:mime-type=application/vnd.oasis.opendocument.presentation;svn:needs-lock=*
*.ods = svn:mime-type=application/vnd.oasis.opendocument.spreadsheet;svn:needs-lock=*
*.odt = svn:mime-type=application/vnd.oasis.opendocument.text;svn:needs-lock=*
*.pdf = svn:mime-type=application/pdf;svn:needs-lock=*
*.ppt = svn:mime-type=application/vnd.ms-powerpoint;svn:needs-lock=*
*.ser = svn:mime-type=application/octet-stream;svn:needs-lock=*
*.swf = svn:mime-type=application/x-shockwave-flash;svn:needs-lock=*
*.vsd = svn:mime-type=application/x-visio;svn:needs-lock=*
*.xls = svn:mime-type=application/vnd.ms-excel;svn:needs-lock=*
*.zip = svn:mime-type=application/zip;svn:needs-lock=* 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-02T19:14:29.543

编辑 svn 配置文件并为 auto props 添加一个条目，或者将`svn:auto-props`版本化属性用于 SVN 1.8 和更新的客户端。[阅读SVNBook](http://svnbook.red-bean.com/en/1.8/svn.advanced.props.html#svn.advanced.props.auto)！

**编辑：**

从 SVN 1.8 开始，您可以将该`svn:auto-props`属性应用于存储库的根路径。请参阅此[发行说明](http://subversion.apache.org/docs/release-notes/1.8.html#repos-dictated-config)和更新[的 SVNBook 1.8 章节](http://svnbook.red-bean.com/en/1.8/svn.advanced.props.html#svn.advanced.props.auto)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-03T01:57:51.977

需要注意的是，必须在每个正在使用的 SVN 客户端上配置 auto props 方法。因此，当您在新机器上设置新开发人员或现有开发人员时，您必须记住执行此配置。

如果您都在使用[TortoiseSVN](http://tortoisesvn.tigris.org/)，您可以在每个结帐的基本文件夹上设置[tsvn:autoprops](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-propertypage.html#tsvn-dug-propertypage-auto-props)属性，所有 TortoiseSVN 客户端都将使用它。

如果您真的想确定它，您需要在每个存储库中放置一个[预提交](http://svnbook.red-bean.com/en/1.5/svn.ref.reposhooks.pre-commit.html)挂钩。[执行](http://svn.collab.net/viewvc/svn/trunk/contrib/hook-scripts/enforcer/)器脚本可能很容易为此提供工具。

如果您有任何 python-fu，[RepoGuard （](http://repoguard.tigris.org/) [SVNChecker](http://svnchecker.tigris.org/)的继任者）看起来也很有用。

我认为，无论您选择哪个，都无法将属性追溯应用到存储库中的现有文件。但是，您可能可以在文件的下一次提交时强制执行它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-01-15T10:06:13.980

在这个 Subversion wiki 上有一个页面，描述了有关如何自动添加需求锁定以及如何确保已设置它的所有不同选项。该页面还提供了示例脚本和配置详细信息：

[http://www.orcaware.com/svn/wiki/Automatic_lock-modify-unlock](http://www.orcaware.com/svn/wiki/Automatic_lock-modify-unlock)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-25T11:25:17.083

使用预提交挂钩

```
#!/bin/bash

REPOS="$1"
TXN="$2"

SVNLOOK=/usr/bin/svnlook
ICONV=/usr/bin/iconv

SVNLOOKOK=1

# Check files for svn:needs-lock property
# Exit on all errors.
set -e

echo "`$SVNLOOK changed -t "$TXN" "$REPOS"`" | while read REPOS_PATH
do
 if [[ $REPOS_PATH =~ (A|M|U)[[:blank:]]{3}(.*)\.(.*) ]]
 then
  if [ ${#BASH_REMATCH[*]} -ge 2 ]
    then
  FILENAME=${BASH_REMATCH[2]}.${BASH_REMATCH[3]};

  # Make sure every file has the svn:needs-lock property set
   if [ "" == "`$SVNLOOK propget -t \"$TXN\" \"$REPOS\" svn:needs-lock \"$FILENAME\" 2> /dev/null`" ]
    then
    ERROR=1;
    echo "" >&2
    echo "svn:needs-lock property has to be set on \"$FILENAME\"" >&2
    echo "" >&2
   fi
  fi
 fi
 test -z $ERROR || (exit 1)
done

# All checks passed, so allow the commit.
exit 0 
```

和一个预锁钩

```
#!/bin/bash

REPOS="$1"
PATH="$2"
USER="$3"

# If a lock exists and is owned by a different person, don't allow it
# to be stolen (e.g., with 'svn lock --force ...').

# (Maybe this script could send email to the lock owner?)
SVNLOOK=/usr/bin/svnlook
GREP=/bin/grep
SED=/bin/sed

LOCK_OWNER=`$SVNLOOK lock "$REPOS" "$PATH" | \
            $GREP '^Owner: ' | $SED 's/Owner: //'`

# If we get no result from svnlook, there's no lock, allow the lock to
# happen:
if [ "$LOCK_OWNER" = "" ]; then
  exit 0
fi

# If the person locking matches the lock's owner, allow the lock to
# happen:
if [ "$LOCK_OWNER" = "$USER" ]; then
  exit 0
fi 
```

# computer-vision - 学习计算机视觉

> ID：711057
> 
> 赞同：34
> 
> 时间：2009-04-02T18:39:51.483
> 
> 标签：computer-vision

我对计算机视觉领域及其潜力非常感兴趣。有没有可以与参考书一起学习的示例（最好在 .NET 中实现）？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-02T19:34:23.380

### 示例视觉代码

*   [视觉源代码](http://www.cs.cmu.edu/%7Ecil/v-source.html)- 卡内基梅隆大学
*   [开源计算机视觉库](http://sourceforge.net/projects/opencvlibrary/)- Sourceforge
*   [计算机视觉测试图像](http://www.cs.cmu.edu/%7Ecil/v-images.html)
*   [libsift - 尺度不变特征变换实现](http://www.nowozin.net/sebastian/tu-berlin-2006/libsift/)
*   [OpenCV 的 C# 包装器](http://coolthingoftheday.blogspot.com/2008/08/opencv-open-source-computer-vision-for.html)

### 资源

*   [在线计算机视觉](http://www.computervisiononline.com)- 在线计算机视觉
*   [计算机视觉“家”](http://www.cs.cmu.edu/afs/cs/project/cil/ftp/html/vision.html) ——卡内基梅隆大学
*   [视觉系统讲座](http://www.cs.cf.ac.uk/Dave/Vision_lecture/Vision_lecture_caller.html)- 卡迪夫计算机科学学院
*   [计算机视觉系统讲座](http://www.cs.nott.ac.uk/%7Etpp/G5BVIS/lectures.html)- 诺丁汉大学计算机科学系
*   [特征检测](http://en.wikipedia.org/wiki/Feature_detection_(computer_vision))- 维基百科文章
*   [尺度不变特征变换](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)- 维基百科文章

### 堆栈溢出问题

*   [我在哪里可以了解图像处理和对象识别？](https://stackoverflow.com/questions/432569/where-do-i-start-learning-about-image-processing-and-object-recognition)
*   [图像处理教科书？](https://stackoverflow.com/questions/207092/image-processing-textbook)
*   [计算机视觉参考资料](https://stackoverflow.com/questions/98438/computer-vision-reference)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-02T18:44:58.710

OpenCV（开放计算机视觉）是最流行的库，它已被 C# 包装：

[http://www.codeproject.com/KB/cs/Intel_OpenCV.aspx](http://www.codeproject.com/KB/cs/Intel_OpenCV.aspx)

关于这个包装器和一般库的一些讨论在这里：

[http://coolthingoftheday.blogspot.com/2008/08/opencv-open-source-computer-vision-for.html](http://coolthingoftheday.blogspot.com/2008/08/opencv-open-source-computer-vision-for.html)

-亚当

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-02T19:11:05.403

虽然 OpenCV 库使用起来很有趣，但在您学习时它并没有提供很多透明度。如果您有兴趣实际了解该领域，我建议您研究低级图像处理库并实现您自己的计算机视觉应用程序。一旦您编写了自己的基本 CV 应用程序，使用 OpenCV 库就会变得*容易*得多。我建议通过以下主题快速了解基础知识：

*   用于边缘检测的 sobel 算子
*   尝试颜色分割
*   使用视差图从立体图像重建 3d 信息

这是一个包含一些很好的测试图像的站点（[http://www.cs.cmu.edu/~cil/v-images.html](http://www.cs.cmu.edu/~cil/v-images.html)）。

我还在（[http://www.cs.nott.ac.uk/~tpp/G5BVIS/lectures.html](http://www.cs.nott.ac.uk/~tpp/G5BVIS/lectures.html)）找到了一个很好的课程幻灯片资源，涵盖了这些主题的大部分

快乐的黑客攻击 =)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-04-02T18:44:48.710

这是您可能会发现有用的大量代码、工具包和应用程序的集合

[http://www.cs.cmu.edu/~cil/v-source.html](http://www.cs.cmu.edu/~cil/v-source.html)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-04-02T19:06:47.630

您可以从查看此站点上的一些类似问题开始：

*   [我在哪里开始学习关于图像处理和对象识别的知识](https://stackoverflow.com/questions/432569/where-do-i-start-learning-about-image-processing-and-object-recognition)
*   [图像处理教科书](https://stackoverflow.com/questions/207092/image-processing-textbook)
*   [计算机视觉参考](https://stackoverflow.com/questions/98438/computer-vision-reference)

我也可以看看这两个网站：

*   [http://www.cs.cmu.edu/afs/cs/project/cil/ftp/html/vision.html](http://www.cs.cmu.edu/afs/cs/project/cil/ftp/html/vision.html)
*   [http://www.cs.cf.ac.uk/Dave/Vision_lecture/Vision_lecture_caller.html](http://www.cs.cf.ac.uk/Dave/Vision_lecture/Vision_lecture_caller.html)

这些站点提供信息、教程和代码示例，尽管它们不再被积极维护。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-02T18:44:58.133

sourceforge 上有一个 OpenCV 项目和一本书，你也可以得到。 [你可以在这里看到它](http://sourceforge.net/projects/opencvlibrary/)。但是，这不是 .NET 解决方案，而是 C

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-02T18:45:42.670

我推荐[Open Computer Vision Library](http://sourceforge.net/projects/opencvlibrary/)。它被人们津津乐道，看起来很有希望。它甚至还有一本 O'Reilly 随附的书 :)

> 开放式计算机视觉库拥有超过 500 种算法、文档和示例代码，用于实时计算机视觉。教程文档在 O'Reilly Book 中

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-02T18:46:51.407

我最近在[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)上做了一些工作，它似乎是一种相当有趣的现代[特征检测](http://en.wikipedia.org/wiki/Feature_detection_(computer_vision))算法，它是机器视觉中的主要（也许更高级）主题之一。有人为 SIFT 编写了一个[C# 库](http://user.cs.tu-berlin.de/~nowozin/libsift/)，其中包含一个非常好的示例，可以自动将同一场景的不同照片拼接在一起。诚然，这不是一个非常完整的答案，我不能推荐参考书，但希望无论如何它应该对你有所帮助......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-26T15:21:57.820

[AForge.NET 库](http://www.aforgenet.com/)非常好，它是用 C# 编写的，源代码可在[此处](http://code.google.com/p/aforge/)获得。

支持的功能有：

*   AForge.Imaging - 带有图像处理例程和过滤器的库；
*   AForge.Vision - 计算机视觉库；
*   AForge.Neuro - 神经网络计算库；
*   AForge.Genetic - 进化编程库；
*   AForge.Fuzzy - 模糊计算库；
*   AForge.MachineLearning - 机器学习库；
*   AForge.Robotics - 提供一些机器人套件支持的库；
*   AForge.Video - 一组用于视频处理等的库。

这些算法可能不像其他一些答案那样尖端/学术，但解决了许多工程问题（将视频放入您的应用程序等）。

# regex - 如何使用 gvim 向模式添加回车（又名 ENTER）？

> ID：711061
> 
> 赞同：11
> 
> 时间：2009-04-02T18:40:55.693
> 
> 标签：regex, vim

用包含的模式替换模式的`vi`/语法是什么？我知道这是可能的，但从来没有想过要深入了解文档以了解如何去做。`gvim``<ENTER>`

像这样的东西：

```
 :s/\(word\)/\1<ENTER>/ 
```

但正确:)

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-02T18:45:08.117

使用“转义”编码：

```
:s/\(word\)/\1\r/ 
```

[有关模式空格](http://www.vim.org/htmldoc/pattern.html#whitespace)转义的信息，请参阅 Vim 文档。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-02T18:46:13.077

```
:s/\(word\)/\1\r/ 
```

或者，使用`Ctrl+V`or`Ctrl+Q`引用（转义）`Enter`键：

```
:s/\(word\)\1^QENTER/ 
```

Enter键在哪里`^Q`，在哪里。`Ctrl+Q``ENTER`

**澄清：根据您的安装，或者*应该* 工作。引用字符在某些平台上有所不同。`^Q``^V`**

（这具有为您使用的任何平台插入适当的行尾字符的有用副作用，消除了`CR` *vs.* `LF` *vs.* `CRLF`问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T19:15:00.823

只是为了澄清的目的，现在我们正在谈论回车，应该注意 RETURN 和 ENTER 键不一样，或者更正确地说，它们不应该是一样的。

我已经有一段时间没有使用桌面键盘了，但是 ENTER 键通常是右下角的那个，而 RETURN 键是中间大的那个。

RETURN 键是用来输入回车的，而 ENTER 键是用来输入命令的。我记得一个旧的 DOS 编辑器 EDT，其中 RETURN 键用于换行，而 ENTER 键用于发出命令。您无法使用 RETURN 发出命令。我认为 ENTER 也给了 ^1 （换行）。

今天，这种差异有些消失了，尽管我仍然不时遇到尊重它的编辑。

2 个例子： [一个](http://popcorn.cx/computers/apple/peripherals/input/keyboards/m3501-01.jpg)、[两个](http://upload.wikimedia.org/wikipedia/commons/6/6f/Return.png)和一个更明显的[三个](http://us.st12.yimg.com/us.st.yimg.com/I/pckeyboards_2043_956536)

# web-services - 什么是好的关键字提取网络服务？

> ID：711062
> 
> 赞同：4
> 
> 时间：2009-04-02T18:41:36.817
> 
> 标签：web-services

我正在寻找一种可以从一段文本中提取重要关键字的网络服务。

我已经尝试过 Yahoo Term Extraction 服务。该服务的问题在于它不会为短文本提供任何结果。

或者，是否有任何我可以使用的现成代码可以从一段文本中提取重要的关键字。即从字符串中删除所有通用词。

例如：

“我想买一台数码相机”

术语：“数码”、“相机”

谢谢。

还有另外两个相关的堆栈溢出问题并且有更多信息：

[从文本生成关键字的简单方法是什么？](https://stackoverflow.com/questions/465795/what-is-a-simple-way-to-generate-keywords-from-a-text) [过滤掉搜索查询的常用词](https://stackoverflow.com/questions/386995/filter-out-common-words-for-search-query)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-03T18:51:39.077

你可能想看看 www.opencalais.com （与路透社相关）是一个网络服务，手

你的文本“我想买一台数码相机”返回这个 rdf/xml 文档——

```
 <!--Use of the Calais Web Service is governed by the Terms of Service located at http://www.opencalais.com. By using this service or the results of the service you agree to these terms of service.-->
    <!--Relations: GenericRelations

    Technology: digital camera-->
    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:c="http://s.opencalais.com/1/pred/">
        <rdf:Description c:allowDistribution="true" c:allowSearch="true" c:calaisRequestID="1ef6064f-283c-4fd4-a922-0ff493c4353a" c:externalID="calaisbridge" c:id="http://id.opencalais.com/SLlKCS2i2mZA3ABrQS0F9Q" rdf:about="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/sys/DocInfo" />
            <c:document>
    <![CDATA[<Document>
    <Date>2009-04-03</Date>
    <Body>I want to buy a digital camera</Body>
    </Document>]]>
    </c:document>
            <c:docTitle />
            <c:docDate>2009-04-03 00:00:00</c:docDate>
            <c:externalMetadata c:caller="calaisbridge" />
            <c:submitter>calaisbridge</c:submitter>
        </rdf:Description>
        <rdf:Description c:contentType="text/txt" c:emVer="UserVocabulariesIM" c:langIdVer="DefaultLangId" c:language="InputTextTooShort" c:processingVer="CalaisJob01" c:submissionDate="2009-04-03 14:14:42.532" rdf:about="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a/meta">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/sys/DocInfoMeta" />
            <c:docId rdf:resource="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a" />
            <c:submitterCode>416dcd8a-766f-0aa3-d94c-e5034b6ffc98</c:submitterCode>
            <c:signature>digestalg-1|sUmdk2pKaXLrsD0b2sNfX5dPvW4=|e+F5sMjqxqj0Qi+efzdG5D2s1TKBM//zH+NI1MNYvugY3FS9e3xP6g==</c:signature>
        </rdf:Description>
        <rdf:Description rdf:about="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a/lid/DefaultLangId">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/lid/DefaultLangId" />
            <c:docId rdf:resource="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a" />
            <c:lang rdf:resource="http://d.opencalais.com/lid/DefaultLangId/InputTextTooShort" />
        </rdf:Description>
        <rdf:Description rdf:about="http://d.opencalais.com/genericHasher-1/e224e552-7ebd-3ed1-aaa4-f8aba30331c2">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/em/e/Technology" />
            <c:name>digital camera</c:name>
        </rdf:Description>
        <rdf:Description rdf:about="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a/Instance/1">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/sys/InstanceInfo" />
            <c:docId rdf:resource="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a" />
            <c:subject rdf:resource="http://d.opencalais.com/genericHasher-1/e224e552-7ebd-3ed1-aaa4-f8aba30331c2" />
            <!--Technology: digital camera; -->
            <c:detection>[ment&gt;&lt;Date&gt;2009-04-03&lt;/Date&gt;&lt;Body&gt;I want to buy a ]digital camera[&lt;/Body&gt;&lt;/Document&gt;]</c:detection>
            <c:prefix>ment&gt;&lt;Date&gt;2009-04-03&lt;/Date&gt;&lt;Body&gt;I want to buy a </c:prefix>
            <c:exact>digital camera</c:exact>
            <c:suffix>&lt;/Body&gt;&lt;/Document&gt;</c:suffix>
            <c:offset>55</c:offset>
            <c:length>14</c:length>
        </rdf:Description>
        <rdf:Description rdf:about="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a/Relevance/1">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/sys/RelevanceInfo" />
            <c:docId rdf:resource="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a" />
            <c:subject rdf:resource="http://d.opencalais.com/genericHasher-1/e224e552-7ebd-3ed1-aaa4-f8aba30331c2" />
            <c:relevance>0.857</c:relevance>
        </rdf:Description>
        <rdf:Description rdf:about="http://d.opencalais.com/genericHasher-1/e8eac39c-f280-331e-9ccd-07f740d46ddb">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/em/r/GenericRelations" />
            <c:verb>buy</c:verb>
            <c:relationsubject>I</c:relationsubject>
            <!--digital camera-->
            <c:relationobject rdf:resource="http://d.opencalais.com/genericHasher-1/e224e552-7ebd-3ed1-aaa4-f8aba30331c2" />
        </rdf:Description>
        <rdf:Description rdf:about="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a/Instance/2">
            <rdf:type rdf:resource="http://s.opencalais.com/1/type/sys/InstanceInfo" />
            <c:docId rdf:resource="http://d.opencalais.com/dochash-1/97cdaf47-fa15-31a1-be2b-3be1184d412a" />
            <c:subject rdf:resource="http://d.opencalais.com/genericHasher-1/e8eac39c-f280-331e-9ccd-07f740d46ddb" />
            <!--GenericRelations: verb: buy; relationsubject: I; relationobject: digital camera; -->
            <c:detection>[&lt;Document&gt;&lt;Date&gt;2009-04-03&lt;/Date&gt;&lt;Body&gt;]I want to buy a digital camera[&lt;/Body&gt;&lt;/Document&gt;]</c:detection>
            <c:prefix>&lt;Document&gt;&lt;Date&gt;2009-04-03&lt;/Date&gt;&lt;Body&gt;</c:prefix>
            <c:exact>I want to buy a digital camera</c:exact>
            <c:suffix>&lt;/Body&gt;&lt;/Document&gt;</c:suffix>
            <c:offset>39</c:offset>
            <c:length>30</c:length>
        </rdf:Description>
    </rdf:RDF> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T18:48:47.283

我知道有些人在使用[WordsFinder](http://wordsfinder.com/api_Keyword_Extractor.php)服务方面取得了一些成功。

# python - 在自定义命名空间中调用 execfile() 会在“__builtin__”命名空间中执行代码

> ID：711066
> 
> 赞同：4
> 
> 时间：2009-04-02T18:42:15.160
> 
> 标签：python, namespaces

当我在不传递 globals 或 locals 参数的情况下调用 execfile 时，它​​会在当前命名空间中创建对象，但如果我调用 execfile 并为 globals（和/或 locals）指定一个字典，它会在`__builtin__`命名空间中创建对象。

举个例子：

```
# exec.py
def myfunc():
    print 'myfunc created in %s namespace' % __name__ 
```

exec.py 是从 main.py 执行的文件，如下所示。

```
# main.py
print 'execfile in global namespace:'
execfile('exec.py')
myfunc()
print    

print 'execfile in custom namespace:'
d = {}
execfile('exec.py', d)
d['myfunc']() 
```

当我从命令行运行 main.py 时，我得到以下输出。

```
execfile in global namespace:
myfunc created in __main__ namespace

execfile in custom namespace:
myfunc created in __builtin__ namespace 
```

`__builtin__`为什么在第二种情况下它在命名空间中运行？

此外，如果我尝试从 运行 myfunc `__builtins__`，我会得到一个 AttributeError。（这是我希望发生的事情，但是为什么`__name__`设置为`__builtin__`？）

```
>>> __builtins__.myfunc()
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
AttributeError: 'module' object has no attribute 'myfunc' 
```

谁能解释这种行为？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T18:58:00.427

首先，`__name__`它不是命名空间——它是对其所属模块名称的引用，即：somemod.py ->`somemod.__name__ == 'somemod'` 例外情况是，如果您从命令行将模块作为可执行文件运行，`__name__`则为 '__main__ '。

在您的示例中，有一个幸运的巧合，您作为 main 运行的模块也被命名为 main。

Execfile 执行模块的内容而不将其作为模块导入。因此，`__name__`没有设置，因为它不是一个模块 - 它只是一个执行的代码序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T19:28:29.667

execfile 函数类似于 exec 语句。如果您查看[exec 的文档，](http://docs.python.org/reference/simple_stmts.html#exec)您将看到以下解释该行为的段落。

> 作为副作用，一个实现可能会在给定的字典中插入额外的键，除了那些对应于由执行代码设置的变量名的字典。`__builtin__`例如，当前实现可能会在键`__builtins__`(!)下添加对内置模块字典的引用。

编辑：我现在看到我的答案适用于问题标题的一种可能解释。我的回答不适用于实际提出的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T16:12:05.123

顺便说一句，我更喜欢使用`__import__()`over `execfile`：

```
module = __import__(module_name)
value = module.__dict__[function_name](arguments) 
```

这在添加到 PYTHONPATH 时也很有效，因此可以导入其他目录中的模块：

```
sys.path.insert(position, directory) 
```

# sql-server - 从 SQLserver 2000 到 SQLserver 2008 的数据库复制

> ID：711070
> 
> 赞同：1
> 
> 时间：2009-04-02T18:42:44.973
> 
> 标签：sql-server, database, replication

我正在尝试将一个相当大的数据库从 SQLServer 2000 复制到 SQLServer 2008，它位于两个不同的服务器上。我找到了一篇关于尝试这个的文章，并一直在尝试遵循它的方向。这是这篇文章。

> [SQL 2000 和 SQL 2008 之间的混合模式双向事务复制](http://www.vinodunny.com/blog/post/Mixed-Mode-Bi-Directional-Transactional-Replication-between-SQL-2000-and-SQL-2008.aspx)

这是我坚持的部分：

> “因此，要创建发布，您将不需要使用在 SQL 2008 中获得的发布向导。相反，使用生成的发布脚本，并且对于其中的每一`sp_addarticle`行，确保`@ins_cmd`, `@upd_cmd`&`@del_cmd`参数指向适当的存储过程并在 SQL Server 2000 服务器上运行它。完成后，继续正常创建对 SQL Server 2008 数据库的订阅。

我能够为所有表准备好存储过程，但在创建生成的发布脚本时需要一些指导。有没有人有一些方向或生成的发布脚本的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-09-08T17:30:35.173

在发布向导的最后一步，您将有两个选项： 1\. 创建发布 2\. 生成包含创建发布步骤的脚本文件

此处引用的文章建议您不要让向导创建发布，而是只选择生成脚本文件。此时，您可以按照文章中的说明编辑脚本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-16T18:30:15.340

您可以在 2008 年运行 SQL 发布向导并将其输出到脚本，然后将其用作基本模型，使用问题中列出的 sp 参数的适当参数进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T00:21:01.367

我只是将 SQL 2000 升级到 SQL 2008 R2，我发现发布向导工作得很好，无需修改生成的脚本。

这篇文章建议创建一些存储过程，因为它不能开箱即用地双向工作。然而，当它在两个方向上都非常出色，而且速度也很快，只需使用向导即可。这可能是使用 SQL 2008 R2 的原因，它可能自原始 SQL 2008 以来有所改进。

# gdb - 在 MinGW 上的 GDB 中，如何让 Ctrl-C 停止程序？

> ID：711086
> 
> 赞同：16
> 
> 时间：2009-04-02T18:46:21.110
> 
> 标签：gdb, mingw

我在 Windows 上，在 MinGW 下构建的可执行文件上运行 GDB。该程序有一个无限循环。我想通过点击`Ctrl`+来找到它`C`。当我这样做时，程序和 GDB 都会退出。关于这个主题的所有帮助似乎都假设我在 Linux 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2011-03-12T18:17:41.423

这是因为 GDB 没有正确处理GUI（非控制台）程序的`Ctrl`+事件。`C`

您可以在*[Workaround for GDB Ctrl-C Interrupt](http://www.mingw.org/wiki/Workaround_for_GDB_Ctrl_C_Interrupt)*中找到解决方法。

* * *

*更新：*鉴于 mingw.org 域已过期，以下是从 Web 存档中救出的代码：

> 如果您发现自己试图用 Ctrl-C 中断 GDB 正在调试的程序并且失败，那么这个小程序将允许您从另一个会话发出中断。只需通过正在调试的进程的 Windows pid 运行它，GDB 就会重新获得控制权。[要编译，使用`gcc -o debugbreak -mno-cygwin -mthreads debugbreak.c`]

```
/* BEGIN debugbreak.c */

#ifndef _WIN32_WINNT
#define _WIN32_WINNT 0x0501
#endif

#if _WIN32_WINNT < 0x0501
#error Must target Windows NT 5.0.1 or later for DebugBreakProcess
#endif

#include <Windows.h>
#include <stddef.h>
#include <stdlib.h>

/* Compile with this line:

    gcc -o debugbreak -mno-cygwin -mthreads debugbreak.c

*/

static char errbuffer[256];

static const char *geterrstr(DWORD errcode)
{
    size_t skip = 0;
    DWORD chars;
    chars = FormatMessage(
        FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL, errcode, 0, errbuffer, sizeof(errbuffer)-1, 0);
    errbuffer[sizeof(errbuffer)-1] = 0;
    if (chars) {
        while (errbuffer[chars-1] == '\r' || errbuffer[chars-1] == '\n') {
            errbuffer[--chars] = 0;
        }
    }
    if (chars && errbuffer[chars-1] == '.') errbuffer[--chars] = 0;
    if (chars >= 2 && errbuffer[0] == '%' && errbuffer[1] >= '0'
        && errbuffer[1] <= '9')
    {
        skip = 2;
        while (chars > skip && errbuffer[skip] == ' ') ++skip;
        if (chars >= skip+2 && errbuffer[skip] == 'i'
            && errbuffer[skip+1] == 's')
        {
            skip += 2;
            while (chars > skip && errbuffer[skip] == ' ') ++skip;
        }
    }
    if (chars > skip && errbuffer[skip] >= 'A' && errbuffer[skip] <= 'Z') {
        errbuffer[skip] += 'a' - 'A';
    }
    return errbuffer+skip;
}

int main(int argc, char *argv[])
{
    HANDLE proc;
    unsigned proc_id = 0;
    BOOL break_result;

    if (argc != 2) {
        printf("Usage: debugbreak process_id_number\n");
        return 1;
    }
    proc_id = (unsigned) strtol(argv[1], NULL, 0);
    if (proc_id == 0) {
        printf("Invalid process id %u\n", proc_id);
        return 1;
    }
    proc = OpenProcess(PROCESS_ALL_ACCESS, FALSE, (DWORD)proc_id);
    if (proc == NULL) {
        DWORD lastError = GetLastError();
        printf("Failed to open process %u\n", proc_id);
        printf("Error code is %lu (%s)\n", (unsigned long)lastError,
            geterrstr(lastError));
        return 1;
    }
    break_result = DebugBreakProcess(proc);
    if (!break_result) {
        DWORD lastError = GetLastError();
        printf("Failed to debug break process %u\n", proc_id);
        printf("Error code is %lu (%s)\n", (unsigned long)lastError,
            geterrstr(lastError));
        CloseHandle(proc);
        return 1;
    }
    printf("DebugBreak sent successfully to process id %u\n", proc_id);
    CloseHandle(proc);
    return 0;
}

/* END debugbreak.c */ 
```

> 感谢 Kyle McKay 将代码发布到 cygwin 邮件列表[http://cygwin.com/ml/cygwin/2006-06/msg00321.html](http://cygwin.com/ml/cygwin/2006-06/msg00321.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-13T16:58:42.357

您使用的是哪个“外壳”？如果您使用 MSYS “rxvt” shell，则行为与您描述的差不多。Ctrl-C 仅在您从正常的 Windows 命令提示符下运行时才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T23:04:23.993

我刚刚遇到了同样的问题。

wiki 的解决方法是`debugbreak`使用被调试进程的 pid 运行，但`ps`不显示此 pid，仅显示 gdb 的 pid。也许还有另一种获取方式。

但是有更简单的解决方法。只需正常启动程序（不在 gdb 中），检查 pid`ps`并以此 pid 作为第二个参数启动 gdb。附加 gdb 后，进程停止，我可以打印回溯。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-14T17:07:00.527

我有同样的问题。为我解决的问题是将 gdb 与 cmd.exe 一起使用并在 gdb 中设置以下选项。

```
set new-console on 
```

现在我可以使用`Ctrl`+`c`来中断 gui 和控制台程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-03T01:15:33.220

这是一个每次都有效的解决方案：

当 GDB 启动时，使用这个正则表达式来捕获劣质进程 id：

```
"\[New Thread (\d+)\." 
```

然后使用：

```
hProcess = OpenProcess(PROCESS_ALL_ACCESS, 0, PID);
DebugBreakProcess(hProcess);
CloseHandle(hProcess); 
```

查看以下 GDB 初始化脚本，它需要在 Windows 7 及更高版本上与 MinGW 一起使用：

```
# =====================================
#  GDB preload initialization commands
# =====================================

# Set Unicode Charset
#set target-charset UCS-2
#set host-charset UCS-2
#set charset UCS-2
#set target-wide-charset UCS-2

# Set UTF-8 Charset
set target-charset UTF-8
set host-charset UTF-8
set charset UTF-8
set target-wide-charset UTF-8

# Request async target mode
set target-async 1

# Do not complain about pending breakpoints
set breakpoint pending on

# Enable All-Stop for all Threads
set non-stop off

# Do not ask for confirmations
set confirm off

# Do not create new console for output/logging
set new-console off

# Turn-off paggination to allow integration with IDE
set pagination off

# Call Stack files (and anywhere else) should be absolute path
set filename-display absolute

# Enable Pretty Print in GDB Panel
set print pretty on

# Enable notification of completion for asynchronous execution commands.
set exec-done-display on

# Show Addresses in objects, required for integration with IDE
set print address on

# Enable Pretty Print for Arrays
set print array on

# Flatten objects, required for integration with IDE
set print object off

# Include static members, required for integration with IDE
set print static-members on

# Show demangled vtable, required for integration with IDE
set print vtbl off
set print demangle on
set demangle-style gnu-v3

# Print full eight-bit characters, required for integration with IDE
set print sevenbit-strings off

# Set path for obj files
path $(TARGET_ROOT)/obj

# Load gdb scripts for STL (string, vector, map, etc.)
source $(PATH_SDK_DEBUGGER)/stl-views-1.0.3.gdb

# List of source code files
dir $(PATH_SDK_COMMON)
dir $(PATH_SDK_FRAMEWORKS)
dir $(PATH_SDK_INCLUDES)
dir $(PROJECT_PATHS.NATIVE_COMMON)

# Load the binary
file $(TARGET_OUTPUT) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-25T10:19:44.043

正如[Matthew Talbert 指出的那样](https://stackoverflow.com/questions/711086/in-gdb-on-mingw-how-do-i-make-ctrl-c-stop-the-program/1273273#1273273)，当在 MSYS/Cygwin 中使用使用本机 MinGW 工具链构建的 GDB 时，就会发生这种情况。使用 winpty 启动 GDB 就像一个魅力，因为它是专门为此而设计的工具。它也适用于`cdb.exe`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-01T17:20:03.707

如果您从[https://www.msys2.org/安装最新的](https://www.msys2.org/)**MinGW-x64** ，那么-就可以了。`Ctrl``C`

```
c:\test>gdb a.exe
GNU gdb (GDB) 7.11.1
. . .
Reading symbols from a.exe...done.
(gdb) r
Starting program: c:\test\a.exe
<Ctrl>-<C>
Thread 5 received signal SIGINT, Interrupt.
[Switching to Thread 17312.0x5614]
0x00007ff97e75d7e3 in TlsGetValue () from C:\WINDOWS\System32\KernelBase.dll
(gdb) 
```

如果你在**Cygwin**，你需要`gdb`告诉`handle SIGINT`：

```
(gdb) handle SIGINT
SIGINT is used by the debugger.
Are you sure you want to change it? (y or n) y
Signal        Stop      Print   Pass to program Description
SIGINT        Yes       Yes     No              Interrupt
(gdb) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T18:49:24.270

要找到无限循环，您可以尝试逐步执行，直到找到无限重复的序列。

我不确定，但我认为 Ctrl-C 应该只停止执行，而不是 gdb 本身......

我认为有一个“句柄”命令可以用来控制中断信号的处理方式。

# http - NAS / SAN + HTTP 服务器是一个很好的匹配吗？

> ID：711090
> 
> 赞同：1
> 
> 时间：2009-04-02T18:47:29.733
> 
> 标签：http, networking, nas, san

NAS / SAN + HTTP 服务器是否是通过 Internet 提供大量静态文件的良好解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T18:54:07.037

在您的服务器上添加一些内存缓存，您应该会很好。Apache 有几个模块可以做到这一点。

如果您想改善用户的延迟并降低 bw 成本，您还可以查看静态分布式缓存服务，例如 Akamai 和 PantherExpress。后者可能是一项不错的投资，具体取决于您的体重成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T19:44:30.557

这实际上取决于您要解决的整体问题。SAN 非常复杂，只是一个等待发生的问题。解决方案的复杂性增加了大量的故障点、维护难度、每个系统上可能存在非标准驱动程序、每个组件版本之间的互操作性问题。

大多数 NAS 解决方案都是等待发生的过度设计问题。只有当您需要在客户端之间实时共享一个数据集时，它们才会增加价值。想想你的问题是否真的需要这个。Netapp 确实是我认为可以接受的唯一可靠的 NAS 供应商。

如果您可以避免使用 SAN 或 NAS，请避免使用它。内部硬盘驱动器通常更便宜、更快。当出现问题时，它们的性能混乱也较少。维护更容易。可扩展性更容易（即，如果您在每台服务器上复制数据，则在增加容量的同时增加性能）。

想想在服务器中获得大量快速存储是多么容易。HP DL380 G5 在一台 2U 服务器中可以轻松拥有超过 1.5TB 的容量。预计存储将比大多数 SAN 或 NAS 解决方案更快。你不会有控制器冗余，但如果你有冗余服务器，你可以提高解决方案的整体可靠性，而不是拥有一份具有冗余路径的数据副本。

如果您需要立即跨多个服务器更改数据，我仍然会考虑 NAS 是否是正确的解决方案。取决于您对即时的定义，以及您是否可以在同步期间将更新文件的请求指向具有当前数据的服务器。

当数据集很大并且没有时间创建软件解决方案时，我只能想象 SAN 是正确的解决方案。我的经验是，绝大多数 SAN 的设置更多地基于政治要求而不是技术要求。

我只能想象当 NAS 服务器是 Netapp 时，NAS 是正确的解决方案，数据集非常大，并且该解决方案需要部署得太快，以允许软件解决方案将数据分布在多个服务器内部存储中。一个好的 NAS 服务器是非常昂贵的，肯定比为避免使用一个软件解决方案而付出的代价更高。但它可能可以更快地部署。

如果有政治考虑，SAN 和 NAS 可以帮助将问题/失败归咎于其他团体或供应商。当我看到选择 SAN 或 NAS 解决方案时，这通常是最重要的考虑因素。

# sql-server - SQL Server (2005+) 查询返回视图中每个列（字段）的基表和基列（字段）

> ID：711092
> 
> 赞同：2
> 
> 时间：2009-04-02T18:48:09.843
> 
> 标签：sql-server, sql-server-2005, database-design, schema

我想要一个查询，它将为视图中的每一列返回一行，并为视图本身返回一行。

结果中应该有一个列基表，它为当前行中的列提供基表，结果中应该有一个列基字段，它给出基础查询中列的名称（对于重命名的列）。如果任何计算也可以包含在 basefield 列中，那将是一个额外的好处。

我不认为这是可以做到的。我错了吗？

在下面的示例中，“这里发生了什么”应在 basetable 列中适当替换为 table1 或 table2，在 basefield 列中适当替换为 a、b 或 c。

```
创建表 table1 (a int, b int)
创建表 table2 (a int, c int)
去
创建视图view1 as select table1.a, table1.b, table2.c from table1 left join table2 on table1.a = table2.a
去

选择 * 从
(
 select 'View' objecttype,O.name viewname,'' fieldname,0 column_id,'' typename,'' max_length,'' [precision], '' scale, '' is_identity,
    '这里发生了什么' basetable，'' basefield
 从 sys.objects O where O.type='V' and O.[schema_id] = 1

 联合所有

  select 'Field' objecttype,object_name(C.[object_id]) viewname,C.name fieldname,C.column_id,T.name typename,C.max_length,C.precision,C.scale,C.is_identity,
  '这里有什么' basetable，'这里有什么' basefield
  来自 sys.columns C
 left join sys.types T on C.user_type_id=T.system_type_id
 其中 C.[object_id] in (select O.[object_id] from sys.objects O where O.type='V')
） 一世
其中视图名称在（'view1'）
按视图名、column_id 排序

下降视图 view1
删除表 table1
删除表 table2

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T18:53:36.943

你知道它可能不是 1 到 1 的映射吗？视图中的列可能是来自不同表的多个（甚至没有！）列的结果。

也就是说，应该*可以*通过解析视图的源来实现。但是 sql 代码本质上是程序性/命令性的，而且一点也不简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-11T07:02:49.140

信息模式中几乎没有可用于推断信息的表。为您提供大量数据的基本查询将是：

```
select * 
from INFORMATION_SCHEMA.VIEW_COLUMN_USAGE v
    inner join INFORMATION_SCHEMA.COLUMNS v1
        on  v.VIEW_NAME=v1.TABLE_NAME and v.COLUMN_NAME=v1.COLUMN_NAME
where v.VIEW_NAME='My_View' 
```

信息模式中的表是：

```
select * from INFORMATION_SCHEMA.VIEWS
select * from INFORMATION_SCHEMA.VIEW_TABLE_USAGE
select * from INFORMATION_SCHEMA.VIEW_COLUMN_USAGE 
```

所以尝试使用这些。

但是，它仅在您直接使用基本表中的列而不派生任何公式时才有效。

# properties - 如何以编程方式从 .properties 文件中获取 Struts2 值？

> ID：711093
> 
> 赞同：2
> 
> 时间：2009-04-02T18:48:10.980
> 
> 标签：properties, struts2, actioncontext

假设我有一个带有定义值 uploads.directory 的 struts.properties 文件。如何以编程方式从 Actioncontext 访问该值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-06T02:27:14.147

您可以使用 getText("some.property.name") 返回属性值

[http://struts.apache.org/maven/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html](http://struts.apache.org/maven/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T09:21:16.797

创建`ActionSupport`对象并使用类的`getText()`方法`ActionSupport`。

```
ActionSupport actionSupport = new ActionSupport();
actionSupport.getText("foo.bar"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-08T06:39:46.163

Create a resources folder under `src`. In the `struts.xml` file add a constant e.g., `<constant name="struts.custom.i18n.resources" value="global"></constant>` Here global is the name of properties file. Now you will be able to use the properties in the entire application.

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
    <!-- constant to define result path locations to project root directory -->

    <!-- constant to define global resource bundle -->
    <constant name="struts.custom.i18n.resources" value="global"></constant>

    <package name="user" namespace="/" extends="struts-default">
        <action name="home">
            <result>/home.jsp</result>
        </action>
        <action name="welcome" class="com.waqar.struts2.actions.WelcomeAction">
            <result name="success">/welcome.jsp</result>
        </action>
    </package>

</struts> 
```

The welcome.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
        pageEncoding="UTF-8"%>
    <%@ taglib uri="/struts-tags" prefix="s" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title><s:property value="getText('action.welcome.title')"/></title>
    </head>
    <body>
             <s:property value="getText('action.welcome.username')"/>: <s:property value="username"/><br>
    </body>
    </html> 
```

global.properties

```
action.welcome.username=waqar 
```

In action class

```
System.out.println(getText("action.welcome.username")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-25T12:41:08.230

您需要将 my.properties 文件或 my_locale.propeties 文件放在包含您的操作类的包中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-17T03:06:51.817

您需要将值放在除 struts.properties 之外的属性文件中，例如`ApplicationResources.properties`，或者`my.properties`需要在类路径中。struts.properties 文件用于加载 struts 特定的属性，例如`struts.i18n.encoding=UTF-8`等`struts.devMode = false`。

在为自定义消息创建属性文件之后，您需要在 struts.properties 中做的事情是您必须在 struts.properties 文件中添加以下属性

```
struts.custom.i18n.resources=ApplicationResources 
```

如果您有多个自定义消息属性文件，则需要通过逗号分隔来添加它们，例如：

```
struts.custom.i18n.resources=ApplicationResources,my 
```

然后在您的操作类中，您可以使用`getText('propertyName')`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-21T09:32:14.017

您可以像这样从消息资源文件中获取值：

```
public class MyAction extends ActionSupport {

   public String getUserDetails() {
      if("First Name".equals(getText("label.firstName"))) {
          System.out.println("In if block");
      }
   }
} 
```

您还可以获得更多信息，如何从`.properties`java 类或 jsp 文件中的文件中获取值。对于 JSP：

```
<s:text name="label.firstName" /> 
```

和

```
<s:property value="getText('label.age')" /> 
```

有关更多信息，您可以通过此链接： [在此处获取信息](http://www.jkstack.com/2013/08/how-to-use-resource-bundle-to-retrieve-the-message-from-properties-file-in-struts-2.html)

# asp.net - 如何为 Asp.Net 中的所有子文件夹注册 HttpHandler？

> ID：711094
> 
> 赞同：11
> 
> 时间：2009-04-02T18:48:32.337
> 
> 标签：asp.net, web-config, httphandler, httpmodule

我想注册一个 HttpHandler 以包含根文件夹的所有子文件夹，无论它们嵌套多远。我本来希望下面代码的行为可以做到这一点，但实际上它只包含直接在根文件夹中的项目。

```
<httpHandlers>
  <add verb="*" path="root/*" type="HandlerType, Assembly" />
</httpHandlers> 
```

我当然可以按如下方式注册以包含第二层的任何内容，但是还没有遇到一种方法来说出根目录下的任何内容。

```
<httpHandlers>
  <add verb="*" path="root/*/*" type="HandlerType, Assembly" />
</httpHandlers> 
```

这是困扰我很长一段时间的事情，我很想听听一个简单的解决方案。

我想澄清一下，当我说“根”时，我并不是指应用程序的根，也不一定有兴趣将应用程序中的所有请求发送到要处理的模块。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2011-07-17T21:18:25.180

您不需要单独的 web.config。在主 web.config 中使用 <location> 元素：

```
<!-- Configuration for the "root" subdirectory. -->
<location path="root">
  <system.web>
    <httpHandlers>
      <add verb="*" path="root" type="HandlerType, Assembly"/>
    </httpHandlers>
  </system.web>
</location> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-10-09T13:28:47.097

您可以使用 path="*" 在此“根”文件夹中创建 web.config

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T09:27:01.943

也许你应该使用 HttpModule 而不是 HttpHandler。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T21:33:48.960

您可以创建一个 http**模块**来检查每个传入请求的 url。如果请求 url 位于您希望**处理程序处理**的任何文件夹中，它会执行以下操作：

*   将完整的原始 url 放入 Context.Items
*   将请求路径更改为处理程序文件夹正下方的某个虚拟值，与处理程序的配置匹配。

现在将调用**处理程序**，它会在请求中找到虚拟 url。它忽略此 url，并处理它将在 Context.Items 中找到的实际 url。

# asp.net - IE7 - HTTPS IFRAME 内的元刷新导致混合内容警告

> ID：711101
> 
> 赞同：1
> 
> 时间：2009-04-02T18:50:50.850
> 
> 标签：asp.net, internet-explorer, iframe, refresh, keep-alive

我有一个 ASP.NET 应用程序，它通过使用带有刷新标头（或页面中的元刷新标记）的隐藏 IFRAME 来实现保持活动。

对于 Internet Explorer 的许多（但不是全部）实例（迄今为止在 IE7 和 IE8 beta 上重现 - 但不是针对所有人！）如果您在两个都包含此保持活动 IFRAME 的安全页面之间移动，您会得到类似这样的序列事件：

```
0s：加载 page1.html - 包括 keepalive.html，安排在 15s 刷新
 5s：点击page2链接
     加载 page2.html - 包括 keepalive.html，安排在 20 秒刷新
15s：page1 帧刷新；显示混合内容错误框

```

此时浏览器中显示错误“此页面包含安全和非安全内容”。

*page1.html：*

```
<html><head><title>Page 1</title></head><body>
<h1>This is Page 1</h1>
<p><a href="page2.html">Go to Page 2</a></p>
<iframe src="keepalive.html" width="500" height="200" />
</body></html> 
```

第 2 页是相同的，但显示为第 2 页，并链接到第 1 页，而不是。

*保活.html：*

```
<html><head>
<meta http-equiv="refresh" content="15" />
</head><body>
<h2>This is the keep alive</h2>
</body></html> 
```

在我测试过的所有浏览器中，我确保互联网区域有权进行元刷新，并设置为在显示混合内容时提示。我已经阅读了所有建议您需要在 IFRAME 上使用 src="" 标记的页面，否则 IE 会认为它不安全 - 按照设计，它必须具有 src 标记，即保持活动页面的标记。

如果您永远坐在第 1 页上，则 IFRAME 会很好地刷新。该错误仅在您更改到第 2 页后第一次出现。

我正在寻找一种方法以最小的变化来解决这个问题：保持活动的更好方法是使用[控件和自动刷新图像](http://www.adamtibi.net/post/2008/02/11/session-keep-alive-web-control.aspx)，我将在未来的版本中进行研究。我想到的一个可能的解决方法是让 IFRAME 的内容成为服务器的常规 XMLHttpRequest，而不是元刷新。更简单的错误修复会更好。

* * *

***更新：***我已将 Grant Wagner 的答案标记为正确，因为它导致我遇到实际问题：Lenovo Password Manager 插件 CpwmIEBrowserHelper 导致此错误。这巧妙地解释了为什么有些人会看到这个问题而不是其他人 - 我问过的大多数人都有 ThinkPad。禁用扩展程序会使刷新问题消失。

由于我们无法让可能使用该应用程序的每个人都解决此问题，因此我们将使用 javascript 计时器并刷新窗口位置，将 keepalive.html 页面更新为如下所示：

```
<html><head>
<meta http-equiv="pragma" content="no-cache">
</head><body>
<h2>This is the keep alive</h2>
<script type="text/javascript">

  setTimeout ('ReloadPage()', 15000 );

  function ReloadPage() {
     window.location = window.location;
  }

</script>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:39:36.937

我在 IE 6、7 和 8（发行版）中尝试了您的测试页面，但无法重现该问题。

需要检查的一些事项：

*   下载[Fiddler](http://www.fiddler2.com/)并验证 META REFRESH 请求的 URL。确保它是事实上的`https`。此外，使第 1 页和第 2 页的查询字符串`keepalive.html`唯一，以便您可以验证是哪个请求导致消息框出现。
*   确保所有受影响的浏览器都在同一安全区域中看到该站点（检查底部的状态栏并确保所有 IE 实例都显示为“Internet”或“本地 Intranet”）。如果一个区域的浏览器可以正常工作，而另一个区域的浏览器不能工作，您可以尝试将它们全部放在同一个区域中。
*   在没有任何附加组件的情况下启动 Internet Explorer（开始 > 所有程序 > 附件 > 系统工具 > Internet Explorer（无附加组件））或（开始 > 运行 > iexplore -extoff）。同样的事情发生在受影响的系统上吗？这个故事与您的具体问题无关，但几年前我有一个用户的会话（由会话 cookie 维护）没有在辅助窗口中存活。事实证明，她下载并安装的一个流行的光标插件阻止了两个不同的 IE 窗口之间的 cookie 共享。故事的重点是 IE 附加组件有时会导致您不会与附加组件相关联的奇怪行为。最好通过在无附加组件模式下尝试来排除它们。
*   确保所有计算机都运行相同版本的 Internet Explorer（帮助 > 关于 Internet Explorer 或访问[http://update.microsoft.com/](http://update.microsoft.com/)）

坦率地说，我担心问题的性质。您是说访问第 1 页设置了一个计时器来刷新 iframe，然后您离开该页面，并且刷新仍然发生在指定时间，即使您已经离开包含 iframe 的页面，其中包含元刷新。离开第 1 页导航应该会在初始 iframe 刷新时停止计时器。这就是为什么我认为你应该使用 Fiddler（和一个唯一的`keepalive.html`查询字符串）来验证它是来自第 1 页上 iframe 的请求导致了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:00:59.123

尝试使用以 https 开头的完整 URL 设置 iframe，我过去曾遇到过此问题，我认为这是解决方案。

# delphi - 涡轮德尔福和报告

> ID：711104
> 
> 赞同：0
> 
> 时间：2009-04-02T18:52:19.660
> 
> 标签：delphi, report

有没有办法在**turbo Delphi**中使用报告，我搜索了很多报告组件，但我找不到任何！

任何提示都受到高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T19:03:00.850

你的意思是你有一个付费版本，而不是免费的“探索者”版本？有很多报告选项。

Report Manager 是一个开源解决方案，您可以使用： [http ://reportman.sourceforge.net/](http://reportman.sourceforge.net/)

Delphi 有许多其他的报告解决方案，其中大部分是商业的（例如，FastReport、ReportBuilder、Rave Reports、Quick Reports 等）。

Rave 报告可能有适用于您的 TurboDelphi 的免费版本。例如，对于 TurboDelphi2006，您可以在这里查看：http: [//cc.embarcadero.com/item/25610](http://cc.embarcadero.com/item/25610)

这是来自 Torry 网站的各种报告工具的列表。请注意，其中许多都是旧的和/或不是那么好。最好坚持使用更知名的组件： [http ://www.torry.ru/pages.php?id=189](http://www.torry.ru/pages.php?id=189)

如果您只有免费的 TurboDelphi “Explorer”，那么您的选择就会更加有限。由于您无法在设计时与组件交互，只能通过代码进行交互，我认为大多数商业版本中的可视化报表设计器对您来说是不可用的。这使得它们更难使用。好消息：我认为开源 ReportManager 有一个独立的可视化报表设计器，可以让您设计和保存报表定义。那将是要走的路。使用起来可能还是有点麻烦，因为您必须在运行时实例化所有报表组件。

# internet-explorer - Internet Explorer 工具栏图标应该有多大？

> ID：711105
> 
> 赞同：0
> 
> 时间：2009-04-02T18:52:43.433
> 
> 标签：internet-explorer, graphics, size, icons

我正在尝试将我自己的工具栏图标添加到 Internet Explorer，但不确定它应该是什么大小。

*   [TechNet 上为 Internet Explorer 设计工具栏图标的](http://technet.microsoft.com/en-us/library/dd346732.aspx)文章指示 20x20 和 16x16 像素。

*   [Code Project](http://www.codeproject.com/)的[Internet Explorer 工具栏（桌带）教程](http://www.codeproject.com/KB/shell/ietoolbartutorial.aspx)中的消息（[1、2](http://www.codeproject.com/KB/shell/ietoolbartutorial.aspx?msg=1728225#xx1728225xx)）暗示[22x22](http://www.codeproject.com/KB/shell/ietoolbartutorial.aspx?msg=2548229#xx2548229xx)和 16x16 像素。

使用 Internet Explorer 7，20x20 像素的图标似乎会被拉伸。测量显示它们至少应为 24x24。有人有明确的参考吗？

* * *

或者，Internet Explorer 从哪里获得其现有的工具栏图标 - 我可以测量它！我认为它是系统 DLL 之一，但是是哪一个？

另请参阅：[Firefox 工具栏按钮应该有多大？](https://stackoverflow.com/questions/558069/how-big-should-a-firefox-toolbar-button-be)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T18:44:50.763

好吧，通过反复试验，**24x24 像素**大小的图标似乎没有重新缩放。至少，Internet Explorer 7.0.6001.18000 就是这种情况。仍然希望找到 IE7 的权威参考，理想情况下也是其他版本。

* * *

另一种确认方式：

```
int x, y;
HIMAGELIST hImageList = (HIMAGELIST) SendMessage(m_hWndToolbar, TB_GETIMAGELIST, 0, 0);
ImageList_GetIconSize(hImageList, &x, &y);
ATLTRACE("Image size %ux%u", x, y); 
```

输出：

```
Image list 24x24 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-02T19:05:03.997

我假设我们在谈论网站图标？[维基百科](http://en.wikipedia.org/wiki/Favicon)在第一句话中将它们定义为 16x16。

前四名的[谷歌点击](http://www.google.com/search?q=favicon+size)都表示 16x16。

*   [http://www.animatedfavicon.com/question/what-favicon-size.php](http://www.animatedfavicon.com/question/what-favicon-size.php)
*   [http://www.photoshopsupport.com/tutorials/jennifer/favicon.html](http://www.photoshopsupport.com/tutorials/jennifer/favicon.html)
*   [http://www.clickfire.com/favicon-tutorial/](http://www.clickfire.com/favicon-tutorial/)
*   [http://www.favicon.cc/](http://www.favicon.cc/)

# reporting-services - SSRS使用图表显示数据

> ID：711106
> 
> 赞同：0
> 
> 时间：2009-04-02T18:52:54.650
> 
> 标签：reporting-services, charts, reportingservices-2005

这里有没有人使用 SSRS 中的图表对象以图形方式显示数据？我想知道什么是“在此处放置数据字段”、“在此处放置序列字段”和“在此处放置类别字段”？

什么是数据字段、系列字段和类别字段？

FWC

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T19:15:04.020

如果您想象 XY 趋势，那么数据字段将是 Y 坐标，类别字段将是 X 坐标，系列字段将是用于对不同行中的数据进行分组的值。

谈到图表，通常数据字段用于值，类别字段用于日期，系列字段可能是产品或部门。类别和系列字段可以切换，但通常为系列字段选择具有较少下降值的字段。

请参阅[Steve Joubert：开始 SQL Server 2005 Reporting Services 第 3 部分：图表控件](http://www.simple-talk.com/content/print.aspx?article=297)

# sorting - 对 PowerShell 版本进行排序

> ID：711107
> 
> 赞同：17
> 
> 时间：2009-04-02T18:53:00.407
> 
> 标签：sorting, powershell

在 PowerShell 中，如果我有一个包含版本、“3.0.1.1”、“3.2.1.1”等的字符串列表，如何像 System.Version 在 C# 中对其进行排序一样对其进行排序？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-02T18:57:48.603

```
PS C:\> $ver="3.0.1.1","3.2.1.1"
PS C:\> $ver|%{[System.Version]$_}|sort

Major  Minor  Build  Revision
-----  -----  -----  --------
3      0      1      1
3      2      1      1 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-02T18:57:52.143

只需将其转换为版本并以这种方式排序：

```
$list = "3.0.1.1","3.2.1.1" 
$sorted = $list | %{ new-object System.Version ($_) } | sort 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-19T16:01:45.410

版本字符串可以转换为版本对象，并且 `sort-object`可以传递一个脚本块并对结果进行排序。

```
PS C:\Users\me> "3.11.0.1", "3.0.1.1", "3.2.1.1" | sort
3.0.1.1
3.11.0.1
3.2.1.1

PS C:\Users\me> "3.11.0.1", "3.0.1.1", "3.2.1.1" | sort {[version] $_}
3.0.1.1
3.2.1.1
3.11.0.1 
```

（添加了一个额外的版本字符串以使示例真正有意义。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-10T03:21:40.637

```
# I needed to sort historical versions (Octopus) with varying decimal formats.
# Try # this (it is easy to add to a more complex expression sort)
# Special Case "3.00.1.10.1.10" and "3.0.1.10.1.10" required the double sort
# to work correctly
    $vers = @()`enter code here`
    $vers +=  @( "3.1.60",      "3.1.52","3.1.51")
    $vers +=  @( "3.00.46",     "3.00.36","3.50.2145.11")
    $vers +=  @( "3.50.2145.10","3.50.2145.9")
    $vers +=  @( "3.50.2145.8", "3.50.2145.7")
    $vers +=  @( "3.50.2145.6", "3.50.2145.5")
    $vers +=  @( "3.50.2145.4", "3.50.2145.3")
    $vers +=  @( "3.50.2145.2", "3.50.2145.1")
    $vers +=  @( "3.50.2145",   "3.50.2143")
    $vers +=  @( "3.50.2141",    "3.50.2135")    
    $vers +=  @( "3.0.1.10.1.1", "3.00.1.10.1.10")
    $vers +=  @( "2.1.3.4",      "3.0","3.")
    $vers +=  @( "3.0.1.10.1.100","3.0.1.10.1.10")
    $mySortAsc = @{Expression={ [regex]::Replace($_ ,'\d+', { $args[0].Value.PadLeft(20,'0') }) };Descending=$false}
    $mySortDesc = @{Expression={ [regex]::Replace($_ ,'\d+', { $args[0].Value.PadLeft(20,'0') }) };Descending=$true}    
    $nl = [Environment]::NewLine
    Write-Output ($nl + "Ascending Sort" + $nl);
    $vers | Sort-Object | Sort-Object $mySortAsc
    Write-Output ($nl + "Descending Sort" + $nl);
    $vers | Sort-Object -Descending | Sort-Object $mySortDesc
<# Result
Ascending Sort

2.1.3.4
3.
3.0
3.0.1.10.1.1
3.0.1.10.1.10
3.00.1.10.1.10
3.0.1.10.1.100
3.00.36
3.00.46
3.1.51
3.1.52
3.1.60
3.50.2135
3.50.2141
3.50.2143
3.50.2145
3.50.2145.1
3.50.2145.2
3.50.2145.3
3.50.2145.4
3.50.2145.5
3.50.2145.6
3.50.2145.7
3.50.2145.8
3.50.2145.9
3.50.2145.10
3.50.2145.11

Descending Sort

3.50.2145.11
3.50.2145.10
3.50.2145.9
3.50.2145.8
3.50.2145.7
3.50.2145.6
3.50.2145.5
3.50.2145.4
3.50.2145.3
3.50.2145.2
3.50.2145.1
3.50.2145
3.50.2143
3.50.2141
3.50.2135
3.1.60
3.1.52
3.1.51
3.00.46
3.00.36
3.0.1.10.1.100
3.00.1.10.1.10
3.0.1.10.1.10
3.0.1.10.1.1
3.0
3.
2.1.3.4
#> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-04T08:11:35.713

只是添加另一个极端情况：powershell 将这种单个数字的版本“2”视为无效。排序前必须在末尾添加“.0”以创建版本对象：

```
if($version  -match '^\d$')
{
  $version = $version + '.0'
}
New-Object System.Version $version 
```

# php - 使用 PHP preg_match_all 重现 Smarty foreach

> ID：711113
> 
> 赞同：0
> 
> 时间：2009-04-02T18:54:07.410
> 
> 标签：php, foreach, smarty, preg-match-all

我想重现“Smarty foreach”的评论。

tpl 文件内容为 ($tplContent) ：

```
{foreach from=$tabMethodTest item=entry}
    /**
     * @todo Implement test{$entry.name}().
     */
    public function test{$entry.name}() {
        $this->markTestIncomplete("This test has not been implemented yet.");
    }
{/foreach} 
```

preg_match_all 代码是：

```
preg_match_all("/(.*)\{foreach(.*)\}(.*)\{\/foreach\}(.*)/im",$tplContent,$regsTplResult);
print_r($regsTplResult); 
```

print_r 返回：

```
Array
(
    [0] => Array
        (
        )

    [1] => Array
        (
        )

    [2] => Array
        (
        )

    [3] => Array
        (
        )

    [4] => Array
        (
        )

) 
```

我如何在 {foreach}{/foreach} 之间返回代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T18:59:18.410

我根本不明白你在做什么，但这似乎有效：

```
$tplContent = "{foreach from=\$tabMethodTest item=entry}\nHello\n{/foreach}";
$pattern = '/\{foreach from=\$tabMethodTest item=entry\}[\r\n]{1,2}(.*)[\r\n]{1,2}\{\/foreach\}/im';
preg_match_all($pattern,$tplContent,$regsTplResult);
print_r($regsTplResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:08:12.363

我找到了方法。问题来了 \r\n ：

```
$pattern = '/\{foreach from=\$tabMethodTest item=entry\}(.*)\{\/foreach\}/im';
$tplContent = preg_replace("/[\n\r]/","",$tplClassTestContent);
preg_match_all($pattern,$tplContent,$regsTplResult);
print_r($regsTplResult); 
```

结果是：

```
Array
(
    [0] => Array
        (
            [0] => {foreach from=$tabMethodTest item=entry} /**     * @todo Implement test{$entry.name}().     */    public function test{$entry.name}() {        $this->markTestIncomplete("This test has not been implemented yet.");    }    {/foreach}
        )

    [1] => Array
        (
            [0] =>  /**     * @todo Implement test{$entry.name}().     */    public function test{$entry.name}() {        $this->markTestIncomplete("This test has not been implemented yet.");    }    
        )

) 
```

我想要的结果在 $regsTplResult[1][0]

感谢“乍得桦树”；）

# bug-tracking - 问题/缺陷跟踪软件

> ID：711116
> 
> 赞同：5
> 
> 时间：2009-04-02T18:54:37.393
> 
> 标签：bug-tracking

我们的团队目前正在审查我们的工具集，并在源代码控制和项目管理软件之外寻找新的缺陷/问题跟踪软件。

对于问题跟踪，我们查看了 bugzilla、fogbugz、bugtracker.net、sourcegear fortres 和 bugnet。

我对我们提出的清单不满意，所以我很想知道其他人正在使用什么。

我们正在寻找用于安全的 Active Directory 集成，虽然我们会满足于 Windows 应用程序，但 Web 界面可能是首选，Visual Studio 集成也是一个奖励。我们需要确定缺陷的优先​​级，标记发现缺陷的版本，标记修复缺陷的版本，并希望能够围绕每个问题/缺陷进行讨论。我们还希望将项目分类为缺陷、增强请求等，并记录缺陷的解决方法。

非常相似的问题：

[https://stackoverflow.com/questions/101774/what-is-your-bug-task-tracking-tool](https://stackoverflow.com/questions/101774/what-is-your-bug-task-tracking-tool)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T20:25:43.197

尝试[解开](http://www.unfuddle.com)。如果你使用他们的版本控制托管（SVN 和 Git 选项）和他们的问题跟踪器，你会得到一些很好的集成东西。例如，您可以在提交消息中输入注释，例如“fixes #384: Too much foo in the bar”*，您不仅可以将其变成问题的超链接，而且还可以将工单标记为已修复带有返回变更集的链接。都是好东西。这是一个基于 Web 的解决方案，由 Unfuddle 自己以 SaaS 类型的方式托管。

除此之外，我过去使用过并且非常喜欢的[Trac +1。](http://trac.edgewall.org)这是一个相当不成熟的项目功能，尽管它周围有一个非常健康的社区，已经开发了插件来做很多额外的事情（比如你想要的 AD 身份验证）。它还与许多源代码控制系统进行了类似的集成，但它的功能远不如 Unfuddle 丰富。也就是说，您可以在提交消息中使用扩展的 wiki 语法，该语法在显示时由 Trac 解析以创建链接。它不会做 Unfuddle 所做的任何双向工作。Trac 可用于内部托管；或者，如果您希望托管它，Trac 的 wiki 上 有一个[可以这样做的地方列表。](http://trac.edgewall.org/wiki/CommercialServices)

*我不记得我脑海中的确切格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T20:24:41.560

在我们当前的项目中，我们惊人地使用了 6 种不同的跟踪工具（PVCS 的 2 个版本），大部分是商业的。这是我对我们使用过的那些的看法。我已经按照我最喜欢到最少的顺序列出了它们。

Serena Teamtrack - 我们使用网络客户端。界面直观。性能会因安装而异，但与我们在每个工具中的相同数据相比，这是最快的。它也适用于 Firefox。

HP Quality Center - 这也是基于 Web 的，但它只是 IE。从好的方面来说，它组织良好、易于使用且功能齐全。它对我们也有合理的表现。它有一个奇怪的功能，没有保存按钮。它会自动为您保存。要强制保存，您必须导航到另一张票。此外，当您第一次使用它时，它必须安装如此多的 DLL，以至于它实际上是一个胖客户端。在这种情况下，IE 有时会被锁定（通常是在会话到期后尝试重新初始化会话时）。一旦被锁定，您有时必须杀死 IE 才能重新获得控制权。

Bugzilla - 我没有像其他工具那样彻底地使用它，所以这不是一个公平的比较。我们将它短暂地用于一些内部票证。我想最大的好处是（缺乏）成本。IMO，我只是觉得界面不如其他工具好用且易于使用。已经有一段时间了，所以我为缺乏细节而道歉，为什么我将它降级到其他人之下。

Siebel - 除了比 PVCS 更好之外，他们的缺陷跟踪工具并没有太多值得喜欢的地方。界面看起来很做作。就好像 Siebel 界面有一组用户界面控件，它试图将所有方形钉子强制插入其圆孔中。另一个缺点是它使用冗长的生成 ID，因此很难引用它们或通过它们搜索。除此之外，票证 ID 没有排序。

Merant PVCS - 我们有单独的数据库并使用 Web 客户端和胖客户端。现在已经有一段时间了，所以细节正在消失。我记得该工具中存在错误并且没有得到修复，例如报告无法显示某些字段。性能很差。加载需要很长时间。浏览门票很慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T19:41:45.830

支持问题跟踪与在开发期间跟踪问题是不同的问题。

Trac [http://trac.edgewall.org/](http://trac.edgewall.org/)是一个非常强大的工具，它支持许多大型开源项目。您可以在[http://www.wush.net等地方找到 Trac 托管](http://www.wush.net)

如果您需要更多工作流程和自定义安全性，您需要查看来自 Atlassian [http://www.atlassian.com](http://www.atlassian.com)的 JIRA 。Atlassian 有许多您可能会觉得有用的产品。

对于支持设置中的问题跟踪，请尝试 RT [http://bestpractical.com/rt](http://bestpractical.com/rt)。RT 看似简单，但我已经看到它在最大的环境中使用过，它可以很好地确保您对每一个做出支持承诺的人负责。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T19:09:42.350

具有您提到的所有功能的异地 (www) 托管解决方案是[NetResults Tracker](http://www.nrtracker.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T19:35:54.767

我们使用 bugzilla，它非常适合我们。我们没有调查太多其他人，因为老实说，它做了我们需要的一切，然后是一些。

我们不使用 Visual Studio，所以我不能谈论集成兼容性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-03T04:28:51.693

试用 HappyFox ( [http://www.happyfox.com](http://www.happyfox.com) )，这是一个问题和错误跟踪软件。干净的界面和自动化功能可帮助您顺利跟踪和解决错误。HappyFox 对 2 名成员是免费的，对大型团队来说价格实惠。

# sql-server-2005 - 如何在 SSIS 中使用常量 var

> ID：711120
> 
> 赞同：1
> 
> 时间：2009-04-02T18:55:59.870
> 
> 标签：sql-server-2005, ssis

我已将变量定义为：

```
 DateSecondsOffset Int default as 1 
```

在 SQL Server 集成服务项目中。我用它作为常数。

在一项任务中，我有以下 SQL 来设置另一个 var NextDT：

```
 SELECT dateadd(s, max(timestamp), 1) DT from myTable 
```

我想用 DateSecondOffset 替换 1 ，以便我可以在需要时更改它。我可以在此处输入 var 名称或在其前面加上 @ 或其他名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-12T20:18:28.310

在执行 SQL 任务中引用参数的语法取决于您使用的连接类型。

例如，您使用 @ParameterName 的 ADO.NET 连接。对于您使用的 OleDB 连接？

完整的细节可以在这里找到

[http://msdn.microsoft.com/en-us/library/cc280502.aspx](http://msdn.microsoft.com/en-us/library/cc280502.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:33:28.593

如果您在脚本中..

```
Dts.Variables("DateSecondOffset").Value 
```

如果你在某个领域提到它..

```
Scope::DateSecondOffset 
```

将 Scope 替换为您的范围，该范围可以在变量下的“包资源管理器”选项卡中找到。

如果您在 SQL 中引用它...

> 选择@DateSecondOffset

请务必在 SQL 任务中设置输入/输出参数，并在脚本任务中设置 ReadOnly/ReadWrite 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T19:34:50.150

您必须将包变量作为 SQL 任务的参数传递。

您可以
在“执行 SQL 任务编辑器”->“参数映射”部分或**“脚本任务编辑器”**窗口中的**“执行 SQL 任务编辑器”->“参数映射”**部分
或**ReadOnlyVariables**选项（如果您希望能够在任务期间更改变量值，则为**ReadWriteVariables选项）定义执行此操作**

 **然后在 sql 查询中声明变量并使用第一个参数初始化它：

```
DECLARE @DateSecondsOffset INT
SET @DateSecondsOffset = ?
SELECT dateadd(s, max(timestamp), @DateSecondsOffset ) DT from myTable 
```

请参阅[Patrick Index：将变量传入和传出 SSIS 任务](http://www.simple-talk.com/sql/sql-tools/passing-variables-to-and-from-an-ssis-task/)

# c# - 从 DateTime 生成相对日期范围（本周、今年、上个月等）的最佳方法是什么？

> ID：711121
> 
> 赞同：9
> 
> 时间：2009-04-02T18:56:05.580
> 
> 标签：c#, .net, datetime, relative-date

我确定我不是第一个需要这样做的人，所以我正在寻找最好的方法。

我有一组带有选项的单选按钮，例如

*   今年
*   去年
*   这个月
*   上个月
*   本星期
*   上个星期

我需要从当前日期 ( `DateTime.Now`) 生成正确的相对日期范围。

例如，如果`Last Year`选择了并且当前日期是`4/2/09 14:45:32`我需要返回的开始日期`1/1/08 00:00:00`和结束日期`12/31/08 23:59:59`。

有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-02T19:06:34.213

所有这些都已使用 DateTime.Today 进行了测试，并且可以按照您的要求工作：

```
public struct DateRange
{
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
}

public static DateRange ThisYear(DateTime date)
{
    DateRange range = new DateRange();

    range.Start = new DateTime(date.Year, 1, 1);
    range.End = range.Start.AddYears(1).AddSeconds(-1);

    return range;
}

public static DateRange LastYear(DateTime date)
{
    DateRange range = new DateRange();

    range.Start = new DateTime(date.Year - 1, 1, 1);
    range.End = range.Start.AddYears(1).AddSeconds(-1);

    return range;
}

public static DateRange ThisMonth(DateTime date)
{
    DateRange range = new DateRange();

    range.Start = new DateTime(date.Year, date.Month, 1);
    range.End = range.Start.AddMonths(1).AddSeconds(-1);

    return range;
}

public static DateRange LastMonth(DateTime date)
{
    DateRange range = new DateRange();

    range.Start = (new DateTime(date.Year, date.Month, 1)).AddMonths(-1);
    range.End = range.Start.AddMonths(1).AddSeconds(-1);

    return range;
}

public static DateRange ThisWeek(DateTime date)
{
    DateRange range = new DateRange();

    range.Start = date.Date.AddDays(-(int)date.DayOfWeek);
    range.End = range.Start.AddDays(7).AddSeconds(-1);

    return range;
}

public static DateRange LastWeek(DateTime date)
{
    DateRange range = ThisWeek(date);

    range.Start = range.Start.AddDays(-7);
    range.End = range.End.AddDays(-7);

    return range;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-02T19:03:54.640

今年：

```
DateTime Today = DateTime.Today;
DateTime StartDate = new DateTime(Today.Year,1,1);
DateTime EndDate = StartDate.AddYears(1).AddSeconds(-1); 
```

这个月：

```
DateTime Today = DateTime.Today;
DateTime StartDate = new DateTime(Today.Year,Today.Month,1);
DateTime EndDate = StartDate.AddMonths(1).AddSeconds(-1); 
```

本星期：

```
DateTime Today = DateTime.Today;
DateTime StartDate = Today.AddDays(-((int) Today.DayOfWeek));
DateTime EndDate = StartDate.AddDays(7).AddSeconds(-1); 
```

去年/月/周是上面的简单变化。**编辑：** *本周*假设该周从星期日开始。如果您的星期从星期一开始，您将不得不稍微修改代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T19:00:15.337

我将创建一个工厂方法，该方法将返回一个接口（或您可以执行的委托），该接口将传递当前日期并根据实现为您返回日期范围。

当然，您从工厂方法返回的实现将取决于您传递给它的枚举值，该值对应于“今年”、“去年”等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T19:10:18.167

我将使用 DateTime 内置方法添加和返回日期的特定部分，以编写一个返回间隔的函数。

# mysql - MySQL查询：如何计算一行中值的平均值？

> ID：711123
> 
> 赞同：8
> 
> 时间：2009-04-02T18:57:16.450
> 
> 标签：mysql

AVG() 函数计算列均值，但如何检索同一行中多个值的均值，如下所示：

```
SELECT MEAN(A.a, A.b, ... , A.n) FROM A; 
```

编辑：当然，正如 cherouvim 建议的那样，我可以这样做：

```
SELECT MEAN(A.a + A.b + ... + A.n) / n FROM A; 
```

但我正在尝试找出是否有更精简的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T19:00:14.570

```
select (A.a + A.b) / 2 from A; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T08:38:21.230

我偶然发现了类似的情况。这很有用： http: [//tech-blog.borychowski.com/index.php/2009/02/mysql/average-value-in-a-row/](http://tech-blog.borychowski.com/index.php/2009/02/mysql/average-value-in-a-row/)

从页面：

当我们这样做时：

```
SELECT *, (V.rank_0 + V.rank_1 + V.rank_2) / 3
AS row_avg FROM voting V 
```

我们只收到所有值都不为 NULL 的行的正确平均值。但是当我有例如 3, NULL, 4 我想得到 3.5 作为回报。那是函数 COALESCE() 派上用场的时刻。

COALESCE () 是做什么的？从 MySQL 手册我们有：

返回列表中的第一个非 NULL 值，如果没有非 NULL 值，则返回 NULL。

```
mysql> SELECT COALESCE(NULL,1);
-> 1
mysql> SELECT COALESCE(NULL,NULL,NULL);
-> NULL 
```

这些信息将帮助我们构建另一个 SELECT 语句：

```
SELECT *,

#first part
(COALESCE(V.rank_0, 0)
+ COALESCE(V.rank_1, 0)
+ COALESCE(V.rank_2, 0))
/

#second part
(3 -
(COALESCE(V.rank_0 - V.rank_0, 1)
+ COALESCE(V.rank_1 - V.rank_1, 1)
+ COALESCE(V.rank_2 - V.rank_2, 1))
) AS row_avg FROM voting V 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T19:00:25.193

如果没有其他人找到更好的解决方案，您总是可以将它们加在一起，然后除以您添加的列数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T19:10:34.733

不漂亮，但它有效。

不是特别是 MySql，但这个想法应该很容易翻译过来。

```
CREATE TABLE A (id int identity(1,1), C1 int, C2 int, C3 int)
GO

INSERT INTO A VALUES (1,1,1)
INSERT INTO A VALUES (2,2,2)
INSERT INTO A VALUES (3,3,3)
INSERT INTO A VALUES (1,2,3)
INSERT INTO A VALUES (4,5,6)
GO

CREATE VIEW A_Values
AS
SELECT ID, AVG(Val) AS Average 
FROM
(
    SELECT ID, C1 AS Val FROM A
    UNION ALL
    SELECT ID, C2 AS Val FROM A
    UNION ALL
    SELECT ID, C3 AS Val FROM A
) Q
GROUP BY ID
GO

SELECT * FROM A_Values
GO 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T19:30:08.650

我不熟悉 MySQL 语法，但是如何将行数据作为单列的多行转储到临时表中，然后使用 AVG() 函数获取结果呢？

# strongly-typed-dataset - 针对类型化数据集的数据适配器 = SQL 架构噩梦

> ID：711129
> 
> 赞同：1
> 
> 时间：2009-04-02T18:58:10.723
> 
> 标签：strongly-typed-dataset, dataadapter

我看到很多参考资料说 TableAdapter 很弱而且很愚蠢，并且任何真正的开发人员都会使用 DataAdapter。我不知道这是否属实，但我正在探索这个问题，并强调整个“DataAdapter/TableAdapter 针对 Typed DataSets”的气味有多糟糕。

让我试着解释一下……

假设我在 xsd 文件中有我的 Typed DataSet 定义，现在我准备在代码中创建一个 DataAdapter，针对该模式......（顺便说一下，我正在使用 OleDb 访问独立的 .dbf 文件文件夹...这里没有要调用的 SQL Server 存储过程，只是普通的旧原始表，准备好执行操作。）

从我目前的研究来看，这是我如何看待 DataAdapter 与 Typed DataSet 一起使用的。告诉我我是否错了。（最后我有我的大抱怨/问题。）

```
public DataTable GetJobsByCustomer(string CustNo)
{
    OleDbConnection conn1 = new OleDbConnection(dbConnectionString);
    conn1.Open();

    LMVFP ds1 = new LMVFP(); //My Typed DataSet

    string sqlstring = @"SELECT act_compda, contact, cust_num, est_cost, invoiced, job_hours,
                        job_invnum, job_num, job_remark, job_start, mach_cost, mat_cost, mat_mkup,
                        p_o_num, priority, quote_no, quoted_by, ship_date, ship_info, shop_notes, status, total_cost
                        FROM job_info
                        WHERE (cust_num = ?) AND (status = 'A')
                        ORDER BY priority";

    OleDbDataAdapter JobsAdapter = new OleDbDataAdapter(sqlstring,conn1);
    JobsAdapter.SelectCommand.Parameters.Add("?", OleDbType.VarChar,6).Value=CustNo;

    JobsAdapter.Fill(ds1, "Jobs"); // A table schema in the Typed DataSet

    return ds1.Jobs;

} 
```

事情是这样的吗？它确实有效，所以这很好。确实，强类型行为很棒。

现在，我的抱怨......你的意思是告诉我，我已经在我的 DAL 方法 (GetJobsByCustomer) 中维护了相同的 exaxt SQL 语法，以匹配 xsd 中表的架构？在我的手工编码的 SQL 和 xsd 模式之间进行如此多的维护和分离真是太疯狂了。根本没有错误，因为您正在编写文本字符串！您可以在运行时确定它是否有效。

当您在代码中键入所有 SQL 时，必须来回查看以使您的编码 SQL 与 xsd 表模式保持同步，这很糟糕。

当然，我错过了一些东西。

真是一场闹剧。类型化的数据集可以与漂亮的智能感知一起使用，因为它是从模式生成的，但是归根结底，编写与类型化模式匹配的 SQL 只是一件痛苦的事。他们所做的只是将头痛转移到一个新的领域。

请告诉我，我在这里遗漏了一些可以使情况变得更好的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T19:53:21.307

我赞同 Adam 对 LINQ to SQL 和 EF 的赞赏，但我认为这对您来说（目前）还不是一个选择，因为缺乏对第三方 DBMS 的支持。另一方面，第三方 ORM（例如 NHibernate）可能是一种选择。

也许我没有给予足够的关注，但我不知道有什么好的理由避免使用 TableAdapters 和 DataAdapters。你有一两个链接吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:27:42.820

我不相信你缺少任何东西；维护这种类型的代码从来都不是一件有趣的事情。值得庆幸的是，我们现在拥有 LINQ to SQL 和实体框架，它们都可以减少使模型对象与数据库保持同步所需的手动代码维护量。

# sql - 如何根据另一列为 SQL 中的一列设置默认值

> ID：711159
> 
> 赞同：13
> 
> 时间：2009-04-02T19:08:17.797
> 
> 标签：sql

我正在使用旧的 SQL 2000 数据库，但我没有太多的 SQL 经验。当向我的一个表中添加新行时，我需要根据工作类别的列分配默认时间值。

例如，工作类别 A 将分配一个时间值 1 小时，类别 B 将是 2 小时，等等...

如果用户没有手动输入他们完成工作所花费的时间，它应该只设置该值。我考虑过使用默认约束来执行此操作，但如果默认值具有依赖性，我认为这不会起作用。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T19:11:06.057

我会在插入时使用触发器。

只需检查是否已分配了一个值，如果没有，请获取正确的值并使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-08-05T13:01:32.950

使用 Stephen Wrighton 建议的触发器：

```
CREATE TRIGGER [myTable_TriggerName] ON dbo.myTable FOR INSERT        
AS
SET NOCOUNT ON
UPDATE myTable
SET
    timeValue = '2 hours' -- assuming string values
where ID in (
    select ID
    from INSERTED
    where
        timeValue = ''
        AND workCategory = 'A'
) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T20:13:26.720

请务必编写触发器，以便它可以处理多行插入。不要在触发器中一次处理一行，或者假设插入的表中只有一行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T14:22:09.653

如果您要查找的是基于另一列定义列定义，您可以执行以下操作：

```
create table testable 
(
    c1 int, 
    c2 datetime default getdate(), 
    c3 as year(c2)
);

insert into testable (c1) select 1

select * from testable; 
```

您的结果集应如下所示：

```
c1 | c2                      | c3
1  | 2013-04-03 17:18:43.897 | 2013 
```

如您所见，AS（在列定义中）可以解决问题；）希望它有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T19:50:05.560

是的，触发。

自然，您无需对默认值进行硬编码，而是从表格中查找它们。

对此进行扩展，您的新表将成为 work_category 表 (id, name, default_hours)，并且您的原始表维护它的外键，将 fom (id, work_category, hours) 转换为 (id, work_category_id, hours)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-02T19:53:13.040

因此，例如，在一个 TAG 表（其中标签应用于帖子）中，如果您想将一个标签计为另一个标签......但默认将新标签计为它们本身，您将有一个这样的触发器：

```
CREATE TRIGGER [dbo].[TR_Tag_Insert]
   ON  [dbo].[Tag]
   AFTER INSERT
AS 
BEGIN
   SET NOCOUNT ON;

   UPDATE dbo.Tag 
   SET [CountAs] = I.[ID]
   FROM INSERTED AS I
   WHERE I.[CountAs] IS NULL
   AND dbo.Tag.ID = I.ID
END 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-19T21:18:43.017

我可以想到两种方法：

1.  触发器
2.  默认值或绑定（这应该与依赖项一起使用）

触发器似乎在这里解释得很好，所以我不会详细说明。但通常我会尽量远离这类东西的触发器，因为它们更适合其他任务

“默认值或绑定”可以通过创建一个函数来实现，例如

```
CREATE FUNCTION [dbo].[ComponentContractor_SortOrder] ()
RETURNS float
AS
BEGIN
RETURN (SELECT MAX(SortOrder) + 5 FROM [dbo].[tblTender_ComponentContractor])
END 
```

然后将该列的“默认值或绑定”设置为 ([dbo].ComponentContractor_SortOrder)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T19:52:59.547

一般来说，我会避开触发器。几乎所有的 dbms 都有某种对[约束的支持。](http://msdn.microsoft.com/en-us/library/ms188258.aspx)

我发现它们更容易理解、调试和维护。

# sql-server - SQL 2005 CSV 导入用内部引号和逗号分隔的引号

> ID：711166
> 
> 赞同：7
> 
> 时间：2009-04-02T19:09:45.953
> 
> 标签：sql-server, sql-server-2005, csv, import

我有一个带有引号文本分隔符的 CSV 文件。90000 行中的大多数都很好，但我有几行有一个包含引号和逗号的文本字段。例如，字段值将是：

> AB",AB

当分隔时，这变成

> "AB"",AB"

当 SQL 2005 尝试导入此文件时，我收到诸如...

```
留言
错误 0xc0202055：数据流任务：未找到列“列 4”的列分隔符。
 （SQL Server 导入和导出向导）
```

这似乎只发生在引号和逗号一起出现在文本值中时。像这样的价值观

AB"AB 变成 "AB""AB" 或 AB,AB 变成 "AB,AB"

工作正常。

以下是一些示例行...

```
"1464885","LEVER WM","","B","MP17"
"1465075",":PLT-BC !!注意!!","","B",""
"1465076","BRKT-STR MTR !注意!","","B",""
"1465172",":BRKT-SW MTG ！注意！","","B","MP16"
"1465388","BUSS BAR !注意!","","B","MP10"
"1465391","PLT-BLKHD""注意""","","B","MP20"
"1465564","SPROCKET:13TEETH,74MM OD,66MM","ID W/.25"" SETSCR","B","MP6"
"S01266330002","CABLE:224"",E122/261,8 CO","","B","MP11"

```

最后一行是问题的一个例子 - “”，导致错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-09-09T19:43:10.893

我在使用 SSIS 时遇到了重大问题。Access、Excel 甚至 DTS 似乎都做得很好的事情，SSIS 窒息。可变记录长度数据是另一个问题，但是，是的，这些嵌入式限定符是一个主要问题。特别是如果您无权访问导入文件，因为它们位于其他人的服务器上，您需要付费才能访问，甚至可能有 4 到 5 GB 大小！不能只是在每次导入时“全部替换”。

您可能想在名为“ [UnDouble](http://www.microsoft.com/downloads/details.aspx?FamilyID=B51463E9-2907-4B82-A353-E15016486E1D) ”的 Microsoft 下载中查看此内容，这是您可以尝试的另一种[解决方法。](http://social.msdn.microsoft.com/forums/en-US/sqlintegrationservices/thread/f1502bec-17fa-4bf1-8c5d-b8d24b16218e/)

似乎与 SQL Server 2008 中的 SSIS 一样，错误仍然存​​在。我不知道他们为什么没有在解析器中解决这个问题，但就像我们在基本导入功能中使用 SSIS 回到过去一样。

**2010 年11 月 18 日更新：** 这个错误仍然存​​在于 SSIS 中。惊人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-18T10:08:25.543

[微软表示](https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=312164)双引号分隔字段内的双引号不起作用。计划在 2011 年底修复...

同时，我们将不得不使用其他答案中描述的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T18:18:39.640

怎么样：

1.  搜索/替换所有“”，用“”；（修复所有损坏的字段）
2.  搜索/替换所有;''; 用 ,"", （以“取消修复”正确的空字段。）
3.  搜索/替换所有 '';''; 使用“”，“，（以“取消”正确封装嵌入分隔符的正确空字段。）

这会将您的原件转换为：

```
 "1464885","LEVER WM","","B","MP17"
"1465075",":PLT-BC   !!NOTE!!","","B",""
"1465076","BRKT-STR MTR            !NOTE!","","B",""
"1465172",":BRKT-SW MTG   !NOTE!","","B","MP16"
"1465388","BUSS BAR                !NOTE!","","B","MP10"
"1465391","PLT-BLKHD     ""NOTE""","","B","MP20"
"1465564","SPROCKET:13TEETH,74MM OD,66MM","ID W/.25"" SETSCR","B","MP6"
"S01266330002","CABLE:224'';E122/261,8 CO","","B","MP11" 
```

这似乎在 SSIS 中运行良好。您可能必须递归地执行第 3 步以连续处理 3 个空字段（'';'';''; 等），但这里的底线是，当您嵌入文本限定符时，您必须转义它们或更换它们。让这成为您今后 CSV 创建过程中的一课。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T19:12:17.320

我只想对“进行搜索/替换，然后将其替换为 ,

您可以访问原始文件吗？

# asp.net - asp.net mvc 用户控件缓存

> ID：711168
> 
> 赞同：0
> 
> 时间：2009-04-02T19:09:49.197
> 
> 标签：asp.net, asp.net-mvc, caching, user-controls

使用 MVC 1.0

我如何缓存页面而不是用户控件。

假设我的母版页上有一个标签云，标签云是一个用户控件，我只想每 x 分钟刷新一次。

我需要做[甜甜圈缓存][1]吗？

还是已经达到 MVC 1.0 了？

可以在客户端浏览器中完成还是仅在服务器缓存中完成？

[1]：[http](http://haacked.com/archive/2008/11/05/donut-caching-in-asp.net-mvc.aspx/) ://haacked.com/archive/2008/11/05/donut-caching-in-asp.net-mvc.aspx/ “甜甜圈缓存”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T19:14:46.860

您必须在服务器端进行甜甜圈缓存。可以在客户端浏览器上执行此操作，但事后您必须发出 AJAX 请求，这并不是最佳选择。StackOverflow 实际上为他们自己的标签云使用了这种形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:06:15.647

是的，您必须使用“后缓存替换”（也称为“甜甜圈缓存”）。使用“后缓存替换”时，ASP.NET 会自动转换仅服务器缓存。还可以考虑使用自定义 HtmlHelper 扩展方法而不是 UserControl（它更像是 ASP.NET MVC）。在 ASP.NET MVC 上使用“甜甜圈缓存”有一些限制。也许你应该看看这个[问题](https://stackoverflow.com/questions/683646/asp-net-mvc-donut-caching-and-tempdata)。

# c - JVM中的C？在编程过程中显示错误

> ID：711169
> 
> 赞同：0
> 
> 时间：2009-04-02T19:09:59.290
> 
> 标签：c, jvm, development-environment

我认为，一个很棒的功能是，当以 C# 和 Java 等虚拟化方式运行的语言在您处理源代码时显示错误。大多数情况下，诸如 Eclipse、NetBeans 或 VisualStudio 之类的 IDE 具有立即指定错误的功能。

C/C++ 有这样的东西吗？只是为了编码......我目前正在寻找一种方法来获得与良好的旧 C 相同的编码体验:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T19:11:55.730

Eclipse 对 CDT 项目提供 C 和 C++ 支持。我从未亲自使用过它，但我认为它拥有你想要的一切。

[http://www.eclipse.org/cdt/](http://www.eclipse.org/cdt/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T19:15:09.620

您可以在 Visual Studio 中使用 C++ 进行编程，它会为您提供与其他语言相同的智能感知错误突出显示功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T20:09:05.530

[Netbeans](http://www.netbeans.org/features/cpp/index.html)和[Sun Studio](http://developers.sun.com/sunstudio/features/whatsin.jsp)支持 C/C++（Sun Studio 似乎有更高级的调试功能）。

# asp.net - .net 网格来显示行，并且还可以选择分组

> ID：711174
> 
> 赞同：1
> 
> 时间：2009-04-02T19:10:38.447
> 
> 标签：asp.net, gridview, sorting

网格视图是否有任何“分组依据”功能？

我需要在 gridview 中显示一个表，然后允许对所有数据库表列进行排序。

我还需要能够在某些列上“分组”。

这种功能的任何例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T19:16:18.137

不幸的是，内置的 gridview 没有分组。[Telerik Grid](http://demos.telerik.com/aspnet/Grid/Examples/GroupBy/OutlookStyle/DefaultCS.aspx)等第三方控件具有此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T19:24:44.823

看看这里的 GridViewHelper 代码：[http](http://www.agrinei.com/gridviewhelper/gridviewhelper_en.htm) ://www.agrinei.com/gridviewhelper/gridviewhelper_en.htm ，我用过它，发现它很管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T19:18:19.130

在 gridview 中排序将有效地导致分组。假设你有数据：

```
ID  Item
110 Pineapple
111 Orange
112 Apple
113 Pineapple 
```

按项目列排序将导致：

```
112 Apple
111 Orange
110 Pineapple
113 Pineapple 
```

你在寻找别的东西吗？

# asp.net-mvc - 编辑多个子记录的 ASP.NET MVC 示例

> ID：711184
> 
> 赞同：23
> 
> 时间：2009-04-02T19:12:27.723
> 
> 标签：asp.net-mvc, master-detail

有谁知道 MVC 视图的任何示例或教程，它在一个表单上显示父/子数据，并允许所有子记录可编辑？

例如，假设我有一个人员表和另一个包含他们拥有的车辆的表。一个表格，我想为给定的人显示每辆车，并使数据元素可编辑（即车牌号、汽车颜色等）以防出现错误。我不想跳到每辆车的单独编辑表单。

到目前为止，我的尝试已经使我可以显示数据，但我无法将其发回控制器。[我试图在这里](https://stackoverflow.com/questions/709933/child-records-not-posting-on-asp-net-mvc-form)尽可能缩小问题的范围，但我仍然没有得到它，我认为可能需要一个更广泛的例子。有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-03T07:06:24.967

你可以尝试这样的事情。

假设你有这个对象：

```
public class Vehicle
{
    public int VehicleID { get; set; }
    public string LicencePlate { get; set; }
    public string Color { get; set; }
} 
```

这是您将用于编辑车辆详细信息的控制器操作（您将在其中发布表单）：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult EditVehicles(int Owner, Vehicle[] vehicles)
{
    //manipulate the data, then return back to the list
    return RedirectToAction("YourAction");
} 
```

然后你应该这样设置你的表单：

```
<!--have a form for each person, listing their vehicles-->
<form action="/EditVehicles" method="post">
    <input type="hidden" name="Owner" value="25" />
    <input type="hidden" name="Vehicles[0].VehicleID" value="10" />
    <input type="text" name="Vehicles[0].LicencePlate" value="111-111" />
    <input type="text" name="Vehicles[0].Color" value="Red" />
    <input type="hidden" name="Vehicles[1].VehicleID" value="20" />
    <input type="text" name="Vehicles[1].LicencePlate" value="222-222" />
    <input type="text" name="Vehicles[1].Color" value="Blue" />
    <input type="submit" value="Edit" />
</form> 
```

这将帮助 DefaultModelBinder 将表单数据正确绑定到控制器中的模型。因此`Response.Write(vehicles[1].Color);`在您的控制器上，将打印“蓝色”。

这是一个非常简单的例子，但我相信你明白了。有关将表单绑定到数组、列表、集合、字典的更多示例，请查看[此处](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T03:35:59.853

我认为你能解决这个问题的最好方法是使用 AJAX 帖子，每当用户点击提交按钮时，你可以挂钩该事件，创建一个 JSON 数组，其中包含你想要保留的内容并将其发送出去。

当然，另一种方法是从 POST 操作中的“FormCollection”对象中获取所有信息。您只需要遍历所有键解析数据然后处理它。

# air - 反编译 Adob e AIR 应用程序

> ID：711187
> 
> 赞同：9
> 
> 时间：2009-04-02T19:14:29.827
> 
> 标签：air, decompiling

是否有用于反编译 Adob​​e AIR 应用程序的工具？我想检查它们如何在我制作的应用程序上工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-22T01:35:03.780

打包的 AIR 文件（扩展名为 .air 的文件）是 ZIP 文件。您可以使用任何 ZIP 程序将它们分开。

但是，AIR 应用程序可以用 Flash、Flex 或 HTML/JavaScript 编写。如果您要查看的应用程序不是后者，您将需要 Flash 或 Flex 反编译器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-07-02T22:13:55.670

这就是你要找的东西 ;) [http://www.sothink.com/product/flashdecompiler/index.htm](http://www.sothink.com/product/flashdecompiler/index.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-02-04T11:12:11.650

Sothink SWF Decompiler 声称该文件已损坏。

对我有用的是**JPEXS Free Flash Decompiler**，它具有开源和完全免费的额外好处。 [https://github.com/jindrapetrik/jpexs-decompiler/releases](https://github.com/jindrapetrik/jpexs-decompiler/releases)

# asp.net-mvc - 在 RouteLink 上保留 QueryString 参数

> ID：711193
> 
> 赞同：0
> 
> 时间：2009-04-02T19:15:21.930
> 
> 标签：asp.net-mvc

我正在为我正在开发的网站实现基本搜索功能。到目前为止，最简洁的方法似乎是创建一个具有类似于以下方法签名的操作：

```
//
// GET: /BeautySchoolDropouts/Search?page=2&q=grease

public ActionResult Search(int? page, string q)
{
  //Implementation
} 
```

我在搜索结果页面上有一些代码，提供类似于以下内容的分页链接：

```
<%= Html.RouteLink("<< Previous Page", new { page = (Model.PageIndex - 1) }) %>

<%= Html.RouteLink("Next Page >>", new { page = (Model.PageIndex + 1) }) %> 
```

由于我将路由值作为`RouteLink`方法的一部分提供，是否不可能保留查询字符串的 q=whatever 部分？现在，这些链接只生成 /BeautySchoolDropouts/Search?page=2 ，这显然会导致问题，因为我不知道搜索的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T19:25:18.957

我认为假设您将查询字符串放在模型中的某个位置（此代码使用 Model.QueryString；请注意，当我在这里说“查询字符串”时，我指的是查询参数，而不是 HTTP 查询字符串）；我认为您不想保留整个查询字符串，因为那样您会得到 ?page=1&q=whatever&page=2&page=3。

```
<%= Html.RouteLink("<< Previous Page", new { page = (Model.PageIndex - 1), q = Model.QueryString }) %>

<%= Html.RouteLink("Next Page >>", new { page = (Model.PageIndex + 1), q = Model.QueryString }) %> 
```

# javascript - 哪个 JavaScript 库具有最全面的类继承支持？

> ID：711209
> 
> 赞同：20
> 
> 时间：2009-04-02T19:23:17.200
> 
> 标签：javascript, javascript-framework

在使用了十几个不同的 JavaScript 库（例如 Prototype、jQuery、YUI 等等）之后，我发现每个不同的库都有不同的方式来模拟某种类层次结构并提供某种类继承支持。（除了 jQuery）除了非常恼火的是，当你创建一个新类时，它必须依赖于库，除非你使用普通的旧方法。

我想知道哪个库通常为类继承提供最佳支持以及为什么。

我希望有一天 JavaScript 库的作者可以就类创建和继承的一种风格达成一致。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-03T15:51:11.960

我发现有一个以 Ruby 为模型的 Javascript 框架：

**[Js.类](http://jsclass.jcoglan.com/)**

另一个好方法是：

**[Joose-js](http://code.google.com/p/joose-js/)** (模仿 moose (perl) )

**我更喜欢 Josse**，因为它似乎更积极地开发，而且语法看起来也很整洁！

有什么想法吗？？？（也许这应该是另一个问题？？）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-07-27T19:15:53.317

你应该试试优雅：

[http://classy.pocoo.org/](http://classy.pocoo.org/)

它很简单而且非常小，但在构建我的课程时拥有我需要的一切。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-02T19:24:47.523

我认为**[Microsoft Ajax](http://www.asp.net/ajax/)**完美地实现了它（使用命名空间、继承和接口等）

### 样本：

```
Type.registerNamespace("Demo");

Demo.Person = function(firstName, lastName, emailAddress) {
    this._firstName = firstName;
    this._lastName = lastName;
    this._emailAddress = emailAddress;
}

Demo.Person.prototype = {

    getFirstName: function() {
        return this._firstName;
    },

    getLastName: function() {
        return this._lastName;
    },

    getName: function() {
        return this._firstName + ' ' + this._lastName;
    },

    dispose: function() {
        alert('bye ' + this.getName());
    }
}
Demo.Person.registerClass('Demo.Person', null, Sys.IDisposable);

// Notify ScriptManager that this is the end of the script.
if (typeof(Sys) !== 'undefined') Sys.Application.notifyScriptLoaded(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-02T19:35:07.263

查看[原型](http://www.prototypejs.org/learn/class-inheritance)。这是一个示例：

```
// properties are directly passed to `create` method
var Person = Class.create({
  initialize: function(name) {
    this.name = name;
  },
  say: function(message) {
    return this.name + ': ' + message;
  }
});

// when subclassing, specify the class you want to inherit from
var Pirate = Class.create(Person, {
  // redefine the speak method
  say: function($super, message) {
    return $super(message) + ', yarr!';
  }
});

var john = new Pirate('Long John');
john.say('ahoy matey');
// -> "Long John: ahoy matey, yarr!" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-02T19:55:57.667

[Base2](http://code.google.com/p/base2/)具有简单的继承机制，请参阅 John Resig 的[帖子](http://ejohn.org/blog/simple-javascript-inheritance/)（帖子中的评论也很有趣）。

还要记住的是，尝试在 Javascript 中模拟经典的 OO 最近受到了很多批评（尽管在伟大的 JS 库革命的最初几天，人们非常热情地探索了它）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-07-20T14:35:51.350

您可能还对 qooxdoo 感兴趣，这是一个用于创建富 Internet 应用程序 (RIA) 的框架。它包括一个全面的面向对象层，旨在强大、优雅和快速：

请参阅手册中的以下部分，其中包含所有详细信息：http: [//qooxdoo.org/documentation/0.8#object_orientation](http://qooxdoo.org/documentation/0.8#object_orientation)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-07-27T21:15:16.467

只需选择最适合您的“口味”。最后，它们都在幕后使用原型继承，因此它们都具有大致相同级别的功能。

如果您想要一个高性能的传统类系统，请使用 GWT 和纯 Java 编程。

我个人更喜欢 Ext 的组件系统，但那是因为 Ext 组件实际上有一个[完整的生命周期](http://www.sencha.com/learn/Ext_2_Overview#Component_Life_Cycle)（初始化、渲染、状态持久性和销毁），这反过来又允许组件插件不会因库的微小更新而中断。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-20T14:39:49.630

我发现[mootools](http://mootools.net)是我继承所需的一切。它使用许多其他面向对象语言的扩展和实现的基本主题。

一位开发人员在与 jquery 的比较中详细介绍了它：

[http://jqueryvsmootools.com](http://jqueryvsmootools.com)

你也不需要整个图书馆。您可以只下载他们的 Class 模型而忽略其余部分（动画、dom 操作等）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-03T00:04:10.130

好吧，首先你应该问你是否想要一个试图模拟经典继承的库，或者一个更适合 JS 原生原型继承的库。

DUI（Digg 用户界面库）是一个 jQuery 插件，它采用 Prototype 的旧模型并以更直观的方式对其进行扩展，允许嵌套静态和动态类、命名空间、支持 dontEnum 位等等。[Digg 的 GitHub 上](https://github.com/digg/dui)提供了文档。我想你会发现它非常健壮。

披露：我为 Digg 工作并写了酒后驾车；）

# ruby-on-rails - Rails 视图模板

> ID：711212
> 
> 赞同：0
> 
> 时间：2009-04-02T19:24:42.623
> 
> 标签：ruby-on-rails, templating-engine

除了[Markaby](http://redhanded.hobix.com/inspect/markabyForRails.html)和[Haml](http://haml.hamptoncatlin.com/)之外，还有更好的 Rails 视图模板机制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-07-28T07:39:30.253

来自[Vida Hokstad 的网站](http://www.hokstad.com/mini-reviews-of-19-ruby-template-engines.html)：

1.  [半径](http://radius.rubyforge.org/)
2.  [cs/模板](http://cstemplate.rubyforge.org/)
3.  [eRuby](http://raa.ruby-lang.org/project/eruby/)
4.  [厄鲁比斯](http://www.kuwata-lab.com/erubis/)
5.  [方铅矿](http://galena.rubyforge.org/)
6.  [天神](http://www.kuwata-lab.com/tenjin/)
7.  [鲁蒂](http://ruty.rubyforge.org/documentation/)
8.  [页面模板](http://pagetemplate.org/)
9.  [甘露](http://amrita.sourceforge.jp/)
10.  [Amrita2](http://retro.brain-tokyo.net/projects/amrita2/blog)
11.  [克瓦茨](http://www.kuwata-lab.com/kwartz/)
12.  [马林](http://www.malline.org/)
13.  [生成器：XML标记](http://builder.rubyforge.org/)
14.  [红布](http://whytheluckystiff.net/ruby/redcloth/)
15.  [蓝布](http://www.deveiate.org/projects/BlueCloth)
16.  [RSmarty](http://rubyforge.org/projects/rsmarty/)
17.  [天妇罗](http://rubyforge.org/projects/tempura/)
18.  [好未来](http://rubyforge.org/projects/tal/)
19.  [柯蒂斯/朋克](http://rubyforge.org/projects/curtis/)
20.  [厄比](http://rubyforge.org/projects/erby/)
21.  [RBML](http://rubyforge.org/projects/rbml/)
22.  [RTALS](http://rubyforge.org/projects/rtals/)
23.  [领带](http://rubyforge.org/projects/tie/)
24.  [RV速度](http://rubyforge.org/projects/rvelocity/)
25.  [铁路标签](http://rubyforge.org/projects/railtags/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T10:57:10.607

你可以看看[液体](http://www.liquidmarkup.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T19:30:22.883

流浪汉的 DRYML

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T18:13:15.380

[您可以在https://www.ruby-toolbox.com/categories/template_engines](https://www.ruby-toolbox.com/categories/template_engines)找到最新列表

# git - 如果我没有 git master 分支会破坏什么？

> ID：711217
> 
> 赞同：7
> 
> 时间：2009-04-02T19:26:19.220
> 
> 标签：git

大多数 git 存储库都有一个 master 分支，但这个名称并没有什么特别之处。您可以删除 master 分支，将另一个分支重命名为 master，完全跳过 master 分支。

git 中的任何内容都被硬编码以期望主分支吗？如果我有一个没有同名分支的存储库，有什么我可以预期的工作不正常吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-02T21:48:57.130

您不必有一个主分支，但您可能应该设置`HEAD`一个即使在裸存储库上也存在的分支。`HEAD`用于确定默认签出哪个分支`git clone`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T19:29:57.447

据我所知，在 git 中根本不会有任何问题。但是，如果您正在与其他习惯于 master 分支的开发人员一起工作，他们的个人工作流程可能会被破坏，除非清楚地传达给他们。希望这可以帮助！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-02T19:48:39.463

*D* VCS（如“去中心化”）中的问题是“*约定*”的概念，它可能比经典 VCS 更重要。

由于每个用户都会克隆存储库，他们可能已经有一些脚本可以解析“主”分支（比如这个[build.pl perl 脚本](http://www.kernel.org/pub/linux/kernel/people/jejb/build.pl)）

即使您可以在 Subversion 中使用任何您想要的名称来命名或组织您的分支（[例如，您不需要有一个“主干”](https://stackoverflow.com/questions/361801/how-to-change-structure-of-subversion-repository)），但*如果您发布您的存储库*，至少遵守这个约定可能是明智的。

如果这纯粹是内部开发（例如用于备份目的的内部复制），您可以随意命名。

# asp.net - ASP.Net 应用程序的轮询策略？

> ID：711219
> 
> 赞同：0
> 
> 时间：2009-04-02T19:26:37.330
> 
> 标签：asp.net, polling

我有一个 ASP.Net 应用程序需要由另一台机器执行一些工作。为此，我在两台机器可见的队列上留下一条消息。工作完成后，一条消息会留在第二个队列中。

我需要 ASP.Net 应用程序定期检查第二个队列以查看是否有任何任务完成。

除了这样的循环，最好的地方在哪里？全球.asax？

我记得在某处读过，您可以在间隔后调用一个函数。那会合适吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T19:30:14.467

我假设这是定期完成的，并且其他一些过程将项目放入队列中？

如果是这种情况，您可以在 Global.asax 中放置一些内容，在应用程序启动时创建一个单独的线程来简单地监视队列，您可以使用计时器让该线程休眠 X 秒，然后检查结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:41:32.317

为了在 asp.net 上完成定期任务，我找到了两种可接受的方法：

1.  在 global.asax 的 Application_Start 期间在 while 循环中生成一个线程 (1) 执行工作 (2) 让线程休眠一段时间。
2.  再次在 Application_Start 中，将一个虚拟项目插入到 asp.net 缓存中，在某个时间间隔内过期，并为该缓存项目提供一个回调，以便在它过期时调用。在该回调中，您可以完成工作并以相同的方式插入缓存项。

在这两种方式中，您都需要确保即使发生错误，您的线程也能继续工作。您可以在 SessionStart 和 BeginRequest 中放置一个恢复代码，以检查您的线程或缓存项是否存在，如果发生问题则更新它。

# perl - 为什么我不能在 Perl 中设置 $LIST_SEPARATOR？

> ID：711222
> 
> 赞同：3
> 
> 时间：2009-04-02T19:27:10.263
> 
> 标签：perl, list-separator

我想在 perl 中设置 LIST_SEPARATOR，但我得到的只是这个警告：

```
Name "main::LIST_SEPARATOR" used only once: possible typo at ldapflip.pl line 7. 
```

这是我的程序：

```
#!/usr/bin/perl -w

@vals;
push @vals, "a";
push @vals, "b";

$LIST_SEPARATOR='|';

print "@vals\n"; 
```

我确定我遗漏了一些明显的东西，但我没有看到。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-02T19:30:47.650

只有助记符可用

```
$" = '|'; 
```

除非你

```
use English; 
```

第一的。

如[perlvar](http://perldoc.perl.org/perlvar.html)中所述。请阅读文档。

> 以下名称对 Perl 具有特殊意义。大多数标点名称都有合理的助记符，或在外壳中的类似物。然而，如果你想使用长变量名，你只需要说
> 
> ```
> use English; 
> ```
> 
> 在程序的顶部。这会将所有短名称别名为当前包中的长名称。有些甚至有中名，通常是从 awk 借来的。一般来说，最好使用
> 
> ```
> use English '-no_match_vars'; 
> ```
> 
> 如果您不需要 $PREMATCH、$MATCH 或 $POSTMATCH，则调用它，因为它避免了使用正则表达式对性能的影响。见[英文](http://perldoc.perl.org/English.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-02T19:31:06.697

[perlvar](http://perldoc.perl.org/search.html?q=perlvar)是你的朋友：

> **• `$LIST_SEPARATOR`**
> **•`$"`**
> 
> 这就像`$,`它适用于插入双引号字符串（或类似的解释字符串）的数组和切片值。默认为空格。（助记符：很明显，我想。）

`$LIST_SEPARATOR`仅当您`use English;`不想`use English;`在所有程序中使用时才可用，请`$"`改用。相同的变量，只是名称更简洁。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-02T22:18:50.100

稍微偏离主题（这个问题已经得到很好的回答），但我没有得到`English`.

缺点：

*   更多的打字
*   名称不明显（即，我*仍然*需要查找内容）

优点：

*   ?

我可以看到*其他*读者的好处——尤其是那些根本不了解 Perl 的人。但在这种情况下，如果是*以后*让代码更具可读性的问题，我宁愿这样：

```
{
  local $" = '|'; # Set interpolated list separator to '|'
  # fun stuff here...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T21:23:50.793

你应该使用严格的编译指示：

```
use strict; 
```

您可能希望使用 diagnostics pragma 来获得有关警告的额外命中（您已经使用 -w 标志启用）：

```
use diagnostics; 
```

# jquery - Jquery ajax 获取 XMLHttpRequest 状态

> ID：711234
> 
> 赞同：1
> 
> 时间：2009-04-02T19:30:19.477
> 
> 标签：jquery, ajax, xmlhttprequest-states

我想要更好地描述正在发生的事情，而不是典型的“正在加载...”或动画 gif。（有点像一些闪屏对应用程序所做的）。但是，浏览 Jquery 文档似乎没有办法让 XMLHttpRequest 状态发生变化。

我想做的是这样的

如果 case = 1 显示“开始”

if case = 2 显示“越来越近”

if case = 3 显示“我快到了”

if case = 4 显示内容

我是否忽略了某些东西，还是应该放弃 jquery 的 ajax 方法并编写自己的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T19:54:23.223

您需要在某个时间间隔内轮询 Web 服务，然后返回似乎适合您的应用程序的任何内容（例如您提供的消息）并更新进度指示器。该过程分为两步：第一步是实际启动必须运行的操作，第二步是不断轮询服务器以查看操作是否完成。

但是，您必须以某种方式将当前操作状态存储在服务器上。我不知道你正在使用哪种技术，所以我只能告诉你使用你选择的框架提供的东西，但要确保进程状态设置在一个可以持久化的变量中（HTTP 是无状态的），例如在会话变量中。在正在运行的进程和轮询方法之间同步这个值可能会很棘手。

总体而言，当在客户端上执行处理时，此类启动屏幕更适用于桌面应用程序或 Web 应用程序。当您异步运行的方法驻留在服务器上时，我认为尝试更新进度不是一个好主意。当您加载资产（如图像或其他文件）时，这样的进度指示器会很好，您可以计算当前加载的项目/大小与总大小等等。无论处理操作是在服务端调用还是在客户端调用，它都必须是可数的......

如果您不想在您的 Web 应用程序中再出现一个枯燥的“正在加载...”指示器，您可以随机显示一些有趣的引号或数组中的其他文本。

最佳解决方案 - 尽量减少处理请求所需的时间。:)

# flash - 使用像素弯曲器的双三次采样示例？

> ID：711235
> 
> 赞同：1
> 
> 时间：2009-04-02T19:30:35.857
> 
> 标签：flash, pixel-bender

我是像素弯曲器的新手，想知道是否有人知道如何使用 adobe 的像素弯曲器实现双三次 [下] 采样？

[这是一个如何实现](http://www.brooksandrus.com/blog/2009/03/11/bilinear-resampling-with-flash-player-and-pixel-bender/)双线性[下]采样的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-24T23:47:52.927

我刚试过。看看它是否是你想要的[http://blog.onthewings.net/2009/08/25/bicubic-resampling-by-pixel-bender/](http://blog.onthewings.net/2009/08/25/bicubic-resampling-by-pixel-bender/)

# c# - C# Winforms如何在函数中更新toolStrip

> ID：711239
> 
> 赞同：1
> 
> 时间：2009-04-02T19:31:05.747
> 
> 标签：c#, winforms, visible, toolstrip

我正在为程序构建 UI，但我无法弄清楚为什么在单击转换按钮后我的进度条不会变得可见。

```
private void convertButton_Click(object sender, EventArgs e)
{
    toolStripProgressBar.Visible = true;

    ...

    toolStripProgressBar.Visible = false;
} 
```

我在 Python 中遇到了与 tkinter 类似的问题，我不得不调用一个函数来更新空闲任务。有没有办法在不使用线程的情况下使用 Windows 窗体来做到这一点？

编辑：在旁注中，这是一个工具条中的进度条，它还包含一个标签，该标签使用状态栏文本进行更新。有没有办法让左侧的标签和进度条在另一侧而不是在左侧彼此相邻？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T19:33:11.667

好吧，有*一种*方法可以在不使用线程 ( `Application.DoEvents`) 的情况下做到这一点，但我*强烈*建议您不要使用它。重入是讨厌的，你真的不希望 UI 线程被捆绑。

改为使用[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)- 这很简单，而且它几乎*是*为进度条设计的。它消除了使用单独线程并将进度报告回 UI 线程的麻烦。不需要`Control.Invoke`等-它会为您处理。

有[很多教程`BackgroundWorker`](http://www.google.com/search?q=backgroundworker%2Btutorial)- 不应该花太长时间来学习它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T19:33:42.323

根据您提出的在没有线程的情况下执行此操作的方法的问题，即使用 Application.DoEvents(); 进行操作。（只需在将进度条设置为可见后立即添加该调用。）

现在我同意 Jon Skeet 的观点，尽管 BackgroundWorker 是一种更好的方法，但它确实使用了单独的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T19:33:49.187

您需要在与 UI 线程分开的线程中执行您的进程，然后让它定期向 UI 线程报告其进度。如果您的转换操作在 UI 线程内工作，它只会在操作完成之前无响应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T19:34:24.240

我猜问题在于`"..."`您的代码中的 是一个长期运行的过程。UI 更新不是即时的，而是必须通过 windows 中的消息队列运行，然后绘制到屏幕上。队列被抽出，绘画发生在与您的事件相同的线程中。

因此，任何长时间运行的任务都需要移动到不同的线程。不仅如此，您的代码行需要在该线程终止后调用。否则，您设置进度条，然后立即再次将其关闭。

一种方法是使用 BackgroundWorker 控件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T19:35:26.983

进度条只有在消息处理过程中允许绘制时才可见。当您处于事件处理程序的中间时，消息处理通常不会发生。如果要显示进度条，则必须将可见性设置为 true，启动后台线程以完成工作并从处理程序返回。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-02T20:39:59.230

这里有两个链接试图解释事情是如何工作的： [（1）](http://www.codeproject.com/KB/cs/begininvoke.aspx?display=Print) [（2）](http://davebrooks.wordpress.com/2007/02/12/begininvoke-the-land-of-confusion/)

现在，我将尝试尽快解释它。在 Windows 窗体应用程序中发生的大部分事情都发生在单个线程中，通常 Main() 运行在同一个线程中。如果打开 Program.cs，您会看到 Main() 有一行如下所示：

```
Application.Run(new Form1()); 
```

如果您在任何时候调试应用程序并检查调用堆栈，您将看到它将追溯到该 Run 方法。这意味着 Windows 窗体应用程序实际上是 Run 方法的连续运行。那么，Run在做什么呢？Run 正在吃一个消息队列，Windows 通过该消息队列向它发送消息。Run 然后将这些消息发送到正确的控件，这些控件本身会执行添加与按下的键相对应的文本、重绘自身等操作。请注意，所有这些都发生在与单个线程一起运行的无限循环期间，因此您正在输入天气或者简单地移动窗口，这些消息的负载被传递到应用程序，应用程序反过来处理它们并做出相应的反应，所有这些都在单个线程中。控件还可以通过队列向自己发送消息，甚至您可以通过 Control.BeginInvoke 将消息放入泵中。这些控件所做的其中一件事是根据发生的情况引发事件。因此，如果您单击一个按钮，您为处理该单击而编写的代码将最终间接地由 Application.Run 方法运行。

现在，您的代码正在发生的事情是，即使您将进度条的可见状态更改为可见，然后更新其值，您也将其可见性更改为 false，所有这些都使用相同的方法。这意味着只有在您离开该方法后，Application.Run() 才能继续迭代和消费消息队列，有效地要求进度条更新其显示。发生这种情况时，您已经将进度条的可见性设置为 false，这是您在退出方法之前所做的最后一件事。DoEvents() 是一种快速而肮脏的解决方法，因为它读取队列中的消息并处理它们。我真的不喜欢使用它，因为它会带来重入问题。

使用线程是一个很好的解决方案，但我建议在这种情况下使用 ThreadPool 线程而不是自定义线程，因为我倾向于仅在我的长寿命线程数量有限并且我需要的情况下使用自定义线程控制它们的生命周期。使用线程的最简单和最实用的方法是使用 BackgroundWorker 组件，尽管如果您想真正了解发生了什么，我建议您通过了解如何使用委托进行 Windows 窗体多线程处理的痛苦。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-12T20:37:13.913

我的解决方案是在状态条上调用刷新。
我相信这会导致 UI 线程重新绘制状态条。

```
toolStripStatusBar1.PerformStep();
statusStrip1.Refresh(); 
```

这适用于 .NET 4.0。尽管这个问题很老，但这是我在谷歌搜索这个问题时发现的第一个问题。

# c# - C#：运行和调试 Windows 服务

> ID：711241
> 
> 赞同：2
> 
> 时间：2009-04-02T19:32:01.517
> 
> 标签：c#, windows-services

我目前正在使用 C# 构建 Windows 服务，但我不知道如何调试它。

* * *

我正在构建它，然后注册`installutil`：

```
> installutil MusicRepo_FileMonitor.exe

The Commit phase completed successfully.

The transacted install has completed. 
```

正如您在上面看到的，它应该已成功注册，但我在`services.smc`. 我也尝试过启动服务，`net start [ServiceName]`但它告诉我`The service name is invalid.`，所以我猜它没有找到它。

* * *

作为记录，我在 Vista 上，我正在使用 .Net 3.5 开发 ws

* * *

**[更新]**

[解决方案](https://stackoverflow.com/questions/711241/c-running-and-debugging-a-windows-service/711300#711300)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T19:39:55.677

尝试任务管理器，看看您是否看到 MusicRepo_FileMonitor.exe。如果没有，那么服务肯定没有运行。

或者，在 Visual Studio 中，调试 > 附加到进程，检查所有用户的显示进程，看看它是否在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T19:45:06.243

经过进一步研究，我意识到我没有附加到服务的安装程序，所以现在通过添加安装程序解决了这个问题。

[这](http://arcanecode.wordpress.com/2007/05/23/windows-services-in-c-adding-the-installer-part-3/)是我用来添加服务安装程序等的教程。

# c# - 访问项目的版本信息

> ID：711242
> 
> 赞同：1
> 
> 时间：2009-04-02T19:32:10.657
> 
> 标签：c#, winforms, .net-3.5, versioning

我想在 UI 上显示我的应用程序的版本。看起来我在*Properties --> Application --> Assembler Information*中设置了它。

*   那是对的吗？
*   我是否在发布时手动增加它？
*   如何以编程方式访问它？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T19:42:18.497

是的，程序集版本就是这样设置的。要在 UI 中显示它，您可以使用以下命令检索它：

```
Assembly.GetExecutingAssembly().GetName().Version.ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:39:28.403

有关如何阅读更多信息的示例，只需将标准 AboutBox 添加到（虚拟）项目中，然后查看源代码。不过，其中一些元素更容易作为应用程序属性使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-16T15:07:39.233

或在 System.Windows.Forms 中：

```
Application.ProductVersion 
```

# c# - RTF 文档生成器

> ID：711251
> 
> 赞同：-1
> 
> 时间：2009-04-02T19:34:03.507
> 
> 标签：c#, .net, rtf

我正在为新员工创建一个程序，在其中输入他们的姓名和其他一些信息，它会输出一个欢迎/新员工信息文档。

我似乎记得有一些东西类似于我可以使用的文档对象（我猜类似于`StringBuilder`）。

.NET Framework 2 或 3 中是否已经包含这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:29:04.937

假设您只使用文本文件，则可以只使用 System.IO 命名空间中的 StringWriter 类。

（StringWriter 对象的构造函数之一是 StringBuilder）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T20:55:18.293

不，那里没有！

# c# - 将方法转换为 C# 源代码

> ID：711254
> 
> 赞同：2
> 
> 时间：2009-04-02T19:34:24.443
> 
> 标签：c#, reflection, code-generation, reflector

我正在编写一个相当简单的代码生成工具，并且我需要能够将 MSIL（或 MethodInfo）对象转换为其 C# 源代码。我意识到 Reflector 在这方面做得很好，但它具有令人讨厌的“特性”，即仅作为 UI。

我知道我可以直接生成 C# 字符串，使用 string.Format 插入变量部分，但我真的更希望能够以编程方式生成方法（例如委托或 MethodInfo 对象），然后将这些方法传递给编写器这会将它们转换为 C#。

系统库使得在运行时从 C# 源代码字符串到编译（和可执行）方法变得如此容易，但从对象到源代码却不可能——即使是简单的事情，这似乎有点愚蠢。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T19:53:14.880

Reflector 的这个[插件](http://www.codeplex.com/FileGenReflector)可以让你输出到一个文件，并且可以从命令行运行 Reflector。让它做你想做的事情可能比滚动你自己的反编译器更简单。

[Anakrino](http://legacy.saurik.com/net/exemplar/)是另一个带有命令行选项的反编译器，但它自 .NET 1.1 以来一直没有更新。但是，它是开源的，因此您可以基于它来解决您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:52:59.063

我作为应用程序的一部分编写的代码生成器使用`String.Format`. 虽然我并不完全满意`String.Format`（Lisp 宏在一天中的任何时候都胜过它），但它可以很好地完成工作。无论如何，C# 编译器都会重新检查所有生成的方法，因此通过 Reflection.Emit 和（仍未编写的）MSIL-to-C# 反编译器来回往返，您将一无所获。

PS：如果你想使用重量级的东西，为什么不使用 CodeDOM？

# ruby-on-rails - 基本 ActiveRecordStore updated_at 字段不会在每个请求上更新

> ID：711260
> 
> 赞同：2
> 
> 时间：2009-04-02T19:35:43.627
> 
> 标签：ruby-on-rails, activerecord, session

我在我的应用程序中使用标准的 active_record_store。在`environment.rb`我有：

```
config.action_controller.session_store = :active_record_store 
```

我的`sessions`表是用以下内容创建的`rake db:sessions:create`：

```
create_table :sessions do |t|
  t.string :session_id, :null => false
  t.text :data
  t.timestamps
end

add_index :sessions, :session_id
add_index :sessions, :updated_at 
```

但是，该`updated_at`列并未针对每个请求进行更新。它在会话创建时更新（与`created_at`预期的值相同），但不会针对任何后续请求。

奇怪的是，如果我在其中声明以下显式调用，`environment.rb`那么该字段*会*在每个请求时更新：

```
class CGI::Session::ActiveRecordStore::Session
 def before_save
  self.updated_at = Time.now
 end
end 
```

谁能解释为什么默认情况下这不起作用？

我正在运行 Rails 2.1.0 ——不，我目前无法升级 Rails！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T03:42:25.347

你在更新会话吗？如果您不更新值，那么我相信会话不会保存到磁盘。

```
class WhateverController < ActionController
  def index
    session[:whatever] = true
  end
end 
```

# c# - 在 C# 中将字符串转换为 2 位小数的最有效方法

> ID：711264
> 
> 赞同：4
> 
> 时间：2009-04-02T19:36:15.890
> 
> 标签：c#, string

我有一个`string`需要插入小数位才能给出2的精度。

```
3000 => 30.00
 300 =>  3.00
  30 =>   .30 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-02T19:42:43.097

给定一个字符串输入，转换为整数，除以 100.0 并使用 String.Format() 使其显示两位小数。

```
String.Format("{0,0:N2}", Int32.Parse(input) / 100.0) 
```

更智能且无需来回转换 - 用零将字符串填充到至少两个字符，然后从右侧插入一个点两个字符。

```
String paddedInput = input.PadLeft(2, '0')

padedInput.Insert(paddedInput.Length - 2, ".") 
```

填充到三个长度以获得前导零。在扩展方法中填充到精度 + 1 以获得前导零。

作为一种扩展方法，只是为了踢球。

```
public static class StringExtension
{
  public static String InsertDecimal(this String @this, Int32 precision)
  {
    String padded = @this.PadLeft(precision, '0');
    return padded.Insert(padded.Length - precision, ".");
  }
}

// Usage
"3000".InsertDecimal(2); 
```

注意：PadLeft() 是正确的。

```
PadLeft()   '3' => '03' => '.03'
PadRight()  '3' => '30' => '.30' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:54:35.547

使用 tryParse 来避免异常。

```
int val;

if (int.Parse(input, out val)) {
    String.Format("{0,0:N2}", val / 100.0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-30T04:06:17.907

这是非常简单的方法并且效果很好.. urValue.Tostring("F2")

假设.. int/double/decimal urValue = 100; urValue.Tostring("F2"); 结果将是“100.00”

所以 F2 是你想要的小数位数如果你想要 4 位，然后使用 F4

# css - 获取背景图像以显示在空白 div 元素中

> ID：711265
> 
> 赞同：13
> 
> 时间：2009-04-02T19:36:27.697
> 
> 标签：css

我正在寻找使用空白 div 元素来显示背景图像，但除非我在 div 元素中放置一些东西（即一些文本），否则什么都不会显示。

我需要这样做，因为我想在一些文本旁边显示一个图形，但让图形与文本垂直对齐。

如何让背景图像显示在空白 div 中？

我的 Google-fu 让我失望了。

```
<div class="photoInfo">
lorem ipsum | 
<div style="background:url('foo.gif') no-repeat;display:inline;"></div>
</div> 
```

谢谢！

编辑：下面的代码实际上显示了图像，但我只需要将其缩小 2 或 3 个像素即可使其完美对齐。

这就是我想要实现的目标，有什么想法吗？

```
<div class="photoInfo">
    Added<span class="spacer">•&lt;/span>Wed Apr 01, 2009 1:01 pm<span class="spacer">•&lt;/span>64.10 KB<span class="spacer">•&lt;/span>659x878 pixels
    <span class="spacer">•&lt;/span>
    <img src="/_assets/img/icons/new-photo-small.gif" />
</div>
<!--<div style="height:14px;width:31px;background:url('') no-repeat 0px 5px;display:inline-block;"></div>-->

.photoInfo
{
font-size:0.6em;
color:#b0bad9;
padding-bottom:15px;
text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T19:44:43.263

试一试！

```
one | <span style="padding-left: 20px; background: url('16x16-image.gif') no-repeat; height: 16px">two</span> | three 
```

如果您使用 a`div`而不是`span`，则还需要设置`display: inline`样式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-02T19:39:23.167

你必须给 div 一个大小，否则它的大小是 0px x 0px。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-02T19:39:26.990

便宜的解决方法。在 div 中放置一个不间断空格 ( )。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-02T20:20:37.560

如果您不想要任何文本，这适用于 Safari 和 Firefox（未测试 IE）：

`one | <span style="padding: 16px 16px 0 0; background: url('16x16-image.gif') no-repeat; font-size: 0">&nbsp;</span> | three`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T19:38:48.627

背景应该在 photoInfo 上`div`，你可以用`background-position`. 您不能在高度和宽度为 0 的东西上设置背景。如果你增加它，虽然它会占用你的设计空间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-02T19:39:10.313

`overflow:hidden`可能会有所帮助，或者为 div 分配长度和宽度。

总的来说，我认为还有其他方法可以实现您想要的。如果您只想让文本和图像水平对齐，则无需将图像放入`div`. 例如，您可以使用`inline`and `float`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-03T01:25:11.433

您是否尝试在不移动 div 的情况下移动背景图像？

尝试`background-position: xpos ypos;`

将其向下移动 3 个像素：`background-position: 0px 3px;`

# iphone - 除了 WWDC，我还可以去哪里进行可可实践培训？

> ID：711272
> 
> 赞同：3
> 
> 时间：2009-04-02T19:38:33.777
> 
> 标签：iphone, xcode, macos, cocoa-touch

我正在与 Cocoa 和 Xcode 对抗，并且已经持续了几个月。我似乎永远无法摆脱通常不完整的教程或样本很少的 Apple 开发人员文档。我观看了视频，下载了源代码并向开发人员寻求帮助。我仍然觉得当某些东西落到适当位置时我还没有听到那种“咔哒”声。也许我太老了，无法学习新东西，但我觉得在 .Net 中很有成效！

是否有针对 Cocoa 编程的面对面培训计划？有没有我缺少的资源？我不知道的用户组？

我在德克萨斯州达拉斯，但愿意飞往美国任何地方接受真正的培训！

编辑1：

我遇到的最大问题是 Interface Builder 和 XCode 之间的绑定。我不想失去 IB 的生产力优势，但我坚持按照分步说明使用 GUI 工具。命名法（“文件所有者”、“参考出口”）对我来说是陌生的，我希望有人能真正和我坐下来，一步一步地解释我在做什么以及为什么。我觉得我一直在追求货物，每次我坐在我的 Mac 前，我都会泄露我所学到的一切。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T19:40:26.457

[大书呆子牧场。](http://www.bignerdranch.com/index.shtml)

> Big Nerd Ranch 提供由专家在静修环境中教授的密集、低调的计算机编程课程。教室、住宿和用餐都在同一栋大楼内进行，让您可以自由地学习、编码并与您的编程同行和教​​师讨论。在 Big Nerd Ranch，我们负责细节；你唯一的工作就是学习。

它很贵，但值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-04T20:56:09.860

> 我遇到的最大问题是 Interface Builder 和 XCode 之间的绑定。我不想失去 IB 的生产力优势，但我坚持按照分步说明使用 GUI 工具

我认为你应该问问自己，现在，对于你来说，IB 是否能提高生产力。我发现让 IB 一个人呆着，在代码中制作 UI 可以让我更多地了解 UIKit 以及它是如何工作的。然后当我再次尝试 IB 时，它就清晰多了。

我还建议您去 WWDC，在那里您可以与 Apple 工程师或许多同行 UIKit 程序员交谈。

关于您关于文件所有者的问题，它是NIB 中存在于您的应用程序（即不在NIB 中）但您在加载NIB 时传入的对象的占位符。它只是“另一个对象”。您使用 NSBundle 的第二个参数设置它`loadNibNamed:owner:options:`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-12T19:14:24.833

经营 Big Nerd Ranch 的 Aaron Hillegass 有一本书，名为“ [Mac OSX 的 Cocoa 编程](https://rads.stackoverflow.com/amzn/click/com/0321774086)”，现在已经是第四版了，它以比 Apple 文档更易于掌握的方式涵盖了您所描述的所有内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T20:24:45.507

另一种选择是跟随新的斯坦福 iPhone 课程：

[http://news.stanford.edu/pr/2009/pr-apple-040109.html](http://news.stanford.edu/pr/2009/pr-apple-040109.html)

编辑您的问题以描述似乎是最大的障碍 - Objectve-C 可能会有所帮助？可可？国际文凭组织？XCode 本身？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T06:24:35.260

Big Nerd Ranch 是 Cocoa 和 Cocoa-Touch 最著名的培训“学校”，但还有很多其他的。

但是，我的朋友，我觉得您需要的不是培训本身——我有一种感觉，您正在尝试遵循您从 .Net 和您在 Cocoa 中使用的其他东西获得的直觉，这通常令人痛苦地沮丧和非生产性的。你看 - 这些生态系统几乎没有共同点，而且他们持有不同思想的大想法。

我建议首先在您处理的小样本中“获得可听见的点击”，并且确实询问人们/谷歌/堆栈溢出问题。了解 Apple 文档的结构，最重要的是停止依赖复制和粘贴进行开发。您很少从示例代码中获得任何理解。它提供最后的细节、正确的参数、久经考验的实现。永远不要学习概念。

现在我在这里（还有许多其他人 - 比我自己更好）准备回答我们可以回答的任何问题。

啊——一本好书也有帮助。我推荐 Aaron Hillegass（Big Nerd Ranch）“Mac OS-X 的 Cocoa 编程”。除了从样本到样本之外，它还提供了真正的深入理解。

# design-patterns - ColdFusion 对 ASP.NET 的母版页有答案吗？

> ID：711278
> 
> 赞同：7
> 
> 时间：2009-04-02T19:39:25.600
> 
> 标签：design-patterns, coldfusion, master-pages, code-reuse

我正在开发一个用 ColdFusion 编码的网站。我有一个 CSS/HTML 模板，我想将其应用于每个页面的内容，而无需复制任何不必要的代码。我被 ASP.NET 的母版页宠坏了，这将是我实现该站点的首选方式。不幸的是，我无法使用该选项。该站点必须在 Coldfusion MX 7 上运行。此外，领导该项目的开发人员不喜欢 Fusebox，因此该选项已失效。

每个页面的主导航、图形页眉和页脚都相同。标题标签、元标签和二级导航可能会因页面而异。除此之外，只有页面的“主要内容区域”会有所不同。

给定这些参数，我如何对站点进行编码以获得最大的可维护性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-02T20:43:02.687

ColdFusion 有很多方法可以做到这一点。

**[Application.cfc](http://www.bennadel.com/blog/726-ColdFusion-Application-cfc-Tutorial-And-Application-cfc-Reference.htm)**在每个请求上执行，并有两种方法（`onRequestStart`和`onRequestEnd`）可用于将内容添加/附加到页面中的主脚本。

另外值得注意的是，可以扩展/继承您的 Application.cfc，允许更复杂的 RequestStart/End 事件集。[更多细节在这里](http://corfield.org/blog/index.cfm/do/blog.entry/entry/Extending_Your_Root_Applicationcfc)和[这里](http://www.bennadel.com/blog/1179-Ask-Ben-Extending-Application-cfc-And-OnRequestStart-With-SUPER.htm)。

**[自定义标签](http://livedocs.adobe.com/coldfusion/7/htmldocs/00001071.htm)**允许您创建一个标签，您可以将其包裹在每个模板周围以应用布局/等。它还允许属性/等定义常见但不断变化的文本。

例如：

```
<cf_page PageTitle="My Page">
    [main page content]
</cf_page> 
```

在自定义标签 (page.cfm) 中，您有：

```
<cfif ThisTag.ExecutionMode EQ 'start'>
    <cfparam name="Attributes.PageTitle" default=""/>
    <cfcontent reset/><cfoutput><!DOCTYPE html>
    <html>
    <head>
        <title>My Website - #Attributes.PageTitle</title>
        [styles and scripts and stuff]
    </head>
    <body>
        <div id="heading">
            <img src="my_website_logo.png" alt="My Website"/>
        </div>
        <ul id="mainmenu" class="nav">
            [menu]
        </ul>
        <h1>#Attribute.PageTitle#</h1>
    </cfoutput>
<cfelse>
    <cfoutput>
        <div id="footer">
            [footer]
        </div>
    </body></html></cfoutput>
</cfif> 
```

当然，您可以创建多个自定义标签，或者根据指定的属性创建一个以多种方式工作的标签。

Henry 已经提到过 MVC **Frameworks**，但是你不需要做 MVC 来使用模板/布局功能。

**[Fusebox](http://www.fusebox.org/)**可以做 MVC，但它*不需要*你这样做，不管怎样，FB 的 ContentVariables 都是实现模块化内容的好工具——除非你的首席开发人员可以*证明*他不喜欢 Fusebox（并建议一个更适合你的项目的替代方案！）那么绝对没有理由不去 - 它是一个成熟且知名的框架，易于使用，大量的开发人员等等。

但是，如果 Fusebox 真的不是一个选项，请查看[Charlie Arehart 的框架列表](http://www.carehart.org/cf411/#cffw)——该页面通常是一个值得一看的巨大工具列表。

无论如何，这应该给你足够的事情来考虑现在......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-03T14:05:40.963

ColdFusion 开发人员在 90 年代后期开始使用名为 cf_bodycontent 的自定义标签，以避免必须包含单独的页眉和页脚文件。那是在 ASP.NET 的母版页出现之前的六七年。;-)

现在有一个本地标签可以做同样的事情：**cfsavecontent**。以下是人们如何在模板中使用 cfsavecontent 的精髓。

```
 <!--- index.cfm --->
   <cfsavecontent variable="content">
      <cfinclude template="#url.action#.cfm">
   </cfsavecontent> 

   <cfinclude template="template.cfm">

   <!--- template.cfm --->
   <cfparam name="title" default="Welcome">
   <html>
      <head><cfoutput>#title#</cfoutput></head>
      <body>
         ... header, menu, sidebar, whatever ...
         <cfoutput>#content#</cfoutput>
         ... right column, footer ...
      </body>
   </html>

   <!--- foo.cfm --->
   <cfset title="Welcome to Foo">
   Hello World! I'm the page at index.cfm?action=foo

   <!--- bar.cfm --->
   <cfset title="Welcome to Bar">
   Hello World! I'm the page at index.cfm?action=bar 
```

如果您想在模板中放置模板，只需添加另一个 cfsavecontent。

```
 <!--- index.cfm --->
   <cfsavecontent variable="content">
      <cfinclude template="#url.action#.cfm">
   </cfsavecontent> 

   <cfsavecontent variable="content">
      <cfinclude template="internal_template.cfm">
   </cfsavecontent>

   <cfsavecontent variable="content">
      <cfinclude template="master_template.cfm">
   </cfsavecontent>         

   <cfoutput>#content#</cfoutput> 
```

您可以重构以消除冗余。

```
 <!--- index.cfm --->
   <cfsavecontent variable="content">
       <cfinclude template="#url.action#.cfm">
   </cfsavecontent> 

   <cfparam name="templates" default="internal,master">

   <cfloop list="#templates#" index="t">
       <cfsavecontent variable="content">
           <cfinclude template="#t#_template.cfm">
       </cfsavecontent>
   </cfloop> 

   <cfoutput>#content#</cfoutput> 
```

如果您想让一个模板“扩展”另一个模板，您可以通过将列表转换为堆栈并让每个模板将其父模板推入堆栈来实现。

```
 <!--- internal_template.cfm --->
  <cfset templates = listAppend("master", templates)>  

  ...
  <cfoutput>#content#</cfoutput>
  ...

  <!--- index.cfm --->
  <cfsavecontent variable="content">
      <cfinclude template="#url.action#.cfm">
  </cfsavecontent> 

  <cfparam name="templates" default="internal">

  <cfloop condition="listlen(templates) gt 0">
      <cfset t = listFirst(templates)>
      <cfset templates = listRest(templates)>
      <cfsavecontent variable="content">
          <cfinclude template="#t#_template.cfm">
      </cfsavecontent>
  </cfloop> 

  <cfoutput>#content#</cfoutput> 
```

这样你就有了 StackBox，一个在 StackOverflow 上发明的 ColdFusion 框架。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T20:09:46.557

您可以尝试其中一种支持模板的 MVC 框架（几乎每个人都有）。

[ColdBox](http://coldboxframework.com/) , [Model-Glue](http://www.model-glue.com/coldfusion.cfm) , [Mach-II](http://www.mach-ii.com/) , [Fusebox](http://www.fusebox.org/) ...

此[Galleon 论坛端口比较](http://on.tapogee.com/galleonproject/comparison.html#views)页面突出显示每个框架如何处理模板...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T19:40:56.347

查看 CFINCLUDE

# iphone - 在 iPhone 应用程序中绘制这个椭圆的最佳方法是什么？

> ID：711283
> 
> 赞同：3
> 
> 时间：2009-04-02T19:40:27.533
> 
> 标签：iphone, cocoa, cocoa-touch, quartz-graphics

我想在我的 iPhone 应用程序中有一个与邮件应用程序类似的椭圆。仅供参考的屏幕截图在这里：[http ://dl-client.getdropbox.com/u/57676/screenshots/ellipse.png](http://dl-client.getdropbox.com/u/57676/screenshots/ellipse.png)

最终，我想要一个以数值为中心的椭圆。这个任务最好使用 UIImage 吗？用 Quartz 绘制它的开销可能更少？如果它是用 Quartz 完成的，任何人都可以显示绘制它的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T20:31:45.770

啊，一个圆角矩形。这不是太难画。您可以使用贝塞尔路径来获得您想要的。代码如下所示：

```
CGRect rect;
CGFloat minX = CGRectGetMinX(rect), minY = CGFloatGetMinY(rect), maxX = CGFloatGetMaxX(rect), maxY = CGRectGetMaxY(rect);

CGFloat radius = 3.0; // Adjust as you like
CGContextBeginPath(context);
CGContextMoveToPoint(context, (minX + maxX) / 2.0, minY);
CGContextAddArcToPoint(context, minX, minY, minX, maxY, radius);
CGContextAddArcToPoint(context, minX, maxY, maxX, maxY, radius);
CGContextAddArcToPoint(context, maxX, maxY, maxX, minY, radius);
CGContextAddArcToPoint(context, maxX, minY, minX, minY, radius);
CGContextClosePath(context); 
```

既然您在图形上下文中有一条路径，您可以使用`CGContextDrawPath`and`CGContextFillPath`函数绘制它或勾勒它的轮廓。

# asp.net - Mono 2.4 错误：“功能‘泛型’在 Mono mcs1 编译器中不可用。考虑改用“gmcs”编译器

> ID：711292
> 
> 赞同：1
> 
> 时间：2009-04-02T19:43:27.680
> 
> 标签：asp.net, mono, httphandler

使用此处的说明在 Ubuntu 上安装 Mono 2.4：http: [//www.nabble.com/forum/PrintPost.jtp?post=22841086](http://www.nabble.com/forum/PrintPost.jtp?post=22841086)

当我运行 xsp 并尝试运行 http 模块（[http://192.168.1.6:8080/album.ashx](http://192.168.1.6:8080/album.ashx)）时，出现以下错误：

```
编译错误

说明：编译服务此请求所需的资源时出错。查看您的源文件并对其进行修改以修复此错误。

编译器错误消息：/tmp/fredf-temp-aspnet-0/e8a60863/194d0e44.cs(479,18)：错误 CS1644：功能“泛型”在 Mono mcs1 编译器中不可用。考虑改用“gmcs”编译器
/tmp/fredf-temp-aspnet-0/e8a60863/194d0e44.cs(479,50)：错误 CS1644：功能“泛型”在 Mono mcs1 编译器中不可用。考虑改用“gmcs”编译器

```

如何修复此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T21:09:22.780

应该有一个可以运行的“xsp2”，它将使用 2.0 编译器而不是 1.0 编译器。

# ruby - 如何在 ruby 中复制目录结构，不包括某些文件扩展名

> ID：711294
> 
> 赞同：5
> 
> 时间：2009-04-02T19:44:04.590
> 
> 标签：ruby, scripting

我想编写一个 ruby​​ 脚本来递归复制目录结构，但排除某些文件类型。因此，给定以下目录结构：

```
folder1
  folder2
    file1.txt
    file2.txt
    file3.cs
    file4.html
  folder2
  folder3
    file4.dll 
```

我想复制这个结构，但排除**.txt**和**.cs**文件。因此，生成的目录结构应如下所示：

```
folder1
  folder2
    file4.html
  folder2
  folder3
    file4.dll 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T19:50:11.893

您可以使用**查找**模块。这是一个代码片段：

```
 require "find"

ignored_extensions = [".cs",".txt"]

Find.find(path_to_directory) do |file|
  # the name of the current file is in the variable file
  # you have to test it to see if it's a dir or a file using File.directory?
  # and you can get the extension using File.extname

  # this skips over the .cs and .txt files
  next if ignored_extensions.include?(File.extname(file))
  # insert logic to handle other type of files here
  # if the file is a directory, you have to create on your destination dir
  # and if it's a regular file, you just copy it.
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T19:48:31.303

我不确定您的出发点是什么，或者您手动行走的意思是什么，但假设您正在迭代一组文件，您可以使用拒绝方法根据布尔条件的评估来排除项目​​。

例子：

```
Dir.glob( File.join('.', '**', '*')).reject {|filename| File.extname(filename)== '.cs' }.each {|filename| do_copy_operation filename destination} 
```

在此示例中，Glob 返回一个可枚举的文件名集合（包括目录）。您在拒绝过滤器中排除您不想要的项目。然后，您将实现一个方法，该方法采用文件名和目标来进行复制。

可以用数组方法include吗？在拒绝块中，也沿着 Geo 中的 Find 示例。

```
Dir.glob( File.join('.', '**', '*')).reject {|file| ['.cs','.txt'].include?(File.extname(file)) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T07:38:18.507

也许使用一些shell脚本？

```
files = `find | grep -v "\.\(txt\|cs\)$"`.split 
```

# .net - 如何使用 DDD 将 Active Directory 集成到 .NET 应用程序中？

> ID：711298
> 
> 赞同：10
> 
> 时间：2009-04-02T19:44:46.617
> 
> 标签：.net, active-directory, domain-driven-design, s#arp-architecture

您如何将 Active Directory 对象（用户、组等）集成到您的 DDD .NET 应用程序中？您的存储库是什么样的？您如何处理 LDAP 会话、事务和工作单元？请注意，我不是在谈论简单的身份验证/授权方案，而是当 AD 对象是您的应用程序的核心域模型的一部分时。

我正在开发一个对 AD 用户进行配置/取消配置的应用程序，我很好奇其他人正在做什么将 AD 对象引入他们的 DDD 应用程序。我想您并没有在整个应用程序中拖拽 DirectoryEntry 对象，但我还没有找到任何用于 LDAP 对象的好的 ORM 类型工具（可能是 OLM - 对象-LDAP 映射？）。

编辑：有关该问题的更多背景信息，请参阅 Sharp Architecture 项目的[此论坛帖子](http://groups.google.com/group/sharp-architecture/browse_thread/thread/8018ccc4ccc5d5f6)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-08T20:03:20.733

实际上，我正在做类似的事情。目标不同，而是使用 DDD 构建一个可与 AD 一起工作的应用程序的事实。

我认为 LDAP 是我的持久层。所以我的领域模型都是由特定于我的应用程序的对象组成的，而不是特定于 AD 的。然后，我的存储库实现是所有特定于 AD 的东西，获取我的对象并将它们映射到 AD 对象等等。我实际上为基础构建了一个 IRepository，然后根据域聚合的需要构建了 IUserRepository 等。然后将实现命名为 ADUserRepository。

我发现这是管理所有这一切并保持头脑清醒的最简单方法；它还使测试我正在做的事情变得更容易（不确定它是否会对您的应用程序有所帮​​助）。

我不知道您可以使用任何 OLM（好术语）工具。我只是手动映射它，因为我真的只对 AD 中的一个子集感兴趣。

# objective-c - 父母的正确用语是什么？

> ID：711299
> 
> 赞同：5
> 
> 时间：2009-04-02T19:44:58.927
> 
> 标签：objective-c

在 Actionscipt 中，Parent 表示包含实例的对象。因此，如果汽车有轮子，轮子可以告诉汽车向前移动

parent.moveForward

但是，在 Obj-C 中，parent 指的是超类（不知道为什么它们有 super 和 parent 意味着同一件事）。

我找不到任何与动作脚本样式父级等效的东西，但是我真的不知道要寻找什么。在 Obj-C 中是否有一种简单的方法可以做到这一点，或者我必须在创建实例时手动传递对实例的引用？我已经尝试过了，但它抛出了一个错误，但由于我是 Obj-C 的新手，我只是想确保我采取了正确的行动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T20:19:30.823

有趣...我不知道 Actionscript 以这种方式使用了“父母”一词。

这里有两个独立的概念在起作用：继承和组合。`parent`在 Objective-C 和许多其他面向对象的语言中都使用了该术语。

在 Objective-C 中，从另一个继承的类将那个“其他”类称为它的祖先。虽然很多人都使用这个词`superclass`，但实际上你可以很合理地使用这个词`parent`。顾名思义，这是对象“继承”。

另一方面，对象“组成”是您在汽车和车轮示例中所描述的。汽车是由几个其他物体组成的，其中一个或多个是车轮。我必须承认，我并不经常听到`parent`在这种情况下用来指代汽车的术语。通常，您可能会发现 Objective-C 世界中的大多数人都会`car`通过标签“容器”来识别。但是，对于像 XML 文档这样的树型数据结构，我们经常谈论父节点和子节点。父级包含子级，因此在组合关系中使用“父级”一词也是合适的，具体取决于关系的类型。我不认为你会发现很多 Objective-C 程序员使用“父”

这种区别通常被比作“拥有”与“是”的关系：身份与拥有。在继承中，孩子“是”其父母的子类型。另一方面，在组合中，汽车“有一个”轮子，或者树中的一个父节点“有一个”子节点的集合。

编辑：下面的 Kendall Helmstetter-Gelner 就您与实例和传递参考相关的问题部分添加了一些很好的评论。如果您有特定的代码块和特定的错误消息，请随时向他们更新您的问题，我们会尽力提供帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T20:29:25.527

继续组合答案 - 通常的模式是让父级创建或获得它所持有的对象，然后将自己设置为每个对象的某种委托（如果他们需要引用父级） -请注意，与大多数其他事物不同，委托引用几乎从不保留，通常是分配的。

所以在你的例子中，父母会告诉每个轮子：

```
wheel.carDelegate = self; 
```

然后轮子可以告诉父母：

```
[carDelegate moveForward]; 
```

虽然坦率地说，这个例子中的隐喻让我有点不知所措！

另一种方法是更新父级将以某种方式轮询的包含对象中的变量（例如，这种方法可以很好地制作使用导航控制器推送的视图，然后返回主视图必须根据所做的更改做某事的地方子视图）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T21:05:38.140

由于您谈论的是直接的 Objective-C 而不是框架的特定实现（例如 Cocoa），因此有很多方法可以实现父子行为。最简单的当然是让您的父类对象有多个实例变量作为子对象。在这种特殊情况下，孩子们都接受类似`initWithParent:`or的方法。`initWithCar:`

```
@interface Car : Object
{
    Wheel[4] wheels;
}

- (void) goFoward:(Wheel *) wheel;

@end

@interface Wheel : Object
{
    Car *parent;
    float tirePressure;
    // etc . . .
}

- initWithCar:(Car *) aCar;

@end

@implementation Car
- init
{
    self = [super init];
    if (!self) return nil;

    unsigned i;
    for (i = 0; i < 4; i++)
        wheels[i] = [[Wheel alloc] initWithCar:self];

    return self;
}

- (void) goForward:
@end

@implementation Wheel
- initWithCar: (Car *) aCar
{
    self = [super init];
    if (!self) return nil;

    parent = aCar;

    return self;
}
@end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T21:32:29.323

> 不知道为什么他们有 super 和 parent 意思相同

典型的混乱:)

*   Super 是*接收者*，而不是其类的父级。就像 self*不是*接收者的类一样。self 和 super 的区别在于方法查找的起点。

*   Parent 是从一个类到它的超类的指针，然后是方法查找。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T20:42:39.007

这样做并不常见，至少不是明确的。在 Cocoa 中，我认为有两个工具可以代替您所说的功能：

1.  代表团。你给轮子一个对另一个实现了一组方法的对象的引用。这可能是对象的所有者，但也可能是其他一些被插入到位的对象（非常适合测试）。您可以通过 Cocoa 框架看到这一切。

2.  通知。如今，这最常通过[Key-Value Observing](http://developer.apple.com/documentation/Cocoa/Conceptual/KeyValueObserving/index.html)来完成。有了这个，对象 A（您的示例中的汽车）注册以在对象 B（车轮）的某个属性发生更改时接收通知。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-02T20:45:41.760

研究键值观察，或[KVO](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaBindings/Concepts/WhatAreBindings.html#//apple_ref/doc/uid/20002372-176805)。Car 可以观察 Wheel 的变化并自行更新。

# sql-server - 设置从 SQL Server 2005 到 PostgreSQL 的链接服务器

> ID：711303
> 
> 赞同：2
> 
> 时间：2009-04-02T19:45:15.167
> 
> 标签：sql-server, sql-server-2005, postgresql, linked-server

由于我在这个问题上遇到了一些困难，并且无法通过简单的步骤找到一个好的在线资源，所以就在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T19:50:44.810

1.  下载[ODBCng](https://projects.commandprompt.com/public/odbcng/wiki/Downloads)并安装
2.  设置连接到 PostgreSQL 服务器的系统 DNS。我将我的命名为 POSTGRESQL，在接下来的几个步骤中使用
3.  在 SSMS 中运行以下代码以创建链接服务器。这假设本地机器上有一个 PostgreSQL 实例（因此是 localhost）：

    EXEC master.dbo.sp_addlinkedserver @server = N'POSTGRESQL', @srvproduct=N'Microsoft OLE DB Provider for ODBC Driver', @provider=N'MSDASQL', @datasrc='PostgreSQL', @location='localhost', @catalog='公共'

4.  在 SSMS 中运行以下代码为链接服务器创建登录映射：

    EXEC master.dbo.sp_addlinkedsrvlogin @rmtsrvname=N'POSTGRESQL'，@useself=N'False'，@locallogin=NULL，@rmtuser=''，@rmtpassword=''

5.  发出声明，例如：

    SELECT * FROM OpenQuery(POSTGRESQL, 'select my_column from my_table limit 10')

我不得不使用双引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-28T06:38:26.630

您可以使用 PGNP OLE DB provider for PostgreSQL (pgoledb.com)。[请参阅http://www.pgoledb.com/forum/viewtopic.php?f=4&t=6](http://www.pgoledb.com/forum/viewtopic.php?f=4&t=6)上如何配置链接服务器的示例）。

它是非常高性能和可扩展的驱动程序。我们用它来处理数千万行的表。

问候，卡洛斯

# c# - 您如何手动将复杂对象数据绑定到模板控件，如网格视图中的一行？

> ID：711304
> 
> 赞同：3
> 
> 时间：2009-04-02T19:45:51.140
> 
> 标签：c#, asp.net, data-binding, webforms, objectdatasource

我在这里为数据绑定语法而苦苦挣扎。例如我有一个这样的数据结构 -

```
public class Course{

public string CourseName {get;set;}

public string CourseCode {get;set;}

public List<Instructor> InstructorsTeaching{get;set;}

}

public class Instructor{

public string InstructorName{get;set;}

public string InstructorCode{get;set;}

} 
```

现在，如果我想手动绑定这个 List Courses 说一个 gridview，我可以这样做

```
<asp:TextBox runat="server" ID="tbCourseName" Text='<%# Bind("CourseName")%>'/> 
```

在指定网格的编辑模板时，但是如何将 Instructors 教学属性绑定到同一行中的 ListBox，我无法弄清楚语法，这是我尝试和失败的示例

```
<asp:ListBox runat="server" ID="tbInstructors" 
     DataSource='<%# Eval("InstructorsTeaching") as List<Instructor> %>'>
    <asp:ListItem Text='<%# Bind("InstructorCode")%>' 
                 Value='<%# Bind("InstructorName")%>'/>...
 <as:ListBox/> 
```

我上面的代码肯定不起作用:)。理想情况下，我想在标记而不是后面的代码中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-17T23:30:14.227

您已经找到了 ASP.NET 2 路数据绑定糟糕的一个主要原因：您真的不能进行嵌套的 2 路数据绑定。

一方面，尽管您可以使用 Eval 来实现，但 ASP.NET 不允许使用 Bind 表达式嵌套图形语法（即 <%# Bind("Customer.FirstName") %>）。

除此之外，对于像您的场景这样的嵌套列表控件，每个列表都需要一个额外的 DataSource 控件。您正在 ListBox 上设置 DataSource，这将适用于 Eval 表达式，但要使绑定表达式起作用，您必须使用 DataSourceID 来提供提供内部结果集的 DataSource 控件的 ID。即使这样，您的结果也会很糟糕，因为您一次只能更新一个数据源。

2 路数据绑定可能是在考虑 SqlDataSource 而不是 ObjectDataSource 的情况下编写的。如果你有一个多层次的对象图，你会发现使用 2-way 数据绑定很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:04:45.167

我不认为你可以设置这样的数据源，尝试在[GridView 的 RowDataBound 事件上设置它](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

# sql-server - 数据库永久标识符

> ID：711306
> 
> 赞同：0
> 
> 时间：2009-04-02T19:47:01.183
> 
> 标签：sql-server, tsql

有人知道数据库是否有任何唯一标识符，即使它已从不同的服务器重命名或恢复/复制，我也可以使用它来识别数据库？这种 id 可以在创建数据库时由服务器创建，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T19:50:18.350

[我会在这里](http://www.onedotnetway.com/sql-server-2008-2-ways-to-get-object-id-of-a-database-object/)看看。我以前从来没有这样做过，但它可能会奏效。虽然我想一旦它移动它可能会得到一个新的 ID。没有把握。

-布莱恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T13:55:45.747

您可以采用基于系统表（例如，sysobjects、syscolumns）的输出生成散列的方法。即，如果 2 个数据库具有相同的模式并因此具有相同的校验和，则它们被认为是相同的。您可以选择要检查的对象类型，例如排除索引，因为添加索引不是对架构的根本更改，而添加/更改/删除表是。

# c# - MVC + 这种 1:n 关系的模式

> ID：711307
> 
> 赞同：0
> 
> 时间：2009-04-02T19:47:19.200
> 
> 标签：c#, model-view-controller, design-patterns, model, controller

我有一个带有 GUI 的服务器应用程序。用c#写的。现在我想对整个应用程序使用 MVC 模式。

通常你有 1 个模型，1 个控制器，也许还有 n 个视图。好的，我拥有一切，但我不确定模型。

**我的情况：** 有 1 个服务器状态，可以在线/离线，有客户端计数等。这可能是我的“ServerModel”。我将通过我的网络库处理网络连接，并在连接时创建学生对象。这一切都发生在这里。如果有新学生，该视图将被注意到并为新学生显示一个 GUI 元素（通过控制器）。现在在我看来有一个与特殊学生相关的操作，控制器收到通知“StudentChanged”并获取已更改的学生。

**问题：** 控制器现在可以直接更改学生或告诉 ServerModel 如何更改学生。第二种方法乍一看似乎有些过头，但保持 MVC 设计清晰。我想直接从控制器更改学生。但我不确定这种违反 MVC（学生不是模型，而是模型的一部分）是否会给以后的开发或整个代码的灵活性带来任何缺点。

来自汉堡的问候；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T13:03:19.630

控制器应该收集用户想要更改的关于学生的信息并将其交给视图。

您可能希望查看使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)来捆绑更改学生所需的操作。

例如

1.  用户在 UI 上执行他想要更改学生的操作
2.  UI 通知 View 用户想要通过界面更改学生。
3.  视图执行 ChangeStudent CommandObject
4.  CommandObject 显示一个 Change Student UI，该 UI 在应用程序启动时由 UI 注册到 View。
5.  用户与 Change Student UI 交互。用户完成后，该命令将检索信息。
6.  该命令修改模型并关闭 ChangeStudent UI。
7.  该命令通知视图它已完成。
8.  视图告诉 UI 命令已完成。
9.  用户界面更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T19:52:30.857

经验法则：保持模型简单，让控制器完成它的工作。

# c# - 为 .NET Web 服务设置超时值

> ID：711311
> 
> 赞同：29
> 
> 时间：2009-04-02T19:48:53.003
> 
> 标签：c#, .net, web-services, timeout

我有一个用 C# 编写的 Web 服务，它位于 SharePoint 网站上。我已经使用以下代码修改了 web.config：

```
<configuration>
  <system.web>
    <httpRuntime executionTimeout="360" /> 
```

...

对于 IIS Inetpub 文件、SP ISAPI web.config 文件和 SP 布局 web.config。我还使用相同的代码修改了 machine.config 文件，并尝试解决我在 IIS 中看到的任何超时。

当我从 Windows C# 应用程序调用此 Web 服务时，我可以进入 Web 方法并开始调试变量，但在很短的时间（约 1 分钟，可能更短）之后，变量值不再存在，因为它被返回：

System.Net.WebException “请求已中止：操作已超时。”

我试图弄清楚需要在哪里设置正确的超时值以及如何设置。完成所有更改后，我重新启动 IIS，但没有任何更改以给出不同的结果。

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-04-17T14:50:45.747

创建指定绑定和端点地址的客户端后，您可以分配一个 OperationTimeout，

```
client.InnerChannel.OperationTimeout = new TimeSpan(0, 5, 0); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-02T19:59:07.160

尝试在您的 Web 服务代理类中设置超时值：

```
WebReference.ProxyClass myProxy = new WebReference.ProxyClass();
myProxy.Timeout = 100000; //in milliseconds, e.g. 100 seconds 
```

# visual-studio - VS8 中的 STL 头文件位置

> ID：711316
> 
> 赞同：0
> 
> 时间：2009-04-02T19:50:13.593
> 
> 标签：visual-studio, stl, header

MS Visual Studio 8 安装中的 STL 头文件实际位于何处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T19:52:58.377

C:\Program Files\Microsoft Visual Studio 8\VC\include

# .net - 自定义控件上的 SkinID 不起作用（asp.net）

> ID：711321
> 
> 赞同：0
> 
> 时间：2009-04-02T19:51:10.253
> 
> 标签：.net, skins, accessor

我从 syste.web.ui.webcontrols.button 派生一个控件。然后我称它为buttonv2。然后，我向这个新类“int abc”添加一个任意属性，通过一个 get/set 访问器访问它，该访问器将它的值存储在 viewstate 中（如果 viewstate 值为 null，它也返回 0，即我试图无需设置即可访问它）。

现在，每当我给'abc'一个值，然后在调试模式下观察它，它会很好地命中访问器的'set'部分，并输入我给它的值（即55），然后紧接着，它会命中一些我的代码“if (abc >0){}”的一部分，它从视图状态中获取值为 0！

这仅在我使用 asp.net 'skins' 并在皮肤文件中预设 'abc' 值时发生。(ie) 皮肤文件内容如下：`<asp:buttonv2 runat="server" SkinID="bob" abc="55" />`

在我使用的页面中`<asp:buttonv2 runat="server" SkinID="bob" />`，我的概率是 abc 总是等于 0？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T21:11:51.743

我*认为*皮肤参数是在控件初始化期间分配的，而视图状态只会在 OnInit 完成后存储。

来自 MS：“它仅在对页面请求执行 OnInit 方法后跟踪对这些属性的更改，并将更改保存到页面或控件的视图状态。”

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

和

[http://msdn.microsoft.com/en-us/library/system.web.ui.statebag.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.statebag.aspx)

更多。

如果您只是将值分配给“set”上的局部变量，然后将其从页面 init/load 上的“get”添加到视图状态，会发生什么？

# php - 如何使用 php 表单的重置按钮？

> ID：711324
> 
> 赞同：0
> 
> 时间：2009-04-02T19:52:54.180
> 
> 标签：php, forms, reset

我有一个我正在使用 PHP 处理的表单。在用户提交之前，重置按钮起作用。但是当他们提交并且页面重新加载时（我已经根据 $_POST 值使表单字段保持粘性）重置不起作用。我该如何解决？编辑：例如，表单上的复选框：

```
 <input type="checkbox"  <?php if (isset($_POST['cb12'])){echo 'checked="checked"';} ?> name="cb12" tabindex="34" id=cb value="Education"> 
```

和 HTML：

```
<tr>
          <td colspan="5" valign="top" class="addit" ><div class="sectionbreak topsp" >
              <input type="hidden" name="failure" value="failure.html" >
              <p>
                <input type="submit" name="Submit" value="Submit" tabindex="49">
                Sends your application by email to The Boggs</p>
              <p>
                <input type="reset" name="Reset" value="Reset" tabindex="50">
                Clears all the fields</p>
            </div></td>
        </tr> 
```

编辑：最后，如果表单已提交（但不完整），我只是隐藏了按钮。也许没有人会注意到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-02T21:43:03.760

重置按钮撤消用户对表单所做的更改，它不会删除默认值。如果要删除所有默认值，可以使用 JavaScript 执行以下操作：

```
<script type="text/javascript">
   function resetForm(myFormId)
   {
       var myForm = document.getElementById(myFormId);

       for (var i = 0; i < myForm.elements.length; i++)
       {
           if ('submit' != myForm.elements[i].type && 'reset' != myForm.elements[i].type)
           {
               myForm.elements[i].checked = false;
               myForm.elements[i].value = '';
               myForm.elements[i].selectedIndex = 0;
           }
       }
   }
</script> 
```

...

```
<form id="myFormId" ...>

<input name="reset" type="reset" onclick="resetForm('myFormId'); return false;" /> 
```

...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T19:55:38.760

您可以使用`unset($_POST)`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-14T05:29:10.543

重置按钮撤消用户对已编辑表单值的更改，它不会删除默认值。重置按钮通常用于已编辑页面或提交页面

```
<input type="reset" value="Reset" name="reset" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T21:53:19.867

我刚刚经历了这件事，请参阅我[以前的问题和令人难以置信的有用答案](https://stackoverflow.com/questions/680241/reset-form-with-jquery)。

最后，我不得不手动重置 PHP 中的值。

编辑：对您来说，与您似乎基于 $_POST 而不是 $_SESSION 填充表单值的情况并不完全相同。在这种情况下，请参阅我通过上面的链接接受的答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T06:05:27.977

已经在另一个帖子中回答了这个问题：

我只是 PHP 的中级，有点懒得去钻研 JQuery 之类的新语言，但是下面这不是一个简单而优雅的解决方案吗？

```
<input name="Submit1" type="submit" value="Get free quote" />
<input name="submitreset" type="submit" value="Reset" /> 
```

看不到为什么没有两个提交按钮的原因，只是用途不同。然后简单地说：

```
if ($_POST['submitreset']=="Reset") {
$_source = "--Choose language from--";
$_target = "--Choose language to--"; } 
```

您只需将您的值重新定义回默认值即可。

# c# - Linux、Mono、共享库和未解析的符号

> ID：711333
> 
> 赞同：2
> 
> 时间：2009-04-02T19:53:32.710
> 
> 标签：c#, linux, mono, shared-libraries

我有一个 shim 库（共享，C++），它调用另一个共享库（libexif）中的函数，并为平台调用调用提供了一个简单的 C# 接口。（也就是说，一个 C# 程序使用 PInvoke 调用我的自定义共享库，该共享库又调用另一个共享库。）

在 Windows 中，当我的自定义库链接和 C# 应用程序执行时，我的自定义共享库链接到共享库，所有符号都被解析。

在 Linux 上，链接我的共享库不会链接其他共享库。使用 C++ 驱动程序，我在链接*应用程序*时指定另一个库，此时所有符号都已解析。但是，当我尝试从 C# 程序（使用单声道编译）调用我的共享库时，其他共享库中的符号无法解析。我尝试使用 MONO_PATH 变量来指定另一个库，但似乎没有什么不同。我还尝试在 DLLimport 语句中指定未解析的函数，但这似乎也无济于事。

如何指定 C# 代码不直接调用的共享库，以便 mono/cli 在运行时找到它？

我使用以下命令来构建共享库：

```
g++ -fPIC -g -c -Wall  libexif-wrapper.cpp
g++ -shared -Wl,-soname,libexif-wrapper.so.1     -o libexif-wrapper.so.1.0.1 libexif-wrapper.o -lc
ar rcs libexif-wrapper.a libexif-wrapper.so.1 
```

以及以下命令行来编译我的 C# 驱动程序：

```
mcs -unsafe -define:LINUX Test-libexif-wrapper.cs 
```

在执行时，我收到一个错误，即找不到我的共享库使用的符号：

```
/usr/bin/cli: symbol lookup error: ../../../C/libexif-wrapper/libexif-wrapper/libexif-wrapper.so.1: undefined symbol: exif_data_new_from_file 
```

（libexif-wrapper 是我的共享库，它充当 C# 应用程序和 libexif 之间的垫片。）

我一直无法弄清楚如何解决这个问题。任何建议，将不胜感激。

编辑：回答问题：

> 您确定可以在 LD_LIBRARY_PATH 环境变量中找到非托管 libexif-wrapper 吗？

事实上并非如此。我已经在 DLLImport 中设计了直接指向它的路径。运行时找到它是因为它在上面的错误消息中报告了它的路径。此外，缺少的符号不是由 C# 程序调用的，而是我的共享库中的一个函数调用了随后找不到的函数。（谢谢 - 汉克）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T22:08:11.997

您应该在链接包装器库时指定依赖项，例如

```
g++ -shared -Wl,-soname,libexif-wrapper.so.1 -o libexif-wrapper.so.1.0.1 libexif-wrapper.o -lc -lexif 
```

当你这样做时，动态链接器知道 libexif-wrapper 依赖于 libexif，它可以解析加载时的符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T22:07:43.810

我对你为什么需要感到困惑`-lc`，但也许那是 Mono 的怪事......

如果您添加`-lexif`到链接命令，它是否有效？似乎您正在创建一个带有未定义符号的共享库，但没有说明这些符号应该来自*哪里。*这实际上有时很有用——比如说，创建一个使用符号的插件，该符号预计已经由加载它的应用程序提供——但不是你想要的；我不知道`libdl`（或者无论如何 Mono 加载库，也许它有自己的实现）会知道它需要加载`libexif.so`以在您的库中使用。

希望您不必做一些可怕的事情，例如添加`libexif.so`到存档中...

# javascript - 访问 Javascript 块内的页面模型

> ID：711341
> 
> 赞同：0
> 
> 时间：2009-04-02T19:54:44.317
> 
> 标签：javascript, jquery, asp.net-mvc

我在视图中嵌入了以下 jquery 代码：

```
$(document).ready(
function()
{
    $(".dblclick").editable("http://localhost/Configuration/Edit", {
        id: 'nodeID',
        name: 'nodeValue',
        event: "dblclick",
        style: "inherit",
        submit: "Save",
        cancel: "Cancel",
        submitdata : {divison: "1"}
    });

}); 
```

我遇到的问题是我似乎无法访问页面的通常 MVC 特性（有没有更好的短语？）。

基本上，我想要完成的是在 submitdata 属性中（以及稍后在 URL 中），我想将实际的 id 嵌入到页面中：

```
submitdata : {divison: <%= Html.Encode(Model.DivisionID) %>} 
```

是否无法访问脚本块内的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:00:21.807

当然，这应该可以，只要它是页面脚本而不是外部 .js 或其他东西。

你有错误吗？唯一看起来可能是个问题的是，在您的第一个示例中，您正在传递一个字符串，而在您的服务器块中，您不是。尝试在它周围加上引号：

```
submitdata : {divison: "<%= Html.Encode(Model.DivisionID) %>"} 
```

# sql-server - 来自 SQL Server 的 OPENXML 命令选择的元素的 InnerXML

> ID：711347
> 
> 赞同：0
> 
> 时间：2009-04-02T19:56:13.173
> 
> 标签：sql-server, xml, sql-server-2008

[作为这个](https://stackoverflow.com/questions/710251/is-there-a-silver-bullet-to-importing-xml-data-into-sql-server-2008-express)问题的后续- 有没有办法在您使用 OPENXML 选择的元素中获取原始 XML？我应该改用 XML 数据类型吗？有没有办法使用 XML 数据类型获取原始 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T21:09:08.833

好吧，使用 SQL Server 2005 及更高版本中的 XML 数据类型，您始终拥有**原始**XML - 无需“获取” - 它就在列中，为了您的方便而存储。

当然，您也可以使用 XQuery 和 XPath 查询它，甚至可以在它存储在数据库中时对其进行更新！

如果可以 - 绝对使用 XML 数据类型！您可以使用它“无类型”或将其与 XML 模式关联以添加验证。

马克

# llblgenpro - LLBLGenPro - 如何根据谓词直接更新数据库字段值

> ID：711348
> 
> 赞同：0
> 
> 时间：2009-04-02T19:56:58.973
> 
> 标签：llblgenpro

我有一个表，其中有一个名为 Ordinal 的列，用于跟踪显示顺序。当一个实体改变它的序数值时，数据库中的其他记录需要调整它们的序数值，根据情况上下调整。有没有办法通过 llblgen 来做到这一点（2.6 适配器 .net 3.5）？

我需要生成的查询是这样的......

```
update MyTable set Ordinal = Ordinal + 1 where Ordinal >= @newOrdinal

update MyTable set Ordinal = Ordinal - 1 where Ordinal <= @newOrdinal and ordinal > @oldOrdinal

update MyTable set Ordinal = Ordinal + 1 where Ordinal >= @newOrdinal and Ordinal < @oldOrdinal

update MyTable set Ordinal = Ordinal - 1 where Ordinal > @oldOrdinal 
```

我不认为

```
adapter.UpdateEntitiesDirectly(newValues, filter); 
```

会起作用，因为当我需要从字段的当前值中添加或减去时，newValues 将是静态的

我也知道我可以使用存储过程或触发器来实现这一点，但如果可能的话，我想通过 llblgen 来实现。

谢谢，杰里米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T23:07:32.777

找到答案，实体更新中的表达式。

[http://www.llblgen.com/documentation/2.6/Using%20the%20generated%20code/gencode_expressionsaggregates.htm#expressionsinentityupdates](http://www.llblgen.com/documentation/2.6/Using%20the%20generated%20code/gencode_expressionsaggregates.htm#expressionsinentityupdates)

# c++ - 学习使用 C++ 处理音频

> ID：711350
> 
> 赞同：36
> 
> 时间：2009-04-02T19:57:40.267
> 
> 标签：c++, audio

我的学位是音频工程，但我对编程还很陌生。我想学习如何在编程环境中使用音频，部分原因是我可以通过有趣的项目更好地学习 C++。

首先，C++ 是正确的语言吗？有什么理由我不应该使用它吗？我听说过 Soundfile 和其他一些库——你会推荐什么？

最后，有没有人知道这个主题的任何好的教程？我已经学习了 DSP 的基础知识——我只想对其进行编程！

编辑：我使用 Windows。我想玩一些实时的东西，有点像 Max/MSP，但有更多的控制权。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-02T20:06:55.660

这真的取决于你想做什么样的音频工作，如果你想为游戏实现音频，C++肯定是正确的语言。周围有很多库，OpenAL 很棒，免费且多平台。我还成功地使用了 DirectSound 和 Fmod。检查出来，这一切都取决于你的需要。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-05T18:46:30.570

如果您确实决定使用 C++，那么[Synthesis Toolkit](http://ccrma.stanford.edu/software/stk/)值得注意。我将它用于一个学校项目，它非常有用，在斯坦福大学开发，跨平台（win、mac 和 linux），免费和开源。[维基百科页面](http://en.wikipedia.org/wiki/Synthesis_Toolkit)的摘录：

> STK 乐器类的版本已集成到 Chuck、Csound、Real-Time Cmix、Max/MSP（作为 PerRColate 的一部分）和 SuperCollider

他们包含了很多测试代码 + 在网站上是一些开始使用他们的库的教程。（但你当然必须了解一些 C++）

STK 有一些类来读/写音频文件（和 matlab 文件），实时音频/midi io，一些基本算法（基于 matlab 类似函数的用法），...

* * *

另一个*明显*的选择，可能是学习/测试 dsp 最常用的环境是[Matlab](http://www.mathworks.com/)（或免费的[octave](http://www.gnu.org/software/octave/)，但我以前没有使用过）。在用 C++ 实现之前，我有时会在 Matlab 中测试一些东西。

* * *

编辑：在过去的一年里，我一直在使用[JUCE](http://www.juce.com/)，它是一个非常酷的 C++ 库，以 C++ 音频编程为中心，尽管它更倾向于 QT 之类的东西。他们的一位开发人员 (Timur Doumler) 在 CppCon 2015 上对 C++ 和 JUCE 的实时音频进行了很好的讨论，即使您最终没有使用 JUCE，也绝对值得一试：[https ://youtu.be/boPEO2auJj4](https://youtu.be/boPEO2auJj4)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-02T20:23:22.890

C++ 是正确的语言吗？这完全取决于上下文。如果您需要将代码插入另一个应用程序、框架或其他任何东西，您可能必须使用该框架所针对的任何语言。

如果您正在制作自己的独立应用程序？可能不是。我建议您使用另一种语言的原因有几个：

*   C++ 不太适合初学者。如果您的目标是通过这些项目学习编程，请使用更适合“边做边学”的语言。C++ 充满了陷阱和“似乎有效”的东西，直到有一天它们不再有效。再加上极其复杂的语法和一些非常复杂的习语和技巧，你必须掌握这些技巧和技巧，才能解决几乎在任何其他语言中都不是问题的语言怪癖，并且你有一个很好的错误和挫折来源，并且不多。
*   C++ 没有“音频”的概念。C++ 不提供对录制、处理或播放音频、加载或保存音频文件或其他任何内容的任何支持。大多数现代语言都在标准语言中内置了某种形式的音频支持（至少能够加载和播放 mp3 文件和其他此类基础知识）。在 C++ 中，所有这些都必须通过第三方库和特定于操作系统的代码来完成。

如果您在语言方面有真正的选择，我会说选择 Python 或 C# 之类的东西。它们更容易学习，具有更多开箱即用的功能，并且让你更难自爆。我不会向还不是经验丰富的程序员的人推荐 C++。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-02T20:11:45.337

看看[大胆](http://audacity.sourceforge.net/)。它是一个用 C++ 编写的跨平台（Linux、OS X 和 Windows）开源音频编辑器。我不知道您的 GUI 技能处于什么水平，但处理音频工作的代码应该很容易与 wxWidgets (GUI) 代码区分开来。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-07-07T04:39:56.920

C++ 可以成为一种很好的音频处理语言，我使用[Marsyas](http://marsyas.sf.net)框架，这是一个跨平台的包，可以让您非常轻松地完成复杂的音频信号处理、音乐信息检索和机器学习任务。它也非常快，与许多其他软件包不同，您可以实时完成许多复杂的任务。在我们运行的测试中，Marsyas 可以比 Matlab 快数百倍。

为了让你开始，这里有一些代码。假设您想播放一个音频文件，为此，您将在 Marsyas 中创建一个如下所示的网络：

*   系列

*   声音文件源
*   获得
*   音频接收器

Marsyas 使用隐式修补模型，这有点像您在 Max/MSP 中看到的显式修补，但您不必在对象之间绘制连线，只需将它们放入容器中，然后自动创建连线。上面的 Series 对象包含一个 SoundFileSource，您可以将其输入音频文件，然后将其传递给 Gain，后者允许您更改音频的音量，然后将其输入 AudioSink，后者会在扬声器上播放音频文件。

创建这个网络的 C++ 非常简单：

```
     MarSystem*playbacknet = mng.create("Series", "playbacknet");
     播放网络->addMarSystem(mng.create("SoundFileSource", "src"));
     回放网->addMarSystem(mng.create("Gain", "gt"));
     播放网->addMarSystem(mng.create("AudioSink", "dest"));

     // 设置声音文件名
     播放网->updctrl("SoundFileSource/src/mrs_string/filename",inAudioFileName);

     // 打开音频输出
     播放网->updctrl("AudioSink/dest/mrs_bool/initAudio", true);

     while (playbacknet->getctrl("SoundFileSource/src/mrs_bool/notEmpty")->isTrue()) {
        播放网->滴答（）；
     }

```

前四行创建处理音频的 MarSystem。首先创建包含其他所有内容的 Series 对象，然后将 SoundFileSource、Gain 和 AudioSink 添加到其中。

下一行设置 SoundFileSource 的文件名，您可以在此处为其指定要处理的 .wav、.au、.aiff 或 .mp3 文件的名称。

然后打开 AudioSource，它会通过更新 AudioSource 的“initAudio”控件告诉您的声卡开​​始播放声音。只要 SoundFileSource 有音频数据，while 循环就会循环。

你可以看到这个简单的例子真的很容易做到，但 Marsyas 的真正强大之处在于当你想做更复杂的任务时。例如，要进行 FFT，您只需执行以下操作：

```
     MarSystem* net = mng.create("系列", "net");
     net->addMarSystem(mng.create("SoundFileSource", "src"));
     net->addMarSystem(mng.create("Spectrum", "spectrum"));
     net->addMarSystem(mng.create("PowerSpectrum", "powerspectrum"));

     while (playbacknet->getctrl("SoundFileSource/src/mrs_bool/notEmpty")->isTrue()) {
         cout << net->getctrl("mrs_realvec/processedData")->to<mrs_realvec>() << endl;
     }

```

要估计音频源的基频，您可以执行以下操作：

```
  MarSystem* net = mng.create("系列", "系列");
  net->addMarSystem(mng.create("AudioSource", "src"));
  net->addMarSystem(mng.create("AubioYin", "yin"));

    while (playbacknet->getctrl("SoundFileSource/src/mrs_bool/notEmpty")->isTrue()) {
         cout << net->getctrl("mrs_realvec/processedData")->to<mrs_realvec>() << endl;
     }

```

最后一个将从您的声卡实时读取音频，并在其上运行强大的 YIN 音高检测算法。甜，嗯？

如需更多代码，请查看[Marsyas 网站](http://marsyas.sness.net)，尤其是查看[文档](http://marsyas.sness.net/documentation)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-11-23T19:08:31.847

这里有很多好的建议。此外，我建议查看 Jack Audio Toolkit、JUCE 框架，并学习如何从 Csound 等合成库中移植 C 代码。“音频编程书”也很好。

关于 C vs C++，我想你会发现在音频工作中，C++ 部分通常只是用于代码管理的 chrome。DSP 位都是关于信号的低级程序数学，因此很可能是 C 调用，无论您使用 C 还是 C++，这对于这方面的事情都无关紧要。许多 C++ 音频项目本质上只是音频内容中的 C。

嗯！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-03-08T08:22:36.347

对于音频，C 可能是比 C++ 更好的选择，特别是如果您想做任何 DSP。

*   大多数实用的音频和 DSP 参考书都使用 C 作为代码示例
*   大多数音频/DSP 库都是用 C 编写的（或者至少有一个 C API）
*   与 C 相比，C++ 大大增加了学习曲线，但并没有为音频/DSP 工作带来很多好处（OOP 与低级/实时代码并不特别相关）

当然，学习 C++ 并没有什么“错误”，它不会阻止你理解和使用 C 代码（因为 C++ 主要是 C 的超集）——只是你会用 C 更快地启动和运行，并且如果您决定，您可以稍后继续使用 C++。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-14T00:55:53.617

要回答你的第二个问题，你应该看看这本书：Designing Audio Effect Plug-Ins in C++: With Digital Audio Signal Processing Theory by Will Pirkle。

本书介绍了一些基本的 DSP，并引导您了解如何制作音频插件。您将使用 C++ 编写代码，但这并不难，因为本书建议您下载一个框架 RACKAFX，它处理所有 GUI 事件。您所要做的就是专注于编写公式并将数据存储在正确的渠道中。

祝你好运！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-05T17:30:41.483

别听我的！我可能错了！

我不会编程 C++，但同意 Jalf 对初学者来说很难，有很多事情必须手动完成，其他语言会自动为您完成，例如内存分配，垃圾收集等。他们也是正确的说 C++ 不知道音频，而其他语言从头开始内置了音频功能。然而，一般来说，这些都是相当基本的功能：打开和播放文件，将播放头发送到文件的不同部分，调整平移和音量，也许提取 eq 数据。

但是……我猜你想要更深入一点，真正塑造声音，无论是通过合成还是效果，你想要制作这些东西而不是仅仅添加它们。我鼓励你看看 VST 和 VSTi，但这是 C++ 领域（JUCE 库，很棒很棒很棒），并且努力工作，但如果你想制作自己的产品，那么它可能是方式。否则，正如其他人所建议的那样，CSound、Max、Cycling 和 Processing 可能是有意义的。像 Reaktor 这样的软件允许你用更少（如果有的话）编码将模块化组件拼凑在一起。

去看看一些关于 KVRAudio 的论坛，那里有一些英雄开发了像 Hammerhead 这样的经典免费软件，然后还有其他独立软件，如 Fruity Loops、Rebirth、Tuareg、Audiomulch 等。

我认为学习 VST 和 C++ 是最好的，但这将是一条充满痛苦和痛苦的漫长道路，除非您希望创建一个独立的软件或另一个软件的插件（除了 Csound 等），这将令人失望。

我认为。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-05T17:26:33.660

如果您已经具备一些 DSP 知识，[这些教程](http://martin-finke.de/blog/tags/making_audio_plugins.html)将展示如何将 DSP 代码转换为完成的程序，包括 GUI 控件。它从简单的失真开始，然后继续进行合成等。
基本上，您编写的代码可以构建为独立的 .exe 或作为 Cubase 或 Ableton Live 等主机的 VST 插件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-02T20:07:51.007

如果您已经了解了 DSP 的基础知识，我会推荐[Analog Devices Blackfin 处理器](http://www.analog.com/en/embedded-processing-dsp/blackfin/bf533-hardware/processors/product.html)。您可以同时使用 C 和 C++，它们提供了许多音频示例来帮助您入门。他们提供了足够的代码来将音频读入板子，处理它，然后播放出来。

从此，您可以应用任何类型的过滤器或您希望的其他处理。我曾经将 BF533 Ez-Kit Lite 与串行 LCD 面板结合使用，为一个项目制作了音频均衡器。是一次很棒的学习经历和很多乐趣！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-02T20:25:22.963

我在为自己创建音频应用程序方面没有太多经验 - 但如果我处于你的位置，我会尝试创建 VSTi 的第一个（虚拟工作室技术乐器）。据我所知，Steinberg 已经为此发布了一个 C++ SDK，我认为如果您想进入声音设计应用程序，这将是一个很好的起点

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-03T12:34:38.607

如果您想专注于实际的声音处理（而不是 GUI 应用程序背负的所有杂物），我会查看[CSound](http://www.csounds.com/)。这为您提供了一个基于文本文件的语言，允许您虚拟地从他们所谓的操作码构建几乎任何音频设备，而且您还拥有可以深入研究以查看操作码所代表的实际算法的源代码。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-08-01T20:17:11.223

根据您的需要，也许 R 是一种更简单的语言。我用了一年了，它也做统计分析、图表、地图和声音分析。使用 png、tuneR 和 seewave 库，您需要一行来读取 .wav，另一行获取数据矩阵，另一行将其放入 png 图像或在屏幕上查看。设计用于分析数据和更易于使用对我来说是两个优势。例如，R 数字表和数组从 1 开始，而不是像大多数编程语言那样从 0 开始。它使我们的人脑对已经很复杂的脚本更加适应。我认为你应该看看它：[http ://www.r-project.org/](http://www.r-project.org/)

祝你好运！

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2009-04-02T20:05:21.560

在 Windows 上查找 DirectSound 上的教程。

在 Linux 上有多种库和方法可以访问声卡，其中最简单的就是打开一个文件到设备，然后使用 ioctrl 设置速度等。

如果您提供有关环境的更多信息，我们可能会有更好的建议。

-亚当

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2016-02-03T01:56:05.210

您可以使用某个命令来使用 .wav 文件。

该命令是`PlaySound("C:\\SOUNDS\\example.WAV", NULL, SND_ASYNC);`

# python - 如何通过 TOR 网络路由 urllib 请求？

> ID：711351
> 
> 赞同：13
> 
> 时间：2009-04-02T19:57:48.427
> 
> 标签：python, urllib, tor

如何通过 TOR 网络路由 urllib 请求？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-07-24T01:04:08.437

这对我有用（使用 urllib2，没有尝试过 urllib）：

```
def req(url):
    proxy_support = urllib2.ProxyHandler({"http" : "127.0.0.1:8118"})
    opener = urllib2.build_opener(proxy_support) 
    opener.addheaders = [('User-agent', 'Mozilla/5.0')]
    return opener.open(url).read()

print req('http://google.com') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T20:15:02.877

Tor 作为代理工作，对吧？所以问问自己“我如何在 urllib 中使用代理？”

现在，当*我*查看文档时，我首先看到的是

```
urllib.urlopen(url[, data[, proxies]]) 
```

这对我来说似乎很有启发性......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T05:02:53.837

我设法为洋葱 url 做了一个 urlib.request 我找到了一个基于这篇文章的解决方案：[Python 3.2 : urllib, SSL and TOR through socket : error with fileno function](https://stackoverflow.com/questions/26356411/python-3-2-urllib-ssl-and-tor-through-socket-error-with-fileno-function)

这是修改后的代码：

```
import socks
import socket

# This function has no DNS resolve
# it need to use the real ip adress to connect instead of www.google.com
def create_connection_fixed_dns_leak(address, timeout=None, source_address=None):
    sock = socks.socksocket()
    sock.connect(address)
    return sock

# MUST BE SET BEFORE IMPORTING URLLIB
socks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, "127.0.0.1", 9050)
# patch the socket module
socket.socket = socks.socksocket
socket.create_connection = create_connection_fixed_dns_leak

from urllib import request

if __name__ == "__main__":
    for proxy in request.getproxies():
        print(str(proxy))
    url = 'http://url_of_hidden_service.onion:port'
    req = request.Request(url)
    res = request.urlopen(req)
    print(str(res.read())) 
```

# xna - 使用 XNA、多重采样和高清获取 OOM 错误

> ID：711353
> 
> 赞同：1
> 
> 时间：2009-04-02T19:57:57.663
> 
> 标签：xna

我已经在我的 XNA 游戏上实现了 MultiSampling，它在我的桌面上运行良好。当我在 XBox360 上以高清模式运行游戏时，出现 OOM 异常。如果我不启用 MultiSampling，游戏运行良好，但模型没有抗锯齿并且看起来很糟糕。

以下代码块似乎是罪魁祸首。

```
 void _graphics_PreparingDeviceSettings(object sender, PreparingDeviceSettingsEventArgs e)
    {
        e.GraphicsDeviceInformation.PresentationParameters.MultiSampleType = MultiSampleType.TwoSamples;
    }        

    protected override void Initialize()
    {
        // TODO: Add your initialization logic here
        graphics.PreferMultiSampling = true;
        graphics.PreferredBackBufferHeight = 720;
        graphics.PreferredBackBufferWidth = 1280;
        graphics.PreparingDeviceSettings += _graphics_PreparingDeviceSettings;
        graphics.ApplyChanges();

        base.Initialize();
    } 
```

会导致OOM异常。

我的主要目标是让模型看起来不错（抗锯齿），而 MultiSampling 似乎是正确的方法。我对此很陌生，所以如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T22:27:14.340

我认为，如果您只是将代码从初始化移动到构造函数中并删除对 graphics.ApplyChanges(...) 的调用，您的问题应该会消失。

Venesectrix 发布的文章指出，ApplyChanges(...) 对于 XBOX360 来说是一种禁忌。

因此，您需要在构建设备之前进行所有这些 GraphicsDevice 设置。这是通过在构造函数中设置它来完成的。在这种情况下，无需调用 ApplyChanges()。

在调用 Initalize() 时，设备已经构建完成。调用 ApplyChanges 会导致重置并再次触发事件以准备设备设置。如果我没记错的话，360 并不真正支持关于 XNA 的设备重置，并且会失败。

希望这有帮助，让我知道。

-杰夫·B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:27:04.207

我建议你看看XNA 论坛上的这个[帖子](http://forums.xna.com/forums/t/6959.aspx)，尤其是第一篇文章和从[这里](http://forums.xna.com/forums/p/6959/36951.aspx#36951)开始的帖子。如果没有看到您正在处理的其余代码，我不能确定这是您遇到的问题，因此您必须查看它。正如帖子所示，启用多重采样可能不会直接导致问题。

# asp.net - 如何在 ASP.NET (VB.NET) 的库用户控件中轻松使用设计器中的复杂 HTML“模板”

> ID：711356
> 
> 赞同：0
> 
> 时间：2009-04-02T19:58:21.390
> 
> 标签：asp.net, html, templates, user-controls, web-controls

我有一些从设计师那里得到的 HTML，从女巫那里我在 .ascx Web 用户控件中制作了一个“模板”，如下所示。现在我想把它放进图书馆。

我怎样才能以一种很好的方式做到这一点（没有连接字符串等）

（应该有更多的参数）

```
<div style="clear:both;margin-top:50px;"></div>
<div>
    <div class="title"><a href="http://<%=ArticleURL%>"><%=Title%></a></div>
    <div class="picto"></div>
    <div class="article"><%=Trailer%></div>
    <div style="clear:both;"></div>
    <div>
        <ul class="comments_box">
            <li><img src="site_images/picto_comments.png" alt="" width="14" height="14" border="0"></li>
            <li class="comments"><a href="">22 Comments</a></li>
            <li><img src="site_images/picto_arrow.png" alt="" width="15" height="16" border="0"></li>
            <li class="arrow"><a href="">Share</a></li>
            <li><img src="site_images/picto_photo.png" alt="" width="20" height="20" border="0"></li>
            <li class="login"><a href=""><%=Nickname%></a></li>
            <li class="time">59 min ago</li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T20:33:29.183

您是否研究过 Xml 文字？您可以像这样创建 html 模板：

```
Public Function GetTemplate() As String

Dim template As String = _
  <string>
      <div style='clear:both;margin-top:50px;'></div>
      <div>
          <div class='title'><a href=<%= Me.ArticleURL %>><%= Me.Title %></a></div>
          <div class='picto'></div>
          <div class='article'><%= Me.Trailer %></div>
          <div style='clear:both;'></div>
          <div>
              <ul class='comments_box'>
                  <li><img src='site_images/picto_comments.png' alt='' width='14' height='14' border='0'/></li>
                  <li class='comments'><a href=''>22 Comments</a></li>
                  <li><img src='site_images/picto_arrow.png' alt='' width='15' height='16' border='0'/></li>
                  <li class='arrow'><a href=''>Share</a></li>
                  <li><img src='site_images/picto_photo.png' alt='' width='20' height='20' border='0'/></li>
                  <li class='login'><a href=''><%= Me.Nickname %></a></li>
                  <li class='time'>59 min ago</li>
              </ul>
          </div>
      </div>
  </string>.Value

Return template
End Function 
```

你的“令牌”像 <%= Me.ArticleURL %> 可以是局部变量、属性、函数等......

有关 xml 文字和 linqToXml 的更多信息，请查看以下站点：

[http://www.ookii.org/post/xml_literals_in_visual_basic_9.aspx](http://www.ookii.org/post/xml_literals_in_visual_basic_9.aspx)

[http://blogs.msdn.com/bethmassi/archive/2007/10/16/getting-started-with-linq-to-xml.aspx](http://blogs.msdn.com/bethmassi/archive/2007/10/16/getting-started-with-linq-to-xml.aspx)

**更新：** Xml 文字仅适用于 VB.NET。如果您使用 C#，您总是可以在 vb 中拥有另一个程序集，您可以在其中保留所有 xml 文字。感谢您指出[Keltex](https://stackoverflow.com/users/28260/keltex)

希望这可以帮助，

D.

# c# - 内部类的公共与内部方法

> ID：711361
> 
> 赞同：85
> 
> 时间：2009-04-02T19:59:29.843
> 
> 标签：c#, public-method

```
internal class Foo
{
  public void Fee()
  {
    Debug.WriteLine("Fee");
  }

  internal void Fi()
  {
    Debug.WriteLine("Fi");
  }
} 
```

我认为 Fee() 和 Fi() 同样可以访问，因为整个类已经是内部的。我忽略了什么吗？在这种情况下，是否有任何理由为方法选择 public 或 internal ？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-04-02T20:06:22.493

该`internal class Foo`声明将覆盖该`public void Fee()`方法的可访问性，从而有效地使其内部化。

在这种情况下，在方法上使用 internal 与 public 将具有相同的效果。在这种情况下，我会选择公共方法而不是内部方法的唯一原因是，如果您选择这样做，可以在未来版本中轻松过渡到公共类。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-07-11T19:01:02.863

答案中唯一缺少的是您为什么要这样做？

一些库有很多类并不打算让库的使用者接触，但它们必须继承标记为公共的接口。例如，我有一个类库，该类继承了 IComparer 接口，但它只在内部使用，我不想弄乱我的库的公共方面。如果我将实现的比较函数标记为内部，编译器会抱怨我没有实现接口 IComparer。

那么我如何成功地实现接口，同时防止它在我的图书馆的公共方面被访问？将类标记为内部，但将实现的功能标记为公共。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2009-04-02T22:56:13.973

实际上 - 如果您使用反射，会有很大的不同；特别是，如果您尝试通过反射访问内部方法，即使您本来可以访问，Silverlight 也会感到非常不安。我曾经见过我不得不公开一个方法以使代码在 Silverlight 上工作的情况，即使它在常规 .NET 上工作也是如此。

您可能会发现对常规 .NET 的部分信任是相同的。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-19T11:20:23.127

当您希望内部类实现接口时，这会有所不同。作为某个接口的实现的方法必须是公共的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-02T20:24:33.307

你是对的，Fee 和 Fi 都可以访问。

从 CSharp 语言规范 3.0 的 3.5.2 下：

> 在程序 P 中以类型 T 声明的嵌套成员 M 的可访问域定义如下（注意 M 本身可能是一个类型）：
> 
> • 如果 M 声明的可访问性是公共的，则 M 的可访问域是 T 的可访问域。

因此，即使将 Fee 声明为公开的，它也将与 Foo 一样可访问（即内部）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-02T20:07:01.010

根据[msdn 文档](http://msdn.microsoft.com/es-es/library/7c5ka91b(VS.80).aspx)，您的 Foo 类将无法在您的程序集之外访问，因此将方法标记为内部或公共没有任何区别；使用 Attribute InternalsVisibleTo 甚至没有任何区别

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-12-20T09:37:55.753

如果类是内部的，我只会使用内部方法。如果您改变主意并公开课程，您只需进行文本替换即可。

# php - 提交表单时PHP“内爆”错误

> ID：711363
> 
> 赞同：0
> 
> 时间：2009-04-02T20:00:42.383
> 
> 标签：php, webforms, implode

刚刚注意到如果我不选择复选框并提交，我会收到这些错误：

`Warning: implode() [function.implode]: Invalid arguments passed in /home/content/o/l/t/oltvcb/html/feedback_mtg.php on line 148`

`Warning: Cannot modify header information - headers already sent by (output started at /home/content/o/l/t/oltvcb/html/feedback_mtg.php:148) in /home/content/o/l/t/oltvcb/html/feedback_mtg.php on line 162`

我确实注意到表单数据实际上来自我的电子邮件......

与“选项”字段有关

下面是表单代码：

```
#<?php
// ------------- CONFIGURABLE SECTION ------------------------

// $mailto - set to the email address you want the form
// sent to, eg
//$mailto       = "youremailaddress@example.com" ;

$mailto = 'xxxxx@xxxxxxxxx.com' ;

// $subject - set to the Subject line of the email, eg
//$subject  = "Feedback Form" ;

$subject = "Request For Visitor Guide" ;

// the pages to be displayed, eg
//$formurl      = "http://www.example.com/feedback.html" ;
//$errorurl     = "http://www.example.com/error.html" ;
//$thankyouurl  = "http://www.example.com/thankyou.html" ;

$formurl = "http://www.example.com/requestform_mtg.php" ;
$errorurl = "http://www.example.com/error.php" ;
$thankyouurl = "http://www.example.com/thankyou.php" ;

$email_is_required = 1;
$name_is_required = 1;
$address_is_required = 1;
$contactname_is_required = 1;
$city_is_required = 1;
$zip_is_required = 1;
$phone_is_required = 1;
$uself = 0;
$use_envsender = 0;
$use_webmaster_email_for_from = 1;
$use_utf8 = 1;

// -------------------- END OF CONFIGURABLE SECTION ---------------

$headersep = (!isset( $uself ) || ($uself == 0)) ? "\r\n" : "\n" ;
$content_type = (!isset( $use_utf8 ) || ($use_utf8 == 0)) ? 'Content-Type:
text/plain; charset="iso-8859-1"' : 'Content-Type: text/plain; charset="utf-8"' ;
if (!isset( $use_envsender )) { $use_envsender = 0 ; }
$envsender = "-f$mailto" ;
$name = $_POST['name'] ;
$contactname = $_POST['contactname'] ;
$title = $_POST['title'] ;
$email = $_POST['email'] ;
$address = $_POST['address'] ;
$city = $_POST['city'] ;
$state = $_POST['state'] ;
$zip = $_POST['zip'] ;
$country = $_POST['country'] ;
$fax = $_POST['fax'] ;
$phone = $_POST['phone'] ;
$mtgname = $_POST['mtgname'] ;
$dates = $_POST['dates'] ;
$attendance = $_POST['attendance'] ;
$guestroom = $_POST['guestroom'] ;
$mtgroom = $_POST['mtgroom'] ;
$timeframe = $_POST['timeframe'] ;
$options = $_POST['options'] ;
$comments = $_POST['comments'] ;
$http_referrer = getenv( "HTTP_REFERER" );

if (!isset($_POST['email'])) {
header( "Location: $formurl" );
exit ;
}
if (($email_is_required && (empty($email) || !ereg("@", $email))) ||
($name_is_required && empty($name)) || ($address_is_required && empty($address)) ||
($contactname_is_required && empty($contactname)) || ($city_is_required &&
empty($city)) || ($zip_is_required && empty($zip)) || ($phone_is_required &&
empty($phone))) {
header( "Location: $errorurl" );
exit ;
}
if ( ereg( "[\r\n]", $name ) || ereg( "[\r\n]", $email ) || ereg( "[\r\n]", $address
) || ereg( "[\r\n]", $contactname ) ) {
header( "Location: $errorurl" );
exit ;
}
if (empty($email)) {
$email = $mailto ;
}
$fromemail = (!isset( $use_webmaster_email_for_from ) ||
($use_webmaster_email_for_from == 0)) ? $email : $mailto ;

if (get_magic_quotes_gpc()) {
$comments = stripslashes( $comments );
}

$messageproper =
"This message was sent from:\n" .
"$http_referrer\n" .
"------------------------------------------------------------\n" .
"Organization Name: $name\n" .
"Contact Name: $contactname\n" .    
"Email of sender: $email\n" .
"Address of sender: $address\n" .
"City of sender: $city\n" .
"State of sender: $state\n" .
"Zip Code of sender: $zip\n" .
"Country of sender: $country\n" .           
"Fax of sender: $fax\n" .   
"Phone of sender: $phone\n" .
"Meeting Name: $mtgname\n" .            
"Preferred Dates: $dates\n" .           
"Expected Attendance: $attendance\n" .          
"Guest Rooms: $guestroom\n" .
"Largest Meeting Room Needed: $mtgroom\n" .             
"Decision Timeframe: $timeframe\n" .
"Options:".implode("\n",$options)."\n".                             
"------------------------- COMMENTS -------------------------\n\n" .
$comments .
"\n\n------------------------------------------------------------\n" ;
$headers =
"From: \"$name\" <$fromemail>" . $headersep . "Reply-To: \"$name\" <$email>" .
$headersep . "X-Mailer: chfeedback.php 2.13.0" .
$headersep . 'MIME-Version: 1.0' . $headersep . $content_type ;

if ($use_envsender) {
mail($mailto, $subject, $messageproper, $headers, $envsender );
}
else {
mail($mailto, $subject, $messageproper, $headers );
}
header( "Location: $thankyouurl" );
exit ;

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T20:03:54.760

除了一些非常可怕的代码之外，要修复您的错误，请替换此行：

```
$options = $_POST['options'] ; 
```

有了这个：

```
$options = array();
if(isset($_POST['options'])) {
    $options = $_POST['options'];
} 
```

该错误基本上是每当您不选择选项时`$options`未将其设置为数组，因此当您尝试对其进行`implode`操作时，PHP 会不高兴，因为它需要一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-07T07:21:52.790

```
if (isset($_POST['options'])
{
    implode(...)
} 
```

我选择这个....这个将所有内容封装在一个函数中。

# c# - C# 中的 MVC：模型 - 控制器关系

> ID：711366
> 
> 赞同：0
> 
> 时间：2009-04-02T20:02:14.967
> 
> 标签：c#, model-view-controller, design-patterns

通常我有一个控制器和一个模型。是否有一个具有多个控制器和多个模型的视图的 disgn 模式。非常控制器也可以有多个模型？

一些相关模式的链接会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:16:41.597

通常一个控制器只有一个模型。但是，您*可以*创建一个本身具有多个模型的复合模型。

```
class CompositeModel
{
 private ModelA modela;
 private ModelB modelb;
} 
```

然后让你的控制器输入那个。

但是，如果你不知道自己最终在做什么，那么这个计划只会以泪水告终。

但如果你能设法避开上帝模型模式，它会非常强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:13:45.893

我建议更一般地学习 MVC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T13:17:36.803

自 MVC 以来还开发了其他方法，即 Model View Presenters。[在 Martin Fowler](http://www.martinfowler.com/eaaDev/)的网站上，对这些模式进行了很好的概述。

我自己的应用程序使用被动视图，因为它允许我们撕掉一个 UI 并轻松替换另一个。这对我们来说是一个优势，因为我们的软件是一个 CAD/CAM 应用程序，旨在与各种金属切割机一起使用。

我们的表单是称为 UI 层的薄壳。表单实现了一个接口并将其自身注册到 UI 层。我们有多种形式用于不同的目的。例如，用户修改他使用的机器的广泛设置参数的设置表格、形状输入表格、用户定位要切割的形状的金属切割表格。所有这些表单都有一个独特的 UI。

不同类型的机器之间的金属切削形式也不同。人们可能会展示一块金属平板的所见即所得视图。另一种是按其切割顺序切割零件的电子表格样式网格。另一个还显示了定位在旋转管道上的零件。

UI 层依次接受传入的输入并执行命令。这些命令依次与 UI 层和模型交互。几乎所有事情都是通过命令对象处理的，而不是通过方法直接调用。

这种结构允许将各种 UI 连接到同一个模型。在特定的 UI 中，可以支持各种视图。我标记为模型的可能是单独的库。它们只能通过引用不同库的 UI 组件在 UI 接口层及以上进行组合。

层次结构看起来像这样。

*   表单实现表单接口
*   UI 实现 UI 通过表单接口与表单进行推断和交互
*   命令通过 UI 接口与模式和 UI 交互。
*   用户界面界面
*   模型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T20:35:29.943

只有当您有一个模型层次结构（继承），其中视图显示各种子模型的公共属性时，这才真正有意义。从概念上讲，这可以工作，但作为一个实际问题，我不认为这种情况经常发生。在我的代码中，我唯一使用这种方法的地方是使用 Contact 字段。我有一个用户模型，它有一个自我联系和一个紧急联系。两个联系人属于同一类型，区别在于关系是“自我”还是其他。我有一个用于创建这些联系人的视图，该视图由同一控制器上的 2 个不同操作呈现——CreateContactInformation 和 CreateEmergencyContact。但是，即使在这种情况下，两者都使用相同的模型——Contact。我本可以选择对模型进行子类化，但没有

在一般情况下，我会说一个视图由一个控制器使用，每个控制器处理一个主模型。主控制器的辅助模型可以由主控制器处理，也可以有自己的模型，具体取决于您希望如何构建应用程序。

# jsp - 如何在 JSP 中使用 JSTL 显示一组 3 个元素？

> ID：711369
> 
> 赞同：2
> 
> 时间：2009-04-02T20:03:07.807
> 
> 标签：jsp, jstl

我有一个包含 n 个元素的列表，我想在一组 3 中输出。集合的大小可以变化很大，但输出必须分组为 3。

```
<ul>
   <li>
      <div>element 1</div>
      <div>element 2</div>
      <div>element 3</div>
   </li>

   <li>
      <div>element 4</div>
      <div>element 5</div>
      <div>element 6</div>
   </li>

   <li>
      <div>element 7</div>
      <div>element 8</div>
   </li>
 </ul> 
```

我想使用 forEach 和 if 语句，但我无法正确生成输出。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:58:10.637

我不确定语法，但这应该会有所帮助，使用“varStatus”的“count”属性来了解您所在的元素编号......

编辑：显然“.count”不是零索引，所以正确的代码是：

```
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

...
<c:set var="myListSize" value="${fn:length(myList)}"/>

        <c:forEach var="element" items="${myList}" varStatus="stat">

            <c:choose>

                <c:when test="${ stat.count == 1 }">
                   <ul>
                   <li>
                      <div>${element}</div>
                </c:when>

                <c:when test="${ stat.count == myListSize }">
                      <div>${element}</div>
                   </li>
                   </ul>
                </c:when>

                <c:when test="${stat.count % 3 == 0 && stat.count < myListSize }">
                      <div>${element}</div>
                   </li>
                   <br/>
                   <li>
                </c:when>

                <c:otherwise>
                      <div>${element}</div>
                </c:otherwise>

            </c:choose>

        </c:forEach> 
```

它仍然可以改进，但现在它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:34:55.233

这可能不是最佳的，但是只在 Java scriptlet 中执行一次，创建 3 组，将它们添加到 bean，然后使用 2 个嵌套的 foreach 循环遍历这些怎么样。

# java - 使用命令行参数启动 .jar 文件（但没有控制台窗口）

> ID：711370
> 
> 赞同：7
> 
> 时间：2009-04-02T20:03:19.973
> 
> 标签：java, batch-file

我要做一个应用的demo，应用有server.jar和client.jar。两者都有命令行参数并且是可执行的。我需要启动两个 server.jar 实例和两个 client.jar 实例。

我认为使用批处理文件是可行的方法，但是，批处理文件执行第一个命令（即>server.bat [argument1] [argument2]）并且不做任何其他事情，除非我关闭第一个实例，其中如果它然后运行第二个命令。而且我不想打开一个空白的控制台窗口（或最小化）

我真正需要的是一个批处理脚本，它可以在没有任何控制台窗口的情况下启动这些应用程序并启动我需要的所有实例。

提前致谢！

编辑：

**爪哇**：

> 如果我单独在控制台窗口中键入命令，则可以工作。如果我将相同的内容放在批处理文件中，它将像以前一样。控制台窗口打开，一个实例启动（以第一个实例为准），除非我关闭应用程序，否则它不会继续运行，在这种情况下它会运行第二个命令。我希望它静默运行所有命令

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-03T16:29:12.773

找到了解决方案，下面是我的批处理文件的内容

```
@echo off

start /B server.jar [arg1] [arg2]  
start /B server.jar [arg3] [arg4]

start /B client.jar [arg5]
start /B client.jar [arg6]

@echo on 
```

这将打开，运行所有命令并关闭窗口，不等待命令完成。

我仍然不确定如何防止窗户完全打开。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T20:07:44.800

尝试：

```
javaw <args> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-03-08T12:01:12.153

好吧，经过反复推敲，这是我的解决方案

```
@echo off
start /B javaw -jar -Xms16m -Xmx512m client.jar
@echo on 
```

我希望它对某人有用。

# python - 使用 BeautifulSoup 更改元素值返回空元素

> ID：711376
> 
> 赞同：3
> 
> 时间：2009-04-02T20:04:38.863
> 
> 标签：python, xml, parsing, beautifulsoup

```
from BeautifulSoup import BeautifulStoneSoup

xml_data = """
<doc>
  <test>test</test>
  <foo:bar>Hello world!</foo:bar>
</doc>
"""

soup = BeautifulStoneSoup(xml_data)
print soup.prettify()
make = soup.find('foo:bar')
print make
# prints <foo:bar>Hello world!</foo:bar>

make.contents = ['Top of the world Ma!']
print make
# prints <foo:bar></foo:bar> 
```

如何更改元素的内容，在这种情况下是变量“make”中的元素，而不会丢失内容？如果您能指出其他可以修改现有 xml 文档的纯 python 模块，请告诉我。

PS！BeautifulSoup 非常适合 HTML 和 XML 的屏幕抓取和解析！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-02T20:09:42.330

查看[上的文档`replaceWith`](http://www.crummy.com/software/BeautifulSoup/documentation.html#Replacing%20one%20Element%20with%20Another)。这有效：

```
make.contents[0].replaceWith('Top of the world Ma!') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-30T09:21:05.343

使用 BeautifulSoup 版本 4 ( `bs4`)，您可以通过直接[更新`string`属性](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#modifying-string)来实现相同的目的：

```
from bs4 import BeautifulSoup

xml_data = """
<doc>
  <test>test</test>
  <foo:bar>Hello world!</foo:bar>
  <parent>Hello <child>world!</child></parent>
</doc>
"""

soup = BeautifulSoup(xml_data)
make = soup.find('foo:bar')

make.string = 'Top of the world Ma!'
print make
# prints <foo:bar>Top of the world Ma!</foo:bar> 
```

这种方法适用于元素包含其他元素的情况，并且您希望将整个内容替换为新内容：

```
parent = soup.find('parent')
parent.string = 'Top of the world Ma!'

print parent
# prints <parent>Top of the world Ma!</parent> 
```

[我刚才碰到了这个相当老的问题，提供的解决方案不太适合我。进一步的研究使我采用了上述方法，我认为在这里分享我最终使用的内容可能很有用。]

# java - 哪个 Java 框架最适合 Google Web Toolkit？

> ID：711378
> 
> 赞同：5
> 
> 时间：2009-04-02T20:04:50.203
> 
> 标签：java, gwt, servlets

GWT 是我转向 Java 进行 Web 开发的主要原因。哪个 Java 框架最适合它，同时还能最大限度地重复使用表单验证、数据库访问、分页等日常任务的代码？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T22:12:16.340

Spring 显然是您应该使用的。GWT 有它自己的 RPC 控制器框架，所以我想不出你需要一个 Web 应用程序框架（如 JSF）来做什么。

JPA 在多个方面都是一个合理的选择，但它也存在问题。

一方面，将 JPA 对象发送到客户端可能是一个问题。GWT（至少高达 1.5）强制执行非常严格的目录结构，因此您必须将实体放在 GWT 源代码树下。除此之外，将 JPA 实体序列化（通常为 JSON）与客户端之间存在潜在问题。

JPA 实体是相当严格的对象，它们几乎一对一地映射到您的表。然而，这往往不是您在表示层中使用数据的方式。Direct SQL 将允许您选择您想要和不想要的数据，专门为该页面量身定制。因此，JPA 实体通常会有很多您不感兴趣且不应序列化的字段（尤其是一对多关系的集合）。

现在 SQL 的这一方面——根据页面定制它——经常被引用为实体的一个优点：你的代码最终不会被一次性的值对象弄得乱七八糟。问题是，在 gWT+JPA 中您仍然会得到相同的结果，但不是在持久层或业务层中，而是在表示层中得到它们。现在你可以称之为优势。我称它为六合一，六合一。

实际上，我认为 Ibatis 比 JPA 更适合 GWT 应用程序模型，因为您使用的是直接 SQL、为您的目的量身定制的对象，并且这些对象可以从数据库一直使用到客户端。现在这个概念可能会吓坏 Java 领域中很常见的分层狂热者，但请记住，分层是达到目的的一种手段，而不是目的本身。如果对您有帮助，请使用它。如果没有就不要。

但是 Spring 在这个堆栈中是绝对必须的。

我还会向您[介绍为什么 Google Web Toolkit 没有更受欢迎？](https://stackoverflow.com/questions/523728/why-isnt-google-web-toolkit-more-popular/523759#523759)和[使用 ORM 或普通 SQL？](https://stackoverflow.com/questions/494816/using-an-orm-or-plain-sql/494853#494853).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-24T07:10:52.973

如果您正在开发更多类似网站的应用程序，而不是基于页面的网站，我建议您查看开源框架[Vaadin](http://www.vaadin.com)。这是一个服务器驱动的框架，它在客户端使用 GWT 来呈现前端，但也会在服务器端自动处理和保留敏感的业务逻辑。这增加了一些安全性，您不必担心客户端<->服务器流量（如果您不想这样做），但可以专注于以您喜欢的任何方式实现服务器端逻辑。最大的优点是您*真的*不需要编写任何其他 Java 代码。在框架中实现自己的新 GWT 组件也相当容易。

免责声明：是的，我在 IT Mill 工作，开发 Vaadin，但是看看还没有伤害到任何人，不是吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-24T13:12:58.187

现在我在使用 GWT+Struts+Spring+Hibernate
最好使用 json 数据交换而不是使用 GWT webservice。
为此，我们可以将逻辑和表示分开。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T20:08:57.120

我假设您不是指 Web 框架，因为 GWT 本身就是一个框架。我会使用 JSF 来处理应用程序/业务逻辑方面。它使存储和范围 bean 以及访问数据库变得容易。对于阅读数据库，您喜欢任何 JPA 风格。我对 Eclipselink 有很好的体验，但现在它们都实现了相同的接口。此外，您可能希望查看 EJB，以便将所有内容组合在一起并注入您需要的 JPA。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-24T13:01:46.637

哦，这些反应伤害了我的眼睛。如果您是受虐狂，则为 JSF；如果您的临床精神错乱，则为 Spring；）

如果您使用内置的 GWT RPC，那么您不需要 Web 框架，您只需使用 RPC 机制与您的服务器对话。对于后端数据库和业务逻辑，您只需使用标准 JPA 会话 Bean 和 POJO。这是一个非常轻巧、易于使用和支持的堆栈，没有任何麻烦。如果你打算在 GWT 之外做表格，那么请确保你帮自己一个忙，并检查 Stripes。

在 ASCII 图形中：

数据库

* * *

JPA 会话 Bean 和 POJO

* * *

用于处理 GWT 和 EJB 层之间的路由的 Web 层

* * *

GWT 在浏览器中作为 javascript 运行，利用您在 EJB 层中定义的所有 POJO

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-24T13:39:26.467

我主要将 GWT 用于内部系统，但发现我需要的只是一个组织良好的代码库、PAC 模式和 Hibernate。做我需要的非常好。

我开始尝试使用 dozer 等工具在客户端-服务器之间序列化 bean，但很快发现它没有必要。如果您需要 foo 上的条形集合，请下拉列表，即 getBars(foo)。您需要保存 foo - RPC 到 save()。保持简单，拉下你需要的东西，发布你需要的东西，仅此而已。维护客户端上的状态，这一切都很好地挂在一起。

对我来说最重要的是让我明白 GWT 不是关于构建 Web 应用程序的事实。这是关于在网络上构建应用程序。很不一样的东西。

古夫特

编辑：忘了说，我确实有一个与 DAO 对象服务器端交互的逻辑层 - 但它们非常简单，只是用 new 实例化！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-05-24T10:19:51.083

如果您想要乐趣，为什么不使用带有 GWT 的 playframework.org 呢？这可以让您快速上手，并在服务器端拥有您需要的一切（例如通过休眠的 jpa）:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-03T14:01:46.750

在我看来，最好的堆栈是前端的 GWT/GIN/Guice，然后是 Guice 用于您的后端注入 JPA + 一些数据库提供程序。

春天很重，做的比你可能需要的要多得多。Guice 非常轻量级，专为依赖注入而构建。Gin 基本上很像 Guice，只是在 GWT/Javascript 上下文中。

我还认为从概念的角度来看，拥有一个轻量级堆栈是很有价值的，尤其是当您处于使用新技术的早期阶段时。Spring 将带来 90% 的自一开始就制作的罐子，这使得在概念上更难掌握什么在做什么。上面的堆栈将引入 Gin/Guice/GWT 片段、JPA 和任何提供程序（Hibernate、Toplink 等）、核心 java web 东西（servlet api 库的服务器运行时），就是这样，所以查看你的 jars更容易理解你拥有什么以及为什么。我认为春天会带来超过 15 个罐子，对我来说，这总是让我更难了解正在发生的事情和原因。我不讨厌春天，实际上，spring mvc 是我最喜欢的，春天非常大，如果你 刚刚开始会有足够多的新东西让你适应。在我看来，您不需要添加比所需框架更大的复杂性来混淆水域，这只会增加学习曲线。

# iphone - 在基于选项卡的应用程序中链接到 IBOutlet 时，Iphone-SDK“无法读取符号错误”

> ID：711388
> 
> 赞同：1
> 
> 时间：2009-04-02T20:07:20.743
> 
> 标签：iphone

我构建了一个非常简单的基于选项卡的应用程序，其中包含 2 个选项卡，每个选项卡都绑定到自己的视图控制器。

直到目前为止。然后我像这样在我的第二个视图控制器上创建一个简单的 IBOutlet

```
#import <UIKit/UIKit.h>

@interface bViewController : UIViewController {
    IBOutlet UITextField *aField;
}
@property (nonatomic, retain) UITextField *aField;
@end 
```

然后我在我的 .m 文件中合成它，然后我进入我的 xib，将一个文本字段拖到视图上，然后将文件所有者设置为“aField”。

到目前为止非常教科书。

它可以构建，但是当我运行它并选择第二个选项卡（显示我链接 UITextfield IBOutlet 的视图）时，它会引发此错误。

```
warning: Unable to read symbols for "/System/Library/Frameworks/UIKit.framework/UIKit" (file not found).
warning: Unable to read symbols from "UIKit" (not yet mapped into memory).
warning: Unable to read symbols for "/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics" (file not found).
warning: Unable to read symbols from "CoreGraphics" (not yet mapped into memory). 
```

这很奇怪，因为这只是最近才开始发生的。有什么线索吗？

**更新：**

我开始怀疑是配置错误而不是语法错误，因为这些是我为演示问题而创建的精简示例。仅当我创建基于选项卡的应用程序时才会失败。

如果我在基于视图的应用程序中做同样的事情，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T16:38:17.307

好的，经典的 n00b 错误。显然该错误与链接到 IBOutlet 无关。问题源于这样一个事实，即在使用基于选项卡的应用程序时，您必须在视图 XIB 和选项卡条本身上设置 viewController 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:17:45.087

插座好用吗？确保你有你的二进制链接到 UIKit 和 CoreGraphics 框架。是否仅在添加第二个插座时出现此错误？如果您使用版本控制，您能否返回并查明问题开始的时间？

我确实注意到一件事，我不确定这是否能解决您的问题，但您通常会将`IBOutlet`标记放在属性上，如下所示：

```
@property (nonatomic, retain) IBOutlet UITextField *aField; 
```

NIB 加载系统可能会在尝试将值分配给实例变量和属性之间感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T20:22:00.803

这是一个长镜头，但也许您以某种方式将 SDK 切换为 Mac OS X SDK 而不是 iPhone SDK。如果您在 Xcode 中获取项目信息，我相信该设置可用——确保基础 SDK 是 iPhone SDK。

# asp.net - ASP.net AJAX Control Toolkit 将无法识别我在自动完成扩展器中指定的 css 类？

> ID：711390
> 
> 赞同：1
> 
> 时间：2009-04-02T20:07:40.727
> 
> 标签：asp.net, ajax, asp.net-ajax, ajaxcontroltoolkit, autocompleteextender

我正在尝试为[自动完成](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/AutoComplete/AutoComplete.aspx)控件指定 CSS 类：

```
CompletionListCssClass="completionListElement"
CompletionListItemCssClass="listItem"
CompletionListHighlightedItemCssClass="highlightedListItem" 
```

当我尝试这个时，它返回这个错误：

> 解析器错误消息：类型“AjaxControlToolkit.AutoCompleteExtender”没有名为“CompletionListCssClass”的公共属性。

这些属性直接来自 ACT 网站。为什么它不认识他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:32:37.877

你确定你有最新版本的 ajax 控制工具包吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:50:07.367

我最近遇到了这个问题。听起来您可能没有使用最新版本的 ToolKit。尝试升级到最新版本 - 我敢打赌这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-01T06:06:15.290

您正在使用`AJAXControlToolkit`没有 CSS 功能的旧版本

[从codeplex Ajax 文章](http://csharpdotnetfreak.blogspot.com/search/label/AJAX?max-results=5)中获取最新的 Toolkit

# sql-server - 您如何找到上次访问数据库的时间？

> ID：711394
> 
> 赞同：29
> 
> 时间：2009-04-02T20:08:10.320
> 
> 标签：sql-server, sql-server-2005

在 SQL Server 2005 中，您能否轻松确定上次有人查询数据库的时间。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2010-11-25T15:54:11.910

```
SELECT
last_user_seek = MAX(last_user_seek),
last_user_scan = MAX(last_user_scan),
last_user_lookup = MAX(last_user_lookup),
last_user_update = MAX(last_user_update)
FROM
sys.dm_db_index_usage_stats
WHERE
[database_id] = DB_ID() 
```

使用此方法的一个警告是，当您重新启动 SQL Server 时，DMV 中的信息将被清除并清空。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-01-26T00:13:37.777

扩展詹姆斯艾伦的答案：

```
SELECT d.name,
last_user_seek = MAX(last_user_seek),
last_user_scan = MAX(last_user_scan),
last_user_lookup = MAX(last_user_lookup),
last_user_update = MAX(last_user_update)
FROM sys.dm_db_index_usage_stats AS i
JOIN sys.databases AS d ON i.database_id=d.database_id
GROUP BY d.name 
```

如果您不希望每个数据库上下文的结果并希望在结果集的开头包含数据库名称，请使用此修改后的版本。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-09T14:21:49.767

在[MySQLtips](http://www.mssqltips.com/sqlservertip/3171/identify-sql-server-databases-that-are-no-longer-in-use/)找到了这个- 为我工作。

```
select d.name, x1 =
(select X1= max(bb.xx) 
from (
    select xx = max(last_user_seek) 
        where max(last_user_seek) is not null 
    union all 
    select xx = max(last_user_scan) 
        where max(last_user_scan) is not null 
    union all 
    select xx = max(last_user_lookup) 
        where max(last_user_lookup) is not null 
    union all 
        select xx = max(last_user_update) 
        where max(last_user_update) is not null) bb) 
FROM master.dbo.sysdatabases d 
left outer join 
sys.dm_db_index_usage_stats s 
on d.dbid= s.database_id 
group by d.name 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-03-20T12:18:13.183

刚刚看到这篇文章，正如今天被问到的这个问题......好吧，被问到哪些数据库没有在一个实例中使用很多。因此，我将上述查询从 Andrey Shvidky 更改为写入临时表，然后选择结果，将找到的任何内容与最后使用的最大日期进行比较，与 sys.databases 中的任何剩余数据库......理论是， （和假设），这些都具有 NULL 最后使用日期，因此不会显示在主查询的结果中，因此是进一步调查删除的候选者。

```
SELECT UNPVT.[DataBase], 
       MaxLastUse = MAX(UNPVT.MaxLastUse)
    INTO #tempdatabases
   FROM
    (
       SELECT [DataBase], 
           last_user_seek, 
           last_user_scan, 
           last_user_lookup, 
           last_user_update
      FROM
    (
        SELECT [DataBase] = DB.[name], 
               last_user_seek = MAX(IU.last_user_seek), 
               last_user_scan = MAX(IU.last_user_scan), 
               last_user_lookup = MAX(IU.last_user_lookup), 
               last_user_update = MAX(IU.last_user_update)
        FROM sys.databases AS DB
             INNER JOIN sys.dm_db_index_usage_stats AS IU ON IU.database_id = DB.database_id
        GROUP BY DB.[name]
    ) AS DBIU
) AS P UNPIVOT(MaxLastUse FOR ColumnName IN(last_user_seek, 
                                            last_user_scan, 
                                            last_user_lookup, 
                                            last_user_update)) AS UNPVT
GROUP BY UNPVT.[DataBase]
HAVING MAX(UNPVT.MaxLastUse) IS NOT NULL
ORDER BY MAX(UNPVT.MaxLastUse) ASC;
SELECT name, 
       create_date AS 'Created on', 
       'Not used since last instance start', 
(
    SELECT create_date
    FROM sys.databases
    WHERE database_id = 2
) AS 'Instance start date'
FROM sys.databases
WHERE database_id NOT IN(1, 2, 3, 4)
AND name NOT IN
(
    SELECT [DataBase]
    FROM #tempdatabases
);
DROP TABLE #tempdatabases; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T23:01:45.177

您需要提前设置审计或 sql server 跟踪。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-21T14:11:04.587

与上述方法类似，但只是将结果作为特定数据库 id 的单个值（在本例中为`6`）

```
select max(LastAccess)
from (
    SELECT last_user_seek as LastAccess FROM sys.dm_db_index_usage_stats WHERE last_user_seek is not null and [database_id]=6
    union
    SELECT last_user_lookup as LastAccess FROM sys.dm_db_index_usage_stats WHERE last_user_seek is not null and [database_id]=6
    union
    SELECT last_user_seek as LastAccess FROM sys.dm_db_index_usage_stats WHERE last_user_seek is not null and [database_id]=6
    union
    SELECT last_user_update as LastAccess FROM sys.dm_db_index_usage_stats WHERE last_user_seek is not null and [database_id]=6
) UserAccess 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-03T07:10:46.437

SQL Server 可以记录登录尝试的事件信息，您可以通过查看错误日志来查看它。通过打开 SQL Server 的审核级别。

按照以下步骤启用对 SQL Server 中企业管理器的所有/成功连接的审核：

展开服务器组。右键单击服务器，然后单击“属性”。在安全选项卡上的审核级别下，单击全部/成功等（必填选项）。

您必须停止并重新启动服务器才能使此设置生效

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T20:14:21.133

不容易，但是如果您打开 SQL Server 的日志记录功能，您可以使用软件检查日志以发现上次查询的时间和内容。

-亚当

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-28T18:37:32.123

与上面相同的 unpivot

```
 select
    UNPVT.[DataBase]
    ,MaxLastUse     = max(UNPVT.MaxLastUse)
from
   (
    select
        [DataBase], last_user_seek, last_user_scan, last_user_lookup, last_user_update
    from
        (
            select
                [DataBase]          = DB.[name]
                ,last_user_seek     = max(IU.last_user_seek)
                ,last_user_scan     = max(IU.last_user_scan)
                ,last_user_lookup   = max(IU.last_user_lookup)
                ,last_user_update   = max(IU.last_user_update)
            from
                sys.databases as DB
                inner join sys.dm_db_index_usage_stats as IU on
                    IU.database_id = DB.database_id
            group by
                DB.[name]
        ) as DBIU
    ) as P unpivot (MaxLastUse for ColumnName in (last_user_seek, last_user_scan, last_user_lookup, last_user_update)) as UNPVT
group by
    UNPVT.[DataBase]
order by
    UNPVT.[DataBase] 
```

# sql - CLOB/TEXT 会影响性能吗？

> ID：711397
> 
> 赞同：2
> 
> 时间：2009-04-02T20:08:28.587
> 
> 标签：sql, database, performance

我们有一个在整个模式中大量使用 CLOB/TEXT 数据类型的数据库。昨天在多个具有 CLOB 类型的表上运行大量查询后，我得出的结论是，只要 SELECT 子句中有 CLOB（即使该值为 NULL/空），查询的性能也会受到巨大影响。

我们有一个部署在客户站点的客户端-服务器应用程序（不是基于 Web 的）应用程序。此外，我们在后端支持多个数据库，因此我们无法在代码中进行特定于数据库的优化。

远离 CLOB 并不是一个真正的选择。

我知道需要对 CLOB/TEXT 数据类型进行的大部分优化都在数据库服务器上。为此，我应该向客户传递什么样的建议？

作为代码中的开发人员，我可以做些什么来帮助加快查询速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:28:36.027

性能问题的程度将是特定于数据库的。但是，一般来说，您希望大多数实现将 CLOB 数据存储在磁盘上与固定宽度字段不同的物理位置。

出于这个原因，应谨慎使用 CLOB，仅在必要时使用。如果您必须使用其中一个，请确保您不需要同时带回很多。当您一次只需要检索一个时，它们是最好的，例如当您在客户端中查看完整记录时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:29:55.697

正确的答案需要更多信息。特别是，您能否发布“慢”查询的示例以及它们访问的表的结构？

也就是说，通常 CLOB 不会自动导致性能问题。

对它们使用条件的查询*会*很慢，因为 CLOB 通常不能被索引。如果要传输的数据总量变大，检索它们会产生影响。但除了这些点之外，CLOB 不应显着影响性能（即，在表中只包含一个 CLOB 不会造成伤害）。

这些只是一般性观察。详细信息当然取决于您使用的 DBMS 及其配置。

# actionscript-3 - 动作脚本函数可以找出自己的名称吗？

> ID：711404
> 
> 赞同：12
> 
> 时间：2009-04-02T20:09:22.893
> 
> 标签：actionscript-3, actionscript, actionscript-2

给出以下

```
function A(b:Function)   { } 
```

如果是函数 A()，我们能否确定作为参数 'b' 传入的函数的名称？AS2 和 AS3 的答案是否不同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-03T14:14:04.720

我使用以下内容：

```
private function getFunctionName(e:Error):String {
    var stackTrace:String = e.getStackTrace();     // entire stack trace
    var startIndex:int = stackTrace.indexOf("at ");// start of first line
    var endIndex:int = stackTrace.indexOf("()");   // end of function name
    return stackTrace.substring(startIndex + 3, endIndex);
} 
```

用法：

```
private function on_applicationComplete(event:FlexEvent):void {
    trace(getFunctionName(new Error());
} 
```

输出：FlexAppName/on_applicationComplete()

有关该技术的更多信息，请访问 Alex 的网站：

[http://blogs.adobe.com/aharui/2007/10/debugging_tricks.html](http://blogs.adobe.com/aharui/2007/10/debugging_tricks.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-07-20T16:04:22.380

我一直在尝试建议的解决方案，但在某些时候我遇到了所有问题。主要是因为对固定*或*动态成员的限制。我做了一些工作并将这两种方法结合起来。请注意，它仅适用于公开可见的成员 - 在所有其他情况下返回 null。

```
 /**
     * Returns the name of a function. The function must be <b>publicly</b> visible,
     * otherwise nothing will be found and <code>null</code> returned.</br>Namespaces like
     * <code>internal</code>, <code>protected</code>, <code>private</code>, etc. cannot
     * be accessed by this method.
     * 
     * @param f The function you want to get the name of.
     * 
     * @return  The name of the function or <code>null</code> if no match was found.</br>
     *          In that case it is likely that the function is declared 
     *          in the <code>private</code> namespace.
     **/
    public static function getFunctionName(f:Function):String
    {
        // get the object that contains the function (this of f)
        var t:Object = getSavedThis(f); 

        // get all methods contained
        var methods:XMLList = describeType(t)..method.@name;

        for each (var m:String in methods)
        {
            // return the method name if the thisObject of f (t) 
            // has a property by that name 
            // that is not null (null = doesn't exist) and 
            // is strictly equal to the function we search the name of
            if (t.hasOwnProperty(m) && t[m] != null && t[m] === f) return m;            
        }
        // if we arrive here, we haven't found anything... 
        // maybe the function is declared in the private namespace?
        return null;                                        
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-07-12T23:51:09.780

Heres a simple implementation

```
 public function testFunction():void {
        trace("this function name is " + FunctionUtils.getName()); //will output testFunction
    } 
```

And in a file called FunctionUtils I put this...

```
 /** Gets the name of the function which is calling */
    public static function getName():String {
        var error:Error = new Error();
        var stackTrace:String = error.getStackTrace();     // entire stack trace
        var startIndex:int = stackTrace.indexOf("at ", stackTrace.indexOf("at ") + 1); //start of second line
        var endIndex:int = stackTrace.indexOf("()", startIndex);   // end of function name

        var lastLine:String = stackTrace.substring(startIndex + 3, endIndex);
        var functionSeperatorIndex:int = lastLine.indexOf('/');

        var functionName:String = lastLine.substring(functionSeperatorIndex + 1, lastLine.length);

        return functionName;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T22:10:49.700

名字？不，你不能。但是，您可以做的是测试参考。像这样的东西：

```
function foo()
{
}

function bar()
{
}

function a(b : Function)
{
   if( b == foo )
   {
       // b is the foo function.
   }
   else
   if( b == bar )
   {
       // b is the bar function.
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T11:09:53.170

我不知道它是否有帮助，但可以获得对函数调用者的引用[（](http://livedocs.adobe.com/flex/2/langref/arguments.html)据我所知，仅在 ActionScript 3 中）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-03T01:09:54.683

您是否只是在寻找参考，以便之后可以再次调用该函数？如果是这样，请尝试将函数设置为变量作为参考。var lastFunction:函数；

```
var func:Function = function test():void
{
    trace('func has ran');
}

function A(pFunc):void
{
    pFunc();
    lastFunction = pFunc;
}
A(func); 
```

现在，如果您需要引用最后运行的函数，只需调用 lastFunction 即可。

我不确定您到底要做什么，但这也许会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-11T19:51:32.013

使用 arguments.callee`toString()`和`match`一般：

```
function foo(){return arguments.callee.toString().match(/\s\w+/).toString()} 
```

**参考**

*   [参数被调用者方法](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/arguments.html)

*   [跟踪函数参数](http://blogs.adobe.com/formfeed/2009/05/tracing_function_arguments.html)

# c# - 调用任何跨线程代码的最佳方式？

> ID：711408
> 
> 赞同：37
> 
> 时间：2009-04-02T20:10:26.650
> 
> 标签：c#, .net, invoke

我知道以前有人问过这个问题，但我正在寻找一种方法：

1.  简化安全跨线程代码的创建。
2.  在任何情况下重用此代码（无 Windows 窗体引用）。

这是我到目前为止所拥有的，但我想删除 Windows 窗体引用。有任何想法吗？

```
public delegate void SafeInvokeDelegate(System.Action action);
public class SafeInvoke
{
    private readonly System.Windows.Forms.Control _threadControl;

    public SafeInvoke()
    {
        _threadControl = new System.Windows.Forms.Control();
    }

    public void Invoke(System.Action action)
    {
        if (_threadControl.InvokeRequired)
            _threadControl.Invoke(new SafeInvokeDelegate(Invoke), new object[] {action});
        else if (action != null) action();
    }
} 
```

上面的类可以这样使用：

```
SafeInvoke _safeInvoker = new SafeInvoke();
void SafeClearItems()
{
    _safeInvoker.Invoke(delegate
        {
            listView1.Items.Clear();
        });
} 
```

如何删除 SafeInvoke 类中的 System.Windows.Forms.Control 但保留相同的功能？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-04-02T20:13:36.017

您还可以使用扩展方法和 lambdas 来使您的代码更加简洁。

```
using System.ComponentModel;
public static class ISynchronizeInvokeExtensions
{
  public static void InvokeEx<T>(this T @this, Action<T> action) where T : ISynchronizeInvoke
  {
    if (@this.InvokeRequired)
    {
      @this.Invoke(action, new object[] { @this });
    }
    else
    {
      action(@this);
    }
  }
} 
```

所以现在您可以`InvokeEx`在任何 ISynchronizeInvoke 上使用，并且能够访问实现类的属性和字段。

```
this.InvokeEx(f => f.listView1.Items.Clear()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-02T20:12:58.843

使用[`ISynchronizeInvoke`](http://msdn.microsoft.com/en-us/library/system.componentmodel.isynchronizeinvoke.aspx)而不是`Control`. 那是用`Control`实现的接口`Invoke/BeginInvoke/EndInvoke/InvokeRequired`。

另一种方法是使用[`SynchronizationContext.Current`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)- 我相信这就是`BackgroundWorker`使用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-08T09:00:49.527

现在很容易调用。
例如，假设我们要调用 Label(lblVal) 来获取 txtVal 的值

```
lblVal.Invoke((MethodInvoker)delegate{lblVal.Text = txtVal.Text;}); 
```

...就这么简单：D

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-10-08T02:44:43.340

这是在 VB.net 中，与塞缪尔的回答非常相似。我有四个重载，具体取决于您是否需要子例程或函数以及是否有参数。为更多参数添加更多重载会很容易。VB.Net 能够推断类型。

```
Module ISynchronizeInvokeExtensions
    Public Delegate Function GenericLambdaFunctionWithParam(Of InputType, OutputType)(ByVal input As InputType) As OutputType
    Private Delegate Function InvokeLambdaFunctionCallback(Of InputType, OutputType)(ByVal f As GenericLambdaFunctionWithParam(Of InputType, OutputType), ByVal input As InputType, ByVal c As System.ComponentModel.ISynchronizeInvoke) As OutputType
    Public Function InvokeEx(Of InputType, OutputType)(ByVal f As GenericLambdaFunctionWithParam(Of InputType, OutputType), ByVal input As InputType, ByVal c As System.ComponentModel.ISynchronizeInvoke) As OutputType
        If c.InvokeRequired Then
            Dim d As New InvokeLambdaFunctionCallback(Of InputType, OutputType)(AddressOf InvokeEx)
            Return DirectCast(c.Invoke(d, New Object() {f, input, c}), OutputType)
        Else
            Return f(input)
        End If
    End Function

    Public Delegate Sub GenericLambdaSubWithParam(Of InputType)(ByVal input As InputType)
    Public Sub InvokeEx(Of InputType)(ByVal s As GenericLambdaSubWithParam(Of InputType), ByVal input As InputType, ByVal c As System.ComponentModel.ISynchronizeInvoke)
        InvokeEx(Of InputType, Object)(Function(i As InputType) As Object
                                           s(i)
                                           Return Nothing
                                       End Function, input, c)
    End Sub

    Public Delegate Sub GenericLambdaSub()
    Public Sub InvokeEx(ByVal s As GenericLambdaSub, ByVal c As System.ComponentModel.ISynchronizeInvoke)
        InvokeEx(Of Object, Object)(Function(i As Object) As Object
                                        s()
                                        Return Nothing
                                    End Function, Nothing, c)
    End Sub

    Public Delegate Function GenericLambdaFunction(Of OutputType)() As OutputType
    Public Function InvokeEx(Of OutputType)(ByVal f As GenericLambdaFunction(Of OutputType), ByVal c As System.ComponentModel.ISynchronizeInvoke) As OutputType
        Return InvokeEx(Of Object, OutputType)(Function(i As Object) f(), Nothing, c)
    End Function
End Module 
```

用法（在后台运行它）：

```
 InvokeEx(Sub(x As String) Me.Text = x, "foo", Me) 'set form title to foo
    InvokeEx(AddressOf MsgBox, Me.Text, Me)
    InvokeEx(Sub() Me.Text &= "!", "foo", Me) 'append "!" to form title
    InvokeEx(AddressOf MsgBox, Me.Text, Me)
    Dim s As String = InvokeEx(Function() Me.Text, Me) & "bar" 'get form title to backgorundworker thread
    InvokeEx(AddressOf MsgBox, s, Me) 'display the string from backgroundworker thread 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-12T22:38:27.773

这是我使用的 Samuel 答案的 VB 等效代码。注意我实际上有 2 个扩展功能，但我必须承认我不知道它们为什么在那里。我几年前复制了我的 C# 版本（可能来自这个站点），它具有两个扩展功能，但出于什么原因，我不完全理解。我只是复制了它以及如何使用它，我对这些复杂功能的“幕后”一切了解了一半。

```
#Const System_ComponentModel = True
#Const System_Drawing = False

Option Compare Binary
Option Explicit On
Option Strict On

Imports System.Collections
Imports System.Runtime.CompilerServices ' for Extension() attribute
Imports System.Text
#If System_ComponentModel Then
Imports System.ComponentModel
#End If
#If System_Drawing Then
Imports System.Drawing
#End If

Public Module MyExtensions

    ' other #Region blocks are removed. i use many in my Extensions
    ' module/class. the below code is only the 2 relevant extension
    ' for this 'SafeInvoke' functionality. but i use other regions
    ' such as "String extensions" and "Numeric extensions". i use
    ' the above System_ComponentModel and System_Drawing compiler
    ' directives to include or exclude blocks of code that i want
    ' to either include or exclude in a project, which allows me to
    ' easily compare my code in one project with the same file in
    ' other projects to syncronise new changes across projects.
    ' you can scrap pretty much all the code above,
    ' but i'm giving it here so you see it in the full context.

    #Region "ISynchronizeInvoke extensions"

    #If System_ComponentModel Then

        <Extension()>
        Public Function SafeInvoke(Of T As ISynchronizeInvoke, TResult)(isi As T, callFunction As Func(Of T, TResult)) As TResult
            If (isi.InvokeRequired) Then
                Dim result As IAsyncResult = isi.BeginInvoke(callFunction, New Object() {isi})
                Dim endresult As Object = isi.EndInvoke(result)
                Return DirectCast(endresult, TResult)
            Else
                Return callFunction(isi)
            End If
        End Function

        ''' <summary>
        ''' This can be used in VB with:
        ''' txtMyTextBox.SafeInvoke(Sub(d) d.Text = "This is my new Text value.")
        ''' or:
        ''' txtMyTextBox.SafeInvoke(Sub(d) d.Text = myTextStringVariable)
        ''' </summary>
        ''' <typeparam name="T"></typeparam>
        ''' <param name="isi"></param>
        ''' <param name="callFunction"></param>
        ''' <remarks></remarks>
        <Extension()>
        Public Sub SafeInvoke(Of T As ISynchronizeInvoke)(isi As T, callFunction As Action(Of T))
            If isi.InvokeRequired Then
                isi.BeginInvoke(callFunction, New Object() {isi})
            Else
                callFunction(isi)
            End If
        End Sub

    #End If

    #End Region

    ' other #Region blocks are removed from here too.

End Module 
```

C#版本是：

```
#define System_ComponentModel
#undef  System_Drawing

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

#if System_ComponentModel
using System.ComponentModel;
#endif
#if System_Drawing
using System.Drawing;
#endif

namespace MyCompany.Extensions
{
    static partial class MyExtensions
    {

        // other #Region blocks are removed. i use many in my Extensions
        // module/class. the below code is only the 2 relevant extension
        // for this 'SafeInvoke' functionality. but i use other regions
        // such as "String extensions" and "Numeric extensions". i use
        // the above System_ComponentModel and System_Drawing compiler
        // directives to include or exclude blocks of code that i want
        // to either include or exclude in a project, which allows me to
        // easily compare my code in one project with the same file in
        // other projects to syncronise new changes across projects.
        // you can scrap pretty much all the code above,
        // but i'm giving it here so you see it in the full context.

        #region ISynchronizeInvoke extensions
#if System_ComponentModel

        public static TResult SafeInvoke<T, TResult>(this T isi, Func<T, TResult> callFunction) where T : ISynchronizeInvoke
        {
            if (isi.InvokeRequired)
            {
                IAsyncResult result = isi.BeginInvoke(callFunction, new object[] { isi });
                object endResult = isi.EndInvoke(result); return (TResult)endResult;
            }
            else
                return callFunction(isi);
        }

        /// <summary>
        /// This can be used in C# with:
        /// txtMyTextBox.SafeInvoke(d => d.Text = "This is my new Text value.");
        /// or:
        /// txtMyTextBox.SafeInvoke(d => d.Text = myTextStringVariable);
        /// </summary>
        /// <typeparam name="T"></typeparam>
        /// <param name="isi"></param>
        /// <param name="callFunction"></param>
        public static void SafeInvoke<T>(this T isi, Action<T> callFunction) where T : ISynchronizeInvoke
        {
            if (isi.InvokeRequired) isi.BeginInvoke(callFunction, new object[] { isi });
            else
                callFunction(isi);
        }

#endif
        #endregion

        // other #Region blocks are removed from here too.

    } // static class MyExtensions

} // namespace 
```

快乐编码！

# odbc - 是否有任何免费的 Sybase ASE 12.5x ODBC 驱动程序可用，或者是否有人对任何付费驱动程序有任何经验？

> ID：711409
> 
> 赞同：1
> 
> 时间：2009-04-02T20:11:10.843
> 
> 标签：odbc, sap-ase

是否有任何免费的 Sybase ASE 12.5x ODBC 驱动程序可用，或者是否有人对任何付费驱动程序有任何经验？我正在寻找一种快速简单的解决方案，但不一定要花大价钱。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T20:15:29.350

[FreeTDS](http://www.freetds.org/)怎么样。ASE 使用 TDS 有线协议进行连接。FreeTDS 看起来像是在 C++ 中作为 ODBC 驱动程序执行 TDS。

[原始答案，但对寻找 Java 解决方案的其他人有用：] jConnect。我只是[直接](http://www.sybase.com/detail?id=1041013)从 Sybase 下载的。（[这里是手册](http://infocenter.sybase.com/help/topic/com.sybase.dc39001_0605/pdf/prjdbc.pdf)）它是一个使用 TDS 协议的 4 类 jdbc 驱动程序。用于连接的 jdbc url 有点古怪。

这是一篇[比较](http://iablog.sybase.com/paulley/2009/03/differences-between-jconnect-and-the-ianywhere-jdbc-driver-part-un/)两个官方 Sybase 驱动程序 jConnect 和 iAnywhere 的文章。

嗯，我看到你指定了 ODBC，现在我已经发布了这个。 这是您可以使用的 ODBC-JDBC 桥[。](http://www.easysoft.com/products/data_access/odbc_jdbc_gateway/)我明白你的意思，那里有很多[付费](http://download.cnet.com/OpenLink-Lite-Edition-ODBC-Driver-for-Sybase-TDS/3000-2065_4-51337.html)的ODBC 驱动程序，但有些有免费试用......你最好的选择可能是使用免费的 jdbc 驱动程序和免费的 odbc-jdbc 桥。

等等，如果您尝试连接到某个地方，则必须已经在某处安装了 ASE。会有一个随之而来的。此外，您可以从 Sybase 下载的一些开发人员版本是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T20:08:44.157

[FreeTDS](http://www.freetds.org/)将在 Win32 平台以及 Linux 上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T06:13:19.037

这是 Sybase 客户端驱动程序的链接 - [https://apps.state.or.us/tech/htdocs/sybase.html](https://apps.state.or.us/tech/htdocs/sybase.html)

我意识到这对你来说有点晚了，但对其他人来说，这可能会为他们节省一些痛苦。

为 ODBC 驱动程序下载 500mb 是相当荒谬的，但你去吧。

# linq - LINQ to SQL：常量值的联合

> ID：711413
> 
> 赞同：0
> 
> 时间：2009-04-02T20:12:14.837
> 
> 标签：linq

我想用来自数据库的值和使用 linq 的常量硬编码文字填充一个下拉列表。例如，假设我已经有北风数据上下文，我想用类别表和一些常量填充下拉列表，以便下拉列表将具有如下所示的内容。

## 值文本

0 [全部] -1 [无] 1 饮料 2 调味品 3 甜点 : : 8 海鲜

等等。前两项是硬编码常量，其余项来自使用 linq 的数据库。

我试过这个，但没有奏效。请帮忙。谢谢。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
Dim db As New NorthwindDataContext

Dim q = From c In db.Categories _
Select c.CategoryID, c.CategoryName

Dim q2 = From c In db.Categories _
Select CategoryID = 0, CategoryName = "All"

DropDownList1.DataTextField = "CategoryName"
DropDownList1.DataValueField = "CategoryID"
DropDownList1.DataSource = q.Union(q2)
DropDownList1.DataBind()
End Sub 
```

我想使用 LINQ 来实现这一点。是的，您可以添加到 DropdownList 但是...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:32:00.387

尝试使用（extraCats 表达式是一个内联数组声明，使用 c# 语法）

```
Dim db As New NorthwindDataContext

Dim q = From c In db.Categories _
Select c.CategoryID, c.CategoryName
Dim dbCats = q.ToList()

Dim extraCats = new[] { 
    new { CategoryID = 0, CategoryName = "All" }
   }

DropDownList1.DataTextField = "CategoryName"
DropDownList1.DataValueField = "CategoryID"
DropDownList1.DataSource = dbCats.Union(extraCats)
DropDownList1.DataBind() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:15:49.913

您不必使用 LINQ 将这些项目添加到 DropDown ...在绑定控件后使用 DropDownList.Items.Add() 或 DropDownList.Items.Insert()

由于您想在列表的开头添加硬编码项目，因此 Insert() 会更好地为您工作。

有关更多信息，请参阅[本文](http://www.dotnetfunda.com/interview/exam223-difference-between-dropdownlistitemsadd-and-dropdownlistitemsinser.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T20:33:52.070

您只需将硬编码值添加到下拉列表中，将[AppendDataBoundItems](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)属性设置为 true，然后照常设置数据源。

```
DropDownList1.Items.Add(New ListItem("0", "All"))
DropDownList1.AppendDataBoundItems = True
DropDownList1.DataTextField = "CategoryName"
DropDownList1.DataValueField = "CategoryID"
DropDownList1.DataSource = q
DropDownList1.DataBind() 
```

# ruby-on-rails - 如何防止 Rails 中的浏览器页面缓存

> ID：711418
> 
> 赞同：155
> 
> 时间：2009-04-02T20:13:35.847
> 
> 标签：ruby-on-rails, ruby, apache, caching, http-headers

Ubuntu -> Apache -> Phusion Passenger -> Rails 2.3

我网站的主要部分会对您的点击做出反应。因此，如果您单击一个链接，它会将您发送到目的地，并立即重新生成您的页面。

但是，如果您点击后退按钮，您将看不到新页面。不幸的是，如果没有手动刷新，它就不会出现；看来浏览器正在缓存它。我想确保浏览器不缓存页面。

另外，我*确实*想为我的所有静态资产设置遥远的到期日期。

解决这个问题的最佳方法是什么？我应该在 Rails 中解决这个问题吗？阿帕奇？Javascript？

谢谢你的帮助，杰森

* * *

唉。这些建议都没有强迫我正在寻找的行为。

也许有一个javascript答案？我可以让 Rails 在评论中写出时间戳，然后让 javascript 检查时间是否在五秒内（或任何有效的时间）。如果是，那么很好，但如果不是，那么重新加载页面？

你认为这行得通吗？

感谢你的帮助，

杰森

* * *

## 回答 #1

> 赞同：345
> 
> 时间：2009-04-14T17:40:01.440

终于想通了- [http://blog.serendeputy.com/posts/how-to-prevent-browsers-from-caching-a-page-in-rails/](http://blog.serendeputy.com/posts/how-to-prevent-browsers-from-caching-a-page-in-rails/)`application_controller.rb`

**在 Rails 5 之后：**

```
class ApplicationController < ActionController::Base

  before_action :set_cache_headers

  private

  def set_cache_headers
    response.headers["Cache-Control"] = "no-cache, no-store"
    response.headers["Pragma"] = "no-cache"
    response.headers["Expires"] = "Mon, 01 Jan 1990 00:00:00 GMT"
  end
end 
```

**Rails 4 及旧版本：**

```
class ApplicationController < ActionController::Base

  before_filter :set_cache_headers

  private

  def set_cache_headers
    response.headers["Cache-Control"] = "no-cache, no-store"
    response.headers["Pragma"] = "no-cache"
    response.headers["Expires"] = "Mon, 01 Jan 1990 00:00:00 GMT"
  end
end 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2011-07-05T09:57:35.527

采用：

```
expires_now() 
```

[http://api.rubyonrails.org/classes/ActionController/ConditionalGet.html#method-i-expires_now](http://api.rubyonrails.org/classes/ActionController/ConditionalGet.html#method-i-expires_now)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T21:29:04.637

我在控制器中使用了这条线并取得了一些成功。它适用于 Safari 和 Internet Explorer，但我还没有看到它适用于 Firefox。

```
response.headers["Expires"] = "#{1.year.ago}" 
```

对于第二点，如果您使用 rails 辅助方法，例如

```
stylesheet_link_tag 
```

并在您的网络服务器上保留默认设置，资产通常缓存得很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-07T20:03:14.463

更简洁的方法是编写一个 Rack 中间件，它根据一些逻辑更改 Cache-Control 标头（例如，仅适用于 application/xml mime-type）。或者，对于一种更丑陋但仍然有效的方法，可以将 ActionDispatch::Response::DEFAULT_CACHE_CONTROL 常量更改为“无缓存”。当然，如果需要控制器和/或动作粒度，那么最好在控制器中执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-20T17:25:34.660

注意点：您不能有条件地清除缓存（例如，如果仅在用户已经在那里的情况`before_filter`下调用）。`reset_cache`您需要*无条件地*清除缓存，因为浏览器不会发出新的请求，只是看这次是否需要重新加载，即使上次不需要。

例子：

```
before_filter :reset_cache, if: :user_completed_demographics? 
```

由于浏览器使用“后退”按钮上的原始缓存标头，因此无法阻止用户返回。

```
before_filter :reset_cache 
```

但是会起作用（显然，在刷新页面并清除添加之前的缓存之后），因为在第一个请求时，浏览器将获取`no-cache, no-store, ...`并将其应用于将来的页面加载。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-18T19:35:15.580

### [`no_cache_control`宝石。](https://github.com/equivalent/no_cache_control)

如果您需要对所有响应执行此操作，例如通过渗透测试（BURP、Detectify 等），您可以安装此 Gem on Rails 4+，以便将以下标头添加到所有响应中：

```
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: -1 
```

像魅力一样工作，对于需要身份验证才能执行任何操作的安全 HTTPS Web 应用程序来说，它确实是正确的方法。

# debugging - What are your best practices for bugs that are hard to solve?

> ID：711431
> 
> 赞同：2
> 
> 时间：2009-04-02T20:18:28.097
> 
> 标签：debugging, language-agnostic

I sometimes find myself trying to fix a stubborn bug and only after a while figuring out that something quite obvious was wrong.

This happens to me when I think the problem is related to something and I kind of get 'blind' for other things that can be wrong.

Most of the time it helps to have a night of sleep and the next morning I see the problem immediately.

Things that happened to me in the past:

1.  Editing a copy of the real source file that did not have any effect.
2.  Not focusing on the real problem, but trying to figure something out while the real problem was already solved.
3.  Not doing a compile/build as I had been working with interpreted languages before.

What are your 'blinding' experiences during debugging?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-02T20:22:29.007

One thing that helps a lot is to find a good balance between focussing and not obsessing.

*   Make sure you can work on the bug without being disturbed
*   But also know when to take a break if you cannot concentrate any longer

And yes, there is a point where a good night of sleep is the best you can do.

Finally, discuss the problem with a colleague, often a second pair of eyes and point of view work wonders. Surprisingly, sometimes just explaining the problem already helps, even if the listener does not say anything. This is called [Rubber duck debugging](https://en.wikipedia.org/wiki/Rubber_duck_debugging).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T20:22:33.203

Walk through the code with a debugger, line by line. At the very least, this should pinpoint the line where something you don't understand is happening. If your initial guess at what the bug is fails, stop guessing and use a debugger.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T20:49:09.397

All good answers.

For really tough bugs, such as numerical routines that run for a long time and get slightly different answers from what they used to get, there is a laborious method that usually works.

Get one foot on each side of the problem and work toward the center.

Like get an older version of the program that got the right answer, and the newer one that doesn't. Incrementally make changes to either one to bring them closer together, still keeping one on one side of the problem, and the other on the other. Eventually, you find the one change that makes the difference.

Like run an older good version of the program under a debugger, and the newer bad version also under a debugger, at the same time. Single step them side-by-side until they do something different. Then repeat, homing in on the step at which they start to differ.

I've found this working-inward-from-both-sides method is applicable to all kinds of difficult problems, not just software.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T20:38:25.317

Print outputs everywhere if you don't want to set breakpoints. Helps me big time when debugging. And then, of course when you see THAT variable output equals something totally different to what you thought it should, its like light breaking through.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T20:47:37.417

*   Use the debugger, make sure you know what the 'expected' behaviour is, find the point where 'expected' behaviour is no longer happening
*   A source control helps, in case when you can roll back to the working version of the code and start adding your changes back little by little, until you find that bit that breaks the functionality.
*   Use the event log. I had a bug recently which logged a DllNotFound exception in the Application event log. That made no sence since the file was there all right. It took me some time to peek into the System log, and there was another error there about a dependency missing. So use all available logs. Write critical information to the event log yourself and make sure it appear as expected.
*   Use google or stackoverflow to search. Most problems have been experienced by other people before, you might be surprised by how many people had the same problem.
*   START writing a question to stackoverflow. For every question I asked there were at least one or maybe two that I did not, because just formulating the problem properly in writing led me to the solution
*   If possible, create a small 'throwaway' empty project and try to replicate the problem there. That might help to find out if the problem is caused by your code or by other parts of the project
*   Use the help of a colleague
*   Walk away for a while if you can, or at least try to do something different. Your mind will keep working on the problem subconsciously, and may deliver a solution soon.
*   If nothing helps, read the documentation and manuals. ( :-) )

An example where nothing helped: Once I was going crasy because my DataGridView would not show checkboxes in a checkbox column. There was absolutely no way it could be possible. Took me long time to find out that, for some reason, the checkboxes would not show if a column was less then certain width. They were still visible in the designer. (I think the reason was a certain UI toolkit we were using). I wouldn't find out, but just by accidental mouse move I resized a column at run time and voila - there they were, my checkboxes, all this time, sitting there invisible.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-02T21:16:27.303

Something I've found helpful is to bear in mind that, when dealing with the really interesting/nasty bugs, you don't have to hit the right solution all at once. Anything that tells you something you didn't already know represents a step in the right direction, and thus gets you closer to the answer. Even figuring out what the problem *isn't* helps, because you know to look someplace else.

Suspect that maybe the bug may be caused by condition X? Then try dialing X up to 11\. If the bug gets worse (or shows up more frequently), X may indeed be your culprit. If it has no effect, look elsewhere.

Is the bug intermittent? Then temporarily forget about trying to figure out *why* it happens and focus on *when*. If you can come up with a test case that reliably reproduces the bug, you're well on your way to figuring it out.

Think one particular part of the code looks suspicious? Then sprinkle it liberally with breakpoints or print statements (as your environment allows) and prove to yourself it's behaving properly. Check the input variables. Check the output variables. Hell, maybe even check the environment variables.

When I'm stumped, I try to fall back on basic experimentation: gather data, form hypothesis, test hypothesis, lather, rinse, repeat. You know, toss some "science" into my Computer Science. :-)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-02T20:22:59.583

Use an editor that lets you **set breakpoints**

> With Breakpoints, you don't have to start at the beginning of the code over and over as you debug, which makes it easier to step through the code

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-02T20:27:42.520

Using your version control system, go back in time until just before the bug appeared and diff that code against the first revision where the bug is introduced.

Use a binary search tree approach to make the process faster.

I'm told there's a git command or tool that makes this easy.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-02T20:35:32.033

I agree with sleske but one thing I'd add is to break the unit of work into smaller units. So if it's bug in a method...make smaller methods. It will clear the fog of war.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-02T20:39:24.987

Leaving it alone and calling your colleague to have a fresh look at the problem. Time and again I find this approach solves the problem in 5 minutes, while you could lose the whole day.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-02T21:16:45.040

Forget the debugger. Waste of time, most of the time.

First, [rubber duck](http://c2.com/cgi/wiki?RubberDucking) it. If that fails, move to plan B.

Plan B: ensure you have **good unit tests**. Then you can home in on the problem (assuming you can reproduce it) using techniques such as what Kent Beck calls the "[Saff squeeze](http://www.threeriversinstitute.org/HitEmHighHitEmLow.html)".

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-02T20:23:01.113

Like you said, the best thing is often to step back from the problem.. maybe work on something else for a while, or just take a walk.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-02T20:24:12.247

Many times I have gotten caught up trying to fix a bug that really did not have to be fixes. In many cases, a user simply wants a particular behavior, regardless of whether that behavior is warranted or not. I have had situations like these where I will spends lots of time trying to "fix" the bug, only to come to the realization that the bug really isn't a bug, or is not practical to fix.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-02T20:29:49.910

In 3D (games, for example) rendering stuff, debugging is always a nightmare. It sometimes goes down to pixel debuggers, which displays when and during what draw call that pixel was modified, from what to what color.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-02T20:33:57.530

If your .Net project fails on Mono, debugging is a nightmare. Most of the time it's about Console.WriteLine.

There're a few options. You may:

*   Debug on a linux machine. There's a command-line debugger for mono.
*   Run the code in a linux machine, and remote-debug from visual studio using some remote debugging plugins (I didn't succeed at it yet)
*   On windows, run MS .Net runtime but link it with mono class libraries. You can do it except for mscorelib, though it involves some messing around with the .net framework settings like disabling strong key checking for .net assemblies.

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-02T20:34:34.860

This question covers much of the same ground: [Best practices for debugging](https://stackoverflow.com/questions/366453/best-practices-for-debugging)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-02T20:56:52.310

I've found when staring at something that *should* be working but isn't, I'm often trying too hard. Grabbing a friend and explaining to them how it should work, line by line, bit by bit, usually causes the problem to jump out.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-04-02T21:15:42.157

I have to be good at finding and fixing bugs when I program like I do. ;)

First of all, I have to admit that the bug is mine. When working with a group it is easy to blame someone else for a problem. When I get that inclination, I start by collecting enough evidence to prove that the bug is theirs. About half the time, I collect enough evidence to determine that it is mine. By that time I'm well on my way to a solution. Otherwise I approach the other developer explaining what my code does, what the response is, and what surprises me about that response. That makes it easier for them to either point out where my expectations were wrong or where their contributions may not be working correctly.

When I do determine that the problem is mine, I approach it with "the relentless application of logic." I collect all of the information I can about the misbehavior. Then I examine it and the code side by side, trying to figure out what could cause unexpected behavior. Usually this points to some part of the code that becomes suspect. At that point I try to instrument the code further, saving copies of variables or logging critical information. Based on the further information collected, I evaluate and refine my original hypothesis and go on. Several such iterations usually nail down the bug or point to a new area for investigation. I guess that boils down to analyze -> instrument -> test -> repeat. When I find the problem, I always go through at least one more instrument -> test iteration to make sure the bug really is fixed.

As others have mentioned, ask coworkers for help. That helps in two ways. First, you will understand your code better when explaining it to them. Even if your coworkers are not at your level, this can help. Second, they may see things you did not notice or ask questions that did not occur.

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-04-02T21:21:52.670

Find someone else who understands the basic issues and technology (so they don't give you a blank stare) and **explain** the problem to them. They often don't even need to answer, just organizing your thoughts enough to explain the problem to someone else often brings the solution into focus.

EDIT: I was referring to [Rubber Ducking](http://c2.com/cgi/wiki?RubberDucking) even though I couldn't put a name to it. Thank you [Morendil](https://stackoverflow.com/questions/711431/what-are-your-best-practices-for-bugs-that-are-hard-to-solve/711657#711657).

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2009-04-02T22:01:25.773

Know the value of what you're trying to fix. Don't waste time on "fluff". Document, work around and move on if value less than cost.

If value>cost, and you've had a good crack at it, then communicate it. Many times a tough problem is only a tough problem due to the perspective of the person involved. To others, things can often be highly obvious. Don't use your team as a crutch, and definitely respect their time etc but by the same token realize and tap the value of having workmates and peers.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-04-02T22:11:17.840

Set a time limit on how long at once you will work on the task, e.g. 2 hours. Once this time is reached and you aren't making progress, take a break for 10-15 minutes which can be going for a walk, eating a snack, chatting with people, whatever besides that problem that can help "reset" your mental focus as after a while, it is useless to try to fix things through brute force.

Make sure you have a clear understanding of what the bug is exactly. There have been times where I'd get a bug that said, "This looks ugly. Please fix," and think, "Where is the spec that I'm supposed to make this look like as I don't know how to make this look good?" sort of thinking. This can also come if you've had to go to someone to referee the finger pointing between developers and testers where each is saying, "I am following the spec." That referee could be a manager, of developers, testers, or projects, but I do feel sorry for those that get pulled into these situations.

# database - 分离已移动或丢失 MDF/LDF 文件的 SQL Server 2005 数据库

> ID：711434
> 
> 赞同：2
> 
> 时间：2009-04-02T20:19:31.323
> 
> 标签：database, sql-server-2005, backup

我为使用 SharePoint 和 SQL Server 存储 PDF 文档的客户端创建了一个文档管理系统。由于某些 SAN 配置错误，3 个同时保存 MDF 和 LDF 数据库文件的磁盘有一天从操作系统中消失了。我们正在恢复 SAN 的数据，但我的问题是，当现有数据库可能是 MDF 或 LDF 或两个文件不再位于数据库期望的位置时，如何分离现有数据库。我注意到，即使我尝试查看属性，SQL Server 也会抱怨它找不到其中一个文件。

我是否需要使用最初为相关数据库配置的文件夹结构和 MDF/LDF 文件重新建立磁盘，或者我可以将数据库配置为指向新位置的 MDF/LDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:25:51.333

据我所知，当您需要将数据库指向不同的文件（或相同的文件但不同的位置）时，分离和附加是唯一的方法，但是当 mdf 和 ldf 文件丢失时，分离（或删除）将失败，正如你正在经历的那样。

如果您重新建立 mdf 和 ldf 文件，它们在它可以工作之前 - 但我不确定这是否是您想要的。

如果您没有这些文件，您可以尝试在它们曾经所在的位置创建虚拟 mdf 和 ldf 文件（名称必须相同），您可能会欺骗它让您分离。

或者

（如果你有备份 - 猜猜吧！）尝试用恢复覆盖你的数据库，你可以选择新的文件名/位置。

# c - 使用标准输入和标准输出通过 dup2() 将 read() write() 写入 pipe()

> ID：711437
> 
> 赞同：0
> 
> 时间：2009-04-02T20:21:24.687
> 
> 标签：c, linux, command-line, pipe

我需要模拟 Linux 命令“ `cal -3`”，它并排显示 3 个月的日历。我现在需要的是让我的实现，使用管道，工作。有人告诉我我不能使用,`fork()`而是应该使用`dup2()`,`write()`和调用三次。现在我的程序没有并排显示日历。`read()``close()``system("myCustomCommand")`

我正在尝试使用管道并遇到问题。这是我正在尝试的：

```
int pfd[2];
int p; //for pipe
int d; //for dup2
const int BSIZE = 256;
char buf[BSIZE];

p = pipe(pfd);
if (p == -1) { perror("pipe"); exit(EXIT_FAILURE); }
if (p == 0)
{
    d = dup2(pfd[1], 0);
    close(pfd[1]);
    nbytes = read (pfd[1], buf , BSIZE);
    close(pfd[0]);
    exit(EXIT_SUCCESS);
}
else
{
    close(pfd[0]);
    write(pfd[1], "test\n", BSIZE);
    close(pfd[1]);
    exit(EXIT_SUCCESS);
} 
```

不幸的是，这段代码没有显示任何内容。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T20:32:29.857

这看起来像家庭作业，所以我会给你一个解决问题的方法：

1.  让它与一个日历一起工作，一次读取一行并写入标准输出。
2.  现在将每一行存储在一个字符串数组中，并在读入整个日历后打印出每一行。
3.  让它与三个日历一起工作，将每个日历的结果存储到三个单独的字符串数组中，然后打印出所有三个（而不是彼此相邻）。
4.  不是打印出一个日历中的所有行，然后打印下一个日历中的所有行，等等，而是打印出每个日历的第一行，然后打印每个日历的第二行，等等。
5.  摆弄格式，直到它看起来正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:25:53.070

一次显示三个日历与分叉进程无关，实际上您不需要进入管道和其他东西。

您想要使用的是[ncurses](http://linux.die.net/man/3/ncurses)库来对您的输出进行特殊控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T22:04:02.507

为什么不使用`FILE *fp = popen("my command", "r");`，将输出读入字符串数组，重复三次并正确连接数组？

# sql-server - 有人可以解释我的 Windows/SQL Server 内存使用情况吗

> ID：711445
> 
> 赞同：1
> 
> 时间：2009-04-02T20:23:14.560
> 
> 标签：sql-server, windows, sql-server-2005, memory, 64-bit

我正在运行具有 8GB RAM 和 SQL Server 2005 64 位的 Windows Server 2003 x64。我将 SQL 设置为使用大量内存，但 SQL 进程只占用 100 MB 以下的 RAM。这是正常的吗？它正在访问具有许多 GB 大小的索引的数据。

此外，没有进程占用超过 100MB 的内存，但只有最小 (<100MB) 的内存量。

哪位好心人可以向我解释一下内存在哪里使用以及 SQL 内存使用情况是否正常？

内存使用：http: [//img129.imageshack.us/img129/8624/02042009210608.png](http://img129.imageshack.us/img129/8624/02042009210608.png)

SQL Server 内存设置：

[http://img10.imageshack.us/img10/8964/02042009210845.png](http://img10.imageshack.us/img10/8964/02042009210845.png)

内存细节：

[http://img228.imageshack.us/img228/3830/02042009210917.png](http://img228.imageshack.us/img228/3830/02042009210917.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:33:29.993

显示的值不是实际使用的内存量。[Mark Russinovich](http://blogs.technet.com/markrussinovich/)在他博客的一些帖子中处理了 Windows 上的内存管理问题。看看[推动 Windows 的限制：物理内存](http://blogs.technet.com/markrussinovich/archive/2008/07/21/3092070.aspx)和[推动 Windows 的限制：虚拟内存](http://blogs.technet.com/markrussinovich/archive/2008/11/17/3155406.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T20:42:46.993

我推荐 Process Explorer ( [http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx) ) 作为衡量进程正在使用多少内存的更好方法。右键单击标题并选择“Select Columns”，然后选择“Process Memory”选项卡，最后选中“Private Bytes”和“Private Bytes History”选项。

就您的 SQL 内存配置而言，我建议将最小值设置为您*知道*机器上永远不需要用于其他任务的任何内容，并将最大值设置为促使您填充物理内存（计算其他进程）的内容，但不要再进一步了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T21:00:22.737

这些设置的内存使用是正常的，虽然您在任务管理器中看不到它，但使用内存的是 SQL Server。

但是，正如您所见，总内存使用量超过了物理内存，这对服务器的性能不利。您不应*将*数据库服务器的内存限制设置为超过您拥有的物理内存。数据库服务器使用内存来缓存数据和结果，如果它必须从磁盘交换缓存，那么拥有它没有任何好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-26T06:09:52.657

搜索未在 Process Explorer 中显示的 SQL Server 内存时发现了此问题。原因是在 SQL Server 32 位和 64 位上，内存分配可以配置为使用 AWE API。

这样做的先决条件是必须为运行 SQL Server 进程的帐户配置*内存中的锁定页。*这适用于 32 位和 64 位。这是通过*组策略编辑器*(gpedit.msc) 完成的，然后导航到*计算机配置 -> Windows 设置 -> 安全设置 -> 本地策略 -> 用户权限分配*，然后将适当的帐户添加到*内存*策略设置中的锁定页面。

本地系统默认已经有这个（[http://blogs.msdn.com/b/psssql/archive/2007/10/18/do-i-have-to-assign-the-lock-privilege-for-local-系统.aspx](http://blogs.msdn.com/b/psssql/archive/2007/10/18/do-i-have-to-assign-the-lock-privilege-for-local-system.aspx)）。

对于 SQL Server 32-bit 2005 - 2008R2，您需要通过*Use AWE to allocate memory*在 Memory Options 中启用 AWE 。SQL Server 2012 32 位及更高版本不再具有此选项。

对于 64 位 SQL Server，*在内存中拥有锁定页面*将使用 AWE 来分配内存。

为了查看这些 AWE 内存分配，您可以使用内存映射器工具，例如*Sysinternals RAMMap* [http://technet.microsoft.com/en-au/sysinternals/ff700229.aspx](http://technet.microsoft.com/en-au/sysinternals/ff700229.aspx)。

您可以通过以下方式确定您的 SQL Server 是否正在使用锁定页面：

```
EXEC sp_configure 'show advanced options', 1;
RECONFIGURE;
GO
EXEC sp_configure 'xp_cmdshell', 1
RECONFIGURE
GO

EXEC xp_cmdshell 'whoami /priv'
GO

EXEC sp_configure 'xp_cmdshell', 0
RECONFIGURE
GO 
```

您应该看到*SeLockMemoryPrivilege*已启用。

对于 SQL Server 32 位，您可以通过以下方式确认已启用 AWE（64 位不需要此检查）：

```
EXEC sp_configure 'awe enabled'
GO 
```

并且 run_value 应该是 1。

If it turns out your server is not using AWE allocated memory, using Sysinternals Process Explorer ([http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)) as per Godeke's post is the nicer way to go - better interface and easier to understand/use.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-12-22T16:08:40.687

> 默认情况下，SQL Server 会根据操作系统报告的物理内存负载动态增长和缩小其缓冲池（缓存）的大小。只要有足够的可用内存来防止分页（4 - 10 MB 之间），SQL Server 缓冲池就会继续增长。当与 SQL Server 位于同一台计算机上的其他进程分配内存时，SQL Server 缓冲区管理器将根据需要释放内存。SQL Server 每秒可以释放和获取数兆字节的内存，使其能够快速适应内存分配的变化。

来源： http: [//support.microsoft.com/kb/321363](http://support.microsoft.com/kb/321363)

# windows-installer - Visual Studio 安装程序 exe 版本与属性版本不同

> ID：711464
> 
> 赞同：0
> 
> 时间：2009-04-02T20:27:46.827
> 
> 标签：windows-installer, setup-project

我创建了一个 Visual Studio 安装项目并将版本设置为 1.1.5。当我构建我的安装项目时，setup.exe 文件版本是 9.0.21022.8。如何从我的安装项目中检索 1.1.5 文件版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-09T20:31:49.803

我通过 b# [http://community.bartdesmet.net/blogs/bart/archive/2008/06/06/linq-to-msi-part-0-introduction.aspx的博客条目系列找到了答案](http://community.bartdesmet.net/blogs/bart/archive/2008/06/06/linq-to-msi-part-0-introduction.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:30:53.060

`setup.exe`只是最终启动您的 MSI 的引导程序。

您构建的每个 MSI 都使用相同的可执行文件，因此其版本与其关联的部署项目无关；您的应用程序版本**在 MSI 文件**中。

[**以编程方式读取 MSI 构建版本**](http://www.experts-exchange.com/Programming/Installation/MSI/Q_23134637.html)可能对您有用，它用于[`WindowsInstaller.Installer`](http://msdn.microsoft.com/en-us/library/aa369432(VS.85).aspx)获取 MSI 版本。

# java - 如何在 Swing 中最好地实现淡入淡出按钮效果？

> ID：711469
> 
> 赞同：2
> 
> 时间：2009-04-02T20:29:15.090
> 
> 标签：java, user-interface, swing, awt, swingworker

我有一个`JButton`，当按下时，将背景颜色从活动更改为正常：

```
final Color activeButtonColor = new Color(159, 188, 191);
final Color normalButtonColor = new Color(47, 55, 56); 
```

当特定任务完成执行时，我想将活动按钮颜色淡化回正常按钮颜色。我正在使用`SwingWorker`并想知道是否有人可以建议一种有效的方法来做到这一点？

```
button.addActionListener(new ActionListener() {
  public void actionPerformed(final ActionEvent event) {

    new SwingWorker<Object, Object>() {

      protected Object doInBackground() throws Exception {
        button.setBackground(activeButtonColor);
        for (int note = 60; note < 120; note++) {
          midiController.sendMidiMessage(1, note, 83);
          midiController.stopMidiMessage(note, 83);
        }
        Thread.sleep(200);
        return null;
      }

      protected void done() {
        try {
          Object result = get();

          // Fade back
        } catch (Exception ex) {
          ex.printStackTrace();
          if (ex instanceof java.lang.InterruptedException)
            return;
        }
      }
    }.execute();
  }
}); 
```

**编辑：**为了清楚起见，我正在寻找一种有效的方法将 RGB 值淡化`activeButtonColor`回`normalButtonColor`，而不必创建大量`Color`对象。是否可以？还是我只需要限制淡入淡出步骤的数量以提高效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:39:28.140

创建一个接受 3 个参数、一个按钮、一个来自颜色和一个颜色的方法。在该方法中，创建一个 swingworker 以在背景中运行以淡化颜色。

然后在你做你的工作的动作监听器上，在你做任何事情之前，调用淡入淡出方法从活动到正常。完成后，将淡入淡出方法从正常调用到活动。

在这种情况下，您最终将使用 3 个摇摆工人。一个用于您的工作，一个用于第一个渐变，一个用于最后一个渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T21:31:04.177

颜色对象应该是相当轻量级的；它们基本上只是四个浮点数加上一些指向预先存在的对象的指针。如果你真的想保存 Color 对象实例化，并且你确定上面的开始和结束颜色不会改变，你可以为淡入淡出序列预先计算 Color 对象，但我很确定你可以即时计算它们也一样，并且不承担任何后果。

# php - 为什么我无法连接到我的 sql 数据库？我收到错误消息：“无法通过套接字连接到本地 MySQL 服务器”

> ID：711473
> 
> 赞同：0
> 
> 时间：2009-04-02T20:29:37.867
> 
> 标签：php, sql, mysql, database, connect

我刚刚将我的网站移动到一个新的虚拟主机，并且在更改数据库登录文件后，它仍然无法连接。我收到以下错误：

警告：mysql_query() [function.mysql-query]: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) in /usr/www/users/simpleof/index.php on line 91

我更改了密码并再次尝试，但仍然无法正常工作。db-login 里面的信息都是正确的，为什么连不上数据库呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:32:26.860

MySQL 服务器是否与 Web 应用程序位于同一主机上？如果没有，则不能使用套接字连接，需要通过 TCP 连接。

如果 MySQL 服务器在同一台主机上，那么套接字可能与“/tmp/mysql.sock”位于不同的位置？

如果没有关于您正在使用的应用程序/平台的更多信息，这就是我能提供的所有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-03T01:46:02.507

哇。我觉得很笨，但是我在登录时在服务器名称中多加了一个空格。

因此，我对其他遇到此问题的人的建议是真正检查以确保您的登录信息是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T20:35:33.750

如果您的用户主机正确，请检查 mysql 用户权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T22:13:17.993

最近对 Debian/Ubuntu 进行了更新，导致我出现此错误。我不得不将一些 Ubuntu 配置调整为 mysql 工作。您可能需要咨询您的托管公司，看看这是否是问题所在。

# c# - 事件（com 库） - 更新 GUI

> ID：711477
> 
> 赞同：0
> 
> 时间：2009-04-02T20:30:49.207
> 
> 标签：c#, com

我有一个金融图书馆（com），每次价格变化时都会调用一个事件。我订阅了这个事件并尝试更新一个文本框，但我总是得到一个跨线程操作。好吧，我使用委托，但它根本不起作用......它冻结了应用程序。我的假设是在 GUI 有时间刷新之前快速调用事件。知道我该如何处理吗？

我现在解决它的唯一方法是：

```
CheckForIllegalCrossThreadCalls = false; 
```

但我知道这是一个非常糟糕的做法......

我使用 .Net 3.5 和 c#

编辑：委托代码

```
private delegate void UpdateTextBoxDelegate(String value);

private void UpdateTextBox(String value)
{
    this.txtPrice.Text = value;
}

txtPrice.Invoke(new UpdateTextBoxDelegate(UpdateTextBox), price); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T20:53:18.323

如果您使用事件，它应该自动编组到 UI 线程。就是这样`BackgroundWorker`工作的。您将不得不发布您如何挂钩事件和事件回调本身。

您也可以尝试使用`Invoke`when `InvokeRequired == true`。

```
using System.ComponentModel;
public static class ISynchronizeInvokeExtensions
{
  public static void InvokeEx<T>(this T @this, Action<T> action) where T : ISynchronizeInvoke
  {
    if (@this.InvokeRequired)
    {
      @this.Invoke(action, new object[] { @this });
    }
    else
    {
      action(@this);
    }
  }
} 
```

所以现在您可以`InvokeEx`在任何 ISynchronizeInvoke 上使用，并且能够访问实现类的属性和字段。

```
this.InvokeEx(f => f.txtPrice.Text = price); 
```

# java - 自定义 facelet 函数是否脏？

> ID：711480
> 
> 赞同：3
> 
> 时间：2009-04-02T20:31:40.203
> 
> 标签：java, jsf, facelets

我的 facelets web 应用程序中有几个地方正在使用自定义 facelet 函数。出于某种原因，他们觉得很脏，我不知道为什么。StackOverflow 对自定义 facelet 函数的看法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T20:35:16.120

我知道你会怎么想。我认为过度使用这些功能可能是糟糕的设计。但是，在某些情况下，定义自定义 facelet 函数会更容易；因此，您不应立即解雇它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T20:35:59.147

当我点击提交时，我想我明白了。在我们的例子中，我们通常必须使用自定义的 facelet 函数来为我们的 API 对象提供额外的功能。该功能并不真正属于域 API，因此我们创建了自定义 facelet 函数。我们应该在 UI 和 domain-api 之间有一个业务层，而不是使用自定义的 facelet 函数。然后可以将附加功能添加到业务对象。

# javascript - 你如何把放大镜和“搜索”放在搜索输入框中，就像在 StackOverflow 中一样？

> ID：711493
> 
> 赞同：10
> 
> 时间：2009-04-02T20:33:25.113
> 
> 标签：javascript, html, css

假设仅使用 CSS 即可，但想知道是否有人可以共享代码。

猜测放大镜是背景图像，但需要 JavaScript 来删除焦点上的“搜索”。

此外，如何在点击“返回”而不是需要“搜索”提交按钮时提交它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-02T20:38:40.280

涉及多个元素。

使用 Chrome DevTools (F12) 检查这些东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T20:37:34.540

那里有几个问题：

1.  在返回时提交，如果您在表单中输入了一个输入，并且专注于该输入，当您按下 Enter 时，浏览器将默认提交该表单。

2.  文字屏蔽。您可以在 jquery 或任何其他框架中轻松完成此操作。本质上，您将删除焦点上的文本“搜索”，但仅删除该文本，因此如果有类似“foo”的内容，它不会替换它。

满足您的文本屏蔽需求：[文本掩码](http://digitalbush.com/projects/masked-input-plugin/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T07:48:52.523

您可以为此使用新`input`类型。

```
<input type="search" placeholder="Search" results="0" /> 
```

'results' 属性将在 WebKit 浏览器中添加放大镜图标。

更新：2021 年将不再在 FF、Chrome 或 Edge 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-15T00:20:57.600

```
USE THIS: <input type="image" src="/_i/mag.png" alt="Search">

EXAMPLE CODE:
<form class="form-inline my-2 my-lg-0">
  <input type="image" src="data:image/svg+xml;charset=UTF-8, <svg xmlns='http://www.w3.org/2000/svg'><path d='M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z'></path></svg>" alt="Search">
  <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
</form>
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2009-04-02T20:36:27.383

查看 -> 页面源。

说真的，一切都在那里。

# jquery - 创建自己的 CSS 属性是否合法？

> ID：711496
> 
> 赞同：4
> 
> 时间：2009-04-02T20:33:44.363
> 
> 标签：jquery, css, attributes, standards-compliance

我正在为我的网站开发一个窗口应用程序。现在，我将每个单独的窗口设置为网站正文中的一个。我通过在 body 元素的末尾添加适当的代码来添加新窗口，并通过删除该 div 来删除它们。（我将 jQuery 用于底层 JavaScript 架构。）

我发现对于每个窗口，我都希望能够存储一些不直接使用的值。假设我最大化一个窗口，我想保存它的旧位置和大小，这样当我取消最大化它时，它会返回到它的旧位置，而不仅仅是随机的某个地方。所以我真正的问题是，创建自定义 CSS 属性（完全知道浏览器会忽略它们）是否合法，其唯一目的是在每个 div 的基础上保留这样的信息？或者这会是非法的，我应该看看另一种选择吗？

我当然*熟悉*将所有这些保存在一个数组中的方法，这样系统就可以盲目地运行它，但这很可爱，而且容易出错和其他事情，而且使用起来仍然有点棘手。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T20:35:34.873

我会使用**jQuery**的`**data()**`方法来存储临时数据。

```
$('div#window').data('position', { x: 100, y: 200, width: 50, height: 50});
$('div#window').data('state', 'minimized'); 
```

**参考资料**：

*   [http://docs.jquery.com/Core/data](http://docs.jquery.com/Core/data)
*   [http://docs.jquery.com/Core/removeData](http://docs.jquery.com/Core/removeData)

您还可以通过将其存储在 cookie 中或服务器端的会话中来使这些数据持久化，并在页面加载时在客户端上恢复它。这样，即使用户重新加载页面，窗口的位置和状态也将保持不变。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-02T20:36:44.557

jQuery 有一个鲜为人知的特性，叫做[`data`](http://docs.jquery.com/Data). 有了它，你可以这样做：

```
$('#mydiv').data('position', {x: 150, y: 300});

// later
var position = $('#mydiv').data('position'); 
```

如果你不喜欢这个（虽然我觉得它很方便），拥有自定义属性当然没有错，尽管这会使它成为无效代码。

# silverlight - 无能者的 Silverlight 设计资源

> ID：711500
> 
> 赞同：0
> 
> 时间：2009-04-02T20:34:20.663
> 
> 标签：silverlight

从编程的角度来看，我正在稳步推进 Silverlight。我相信我已经到了希望我的应用程序看起来不错开始演示的地步。不必看起来很棒，但不像 2 岁的孩子那样做（尽管 2 岁的孩子可能比我目前的设计技能高出一步）。使用 HTML，您通常可以找到一些设计，归功于作者，然后您就可以使用外观相当不错的 Web 应用程序了。我猜 Silverlight 还太年轻，无法拥有这些资源，或者我只是找不到它们。

像我这样的低级开发人员可以在我的应用程序中塑造任何起点吗？我不需要任何花哨的东西，只需要干净且具有视觉吸引力的东西。如果答案是“对不起，笨蛋，你得付钱给专业人士”，我可以忍受。但是想看看是否还有其他我没有考虑过的途径来创建一个看起来不错的概念证明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T20:42:44.607

查看 famfam 上的免费图标：http: [//famfamfam.com/lab/icons/silk/](http://famfamfam.com/lab/icons/silk/)

特别是丝绸的真的很光滑，过去帮了我很多。好看的图标和按钮对改善你的应用程序的外观大有帮助。

# sharepoint-2007 - 使用 SyncToy 将 ClearCase 与 SharePoint 3.0 同步的权限问题

> ID：711510
> 
> 赞同：2
> 
> 时间：2009-04-02T20:35:24.810
> 
> 标签：sharepoint-2007, integration, clearcase

所以我试图设置一个简单的单向同步，从动态 ClearCase 视图到 MOSS 文档库。我正在使用 SyncToy 1.4 作为我的同步工具，它在将新文档从 ClearCase 复制到 SharePoint 时似乎工作正常，但是当我尝试用新版本覆盖文件或尝试删除 SharePoint 中的现有文件时它会引发错误因为它在 ClearCase 中被删除了。我正在使用“Echo”同步设置，因此 SharePoint 应始终反映 ClearCase 中的更改。

我为此过程创建了一个自定义活动目录用户，并为该用户提供了对 SharePoint 文档库的完全控制权，并且可以在我登录到服务器时从文档库的资源管理器视图中手动进行这些编辑/删除“同步用户”但是，当我运行同步玩具时，它无法说明 SharePoint 中的文档是“只读”的。我的问题是 synctoy 不应该以“同步用户”的身份运行，它的行为不应该与我在资源管理器视图中手动操作 SharePoint 中的文档时作为“同步用户”的行为相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T20:46:31.023

这是否类似于[Office 2003 和 2007 Office 文档在 Internet Explorer 中以只读方式打开](http://support.microsoft.com/kb/870853)，其中 SharePoint 可能会将对其文件的同步访问视为“浏览访问”（始终以[只读方式](http://spsstuff.blogspot.com/2006/07/office-2003-documents-open-in-read.html)打开）？

如果没有，诀窍是确保您的同步玩具进程确实以“同步用户”身份运行。

定期使用 ClearCase，我没有看到为源存储库提供动态视图的任何副作用。

根据[在 Windows SharePoint 中管理数据/更新子内容类型](http://msdn.microsoft.com/en-us/library/ms442695.aspx)，

> 如果您尝试对标记为只读的子内容类型执行下推操作，则下推操作将失败，除非您将父内容类型设置为读/写作为下推操作的一部分。

含义：您可能想要检查与包含您尝试删除的文件的父目录（在 Sharepoint 中）关联的权限。

# ajax - Ajaxifying Struts2 应用程序

> ID：711529
> 
> 赞同：1
> 
> 时间：2009-04-02T20:39:19.187
> 
> 标签：ajax, struts2

我刚开始开发一个基于 Struts2 框架的应用程序。我来自一个具有许多 Ajax 功能的 .Net 应用程序，例如使站点的其余部分变暗并显示对话框“请在 X 发生时稍候”......自动完成和其他 ajax 功能。

我在谷歌上搜索了 Struts2 的 Ajax 插件，但没有找到任何看起来值得的东西。我是使用 jquery 及其插件的唯一选择吗？这也是你们中的一些人看到的模式吗？希望 Java 应用程序不会因为无法处理 ajax 而很快消亡……与 .Net 相比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T22:07:56.990

虽然我已经有一段时间没有使用 Struts2，但我很确定它支持多个 Ajax 选项……我想您在[Struts 2 文档](http://struts.apache.org/2.x/docs/ajax.html)中查看了各种 Ajax 选项？

根据您想要做什么，有 Ajax 标签，虽然我没有使用它，但我相信它类似于 ASP.NET Ajax 功能。还有 Dojo 插件，它再次提供服务器端标签以绑定到 Dojo（javascript 库）控件，但我刚刚注意到它已被弃用......

如果您正在做更复杂/自定义的事情，我在 JSON 插件上取得了很好的成功，它可以让您将 JSON 发送到服务器并对其进行反序列化并直接绑定到您的操作，然后将您的结果序列化回 JSON 以进行响应. 这允许您使用 jQuery（或您选择的 javascript 库）并直接使用 JSON 在两个方向上与服务器通信。提供了一个非常干净和简单的解决方案，因为最终结果允许您直接在您的 javascript 代码中有效地使用您的业务对象/数据。

# javascript - javascript：如果变量不存在，则定义一个变量

> ID：711536
> 
> 赞同：63
> 
> 时间：2009-04-02T20:40:38.137
> 
> 标签：javascript, variables

我觉得我正在尝试做一些超级简单的事情，但只是对此很愚蠢。

我要做的就是查看以前是否设置了变量，如果没有，则将其设置为默认值....这是一个示例：

```
if(!embed_BackgroundColor) {
    var embed_BackgroundColor;
    embed_BackgroundColor = "#F4F4F4";
} 
```

所以，一旦你停止嘲笑我的代码......为什么无论如何它都会覆盖变量？

请拯救我的神经；）

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2014-03-07T11:49:12.303

专业风格：

```
var SomeVar = SomeVar || 'Default Value'; 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2009-04-02T20:42:21.220

```
if (typeof variable === 'undefined') {
    // variable is undefined
    // eg:
    // var variable = "someValue";
} 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2009-04-02T23:38:44.557

在这种情况下，使用三元运算符将是一个很好的编码实践。此外，与 typeof 进行比较时，您不需要三个等号。这是最简洁的解决方案：

```
b = typeof(b) == 'undefined' ? 0 : b; 
```

这希望能节省你的手一些时间。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2011-05-22T23:55:50.073

要真正回答您为什么会发生这种情况的问题 - 仅仅两年零一个月多一点：D - 这是因为[可变提升](https://stackoverflow.com/questions/1528320/javascript-variable-scope-question)。

基本上，在全局范围内或函数内部执行代码之前有一个阶段，在该阶段中扫描所有代码`var`和`function`声明（不要与函数*表达式*混淆，但这是另一回事）。
然后在当前范围内声明所有这些变量和函数，然后代码*才*真正运行。

无论它们在代码中的位置如何，都会发生这种情况，范围对应于函数体，而不是语句块。是什么让这更加违反直觉，即使您在声明中为变量设置了初始值，[它们仍将保持“空”，直到在正常执行流程中再次到达声明](http://wtfjs.com/2010/02/15/hoisting)。

所以当你写：

```
if(!embed_BackgroundColor) {
    var embed_BackgroundColor;
    embed_BackgroundColor = "#F4F4F4";
} 
```

实际发生的是：

1.  扫描代码以获取`var`声明。`embed_BackgroundColor`在此范围内声明，无论它是否已声明。它的初始值是未定义的。

2.  代码的执行开始。`if`运行语句。变量*已*声明，但其值未定义，因此条件为真。使用`typeof`不会帮助您在此处区分未声明和已声明但尚未设置的变量。无论如何，这没有什么区别。

3.  通过`var`正常的代码流到达声明。如果你给变量一个初始值，它现在就会被设置。在这种情况下，什么都不会发生。

4.  `embed_BackgroundColor`设置为值`"#F4F4F4"`。

所以，底线是：你可以`typeof variable == 'undefined'`像其他答案中看到的那样使用，甚至可以像最初使用的那样使用简单的“！变量”，但不要使用`var`，否则会破坏一切。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-07-03T19:12:59.300

如果它是一个全局变量，我喜欢这样做：

```
var defineMe = window.defineMe || 'I will define you now'; 
```

使用窗口命名空间很重要，因为引用未定义的变量会导致非常严重的错误，但引用未定义的属性不会。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2011-11-02T05:11:03.580

我更喜欢这种语法：

`embed_BackgroundColor = embed_BackgroundColor || "#F4F4F4"`

没有比这更简单的了！即使它已经 var'd，它似乎也能工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-12-02T23:16:21.197

如果 embed_BackgroundColor 是函数中未传递的参数，则可以使用

```
embed_BackgroundColor ? embedBackgroundColor : embed_BackgroundColor = "#F4F4F4"; 
```

全功能示例

```
function colorFunctionThing(embed_BackgroundColor) {
  embed_BackgroundColor ? embed_BackgroundColor : embed_BackgroundColor = "#F4F4F4";
  console.log(embed_BackgroundColor);
};
colorFunctionThing(); 
```

输出

```
#F4F4F4 
```

不完全是您要找的东西，但仍然很高兴知道。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-11T16:27:25.553

最佳选择：

```
if (typeof someVar === 'undefined') someVar = someValue; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-02T21:25:59.353

我认为您发布的代码应该可以工作。除非你的原始值为 0。

问题出在其他地方。

我猜您在代码范围之外定义了“embed_BackgroundColor”。当您运行代码时，该变量在您的代码范围内未定义，并将被分配默认值。

这是一个例子：

```
var embed_BackgroundColor = "#FF0000";

(function(){
  if(!embed_BackgroundColor) {
    var embed_BackgroundColor;
    embed_BackgroundColor = "#F4F4F4";
  }
  alert(embed_BackgroundColor); // will give you #F4F4F4
})();

alert(embed_BackgroundColor); // will give you #FF0000; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-02T21:34:42.157

我更喜欢类似 PHP 风格的通用解决方案：

`function isset(x) { return typeof(x)!='undefined'; }`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-02T23:21:14.023

我关注了 Chris West 的博客，看到他在[http://gotochriswest.com/blog/2012/07/02/javascript-define-if-undefined/](http://gotochriswest.com/blog/2012/07/02/javascript-define-if-undefined/)上发布了一个非常酷的方法。

基本上，你有`define`函数的定义，然后像这样使用它：

```
define("embed_BackgroundColor", "#F4F4F4"); 
```

如果尚未定义，上述代码将在全局上下文中定义 enbed_BackgroundColor。Chris 使用的示例更有用，如下所示：

```
alert("jStuff is " + (typeof jStuff == "undefined" ? "un" : "") + "defined.");

define("jStuff.alert", function(msg) {
  alert(msg);
  return msg;
});

alert("jStuff is " + (typeof jStuff == "undefined" ? "un" : "") + "defined.");

var str = jStuff.alert("Show and save this message."); 
```

*   第一个警报语句将显示“jStuff 未定义”。
*   第二条警报语句将显示“jStuff 已定义”。
*   最后的警报语句将显示指定的警报，然后该字符串将存储在`str`变量中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-19T10:06:50.227

因为如果是, , , , , 或，您的`if`块将执行。`embed_BackgroundColor``false``0``""``null``undefined``NaN`

但是`embed_BackgroundColor`，如果它已经被分配给另一个**非空字符串**，则不应被覆盖......或者至少，它不在我的尽头。

正如 Aaron Qian 所指出的，这可能是一个范围冲突的例子。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2020-02-19T11:47:12.690

```
if(embed_BackgroundColor == "" || embed_BackgroundColor == 'undefined' || embed_BackgroundColor == null){
} 
```

# code-organization - 您如何组织大型项目的课程？

> ID：711539
> 
> 赞同：1
> 
> 时间：2009-04-02T20:40:54.110
> 
> 标签：code-organization, project-organization

我们的应用程序中有很多功能可以非常具体地描述为一个模块。通常有某种设置对话框，然后当用户单击确定时，它会配置一个进程来运行并运行该进程。有时他们更投入，用户会打开新对话框并在对话框上工作一段时间，做许多对底层数据库进行更改的事情。

我通常会得到几个标准课程

```
ConfigPanel.cs
ConfigPanelData.cs
ProcessRunner.cs
ApiWrapper.cs (for calling the process from somewhere else) 
```

如果我有更多端到端模块，它可能是 WorkerPanel.cs WorkerData.cs SetupOptions.cs（面板状态在运行之间保持）Lib/WhateverBackendStuffINeedToSupportModule ApiWrapper

现在每个都有文件夹：

```
UI/Panels/
    Module1Panel.cs
    Module2Panel.cs
UI/PanelData/
    Module1PanelData.cs
    Module2PanelData.cs
UI/PanelManagers
    Module1PanelManager.cs
    Module2PanelManager.cs
Core/Module1/
    Module1.cs
    Module1Helpers.cs
Core/Module2/
    Module2.cs
    Module2Helpers.cs 
```

如您所见，一切都真正展开了。对于 50 多个模块，这些文件夹并没有真正组织起来。即使按子系统将它们分解，它们仍然是一团糟。将所有内容放在一起以便所有内容都按功能而不是类类型分隔会是糟糕的设计吗？

```
Module1/
    Module1Panel.cs
    Module1PanelData.cs
    Module1PanelManager.cs
    Module1PanelLib.cs
    Module1PanelWrapper.cs
Module2/
    Module2Panel.cs
    Module2PanelData.cs
    Module2PanelManager.cs
    Module2PanelLib.cs
    Module2PanelWrapper.cs 
```

你如何组织你的课程，有什么优点/缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T20:56:42.373

> 将所有内容放在一起以便所有内容都按功能而不是类类型分隔会是糟糕的设计吗？

没有一般规则，这取决于情况、您的个人偏好和代码中的更改模式。但是，我建议执行以下操作：

*   在超类中保留尽可能多的通用代码以消除任何冗余。也许那时甚至不需要某些子类。
*   我不确定“模块”是什么意思，但我建议在同一个项目中使用命名空间+子目录来分隔这些东西，而不是使用单独的程序集。仅将程序集用于部署分离目的和类似的东西。
*   您提到的那些“帮助”类听起来有点代码异味。它们可能违反了 OO 原则。查看此链接了解更多信息：http: [//blogs.msdn.com/nickmalik/archive/2005/09/06/461404.aspx](http://blogs.msdn.com/nickmalik/archive/2005/09/06/461404.aspx)。也许您可以重新组织代码，减少对此类类的需求，同时从更干净的 OO 设计中受益？

# excel - Excel 合并和格式化

> ID：711541
> 
> 赞同：1
> 
> 时间：2009-04-02T20:41:19.150
> 
> 标签：excel, merge, format

简而言之，我正在寻找一种快速的方法来执行以下操作。
我想在下面格式化一个 excel 电子表格：

```
      A B C D
    1 foo bat abe 测试
    2 foo 蝙蝠猫测试
    3 foo 蝙蝠狗测试
    4 条哞帽女孩
    5 巴哞蝙蝠女孩

```

看起来像这样：

```
      A B C D
    1 foo bat abe，猫，狗测试
    2 bar moo 帽子，蝙蝠女孩

```

A、B、D 等列将在每一行中为每个唯一系列重复相同的数据。
在每一行中，C 列总是不同的。
C 列需要合并在一起，以逗号分隔。

欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T21:27:52.563

您可以使用 VBA，但我不确定这是否符合您对“简单”的定义。就像是：

```
Range("C1").Select
Do Until Activecell.Formula = ""
   ''if my row matches the row below
   If  ActiveCell.Offset(0,-2).Value = ActiveCell.Offset(1,-2).Value _
   And ActiveCell.Offset(0,-1).Value = ActiveCell.Offset(1,-1).Value _
   And ActiveCell.Offset(0, 1).Value = ActiveCell.Offset(1, 1).Value Then
       ''merge and collapse
       Activecell.Formula = ActiveCell.Formula & ", " & _
                            ActiveCell.Offset(1,0).Formula
       ActiveCell.Offset(1,0).EntireRow.Delete
   Else
      ''Go down a row
       ActiveCell.Offset(1,0).Select
   End If
Loop 
```

一次向下遍历列表一行，如果该行看起来匹配，则手动连接该值。否则，它只会下降一行。

# java - Google Web Toolkits 如何与 Servlet 一起使用？

> ID：711545
> 
> 赞同：4
> 
> 时间：2009-04-02T20:42:12.470
> 
> 标签：java, tomcat, gwt, servlets

我正在考虑使用 Java 和 Google Web Toolkit 构建一个 Web 应用程序，但我有一些问题。

我假设当有人访问诸如 之类的 URL 时`http://site.com/Signup`，将加载 Signup servlet，它将执行所有必要的工作并将请求转发到将显示 HTML 和 Javascript 代码的 JSP。

如果某个 javascript 组件依赖于 GWT 组件，则会从`<script type='...'></script>`标签内链接到该组件。

如果这是真的，那么是否可以将 GWT 代码放在同一个项目中？还是我需要创建 2 个项目，一个用于 Servlets/服务器端代码，一个用于 GWT？

我问这个的另一个原因是，当我通过 Netbeans 或 Eclipse 创建一个新的 Dynamic Web 项目时，它会创建很多文件夹，例如 build、dist、src、web、meta-inf 等（我想这些是由于TomCat），而当我为 GWT 创建项目时，它会创建一些不同的文件夹。所以我的问题是，这两者可以合并到一个项目中吗？如果可以，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:55:49.893

这是一个关于在 servlet 中使用 GWT的[教程。](http://lkamal.blogspot.com/2008/09/java-gwt-servlets-web-app-tutorial.html)

# asp.net - 如何在 ASP.NET 中模拟网站登录，然后从页面中抓取一些数据

> ID：711556
> 
> 赞同：1
> 
> 时间：2009-04-02T20:43:13.747
> 
> 标签：asp.net, screen-scraping

是否有人对在 ASP.NET 代码中执行以下操作有任何建议：

1) 使用用户名和密码登录受密码保护的站点（目标站点不一定是 ASP.NET）

2) 导航到特定页面和/或执行搜索

3）从页面中提取特定数据（这是简单的部分）

尽管使用 API 会很好，但源站点不提供此功能。

登录非常简单（用户名、密码、提交按钮）——没有验证码等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:48:02.457

您可以使用[System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient(VS.80).aspx)类执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:48:45.450

看看我对这个问题的回答：
[用同一个 CookieContainer 冲浪](https://stackoverflow.com/questions/635330/surfing-with-the-same-cookiecontainer)

.Net 中内置了一个 WebClient 类，但它不太擅长通过身份验证障碍，所以我前段时间写了它来帮助完成繁重的工作。不幸的是，您仍然需要研究响应以了解要发送哪些请求以及如何解析结果。并确保阅读我的免责声明：坦率地说，我的*部分*代码不是很好，它在 VB.Net 中（这对某些人来说是个问题）。但主要是它工作得很好。

# css - 变量化 CSS 类？

> ID：711558
> 
> 赞同：0
> 
> 时间：2009-04-02T20:44:04.743
> 
> 标签：css

> **可能的重复：**
> [避免 CSS 中的重复常量](https://stackoverflow.com/questions/30170/avoiding-repeated-constants-in-css)

我想在一个类中包含一个类——有点像对一个类进行变量化——这样我就可以定义一次并在整个工作表中使用它。如果我改变颜色，它会改变一切。

```
.myFontColor{color:blue;}
.myTitle{font-size:large; myFontColor}
.myHeader{font-weight:bold; myFontColor} 
```

我认为这样做的唯一方法是。在定义中包含每个类名，但如果我在工作表中有 20 或 30 个项目引用该颜色，它会很快变得丑陋。

```
.myFontColor, .myTitle, .myHeader{color:blue;}
.myTitle{font-size:large;}
.myHeader{font-weight:bold;} 
```

或者在我创建元素时列出每个类，这也有点混乱。

```
<div class="myFontColor myTitle myHeader"> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T20:54:30.303

我能想到的唯一方法是使用 javascript 动态分配属性。例如，列出您想要配置的所有属性（例如`color, font-size, font-weight`）和您想要配置的所有类的列表（例如`.myHeader`、`myTitle`等）。然后做这样的事情：

```
for (x=0; x< cssClasses.length; x++)
{
  addAttribs(cssClasses[x]);
}

function addAttribs(class)
{
   $("." + class).css("color","#444");
   $("." + class).css("font-weight","bold");
   //And so on..
} 
```

这可能是您可以获得的最接近的值，并且它具有存储在一个函数中的所有属性的优势，因此如果您在那里更改它，它将在其他任何地方更新。

编辑：顺便说一句，我在函数中使用[Jquery](http://jquery.com)`addAttribs()`来轻松访问和设置 css 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T20:47:52.143

定义元素时可以编写多个类：

```
<div class="blue w210pt">
</div>
<p class="green w210pt">
</p>

<style>
.green{color:green;}
.blue{color:blue;}
.w210pt{width:210px;}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T20:48:27.010

正如您所怀疑的那样，您不能以直接的方式做您所描述的事情——您需要使用 CSS 的级联方面来获得您想要的东西。但是，我认为您可能在某种程度上滥用了 CSS。您应该定义*语义*，然后将您的*演示文稿*连接到这些语义。例如，看到一个类似的类`.myFontColor`将是一个很大的暗示，表明您并没有真正使用类来表示语义（尽管我认识到这可能对于示例进行了简化）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T23:53:30.980

您还可以使用服务器端解决方案，如 php（或您有权访问的任何其他解决方案）。

使用 php，您可以将样式表保存为 php 文件，每次请求时都会“执行”该文件。您可以将所有变量放在最上面并在需要它们的地方回显它们。

浏览器看到一个普通的样式表，但服务器需要做一些额外的工作。而且它并没有真正提高样式表的可读性......

不是一个非常优雅的解决方案，但它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T20:46:56.077

目前在 CSS 中无法使用变量（根据您的需要）。您必须像您所做的那样使用 Cascade，并在定义中包含所有类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T20:48:14.077

您可能想看看[Sass](http://haml.hamptoncatlin.com/docs/rdoc/classes/Sass.html)，它来自 Rails 社区，它使您使用稍微不同的语法，但允许像这样的一些智能。如果您不使用 Ruby/Rails，您仍然可以使用 Sass 作为命令行预处理器将您的 Sass 文件转换为 CSS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T21:01:05.530

如您所知，不重复声明的最简单解决方案是组合几个类。

也许你在寻找[css 变量](http://www.codeproject.com/KB/aspnet/CSSVariables.aspx)？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T23:55:37.823

一种解决方案是使用 PHP 样式表：

```
<?
header('Content-type: text/css');

$color1 = '#123456';

echo <<<EOS

.myTitle {color: $color1}

EOS;
?> 
```

# apache-flex - Flex 应用程序加载缓慢，没有进度条

> ID：711559
> 
> 赞同：0
> 
> 时间：2009-04-02T20:45:17.440
> 
> 标签：apache-flex, preloading

我有一个 Flex 应用程序。有时当您查看它时，它完全符合预期。然而，有时当您查看页面时，它只是空白一分钟，没有进度条或任何等待指示。进度条在 flex 中应该是自动的。我想解决这个问题，因为我担心它会导致我们失去很多销售。如果它是一个 Flex 错误并且没有修复，有没有办法我可以将 Flex 应用程序定位在一些文本上，上面写着“正在加载..请稍候”，然后当应用程序加载时它会覆盖它？如果指示等待，我需要给用户一些排序，60 秒太长了，没有任何迹象表明正在加载。

更新：对于某些用户来说，显然它根本没有加载，直到刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T21:04:22.883

如果您使用的是自定义预加载器，那么这可能是问题所在。尝试将自定义切换为默认值。在预加载器显示加载进度条之前，必须加载 SWF 文件的完整第一帧。因此，您的第一帧可能非常大。如果这些信息都没有帮助，那么最好的办法是尝试创建一个可重现的测试用例并[提交一个错误](http://bugs.adobe.com/flex)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T21:09:57.333

我认为尝试下载不存在的“crossdomain.xml”文件正在超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-11T18:13:29.143

我知道这是什么，在 IE 中，直到您将鼠标悬停在 flex 应用程序上才会出现。一个解决方法是像这样设置焦点：

```
<script type="text/javascript">
function setFlexFocus()
{
document.getElementById('EverlonBuilder').focus();
}
</script>
</head>

<body onload="setFlexFocus()"> 
```

# java - 以编程方式控制 Windows Media Player，最好使用 Java

> ID：711560
> 
> 赞同：2
> 
> 时间：2009-04-02T20:45:40.387
> 
> 标签：java, windows-media-player

我正在向已经广泛部署的现有 Java 应用程序添加功能。（因此，除非我有*非常*令人信服的理由，否则我无法触及一些设计决策。）该应用程序控制一台 PC，向小型本地电视网络广播音频和视频。目前，它主要播放静态幻灯片，但也可以根据客户的意愿播放背景音乐。背景音乐（CD、本地音乐文件、互联网广播等）由 Windows Media Player 处理。

我目前的项目是为静态幻灯片添加旁白。当旁白播放时，我需要发送某种 STFU 信号来暂时静音或静音 WMP 输出。所以我的核心问题是：实现这一目标的最佳方法是什么？

我知道 WMP 有一个 ActiveX 接口，但我没有使用 ActiveX/COM 的经验。当然，我可以（并且可能会）学习，但在这一点上，我还不能很好地区分简单的解决方案、技术上可行但痛苦的解决方案，以及实际上是死胡同的“解决方案”。

基于 Java 的解决方案是否需要我像 Jacob 一样使用 Java->ActiveX 桥接器？还是那是矫枉过正？

或者，我是不是完全找错了树？我当然愿意部署完全用另一种语言编写的小型命令行可执行文件，然后通过 Runtime.exec() 访问它们。这是（比如说）VisualBasic 让污垢变得简单的那种东西吗？（VB 也不在我的技能范围内，但如果它是适合这项工作的工具，我会学习。我只是不知道它是否是正确的工具。谷歌给了我很多将 WMP 整合到 VB GUI 中的例子; VB 命令行脚本，没那么多。）

最后，最后一点：WMP 实例将由用户启动，而不是由 Java 应用程序启动。不知道这是否有区别，但认为值得一提。

我提前感谢任何人可以提供给我的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:50:13.230

您最好的选择是使用 Jacob（或其他一些 Java/COM 桥）；我假设您不想只是静音系统音量。

# oracle - Oracle 文档生成工具

> ID：711575
> 
> 赞同：6
> 
> 时间：2009-04-02T20:50:41.343
> 
> 标签：oracle, documentation-generation

我想知道是否有人知道自动生成 oracle 9i 数据库模式文档的好工具。我进行了重新搜索，到目前为止找到了 DBSribe(www.leadum.com)，但我遇到了问题，因为它在执行文档生成过程时给了我一个错误。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-03T12:57:06.637

甲骨文 SQL 开发人员。创建到数据库的连接。右键单击连接| 生成数据库文档

# php - HTML 类与 我正在尝试在 PHP 中设计一个 Form 类。到目前为止，我的 <input> 按钮运行良好。但是 <select> 框让我受阻。我试图找出一种添加 <option> 标签的“通用”方式，但缺乏创造力。我不是要 teh codez，但欢迎实现想法。这是我在超级简单项目中使用的基本框架中的实现：function select($name, $options = array(), $attrs = array(), $showEmpty =

> ID：711580
> 
> 赞同：0
> 
> 时间：2009-04-02T20:52:37.563
> 
> 标签：php, forms, class, select

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T20:54:47.353

这是我在超级简单项目中使用的基本框架中的实现：

```
function select($name, $options = array(), $attrs = array(), $showEmpty = false) {
    $attrs['name'] = $name;
    $attrs['class'] = isset($attrs['class']) ? $attrs['class'] . ' input' : 'input';
    if(isset($this->validation->invalid[$name])) {
        $attrs['class'] .= ' errorinput';
    }       
    $opts = array();
    foreach($attrs as $key => $value) {
        $opts[] = $key . '="' . $value . '"';   
    }
    $htmloptions = array();
    $hasSelected = false;
    foreach($options as $option => $value) {
        if(isset($this->validation->post[$name]) && $this->validation->post[$name] == $option) {
            $hasSelected = true;
            $htmloptions[] = '<option value="' . $option . '" selected>' . $value;  
        } else {
            $htmloptions[] = '<option value="' . $option . '">' . $value;                   
        }
    }
    if($showEmpty) {
        $emptyoption = '<option value=""' . (($hasSelected) ? '' : ' selected') . '>';
        $htmloptions = array_merge($emptyoption, $htmloptions);
    }
    return '<select ' . implode(' ', $opts) . '>' . implode("\n", $htmloptions) . '</select>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T21:43:05.147

这是我不久前制作的一些功能。

```
function formLabel($id, $text, $attr = array(), $escape = true) {
    $attr['for'] = $id;
    return htmlElement('label', $text, $attr, true, $escape);
}

function formSelect($name, $selected, $options, $attr = array(), $escape = true) {
    $attr['name'] = $name;
    if (!isset($attr['id'])) {
        $attr['id'] = $name;
    }
    $options = formSelectOptions($selected, $options, $escape);
    return htmlElement('select', $options, $attr, true, false);
}

function formSelectOptions($selected = null, $options, $escape = true) {
    if ($escape) {
        $options = escape($options);
    }
    array_walk($options, 'formSelectOption', $selected);
    return implode('', $options);
}

function formSelectOption(&$value, $key, $selected)  {
    if (is_array($value)) {
        $attr['label'] = $key;
        array_walk($value, 'formSelectOption', $selected);
        $value = htmlElement('optgroup', implode('', $value), $attr, true, false);
    } else {
        $attr['value'] = $key;
        if (($selected == $key) &&
            (0 === strcmp($selected, $key)) && 
            ($selected !== null)) {
            $attr['selected'] = 'selected';
        }
        $value = htmlElement('option', $value, $attr, true, false);
    }
}

function escape($val) {
    if (is_array($val)) {
        return array_map('escape', $val);
    }
    return htmlspecialchars($val, ENT_QUOTES);
}

function htmlElement($tag, $value, $attr = null, $end = true, $escape = true) {
    if (!is_array($attr)) {
        $attr = array();
    }
    if ($escape) {
        $value = htmlspecialchars($value);
    }
    return "<$tag" . (!empty($attr) ? ' ' : '') . arrayToAttributes($attr) . ($end ? '' : '/') . '>' . $value . ($end ? "</$tag>" : '');
}

function arrayToAttributes($attr) {
    array_walk($attr, '_arrayToAttributes');
    return implode(' ', $attr);
}
function _arrayToAttributes(&$v, $k) {
        $k = escape($k);
        $t = escape($v);
        $v = "$k=\"$t\"";
} 
```

一些测试

```
<html><header><title>Test</title></header>
<body>
<p>
<?php
$arr = array('hoi', 'wee', 'hai', 'Sub' => array('Hi' => 'Hi', 'Lo' => 'Lo'));
echo '<p>', formSelect('aaaa', null, $arr), "</p>\n";
echo '<p>', formSelect('ccc', 'Hi', $arr), "</p>\n";
echo '<p>', formLabel('hello', 'Hello'), ': ', formSelect('hello', 1, $arr), "</p>\n";
?></p>
<p>
<?php
$months = array (1 => 'Januar',
'Februar', 'Mars', 'April', 'Mai',
'Juni', 'Juli', 'August', 'September',
'Oktober', 'November', 'Desember');
echo formLabel('month', 'Month'), ': ', formSelect('month', null, $months), "\n";
echo formLabel('month2', 'Month'), ': ', formSelect('month2', 4, $months), "\n";
?></p>
</body><html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T23:31:15.607

```
function array_drop_down($name, $display_fields, $id_fields, $selected_display_field, $misc = ''){
    $array_dd_html = '<select name="'.$name.'" '.$misc.'>';

    for($i = 0; $i < sizeof($id_fields); $i++){
        if($selected_display_field == $display_fields[$i]){
            $array_dd_html.= '<option selected="yes" value="'.$id_fields[$i].'">'.$display_fields[$i].'</option>';
        }
        else{
            $array_dd_html.= '<option value="'.$id_fields[$i].'">'.$display_fields[$i].'</option>';
        }

    }
    $array_dd_html.= '</select>';

    return $array_dd_html;
}

function sql_drop_down($sql_statement, $name, $display_field, $id_field, $selected_field='',$selected_value='', $misc = ''){
    $result = mysql_query($sql_statement);  
    $numOfCols = mysql_num_rows($result);
    $select_html = '<select name="'.$name.'"'. $misc.'>';
    if($numOfCols > 0){
        for($i = 0; $i < $numOfCols; $i++)
        {
            $id = mysql_result($result, $i, $id_field);
            $display = mysql_result($result, $i, $display_field);
            if($selected_value == $id){
                $select_html.= '<option selected="yes" value="'.$id.'">'.$display.'</option>';
            }
            else{
                $select_html.= '<option value="'.$id.'">'.$display.'</option>';
            }
        }
        $select_html.= '</select>';
    }
    else{
        $select_html = "Error Occured...";
    }
    return $select_html;
} 
```

使用 $misc 变量传入 CSS、id、javascript 或其他任何内容

# c# - 在辅助显示器上启动 WPF？

> ID：711581
> 
> 赞同：5
> 
> 时间：2009-04-02T20:53:03.303
> 
> 标签：c#, wpf

是否有一种简单的方法可以使（全屏）WPF 应用程序在辅助显示器上启动？我知道我可以获得整个虚拟桌面矩形并计算偏移量，但是有更直接的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T20:57:04.837

AFAIK 目前没有办法纯粹使用 WPF 来做到这一点。

但是，您应该能够：

*   使用`**[System.Windows.Forms.Screen](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen(VS.80).aspx)**`类获取有关屏幕的信息

*   重新定位您的窗口：

    `Application.Current.MainWindow.Left = xxx;`
    `Application.Current.MainWindow.Top = yyy;`

# php - 在 AMFPHP 将数据传递到 Flash 之前如何处理 mysql_result 数据

> ID：711582
> 
> 赞同：0
> 
> 时间：2009-04-02T20:53:14.457
> 
> 标签：php, mysql, amfphp

`AMFPHP`在将数据传递到 Flash之前，如何遍历 MySql 结果？

当 Flash 调用服务时，以下代码获取数据

```
$sql = sprintf("SELECT file_type, file_name ..
$result = mysql_query($sql);
return $result; 
```

然后我假设 AMFPHP 处理这个结果资源。

对于检索到的每个文件名，我需要运行一个函数来创建一个新的文件名并将新更新的数据传递给 Flash - 新文件名过期，所以我需要在运行时执行此操作，而不是更改数据库中的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T20:58:02.073

您如何向 AMFPHP 提供数据？为什么在发送之前需要遍历结果？我问这个是因为也许您可以在执行查询时进行处理。

# c# - 我写了一个程序，允许两个班级“战斗”。无论出于何种原因，C# 总是获胜。VB.NET 有什么问题？

> ID：711586
> 
> 赞同：62
> 
> 时间：2009-04-02T20:54:15.983
> 
> 标签：c#, vb.net, compiler-construction, initialization

我写了一个程序，允许两个班级“战斗”。无论出于何种原因，C# 总是获胜。VB.NET 有什么问题？

```
 static void Main(string[] args)
    {
        Player a = new A();
        Player b = new B();

        if (a.Power > b.Power)
            Console.WriteLine("C# won");
        else if (a.Power < b.Power)
            Console.WriteLine("VB won");
        else
            Console.WriteLine("Tie");
    } 
```

以下是玩家： C# 中的玩家 A：

```
public class A : Player
{
    private int desiredPower = 100;

    public override int GetPower
    {
        get { return desiredPower; }
    }
} 
```

VB.NET 中的播放器 B：

```
Public Class B
   Inherits Player

   Dim desiredPower As Integer = 100

   Public Overrides ReadOnly Property GetPower() As Integer
       Get
          Return desiredPower
       End Get
   End Property
 End Class 
```

这是一个基类。

```
public abstract class Player
{
    public int Power { get; private set; }

    public abstract int GetPower { get; }

    protected Player()
    {
        Power = GetPower;
    }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-04-02T21:11:01.480

这里的问题是 VB 在设置其字段值之前调用基本构造函数。所以基类 Player 存储零。

```
.method public specialname rtspecialname 
        instance void  .ctor() cil managed
{
  // Code size       15 (0xf)
  .maxstack  8
  IL_0000:  ldarg.0
  IL_0001:  call       instance void [base]Player::.ctor()
  IL_0006:  ldarg.0
  IL_0007:  ldc.i4.s   100
  IL_0009:  stfld      int32 B::desiredPower
  IL_000e:  ret
} // end of method B::.ctor 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-02T21:10:25.443

将我的评论推广到答案：

我：

> 尝试将每个“电源”写入控制台

恶作剧者：

> C#：100 VB.NET：0

我：

> 正如我所怀疑的那样。看起来 VB.Net 在继承构造函数之前调用 Base 构造函数，因此 VB 的 desiredPower 变量仍然为 0，而 C# 则相反（请记住，文字初始化发生在构造函数的末尾）。

**更新：**
我想找到一些有关该行为的[文档](http://msdn.microsoft.com/en-us/library/ms228387.aspx)（否则，您正在查看的行为可能会随着任何新的 .Net 版本而改变）。从链接：

> 派生类的构造函数隐式调用基类的构造函数

和

> 基类对象总是在任何派生类之前构造。因此，基类的构造函数在派生类的构造函数之前执行。

它们在同一页面上并且似乎是互斥的，但我认为它的意思是首先调用派生类构造函数，但假设它本身在执行任何其他工作之前调用基本构造函数。因此，重要的不是构造函数顺序，而是初始化文字的方式。

我还找到[了这个参考](http://www.csharp411.com/c-object-initialization/)，它清楚地表明顺序是派生实例字段，然后是基本构造函数，然后是派生构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T21:05:22.023

到 B 上的构造函数完成时，两个玩家的私有成员的理论值都将是 100。

然而，由于 C# 的优越内部结构，CLI 通常认为从该语言编译的整数和其他原始值值较高，而从 VB.NET 编译的值较低，即使它们包含相同的位也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-04T14:50:44.603

发生这种情况是因为 C# 首先初始化类字段，然后调用基构造函数。相反，VB 则相反，因此在 VB 中将值分配给 Power 时，私有字段尚未初始化，其值为 0。

# php - 这是创建审计跟踪的最佳方法吗？

> ID：711597
> 
> 赞同：4
> 
> 时间：2009-04-02T20:57:26.567
> 
> 标签：php, mysql, audit

我正在尝试创建一些功能，以跟踪给定用户表单中的数据如何随时间变化的审计跟踪，并在该页面的底部进行了过时的审计。例如：

2009 年 2 月 4 日 21:49 名称从“汤姆”更改为“克里斯”。

我这样做是通过在会话中以当前格式存储数据，然后在保存时检查存储的数据是否有任何差异。如果有，我将数据在最近一次编辑之前的状态存储在一个名为历史的表中，并将新值存储在当前用户表中。

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-02T21:24:39.247

我不确定是否有一种“最佳方法”，有很多变量需要考虑，包括您的开发路径有多远。

通过基于代码和 db-trigger 审计解决方案，我在下面列出了一些评论；我希望你能看到你现在所处的位置（在发展方面）可能会影响这些问题：

*   如果您需要映射更改数据的用户（您通常会这样做），那么 db 触发器将需要以某种方式获取此信息。并非不可能，但需要更多的工作和几种方法来解决这个问题（db 用户执行查询、每个表中的公共用户列等）
*   如果您使用 db 触发器并且依赖从查询返回的受影响的行数，那么您的审计触发器需要关闭此功能，或者修改您现有的代码以解决它们。
*   恕我直言，数据库触发器提供更高的安全性，并提供更轻松的审计自动化途径，但它们并非万无一失，因为任何具有适当访问权限的人都可以禁用触发器、修改数据然后再次启用它们。换句话说，确保您的数据库安全访问权限是严格的。
*   拥有一个历史记录表并不是一个坏方法，尽管如果您要审计多个表的历史记录，您将有更多工作要做（以及要存储的数据），尤其是在重建审计跟踪时。如果有许多表试图写入一个审计表，您还必须考虑锁定问题。
*   为每个表创建一个审计历史表是另一种选择。您只需要审计表中的每一列都可以为空，并存储操作（插入/更新/删除）的日期和时间以及与操作关联的用户。
*   如果你选择单表选项，除非你有很多时间花在这上面，不要太想只审核更新或删除，尽管避免插入可能很诱人（因为大多数应用程序都这样做比更新或删除更频繁），重建审计历史需要相当多的工作。
*   如果您的服务器或数据跨越多个时区，则考虑使用适当的日期时间类型来存储和重建时间线，即以 UTC 存储审计事件日期以及包括时区偏移量。
*   这些审计表可能会变得很大，因此如果它们开始影响性能，请制定策略。选项包括将表分区到不同的磁盘、归档等。基本上现在就考虑这一点，而不是当它成为问题时 :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T21:02:09.007

一个建议；这在数据库触发器中相对容易做到。在这种情况下，您永远不必担心运行更新的代码是否记得添加历史记录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-02T21:24:22.197

我一直喜欢使用一个表，而不是将其分解为“活动”表和“历史”表。我在这些表上放了 4 列，所有时间戳：创建、删除、开始、结束。“创建”和“删除”是不言自明的。“开始”和“结束”时间戳用于记录实际上是“活动”记录的时间。当前活动的记录将具有之前的“开始”时间`now()`和`NULL`“结束”时间。通过分离“创建”和“开始”时间，您可以安排将来发生的更改。

与两表设计相反，这种设计允许您轻松编写将自动对正确数据进行操作的查询。假设您的表随着时间的推移存储税率......您不希望在计算中使用税率的所有查询都具有额外的复杂性，即在处理旧发票时决定在历史表中查找内容，例如例如...您可以在一个查询中查找发票创建时的有效税率，无论它是否是当前税率。

这个想法最初不是我的（尽管在阅读之前我确实自己重新发明了这个粗略的想法）......你可以在这本[在线书籍](http://www.cs.arizona.edu/~rts/tdbbook.pdf)中找到关于它的详细讨论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T21:01:24.513

会话参与让我有点警惕（当两个用户同时处理相同的数据时，你确定你处理得当吗？），但总的来说，是的，保留历史表是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T21:19:01.743

我还会考虑插入或更新时的数据库触发器，以将更改详细信息（谁、何时、什么、之前的值、之后的值）记录到单独的审计表中。这样您就知道，即使直接使用数据库在您的应用程序之外更改数据，它仍然会被拾取。

您可能还想做一些事情来检测数据是否在您的应用程序之外更改，例如计算记录的哈希或 crc 并将其存储在某处的字段中，然后在读取数据时检查它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T22:57:59.383

我认为您的建议将涉及编写大量代码/元数据以启用对象/记录的比较，以便您获得业务级别的审计。

或者，数据库触发器可能无法让您对所发生的事情有足够的了解。如果您很少使用审计以致重新创建业务意义的努力是可以接受的，这可能是可以接受的。

这似乎也是 AOP（方面）的一个很好的应用程序，您可以在对象模型上使用反射来转储有意义的东西，而无需大量元数据。

# c# - 如何将所有行以及列标题从数据网格获取到列表

> ID：711598
> 
> 赞同：1
> 
> 时间：2009-04-02T20:58:01.713
> 
> 标签：c#

我目前正在研究wingrid。在那..在数据显示在wingrid中之后，我想将网格中的所有行带到新列表中，包括列标题。

在 Windows 数据网格中，我们将采用这样的列标题。

列表列 = 新列表（）；// 填充 foreach (Datagrid.Columns 中的 ColumnHeader 列) { cols.Add(column); }

但在 wingrid 中没有名为 columnHeader 的类...

请告诉我如何将列名以及网格中的行添加到新列表中。

问候，

拉姆 N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T21:31:11.260

如果您使用默认的 System.Windows.Forms.Datagrid，那么它将是[DataGrid.TableStyles](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.tablestyles.aspx)属性中活动[DataGridTableStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridtablestyle.aspx)的[GridColumnStyles](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridtablestyle.gridcolumnstyles.aspx)属性中保存的[DataGridColumnStyle](http://msdn.microsoft.com/en-us/library/7dyk6053.aspx)对象的[MappingName](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridcolumnstyle.mappingname.aspx)或[HeaderText](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridcolumnstyle.headertext.aspx)属性。

如果“wingrid”是指 Infagistics WinGrid (Infagistics.Win.UltraWingrid)，那么[UltraGrid](http://help.infragistics.com/Help/NetAdvantage/NET/2008.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v8.2~Infragistics.Win.UltraWinGrid.UltraGrid.html)对象的 Layouts 集合中的活动[UltraGridLayout](http://help.infragistics.com/Help/NetAdvantage/NET/2008.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v8.2~Infragistics.Win.UltraWinGrid.UltraGridBand.html)的 Bands 集合中的活动[UltraGridBand的 Columns (a](http://help.infragistics.com/Help/NetAdvantage/NET/2008.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v8.2~Infragistics.Win.UltraWinGrid.UltraGridLayout.html) [ColumnsCollection](http://help.infragistics.com/Help/NetAdvantage/NET/2008.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v8.2~Infragistics.Win.UltraWinGrid.ColumnsCollection.html) ) 属性似乎就是你的意思'在之后。

# content-management-system - 程序员协作系统

> ID：711601
> 
> 赞同：3
> 
> 时间：2009-04-02T20:58:31.057
> 
> 标签：content-management-system, collaboration

您是否曾经遇到过这样的问题：有一天您在咖啡机前遇到了一群程序员，但您不知道他们到底在做什么？

您是否曾经遇到过您非常确定公司中的某个人以前已经解决过的问题，但您不知道是谁以及如何找出答案？

这些是我想解决的一些挑战，但是如何解决呢？有没有像样的“程序员协作软件”，提供博客、论坛、代码片段文件区、文档、白皮书，当然还有知识库等等？我们有 Sharepoint，但我认为它不合格。

任何的想法？建议？我认为以前一定有人解决过这个问题，但我怎么知道呢？

### 有关的：

> [在线协作环境（不仅面向开发人员）](https://stackoverflow.com/questions/575007/online-collaborative-environment-not-only-dev-oriented)
> [您知道哪些在线协作网站？](https://stackoverflow.com/questions/236091/what-online-collaboration-sites-do-you-know)
> [您如何与其他编码人员实时协作？](https://stackoverflow.com/questions/510163/how-do-you-collaborate-with-other-coders-in-real-time)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T21:13:39.260

不如从你的隔间里站起来说“嘿！有没有人……”。

公平地说，更非正式的东西可能会更好。正式的事情需要时间。人们没有时间。这是发展的二分法之一。我们有时间打断，但没有其他时间。

我建议仅依靠社交网络。即“嘿弗兰克，你有没有……？” “嗯，不，但鲍勃可能……”。

由 AIM 或内部 IRC 增强以帮助开始对话，然后您可以走过去或打电话解决问题。

至于知道其他人在做什么，嗯，这基本上就是饮水机、午餐时间和内部社交的用途，对吧？除非你是人事主管。

公司越大，重复劳动的机会就越大。同时，你的时间基本上是在你的项目上，而不是他们的项目上。

如果你有一个公共的 SVN，那么也许你也可以抓取它。

关键是，依靠有机系统而不是僵化的系统，我认为您将有更大的成功机会找到快乐的媒介。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T21:03:53.493

为什么不使用一些 Wiki 引擎？也许通过一些额外的插件它可以满足您的需求。

另请查看[维护程序员 Wiki](https://stackoverflow.com/questions/247967/maintaining-a-programmer-wiki)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T21:07:53.203

我与最多 5 人的小团队一起工作。

就个人而言，我喜欢[unfuddle](http://unfuddle.com)。

以下是其他关于“协作”问题的有趣输入的 SO 问题：

> [在线协作环境（不仅面向开发人员）](https://stackoverflow.com/questions/575007/online-collaborative-environment-not-only-dev-oriented)
> [您知道哪些在线协作网站？](https://stackoverflow.com/questions/236091/what-online-collaboration-sites-do-you-know)
> [您如何与其他编码人员实时协作？](https://stackoverflow.com/questions/510163/how-do-you-collaborate-with-other-coders-in-real-time)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T21:20:53.297

哇，和好人在一起真好。

我的工作中也有类似的情况。就我而言，我是一名“软件任务经理”，我正在努力寻找在其他项目中担任我角色的其他人。每当我遇到一个，体验很棒，我学到了很多好的技巧——但我希望这种情况更频繁地发生。

我的公司也有 SharePoint，所以很高兴听到其他人在连接这个工具时遇到同样的问题，理论上是关于连接和共享信息。

我正在尝试收集一些东西，看看有什么用。到目前为止，通过电子邮件和我们的内部 IM 系统实现的人与人之间的联系是最好的联系——但这涉及到一个人对人的邀请。

我想到的其他东西：

*   **通过 Sharepoint 写博客**- 仍然是一个挑战，因为任何公开的事情都涉及到一定程度的关心和机智，而我想与他人联系的事情并不适合写博客所需的必要水平的企业外交。
*   **SharePoint 站点**- 对于一个主题区域 - 我们公司有几个，我们将看看它们的工作情况。最好有一个“所有者”组，为其他人提供一些基本级别的内容以供养。必须有人先。
*   **公司公告牌**——我们实际上有这些。大多数情况下，他们有一次性事件的通知。但我们拥有的一件事是关于特定技术主题的“午餐和学习”会议。类似的关于某个问题或技术领域的圆桌会议可能很有价值——尽管它只会吸引当地校园的人。我开始做一个轻量级的版本——我每个月都和一个同行的朋友共进午餐，我们正在邀请其他人。迟早，我希望我们会成为软件任务管理器支持小组，以及志趣相投的人来这里闲逛的自然场所。
*   **企业社交网络**- 我一直在说服 SharePoint 门户网站的人（但无济于事）认为 SharePoint 的困难在于缺乏人际关系。LinkedIn、LiveJournal、Tribe 和 Facebook 等社交网络都有“朋友”、“人脉”等概念。通过人脉，人们形成基于兴趣和共享朋友的可遍历网络。这是我认为 SharePoint 最缺乏的。

对于寻找对我当前任务有所了解并且可能能够提供帮助（或至少同情）的人的真正模棱两可的需求，我认为最后一个是最重要的。作为人类，我们不仅要获得所需的信息，还要能够根据我们对信息来源的了解来判断它。Wiki 非常适合提供事实答案，但与其他人交互以具有比纯事实更混乱的特定交互质量的原因。要在在线环境中实现这一点，您需要与他人建立联系、轻松的主题定义，并有机会控制某些事情的访问权限，这样人们就可以畅所欲言，而不必担心公司的恐惧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T21:06:46.983

我认为[Trac](http://trac.edgewall.org/)及其大量[插件](http://trac.edgewall.org/wiki/TracPlugins)非常适合协作。

把它想象成程序员的facebook。

*   维基
*   门票
*   初学者的所有 wiki 编辑、票证更改和源代码管理签入的时间表。
*   RSS 和 ICal 支持。
*   疯狂数量的插件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T22:44:44.330

看看[这些由](http://37signals.com/)[Ruby on Rails](http://rubyonrails.org/)的创建者开发的软件。

# c++ - 将控制栏/窗格停靠到 CMDIFrameWndEx？

> ID：711603
> 
> 赞同：0
> 
> 时间：2009-04-02T20:59:13.537
> 
> 标签：c++, mfc, mfc-feature-pack

在我们的一个应用程序中，我使用了一些 MFC 类来允许停靠侧边栏窗口，大致如下：

```
CDialogBar* bar = new CDialogBar;
bar->Create(this, IDD, WS_CHILD | WS_VISIBLE | CBRS_RIGHT | CBRS_TOOLTIPS, IDD));
bar->EnableDocking(CBRS_ALIGN_ANY);
EnableDocking(CBRS_ALIGN_RIGHT | CBRS_ALIGN_LEFT);
DockControlBar(bar, AFX_IDW_DOCKBAR_RIGHT); 
```

这一切都很好。

我现在想在另一个应用程序中做类似的事情。不幸的是，它已被更改为使用 MFC“功能包”中的一些类，这些类非常漂亮，但这种方法不再有效（它断言，我可以通过一些小的修改来修复它，但侧边栏不会出现）。这些新类的文档很糟糕，所以我很难弄清楚我应该做什么。我尝试了似乎是“新”方法：

```
 CPaneDialog* pane = new CPaneDialog;
  pane->Create("pane", this, TRUE, IDD, WS_VISIBLE | WS_CHILD, IDD);
  EnableDocking(CBRS_ALIGN_RIGHT | CBRS_ALIGN_LEFT);
  AddPane(pane);
  DockPane(pane); 
```

这在出现一个侧边栏窗口时起作用，但它似乎不可移动并且没有正确绘制。

我觉得我在黑暗中拍摄这一切。有人知道正确的方法是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T10:10:14.833

这是我作为我的一部分所做的`CMainFrame::OnCreate`：

```
if (!m_projectsPane.Create(L"Projects", this, CRect(0,0,0,0), true, IDD_PROJECTSPANE, WS_CHILD|WS_VISIBLE))
    return -1;
AddDockSite();
EnableDocking(CBRS_ALIGN_ANY);
EnableAutoHidePanes(CBRS_ALIGN_ANY);
m_projectsPane.EnableDocking(CBRS_ALIGN_LEFT|CBRS_ALIGN_RIGHT);
DockPane(&m_projectsPane, AFX_IDW_DOCKBAR_RIGHT); 
```

My`m_projectsPane`是一个类，然后`ON_WM_GETMINMAXINFO`会被填充`ptMinTrackSize`（以确保用户不能将对话框的大小调整到某个最小值以下）。我在我的代码中看不到任何其他内容，并且停靠窗格的大小调整工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T21:27:47.663

如果我们都在黑暗中射击，我们击中东西的机会就会增加一倍。

查看[CDockablePane](http://msdn.microsoft.com/en-us/library/bb984433.aspx)（CPaneDialog 的父类）的文档，我注意到一个名为[EnableGripper](http://msdn.microsoft.com/en-us/library/bb984118.aspx)的方法。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-11T16:51:35.407

我仍然无法将 CDialogBox 停靠在主框架上。当我这样做时，它只是显示为浮动的空迷你框框。在盒子里面，有一个刷新问题，屏幕上的任何东西都被画在那里。

我注意到的是：如果 CPaneDialog 停靠在其他 CDockablePane 上，它会正确显示。但如果它停靠在 MainFrm 上，则不是。这很有趣，因为 CPaneDialog 也是 CDockablePane 的子类。其他 CDockablePane 停靠在 MainFrm 上没有问题。（使用 MFC Featurepack 示例中的 SetPaneSize 示例进行测试。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-02T15:23:10.523

虽然这可能不再惠及原本需要的人。问题可能是您在 Visual Studio 中添加的资源对话框上的设置。由于此控件会在创建对话框时产生，因此您可能提供给 Create() 方法的任何/所有样式都将被资源文件中的设置覆盖。确保 visible 属性设置为 True，Transparent 设置为 False。我这样做了，通过 DockPane() 将 CPaneDialog 添加到主框架没有问题。

# windows - 在 Windows 网络中启动远程进程

> ID：711604
> 
> 赞同：7
> 
> 时间：2009-04-02T20:59:21.603
> 
> 标签：windows, networking, distributed, cluster-computing, remote-process

我有几台从机和一台主机，它们一起运行分布式应用程序。每台从机上的进程都必须具有 GUI 和网络访问权限（我认为那时它会被称为交互式进程）。为了便于使用，如果主机可以启动/停止那些从机上的进程，那就太好了。

我的第一个想法是使用 WMI 和 Win32_Process 类来启动远程进程，但经过进一步调查，发现以这种方式启动的进程是非交互的和隔离的，因此不能有任何 GUI。一个注释说可以使用 Win32_ScheduledJob.Create 来创建一个远程交互进程，但它在我想避免的 LocalSystem 帐户下运行（我什至无法让它正常运行）。

解决这个问题的好方法是什么？也许可以启动一个辅助应用程序，然后启动一个正确的进程，但这似乎很脏。

编辑：当我尝试 PsExec 时，它真的很笨重，而且速度很慢（不知道为什么）。进一步看 PsExec，它似乎在远程机器上安装了一个临时服务来启动应用程序。这会是使用正确身份生成交互式过程的唯一方法吗？我应该在节点的设置中包含一个帮助服务吗？但即便如此，我将如何与它沟通呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T21:04:01.480

PsExec 是 sysinternals 套件的一部分，可以做到这一点

[http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

如果您的服务器运行的是 windows 2008，您也可以使用

[终端服务远程应用程序](http://technet.microsoft.com/en-us/library/cc753844(WS.10).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-26T15:36:40.617

您可以使用“at”命令。

打开命令行并输入

```
at /? 
```

进入终端。一个缺点是远程系统上的时间需要在您的某个合理的增量范围内。它也不是即时的。您必须等待几秒钟以确保远程调度程序不会完全错过该事件。

有一个与此等效的 WMI，并且具有与以下相同的基本警告：

清单 3：在 Windows Server 2003、Windows XP 和 Win2K SP3 机器上创建交互式进程的代码

```
Const INTERVAL = "n"
Const MINUTES  = 1

strComputer = "compaq575"
strCommand  = "calc.exe"

Set objWMIService = _
    GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
Set objScheduledJob = objWMIService.Get("Win32_ScheduledJob")

Set objSWbemDateTime = _
    CreateObject("WbemScripting.SWbemDateTime")
objSWbemDateTime.SetVarDate(DateAdd(INTERVAL, _
    MINUTES, Now()))

intReturnValue = objScheduledJob.Create(strCommand, _
    objSWbemDateTime.Value, False, 0, 0, True, intJobID)
WScript.Echo "Job ID: " & intJobID 
```

我认为大多数其他方法（无需安装您自己的服务）已因漏洞而被各种服务包关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-27T08:50:36.047

以下两篇文章使用 .NET 执行远程进程。

1.  使用 WMI

    [http://weblogs.asp.net/steveschofield/archive/2006/06/06/WMI---start-a-process-on-remote-machine-passing-credentials_2E00_.aspx](http://weblogs.asp.net/steveschofield/archive/2006/06/06/WMI---start-a-process-on-remote-machine-passing-credentials_2E00_.aspx)

2.  代码项目示例

[http://www.codeproject.com/KB/IP/RemotingExec.aspx](http://www.codeproject.com/KB/IP/RemotingExec.aspx)

这些示例使用自定义凭据执行，远程可执行文件是 Win Form 应用程序。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-06-29T11:54:36.280

如果整个组合理地在您的控制之下，则可以将这些远程进程实现为 Windows 服务。服务可以是交互式的（尽管默认情况下不是），并且可以通过每台 Windows PC 上运行的标准服务控制管理器进行远程控制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-01T01:24:37.133

请问为什么slave进程需要有GUI？我有类似的设置，但仅在初始设置期间需要 GUI。

无论如何，这就是我所做的，但不幸的是，它依赖于作为 LocalSystem 帐户运行的进程，我知道如果你真的需要 GUI，你会试图避免这种情况。

给你一点背景知识，我必须分发的应用程序是[Hudson](http://hudson-ci.org/)，这是一个早期版本，你分发它的方式是通过运行 Java WebStart 应用程序，因此需要一个 GUI（至少在 set起来，帮助故障排除）。

我所做的是使用 sc.exe 将从属应用程序设置为从属机器上的服务（这是一个正确的 PITA，幸运的是你只这样做了一次）。类似于以下内容：

```
sc.exe create SlaveService binPath= c:\path\to\slave.exe type= interact DisplayName= "The Slave Service" 
```

注意参数后面的空格（binPath= 等），这些是必要的。另请注意，我发现删除“type= interact”并在服务控制台中手动更改它更容易。

然后在master上，同样使用sc.exe，我远程启动服务：

```
sc.exe \\slavemachine start SlaveService 
```

并验证程序在从机上运行。

现在就我而言，除了初始故障排除之外，我并不真正需要 GUI。一切正常运行后，我只需将服务配置为作为服务帐户运行，但不再处于交互模式。

我希望你觉得这有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-01T01:59:27.843

要实现这一点，您需要几个组件。

首先，您需要一种与远程机器通信的方法。

其次，您需要在远程机器上监听可以启动您的应用程序的东西。

其他建议首先使用这些组件中的一个或两个内置的东西，这很好，只要任何给定解决方案的限制是适当的。

PsExec 看起来是最有前途的开箱即用解决方案。否则，您可以滚动自己的应用程序以通过 TCP/命名管道/其他方式收听简单消息，然后生成适当的子进程。唯一需要注意的是，您需要非常小心安全性，尤其是在任何机器公开暴露的情况下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-30T13:09:53.570

PSTools 套件是由 Sysinternals 开发的，非常棒，以至于该公司在一段时间后被微软收购。使用这些工具是完成任务的最佳方式。

我看到您提到了以交互方式运行应用程序的问题。我可以建议使用 /i 开关以交互方式运行应用程序。PSTools 提供您正在寻找的所有功能。您只需要使用开关即可获得所需的结果。

在我使用 PSTools 的应用程序中，我从未经历过您所描述的缓慢。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T15:23:23.310

[MPICH2](http://www.mcs.anl.gov/research/projects/mpich2/)经常用在高性能计算集群中，应该可以做你想做的事。即使您不使用它在机器之间传递消息，您也可以使用它的进程启动器从主机启动所有进程。它可以设置为在机器上以特定 Windows 用户身份进行身份验证。

# java - Java 自制泛型示例

> ID：711607
> 
> 赞同：8
> 
> 时间：2009-04-02T21:00:11.647
> 
> 标签：java, generics

谁能指出我在 Java 中使用泛型的好例子？我的意思是自己编写通用类的例子？

大多数解释是“你可以像这样定义一个泛型类。现在看看 Java 集合 API 并忘记所有这些 - 只需使用它并快乐。”

我想要的更像是“你可以像这样定义一个泛型类，现在考虑一下你可能想要它的这种情况，现在让我们看看我们将如何编写它。”

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-03T04:49:31.923

Java 中的泛型促进了[参数多态性](http://en.wikipedia.org/wiki/Polymorphism_(computer_science))。通过类型参数，您可以将参数传递给类型。就像一个方法`String foo(String s)`模拟一些行为一样，不仅仅是一个特定的字符串，而是任何字符串`s`，所以一个类型`List<T>`模拟一些行为，不仅仅是一个特定的类型，而是*任何类型*。`List<T>`表示*对于任何类型`T`，都存在 a`List`的`T`s*。实际上也是`List`一个*类型构造函数*。它将一个类型作为参数并构造另一个类型作为结果。

以下是我每天使用的几个泛型类型的示例。首先，一个非常有用的通用接口：

```
public interface F<A, B> {
  public B f(A a);
} 
```

该接口表示，*对于任何两种类型`A`和`B`，都有一个函数（称为`f`）接受`A`并返回 a `B`。*当你实现这个接口时，`A`可以`B`是你想要的任何类型，只要你提供一个函数`f`，接受前者并返回后者。这是接口的示例实现：

```
F<Integer, String> intToString = new F<Integer, String>() {
  public String f(int i) {
    return String.valueOf(i);
  }
} 
```

在泛型之前，多态性是通过使用关键字进行*子类化来实现的。*`extends`使用泛型，我们实际上可以取消子类化并使用参数多态性。例如，考虑一个用于计算任何类型的哈希码的参数化（通用）类。我们将使用这样的泛型类，而不是覆盖 Object.hashCode()：

```
public final class Hash<A> {
  private final F<A, Integer> hashFunction;

  public Hash(final F<A, Integer> f) {
    this.hashFunction = f;
  }

  public int hash(A a) {
    return hashFunction.f(a);
  }
} 
```

这比使用继承要灵活得多，因为我们可以保持使用组合和参数多态的主题，而不会锁定脆弱的层次结构。

Java 的泛型虽然并不完美。例如，您可以抽象类型，但不能抽象类型构造函数。也就是说，您可以说“对于任何类型 T”，但您不能说“对于采用类型参数 A 的任何类型 T”。

[我在这里写了一篇关于 Java 泛型的这些限制的文章。](http://apocalisp.wordpress.com/2008/10/23/heterogeneous-lists-and-the-limits-of-the-java-type-system/)

[许多有用的泛型类型的来源可以在这里找到。](http://code.google.com/p/functionaljava/source/browse/#svn/trunk/src/main/fj). 如果您还没有，还请查看标准 Java 库的源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T21:05:47.250

[Java 泛型常见问题](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#Which%20types%20should%20I%20design%20as%20generic%20types?)解答中部分回答了您的答案，其中提供了一些很好的示例，说明您何时希望您的类成为泛型类。另请查看该常见问题解答中的[设计通用方法](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ProgrammingIdioms.html#Topic5)部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-03T02:06:25.217

```
public class Pair<A,B> {
    private A a;
    private B b;
    public Pair(A a, B b) { setFirst(a); setSecond(b); }    
    public A getFirst() { return a; }
    public B getSecond() { return b; }
    public void setFirst(A a) { this.a=a; } 
    public void setSecond(B b) { this.b=b; }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T21:18:17.937

我使用泛型来处理 DAO 中的一些基本 CRUD 操作。大部分代码会为各种域对象重复，所以我尽可能多地提取到一个通用抽象类中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T21:27:05.887

不确定这是否正是您要寻找的，但就示例而言……您创建的任何类型的数据结构都可以（并且可能应该）以通用形式完成。我曾经这样开始过一个：

```
public class TrieMap<C extends Comparable<C>, K extends ComponentComparable<C>, V>
 extends AbstractMap<K,V> implements SortedMap<K,V> {
    ...
} 
```

当然，这取决于泛型的另一种用法，这个接口用于其元素可相互比较的序列：

```
public abstract interface ComponentComparable<C extends Comparable<C>>
 extends Comparable<ComponentComparable<C>>, Iterable<C> {
    ...
} 
```

我还创建了一整套节点类，例如

```
public interface Node<T extends Node<T>> { ... }
public interface TreeNode<T extends TreeNode<T>> extends Iterable<T>, Node<T> { ... }
public interface ListNode<T extends ListNode<T>> extends Node<T> { ... }
public interface BinaryTreeNode<T extends BinaryTreeNode<T>> extends Node<T> { ... }
public interface TernaryTreeNode<T extends TernaryTreeNode<T>>
 extends BinaryTreeNode<T> { ... } 
```

可以想象，它可以在创建图形、树、链表等方面派上用场，以及一个`Algorithms`具有各种（通用！）在这些节点上操作的方法的类。

或者，如果您厌倦了数据结构，其他一些想法包括可以转换为类型的事物的接口：

```
public abstract interface Convertable<T> {
    public abstract T convert();
} 
```

或一个用于字符串解析器：

```
public interface Parser<O> {
    public abstract O parse(String str);
} 
```

或者一个用于它们自己的解析器的类：

```
public interface Parseable<P extends Parseable<P>> extends Parser<P> {} 
```

我在创建系统来解析命令行选项时使用它：

```
public abstract class Option<T> { ... }
public class CLOption<P extends Parseable<P>> extends Option<P> { ... }
public class StringOption extends Option<String> { ... } 
```

等等等等等等

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-03T09:17:20.487

使用泛型的静态效用函数示例。它需要两个映射 A -> B 和 B -> C 并从中构造一个 A -> C（哈希）映射。

```
public static <A, B, C> Map<A, C> transitise(Map<A, B> aToB, Map<B, C> bToC) {
    HashMap<A, C> map = new HashMap<A, C>(aToB.size() * 2);
    for (Map.Entry<A, B> abEntry : aToB.entrySet()) {
        map.put(abEntry.getKey(), bToC.get(abEntry.getValue()));
    }
    return map;
} 
```

使用示例：

```
public static void main(String[] args) {
    HashMap<String, Integer> nameToNumber = new HashMap<String, Integer>();
    nameToNumber.put("Anna", 12345);
    nameToNumber.put("James", 444);
    HashMap<Integer, Point> numberToPosition = new HashMap<Integer, Point>();
    numberToPosition.put(12345, new Point(3, 3));
    numberToPosition.put(444, new Point(1, 55));
    for (Map.Entry<String, Point> nTP :
        transitise(nameToNumber, numberToPosition).entrySet())
    {
        System.out.println(nTP.getKey() + " -> " +
            nTP.getValue().x + "/" + nTP.getValue().y);
    }
} 
```

结果是：

```
James -> 1/55
Anna -> 3/3 
```

无论如何，我要说明的是，使用泛型，您可以制作一些非常有用的，呃，泛型实用函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T21:04:51.777

几个有用的练习：

*   编写自己的 ArrayList 实现
*   编写一个基本的 Map 实现（无需担心那里的效率，如果您需要遍历整个数组来查找某些内容，请执行此操作）
*   子类化您的 Map impl。使用具有返回写入计数的方法的自定义 Map.Entry 计算键的值写入

我不能马上给你代码示例，因为我正在处理它们，但也许你可以尝试自己做，如果你被卡住了，再回来提出更多问题。

# .net-3.5 - 当客户端连接到 WCF 托管的端点时触发事件

> ID：711611
> 
> 赞同：13
> 
> 时间：2009-04-02T21:01:19.600
> 
> 标签：.net-3.5, wcf

当新客户端连接到 WCF 托管服务时，我该怎么做才能触发事件？

编辑：我正在寻找的是在创建新会话或为客户创建新频道时获取事件。例如：对于会话关闭，我正在使用：

```
OperationContext.Current.Channel.Closed += new EventHandler( Channel_Closed ); 
```

那么我应该使用什么来进行会话启动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-03-14T14:50:46.250

我认为您要完成的工作最好通过在创建服务侦听器后向服务侦听器添加新的[通道初始化程序](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.ichannelinitializer.aspx)来完成。

基本上，您创建一个实现该接口的类，然后将其添加到服务主机。如果您是自托管，这非常简单：

```
public class MyHook : IChannelInitializer
{
  public void Initialize(IClientChannel channel)
  {
    // Do whatever.
  }
}

var host = new ServiceHost(typeof(MyService), MYBASEADDRESS);
host.AddServiceEndpoint(typeof(IMyService), new WSHttpBinding(), MYSERVICEADDRESS);
host.Open();

// There will be one per endpoint; you can enumerate them if needed etc.
var dispatcher = host.ChannelDispatchers[0] as ChannelDispatcher;
dispatcher.ChannelInitializers.Add(new MyHook()); 
```

由于您使用的是每会话实例模式，因此您将在客户端第一次连接时为每个新会话创建一个新通道。通道调度程序是负责获取新创建的通道并将其与特定服务对象实例相关联（进行地址匹配等）的对象。在你的服务连接到它之前，它将在新通道上运行每个自定义初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T21:05:43.257

取决于您的设置 - 您是否进行“每次通话”对话？那么你本身并没有真正得到任何“客户端现在已连接”的消息......

您是否进行基于会话的对话？您的“ServiceHost”类有两个事件“Opening”和“Opened”，您可以挂钩，尤其是在您自行托管服务的情况下。

通过捕获此事件，您究竟想达到什么目的？

马克

# .net - 从数据表中的所有单元格中删除单引号 - 创建新表 - 在 Vb.Net 中使用 LINQ

> ID：711616
> 
> 赞同：1
> 
> 时间：2009-04-02T21:03:02.793
> 
> 标签：.net, vb.net, linq, datatable

我有一个表，里面有很多值，它们周围可能有单引号。我需要创建一个没有这些单引号的重复表。我无法修改原始表，因为我需要稍后“按原样”使用它。

我已经使用 table.Clone 完成了此操作，并使用 foreach 循环遍历行和列，根据需要删除单引号，然后将新行放入新表中。它有效，而且很简单......但是

我想使用 LINQ 做同样的事情。这是我的尝试....

```
 Dim myResults = From myRow In dtTable _
                    From myItem In myRow.ItemArray _
                    Where TypeOf myItem Is String AndAlso _
                    myItem.ToString.StartsWith("'"c) AndAlso _
                    myItem.ToString.EndsWith("'"c) 
```

正如你所看到的 - 我没有走很远。我很难找到未查看 DataRow 中特定列的示例。看起来我的代码确实撤回了所有匹配的结果 - 但我不知道如何创建重复表/修改值？

编辑 - 我已经为此开始赏金，希望有人可以提供解决方案。唯一的要求是不要使用 For Each；因为我已经知道该怎么做。我已经接近了 - 但我似乎仍然无法创建新行或新表。

当我尝试这样做时，我的新方法陷入了死胡同：

```
Dim MyNewRow As New Data.DataRow With {.ItemArray = myRemovedQuotes.ToArray} 
```

我收到的错误消息是“错误 1 ​​'System.Data.DataRow.Protected Friend Sub New(builder As System.Data.DataRowBuilder)' 在这种情况下无法访问，因为它是 'Protected Friend'。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-13T19:07:05.870

如果您真的*必须*使用 LINQ（也许作为学习练习），那么可能类似于下面的内容（作为 C#；恐怕我的 VB 还远不及翻译它）：

```
 DataTable clone = original.Clone();
        string t;
        var qry = from DataRow row in original.Rows
                  let arr = row.ItemArray
                  select Array.ConvertAll(arr, s =>
                      (t = s as string) != null
                      && t.StartsWith("\'")
                      && t.EndsWith("\'") ? t.Trim('\'') : s);
        foreach (object[] arr in qry) {
            clone.Rows.Add(arr);
        } 
```

问题是`ItemArray`需要在保留单独的行的同时进行扩展（所以`SelectMany`不是一个选项）；`Array.ConvertAll`似乎是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-16T13:16:28.803

您的表是本地生成的（即在应用程序内）还是来自数据库 - 如果来自数据库，我倾向于编写一个视图，在单引号到达您的应用程序之前去除它们。

# java - Java 集合 - 唯一键和唯一值

> ID：711618
> 
> 赞同：34
> 
> 时间：2009-04-02T21:03:11.203
> 
> 标签：java, collections

我需要一个可以根据键查找值的集合，反之亦然。每个值都有一个键，每个键都有一个值。是否有现成的数据结构可以做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-02T21:04:57.890

[Google Guava](https://github.com/google/guava)的[BiMap](https://guava.dev/releases/28.0-jre/api/docs/com/google/common/collect/BiMap.html)看起来很适合您。

> 双映射（或“双向映射”）是一种映射，它保留其值的唯一性以及其键的唯一性。此约束使 bimap 能够支持“反向视图”，这是另一个 bimap，包含与此 bimap 相同的条目，但具有相反的键和值。

或者来自[Apache Commons Collections的](https://commons.apache.org/proper/commons-collections/)[BidiMap](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html)：

> 定义一个允许键和值之间双向查找的映射。
> 
> 这个扩展`Map`代表了一个映射，其中一个键可以查找一个值，而一个值可以同样容易地查找一个键。此接口扩展`Map`，因此可以在需要地图的任何地方使用。该界面提供了一个反向地图视图，可以完全访问`BidiMap`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-21T18:51:36.797

您可以使用Eclipse [Collections](http://www.eclipse.org/collections/)（以前的 GS Collections）中的[BiMap 。](http://www.eclipse.org/collections/javadoc/8.0.0/org/eclipse/collections/api/bimap/BiMap.html)

`BiMap`是一个允许用户从两个方向执行查找的地图。BiMap 中的键和值都是唯一的。

主要实现是`HashBiMap`.

**`inverse()`**

`BiMap.inverse()`返回一个视图，其中键类型和值类型的位置被交换。

```
MutableBiMap<Integer, String> biMap =
  HashBiMap.newWithKeysValues(1, "1", 2, "2", 3, "3");
MutableBiMap<String, Integer> inverse = biMap.inverse();
Assert.assertEquals("1", biMap.get(1));
Assert.assertEquals(1, inverse.get("1"));
Assert.assertTrue(inverse.containsKey("3"));
Assert.assertEquals(2, inverse.put("2", 4)); 
```

**`put()`**

`MutableBiMap.put()`行为类似于`Map.put()`在常规地图上，除了在添加重复值时抛出。

```
MutableBiMap<Integer, String> biMap = HashBiMap.newMap();
biMap.put(1, "1"); // behaves like a regular put()
biMap.put(1, "1"); // no effect
biMap.put(2, "1"); // throws IllegalArgumentException 
```

**`forcePut()`**

其行为类似于`MutableBiMap.put()`，但在将键值对放入映射之前，它会默默地删除具有相同值的映射条目。

```
MutableBiMap<Integer, String> biMap = HashBiMap.newMap();
biMap.forcePut(1, "1"); // behaves like a regular put()
biMap.forcePut(1, "1"); // no effect
biMap.put(1, "2"); // replaces the [1,"1"] pair with [1, "2"]
biMap.forcePut(2, "2"); // removes the [1, "2"] pair before putting
Assert.assertFalse(biMap.containsKey(1));
Assert.assertEquals(HashBiMap.newWithKeysValues(2, "2"), biMap); 
```

**注意：**我是 Eclipse Collections 的提交者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-21T19:17:58.357

接受的答案提到`BiMap`，但它与 Google Guava 库一起变得[更加最新。](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap)

> A`BiMap<K, V>`是`Map<K, V>`那个
> 
> *   允许您查看“逆`BiMap<V, K>`”`inverse()`
> *   确保值是唯一的，`values()`使`Set`

所以，你可以得到这样的代码：

```
final BiMap<String, Integer> biMap = HashBiMap.create();
biMap.put("word", 1);
biMap.put("alpha", 2);
System.out.println(biMap.get("word")); // prints 1
System.out.println(biMap.inverse().get(1)); // prints word 
```

这个对象的一些注意事项：

*   您将无法添加非唯一值，否则您将获得一个`IllegalArgumentException`. 您可以使用`forcePut(key, value)`，但这会[覆盖现有的键值对](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html#forcePut(java.lang.Object,java.lang.Object))。

# c# - 如何将 null 文字分配给 System.Nullable 类型由 .Net (C#) 处理？

> ID：711635
> 
> 赞同：4
> 
> 时间：2009-04-02T21:07:54.390
> 
> 标签：c#, nullable

我想知道是否有人知道 C# 编译器如何处理以下分配：

```
int? myInt = null; 
```

我的假设是执行了隐式转换，但我无法弄清楚如何处理空文字赋值。我反汇编了 System.Nullable 对象，发现隐式运算符被覆盖为：

```
public static implicit operator T?(T value)  {
    return new T?(value);  
} 
```

一旦被调用，它将尝试触发辅助构造函数：

```
public Nullable(T value) {
    this.value = value;
    this.hasValue = true; 
} 
```

这就是我的困惑发挥作用的地方...... this.value 是某种值类型，不能为空。

那么，有谁知道这种“魔术”是如何发生的......或者我假设调用了辅助构造函数是错误的？是否调用了默认构造函数，因为编译器知道它无法将第二个构造函数的签名与 null 文字匹配（导致 myInt 被分配给新的“null”Nullable）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-02T21:21:44.963

该声明：

```
int? myInt = null; 
```

编译为：

```
 .locals init (valuetype [mscorlib]System.Nullable`1<int32> V_0)
  IL_0000:  ldloca.s   V_0
  IL_0002:  initobj    valuetype [mscorlib]System.Nullable`1<int32> 
```

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.initobj(VS.85).aspx) ，这意味着«将指定地址处的值类型的每个字段初始化为空引用或适当原始类型的 0。»

所以这里没有构造函数或转换。HasValue 将返回 false，并且尝试获取其 Value 将引发 InvalidOperationException。当然，除非您使用 GetValueOrDefault。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T21:59:36.527

真正发生的是，当您分配`null`给可空类型实例时，编译器只需使用默认构造函数（ [Jb answer](https://stackoverflow.com/questions/711635/how-does-the-assignment-of-the-null-literal-to-a-system-nullablet-type-get-handle/711678#711678)`T?`上的 initobj IL 指令）创建 的新实例，因此以下两行是等效的：

```
int? a = null;
Nullable<int> b = new Nullable<int>();

object.Equals(a,b); // true 
```

因此你不能这样做：

```
Nullable<int> c = new Nullable<int>(null); 
```

类似的事情发生然后你将一个可为空的类型与 null 进行比较：

```
if (a == null)
{
  // ...
} 
```

在幕后，它只是调用 a.HasValue 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T21:17:33.493

我希望`.HasValue`设置为`false`并`.Value`设置为[`default(T)`](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)，但我没有检查过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T21:18:35.957

就像是：

```
public Nullable() {
    this.value = default(T);
    this.hasValue = false;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-04-19T19:12:23.793

C# 是一种高级语言，可以**编译为 IL**。

随着可空类型的引入，C# 标准发生了变化，因此 C# 编译器的行为必须改变以处理新规则，例如“***除了 Nullable 之外***，没有任何结构可以分配 null 值”。

通常不允许将 null 分配给结构，但这*只是编译器在生成 IL 时强制执行的规则*。由于编译器会解析你的所有代码并弄清楚它的含义，它可以识别各种规则，即使是在你看来可能是例外的规则。

基本上，如果编译器解析您的 C# 代码并发现您将 null 分配给结构，它会输出错误。如果它发现您将 null 分配给一个`Nullable<T>`结构，那么它知道如何处理它并生成适当的 IL。

从 C# 标准：

13.7.1[空类型转换](http://en.csharp-online.net/ECMA-334:_13.7.1_Null_type_conversions)：“存在从空类型（第 11.2.7 节）到任何可空类型的隐式转换。此转换产生给定可空类型的空值（第 12.2 节）。”

12.2[默认值](http://en.csharp-online.net/ECMA-334:_12.2_Default_values)：“可空类型的默认值是 HasValue 属性为 false 的实例。引用可空类型的默认值的 Value 属性会导致 System.InvalidOperationException 类型的异常。默认值也是称为可空类型的空值。存在从空类型（第 11.2.7 节）到任何可空类型的隐式转换，并且此转换产生该类型的空值。

# python - 将复数形式生成为 .pot 文件

> ID：711637
> 
> 赞同：3
> 
> 时间：2009-04-02T21:08:35.370
> 
> 标签：python, internationalization, xgettext

我正在对 python 程序进行国际化，但无法将复数形式放入 .pot 文件中。我已经用 _pl() 标记了需要复数翻译的字符串，例如。

`self.write_info(_pl("%(num)d track checked", "%(num)d tracks checked", song_obj.song_count) % {"num" : song_obj.song_count})`

然后我正在运行： `xgettext --language=Python --keyword=_pl --output=output.pot *.py` pot 文件中只生成第一个（单数）字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T23:32:20.470

我没有在 Python 中使用它，目前无法测试，但请尝试`--keyword=_pl:1,2`。

来自 GNU gettext[文档](http://www.gnu.org/software/gettext/manual/gettext.html#xgettext-Invocation)：

> --keyword[=keywordspec]' 要查找的附加关键字（没有关键字规格意味着不使用默认关键字）。
> 
> 如果keywordspec 是C 标识符id，xgettext 在每次调用函数或宏id 的第一个参数中查找字符串。如果keywordspec 的格式为'id:argnum'，xgettext 在调用的argnumth 参数中查找字符串。如果keywordspec 的格式为'id:argnum1,argnum2'，xgettext 在调用的argnum1st 参数和argnum2nd 参数中查找字符串，并将它们视为具有复数处理的消息的单数/复数变体。

# sql - 如果记录匹配另一个表中的条目（例如假期日期），则 SQL 查询以排除记录

> ID：711644
> 
> 赞同：11
> 
> 时间：2009-04-02T21:09:30.203
> 
> 标签：sql, join, sql-server-2005

我有两张桌子：

> **应用**
> 程序 applicationid (int)
> applicationname (varchar)
> isavailable (bit)

和

> **假期**
> applicationid (int)
> holidaydate (datetime)

我需要为任何给定的应用程序名称获取*isavailable*标志，但它应该只在当天不是假期时返回。isavailable标志独立于假期——仅在系统范围*内存*在问题时才设置，而不是按设定的时间表设置。

我最初有类似的东西：

```
select top 1 apps.isavailable
from dbo.Applications apps, dbo.Holidays hol
where apps.applicationid = hol.applicationid and
      apps.applicationname = @appname and
      ((datediff(dd,getdate(),hol.holidaydate)) != 0) 
```

但即使今天是假期，这也会返回记录，因为其他假期日期不等于今天。

我试过

```
and (CONVERT(VARCHAR,getdate(),101)) not in (CONVERT(VARCHAR,hol.holidaydate,101)) 
```

（它在 SQL Server 2005 上，所以没有 Date 类型，所以我必须转换它）

但同样，即使今天是假期，它也在返回记录。如何使用“not in”或“except”子句（或其他内容）构造此查询，以便仅在今天不是假期时返回记录？

**更新**

我不需要所有没有假期的应用程序名称的列表——我需要指定apps.applicationname 的记录。下面的答案只返回今天没有假期的应用程序名称。如果不是假期，查询应该返回 isavailable 标志，如果是假期，则不返回任何记录。我不关心其他应用程序。

另外，如果我添加了如下表格怎么办：

> **HoursOfOperations**
> applicationid (int)
> mondayopen (datetime)
> mondayclose (datetime)
> tuesdayopen (datetime)
> tuesdayclose (datetime)
> //一周中所有 7 天的打开和关闭

我可以加入所有这三个表以仅在给定日期的小时内且不是假期的情况下返回记录吗？我必须在单独的查询中执行此操作吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-02T21:19:53.597

以下查询应为您提供当前日期未定义假期的应用程序列表。

```
SELECT apps.ApplicationName, apps.isavailable 
FROM dbo.Applications apps
WHERE apps.ApplicationName = @AppName
    AND NOT EXISTS 
( SELECT * 
  FROM Holidays 
  WHERE ApplicationId = apps.ApplicationId
     AND CONVERT(VARCHAR,getdate(),101) = CONVERT(VARCHAR,holidaydate,101)
) 
```

基本上我们所做的就是选择没有匹配的所有内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-02T22:15:43.197

好的，只是为了不同，这样的事情怎么样：

```
select apps.isavailable
from dbo.Application apps left outer join dbo.Holidays hol
    on apps.applicationid = hol.applicationid
    and convert(varchar(10),getdate(),101) = convert(varchar(10),hol.holidaydate,101)
where apps.applicationname = @appname
    and hol.applicationid is null 
```

基本上，您将根据 applicationid 和当前日期加入表。由于它是左连接，因此您将始终获得与 @appname 匹配的所有应用程序，然后您只需根据假日日期作为当前日期过滤掉任何匹配的结果。假设 applicationname 是唯一的，您将始终得到一个连接的右半部分为空的行，除非当前日期与假期匹配，在这种情况下查询将不返回任何结果。

我不知道它如何与其他解决方案在性能方面相提并论；我相信连接通常应该比子查询更快，但这可能取决于多种因素，所以 YMMV。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-02T21:16:23.543

您可以使用“不存在的地方”：

```
SELECT *
FROM Applications a
WHERE NOT EXISTS (
    SELECT * 
    FROM Holidays h
    WHERE h.ApplicationID = a.ApplicationID
        AND HolidayDate = cast(cast(getdate() as int) as datetime)
) 
```

我正在那里进行演员表以将 getdate() 回调截断为日期。尚未测试该确切查询，但我认为它会为您完成这项工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T21:17:19.063

做这样的事情：

```
SELECT (fields) FROM Application
WHERE NOT EXISTS
  (SELECT * FROM Holidays
   WHERE ApplicationID = Application.ApplicationID
   AND DAY(getdate()) = DAY(holidaydate) 
   AND MONTH(getdate()) = MONTH(holidaydate)
   AND YEAR(getdate()) = YEAR(holidaydate)
  ) 
```

当然，使用 SQL Server 2008 的“DATE”数据类型，或者如果您可以在“Holidays”中分别存储日、月、年，这将变得更加容易和快捷。

马克

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T21:23:35.490

```
SELECT a.isAvailable
  FROM Application a
 WHERE NOT EXISTS (
    SELECT TOP 1 0
      FROM Holidays b
     WHERE a.applicationid = b.applicationid
       AND holidaydate = $today
 ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-24T10:13:53.003

这个如何：

```
SELECT 
  Application.isavailable
FROM 
   Holidays 
RIGHT JOIN 
   Application
ON 
   Holidays.applicationid = Application.applicationid
WHERE 
  ((Application.applicationname='app1') AND 
  (((Holidays.holidaydate=CurrentDate()) AND (Holidays.applicationid Is Null)) OR 
  (holidays.holidaydate Is Null))); 
```

"'app1'" 应替换为变量说明符，"CurrentDate()" 应由系统特定函数替换以返回当前日期。

干杯

/一种

# iphone - 在 Objective-C 和 Xcode 中抛出的调试异常

> ID：711650
> 
> 赞同：10
> 
> 时间：2009-04-02T21:12:16.563
> 
> 标签：iphone, xcode, xcodebuild

我是一名长期的 Microsoft 开发人员，而且我是使用 Xcode 进行 iPhone 开发的新手。因此，我正在阅读一本书并通过示例尝试自学如何使用 Objective-C 编写 iPhone 应用程序。到目前为止一切都很好，但是，有时我会`objc_exception_throw`在运行时遇到通用的“ ”消息。发生这种情况时，很难找到此异常的来源。经过反复试验，我找到了答案。其中一个参数拼写错误。

正如您在下面看到的，我通过省略按钮中的第二个“t”拼错了“otherButtonTitles”参数。

```
UIAlertView *alert = [[UIAlertView alloc] 
                      initWithTitle:@"Date and Time Selected" 
                      message:message 
                      delegate:nil
                      cancelButtonTitle:@"Cancel"
                      otherButonTitles:nil]; 
```

这花了我时间找到的原因是代码构建成功。这是 Objective-C 编译器的正常行为吗？当我犯这样的常见语法错误时，我习惯于在 .NET 编译器中构建失败。当我犯这些错误时，是否可以更改编译器设置以使构建失败？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-03T05:38:30.013

首先，打开`~/.gdbinit`（即`.gdbinit`在您的主目录中调用的文件 - 是的，以点开头）并将其放入其中：

```
fb -[NSException raise]
fb objc_exception_throw
fb malloc_error_break 
```

这将使用三个默认断点初始化 GDB，当它们发生时，GDB 将停止您的应用程序并向您显示堆栈跟踪。这与 Xcode 很好地集成在一起，因此一旦某处发生异常或 malloc 失败，您就可以通过单击堆栈跟踪元素很好地浏览您的代码。

然后，打开`Get Info`您项目的面板（或选择您的项目（顶部项目`Groups & Files`）并点击`cmd-i`），转到`Build`选项卡并将您的项目设置`Base SDK`为`Device - iPhone OS [someversion]`. 一直滚动到底部并找到该`GCC 4.0 - Warnings`部分。那里; 尽可能多地打开警告，但请确保打开`Treat Warnings as Errors`（这相当于`GCC_TREAT_WARNINGS_AS_ERRORS`）。就个人而言，我将其设置为：

[![GCC 警告构建设置](https://i.stack.imgur.com/fFSXl.png)](https://i.stack.imgur.com/fFSXl.png)
[（来源：[lyndir.com](http://lhunath.lyndir.com/stuff/gcc_warnings.png)）]

您现在应该会收到编译器警告，因为您可以在代码中做错大多数事情，并且编译器不会让您运行代码，直到您修复它们。当事情确实超出了编译器的范围时，您应该能够在方便的地方通过 GDB 中断轻松找到问题。

您还应该调查`NSZombie*`. 这些是环境变量，对于早期破坏内存分配或访问错误的情况非常方便。例如; 什么`NSZombieEnabled`都不会真正被释放；在 dealloc 上，它会被覆盖，`_NSZombie`如果你尝试再次访问这个释放的内存（解除对释放指针的引用），你会在 GDB 中得到一些中断，而不是像往常一样通过调用，只在随机数据上发出（当然，这不是您想要的）。有关这方面的更多信息，请参阅[http://www.cocoadev.com/index.pl?NSZombieEnabled](http://www.cocoadev.com/index.pl?NSZombieEnabled)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-02T23:30:00.927

始终使用`-Werror`GCC 设置 ( `GCC_TREAT_WARNINGS_AS_ERRORS = YES`)。你的代码中不应该有警告，这是一个警告是严重错误的例子。

此外，如果你得到一个`objc_exception_throw`，切换到控制台（Command-shift-R）并寻找第一个“低”数字地址。

```
2009-04-01 13:25:43.385 CrashExample[41720:20b] Stack: (
    2528013804,
    2478503148,
    2528036920,
    2528053460,
    2358032430,
    11076,
    11880,
    816174880,
    345098340,
    145973440,
    816174880,
) 
```

在这种情况下，它将是“11076”。所以在控制台输入：

```
info line *11076 
```

这将告诉您代码中引发异常的行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-02T21:17:02.340

拼写错误的参数通常会在相关行以黄色显示“警告：某某对象不响应选择器 x”。我相信默认情况下这是打开的，因为我不必更改任何编译器设置即可看到这些。

此外，当我遇到未捕获的异常时，有时进入 gdb 控制台（应该在您执行应用程序时出现）并键入以下内容以获取所有线程的回溯是有益的：

呸呸呸呸

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T22:14:07.647

您所做的不是编译时错误，因为 Objective-C 运行时会在运行时检查对象是否可以响应您发送给它的消息。

我建议将此构建设置添加到您的目标或项目中：

```
GCC_TREAT_WARNINGS_AS_ERRORS = YES 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T21:31:35.847

它不是编译错误的原因是因为向任何对象发送编译时未知的消息是完全有效的（并且任何对象也可以配置为动态处理消息）。所有方法调用实际上都是发送给对象的消息。

一般来说，如果您看到任何警告，您应该解决它们，因为在大多数情况下它们会导致问题（如您所见）。这里的误导性方面是，如果您编译一次文件并且它只有警告，如果您编译其他类而不更改有警告的类，则警告不会显示在编译器消息中。因此，您可能会时不时地“清理所有目标”并重新构建以确保您没有错过任何警告。

# linux - 在 Linux / Ubuntu 上的 Subversion 中提交更改的文件、添加新文件并省略一些文件到外部服务器

> ID：711652
> 
> 赞同：0
> 
> 时间：2009-04-02T21:15:29.677
> 
> 标签：linux, svn, version-control

我在 Ubuntu 上运行 Subversion。我已经从外部服务器检查了项目的文件，对文件进行了一些更改，并添加了一些新文件。现在我想提交所有更改和新文件。但是我修改了数据库配置文件以在我的本地服务器上运行，所以我不想提交该更改，因为它会搞砸。因为我做了很多更改并添加了许多新文件，我不想一个一个提交文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T22:39:30.893

所以你有两个问题，一个，你想忽略一个你已经改变的文件，第二个，你想一次添加一堆文件到颠覆。

要解决第一个问题，您应该使用之前的建议：

`svn propedit svn:ignore <dir>`

并在出现的编辑器中输入文件名（取决于 $EDITOR 环境变量，默认情况下这很可能是 emacs、vi 或 nano）。确保将您的更改保存到此文件，否则将无济于事。

要解决第二个问题，只需通过 svn add 在 bash 等效终端仿真器中遍历工作副本中的文件 - 它不会添加已经在版本控制下的内容，您可以放心地忽略它给您的警告。更好的解决方案是编写一个快速脚本来首先检查 svn 中是否存在某些内容，如果不是，则仅添加它，但我认为对于您正在做的事情可能是浪费时间。所以就：

`svn add *`

从项目的根目录中，然后在检查`svn status`以确保您对更改感到满意后，`svn commit`. commit 命令会找到你所有的更改（减去 svn:ignore 中的更改）并将它们发送到你的存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T21:25:17.373

您应该做的是创建数据库配置文件的副本，然后加载它。基本上，在 repo 中保留一个规范的“标准”数据库配置文件，并拥有一个基于标准的本地化配置文件。然后在你的本地副本上设置 svn:ignore ，这样它就不会被提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T21:36:51.713

使用[svn:ignore](http://svnbook.red-bean.com/en/1.1/ch07s02.html#svn-ch-7-sect-2.3.3)属性标记您不想进行版本控制的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T21:54:24.433

如果您尚未将新文件添加到 subversion，您需要先通过执行“svn add”命令将它们标记为已添加。

提交时，您可以指定要提交的文件。您可以使用 shell 功能（glob 匹配等）来指定匹配某些模式的多个文件。无需单独提交每个文件。

# c# - 如何从 MFC 应用程序调用 .NET 表单？

> ID：711669
> 
> 赞同：2
> 
> 时间：2009-04-02T21:19:03.893
> 
> 标签：c#, .net, c++, mfc

我们有几个大型 MFC 应用程序，它们目前调用一个 COM 对象来调出一个复杂的对话框。我们希望将对话框集成到应用程序中——我们不想继续使用 COM 对象。

我正在研究在 .NET 中将对话框构建为单独项目（使用 Windows 窗体，而不是 WPF）并提供第二个 C++/CLI 项目来调用它并且可以从普通 C++ 代码调用的可能性。这种结构使得需要合并对话框的几个应用程序可以在他们的解决方案中选择项目。（这些应用程序是遗留应用程序，不可能对其进行大量重写——我们正在慢慢地将它们迁移到 .NET，但这是一个多年项目。将应用程序转换为 C++/CLI 不是一种选择。）

我已经构建了这个并从模型应用程序中对其进行了测试，但到目前为止，我无法让它在最简单的大型应用程序中工作，并且根据我读过的一些内容，我开始怀疑有可能的。（请参阅[此链接](http://social.microsoft.com/Forums/en-US/vcgeneral/thread/29905427-45fe-4386-8ecf-d1d78fa37666/)，尤其是。我知道[这个 Stackoverflow 问题](https://stackoverflow.com/questions/11423/how-to-host-a-wpf-form-in-a-mfc-application)，但它似乎并不相关。）

所以。这甚至可能吗？关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T01:07:19.447

将您的 Windows 窗体控件封装在用户控件中，并使用 DDX_ManagedControl 将它们嵌入到您的 MFC 应用程序中：

[http://msdn.microsoft.com/en-us/magazine/cc163605.aspx](http://msdn.microsoft.com/en-us/magazine/cc163605.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T21:22:32.153

您是否成功让 C++/CLI 项目调用您的 .NET 组件？我会尝试缩小它未能通过的两层之间的范围。

由于 C++ 代码可以调用 COM 组件，因此您只需编译具有 COM 支持的 .NET dll。虽然我自己没有在 C++ 中做过 COM，所以我不能告诉你细节。但是我已经制作了很多 COM 公开的 .NET DLL，而且这方面相当容易。通常只有项目属性中的几个复选框（我认为在程序集选项卡中的高级按钮下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T01:05:06.083

为什么需要中间人？为什么不只是

```
Native C++ app --> C++/CLI class library 
```

C++/CLI 库提供了一个围绕 CWinFormsView 或 CWinFormsDialog 的本地包装器。

但是，为什么需要消除 COM？它非常快，一旦你擅长实现接口，仪式就不会太糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-10-26T19:20:22.037

在一位非常优秀的 Microsoft 支持专家的帮助下，我终于解决了这个问题。有两个问题，一个是 Boost 库的线程在其默认状态下与 C++/CLI 不兼容。一种解决方案是使用一组不同的标志进行编译，然后静态链接它。另一种是将它用作动态链接的DLL，这就是我最终要做的。

解决方案的第二部分是将链接属性中的 CLR 线程设置为 STA，因为如果不这样做，OLE 初始化会失败并显示无用的消息。

# c# - 没有 System.Web 的 C# HTMLDecode 可能吗？

> ID：711672
> 
> 赞同：47
> 
> 时间：2009-04-02T21:20:13.627
> 
> 标签：c#, html-encode

我知道 System.Web 命名空间中有不同的方法用于解码 html 实体（例如空间的“%20”）。但是，我正在构建一个 Winforms 应用程序，但需要处理 html 编码的字符串。基本上我有 iTunes 库 XML 文件，需要解码其中的 URL 以检查文件。

如果没有 System.Web 命名空间，这可能吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-01-03T14:47:37.070

> 需要在其客户端应用程序中使用 System.Web.HttpUtility 并且必须引用 System.Web.dll 并因此以 NET4 full（System.Web.dll is in Full）为目标的开发人员，现在可以使用新的以 NET4 Client Profile 为目标System.Net.WebUtility 类位于 System.dll 中（System.dll 位于 NET4 客户端配置文件中）。System.Net.WebUtility 包括 HtmlEncode 和 HtmlDecode。可以使用 System.Uri 类（也在 System.dll 中）完成 URL 编码。

来自[http://blogs.msdn.com/b/jgoldb/archive/2010/04/12/what-s-new-in-net-framework-4-client-profile-rtm.aspx](http://blogs.msdn.com/b/jgoldb/archive/2010/04/12/what-s-new-in-net-framework-4-client-profile-rtm.aspx)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-24T09:50:29.480

您可以使用[`System.Net.WebUtility.HtmlDecode`](http://msdn.microsoft.com/en-us/library/system.net.webutility.htmldecode.aspx)：

> 将已为 HTTP 传输进行 HTML 编码的字符串转换为已解码的字符串。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-04-02T21:22:14.947

仅仅因为您正在编写 Windows 窗体应用程序并不会阻止您使用`System.Web`. 只需添加对`System.Web.dll`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-06-02T05:14:26.840

如果您仍然想知道如何在没有 System.Web 的情况下执行此操作，请参阅[这篇文章。](http://www.west-wind.com/Weblog/posts/617930.aspx)它为 URI 解码提供了一种解决方案（这实际上是您正在解码的内容，而不是类似于 "&emdash;" 的 HTML 实体）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T21:22:30.983

要使用 .NET 框架中的方法，您必须使用 System.Web 命名空间来获取 HtmlDecode 方法。

是的，您可以编写自己的方法来执行此操作，但这没有多大意义。

只需添加对 system.web 的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-29T14:51:15.313

mybe 它可以在 winforms 中提供帮助：

```
System.Uri.EscapeUriString(plainText); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-11-22T06:19:13.977

您可以使用`HttpUtility.UrlDecode`或`HttpUtility.HtmlDecode`

# css - 谷歌浏览器中的最大背景重复？

> ID：711674
> 
> 赞同：0
> 
> 时间：2009-04-02T21:20:52.113
> 
> 标签：css, google-chrome

我在我的博客中发现了一种奇怪的行为，仅在谷歌浏览器中。（这是 CSS/浏览器的事情，与服务器组件、Blogger、Wordpress 等无关）。

它的主页确实太长了，我得到的是我的主要“容器”元素的背景在一定高度后停止重复，但仅限于谷歌浏览器。

您可以在[http://www.lejanooriente.com](http://www.lejanooriente.com)看到它（警告：这是一个包含很多图片的沉重页面，需要一段时间才能加载）

如果你让这个页面完全加载并在任何浏览器和 Chrome 中查看它，你会发现在“任何”浏览器中它看起来都是正确的，而在 Chrome 中显然有些问题。但是，如果您一直滚动到底部，它看起来是正确的。尝试向上滚动，在某一时刻，您会注意到背景“结束”（距底部约 30% - 40%）。

根据 FireBug，具有背景的元素是 78,472 像素高。它太高了，在相当长的页面中，看不到这种效果。

奇怪的是，这发生在 Chrome 而不是 Safari 中。

我尝试让背景图像更高，试图弄清楚我是否受到元素高度或背景重复次数的限制。将图像从 30px 更改为 90px 高，并且截止点正好在同一个位置，所以不是这样。

有什么想法会发生什么，或者我是否可以做些什么来解决它？（使页面变短不是一种选择）

* * *

更新：错误报告，问题 9661。但是，如果有人能想到某种解决方法，那就太棒了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T21:30:54.723

这绝对是一个 chrome 错误，您只需要报告它并等待解决方案。我在 Safari 中检查了您的页面，该页面使用与 Chrome (Webkit) 相同的引擎，并且该页面运行良好。

我的好建议是不要创建这么长的页面，因为这不仅对 Chrome 不利，而且对您的网站访问者也不利。

通过使用固定的背景位置可以解决此错误：

```
#page { background: url(/images/tile_left.gif) repeat-y fixed 50% 50%; } 
```

# algorithm - 寻找最小的子树

> ID：711684
> 
> 赞同：2
> 
> 时间：2009-04-02T21:22:50.283
> 
> 标签：algorithm, tree, graph-theory, subtree

给定一个在坐标平面上相互连接的 n 个节点的图，找到包含 m 个节点的最小距离子树的最佳方法是什么？

我发现这个问题的唯一解决方案是生成要连接的节点的所有组合，并尝试通过 Kruskal 或 Prim 算法连接这些节点，同时忽略其余的，然后比较所有创建的树并找到最小的树，但是这个当涉及到较大的树木时，效率并不高。

有没有更快、更有效的算法/方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T22:45:49.910

您正在询问[K 最小生成树 (k-MST)](http://en.wikipedia.org/wiki/K-minimum_spanning_tree)问题，该问题已知是 NP 完全的。所以你不会比你当前的算法做得更好。

但是，在评论中，您说您的图表是从坐标平面生成的，所以我只能假设您有一些关于图表中节点的几何信息。[WWW 纲要条目](http://www.nada.kth.se/~viggo/wwwcompendium/node71.html)提到您可以对欧几里得 k-MST 使用多项式时间近似方案。本文描述了一个：

> 阿罗拉，桑吉夫。(1996)，[欧几里得 TSP 和其他几何问题的多项式时间近似方案](http://www.cs.princeton.edu/~arora/pubs/tsp.ps)，在 *第 37 届会议记录中。IEEE 症状。计算机科学基础*，第 2-11 页。

他们在那里直接提到了k-MST，所以我认为如果你真的想要更快的速度，你可以试试那个算法。

# wpf - 切换标签

> ID：711685
> 
> 赞同：2
> 
> 时间：2009-04-02T21:22:59.050
> 
> 标签：wpf, wpf-controls

我的 TabControl 中有两个选项卡。每次用户从一个选项卡切换到另一个选项卡时，我都需要运行一个方法（检查是否需要将数据保存到数据库）（切换可以是任何方向：从 tab1 到 tab2 以及从 tab2 到 tab1）。我该怎么做呢？

我考虑过使用附加到每个选项卡的 ButtonBase.Click 事件，但由于某种原因它不会触发。

编辑：我忘了提到我希望能够“取消”事件，以防用户决定不保存更改并且必须“导航回”到他或她试图离开的选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T21:27:41.300

查看选项卡控件的[SelectionChanged](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectionchanged.aspx)事件。

**编辑：对问题的更改**

您想取消活动或取消保存？

要取消保存，只需向用户询问以下内容：

```
Dim msRes as MessageResult = MessageResult.No
If mySwitchedFromTab.IsDirty Then 
      msRes = msgbox("Save changes to previous tab?", YesNo, "MyApp")
      if msRes = MessageResult.Yes Then 
          SaveMethod()
      End If 
End If 
```

现在要取消 TAB 更改，那么您必须处理布尔值，并控制事件处理程序中的功能是否会触发，然后将选定的选项卡设置回前一个选项卡，类似于以下内容：

```
If myGlobalTabFireBoolean Then
   Dim msRes as MessageResult = MessageResult.No
   If mySwitchedFromTab.IsDirty Then 
         msRes = msgbox("Save changes to previous tab?", YesNoCancel, "MyApp")
         Select Case msRes 
             Case MessageResult.Yes 
                 SaveMethod()
             Case MessageResult.Cancel 
                 myGlobalTabFireBoolean = False
                 myTabContainer.SelectedItem = myPreviousTab
             Case Else            
                 ' Do Nothing 
         End If 
   End If
 Else
     myglobalTabFireBoolean = True 
End IF 
```

现在，这些并不是执行此类功能的唯一方法，因为它取决于个人编码风格，甚至取决于您如何构建标签项目（我构建我的 tabitem 的标签更详细，以便我可以覆盖它的标准行为，并使它们更像 Firefox 和 IE 中的选项卡，带有“X”按钮和鼠标中键单击关闭）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T21:36:16.257

如果您使用的是 WPF，我不知道那里有什么，但在 .NET 中，TabControl 对象有一个“SelectedIndexChanged”事件。假设您在设计器中，只需将您想要的方法附加到该事件并且您是黄金，或者通过类似以下的代码：

```
 this.rootTabControl.SelectedIndexChanged += new System.EventHandler(this.myHandlerHere); 
```

但我不知道 WPF，所以如果它完全不同，你就靠自己了，但我想它是非常相似的。

# c# - C# + asp.Net + 自定义 Sybase SessionState 提供程序 + ReportViewer = 一些报告崩溃

> ID：711691
> 
> 赞同：0
> 
> 时间：2009-04-02T21:24:28.093
> 
> 标签：c#, asp.net, session-state, reportviewer2008

我正在使用自定义会话状态提供程序将会话数据存储在 Sybase 数据库中。

它运行良好，但报表查看器控件中的某些报表始终会导致以下崩溃。

System.Web.HttpException：会话状态信息无效并且可能已损坏。生成时间：格林威治标准时间 2009 年 4 月 2 日星期四 20:21:47

System.Web.HttpException：会话状态信息无效并且可能已损坏。在 System.Web.SessionState.SessionStateItemCollection.Deserialize(BinaryReader reader) 在 JCDCHelper.Providers.JCDCSybaseSessionProvider.SybaseCustomSessionData.Deserialize(HttpContext context, String serializedItems, Int32 timeout) 在 JCDCHelper.Providers.JCDCSybaseSessionProvider.SybaseCustomSessionData.GetSessionStoreItem(Boolean lockRecord, HttpContext context , String id, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags) 在 System.Web 的 JCDCHelper.Providers.JCDCSybaseSessionProvider.SybaseCustomSessionData.GetItemExclusive(HttpContext context, String id, Boolean& locked, TimeSpan& lockAge, Object& lockId, SessionStateActions& actionFlags)。会话状态.会话状态模块。

我试过阻止空键名，但没有任何乐趣。

我已经尝试手动序列化包含报告数据的 EntityObjects，它们可以很好地序列化和反序列化。

我没有耗尽内存，相同的报告崩溃，并且无论我的内存负载如何，相同的报告都不会崩溃。

我用谷歌搜索了所有我能想到的东西，但我很困惑。

其他一切都按预期工作，序列化和反序列化就好了。

有没有人有任何想法或提示？

谢谢

卡拉丁-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-29T15:28:46.793

我们放弃了这一点，而是在水晶报表中重新编写了报表，并手动构建了 PDF。（不使用 CrystalReportsViewer）并且它有效。

希望对某人有所帮助。

# performance - 关于加速 Drupal 站点的提示

> ID：711705
> 
> 赞同：7
> 
> 时间：2009-04-02T21:29:44.900
> 
> 标签：performance, drupal

我们刚刚实现了一个 drupal 站点。该网站的性能似乎是一个问题。我们启用了 drupal 缓存，设置了 apache 缓存衍生。重复页面访问速度足够快（因为缓存了 CSS 和 JS），但初始页面访问仍然是个问题。

Drupal 专家，您能否就用于加速 drupal 站点的不同技术向我们提供一些指导。（如 DO 和 DONOT）。还有其他低垂的果实吗？

（顺便说一句，数据库在这里不是问题。该层足够快。问题似乎出在 PHP/Drupal 层）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-03T01:13:45.703

您是否使用过任何工具（如 YSlow 或 Firebug）来确定页面加载的哪些部分实际占用的时间最多？此外，考虑使用开发模块的查询监控来确定运行查询与执行 PHP 代码所花费的时间。

正如其他人所指出的，像 APC 这样的操作码缓存可以产生巨大的影响。然而，第二次访问该站点的速度更快，这暗示了辅助文件（图像、JS、调用远程站点的外部 JS 等）存在问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T22:03:47.140

您提到 CSS/JS 很慢 - 您是否在 /admin/settings/performance 中打开了 CSS 和 JS 的“带宽优化”？它将所有 CSS（或 JS）捆绑到一个文件中 - 如果您有大量单独的文件（延迟是杀手），这可以产生相当大的差异。

使用操作码缓存，如[APC](http://us2.php.net/apc)，也可以对页面性能产生很大影响，尤其是在您开始堆砌模块时。我无法想象不使用它就回去开发 PHP。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-08T09:49:01.663

你有你网站的网址吗？

几个快速指针：

1.  使用 YSlow
2.  使用 tools.pingdom.com 看看有没有明显慢的
3.  使用 YUI 压缩器压缩 js 和 css
4.  仅在必要时使用 cookie
5.  使用 APC/Xcache
6.  调整 PHP 参数
7.  使用单独的服务器进行静态处理。使用 nginx
8.  使用 varnish 缓存

HTH。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-05T16:47:40.887

我写了一篇关于[Drupal 中页面加载性能](http://wimleers.com/article/improving-drupals-page-loading-performance)的文章。你会在那里找到几乎所有你需要知道的关于那个主题的参考资料。正如其他人已经指出的那样，您绝对应该安装操作码缓存，例如 eAccelerator 或 APC。它们易于设置，并为您提供免费的性能提升！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-27T22:06:07.563

我找到了一些加速 Drupal 的方法。我使用的是 Godaddy，它比已经很慢的系统慢，但它帮助我发现了一些问题。另外，我使用的是比 Drupal 7 还要慢的 Commerce Kickstart。

Drupal 有点慢，所以让这些东西尽可能快是必要的。

1.  您需要一个快速的数据库连接（没有慢速网络数据库连接）。

2.  您可以在 php.ini/.user.ini 中修改一些配置设置。（见下面的链接）

3.  如果 Drupal 托管在托管公司，您需要选择响应时间最快的托管公司。（请参阅下面的链接）

4.  启用 Drupal 缓存。

5.  不要启用超过 50 个模块。

6.  如果您使用 MySQL，也可以使用 MySQL 进行查询缓存。

在那之后，与性能有关的很多事情都是程序化的。如果您想查看另一个将随着规模增长的数据库问题，请查看 Drupal 7 如何分解 Profile 实体，这意味着 Drupal 7 可能永远无法扩展。您可能必须自己编写模块来加速核心中已经很慢的部分。也许 Drupal 8 会处理一些问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T21:37:57.827

如果您确定数据库不是瓶颈，则它指向执行时间或服务器响应。

你在做任何类型的 PHP 操作码缓存吗？

还要检查您的 Apache 配置。它是仅在并发使用下执行缓慢，还是仅在一个访问者的情况下运行缓慢？

Drupal 上还有一个页面介绍了一些常见步骤： [服务器调优注意事项](http://drupal.org/node/2601)

当然，您可以忽略与数据库相关的那些。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-03T16:01:03.543

我最近启动了一个 Drupal 站点，它运行得非常快。最大的瓶颈（根据 Y!Slow 的说法）是我们添加的 ShareThis 应用程序。此外，谷歌分析的外部下载增加了一点时间。

此外，请确保您关闭了所有开发人员模块（它们可以添加 jscript 和样式开销），在测试时您没有以管理员身份登录，并使用具有最少附加组件（例如 Chrome）的浏览器，这可能一边做处理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-04T17:42:05.630

尝试安装 apc - [http://il.php.net/apc](http://il.php.net/apc)或 eccelerator - [http://eaccelerator.net/](http://eaccelerator.net/)

两者都提高了运行 PHP 的性能。在我测试的一些网站上，加载首页所需的时间从约 750 毫秒到约 300 毫秒。

我在 Windows 上使用 PHP/MySQL/Drupal 的经验很糟糕，有时更容易找到 LAMP duds。所以我建议 - 远离基于 Windows 的设置。

不是 stackoverflow.com 的真正答案......但系统站点尚不可用:)

# xna - XNA 2D 游戏引擎

> ID：711717
> 
> 赞同：14
> 
> 时间：2009-04-02T21:37:21.743
> 
> 标签：xna, 2d

我刚刚回到游戏开发领域，我对 XNA 印象深刻。我唯一的问题是我想要一个基于社区的*免费*2d 游戏引擎，以便我可以利用社区的力量。**有谁知道目前正在支持的优秀 XNA 2d 游戏引擎，还是我只需要自己编写一个？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T23:33:51.620

FlatRedBall 是一个不错的选择，并且得到了积极的支持。[http://www.flatredball.com/frb/](http://www.flatredball.com/frb/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-03T16:00:10.440

看起来发布的引擎几乎是您目前 2D 的唯一选择。[您可以在XNA 论坛上](http://forums.xna.com/forums/t/12882.aspx)找到 XNA 的可用游戏引擎列表。您也可以查看[DEngine](http://dengine.codeplex.com/)，但它看起来仍处于 alpha 阶段。

对于某些类型的游戏（例如基于图块的 RPG），有入门工具包，例如[RPG 入门工具包](http://creators.xna.com/en-US/starterkit/roleplayinggame)和[宇宙飞船游戏入门工具包](http://creators.xna.com/en-US/starterkit/netrumble)。如果您碰巧正在为其中一种类型开发游戏，则可以在这些示例的基础上进行构建。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-08-31T18:25:28.873

[冰淇淋](http://icecream.epsicode.net/)真的很甜，但最后我还是在测试版中检查。所以它有点错误，但我敢肯定，一旦他们得到正式版本。它已经非常棒并且非常可用。它带有奶昔，一个关卡/动画编辑器（太甜了！）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-02T21:39:34.563

GarageGames 的[TorqueX 2D](http://www.garagegames.com/products/torquex-2d)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-19T12:31:57.017

Kitae 游戏引擎目前正在大力开发@ [NullCity.com](http://kitae.nullcity.com/)

它目前处于测试阶段，但您可以注册进行测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-03-12T14:13:24.833

Synapse Gaming 的 SunBurn 拥有一个非常活跃的社区，它符合您的所有其他标准。他们只是推出了一个[WP7 游戏引擎](http://www.synapsegaming.com/blogs/johnk/archive/2010/11/16/sunburn-2-0-goes-mobile-on-windows-phone-7.aspx/ "Windows Phone 7 游戏引擎")，他们也是微软的官方合作伙伴。

[SunBurn XNA 游戏引擎](http://www.synapsegaming.com/ "SunBurn XNA 游戏引擎")

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-01-08T03:25:10.287

www.rpgcreation.com 有一个名为 Mirage XNA 的引擎，但您需要注册论坛才能查看。

# javascript - 是否有关于特殊字符/实体和 innerHTML 的任何规则？

> ID：711720
> 
> 赞同：1
> 
> 时间：2009-04-02T21:38:01.133
> 
> 标签：javascript, html, browser, cross-browser

当我从 javascript 中使用 innerHTML 时，浏览器（至少是 Safari 和 Firefox）似乎用它们的命名实体替换了某些字符和数字实体。

字符`\xa0`（非中断空格）被替换`&nbsp;`， `&#60;`（小于）被替换`&lt;`。但例如，变音符号 ü 不会被替换为`&uuml;`。

我还没有找到任何关于这种行为的文档。

一个简单的演示：

```
<h2 id="withoutnbsp">This does not use en be es pe (uses the \xa0 character)</h2>
<script>alert(document.getElementById("withoutnbsp").innerHTML);</script> 
```

可以在这里找到更详细的演示：

[http://gist.github.com/89434](http://gist.github.com/89434)

您可以使用要点页面上的“原始”链接在浏览器中查看它。

我需要确切地知道 innerHTML 替换了哪些字符。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T23:53:48.500

HTML 5 规范有当您在其上调用 innerHTML 时序列化 HTML 片段的规则，记录在此：[序列化 HTML 片段](http://www.w3.org/TR/2009/WD-html5-20090212/serializing-html-fragments.html)（请注意，innerHTML 不在 HTML 4 规范中，因此 HTML 5 规范是当前参考）。

TLDR 版本的规范：空格、尖括号、& 符号、等号和双引号是调用 innerHTML 时唯一被转义的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T21:57:04.927

根据[HTML 规范](http://www.w3.org/TR/REC-html40/sgml/entities.html)，它可能会用 HTML 字符实体替换它们。

# deployment - 使用 Cruise Control .Net 自动化 .Net 部署

> ID：711721
> 
> 赞同：7
> 
> 时间：2009-04-02T21:38:29.153
> 
> 标签：deployment, msbuild, continuous-integration, cruisecontrol.net

我目前有 CC.Net 设置来进行构建，它很棒。但现在我想一路走下去，也将它用于部署。我正在考虑在暂存和构建完成后安装 CC.Net，它会自动上传触发 forcebuild 触发器到暂存，并让它使用 msbuild 和 gac 的必要扩展，安装服务等。完成安装。

我也见过似乎有类似目标的 msdeploy。您如何看待我的计划，以及你们都如何进行自动化部署？

笔记

*   SMB（文件共享）在暂存网络中被禁用，从而消除了 psexec 的可能性。它被禁用的原因是我们希望网络被锁定，当我询问开放时，我被告知需要打开太多端口。跟认证有关系吗？

    *   可能是这种端口论点是假的。我以前设置过 Samba 共享，但我从未使用过 Active Directory，所以我闭嘴倾听。
*   只打开 FTP、RDP 和 HTTP

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-03T02:38:42.253

Richard，我们不想将 CruiseControl 放在临时或生产服务器附近的任何地方。

对于 LAN（即内部生产服务器），我们手动触发了生产部署 CC 任务，这些任务会停止 IIS（站点和应用程序池）、复制新站点并重新启动 IIS 内容。

对于 DMZ 部署（即互联网的东西，没有 AD 认证的连接可能），我们尽可能多地在内部进行构建并将结果压缩，包括执行“最后步骤”的 NAnt 脚本。有一个内部 CC 任务可以完成所有这些工作，并将 ZIP 通过 FTP 发送到目标服务器。要完成该过程需要手动干预：远程登录到盒子，解压缩然后运行 ​​NAnt 以“完成”部署（停止/复制/启动/无论如何）。

我不确定 GAC，但 IIS 似乎可以通过 .VBS 文件控制

```
' Connect to the WMI WebAdministration namespace.
Set oWebAdmin = GetObject("winmgmts:\\devserver.local\root\WebAdministration") 
' Specify the application pool.
Set oAppPool = oWebAdmin.Get("ApplicationPool.Name='ProjectName'") 
' Stop the application pool.
oAppPool.Stop
' now website; get the application website
Set objWebSite = GetObject("IIS://localhost/W3SVC/7") ' id of web site
' get the app pool object for the websites app pool id
Set objAppPool = GetObject("IIS://localhost/W3SVC/AppPools/ProjectName")
'stop the site
objWebSite.Stop()
' stop the app pool
objAppPool.Stop() 
```

对于我们`psexec.exe`通过 NAnt使用的服务

```
 <property name="Remote.Executor" value="${ToolsDir}\PSTools\psexec.exe" overwrite="false" />
  <!-- installs a particular windows service remotely from the command line -->
  <target name="installWindowsServiceRemote">
    <echo message="${Service.Install.Action}ing ${Service.Name} on ${Deploy.TargetServer}..." />
    <exec program="${Remote.Executor}">
      <arg line="\\${Deploy.TargetServer} ${Deploy.TargetFolder}\${Service.Name} /${Service.Install.Action}" />
    </exec>
  </target> 
```

无论如何，可能有几十种方法可以解决这个问题 - 内部自动化/外部手动步骤所需的设置对我们有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T19:52:23.097

我同意 Craig 的观点，您不希望在您的舞台服务器上使用 CC.NET。我们做从构建服务器和推送到开发的所有工作。和舞台。使用 MSBuild，我们为每个编译设置了目标，并将任何和所有部分推送到两个服务器或服务器组合，具体取决于哪个环境。因此，构建服务器上 CC.net 上的每个项目都对应于 MSBuild 中的一个目标或 tragets 以及所有连续构建。

# maintenance - 如何在维护意大利面条代码的同时保持理智

> ID：711722
> 
> 赞同：20
> 
> 时间：2009-04-02T21:38:35.643
> 
> 标签：maintenance

只是想听听一些建议（和安慰..），这将帮助我控制一些复杂的意大利面条代码——由多个程序员（通常从不见面）长时间开发的代码。该解决方案的功能只是相互叠加。

通常我倾向于看到两种程序员：

1.  “吓死程序员”——那些人不会碰任何他们不需要的东西。他们可能会使用快速而肮脏的修复来完成维护任务，这将使下一个程序员开始寻找他们的家庭地址；-)

    优点：
    有效

    缺点：
    你希望你永远不会再看到这段代码。

2.  “教师”——他们可能会重写整个代码，同时完全翻新其逻辑。

    优点：
    嗯，总得有人干脏活……

    缺点：
    需要更长的时间，并且可能最关键的功能之一会神奇地从产品中消失

很高兴听到您从程序员生活的阴暗面听到您的个人经历。

我特别想听到任何理论/实践建议，这些建议将帮助我深入研究意大利面维护任务而不会感到如此悲惨。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-02T21:41:11.797

在开始之前，我尝试将非常糟糕的遗留代码包装在测试中。老实说，我几乎在测试中扼杀了它！然后我有信心在需要的地方进行重构。

你可能喜欢阅读

[![封面](https://i.stack.imgur.com/qtGfs.jpg)](https://i.stack.imgur.com/qtGfs.jpg)

[有效地使用遗留代码](https://rads.stackoverflow.com/amzn/click/com/0131177052)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-04-02T21:59:47.353

虽然最好的建议是，正如其他关于该主题的海报所指出的那样，编写测试，但我经常处于不切实际的情况。如果代码那么糟糕（1000 行方法、嵌入和未记录的幻数、代码重复等），它还可能存在另一个问题，即它是深度耦合的，组件几乎不可能隔离。

（例子

*   一个在启动时加载和缓存数百个不同数据库对象的代码库。组件假设缓存的随机部分存在，部分缓存假设缓存的其他部分 - 换句话说，您必须加载整个东西才能获得任何东西
*   代码依赖于静态的、混杂的公共状态变量，无法确定谁在设置这些变量，甚至无法确定它们的含义）

我能提出的最佳建议：

*   尝试先解决简单/显而易见的事情。硬编码路径、幻数引用、明显的代码重复。也许摆脱最严重的 20% 违规行为的快速发布将是低风险的，并使后续步骤更容易完成。
*   获得组织对重构的支持——通常没有意愿或愿望去做不立即添加功能的工作，并且有破坏现有代码的风险。当然，重构有很好的论据，但并不是每个人都购买它们。如果组织不支持它，您可能不得不放弃它。
*   让其他开发人员也有同样的看法——如果他们做得好，他们可能和你一样对代码库不满意。如果新代码按照更好的标准构建并且人们受到激励，他们将开始修复旧代码，因为需要应用调整。
*   如果一个特定的子系统真的非常糟糕，并且已经到了几乎不可能进行新开发的地步，您可能可以利用这个机会来重建它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-02T21:42:02.153

文档。彻底记录。你所做的每一个改变——你发现的每一个警告，你追踪的每一个奇怪的逻辑流程，每次你认为“这可以做得更好”——记录下来。

这是在不进行大量重写的情况下减慢并最终消除系统熵的唯一方法。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-02T21:42:55.273

我知道的唯一方法是：

1.  编写测试
2.  重构
3.  运行测试
4.  修复损坏的东西
5.  为新功能编写测试
6.  引入新功能
7.  运行测试
8.  修复损坏的东西

你可以这样度过。

**注意**：有时很难对意大利面条代码进行单元测试：生成 HTML 的 3Klines 方法、与业务逻辑纠缠的 DAO、强耦合类......开始），并且像[Selenium](http://seleniumhq.org/)这样的一些测试工具可能会派上用场。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-02T21:40:57.883

两全其美。将您的项目组织成逻辑部分，最好使用逆向工程 UML 类图，并查看互连在哪里。任何松散连接的东西都是重构的理想选择。在任何停机时间，也要检查强连接，看看哪些组可以完全拆分为单独的模块，更改最少。在重写整个事情之前，先从高层次弄清楚到底发生了什么。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-02T21:54:16.947

我正在修复旧代码应用程序的错误。我尽量不抨击以前的开发人员（尤其是因为我还在学习）。我更改的所有内容都会进行广泛的评论，以便我可以再次找到它，以便下一个人了解代码是如何演变的。

永远记住，你不可能知道编写代码的所有环境。虽然这并不一定是糟糕的编程或逻辑的借口，但它肯定会让你的血压下降。

我还将遇到的每一个令人头疼的问题都视为学习和/或尝试新事物的新机会。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-02T22:23:32.960

以下是我在维护一个已有 10 年历史的遗留 perl 系统的同时解决这个问题的方法。稍微介绍一下背景，这是最糟糕的情况之一。当我开始在公司工作时，我最初很沮丧，因为代码设计和布局都很糟糕（这是我的第一份编程工作）。在那场演出结束时，我有了一个非常好的系统。

首先，每个新功能都作为新模块或方法添加。在现有代码之上没有任何东西被入侵。这让我可以为新东西编写单元测试，提供对它的信心，因此与旧东西集成只是一两行的问题。

其次，任何错误修正都是以同样的方式实现的。我会花一些时间弄清楚旧的东西发生了什么（而不是寻找错误），我会将它写成一个新方法（或模块），并将它包装在测试中，然后通常可以替换.

然而，这只有在你有时间并且有能力完成它的情况下才有效。如果不这样做，请跟踪您在任何给定错误上花费的时间。尤其是在同一个文件、进程或其他任何地方存在多个错误的情况下。在某个时间点，很容易指向给定的代码集合并说这太糟糕了，已经花费了 N 时间，是时候重写了。

我通过这种方法获得了足够的成功，获得了“法医程序员”的荣誉称号，这也是一项了不起的技能，因为新工作通常已经编写了一些代码：P

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-02T22:36:39.323

*   缓慢而深思熟虑。
*   尽可能写测试，但当你不能时不要沮丧。意大利面条代码很少是可测试的代码。
*   请记住，在您之前编辑代码的每个人都有充分的理由去做他们所做的事情。假设他们是最好的，你可能会得到回报。
*   在尝试更改代码之前了解代码。
*   在学习时记笔记，并在工作时保持最新状态。如果可以，请在 wiki 上保留并分享它们。
*   使用修订控制系统，使每个更改尽可能小且集中，并尽可能频繁地检查。
*   不要咬得比你能咀嚼的多。当您进行一项更改时，您无疑会发现应该清理的其他内容。将其添加到您的待办事项列表中，并继续专注于您最初的任务。
*   像对待露营地一样对待这个项目：让它保持比你发现它更好的状态。请记住，“更好”是相对的；你不能一次解决所有问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-02T21:53:15.340

出*酱*吧：）

如果那不是一个选择，那么……首先，试着把它搞清楚。对于我处理过的东西，这通常是最难的部分。你可以手动创建UML，你可以使用一些商业源代码“逆向工程”工具，或者你可以只跟踪代码。

当您对代码有所了解时，就该进行重构了。计划好。试着写一堆像样的测试。然后通过重构的迭代方法，编写额外的测试，检查（工作！）修改回到源代码控制。

根据您的受虐程度，这可能很有趣，也可能是您自己的地狱:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-02T21:43:37.550

虽然我自己从未这样做过，但这种方法很有意义。围绕现有的公开接口编写大量测试，以确保在您进入并重构实现的狄更斯时功能不会改变。这将确保任何重构都不会改变应用程序的运行方式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-02T21:49:49.360

我知道在我曾经做过系统管理员的一家知名保险公司中，使用的主要定价系统是一个 25 岁的大型机，称为 GenZ。我认为，自九十年代中期以来，一个新系统一直在开发中，目前正在测试中推出

大型机可能在 1980 年代运行良好——但随着公司的发展，添加了更多数据，系统需要容纳更多数据。应用了补丁，发生了更多问题，并且多年来一直如此。

目前，该系统与该保险公司使用的至少 200 个其他应用程序交互，因此更换它将是一项*非常*艰巨的工作，这可能是它被推迟这么久的原因。

现在新系统（称为 Maxx）正在推出，数百个应用程序将不得不逐步淘汰。

糟糕的编码并不是因为开发人员害怕做不需要的事情，而只是因为他们没有想得足够远，没有考虑最坏的情况，或者考虑到消费者、员工可能会是什么样子和未来的开发者。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-02T22:20:36.070

1.  首先，让管理层相信改进代码对于提供业务价值是必要的（比如将来添加功能变得更容易）。我个人浪费了宝贵的时间*来改进* 报废申请。
2.  彻底了解领域，某些类型的领域鼓励某些类型的（反）模式..这将有助于理解为什么事情是这样的。
3.  围绕遗留代码编写测试有助于我探索业务逻辑中造成现在代码混乱的各种细微差别。我个人从不针对遗留代码进行测试的代码覆盖率（尽管这是一种普遍宣传的方法），它只会让你发疯。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-19T17:36:41.290

好吧，我必须重构一个用 Coldfusion、javascript、html 编写的噩梦网站，并使用几个插件......我是这个应用程序的唯一开发者。最后一个维护网站和数据库的人被调走了。我被这个丑陋的野兽困住了。我确实重构了一些文件和功能，但问题和错误不断出现。

我的问题应该集中在修复错误或重构上，我想完全花时间重构而不是被拉来服务更改请求或错误。

有些文件是 8k 行，因为上一个开发人员（不是真正的开发人员）保留了复制和粘贴代码块而不是分离功能。这是一个非常紧密耦合的代码，一个文件中的一个小改动将需要在其他 4 到 5 个地方进行更改。

我建议将网站分解为可管理的小单元，然后从头开始重建。到目前为止，他们并没有真正倾听，而是一直在问为什么网站运行缓慢。

我通过从主网站（本地）拉出和测试代码来一次到达那里。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-19T18:04:24.013

我发现很多时候你可以将意大利面条的块分成至少单独的源文件，有时是单独的类，而无需重写任何实际逻辑。如果您可以从一两个错误修复中抽出一些时间来完成此操作，那么您将远远领先于您的起点。

稍后，当更多的错误出现时，您可能能够更好地模块化一些东西。慢慢地，你可以用这种方式把意大利面弄直。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2009-04-02T21:58:26.843

好吧，也许这正好适合我的情况，但它是这样的：

考虑到上述所有建议，如果我要长时间处理遗留代码，我会清理脏代码，非常流畅，所以我不会破坏它，如果不我不会打扰

# c# - XML 序列化和空值 - C#

> ID：711723
> 
> 赞同：21
> 
> 时间：2009-04-02T21:39:25.343
> 
> 标签：c#, asp.net

我有一个我序列化为 XML 的对象。如果对象中的属性之一为 null，则本机序列化忽略将其添加为属性。这是正常行为吗，如果是这样，有没有办法可以覆盖它？

前任：

```
public class Test
{
  [XmlAttribute]
  public string value {set; get; }

  [XmlAttribute]
  public string key {set; get; }
} 
```

当值为空时，我得到

```
<Root>
  <Test key="blah">
</Root> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-02T21:49:09.500

[XmlElement（IsNullable = true）](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.isnullable(VS.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T21:50:56.440

如果 Sunny 的回答不适合您，您可以通过实现 IXmlSerializable 接口来自定义序列化过程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T21:51:36.140

有关一些背景知识，请查看以下 ibm 文章[Representations of null in XML Schema](http://www.ibm.com/developerworks/xml/library/ws-tip-null.html)

另外查看答案 SO question [Serialize a nullable int](https://stackoverflow.com/questions/244953/serialize-a-nullable-int)可能对您的工作有所帮助。

# svn - 有没有人有使用 National Instruments CVI 和源代码控制的经验？

> ID：711727
> 
> 赞同：2
> 
> 时间：2009-04-02T21:40:47.463
> 
> 标签：svn, version-control, labwindows, cvi

我正在使用 NI 的 Labwindows CVI，并且正在尝试集成源代码控制。据说它适用于任何适合 MS API (MSSCC/SCC) 的东西，但我在实践中没有发现这种情况。如果有一个 SVN 服务可以很好地配合它，我会很高兴，但我想这要求太多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-15T00:05:00.280

您应该设置开发的方式应该如下：

选项 1：在 LabWindows CVI 中进行正常开发。
对于源代码控制，使用 Subversion，对于 Subversion 的接口，使用 TortiseSVN。我一直在使用 TortiseSVN 和 VS2008 和 VS2005 有一段时间了，我发现它很好。

选项 2：在 VS2005 或 VS2008 中进行正常开发，并链接到 National Instruments 提供的 Measurement Studio 库。在那里，您可以选择使用 C#、C++、C 或任何您想要的东西。您还可以集成其他库或子系统，例如 MatLab，并且您将获得额外的好处，即根据 Microsoft 技术与 National Instruments 技术来构建您的问题，其中支持要小得多。

您可以通过一些插件（[http://ankhsvn.open.collab.net/](http://ankhsvn.open.collab.net/)）将 Subversion 与 Visual Studio 集成，但我更喜欢使用 TortiseSVN。

选项 2 很好，因为您可以使用世界上最好的，Visual Studio >> LabWindows，Measurement Studio >> 自己动手，TortiseSVN >> VSS。

# c# - C# 中的关键字“事件”是可选的吗？

> ID：711732
> 
> 赞同：17
> 
> 时间：2009-04-02T21:42:10.640
> 
> 标签：c#, events, compiler-construction

eventOne（带有关键字'event'）和eventTwo（无关键字）有什么区别？

```
class Program
{
    public event EventHandler eventOne;
    public EventHandler eventTwo;

    public void RaiseOne()
    {
        if (eventOne != null)
            eventOne(this, EventArgs.Empty);
    }

    public void RaiseTwo()
    {
        if (eventTwo != null)
            eventTwo(this, EventArgs.Empty);
    }

    static void Main(string[] args)
    {
        var p = new Program();
        p.eventOne += (s, e) => Console.WriteLine("One");
        p.eventTwo += (s, e) => Console.WriteLine("Two");
        p.RaiseOne();
        p.RaiseTwo();
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-02T21:44:37.407

*   `eventOne`是一个由 type 的私有字段支持的公共*事件*`EventHandler`。
*   `eventTwo`是类型的公共*字段*`EventHandler`。

基本上一个事件*只*封装了“订阅”和“取消订阅”的思想，就像属性只封装了“获取”和“设置”的思想而不是实际的存储一样。（就 CLR 而言，事件也可以公开“raise”方法，但 C# 从不使用它。忽略它。）

有关代表和事件之间区别的更多信息，请参阅[我关于事件的文章](http://pobox.com/~skeet/csharp/events.html)（[备用链接）。](http://csharpindepth.com/Articles/Chapter2/Events.aspx)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-04-02T21:47:54.370

通过使用**event**关键字，你告诉 C# go generate 到隐藏的方法，**add_XXX**和**remove_XXX**为你的底层委托。这确保使用您的课程的任何人都只能附加和删除事件的代表。关键是你班外没有人提出这个事件，所以你可以完全控制什么时候会发生。

如果您不使用**事件**，那么您只是公开了一个任何人都可以添加、删除和调用的公共委托。您不太可能希望您的班级以外的任何人进行调用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-02T22:04:31.710

这是说明差异的程序，考虑到之前的答案

```
using System;
class Program
{
    static void Main(string[] args)
    {
        var a = new A();
        a.eventOne += (s, e) => Console.WriteLine("One");
        a.eventTwo += (s, e) => Console.WriteLine("Two");
        a.RaiseOne();
        a.RaiseTwo();
                // won't compile
        a.eventOne(null, EventArgs.Empty);
        a.eventTwo(null, EventArgs.Empty);
    }

}

class A {
    public event EventHandler eventOne;
    public EventHandler eventTwo;

    public void RaiseOne()
    {
        if (eventOne != null)
            eventOne(this, EventArgs.Empty);
    }

    public void RaiseTwo()
    {
        if (eventTwo != null)
            eventTwo(this, EventArgs.Empty);
    }
} 
```

# c# - 带有模板的 C# 类型限制委托

> ID：711744
> 
> 赞同：1
> 
> 时间：2009-04-02T21:44:43.177
> 
> 标签：c#, templates, delegates, limit

.net EventHandler 仅限于从 EventArgs 继承的模板。这是怎么做的？实现（在 vs 中引用）显示了以下代码：

```
[Serializable]
public delegate void EventHandler<TEventArgs>(object sender, TEventArgs e); 
```

但我认为 TEventArgs 只是一个名字。如何编写一个类型化的委托，限制从 MyClass 继承的任何内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T21:46:55.310

`TEventArgs`是一个*泛型类型参数*- 但它有一个约束。实际签名是：

```
[Serializable]
public delegate void EventHandler<TEventArgs>(object sender, TEventArgs e)
    where TEventArgs : EventArgs 
```

“ `where TEventArgs : EventArgs`” 位是类型约束，这意味着您只能提供is或派生类的*类型参数。*`TEventArgs``EventArgs`

基本上它只是“普通”的 C# 泛型，只是应用于委托声明。

# c# - 替换许多字符串的更好方法 - C# 中的混淆

> ID：711753
> 
> 赞同：8
> 
> 时间：2009-04-02T21:49:07.520
> 
> 标签：c#, optimization, string, performance, obfuscation

我试图混淆大量数据。我创建了一个要替换的单词（标记）列表，并且正在使用 StringBuilder 类逐个替换单词，如下所示：

```
 var sb = new StringBuilder(one_MB_string);
 foreach(var token in tokens)
 {
   sb.Replace(token, "new string");
 } 
```

这很慢！有什么简单的方法可以加快速度吗？

**标记**是大约一千个字符串的列表，每个字符串长度为 5 到 15 个字符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T23:41:25.160

不要在一个巨大的字符串中进行替换（这意味着您要移动大量数据），而是遍历字符串并一次替换一个标记。

为每个标记创建一个包含下一个索引的列表，找到第一个标记，然后将文本复制到标记到结果，然后替换标记。然后检查该标记下一次出现在字符串中的位置，以使列表保持最新。重复直到找不到更多的标记，然后将剩余的文本复制到结果中。

我做了一个简单的测试，这个方法在 208 毫秒内对 1000000 个字符串做了 125000 次替换。

Token 和 TokenList 类：

```
public class Token {

    public string Text { get; private set; }
    public string Replacement { get; private set; }
    public int Index { get; set; }

    public Token(string text, string replacement) {
        Text = text;
        Replacement = replacement;
    }

}

public class TokenList : List<Token>{

    public void Add(string text, string replacement) {
        Add(new Token(text, replacement));
    }

    private Token GetFirstToken() {
        Token result = null;
        int index = int.MaxValue;
        foreach (Token token in this) {
            if (token.Index != -1 && token.Index < index) {
                index = token.Index;
                result = token;
            }
        }
        return result;
    }

    public string Replace(string text) {
        StringBuilder result = new StringBuilder();
        foreach (Token token in this) {
            token.Index = text.IndexOf(token.Text);
        }
        int index = 0;
        Token next;
        while ((next = GetFirstToken()) != null) {
            if (index < next.Index) {
                result.Append(text, index, next.Index - index);
                index = next.Index;
            }
            result.Append(next.Replacement);
            index += next.Text.Length;
            next.Index = text.IndexOf(next.Text, index);
        }
        if (index < text.Length) {
            result.Append(text, index, text.Length - index);
        }
        return result.ToString();
    }

} 
```

使用示例：

```
string text =
    "This is a text with some words that will be replaced by tokens.";

var tokens = new TokenList();
tokens.Add("text", "TXT");
tokens.Add("words", "WRD");
tokens.Add("replaced", "RPL");

string result = tokens.Replace(text);
Console.WriteLine(result); 
```

输出：

```
This is a TXT with some WRD that will be RPL by tokens. 
```

**注意：**此代码不处理重叠标记。例如，如果您有标记“菠萝”和“苹果”，则代码无法正常工作。

编辑：
要使代码使用重叠标记，请替换此行：

```
next.Index = text.IndexOf(next.Text, index); 
```

使用此代码：

```
foreach (Token token in this) {
    if (token.Index != -1 && token.Index < index) {
        token.Index = text.IndexOf(token.Text, index);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-02T22:07:26.307

好的，你明白为什么要花很长时间了吧？

您有 1 MB 的字符串，对于每个令牌，replace 正在遍历 1 MB 并制作一个新的 1 MB 副本。好吧，不是一个精确的副本，因为找到的任何标记都将替换为新的标记值。但是对于每个令牌，您读取 1 MB，更新 1 MB 存储空间，并写入 1 MB。

现在，我们能想出更好的方法吗？不如不为每个令牌迭代 1 MB 字符串，而是遍历一次。

在走之前，我们将创建一个空的输出字符串。

当我们遍历源字符串时，如果我们找到一个标记，我们将`token.length()`向前跳转字符，并写出混淆的标记。否则我们将继续下一个字符。

本质上，我们将这个过程从里到外翻过来，在长字符串上执行 for 循环，并在每一点寻找一个标记。为了加快速度，我们需要快速循环标记标记，因此我们将它们放入某种关联数组（一组）中。

> 我明白为什么它需要很长时间，但不确定修复。对于我正在执行替换的每个 1 MB 字符串，我有 1 到 2000 个要替换的 tokan。因此，逐个字符地寻找一千个标记中的任何一个似乎并不快

一般来说，什么是编程时间最长的？新的记忆。

现在，当我们创建一个 StringBuffer 时，可能发生的情况是分配了一些空间（比如 64 字节，并且每当我们追加超过其当前容量时，它可能会增加一倍的空间。然后复制旧字符缓冲区到新的。（​​有可能我们可以 C 的 realloc，而不必复制。）

因此，如果我们从 64 字节开始，为了达到 1 MB，我们分配并复制：64，然后是 128，然后是 256，然后是 512，然后是 1024，然后是 2048 ......我们这样做二十次以达到 1 MB . 在到达这里时，我们分配了 1 MB 只是为了把它扔掉。

通过使用类似于 C++`reserve()`函数的东西进行预分配，至少可以让我们一次性完成所有操作。*但对于每个*令牌来说，它仍然是一次性的。您至少要为*每个*令牌生成一个 1 MB 的临时字符串。如果您有 2000 个令牌，那么您将分配大约 20 亿字节的内存，最终都是 1 MB。每个 1 MB 一次性文件都包含前一个结果字符串的转换，并应用了当前标记。

这就是为什么这需要这么长时间。

现在是的，决定在每个字符上应用哪个标记（如果有的话）也需要时间。您可能希望使用正则表达式，它在内部构建一个状态机来运行所有可能性，而不是像我最初建议的那样进行集合查找。但真正让你感到沮丧的是分配所有内存的时间，用于 2000 个 1 MB 字符串的副本。

丹·吉布森建议：

> 对您的标记进行排序，这样您就不必为每个字符寻找一千个标记。排序需要一些时间，但最终可能会更快，因为您不必搜索每个字符的数千个标记。

这就是我将它们放入关联数组（例如，Java HashSet）的原因。但是另一个问题是匹配，例如，如果一个标记是“a”而另一个是“an”——如果有任何共同的前缀，也就是说，我们如何匹配？

这就是 Keltex 的答案派上用场的地方：他将匹配委托给 Regex，这是一个好主意，因为 Regex 已经定义了（贪婪匹配）并实现了如何做到这一点。一旦匹配成功，我们就可以检查捕获的内容，然后使用 Java Map（也是一个关联数组）为匹配的未混淆标记找到混淆标记。

我想把我的答案集中在如何解决这个问题上，而且首先要解决为什么会出现问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T22:06:28.850

如果您可以通过正则表达式找到您的标记，则可以执行以下操作：

```
RegEx TokenFinder = new Regex("(tokencriteria)");
string newstring = myRegEx.Replace(one_MB_string, new MatchEvaluator(Replacer)); 
```

然后将 Replacer 定义为：

```
private string Replacer(Match match)
{
    string token= match.Groups[1].Value;
    return GetObfuscatedString(token);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T22:01:21.140

一次构建一个标记的字符串会更快吗，只在需要时替换？为此，`GetObfuscatedString()`可以这样实现：

```
string GetObfuscatedString(string token)
{
    if (TokenShouldBeReplaced(token))
        return ReplacementForToken(token)
    else
        return token;
} 
```

现在，您可以像这样将每个令牌添加到构建器：

```
StringBuilder sb = new StringBuilder(one_MB_string.Length);
foreach (string token in tokens)
{
    sb.Append(da.GetObfuscatedString(token));
} 
```

您只需要在字符串上进行一次传递，它可能会更快。

# string - VBA 将字符串解析为标记

> ID：711757
> 
> 赞同：1
> 
> 时间：2009-04-02T21:49:53.807
> 
> 标签：string, vba, parsing

我有一个字符串，里面有一堆多字母代码，我想根据这些代码解析它。我不确定如何让它查看多个字符以确定它是否构成代码的一部分。

我的字符串如下所示：

BBCTEEBOBBB

我想解析出这些实例：

E BB CT 鲍勃

所以结果应该是如下所示的输出（或数组）：

BB CT E E BOB BB

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T22:26:02.360

我会使用正则表达式。在**工具 | 参考**，添加您 PC 上可用的 Microsoft VBScript 正则表达式库的最高版本（我的 5.5）。然后您可以使用如下代码：

```
Sub main()
  Dim x, m
  Set x = myparser("BBCTEEBOBBB")
  For Each m In x
    Debug.Print m.Value
  Next
End Sub

Function myparser(string_to_parse)
  Dim splitter As New RegExp
  splitter.Pattern = "E|BB|CT|BOB"
  splitter.Global = True
  Set myparser = splitter.Execute(string_to_parse)
End Function 
```

该`myparser`函数生成一个`MatchCollection`可以像在`main`子例程中一样巡视的对象。输出是输入字符串中找到的所有匹配项的列表。您应该能够轻松地将其转换为生成数组或空格分隔的字符串。

# sharepoint - 组织是否曾经在 80 以外的端口上使用过 SharePoint？

> ID：711760
> 
> 赞同：1
> 
> 时间：2009-04-02T21:51:28.763
> 
> 标签：sharepoint

有没有人遇到过设置为使用端口 80 以外的 SharePoint 安装？我并不真正关心测试服务器或管理界面的使用......只是用户会接触到什么。

我的应用程序当前设置为利用 WebDAV 迷你重定向器来协助其 SharePoint 界面，并且该软件不能在使用端口 80 以外的 SharePoint 服务器上使用。试图弄清楚我可能遇到的问题有多大应用广泛部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:33:09.240

我假设您不是指 SharePoint 的管理界面？

即便如此，是的，人们使用不同的端口，甚至是多个 IP 地址、主机头等。您的应用程序应该处理这个问题，否则它不会得到太多使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T11:46:11.533

是的，我们使用端口 443 ;)

除此之外，我将 mysites 设置在不同的端口上，这主要是为了一种便宜/简单的方法，以确保它不能通过防火墙访问，而且因为 SSL 和主机标头对于 IIS 6 来说是一个痛苦；并且网络服务想减少分配的IP地址数量。

我遇到的大多数 Web 应用程序使用主机头或不同的端口都没有问题。至于最终用户，我认为我们可能已经到了他们能够在端口下并在需要时输入不同的端口的地步。

# logging - 在多台机器上搜索日志

> ID：711764
> 
> 赞同：3
> 
> 时间：2009-04-02T21:54:03.110
> 
> 标签：logging, production-environment

有谁知道一个好工具，它允许您跟踪和搜索分布在一组机器上的日志文件。我们有多个 Web 服务器和应用程序服务器，一个一个地挖掘每个服务器上的日志是一件很痛苦的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:51:51.113

我不知道安装/配置有多少工作量，但我听说过一些关于[splunk](http://www.splunk.com/)的好消息。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:01:24.463

您可以使用以下 bash 脚本（如果您可以通过 ssh 连接到远程机器并具有对日志文件的读取权限）

(echo "machine1"; ssh machine1 tail /var/log/messages; echo "machine2"; ssh machine2 tail /var/log/messages;) | 较少的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-14T01:10:21.990

Splunk 在聚合日志文件以搜索并将结果显示为按时间计算的命中计数图表方面非常有效，但它也很昂贵。我最近了解了[Kibana](http://it.toolbox.com/blogs/future-of-work/processing-performance-data-with-kibana-64867)，它是 splunk 的开源替代品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:52:07.727

您可以使用[fabric](http://docs.fabfile.org/en/1.5/)来跟踪多个主机并 grep 所有结果：

```
$ fab -P -u 'USER' -p 'PASSWORD' --linewise -H host1,host2,host3 -- tail -f /path/to/my/log.log | grep ERROR 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-13T14:53:36.640

您可以使用一个小的 shell 脚本来实现这一点：

*   定义你的参数：

```
machines=("user@address1" "user@address2" "user@address3")
log_files=("/path/to/application.log" "/path2/to2/application.log" "/path3/to3/application.log" "/path4/to4/application.log") 
```

*   跟踪每台机器并等待中断：

```
#!/bin/bash

pids_arr=()
for ((i=0;i<${#machines[@]};++i)); do
    ssh "${machines[$i]}" "tail -f ${log_files[$i]}" & pids_arr+=("$!")
done

pids="${pids_arr[*]}"
trap "kill -9 $pids" SIGINT SIGKILL
for pid in ${pids}; do wait $pid; done
trap - SIGINT SIGKILL 
```

*额外：如果您不想查看作业监视器日志，可以使用：*

```
job_mon=${-//[^m]/} ; set +m

(...)

sleep 0 ; if [[ -n "$job_mon" ]]; then set -m; else set +m; fi 
```

# c++ - Rolling hash的快速实现

> ID：711770
> 
> 赞同：18
> 
> 时间：2009-04-02T21:56:51.697
> 
> 标签：c++, hash

我需要一个滚动哈希来搜索文件中的模式。（我正在尝试使用[Rabin-Karp 字符串搜索算法](https://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)）。

我了解一个好的**哈希**如何工作以及一个好的**滚动哈希**应该如何工作，但我无法弄清楚如何在滚动哈希时有效地实现*除法*（或逆乘法）。我还阅读了 rsync 使用*adler32*的滚动版本，但这看起来不像是一个足够随机的散列。

理想情况下，如果您能指出一个优化的 C/C++ 实现，那就太好了，但是任何指向正确方向的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-03T01:44:48.453

Cipher 的“主要基础”想法应该可以正常工作 - 尽管他发布的解决方案看起来有点粗略。

我认为这种方法不需要逆乘法。这是我的解决方案：

假设我们当前散列的字符串是“abc”，我们想要附加“d”并删除“a”。

就像 Cipher 一样，我的基本哈希算法将是：

```
unsigned hash(const string& s)
{
    unsigned ret = 0;
    for (int i = 0; i < s.size(); i++)
    {
        ret *= PRIME_BASE; //shift over by one
        ret += s[i]; //add the current char
        ret %= PRIME_MOD; //don't overflow
    }
    return ret;
} 
```

现在，要实现滑动：

```
hash1 = [0]*base^(n-1) + [1]*base^(n-2) + ... + [n-1] 
```

我们想在最后添加一些东西并删除第一个值，所以

```
hash2 = [1]*base^(n-1) + [2]*base^(n-2) + ... + [n] 
```

首先我们可以添加最后一个字母：

```
hash2 = (hash1 * PRIME_BASE) + newchar;
=> [0]*base^n + [1]*base^(n-1) + ... + [n-1]*base + [n] 
```

然后简单地减去第一个字符：

```
hash2 -= firstchar * pow(base, n);
=> [1]*base^(n-1) + ... + [n] 
```

重要说明：您必须小心溢出。您可以选择让它溢出 unsigned int，但我认为它更容易发生冲突（但也更快！）

这是我的实现：

```
#include <iostream>
#include <string>
using namespace std;

const unsigned PRIME_BASE = 257;
const unsigned PRIME_MOD = 1000000007;

unsigned hash(const string& s)
{
    long long ret = 0;
    for (int i = 0; i < s.size(); i++)
    {
        ret = ret*PRIME_BASE + s[i];
        ret %= PRIME_MOD; //don't overflow
    }
    return ret;
}

int rabin_karp(const string& needle, const string& haystack)
{
    //I'm using long longs to avoid overflow
    long long hash1 = hash(needle);
    long long hash2 = 0;

    //you could use exponentiation by squaring for extra speed
    long long power = 1;
    for (int i = 0; i < needle.size(); i++)
        power = (power * PRIME_BASE) % PRIME_MOD;

    for (int i = 0; i < haystack.size(); i++)
    {
        //add the last letter
        hash2 = hash2*PRIME_BASE + haystack[i];
        hash2 %= PRIME_MOD;

        //remove the first character, if needed
        if (i >= needle.size())
        {
            hash2 -= power * haystack[i-needle.size()] % PRIME_MOD;
            if (hash2 < 0) //negative can be made positive with mod
                hash2 += PRIME_MOD;
        }

        //match?
        if (i >= needle.size()-1 && hash1 == hash2)
            return i - (needle.size()-1);
    }

    return -1;
}

int main()
{
    cout << rabin_karp("waldo", "willy werther warhol wendy --> waldo <--") << endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-03T02:20:47.570

一些快速实现的指针：

1.  避免模​​ n 运算（类似 C 的语言中的 %）使用掩码 n - 1，其中 n 是 2^k，包括哈希表查找的操作。是的，可以使用非素数模数产生良好的散列。
2.  选择具有良好品质因数的乘数和指数，有关详细信息，请参阅[本文](http://www.ams.org/mcom/1999-68-225/S0025-5718-99-00996-5/S0025-5718-99-00996-5.pdf)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T23:27:27.143

这是我前一阵子写的。它是用 c# 编写的，但与 c 非常接近，您只需添加几个参数。这**应该**可以，但我没有测试这个版本，我删除了几行会忽略大小写或非单词字符的行。我希望这有帮助

```
private const int primeBase = 101;
//primeBase^2*[0]+primeBase^1*[1]+primeBase^0*[2]
//==
//primeBase*(primeBase*[0]+[1])+[2]
public static int primeRollingHash(String input, int start, int end)
{
    int acc = 0;
    for (int i = start; i <= end; i++)
    {
        char c = input[i];
        acc *= primeBase;
        acc += c;
    }
    return acc;
}

public static int primeRollingHash(String input)
{
    return primeRollingHash(input, 0, input.Length - 1);
}

public static int rollHashRight(int currentHashValue, String input, 
                                int start, int newEnd)
{
    if (newEnd == input.Length)
        return currentHashValue;
    int length = newEnd - start - 1;
    int multiplier = primeBase;
    char newChar = input[newEnd];
    int firstValue = input[start];
    if(length>0)
        firstValue *= length * primeBase;
    return (currentHashValue - firstValue) * multiplier + newChar;
} 
```

# c# - 为什么我的评论没有包含在 SandCastle 生成的 .chm 中？

> ID：711774
> 
> 赞同：0
> 
> 时间：2009-04-02T21:57:26.237
> 
> 标签：c#, documentation, sandcastle

我的 .chm 已生成，但我对类、命名空间、字段、成员的注释未生成。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T23:29:58.353

确保您实际上正在生成 XML 文件，即在 Visual Studio 中项目属性的“构建”选项卡中检查并指定了“XML 文档文件”，并且 Sandcastle 知道在磁盘上的何处可以找到生成的文件。如果您不制作此文件，Sandcastle 将生成一个结构正确但不包含注释的 chm。

编辑：抱歉，现在我看到 Cheeso 的回答指向了具有相同想法的消息。我一开始没有检查链接，因为它有反对票，我认为它无关紧要。

# asp.net-mvc - 尝试在 ASP.NET-MVC 中的单个视图中组合“视图”和“编辑”的问题

> ID：711778
> 
> 赞同：2
> 
> 时间：2009-04-02T21:59:03.610
> 
> 标签：asp.net-mvc

我有一个图片库，其中包含以下路线：

```
 // gallery id
    routes.MapRoute(
       "gallery-route",
       "gallery/{galleryID}/{imageID}/{title}",
       new { controller = "Gallery", action = "Index", galleryID = (string)null, imageID = (string) null, title = (string) null},
       new { galleryID = @"\d+" }
    ); 
```

我可以有这样的 URL：

> example.com/gallery/4/23 - 显示画廊 4 和图像 23
> 
> example.com/gallery/4 - 显示画廊 4 和该画廊中的第一张图片

我试图创建一个“就地编辑”模式，让管理员可以编辑图像并遇到几个问题。目前编辑功能是非 AJAX。

1）我应该如何保持“粘性”编辑模式参数。每张图片旁边不会有“编辑”按钮。我希望编辑模式是“粘性的”，但后来我发现我要么需要在会话中设置它，要么需要为页面上的每个链接添加一个参数，这很笨拙。

2) 我为此视图启用了缓存。因此，如果我进行更改并刷新 - 原始缓存视图仍然存在。

谁能给我任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T22:20:43.043

为什么不根据用户授权状态更改视图上的输出。在 ascx 中使用内联代码和 Html 辅助函数来为只读角色和编辑器角色写出 HTML 中的值，在输入控件周围添加一个带有当前值的帖子表单。然后在控制器上处理 post 在单独的过程中保存编辑。

或者简单地添加一个编辑视图 ascx 以及一个读取视图 ascx。

此外，当 post 控制器过程触发时，用 post 中记录的新数据替换缓存对象。

最后，你们在管理图库时遇到了图像缓存问题。尝试在查询中添加一个随机字符串，例如：

```
function GetNewUrl(url)
{
Random rnd = new Random();

return url +"?"+rnd.Next(1000).ToString();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-19T12:40:46.077

进行更改时，您需要刷新页面的缓存。当用户以管理员身份登录时，不要显示缓存页面或缓存页面，因为他们将有不同的视图和编辑控件等。对于管理员可以选择在整个站点中处于编辑模式的粘性模式必须存储在会话中。我使用基于[此](http://blog.codeville.net/2008/10/15/partial-output-caching-in-aspnet-mvc/)的东西来缓存控制器操作，并使用另一种方法来确定是否缓存输出/使用缓存的输出。

# c++ - 以字符数组为参数的模板元编程

> ID：711779
> 
> 赞同：12
> 
> 时间：2009-04-02T21:59:19.710
> 
> 标签：c++, templates, gcc, c++11, metaprogramming

我在 GCC 4.3.2 的 C++11 的半实现中使用 TMP，我想知道是否有办法以某种方式执行以下操作：

```
template <char x, char... c>
struct mystruct {
...
};

int main () {

   mystruct<"asdf">::go();

} 
```

它显然不会让我那样做，而且我认为在编译时使用用户定义的文字来转换“asdf”字符串会很幸运，但是 GCC 4.3 不支持用户定义的文字...

有什么建议么？我宁愿不做'a'，'s'，'d'，'f'，因为这严重阻碍了我对这个项目的计划。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-03T00:37:21.360

我解决了一个类似的问题。我们需要为每个名称使用不同的类型

```
template< const char* the_name >
class A
{
    public:
    const char* name( void )
    {
        return the_name;
    }
};

extern const char g_unique_name[]; // defined elsewhere
typedef A<g_unique_name> A_unique; 
```

这将使您在编译时访问名称和唯一的实例化。但是，它不会让您在运行时访问单个字符。

如果您想要单个字符访问，实现它的唯一方法是使用用户定义的文字。C++0x 将被扩展以允许上面的 main 函数中的语法，但它仍会将模板绑定到字符指针而不是编译时字符数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-03T01:10:59.547

可悲的是，您仍然必须将其拆分为单独的字符，例如：

```
myTemplate<'s','t','r','i','n','g'> 
```

在我看来，这是对新标准的巨大疏忽。其他一些人同意了，并尝试在 GCC 中实现该行为，并取得了不错的效果。[你可以在这里](http://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/9b0edd169ba2ce3c)找到那个线程。

编辑：链接有一些奇怪的问题，所以从这里剪切和粘贴：

[http://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/9b0edd169ba2ce3c](http://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/9b0edd169ba2ce3c)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-20T10:27:04.827

试试这个：

```
extern const char SOMESTRING[] = "stringhere"; //extern linkage required!

template<const char * const STR>
struct MyStruct
{
  static std::string doThis() { return STR; }
};

MyStruct<SOMESTRING>   testObj; //ok! 
```

克里斯

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-10-22T17:21:36.287

最近在 Boost.MPL 中添加了一个“[字符串](http://www.boost.org/doc/libs/1_40_0/libs/mpl/doc/refmanual/string.html)”，允许编写：

```
typedef mpl::string<'asdf'> asdf;
typedef mpl::push_back<asdf, mpl::char_<'!'> >::type asdf_bang;

BOOST_ASSERT(0 == std::strcmp(mpl::c_str<asdf_bang>::value, "asdf!")); 
```

请注意，上面显示的示例有点做作，因为必须拆分由超过 4 个字符组成的“字符串”。例如：

```
typedef mpl::string<'hell','o wo','rld'> hello; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T00:08:11.993

在 C++11 中，无法在编译时将临时字符串存储在任何地方。所以我可以建议你这种方法：（这是快速制作的草图，但描述性很好）

```
#include <stdio.h>

template <char...>
struct StringTuple;

template <char TargHead>
struct StringTuple<TargHead> {
    static constexpr char kSymbol = TargHead;

    static void print() {
        printf(kSymbol ? "%c\n" : "\n", kSymbol);
    }
};

template <char TargHead, char... TargTail>
struct StringTuple<TargHead, TargTail...> {
    using Next = StringTuple<TargTail...>;
    static constexpr char kSymbol = TargHead;

    static void print() {
        if (kSymbol) {
            printf("%c", kSymbol);
            Next::print();
        } else {
            printf("\n");
        }
    }
};

constexpr int length(char *string) {
    return (string[0] == 0) ? 1 : (length(string + 1) + 1);
}

constexpr char get(char *string, int i) {
    return i < length(string) ? string[i] : 0;
}

#define ST(string) \
    StringTuple< \
    get(string, 0), \
    get(string, 1), \
    get(string, 2), \
    get(string, 3), \
    get(string, 4), \
    get(string, 5), \
    get(string, 6), \
    get(string, 7), \
    get(string, 8), \
    get(string, 9), \
    get(string, 10), \
    get(string, 11), \
    get(string, 12), \
    get(string, 13), \
    get(string, 14), \
    get(string, 15), \
    get(string, 16), \
    get(string, 17), \
    get(string, 18), \
    get(string, 19), \
    get(string, 20), \
    get(string, 21), \
    get(string, 22), \
    get(string, 23), \
    get(string, 24), \
    get(string, 25), \
    get(string, 26), \
    get(string, 27), \
    get(string, 28), \
    get(string, 29), \
    get(string, 30), \
    get(string, 31), \
    get(string, 32), \
    get(string, 33), \
    get(string, 34), \
    get(string, 35), \
    get(string, 36), \
    get(string, 37), \
    get(string, 38), \
    get(string, 39), \
    get(string, 40), \
    get(string, 41), \
    get(string, 42) \
    >

int main() {
    ST("Hello, compile-time world!")::print();
} 
```

生成部分宏的 Bash 代码：

```
for i in `seq 0 42`; do echo "    get(string, $i), \\"; done 
```

您必须将大量（1000 或更多）传递给此生成器以支持所有字符串，并且如果字符串超过此限制，您必须进行静态断言。

* * *

我在自己的科学项目中使用这种生成的宏。我知道这看起来很乱，但它确实有效。生成宏的使用示例：

```
#define PRINT(a) print(a);
FOREACH_MACRO(PRINT, a, b, c) // print(a);print(b);print(c); 
```

我会尝试找到更漂亮的解决方案，但首先我会使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T22:12:12.457

我不确定您想要实现什么，但是当您将“asdf”传递给模板时，它的类型是 char *，值是字符串的地址。因此，像概述的那样简单的方法将失败。如果不知道您首先要解决什么问题，就很难推荐任何东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T22:21:54.167

你不能那样做。从标准中的 14.3.2 开始：

非类型、非模板模板参数的模板参数应为以下之一：

*   整数或枚举类型的整数常量表达式；或者
*   非类型模板参数的名称；或者
*   具有外部链接的对象或函数的地址，包括函数模板和函数模板 ID，但不包括非静态类成员，表示为 & id-expression 其中 & 是可选的，如果名称指代
*   一个函数或数组，或者如果相应的模板参数是一个引用；或者
*   计算结果为空指针值的常量表达式（4.10）；或者
*   一个常量表达式，计算结果为空成员指针值 (4.11)；或者
*   指向成员的指针，如 5.3.1 中所述。
*   **[注意：字符串文字（2.13.4）不满足任何这些类别的要求，因此不是可接受的模板参数**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-02T22:23:23.647

引用新标准草案：

> 14.3.2 模板非类型参数 [temp.arg.nontype]
> 
> 2 注意：字符串文字 (2.13.4) 不满足任何这些类别的要求，因此不是可接受的模板参数。

**例子：**

```
template<class T, char* p>
class X 
{ 
X(); 
X(const char* q) { /... / } 
}; 

X<int, "Studebaker"> x1; // error: string literal as template-argument char p[] = "Vivisectionist";
X<int,p> x2; // OK 
```

试试这个，但我不确定，因为[http://gcc.gnu.org/gcc-4.3/cxx0x_status.html](http://gcc.gnu.org/gcc-4.3/cxx0x_status.html)没有说明这个特性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-16T23:41:15.983

莫蒂错了。

不幸的是，当前标准 (C++11) 不支持字符串参数的可变模板文字运算符，它仅适用于数字。

```
template <char... Args>
operator ""_op();

...

1212_op; // legal, calls operator ""_op<'1','2','1','2'>;
"1212"_op; // illegal 
```

我不明白这个限制的目的。

# asp.net - 带有 OnLoad 事件的 ASP.NET 页面基类不允许派生类触发 OnLoad

> ID：711780
> 
> 赞同：1
> 
> 时间：2009-04-02T21:59:28.947
> 
> 标签：asp.net

我有一个用于项目中所有页面的自定义 PageBase 类。在我的 BaseClass 中，我`protected override void OnLoad(EventArgs e)`声明了一个方法。这种方法似乎使我的派生类无法抛出自己的 OnLoad 事件。使两个 OnLoad 事件都能够工作的首选方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T22:04:26.720

在您的派生类中：

```
protected override void OnLoad(EventArgs e)
{
   //do the specific work
   //....
   //
   base.OnLoad(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T22:05:21.787

不知道为什么这不起作用。您是在派生类中覆盖 OnLoad 还是只是连接到 Load 事件？如果您只是连接到加载事件，您确定您的基类 OnLoad 事件正在调用 base.OnLoad()？

# .net - 将 URL 字符串解析为树层次结构

> ID：711793
> 
> 赞同：2
> 
> 时间：2009-04-02T22:04:20.823
> 
> 标签：.net, sql, treeview

我有一个标题表，其中包含网页列表。每条记录都有一个页面 URL 字段，我希望将其解析为层次结构（TreeView）。我不确定最好的解决方法，我在让它工作时遇到了问题。

以下是 URL 的示例：

```
/file1.aspx
/file2.aspx
/aFolder/file.aspx
/aFolder/file2.aspx
/bfolder/file.aspx
/bFolder/cFolder/file.aspx 
```

我想将这种类型的列表放入文件资源管理器样式的树视图中，您可以展开文件夹，然后在最后选择文件。

就像是

```
--Root
  |
  +-aFolder
  |   - aFolderFile1.aspx
  |   - aFolderFile2.aspx
  +-bFolder
      +-cFolder
      |    -cFolderFile1.aspx
      -bFolderFile1.aspx 
```

真实数据中显然有更多的子文件夹和文件。

我正在寻找的是一些代码，无论是 .NET 还是 SQL 来解析我的字符串。我尝试使用一些使用[WITH](http://msdn.microsoft.com/en-us/library/ms175972(SQL.90).aspx)和[UNION ALL](http://msdn.microsoft.com/en-us/library/ms180026(SQL.90).aspx)的 SQL，但我无法让它为我工作。

为了将它绑定到 TreeView，数据源需要有一个父字段才能关联节点。因此，例如文件 cFolderFile1.aspx 的父级是 cFolder，而 cFolder 的父级是 bFolder，依此类推....

希望我已经包含了足够的信息。如果没有，请告诉我，我会编辑帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-02T22:09:08.033

我很确定您可以将 SqlDataSource 直接绑定到 .NET 树视图。以下是两个涵盖该内容的论坛：

[从 SqlDataSource 构建树视图](http://forums.asp.net/p/1375090/2923055.aspx)

[动态树视图](http://forums.asp.net/t/1378432.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T20:25:01.363

谢谢大家的建议。这些链接似乎都不是我想要的，所以我最终把一些东西放在一起。

有一堆代码，但总的来说，我将 URL 列表读入具有一些额外属性的通用列表，并使用一些正则表达式语句来解析路径。

因为 URLS 列表没有任何类型的父 ID/子 ID，所以我使用了[FIND](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)函数并获得了我需要的部分。

# c# - 用 C# 编写可执行函数

> ID：711797
> 
> 赞同：0
> 
> 时间：2009-04-02T22:04:40.633
> 
> 标签：c#, console-application, exe

我对这一切真的很陌生。我需要用 C# 编写一个 exe 应用程序。我需要做的是能够通过控制台将值传递到函数中。但我不确定如何存储通过控制台输入的值......

我知道我们可以使用 Read() 来读取输入的内容，但是，当我处理多个值时，我该怎么做呢？任何帮助将不胜感激！！提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T22:22:22.480

您首先选择控制台应用程序模板（在新项目中）

然后，在 Main 函数中，您可以一次读取一行

```
string line = Console.ReadLine(); 
```

这可能会将您的问题转移到：如何从字符串中获取值？

如果你一次只有一个 int，它是

```
int x = int.Parse(line); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T22:08:54.850

您是指将命令行参数传递给控制台应用程序吗？如果是这样，则有一个字符串数组参数（例如 args）来保存它们。请参阅[此代码](http://www.freevbcode.com/ShowCode.asp?ID=9285)。

```
static void Main(string[] args)
{
} 
```

您还可以使用[Environment.GetCommandLineArgs](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T22:31:20.397

嗯，我想他想知道如何重复读取一些值并将其传递给函数。

为此，您可以使用简单的 while 循环。

```
string data = Console.ReadLine();
do {
  dummyFunction(data);
  data = Console.ReadLine();
} while (data != ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-03T00:18:27.863

```
int year, month, day;
Console.WriteLine("Please enter your birth year : ");
year = int.Parse(Console.ReadLine());
Console.WriteLine("Please enter your birth month : ");
month = int.Parse(Console.ReadLine());
Console.WriteLine("Please enter your birth day : ");
day = int.Parse(Console.ReadLine());
Console.Write("You are ");
Console.Write(CalculateAge(year, month, day));
Console.Write(" years old."); 
```

另一种方法是：

```
Console.WriteLine("Please enter your birthday in the format YY-MM-DD : ");
string line = Console.ReadLine();
string[] parts = line.Split(new char[] { '-' });
int age = CalculateAge(parts[0],parts[1],parts[2]);
Console.WriteLine("You are {0} years old.", age); 
```

-PLEASE- 做一些输入检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T22:07:46.180

您想以编程方式将文本编译成代码吗？如果是这样，您应该阅读 Microsoft 的此 KB 条目。[如何使用 C# 编译器以编程方式编译代码](http://support.microsoft.com/kb/304655)

或者，如果您想在控制台中从用户那里获取输入，您应该使用`Console.ReadLine()`.

```
Console.Write("Enter your name: ");
string name = Console.ReadLine();

Console.Write("Enter your age: ");
int age = int.Parse(Console.ReadLine());

Console.Write("Hello {0}, you are {1} years old.", name, age); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T22:31:18.340

您基本上可以手动进行解析工作。例如，如果输入是姓名，则后跟年龄。

```
Natthawut 22 
```

您可以使用 Console.ReadLine() 来获取字符串`"Nattawut 22"`。然后使用`String.Split(' ')`; 得到一个数组`{"Natthawut","22"}`。`Convert.ToInt32(val)`然后使用;将第二个元素转换为整数

我相信必须有更好的方法来做到这一点，但这是我通常的做法:)

# .net - 如何理解文本的静态部分是否已更改？（diff算法相关）

> ID：711807
> 
> 赞同：2
> 
> 时间：2009-04-02T22:08:03.950
> 
> 标签：.net, algorithm, diff, artificial-intelligence

首先这是很难解决的问题，到目前为止我还没有想出一个很好的例子，但我希望这里有人能解决这个问题。我希望有解决这类问题的已知方法，或者一种晦涩难懂的算法。

**设想：**

*   在我的应用程序中，我对同一个网页做了几个请求
*   网页中有动态和随机的内容，例如（日期时间和当天的报价等，理论上可以是任何内容）
*   此应用程序的响应有 2 种情况，我们称它们为“TRUE”和“FALSE”。例如，有时响应会返回“True Text”，有时会返回“False Text”。
*   我的应用程序知道 3 个“TRUE”案例样本和 3 个“FALSE”案例样本，但这些也包括“时间”等随机内容。

**挑战**

*   现在，当我的应用程序收到新响应时，我如何了解此响应是“TRUE”还是“FALSE”案例的示例？

**我试过的**

*   逐行处理TRUE case的第一个样本，并根据字符的值生成一个整数数组
*   对第二个 TRUE 样本做同样的事情
*   对第三个 TRUE 样本做同样的事情
*   分析这些存储的 TRUE 案例之间的差异并创建一个新数组
*   现在，我知道哪些行是动态的（例如日期时间），现在我创建了一个新的最终 TRUE 案例数组，它只将静态行存储到最终的 TRUE 案例数组中。
*   现在，当我得到一个新案例时，我创建了一个类似的数组，然后将其与之前存储的最终 TRUE 案例进行比较，如果匹配（过滤行除外），如果其他行发生大量更改（*存在容差值*），那么它是 TRUE 案例错误的。

该算法的局限性和弱点非常明显。虽然我在某些情况下取得了一些不错的结果，但它并没有一直按预期工作。

我目前的课程是这样的：

```
Dim Analyser AS NEW ContentAnalyzer()
Analyser.AddTrueCase(True1Html)
Analyser.AddTrueCase(True2Html)
Analyser.AddTrueCase(True3Html)

'This will return True if the UnknownHtml is similar to TRUE case, otherwise False
Analyser.IsThisTrue(UnknownHtml) 
```

*对不起，标题没有多大意义，我找不到描述它的好方法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T22:31:22.973

听起来您正在做相当简单的[文档分类](http://en.wikipedia.org/wiki/Document_classification)。这是一个深入研究的领域，尤其是最近由于垃圾邮件过滤器。使用您选择的语言查看文档分类库。

[Classifier4j](http://classifier4j.sourceforge.net/)看起来像是在 Java VM 上运行并已移植到 .NET 的流行库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:25:29.867

要么这真的是错误的，要么我没有得到任何东西：

应用程序请求网页并获取它，并且必须确定它是另一个“真”还是“假”，对吗？这就是说，Web 请求的一部分不是在开头返回真或假，这是我第一个困惑的地方。

其次，您为什么不对错误案例进行类似的比较，看看是否有足够的相似性来为请求的某些随机页面创建 3 个结果桶：

1) 页面更类似于真实，因此被视为真实。

2) page 更类似于 false，因此被视为 false。

3) 页面与两者都不太相似，因此结果类似于 null 或异常情况，因为无法辨别哪个结果有意义。

第三种情况可能发生的示例：假设页面包含一个整数，如果为正，则结果为真，如果为负，则结果为假。如果结果为 0 怎么办？0 等于其绝对值，因此算作正数，还是由于某种原因算作负数？

或者我在你在这里想要做的事情上有所偏离？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T22:49:21.400

也许您的意思是贝叶斯过滤之类的东西？你可以看看 Paul Graham 对垃圾邮件做了什​​么：http: [//www.paulgraham.com/better.html](http://www.paulgraham.com/better.html)

# null - 在哪里检查 null，在调用方法或函数中？

> ID：711813
> 
> 赞同：4
> 
> 时间：2009-04-02T22:09:22.620
> 
> 标签：null

是否应该在调用函数之前或在函数本身内进行 null 检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T22:11:19.807

我会在通话本身中说。这样，如果您从 5 个不同的位置调用该函数，您只需在一个位置检查 null，而不是 5 个位置。

但这不是一个确定的答案。这实际上取决于函数以及使用 null 参数调用它的后果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:10:41.790

如果您以后要使用该对象，则应在调用该函数之前检查一下，从长远来看，它将**避免**异常，但是使用该对象时确实**很*****重要***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T22:10:56.687

始终进行防御性编码。两者都做，但被调用者更重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T22:25:30.240

如果在函数上接收 null 是一种有效的可能性，请在函数中检查 null。还要干燥，并避免在调用者中多次检查 null （所以我第二个 ryeguy 的答案）。

如果接收到 null 表示错误，则失败（并提前失败）并出现异常（或让 NullPointerException 之类的事情自然发生）。

如果发生异常，请尝试找出原因，并且： (i) 消除问题的原因；或 (ii) 正确处理异常

# css - 在 OS X Leopard 中创建鼠标光标/指针

> ID：711819
> 
> 赞同：0
> 
> 时间：2009-04-02T22:11:15.750
> 
> 标签：css, macos, mouse-cursor

我有一个小 gif，我可以通过执行以下操作将其用作浏览器的鼠标指针：

```
.myclass
 {
   cursor:  url("mycursor.gif");
 } 
```

这可以正常工作，只是热点位于错误的位置。有人知道我可以用来设置热点的任何 OSX Leopard 软件吗？我也许可以用 Rezilla 做到这一点，但我不知道 Safari 等在期待什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:13:50.113

根据[CSS 3 光标规范](http://www.w3.org/TR/css3-ui/#cursor)：

```
.myclass { cursor: url("mycursor.gif") 10 20 } 
```

# asp.net - 尝试访问页面时出现 ASP.NET 错误

> ID：711820
> 
> 赞同：0
> 
> 时间：2009-04-02T22:11:16.390
> 
> 标签：asp.net

我收到这个奇怪的错误：

任何帮助都会很棒？

**这是错误：**

> ## “/Rugby”应用程序中的服务器错误。
> 
> **配置错误**
> 
> **说明：**处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> **解析器错误消息：**在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。
> 
> **源错误：**
> 
> ```
> Line 33:
> Line 34:
> Line 35:    <roleManager enabled="true">
> Line 36: 
> Line 37:       <providers> 
> ```
> 
> **源文件：** C:\Websites\ADHS\andyhollis.co.uk\rugby\admin\web.config **行：** 35
> 
> 显示其他配置错误：
> 
> 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。
> 
> （C:\Websites\ADHS\andyhollis.co.uk\rugby\admin\web.config 第 43 行）
> 
> 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。
> 
> （C:\Websites\ADHS\andyhollis.co.uk\rugby\admin\web.config 第 67 行）
> 
> * * *
> 
> 版本信息：Microsoft .NET Framework 版本：2.0.50727.3053；ASP.NET 版本：2.0.50727.3053

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T22:20:44.747

当您在应用程序根目录的子目录中有 Web.config 时，有时会发生这种情况。

或者，您可能需要进入虚拟目录并将其正确配置为应用程序（如错误消息所述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T22:23:13.850

正如它在错误消息中所说：
“此错误可能是由于虚拟目录未配置为 IIS 中的应用程序造成的。”

将其配置为应用程序，就可以了。

IIS 5/6：http:
[//msdn.microsoft.com/en-us/library/zwk103ab.aspx](http://msdn.microsoft.com/en-us/library/zwk103ab.aspx)

IIS 7： http:
[//mvolo.com/blogs/serverside/archive/2007/07/12/Creating-IIS7-sites_2C00_-applications_2C00_-and-virtual-directories.aspx](http://mvolo.com/blogs/serverside/archive/2007/07/12/Creating-IIS7-sites_2C00_-applications_2C00_-and-virtual-directories.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T23:03:17.280

基本上，ASP.NET 允许分层配置文件，从 machine.config 和大量基于安全的 web.config 文件开始，这些文件隐藏在框架的 config 文件夹中，然后从 Web 应用程序的根目录到子文件夹。

但是，某些元素只能在每个应用程序的根 web.config 中被覆盖。这些包括（但不限于）：

*   验证
*   轮廓
*   角色管理
*   安全政策
*   站点地图

可以[在此处找到](http://msdn.microsoft.com/en-us/library/b5ysx397.aspx)web.configuration 元素的完整列表，每个元素都有一个**元素信息**部分，其中包含一个“可配置位置”小节。如果它显示“虚拟或物理目录级 Web.config”，那么您可以在任何地方拥有该元素。

由于这可能是您的应用程序的管理屏幕，您可能不想让目录成为它自己的应用程序 - 如果您这样做，您将无法访问它下面的主应用程序，这不是您的d 想要，并且您可能还必须在下面有一个单独的 /bin 文件夹，其中包含 admin .dll。

您最好在站点的根 web.config 中配置 RoleManagement（在 / 或者如果 Rugby 是一个应用程序，然后在 /Rugby）并且只有您需要不同的元素（例如锁定用户）在 /Rugby/Admin 的 web.config 中。

例如，在我的一个站点上，管理文件夹中的网络配置只是：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <authorization>
      <!-- Allow users in role "Editor" -->
      <allow roles="Editor" />
      <!-- Block everyone else -->
      <deny users="*" />
    </authorization>
  </system.web>
</configuration> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T23:07:29.937

这可能是因为您不小心将 web.config 上传到了非根目录，或者因为包含 web.config 的目录未配置为应用程序根目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T22:28:05.587

您未发布的错误似乎已更改。现在是“500 内部服务器错误”。这通常意味着未处理的异常。查看 Windows 事件日志以了解发生了什么。

# ruby-on-rails - 在 Ruby On Rails 中重构模型方法

> ID：711823
> 
> 赞同：4
> 
> 时间：2009-04-02T22:11:35.640
> 
> 标签：ruby-on-rails, ruby, refactoring, methods

我的营地在 Rails 中使用的一个常见习语如下：

```
def right_things(all_things, value)
    things = []
    for thing in all_things
       things << thing if thing.attribute == value
    end
    return things
end 
```

我怎样才能使它更好/更快/更强？

谢谢

-C

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T22:13:03.907

```
def right_things(all_things, value)
    all_things.select{|x| x.attribute == value}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T07:58:44.980

如果您的东西是 ActiveRecord 模型并且您只需要为当前目的选择的项目，那么如果您使用的是 Rails 2.0（？肯定是 2.1）或更高版本，您可能会发现它`named_scope`很有用。

```
class Thing
  named_scope :rightness, lambda { |value| :conditions => ['attribute = ?', value] }
end 
```

所以你可以说

```
Thing.rightness(123) 
```

，这（在这种情况下）类似于

```
Thing.find_by_attribute(123) 
```

因为它归结为 SQL 查询，但修改 SQL 更容易链接。如果这对您有用，当然可能不是...

# c# - 关键字“参数”究竟是如何工作的？

> ID：711828
> 
> 赞同：6
> 
> 时间：2009-04-02T22:12:34.420
> 
> 标签：c#, generics, compiler-construction, parameters

以下代码示例打印：

```
T
T[]
T[] 
```

虽然前两行符合预期，但为什么编译器选择参数数组作为常规数组？

```
public class A
{
    public void Print<T>(T t)
    {
        Console.WriteLine("T");
    }

    public void Print<T>(params T[] t)
    {
        Console.WriteLine("T[]");
    }
}

class Program
{
    static void Main(string[] args)
    {
        A a = new A();
        a.Print("string");
        a.Print("string","string");
        a.Print(new string[] {"a","b"});
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-02T22:14:26.850

在引擎盖下

```
a.Print("string","string"); 
```

只是语法糖

```
a.Print(new string[]{"string","string"}); 
```

编辑：就像我说的，`params`关键字只会自动为你创建数组，你告诉编译器：要么`T`直接接受一个数组，要么使用 X 输入参数来构造该数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-03T03:54:03.913

除了其他人所说的之外，*params*关键字还会导致为数组参数生成的 ParamArrayAttribute 。所以这...

```
public void Print<T>(params T[] t) { } 
```

由编译器生成为...

```
public void Print<T>([ParamArray] T[] t); { } 
```

正是该属性向编译器和 IDE 指示可以使用更简单的语法调用该方法...

```
a.Print("string", "string"); 
```

而不是...

```
a.Print(new string[] { "string", "string" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T22:15:18.423

Params 允许您传递相同类型的多个对象。这是传递数组的快捷方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T22:15:43.323

我认为这实际上与类型推断有关，而不是与 params 关键字有关。推理引擎在第三行假定 T 的类型是 string[]，因此将其传递给第一个方法。

如果您不相信我，请尝试 Console.WriteLine(typeof(T))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-02T22:23:08.920

当有 params 关键字时，编译器将对正式的函数声明以及实际的函数调用进行一些翻译。

正式的函数声明：

在引擎盖下，IL 将被翻译成与

```
public void Print<T>(T[] array); 
```

除了在编译时，将检查*实际函数调用的语法翻译。*意义，

```
a.Print("string1", "string2"); 
```

变为与以下相同的 IL 代码

```
a.Print(new string[]{"string1", "string2"}); 
```

这就是为什么第 2 行和第 3 行是相同的输出，因为在幕后，它们被翻译成完全相同的 IL。

关于为什么第 3 行不打印“T”的问题是因为，.NET 编译器将始终尝试找到最佳重载匹配，因此第 2 行和第 3 行都调用了 T[] 版本而不是普通的 T。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-02T22:23:31.447

正如阿鲁所说。如果您在反射器中打开项目，您将看到以下内容：

```
a.Print<string>(new string[] { "string", "string" }); 
```

# iphone - 组织多个子视图的最佳方式是什么？

> ID：711832
> 
> 赞同：5
> 
> 时间：2009-04-02T22:13:59.333
> 
> 标签：iphone, uitableview, subview

作为一个对 iPhone 开发相当陌生的人，我一直在努力寻找管理多个子视图的良好设计模式，特别是在子视图需要定义相同类型的委托方法的情况下。

例如，我有一个视图，我需要根据用户操作在 2 个 UITableView 之间进行交换。两个 UITableView 都需要定义一个 UITableViewControllerDelegate 对象来填充行等。

您是否更有经验的 iPhone 开发人员发现重载主视图控制器作为两个子视图的委托是正确的做事方式？目前，我定义了 2 个对象，每个对象都充当每个 UITableView 的委托，以使事情更有条理。它完成了我需要它做的事情，但这是一个很好的模式吗？

我认为有一些最佳实践可以避免内存管理和类似有趣的事情的各种陷阱。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-03T07:20:27.537

您可以将视图用作容器来保存表格等元素。因此，在您概述的情况下，您将拥有一个容器视图并在其中交换 UITableViews ......

一个好的方法是为每个表设置单独的视图控制器。否则，试图通过各种表视图委托方法跟踪您支持的数据集会变得过于混乱，并且使得对一个可能不适用于另一个表的大量定制变得更加困难。

使用组合视图控制器时要注意的主要事项是“self.navigationController”，相关调用不会返回任何内容（因为它们不是导航控制器的真正子级），因此您需要传递该引用或其他方式在表视图控制器中处理它的方式有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-03T04:26:20.263

如果两者之间只有很小的差异——例如，如果表格单元格的布局方式相同，但使用的数据略有不同——我可能会使用 if 语句，但否则我会使用某种单独的委托对象。关注点分离是这里的关键：如果您正在编写一种方法来完成两种截然不同的事情，这表明您的代码组织得不够好，无法阅读、可维护或灵活。

此外，不要忘记视图控制器不一定*是*只能与 Apple 认可的标签栏和导航控制器一起使用的神奇对象。编写自己的“切换视图控制器”是完全合法的，它需要两个视图控制器并在它们之间切换。但是，您需要进行一些测试，以确定是否需要手动调用 -viewWillAppear: 及其同类 - 有一些神奇的机器可能会或可能不会为您执行此操作，具体取决于您添加视图控制器的位置在层次结构中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T22:51:21.270

这就是我自己处理这种情况的方式。每个 UITableView 一个控制器和一个委托。数据源可以被重用，如果这有意义的话（即相同的数据显示在两个 UITableViews 中）否则你会在你的委托方法中有很多 ifs，检查哪个 tableview 发送消息。

切换 UITableViews 对我来说听起来像是 UINavigationController 的工作。通常在 iPhone 上，您不只是重新排列控件。您创建完整的屏幕（在代码中或通过 InterfaceBuilder 作为 .nib），使用 UINavigationController 或 UITabBar 在它们之间切换。

# eclipse - 如何修复 Eclipse 在项目集中丢失对第三方 jar 的引用

> ID：711835
> 
> 赞同：0
> 
> 时间：2009-04-02T22:14:13.997
> 
> 标签：eclipse, eclipse-3.4

有时我会看到 eclipse 丢失了对 a 项目中包含的第三方 jar 的引用。（您收到构建路径错误，说明找不到 jar）

它很容易修复，因为您可以删除 jar，保存项目的属性，然后进入并重新添加它找不到的 jar，然后 eclipse 可以看到 jar 的路径，然后您可以再次编译。

问题是，如果您的构建中有很多项目，您将不得不经常执行此任务。

您可以做些什么来强制 eclipse 识别它实际上在其类路径中有 jar 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T08:21:34.427

我在 Eclipse 中的项目也多次遇到类似的情况。.classpath 文件中的 jar 文件路径是正确的，并且 jar 仍然存在 eclipse 这样做。要修复它，您打开 .classpath 文件并重新保存它并在 Eclipse 中刷新 probject 并且它构建得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T22:36:31.417

这是一个奇怪的行为......

如果没问题，您可以将 Maven 2 用于您的项目。这意味着您必须遵循 Maven 的项目结构，这很好，但如果您决定迁移旧项目，可能会很痛苦。

然后，您可以随时运行**mvn eclipse:eclipse**，这将在几秒钟内解决您的问题。

# .net - 是否可以在没有 ASP.NET 服务器控件项目的情况下构建自定义控件？

> ID：711844
> 
> 赞同：2
> 
> 时间：2009-04-02T22:16:45.677
> 
> 标签：.net, asp.net, controls

我在 Visual Studio 2008 中有一个 Web 应用程序，我发现一篇文章解释了如何扩展 GridView 创建一个继承的类。

如果我在同一个项目中创建该类，是否可以使用我的新网格？如何？

如果不可能，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:30:42.320

是的，这是可能的。根据您使用的 Visual Studio 版本，您的新控件可能会或可能不会立即显示在工具箱中。最坏的情况是您必须手动添加它。

一旦它进入工具箱，您就可以像使用任何其他控件一样使用它。将其从工具箱拖到窗体，设置属性和事件处理程序等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:44:14.393

按 F6 构建，然后它应该会出现。如果没有，您可能只需要重新启动 VS，我知道，VS 有时会让人头疼

# mediawiki - Mediawiki 只允许创建一定数量的页面？

> ID：711849
> 
> 赞同：2
> 
> 时间：2009-04-02T22:20:19.177
> 
> 标签：mediawiki, account

有可能吗？如果可以，我怎样才能允许用户只创建一定数量的页面。IE。当他们注册时，只允许他们创建一个页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T23:29:20.260

在我的脑海中，以下方法应该有效：

1.  为“编辑”操作挂钩[`userCan`](http://www.mediawiki.org/wiki/Manual:Hooks/userCan)事件，检查页面是否存在（即`$title->exists()`），如果不存在，请查阅一些存储的计数（见下文），如果决定禁止创建，则设置`$result`为`false`并返回`false`停止进一步的钩子覆盖了决定。
2.  挂钩[`ArticleInsertComplete`](http://www.mediawiki.org/wiki/Manual:MediaWiki_hooks/ArticleInsertComplete)事件并更新一些存储的计数以反映用户 ( `$user`) 已创建另一个页面。

#1 中的决定可以通过附加逻辑进行扩展，以支持多种策略，例如自动权限分配；例如，允许用户在达到所谓的“自动确认”状态后创建多个页面，或者忽略对管理员或其他具有特定权限的用户的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T02:31:24.690

我不知道你到底想做什么，但我敢打赌你想让他们只制作用户页面或其他东西？[将它们的编辑限制在某个命名空间](http://www.mediawiki.org/wiki/Manual:Preventing_access#Restrict_editing_of_an_entire_namespace)，直到它们被添加到某个特殊组之前，您可能会更简单。

更多信息可能有助于我们更好地回答问题。您是否还想将他们的编辑限制在他们创建的页面上？

# ruby - Ruby 哈希白名单过滤器

> ID：711863
> 
> 赞同：64
> 
> 时间：2009-04-02T22:23:57.593
> 
> 标签：ruby, hashmap

我试图弄清楚如何将键和值对从一个过滤器过滤到另一个过滤器

例如我想取这个哈希

```
x = { "one" => "one", "two" => "two", "three" => "three"}

y = x.some_function

y == { "one" => "one", "two" => "two"} 
```

谢谢你的帮助

编辑：可能应该提到，在这个例子中，我希望它充当白名单过滤器。也就是说，我知道我想要什么，而不是我不想要什么。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2009-04-03T20:18:53.377

Rails 的 ActiveSupport 库还为您提供切片，除了在关键级别处理哈希：

```
y = x.slice("one", "two") # => { "one" => "one", "two" => "two" }
y = x.except("three")     # => { "one" => "one", "two" => "two" }
x.slice!("one", "two")    # x is now { "one" => "one", "two" => "two" } 
```

这些非常好，我一直在使用它们。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2009-04-03T05:01:36.310

也许这就是你想要的。

```
wanted_keys = %w[one two]
x = { "one" => "one", "two" => "two", "three" => "three"}
x.select { |key,_| wanted_keys.include? key } 
```

包含在例如 Array 和 Hash 中的 Enumerable mixin 提供了许多有用的方法，例如 select/reject/each/etc.. 我建议您使用 ri Enumerable 查看它的文档。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2009-04-02T22:29:39.093

您可以只使用内置的哈希函数拒绝。

```
x = { "one" => "one", "two" => "two", "three" => "three"}
y = x.reject {|key,value| key == "three" }
y == { "one" => "one", "two" => "two"} 
```

您可以将任何您想要的逻辑放入拒绝中，如果块返回 true，它将跳过新哈希中的键、值。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-18T19:56:14.733

改进一点@scottd 的答案，如果您正在使用rails 并且有您需要的列表，您可以将列表扩展为切片中的参数。例如

```
hash = { "one" => "one", "two" => "two", "three" => "three"}
keys_whitelist = %W(one two)
hash.slice(*keys_whitelist) 
```

如果没有 rails，对于任何 ruby​​ 版本，您都可以执行以下操作：

```
hash = { "one" => "one", "two" => "two", "three" => "three"}
keys_whitelist = %W(one two)
Hash[hash.find_all{|k,v| keys_whitelist.include?(k)}] 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-02T22:29:44.020

```
y = x.reject {|k,v| k == "three"} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-04-03T13:04:09.740

结合每个人的答案，我想出了这个解决方案：

```
 wanted_keys = %w[one two]
 x = { "one" => "one", "two" => "two", "three" => "three"}
 x.reject { |key,_| !wanted_keys.include? key }
 =>{ "one" => "one", "two" => "two"} 
```

谢谢你们的帮助！

编辑：

以上适用于 1.8.7+

以下适用于 1.9+ ：

x.select { |key,_| Wanted_keys.include？钥匙 }

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-03T22:12:44.620

我会使用 lambda 过滤。这将允许您编写复杂的过滤逻辑并使其易于测试。提取过滤逻辑的事实将允许在其他上下文中重用它。

前任：

```
x = { "one" => "one", "two" => "two", "three" => "three"}

matcher = ->(key,value) { 
  # FILTERING LOGIC HERE 
   !key[/three/]
}

x.select(&matcher) == { "one" => "one", "two" => "two"} 
```

# java - 在 Java 中处理输入时出现问题

> ID：711867
> 
> 赞同：0
> 
> 时间：2009-04-02T22:25:31.160
> 
> 标签：java, string, input

我正在尝试从终端读取输入。为此，我使用了 BufferedReader。这是我的代码。

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
String[] args;
do {
    System.out.println(stateManager.currentState().toString());
    System.out.print("> ");
    args = reader.readLine().split(" ");
    // user inputs "Hello World"
} while (args[0].equals("")); 
```

在我的代码的其他地方，我有一个`HashTable`键和值都是字符串的地方。这是问题所在：

如果我想从我`HashTable`用来在其中查找的键`HashTable`是 args 元素之一的地方获取一个值。这些参数很奇怪。如果用户输入两个参数（第一个是命令，第二个是用户想要查找的）我找不到匹配项。

例如，如果 HashTable 包含以下值：

```
[ {"Hello":"World"}, {"One":"1"}, {"Two":"2"} ] 
```

用户输入：

```
get Hello 
```

我的代码不返回`"World"`。

所以我使用调试器（使用 Eclipse）来查看`args`. 我发现`args[1]`包含`"Hello"`但里面`args[1]`有一个名为的字段`value`，其值为`['g','e','t',' ','H','e','l','l','o']`。

也是如此`args[0]`。它包含`"get"`但该字段`value`包含`['g','e','t',' ','H','e','l','l','o']`！

我勒个去！！！

但是，如果我检查我的`HashTable`，无论键在哪里`"Hello"`， value= `['H','e','l','l','o']`。

有任何想法吗？

非常感谢你。

* * *

编辑：

这是代码示例。同样的事情仍在发生。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Hashtable;

public class InputTest
{
    public static void main(String[] args)
    {
        BufferedReader reader = new BufferedReader(new InputStreamReader(        System.in));
        Hashtable<String, String> EngToSpa = new Hashtable<String, String>();

    // Adding some elements to the Eng-Spa dictionary
    EngToSpa.put("Hello", "Hola");
    EngToSpa.put("Science", "Ciencia");
    EngToSpa.put("Red", "Rojo");

    // Reads input. We are interested in everything after the first argument
    do
    {
        System.out.print("> ");
        try
        {
            args = reader.readLine().trim().split("\\s");
        } catch (IOException e)
        {
            e.printStackTrace();
        }
    } while (args[0].equals("") || args.length < 2); 
    // ^ We don't want empty input or less than 2 args.

    // Lets go get something in the dictionary

    System.out.println("Testing arguments");

    if (!EngToSpa.contains(args[1]))
        System.out.println("Word not found!");
    else
        System.out.println(EngToSpa.get(args[1]));

    // Now we are testing the word "Hello" directly
    System.out.println("Testing 'Hello'");

    if (!EngToSpa.contains("Hello"))
        System.out.println("Word not found!");
    else
        System.out.println(EngToSpa.get("Hello"));

}
} 
```

同样的事情仍在发生。我一定是误解了哈希表。想法哪里出了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T22:30:00.213

不要担心 value 字段——这只是说有一个包含“get Hello”文本的 char 数组，并且 args[0] 和 args[1] 都*引用*该 char 数组，但它们会有不同偏移量和计数。args[0] 的偏移量为 0，计数为 3；args[1] 的偏移量为 4，计数为 5。

我不知道为什么你的哈希图不起作用……你能提供一个简短但完整的示例程序吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T00:23:32.063

I just noticed my mistake. I have to use *containsKey()* instead of *contains()*.

I'd like to thank everyone for helping.

As a bonus, I also learned about what the 'value' field is. Nice!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T23:19:48.847

正如 Jon 所说，您只是看到了`String`Java 中 s 的内部实现的产物。您可以出于您的目的忽略该`value`字段。这与为什么事情不适合你无关。您需要向我们展示代码中不起作用的部分。

# c# - 在 SQL CLR 存储过程中引发异常

> ID：711881
> 
> 赞同：6
> 
> 时间：2009-04-02T22:31:18.590
> 
> 标签：c#, sql-server, exception, stored-procedures, clr

从 SQL CLR 存储过程中抛出异常是一种好的设计吗？由于我们是在 SQL Server 的上下文中，是否需要做任何特殊的考虑？

这是糟糕的设计吗？

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void MyStoredProcedure(string foo)
{
    if (string.IsNullOrEmpty(foo))
    {
        throw new ArgumentNullException("foo");
    }
} 
```

换句话说，是否应该将异常通知给调用者？

# python - 模块的 Python 命名约定

> ID：711884
> 
> 赞同：116
> 
> 时间：2009-04-02T22:31:35.687
> 
> 标签：python, naming-conventions

我有一个模块，其目的是定义一个名为“nib”的类。（还有一些相关的类。）我应该如何调用模块本身？“笔尖”？“笔尖模块”？还要别的吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2009-04-02T22:34:41.450

只是笔尖。使用大写 N 命名类 Nib。有关命名约定和其他样式建议的更多信息，请参阅[PEP 8](https://www.python.org/dev/peps/pep-0008/#package-and-module-names)，Python 样式指南。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-04-02T22:40:32.467

我会称它为 nib.py。我也会命名类 Nib。

在我正在处理的一个更大的 python 项目中，我们有很多模块基本上定义了一个重要的类。类以大写字母开头。模块以小写的类命名。这导致导入如下：

```
from nib import Nib
from foo import Foo
from spam.eggs import Eggs, FriedEggs 
```

这有点像模仿 Java 的方式。每个文件一个类。但是随着灵活性的增加，如果有意义的话，您总是可以将另一个类添加到单个文件中。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-04-02T23:33:04.633

我知道我的解决方案从 pythonic 的角度来看不是很流行，但我更喜欢使用一个模块-> 一个类的 Java 方法，将模块命名为类。我确实理解 python 风格背后的原因，但我不太喜欢拥有一个包含很多类的非常大的文件。尽管折叠，但我发现很难浏览。

另一个原因是版本控制：拥有一个大文件意味着您的提交往往集中在该文件上。这可能会导致需要解决的冲突数量更多。您还会丢失提交修改特定文件（因此涉及特定类）的附加日志信息。相反，您会看到对模块文件的修改，只有提交注释才能了解所做的修改。

总结一下，如果您更喜欢 python 哲学，请参考其他帖子的建议。如果您更喜欢类似 java 的理念，请创建一个包含类 Nib 的 Nib.py。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2009-04-02T22:41:13.010

笔尖很好。如果有疑问，请参阅 Python 样式指南。

从[PEP 8](http://www.python.org/dev/peps/pep-0008/)开始：

> 包和模块名称模块应该有简短的全小写名称。如果提高可读性，可以在模块名称中使用下划线。Python 包也应该有简短的全小写名称，尽管不鼓励使用下划线。
> 
> 由于模块名称映射到文件名，并且某些文件系统不区分大小写并截断长名称，因此选择相当短的模块名称很重要——这在 Unix 上不是问题，但它可能是将代码传输到较旧的 Mac 或 Windows 版本或 DOS 时出现问题。
> 
> 当用 C 或 C++ 编写的扩展模块附带提供更高级别（例如更面向对象）接口的 Python 模块时，C/C++ 模块具有前导下划线（例如 _socket）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-08-13T07:09:29.003

来自[PEP-8：包和模块名称](http://www.python.org/dev/peps/pep-0008/)：

> **模块**应该有简短的全小写名称。如果提高可读性，可以在模块名称中使用下划线。
> 
> **Python 包**也应该有简短的全小写名称，尽管不鼓励使用下划线。
> 
> **当用 C 或 C++ 编写的扩展模块**附带提供更高级别（例如更面向对象）接口的 Python 模块时，C/C++ 模块具有前导下划线（例如 _socket）。

# php - 非常基本的嵌套php

> ID：711886
> 
> 赞同：0
> 
> 时间：2009-04-02T22:32:31.487
> 
> 标签：php

我正在尝试编写一个非常简单的语句，这样，如果我的博客的用户没有 gravatar，则会出现随机选择的图像。它现在的工作方式是这样的：

```
 <?php echo get_avatar( $comment, $size = '78', $default = '/images/noavatar2.gif' );  ?> 
```

这会给我一个随机数：

```
echo(rand(1,10) 
```

我想回显“noavatar”和“.gif”之间的随机数，但我似乎不知道该怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-02T22:34:55.617

试试这个：

<?php echo get_avatar( $comment, $size = '78', $default = '/images/noavatar' . rand(1,10) . '.gif' ); ?>

这使用了一种称为字符串连接的语言功能；有关如何在 PHP 中工作的更多信息：[http ://www.phpf1.com/tutorial/php-string-concatenation.html](http://www.phpf1.com/tutorial/php-string-concatenation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:36:47.593

```
'/images/noavatar'.rand(1,10).'.gif' 
```

# expert-system - 专家系统基础

> ID：711893
> 
> 赞同：3
> 
> 时间：2009-04-02T22:34:55.007
> 
> 标签：expert-system

我需要编写一个专家系统来帮助用户选择最好的手机运营商。它应该非常简单，而不是基于诸如 CLISP 或 JESS 之类的语言/库。所以我需要从头开始写。

您是否知道一些解释如何做到这一点的书籍或在线教程？我真正需要了解的是如何表示知识和事实。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-03T02:00:33.173

如果你有任何关于人工智能的好文章，会有一个关于专家系统的部分；如果被迫，您可以从那里解决并实施您自己的。

基本思想非常简单：您有一组“if-then”形式的规则，代表推理或4 含义。比如，例如：

```
IF blood temperature > 41°C 
THEN patient.has-fever := TRUE

IF patient has wet-sounding breathing
THEN patient.has-pneumonia

IF patient.has-fever AND patient.has-pneumonia
THEN CONCLUDE bacterial pneumonia. ACTION prescribe Augmentin 
```

换句话说，你有一堆规则，你评估规则直到你得出结论。您可以在相当不错的[Wikipedia](http://en.wikipedia.org/wiki/Expert_system)文章中阅读更多内容（前向或后向链接等）。

我很困惑为什么你不能使用现有的规则引擎——对于大多数语言来说，有很多规则引擎通常在相当自由的许可下。除非这是家庭作业问题或其他问题，否则这确实是一条更简单的路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:44:12.473

Prolog 非常适合编写基于规则的系统（专家系统开发的一种非常标准的方法）。P# 编译为 C#，可以满足您的需求 - 而且它是免费的。

有关P# 的[更多信息。](http://www.codeproject.com/KB/system/PrologNET.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T22:45:21.910

[PROLOG](http://en.wikipedia.org/wiki/Prolog)语言的基本原理和数学证明应该可以帮助您理解您需要解决的大多数概念，如果不能提供您需要用来实现它的最终语言。

我找不到原始实现的链接，但无论如何它对您没有多大帮助。Alain Colmerauer 在逻辑编程方面的早期工作应该会有所帮助。

[编辑]对不起，重复...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-14T19:24:25.943

我会投票支持 Prolog 或 CLIPS 的一些实现，这取决于后向或前向链接逻辑是否最适合该问题。与其重新实现其中任何一个，不如花时间研究如何将它们与您的环境集成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-01-29T15:12:46.953

Jess 是一个不错的选择，但您应该首先阅读“Jess in action”一书。

# javascript - 如何使用 Javascript 修改节点的内容？

> ID：711895
> 
> 赞同：1
> 
> 时间：2009-04-02T22:35:59.933
> 
> 标签：javascript, jquery, html, regex

我需要使用 Javascript 做三件事：

1.  选择所有具有“foo”类的节点。
2.  查找这些节点中以“*”开头的所有单词。
3.  用 包围这些单词，单词本身`<span class="xyz"> ... </span>`在哪里。`xyz`

比如内容：

```
<ul>
  <li class="foo">
    *abc def *ghi
  </li>
  <li class="bar">
    abc *def *ghi
  </li>
</ul> 
```

会成为

```
<ul>
  <li class="foo">
    <span class="abc">*abc</span> def <span class="ghi">*ghi</span>
  </li>
  <li class="bar">
    abc *def *ghi    <!-- Not part of a node with class "foo", so
  </li>                     no changes made. -->
</ul> 
```

**我该怎么做？**（涉及 jQuery 的 PS 解决方案也可以工作，但除此之外，我不希望包含任何额外的依赖项。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T23:23:49.600

不需要 jQuery：

```
UE_replacer = function (node) {

   // just for performance, skip attribute and
   // comment nodes (types 2 and 8, respectively)
   if (node.nodeType == 2) return;
   if (node.nodeType == 8) return;

   // for text nodes (type 3), wrap words of the
   // form *xyzzy with a span that has class xyzzy
   if (node.nodeType == 3) {

      // in the actual text, the nodeValue, change
      // all strings ('g'=global) that start and end
      // on a word boundary ('\b') where the first
      // character is '*' and is followed by one or
      // more ('+'=one or more) 'word' characters
      // ('\w'=word character). save all the word
      // characters (that's what parens do) so that
      // they can be used in the replacement string
      // ('$1'=re-use saved characters).
      var text = node.nodeValue.replace(
            /\b\*(\w+)\b/g,
            '<span class="$1">*$1</span>'   // <== Wrong!
      );

      // set the new text back into the nodeValue
      node.nodeValue = text;
      return;
   }

   // for all other node types, call this function
   // recursively on all its child nodes
   for (var i=0; i<node.childNodes.length; ++i) {
      UE_replacer( node.childNodes[i] );
   }
}

// start the replacement on 'document', which is
// the root node
UE_replacer( document ); 
```

**更新：**为了对比[strager 答案](https://stackoverflow.com/questions/711895#711979)的方向，我摆脱了我拙劣的 jQuery 并保持正则表达式尽可能简单。这种“原始”的 javascript 方法比我预期的要容易得多。

尽管 jQuery 显然很适合操作 DOM 结构，但实际上要弄清楚如何操作*文本*元素并不容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-03T03:32:51.640

不要尝试处理元素的 innerHTML/html()。这永远不会起作用，因为正则表达式不足以解析 HTML。只需走过 Text 节点寻找你想要的东西：

```
// Replace words in text content, recursively walking element children.
//
function wrapWordsInDescendants(element, tagName, className) {
    for (var i= element.childNodes.length; i-->0;) {
        var child= element.childNodes[i];
        if (child.nodeType==1) // Node.ELEMENT_NODE
            wrapWordsInDescendants(child, tagName, className);
        else if (child.nodeType==3) // Node.TEXT_NODE
            wrapWordsInText(child, tagName, className);
    }
}

// Replace words in a single text node
//
function wrapWordsInText(node, tagName, className) {

    // Get list of *word indexes
    //
    var ixs= [];
    var match;
    while (match= starword.exec(node.data))
        ixs.push([match.index, match.index+match[0].length]);

    // Wrap each in the given element
    //
    for (var i= ixs.length; i-->0;) {
        var element= document.createElement(tagName);
        element.className= className;
        node.splitText(ixs[i][1]);
        element.appendChild(node.splitText(ixs[i][0]));
        node.parentNode.insertBefore(element, node.nextSibling);
    }
}
var starword= /(^|\W)\*\w+\b/g;

// Process all elements with class 'foo'
//
$('.foo').each(function() {
    wrapWordsInDescendants(this, 'span', 'xyz');
});

// If you're not using jQuery, you'll need the below bits instead of $...

// Fix missing indexOf method on IE
//
if (![].indexOf) Array.prototype.indexOf= function(item) {
    for (var i= 0; i<this.length; i++)
        if (this[i]==item)
            return i;
    return -1;
}

// Iterating over '*' (all elements) is not fast; if possible, reduce to
// all elements called 'li', or all element inside a certain element etc.
//
var elements= document.getElementsByTagName('*');
for (var i= elements.length; i-->0;)
    if (elements[i].className.split(' ').indexOf('foo')!=-1)
        wrapWordsInDescendants(elements[i], 'span', 'xyz'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T23:03:52.660

正则表达式看起来像这样（sed-ish 语法）：

```
s/\*\(\w+\)\b\(?![^<]*>\)/<span class="\1">*\1</span>/g 
```

因此：

```
$('li.foo').each(function() {
    var html = $(this).html();
    html = html.replace(/\*(\w+)\b(?![^<]*>)/g, "<span class=\"$1\">*$1</span>");
    $(this).html(html);
}); 
```

该`\*(\w+)\b`部分是重要的部分。它找到一个星号后跟一个或多个单词字符，然后是某种单词终止（例如，行尾或空格）。单词被捕获到`$1`中，然后用作输出的文本和类。

紧随其后的部分 ( `(?![^<]*>)`) 是负前瞻。它断言不跟随右尖括号，除非它之前有一个左尖括号。这可以防止字符串在 HTML 标记内的匹配。这不处理格式错误的 HTML，但无论如何都不应该是这种情况。

# .net - 使用 .Net Web 控件 - 如何在 IFRAME 的 TextBox *INSIDE* 中设置值

> ID：711899
> 
> 赞同：0
> 
> 时间：2009-04-02T22:36:51.460
> 
> 标签：.net, browser, webbrowser-control

我正在尝试使用 .Net WebBrowser 控件登录网站并为我汇总一些数据。我还使用了对 MSHTML 的引用（但我不在乎您的解决方案是否有效）。

当我访问“普通”网站时 - 我从 webBrowser 的 .documment 创建了一个 mshtml.HTMLDocument。然后我使用我想要的文本框的名称创建一个 mshtml.FormElement 和一个 mshtml.HTMLInputElement。

然后，我可以设置文本框的值。

它看起来像这样：

```
 Dim myDoc1 As mshtml.HTMLIFrame = DirectCast(Me.WebBrowser.Document.DomDocument, mshtml.HTMLDocument)
    Dim myForm As mshtml.HTMLFormElement = DirectCast(myDoc1.forms.item(0), mshtml.HTMLFormElement)
    Dim myUserBox As mshtml.HTMLInputElement = DirectCast(myForm.item("user"), mshtml.HTMLFormElement)

    myUserBox.value = UserName 
```

我的问题是，在某些网站上，我需要操作的文本框包含在 IFRAME 中。一个例子是[https://servicing.capitalone.com/c1/login.aspx](https://servicing.capitalone.com/c1/login.aspx)

如果我的程序浏览到那个站点——它找不到用户名的文本框——因为没有。只有一个 IFRAME 标记的 URL 为“ [https://login.capitalone.com/loginweb/login/login.do](https://login.capitalone.com/loginweb/login/login.do) ”

如果我直接浏览 login.do 页面 - 网站会将我重定向到错误页面。

如何在该 IFRAME 的用户名文本框中输入数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T23:45:29.317

由于您尝试访问的子 iframe 来自与父页面不同的域，因此由于跨框架脚本安全性，您将无法访问 iframe 的表单元素。请参阅：[访问托管 HTML 文档对象模型中的框架](http://msdn.microsoft.com/en-us/library/ms171715.aspx)

> 由于托管 HTML DOM 实施了一种称为跨框架脚本安全性的安全措施，因此访问框架变得复杂。如果一个文档包含一个在不同域中具有两个或多个 FRAME 的 FRAMESET，则这些 FRAME 不能相互交互。换言之，显示您网站内容的 FRAME 无法访问托管第三方网站（例如 [http://www.adatum.com/](http://www.adatum.com/) ）的 FRAME 中的信息。此安全性在 HtmlWindow 类的级别实现。您可以获得有关托管另一个网站的 FRAME 的一般信息，例如其 URL，但您将无法访问其文档或更改其托管 FRAME 或 IFRAME 的大小或位置。

# c# - 检查类/接口继承的正确方法是什么？

> ID：711900
> 
> 赞同：4
> 
> 时间：2009-04-02T22:37:12.757
> 
> 标签：c#, .net, reflection, inheritance

下面的代码循环遍历字符串字典和**IMyCompanySettings 以**查找实现**IMyCompanyProductSetting**的值。显然，尝试强制转换和引发异常是一种非常昂贵的方法。

```
 public static List<IMyCompanyProductSetting> GetProductSettings(ConfigurationManager cfm)
    {
        List<IMyCompanyProductSetting> ret = new List<IMyCompanyProductSetting>();
        foreach(IMyCompanySetting setting in cfm.Values)
        {
            try
            {
                IMyCompanyProductSetting prod = (IMyCompanyProductSetting)setting;
                ret.Add(prod);

            }
            catch
            {
              // Do nothing.
            }
        }
        return ret;
    } 
```

有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-02T22:38:36.247

## 铸造 101 [铸造材料的一般信息]：

使用`[object] is [interface/class]`表达式：

```
if (setting is IMyCompanyProductSetting) {
  ...
} 
```

或者，您可以使用`as`尝试强制转换对象的关键字，如果它失败，而不是抛出异常，它将返回`null`. 注意目标类型必须是`as`关键字中的引用类型：

```
var prod = setting as IMyCompanyProductSetting; 

if (prod != null) {
   ...
} 
```

您应该始终使用上面的代码而不是等效的异常处理。

## 按类型过滤`IEnumerable`（LINQy）：

正如 Jon Skeet 指出的那样，您应该使用`OfType`扩展方法轻松过滤序列（假设您有 LINQ）：

```
var filteredSequence = sequence.OfType<TargetType>(); 
```

## 转换`IEnumerable`类型（LINQy）：

如果您想尝试将每个元素转换为目标类型（而不是按类型过滤），您可以使用`Cast`扩展方法：

```
var castedSequence = sequence.Cast<TargetType>(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-02T22:40:11.953

“硬”方式（pre-LINQ）是使用“as”。这比使用“is”然后每次强制转换（因为“is”和强制转换都需要执行时检查）更有效：

```
IMyCompanyProductSetting prod = setting as IMyCompanyProductSetting;
if (prod != null)
{
    ret.Add(prod);
} 
```

请参阅[另一个问题](https://stackoverflow.com/questions/496096/casting-vs-using-the-as-keyword-in-the-clr/496167#496167)，了解何时使用“as”以及何时使用演员表。

但是，如果您使用的是 .NET 3.5，则非常简单：

```
return cfm.Values.OfType<IMyCompanyProductSetting>().ToList(); 
```

好简单 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T22:40:48.940

迈赫达有答案。我只会补充一点，您永远不应该使用“尝试/捕获所有内容”的技巧。在这种情况下，您最多只能尝试捕获 InvalidCastException。您不想忽略其他一些异常，可能来自您尝试调用的方法的执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T22:41:15.257

您应该使用“Is”语句来获得更简洁且不易出错的代码。请参见下面的示例。

```
 if (setting Is IMyCompanyProductSetting)
  ret.add((IMyCompanyProductSetting)setting); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T22:41:39.157

要么做

```
if (setting is IMyCompanyProductSetting)
{
  IMyCompanyProductSetting prod = (IMyCompanyProductSetting)setting;
} 
```

或者

```
IMyCompanyProductSetting prod = setting as IMyCompanyProductSetting;
if (setting != null)
{
} 
```

# batch-file - 如何在 MS-DOS 批处理文件的 for 循环中使用迭代变量？

> ID：711912
> 
> 赞同：0
> 
> 时间：2009-04-02T22:41:34.477
> 
> 标签：batch-file, dos

我有一个批处理文件，它做这样的事情

```
for %%a in (1 2 3 4 5) do dir > %%a.output 
```

`%%a`只是给了我一个`.`

如何使用变量的值`%%a`来分配文件名（例如 1.output、2.output）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T18:45:22.267

你必须包围你的变量：

```
for %a in (1 2 3 4 5) do dir > %a%.output 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T23:01:43.803

你的命令语法对我来说是正确的。我希望批处理文件的那一行按原样生成这些命令：

```
dir > 1.output
dir > 2.output
dir > 3.output
dir > 4.output
dir > 5.output 
```

这又会创建`1.output`,`2.output`等。

作为调试提示，您可以尝试将该行更改为以下内容：

```
for %%a in (1 2 3 4 5) do echo dir ^> %%a.output 
```

注意`^`, 用于转义`>`重定向。

还：

*   请记住`%%a`在批处理文件中但`%a`在命令行中使用。
*   请记住，`for`变量区分大小写；`%%A`不同于`%%a`.

**更新**

自从我不得不让批处理文件在如此旧的操作系统版本下工作已经有很长时间了，但如果重定向与过去不兼容，我不会感到惊讶`for`。

你可以试试这个：

```
for %%a in (1 2 3 4 5) do call helper.bat %%a 
```

在 helper.bat 中：

```
dir > %1.output 
```

或者，如果您不喜欢额外的批处理文件，请将它们合并到一个文件中：

```
if .%1==.sub goto do_sub
for %%a in (1 2 3 4 5) do call %0 sub %%a
goto end
:sub
shift
dir > %1.output
:end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T12:45:47.240

我没有 Win98 系统可供我使用，但进入`for /?`一个 DOS 框，看看那里有没有什么东西可以帮助你。

在基于 NT 的 Windows 操作系统中执行此操作的方法是：

```
FOR /L %variable IN (start,step,end) DO command [command-parameters] 
```

所以你的陈述会是这样的：

```
FOR /L %%a IN (1,1,5) DO echo dir ^> %%a.output 
```

或许Win98下的DOS也有类似的东西。

# scala - Scala 和 Groovy 之间的主要区别是什么？

> ID：711913
> 
> 赞同：132
> 
> 时间：2009-04-02T22:41:35.787
> 
> 标签：scala, groovy

从表面上看，Groovy 和 Scala 看起来非常相似，除了 Scala 是静态类型的，而 Groovy 是动态的。

*   其他主要区别和优势是什么？
*   它们到底有多相似？
*   两者之间有竞争吗？
    *   如果是这样，从长远来看，你认为谁会赢？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2009-04-02T23:39:35.367

它们都是 JVM 的面向对象语言，具有 lambdas 和闭包并与 Java 互操作。除此之外，它们非常不同。

Groovy 是一种“动态”语言，不仅因为它是动态类型的，而且它支持动态元编程。

Scala 是一种“静态”语言，因为它是静态类型的，除了在 Java 中可以做的笨拙的事情之外，几乎没有动态元编程。注意，Scala 的静态类型系统比 Java 的更加统一和复杂。

Groovy 在语法上受 Java 的影响，但在语义上更多地受 Ruby 等语言的影响。

Scala 在语法上受到 Ruby 和 Java 的影响。它在语义上更多地受到 Java、SML、Haskell 和一种非常晦涩的 OO 语言（称为 gBeta）的影响。

由于处理 Java 重载的方式，Groovy 有“意外的”多重分派。

Scala 只是单一调度，但具有受 SML 启发的模式匹配来处理一些与多调度旨在处理的相同类型的问题。然而，多重分派只能在运行时类型上分派，Scala 的模式匹配可以在运行时类型、值或两者上分派。模式匹配还包括语法上令人愉悦的变量绑定。很难过分强调这个单一特性使 Scala 编程变得多么令人愉快。

Scala 和 Groovy 都支持一种带有 mixin 的多重继承形式（尽管 Scala 称它们为特征）。

Scala 在语言级别支持偏函数应用和柯里化，Groovy 有一个笨拙的“柯里”方法来做偏函数应用。

Scala 直接进行尾递归优化。我不相信 Groovy 会这样做。这在函数式编程中很重要，但在命令式编程中不太重要。

默认情况下，Scala 和 Groovy 都被热切地评估。但是，Scala 支持按名称调用参数。Groovy 没有 - 必须使用闭包来模拟名称调用。

Scala 有“for comprehensions”，它是在其他语言中发现的列表理解的泛化（从技术上讲，它们是 monad 理解加上一点——介于 Haskell 的 do 和 C# 的 LINQ 之间）。

Scala 没有“静态”字段、内部类、方法等的概念——它使用单例对象。Groovy 使用静态概念。

Scala 不像 Groovy 那样内置了算术运算符的选择。在 Scala 中，您可以非常灵活地命名方法。

Groovy 有用于处理 null 的 elvis 运算符。Scala 程序员更喜欢使用 Option 类型而不是使用 null，但是如果您愿意，可以很容易地在 Scala 中编写一个 elvis 运算符。

最后，有谎言，有该死的谎言，然后是基准。计算机语言基准测试游戏将 Scala 评为比 Groovy 快得多（速度从两倍到 93 倍不等），同时保持大致相同的源大小。[基准](http://shootout.alioth.debian.org/gp4/benchmark.php?test=all&lang=groovy&lang2=scala&box=1)。

我确信有很多很多我没有涵盖的差异。但希望这能给你一个要点。

他们之间有竞争吗？是的，当然，但没有你想象的那么多。Groovy 的真正竞争对手是 JRuby 和 Jython。

谁会赢？我的水晶球和其他人的一样破裂。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-01-14T19:57:49.617

scala 旨在成为一种面向对象/功能的混合语言，并且经过*精心*规划和设计。groovy 更像是许多人喜欢在 java 中使用的一组增强功能。我仔细看看两者，所以我可以告诉:)

他们都不比另一个好或坏。groovy 非常擅长元编程，scala 非常擅长所有不需要元编程的东西，所以......我倾向于两者都用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-04-03T02:40:06.103

Scala 有 Actor，这使得并发更容易实现。以及提供真正的、类型安全的多重继承的特征。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-02T22:56:51.383

您已经用静态和动态打字一针见血了。两者都是新一代动态语言的一部分，具有闭包、lambda 表达式等。两者之间也有一些语法差异，但在功能上，我认为 Groovy 和 Scala 之间没有太大差异。

Scala 实现列表有点不同；在 Groovy 中，几乎所有东西都是 java.util.List 的实例，而 Scala 使用列表和原始数组。Groovy 有（我认为）更好的字符串插值。

Scala 似乎更快，但 Groovy 的开发人员确实在推动 2.0 版本的性能。1.6 在速度上比 1.5 系列有了巨大的飞跃。

我认为这两种语言都不会真正“获胜”，因为它们针对的是两类不同的问题。Scala 是一种高性能语言，它非常类似于 Java，但没有与 Java 相同级别的样板文件。Groovy 用于快速原型设计和开发，其中速度不如程序员实现代码所需的时间重要。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-07T21:38:42.870

Scala 的学习曲线比 Groovy 陡峭得多。Scala 通过其模式匹配和基于尾的递归对函数式编程提供了更多支持，这意味着更多的纯 FP 工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-14T11:56:25.513

Scala 也有动态编译，我使用 twitter eval lib ( [https://github.com/twitter/util](https://github.com/twitter/util) ) 完成了它。我将 scala 代码保存在一个平面文件中（没有任何扩展名），并在运行时使用 eval 创建的 scala 类。我会说 scala 是元编程并且具有动态复杂性的特征

# iis - Safari 访问受 Windows 集成身份验证 (aka NTLM) 保护的网站时出现问题

> ID：711915
> 
> 赞同：6
> 
> 时间：2009-04-02T22:42:01.043
> 
> 标签：iis, authentication, safari, ntlm, wia

我们的 Web 应用程序使用 Windows 集成身份验证（又名 NTLM 身份验证）来确保安全。

它对 IE 和 Firefox 用户都可以正常工作，但 Safari 用户会遇到间歇性问题。浏览网站可以正常工作，但偶尔会出现加载页面元素（例如 CSS 或 JS 文件）的问题。重新加载，问题就会消失。

如果我们使用调试代理（Fiddler），我们可以看到 Safari 发生了很多额外的 401 请求。每隔一段时间，对资源的请求就会陷入 401 请求循环，并最终失败。

我看不到我们正在做任何事情来导致这种情况，而且这似乎是 Safari 中的一个错误。有没有人遇到过这个问题，并且有任何解决方案的建议？

谢谢，

达伦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-03T00:07:24.863

一些网站[http://www.musteat.org/nodes/show/151](http://www.musteat.org/nodes/show/151)表明这是协商身份验证的问题。

[您可以通过NTAuthenticationProviders](http://support.microsoft.com/kb/215383) Metabase 设置和以下 ADSUTIL 命令关闭协商以支持 IIS 中的纯 NTLM 。

```
cscript adsutil.vbs set w3svc/WebSite/<SiteID>/NTAuthenticationProviders "NTLM" 
```

将 <SiteID> 更改为适当的 ID，通常为 1。

# performance - 在循环中使用非整数计数器会改变性能吗？

> ID：711916
> 
> 赞同：0
> 
> 时间：2009-04-02T22:42:15.473
> 
> 标签：performance, for-loop, int

我只是好奇，在任何地方都找不到答案。通常，我们在循环中使用整数作为计数器，例如在 C/C++ 中：

```
for (int i=0; i<100; ++i) 
```

但我们也可以使用短整数甚至字符。我的问题是：它会改变性能吗？它少了几个字节，因此节省的内存可以忽略不计。如果我知道计数器不会超过 100，那么如果我使用 char 会造成任何伤害，这只会让我很感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-02T22:44:17.403

可能使用平台的“自然”整数大小将提供最佳性能。在 C++ 中，这通常是 int。但是，差异可能很小，您不太可能发现这是性能瓶颈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-02T23:24:29.803

取决于架构。在 PowerPC 上，使用除 int 以外的任何内容（或任何原生字长）通常会导致巨大的性能损失——例如，不要使用 short 或 char。Float 也即将推出。

您应该在您的特定架构上计时，因为它会有所不同，但在我的测试用例中，使用 short 而不是 int 会降低约 20% 的速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-02T22:50:42.100

我无法提供引用，但我听说您经常会通过使用 short 或 char 来产生一些性能开销。

内存节省是不存在的，因为它是一个临时堆栈变量。它所在的内存几乎肯定已经被分配了，并且您可能不会通过使用更短的内存来保存任何内容，因为下一个变量可能无论如何都希望与更大的边界对齐。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-02T22:54:42.510

你可以在 for 中使用任何你想要的合法类型；它不必是完整的甚至是内置的。例如，您也可以使用迭代器：

```
for( std::vector<std::string>::iterator s = myStrings.begin(); myStrings.end() != s; ++s )
{
...
} 
```

会不会对性能产生影响，归结为你使用的算子是如何实现的问题。所以在上面的例子中，这意味着 end()、operator!=() 和 operator++()。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-03T00:08:55.797

这不是一个真正的答案。我只是在探索 Crashworks 对 PowerPC 的评价。正如其他人已经指出的那样，使用映射到本机字长的类型应该会产生最短的代码和最佳的性能。

```
$ cat loop.c
extern void bar();

void foo()
{
    int i;

    for (i = 0; i < 42; ++i)
        bar();
}

$ powerpc-eabi-gcc -S -O3 -o - loop.c
.
.
.L5:
        bl bar
        addic. 31,31,-1
        bge+ 0,.L5 
```

它与`short i`, 而不是 ,完全不同`int i`，并且看起来也不会表现得那么好。

```
.L5:
        bl bar
        addi 3,31,1
        extsh 31,3
        cmpwi 7,31,41
        ble+ 7,.L5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-02T22:50:28.013

输入一个快速程序（您已经完成了最复杂的行）并对其进行分析可能比在这里问这个问题要快。:-)

FWIW，在默认使用 bignums 的语言（Python、Lisp 等）中，我从未见过循环计数器是瓶颈的配置文件。检查类型标签并不昂贵——最多几个指令——但可能比 (fix)int 和 short int 之间的差异更大。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-02T22:50:29.307

只要您不使用 a`float`或 a进行操作，可能就不会`double`。由于内存很便宜，您可能最好只使用`int`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-02T23:47:04.257

理论上，一个 unsigned 或 size_t 应该会给你更好的结果（哇，容易的人，我们正在努力针对邪恶进行优化，并反对那些大喊“过早”的废话。这是新趋势）。

然而，它确实有它的缺点，主要是经典的一个：搞砸了。

谷歌开发人员似乎避免了它，但它是与 std 或 boost 作斗争的皮塔。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-02T22:44:01.070

不，它真的不应该影响性能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-09-28T02:54:30.300

如果你用优化编译你的程序（例如，gcc -O），那没关系。编译器将为该值分配一个整数寄存器，并且永远不会将其存储在内存或堆栈中。如果您的循环调用一个例程，gcc 将分配变量 r14-r31 之一，任何被调用的例程都将保存和恢复该变量。所以请使用 int，因为这不会让阅读您的代码的人感到惊讶。

# php - netbeans php插件通过FTP上传文件时如何控制文件权限

> ID：711918
> 
> 赞同：5
> 
> 时间：2009-04-02T22:42:25.910
> 
> 标签：php, netbeans, ftp, file-permissions

每当 netbeans 执行 ftp 上传时，文件都会以设置为 640 的权限上传。这会导致 PHP 抛出以下错误：

```
Warning: Unknown: failed to open stream: Permission denied in Unknown on line 0

Fatal error: Unknown: Failed opening required '/Library/WebServer/Documents/notes/index.php' (include_path='.:/usr/local/php5/lib/php') in Unknown on line 0 
```

虽然我可以在命令提示符下快速清理它，`chmod o+r ./*`但它会导致 netbeans 在下次我点击运行时重新同步整个项目，这反过来又将权限设置回 640。

我需要一种方法让 netbeans 上传权限设置为 644 的文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2011-04-11T21:46:02.257

如果您不想更改远程文件权限，请确保选中“项目属性”>“运行配置”下的“保留远程文件权限”复选框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-03T00:36:01.410

我确定问题不在于netbeans。它`ftpd`在服务器上。

修复方法是创建一个名为`ftpd.conf`in的文件`/etc/`并添加以下行：

```
umask all 022 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T08:06:10.093

在您的 vsftp.conf 文件中，查找以下内容：

```
# Default umask for local users is 077\. You may wish to change this to 022,
local_umask=022 
```

然后，根据需要取消注释/调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-20T05:38:54.923

如果你像我一样累了，只是为了让你轻松一点。所有其他答案都是兔子洞并且对我不起作用。

[![在此处输入图像描述](https://i.stack.imgur.com/ZjbLW.png)](https://i.stack.imgur.com/ZjbLW.png)

# c# - C# 中的对象实例

> ID：711920
> 
> 赞同：0
> 
> 时间：2009-04-02T22:42:27.080
> 
> 标签：c#, object-reference

为什么我得到“对象引用未设置为对象的实例”

```
protected void GetData()
{
    ...

    id = this.GetTabControl().ID; //<---------here
}

...

protected ASPxPageControl GetTabControl()
{
    return (ASPxPageControl)this.FindControl("DetailTab");
} 
```

---------我假设 FindControl 不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T22:44:04.220

想必是因为`GetTabControl()`正在回归`null`。但是，如果没有更多代码，我们无法说出*原因。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:44:45.577

`GetTabControl()`必须返回一个空引用。

# algorithm - 哪种排序数据结构针对查找范围内的项目进行了优化？

> ID：711921
> 
> 赞同：1
> 
> 时间：2009-04-02T22:43:04.707
> 
> 标签：algorithm, data-structures, theory

假设我有一堆带有日期的对象，我经常想找到两个任意日期之间的所有对象。什么样的数据结构对此有好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T22:49:13.663

假设您说排序时按日期表示，则数组会执行此操作。

执行二进制搜索以查找 >= 开始日期的索引。然后，您可以进行另一次搜索以找到 <= 结束日期的索引，从而为您留下偏移量和项目计数，或者如果您要处理它们，只需遍历列表直到超过结束日期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-02T23:20:57.800

二叉搜索树听起来像您正在寻找的东西。您可以使用它来查找 O(log(N) + K) 中的所有对象，其中 N 是对象的总数，K 是实际在该范围内的对象的数量。（只要它是平衡的）。插入/移除是 O(log(N))。

大多数语言都有这个的内置实现。

*   C++： [http ://www.cplusplus.com/reference/stl/set/](http://www.cplusplus.com/reference/stl/set/)
*   Java：http: [//java.sun.com/j2se/1.4.2/docs/api/java/util/TreeSet.html](http://java.sun.com/j2se/1.4.2/docs/api/java/util/TreeSet.html)

您可以找到范围的下限（以 log(n) 为单位），然后从那里迭代直到达到上限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T23:33:53.447

如果没有更多细节，很难给出一个好的答案。

你需要什么样的性能？

如果线性很好，那么我将只使用一个日期列表并遍历该列表，收集该范围内的所有日期。正如**安德鲁格兰特**建议的那样。

列表中有重复项吗？

如果你需要在你的集合中有重复的日期，那么大多数二叉树的实现可能会被淘汰。Java 的 TreeSet 之类的东西是集合实现，不允许重复元素。

访问特点是什么？大量查找而几乎没有更新，反之亦然，甚至相当？

大多数数据结构在查找和更新之间进行权衡。如果您正在进行大量更新，那么一些针对查找优化的数据结构将不会那么好。

那么数据结构的访问特性是什么，需要什么样的性能，它必须支持哪些结构特性（例如必须允许重复元素）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T23:48:30.137

如果您需要进行随机访问修改：一棵树，如 v3 的答案。通过查找找到范围的底部，然后向上计数。插入或删除一个节点是 O(log N)。stbuton 提出了一个很好的观点，如果你想允许重复（这对于带日期戳的事件似乎是合理的），那么你不想要一个基于树的集合。

如果您不需要进行随机访问修改：排序数组（或向量或其他）。通过二进制印章找到范围开始的位置，然后向上计数。插入或删除在中间是O(N)。重复很容易。

在这两种情况下，查找的算法性能相同，O(M + log N)，其中 M 是范围的大小。但是数组每个条目使用更少的内存，并且*可能*更快地计算范围，因为在二进制切碎之后它只是向前顺序内存访问而不是跟随指针。

在这两种情况下，您都可以安排在最后插入（摊销）O（1）。对于树，在头部保留一个结束元素的记录，你会得到一个 O(1) 的界限。对于数组，以指数方式增长它，你得到摊销 O(1)。如果您所做的更改总是或几乎总是“使用当前时间添加新事件”，这将很有用，因为时间（您希望）是一个不减少的数量。如果您使用的是系统时间，那么您当然必须检查一下，以免时钟向后重置时发生意外。

替代答案：一个SQL表，让数据库优化它想要的方式。Google 的 BigTable 结构专门设计用于快速查询，确保任何查询的结果始终是来自预先准备好的索引的连续序列:-)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-02T22:54:27.130

您需要一种结构，使您的对象按日期排序，无论何时插入或删除一个新对象，并且在给定日期之后或之前找到所有对象段的边界很容易。

堆似乎是完美的候选者[。](http://en.wikipedia.org/wiki/Heap_(data_structure))在实际应用中，堆只是简单地用一个数组来表示，所有的对象都是按顺序存储的。将排序后的数组视为堆只是一种在正确的位置和 O(log(n)) 中插入和删除新对象的方法。

当你必须找到日期A（排除）和B（包含）之间的所有对象时，找到A的位置（或*插入*位置，即较早元素的位置晚于A），以及B的位置（或 B 的插入位置），并返回这些位置之间的所有对象（这只是数组/堆中这些位置之间的部分）

# c# - 在 C# 接口中遇到问题

> ID：711922
> 
> 赞同：0
> 
> 时间：2009-04-02T22:43:05.720
> 
> 标签：c#, .net, interface, ienumerable

我试图理解这个 -why- ......当我使用 IInterface 语法时，我真的很难理解我告诉编译器做什么的概念。任何人都可以用“这是怎么回事”的方式来解释它吗？

无论如何......我的主要问题是......

和有什么区别

```
public IEnumerable<string> MyMethod() {...} 
```

和

```
public string MyMethod() : IEnumerable {...} 
```

你为什么要使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T22:48:23.337

```
public string MyMethod() : IEnumerable {...} 
```

不会编译，这是一个区别。

但你可以

```
public class MyClass : IEnumerable<string> {...} 
```

接着

```
public IEnumerable<string> MyMethod() 
{
   MyClass mc = new MyClass();
   return mc;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T22:52:15.043

当您说时`public IEnumerable<string> MyMethod() {...}`，您是在声明一个方法，该方法返回一些实现的实例`IEnumerable<string>`。这个实例可能是一个字符串数组、a`List<string>`或您创建的某种类型。

当您说时`public class MyClass : IEnumerable<string> {...}`，您是在声明一个实现的类型`IEnumerable<string>`。MyMethod 可以返回 MyClass 的一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T22:54:16.850

第一个是有效的方法声明，只要它存在于类中，即

```
class MyClass 
{
    public IEnumerable<string> MyMethod() {...}
} 
```

第二个是无效的 C# 并且不会编译。它接近于类声明。

```
class MyClass : IEnumerable<string>
{

} 
```

# sql - 如何删除 MySQL 中每个用户的不是最新 N 的所有行？

> ID：711936
> 
> 赞同：2
> 
> 时间：2009-04-02T22:46:40.953
> 
> 标签：sql, mysql, database

假设我有一张桌子`foo`，里面有这样的东西：

`id`, `user_id`, `timestamp`,`some_value`

我想要做的是删除所有不是**每个用户**最新 N 的行。

删除本身可以通过以下方式处理：

```
DELETE FROM foo WHERE id NOT IN (...) 
```

因此您可以将问题改写为：如何**为每个用户**获取最新的 N（可能更少）行。这意味着如果我有 U 个用户，我最终可能会得到 N*U 行，所以`LIMIT`不会真正起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T08:54:58.920

实际上，可以通过单个查询来完成：

```
DELETE  l.*
FROM    foo l
JOIN    (
        SELECT  user_id,
                COALESCE(
                (
                SELECT  timestamp
                FROM    foo li
                WHERE   li.user_id = dlo.user_id
                ORDER BY
                        li.user_id DESC, li.timestamp DESC
                LIMIT 2, 1
                ), CAST('0001-01-01' AS DATETIME)) AS mts,
                COALESCE(
                (
                SELECT  id
                FROM    foo li
                WHERE   li.user_id = dlo.user_id
                ORDER BY
                        li.user_id DESC, li.timestamp DESC, li.id DESC
                LIMIT 2, 1
                ), -1) AS mid
        FROM    (
                SELECT  DISTINCT user_id
                FROM    foo dl
                ) dlo
        ) lo
ON      l.user_id = lo.user_id
        AND (l.timestamp, l.id) < (mts, mid) 
```

在此处查看详细说明：

*   [**保留行**](http://explainextended.com/2009/04/07/keeping-rows/)（如何删除除 之外的所有行`TOP N`）
*   [**高级行采样**](http://explainextended.com/2009/03/06/advanced-row-sampling/)（如何`TOP N`为每个选择行`GROUP`）
*   [**保持组的最新行**](http://explainextended.com/2009/04/26/keeping-latest-rows-for-a-group/)（如何一起使用上述方法）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T23:04:08.260

MySQL 不支持在同一个查询中从同一张表中读取`SELECT`并在同一张表上执行`UPDATE`// `INSERT`。`DELETE`所以在一个声明中做你想做的事情会很棘手。

我将分两个阶段进行：首先，查询`$N`每个用户的最新记录，并将它们存储在临时表中：

```
CREATE TEMPORARY TABLE foo_top_n
  SELECT f1.id
  FROM foo f1 LEFT OUTER JOIN foo f2
    ON (f1.user_id = f2.user_id AND f1.id < f2.id)
  GROUP BY f1.id
  HAVING COUNT(*) < $N; 
```

接下来，使用多表`DELETE`语法并加入`foo`临时表，在没有找到匹配的地方删除：

```
DELETE f1 FROM foo f1 LEFT OUTER JOIN foo_top_n f2 USING (id)
WHERE f2.id IS NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T22:53:30.143

首先，使用以下方法获取总行数：

```
SELECT COUNT(*) as total FROM foo WHERE id NOT IN (...) 
```

然后试试这个：

```
DELETE FROM foo WHERE id NOT IN (...) ORDER BY timestamp ASC LIMIT (Count - N) 
```

用你的号码替换 N。这将删除除最新的 N 行之外的所有行。例如，如果总共有 100 行并且您希望保存最新的 5 行，这将删除 (100-5) 最旧的 95 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T22:55:41.977

```
DELETE FROM foo WHERE id NOT IN ( SELECT id FROM foo ORDER BY timestamp DESC LIMIT N ) 
```

**编辑：**

我误解了这个问题。您想为每个用户保留 N 条记录。也许是这样：

```
SELECT user_id FROM foo 
```

然后对于每个 user_id（作为 currentID）：

```
DELETE FROM foo WHERE user_id=currentID AND id NOT IN ( SELECT id FROM foo WHERE user_id=currentID ORDER BY timestamp DESC LIMIT N ) 
```

（我不太确定语法，但我希望这个想法很清楚）

# asp.net - 在 ASP.NET 中使用 DisplayNameAttribute

> ID：711940
> 
> 赞同：7
> 
> 时间：2009-04-02T22:49:26.517
> 
> 标签：asp.net

我想将 List 绑定到网页上的 GridView，但通过注释覆盖属性名称的显示方式。我认为 System.ComponentModel 会起作用，但这似乎不起作用。这仅适用于 Windows 窗体吗？：

```
using System.ComponentModel;

namespace MyWebApp
{
    public class MyCustomClass
    {
        [DisplayName("My Column")]
        public string MyFirstProperty
        {
            get { return "value"; }
        }

    public MyCustomClass() {}
} 
```

然后在页面上：

```
protected void Page_Load(object sender, EventArgs e)
{
    IList<MyCustomClass> myCustomClasses = new List<MyCustomClass>
    {
        new MyCustomClass(),
        new MyCustomClass()
    };

TestGrid.DataSource = myCustomClasses;
TestGrid.DataBind(); 
```

}

这会将“MyFirstProperty”呈现为列标题，而不是“我的列”。这不应该工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-04T13:07:02.433

When using .net 4 or later you can use gridview1.enabledynamicdata(typeof(mytype)). I haven't looked at all the types you can use there but I know the [displayname("somename")] works well but the [browsable(false)] doesn't omit the column from the grid. It looks like a knit one slip one from MS. at least you can easily rename column names and to omit a column I just declare a variable instead of using a property. It has the same effect...

Just by the way, using the designer to create columns is the easy way out but to just show a different column name takes way to much time especially with classes with many fields.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-03T04:34:04.053

如果您只关心 GridView 中的标题文本，只需使用您绑定的每个字段的 HeaderText 属性。如果要自动生成列，只需在绑定 GridView 后设置 HeaderText。

如果您想要一个考虑到您放置在绑定类的属性上的某些属性的 GridView，我相信您需要创建自己的 GridView。

我可能错了，但我没有看到任何来自控件供应商（至少 Telerik、Janus Systems 和 Infragistics）的 ASP.NET Grid 这样做。如果你这样做，也许把这个想法卖给他们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-03T21:29:23.533

大魔王说的……

答案似乎是否定的，你不能。至少不是开箱即用。

System.Web.UI.WebControls.GridView 使用反射属性的名称：

```
protected virtual AutoGeneratedField CreateAutoGeneratedColumn(AutoGeneratedFieldProperties fieldProperties)
{
    AutoGeneratedField field = new AutoGeneratedField(fieldProperties.DataField);
    string name = fieldProperties.Name; //the name comes from a PropertyDescriptor
    ((IStateManager) field).TrackViewState();
    field.HeaderText = name; //<- here's reflected property name
    field.SortExpression = name;
    field.ReadOnly = fieldProperties.IsReadOnly;
    field.DataType = fieldProperties.Type;
    return field;
} 
```

虽然 System.Windows.Forms.DataGridView 使用 DisplayName（如果可用）：

```
public DataGridViewColumn[] GetCollectionOfBoundDataGridViewColumns()
{
    ...
    ArrayList list = new ArrayList();
    //props is a collection of PropertyDescriptors
    for (int i = 0; i < this.props.Count; i++)
    {
        if (...)
        {
            DataGridViewColumn dataGridViewColumnFromType = GetDataGridViewColumnFromType(this.props[i].PropertyType);
            ...
            dataGridViewColumnFromType.Name = this.props[i].Name;
            dataGridViewColumnFromType.HeaderText = !string.IsNullOrEmpty(this.props[i].DisplayName) ? this.props[i].DisplayName : this.props[i].Name;
        }
    }
    DataGridViewColumn[] array = new DataGridViewColumn[list.Count];
    list.CopyTo(array);
    return array;
} 
```

不幸的是，虽然您可以覆盖 CreateAutoGeneratedColumn，但缺少的 DisplayName 和基础属性描述符都不会传递，并且您不能覆盖 CreateAutoGeneratedColumns（尽管您可以 CreateColumns）。

这意味着您必须自己和在其他地方迭代反射属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-03T11:47:08.177

Are you using .net4, what you need to do is to set enabledynamicdata on the grid view to true.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-02T13:44:34.110

您现在可以在 asp.net mvc2 上执行此操作。它就像那样工作

# algorithm - 目前认为 2D 点匹配的“最佳”算法是什么？

> ID：711941
> 
> 赞同：9
> 
> 时间：2009-04-02T22:49:41.243
> 
> 标签：algorithm, computer-science, 2d, pattern-matching

我有两个包含 xy 坐标（星）的列表。我还可以将星等（亮度）附加到每颗恒星上。现在每颗星星都有随机的位置抖动，每张图像中可能会有一些额外或缺失的点。我的问题是，“对于这样的数据集，最好的 2D 点匹配算法是什么？” 我猜对于简单的线性（平移、旋转、缩放）和非线性（例如，坐标中的 n 次多项式）都是如此。在点匹配领域的行话中，我正在寻找能够在具有噪声和伪点的 2D 点匹配程序之间的枪战中获胜的算法。可能会有不同的“赢家”，这取决于是否使用了标签信息（幅度）和/或转换是否被限制为线性。

我知道有许多类的 2D 点匹配算法和每个类中的许多算法（实际上可能总共有数百个），但我不知道哪个（如果有的话）被认为是“最好的”或“最标准的”计算机视觉领域的人们。可悲的是，我想阅读的许多文章都没有在线版本，我只能阅读摘要。在我决定实施一个特定的算法之前，最好听听几位专家的意见，把小麦从谷壳中分离出来。

我有一个使用三角形的有效匹配程序，但它经常失败（大约 5% 的时间），因此解决方案转换有明显的扭曲，但没有明显的原因。这个程序不是我写的，而是来自大约 20 年前写的一篇论文。我想编写一个性能最强大的新实现。我假设（希望）在这一领域取得了一些进展，这使得这变得合理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-03T11:45:22.720

如果您对星匹配感兴趣，请在此处查看[Astrometry.net 盲天体测量求解器](http://astrometry.net/)和相关[论文](http://cosmo.nyu.edu/hogg/research/2006/09/28/astrometry_google.pdf)。他们使用四点四边形来解决 Flickr 夜空图片中的星形配置。看看[这个采访](http://code.flickr.com/blog/2009/02/18/found-in-space/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T23:59:24.587

对此没有单一的“最佳”算法。有许多不同的技术，在特定的数据集和数据类型上，每种技术都比其他技术更好。

我推荐的一件事是阅读[Insight Toolkit](http://itk.org/)教程中的[图像配准介绍。](http://www.itk.org/CourseWare/Training/RegistrationMethodsOverview.pdf) ITK 支持多种类型的图像配准（这听起来像是您正在尝试的），并且在许多情况下都非常健壮。他们的大多数用户都在医学领域，因此您必须了解很多医学术语，但算法和代码适用于任何类型的图像（包括 1、2、3 和 n 维图像，不同的类型等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T12:29:01.083

我不确定它会起作用，但值得一试：

对于每颗恒星，对所有其他恒星进行圆形时间射线傅里叶变换（以它为中心）（注意：这不是标准的傅里叶变换，它是线时间线）。圆乘射线的相空间是整数乘线，但是由于我们只有有限的精度，所以你只得到一个矩阵；矩阵的维度取决于精度。现在尝试将矩阵相互配对（例如使用 L_2 范数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-03T10:46:03.457

您可以考虑首先仅在 N 颗最亮的恒星上应用您的算法，然后逐步包含其他以优化结果，同时缩小搜索范围。

使用[RANSAC](http://en.wikipedia.org/wiki/RANSAC)来获得加分的鲁棒性也很常见。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-02T23:06:59.003

不久前，我在电视上看到一个节目，讲述研究人员如何拍摄鲸鱼照片并使用照片上的斑点（对于每条鲸鱼来说都是独一无二的）来识别每条鲸鱼。它使用了点之间的角度。通过使用角度，图像是否被旋转、缩放或平移并不重要。这听起来与您对三角形所做的相似。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-02T23:45:30.237

我认为“最好的”（最技术性的）方法是对原始图像和新的线性修改图像进行傅里叶变换。通过进行一些简单的过滤，应该很容易找出图像相对于旧图像的方向和比例。[这里](http://homepages.inf.ed.ac.uk/rbf/HIPR2/fourier.htm)有 2d Fourier Transform 的描述。

# apache-flex - 向 HBox 添加许多图像会导致 Flex 中的显示问题

> ID：711948
> 
> 赞同：0
> 
> 时间：2009-04-02T22:51:05.657
> 
> 标签：apache-flex, flash, actionscript-3

在 Flex 中，我使用 HBox 来保存缩略图。当添加的缩略图超出显示范围时，HBox 变为可滚动的。

当我添加超过 80 张图像时，当我滚动回第一张图像时，图像开始“撕裂”，直到我将鼠标悬停在它们上方。

这是添加少量图像时的外观：

![预期的](https://imgur.com/1EMTF.png)

添加许多图像时：

![越野车](https://imgur.com/1EMW7.png)

我应该使用 HBox 以外的东西来完成这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T23:33:25.773

HBox 不使用虚拟渲染，所以我实际上推荐一个基于 List 的控件，如[Horizo​​ntalList](http://livedocs.adobe.com/flex/3/langref/mx/controls/HorizontalList.html)。您可能还想使用 Ely Greenfield 的[SuperImage](http://www.quietlyscheming.com/blog/2007/01/29/new-flex-componentsample-superimage/)来避免滚动时的闪烁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T23:35:34.987

使用 TileList。它可以使用使用更少资源的 ItemRenderers。

# .net - 我可以使用 XDocument.Save 并排除 XML 声明吗？

> ID：711954
> 
> 赞同：2
> 
> 时间：2009-04-02T22:52:54.700
> 
> 标签：.net, xml, linq-to-xml

我正在将 XML 文件加载到 XDocument 中，对其进行处理，然后调用 Save(fileName) 来重写 XML 文件。原始文件没有 XML 声明，有没有办法避免 XDocument 添加 XML 声明？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T22:56:38.153

我认为您必须使用 XmlWriter。或 ToString。

刚刚发现[这篇文章](http://msdn.microsoft.com/en-us/library/bb387027.aspx)似乎同意。

# c# - 从另一个集合的内容中过滤一个项目集合

> ID：711959
> 
> 赞同：3
> 
> 时间：2009-04-02T22:54:23.290
> 
> 标签：c#, linq, sorting, collections

这曾经对我有用，然后失败了。我只想返回那些包含所有过滤器的项目，而不是像现在这样至少返回一个过滤器。这里有什么问题？

```
private IQueryable<IndexItem> FilteredIndex (IQueryable<IndexItem> index, IEnumerable<string> filters)

    {

        var filteredIndex= from f in filters.AsQueryable() 
               where f.Length>0
               from i in index 
               where i.FilterNames.Contains(f)
               select i;
        return filteredIndex;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-03T01:44:27.220

直线前进。对于索引中的给定项目，检查给定项目包含该过滤器的所有过滤器是否为真。有了这个，只需从索引中选择给定条件为真的所有项目。

```
index.Where(item => 
   filters.All(filter => item.FilterNames.Contains(filter))) 
```

I am not sure if the check for length greater than zero is required, nut it is easily integrated.

```
index.Where(item => 
   filters.All(filter =>
      (filter.Length > 0 ) || (item.FilterNames.Contains(filter)))) 
```

It works with LINQ to Objects and I guess it does what you want, but I am not sure if it works with LINQ to SQL.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T23:04:37.183

怎么样：

```
foreach(string s in filters) {
    if(s.Length == 0) continue;
    string tmp = s; // because of "capture" problem
    index = index.Where(i => i.FilterNames.Contains(tmp));
}
return index; 
```

这将应用一系列`Where`子句，涵盖所有过滤器 - 本质上是`AND`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-03T00:34:13.520

扭转局面。您想要的是索引中的那些项目，其中 FilterNames 中的每个项目在过滤器中都有相应的条目。我不确定它的性能如何，但应该进行计数比较。就像是：

```
private IQueryable<IndexItem> FilteredIndex(IQueryable<IndexItem> index, IEnumerable<string> filter)
{
    var filteredIndex = from i in index
                        where (from s in i.FilterNames
                               where filter.Contains(s)
                               select s).Count() == i.FilterNames.Count
                        select i;
    return filteredIndex;
} 
```

# ruby-on-rails - 如何在在线商店应用程序中为“产品”建模

> ID：711963
> 
> 赞同：8
> 
> 时间：2009-04-02T22:55:53.833
> 
> 标签：ruby-on-rails, language-agnostic, e-commerce, modeling

我正在建立一个在线商店来销售“绿色超大号 T 恤”之类的产品。即，同一件衬衫可以有多种尺寸/颜色，不同的组合可以售罄，不同的组合可能有不同的价格等。

我的问题是我应该如何在我的 Rails 应用程序中对这些产品进行建模（或者实际上如何在任何应用程序中进行建模）。

我目前的想法是：

```
Class Product
  has_many :variants, :through => :characteristics
  has_many :characteristics 
end

Class Characteristic
  belongs_to :product
  belongs_to :variants
end

Class Variant
  has_many :products, :through => :characteristics
  belongs_to :characteristic
end 
```

因此，每个产品将具有一个或多个特性（例如，“颜色”、“尺寸”等），然后每个特性将具有一个或多个变体（例如，“红色”、“蓝色”等）。

这种方法的问题是**我在哪里存储价格和库存？**即，给定产品的价格和库存由其特征所采用的变体决定。（绿色可能比红色贵，大的可能缺货等）。

我的一个想法是给产品一个“base_price”，并让变体修改它，但这似乎过于复杂（并且可能不起作用）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-02T23:20:24.617

我已经看到了解决这种困境的两种方法。一是尝试用特性来定义“主”产品的从属产品。这里的挑战是，除了您的想法之外，在大多数情况下，产品将随着新制造商的发展而发展，从而带来新的方面。例如，一家制造商可能会生产更便宜的产品，但对标志或缝线有不同的应用方法，这可能足以跟踪。

我认为为每个产品携带一个不重要的产品编号，然后将特征附加为属性效果最好。它易于搜索和扩展。如果一组产品密切相关，则单个产品附加到的 ProductGroup 效果很好。

在表格中：

```
 ProductGroup
            --------------------
            ProductGroupID
            ProductGroupName
            ProductGroupDescription

            Product
            --------------------
            ProductID
            ProductGroupID
            QtyOnHand
            BasePrice
            ProductColorID
            ProductSizeID

            ProductColor
            ------------
            ProductColorID
            ProductColorName

            ProductSize
            --------------
            ProductSizeID
            ProductSizeName

            ...more attributes... 
```

此处的优点是您可以轻松查询特定属性，属性是“灵活的”，因为可以添加更多属性（并且旧属性已调整：如果您从“红色”开始，然后在颜色池中添加了另一个“红色”，您可以将它们更改为“栗色”和“亮红色”。

您可以在详细的产品级别控制价格和库存（尽管可能需要更多表格来说明*采购*成本）。

**这一切都假设您的特征是普遍共享的。** 如果不是，您的特征子表方法可以通过在特征和产品详细信息表之间创建一个连接表并根据需要进行填充来工作。这将需要更多的业务逻辑。以确保每个产品类别获得*所有*必要的特征。**在后一种情况下，我将在基本产品表中使用“原型”产品（数量和成本为 0），我将从中克隆特征，然后在输入每个新产品时进行调整。**随着您的前进，当出现新的变体时，具有“克隆此产品”功能，允许您调整与基本产品的*差异*，这将是有价值的。

最后，就管理库存和定价而言，这将发生在 UI 层。能够为相关产品（产品组）生成查询并管理相关产品的所有定价将大大有助于使其宜居。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-05T16:44:52.780

只是一个速记。您可以随时尝试查看其他一些电子商务产品的源代码，例如[Spree](http://spreehq.org/)和[Substruct](http://code.google.com/p/substruct/ "子结构")，他们可能已经为您回答了这个问题。

# c# - C#通过事件同步两个对象

> ID：711982
> 
> 赞同：4
> 
> 时间：2009-04-02T23:05:51.470
> 
> 标签：c#, multithreading, synchronization

我有 2 个对象。Foo 和 Bar 在两个不同的线程中。现在我想在 Foo 但在 Bar 的线程中引发一个事件。

我该如何使用 SynchronizationContext.Current 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T23:09:31.493

“Foo”和“Bar”都没有真正的线程......您需要一个外部消息泵机制来在线程之间推送消息，例如在 winforms (Control.Invoke) 和 WPF (Dispatcher) 中提供的。或者，*如果*您不介意其中一个线程专门用于（被动地）等待消息，那么（同步）生产者/消费者队列之类的东西就足够了。

除非您已经编写了自己的同步上下文，否则我们不可能说`SynchronizationContext.Current`会是什么；在很多情况下是这样`null`。

您可以为问题添加更多上下文吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T23:12:24.667

同步上下文更多地用于 Silverlight 应用程序，不是吗？如果您需要在同一个线程中运行不同的操作，请使用 SynchronizationContext.Send() 启动每个操作。

（希望当你说你想在 Bar 的线程中运行它时，你指的是同步上下文将在其中运行任何 Send()d 回调的 UI 线程。如果是这样，只有来自 Foo 的事件需要发送（）d）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T23:35:28.527

我能想到的唯一方法是使用 UI 元素中内置的 InvokeRequired() 和 BeginInvoke() 方法来帮助您确保修改 UI 元素的所有代码都从用于创建元素的同一线程执行。

...在 Foo 开始之前，在 Bar 中，创建某个 UI 元素的实例，比如一个标签...然后当在 Foo 中引发事件时，在事件处理程序中，对该 UI 元素调用 BeginInvoke()，这将保证运行的代码将在 Bar 上运行...

但是你为什么要这样做？

# sql - SQL 更新 VB.NET 中的数据库，遇到麻烦

> ID：711989
> 
> 赞同：1
> 
> 时间：2009-04-02T23:09:01.947
> 
> 标签：sql, database, vb.net

我正在使用数据网格视图来显示数据库中的信息，但我无法正确更新它。我可以看到数据库中的数据，但是当我更改信息并保存它时，它会更改整个列的信息。我的行需要在同一列中有不同的值，所以这是一个问题。

- 到目前为止，这是我的代码，程序所做的是列出输入的交易。

```
Public Class Form1

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 
     Handles Button3.Click

    If MsgBox("Add new transaction?", MsgBoxStyle.YesNo, " ") <> 7 Then
        If IsNumeric(in_cost.Text) Then
            Dim x As Int16 = Database1DataSet.Table1.Count + 1      '//gets # value
            Me.Table1TableAdapter.Insert(Format(Now, "dddd, M/dd/yy"), x, in_cost.Text, in_prod.Text, in_type.Text, in_note.Text, 9999.99)   '//Writes new index to DB table
            Me.Table1TableAdapter.Fill(Me.Database1DataSet.Table1)
        Else
            MsgBox("Cost is non-numeric!")
        End If
    End If
End Sub
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Me.Table1TableAdapter.Fill(Me.Database1DataSet.Table1)
End Sub
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.Table1TableAdapter.Fill(Me.Database1DataSet.Table1)
End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Me.Table1TableAdapter.Update(Me.Database1DataSet.Table1)
End Sub
End Class 
```

-SQL 更新命令：

```
UPDATE Table1

SET        Balance = @p1, Note = @p2, Type = @p3, Product = @p4, Cost = @p5, # = @p6, Date = @p7 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-02T23:15:17.297

它会更改每一行，因为您的更新语句没有 where 子句。如果没有 where 子句，就没有谓词，所以它匹配每一行，所以每一行都会更新。

您的更新语句需要一个 where 子句（谓词）。在更新语句的末尾可能是“where id = @id”。

# collections - 在 PowerShell 中展平数组

> ID：711991
> 
> 赞同：28
> 
> 时间：2009-04-02T23:10:25.687
> 
> 标签：collections, powershell

假设我们有：

```
$a = @(1, @(2, @(3))) 
```

我想弄`$a`平`@(1, 2, 3)`。

我找到[了一种解决方案](http://dougfinke.com/blog/index.php/2008/07/17/powershell-quiz-2)：

```
@($a | % {$_}).count 
```

但也许有更优雅的方式？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-02T23:28:48.560

管道是扁平化嵌套结构的正确方法，所以我不确定什么会**更**“优雅”。是的，语法看起来有点杂乱，但坦率地说非常有用。

**2020 编辑**

这些天推荐的语法是扩展`%`为`ForEach-Object`. 更冗长但绝对更具可读性：

```
@($a | ForEach-Object {$_}).count 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-03T01:00:56.373

相同的代码，只是包装在函数中：

```
function Flatten($a)
{
    ,@($a | % {$_})
} 
```

测试：

```
function AssertLength($expectedLength, $arr)
{
    if($ExpectedLength -eq $arr.length) 
    {
        Write-Host "OK"
    }
    else 
    {
        Write-Host "FAILURE"
    }
}

# Tests
AssertLength 0 (Flatten @())
AssertLength 1 (Flatten 1)
AssertLength 1 (Flatten @(1))
AssertLength 2 (Flatten @(1, 2))
AssertLength 2 (Flatten @(1, @(2)))
AssertLength 3 (Flatten @(1, @(2, @(3)))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-17T00:34:49.390

您可以使用 .NET 的 String.Join 方法。

```
[String]::Join("",$array) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-20T13:40:47.873

This problem is probably most elegantly resolved with [the `.ForEach()` array method](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_arrays?view=powershell-7.1#foreach) introduced in Powershell v4.0\. Performance-wise it has the advantage of not needing to construct a pipeline, so in some cases it might perform better.

```
> $a.ForEach({$_}).Count
3 
```

If you already have a pipeline, the easiest way to flatten an array is to pipe it through `Write-Output`:

```
> $b = $a | Write-Output
> $b.Count
3 
```

# java - Java有路径连接方法吗？

> ID：711993
> 
> 赞同：142
> 
> 时间：2009-04-02T23:12:35.667
> 
> 标签：java, file, file-io, path

### 完全重复：

[在java中组合路径](https://stackoverflow.com/questions/412380/)

我想知道Java中是否有这样的方法。以此片段为例：

```
// this will output a/b
System.out.println(path_join("a","b"));
// a/b 
System.out.println(path_join("a","/b"); 
```

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2009-04-02T23:15:07.673

这涉及 Java 版本 7 和更早版本。

引用[同一个问题的好答案](https://stackoverflow.com/questions/412380/combine-paths-in-java/412495#412495)：

如果您希望稍后将其作为字符串返回，则可以调用 getPath()。事实上，如果你真的想模仿 Path.Combine，你可以这样写：

```
public static String combine (String path1, String path2) {
    File file1 = new File(path1);
    File file2 = new File(file1, path2);
    return file2.getPath();
} 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2009-04-03T06:15:04.463

尝试：

```
String path1 = "path1";
String path2 = "path2";

String joinedPath = new File(path1, path2).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T23:15:57.420

一种方法是获取系统属性，为您提供操作系统的路径分隔符，[本教程](http://java.sun.com/docs/books/tutorial/essential/environment/sysprop.html)解释了如何。然后，您可以使用`file.separator`.

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2009-04-02T23:35:26.000

这是一个开始，我不认为它完全按照您的意图工作，但它至少会产生一致的结果。

```
import java.io.File;

public class Main
{
    public static void main(final String[] argv)
        throws Exception
    {
        System.out.println(pathJoin());
        System.out.println(pathJoin(""));
        System.out.println(pathJoin("a"));
        System.out.println(pathJoin("a", "b"));
        System.out.println(pathJoin("a", "b", "c"));
        System.out.println(pathJoin("a", "b", "", "def"));
    }

    public static String pathJoin(final String ... pathElements)
    {
        final String path;

        if(pathElements == null || pathElements.length == 0)
        {
            path = File.separator;
        }
        else
        {
            final StringBuilder builder;

            builder = new StringBuilder();

            for(final String pathElement : pathElements)
            {
                final String sanitizedPathElement;

                // the "\\" is for Windows... you will need to come up with the 
                // appropriate regex for this to be portable
                sanitizedPathElement = pathElement.replaceAll("\\" + File.separator, "");

                if(sanitizedPathElement.length() > 0)
                {
                    builder.append(sanitizedPathElement);
                    builder.append(File.separator);
                }
            }

            path = builder.toString();
        }

        return (path);
    }
} 
```

# asp.net-mvc - MVC 路由是否也会查看子域？

> ID：711994
> 
> 赞同：0
> 
> 时间：2009-04-02T23:13:39.097
> 
> 标签：asp.net-mvc, routes

.net MVC 中的路由是否/可以查看子域？

即 subdomain1.example.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-03T03:40:20.390

ASP.NET SP1 中内置的路由处理程序（请注意，它不仅适用于 MVC）不关心域名，它唯一解析的是根目录之后的内容。例如，如果您的路线是：`http://www.foo.example.com/site-root/Controller/Action/id?bar=temp`路线处理程序解析出现在站点根目录/之后的内容（注意：您的站点根目录实际上可能是“/”）。希望有帮助

# sql-server - 有人在生产环境中使用 SQL Server Spatial 吗？

> ID：711995
> 
> 赞同：0
> 
> 时间：2009-04-02T23:14:30.840
> 
> 标签：sql-server, gis

我正在寻找一些空间数据库功能，但目前无法升级到 SQL Server 2008。我遇到了这个开源[的 mssqlspatial](http://www.codeplex.com/Wiki/View.aspx?ProjectName=MsSqlSpatial&title=Features)包，它可以提供我需要的大部分功能，但是我在不知道它是否已准备好生产的情况下犹豫是否要部署它。我想知道是否有人部署了这个包。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T19:40:07.650

从未听说过 mssqlspatial，抱歉。您是否考虑过[PostGIS](http://postgis.refractions.net/)？那会给你一个开源的空间数据库，我相信它[很受重视](http://postgis.refractions.net/documentation/casestudies)。我自己从来没有用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T20:11:57.963

这不是答案……只是一些附加信息。

我们刚刚使用 SQL Server 2008，但 PostGIS 本来是我的首选（不是我的选择）。正如 MarkJ 所说，它备受推崇。

您可能想查看 SharpmapV2。它不是一个空间数据库，但你几乎所有的东西都有提供者，包括 MsSqlSpatial： [http ://sharpmapv2.googlecode.com/svn/trunk/SharpMap.Data.Providers/](http://sharpmapv2.googlecode.com/svn/trunk/SharpMap.Data.Providers/)

而且我在两个存储库中看到相同的开发人员（John Diss 看起来像一个忙碌的人），所以我认为 SharpMapv2 更新： [http ://mssqlspatial.codeplex.com/SourceControl/ListDownloadableCommits.aspx](http://mssqlspatial.codeplex.com/SourceControl/ListDownloadableCommits.aspx)******